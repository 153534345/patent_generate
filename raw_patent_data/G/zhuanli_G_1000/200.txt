标题title
基于油藏-井筒-设备评价指标集成的综合评价方法
摘要abst
本发明公开了一种基于油藏‑井筒‑设备评价指标集成的综合评价方法，具体涉及油气田开发技术领域。本发明通过获取研究区内所有井的生产数据预处理得到有效生产数据集，再根据综合评价指标筛选原则、特征重要度排序筛选综合评价指标，构造综合评价判别矩阵，利用层次分析法‑熵权法确定各综合评价指标的权重后，利用多种评价模型分别计算研究区内各井的评分结果并进行优选，得到最优综合评价模型及油井最优综合评分，并利用验证指标验证准确性。本发明综合考虑了油藏、井筒和设备对油田生产的影响，实现了对油井生产状态的多方位准确评价，为油井优化提供指向性的信息。
权利要求书clms
1.一种基于油藏-井筒-设备评价指标集成的综合评价方法，其特征在于，包括以下步骤：步骤1，基于油藏资料、井筒资料和举升设备资料，获取研究区内所有井的生产数据，构建生产数据集，并对生产数据集中各井的生产数据进行预处理，得到有效生产数据集；步骤2，基于有效生产数据集，根据综合评价指标筛选原则、特征重要度排序对筛选用于油藏-井筒-设备评价的综合评价指标，构造综合评价判别矩阵；步骤3，基于层次分析法-熵权法确定各综合评价指标的权重；步骤4，基于综合评价判别矩阵，利用TOPSIS综合评价模型、灰色关联度评价模型、熵值法综合评价模型、秩和比法综合评价模型分别计算研究区内各井的评分结果，包括油藏评价分数、井筒评价分数、设备评价分数和综合评价分数；步骤5，基于TOPSIS综合评价模型、灰色关联度评价模型、熵值法综合评价模型、秩和比法综合评价模型的评分结果进行优选，得到最优综合评价模型及油井最优综合评分；步骤6，利用验证指标验证最优综合评价模型的准确性。2.根据权利要求1所述的基于油藏-井筒-设备评价指标集成的综合评价方法，其特征在于，所述步骤1中，包括以下步骤：步骤1.1，获取研究区内所有井的生产数据，构建生产数据集，根据生产数据集中各生产数据的类型，确定各生产数据为数字型特征数据或文字型特征数据后，对生产数据集中的生产数据进行数据清洗，剔除油井生产数据集中的异常油井生产数据，并对生产数据集中缺失的生产数据进行空白值填充；步骤1.2，基于数据处理后生产数据集中的生产数据，对生产数据集中的油藏数据、井筒数据和举升设备数据进行融合，根据井号将同一口井的生产数据合并形成子数据集；步骤1.3，对生产数据集中的文字型特征数据进行标签编码，将文字型特征数据赋值转换为数字型特征数据后，对生产数据集中的各类生产数据进行标准化处理，得到有效生产数据集。3.根据权利要求2所述的基于油藏-井筒-设备评价指标集成的综合评价方法，其特征在于，在生产数据集中搜寻异常生产数据确定数据异常井后，在生产数据集中删除所有数据异常井的生产数据进行数据清洗；再在数据清洗后的生产数据集中搜寻缺失生产数据，确定存在生产数据空白值的井作为数据缺失井，获取数据缺失井的井号，判断缺失生产数据为数字型特征数据或文字型特征数据；当缺失生产数据为数字型特征数据时，根据井号对数据缺失井的空白值进行填充，若与数据缺失井位于同一排的井存在同类生产数据，则利用相同排所有井的同类生产数据平均值填充数据缺失井的生产数据，若与数据缺失井位于同一排的井均不存在同类生产数据，则利用研究区内所有井的同类生产数据的平均值填充数据缺失井的空白值；当缺失生产数据为文字型特征数据时，根据井号对数据缺失井的生产数据空白值进行填充，若与数据缺失井位于同一排的井存在同类生产数据，则利用相同排所有井中同类生产数据的众数所对应的生产数据填充数据缺失井的生产数据，若与数据缺失井位于同一排的井均不存在同类生产数据，则利用研究区内所有井的同类生产数据的众数所对应的生产数据填充数据缺失井的空白值。4.根据权利要求1所述的基于油藏-井筒-设备评价指标集成的综合评价方法，其特征在于，所述步骤2中，包括以下步骤：步骤2.1，基于综合评价指标筛选原则，根据有效生产数据集中各类生产数据所对应的生产指标，初步筛选用于油藏-井筒-设备评价的评价指标；步骤2.2，对评价指标进行相关性分析，计算各评价指标的斯皮尔曼相关性系数并作为重要性得分；步骤2.3，构建XGBoost模型，利用有效生产数据集训练XGBoost模型并验证，利用验证后的XGBoost模型确定各评价指标的重要性；步骤2.4，利用各综合评价指标所对应的生产数据构建综合评价指标矩阵，对综合评价指标矩阵进行归一化处理后，得到综合评价判别矩阵。5.根据权利要求4所述的基于油藏-井筒-设备评价指标集成的综合评价方法，其特征在于，所述步骤2.3中，具体包括以下步骤：步骤2.3.1，将有效生产数据集中的生产数据划分为评价指标和目标变量，设置XGBoost模型的精度值，并将有效生产数据集划分为测试集和训练集；步骤2.3.2，利用训练集中的生产数据训练XGBoost模型，利用XGBoost模型获取各评价指标所对应的生产数据计算各评价指标的重要性得分，并按照重要性得分降序输出，每次训练过程中获取当前XGBoost模型的计算精度并与预设精度值进行对比，XGBoost模型的计算精度已达到预设精度值，则进入步骤2.3.3中，否则，则重复步骤2.3.2继续训练XGBoost模型；步骤2.3.3，利用测试集验证XGBoost模型的计算精度已达到预设精度值，得到验证后的XGBoost模型；步骤2.3.4，将有效生产数据集中的生产数据输入至验证后的XGBoost模型中，利用XGBoost模型计算各评价指标的重要性得分并按照降序输出，得到所有评价指标的重要性排名，选取前名评价指标作为综合评价指标。6.根据权利要求1所述的基于油藏-井筒-设备评价指标集成的综合评价方法，其特征在于，所述步骤3中，包括以下步骤：步骤3.1，构建层次结构模型，层次结构模型包括目标层、准则层和方案层，其中，目标层内设置有研究区内油井生产状况排名，准则层内设置有步骤2中筛选得到的各综合评价指标，方案层内设置有井号；步骤3.2，采用熵权法构建判别矩阵，计算各综合评价指标的熵权法权重；步骤3.3，基于层次分析法构建判别矩阵，将熵权法与层次分析法相耦合，通过标度替换各综合评价指数的熵权法权重，得到各综合评价指标的权重。7.根据权利要求6所述的基于油藏-井筒-设备评价指标集成的综合评价方法，其特征在于，基于熵权法构建的判别矩阵为：式中，为行数，/＞且/＞为整数，/＞为样本总数，/＞为列数且/＞为整数，/＞为综合评价指标总数；/＞为判别矩阵中第/＞行第/＞列样本数据，对应有效生产数据集中第/＞行第/＞列的生产数据；基于线性比例变换方法标准化处理判别矩阵得到归一化矩阵；若判别矩阵中的综合评价指标为正向指标，则利用正向指标变换公式进行变换得到处理后样本数据值，若判别矩阵中的综合评价指标为负向指标，则利用负向指标变换公式进行变换得到处理后的样本数据值；所述正向指标的变换公式为： 式中，为判别矩阵中第/＞行第/＞列样本数据经处理后的样本数据值，/＞为最小值函数，/＞为最大值函数；所述负向指标的变换公式为：计算各综合评价指标的熵权法权重，如公式所示：其中，式中，为第/＞个综合评价指标的熵权法权重，/＞为第/＞个综合评价指标的信息熵，/＞为第/＞个综合评价指标中第/＞个样本数据的比重；基于层次分析法构建判别矩阵，将熵权法与层次分析法相耦合得到标度替换后的判别矩阵为： 。8.根据权利要求1所述的基于油藏-井筒-设备评价指标集成的综合评价方法，其特征在于，所述步骤4中，所述TOPSIS综合评价模型计算过程为：以研究区内的各井作为评价对象，先确定正理想解和负理想解，再计算各评价对象与正理想解和负理想解之间的距离，得到各评价对象对理想解的相对接近度，从而确定各评价对象的TOPSIS综合评价模型评分；所述灰色关联度评价模型计算过程为：以研究区内的各井作为评价对象，先选取各综合评价指标的最优样本数据，构建最优指标集，分别计算各评价对象中的各综合评价指标所对应的灰色关联度系数，得到各评价对象对理想解的灰色关联度，从而确定各评价对象的灰色关联度评价模型评分；所述熵值法综合评价模型计算过程为：以研究区内的各井作为评价对象，基于步骤3.2中计算的各综合评价指标的熵权法权重，计算各评价对象的目标分数，从而确定各评价对象的熵值法综合评价模型评分；所述秩和比法综合评价模型计算过程为：以研究区内的各井作为评价对象，基于综合评价判别矩阵计算评价对象中各综合评价指标的秩，得到秩矩阵后，计算各评价对象的秩和比值，从而确定各评价对象的秩和比法综合评价模型评分。9.根据权利要求1所述的基于油藏-井筒-设备评价指标集成的综合评价方法，其特征在于，所述步骤5中，包括以下步骤：步骤5.1，对TOPSIS综合评价模型、灰色关联度评价模型、熵值法综合评价模型、秩和比法综合评价模型进行相关性分析，计算各评价模型的斯皮尔曼相关性系数，确定各评价模型之间的相关性值；步骤5.2，以所选取评价模型与其他评价模型之间相关性值的总和作为优选样本，构建相关性矩阵，如公式所示： 式中，为TOPSIS综合评价模型与其他三个评价模型之间相关性系数的总和，，/＞；/＞为灰色关联度评价模型与其他三个评价模型之间相关性系数的总和，/＞，/＞；/＞为熵值法综合评价模型与其他三个评价模型之间相关性系数的总和，/＞，/＞；/＞为秩和比法综合评价模型与其他三个评价模型之间相关性系数的总和，/＞，/＞；/＞、/＞均为评价模型的编号，当或/＞时，表示TOPSIS综合评价模型，当/＞或/＞时，表示灰色关联度评价模型，当/＞或/＞3时，表示熵值法综合评价模型，当/＞或/＞4时，表示秩和比法综合评价模型；步骤5.3，根据各评价模型的优选样本，选取优选样本最大值所对应的评价模型作为最优综合评价模型，利用最优综合评价模型得到当前各井的油井最优综合评分。10.根据权利要求1所述的基于油藏-井筒-设备评价指标集成的综合评价方法，其特征在于，所述步骤6中，预先获取研究区井的验证指标，基于Kendall相关性系数分析计算最优综合评价模型所计算的油藏评价分数、井筒评价分数、设备评价分数和综合评价分数与验证指标之间的相关性系数，检验最优综合评价模型与验证指标之间的一致性；所述Kendall相关性系数计算公式为：式中，为Kendall相关性系数，/＞为一致对个数，/＞为分歧对个数，/＞为最优综合评价模型所计算得分序列/＞中的并列排位数量，/＞为验证指标/＞的并列排位数量。
说明书desc
技术领域本发明涉及油气田开发技术领域，具体涉及一种基于油藏-井筒-设备评价指标集成的综合评价方法。背景技术油井生产状况评价作为指导现场作业的指向性信息，为后续优化生产奠定了基础，其通过定期评价油井的生产状况，能够识别生产过程中存在的问题，有助于采取措施提高生产效率，从而最大程度地利用油藏资源，确保资源的合理开采和分配，最大程度地满足市场需求并减少浪费。所以，油井生产状况评价对于确保油气田生产的高效性、可持续性和安全性至关重要。传统的油井生产评价方法多为现场单兵作战，存在数据不共享且分析割裂的问题，其主要依托对各专业数据的单方面分析评价，经常会出现分析不到位的情况。同时，油藏井筒设备是一个相互关联且相互影响的有机整体，当油藏井筒复合型问题出现时，仅依赖油藏或井筒或设备单系统进行油井生产状况评价较为片面，治理措施针对性不强，特别是针对油藏、井筒和设备之间的共有节点分析薄弱。现阶段针对石油生产的一体化分析方法较为匮乏，多采用油藏-井筒耦合分析方法、油藏-井筒-管网耦合分析方法、一体化产能分析方法等，但是，这些分析方法分析过程中均需使用节点流体模型，假设条件过多且依赖经验，通用性较差且评价准确度较低。因此，亟需提出一种基于油藏-井筒-设备评价指标集成的综合评价方法，综合考虑油藏、井筒和举升设备，全方位多目标的评估油井生产状态。发明内容本发明旨在提高油井生产状况评价的准确性，提供了一种基于油藏-井筒-设备评价指标集成的综合评价方法，解决了现有油田评价模式单一的问题，综合考虑油藏、井筒和举升设备对油田生产状态的影响，提高了油井生产评价结果的准确性。为实现上述目的，本发明采用如下技术方案：一种基于油藏-井筒-设备评价指标集成的综合评价方法，包括以下步骤：步骤1，基于油藏资料、井筒资料和举升设备资料，获取研究区内所有井的生产数据，构建生产数据集，并对生产数据集中各井的生产数据进行预处理，得到有效生产数据集；步骤2，基于有效生产数据集，根据综合评价指标筛选原则、特征重要度排序对筛选用于油藏-井筒-设备评价的综合评价指标，构造综合评价判别矩阵；步骤3，基于层次分析法-熵权法确定各综合评价指标的权重；步骤4，基于综合评价判别矩阵，利用TOPSIS综合评价模型、灰色关联度评价模型、熵值法综合评价模型、秩和比法综合评价模型分别计算研究区内各井的评分结果，包括油藏评价分数、井筒评价分数、设备评价分数和综合评价分数；步骤5，基于TOPSIS综合评价模型、灰色关联度评价模型、熵值法综合评价模型、秩和比法综合评价模型的评分结果进行优选，得到最优综合评价模型及油井最优综合评分；步骤6，利用验证指标验证最优综合评价模型的准确性。优选地，所述步骤1中，包括以下步骤：步骤1.1，获取研究区内所有井的生产数据，构建生产数据集，根据生产数据集中各生产数据的类型，确定各生产数据为数字型特征数据或文字型特征数据后，对生产数据集中的生产数据进行数据清洗，剔除油井生产数据集中的异常油井生产数据，并对生产数据集中缺失的生产数据进行空白值填充；步骤1.2，基于数据处理后生产数据集中的生产数据，对生产数据集中的油藏数据、井筒数据和举升设备数据进行融合，根据井号将同一口井的生产数据合并形成子数据集；步骤1.3，对生产数据集中的文字型特征数据进行标签编码，将文字型特征数据赋值转换为数字型特征数据后，对生产数据集中的各类生产数据进行标准化处理，得到有效生产数据集。优选地，在生产数据集中搜寻异常生产数据确定数据异常井后，在生产数据集中删除所有数据异常井的生产数据进行数据清洗；再在数据清洗后的生产数据集中搜寻缺失生产数据，确定存在生产数据空白值的井作为数据缺失井，获取数据缺失井的井号，判断缺失生产数据为数字型特征数据或文字型特征数据；当缺失生产数据为数字型特征数据时，根据井号对数据缺失井的空白值进行填充，若与数据缺失井位于同一排的井存在同类生产数据，则利用相同排所有井的同类生产数据平均值填充数据缺失井的生产数据，若与数据缺失井位于同一排的井均不存在同类生产数据，则利用研究区内所有井的同类生产数据的平均值填充数据缺失井的空白值；当缺失生产数据为文字型特征数据时，根据井号对数据缺失井的生产数据空白值进行填充，若与数据缺失井位于同一排的井存在同类生产数据，则利用相同排所有井中同类生产数据的众数所对应的生产数据填充数据缺失井的生产数据，若与数据缺失井位于同一排的井均不存在同类生产数据，则利用研究区内所有井的同类生产数据的众数所对应的生产数据填充数据缺失井的空白值。优选地，所述步骤2中，包括以下步骤：步骤2.1，基于综合评价指标筛选原则，根据有效生产数据集中各类生产数据所对应的生产指标，初步筛选用于油藏-井筒-设备评价的评价指标；步骤2.2，对评价指标进行相关性分析，计算各评价指标的斯皮尔曼相关性系数并作为重要性得分；步骤2.3，构建XGBoost模型，利用有效生产数据集训练XGBoost模型并验证，利用验证后的XGBoost模型确定各评价指标的重要性；步骤2.4，利用各综合评价指标所对应的生产数据构建综合评价指标矩阵，对综合评价指标矩阵进行归一化处理后，得到综合评价判别矩阵。优选地，所述步骤2.3中，具体包括以下步骤：步骤2.3.1，将有效生产数据集中的生产数据划分为评价指标和目标变量，设置XGBoost模型的精度值，并将有效生产数据集划分为测试集和训练集；步骤2.3.2，利用训练集中的生产数据训练XGBoost模型，利用XGBoost模型获取各评价指标所对应的生产数据计算各评价指标的重要性得分，并按照重要性得分降序输出，每次训练过程中获取当前XGBoost模型的计算精度并与预设精度值进行对比，XGBoost模型的计算精度已达到预设精度值，则进入步骤2.3.3中，否则，则重复步骤2.3.2继续训练XGBoost模型；步骤2.3.3，利用测试集验证XGBoost模型的计算精度已达到预设精度值，得到验证后的XGBoost模型；步骤2.3.4，将有效生产数据集中的生产数据输入至验证后的XGBoost模型中，利用XGBoost模型计算各评价指标的重要性得分并按照降序输出，得到所有评价指标的重要性排名，选取前名评价指标作为综合评价指标。优选地，所述步骤3中，包括以下步骤：步骤3.1，构建层次结构模型，层次结构模型包括目标层、准则层和方案层，其中，目标层内设置有研究区内油井生产状况排名，准则层内设置有步骤2中筛选得到的各综合评价指标，方案层内设置有井号；步骤3.2，采用熵权法构建判别矩阵，计算各综合评价指标的熵权法权重；步骤3.3，基于层次分析法构建判别矩阵，将熵权法与层次分析法相耦合，通过标度替换各综合评价指数的熵权法权重，得到各综合评价指标的权重。优选地，基于熵权法构建的判别矩阵为：式中，为行数，且为整数，为样本总数，为列数且为整数，为综合评价指标总数；为判别矩阵中第行第列样本数据，对应有效生产数据集中第行第列的生产数据；基于线性比例变换方法标准化处理判别矩阵得到归一化矩阵；若判别矩阵中的综合评价指标为正向指标，则利用正向指标变换公式进行变换得到处理后样本数据值，若判别矩阵中的综合评价指标为负向指标，则利用负向指标变换公式进行变换得到处理后的样本数据值；所述正向指标的变换公式为： 式中，为判别矩阵中第行第列样本数据经处理后的样本数据值，为最小值函数，为最大值函数；所述负向指标的变换公式为：计算各综合评价指标的熵权法权重，如公式所示：其中，式中，为第个综合评价指标的熵权法权重，为第个综合评价指标的信息熵，为第个综合评价指标中第个样本数据的比重；基于层次分析法构建判别矩阵，将熵权法与层次分析法相耦合得到标度替换后的判别矩阵为： 。优选地，所述步骤4中，所述TOPSIS综合评价模型计算过程为：以研究区内的各井作为评价对象，先确定正理想解和负理想解，再计算各评价对象与正理想解和负理想解之间的距离，得到各评价对象对理想解的相对接近度，从而确定各评价对象的TOPSIS综合评价模型评分；所述灰色关联度评价模型计算过程为：以研究区内的各井作为评价对象，先选取各综合评价指标的最优样本数据，构建最优指标集，分别计算各评价对象中的各综合评价指标所对应的灰色关联度系数，得到各评价对象对理想解的灰色关联度，从而确定各评价对象的灰色关联度评价模型评分；所述熵值法综合评价模型计算过程为：以研究区内的各井作为评价对象，基于步骤3.2中计算的各综合评价指标的熵权法权重，计算各评价对象的目标分数，从而确定各评价对象的熵值法综合评价模型评分；所述秩和比法综合评价模型计算过程为：以研究区内的各井作为评价对象，基于综合评价判别矩阵计算评价对象中各综合评价指标的秩，得到秩矩阵后，计算各评价对象的秩和比值，从而确定各评价对象的秩和比法综合评价模型评分。优选地，所述步骤5中，包括以下步骤：步骤5.1，对TOPSIS综合评价模型、灰色关联度评价模型、熵值法综合评价模型、秩和比法综合评价模型进行相关性分析，计算各评价模型的斯皮尔曼相关性系数，确定各评价模型之间的相关性值；步骤5.2，以所选取评价模型与其他评价模型之间相关性值的总和作为优选样本，构建相关性矩阵，如公式所示： 式中，为TOPSIS综合评价模型与其他三个评价模型之间相关性系数的总和，，；为灰色关联度评价模型与其他三个评价模型之间相关性系数的总和，，；为熵值法综合评价模型与其他三个评价模型之间相关性系数的总和，，；为秩和比法综合评价模型与其他三个评价模型之间相关性系数的总和，，；、均为评价模型的编号，当或时，表示TOPSIS综合评价模型，当或时，表示灰色关联度评价模型，当或3时，表示熵值法综合评价模型，当或4时，表示秩和比法综合评价模型；步骤5.3，根据各评价模型的优选样本，选取优选样本最大值所对应的评价模型作为最优综合评价模型，利用最优综合评价模型得到当前各井的油井最优综合评分。优选地，所述步骤6中，预先获取研究区井的验证指标，基于Kendall相关性系数分析计算最优综合评价模型所计算的油藏评价分数、井筒评价分数、设备评价分数和综合评价分数与验证指标之间的相关性系数，检验最优综合评价模型与验证指标之间的一致性；所述Kendall相关性系数计算公式为：式中，为Kendall相关性系数，为一致对个数，为分歧对个数，为最优综合评价模型所计算得分序列中的并列排位数量，为验证指标的并列排位数量。本发明所带来的有益技术效果为：本发明方法通过将油藏评价指标、井筒评价指标和设备评价指标相结合，实现了对油井生产状态全方位多目标的准确评价，相比于传统油井生产评价方法采用单一指标进行评价时，油藏评价、井筒评价和设备评价三者彼此独立、相互割裂，本发明方法将油藏数据、井筒数据和设备数据三者相统一，通过分析筛选综合评价指标，并针对各评价方向选取综合评价模型，实现了对油井生产状态的多方位准确评价，有利于现场工作人员提高对当前油井生产状况的认知，为油井优化提供指向性的信息。附图说明图1为本发明一种基于油藏-井筒-设备评价指标集成的综合评价方法的流程图。图2为研究区内各井的油藏评价分数示意图。图3为研究区内各井的井筒评价分数示意图。图4为研究区内各井的设备评价分数示意图。图5为研究区内各井的综合评价指数评价分数示意图。具体实施方式下面结合附图与实施例对本发明作进一步详细描述。实施例1本实施例公开了一种基于油藏-井筒-设备评价指标集成的综合评价方法，如图1所示，具体包括以下步骤：步骤1，基于油藏资料、井筒资料和举升设备资料，获取研究区内所有井的生产数据，构建生产数据集，并对生产数据集中各井的生产数据进行预处理，得到有效生产数据集，包括以下步骤：步骤1.1，获取研究区内所有井的生产数据，构建生产数据集。本实施例中，所述生产数据包括油藏数据、井筒数据和举升设备数据，具体为地质参数数据、油藏产能数据、油藏动态变化数据、井筒设计数据、井轨设计数据、套管设计数据、射孔数据、举升设备设计数据、举升设备功率效率数据、举升设备能耗经济数据。根据生产数据集中各生产数据的类型，确定各生产数据的数据类型，包括数字型特征数据或文字型特征数据，其中，数字型特征参数包括冲程、冲次、油压、套压、回压、泵效、生产天数、设计井深、完钻井深、水泥上返深度、射孔厚度、射孔密度、泵深、套管壁厚、生产厚度、孔隙度、渗透率、含油饱和度和泥质含量，文字型特征参数包括井型、完井方法、固井质量和套管测试时间。对生产数据集中的生产数据进行数据清洗，在生产数据集中搜寻异常生产数据，确定存在异常生产数据的井作为数据异常井，并在生产数据集中剔除所有数据异常井的生产数据，完成对生产数据集中生产数据的数据清洗。再对生产数据集中缺失的生产数据进行空白值填充，在数据清洗后的生产数据集中搜寻缺失生产数据，确定存在生产数据空白值的井作为数据缺失井，获取数据缺失井的井号，判断缺失生产数据为数字型特征数据或文字型特征数据。当缺失生产数据为数字型特征数据时，根据井号对数据缺失井的生产数据空白值进行填充，若与数据缺失井位于同一排的井存在同类生产数据，则利用相同排所有井的同类生产数据平均值填充数据缺失井的生产数据，若与数据缺失井位于同一排的井均不存在同类生产数据，则利用研究区内所有井的同类生产数据的平均值填充数据缺失井的生产数据空白值。当缺失生产数据为文字型特征数据时，根据井号对数据缺失井的生产数据空白值进行填充，若与数据缺失井位于同一排的井存在同类生产数据，则利用相同排所有井中同类生产数据的众数所对应的生产数据填充数据缺失井的生产数据，若与数据缺失井位于同一排的井均不存在同类生产数据，则利用研究区内所有井的同类生产数据的众数所对应的生产数据填充数据缺失井的生产数据空白值。步骤1.2，基于数据处理后生产数据集中的生产数据，对生产数据集中的油藏数据、井筒数据和举升设备数据进行融合，根据井号将同一口井的生产数据合并形成子数据集。本实施例中，对于单一数据，根据井号进行拼接，将同一口井的生产数据合并形成子数据集，对于包括孔隙度、渗透率、含油饱和度和泥质含量的油藏小层数据，利用油藏厚度加权均值进行替代，将各层位的测量数据进行厚度加权计算，得到该测量数据融合而成的油藏小层数据。步骤1.3，对生产数据集中的文字型特征数据进行标签编码，将文字型特征数据赋值转换为数字型特征数据后，对生产数据集中的各类生产数据进行标准化处理，得到有效生产数据集。步骤2，基于有效生产数据集，根据综合评价指标筛选原则、特征重要度排序对筛选用于油藏-井筒-设备评价的综合评价指标，构造综合评价判别矩阵，包括以下步骤：步骤2.1，基于综合评价指标筛选原则，根据有效生产数据集中各类生产数据所对应的生产指标，初步筛选用于油藏-井筒-设备评价的评价指标。本实施例中，所述综合评价指标筛选原则包括全面性原则、目标性原则、可操作性原则、独立性原则以及参与性原则，其中，全面性原则用于确定评价对象的客观性、科学性、可行性、可比性和稳定性等关键特征；目标性原则用于确定评价对象的目标和任务，能够避免评价指标与评价对象的目标相矛盾或偏离实际情况；可操作性原则用于确保所选评价指标具有可操作性；独立性原则用于保证所选评价指标之间不存在重复或冲突；参与性原则用于考虑评价对象和评价利益相关者的意见和建议，提高评价的参与度和代表性，确保评价结果的公正性和可信度。步骤2.2，对评价指标进行相关性分析，计算各评价指标的斯皮尔曼相关性系数并作为重要性得分。步骤2.3，构建XGBoost模型，利用有效生产数据集训练XGBoost模型并进行验证，并利用验证后的XGBoost模型确定各评价指标的重要性，包括以下步骤：步骤2.3.1，将有效生产数据集中的生产数据划分为评价指标和目标变量，其中，目标变量设置为日产油量，设置XGBoost模型的精度值，并将有效生产数据集划分为测试集和训练集，测试集与训练集中生产数据的数量比为1:2。步骤2.3.2，利用训练集中的生产数据训练XGBoost模型，利用XGBoost模型获取各评价指标所对应的生产数据计算各评价指标的重要性得分，并按照重要性得分降序输出，每次训练过程中获取当前XGBoost模型的计算精度并与预设精度值进行对比，XGBoost模型的计算精度已达到预设精度值，则进入步骤2.3.3中，否则，则重复步骤2.3.2继续训练XGBoost模型。步骤2.3.3，利用测试集验证XGBoost模型的计算精度已达到预设精度值，得到验证后的XGBoost模型。步骤2.3.4，将有效生产数据集中的生产数据输入至验证后的XGBoost模型中，利用XGBoost模型计算各评价指标的重要性得分并按照降序输出，得到所有评价指标的重要性排名，选取前名评价指标作为综合评价指标。步骤2.4，利用各综合评价指标所对应的生产数据构建综合评价指标矩阵，对综合评价指标矩阵进行归一化处理后，得到综合评价判别矩阵。步骤3，基于层次分析法-熵权法确定各综合评价指标的权重，包括以下步骤：步骤3.1，构建层次结构模型，层次结构模型包括目标层、准则层和方案层，其中，目标层内设置有研究区内油井生产状况排名，准则层内设置有步骤2中筛选得到的各综合评价指标，方案层内设置有井号。步骤3.2，采用熵权法构建判别矩阵，计算各综合评价指标的熵权法权重。本实施例中，基于熵权法构建判别矩阵，得到：式中，为行数，且为整数，为样本总数，为列数且为整数，为综合评价指标总数；为判别矩阵中第行第列样本数据，对应有效生产数据集中第行第列的生产数据。基于线性比例变换方法对判别矩阵进行标准化处理，得到归一化矩阵。若判别矩阵中的综合评价指标为正向指标，则利用正向指标变换公式进行变换得到处理后样本数据值，若判别矩阵中的综合评价指标为负向指标，则利用负向指标变换公式进行变换得到处理后的样本数据值。所述正向指标的变换公式为： 式中，为判别矩阵中第行第列样本数据经处理后的样本数据值，为最小值函数，为最大值函数。所述负向指标的变换公式为：计算得到各综合评价指标的熵权法权重，如公式所示：其中，式中，为第个综合评价指标的熵权法权重，为第个综合评价指标的信息熵，为第个综合评价指标中第个样本数据的比重。步骤3.3，基于层次分析法构建判别矩阵，将熵权法与层次分析法相耦合，通过标度替换为各综合评价指数的熵权法权重，得到各综合评价指标的权重。所述标度替换后的判别矩阵为： 式中，为标度替换后的判别矩阵。本实施例中，再构建判别矩阵后，对判别矩阵进行一致性检验，通过计算一致性比例判断标度替换是否合理，调整判别矩阵的阶数，当一致性比例时，表明判别矩阵的一致性检验合格。步骤4，基于综合评价判别矩阵，利用TOPSIS综合评价模型、灰色关联度评价模型、熵值法综合评价模型、秩和比法综合评价模型分别计算研究区内各井的评分结果，包括油藏评价分数、井筒评价分数、设备评价分数和综合评价分数。步骤5，基于TOPSIS综合评价模型、灰色关联度评价模型、熵值法综合评价模型、秩和比法综合评价模型的评分结果进行优选，得到最优综合评价模型及油井最优综合评分，具体包括以下步骤：步骤5.1，对TOPSIS综合评价模型、灰色关联度评价模型、熵值法综合评价模型、秩和比法综合评价模型进行相关性分析，计算得到各评价模型的斯皮尔曼相关性系数，确定各评价模型之间的相关性值。步骤5.2，基于TOPSIS综合评价模型、灰色关联度评价模型、熵值法综合评价模型、秩和比法综合评价模型的斯皮尔曼相关性系数，构建相关性矩阵，相关性矩阵/＞以所选取评价模型与其他评价模型之间相关性值的总和作为优选样本。所述相关性矩阵为： 式中，为TOPSIS综合评价模型与其他三个评价模型之间相关性系数的总和，，；为灰色关联度评价模型与其他三个评价模型之间相关性系数的总和，，；为熵值法综合评价模型与其他三个评价模型之间相关性系数的总和，，；为秩和比法综合评价模型与其他三个评价模型之间相关性系数的总和，，；、均为评价模型的编号，当或时，表示TOPSIS综合评价模型，当或时，表示灰色关联度评价模型，当或3时，表示熵值法综合评价模型，当或4时，表示秩和比法综合评价模型。步骤5.3，根据各评价模型的优选样本，选取优选样本最大值所对应的评价模型作为最优综合评价模型，利用最优综合评价模型得到当前各井的油井最优综合评分。步骤6，利用验证指标验证最优综合评价模型的准确性。通过预先获取研究区井的验证指标，基于Kendall相关性系数分析计算最优综合评价模型所计算的油藏评价分数、井筒评价分数、设备评价分数和综合评价分数与验证指标之间的相关性系数，检验最优综合评价模型与验证指标之间的一致性。所述Kendall相关性系数计算公式为：式中，为Kendall相关性系数，为一致对个数，为分歧对个数，为最优综合评价模型所计算得分序列中的并列排位数量，为验证指标的并列排位数量。实施例2本实施例采用实施例1中所公开的基于油藏-井筒-设备评价指标集成的综合评价方法对某油田的现场数据进行评价。步骤1，基于油藏资料、井筒资料和举升设备资料，获取研究区内所有井的生产数据，构建生产数据集，并对生产数据集中各井的生产数据进行预处理，得到有效生产数据集。本实施例中共计获取2610条井筒基础数据、26178条井轨相关数据、5307条套管相关数据，其中包含74条套损相关数据、13860条射孔相关数据、4825条设备基础数据，其中包含985条井下作业数据、4825条设备效率功率数据、4825条能耗经济数据、94376条油藏基础地质数据、4825条产能数据、65条动态特征数据。首先，对研究区内所有井的生产数据进行预处理，并对生产数据集中的文字型特征数据进行标签编码，得到生产数据集。本实施例中生产数据集中包括65个子数据集，包括目前井别、油层顶深、油层底深、油层中部、深度、原始地层压力、原始饱和压力、原始地层温度、井口横坐标、井口纵坐标、井型、设计井深、完钻井深、完井方法、油补距、套补距、人工井底、井底位移、位移方位、水泥上返深度、固井质量、钻探目的、最大狗腿度、最大挠度、狗腿挠度影响下泵、最大井斜深度、最大井斜斜度、钻井液泥浆密度、冲程、冲次、油压、套压、回压、电压、电流、最大有功功率、最小有功功率、日产油、日产液、日产水、日含水率、泵径、泵深、泵效、动液面深度、游动凡尔打开载荷、游动凡尔关闭载荷、固定凡尔打开载荷、固定凡尔关闭载荷、上冲程斜率、下冲程斜率、下冲程有效冲程、充满程度、上冲程平均载荷、下冲程平均载荷、最大载荷、最小载荷、功图故障类型、水力功率、电机功率、地面效率、井下效率、系统效率、光杆功率、百米吨夜耗电、月产油、月产液、月产水、年产油、年产液、测量深度、垂直深度、井斜角、方位角、套管外径、套管壁厚、套管下深、套管内径、套管总长、砂层顶深、砂层底深、砂层厚度、孔隙度、渗透率、含油饱和度、泥质含量、岩性、射孔密度、射孔段顶深、射孔段底深、射孔厚度、套损点、套损类型、免修期、检泵周期、动液面变化率、沉没度变化率、日产油变化率、含水变化率。步骤2，基于有效生产数据集，根据综合评价指标筛选原则、特征重要度排序对筛选用于油藏-井筒-设备评价的综合评价指标，构造综合评价判别矩阵。本实施例中，基于综合评价指标筛选原则，根据有效生产数据集中各类生产数据所对应的生产指标，初步筛选得到用于油藏-井筒-设备评价的评价指标，其中，井筒基础数据包括完钻井深、完井方法、水泥上返深度、固井质量，套管数据包括套损点、油层套管外径、油层套管内径、油层套管壁厚、套管下深，射孔数据包括射孔总厚度、加权射孔密度，井轨数据包括井型、最大狗腿度、最大挠度、狗腿挠度影响下泵，设备基础数据包括冲程、冲次、油压、套压、回压、泵径、泵效、充满程度、上冲程平均载荷、下冲程平均载荷、最大载荷、最小载荷，功率数据包括水力功率、电机功率、光杆功率，效率数据包括地面效率、井下效率、系统效率，经济数据包括百米吨夜耗电、生产时间、生产天数、故障类型、免修期、检泵周期，地质基础数据包括砂层厚度、生产厚度、孔隙度、渗透率、含油饱和度、泥质含量，产能数据包括日产液量、日产油量、日产水量、日含水率、月产油量、月产液量、月产水量、年产液量、年产油量、年产水量，动态数据包括动液面变化率、沉没度变化率、日产油变化率、含水变化率。去除冗余指标后，利用有效生产数据集训练并进验证过的XGBoost模型计算各评价指标的斯皮尔曼相关性系数并作为重要性得分，得到油压与回压相关性为0.96，日产油量和月产油量相关性为0.68，日产液量和月产液量相关性为0.74，日产水量和月产水量相关性为0.77，生产厚度与砂层厚度相关性为0.94。根据各评价指标的重要性得分对评价指标进行二次筛选，二次筛选后得到的评价指标中，井筒基础数据包括完钻井深、完井方法、水泥上返深度、固井质量，套管数据包括套损点、油层套管外径、油层套管内径、油层套管壁厚、套管下深，射孔数据包括射孔总厚度、加权射孔密度，井轨数据包括井型、最大狗腿度、最大挠度、狗腿挠度影响下泵，设备基础数据包括冲程、冲次、油压、套压、泵径、泵效、充满程度、上冲程平均载荷、下冲程平均载荷、最大载荷、最小载荷，功率数据包括水力功率、电机功率、光杆功率，效率数据包括地面效率、井下效率、系统效率，经济数据包括百米吨夜耗电、生产时间、生产天数、故障类型、免修期、检泵周期，地质基础数据包括生产厚度、孔隙度、渗透率、含油饱和度、泥质含量，产能数据包括日产液量、日产油量、日产水量、日含水率、年产液量、年产油量、年产水量，动态数据包括动液面变化率、沉没度变化率、日产油变化率、含水变化率。根据各评价指标的重要度排序，优选重要的评价指标，按照重要度进行排序，油藏相关指标保留前12位，按照重要度由高到低依次为日产油量、生产厚度、日产油变化率、日产液量、含油饱和度、孔隙度、渗透率、含水变化率、日含水量、泥质含量、沉没度变化率、动液面变化率、年产油量、年产水量、年产液量；井筒相关指标保留前8位，按照重要度由高到低依次为固井质量、水泥上返深度、最大狗腿度、最大扰度、狗腿度扰度影响下泵、套损点、油层套管壁厚、完钻井深、完钻方法、油层套管外径、油层套管内径、套管下深、射孔总厚度、加权射孔密度；举升设备相关指标保留前15位，按照重要度由高到低依次为系统效率、泵效、冲程、电机功率、冲次、百米吨夜耗电、油压、套压、生产时间、检泵周期、地面效率、免修期、井下效率、生产天数、故障类型、泵径、充满程度、最小载荷、下冲程平均载荷、上冲程平均载荷、最大载荷。由此最终筛选得到综合评价指标为完钻井深、水泥上返深度、固井质量、套损点、油层套管壁厚、最大狗腿度、最大挠度、狗腿挠度影响下泵、冲程、冲次、油压、套压、泵效、水力功率、电机功率、光杆功率、地面效率、井下效率、系统效率、百米吨夜耗电、生产时间、生产天数、故障类型、免修期、检泵周期、生产厚度、孔隙度、渗透率、含油饱和度、泥质含量、日产液量、日产油量、日产水量、日含水率、沉没度变化率、日产油变化率、含水变化率。步骤3，基于层次分析法-熵权法确定各综合评价指标的权重，得到完钻井深的指标权重为0.013、水泥上返深度的指标权重为0.013、固井质量的指标权重为0.088、套损点的指标权重为0.014、油层套管壁厚的指标权重为0.014、最大狗腿度的指标权重为0.012、最大挠度的指标权重为0.012、狗腿挠度影响下泵的指标权重为0.015、冲程的指标权重为0.012、冲次的指标权重为0.012、油压的指标权重为0.014、套压的指标权重为0.012、泵效的指标权重为0.018、水力功率的指标权重为0.012、电机功率的指标权重为0.012、系统效率的指标权重为0.091、百米吨夜耗电的指标权重为0.089、生产时间的指标权重为0.018、生产天数的指标权重为0.018、故障类型的指标权重为0.018、免修期的指标权重为0.018、检泵周期的指标权重为0.024、生产厚度的指标权重为0.027、孔隙度的指标权重为0.025、渗透率的指标权重为0.028、含油饱和度的指标权重为0.024、泥质含量的指标权重为0.022、日产液量的指标权重为0.028、日产油量的指标权重为0.190、日含水率的指标权重为0.018、光杆功率的指标权重为0.011、地面效率的指标权重为0.014、井下效率的指标权重为0.009、沉没度变化率的指标权重为0.018、日产油变化率的指标权重为0.018、含水变化率的指标权重为0.019。步骤4，利用TOPSIS综合评价模型、灰色关联度评价模型、熵值法综合评价模型、秩和比法综合评价模型分别计算研究区内各井的评分结果，包括油藏评价分数、井筒评价分数、设备评价分数和综合评价分数。步骤5，基于TOPSIS综合评价模型、灰色关联度评价模型、熵值法综合评价模型、秩和比法综合评价模型的评分结果进行优选，得到最优综合评价模型及油井最优综合评分。本实施例中，所述油藏最优综合评价模型结果如表1所示。表1 油藏最优综合评价模型结果；。所述井筒最优综合评价模型结果如表2所示。表2 井筒最优综合评价模型结果；。所述设备最优综合评价模型结果如表3所示。表3 设备最优综合评价模型结果；。所述综合评价指数最优综合评价模型结果如表4所示。表4 综合评价指数最优综合评价模型结果；。步骤6，利用验证指标验证最优综合评价模型的准确性。本实施例中，利用油藏最优综合评价模型、井筒最优综合评价模型、设备最优综合评价模型和综合评价指数最优综合评价模型分别评价研究区内各井，得到研究区内各井的评价分数，其中，图2为研究区内各井的油藏评价分数示意图，图3为研究区内各井的井筒评价分数示意图，图4为研究区内各井的设备评价分数示意图，图5为研究区内各井的综合评价指数评价分数示意图。分析图2~图5可得，综合评价指数评价分数与其验证指标日产油量相关性强，Kendall相关性值为0.80，综合评价指数评价分数自左向右整体增大，与日产油量的趋势一致；同时，油藏评价分数与其验证指标的相关性值为0.77、设备评价分数与其验证指标的相关性值为0.65，表明油藏和设备方面得分与其验证指标都具有良好相关性，结合图3可知，井筒评价分数与其验证指标固井质量关系是井筒分数越高，固井质量为0，对应其文字型为固井质量合格，而井筒分数低，若干井的固井质量为1，对应其文字型为固井质量不合格，从而验证了本发明方法的评价结果具有较高的准确性。综上所述，本发明方法能够多方位准确的评价油井生产状况，有利于现场工作人员提高对当前油井生产状况的认知，为油井优化提供指向性的信息。当然，上述说明并非是对本发明的限制，本发明也并不仅限于上述举例，本技术领域的技术人员在本发明的实质范围内所做出的变化、改型、添加或替换，也应属于本发明的保护范围。
