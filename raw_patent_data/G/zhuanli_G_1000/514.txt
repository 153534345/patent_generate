标题title
弱小目标移动舰船尾迹与舰船分离的定位检测方法
摘要abst
本发明属于计算机应用技术领域，涉及弱小目标移动舰船尾迹与舰船分离的定位检测方法，包括：根据弱小目标舰船检测图，获取网络检测后的检测框的像素坐标；根据检测框与方向框长度，以及灰度值分布特点确定舰船航行方向；确定两条开尔文尾迹像素点坐标，利用最小二乘法拟合直线，获取直线倾斜角,以检测框中点为中心旋转检测框，获得与航行方向一致的检测框；利用像素灰度值特征确定舰船准确位置，根据舰船大小与分辨率确定舰船标注框的大小，在检测图中标出与旋转框角度相同的矩形框，从而确定舰船准确位置；本发明能够输出舰船准确定位图片，完成对弱小移动舰船目标的舰船与尾迹分离，实现舰船的精确定位。
权利要求书clms
1.弱小目标移动舰船尾迹与舰船分离的定位检测方法，根据弱小目标舰船检测图，获取网络检测后的检测框的像素坐标，其特征在于：包括以下步骤：S1、根据检测框与方向框的长度，以及像素灰度值分布特点，确定舰船航行方向；S2、确定两条开尔文尾迹像素点坐标，利用最小二乘法拟合直线，获取直线倾斜角,以检测框中点为中心旋转检测框，获得与航行方向一致的检测框；S3、利用像素灰度值特征确定舰船准确位置，根据舰船大小与分辨率确定舰船标注框的大小，在检测图中标出与旋转框角度相同的矩形框，从而确定舰船准确位置。2.根据权利要求1所述的弱小目标移动舰船尾迹与舰船分离的定位检测方法，其特征在于：在S1中，确定舰船航行方向的具体步骤如下：对获取图像中检测框左上和右下角像素坐标进行编号，左上角像素坐标为右上角像素坐标为，判断x与y方向框长度；若x方向框短，取y1+6所在行所有像素灰度值大小，判断灰度值大于140个数为a;若y方向框短，取y2-6所在行所有像素灰度值大小，判断灰度值大于140个数为b,再比较a与b的大小；若a＞=b，则确定x2方向为舰船航行方向，获取舰船前进方向；若a＜b，则确定x1方向为舰船航行方向。3.根据权利要求1所述的弱小目标移动舰船尾迹与舰船分离的定位检测方法，其特征在于：在S2中，旋转检测框的具体步骤如下：获取y2-m所在行每个像素点灰度值大于140的第一个点坐标为与最后一个点的坐标记为，m取值为非负整数；利用最小二乘法对各点与进行各点拟合，获取拟合后直线的斜率和/＞，/＞和/＞的表达式为：；/＞ ；获取拟合后的直线倾斜角为和/＞，/＞和/＞的表达式为： ；/＞；根据开尔文尾迹得，舰船航行方向为两条直线的中线，则航行方向倾斜角的表达式为： ；根据开尔文尾迹得，舰船航行方向为两条直线的中线，则航行方向倾斜角为；检测框以/2,/2)为中心顺时针旋转角度，得到旋转后的矩形检测框。4.根据权利要求1所述的弱小目标移动舰船尾迹与舰船分离的定位检测方法，其特征在于：在S3中，利用像素灰度值特征确定舰船准确位置的具体步骤如下：获取y2-n所在行像素点的灰度值大于140的个数t，当第一个t＞=3时记录n的值，并获取此行中灰度值第个大于140的像素点坐标，n取值为非负整数；取此点为矩形框左下角，以数据集分辨率和目标舰船的大小确定所需框的长和宽/＞，通过下述表达式得舰船标注框的大小；；/＞ ；当舰船航行方向为x2时，以为矩形框下边框中点，当舰船航行方向为x1时，为矩形框上边框中点；当舰船航行方向为y1时，为矩形框左边框中点; 当舰船航行方向为y2时，为矩形框右框中点，点所在边框为舰船标注框的宽边。
说明书desc
技术领域本发明涉及目标识别技术领域，具体涉及弱小目标移动舰船尾迹与舰船分离的定位检测方法。背景技术在现有的目标弱小目标检测方法中，移动舰船目标往往呈现出目标占比小、特征信息弱、形状纹理不明显等特性，在检测中通常以尾迹的特征识别出目标，现有的方法中专注于提高弱小移动舰船目标的检测精度，以及提高检测框对舰船定位的精度，但未确定舰船实际航行方向，以及缺乏对舰船实际大小的考虑。发明内容为此，本发明提供弱小目标移动舰船尾迹与舰船分离的定位检测方法，以解决背景技术中提出的问题。为了实现上述目的，本发明提供如下技术方案：弱小目标移动舰船尾迹与舰船分离的定位检测方法，根据弱小目标舰船检测图，获取网络检测后的检测框的像素坐标，包括以下步骤：步骤1、根据检测框与方向框的长度，以及灰度值分布特点确定舰船航行方向；步骤2、确定两条开尔文尾迹像素点坐标，利用最小二乘法拟合直线，获取直线倾斜角,以检测框中点为中心旋转检测框，获得与航行方向一致的检测框；步骤3、利用像素灰度值特征确定舰船准确位置，根据舰船大小与分辨率确定舰船标注框的大小，在检测图中标出与旋转框角度相同的矩形框，从而确定舰船准确位置。优选的，步骤1中确定舰船航行方向的具体步骤如下：对获取图像中检测框左上和右下角像素坐标进行编号，左上角像素坐标为右上角像素坐标为，判断x与y方向框长度；若x方向框短，取y1+6所在行所有像素灰度值大小，判断灰度值个数大于140个数为a;若y方向框短，取y2-6所在行所有像素灰度值大小，判断灰度值大于140个数为b,再判断a与b的大小；若a＞=b，则确定x2方向为舰船航行方向，获取舰船前进方向；若a＜b，则确定x1方向为舰船航行方向。优选的，步骤2中旋转检测框的具体步骤如下：获取y2-m所在每行像素点灰度值大于140的第一个点坐标为与最后一个点的坐标记为，m取值为非负整数；利用最小二乘法对各点与进行各点拟合，获取拟合后直线的斜率和/＞，如下式：； 获取拟合后的直线倾斜角为和/＞，如下式： ； 根据开尔文尾迹得，舰船航行方向为两条直线的中线，则航行方向倾斜角为下式： ； 根据开尔文尾迹得，舰船航行方向为两条直线的中线，则航行方向倾斜角为；检测框以/2,/2)为中心顺时针旋转角度，得到旋转后的矩形检测框。优选的，步骤3中利用像素灰度值特征确定舰船准确位置的具体步骤如下：获取y2-n所在行像素点的灰度值大于140的个数t，当第一个t＞=3时记录n的值，并获取此行中灰度值第个大于140的像素点坐标，n取值为非负整数；取此点为矩形框左下角，以数据集分辨率和目标舰船的大小确定所需框的长和宽/＞，通过下式得舰船标注框的大小； ；当舰船航行方向为x2时，以为矩形框下边框中点为矩形框上边框中点；当舰船航行方向为y1时，为矩形框左边框中点; 当舰船航行方向为y2时，为矩形框右边框中点）, 点所在边框为舰船标注框的宽边。有益效果：本发明中获取网络检测后检测框的像素坐标，输入通过网络检测后的弱小移动舰船目标图片，经过本发明的处理，输出舰船准确定位图片，完成对弱小移动舰船目标的舰船与尾迹分离，实现舰船的精确定位；本发明在检测框旋转中，通过获取移动舰船的开尔文尾迹上的像素坐标点，对坐标点进行拟合获取直线的倾斜角，从获取两条开尔文尾迹上的角平分线的倾斜角，角平分线的倾斜角即为舰船的航行角度，从而实现对舰船检测框的旋转，本发明利用舰船在运动是都会产生的开尔文尾迹，使得本发明的适用性更强。本发明在根据舰船大小与分辨率确定舰船标注框的大小中，可结合根据舰船的实际大小和分辨率确定舰船在图片中具体大小，从而更精确确定舰船位置，实现舰船和尾迹的分离。附图说明图1是本发明实施例1提供的一种弱小移动舰船目标尾迹与舰船分离的方法的流程图；图2是本发明实施例1提供的弱小移动舰船目标检测框旋转流程；图3是本发明实施例1提供的本发明中舰船航向的规定方法。具体实施方式以下由特定的具体实施例说明本发明的实施方式，熟悉此技术的人士可由本说明书所揭露的内容轻易地了解本发明的其他优点及功效，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例1：如图1所示，本实施例提供了弱小目标移动舰船尾迹与舰船分离的定位检测方法，根据弱小目标舰船检测图，获取网络检测后检测框的像素坐标，包括以下步骤：步骤1、根据检测框与方向框长度，以及灰度值分布特点确定舰船航行方向；其中确定舰船航行方向通过以下步骤得到：对获取图像中检测框左上和右下角像素坐标进行编号，左上角像素坐标为右上角像素坐标为，判断x与y方向框长度；若x方向框短，取y1+6所在行所有像素灰度值大小，判断灰度值大于140个数为a;若y方向框短，取y2-6所在行所有像素灰度值大小，判断灰度值大于140个数为b,再判断a与b的大小；若a＞=b，则确定x2方向为舰船航行方向，获取舰船前进方向；若a＜b，则确定x1方向为舰船航行方向。步骤2、确定两条开尔文尾迹像素点坐标，利用最小二乘法拟合直线，获取直线倾斜角,以检测框中点为中心旋转检测框，获得与航行方向一致的检测框；其中检测框旋转流程如图2所示，通过以下步骤得到：以x2为航行方向为例，获取y2-m所在每行像素点灰度值大于140的第一个点坐标为与最后一个点的坐标记为，m取值为非负整数；利用最小二乘法对各点与进行各点拟合，获取拟合后直线的斜率和/＞，如下式：； 获取拟合后的直线倾斜角为和/＞，如下式根据开尔文尾迹得，舰船航行方向为两条直线的中线，则航行方向倾斜角为下式：根据开尔文尾迹得，舰船航行方向为两条直线的中线，则航行方向倾斜角为；检测框以/2,/2)为中心顺时针旋转角度，得到旋转后的矩形检测框。步骤3、利用像素灰度值特征确定舰船准确位置，根据舰船大小与分辨率确定舰船标注框的大小，在检测图中标出与旋转框角度相同的矩形框，从而确定舰船准确位置。其中利用像素灰度值特征确定舰船准确位置通过以下步骤得到：获取y2-n所在行像素点的灰度值大于140的个数t，当第一个t＞=3时记录n的值，并获取此行中灰度值第个大于140的像素点坐标，n取值为非负整数；取此点为矩形框左下角，以数据集分辨率和目标舰船的大小确定所需框的长和宽/＞，通过下式得舰船标注框的大小； ；如图3所示，当舰船航行方向为x2时，以为矩形框下边框中点为矩形框上边框中点；当舰船航行方向为y1时，为矩形框左边框中点; 当舰船航行方向为y2时，为矩形框右框中点）,点所在边框为舰船标注框的宽边。根据矩形框的大小画与旋转检测框平行的红色框，得到舰船准确位置，从而实现舰船与尾迹的分离。虽然，上文中已经用一般性说明及具体实施例对本发明作了详尽的描述，但在本发明基础上，可以对之作一些修改或改进，这对本领域技术人员而言是显而易见的。因此，在不偏离本发明精神的基础上所做的这些修改或改进，均属于本发明要求保护的范围。
