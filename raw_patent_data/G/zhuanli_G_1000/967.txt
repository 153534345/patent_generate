标题title
一种基于LED阵列的可见光混合定位方法及系统
摘要abst
本发明公开了一种基于LED阵列的可见光混合定位方法及系统，涉及通信技术领域。包括：发送端调取LED阵列信息，将LED阵列信息编码为数字串行信息，将数字串行信息转换为光信号并发送；接收端通过图像传感器获取LED阵列图像，通过光电传感器获取光信号并转换为数字串行信息，并根据LED阵列图像、数字串行信息以及定位算法，获取室内实时定位结果。本发明能够通过可见光定位技术，实现高精度的室内实时定位。通过使用本发明在不会影响电磁环境的前提下，可实现误差为分米级的室内可见光实时高精度定位，同时该系统LED阵列发光模块也能满足室内照明需求，实现了可见光定位与固态照明的双重优势。
权利要求书clms
1.一种基于LED阵列的可见光混合定位方法，其特征在于，所述方法由基于LED阵列的可见光混合定位系统实现，所述基于LED阵列的可见光混合定位系统包括发送端以及接收端，所述方法包括：S1、所述发送端调取LED阵列信息，将所述LED阵列信息编码为数字串行信息，将所述数字串行信息转换为光信号并发送；S2、所述接收端通过图像传感器获取LED阵列图像，通过光电传感器获取所述光信号并转换为数字串行信息，并根据所述LED阵列图像、数字串行信息以及定位算法，获取室内实时定位结果。2.根据权利要求1所述的方法，其特征在于，所述S1中的LED阵列信息，包括LED阵列的ID信息与坐标信息。3.根据权利要求1所述的方法，其特征在于，所述S1中的发送端，包括ID编码模块以及LED阵列模块；其中，所述ID编码模块，用于调取LED阵列信息，将所述LED阵列信息编码为数字串行信息；所述LED阵列模块，用于将所述数字串行信息转换为光信号。4.根据权利要求3所述的方法，其特征在于，所述ID编码模块，包括信号驱动板；所述信号驱动板，用于记录LED阵列的ID信息及坐标信息，并持续输出对应的数字串行信息。5.根据权利要求3所述的方法，其特征在于，所述LED阵列模块，包括LED驱动电路及LED阵列发光模块；所述LED驱动电路，用于将所述数字串行信息调制成电流信号；其中，所述电流信号用于驱动所述LED阵列发光模块；所述LED阵列发光模块，用于通过LED阵列灯发送光信号。6.根据权利要求1所述的方法，其特征在于，所述S2中的接收端，包括混合接收模块以及定位解算模块；其中，所述混合接收模块，用于通过图像传感器获取LED阵列图像；通过光电传感器接收所述光信号，并将所述光信号转换为数字串行信息；所述定位解算模块，用于根据所述LED阵列图像，得到图像定位信息，根据所述数字串行信息，得到LED阵列信息，并根据所述图像定位信息、LED阵列信息以及定位算法，获取室内实时定位结果。7.根据权利要求6所述的方法，其特征在于，所述通过光电传感器接收所述光信号，并将所述光信号转换为数字串行信息，包括：通过光电传感器接收所述光信号，并将所述光信号转换为电流信号；经由信号恢复电路将所述电流信号转换成电压信号，并对所述电压信号进行放大；通过低通滤波电路对放大后的电压信号进行滤波，得到滤波后的电压信号；通过判决电路对所述滤波后的电压信号进行判断，得到数字串行信息。8.根据权利要求6所述的方法，其特征在于，所述根据所述LED阵列图像，得到图像定位信息，包括：对所述LED阵列图像进行灰度二值化；对灰度二值化后的图像，通过形态学运算进行去噪；通过连通域识别算法，提取去噪后的图像中各个LED灯的图像坐标，将所述图像坐标作为图像定位信息。9.根据权利要求6所述的方法，其特征在于，所述根据所述图像定位信息、LED阵列信息以及定位算法，获取室内实时定位结果，包括：S41、根据所述图像定位信息以及定位算法，计算所述接收端与发送端之间的相对位置信息；S42、根据所述LED阵列信息以及相对位置信息，计算得到室内实时定位结果。10.一种基于LED阵列的可见光混合定位系统，其特征在于，所述系统包括发送端以及接收端，其中：所述发送端，用于调取LED阵列信息，将所述LED阵列信息编码为数字串行信息，将所述数字串行信息转换为光信号并发送；所述接收端，用于通过图像传感器获取LED阵列图像，通过光电传感器获取所述光信号并转换为数字串行信息，并根据所述LED阵列图像、数字串行信息以及定位算法，获取室内实时定位结果。
说明书desc
技术领域本发明涉及通信技术领域，尤其涉及一种基于LED阵列的可见光混合定位方法及系统。背景技术近年来，随着智能终端的日益普及和物联网技术的迅速发展，人们对于LBS的需求快速增长。同时室内活动开始占据了人们生活中的大部分时间，而对于环境复杂的室内来说，位置信息显得尤为重要。可见光室内定位技术是继传统室内无线定位技术提出的一种利用通用照明LED设备发送信息，同时使用图像传感器或光电传感器接收光信号，并从中解算出定位信息，并藉由定位算法实现定位功能的新兴绿色定位技术。可见光定位具有绿色节能环保、抗电磁干扰等众多优良特性。而且由于LED具有寿命长、功耗低、绿色环保等特点，目前已经成为主要的室内照明设备。由此，基于可见光的室内定位系统减少了对额外硬件的需求和部署，能够实现照明、通信、定位一体化，是一种具有实际应用价值的室内定位实现方案。发明内容本发明针对现有的可见光定位系统，受限于复杂的算法或成本，难以实际应用的问题，提出了本发明。为解决上述技术问题，本发明提供如下技术方案：一方面，本发明提供了一种基于LED阵列的可见光混合定位方法，该方法由基于LED阵列的可见光混合定位系统实现，该系统包括发送端以及接收端，该方法包括：S1、发送端调取LED阵列信息，将LED阵列信息编码为数字串行信息，将数字串行信息转换为光信号并发送。S2、接收端通过图像传感器获取LED阵列图像，通过光电传感器获取光信号并转换为数字串行信息，并根据LED阵列图像、数字串行信息以及定位算法，获取室内实时定位结果。可选地，S1中的LED阵列信息，包括LED阵列的ID信息与坐标信息。可选地，S1中的发送端，包括ID编码模块以及LED阵列模块。其中，ID编码模块，用于调取LED阵列信息，将LED阵列信息编码为数字串行信息。LED阵列模块，用于将数字串行信息转换为光信号。可选地，ID编码模块，包括信号驱动板。信号驱动板，用于记录LED阵列的ID信息及坐标信息，并持续输出对应的数字串行信息。可选地，LED阵列模块，包括LED驱动电路及LED阵列发光模块。LED驱动电路，用于将数字串行信息调制成电流信号；其中，电流信号用于驱动LED阵列发光模块。LED阵列发光模块，用于通过LED阵列灯发送光信号。可选地，S2中的接收端，包括混合接收模块以及定位解算模块。其中，混合接收模块，用于通过图像传感器获取LED阵列图像；通过光电传感器接收光信号，并将光信号转换为数字串行信息。定位解算模块，用于根据LED阵列图像，得到图像定位信息，根据数字串行信息，得到LED阵列信息，并根据图像定位信息、LED阵列信息以及定位算法，获取室内实时定位结果。可选地，通过光电传感器接收光信号，并将光信号转换为数字串行信息，包括：通过光电传感器接收光信号，并将光信号转换为电流信号。经由信号恢复电路将电流信号转换成电压信号，并对电压信号进行放大。通过低通滤波电路对放大后的电压信号进行滤波，得到滤波后的电压信号。通过判决电路对滤波后的电压信号进行判断，得到数字串行信息。可选地，根据LED阵列图像，得到图像定位信息，包括：对LED阵列图像进行灰度二值化。对灰度二值化后的图像，通过形态学运算进行去噪。通过连通域识别算法，提取去噪后的图像中各个LED灯的图像坐标，将图像坐标作为图像定位信息。可选地，根据所述图像定位信息、LED阵列信息以及定位算法，获取室内实时定位结果，包括：S41、根据图像定位信息以及定位算法，计算接收端与发送端之间的相对位置信息。S42、根据LED阵列信息以及相对位置信息，计算得到室内实时定位结果。另一方面，本发明提供了一种基于LED阵列的可见光混合定位系统，该系统包括发送端以及接收端，其中：发送端，用于调取LED阵列信息，将LED阵列信息编码为数字串行信息，将数字串行信息转换为光信号并发送。接收端，用于通过图像传感器获取LED阵列图像，通过光电传感器获取光信号并转换为数字串行信息，并根据LED阵列图像、数字串行信息以及定位算法，获取室内实时定位结果。可选地，LED阵列信息，包括LED阵列的ID信息与坐标信息。可选地，发送端，包括ID编码模块以及LED阵列模块。其中，ID编码模块，用于调取LED阵列信息，将LED阵列信息编码为数字串行信息。LED阵列模块，用于将数字串行信息转换为光信号。可选地，ID编码模块，包括信号驱动板。信号驱动板，用于记录LED阵列的ID信息及坐标信息，并持续输出对应的数字串行信息。可选地，LED阵列模块，包括LED驱动电路及LED阵列发光模块。LED驱动电路，用于将数字串行信息调制成电流信号；其中，电流信号用于驱动LED阵列发光模块。LED阵列发光模块，用于通过LED阵列灯发送光信号。可选地，接收端，包括混合接收模块以及定位解算模块。其中，混合接收模块，用于通过图像传感器获取LED阵列图像；通过光电传感器接收光信号，并将光信号转换为数字串行信息。定位解算模块，用于根据LED阵列图像，得到图像定位信息，根据数字串行信息，得到LED阵列信息，并根据图像定位信息、LED阵列信息以及定位算法，获取室内实时定位结果。可选地，接收端，进一步用于：通过光电传感器接收光信号，并将光信号转换为电流信号。经由信号恢复电路将电流信号转换成电压信号，并对电压信号进行放大。通过低通滤波电路对放大后的电压信号进行滤波，得到滤波后的电压信号。通过判决电路对滤波后的电压信号进行判断，得到数字串行信息。可选地，接收端，进一步用于：对LED阵列图像进行灰度二值化。对灰度二值化后的图像，通过形态学运算进行去噪。通过连通域识别算法，提取去噪后的图像中各个LED灯的图像坐标，将图像坐标作为图像定位信息。可选地，接收端，进一步用于：S41、根据图像定位信息以及定位算法，计算接收端与发送端之间的相对位置信息。S42、根据LED阵列信息以及相对位置信息，计算得到室内实时定位结果。上述技术方案，与现有技术相比至少具有如下有益效果：上述方案，LED作为新型环保且高能效的照明设备己得到广泛应用，因此基于室内LED 照明的可见光室内定位系统的基础设施条件更完善，仅需对现有照明设备进行改造即可使用，有效降低定位系统的部署成本。相对于其他室内定位技术，可见光光信号受到多径效应的影响较小，稳定性更好，可见光室内定位系统的定位性能会更优。可见光光源不产生电磁辐射，因此可见光定位系统能被应用于对电磁信号敏感的场所。可见光信号无法穿透障碍物，不易被截获，具备天然的高安全性及保密性。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明实施例提供的一种基于LED阵列的可见光混合定位方法流程示意图；图2是本发明实施例提供的定位数字串行信息格式图；图3是本发明实施例提供的大功率LED阵列驱动电路图；图4是本发明实施例提供的图像处理算法提取定位信息流程图；图5是本发明实施例提供的可见光混合定位算法工作流程图；图6是本发明实施例提供的基于LED阵列的可见光混合定位系统图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例的附图，对本发明实施例的技术方案进行清楚、完整地描述。显然，所描述的实施例是本发明的一部分实施例，而不是全部的实施例。基于所描述的本发明的实施例，本领域普通技术人员在无需创造性劳动的前提下所获得的所有其他实施例，都属于本发明保护的范围。如图1所示，本发明实施例提供了一种基于LED阵列的可见光混合定位方法，该方法可以由基于LED阵列的可见光混合定位系统实现，该系统包括发送端以及接收端。如图1所示的基于LED阵列的可见光混合定位方法流程图，该方法的处理流程可以包括如下的步骤：S1、发送端调取LED阵列信息，将LED阵列信息编码为数字串行信息，将数字串行信息转换为光信号并发送。其中，LED阵列信息可以包括LED阵列的ID信息与坐标信息。可选地，S1中的发送端，包括ID编码模块以及LED阵列模块。其中，ID编码模块，用于将包含LED阵列ID与坐标的信息编码为可用于可见光信道传输的串行信号。可选地，ID编码模块，包括信号驱动板。信号驱动板，连接于LED驱动电路，用于记录定位系统中不同发送端的ID信息及坐标信息并持续输出对应的串行数字信息。LED阵列模块，连接于ID编码模块，用于将串行信号转换为光信号并发送，同时发送图像定位信息。可选地，LED阵列模块，包括LED驱动电路及LED阵列发光模块。LED驱动电路，连接于LED阵列发光模块，用于将数字串行信息调制成电流信号；其中，电流信号用于驱动LED阵列发光模块。一种可行的实施方式中，LED驱动电路用于将编码完成的二进制数字信号调制成可驱动大功率LED灯的电流信号。LED阵列发光模块，连接于LED驱动电路，用于通过LED阵列灯发送光信号。一种可行的实施方式中，在发送端，ID编码模块储存有定位所需的ID信息及坐标信息，系统运行时，该模块以数字串行信息形式发送定位信息至LED阵列模块，经由LED驱动电路及LED阵列将串行信息转换为光信息并经由光路传播。具体地，当系统开始工作时，定位系统发送端中ID编码模块首先调取事先存储的LED-ID信息及坐标信息，并将该信息转换为数字串行信息，发送到LED阵列模块，数字串行信息的格式如图2所示，此时每段串行信息包括该发送端的ID及其世界坐标位置，该信息为后续定位模块提供定位参数，经过编码后数字串行信号需要通过光路传输，但是此时的信号不足以点亮LED阵列，所以需要LED驱动电路对信号进行放大。为此设计了如图3所示的大功率LED阵列驱动电路。该电路专用于驱动具有多个LED灯的LED阵列发光模块，支持同时发送数字串行信息与图像定位信息。S2、接收端通过图像传感器获取LED阵列图像，通过光电传感器获取光信号并转换为数字串行信息，并根据LED阵列图像、数字串行信息以及定位算法，获取室内实时定位结果。可选地，S2中的接收端，包括混合接收模块以及定位解算模块。其中，混合接收模块，连接于定位解算模块，包含光电探测器、图像传感器及信号恢复电路。混合接收模块，用于通过图像传感器拍摄LED阵列图像；通过光电传感器接收光信号，并将光信号转换为数字串行信息；USB串口转换模块，连接于光电传感器，用于将串行数字信息输入定位解算模块。一种可行的实施方式中，对于图像定位信息的接收，采用图像传感器拍摄LED阵列原始图像，并传入定位解算模块进行进一步处理。可选地，通过光电传感器接收光信号，并将光信号转换为数字串行信息，进而得到LED阵列信息，包括：通过光电传感器接收光信号，并将光信号转换为电流信号。经由信号恢复电路将电流信号转换成电压信号，并对电压信号进行放大。通过低通滤波电路对放大后的电压信号进行滤波，得到滤波后的电压信号。通过判决电路对滤波后的电压信号进行判断，得到数字串行信息，进而得到LED阵列信息。一种可行的实施方式中，对于光信号串行信息的接收，使用光电探测器接收光信号，光电探测器可以将光信号转换成微弱的电流信号，并经由信号恢复电路，将电流信号转换成电压信号并进行放大，放大后的电压信号再由低通滤波电路进行滤波，目的是滤除信号中的高频杂波，信号经过滤波后即由判决电路进行判断，此时接收到的信号变为数字信号，并通过USB转接口送至定位解算模块进行解码及信息提取。可选地，根据LED阵列图像，得到图像定位信息，包括：对LED阵列图像进行灰度二值化。对灰度二值化后的图像，通过形态学运算进行去噪。通过连通域识别算法，提取去噪后的图像中各个LED灯的图像坐标，将图像坐标作为图像定位信息。一种可行的实施方式中，对于图像定位信息，通过图像处理算法提取定位信息的流程如图4所示，对原始图像进行灰度二值化后，通过形态学操作开运算与闭运算对二值化图像进行去噪，并提升参数提取精度，之后通过连通域识别算法提取LED阵列中各个LED灯的图像坐标作为定位参数。对于数字串行信息中的ID及坐标信息则通过串口通信方式接收并根据数据结构提取出LED-ID及世界坐标作为定位参数。获取到各项定位信息后，将其作为参数输入后续定位算法。定位解算模块，包括基于树莓派的定位解算终端，用于根据图像定位信息、LED阵列信息以及定位算法，获取室内实时定位结果，包括：S41、根据图像定位信息以及定位算法，计算接收端与发送端之间的相对位置信息。一种可行的实施方式中，基于LED阵列的可见光混合定位算法需要上述定位数据作为参数实现定位功能。获取到上述定位信息后，算法工作流程图如图5所示。定位解算模块从接收到原始图像中提取图像定位信息，然后通过定位算法计算定位接收端与发送端之间的相对位置信息，其计算原理为，通过图像定位信息中，LED阵列的像素大小、位姿、偏转角度等，与LED阵列实际大小，通过相似关系，计算定位接收端在各个方向的相对位移距离，从而确定二者之间的相对位置关系。S42、根据LED阵列信息以及相对位置信息，计算得到室内实时定位结果。一种可行的实施方式中，通过提取的ID及世界坐标信息，结合发送端与接收端的相对位置信息计算得到定位接收端所在位置，此时定位系统成功获取到定位结果，完成一次定位后系统继续等待定位信息输入，从而实现实时定位功能。该系统还包括电源模块，分别连接于ID编码模块、LED阵列模块、混合接收模块、定位解算模块用于为其提供电能。本发明结合基于图像传感器和光电传感器的两种主流的可见光定位技术的优势，在发送端，LED阵列模块通过使用大功率LED并通过光学设计来实现图像信息传送。结合ID编码模块与驱动电路，实现发送端图像定位信息与串行定位信息的同步发送。在接收端，设计了包含图像传感器与光电传感器混合接收模块，用于接收上述两种定位信息并将光信号转换为数字串行信号。在定位解算模块，设计了基于LED阵列的可见光混合定位算法，具有低成本、部署便捷与精度高等优势。本发明实施例中，LED作为新型环保且高能效的照明设备己得到广泛应用，因此基于室内 LED 照明的可见光室内定位系统的基础设施条件更完善，仅需对现有照明设备进行改造即可使用，有效降低定位系统的部署成本。相对于其他室内定位技术，可见光光信号受到多径效应的影响较小，稳定性更好，可见光室内定位系统的定位性能会更优。可见光光源不产生电磁辐射，因此可见光定位系统能被应用于对电磁信号敏感的场所。可见光信号无法穿透障碍物，不易被截获，具备天然的高安全性及保密性。如图6所示，本发明实施例提供了一种基于LED阵列的可见光混合定位系统，该系统应用于实现基于LED阵列的可见光混合定位方法，该系统包括发送端以及接收端，其中：发送端，用于调取LED阵列信息，将LED阵列信息编码为数字串行信息，将数字串行信息转换为光信号并发送。接收端，用于通过图像传感器获取LED阵列图像，通过光电传感器获取光信号并转换为数字串行信息，并根据LED阵列图像、数字串行信息以及定位算法，获取室内实时定位结果。可选地，LED阵列信息，包括LED阵列的ID信息与坐标信息。可选地，发送端，包括ID编码模块以及LED阵列模块。其中，ID编码模块，用于调取LED阵列信息，将LED阵列信息编码为数字串行信息。LED阵列模块，用于将数字串行信息转换为光信号。可选地，ID编码模块，包括信号驱动板。信号驱动板，用于记录LED阵列的ID信息及坐标信息，并持续输出对应的数字串行信息。可选地，LED阵列模块，包括LED驱动电路及LED阵列发光模块。LED驱动电路，用于将数字串行信息调制成电流信号；其中，电流信号用于驱动LED阵列发光模块。LED阵列发光模块，用于通过LED阵列灯发送光信号。可选地，接收端，包括混合接收模块以及定位解算模块。其中，混合接收模块，用于通过图像传感器获取LED阵列图像；通过光电传感器接收光信号，并将光信号转换为数字串行信息。定位解算模块，用于根据LED阵列图像，得到图像定位信息，根据数字串行信息，得到LED阵列信息，并根据图像定位信息、LED阵列信息以及定位算法，获取室内实时定位结果。可选地，接收端，进一步用于：通过光电传感器接收光信号，并将光信号转换为电流信号。经由信号恢复电路将电流信号转换成电压信号，并对电压信号进行放大。通过低通滤波电路对放大后的电压信号进行滤波，得到滤波后的电压信号。通过判决电路对滤波后的电压信号进行判断，得到数字串行信息。可选地，接收端，进一步用于：对LED阵列图像进行灰度二值化。对灰度二值化后的图像，通过形态学运算进行去噪。通过连通域识别算法，提取去噪后的图像中各个LED灯的图像坐标，将图像坐标作为图像定位信息。可选地，接收端，进一步用于：S41、根据图像定位信息以及定位算法，计算接收端与发送端之间的相对位置信息。S42、根据LED阵列信息以及相对位置信息，计算得到室内实时定位结果。本发明实施例中，LED作为新型环保且高能效的照明设备己得到广泛应用，因此基于室内 LED 照明的可见光室内定位系统的基础设施条件更完善，仅需对现有照明设备进行改造即可使用，有效降低定位系统的部署成本。相对于其他室内定位技术，可见光光信号受到多径效应的影响较小，稳定性更好，可见光室内定位系统的定位性能会更优。可见光光源不产生电磁辐射，因此可见光定位系统能被应用于对电磁信号敏感的场所。可见光信号无法穿透障碍物，不易被截获，具备天然的高安全性及保密性。本领域普通技术人员可以理解实现上述实施例的全部或部分步骤可以通过硬件来完成，也可以通过程序来指令相关的硬件完成，所述的程序可以存储于一种计算机可读存储介质中，上述提到的存储介质可以是只读存储器，磁盘或光盘等。以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
