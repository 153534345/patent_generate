标题title
数据页的读取方法、装置、设备及可读存储介质
摘要abst
本申请公开了一种数据页的读取方法、装置、设备及可读存储介质，属于数据库技术领域。方法包括：获取第一从实例发送的第一读取请求，第一从实例对目标日志序列中位于第一位点和第一位点之前的日志信息进行回放得到第一数据页，第一读取请求用于请求读取第一从实例已释放的第一数据页；对参考日志序列进行回放得到第一数据页，参考日志序列包括目标日志序列中位于参考位点之后的日志信息，参考位点小于第一位点；向第一从实例发送第一数据页。本申请实现了第一从实例基于第一数据页对目标日志序列中位于第一位点之后的日志信息进行回放，而不需要重复回放，节约了第一从实例的计算资源。
权利要求书clms
1.一种数据页的读取方法，其特征在于，所述方法包括：获取第一从实例发送的第一读取请求，所述第一从实例用于对目标日志序列中位于第一位点和所述第一位点之前的日志信息进行回放，所述第一读取请求用于请求读取所述第一从实例已释放的第一数据页，所述第一数据页是对位于所述第一位点的日志信息进行回放后得到的数据页；基于参考数据页对参考日志序列进行回放，得到所述第一数据页，所述参考数据页是对所述目标日志序列中位于参考位点的日志信息进行回放后得到的数据页，所述参考位点小于所述第一位点，所述参考日志序列包括所述目标日志序列中位于所述参考位点之后的日志信息；向所述第一从实例发送所述第一数据页，以用于所述第一从实例基于所述第一数据页对所述目标日志序列中位于所述第一位点之后的日志信息进行回放。2.根据权利要求1所述的方法，其特征在于，所述基于参考数据页对参考日志序列进行回放，得到所述第一数据页之前，还包括：获取主实例发送的参考位点，所述参考位点不大于多个从实例的回放位点中的最慢回放位点，所述从实例的回放位点用于表征所述从实例对所述目标日志序列进行回放时最后一个回放完成的日志信息在所述目标日志序列的位点，所述多个从实例包括所述第一从实例；对所述目标日志序列中位于所述参考位点和所述参考位点之前的日志信息进行回放，得到所述参考数据页。3.根据权利要求2所述的方法，其特征在于，所述方法还包括：获取主实例发送的所述目标日志序列，所述目标日志序列用于记录所述主实例对初始数据页进行多次修改的修改操作；将所述目标日志序列存储在日志存储区域；所述对所述目标日志序列中位于所述参考位点和所述参考位点之前的日志信息进行回放，得到所述参考数据页之前，包括：从所述日志存储区域中读取所述目标日志序列，对所述目标日志序列中位于所述参考位点和所述参考位点之前的日志信息进行回放，得到所述参考数据页。4.根据权利要求3所述的方法，其特征在于，所述对所述目标日志序列中位于所述参考位点和所述参考位点之前的日志信息进行回放，得到所述参考数据页之后，还包括：从所述日志存储区域中释放所述目标日志序列中位于所述参考位点和所述参考位点之前的日志信息，得到存储在所述日志存储区域中的所述参考日志序列。5.根据权利要求2所述的方法，其特征在于，所述对所述目标日志序列中位于所述参考位点和所述参考位点之前的日志信息进行回放，得到所述参考数据页之后，还包括：将所述参考数据页存储在数据页存储区域；所述基于参考数据页对参考日志序列进行回放，得到所述第一数据页，包括：从所述数据页存储区域中读取所述参考数据页，基于所述参考数据页对所述参考日志序列进行回放，得到所述第一数据页。6.根据权利要求1所述的方法，其特征在于，所述基于参考数据页对参考日志序列进行回放，得到所述第一数据页，包括：对于所述参考日志序列中的首个日志信息，基于所述首个日志信息所记录的修改操作，对所述参考数据页进行修改，得到所述首个日志信息的回放数据页，所述首个日志信息为所述第一位点的日志信息时，所述首个日志信息的回放数据页为所述第一数据页；如果所述首个日志信息不为所述第一位点的日志信息，对于所述参考日志序列中的非首个日志信息，基于所述非首个日志信息所记录的修改操作，对上一个日志信息的回放数据页进行修改，得到所述非首个日志信息的回放数据页，所述非首个日志信息为所述第一位点的日志信息时，所述非首个日志信息的回放数据页为所述第一数据页。7.根据权利要求1所述方法，其特征在于，所述方法还包括：将所述第一读取请求存放在请求队列中，所述请求队列用于存放第二从实例发送的第二读取请求，所述第二从实例用于对目标日志序列中位于第二位点和所述第二位点之前的日志信息进行回放，所述第二读取请求用于请求读取所述第二从实例已释放的第二数据页，所述第二数据页是对位于所述第二位点的日志信息进行回放后得到的数据页；所述基于参考数据页对参考日志序列进行回放，得到所述第一数据页，包括：如果所述请求队列满足执行条件，基于参考数据页对参考日志序列进行回放，得到所述第一数据页和所述第二数据页。8.根据权利要求7所述的方法，其特征在于，所述请求队列满足执行条件包括以下至少一项：所述第一读取请求和所述第二读取请求的数量之和不小于数量阈值；所述请求队列中的首个读取请求的等待时长超过时长阈值。9.根据权利要求7所述的方法，其特征在于，所述基于参考数据页对参考日志序列进行回放，得到所述第一数据页和所述第二数据页之后，还包括：向所述第二从实例发送所述第二数据页，以用于所述第二从实例基于所述第二数据页对所述目标日志序列中位于所述第二位点之后的日志信息进行回放。10.根据权利要求1-9任一所述的方法，其特征在于，所述方法由存储集群执行，所述存储集群包括第一存储节点和多个第二存储节点，不同的第二存储节点用于管理不同编号区间的数据页；所述第一存储节点，用于获取所述第一读取请求，所述第一读取请求携带所述第一数据页的编号；所述第一存储节点，还用于向所述多个第二存储节点中的目标存储节点发送所述第一读取请求，所述目标存储节点对应的编号区间包括所述第一数据页的编号；所述目标存储节点，用于基于参考数据页对参考日志序列进行回放，得到所述第一数据页，向所述第一从实例发送所述第一数据页。11.一种数据页的读取装置，其特征在于，所述装置包括：获取模块，用于获取第一从实例发送的第一读取请求，所述第一从实例用于对目标日志序列中位于第一位点和所述第一位点之前的日志信息进行回放，所述第一读取请求用于请求读取所述第一从实例已释放的第一数据页，所述第一数据页是对位于所述第一位点的日志信息进行回放后得到的数据页；回放模块，用于基于参考数据页对参考日志序列进行回放，得到所述第一数据页，所述参考数据页是对所述目标日志序列中位于参考位点的日志信息进行回放后得到的数据页，所述参考位点小于所述第一位点，所述参考日志序列包括所述目标日志序列中位于所述参考位点之后的日志信息；发送模块，用于向所述第一从实例发送所述第一数据页，以用于所述第一从实例基于所述第一数据页对所述目标日志序列中位于所述第一位点之后的日志信息进行回放。12.一种电子设备，其特征在于，所述电子设备包括处理器和存储器，所述存储器中存储有至少一条计算机程序，所述至少一条计算机程序由所述处理器加载并执行，以使所述电子设备实现如权利要求1至10任一所述的数据页的读取方法。13.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质中存储有至少一条计算机程序，所述至少一条计算机程序由处理器加载并执行，以使电子设备实现如权利要求1至10任一所述的数据页的读取方法。
说明书desc
技术领域本申请实施例涉及数据库技术领域，特别涉及一种数据页的读取方法、装置、设备及可读存储介质。背景技术在数据库技术领域中，主实例可以对数据页进行多次修改，每对数据页进行一次修改，主实例会生成用于记录修改操作的日志信息，这些日志信息按照生成的先后顺序形成日志序列。从实例从主实例中读取数据页并同步日志序列，按照日志信息的先后顺序进行回放，以此实现对读取的数据页进行多次修改，从而实现主从实例的数据同步。其中，可以使用回放位点表征日志序列中最后一个回放完成的日志信息所在的位置，例如，位点为500，表征回放完成日志序列中第500个日志信息。相关技术，从实例可以为多个，且不同从实例的回放位点存在差异。主实例可以获取各个从实例的回放位点，从各个从实例的回放位点中确定出最慢回放位点。通过将日志序列回放至最慢回放位点处得到数据页，并将数据页存储在共享存储中。当从实例需要继续进行日志序列的回放时，可以从共享存储中读取数据页，从最慢回放位点处重新进行日志序列的回放。对于回放位点大于最慢回放位点的从实例，从最慢回放位点处重新进行日志序列的回放，导致从实例进行了大量的重复计算，造成了计算资源的浪费。发明内容本申请提供了一种数据页的读取方法、装置、设备及可读存储介质，可以使从实例在上一次回放位置处继续回放，节约从实例的计算资源，所述技术方案包括如下内容。一方面，提供了一种数据页的读取方法，所述方法包括：获取第一从实例发送的第一读取请求，所述第一从实例用于对目标日志序列中位于第一位点和所述第一位点之前的日志信息进行回放，所述第一读取请求用于请求读取所述第一从实例已释放的第一数据页，所述第一数据页是对位于所述第一位点的日志信息进行回放后得到的数据页；基于参考数据页对参考日志序列进行回放，得到所述第一数据页，所述参考数据页是对所述目标日志序列中位于参考位点的日志信息进行回放后得到的数据页，所述参考位点小于所述第一位点，所述参考日志序列包括所述目标日志序列中位于所述参考位点之后的日志信息；向所述第一从实例发送所述第一数据页，以用于所述第一从实例基于所述第一数据页对所述目标日志序列中位于所述第一位点之后的日志信息进行回放。另一方面，提供了一种数据页的读取装置，所述装置包括：获取模块，用于获取第一从实例发送的第一读取请求，所述第一从实例用于对目标日志序列中位于第一位点和所述第一位点之前的日志信息进行回放，所述第一读取请求用于请求读取所述第一从实例已释放的第一数据页，所述第一数据页是对位于所述第一位点的日志信息进行回放后得到的数据页；回放模块，用于基于参考数据页对参考日志序列进行回放，得到所述第一数据页，所述参考数据页是对所述目标日志序列中位于参考位点的日志信息进行回放后得到的数据页，所述参考位点小于所述第一位点，所述参考日志序列包括所述目标日志序列中位于所述参考位点之后的日志信息；发送模块，用于向所述第一从实例发送所述第一数据页，以用于所述第一从实例基于所述第一数据页对所述目标日志序列中位于所述第一位点之后的日志信息进行回放。在一种可能的实现方式中，所述获取模块，还用于获取主实例发送的参考位点，所述参考位点不大于多个从实例的回放位点中的最慢回放位点，所述从实例的回放位点用于表征所述从实例对所述目标日志序列进行回放时最后一个回放完成的日志信息在所述目标日志序列的位点，所述多个从实例包括所述第一从实例；所述回放模块，还用于对所述目标日志序列中位于所述参考位点和所述参考位点之前的日志信息进行回放，得到所述参考数据页。在一种可能的实现方式中，所述获取模块，还用于获取主实例发送的所述目标日志序列，所述目标日志序列用于记录所述主实例对初始数据页进行多次修改的修改操作；所述装置还包括：存储模块，用于将所述目标日志序列存储在日志存储区域；所述回放模块，用于从所述日志存储区域中读取所述目标日志序列，对所述目标日志序列中位于所述参考位点和所述参考位点之前的日志信息进行回放，得到所述参考数据页。在一种可能的实现方式中，所述装置还包括：释放模块，用于从所述日志存储区域中释放所述目标日志序列中位于所述参考位点和所述参考位点之前的日志信息，得到存储在所述日志存储区域中的所述参考日志序列。在一种可能的实现方式中，所述装置还包括：存储模块，用于将所述参考数据页存储在数据页存储区域；所述回放模块，用于从所述数据页存储区域中读取所述参考数据页，基于所述参考数据页对所述参考日志序列进行回放，得到所述第一数据页。在一种可能的实现方式中，所述回放模块，用于对于所述参考日志序列中的首个日志信息，基于所述首个日志信息所记录的修改操作，对所述参考数据页进行修改，得到所述首个日志信息的回放数据页，所述首个日志信息为所述第一位点的日志信息时，所述首个日志信息的回放数据页为所述第一数据页；如果所述首个日志信息不为所述第一位点的日志信息，对于所述参考日志序列中的非首个日志信息，基于所述非首个日志信息所记录的修改操作，对上一个日志信息的回放数据页进行修改，得到所述非首个日志信息的回放数据页，所述非首个日志信息为所述第一位点的日志信息时，所述非首个日志信息的回放数据页为所述第一数据页。在一种可能的实现方式中，所述装置还包括：存放模块，用于将所述第一读取请求存放在请求队列中，所述请求队列用于存放第二从实例发送的第二读取请求，所述第二从实例用于对目标日志序列中位于第二位点和所述第二位点之前的日志信息进行回放，所述第二读取请求用于请求读取所述第二从实例已释放的第二数据页，所述第二数据页是对位于所述第二位点的日志信息进行回放后得到的数据页；所述回放模块，用于如果所述请求队列满足执行条件，基于参考数据页对参考日志序列进行回放，得到所述第一数据页和所述第二数据页。在一种可能的实现方式中，所述请求队列满足执行条件包括以下至少一项：所述第一读取请求和所述第二读取请求的数量之和不小于数量阈值；所述请求队列中的首个读取请求的等待时长超过时长阈值。在一种可能的实现方式中，所述发送模块，还用于向所述第二从实例发送所述第二数据页，以用于所述第二从实例基于所述第二数据页对所述目标日志序列中位于所述第二位点之后的日志信息进行回放。在一种可能的实现方式中，所述装置位于存储集群上，所述存储集群包括第一存储节点和多个第二存储节点，不同的第二存储节点用于管理不同编号区间的数据页；所述第一存储节点，用于获取所述第一读取请求，所述第一读取请求携带所述第一数据页的编号；所述第一存储节点，还用于向所述多个第二存储节点中的目标存储节点发送所述第一读取请求，所述目标存储节点对应的编号区间包括所述第一数据页的编号；所述目标存储节点，用于基于参考数据页对参考日志序列进行回放，得到所述第一数据页，向所述第一从实例发送所述第一数据页。另一方面，提供了一种电子设备，所述电子设备包括处理器和存储器，所述存储器中存储有至少一条计算机程序，所述至少一条计算机程序由所述处理器加载并执行，以使所述电子设备实现上述任一所述的数据页的读取方法。另一方面，还提供了一种计算机可读存储介质，所述计算机可读存储介质中存储有至少一条计算机程序，所述至少一条计算机程序由处理器加载并执行，以使电子设备实现上述任一所述的数据页的读取方法。另一方面，还提供了一种计算机程序，所述计算机程序为至少一条，至少一条计算机程序由处理器加载并执行，以使电子设备实现上述任一种数据页的读取方法。另一方面，还提供了一种计算机程序产品，所述计算机程序产品中存储有至少一条计算机程序，所述至少一条计算机程序由处理器加载并执行，以使电子设备实现上述任一种数据页的读取方法。本申请提供的技术方案至少带来如下有益效果：本申请提供的技术方案中，第一从实例对目标日志序列中位于第一位点和第一位点之前的日志信息进行回放得到第一数据页。当第一从实例释放第一数据页时，第一从实例可以发送请求读取第一数据页的第一读取请求。通过基于参考数据页对参考日志序列进行回放得到第一数据页，并向第一从实例发送第一数据页，使得第一从实例可以基于第一数据页对目标日志序列中位于第一位点之后的日志信息进行回放，实现了第一从实例在上一次回放位置处继续回放，而不需要重复回放，节约了第一从实例的计算资源。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本申请实施例提供的一种数据页的读取方法的实施环境示意图。图2是本申请实施例提供的一种数据页的读取方法的流程图。图3是本申请实施例提供的一种日志序列的回放示意图。图4是本申请实施例提供的一种下刷数据页的示意图。图5是本申请实施例提供的一种持久化日志和下刷数据页的示意图。图6是本申请实施例提供的一种持久化日志的示意图。图7是本申请实施例提供的一种在共享存储中回放日志的示意图。图8是本申请实施例提供的一种从实例进行日志回放的示意图。图9是本申请实施例提供的一种多请求回复的示意图。图10是本申请实施例提供的一种分区的示意图。图11是本申请实施例提供的一种数据页的读取示意图。图12是本申请实施例提供的一种日志回放的示意图。图13是本申请实施例提供的一种数据页的读取装置的结构示意图。图14是本申请实施例提供的一种终端设备的结构示意图。图15是本申请实施例提供的一种服务器的结构示意图。具体实施方式为使本申请的目的、技术方案和优点更加清楚，下面将结合附图对本申请实施方式作进一步地详细描述。在数据库技术领域中，主实例可以生成日志序列，通过日志序列记录主实例对数据页进行多次修改的修改操作。从实例可以复制日志序列，通过回放日志序列实现对数据页进行多次修改，从而实现主从实例的数据同步。然而，由于网络延迟、硬件性能等的影响，使得不同从实例回放日志序列的速度不同。相关技术中，主实例可以收集各个从实例的回放位点，从中确定出最慢回放位点。通过将日志序列回放至最慢回放位点处得到数据页，并将数据页存储在共享存储中。当从实例需要继续进行日志序列的回放时，可以从共享存储中读取数据页，从最慢回放位点处重新进行日志序列的回放。对于回放位点大于最慢回放位点的从实例，从最慢回放位点处重新进行日志序列的回放，导致从实例进行了大量的重复计算，造成了计算资源的浪费。基于此，本申请实施例提供了一种数据页的读取方法，可以在从实例已对日志序列进行回放得到第一数据页，且第一数据页已被从实例释放的情况下，支持从实例读取第一数据页，在第一数据页的基础上继续进行日志序列的回放，避免了日志序列的重复回放，节约了从实例的计算资源。如图1所示，图1是本申请实施例提供的一种数据页的读取方法的实施环境示意图，该实施环境包括主实例101、从实例102和存储节点103。主实例101也称为读写数据库实例，用于对数据库进行读写操作。从实例102也称为只读数据库实例，用于对数据库进行只读操作。数据库实例是在数据库中创建的独立的数据库实体。每一个数据库实例有自己的数据集、配置和运行环境。任一个数据库实例可以通过连接到其他的数据库实例来操作和管理数据。也就是说，主实例101和任一个从实例102通信连接，且任两个从实例102通信连接。可选地，数据库实例可以为一个服务进程，单个物理设备可以运行至少一个服务进程，使得单个物理设备上可以有多个数据库实例。也就是说，主实例101可以独立的部署在一个物理设备上，也可以和至少一个从实例102一起部署在一个物理设备上。任一个从实例102可以独立的部署在一个物理设备上，也可以和主实例101、或者和至少一个从实例102、或者和主实例101、从实例102一起部署在一个物理设备上。可以理解的是，主实例101的数量为至少一个，从实例102的数量也为至少一个。例如，一种可能的云原生关系型数据库，该数据库利用分布式存储实现计算和存储分离，通过水平扩展多个数据库实例实现负载均衡。在该数据库中，有一个读写数据库实例和最多15个只读数据库实例，即主实例101的数量为1个，从实例102的数量不大于15个，以此实现数据库的读写分离。存储节点103是组成存储系统的单个物理设备，存储节点103用于为整个存储系统提供存储容量和数据处理能力。存储节点103可以是服务器、专用存储设备或在共享基础架构上运行的虚拟机。可以理解的是，存储节点103的数量为至少一个，任一个存储节点103与主实例101、任一个从实例102通信连接。可选地，多个存储节点103可以构成存储集群。本申请实施例中的物理设备可以是终端设备，也可以是服务器。终端设备可以是智能手机、游戏主机、台式计算机、平板电脑、膝上型便携计算机、智能电视、智能车载设备、智能语音交互设备、智能家电等。服务器可以为一台服务器，或者为多台服务器组成的服务器集群，或者为云计算平台和虚拟化中心中的任意一种，本申请实施例对此不加以限定。服务器可以与终端设备通过有线网络或无线网络进行通信连接。服务器可以具有数据处理、数据存储以及数据收发等功能，在本申请实施例中不加以限定。终端设备和服务器的数量不受限制，可以是一个或多个。如图2所示，图2是本申请实施例提供的一种数据页的读取方法的流程图，该方法可应用于上述实施环境中。其中，本申请实施例中的数据页的读取由存储节点或者存储集群执行，为便于描述，下面以存储节点为例进行阐述。如图2所示，该方法包括如下步骤。步骤201，获取第一从实例发送的第一读取请求，第一从实例用于对目标日志序列中位于第一位点和第一位点之前的日志信息进行回放，第一读取请求用于请求读取第一从实例已释放的第一数据页，第一数据页是对位于第一位点的日志信息进行回放后得到的数据页。本申请实施例中，主实例在生成初始数据页的过程中，会通过日志信息来记录该初始数据页的生成操作。此外，主实例还可以对初始数据页进行多次修改，可以通过日志信息来记录每一次修改的修改操作，也就是说，每一次修改操作对应一个日志信息。这些日志信息按照生成的先后顺序形成目标日志序列。也就是说，目标日志序列包括多个日志信息，用于记录对初始数据页进行多次修改的修改操作。可选地，目标日志序列的第一个日志信息用于记录生成初始数据页时的生成操作。或者，目标日志序列的第一个日志信息用于记录对空白数据页进行修改的修改操作。例如，目标日志序列包括第1至2000个日志信息，第1个日志信息用于记录初始数据页的生成操作，第2个日志信息用于记录对初始数据页进行第一次修改的修改操作，第3个日志信息用于记录对初始数据页进行第二次修改的修改操作，第4个日志信息用于记录对初始数据页进行第三次修改的修改操作，以此类推，在此不再赘述。主实例可以对目标日志序列进行回放，从实例获取到目标日志序列之后，也可以对目标日志序列进行回放。其中，主实例或从实例均是按照目标日志序列中各个日志信息的先后顺序，依次回放各个日志信息。对一个日志信息进行回放，就是按照该日志信息所记录的修改操作，对上一个日志信息回放得到的数据页进行修改，得到该日志信息回放得到的数据页。本申请实施例不对修改操作做限定，示例性地，修改操作包括增加数据、删除数据、修改数据等中的至少一项。如图3所示，对某个数据页依次进行500次修改，得到日志1至日志500，按照生成顺序排列日志1至日志500形成目标日志序列，用于记录每一次修改的修改操作，比如，在数据页中插入一行数据，或者，在数据页中删除一行数据，等等。目标日志序列位于重做日志队列，且按照日志1至500的生成顺序进行排序。在回放目标日志序列时，按照日志的生成顺序依次回放，每回放完一个日志，实现对数据页进行一次更新。也就是说，先按照日志1所记载的生成操作生成数据页1，再按照日志2所记载的修改操作对数据页1进行修改得到数据页2，接着按照日志3所记载的修改操作对数据页2进行修改得到数据页3，以此类推。由于目标日志序列是按照日志信息的先后顺序进行回放的，因此，在回放目标日志序列的过程中，存在部分日志信息已回放完成，而另一部分日志信息未被回放。目标日志序列中最后一个回放完成的日志信息所在的位置称为回放位点，简称位点。如图3中，若已完成日志3的回放，且日志4的回放未开始，由于日志3是目标日志序列中的第三个日志，因此，回放位点为3。日志3已完成回放，此时得到数据页3，也就是说，回放位点是回放得到当前数据页的日志信息在目标日志序列中的位置。可以理解的是，主实例和从实例都可以进行目标日志序列的回放，且从实例需要从主实例中复制目标日志序列。由于复制网络的延迟、主实例和不同从实例的负载不同等因素的影响，导致主实例、不同从实例的回放速度存在差异。也就是说，主实例、不同从实例的回放位点不同。本申请实施例中，第一从实例的回放位点为第一位点。即，第一从实例已完成对目标日志序列中位于第一位点之前以及位于第一位点的日志信息的回放。例如，第一位点为500，则第一从实例已完成对目标日志序列中日志信息1至500的回放。又如，第一位点为1000，则第一从实例已完成对目标日志序列中日志信息1至1000的回放。再如，第一位点为1500，第一从实例已完成对目标日志序列中日志信息1至1500的回放。第一从实例对位于第一位点的日志信息进行回放之后，可以得到第一数据页，一般情况下，第一数据页存放在第一从实例的内存中。可以理解的是，第一从实例还需要进行其他的业务处理，例如，第一从实例需要实时处理客户端的读请求，且业务处理数据也需要存放在内存中。由于内存有限，因此，第一从实例需要不定时的释放内存，以应对各种情况。如果位于第一从实例的内存中的第一数据页被释放，而第一从实例需要继续进行目标日志序列的回放，即第一从实例需要对目标日志序列中位于第一位点之后的日志信息进行回放时，第一从实例需要从存储节点中读取第一数据页。这种情况下，第一从实例向存储节点发送第一读取请求，以通过第一读取请求向存储节点请求读取第一数据页。步骤202，基于参考数据页对参考日志序列进行回放，得到第一数据页，参考数据页是对目标日志序列中位于参考位点的日志信息进行回放后得到的数据页，参考位点小于第一位点，参考日志序列包括目标日志序列中位于参考位点之后的日志信息。本申请实施例中，存储节点存储有参考数据页和参考日志序列。其中，存储节点获取参考数据页和参考日志序列的方式在此不做限定。在一种可能的实现方式中，步骤202之前还包括步骤A1至步骤A2。步骤A1，获取主实例发送的参考位点，参考位点不大于多个从实例的回放位点中的最慢回放位点，从实例的回放位点用于表征从实例对目标日志序列进行回放时最后一个回放完成的日志信息在目标日志序列的位点，多个从实例包括第一从实例。本申请实施例中，主实例与任一个从实例通信连接。主实例可以定时地向从实例发送位点获取请求，该位点获取请求用于请求获取目标日志序号的回放位点，从实例响应于该位点获取请求，向主实例发送回放位点。或者，从实例可以定时地主动向主实例发送回放位点。通过这种方式，实现主实例收集各个从实例的回放位点。可以理解的是，由于复制网络的延迟、不同从实例的负载不同等因素的影响，导致各个从实例的回放位点不同。例如，同一时间，从实例1完成对目标日志序列中日志信息500的回放，日志信息501未开始回放，则从实例1的回放位点为500。从实例2完成对目标日志序列中日志信息1000的回放，日志信息1001未开始回放，则从实例2的回放位点为1000。从实例3完成对目标日志序列中日志信息1500的回放，日志信息1501未开始回放，则从实例3的回放位点为1500。主实例可以从各个从实例的回放位点中确定最慢回放位点，基于最慢回放位点确定参考位点，并向存储节点发送参考位点。可选地，主实例将最慢回放位点确定为参考位点，或者，主实例将最慢回放位点减去设定位点，得到参考位点，设定位点为正数且小于最慢回放位点。例如，从实例1的回放位点为500，从实例2的回放位点为1000，从实例3的回放位点为1500，则参考位点为最慢回放位点500，或者，设定位点为5，则参考位点为500-5=495。可以理解的是，通用场景中，主实例获取到最慢回放位点之后，需要对目标日志序列中位于最慢回放位点和最慢回放位点之前的日志信息进行回放，得到位于最慢回放位点的日志信息的回放数据页，简称最慢回放位点的数据页。当目标日志序列中包括位于最慢回放位点之后的日志信息时，由于这些日志信息用于记录对最慢回放位点的数据页进行修改的修改操作，因此，最慢回放位点的数据页为脏数据页。也就是说，脏数据页是被修改过的数据页。主实例可以向存储节点发送最慢回放位点的数据页，实现将最慢回放位点的数据页存储在共享存储集群，以便于任意的从实例从共享存储集群中读取最慢回放位点的数据页。如图4所示，通用场景中，主实例、从实例1至3位于计算层，共享存储集群位于存储层。主实例用于生成目标日志序列，目标日志序列包括2000个重做日志，即主实例的最新位点为2000。从实例1至3均复制重做日志，并对重做日志进行回放。其中，从实例1完成了对第500个重做日志的回放，且第501个重做日志未回放，即从实例1的回放位点为500。相类似地，从实例2的回放位点为1000，从实例3的回放位点为1500。主实例可以收集从实例1至3的回放位点，得到最慢回放位点即回放位点500。主实例回放目标日志序列中的第1至500个重做日志，得到回放位点为500的数据页，并将该数据页下刷到共享存储集群中。而本申请实施例中，主实例获取到最慢回放位点之后，无需对目标日志序列进行回放，而是直接将基于最慢回放位点确定的参考位点下刷到存储节点，实现将参考位点下刷到共享存储集群中。通过节省回放目标日志序列所需的计算资源和存储资源，降低主实例的负载压力。步骤A2，对目标日志序列中位于参考位点和参考位点之前的日志信息进行回放，得到参考数据页。本申请实施例中，存储节点存储有目标日志序列，且存储节点获取目标日志序列的方式在此不做限定。在示例性实施例中，步骤A2之前还包括：获取主实例发送的目标日志序列，目标日志序列用于记录主实例对初始数据页进行多次修改的修改操作；将目标日志序列存储在日志存储区域。步骤A2包括：从日志存储区域中读取目标日志序列，对目标日志序列中位于参考位点和参考位点之前的日志信息进行回放，得到参考数据页。本申请实施例中，存储节点可以定时地向主实例发送目标日志序列的获取请求。或者，存储节点在接收到与目标日志序列相关的任意数据页的读取请求，例如，存储节点接收到第一读取请求时，向主实例发送目标日志序列的获取请求。主实例响应于该获取请求，向存储节点发送目标日志序列。或者，主实例可以定时地主动向存储节点发送目标日志序列。上文已提及，主实例可以向多个从实例发送目标日志序列。可选地，主实例还可以向任意从实例发送指令，该指令用于指示从实例向存储节点发送目标日志序列。从实例接收到指令和目标日志序列之后，先向存储节点发送目标日志序列，接着，对目标日志序列进行回放。存储节点存在日志存储区域。当存储节点获取到目标日志序列之后，将目标日志序列存储在日志存储区域，以持久化存储目标日志序列。存储节点在获取到参考位点之后，可以基于参考位点对目标日志序列进行回放。其中，存储节点对目标日志序列中位于参考位点和参考位点之前的日志信息进行回放，得到参考数据页。对于目标日志序列中的首个日志信息，基于首个日志信息所记录的生成操作，生成初始数据页，该初始数据页即为首个日志信息的回放数据页。或者，基于首个日志信息所记录的修改操作，对空白数据页进行修改，得到首个日志信息的回放数据页。可以理解的是，空白数据页不包括数据，因此，对空白数据页进行的修改仅包括插入数据的操作。也就是说，目标日志序列中的首个日志信息可以记录在空白数据页中插入数据的插入操作。对于目标日志序列中位于参考位点或者参考位点之前的非首个日志信息，基于非首个日志信息所记录的修改操作，对上一个日志信息的回放数据页进行修改，得到非首个日志信息的回放数据页。可以理解的是，上一个日志信息的回放数据页包括数据，因此，非首个日志信息所记录的修改操作包括插入数据时的插入操作、删除数据时的删除操作、修改数据时的修改操作等。其中，位于参考位点的日志信息的回放数据页即为参考数据页。在示例性实施例中，步骤A2之后还包括：将参考数据页存储在数据页存储区域。步骤202包括：从数据页存储区域中读取参考数据页，基于参考数据页对参考日志序列进行回放，得到第一数据页。本申请实施例中，存储节点存在数据页存储区域。当存储节点回放得到参考数据页时，可以将参考数据页存放在数据页存储区域，以实现对参考数据页的持久化存储。可以理解的是，在通用场景中，共享存储是通用型存储，其中，共享存储指的是支持主实例和各个从实例访问的存储节点或者存储集群，通用型存储指的是无业务感知的存储节点或者存储集群。一般情况下，通用型存储只负责提供基本的存储接口给主实例和从实例，以便于业务使用。比如，通用型存储提供文件系统接口，便于主实例和从实例读取文件，又如，通用型存储提供块存储接口，便于主实例和从实例将数据写入存储块。也就是说，通用型存储是主实例、从实例给什么数据就存什么数据；如果通用型存储存在主实例、从实例要读的数据就返回数据，如果通用型存储不存在主实例、从实例要读的数据就返回错误提示。在通用场景中，主实例生成目标日志序列，向通用型存储发送目标日志序列，以持久化存储目标日志序列。从实例通过复制目标日志序列，并对目标日志序列进行回放，得到回放数据页。由于各个从实例的回放进度存在差异，因此，主实例收集各个从实例的回放位点，确定最慢回放位点，并通过对目标日志序列进行回放，得到最慢回放位点的数据页，将最慢回放位点的数据页下刷在通用型存储中。由于通用型存储中仅存在最慢回放位点的数据页，且无业务感知，因此，从实例仅能从通用型存储中读取最慢回放位点的数据页。如图5所示，共享存储是通用型存储，通用型存储包括日志文件和数据页文件。主实例持久化日志至日志文件。从实例复制主实例的日志，通过日志回放得到数据页。主实例收集从实例的回放位点，确定最慢回放位点。主实例通过日志回放得到最慢回放位点的数据页，并下刷最慢回放位点的数据页至数据页文件，使得从实例仅能从通用型存储中读取最慢回放位点的数据页。上文已提及，主实例和从实例位于计算层。在通用场景中，目标日志序列的回放任务仅在计算层完成。然而，共享存储为存储节点或者存储集群，存储集群包括多个存储节点，任一个存储节点可以是物理服务器或者由多个物理服务器组成的集群，拥有充足的计算资源。通用场景下，共享存储无业务感知，不需要进行数据计算，导致了大量的资源浪费。本申请实施例中，主实例生成目标日志序列，向共享存储发送目标日志序列，以持久化存储目标日志序列。从实例通过复制目标日志序列，并对目标日志序列进行回放，得到回放数据页。主实例收集各个从实例的回放位点，确定参考位点，将参考位点下刷在共享存储中。共享存储基于参考位点进行日志回放，得到参考数据页，并持久化存储参考数据页。后续，共享存储可以基于参考数据页进行目标日志序列的回放，得到位于参考位点之后的任意位点的日志信息的回放数据页。可以理解的是，目标日志序列用于记录对初始数据页进行多次修改的修改操作，而不同次修改后的数据页可以视为不同版本的数据页。基于此，可以将位于参考位点之后的任意位点的日志信息的回放数据页称为指定版本的数据页。与通用场景不同，本申请实施例中的共享存储可以基于参考位点进行日志回放，即本申请实施例中的共享存储可以感知业务。这种能够感知业务的共享存储也称为感知型存储。其中，本申请实施例中的感知业务包括存储节点进行日志回放的计算任务。如图6所示，共享存储是感知型存储，感知型存储包括日志存储区域和数据页存储区域。主实例持久化日志至日志存储区域。从实例复制主实例的日志，通过日志回放得到数据页。主实例收集从实例的回放位点，确定参考位点。感知型存储通过日志回放得到参考数据页，并将参考数据页存储至数据页存储区域。后续，当从实例需要读取指定版本数据页时，共享存储可以基于参考数据页进行日志回放，得到指定版本数据页，并向从实例发送指定版本数据页，以此实现从实例从感知型存储中读取指定版本数据页。通用场景中，主实例用于回放日志，并下刷数据页至通用型存储，而本申请实施例由存储节点回放日志。通过将日志回放的计算任务由计算层转移至存储层，实现了充分利用存储节点的计算资源，避免存储节点的资源浪费，且节省了主实例的计算资源，有利于降低主实例的负载压力。可以理解的是，日志回放的计算任务由计算层转移至存储层并非是全部转移，而是部分转移。也就是说，位于计算层中的从实例需要进行日志回放的计算任务，而位于计算层中的主实例不需要进行日志回放的计算任务，且位于存储层中的存储节点需要进行日志回放的计算任务。如图7所示，一方面，主实例生成目标日志序列，目标日志序列包括日志1至日志2000。主实例同步目标日志序列至共享存储，目标日志序列位于重做日志队列，且按照日志1至日志2000排列。另一方面，从实例1至3从主实例中同步目标日志序列，并对目标日志序列进行回放。某一时刻，从实例1的回放位点为500，从实例2的回放位点为1000，从实例3的回放位点为1500。主实例收集各个从实例的回放位点，得到最慢回放位点，此处的最慢回放位点为500。当参考位点为最慢回放位点时，主实例同步最慢回放位点至共享存储。共享存储的后台线程会基于最慢回放位点500，对重做日志队列中的目标日志序列进行日志回放。其中，日志的回放区域为日志1至日志500，即目标日志序列依次回放重做日志队列中的日志1至日志500，将回放日志500后得到的数据页持久化存储在磁盘中。在示例性实施例中，步骤A2之后还包括：从日志存储区域中释放目标日志序列中位于参考位点和参考位点之前的日志信息，得到存储在日志存储区域中的参考日志序列。本申请实施例中，存储节点已完成对目标日志序列中位于参考位点和参考位点之前的日志信息的回放，使得目标日志序列中位于参考位点和参考位点之前的日志信息属于已经使用过的信息。存储节点通过释放已经使用过的信息，实现了节省存储节点的存储空间。可选地，由于目标日志序列存放在日志存储区域，因此，释放目标日志序列中的日志信息，相当于从日志存储区域中释放日志信息，节约了日志存储区域的存储空间。需要说明的是，上述提及的存储节点获取参考数据页和参考日志序列的方式仅是一种示例性的，在实际应用时，还可以有其他的实现方式。例如，主实例获取到参考位点之后，对目标日志序列中位于参考位点和参考位点之前的日志信息进行回放，得到参考数据页，并将目标日志序列中位于参考位点之后的日志信息作为参考日志序列，向存储节点发送参考数据页和参考日志序列。本申请实施例中，存储节点存储有参考数据页和参考日志序列。当存储节点接收到第一从实例发送的第一读取请求之后，可以从第一读取请求中提取第一位点。如果第一位点小于参考位点，则参考数据页是对第一数据页进行至少一次修改后得到的数据页。如果存储节点未存储对第一数据页，且存储节点未存储目标日志序列中位于第一位点之前的日志信息，则存储节点无法得到第一数据页。这种情况下，存储节点向第一从实例发送错误提示，通过错误提示向第一从实例告知存储节点无法提供第一数据页。如果第一位点等于参考位点，则参考数据页即为第一数据页。存储节点可以直接向第一从实例发送第一数据页。如果第一位点大于参考位点，则第一数据页是对参考数据页进行至少一次修改后得到的数据页，而参考日志序列记录了对参考数据页进行的修改。这种情况下，存储节点可以基于参考数据页对参考日志序列进行回放，得到第一数据页。在一种可能的实现方式中，步骤202包括步骤2021至步骤2022。步骤2021，对于参考日志序列中的首个日志信息，基于首个日志信息所记录的修改操作，对参考数据页进行修改，得到首个日志信息的回放数据页，首个日志信息为第一位点的日志信息时，首个日志信息的回放数据页为第一数据页。本申请实施例中，参考日志序列中的首个日志信息用于记录对参考数据页进行修改的修改操作。例如，首个日志信息记录了在参考数据页中增加一行数据。存储节点通过回放首个日志信息，基于首个日志信息记录的修改操作，对参考数据页进行与修改操作相对应的修改，例如，在参考数据页中增加一行数据，得到首个日志信息的回放数据页。可以理解的是，对参考数据页进行的修改操作包括插入数据的操作、删除数据的操作和修改数据的操作等。如果第一位点为参考位点加1，则首个日志信息的回放数据页为第一数据页。步骤2022，如果首个日志信息不为所述第一位点的日志信息，对于参考日志序列中的非首个日志信息，基于非首个日志信息所记录的修改操作，对上一个日志信息的回放数据页进行修改，得到非首个日志信息的回放数据页，非首个日志信息为第一位点的日志信息时，非首个日志信息的回放数据页为第一数据页。本申请实施例中，参考日志序列中的非首个日志信息用于记录对上一个日志信息的回放数据页进行修改的修改操作。例如，第750个日志信息记录了删除第749个日志信息的回放数据页中的一列数据。存储节点通过回放非首个日志信息，基于非首个日志信息记录的修改操作，对上一个日志信息的回放数据页进行与修改操作相对应的修改，例如，删除第749个日志信息的回放数据页中的一列数据，得到非首个日志信息的回放数据页。可以理解的是，对上一个日志信息的回放数据页进行的修改操作包括插入数据的操作、删除数据的操作和修改数据的操作等。如果非首个日志信息为位于第一位点的日志信息，则非首个日志信息的回放数据页为第一数据页。步骤203，向第一从实例发送第一数据页，以用于第一从实例基于第一数据页对目标日志序列中位于第一位点之后的日志信息进行回放。本申请实施例中，存储节点响应于第一从实例发送的第一读取请求，在回放得到第一数据页之后，向第一从实例发送第一数据页。第一从实例接收到第一数据页之后，基于第一数据页对目标日志序列中位于第一位点之后的日志信息进行回放。可选地，将目标日志序列中位于第一位点之后的日志信息称为第一日志序列。第一日志序列中的首个日志信息用于记录对第一数据页进行修改的修改操作，第一从实例可以基于首个日志信息所记录的修改操作，对第一数据页进行与修改操作相对应的修改，得到首个日志信息的回放数据页。对于第一日志序列中的非首个日志信息，非首个日志信息用于记录对上一个日志信息的回放数据页进行修改的修改操作，第一从实例可以基于非首个日志信息所记录的修改操作，对上一个日志信息的回放数据页进行与修改操作相对应的修改，得到非首个日志信息的回放数据页。可以理解的是，在通用场景中，共享存储集群仅存储最慢回放位点的回放数据页，而从实例的回放位点可能为最慢回放位点，可能大于最慢回放位点。由于从实例仅能从共享存储中读取到最慢回放位点的回放数据页，因此，从实例仅能基于最慢回放位点的回放数据页，从最慢回放位点处继续回放目标日志序列，使得回放位点大于最慢回放位点的从实例存在重复回放的现象，造成了大量的重复计算，浪费了计算资源，且不能释放已回放过的日志信息，导致了存储资源的浪费。如图8所示，在通用场景中，从实例1的上次回放位点为日志500，从实例2的上次回放位点为日志1000，从实例3的上次回放位点为日志1500。主实例收集从实例1至3的上次回放位点，得到最慢回放位点为日志500。主实例将目标日志序列回放至日志500处，得到日志500的回放数据页，并将日志500的回放数据页下刷在共享存储集群中。如果从实例的缓存达到阈值，则从实例需要释放缓存，而这可能会导致上次回放位点的回放数据页被淘汰，这种情况下，从实例只能从共享存储集群中读取回放数据页。由于共享存储集群中仅存在日志500的回放数据页，因此，从实例1至3均只能读取到日志500的回放数据页。对于从实例1，由于从实例1的上次回放位点是日志500，因此，从实例1的本次回放位点和上次回放位点一致，从实例1可以基于日志500的回放数据页继续上次回放，即从实例1基于日志500的回放数据页从日志501处继续回放目标日志序列。对于从实例2，由于从实例2的上次回放位点是日志1000，而从实例2仅能获取到日志500的回放数据页，因此，从实例2的本次回放位点和上次回放位点不一致。从实例2需要基于日志500的回放数据页，从日志501处开始回放目标日志序列。这导致从实例2重复回放了日志501至日志1000，浪费了计算资源，且从实例2不能释放日志501至日志1000，浪费了存储资源。相类似地，对于从实例3，从实例3需要基于日志500的回放数据页，从日志501处开始回放目标日志序列。这导致从实例3重复回放了日志501至日志1500，浪费了计算资源，且从实例3不能释放日志501至日志1500，浪费了存储资源。而本申请实施例中，第一从实例对目标日志序列中位于第一位点和第一位点之前的日志信息进行回放，得到第一数据页。当第一从实例释放第一数据页时，存储节点通过对参考日志序列进行回放得到第一数据页并向第一从实例发送，使得第一数据页可以基于第一数据页继续对目标日志序列进行回放。也就是说，第一从实例无需重复回放，节省了计算资源，且第一从实例可以释放已回放的日志信息，节省了存储资源。在一种可能的实现方式中，本申请实施例的方法还包括步骤204。其中，步骤204在步骤202之前执行。步骤204，将第一读取请求存放在请求队列中，请求队列用于存放第二从实例发送的第二读取请求，第二从实例用于对目标日志序列中位于第二位点和第二位点之前的日志信息进行回放，第二读取请求用于请求读取第二从实例已释放的第二数据页，第二数据页是对位于第二位点的日志信息进行回放后得到的数据页。本申请实施例中，第二从实例的回放位点为第二位点。即，第二从实例已完成对目标日志序列中位于第二位点之前以及位于第二位点的日志信息的回放。例如，第二位点为1000，则第二从实例已完成对目标日志序列中日志信息1至1000的回放。第二从实例对位于第二位点的日志信息进行回放之后，可以得到第二数据页，一般情况下，第二数据页存放在第二从实例的内存中。可以理解的是，第二从实例还需要进行其他的业务处理，例如，第二从实例需要实时处理客户端的读请求，且业务处理数据也需要存放在内存中。由于内存有限，因此，第二从实例需要不定时的释放内存，以应对各种情况。如果位于第二从实例的内存中的第二数据页被释放，而第二从实例需要继续进行目标日志序列的回放，即第二从实例需要对目标日志序列中位于第二位点之后的日志信息进行回放时，第二从实例需要从存储节点中读取第二数据页。这种情况下，第二从实例向存储节点发送第二读取请求，以通过第二读取请求向存储节点请求读取第二数据页。存储节点接收到第二读取请求时，将第二读取请求存放在请求队列中。此外，存储节点接收到第一读取请求时，将第一读取请求也存放在请求队列中。需要说明的是，第二读取请求为至少一个，每两个第二读取请求所请求的第二数据页可以是同一个，也可以是不同的数据页。也就是说，每两个第二读取请求所对应的第二位点可以相同或者不同。任一个第二位点可以大于或者等于或者小于第一位点。存储节点接收任一个第二读取请求和第一读取请求的顺序不做限定，例如，存储节点可以先接收第二读取请求，再接收第一读取请求，再接收另一个第二读取请求。步骤202包括：如果请求队列满足执行条件，基于参考数据页对参考日志序列进行回放，得到第一数据页和第二数据页。本申请实施例不对请求队列满足执行条件做限定。在示例性实施例中，请求队列满足执行条件包括条件B1和条件B2中的至少一项。条件B1，第一读取请求和第二读取请求的数量之和不小于数量阈值。条件B2，请求队列中的首个读取请求的等待时长超过时长阈值。其中，数量阈值的确定方式在此不做限定，示例性地，数据阈值可以是随机确定的数值，或者，数量阈值可以是用户指定的数值，例如，用户指定数量阈值为5。相类似地，时长阈值的确定方式在此不做限定，示例性地，时长阈值可以是随机确定的数值，或者，时长阈值可以是用户指定的数值，例如，用户指定时长阈值为30秒。上述条件B1和条件B2仅是示例性地，在实际应用时，还可以有其他的条件。例如，请求队列满足执行条件包括条件B1至B3中的至少一项，条件B3为：达到设定时间且请求队列中存在读取请求。如果请求队列满足执行条件，则存储节点基于参考数据页对参考日志序列进行回放，得到第一数据页和第二数据页，回放方式在上文已描述，在此不再赘述。在示例性实施例中，“基于参考数据页对参考日志序列进行回放，得到第一数据页和第二数据页”之后，还包括：向第二从实例发送第二数据页，以用于第二从实例基于第二数据页对目标日志序列中位于第二位点之后的日志信息进行回放。本申请实施例中，存储节点响应于第二从实例发送的第二读取请求，在回放得到第二数据页之后，向第二从实例发送第二数据页。第二从实例接收到第二数据页之后，基于第二数据页对目标日志序列中位于第二位点之后的日志信息进行回放。如图9所示，从实例1的回放位点为日志500，从实例1向共享存储发送位点500请求，用于请求读取日志500的回放数据页。相类似地，从实例2的回放位点为日志1000，从实例2向共享存储发送位点1000请求，用于请求读取日志1000的回放数据页。从实例3的回放位点为日志1500，从实例3向共享存储发送位点1500请求，用于请求读取日志1500的回放数据页。共享存储将位点500请求、位点1000请求和位点1500请求存放在数据页请求队列。其中，位点500请求、位点1000请求和位点1500请求对应上文提及的第一读取请求或者第二读取请求，数据页请求队列即为上文提及的请求队列。上文已提及，如果参考位点为日志500，则存储节点对目标日志序列进行回放并释放已回放的日志信息，得到参考数据页和参考日志序列。其中，参考数据页是日志500的回放数据页，参考日志序列包括目标日志序列中日志500之后的日志信息。如图9所示，日志保留区包括日志500以及日志500之后的参考日志序列。当数据页请求队列中的请求达到数量阈值时，共享存储触发临死日志回放。由于共享存储中已存放日志500的回放数据页，因此，共享存储触发对位点500请求的回复，即共享存储向从实例1发送日志500的回放数据页，使得从实例1可以从位点500处继续目标日志序列的回放。接着，共享存储从日志500开始对日志保留区中的日志信息进行回放。当共享存储回放完日志1000时，共享存储得到日志1000的回放数据页，此时，共享存储触发对位点1000请求的回复，即共享存储向从实例2发送日志1000的回放数据页，使得从实例2可以从位点1000处继续目标日志序列的回放。之后，共享存储从日志1000开始继续对日志保留区中的日志信息进行回放。当共享存储回放完日志1500时，共享存储得到日志1500的回放数据页，此时，共享存储触发对位点1500请求的回复，即共享存储向从实例2发送日志1500的回放数据页，使得从实例2可以从位点1500处继续目标日志序列的回放。通过这种方式，实现通过一次临时日志回放，得到多个请求所请求的回放数据页，有利于节省回放次数，降低存储节点的计算压力。在一种可能的实现方式中，本申请实施例的方法由存储集群执行，存储集群包括第一存储节点和多个第二存储节点，不同的第二存储节点用于管理不同编号区间的数据页。第一存储节点，用于获取第一读取请求，第一读取请求携带第一数据页的编号。也就是说，第一存储节点用于执行步骤201。第一存储节点，还用于向多个第二存储节点中的目标存储节点发送第一读取请求，目标存储节点对应的编号区间包括第一数据页的编号。目标存储节点，用于基于参考数据页对参考日志序列进行回放，得到第一数据页，向第一从实例发送第一数据页。也就是说，目标存储节点用于执行步骤202和步骤203。本申请实施例中，每一个数据页属于一个表空间。表空间是一个逻辑概念，用于统一管理空间中的数据页。可以理解的是，存储集群用于管理数据库，数据库可以对应多个表空间，但一个表空间仅能对应一个数据库。简单来说，数据库相当于房间外壳，表空间相当于房间里面的空间，数据页相当于空间中放置物品的箱子。表空间中的每一个数据页对应一个数据页编号，该数据页编号可以反映数据页相对于表空间的偏移量。本申请实施例中，可以对任一个表空间进行分区，得到多个逻辑分区，实现将表空间包括各个数据页划分到不同的逻辑分区。其中，分区方式在此不做限定。示例性地，可以随机分区或者均匀分区，例如，每个逻辑分区为2吉字节，或者，可以根据用户指定的分区方式进行分区。可以根据数据分布算法，将不同的逻辑分区分配给不同的第二存储节点。本申请实施例不对数据分布算法做限定，示例性地，数据分布算法可以是轮询算法或者一致性哈希算法等。由于一个逻辑分区对应表空间中的多个数据页，且各个数据页对应各自的编号，因此，不同的第二存储节点用于管理不同编号区间的数据页。第一读取请求携带第一数据页的编号。第一存储节点可以基于第一数据页的编号以及各个第二存储节点管理的编号区间，确定第一数据页的编号所在的编号区间，将第一数据页的编号所在的编号区间对应的第二存储节点作为目标存储节点，向目标存储节点发送第一读取请求，以使目标存储节点执行步骤202和步骤203。可以理解的是，由于目标日志序列用于记录对初始数据页进行多次修改的修改操作，因此，基于目标日志序列得到的各个回放数据页是同一个数据页的不同版本。也就是说，这些回放数据页对应同一个数据页的编号。通过不同的第二存储节点管理不同编号区间的数据页，实现了通过不同的第二存储节点管理不同数据页编号的日志序列，使得不同分区的数据页日志回放可以在不同的第二存储节点执行，充分利用了存储集群的多节点计算资源，通过并发地进行日志回放，可以加快从实例读取数据页的效率。如图10所示，通过对表空间进行分区，得到分区1、分区2、分区3等等。共享存储是存储集群，包括存储节点1、存储节点2、存储节点3等等。存储节点1管理分区1，存储节点2管理分区2，存储节点3管理分区3。主实例生成目标日志序列，并向共享存储发送目标日志序列。如果目标日志序列用于记录对属于分区1中的初始数据页进行多次修改的修改操作，则将目标日志序列存放在存储节点1中，以使存储节点1进行目标日志序列的回放。相类似地，如果目标日志序列用于记录对属于分区2中的初始数据页进行多次修改的修改操作，则将目标日志序列存放在存储节点2中，以使存储节点2进行目标日志序列的回放。以存储节点1为例，如图10所示，目标日志序列位于重做日志队列，包括日志1至日志2000。当参考位点为最慢回放位点时，主实例同步最慢回放位点至存储节点1。存储节点1的后台线程会基于最慢回放位点，对重做日志队列中的目标日志序列进行日志回放。其中，日志的回放区域为日志1至日志500，即目标日志序列依次回放重做日志队列中的日志1至日志500，将回放日志500后得到的数据页持久化存储在磁盘中。可以理解的是，存储节点2和存储节点3等其他节点也会执行上述存储节点1的操作，在此不再赘述。需要说明的是，本申请所涉及的信息、数据以及信号，均为经用户授权或者经过各方充分授权的，且相关数据的收集、使用和处理需要遵守相关地区的相关法律法规和标准。例如，本申请中涉及到的数据页、日志序列等都是在充分授权的情况下获取的。上述方法中，第一从实例对目标日志序列中位于第一位点和第一位点之前的日志信息进行回放得到第一数据页。当第一从实例释放第一数据页时，第一从实例可以发送请求读取第一数据页的第一读取请求。通过基于参考数据页对参考日志序列进行回放得到第一数据页，并向第一从实例发送第一数据页，使得第一从实例可以基于第一数据页对目标日志序列中位于第一位点之后的日志信息进行回放，实现了第一从实例在上一次回放位置处继续回放，而不需要重复回放，节约了第一从实例的计算资源。上述从方法步骤的角度阐述了本申请实施例提供的数据页的读取方法，下面从数据页读取系统的角度来全面阐述。其中，该数据页读取系统包括主实例、存储节点和至少一个从实例。为便于描述，下面以从实例是两个为例进行阐述。如图11所示，数据页读取系统包括主实例、存储节点、从实例1和从实例2。本申请实施例中，主实例用于生成目标日志序列，并向存储节点、从实例1和从实例2发送目标日志序列。其中，存储节点用于将目标日志序列存储在日志存储区域。从实例1用于回放目标日志序列，得到第一位点和第一数据页，从实例2用于回放目标日志序列，得到第二位点和第二数据页。从实例1向主实例发送第一位点，从实例2向主实例发送第二位点。主实例基于第一位点和第二位点确定最慢回放位点，并基于最慢回放位点确定参考位点。参考位点小于或者等于最慢回放位点。主实例向存储节点发送参考位点。存储节点基于参考节点回放目标日志序列并释放已回放的日志信息，得到参考数据页和参考日志序列。其中，参考数据页存放在数据页存储区域，参考日志序列存放在日志存储区域。可选地，从实例1释放第一数据页。这种情况下，从实例1向存储节点发送携带第一位点的数据页读取请求。相类似地，从实例2释放第二数据页。这种情况下，从实例2向存储节点发送携带第二位点的数据页读取请求。可选地，参考位点小于第一位点，第一位点小于第二位点。这种情况下，存储节点基于参考数据页回放参考日志序列，得到第一位点和第一数据页，存储节点向从实例1发送第一数据页。从实例1基于第一数据页，从第一位点处继续回放目标日志序列。此外，存储节点基于第一数据页，从第一位点处继续回放参考日志序列，得到第二位点和第二数据页，存储节点向从实例2发送第二数据页。从实例2基于第二数据页，从第二位点处继续回放目标日志序列。综合来说，如图12所示，本申请实施例中的主实例不再向共享存储下刷持久化脏数据页，而是持久化日志。共享存储将日志存放在日志存储区域，且利用充足的计算资源回放日志得到数据页，并将数据页持久化至数据页存储区域。从实例向共享存储发送携带指定位点的数据页读取请求，存储节点通过回放日志得到指定位点的回放数据页，并向从实例发送，以使从实例可以基于指定位点的回放数据页继续进行回放，而不需要重复的进行日志回放计算，避免了计算资源的浪费。例如，图12中，从实例1向共享存储发送携带位点500的数据页读取请求，存储节点通过回放日志得到位点500的回放数据页，并向从实例1发送，以使从实例1可以基于位点500的回放数据页继续进行回放。相类似地，从实例2向共享存储发送携带位点1000的数据页读取请求，存储节点向从实例2发送位点1000的回放数据页，使得从实例2可以基于位点1000的回放数据页继续进行回放。从实例3向共享存储发送携带位点1500的数据页读取请求，存储节点向从实例3发送位点1500的回放数据页，使得从实例3可以基于位点1500的回放数据页继续进行回放。通过上述方法，实现将日志回放的计算任务由主节点转移到计算资源充足的存储节点，并且存储节点允许从实例读取数据页时指定位点，实现多版本数据页的读取。同时，存储节点对多版本数据页的读取请求进行合并，通过一次日志序列的回放来实现回复各个请求，避免浪费存储节点的计算资源，且节省了从实例的计算资源，有利于提升用户对读写分离数据库的使用体验。图13所示为本申请实施例提供的一种数据页的读取装置的结构示意图，如图13所示，该装置包括以下模块。获取模块1301，用于获取第一从实例发送的第一读取请求，第一从实例用于对目标日志序列中位于第一位点和第一位点之前的日志信息进行回放，第一读取请求用于请求读取第一从实例已释放的第一数据页，第一数据页是对位于第一位点的日志信息进行回放后得到的数据页。回放模块1302，用于基于参考数据页对参考日志序列进行回放，得到第一数据页，参考数据页是对目标日志序列中位于参考位点的日志信息进行回放后得到的数据页，参考位点小于第一位点，参考日志序列包括目标日志序列中位于参考位点之后的日志信息。发送模块1303，用于向第一从实例发送第一数据页，以用于第一从实例基于第一数据页对目标日志序列中位于第一位点之后的日志信息进行回放。在一种可能的实现方式中，获取模块1301，还用于获取主实例发送的参考位点，参考位点不大于多个从实例的回放位点中的最慢回放位点，从实例的回放位点用于表征从实例对目标日志序列进行回放时最后一个回放完成的日志信息在目标日志序列的位点，多个从实例包括第一从实例。回放模块1302，还用于对目标日志序列中位于参考位点和参考位点之前的日志信息进行回放，得到参考数据页。在一种可能的实现方式中，获取模块1301，还用于获取主实例发送的目标日志序列，目标日志序列用于记录主实例对初始数据页进行多次修改的修改操作。装置还包括以下模块。存储模块，用于将目标日志序列存储在日志存储区域。回放模块1302，用于从日志存储区域中读取目标日志序列，对目标日志序列中位于参考位点和参考位点之前的日志信息进行回放，得到参考数据页。在一种可能的实现方式中，装置还包括以下模块。释放模块，用于从日志存储区域中释放目标日志序列中位于参考位点和参考位点之前的日志信息，得到存储在日志存储区域中的参考日志序列。在一种可能的实现方式中，装置还包括以下模块。存储模块，用于将参考数据页存储在数据页存储区域。回放模块1302，用于从数据页存储区域中读取参考数据页，基于参考数据页对参考日志序列进行回放，得到第一数据页。在一种可能的实现方式中，回放模块1302，用于对于参考日志序列中的首个日志信息，基于首个日志信息所记录的修改操作，对参考数据页进行修改，得到首个日志信息的回放数据页，首个日志信息为第一位点的日志信息时，首个日志信息的回放数据页为第一数据页；如果首个日志信息不为第一位点的日志信息，对于参考日志序列中的非首个日志信息，基于非首个日志信息所记录的修改操作，对上一个日志信息的回放数据页进行修改，得到非首个日志信息的回放数据页，非首个日志信息为第一位点的日志信息时，非首个日志信息的回放数据页为第一数据页。在一种可能的实现方式中，装置还包括以下模块。存放模块，用于将第一读取请求存放在请求队列中，请求队列用于存放第二从实例发送的第二读取请求，第二从实例用于对目标日志序列中位于第二位点和第二位点之前的日志信息进行回放，第二读取请求用于请求读取第二从实例已释放的第二数据页，第二数据页是对位于第二位点的日志信息进行回放后得到的数据页。回放模块1302，用于如果请求队列满足执行条件，基于参考数据页对参考日志序列进行回放，得到第一数据页和第二数据页。在一种可能的实现方式中，请求队列满足执行条件包括以下至少一项：第一读取请求和第二读取请求的数量之和不小于数量阈值；请求队列中的首个读取请求的等待时长超过时长阈值。在一种可能的实现方式中，发送模块1303，还用于向第二从实例发送第二数据页，以用于第二从实例基于第二数据页对目标日志序列中位于第二位点之后的日志信息进行回放。在一种可能的实现方式中，装置位于存储集群上，存储集群包括第一存储节点和多个第二存储节点，不同的第二存储节点用于管理不同编号区间的数据页。第一存储节点，用于获取第一读取请求，第一读取请求携带第一数据页的编号。第一存储节点，还用于向多个第二存储节点中的目标存储节点发送第一读取请求，目标存储节点对应的编号区间包括第一数据页的编号。目标存储节点，用于基于参考数据页对参考日志序列进行回放，得到第一数据页，向第一从实例发送第一数据页。上述装置中，第一从实例对目标日志序列中位于第一位点和第一位点之前的日志信息进行回放得到第一数据页。当第一从实例释放第一数据页时，第一从实例可以发送请求读取第一数据页的第一读取请求。通过基于参考数据页对参考日志序列进行回放得到第一数据页，并向第一从实例发送第一数据页，使得第一从实例可以基于第一数据页对目标日志序列中位于第一位点之后的日志信息进行回放，实现了第一从实例在上一次回放位置处继续回放，而不需要重复回放，节约了第一从实例的计算资源。应理解的是，上述图13提供的装置在实现其功能时，仅以上述各功能模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能模块完成，即将设备的内部结构划分成不同的功能模块，以完成以上描述的全部或者部分功能。另外，上述实施例提供的装置与方法实施例属于同一构思，其具体实现过程详见方法实施例，这里不再赘述。图14示出了本申请一个示例性实施例提供的终端设备1400的结构框图。该终端设备1400包括有：处理器1401和存储器1402。处理器1401可以包括一个或多个处理核心，比如4核心处理器、8核心处理器等。处理器1401可以采用DSP、FPGA、PLA中的至少一种硬件形式来实现。处理器1401也可以包括主处理器和协处理器，主处理器是用于对在唤醒状态下的数据进行处理的处理器，也称CPU；协处理器是用于对在待机状态下的数据进行处理的低功耗处理器。在一些实施例中，处理器1401可以集成有GPU，GPU用于负责显示屏所需要显示的内容的渲染和绘制。一些实施例中，处理器1401还可以包括AI处理器，该AI处理器用于处理有关机器学习的计算操作。存储器1402可以包括一个或多个计算机可读存储介质，该计算机可读存储介质可以是非暂态的。存储器1402还可包括高速随机存取存储器，以及非易失性存储器，比如一个或多个磁盘存储设备、闪存存储设备。在一些实施例中，存储器1402中的非暂态的计算机可读存储介质用于存储至少一个计算机程序，该至少一个计算机程序用于被处理器1401所执行以实现本申请中方法实施例提供的数据页的读取方法。在一些实施例中，终端设备1400还可选包括有：外围设备接口1403和至少一个外围设备。处理器1401、存储器1402和外围设备接口1403之间可以通过总线或信号线相连。各个外围设备可以通过总线、信号线或电路板与外围设备接口1403相连。具体地，外围设备包括：射频电路1404、显示屏1405、摄像头组件1406、音频电路1407和电源1408中的至少一种。外围设备接口1403可被用于将I/O相关的至少一个外围设备连接到处理器1401和存储器1402。在一些实施例中，处理器1401、存储器1402和外围设备接口1403被集成在同一芯片或电路板上；在一些其他实施例中，处理器1401、存储器1402和外围设备接口1403中的任意一个或两个可以在单独的芯片或电路板上实现，本实施例对此不加以限定。射频电路1404用于接收和发射RF信号，也称电磁信号。射频电路1404通过电磁信号与通信网络以及其他通信设备进行通信。射频电路1404将电信号转换为电磁信号进行发送，或者，将接收到的电磁信号转换为电信号。可选地，射频电路1404包括：天线系统、RF收发器、一个或多个放大器、调谐器、振荡器、数字信号处理器、编解码芯片组、用户身份模块卡等等。射频电路1404可以通过至少一种无线通信协议来与其它终端进行通信。该无线通信协议包括但不限于：万维网、城域网、内联网、各代移动通信网络、无线局域网和/或WiFi网络。在一些实施例中，射频电路1404还可以包括NFC有关的电路，本申请对此不加以限定。显示屏1405用于显示UI。该UI可以包括图形、文本、图标、视频及其它们的任意组合。当显示屏1405是触摸显示屏时，显示屏1405还具有采集在显示屏1405的表面或表面上方的触摸信号的能力。该触摸信号可以作为控制信号输入至处理器1401进行处理。此时，显示屏1405还可以用于提供虚拟按钮和/或虚拟键盘，也称软按钮和/或软键盘。在一些实施例中，显示屏1405可以为一个，设置在终端设备1400的前面板；在另一些实施例中，显示屏1405可以为至少两个，分别设置在终端设备1400的不同表面或呈折叠设计；在另一些实施例中，显示屏1405可以是柔性显示屏，设置在终端设备1400的弯曲表面上或折叠面上。甚至，显示屏1405还可以设置成非矩形的不规则图形，也即异形屏。显示屏1405可以采用LCD、OLED等材质制备。摄像头组件1406用于采集图像或视频。可选地，摄像头组件1406包括前置摄像头和后置摄像头。通常，前置摄像头设置在终端的前面板，后置摄像头设置在终端的背面。在一些实施例中，后置摄像头为至少两个，分别为主摄像头、景深摄像头、广角摄像头、长焦摄像头中的任意一种，以实现主摄像头和景深摄像头融合实现背景虚化功能、主摄像头和广角摄像头融合实现全景拍摄以及VR拍摄功能或者其它融合拍摄功能。在一些实施例中，摄像头组件1406还可以包括闪光灯。闪光灯可以是单色温闪光灯，也可以是双色温闪光灯。双色温闪光灯是指暖光闪光灯和冷光闪光灯的组合，可以用于不同色温下的光线补偿。音频电路1407可以包括麦克风和扬声器。麦克风用于采集用户及环境的声波，并将声波转换为电信号输入至处理器1401进行处理，或者输入至射频电路1404以实现语音通信。出于立体声采集或降噪的目的，麦克风可以为多个，分别设置在终端设备1400的不同部位。麦克风还可以是阵列麦克风或全向采集型麦克风。扬声器则用于将来自处理器1401或射频电路1404的电信号转换为声波。扬声器可以是传统的薄膜扬声器，也可以是压电陶瓷扬声器。当扬声器是压电陶瓷扬声器时，不仅可以将电信号转换为人类可听见的声波，也可以将电信号转换为人类听不见的声波以进行测距等用途。在一些实施例中，音频电路1407还可以包括耳机插孔。电源1408用于为终端设备1400中的各个组件进行供电。电源1408可以是交流电、直流电、一次性电池或可充电电池。当电源1408包括可充电电池时，该可充电电池可以是有线充电电池或无线充电电池。有线充电电池是通过有线线路充电的电池，无线充电电池是通过无线线圈充电的电池。该可充电电池还可以用于支持快充技术。在一些实施例中，终端设备1400还包括有一个或多个传感器1409。该一个或多个传感器1409包括但不限于：加速度传感器1411、陀螺仪传感器1412、压力传感器1413、光学传感器1414以及接近传感器1415。加速度传感器1411可以检测以终端设备1400建立的坐标系的三个坐标轴上的加速度大小。比如，加速度传感器1411可以用于检测重力加速度在三个坐标轴上的分量。处理器1401可以根据加速度传感器1411采集的重力加速度信号，控制显示屏1405以横向视图或纵向视图进行用户界面的显示。加速度传感器1411还可以用于游戏或者用户的运动数据的采集。陀螺仪传感器1412可以检测终端设备1400的机体方向及转动角度，陀螺仪传感器1412可以与加速度传感器1411协同采集用户对终端设备1400的3D动作。处理器1401根据陀螺仪传感器1412采集的数据，可以实现如下功能：动作感应、拍摄时的图像稳定、游戏控制以及惯性导航。压力传感器1413可以设置在终端设备1400的侧边框和/或显示屏1405的下层。当压力传感器1413设置在终端设备1400的侧边框时，可以检测用户对终端设备1400的握持信号，由处理器1401根据压力传感器1413采集的握持信号进行左右手识别或快捷操作。当压力传感器1413设置在显示屏1405的下层时，由处理器1401根据用户对显示屏1405的压力操作，实现对UI界面上的可操作性控件进行控制。可操作性控件包括按钮控件、滚动条控件、图标控件、菜单控件中的至少一种。光学传感器1414用于采集环境光强度。在一个实施例中，处理器1401可以根据光学传感器1414采集的环境光强度，控制显示屏1405的显示亮度。具体地，当环境光强度较高时，调高显示屏1405的显示亮度；当环境光强度较低时，调低显示屏1405的显示亮度。在另一个实施例中，处理器1401还可以根据光学传感器1414采集的环境光强度，动态调整摄像头组件1406的拍摄参数。接近传感器1415，也称距离传感器，通常设置在终端设备1400的前面板。接近传感器1415用于采集用户与终端设备1400的正面之间的距离。在一个实施例中，当接近传感器1415检测到用户与终端设备1400的正面之间的距离逐渐变小时，由处理器1401控制显示屏1405从亮屏状态切换为息屏状态；当接近传感器1415检测到用户与终端设备1400的正面之间的距离逐渐变大时，由处理器1401控制显示屏1405从息屏状态切换为亮屏状态。本领域技术人员可以理解，图14中示出的结构并不构成对终端设备1400的限定，可以包括比图示更多或更少的组件，或者组合某些组件，或者采用不同的组件布置。图15为本申请实施例提供的服务器的结构示意图，该服务器1500可因配置或性能不同而产生比较大的差异，可以包括一个或多个处理器1501和一个或多个的存储器1502，其中，该一个或多个存储器1502中存储有至少一条计算机程序，该至少一条计算机程序由该一个或多个处理器1501加载并执行以实现上述各个方法实施例提供的数据页的读取方法，示例性的，处理器1501为CPU。当然，该服务器1500还可以具有有线或无线网络接口、键盘以及输入输出接口等部件，以便进行输入输出，该服务器1500还可以包括其他用于实现设备功能的部件，在此不做赘述。在示例性实施例中，还提供了一种计算机可读存储介质，该存储介质中存储有至少一条计算机程序，该至少一条计算机程序由处理器加载并执行，以使电子设备实现上述任一种数据页的读取方法。可选地，上述计算机可读存储介质可以是只读存储器、随机存取存储器、只读光盘、磁带、软盘和光数据存储设备等。在示例性实施例中，还提供了一种计算机程序，该计算机程序为至少一条，该至少一条计算机程序由处理器加载并执行，以使电子设备实现上述任一种数据页的读取方法。在示例性实施例中，还提供了一种计算机程序产品，该计算机程序产品中存储有至少一条计算机程序，该至少一条计算机程序由处理器加载并执行，以使电子设备实现上述任一种数据页的读取方法。应当理解的是，在本文中提及的“多个”是指两个或两个以上。“和/或”，描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。字符“/”一般表示前后关联对象是一种“或”的关系。上述本申请实施例序号仅仅为了描述，不代表实施例的优劣。以上所述仅为本申请的示例性实施例，并不用以限制本申请，凡在本申请的原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。
