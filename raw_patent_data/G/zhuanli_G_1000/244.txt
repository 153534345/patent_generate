标题title
障碍点的检测方法、设备及存储介质
摘要abst
本申请涉及数据处理技术领域，公开了一种障碍点的检测方法、设备及存储介质，该方法包括：获取移动设备行进过程中第一历史时段内采集的历史点云的数据；利用历史点云的数据进行平面拟合，获得目标坐标系下的目标拟合平面；获取移动设备当前时刻采集的当前点云的数据；若当前点云的数据不是目标坐标系下的数据，则将当前点云的数据转换为目标坐标系下的数据；计算目标坐标系下当前点云中各个点与目标拟合平面间的第一距离，得到多个第一距离；将多个第一距离中大于第一距离阈值的第一距离对应的点确定为当前时刻的障碍点。通过上述方式，本申请可以有效地识别移动设备行进路径中的障碍物。
权利要求书clms
1.一种障碍点的检测方法，其特征在于，所述方法用于检测移动设备行进路径中的障碍点，所述方法包括：获取所述移动设备行进过程中第一历史时段内采集的历史点云的数据；利用所述历史点云的数据进行平面拟合，获得目标坐标系下的目标拟合平面；获取所述移动设备当前时刻采集的当前点云的数据；若所述当前点云的数据不是所述目标坐标系下的数据，则将所述当前点云的数据转换为所述目标坐标系下的数据；计算所述目标坐标系下当前点云中各个点与所述目标拟合平面间的第一距离，得到多个第一距离，其中，各个点分别对应一个第一距离；将所述多个第一距离中大于第一距离阈值的第一距离对应的点确定为所述当前时刻的障碍点。2.根据权利要求1所述的方法，其特征在于，所述利用所述历史点云的数据进行平面拟合，获得目标坐标系下的目标拟合平面，包括：利用所述历史点云中的多个点的数据进行平面拟合，获得所述目标坐标系下的拟合平面；计算用于拟合所述拟合平面的多个点中各个点与所述拟合平面间的第二距离，得到多个第二距离，其中，多个点中各个点分别对应一个第二距离；将所述多个第二距离中小于第二距离阈值的第二距离对应的点确定为内点；计算所述内点的数量与用于拟合所述拟合平面的多个点的数量的比值，得到内点率；若所述内点率小于内点率阈值，则：重复执行上述步骤，直至所述内点率大于或等于所述内点率阈值，其中，重复执行上述步骤时，每次进行平面拟合时所利用的多个点的数据不完全相同；或重复执行上述步骤的次数达到次数阈值，并将最大的内点率对应的所述拟合平面确定为所述目标拟合平面；若所述内点率大于或等于所述内点率阈值，则将所述拟合平面确定为所述目标拟合平面。3.根据权利要求2所述的方法，其特征在于，第N次执行所述利用所述历史点云中的多个点的数据进行平面拟合，获得所述目标坐标系下的拟合平面步骤时，用于平面拟合的多个点的数据为用于第N-1次平面拟合的多个点中的多个内点的数据，其中，N为正整数，且N≥2。4.根据权利要求1所述的方法，其特征在于，所述历史点云的数据和所述当前点云的数据为通过所述移动设备中的深度传感器获取的数据，所述目标坐标系为以所述移动设备中的目标点作为原点构建的坐标系，其中，所述目标点为不属于所述深度传感器中的点。5.根据权利要求4所述的方法，其特征在于，所述历史点云的数据为，其中，/＞为深度传感器坐标系下的数据，所述历史点云中各个点对应的所述移动设备的姿态为/＞，其中，所述利用所述历史点云的数据进行平面拟合，获得目标坐标系下的目标拟合平面，包括：利用公式，将/＞转换为所述目标坐标系下的历史点云的数据，其中，/＞为所述目标坐标系下的历史点云的数据，/＞为所述当前时刻所述移动设备的姿态，/＞为所述深度传感器坐标系转换到所述目标坐标系的外参；利用所述目标坐标系下的历史点云的数据进行平面拟合，获得所述目标坐标系下的所述目标拟合平面；所述若所述当前点云的数据不是所述目标坐标系下的数据，则将所述当前点云的数据转换为所述目标坐标系下的数据，包括：若所述当前点云的数据为所述深度传感器坐标系下的数据，则利用公式将所述深度传感器坐标系下的当前点云的数据转换为所述目标坐标系下的数据，其中，/＞为所述目标坐标系下的当前点云的数据，/＞为通过所述深度传感器获得的所述深度传感器坐标系下的当前点云的数据。6.根据权利要求1所述的方法，其特征在于，所述方法还包括：获取所述移动设备行进过程中第二历史时段内的障碍点云，其中，所述障碍点云为所述第二历史时段内每个时刻的障碍点的集合；将所述第二历史时段内的障碍点云中的各个障碍点确定为所述当前时刻的障碍点。7.根据权利要求6所述的方法，其特征在于，所述第二历史时段内的障碍点云的数据为，所述/＞为所述目标坐标系下的数据，所述第二历史时段内的障碍点云中各个点对应的所述移动设备的姿态为/＞，其中，所述将所述第二历史时段内的障碍点云中的各个障碍点确定为所述当前时刻的障碍点，包括：利用公式，将所述第二历史时段内的障碍点云的数据转换为所述当前时刻的点云数据，其中，/＞为转换后的所述目标坐标系下所述当前时刻的障碍点云的数据，/＞为所述当前时刻所述移动设备的姿态；将中的障碍点确定为所述当前时刻的障碍点。8.根据权利要求1所述的方法，其特征在于，所述移动设备包括深度传感器，所述历史点云的数据和所述当前点云的数据，均为通过所述深度传感器获取所述移动设备的主要传感器的检测盲区内的探测点的坐标数据。9.一种障碍点的检测设备，其特征在于，包括：处理器、存储器、通信接口和通信总线，所述处理器、所述存储器和所述通信接口通过所述通信总线完成相互间的通信；所述存储器用于存储可执行指令，所述可执行指令使所述处理器执行如权利要求1-7中任一项所述的障碍点的检测方法的操作。10.一种计算机可读存储介质，其特征在于，所述存储介质中存储有可执行指令，所述可执行指令在运行时执行如权利要求1-7中任一项所述的障碍点的检测方法。
说明书desc
技术领域本申请实施例涉及数据处理技术领域，具体涉及一种障碍点的检测方法、设备及计算机可读存储介质。背景技术在机器人、自动驾驶等行业中，需要实时检测移动设备行进路径中是否存在障碍物，检测到其行进路径中存在障碍物后，需要及时做出避让等响应动作以实现避障，若无法及时、准确地检测到障碍物以进行避障，则会引发事故。对于一些低矮障碍物，由于其高度相较于移动设备的高度较小，若低矮障碍物位于移动设备中用于检测障碍物的传感器的检测盲区内，会出现无法及时、有效地检测到障碍物的现象。因此，目前缺少一种有效检测低矮障碍物的方法。发明内容鉴于上述问题，本申请实施例提供了一种障碍点的检测方法、装置、设备和存储介质，用于解决现有技术中存在的无法有效地检测移动设备行进路径中的低矮障碍物的问题。根据本申请实施例的一个方面，提供了一种障碍点的检测方法，所述方法用于检测移动设备行进路径中的障碍点，所述方法包括：获取所述移动设备行进过程中第一历史时段内采集的历史点云的数据；利用所述历史点云的数据进行平面拟合，获得目标坐标系下的目标拟合平面；获取所述移动设备当前时刻采集的当前点云的数据；若所述当前点云的数据不是所述目标坐标系下的数据，则将所述当前点云的数据转换为所述目标坐标系下的数据；计算所述目标坐标系下当前点云中各个点与所述目标拟合平面间的第一距离，得到多个第一距离，其中，各个点分别对应一个第一距离；将所述多个第一距离中大于第一距离阈值的第一距离对应的点确定为所述当前时刻的障碍点。在一种可选的方式中，所述利用所述历史点云的数据进行平面拟合，获得目标坐标系下的目标拟合平面，包括：利用所述历史点云中的多个点的数据进行平面拟合，获得所述目标坐标系下的拟合平面；计算用于拟合所述拟合平面的多个点中各个点与所述拟合平面间的第二距离，得到多个第二距离，其中，多个点中各个点分别对应一个第二距离；将所述多个第二距离中小于第二距离阈值的第二距离对应的点确定为内点；计算所述内点的数量与用于拟合所述拟合平面的多个点的数量的比值，得到内点率；若所述内点率小于内点率阈值，则：重复执行上述步骤，直至所述内点率大于或等于所述内点率阈值，其中，重复执行上述步骤时，每次进行平面拟合时所利用的多个点的数据不完全相同；或重复执行上述步骤的次数达到次数阈值，并将最大的内点率对应的所述拟合平面确定为所述目标拟合平面；若所述内点率大于或等于所述内点率阈值，则将所述拟合平面确定为所述目标拟合平面。在一种可选的方式中，第N次执行所述利用所述历史点云中的多个点的数据进行平面拟合，获得所述目标坐标系下的拟合平面步骤时，用于平面拟合的多个点的数据为用于第N-1次平面拟合的多个点中的多个内点的数据，其中，N为正整数，且N≥2。在一种可选的方式中，所述历史点云的数据和所述当前点云的数据为通过所述移动设备中的深度传感器获取的数据，所述目标坐标系为以所述移动设备中的目标点作为原点构建的坐标系，其中，所述目标点为不属于所述深度传感器中的点。在一种可选的方式中，所述历史点云的数据为，其中，/＞为深度传感器坐标系下的数据，所述历史点云中各个点对应的所述移动设备的姿态为，其中，所述利用所述历史点云的数据进行平面拟合，获得目标坐标系下的目标拟合平面，包括：利用公式/＞，将/＞转换为所述目标坐标系下的历史点云的数据，其中，/＞为所述目标坐标系下的历史点云的数据，为所述当前时刻所述移动设备的姿态，/＞为所述深度传感器坐标系转换到所述目标坐标系的外参；利用所述目标坐标系下的历史点云的数据/＞进行平面拟合，获得所述目标坐标系下的所述目标拟合平面；所述若所述当前点云的数据不是所述目标坐标系下的数据，则将所述当前点云的数据转换为所述目标坐标系下的数据，包括：若所述当前点云的数据为所述深度传感器坐标系下的数据，则利用公式/＞将所述深度传感器坐标系下的当前点云的数据转换为所述目标坐标系下的数据，其中，/＞为所述目标坐标系下的当前点云的数据，/＞为通过所述深度传感器获得的所述深度传感器坐标系下的当前点云的数据。在一种可选的方式中，所述方法还包括：获取所述移动设备行进过程中第二历史时段内的障碍点云，其中，所述障碍点云为所述第二历史时段内每个时刻的障碍点的集合；将所述第二历史时段内的障碍点云中的各个障碍点确定为所述当前时刻的障碍点。在一种可选的方式中，所述第二历史时段内的障碍点云的数据为，所述/＞为所述目标坐标系下的数据，所述第二历史时段内的障碍点云中各个点对应的所述移动设备的姿态为/＞，其中，所述将所述第二历史时段内的障碍点云中的各个障碍点确定为所述当前时刻的障碍点，包括：利用公式/＞，将所述第二历史时段内的障碍点云的数据转换为所述当前时刻的点云数据，其中，/＞为转换后的所述目标坐标系下所述当前时刻的障碍点云的数据，/＞为所述当前时刻所述移动设备的姿态；将/＞中的障碍点确定为所述当前时刻的障碍点。在一种可选的方式中，所述移动设备包括深度传感器，所述历史点云的数据和所述当前点云的数据，均为通过所述深度传感器获取所述移动设备的主要传感器的检测盲区内的探测点的坐标数据。根据本申请实施例的另一方面，提供了一种障碍点的检测装置，所述装置用于检测移动设备行进路径中的障碍点，所述装置包括：第一获取模块，用于获取所述移动设备行进过程中第一历史时段内采集的历史点云的数据；平面拟合模块，用于利用所述历史点云的数据进行平面拟合，获得目标坐标系下的目标拟合平面；第二获取模块，用于获取所述移动设备当前时刻采集的当前点云的数据；转换模块，用于若所述当前点云的数据不是所述目标坐标系下的数据，则将所述当前点云的数据转换为所述目标坐标系下的数据；计算模块，用于计算所述目标坐标系下当前点云中各个点与所述目标拟合平面间的第一距离，得到多个第一距离，其中，各个点分别对应一个第一距离；确定模块，用于将所述多个第一距离中大于第一距离阈值的第一距离对应的点确定为所述当前时刻的障碍点。根据本申请实施例的另一方面，提供了一种障碍点的检测设备，包括：处理器、存储器、通信接口和通信总线，所述处理器、所述存储器和所述通信接口通过所述通信总线完成相互间的通信；所述存储器用于存储可执行指令，所述可执行指令使所述处理器执行如上所述的障碍点的检测方法的操作。根据本申请实施例的又一方面，提供了一种计算机可读存储介质，所述存储介质中存储有可执行指令，所述可执行指令在运行时执行如上述的障碍点的检测方法的操作。本申请实施例中，历史点云的数据和当前点云的数据均是通过深度传感器获取主要传感器的检测盲区内的探测点的坐标数据。由于目标拟合平面是利用距离当前时刻较近的历史时段内采集的移动设备行进路径中的多个点的数据进行平面拟合获得的，因此，获得的目标拟合平面近似于移动设备当前行进路径中的地面，进而通过当前时刻采集的点与目标拟合平面间的距离，即可准确地识别出游离在平面外的点，游离在平面外的点即为障碍点。例如，位于地面上的障碍物的点和位于地面下的水沟的点，其与地面间都存在一定的距离，这些障碍物的点都游离在地面外。上述说明仅是本申请实施例技术方案的概述，为了能够更清楚了解本申请实施例的技术手段，而可依照说明书的内容予以实施，并且为了让本申请实施例的上述和其它目的、特征和优点能够更明显易懂，以下特举本申请的具体实施方式。附图说明附图仅用于示出实施方式，而并不认为是对本申请的限制。而且在整个附图中，用相同的参考符号表示相同的部件。在附图中：图1示出了本申请实施例提供的障碍点的检测方法的流程示意图；图2示出了本申请实施例提供的移动设备中的激光雷达向地面发射激光的示意图；图3示出了图1中步骤120的子步骤流程图；图4示出了本申请实施例提供的障碍点的检测装置的结构示意图；图5示出了本申请实施例提供的障碍点的检测设备的结构示意图。具体实施方式下面将参照附图更详细地描述本申请的示例性实施例。虽然附图中显示了本申请的示例性实施例，然而应当理解，可以以各种形式实现本申请而不应被这里阐述的实施例所限制。本申请实施例中，移动设备是指机器人、无人驾驶的车辆等自主规划路径并移动的设备。由于移动设备是自主规划移动路径的设备，因此，其需要实时检测其行进路径上是否存在障碍物，若存在障碍物，则需要重新规划路径，以实现避障，避免发生事故。本申请发明人在研究中发现，为了检测出位于移动设备中主要传感器的检测盲区内的低矮障碍物，可以在移动设备中倾斜安装单线激光雷达，并利用基于距离的检测方法或基于模板匹配的检测方法来检测低矮障碍物。但是，在移动设备姿态的俯仰角发生抖动时，通过上述两种方法无法有效区分障碍物和行进路径中的地面，从而出现对障碍物漏检、误检的情况。因此，基于以上考虑，为了能有效检测出低矮障碍物，本申请提出了一种障碍点的检测方法，其中，障碍点为属于障碍物的点，该方法通过先获取移动设备行进过程中过去一段时长内采集的历史点云数据，其中，历史点云数据是通过深度传感器获取移动设备的行进路径中多个探测点的坐标数据，接着利用历史点云数据进行平面拟合，获得拟合平面，然后将当前时刻采集的点云中游离在拟合平面外的点确定为障碍点。由于移动设备是主要在地面上进行移动的，因此通过利用过去一段时长内的历史点云数据进行平面拟合，则可利用获得的拟合平面表示移动设备行进的地面，从而即可根据拟合平面有效地检测当前时刻采集的点云中是否存在障碍点。图1示出了本申请实施例提供的障碍点的检测方法的流程图，该方法用于检测移动设备行进路径中的障碍点，该方法由终端设备执行，其中，该终端设备可以是移动设备，也可以是移动设备中的控制器，还可以是与移动设备通信连接的其他终端设备。该终端设备可以是包括一个或多个处理器的终端设备，该处理器可能是中央处理器CPU，或者是特定集成电路，或者是被配置成实施本发明实施例的一个或多个集成电路，在此不做限定。终端设备包括的一个或多个处理器，可以是同一类型的处理器，如一个或多个CPU；也可以是不同类型的处理器，如一个或多个CPU以及一个或多个ASIC，在此不做限定。如图1所示，该方法包括以下步骤：步骤110：获取移动设备行进过程中第一历史时段内采集的历史激光点云的数据。值得说明的是，为了获得准确度较高的历史点云的数据，可以在移动设备中搭载深度传感器，通过深度传感器获取移动设备的主要传感器盲区内的探测点的坐标数据，其中，深度传感器可以是激光雷达或深度相机，后文仅以深度传感器为激光雷达为例进行介绍。若采用深度相机获取移动设备的主要传感器盲区内的探测点的坐标数据，则步骤110采集的数据为相机点云的数据而非激光点云的数据，后文涉及的激光点云也均为相机点云，激光点均为相机点。本步骤中，第一历史时段内采集的历史激光点云的数据指的是，过去的一段时长内采集的多个时刻的多个激光点的坐标数据，例如，可以是距离当前时刻过去的3~5秒内采集的多个时刻的多个激光点的坐标。优选地，第一历史时段是距离当前时刻较近的一段历史时段。其中，通过激光雷达向探测点发射激光，则根据激光雷达接收到的探测点反射回来的信号即可确定该探测点的坐标。值得说明的是，本申请实施例中，优选地，历史激光点云的数据为通过移动设备中的激光雷达获取的数据。此处为了更好地说明获取历史激光点云的数据的方式，图2示出了本申请实施例提供的移动设备中的激光雷达向地面发射激光的示意图，其中，图2中为激光雷达向地面发射激光的侧视图，为激光雷达向地面发射激光的俯视图。如图2中所示，移动设备10中的激光雷达11朝地面的多个探测点发射激光，激光到达探测点后，根据探测点反射回来的信号，即可确定探测点的坐标数据，也就获得探测点的位置信息。若地面上存在障碍物20，则激光雷达向地面发射激光后，发射的激光不能到达存在障碍物20的地面，而是到达障碍物20，则这时获得的是障碍物20表面的点的坐标数据。可以理解的是，由于激光雷达是向一定范围内的地面上的多个探测点发射激光，以获得历史激光点云的数据，因此，若地面中存在低矮障碍物，则获得的历史激光点云中包括的激光点大部分属于地面上的激光点，属于障碍点的占比较小。步骤120：利用历史激光点云的数据进行平面拟合，获得目标坐标系下的目标拟合平面。其中，移动设备坐标系是指以移动设备中的某点为原点创建的坐标系，并且该坐标系是围绕该原点旋转的坐标系，该原点为不属于激光雷达中的点。激光雷达坐标系是指以激光雷达中的某点为原点创建的坐标系，其与移动设备坐标系类似，只是原点不同。本申请实施例中，目标坐标系可以根据需要设置，可以是世界坐标系或者移动设备坐标系。通常通过激光雷达采集获得的激光点云的数据为激光雷达坐标系下的数据，将步骤110采集的激光雷达坐标系下的历史激光点云的数据转换为移动设备坐标系或世界坐标系下的数据后，即可以转换后的数据进行平面拟合，获得目标坐标系下的目标拟合平面。例如，若目标坐标系为世界坐标系，历史激光点云的数据为激光雷达坐标系下的数据，则可以通过公式将激光雷达坐标系下的历史激光点云的数据转换为世界坐标系下的历史激光点云的数据，进而利用世界坐标系下的历史激光点云的数据进行平面拟合，获得世界坐标系下的目标拟合平面。其中，/＞为世界坐标系下的历史激光点云的数据，/＞，/＞为激光雷达坐标系下历史激光点云中各个激光点的数据，/＞，/＞为历史激光点云中各个激光点对应的移动设备的姿态，/＞为激光雷达坐标系转换到移动设备坐标系的外参，包括旋转矩阵和平移向量。其中，平面的表达式为；其中，A、B、C、D为待确定的参数，x、y、z为变量。通过步骤110中采集的历史激光点云中的至少4个激光点的坐标数据代入上式中，即可获得目标拟合平面。可以理解的是，若历史激光点云中包括障碍点，则若用于平面拟合的激光点的数据中障碍点的数据占比较大，会降低获得的目标拟合平面的准确度。由于历史激光点云中大部分的激光点属于地面上的点，因此，在一定范围内，利用越多的激光点的数据进行平面拟合，则用于平面拟合的激光点中包含的障碍点的占比越小，那么获得的目标拟合平面的准确度越高。为了提高获得的拟合平面的准确度，可以利用步骤110中所有的历史激光点云的数据进行平面拟合。步骤130：获取移动设备当前时刻采集的当前激光点云的数据。其中，若无特别说明，全文中的当前时刻均是指同一个时刻。步骤140：判断当前激光点云的数据是否为目标坐标系下的数据。若是，则转至步骤160；若否，则转至步骤150。其中，若目标拟合平面和当前激光点云的数据不是同一个坐标系下的数据，则无法利用目标拟合平面来判断当前激光点云中是否存在游离在目标拟合平面外的激光点。步骤150：将当前激光点云的数据转换为目标坐标系下的数据。其中，若目标坐标系为移动设备坐标系，当前激光点云的数据为激光雷达坐标系下的数据，则需将当前激光点云的数据转换为移动设备坐标系下的数据。若目标坐标系和/或激光点云的数据为其他坐标系下的数据也是类似的，在此不再一一举例介绍。例如，若目标坐标系为世界坐标系，当前激光点云的数据为激光雷达坐标系下的数据，则可以通过公式，将激光雷达坐标系下的当前激光点云的数据转换为世界坐标系下的数据，其中，/＞为世界坐标系下的当前激光点云的数据，/＞为移动设备在世界坐标系下的位姿，包括旋转矩阵和平移向量，/＞为激光雷达坐标系下的当前激光点云的数据。步骤160：计算目标坐标系下当前激光点云中各个激光点与目标拟合平面间的第一距离，得到多个第一距离，其中，各个激光点分别对应一个第一距离。其中，若当前激光点云中包括m个激光点，则分别计算这m个激光点与拟合平面间的第一距离，得到m个第一距离，m个激光点中的各个激光点分别对应m个第一距离中的一个第一距离，其中，m为正整数，且m≥2。步骤170：将多个第一距离中大于第一距离阈值的第一距离对应的激光点确定为当前时刻的障碍点。其中，第一距离阈值可以根据需要设置，例如，第一距离阈值的范围可以是5cm~10cm，可以设置为5cm、8cm或10cm等。具体地，例如，若移动设备为机器人，且机器人底盘高度为10cm，则对于一些障碍物的高度远小于机器人底盘高度的障碍物，其不会影响机器人的正常移动，即机器人无需对这些障碍物进行避障，因此，第一距离阈值的范围可以为5cm~8cm。若m个激光点中的一些激光点对应的第一距离大于第一距离阈值，则说明这些激光点对应的物体与地面间存在一定的距离，游离于地面外，即为障碍点。例如，位于地面上的障碍物的点和位于地面下的水沟的点，其与地面间都存在一定的距离，这些障碍物的点都游离在地面外。本申请实施例中，由于目标拟合平面是利用距离当前时刻较近的历史时段内采集的移动设备行进路径中的多个激光点的数据进行平面拟合获得的，因此，获得的目标拟合平面近似于移动设备当前行进路径中的地面，进而通过当前时刻采集的激光点与目标拟合平面间的距离，即可准确地识别出游离在平面外的点，游离在平面外的点即为障碍点。在一些实施例中，为了避免数据冗余，造成计算量大，降低检测障碍点的效率，优选地，在移动设备的移动方向上，只采集移动设备行进前方的激光点云的数据，也即通过激光雷达向前方一定角度范围内的地面发射激光，从而获得该范围内的历史激光点云的数据和当前激光点云的数据。例如，激光雷达向前方发射激光的最大范围为移动设备的宽度的1~3倍等。在移动设备的移动方向上，由于移动设备是根据其规划的路径向前移动的，而对于位于其身后的障碍点不会影响其向前移动，因此，其无需检测位于其身后的障碍点以进行避障。图3示出了图1中步骤120的子步骤流程图。如图3所示，步骤120包括：步骤121：利用历史激光点云中的多个激光点的数据进行平面拟合，获得目标坐标系下的拟合平面。其中，本步骤与步骤120类似，本步骤的原理与实现方式可参考步骤120，在此不再赘述。步骤122：计算用于拟合该拟合平面的多个激光点中各个激光点与该拟合平面间的第二距离，得到多个第二距离，其中，多个激光点中各个激光点分别对应一个第二距离。其中，若历史激光点云中包括M个激光点，步骤121中利用历史激光点云中的个激光点的数据进行平面拟合，则本步骤中分别计算这/＞个激光点与步骤121获得的拟合平面间的第二距离，得到/＞个第二距离，且这/＞个激光点中各个激光点分别对应/＞个第二距离中的一个第二距离，/＞为正整数，且/＞≤M。步骤123：将多个第二距离中小于第二距离阈值的第二距离对应的激光点确定为内点。其中，第二距离阈值可以根据需要设置，例如，第二距离阈值的范围可以为3~6cm，可以设置为3cm、5cm或6cm等。步骤124：计算内点的数量与用于拟合该拟合平面的多个激光点的数量的比值，得到内点率。其中，若用于平面拟合的个激光点中有/＞个内点，则本步骤中内点率为/＞，/＞为正整数，且/＞≤/＞。步骤125：判断内点率是否小于内点率阈值。若是，则转至步骤126；若否，则转至步骤128。其中，可以根据需要设置内点率，例如，内点率阈值的范围可以为80%~90%，可以设置为80%、85%或90%等。若内点率较小，则说明用于平面拟合的个激光点中存在多个激光点游离在获得的拟合平面外，即这些激光点可能为障碍点，那么获得的拟合平面的准确度较低，无法用获得的拟合平面准确地表示移动设备行进路径中的地面。步骤126：判断重复执行上述步骤的次数是否达到次数阈值。若是，则转至步骤127；若否，则转至步骤121。其中，若内点率较小，则需要迭代进行平面拟合，即重复执行步骤121~步骤125，逐渐降低获得的拟合平面的内点率，直至内点率大于或等于内点率阈值或重复进行平面拟合的次数达到次数阈值，以获得准确度较高的拟合平面。次数阈值可以根据需要设置，例如，设置为3次、5次或7次等。值得说明的是，若内点率小于内点率阈值，且重复执行步骤121的次数未达到次数阈值，则重复进行平面拟合时用的多个激光点的数据与前面任意一次进行平面拟合时用的多个激光点的数据均不完全相同。例如，若历史激光点云中包括100个激光点，对应的序号分别为1-100，若本申请实施例中第一次执行步骤121时利用序号为1-80的激光点的数据进行平面拟合，则第二次执行步骤121时利用的多个激光点的序号不完全为1-80，例如，可以是序号为5-90的激光点，或序号为10-100的激光点等，第j次执行步骤121时，用于平面拟合的激光点与前j-1次进行平面拟合时用的激光点均不完全相同，其中，j为正整数，且j≥2。步骤127：将最大的内点率对应的拟合平面确定为目标拟合平面。可以理解的是，每执行一次步骤121进行平面拟合，则会相应计算获得的拟合平面的内点率，即若执行步骤121 j次，相应获得j个拟合平面和j个内点率，每个拟合平面分别对应一个内点率。其中，若重复执行步骤121的次数达到次数阈值后获得的每个拟合平面对应的内点率均小于内点率阈值，则将最大的内点率对应的拟合平面确定为目标拟合平面，从而提高获得的拟合平面的准确度。步骤128：将该拟合平面确定为目标拟合平面。其中，若内点率大于或等于内点率阈值，则将该内点率对应的拟合平面确定为目标拟合平面。由于历史激光点云中可能会包括障碍点，若用于平面拟合的多个激光点的数据包括较多的障碍点的数据，则会导致获得的拟合平面的准确度较低，即获得的拟合平面不能准确地表示移动设备行进路径中的地面，因此，若后续利用该拟合平面来确定当前时刻的障碍点，会导致确定的障碍点的准确度较低。因此，本申请实施例中，利用历史激光点云中多个激光点的数据进行平面拟合，获得拟合平面后，通过计算获得的拟合平面的内点率，以根据内点率确定获得的拟合平面的准确度，若内点率未满足要求，则迭代进行平面拟合，以逐渐提高内点率，从而获得准确度较高的目标拟合平面。为了提高获得的拟合平面的准确度，本申请实施例提供了一种确定目标拟合平面的方式。在图3提供的实施例的基础上，本申请实施例中，第N次执行步骤121时，用于平面拟合的多个激光点的数据为用于第N-1次平面拟合的多个激光点中的多个内点的数据，其中，N为正整数，且N≥2。本申请实施例中，若第一次执行步骤121获得的拟合平面的内点率小于内点率阈值，且次数阈值大于1，则第二次执行步骤121时，用于平面拟合的多个激光点的数据为用于第一次进行平面拟合的多个激光点中的全部内点的数据，以此类推，直至获得的拟合平面的内点率大于或等于内点率阈值或重复执行步骤121的次数达到次数阈值，从而获得准确度较高的目标拟合平面。例如，若第一次用于平面拟合的激光点云的数据包括100个激光点的数据，100个激光点中包括80个内点，内点率为80%；则第二次执行步骤121时，利用这80个激光点的数据进行平面拟合，若这80个激光点中包括75个内点，则内点率为93.75%，以此类推，从而逐渐提高获得的拟合平面的内点率，也就提高获得的拟合平面的准确度。检测到障碍点后，为了使移动设备及时做出避让等响应动作，在图1提供的实施例的基础上，本申请实施例中，目标坐标系为移动设备坐标系。其中，由于移动设备识别到行进路径中存在障碍点后，需要进一步确定障碍物与自身间的距离，以及障碍物的方向，才能进一步规划路径以实现避障。例如，若激光雷达设置在移动设备的最左侧，当前移动设备在向左侧拐弯移动，若确定到的障碍点的坐标数据是激光雷达坐标系下的数据，障碍点位于激光雷达的正前方，位于移动设备的左侧，且若移动设备以原来规划的路径向左拐弯移动过程中会撞到该障碍点，则这时移动设备需重新进行路径规划以避障。但是，若移动设备直接利用激光雷达坐标系下的该障碍点的坐标数据进行路径规划以避开该障碍点，则会误认为该障碍点位于其正前方，导致规划的路径的准确度较低，无法实现避障。因此，本申请实施例中，通过设置目标坐标系为移动设备坐标系，则确定的障碍点的坐标数据也是移动设备坐标系下的数据，因此，移动设备基于确定的障碍点的坐标数据进行路径规划，从而提高了获得的路径的准确度，也就可以有效地实现避障。进一步地，若确定的障碍点的坐标数据不是移动设备坐标系下的数据，通过移动设备将其转换为移动设备坐标系下的数据后再进行路径规划，会导致获得的路径的效率较低，若障碍物较小，易出现无法及时避障的现象，导致发生事故。因此，本申请实施例中，通过设置目标坐标系为移动设备坐标系，移动设备检测到障碍点后，可以及时、有效地避障，避免发生事故。为了获得准确度较高的目标坐标系下的目标拟合平面，以及目标坐标系下的当前激光点云的数据，在前述实施例的基础上，本申请实施例中，历史激光点云的数据为，其中，/＞为激光雷达坐标系下的数据，历史激光点云中各个激光点对应的移动设备的姿态为/＞，其中，步骤120包括：步骤a1：利用公式，将/＞转换为目标坐标系下的历史激光点云的数据，其中，/＞为目标坐标系下的历史激光点云的数据，/＞为当前时刻移动设备的姿态，/＞为激光雷达坐标系转换到目标坐标系的外参。其中，、/＞，……，/＞分别表示历史激光点云中各个激光点对应的坐标数据。/＞、/＞，……，/＞分别表示历史激光点云中各个激光点对应的移动设备的姿态。具体地，激光点/＞对应的移动设备的姿态为/＞，表示激光雷达探测该激光点/＞时，移动设备的姿态为/＞，其他激光点类似，此处不再一一具体介绍。可以理解的是，若激光雷达为单线激光雷达，则激光点的坐标数据为二维数据；若激光雷达为多线激光雷达，则激光点的坐标数据为三维数据。/＞表示/＞矩阵的逆矩阵。步骤a2：利用目标坐标系下的历史激光点云的数据进行平面拟合，获得目标坐标系下的目标拟合平面。其中，本步骤与步骤120类似，此处不再赘述。步骤150包括：若当前激光点云的数据为激光雷达坐标系下的数据，则利用公式将激光雷达坐标系下的当前激光点云的数据转换为目标坐标系下的数据，其中，/＞为目标坐标系下的当前激光点云的数据，/＞为通过激光雷达获得的激光雷达坐标系下的当前激光点云的数据。本申请实施例中，由于通过激光雷达获得的激光点云的数据为激光雷达坐标系下的数据，通过利用激光雷达坐标系转换到移动设备坐标系的外参，以及移动设备的姿态，可以准确地将激光雷达坐标系下的激光点云的数据转换为移动设备坐标系下的激光点云的数据，从而提高获得的移动设备坐标系下的目标拟合平面的准确度。为了避免误判障碍点，在图1提供的实施例的基础上，本申请实施例中，该障碍点的检测方法还包括以下步骤：步骤b1：获取移动设备行进过程中第二历史时段内的障碍点云，其中，障碍点云为第二历史时段内每个时刻的障碍点的集合。其中，第二历史时段是指距离当前时刻较近的过去一个时段，例如，过去的3~5秒。可以利用图1提供的障碍点的检测方法检测第二历史时段内的障碍点，获得障碍点云。第二历史时段与第一历史时段可以相同、不同或者部分相同。步骤b2：将第二历史时段内的障碍点云中的各个障碍点确定为当前时刻的障碍点。其中，机器人检测到障碍点后，需要一定的时间来反应才能进行避障动作，如果只将当前时刻采集的激光点云中的障碍点确定为当前时刻的障碍点，并进行避障动作，若障碍物较小，则由于移动设备在不停地移动，很可能出现当前时刻检测到的障碍点在下一时刻无法检测到，使移动设备误以为障碍物已被清除而无需进行避障动作，则会导致发生事故。例如，对于自主移动的车辆，当前时刻车辆检测到障碍物后，若立即采取停车措施以实现避障，但是由于车辆受到惯性作用，采取停车措施后，车辆仍会向前滑行一段距离。若障碍物较小，车辆向前滑行一段距离后，障碍物不在车辆的检测范围内，则这时车辆无法检测到障碍物，误以为障碍物已被清除，则继续向前行驶，从而发生事故。因此，本申请实施例中，在当前时刻检测到的障碍点的基础上，通过将过去一个时段内检测到的障碍点也作为当前时刻的障碍点，以使移动设备采取避障动作，重新规划移动路线，从而可以实现避障，避免发生上述情况。在前述实施例的基础上，本申请实施例中，第二历史时段内的障碍点云的数据为，/＞为目标坐标系下的数据，第二历史时段内的障碍点云中各个激光点对应的移动设备的姿态为/＞，其中，步骤b2包括：步骤b21：利用公式，将第二历史时段内的障碍点云的数据转换为当前时刻的点云数据，其中，/＞为转换后的目标坐标系下当前时刻的障碍点云的数据，/＞为当前时刻移动设备的姿态。其中，由于移动设备是不停移动的，过去时段内检测到的障碍点的数据是基于移动设备的过去姿态确定的，因此，需要将第二历史时段内的障碍点的数据转换为当前时刻的点云数据。其中，、/＞，……，/＞分别表示第二历史时段内的障碍点云中各个障碍点对应的坐标数据。/＞、/＞，……，/＞分别表示各个障碍点对应的移动设备的姿态。具体地，激光点/＞对应的移动设备的姿态为/＞，表示激光雷达探测该激光点/＞时，移动设备的姿态为/＞，其他障碍点类似，此处不再一一具体介绍。步骤b22：将中的障碍点确定为当前时刻的障碍点。本步骤中，将中包括的/＞个障碍点确定为当前时刻的障碍点，将这些障碍点加入到基于当前时刻的激光点云数据确定的障碍点集中。/＞本申请实施例中，通过利用第二历史时段内各个障碍点的坐标数据以及对应的移动设备的姿态和当前时刻移动设备的姿态，将第二历史时段内的障碍点的数据转换为当前时刻的障碍点的坐标数据，从而提高了获得的障碍点的数据的准确度。图4示出了本申请实施例提供的障碍点的检测装置的结构示意图。如图4所示，该装置200包括：第一获取模块201、平面拟合模块202、第二获取模块203、转换模块204、计算模块205和确定模块206。其中，第一获取模块201用于获取移动设备行进过程中第一历史时段内采集的历史激光点云的数据。平面拟合模块202用于利用历史激光点云的数据进行平面拟合，获得目标坐标系下的目标拟合平面。第二获取模块203用于获取移动设备当前时刻采集的当前激光点云的数据。转换模块204用于若当前激光点云的数据不是目标坐标系下的数据，则将当前激光点云的数据转换为目标坐标系下的数据。计算模块205用于计算目标坐标系下当前激光点云中各个激光点与目标拟合平面间的第一距离，得到多个第一距离，其中，各个激光点分别对应一个第一距离。确定模块206用于将多个第一距离中大于第一距离阈值的第一距离对应的激光点确定为当前时刻的障碍点。本实施例提供的障碍点的检测装置，用于执行前述方法实施例中的障碍点的检测方法的技术方案，其实现原理和技术效果类似，在此不再赘述。值得说明的是，本实施例提供的障碍点的检测装置，还包括其他用于执行上述障碍点的检测方法实施例的各步骤的各个模块，此处不再一一赘述。图5示出了本申请实施例提供的障碍点的检测设备的结构示意图，本申请具体实施例并不对障碍点的检测设备的具体实现做限定。如图5所示，该障碍点的检测设备可以包括：处理器302、通信接口304、存储器306、以及通信总线308。其中：处理器302、通信接口304、以及存储器306通过通信总线308完成相互间的通信。通信接口304，用于与其它设备比如客户端或其它服务器等的网元通信。处理器302，用于执行程序310，具体可以执行上述用于障碍点的检测方法实施例中的相关步骤。具体地，程序310可以包括程序代码，该程序代码包括计算机可执行指令。处理器302可能是中央处理器CPU，或者是特定集成电路ASIC，或者是被配置成实施本申请实施例的一个或多个集成电路。障碍点的检测设备包括的一个或多个处理器，可以是同一类型的处理器，如一个或多个CPU；也可以是不同类型的处理器，如一个或多个CPU以及一个或多个ASIC。存储器306，用于存储程序310。存储器306可能包含高速RAM存储器，也可能还包括非易失性存储器，例如至少一个磁盘存储器。本申请实施例提供了一种计算机可读存储介质，该存储介质存储有可执行指令，该可执行指令在障碍点的检测设备上运行时，使得障碍点的检测设备执行上述任意方法实施例中的障碍点的检测方法。本申请实施例提供了一种计算机程序，所述计算机程序可被处理器调用使障碍点的检测设备执行上述任意方法实施例中的障碍点的检测方法。本申请实施例提供了一种计算机程序产品，计算机程序产品包括存储在计算机可读存储介质上的计算机程序，计算机程序包括程序指令，当程序指令在计算机上运行时，使得所述计算机执行上述任意方法实施例中的障碍点的检测方法。
