标题title
一种塑胶颗粒在线视觉检测方法及系统
摘要abst
本发明涉及图像处理技术领域，具体涉及一种塑胶颗粒在线视觉检测方法及系统，该方法包括：获取塑胶颗粒图像；将塑胶颗粒图像均分为多个尺寸相同的窗口，利用Harris角点检测算法检测塑胶颗粒图像中的角点，根据窗口内角点数量得到概率因子；根据窗口内角点的密集程度得到窗口的粗糙度因子；进而根据概率因子和粗糙度因子得到窗口的凌乱度系数；以各像素点为中心构建窗口，根据窗口内灰度分布情况得到灰度信息丰富因子；进而获取凸显系数；根据凸显系数及凌乱度系数得到增强权重；进而根据增强权重得到自适应增强尺度；利用BP神经网络完成塑胶颗粒的在线视觉质量检测。本发明可实现塑胶颗粒质量检测，提高质量检测的准确性。
权利要求书clms
1.一种塑胶颗粒在线视觉检测方法，其特征在于，该方法包括以下步骤：获取塑胶颗粒图像，并进行预处理；将塑胶颗粒图像均分为多个尺寸相同的方形窗口，记为第一方形窗口，利用Harris角点检测算法检测塑胶颗粒图像中的角点，根据各第一方形窗口内角点数量得到各第一方形窗口的概率因子；根据各第一方形窗口内角点的密集程度得到各第一方形窗口的粗糙度因子；根据各第一方形窗口的概率因子和粗糙度因子得到各第一方形窗口的凌乱度系数；以各像素点为中心构建方形窗口，记为第二方形窗口，根据各像素点第二方形窗口内的灰度分布情况得到各像素点的灰度信息丰富因子；根据各像素点第二方形窗口内所有像素点的灰度信息丰富因子获取各像素点的凸显系数；根据各像素点的凸显系数及各像素点所在第一方形窗口的凌乱度系数得到各像素点的增强权重；根据各像素点的增强权重得到各像素点的自适应增强尺度；利用BP神经网络对塑胶颗粒图像的增强效果图进行缺陷检测，完成塑胶颗粒的在线视觉质量检测。2.在如权利要求1所述的一种塑胶颗粒在线视觉检测方法，其特征在于，所述根据各第一方形窗口内角点数量得到各第一方形窗口的概率因子，包括：对于各第一方形窗口，统计第一方形窗口内角点的数量，统计第一方形窗口内像素点的总数量，将所述角点的数量与所述像素点的总数量的比值作为第一方形窗口的概率因子。3.如权利要求1所述的一种塑胶颗粒在线视觉检测方法，其特征在于，所述根据各第一方形窗口内角点的密集程度得到各第一方形窗口的粗糙度因子，包括：对于各第一方形窗口，将第一方形窗口内某个角点记为第一角点，计算所述第一角点与第一方形窗口内所有角点的欧式距离，计算第一方形窗口内所有角点的所述欧式距离的均值，记为第一均值，计算第一方形窗口内所有角点的所述欧式距离与所述均值的差值绝对值，计算第一方形窗口内所有角点的所述差值绝对值的均值，记为第二均值，将所述第二均值的相反数作为以自然常数为底的指数函数的指数，将所述指数函数作为第一角点的密集程度，根据计算所述第一角点的密集程度的方法获取第一方形窗口内其余角点的密集程度，将窗口内所有角点的密集程度的最大值作为第一方形窗口的粗糙度因子。4.如权利要求1所述的一种塑胶颗粒在线视觉检测方法，其特征在于，所述根据各第一方形窗口的概率因子和粗糙度因子得到各第一方形窗口的凌乱度系数，包括：对于各第一方形窗口，将第一方形窗口的粗糙度因子作为以自然常数为底的指数函数的指数，将第一方形窗口的概率因子与所述指数函数的乘积作为第一方形窗口的凌乱度系数。5.如权利要求1所述的一种塑胶颗粒在线视觉检测方法，其特征在于，所述根据各像素点第二方形窗口内的灰度分布情况得到各像素点的灰度信息丰富因子，包括：对于各像素点，计算像素点的第二方形窗口内像素点灰度值的归一化灰度直方图，计算所述归一化灰度直方图上所有灰度级的信息熵的和值，统计第二方形窗口内像素点灰度值的最大值和最小值，计算所述最大值与所述最小值的差值，将所述差值与所述和值的乘积作为像素点的灰度信息丰富因子。6.如权利要求1所述的一种塑胶颗粒在线视觉检测方法，其特征在于，所述根据各像素点第二方形窗口内所有像素点的灰度信息丰富因子获取各像素点的凸显系数，包括：对于各像素点，计算像素点与像素点的第二方形窗口内各像素点的灰度信息丰富因子的差值绝对值，将第二方形窗口内所有所述差值绝对值的均值作为像素点的凸显系数。7.如权利要求1所述的一种塑胶颗粒在线视觉检测方法，其特征在于，所述根据各像素点的凸显系数及各像素点所在第一方形窗口的凌乱度系数得到各像素点的增强权重，包括：对于各像素点，将像素点的凸显系数作为以自然常数为底的指数函数的指数，记为第一指数函数，将像素点所在所述第一方形窗口的凌乱度系数作为以自然常数为底的指数函数的指数，记为第二指数函数，计算第一指数函数与第二指数函数的和值，将所述和值与1的和值作为像素点的增强权重。8.如权利要求1所述的一种塑胶颗粒在线视觉检测方法，其特征在于，所述根据各像素点的增强权重得到各像素点的自适应增强尺度，包括：将像素点的增强权重与预设初始增强尺度的乘积作为像素点的自适应增强尺度。9.如权利要求1所述的一种塑胶颗粒在线视觉检测方法，其特征在于，所述利用BP神经网络对增强后的塑胶颗粒图像进行缺陷检测，完成塑胶颗粒的在线视觉质量检测，包括：BP神经网络的输入为增强后的塑胶颗粒图像，输出为缺陷检测效果图，计算缺陷像素点数量与塑胶颗粒图像像素点总数量的比值，将所述比值记作本批次塑胶颗粒的质量不良率，当质量不良率大于预设质量不良率阈值时，本批次的塑胶颗粒质量不合格，反之，本批次的塑胶颗粒质量合格。10.一种塑胶颗粒在线视觉检测系统，包括存储器、处理器以及存储在所述存储器中并在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1-9任意一项所述方法的步骤。
说明书desc
技术领域本发明涉及图像处理技术领域，具体涉及一种塑胶颗粒在线视觉检测方法及系统。背景技术塑胶颗粒是制作塑料制品的原材料之一，可用于汽车工业、医疗器械等领域。塑胶颗粒在生产过程中可能存在一些缺陷，如表面凹凸不平、颗粒比较干瘪或颗粒表面皱在一起的情况等，通过对塑胶颗粒进行缺陷检测，可以及时发现塑胶颗粒的缺陷，保证塑胶颗粒的质量，减少后续使用过程中出现问题的可能性，避免产生不必要的浪费。目前的缺陷检测方法十分依赖图片质量，当图片质量较低时，检测结果不够准确，因此为了提高检测结果的准确性，在缺陷检测前需要对图片进行增强，现阶段最常用的图像增强方法是Retinex图像增强算法及其变形。但Retinex图像增强算法是对图像进行统一增强，容易导致塑胶颗粒的细节信息丢失，因此需要根据塑胶颗粒的实际情况进行针对性的增强。发明内容为了解决上述技术问题，本发明的目的在于提供一种塑胶颗粒在线视觉检测方法及系统，所采用的技术方案具体如下：第一方面，本发明实施例提供了一种塑胶颗粒在线视觉检测方法，该方法包括以下步骤：获取塑胶颗粒图像，并进行预处理；将塑胶颗粒图像均分为多个尺寸相同的方形窗口，记为第一方形窗口，利用Harris角点检测算法检测塑胶颗粒图像中的角点，根据各第一方形窗口内角点数量得到各第一方形窗口的概率因子；根据各第一方形窗口内角点的密集程度得到各第一方形窗口的粗糙度因子；根据各第一方形窗口的概率因子和粗糙度因子得到各第一方形窗口的凌乱度系数；以各像素点为中心构建方形窗口，记为第二方形窗口，根据各像素点第二方形窗口内的灰度分布情况得到各像素点的灰度信息丰富因子；根据各像素点第二方形窗口内所有像素点的灰度信息丰富因子获取各像素点的凸显系数；根据各像素点的凸显系数及各像素点所在第一方形窗口的凌乱度系数得到各像素点的增强权重；根据各像素点的增强权重得到各像素点的自适应增强尺度；利用BP神经网络对塑胶颗粒图像的增强效果图进行缺陷检测，完成塑胶颗粒的在线视觉质量检测。进一步地，所述根据各第一方形窗口内角点数量得到各第一方形窗口的概率因子，包括：对于各第一方形窗口，统计第一方形窗口内角点的数量，统计第一方形窗口内像素点的总数量，将所述角点的数量与所述像素点的总数量的比值作为第一方形窗口的概率因子。进一步地，所述根据各第一方形窗口内角点的密集程度得到各第一方形窗口的粗糙度因子，包括：对于各第一方形窗口，将第一方形窗口内某个角点记为第一角点，计算所述第一角点与第一方形窗口内所有角点的欧式距离，计算第一方形窗口内所有角点的所述欧式距离的均值，记为第一均值，计算第一方形窗口内所有角点的所述欧式距离与所述均值的差值绝对值，计算第一方形窗口内所有角点的所述差值绝对值的均值，记为第二均值，将所述第二均值的相反数作为以自然常数为底的指数函数的指数，将所述指数函数作为第一角点的密集程度，根据计算所述第一角点的密集程度的方法获取第一方形窗口内其余角点的密集程度，将窗口内所有角点的密集程度的最大值作为第一方形窗口的粗糙度因子。进一步地，所述根据各第一方形窗口的概率因子和粗糙度因子得到各第一方形窗口的凌乱度系数，包括：对于各第一方形窗口，将第一方形窗口的粗糙度因子作为以自然常数为底的指数函数的指数，将第一方形窗口的概率因子与所述指数函数的乘积作为第一方形窗口的凌乱度系数。进一步地，所述根据各像素点第二方形窗口内的灰度分布情况得到各像素点的灰度信息丰富因子，包括：对于各像素点，计算像素点的第二方形窗口内像素点灰度值的归一化灰度直方图，计算所述归一化灰度直方图上所有灰度级的信息熵的和值，统计第二方形窗口内像素点灰度值的最大值和最小值，计算所述最大值与所述最小值的差值，将所述差值与所述和值的乘积作为像素点的灰度信息丰富因子。进一步地，所述根据各像素点第二方形窗口内所有像素点的灰度信息丰富因子获取各像素点的凸显系数，包括：对于各像素点，计算像素点与像素点的第二方形窗口内各像素点的灰度信息丰富因子的差值绝对值，将第二方形窗口内所有所述差值绝对值的均值作为像素点的凸显系数。进一步地，所述根据各像素点的凸显系数及各像素点所在第一方形窗口的凌乱度系数得到各像素点的增强权重，包括：对于各像素点，将像素点的凸显系数作为以自然常数为底的指数函数的指数，记为第一指数函数，将像素点所在所述第一方形窗口的凌乱度系数作为以自然常数为底的指数函数的指数，记为第二指数函数，计算第一指数函数与第二指数函数的和值，将所述和值与1的和值作为像素点的增强权重。进一步地，所述根据各像素点的增强权重得到各像素点的自适应增强尺度，包括：将像素点的增强权重与预设初始增强尺度的乘积作为像素点的自适应增强尺度。进一步地，所述利用BP神经网络对增强后的塑胶颗粒图像进行缺陷检测，完成塑胶颗粒的在线视觉质量检测，包括：BP神经网络的输入为增强后的塑胶颗粒图像，输出为缺陷检测效果图，计算缺陷像素点数量与塑胶颗粒图像像素点总数量的比值，将所述比值记作本批次塑胶颗粒的质量不良率，当质量不良率大于预设质量不良率阈值时，本批次的塑胶颗粒质量不合格，反之，本批次的塑胶颗粒质量合格。第二方面，本发明实施例还提供了一种塑胶颗粒在线视觉检测系统，包括存储器、处理器以及存储在所述存储器中并在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述任意一项所述方法的步骤。本发明至少具有如下有益效果：本发明对塑胶颗粒图像进行分析，针对单颗塑胶颗粒表面凹凸不平、颗粒比较干瘪，颗粒表面皱在一起，多颗塑胶颗粒堆叠在一起，互相遮挡、边缘难以检测的特征，对图像中的每个像素点赋予不同的增强权重。根据塑胶颗粒图像中边缘相交、缺陷区域角点多且密集的特征，构建凌乱度系数，对局部区域存在缺陷的概率进行了分析；根据像素点及周围像素点的灰度值分布情况构建灰度信息丰富因子，利于提取灰度信息较为丰富的边缘或缺陷区域；进而根据像素点的灰度信息丰富因子的差异构建凸显系数，获取表征像素点位于边缘与缺陷区域的概率，便于对越可能为边缘与缺陷区域的像素点赋予越高的增强权重；根据像素点的凸显系数及像素点所在窗口的凌乱度系数得到像素点的增强权重，进而根据增强权重对像素点赋予自适应增强尺度，根据像素点的特征对像素点实现自适应的增强，使位于边缘及缺陷区域的像素点的增强尺度更高，在满足图像增强的基础上，对塑胶颗粒边缘及缺陷区域进行针对性的增强，为提高后续质量检测的准确性提供了便利。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例提供的一种塑胶颗粒在线视觉检测方法的步骤流程图；图2为像素点自适应增强尺度获取流程示意图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种塑胶颗粒在线视觉检测方法及系统，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一个或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种塑胶颗粒在线视觉检测方法及系统的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种塑胶颗粒在线视觉检测方法的步骤流程图，该方法包括以下步骤：步骤S001，利用CCD相机采集塑胶颗粒图像，并对图像进行预处理。塑胶颗粒的直径一般为3mm，颗粒较小，在生产流水线上每一时刻都有大量塑胶颗粒被传送，直接对生产流水线上的塑胶颗粒进行拍摄，拍摄场景复杂，需要考虑光线、角度等因素，因此需要设置一定的频率将某一时间的塑胶颗粒均匀的传送到封闭采集平台上，利用光源产生均匀的光照，在采集平台的上方利用CCD相机进行拍摄，检测完成后再将颗粒传送回生产流水线。得到塑胶颗粒的图像后，为了减少噪声对后续分析的影响，采用双边滤波法对塑胶颗粒图像进行去噪处理，并将塑胶颗粒图像进行灰度转化，得到塑胶颗粒灰度图。由于双边滤波法是公知技术，本实施例中不再进行赘述。步骤S002，首先根据塑胶颗粒表面的特征计算窗口的凌乱度系数，然后根据灰度信息计算像素点的灰度信息丰富因子，进而求出像素点的凸显系数，最后利用凌乱度系数和凸显系数对像素点赋予增强权重，根据增强权重得到自适应增强尺度，获取自适应增强图像。塑胶颗粒较小，多个塑胶颗粒堆叠在一起时，细节信息较多，传统的多尺度MSR算法等仅将不同尺度下的增强结果线性组合在一起，增强结果易丢失细节信息，本发明根据塑胶颗粒的特征对像素点赋予不同的增强权重，进而改进多尺度MSR算法中的初始增强尺度。由于塑胶颗粒表面存在凹凸不平、颗粒比较干瘪或者颗粒表面皱在一起等表面变化不连续的情况，因此在进行图像增强的时候，为了凸显塑胶颗粒的细节，需要根据以上特征，对上述区域赋予更高的增强权重。在塑胶颗粒的灰度图中，角点通常出现在两个或多个边缘相交、缺陷区域，因此利用Harris角点检测算法检测出塑胶颗粒图像中的角点。进一步，计算一定区域内出现角点的概率，具体过程为：将塑胶颗粒图均分为多个的窗口，记为第一方形窗口，/＞的设定实施者可自行选择，本实施例中/＞为5，统计窗口/＞内出现的角点数量，计算窗口中角点出现的概率，以此为依据构建概率因子/＞：式中，表示窗口/＞中出现角点的概率因子，/＞表示窗口/＞内角点的数量，/＞表示窗口/＞的边长。当窗口内角点的数量越多，/＞越大，角点数量与窗口内所有像素点数量的比值越大，窗口/＞内出现角点的概率越大，即概率因子/＞越大时，表明窗口/＞内存在缺陷的概率越大。由于正常的塑胶颗粒是饱满圆润的，出现角点的概率极小，因此窗口内，角点越密集，说明窗口/＞内存在缺陷的概率越大，角点的密集程度可以根据窗口/＞内角点/＞与该窗口内其它角点的距离进行判断，以此为依据构建窗口/＞的粗糙度因子/＞：式中，表示窗口/＞的粗糙度因子，max表示取最大值操作，e^*表示以自然常数e为底数的指数函数，/＞表示窗口/＞内角点的数量，/＞表示窗口/＞内角点/＞与角点的欧式距离，/＞指窗口/＞内角点/＞与其余/＞个角点的欧式距离的均值。计算角点与窗口/＞内其余各角点的欧式距离，并计算角点/＞所对应的所有欧式距离的均值，当所有所述欧式距离与均值的差值绝对值的均值越小时，/＞越大，说明角点/＞位于窗口内角点较为密集的区域的概率更高，将/＞记为角点/＞的密集程度，为了表明窗口/＞内角点的密集程度，将窗口/＞内所有角点的密集程度的最大值作为窗口/＞的粗糙度因子，当窗口/＞的粗糙度因子/＞越大，表示窗口/＞中的角点越密集，窗口/＞内存在缺陷的概率越大。由于窗口的概率因子/＞和粗糙度因子/＞都可以表征窗口/＞内存在缺陷的概率，因此根据窗口/＞的概率因子/＞与粗糙度因子/＞构建窗口/＞的凌乱度系数/＞：式中，表示窗口/＞的凌乱度系数，/＞表示窗口/＞的概率因子，e^*表示以自然常数e为底数的指数函数，/＞表示窗口/＞的粗糙度因子。当窗口内出现角点的概率越大，即窗口/＞的概率因子/＞越大，且窗口/＞内角点越密集时，即窗口/＞粗糙度因子/＞越大时，窗口/＞内存在缺陷的概率越大，即窗口/＞的凌乱度系数/＞越大。由于塑料颗粒的表面光滑，光线会反射回相机，导致像素点的灰度值较高，而边缘和缺陷区域的表面不规则，光线会以不同的角度散射，导致像素点的灰度值差异较大，因此可以根据像素点灰度值的变化情况获取塑胶颗粒的边缘及缺陷区域。以窗口内像素点/＞为中心构建 /＞的窗口，记为第二方形窗口，/＞的设定实施者可自行选择，本实施例中/＞为3，计算以像素点/＞为中心的窗口中像素点灰度值的归一化灰度直方图，像素点的灰度值差异较小时，对边缘及缺陷区域的获取影响较小，因为边缘及缺陷区域通常是由灰度值变化较大的像素点组成，而灰度值差异较小的像素点通常属于背景或平滑区域，因此将上述以像素点/＞为中心的窗口的归一化灰度直方图的横坐标由相邻的5个灰度等级代替原来的1个灰度等级，纵坐标为相应的5个相邻灰度等级出现的概率和，根据归一化灰度直方图可以计算像素点的灰度信息丰富因子/＞：式中，表示窗口/＞内像素点/＞的灰度信息丰富因子，/＞表示以像素点/＞为中心的窗口内像素点/＞的灰度值，max表示取最大值操作，min表示取最小值操作，/＞表示以像素点/＞为中心构建窗口的归一化灰度直方图的灰度级数量，/＞表示以像素点/＞为中心构建窗口的归一化灰度直方图的灰度级/＞的信息熵。当像素点位于塑胶颗粒的边缘或缺陷区域时，以像素点/＞为中心的窗口内像素点的灰度值较为离散， 则根据以像素点/＞为中心的窗口内像素点的灰度值构建的归一化灰度直方图上，所有灰度级的信息熵的和值越大，因此像素点/＞的灰度信息丰富因子/＞越大，表明以像素点/＞位于塑胶颗粒边缘或缺陷区域的概率越大。由于一定区域内像素点与周围像素点的灰度信息丰富因子差异越大，像素点/＞位于边缘及缺陷区域的概率更大，因此根据像素点灰度信息丰富因子的差异构建凸显系数：式中，表示窗口/＞内像素点/＞的凸显系数，/＞表示以像素点/＞为中心的窗口的边长，/＞表示窗口/＞内像素点/＞的灰度信息丰富因子，/＞表示以像素点/＞为中心的窗口内像素点/＞的灰度信息丰富因子。像素点位于塑胶颗粒的边缘或缺陷区域时，以像素点/＞为中心的窗口内灰度值离散程度越大，各灰度级的信息熵的和值越大，像素点/＞的灰度信息丰富因子越大，当像素点/＞的窗口内像素点的灰度离散程度大于以像素点/＞为中心的窗口内像素点的灰度离散程度时，则像素点/＞位于塑胶颗粒的边缘或缺陷区域的概率高于像素点/＞位于塑胶颗粒的边缘或缺陷区域的概率，即像素点/＞的灰度信息丰富因子/＞大于像素点/＞的灰度信息丰富因子/＞，同理，比较像素点/＞与以像素点/＞为中心的窗口内其余像素点的灰度信息丰富因子，当像素点/＞与以像素点/＞为中心的窗口内各像素点的灰度信息丰富因子的差值绝对值之和越大，说明像素点/＞在局部区域的凸显程度越大，像素点/＞位于边缘区域或缺陷区域的概率更大。根据像素点的凸显系数/＞及像素点/＞所在窗口/＞的凌乱度系数/＞构建增强权重/＞：式中，表示像素点/＞的增强权重，e^*表示以自然常数e为底数的指数函数，表示窗口/＞的凌乱度系数，/＞表示像素点/＞的凸显系数，1表示像素点/＞位于除塑胶颗粒的边缘或缺陷区域时的初始增强权重。在塑胶颗粒边缘及缺陷区域，角点较多且密集，同时像素点及其周围像素点的灰度值差异较大，因此当像素点位于塑胶颗粒边缘及缺陷区域时，像素点/＞所在窗口/＞的凌乱度系数越大，且像素点的凸显系数/＞越大，因此需要对像素点/＞进行增强的强度越大，即像素点/＞的增强权重/＞越大。根据增强权重对初始增强尺度进行赋值，新的自适应增强尺度为/＞：式中，表示像素点/＞的自适应增强尺度，/＞表示像素点/＞的增强权重，是预设初始增强尺度，预设初始增强尺度的设定实施者可自行选取，本实施例中预设初始增强尺度为80。像素点位于塑胶颗粒边缘或缺陷区域的概率越高，像素点/＞的增强权重越大，进而对像素点/＞的自适应增强尺度越大，像素点自适应增强尺度获取流程示意图如图2所示。本发明实施例在对塑胶颗粒进行统一初始增强尺度的基础上，充分考虑了塑胶颗粒的特征，根据塑胶颗粒边缘和缺陷区域角点较多且密集，以及像素点与周围像素点灰度值差异较大的特征，对塑胶颗粒边缘及缺陷区域像素点进行针对性的增强，便于提高后续缺陷检测的准确性。利用多尺度MSR算法根据自适应增强尺度对塑胶颗粒图像进行图像增强，由于多尺度MSR算法是公知技术，本实施例中不再进行赘述。至此，可以获取塑胶颗粒图像的增强效果图。步骤S003，利用BP神经网络对塑胶颗粒图像的增强效果图进行缺陷检测，完成塑胶颗粒的在线视觉质量检测。BP神经网络的输入为塑胶颗粒图像的增强效果图，BP神经网络的输出为缺陷检测效果图，缺陷像素点的标签为1，正常像素点的标签为0，损失函数为交叉熵损失函数，根据标签和损失函数对BP神经网络进行训练，训练的过程为公知技术，本发明实施例不再进行赘述。进一步，为检测本批次塑胶颗粒的整体质量，在获取塑胶颗粒图像中的缺陷像素点之后，需要计算缺陷像素点数量与塑胶颗粒图像像素点总数量的比值，将比值记作本批次塑胶颗粒的质量不良率，进一步，本实施例设定一个质量不良率阈值，当质量不良率大于质量不良率阈值时，本批次的塑胶颗粒质量不合格，需要重新加工，当质量不良率小于等于质量不良率阈值时，本批次的塑胶颗粒质量合格，不影响塑胶颗粒的后续使用。至此，可实现对塑胶颗粒的质量检测。基于与上述方法相同的发明构思，本发明实施例还提供了一种塑胶颗粒在线视觉检测系统，包括存储器、处理器以及存储在所述存储器中并在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述一种塑胶颗粒在线视觉检测方法中任意一项所述方法的步骤。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。且上述对本说明书特定实施例进行了描述。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
