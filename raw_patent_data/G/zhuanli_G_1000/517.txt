标题title
一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法
摘要abst
本发明提出一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，涉及图像处理技术领域，包括如下步骤：步骤1：将连铸圆坯样品进行机加工，保证检测面具有粗糙度，再利用腐蚀剂进行腐蚀，腐蚀后冲洗、吹干；步骤2：采集吹干后的连铸圆坯样品的低倍图像；步骤3：基于深度学习识别低倍图像中心区域内的缺陷；步骤4：对于任一缺陷，识别缺陷的长轴和短轴，判断缩孔缺陷；步骤5：基于缩孔缺陷进行自动评级。本发明通过低倍数字化检测系统开发，能够实现钢材低倍缩孔检测的标准化，为生产提供更准确的检测数据，也能够提供更丰富的低倍组织信息，更好为生产工艺的研究和改进服务，本发明结合图像分析识别方法，实现钢材低倍缩孔的数字化评价。
权利要求书clms
1.一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，其特征在于，包括如下步骤：步骤1：将连铸圆坯样品进行机加工，保证检测面具有粗糙度，再利用腐蚀剂进行腐蚀，腐蚀后冲洗、吹干；步骤2：采集吹干后的连铸圆坯样品的低倍图像；步骤3：基于深度学习识别低倍图像中心区域内的缺陷；步骤4：对于任一缺陷，识别缺陷的长轴和短轴，长轴对应连铸圆坯样品的实际长度为a，短轴对应连铸圆坯样品的实际长度为b，a＞b，当a和b满足下述条件时，标记该缺陷为缩孔缺陷：步骤5：基于缩孔缺陷进行自动评级。2.根据权利要求1所述的一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，其特征在于：步骤3的中心区域为低倍图像中连铸圆坯中围绕圆心5％直径范围内区域。3.根据权利要求2所述的一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，其特征在于：识别低倍图像中心区域包括下述步骤：步骤3-1：在低倍图像中勾画连铸圆坯边界线；步骤3-2：找出边界线上最远的两个点，记为A和B；步骤3-3：连接A点和B点，找出AB线段的中点，记为圆心O；步骤3-4：将线段AO平均分成5段，找出线段AO上距离O点最近的分段点C；步骤3-5：以O为圆心，OC为半径，绘制圆，该圆所包围的空间即为低倍图像的中心区域。4.根据权利要求3所述的一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，其特征在于，a和b分别满足如下公式：a＝laBAB/lABb＝lbRAB/lAB其中，la代表低倍图像上缺陷的长轴长度，lb代表低倍图像上缺陷的短轴长度，RAB代表连铸圆坯样品的直径，lAB代表低倍图像上线段AB的长度。5.根据权利要求1所述的一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，其特征在于：基于深度学习识别低倍组织图像的缺陷，具体包括如下步骤：步骤3.1：收集若干包含缺陷的低倍组织图像样本，并对缺陷进行标注；步骤3.2：对低倍组织图像样本进行预处理操作，将低倍组织图像样本缩放到固定尺寸，并进行归一化处理；步骤3.3：构建卷积神经网络模型，并运用卷积神经网络对预处理后的低倍组织图像样本进行训练；步骤3.4：使用另外一组低倍组织图像样本作为测试数据评价卷积神经网络模型精度，当精度不满足要求时，增加低倍组织图像样本，重复步骤3.1-步骤3.4；步骤3.5：对采集的低倍组织图像进行预处理操作，基于ResNeSt网络模型推理并标注低倍组织图像的缺陷。6.根据权利要求1所述的一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，其特征在于：步骤1检测面粗糙度Ra＜0.1um。7.根据权利要求4所述的一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，其特征在于：识别缺陷的长轴和短轴包括操作为：首先找出缺陷边界上最远的两个点P和Q，线段PQ作为缺陷的长轴；找出PQ的中点，记为T点；做一条垂直于PQ并且穿过T点的直线，该直线与缺陷边界的交点记为J和K，线段JK作为缺陷的短轴。8.根据权利要求7所述的一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，其特征在于：自动评级公式为：其中，T表示评级得分，n表示低倍图像中心区域内的缩孔缺陷的个数，ai表示第i个缺陷的长轴对应连铸圆坯样品的实际长度，bi表示第i个缺陷的短轴对应连铸圆坯样品的实际长度。9.根据权利要求1所述的一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，其特征在于：步骤2采用LGE模型变换函数对低倍图像进行局部图像增强处理，LGE模型变换函数为：其中，f代表低倍图像点的灰度值，u是横坐标，v是纵坐标，g代表低倍图像点经过增强处理后的灰度值，TLGE代表LGE模型变换处理，Gm代表全局平均灰度值，m代表窗口内平均灰度值，σ代表加窗口后的局部标准差，参数a为低倍图像增强效果指数因子,参数b为低倍图像增强效果分数因子,参数c*为低倍图像增强效果反向乘数因子,参数k为低倍图像增强效果正向乘数因子，参数a、b、c*和k均是经验值。10.根据权利要求1所述的一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，其特征在于：步骤2采用低倍图像质量评价函数对低倍图像进行质量评价，评价结果小于阈值，则继续步骤3，评价结果大于阈值，则重新采集吹干后的连铸圆坯样品的低倍图像，其中，低倍图像质量评价函数为：其中，F代表低倍图像质量评价函数，edgels代表由一阶微分边缘检测算子得到的边缘像素数，E代表低倍图像边缘强度，Ie代表增强后的低倍图像，H代表低倍图像熵值，MI为低倍图像最大横坐标数，NI为低倍图像最大纵坐标数。
说明书desc
技术领域本发明涉及图像处理技术领域，具体是一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法。背景技术低倍试样主要有连铸方坯、连铸圆坯、圆棒等，均依靠传统的酸洗、人工评级的方式来评估低倍质量，检测项目一般包括一般疏松、中心疏松、缩孔、内部裂纹、偏析等。由于各企业的生产设备和工艺有其自身的特点，造成产品低倍组织状态也有一定差异，基本无法和标准图谱完全对应，很多细节无法量化，检测人员需对标准进行理解或对图谱进行转化来综合评定低倍组织级别，检测受人为因素影响较大。尤其是缩孔缺陷，YB/T 153标准图谱中1.0-3.0级图谱给出的均为圆形缩孔，4.0级为长条形状，但在实际产品中，缩孔形状通常为不规则空洞，有长条形的、有多个空洞的情况，检测标准更加容易受主观经验的影响，不容易统一。发明内容本发明的目的是针对现有技术存在的上述问题，克服现有技术的不足之处，设计一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，通过低倍数字化检测系统开发，能够实现钢材低倍缩孔检测的标准化，为生产提供更准确的检测数据，也能够提供更丰富的低倍组织信息，更好为生产工艺的研究和改进服务，本发明结合图像分析识别方法，实现钢材低倍缩孔的数字化评价。一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，包括如下步骤：步骤1：将连铸圆坯样品进行机加工，保证检测面具有粗糙度，再利用腐蚀剂进行腐蚀，腐蚀后冲洗、吹干；步骤2：采集吹干后的连铸圆坯样品的低倍图像；步骤3：基于深度学习识别低倍图像中心区域内的缺陷；步骤4：对于任一缺陷，识别缺陷的长轴和短轴，长轴对应连铸圆坯样品的实际长度为a，短轴对应连铸圆坯样品的实际长度为b，a＞b，当a和b满足下述条件时，标记该缺陷为缩孔缺陷：步骤5：基于缩孔缺陷进行自动评级。优选的，步骤3的中心区域为低倍图像中连铸圆坯中5％直径范围内区域。识别低倍图像中连铸圆坯中5％直径范围内区域包括下述步骤：步骤3-1：在低倍图像中勾画连铸圆坯边界线；步骤3-2：找出边界线上最远的两个点，记为A和B；步骤3-3：连接A点和B点，找出AB线段的中点，记为圆心O；步骤3-4：将线段AO平均分成5段，找出线段AO上距离O点最近的分段点C；步骤3-5：以O为圆心，OC为半径，绘制圆，该圆所包围的空间即为低倍图像的中心区域。进一步的，a和b分别满足如下公式：a＝laRAB/lABb＝lbBAB/lAB其中，la代表低倍图像上缺陷的长轴长度，lb代表低倍图像上缺陷的短轴长度，RAB代表连铸圆坯样品的直径，lAB代表低倍图像上线段AB的长度。优选的，基于深度学习识别低倍组织图像的缺陷，具体包括如下步骤：步骤3.1：收集若干包含缺陷的低倍组织图像样本，并对缺陷进行标注；步骤3.2：对低倍组织图像样本进行预处理操作，将低倍组织图像样本缩放到固定尺寸，并进行归一化处理；步骤3.3：构建卷积神经网络模型，并运用卷积神经网络对预处理后的低倍组织图像样本进行训练；步骤3.4：使用另外一组低倍组织图像样本作为测试数据评价卷积神经网络模型精度，当精度不满足要求时，增加低倍组织图像样本，重复步骤3.1-步骤3.4；步骤3.5：对采集的低倍组织图像进行预处理操作，基于ResNeSt网络模型推理并标注低倍组织图像的缺陷。优选的，步骤1检测面粗糙度Ra＜0.1um。进一步的，识别缺陷的长轴和短轴包括操作为：首先找出缺陷边界上最远的两个点P和Q，线段PQ作为缺陷的长轴；找出PQ的中点，记为T点；做一条垂直于PQ并且穿过T点的直线，该直线与缺陷边界的交点记为J和K，线段JK作为缺陷的短轴。进一步的，自动评级公式为：其中，T表示评级得分，n表示低倍图像中心区域内的缩孔缺陷的个数，ai表示第i个缺陷的长轴对应连铸圆坯样品的实际长度，bi表示第i个缺陷的短轴对应连铸圆坯样品的实际长度。优选的，步骤2采用LGE模型变换函数对低倍图像进行局部图像增强处理，LGE模型变换函数为：其中，f代表低倍图像点的灰度值，u是横坐标，v是纵坐标，g代表低倍图像点经过增强处理后的灰度值，TLGE代表LGE模型变换处理，Gm代表全局平均灰度值，m代表窗口内平均灰度值，σ代表加窗口后的局部标准差，参数a为低倍图像增强效果指数因子,参数b为低倍图像增强效果分数因子,参数c*为低倍图像增强效果反向乘数因子,参数k为低倍图像增强效果正向乘数因子，参数a、b、c*和k均是经验值。优选的，步骤2采用低倍图像质量评价函数对低倍图像进行质量评价，评价结果小于阈值，则继续步骤3，评价结果大于阈值，则重新采集吹干后的连铸圆坯样品的低倍图像，其中，低倍图像质量评价函数为：其中，F代表低倍图像质量评价函数，edgels代表由一阶微分边缘检测算子得到的边缘像素数，E代表低倍图像边缘强度，Ie代表增强后的低倍图像，H代表低倍图像熵值，MI为低倍图像最大横坐标数，NI为低倍图像最大纵坐标数。与现有技术相比，本发明的有益效果：本发明设计一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，通过低倍数字化检测系统开发，能够实现钢材低倍缩孔检测的标准化，为生产提供更准确的检测数据，也能够提供更丰富的低倍组织信息，更好为生产工艺的研究和改进服务，本发明结合图像分析识别方法，实现钢材低倍缩孔的数字化评价。1.本发明无需考虑缩孔形状的差异，大大简化了方案的设计难度，便于标准的统一化。2.本发明创造性的提出了用缺陷的长轴和短轴作为评价缺陷的关键指标，并设计相对应的自动评级方案，针对性强，精度高。3.本发明采用LGE模型变换函数对低倍图像进行局部图像增强处理，基于低倍图像质量评价函数进行低倍图像质量的把控，提高低倍图像的处理效果。附图说明图1是本发明低倍组织缩孔图像及其对应的缺陷。具体实施方式下面结合附图以及具体实施方法对本发明一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法作进一步详细说明。本发明提出了一种基于机器视觉的钢材低倍缩孔数字化检测方法，旨在集成制样输送、图像采集、缺陷识别和数据整理功能，提升检测过程的自动化、智能化、精确化和安全化程度，构建起高效、准确、客观的钢材试样低倍组织质量评价体系，为钢铁行业产品质量检测向短流程、自动化、智能化发展提供技术支撑。一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，如图1所示，包括如下步骤：步骤1：将连铸圆坯样品进行机加工，保证检测面具有粗糙度，再利用腐蚀剂进行腐蚀，腐蚀后冲洗、吹干；步骤2：采集吹干后的连铸圆坯样品的低倍图像；步骤3：基于深度学习识别低倍图像中心区域内的缺陷；步骤4：对于任一缺陷，识别缺陷的长轴和短轴，长轴对应连铸圆坯样品的实际长度为a，短轴对应连铸圆坯样品的实际长度为b，a＞b，当a和b满足下述条件时，标记该缺陷为缩孔缺陷：步骤5：基于缩孔缺陷进行自动评级。这里a和b单位均为mm。优选的，步骤3的中心区域为低倍图像中连铸圆坯中5％直径范围内区域。识别低倍图像中连铸圆坯中5％直径范围内区域包括下述步骤：步骤3-1：在低倍图像中勾画连铸圆坯边界线；步骤3-2：找出边界线上最远的两个点，记为A和B；步骤3-3：连接A点和B点，找出AB线段的中点，记为圆心O；步骤3-4：将线段AO平均分成5段，找出线段AO上距离O点最近的分段点C；步骤3-5：以O为圆心，OC为半径，绘制圆，该圆所包围的空间即为低倍图像的中心区域。进一步的，a和b分别满足如下公式：a＝laBAB/lABb＝lbRAB/lAB其中，la代表低倍图像上缺陷的长轴长度，lb代表低倍图像上缺陷的短轴长度，RAB代表连铸圆坯样品的直径，lAB代表低倍图像上线段AB的长度。优选的，基于深度学习识别低倍组织图像的缺陷，具体包括如下步骤：步骤3.1：收集若干包含缺陷的低倍组织图像样本，并对缺陷进行标注；步骤3.2：对低倍组织图像样本进行预处理操作，将低倍组织图像样本缩放到固定尺寸，并进行归一化处理；步骤3.3：构建卷积神经网络模型，并运用卷积神经网络对预处理后的低倍组织图像样本进行训练；步骤3.4：使用另外一组低倍组织图像样本作为测试数据评价卷积神经网络模型精度，当精度不满足要求时，增加低倍组织图像样本，重复步骤3.1-步骤3.4；步骤3.5：对采集的低倍组织图像进行预处理操作，基于ResNeSt网络模型推理并标注低倍组织图像的缺陷。优选的，步骤1检测面粗糙度Ra＜0.1um。进一步的，识别缺陷的长轴和短轴包括操作为：首先找出缺陷边界上最远的两个点P和Q，线段PQ作为缺陷的长轴；找出PQ的中点，记为T点；做一条垂直于PQ并且穿过T点的直线，该直线与缺陷边界的交点记为J和K，线段JK作为缺陷的短轴。进一步的，自动评级公式为：其中，T表示评级得分，n表示低倍图像中心区域内的缩孔缺陷的个数，ai表示第i个缺陷的长轴对应连铸圆坯样品的实际长度，bi表示第i个缺陷的短轴对应连铸圆坯样品的实际长度。优选的，步骤2采用LGE模型变换函数对低倍图像进行局部图像增强处理，LGE模型变换函数为：其中，f代表低倍图像点的灰度值，u是横坐标，v是纵坐标，g代表低倍图像点经过增强处理后的灰度值，TLGE代表LGE模型变换处理，Gm代表全局平均灰度值，m代表窗口内平均灰度值，σ代表加窗口后的局部标准差，参数a为低倍图像增强效果指数因子,参数b为低倍图像增强效果分数因子,参数c*为低倍图像增强效果反向乘数因子,参数k为低倍图像增强效果正向乘数因子，参数a、b、c*和k均是经验值。优选的，步骤2采用低倍图像质量评价函数对低倍图像进行质量评价，评价结果小于阈值，则继续步骤3，评价结果大于阈值，则重新采集吹干后的连铸圆坯样品的低倍图像，其中，低倍图像质量评价函数为：其中，F代表低倍图像质量评价函数，edgels代表由一阶微分边缘检测算子得到的边缘像素数，E代表低倍图像边缘强度，Ie代表增强后的低倍图像，H代表低倍图像熵值，MI为低倍图像最大横坐标数，NI为低倍图像最大纵坐标数。本发明提出一种基于机器视觉的钢材低倍缩孔缺陷识别及评价方法，上述实施例只为说明本发明的技术构思及特点，其目的在于让熟悉此项技术的人士能够了解本发明的内容并据以实施，并不能以此限制本发明的保护范围。凡根据本发明精神实质所作的等效变化或修饰，都应涵盖在本发明的保护范围之内。
