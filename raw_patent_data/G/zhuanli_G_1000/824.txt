标题title
一种具有自适应寄生电容补偿的电容器复数阻抗测量方法、电路和装置
摘要abst
本发明属于阻抗测量技术领域，具体涉及一种具有自适应寄生电容补偿的电容器复数阻抗测量方法、电路和装置，方法包括向所述测量电路中输入正弦交流信号激励，在初始状态下对所述测量电路进行输出调零，以检测待检测电容器的复数阻抗；将输入正弦交流信号移相90°或0°，生成移相后的相控信号；响应所述相控信号并对交流信号进行相控整流，将相控整流后的交流信号进行滤波后转换为直流电压进行输出；本发明提出的测量电路可用于测量电容传感器的复数阻抗，也可测量电容传感器的复数阻抗的变化量，可以自动消除寄生电容，达到精度测量的目的，具有测量范围大，测量精度高，抗干扰能力强的特点。
权利要求书clms
1.一种具有自适应寄生电容补偿的电容器复数阻抗测量方法，其特征在于，适用于包含待检测电容器的测量电路，所述方法包括：向所述测量电路中输入正弦交流信号激励，在初始状态下对所述测量电路进行输出调零，以检测待检测电容器的复数阻抗；将输入正弦交流信号移相90°或0°，生成移相后的相控信号；响应所述相控信号并对交流信号进行相控整流，将相控整流后的交流信号进行滤波后转换为直流电压进行输出。2.根据权利要求1所述的一种具有自适应寄生电容补偿的电容器复数阻抗测量方法，其特征在于，所述初始状态包括所述测量电路未接入所述待检测电容器，或测量电路接入待检测电容器上电的初始时刻。3.根据权利要求1所述的一种具有自适应寄生电容补偿的电容器复数阻抗测量方法，其特征在于，基于待检测电容器复数的实部和虚部，对应检测实部时，输入正弦交流信号移相90°，对应检测虚部时，输入正弦交流信号移相0°。4.一种具有自适应寄生电容补偿的电容器复数阻抗测量电路，用于实施如权利要求1所述测量方法，其特征在于，所述测量电路包括自补偿校准桥电路、移相电路和相控整流电路；所述自补偿校准桥电路用于向所述测量电路中输入正弦交流信号激励，在自补偿校准桥电路未接入所述待检测电容器，或自补偿校准桥电路接入待检测电容器上电的初始时刻下对测量电路进行输出调零，以检测待检测电容器的复数阻抗；所述移相电路用于将输入正弦交流信号移相90°或0°，生成移相后的相控信号；所述相控整流电路用于响应所述相控信号并对交流信号进行相控整流，将相控整流后的交流信号进行滤波后转换为直流电压进行输出。5.根据权利要求4所述的一种具有自适应寄生电容补偿的电容器复数阻抗测量电路，其特征在于：所述的自补偿校准桥电路包含第一级反向比例电路、积分电路、第二级反向比例电路及带PI调节的反馈电路；其中，放大器与电阻/＞组成的第一级反向比例电路与参考电容/＞串联，并与待检测电容器及自动补偿电容/＞并联，再通过运算放大器/＞与反馈电阻/＞组成积分电路输出信号/＞，所述积分电路再经过放大器/＞与电阻/＞、组成的第二级反向比例电路输出信号/＞，所述的自动补偿电容/＞为可编程电容，待检测电容器包括泄露电容/＞和泄露电阻/＞。6.根据权利要求5所述的一种具有自适应寄生电容补偿的电容器复数阻抗测量电路，其特征在于：所述相控整流电路包括比较器、反向比例电路、模拟开关S1、二阶低通滤波电路；运算放大器的反向输入端与所述移相电路连接，正向输入端与地连接。7.根据权利要求6所述的一种具有自适应寄生电容补偿的电容器复数阻抗测量电路，其特征在于：所述移相电路中，当检测待检测电容器的虚部时，移相电路为微分电路，当检测电容传感器的实部/＞时，此时不需要移相，交流信号与下一级的运算放大器/＞的反相输入端相连。8.根据权利要求7所述的一种具有自适应寄生电容补偿的电容器复数阻抗测量电路，其特征在于：模拟开关S1的常开触点连接至所述自补偿校准桥电路输出端，常闭触点连接至输出端/＞，当输入端为原始激励信号移相90°，模拟开关输出信号/＞经过二阶低通滤波电路整成直流量，此时检测待检测电容器的虚部/＞；当输入端为原始激励信号，此时检测待检测电容器的实部/＞；其中，当检测时，移相电路的输出信号的相位为激励信号滞后90°，再经过比较器控制的模拟开关/＞输出信号为：；再经过二阶低通滤波电路进行积分，当二阶低通滤波器的截止频率远小于激励信号频率即可得到直流信号，一个周期内信号积分后输出直流量可近似计算为：；检测虚部为：；当检测时，不需要移相电路，激励信号直接经过比较器控制的模拟开关/＞输出信号为：；再经过二阶低通滤波电路进行积分，当二阶低通滤波器的截止频率远小于激励信号频率即可得到直流信号，一个周期内信号积分后输出直流量可近似计算为：；检测实部为：。9.一种测量装置，其特征在于，包括如权利要求4-8任一项所述测量电路。
说明书desc
技术领域本发明属于阻抗测量技术领域，具体涉及一种具有自适应寄生电容补偿的电容器复数阻抗测量方法、电路和装置。背景技术微小电容测量技术一直被广泛应用于各种MEMS器件、电容传感器、结构间分布电容，因此在军工制造、航天航空、真空测量、生物医学等相关领域等都能相关的应用场景。对于电容层析成像等电容传感器应用场景而言，在交流激励下，电容器复数阻抗的测量可以获得更高分辨率的成像图像或更多的目标特征信息。目前，基于谐振法、CV转换、充放电等测量方法也发明了很多测量电路，但以测试电容的复数阻抗。同时，寄生电容或者杂散电容存在，可以通过板级设计优化，通常采用输入与输出端信号屏蔽等措施减小寄生电容的产生，也可以通过电路方案设计优化，通常设计具有差分输出的电路，这样可以较为容易的消除共模信号。但是，并非所有的检测电路都采用差分输出，因此设计差分输出电路消除寄生电容的方案具有一定的局限性，使得这些测量手段中难以消除。这也造成测量电容与理论计算或者仿真偏大，使得电容层析成像的清晰度降低。此外，对测量电路的成本、灵敏度、寄生效应抑制等越来越高要求。发明内容本发明的目的就在于提供一种具有自适应寄生电容补偿的电容器复数阻抗测量方法、电路和装置，以解决背景技术中提出的问题。本发明通过以下技术方案来实现上述目的：第一方面、本发明提供了一种具有自适应寄生电容补偿的电容器复数阻抗测量方法，适用于包含待检测电容器的测量电路，所述方法包括：向所述测量电路中输入正弦交流信号激励，在初始状态下对所述测量电路进行输出调零，以检测待检测电容器的复数阻抗；将输入正弦交流信号移相90°或0°，生成移相后的相控信号；响应所述相控信号并对交流信号进行相控整流，将相控整流后的交流信号进行滤波后转换为直流电压进行输出。作为本发明的进一步优化方案，所述初始状态包括所述测量电路未接入所述待检测电容器，或测量电路接入待检测电容器上电的初始时刻。作为本发明的进一步优化方案，基于待检测电容器复数的实部和虚部，对应检测实部时，输入正弦交流信号移相90°，对应检测虚部时，输入正弦交流信号移相0°。第二方面、本发明提供了一种具有自适应寄生电容补偿的电容器复数阻抗测量电路，用于实施如以上所述测量方法，所述测量电路包括自补偿校准桥电路、移相电路和相控整流电路；所述自补偿校准桥电路用于向所述测量电路中输入正弦交流信号激励，在自补偿校准桥电路未接入所述待检测电容器，或自补偿校准桥电路接入待检测电容器上电的初始时刻下对测量电路进行输出调零，以检测待检测电容器的复数阻抗；所述移相电路用于将输入正弦交流信号移相90°或0°，生成移相后的相控信号；所述相控整流电路用于响应所述相控信号并对交流信号进行相控整流，将相控整流后的交流信号进行滤波后转换为直流电压进行输出。作为本发明的进一步优化方案，所述的自补偿校准桥电路包含第一级反向比例电路、积分电路、第二级反向比例电路及带PI调节的反馈电路；其中，放大器与电阻/＞组成的第一级反向比例电路与参考电容/＞串联，并与待检测电容器及自动补偿电容/＞并联，再通过运算放大器/＞与反馈电阻/＞组成积分电路输出信号/＞，所述积分电路再经过放大器/＞与电阻/＞、组成的第二级反向比例电路输出信号/＞，所述自动补偿电容/＞为可编程电容，待检测电容器包括泄露电容/＞和泄露电阻/＞。作为本发明的进一步优化方案，所述相控整流电路包括比较器、反向比例电路、模拟开关S1、二阶低通滤波电路；运算放大器的反向输入端与所述移相电路连接，正向输入端与地连接。作为本发明的进一步优化方案，所述移相电路中，当检测待检测电容器的虚部时，移相电路为微分电路，当检测电容传感器的实部/＞时，此时不需要移相，交流信号与下一级的运算放大器/＞的反相输入端相连。作为本发明的进一步优化方案，模拟开关S1的常开触点连接至所述自补偿校准桥电路输出端，常闭触点连接至输出端/＞，当输入端为原始激励信号移相90°，模拟开关输出信号/＞经过二阶低通滤波电路整成直流量，此时检测待检测电容器的虚部/＞；当输入端为原始激励信号，此时检测待检测电容器的实部/＞；其中，当检测时，移相电路的输出信号的相位为激励信号滞后90°，再经过比较器控制的模拟开关/＞输出信号为：；再经过二阶低通滤波电路进行积分，当二阶低通滤波器的截止频率远小于激励信号频率即可得到直流信号，一个周期内信号积分后输出直流量可近似计算为：；检测虚部为：；当检测时，不需要移相电路，激励信号直接经过比较器控制的模拟开关/＞输出信号为：；再经过二阶低通滤波电路进行积分，当二阶低通滤波器的截止频率远小于激励信号频率即可得到直流信号，一个周期内信号积分后输出直流量可近似计算为：；检测实部为：。第三方面、本发明提供了一种测量装置，包括第二方面或第二方面的任一项可能的实现方式中的测量电路。本发明的有益效果在于：本发明提出测量电路可用于测量电容传感器的复数阻抗，也可测量电容传感器的复数阻抗的变化量，可以自动消除寄生电容，达到精度测量的目的，具有测量范围大，测量精度高，抗干扰能力强的特点。本发明提出的测量电路包括自补偿校准桥电路、移相电路、基于比较器的相控整流电路，实现了将电容传感器的复数阻抗转变为直流电压进行检测，可用于测量电容传感器的复数阻抗，也可测量电容传感器的复数阻抗的变化量，可以自动消除寄生电容，达到精度测量的目的。附图说明图1为本发明中测量方法的执行流程示意图。图2为本发明的系统原理框图。图3为本发明的可编程电容原理框图。图4为本发明的移相电路中实现输入交流信号的移相90°的电路图。具体实施方式下面结合附图对本申请作进一步详细描述，有必要在此指出的是，以下具体实施方式只用于对本申请进行进一步的说明，不能理解为对本申请保护范围的限制，该领域的技术人员可以根据上述申请内容对本申请作出一些非本质的改进和调整。实施例1如图1所示，本实施方式提供了一种具有自适应寄生电容补偿的电容器复数阻抗测量方法，适用于包含待检测电容器的测量电路，所述方法包括：S1、向所述测量电路中输入正弦交流信号激励，在输入正弦交流信号激励情况下，将检测的电容传感器复数阻抗转换为电压信号，在初始状态下对所述测量电路进行输出调零，以检测待检测电容器的复数阻抗；通过系统调零操作可以自动消除寄生电容。具体的，所述初始状态包括所述测量电路未接入所述待检测电容器，或测量电路接入待检测电容器上电的初始时刻。S2、将输入正弦交流信号移相90°或0°，生成移相后的相控信号；具体的，基于待检测电容器复数的实部和虚部，对应检测实部时，输入正弦交流信号移相90°，对应检测虚部时，输入正弦交流信号移相0°，移相0°也即不需要进行移相。S3、响应所述相控信号并对交流信号进行相控整流，将相控整流后的交流信号进行滤波后转换为直流电压进行输出。其中，滤波操作基于低通滤波电路实现。可以理解的是，上述测量方法适用于基于电容复数阻抗或者复数阻抗变化测量的传感器；实现将电容传感器的复数阻抗转变为直流电压进行检测，可用于测量电容传感器的复数阻抗，也可以只测量电容传感器的复数阻抗的变化量，可以自动消除寄生电容，达到精度测量的目的。实施例2基于同一发明构思，本实施例中还提供了与测量方法对应的测量电路，由于本公开实施例中的测量电路解决问题的原理与本公开实施例上述测量方法相似，因此测量电路的实施可以参见方法的实施，重复之处不再赘述。如图2-4所示，本实施方式提供了一种具有自适应寄生电容补偿的电容器复数阻抗测量电路，用于实施如以上测量方法，测量电路包括自补偿校准桥电路、移相电路和相控整流电路；自补偿校准桥电路用于向测量电路中输入正弦交流信号激励，在自补偿校准桥电路未接入待检测电容器，或自补偿校准桥电路接入待检测电容器上电的初始时刻下对测量电路进行输出调零，以检测待检测电容器的复数阻抗；移相电路用于将输入正弦交流信号移相90°或0°，生成移相后的相控信号；相控整流电路用于响应相控信号并对交流信号进行相控整流，将相控整流后的交流信号进行滤波后转换为直流电压进行输出。具体参考图2，作为进一步实施的，自补偿校准桥电路包含第一级反向比例电路、积分电路、第二级反向比例电路及带PI调节的反馈电路；其中，放大器与电阻/＞组成的第一级反向比例电路与参考电容/＞串联，并与待检测电容器及自动补偿电容/＞并联，再通过运算放大器/＞与反馈电阻/＞组成积分电路输出信号/＞，积分电路再经过放大器/＞与电阻/＞、组成的第二级反向比例电路输出信号/＞，自动补偿电容/＞为可编程电容，具体原理图参见图3，待检测电容器包括泄露电容/＞和泄露电阻/＞。参考图2，测量电路还包括：FPGA单片机系统、ADC采集电路、PI控制器。根据基于比较器的相控整流电路的输出反馈，ADC采集后通过MCU控制器对系统输出信号进行PI调节值，完成未接入检测待检测电容器或系统上电初始状态下调零，积分电路的输入经过放大器/＞与电阻/＞组成的第一级反向比例电路；其中，当输入正弦激励为，所述自补偿校准桥电路的积分电路输出，及积分电路经第二级反向比例电路输出信号/＞为：；式中，是反向比例电路的增益，/＞是输入正弦激励信号的增益。所述ADC采集电路与所述低通滤波器LPF的输出端相连接，所述ADC采集电路收集到信息后，传入单片机系统，简单处理过后再传入PC端，PC端再通过PI控制器实现可变电容CT的校准。当初始状态下不接电容传感器，进行初始化调零，这样可以自适应进行电容补充，消除寄生电容影响；当初始状态下，接入电容传感器再进行初始化调零，此时即可以，消除寄生电容影响进行自适应寄生电容补充，也可以直接检测电容传感器的变化量，包括电容传感器的虚部变化量，和检测电容传感器的实部变化量。作为进一步实施的，相控整流电路包括比较器、反向比例电路、模拟开关S1、二阶低通滤波电路；运算放大器的反向输入端与移相电路连接，正向输入端与地连接。作为进一步实施的，移相电路中，当检测待检测电容器的虚部时，移相电路为微分电路，当检测电容传感器的实部/＞时，此时不需要移相，交流信号与下一级的运算放大器/＞的反相输入端相连。作为进一步实施的，基于上述测量电路，通过如下步骤的实施实现自动消除寄生电容：通过移相器的输入与地比较来控制模拟开关的通断，用来信号的相位控制，模拟开关S1的常开触点连接至自补偿校准桥电路输出端/＞，常闭触点连接至输出端，当输入端为原始激励信号移相90°，模拟开关输出信号/＞经过二阶低通滤波电路整成直流量，此时检测待检测电容器的虚部/＞；当输入端为原始激励信号，此时检测待检测电容器的实部/＞；其中，当检测时，移相电路的输出信号的相位为激励信号滞后90°，再经过比较器控制的模拟开关/＞输出信号为：；再经过二阶低通滤波电路进行积分，当二阶低通滤波器的截止频率远小于激励信号频率即可得到直流信号，一个周期内信号积分后输出直流量可近似计算为：；检测虚部为：；当检测时，不需要移相电路，激励信号直接经过比较器控制的模拟开关/＞输出信号为：；再经过二阶低通滤波电路进行积分，当二阶低通滤波器的截止频率远小于激励信号频率即可得到直流信号，一个周期内信号积分后输出直流量可近似计算为：；检测实部为：。实施例3本实施方式提供了一种测量装置，该测量装置包括如以上所述的测量电路。对于该测量装置的具体描述可以参考上述测量电路的说明，这里不再一一详述。可理解，该测量装置所包括的其他元件，本申请实施例不作限定。示例性的，该测量装置是一个芯片、一个传感器、或一个电子设备、或物联网设备等，本申请实施例不再一一列举。上述实施例，可以全部或部分地通过软件、硬件、固件或其他任意组合来实现。当使用软件实现时，上述实施例可以全部或部分地以计算机程序产品的形式实现。所述计算机程序产品包括一个或多个计算机指令或计算机程序。在计算机上加载或执行所述计算机指令或计算机程序时，全部或部分地产生按照本发明实施例所述的流程或功能。所述计算机可以为通用计算机、专用计算机、计算机网络，或者其他可编程装置。所述计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，所述计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线方式向另一个网站站点、计算机、服务器或数据中心进行传输。所述计算机可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集合的服务器、数据中心等数据存储设备。所述可用介质可以是磁性介质、光介质，或者半导体介质。半导体介质可以是固态硬盘。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件，或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。另外，在本申请各个实施例中的各功能模块可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。所述功能如果以软件功能模块的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明实施例中所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器（read-only memory，ROM)、随机存取存储器（random access memory，RAM)、磁碟或者光盘等各种可以存储程序代码的介质。以上实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不驱使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围。
