标题title
一种小样本下的智能机舱故障诊断方法及介质
摘要abst
本发明涉及故障诊断技术领域，具体涉及一种小样本下的智能机舱故障诊断方法及介质，包括以下步骤：步骤1：通过安装在机舱指定设备上的振动传感器进行数据采集，获取所述指定设备正常状态下和不同故障状态下的振动信号；步骤2：通过小样本数据判断器判断振动信号是否为小样本数据；使用峭度原理对原始振动信号进行特征对齐，提高模型生成质量与诊断精度。将一维振动信号转换为二维灰度图，能够提取到更高维特征，更有利于模型收敛与最终诊断精度。使用非同步更新算法对C‑CGAN模型进行改进，增强模型的稳定性，使得模型能够更好地进入纳什平衡。使用Ghost模型取代C‑CGAN中的CNN模型，能够更好地提取本征特征，减少模型陷入梯度消失的风险。
权利要求书clms
1.一种小样本下的智能机舱故障诊断方法，其特征在于，包括以下步骤：步骤1：通过安装在机舱指定设备上的振动传感器进行数据采集，获取所述指定设备正常状态下和不同故障状态下的振动信号；步骤2：通过小样本数据判断器判断振动信号是否为小样本数据；步骤3：对小样本下的振动信号进行峭度分析，根据振动发生剧烈变化时的振动信号进行特征对齐；步骤4：将振动信号进行灰度图处理，得到振动信号对应的灰度图；步骤5：将步骤4获得灰度图输入到AUC-CGAN模型中进行训练，直至模型收敛；步骤6：使用步骤5中训练完成AUC-CGAN模型中的生成器G进行样本生成；步骤7：通过所述生成器G生成样本，并与原始样本混合输入到CNN诊断模型进行训练，直至CNN诊断模型收敛；步骤8：使用步骤7获得训练好的CNN诊断模型对测试样本进行故障诊断，输出诊断结果。2.根据权利要求1所述的一种小样本下的智能机舱故障诊断方法，其特征在于，所述步骤2中，通过小样本数据判断器判断振动信号是否为小样本数据，包括小样本数据判断器将振动传感器采集到的振动信号与智能机舱自带数据库中振动信号进行比对，当采集到的所述振动信号不处在智能机舱自带数据库中或所述振动信号的样本数小于20时，判断所述振动信号为小样本数据。3.根据权利要求1所述的一种小样本下的智能机舱故障诊断方法，其特征在于，所述步骤4中将振动信号进行灰度图处理，包括将一维振动信号转换为二维灰度图。4.根据权利要求1所述的一种小样本下的智能机舱故障诊断方法，其特征在于，所述AUC-CGAN模型包括：使用非同步更新算法训练C-CGAN模型；其中，AUC-CGAN模型中判别器D包含的变量参数为，AUC-CGAN模型中生成器G包含的变量参数为/＞，使用交叉熵损失函数作为AUC-CGAN模型中模型损失值计算标准；使用随机梯度下降方法对AUC-CGAN模型变量参数进行更新迭代；所述生成器G使用mini-batches优化算法随机选取个真实样本/＞，/＞；/＞个生成样本/＞，/＞；使用梯度下降方法更新模型变量参数时，真实样本的梯度为：，生成样本的梯度为：/＞，其中/＞表示求梯度，/＞表示先对生成器G的输出求取交叉熵损失值，再求交叉熵损失值对参数/＞的梯度，/＞表示先对判别器D的输出求取交叉熵损失值，再求交叉熵损失值对参数/＞的梯度，其中，在AUC-CGAN模型中进行梯度下降时，生成器G和判别器D非同步更新，设判别器D的学习速率为，生成器G的学习速率为/＞，/＞时刻判别器D的变量参数为/＞，生成器G的变量参数为/＞，则在/＞时刻判别器D的参数/＞与生成器G的参数/＞，可由下面公式和计算：其中，为判别器D对应的慢迭代映射变量；/＞为生成器G对应的快迭代映射变量。5.根据权利要求4所述的一种小样本下的智能机舱故障诊断方法，其特征在于，所述AUC-CGAN模型中判别器D采用Ghost模型，所述Ghost模型首先对输入特征进行/＞卷积操作如下式所示： 其中，表示输入样本经过/＞卷积操作输出的特征，/＞表示点乘，/＞表示/＞卷积；Ghost模型的输出特征用表示，其具体计算公式如下式所示：其中，代表将其内部元素进行连接。6.一种存储介质，其特征在于，所述存储介质中存储有计算机可执行指令，所述计算机可执行指令被处理器加载并执行，实现如上述权利要求1至5任一项所述一种小样本下的智能机舱故障诊断方法的步骤。
说明书desc
技术领域本发明涉及故障诊断技术领域，具体涉及一种小样本下的智能机舱故障诊断方法及介质。背景技术船舶作为海上交通工具，面临着各种复杂的海洋环境和长时间的航行，机舱内涵盖众多复杂设备。通过智能机舱故障诊断方法，船舶能够实现对关键设备的实时监测和数据采集，及时发现潜在故障，并提供准确的故障定位信息，从而防范机械或电气故障引发的事故。智能机舱故障诊断系统能够提高船舶的运行可靠性，减少意外停船和事故的发生，保障船员和货物的安全。同时，智能机舱故障诊断还能优化维护计划，降低维护成本，提高船舶的经济效益，是推动船舶行业安全性和效率的关键技术之一。当前故障诊断方法的使用前提是拥有大量的不同运行数据进行分类训练，而针对智能机舱这种复杂系统而言，并非所有运行状态都可以获得足够的数据。当因为某些原因无法获得大量故障的运行数据时，即在小样本条件下，如何利用有限数据完成故障类型诊断是目前研究的焦点之一。当前针对小样本故障诊断问题，主要有三种解决方法：基于模型微调、基于数据增强和基于迁移学习。基于模型微调的方法涉及在大量数据上训练模型，然后通过有限数据对其进行微调。然而，由于有限数据不能完全反映整体数据的真实分布，这会导致模型出现过拟合的问题。迁移学习方法属于前沿研究，但其面临一系列问题，包括算法不够成熟、复杂度高、准确度在样本过少时较低以及在样本维度增大时计算复杂度过高等。相反，基于数据增强的方法虽然在计算过程中引入了一些负面影响，例如噪声，但通过提高诊断模型的性能，可以有效解决小样本故障诊断中的问题。另一方面，由于大部分运行状态都可以获得足够的训练数据，使用基于数据增强，特别是基于生成对抗神经网络的小样本诊断方法可以获得大量的合成数据，与其他运行状态共用一个诊断模型，有利于降低诊断系统的复杂程度，但其合成数据的稳定性较差，不易进入纳什平衡。发明内容为了解决上述技术问题，本发明的目的在于提供一种小样本下的智能机舱故障诊断方法，解决小样本情况下智能机舱内设备故障诊断精度不高的问题。本发明的目的是这样实现的：本发明一种小样本下的智能机舱故障诊断方法，包括：通过安装在智能机舱关键设备上的振动传感器进行数据采集，获取该设备正常和不同故障状态下的振动信号；将振动信号经过小样本数据判断器，判断其是否为小样本数据。对小样本振动信号进行峭度分析，根据振动发生剧烈变化时的振动信号进行特征对齐；将振动信号进行灰度图处理，得到振动信号对应灰度图；将获得灰度图输入到构建好的非同步更新条件生成对抗网络模型中进行训练，直至模型达到纳什平衡；使用训练完成AUC-CGAN模型中的生成器进行样本生成；将获得生成样本与原始样本混合输入到卷积神经网络诊断模型进行训练，直至卷积神经网络诊断模型收敛；使用获得训练好的CNN诊断模型对测试样本进行故障诊断，输出诊断结果。本发明还可以包括：1、所述步骤中使用峭度原理对振动信号进行特征对齐。2、所述步骤中使用AUC-CGAN模型具体改进方法为：A.使用非同步更新算法对C-CGAN模型进行改进，增强模型的稳定性，使得模型能够更好地进入纳什平衡。B.设AUC-CGAN模型中判别器D包含的变量参数为，AUC-CGAN模型中生成器G包含的变量参数为/＞。AUC-CGAN模型中使用交叉熵损失函数作为模型损失值计算标准。C.使用随机梯度下降方法对模型变量参数进行更新迭代，因此所述生成器G使用mini-batches优化算法随机选取个真实样本，；个生成样本，；使用梯度下降方法更新模型变量参数时，真实样本的梯度为：，生成样本的梯度为：，其中表示求梯度，表示先对生成器G的输出求取交叉熵损失值，再求交叉熵损失值对参数的梯度，表示先对判别器D的输出求取交叉熵损失值，再求交叉熵损失值对参数的梯度，其中，在AUC-CGAN模型中进行梯度下降时，生成器G和判别器D非同步更新，相比于生成器G和判别器D使用同步更新时减少了出现梯度消失乃至模型崩溃情况，会更快地达到理想效果。D.用非同步更新算法计算AUC-CGAN的参数迭代情况，设判别器D的学习速率为，生成器G的学习速率为，时刻判别器变量参数为，生成器变量参数为，则在时刻判别器参数与生成器参数，可由下面公式计算：  其中，为判别器D对应的慢迭代映射变量；为生成器G对应的快迭代映射变量。E.使用上式便可以通过改变与改变判别器D与生成器G参数迭代速率，使得生成器G和判别器D以1：1的速度更新，拥有更好的效果与稳定性。F.在AUC-CGAN模型训练过程中为了减少模型崩溃风险，使用Ghost模型取代传统卷积模型，所述Ghost模型首先对输入特征进行卷积操作如下式所示：其中，表示输入样本经过卷积操作输出的特征，表示点乘，表示卷积。G.Ghost模型的输出特征用表示，其具体计算公式如下式所示： 其中，代表将其内部元素进行连接。H.使用Ghost模型能够更好提取输出特征的本征特征，更有利于AUC-CGAN模型的训练，用其取代原始CNN模型可以大幅降低模型陷入梯度消失或梯度爆炸的风险，进一步提高模型的稳定性。本发明技术方案，具有如下优点：使用峭度原理对原始振动信号进行特征对齐，提高模型生成质量与诊断精度。将一维振动信号转换为二维灰度图，能够提取到更高维特征，更有利于模型收敛与最终诊断精度。使用非同步更新算法对C-CGAN模型进行改进，增强模型的稳定性，使得模型能够更好地进入纳什平衡。使用Ghost模型取代C-CGAN中的CNN模型，能够更好地提取本征特征，减少模型陷入梯度消失的风险。附图说明为了更清楚地说明本发明具体实施方式，本发明由下述的附图作以详细描述。图1为本发明的流程图；图2为本发明的灰度图计算流程图；图3为本发明的AUC-CGAN网络架构图；图4为本发明的AUC-CGAN模型中的生成器结构图；图5为本发明的AUC-CGAN模型中的判别器结构图；图6为本发明的CNN诊断模型结构图。图中：101、第一卷积层；102、第二卷积层；103、第三卷积层；201、第一池化层；202、第二池化层；203、第三池化层；301、第一全连接层；302、第二全连接层；303、第三全连接层；304、第四全连接层；401、输出层。具体实施方式为了使本技术领域的技术人员更好地理解本申请的技术方案，下面结合附图和最佳实施例对本发明型做进一步的详细说明。下面将结合附图对本发明的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。此外，下面所描述的本发明不同实施方式中所涉及的技术特征只要彼此之间未构成冲突就可以相互结合。本发明的具体实施方式采用以下技术方案：如图1所示，一种小样本下的智能机舱故障诊断方法，该方法基于AUC-CGAN和CNN，包括如下步骤：S1、利用安装在智能机舱关键零部件上的振动传感器进行数据采集，获取振动信号。S2、通过小样本数据判断器判断振动信号是否为小样本数据。小样本数据判断器是将振动传感器采集到的振动信号与智能机舱自带数据库中振动信号进行比对，当采集到的振动信号不处在智能机舱自带数据库中或该振动信号的样本数小于20时判断该信号为小样本数据。S3、对小样本下的振动信号进行峭度分析，根据振动发生剧烈变化时的振动信号进行特征对齐。S4、将经过对其操作后的一维振动信号进行灰度图转换获得二维灰度图。如图2所示，将一维振动信号进行灰度图转换的过程图，所述转换方式为假设一维振动信号为，其中表示该振动信号的起始采集点，表示该振动信号采集点数，对一维振动信号在起始采集点进行长度截取，信号截取长度为，在本专利中取64。则经过截取后的振动信号为一维向量，此后将其转换为二维矩阵，即表示灰度图的矩阵为： S5、将二维灰度图输入到AUC-CGAN模型中进行训练，直至AUC-CGAN模型达到纳什平衡，即网络达到收敛，使用非同步更新算法对C-DCGAN模型进行改进，增强模型的稳定性，使得模型能够更好地进入纳什平衡，如图3所示，为AUC-CGAN模型的整体架构图，其具体步骤为：第一步：设AUC-CGAN模型中判别器D包含的变量参数为，如图5所示，为AUC-CGAN模型中判别器D架构图，其中判别器D的输入数据为1张64×64的灰度图，经由五层Ghost模型优化卷积操作得到输出数据，经过第一层Ghost模型优化卷积得到64张32×32的特征图，经过第二层Ghost模型优化卷积得到128张16×16的特征图，经过第三层Ghost模型优化卷积得到256张8×8的特征图，经过第四层Ghost模型优化卷积得到512张4×4的特征图，经过第五层Ghost模型优化卷积得到输出数据形状为1×3，AUC-CGAN模型中生成器D包含的变量参数为，如图4所示，为AUC-CGAN模型中生成器G架构图，其中生成器G的输入数据为1×100的噪声数据以及1×3的标签数据，噪声数据与标签数据先经过全连接层扩维得到1×103维数据，然后将此数据重置为二维张量，最后通过五层反卷积生成灰度图样本，其中第一层反卷积得到512张4×4的特征图，第二层反卷积得到256张8×8的特征图，第三层反卷积得到128张16×16的特征图，第四层反卷积得到64张32×32的特征图，第五层反卷积得到1张64×64的特征图。AUC-CGAN模型中使用交叉熵损失函数作为模型损失值计算标准。交叉熵损失函数用于衡量模型输出与真实标签之间的差异。假设有个类别，真实标签表示为，模型输出的概率分布表示为，交叉熵损失函数的定义为： 第二步：使用随机梯度下降方法对模型变量参数进行更新迭代，所述生成器使用mini-batches优化算法随机选取个真实样本，；个生成样本，。因此使用梯度下降方法更新模型变量参数时，使用梯度下降方法更新模型变量参数时，真实样本的梯度为：，生成样本的梯度为：，其中表示求梯度，表示先对生成器G的输出求取交叉熵损失值，再求交叉熵损失值对参数的梯度，表示先对判别器D的输出求取交叉熵损失值，再求交叉熵损失值对参数的梯度。而生成样本的梯度为：，在AUC-CGAN模型中进行梯度下降时，生成器G和判别器D非同步更新，相比于生成器G和判别器D使用同步更新时减少了出现梯度消失乃至模型崩溃情况，会更快地达到理想效果。设损失函数为，其中为模型参数，则梯度下降公式为： 其中，表示t时刻的模型参数，表示使用梯度更新后的模型参数，表示学习率，表示求梯度。具体的求梯度方法：对于一个具有个变量的函数其梯度为： 其中表示函数对变量的偏导数。第三步：用非同步更新算法计算非AUC-CGAN的参数迭代情况，设判别器D的学习速率为，生成器G的学习速率为，时刻判别器D的变量参数为，生成器G的变量参数为，则在时刻判别器D的参数与生成器G的参数，可由下面公式计算：其中，为判别器D对应的慢迭代映射变量；为生成器G对应的快迭代映射变量。第四步：使用上式便可以通过改变与改变判别器D与生成器G的参数迭代速率，使得生成器G和判别器D以1：1的速度更新，拥有更好的效果与稳定性。S6、在AUC-CGAN模型训练过程中为了减少模型崩溃风险，使用Ghost模型取代传统卷积模型。其具体步骤为：第一步：所述Ghost模型首先对输入特征进行卷积操作如下式所示： 其中，表示输入样本经过卷积操作输出的特征，表示点乘，表示卷积。第二步：计算输出特征，Ghost模型的输出特征用表示，其具体计算公式如下式所示： 其中，代表将其内部元素进行连接。第三步：使用Ghost模型能够更好提取输出特征的本征特征，更有利于AUC-CGAN模型的训练，用其取代原始CNN模型可以大幅降低模型陷入梯度消失或梯度爆炸的风险，进一步提高模型的稳定性。S7、将AUC-CGAN模型中生成器D生成的样本添加到原始样本中，并将混合后的样本数据输入CNN诊断模型中进行训练，直至CNN诊断模型收敛。S8、把测试样本数据输入到训练好的CNN诊断模型中进行故障分类并输出诊断结果，如图6所示，为所用CNN诊断模型的架构图，其中模型的输入为64×64的灰度图；第一卷积层101、第二卷积层102和第三卷积层103的卷积核个数分别为16、32和64，卷积核大小均选为3×3，激活函数选择函数；第一池化层201、第二池化层202和第三池化层203的池化方式均选择最大池化，区域大小均取2×2；第一全连接层301、第二全连接层302、第三全连接层303和第四全连接层304的节点数分别为4096、512、128和64；输出层401节点数为4，图6中的1@64*64代表输入为1张64×64的灰度图，16@62*62表示经过第一卷积层101后的特征为16张62×62的特征图，16@31*31表示经过第一池化层201后的特征为16张31×31的特征图，32@29*29表示经过第二卷积层102后的特征为32张29×29的特征图，32@14*14表示经过第二池化层202后的特征为32张14×14的特征图，64@12*12表示经过第三卷积层103后的特征为64张12×12的特征图，64@6*6表示经过第三池化层203后的特征为64张6×6的特征图，1*1096表示经过第一全连接层301后的特征形状为1×1096，1*512表示经过第二全连接层302后的特征形状为1×512，1*128表示经过第三全连接层303后的特征形状为1×128，1*64表示经过第四全连接层304后的特征形状为1×64，1*4表示经过输出层401后的特征形状为1×4。本申请还提供了一种存储介质，其上存储有计算机程序，计算机程序执行时实现上述小样本下的智能机舱故障诊断方法执行的步骤。本申请还提供了一种电子设备，包括存储器和处理器，存储器中存储有计算机程序，处理器调用存储器中的计算机程序时实现上述小样本下的智能机舱故障诊断方法执行的步骤。说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。对于实施例公开的装置而言，由于其与实施例公开的方法相对应，所以描述得比较简单，相关之处参见方法部分说明即可。应当指出，对于本技术领域的普通技术人员来说，在不脱离本申请原理的前提下，还可以对本申请进行若干改进和修饰，这些改进和修饰也落入本申请权利要求的保护范围内。
