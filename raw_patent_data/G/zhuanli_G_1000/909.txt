标题title
一种腿部护具控制方法及系统
摘要abst
本发明公开一种腿部护具控制方法及系统，包括：获取目标用户站立时的腿部图像数据并建立腿部骨骼模型；使用聚类算法对所述腿部骨骼模型进行聚类，得到大腿模型和小腿模型；对所述大腿模型不断进行圆柱拟合，直至拟合结果满足大腿力线平衡条件，得到第一拟合圆柱；对所述小腿模型不断进行圆柱拟合，直至拟合结果满足小腿力线平衡条件，得到第二拟合圆柱；根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型；根据所述上护腿模型和所述下护腿模型调整腿部护具的高度和开口大小。采用本发明，让腿部护具更加贴合患者腿型，增加保护效果达到让患者早日康复的目的。
权利要求书clms
1.一种腿部护具控制方法，其特征在于，包括：获取目标用户站立时的腿部图像数据并建立腿部骨骼模型；使用聚类算法对所述腿部骨骼模型进行聚类，得到大腿模型和小腿模型；对所述大腿模型不断进行圆柱拟合，直至拟合结果满足大腿力线平衡条件，得到第一拟合圆柱；对所述小腿模型不断进行圆柱拟合，直至拟合结果满足小腿力线平衡条件，得到第二拟合圆柱；根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型；根据所述上护腿模型和所述下护腿模型调整腿部护具的高度和开口大小。2.如权利要求1所述腿部护具控制方法，其特征在于，所述获取目标用户站立时的腿部图像数据并建立腿部骨骼模型，具体包括：通过X光片或者CT或者MRI获取目标用户站立时的腿部图像数据；以所述腿部图像数据的膝关节数据质心为起点，分别往两个预设方向进行拓展进而建立腿部骨骼模型；两个预设方向的夹角等于所述腿部图像数据中第一直线与第二直线的夹角，所述第一直线为目标用户膝关节质心和大腿骨骼质心所在的直线，所述第二直线为目标用户膝关节质心和小腿骨骼质心所在的直线。3.如权利要求1所述腿部护具控制方法，其特征在于，所述使用聚类算法对所述腿部骨骼模型进行聚类，得到大腿模型和小腿模型，具体包括：将所述腿部骨骼模型中曲率大于预设曲率阈值的全部模型点作为聚类点集，并将所述聚类点集中曲率值最大的点和曲率值最小的点作为两个初始类中心进行K均值聚类，得到两个聚类分别作为大腿模型和小腿模型。4.如权利要求1所述腿部护具控制方法，其特征在于，所述对所述大腿模型圆柱不断进行拟合，直至拟合结果满足大腿力线平衡条件，得到第一拟合圆柱，具体包括：对所述大腿模型不断进行圆柱拟合，每次圆柱拟合后将得到的大腿拟合圆柱取代大腿模型，并以该大腿拟合圆柱的中心轴作为第一下肢力线进行有限元分析确认大腿力线平衡情况，若所述第一下肢力线平衡，将该次圆柱拟合后将得到的大腿拟合圆柱作为第一拟合圆柱。5.如权利要求1所述腿部护具控制方法，其特征在于，所述对所述小腿模型圆柱不断进行拟合，直至拟合结果满足小腿力线平衡条件，得到第二拟合圆柱，具体包括：对所述小腿模型不断进行圆柱拟合，每次圆柱拟合后将得到的小腿拟合圆柱取代小腿模型，并以该小腿拟合圆柱的中心轴作为第二下肢力线进行有限元分析确认小腿力线平衡情况，若所述第二下肢力线平衡，将该次圆柱拟合后将得到的小腿拟合圆柱作为第二拟合圆柱。6.如权利要求1所述腿部护具控制方法，其特征在于，所述根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型，具体包括：将所述目标用户的体脂率转换为体脂因子；根据体脂因子、大腿围与膝围的比值对所述第一拟合圆柱的底面半径进行放大，得到上护腿模型；根据体脂因子、小腿围与膝围的比值对所述第二拟合圆柱的底面半径进行放大，得到下护腿模型。7.如权利要求1所述腿部护具控制方法，其特征在于，所述根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型之后，还包括：将所述上护腿模型和所述下护腿模型作为一个护腿模型导入AnyBody软件中，并建立含中枢神经系统约束的肌肉力量方程，依次在走路动作、跑步动作、上坡动作和下坡动作下分析最小腿部肌肉力量；若在走路动作、跑步动作、上坡动作或者下坡动作下最小腿部肌肉力量大于预设力量阈值，缩小所述上护腿模型的高度和所述下护腿模型的高度。8.如权利要求1所述腿部护具控制方法，其特征在于，所述腿部护具包括用于紧固大腿的上护具和用于紧固小腿的下护具；所述下护具包括左右对置的两块下部支撑侧板，第一下部支撑侧板和第二下部支撑侧板之间设置有下连接板，所述下连接板两个相对的侧面分别设置有左右对置的两块下护具竖直伸缩调节板，下护具竖直伸缩调节板用于根据所述下护腿模型的高度调整下护具的高度；所述下连接板另外两个相对的侧面分别设置有前后对置的两块下护具水平伸缩调节板，下护具水平伸缩调节板用于根据所述下护腿模型的底面半径调整下护具的开口大小；所述上护具包括左右对置的两块上部支撑侧板，第一上部支撑侧板和第二上部支撑侧板之间设置有上连接板，所述上连接板两个相对的侧面分别设置有左右对置的两块上护具竖直伸缩调节板，上护具竖直伸缩调节板用于根据所述上护腿模型的高度调整上护具的高度；所述上连接板另外两个相对的侧面分别设置有前后对置的两块上护具水平伸缩调节板，上护具水平伸缩调节板用于根据所述上护腿模型的底面半径调整上护具的开口大小。9.如权利要求1所述腿部护具控制方法，其特征在于，所述根据所述上护腿模型和所述下护腿模型调整腿部护具的高度和开口大小，具体包括：将腿部护具的上护腿高度调整为所述上护腿模型的高度，腿部护具的上护腿开口周长调整为所述上护腿模型的底面周长；将腿部护具的下护腿高度调整为所述下护腿模型的高度，腿部护具的下护腿开口周长调整为所述下护腿模型的底面周长。10.一种腿部护具控制系统，其特征在于，包括：数据获取模块，用于获取目标用户站立时的腿部图像数据并建立腿部骨骼模型；模型聚类模块，用于使用聚类算法对所述腿部骨骼模型进行聚类，得到大腿模型和小腿模型；第一拟合模块，用于对所述大腿模型不断进行圆柱拟合，直至拟合结果满足大腿力线平衡条件，得到第一拟合圆柱；第二拟合模块，用于对所述小腿模型不断进行圆柱拟合，直至拟合结果满足小腿力线平衡条件，得到第二拟合圆柱；放大模块，用于根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型；调整控制模块，用于根据所述上护腿模型和所述下护腿模型调整腿部护具的高度和开口大小。
说明书desc
技术领域本发明涉及人体腿部数据处理领域，尤其涉及一种腿部护具控制方法及系统。背景技术腿部康复护具主要是安装在患者的腿部，腿部康复护具模拟人腿部的大致关节结构，通过关节结构处设置的缓冲件来起到支撑患者腿部的作用，从而降低患者关节处承受的重力负荷。目前，市面上为膝关节提供支撑力的腿部护具，为了更好地适配患者腿型选择在连接板处设置魔术贴和拉伸部，但是拉伸部的调整量需要患者自行把握，当拉伸部的拉伸量设置不当会导致患者疼痛、膝盖磨损及松动等问题，进一步耽误治疗效果甚至起到恶化治疗的效果。发明内容本发明实施例提供一种腿部护具控制方法及系统，结合用户的腿部图像数据自行且准确地调整腿部护具的高度和开口大小，让腿部护具更加贴合患者腿型，增加保护效果达到让患者早日康复的目的。本申请实施例的第一方面提供了一种腿部护具控制方法，包括：获取目标用户站立时的腿部图像数据并建立腿部骨骼模型；使用聚类算法对所述腿部骨骼模型进行聚类，得到大腿模型和小腿模型；对所述大腿模型不断进行圆柱拟合，直至拟合结果满足大腿力线平衡条件，得到第一拟合圆柱；对所述大腿模型不断进行圆柱拟合，直至拟合结果满足小腿力线平衡条件，得到第二拟合圆柱；根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型；根据所述上护腿模型和所述下护腿模型调整腿部护具的高度和开口大小。在第一方面的一种可能的实现方式中，所述获取目标用户站立时的腿部图像数据并建立腿部骨骼模型，具体包括：通过X光片或者CT或者MRI获取目标用户站立时的腿部图像数据；以所述腿部图像数据的膝关节数据质心为起点，分别往两个预设方向进行拓展进而建立腿部骨骼模型；两个预设方向的夹角等于所述腿部图像数据中第一直线与第二直线的夹角，所述第一直线为目标用户膝关节质心和大腿骨骼质心所在的直线，所述第二直线为目标用户膝关节质心和小腿骨骼质心所在的直线。在第一方面的一种可能的实现方式中，所述使用聚类算法对所述腿部骨骼模型进行聚类，得到大腿模型和小腿模型，具体包括：将所述腿部骨骼模型中曲率大于预设曲率阈值的全部模型点作为聚类点集，并将所述聚类点集中曲率值最大的点和曲率值最小的点作为两个初始类中心进行K均值聚类，得到两个聚类分别作为大腿模型和小腿模型。在第一方面的一种可能的实现方式中，所述对所述大腿模型圆柱不断进行拟合，直至拟合结果满足大腿力线平衡条件，得到第一拟合圆柱，具体包括：对所述大腿模型不断进行圆柱拟合，每次圆柱拟合后将得到的大腿拟合圆柱取代大腿模型，并以该大腿拟合圆柱的中心轴作为第一下肢力线进行有限元分析确认大腿力线平衡情况，若所述第一下肢力线平衡，将该次圆柱拟合后将得到的大腿拟合圆柱作为第一拟合圆柱。在第一方面的一种可能的实现方式中，所述对所述大腿模型圆柱不断进行拟合，直至拟合结果满足小腿力线平衡条件，得到第二拟合圆柱，具体包括：对所述小腿模型不断进行圆柱拟合，每次圆柱拟合后将得到的小腿拟合圆柱取代小腿模型，并以该小腿拟合圆柱的中心轴作为第二下肢力线进行有限元分析确认小腿力线平衡情况，若所述第二下肢力线平衡，将该次圆柱拟合后将得到的小腿拟合圆柱作为第二拟合圆柱。在第一方面的一种可能的实现方式中，所述根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型，具体包括：将所述目标用户的体脂率转换为体脂因子；根据体脂因子、大腿围与膝围的比值对所述第一拟合圆柱的底面半径进行放大，得到上护腿模型；根据体脂因子、小腿围与膝围的比值对所述第二拟合圆柱的底面半径进行放大，得到下护腿模型。在第一方面的一种可能的实现方式中，所述根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型之后，还包括：将所述上护腿模型和所述下护腿模型作为一个护腿模型导入AnyBody软件中，并建立含中枢神经系统约束的肌肉力量方程，依次在走路动作、跑步动作、上坡动作和下坡动作下分析最小腿部肌肉力量；若在走路动作、跑步动作、上坡动作或者下坡动作下最小腿部肌肉力量大于预设力量阈值，缩小所述上护腿模型的高度和所述下护腿模型的高度。在第一方面的一种可能的实现方式中，所述腿部护具包括用于紧固大腿的上护具和用于紧固小腿的下护具；所述下护具包括左右对置的两块下部支撑侧板，第一下部支撑侧板和第二下部支撑侧板之间设置有下连接板，所述下连接板两个相对的侧面分别设置有左右对置的两块下护具竖直伸缩调节板，下护具竖直伸缩调节板用于根据所述下护腿模型的高度调整下护具的高度；所述下连接板另外两个相对的侧面分别设置有前后对置的两块下护具水平伸缩调节板，下护具水平伸缩调节板用于根据所述下护腿模型的底面半径调整下护具的开口大小；所述上护具包括左右对置的两块上部支撑侧板，第一上部支撑侧板和第二上部支撑侧板之间设置有上连接板，所述上连接板两个相对的侧面分别设置有左右对置的两块上护具竖直伸缩调节板，上护具竖直伸缩调节板用于根据所述上护腿模型的高度调整上护具的高度；所述上连接板另外两个相对的侧面分别设置有前后对置的两块上护具水平伸缩调节板，上护具水平伸缩调节板用于根据所述上护腿模型的底面半径调整上护具的开口大小。在第一方面的一种可能的实现方式中，所述根据所述上护腿模型和所述下护腿模型调整腿部护具的高度和开口大小，具体包括：将腿部护具的上护腿高度调整为所述上护腿模型的高度，腿部护具的上护腿开口周长调整为所述上护腿模型的底面周长；将腿部护具的下护腿高度调整为所述下护腿模型的高度，腿部护具的下护腿开口周长调整为所述下护腿模型的底面周长。本申请实施例的第二方面提供了一种腿部护具控制系统，包括：数据获取模块，用于获取目标用户站立时的腿部图像数据并建立腿部骨骼模型；模型聚类模块，用于使用聚类算法对所述腿部骨骼模型进行聚类，得到大腿模型和小腿模型；第一拟合模块，用于对所述大腿模型不断进行圆柱拟合，直至拟合结果满足大腿力线平衡条件，得到第一拟合圆柱；第二拟合模块，用于对所述小腿模型不断进行圆柱拟合，直至拟合结果满足小腿力线平衡条件，得到第二拟合圆柱；放大模块，用于根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型；调整控制模块，用于根据所述上护腿模型和所述下护腿模型调整腿部护具的高度和开口大小。相比于现有技术，本发明实施例提供了一种腿部护具控制方法及系统，可使用医院CT、MRI等仪器采集到的腿部图像数据进行建模得到腿部骨骼模型，然后使用聚类算法对得到的腿部骨骼模型进行分割得到两个聚类两组簇，分别对应上腿部和膝盖以下部位。由于腿部的外形与圆柱体比较接近，拟合时可以用一个拟合圆柱达到多个其他拟合体难以达到的效果，也适配腿部护具包围腿部的紧密度的特点。因此后续使用圆柱拟合对所述大腿模型和小腿模型进行圆柱拟合，得到第一拟合圆柱和第二拟合圆柱，再结合用户的体脂率对第一拟合圆柱和第二拟合圆柱作进一步调整以免得到的上护腿模型和下护腿模型过小导致控制腿部护具时护具过度贴合患者腿部造成局部挤压。对所述第一拟合圆柱和所述第二拟合圆柱进行放大得到的上护腿模型和下护腿模型能在完整囊括患者腿部且贴合患者腿型又不至于造成肌肉挤压，让腿部护具更加贴合患者腿型，增加保护效果从而达到让患者早日康复的目的。附图说明图1是本发明一实施例提供的一种腿部护具控制方法的流程示意图；图2是本发明一实施例提供的一种腿部护具控制系统的结构示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。请参照图1， 本申请一实施例提供了一种腿部护具控制方法，包括：S10、获取目标用户站立时的腿部图像数据并建立腿部骨骼模型。S11、使用聚类算法对所述腿部骨骼模型进行聚类，得到大腿模型和小腿模型。S12、对所述大腿模型不断进行圆柱拟合，直至拟合结果满足大腿力线平衡条件，得到第一拟合圆柱。S13、对所述小腿模型不断进行圆柱拟合，直至拟合结果满足小腿力线平衡条件，得到第二拟合圆柱。S14、根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型。S15、根据所述上护腿模型和所述下护腿模型调整腿部护具的高度和开口大小。本实施例可以应用于在临床给患者佩戴腿部护具前后对腿部护具进行初始调整或者使用过程中的细微调整。首先对患者下肢骨骼进行三维成像，将得到的腿部图像数据进行数据处理建立腿部骨骼模型，这个腿部骨骼模型可以是常见的点云模型。S12-S13是对腿部骨骼模型两个部分的分别模拟，S12得到的第一拟合圆柱可以看作是未经调整的下护腿模型，S13得到的第二拟合圆柱可以看作是未经调整的上护腿模型，未经调整的下护腿模型和上护腿模型由于和腿部骨骼模型过度拟合，若按照第一拟合圆柱和第二拟合圆柱直接对腿部护具的高度和开口大小进行调整会导致S15中参考模型与患者实际腿型过于贴合甚至与肌肉重合，因此需要在S14中先结合患者数据对第一拟合圆柱和第二拟合圆柱得到上护腿模型和下护腿模型。相比于现有技术，本发明实施例提供了一种腿部护具控制方法，可使用医院CT、MRI等仪器采集到的腿部图像数据进行建模得到腿部骨骼模型，然后使用聚类算法对得到的腿部骨骼模型进行分割得到两个聚类两组簇，分别对应上腿部和膝盖以下部位。由于腿部的外形与圆柱体比较接近，拟合时可以用一个拟合圆柱达到多个其他拟合体难以达到的效果，也适配腿部护具包围腿部的紧密度的特点。因此后续使用圆柱拟合对所述大腿模型和小腿模型进行圆柱拟合，得到第一拟合圆柱和第二拟合圆柱，再结合用户的体脂率对第一拟合圆柱和第二拟合圆柱作进一步调整以免得到的上护腿模型和下护腿模型过小导致控制腿部护具时护具过度贴合患者腿部造成局部挤压。对所述第一拟合圆柱和所述第二拟合圆柱进行放大得到的上护腿模型和下护腿模型能在完整囊括患者腿部且贴合患者腿型又不至于造成肌肉挤压，让腿部护具更加贴合患者腿型，增加保护效果从而达到让患者早日康复的目的。示例性地，所述获取目标用户站立时的腿部图像数据并建立腿部骨骼模型，具体包括：通过X光片或者CT或者MRI获取目标用户站立时的腿部图像数据；以所述腿部图像数据的膝关节数据质心为起点，分别往两个预设方向进行拓展进而建立腿部骨骼模型；两个预设方向的夹角等于所述腿部图像数据中第一直线与第二直线的夹角，所述第一直线为目标用户膝关节质心和大腿骨骼质心所在的直线，所述第二直线为目标用户膝关节质心和小腿骨骼质心所在的直线。需要说明的是，DR是数字化X射线，是传统X光的进化版本，就像传统胶卷相机与现在数码相机的区别，本质是一样的，主要利用X射线的穿透性原理，在穿越人体时因为人体组织密度不一样来形成影像。总得来讲，DR是最传统、最廉价的一种影像检查，是很多疾病初筛的首选检查；但由于X射线有人体存在危害，不适合孕妇以及特殊人群使用，而且对细微组织无法辨认。CT即电子计算机断层扫描，自从X射线发现后，医学上就开始用它来探测人体疾病。但是，由于人体内有些器官对X线的吸收差别极小，因此X射线对那些前后重叠的组织的病变就难以发现。CT是用X射线束对人体某部一定厚度的层面进行扫描，CT的检查原理是X光会断层穿过人体，通过电脑计算后期处理为二次成像。相对于传统X光，CT对密度高的组织显像清晰，对于测量骨性结构之间的距离精确度高，尤其能清晰的显示血管走向及血管病变，对肿瘤的检查灵敏度明显高于普通X光片。但CT检查的辐射剂量通常高于单次X光摄影，且对软组织显像清晰度和分辨率不高。MRI即核磁共振检查，是医学检查的一种方法，也是医学影像学的一场革命，核子自旋运动是磁共振成像的基础，而氢原子是人体内数量最多的物质；正常情况下人体内的氢原子核处于无规律的进动状态，当人体进入强大均匀的磁体空间内，在外加静磁场作用下原来杂乱无章的氢原子核一齐按外磁场方向排列并继续进动，当立即停止外加磁场磁力后，人体内的氢原子将在相同组织相同时间下回到原状态；这称为驰豫〕而病理状态下的人体组织驰豫时间不同，通过计算机系统采集这些信号经数字重建技术转换成图像来给临床和研究提供科学的诊断结果。在所有医学影像学手段中，MRI的软组织对比分辨率最高，它可以清楚地分辨肌肉、肌腱、筋膜、脂肪等软组织；而且属无创伤、无射线检查，离子化放射对脑组织无放射性损害，也无生物学损害。但缺点是：检查费较昂贵，描时间较长，对钙化病变不敏感。在本实施例中，X光片、CT、MRI可以视实际情况依次使用，一般可以先使用X光片，若诊断不明确，再使用CT。进一步，如果患者关节软组织及需要骨肿瘤检查时可以使用MRI，三者的精密程度越来愈高，患者腿部出现严重问题时可以考虑MRI成像细节化的腿部图像数据。目前医院常参考多个人体解剖位置来使力线平衡，如使用两踝中点的踝关节中心、髌骨沟中点、髁间切迹、股骨干下端等位置作为下肢力线的参考位置，并结合患者股骨解剖轴经胫骨髁连线形成的F角和胫骨解剖轴经胫骨髁连线形成的T角来确定力线平衡。该方法需结合患者X光片或者CT或者MRI成像进行测量绘制。示例性地，所述使用聚类算法对所述腿部骨骼模型进行聚类，得到大腿模型和小腿模型，具体包括：将所述腿部骨骼模型中曲率大于预设曲率阈值的全部模型点作为聚类点集，并将所述聚类点集中曲率值最大的点和曲率值最小的点作为两个初始类中心进行K均值聚类，得到两个聚类分别作为大腿模型和小腿模型。本实施例中对所述腿部骨骼模型进行了分割，即小腿部与大腿部的分割。假设腿部骨骼模型点云曲率超过大于预设曲率阈值的全部模型点形成的集合为Z。对集合Z做K均值聚类，K均值聚类算法原理比较简单，可操作性强，算法速度快。这里可以取K为2，并设置两个聚类的初始类中心分别为集合Z中的最高点、最低点，这是由于腿部骨骼模型建立时是以所述腿部图像数据的膝关节数据质心为起点，分别往两个预设方向进行拓展，这个步骤将拓展生成点集中于两个方向，实际聚类两个聚类中心也会汇聚在这两个预设方向上。若K取4，其中两个的点的中间点与K为2时获得的中心点会出现重合的情况，因此直接选K为2能更快聚类出两个模型——大腿模型和小腿模型。将集合Z中未划入任何聚类的点依次地划分到对应的聚类中，计算得到2组簇，分别对应上腿部以及膝盖以下部位，并对应地假设三个聚类点集为A、B，即得出上腿部和膝盖以下部位。示例性地，所述对所述大腿模型圆柱不断进行拟合，直至拟合结果满足大腿力线平衡条件，得到第一拟合圆柱，具体包括：对所述大腿模型不断进行圆柱拟合，每次圆柱拟合后将得到的大腿拟合圆柱取代大腿模型，并以该大腿拟合圆柱的中心轴作为第一下肢力线进行有限元分析确认大腿力线平衡情况，若所述第一下肢力线平衡，将该次圆柱拟合后将得到的大腿拟合圆柱作为第一拟合圆柱。示例性地，所述对所述大腿模型圆柱不断进行拟合，直至拟合结果满足小腿力线平衡条件，得到第二拟合圆柱，具体包括：对所述小腿模型不断进行圆柱拟合，每次圆柱拟合后将得到的小腿拟合圆柱取代小腿模型，并以该小腿拟合圆柱的中心轴作为第二下肢力线进行有限元分析确认小腿力线平衡情况，若所述第二下肢力线平衡，将该次圆柱拟合后将得到的小腿拟合圆柱作为第二拟合圆柱。进行有限元分析确认小腿力线平衡情况时，由于在有限元分析中数据量极大，很多软件会自动消除模型上的细小差异，为避免出现因这种消除而造成的医学上的差异，可以使用高斯-拉普拉斯图像增强算法，增强下肢骨骼表面的差异，减少因软件产生的畸变。即将小腿模型和大腿模型进行高斯-拉普拉斯金字塔处理，将第k层的图像进行下采样得到第k+1层的高斯图像，将第k+1层的高斯图像进行上采样并与第k层的图像相减得到第k层的拉普拉斯图像；对于第k层图像的第i行第j列的像素点。示例性地，所述根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型，具体包括：将所述目标用户的体脂率转换为体脂因子；根据体脂因子、大腿围与膝围的比值对所述第一拟合圆柱的底面半径进行放大，得到上护腿模型；根据体脂因子、小腿围与膝围的比值对所述第二拟合圆柱的底面半径进行放大，得到下护腿模型。在本实施例中，上护腿模型的底面半径=第一拟合圆柱的底面半径×，下护腿模型的底面半径=第二拟合圆柱的底面半径×。至于体脂率的计算，通常医院都会有相关模型，直接往计算模型输出目标用户的相关数据便可得到，一般而言，计算模型的输入参数有：年龄、重量、身高、颈围 、胸围 、腹围 、臀围 、腿围 、膝围 、踝围 、上臂围 、前臂围 和腕围 。示例性地，所述根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型之后，还包括：将所述上护腿模型和所述下护腿模型作为一个护腿模型导入AnyBody软件中，并建立含中枢神经系统约束的肌肉力量方程，依次在走路动作、跑步动作、上坡动作和下坡动作下分析最小腿部肌肉力量；若在走路动作、跑步动作、上坡动作或者下坡动作下最小腿部肌肉力量大于预设力量阈值，缩小所述上护腿模型的高度和所述下护腿模型的高度。若腿部护具过长，患者在使用时便会出现肌肉挤压而导致最小腿部肌肉力量大于预设力量阈值，因此，在得到上护腿模型和下护腿模型可以选择将模型导入AnyBody软件中上护腿模型的高度和所述下护腿模型的高度初始化避免后续用户再花时间调整腿部护具的长度。示例性地，所述腿部护具包括用于紧固大腿的上护具和用于紧固小腿的下护具；所述下护具包括左右对置的两块下部支撑侧板，第一下部支撑侧板和第二下部支撑侧板之间设置有下连接板，所述下连接板两个相对的侧面分别设置有左右对置的两块下护具竖直伸缩调节板，下护具竖直伸缩调节板用于根据所述下护腿模型的高度调整下护具的高度；所述下连接板另外两个相对的侧面分别设置有前后对置的两块下护具水平伸缩调节板，下护具水平伸缩调节板用于根据所述下护腿模型的底面半径调整下护具的开口大小；所述上护具包括左右对置的两块上部支撑侧板，第一上部支撑侧板和第二上部支撑侧板之间设置有上连接板，所述上连接板两个相对的侧面分别设置有左右对置的两块上护具竖直伸缩调节板，上护具竖直伸缩调节板用于根据所述上护腿模型的高度调整上护具的高度；所述上连接板另外两个相对的侧面分别设置有前后对置的两块上护具水平伸缩调节板，上护具水平伸缩调节板用于根据所述上护腿模型的底面半径调整上护具的开口大小。本实施例中的腿部护具是一种在通用腿部护具上稍加改进的护具，可以通过水平伸缩调节板调整腿部护具的开口宽度。实际应用中，只要腿部护具具有开口大小调节功能和长度调节功能便可实施上述全部方法实施例。示例性地，所述根据所述上护腿模型和所述下护腿模型调整腿部护具的高度和开口大小，具体包括：将腿部护具的上护腿高度调整为所述上护腿模型的高度，腿部护具的上护腿开口周长调整为所述上护腿模型的底面周长；将腿部护具的下护腿高度调整为所述下护腿模型的高度，腿部护具的下护腿开口周长调整为所述下护腿模型的底面周长。相比于现有技术，本发明实施例提供了一种腿部护具控制方法，可使用医院CT、MRI等仪器采集到的腿部图像数据进行建模得到腿部骨骼模型，然后使用聚类算法对得到的腿部骨骼模型进行分割得到两个聚类两组簇，分别对应上腿部和膝盖以下部位。由于腿部的外形与圆柱体比较接近，拟合时可以用一个拟合圆柱达到多个其他拟合体难以达到的效果，也适配腿部护具包围腿部的紧密度的特点。因此后续使用圆柱拟合对所述大腿模型和小腿模型进行圆柱拟合，得到第一拟合圆柱和第二拟合圆柱，再结合用户的体脂率对第一拟合圆柱和第二拟合圆柱作进一步调整以免得到的上护腿模型和下护腿模型过小导致控制腿部护具时护具过度贴合患者腿部造成局部挤压。对所述第一拟合圆柱和所述第二拟合圆柱进行放大得到的上护腿模型和下护腿模型能在完整囊括患者腿部且贴合患者腿型又不至于造成肌肉挤压，让腿部护具更加贴合患者腿型，增加保护效果从而达到让患者早日康复的目的。请参见图2，本申请一实施例提供了一种腿部护具控制系统，包括数据获取模块20、模型聚类模块21、第一拟合模块22、第二拟合模块23、放大模块24和调整控制模块25。数据获取模块20，用于获取目标用户站立时的腿部图像数据并建立腿部骨骼模型。模型聚类模块21，用于使用聚类算法对所述腿部骨骼模型进行聚类，得到大腿模型和小腿模型。第一拟合模块22，用于对所述大腿模型不断进行圆柱拟合，直至拟合结果满足大腿力线平衡条件，得到第一拟合圆柱。第二拟合模块23，用于对所述小腿模型不断进行圆柱拟合，直至拟合结果满足小腿力线平衡条件，得到第二拟合圆柱。放大模块24，用于根据所述目标用户的体脂率分别对所述第一拟合圆柱和所述第二拟合圆柱进行放大，得到上护腿模型和下护腿模型。调整控制模块25，用于根据所述上护腿模型和所述下护腿模型调整腿部护具的高度和开口大小。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的控制系统的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。相比于现有技术，本发明实施例提供了一种腿部护具控制系统，可使用医院CT、MRI等仪器采集到的腿部图像数据进行建模得到腿部骨骼模型，然后使用聚类算法对得到的腿部骨骼模型进行分割得到两个聚类两组簇，分别对应上腿部和膝盖以下部位。由于腿部的外形与圆柱体比较接近，拟合时可以用一个拟合圆柱达到多个其他拟合体难以达到的效果，也适配腿部护具包围腿部的紧密度的特点。因此后续使用圆柱拟合对所述大腿模型和小腿模型进行圆柱拟合，得到第一拟合圆柱和第二拟合圆柱，再结合用户的体脂率对第一拟合圆柱和第二拟合圆柱作进一步调整以免得到的上护腿模型和下护腿模型过小导致控制腿部护具时护具过度贴合患者腿部造成局部挤压。对所述第一拟合圆柱和所述第二拟合圆柱进行放大得到的上护腿模型和下护腿模型能在完整囊括患者腿部且贴合患者腿型又不至于造成肌肉挤压，让腿部护具更加贴合患者腿型，增加保护效果从而达到让患者早日康复的目的。本发明一实施例还提供了一种计算机可读存储介质，所述计算机可读存储介质包括存储的计算机程序；其中，所述计算机程序在运行时控制所述计算机可读存储介质所在的设备执行如上述所述的腿部护具控制方法。本发明一实施例还提供了一种终端设备，包括处理器、存储器以及存储在所述存储器中且被配置为由所述处理器执行的计算机程序，所述处理器在执行所述计算机程序时实现如上述所述的腿部护具控制方法。优选地，所述计算机程序可以被分割成一个或多个模块/单元，所述一个或者多个模块/单元被存储在所述存储器中，并由所述处理器执行，以完成本发明。所述一个或多个模块/单元可以是能够完成特定功能的一系列计算机程序指令段，该指令段用于描述所述计算机程序在所述终端设备中的执行过程。所述处理器可以是中央处理单元，还可以是其他通用处理器、数字信号处理器、专用集成电路、现成可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等，通用处理器可以是微处理器，或者所述处理器也可以是任何常规的处理器，所述处理器是所述终端设备的控制中心，利用各种接口和线路连接所述终端设备的各个部分。所述存储器主要包括程序存储区和数据存储区，其中，程序存储区可存储操作系统、至少一个功能所需的应用程序等，数据存储区可存储相关数据等。此外，所述存储器可以是高速随机存取存储器，还可以是非易失性存储器，例如插接式硬盘，智能存储卡、安全数字卡和闪存卡等，或所述存储器也可以是其他易失性固态存储器件。需要说明的是，上述终端设备可包括，但不仅限于，处理器、存储器，本领域技术人员可以理解，上述终端设备仅仅是示例，并不构成对终端设备的限定，可以包括更多或更少的部件，或者组合某些部件，或者不同的部件。以上所述是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也视为本发明的保护范围。
