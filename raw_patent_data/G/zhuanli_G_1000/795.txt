标题title
一种天体望远镜误差快速检测方法
摘要abst
本发明涉及图像去噪技术领域，具体涉及一种天体望远镜误差快速检测方法。该方法包括：获取星点灰度图像，根据灰度值确定像素点的高亮持续因子；区域生长处理并根据每个生长区域内像素点的灰度值和高亮持续因子，筛选得到待测区域；根据所有预设方向的灰度值变化，确定衍射表现度；进而确定滤波调节系数；根据滤波调节系数确定目标滤波窗口，对待测图像进行滤波，得到目标图像，根据所有星点灰度图像的目标图像进行误差检测，得到检测结果。本发明结合相同焦距的连续的多帧星点灰度图像进行分析，对白噪声进行有效去除，且根据衍射效果进行特征分析，从而进行自适应的滤波去噪，增强滤波去噪的效果，提升后续检测结果的准确性与可靠性。
权利要求书clms
1.一种天体望远镜误差快速检测方法，其特征在于，所述方法包括：获取天体望远镜采集相同焦距的连续的至少两帧星点灰度图像，将任一帧星点灰度图像作为待测图像，待测图像中任一位置的像素点作为待测点，根据所有帧星点灰度图像中与待测点相同位置的像素点的灰度值的数值大小和分布，确定待测点的高亮持续因子；以所述待测图像中每一像素点为起点，根据所述待测图像中每一像素点的高亮持续因子进行区域生长处理，得到生长区域，根据每个生长区域内像素点的灰度值和高亮持续因子，对生长区域进行筛选，得到包含星点的待测区域；确定每个所述待测区域的中心像素点，以所述中心像素点为起点，对应待测区域内不同预设方向上的像素点作为方向像素点，根据所有预设方向下方向像素点的灰度值变化，确定所述中心像素点所处待测区域的衍射表现度；根据所有帧星点灰度图像所有待测区域的衍射表现度，确定所述待测图像中每一待测区域的衍射稳定度，根据所述待测图像中所有待测区域的衍射稳定度、所有待测区域的像素点数量和所有待测区域中心像素点的高亮持续因子，确定所述待测图像的滤波调节系数；根据所述滤波调节系数对所述待测图像的预设初始滤波窗口进行调整，得到目标滤波窗口，根据所述目标滤波窗口对待测图像进行滤波，得到目标图像，根据所有星点灰度图像的目标图像进行误差检测，得到检测结果。2.如权利要求1所述的一种天体望远镜误差快速检测方法，其特征在于，所述根据所有帧星点灰度图像中与待测点相同位置的像素点的灰度值的数值大小和分布，确定待测点的高亮持续因子，包括：将所有帧星点灰度图像中与待测点相同位置的像素点作为同位点；计算所有同位点的灰度值的方差作为同位方差；计算所有像素点的灰度最大值与同位点的灰度值均值的差值，归一化处理得到灰度权重；计算所述同位方差与灰度权重的乘积，反相关映射并归一化处理得到待测点的高亮持续因子。3.如权利要求1所述的一种天体望远镜误差快速检测方法，其特征在于，所述以所述待测图像中每一像素点为起点，根据所述待测图像中每一像素点的高亮持续因子进行区域生长处理，得到生长区域，包括：将所述待测图像中的任一像素点作为生长点，将以生长点为中心的预设邻域范围内其他像素点与生长点的高亮持续因子的差值绝对值作为其他像素点与生长点的高亮差异；基于区域生长算法，对生长点进行区域生长处理，其中区域生长条件为所述高亮差异小于预设差异阈值；遍历所有所述待测图像，将所述待测图像划分至少两个不同的生长区域。4.如权利要求1所述的一种天体望远镜误差快速检测方法，其特征在于，所述根据每个生长区域内像素点的灰度值和高亮持续因子，对生长区域进行筛选，得到包含星点的待测区域，包括：计算每个生长区域内所有像素点的灰度值均值，得到灰度指标；计算每个生长区域内所有像素点的高亮持续因子的均值，得到高亮持续指标；将所述灰度指标大于预设灰度阈值，且所述高亮持续指标大于预设持续阈值的生长区域作为待测区域。5.如权利要求1所述的一种天体望远镜误差快速检测方法，其特征在于，所述根据所有预设方向下方向像素点的灰度值变化，确定所述中心像素点所处待测区域的衍射表现度，包括：计算同一预设方向上每个方向像素点与对应中心像素点的灰度值差值绝对值，得到每个方向像素点的中心灰度差异；根据同一预设方向上每个方向像素点与对应中心像素点的距离为横坐标，中心灰度差异数值为纵坐标，构建二维坐标系，确定同一预设方向上的所有方向像素点在二维坐标系中的坐标点；对坐标点进行直线拟合，得到对应预设方向的拟合直线，将拟合直线的斜率作为拟合斜率；计算所有拟合斜率的方差的反比例归一化值，得到待测区域的衍射表现度。6.如权利要求1所述的一种天体望远镜误差快速检测方法，其特征在于，所述根据所有帧星点灰度图像所有待测区域的衍射表现度，确定所述待测图像中每一待测区域的衍射稳定度，包括：将所述待测图像中的任一待测区域作为参考区域，所述参考区域的中心像素点为参考像素点，确定每一帧星点灰度图像中与所述参考像素点位置相距最近的待测区域作为对应每一帧星点灰度图像的目标区域；计算所述参考区域与所有帧星点灰度图像的所述目标区域的衍射表现度的方差作为衍射方差；计算所述衍射方差的负数与所述参考区域的衍射表现度的乘积归一化值，得到所述参考区域的衍射稳定度，更换参考区域，得到所述待测图像中每一待测区域的衍射稳定度。7.如权利要求6所述的一种天体望远镜误差快速检测方法，其特征在于，所述根据所述待测图像中所有待测区域的衍射稳定度、所有待测区域的像素点数量和所有待测区域中心像素点的高亮持续因子，确定所述待测图像的滤波调节系数，包括：计算参考区域的衍射稳定度分别与其他所有待测区域的衍射稳定度的差值绝对值的均值的反比例归一化值，得到参考区域的稳定系数；计算参考区域内像素点的数量的归一化值，得到参考区域的数量系数；根据所述参考区域的稳定系数、数量系数和所述区域中心像素点的高亮持续因子，确定所述参考区域的滤波因子，其中，所述稳定系数、数量系数和所述区域中心像素点的高亮持续因子均与所述滤波因子呈正相关关系，所述滤波因子的取值为归一化后的数值；计算所有待测区域的滤波因子的均值作为所述待测图像的滤波调节系数。8.如权利要求1所述的一种天体望远镜误差快速检测方法，其特征在于，所述根据所述滤波调节系数对所述待测图像的预设初始滤波窗口进行调整，得到目标滤波窗口，包括：计算所述滤波调节系数与所述待测图像的预设初始滤波窗口的边长的乘积，并向上取奇数值作为目标滤波窗口的边长，得到目标滤波窗口。9.如权利要求1所述的一种天体望远镜误差快速检测方法，其特征在于，所述根据所述目标滤波窗口对待测图像进行滤波，得到目标图像，包括：使用高斯滤波算法，基于所述目标滤波窗口对待测图像进行高斯滤波，得到目标图像。10.如权利要求1所述的一种天体望远镜误差快速检测方法，其特征在于，所述根据所有星点灰度图像的目标图像进行误差检测，得到检测结果，包括：计算所有目标图像中所有像素点的灰度梯度的均值，得到梯度均值，对所述梯度均值进行归一化处理，得到图像清晰度，将所述图像清晰度作为检测结果。
说明书desc
技术领域本发明涉及图像去噪技术领域，具体涉及一种天体望远镜误差快速检测方法。背景技术天体望远镜的误差检测方式通常为星点分析法PSF或焦点分析法，但是由于多种干扰原因，例如电磁干扰、读出噪声、背景光噪声等，通常采集的星点图像中会存在一定程度的噪声干扰，而噪声干扰的存在会影响误差调节的分析。相关技术中，通过采集天体望远镜所获取的图像，并使用统一的滤波窗口进行滤波去噪处理，这种方式下，由于天体望远镜焦距不同，星点在图像中的大小和灰度等均会产生变化，而噪声点为随机分布，由此，相关技术中的滤波去噪方式效果较差，从而影响后续误差检测的准确性与可靠性。发明内容为了解决相关技术中滤波去噪方式效果较差，从而影响后续误差检测的准确性与可靠性的技术问题，本发明提供一种天体望远镜误差快速检测方法，所采用的技术方案具体如下：本发明提出了一种天体望远镜误差快速检测方法，方法包括：获取天体望远镜采集相同焦距的连续的至少两帧星点灰度图像，将任一帧星点灰度图像作为待测图像，待测图像中任一位置的像素点作为待测点，根据所有帧星点灰度图像中与待测点相同位置的像素点的灰度值的数值大小和分布，确定待测点的高亮持续因子；以所述待测图像中每一像素点为起点，根据所述待测图像中每一像素点的高亮持续因子进行区域生长处理，得到生长区域，根据每个生长区域内像素点的灰度值和高亮持续因子，对生长区域进行筛选，得到包含星点的待测区域；确定每个所述待测区域的中心像素点，以所述中心像素点为起点，对应待测区域内不同预设方向上的像素点作为方向像素点，根据所有预设方向下方向像素点的灰度值变化，确定所述中心像素点所处待测区域的衍射表现度；根据所有帧星点灰度图像所有待测区域的衍射表现度，确定所述待测图像中每一待测区域的衍射稳定度，根据所述待测图像中所有待测区域的衍射稳定度、所有待测区域的像素点数量和所有待测区域中心像素点的高亮持续因子，确定所述待测图像的滤波调节系数；根据所述滤波调节系数对所述待测图像的预设初始滤波窗口进行调整，得到目标滤波窗口，根据所述目标滤波窗口对待测图像进行滤波，得到目标图像，根据所有星点灰度图像的目标图像进行误差检测，得到检测结果。进一步地，所述根据所有帧星点灰度图像中与待测点相同位置的像素点的灰度值的数值大小和分布，确定待测点的高亮持续因子，包括：将所有帧星点灰度图像中与待测点相同位置的像素点作为同位点；计算所有同位点的灰度值的方差作为同位方差；计算所有像素点的灰度最大值与同位点的灰度值均值的差值，归一化处理得到灰度权重；计算所述同位方差与灰度权重的乘积，反相关映射并归一化处理得到待测点的高亮持续因子。进一步地，所述以所述待测图像中每一像素点为起点，根据所述待测图像中每一像素点的高亮持续因子进行区域生长处理，得到生长区域，包括：将所述待测图像中的任一像素点作为生长点，将以生长点为中心的预设邻域范围内其他像素点与生长点的高亮持续因子的差值绝对值作为其他像素点与生长点的高亮差异；基于区域生长算法，对生长点进行区域生长处理，其中区域生长条件为所述高亮差异小于预设差异阈值；遍历所有所述待测图像，将所述待测图像划分至少两个不同的生长区域。进一步地，所述根据每个生长区域内像素点的灰度值和高亮持续因子，对生长区域进行筛选，得到包含星点的待测区域，包括：计算每个生长区域内所有像素点的灰度值均值，得到灰度指标；计算每个生长区域内所有像素点的高亮持续因子的均值，得到高亮持续指标；将所述灰度指标大于预设灰度阈值，且所述高亮持续指标大于预设持续阈值的生长区域作为待测区域。进一步地，所述根据所有预设方向下方向像素点的灰度值变化，确定所述中心像素点所处待测区域的衍射表现度，包括：计算同一预设方向上每个方向像素点与对应中心像素点的灰度值差值绝对值，得到每个方向像素点的中心灰度差异；根据同一预设方向上每个方向像素点与对应中心像素点的距离为横坐标，中心灰度差异数值为纵坐标，构建二维坐标系，确定同一预设方向上的所有方向像素点在二维坐标系中的坐标点；对坐标点进行直线拟合，得到对应预设方向的拟合直线，将拟合直线的斜率作为拟合斜率；计算所有拟合斜率的方差的反比例归一化值，得到待测区域的衍射表现度。进一步地，所述根据所有帧星点灰度图像所有待测区域的衍射表现度，确定所述待测图像中每一待测区域的衍射稳定度，包括：将所述待测图像中的任一待测区域作为参考区域，所述参考区域的中心像素点为参考像素点，确定每一帧星点灰度图像中与所述参考像素点位置相距最近的待测区域作为对应每一帧星点灰度图像的目标区域；计算所述参考区域与所有帧星点灰度图像的所述目标区域的衍射表现度的方差作为衍射方差；计算所述衍射方差的负数与所述参考区域的衍射表现度的乘积归一化值，得到所述参考区域的衍射稳定度，更换参考区域，得到所述待测图像中每一待测区域的衍射稳定度。进一步地，所述根据所述待测图像中所有待测区域的衍射稳定度、所有待测区域的像素点数量和所有待测区域中心像素点的高亮持续因子，确定所述待测图像的滤波调节系数，包括：计算参考区域的衍射稳定度分别与其他所有待测区域的衍射稳定度的差值绝对值的均值的反比例归一化值，得到参考区域的稳定系数；计算参考区域内像素点的数量的归一化值，得到参考区域的数量系数；根据所述参考区域的稳定系数、数量系数和所述区域中心像素点的高亮持续因子，确定所述参考区域的滤波因子，其中，所述稳定系数、数量系数和所述区域中心像素点的高亮持续因子均与所述滤波因子呈正相关关系，所述滤波因子的取值为归一化后的数值；计算所有待测区域的滤波因子的均值作为所述待测图像的滤波调节系数。进一步地，所述根据所述滤波调节系数对所述待测图像的预设初始滤波窗口进行调整，得到目标滤波窗口，包括：计算所述滤波调节系数与所述待测图像的预设初始滤波窗口的边长的乘积，并向上取奇数值作为目标滤波窗口的边长，得到目标滤波窗口。进一步地，所述根据所述目标滤波窗口对待测图像进行滤波，得到目标图像，包括：使用高斯滤波算法，基于所述目标滤波窗口对待测图像进行高斯滤波，得到目标图像。进一步地，所述根据所有星点灰度图像的目标图像进行误差检测，得到检测结果，包括：计算所有目标图像中所有像素点的灰度梯度的均值，得到梯度均值，对所述梯度均值进行归一化处理，得到图像清晰度，将所述图像清晰度作为检测结果。本发明具有如下有益效果：本发明结合星点灰度图像本身白噪声的特点和星点特点的分析，通过获取相同焦距的连续的至少两帧星点灰度图像，并结合相同位置的像素点的灰度值的数值大小和分布，确定待测点的高亮持续因子，从而对白噪声的随机分布进行分析，确定星点的高亮持续情况，便于后续根据高亮持续因子进行区域生长处理，得到生长区域，能够将白噪声、背景区域和星点所处的区域进行有效区分，而后，对生长区域进行特征分析，得到包含星点的待测区域，由此，本发明通过衍射效果，确定每个待测区域的衍射稳定度，进而根据衍射稳定度、像素点数量和中心像素点的高亮持续因子，确定待测图像的滤波调节系数，进而根据滤波条件参数确定自适应的目标滤波窗口，得到目标图像，也即目标图像为根据星点灰度图像本身的纹理和灰度特征，从而自适应滤波得到的图像，提升滤波效果的可靠性，进而在根据目标图像进行误差检测确定检测结果时，提升检测结果的准确性。本发明结合相同焦距的连续的多帧星点灰度图像进行分析，对星点灰度图像中的白噪声进行有效去除，且根据衍射效果进行特征分析，从而进行自适应的滤波去噪，增强滤波去噪的效果，提升后续检测结果的准确性与可靠性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例所提供的一种天体望远镜误差快速检测方法流程图；图2为本发明一个实施例所提供的拟合直线示意图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种天体望远镜误差快速检测方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种天体望远镜误差快速检测方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种天体望远镜误差快速检测方法流程图，该方法包括：S101：获取天体望远镜采集相同焦距的连续的至少两帧星点灰度图像，将任一帧星点灰度图像作为待测图像，待测图像中任一位置的像素点作为待测点，根据所有帧星点灰度图像中与待测点相同位置的像素点的灰度值的数值大小和分布，确定待测点的高亮持续因子。可以理解的是，天体望远镜需要在使用前进行调焦处理，而在焦距未调到最佳时对应的图像中的星点呈现模糊状态，且周围具有较大的光晕效果，因此，需要对图像的灰度特征进行分析，从而确定最佳焦距。本发明实施例中，由于天体望远镜在采集图像时，不可避免的会产生对应的白噪声，而白噪声由于呈现点状，会影响对星点的分析，由此，需要对图像进行去噪，以便于后续进行天体望远镜的误差检测。本发明实施例中，可以在相同焦距下连续拍摄多帧原始图像，而后，对原始图像进行图像灰度化处理，得到星点灰度图像，其中，图像灰度化处理可以具体例如为均值灰度化处理，或者，也可以根据实际检测需求选择其他高精度的灰度化处理方式，对此不做限制。本发明实施例中，由于白噪声呈现随机分布的特征，仅凭单张图像无法有效对白噪声进行分析，由此，本发明结合相同焦距下的多帧星点灰度图像，从而实现白噪声的准确识别。进一步地，在本发明的一些实施例中，根据所有帧星点灰度图像中与待测点相同位置的像素点的灰度值的数值大小和分布，确定待测点的高亮持续因子，包括：将所有帧星点灰度图像中与待测点相同位置的像素点作为同位点；计算所有同位点的灰度值的方差作为同位方差；计算所有像素点的灰度最大值与同位点的灰度值均值的差值，归一化处理得到灰度权重；计算同位方差与灰度权重的乘积，反相关映射并归一化处理得到待测点的高亮持续因子。其中，高亮持续因子，即像素点为持续高亮的星点的可能性系数，由于噪声点的随机分布特征，在不同图像的相同位置处，噪声点对应的灰度会产生变化，结合此特点，本发明实施例可以通过灰度混乱程度和灰度值的偏向程度，确定每一像素点的高亮持续因子。本发明实施例中，将所有帧星点灰度图像中与待测点相同位置的像素点的灰度值的方差作为同位方差，同位方差表征相同位置下像素点的灰度值混乱程度，待测点对应位置的同位方差越大，则所有帧星点灰度图像中待测点同位置的灰度值越混乱，对应的表征待测点越可能为白噪声的数据点。本发明实施例中，由于待测点位置处本身的灰度值越大，可以表明对应待测点越可能为星点所处区域的高亮像素点，而待测点位置处本身的灰度值与所有像素点的最大值差距越大，则待测点越可能为背景区域所对应的点，由此，本发明可以计算所有像素点的灰度最大值与同位点的灰度值均值的差值，归一化处理得到灰度权重，灰度权重越大，表示对应的灰度值的最大值与待测点位置处的灰度值均值的差异越大，也即待测点越可能为背景的像素点。由此，本发明结合同位方差与灰度权重，确定高亮持续因子，也即计算同位方差与灰度权重的乘积，反相关映射并归一化处理得到待测点的高亮持续因子，其中，反相关映射，表示因变量会随着自变量的增大而减小，因变量会随着自变量的减小而增大的映射关系，可以为相减关系、相除关系等，由实际应用进行确定。则本发明可以计算同位方差与灰度权重的乘积的倒数，并归一化处理得到高亮持续因子，或者，也可以计算同位方差与灰度权重的乘积的负数，归一化处理得到高亮持续因子。通过多帧的星点灰度图像对每一位置的像素点进行分析，从而确定每一像素点的高亮持续因子，便于后续进行噪声分析。S102：以待测图像中每一像素点为起点，根据待测图像中每一像素点的高亮持续因子进行区域生长处理，得到生长区域，根据每个生长区域内像素点的灰度值和高亮持续因子，对生长区域进行筛选，得到包含星点的待测区域；确定每个待测区域的中心像素点，以中心像素点为起点，对应待测区域内不同预设方向上的像素点作为方向像素点，根据所有预设方向下方向像素点的灰度值变化，确定中心像素点所处待测区域的衍射表现度。本发明实施例中，可以将每一像素点的高亮持续因子作为区域生长的判断参数，从而对每一帧星点灰度图像进行区域生长分析。进一步地，在本发明的一些实施例中，以待测图像中每一像素点为起点，根据待测图像中每一像素点的高亮持续因子进行区域生长处理，得到生长区域，包括：将待测图像中的任一像素点作为生长点，将以生长点为中心的预设邻域范围内其他像素点与生长点的高亮持续因子的差值绝对值作为其他像素点与生长点的高亮差异；基于区域生长算法，对生长点进行区域生长处理，其中区域生长条件为高亮差异小于预设差异阈值；遍历所有待测图像，将待测图像划分至少两个不同的生长区域。其中，预设差异阈值，为高亮差异的门限值，可选地，预设差异阈值可以具体例如为0.1，则本发明实施例设置区域生长的条件为高亮差异小于0.1，也即是说，在高亮差异小于0.1时，确定满足区域生长条件，对其进行区域生长处理，而在高亮差异大于等于0.1时，确定不满足区域生长条件，则不将其作为同一区域的像素点。需要说明的是，由于区域生长为本领域所熟知的现有技术，通过区域生长能够将高亮持续因子相似且相距较近的像素点作为同一区域，而由于星点具有高聚集度的特性，对星点的高聚集性进行分析，从而将待测图像划分至少两个不同的生长区域。可以理解的是，由于生长区域还包括星空背景所对应的区域，以及星点灰度特征不明显，易产生干扰的区域，由此，对星空背景和不明显的星点进行筛除。进一步地，在本发明的一些实施例中，根据每个生长区域内像素点的灰度值和高亮持续因子，对生长区域进行筛选，得到包含星点的待测区域，包括：计算每个生长区域内所有像素点的灰度值均值，得到灰度指标；计算每个生长区域内所有像素点的高亮持续因子的均值，得到高亮持续指标；将灰度指标大于预设灰度阈值，且高亮持续指标大于预设持续阈值的生长区域作为待测区域。其中，预设灰度阈值，为灰度指标的门限值，预设持续阈值，为高亮持续指标的门限值，本发明实施例中可以设置预设灰度阈值为200，预设持续阈值设置为0.85，也即是说，在生长区域的灰度值均值大于200，且高亮持续指标大于0.85时，将对应的生长区域作为待测区域，则待测区域为星点所对应的区域和强烈的白噪声所对应的区域。本发明实施例中的待测区域初步筛除了白噪声、星空背景和星点灰度特征不明显的区域，从而保留强特征的星点和白噪声对应的区域，便于后续对待测区域的对焦效果进行分析。可以理解的是，在星点灰度图像中，对应的星点具有衍射效果，也即星点所对应的区域会由中心向外进行亮度衍射，呈现光晕特征，而白噪声区域由于为成像白噪声，其不具备衍射效果，由此，本发明根据衍射效果进行具体分析。本发明实施例中，可以通过计算待测区域中所有像素点的坐标均值，确定离坐标均值最近的像素点作为中心像素点，或者，也可以将待测区域的重心处作为中心像素点，对此不做限制。其中，预设方向，为预设的衍射方向，本发明实施例中，可以将中心像素点与周围八邻域的像素点所分别连线的方向作为预设方向，或者，还可以根据实际检测需求确定预设方向，对此不做限制。进一步地，在本发明的一些实施例中，根据所有预设方向下方向像素点的灰度值变化，确定中心像素点所处待测区域的衍射表现度，包括：计算同一预设方向上每个方向像素点与对应中心像素点的灰度值差值绝对值，得到每个方向像素点的中心灰度差异；根据同一预设方向上每个方向像素点与对应中心像素点的距离为横坐标，中心灰度差异数值为纵坐标，构建二维坐标系，确定同一预设方向上的所有方向像素点在二维坐标系中的坐标点；对坐标点进行直线拟合，得到对应预设方向的拟合直线，将拟合直线的斜率作为拟合斜率；计算所有拟合斜率的方差的反比例归一化值，得到待测区域的衍射表现度。如图2所示，图2为本发明一个实施例所提供的拟合直线示意图，结合图2进行具体分析，随着距离增加，对应的中心灰度差异数值增加。本发明实施例中，衍射效果表征在所有预设方向上均具有灰度递减效果，则本发明实施例计算同一预设方向上每个方向像素点与对应中心像素点的灰度值差值绝对值，得到每个方向像素点的中心灰度差异，其中，中心灰度差异即可表征预设方向上方向像素点与中心像素点的灰度关系，在正常的衍射效果中，随着距离中心越远，对应的灰度衰减越大，也即灰度值逐渐变小，而白噪声在非中心像素点时，灰度会骤降，基于此特点，构建二维直角坐标系，将每一预设方向的拟合直线的斜率作为分析指标。本发明实施例中，由于白噪声分布较为随机的特点，白噪声周围的像素点灰度分布较为复杂，因此，对应的拟合斜率的方差数值较大，而星点所处区域由于具有一定的衍射效果，对应的周围像素点的灰度分布较为一致，也即拟合斜率的方差数值较小。则本发明对所有拟合斜率的方差进行反比例的归一化处理，得到衍射表现度，其中，反比例的归一化处理也即反相关映射，并归一化处理，可选地，通过计算所有拟合斜率的方差的负数，并进行最大最小值归一化处理，得到衍射表现度，对此不做限制。S103：根据所有帧星点灰度图像所有待测区域的衍射表现度，确定待测图像中每一待测区域的衍射稳定度，根据待测图像中所有待测区域的衍射稳定度、所有待测区域的像素点数量和所有待测区域中心像素点的高亮持续因子，确定待测图像的滤波调节系数。进一步地，在本发明的一些实施例中，根据所有帧星点灰度图像所有待测区域的衍射表现度，确定待测图像中每一待测区域的衍射稳定度，包括：将待测图像中的任一待测区域作为参考区域，参考区域的中心像素点为参考像素点，确定每一帧星点灰度图像中与参考像素点位置相距最近的待测区域作为对应每一帧星点灰度图像的目标区域；计算参考区域与所有帧星点灰度图像的目标区域的衍射表现度的方差作为衍射方差；计算衍射方差的负数与参考区域的衍射表现度的乘积归一化值，得到参考区域的衍射稳定度，更换参考区域，得到待测图像中每一待测区域的衍射稳定度。其中，衍射稳定度，表示对应待测区域衍射现象的稳定效果，衍射稳定度受星点灰度图像本身焦距影响，由此，本发明结合所有帧星点灰度图像对衍射稳定度进行具体分析。本发明实施例中，由于待测区域为筛选得到的区域，通过多帧星点灰度图像中待测区域的特征进行具体分析，将每一帧星点灰度图像中与参考像素点位置相距最近的待测区域作为对应每一帧星点灰度图像的目标区域，可以理解的是，由于多帧星点灰度图像为相邻时刻拍摄得到的图像，而在进行星空摄影时，对应的快门通常为10~30秒，也即相邻帧的星点灰度图像同一位置处表征相同的含义，但由于有白噪声的存在，由此，本发明设置相距最近的待测区域作为对应每一帧星点灰度图像的目标区域，从而避免白噪声所对应的待测区域无法识别。本发明实施例中，计算参考区域与所有帧星点灰度图像的目标区域的衍射表现度的方差作为衍射方差，衍射方差越大，表征对应白噪声分布可能性越大，使得衍射表现度由于白噪声的原因产生数值分布复杂的现象，相应的衍射方差越小，表征白噪声可能性越小，由此，本发明将衍射方差的负数作为对应参考区域的权重，对参考区域的衍射表现度进行加权分析，确定参考区域的衍射稳定度。本发明实施例中的衍射稳定度表征对应待测区域的衍射效果，则本发明实施例可以根据衍射稳定度确定滤波调节系数，其中，滤波调节系数，即为进行滤波的调节参数，本发明实施例的滤波调节系数旨在对现有的滤波方法进行自适应调节，从而实现更为准确有效的滤波效果。进一步地，在本发明的一些实施例中，根据待测图像中所有待测区域的衍射稳定度、所有待测区域的像素点数量和所有待测区域中心像素点的高亮持续因子，确定待测图像的滤波调节系数，包括：计算参考区域的衍射稳定度分别与其他所有待测区域的衍射稳定度的差值绝对值的均值的反比例归一化值，得到参考区域的稳定系数；计算参考区域内像素点的数量的归一化值，得到参考区域的数量系数；根据参考区域的稳定系数、数量系数和区域中心像素点的高亮持续因子，确定参考区域的滤波因子，其中，稳定系数、数量系数和区域中心像素点的高亮持续因子均与滤波因子呈正相关关系，滤波因子的取值为归一化后的数值；计算所有待测区域的滤波因子的均值作为待测图像的滤波调节系数。其中，参考区域如果为噪点所对应的区域，其衍射稳定度较低，为了对一整幅待测灰度图像进行具体分析，则本发明通过确定参考区域的稳定系数，从而实现所有待测区域白噪声分析。本发明实施例中，参考区域的衍射稳定度分别与其他所有待测区域的衍射稳定度的差值绝对值的均值越大，则对应的参考区域与其他所有待测区域的衍射稳定度差异越大，则参考区域本身越可能为噪声点所对应区域，则对其进行反比例归一化处理，得到参考区域的稳定系数。本发明实施例中，可以理解的是，白噪声所对应的点通常为单个的像素点，而星点纹理为衍射的局部区域，因此，本发明可以基于待测区域像素点的数量进行分析，计算参考区域内像素点的数量的归一化值，得到参考区域的数量系数，也即像素点的数量越多，对应的数量系数越大。其中，滤波因子，为待测图像的滤波调节系数的影响因子，本发明结合稳定系数、数量系数和区域中心像素点的高亮持续因子，确定参考区域的滤波因子，由于稳定系数越高，则对应的参考区域本身越不可能为噪声点所对应区域，而数量系数越高，则参考区域越符合星点对应的纹理特征，由此，本发明可以计算稳定系数、数量系数和区域中心像素点的高亮持续因子的乘积，并归一化得到滤波调节系数，便于后续实施例针对滤波调节系数进行滤波处理。S104：根据滤波调节系数对待测图像的预设初始滤波窗口进行调整，得到目标滤波窗口，根据目标滤波窗口对待测图像进行滤波，得到目标图像，根据所有星点灰度图像的目标图像进行误差检测，得到检测结果。进一步地，在本发明的一些实施例中，根据滤波调节系数对待测图像的预设初始滤波窗口进行调整，得到目标滤波窗口，包括：计算滤波调节系数与待测图像的预设初始滤波窗口的边长的乘积，并向上取奇数值作为目标滤波窗口的边长，得到目标滤波窗口。其中，预设初始滤波窗口，为现有技术中对待测图像进行滤波的窗口，由于现有技术中使用统一的滤波窗口对不同焦距进行分析，从而会导致焦距判断产生误差，则本发明设置每一焦距下的自适应滤波窗口，可选地，预设初始滤波窗口的边长可以具体例如为13×13，或者，也可以根据实际天体望远镜的规格进行设置，对此不做限制。本发明实施例中，将滤波调节系数与预设初始滤波窗口的边长进行相乘，并向上取奇数值作为目标滤波窗口的边长，从而自适应缩小滤波窗口的边长，提升图像处理的精确度。进一步地，在本发明的一些实施例中，根据目标滤波窗口对待测图像进行滤波，得到目标图像，包括：使用高斯滤波算法，基于目标滤波窗口对待测图像进行高斯滤波，得到目标图像。其中，高斯滤波算法，为本领域所熟知的滤波算法，高斯滤波能够有效去除图像中的白噪声，由此，本发明使用高斯滤波算法，基于目标滤波窗口对待测图像进行高斯滤波，得到目标图像，通过自适应的目标滤波窗口，从而实现更为准确有效的高斯滤波效果，对此不作进一步赘述与限定。进一步地，在本发明的一些实施例中，根据所有星点灰度图像的目标图像进行误差检测，得到检测结果，包括：计算所有目标图像中所有像素点的灰度梯度的均值，得到梯度均值，对梯度均值进行归一化处理，得到图像清晰度，将图像清晰度作为检测结果。其中，通过梯度值分析得到图像清晰度，并将图像清晰度作为检测结果，从而实现该焦距下星点灰度图像的清晰度检测。本发明实施例中，在焦距调整效果最优的情况下，对应的星点边缘表现较为清晰，也即星点边缘灰度值变化较大，而在焦距调整效果较差时，会产生对应的衍射效果，导致星点边缘产生模糊化，由此，可以基于梯度信息进行清晰度判断，梯度均值越大，则对应的图像清晰度越高。当然，本发明还可以使用多种其他任意可能的实现方式对目标图像进行误差检测，例如将目标图像输入至预训练的神经网络模型中，经由预训练的神经网络模型对目标图像进行误差检测处理，得到检测结果，从而便于后续根据检测结果进行天体望远镜焦距的调整。本发明通过获取相同焦距的连续的至少两帧星点灰度图像，并结合相同位置的像素点的灰度值的数值大小和分布，确定待测点的高亮持续因子，从而对白噪声的随机分布进行分析，确定星点的高亮持续情况，便于后续根据高亮持续因子进行区域生长处理，得到生长区域，能够将白噪声、背景区域和星点所处的区域进行有效区分，而后，对生长区域进行特征分析，得到包含星点的待测区域，待测区域包含星点所对应的区域和白噪声区域，由此，本发明通过衍射效果，确定每个待测区域的衍射稳定度，进而根据衍射稳定度、像素点数量和中心像素点的高亮持续因子，确定待测图像的滤波调节系数，进而根据滤波条件参数确定自适应的目标滤波窗口，得到目标图像，也即目标图像为根据星点灰度图像本身的纹理和灰度特征，从而自适应滤波得到的图像，提升滤波效果的可靠性，进而在根据目标图像进行误差检测确定检测结果时，提升检测结果的准确性。本发明结合相同焦距的连续的多帧星点灰度图像进行分析，对星点灰度图像中的白噪声进行有效去除，且根据衍射效果进行特征分析，从而进行自适应的滤波去噪，增强滤波去噪的效果，提升后续检测结果的准确性与可靠性。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。
