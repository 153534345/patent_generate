标题title
一种线材视觉检测系统及检测方法
摘要abst
本发明属于线材加工检测技术领域，提供一种线材视觉检测系统及检测方法，所述线材视觉检测系统包括第一检测工位、第二检测工位、打端工位、插壳工位、剥皮工位、线材移送机构、第一组合光源图像采集机构和第二组合光源图像采集机构；采用两个组合光源图像采集机构能够实现对线材进行包括剥皮线检测在内的多种结构外观检测，使检测项更加全面，避免遗漏不良品，组合光源比普通的光源更亮，光照角度更广，有助于使获取的检测图像更加清晰，呈现更好的检测细节，并配合智能的图像算法，能够有效、高效地完成质量较佳的多项线材外观检测。
权利要求书clms
1.一种线材视觉检测系统，其特征在于，所述系统包括：第一检测工位、第二检测工位、打端工位、插壳工位、剥皮工位和线材移送机构；所述第一检测工位设置有第一组合光源图像采集机构，所述第二检测工位设置有第二组合光源图像采集机构；所述线材移送机构将线材移送至剥皮工位进行剥皮后再移送至第一检测工位，通过所述第一组合光源图像采集机构获取线材剥皮线外观以进行剥皮线外观检测；若所述剥皮线外观检测无异常，则所述线材移送机构将线材移送至打端工位进行打端后再移送至第二检测工位，通过所述第二组合光源图像采集机构获取线材打端外观以进行端子外观检测；若所述端子外观检测无异常，则所述线材移送机构将线材移送至插壳工位进行插壳后再移送回第一检测工位，通过所述第一组合光源图像采集机构获取线材胶壳外观以进行胶壳外观检测，若所述胶壳外观检测无异常，则检测完成并判定线材正常。2.根据权利要求1所述的线材视觉检测系统，其特征在于，所述系统还包括上位机和下位机，所述上位机包括视觉检测软件，所述下位机包括控制模块；所述视觉检测软件与控制模块建立通讯连接；所述控制模块还分别与第一组合光源图像采集机构、第二组合光源图像采集机构、线材移送机构建立控制连接。3.根据权利要求1或2所述的线材视觉检测系统，其特征在于，所述第一组合光源图像采集机构包括第一相机和位于第一相机上方的第一组合光源；所述第一组合光源包括为侧光源的第一光源和为背光源的第二光源；所述第一光源沿Z轴向上旋转45°或向下旋转45°。4.根据权利要求1或2所述的线材视觉检测系统，其特征在于，所述第二组合光源图像采集机构包括第二相机和位于第二相机下方的第二组合光源；所述第二组合光源为正光源。5.一种线材检测方法，应用于根据权利要求1-4任一项所述的线材视觉检测系统，其特征在于，所述方法包括步骤：所述控制模块在约定的地址发送约定好的第一检测任务标志至视觉检测软件，以及控制所述第一组合光源图像采集机构进行图像采集并将采集到的第一图像数据发送至视觉检测软件；所述视觉检测软件依据第一图像数据和第一检测任务标志对剥皮线的外观进行检测并给出第一检测结果；所述控制模块在约定的地址发送约定好的第二检测任务标志至视觉检测软件，以及控制所述第二组合光源图像采集机构进行图像采集并将采集到的第二图像数据发送至视觉检测软件；所述视觉检测软件依据第二图像数据和第二检测任务标志对端子的外观进行检测并给出第二检测结果；所述控制模块在约定的地址发送约定好的第三检测任务标志至视觉检测软件，以及控制所述第一组合光源图像采集机构进行图像采集并将采集到的第三图像数据发送至视觉检测软件；所述视觉检测软件依据第三图像数据和第三检测任务标志对胶壳的外观进行检测并给出第三检测结果。6.一种线材剥皮线外观检测方法，应用于根据权利要求1-4任一项所述的线材视觉检测系统，其特征在于，所述方法包括步骤：获取线材在背光照明下的第一图像，通过修改所述第一图像的灰度亮度范围对线材像素值进行提取；将所述线材像素值小于等于设定像素值的区块划分为线芯部分，将所述线材像素值大于设定像素值的区块划分为胶皮部分；统计所述线芯部分的纵向总像素数和横向总像素数，依据所述纵向总像素数和横向总像素数分别计算得到线芯部分的实际长度和实际宽度；若所述线芯部分的实际长度在第一设定范围内且其实际宽度在第二设定范围内，则判定剥皮到位，检测正常。7.一种线材端子外观检测方法，应用于根据权利要求1-4任一项所述的线材视觉检测系统，其特征在于，所述方法包括步骤：获取端子在正光照明下的第二图像，在所述第二图像中按照第一亮度设定值提取位于搜索框内的亮斑区块，计算所述亮斑区块的总像素数占整个搜索框总像素数的百分比，判断所述亮斑区块的总像素数占整个搜索框总像素数的百分比是否在第三设定范围内；在所述第二图像中提取多个像素点，计算相邻两个所述像素点之间的灰度变化程度得到对应区域的复杂度，将所述复杂度与复杂度设定值进行比较，判断检测到的所述对应区域是否发生变化；若所述亮斑区块的总像素数占整个搜索框总像素数的百分比不在第三设定范围内和/或检测到的对应区域发生变化，则判定打端异常。8.一种线材胶壳外观检测方法，应用于根据权利要求1-4任一项所述的线材视觉检测系统，其特征在于，所述方法包括步骤：获取所述胶壳在侧光照明下的第三图像，抓取所述第三图像中从亮到暗的过度像素点，若相邻两个所述过度像素点的亮暗之差大于设定边界亮度值，则相应所述过度像素点所在部分为到位特征；在所述到位特征上建立基准线，取多个所述过度像素点之间在图像坐标上的平均高度值，依据所述平均高度值计算得到基准线的总像素长度，并依据所述总像素长度计算得到基准线的实际长度，若所述基准线的实际长度在第四设定范围内，则判定插壳到位。9.根据权利要求8所述的线材胶壳外观检测方法，其特征在于，所述方法还包括步骤：按照第二亮度设定值从所述第三图像中提取位于搜索框内的亮斑区块，计算提取的所述亮斑区块的总面积占整个搜索框总面积的百分比，若所述亮斑区块的总面积占整个搜索框总面积的百分比在第五设定范围内，则判定胶壳中端子存在。10.根据权利要求8所述的线材胶壳外观检测方法，其特征在于，所述方法还包括步骤：按照第三亮度设定值从所述第三图像中提取位于胶壳塑料弹片位置的白色区块，计算所述白色区块的像素数量占整个搜索框总像素数量的百分比，若所述白色区块的像素数量占整个搜索框总像素数量的百分比不在第六设定范围内，则判定胶壳异常。
说明书desc
技术领域本发明属于线材加工检测技术领域，尤其涉及一种线材视觉检测系统及检测方法。背景技术线材打端压接的加工工艺中，需先将电线外皮剥去一定长度后再进行打端，打端后再进行插壳。其中，剥皮、打端、插壳等工序需要通过多台不同的设备来配合实现，能够较好地实现自动化生产。在此过程中，为了防止有不良品流入下一工序，应对每一工序结束后的线材进行检测，但是，由于现有检测技术检测方式单一，大多只能针对个别型号的端子外观、胶壳外观或者同类线材外观进行检测，无法对剥皮后的线芯进行外观检测，检测项不够全面，导致检测质量还存在明显的缺陷，而且，由于现有检测技术中打光方式也比较单一，通常采用单一光源光照检测，较难获取更为清晰的检测图像，导致检测精度不高，也易影响检测质量。发明内容本发明的目的在于提供一种线材视觉检测系统及检测方法，旨在解决由于现有检测技术检测方式和打光方式均较为单一，检测项不够全面，检测图像不够清晰，进而导致检测质量不佳的问题。为了克服上述技术问题，一方面，本发明提供一种线材视觉检测系统，所述系统包括：第一检测工位、第二检测工位、打端工位、插壳工位、剥皮工位和线材移送机构；所述第一检测工位设置有第一组合光源图像采集机构，所述第二检测工位设置有第二组合光源图像采集机构；所述线材移送机构将线材移送至剥皮工位进行剥皮后再移送至第一检测工位，通过所述第一组合光源图像采集机构获取线材剥皮线外观以进行剥皮线外观检测；若所述剥皮线外观检测无异常，则所述线材移送机构将线材移送至打端工位进行打端后再移送至第二检测工位，通过所述第二组合光源图像采集机构获取线材打端外观以进行端子外观检测；若所述端子外观检测无异常，则所述线材移送机构将线材移送至插壳工位进行插壳后再移送回第一检测工位，通过所述第一组合光源图像采集机构获取线材胶壳外观以进行胶壳外观检测，若所述胶壳外观检测无异常，则检测完成并判定线材正常。在一些实施例中，所述系统还包括上位机和下位机，所述上位机包括视觉检测软件，所述下位机包括控制模块；所述视觉检测软件与控制模块建立通讯连接；所述控制模块还分别与第一组合光源图像采集机构、第二组合光源图像采集机构、线材移送机构建立控制连接。在一些实施例中，所述第一组合光源图像采集机构包括第一相机和位于第一相机上方的第一组合光源；所述第一组合光源包括为侧光源的第一光源和为背光源的第二光源；所述第一光源沿Z轴向上旋转45°或向下旋转45°。在一些实施例中，所述第二组合光源图像采集机构包括第二相机和位于第二相机下方的第二组合光源；所述第二组合光源为正光源。另一方面，本发明还提供一种线材检测方法，应用于上述任一项所述的线材视觉检测系统，所述方法包括步骤：所述控制模块在约定的地址发送约定好的第一检测任务标志至视觉检测软件，以及控制所述第一组合光源图像采集机构进行图像采集并将采集到的第一图像数据发送至视觉检测软件；所述视觉检测软件依据第一图像数据和第一检测任务标志对剥皮线的外观进行检测并给出第一检测结果；所述控制模块在约定的地址发送约定好的第二检测任务标志至视觉检测软件，以及控制所述第二组合光源图像采集机构进行图像采集并将采集到的第二图像数据发送至视觉检测软件；所述视觉检测软件依据第二图像数据和第二检测任务标志对端子的外观进行检测并给出第二检测结果；所述控制模块在约定的地址发送约定好的第三检测任务标志至视觉检测软件，以及控制所述第一组合光源图像采集机构进行图像采集并将采集到的第三图像数据发送至视觉检测软件；所述视觉检测软件依据第三图像数据和第三检测任务标志对胶壳的外观进行检测并给出第三检测结果。另一方面，本发明还提供一种线材剥皮线外观检测方法，应用于上述任一项所述的线材视觉检测系统，所述方法包括步骤：获取线材在背光照明下的第一图像，通过修改所述第一图像的灰度亮度范围对线材像素值进行提取；将所述线材像素值小于等于设定像素值的区块划分为线芯部分，将所述线材像素值大于设定像素值的区块划分为胶皮部分；统计所述线芯部分的纵向总像素数和横向总像素数，依据所述纵向总像素数和横向总像素数分别计算得到线芯部分的实际长度和实际宽度；若所述线芯部分的实际长度在第一设定范围内且其实际宽度在第二设定范围内，则判定剥皮到位，检测正常。另一方面，本发明还提供一种线材端子外观检测方法，应用于上述任一项所述的线材视觉检测系统，所述方法包括步骤：获取端子在正光照明下的第二图像，在所述第二图像中按照第一亮度设定值提取位于搜索框内的亮斑区块，计算所述亮斑区块的总像素数占整个搜索框总像素数的百分比，判断所述亮斑区块的总像素数占整个搜索框总像素数的百分比是否在第三设定范围内；在所述第二图像中提取多个像素点，计算相邻两个所述像素点之间的灰度变化程度得到对应区域的复杂度，将所述复杂度与复杂度设定值进行比较，判断检测到的所述对应区域是否发生变化；若所述亮斑区块的总像素数占整个搜索框总像素数的百分比不在第三设定范围内和/或检测到的对应区域发生变化，则判定打端异常。另一方面，本发明还提供一种线材胶壳外观检测方法，应用于上述任一项所述的线材视觉检测系统，所述方法包括步骤：获取所述胶壳在侧光照明下的第三图像，抓取所述第三图像中从亮到暗的过度像素点，若相邻两个所述过度像素点的亮暗之差大于设定边界亮度值，则相应所述过度像素点所在部分为到位特征；在所述到位特征上建立基准线，取多个所述过度像素点之间在图像坐标上的平均高度值，依据所述平均高度值计算得到基准线的总像素长度，并依据所述总像素长度计算得到基准线的实际长度，若所述基准线的实际长度在第四设定范围内，则判定插壳到位。在一些实施例中，所述方法还包括步骤：按照第二亮度设定值从所述第三图像中提取位于搜索框内的亮斑区块，计算提取的所述亮斑区块的总面积占整个搜索框总面积的百分比，若所述亮斑区块的总面积占整个搜索框总面积的百分比在第五设定范围内，则判定胶壳中端子存在。在一些实施例中，所述方法还包括步骤：按照第三亮度设定值从所述第三图像中提取位于胶壳塑料弹片位置的白色区块，计算所述白色区块的像素数量占整个搜索框总像素数量的百分比，若所述白色区块的像素数量占整个搜索框总像素数量的百分比不在第六设定范围内，则判定胶壳异常。本发明的有益效果在于：区别于现有技术，本发明的线材视觉检测系统包括第一检测工位、第二检测工位、打端工位、插壳工位、剥皮工位、线材移送机构、第一组合光源图像采集机构和第二组合光源图像采集机构；采用两个组合光源图像采集机构能够实现对线材进行包括剥皮线检测在内的多种结构外观检测，使检测项更加全面，避免遗漏不良品，组合光源比普通的光源更亮，光照角度更广，有助于使获取的检测图像更加清晰，呈现更好的检测细节，并配合智能的图像算法，能够有效、高效地完成质量较佳的多项线材外观检测。附图说明图1是本发明实施例一中线材视觉检测系统的结构示意图；图2是本发明实施例一中线材视觉检测系统的应用场景示意图；图3是本发明实施例一中第一组合光源图像采集机构的结构及其布局示意图；图4是本发明实施例一中第一光源旋转的示意图；图5是本发明实施例一中第二组合光源图像采集机构的结构及其布局示意图；图6是本发明实施例一中基于线材视觉检测系统的检测步骤实现流程图；图7是本发明实施例二中线材剥皮线外观检测方法的实现流程图；图8是本发明实施例二中第一图像的检测示意图；图9是本发明实施例三中线材端子外观检测方法的实现流程图；图10是本发明实施例三中第二图像的检测示意图；图11是本发明实施例三中第二图像的一部分检测示意图；图12是本发明实施例三中第二图像的另一部分检测示意图；图13是本发明实施例四中线材胶壳外观检测方法的实现流程图；图14是本发明实施例四中第三图像的检测示意图；图15是本发明实施例四中第三图像的部分区域检测示意图；图16是本发明实施例四中第三图像的部分区域检测示意图中的一放大区域图；图17是本发明实施例四中第三图像的部分区域检测示意图中的另一放大区域图；图18是本发明实施例四中有胶壳的检测示意图；图19是本发明实施例四中无胶壳的检测示意图。具体实施方式下面将详细描述本发明的各个方面的特征和示例性实施例，为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细描述。应理解，此处所描述的具体实施例仅被配置为解释本发明，并不被配置为限定本发明。对于本领域技术人员来说，本发明可以在不需要这些具体细节中的一些细节的情况下实施。下面对实施例的描述仅仅是为了通过示出本发明的示例来提供对本发明更好的理解。需要说明的是，在本文中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。此外，术语“第一”、“第二”、“第三”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。以下结合具体实施例对本发明的具体实现进行详细描述：实施例一：图1示出了本发明实施例一提供的线材视觉检测系统的结构。图2示出了本发明实施例一提供的线材视觉检测系统的应用场景。为了便于说明，仅示出了与本发明实施例相关的部分，该线材视觉检测系统包括：第一检测工位10、第二检测工位20、打端工位30、插壳工位40、剥皮工位50和线材移送机构60；第一检测工位10设置有第一组合光源图像采集机构11，第二检测工位20设置有第二组合光源图像采集机构21；线材移送机构60将线材移送至剥皮工位50进行剥皮后再移送至第一检测工位10，通过第一组合光源图像采集机构11获取线材剥皮线外观以进行剥皮线外观检测；若剥皮线外观检测无异常，则线材移送机构60将线材移送至打端工位30进行打端后再移送至第二检测工位20，通过第二组合光源图像采集机构21获取线材打端外观以进行端子外观检测；若端子外观检测无异常，则线材移送机构60将线材移送至插壳工位40进行插壳后再移送回第一检测工位10，通过第一组合光源图像采集机构21获取线材胶壳外观以进行胶壳外观检测，若胶壳外观检测无异常，则检测完成并判定线材正常。其中，第一检测工位10为剥皮和胶壳检测工位。第二检测工位20为端子检测工位。具体的，该线材视觉检测系统还包括上位机70和下位机80，上位机包括视觉检测软件71，下位机80包括控制模块81；视觉检测软件71与控制模块81建立通讯连接；控制模块81还分别与第一组合光源图像采集机构11、第二组合光源图像采集机构21、线材移送机构60建立控制连接。其中，视觉检测软件71与控制模块81通过modbus-tcp协议建立通讯连接。控制模块81如控制板卡，第一组合光源图像采集机构21、第二组合光源图像采集机构21分别通过I/O线与控制板卡建立触发控制。如图3中所示，第一组合光源图像采集机构11包括第一相机111和位于第一相机111上方的第一组合光源112；第一组合光源112包括为侧光源的第一光源1121和为背光源的第二光源1122。第一相机111既要拍胶壳也要拍线芯，具体以胶壳成像为准来调第一相机111镜头曝光。故在拍线材上的不同结构时，光源是分别控制，拍胶壳对应第一光源1121，拍线芯对应第二光源1122。其中，第一相机111的型号为A3A20CG8/1200W像素彩色相机。第一相机111的镜头为CS-M1628C10M/16mm焦距FA镜头。检测时，需使线材位于第二光源1122和第一相机111之间，第二光源1122的发光面与线材的表面空间平行，能够实现较好的图像效果。线材与第二光源1122之间的距离为30mm±10mm。线材与第一光源1121之间的距离为30mm±10mm。第一相机111镜头与线材之间的距离为260mm±25mm。如图4中所示，以X轴和Z轴的交点O点为旋转中心，第一光源1121位于O点。第一光源1121沿Z轴向上旋转45°或向下旋转45°。第一光源1121还能够在Z轴方向上下平移15mm。需要说明的是，安装第一光源1121需预留可调节空间，此目的是为了能兼容更多不同产品。第一光源1121中心与线材中心应同水平高低。第一光源1121和第二光源1122均为条形白光源，具体型号为CBF-10030-W带漫反射板。在另一些实施例中，第一光源1121和第二光源1122也可用不带漫反射板的光源代替。如图5中所示，第二组合光源图像采集机构21包括第二相机211和位于第二相机211下方的第二组合光源212；第二组合光源212为正光源。第二组合光源212的发光面与线材的表面空间平行，能够实现较好的图像效果，能够一次检测多个端子外观。第二相机211、第二组合光源212、线材三者在空间上应一一对应且平行。第二组合光源212与线材之间的距离为20mm±10mm。第二相机211镜头与线材之间的距离为260mm±25mm。第二相机211的型号为A3A20CG8/1200W像素彩色相机。第二相机211的镜头为CS-M1628C10M/16mm焦距FA镜头。第二组合光源212为定制，其具体型号为：MCL-1496-10432。本实施例中，线材移送机构60包括移动机构61以及设置于移动机构61上的载台62，移动机构61用于根据指令带动载台62向上述各工位移动，载台62用于承载线材。需要说明的是，打端工位30、插壳工位40、剥皮工位50上各自设置有对应的打端、插壳、剥皮设备，打端、插壳、剥皮设备均采用现有的即可，此处不做具体限定。如图6中所示，通过该线材视觉检测系统实现线材检测的具体方法包括下述步骤S1-S3：S1：控制模块在约定的地址发送约定好的第一检测任务标志至视觉检测软件，以及控制第一组合光源图像采集机构进行图像采集并将采集到的第一图像数据发送至视觉检测软件；视觉检测软件依据第一图像数据和第一检测任务标志对剥皮线的外观进行检测并给出第一检测结果；例如，载台将线材送到剥皮工位进行剥皮，剥皮后移动到第一检测工位进行剥皮线外观检测。当要进行剥皮线外观检测时，控制模块在约定的地址发送约定好的第一检测任务标志并通过I/O触发线触发第一相机拍照，发送数字‘1’至视觉检测软件，视觉检测软件收到相应图片和对应的第一检测任务标志后，进行检测并给出结果。S2：控制模块在约定的地址发送约定好的第二检测任务标志至视觉检测软件，以及控制第二组合光源图像采集机构进行图像采集并将采集到的第二图像数据发送至视觉检测软件；视觉检测软件依据第二图像数据和第二检测任务标志对端子的外观进行检测并给出第二检测结果；例如，第一检测工位的上述检测流程完成后，载台将线材送到打端工位进行打端，打端完成后继续将线材送到第二检测工位进行端子外观检测，当要进行端子外观检测时，控制模块在约定的地址发送约定好的第二检测任务标志并通过I/O触发线触发第二相机拍照，发送数字‘2’至视觉检测软件，视觉检测软件收到相应图片和对应的第二检测任务标志后，进行检测并给出结果。S3：控制模块在约定的地址发送约定好的第三检测任务标志至视觉检测软件，以及控制第一组合光源图像采集机构进行图像采集并将采集到的第三图像数据发送至视觉检测软件；视觉检测软件依据第三图像数据和第三检测任务标志对胶壳的外观进行检测并给出第三检测结果；例如，第二检测工位的上述检测流程完成后，载台将打端后线材送到插壳工位进行插壳，插壳完成后继续将线材送到第一检测工位进行胶壳检测。当要进行胶壳外观检测时，控制模块在约定的地址发送约定好的第三检测任务标志并通过I/O触发线触发第一相机拍照，发送数字‘3’至视觉检测软件，视觉检测软件收到相应图片和对应的第三检测任务标志后，进行检测并给出结果。完成以上三个步骤为一次完整检测流程。实施例二：图7示出了本发明实施例二提供的线材剥皮线外观检测方法的实现流程，应用于实施例一中的线材视觉检测系统，该方法具体包括步骤S41-S44：S41：获取线材在背光照明下的第一图像，通过修改第一图像的灰度亮度范围对线材像素值进行提取；线材在背光的照明下，在第一图像中呈现黑色状态如图8所示，通过“通用线芯检测工具”修改第一图像的灰度亮度范围对线材进行提取。例如设定最小亮度为0，最大亮度为180，提取的线芯宽度即设定像素值为36。S42：将线材像素值小于等于设定像素值的区块划分为线芯部分，将线材像素值大于设定像素值的区块划分为胶皮部分；如图8中所示，线芯部分为A，胶皮部分为B。S43：统计线芯部分的纵向总像素数和横向总像素数，依据纵向总像素数和横向总像素数分别计算得到线芯部分的实际长度和实际宽度；线芯部分的实际长度计算：线芯部分最高点与胶皮部分分割处之间的距离为线芯部分的高度，统计处于该高度的纵向总像素数，纵向总像素数*像素当量=线芯部分实际长度；例如350*0.01=3.5mm。线芯部分的实际宽度计算：线芯部分的横向两端距离即为线芯部分的宽度，通常只需要线芯部分顶部位置的附近的宽度作为检测宽度。宽度划分方式：将线芯部分沿纵向按照输入参数平分成多个区块，取第一区块为检测目标，区块平分越多检测越精细。统计第一区块的横向总像素数，横向总像素数*像素当量=线芯部分实际宽度。S44：若线芯部分的实际长度在第一设定范围内且其实际宽度在第二设定范围内，则判定剥皮到位，检测正常。其中，第一设定范围和第二设定范围均是按照相关标准设定的检测参考范围，例如具有上下限要求的标准范围或者公差范围等。实施例三：图9示出了本发明实施例三提供的线材端子外观检测方法的实现流程，应用于实施例一中的线材视觉检测系统，该方法具体包括步骤S51-S53，如图10至图12中所示：S51：获取端子在正光照明下的第二图像，在第二图像中按照第一亮度设定值提取位于搜索框内的亮斑区块，计算亮斑区块的总像素数占整个搜索框总像素数的百分比，判断亮斑区块的总像素数占整个搜索框总像素数的百分比是否在第三设定范围内；使用“多目标面积检测工具”按照第一亮度设定值提取亮斑区块并计算亮斑区块总像素数占整个搜索框总像素数的百分比，亮斑区块的总像素数占整个搜索框总像素数的百分比不在第三设定范围内即认为检测异常。主要用于检测端子有无及线芯压脚、胶皮压脚是否正常。S52：在第二图像中提取多个像素点，计算相邻两个像素点之间的灰度变化程度得到对应区域的复杂度，将复杂度与复杂度设定值进行比较，判断检测到的对应区域是否发生变化；使用“多目标通用检测工具_灰度特征”工具计算相邻两个像素点之间的灰度变化程度得出一个数值来表示该区域的复杂度，进而通过与复杂度设定值进行比较，判断检测到的对应区域是否发生变化。主要用于检测端子中线芯有无出头、是否漏线芯、有无胶皮。S53：若亮斑区块的总像素数占整个搜索框总像素数的百分比不在第三设定范围内和/或检测到的对应区域发生变化，则判定打端异常。其中，第三设定范围也是按照相关标准设定的检测参考范围，例如具有上下限要求的标准范围或者公差范围等。实施例四：图13示出了本发明实施例四提供的线材胶壳外观检测方法的实现流程，应用于实施例一中的线材视觉检测系统，该方法具体包括步骤S61-S64：如图14中所示，进行检测前，使用“相关定位工具_划分区域_多模板”定位工具对胶壳进行定位，其作用有两个：一是用于确定胶壳数量；二是用于给检测工具提供刚性跟随：即胶壳放生位移了，检测工具的位置相对胶壳是没有发生变化的。S61：获取胶壳在侧光照明下的第三图像，抓取第三图像中从亮到暗的过度像素点，若相邻两个过度像素点的亮暗之差大于设定边界亮度值，则相应过度像素点所在部分为到位特征；如图15和图16中所示，使用“多目标穿壳边缘检测工具”，用抓点的方式，把到位特征抓取到，抓点的搜索方向是找从亮到暗的过度像素点，如图16所示从上到下。只要相邻两个过度像素点的亮暗之差大于设定边界亮度值即为要抓取的点。S62：在到位特征上建立基准线，取多个过度像素点之间在图像坐标上的平均高度值，依据平均高度值计算得到基准线的总像素长度，并依据总像素长度计算得到基准线的实际长度，若基准线的实际长度在第四设定范围内，则判定插壳到位。基准线的实际长度计算：总像素长度*像素当量=基准线实际长度。进一步的，该方法具体还包括步骤：S63：按照第二亮度设定值从第三图像中提取位于搜索框内的亮斑区块，计算提取的亮斑区块的总面积占整个搜索框总面积的百分比，若亮斑区块的总面积占整个搜索框总面积的百分比在第五设定范围内，则判定胶壳中端子存在。如图17中所示，使用“多目标穿壳面积检测工具”，按照第二亮度设定值从第三图像中提取位于搜索框内的亮斑区块。进一步的，该方法具体还包括步骤：S64：按照第三亮度设定值从第三图像中提取位于胶壳塑料弹片位置的白色区块，计算白色区块的像素数量占整个搜索框总像素数量的百分比，若白色区块的像素数量占整个搜索框总像素数量的百分比不在第六设定范围内，则判定胶壳异常。使用“多目标穿壳面积检测工具”，按照第三亮度设定值从第三图像中提取位于胶壳塑料弹片位置的白色区块。有胶壳检测图像如图18中所示；作为对照，无胶壳检测图像如图19中所示。其中，第四设定范围、第五设定范围、第六设定范围也均是按照相关标准设定的检测参考范围，例如具有上下限要求的标准范围或者公差范围等。以上各实施例中的检测工具通用性均较高，同个工具通过设置不同参数和设置不同的搜索位置能完成多项不同的外观任务检测，结合便捷的操作方式和智能的图像算法能够有效、高效地完成多项外观任务检测。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明的保护范围之内。
