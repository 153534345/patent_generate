标题title
一种基于泛在电力物联网的数据共享管理方法及系统
摘要abst
本发明属于数据处理技术领域，具体涉及一种基于泛在电力物联网的数据共享管理方法及系统，所述方法包括在智能传感器和远程服务器之间设置多个中间服务器，获取智能传感器和各中间服务器发送数据的往返时长，查询发送时延最小的中间服务器作为目标服务器，智能传感器给要发送的数据添加操作标识后发送到目标服务器，目标服务器对每个收到的数据，根据操作标识判断执行存储操作还是发送操作，远程服务器接收并存储数据后，设置数据访问接口，用户智能终端通过数据访问接口访问数据，远程服务器还对用户智能终端设置对应的访问权限，在接收到用户智能终端的访问请求后，根据访问权限向用户智能终端发送对应的数据。本发明能够提高收集数据的效率。
权利要求书clms
1.一种基于泛在电力物联网的数据共享管理方法，其特征在于，包括如下步骤：步骤S1、在智能传感器和远程服务器之间设置多个中间服务器，所述智能传感器发送测试数据到各所述中间服务器，获取所述智能传感器和各所述中间服务器发送数据的往返时长,所述往返时长为从所述智能传感器发送所述测试数据到所述中间服务器时开始计时，所述中间服务器接收到所述测试数据后发送确认信息至所述智能传感器，到所述智能传感器接收所述确认信息后结束计时所经过的时长，将所述往返时长称为发送时延，获取其中最小发送时延和所述最小发送时延对应的中间服务器的服务器ID，将所述智能传感器的传感器ID、所述最小发送时延和所述服务器ID发送到第一存储模块，由第一存储模块关联存储；步骤S2、所述智能传感器发送数据前从所述第一存储模块中查询发送时延最小的中间服务器作为目标服务器，若发送时延最小的中间服务器有多个，则从多个发送时延最小的中间服务器中任意选择一个中间服务器作为目标服务器，所述智能传感器给要发送的数据添加操作标识，所述操作标识包括存储操作和发送操作，之后持续的将数据发送到所述目标服务器；步骤S3、所述目标服务器接收到所述智能传感器发送的所述数据后，对每个收到的所述数据，根据所述操作标识判断执行存储操作还是发送操作，所述存储操作是指将所述数据存储在所述目标服务器的存储区，所述发送操作是指将所述数据发送到所述远程服务器；步骤S4、所述远程服务器接收并存储所述数据，设置数据访问接口，用户智能终端通过所述数据访问接口访问所述数据，所述远程服务器还对所述用户智能终端设置对应的访问权限，在接收到所述用户智能终端的访问请求后，根据所述访问权限向所述用户智能终端发送对应的数据。2.根据权利要求1所述的一种基于泛在电力物联网的数据共享管理方法，其特征在于，在所述步骤S2中，在持续的将数据发送到所述目标服务器的过程中，还执行如下步骤：所述智能传感器每发送一次数据，获取对应的发送时延，若所述发送时延大于预设第一时长，所述智能传感器再次向各所述中间服务器发送测试数据，获取所述智能传感器和各所述中间服务器的新的发送时延，获取新的最小发送时延和新的所述最小发送时延对应的中间服务器的服务器ID，将新的所述最小发送时延和所述服务器ID更新到所述第一存储模块中，在下一次发送数据时，从所述第一存储模块中选择发送时延最小的中间服务器作为新的目标服务器，之后向新的所述目标服务器发送数据。3.根据权利要求1所述的一种基于泛在电力物联网的数据共享管理方法，其特征在于，在所述步骤S3中，判断执行存储操作还是发送操作后，执行如下步骤：若判断结果为执行存储操作，先将所述数据存储在所述目标服务器的缓存区，判断所述存储区的剩余存储空间的大小，若所述剩余存储空间大于等于预设阈值，将所述数据存储在所述目标服务器的存储区，之后清空缓存区，还获取所述数据的存储信息，所述存储信息包括数据ID、数据生成时间、传感器ID和服务器ID，将所述存储信息存储在第二存储模块中，若所述剩余存储空间小于所述预设阈值，将所述目标服务器的所述存储区中的所有存储区数据发送到所述远程服务器，之后将所述存储区数据删除，还通知所述第二存储模块，将所述存储区数据对应的所述存储信息删除，再将所述缓存区存储的所述数据存储到所述存储区，之后清空所述缓存区，若判断结果为执行发送操作，将所述数据发送到远程服务器。4.根据权利要求3所述的一种基于泛在电力物联网的数据共享管理方法，其特征在于，将所述数据发送到远程服务器的过程，包括如下步骤：提前将所有所述中间服务器分组，从分为同一组的所有所述中间服务器中任意选择一个作为代理服务器，同一组中的其他所述中间服务器在执行发送操作时，获取自身所在分组的所述代理服务器，将要发送的数据发送到所述代理服务器，由所述代理服务器将要发送的数据转发到所述远程服务器，所述代理服务器被选定后，每次转发数据后判断是否达到预设条件，若达到预定条件，从分为同一组的所有所述中间服务器中再选择一个作为代理服务器，若没有达到所述预设条件，当前的所述代理服务器继续为分为同一组的其他所述中间服务器转发数据。5.根据权利要求4所述的一种基于泛在电力物联网的数据共享管理方法，其特征在于，从分为同一组的所有所述中间服务器中再选择一个作为代理服务器的过程，包括如下步骤：在上一个所述代理服务器开始工作后，每隔预设周期，统计被分为同一组的其他各所述中间服务器收集的数据量，直到上一个所述代理服务器结束工作后，生成多个中间服务器的统计收集数据量的柱状图，所述柱状图以时间为横坐标，以数据量为纵坐标，以所述预设周期为一个统计单位，之后将各所述中间服务器的柱状图拟合为一条曲线，计算所述曲线、所述横坐标和所述纵坐标之间的区域的面积获取到各所述中间服务器在上一个所述代理服务器工作期间的评价值，比较所有所述中间服务器的所述评价值，找到最小评价值对应的中间服务器，将所述最小评价值对应的所述中间服务器作为下一个代理服务器。6.根据权利要求3所述的一种基于泛在电力物联网的数据共享管理方法，其特征在于，在所述步骤S4中，向所述用户智能终端发送对应的数据的过程，包括如下步骤：所述远程服务器根据所述访问请求，判断所述访问请求的数据是否存储在所述远程服务器的存储区中，是的情况下，将所述访问请求的数据发送到所述用户智能终端，否的情况下，所述远程服务器从第二存储模块查询所述访问请求的数据对应的服务器ID，根据所述服务器ID获取对应的中间服务器，之后向所述中间服务器发送数据请求，所述中间服务器根据所述数据请求将对应的数据发送到所述远程服务器。7.根据权利要求6所述的一种基于泛在电力物联网的数据共享管理方法，其特征在于，所述中间服务器根据所述数据请求将对应的数据发送到所述远程服务器后，还执行如下步骤：所述中间服务器将发送到所述远程服务器的所述数据从对应的所述存储区中删除，所述中间服务器还通知所述第二存储模块将所述数据的所述存储信息删除。8.一种基于泛在电力物联网的数据共享管理系统，用于实现如权利要求1-7任意一项所述的方法，其特征在于，包括如下模块：智能传感器，用于发送测试数据到各所述中间服务器，获取所述智能传感器和各所述中间服务器发送数据的往返时长,所述往返时长为从所述智能传感器发送所述测试数据到所述中间服务器时开始计时，所述中间服务器接收到所述测试数据后发送确认信息至所述智能传感器，到所述智能传感器接收所述确认信息后结束计时所经过的时长，将所述往返时长称为发送时延，获取其中最小发送时延和所述最小发送时延对应的中间服务器的服务器ID，将所述智能传感器的传感器ID、所述最小发送时延和所述服务器ID发送到第一存储模块，由第一存储模块关联的存储，还用于在发送数据前从所述第一存储模块中查询发送时延最小的中间服务器作为目标服务器，若发送时延最小的中间服务器有多个，则从多个发送时延最小的中间服务器中任意选择一个中间服务器作为目标服务器，所述智能传感器给要发送的数据添加操作标识，所述操作标识包括存储操作和发送操作，之后持续的将数据发送到所述目标服务器；目标服务器，用于接收到所述智能传感器发送的所述数据，之后对每个收到的所述数据，根据所述操作标识判断执行存储操作还是发送操作，所述存储操作是指将所述数据存储在所述目标服务器的存储区，所述发送操作是指将所述数据发送到所述远程服务器；远程服务器，用于接收并存储所述数据，设置数据访问接口，用户智能终端通过所述数据访问接口访问所述数据，所述远程服务器还对所述用户智能终端设置对应的访问权限，在接收到所述用户智能终端的访问请求后，根据所述访问权限向所述用户智能终端发送对应的数据。
说明书desc
技术领域本发明属于数据处理技术领域，具体涉及基于一种泛在电力物联网的数据共享管理方法及系统。背景技术随着现代社会的发展，电力的需求更加旺盛，同时对电力系统也提出了更高的要求，现代电力系统需要更加快速的响应速度，实时快速的收集并共享各种电力数据，达到实时故障检测及快速响应的目的。类似的现有技术公开号为CN108366051B的中国发明专利，该发明专利提供一种物联网感知数据共享系统，包括采集设备、共享存储设备和服务器，其中：采集设备用于采集感知数据，且以采集设备的通信协议及数据协议的形式发送给所述共享存储设备；共享存储设备用于接收采集设备发送的感知数据，并将感知数据进行规范化处理，得到统一化的数据，并将统一化的数据存储到共享存储设备本地，并发送到服务器；服务器用于接收统一化数据，并对感知数据和共享存储设备进行管理。类似的现有技术还有公开号为CN115145989B的中国发明专利，公开一种基于物联网数据模型的数据共享方法及装置，该方法包括：获取异构数据信息；利用预设的物联网数据模型对异构数据信息进行结构化整合处理，得到标识数据信息；响应于用户共享需求，对标识数据信息进行数据共享。然而上述两个方法均没有考虑收集数据时提高数据收集效率的问题，本发明提供一种泛在电力物联网的数据共享管理方法及系统。发明内容本发明通过在智能传感器和远程服务器之间设置多个中间服务器，获取智能传感器和各中间服务器发送数据的往返时长，查询发送时延最小的中间服务器作为目标服务器，智能传感器给要发送的数据添加操作标识后发送到目标服务器，目标服务器对每个收到的数据，根据操作标识判断执行存储操作还是发送操作，远程服务器接收并存储数据后，设置数据访问接口，用户智能终端通过数据访问接口访问数据，远程服务器还对用户智能终端设置对应的访问权限，在接收到用户智能终端的访问请求后，根据访问权限向用户智能终端发送对应的数据。本发明能够提高收集数据的效率。为了达到上述的发明目的，本发明给出如下所述的一种泛在电力物联网的数据共享管理方法，主要通过执行以下步骤进行实现:步骤S1、在智能传感器和远程服务器之间设置多个中间服务器，所述智能传感器发送测试数据到各所述中间服务器，获取所述智能传感器和各所述中间服务器发送数据的往返时长,所述往返时长为从所述智能传感器发送所述测试数据到所述中间服务器时开始计时，所述中间服务器接收到所述测试数据后发送确认信息至所述智能传感器，到所述智能传感器接收所述确认信息后结束计时所经过的时长，将所述往返时长称为发送时延，获取其中最小发送时延和所述最小发送时延对应的中间服务器的服务器ID，将所述智能传感器的传感器ID、所述最小发送时延和所述服务器ID发送到第一存储模块，由第一存储模块关联存储；步骤S2、所述智能传感器发送数据前从所述第一存储模块中查询发送时延最小的中间服务器作为目标服务器，若发送时延最小的中间服务器有多个，则从多个发送时延最小的中间服务器中任意选择一个中间服务器作为目标服务器，所述智能传感器给要发送的数据添加操作标识，所述操作标识包括存储操作和发送操作，之后持续的将数据发送到所述目标服务器；步骤S3、所述目标服务器接收到所述智能传感器发送的所述数据后，对每个收到的所述数据，根据所述操作标识判断执行存储操作还是发送操作，所述存储操作是指将所述数据存储在所述目标服务器的存储区，所述发送操作是指将所述数据发送到所述远程服务器；步骤S4、所述远程服务器接收并存储所述数据，设置数据访问接口，用户智能终端通过所述数据访问接口访问所述数据，所述远程服务器还对所述用户智能终端设置对应的访问权限，在接收到所述用户智能终端的访问请求后，根据所述访问权限向所述用户智能终端发送对应的数据。作为本发明的一种优选技术方案，其特征在于，在所述步骤S2中，在持续的将数据发送到所述目标服务器的过程中，还执行如下步骤：所述智能传感器每发送一次数据，获取对应的发送时延，若所述发送时延大于预设第一时长，所述智能传感器再次向各所述中间服务器发送测试数据，获取所述智能传感器和各所述中间服务器的新的发送时延，获取新的最小发送时延和新的所述最小发送时延对应的中间服务器的服务器ID，将新的所述最小发送时延和所述服务器ID更新到所述第一存储模块中，在下一次发送数据时，从所述第一存储模块中选择发送时延最小的中间服务器作为新的目标服务器，之后向新的所述目标服务器发送数据。作为本发明的一种优选技术方案，其特征在于，在所述步骤S3中，判断执行存储操作还是发送操作后，执行如下步骤：若判断结果为执行存储操作，先将所述数据存储在所述目标服务器的缓存区，判断所述存储区的剩余存储空间的大小，若所述剩余存储空间大于等于预设阈值，将所述数据存储在所述目标服务器的存储区，之后清空缓存区，还获取所述数据的存储信息，所述存储信息包括数据ID、数据生成时间、传感器ID和服务器ID，将所述存储信息存储在第二存储模块中，若所述剩余存储空间小于所述预设阈值，将所述目标服务器的所述存储区中的所有存储区数据发送到所述远程服务器，之后将所述存储区数据删除，还通知所述第二存储模块，将所述存储区数据对应的所述存储信息删除，再将所述缓存区存储的所述数据存储到所述存储区，之后清空所述缓存区，若判断结果为执行发送操作，将所述数据发送到远程服务器。作为本发明的一种优选技术方案，其特征在于，将所述数据发送到远程服务器的过程，包括如下步骤：提前将所有所述中间服务器分组，从分为同一组的所有所述中间服务器中任意选择一个作为代理服务器，同一组中的其他所述中间服务器在执行发送操作时，获取自身所在分组的所述代理服务器，将要发送的数据发送到所述代理服务器，由所述代理服务器将要发送的数据转发到所述远程服务器，所述代理服务器被选定后，每次转发数据后判断是否达到预设条件，若达到所述预定条件，从分为同一组的所有所述中间服务器中再选择一个作为代理服务器，若没有达到所述预设条件，当前的所述代理服务器继续为分为同一组的其他所述中间服务器转发数据。作为本发明的一种优选技术方案，其特征在于，从分为同一组的所有所述中间服务器中再选择一个作为代理服务器的过程，包括如下步骤：在上一个所述代理服务器开始工作后，每隔预设周期，统计被分为同一组的其他各所述中间服务器收集的数据量，直到上一个所述代理服务器结束工作后，生成多个中间服务器的统计收集数据量的柱状图，所述柱状图以时间为横坐标，以数据量为纵坐标，以所述预设周期为一个统计单位，之后将各所述中间服务器的柱状图拟合为一条曲线，计算所述曲线、所述横坐标和所述纵坐标之间的区域的面积获取到各所述中间服务器在上一个所述代理服务器工作期间的评价值，比较所有所述中间服务器的所述评价值，找到最小评价值对应的中间服务器，将所述最小评价值对应的所述中间服务器作为下一个代理服务器。作为本发明的一种优选技术方案，其特征在于，在所述步骤S4中，向所述用户智能终端发送对应的数据的过程，包括如下步骤：所述远程服务器根据所述访问请求，判断所述访问请求的数据是否存储在所述远程服务器的存储区中，是的情况下，将所述访问请求的数据发送到所述用户智能终端，否的情况下，所述远程服务器从第二存储模块查询所述访问请求的数据对应的服务器ID，根据所述服务器ID获取对应的中间服务器，之后向所述中间服务器发送数据请求，所述中间服务器根据所述数据请求将对应的数据发送到所述远程服务器。作为本发明的一种优选技术方案，其特征在于，所述中间服务器根据所述数据请求将对应的数据发送到所述远程服务器后，还执行如下步骤：所述中间服务器将发送到所述远程服务器的所述数据从对应的所述存储区中删除，所述中间服务器还通知所述第二存储模块将所述数据的所述存储信息删除。本发明还提供一种泛在电力物联网的数据共享管理系统，包括如下的模块：智能传感器，用于发送测试数据到各所述中间服务器，获取所述智能传感器和各所述中间服务器发送数据的往返时长,所述往返时长为从所述智能传感器发送所述测试数据到所述中间服务器时开始计时，所述中间服务器接收到所述测试数据后发送确认信息至所述智能传感器，到所述智能传感器接收所述确认信息后结束计时所经过的时长，将所述往返时长称为发送时延，获取其中最小发送时延和所述最小发送时延对应的中间服务器的服务器ID，将所述智能传感器的传感器ID、所述最小发送时延和所述服务器ID发送到第一存储模块，由第一存储模块关联的存储；还用于在发送数据前从所述第一存储模块中查询发送时延最小的中间服务器作为目标服务器，若发送时延最小的中间服务器有多个，则从多个发送时延最小的中间服务器中任意选择一个中间服务器作为目标服务器，所述智能传感器给要发送的数据添加操作标识，所述操作标识包括存储操作和发送操作，之后持续的将数据发送到所述目标服务器；目标服务器，用于接收到所述智能传感器发送的所述数据，之后对每个收到的所述数据，根据所述操作标识判断执行存储操作还是发送操作，所述存储操作是指将所述数据存储在所述目标服务器的存储区，所述发送操作是指将所述数据发送到所述远程服务器；远程服务器，用于接收并存储所述数据，设置数据访问接口，用户智能终端通过所述数据访问接口访问所述数据，所述远程服务器还对所述用户智能终端设置对应的访问权限，在接收到所述用户智能终端的访问请求后，根据所述访问权限向所述用户智能终端发送对应的数据。与现有技术相比，本发明的有益效果至少如下所述：在本发明中，在智能传感器和远程服务器之间设置多个中间服务器，获取智能传感器和各中间服务器发送数据的往返时长，查询发送时延最小的中间服务器作为目标服务器，智能传感器给要发送的数据添加操作标识后发送到目标服务器，目标服务器对每个收到的数据，根据操作标识判断执行存储操作还是发送操作，远程服务器接收并存储数据后，设置数据访问接口，用户智能终端通过数据访问接口访问数据，远程服务器还对用户智能终端设置对应的访问权限，在接收到用户智能终端的访问请求后，根据访问权限向用户智能终端发送对应的数据。本发明能够提高收集数据的效率。附图说明为了更清楚地说明本发明的技术方案，下面将对描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图；图1为本发明的一种基于泛在电力物联网的数据共享管理方法的步骤流程图；图2为本发明的一种基于泛在电力物联网的数据共享管理系统的组成结构图；图2中所示：101、智能传感器；102、目标服务器；103、远程服务器。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。可以理解，本申请所使用的术语“第一”、“第二”等可在本文中用于描述各种元件，但除非特别说明，这些元件不受这些术语限制。这些术语仅用于将第一个元件与另一个元件区分。举例来说，在不脱离本申请的范围的情况下，可以将第一xx脚本称为第二xx脚本，且类似地，可将第二xx脚本称为第一xx脚本。本发明提供了一种基于泛在电力物联网的数据共享管理方法，主要通过执行如下的步骤过程进行实现：步骤S1、在智能传感器和远程服务器之间设置多个中间服务器，智能传感器发送测试数据到各中间服务器，获取智能传感器和各中间服务器发送数据的往返时长,往返时长为从智能传感器发送测试数据到中间服务器时开始计时，中间服务器接收到测试数据后发送确认信息至智能传感器，到智能传感器接收确认信息后结束计时所经过的时长，将往返时长称为发送时延，获取其中最小发送时延和最小发送时延对应的中间服务器的服务器ID，将智能传感器的传感器ID、最小发送时延和服务器ID发送到第一存储模块，由第一存储模块关联存储。具体的，直接将智能传感器101和远程服务器103连接收集智能传感器101的数据，由于智能传感器101的数量非常多，远程服务器103和智能传感器101直接通信会大大增加远程服务器103的通信压力，因此在智能传感器101和远程服务器103之间设置多个中间服务器，先由中间服务器收集智能传感器101的数据，再由中间服务器将数据发送到远程服务器103，达到减轻远程服务器103的通信压力，智能传感器101在传输数据到中间服务器前先发送测试数据到各中间服务器，用来获取和各中间服务器通信的往返时长，根据往返时长选择通信时间最短的中间服务器，往返时长是指从智能传感器101发送测试数据到中间服务器时开始计时，中间服务器接收到测试数据后发送确认信息至智能传感器101，到智能传感器101接收确认信息后结束计时所经过的时长，将往返时长成为发送时延，获取其中的最小发送时延和最小发送时延对应的中间服务器的服务器ID，将智能传感器101的传感器ID、最小发送时延和对应的服务器ID发送到第一存储模块，由第一存储模块关联的存储，第一存储模块存储所有智能传感器101对应的最小发送时延和最小发送时延对应的中间服务器，为后续智能传感器101发送数据时查询使用。步骤S2、智能传感器发送数据前从第一存储模块中查询发送时延最小的中间服务器作为目标服务器，若发送时延最小的中间服务器有多个，则从多个发送时延最小的中间服务器中任意选择一个中间服务器作为目标服务器，智能传感器给要发送的数据添加操作标识，操作标识包括存储操作和发送操作，之后持续的将数据发送到目标服务器。具体的，智能传感器101为了更快的将数据发送到中间服务器，从第一存储模块中查询发送时延最小的中间服务器作为目标服务器102，若发送时延最小的中间服务器有多个，从多个中任意选择一个作为目标服务器102，由于数据的不同可能有些数据需要及时的发送到远程服务器103被实时调用，而有些数据不需要实时调用所以不用实时发送到远程服务器103，所以有些数据发送到目标服务器102后需要立即由目标服务器102转发到远程服务器103，而有些数据可以暂时存储在目标服务器102，以后按需发送到远程服务器103，所以给要发送的数据添加操作标识，操作标识包括存储操作和发送操作，之后持续的将数据发送到选择的目标服务器102，发送时延小说明数据传输速度快，通过每个智能传感器101发送数据时都选择发送时延最小的中间服务器作为目标服务器102，从而在整体上加快数据传输的速度。步骤S3、目标服务器接收到智能传感器发送的数据后，对每个收到的数据，根据操作标识判断执行存储操作还是发送操作，存储操作是指将数据存储在目标服务器的存储区，发送操作是指将数据发送到远程服务器。具体的，虽然在智能传感器101和远程服务器103中间设置了中间服务器，但是由于智能传感器101的数量有很多，同一个目标服务器102可能要和非常多的智能传感器101进行通信，而智能传感器101可能会不间断的收集数据，数据量是非常大的，中间服务器接收到数据后若按接收顺序将数据发送到远程服务器103会使一些需要实时发送到远程服务器103的数据的传输变得较慢，为了提高数据传输的效率，给数据添加操作标识，目标服务器102接收到智能传感器101发送的数据后，根据数据对应的操作标识判断执行存储操作还是发送操作，若判断结果为存储操作，说明数据不需要实时发送到远程服务器103，则将数据存储在目标服务器102的存储区，若判断结果为发送操作，说明数据需要实时发送到远程服务器103，目标服务器102将标识为发送操作的数据实时发送到远程服务器103，通过这样可以使需要实时传输到远程服务器103的数据及时的得到传输。步骤S4、远程服务器接收并存储数据，设置数据访问接口，用户智能终端通过数据访问接口访问数据，远程服务器还对用户智能终端设置对应的访问权限，在接收到用户智能终端的访问请求后，根据访问权限向用户智能终端发送对应的数据。具体的，远程服务器103接收到数据后将数据存储起来，之后可以对数据进行分析整理，远程服务器103设置数据访问接口，为其他用户提供数据共享服务，为了使数据被安全的共享，用户若想访问数据，需要先向远程服务器103发送访问请求，访问请求需要包括自身的身份信息，远程服务器103接收到访问请求后获取用户的身份信息，验证用户的合法性，若为合法用户则设置对应的访问权限，比如某统计部门想要访问A城市居民的电力使用数据，用来分析用户的电力使用情况，则统计部门发送自身的身份信息证明自己是统计部门，远程服务器103通过部门查询网站验证该统计部门的身份信息的真假，若为真说明为合法用户，根据需求得知统计部门要获取A城市居民的电力使用数据，则只对该统计部门设置A城市的电力使用数据的权限，通过这样可以有效的关联共享的数据，使数据被安全的共享使用。进一步的，在步骤S2中，在持续的将数据发送到目标服务器102的过程中，还执行如下步骤：智能传感器101每发送一次数据，获取对应的发送时延，若发送时延大于预设第一时长，智能传感器101再次向各中间服务器发送测试数据，获取智能传感器101和各中间服务器的新的发送时延，获取新的最小发送时延和新的最小发送时延对应的中间服务器的服务器ID，将新的最小发送时延和服务器ID更新到第一存储模块中，在下一次发送数据时，从第一存储模块中选择发送时延最小的中间服务器作为新的目标服务器102，之后向新的目标服务器102发送数据。具体的，为了使数据的传输一直保持高效率的传输，智能传感器101每发送一次数据都获取发送数据的发送时延，若发送时延大于预设的第一时长时，说明智能传感器101和目标服务器102的通信速度变低了，有可能是和同时同一目标服务器102通信的智能传感器101的数量变多导致目标服务器102的通信压力变大，从而降低了通信的速度，所以此时智能传感器101再次向各中间服务器发送测试数据，获取智能传感器101和各中间服务器的最新的发送时延，同时将第一存储模块中之前存储的传感器ID和旧的最小发送时延和对应的服务器ID更新为最新的最小发送时延和对应的服务器ID，在下一次发送数据时，则根据新的发送时延选择发送时延最小的中间服务器作为新的目标服务器102，之后将数据发送到新的目标服务器102，通过上述方案使智能传感器101和目标服务器102的通信一直保持在最优的状态。进一步的，在步骤S3中，判断执行存储操作还是发送操作后，执行如下步骤：若判断结果为执行存储操作，先将数据存储在目标服务器102的缓存区，判断存储区的剩余存储空间的大小，若剩余存储空间大于等于预设阈值，将数据存储在目标服务器102的存储区，之后清空缓存区，还获取数据的存储信息，存储信息包括数据ID、数据生成时间、传感器ID和服务器ID，将存储信息存储在第二存储模块中，若剩余存储空间小于预设阈值，将目标服务器102的存储区中的所有存储区数据发送到远程服务器103，之后将存储区数据删除，还通知第二存储模块，将存储区数据对应的存储信息删除，再将缓存区存储的数据存储到存储区，之后清空缓存区，若判断结果为执行发送操作，将数据发送到远程服务器103。具体的，中间服务器的存储区一般不会很大，在持续的保存了一些数据后，会出现存储区空间不足的情况，为了使中间服务器能够持续的稳定工作，在根据操作标识判断结果为存储操作时，现将数据暂时存储在缓存区，缓存区用来临时存放刚接收到的数据，需要向存储区存储数据，存储数据前先获取目标服务器102的存储区的剩余存储空间的大小，若剩余存储空间大于等于预设阈值，将缓存区的数据存储在存储区，清空缓存区，获取数据的存储信息，将存储信息存储在第二存储模块中，其中存储信息包括数据ID、数据生成时间、传感器ID和服务器ID，数据生成时间用来记录数据的生成时间，传感器ID用来记录数据是由谁生成的，服务器ID用来记录数据保存在了哪个中间服务器，方便后续需要获取数据时查找数据，比如后续要查找A公司某个月或某一天的用电使用情况，查找到A公司的传感器ID后就可以根据存储信息获取所要查找数据的存储位置，再根据数据生成时间获取对应时间的数据，若剩余存储空间小于预设阈值，则将存储区存储的数据发送到远程服务器103，之后还将存储区的数据清空，同时还通知第二存储空间删除对应数据的存储信息，再将存储在缓存区的数据存储在存储区，之后清空缓存区，通过这样可以保证中间服务器能够保持持续稳定的工作，不会因存储区存储数据太多导致服务器出现故障或使数据丢失。进一步的，将数据发送到远程服务器103的过程，包括如下步骤：提前将所有中间服务器分组，从分为同一组的所有中间服务器中任意选择一个作为代理服务器，同一组中的其他中间服务器在执行发送操作时，获取自身所在分组的代理服务器，将要发送的数据发送到代理服务器，由代理服务器将要发送的数据转发到远程服务器103，代理服务器被选定后，每次转发数据后判断是否达到预设条件，若达到预定条件，从分为同一组的所有中间服务器中再选择一个作为代理服务器，若没有达到预设条件，当前的代理服务器继续为分为同一组的其他中间服务器转发数据。具体的，由于智能传感器101的数量较多，同理需要的中间服务器的数量也相对较多，将多个中间服务器同时和远程服务器103进行直接通信，同样会增加远程服务器103的通信压力，由此将多个中间服务器分组，从分为同一组的所有中间服务器中任意选择一个作为代理服务器，由代理服务器作为中转站连接同一组的其他中间服务器和远程服务器103，中间服务器在需要向远程服务器103发送数据时，获取所在组的代理服务器，将要发送的数据发送到代理服务器，代理服务器接收到数据后，将数据发送到远程服务器103，因此代理服务器的通信负载会比较大，如果通信负载一直处在压力较大的状态下，代理服务器容易出现故障，所以预先设置条件，比如预设一个时长为1小时，代理服务器被选定后，转发数据后判断是否达到预设条件，若达到了预设条件，比如已经经过了1小时，则切换同一组中的其他中间服务器作为代理服务器，若没有达到预设条件，继续用当前的代理服务器为其他中间服务器转发数据，通过上述方案可以减轻远程服务器103的通信压力，从而使数据更高效的传输。进一步的，从分为同一组的所有中间服务器中再选择一个作为代理服务器的过程，包括如下步骤：在上一个代理服务器开始工作后，每隔预设周期，统计被分为同一组的其他各中间服务器收集的数据量，直到上一个代理服务器结束工作后，生成多个中间服务器的统计收集数据量的柱状图，柱状图以时间为横坐标，以数据量为纵坐标，以预设周期为一个统计单位，之后将各中间服务器的柱状图拟合为一条曲线，计算曲线、横坐标和纵坐标之间的区域的面积获取到各中间服务器在上一个代理服务器工作期间的评价值，比较所有中间服务器的评价值，找到最小评价值对应的中间服务器，将最小评价值对应的中间服务器作为下一个代理服务器。具体的，为了选出能够更高效转发数据的代理服务器，在第一次选择代理服务器后，每隔预设周期，预设周期可以随着切换代理服务器的时间设定，假设每隔1小时切换一次代理服务器，则预设周期可以设定为1分钟、3分钟或5分钟，统计被分为同一组的其他中间服务器收集的数据量，上一个代理服务器结束工作后，也就是达到切换代理服务器的预设条件后，生成多个中间服务器收集数据量的柱状图，柱状图的横坐标为时间，统计单位为预设周期，纵坐标为预设周期内中间服务器收集的数据量，通过将柱状图拟合为一条曲线，计算曲线和横坐标和纵坐标之间形成的区域的面积并将其作为各中间服务器的评价值，其中区域的面积和中间服务器手的数据量的大小成正比，面积越小对应的中间服务器的通信压力越小，所以之后比较各个中间服务器的评价值，获取其中最小评价值对应的中间服务器，将最小评价值对应的中间服务器作为下一个代理服务器，可以更高效的转发其他中间服务器的数据。需要注意的是，被分为同一组的中间服务器轮流作为代理服务器，所以在统计被分为同一组的其他各中间服务器的评价值时，若在当前轮次中已经有中间服务器做过代理服务器，则不统计对应的评价值，通过这样达到使被分为同一组的中间服务器轮流作为代理服务器的目的。进一步的，其特征在于，在步骤S4中，向用户智能终端发送对应的数据的过程，包括如下步骤：远程服务器103根据访问请求，判断访问请求的数据是否存储在远程服务器103的存储区中，是的情况下，将访问请求的数据发送到用户智能终端，否的情况下，远程服务器103从第二存储模块查询访问请求的数据对应的服务器ID，根据服务器ID获取对应的中间服务器，之后向中间服务器发送数据请求，中间服务器根据数据请求将对应的数据发送到远程服务器103。具体的，由于远程服务器103并没有存储所有的数据，远程服务器103接收到访问请求后，根据访问请求判断访问请求的数据是否存在远程服务器103的存储区中，若是则将访问请求的数据发送到用户智能终端，若否，说明访问请求的数据存储在中间服务器的存储区中，此时从第二存储模块中查询数据存储的服务器ID，根据服务器ID获取对应的中间服务器，之后向中间服务器发送数据请求，中间服务器接收到数据请求后将对应的数据发送到远程服务器103，通过上述方案使远程服务器103快速的获取到用户需要的数据从而快速的发送给用户。进一步的，中间服务器根据数据请求将对应的数据发送到远程服务器103后，还执行如下步骤：中间服务器将发送到远程服务器103的数据从对应的存储区中删除，中间服务器还通知第二存储模块将数据的存储信息删除。具体的，中间服务器将数据发送到远程服务器103后，远程服务器103就会将数据存储在远程服务器103的存储区中，此时为了减少数据的重复存储，中间服务器将自身存储区中对应的数据删除，还通知第二存储模块将数据对应的存储信息删除。根据本发明实施例的另一个方面，参考如图2所示，还提供一种基于泛在电力物联网的数据共享管理系统，包括智能传感器101、目标服务器102和远程服务器103，用来实现如以上内容所描述的一种基于泛在电力物联网的数据共享管理方法，各个模块的具体功能如下：智能传感器101，用于发送测试数据到各中间服务器，获取智能传感器101和各中间服务器发送数据的往返时长,往返时长为从智能传感器101发送测试数据到中间服务器时开始计时，中间服务器接收到测试数据后发送确认信息至智能传感器101，到智能传感器101接收确认信息后结束计时所经过的时长，将往返时长称为发送时延，获取其中最小发送时延和最小发送时延对应的中间服务器的服务器ID，将智能传感器101的传感器ID、最小发送时延和服务器ID发送到第一存储模块，由第一存储模块关联的存储；还用于在发送数据前从第一存储模块中查询发送时延最小的中间服务器作为目标服务器102，若发送时延最小的中间服务器有多个，则从多个发送时延最小的中间服务器中任意选择一个中间服务器作为目标服务器102，智能传感器101给要发送的数据添加操作标识，操作标识包括存储操作和发送操作，之后持续的将数据发送到目标服务器102；目标服务器102，用于接收到智能传感器101发送的数据，之后对每个收到的数据，根据操作标识判断执行存储操作还是发送操作，存储操作是指将数据存储在目标服务器102的存储区，发送操作是指将数据发送到远程服务器103；远程服务器103，用于接收并存储数据，设置数据访问接口，用户智能终端通过数据访问接口访问数据，远程服务器103还对用户智能终端设置对应的访问权限，在接收到用户智能终端的访问请求后，根据访问权限向用户智能终端发送对应的数据。综上所述，本发明的一种基于泛在电力物联网的数据共享管理方法及系统，方法包括在智能传感器101和远程服务器103之间设置多个中间服务器，获取智能传感器101和各中间服务器发送数据的往返时长，查询发送时延最小的中间服务器作为目标服务器102，智能传感器101给要发送的数据添加操作标识后发送到目标服务器102，目标服务器102对每个收到的数据，根据操作标识判断执行存储操作还是发送操作，远程服务器103接收并存储数据后，设置数据访问接口，用户智能终端通过数据访问接口访问数据，远程服务器103还对用户智能终端设置对应的访问权限，在接收到用户智能终端的访问请求后，根据访问权限向用户智能终端发送对应的数据。本发明能够提高收集数据的效率。应该理解的是，虽然本发明各实施例的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，各实施例中的至少一部分步骤可以包括多个子步骤或者多个阶段，这些子步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些子步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤的子步骤或者阶段的至少一部分轮流或者交替地执行。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，上述的程序可存储于一个非易失性计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、存储、数据库或其它介质的任何引用，均可包括非易失性和/或易失性存储器。非易失性存储器可包括只读存储器、可编程ROM、电可编程ROM、电可擦除可编程ROM或闪存。易失性存储器可包括随机存取存储器或者外部高速缓冲存储器。作为说明而非局限，RAM以多种形式可得，诸如静态RAM、动态RAM、同步DRAM、双数据率SDRAM、增强型SDRAM、同步链路DRAM、存储器总线直接RAM、直接存储器总线动态RAM、以及存储器总线动态RAM等。以上上述的实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上上述的实施例仅表达了本发明的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对本发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干变形和改进，这些都属于本发明的保护范围。因此，本发明专利的保护范围应以所附权利要求为准。以上上述的仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明的保护范围之内。
