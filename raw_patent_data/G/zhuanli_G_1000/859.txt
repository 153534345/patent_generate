标题title
船用锂离子动力电池荷电状态估计方法、装置及电子设备
摘要abst
本发明提供一种船用锂离子动力电池荷电状态估计方法、装置及电子设备，该方法包括：获取船用锂离子动力电池的电压时序数据、电流时序数据和温度时序数据；对时序数据进行特征提取，得到对应的输入特征；进行特征融合，得到融合特征；将融合特征输入至训练好的模块神经网络中，得到第一荷电状态估计值；基于船用锂离子动力电池在目标时间段内的充放电电流、目标时间段开始时刻的荷电状态，以及电池容量，确定第二荷电状态估计值；基于第一荷电状态估计值和第二荷电状态估计值，确定最终荷电状态估计值。本发明通过将第一荷电状态估计值与第二荷电状态估计值进行融合，解决现有的电池荷电状态估计算法的准确性和可靠性不高的问题。
权利要求书clms
1.一种船用锂离子动力电池荷电状态估计方法，其特征在于，包括：获取船用锂离子动力电池的电压时序数据、电流时序数据和温度时序数据；对所述电压时序数据、所述电流时序数据和所述温度时序数据进行特征提取，得到对应的第一输入特征、第二输入特征和第三输入特征；将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征；将所述融合特征输入至训练好的模块神经网络中，得到第一荷电状态估计值；基于所述船用锂离子动力电池在目标时间段内的充放电电流、目标时间段开始时刻的荷电状态，以及电池容量，确定第二荷电状态估计值；基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值；所述将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征，包括：将所述第一输入特征与所述第二输入特征进行残差运算，得到第一残差运算结果；将所述第一残差运算结果输入至第一Non-local注意力模块，得到第一注意力值和第二注意力值；将所述第一输入特征与所述第一注意力值进行矩阵点乘操作，得到第一点乘结果，以及将所述第二输入特征与所述第二注意力值进行矩阵点乘操作，得到第二点乘结果；将所述第一点乘结果与所述第二点乘结果进行残差运算，得到第二残差运算结果；将所述第二残差运算结果输入至第二Non-local注意力模块，得到第三注意力值和第四注意力值；将所述第三输入特征与所述第三注意力值进行矩阵点乘操作，得到第三点乘结果，以及将所述第三输入特征与所述第四注意力值进行矩阵点乘操作，得到第四点乘结果；将所述第三点乘结果与所述第四点乘结果进行残差运算，得到所述融合特征。2.根据权利要求1所述的船用锂离子动力电池荷电状态估计方法，其特征在于，所述第一Non-local注意力模块与所述第二Non-local注意力模块的网络结构相同，且均用于：将输入的残差运算结果进行卷积处理，以压缩通道数，得到对应的θ特征、φ特征和g特征；合并所述θ特征、所述φ特征和所述g特征中除通道数外的维度后，对所述θ特征和所述φ特征进行矩阵点乘操作，得到类协方差矩阵；基于所述类协方差矩阵，确定自注意力系数；基于所述自注意力系数和所述g特征，得到对应的注意力值。3.根据权利要求2所述的船用锂离子动力电池荷电状态估计方法，其特征在于，所述基于所述类协方差矩阵，确定自注意力系数，包括：对所述类协方差矩阵对应的自相关特征进行Softmax操作，得到值域为0~1的权重，将所述权重确定为自注意力系数。4.根据权利要求2所述的船用锂离子动力电池荷电状态估计方法，其特征在于，所述基于所述自注意力系数和所述g特征，得到对应的注意力值，包括：将所述自注意力系数与所述g特征相乘，得到特征矩阵乘积结果；将所述特征矩阵乘积结果经过卷积处理，得到卷积结果；将所述卷积结果与输入的残差运算结果做残差运算，以进行特征融合，得到对应的注意力值。5.根据权利要求1所述的船用锂离子动力电池荷电状态估计方法，其特征在于，所述第二荷电状态估计值，对应的计算公式为：其中，表示所述第二荷电状态估计值，/＞表示目标时间段/＞内的充放电电流，/＞表示/＞时刻电池荷电状态，/＞表示所述电池容量。6.根据权利要求1-5任一项所述的船用锂离子动力电池荷电状态估计方法，其特征在于，所述基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值，包括：确定所述第一荷电状态估计值与所述第二荷电状态估计值的偏差；基于所述偏差对所述第一荷电状态估计值与所述第二荷电状态估计值进行误差修正与融合，得到所述船用锂离子动力电池的最终荷电状态估计值。7.一种船用锂离子动力电池荷电状态估计装置，其特征在于，包括：数据获取模块，用于获取船用锂离子动力电池的电压时序数据、电流时序数据和温度时序数据；特征提取模块，用于对所述电压时序数据、所述电流时序数据和所述温度时序数据进行特征提取，得到对应的第一输入特征、第二输入特征和第三输入特征；特征融合模块，用于将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征；第一状态估计模块，用于将所述融合特征输入至训练好的模块神经网络中，得到第一荷电状态估计值；第二状态估计模块，用于基于所述船用锂离子动力电池在目标时间段内的充放电电流、目标时间段开始时刻的荷电状态，以及电池容量，确定第二荷电状态估计值；第三状态估计模块，用于基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值；所述将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征，包括：将所述第一输入特征与所述第二输入特征进行残差运算，得到第一残差运算结果；将所述第一残差运算结果输入至第一Non-local注意力模块，得到第一注意力值和第二注意力值；将所述第一输入特征与所述第一注意力值进行矩阵点乘操作，得到第一点乘结果，以及将所述第二输入特征与所述第二注意力值进行矩阵点乘操作，得到第二点乘结果；将所述第一点乘结果与所述第二点乘结果进行残差运算，得到第二残差运算结果；将所述第二残差运算结果输入至第二Non-local注意力模块，得到第三注意力值和第四注意力值；将所述第三输入特征与所述第三注意力值进行矩阵点乘操作，得到第三点乘结果，以及将所述第三输入特征与所述第四注意力值进行矩阵点乘操作，得到第四点乘结果；将所述第三点乘结果与所述第四点乘结果进行残差运算，得到所述融合特征。8.一种电子设备，其特征在于，包括存储器和处理器，其中，所述存储器，用于存储程序；所述处理器，与所述存储器耦合，用于执行所述存储器中存储的所述程序，以实现如权利要求1至6中任意一项所述的船用锂离子动力电池荷电状态估计方法中的步骤。9.一种非暂态计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至6任一项所述的船用锂离子动力电池荷电状态估计方法。
说明书desc
技术领域本发明涉及锂离子动力电池技术领域，具体涉及一种船用锂离子动力电池荷电状态估计方法、装置及电子设备。背景技术锂离子动力电池是电动船的关键部件，决定着整船系统安全性能，其健康状况和管理水平关系到整船的使用效率和安全运行。电池荷电状态的检测与估计是电池管理安全可靠性的基础。精确的电池荷电状态估计可以平衡单体电池间的差异、优化充放电策略、防止过热及过充和过放，还可以使电池得到充分合理的利用，延长电池使用寿命，因此电池荷电状态估计对于电池和整个船舶系统管理都有着重要的意义。但由于电池荷电状态不能直接测量，并且电池系统在运行时电池荷电状态呈现出很强的非线性变化，造成现有的电池荷电状态估计算法的准确性和可靠性不高。发明内容有鉴于此，有必要提供一种船用锂离子动力电池荷电状态估计方法、装置及电子设备，用以解决现有的电池荷电状态估计算法的准确性和可靠性不高的技术问题。为了解决上述问题，本发明提供了一种船用锂离子动力电池荷电状态估计方法，包括：获取船用锂离子动力电池的电压时序数据、电流时序数据和温度时序数据；对所述电压时序数据、所述电流时序数据和所述温度时序数据进行特征提取，得到对应的第一输入特征、第二输入特征和第三输入特征；将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征；将所述融合特征输入至训练好的模块神经网络中，得到第一荷电状态估计值；基于所述船用锂离子动力电池在目标时间段内的充放电电流、目标时间段开始时刻的荷电状态，以及电池容量，确定第二荷电状态估计值；基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值；所述将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征，包括：将所述第一输入特征与所述第二输入特征进行残差运算，得到第一残差运算结果；将所述第一残差运算结果输入至第一Non-local注意力模块，得到第一注意力值和第二注意力值；将所述第一输入特征与所述第一注意力值进行矩阵点乘操作，得到第一点乘结果，以及将所述第二输入特征与所述第二注意力值进行矩阵点乘操作，得到第二点乘结果；将所述第一点乘结果与所述第二点乘结果进行残差运算，得到第二残差运算结果；将所述第二残差运算结果输入至第二Non-local注意力模块，得到第三注意力值和第四注意力值；将所述第三输入特征与所述第三注意力值进行矩阵点乘操作，得到第三点乘结果，以及将所述第三输入特征与所述第四注意力值进行矩阵点乘操作，得到第四点乘结果；将所述第三点乘结果与所述第四点乘结果进行残差运算，得到所述融合特征。进一步地，所述第一Non-local注意力模块与所述第二Non-local注意力模块的网络结构相同，且均用于：将输入的残差运算结果进行卷积处理，以压缩通道数，得到对应的θ特征、φ特征和g特征；合并所述θ特征、所述φ特征和所述g特征中除通道数外的维度后，对所述θ特征和所述φ特征进行矩阵点乘操作，得到类协方差矩阵；基于所述类协方差矩阵，确定自注意力系数；基于所述自注意力系数和所述g特征，得到对应的注意力值。进一步地，所述基于所述类协方差矩阵，确定自注意力系数，包括：对所述类协方差矩阵对应的自相关特征进行Softmax操作，得到值域为0~1的权重，将所述权重确定为自注意力系数。进一步地，所述基于所述自注意力系数和所述g特征，得到对应的注意力值，包括：将所述自注意力系数与所述g特征相乘，得到特征矩阵乘积结果；将所述特征矩阵乘积结果经过卷积处理，得到卷积结果；将所述卷积结果与输入的残差运算结果做残差运算，以进行特征融合，得到对应的注意力值。进一步地，所述第二荷电状态估计值，对应的计算公式为：其中，表示所述第二荷电状态估计值，/＞表示目标时间段/＞内的充放电电流，/＞表示/＞时刻电池荷电状态，/＞表示所述电池容量。进一步地，所述基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值，包括：确定所述第一荷电状态估计值与所述第二荷电状态估计值的偏差；基于所述偏差对所述第一荷电状态估计值与所述第二荷电状态估计值进行误差修正与融合，得到所述船用锂离子动力电池的最终荷电状态估计值。本发明还提供一种船用锂离子动力电池荷电状态估计装置，包括：数据获取模块，用于获取船用锂离子动力电池的电压时序数据、电流时序数据和温度时序数据；特征提取模块，用于对所述电压时序数据、所述电流时序数据和所述温度时序数据进行特征提取，得到对应的第一输入特征、第二输入特征和第三输入特征；特征融合模块，用于将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征；第一状态估计模块，用于将所述融合特征输入至训练好的模块神经网络中，得到第一荷电状态估计值；第二状态估计模块，用于基于所述船用锂离子动力电池在目标时间段内的充放电电流、目标时间段开始时刻的荷电状态，以及电池容量，确定第二荷电状态估计值；第三状态估计模块，用于基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值；所述将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征，包括：将所述第一输入特征与所述第二输入特征进行残差运算，得到第一残差运算结果；将所述第一残差运算结果输入至第一Non-local注意力模块，得到第一注意力值和第二注意力值；将所述第一输入特征与所述第一注意力值进行矩阵点乘操作，得到第一点乘结果，以及将所述第二输入特征与所述第二注意力值进行矩阵点乘操作，得到第二点乘结果；将所述第一点乘结果与所述第二点乘结果进行残差运算，得到第二残差运算结果；将所述第二残差运算结果输入至第二Non-local注意力模块，得到第三注意力值和第四注意力值；将所述第三输入特征与所述第三注意力值进行矩阵点乘操作，得到第三点乘结果，以及将所述第三输入特征与所述第四注意力值进行矩阵点乘操作，得到第四点乘结果；将所述第三点乘结果与所述第四点乘结果进行残差运算，得到所述融合特征。本发明还提供一种电子设备，包括存储器和处理器，其中，所述存储器，用于存储程序；所述处理器，与所述存储器耦合，用于执行所述存储器中存储的所述程序，以实现如上述中任意一项所述的船用锂离子动力电池荷电状态估计方法中的步骤。本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现如上述任一项所述的船用锂离子动力电池荷电状态估计方法。采用上述实现方式的有益效果是：本发明提供的船用锂离子动力电池荷电状态估计方法、装置及电子设备，通过获取船用锂离子动力电池的电压时序数据、电流时序数据和温度时序数据；对所述电压时序数据、所述电流时序数据和所述温度时序数据进行特征提取，得到对应的第一输入特征、第二输入特征和第三输入特征；将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征；将所述融合特征输入至训练好的模块神经网络中，得到第一荷电状态估计值；基于所述船用锂离子动力电池在目标时间段内的充放电电流、目标时间段开始时刻的荷电状态，以及电池容量，确定第二荷电状态估计值；基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值。本发明提供的方法通过安时积分和模块神经网络分别进行荷电状态估计值求解，并计算第一荷电状态估计值与第二荷电状态估计值之间的差值后进行融合，再次提高了荷电状态估计值估计的准确性，降低过拟合风险、提高模型的鲁棒性、扩大模型的适用范围，解决现有的电池荷电状态估计算法的准确性和可靠性不高的技术问题。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明提供的船用锂离子动力电池荷电状态估计方法的一实施例的流程图；图2为本发明提供的Non-local注意力模块的结构示意图；图3为本发明提供的Non-local注意力模块的机制原理图；图4为本发明提供的模块神经网络的结构示意图；图5为本发明提供的船用锂离子动力电池荷电状态估计装置的一实施例的原理框图图6为本发明提供的电子设备的一个实施例结构示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整的描述。显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本申请实施例的描述中，除非另有说明， “多个”的含义是两个或两个以上。本发明实施例中术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或模块的过程、方法、装置、产品或设备不必限于清楚地列出的那些步骤或模块，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或模块。在本发明实施例中出现的对步骤进行的命名或者编号，并不意味着必须按照命名或者编号所指示的时间/逻辑先后顺序执行方法流程中的步骤，已经命名或者编号的流程步骤可以根据要实现的技术目的变更执行次序，只要能达到相同或者相似的技术效果即可。在本文中提及“实施例”意味着，结合实施例描述的特定特征、结构或特性可以包含在本发明的至少一个实施例中。在说明书中的各个位置出现该短语并不一定均是指相同的实施例，也不是与其他实施例互斥的独立的或备选的实施例。本领域技术人员显式地和隐式地理解的是，本文所描述的实施例可以与其他实施例相结合。本发明提供了一种船用锂离子动力电池荷电状态估计方法、装置及电子设备，以下分别进行说明。如图1所示，本发明提供一种船用锂离子动力电池荷电状态估计方法，包括：步骤110、获取船用锂离子动力电池的电压时序数据、电流时序数据和温度时序数据；步骤120、对所述电压时序数据、所述电流时序数据和所述温度时序数据进行特征提取，得到对应的第一输入特征、第二输入特征和第三输入特征；步骤130、将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征；步骤140、将所述融合特征输入至训练好的模块神经网络中，得到第一荷电状态估计值；步骤150、基于所述船用锂离子动力电池在目标时间段内的充放电电流、目标时间段开始时刻的荷电状态，以及电池容量，确定第二荷电状态估计值；步骤160、基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值。可以理解的是，本发明提供的方法先获取船用锂离子动力电池的电压时序数据、电流时序数据/＞、温度时序数据/＞，并采用CNN进行特征提取，得到第一输入特征/＞、第二输入特征/＞和第三输入特征/＞；再使用基于Non-local的注意力融合机制将第一输入特征/＞、第二输入特征/＞和第三输入特征/＞进行特征融合，得到融合后的特征/＞，即融合特征。在一些实施例中，所述将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征，包括：将所述第一输入特征与所述第二输入特征进行残差运算，得到第一残差运算结果；将所述第一残差运算结果输入至第一Non-local注意力模块，得到第一注意力值和第二注意力值；将所述第一输入特征与所述第一注意力值进行矩阵点乘操作，得到第一点乘结果，以及将所述第二输入特征与所述第二注意力值进行矩阵点乘操作，得到第二点乘结果；将所述第一点乘结果与所述第二点乘结果进行残差运算，得到第二残差运算结果；将所述第二残差运算结果输入至第二Non-local注意力模块，得到第三注意力值和第四注意力值；将所述第三输入特征与所述第三注意力值进行矩阵点乘操作，得到第三点乘结果，以及将所述第三输入特征与所述第四注意力值进行矩阵点乘操作，得到第四点乘结果；将所述第三点乘结果与所述第四点乘结果进行残差运算，得到所述融合特征。可以理解的是，Non-local注意力模块如图2所示：首先对输入特征X通过1×1×1卷积，来压缩通道数，然后得到、/＞、g特征；通过Reshape操作，强行合并上述的三个特征除通道数外的维度，然后对和/＞进行矩阵点乘操作，得到类似协方差矩阵的结果；然后对自相关特征进行Softmax操作，得到值域为的权重，此即为所需的自注意力的系数；最后将自注意力的系数，对应乘回特征矩阵g中，然后再通过1×1×1卷积，与原输入特征X做残差运算，获得Non-loca的输出。故从输入特征X到输出特征的变换过程用隐函数表示，记为：在一些实施例中，所述第一Non-local注意力模块与所述第二Non-local注意力模块的网络结构相同，且均用于：将输入的残差运算结果进行卷积处理，以压缩通道数，得到对应的θ特征、φ特征和g特征；合并所述θ特征、所述φ特征和所述g特征中除通道数外的维度后，对所述θ特征和所述φ特征进行矩阵点乘操作，得到类协方差矩阵；基于所述类协方差矩阵，确定自注意力系数；基于所述自注意力系数和所述g特征，得到对应的注意力值。可以理解的是，本发明提出了基于Non-local的注意力融合机制，实现了三个维度输入特征的融合。基于Non-local的注意力融合机制的原理图如图3所示，具体计算过程为：将第一输入特征和第二输入特征/＞进行残差运算，将运算后的结果输入至第一Non-local注意力模块中，得到第一注意力值/＞和第二注意力值数/＞，具体过程为：分别将第一输入特征和第一注意力值/＞进行矩阵点乘操作，第二输入特征/＞和第二注意力值数/＞进行矩阵点乘操作，将第一矩阵点乘操作后的结果/＞与第二矩阵点乘操作后的结果/＞进行残差运算，将残差运算的结果输入至第二Non-local注意力模块中，得到第三注意力值/＞和第四注意力值数/＞，具体过程为：所述第一Non-local注意力模块与第二Non-local注意力模块的结构完全一致。分别将第三输入特征与第三注意力值/＞、第四注意力值数/＞进行矩阵点乘操作，将第三矩阵点乘操作后的结果/＞与第四矩阵点乘操作后的结果/＞进行残差运算，得到融合后的特征/＞，具体过程为：在一些实施例中，所述基于所述类协方差矩阵，确定自注意力系数，包括：对所述类协方差矩阵对应的自相关特征进行Softmax操作，得到值域为0~1的权重，将所述权重确定为自注意力系数。在一些实施例中，所述基于所述自注意力系数和所述g特征，得到对应的注意力值，包括：将所述自注意力系数与所述g特征相乘，得到特征矩阵乘积结果；将所述特征矩阵乘积结果经过卷积处理，得到卷积结果；将所述卷积结果与输入的残差运算结果做残差运算，以进行特征融合，得到对应的注意力值。在一些实施例中，将融合后的特征输入至模块神经网络中，得到第一荷电状态估计估计值/＞，具体过程为：模块神经网络如图4所示：其中，q为神经元的个数，、/＞表示神经元的中心和半径，/＞为超球面的距离值，l为子网络层的数量，/＞表示综合层的权重，/＞表示第j个子网络层的输出，/＞为正实数。在一些实施例中，所述第二荷电状态估计值，对应的计算公式为：其中，表示所述第二荷电状态估计值，/＞表示目标时间段/＞内的充放电电流，/＞表示/＞时刻电池荷电状态，/＞表示所述电池容量。在一些实施例中，所述基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值，包括：确定所述第一荷电状态估计值与所述第二荷电状态估计值的偏差；基于所述偏差对所述第一荷电状态估计值与所述第二荷电状态估计值进行误差修正与融合，得到所述船用锂离子动力电池的最终荷电状态估计值。可以理解的是，本实施例中采用安时积分法得到船用锂离子动力电池得到第二荷电状态估计估计值，具体过程为：表示时间段/＞内的充放电电流，/＞表示/＞时刻电池荷电状态，/＞表示电池容量。计算第一荷电状态估计值和第二荷电状态估计值/＞的偏差，利用荷电状态估计偏差/＞、第一荷电状态估计值、第二荷电状态估计进行误差修正与融合，得到第三荷电状态估计值/＞，具体过程为：其中，表示第一权重，/＞表示第二权重，/＞表示估计值偏差的方差。综上所述，本发明提供的船用锂离子动力电池荷电状态估计方法，通过获取船用锂离子动力电池的电压时序数据、电流时序数据和温度时序数据；对所述电压时序数据、所述电流时序数据和所述温度时序数据进行特征提取，得到对应的第一输入特征、第二输入特征和第三输入特征；将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征；将所述融合特征输入至训练好的模块神经网络中，得到第一荷电状态估计值；基于所述船用锂离子动力电池在目标时间段内的充放电电流、目标时间段开始时刻的荷电状态，以及电池容量，确定第二荷电状态估计值；基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值。本发明提供的方法通过安时积分和模块神经网络分别进行荷电状态估计值求解，并计算第一荷电状态估计值与第二荷电状态估计值之间的差值后进行融合，再次提高了荷电状态估计值估计的准确性，降低过拟合风险、提高模型的鲁棒性、扩大模型的适用范围，解决现有的电池荷电状态估计算法的准确性和可靠性不高的技术问题。此外，本发明提供的方法采用基于Non-local的注意力融合机制对船用锂离子动力电池的多个荷电状态估计值估计特征进行融合，进一步提高了估计的准确性、降低了维度灾难、增强了模型鲁棒性和稳定性。如图5所示，本发明还提供一种船用锂离子动力电池荷电状态估计装置500，包括：数据获取模块510，用于获取船用锂离子动力电池的电压时序数据、电流时序数据和温度时序数据；特征提取模块520，用于对所述电压时序数据、所述电流时序数据和所述温度时序数据进行特征提取，得到对应的第一输入特征、第二输入特征和第三输入特征；特征融合模块530，用于将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征；第一状态估计模块540，用于将所述融合特征输入至训练好的模块神经网络中，得到第一荷电状态估计值；第二状态估计模块550，用于基于所述船用锂离子动力电池在目标时间段内的充放电电流、目标时间段开始时刻的荷电状态，以及电池容量，确定第二荷电状态估计值；第三状态估计模块560，用于基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值；所述将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征，包括：将所述第一输入特征与所述第二输入特征进行残差运算，得到第一残差运算结果；将所述第一残差运算结果输入至第一Non-local注意力模块，得到第一注意力值和第二注意力值；将所述第一输入特征与所述第一注意力值进行矩阵点乘操作，得到第一点乘结果，以及将所述第二输入特征与所述第二注意力值进行矩阵点乘操作，得到第二点乘结果；将所述第一点乘结果与所述第二点乘结果进行残差运算，得到第二残差运算结果；将所述第二残差运算结果输入至第二Non-local注意力模块，得到第三注意力值和第四注意力值；将所述第三输入特征与所述第三注意力值进行矩阵点乘操作，得到第三点乘结果，以及将所述第三输入特征与所述第四注意力值进行矩阵点乘操作，得到第四点乘结果；将所述第三点乘结果与所述第四点乘结果进行残差运算，得到所述融合特征。上述实施例提供的船用锂离子动力电池荷电状态估计装置可实现上述船用锂离子动力电池荷电状态估计方法实施例中描述的技术方案，上述各模块或单元具体实现的原理可参见上述船用锂离子动力电池荷电状态估计方法实施例中的相应内容，此处不再赘述。如图6所示，本发明还相应提供了一种电子设备600。该电子设备600包括处理器601、存储器602及显示器603。图6仅示出了电子设备600的部分组件，但是应理解的是，并不要求实施所有示出的组件，可以替代的实施更多或者更少的组件。存储器602在一些实施例中可以是电子设备600的内部存储单元，例如电子设备600的硬盘或内存。存储器602在另一些实施例中也可以是电子设备600的外部存储设备，例如电子设备600上配备的插接式硬盘，智能存储卡，安全数字卡，闪存卡等。进一步地，存储器602还可既包括电子设备600的内部储存单元也包括外部存储设备。存储器602用于存储安装电子设备600的应用软件及各类数据。处理器601在一些实施例中可以是一个中央处理器，微处理器或其他数据处理芯片，用于运行存储器602中存储的程序代码或处理数据，例如本发明中的船用锂离子动力电池荷电状态估计方法。显示器603在一些实施例中可以是LED显示器、液晶显示器、触控式液晶显示器以及OLED触摸器等。显示器603用于显示在电子设备600的信息以及用于显示可视化的用户界面。电子设备600的部件601-603通过系统总线相互通信。在本发明的一些实施例中，当处理器601执行存储器602中的船用锂离子动力电池荷电状态估计程序时，可实现以下步骤：获取船用锂离子动力电池的电压时序数据、电流时序数据和温度时序数据；对所述电压时序数据、所述电流时序数据和所述温度时序数据进行特征提取，得到对应的第一输入特征、第二输入特征和第三输入特征；将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征；将所述融合特征输入至训练好的模块神经网络中，得到第一荷电状态估计值；基于所述船用锂离子动力电池在目标时间段内的充放电电流、目标时间段开始时刻的荷电状态，以及电池容量，确定第二荷电状态估计值；基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值；所述将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征，包括：将所述第一输入特征与所述第二输入特征进行残差运算，得到第一残差运算结果；将所述第一残差运算结果输入至第一Non-local注意力模块，得到第一注意力值和第二注意力值；将所述第一输入特征与所述第一注意力值进行矩阵点乘操作，得到第一点乘结果，以及将所述第二输入特征与所述第二注意力值进行矩阵点乘操作，得到第二点乘结果；将所述第一点乘结果与所述第二点乘结果进行残差运算，得到第二残差运算结果；将所述第二残差运算结果输入至第二Non-local注意力模块，得到第三注意力值和第四注意力值；将所述第三输入特征与所述第三注意力值进行矩阵点乘操作，得到第三点乘结果，以及将所述第三输入特征与所述第四注意力值进行矩阵点乘操作，得到第四点乘结果；将所述第三点乘结果与所述第四点乘结果进行残差运算，得到所述融合特征。应当理解的是：处理器601在执行存储器602中的船用锂离子动力电池荷电状态估计程序时，除了上面的功能之外，还可实现其他功能，具体可参见前面相应方法实施例的描述。进一步地，本发明实施例对提及的电子设备600的类型不作具体限定，电子设备600可以为手机、平板电脑、个人数字助理等便携式电子设备。便携式电子设备的示例性实施例包括但不限于搭载IOS、android、microsoft或者其他操作系统的便携式电子设备。上述便携式电子设备也可以是其他便携式电子设备，诸如具有触敏表面的膝上型计算机等。还应当理解的是，在本发明其他一些实施例中，电子设备600也可以不是便携式电子设备，而是具有触敏表面的台式计算机。又一方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现以执行上述各方法提供的船用锂离子动力电池荷电状态估计方法，该方法包括：获取船用锂离子动力电池的电压时序数据、电流时序数据和温度时序数据；对所述电压时序数据、所述电流时序数据和所述温度时序数据进行特征提取，得到对应的第一输入特征、第二输入特征和第三输入特征；将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征；将所述融合特征输入至训练好的模块神经网络中，得到第一荷电状态估计值；基于所述船用锂离子动力电池在目标时间段内的充放电电流、目标时间段开始时刻的荷电状态，以及电池容量，确定第二荷电状态估计值；基于所述第一荷电状态估计值和所述第二荷电状态估计值，确定所述船用锂离子动力电池的最终荷电状态估计值；所述将所述第一输入特征、所述第二输入特征和所述第三输入特征进行特征融合，得到融合特征，包括：将所述第一输入特征与所述第二输入特征进行残差运算，得到第一残差运算结果；将所述第一残差运算结果输入至第一Non-local注意力模块，得到第一注意力值和第二注意力值；将所述第一输入特征与所述第一注意力值进行矩阵点乘操作，得到第一点乘结果，以及将所述第二输入特征与所述第二注意力值进行矩阵点乘操作，得到第二点乘结果；将所述第一点乘结果与所述第二点乘结果进行残差运算，得到第二残差运算结果；将所述第二残差运算结果输入至第二Non-local注意力模块，得到第三注意力值和第四注意力值；将所述第三输入特征与所述第三注意力值进行矩阵点乘操作，得到第三点乘结果，以及将所述第三输入特征与所述第四注意力值进行矩阵点乘操作，得到第四点乘结果；将所述第三点乘结果与所述第四点乘结果进行残差运算，得到所述融合特征。本领域技术人员可以理解，实现上述实施例方法的全部或部分流程，可以通过计算机程序来指令相关的硬件来完成，程序可存储于计算机可读存储介质中。其中，计算机可读存储介质为磁盘、光盘、只读存储记忆体或随机存储记忆体等。以上对本发明所提供的船用锂离子动力电池荷电状态估计方法、装置及电子设备进行了详细介绍，本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处，综上所述，本说明书内容不应理解为对本发明的限制。
