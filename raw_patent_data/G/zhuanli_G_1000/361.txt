标题title
图像边缘检测方法、装置、计算机设备和存储介质
摘要abst
本申请涉及一种图像边缘检测方法、装置、计算机设备和存储介质。方法包括：确定待检测图像中像素对应的边缘方向；确定目标像素的邻域像素；邻域像素对应的第一权重与相对方向差异以及相对距离相关；相对方向差异是目标像素对应的边缘方向与邻域像素相对目标像素的方向的差异；相对距离是邻域像素与目标像素的距离；根据第一权重对邻域像素对应的边缘方向差异进行加权融合，得到评估结果；边缘方向差异是邻域像素对应的边缘方向与目标像素对应的参考边缘方向的差异；参考边缘方向是基于目标像素对应的边缘方向或邻域像素对应的边缘方向中的至少一种确定的；根据评估结果确定待检测图像的边缘检测结果。采用本方法能够提高图像边缘检测的准确性。
权利要求书clms
1.一种图像边缘检测方法，其特征在于，所述方法包括：确定待检测图像中各像素分别对应的边缘方向；针对所述各像素中的每个目标像素，从所述各像素中确定所述目标像素的预设邻域内的邻域像素；确定所述邻域像素对应的第一权重；其中，所述第一权重与相对方向差异以及相对距离相关；所述相对方向差异是指所述目标像素对应的边缘方向与所述邻域像素相对所述目标像素的方向之间的差异；所述相对距离是指所述邻域像素与所述目标像素之间的距离；根据相应的第一权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到所述目标像素对应的评估结果；所述邻域像素对应的边缘方向差异是所述邻域像素对应的边缘方向与所述目标像素对应的参考边缘方向之间的差异；所述参考边缘方向是基于所述目标像素对应的边缘方向或所述邻域像素对应的边缘方向中的至少一种确定的；根据所述目标像素对应的评估结果确定所述待检测图像的边缘检测结果。2.根据权利要求1所述的方法，其特征在于，所述确定待检测图像中各像素分别对应的边缘方向，包括：基于至少两个边缘方向检测算子对所述待检测图像的像素进行边缘方向检测，得到各像素分别对应的方向检测结果；所述边缘检测算子的尺寸与所述预设邻域的尺寸相匹配；根据所述方向检测结果确定所述各像素分别对应的边缘方向。3.根据权利要求1所述的方法，其特征在于，所述方法还包括：确定所述邻域像素对应的第二权重；其中，所述第二权重与边缘方向差异相关；所述根据相应的第一权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到所述目标像素对应的评估结果，包括：根据相应的第一权重和第二权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到所述目标像素对应的评估结果。4.根据权利要求3所述的方法，其特征在于，所述边缘方向差异包括所述邻域像素对应的边缘方向和所述目标像素对应的边缘方向之间的角度差值；所述确定所述邻域像素对应的第二权重，包括：将所述角度差值作为第二权重函数的输入参数，通过所述第二权重函数得到所述邻域像素对应的第二权重；其中，所述第二权重函数用于描述输出的第二权重随着输入的角度差值的减小而指数级递减。5.根据权利要求1所述的方法，其特征在于，所述确定所述邻域像素对应的第一权重，包括：将所述邻域像素的位置、所述目标像素的位置和所述目标像素对应的边缘方向作为第一权重函数的输入参数，通过所述第一权重函数得到所述邻域像素对应的第一权重；其中，所述第一权重函数用于描述输出的第一权重随着相对方向差异越大则越小、且随着相对距离越大则越小。6.根据权利要求1所述的方法，其特征在于，所述评估结果用于表征所述目标像素的预设邻域内所述目标像素和所述邻域像素分别对应的边缘方向的离散程度；所述根据所述目标像素对应的评估结果确定所述待检测图像的边缘检测结果，包括：在所述目标像素对应的评估结果表征的离散程度小于边缘判定阈值的情况下，确定所述目标像素为所述待检测图像中的边缘像素。7.根据权利要求1至6任一项所述的方法，其特征在于，所述参考边缘方向为所述目标像素对应的边缘方向或所述目标像素对应的平均边缘方向；所述平均边缘方向是指所述目标像素的预设邻域内各邻域像素和所述目标像素分别对应的边缘方向的均值。8.一种图像边缘检测装置，其特征在于，所述装置包括：方向检测模块，用于确定待检测图像中各像素分别对应的边缘方向；确定模块，用于针对所述各像素中的每个目标像素，从所述各像素中确定所述目标像素的预设邻域内的邻域像素；权重计算模块，用于确定所述邻域像素对应的第一权重；其中，所述第一权重与相对方向差异以及相对距离相关；所述相对方向差异是指所述目标像素对应的边缘方向与所述邻域像素相对所述目标像素的方向之间的差异；所述相对距离是指所述邻域像素与所述目标像素之间的距离；加权融合模块，用于根据相应的第一权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到所述目标像素对应的评估结果；所述邻域像素对应的边缘方向差异是所述邻域像素对应的边缘方向与所述目标像素对应的参考边缘方向之间的差异；所述参考边缘方向是基于所述目标像素对应的边缘方向或所述邻域像素对应的边缘方向中的至少一种确定的；边缘检测模块，用于根据所述目标像素对应的评估结果确定所述待检测图像的边缘检测结果。9.一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至7中任一项所述的方法的步骤。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至7中任一项所述的方法的步骤。
说明书desc
技术领域本申请涉及图像处理技术领域，特别是涉及一种图像边缘检测方法、装置、计算机设备和存储介质。背景技术在图像处理过程中，不论锐化、降噪或者其他对细节的处理，都需要对图像实现分区域处理，其中区分出图像中的边缘是关键的一步。随着图像处理技术的发展，出现了图像边缘检测技术，通过这种技术能够检测出图像中的边缘。但是，传统的图像边缘检测算法在处理强纹理和弱边缘时存在局限性，无法准确的区分强纹理和弱边缘，导致图像边缘检测的准确性低。发明内容基于此，有必要针对上述技术问题，提供一种能够提高准确性的图像边缘检测方法、装置、计算机设备和存储介质。第一方面，本申请提供了一种图像边缘检测方法，包括：确定待检测图像中各像素分别对应的边缘方向；针对所述各像素中的每个目标像素，从所述各像素中确定所述目标像素的预设邻域内的邻域像素；确定所述邻域像素对应的第一权重；其中，所述第一权重与相对方向差异以及相对距离相关；所述相对方向差异是指所述目标像素对应的边缘方向与所述邻域像素相对所述目标像素的方向之间的差异；所述相对距离是指所述邻域像素与所述目标像素之间的距离；根据相应的第一权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到所述目标像素对应的评估结果；所述邻域像素对应的边缘方向差异是所述邻域像素对应的边缘方向与所述目标像素对应的参考边缘方向之间的差异；所述参考边缘方向是基于所述目标像素对应的边缘方向或所述邻域像素对应的边缘方向中的至少一种确定的；根据所述目标像素对应的评估结果确定所述待检测图像的边缘检测结果。第二方面，本申请还提供了一种图像边缘检测装置，包括：方向检测模块、确定模块、权重计算模块、加权融合模块和边缘检测模块。方向检测模块，用于确定待检测图像中各像素分别对应的边缘方向。确定模块，用于针对所述各像素中的每个目标像素，从所述各像素中确定所述目标像素的预设邻域内的邻域像素。权重计算模块，用于确定所述邻域像素对应的第一权重；其中，所述第一权重与相对方向差异以及相对距离相关；所述相对方向差异是指所述目标像素对应的边缘方向与所述邻域像素相对所述目标像素的方向之间的差异；所述相对距离是指所述邻域像素与所述目标像素之间的距离。加权融合模块，用于根据相应的第一权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到所述目标像素对应的评估结果；所述邻域像素对应的边缘方向差异是所述邻域像素对应的边缘方向与所述目标像素对应的参考边缘方向之间的差异；所述参考边缘方向是基于所述目标像素对应的边缘方向或所述邻域像素对应的边缘方向中的至少一种确定的。边缘检测模块，用于根据所述目标像素对应的评估结果确定所述待检测图像的边缘检测结果。第三方面，本申请还提供了一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时实现上述的方法中的步骤。第四方面，本申请还提供了一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现上述的方法中的步骤。第五方面，本申请还提供了一种计算机程序产品，包括计算机程序，该计算机程序被处理器执行时实现上述的方法中的步骤。上述图像边缘检测方法、装置、计算机设备、存储介质和计算机程序产品，确定待检测图像中各像素分别对应的边缘方向；针对各像素中的每个目标像素，确定目标像素的预设邻域内的邻域像素；由于图像中边缘区域内的边缘方向相较于非边缘区域内的边缘方向更加统一和集中，沿着目标像素对应的边缘方向邻域像素与目标像素之间相对方位差别越大，在针对目标像素是否是边缘像素的判定中邻域像素的可参考价值就越小，故而邻域像素对应的第一权重与相对方向差异以及相对距离有关，充分考虑到了沿着目标像素对应的边缘方向邻域像素与目标像素相对方位差别。进而根据相应的第一权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到更准确的目标像素对应的评估结果，能够充分反映目标像素周围的边缘方向的离散程度。从而根据目标像素对应的评估结果准确的确定待检测图像的边缘检测结果，提高了图像边缘检测的准确性。附图说明为了更清楚地说明本申请实施例或相关技术中的技术方案，下面将对实施例或相关技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例提供的一种图像边缘检测方法的流程示意图。图2为本申请实施例提供的一种16个边缘方向检测算子的示意图。图3为本申请实施例提供的一种第二权重分布的示意图。图4为本申请实施例提供的一种第一权重分布的示意图。图5为本申请实施例提供的一种图像边缘检测方法的简易流程示意图。图6为本申请实施例提供的一种图像边缘检测装置的结构框图。图7为本申请实施例提供的一种计算机设备的内部结构图。图8为本申请实施例提供的另一种计算机设备的内部结构图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。在一个示例性的实施例中，如图1所示，提供了一种图像边缘检测方法，以该方法应用于计算机设备进行说明，包括以下步骤102至步骤110。步骤102，确定待检测图像中各像素分别对应的边缘方向。其中，待检测图像是指待进行图像边缘检测的图像。边缘方向是指在像素为边缘像素的情况下该像素处边缘的走向。可以理解，在像素为边缘像素的情况下，边缘方向可以表征像素处灰度值变化的方向。示例性地，计算机设备可以对待检测图像中的像素进行边缘方向检测，得到各像素分别对应的边缘方向。需要说明的是，像素对应的边缘方向只是边缘方向检测的结果，并不代表像素是边缘像素，对于像素是否为边缘像素的判断需要继续执行步骤102的后续步骤。在一些实施例中，计算机设备可以基于边缘方向检测算子对待检测图像中的像素进行边缘方向检测。其中，边缘方向检测算子是方向算子。边缘方向检测算子可以包括基于一阶导数的方向算子或基于二阶导数的方向算子等中的至少一种方向算子。在一些实施例中，计算机设备可以基于边缘方向检测算子对待检测图像中像素的亮度值进行分析，得到像素对应的边缘方向。在一些实施例中，待检测图像的像素数据可以是第一颜色格式的。第一颜色格式可以是指亮度及色度格式。计算机设备可以直接从待检测图像的像素数据中提取出像素的亮度值。在一些实施例中，待检测图像的像素数据可以是第二颜色格式的。第二颜色格式可以是指三基色格式。第二颜色格式下的像素数据可以但不限于包括红色通道值、绿色通道值和蓝色通道值。计算机设备可以将待检测图像的像素数据从第二颜色格式转换成第一颜色格式，进而从第一颜色格式的像素数据中提取出像素的亮度值。在一些实施例中，待检测图像中包括边缘像素和非边缘像素。非边缘像素是指除边缘像素外的像素。边缘像素是指待检测图像中边缘区域内的像素。边缘像素可以指示待检测图像中灰度值发生突变或阶跃变化的位置。可以理解，边缘像素的位置其实就是待检测图像中边缘的位置，边缘像素对应的边缘方向其实就是相应边缘的走向。在一些实施例中，计算机设备可以包括终端或服务器中的至少一种。其中，终端可以但不限于是各种个人计算机、笔记本电脑、智能手机、平板电脑、物联网设备和便携式可穿戴设备，物联网设备可为智能音箱、智能电视、智能空调、智能车载设备等。便携式可穿戴设备可为智能手表、智能手环、头戴设备等。服务器可以用独立的服务器或者是多个服务器组成的服务器集群来实现。步骤104，针对各像素中的每个目标像素，从各像素中确定目标像素的预设邻域内的邻域像素。其中，预设邻域可以是指预设尺寸的邻域。目标像素的预设邻域是指以目标像素为中心，扩展到其周围的像素所构成的预设尺寸的区域。比如，预设邻域可以但不限于是11邻域，11邻域是指以目标像素为中心，目标像素上下左右相邻的11个像素所构成的区域，这个区域的大小是11x11像素。在一些实施例中，计算机设备可以以目标像素为中心，扩展到其周围的像素所构成的预设尺寸的区域内的像素，即，目标像素的预设邻域内的像素作为目标像素的邻域像素。在一些实施例中，预设邻域可以但不限于是一个矩形区域。在一些实施例中，目标像素可以是待检测图像中的任意像素。步骤106，确定邻域像素对应的第一权重；其中，第一权重与相对方向差异以及相对距离相关；相对方向差异是指目标像素对应的边缘方向与邻域像素相对目标像素的方向之间的差异；相对距离是指邻域像素与目标像素之间的距离。可以理解，图像中边缘区域的方向相比于平坦区域或者纹理区域都更统一和集中，故而预设邻域内各邻域像素对应的第一权重可以沿着目标像素对应的边缘方向向外逐渐减小、且随着距离目标像素越远则越小，即，第一权重与相对方向差异负相关，以及第一权重与相对距离负相关。在一些实施例中，计算机设备可以基于邻域像素的位置、目标像素的位置和目标像素对应的边缘方向确定邻域像素对应的第一权重。在一些实施例中，预设有至少两个第一权重。计算机设备可以根据相对方向差异以及相对距离从至少两个第一权重中选择邻域像素对应的第一权重。在一些实施例中，第一权重函数用于描述输出的第一权重与相对方向差异以及相对距离相关。计算机设备可以通过第一权重函数确定邻域像素对应的第一权重。步骤108，根据相应的第一权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到目标像素对应的评估结果；邻域像素对应的边缘方向差异是邻域像素对应的边缘方向与目标像素对应的参考边缘方向之间的差异；参考边缘方向是基于目标像素对应的边缘方向或邻域像素对应的边缘方向中的至少一种确定的。在一些实施例中，边缘方向差异可以包括角度差值或边缘方向相似度中的至少一种。角度差值是指邻域像素对应的边缘方向与目标像素对应的参考边缘方向之间的角度的差值。边缘方向相似度是指邻域像素对应的边缘方向与目标像素对应的参考边缘方向之间的相似度。方向相似度可以是余弦相似度或欧式距离等。在一些实施例中，计算机设备可以使用相应的第一权重对邻域像素对应的边缘方差差异进行加权，得到该邻域像素对应的第一中间数据。对各邻域像素分别对应的第一中间数据进行融合，得到目标对象对应的评估结果。评估结果可以表征目标像素的预设邻域内各边缘方向的离散情况。在一些实施例中，计算机设备可以将邻域像素对应的第一中间数据的平方作为该邻域像素对应的第二中间数据。对各邻域像素分别对应的第二中间数据进行统计平均，得到目标对象对应的评估结果。步骤110，根据目标像素对应的评估结果确定待检测图像的边缘检测结果。可以理解，评估结果表征目标像素的预设邻域内各边缘方向的离散情况。由于图像中的边缘区域的方向相比于平坦区域或纹理区域都更加统一和集中，故而目标像素的预设邻域内各边缘方向的离散程度越高，代表目标像素为边缘像素的概率越小，目标像素的预设邻域内各边缘方向的离散程度越低，代表目标像素为边缘像素的概率越大。示例性地，在目标像素对应的评估结果满足边缘判定条件的情况下，将目标像素确定为边缘像素。可以理解，边缘像素的位置就是待检测图像中边缘所在的位置，边缘像素对应的边缘方向就是边缘像素的位置处边缘的方向。在一些实施例中，边缘判定条件是指用于判定目标像素是否是边缘像素的条件。比如，边缘判定条件可以但不限于是评估结果表征的离散程度小于边缘判定阈值。边缘判定条件可以但不限于是评估结果表征的离散程度处于边缘判定区间。在一些实施例中，边缘检测结果用于指示待检测图像中边缘的位置和走向。计算机设备可以基于边缘像素的位置和边缘像素对应的边缘方向确定出待检测图像中的边缘和边缘方向。在一些实施例中，计算机设备可以对待检测图像进行降噪处理。在降噪处理中，待检测图像中边缘区域的去噪强度小于非边缘区域的去噪强度。非边缘区域是指待检测图像中除边缘区域外的区域。在一些实施例中，计算机设备可以对待检测图像进行锐化处理。在锐化处理中，对待检测图像中的边缘做沿边缘方向的滤波处理。上述图像边缘检测方法中，确定待检测图像中各像素分别对应的边缘方向；针对各像素中的每个目标像素，确定目标像素的预设邻域内的邻域像素；由于图像中边缘区域内的边缘方向相较于非边缘区域内的边缘方向更加统一和集中，沿着目标像素对应的边缘方向邻域像素与目标像素之间相对方位差别越大，在针对目标像素是否是边缘像素的判定中邻域像素的可参考价值就越小，故而邻域像素对应的第一权重与相对方向差异以及相对距离有关，充分考虑到了沿着目标像素对应的边缘方向邻域像素与目标像素相对方位差别。进而根据相应的第一权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到更准确的目标像素对应的评估结果，能够充分反映目标像素周围的边缘方向的离散程度。从而根据目标像素对应的评估结果准确的确定待检测图像的边缘检测结果，提高了图像边缘检测的准确性。在一些实施例中，确定待检测图像中各像素分别对应的边缘方向，包括：基于至少两个边缘方向检测算子对待检测图像的像素进行边缘方向检测，得到各像素分别对应的方向检测结果；边缘检测算子的尺寸与预设邻域的尺寸相匹配；根据方向检测结果确定各像素分别对应的边缘方向。可以理解，每个边缘方向检测算子都适用于一种预设方向的检测，边缘方向检测算子用于检测像素在这种预设方向上的方向强度。方向强度越大代表像素对应的边缘方向为这种方向的概率越高。方向检测结果用于表征像素在每个预设方向上的方向强度。在一些实施例中，计算机设备可以根据方向检测结果从至少两个预设方向中确定出像素对应的边缘方向。像素对应的边缘方向可以是相应方向强度最大的预设方向。可以理解，像素在非边缘方向上的方向强度小于在边缘方向上的方向强度，非边缘方向是指至少两个预设方向中除像素对应的边缘方向外的方向。在一些实施例中，预设方向的数量是根据需求设置的。对于每个预设方向，都存在一个专用于检测任意像素在该预设方向的强度的边缘方向检测算子。在一些实施例中，边缘方向检测算子可以是至少4个，也可以是至少8个，还可以是至少16个。在一些实施例中，预设方向的数量可以但不限于是2的次方。比如，预设方向可以有16个。如图2所示，提供了16个边缘方向检测算子。在预设邻域的尺寸为11×11，边缘方向检测算子的尺寸也是11×11，保证一致性。16个边缘方向检测算子分别适用于16个预设方向上方向强度的检测。其中，16个预设方向的角度是将π均分成16份得到的，分别为π/16、2π/16、……、15π/16。在一些实施例中，目标像素可以但不限于是指边缘方向检测算子检测方向强度时处于中心的像素。可以理解，如果只检测水平或竖直方向，那么针对性检测的方向太少，方向太少时计算出的方向的离散程度对于弱边缘和强纹理的区分度不够，会导致弱边缘无法检测到。本实施例中，基于至少两个边缘方向检测算子对待检测图像的像素进行边缘方向检测，得到各像素分别对应的方向检测结果；边缘检测算子的尺寸与预设邻域的尺寸相匹配；根据方向检测结果确定各像素分别对应的边缘方向，针对性检测的方向更多，能够提高图像边缘检测的准确性。在一些实施例中，方法还包括：确定邻域像素对应的第二权重；其中，第二权重与边缘方向差异相关；根据相应的第一权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到目标像素对应的评估结果，包括：根据相应的第一权重和第二权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到目标像素对应的评估结果。可以理解，针对相应边缘方向与目标像素对应的边缘方向相差越大的邻域像素，赋予更大的第二权重，能够达到拉大方向的离散程度，增加区分度的效果，便于后续将边缘区域与非边缘区域区分开。在一些实施例中，第二权重与边缘方向差异正相关。在一些实施例中，计算机设备可以使用相应的第一权重和第二权重对邻域像素对应的边缘方差差异进行加权，得到该邻域像素对应的第一中间数据。在一些实施例中，计算机设备可以将每个邻域像素对应的第一权重、第二权重和边缘方向作为加权融合公式的输入参数，通过加权融合公式确定目标像素的评估结果。加权融合公式可以是其中wiloc 为第i个邻域像素对应的第一权重，widir为第i个邻域像素对应的第二权重，xi为预设邻域内第i个邻域像素对应的边缘方向，x'为参考边缘方向。可以理解，加权融合公式计算出的评估结果可以被认为是目标像素的预设邻域内的局部方向方差。本实施例中，确定邻域像素对应的第二权重；其中，第二权重与边缘方向差异相关；根据相应的第一权重和第二权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到目标像素对应的评估结果，通过引入与边缘方向差异相关第二权重，达到进一步增大方向离散程度的区分度的效果，便于后续区分边缘区域和非边缘区域，提高图像边缘检测的准确性。在一些实施例中，边缘方向差异包括邻域像素对应的边缘方向和目标像素对应的边缘方向之间的角度差值；确定邻域像素对应的第二权重，包括：将角度差值作为第二权重函数的输入参数，通过第二权重函数得到邻域像素对应的第二权重；其中，第二权重函数用于描述输出的第二权重随着输入的角度差值的减小而指数级递减。示例性地，角度差值是指两个角度之间的差的绝对值。第二权重函数可以是widir=ax，其中，widir是指第二权重，a为可调参数，x为与角度差值正相关的子函数，对x的设置必须遵循角度差值越大x越大。比如，目标像素对应的边缘方向为90度时，分别对应45度和135度的邻域像素对应的第二权重应该是相同的，分别对应67.5度和112.5 度的邻域像素对应的第二权重应该是相同的，且对应45度的邻域像素对应的第二权重大于对应67.5度的邻域像素对应的第二权重，所有边缘方向中对应0度的邻域像素对应的第二权重最大。可以理解，对于第二权重公式，输入一个角度差值输出一个第二权重，角度差值其实与第二权重一一对应。在一些实施例中，如图3所示，提供了第二权重分布的示意图。图中包括预设方向302至316。不同的线条代表了不同的预设方向，共有16个预设方向。假设存在5种第二权重，w1＞w2＞w3＞ w4＞w5。当目标像素对应的边缘方向为90度时，90度对应图中的预设方向302，此时，对应于预设方向302的第二权重为w5，对应于预设方向304和预设方向306的第二权重为w4，对应于预设方向308和预设方向316的第二权重为w3，对应于预设方向310和预设方向314的第二权重为w2，对应于预设方向312的第二权重为w1。在一些实施例中，第二权重函数是一种指数函数。第二权重函数中包括预设底数和子函数。子函数的输入是角度差值，输出是用于计算第二权重的指数。可以理解，第二权重函数的输入只需一个角度差值即可，在已知指数和预设底数的情况下，能够计算出第二权重。本实施例中，将角度差值作为第二权重函数的输入参数，通过第二权重函数得到邻域像素对应的第二权重；其中，第二权重函数用于描述输出的第二权重随着输入的角度差值的减小而指数级递减，通过引入与边缘方向差异相关第二权重，达到进一步增大方向离散程度的区分度的效果，便于后续区分边缘区域和非边缘区域，提高图像边缘检测的准确性。在一些实施例中，确定邻域像素对应的第一权重，包括：将邻域像素的位置、目标像素的位置和目标像素对应的边缘方向作为第一权重函数的输入参数，通过第一权重函数得到邻域像素对应的第一权重；其中，第一权重函数用于描述输出的第一权重随着相对方向差异越大则越小、且随着相对距离越大则越小。在一些实施例中，第一权重函数可以但不限于是高斯函数。在一些实施例中，第一权重函数可以包括公式、公式、公式和公式。。。。。其中，wiloc代表第一权重。z1和z2代表像素的位置分量，即像素的位置可以是。θ代表目标像素对应的边缘方向的角度。z'1和z'2代表旋转变换后的像素的位置分量。σ和μ分别为高斯方差和目标像素的预设邻域内的均值。设置不同的θ可以得到不同方向的第一权重，调整σ可以得到不同的权重系数。第一权重的分布符合高斯分布。zi可以是z1和z2中的任意一个。在一些实施例中，邻域像素的位置分量先经过公式的处理，后经过公式和公式的旋转变换，最后经过公式处理即可得到第一权重。在一些实施例中，计算机设备可以计算目标像素的预设邻域内各像素的位置分量的均值，得到均值μ这一参数。在一些实施例中，如图4所示，提供了第一权重分布的示意图。目标像素处于中心位置，虚线代表目标像素对应的边缘方向。w1＞w2＞w3＞ w4＞w5，图中第一权重的分布符合邻域各位置的第一权重沿目标像素对应的边缘方向逐渐向外降低、且随着距离目标像素越远第一权重越小这一条件。需要说明的是，图4中并非是根据公式至计算出的第一权重分布，图4仅仅用于示意第一权重分布的大小关系，并不用于限定第一权重的计算方式。本实施例中，将邻域像素的位置、目标像素的位置和目标像素对应的边缘方向作为第一权重函数的输入参数，通过第一权重函数得到邻域像素对应的第一权重，沿着目标像素对应的边缘方向邻域像素与目标像素之间相对方位差别越大，在针对目标像素是否是边缘像素的判定中邻域像素的可参考价值就越小，通过引入第一权重能够提高图像边缘检测的准确性。在一些实施例中，评估结果用于表征目标像素的预设邻域内目标像素和邻域像素分别对应的边缘方向的离散程度；根据目标像素对应的评估结果确定待检测图像的边缘检测结果，包括：在目标像素对应的评估结果表征的离散程度小于边缘判定阈值的情况下，确定目标像素为待检测图像中的边缘像素。示例性地，边缘判定阈值可以是预设的，还可以是根据各像素分别对应的评估结果确定的。目标像素对应的评估结果包括目标像素的预设邻域内的局部方向方差。计算机设备可以比对局部方向方差和边缘判定阈值，在局部方向方差小于边缘判定阈值的情况下，将目标像素确定为边缘像素。本实施例中，在目标像素对应的评估结果表征的离散程度小于边缘判定阈值的情况下，确定目标像素为待检测图像中的边缘像素，能够根据边缘区域相较于非边缘区域方向更加集中和统一的特性，准确地检测出边缘像素。在一些实施例中，参考边缘方向为目标像素对应的边缘方向或目标像素对应的平均边缘方向；平均边缘方向是指目标像素的预设邻域内各邻域像素和目标像素分别对应的边缘方向的均值。示例性地，计算机设备可以直接将目标像素对应的边缘方向作为参考边缘方向，也可以将目标像素的预设邻域内各邻域像素和目标像素分别对应的边缘方向的均值作为参考边缘方向。本实施例中，参考边缘方向为目标像素对应的边缘方向或目标像素对应的平均边缘方向；平均边缘方向是指目标像素的预设邻域内各邻域像素和目标像素分别对应的边缘方向的均值，无论是目标像素对应的边缘方向还是平均边缘方向作为计算评估结果的参考，进而准确地检测出预设邻域内边缘方向的离散情况。在一些实施例中，如图5所示，提供了图像边缘检测方法的简易流程示意图。步骤502，对待检测图像提取像素的亮度值。具体地，待检测图像如果是YUV数据，直接使用Y值。如果是RGB数据，通过转换公式由RGB数据转换得到Y值。转换公式为Y=+++16。其中，R是指RGB数据中红色通道值。G是指RGB数据中绿色通道值。B是指RGB数据中蓝色通道值。步骤504，对待检测图像进行不同方向边缘检测。具体地，不同方向边缘检测本质上就是检测待检测图像中每个像素在预设方向上的强度，能够得到方向检测结果。步骤506，将方向检测结果融合。具体地，方向检测结果用于表征像素在每个预设方向上的方向强度，但是一个像素只能对应一个边缘方向，故而需要将方向检测结果融合，将方向强度最大的预设方向确定为像素对应的边缘方向。步骤508，计算预设邻域内经过第一权重和第二权重加权的局部方向方差。具体地，经过第一权重和第二权重的双重加权得到的局部方向方差，能够充分反映目标像素周围的边缘方向离散程度。步骤510，确定边缘判定阈值。具体地，边缘判定阈值可以是预设的，还可以是根据各像素分别对应的评估结果确定出来的。步骤512，确定待检测图像中的边缘位置及边缘方向。具体地，局部方向方差小于边缘判定阈值的目标像素是边缘像素。边缘像素的位置和边缘像素对应的边缘方向能够准确地指示待检测图像中的边缘位置及边缘方向。应该理解的是，虽然如上的各实施例所涉及的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，如上的各实施例所涉及的流程图中的至少一部分步骤可以包括多个步骤或者多个阶段，这些步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤中的步骤或者阶段的至少一部分轮流或者交替地执行。基于同样的发明构思，本申请实施例还提供了一种用于实现上述所涉及的图像边缘检测方法的图像边缘检测装置。该装置所提供的解决问题的实现方案与上述方法中所记载的实现方案相似，故下面所提供的一个或多个图像边缘检测装置实施例中的具体限定可以参见上文中对于图像边缘检测方法的限定，在此不再赘述。在一个示例性的实施例中，如图6所示，提供了一种图像边缘检测装置600，包括：方向检测模块602、确定模块604、权重计算模块606、加权融合模块608和边缘检测模块610。方向检测模块602，用于确定待检测图像中各像素分别对应的边缘方向。确定模块604，用于针对各像素中的每个目标像素，从各像素中确定目标像素的预设邻域内的邻域像素。权重计算模块606，用于确定邻域像素对应的第一权重；其中，第一权重与相对方向差异以及相对距离相关；相对方向差异是指目标像素对应的边缘方向与邻域像素相对目标像素的方向之间的差异；相对距离是指邻域像素与目标像素之间的距离。加权融合模块608，用于根据相应的第一权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到目标像素对应的评估结果；邻域像素对应的边缘方向差异是邻域像素对应的边缘方向与目标像素对应的参考边缘方向之间的差异；参考边缘方向是基于目标像素对应的边缘方向或邻域像素对应的边缘方向中的至少一种确定的。边缘检测模块610，用于根据目标像素对应的评估结果确定待检测图像的边缘检测结果。在一些实施例中，方向检测模块602，用于基于至少两个边缘方向检测算子对待检测图像的像素进行边缘方向检测，得到各像素分别对应的方向检测结果；边缘检测算子的尺寸与预设邻域的尺寸相匹配；根据方向检测结果确定各像素分别对应的边缘方向。在一些实施例中，权重计算模块606，用于确定邻域像素对应的第二权重；其中，第二权重与边缘方向差异相关；加权融合模块608，用于根据相应的第一权重和第二权重对各邻域像素分别对应的边缘方向差异进行加权融合，得到目标像素对应的评估结果。在一些实施例中，边缘方向差异包括邻域像素对应的边缘方向和目标像素对应的边缘方向之间的角度差值；权重计算模块606，用于将角度差值作为第二权重函数的输入参数，通过第二权重函数得到邻域像素对应的第二权重；其中，第二权重函数用于描述输出的第二权重随着输入的角度差值的减小而指数级递减。在一些实施例中，权重计算模块606，用于将邻域像素的位置、目标像素的位置和目标像素对应的边缘方向作为第一权重函数的输入参数，通过第一权重函数得到邻域像素对应的第一权重；其中，第一权重函数用于描述输出的第一权重随着相对方向差异越大则越小、且随着相对距离越大则越小。在一些实施例中，评估结果用于表征目标像素的预设邻域内目标像素和邻域像素分别对应的边缘方向的离散程度；边缘检测模块610，用于在目标像素对应的评估结果表征的离散程度小于边缘判定阈值的情况下，确定目标像素为待检测图像中的边缘像素。在一些实施例中，参考边缘方向为目标像素对应的边缘方向或目标像素对应的平均边缘方向；平均边缘方向是指目标像素的预设邻域内各邻域像素和目标像素分别对应的边缘方向的均值。上述图像边缘检测装置中的各个模块可全部或部分通过软件、硬件及其组合来实现。上述各模块可以硬件形式内嵌于或独立于计算机设备中的处理器中，也可以以软件形式存储于计算机设备中的存储器中，以便于处理器调用执行以上各个模块对应的操作。在一个示例性的实施例中，提供了一种计算机设备，该计算机设备可以是服务器，其内部结构图可以如图7所示。该计算机设备包括处理器、存储器、输入/输出接口(Input/Output，简称I/O）和通信接口。其中，处理器、存储器和输入/输出接口通过系统总线连接，通信接口通过输入/输出接口连接到系统总线。其中，该计算机设备的处理器用于提供计算和控制能力。该计算机设备的存储器包括非易失性存储介质和内存储器。该非易失性存储介质存储有操作系统、计算机程序和数据库。该内存储器为非易失性存储介质中的操作系统和计算机程序的运行提供环境。该计算机设备的数据库用于存储待检测图像。该计算机设备的输入/输出接口用于处理器与外部设备之间交换信息。该计算机设备的通信接口用于与外部的终端通过网络连接通信。该计算机程序被处理器执行时以实现一种图像边缘检测方法。在一个示例性的实施例中，提供了一种计算机设备，该计算机设备可以是终端，其内部结构图可以如图8所示。该计算机设备包括处理器、存储器、输入/输出接口、通信接口、显示单元和输入装置。其中，处理器、存储器和输入/输出接口通过系统总线连接，通信接口、显示单元和输入装置通过输入/输出接口连接到系统总线。其中，该计算机设备的处理器用于提供计算和控制能力。该计算机设备的存储器包括非易失性存储介质和内存储器。该非易失性存储介质存储有操作系统和计算机程序。该内存储器为非易失性存储介质中的操作系统和计算机程序的运行提供环境。该计算机设备的输入/输出接口用于处理器与外部设备之间交换信息。该计算机设备的通信接口用于与外部的终端进行有线或无线方式的通信，无线方式可通过WIFI、移动蜂窝网络、NFC或其他技术实现。该计算机程序被处理器执行时以实现一种图像边缘检测方法。该计算机设备的显示单元用于形成视觉可见的画面，可以是显示屏、投影装置或虚拟现实成像装置。显示屏可以是液晶显示屏或者电子墨水显示屏，该计算机设备的输入装置可以是显示屏上覆盖的触摸层，也可以是计算机设备外壳上设置的按键、轨迹球或触控板，还可以是外接的键盘、触控板或鼠标等。本领域技术人员可以理解，图7或图8中示出的结构，仅仅是与本申请方案相关的部分结构的框图，并不构成对本申请方案所应用于其上的计算机设备的限定，具体的计算机设备可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。在一个示例性的实施例中，提供了一种计算机设备，包括存储器和处理器，存储器中存储有计算机程序，该处理器执行计算机程序时实现上述各方法实施例中的步骤。在一个实施例中，提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现上述各方法实施例中的步骤。在一个实施例中，提供了一种计算机程序产品，包括计算机程序，该计算机程序被处理器执行时实现上述各方法实施例中的步骤。需要说明的是，本申请所涉及的用户信息和数据，均为经用户授权或者经过各方充分授权的信息和数据，且相关数据的收集、使用和处理需要符合相关规定。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一非易失性计算机可读取存储介质中，该计算机程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、数据库或其它介质的任何引用，均可包括非易失性和易失性存储器中的至少一种。非易失性存储器可包括只读存储器、磁带、软盘、闪存、光存储器、高密度嵌入式非易失性存储器、阻变存储器、磁变存储器、铁电存储器、相变存储器、石墨烯存储器等。易失性存储器可包括随机存取存储器或外部高速缓冲存储器等。作为说明而非局限，RAM可以是多种形式，比如静态随机存取存储器或动态随机存取存储器等。本申请所提供的各实施例中所涉及的数据库可包括关系型数据库和非关系型数据库中至少一种。非关系型数据库可包括基于区块链的分布式数据库等，不限于此。本申请所提供的各实施例中所涉及的处理器可为通用处理器、中央处理器、图形处理器、数字信号处理器、可编程逻辑器、基于量子计算的数据处理逻辑器等，不限于此。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对本申请专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请的保护范围应以所附权利要求为准。
