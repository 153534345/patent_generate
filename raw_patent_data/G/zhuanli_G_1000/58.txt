标题title
基于马尔科夫随机场的社交网络用户约束聚类方法及系统
摘要abst
本发明涉及数据处理领域，公开了基于马尔科夫随机场的社交网络用户约束聚类方法及系统，包括：随机选择一个数据点作为广度优先搜索的起点，将除起点外其余各数据点，属于各标签的概率初始化为1/K；对于广度优先搜索每次访问的数据点，使用其邻域内已访问的数据点来计算该数据点的属于各个标签的概率；顺序遍历所有的数据点，使用正在访问的数据点的邻域内的所有的数据点来计算该数据点概率，每轮遍历统计概率更新了的数据点的个数，若没有数据点更新概率，则迭代结束；遍历所有的标注，得到标注属于must‑link的概率。本发明使用马尔科夫随机场进行聚类，可以得到每个用户属于各个标签的概率，并且可以找出标注错误。
权利要求书clms
1.基于马尔科夫随机场的社交网络用户约束聚类方法，其特征在于，包括如下步骤：步骤一，根据采集的用户数据点，随机选择一个数据点作为广度优先搜索的起点，将随机选择的这个数据点随机赋给一个标签，将标签的概率赋值为1；将除起点外其余各数据点，属于各标签的概率初始化为1/K，其中K表示要划分为的簇的数量；设置visited数组并初始化为False；对于广度优先搜索每次访问的数据点，将其在visited数组中设置为True，并使用其邻域内已访问的数据点来计算该数据点的属于各个标签的概率；步骤二，顺序遍历所有的数据点，使用正在访问的数据点的邻域内的所有的数据点来计算该数据点概率，每轮遍历统计概率更新了的数据点的个数，若没有数据点更新概率，则迭代结束，得到所有数据点属于不同标签的概率；步骤三，遍历所有的标签，两端实例点属于同一标签的概率相乘再累加得到must-link的概率，根据标注属于must-link的概率得到标注属于cannot-link的概率，若标注属于must-link的概率大于标注属于cannot-link的概率，而标注为cannot-link，则判断标注错误；若标注属于cannot-link的概率大于标注属于must-link的概率，而标注为must-link，则判断标注错误。2.根据权利要求1所述的基于马尔科夫随机场的社交网络用户约束聚类方法，其特征在于，所述的对于广度优先搜索每次访问的数据点，设置visited数组并初始化为False，使用其邻域内已访问的数据点来计算该数据点的属于各个标签的概率，包括：从广度优先搜索的起点开始访问，将正在访问的数据点在visited数组中设置为True，遍历该数据点的邻域，如果邻居数据点还未被访问，则将其放入队列中，计算该数据点属于不同标签的概率，上一个数据点计算完成后，取出队列首位的一个数据点，访问该数据点并计算该数据点属于不同标签的概率。3.根据权利要求2所述的基于马尔科夫随机场的社交网络用户约束聚类方法，其特征在于，所述的顺序遍历所有的数据点，使用正在访问的数据点的邻域内的所有的数据点来计算该数据点概率，每轮遍历统计概率更新了的数据点的个数，其中的概率的更新，采用信念传播算法，计算成对马尔科夫随机场的势函数：势函数分为两个部分：距离势函数/＞和约束势函数：距离势函数：其中dist表示需要计算势函数的两数据点之间的距离，maxdist表示数据集中最远的两个数据点之间的欧式距离，K表示要划分的簇的数量；约束势函数为：而总的势函数的计算如下：势函数=约束势函数×α+距离势函数；即：其中α表示约束势函数相较于距离势函数需要提高的数量级；计算完势函数，即可计算邻域的数据点传递给数据点/＞的标签为m的消息：其中表示数据点/＞属于标签t, /＞属于标签m间的势函数，表示/＞属于标签t的概率；计算完邻域内的所有数据点传递的消息后，接着计算归一化因子：接着就可以计算该数据点属于某标签m的概率：。4.根据权利要求3所述的基于马尔科夫随机场的社交网络用户约束聚类方法，其特征在于，对于邻域的计算，若约束的总数量为total_constr条，数据点的总数为total_points个，则与每个数据点相连的约束平均有2*total_constr/total_points条，先将与该数据点有约束相连的数据点算入邻域，如果没有达到根据约束的平均数量，则照距离从近到远将邻域内的数据点补充至平均数量。5.根据权利要求4所述的基于马尔科夫随机场的社交网络用户约束聚类方法，其特征在于，所述的根据标注属于must-link的概率得到标注属于cannot-link的概率，为：cannot-link的概率=1-must-link的概率。6.基于马尔科夫随机场的社交网络用户约束聚类的系统，其特征在于，应用权利要求1-5任一所述的基于马尔科夫随机场的社交网络用户约束聚类方法，包括：数据点采集模块、数据处理模块、输出模块；所述的数据点采集模块、数据处理模块、输出模块分别与所述的数据处理模块连接；所述的数据点采集模块用于采集不同的用户数据，得到用户数据点。
说明书desc
技术领域本发明涉及数据处理领域，具体是基于马尔科夫随机场的社交网络用户约束聚类方法及系统。背景技术聚类是要确定一个物体的类别，但和分类问题不同的是，这里没有事先定义好的类别，聚类算法要自己想办法把一批样本分开，分成多个类，保证每一个类中的样本之间是相似的，而不同类的样本之间是不同的。在这里，类型被称为“簇”。而约束聚类而是在原有的聚类上加入了两种约束：must-link:必连约束，是指样本必属于同一个簇。如果2 个样本满足必连约束，那么在聚类时这 2 个样本应该被分到同一个簇中。 cannot-link:勿连约束，是指样本不必属于同一个簇。如果 2 个样本满足勿连约束，那么在聚类时这2个样本不应该被分到同一个簇中。随着社交网络的普及，用户生成的内容呈爆炸式增长，这为数据分析和挖掘提供了丰富的资源。在社交网络中，用户的行为、兴趣、偏好等都以各种形式存在，如何有效地对这些信息进行挖掘，以便更好地理解用户群体，提升用户体验，成为了迫切需要解决的问题。对于约束聚类问题，现有技术无法纠出存在一些标注错误的问题。因此，如何精确的标注不同的用户，并且纠正标注的错误，是当下需要解决的问题。发明内容本发明的目的在于克服现有技术的不足，提供基于马尔科夫随机场的社交网络用户约束聚类方法，包括如下步骤：步骤一，根据采集的用户数据点，随机选择一个数据点作为广度优先搜索的起点，将随机选择的这个数据点随机赋给一个标签，将标签的概率赋值为1；将除起点外其余各数据点，属于各标签的概率初始化为1/K，其中K表示要划分为的簇的数量；设置visited数组并初始化为False；对于广度优先搜索每次访问的数据点，将其在visited数组中设置为True，并使用其邻域内已访问的数据点来计算该数据点的属于各个标签的概率；步骤二，顺序遍历所有的数据点，使用正在访问的数据点的邻域内的所有的数据点来计算该数据点概率，每轮遍历统计概率更新了的数据点的个数，若没有数据点更新概率，则迭代结束，得到所有数据点属于不同标签的概率；步骤三，遍历所有的标签，两端实例点属于同一标签的概率相乘再累加得到must-link的概率，根据标注属于must-link的概率得到标注属于cannot-link的概率，若标注属于must-link的概率大于标注属于cannot-link的概率，而标注为cannot-link，则判断标注错误；若标注属于cannot-link的概率大于标注属于must-link的概率，而标注为must-link，则判断标注错误。进一步的，所述的对于广度优先搜索每次访问的数据点，设置visited数组并初始化为False，使用其邻域内已访问的数据点来计算该数据点的属于各个标签的概率，包括：从广度优先搜索的起点开始访问，将正在访问的数据点在visited数组中设置为True，遍历该数据点的邻域，如果邻居数据点还未被访问，则将其放入队列中，计算该数据点属于不同标签的概率，上一个数据点计算完成后，取出队列首位的一个数据点，访问该数据点并计算该数据点属于不同标签的概率。进一步的，所述的顺序遍历所有的数据点，使用正在访问的数据点的邻域内的所有的数据点来计算该数据点概率，每轮遍历统计概率更新了的数据点的个数，其中的概率的更新，采用信念传播算法，计算成对马尔科夫随机场的势函数：势函数分为两个部分：距离势函数/＞和约束势函数：距离势函数：其中dist表示需要计算势函数的两数据点之间的距离，maxdist表示数据集中最远的两个数据点之间的欧式距离，K表示要划分的簇的数量；约束势函数为：而总的势函数的计算如下：势函数=约束势函数×α+距离势函数；即：其中α表示约束势函数相较于距离势函数需要提高的数量级；计算完势函数，即可计算邻域的数据点传递给数据点/＞的标签为m的消息：其中表示数据点/＞属于标签t,/＞属于标签m间的势函数，表示/＞属于标签t的概率。计算完邻域内的所有数据点传递的消息后，接着计算归一化因子：接着就可以计算该数据点属于某标签m的概率：进一步的，对于邻域的计算，若约束的总数量为total_constr条，数据点的总数为total_points个，则与每个数据点相连的约束平均有2*total_constr/total_points条，先将与该数据点有约束相连的数据点算入邻域，如果没有达到根据约束的平均数量，则照距离从近到远将邻域内的数据点补充至平均数量。进一步的，所述的根据标注属于must-link的概率得到标注属于cannot-link的概率，为：cannot-link的概率=1-must-link的概率。基于马尔科夫随机场的社交网络用户约束聚类的系统，应用所述的基于马尔科夫随机场的社交网络用户约束聚类方法，包括：数据点采集模块、数据处理模块、输出模块；所述的数据点采集模块、数据处理模块、输出模块分别与所述的数据处理模块连接；所述的数据点采集模块用于采集不同的用户数据，得到用户数据点。本发明的有益效果是：本发明使用马尔科夫随机场进行聚类，可以得到每个数据点属于各个标签的概率，并且可以找出标注错误。附图说明图1为基于马尔科夫随机场的社交网络用户约束聚类方法的流程示意图。具体实施方式下面结合附图进一步详细描述本发明的技术方案，但本发明的保护范围不局限于以下所述。为了使本发明的目的，技术方案及优点更加清楚明白，结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅用以解释本发明，并不用于限定本发明，即所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本发明实施例的组件可以以各种不同的配置来布置和设计。因此，以下对在附图中提供的本发明的实施例的详细描述并非旨在限制要求保护的本发明的范围，而是仅仅表示本发明的选定实施例。基于本发明的实施例，本领域技术人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都属于本发明保护的范围。需要说明的是，术语“第一”和“第二”等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”，“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程，方法，物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程，方法，物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程，方法，物品或者设备中还存在另外的相同要素。以下结合实施例对本发明的特征和性能作进一步的详细描述。如图1所示，基于马尔科夫随机场的社交网络用户约束聚类方法，包括如下步骤：步骤一，根据采集的用户数据点，随机选择一个数据点作为广度优先搜索的起点，将随机选择的这个数据点随机赋给一个标签，将标签的概率赋值为1；将除起点外其余各数据点，属于各标签的概率初始化为1/K，其中K表示要划分为的簇的数量；设置visited数组并初始化为False；对于广度优先搜索每次访问的数据点，将其在visited数组中设置为True，并使用其邻域内已访问的数据点来计算该数据点的属于各个标签的概率；步骤二，顺序遍历所有的数据点，使用正在访问的数据点的邻域内的所有的数据点来计算该数据点概率，每轮遍历统计概率更新了的数据点的个数，若没有数据点更新概率，则迭代结束，得到所有数据点属于不同标签的概率；步骤三，遍历所有的标签，两端实例点属于同一标签的概率相乘再累加得到must-link的概率，根据标注属于must-link的概率得到标注属于cannot-link的概率，若标注属于must-link的概率大于标注属于cannot-link的概率，而标注为cannot-link，则判断标注错误；若标注属于cannot-link的概率大于标注属于must-link的概率，而标注为must-link，则判断标注错误。所述的对于广度优先搜索每次访问的数据点，设置visited数组并初始化为False，使用其邻域内已访问的数据点来计算该数据点的属于各个标签的概率，包括：从广度优先搜索的起点开始访问，将正在访问的数据点在visited数组中设置为True，遍历该数据点的邻域，如果邻居数据点还未被访问，则将其放入队列中，计算该数据点属于不同标签的概率，上一个数据点计算完成后，取出队列首位的一个数据点，访问该数据点并计算该数据点属于不同标签的概率。所述的顺序遍历所有的数据点，使用正在访问的数据点的邻域内的所有的数据点来计算该数据点概率，每轮遍历统计概率更新了的数据点的个数，其中的概率的更新，采用信念传播算法，计算成对马尔科夫随机场的势函数：势函数分为两个部分：距离势函数/＞和约束势函数：距离势函数：其中dist表示需要计算势函数的两数据点之间的距离，maxdist表示数据集中最远的两个数据点之间的欧式距离，K表示要划分的簇的数量；约束势函数为：而总的势函数的计算如下：势函数=约束势函数×α+距离势函数；即：其中α表示约束势函数相较于距离势函数需要提高的数量级；计算完势函数，即可计算邻域的数据点传递给数据点/＞的标签为m的消息：其中表示数据点/＞属于标签t,/＞属于标签m间的势函数，表示/＞属于标签t的概率。计算完邻域内的所有数据点传递的消息后，接着计算归一化因子：接着就可以计算该数据点属于某标签m的概率：对于邻域的计算，若约束的总数量为total_constr条，数据点的总数为total_points个，则与每个数据点相连的约束平均有2*total_constr/total_points条，先将与该数据点有约束相连的数据点算入邻域，如果没有达到根据约束的平均数量，则照距离从近到远将邻域内的数据点补充至平均数量。所述的根据标注属于must-link的概率得到标注属于cannot-link的概率，为：cannot-link的概率=1-must-link的概率。基于马尔科夫随机场的社交网络用户约束聚类的系统，应用所述的基于马尔科夫随机场的社交网络用户约束聚类方法，包括：数据点采集模块、数据处理模块、输出模块；所述的数据点采集模块、数据处理模块、输出模块分别与所述的数据处理模块连接；所述的数据点采集模块用于采集不同的用户数据，得到用户数据点。具体的，步骤一：随机选择一个数据点作为BFS的起点，将此起点随机赋给一个标签，将该标签的概率赋值为1；并将除起点外其余各数据点，属于各标签的概率初始化为1/K，设置visited数组并初始化为False。对于BFS每次访问的数据点，使用其邻域内已访问的数据点来计算该数据点的属于各个标签的概率。其中BFS表示广度优先搜索，K表示此数据集要分的簇的数量。步骤二：顺序遍历所有的数据点，使用其邻域内的所有的数据点来计算要访问的数据点的概率，每轮遍历统计概率更新了的数据点的个数，如果没有数据点更新概率，则迭代结束。步骤三：遍历所有的标注，根据标注两端的数据点属于不同标签的概率，计算此标注属于must-link的概率，用1减去此概率得到cannot-link的概率，如果must-link的概率大于cannot-link的概率，而此标注为cannot-link，则认为此标注错误，cannot-link同理。对于概率的更新，我们采用信念传播算法，计算成对马尔科夫随机场的势函数：这里的势函数分为两个部分：距离势函数/＞和约束势函数/＞：对于距离势函数，我们需要构建一个势函数随距离减小而增大的模型，并映射到0-1之间，即若两个数据点之间的距离越小，则这两个数据点越又可能聚到一个类中去。在实验中我们设置的是，其中dist表示两数据点/＞之间的距离，maxdist表示数据集中最远的两个数据点之间的欧式距离。对于约束势函数，我们同样需要设置在0-1之间的常数，来衡量must-link和cannot-link的影响，如果是must-link则接近1，如果是cannot-link，则接近为0，如果既不是must-link也不是cannot-link，则接近中间值。在实验中我们设置的约束势函数为：最后计算完两种势函数，我们来计算总的势函数：势函数=约束势函数×α+距离势函数其中α表示约束势函数相较于距离势函数需要提高的数量级。在实验中，我们设置的是。计算完势函数，即可计算邻域的数据点传递给数据点/＞的标签为m的消息：其中表示数据点/＞属于标签t,/＞属于标签m间的势函数，表示/＞属于标签t的概率。计算完邻域内的所有数据点传递的消息后，接着计算归一化因子：接着就可以计算该数据点属于某标签m的概率：对于邻域的计算，若约束的总数量为total_constr条，数据点的总数为total_points个，则与每个数据点相连的约束平均有2*total_constr/total_points条，先将与该数据点有约束相连的数据点算入邻域，如果没有达到根据约束的平均数量，则照距离从近到远将邻域内的数据点补充至平均数量。以上所述仅是本发明的优选实施方式，应当理解本发明并非局限于本文所披露的形式，不应看作是对其他实施例的排除，而可用于各种其他组合、修改和环境，并能够在本文所述构想范围内，通过上述教导或相关领域的技术或知识进行改动。而本领域人员所进行的改动和变化不脱离本发明的精神和范围，则都应在本发明所附权利要求的保护范围内。
