标题title
一种自动回环三维重建系统及运行方法
摘要abst
本发明公开了一种自动回环三维重建系统及运行方法，系统包括移动式扫描设备模块和回环底座单元模块，其中回环底座单元模块个数根据实际工况路径交叉的情况来确定，移动式扫描设备模块包括：激光雷达模块、相机模块、姿态传感器模块、驱动单元、计算单元、按键、显示屏和回环插口单元；本发明技术方案通过支持系统硬件自动触发回环的方式来解决点云对准以及回环点标记的问题，有效解决了基于激光雷达的三维重建系统中点云的累计误差问题从而可以获得可靠的三维点云建模结果。
权利要求书clms
1.一种自动回环三维重建系统，其特征在于，包括移动式扫描设备模块和回环底座单元模块，所述移动式扫描设备模块具体包括：回环插口单元：与驱动单元连接，传输状态数据包；驱动单元：通过驱动信号连接至激光雷达模块进行驱动控制，连接计算单元进行数据传输；激光雷达模块：获取待扫描物体表面的三维结构信息，获取来自驱动单元的同步驱动信号，并将点云数据发送给计算单元供后续算法处理；计算单元：获取系统各单元模块的各种数据并进行相关的数据记录和算法处理，通过显示接口连接显示屏建立与用户的交互逻辑。2.根据权利要求1所述的一种自动回环三维重建系统，其特征在于，所述回环插口单元包括簧片驱动单元、公共端和簧片组，所述簧片驱动单元为所述簧片提供上拉电平，并且实时检测簧片组电压状态，将所检测的电压状态通过数据协议包发送至所述驱动单元进行传输。3.根据权利要求1所述的一种自动回环三维重建系统，其特征在于，还包括相机模块和姿态传感器模块，所述相机模块和姿态传感器模块分别接入所述驱动单元的驱动信号进行驱动控制，所述姿态传感器模块将采集的姿态数据回传至驱动单元进行下一步传输，所述相机模块将采集的图像数据传输至所述计算单元。4.根据权利要求1所述的一种自动回环三维重建系统，其特征在于，还包括按键模块，所述按键模块连接所述驱动单元传输按键信号数据。5.根据权利要求2所述的一种自动回环三维重建系统，其特征在于，所述回环底座单元模块包括一个或多个，每个所述的回环底座单元模块包括一个公共端和一个簧片，簧片与公共端短路连接。6.根据权利要求5所述的一种自动回环三维重建系统，其特征在于，所述回环插口单元公共端和簧片组设置于回环插口单元底面，包括MxN个导体金属片，M为横列数，N为纵列数；其中一片为接地的公共端，其余为被所述簧片驱动单元电压上拉到供电电压的簧片端；所述回环底座单元模块公共端位置与回环插口单元公共端位置对应，每个回环底座单元模块根据ID号设置其簧片位置。7.一种自动回环三维重建系统运行方法，基于权利要求1~6任意一项所述的一种自动回环三维重建系统实现，其特征在于，包括以下步骤;步骤S1：根据扫描作业场景确定工作路径并设置n个路径交叉点，每个路径交叉点对应部署一个回环底座单元模块；步骤S2：开机扫描从第n点出发，每路过一个回环底座单元模块就将移动式扫描设备模块插入一定时间，在移动式扫描设备模块的显示屏上显示了过程结束标志后，拔出移动式扫描设备模块，继续采集工作；步骤S3：按照回环ID的判断和位姿的确定将回环ID报告给计算单元，获取该位置三维点云建模；步骤S4：经过所有的路径后，获得整个运动过程中的精确三维点云模型，通过计算单元导出完成整个回环运动过程的三维点云模型图。8.根据权利要求7所述的一种自动回环三维重建系统运行方法，其特征在于，所述步骤S3回环ID的判断和位姿的确定包括以下子步骤：步骤S31：回环底座单元模块和移动式扫描设备模块嵌入式连接，组装自由度限制只允许上下移动插入底座，当插入底部后，组装状态完全固定；步骤S32：移动式扫描设备模块接插到回环底座单元模块内，回环底座单元模块簧片ID与移动式扫描设备模块内部对应ID位置簧片连通，所述移动式扫描设备模块内部对应ID位置簧片上拉的供电电压短接到回环底座单元模块共地端，移动式扫描设备模块内部对应ID位置簧片的电压置0；步骤S33：移动式扫描设备模块通过簧片驱动单元获取到电平的转变，并将该信息通过驱动单元转发到计算单元内部，实现插入底座时对底座ID的自动识别；步骤S34：每次到对应位置回环底座单元模块时将移动式扫描设备模块插入底座内，当前插入底座点云与上次插入底座点云之间的位置与姿态对准。9.根据权利要求7所述的一种自动回环三维重建系统运行方法，其特征在于，所述步骤S3三维点云建模的获取具体包括：计算单元采集此位置一段时间的点云数据累计后，与上一次来到此位置的点云数据累计进行比对，计算旋转平移误差后进入全局图优化来进行累计误差优化，消除移动式扫描设备模块运动过程中的位姿误差，获取两次回环间高精度低误差的三维点云建模。
说明书desc
技术领域本发明涉及三维扫描、测绘、仪器仪表技术领域，尤其涉及一种自动回环三维重建系统及运行方法。背景技术激光雷达三维重建的算法是在实时环境中实现移动机器人或传感器设备的自主导航和环境地图构建。这一领域的核心挑战之一是累积误差的处理，尤其是在大场景中，由于机器人移动过程中的不确定性，逐渐积累的误差可能导致定位不准确、地图失真等问题。为了解决这些问题，激光雷达三维重建算法采用了多种关键技术。通过激光雷达获得的点云数据，SLAM系统进行特征提取与匹配，识别出环境中的显著特征，例如边缘和平面。这些特征不仅有助于定位机器人，还用于匹配相邻帧之间的信息，实现轨迹的连续跟踪。后端优化算法发挥关键作用，通过最小化相邻帧之间的误差，对机器人轨迹和地图进行调整。这种优化有助于提高整体地图的一致性，减小由于运动不确定性引起的累积误差。回环检测是另一个重要的组成部分，通过检测机器人是否回到先前访问过的位置，发现并纠正累积误差。当系统检测到回环时，进行闭环校正，利用全局图优化和约束更新来保持地图的一致性。此外，激光雷达的运动模型也被广泛用于估计机器人在不同时刻之间的运动，提供初始的位姿估计。激光雷达SLAM的算法背景涵盖了特征提取、后端优化、回环检测、激光雷达运动模型等多个方面，旨在实现高精度的自主导航和环境地图构建，同时克服由累积误差引起的挑战。而使用激光雷达进行三维扫描中的前端里程计负责获取移动过程中的位姿，但存在累计误差，即在进行一个大场景的重建时，通过扫描设备从一个位置进行扫描，当经过一段路程后因为累计误差会导致返回该位置时点云出现错位分层，导致较大误差。目前采用较多的方式有两种，一种是通过构建回环算子且在返回原始位置时进行算子比对，当满足条件时会进行更精准的点云匹配，从而获取两次精准的旋转平移误差，从而通过全局图优化算法进行累计误差消除；另一种方法则通过地面标记点来实现回环和精准误差测算，但是每次到达标记位置时，需要进行复杂的对准及按键操作，且在后处理过程中需要逐个回环位置人工识别，效率很低。发明内容针对上述问题，本发明提出了一种自动回环三维重建系统及运行方法，快速触发回环且后期可以自动处理完毕所有回环过程，具体技术方案如下。第一方面，一种自动回环三维重建系统，包括移动式扫描设备模块和回环底座单元模块，所述移动式扫描设备模块具体包括：回环插口单元：与驱动单元连接，传输状态数据包；驱动单元：通过驱动信号连接至激光雷达模块进行驱动控制，连接计算单元进行数据传输；激光雷达模块：获取待扫描物体表面的三维结构信息，获取来自驱动单元的同步驱动信号，并将点云数据发送给计算单元供后续算法处理；计算单元：获取系统各单元模块的各种数据并进行相关的数据记录和算法处理，通过显示接口连接显示屏建立与用户的交互逻辑。进一步，所述回环插口单元包括簧片驱动单元、公共端和簧片组，所述簧片驱动单元为所述簧片提供上拉电平，并且实时检测簧片组电压状态，将所检测的电压状态通过数据协议包发送至所述驱动单元进行传输。进一步，还包括相机模块和姿态传感器模块，所述相机模块和姿态传感器模块分别接入所述驱动单元的驱动信号进行驱动控制，所述姿态传感器模块将采集的姿态数据回传至驱动单元进行下一步传输，所述相机模块将采集的图像数据传输至所述计算单元。进一步，还包括按键模块，所述按键模块连接所述驱动单元传输按键信号数据。进一步，所述回环底座单元模块包括一个或多个，每个所述的回环底座单元模块包括一个公共端和一个簧片，簧片与公共端短路连接。进一步，所述回环插口单元公共端和簧片组设置于回环插口单元底面，包括MxN个导体金属片，M为横列数，N为纵列数；其中一片为接地的公共端，其余为被所述簧片驱动单元电压上拉到供电电压的簧片端；所述回环底座单元模块公共端位置与回环插口单元公共端位置对应，每个回环底座单元模块根据ID号设置其簧片位置。另一方面，一种自动回环三维重建系统运行方法，基于所述的一种自动回环三维重建系统实现，包括以下步骤;步骤S1：根据扫描作业场景确定工作路径并设置n个路径交叉点，每个路径交叉点对应部署一个回环底座单元模块；步骤S2：开机扫描从第n点出发，每路过一个回环底座单元模块就将移动式扫描设备模块插入一定时间，在移动式扫描设备模块的显示屏上显示了过程结束标志后，拔出移动式扫描设备模块，继续采集工作；步骤S3：按照回环ID的判断和位姿的确定将回环ID报告给计算单元，获取该位置三维点云建模；步骤S4：经过所有的路径后，获得整个运动过程中的精确三维点云模型，通过计算单元导出完成整个回环运动过程的三维点云模型图。进一步，所述步骤S3回环ID的判断和位姿的确定包括以下子步骤：步骤S31：回环底座单元模块和移动式扫描设备模块嵌入式连接，组装自由度限制只允许上下移动插入底座，当插入底部后，组装状态完全固定；步骤S32：移动式扫描设备模块接插到回环底座单元模块内，回环底座单元模块簧片ID与移动式扫描设备模块内部对应ID位置簧片连通，所述移动式扫描设备模块内部对应ID位置簧片上拉的供电电压短接到回环底座单元模块共地端，移动式扫描设备模块内部对应ID位置簧片的电压置0；步骤S33：移动式扫描设备模块通过簧片驱动单元获取到电平的转变，并将该信息通过驱动单元转发到计算单元内部，实现插入底座时对底座ID的自动识别；步骤S34：每次到对应位置回环底座单元模块时将移动式扫描设备模块插入底座内，当前插入底座点云与上次插入底座点云之间的位置与姿态对准。进一步，所述步骤S3三维点云建模的获取具体包括：计算单元采集此位置一段时间的点云数据累计后，与上一次来到此位置的点云数据累计进行比对，计算旋转平移误差后进入全局图优化来进行累计误差优化，消除移动式扫描设备模块运动过程中的位姿误差，获取两次回环间高精度低误差的三维点云建模。本发明的有益效果：本发明提出了一种自动回环三维重建系统及运行方法，通过支持系统硬件自动触发回环的方式来解决点云对准以及回环点标记的问题，有效解决了基于激光雷达的三维重建系统中点云的累计误差问题从而可以获得可靠的三维点云建模结果。系统通过不同回环底座单元中的簧片位置以及公共端的短路连接，使得回环插口单元中的簧片驱动单元可以获取不同底座的唯一ID号，并且固定底座到地面通过其结构卡位确保了扫描设备卡入的位置及姿态完全确定，保证了每次卡入的准确性大大减少了后期算法对点云匹配及位姿校准的难度。最终通过该系统构成的自动回环系统可以实现鲁棒可靠的三维重建效果。附图说明图1是本发明实施例中一种自动回环三维重建系统架构图；图2是本发明实施例中移动扫描设备和回环底座单元的导体金属片分布图；图3是本发明实施例中自动回环三维重建系统工作现场示意图。具体实施方式为了对本发明的技术特征、目的和效果有更加清楚的理解，现对照附图说明本发明的具体实施方式。本发明提出了一种自动回环三维重建系统及运行方法，快速触发回环且后期可以自动处理完毕所有回环过程，有效的解决了回环效率低且需要后期人工操作的问题，在一种优选的实施例中，其架构如图1所示，自动回环三维重建系统分为移动式扫描设备模块和回环底座单元两部分，其中回环底座单元个数根据实际工况路径交叉的情况来确定。移动式扫描设备模块包含8个部分，分别为：激光雷达、相机、姿态传感器、驱动单元、计算单元、按键、显示屏、回环插口单元，其中回环插口单元包含3个部分簧片驱动单元、公共端簧片、数个簧片。移动式扫描设备模块包括：激光雷达：用于获取待扫描物体表面的三维结构信息，数据以激光雷达本身的中心作为原点，每秒钟产生几十万到百万个点，每个点的信息以雷达作为原点的欧式坐标x、y、z或者极坐标横向角度、纵向角度，距离表示；为移动式扫描设备模块的核心传感器单元；激光雷达获取来自驱动单元的同步驱动信号，并将点云数据发送给计算单元供后续算法处理。相机：用于采集彩色或黑白图像信息，用于给激光雷达点云赋予颜色，获取更加多维的感知信息；相机获取来自驱动单元的同步驱动信号，并将获取到的图像数据流直接发送到计算单元。姿态传感器：用于获取移动式扫描设备模块的姿态信息，包括横滚角、旋转角、俯仰角；姿态传感器获取来自驱动单元的同步触发信号并且将数据发送到驱动单元。计算单元：计算单元为具备一定性能的工控机或小型电脑或移动终端，功能为获取系统的各种数据并且建立于用户的交互逻辑、以及进行相关的数据记录和算法处理。接受的数据有相机的图像数据、激光雷达的点云数据、驱动单元的系统运行状态及时间戳数据，并连接有显示屏用于图像化显示以及用户交互。并且该计算单元也可通过typeC等接口外界各种设备，获取一定可拓展性。驱动单元：用于给整个设备提供控制信号以及获取交互信息，并且将信息与计算单元建立联系，上载到计算单元内部，并且接受计算单元的控制信号。具体来讲，驱动单元给激光雷达、相机根据传感器所需的同步信号，通常是固定频率的电压脉冲信号；根据姿态传感器所需的同步驱动信号通常是包括IIC、SPI、UART等串行接口信号或电压脉冲信号或电平信号。另外接受来自按键的触发信号、获得来自簧片驱动单元的簧片连接状态、获得来自姿态传感器的位置姿态信号，打包这些数据形成数据包，统一发送给计算单元，供后续算法进行处理。按键：按键用于使用者对系统进行交互操作，按键信息会发送给驱动单元打包后发送给计算单元用于业务逻辑交互。显示屏：用于显示系统操作界面，提供给使用者交互界面。回环插口单元：回环插口单元分为簧片驱动单元、公共端和数个簧片。其中簧片及公共端均为添加弹簧机构的或不加弹簧机构的导体金属片，区别在于公共端连接了系统的地信号，电压值为0伏特，而数个簧片则通过驱动单元进行了电压上拉，而簧片驱动单元的功能为提供给簧片组以上拉电平，并且时刻检测簧片上的电压状态，将这些电压状态打包成数据协议包，发送给驱动单元转发打包后给到计算单元供后续算法处理或记录。回环底座单元：回环底座单元功能为建立簧片于公共端导体金属片的短路连接，主要组成为公共端和簧片。系统工作过程介绍：A. 回环ID判断和位姿确定：如图2所示，上部分为移动式扫描设备模块，下层为回环插口单元，其底面具备MxN个导体金属片，其中的一片为接地端，其余为被簧片驱动单元电压上拉到供电电压的簧片端。下部分为一种回环底座单元，其承载的上表面存在与之对应的金属簧片，其中簧片组只有一个保留，其余均簧片位置均不贴装，即只贴装底座ID号对应的簧片和共地端。对于如下情况只贴装左下角共地端以及10号簧片，则本回环底座ID号为10。移动式扫描设备模块接插到底座内时，因为底座中10号簧片与共地端短接，移动式扫描设备模块内部的簧片10上拉的供电电压会被短接到共地端，导致簧片10处的电压被置为了0伏特，从而移动式扫描设备模块终端簧片驱动单元获取到电平的转变，并将该信息通过驱动单元转发到计算单元内部，实现了插入底座时，对底座ID的自动识别。同时回环底座单元和移动式扫描设备模块设计了嵌入式设计，将组装自由度限制为了1通知计算单元进入了回环位置、且上报了回环ID号； 完成了当前插入底座点云与上次插入底座点云之间的位置与姿态对准。如此该系统即可完成自动的回环状态判断与累计误差自动校准，且不需要后续的人工选点处理，直接完成点云图的工作流程。B. 系统作业流程：如图3举例了一种使用移动式扫描设备模块和7个回环底座单元来进行自动回环的系统工作过程。1. 根据扫描作业场景确定工作路径，设置合理的路径交叉点，如下图行走路径交叉点为7个，则使用7个回环底座单元部署在这7个交叉点位置处。2. 开机扫描从七点出发，每路过一个回环底座就将移动式扫描设备模块插入一定时间，在移动式扫描设备模块的显示屏上显示了过程结束标志后，拔出移动式扫描设备模块，并继续采集工作；在此过程中，手持系统会按照A环ID判断和位姿确定中的回环ID判断和位姿确定原理将回环ID报告给计算单元，于此同时，计算单元采集了此位置的一段时间的点云累计，并与上一次来到此位置的点云累计进行比对，计算旋转平移误差后交给全局图优化来进行累计误差优化，消除移动式扫描设备模块运动过程中的位姿误差，从而获取两次回环间高精度低误差的三维点云建模。3. 如此经过所有的路径后，系统会获得整个运动过程中的精确三维点云模型。4. 采集结束后从计算单元中即可导出完成整个回环运动过程的三维点云模型图。本发明提出的系统通过支持系统硬件自动触发回环的方式来解决点云对准以及回环点标记的问题，有效解决了基于激光雷达的三维重建系统中点云的累计误差问题从而可以获得可靠的三维点云建模结果。系统通过不同回环底座单元中的簧片位置以及公共端的短路连接，使得回环插口单元中的簧片驱动单元可以获取不同底座的唯一ID号，并且固定底座到地面通过其结构卡位确保了扫描设备卡入的位置及姿态完全确定，保证了每次卡入的准确性大大减少了后期算法对点云匹配及位姿校准的难度。最终通过该系统构成的自动回环系统可以实现鲁棒可靠的三维重建效果。本发明以上显示和描述了本发明的基本原理和主要特征和本发明的优点。本行业的技术人员应该了解，本发明不受上述实施例的限制，上述实施例和说明书中描述的只是说明本发明的原理，在不脱离本发明精神和范围的前提下，本发明还会有各种变化和改进，这些变化和改进都落入要求保护的本发明范围内。本发明要求保护范围由所附的权利要求书及其等效物界定。
