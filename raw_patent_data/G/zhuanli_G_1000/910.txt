标题title
租户资源分配方法、装置、设备及存储介质
摘要abst
本发明提供了租户资源分配方法、装置、设备及存储介质。方法包括采用硬隔离策略为创建的租户分配节点资源，并采用软隔离策略为租户创建集群命名空间；在PaaS平台中构建租户资源管理系统，所述租户资源管理系统确定各集群命名空间对应的各租户的指标数据；租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，所述资源调整方式包括扩容、容量不变以及缩容；基于所述资源调整方式对各租户的资源进行调整。本方法能够自动分配更多的资源以满足高负载需求，并在负载减少时减少资源，提高了整体性能和用户体验。
权利要求书clms
1.一种租户资源分配方法，其特征在于，所述方法包括：步骤S1：采用硬隔离策略为创建的租户分配节点资源，并采用软隔离策略为租户创建集群命名空间；步骤S2：在PaaS平台中构建租户资源管理系统，所述租户资源管理系统包括指标采集模块、指标存储模块、资源控制模块和软件数据管理模块；所述指标采集模块用于定期采集各租户的数据，并确定各租户的指标数据；所述指标存储模块用于存储所述指标数据；所述资源控制模块用于根据所述指标数据确定所述租户的资源调整方式；所述软件数据管理模块用于管理节点资源；所述租户资源管理系统确定各集群命名空间对应的各租户的指标数据；步骤S3：所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，所述资源调整方式包括扩容、容量不变以及缩容；步骤S4：所述租户资源管理系统基于所述资源调整方式对各租户的资源进行调整。2.如权利要求1所述的方法，其特征在于，所述步骤S2：所述租户资源管理系统确定各集群命名空间对应的各租户的指标数据，其中，指标数据至少包括：租户已分配的所有节点资源的总资源大小n、预设的资源使用率S、平均资源使用率U、租户下所属服务请求资源大小R、以及租户已分配的所有节点资源中最大节点资源的资源大小c。3.如权利要求2所述的方法，其特征在于，所述步骤S3，所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，包括：步骤S301：所述租户资源管理系统根据租户的指标数据中的租户已分配的所有节点资源的总资源大小、预设的资源使用率与平均资源使用率，确定租户的第一资源调整值；步骤S302：若所述第一资源调整值大于或等于第一预设阈值，则确定租户的资源调整方式为扩容租户的节点资源；其中，第一资源调整值P1，具体如下：。4.如权利要求2所述的方法，其特征在于，所述步骤S3，所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，包括：步骤S311：根据租户的租户下所属服务请求资源大小、租户已分配的所有节点的总资源大小与租户已分配的所有节点中最大节点的资源大小，确定租户的第二资源调整值；步骤S312：若所述第二资源调整值大于或等于第二预设阈值，则确定租户的资源调整方式为扩容租户的节点资源；其中，第二资源调整值P2，具体如下：。5.如权利要求3-4中任一项所述的方法，其特征在于，确定租户的资源调整方式为扩容租户的节点资源后，执行以下操作：将一天24小时按预设的时长进行分割，每个分割后的时间段作为一个时间区间；确定当前时间对应的时间区间，标记当前时间区间为需进行扩容；获取当前时间区间的历史数据，所述历史数据中记录有距离当前日期最近的、连续的若干天内的各个时间区间的标记，记所述历史数据累计天数为DATE；获取所述历史数据中与所述当前时间区间对应一致的各个时间区间的标记；确定当前时间区间对应的净扩容次数，所述净扩容次数为获取的标记中，标记为需进行扩容的总个数减去标记为需进行缩容的总个数的值，若所述当前时间区间对应的净扩容次数大于0，则计算历史数据中与所述当前时间区间对应一致的各个时间区间对应的净扩容次数大于0的天数总和，记为T；则当前时间区间内需要扩容的概率为P3，P3=T/DATE；若P3超过预设概率P，则进行扩容；扩容后，设置惯性保持时间TIME，将当前时间与所述惯性保持时间TIME的加和作为保持结束时间，从所述当前时间至所述保持结束时间内，不执行缩容操作。6.如权利要求2所述的方法，其特征在于，所述步骤S3，所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，包括：步骤S321：根据租户的指标数据中的租户已分配的所有资源节点的总资源大小、预设的资源使用率与平均资源使用率，确定租户的第一资源调整值；步骤S322：若所述第一资源调整值小于第一预设阈值，则确定缩容租户的节点资源。7.如权利要求2所述的方法，其特征在于，确定缩容租户的节点资源后，执行以下操作：将一天24小时按预设的时长进行分割，每个分割后的时间段作为一个时间区间；确定当前时间对应的时间区间，标记当前时间区间为需进行缩容；获取当前时间区间的历史数据，所述历史数据中记录有距离当前日期最近的、连续的若干天内的各个时间区间的标记，记所述历史数据累计天数为DATE；获取所述历史数据中与所述当前时间区间对应一致的各个时间区间的标记；确定当前时间区间对应的净缩容次数，所述净缩容次数为获取的标记中，标记为需进行缩容的总个数减去标记为需进行扩容的总个数的值，若所述当前时间区间对应的净缩容次数大于0，则计算历史数据中与所述当前时间区间对应一致的各个时间区间对应的净缩容次数大于0的天数总和，记为T1；则当前时间区间内需要扩容的概率为P4，P4=T1/DATE；设置惯性保持时间TIME；若P4超过预设概率P，且当前时间距离当前时间区间起始时间超过所述惯性保持时间，则进行阶梯式缩容；缩容后，将当前时间与所述惯性保持时间TIME的加和作为保持结束时间，从所述当前时间至所述保持结束时间内，不执行缩容操作。8.一种租户资源分配装置，其特征在于，所述装置包括：初始化模块：配置为采用硬隔离策略为创建的租户分配节点资源，并采用软隔离策略为租户创建集群命名空间；采集模块：配置为在PaaS平台中构建租户资源管理系统，所述租户资源管理系统包括指标采集模块、指标存储模块、资源控制模块和软件数据管理模块；所述指标采集模块用于定期采集各租户的数据，并确定各租户的指标数据；所述指标存储模块用于存储所述指标数据；所述资源控制模块用于根据所述指标数据确定所述租户的资源调整方式，所述租户的资源包括CPU和内存；所述软件数据管理模块用于管理节点资源；所述租户资源管理系统确定各集群命名空间对应的各租户的指标数据；分析模块：配置为所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，所述资源调整方式包括扩容、容量不变以及缩容；调整模块：配置为所述租户资源管理系统基于所述资源调整方式对各租户的资源进行调整。9.一种租户资源分配设备，其特征在于，所述设备包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-7中任一项所述方法。10.一种存储有计算机指令的非瞬时计算机可读存储介质，其特征在于，所述计算机指令用于使所述计算机执行根据权利要求1-7中任一权利要求所述的方法。
说明书desc
技术领域本发明涉及云计算技术领域，尤其涉及一种租户资源分配方法、装置、设备及存储介质。背景技术平台即服务作为云计算的一种重要服务模式，为用户提供了应用程序开发和部署所需的资源和服务。随着云计算技术的不断发展，应用场景的多样化，PaaS容器云平台多租户场景被越来越多的受到关注。多租户技术是共用相同的底层资源池，保证租户间数据隔离。不同租户中的资源彼此隔离，使得它们既可以共享一个平台资源，也能够互不干扰。多租户管理的核心是分配好人员和资源之间的权限关系。现有技术中，主要是采用静态资源分配方式，将容器云平台的计算资源、存储资源和网络资源，分配给各租户，让租户根据自身使用场景管理应用、用户和资源。但是，现有的这种静态资源分配方式，难以应对动态的资源需求，可能导致资源浪费和性能下降。发明内容为解决上述技术问题，本发明提出了一种租户资源分配方法、装置、设备及存储介质，用以解决静态资源分配方式，难以应对动态的资源需求，可能导致资源浪费和性能下降的技术问题。本发明提出了一种租户资源分配方法，所述方法包括：步骤S1：采用硬隔离策略为创建的租户分配节点资源，并采用软隔离策略为租户创建集群命名空间；步骤S2：在PaaS平台中构建租户资源管理系统，所述租户资源管理系统包括指标采集模块、指标存储模块、资源控制模块和软件数据管理模块；所述指标采集模块用于定期采集各租户的数据，并确定各租户的指标数据；所述指标存储模块用于存储所述指标数据；所述资源控制模块用于根据所述指标数据确定所述租户的资源调整方式，所述租户的资源包括CPU和内存；所述软件数据管理模块用于管理节点资源；所述租户资源管理系统确定各集群命名空间对应的各租户的指标数据；步骤S3：所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，所述资源调整方式包括扩容、容量不变以及缩容；步骤S4：所述租户资源管理系统基于所述资源调整方式对各租户的资源进行调整。优选地，所述步骤S2：所述租户资源管理系统确定各集群命名空间对应的各租户的指标数据，其中，指标数据至少包括：租户已分配的所有节点资源的总资源大小n、预设的资源使用率S、平均资源使用率U、租户下所属服务请求资源大小R、以及租户已分配的所有节点资源中最大节点资源的资源大小c。优选地，所述步骤S3，所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，包括：步骤S301：所述租户资源管理系统根据租户的指标数据中的租户已分配的所有节点资源的总资源大小、预设的资源使用率与平均资源使用率，确定租户的第一资源调整值；步骤S302：若所述第一资源调整值大于或等于第一预设阈值，则确定租户的资源调整方式为扩容租户的节点资源；其中，第一资源调整值P1，具体如下：。优选地，所述步骤S3，所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，包括：步骤S311：根据租户的租户下所属服务请求资源大小、租户已分配的所有节点的总资源大小与租户已分配的所有节点中最大节点的资源大小，确定租户的第二资源调整值；步骤S312：若所述第二资源调整值大于或等于第二预设阈值，则确定租户的资源调整方式为扩容租户的节点资源；其中，第二资源调整值P2，具体如下：。优选地，确定租户的资源调整方式为扩容租户的节点资源后，执行以下操作：将一天24小时按预设的时长进行分割，每个分割后的时间段作为一个时间区间；确定当前时间对应的时间区间，标记当前时间区间为需进行扩容；获取当前时间区间的历史数据，所述历史数据中记录有距离当前日期最近的、连续的若干天内的各个时间区间的标记，记所述历史数据累计天数为DATE；获取所述历史数据中与所述当前时间区间对应一致的各个时间区间的标记；确定当前时间区间对应的净扩容次数，所述净扩容次数为获取的标记中，标记为需进行扩容的总个数减去标记为需进行缩容的总个数的值，若所述当前时间区间对应的净扩容次数大于0，则计算历史数据中与所述当前时间区间对应一致的各个时间区间对应的净扩容次数大于0的天数总和，记为T；则当前时间区间内需要扩容的概率为P3，P3=T/DATE；若P3超过预设概率P，则进行扩容；扩容后，设置惯性保持时间TIME，将当前时间与所述惯性保持时间TIME的加和作为保持结束时间，从所述当前时间至所述保持结束时间内，不执行缩容操作。优选地，所述步骤S3，所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，包括：步骤S321：根据租户的指标数据中的租户已分配的所有资源节点的总资源大小、预设的资源使用率与平均资源使用率，确定租户的第一资源调整值；步骤S322：若所述第一资源调整值小于第一预设阈值，则确定缩容租户的节点资源。优选地，确定缩容租户的节点资源后，执行以下操作：将一天24小时按预设的时长进行分割，每个分割后的时间段作为一个时间区间；确定当前时间对应的时间区间，标记当前时间区间为需进行缩容；获取当前时间区间的历史数据，所述历史数据中记录有距离当前日期最近的、连续的若干天内的各个时间区间的标记，记所述历史数据累计天数为DATE；获取所述历史数据中与所述当前时间区间对应一致的各个时间区间的标记；确定当前时间区间对应的净缩容次数，所述净缩容次数为获取的标记中，标记为需进行缩容的总个数减去标记为需进行扩容的总个数的值，若所述当前时间区间对应的净缩容次数大于0，则计算历史数据中与所述当前时间区间对应一致的各个时间区间对应的净缩容次数大于0的天数总和，记为T1；则当前时间区间内需要扩容的概率为P4，P4=T1/DATE；设置设置惯性保持时间TIME；若P4超过预设概率P，且当前时间距离当前时间区间起始时间超过所述惯性保持时间，则进行阶梯式缩容；缩容后，将当前时间与所述惯性保持时间TIME的加和作为保持结束时间，从所述当前时间至所述保持结束时间内，不执行缩容操作。本发明提供一种租户资源分配装置，所述装置包括：初始化模块：配置为采用硬隔离策略为创建的租户分配节点资源，并采用软隔离策略为租户创建集群命名空间；采集模块：配置为在PaaS平台中构建租户资源管理系统，所述租户资源管理系统包括指标采集模块、指标存储模块、资源控制模块和软件数据管理模块；所述指标采集模块用于定期采集各租户的数据，并确定各租户的指标数据；所述指标存储模块用于存储所述指标数据；所述资源控制模块用于根据所述指标数据确定所述租户的资源调整方式，所述租户的资源包括CPU和内存；所述软件数据管理模块用于管理节点资源；所述租户资源管理系统确定各集群命名空间对应的各租户的指标数据；分析模块：配置为所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，所述资源调整方式包括扩容、容量不变以及缩容；调整模块：配置为所述租户资源管理系统基于所述资源调整方式对各租户的资源进行调整。本发明提供一种租户资源分配设备，所述设备包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行如前所述的方法。本发明提供一种存储有计算机指令的非瞬时计算机可读存储介质，所述计算机指令用于使所述计算机执行如前所述的方法。本发明先是采用硬隔离策略为创建的租户分配节点资源，并采用软隔离策略为租户创建集群命名空间，即通过软隔离策略与硬隔离策略相结合的租户隔离方式，提供了更强大的租户隔离方式，降低租户之间的资源相互干扰的影响，同时也保证了安全性；然后，获取集群内各租户的指标数据，根据各租户的指标数据，确定是否需要对各租户的节点资源进行调整，若是，则根据各租户的指标数据，对各租户的节点资源进行扩容操作或缩容操作，即动态分配各租户的节点资源，实现灵活管理租户资源，从而最大程度的提高资源利用率，同时减少资源浪费，从而降低了租户成本。由于资源配置的动态性，租户可以根据负载的变化获得更高的性能。系统能够自动分配更多的资源以满足高负载需求，并在负载减少时减少资源，提高了整体性能和用户体验。应当理解，发明内容部分中所描述的内容并非旨在限定本公开的实施例的关键或重要特征，亦非用于限制本公开的范围。本公开的其它特征将通过以下的描述变得容易理解。附图说明结合附图并参考以下详细说明，本公开各实施例的上述和其他特征、优点及方面将变得更加明显。附图用于更好地理解本方案，不构成对本公开的限定在附图中，相同或相似的附图标记表示相同或相似的元素，其中：图1为本发明提出的租户资源分配方法的流程示意图；图2为本发明提出的租户资源管理系统结构示意图；图3为本发明提出的租户资源分配方法的第二具体实施方式的示意图；图4为本发明提出的租户资源分配方法的第三具体实施方式的示意图；图5为本发明提出的租户资源分配方法的第四具体实施方式的示意图；图6为本发明提出的租户资源分配方法的第五具体实施方式的示意图；图7为本发明提出的租户资源分配方法的第六具体实施方式的示意图；图8为本发明提出的租户资源分配方法的第七具体实施方式的示意图；图9为本发明提出的租户资源分配方法的第八具体实施方式的示意图；图10为本发明提出的租户资源分配装置的结构示意图；图11为本申请实施例提供的一种电子设备的结构示意图。附图标记：101：指标采集模块，102：指标存储模块102，103：资源控制模块，104：软件数据管理模块。具体实施方式为使本公开实施例的目的、技术方案和优点更加清楚，下面将结合本公开实施例中的附图，对本公开实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本公开一部分实施例，而不是全部的实施例。基于本公开中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的全部其他实施例，都属于本公开保护的范围。图1示出了租户资源分配的流程示意图。应当理解，在其它实施例中租户资源分配方法其中部分步骤的顺序可以根据实际需要相互交换，或者其中的部分步骤也可以省略或删除。如图1所示，所述方法包括：步骤S1：采用硬隔离策略为创建的租户分配节点资源，并采用软隔离策略为租户创建集群命名空间；步骤S2：在PaaS平台中构建租户资源管理系统，所述租户资源管理系统包括指标采集模块、指标存储模块、资源控制模块和软件数据管理模块；所述指标采集模块用于定期采集各租户的数据，并确定各租户的指标数据；所述指标存储模块用于存储所述指标数据；所述资源控制模块用于根据所述指标数据确定所述租户的资源调整方式，所述租户的资源包括CPU和内存；所述软件数据管理模块用于管理节点资源；所述租户资源管理系统确定各集群命名空间对应的各租户的指标数据；步骤S3：所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，所述资源调整方式包括扩容、容量不变以及缩容；步骤S4：所述租户资源管理系统基于所述资源调整方式对各租户的资源进行调整。所述硬隔离策略为在物理层面上，使用独立的服务器、存储设备和网络设备为不同租户提供资源。所述硬隔离策略能够提供更高的安全性、隐私和性能，但代价通常更高，需要更多的硬件资源和管理成本。但是，仅使用硬隔离方式租户资源管理会出现无法有效管理其资源配额，导致资源不足，会引起服务性能下降，或者过度分配资源，浪费成本。因此，需要更好的资源分配和配额管理。所述软隔离策略是通过软件层面的控制和管理来实现租户间的隔离。例如，基于k8s集群环境下，通常使用命名空间作为软隔离机制，将租户隔离在同一个k8s集群内。其中，每个租户可以在自己的命名空间内创建和管理资源，并且可以通过使用资源配额来确保租户不会超出其分配的资源。但仅使用软隔离会出现如果租户间的隔离不够强大，一个租户的问题可能会影响到其他租户，或者资源竞争可能导致性能问题。通常，常见的租户隔离方式分为软隔离与硬隔离。其中，这两种隔离方式都是用于隔离不同租户之间的资源和数据。它们有不同的技术实现和特点。现有技术中，传统的资源分配方法通常是静态的，将容器云平台的计算资源、存储资源和网络资源，分配给各租户，让租户根据自身使用场景管理应用、用户和资源。因此，在现有技术中，无论是采用软隔离方式或硬隔离方式，均存在无法根据各租户的负载需求动态地调整其资源需求，导致资源浪费和性能下降的问题。本发明采样用了硬隔离策略与软隔离策略相结合的方式，能够动态的调整租户资源，提高集群整体资源使用率。所述步骤S1，在本实施例中，例如，以部署基于k8s集群的容器云平台系统为例。创建租户，为各租户初始设定请求资源，采用硬隔离策略默认为各租户分配两个单位节点资源，并根据租户为节点注入租户标签，标签以租户名称命名；同时，并采用软隔离策略为各租户创建集群命名空间，命名空间名称与各租户的名称一致。因此，在本实施例中，通过软隔离策略与硬隔离策略相结合的租户隔离方式，提供了更强大的租户隔离方式呢，降低租户之间的资源相互干扰的影响，同时也保证了安全性。图2为本申请实施例提供的一种租户资源管理系统的结构示意图，如图2所示，租户资源管理系统包括：指标采集模块101、指标存储模块102、资源控制模块103和软件数据管理模块104。其中，指标采集模块101用于采集各集群命名空间对应的各租户的数据，并确定各租户的指标数据，并将各租户的指标数据存储至指标存储模块102。本发明中使用一种灵活的、多维度的数据模型来采集和存储时间序列数据，然后支持查询和可视化这些数据，以提供洞察和数据。指标存储模块102用于接收、存储、管理和检索指标采集模块101采集的集群内各租户的指标数据，扩展了指标采集模块101的功能，解决了相互据长期存储、高可用性和全局查询等问题。资源控制模块103，用于从指标存储模块102定时获取集群内各租户的指标数据，并根据指标数据进行策略判断及计算，以对集群内各租户的节点资源进行管理、分配及控制，包括但不限于资源隔离、容器调度、资源监控、动态资源分配、自动伸缩、容器生命周期管理等，是主要的中心控制模块。软件数据管理模块104，用于管理和提供存储资源，以支持系统的数据持久性、可扩展性和隔离性。所述步骤S2：所述租户资源管理系统确定各集群命名空间对应的各租户的指标数据，其中，指标数据至少包括：租户已分配的所有节点资源的总资源大小n、预设的资源使用率S、平均资源使用率U、租户下所属服务请求资源大小R、以及租户已分配的所有节点资源中最大节点资源的资源大小c。其中，c即为冗余一个单位节点的资源，后续扩缩容时，通过此值衡量是否有冗余或者缺口。在本实施例中，例如，继续参考图1所示，可以通过图1中的指标采集模块101根据集群内各租户的集群命名空间定时查询各租户的指标数据，并将集群内各租户的指标数据存储到指标存储模块102，资源控制模块103定时从指标存储模块102获取各租户的指标数据，比如，租户已分配的所有节点的总cpu核数或总内存大小n、预设的cpu使用率或内存使用率阈值、租户已分配的所有节点的平均cpu使用率或内存使用率U、租户下所属服务请求cpu核数或请求内存大小R、以及租户已分配的所有节点中cpu核数或内存最大的节点对应的cpu核数或内存大小。所述步骤S3：所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，所述资源调整方式包括扩容、容量不变以及缩容，其中：所述资源控制模块根据所述各集群命名空间对应的各租户的指标数据，判断各租户的节点资源是否符合当前需求，从而确定各租户的资源调整方式，所述资源调整方式包括扩容、容量不变以及缩容，即当前租户需要扩容或者移除的节点资源，以便于动态调整各租户的节点资源，实现灵活管理租户资源。在一种可实现的方式中，例如，若租户1的节点资源不满足当前需求，则需要对租户1的节点资源进行扩容操作，即为租户1自动自动分配新的节点，以满足高负载需求，提高了整体性能和用户体验。又比如，若租户2的节点资源存在节点冗余的情况，则需要对租户2的节点资源进行缩容操作，即为租户2自动移除节点，以减少资源浪费，从而降低了租户成本。综上所述，本申请实施例提供一种租户资源分配方法，在本方案中，先是采用硬隔离策略为创建的租户分配节点资源，并采用软隔离策略为租户创建集群命名空间，即通过软隔离策略与硬隔离策略相结合的租户隔离方式，提供了更强大的租户隔离方式，降低租户之间的资源相互干扰的影响，同时也保证了安全性；然后，获取集群内各租户的指标数据，根据各租户的指标数据，确定是否需要对各租户的节点资源进行调整，若是，则根据各租户的指标数据，对各租户的节点资源进行扩容操作或缩容操作，即动态分配各租户的节点资源，实现灵活管理租户资源，从而最大程度的提高资源利用率，同时减少资源浪费，从而降低了租户成本。由于资源配置的动态性，租户可以根据负载的变化获得更高的性能。系统能够自动分配更多的资源以满足高负载需求，并在负载减少时减少资源，提高了整体性能和用户体验。同时，采用这些方案，系统管理员可以更轻松的管理和维护系统。资源分配和隔离自动完成，减少手动干预带来的人为错误的风险。将通过如下实施例，具体讲解如何对各租户的节点资源进行动态调整。第一、扩容操作。可选地，参考图3所示，所述步骤S3，所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，包括：步骤S301：所述租户资源管理系统根据租户的指标数据中的租户已分配的所有节点资源的总资源大小、预设的资源使用率与平均资源使用率，确定租户的第一资源调整值；步骤S302：若所述第一资源调整值大于或等于第一预设阈值，则确定租户的资源调整方式为扩容租户的节点资源。示例性地，例如，第一预设阈值为零。在本实施例中，可以采用如下公式计算得到第一资源调整值P1，具体如下：其中，n为租户已分配的所有节点资源总cpu核数或总内存大小；S为预设的cpu使用率或内存使用率阈值；U为租户下所有节点资源采集的平均cpu使用率或内存使用率。因此，根据上述公式，计算得到各租户的第一资源调整值P1，若当P1大于等于0时，则确定扩容租户的节点资源，即租户下所分配的节点，每个节点cpu使用率或者内存使用率超过设定阈值则触发扩容。其中，扩容数量根据P1的值决定。可选地，参考图4所示，所述步骤S3，所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，包括：步骤S311：根据租户的租户下所属服务请求资源大小、租户已分配的所有节点的总资源大小与租户已分配的所有节点中最大节点的资源大小，确定租户的第二资源调整值。步骤S312：若所述第二资源调整值大于或等于第二预设阈值，则确定扩容租户的节点资源。示例性地，例如，第二预设阈值为零。在本实施例中，可以采用如下公式计算得到第二资源调整值P2，具体如下：其中，R为租户下所属服务请求cpu核数或请求内存大小；n为租户已分配的所有节点总cpu核数或总内存大小；c为租户下节点中cpu核数或内存最大的节点对应的cpu核数或内存大小，即为冗余一个单位节点。因此，可以根据上述公式，计算得到各租户的第一资源调整值P2，当P2大于等于0时，则确定扩容租户的节点资源，即租户下所属服务请求核数与除去一个单位节点后的cpu核数占比的90%的差值超过设定阈值，则触发扩容。其中，扩容数量根据P2的值决定。可选地，参考图5所示，所述步骤S302、步骤S312中确定扩容租户的节点资源后，进一步包括：步骤S303：确定当前时间与上一次执行扩容/或缩容操作时间之间的时间间隔是否大于静默时长；其中，扩容/或缩容操作是指扩容操作或缩容操作。静默时长也称冷却时间，为最近一次扩容/或缩容操作后，不执行扩容/或缩容操作的时间。在静默时长内不进行扩容/或缩容操作，但仍然会判断各租户的节点资源是否可以进行扩容/或缩容操作。若超过静默时长后，如果满足扩容/或缩容条件，则触发扩容/或缩容操作。在本实施例中，为了避免扩容/或缩容操作的频繁性，还需要判断当前时间与上一次执行扩容/或缩容操作时间之间的时间间隔是否大于静默时长，若是，则触发扩缩容操作；若否，则不触发扩缩容操作。步骤S304：若是，则获取共享节点池中节点资源大小大于或等于第一资源调整值或第二资源调整值的第一节点列表。其中，共享节点池是指容器云平台上还未向租户分配的节点资源，即共享节点池中的所有节点均为待分配状态。步骤S305：若所述第一节点列表不为空，将第一节点列表中的第一节点分配至租户，并对所述第一节点添加节点标签与网络访问策略。其中，所述第一节点为第一节点列表中cpu核数或内存大小最小的节点资源。在本实施例中，例如，当需要对租户1的节点资源进行扩容操作时，可以先获取共享节点池中cpu核数或内存大小大于等于Pi的节点列表1，其中，Pi是指第一资源调整值P1或第二资源调整值P2；若节点列表1不为空，则再从节点列表1中选取cpu核数或内存大小最小的节点1添加到租户1中，对租户1新添加的节点1添加节点标签与网络访问策略，挂载集群内租户共享存储，即可以自动分配更多的资源以满足高负载需求，实现了动态分配租户节点资源，实现灵活管理租户资源，提高了整体性能和用户体验。可选地，参考图6所示，该方法还包括：步骤S306：若所述第一节点列表为空，则从共享节点池中查找两个节点的资源总和大于或等于第一资源调整值或第二资源调整值的节点组合列表；步骤S307：将节点组合列表中的第二节点和第三节点分配至租户，并分别对第二节点和第三节点添加节点标签与网络访问策略。其中，第二节点和第三节点的资源总和为节点组合列表中资源总和最小的两个节点。在本实施例中，例如，若上述获取到的节点列表1为空，则从共享节点池中找到两个节点cpu核数或内存大小总和大于或等于Pi的节点组合列表，其中，Pi是指第一资源调整值P1或第二资源调整值P2；然后，从节点组合列表选取cpu总核数或内存总大小最小的两个节点，即节点2和节点3添加到租户1中，对租户1新添加的节点1添加节点标签与网络访问策略，挂载集群内租户共享存储，实现了资源配置的动态性，以满足高负载需求。可选地，在所述步骤S302、步骤S312中确定扩容租户的节点资源后，进一步包括：将一天24小时按预设的时长进行分割，每个分割后的时间段作为一个时间区间；确定当前时间对应的时间区间，标记当前时间区间为需进行扩容；获取当前时间区间的历史数据，所述历史数据中记录有距离当前日期最近的、连续的若干天内的各个时间区间的标记，记所述历史数据累计天数为DATE；获取所述历史数据中与所述当前时间区间对应一致的各个时间区间的标记；确定当前时间区间对应的净扩容次数，所述净扩容次数为获取的标记中，标记为需进行扩容的总个数减去标记为需进行缩容的总个数的值，若所述当前时间区间对应的净扩容次数大于0，则计算历史数据中与所述当前时间区间对应一致的各个时间区间对应的净扩容次数大于0的天数总和，记为T；则当前时间区间内需要扩容的概率为P3，P3=T/DATE；若P3超过预设概率P，则进行扩容；扩容后，设置惯性保持时间TIME，将当前时间与所述惯性保持时间TIME的加和作为保持结束时间，从所述当前时间至所述保持结束时间内，不执行缩容操作。第二、缩容操作。可选地，参考图7所示，所述步骤S3，所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，包括：步骤S321：根据租户的指标数据中的租户已分配的所有资源节点的总资源大小、预设的资源使用率与平均资源使用率，确定租户的第一资源调整值；步骤S322：若所述第一资源调整值小于第一预设阈值，则确定缩容租户的节点资源。示例性地，例如，第一预设阈值为零。在本实施例中，可以继续采用上述公式计算得到第一资源调整值P1，若当P1小于0时，则确定缩容租户的节点资源，即租户下所分配的节点，每个节点cpu使用率或者内存使用率未超过设定阈值则触发扩容。其中，扩容数量根据P1的值决定。可选地，参考图8所示，上述步骤S3包括：步骤S331：根据租户的租户下所属服务请求资源大小、租户已分配的所有节点的总资源大小与租户已分配的所有节点中最大节点的资源大小，确定租户的第二资源调整值。步骤S332：若所述第二资源调整值小于第二预设阈值，则获取租户的波动因子。其中，波动因子为cpu核数或内存大小。步骤S333：若所述第二资源调整值与波动因子的求和结果小于第二预设阈值，则确定缩容租户的节点资源。示例性地，例如，第二预设阈值为零。在本实施例中，可以采用上述公式计算得到第二资源调整值P2，若第二资源调整值P2小于零，则继续获取租户的波动因子b，并判断P2+b是否小于0，若P2+b小于0，则确定缩容租户的节点资源，即触发缩容；若P2+b不小于0，则确定不缩容租户的节点资源，即不触发缩容。可选地，参考图9所示，上述步骤S4包括：所述步骤S322、步骤S333中确定缩容租户的节点资源后，进一步包括：步骤S323：确定当前时间与上一次执行扩/或缩容操作时间之间的时间间隔是否大于静默时长。步骤S324：若是，则获取租户的节点池中资源大小小于第一资源调整值或第二资源调整值的第二节点列表。其中，租户的节点池包括多个为该租户分配的节点。步骤S325：将所述第二节点列表中的第四节点从租户中移除，并删除第四节点的节点标签与恢复初始网络访问策略。在本实施例中，例如，当需要对租户2的节点资源进行缩容操作时，可以先获取租户的节点池中cpu核数或内存大小小于Pi的节点列表2，其中，Pi是指第一资源调整值P1或第二资源调整值P2；再从节点列表中选取cpu核数或内存大小最小的节点4从租户中移除，并删除节点4的节点标签与恢复初始网络访问策略，实现了对租户的节点资源进行自动伸缩和弹性资源分配，提高了租户资源管理的灵活性，从而最大程度的提高资源利用率，同时减少资源浪费，从而降低了租户成本。其中，删除第四节点的节点标签与恢复初始网络访问策略的具体过程如下。封锁租户2内的业务节点，使节点不可调度，并驱逐节点上运行的服务，确保节点上没有业务相关资源，并备份及清理节点数据。为待移出租户的节点资源删除租户标签；从软件数据管理模块中获取共享存储挂载，为待移出租户的节点资源删除共享存储挂载；以及从软件数据管理模块中获取租户共享资源池中的网络访问策略配置，为待移出租户的节点资源恢复为共享资源池访问策略。可选地，在所述步骤S322、步骤S333中确定缩容租户的节点资源后，进一步包括：将一天24小时按预设的时长进行分割，每个分割后的时间段作为一个时间区间；确定当前时间对应的时间区间，标记当前时间区间为需进行缩容；获取当前时间区间的历史数据，所述历史数据中记录有距离当前日期最近的、连续的若干天内的各个时间区间的标记，记所述历史数据累计天数为DATE；获取所述历史数据中与所述当前时间区间对应一致的各个时间区间的标记；确定当前时间区间对应的净缩容次数，所述净缩容次数为获取的标记中，标记为需进行缩容的总个数减去标记为需进行扩容的总个数的值，若所述当前时间区间对应的净缩容次数大于0，则计算历史数据中与所述当前时间区间对应一致的各个时间区间对应的净缩容次数大于0的天数总和，记为T1；则当前时间区间内需要扩容的概率为P4，P4=T1/DATE；设置设置惯性保持时间TIME；若P4超过预设概率P，且当前时间距离当前时间区间起始时间超过所述惯性保持时间，则进行阶梯式缩容；缩容后，将当前时间与所述惯性保持时间TIME的加和作为保持结束时间，从所述当前时间至所述保持结束时间内，不执行缩容操作。在本方案中，通过软隔离与硬隔离的租户隔离方式，提供了更强大的租户隔离方式呢，降低租户之间的资源相互干扰的影响，同时也保证了安全性；然后，并根据集群内各租户的指标数据，配置资源动态扩缩策略，动态分配租户节点资源，实现灵活管理租户资源，从而最大程度的提高资源利用率，同时减少资源浪费，从而降低了租户成本。由于资源配置的动态性，租户可以根据负载的变化获得更高的性能。系统能够自动分配更多的资源以满足高负载需求，并在负载减少时减少资源，提高了整体性能和用户体验。同时，采用这些方案，系统管理员可以更轻松的管理和维护系统。资源分配和隔离自动完成，减少手动干预带来的人为错误的风险。可选地，例如，本申请提供的租户资源分配方法，该方法包括：S1001、采用硬隔离策略为创建的租户分配节点资源，并采用软隔离策略为租户创建集群命名空间。S1002、根据集群内各租户的集群命名空间，获取各租户的指标数据。S1003、根据各租户的指标数据，确定租户的资源调整值。S1004、判断租户的资源调整值是否大于或等于0，若是，则确定扩容租户的节点资源，并执行步骤S1005；若否，则确定缩容租户的节点资源，并执行步骤S1005。S1005、判断是否在静默时长内，若是，则执行步骤S1006扩容，以及执行步骤S1007缩容；若否，则结束。S1006、获取共享节点池中资源大小大于或等于资源调整值的第一节点列表，将第一节点列表中的第一节点分配至租户，并对第一节点添加节点标签与网络访问策略。S1007、获取租户的节点池中资源大小小于资源调整值的第二节点列表，将第二节点列表中的第四节点从租户中移除，并删除第四节点的节点标签与恢复初始网络访问策略。下述对用以执行本申请所提供的租户资源分配方法的装置、设备及存储介质等进行说明，其具体的实现过程以及技术效果参见上述，下述不再赘述。可选地，本申请实施例提供一种租户资源分配装置，所述装置包括：初始化模块：配置为采用硬隔离策略为创建的租户分配节点资源，并采用软隔离策略为租户创建集群命名空间；采集模块：配置为在PaaS平台中构建租户资源管理系统，所述租户资源管理系统包括指标采集模块、指标存储模块、资源控制模块和软件数据管理模块；所述指标采集模块用于定期采集各租户的数据，并确定各租户的指标数据；所述指标存储模块用于存储所述指标数据；所述资源控制模块用于根据所述指标数据确定所述租户的资源调整方式，所述租户的资源包括CPU和内存；所述软件数据管理模块用于管理节点资源；所述租户资源管理系统确定各集群命名空间对应的各租户的指标数据；分析模块：配置为所述租户资源管理系统基于所述各集群命名空间对应的各租户的指标数据确定各租户的资源调整方式，所述资源调整方式包括扩容、容量不变以及缩容；调整模块：配置为所述租户资源管理系统基于所述资源调整方式对各租户的资源进行调整。上述装置用于执行前述实施例提供的方法，其实现原理和技术效果类似，在此不再赘述。以上这些模块可以是被配置成实施以上方法的一个或多个集成电路，例如：一个或多个特定集成电路，或，一个或多个微处理器，或，一个或者多个现场可编程门阵列等。再如，当以上某个模块通过处理元件调度程序代码的形式实现时，该处理元件可以是通用处理器，例如中央处理器或其它可以调用程序代码的处理器。再如，这些模块可以集成在一起，以片上系统的形式实现。上述模块可以经由有线连接或无线连接彼此连接或通信。有线连接可以包括金属线缆、光缆、混合线缆等，或其任意组合。无线连接可以包括通过LAN、WAN、蓝牙、ZigBee、或NFC等形式的连接，或其任意组合。 两个或更多个模块可以组合为单个模块，并且任何一个模块可以分成两个或更多个单元。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的系统和装置的具体工作过程，可以参考方法实施例中的对应过程，本申请中不再赘述。需要说明的是，以上这些模块可以是被配置成实施以上方法的一个或多个集成电路，例如：一个或多个特定集成电路，或，一个或多个微处理器，或，一个或者多个现场可编程门阵列等。再如，当以上某个模块通过处理元件调度程序代码的形式实现时，该处理元件可以是通用处理器，例如中央处理器或其它可以调用程序代码的处理器。再如，这些模块可以集成在一起，以片上系统的形式实现。本发明提供租户资源分配装置的具体实施例。所述装置包括：分配模块1101，用于采用硬隔离策略为创建的租户分配节点资源；创建模块1102，用于采用软隔离策略为租户创建集群命名空间；获取模块1103，用于根据集群内各租户的集群命名空间，获取各租户的指标数据，指标数据至少包括：租户已分配的所有节点的总资源大小、预设的资源使用率、平均资源使用率、租户下所属服务请求资源大小、以及租户已分配的所有节点中最大节点的资源大小；确定模块1104，用于根据各租户的指标数据，确定是否调整各租户的节点资源；调整模块1105，用于若是，则对各租户的节点资源进行扩容操作或缩容操作。可选地，确定模块1104，还用于：根据租户的指标数据中的租户已分配的所有节点的总资源大小、预设的资源使用率与平均资源使用率，确定租户的第一资源调整值；若第一资源调整值大于或等于第一预设阈值，则确定扩容租户的节点资源。可选地，确定模块1104，还用于：根据租户的租户下所属服务请求资源大小、租户已分配的所有节点的总资源大小与租户已分配的所有节点中最大节点的资源大小，确定租户的第二资源调整值；若第二资源调整值大于或等于第二预设阈值，则确定扩容租户的节点资源。可选地，调整模块1105，用于：确定当前时间与上一次执行扩缩容操作时间之间的时间间隔是否大于静默时长；若是，则获取共享节点池中资源大小大于或等于第一资源调整值或第二资源调整值的第一节点列表；若第一节点列表不为空，将第一节点列表中的第一节点分配至租户，并对第一节点添加节点标签与网络访问策略。可选地，调整模块1105，还用于：若第一节点列表为空，则从共享节点池中查找两个节点的资源总和大于或等于第一资源调整值或第二资源调整值的节点组合列表；将节点组合列表中的第二节点和第三节点分配至租户，并分别对第二节点和第三节点添加节点标签与网络访问策略。可选地，确定模块1104，还用于：根据租户的指标数据中的租户已分配的所有节点的总资源大小、预设的资源使用率与平均资源使用率，确定租户的第一资源调整值；若第一资源调整值小于第一预设阈值，则确定缩容租户的节点资源。可选地，确定模块1104，还用于：根据租户的租户下所属服务请求资源大小、租户已分配的所有节点的总资源大小与租户已分配的所有节点中最大节点的资源大小，确定租户的第二资源调整值；若第二资源调整值小于第二预设阈值，则获取租户的波动因子；若第二资源调整值与波动因子的求和结果小于第二预设阈值，则确定缩容租户的节点资源。可选地，调整模块1105，还用于：确定当前时间与上一次执行扩缩容操作时间之间的时间间隔是否大于静默时长；若是，则获取租户的节点池中资源大小小于第一资源调整值或第二资源调整值的第二节点列表；将第二节点列表中的第四节点从租户中移除，并删除第四节点的节点标签与恢复初始网络访问策略。上述装置用于执行前述实施例提供的方法，其实现原理和技术效果类似，在此不再赘述。图11为本申请实施例提供的一种电子设备的的结构示意图，该电子设备是具备数据处理功能的计算设备。该装置包括：处理器1201、存储器1202。存储器1202用于存储程序，处理器1201调用存储器1202存储的程序，以执行上述方法实施例。具体实现方式和技术效果类似，这里不再赘述。其中，存储器1202存储有程序代码，当程序代码被处理器1201执行时，使得处理器1201执行本说明书上述“示例性方法”部分中描述的根据本申请各种示例性实施方式的云平台虚拟机的配置更新方法中的各种步骤。处理器1201可以是通用处理器，例如中央处理器、数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件，可以实现或者执行本申请实施例中公开的各方法、步骤及逻辑框图。通用处理器可以是微处理器或者任何常规的处理器等。结合本申请实施例所公开的方法的步骤可以直接体现为硬件处理器执行完成，或者用处理器中的硬件及软件模块组合执行完成。存储器1202作为一种非易失性计算机可读存储介质，可用于存储非易失性软件程序、非易失性计算机可执行程序以及模块。存储器可以包括至少一种类型的存储介质，例如可以包括闪存、硬盘、多媒体卡、卡型存储器、随机访问存储器、静态随机访问存储器、可编程只读存储器、只读存储器、带电可擦除可编程只读存储器、磁性存储器、磁盘、光盘等等。存储器是能够用于携带或存储具有指令或数据结构形式的期望的程序代码并能够由计算机存取的任何其他介质，但不限于此。本申请实施例中的存储器1202还可以是电路或者其它任意能够实现存储功能的装置，用于存储程序指令和/或数据。可选地，本申请还提供一种程序产品，例如计算机可读存储介质，包括程序，该程序在被处理器执行时用于执行上述方法实施例。在本申请所提供的几个实施例中，应该理解到，所揭露的装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用硬件加软件功能单元的形式实现。上述以软件功能单元的形式实现的集成的单元，可以存储在一个计算机可读取存储介质中。上述软件功能单元存储在一个存储介质中，包括若干指令用以使得一台计算机设备或处理器执行本申请各个实施例所述方法的部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。
