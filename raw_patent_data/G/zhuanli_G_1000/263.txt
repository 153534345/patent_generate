标题title
用于光学遥感载荷像散的智能判别方法
摘要abst
本发明涉及遥感图像技术领域，尤其涉及一种用于光学遥感载荷像散的智能判别方法。包括：S1：将光学遥感载荷的在轨成像图片进行分割，获得n个分割图像；S2：将n个分割图像依次输入至改进的yolov5网络进行自动筛选，获得m个目标区域图片；S3：利用Canny算子依次提取m个目标区域图片的畸变圆，并基于Hough变换圆检测法依次在m个畸变圆上提取标准圆；S4：依次计算m个畸变圆的边界最远像素点和与m个畸变圆一一对应的标准圆的圆心所在的直线与水平轴的夹角，完成对光学遥感载荷像散的智能判别。本发明能够实现典型像差区域的自动识别和像散估计，即可对光学遥感载荷的像散进行自动化判别。
权利要求书clms
1.一种用于光学遥感载荷像散的智能判别方法，其特征在于，具体包括如下步骤：S1：将所述光学遥感载荷的在轨成像图片进行分割，获得n个分割图像；S2：将n个分割图像依次输入至改进的yolov5网络进行自动筛选，获得m个目标区域图片；S3：利用Canny算子依次提取m个目标区域图片的畸变圆，并基于Hough变换圆检测法依次在m个畸变圆上提取标准圆；S4：依次计算m个畸变圆的边界最远像素点和与m个畸变圆一一对应的标准圆的圆心所在的直线与水平轴的夹角，完成对所述光学遥感载荷像散的智能判别。2.根据权利要求1所述的用于光学遥感载荷像散的智能判别方法，其特征在于，所述改进的yolov5网络包括Backbone网络、Neck网络和Head网络，所述Neck网络包括：C3模块、CBS模块、上采样模块、C3NA模块和3*3卷积层，其中，所述Backbone网络输出的特征图B1经所述CBS模块进行处理后，获得特征图A1，所述特征图A1经所述上采样模块进行上采样处理后与所述Backbone网络输出的特征图B2进行concat操作，获得特征图A2，所述特征图A2依次经所述C3模块和所述CBS模块进行处理后，获得特征图A3，所述特征图A3经所述上采样模块进行上采样操作后，与所述Backbone网络输出的特征图B3进行concat操作，获得特征图A4，所述特征图A4经所述C3NA模块处理后，获得特征图A5，所述特征图A5经所述3*3卷积层进行卷积操作后，与所述特征图A3进行concat操作，获得特征图A6，所述特征图A6经所述C3NA模块处理后，获得特征图A7，所述特征图A7经所述3*3卷积层进行卷积操作后，与所述特征图A1进行concat操作，获得特征图A8，所述特征图A8经所述C3NA模块处理后，获得特征图A9，将所述特征图A5、所述特征图A7和所述特征图A9均输入至所述Head网络。3.根据权利要求2所述的用于光学遥感载荷像散的智能判别方法，其特征在于，所述C3NA模块包括Bottleneck子模块、NLA子模块和1*1卷积层，输入至所述C3NA模块的特征图C1经所述1*1卷积层进行卷积处理后，获得特征图C2，将所述特征图C2分别输入至所述Bottleneck子模块和所述NLA子模块处理后进行concat操作，获得特征图C3，所述特征图C3经所述1*1卷积层进行卷积处理后，获得所述C3NA模块的输出特征图C4。4.根据权利要求3所述的用于光学遥感载荷像散的智能判别方法，其特征在于，所述NLA子模块为非局部注意力机制，所述NLA子模块的计算公式为：；其中，i和j均为输入至所述NLA子模块的特征图上将要计算的特征值的位置坐标索引，x为所述特征值的对应位置上的输入特征，y为对所述特征值进行增强后的输出，f为用于计算i和j的相似性的函数，g为用于对j的特征进行转化的函数，C为用于对所述特征值的对应位置上的输入特征进行归一化的函数。5.根据权利要求2所述的用于光学遥感载荷像散的智能判别方法，其特征在于，所述CBS模块包括卷积层、归一化层和Silu激活函数。6.根据权利要求2所述的用于光学遥感载荷像散的智能判别方法，其特征在于，将所述特征图A5、所述特征图A7和所述特征图A9经所述Head网络进行目标检测处理所对应获得的目标检测结果进行合并，获得目标区域图片。7.根据权利要求1所述的用于光学遥感载荷像散的智能判别方法，其特征在于，所述步骤S3具体包括如下步骤：S31：利用Canny算子法依次遍历每个目标区域图片的弱边界像素点，并将在8邻域像素内存在相邻的强边界像素点的弱边界像素点标记为边界，直至标记出所有目标区域图片的所有边界；S32：利用所述步骤S31标记的所有边界构建与m个目标区域图片一一对应的畸变圆，并基于Hough变换圆检测法通过下式在m个畸变圆上依次提取标准圆：；其中，为第i个畸变圆的第j个弱边界像素点的坐标，/＞为第i个畸变圆对应的标准圆的圆心坐标，/＞为第i个畸变圆对应的标准圆的半径。8.根据权利要求1所述的用于光学遥感载荷像散的智能判别方法，其特征在于，所述步骤S4具体包括如下步骤：S41：根据所述标准圆的圆心坐标，通过下式依次计算m个畸变圆的边界最远像素点和与m个畸变圆一一对应的标准圆的圆心所在的直线与水平轴的夹角：；其中，为第j个畸变圆的边界最远像素点的坐标，/＞为与第j个畸变圆对应的标准圆的圆心坐标；S42：根据步骤S41的计算结果，将占比最大的夹角值作为所述目标区域图片的待检测夹角；S43：在所述光学遥感载荷的八个主要像散方向中，将与所述待检测夹角最接近的像散方向作为最终的智能判别结果。9.根据权利要求8所述的用于光学遥感载荷像散的智能判别方法，其特征在于，所述光学遥感载荷的八个主要的像散方向分别为0°、45°、90°、135°、180°、-45°、-90°和-135°。10.根据权利要求8所述的用于光学遥感载荷像散的智能判别方法，其特征在于，若所述目标区域图片所提取的标准圆的半径满足下式，则所述光学遥感载荷的像散可忽略：；其中，为第j个标准圆的半径。
说明书desc
技术领域本发明涉及遥感图像技术领域，尤其涉及一种用于光学遥感载荷像散的智能判别方法。背景技术在光学遥感载荷中，像散是指由光学系统中的非理想因素所引起的图像失真现象。像散判别方法旨在对光学遥感载荷中的像散进行检测和分析，以便进行校正或补偿。光学遥感载荷在获取地球表面信息的过程中，面临着多种原因导致的像差问题。空间遥感器在研制过程中会受到地面重力的影响，在运载发射过程中会受到剧烈的振动和冲击作用，而入轨运行时会受到空间重力场变化和温度变化等因素的综合影响，且随着口径和焦距的不断增大，重力、振动、冲击和温度等参数引起的光学系统变形所导致的失调波像差，在很大程度影响了空间遥感器的成像性能，综合考虑这些因素，光学遥感载荷出现像差是一个复杂的问题，需要采取相应的校正手段和算法来减小或消除像差的影响，以提高光学遥感数据的质量和准确性。目前对于像差调整的技术包括针对主镜的面形校正技术和次镜的位姿调整校正技术的主动光学技术，以及在系统中增加变形镜以调节波前的自适应光学技术。但是对于这些传统的像差调整方法，往往需要增加额外设备或者外场定标等设施，在像差调整判读工程的实施时也需要有经验丰富的操作员的参与，并且耗时较大。发明内容本发明为解决传统的像差调整方法，在像差调整判读工程的实施时需要有经验丰富的操作员的参与，并且耗时较大的缺点，提供一种用于光学遥感载荷像散的智能判别方法，能够实现典型像差区域的自动识别和像散估计，即可对光学遥感载荷的像散进行自动化判别。本发明提出的用于光学遥感载荷像散的智能判别方法，具体包括如下步骤：S1：将光学遥感载荷的在轨成像图片进行分割，获得n个分割图像；S2：将n个分割图像依次输入至改进的yolov5网络进行自动筛选，获得m个目标区域图片；S3：利用Canny算子依次提取m个目标区域图片的畸变圆，并基于Hough变换圆检测法依次在m个畸变圆上提取标准圆；S4：依次计算m个畸变圆的边界最远像素点和与m个畸变圆一一对应的标准圆的圆心所在的直线与水平轴的夹角，完成对光学遥感载荷像散的智能判别。优选地，改进的yolov5网络包括Backbone网络、Neck网络和Head网络，Neck网络包括：C3模块、CBS模块、上采样模块、C3NA模块和3*3卷积层，其中，Backbone网络输出的特征图B1经CBS模块进行处理后，获得特征图A1，特征图A1经上采样模块进行上采样处理后与Backbone网络输出的特征图B2进行concat操作，获得特征图A2，特征图A2依次经C3模块和CBS模块进行处理后，获得特征图A3，特征图A3经上采样模块进行上采样操作后，与Backbone网络输出的特征图B3进行concat操作，获得特征图A4，特征图A4经C3NA模块处理后，获得特征图A5，特征图A5经3*3卷积层进行卷积操作后，与特征图A3进行concat操作，获得特征图A6，特征图A6经C3NA模块处理后，获得特征图A7，特征图A7经3*3卷积层进行卷积操作后，与特征图A1进行concat操作，获得特征图A8，特征图A8经C3NA模块处理后，获得特征图A9，将特征图A5、特征图A7和特征图A9均输入至Head网络。优选地，C3NA模块包括Bottleneck子模块、NLA子模块和1*1卷积层，输入至C3NA模块的特征图C1经1*1卷积层进行卷积处理后，获得特征图C2，将特征图C2分别输入至Bottleneck子模块和NLA子模块处理后进行concat操作，获得特征图C3，特征图C3经1*1卷积层进行卷积处理后，获得C3NA模块的输出特征图C4。优选地，NLA子模块为非局部注意力机制，NLA子模块的计算公式为：；其中，i和j均为输入至NLA子模块的特征图上将要计算的特征值的位置坐标索引，x为特征值的对应位置上的输入特征，y为对特征值进行增强后的输出，f为用于计算i和j的相似性的函数，g为用于对j的特征进行转化的函数，C为用于对特征值的对应位置上的输入特征进行归一化的函数。优选地，CBS模块包括卷积层、归一化层和Silu激活函数。优选地，将特征图A5、特征图A7和特征图A9经Head网络进行目标检测处理所对应获得的目标检测结果进行合并，获得目标区域图片。优选地，步骤S3具体包括如下步骤：S31：利用Canny算子法依次遍历每个目标区域图片的弱边界像素点，并将在8邻域像素内存在相邻的强边界像素点的弱边界像素点标记为边界，直至标记出所有目标区域图片的所有边界；S32：利用步骤S31标记的所有边界构建与m个目标区域图片一一对应的畸变圆，并基于Hough变换圆检测法通过下式在m个畸变圆上依次提取标准圆：；其中，为第i个畸变圆的第j个弱边界像素点的坐标，/＞为第i个畸变圆对应的标准圆的圆心坐标，/＞为第i个畸变圆对应的标准圆的半径。优选地，步骤S4具体包括如下步骤：S41：根据标准圆的圆心坐标，通过下式依次计算m个畸变圆的边界最远像素点和与m个畸变圆一一对应的标准圆的圆心所在的直线与水平轴的夹角：；其中，为第j个畸变圆的边界最远像素点的坐标，/＞为与第j个畸变圆对应的标准圆的圆心坐标；S42：根据步骤S41的计算结果，将占比最大的夹角值作为目标区域图片的待检测夹角；S43：在光学遥感载荷的八个主要像散方向中，将与待检测夹角最接近的像散方向作为最终的智能判别结果。优选地，光学遥感载荷的八个主要像散方向分别为0°、45°、90°、135°、180°、-45°、-90°和-135°。优选地，若目标区域图片所提取的标准圆的半径满足下式，则光学遥感载荷的像散可忽略：；其中，为第j个标准圆的半径。与现有技术相比，本发明能够取得如下有益效果：本发明提供的用于光学遥感载荷像散的智能判别方法，将深度学习目标检测应用于光学遥感载荷像散的智能判别算法中，本发明选择圆作为典型像差区域，然后基于Hough变换圆检测法判断圆心到边界像素点距离，以对光学遥感载荷的像散方向进行判别，实现了典型像差区域的自动识别和像散估计，从而实现了对光学遥感载荷的像散进行自动化判别。本发明提供的用于光学遥感载荷像散的智能判别方法有助于减少搜索空间、减少人力和时间成本，且本发明采用基于在轨载荷采集图像中的圆环目标的畸变特性，反演出成像系统的像散信息，从而为判断次镜的失调状态提供了关键的信息支持。附图说明图1是根据本发明实施例提供的用于光学遥感载荷像散的智能判别方法的流程示意图；图2是根据本发明实施例提供的光学遥感载荷的八个主要像散方向的分布示意图；图3是根据本发明实施例提供的基于Hough变换圆检测法提取标准圆的参数分布示意图；图4是根据本发明实施例提供的改进的yolov5网络的网络结构图；图5是根据本发明实施例提供的C3NA模块的网络结构图。具体实施方式在下文中，将参考附图描述本发明的实施例。在下面的描述中，相同的模块使用相同的附图标记表示。在相同的附图标记的情况下，它们的名称和功能也相同。因此，将不重复其详细描述。为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及具体实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅用以解释本发明，而不构成对本发明的限制。本发明实施例提供的一种用于光学遥感载荷像散的智能判别方法，首先对光学遥感载荷的在轨成像图片进行分割存储，然后通过改进的yolov5网络，从光学遥感载荷的在轨成像图片中将典型像差区域筛选出来，最后，基于计算机视觉算法，检测判断出这些目标区域图片是否出现像散以及像散的方向，从而实现光学遥感载荷像散的智能化判别。图1是根据本发明实施例提供的用于光学遥感载荷像散的智能判别方法的流程；图2示出了根据本发明实施例提供的光学遥感载荷的八个主要像散方向的分布；图3示出了根据本发明实施例提供的基于Hough变换圆检测法提取标准圆的参数分布。如图1-图3所示，本发明实施例提供的用于光学遥感载荷像散的智能判别方法，具体包括如下步骤：S1：将光学遥感载荷的在轨成像图片进行分割，获得n个分割图像。S2：将n个分割图像依次输入至改进的yolov5网络进行自动筛选，获得m个目标区域图片。S3：利用Canny算子依次提取m个目标区域图片的畸变圆，并基于Hough变换圆检测法依次在m个畸变圆上提取标准圆。步骤S3具体包括如下步骤：S31：利用Canny算子法依次遍历每个目标区域图片的弱边界像素点，并将在8邻域像素内存在相邻的强边界像素点的弱边界像素点标记为边界，直至标记出所有目标区域图片的所有边界；S32：利用步骤S31标记的所有边界构建与m个目标区域图片一一对应的畸变圆，并基于Hough变换圆检测法通过下式在m个畸变圆上依次提取标准圆：；其中，为第i个畸变圆的第j个弱边界像素点的坐标，/＞为第i个畸变圆对应的标准圆的圆心坐标，/＞为第i个畸变圆对应的标准圆的半径。S4：依次计算m个畸变圆的边界最远像素点和与m个畸变圆一一对应的标准圆的圆心所在的直线与水平轴的夹角，完成对光学遥感载荷像散的智能判别。步骤S4具体包括如下步骤：S41：根据标准圆的圆心坐标，通过下式依次计算m个畸变圆的边界最远像素点和与m个畸变圆一一对应的标准圆的圆心所在的直线与水平轴的夹角：；其中，为第j个畸变圆的边界最远像素点的坐标，/＞为与第j个畸变圆对应的标准圆的圆心坐标；S42：根据步骤S41的计算结果，将占比最大的夹角值作为目标区域图片的待检测夹角；S43：在光学遥感载荷的八个主要像散方向中，将与待检测夹角最接近的像散方向作为最终的智能判别结果。光学遥感载荷的八个主要像散方向分别为0°、45°、90°、135°、180°、-45°、-90°和-135°。若目标区域图片所提取的标准圆的半径满足下式，则光学遥感载荷的像散可忽略：；其中，为第j个标准圆的半径。图4示出了根据本发明实施例提供的改进的yolov5网络的网络结构。如图4所示，改进的yolov5网络包括Backbone网络、Neck网络和Head网络，Neck网络包括：C3模块、CBS模块、上采样模块、C3NA模块和3*3卷积层，其中，Backbone网络输出的特征图B1经CBS模块进行处理后，获得特征图A1，特征图A1经上采样模块进行上采样处理后与Backbone网络输出的特征图B2进行concat操作，获得特征图A2，特征图A2依次经C3模块和CBS模块进行处理后，获得特征图A3，特征图A3经上采样模块进行上采样操作后，与Backbone网络输出的特征图B3进行concat操作，获得特征图A4，特征图A4经C3NA模块处理后，获得特征图A5，特征图A5经3*3卷积层进行卷积操作后，与特征图A3进行concat操作，获得特征图A6，特征图A6经C3NA模块处理后，获得特征图A7，特征图A7经3*3卷积层进行卷积操作后，与特征图A1进行concat操作，获得特征图A8，特征图A8经C3NA模块处理后，获得特征图A9，将特征图A5、特征图A7和特征图A9均输入至Head网络。Backbone网络包括6*6卷积层、CBS模块和SPPF模块，其中，输入至Backbone网络的特征图B4依次经6*6卷积层和两个级联的CBS模块和C3模块进行处理后，获得特征图B3，特征图B3依次经CBS模块和C3模块进行处理后，获得特征图B2，特征图B2依次经CBS模块、C3模块和SPPF模块进行处理后，获得特征图B1。CBS模块包括卷积层、归一化层和Silu激活函数。将特征图A5、特征图A7和特征图A9经Head网络进行目标检测处理所对应获得的目标检测结果进行合并，获得目标区域图片。本发明实施例将C3NA模块放入neck网络中的18、20、23这三个位置，利用C3NA模块获得全局语义信息的互相依赖关系，从而提升了改进的yolov5网络的目标检测精度，解决漏检误检的问题，提高了改进的yolov5网络的检测精度和效率。C3模块结合了多个卷积核的卷积操作，可以增加模型感受野并减少参数量。具体来说，第一层卷积核减少通道数，第二层用3*3卷积核来扩大感受野，第三层用1*1的卷积核来减少通道数。但是由于卷积核作用的感受野是局部的，要经过累积很多层之后才能把整个图像的不同部分的区域关联起来。因此，本发明实施例提出的C3NA模块在基于NLA子模块的基础上对C3模块进行改进，用于计算两个位置之间的关系以快速的捕获长范围依赖，也就是结合上下文信息提取图像特征，从而提高目标检测精度。在C3NA模块中，我们利用NLA子模块取代原C3模块中的3*3卷积核，来获得当前位置的特征与特征图中的所有特征间的相似性，然后根据相似性对所有特征进行加权输出。将NLA子模块与Bottleneck子模块进行联合，减小了计算量，提高了改进的yolov5网络的检测效率。图5示出了根据本发明实施例提供的C3NA模块的网络结构。如图5所示，C3NA模块包括Bottleneck子模块、NLA子模块和1*1卷积层，输入至C3NA模块的特征图C1经1*1卷积层进行卷积处理后，获得特征图C2，将特征图C2分别输入至Bottleneck子模块和NLA子模块处理后进行concat操作，获得特征图C3，特征图C3经1*1卷积层进行卷积处理后，获得C3NA模块的输出特征图C4。NLA子模块为非局部注意力机制，NLA子模块的计算公式为：；其中，i和j均为输入至NLA子模块的特征图上将要计算的特征值的位置坐标索引，x为特征值的对应位置上的输入特征，y为对特征值进行增强后的输出，f为用于计算i和j的相似性的函数，g为用于对j的特征进行转化的函数，C为用于对特征值的对应位置上的输入特征进行归一化的函数。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本发明公开中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本发明公开的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本发明保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本发明的精神和原则之内所作的修改、等同替换和改进等，均应包含在本发明保护范围之内。
