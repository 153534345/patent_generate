标题title
基于停车场流水数据的分时段分目的出行OD提取方法
摘要abst
本发明提出基于停车场流水数据的分时段分目的出行OD提取方法，属于智能交通技术领域。包括以下步骤：S1.获取停车场位置数据、交通分区数据和停车场停车流水数据；S2.对S1获取的数据进行预处理，生成停车场交通分区关联表；S3.基于停车场停车流水数据识别车辆居住地，生成车辆居住办公地信息数据；S4.基于停车流水数据，结合停车场交通分区关联表、时段划分、车辆居住办公地信息数据，提取交通分区间分时段分目的的出行OD。本发明可降低车辆OD数据采集成本并提高数据采集的精度和效率，同时数据处理效率高，可以实现实时、自动化地提取出行OD数据，减少人工处理的工作量。
权利要求书clms
1.基于停车场流水数据的分时段分目的出行OD提取方法，其特征在于，包括以下步骤：S1.获取停车场位置数据、交通分区数据和停车场停车流水数据；S2.对S1获取的数据进行预处理，生成停车场交通分区关联表；S3.基于停车场停车流水数据识别车辆居住地，生成车辆居住办公地信息数据；生成车辆居住地停车场的方法是：基于历史停车场流量数据，统计车辆夜间停留各停车场的停留频次；夜间居住地停车时段定义在22:00至次日6:00；且夜间在停留点停留的时长不少于6小时；选取夜间停留频次最长的停车场为居住地停车中心点；以居住地停车中心点中心500米范围内的所有停车场标识为车辆居住停车场；S4.基于停车流水数据，结合停车场交通分区关联表、时段划分、车辆居住办公地信息数据，提取交通分区间分时段分目的的出行OD。2.根据权利要求1所述的基于停车场流水数据的分时段分目的出行OD提取方法，其特征在于，车辆居住办公地信息数据包括车辆居住地停车场和车辆办公地停车场；所述车辆居住地停车场包括车辆日间常停区域和夜间常停区域。3.根据权利要求2所述的基于停车场流水数据的分时段分目的出行OD提取方法，其特征在于，生成车辆办公地停车场的方法是：基于历史停车流水数据，统计车辆日间停留各停车场的停留频次；日间居住地停车时段定义在09:00至当日18:00；且日间在停留点停留的时长不少于4小时；选取日间停留频次最长的停车场为办公地停车中心点；办公地停车中心点为中心500米范围内的所有停车场标识为车辆的潜在车辆办公地停车场。4.根据权利要求3所述的基于停车场流水数据的分时段分目的出行OD提取方法，其特征在于，基于停车流水数据，结合停车场交通分区关联表、时段划分、车辆居住办公地信息数据，提取交通分区间分时段分目的的出行OD的方法包括以下步骤：S41.车辆OD识别，基于停车场停车流水数据，识别单个车辆的出行起点和终点为目标，提取生成车辆出行OD表；S42.车辆出行目的识别，基于车辆出行OD表结合车辆办公地停车场数据，生成分目的的车辆出行OD表；S43.交通分区分时段分目的出行OD识别；基于分目的的车辆出行OD表结合停车场交通分区关联表和时段对照表生成车辆出行OD表。5.根据权利要求4所述的基于停车场流水数据的分时段分目的出行OD提取方法，其特征在于，车辆OD识别，基于停车场停车流水数据，识别单个车辆的出行起点和终点为目标，提取生成车辆出行OD表的方法包括以下步骤：S441.将累计多日停车场停车流水数据按照车辆ID、以进入停车场的时间从小到大进行排序；S442.将相邻的2条记录，以第前一条记录的停车场ID、离开停车场时间标记为出发停车场ID、出发日期时间，以第二条记录的停车场ID、进入停车场时间标记为到达停车场ID、到达日期时间，以到达日期时间与出发日期时间的时间差计算出行时耗。6.一种电子设备，包括存储器和处理器，存储器存储有计算机程序，所述的处理器执行所述计算机程序时实现权利要求1-5任一项所述的基于停车场流水数据的分时段分目的出行OD提取方法的步骤。7.一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现权利要求1-5任一项所述的基于停车场流水数据的分时段分目的出行OD提取方法。
说明书desc
技术领域本申请涉及出行OD提取方法，尤其涉及基于停车场流水数据的分时段分目的出行OD提取方法，属于智能交通技术领域。背景技术随着城市化进程的加快和车辆拥有量的增加，城市交通拥堵成为一大挑战。了解人们的出行行为和交通流量分布对城市交通规划和交通管理至关重要。出行OD数据指的是记录了出行起点和目的地之间关系的数据。通过分析出行OD数据，可以揭示人们的出行偏好、交通流量分布、交通模式选择等信息，为交通规划和决策提供有力支持。目前，提取出行OD数据的方法主要依赖于调查问卷、GPS定位、公共交通刷卡数据等手段，但这些方法存在一些问题。例如，调查问卷的样本容量有限，难以全面准确地反映出行行为；GPS定位数据虽然能够提供较精确的位置信息，但是在高密度城市区域和封闭空间内的定位精度较低；公共交通刷卡数据只能反映使用公共交通工具的出行情况，而不能全面获取私家车出行的数据。为解决上述问题有研究人员提出一种专利公开号为CN108596381，发明名称为基于OD数据的城市停车需求预测方法的专利，首先获取研究区域的OD数据和停车数据，根据所述OD数据和停车数据对所述研究区域进行停车小区划分；基于所述研究区域的OD数据、停车数据和停车小区划分方案进行回归分析，构建停车需求预测模型；根据所述停车需求预测模型对目标停车区域进行停车需求预测。通过对OD数据和已知区域的停车数据进行回归分析，得到停车需求预测模型，然后利用停车需求预测模型估计未知区域停车需求，摒弃了传统的大规模调查，节省了人力和物力，具有简便快捷准确的优点，可为停车规划、停车资源配置、停车问题解决提供参考和技术支持。但该专利仍存在不足：基于道路卡口数据提取的车辆出行OD数据，未能识别车辆更加精确的从停车场到停车场之间的出行OD，也缺少对车辆出行OD数据的出行目的的区分。发明内容在下文中给出了关于本发明的简要概述，以便提供关于本发明的某些方面的基本理解。应当理解，这个概述并不是关于本发明的穷举性概述。它并不是意图确定本发明的关键或重要部分，也不是意图限定本发明的范围。其目的仅仅是以简化的形式给出某些概念，以此作为稍后论述的更详细描述的前序。鉴于此，为解决现有技术中存在缺少对车辆出行OD数据的出行目的的区分，及无法识别车辆从停车场到停车场之间的出行OD的技术问题，本发明提供基于停车场流水数据的分时段分目的出行OD提取方法。本发明结合了停车场监控系统中收集到的停车流水数据和数据处理技术。停车场监控系统通过安装在停车场出入口的摄像头或传感器，可以实时记录和识别车辆的进出情况。利用这些数据，可以构建一个全面的停车流水数据库。方案一、基于停车场流水数据的分时段分目的出行OD提取方法，包括以下步骤：S1.获取停车场位置数据、交通分区数据和停车场停车流水数据；S2.对S1获取的数据进行预处理，生成停车场交通分区关联表；S3.基于停车场停车流水数据识别车辆居住地，生成车辆居住办公地信息数据；生成车辆居住地停车场的方法是：基于历史停车场停车流水数据，统计车辆夜间停留各停车场的停留频次；夜间居住地停车时段定义在22:00至次日6:00；且夜间在停留点停留的时长不少于6小时；选取夜间停留频次最长的停车场为居住地停车中心点；以居住地停车中心点中心500米范围内的所有停车场标识为车辆居住停车场；S4.基于停车流水数据，结合停车场交通分区关联表、时段划分、车辆居住办公地信息数据，提取交通分区间分时段分目的的出行OD。优选的，车辆居住办公地信息数据包括车辆居住地停车场和车辆办公地停车场；所述车辆居住地停车场包括车辆日间常停区域和夜间常停区域。优选的，生成车辆办公地停车场的方法是：基于历史停车流水数据，统计车辆日间停留各停车场的停留频次；日间居住地停车时段定义在09:00至当日18:00；且日间在停留点停留的时长不少于4小时；选取日间停留频次最长的停车场为办公地停车中心点；办公地停车中心点为中心500米范围内的所有停车场标识为车辆的潜在车辆办公地停车场。优选的，基于停车流水数据，结合停车场交通分区关联表、时段划分、车辆居住办公地信息数据，提取交通分区间分时段分目的的出行OD的方法包括以下步骤：S41.车辆OD识别，基于停车场停车流水数据，识别单个车辆的出行起点和终点为目标，提取生成车辆出行OD表；S42.车辆出行目的识别，基于车辆出行OD表结合车辆办公地停车场数据，生成分目的的车辆出行OD表；S43.交通分区分时段分目的出行OD识别；基于分目的的车辆出行OD表结合停车场交通分区关联表和时段对照表生成车辆出行OD表。优选的，车辆OD识别，基于停车场停车流水数据，识别单个车辆的出行起点和终点为目标，提取生成车辆出行OD表的方法包括以下步骤：S441.将累计多日停车场停车流水数据按照车辆ID、以进入停车场的时间从小到大进行排序；S442.将相邻的2条记录，以第前一条记录的停车场ID、离开停车场时间标记为出发停车场ID、出发日期时间，以第二条记录的停车场ID、进入停车场时间标记为到达停车场ID、到达日期时间，以到达日期时间与出发日期时间的时间差计算出行时耗。方案二、一种电子设备，包括存储器和处理器，存储器存储有计算机程序，所述的处理器执行所述计算机程序时实现方案一所述的基于停车场流水数据的分时段分目的出行OD提取方法的步骤。方案三、一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现方案一所述的基于停车场流水数据的分时段分目的出行OD提取方法。本发明的有益效果如下：降低车辆OD数据采集成本并提高数据采集的精度和效率，数据采集成本相对较低，利用已有的停车场监控系统即可获取数据，无需额外采集调查问卷或GPS定位设备。数据处理效率高，可以实现实时、自动化地提取出行OD数据，减少人工处理的工作量。提取的车辆OD数据为交通规划、交通管控、智能交通工作提供数据支持。本发明在城市交通规划、交通管理、智能交通系统等领域具有广泛应用前景。有助于交通规划者、交通管理者和研究人员提供有力的数据支持，帮助他们更好地理解和解决城市交通问题。附图说明此处所说明的附图用来提供对本申请的进一步理解，构成本申请的一部分，本申请的示意性实施例及其说明用于解释本申请，并不构成对本申请的不当限定。在附图中：图1为基于停车场流水数据的分时段分目的出行OD提取方法的流程图；图2为停车场停车流水数据生成车辆出行OD表的流程图；图3为车辆出行OD表和车辆办公地停车场数据生成分目的的车辆出行OD表的流程图。具体实施方式为了使本申请实施例中的技术方案及优点更加清楚明白，以下结合附图对本申请的示例性实施例进行进一步详细的说明，显然，所描述的实施例仅是本申请的一部分实施例，而不是所有实施例的穷举。需要说明的是，在不冲突的情况下，本申请中的实施例及实施例中的特征可以相互组合。实施例1、参照图1-图3说明本实施方式，基于停车场流水数据的分时段分目的出行OD提取方法，包括以下步骤：S1.获取停车场位置数据、交通分区数据和停车场停车流水数据；停车场位置数据包括：停车场ID、停车场名称、停车场具体位置、停车场位置的经纬度和停车场车位数量；交通分区数据包括：交通分区ID、交通分区名称、面域地理信息；停车场停车流水数据包括：停车场ID、车辆ID、进入停车场时间、离开停车场时间和停车时间；详见表1停车场位置数据表、表2交通分区数据表和表3停车场实时量水数据表。表1 停车场位置数据表字段字段含义数据类型fid停车场位置IDvarcharpark_id停车场IDvarcharfname停车场名称stringaddr地址varcharlat纬度varcharlng经度varcharpark_type停车场类型stringtotal车位总数int表2 交通分区数据表字段字段含义数据类型zone_id停车场IDvarcharzone_name交通分区名称stringzone_geometry面域地理信息string表3 停车场实时流水数据表字段字段含义数据类型park_id停车场IDvarcharplate_id车辆IDvarcharenter_time进入停车场时间stringleave_time离开停车场时间stringpark_duration停车时长int基于停车流水数据提取分目的出行OD数据的方法在城市交通规划、交通管理、智能交通系统等领域具有广泛应用前景。可以为城市交通规划者、交通管理者和研究人员提供有力的数据支持，帮助他们更好地理解和解决城市交通问题。S2.对S1获取的数据进行预处理，生成停车场交通分区关联表；具体的，对停车场的实时流水数据、停车场位置数据和交通分区数据进行预处理，旨在清洗、整合和转换原始数据，以便后续分析和提取出行OD数据，具体包括以下步骤：S21.使用python中drop_duplicates函数去除重复记录，避免多次对同一辆车计数；将停车流水数据设置为’df’数据表，表达式为：df=df.drop_duplicates；S22.通过设定停留时间阈值，排除停留时间在阈值内的记录纠正异常数据；表达式为：df_correctd = df＞= min_stay_time)&amp;]；停留时间阈值包括最长停留时间和最短停留时间；S23.采用插值填补缺失数据，根据相邻时间段的数据进行推算，表达式为：指定值填充缺失值df = df.fillna；或删除包含缺失值的行，df=df.dropna；S24.采用空间位置关联算法，将停车场位置数据、交通分区数据进行空间关联，生成停车场交通分区关联表；具体的，对停车场位置数据和交通分区数据进行预处理，去除重复记录可以避免数据冗杂，纠正异常数据为了排除定位地点不准确等因素；数据预处理的目标是确保数据的质量和一致性，减少错误和噪声对后续分析的影响；通过合理的数据清洗、整合和关联，可以为提取分目的出行OD数据奠定良好的基础，为后续的交通分析和决策提供准确可靠的数据支持。S3.基于停车场停车流水数据识别车辆居住地，生成车辆居住办公地信息数据；车辆居住办公地识别是一项重要的数据分析任务，旨在确定车辆在日间和夜间经常停留的区域，并据此生成车辆居住和办公地信息数据。车辆居住办公地信息数据包括车辆居住地停车场和车辆办公地停车场；所述车辆居住地停车场包括车辆日间常停区域和夜间常停区域；生成车辆居住地停车场的方法是：基于历史停车场停车流水数据，统计车辆夜间停留各停车场的停留频次；选取夜间停留频次最长的停车场为居住地停车中心点；以居住地停车中心点中心500米范围内的所有停车场标识为车辆居住停车场；具体的，夜间居住地停车时段定义在22:00至次日6:00；且夜间在停留点停留的时长不少于6小时；生成车辆办公地停车场的方法是：基于历史停车流水数据，统计车辆日间停留各停车场的停留频次；选取日间停留频次最长的停车场为办公地停车中心点；办公地停车中心点为中心500米范围内的所有停车场标识为车辆的潜在车辆办公地停车场。具体的，日间居住地停车时段定义在09:00至当日18:00；且日间在停留点停留的时长不少于4小时；S4.基于停车流水数据，结合时段划分、车辆居住办公地信息数据，提取交通分区间分时段分目的的出行OD；S41.车辆OD识别，基于停车场停车流水数据，识别单个车辆的出行起点和终点为目标，提取生成车辆出行OD表；S441.将累计多日停车场停车流水数据按照车辆ID、以进入停车场的时间从小到大进行排序；S442.将上述结果相邻的2条记录，以前一条记录的停车场ID、离开停车场时间标记为出发停车场ID、出发日期时间，以第二条记录的停车场ID、进入停车场时间标记为到达停车场ID、到达日期时间，以到达日期时间与出发日期时间的时间差计算出行时耗；参照图2停车场停车流水数据生成车辆出行OD表示意图。S42.车辆出行目的识别，基于车辆出行OD表结合车辆办公地停车场数据，生成分目的的车辆出行OD表。参照图3车辆出行OD表和车辆办公地停车场数据生成分目的的车辆出行OD表示意图；参照表4识别出行目的类型和识别条件表；表4识别出行目的类型和识别条件表S43.交通分区分时段分目的出行OD识别；基于分目的的车辆出行OD表结合停车场交通分区关联表和时段对照表生成车辆出行OD表。时段对照表是指用户预先设置的一段时间对照关系，将一天中的时间划分为不同的时间段，如将一天的时间划分为早高峰、平峰、晚高峰等时段；参照表5时段对照表；表5时段对照表具体的，按照交通分区集计车辆出行OD数据的主要原因有二，一是根据隐私保护，不允许输出能还原个体出行轨迹的数据，因此需要对车辆数据进行集计，隐藏包含具体个体的出行特征数据。二是交通分区数量远少于停车场数量，而出行OD数据是交通分区数量的二次幂级，按照交通分区集计1-后，能降低后续数据后续分析应用的复杂度。具体的，获取停车场位置数据、交通分区数据和停车场停车流水数据来源广泛，不仅可以获取私家车出行数据，还可以获取其他类型车辆的出行数据，如商业车辆、服务车辆等。数据采集成本相对较低，利用已有的停车场监控系统即可获取数据，无需额外采集调查问卷或GPS定位设备。数据处理效率高，可以实现实时、自动化地提取出行OD数据，减少人工处理的工作量。本发明缩略语和关键术语定义：停车流水数据：停车流水数据是指关于停车场或停车设施使用情况的数据记录。它包括了车辆进入停车场的时间、车辆离开停车场的时间以及停车时长等信息。这些数据可以用于分析停车场的利用率、车流量峰值时段、停车时长分布等，从而提供有关停车管理和规划的信息。停车流水数据通常通过车辆识别系统和计时设备来收集，然后存储和分析这些数据。本专利中停车流水数据包括：车辆进入停车场的时间戳、车辆离开停车场的时间戳、车辆在停车场内的停留时长、车辆的唯一标识符、停车日期。车辆出行OD：车辆出行OD是指车辆从起点到达目的地的出行过程。它用于描述车辆在道路网络中的出行路径和行程。OD数据是对车辆出行行为进行记录和分析的重要数据源，在交通规划、交通管理、交通仿真建模等领域有较大的实用性。实施例2、本发明的计算机装置可以是包括有处理器以及存储器等装置，例如包含中央处理器的单片机等。并且，处理器用于执行存储器中存储的计算机程序时实现上述的基于停车场流水数据的分时段分目的出行OD提取方法的步骤。所称处理器可以是中央处理单元，还可以是其他通用处理器、数字信号处理器 、专用集成电路、现成可编程门阵列  或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等。所述存储器可主要包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需的应用程序等；存储数据区可存储根据手机的使用所创建的数据等。此外，存储器可以包括高速随机存取存储器，还可以包括非易失性存储器，例如硬盘、内存、插接式硬盘，智能存储卡，安全数字卡，闪存卡、至少一个磁盘存储器件、闪存器件、或其他易失性固态存储器件。实施例3、计算机可读存储介质实施例。本发明的计算机可读存储介质可以是被计算机装置的处理器所读取的任何形式的存储介质，包括但不限于非易失性存储器、易失性存储器、铁电存储器等，计算机可读存储介质上存储有计算机程序，当计算机装置的处理器读取并执行存储器中所存储的计算机程序时，可以实现上述的基于停车场流水数据的分时段分目的出行OD提取方法的步骤。所述计算机程序包括计算机程序代码，所述计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。所述计算机可读介质可以包括：能够携带所述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。需要说明的是，所述计算机可读介质包含的内容可以根据司法管辖区内立法和专利实践的要求进行适当的增减，例如在某些司法管辖区，根据立法和专利实践，计算机可读介质不包括电载波信号和电信信号。尽管根据有限数量的实施例描述了本发明，但是受益于上面的描述，本技术领域内的技术人员明白，在由此描述的本发明的范围内，可以设想其它实施例。此外，应当注意，本说明书中使用的语言主要是为了可读性和教导的目的而选择的，而不是为了解释或者限定本发明的主题而选择的。因此，在不偏离所附权利要求书的范围和精神的情况下，对于本技术领域的普通技术人员来说许多修改和变更都是显而易见的。对于本发明的范围，对本发明所做的公开是说明性的，而非限制性的，本发明的范围由所附权利要求书限定。
