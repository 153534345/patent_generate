标题title
基于无人机多光谱遥感的薇甘菊智能检测方法
摘要abst
本发明公开了一种基于无人机多光谱遥感的薇甘菊智能检测方法，包括以下步骤：步骤S10：将无人机中的薇甘菊多光谱遥感数据生成薇甘菊多光谱正射影像；步骤S20：基于薇甘菊多光谱正射影像计算薇甘菊白化矩阵，形成单类白化多光谱影像；步骤S30：对单类白化多光谱影像进行分割，形成影像图斑；步骤S40：基于薇甘菊的多光谱遥感数据集构建最佳随机森林模型并生成薇甘菊检测器；步骤S50：基于薇甘菊检测器对影像图斑进行诊断筛选。本发明的有益效果是：该方法可以在精细尺度上完成对薇甘菊的检测，提高了对于入侵物种薇甘菊的智能检测能力。
权利要求书clms
1.一种基于无人机多光谱遥感的薇甘菊智能检测方法，其特征在于，包括以下步骤：步骤S10：将无人机中的薇甘菊多光谱遥感数据生成薇甘菊多光谱正射影像；步骤S20：基于薇甘菊多光谱正射影像计算薇甘菊白化矩阵，形成单类白化多光谱影像；步骤S30：对单类白化多光谱影像进行分割，形成影像图斑；步骤S40：基于薇甘菊的多光谱遥感数据集构建最佳随机森林模型并生成薇甘菊检测器；步骤S50：基于薇甘菊检测器对影像图斑进行诊断筛选。2.根据权利要求1所述的一种基于无人机多光谱遥感的薇甘菊智能检测方法，其特征在于，所述步骤S20中基于薇甘菊多光谱正射影像计算薇甘菊白化矩阵的具体过程为：步骤S201：将薇甘菊的正射多光谱影像分为N个训练样本的数据集S，其中S={S1,S2，…，SN}，通过数据集来估计感兴趣类别X；步骤S202：感兴趣类别X的协方差矩阵为：；步骤S203：通过感兴趣类别X的协方差矩阵计算出薇甘菊白化矩阵：；其中A表示随机变量X的协方差矩阵，E表示期望运算，XT表示X的转置，Y表示使用线性变换w将X转换后的变量，v表示WTAW，其中W是为对称正定矩阵。3.根据权利要求1所述的一种基于无人机多光谱遥感的薇甘菊智能检测方法，其特征在于，所述步骤S50中基于薇甘菊检测器对影像图斑进行诊断筛选的具体过程为：步骤S501：将待检测的图像进行预处理，处理完成后进行白化变换；步骤S502：在预处理后的图像上标出影像图斑区域，将该区域的数据块薇甘菊检测器中，薇甘菊检测器中的每个决策树对数据块的数据特征进行分类并得到多个分类结果；步骤S503：对所有决策树中的结果进行投票，得到总的分类结果；步骤S504：对薇甘菊的影像图斑进行标记，通过不同标记完成薇甘菊的分割；步骤S505：将分割后的影像图斑输入至薇甘菊检测器中并进行诊断。4.根据权利要求3所述的一种基于无人机多光谱遥感的薇甘菊智能检测方法，其特征在于，所述步骤S505的诊断标准为：对分割后影像图斑的正射影像大小进行判断，如果感染像素点个数大于阈值3000且感染像素比例超过30%，则判断为感染薇甘菊，所得图斑即为薇甘菊图斑；如果感染像素点个数大于阈值3000且感染像素比例未超过30%，则判断为未感染薇甘菊。5.根据权利要求3所述的一种基于无人机多光谱遥感的薇甘菊智能检测方法，其特征在于，所述步骤S502中数据块的数据特征包括光谱特征、纹理特征、梯度特征。6.根据权利要求1所述的一种基于无人机多光谱遥感的薇甘菊智能检测方法，其特征在于，所述步骤S10中通过薇甘菊多光谱遥感数据生成薇甘菊多光谱正射影像的具体过程为：步骤S101：反射率标定，将所拍摄图像中的数字灰度值转换为对应的波谱辐射亮度，再通过暗角矫正与曝光矫正计算，得到相应的反射率图像，用以消除相机本身和拍摄环境的影响；步骤S102：对齐，使用sift方法提取出图像的特征向量, 进行特征点匹配和仿射变换，以实现不同波段影像的对齐；步骤S103：合成，将步骤S102中对齐的波段影像进行合成，生成多光谱正射影像。7.根据权利要求1所述的一种基于无人机多光谱遥感的薇甘菊智能检测方法，其特征在于，所述步骤S30中对形成的单类白化多光谱影像进行超像素分割得到影像图斑。8.根据权利要求1所述的一种基于无人机多光谱遥感的薇甘菊智能检测方法，其特征在于，所述步骤S40中通过对假设空间进行群举搜索构建最佳随机森林模型并生成薇甘菊检测器。
说明书desc
技术领域本发明涉及无人机领域，具体的说涉及到一种基于无人机多光谱遥感的薇甘菊智能检测方法。背景技术生态文明建设背景下的生态安全监测已经成为我国重要生态环境监测内容。薇甘菊是多年生藤本植物，在其适生地攀援缠绕于乔灌木植物，重压于其冠层顶部，阻碍附主植物的光合作用继而导致附主死亡，是世界上极具危险性的有害植物之一。薇甘菊入侵中国，已经造成了严重的生态环境影响。及时准确掌握薇甘菊的分布区域、发生面积、发生生境、危害程度等情况，可以为薇甘菊的科学防治提供支撑，有效控制其扩散蔓延，降低其对农业生产和生态安全的危害。鉴于卫星遥感受限于空间分辨率及易受云雨天气影响的特点，很难在精细尺度上完成对薇甘菊的检测。发明内容为了克服现有技术的不足，本发明提供一种基于无人机多光谱遥感的薇甘菊智能检测方法，该方法可以在精细尺度上完成对薇甘菊的检测，提高了对于入侵物种薇甘菊的智能检测能力。本发明解决其技术问题所采用的技术方案是：一种基于无人机多光谱遥感的薇甘菊智能检测方法，包括以下步骤：步骤S10：将无人机中的薇甘菊多光谱遥感数据生成薇甘菊多光谱正射影像；步骤S20：基于薇甘菊多光谱正射影像计算薇甘菊白化矩阵，形成单类白化多光谱影像；步骤S30：对单类白化多光谱影像进行分割，形成影像图斑；步骤S40：基于薇甘菊的多光谱遥感数据集构建最佳随机森林模型并生成薇甘菊检测器；步骤S50：基于薇甘菊检测器对影像图斑进行诊断筛选。在上述的方法中，所述步骤S20中基于薇甘菊多光谱正射影像计算薇甘菊白化矩阵的具体过程为：步骤S201：将薇甘菊的正射多光谱影像分为N个训练样本的数据集S，其中S={S1,S2，…，SN}，通过数据集来估计感兴趣类别X；步骤S202：感兴趣类别X的协方差矩阵为：；步骤S203：通过感兴趣类别X的协方差矩阵计算出薇甘菊白化矩阵：；其中A表示随机变量X的协方差矩阵，E表示期望运算，XT表示X的转置，Y表示使用线性变换w将X转换后的变量，v表示WTAW，其中W是为对称正定矩阵。在上述的方法中，所述步骤S50中基于薇甘菊检测器对影像图斑进行诊断筛选的具体过程为：步骤S501：将待检测的图像进行预处理，处理完成后进行白化变换；步骤S502：在预处理后的图像上标出影像图斑区域，将该区域的数据块薇甘菊检测器中，薇甘菊检测器中的每个决策树对数据块的数据特征进行分类并得到多个分类结果；步骤S503：对所有决策树中的结果进行投票，得到总的分类结果；步骤S504：对薇甘菊的影像图斑进行标记，通过不同标记完成薇甘菊的分割；步骤S505：将分割后的影像图斑输入至薇甘菊检测器中并进行诊断。在上述的方法中，所述步骤S505的诊断标准为：对分割后影像图斑的正射影像大小进行判断，如果感染像素点个数大于阈值3000且感染像素比例超过30%，则判断为感染薇甘菊，所得图斑即为薇甘菊图斑；如果感染像素点个数大于阈值3000且感染像素比例未超过30%，则判断为未感染薇甘菊。在上述的方法中，所述步骤S502中数据块的数据特征包括光谱特征、纹理特征、梯度特征。在上述的方法中，所述步骤S10中通过薇甘菊多光谱遥感数据生成薇甘菊多光谱正射影像的具体过程为：步骤S101：反射率标定，将所拍摄图像中的数字灰度值转换为对应的波谱辐射亮度，再通过暗角矫正与曝光矫正计算，得到相应的反射率图像，用以消除相机本身和拍摄环境的影响；步骤S102：对齐，使用sift方法提取出图像的特征向量, 进行特征点匹配和仿射变换，以实现不同波段影像的对齐；步骤S103：合成，将步骤S102中对齐的波段影像进行合成，生成多光谱正射影像。在上述的方法中，所述步骤S30中对形成的单类白化多光谱影像进行超像素分割得到影像图斑。在上述的方法中，所述步骤S40中通过对假设空间进行群举搜索构建最佳随机森林模型并生成薇甘菊检测器。本发明的有益效果是：该方法可以在精细尺度上完成对薇甘菊的检测，提高了对于入侵物种薇甘菊的检测能力。附图说明图1为本发明一种基于无人机多光谱遥感的薇甘菊智能检测方法的步骤示意图。图2为本发明一种基于无人机多光谱遥感的薇甘菊智能检测方法的详细过程示意图。具体实施方式下面结合附图和实施例对本发明进一步说明。以下将结合实施例和附图对本发明的构思、具体结构及产生的技术效果进行清楚、完整地描述，以充分地理解本发明的目的、特征和效果。显然，所描述的实施例只是本发明的一部分实施例，而不是全部实施例，基于本发明的实施例，本领域的技术人员在不付出创造性劳动的前提下所获得的其他实施例，均属于本发明保护的范围。另外，专利中涉及到的所有联接/连接关系，并非单指构件直接相接，而是指可根据具体实施情况，通过添加或减少联接辅件，来组成更优的联接结构。本发明创造中的各个技术特征，在不互相矛盾冲突的前提下可以交互组合。参照图1至图2所示，本发明揭示了一种基于无人机多光谱遥感的薇甘菊智能检测方法，具体的，该方法包括以下步骤：步骤S10：将无人机中的薇甘菊多光谱遥感数据生成薇甘菊多光谱正射影像；步骤S20：基于薇甘菊多光谱正射影像计算薇甘菊白化矩阵，形成单类白化多光谱影像；步骤S30：对单类白化多光谱影像进行分割，形成影像图斑；步骤S40：基于薇甘菊的多光谱遥感数据集构建最佳随机森林模型并生成薇甘菊检测器；步骤S50：基于薇甘菊检测器对影像图斑进行诊断筛选。在无人机上搭载多光谱传感器然后对薇甘菊进行检测获得原始的数据，原始数据为单波段，对原始的以单波段形成多光谱遥感数据并进行波段对齐、反射率标定、合成，然后生成多光谱正射影像，原始数据可以储存在无人机或无人机地面站系统或无人机机库系统或无人机云控平台或无人机云平台中。多光谱相机是一种能够捕捉到不同波长的光线的相机，它可以将捕捉到的光线分解成不同的颜色，从而得到不同的光谱。搭载在无人机上的多光谱相机可以用于植被覆盖分类、植被病虫害监测、地质调查、土壤调查等应用领域。例如，植被覆盖分类可以通过高分辨率多光谱影像来实现，而植被病虫害监测则可以通过近红外出的变化较为明显、峰值变低甚至消失，整个反射光谱曲线波状特征不明显来实现。具体的，将薇甘菊多光谱遥感数据生成薇甘菊多光谱正射影像包括以下步骤：步骤S101：反射率标定，将所拍摄图像中的数字灰度值转换为对应的波谱辐射亮度，再通过暗角矫正与曝光矫正计算，得到相应的反射率图像，用以消除相机本身和拍摄环境的影响；步骤S102：对齐，使用sift方法提取出图像的特征向量, 进行特征点匹配和仿射变换，以实现不同波段影像的对齐；步骤S103：合成，将步骤S102中对齐的波段影像进行合成，生成多光谱正射影像。利用多光谱相机提供的辐射定标参数，将所拍摄图像中的数字灰度值转换为对应的波谱辐射亮度，再通过暗角矫正与曝光矫正计算，得到相应的反射率图像，以消除相机本身和拍摄环境的影响。由于不同波段的图像在拍摄位置上有少许偏差，需要利用sift方法提取出图像的特征向量, 然后进行特征点匹配和仿射变换，以实现不同波段影像的对齐。在实现不同波段的影像对齐之后，每个波段的数据格式与尺寸都完全相同，按照规定好的波段顺序可将这些图像数据合成在一起，生成多光谱正射影像。将薇甘菊的正射多光谱影像通过白化变换后得到薇甘菊-白化矩阵，通过白化矩阵能够去除原始数据集中各个特征之间的相关性。具体的，步骤S20中通过薇甘菊多光谱正射影像计算薇甘菊白化矩阵的过程为：步骤S201：将薇甘菊的正射多光谱影像分为N个训练样本的数据集S，其中S={S1,S2，…，SN}，通过数据集来估计感兴趣类别X；步骤S202：感兴趣类别X的协方差矩阵为：；步骤S203：通过感兴趣类别X的协方差矩阵计算出薇甘菊白化矩阵：;其中A表示随机变量X的协方差矩阵，E表示期望运算，XT表示X的转置，Y表示使用线性变换w将X转换后的变量，v表示WTAW，其中W是为对称正定矩阵。具体来说，A=E是由随机变量X的样本数据计算得到的协方差矩阵，Cov是使用线性变换w将X转换后得到的变量Y的协方差矩阵。通过基于薇甘菊多光谱正射影像计算薇甘菊白化矩阵，形成单类白化多光谱影像。通过白化后影像所形成的新特征空间中，兴趣类别主要聚集在特征空间中心位置，呈球状分布，能够更好地识别和分析兴趣类别。具体的，薇甘菊的正射多光谱影像经白化变换后的具体步骤如下：①数据标准化：将薇甘菊的正射多光谱影像进行数据标准化，即将每个波段的像素值减去其均值，然后再除以其标准差，使得每个波段的数据转换为零均值和单位方差，使得不同波段之间具有相似的尺度。②计算协方差矩阵：使用标准化后的数据，计算薇甘菊正射多光谱影像的协方差矩阵。③特征值分解：对协方差矩阵进行特征值分解，得到特征值和对应的特征向量；其中特征值表示了各个特征向量所对应的重要程度，特征向量则表示了新特征空间的基向量。④选择重要特征向量：根据特征值的大小，选择其中最重要的特征向量。并且可以根据特征值的累计贡献率来确定保留多少个重要特征向量，较大的特征值对应的特征向量表示了数据中的主要变化方向。⑤构建白化矩阵：将选取的重要特征向量按列组成一个矩阵，即白化矩阵。⑥进行白化变换：将标准化后的数据与白化矩阵相乘，得到白化后的数据。将形成的单类白化多光谱影像进行超像素分割，形成影像图斑，超像素分割原理如下：①初始化种子点：按照设定的超像素个数，在图像内均匀的分配种子点。假设图片总共有N个像素点，预分割为K个相同尺寸的超像素，那么每个超像素的大小为N/K ，则相邻种子点的距离近似为S=sqrt；②在种子点的n*n邻域内重新选择种子点，计算该邻域内所有像素点的梯度值，将种子点移到该邻域内梯度最小的地方；③综合使用颜色距离和空间距离作为距离度量指标，在每个种子点周围的邻域内为每个像素点分配类标签；④迭代优化，不断迭代上述步骤直到误差收敛，一般迭代次数取10；通过优化超像素分割的结果，使得每个聚类中心周围的像素点更加准确地被分配到该聚类中心；⑤增强连通性，解决错误分割情况。新建一张标记表，表内元素均为-1，按照“Z”型走向将不连续的超像素、尺寸过小超像素重新分配给邻近的超像素，遍历过的像素点分配给相应的标签，直到所有点遍历完毕为止。基于样本的数据集使用格网搜索对假设空间进行群举搜索，构建出最佳森林模型并生成薇甘菊检测器，然后对多光谱影像进行像素级分割，实现对薇甘菊的检测与分割。随机森林算法是指用随机的方式建立多颗决策树，形成随机森林，其中的每一棵决策树之间是相互独立的。在建立每一棵决策树的过程中，随机性体现在随机采样生成样本子集以及随机选择特征进行节点分裂两个方面。即给定一个总体训练集T，共有N个样本，每次有放回地随机选择N个样本，形成一个样本子集用于训练一个决策树；假设训练集的特征个数为d，每次仅选择k个构建决策树。具体构建过程如下：①T中共有N个样本，有放回的随机选择N个样本，作当前决策树根节点处的样本；②当每个样本有M个属性时，在决策树的每个节点需要分裂时，随机从这M个属性中选取出m个属性，满足条件m＜＜M；然后从这m个属性中采用信息增益策略来选择一个属性作为该节点的分裂属性；③决策树形成过程中每个节点都要按照步骤②来分裂，一直到不能够再分裂为止；④按照①-③建立大量的决策树，形成最终随机森林模型。对随机森林中决策树的数量、树的深度、分裂内部节点所需的样本数、每个叶子节点所需的样本数、是否有放回抽样等参数格网，并设定它们的可能范围与取值步长；接着遍历格网中的每一种组合，使用相应的超参数来训练模型，并使用交叉验证在测试集上评估薇甘菊检测模型的性能；最后从所有的格网组合中选择出评估指标最高的一组参数来构建随机森林模型。将薇甘菊正射影像数据分为训练集和测试集；训练集是标注了类别的图像块，测试集是待分类的图像块。提取出训练集中图像块的光谱特征、纹理特征、梯度特征等并做特征融合。通过上述的随机森林模型对训练集进行训练，训练随机森林模型后得到薇甘菊检测器。具体的，步骤S50中基于薇甘菊检测器对影像图斑进行诊断筛选的具体过程为：步骤S501：将待检测的图像进行预处理，进行白化变换；步骤S502：在预处理之后的图像上标出影像图斑区域，将该区域的数据块输入训练好的薇甘菊检测器中，薇甘菊检测器会根据数据特征让数据块通过每个决策树，并对每一个位置得到一个分类结果；步骤S503：对所有的决策树结果进行投票，得到最终的分类结果；步骤S504：对薇甘菊的影像图斑进行分割，影像图斑中判断为薇甘菊感染的部分标记为1，未被薇甘菊感染的部分标记为-1，通过不同标记完成薇甘菊的分割。步骤S505：将分割后的影像图斑输入至薇甘菊检测器中，此时图斑的每一个像素点会输出一个分类结果（1为薇甘菊感染，-1为未感染)。对于正射影像的大小进行判断，当感染像素点个数大于阈值3000且感染像素比例超过30%，可判断感染了薇甘菊，所得图斑即为薇甘菊图斑。如果当感染像素点个数大于阈值3000且感染像素比例未超过30%，说明还未达到薇甘菊感染的标准。当通过无人机获得某块植被区域的真彩色多光谱图像时，此时薇甘菊与其他的植被差异较小，很难分辨出该植被地区是否感染了薇甘菊；将该块植被区域的多光谱图像通过白化矩阵进行变换得到单类白化特征影像时，感染了薇甘菊的区域为蓝绿色，此时感染薇甘菊的区域与正常植被区域有一定差异；然后将该块植被区域的单类白化特征影像经过超像素分割自己薇甘菊检测器处理后，感染了薇甘菊的植被区域则变成了紫色图斑，此时则可以非常明显的分辨出植被中哪些区域感染了薇甘菊。以上是对本发明的较佳实施进行了具体说明，但本发明创造并不限于所述实施例，熟悉本领域的技术人员在不违背本发明精神的前提下还可做出种种的等同变形或替换，这些等同的变形或替换均包含在本申请权利要求所限定的范围内。
