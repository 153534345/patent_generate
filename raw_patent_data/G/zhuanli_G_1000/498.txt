标题title
一种呼吸重症患者远程监控方法及系统
摘要abst
本发明涉及视频图像编码技术领域，具体涉及一种呼吸重症患者远程监控方法及系统。该方法依据当前图像帧与历史图像帧之间像素点的变化情况，得到变化像素点；从变化像素点的局部分布和灰度整体偏差，得到第一优选参数；从变化像素点在相邻历史图像帧之间的变化移动和在所有历史图像帧中的变化程度，得到第二优选参数；结合灰度级下第一优选参数和第二优选参数，以及灰度级分布频率得到灰度级的优先级参数；基于灰度级的优先级参数和灰度级分布概率实现编码传输。本发明通过分析当前图像帧与历史图像帧中变化的像素点特征，对可能为患者变化区域的灰度级给予更高的编码权重，提高编码传输可靠性，对呼吸重症患者进行有效监控。
权利要求书clms
1.一种呼吸重症患者远程监控方法，其特征在于，所述方法包括：根据呼吸重症患者监控视频获取当前图像帧前预设时间段上的历史图像帧；根据当前图像帧与每个历史图像帧之间像素点的变化情况，确定当前图像帧中的变化像素点；根据当前图像帧中变化像素点的位置分布情况，以及每个变化像素点与其他变化像素点之间的分布差异情况，获得每个变化像素点的局部估计范围；在每个变化像素点的局部估计范围内，根据其他变化像素点的位置分布密度以及灰度分布的整体偏差情况，获得每个变化像素点的第一优选参数；在每个变化像素点的局部估计范围内，根据对应变化像素点与其他变化像素点在相邻历史图像帧之间的变化差异情况，获得每个变化像素点的移动指标；根据每个变化像素点在所有历史图像帧中的变化数量和移动指标，获得每个变化像素点的第二优选参数；根据灰度级对应所有变化像素点的第一优选参数和第二优选参数，以及灰度级分布概率，获得每个灰度级的优先级参数；根据当前图像帧中每个灰度级的优先级参数和灰度级分布概率，获得当前图像帧的图像编码进行传输监控。2.根据权利要求1所述一种呼吸重症患者远程监控方法，其特征在于，所述变化像素点的获取方法包括：将当前图像帧与每个历史图像帧采用帧差法，获得当前图像帧与每个历史图像帧之间的变化点；将当前图像帧中对应的所有变化点作为变化像素点。3.根据权利要求1所述一种呼吸重症患者远程监控方法，其特征在于，所述局部估计范围的获取方法包括：计算当前图像帧中所有变化像素点的坐标方差，进行负相关映射并归一化处理，获得当前图像帧的变化分布混乱值；对于任意一个变化像素点，计算该变化像素点与每个其他变化像素点之间的距离，获得该变化像素点的分布差异；将该变化像素点的所有分布差异按照从小到大的顺序排列，获得该变化像素点的分布差异序列；将该变化像素点的分布差异序列中每个分布差异的序号进行负相关映射并归一化处理，获得每个分布差异的调节系数；将分布差异序列中每个分布差异与对应的调节系数相乘，获得该变化像素点的距离序列；计算距离序列中每相邻两个元素值的差异，作为距离差异值；在距离差异值最大时对应的两个元素值中，将最小的元素值对应的分布差异作为该变化像素点的距离分布指标；计算当前图像帧中所有变化像素点的距离分布指标的平均值，获得每个变化像素点的距离阈值；将每个变化像素点的距离阈值与变化分布混乱值的乘积，作为每个变化像素点的局部范围值；以每个变化像素点为中心，以局部范围值为半径，获得每个变化像素点对应的圆形范围作为每个变化像素点的局部估计范围。4.根据权利要求1所述一种呼吸重症患者远程监控方法，其特征在于，所述第一优选参数的获取方法包括：对于任意一个变化像素点，将在该变化像素点的局部估计范围内的其他变化像素点作为该变化像素点的局部点；统计每个局部点的局部估计范围内变化像素点的数量，作为每个局部点的局部数量；将局部数量最大时对应的局部点作为该变化像素点的聚集点；根据当前图像帧中灰度级对应的像素点的分布情况，获得当前图像帧的高灰度级均值；在每个聚集点的局部估计范围内，计算每个变化像素点的灰度值与高灰度级均值之间的差异，获得每个变化像素点的灰度差异；计算每个聚集点的局部估计范围内所有变化像素点的灰度差异的平均值并进行归一化处理，获得每个聚集点的局部灰度分布指标；将每个聚集点的局部灰度分布指标与局部数量的乘积进行归一化处理，获得每个聚集点的优选值；将所有聚集点的优选值的平均值作为该变化像素点的第一优选参数。5.根据权利要求1所述一种呼吸重症患者远程监控方法，其特征在于，所述移动指标的获取方法包括：在时序顺序上对每个历史图像帧与前一个历史图像帧进行帧差法计算后，获得每个历史图像帧中的差异点；依次将每个变化像素点作为参考点；当历史图像帧中的差异点的位置与参考点存在相同时，将对应历史图像帧作为参考点的参考帧；计算每个参考帧在参考点的局部估计范围内的差异点与参考点之间的距离的平均值，获得参考点在每个参考帧下的移动变化值；计算参考点在对应所有参考帧下的移动变化值的平均值，进行负相关映射并归一化处理，获得参考点的移动指标。6.根据权利要求2所述一种呼吸重症患者远程监控方法，其特征在于，所述第二优选参数的获取方法包括：对于任意一个变化像素点，统计当前图像帧与每个历史图像帧之间的变化点的位置与该变化像素点相同的次数，获得该变化像素点的变化数量；将该变化像素点的变化数量与移动指标的乘积进行归一化处理，获得该变化像素点的第二优选参数。7.根据权利要求1所述一种呼吸重症患者远程监控方法，其特征在于，所述优先级参数的获取方法包括：将每个变化像素点的第一优选参数和第二优选参数的和值，作为每个变化像素点的总优选参数；将每个灰度级对应的所有变化像素点的总优选参数的平均值，作为每个灰度级的优选指标；将当前图像帧中每个灰度级的出现概率作为每个灰度级的灰度级分布概率；将每个灰度级的优选指标和灰度级分布概率的乘积，作为每个灰度级的优先级参数。8.根据权利要求7所述一种呼吸重症患者远程监控方法，其特征在于，所述根据当前图像帧中每个灰度级的优先级参数和灰度分布，获得当前图像帧的图像编码进行传输监控，包括：结合每个灰度级的优先级参数和灰度级分布概率，获取当前图像帧中灰度级的霍夫曼树；霍夫曼树的左子树为每个非零优先级参数对应的灰度级根据优先级参数构建，霍夫曼树的右子树为每个优先级参数为零的灰度级根据灰度级分布概率构建；根据当前图像帧中灰度级的霍夫曼树对当前图像帧进行霍夫曼编码，获得当前图像帧的图像编码以及每个灰度级的灰度级编码；将图像编码以及所有灰度级编码进行传输。9.根据权利要求4所述一种呼吸重症患者远程监控方法，其特征在于，所述高灰度级均值的获取方法包括：将当前图像帧中所有像素点按照灰度级从大到小的顺序排列，获得灰度分布序列；计算灰度分布序列中前预设数量个像素点的灰度级的平均值，获得当前图像帧的高灰度级均值。10.一种呼吸重症患者远程监控系统，包括存储器和处理器，其特征在于，所述处理器执行所述存储器存储的计算程序，以实现如权利要求1-9任一项所述一种呼吸重症患者远程监控方法。
说明书desc
技术领域本发明涉及视频图像编码技术领域，具体涉及一种呼吸重症患者远程监控方法及系统。背景技术在呼吸重症患者病房中，通常会对患者进行全天健康监控，这类监控系统通常集成了多种传感器和图像采集对患者进行全方位的实时检测，传感器检测数据主要包括呼吸频率、心率、血氧饱和度和血压等，图像采集主要采集实时监控图像，这些数据与实时监控图像通过仪器传输至数据管理系统，通过管理系统医护人员可以实时对患者情况进行远程监控。由于图像数据内容较大，在图像传输过程中会对图像进行压缩编码，而对于医疗监控这类对精确性存在高要求的图像而言，需要一种无损压缩编码方法进行压缩，因此常使用霍夫曼编码对其进行压缩加密。但如果传输网络出现波动等异常情况，监控数据传输过程会出现丢包，将导致监控画面出现缺失的情况，由于在霍夫曼编码时并未对监控图像中观测患者发生变化的重要部分进行优先分析并编码，导致图像中需要观测的重要部分的编码丢失率较高，进而使传输后的监控图像中重要部分缺失严重，将无法对重症患者进行有效的监控管理。发明内容为了解决现有技术中导致图像中需要观测的重要部分的编码丢失率较高，进而使传输后的监控图像中重要部分缺失严重，将无法对重症患者进行有效的监控管理的技术问题，本发明的目的在于提供一种呼吸重症患者远程监控方法及系统，所采用的技术方案具体如下：本发明提供了一种呼吸重症患者远程监控方法，所述方法包括：根据呼吸重症患者监控视频获取当前图像帧前预设时间段上的历史图像帧；根据当前图像帧与每个历史图像帧之间像素点的变化情况，确定当前图像帧中的变化像素点；根据当前图像帧中变化像素点的位置分布情况，以及每个变化像素点与其他变化像素点之间的分布差异情况，获得每个变化像素点的局部估计范围；在每个变化像素点的局部估计范围内，根据其他变化像素点的位置分布密度以及灰度分布的整体偏差情况，获得每个变化像素点的第一优选参数；在每个变化像素点的局部估计范围内，根据对应变化像素点与其他变化像素点在相邻历史图像帧之间的变化差异情况，获得每个变化像素点的移动指标；根据每个变化像素点在所有历史图像帧中的变化数量和移动指标，获得每个变化像素点的第二优选参数；根据灰度级对应所有变化像素点的第一优选参数和第二优选参数，以及灰度级分布概率，获得每个灰度级的优先级参数；根据当前图像帧中每个灰度级的优先级参数和灰度级分布概率，获得当前图像帧的图像编码进行传输监控。进一步地，所述变化像素点的获取方法包括：将当前图像帧与每个历史图像帧采用帧差法，获得当前图像帧与每个历史图像帧之间的变化点；将当前图像帧中对应的所有变化点作为变化像素点。进一步地，所述局部估计范围的获取方法包括：计算当前图像帧中所有变化像素点的坐标方差，进行负相关映射并归一化处理，获得当前图像帧的变化分布混乱值；对于任意一个变化像素点，计算该变化像素点与每个其他变化像素点之间的距离，获得该变化像素点的分布差异；将该变化像素点的所有分布差异按照从小到大的顺序排列，获得该变化像素点的分布差异序列；将该变化像素点的分布差异序列中每个分布差异的序号进行负相关映射并归一化处理，获得每个分布差异的调节系数；将分布差异序列中每个分布差异与对应的调节系数相乘，获得该变化像素点的距离序列；计算距离序列中每相邻两个元素值的差异，作为距离差异值；在距离差异值最大时对应的两个元素值中，将最小的元素值对应的分布差异作为该变化像素点的距离分布指标；计算当前图像帧中所有变化像素点的距离分布指标的平均值，获得每个变化像素点的距离阈值；将每个变化像素点的距离阈值与变化分布混乱值的乘积，作为每个变化像素点的局部范围值；以每个变化像素点为中心，以局部范围值为半径，获得每个变化像素点对应的圆形范围作为每个变化像素点的局部估计范围。进一步地，所述第一优选参数的获取方法包括：对于任意一个变化像素点，将在该变化像素点的局部估计范围内的其他变化像素点作为该变化像素点的局部点；统计每个局部点的局部估计范围内变化像素点的数量，作为每个局部点的局部数量；将局部数量最大时对应的局部点作为该变化像素点的聚集点；根据当前图像帧中灰度级对应的像素点的分布情况，获得当前图像帧的高灰度级均值；在每个聚集点的局部估计范围内，计算每个变化像素点的灰度值与高灰度级均值之间的差异，获得每个变化像素点的灰度差异；计算每个聚集点的局部估计范围内所有变化像素点的灰度差异的平均值并进行归一化处理，获得每个聚集点的局部灰度分布指标；将每个聚集点的局部灰度分布指标与局部数量的乘积进行归一化处理，获得每个聚集点的优选值；将所有聚集点的优选值的平均值作为该变化像素点的第一优选参数。进一步地，所述移动指标的获取方法包括：在时序顺序上对每个历史图像帧与前一个历史图像帧进行帧差法计算后，获得每个历史图像帧中的差异点；依次将每个变化像素点作为参考点；当历史图像帧中的差异点的位置与参考点存在相同时，将对应历史图像帧作为参考点的参考帧；计算每个参考帧在参考点的局部估计范围内的差异点与参考点之间的距离的平均值，获得参考点在每个参考帧下的移动变化值；计算参考点在对应所有参考帧下的移动变化值的平均值，进行负相关映射并归一化处理，获得参考点的移动指标。进一步地，所述第二优选参数的获取方法包括：对于任意一个变化像素点，统计当前图像帧与每个历史图像帧之间的变化点的位置与该变化像素点相同的次数，获得该变化像素点的变化数量；将该变化像素点的变化数量与移动指标的乘积进行归一化处理，获得该变化像素点的第二优选参数。进一步地，所述优先级参数的获取方法包括：将每个变化像素点的第一优选参数和第二优选参数的和值，作为每个变化像素点的总优选参数；将每个灰度级对应的所有变化像素点的总优选参数的平均值，作为每个灰度级的优选指标；将当前图像帧中每个灰度级的出现概率作为每个灰度级的灰度级分布概率；将每个灰度级的优选指标和灰度级分布概率的乘积，作为每个灰度级的优先级参数。进一步地，所述根据当前图像帧中每个灰度级的优先级参数和灰度分布，获得当前图像帧的图像编码进行传输监控，包括：结合每个灰度级的优先级参数和灰度级分布概率，获取当前图像帧中灰度级的霍夫曼树；霍夫曼树的左子树为每个非零优先级参数对应的灰度级根据优先级参数构建，霍夫曼树的右子树为每个优先级参数为零的灰度级根据灰度级分布概率构建；根据当前图像帧中灰度级的霍夫曼树对当前图像帧进行霍夫曼编码，获得当前图像帧的图像编码以及每个灰度级的灰度级编码；将图像编码以及所有灰度级编码进行传输。进一步地，所述高灰度级均值的获取方法包括：将当前图像帧中所有像素点按照灰度级从大到小的顺序排列，获得灰度分布序列；计算灰度分布序列中前预设数量个像素点的灰度级的平均值，获得当前图像帧的高灰度级均值。本发明提供了一种呼吸重症患者远程监控系统，包括存储器和处理器，处理器执行存储器存储的计算程序，以实现如上述一种呼吸重症患者远程监控方法。本发明具有如下有益效果：1.本发明考虑到连续监控中患者发生变化区域对当前图像帧的重要程度，依据当前图像帧与历史图像帧之间像素点的变化情况，得到变化像素点，从变化区域中的像素点特征分析灰度级编码的优先程度。从变化像素点的局部分布密度和灰度的整体偏差，得到每个变化像素点的第一优选参数，从位置和灰度特征上对更可能为患者变化区域的像素点给予更高的优先级。从变化像素点在相邻历史图像帧之间的变化移动情况，以及每个变化像素点在所有历史图像帧中的变化程度，得到每个变化像素点的第二优选参数，从变化像素点位置处的变化移动情况为更可能为患者变化区域的变化像素点给予更高的优先程度。结合每个灰度级下每个变化像素点的分布特征以及变化特征，也即第一优选参数和第二优选参数，再加上灰度级分布频率，得到每个灰度级的优先级参数，也即对患者发生变化区域的像素点的灰度级给予更高的编码重视程度，最终基于灰度级的优先级参数和灰度级分布概率实现编码传输。本发明通过分析当前图像帧相与历史图像帧中变化的像素点的特征，对可能为患者发生变化区域的像素点的灰度级给予更高的编码等级，降低了重要部分编码的丢失率，提高传输可靠性，使传输后的监控图像中重要部分得以保留，能够对重症患者进行有效的监控管理。2.在第一优选参数的获取过程中，由于图像中的变化区域存在多个，而患者对应的变化部分重要程度是更高的，因此先根据当前图像帧中每个变化像素点的分布位置和与其他变化像素点的分布差异，得到每个变化像素点的局部估计范围，考虑到变化像素点的分布情况不同，通过局部估计范围反映对每个变化像素点分析的最优局部范围。进一步在每个变化像素点的局部估计范围内，考虑光线产生变化区域与患者发生变化区域的不同，根据变化像素点之间的位置分布和灰度分布的整体偏差情况，得到第一优选参数，从分布的聚集程度以及灰度分布的整体偏差程度进行分析，在变化区域的位置灰度分布特征上得到第一优选参数。3.在第二优选参数的获取过程中，考虑到患者发生变化区域与其他变化区域在变化移动程度和变化持续性的不同，因此根据相邻历史图像帧之间的变化像素点与局部估计范围内其他变化像素点的变化情况，得到移动指标，从变化像素点位置处发生变化时的局部整体变化情况反映变化移动特征，进一步结合变化像素点在所有历史图像帧中发生变化的变化数量，也即结合变化像素点出发生变化的连续性，得到每个变化像素点的第二优选参数，从变化程度进行分析，在变化区域的变化移动特征上得到第二优选参数。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例所提供的一种呼吸重症患者远程监控方法流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种呼吸重症患者远程监控方法及系统，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种呼吸重症患者远程监控方法及系统的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种呼吸重症患者远程监控方法流程图，该方法包括以下步骤：S1：根据呼吸重症患者监控视频获取当前图像帧前预设时间段上的历史图像帧；根据当前图像帧与每个历史图像帧之间像素点的变化情况，确定当前图像帧中的变化像素点。对于呼吸重症患者监控视频，主要在于可远程观察患者呼吸等状态情况，因此监控视频中的图像需要远程实时传输到医护监控系统处，在本发明实施例中，获取呼吸重症监控视频中当前图像帧前预设时间段上的历史图像帧，预设时间段设置为1秒，具体数值实施者可根据具体实施情况进行调整。其中每个图像帧均为经过图像预处理后的图像帧，以便于对图像特征进行分析，需要说明的是，图像预处理过程可以具体包括图像灰度化处理和滤波去噪处理，图像预处理过程为本领域技术人员熟知的技术手段，具体可选用灰度加权法进行灰度化和双边滤波法进行滤波去噪等，在此不做赘述。由于常用霍夫曼编码基于灰度级分布情况进行排序编码，仅能对灰度级数量较多的像素点进行更好的编码保护，但在呼吸重症患者的监控图像中，表示患者实际状况的图像区域更具重要性，因此在对当前图像帧进行编码时，重要程度高的像素点优选度应越高，编码长度应该更短，以降低网络波动数据丢包发生时重要程度高的像素点的丢失概率。由于重要程度高的像素点为图像中出现变化的像素点，通常反映为呼吸重症患者身体移动、光照变化或医疗器械等其他变化部分，而这些部分通常也是监控的重点。因此需要首先将产生变化的像素点筛选出来，根据当前图像帧与每个历史图像帧之间像素点的变化情况，确定当前图像帧中的变化像素点。优选地，将当前图像帧与每个历史图像帧采用帧差法，获得当前图像帧与每个历史图像帧之间的变化点。帧差法能够根据像素点在两个图像帧之间的像素点灰度差异情况，将发生移动的像素点筛选出来，需要说明的是，帧差法为本领域技术人员熟知的技术手段，在此不做赘述。由于当前图像帧与每个历史图像帧均能筛选出具有运动特征的变化点，因此将当前图像帧中对应的所有变化点作为变化像素点，对预设时间段上当前图像帧中所有发生过变化的像素点统一进行分析。至此，在过去一段时间内，将对于当前图像帧发生变化的像素点筛选出来，这些变化像素点表征的变化区域更重要，其对应灰度级需要增加对应的优先程度进行编码，以保证传输效率的同时提高传输安全性。但不同的变化区域其重要性是不同的，对于患者发生变动的区域，需要给予更高的优先度以降低其传输的丢失性。S2：根据当前图像帧中变化像素点的位置分布情况，以及每个变化像素点与其他变化像素点之间的分布差异情况，获得每个变化像素点的局部估计范围；在每个变化像素点的局部估计范围内，根据其他变化像素点的位置分布密度以及灰度分布的整体偏差情况，获得每个变化像素点的第一优选参数。变化区域通常是变化像素点聚集分布行程的，由于发生变化的区域较多，不同的变化区域对应的特征不同，因此每个变化像素点需要根据局部范围的整体特征进行分析，以保证对不同变化区域特征进行准确筛选。故首先根据当前图像帧中变化像素点的整体分布情况，得到每个变化像素点的最优局部分析，也即根据当前图像帧中变化像素点的位置分布情况，以及每个变化像素点与其他变化像素点之间的分布差异情况，获得每个变化像素点的局部估计范围。优选地，计算当前图像帧中所有变化像素点的坐标方差，进行负相关映射并归一化处理，获得当前图像帧的变化分布混乱值；首先计算所有变化像素点的分布位置的离散情况，当变化像素点的坐标在当前图像帧中分布的越混乱，也即坐标方差越大，说明当前图像帧中存在多个变化区域，对每个变化像素点局部进行分析时，需要更小的范围进行分析。在本发明实施例中，可以对每个变化像素点的横纵坐标分别计算均值，获得所有变化像素点的平均坐标点，再计算每个变化像素点与平均坐标点之间的距离，将距离的方差作为坐标方差。需要说明的是，像素点的坐标获取、像素点之间距离的计算以及方差计算均为本领域技术人员熟知的技术手段，如建立坐标系得到每个像素点的坐标和通过欧氏距离计算像素点之间的距离等，在此不做赘述。进一步地，对于任意一个变化像素点，计算该变化像素点与每个其他变化像素点之间的距离，获得该变化像素点的分布差异，将该变化像素点的所有分布差异按照从小到大的顺序排列，获得该变化像素点的分布差异序列。通过分布差异序列反映出该变化像素点与每个其他变化像素点之间的分布位置远近程度。通过分布差异序列中分布差异的大小，可以近似看出变化点像素点的聚集分布情况，聚集部分或聚集范围也即为变化像素点所在的变化区域部分。虽然根据分布差异序列可以将该变化像素点相近的点范围筛选出来，也即为计算分布差异之间的差异程度，当差异程度较大时，说明在此分布情况下聚集程度发生突变，可以停止得到该变化像素点的局部范围，但是由于较远的分布差异之间的差异程度会影响该变化像素点的局部判断，因此通过序号对分布差异进行权重调整。举例说明，当一个变化像素点的分布差异序列为{1,1,2,2,3,10,11,11,12,21,22,22}时，可以近似看出在当前变化像素点分布差异下，变化像素点的聚集情况可以近似分为三类，{1,1,2,2,3}{10,11,11,12}和{21,22,22}，其中发生突变的3到10，可以反映出该变化像素点最优范围应该为3，但是由于12到21之间更大的差异影响将导致局部范围的判断产生影响，因此加上序号的分配权重，使局部范围的选取更可信。因此进一步地，将该变化像素点的分布差异序列中每个分布差异的序号进行负相关映射并归一化处理，获得每个分布差异的调节系数，当序号越小，说明对其分布差异分析时更能反映出局部的距离变化。将分布差异序列中每个分布差异与对应的调节系数相乘，获得该变化像素点的距离序列，通过距离序列反映该变化像素点与其他变化像素点之间的局部分布距离变化情况。进一步地，计算距离序列中每相邻两个元素值的差异，作为距离差异值，距离差异值即为该变化像素点所在聚集范围与其他最近的聚集部分的差异。在距离差异值最大时对应的两个元素值中，将最小的元素值对应的分布差异作为该变化像素点的距离分布指标。最小的元素值即为发生分布距离突变时，该变化像素点与所在聚集范围之间对应的调整后的距离值，由于每个元素值均为分布差异值与调节系数计算得到的，因此每个元素值均对应一个分布差异，将表征距离的分布差异作为该变化像素点的距离分布指标。最终，计算当前图像帧中所有变化像素点的距离分布指标的平均值，获得每个变化像素点的距离阈值，综合整体变化像素点对应所在聚集范围的距离情况，得到整体的距离阈值。将每个变化像素点的距离阈值与变化分布混乱值的乘积，作为每个变化像素点的局部范围值，结合位置分布的混乱程度进行调整，得到每个变化像素点整体分析时的最优范围大小。在本发明实施例中，局部范围值的表达式为：式中，表示为第/＞个变化像素点的局部范围值，/＞表示为当前图像帧/＞中所有变化像素点的坐标方差，/＞表示为当前图像帧中变化像素点的总数量，/＞表示为第/＞个变化像素点的距离分布指标，/＞表示为以自然常数为底的指数函数。其中，表示为当前图像帧/＞的变化分布混乱值，/＞表示为当前图像帧中每个变化像素点的距离阈值。当变化分布混乱值越大，说明变化像素点分布越一致，局部分析的范围可以越大，也即局部范围值越大，当每个变化像素点的距离阈值越大，说明整体变化像素点与所在聚集范围的边界距离越大，也即对每个变化像素点分析时的局部范围可以越大，局部范围值越大。因此以每个变化像素点为中心，以局部范围值为半径，获得每个变化像素点对应的圆形范围作为每个变化像素点的局部估计范围。在本发明其他实施例中，也可将以变化像素点为中心，局部范围值为大小的正方形范围作为每个变化像素点的局部估计范围，在此不做限制。在得到局部估计范围后，可进行局部变化像素点的密度分布以及灰度值分布进行变化区域的判断，由于对于每个变化像素点而言，当其在聚集部分的边缘和中心时的局部范围是具有差异的，故需要在计算时考虑到范围内最优的变化像素点的分布范围，通过更能代表该变化分布点所在变化区域的聚集情况的范围进行分析。因此在每个变化像素点的局部估计范围内，根据其他变化像素点的位置分布密度以及灰度分布的整体偏差情况，获得每个变化像素点的第一优选参数。优选地，对于任意一个变化像素点，将在该变化像素点的局部估计范围内的其他变化像素点作为该变化像素点的局部点，统计每个局部点的局部估计范围内变化像素点的数量，作为每个局部点的局部数量，通过局部数量可以反映在该变化像素点的局部范围内，每个变化像素点的局部密度情况。将局部数量最大时对应的局部点作为该变化像素点的聚集点，聚集点即为最能表征该变化像素点所在变化区域的变化像素点，因此可根据聚集点的分布特征反映该变化像素点的局部特征，同时由于局部数量最大的情况可能不止一个，因此聚集点可能对应一个及以上。进一步地，根据当前图像帧中灰度级对应的像素点的分布情况，获得当前图像帧的高灰度级均值，由于除了患者本身呼吸产生的身体变外化，病房或走廊等造成的光线变化同样可能会在图像中造成较大的变化区域，因此在本发明实施例中，将当前图像帧中所有像素点按照灰度级从大到小的顺序排列，获得灰度分布序列，计算灰度分布序列中前预设数量个像素点的灰度级的平均值，获得当前图像帧的高灰度级均值，通过高灰度级均值可以反映当前图像帧中灯光亮度产生的灰度级大小。预设数量设置为当前图像帧中像素点总数量的0.1%，具体数值实施者可根据具体实施情况进行调整。进一步地，在每个聚集点的局部估计范围内，计算每个变化像素点的灰度值与高灰度级均值之间的差异，获得每个变化像素点的灰度差异，当灰度差异越小，说明该变化像素点的灰度值与灯光部分灰度值越接近。计算每个聚集点的局部估计范围内所有变化像素点的灰度差异的平均值并进行归一化处理，获得每个聚集点的局部灰度分布指标，局部灰度分布指标反映聚集点所处变化区域的灰度值与灯光部分灰度值的整体差异程度，当局部灰度分布指标越小，说明聚集点对应局部范围内像素点越可能为灯光变化区域，其重要程度较低。一般情况下患者自身移动是导致不同图像帧出现变化的主要原因，对于呼吸重症患而言，其连接了各类辅助呼吸或监测医疗器械，呼吸过程导致的图像产生变化的部分除了自身胸腔的变化外，还涉及医疗器械连接部分的移动，因此在预设时间段内，图像变化较大的部分主要为患者呼吸导致身体变化和连接的医疗器械移动的部分，因此进一步地，将每个聚集点的局部灰度分布指标与局部数量的乘积进行归一化处理，获得每个聚集点的优选值，结合局部数量，当局部数量越大，说明对应变化区域中变化主体部分越大，越可能为重要的患者自身变化分布。将所有聚集点的优选值的平均值作为该变化像素点的第一优选参数，从分布的聚集程度以及灰度分布的整体偏差程度进行分析，在变化区域的位置灰度分布特征上得到第一优选参数，在本发明实施例中，第一优选参数的表达式为：式中，表示为第/＞个变化像素点的第一优选参数，/＞表示为第/＞个变化像素点的聚集点的总数量，/＞表示为第/＞个聚集点的局部数量，/＞表示为第/＞个聚集点的局部估计范围内第/＞个变化像素点的灰度值，/＞表示为当前图像帧/＞的高灰度级均值，/＞表示为双曲正切函数，/＞表示为绝对值提取函数，/＞表示为归一化函数，需要说明的是，归一化为本领域技术人员熟知的技术手段，归一化函数的选择可以为线性归一化或标准归一化等，具体的归一化方法在此不做限定。其中，表示为第/＞个聚集点的局部估计范围内第/＞个变化像素点的灰度差异，/＞表示为第/＞个聚集点的局部灰度分布指标，表示为第/＞个聚集点的优选值。当局部灰度分布指标越大，说明变化像素点所在变化区域越不可能为灯光变化区域，当聚集点的局部数量越大，说明变化区域的主体部分越大，越可能为患者发生变化区域，因此其变化像素点的重要程度越大，故第一优选参数越大。S3：在每个变化像素点的局部估计范围内，根据对应变化像素点与其他变化像素点在相邻历史图像帧之间的变化差异情况，获得每个变化像素点的移动指标；根据每个变化像素点在所有历史图像帧中的变化数量和移动指标，获得每个变化像素点的第二优选参数。同时，考虑到呼吸重症患者在监护病房需要保证休息，无法做出速度变化较快的动作，因此图像中由患者活动产生的如呼吸或翻身等行为导致的变化，其变化是持续的且变化移动程度较小的，而其他区域的变化相较于患者活动相比，变化较短且变化程度较高。因此进一步分析变化情况，首先分析变化移动特征，即在每个变化像素点的局部估计范围内，根据对应变化像素点与其他变化像素点在相邻历史图像帧之间的变化差异情况，获得每个变化像素点的移动指标。优选地，在时序顺序上对每个历史图像帧与前一个历史图像帧进行帧差法计算后，获得每个历史图像帧中的差异点，将变化像素点分为不同时间上产生的差异点进行时序上的变化分析。需要说明的是，对于没有前一历史图像帧的图像帧，也即第一个历史图像帧，不能分析其中像素点发生变化的情况，因此不计算其差异点即可。进一步地，依次将每个变化像素点作为参考点，对每个变化像素点均进行相同的分析。当历史图像帧中的差异点的位置与参考点存在相同时，将对应历史图像帧作为参考点的参考帧，由于变化像素点即为产生变化的像素点，因此每个变化像素点一定存在位置相同的差异点，当变化像素点的位置在相邻历史图像帧中发生变化时，将对应的历史图像帧作为参考点的参考帧进行分析。由于参考帧为参考点发生变化的图像帧，因此计算每个参考帧在参考点的局部估计范围内的差异点与参考点之间的距离的平均值，获得参考点在每个参考帧下的移动变化值，基于变化区域通常为整体变化形式，通过参考点与此时每个发生了变化的差异点计算距离，可以反映整体发生变化的距离，此距离越小，说明此时刻的整体移动距离越接近患者变化的区域。在本发明其他实施例中，也可采用光流法计算参考帧与前一历史图像帧之间在参考点的局部估计范围内的像素点变化的平均距离，作为参考点在参考帧下的移动变化值，通过相邻帧的整体变化距离也能反映参考点变化区域的整体变化形式，其中光流法为本领域技术人员熟知的技术手段，在此不做赘述。由于参考点可能在多个历史图像帧中均发生变化，因此计算参考点在对应所有参考帧下的移动变化值的平均值，进行负相关映射并归一化处理，获得参考点的移动指标，在本发明实施例中，移动指标的表达式为：式中，表示为第/＞个变化像素点的移动指标，/＞表示为第/＞个变化像素点的参考帧的总数量，/＞表示为第/＞个参考帧在第/＞个变化像素点的局部估计范围内的差异点的总数量，/＞表示为第/＞个参考帧在第/＞个变化像素点的局部估计范围内第/＞个差异点与第/＞个变化像素点之间的距离，/＞表示为以自然常数为底的指数函数。其中，表示为第/＞个变化像素点在第/＞个参考帧下的移动变化值，当移动变化值越小，说明该变化像素点的局部变化移动情况越接近患者变化区域，因此移动指标越大。由于呼吸重症患者的呼吸频率是较高的，因此对于患者产生变化区域而言，其变化的持续性是较长的，也即不断的发生变化中。进一步结合变化像素点在所有历史图像帧中发生变化的变化数量，也即结合变化像素点出发生变化的连续性，进一步得到第二优选参数，也即为根据每个变化像素点在所有历史图像帧中的变化数量和移动指标，获得每个变化像素点的第二优选参数。优选地，对于任意一个变化像素点，统计当前图像帧与每个历史图像帧之间的变化点的位置与该变化像素点相同的次数，获得该变化像素点的变化数量，在步骤S1中，得到了当前图像帧与每个历史图像帧之间发生变化的变化点，在变化像素点的位置处，当变化点出现的数量越多时，说明该变化像素点一直在变化中，因此通过统计每个图像帧之间得到的变化点位置与变化像素点相同的次数，说明该变化像素点的变化次数。举例而言，当变化像素点对应位置处在历史图像帧至当前图像帧过程中，灰度值的变化为时,15为变化像素点在当前图像帧中的灰度值，每个历史图像帧均能在该变化像素点处对应出一个变化点，则变化数量为4，变化持续时间是较长的。当变化像素点对应位置处灰度值的变化为时，最后的11为变化像素点在当前图像帧中的灰度值，则此时仅在第一个历史图像帧处对应出现一个变化点，则变化数量为1，变化持续时间较短。进一步地将该变化像素点的变化数量与移动指标的乘积进行归一化处理，获得该变化像素点的第二优选参数，从变化程度进行分析，在变化区域的变化移动特征上得到第二优选参数。在本发明实施例中，第二优选参数的表达式为：式中，表示为第/＞个变化像素点的第二优选参数，/＞表示为第/＞个变化像素点的移动指标，/＞表示为第/＞个变化像素点的变化数量，/＞表示为归一化函数。当变化像素点对应的变化连续程度越高，变化移动程度越接近患者变化区域的移动特征时，该变化像素点第二优选参数越大，其对应的灰度级需要越高的优先程度。S4：根据灰度级对应所有变化像素点的第一优选参数和第二优选参数，以及灰度级分布概率，获得每个灰度级的优先级参数；根据当前图像帧中每个灰度级的优先级参数和灰度级分布概率，获得当前图像帧的图像编码进行传输监控。结合每个灰度级下每个变化像素点的分布特征以及变化特征，也即第一优选参数和第二优选参数，再加上灰度级分布频率，得到每个灰度级的优先级参数，也即对可能为患者发生变化区域的像素点的灰度级给予更高的编码重视程度。优选地，将每个变化像素点的第一优选参数和第二优选参数的和值，作为每个变化像素点的总优选参数，将每个灰度级对应的所有变化像素点的总优选参数的平均值，作为每个灰度级的优选指标，综合第一优选参数和第二优选参数，得到每个变化像素点的优选程度，也即变化像素点的重要程度，每个灰度级下对应所有变化像素点的整体重要程度，表征每个灰度级受到像素点重要程度的影响得到的优选程度。需要说明的是，当该灰度级没有对应变化像素点时，计算得到的优选指标为零。将当前图像帧中每个灰度级的出现概率作为每个灰度级的灰度级分布概率，灰度级分布概率为基于灰度级的分布数量反映每个灰度级的重要程度，对于分布数量较多的灰度级也需要给予一定的重要比重。进一步地，将每个灰度级的优选指标和灰度级分布概率的乘积，作为每个灰度级的优先级参数，在本发明实施例中，优先级参数的表达式为：式中，表示为第/＞个灰度级的优先级参数，/＞表示为第/＞个灰度级下对应变化像素点的总数量，/＞表示为第/＞个灰度级下第/＞个变化像素点的第一优选参数，/＞表示为第/＞个灰度级下第/＞个变化像素点的第二优选参数，/＞表示为第/＞个灰度级的灰度级分布概率。其中，表示为第/＞个灰度级下第/＞个变化像素点的总优选参数，表示为第/＞个灰度级的优选指标。当灰度级对应的优选指标越大，灰度级分布频率越高，说明该灰度级重要程度越大，对应分布像素点数量越所，该灰度级在编码时需要的优先级越高。因此根据当前图像帧中每个灰度级的优先级参数和灰度级分布概率，获得当前图像帧的图像编码进行传输监控，优选地，结合每个灰度级的优先级参数和灰度级分布概率，获取当前图像帧中灰度级的霍夫曼树，其中，霍夫曼树的左子树为每个非零优先级参数对应的灰度级根据优先级参数构建，霍夫曼树的右子树为每个优先级参数为零的灰度级根据灰度级分布概率构建。在本发明实施例中，对于每个具有非零优先级参数的灰度级，按照优先级参数从大到小的顺序排列，得到优先级序列，根据优先级序列构建霍夫曼树的左子树，优先级参数大的灰度级优先作为左子树的叶子节点，然后根据优选级参数的排序完成霍夫曼树左子树的构建。对于每个优先级参数为零的灰度级，将灰度级分布概率从大到小排序，得到灰度级分布序列，根据灰度分布序列构建霍夫曼树的右子树，灰度级分布概率大的优选作为右子树的叶子节点，然后根据灰度级分布概率的排序完成霍夫曼树右子树的构建。将左子树和右子树连接起来，得到当前图像帧中灰度级的霍夫曼树。需要说明的是，霍夫曼树中权值的设置具体构建等为本领域技术人员熟知的技术手段，在此不做进一步赘述。根据当前图像帧中灰度级的霍夫曼树对当前图像帧进行霍夫曼编码，获得当前图像帧的图像编码以及每个灰度级的灰度级编码，在本发明实施例中，霍夫曼变化是基于构建的霍夫曼树进行的，也即通过当前图像帧中灰度级的霍夫曼树能够得到每个灰度级的灰度级编码，再根据当前图像帧中每个像素点对应的灰度级分布得到图像编码。最终，将图像编码以及所有灰度级编码进行传输，通过调整霍夫曼编码中灰度级的编码权重，降低了重要灰度级的丢失概率，提升传输可靠性。传输后通过灰度级编码可对图像编码进行解码，获得呼吸重症患者监控视频中的当前图像帧，方便对患者实时情况进行监控。综上，本发明考虑到连续监控中患者发生变化区域对当前图像帧的重要程度，依据当前图像帧与历史图像帧之间像素点的变化情况，得到变化像素点，从变化区域中的像素点特征分析灰度级编码的优先程度。从变化像素点的局部分布密度和灰度的整体偏差，得到每个变化像素点的第一优选参数，从位置和灰度特征上对更可能为患者变化区域的像素点给予更高的优先级。从变化像素点在相邻历史图像帧之间的变化移动情况，以及每个变化像素点在所有历史图像帧中的变化程度，得到每个变化像素点的第二优选参数，从变化像素点位置处的变化移动情况为更可能为患者变化区域的变化像素点给予更高的优先程度。结合每个灰度级下每个变化像素点的分布特征以及变化特征，也即第一优选参数和第二优选参数，再加上灰度级分布频率，得到每个灰度级的优先级参数，也即对患者发生变化区域的像素点的灰度级给予更高的编码重视程度，最终基于灰度级的优先级参数和灰度级分布概率实现编码传输。本发明通过分析当前图像帧相与历史图像帧中变化的像素点的特征，对可能为患者发生变化区域的像素点的灰度级给予更高的编码等级，降低了重要部分编码的丢失率，提高传输可靠性，使传输后的监控图像中重要部分得以保留，能够对重症患者进行有效的监控管理。本发明提供了一种呼吸重症患者远程监控系统，包括存储器和处理器，处理器执行存储器存储的计算程序，以实现如上述一种呼吸重症患者远程监控方法。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。
