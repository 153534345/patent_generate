标题title
一种多旋翼无人机动态误差补偿及降噪方法
摘要abst
本发明公开了一种多旋翼无人机动态误差补偿及降噪方法，将平台磁场与无人机航磁系统的制作工艺误差结合起来使用16个综合误差补偿系数进行误差补偿。并且利用主成分分析对实际的磁场数据进行处理。由于16个综合误差补偿系数组成的矩阵C较难出现病态矩阵，所以可以使用最小二乘法对矩阵C进行求解。本发明的有益效果是使用16个综合误差补偿系数进行补偿，能够有效提升误差补偿的精度；使用了三轴分量与磁场总量，对于采集到的磁场数据有较高的利用率；使用主成分分析对实测数据进行聚类处理，消除噪音，提高数据的精度，能够获得较好的补偿结果。
权利要求书clms
1.一种多旋翼无人机动态误差补偿及降噪方法，其特征在于，步骤1：根据多旋翼无人机系统测量得到三轴磁分量计算理论总量Bt；步骤2：根据步骤1所述三轴磁分量与理论总量的比值计算三轴夹角的余弦值得到三轴夹角，进而组成矩阵T;步骤3：根据步骤1所述理论总量求平均值；步骤4：根据步骤1得到的理论总量Bt和步骤3得到的平均值的差得到ΔB；步骤5：使用最小二乘法通过ΔB和矩阵T计算矩阵C,并将矩阵C分组；步骤6:将步骤5得到的每一组的矩阵C组成一个新的矩阵Cal，对其使用主成分分析，做出得分图，对所有的样本点进行聚类；步骤7:去除得分图上阈值范围外的点，获得删除噪音的数据；步骤8：对删除噪音的数据重复步骤1-4，使用最小二乘法再次计算矩阵C，矩阵C与矩阵T的乘积得到ΔH，将ΔH与步骤1进行滤波处理后，再根据步骤7删除部分数据组成的H进行求和计算出补偿后的数据。2.根据权利要求1所述一种多旋翼无人机动态误差补偿及降噪方法，其特征在于，所述理论总量，其中——磁场总量，/＞——磁场在x轴上分量，/＞——磁场在y轴上分量，/＞——磁场在z轴上分量。3.根据权利要求1所述一种多旋翼无人机动态误差补偿及降噪方法，其特征在于，在进行所述步骤1之前还需要进行的步骤是处理原始多旋翼无人机航磁数据。4.根据权利要求1所述一种多旋翼无人机动态误差补偿及降噪方法，其特征在于，所述步骤5中矩阵C中含有16个补偿系数。5.根据权利要求3所述一种多旋翼无人机动态误差补偿及降噪方法，其特征在于，所述16个补偿系数的来源是根据Tolles-Lawson模型对平台磁场进行模拟，将平台磁场分解为三个干扰场，所述干扰场如下：固定干扰场:/＞;其中——固定干扰场，——固定干扰场的x方向上的分量，——固定干扰场的y方向上的分量，——固定干扰场的z方向上的分量，感应干扰场：，其中——感应干扰场，——感应系数，Bg——地磁场，a11、a12、a13、a21、a22、a23、a31、a32、a33——感应系数矩阵中的元素，——地磁场在x方向上的分量，——地磁场在y方向上的分量，——地磁场在z方向上的分量，涡流干扰场：，其中——涡流干扰场，b——涡流感应系数，B'g——地磁场变化率，b11、b12、b13、b21、b22、b23、b31、b32、b33——涡流感应系数矩阵中的元素，——地磁场变化率在x方向上的分量，——地磁场变化率在y方向上的分量，——地磁场变化率在z方向上的分量。6.根据权利要求1所述一种多旋翼无人机动态误差补偿及降噪方法，其特征在于，所述步骤6中新的矩阵Cal为：，其中Cal——计算矩阵，、/＞——综合误差补偿系数/＞与/＞，——地磁场，——第n组数据的综合误差补偿系数/＞与地磁场的乘积，——第n组的综合误差补偿系数/＞，x11、x1m、xn1、xnm——所构建的新的矩阵的元素，每一行为每一组的矩阵C，一共分为n组数据，m=16。7.根据权利要求6所述一种多旋翼无人机动态误差补偿及降噪方法，其特征在于，对矩阵Cal进行主成分分析的具体步骤如下：对矩阵Cal进行标准化处理，按照列计算均值：，其中——矩阵每一列平均值，/＞——矩阵Cal中的元素，n为组数，i为行数，j为列数；标准差：，——标准差，——矩阵每一列平均值，——矩阵Cal中的元素，标准化数据：，——标准化后的数据，——标准差，——矩阵每一列平均值，——矩阵Cal中的元素，让原始的样本矩阵经过标准化变为：，X11、X1m、Xn1、Xnm——标准化后的矩阵的元素，——标准化后的矩阵的列向量，计算标准化样本的协方差矩阵R:，,R——协方差矩阵，r11、r1m、rn1、rnm——协方差矩阵中的元素，——标准化后的矩阵的元素，r为协方差矩阵的元素，i为行数，j为列数，计算R的特征值λ和特征向量A：，，λ——协方差矩阵R的特征值，A——协方差矩阵R的特征向量，计算主成分贡献率和累积贡献率：贡献率，累积贡献率，、/＞——协方差矩阵R的特征向量，写出主成分，主成分公式如下：，——主成分，其中每个主成分的表达式为：，其中——协方差矩阵R的特征向量。
说明书desc
技术领域本发明涉及航磁以及机器学习技术领域，具体涉及一种多旋翼无人机动态误差补偿及降噪方法。背景技术多旋翼无人机航磁系统在使用的时候，由于测量到的磁场是由于平台磁场、环境磁场、大地磁场等形成的复合磁场，这会对所采集到的磁场数据造成一定的影响。并且无人机航磁系统本身存在一定的制造工艺问题会对采集到的航磁数据有一定的误差影响。关于复合磁场造成的影响，可以通过滤波等手段消除除了平台磁场以外的其余磁场的影响。但是关于平台磁场造成的影响只能够通过误差补偿的方式进行修正，同时在补偿平台磁场造成的误差时，可以加上无人机的制造工艺而产生的误差。2014年，郑文超等在智能计算机与应用期刊中提出利用16个补偿系数对平台磁场进行误差补偿。根据Tolles-Lawson模型模拟出平台磁场，将其分解为三种磁场的干扰。为了防止病态矩阵，使用岭回归方法计算16个补偿系数。但是存在的问题没有考虑到无人机航磁系统的工艺制作问题导致的航磁数据误差，岭回归的R^2通常低于最小二乘法，拟合效果没有最小二乘法好。2020年，乔中坤等在地球物理学报期刊中，提出了利用16个综合误差补偿系数综合包含了平台误差与多旋翼无人机航磁系统的制作工艺误差进行综合补偿。由于平台磁场的干扰是一种线性关系，并且针对多旋翼无人机的制作工艺误差也是一种线性关系，所以可以建立联合补偿模型，对航磁数据进行综合误差补偿。但是使用该模型进行误差补偿后，存在一定的精度问题，并且使用该模型对航磁数据进行综合误差补偿后，在航磁异常图上依旧会显现出较多的噪声的影响。发明内容针对上述问题，本发明提供一种多旋翼无人机动态误差补偿及降噪方法。本发明采用下述的技术方案：一种多旋翼无人机动态误差补偿及降噪方法，包括如下步骤：1.一种多旋翼无人机动态误差补偿及降噪方法，其特征在于，步骤1：根据多旋翼无人机系统测量得到三轴磁分量计算理论总量Bt；步骤2：根据步骤1所述三轴磁分量与理论总量的比值计算三轴夹角的余弦值得到三轴夹角，进而组成矩阵T;步骤3：根据步骤1所述理论总量求平均值；步骤4：根据步骤1得到的理论总量Bt和步骤3得到的平均值的差得到ΔB；步骤5：使用最小二乘法通过ΔB和矩阵T计算矩阵C,并将矩阵C分组；步骤6:将步骤5得到的每一组的矩阵C组成一个新的矩阵Cal，对其使用主成分分析，做出得分图，对所有的样本点进行聚类；步骤7:去除得分图上阈值范围外的点，获得删除噪音的数据；步骤8：对删除噪音的数据重复步骤1-4，使用最小二乘法再次计算矩阵C，矩阵C与矩阵T的乘积得到ΔH，将ΔH与步骤1进行滤波处理后，再根据步骤7删除部分数据组成的H进行求和计算出补偿后的数据。进一步的，所述理论总量，其中——磁场总量，/＞——磁场在x轴上分量，/＞——磁场在y轴上分量，/＞——磁场在z轴上分量。进一步的，在进行所述步骤1之前还需要进行的步骤是处理原始多旋翼无人机航磁数据。进一步的，所述步骤5中矩阵C中含有16个补偿系数。进一步的，所述16个补偿系数的来源是根据Tolles-Lawson模型对平台磁场进行模拟，将平台磁场分解为三个干扰场，所述干扰场如下：固定干扰场:/＞;其中——固定干扰场，——固定干扰场的x方向上的分量，——固定干扰场的y方向上的分量，——固定干扰场的z方向上的分量，感应干扰场：，其中——感应干扰场，——感应系数，Bg——地磁场，a11、a12、a13、a21、a22、a23、a31、a32、a33——感应系数矩阵中的元素，——地磁场在x方向上的分量，——地磁场在y方向上的分量，——地磁场在z方向上的分量，涡流干扰场：，其中——涡流干扰场，b——涡流感应系数，B'g——地磁场变化率，b11、b12、b13、b21、b22、b23、b31、b32、b33——涡流感应系数矩阵中的元素，——地磁场变化率在x方向上的分量，——地磁场变化率在y方向上的分量，——地磁场变化率在z方向上的分量。进一步的，所述步骤6中新的矩阵Cal为：，其中Cal——计算矩阵，、/＞——综合误差补偿系数/＞与/＞，——地磁场，——第n组数据的综合误差补偿系数/＞与地磁场的乘积，——第n组的综合误差补偿系数/＞，x11、x1m、xn1、xnm——所构建的新的矩阵的元素，每一行为每一组的矩阵C，一共分为n组数据，m=16。进一步的，对矩阵Cal进行主成分分析的具体步骤如下：对矩阵Cal进行标准化处理，按照列计算均值：，其中——矩阵每一列平均值，/＞——矩阵Cal中的元素，n为组数，i为行数，j为列数；标准差：，——标准差，——矩阵每一列平均值，——矩阵Cal中的元素，标准化数据：，——标准化后的数据，——标准差，——矩阵每一列平均值，——矩阵Cal中的元素，让原始的样本矩阵经过标准化变为：，X11、X1m、Xn1、Xnm——标准化后的矩阵的元素，——标准化后的矩阵的列向量，计算标准化样本的协方差矩阵R:，,R——协方差矩阵，r11、r1m、rn1、rnm——协方差矩阵中的元素，——标准化后的矩阵的元素，r为协方差矩阵的元素，i为行数，j为列数，计算R的特征值λ和特征向量A：，，λ——协方差矩阵R的特征值，A——协方差矩阵R的特征向量，计算主成分贡献率和累积贡献率：贡献率，累积贡献率，、/＞——协方差矩阵R的特征向量，写出主成分，主成分公式如下：，——主成分，其中每个主成分的表达式为：，其中——协方差矩阵R的特征向量。本发明的有益效果是：1、使用综合误差补偿，处理了难以使用滤波分离的平台磁场，同时能够补偿由于多旋翼无人机航磁系统的制作工艺导致的误差。2、同时使用了三轴分量与磁场总量，对于采集到的磁场数据有较高的利用率。3、使用主成分分析对实测数据进行了聚类处理，消除了噪音，提高了数据的精度，能够获得较好的补偿结果。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例的附图作简单地介绍，显而易见地，下面描述中的附图仅仅涉及本发明的一些实施例，而非对本发明的限制。图1为本发明综合误差补偿流程示意图；图2为本发明Tolles-Lawson模型示意图；具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例的附图，对本发明实施例的技术方案进行清楚、完整地描述。显然，所描述的实施例是本发明的一部分实施例，而不是全部的实施例。基于所描述的本发明的实施例，本领域普通技术人员在无需创造性劳动的前提下所获得的所有其他实施例，都属于本发明保护的范围。下面结合附图和实施例对本发明进一步说明。如图1所示，一种多旋翼无人机动态误差补偿及降噪方法，包括以下步骤：步骤1：根据多旋翼无人机系统测量得到三轴磁分量计算理论总量Bt。在进行所述步骤1之前还需要进行的步骤是处理原始多旋翼无人机航磁数据。其中理论总量，——磁场总量，——磁场在x轴上分量，——磁场在y轴上分量，——磁场在z轴上分量。步骤2：根据步骤1所述三轴磁分量与理论总量的比值计算三轴夹角的余弦值，进而得到三轴夹角，进而组成矩阵T。步骤3：根据步骤1所述理论总量求平均值。步骤4：根据步骤1得到的理论总量和步骤3得到的平均值的差得到ΔB。步骤5：使用最小二乘法通过ΔB和三轴夹角矩阵T计算矩阵C。所述步骤5中矩阵C中含有16个补偿系数。所述16个补偿系数的来源是根据Tolles-Lawson模型对平台磁场进行模拟，将平台磁场分解为三个干扰场，所述干扰场如下：固定干扰场:由于多旋翼无人机内部的硬磁材料被磁化而产生的干扰磁场，其形成后在较长时间内不会改变，可以看作定值。;其中——固定干扰场，——固定干扰场的x方向上的分量，——固定干扰场的y方向上的分量，——固定干扰场的z方向上的分量，感应干扰场：由于多旋翼无人机在飞行过程中的软磁材料产生的电磁感应形成的误差干扰场。，其中——感应干扰场，——感应系数，Bg——地磁场，a11、a12、a13、a21、a22、a23、a31、a32、a33——感应系数矩阵中的元素，——地磁场在x方向上的分量，——地磁场在y方向上的分量，——地磁场在z方向上的分量，涡流干扰场：由于多旋翼无人机在飞行过程中的闭合回路，如多旋翼无人机电机的线圈等，切割磁感线而形成的干扰场。,其中——涡流干扰场，b——涡流感应系数，B'g——地磁场变化率b11、b12、b13、b21、b22、b23、b31、b32、b33——涡流感应系数矩阵中的元素——涡流感应系数矩阵中的元素，——地磁场变化率在x方向上的分量，——地磁场变化率在y方向上的分量，——地磁场变化率在z方向上的分量，考虑到多旋翼无人机航磁系统的制作工艺的不足，如刻度因子不一致、三轴不严格正交、零偏误差等，因此建立综合误差补偿模型。,,,其中——实际测量值，——理论值，C——刻度因子误差以及三轴非正交误差综合补偿系数，BZ——零偏误差，Bg——地磁场，——固定干扰场，——感应干扰场，——涡流干扰场，——实测值在x轴上的分量，——实测值在y轴上的分量，——实测值在z轴上的分量，——理论值在x轴上的分量，——理论值在y轴上的分量，——理论值在z轴上的分量，c11、c12、c13、c21、c22、c23、c31、c32、c33——刻度因子误差以及三轴非正交误差综合补偿系数矩阵中的元素，——零偏误差在x轴上的分量，——零偏误差在y轴上的分量，——零偏误差在z轴上的分量。航磁测量的误差值可以通过表示：，，，，其中——误差值，——实际测量值，Bg——地磁场，——刻度因子误差以及三轴非正交误差综合补偿系数，BZ——零偏误差，——固定干扰场，——感应干扰场，——涡流干扰场，——感应系数，——涡流感应系数，——单位矩阵，、/＞、/＞——综合误差补偿系数，整理后，分解到三轴上：，其中——误差值分解在x轴方向上的分量，——误差值分解在y轴方向上的分量，——误差值分解在z轴方向上的分量，A11、A12、A13、A21、A22、A23、A31、A32、A33——综合误差补偿系数A的张量中的具体元素，——地磁场在x方向上的分量，——地磁场在y方向上的分量，——地磁场在z方向上的分量，B11、B12、B13、B21、B22、B23、B31、B32、B33——综合误差补偿系数B的张量中的具体元素，——地磁场变化率在x方向上的分量，——地磁场变化率在y方向上的分量，——地磁场变化率在z方向上的分量，——综合误差补偿系数/＞在x方向上的分量，——综合误差补偿系数/＞在y方向上的分量，——综合误差补偿系数/＞在z方向上的分量。其中， Tolles-Lawson模型假定一处的地磁场是不会变化的，所以地磁场分解到三轴上的变化率体现在角度的变化。即，其中Bg——地磁场，——地磁场在x方向上的分量，——地磁场在y方向上的分量，——地磁场在z方向上的分量，——地磁场变化率在x方向上的分量，——地磁场变化率在y方向上的分量，——地磁场变化率在z方向上的分量，、/＞、/＞——地磁场与x,y,z三轴的夹角。由于误差值与地磁场值很小，所以可以利用误差值与单位向量的乘积来表示误差总量/＞，即其中——误差值，——单位向量，——误差总量，A11、A22、A33、A12、A21、A13、A31、A23、A32——综合误差补偿系数A的张量中的具体元素，B11、B12、B13、B21、B22、B23、B31、B33——综合误差补偿系数B的张量中的具体元素，——综合误差补偿系数/＞在x方向上的分量，——综合误差补偿系数/＞在y方向上的分量，——综合误差补偿系数/＞在z方向上的分量，、/＞、/＞——地磁场与x,y,z三轴的夹角，由于和/＞，可以消除/＞与/＞两项，同时进行简化让/＞、/＞为0、让/＞。可以将/＞进行简化为：，,,其中Bg——地磁场，——误差总量，A11、A12、A13、A22、A23——综合误差补偿系数A的张量中的具体元素，B11、B12、B13、B21、B22、B23、B31、B32——综合误差补偿系数B的张量中的具体元素，——综合误差补偿系数/＞在x方向上的分量，——综合误差补偿系数/＞在y方向上的分量，——综合误差补偿系数/＞在z方向上的分量，、/＞、/＞——地磁场与x,y,z三轴的夹角。步骤6:将步骤5得到的每一组的矩阵C组成一个新的矩阵Cal，对其使用主成分分析，做出得分图，对所有的样本点进行聚类。所述步骤6中新的矩阵Cal为：，其中Cal——计算矩阵，、/＞——综合误差补偿系数/＞与/＞，Bg——地磁场，——第n组数据的综合误差补偿系数/＞与地磁场的乘积，——第n组的综合误差补偿系数/＞，x11、x1m、xn1、xnm——所构建的新的矩阵的元素，每一行为每一组的矩阵C，一共分为n组数据，m=16。对矩阵Cal进行主成分分析的具体步骤如下：对矩阵Cal进行标准化处理，按照列计算均值：,其中——矩阵每一列平均值，——矩阵Cal中的元素，标准差：,其中——标准差，——矩阵每一列平均值，/＞——矩阵Cal中的元素，标准化数据：,其中——标准化后的数据，——标准差，——矩阵每一列平均值，——矩阵Cal中的元素，让原始的样本矩阵经过标准化变为：,其中X11、X1m、Xn1、Xnm——标准化后的矩阵的元素，——标准化后的矩阵的列向量，计算标准化样本的协方差矩阵R:,其中R——协方差矩阵，r11、r1m、rn1、rnm——协方差矩阵中的元素，——标准化后的矩阵的元素，r为协方差矩阵的元素，i为行数，j为列数，计算R的特征值λ和特征向量A：,,其中λ——协方差矩阵R的特征值，A——协方差矩阵R的特征向量，计算主成分贡献率和累积，贡献率要求累积贡献率大于80%：贡献率,累积贡献率,其中、/＞——协方差矩阵R的特征向量，写出主成分，主成分公式如下，其中——主成分，其中每个主成分的表达式为：其中——协方差矩阵R的特征向量。将每一个分组标准化后的数据带入主成分公式中，并且以PC1为横坐标，PC2为纵坐标计算主成分得分，做出得分图，进行聚类，得分图上越相近的样本点的相关性越高，可以作为一个整体。步骤7:去除得分图上阈值范围外的点，获得删除噪音的数据。距离较远的样本点则差距较大，可以作为噪音去除。步骤8：对删除噪音的数据重复步骤1-4，使用最小二乘法再次计算矩阵C，矩阵C与矩阵T的乘积得到ΔH，将ΔH与步骤1进行滤波处理后，再根据步骤7删除部分数据组成的H进行求和计算出补偿后的数据。以上所述，仅是本发明的较佳实施例而已，并非对本发明作任何形式上的限制，虽然本发明已以较佳实施例揭露如上，然而并非用以限定本发明，任何熟悉本专业的技术人员，在不脱离本发明技术方案范围内，当可利用上述揭示的技术内容作出些许更动或修饰为等同变化的等效实施例，但凡是未脱离本发明技术方案的内容，依据本发明的技术实质对以上实施例所做的任何简单修改、等同变化与修饰，均仍属于本发明技术方案的范围内。
