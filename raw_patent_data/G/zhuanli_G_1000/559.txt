标题title
电池SOC预测方法、装置、电池管理设备及存储介质
摘要abst
本申请涉及电池管理技术领域，提供了一种电池SOC预测方法、装置、电池管理设备及存储介质。本申请首先获取电池静态下的电压，根据静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC，作为电池的初始状态或基准状态，当电池处于工作状态时，根据工作状态及初始电池SOC计算得到预测电池SOC，模拟了电池充放电过程中的电压变化，能够更准确地反映电池的实际状态，克服了电池充放电带来的电压大幅度变化，导致的电量估算异常；为了避免预测的电池SOC出现异常，通过对预测电池SOC进行补偿处理，得到的目标电池SOC具有准确性和可靠性。
权利要求书clms
1.一种电池SOC预测方法，其特征在于，获取电池的静态电压；根据所述静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC；侦测到所述电池处于工作状态时，根据所述工作状态及所述初始电池SOC计算得到预测电池SOC；对所述预测电池SOC进行补偿处理，得到目标电池SOC。2.根据权利要求1所述的电池SOC预测方法，其特征在于，所述根据所述静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC包括：确定所述预设的电池开路电压SOC数据表中与所述静态电压匹配的第一开路电压及第二开路电压；获取所述预设的电池开路电压SOC数据表中与所述第一开路电压对应的第一SOC，及与所述第二开路电压对应的第二SOC；根据所述第一开路电压、所述第一SOC、所述第二开路电压及所述第二SOC生成开路电压SOC曲线；根据所述开路电压SOC曲线及所述静态电压，计算得到所述初始电池SOC。3.根据权利要求2所述的电池SOC预测方法，其特征在于，所述侦测到所述电池处于工作状态时，根据所述工作状态及所述初始电池SOC计算得到预测电池SOC包括：侦测到所述电池处于充电状态时，每隔第一计时器结束，获取所述电池的充电速率；根据所述充电速率及所述初始电池SOC，进行增量计算，得到所述预测电池SOC。4.根据权利要求2所述的电池SOC预测方法，其特征在于，所述侦测到所述电池处于工作状态时，根据所述工作状态及所述初始电池SOC计算得到预测电池SOC包括：侦测到所述电池处于放电状态时，每隔第二计时器结束，获取所述电池的放电速率；根据所述放电速率及所述初始电池SOC，进行减量计算，得到所述预测电池SOC。5.根据权利要求3或4所述的电池SOC预测方法，其特征在于，所述对所述预测电池SOC进行补偿处理，得到目标电池SOC包括：判断所述预测电池SOC是否在预设标准范围内；当所述预测电池SOC不在所述预设标准范围内时，根据所述预设标准范围的上限值及下限值对所述预测电池SOC进行补偿处理，得到所述目标电池SOC；当所述预测电池SOC在所述预设标准范围内时，根据默认补偿规则对所述预测电池SOC进行补偿处理，得到所述目标电池SOC。6.根据权利要求5所述的电池SOC预测方法，其特征在于，所述根据所述预设标准范围的上限值及下限值对所述预测电池SOC进行补偿处理，得到所述目标电池SOC包括：判断所述预测电池SOC距离所述预设标准范围的上限值近还是距离所述预设标准范围的下限值近；当确定所述预测电池SOC距离所述上限值近时，根据所述上限值对所述预测电池SOC进行截断处理，得到所述目标电池SOC；当确定所述预测电池SOC距离所述下限值近时，根据所述下限值对所述预测电池SOC进行截断处理，得到所述目标电池SOC。7.根据权利要求6所述的电池SOC预测方法，其特征在于，所述获取电池的静态电压包括：在电池管理系统初始化完成后，获取所述电池的电压，作为所述静态电压。8.一种电池SOC预测装置，其特征在于，所述装置包括：获取模块，用于获取电池的静态电压；计算模块，用于根据所述静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC；预测模块，用于侦测到所述电池处于工作状态时，根据所述工作状态及所述初始电池SOC计算得到预测电池SOC；补偿模块，用于对所述预测电池SOC进行补偿处理，得到目标电池SOC。9.一种电池管理设备，其特征在于，包括存储器、处理器以及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现如权利要求1至7中任意一项所述的电池SOC预测方法的步骤。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至7中任意一项所述的电池SOC预测方法的步骤。
说明书desc
技术领域本申请涉及电池管理技术领域，尤其是涉及一种电池SOC预测方法及相关设备。背景技术电池荷电状态用来反映电池的剩余容量，其数值上定义为剩余容量占电池容量的比值，常用百分数表示。SOC的取值范围从0到1，当SOC=0时表示电池完全放电，当SOC=1时表示电池完全充满。目前主要采用开路电压法估算电池SOC，然而开路电压法只能在电池开路时估算电池SOC，无法在电池处于充放电状态下估算电池SOC。发明内容有鉴于此，本申请提供一种电池SOC预测方法、装置、电池管理设备及存储介质，以解决现有技术无法在电池处于充放电状态下估算电池SOC的技术问题。本申请的第一方面提供一种电池SOC预测方法，所述方法包括：获取电池的静态电压；根据所述静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC；侦测到所述电池处于工作状态时，根据所述工作状态及所述初始电池SOC计算得到预测电池SOC；对所述预测电池SOC进行补偿处理，得到目标电池SOC。根据本申请的一个可选的实施方式，所述根据所述静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC包括：确定所述预设的电池开路电压SOC数据表中与所述静态电压匹配的第一开路电压及第二开路电压；获取所述预设的电池开路电压SOC数据表中与所述第一开路电压对应的第一SOC，及与所述第二开路电压对应的第二SOC；根据所述第一开路电压、所述第一SOC、所述第二开路电压及所述第二SOC生成开路电压SOC曲线；根据所述开路电压SOC曲线及所述静态电压，计算得到所述初始电池SOC。根据本申请的一个可选的实施方式，所述侦测到所述电池处于工作状态时，根据所述工作状态及所述初始电池SOC计算得到预测电池SOC包括：侦测到所述电池处于充电状态时，每隔第一计时器结束，获取所述电池的充电速率；根据所述充电速率及所述初始电池SOC，进行增量计算，得到所述预测电池SOC。根据本申请的一个可选的实施方式，所述侦测到所述电池处于工作状态时，根据所述工作状态及所述初始电池SOC计算得到预测电池SOC包括：侦测到所述电池处于放电状态时，每隔第二计时器结束，获取所述电池的放电速率；根据所述放电速率及所述初始电池SOC，进行减量计算，得到所述预测电池SOC。根据本申请的一个可选的实施方式，所述对所述预测电池SOC进行补偿处理，得到目标电池SOC包括：判断所述预测电池SOC是否在预设标准范围内；当所述预测电池SOC不在所述预设标准范围内时，根据所述预设标准范围的上限值及下限值对所述预测电池SOC进行补偿处理，得到所述目标电池SOC；当所述预测电池SOC在所述预设标准范围内时，根据默认补偿规则对所述预测电池SOC进行补偿处理，得到所述目标电池SOC。根据本申请的一个可选的实施方式，所述根据所述预设标准范围的上限值及下限值对所述预测电池SOC进行补偿处理，得到所述目标电池SOC包括：判断所述预测电池SOC距离所述预设标准范围的上限值近还是距离所述预设标准范围的下限值近；当确定所述预测电池SOC距离所述上限值近时，根据所述上限值对所述预测电池SOC进行截断处理，得到所述目标电池SOC；当确定所述预测电池SOC距离所述下限值近时，根据所述下限值对所述预测电池SOC进行截断处理，得到所述目标电池SOC。根据本申请的一个可选的实施方式，所述获取电池的静态电压包括：在电池管理系统初始化完成后，获取所述电池的电压，作为所述静态电压。本申请的第二方面提供一种电池SOC预测装置，所述装置包括：获取模块，用于获取电池的静态电压；计算模块，用于根据所述静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC；预测模块，用于侦测到所述电池处于工作状态时，根据所述工作状态及所述初始电池SOC计算得到预测电池SOC；补偿模块，用于对所述预测电池SOC进行补偿处理，得到目标电池SOC。本申请的第三方面提供一种电池管理设备，包括存储器、处理器以及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现所述的电池SOC预测方法的步骤。本申请的第四方面提供一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现所述的电池SOC预测方法的步骤。本申请实施例提供的电池SOC预测方法、装置、电池管理设备及存储介质，首先获取电池静态下的电压，根据静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC，作为电池的初始状态或基准状态，当电池处于工作状态时，根据工作状态及初始电池SOC计算得到预测电池SOC，模拟了电池充放电过程中的电压变化，能够更准确地反映电池的实际状态，克服了电池充放电带来的电压大幅度变化，导致的电量估算异常；为了避免预测的电池SOC出现异常，通过对预测电池SOC进行补偿处理，以此强制性的将电池SOC限制在预测标准范围以内，得到的目标电池SOC，具有准确性和可靠性。附图说明图1是本申请实施例示出的电池SOC预测方法的流程图；图2是本申请实施例示出的电池SOC预测装置的功能模块图；图3是本申请实施例示出的电池管理设备的结构图。具体实施方式本申请以下实施例中所使用的术语只是为了描述特定实施例的目的，而并非旨在作为对本申请的限制。如在本申请的说明书中所使用的那样，单数表达形式“一个”、“一种”、“所述”、“上述”、“该”和“这一”旨在也包括复数表达形式，除非其上下文中明确地有相反指示。还应当理解，本申请中使用的术语“和/或”是指包含一个或多个所列出项目的任何或所有可能组合。以下，术语“第一”、“第二”仅用于描述目的，而不能理解为暗示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括一个或者更多个该特征，在本申请实施例的描述中，除非另有说明，“多个”的含义是两个或两个以上。电池的剩余容量通过电池荷电状态来反映，目前现有的电池SOC估算方法主要分为：传统方法，基于模型的方法，智能算法。虽然目前SOC估算方法众多，结合到特定产品的需要，发现高级的算法需要更大的软件和硬件开发成本，要将这些算法应用于低成本的小家电方案显然是不可取的。目前市面上含锂电池的低成本小家电电器，对成本极为敏感，大多数产品甚至直接放弃SOC估算的需求，系统只显示电池电量低和电池电量满两种状态。而仍有部分产品需要系统具有SOC的功能，通过测量电池SOC，来确保其最佳性能和可靠性。为了解决上述现有技术中存在的至少一个技术问题，本申请实施例提供了一种电池SOC预测方法、装置、电池管理设备及存储介质，在不增加成本的基础上，获取电池SOC，尤其是在电池处于充放电过程中电压波动所带来的局限性。本发明实施例提供的电池SOC预测方法由电池管理设备执行，相应地，电池SOC预测装置运行于电池管理设备中。图1是本发明实施例一提供的电池SOC预测方法的流程图。所述电池SOC预测方法具体包括以下步骤。S11，获取电池的静态电压。静态电压是指蓄电池完全充电后两端接线断开时测得的端电压。在进行静态电压测量时，确保电池既不处在充电状态也不处在放电状态。即，在获取电池的静态电压之前，待蓄电池完全充电之后，没有连接到任何外部电源或负载的情况下，等待一段时间，再获取电池的静态电压。静态电压提供了电池在没有电流流动的情况下的基准电压，可以作为电池的初始状态或基准状态，用于与后续测量的动态电压进行比较。在一个可选的实施方式中，所述获取电池的静态电压包括：在电池管理系统初始化完成后，获取所述电池的电压，作为所述静态电压。电池管理系统是一种用于监控、控制和优化蓄电池性能的系统。电池管理系统开机上电时会进行初始化，上电完成系统初始化之后，微控制器单元利用模拟数字转换器获取电池的静态电压。待蓄电池完全充电之后等待一段时间获取电池的静态电压，是为了确保电池的电压达到了稳定，排除瞬态电压波动，从而获得更准确的测量结果。S12，根据所述静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC。电池荷电状态表示电池的剩余电量，常用百分数表示，SOC的取值范围通常从0到1。SOC=0时，表示电池完全放电，没有电量，在这个状态下，电池无法提供足够的电能来支持设备的正常运行。SOC=1时，表示电池完全充满，达到了最大电量容量，电池可以提供最大的电能储备。此时，电池的电压达到其开路电压的最高值。端点1和0提供了关于电池状态的极端信息，而在SOC的取值范围的其他值则表示电池在这两个极端状态之间的相对电量水平。SOC的准确估算对于电池管理系统至关重要，能够帮助电池管理系统监控电池的使用情况、优化充放电策略以延长电池寿命，并确保系统的稳定运行。其中，电池开路电压SOC数据表是预先根据经验进行设置的，电池开路电压SOC数据表中记录了电池开路电压与电池SOC之间的对应关系，不同的电池开路电压对应不同的电池SOC。示例性的，电池开路电压SOC数据表中记录了11个数据对，例如，、、、、、、、、、、。可以对预设的电池开路电压SOC数据表中的全部数据进行拟合，从而找到与全部数据最匹配的曲线或函数，再基于拟合得到的曲线或函数计算得到静态电压对应的电池SOC，作为初始电池SOC。拟合的方法可以包括，但不限于：最小二乘法，多项式，线性回归，非线性最小二乘法，局部加权回归，神经网络等。在一个可选的实施方式中，所述根据所述静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC包括：确定所述预设的电池开路电压SOC数据表中与所述静态电压匹配的第一开路电压及第二开路电压；获取所述预设的电池开路电压SOC数据表中与所述第一开路电压对应的第一SOC，及与所述第二开路电压对应的第二SOC；根据所述第一开路电压、所述第一SOC、所述第二开路电压及所述第二SOC生成开路电压SOC曲线；根据所述开路电压SOC曲线及所述静态电压，计算得到所述初始电池SOC。由于电池的电压-SOC关系通常是非线性的，而且电池在不同的工作条件下可能表现出不同的特性，因此，对预设的电池开路电压SOC数据表中的全部数据进行拟合，有可能得不到最准确的初始电池SOC。本申请实施例，可以在预设的电池开路电压SOC数据表中，获取两个相邻的电池开路电压，静态电压位于获取的两个相邻的电池开路电压组成的范围内，则这两个相邻的电池开路电压为与静态电压匹配的第一开路电压及第二开路电压。两个相邻的电池开路电压，是指在预设的电池开路电压SOC数据表中，按照顺序排列的两个紧挨着的电池开路电压。即，这两个电池开路电压在预设的电池开路电压SOC数据表中的顺序是相邻的。在确定了第一开路电压及第二开路电压之后，即可根据预设的电池开路电压SOC数据表，获取第一开路电压对应的第一SOC，及第二开路电压对应的第二SOC，从而得到两个数据点和。根据两个数据点和，可以进行直线拟合，得到开路电压SOC曲线。基于开路电压SOC曲线，可以得到静态电压对应的电池电压，作为初始电池SOC。上述可选的实施方式中，充分考虑了电池的电压-SOC之间的非线性关系，通过在预设的电池开路电压SOC数据表中，选择适用于静态电压的两个相邻的电池开路电压，然后基于这两个相邻的电池开路电压进行插值或拟合，而不是对整个电池开路电压SOC数据表进行拟合，可以更好地应对电池在不同环境或工作状态下的变化，从而能更准确地建立开路电压SOC曲线，进而提高了计算初始电池SOC的准确性。S13，侦测到所述电池处于工作状态时，根据所述工作状态及所述初始电池SOC计算得到预测电池SOC。电池处于工作状态是指电池处于充电状态，或者处于放电状态。由于充放电期间会引起电压的显著变化，因此，现有技术无法采用开路电压法在电池处于充放电状态下估算电池SOC。本申请实施例则根据工作状态及初始电池SOC可以在电池处于充放电状态下预测得到电池SOC，即预测电池SOC。在一个可选的实施方式中，所述侦测到所述电池处于工作状态时，根据所述工作状态及所述初始电池SOC计算得到预测电池SOC包括：侦测到所述电池处于充电状态时，每隔第一计时器结束，获取所述电池的充电速率，根据所述充电速率及所述初始电池SOC，进行增量计算，得到所述预测电池SOC；侦测到所述电池处于放电状态时，每隔第二计时器结束，获取所述电池的放电速率，根据所述放电速率及所述初始电池SOC，进行减量计算，得到所述预测电池SOC。可以通过检测电池电压的变化来判断电池处于充电状态还是出于放电状态，如果电压上升超过预设阈值，说明电池正在充电，如果电压下降超过预设阈值，说明电池正在放电。充电速率表示电池在充电时所接受的电流的强度，放电速率表示电池在放电时提供的电流的强度，以充电电流的比率或倍数来表示充电速率或者放电速率。充电速率和放电速率均可以通过监测充电电流的大小来获取。在电池管理系统中，可以使用电流传感器测量电流值，从而确定充电速率或者放电速率。可以预先设置第一计时器及第二计时器，第一计时器和第二计时器可以相同，也可以不同。在电池处于充电状态时，计时器每隔预设第一时间间隔触发一次，从而定期逐渐增加初始电池SOC，确保在充电阶段准确的预测电池SOC。具体实施时，根据充电速率与电池容量计算得到第一比值，计时器第一次触发结束时，根据第一比值及第一时间间隔计算得到第一增量，在初始电池SOC的基础上增加第一增量，重置计时器，预设第一时间间隔之后进行第二次触发；计时器第二次触发结束时，在第一次增加的基础上再增加第一增量，在计时器第三次触发结束时，在第二次增加的基础上继续增加第一增量，以此类推，直至达到设定的充电终点或最大百分比。在电池处于放电状态时，计时器每隔预设第二时间间隔触发一次，从而定期逐渐减少初始电池SOC，确保在放电阶段准确的预测电池SOC。具体实施时，根据放电速率与电池容量计算得到第二比值，计时器第一次触发结束时，根据第二比值及第二时间间隔计算得到第二增量，在初始电池SOC的基础上减少第二增量，重置计时器，预设第二时间间隔之后进行第二次触发；计时器第二次触发结束时，在第一次增加的基础上再减少第二增量，在计时器第三次触发结束时，在第三次增加的基础上继续减少第二增量，以此类推，直至达到设定的放电终点或最小百分比。示例性的，如果充电速率是每分钟增加1%，那么在每个计时器间隔结束时，电池管理系统会检测当前的电池SOC，然后增加1%。随着时间的推移，电池SOC会逐渐增加，如此模拟了一个缓慢而稳定的充电过程，而不是突然地、剧烈地增加电量百分比，缓慢而稳定的增加电池SOC更接近实际电池充电的行为。同样地，如果放电速率是每分钟增加1%，那么在每个计时器间隔结束时，电池管理系统会检测当前的电池SOC，然后减少1%。随着时间的推移，电池SOC会逐渐减少，如此模拟了一个缓慢而稳定的放电过程，而不是突然地、剧烈地减少电量百分比，缓慢而稳定的减少电池SOC更接近实际电池放电的行为。应当理解的是，当电池从充电状态切换到放电状态，或者从放电状态切换到充电状态，需要相应地调整控制过程，以此切换增加或减少电池SOC的操作。上述可选的实施方式中，引入了基于计时器的调整机制，充电期间增加电池SOC，放电期间减少电池SOC，实现了根据电池的充放电状态自适应的调整电池SOC；根据充放电速率来动态调整电池SOC，提高了电池SOC的预测精度。S14，对所述预测电池SOC进行补偿处理，得到目标电池SOC。由于电池处于充放电过程得到的预测电池SOC，可能会出现异常，因此需要对预测电池SOC进行补偿处理，从而对电池SOC和电池电压之间的关系施加约束，确保逻辑正确。在一个可选的实施方式中，所述对所述预测电池SOC进行补偿处理，得到目标电池SOC包括：判断所述预测电池SOC是否在预设标准范围内；当所述预测电池SOC不在所述预设标准范围内时，根据所述预设标准范围的上限值及下限值对所述预测电池SOC进行补偿处理，得到所述目标电池SOC；当所述预测电池SOC在所述预设标准范围内时，根据默认补偿规则对所述预测电池SOC进行补偿处理，得到所述目标电池SOC。其中，预设标准范围可以是。将所述预测电池SOC与预设标准范围进行比较，以此来判断预测电池SOC是否合理。当所述预测电池SOC不在所述预设标准范围内时，表明预测电池SOC不合理，则可以根据所述预设标准范围的上限值及下限值对所述预测电池SOC进行补偿处理。当所述预测电池SOC在所述预设标准范围内时，表明预测电池SOC合理，则可以根据默认补偿规则对所述预测电池SOC进行补偿处理。其中，默认补偿规则可以为不做任何补偿处理。上述可选的实施方式，根据预测电池SOC是否在预设标准范围内，采取不同的补偿策略，有助于提高电池管理的精度和性能，确保电池的安全运行和稳定性。在一个可选的实施方式中，所述根据所述预设标准范围的上限值及下限值对所述预测电池SOC进行补偿处理，得到所述目标电池SOC包括：判断所述预测电池SOC距离所述预设标准范围的上限值近还是距离所述预设标准范围的下限值近；当确定所述预测电池SOC距离所述上限值近时，根据所述上限值对所述预测电池SOC进行截断处理，得到所述目标电池SOC；当确定所述预测电池SOC距离所述下限值近时，根据所述下限值对所述预测电池SOC进行截断处理，得到所述目标电池SOC。检查预测电池SOC与预设标准范围的上限值和下限值的相对位置，来判断电池SOC距离上限值近还是距离下限值近。具体实施时，可以计算预测电池SOC与上限值的第一绝对差值，及计算预测电池SOC与下限值的第二绝对差值，对第一绝对差值与第二绝对差值进行比较，第一绝对差值小于第二绝对差值时，表明预测电池SOC距离上限值近，第一绝对差值大于第二绝对差值时，表明预测电池SOC距离下限值近。如果确定预测电池SOC距离上限值较近，可以根据上限值进行截断处理，例如，将预测电池SOC截断为上限值，以确保SOC不会超过上限值。如果确定预测电池SOC距离下限值较近，可以根据下限值进行截断处理，例如，将预测电池SOC截断为下限值，以确保SOC不会低于下限值。经过截断处理后，得到的数值即为目标电池SOC，目标电池SOC位于预设标准范围内。上述可选的实施方式中，通过截断处理来限制预测电池SOC的最大值和最小值，可以防止预测电池SOC超出安全范围，保留了电池SOC在合理范围内的精度。在其他实施方式中，当预测电池SOC不在所述预设标准范围内时，可以使用平滑算法，例如滤波器或移动平均，对计算得到的预测电池SOC进行平滑处理。在一可选的实施方式中，还可以实时显示所述目标电池SOC。实时显示所述目标电池SOC可以提供关于电池当前状态的准确信息，有助于用户了解电池的剩余电量，让用户及时充电，避免因电量不足而导致的突然中断或不便，或者安排充电以最大程度地延长电池使用寿命，或者何时可以安全地继续使用设备。本申请首先获取电池静态下的电压，根据静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC，作为电池的初始状态或基准状态，当电池处于工作状态时，根据工作状态及初始电池SOC计算得到预测电池SOC，利用计时器缓慢增加或降低初始电池SOC，且只在充电时增加，放电时减少，缓慢增加或减少电池SOC模拟了电池充放电过程中的电压变化，能够更准确地反映电池的实际状态，克服了电池充放电带来的电压大幅度变化，导致的电量估算异常；为了避免预测的电池SOC出现异常，通过对预测电池SOC进行补偿处理，以此强制性的将电池SOC限制在预测标准范围以内，得到的目标电池SOC，具有准确性和可靠性。本申请主要用于低成本的锂电池产品，相比于传统的开路电压法只能在开路时估算电池SOC，本申请在仅依靠电池管理系统的ADC外设的情况下，即在不增加硬件成本的基础上，能够预测充放电阶段的电池SOC，适用环境更广，弥补传统开路电压法的缺点。图2是本发明实施例二提供的电池SOC预测装置的结构图。在一些实施例中，所述电池SOC预测装置20可以包括多个由计算机程序段所组成的功能模块。所述电池SOC预测装置20中的各个程序段的计算机程序可以存储于电池管理设备的存储器中，并由至少一个处理器所执行，以执行电池SOC预测的功能。本实施例中，所述电池SOC预测装置20根据其所执行的功能，可以被划分为多个功能模块。所述功能模块可以包括：获取模块201、计算模块202、预测模块203及补偿模块204。本发明所称的模块是指一种能够被至少一个处理器所执行并且能够完成固定功能的一系列计算机程序段，其存储在存储器中。在本实施例中，关于各模块的功能将在后续的实施例中详述。所述获取模块201，用于获取电池的静态电压。静态电压是指蓄电池完全充电后两端接线断开时测得的端电压。在进行静态电压测量时，确保电池既不处在充电状态也不处在放电状态。即，在获取电池的静态电压之前，待蓄电池完全充电之后，没有连接到任何外部电源或负载的情况下，等待一段时间，再获取电池的静态电压。静态电压提供了电池在没有电流流动的情况下的基准电压，可以作为电池的初始状态或基准状态，用于与后续测量的动态电压进行比较。在一个可选的实施方式中，所述获取电池的静态电压包括：在电池管理系统初始化完成后，获取所述电池的电压，作为所述静态电压。电池管理系统是一种用于监控、控制和优化蓄电池性能的系统。电池管理系统开机上电时会进行初始化，上电完成系统初始化之后，微控制器单元利用模拟数字转换器获取电池的静态电压。待蓄电池完全充电之后等待一段时间获取电池的静态电压，是为了确保电池的电压达到了稳定，排除瞬态电压波动，从而获得更准确的测量结果。所述计算模块202，用于根据所述静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC。电池荷电状态表示电池的剩余电量，常用百分数表示，SOC的取值范围通常从0到1。SOC=0时，表示电池完全放电，没有电量，在这个状态下，电池无法提供足够的电能来支持设备的正常运行。SOC=1时，表示电池完全充满，达到了最大电量容量，电池可以提供最大的电能储备。此时，电池的电压达到其开路电压的最高值。端点1和0提供了关于电池状态的极端信息，而在SOC的取值范围的其他值则表示电池在这两个极端状态之间的相对电量水平。SOC的准确估算对于电池管理系统至关重要，能够帮助电池管理系统监控电池的使用情况、优化充放电策略以延长电池寿命，并确保系统的稳定运行。其中，电池开路电压SOC数据表是预先根据经验进行设置的，电池开路电压SOC数据表中记录了电池开路电压与电池SOC之间的对应关系，不同的电池开路电压对应不同的电池SOC。示例性的，电池开路电压SOC数据表中记录了11个数据对，例如，、、、、、、、、、、。可以对预设的电池开路电压SOC数据表中的全部数据进行拟合，从而找到与全部数据最匹配的曲线或函数，再基于拟合得到的曲线或函数计算得到静态电压对应的电池SOC，作为初始电池SOC。拟合的方法可以包括，但不限于：最小二乘法，多项式，线性回归，非线性最小二乘法，局部加权回归，神经网络等。在一个可选的实施方式中，所述根据所述静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC包括：确定所述预设的电池开路电压SOC数据表中与所述静态电压匹配的第一开路电压及第二开路电压；获取所述预设的电池开路电压SOC数据表中与所述第一开路电压对应的第一SOC，及与所述第二开路电压对应的第二SOC；根据所述第一开路电压、所述第一SOC、所述第二开路电压及所述第二SOC生成开路电压SOC曲线；根据所述开路电压SOC曲线及所述静态电压，计算得到所述初始电池SOC。由于电池的电压-SOC关系通常是非线性的，而且电池在不同的工作条件下可能表现出不同的特性，因此，对预设的电池开路电压SOC数据表中的全部数据进行拟合，有可能得不到最准确的初始电池SOC。本申请实施例，可以在预设的电池开路电压SOC数据表中，获取两个相邻的电池开路电压，静态电压位于获取的两个相邻的电池开路电压组成的范围内，则这两个相邻的电池开路电压为与静态电压匹配的第一开路电压及第二开路电压。两个相邻的电池开路电压，是指在预设的电池开路电压SOC数据表中，按照顺序排列的两个紧挨着的电池开路电压。即，这两个电池开路电压在预设的电池开路电压SOC数据表中的顺序是相邻的。在确定了第一开路电压及第二开路电压之后，即可根据预设的电池开路电压SOC数据表，获取第一开路电压对应的第一SOC，及第二开路电压对应的第二SOC，从而得到两个数据点和。根据两个数据点和，可以进行直线拟合，得到开路电压SOC曲线。基于开路电压SOC曲线，可以得到静态电压对应的电池电压，作为初始电池SOC。上述可选的实施方式中，充分考虑了电池的电压-SOC之间的非线性关系，通过在预设的电池开路电压SOC数据表中，选择适用于静态电压的两个相邻的电池开路电压，然后基于这两个相邻的电池开路电压进行插值或拟合，而不是对整个电池开路电压SOC数据表进行拟合，可以更好地应对电池在不同环境或工作状态下的变化，从而能更准确地建立开路电压SOC曲线，进而提高了计算初始电池SOC的准确性。所述预测模块203，用于侦测到所述电池处于工作状态时，根据所述工作状态及所述初始电池SOC计算得到预测电池SOC。电池处于工作状态是指电池处于充电状态，或者处于放电状态。由于充放电期间会引起电压的显著变化，因此，现有技术无法采用开路电压法在电池处于充放电状态下估算电池SOC。本申请实施例则根据工作状态及初始电池SOC可以在电池处于充放电状态下预测得到电池SOC，即预测电池SOC。在一个可选的实施方式中，所述侦测到所述电池处于工作状态时，根据所述工作状态及所述初始电池SOC计算得到预测电池SOC包括：侦测到所述电池处于充电状态时，每隔第一计时器结束，获取所述电池的充电速率，根据所述充电速率及所述初始电池SOC，进行增量计算，得到所述预测电池SOC；侦测到所述电池处于放电状态时，每隔第二计时器结束，获取所述电池的放电速率，根据所述放电速率及所述初始电池SOC，进行减量计算，得到所述预测电池SOC。可以通过检测电池电压的变化来判断电池处于充电状态还是出于放电状态，如果电压上升超过预设阈值，说明电池正在充电，如果电压下降超过预设阈值，说明电池正在放电。充电速率表示电池在充电时所接受的电流的强度，放电速率表示电池在放电时提供的电流的强度，以充电电流的比率或倍数来表示充电速率或者放电速率。充电速率和放电速率均可以通过监测充电电流的大小来获取。在电池管理系统中，可以使用电流传感器测量电流值，从而确定充电速率或者放电速率。可以预先设置第一计时器及第二计时器，第一计时器和第二计时器可以相同，也可以不同。在电池处于充电状态时，计时器每隔预设第一时间间隔触发一次，从而定期逐渐增加初始电池SOC，确保在充电阶段准确的预测电池SOC。具体实施时，根据充电速率与电池容量计算得到第一比值，计时器第一次触发结束时，根据第一比值及第一时间间隔计算得到第一增量，在初始电池SOC的基础上增加第一增量，重置计时器，预设第一时间间隔之后进行第二次触发；计时器第二次触发结束时，在第一次增加的基础上再增加第一增量，在计时器第三次触发结束时，在第二次增加的基础上继续增加第一增量，以此类推，直至达到设定的充电终点或最大百分比。在电池处于放电状态时，计时器每隔预设第二时间间隔触发一次，从而定期逐渐减少初始电池SOC，确保在放电阶段准确的预测电池SOC。具体实施时，根据放电速率与电池容量计算得到第二比值，计时器第一次触发结束时，根据第二比值及第二时间间隔计算得到第二增量，在初始电池SOC的基础上减少第二增量，重置计时器，预设第二时间间隔之后进行第二次触发；计时器第二次触发结束时，在第一次增加的基础上再减少第二增量，在计时器第三次触发结束时，在第三次增加的基础上继续减少第二增量，以此类推，直至达到设定的放电终点或最小百分比。示例性的，如果充电速率是每分钟增加1%，那么在每个计时器间隔结束时，电池管理系统会检测当前的电池SOC，然后增加1%。随着时间的推移，电池SOC会逐渐增加，如此模拟了一个缓慢而稳定的充电过程，而不是突然地、剧烈地增加电量百分比，缓慢而稳定的增加电池SOC更接近实际电池充电的行为。同样地，如果放电速率是每分钟增加1%，那么在每个计时器间隔结束时，电池管理系统会检测当前的电池SOC，然后减少1%。随着时间的推移，电池SOC会逐渐减少，如此模拟了一个缓慢而稳定的放电过程，而不是突然地、剧烈地减少电量百分比，缓慢而稳定的减少电池SOC更接近实际电池放电的行为。应当理解的是，当电池从充电状态切换到放电状态，或者从放电状态切换到充电状态，需要相应地调整控制过程，以此切换增加或减少电池SOC的操作。上述可选的实施方式中，引入了基于计时器的调整机制，充电期间增加电池SOC，放电期间减少电池SOC，实现了根据电池的充放电状态自适应的调整电池SOC；根据充放电速率来动态调整电池SOC，提高了电池SOC的预测精度。所述补偿模块204，用于对所述预测电池SOC进行补偿处理，得到目标电池SOC。由于电池处于充放电过程得到的预测电池SOC，可能会出现异常，因此需要对预测电池SOC进行补偿处理，从而对电池SOC和电池电压之间的关系施加约束，确保逻辑正确。在一个可选的实施方式中，所述对所述预测电池SOC进行补偿处理，得到目标电池SOC包括：判断所述预测电池SOC是否在预设标准范围内；当所述预测电池SOC不在所述预设标准范围内时，根据所述预设标准范围的上限值及下限值对所述预测电池SOC进行补偿处理，得到所述目标电池SOC；当所述预测电池SOC在所述预设标准范围内时，根据默认补偿规则对所述预测电池SOC进行补偿处理，得到所述目标电池SOC。其中，预设标准范围可以是。将所述预测电池SOC与预设标准范围进行比较，以此来判断预测电池SOC是否合理。当所述预测电池SOC不在所述预设标准范围内时，表明预测电池SOC不合理，则可以根据所述预设标准范围的上限值及下限值对所述预测电池SOC进行补偿处理。当所述预测电池SOC在所述预设标准范围内时，表明预测电池SOC合理，则可以根据默认补偿规则对所述预测电池SOC进行补偿处理。其中，默认补偿规则可以为不做任何补偿处理。上述可选的实施方式，根据预测电池SOC是否在预设标准范围内，采取不同的补偿策略，有助于提高电池管理的精度和性能，确保电池的安全运行和稳定性。在一个可选的实施方式中，所述根据所述预设标准范围的上限值及下限值对所述预测电池SOC进行补偿处理，得到所述目标电池SOC包括：判断所述预测电池SOC距离所述预设标准范围的上限值近还是距离所述预设标准范围的下限值近；当确定所述预测电池SOC距离所述上限值近时，根据所述上限值对所述预测电池SOC进行截断处理，得到所述目标电池SOC；当确定所述预测电池SOC距离所述下限值近时，根据所述下限值对所述预测电池SOC进行截断处理，得到所述目标电池SOC。检查预测电池SOC与预设标准范围的上限值和下限值的相对位置，来判断电池SOC距离上限值近还是距离下限值近。具体实施时，可以计算预测电池SOC与上限值的第一绝对差值，及计算预测电池SOC与下限值的第二绝对差值，对第一绝对差值与第二绝对差值进行比较，第一绝对差值小于第二绝对差值时，表明预测电池SOC距离上限值近，第一绝对差值大于第二绝对差值时，表明预测电池SOC距离下限值近。如果确定预测电池SOC距离上限值较近，可以根据上限值进行截断处理，例如，将预测电池SOC截断为上限值，以确保SOC不会超过上限值。如果确定预测电池SOC距离下限值较近，可以根据下限值进行截断处理，例如，将预测电池SOC截断为下限值，以确保SOC不会低于下限值。经过截断处理后，得到的数值即为目标电池SOC，目标电池SOC位于预设标准范围内。上述可选的实施方式中，通过截断处理来限制预测电池SOC的最大值和最小值，可以防止预测电池SOC超出安全范围，保留了电池SOC在合理范围内的精度。在其他实施方式中，当预测电池SOC不在所述预设标准范围内时，可以使用平滑算法，例如滤波器或移动平均，对计算得到的预测电池SOC进行平滑处理。在一可选的实施方式中，还可以实时显示所述目标电池SOC。实时显示所述目标电池SOC可以提供关于电池当前状态的准确信息，有助于用户了解电池的剩余电量，让用户及时充电，避免因电量不足而导致的突然中断或不便，或者安排充电以最大程度地延长电池使用寿命，或者何时可以安全地继续使用设备。本申请首先获取电池静态下的电压，根据静态电压及预设的电池开路电压SOC数据表，计算得到初始电池SOC，作为电池的初始状态或基准状态，当电池处于工作状态时，根据工作状态及初始电池SOC计算得到预测电池SOC，利用计时器缓慢增加或降低初始电池SOC，且只在充电时增加，放电时减少，缓慢增加或减少电池SOC模拟了电池充放电过程中的电压变化，能够更准确地反映电池的实际状态，克服了电池充放电带来的电压大幅度变化，导致的电量估算异常；为了避免预测的电池SOC出现异常，通过对预测电池SOC进行补偿处理，以此强制性的将电池SOC限制在预测标准范围以内，得到的目标电池SOC，具有准确性和可靠性。本申请主要用于低成本的锂电池产品，相比于传统的开路电压法只能在开路时估算电池SOC，本申请在仅依靠电池管理系统的ADC外设的情况下，即在不增加硬件成本的基础上，能够预测充放电阶段的电池SOC，适用环境更广，弥补传统开路电压法的缺点。本申请实施例还提供一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现所述的电池SOC预测方法的全部或者部分步骤。参阅图3所示，为本申请实施例提供的电池管理设备的结构示意图。在本申请较佳实施例中，所述电池管理设备3包括存储器31、至少一个处理器32及至少一条通信总线33。本领域技术人员应该了解，图3示出的电池管理设备的结构并不构成本申请实施例的限定，既可以是总线型结构，也可以是星形结构，所述电池管理设备3还可以包括比图示更多或更少的其他硬件或者软件，或者不同的部件布置。在一些实施例中，所述电池管理设备3是一种能够按照事先设定或存储的指令，自动进行数值计算和/或信息处理的设备，其硬件包括但不限于微处理器、专用集成电路、可编程门阵列、数字处理器及嵌入式设备等。所述电池管理设备3还可包括客户设备，所述客户设备包括但不限于任何一种可与客户通过键盘、鼠标、遥控器、触摸板或声控设备等方式进行人机交互的电子产品，例如，个人计算机、平板电脑、智能手机、数码相机等。需要说明的是，所述电池管理设备3仅为举例，其他现有的或今后可能出现的电子产品如可适应于本申请，也应包含在本申请的保护范围以内，并以引用方式包含于此。在一些实施例中，所述存储器31中存储有计算机程序，所述计算机程序被所述至少一个处理器32执行时实现如所述的电池SOC预测方法中的全部或者部分步骤。所述存储器31包括只读存储器、可编程只读存储器、可擦除可编程只读存储器、一次可编程只读存储器、电子擦除式可复写只读存储器、只读光盘或其他光盘存储器、磁盘存储器、磁带存储器、或者能够用于携带或存储数据的计算机可读的任何其他介质。进一步地，所述计算机可读存储介质可主要包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需的应用程序等。在一些实施例中，所述至少一个处理器32是所述电池管理设备3的控制核心，利用各种接口和线路连接整个电池管理设备3的各个部件，通过运行或执行存储在所述存储器31内的程序或者模块，以及调用存储在所述存储器31内的数据，以执行电池管理设备3的各种功能和处理数据。例如，所述至少一个处理器32执行所述存储器中存储的计算机程序时实现本申请实施例中所述的电池SOC预测方法的全部或者部分步骤；或者实现电池SOC预测装置的全部或者部分功能。所述至少一个处理器32可以由集成电路组成，例如可以由单个封装的集成电路所组成，也可以是由多个相同功能 或不同功能封装的集成电路所组成，包括一个或者多个中央处理器、微处理器、数字处理芯片、图形处理器及各种控制芯片的组合等。在一些实施例中，所述至少一条通信总线33被设置为实现所述存储器31以及所述至少一个处理器32等之间的连接通信。尽管未示出，所述电池管理设备3还可以包括给各个部件供电的电源，优选的，电源可以通过电源管理装置与所述至少一个处理器32逻辑相连，从而通过电源管理装置实现管理充电、放电、以及功耗管理等功能。电源还可以包括一个或一个以上的直流或交流电源、再充电装置、电源故障检测电路、电源转换器或者逆变器、电源状态指示器等任意组件。所述电池管理设备3还可以包括多种传感器、蓝牙模块、Wi-Fi模块等，在此不再赘述。上述以软件功能模块的形式实现的集成的单元，可以存储在一个计算机可读取存储介质中。上述软件功能模块存储在一个存储介质中，包括若干指令用以使得一台电池管理设备或处理器执行本申请各个实施例所述方法的部分。在本申请所提供的几个实施例中，应该理解到，所揭露的装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述模块的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式。所述作为分离部件说明的模块可以是或者也可以不是物理上分开的，作为模块显示的部件可以是或者也可以不是物理单元，既可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。
