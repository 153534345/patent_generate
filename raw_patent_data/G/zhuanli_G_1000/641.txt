标题title
基于距离和方向特征的电力碳排放异常检测模块和方法
摘要abst
本发明提供了基于距离和方向特征的电力碳排放异常检测模块和方法，涉及碳排放异常检测技术领域，目的是解决对碳排放异常检测的精度不高的问题，包括：电碳数据中心，用于存储用电量数据和碳排放数据；异常检测模块，用于从距离和方向特征两个角度同时进行用电异常检测和碳排放异常检测；电碳组合模块，用于将检测结果进行整合；后处理模块，用于对整合结果进行后处理。本发明具有检测精度高、很容易适应复杂场景的优点。
权利要求书clms
1.基于距离和方向特征的电力碳排放异常检测模块，其特征在于，包括：电碳数据中心，用于存储用电量数据和碳排放数据，当接收到检测开启信号时，调取以24小时整点时刻为时间单位的用电量数据集和碳排放数据集，发送到异常检测模块；异常检测模块，用于从距离和方向特征两个角度同时进行用电异常检测和碳排放异常检测，检测结果包括用电量标签及对应的概率、碳排放标签及对应的概率，所述检测结果被送入电碳组合模块；所述用电量标签用于表示用电量是正常或异常，所述碳排放标签用于表示碳排放是正常或异常；电碳组合模块，用于将所述检测结果进行整合，获取整合结果并送入后处理模块，所述整合结果包括电碳组合标签和电碳组合异常概率；后处理模块，用于对所述整合结果进行后处理，所述后处理包括获取非异常的数据的正常允许波动范围、进行异常的数据的二次判断获取情况类型和修正误判结果。2.根据权利要求1所述的基于距离和方向特征的电力碳排放异常检测模块，其特征在于，所述电碳组合模块获取整合结果的方法包括：所述用电量标签和所述碳排放标签均采用1表示异常、0表示正常；将所述用电量标签和所述碳排放标签进行取或运算，获得所述电碳组合标签；为用电量异常概率和碳排放异常概率赋予权重比，根据权重比获得电碳组合异常概率。3.根据权利要求2所述的基于距离和方向特征的电力碳排放异常检测模块，其特征在于，所述用电量异常概率对所述碳排放异常概率的权重比为1:4。4.根据权利要求1所述的基于距离和方向特征的电力碳排放异常检测模块，其特征在于，所述后处理模块获取非异常的数据的正常允许波动范围的方法为：获取全局波动差：获取检测为正常的数据在全部时刻的最大值和最小值的差值；获取局部波动差：获取检测为正常的数据在各个时刻的最大值和最小值的差值，并求得所有时刻对应的差值中的最大值；获取正常允许波动范围：通过全局波动差、局部波动差和自身历史数据，及其各自对应的权重，求得正常数据所允许在各个时刻的可波动最大值和可波动最小值。5.根据权利要求4所述的基于距离和方向特征的电力碳排放异常检测模块，其特征在于，所述后处理模块进行异常的数据的二次判断获取多种情况类型的方法为：检测为异常的数据若存在任一时刻超过所述可波动最大值，则判断该数据为异常增加；检测为异常的数据若存在任一时刻低于所述可波动最小值，则判断该数据为异常减少；检测为异常的数据若存在至少一个时刻超过所述可波动最大值和至少一个时刻低于所述可波动最小值，则判断该数据为模式突变。6.根据权利要求5所述的基于距离和方向特征的电力碳排放异常检测模块，其特征在于，所述后处理模块修正误判结果的方法为：对未被判断为异常增加、异常减少或模式突变的数据进行修正，将对应的标签修改为正常；设定异常概率阈值，将电碳组合异常概率低于所述异常概率阈值的数据的标签修改为正常。7.基于距离特征的电力碳排放异常检测方法，应用于权利要求1-6任意一项所述的基于距离和方向特征的电力碳排放异常检测模块，其特征在于，采用所述异常检测模块进行基于距离特征的电力碳排放异常检测，分别对用电量数据集和碳排放数据集执行以下操作：为数据集中每条数据计算它与其他数据的欧式距离，并进行求和平均操作，得到平均距离；对所述平均距离进行归一化，得到距离异常概率；对所述距离异常概率进行排序，根据数据集异常值比例将已排序数据进行正常和异常的区分，得到指定日期所对应数据的距离异常判定的标签和对应的概率。8.根据权利要求7所述的基于距离特征的电力碳排放异常检测方法，其特征在于，所述数据集异常值比例为0.1。9.基于方向特征的电力碳排放异常检测方法，应用于权利要求1-6任意一项所述的基于距离和方向特征的电力碳排放异常检测模块，其特征在于，采用所述异常检测模块进行基于方向特征的电力碳排放异常检测，分别对用电量数据集和碳排放数据集执行以下操作：对原始数据进行特征值分解，提取出反映数据方差变化程度的方向特征；对数据集中每条数据，在各个方向上计算方向特征偏差，并对所述方向特征偏差进行求和操作，得到所有方向上的方向偏差总和；对所述方向偏差总和进行归一化，得到方向异常概率；对所述方向异常概率进行排序，根据数据集异常值比例将已排序数据进行正常和异常的区分，得到指定日期所对应数据的方向异常判定的标签和对应的概率。10.根据权利要求9所述的基于方向特征的电力碳排放异常检测方法，其特征在于，所述数据集异常值比例为0.1。
说明书desc
技术领域本发明涉及碳排放异常检测技术领域，具体而言，涉及基于距离和方向特征的电力碳排放异常检测模块和方法。背景技术随着人民生活水平的不断改善，各行各业的用电量逐年攀升，巨大用电量的背后需要源源不断的电力。在大多数电力系统中，石油、天然气、煤炭等化石能源的燃烧需要释放大量的二氧化碳，而碳排放会导致全球气候变暖，引发极端天气、海平面上升等一系列气候变化问题，严重危害人类赖以生存的环境。随着“碳中和”战略目标的提出，我国不断加快以新能源为主体的新型电力系统的建设，大力开展企业碳排放的核查和分析，各企业也需要明确碳排放标准和约束范围、制定减排规划。而有效监控企业的用电和碳排放异常情况，可以有力支撑企业对碳排放的管理和减排方案的制定，因此，对电力碳排放异常检测方法的研究具有重要的现实意义。以往的碳排放异常检测方法大致可以分为两种：理论值方法：利用理论碳排放值进行直接比对和判断，所设定的理论值可细分为固定理论值和动态理论值；基准线方法：从历史数据中选取基准数据，计算目标与其之间的差异度，通过差异度判断是否异常。以上方法各自存在以下几个问题：计算理论值的方法往往需要大量的假设和近似，对最终结果准确度的影响较大；对固定理论值的和基准数据选取准则的设计过于经验化会导致误差较大，因此需要依赖严格的数学基础和专业知识，但这显然不适用于较为复杂的情景；动态理论碳排放值依托大数据和人工智能技术而计算得来，虽然对不同情景具有自适应性，但准确度十分依赖数据量，因此要求数据量大，计算成本高；在与理论值或差异度阈值进行比较后直接确定了数据是否异常，缺乏对误判情况的处理方案，鲁棒性不足。因此，在专业知识欠缺、数据场景复杂，以及数据量不足的情况下，以上方法对碳排放异常检测的精度不高，亟需对检测方法进行提升。发明内容本发明的目的在于提供基于距离和方向特征的电力碳排放异常检测模块和方法，其可以解决对碳排放异常检测的精度不高的问题。本发明的实施例通过以下技术方案实现：基于距离和方向特征的电力碳排放异常检测模块，包括：电碳数据中心，用于存储用电量数据和碳排放数据，当接收到检测开启信号时，调取以24小时整点时刻为时间单位的用电量数据集和碳排放数据集，发送到异常检测模块；异常检测模块，用于从距离和方向特征两个角度同时进行用电异常检测和碳排放异常检测，检测结果包括用电量标签及对应的概率、碳排放标签及对应的概率，所述检测结果被送入电碳组合模块；所述用电量标签用于表示用电量是正常或异常，所述碳排放标签用于表示碳排放是正常或异常；电碳组合模块，用于将所述检测结果进行整合，获取整合结果并送入后处理模块，所述整合结果包括电碳组合标签和电碳组合异常概率；后处理模块，用于对所述整合结果进行后处理，所述后处理包括获取非异常的数据的正常允许波动范围、进行异常的数据的二次判断获取情况类型和修正误判结果。优选地，所述电碳组合模块获取整合结果的方法包括：所述用电量标签和所述碳排放标签均采用1表示异常、0表示正常；将所述用电量标签和所述碳排放标签进行取或运算，获得所述电碳组合标签；为用电量异常概率和碳排放异常概率赋予权重比，根据权重比获得电碳组合异常概率。优选地，所述用电量异常概率对所述碳排放异常概率的权重比为1:4。优选地，所述后处理模块获取非异常的数据的正常允许波动范围的方法为：获取全局波动差：获取检测为正常的数据在全部时刻的最大值和最小值的差值；获取局部波动差：获取检测为正常的数据在各个时刻的最大值和最小值的差值，并求得所有时刻对应的差值中的最大值。获取正常允许波动范围：通过全局波动差、局部波动差和自身历史数据，及其各自对应的权重，求得正常数据所允许在各个时刻的可波动最大值和可波动最小值。优选地，所述后处理模块进行异常的数据的二次判断获取多种情况类型的方法为：检测为异常的数据若存在任一时刻超过所述可波动最大值，则判断该数据为异常增加；检测为异常的数据若存在任一时刻低于所述可波动最小值，则判断该数据为异常减少；检测为异常的数据若存在至少一个时刻超过所述可波动最大值和至少一个时刻低于所述可波动最小值，则判断该数据为模式突变。优选地，所述后处理模块修正误判结果的方法为：对未被判断为异常增加、异常减少或模式突变的数据进行修正，将对应的标签修改为正常；设定异常概率阈值，将电碳组合异常概率低于所述异常概率阈值的数据的标签修改为正常。优选地，采用所述异常检测模块进行基于距离特征的电力碳排放异常检测，分别对用电量数据集和碳排放数据集执行以下操作：为数据集中每条数据计算它与其他数据的欧式距离，并进行求和平均操作，得到平均距离；对所述平均距离进行归一化，得到距离异常概率；对所述距离异常概率进行排序，根据数据集异常值比例将已排序数据进行正常和异常的区分，得到指定日期所对应数据的距离异常判定的标签和对应的概率。优选地，采用所述异常检测模块进行基于方向特征的电力碳排放异常检测，分别对用电量数据集和碳排放数据集执行以下操作：对原始数据进行特征值分解，提取出反映数据方差变化程度的方向特征；对数据集中每条数据，在各个方向上计算方向特征偏差，并对所述方向特征偏差进行求和操作，得到所有方向上的方向偏差总和；对所述方向偏差总和进行归一化，得到方向异常概率；对所述方向异常概率进行排序，根据数据集异常值比例将已排序数据进行正常和异常的区分，得到指定日期所对应数据的方向异常判定的标签和对应的概率。优选地，所述数据集异常值比例为0.1。本发明实施例的技术方案至少具有如下优点和有益效果：本发明发挥电力大数据优势，结合用电量和碳排放的动态变化趋势，较为全面地对碳排放异常情况进行告警分析，解决了对专业知识、数据数量具有高要求，无法适应复杂场景的问题；本发明采用无监督学习的算法框架，无需进行事先的模型训练和复杂的超参数调整，同时对数据量的要求较低，节约了计算成本和存储成本；本发明同时从距离和方向特征两个重要角度分析数据关系，可支持各式场景下具有不同用电特性的企业或用户进行电力碳排放异常检测，具有较强的适应性；本发明引入了后处理模块，对可能出现的误判情况进行了修正，具有良好的鲁棒性；同时进一步划分了异常类别，并提供了异常概率参考值，可以帮助用户分析各异常数据需要引起重视的程度。附图说明图1为本发明实施例1-实施例2提供的基于距离和方向特征的电力碳排放异常检测模块的系统框架示意图；图2为本发明实施例3中提供的基于距离特征的电力碳排放异常检测方法；图3为本发明实施例3中提供的基于方向特征的电力碳排放异常检测方法。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本发明实施例的组件可以以各种不同的配置来布置和设计。实施例1本实施例提供了基于距离和方向特征的电力碳排放异常检测模块，参阅图1，包括：电碳数据中心，用于存储用电量数据和碳排放数据，当接收到检测开启信号时，调取以24小时整点时刻为时间单位的用电量数据集和碳排放数据集，发送到异常检测模块；作为一个电碳数据中心的实施案例，在接收到检测开启信号时，电碳数据中心获取5至30条最新历史数据，具体步骤包括：步骤S101：向电碳数据中心发送用户编号和日期，读取该日及历史日的24小时用电量数据集和碳排放数据集，具体来说需要包含用户编号、日期、各时刻用电量、各时刻碳排放量；步骤S102：剔除24小时内存在任意缺失的数据，并按时间倒序排序，若清洗后的数据超过30条，则截取前30条数据；若不足5条，则继续积攒数据，待数据量达到5条后方可进行异常检测。异常检测模块，用于从距离和方向特征两个角度同时进行用电异常检测和碳排放异常检测，检测结果包括用电量标签及对应的概率、碳排放标签及对应的概率，所述检测结果被送入电碳组合模块；所述用电量标签用于表示用电量是正常或异常，所述碳排放标签用于表示碳排放是正常或异常；电碳组合模块，用于将所述检测结果进行整合，获取整合结果并送入后处理模块，所述整合结果包括电碳组合标签和电碳组合异常概率；后处理模块，用于对所述整合结果进行后处理，所述后处理包括获取非异常的数据的正常允许波动范围、进行异常的数据的二次判断获取情况类型和修正误判结果。实施例2本实施例基于实施例1的技术方案，对各个模块的工作方式做进一步说明。在本实施例中，所述电碳组合模块获取整合结果的方法包括：所述用电量标签和所述碳排放标签均采用1表示异常、0表示正常；将所述用电量标签和所述碳排放标签进行取或运算，获得所述电碳组合标签；为用电量异常概率和碳排放异常概率赋予权重比，根据权重比获得电碳组合异常概率。作为一个电碳组合模块的案例，该模块的运行方式可以按照以下方式进行：步骤S201:对标签取或，也就是说数据在距离和方向两个角度的任一之中出现异常则判定为组合异常；仅一方异常则取相应概率，两方均异常则对两者概率求最大。最终可得到用电量组合异常标签及该标签对应概率/＞、碳排放组合异常标签/＞及该标签对应概率/＞。以碳排放数据集为例，公式为：其中，和/＞为碳排放数据基于距离特征的异常检测下的标签及对应的概率，/＞和/＞为碳排放数据基于方向特征的异常检测下的标签和对应的概率。步骤S202:设定用电量权重、碳排放权重/＞，用于计算电碳组合概率；步骤S203:对用电量正常/异常标签和碳排放正常/异常标签/＞取或，求得电碳组合标签/＞，公式为：步骤S204:对用电量标签对应概率和用电量标签对应概率/＞进行加权求和，求得电碳组合异常概率/＞，公式为：进一步地，所述用电量异常概率对所述碳排放异常概率的权重比为1:4。步骤S205:若经步骤S203得到的电碳组合标签为正常，则执行步骤S207；否则，进入步骤S206，根据电碳组合标签为正常的数据计算正常允许波动范围，对标签为异常的数据进行类型划分和误判修正，然后再进入步骤S207。步骤S207：将系统检测结果发送到电碳数据中心，结束本次异常检测。发送字段包括异常类型和异常概率参考值，其中，当异常类型为正常时，异常概率参考值为0，否则为步骤S204所求出的电碳组合异常概率。具体来说，步骤S206涉及的步骤就是：所述获取非异常的数据的正常允许波动范围的方法为，分别对用电量数据集和碳排放数据集执行以下操作：获取全局波动差：获取检测为正常的数据在全部时刻的最大值和最小值的差值；获取局部波动差：获取检测为正常的数据在各个时刻的最大值和最小值的差值，并求得所有时刻对应的差值中的最大值。获取正常允许波动范围：通过全局波动差、局部波动差和自身历史数据，及其各自对应的权重，求得正常数据所允许在各个时刻的可波动最大值和可波动最小值。作为优选方案，所述进行异常的数据的二次判断获取多种情况类型的方法为，分别对用电量数据集和碳排放数据集执行以下操作：检测为异常的数据若存在任一时刻超过所述可波动最大值，则判断该数据为异常增加；检测为异常的数据若存在任一时刻低于所述可波动最小值，则判断该数据为异常减少；检测为异常的数据若存在至少一个时刻超过所述可波动最大值和至少一个时刻低于所述可波动最小值，则判断该数据为模式突变。此外，还可以对数据进行修正，也就是分别对用电量数据集和碳排放数据集执行误判结果修正的操作：对未被判断为异常增加、异常减少或模式突变的数据进行修正，将对应的标签修改为正常；作为进一步的修正方案，可以分别对用电量数据集和碳排放数据集执行以下操作：设定异常概率阈值，将异常概率低于所述异常概率阈值的数据的标签修改为正常。以下为一个步骤S206的实施案例：步骤S2061：设定异常概率阈值，用于修正可能发生误判的数据标签；设定局部波动差权重/＞、全局波动差权重/＞、自身波动权重/＞，用于计算正常允许波动范围；步骤S2062：若步骤S204中的电碳组合异常概率低于异常概率阈值/＞，则将异常标签修正为正常，执行步骤S207；步骤S2063：对维度为的正常数据/＞其在24个时刻的波动差，取最大值作为局部波动差/＞，并计算全局波动差/＞，公式为：步骤S2064：通过全局波动差、局部波动差和自身历史数据，及其各自对应的权重，计算各时刻的可波动最大值/＞和最小值/＞，公式为：步骤S2065：遍历24小时，仅存在超出可波动最大值的情况则判定为异常增加类型；仅存在低于可波动最小值/＞则判定为异常减少类型；同时存在某时刻超出最大值和另一时刻低于最小值的情况，则被判定为模式突变类型；否则，异常标签被修正为正常。实施例3本实施例提供了基于距离特征的电力碳排放异常检测方法，应用于以上任意一项所述的基于距离和方向特征的电力碳排放异常检测模块，采用所述异常检测模块进行基于距离特征的电力碳排放异常检测，分别对用电量数据集和碳排放数据集执行以下操作，如图2所示：计算每条数据的平均欧式距离：为数据集中每条数据计算它与其他数据的欧式距离，并进行求和平均操作，得到平均距离；计算每条数据的距离异常概率：对所述平均距离进行归一化，得到距离异常概率；对概率排序并分隔正异常类型：对所述距离异常概率进行递减排序，根据数据集异常值比例将已排序数据进行正常和异常的区分，得到指定日期所对应数据的距离异常判定的标签和对应的概率。本实施例还提供了基于方向特征的电力碳排放异常检测方法，应用于以上任意一项所述的基于距离和方向特征的电力碳排放异常检测模块，其特征在于，采用所述异常检测模块进行基于方向特征的电力碳排放异常检测，分别对用电量数据集和碳排放数据集执行以下操作，如图3所示：提取反映变化程度的方向特征：对原始数据进行特征值分解，提取出反映数据方差变化程度的方向特征；计算每条数据的方向偏差总和：对数据集中每条数据，在各个方向上计算方向特征偏差，并对所述方向特征偏差进行求和操作，得到所有方向上的方向偏差总和；计算每条数据的方向异常概率：对所述方向偏差总和进行归一化，得到方向异常概率；对概率排序并分隔正异常类型：对所述方向异常概率进行递减排序，根据数据集异常值比例将已排序数据进行正常和异常的区分，得到指定日期所对应数据的方向异常判定的标签和对应的概率。作为优选方案，所述数据集异常值比例为0.1，也就是说对于距离异常概率或方向异常概率进行递减排序的结果，取其前面占比0.1的数据即异常概率之中最大的10%作为异常，其余数据为正常。以下提供一个具体的实施案例，特别说明的是案例中的标签均定义为1代表异常，0代表正常：进行异常检测包括以下步骤：步骤S301：设定数据集异常值比例，/＞作为距离、方向异常检测中对异常概率进行划分的依据；步骤S302：分别对用电量数据集和碳排放数据集进行基于距离特征的异常检测，得到用电量距离异常标签及该标签所对应概率/＞、碳排放距离异常标签/＞及该标签所对应概率/＞；以碳排放数据集为例，进行基于距离特征的异常检测的具体步骤如下：步骤S3021：对长度为的数据集/＞中每条数据/＞计算它与其余/＞条数据的欧式距离，并进行求和平均操作，得到平均距离/＞，公式为：步骤S3022：对所有数据的平均距离进行归一化，得到距离异常概率/＞，公式为：步骤S3023：对所有数据的距离异常概率进行递减排序，当日数据/＞在排序中的位置为/＞，根据数据集异常值比例与数据量的乘积/＞确定距离异常/正常划分点的位置，若当日数据位于划分点之前则被判定为距离异常，位于划分点之后则被判定为距离正常，公式为：步骤S303：分别对用电量数据集和碳排放数据集进行基于方向特征的异常检测，得到用电量方向异常标签及该标签所对应概率/＞、碳排放方向异常标签/＞及该标签所对应概率/＞；以碳排放数据集为例，基于方向特征的异常检测的具体步骤如下：步骤S3031：将长度为的数据集/＞按列组成/＞行24列的矩阵，并进行特征值分解，提取出/＞个反映数据方差变化程度的方向特征/＞，各特征的维度均为24；步骤S3032：对每条数据，计算它与/＞个方向特征的欧氏距离之和，即方向偏差总和/＞，公式为：步骤S3033：对所有数据的方向偏差总和进行归一化，得到方向异常概率/＞，公式为：步骤S3034：对所有数据的方向异常概率进行递减排序，当日数据/＞在排序中的位置为/＞，根据数据集异常值比例与数据量的乘积/＞确定方向异常/正常划分点的位置，若当日数据位于划分点之前则被判定为方向异常，位于划分点之后则被判定为方向正常，公式为：以上仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
