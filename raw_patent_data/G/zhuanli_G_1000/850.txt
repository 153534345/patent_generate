标题title
一种纺织品染色质量智能评估方法及系统
摘要abst
本发明涉及图像数据处理领域，具体涉及一种纺织品染色质量智能评估方法及系统，包括：采集纺织品染色灰度图像；根据纺织品染色灰度图像确定染色灰度图像中的若干个疑似区域；根据疑似区域，获得像素点在不同方向上的相似性；根据像素点在不同方向上的相似性，获得像素点在一个方向与其他方向上的扩散相似性；根据像素点在一个方向与其他方向上的扩散相似性，获得疑似区域受光照的影响程度；根据区域的染色异常的程度和受光照的影响程度，得到增强图像；根据增强图像，进行纺织品染色质量评估。本发明通过图像灰度值和染色区域的特征，对图像进行增强，提高纺织品染色质量智能评估的准确性。
权利要求书clms
1.一种纺织品染色质量智能评估方法，其特征在于，该方法包括以下步骤：采集纺织品染色灰度图像；根据纺织品染色灰度图像中像素点的灰度值差异，确定染色灰度图像中的若干个疑似区域；根据疑似区域构建目标窗口，根据目标窗口内像素点在不同方向下的像素点灰度值差异，获得像素点在不同方向上的相似性；根据像素点在不同方向上的相似性，获得像素点在一个方向与其他方向上的扩散相似性；根据像素点在一个方向与其他方向上的扩散相似性，获得疑似区域表现为染色异常的程度；根据疑似区域内像素点之间的距离，获得疑似区域受光照的影响程度；根据疑似区域的染色异常的程度和受光照的影响程度，获得疑似区域内像素点的增强系数；根据疑似区域内像素点的增强系数得到增强图像；根据增强图像，进行纺织品染色质量评估。2.根据权利要求1所述一种纺织品染色质量智能评估方法，其特征在于，所述根据纺织品染色灰度图像中像素点的灰度值差异，确定染色灰度图像中的若干个疑似区域，包括的具体步骤为：在纺织品染色灰度图像上，利用区域生长算法获得若干个连通区域；将所有连通区域中像素点数量最多的连通域，记为连通区域；将第个连通区域中所有像素点的灰度均值与纺织品染色灰度图像上的所有像素点的灰度均值的差值绝对值，记为第一差异；将第个连通区域中所有像素点的灰度均值与连通区域/＞中所有像素点的灰度均值的差值绝对值，记为第二差异；将第一差异与第二差异的和值，记为第一特征；计算连通区域中的像素点的数量减去第/＞个连通区域中像素点的数量的差值，将所述数量的差值与第/＞个连通区域中像素点的数量的比值，记为第二特征；计算第个连通区域中所有像素点灰度值的方差，再计算所述方差、第一特征以及第二特征的乘积，将所述乘积的归一化值，记为第/＞个连通区域的异常程度；将异常程度大于预设的异常程度阈值P的连通区域，记为疑似区域。3.根据权利要求1所述一种纺织品染色质量智能评估方法，其特征在于，所述根据疑似区域构建目标窗口，根据目标窗口内像素点在不同方向下的像素点灰度值差异，获得像素点在不同方向上的相似性，包括的具体步骤为：选择第个疑似区域内灰度值最小的像素点作为中心点/＞，根据中心点/＞构建包含第/＞个疑似区域的面积最小，且边长为奇数的正方形窗口，记为目标窗口；在目标窗口内，从中心点开始，以水平向右为0度，逆时针旋转获得所对应的方向，第/＞个和第/＞个方向上的像素点的相似性的计算公式如下：其中，表示第/＞个和第/＞个方向上的像素点的相似性，/＞表示第/＞个方向上第/＞个像素点的灰度值，/＞表示第/＞个方向上第/＞个像素点的灰度值，/＞表示第/＞个方向上第/＞个像素点的梯度幅值，/＞表示第/＞个方向上第/＞个像素点的梯度幅值，/＞表示/＞的目标窗口内每个方向上的像素点的个数，所述/＞表示第/＞个疑似区域。4.根据权利要求3所述一种纺织品染色质量智能评估方法，其特征在于，所述根据像素点在不同方向上的相似性，获得像素点在一个方向与其他方向上的扩散相似性，包括的具体过程为：在目标窗口内从中心点开始，沿着第/＞个方向，计算所有相邻像素点灰度值的差值的绝对值，将所有相邻像素点的差值的绝对值的均值，记为/＞方向上的像素点灰度变化差异的均值，像素点在/＞方向上与其他方向上的扩散相似性的计算公式为：其中，表示像素点在/＞方向上与其他方向上的扩散相似性，/＞表示第/＞个和第/＞个方向上像素点的相似性，/＞表示方向的个数，/＞表示/＞方向上的像素点灰度变化差异的均值，/＞表示/＞方向上的像素点灰度变化差异的均值。5.根据权利要求1所述一种纺织品染色质量智能评估方法，其特征在于，所述根据像素点在一个方向与其他方向上的扩散相似性，获得疑似区域表现为染色异常的程度，包括的具体步骤为：在每个疑似区域构建的目标窗口内，将像素点在任意两个方向上与其他方向上的扩散相似性的差值的绝对值，记为两个方向上的相似性差异；计算所有方向上的相似性差异的和值，将所述和值的反比例值的归一化值，记为每个疑似区域表现为染色异常的程度。6.根据权利要求3所述一种纺织品染色质量智能评估方法，其特征在于，所述根据疑似区域内像素点之间的距离，获得疑似区域受光照的影响程度，包括的具体步骤为：使用Sobel算子，计算内所有像素点的梯度角度值；将内每一种相同的灰度值记为一个灰度级；计算每个灰度级的所有像素点到中心点的距离的方差，将/＞内所有灰度级的所有像素点到中心点/＞的距离的方差的和值，记为距离方差和；将每个灰度级的所有像素点到中心点的距离均值，记为每个灰度级的距离均值；计算内所有灰度级的距离均值的方差，再计算/＞内所有像素点的梯度角度值的方差与所述距离均值的方差的比值，将所述方差的比值与距离方差和的乘积，记为/＞的受光照的影响程度。7.根据权利要求1所述一种纺织品染色质量智能评估方法，其特征在于，所述根据疑似区域的染色异常的程度和受光照的影响程度，获得疑似区域内像素点的增强系数，包括的具体步骤为：将所有连通区域中像素点数量最多的连通域，记为连通区域；计算疑似区域中所有像素点的灰度均值减去第/＞个疑似区域内第/＞个像素点的灰度值的差值，将所述差值与255的比值，记为灰度差异值；计算第个疑似区域的受光照的影响程度与染色异常的程度的比值，将所述比值的归一化值，记为灰度差异调整值；计算灰度差异值与灰度差异调整值的乘积，将所述乘积加1的和值，记为第个疑似区域内第/＞个像素点的增强系数。8.根据权利要求1所述一种纺织品染色质量智能评估方法，其特征在于，所述根据疑似区域内像素点的增强系数得到增强图像，包括的具体步骤为：根据每个疑似区域内每个像素点的增强系数和每个像素点的灰度值的乘积，获得每个疑似区域内每个像素点增强后的灰度值；在染色灰度图像上，将疑似区域之外的像素点记为正常像素点，将所有疑似区域内所有像素点增强后的灰度值与正常像素点的灰度值构成的图像，记为增强图像。9.根据权利要求1所述一种纺织品染色质量智能评估方法，其特征在于，所述根据增强图像，进行纺织品染色质量评估，包括的具体方法为：通过训练后的分割神经网络得到增强图像中的染色异常区域，染色异常区域的像素点数量记为，增强图像上的像素点数量记为/＞；当小于预设的第一阈值时，判定染色质量优秀；当大于等于预设的第一阈值并且小于预设的第二阈值时，判定染色质量合格；当大于等于预设的第二阈值时，判定染色质量存在缺陷。10.一种纺织品染色质量智能评估系统，包括存储器、处理器以及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1-9任一项所述的一种纺织品染色质量智能评估方法的步骤。
说明书desc
技术领域本发明涉及图像数据处理领域，具体涉及一种纺织品染色质量智能评估方法及系统。背景技术为符合要求或满足市场需求，需要对纺织品进行染色改变其颜色，染色可以为纺织品呈现各种颜色和图案，可以提高纺织品的吸引力和市场竞争力，染色也可以使纺织品呈现多种颜色，从而满足人们对不同色彩的需求，丰富的色彩选择为纺织品在时尚、家居装饰和其他领域中的应用提供了更多可能性，染色质量检测可以检测纺织品中的化学残留物，如染料、助剂或其他化学品。如果纺织品中的化学物质超过了安全标准或有害物质被使用，可能对用户的健康造成潜在风险。因此，对纺织品的染色质量进行评估非常重要。但在染色过程中，存在染色不牢固，颜色可能会褪色或在洗涤过程中渗出，影响产品的外观和美观度，如果染色不均匀或存在色差，纺织品的外观会显得不协调，从而降低产品的质量和价值。现有的问题：对纺织品的染色质量判断通常采用阈值分割的方式获得染色异常的区域，但是由于受到光照的影响导致正常区域与异常区域之间都存在像素点灰度值之间的差异，使得阈值分割时会将正常区域划分为异常，导致欠分割，使得纺织品染色的正常区域检测不准确，从而降低了纺织品染色质量评估的准确性。发明内容本发明提供一种纺织品染色质量智能评估方法及系统，以解决现有的问题。本发明的一种纺织品染色质量智能评估方法及系统采用如下技术方案：本发明一个实施例提供了一种纺织品染色质量智能评估方法，该方法包括以下步骤：采集纺织品染色灰度图像；根据纺织品染色灰度图像中像素点的灰度值差异，确定染色灰度图像中的若干个疑似区域；根据疑似区域构建目标窗口，根据目标窗口内像素点在不同方向下的像素点灰度值差异，获得像素点在不同方向上的相似性；根据像素点在不同方向上的相似性，获得像素点在一个方向与其他方向上的扩散相似性；根据像素点在一个方向与其他方向上的扩散相似性，获得疑似区域表现为染色异常的程度；根据疑似区域内像素点之间的距离，获得疑似区域受光照的影响程度；根据疑似区域的染色异常的程度和受光照的影响程度，获得疑似区域内像素点的增强系数；根据疑似区域内像素点的增强系数得到增强图像；根据增强图像，进行纺织品染色质量评估。进一步地，所述根据纺织品染色灰度图像中像素点的灰度值差异，确定染色灰度图像中的若干个疑似区域，包括的具体步骤为：在纺织品染色灰度图像上，利用区域生长算法获得若干个连通区域；将所有连通区域中像素点数量最多的连通域，记为连通区域；将第个连通区域中所有像素点的灰度均值与纺织品染色灰度图像上的所有像素点的灰度均值的差值绝对值，记为第一差异；将第个连通区域中所有像素点的灰度均值与连通区域/＞中所有像素点的灰度均值的差值绝对值，记为第二差异；将第一差异与第二差异的和值，记为第一特征；计算连通区域中的像素点的数量减去第/＞个连通区域中像素点的数量的差值，将所述数量的差值与第/＞个连通区域中像素点的数量的比值，记为第二特征；计算第个连通区域中所有像素点灰度值的方差，再计算所述方差、第一特征以及第二特征的乘积，将所述乘积的归一化值，记为第/＞个连通区域的异常程度；将异常程度大于预设的异常程度阈值P的连通区域，记为疑似区域。进一步地，所述根据疑似区域构建目标窗口，根据目标窗口内像素点在不同方向下的像素点灰度值差异，获得像素点在不同方向上的相似性，包括的具体步骤为：选择第个疑似区域内灰度值最小的像素点作为中心点/＞，根据中心点/＞构建包含第/＞个疑似区域的面积最小，且边长为奇数的正方形窗口，记为目标窗口；在目标窗口内，从中心点开始，以水平向右为0度，逆时针旋转获得所对应的方向，第/＞个和第/＞个方向上的像素点的相似性的计算公式如下：其中，表示第/＞个和第/＞个方向上的像素点的相似性，/＞表示第/＞个方向上第/＞个像素点的灰度值，/＞表示第/＞个方向上第/＞个像素点的灰度值，/＞表示第/＞个方向上第/＞个像素点的梯度幅值，/＞表示第/＞个方向上第/＞个像素点的梯度幅值，/＞表示绝对值函数，/＞表示/＞的目标窗口内每个方向上的像素点的个数，所述/＞表示第/＞个疑似区域。进一步地，所述根据像素点在不同方向上的相似性，获得像素点在一个方向与其他方向上的扩散相似性，包括的具体过程为：在目标窗口内从中心点开始，沿着第/＞个方向，计算所有相邻像素点灰度值的差值的绝对值，将所有相邻像素点的差值的绝对值的均值，记为/＞方向上的像素点灰度变化差异的均值，像素点在/＞方向上与其他方向上的扩散相似性的计算公式为：其中，表示像素点在/＞方向上与其他方向上的扩散相似性，/＞表示第/＞个和第/＞个方向上像素点的相似性，/＞表示方向的个数，/＞表示/＞方向上的像素点灰度变化差异的均值，表示/＞方向上的像素点灰度变化差异的均值。进一步地，所述根据像素点在一个方向与其他方向上的扩散相似性，获得疑似区域表现为染色异常的程度，包括的具体步骤为：在每个疑似区域构建的目标窗口内，将像素点在任意两个方向上与其他方向上的扩散相似性的差值的绝对值，记为两个方向上的相似性差异；计算所有方向上的相似性差异的和值，将所述和值的反比例值的归一化值，记为每个疑似区域表现为染色异常的程度。进一步地，所述根据疑似区域内像素点之间的距离，获得疑似区域受光照的影响程度，包括的具体步骤为：使用Sobel算子，计算内所有像素点的梯度角度值；将内每一种相同的灰度值记为一个灰度级；计算每个灰度级的所有像素点到中心点的距离的方差，将/＞内所有灰度级的所有像素点到中心点/＞的距离的方差的和值，记为距离方差和；将每个灰度级的所有像素点到中心点的距离均值，记为每个灰度级的距离均值；计算/＞内所有灰度级的距离均值的方差，再计算/＞内所有像素点的梯度角度值的方差与所述距离均值的方差的比值，将所述方差的比值与距离方差和的乘积，记为/＞的受光照的影响程度。进一步地，所述根据疑似区域的染色异常的程度和受光照的影响程度，获得疑似区域内像素点的增强系数，包括的具体步骤为：将所有连通区域中像素点数量最多的连通域，记为连通区域；计算疑似区域中所有像素点的灰度均值减去第/＞个疑似区域内第/＞个像素点的灰度值的差值，将所述差值与255的比值，记为灰度差异值；计算第个疑似区域的受光照的影响程度与染色异常的程度的比值，将所述比值的归一化值，记为灰度差异调整值；计算灰度差异值与灰度差异调整值的乘积，将所述乘积加1的和值，记为第个疑似区域内第/＞个像素点的增强系数。进一步地，所述根据疑似区域内像素点的增强系数得到增强图像，包括的具体步骤为：根据每个疑似区域内每个像素点的增强系数和每个像素点的灰度值的乘积，获得每个疑似区域内每个像素点增强后的灰度值；在染色灰度图像上，将疑似区域之外的像素点记为正常像素点，将所有疑似区域内所有像素点增强后的灰度值与正常像素点的灰度值构成的图像，记为增强图像。进一步地，所述根据增强图像，进行纺织品染色质量评估，包括的具体方法为：通过训练后的分割神经网络得到增强图像中的染色异常区域，染色异常区域的像素点数量记为，增强图像上的像素点数量记为/＞；当小于预设的第一阈值时，判定染色质量优秀；当大于等于预设的第一阈值并且小于预设的第二阈值时，判定染色质量合格；当大于等于预设的第二阈值时，判定染色质量存在缺陷。本发明还提出了一种纺织品染色质量智能评估系统，包括存储器、处理器以及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述存储器存储的计算机程序，以实现前述所述的一种纺织品染色质量智能评估方法的步骤。本发明的技术方案的有益效果是：采集纺织品染色灰度图像，确定染色灰度图像中的若干个疑似区域，提高了纺织品染色质量评估的准确性；根据疑似区域构建目标窗口，根据目标窗口内像素点在不同方向下的像素点灰度值差异，获得像素点在不同方向上的相似性，根据像素点在不同方向上的相似性，获得像素点在一个方向与其他方向上的扩散相似性，根据像素点在一个方向与其他方向上的扩散相似性，获得疑似区域表现为染色异常的程度，进一步提高纺织品染色质量评估的准确性；根据疑似区域内像素点之间的距离，获得疑似区域受光照的影响程度；根据疑似区域的染色异常的程度和受光照的影响程度，获得疑似区域内像素点的增强系数；根据疑似区域内像素点的增强系数得到增强图像；根据增强图像，进行纺织品染色质量评估，减小光照异常的区域与正常区域之间的差异，提高阈值分割判断的准确性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明的一种纺织品染色质量智能评估方法的步骤流程图；图2为本实施例所提供的一个纺织品染色灰度图像；图3为本实施例所提供的一个传统的纺织品染色线性增强图像；图4为本实施例所提供的一个传统的纺织品染色线性增强图像的分割图像；图5为本实施例所提供的一个本发明的纺织品染色增强图像；图6为本实施例所提供的一个本发明的纺织品染色增强图像的分割图像；图7为本实施例所提供的一个染色质量评估的结果的获取流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种纺织品染色质量智能评估方法及系统，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种纺织品染色质量智能评估方法及系统的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种纺织品染色质量智能评估方法的步骤流程图，该方法包括以下步骤：步骤S001：采集纺织品染色灰度图像；根据纺织品染色灰度图像中像素点的灰度值差异，确定染色灰度图像中的若干个疑似区域。需要说明的是，对纺织品的染色质量判断通常采用阈值分割的方式获得染色异常的区域，但是由于受到光照的影响导致正常区域与异常区域之间都存在像素点灰度值之间的差异，使得阈值分割时会将正常区域划分为异常，导致欠分割。为此，本实施例提出了一种纺织品染色质量智能评估方法，需要说明的是，同一颜色在图像中拥有相近的灰度值，出现染色异常导致像素点的灰度值出现一定程度的偏离，但是染色异常通常是局部性质的，出现异常的区域的像素点数量偏少，正常区域内像素点的数量占据绝大部分，进而确定图像中的疑似区域。具体的，为了实现本实施例提出的一种纺织品染色质量智能评估方法，首先需要采集纺织品染色图像并预处理，具体过程为：线阵CCD相机适用于可见光范围的图像捕捉，可以有效地检测和分析纺织品染料的颜色信息，并且线阵CCD相机可以得到高分辨率的图像能够更清晰，颜色表示更准确，因此固定线阵CCD相机，拍摄获取纺织品染色图像，并对获得的纺织品染色图像进行灰度化处理，得到纺织品染色灰度图像。图2为本实施例所提供的一个纺织品染色灰度图像。进一步，利用区域生长算法获得纺织品染色区域图像中的若干个连通区域，其中，区域生长算法为公知技术，具体方法在此不做介绍，计算每一个连通区域中像素点的平均灰度值与纺织品染色灰度图像的平均灰度值之间的差异，每一个连通区域中像素点的平均灰度值与纺织品染色灰度图像的平均灰度值之间的差异越大，则该连通区域的异常程度越大，像素点数量最多的连通区域的像素点的平均灰度值与纺织品染色灰度图像的平均灰度值差异越大，则该连通区域异常的程度越大，连通区域中像素点数量越少，该连通区域的异常度程度越大，连通区域的灰度值方差越大，则连通区域的异常程度越大。以第个连通区域为例，得到第/＞个连通区域异常程度的计算公式为：其中，表示第/＞个连通区域的异常程度，/＞表示第/＞个连通区域中所有像素点灰度值的方差，/＞表示第/＞个连通区域中所有像素点的灰度均值，/＞表示纺织品染色灰度图像上的所有像素点的灰度均值，/＞表示所有连通区域中像素点数量最多的连通区域/＞中所有像素点的灰度均值，/＞表示所有连通区域中像素点数量最多的连通区域/＞中的像素点的数量，/＞表示第/＞个连通区域中像素点的数量，/＞表示绝对值函数，/＞为以自然常数为底的指数函数，本实施例以/＞来呈现反比例关系及归一化处理，则/＞表示归一化处理，实施者可根据实际情况设置反比例函数及归一化函数，/＞越大说明该连通区域中像素点之间的灰度差异越大，存在表现异常的像素点可能性越大，异常程度越大，为第一差异，/＞为第二差异，/＞为第一特征，第一特征体现了第/＞个连通区域与纺织品染色灰度图像和连通区域/＞之间的灰度值差异，差异越大说明第/＞个连通区域中像素点与表现纺织品染色正常区域之间的差异越大，异常程度越大，/＞为第二特征，第二特征体现了第/＞个连通区域和第/＞个连通区域中像素点数量的变化率，变化率越大说明像素点的数量差异越明显，异常程度越大，因此用/＞与以及/＞的乘积的归一化值，表示第/＞个连通区域的异常程度。根据上述方式，获得每一个连通区域的异常程度大小。本实施例预设的异常程度阈值，以此为例进行叙述，其它实施方式中可设置为其它值，本实施例不进行限定，将每一个连通区域的异常程度与预设的异常程度阈值/＞进行对比，将连通区域异常程度大于异常程度阈值/＞的连通区域标记出来，获得若干个区域，则这若干个区域为染色图像中的疑似区域。至此，通过上述方法得到染色灰度图像中的若干个疑似区域。步骤S002：根据疑似区域构建目标窗口，根据目标窗口内像素点在不同方向下的像素点灰度值差异，获得像素点在不同方向上的相似性；根据像素点在不同方向上的相似性，获得像素点在一个方向与其他方向上的扩散相似性；根据像素点在一个方向与其他方向上的扩散相似性，获得疑似区域表现为染色异常的程度。需要说明的是，由于纺织品染色过程中可能会出现染料吸附或固定在纤维上，从而在某些区域过度聚集，导致局部灰度值偏小；染料从密度大的区域向着四周扩散，在各个方向上都呈现出相同的变化趋势，向四周的扩散速率相近，从而图像中各个方向上灰度值的变化趋势越相近。具体的，选择其中第个疑似区域记为/＞，选择/＞中灰度值最小的像素点记为/＞，以为区域的中心构建包含疑似区域/＞的面积最小，且边长为奇数的正方形窗口，记为目标窗口，以/＞为起点，以水平向右为0度方向，逆时针旋转获得所对应的方向，以任意两方向为例，其相似性的计算公式如下：其中，表示第/＞个和第/＞个方向上的像素点的相似性，/＞表示第/＞个方向上第/＞个像素点的灰度值，/＞表示第/＞个方向上第/＞个像素点的灰度值，/＞表示第/＞个方向上第/＞个像素点的梯度幅值，/＞表示第/＞个方向上第/＞个像素点的梯度幅值，/＞表示第/＞个像素点在第/＞两个方向上的灰度差异，/＞表示第/＞个像素点在第/＞两个方向上的梯度幅值差异，/＞表示绝对值函数，/＞防止分母为0，/＞表示疑似区域/＞的目标窗口内每个方向上的像素点的个数，所述像素点的梯度幅值利用Sobel算子求取。根据上述方式，获得每个疑似区域目标窗口内每个方向上像素点的相似性。在目标窗口内，以方向为例，在/＞方向上，相邻两个像素点的灰度值的差值的绝对值，计算所有相邻像素点的灰度值的差值的绝对值的均值，为/＞方向上的像素点灰度变化差异的均值记为/＞，按照上述方式，得到每个方向上的像素点灰度变化差异的均值，在/＞方向上的像素点灰度变化差异的均值记为/＞。进一步，根据像素点在方向上的相似性大小，获得像素点在/＞方向上与其他方向上的扩散相似性，计算公式如下：其中，表示像素点在/＞方向上与其他方向上的扩散相似性，/＞表示/＞方向上像素点的相似性，/＞表示方向的个数。根据上述方式，获得每个疑似区域内每个像素点的某个方向和其他方向上的扩散相似性。进一步，根据像素点在一个方向上与其他方向上的扩散相似性，获得疑似区域所构成窗口表现为染色异常的程度，计算公式如下：其中，表示/＞表现为染色异常的程度，/＞表示像素点在/＞方向上与其他方向上的扩散相似性，/＞表示/＞方向上的相似性差异，/＞表示绝对值函数，/＞为以自然常数为底的指数函数，本实施例以/＞来呈现反比例关系及归一化处理，实施者可根据实际情况设置反比例函数及归一化函数，差异越大表明异常区域/＞的在/＞方向上表现出的扩散程度差异越大，向四周扩散的程度不同，表现为染色异常的程度越小。根据上述方式，获得每个疑似区域所构成窗口表现为染色异常的程度。至此，通过上述方法得到每个疑似区域所构成方形窗口表现为染色异常的程度。步骤S003：根据疑似区域内像素点之间的距离，获得疑似区域受光照的影响程度。需要说明的是，由于线阵CCD相机对光照条件敏感，使得细微的光照变化都能导致纺织品的染色图像上拥有较大的灰度差异，并且反光现象在局部区域中存在，反光区域也在图像中表现为异常区域，区域内像素点的灰度变化不明显，且该区域邻域内像素点的灰度变化维持稳定，像素点在各个方向上表现出较强的相似性，从而导致该区域的染色异常程度偏大，但实际上该区域为正常区域，从而出现对染色质量造成误判，因此，仅仅利用区域邻域内像素点具有相似性不能有效排除光照带来的干扰，故利用染色异常的像素点灰度值变化具有一定的方向性，离染料聚集区域的距离越近灰度值越大；而反光区域会导致整个局部拥有较大的灰度值，灰度值基本维持稳定，出现灰度值向四周渐变的可能性小。具体的，使用Sobel算子，获取每个疑似区域内所有像素点的梯度角度值，计算每个疑似区域内所有像素点的梯度角度值的方差，计算内同一灰度级的像素点到像素点/＞之间的距离，在/＞内，统计不同的灰度值，将每一种相同的灰度值记为一个灰度级，计算每个灰度级的所有像素点到/＞的距离均值记为每个灰度级的距离均值/＞，灰度级为/＞的所有像素点到/＞的距离方差记为/＞，利用像素点灰度值与距离之间的关系确定区域的异常是否因为反光造成的，构建公式如下：其中，表示/＞的受光照的影响程度，/＞表示/＞内所有像素点的梯度角度值的方差，/＞表示区域/＞内所有灰度级的距离均值的方差，方差越小则区域向四周扩散且都存在灰度渐变的可能性越大，表现为受光照影响导致出现异常的程度越小，受光照的影响程度小，/＞表示/＞内灰度值的种类数量，/＞为/＞内第/＞个灰度级的所有像素点到/＞的距离的方差。/＞为距离方差和。通过以上步骤，获得疑似区域受光照的影响程度。步骤S004、根据疑似区域的染色异常的程度和受光照的影响程度，获得疑似区域内像素点的增强系数。具体的，利用区域的异常程度和受光照的影响程度确定像素点的增强系数，公式如下：其中，表示/＞内第/＞个像素点的增强系数，/＞表示/＞受光照的影响程度，表示/＞函数，用于归一化处理，/＞表示/＞表现为染色异常的程度，/＞表示所有疑似区域中像素点数量最多的疑似区域/＞中像素点的灰度均值，/＞表示/＞内像第个像素点的灰度值。/＞为灰度差异值，/＞为灰度差异调整值。按照上述方式，获得每个疑似区域的目标窗口内每个像素点的增强系数。步骤S005、根据疑似区域内像素点的增强系数得到增强图像；根据增强图像，进行纺织品染色质量评估。具体的，根据每个像素点的增强系数对图像进行增强，增强计算公式为：其中，表示第/＞个疑似区域内第/＞个像素点增强后的灰度值，/＞表示第个疑似区域内第/＞个像素点的增强系数，/＞表示第/＞个疑似区域内第/＞个像素点的灰度值。按照上述方式，得到染色灰度图像上每个疑似区域内所有像素点增强后的灰度值，在染色灰度图像上，将非疑似区域内的像素点记为正常像素点，根据疑似区域增强后像素点的灰度值与正常像素点的灰度值构成增强图像，本发明实施例采用分割神经网络来识别分割增强图像中的染色异常区域。分割神经网络的相关内容如下：本实施例使用的分割神经网络为Mask R-CNN神经网络；使用的数据集为增强图像数据集。其中Mask R-CNN为公知技术，具体方法在此不做介绍。Mask R-CNN的中文全称是“掩膜区域卷积神经网络”，英文全称是“Mask Region-based Convolutional NeuralNetwork”。需要分割的像素点，共分为2类，即训练集对应标签标注过程为：单通道的语义标签，对应位置像素点属于正常区域的标注为0，属于染色异常区域的标注为1。网络的任务是分类，所以使用的loss函数为交叉熵损失函数。使用训练后的分割神经网络分割增强图像中的染色异常区域。通过分割神经网络得到增强图像中的染色异常区域，此过程为公知技术，具体方法在此不做介绍，染色异常区域的像素点数量记为，增强图像的像素点数量记为/＞，本实施例预设的第一阈值为/＞，预设的第二阈值为/＞，以此为例进行叙述，其它实施方式中可设置为其它值，本实施例不进行限定。图3为本实施例所提供的一个传统的纺织品染色线性增强图像；图4为本实施例所提供的一个传统的纺织品染色线性增强图像的分割图像；图5为本实施例所提供的一个本发明的纺织品染色增强图像；图6为本实施例所提供的一个本发明的纺织品染色增强图像的分割图像。所需说明的是：纺织品染色灰度图像在图3中表现出了一定的对比度增强，但未能减小光照影响，从而导致图4中的异常区域分割效果较差。而图5中减小光照影响，从而导致图6中的异常区域分割效果较好。当小于预设的第一阈值时，判定染色质量优秀；当大于等于预设的第一阈值并且小于预设的第二阈值时，判定染色质量合格；当大于等于预设的第二阈值时，判定染色质量存在缺陷；至此，完成纺织品染色质量智能评估方法。染色质量评估的结果的获取流程图如图7所示。本发明的另一个实施例提供了一种纺织品染色质量智能评估系统，所述系统包括存储器和处理器，所述处理器执行所述存储器存储的计算机程序时，执行以下操作：采集纺织品染色灰度图像；根据纺织品染色灰度图像中像素点的灰度值差异，确定染色灰度图像中的若干个疑似区域；根据疑似区域构建目标窗口，根据目标窗口内像素点在不同方向下的像素点灰度值差异，获得像素点在不同方向上的相似性；根据像素点在不同方向上的相似性，获得像素点在一个方向与其他方向上的扩散相似性；根据像素点在一个方向与其他方向上的扩散相似性，获得疑似区域表现为染色异常的程度；根据疑似区域内像素点之间的距离，获得疑似区域受光照的影响程度；根据疑似区域的染色异常的程度和受光照的影响程度，获得疑似区域内像素点的增强系数；根据疑似区域内像素点的增强系数得到增强图像；根据增强图像，进行纺织品染色质量评估。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
