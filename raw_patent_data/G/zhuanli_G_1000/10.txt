标题title
一种齿轮表面毛刺高精度视觉检测方法
摘要abst
本发明涉及齿轮毛刺检测技术领域，具体涉及一种齿轮表面毛刺高精度视觉检测方法。该方法获取齿轮边缘图像中所有连通图的齿轮节点；通过齿轮节点局部的边缘特征获得局部规整特征，进而获得邻域范围内齿轮节点的局部分布特征与局部特征相似节点；获得局部特征相似节点的位置分布特征，进而获得齿轮节点的信息携带程度；利用信息携带程度对连通图内相邻两个齿轮节点的分裂阈值进行分析，得到分裂阈值的修正参数，进而获得修正分裂阈值，再进行连通图动态分裂聚类，根据聚类簇内的齿轮节点分布进行毛刺检测。本发明对分裂阈值进行修正，避免一个完整的毛刺区域被划分到不同的簇类中，提高了毛刺检测的准确度。
权利要求书clms
1.一种齿轮表面毛刺高精度视觉检测方法，其特征在于，所述方法包括：获得齿轮表面的边缘图像；将所有边缘像素点作为连通图内的齿轮节点；根据每个齿轮节点局部范围的边缘形状特征获得每个齿轮节点的局部规整特征；根据齿轮节点预设邻域范围内的局部规整特征变化特征，获得每个齿轮节点邻域范围内所有齿轮节点的局部分布特征；根据齿轮节点的局部规整特征，获得每个齿轮节点的所有局部特征相似节点；获得每个齿轮节点的所有局部特征相似节点的位置分布特征；根据每个齿轮节点在邻域范围内的局部分布特征与每个齿轮节点的局部特征相似节点的位置分布特征，获得每个齿轮节点的信息携带程度；根据连通图内相邻两个齿轮节点的所述信息携带程度与连通图内连通性分布特征，获得相邻两个齿轮节点之间分裂阈值的修正参数；利用所述修正参数获得相邻两个齿轮节点的修正分裂阈值；根据所述修正分裂阈值对齿轮表面的所述边缘图像进行连通图动态分裂聚类算法，获得所有齿轮节点聚类簇；利用所述齿轮节点聚类簇内齿轮节点的分布特征，对齿轮的毛刺进行检测；所述修正参数的获取方法包括：根据修正参数计算公式获取所述修正参数；所述修正参数计算公式如下所示：；式中，/＞表示第/＞个齿轮节点与第/＞个齿轮节点之间分裂阈值的修正参数；/＞表示第/＞个齿轮节点的信息携带程度；/＞表示第/＞个齿轮节点的信息携带程度；/＞表示第/＞个齿轮节点和每个其他齿轮节点之间的连线长度与第/＞个齿轮节点和每个其他齿轮节点之间的连线长度的方差；/＞表示归一化函数；所述修正分裂阈值的获取方法包括：将所述修正参数进行负相关映射获得分裂阈值权重；将连通图动态分裂聚类算法中相邻两个齿轮节点之间的分裂阈值与所述分裂阈值权重之间的乘积作为所述修正分裂阈值。2.根据权利要求1所述的一种齿轮表面毛刺高精度视觉检测方法，其特征在于，所述局部规整特征的获取方法包括：根据每个齿轮节点局部范围内的边缘形状特征，获得每个齿轮节点局部范围内预设数量个局部参考节点；将所有所述局部参考节点拟合为一条节点分布曲线段；将所述节点分布曲线段上除去端点的每个局部参考节点的切线斜率作为第一斜率；将所述节点分布曲线段上除去端点的每个局部参考节点与后一个局部参考节点之间的距离作为第一距离；将所有所述第一斜率与所述第一距离之间的乘积的方差进行负相关映射并归一化处理，作为每个齿轮节点的节点局部特征；将所述节点分布曲线段上任意两个所述局部参考节点之间的距离最大值作为每个齿轮节点的局部最大跨度；将所述节点局部特征与所述局部最大跨度之间的乘积进行归一化处理，获得每个齿轮节点的局部规整特征。3.根据权利要求2所述的一种齿轮表面毛刺高精度视觉检测方法，其特征在于，所述局部参考节点的获取方法包括：任选一个齿轮节点作为顶点，在所述顶点预设邻域范围内选取与所述顶点组成的夹角最大的两个齿轮节点作为对应齿轮节点的局部参考节点；以每个局部参考节点为新的顶点，重复局部参考节点选取操作，直至局部参考节点的数量满足预设数量，获得对应齿轮节点的局部参考节点。4.根据权利要求1所述的一种齿轮表面毛刺高精度视觉检测方法，其特征在于，所述局部分布特征的获取方法包括：将每个齿轮节点的局部规整特征与邻域范围内每个其他齿轮节点的局部规整特征之间的差异作为每个齿轮节点与邻域范围内每个其他齿轮节点的局部规整差异；将每个齿轮节点与邻域范围内每个其他齿轮节点之间的距离的倒数作为每个齿轮节点与邻域范围内每个其他齿轮节点的距离系数；将每个齿轮节点与邻域范围内每个其他齿轮节点的所述局部规整差异与所述距离系数的乘积求平均，获得每个齿轮节点邻域范围内所有齿轮节点的局部分布特征。5.根据权利要求4所述的一种齿轮表面毛刺高精度视觉检测方法，其特征在于，所述局部特征相似节点的获取方法包括：在每个齿轮节点的邻域范围内，将与每个齿轮节点所述局部规整差异小于预设第一阈值的所有齿轮节点作为每个齿轮节点的局部特征相似节点。6.根据权利要求1所述的一种齿轮表面毛刺高精度视觉检测方法，其特征在于，所述位置分布特征的获取方法包括：获取齿轮表面的边缘图像中的齿轮圆心位置；计算每个齿轮节点到所述齿轮圆心位置之间的距离作为节点半径；计算每个齿轮节点的所有局部特征相似节点到所述齿轮圆心位置之间的距离作为特征节点半径；计算齿轮节点的节点半径与每个局部特征相似节点的特征节点半径之间差值的方差作为节点半径方差；以所述齿轮圆心位置为顶点，获得邻域范围内每个局部特征相似节点与每个其他局部特征相似节点之间的最小夹角，计算所有所述最小夹角之间的方差作为最小夹角方差；将所述节点半径方差与所述最小夹角方差之间的乘积作为局部特征相似节点的位置分布特征。7.根据权利要求1所述的一种齿轮表面毛刺高精度视觉检测方法，其特征在于，所述信息携带程度的获取方法包括：将每个齿轮节点邻域范围内所有齿轮节点的所述局部分布特征，与每个齿轮节点邻域范围内局部特征相似节点的位置分布特征之间的乘积，进行负相关映射并归一化处理，获得每个齿轮节点的信息携带程度。8.根据权利要求1所述的一种齿轮表面毛刺高精度视觉检测方法，其特征在于，利用所述齿轮节点聚类簇内齿轮节点的分布特征，对齿轮的毛刺进行检测，包括：将所述齿轮节点聚类簇内齿轮节点的数量与连通图区域的面积的比值作为簇内节点分布特征；将齿轮节点聚类簇内所有齿轮节点之间的连线长度的方差作为簇内混乱程度；将所述簇内节点分布特征与所述簇内混乱程度之间的乘积归一化获得每个齿轮节点聚类簇作为包含毛刺的齿轮节点聚类簇的毛刺存在概率；预设第二阈值，所述毛刺存在概率大于所述第二阈值的齿轮节点聚类簇认为存在毛刺。
说明书desc
技术领域本发明涉及齿轮毛刺检测技术领域，具体涉及一种齿轮表面毛刺高精度视觉检测方法。背景技术齿轮作为重要的机械结构设施，齿轮的精度问题会严重的影响设备整体机械结构的精度和稳定。齿轮在加工过程中会出现由于操作不当，或者金属材料具备延展性、韧性和可塑性等特性，使金属在加工时会发生不均匀的变形，导致齿轮表面产生毛刺。齿轮加工过程中产生的毛刺会对齿轮的使用产生不利的影响。为了避免齿轮表面毛刺产生的不利影响，可以对齿轮表面的边缘图像进行分析，检测出齿轮表面毛刺，以便于对毛刺进行进一步的处理。在现有技术中，通常使用连通图动态分裂聚类算法对齿轮表面边缘图像进行簇类划分，将毛刺区域划分到同一个聚类簇中，分析聚类簇中连通图的分布来判断齿轮表面毛刺分布情况。然而在对聚类簇进行划分时，由于毛刺区域一般处于齿轮的边界处，破坏了齿轮表面的结构，导致算法获取的连通图部分区域连通混乱，在进行分裂时容易导致一个完整的毛刺区域被划分到不同的簇类中，影响后续对毛刺区域的识别检测的准确性。发明内容为了解决使用连通图动态分裂聚类算法对齿轮表面边缘图像进行簇类划分时，会因为齿轮表面结构被破坏，导致算法获取的连通图部分区域连通混乱，在进行分裂时容易导致一个完整的毛刺区域被划分到不同的簇类中，影响后续对毛刺区域的识别检测的准确性的技术问题，本发明的目的在于提供一种齿轮表面毛刺高精度视觉检测方法，所采用的技术方案具体如下：一种齿轮表面毛刺高精度视觉检测方法，所述方法包括：获得齿轮表面的边缘图像；将所有边缘像素点作为连通图内的齿轮节点；根据每个齿轮节点局部范围的边缘形状特征获得每个齿轮节点的局部规整特征；根据齿轮节点预设邻域范围内的局部规整特征变化特征，获得每个齿轮节点邻域范围内所有齿轮节点的局部分布特征；根据齿轮节点的局部规整特征，获得每个齿轮节点的所有局部特征相似节点；获得每个齿轮节点的所有局部特征相似节点的位置分布特征；根据每个齿轮节点在邻域范围内的局部分布特征与每个齿轮节点的局部特征相似节点的位置分布特征，获得每个齿轮节点的信息携带程度；根据连通图内相邻两个齿轮节点的所述信息携带程度与连通图内连通性分布特征，获得相邻两个齿轮节点之间分裂阈值的修正参数；利用所述修正参数获得相邻两个齿轮节点的修正分裂阈值；根据所述修正分裂阈值对齿轮表面的所述边缘图像进行连通图动态分裂聚类算法，获得所有齿轮节点聚类簇；利用所述齿轮节点聚类簇内齿轮节点的分布特征，对齿轮的毛刺进行检测。进一步地，所述局部规整特征的获取方法包括：根据每个齿轮节点局部范围内的边缘形状特征，获得每个齿轮节点局部范围内预设数量个局部参考节点；将所有所述局部参考节点拟合为一条节点分布曲线段；将所述节点分布曲线段上除去端点的每个局部参考节点的切线斜率作为第一斜率；将所述节点分布曲线段上除去端点的每个局部参考节点与后一个局部参考节点之间的距离作为第一距离；将所有所述第一斜率与所述第一距离之间的乘积的方差进行负相关映射并归一化处理，作为每个齿轮节点的节点局部特征；将所述节点分布曲线段上任意两个所述局部参考节点之间的距离最大值作为每个齿轮节点的局部最大跨度；将所述节点局部特征与所述局部最大跨度之间的乘积进行归一化处理，获得每个齿轮节点的局部规整特征。进一步地，所述局部参考节点的获取方法包括：任选一个齿轮节点作为顶点，在所述顶点预设邻域范围内选取与所述顶点组成的夹角最大的两个齿轮节点作为对应齿轮节点的局部参考节点；以每个局部参考节点为新的顶点，重复局部参考节点选取操作，直至局部参考节点的数量满足预设数量，获得对应齿轮节点的局部参考节点。进一步地，所述局部分布特征的获取方法包括：将每个齿轮节点的局部规整特征与邻域范围内每个其他齿轮节点的局部规整特征之间的差异作为每个齿轮节点与邻域范围内每个其他齿轮节点的局部规整差异；将每个齿轮节点与邻域范围内每个其他齿轮节点之间的距离的倒数作为每个齿轮节点与邻域范围内每个其他齿轮节点的距离系数；将每个齿轮节点与邻域范围内每个其他齿轮节点的所述局部规整差异与所述距离系数的乘积求平均，获得每个齿轮节点邻域范围内所有齿轮节点的局部分布特征。进一步地，所述局部特征相似节点的获取方法包括：在每个齿轮节点的邻域范围内，将与每个齿轮节点所述局部规整差异小于预设第一阈值的所有齿轮节点作为每个齿轮节点的局部特征相似节点。进一步地，所述位置分布特征的获取方法包括：获取齿轮表面的边缘图像中的齿轮圆心位置；计算每个齿轮节点到所述齿轮圆心位置之间的距离作为节点半径；计算每个齿轮节点的所有局部特征相似节点到所述齿轮圆心位置之间的距离作为特征节点半径；计算齿轮节点的节点半径与每个局部特征相似节点的特征节点半径之间差值的方差作为节点半径方差；以所述齿轮圆心位置为顶点，获得邻域范围内每个局部特征相似节点与每个其他局部特征相似节点之间的最小夹角，计算所有所述最小夹角之间的方差作为最小夹角方差；将所述节点半径方差与所述最小夹角方差之间的乘积作为局部特征相似节点的位置分布特征。进一步地，所述信息携带程度的获取方法包括：将每个齿轮节点邻域范围内所有齿轮节点的所述局部分布特征，与每个齿轮节点邻域范围内局部特征相似节点的位置分布特征之间的乘积，进行负相关映射并归一化处理，获得每个齿轮节点的信息携带程度。进一步地，所述修正参数的获取方法包括：根据修正参数计算公式获取所述修正参数；所述修正参数计算公式如下所示：；式中，/＞表示第/＞个齿轮节点与第/＞个齿轮节点之间分裂阈值的修正参数；/＞表示第/＞个齿轮节点的信息携带程度；/＞表示第个齿轮节点的信息携带程度；/＞表示第/＞个齿轮节点和每个其他齿轮节点之间的连线长度与第/＞个齿轮节点和每个其他齿轮节点之间的连线长度的方差；/＞表示归一化函数。进一步地，所述修正分裂阈值的获取方法包括：将所述修正参数进行负相关映射获得分裂阈值权重；将连通图动态分裂聚类算法中相邻两个齿轮节点之间的分裂阈值与所述分裂阈值权重之间的乘积作为所述修正分裂阈值。进一步地，利用所述齿轮节点聚类簇内齿轮节点的分布特征，对齿轮的毛刺进行检测，包括：将所述齿轮节点聚类簇内齿轮节点的数量与连通图区域的面积的比值作为簇内节点分布特征；将齿轮节点聚类簇内所有齿轮节点之间的连线长度的方差作为簇内混乱程度；将所述簇内节点分布特征与所述簇内混乱程度之间的乘积归一化获得每个齿轮节点聚类簇作为包含毛刺的齿轮节点聚类簇的毛刺存在概率；预设第二阈值，所述毛刺存在概率大于所述第二阈值的齿轮节点聚类簇认为存在毛刺。本发明具有如下有益效果：本发明获得齿轮表面的边缘图像，将所有边缘像素点作为齿轮节点；根据每个齿轮节点局部范围的边缘形状特征获得每个齿轮节点的局部规整特征，若某个齿轮节点局部范围边缘形状特征越平缓，该齿轮节点局部范围内形状越规整，齿轮节点局部范围边缘形状特征越尖锐，局部范围的规整度越差；根据齿轮节点预设邻域范围内的局部规整特征变化特征，获得每个齿轮节点邻域范围内所有齿轮节点的局部分布特征，通过每个齿轮节点邻域范围内齿轮节点局部规整特征的变化，可以反映出每个齿轮节点邻域范围内所有齿轮节点的分布情况；获得每个齿轮节点的位置分布特征，反映每个齿轮节点邻域范围内齿轮表面的边缘形状特征；根据每个齿轮节点在邻域范围内的局部分布特征与每个齿轮节点的局部特征相似节点的位置分布特征，获得每个齿轮节点的信息携带程度，反映了齿轮节点作为正常齿轮表面边缘像素点的可能性；由于两个相邻齿轮节点的信息携带程度差异越大，且连通图内节点分布越混乱，分裂阈值应该越小，此时要对原有的分裂阈值进行修正，所以根据连通图内相邻两个齿轮节点的信息携带程度与连通图内齿轮节点的分布特征，获得相邻两个齿轮节点之间分裂阈值的修正参数，进而获得修正分裂阈值，利用修正分裂阈值使用连通图动态分裂聚类算法，获得所有齿轮节点聚类簇；利用齿轮节点聚类簇内齿轮节点的分布特征，对齿轮的毛刺进行检测。本发明通过对分裂阈值进行修正，能够通过连通图动态分裂聚类算法获得精确的齿轮节点聚类簇，避免一个完整的毛刺区域被划分到不同的簇类中，提高了毛刺检测的准确度。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例所提供的一种齿轮表面毛刺高精度视觉检测方法流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种齿轮表面毛刺高精度视觉检测方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种齿轮表面毛刺高精度视觉检测方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种齿轮表面毛刺高精度视觉检测方法流程图，该方法包括：步骤S1：获得齿轮表面的边缘图像；将所有边缘像素点作为连通图内的齿轮节点。本发明实施例提供了一种齿轮表面毛刺高精度视觉检测方法，针对于齿轮表面毛刺进行检测，由于齿轮表面毛刺通常出现于齿轮的边界，所以需要首先获取齿轮表面的边缘图像。由于毛刺的存在会导致齿轮边界的结构发生改变，此时毛刺出现的区域边缘分布会与齿轮边界其他正常区域的边缘分布存在较大差别，所以需要对边缘图像上的所有边缘像素点进行分析，在连通图动态分裂聚类算法中，将每个边缘像素点作为连通图区域内的节点，所以将所有边缘像素点作为齿轮节点。本发明一个实施例中，对齿轮表面图像进行灰度化处理，并采用Canny算子边缘检测算法对获取的灰度图像进行边缘信息提取，获得齿轮表面的边缘图像。需要说明的是，在本发明其他实施例中，还可以采用其他边缘检测算法进行边缘信息提取，且边缘检测算法为本领域技术人员熟知的技术手段，在此不做限定及赘述。步骤S2：根据每个齿轮节点局部范围的边缘形状特征获得每个齿轮节点的局部规整特征。在齿轮表面不存在毛刺的情况下，齿轮边界的形状非常规整，齿轮上的每个齿的形状和分布均呈现一致性，并且每个齿的边缘清晰，齿轮表面比较光滑，若某个齿轮节点局部范围边缘形状特征越平缓，该齿轮节点局部范围内形状越规整。当齿轮表面存在毛刺时，在齿轮表面毛刺区域内的边缘分布会比较混乱，齿轮表面局部结构也会发生改变，齿轮节点局部范围边缘形状特征越尖锐，在该齿轮节点局部范围内越有可能存在毛刺，局部范围的规整度越差。所以本发明实施例中，根据每个齿轮节点局部范围的边缘形状特征获得每个齿轮节点的局部规整特征。优选地，本发明一个实施例中，局部规整特征的获取方法包括：为了对每个齿轮节点局部的形状特征进行分析，因此在每个齿轮节点局部范围内选取一些齿轮节点，并且这些齿轮节点能够反映齿轮节点局部范围内的边缘形状特征，所以根据每个齿轮节点局部范围内的边缘形状特征，获得每个齿轮节点局部范围内预设数量个局部参考节点；为了更加直观地反映每个齿轮节点局部范围内边缘形状特征，所以将所有局部参考节点拟合为一条节点分布曲线段，通过观察节点分布曲线段的波动情况分析每个齿轮节点局部范围的边缘形状特征；将节点分布曲线段上除去端点的每个局部参考节点的切线斜率作为第一斜率，第一斜率越大，说明该局部参考节点在节点分布曲线段内变化越突出；将节点分布曲线段上除去端点的每个局部参考节点与后一个局部参考节点之间的距离作为第一距离，第一距离越大，说明局部参考节点分布越离散；将所有第一斜率与第一距离之间的乘积的方差进行负相关映射并归一化处理，作为每个齿轮节点的节点局部特征，其中第一距离与第一斜率的乘积能够反映每个局部参考节点在节点分布曲线段上的分布特征，第一距离与第一斜率乘积的方差越大，此时节点分布曲线段内所有局部参考节点的第一距离与第一斜率的变化较为频繁，此时在节点分布曲线段中局部参考节点的分布越混乱，第一距离与第一斜率乘积的方差越小，此时节点分布曲线段内所有局部参考节点的第一距离与第一斜率较为相似，在节点分布曲线段中局部参考节点的分布越均匀；由于实际情况中拟合而来的节点分布曲线段可能会呈现团状曲线的结构，会导致曲线平滑但曲线无法反映齿轮中边缘形状，所以将节点分布曲线段上任意两个局部参考节点之间的距离最大值作为每个齿轮节点的局部最大跨度，局部跨度越大，说明节点分布曲线段延展性越好，越不可能呈现团状曲线的结构；将节点局部特征与局部最大跨度之间的乘积进行归一化处理，获得每个齿轮节点的局部规整特征。本发明一个实施例中，局部规整特征计算公式如下所示：式中，表示第/＞个齿轮节点的局部规整特征；/＞表示第/＞个齿轮节点的节点分布曲线段上除去端点第/＞个局部参考节点的第一斜率；/＞表示第/＞个齿轮节点的节点分布曲线段上除去端点第/＞个局部参考节点与第/＞个局部参考节点之间的欧式距离；/＞表示第/＞个齿轮节点的节点分布曲线段上任意两个局部参考节点之间的欧式距离；/＞表示第/＞个齿轮节点的节点局部特征；/＞表示第/＞个齿轮节点的局部最大跨度；/＞表示归一化函数；/＞表示方差函数；/＞表示以自然常数为底数的指数函数；/＞表示最大值函数。其中，第/＞个齿轮节点的节点分布曲线段上除去端点第/＞个局部参考节点的切线斜率可以通过导数进行计算，在此不再进行赘述；且本实施例中归一化函数/＞均采用最小-最大归一化方法，在此不做限定。在局部规整特征计算公式中，第一斜率采用每个局部参考节点在节点分布曲线段上的切线斜率，切线斜率越大，说明局部参考节点在节点分布曲线段内的变化越突出；第个齿轮节点的节点分布曲线段上除去端点第/＞个局部参考节点与第/＞个局部参考节点之间的欧式距离，即第/＞个局部参考节点与第/＞个局部参考节点之间的第一距离，第一距离能够反映相邻两个局部参考节点的分布离散程度，第一距离越大，局部参考节点分布越离散；所以第一距离与第一斜率的乘积能够反映每个局部参考节点在节点分布曲线段上的分布特征；/＞越小，此时节点分布曲线段内所有局部参考节点的第一距离与第一斜率较为相似，说明第/＞个齿轮节点的节点分布曲线段上的局部参考节点分布越均匀，此时/＞越大，第/＞个齿轮节点的节点局部特征越均匀，此时第/＞个齿轮节点的局部范围内越规整，第/＞个齿轮节点的局部规整特征越大；/＞越大，即第/＞个齿轮节点的局部最大跨度越大，说明第/＞个齿轮节点的节点分布曲线段延展性越好，第/＞个齿轮节点的节点分布曲线段越不可能呈现团状曲线的结构特征，此时，第/＞个齿轮节点的局部范围越有可能是正常齿轮边缘，第/＞个齿轮节点的局部规整特征越大。优选地，本发明一个实施例中，局部参考节点的获取方法包括：由于要在每个齿轮节点的局部范围中选取一些齿轮节点来反映局部范围内的边缘形状特征，而任选一个齿轮节点作为顶点，选取与顶点之间夹角最大的两个齿轮节点，可以认为顶点与这两个齿轮节点最大程度地反映了顶点邻域范围内边缘形状，其中最大夹角的值越大，说明顶点邻域范围内边缘形状越平缓，而最大夹角的值越小，说明顶点邻域范围内边缘形状越尖锐；任选一个齿轮节点作为顶点，在顶点预设邻域范围内选取与顶点组成的夹角最大的两个齿轮节点作为对应齿轮节点的局部参考节点；以每个局部参考节点为新的顶点，重复局部参考节点选取操作，直至局部参考节点的数量满足预设数量，获得对应齿轮节点的局部参考节点。本发明一个实施例中，获得局部参考节点的数量为10个，其中局部范围则是所有局部参考节点之间的齿轮边缘范围。需要说明的是，在本发明其他实施例中，获得局部参考节点的数量可以由实施人员自行设置，在此不做限定。本发明一个实施例中，邻域范围设置为以每个齿轮节点为中心，8个齿轮节点为半径的邻域范围，且下文所有邻域范围均按照此设置实施。需要说明的是，在本发明其他实施例中，邻域范围的设置可以由实施人员自行设置，在此不做限定。步骤S3：根据齿轮节点预设邻域范围内的局部规整特征变化特征，获得每个齿轮节点邻域范围内所有齿轮节点的局部分布特征；根据齿轮节点的局部规整特征，获得每个齿轮节点的所有局部特征相似节点；获得每个齿轮节点的所有局部特征相似节点的位置分布特征；根据每个齿轮节点在邻域范围内的局部分布特征与每个齿轮节点的局部特征相似节点的位置分布特征，获得每个齿轮节点的信息携带程度。由步骤S2获取的齿轮节点的局部规整特征可以反映出每个齿轮节点局部范围内的边缘形状特征，通过每个齿轮节点邻域范围内齿轮节点局部规整特征的变化，可以反映出每个齿轮节点邻域范围内所有齿轮节点的分布情况。所以本发明实施例中，根据齿轮节点预设邻域范围内的局部规整特征变化特征，获得每个齿轮节点邻域范围内所有齿轮节点的局部分布特征。优选地，本发明实施例中，局部分布特征的获取方法包括：将每个齿轮节点的局部规整特征与邻域范围内每个其他齿轮节点的局部规整特征之间的差异作为每个齿轮节点与邻域范围内每个其他齿轮节点的局部规整差异，局部规整差异越大说明邻域范围内齿轮节点分布越混乱；由于每个齿轮节点与邻域范围内每个其他齿轮节点之间的距离越近，邻域范围内齿轮节点分布越密集，邻域范围内边缘形状特征越尖锐，此时将每个齿轮节点与邻域范围内每个其他齿轮节点之间的距离的倒数作为每个齿轮节点与邻域范围内每个其他齿轮节点的距离系数，距离系数越大，邻域范围内齿轮节点分布越混乱；将每个齿轮节点与邻域范围内每个其他齿轮节点的局部规整差异与距离系数的乘积求平均，获得每个齿轮节点邻域范围内所有齿轮节点的局部分布特征，其中局部规整差异越大，距离系数越大，每个齿轮节点邻域范围内局部分布特征越混乱。本发明一个实施例中，局部分布特征计算公式如下所示：式中，表示第/＞个齿轮节点的局部分布特征；/＞表示第/＞个齿轮节点邻域范围内的齿轮节点数量；/＞表示第/＞个齿轮节点邻域范围内的齿轮节点序号；/＞表示第/＞个齿轮节点邻域范围内第/＞个齿轮节点与第/＞个齿轮节点之间的欧式距离；/＞表示第/＞个齿轮节点的局部规整特征；/＞表示第/＞个齿轮节点邻域范围内第/＞个齿轮节点的局部规整特征。在局部分布特征计算公式中，表示每个齿轮节点与邻域范围内每个其他齿轮节点的局部规整差异，局部规整差异越大说明邻域范围内齿轮节点局部分布越混乱；/＞越小，/＞越大，此时每个齿轮节点与邻域范围内每个其他齿轮节点之间的距离越近，邻域范围内齿轮节点分布越密集，第/＞个齿轮节点邻域范围内边缘形状特征越尖锐。由于正常齿轮边缘形状较为规整，即正常齿轮边缘的齿轮节点的局部规整特征相似，所以可以根据齿轮节点的局部规整特征，获得每个齿轮节点的所有局部特征相似节点。优选地，本发明实施例中，局部特征相似节点的获取方法包括：在每个齿轮节点的邻域范围内，将与每个齿轮节点局部规整差异小于预设第一阈值的所有齿轮节点作为每个齿轮节点的局部特征相似节点。本发明一个实施例中，预设第一阈值设置为0.1，即与每个齿轮节点局部规整差异小于0.1的邻域范围内的所有齿轮节点作为每个齿轮节点的局部特征相似节点。需要说明的是，在本发明其他实施例中，局部特征相似节点的获取方法可以由实施人员自行设置，在此不做限定。在实际情况中，正常齿轮表面的齿均匀分布在圆形结构上，每个齿轮节点邻域范围内的所有局部特征相似节点分布会非常均匀，若某个齿轮节点邻域范围在毛刺区域中，则该齿轮节点邻域范围内的所有局部特征相似节点分布会呈现离散的特征，此时该齿轮节点邻域范围内齿轮表面的边缘形状特征更加混乱。故本发明实施例中，获得局部特征相似节点的位置分布特征。优选地，本发明一个实施例中，位置分布特征的获取方法包括：由于毛刺的形状特征较为尖锐，此时齿轮节点与邻域范围内局部特征相似节点到齿轮圆心位置的距离差距较大，所以需要首先获取齿轮表面的边缘图像中的齿轮圆心位置；计算每个齿轮节点到齿轮圆心位置之间的距离作为节点半径；计算每个齿轮节点的所有局部特征相似节点到齿轮圆心位置之间的距离作为特征节点半径；计算齿轮节点的节点半径与每个局部特征相似节点的特征节点半径之间差值的方差作为节点半径方差，其中节点半径方差越大，说明齿轮节点的节点半径与每个局部特征相似节点的特征节点半径之间差值变化越大，此时该齿轮节点邻域范围内局部特征相似节点分布越离散，该齿轮节点越不可能是正常齿轮表面的边缘像素点；以齿轮圆心位置为顶点，获得邻域范围内每个局部特征相似节点与每个其他局部特征相似节点之间的最小夹角，计算所有最小夹角之间的方差作为最小夹角方差，最小夹角方差越大，说明齿轮节点邻域范围内局部特征相似节点之间夹角变化越大，局部特征相似节点分布越不均匀，该齿轮节点越不可能是正常齿轮表面的边缘像素点；将节点半径方差与最小夹角方差之间的乘积作为局部特征相似节点的位置分布特征，节点半径方差越大，最小夹角方差越大，局部特征相似节点的位置分布特征越离散。本发明一个实施例中，位置分布特征计算公式如下所示：式中，表示第/＞个齿轮节点邻域范围内的位置分布特征；/＞表示第/＞个齿轮节点与齿轮圆心位置之间的节点半径；/＞表示第/＞个齿轮节点的第/＞个局部特征相似节点与齿轮圆心位置之间的特征节点半径；/＞表示第/＞个齿轮节点的任意两个局部特征相似节点与齿轮圆心位置之间的夹角；/＞表示方差函数；/＞表示最小值函数。在位置分布特征计算公式中，越大，说明第/＞个齿轮节点与每个局部特征相似节点距离齿轮圆心位置的距离差异越混乱，第/＞个齿轮节点邻域范围内局部特征相似节点分布越离散；/＞表示第/＞个齿轮节点邻域范围内每个局部特征相似节点与每个其他局部特征相似节点之间的最小夹角，若第/＞个齿轮节点邻域范围内位于正常齿轮表面边缘，则最小夹角的值应该相同或者差异较小，此时/＞的值越小，但如果/＞的值越大，说明第/＞个齿轮节点邻域范围内局部特征相似节点之间夹角变化越大，局部特征相似节点分布越不均匀。本发明一个实施例中，齿轮圆心位置可以通过现有技术定位直接获得，具体操作为本领域技术人员所熟知的技术手段，在此不做赘述。如果齿轮节点为正常齿轮表面的边缘像素点而并非毛刺区域像素点，认为此时该齿轮节点的信息携带程度越大。由于上述步骤获得了每个齿轮节点在邻域范围内的局部分布特征与每个齿轮节点的局部特征相似节点的位置分布特征，均可以反映每个齿轮节点在邻域范围内的边缘形状特征，所以本发明实施例中，根据每个齿轮节点在邻域范围内的局部分布特征与每个齿轮节点的局部特征相似节点的位置分布特征，获得每个齿轮节点的信息携带程度。优选地，本发明一个实施例中，信息携带程度的获取方法包括：将每个齿轮节点邻域范围内所有齿轮节点的局部分布特征，与每个齿轮节点邻域范围内局部特征相似节点的位置分布特征之间的乘积，进行负相关映射并归一化处理，获得每个齿轮节点的信息携带程度。本发明一个实施例中，信息携带程度计算公式如下所示：式中，表示第/＞个齿轮节点的信息携带程度；/＞表示第/＞个齿轮节点的局部分布特征；/＞表示第/＞个齿轮节点邻域范围内的位置分布特征；/＞表示以自然常数为底的指数函数。在信息携带程度计算公式中，越大，说明第/＞个齿轮节点的局部分布特征越混乱，此时第/＞个齿轮节点分布混乱且密集，第/＞个齿轮节点邻域范围内边缘形状特征越尖锐，第/＞个齿轮节点越有可能在毛刺区域中，此时第/＞个齿轮节点的信息携带程度越小；/＞越大，说明第/＞个齿轮节点邻域范围内的位置分布特征越离散，此时第/＞个齿轮节点越不可能是正常齿轮表面的边缘像素点，即第/＞个齿轮节点的信息携带程度越小。至此，获得每个齿轮节点的信息携带程度。步骤S4：根据连通图内相邻两个齿轮节点的信息携带程度与连通图内齿轮节点的分布特征，获得相邻两个齿轮节点之间分裂阈值的修正参数；利用修正参数获得相邻两个齿轮节点的修正分裂阈值；根据修正分裂阈值对齿轮表面的边缘图像使用连通图动态分裂聚类算法，获得所有齿轮节点聚类簇；利用齿轮节点聚类簇内齿轮节点的分布特征，对齿轮的毛刺进行检测。在连通图动态分裂聚类算法中，处于同一连通图的两个相邻齿轮节点的信息携带程度差异越大，且连通图内节点分布越混乱，算法中该连通图越不应该在上述两个齿轮节点之间进行分裂，此时分裂阈值应该越小，此时要对原有的分裂阈值进行修正。所以本发明实施例中，根据连通图内相邻两个齿轮节点的信息携带程度与连通图内连通性分布特征，获得相邻两个齿轮节点之间分裂阈值的修正参数。优选地，本发明一个实施例中，修正参数的获取方法包括：根据修正参数计算公式获取修正参数；修正参数计算公式如下所示：式中，表示第/＞个齿轮节点与第/＞个齿轮节点之间分裂阈值的修正参数；表示第/＞个齿轮节点的信息携带程度；/＞表示第/＞个齿轮节点的信息携带程度；/＞表示第/＞个齿轮节点和每个其他齿轮节点之间的连线长度与第/＞个齿轮节点和每个其他齿轮节点之间的连线长度的方差；/＞表示归一化函数。在修正参数计算公式中，越大，说明第/＞个齿轮节点与第/＞个齿轮节点之间信息携带程度差异越大，越不能在第/＞个齿轮节点与第/＞个齿轮节点之间进行分裂，此时修正参数越大；/＞越大，说明第/＞个齿轮节点与第/＞个齿轮节点所在连通图的分布越混乱，越不能在第/＞个齿轮节点与第/＞个齿轮节点之间进行分裂，此时修正参数越大。利用修正参数对分裂阈值进行修正，获得修正分裂阈值。优选地，本发明一个实施例中，修正分裂阈值的获取方法包括：将修正参数进行负相关映射获得分裂阈值权重，在处于同一连通图的两个齿轮节点的信息携带程度差异越大，且连通图内节点分布越混乱的情况下，修正参数越大，此时分裂阈值应该越小；将连通图动态分裂聚类算法中相邻两个齿轮节点之间的分裂阈值与分裂阈值权重之间的乘积作为修正分裂阈值。至此，获得相邻两个齿轮节点的修正分裂阈值。在获得修正分裂阈值后，利用连通图动态分裂聚类算法对齿轮表面边缘图像进行聚类，可以获得所有齿轮节点聚类簇，其中每个齿轮节点聚类簇则是每个连通图，由于毛刺区域在聚类簇中的表现情况通常为连通图内齿轮节点分布密集且分布混乱，所以本发明实施例中，利用齿轮节点聚类簇内齿轮节点的分布特征，对齿轮的毛刺进行检测。优选地，本发明一个实施例中，利用齿轮节点聚类簇内齿轮节点的分布特征，对齿轮的毛刺进行检测，包括：将齿轮节点聚类簇内齿轮节点的数量与连通图区域的面积的比值作为簇内节点分布特征，其中聚类簇内齿轮节点的数量与连通图区域的面积的比值越大，说明簇内节点分布越密集；将齿轮节点聚类簇内所有齿轮节点之间的连线长度的方差作为簇内混乱程度，其中齿轮节点聚类簇内所有齿轮节点之间的连线长度的方差越大，聚类簇内齿轮节点分布越混乱；将簇内节点分布特征与簇内混乱程度之间的乘积归一化获得每个齿轮节点聚类簇作为包含毛刺的齿轮节点聚类簇的毛刺存在概率；预设第二阈值，毛刺存在概率大于第二阈值的齿轮节点聚类簇认为存在毛刺。本发明实施例中，毛刺存在概率计算公式如下所示：式中，表示第/＞个齿轮节点聚类簇的毛刺存在概率；/＞表示第/＞个齿轮节点聚类簇的齿轮节点数量；/＞表示第/＞个齿轮节点聚类簇的连通图区域面积；/＞表示第/＞个齿轮节点聚类簇内所有齿轮节点之间的连线长度的方差；/＞表示归一化函数。/＞在毛刺存在概率计算公式中，越大，第/＞个齿轮节点聚类簇的簇内节点分布越密集；/＞越大，说明第/＞个齿轮节点聚类簇内齿轮节点分布越混乱，此时，第/＞个齿轮节点聚类簇存在毛刺区域的概率越大。本发明一个实施例中，预设第二阈值设置为0.6，在获得毛刺存在概率以后，当毛刺存在概率大于0.6时，认为该齿轮节点聚类簇内存在毛刺。至此，完成齿轮表面的毛刺检测。综上，本发明获得齿轮表面的边缘图像，将所有边缘像素点作为齿轮节点；根据每个齿轮节点局部范围的边缘形状特征获得每个齿轮节点的局部规整特征；根据齿轮节点预设邻域范围内的局部规整特征变化特征，获得每个齿轮节点的位置分布特征；根据每个齿轮节点在邻域范围内的局部分布特征与每个齿轮节点的局部特征相似节点的位置分布特征，获得每个齿轮节点的信息携带程度；根据连通图内相邻两个齿轮节点的信息携带程度与连通图内齿轮节点的分布特征，获得相邻两个齿轮节点之间分裂阈值的修正参数，进而获得修正分裂阈值，利用修正分裂阈值使用连通图动态分裂聚类算法，获得所有齿轮节点聚类簇；利用齿轮节点聚类簇内齿轮节点的分布特征，对齿轮的毛刺进行检测。本发明通过对分裂阈值进行修正，能够通过连通图动态分裂聚类算法获得精确的齿轮节点聚类簇，避免一个完整的毛刺区域被划分到不同的簇类中，提高了毛刺检测的准确度。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。
