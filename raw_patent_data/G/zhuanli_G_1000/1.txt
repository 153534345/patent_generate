标题title
一种虚拟化CPU的性能测试管理方法及系统
摘要abst
本发明公开了一种虚拟化CPU的性能测试管理方法及系统，涉及虚拟机技术领域，确定物理机CPU型号，对支持虚拟化的物理机CPU进行虚拟化处理，定义虚拟机模板；基于虚拟机模板进行网络配置，获取虚拟化CPU的性能测试参数及测试项目；根据虚拟化CPU的测试参数及测试项目提取性能测试指标，获取性能评估指数，对虚拟化CPU进行性能评估；设定虚拟化CPU性能测试模式，并预设测试阈值，分设不同测试等级，对虚拟化CPU进行性能测试；根据虚拟化CPU测试结果，获取虚拟机负载分配管理方案。本发明通过性能测试的分析结果，了解虚拟化CPU的性能瓶颈和优化方向，获取虚拟化CPU负载分配管理方案，对资源进行合理的分配，提高资源的利用率。
权利要求书clms
1.一种虚拟化CPU的性能测试管理方法，其特征在于：包括以下步骤：步骤1，确定物理机CPU型号，对支持虚拟化的物理机CPU进行虚拟化处理，定义虚拟机模板；步骤2，基于虚拟机模板进行网络配置，获取虚拟化CPU的性能测试参数及测试项目；步骤3，根据虚拟化CPU的测试参数及测试项目提取性能测试指标，获取性能评估指数，对虚拟化CPU进行性能评估；步骤4，设定虚拟化CPU性能测试模式，并预设测试阈值，分设不同测试等级，对虚拟化CPU进行性能测试；步骤5，根据虚拟化CPU测试结果，获取虚拟机负载分配管理方案。2.根据权利要求1所述的一种虚拟化CPU的性能测试管理方法，其特征在于：所述步骤1中虚拟机模板定义创建的过程为，步骤101，确定物理机CPU型号，检查物理机CPU是否支持虚拟化；步骤102，对支持虚拟化的物理机CPU，启用虚拟化支持选项；步骤103，安装虚拟化软件，在虚拟化软件中创建虚拟机，并安装操作系统；步骤104，在虚拟机中配置并优化网络配置和安全设置；步骤105，将需要的应用程序和驱动程序安装到虚拟机中；步骤106，虚拟机配置完成后，在虚拟化软件中将其定义转化为模板。3.根据权利要求2所述的一种虚拟化CPU的性能测试管理方法，其特征在于：所述步骤2中虚拟化CPU的性能测试参数及测试项目的获取过程为，步骤201，明确虚拟化CPU性能测试目标，并选择性能测试工具；步骤202，根据测试目标的要求，配置虚拟机的硬件和软件环境，并验证虚拟机的综合应用环境；步骤203，使用选择的测试工具执行性能测试，记录测试过程中的各项参数和数据。4.根据权利要求3所述的一种虚拟化CPU的性能测试管理方法，其特征在于：所述步骤3中性能评估指数的获取过程为，步骤301，对测试过程中的各项参数和数据进行分析，提取虚拟化CPU的响应时间、CPU利用率性能指标；步骤302，收集虚拟化CPU的响应时间和CPU利用率历史数据；步骤303，对收集到的历史数据进行清洗和整理；步骤304，获取虚拟化CPU的平均响应时间和平均CPU利用率，确定响应时间和CPU利用率的权重因子；步骤305，基于虚拟化CPU的平均响应时间、平均CPU利用率以及响应时间和CPU利用率的权重因子，得到性能评估指数。5.根据权利要求4所述的一种虚拟化CPU的性能测试管理方法，其特征在于：所述性能评估指数的计算公式为：；其中，为性能评估指数，/＞为响应时间数据点，/＞为CPU利用率数据点，/＞为测试数据点的数量，且/＞为整数，/＞为响应时间权重系数，/＞为CPU利用率权重系数，/＞与/＞的取值范围为/＞。6.根据权利要求5所述的一种虚拟化CPU的性能测试管理方法，其特征在于：所述步骤4中虚拟化CPU的性能测试过程为，获取虚拟化CPU性能评估的预设阈值，得到测试等级，分别为：A型测试等级；B型测试等级；C型测试等级；D型测试等级；其中，为A型测试等级的上阈值与B型测试等级的下阈值，/＞为B型测试等级的上阈值与C型测试等级的下阈值，/＞为C型测试等级的上阈值与D型测试等级的下阈值。7.根据权利要求6所述的一种虚拟化CPU的性能测试管理方法，其特征在于：所述虚拟机负载分配管理方案为，获取虚拟化CPU测试结果，为虚拟机分配评估测试等级，生成对应的虚拟机负载分配管理方案，分别为：对于评估结果为A型测试等级的虚拟机，将其放置在具有高计算能力和低CPU利用率的服务器上；对于评估结果为B型测试等级的虚拟机，将其放置在具有中等计算能力和中等CPU利用率的服务器上；对于评估结果为C型测试等级的虚拟机，将其放置在具有基本计算能力和高CPU利用率的服务器上；对于评估结果为D型测试等级的虚拟机，将其放置在具有较低计算能力和高CPU利用率的服务器上。8.一种虚拟化CPU的性能测试管理系统，用于实现权利要求1-7任一项所述的一种虚拟化CPU的性能测试管理方法，其特征在于：包括有数据收集处理模块、性能评估模块、等级测试模块以及性能测试模块，其中，各个模块之间电性连接。9.根据权利要求8所述的一种虚拟化CPU的性能测试管理系统，其特征在于：所述数据收集处理模块，用于收集虚拟化CPU的响应时间、CPU利用率性能数据，并对收集到的性能数据进行处理和分析；所述性能评估模块，用于配合性能评估指数对虚拟化CPU的性能指标进行评估，分析虚拟化CPU的性能指标，将虚拟化CPU的性能表现数据发送至等级测试模块和性能测试模块；所述等级测试模块，用于对性能评估模块发送的虚拟化CPU的性能表现数据进行等级划分；所述性能测试模块，用于执行性能测试，基于性能评估模块发送的虚拟化CPU的性能表现数据，并配合等级测试模块获得虚拟化CPU负载分配管理方案。
说明书desc
技术领域本发明涉及虚拟机技术领域，具体涉及一种虚拟化CPU的性能测试管理方法及系统。背景技术虚拟化技术指允许在一台物理计算机上同时运行多个虚拟机，每个虚拟机独立运行不同的操作系统和应用程序的技术，虚拟化平台通过对物理资源和资源池进行抽象化处理，提高资源利用率及使用时的灵活性，而在虚拟化环境中，虚拟CPU的性能测试和管理变得至关重要，随着企业数据需求的不断扩大，传统的硬件和软件测试方法无法满足不断增长的测试需求，为了解决这个问题，虚拟化技术应运而生，它可以模拟多个操作系统和应用程序环境，以帮助测试软件在不同操作系统和应用场景下的性能表现。现有虚拟化环境中，由于虚拟机需定义相同模板，且虚拟机之间需共享物理资源，导致虚拟化CPU在应用管理时，性能会有所波动，同时，CPU虚拟化的实现需要模拟硬件环境，较难根据性能指标统一评估虚拟化CPU的性能，对相关数据进行稳定处理，进而造成虚拟机之间的干扰和冲突，因此，现提供一种虚拟化CPU的性能测试管理方法及系统。发明内容本发明目的在于提供一种虚拟化CPU的性能测试管理方法及系统，以解决上述背景技术中提出的问题。为解决上述技术问题，本发明所采用的技术方案是：第一方面，一种虚拟化CPU的性能测试管理方法，包括以下步骤：步骤1，确定物理机CPU型号，对支持虚拟化的物理机CPU进行虚拟化处理，定义虚拟机模板；步骤2，基于虚拟机模板进行网络配置，获取虚拟化CPU的性能测试参数及测试项目；步骤3，根据虚拟化CPU的测试参数及测试项目提取性能测试指标，获取性能评估指数，对虚拟化CPU进行性能评估；步骤4，设定虚拟化CPU性能测试模式，并预设测试阈值，分设不同测试等级，对虚拟化CPU进行性能测试；步骤5，根据虚拟化CPU测试结果，获取虚拟机负载分配管理方案。本发明技术方案的进一步改进在于：所述步骤1中虚拟机模板定义创建的过程为，步骤101，确定物理机CPU型号，检查物理机CPU是否支持虚拟化，使用基于Linux的lscpu命令工具检查CPU是否支持虚拟化；步骤102，对支持虚拟化的物理机CPU，在物理机的BIOS/UEFI设置中，启用虚拟化支持选项；步骤103，安装虚拟化软件，在虚拟化软件中创建虚拟机，并安装操作系统；步骤104，在虚拟机中配置并优化网络配置和安全设置，网络配置包括IP地址、子网掩码、网关参数的设置；步骤105，将需要的应用程序和驱动程序安装到虚拟机中；步骤106，虚拟机配置完成后，在虚拟化软件中将其定义转化为模板，以便将来可以复制和部署相似的虚拟机。本发明技术方案的进一步改进在于：所述步骤2中虚拟化CPU的性能测试参数及测试项目的获取过程为，步骤201，明确虚拟化CPU性能测试目标，并选择性能测试工具，选择CloudMeter作为虚拟化性能测试工具，评估虚拟化CPU的性能、稳定性、可扩展性；步骤202，根据测试目标的要求，配置虚拟机的硬件和软件环境，并验证虚拟机的综合应用环境；步骤203，使用选择的测试工具执行性能测试，记录测试过程中的各项参数和数据。本发明技术方案的进一步改进在于：所述步骤3中性能评估指数的获取过程为，步骤301，对测试过程中的各项参数和数据进行分析，提取虚拟化CPU的响应时间、CPU利用率性能指标；步骤302，收集虚拟化CPU的响应时间和CPU利用率历史数据；步骤303，对收集到的历史数据进行清洗和整理，确保性能评估指数计算的准确性；步骤304，获取虚拟化CPU的平均响应时间和平均CPU利用率，确定响应时间和CPU利用率的权重因子；步骤305，基于虚拟化CPU的平均响应时间、平均CPU利用率以及响应时间和CPU利用率的权重因子，得到性能评估指数。本发明技术方案的进一步改进在于：所述性能评估指数的计算公式为：；其中，为性能评估指数，/＞为响应时间数据点，为CPU利用率数据点，/＞为测试数据点的数量，且/＞为整数，/＞为响应时间权重系数，/＞为CPU利用率权重系数，/＞与/＞的取值范围为/＞，需要说明的是，平均响应时间越短，说明系统的响应速度越快，性能越好，平均CPU利用率越低，说明系统在处理任务时的负载较轻，有更多的资源可供使用，性能相对较好，平均响应时间和平均CPU利用率与性能评估指数之间存在负相关关系，即平均响应时间越短、平均CPU利用率越低，计算出的性能评估指数越低，表明性能越好，反之，平均响应时间越长、平均CPU利用率越高，计算出的性能评估指数越高，表明性能较差。本发明技术方案的进一步改进在于：所述步骤4中虚拟化CPU的性能测试过程为，获取虚拟化CPU性能评估的预设阈值，得到测试等级，分别为：A型测试等级；B型测试等级；C型测试等级；D型测试等级；其中，为A型测试等级的上阈值与B型测试等级的下阈值，/＞为B型测试等级的上阈值与C型测试等级的下阈值，/＞为C型测试等级的上阈值与D型测试等级的下阈值。本发明技术方案的进一步改进在于：所述虚拟机负载分配管理方案为，获取虚拟化CPU测试结果，为虚拟机分配评估测试等级，生成对应的虚拟机负载分配管理方案，分别为：对于评估结果为A型测试等级的虚拟机，将其放置在具有高计算能力和低CPU利用率的服务器上，以确保虚拟机能够充分发挥其性能潜力，此外，还可以将高负载的任务分配给该虚拟机，以充分利用服务器的处理能力；对于评估结果为B型测试等级的虚拟机，将其放置在具有中等计算能力和中等CPU利用率的服务器上，确保虚拟机能够处理大部分工作负载，同时不会出现过高的CPU利用率；对于评估结果为C型测试等级的虚拟机，将其放置在具有基本计算能力和高CPU利用率的服务器上，限制该虚拟机的负载，以避免服务器过载，在任务分配方面，将轻量级或次要的任务分配给该虚拟机。对于评估结果为D型测试等级的虚拟机，将其放置在具有较低计算能力和高CPU利用率的服务器上，由于性能问题较为明显，对该虚拟机进行优化或升级，或者考虑将其迁移到其他更合适的服务器上，在任务分配方面，避免将重要的或高负载的任务分配给该虚拟机。第二方面，一种虚拟化CPU的性能测试管理系统，包括有数据收集处理模块、性能评估模块、等级测试模块以及性能测试模块，其中，各个模块之间电性连接。本发明技术方案的进一步改进在于：所述数据收集处理模块，用于收集虚拟化CPU的响应时间、CPU利用率性能数据，并对收集到的性能数据进行处理和分析；所述性能评估模块，用于配合性能评估指数对虚拟化CPU的性能指标进行评估，分析虚拟化CPU的性能指标，将虚拟化CPU的性能表现数据发送至等级测试模块和性能测试模块；所述等级测试模块，用于对性能评估模块发送的虚拟化CPU的性能表现数据进行等级划分；所述性能测试模块，用于执行性能测试，基于性能评估模块发送的虚拟化CPU的性能表现数据，并配合等级测试模块获得虚拟化CPU负载分配管理方案。由于采用了上述技术方案，本发明相对现有技术来说，取得的技术进步是：1、本发明提供一种虚拟化CPU的性能测试管理方法及系统，通过虚拟化技术，同时运行多个虚拟机，共享物理资源，可有效提高资源利用率，并且在虚拟化环境中，可灵活地分配和调度虚拟机的CPU、内存和存储资源，以实现更高的资源利用率，同时，基于性能评估指数，可根据虚拟机的测试参数及测试项目，对虚拟化CPU进行统一的性能测试，便于对虚拟机的性能进行评估，从而实现对虚拟化CPU的负载分配管理。2、本发明提供一种虚拟化CPU的性能测试管理方法及系统，通过收集虚拟化CPU的性能数据，对数据进行处理和分析，更准确地评估虚拟化CPU的性能，使用系统化的方法进行性能测试，减少人为因素对测试结果的影响，提高性能测试的准确性和可靠性。3、本发明提供一种虚拟化CPU的性能测试管理方法及系统，通过性能测试的分析结果，了解虚拟化CPU的性能瓶颈和优化方向，获取虚拟化CPU负载分配管理方案，对资源进行合理的分配，提高资源的利用率，以此确保虚拟化CPU在应用管理时的性能稳定性，统一虚拟化CPU性能的评估标准，使得数据的处理更加稳定，避免虚拟机之间的干扰和冲突。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明中记载的一些实施例，对于本领域普通技术人员来讲，还可以根据这些附图获得其他的附图。图1为本发明的流程图；图2为本发明的虚拟机模板定义创建流程图；图3为本发明虚拟化CPU的性能测试参数及测试项目获取流程图；图4为本发明的性能评估指数获取流程图；图5为本发明的构成模块图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例1，如图1-4所示，本发明提供了一种虚拟化CPU的性能测试管理方法，包括以下步骤：步骤1，确定物理机CPU型号，对支持虚拟化的物理机CPU进行虚拟化处理，定义虚拟机模板，确定物理机CPU型号，使用基于Linux的lscpu命令工具检查物理机CPU是否支持虚拟化，对支持虚拟化的物理机CPU，在物理机的BIOS/UEFI设置中，启用虚拟化支持选项，安装虚拟化软件，在虚拟化软件中创建虚拟机，并安装操作系统，在虚拟机中配置并优化网络配置和安全设置，网络配置包括IP地址、子网掩码、网关参数的设置，将需要的应用程序和驱动程序安装到虚拟机中，虚拟机配置完成后，在虚拟化软件中将其定义转化为模板，以便将来可以复制和部署相似的虚拟机；步骤2，基于虚拟机模板进行网络配置，获取虚拟化CPU的性能测试参数及测试项目，明确虚拟化CPU性能测试目标，并选择性能测试工具，选择CloudMeter作为虚拟化性能测试工具，评估虚拟化CPU的性能、稳定性、可扩展性，根据测试目标的要求，配置虚拟机的硬件和软件环境，并验证虚拟机的综合应用环境，根据测试目标的要求，确定虚拟机的CPU、内存、存储硬件配置，确保虚拟机具有足够的资源来模拟实际应用场景；选择与实际应用场景相同的操作系统，并按照安装向导进行安装，确保操作系统能够正确安装并运行；根据测试目标的要求，安装相关的应用软件，如数据库、Web服务器，确保应用软件能够正确安装并运行；根据测试目标的要求，配置虚拟机的网络环境，包括设置IP地址、子网掩码、网关网络参数，以及配置网络连接和防火墙规则；根据测试目标的要求，配置虚拟机的存储环境，包括设置虚拟硬盘的大小、格式化虚拟硬盘、挂载虚拟硬盘操作；配置完成后，通过查看虚拟机的硬件信息、运行性能测试方式验证虚拟机的硬件配置是否符合测试目标的要求；配置完成后，通过安装和运行相关应用软件、进行网络连接测试方式验证虚拟机的软件环境是否符合测试目标的要求；验证硬件和软件环境后，通过执行测试用例、收集性能数据方式进行测试环境的验证，确保测试环境能够正确模拟实际应用场景，并满足测试目标的要求，使用选择的测试工具执行性能测试，记录测试过程中的各项参数和数据，打开选择的测试工具，并按照工具的指导进行配置和设置，确保工具能够正确识别和连接到虚拟机，在测试工具中选择相应的测试用例，并开始执行，根据测试用例的要求，模拟用户操作、产生负载并监控虚拟机的性能参数，在测试过程中，记录虚拟机的各项性能参数和数据，包括但不限于响应时间、CPU利用率、内存使用情况，多次执行相同的测试用例，每次测试后，记录下相应的参数和数据，以便后续分析和比较，获取更准确的数据和减少误差；步骤3，根据虚拟化CPU的测试参数及测试项目提取性能测试指标，获取性能评估指数，对虚拟化CPU进行性能评估，对测试过程中的各项参数和数据进行分析，提取虚拟化CPU的响应时间、CPU利用率性能指标，收集虚拟化CPU的响应时间和CPU利用率历史数据，对收集到的历史数据进行清洗和整理，确保性能评估指数计算的准确性，获取虚拟化CPU的平均响应时间和平均CPU利用率，确定响应时间和CPU利用率的权重因子，基于虚拟化CPU的平均响应时间、平均CPU利用率以及响应时间和CPU利用率的权重因子，得到性能评估指数，性能评估指数的计算公式为：；其中，为性能评估指数，/＞为响应时间数据点，为CPU利用率数据点，/＞为测试数据点的数量，且/＞为整数，/＞为响应时间权重系数，/＞为CPU利用率权重系数，/＞与/＞的取值范围为/＞；需要说明的是，平均响应时间越短，说明系统的响应速度越快，性能越好，平均CPU利用率越低，说明系统在处理任务时的负载较轻，有更多的资源可供使用，性能相对较好，平均响应时间和平均CPU利用率与性能评估指数之间存在负相关关系，即平均响应时间越短、平均CPU利用率越低，计算出的性能评估指数越低，表明性能越好，反之，平均响应时间越长、平均CPU利用率越高，计算出的性能评估指数越高，表明性能较差；步骤4，设定虚拟化CPU性能测试模式，并预设测试阈值，分设不同测试等级，对虚拟化CPU进行性能测试，获取虚拟化CPU性能评估的预设阈值，得到测试等级，分别为：A型测试等级；B型测试等级；C型测试等级；D型测试等级；其中，为A型测试等级的上阈值与B型测试等级的下阈值，/＞为B型测试等级的上阈值与C型测试等级的下阈值，/＞为C型测试等级的上阈值与D型测试等级的下阈值；步骤5，根据虚拟化CPU测试结果，获取虚拟机负载分配管理方案，获取虚拟化CPU测试结果，为虚拟机分配评估测试等级，生成对应的虚拟机负载分配管理方案，分别为：对于评估结果为A型测试等级的虚拟机，将其放置在具有高计算能力和低CPU利用率的服务器上，以确保虚拟机能够充分发挥其性能潜力，此外，还可以将高负载的任务分配给该虚拟机，以充分利用服务器的处理能力；对于评估结果为B型测试等级的虚拟机，将其放置在具有中等计算能力和中等CPU利用率的服务器上，确保虚拟机能够处理大部分工作负载，同时不会出现过高的CPU利用率；对于评估结果为C型测试等级的虚拟机，将其放置在具有基本计算能力和高CPU利用率的服务器上，限制该虚拟机的负载，以避免服务器过载，在任务分配方面，将轻量级或次要的任务分配给该虚拟机。对于评估结果为D型测试等级的虚拟机，将其放置在具有较低计算能力和高CPU利用率的服务器上，由于性能问题较为明显，对该虚拟机进行优化或升级，或者考虑将其迁移到其他更合适的服务器上，在任务分配方面，避免将重要的或高负载的任务分配给该虚拟机。实施例2，如图5所示，在实施例1的基础上，本发明提供一种虚拟化CPU的性能测试管理系统，包括有数据收集处理模块、性能评估模块、等级测试模块以及性能测试模块，其中，各个模块之间电性连接；数据收集处理模块，用于收集虚拟化CPU的响应时间、CPU利用率性能数据，并对收集到的性能数据进行处理和分析；性能评估模块，用于配合性能评估指数对虚拟化CPU的性能指标进行评估，分析虚拟化CPU的性能指标，将虚拟化CPU的性能表现数据发送至等级测试模块和性能测试模块；等级测试模块，用于对性能评估模块发送的虚拟化CPU的性能表现数据进行等级划分；性能测试模块，用于执行性能测试，基于性能评估模块发送的虚拟化CPU的性能表现数据，并配合等级测试模块获得虚拟化CPU负载分配管理方案。以上所述，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以所述权利要求的保护范围为准。
