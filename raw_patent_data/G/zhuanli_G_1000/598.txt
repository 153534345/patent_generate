标题title
多图形构型的多智能体编队控制方法和相关产品
摘要abst
本发明公开了一种多图形构型的多智能体编队控制方法和相关产品。方法包括：确定期望编队图、期望编队图对应的多个灰度图以及智能体自身被分配的任务；根据智能体自身以及邻居智能体对期望编队图在物理空间的方位的理解值，更新智能体自身对期望编队图在物理空间的方位的理解值，以使得全部智能体对期望编队图在物理空间的方位的理解值趋于一致；根据图形进入速度指令、图形探索速度指令和交互速度指令控制智能体的运动状态。多智能体编队高效快速实现编队任务，且覆盖区域为彼此分离的多个连通图。
权利要求书clms
1.一种多图形构型的多智能体编队控制方法，其特征在于，包括：确定期望编队图、期望编队图对应的多个灰度图以及智能体自身被分配的任务；根据智能体自身以及邻居智能体对期望编队图在物理空间的方位的理解值，更新智能体自身对期望编队图在物理空间的方位的理解值，以使得全部智能体对期望编队图在物理空间的方位的理解值趋于一致；根据图形进入速度指令、图形探索速度指令和交互速度指令控制智能体的运动状态；其中，期望编队图中灰度最大值或灰度最小值表示目标区域，目标区域连接成彼此分离的多个子图，子图为连通图，多个灰度图与多个子图一一对应，每个灰度图划分为目标区域、过渡区域以及非目标区域，目标区域中网格的坐标以及灰度值与对应子图的网格在期望编队图中的坐标以及灰度值均对应相同，过渡区域紧邻目标区域且沿远离目标区域的方向灰度值平滑过渡，非目标区域紧邻过渡区域远离目标区域一侧的边界且灰度值为与目标区域灰度值不同的灰度最小值或灰度最大值，子图中网格与期望编队图中网格的形状及尺寸相等；其中，每一个任务对应一个子图；其中，图形进入速度指令根据对应的灰度图确定，用于驱动智能体自身从目标区域之外朝向目标区域移动；其中，图形探索速度指令根据对应的灰度图确定，用于驱动智能体自身从目标区域的外侧边缘进入目标区域，进一步搜索并占据目标区域内未被其余智能体占据的网格；其中，交互速度指令用于避免碰撞并驱动智能体与周围智能体的速度趋于一致。2.根据权利要求1所述的方法，其特征在于，图形进入速度指令的计算公式为：；其中，为智能体i的图形进入速度指令，k1为正值的控制增益常数，/＞为距离智能体i的中心最近的网格，/＞为网格/＞在智能体i对应的灰度图中的灰度值，/＞为在智能体i对应的灰度图中以网格/＞为中心的设定区域内灰度值与目标区域灰度值最为接近的一个网格在物理空间的位置，/＞为智能体i在物理空间的位置。3.根据权利要求1所述的方法，其特征在于，图形探索速度指令的计算公式为：；其中，为智能体i的图形探索速度指令，/＞为智能体i在物理空间的位置，/＞是网格在物理空间的位置，/＞为智能体i的感知半径，/＞为智能体i对应的灰度图中表示目标区域的网格的集合，/＞表示在智能体i对应的灰度图中被任意智能体所占据的网格，/＞表示在智能体i对应的灰度图中智能体i感知半径内表示目标区域的网格的集合，/＞为正值控制增益常数，/＞是权重函数，/＞是非负函数，满足：，/＞是分段连续函数，且满足：/＞。4.根据权利要求1所述的方法，其特征在于，交互速度指令的计算公式为：；其中，为智能体i的交互速度指令，/＞为正值的控制增益常数，/＞为智能体i的邻居智能体的集合，oi为智能体i的感知半径内障碍点的集合，/＞为智能体i在物理空间的位置，为智能体或障碍点j在物理空间的位置，/＞为智能体i的速度，/＞为智能体j的速度，/＞为权重函数，且在0到智能体预期距离的区间内单调递减。5.根据权利要求4所述的方法，其特征在于，权重函数的计算公式为：；其中，为预期距离。6.根据权利要求1所述的方法，其特征在于，智能体自身对目标形状的方位的理解值按照如下公式计算：；；其中，为智能体i对期望编队图在物理空间的速度的理解值，/＞为智能体j对期望编队图在物理空间的速度的理解值，/＞以及/＞，二者均为常量增益，/＞为智能体i的邻居智能体的集合，/＞为符号函数，/＞为2-范数计算符号，/＞为智能体i对期望编队图在物理空间的位置的理解值，/＞为智能体j对期望编队图在物理空间的位置的理解值；其中，c2为正值常量增益，为智能体i对期望编队图在物理空间的方向的理解值，/＞为智能体j对期望编队图在物理空间的方向的理解值。7.根据权利要求1所述的方法，其特征在于，还包括任务分配的步骤：初始状态判定所有智能体执行空任务，初始迭代次数为0，初始时间戳与其余智能体的初始时间戳不同，初始满意度判断为不满意；如果满意度判断为不满意则转至，否则转至；基于智能体自身当前生成的分配策略，选择使智能体自身个体效益最大的任务，并更新智能体自身的分配策略和迭代次数，令满意度判断为满意；与邻居智能体交互分配策略、迭代次数、时间戳和自身的满意度判断，从自身以及自身的邻居智能体中选择迭代次数最大的智能体作为权威智能体，如果迭代次数最大的智能体数量为多个，则从中选择时间戳最大的智能体作为权威智能体，如果自身是权威智能体，则自身的分配策略、迭代次数、时间戳和自身的满意度判断不变，转至，否则，用权威智能体的分配策略、迭代次数、时间戳和自身的满意度对自身的分配策略、迭代次数、时间戳和自身的满意度进行赋值，转至；如果智能体自身以及所有邻居智能体的满意度判断均为满意，则智能体自身停止迭代，否则转至。8.根据权利要求7所述的方法，其特征在于，个体效益计算公式如下：；表示智能体/＞在与p-1个同伴执行任务tj时的个体效益，/＞表示智能体/＞的位置，/＞表示任务tj的位置，dmax表示执行任务tj的智能体与任务tj之间的最大距离,/＞为权重参数,ntj表示任务tj所需要的最少智能体的数量。9.一种程序产品，其特征在于，该程序产品在运行时执行根据权利要求1至8中任一项所述的多图形构型的多智能体编队控制方法。10.一种智能体，其特征在于，包括存储器和处理器，存储器存储程序，处理器运行该程序以执行根据权利要求1至8中任一项所述的多图形构型的多智能体编队控制方法。
说明书desc
技术领域本发明涉及一种多图形构型的多智能体编队控制方法和相关产品。背景技术多智能体编队控制是指多个自主智能体之间协同工作，以达成特定任务或维持特定队形的控制技术。这个领域涵盖了机器人、无人机、自动驾驶车辆、物联网设备等多种应用，旨在使多个智能体之间能够相互协作、沟通、并实现集体行为。多智能体编队控制的研究背景源于对现代复杂系统的需求，这些系统通常需要多个智能体共同完成任务，例如无人机编队执行搜索侦查任务、机器人团队协作完成物品搬运或搜索救援。不论是在民用还是军用场景，多智能体编队控制都发挥着重要的作用。随着现代技术的发展，多智能体所构成无人集群的规模越来越大，其所能执行任务的规模、数量也逐渐增加。而面对多智能体、多任务场景，控制方法不仅要完成智能体编队构型的实现，还需对智能体与任务进行合理的任务分配。因此，如何设计大规模多智能体及多队形任务下，能同时实现智能体与编队任务的分配及控制的方法，成为亟待解决的问题。现有的多智能体编队控制方法可分为两种模式：集中式与分布式。在集中式方法中，存在一个主控制器负责对整个智能体集群进行控制，但这种方式可能面临通信开销大、单点故障风险高等问题，在许多实际应用场景中难以实施。另一方面，分布式方法则只要求每个智能体获得其周围的局部信息，并只能与一定范围内的邻居智能体进行通信。分布式方法大大降低了集群对通信能力的要求，同时只对局部信息的利用增加了集群的容错能力，使得其在实际应用中成为主流方法。但在大规模集群情况下，分布式可能面临信息传递延迟、任务分配不均等挑战。因此，需要在分布式的场景下尽可能提高控制方法的最优性、收敛速度等性能。现有的分布式多智能体编队控制方法大多是针对单个图形进行编队构型的实现，而对于多个图形的构型实现任务，针对单个图形的编队控制方法难以直接实施。多图形的编队控制问题可抽象为多智能体多任务问题。现有的针对多智能体多任务问题的任务分配及轨迹规划方法，往往将任务作为质点考虑，进而将智能体移动距离、能量消耗等因素作为优化指标并给出最优解。然而此类方法无法满足编队任务的需求，因此无法应用于多图形编队控制问题上。总的来说，多图形编队控制问题目前研究尚浅，也鲜有技术能有效的解决多图形编队控制问题。中国专利申请CN111259327A《基于子图处理的多智能体系统一致性问题的优化方法》提出的方法为：1）构建多智能体系统的图信号模型；2）对待求解问题加上辅助约束条件；3）子图内局部求逆；4）子图间融合求平均；5）迭代消除误差。发明内容本发明提供一种多图形构型的多智能体编队控制方法和相关产品。本发明的技术方案为：一种多图形构型的多智能体编队控制方法，其特征在于，包括：确定期望编队图、期望编队图对应的多个灰度图以及智能体自身被分配的任务；根据智能体自身以及邻居智能体对期望编队图在物理空间的方位的理解值，更新智能体自身对期望编队图在物理空间的方位的理解值，以使得全部智能体对期望编队图在物理空间的方位的理解值趋于一致；根据图形进入速度指令、图形探索速度指令和交互速度指令控制智能体的运动状态；其中，期望编队图中灰度最大值或灰度最小值表示目标区域，目标区域连接成彼此分离的多个子图，子图为连通图，多个灰度图与多个子图一一对应，每个灰度图划分为目标区域、过渡区域以及非目标区域，目标区域中网格的坐标以及灰度值与对应子图的网格在期望编队图中的坐标以及灰度值均对应相同，过渡区域紧邻目标区域且沿远离目标区域的方向灰度值平滑过渡，非目标区域紧邻过渡区域远离目标区域一侧的边界且灰度值为与目标区域灰度值不同的灰度最小值或灰度最大值，子图中网格与期望编队图中网格的形状及尺寸相等；其中，每一个任务对应一个子图；其中，图形进入速度指令根据对应的灰度图确定，用于驱动智能体自身从目标区域之外朝向目标区域移动；其中，图形探索速度指令根据对应的灰度图确定，用于驱动智能体自身从目标区域的外侧边缘进入目标区域，进一步搜索并占据目标区域内未被其余智能体占据的网格；其中，交互速度指令用于避免碰撞并驱动智能体与周围智能体的速度趋于一致。本发明的技术方案为：一种智能体，包括存储器和处理器，存储器中存储程序，处理器运行该程序以执行前述的多图形构型的多智能体编队控制方法。本发明的技术方案为：一种程序产品，其在运行时执行前述的多图形构型的多智能体编队控制方法。本发明的有益效果包括：在提出的多智能体编队控制方法中，创新地融合了任务分配及智能体控制两部分，合理且高效地解决了多智能体编队问题中的多图形构型实现问题；采用分布式且异步的计算方式，有效降低了对智能体通讯能力的要求，增加了工程可行性；能保证在有限时间内实现编队目标的收敛，且各智能体的局部计算复杂度均在可接受范围内，易于工程实现。附图说明图1是本发明的多图形构型的多智能体编队控制方法的流程图。图2是本发明的智能体中控制器的框图。具体实施方式下面结合具体实施例对本发明作进一步的说明，但本发明的保护范围并不限于此。参考图1，本发明提出的多图形构型的多智能体编队控制方法的流程包括以下步骤。步骤101、确定期望编队图、期望编队图对应的多个灰度图以及智能体自身被分配的任务；步骤102、根据智能体自身以及邻居智能体对期望编队图在物理空间的方位的理解值，更新智能体自身对期望编队图在物理空间的方位的理解值，以使得全部智能体对期望编队图在物理空间的方位的理解值趋于一致；步骤103、根据图形进入速度指令、图形探索速度指令和交互速度指令控制智能体的运动状态；其中，期望编队图中灰度最大值或灰度最小值表示目标区域，目标区域连接成彼此分离的多个子图，子图为连通图，多个灰度图与多个子图一一对应，每个灰度图划分为目标区域、过渡区域以及非目标区域，目标区域中网格的坐标以及灰度值与对应子图的网格在期望编队图中的坐标以及灰度值均对应相同，过渡区域紧邻目标区域且沿远离目标区域的方向灰度值平滑过渡，非目标区域紧邻过渡区域远离目标区域一侧的边界且灰度值为与目标区域灰度值不同的灰度最小值或灰度最大值，子图中网格与期望编队图中网格映射到物理空间后的形状及尺寸相等；其中，每一个任务对应一个子图；其中，图形进入速度指令根据对应的灰度图确定，用于驱动智能体自身从目标区域之外朝向目标区域移动；其中，图形探索速度指令根据对应的灰度图确定，用于驱动智能体自身从目标区域的外侧边缘进入目标区域，进一步搜索并占据目标区域内未被其余智能体占据的网格；其中，交互速度指令用于避免碰撞并驱动智能体与周围智能体的速度趋于一致。在一个示例中，以上三个指令之和等于智能体的预期的速度矢量，由智能体的动力系统控制智能体按照这个预期的速度矢量运动。以上方法的执行主体是多智能体编队中的单个智能体，从硬件角度而言可以是智能体中的控制器，从软件角度而言可以是运行在智能体上的程序。期望编队图、期望编队图对应的多个灰度图是由外部设备输入给智能体的。在期望编队图中，以下以灰度值为0的网格连成的区域表示目标区域，期望编队图中其余区域的网格的灰度为1。示例性地，期望编队图目标区域的形状为“ABC”三个字母的形状，三个字母彼此分离。字母A所占据的目标区域构成一个子图，字母B所占据的目标区域构成一个子图，字母C所占据的目标区域构成一个子图。示例性地，各灰度图的分辨率与期望编队图的分辨率相同。对应于子图A的灰度图中，灰度值为0的网格连接成字母A的形状，且位置和尺寸与期望编队图中字母A的位置和尺寸相同。对应于子图B的灰度图中，灰度值为0的网格连接成字母B的形状，且位置和尺寸与期望编队图中字母A的位置和尺寸相同。对应于子图C的灰度图中，灰度值为0的网格连接成字母C的形状，且位置和尺寸与期望编队图中字母C的位置和尺寸相同。示例性地，各灰度图中，按照远离目标区域的方向，各网格的灰度值从0平滑地过渡至1。在距离目标区域足够远的区域，网格的灰度值均为1。灰度图的网格在数据存储上是一个数据点，映射到物理空间时的形状例如为正方形、正六边形、长方形等形状。以下举例说明中，灰度图的网格正在物理空间的形状为正方形。本发明对如何生成灰度图不做限定。示例性地，智能体覆盖区域形成字母A图案的任务称为任务A，智能体覆盖区域形成字母B图案的任务称为任务B，智能体覆盖区域形成字母C图案的任务称为任务C。智能体具体执行哪一个任务可以是预设的或者由外部设备向智能体输入指令而指定的。需要说明的是，步骤102和步骤103是实时进行的。可选地，智能体自身对目标形状的方位的理解值按照如下公式计算：；；其中，为智能体i对期望编队图在物理空间的速度的理解值，/＞为智能体j对期望编队图在物理空间的速度的理解值，/＞以及/＞，二者均为常量增益，/＞为智能体i的邻居智能体的集合，/＞为符号函数，/＞为2-范数计算符号，/＞为智能体i对期望编队图在物理空间的位置的理解值，/＞为智能体j对期望编队图在物理空间的位置的理解值；其中，c2为正值常量增益，为智能体i对期望编队图在物理空间的方向的理解值，/＞为智能体j对期望编队图在物理空间的方向的理解值。第一个公式中第一项的作用是使智能体i的对目标形状位置的理解值与智能体j对目标形状位置的理解值趋于一致，第二项的作用是使智能体i的对目标形状速度的理解值与智能体j对目标形状速度的理解值趋于一致。第二个公式中第一项的作用是使智能体i的对目标形状方向的理解值与智能体j对目标形状方向的理解值趋于一致，第二项的作用是使智能体i的对目标形状角速度的理解值与智能体j对目标形状角速度的理解值趋于一致。在初始时刻，智能体将自身位置理解为目标形状的位置。在初始时刻，智能体对目标形状方向的理解值可以是随机的，也可以是预设的。本发明中，智能体之间的通信是双向的。取值小于1，这使得关于目标形状方位的一致性协商可以在有限时间内达成，这对于加快谈判进程具有重要意义。在另外的实施方式中，取值为1。目标形状指的是由期望编队图映射到物理空间后全部智能体的编队队形形状。可选地，图形进入速度指令的计算公式为：；其中，为智能体i的图形进入速度指令，k1为正值的控制增益常数，/＞为距离智能体i的中心最近的网格，/＞为网格/＞在智能体i对应的灰度图中的灰度值，/＞为在智能体i对应的灰度图中以网格/＞为中心的设定区域内灰度值与目标区域灰度值最为接近的一个网格在物理空间的位置，/＞为智能体i在物理空间的位置。例如，图形进入速度指令促使智能体沿着灰度值下降的方向朝向目标区域移动。可选地，图形探索速度指令的计算公式为：；其中，为智能体i的图形探索速度指令，/＞为智能体i在物理空间的位置，/＞是网格/＞在物理空间的位置，/＞为智能体i的感知半径，/＞为智能体i对应的灰度图中表示目标区域的网格的集合，/＞表示在智能体i对应的灰度图中被任意智能体所占据的网格，/＞表示在智能体i对应的灰度图中智能体i感知半径内表示目标区域的网格的集合，/＞为正值控制增益常数，/＞是权重函数，/＞是非负函数，满足：，/＞是分段连续函数，且满足/＞。例如，权重函数的计算公式为。当智能体在其对应的目标区域边缘而尚未进入目标区域时，图形探索速度指令会将智能体拉进目标区域；而当智能体进入目标区域后，图形探索速度指令会推动智能体向未被其他智能体占用的图形区域进行探索，进而使得多智能体编队均匀地覆盖目标图形。可选地，交互速度指令的计算公式为：；其中，为智能体i的交互速度指令，/＞为正值的控制增益常数，/＞为智能体i的邻居智能体的集合，oi为智能体i的感知半径内障碍点的集合，/＞为智能体i在物理空间的位置，/＞为智能体或障碍点j在物理空间的位置，/＞为智能体i的速度，/＞为智能体j的速度，为权重函数，且在0到智能体预期距离的区间内单调递减。公式第一项是一个排斥速度，它将智能体i推离周围环境，以避免碰撞。第二项旨在使智能体i的速度与周围智能体的速度保持一致。交互速度指令有助于减少智能体之间发生碰撞的几率，以及帮助多智能体编队最终实现稳定。当期望智能体之间距离尽量小时，预期距离可以为智能体之间的避碰距离。预期距离也可以是大于避碰距离。可选地，权重函数的计算公式为：；可选地，还包括任务分配的步骤：每个智能体通过以下迭代步骤进行策略更新，从而完成任务分配。每个智能体所储存的信息、同时也是每次迭代所需要更新的信息为4元数据组：。其中，/＞是智能体/＞当前所认为的任务分配策略，具体的，是一个从智能体集合/＞到任务集合/＞的映射，具体的，如果在分配策略/＞中将智能体/＞分配去执行任务/＞，则用/＞表示；/＞是满意判据，表示智能体/＞是否对分配策略/＞感到满意，若满意则，表示在分配策略/＞中智能体/＞不愿改变其选择的任务，否则，表示智能体/＞对当前分配不满意；/＞表示智能体/＞的迭代次数；表示时间戳，是一个均匀随机变量，每当智能体/＞更新 策略/＞时随机生成。具体的，每个智能体通过以下迭代步骤进行策略更新：初始时，智能体认为所有智能体均执行空任务，即/＞,为智能体集合；每个智能体/＞的初始迭代次数/＞；每个智能体/＞的初始时间戳si随机生成，即/＞，其中/＞表示生成区间中的随机数；每个智能体/＞的初始满意判据/＞；转。对智能体，若满意判据/＞，则转；否则转。智能体基于当前其所认为的分配策略/＞，选择使智能体/＞自身的当前个体效益最大的任务/＞，即任务/＞满足/＞=/＞，其中/＞表示策略/＞所认为的执行任务/＞的所有智能体的集合，/＞表示集合/＞中元素的个数；智能体/＞更新自身所认为的分配策略/＞，使得/＞；智能体/＞的迭代次数/＞；智能体/＞的满意判据/＞；转。智能体与邻居智能体/＞进行交互，其中/＞表示智能体/＞的邻居集合，即在/＞通信范围内能够双向通信的其他智能体集合。具体地，智能体/＞向所有邻居智能体/＞广播其当前信息，Mi=/＞并接收来自邻居/＞的当前信息，从而获得邻居智能体所认为的分配策略、迭代次数、时间戳、满意状态等信息；智能体/＞在接收了所有邻居智能体的信息后，从所有信息构成的集合中选择迭代次数/＞最大的信息所对应的智能体作为权威智能体，若有若干个相同迭代次数最大的智能体，则通过比对时间戳选择sk最大的智能体作为权威智能体，记选择的权威智能体为/＞；若智能体/＞自身不是权威智能体，即/＞，则用权威智能体的全部信息替代智能体/＞的全部信息，即/＞，然后更新满意状态，转至；若智能体/＞自身恰好是权威智能体，即/＞，则智能体/＞的信息不变，转至。若智能体的满意状态/＞及其接收到的所有邻居/＞的满意状态信息均为1，则智能体/＞终止迭代，输出分配策略/＞，智能体/＞按照当前所认为的分配策略/＞执行；否则，转至。该方法能够在有限步迭代后实现稳定，即每个智能体所认为的分配策略会达成一致，且在该分配策略下，每个智能体都满意当前的状态。因此，通过以上算法可以获得任务分配策略。时间戳初始值是不是也可以默认设置，只要保证所有的智能体彼此时间戳初始值不一致即可。随机生成时间戳初始值时，两个智能体的时间戳初始值相同是小概率事件，可以忽略。其中，一个分配策略的效益可以由全部智能体在该分配策略下的个体效益之和来定义。设有个智能体，/＞个任务，则需要设计合理的算法规则进行任务分配。记表示全体智能体集合，其中/＞表示智能体i，/＞；表示全体任务集合，其中/＞表示任务j，/＞，/＞表示空任务，即智能体当前无任务执行。定义智能体的个体效益/＞，它是智能体i被分配的任务和执行该任务的全部智能体数量/＞的函数。/＞表示智能体/＞在与p-1个同伴执行任务tj时的个体效益。进一步，针对多图形构型的编队任务，定义个体效益为：；其中，为智能体，/＞为/＞选择的任务，/＞表示与/＞共同执行任务tj的同伴数目；/＞表示智能体/＞的位置，/＞表示任务tj的位置；表示执行任务tj的智能体与任务tj之间的最大距离；/＞为权重参数，一般可取0.1-0.5之间；ntj表示任务tj所需要的最少智能体的数量，计算方式为/＞，其中/＞表示任务tj在物理空间覆盖的面积，/＞表示取下整。此个体效用函数的设计能够使得当选择任务tj的智能体数量恰为ntj时，任务tj的群体效益恰好最大。因此，基于该效益函数进行任务分配，会使得分配给任务tj的智能体数量接近ntj，这也更符合实际需求。注意到，效益函数的设计不是唯一的，可根据实际场景需求对其进行调整。对于任意的任务，智能体/＞， 对于任意两个的正整数且满足/＞，必需有/＞。任务分配的步骤可以是在智能体执行编队任务之前进行的。经过上述分布式异步算法，可以让每个智能体均得到相同的分配策略，且该分配策略是纳什稳定的，即任一智能体若改变自身的任务执行选择，其效益均不会变得更大。基于相同的发明构思，本发明还提供一种程序产品，该程序产品在运行时执行前述的多图形构型的多智能体编队控制方法。基于相同的发明构思，参考图2，本发明还提供一种智能体，包括存储器和处理器，存储器存储程序，处理器运行该程序以执行前述的多图形构型的多智能体编队控制方法。本发明中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。本发明的保护范围不限于上述的实施例，显然，本领域的技术人员可以对本发明进行各种改动和变形而不脱离本发明的范围和精神。倘若这些改动和变形属于本发明权利要求及其等同技术的范围，则本发明的意图也包含这些改动和变形在内。
