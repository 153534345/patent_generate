标题title
一种多机器人协同货运控制方法及系统、存储介质
摘要abst
本发明提供了一种多机器人协同货运控制方法及系统、存储介质，其中方法步骤包括：确定多机合体布局，设定多机协同时的合体机器人主运动中心；计算当前各机器人运动中心相对于的坐标，并反馈各机器人车体与自身托盘的当前夹角；根据合体机器人的主运动中心规划导航路径及对应运行速度；将运行速度分解为各机器人的协同指令，以令每个机器人执行。籍此以支持自由调整多机合体布局，以及多机协同时的合体机器人主运动中心，以灵活调整合体机器人的行驶姿态。
权利要求书clms
1.一种多机器人协同货运控制方法，用于控制具有旋转托盘的移动机器人多机协同，步骤包括：确定多机合体布局，设定多机协同时的合体机器人主运动中心；计算当前各机器人运动中心相对于的坐标，并反馈各机器人车体与自身托盘的当前夹角/＞；根据合体机器人的主运动中心规划导航路径及对应运行速度；将运行速度分解为各机器人的协同指令，以令每个机器人执行。2.根据权利要求1所述的多机器人协同货运控制方法，其中所述运行速度包括：前进方向速度、侧向速度/＞ 、角速度W；所述协同指令包括：各机器人的车体与自身托盘的夹角/＞、车体线速度/＞、车体角速度/＞、托盘角速度/＞。3.根据权利要求2所述的多机器人协同货运控制方法，其中机器人车体与自身托盘的夹角的计算步骤包括：计算；其中为机器人首次加入合体机器人时，该机器人车体和自身托盘的夹角。4.根据权利要求2所述的多机器人协同货运控制方法，其中机器人车体线速度的计算步骤包括：计算。5.根据权利要求2所述的多机器人协同货运控制方法，其中车体角速度及托盘角速度/＞的计算步骤包括：计算；计算；计算；其中为将自身托盘和车身保持固定角度的角速度；/＞和/＞为常数，用于确保调整机器人车体能够稳定转到/＞；/＞为上一个控制周期的 /＞。6.一种多机器人协同货运控制方法，用于控制具有旋转托盘的移动机器人多机协同，步骤包括：确定多机合体布局，设定多机协同时的合体机器人主运动中心，在各机器人中确定出主脑，令各机器人向主脑反馈其当前运动中心相对于/＞的坐标，及其车体与自身托盘的当前夹角/＞，其中 i 为每个机器人的编号；主脑根据合体机器人的主运动中心规划导航路径，并确定出主运动中心/＞包括：前进方向速度/＞、侧向速度/＞ 、角速度W在内的规划运行速度；主脑根据运行速度，规划出各机器人的车体与自身托盘的夹角、车体线速度/＞，并加入角速度W和时间戳 tsi，以整合为任务指令下发至各机器人；当各机器人判断时间戳差值达标时，依据任务指令计算出车体角速度、托盘角速度，并与/＞、/＞合并为协同指令执行。7.根据权利要求6所述的多机器人协同货运控制方法，其中、/＞、/＞、/＞的计算步骤包括：计算；计算；其中为机器人首次加入合体机器人时，该机器人车体和自身托盘的夹角；计算；计算；计算；其中为将自身托盘和车身保持固定角度的角速度；/＞和/＞为常数，用于确保调整机器人车体能够稳定转到/＞；/＞为上一个控制周期的 /＞。8.根据权利要求6所述的多机器人协同货运控制方法，其中步骤还包括：在执行协同指令令合体机器人移动前，先令各机器人将其车体旋转至与自身托盘位处夹角处，并反馈其当前运动中心相对于/＞的坐标，当判断某机器人的运动中心位置发生漂移时，令所有机器人停止。9.一种多机器人协同货运控制系统，其包括：存储单元，用于存储包括如权利要求1至8中任一所述多机器人协同货运控制方法步骤的程序，以供合体姿态设定单元，数据传输单元、导航单元、数据采集单元、处理单元适时调取执行；数据采集单元，用于采集当前各机器人运动中心相对于的坐标，及其车体与自身托盘的当前夹角/＞；合体姿态设定单元，用于设定多机协同时的机器人位置，并确定合体机器人主运动中心；导航单元，用于根据合体机器人的主运动中心规划导航路径，并规划其前进方向速度/＞、侧向速度/＞ 、角速度W在内的运行速度；处理单元，用于根据运行速度，计算出各机器人的车体与自身托盘的夹角、车体线速度/＞、车体角速度/＞、托盘角速度/＞在内的协同指令；数据传输单元，用于向各机器人传输协同指令。10.一种计算机可读存储介质，其上存储有计算机程序，其中，所述计算机程序被处理器执行时，实现如权利要求1至8中任一所述多机器人协同货运控制方法的步骤。
说明书desc
技术领域本发明涉及机器人协同控制技术，尤其涉及一种多机器人协同货运控制方法及系统、存储介质。背景技术目前多机器人协同技术在物流搬运领域中有着广泛应用，比如采用多个小机器人协同搬运货物，以适应不同场景及环境条件，从而发挥出多机器人协同控制的优势，以提高运输效率。例如，公开号为CN110989526A的中国发明专利提出了《一种双AGV协同运载控制系统及方法》，此类方案主要采用双全向AGV车来协同运载货物，然而该方案存在机器人协同数量的限制，只能适用于两个机器人协同，因此无法扩展到更多机器人的协同使用场景。而公开号为CN115562288A的中国发明专利提出了《一种有限信息下的多机协同搬运控制方法及其系统、装置》，此类方案虽然支持多机协同搬运货物，但需要至少一台机器人与承载板相连固定，因此合体后的机器人运动中心是固定的，多机合体布局也是固定的，无法自由设定，从而限制了多机协同机器人的合体货运姿态，无法适应复杂的货运场景。发明内容为此本发明的主要目的在于提供一种多机器人协同货运控制方法及系统、存储介质，以支持自由调整多机合体布局，以及多机协同时的合体机器人主运动中心。为了实现上述目的，根据本发明的第一个方面，提供了一种多机器人协同货运控制方法，用于控制具有旋转托盘的移动机器人多机协同，步骤包括：确定多机合体布局，设定多机协同时的合体机器人主运动中心；计算当前各机器人运动中心相对于的坐标，并反馈各机器人车体与自身托盘的当前夹角；根据合体机器人的主运动中心规划导航路径及对应运行速度；将运行速度分解为各机器人的协同指令，以令每个机器人执行。在可能的优选实施方式中，其中所述运行速度包括：前进方向速度、侧向速度 、角速度W；所述协同指令包括：各机器人的车体与自身托盘的夹角、车体线速度、车体角速度、托盘角速度。在可能的优选实施方式中，其中机器人车体与自身托盘的夹角的计算步骤包括：计算；其中为机器人首次加入合体机器人时，该机器人车体和自身托盘的夹角。在可能的优选实施方式中，其中机器人车体线速度的计算步骤包括：计算。在可能的优选实施方式中，其中车体角速度及托盘角速度的计算步骤包括：计算；计算；计算；其中为将自身托盘和车身保持固定角度的角速度；和为常数，用于确保调整机器人车体能够稳定转到；为上一个控制周期的 。为了实现上述目的，根据本发明的第二个方面，提供了一种多机器人协同货运控制方法，步骤包括：确定多机合体布局，设定多机协同时的合体机器人主运动中心，在各机器人中确定出主脑，令各机器人向主脑反馈其当前运动中心相对于的坐标，及其车体与自身托盘的当前夹角，其中 i 为每个机器人的编号；主脑根据合体机器人的主运动中心规划导航路径，并确定出主运动中心包括：前进方向速度、侧向速度 、角速度W在内的规划运行速度；主脑根据运行速度，规划出各机器人的车体与自身托盘的夹角、车体线速度，并加入角速度W和时间戳 tsi，以整合为任务指令下发至各机器人；当各机器人判断时间戳差值达标时，依据任务指令计算出车体角速度、托盘角速度，并与、合并为协同指令执行。在可能的优选实施方式中，其中、、、的计算步骤包括：计算；计算；其中为机器人首次加入合体机器人时，该机器人车体和自身托盘的夹角；计算；计算；计算；其中为将自身托盘和车身保持固定角度的角速度；和为常数，用于确保调整机器人车体能够稳定转到；为上一个控制周期的 。在可能的优选实施方式中，所述的多机器人协同货运控制方法，用于控制具有旋转托盘的移动机器人多机协同，步骤还包括：在执行协同指令令合体机器人移动前，先令各机器人将其车体旋转至与自身托盘位处夹角处，并反馈其当前运动中心相对于的坐标，当判断某机器人的运动中心位置发生漂移时，令所有机器人停止。为了实现上述目的，根据本发明的第三个方面，提供了一种多机器人协同货运控制系统，其包括：存储单元，用于存储包括如上中任一所述多机器人协同货运控制方法步骤的程序，以供合体姿态设定单元，数据传输单元、导航单元、数据采集单元、处理单元适时调取执行；数据采集单元，用于采集当前各机器人运动中心相对于的坐标，及其车体与自身托盘的当前夹角；合体姿态设定单元，用于设定多机协同时的机器人位置，并确定合体机器人主运动中心；导航单元，用于根据合体机器人的主运动中心规划导航路径，并规划其前进方向速度、侧向速度 、角速度W在内的运行速度；处理单元，用于根据运行速度，计算出各机器人的车体与自身托盘的夹角、车体线速度、车体角速度、托盘角速度在内的协同指令；数据传输单元，用于向各机器人传输协同指令。为了实现上述目的，根据本发明的第四个方面，提供了一种计算机可读存储介质，其上存储有计算机程序，其中，所述计算机程序被处理器执行时，实现如上中任一所述多机器人协同货运控制方法的步骤。通过本发明的多机器人协同货运控制方法及系统、存储介质，其有益效果包括：本方案能够巧妙的以主运动中心，及当前机器人所处布局位置与转向角度为依据，来协调各机器人的协同任务，以自由调整合体机器人的行驶姿态，从而达到能够支持自由调整多机合体的布局，来灵活适配各种形态的货物运输，同时由于本发明的方案支持多机协同时的合体机器人的主运动中心自主可调，使得合体机器人能够在行驶过程中自由调整行驶姿态，以规避各种障碍来适应复杂路况，因此能够广泛的应用于各种货运场景，使得多机协同货运时，能够具有更强的灵活自由性。附图说明构成本申请的一部分的附图用来提供对本发明的进一步理解，本发明的示意性实施例及其说明用于解释本发明，并不构成对本发明的不当限定。在附图中：图1为本发明的多机器人协同货运控制方法的步骤示意图；图2为本发明的多机器人协同货运控制方法中，示例4个移动机器人协同为合体机器人的布局形态示意图；图3为本发明的多机器人协同货运控制方法逻辑流程示意图；图4为本发明的多机器人协同货运控制方法中，示意各协同机器人的相关参数的示意图；图5为本发明的多机器人协同货运控制方法中，示意执行协同指令时进行时间戳判断流程的示意图；图6-图7为本发明的多机器人协同货运控制方法中，示意执行协同指令时，沿不同的路径行驶时，各协同机器人的姿态变化过程的示意图；图8为本发明的多机器人协同货运控制方法中，示意主运动中心位置可以自由设置，以调整合体机器人的行驶姿态规避障碍物的示意图；图9-10为本发明的多机器人协同货运控制方法中，示意不同数量的协同机器人，在对应承载形态复杂的货物搬运时，各机器人可以自由调整合体布局进行适配，并自由设置合体机器人主运动中心位置，以灵活调整合体机器人沿导航路径行驶的姿态的示意图；图11为本发明的多机器人协同货运控制系统结构示意图。附图标记说明货物1，导航路径5，机器人2，托盘3，合体机器人主运动中心4。具体实施方式为了使本领域的技术人员能够更好的理解本发明的技术方案，下面将结合实施例来对本发明的具体技术方案进行清楚、完整地描述，以助于本领域的技术人员进一步理解本发明。显然，本案所描述的实施例仅仅是本发明一部分的实施例，而不是全部的实施例。应当指出的是，对本领域的普通技术人员来说，在不脱离本发明构思及相互不冲突的前提下，本申请中的实施例及实施例中的特征可以相互组合。基于本发明中的实施例，在本领域普通技术人员没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本发明的揭露及保护范围。此外本发明的说明书和权利要求书及附图中的术语“第一”、“第二”、“S100”、“S200”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的特征在适当情况下可以互换，以便这里描述的本发明的实施例能够以除了在这里描述的那些以外的顺序实施。同时本发明中的术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含。除非另有明确的规定和限定，术语“设置”、“布设”、“安装”、“相连”、“连接”应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通。对于本领域的普通技术人员而言，可以根据具体情况，结合现有技术来理解上述术语在本案中的具体含义。为了支持自由调整多机合体布局，以及多机协同时的合体机器人主运动中心，如图1至图10所示，本发明提供了一种多机器人协同货运控制方法，其主要通过控制具有旋转托盘的移动机器人多机协同，以组成多舵轮机器人形态来实现上述功能，其中该方法步骤主要包括：步骤S100确定多机合体布局，设定多机协同时的合体机器人主运动中心。具体的，本发明示例的该方法，并不限制协同的移动机器人数量，实施时，可以根据不同的货物形态，由实施者自行进行调整，只要能够可靠的协同承载货物即可，因此也同样不限制多机协同时的布局，如图4、图9、图10所示，组合后的合体机器人的多机布局可以各不相同。为了更好的说明本发明的实施过程，以图2、图4为例，本发明示例了4个移动机器人协同货运的实施过程。其中实施者可根据货物的具体形态选择足够数量的移动机器人进行布局调整，以建立对货物良好的支撑后，便可确定以该数量和布局开始进行多机协同组成合体机器人运行。进一步的，由于本示例中，定义合体机器人行驶时，是以主运动中心沿着规划导航路径行驶的模式，因此只要掌握和确定了该主动中心的位置，便可自由调整合体机器人的行驶姿态，如图2所示，该示例中，合体机器人主运动中心示例设置在货物的大致中心位置。步骤S200计算当前各机器人运动中心相对于的坐标，并反馈各机器人车体与自身托盘的当前夹角，其中 i 为每个机器人的编号。具体的，当步骤S100中确定了主运动中心后，可以示例以其为原点，建立平面世界坐标系，籍此便可计算出当前各机器人运动中心相对于的坐标，以知晓当前各个协同机器人所处世界坐标系中的布局位置。同时由于本示例的合体机器人是多舵轮形态，因此也必须掌握当前每个参与协同的机器人的车体与自身托盘的当前夹角，从而才能在后续为其分配协同任务，以参与合体行驶。此外，由于合体机器人在协同运输的过程中，因为各种原因，例如：路况颠簸、打滑、阻挡等因素，都可能会改变当前的多机协同布局，从而影响后续协同任务的规划，甚至严重时还会引起货物脱落，或行驶异常事故发生。因此，为了避免此类问题发生，在可选示例中，可通过判断各机器人运动中心的偏移情况，来进行察觉，例如：步骤S210当各机器人最初加入协同组，组成合体机器人后，可将此时获取的各机器人运动中心坐标，记为初始运动中心坐标，后续可要求各机器人时常/实时反馈其当前运动中心坐标以与之间计算偏移量，当超出所设阈值时，则视为布局存在崩塌风险，此时需要及时报错并停止所有机器人，以免事故发生。当然若该偏移量未超出所设阈值时，则可选根据该反馈的运动中心坐标实时更新后续协同指令的计算，从而形成更为精确的合体机器人行驶姿态控制效果。步骤S300根据合体机器人的主运动中心规划导航路径及运行速度。具体的，在本示例中，由于合体机器人行驶时，是以主运动中心沿着规划导航路径行驶的模式，因此只要掌握和确定了该主动中心的位置，便可调整合体机器人的行驶姿态，因此当上述步骤确定出了合体机器人的主运动中心，便可把合体机器人当做是一个多舵轮移动机器人来看待，以根据现有导航技术进行路径规划，并规划出相应的运行速度。例如对于多舵轮移动机器人来说，其运行速度主要包括：前进方向速度、侧向速度、角速度W。步骤S400将运行速度分解为包括：各机器人的车体与自身托盘的夹角、车体线速度、车体角速度、托盘角速度的协同指令，以令每个机器人执行。具体的，在本示例中，对于合体机器人中各机器人所扮演的舵轮角色来说，每个机器人都分别有其在协同过程中所要执行的行动任务，如图4所示，需要分别进行计算，然后统一执行才能确保协同性，并调整出合体机器人所需的行驶姿态。例如，本示例中，机器人车体与自身托盘的夹角的计算步骤包括：计算 ；其中为机器人首次加入合体机器人时，该机器人车体和自身托盘的夹角。其中机器人车体线速度的计算步骤包括：计算 。 其中各机器人的角速度主要由两部分构成，一部分是让随动托盘和车身保持固定角度的角速度，另一部分则是行驶速度中的角速度W，为此车体角速度及托盘角速度的计算步骤包括：计算；计算；计算；其中为将自身托盘和车身保持固定角度的角速度；和为常数，用于确保调整机器人车体能够稳定转到；为上一个控制周期的 。经此将运行速度分解为各个机器人所要执行的协同指令后，实际上要确保的是主运动中心始终沿着规划的导航路径移动，因此在执行协同指令时，如图6至图7所示，合体机器人在移动前，各机器人可先调整车体与自身托盘的夹角旋转到位，然后再行驶，同时由于考虑到各机器人在旋转的过程中，可能会遇到阻挡或不可预期的问题，造成某机器人的运动中心位置偏移，因此在行驶前，可选执行步骤S210的漂移判断程序，只有通过判断时才允许行驶，以确保合体机器人行驶的安全性。此外，需要说明的是，基于上述示例的方法构思，可存在多种同等替代实施方式，例如可以将上述方法示例中的各个计算/规划步骤运行在一个总的计算设备上如服务器上，并通过服务器与各机器人建立通信连接，来接收各机器人的反馈信息，并由服务器下发协同指令来协调各机器人执行。同时也可选择令参与协同的机器人来分担、或推举出的某一个/一些机器人来提供算力并与各机器人建立通信连接，以接收各机器人的反馈，并进行总协调控制命令下达，以形成多机本地协同实施。因此，在上述示例的基础上，本发明还提出了一种多机器人协同货运控制方法，以利用本地机器人的算力来进行该方法步骤的实施，其中该方法步骤主要包括：步骤S100’确定多机合体布局，设定多机协同时的合体机器人主运动中心，在各机器人中确定出主脑。其中该主脑即主控机器人，该主脑可以根据预设方式推举或设定，也可随机指定，本示例并不做限制。步骤S200’令各机器人向主脑反馈其当前运动中心相对于的坐标，及其车体与自身托盘的当前夹角。其中该主脑与各协同机器人间可以采用无线通讯方式交换数据下达指令。步骤S300’主脑根据合体机器人的主运动中心规划导航路径，并确定出主运动中心包括：前进方向速度、侧向速度 、角速度W在内的规划运行速度。步骤S400’主脑根据运行速度，规划出各机器人的车体与自身托盘的夹角、车体线速度，并加入角速度W和时间戳tsi，以整合为任务指令下发至各机器人。其中主脑下发给每个机器人的任务指令task包括 。步骤S500’当各机器人判断时间戳差值达标时，依据任务指令计算出车体角速度、托盘角速度，并与、合并为协同指令执行。具体的，在进行多机协同时，为了协调每个机器人的运动节奏，避免存在行动不同步的问题，本示例以时间戳tsi为手段，当机器人执行任务指令时，首先会先分析任务指令中的时间戳 tsi 和自己当前时间戳的差值，如果差值大于阈值范围，就表明网络异常，或者主机器人出现了故障，需要减速/停止并且报错，从而杜绝安全隐患。如果判断通过，则各机器人进一步执行该任务指令，以分别利用自身算力，依据任务指令计算出车体角速度、托盘角速度，并与、合并为协同指令执行。此外，为了确定多机协同布局的完整性，在可选示例中，该方法步骤还包括：步骤S600’在执行协同指令令合体机器人移动前，先令各机器人将其车体旋转至与自身托盘位处夹角处，并向主脑反馈其当前运动中心相对于的坐标，当判断某机器人的运动中心位置发生漂移超过阈值时，则视为布局存在崩塌风险，此时需要及时报错并停止所有机器人，以免事故发生。实验例一以下，以图6所示的合体机器人沿着斜向直线导航路径，以保持货物朝向的斜直线行驶姿态为例进行示例性说明。1.1 当根据步骤S100’确定了合体布局，并设定合体机器人主运动中心后，假设图6中，根据步骤S300’规划的货运导航路径是-45度的斜线路径，同时合体机器人对应规划的运行速度假设为：= 0.1 m/s,  = -0.1 m/s, W = 0 rad/s。1.2 假设各机器人的初始布局位置如图6所示，则根据步骤S200’向主脑反馈各机器人运动中心的坐标为：机器人1的坐标为 , 机器人2 的坐标为 ， 机器人3的坐标为，机器人四的坐标为。1.3 执行步骤S600’校验各机器人的坐标中心位置是否发生过大的漂移。如果漂移距离大于报错阈值则报错。漂移报错阈值，可以按货物的精度要求和形状确定。可以配置为4倍的随动机器人的定位精度。比如随动机器人的定位精度为正负5mm的话，那么漂移报错阈值为 2cm。1.4 此时，根据步骤S400’依据公式1和公式2，假设各机器人的为0，则可以计算出主脑给自己下发的任务指令task为，给机器人2下发的task为，给机器人3下发的task为，给机器人4下发的task为。1.5各机器人每个控制周期都会执行一次图5中的流程，基于PI算法，并且考虑真实车子角加速度限制，根据步骤S500’通过公式3至公式5算出各机器人的 ；其中公式3中的Ki和Kd为常数，以供令其调节到使随动车能够稳定转到，例如可以给定Ki=1.0，Kd=1.0。而的初值可以设置为0。此时由于各机器人收到的任务指令是相同的，假设选择其中任意一个机器人，例如机器人1和随动托盘的夹角为0，也是为0，那么依据公式3，可以计算得到为90°/s。由于需要考虑到车子最大角加速度的限制，假设为90°/s2，并且运动控制的周期为20ms，那么实际机器运动角速度在满足角加速度限制下为1.8°/s。由于下发的为0，依据公式4，从机器人的角速度为1.8°/s。依据公式5，托盘角速度为-1.8°/s。而机器人的线速度就是任务指令中的0m/s。据此，每个机器人会以20ms为控制周期，依据图5中的流程，基于主脑机器人下发的任务指令，当前自身随动托盘的角度，角速度，和当前车体角速度，迭代计算出自己的角速度，托盘角速度和线速度。1.6当所有机器人达到如图6所示的准备移动姿态时，依据公式2，主脑给自己下发的task为,给机器人2下发的task为，给机器人3下发的task为，给机器人4下发的task为。籍此主脑可以依据当前线路规划出来的速度和角速度，实时调节每个机器人的任务指令，从而实现合体机器人的运动中心沿着导航路径移动。实验例二以下以图7所示，以合体机器人沿着曲线导航行驶为例进行示例说明。其中该示例中分两个阶段进行，第一个阶段需要将合体机器人的朝向旋转到位，第二阶段令合体机器人沿着曲线导航行驶。具体逻辑可参照图3所示进行。下面分阶段说明。第一阶段，令合体机器人朝向和所在导航路径的切线方向平行。合体机器人初始位姿如图7的开始姿态所示，然后合体机器人会经历图7中的原地调整角度姿态和角度调整完成姿态。1.1 由于曲线导航路径规划已知，此时可以规划出合体机器所需的运行速度，合体机器人需要先将货物原地旋转和所在路径的切线方向保持平行。因此合体机器人的运行速度假设规划为= 0 m/s, = 0 m/s, W = -0.1 rad/s。1.2 假设各机器人的初始布局位置如图7所示，向主脑反馈各机器人运动中心的坐标为：机器人1的坐标为 , 机器人2 的坐标为 ， 机器人3的坐标为，机器人四的坐标为。1.3 校验各机器人的坐标中心位置是否发生过大的漂移。如果漂移距离大于报错阈值则报错。漂移报错阈值，可以按货物的精度要求和形状确定。可以配置为4倍的随动机器人的定位精度。比如随动机器人的定位精度为正负5mm的话，那么漂移报错阈值为 2cm。1.4依据公式1和公式2，假设所有机器人为0，可以计算出主脑给自己下发的task为,给机器人2下发的task为，给机器人3下发的task为，给机器人4下发的task为。1.5可参考实验例一的步骤1.5，根据控制周期，依据图5中的流程，基于主脑机器人下发的任务指令，当前自身随动托盘的角度，角速度，和当前车体角速度，迭代计算出自己的角速度，托盘角速度和线速度。1.6当各机器人达到如图7所示的原地调整角度姿态时，依据公式2，主机器人给自己下发的task 为, 给机器人2下发的task 为，给机器人3下发的 task 为，给机器人4下发的 task 为 ，从而原地旋转调整合体机器人姿态1.7 当合体机器人的角度调整到如图7所示的角度调整完成姿态后，进入第二阶段。第二阶段，合体机器人沿着曲线导航。2.1 当合体机器人的姿态达到如图7中角度调整完成姿态后。计算出合体机器人沿曲线所需的运行速度，假设路径曲线的曲率为-0.1m-1，那么规划的运行速度为= 0.1 m/s, = 0 m/s, W = -0.01 rad/s。2.2向主脑反馈各机器人运动中心的当前坐标。2.3校验各机器人的坐标中心位置是否发生过大的漂移。2.4 依据公式1和公式2，假设所有机器人为0，主脑给自己下发的task 为, 给机器人2下发的task 为 ，给机器人3下发的 task 为，给机器人4下发的 task 为。2.5各机器人通过公式3至公式5算出自身、。2.6当监控到所有机器人达到如图7所示的准备移动姿态时。依据公式2，主脑给自己下发的task为,给机器人2下发的task为，给机器人3下发的task为，给机器人4下发的task为。籍此主脑机器人可以依据当前线路规划出来的速度和角速度，实时调节每个机器人的任务指令，从而实现合体机器人的运动中心沿着导航路径曲线移动。实验例三以下，为了展示本发明的方法能够支持自由调整合体机器人的主运动中心位置，以改变合体机器人行驶姿态来规避障碍，以图8所示为例，展示了合体机器人调整主运动中心后沿着曲线导航规避障碍的示例。假设以机器人1为主脑，当确定出新的主运动中心坐标相对于主脑机器人的坐标x为0.1米，y为-1.0米，theta=0度时。可以计算出所有机器人运动中心相对于新主运动中心的坐标。假设此时每个机器人的初始运动中心位置为：机器人1的坐标为 , 机器人2 的坐标为 ， 机器人3的坐标为，机器人四的坐标为。假设合体机器人的朝向已经和线路相切，合体机器人开始沿曲线导航。此时计算出合体机器人沿曲线所需的运行速度，假设曲线的曲率为-0.5 m-1，则运行速度规划为： = 0.1 m/s, = 0 m/s, W = -0.05rad/s。此时依据公式2，主脑给自己下发的task 为, 给机器人2下发的task 为 ，给机器人3下发的 task 为，给机器人4下发的task 为。之后，合体机器人就可以按设定在边缘的点，作为主运动中心沿着轨迹移动，从而躲避障碍物，之后沿着曲线导航步骤可以参考上述实验例二进行。由此可见，实际上本发明的方案，可以允许合体机器人在行驶过程中的任何时刻，来调整其主运动中心，从而灵活自由的改变其行驶姿态，以适应复杂环境。实验例四以下，以图9所示为例，展示了四台非均匀分布的机器人，组成合体机器人搬运箭头形货物的实施示例。其中，当合体机器人不约束各机器人的布局位置时，合体机器人可以更灵活的搬运非规则货物。如图9所示，展示了合体机器人搬运一个箭头形货物。假设机器人1为主脑机器人，同时自由设定的合体机器人主运动中心为箭头形货物的一角处，此时假设该合体机器人主运动中心坐标，相对于主脑机器人的坐标的x为-0.5米，y为-0.5米，theta=0度。之后，计算出所有机器人相对于合体机器人主运动中心的坐标。每个机器人的布局位置如图9所示。机器人1的坐标为,机器人2的坐标为，机器人3的坐标为，机器人3的坐标为。假设合体机器人的朝向已经和线路相切，合体机器人开始沿曲线导航。计算出合体机器人沿曲线所需的运行速度，可以假设曲线的曲率为-0.5m-1，那么运行速度为=0.1m/s，=0m/s，W=-0.05rad/s。之后依据公式2，主脑给自己下发的task为,给机器人2下发的task为，给机器人3下发的task为，给机器人4下发的task为。这样就完成了在该协同布局下，以新的主运动中心点行驶的设定，之后沿着曲线导航步骤可以参考上述实验例二进行。由此可知，通过该方法，可以支持任意位置布局的多个机器人组成的合体机器人搬运非规则货物，并且让非规则货物以夸张的边缘点为主运动中心，以供沿着曲线轨迹移动，从而展现了合体机器人货运行驶过程中，姿态调整的灵活性。实验例五以下，以图10所示为例，展示了三台机器人组成合体机器人，搬运三角形货物的实施示例。其中本发明的方法，其实施时，支持自由配置合体机器人中机器人的数量，这样合体机器人可以更加高效灵活的运输任意形状的货物。如图10展示了合体机器人搬运一个三角形货物，此时仅需要3台机器人便可完成稳定的承载，所以无需安排更多机器人加入。假设此时以机器人1为主脑机器人，在当前3台机器人的布局下，设定合体机器人新的主运动中心坐标相对于主脑机器人的坐标x为0.1米，y为-0.1米，theta=0度。之后，计算出所有机器人相对于合体机器人主运动中心的坐标。每个机器人的初始位置如图10所示。机器人1的坐标为,机器人2的坐标为，机器人3的坐标为。假设合体机器人的朝向已经和线路相切，合体机器人开始沿曲线导航。计算出合体机器人沿曲线所需的运行速度，假设曲线的曲率为-0.5 m-1，那么运行速度为 =0.1m/s，=0m/s，W = -0.05rad/s。之后，依据公式2，主脑给自己下发的task为,给机器人2下发的task为，给机器人3下发的task为。这样就完成了在该协同布局下，以新的主运动中心点行驶的设定，之后沿着曲线导航步骤可以参考上述实验例二进行。由此可知，通过该方法，可以支持任意数量的机器人组成合体机器人，来搬运非规则货物，并且让非规则货物以夸张的边缘点为主运动中心，以供沿着曲线轨迹移动，从而展现了合体机器人布局的灵活性，以及其货运行驶过程中，姿态调整的灵活性。另一方面，对应上述方法示例，如图11所示，本发明还提供了一种多机器人协同货运控制系统，其包括：存储单元，用于存储包括如上中任一所述多机器人协同货运控制方法步骤的程序，以供合体姿态设定单元，数据传输单元、导航单元、数据采集单元、处理单元适时调取执行；数据采集单元，用于采集当前各机器人运动中心相对于的坐标，及其车体与自身托盘的当前夹角；合体姿态设定单元，用于设定多机协同时的机器人位置，并确定合体机器人主运动中心；导航单元，用于根据合体机器人的主运动中心规划导航路径，并规划其前进方向速度、侧向速度 、角速度W在内的运行速度；处理单元，用于根据运行速度，计算出各机器人的车体与自身托盘的夹角、车体线速度、车体角速度、托盘角速度在内的协同指令；数据传输单元，用于向各机器人传输协同指令。其中本示例中所述机器人优选包括：移动底盘、托盘、旋转装置，主控制器，其中所述移动底盘可以是各类智能移动机器人，所述旋转装置设置在移动底盘上，所述托盘与旋转装置的旋转端连接，以控制托盘与移动底盘呈相对旋转，且旋转角度可控，所述旋转装置与移动底盘分别与主控制器连接受控，所述主控器与数据传输单元通信连接，各机器人的所述托盘用于联合承载货物，以多机协同组成多舵轮合体机器人。另一方面，对应上述方法示例，本发明还提供了一种计算机可读存储介质，其上存储有计算机程序，其中，所述计算机程序被处理器执行时，实现如上中任一所述多机器人协同货运控制方法的步骤。综上所述，通过本发明的多机器人协同货运控制方法及系统、存储介质，够巧妙的以主运动中心，及当前机器人所处布局位置与转向角度为依据，来协调各机器人的协同任务，以自由调整合体机器人的行驶姿态，从而达到能够支持自由调整多机合体的布局，来灵活适配各种形态的货物运输，同时由于本发明的方案支持多机协同时的合体机器人的主运动中心自主可调，使得合体机器人能够在行驶过程中自由调整行驶姿态，以规避各种障碍来适应复杂路况，因此能够广泛的应用于各种货运场景，使得多机协同货运时，能够具有更强的灵活自由性。以上公开的本发明优选实施例只是用于帮助阐述本发明。优选实施例并没有详尽叙述所有的细节，也不限制该发明仅为所述的具体实施方式。显然，根据本说明书的内容，可作很多的修改和变化。本说明书选取并具体描述这些实施例，是为了更好地解释本发明的原理和实际应用，从而使所属技术领域技术人员能很好地理解和利用本发明。本发明仅受权利要求书及其全部范围和等效物的限制，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。本领域技术人员可以理解，除了以纯计算机可读程序代码方式实现本发明提供的系统、装置及其各个模块以外，完全可以通过将方法步骤进行逻辑编程来使得本发明提供的系统、装置及其各个模块以逻辑门、开关、专用集成电路、可编程逻辑控制器以及嵌入式微控制器等的形式来实现相同程序。所以，本发明提供的系统、装置及其各个模块可以被认为是一种硬件部件，而对其内包括的用于实现各种程序的模块也可以视为硬件部件内的结构；也可以将用于实现各种功能的模块视为既可以是实现方法的软件程序又可以是硬件部件内的结构。此外实现上述实施例方法中的全部或部分步骤是可以通过程序来指令相关的硬件来完成，该程序存储在一个存储介质中，包括若干指令用以使得单片机、芯片或处理器执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。此外，本发明实施例的各种不同的实施方式之间也可以进行任意组合，只要其不违背本发明实施例的思想，其同样应当视为本发明实施例所公开的内容。
