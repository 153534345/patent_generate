标题title
采掘装备数字孪生系统的数据传输参数优化方法
摘要abst
本发明涉及一种采掘装备数字孪生系统的数据传输参数优化方法，属于智能煤矿技术领域。包括：确定屏幕更新时间间隔tz；测量从传感器至OPC的第一时间间隔的最小值T1 min、MQTT将数据转存至系统内存的第二时间间隔的最小值T2 min、从系统内存调用数据执行模型动作方法的第三时间间隔的最小值T3 min、采掘装备以最快速度运动单位分辨精确度的最大速度vmax及运动单位分辨精确度的最大转动幅度sj，根据vmax和sj确定单位分辨精确度时间tj；根据上述参数建立约束条件和目标函数；求解目标函数得到最优参数。本发明可以保证数据传输的实时性和精准性，确保少丢值，能节省资源。
权利要求书clms
1.一种采掘装备数字孪生系统的数据传输参数优化方法，其特征在于，包括：S1，确定采掘装备数字孪生系统的单位分辨精确度和屏幕更新率f，并根据屏幕更新率f确定屏幕更新时间间隔tz；S2，根据采掘装备数字孪生系统的数据传输路线上的采掘装备、传感器、OPC和MQTT，测量从传感器至OPC过程的第一时间间隔T1的最小值T1 min、MQTT将数据转存至系统内存过程的第二时间间隔T2的最小值T2 min、从系统内存调用数据执行模型动作方法过程的第三时间间隔T3的最小值T3 min、采掘装备以最快速度运动单位分辨精确度的最大速度vmax及采掘装备以最快速度运动单位分辨精确度的最大转动幅度sj，并根据vmax和sj确定单位分辨精确度时间tj；S3，根据T1 min，T2 min，T3 min，T1、T2和T3之间的关系，tz和tj建立约束条件和目标函数；S4，求解目标函数满足所述约束条件的解，得到采掘装备数字孪生系统进行数据传输的最优参数。2.根据权利要求1所述的采掘装备数字孪生系统的数据传输参数优化方法，其特征在于，所述S1在根据屏幕更新率f确定屏幕更新时间间隔tz时，通过如下公式实现：tz=1/f。3.根据权利要求1所述的采掘装备数字孪生系统的数据传输参数优化方法，其特征在于，所述S2在根据vmax和sj确定单位分辨精确度时间tj时，通过如下公式实现：tj=sj/vmax。4.根据权利要求1或2或3所述的采掘装备数字孪生系统的数据传输参数优化方法，其特征在于，所述S3根据T1 min，T2 min，T3 min，T1、T2和T3之间的关系，tz和tj建立的约束条件为：T1=T1 min，T2=aT1，T2＞T2 min，T2→T1，T3=abT1，T3＞T3 min，T3≤tj，T3→tj，T3≥tz；建立的目标函数为：Minimize T3=abT1；其中，a和b为决策变量且均为正整数。5.根据权利要求4所述的采掘装备数字孪生系统的数据传输参数优化方法，其特征在于，所述S4在求解目标函数满足所述约束条件的解，得到采掘装备数字孪生系统进行数据传输的最优参数时，包括：S41，使用整数规划求解器确定目标函数满足所述约束条件的决策变量a和b的可行取值，得到T3的可行解；S42，根据参数优化目的从T3的可行解中选择最优的T3作为采掘装备数字孪生系统数据传输路线中执行模型动作方法的最优时间间隔。
说明书desc
技术领域本发明涉及智能煤矿技术领域，尤其涉及一种采掘装备数字孪生系统的数据传输参数优化方法。背景技术当前，煤矿井下采掘装备数字孪生系统的数据传输路线为传感器-PLC-OPC-MQTT-系统内存-模型动作方法，推动煤矿设备管理与监测水平需要依托数字孪生系统，而构建数字孪生系统需借助这一数据传输路线。这条数据传输路线中具体进行数据传输的方式为：传感器负责监测采掘装备的实时数据，以固定频率进行数据采集，将数据传输至PLC，记该环节的时间间隔为t1。PLC接收并处理数据，执行预设的控制逻辑，并传递处理后的数据，记该环节的时间间隔为t2。OPC将PLC处理后的数据以标准格式传输，记该环节的时间间隔为t3。MQTT接收OPC传来的数据，并通过消息队列的方式将数据转发至系统内存，记MQTT转发数据时间间隔为t4。数据被采掘装备数字孪生系统的模型动作方法调用进行计算，这段时间间隔记为t5。最后，通过采掘装备数字孪生系统的模型渲染运动将计算出的姿态数据转化为屏幕上可视化的模型运动，实时呈现在用户界面上，记每次模型渲染运动的时间为t6。其中由于环节本身限制可视为固定参数的有t1、t2、t3、t6，人工容易设置的参数有t4、t5。当前，采掘装备数字孪生系统在确定数据传输参数时，通常倾向于将各个环节的更新频率调整至性能允许的最快水平，以追求更高的实时性和性能。然而，这种做法不仅会丢掉部分传输数据，造成资源浪费，而且这样也并不意味着当下的总时延为最佳。发明内容为解决上述技术问题，本发明提供一种采掘装备数字孪生系统的数据传输参数优化方法。本发明的技术方案如下：一种采掘装备数字孪生系统的数据传输参数优化方法，其包括：S1，确定采掘装备数字孪生系统的单位分辨精确度和屏幕更新率f，并根据屏幕更新率f确定屏幕更新时间间隔tz；S2，根据采掘装备数字孪生系统的数据传输路线上的采掘装备、传感器、OPC和MQTT，测量从传感器至OPC过程的第一时间间隔T1的最小值T1 min、MQTT将数据转存至系统内存过程的第二时间间隔T2的最小值T2 min、从系统内存调用数据执行模型动作方法过程的第三时间间隔T3的最小值T3 min、采掘装备以最快速度运动单位分辨精确度的最大速度vmax及采掘装备以最快速度运动单位分辨精确度的最大转动幅度sj，并根据vmax和sj确定单位分辨精确度时间tj；S3，根据T1 min，T2 min，T3 min，T1、T2和T3之间的关系，tz和tj建立约束条件和目标函数；S4，求解目标函数满足所述约束条件的解，得到采掘装备数字孪生系统进行数据传输的最优参数。可选地，所述S1在根据屏幕更新率f确定屏幕更新时间间隔tz时，通过如下公式实现：tz=1/f。可选地，所述S2在根据vmax和sj确定单位分辨精确度时间tj时，通过如下公式实现：tj=sj/vmax。可选地，所述S3根据T1 min，T2 min，T3 min，T1、T2和T3之间的关系，tz和tj建立的约束条件为：T1=T1 min，T2=aT1，T2＞T2 min，T2→T1，T3=abT1，T3＞T3 min，T3≤tj，T3→tj，T3≥tz；建立的目标函数为：Minimize T3=abT1；其中，a和b为决策变量且均为正整数。可选地，所述S4在求解目标函数满足所述约束条件的解，得到采掘装备数字孪生系统进行数据传输的最优参数时，包括：S41，使用整数规划求解器确定目标函数满足所述约束条件的决策变量a和b的可行取值，得到T3的可行解；S42，根据参数优化目的从T3的可行解中选择最优的T3作为采掘装备数字孪生系统数据传输路线中执行模型动作方法的最优时间间隔。上述所有可选技术方案均可任意组合，本发明不对一一组合后的结构进行详细说明。借由上述方案，本发明的有益效果如下：通过根据传感器和模型渲染运动这两个环节受采掘装备实际运动分辨精确度限制和模型显示帧数限制的原因，确定屏幕更新时间间隔和单位分辨精确度时间，并通过测量各环节的最小时间间隔，以此为依据构建约束条件和目标函数，进而求解目标函数的最优参数，提供了一种根据数据传输路线中各环节的实际工作情况，来确定采掘装备数字孪生系统执行模型动作方法最优参数的方法，通过该方法可以在保证数据传输的实时性和精准性的前提下，合理分配各个环节的查询频率，确保少丢值的同时，能够达到采掘装备现场的传输时延要求，并能够节省资源。上述说明仅是本发明技术方案的概述，为了能够更清楚了解本发明的技术手段，并可依照说明书的内容予以实施，以下以本发明的较佳实施例并配合附图详细说明如后。附图说明图1是本发明一个实施例提供的采掘装备数字孪生系统的数据传输参数优化方法流程图。图2是本发明另一个实施例提供的采掘装备数字孪生系统的数据传输参数优化方法流程图。具体实施方式下面结合附图和实施例，对本发明的具体实施方式作进一步详细描述。以下实施例用于说明本发明，但不用来限制本发明的范围。如图1所示，本发明实施例提供了一种采掘装备数字孪生系统的数据传输参数优化方法。在本发明实施例中，将采掘装备数字孪生系统的数据传输路线规划为：传感器-PLC-OPC-MQTT-系统内存-模型动作方法，这条数据传输路线的总更新数据的时间间隔为T。本发明实施例把这条数据传输路线的总更新数据的时间间隔T划分成三个环节的时间更新间隔，分别为T1、T2和T3。T1为：传感器-PLC-OPC环节，即T1包括t1、t2和t3；T2为：MQTT-系统内存环节，即T2为t4；T3为：模型动作方法从系统内存调用数据执行模型动作方法的过程，T3为t5。其中，采掘装备包括液压支架、采煤机等采煤工作面装备，以及综掘机、掘锚机等掘进工作面装备。在该部分内容的基础上，如图1所示，采掘装备数字孪生系统的数据传输参数优化方法包括如下步骤S1至S4来实现。S1，确定采掘装备数字孪生系统的单位分辨精确度和屏幕更新率f，并根据屏幕更新率f确定屏幕更新时间间隔tz。具体地，数据传输路线中，传感器和模型渲染运动这两个环节都有限制，分别是物理世界采掘装备实际运动分辨精确度限制和模型显示的帧数限制。帧数限制具体体现在：采掘装备数字孪生系统的显示帧数受到计算机性能和图形处理能力的限制。为了保证平滑的视觉效果，常见的显示设备的更新率为30帧每秒或60帧每秒。如果模型的动作更新频率过高，超过了显示设备的帧率，可能会导致部分动作在屏幕上无法完整显示，可能引起视觉不连贯，同时造成性能上的浪费。因此，在设置模型动作方法的更新频率时需要考虑到显示帧数的限制。因此，本发明实施例先根据采掘装备数字孪生系统中显示设备的屏幕更新率f确定屏幕更新时间间隔tz。具体地，所述S1在根据屏幕更新率f确定屏幕更新时间间隔tz时，可以通过如下公式实现：tz=1/f。S2，根据采掘装备数字孪生系统的数据传输路线上的采掘装备、传感器、PLC、OPC和MQTT，测量从传感器至OPC过程的第一时间间隔T1的最小值T1 min、MQTT将数据转存至系统内存过程的第二时间间隔T2的最小值T2 min、从系统内存调用数据执行模型动作方法过程的第三时间间隔T3的最小值T3 min、采掘装备以最快速度运动单位分辨精确度的最大速度vmax及采掘装备以最快速度运动单位分辨精确度的最大转动幅度sj，并根据vmax和sj确定单位分辨精确度时间tj。具体地，T1涉及的是从传感器采集数据到将其传输至OPC进行处理的整个过程，包括实际的物理世界数据采集、PLC逻辑控制、OPC通信。T2中MQTT负责接收来自OPC的数据，并通过MQTT协议进行消息传递转发给系统内存。MQTT转发数据时间间隔在合理的范围内可以人工设置。T3采掘装备数字孪生系统的核心部分，包括从系统内存调用数据并解析、模型动作方法计算等复杂操作，直接影响采掘装备数字孪生系统的实时性和准确性，因此需要高性能以确保对采掘装备状态的准确建模。进一步地，分辨精确度限制具体体现在：若传感器的查询频率过快，会导致连续两次查询的数据之间的变化差值小于精度要求，那么实际上第二次查询得到的数据对于模型的更新并没有提供更多的信息，因为在精度内两次查询结果相同，产生了冗余的数据。例如，传感器在间隔200ms先后传输的数据为6.73°和6.77°，但由于采掘装备数字孪生系统的单位分辨精确度设定为保留一位小数，导致采掘装备数字孪生系统实际得到的两个数据均为6.7°，即在这种情况下，确实存在查询频率过快导致冗余数据的问题。若传感器的查询频率过慢，会导致采掘装备数字孪生系统无法及时获取到最新的物理世界状态，从而导致模型在系统中的响应滞后，影响采掘装备数字孪生系统对实际物理过程的准确模拟，降低了系统的实时性，也会导致在两次查询之间发生的重要变化被忽略，从而丢失了一些关键的信息，这对采掘装备数字孪生系统的精度和准确性都产生负面影响。综上，传感器查询频率的选择需要平衡实时性和系统性能之间的关系，确保系统能够在保持准确性的同时快速响应物理世界的变化。而传感器的采集频率被采掘装备实际运动速度和分辨精确度所影响。本发明实施例中设定采掘装备以最快速度运动单位分辨精确度的速度vmax和距离sj，得出采掘装备运动单位分辨精确度的时间tj=sj/vmax。具体在测量T1 min、T2 min、T3 min、vmax和sj时，通过采掘装备、传感器、OPC和MQTT的型号、属性及实际运行过程中的动作情况来实现。具体可以通过人工统计各环节时间来测量。S3，根据T1 min，T2 min，T3 min，T1、T2和T3之间的关系，tz和tj建立约束条件和目标函数。如果t1、t2和t3均取不影响各环节性能条件下的最大更新频率，则T1趋近于该环节性能条件下的最大更新频率。因此，本发明实施例确定T1=T1 min为一个约束条件，min表示该环节性能条件下的最大更新频率。理想状态下，MQTT的转发数据时间间隔应接近于OPC数据更新时间间隔，无法达到理想状态则设置成T1的倍数。因此，本发明实施例令T2=aT1，T2→T1，T2＞ T2 min，其中a为正整数。在本发明实施例中，模型动作方法的执行间隔T3设置为T1和T2的最小公倍数，即T3=LCM=abT1，其中a和b为正整数，T3＞T3 min。这样对于模型动作方法执行之前的数据传输线路可以优化系统资源的利用，避免资源浪费，提高整体效率；可以使它们的执行在同一时间点上能够更好地协同进行。具体来说，在每一个公倍数时间点上，这三个环节的任务都可以同时开始执行，这有助于降低整个系统中各环节之间的协同成本，减小任务启动与切换的时延，使得整个系统更加高效地协同工作，进而减小了整个数据传输路线的总时延。对于模型动作方法执行之后的模型渲染运动，上述约束条件避免了频繁地执行模型渲染运动，有助于系统更有序、协调的任务调度，确保了模型有足够的时间来响应先前的动作并完成相应的渲染，有助于提高系统整体的渲染效率和视觉效果，有助于避免模型动作的冲突和混乱，确保模型的动作计算与实际设备状态的同步性。另外，按照采掘装备数字孪生系统的虚实一致原则有：T3≤tj，T3→tj。进一步地，根据显示设备的显示规律，约束条件还应该满足T3≥tz。综上，所述S3根据T1 min，T2 min，T3 min，T1、T2和T3之间的关系，tz和tj建立的约束条件为：T1=T1 min，T2=aT1，T2＞T2 min，T2→T1，T3=abT1，T3＞T3 min，T3≤tj，T3→tj，T3≥tz。建立的目标函数为：Minimize T3=abT1；其中，a和b为决策变量且均为正整数。S4，求解目标函数满足所述约束条件的解，得到采掘装备数字孪生系统进行数据传输的最优参数。可选地，所述S4在具体执行时，可以包括如下步骤：S41，使用整数规划求解器确定目标函数满足所述约束条件的决策变量a和b的可行取值，得到T3的可行解。具体地，可以通过整数规划求解器搜索整数空间来找到决策变量a和b的可行取值。在T3的可行解中，T3值越大，资源占用量越小；T3值越小，动作效果越好。S42，根据参数优化目的从T3的可行解中选择最优的T3作为采掘装备数字孪生系统数据传输路线中执行模型动作方法的最优时间间隔。其中，参数优化目的可以包括注重资源的节省或者注重孪生效果。在选择最优的T3时，可以根据参数优化目的从可行解中选择T3最大的值、最小的值或者中间值等。例如，如果参数优化目的为注重资源的节省，则选择T3最大的值作为最优参数。综上，通过本发明实施例提供的以上图2所示的具体参数优化方法，可以在保证数据传输的实时性和精准性的前提下，合理分配各个环节的查询频率，确保少丢值的同时，能够达到采掘装备现场的传输时延要求，并能够节省资源。以上所述仅是本发明的优选实施方式，并不用于限制本发明，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明技术原理的前提下，还可以做出若干改进和变型，这些改进和变型也应视为本发明的保护范围。
