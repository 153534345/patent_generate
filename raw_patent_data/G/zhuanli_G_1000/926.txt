标题title
基于原始文件不出域的文件特征值解析方法和系统
摘要abst
本发明涉及文件解析技术领域，提供一种基于原始文件不出域的文件特征值解析方法和系统，本发明的方法包括：通过构建相关联的文件存放目录和解析模型，为待解析文件配置文件数据源；通过在应用场景中执行解析模型，对待解析文件的文件数据源进行预解析；将通过预解析的文件数据源封装为特征值接口，通过调用特征值接口对相应的待解析文件进行解析。根据本发明示例性实施例的基于原始文件不出域的文件特征值解析方法和系统，可以在确保数据提供方原始文件不出域的前提下，将文件特征值动态解析为结构化信息，对外提供API接口调用，参与数据产品融合加工和计算，大大提高了原始文件的利用率，同时也避免了原始文件直接共享带来的安全风险。
权利要求书clms
1.一种基于原始文件不出域的文件特征值解析方法，其特征在于，所述方法包括：通过构建相关联的文件存放目录和解析模型，为待解析文件配置文件数据源；通过在应用场景中执行解析模型，对待解析文件的文件数据源进行预解析；将通过预解析的文件数据源封装为特征值接口，通过调用特征值接口对相应的待解析文件进行解析。2.根据权利要求1所述的基于原始文件不出域的文件特征值解析方法，其特征在于，通过构建相关联的文件存放目录和解析模型，为待解析文件配置文件数据源，包括：通过引用服务器上文件夹的绝对路径，为待解析文件构建对应的文件存放目录；通过在具体应用场景中对数据识别算法进行训练，为待解析文件构建解析模型；通过将待解析文件的业务类型与解析模型的场景类型进行匹配，将解析模型内置在对应的文件存放目录中，获得待解析文件的文件数据源。3.根据权利要求2所述的基于原始文件不出域的文件特征值解析方法，其特征在于，通过在具体应用场景中对数据识别算法进行训练，为待解析文件构建解析模型，包括：在具体应用场景中采用数据识别算法对待解析文件进行识别，将识别的内容转换为结构化数据；将转换获得的结构化数据与识别的内容进行匹配，当转换获得的结构化数据与识别的内容匹配成功，将数据识别算法作为解析模型。4.根据权利要求2所述的基于原始文件不出域的文件特征值解析方法，其特征在于，通过在具体应用场景中对数据识别算法进行训练，为待解析文件构建解析模型，还包括：当转换获得的结构化数据与识别的内容匹配失败，通过对匹配失败的识别内容进行重新识别和转换，直至转换获得的结构化数据与识别的内容匹配成功，将经过训练的数据识别算法作为解析模型。5.根据权利要求1所述的基于原始文件不出域的文件特征值解析方法，其特征在于，通过在应用场景中执行解析模型，对待解析文件的文件数据源进行预解析，包括：将应用场景对应的文件设置在对应的文件存放目录中，通过执行所述文件存放目录中的解析模型，对待解析文件的文件数据源进行预解析。6.根据权利要求5所述的基于原始文件不出域的文件特征值解析方法，其特征在于，通过执行所述文件存放目录中的解析模型，对待解析文件的文件数据源进行预解析，包括：采用解析模型根据应用场景对应的文件的文件存放目录和文件名称对所述文件进行加载，对加载的文件进行识别和转换，当通过解析模型识别和转化得到的文件内容与文件的实际内容一致，将待解析文件的文件数据源判定为通过预解析。7.根据权利要求5所述的基于原始文件不出域的文件特征值解析方法，其特征在于，通过执行所述文件存放目录中的解析模型，对待解析文件的文件数据源进行预解析，还包括：当通过解析模型识别和转化得到的文件内容与文件的实际内容不一致，将待解析文件的文件数据源判定为未通过预解析，对未通过预解析的数据源进行修正。8.根据权利要求1所述的基于原始文件不出域的文件特征值解析方法，其特征在于，将通过预解析的文件数据源封装为特征值接口，通过调用特征值接口对相应的待解析文件进行解析，包括：将通过预解析的文件数据源封装为特征值接口，为所述特征值设置访问权限；根据业务场景类型，将待解析文件设置在对应的文件存放目中，根据访问权限调用特征值接口启动文件存放目中的解析模型；解析模型对文件存放目中的待解析文件进行解析，将解析结果返回至调用方。9.一种基于原始文件不出域的文件特征值解析系统，其特征在于，所述系统包括解析服务端，所述解析服务端用于通过构建相关联的文件存放目录和解析模型，为待解析文件配置文件数据源；通过在应用场景中执行解析模型，对待解析文件的文件数据源进行预解析；将通过预解析的文件数据源封装为特征值接口，通过调用特征值接口对相应的待解析文件进行解析。10.一种计算机设备，其特征在于，所述计算机设备包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述处理器执行所述程序时实现权利要求1-8中任一项所述方法。
说明书desc
技术领域本发明涉及文件解析技术领域，尤其涉及一种基于原始文件不出域的文件特征值解析方法和系统。背景技术现有的文件特征值解析系统都需要文件拥有者将原文件集中上传到平台上，然后通过平台提供的识别组件来解析并提取该文件的结构化信息，这种模式本质上需要文件的拥有者将文件共享出去，即，原始文件要出域。但是原始文件一旦流出本地，其后续流转和使用就不再受文件拥有方的控制了。由于通过原始文件出域的模式对文件特征值进行解析的方式，极易导致涉密文件被泄露或被滥用，无法保护数据提供方的原始文件资源，因此数据提供方对这种特征值解析共享的参与程度不高，文件利用率很低。在大多数场合下，当文件参与数据产品融合加工和计算分析，并不需要文件的全部内容和信息，而只需要文件中某个字段或特征值。现有的平台或解析工具，无法做到原始文件不出域的前提下提取原文件的一个或几个特征值并将提取的特征值共享出去。因此，如何提供一种更加安全的文件特征值解析方法，成为亟待解决的技术问题。发明内容有鉴于此，为了克服现有技术的不足，本发明旨在提供一种基于原始文件不出域的文件特征值解析方法和系统。根据本发明的第一方面，提供一种基于原始文件不出域的文件特征值解析方法，包括：通过构建相关联的文件存放目录和解析模型，为待解析文件配置文件数据源；通过在应用场景中执行解析模型，对待解析文件的文件数据源进行预解析；将通过预解析的文件数据源封装为特征值接口，通过调用特征值接口对相应的待解析文件进行解析。优选的，本发明基于原始文件不出域的文件特征值解析方法中，通过构建相关联的文件存放目录和解析模型，为待解析文件配置文件数据源，包括：通过引用服务器上文件夹的绝对路径，为待解析文件构建对应的文件存放目录；通过在具体应用场景中对数据识别算法进行训练，为待解析文件构建解析模型；通过将待解析文件的业务类型与解析模型的场景类型进行匹配，将解析模型内置在对应的文件存放目录中，获得待解析文件的文件数据源。优选的，本发明基于原始文件不出域的文件特征值解析方法中，通过在具体应用场景中对数据识别算法进行训练，为待解析文件构建解析模型，包括：在具体应用场景中采用数据识别算法对待解析文件进行识别，将识别的内容转换为结构化数据；将转换获得的结构化数据与识别的内容进行匹配，当转换获得的结构化数据与识别的内容匹配成功，将数据识别算法作为解析模型。优选的，本发明基于原始文件不出域的文件特征值解析方法中，通过在具体应用场景中对数据识别算法进行训练，为待解析文件构建解析模型，还包括：当转换获得的结构化数据与识别的内容匹配失败，通过对匹配失败的识别内容进行重新识别和转换，直至转换获得的结构化数据与识别的内容匹配成功，将经过训练的数据识别算法作为解析模型。优选的，本发明基于原始文件不出域的文件特征值解析方法中，通过在应用场景中执行解析模型，对待解析文件的文件数据源进行预解析，包括：将应用场景对应的文件设置在对应的文件存放目录中，通过执行所述文件存放目录中的解析模型，对待解析文件的文件数据源进行预解析。优选的，本发明基于原始文件不出域的文件特征值解析方法中，通过执行所述文件存放目录中的解析模型，对待解析文件的文件数据源进行预解析，包括：采用解析模型根据应用场景对应的文件的文件存放目录和文件名称对所述文件进行加载，对加载的文件进行识别和转换，当通过解析模型识别和转化得到的文件内容与文件的实际内容一致，将待解析文件的文件数据源判定为通过预解析。优选的，本发明基于原始文件不出域的文件特征值解析方法中，通过执行所述文件存放目录中的解析模型，对待解析文件的文件数据源进行预解析，还包括：当通过解析模型识别和转化得到的文件内容与文件的实际内容不一致，将待解析文件的文件数据源判定为未通过预解析，对未通过预解析的数据源进行修正。优选的，本发明基于原始文件不出域的文件特征值解析方法中，将通过预解析的文件数据源封装为特征值接口，通过调用特征值接口对相应的待解析文件进行解析，包括：将通过预解析的文件数据源封装为特征值接口，为所述特征值设置访问权限；根据业务场景类型，将待解析文件设置在对应的文件存放目中，根据访问权限调用特征值接口启动文件存放目中的解析模型；解析模型对文件存放目中的待解析文件进行解析，将解析结果返回至调用方。根据本发明的第二方面，提供一种基于原始文件不出域的文件特征值解析系统，包括解析服务端，所述解析服务端用于通过构建相关联的文件存放目录和解析模型，为待解析文件配置文件数据源；通过在应用场景中执行解析模型，对待解析文件的文件数据源进行预解析；将通过预解析的文件数据源封装为特征值接口，通过调用特征值接口对相应的待解析文件进行解析。根据本发明的第三方面，提供一种计算机设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述处理器执行所述程序时实现本发明第一方面所述的方法。本发明的基于原始文件不出域的文件特征值解析方法和系统，将整个解析过程封装为隐私特征值接口对外提供服务，可以在确保数据提供方原始文件不出域的前提下，将文件特征值动态解析为结构化信息，对外提供API接口调用，参与数据产品融合加工和计算，大大提高了原始文件的利用率，同时也避免了原始文件直接共享带来的安全风险。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它的附图。图1为一种适用于本申请实施例的基于原始文件不出域的文件特征值解析方法的系统的示意图；图2为根据本发明实施例的一种基于原始文件不出域的文件特征值解析方法的步骤流程图；图3为根据本发明实施例基于原始文件不出域的文件特征值解析方法在一种示例性场景中的执行流程图；图4为本发明提供的设备的结构示意图。具体实施方式下面结合附图对本发明实施例进行详细描述。需说明的是，在不冲突的情况下，以下实施例及实施例中的特征可以相互组合；并且，基于本公开中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本公开保护的范围。需要说明的是，下文描述在所附权利要求书的范围内的实施例的各种方面。应显而易见，本文中所描述的方面可体现于广泛多种形式中，且本文中所描述的任何特定结构及/或功能仅为说明性的。基于本公开，所属领域的技术人员应了解，本文中所描述的一个方面可与任何其它方面独立地实施，且可以各种方式组合这些方面中的两者或两者以上。举例来说，可使用本文中所阐述的任何数目个方面来实施设备及/或实践方法。另外，可使用除了本文中所阐述的方面中的一或多者之外的其它结构及/或功能性实施此设备及/或实践此方法。图1示出了一种适用于本申请实施例的基于原始文件不出域的文件特征值解析方法的示例性系统。如图1所示，该系统可以包括解析服务端101、通信网络102和/或一个或多个解析客户端103，图1中示例为多个解析客户端103。解析服务端101可以时用于存储信息、数据、程序和/或任何其他合适类型的内容的任何适当的服务器。在一些实施例中，解析服务端101可以执行适当的功能。例如，在一些实施例中，解析服务端101可以用于在原始文件不出域的前提下对文件特征值进行解析。作为可选的示例，在一些实施例中，解析服务端101可以被用于通过为待解析文件配置文件数据源实现在原始文件不出域的前提下对文件特征值进行解析。例如，解析服务端101可以用于通过构建相关联的文件存放目录和解析模型，为待解析文件配置文件数据源；通过在应用场景中执行解析模型，对待解析文件的文件数据源进行预解析；将通过预解析的文件数据源封装为特征值接口，通过调用特征值接口对相应的待解析文件进行解析。作为另一示例，在一些实施例中，解析服务端101可以根据解析客户端103的请求，将基于原始文件不出域的文件特征值解析方法发送到解析客户端103供用户使用。作为可选的示例，在一些实施例中，解析客户端103用于提供可视化解析界面，该可视化解析界面用于接收用户在原始文件不出域的前提下对文件特征值进行解析的选择输入操作，以及，用于响应于选择输入操作，从解析服务端101获取与选择输入操作所选择的选项所对应的解析界面并展示解析界面，解析界面中至少展示有在原始文件不出域的前提下对文件特征值进行解析的信息以及针对在原始文件不出域的前提下对文件特征值进行解析的信息的操作选项。在一些实施例中，通信网络102可以是一个或多个有线和/或无线网络的任何适当的组合。例如，通信网络102能够包括以下各项中的任何一种或多种：互联网、内联网、广域网、局域网、无线网络、数字订户线路网络、帧中继网络、异步转移模式网络、虚拟专用网和/或任何其它合适的通信网络。解析客户端103能够通过一个或多个通信链路连接到通信网络102，该通信网络102能够经由一个或多个通信链路被链接到解析服务端101。通信链路可以是适合于在解析客户端103和解析服务端101之间传送数据的任何通信链路，诸如网络链路、拨号链路、无线链路、硬连线链路、任何其它合适的通信链路或此类链路的任何合适的组合。解析客户端103可以包括通过适当形式呈现与基于原始文件不出域的文件特征值解析方法相关的界面，以供用户使用和操作的任何一个或多个客户端。在一些实施例中，解析客户端103可以包括任何合适类型的设备。例如，在一些实施例中，解析客户端103可以包括移动设备、平板计算机、膝上型计算机、台式计算机和/或任何其他合适类型的客户端设备。尽管将解析服务端101图示为一个设备，但是在一些实施例中，可以使用任何适当数量的设备来执行由解析服务端101执行的功能。例如，在一些实施例中，可以使用多个设备来实现由解析服务端101执行的功能。或者，可使用云服务实现解析服务端101的功能。基于上述系统，本申请实施例提供了一种基于原始文件不出域的文件特征值解析方法，以下通过以下实施例进行说明。参照图2，示出了根据本申请实施例的一种基于原始文件不出域的文件特征值解析方法的步骤流程图。本实施例的基于原始文件不出域的文件特征值解析方法可在解析服务端执行，该基于原始文件不出域的文件特征值解析方法包括以下步骤：步骤S201：通过构建相关联的文件存放目录和解析模型，为待解析文件配置文件数据源。本实施例方法通过引用服务器上文件夹的绝对路径，为待解析文件构建对应的文件存放目录。本实施例方法构建的文件存放目录包括但不限于本地服务器中的文件夹，还可以是其他形式的目录，比如远程FTP目录，本实施例对此不做限制。在完成对待解析文件的文件存放目录的构建后，本实施例方法还需要通过在具体应用场景中对数据识别算法进行训练，为待解析文件构建解析模型。作为一种示例，本实施例方法在具体应用场景中采用数据识别算法对待解析文件进行识别，将识别的内容转换为结构化数据。本实施例方法采用的数据识别算法包括但不限于OCR识别算法，比如模板匹配算法、支持向量机算法、贝叶斯分类算法或神经网络算法等。本领域技术人员在根据本实施例方法对待解析文件进行识别并将识别的内容转化为结构化数据时，还可以根据实际应用场景选择适当的其他算法，本实施例对此不做限制。本实施例方法将转换获得的结构化数据与识别的内容进行匹配，当转换获得的结构化数据与识别的内容匹配成功，将数据识别算法作为解析模型；当转换获得的结构化数据与识别的内容匹配失败，通过对匹配失败的识别内容进行重新识别和转换，直至转换获得的结构化数据与识别的内容匹配成功，将经过训练的数据识别算法作为解析模型。举例来说，本实施例方法构建的解析模型可以用于设备铭牌、银行流水单、卡证或发票等类型文件的特征值解析，分别后的设备生产日期或出厂日期、银行流水单缴纳记录、卡证有效日期以及发票税率等特征值。以下在一个具体的应用场景中对本实施例方法中构建解析模型的过程进行详细说明：在电力设备场景中，根据本实施例方法将一批电力设备相关的设备铭牌图片设置在业务类型相关的文件存放目录中，采用ORC识别算法逐个加载读取设备铭牌图片，识别并解析设备铭牌图片上的文字内容，通过页面展示图片预览内容以及识别到的文字内容，用户可以使用鼠标在图片预览区域里进行文字区域的标注，然后OCR算法会根据标注区域，调整识别解析的内容，直到选中生产日期相关的区域被解析出来，并且得以正确的输出，训练过程完成。在完成解析模型的构建后，本实施例方法通过将待解析文件的业务类型与解析模型的场景类型进行匹配，将解析模型内置在对应的文件存放目录中，获得待解析文件的文件数据源。需要说明的，在将解析模型内置在对应的文件存放目录过程中，需要保证文件存放目录的业务类型与解析模型的场景类型相匹配，比如，需要将用于设备铭牌解析的解析模型内置在电力设备相关的文件存放目录中。步骤S202：通过在应用场景中执行解析模型，对待解析文件的文件数据源进行预解析。为了确保配置的数据源能够满足后续的调用解析，本实施例在对数据源进行调用解析前，本实施例方法还需要将应用场景对应的文件设置在对应的文件存放目录中，通过执行所述文件存放目录中的解析模型，对待解析文件的文件数据源进行预解析。作为一种示例，本实施例方法采用解析模型根据应用场景对应的文件的文件存放目录和文件名称对所述文件进行加载，对加载的文件进行识别和转换，当通过解析模型识别和转化得到的文件内容与文件的实际内容一致，将待解析文件的文件数据源判定为通过预解析；当通过解析模型识别和转化得到的文件内容与文件的实际内容不一致，将待解析文件的文件数据源判定为未通过预解析，对未通过预解析的数据源进行修正。以下在一个具体的应用场景中对本实施例方法中对待解析文件的文件数据源进行预解析的过程进行详细说明：准备一个待解析的设备铭牌图片，放入步骤配置的本地服务器中文件夹或远程FTP文件目录中，设备铭牌图片上有设备名称、设备编号和对应的生产日期；执行对应目录中的解析模型，将文件全路径传递给解析模型，作为解析模型的输入，采用解析模型加载文件内容，并利用数据识别算法识别图片中的关键词，例如生产日期，并识别出生产日期后面的文字内容，并将内容通过页面输出，此处需要解析三个字段：设备名称、设备编号和生产日期；用户核对页面输出内容与原始设备铭牌图片上的内容是否一致，如果一致，则预解析通过，如果不一致，则需要重新检查文件类型与对应的文件特征值解析模型。步骤S203：将通过预解析的文件数据源封装为特征值接口，通过调用特征值接口对相应的待解析文件进行解析。作为一种示例，本实施例方法将通过预解析的文件数据源封装为特征值接口，为所述特征值设置访问权限；根据业务场景类型，将待解析文件设置在对应的文件存放目中，根据访问权限调用特征值接口启动文件存放目中的解析模型；解析模型对文件存放目中的待解析文件进行解析，将解析结果返回至调用方。需要说明是，本实施例方法还可以对设置的访问权限设置对应的审批规则，在调用方对特征值接口进行调用时，数据提供方可以根据审批规则对调用方的调用进行审批。图3为根据本发明实施例基于原始文件不出域的文件特征值解析方法在一种示例性场景中的执行流程图。如图3所示，本实施例方法可以通过解析模型将原始文件的一个或多个特征值进行提取。本实施例方法可以在确保数据提供方原始文件不出域的前提下，将文件特征值动态解析为结构化信息，对外提供API接口调用，将解析获得的一个或多个特征值详细进行共享，对外共享的特征值而非文件本身参与数据产品融合加工和计算，大大提高了原始文件的利用率，同时也避免了原始文件直接共享带来的安全风险。如图4所示，本发明还提供了一种设备，包括处理器310、通信接口320、用于存储处理器可执行计算机程序的存储器330及通信总线340。其中，处理器310、通信接口320及存储器330通过通信总线340完成相互间的通信。处理器310通过运行可执行计算机程序以实现上述的基于原始文件不出域的文件特征值解析方法。其中，存储器330中的计算机程序可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上所描述的系统实施例仅仅是示意性的，其中作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以基于实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分的方法。以上所述，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到的变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以权利要求的保护范围为准。
