标题title
一种塔式光热镜场进行分组BCS打靶校验方法
摘要abst
本申请属于定日镜BCS打靶校验技术领域，具体涉及一种塔式光热镜场进行分组BCS打靶校验方法，其特征在于，在塔式光热镜场中，在BCS打靶时采用一组定日镜同时打一个靶面，采用Birch算法将定日镜分组，通过相机拍摄图片，找到合适的定日镜数量M，根据定日镜物理位置，计算出在一个CF簇中如果需要M个定日镜时叶子节点的空间簇半径阈值Q，计算分支节点CF‑b簇数目、叶子节点CF‑l簇数目，通过对聚类特征树的叶结点进行聚类，得到聚类特征树CFTree，实现定日镜分组。其优点是，采用Birch算法将定日镜分组，在做BCS打靶时采用一组定日镜同时打一个靶面，这样光斑亮度将增强，有利于光斑识别。
权利要求书clms
1.一种塔式光热镜场进行分组BCS打靶校验方法，其特征在于，在塔式光热镜场中，在BCS打靶时采用一组定日镜同时打一个靶面，采用Birch算法将定日镜分组，通过相机拍摄图片，找到合适的定日镜数量M，根据定日镜物理位置，计算出在一个CF簇中如果需要M个定日镜时叶子节点的空间簇半径阈值Q，计算分支节点CF-b簇数目、叶子节点CF-l簇数目，通过对聚类特征树的叶结点进行聚类，得到聚类特征树CFTree，实现定日镜分组。2.根据权利要求1所述的一种塔式光热镜场进行分组BCS打靶校验方法，其特征在于，假设定日镜固定位置平面坐标为，则一个叶子节点CF-l簇中定日镜坐标分别为,/＞……/＞，共N个定日镜，CF-l簇的聚类特征定义为一个三元组CF=； CF-l簇的矢量LS是个各点的线性求和为： ；CF-l簇的标量SS是各数据点的平方和：；CF-l簇的中心坐标其实就是CF-l簇中所有定日镜的坐标平均值；/＞为CF-l簇中心的坐标向量： ；为CF-l簇中每个定日镜的坐标，/＞为CF-l簇中每个定日镜的坐标向量。3.根据权利要求1所述的一种塔式光热镜场进行分组BCS打靶校验方法，其特征在于，分支节点CF-b簇数目设置为支平衡因子B；叶子节点CF-l簇数目设置为叶平衡因子L；叶子节点CF-l簇半径阈值Q，计算样本点与叶子节点CF-l簇的空间距离，如果小于Q则纳入某个叶子节点CF-l簇；Q由定日镜之间的距离确定；B，L，Q确定方法为：根据当地天气状况，在历史数据中找出太阳直接辐射最好的一天，通过仿真确定在正午正南面靶，需要M面最外圈定日镜同时打到靶上相机拍摄图片后能正常识别光斑；或者在项目现场，正午时刻操作最外圈定日镜反射太阳到靶心，通过相机拍摄图片，找到合适的定日镜数量M；根据定日镜物理位置，计算出在叶子节点CF-l簇中如果需要M个定日镜时叶子节点CF-l簇半径阈值Q，假设总共定日镜数量为D，则采用B*L=D/M ，在合理范围内选择B、L即可。4.根据权利要求3所述的一种塔式光热镜场进行分组BCS打靶校验方法，其特征在于，Birch算法将定日镜分组，具体方法如下：从数据库中读取所有定日镜坐标信息，将所有定日镜添加到CFTree，构建CFTree；对于第一个定日镜，叶子节点CF-l簇为空，将其自身作为一个CF-l簇，对于第二个定日镜，判断其与第一个定日镜的距离，如果小于Q则归入第一个定日镜所属的CF-l簇，否则归入一个新的CF-l簇，从而出现了CF-l簇分裂即目前两个CF-l簇，依次类推分裂，CFTree内部分支节点数受B限制，叶子节点数受L限制，最终将所有定日镜进行分组。5.根据权利要求1所述的一种塔式光热镜场进行分组BCS打靶校验方法，其特征在于，BCS打靶实现步骤如下：步骤一、打靶服务启动,读取数据库定日镜坐标，在打靶之前基于Birch 算法确定定日镜分组和每组的中心，并保存在数据库中；步骤二、根据每个分组定日镜的位置和组中心位置确定每组定日镜打靶时的靶面，假设每个BCS靶有多个靶面，并添加保存在数据库中；步骤三、读取数据库定日镜分组数据初始化，选取定日镜组开始打靶并判断定日镜是否均能够进行打靶测试，如果不能则换一组定日镜进行打靶；步骤四、通过太阳高度实时位置坐标，定日镜坐标和BCS靶中心坐标，计算反射法线，根据法线和定日镜运动模型求解出追踪打靶水平和垂直方向的位置；步骤五、拍摄BCS靶背景图片；步骤六、根据步骤四计算的追踪位置，移动定日镜到指定位置，到位后拍摄一定数量的BCS靶光斑图片，完成一次打靶测试。6.根据权利要求5所述的一种塔式光热镜场进行分组BCS打靶校验方法，其特征在于，打靶误差计算方法如下：采用分组打靶测试，所测得为一组内定日镜的平均误差，在计算法线时采用一组定日镜的中心位置为虚拟的光斑反射位置，即可以理解为定日镜分组CF-l簇的中心是此组定日镜的中心位置，反射太阳光到BCS靶面，根据打靶时太阳位置，定日镜分组CF-l簇的中心位置，靶心还有光斑中心计算出理论法线和实际反射法线，由两个法线角度偏差可以得到定日镜的跟踪精度误差，光斑中心计算可以通过图像处理算法得到；此处定日镜分组CF-l簇的中心位置只有平面坐标，z坐标为定日镜高度为固定值，可以直接转换为三维立体坐标；设太阳位置为S，定日镜分组CF-l簇中心位置为D1，BCS靶中心位置为B1，光斑中心位置为P，则根据两个向量点乘计算方法：两个向量点乘=与的积， ；则如下和/＞两个法线夹角之差即为反射偏差，假设入射光线为/＞,理论反射到靶心反射光线为/＞,实际反射到光斑中心光线为/＞理论法线为/＞，实际法线为/＞,/＞为/＞和/＞的夹角即反射偏差； ； ； 。
说明书desc
技术领域本申请属于定日镜BCS打靶校验技术领域，具体涉及一种塔式光热镜场进行分组BCS打靶校验方法。背景技术目前塔式光热发电镜场对定日镜的精度校准主要用到BCS靶校准或者相机校准，相机校准通常也会用到BCS靶进行校准后跟踪精度验证。BCS靶一般采用漫反射漆面的面板，安装在吸热塔顶部吸热器的下方。在进行定日镜精度校准或者精度验证时会随机选择一个定日镜将光源反射到BCS靶面的中心，然后根据光斑中心与靶面中心存在的偏差去校准或者评判定日镜跟踪反射精度。目前大多数打靶校验或者精度验证均采用单个定日镜打靶，即四个靶面，每一个靶面只有一个定日镜在反射光源到靶心，同一时间最多只有四个定日镜在分别打不同的靶面。这样就会存在由于定日镜距吸热器距离较远，光斑亮度较弱无法识别；或者由于光照的强度靶面本身较亮导致光斑无法识别。发明内容本发明提出一种定日镜分组方法，调度一组定日镜进行同时校准。一组定日镜同时反射太阳到BCS靶中心，这样光斑的亮度将显著提升，有利于光斑识别，同时提高BCS打靶效率，提高BCS靶面的可利用度。技术方案为：一种塔式光热镜场进行分组BCS打靶校验方法，在塔式光热镜场中，在BCS打靶时采用一组定日镜同时打一个靶面，采用Birch算法将定日镜分组，通过相机拍摄图片，找到合适的定日镜数量M，根据定日镜物理位置，计算出在一个CF簇中如果需要M个定日镜时叶子节点的空间簇半径阈值Q，计算分支节点CF-b簇数目、叶子节点CF-l簇数目，通过对聚类特征树的叶结点进行聚类，得到聚类特征树CFTree，实现定日镜分组。优选的，假设定日镜固定位置平面坐标为，一个叶子节点CF-l簇中定日镜坐标分别为,/＞……/＞，共N个定日镜，此CF-l簇的聚类特征定义为一个三元组CF=；CF-l簇的矢量LS是个各点的线性求和为： ；CF-l簇的标量SS是各数据点的平方和： ；CF-l簇的中心坐标其实就是CF-l簇中所有定日镜的坐标平均值；/＞为CF-l簇中心的坐标向量： ；为CF-l簇中每个定日镜的坐标，/＞为CF-l簇中每个定日镜的坐标向量。优选的，分支节点CF-b簇数目设置为支平衡因子B；叶子节点CF-l簇数目设置为叶平衡因子L；叶子节点CF-l簇半径阈值Q，计算样本点与叶子节点CF-l簇的空间距离，如果小于Q则纳入某个叶子节点CF-l簇；Q由定日镜之间的距离确定；B，L，Q确定方法为：根据当地天气状况，在历史数据中找出太阳直接辐射最好的一天，通过仿真确定在正午正南面靶，需要M面最外圈定日镜同时打到靶上相机拍摄图片后能正常识别光斑；或者在项目现场，正午时刻操作最外圈定日镜反射太阳到靶心，通过相机拍摄图片，找到合适的定日镜数量M；根据定日镜物理位置，在计算CF-l簇半径阈值Q时，以某一个定日镜为圆心，则在半径为Q的圆内可以圈出满足M个定日镜的簇，则Q为CF-l簇半径阈值，计算出在叶子节点CF-l簇中如果需要M个定日镜时叶子节点CF-l簇半径阈值Q，假设总共定日镜数量为D，则采用B*L=D/M ，在合理范围内选择B、L即可。优选的，Birch算法将定日镜分组，具体方法如下：从数据库中读取所有定日镜坐标信息，将所有定日镜添加到CFTree，构建CFTree；对于第一个定日镜，叶子节点CF-l簇为空，将其自身作为一个CF-l簇，对于第二个定日镜，判断其与第一个定日镜的距离，如果小于Q则归入第一个定日镜所属的CF-l簇，否则归入一个新的CF-l簇，从而出现了CF-l簇分裂即目前两个CF-l簇，依次类推分裂，CFTree内部分支节点数受B限制，叶子节点数受L限制，最终将所有定日镜进行分组。优选的，BCS打靶实现步骤如下：步骤一、打靶服务启动,读取数据库定日镜坐标，在打靶之前基于Birch 算法确定定日镜分组和每组的中心，并保存在数据库中；步骤二、根据每个分组定日镜的位置和组中心位置确定每组定日镜打靶时的靶面，假设每个BCS靶有多个靶面，并添加保存在数据库中；步骤三、读取数据库定日镜分组数据初始化，选取定日镜组开始打靶并判断定日镜是否均能够进行打靶测试，如果不能则换一组定日镜进行打靶；步骤四、通过太阳高度实时位置坐标，定日镜坐标和BCS靶中心坐标，计算反射法线，根据法线和定日镜运动模型求解出追踪打靶水平和垂直方向的位置；步骤五、拍摄BCS靶背景图片；步骤六、根据步骤四计算的追踪位置，移动定日镜到指定位置，到位后拍摄一定数量的BCS靶光斑图片，完成一次打靶测试。优选的，打靶误差计算方法如下：采用分组打靶测试，所测得为一组内定日镜的平均误差，在计算法线时采用一组定日镜的中心位置为虚拟的光斑反射位置，即可以理解为定日镜分组CF-l簇的中心是此组定日镜的中心位置，反射太阳光到BCS靶面，根据打靶时太阳位置，定日镜分组CF-l簇的中心位置，靶心还有光斑中心计算出理论法线和实际反射法线，由两个法线角度偏差可以得到定日镜的跟踪精度误差，光斑中心计算可以通过图像处理算法得到；此处定日镜分组CF-l簇的中心位置只有，z坐标为定日镜高度为固定值，可以直接转换为三维立体坐标；设太阳位置为S，定日镜分组CF-l簇中心位置为D1，BCS靶中心位置为B1，光斑中心位置为P，则根据两个向量点乘计算方法：两个向量点乘=与的积， ；则如下和/＞两个法线夹角之差即为反射偏差，假设入射光线为/＞,理论反射到靶心反射光线为/＞,实际反射到光斑中心光线为/＞理论法线为/＞，实际法线为/＞,/＞为/＞和/＞的夹角即反射偏差； ；； 。与现有技术相比，本申请有益效果如下：本发明提出一种定日镜分组方法，调度一组定日镜进行同时校准。一组定日镜同时反射太阳到BCS靶中心，这样光斑的亮度将显著提升，有利于光斑识别，同时提高BCS打靶效率，提高BCS靶面的可利用度。附图说明图1为打靶流程图。图2为采用Birch算法聚类特征树CFTree示意图。图3为定日镜镜场布置局部示意图；其中一个圆圈内的定日镜代表一个CF-l簇。图4为定日镜BCS打靶示意图。具体实施方式以下详细说明都是例示性的，旨在对本申请提供进一步的说明。除非另有指明，本文使用的所有技术和科学术语具有与本申请所属技术领域的普通技术人员通常理解的相同含义。需要注意的是，这里所使用的术语仅是为了描述具体实施方式，而非意图限制根据本申请的示例性实施方式。一种塔式光热镜场进行分组BCS打靶校验方法，在塔式光热镜场中，在BCS打靶时采用一组定日镜同时打一个靶面，采用Birch算法将定日镜分组，通过相机拍摄图片，找到合适的定日镜数量M，根据定日镜物理位置，计算出在一个CF簇中如果需要M个定日镜时叶子节点的空间簇半径阈值Q，计算分支节点CF-b簇数目、叶子节点CF-l簇数目，通过对聚类特征树的叶结点进行聚类，得到聚类特征树CFTree，实现定日镜分组，图2所示。假设定日镜固定位置平面坐标为，一个叶子节点CF-l簇中定日镜坐标分别为,/＞……/＞，共N个定日镜，此簇的聚类特征定义为一个三元组CF=；CF-l簇的矢量LS是个各点的线性求和为： ；CF-l簇的标量SS是各数据点的平方和： ；CF-l簇的中心坐标其实就是CF簇中所有定日镜的坐标平均值；/＞为CF簇中心的坐标向量： ；为CF-l簇中每个定日镜的坐标，/＞为CF-l簇中每个定日镜的坐标向量。分支节点CF-b簇数目设置为支平衡因子B；叶子节点CF-l簇数目设置为叶平衡因子L；叶子节点CF-l簇半径阈值Q，计算样本点与叶子节点CF-l簇的空间距离，如果小于Q则纳入某个叶子节点CF-l簇；Q由定日镜之间的距离确定；B，L，Q确定方法为：根据当地天气状况，在历史数据中找出太阳直接辐射最好的一天，通过仿真确定在正午正南面靶，需要M面最外圈定日镜同时打到靶上相机拍摄图片后能正常识别光斑；或者在项目现场，正午时刻操作最外圈定日镜反射太阳到靶心，通过相机拍摄图片，找到合适的定日镜数量M；根据定日镜物理位置，如图3所示，长方形为定日镜，三角形为定日镜支架，每个定日镜安装在三角形支架的顶点，在计算CF-l簇半径阈值Q时，以某一个定日镜为圆心，则在半径为Q的圆内可以圈出满足M个定日镜的簇，则Q为CF-l簇半径阈值。计算出在叶子节点CF-l簇中如果需要M个定日镜时叶子节点CF-l簇半径阈值Q，假设总共定日镜数量为D，则采用B*L=D/M ，在合理范围内选择B、L即可。Birch算法将定日镜分组，具体方法如下：从数据库中读取所有定日镜坐标信息，将所有定日镜添加到CFTree，构建CFTree；对于第一个定日镜，叶子节点CF-l簇为空，将其自身作为一个CF-l簇，对于第二个定日镜，判断其与第一个定日镜的距离，如果小于Q则归入第一个定日镜所属的CF-l簇，否则归入一个新的CF-l簇，从而出现了CF-l簇分裂即目前两个CF-l簇，依次类推分裂，CFTree内部分支节点数受B限制，叶子节点数受L限制，最终将所有定日镜进行分组。图1所示，BCS打靶实现步骤如下：步骤一、打靶服务启动,读取数据库定日镜坐标，在打靶之前基于Birch 算法确定定日镜分组和每组的中心，并保存在数据库中；步骤二、根据每个分组定日镜的位置和组中心位置确定每组定日镜打靶时的靶面，假设每个BCS靶有多个靶面，并添加保存在数据库中；步骤三、读取数据库定日镜分组数据初始化，选取定日镜组开始打靶并判断定日镜是否均能够进行打靶测试，如果不能则换一组定日镜进行打靶；步骤四、通过太阳高度实时位置坐标，定日镜坐标和BCS靶中心坐标，计算反射法线，根据法线和定日镜运动模型求解出追踪打靶水平和垂直方向的位置；步骤五、拍摄BCS靶背景图片；步骤六、根据步骤四计算的追踪位置，移动定日镜到指定位置，到位后拍摄一定数量的BCS靶光斑图片，完成一次打靶测试。打靶误差计算方法如下：采用分组打靶测试，所测得为一组内定日镜的平均误差，在计算法线时采用一组定日镜的中心位置为虚拟的光斑反射位置，即可以理解为定日镜分组CF-l簇的中心是此组定日镜的中心位置，反射太阳光到BCS靶面，根据打靶时太阳位置，定日镜分组CF-l簇的中心位置，靶心还有光斑中心计算出理论法线和实际反射法线，由两个法线角度偏差可以得到定日镜的跟踪精度误差，光斑中心计算可以通过图像处理算法得到；此处定日镜分组CF-l簇的中心位置只有，z坐标为定日镜高度为固定值，可以直接转换为三维立体坐标；设太阳位置为S，定日镜分组CF-l簇中心位置为D1，BCS靶中心位置为B1，光斑中心位置为P，则根据两个向量点乘计算方法：两个向量点乘=与的积， ；则如下和/＞两个法线夹角之差即为反射偏差，图4所示；假设入射光线为/＞，理论反射到靶心反射光线为/＞，实际反射到光斑中心光线为/＞理论法线为/＞，实际法线为/＞，/＞为和/＞的夹角即反射偏差； ； ； 。以上所述仅为本申请的优选实施例而已，并不用于限制本申请，对于本领域的技术人员来说，本申请可以有各种更改和变化。凡在本申请的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。
