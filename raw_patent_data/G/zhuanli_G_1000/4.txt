标题title
一种复杂城市环境下的资源三号遥感影像绿地提取方法
摘要abst
本发明公开了一种复杂城市环境下的资源三号遥感影像绿地提取方法，该方法通过在HSI颜色空间构建对象级阴影提取特征，将资源三号遥感影像划分阴影区域和非阴影区；通过构建抗低亮度像元干扰的绿地提取特征，参考现有提取结果设计分块Otus分割算法，提取非阴影区域的城市绿地；利用归一化植被指数，提取阴影区域的城市绿地；最后通过将非阴影区域的城市绿地和阴影区域的城市绿地进行合并处理，获取城市绿地提取结果。优点是：解决了使用归一化植被指数精细划分绿地、水体、蓝顶建筑以及阴影存在的问题，对于快速高效地开展城市绿地空间业务化常态化遥感监测具有重要意义，有助于优化城市绿地空间结构和城市生态环境。
权利要求书clms
1.一种复杂城市环境下的资源三号遥感影像绿地提取方法，其特征在于：包括如下步骤，S1、阴影与非阴影区域划分：对资源三号高分遥感影像进行处理获取预设分辨率的多光谱影像，基于该多光谱影像获取红绿蓝三波段遥感影像，采用Segment Anything Model大模型对红绿蓝三波段遥感影像进行自动分割获取对象；通过将红绿蓝三波段遥感影像变换到HSI色彩空间，计算所有像素的阴影提取特征并按各对象进行统计，以获取各对象的阴影提取特征，根据对象的阴影提取特征与阴影提取特征的分割阈值之间的大小关系，将各对象判定为阴影区域或非阴影区域；S2、非阴影区域和阴影区域的城市绿地提取：对于非阴影区域，设置掩膜并计算抗低亮度像元干扰的绿地提取特征，基于改进的分块Otus分割算法对绿地提取特征进行分割，获取非阴影区域的绿地；对于阴影区域，计算阴影区域的归一化植被指数特征，拉伸阴影区域，确定归一化植被指数特征的分割阈值，根据归一化植被指数特征与归一化植被指数特征的分割阈值之间的大小关系，将各像素判定为绿地或背景，以获取阴影区域的绿地；S3、城市绿地合并：将非阴影区域和阴影区域的绿地合并后输出，获取城市绿地提取结果。2.根据权利要求1所述的复杂城市环境下的资源三号遥感影像绿地提取方法，其特征在于：步骤S1具体包括如下内容，S11、获取资源三号高分遥感影像，对资源三号高分遥感影像中的全色影像和多光谱影像进行几何精校正和pan-sharp融合，获取预设分辨率的多光谱影像；S12、抽取预设分辨率多光谱影像的红、绿、蓝波段，生成红绿蓝三波段遥感影像，采用Segment Anything Model大模型对红绿蓝三波段遥感影像进行自动分割，生成多个色彩均匀的对象；S13、将红绿蓝三波段遥感影像变换到HSI色彩空间；S14、逐个像素计算HIS色彩空间内的阴影提取特征FS，并将对象内部各像素的阴影提取特征FS的平均值作为对象的阴影提取特征FOS；S15、采用人机交互解译的方式，确定对象的阴影提取特征FOS的分割阈值TOS，将阴影提取特征大于或等于分割阈值TOS的对象判定为阴影区域，将阴影提取特征小于分割阈值TOS的对象判定为非阴影区域。3.根据权利要求2所述的复杂城市环境下的资源三号遥感影像绿地提取方法，其特征在于：步骤S12中，采用Segment Anything Model大模型对红绿蓝三波段遥感影像进行自动分割，生成多个色彩均匀的对象，具体为，将单幅遥感影像按照256×256像素窗口滑动裁剪，且相邻两个窗口之间设置20％的重叠；将裁剪后的影像进行2％线性拉伸，再采用Segment Anything Model大模型进行分割以生成对象；相邻窗口的重叠对象合并为单个对象。4.根据权利要求2所述的阴影区域和非阴影区域划分方法，其特征在于，步骤S14中，HSI颜色空间阴影提取特征FS的计算公式为，其中，H为色调；S为饱和度；I为亮度。5.根据权利要求1所述的复杂城市环境下的资源三号遥感影像绿地提取方法，其特征在于：步骤S2中，非阴影区域的城市绿地提取具体包括如下内容，S211、将蓝波段DN值大于经验值的部分设置为掩膜，以将其排除在城市绿地提取结果中；S212、计算抗低亮度像元干扰的绿地提取特征FG；S213、利用参照现有提取产品的分块Otus分割算法，对绿地提取特征FG进行分割，生成非阴影区域的绿地。6.根据权利要求5所述的复杂城市环境下的资源三号遥感影像绿地提取方法，其特征在于：步骤S212中，抗低亮度像元干扰的绿地提取特征FG的计算公式为，其中，NIR为近红外波段的DN值；R为红光波段的DN值。7.根据权利要求5所述的复杂城市环境下的资源三号遥感影像绿地提取方法，其特征在于：步骤S213具体包括如下内容，S2131、按照初始分块尺寸将遥感影像进行无重叠的分块；S2132、对于每一个分块，采用Otus算法计算图像分割阈值T，基于图像分割阈值T对遥感影像进行二值分割，判定像素大于分割阈值T的区域为绿地；计算分块的绿地率p；S2133、计算现有提取产品的分块的绿地率p′；S2134、计算遥感影像的分块的绿地率与现有提取产品的分块的绿地率之间的差异度S，公式为，其中，pi为遥感影像的第i个分块的绿地率；pi′为现有提取产品的第i个分块的绿地率；n为分块的数量；S2135、将分块尺寸扩大到原来的两倍，返回步骤S2131，再次计算差异度，直到扩大后的分块尺寸大于遥感影像宽度或长度；S2136、选取最小的差异度所对应的分块尺寸，在该分块尺寸下，选取|p-p′|小于或等于预设阈值的分块，以Otus算法分割阈值T对遥感影像进行二值分割，并记录当前分块的中心坐标和对应的分割阈值Ti；S2137、基于|p-p′|小于或等于预设阈值的分块的中心坐标和分割阈值Ti，计算|p-p′|大于预设阈值的分块的分割阈值C，公式为，其中，为|p-p′|大于预设阈值的分块的中心坐标；S2138、根据分割阈值C提取|p-p′|大于预设阈值的分块内的绿地；S2139、合并各分块中提取的绿地，获取阴影区域的绿地提取结果。8.根据权利要求1所述的复杂城市环境下的资源三号遥感影像绿地提取方法，其特征在于：步骤S2中，阴影区域的城市绿地提取具体包括如下内容，S221、计算阴影区域的归一化植被指数NDVI特征；S222、将遥感影像进行432波段合成以生成假彩色遥感影像，对假彩色影像的阴影区域像素进行拉伸；S223、利用人机交互解译的方式，确定归一化植被指数NDVI特征的分割阈值TNDVI，并将大于或等于分割阈值TNDVI的像素判定为绿地，将小于分割阈值TNDVI的像素判定为背景。9.根据权利要求1所述的复杂城市环境下的资源三号遥感影像绿地提取方法，其特征在于：步骤S3具体包括如下内容，S31、合并非阴影区域和阴影区域的城市绿地；S32、对合并结果进行腐蚀和膨胀操作；S33、输出城市绿地提取结果。
说明书desc
技术领域本发明涉及卫星遥感技术领域，尤其涉及一种复杂城市环境下的资源三号遥感影像绿地提取方法。背景技术城市绿地是以自然植被和人工植被为主要存在形态的城市用地。城市绿地有助于改善城市生态环境，对于减少空气污染、吸尘降噪、城市热岛效应有显著的效果，能够缓解人们的精神压力、提高人们的身体健康。同时，城市绿地能够改善市民的居住环境，为城市居民提供休闲、锻炼、社交的场所，提升居民幸福感。城市绿地是城市不可或缺的组成部分，准确、高效地利用高分遥感影像提取城市绿地的空间分布，对评价城市生态环境和优化城市绿地空间结构具有极为重要的意义与作用。目前应用资源三号遥感影像提取绿地存在一定不足，归一化植被指数精细划分绿地、水体、蓝顶建筑以及阴影存在的缺陷，降低了城市绿地遥感提取精度。城市区域内高分辨率遥感影像地物种类繁多，归一化植被指数特征空间内存在与绿地相似的像元，提取时可能出现部分水体、蓝顶建筑物被错误提取的情况。同时，由于建筑物阴影遮挡，对绿地光谱亮度值造成影响，出现了同物异谱的现象。发明内容本发明的目的在于提供一种复杂城市环境下的资源三号遥感影像绿地提取方法，从而解决现有技术中存在的前述问题。为了实现上述目的，本发明采用的技术方案如下：一种复杂城市环境下的资源三号遥感影像绿地提取方法，包括如下步骤，S1、阴影与非阴影区域划分：对资源三号高分遥感影像进行处理获取预设分辨率的多光谱影像，基于该多光谱影像获取红绿蓝三波段遥感影像，采用Segment Anything Model大模型对红绿蓝三波段遥感影像进行自动分割获取对象；通过将红绿蓝三波段遥感影像变换到HSI色彩空间，计算所有像素的阴影提取特征并按各对象进行统计，以获取各对象的阴影提取特征，根据对象的阴影提取特征与阴影提取特征的分割阈值之间的大小关系，将各对象判定为阴影区域或非阴影区域；S2、非阴影区域和阴影区域的城市绿地提取：对于非阴影区域，设置掩膜并计算抗低亮度像元干扰的绿地提取特征，基于改进的分块Otus分割算法对绿地提取特征进行分割，获取非阴影区域的绿地；对于阴影区域，计算阴影区域的归一化植被指数特征，拉伸阴影区域，确定归一化植被指数特征的分割阈值，根据归一化植被指数特征与归一化植被指数特征的分割阈值之间的大小关系，将各像素判定为绿地或背景，以获取阴影区域的绿地；S3、城市绿地合并：将非阴影区域和阴影区域的绿地合并后输出，获取城市绿地提取结果。优选的，步骤S1具体包括如下内容，S11、获取资源三号高分遥感影像，对资源三号高分遥感影像中的全色影像和多光谱影像进行几何精校正和pan-sharp融合，获取预设分辨率的多光谱影像；S12、抽取预设分辨率多光谱影像的红、绿、蓝波段，生成红绿蓝三波段遥感影像，采用Segment Anything Model大模型对红绿蓝三波段遥感影像进行自动分割，生成多个色彩均匀的对象；S13、将红绿蓝三波段遥感影像变换到HSI色彩空间；S14、逐个像素计算HIS色彩空间内的阴影提取特征FS，并将对象内部各像素的阴影提取特征FS的平均值作为对象的阴影提取特征FOS；S15、采用人机交互解译的方式，确定对象的阴影提取特征FOs的分割阈值TOS，将阴影提取特征大于或等于分割阈值TOS的对象判定为阴影区域，将阴影提取特征小于分割阈值TOS的对象判定为非阴影区域。优选的，步骤S12中，采用Segment Anything Model大模型对红绿蓝三波段遥感影像进行自动分割，生成多个色彩均匀的对象，具体为，将单幅遥感影像按照256x256像素窗口滑动裁剪，且相邻两个窗口之间设置20％的重叠；将裁剪后的影像进行2％线性拉伸，再采用Segment Anything Model大模型进行分割以生成对象；相邻窗口的重叠对象合并为单个对象。优选的，步骤S14中，HSI颜色空间阴影提取特征FS的计算公式为，其中，H为色调；S为饱和度；I为亮度。优选的，步骤S2中，非阴影区域的城市绿地提取具体包括如下内容，S211、将蓝波段DN值大于经验值的部分设置为掩膜，以将其排除在城市绿地提取结果中；S212、计算抗低亮度像元干扰的绿地提取特征FG；S213、利用参照现有提取产品的分块Otus分割算法，对绿地提取特征FG进行分割，生成非阴影区域的绿地。优选的，步骤S212中，抗低亮度像元干扰的绿地提取特征FG的计算公式为，其中，NIR为近红外波段的DN值；R为红光波段的DN值。优选的，步骤S213具体包括如下内容，S2131、按照初始分块尺寸将遥感影像进行无重叠的分块；S2132、对于每一个分块，采用Otus算法计算图像分割阈值T，基于图像分割阈值T对遥感影像进行二值分割，判定像素大于分割阈值T的区域为绿地；计算分块的绿地率p；S2133、计算现有提取产品的分块的绿地率p′；S2134、计算遥感影像的分块的绿地率与现有提取产品的分块的绿地率之间的差异度S，公式为，其中，pi为遥感影像的第i个分块的绿地率；pi′为现有提取产品的第i个分块的绿地率；n为分块的数量；S2135、将分块尺寸扩大到原来的两倍，返回步骤S2131，再次计算差异度，直到扩大后的分块尺寸大于遥感影像宽度或长度；S2136、选取最小的差异度所对应的分块尺寸，在该分块尺寸下，选取|p-p′|小于或等于预设阈值的分块，以Otus算法分割阈值T对遥感影像进行二值分割，并记录当前分块的中心坐标和对应的分割阈值Ti；S2137、基于|p-p′|小于或等于预设阈值的分块的中心坐标和分割阈值Ti，计算|p-p′|大于预设阈值的分块的分割阈值C，公式为，其中，为|p-p′|大于预设阈值的分块的中心坐标；S2138、根据分割阈值C提取|p-p′|大于预设阈值的分块内的绿地；S2139、合并各分块中提取的绿地，获取阴影区域的绿地提取结果。优选的，步骤S2中，阴影区域的城市绿地提取具体包括如下内容，S221、计算阴影区域的归一化植被指数NDVI特征；S222、将遥感影像进行432波段合成以生成假彩色遥感影像，对假彩色影像的阴影区域像素进行拉伸；S223、利用人机交互解译的方式，确定归一化植被指数NDVI特征的分割阈值TNDVI，并将大于或等于分割阈值TNDVI的像素判定为绿地，将小于分割阈值TNDVI的像素判定为背景。优选的，步骤S3具体包括如下内容，S31、合并非阴影区域和阴影区域的城市绿地；S32、对合并结果进行腐蚀和膨胀操作；S33、输出城市绿地提取结果。本发明的有益效果是：本发明方法设计抗低亮度像元干扰的绿地提取特征、HSI颜色空间下的对象级阴影提取特征，构建参考现有提取结果的分块Otus分割算法，实现了非阴影区域和阴影区域的城市绿地高精度提取，克服了归一化植被指数精细划分绿地、水体、蓝顶建筑以及阴影存在的缺陷，有助于全面准确地获取城市绿地的空间分布，对于快速高效地开展城市绿地空间业务化、常态化遥感监测具有重要意义，有助于优化城市绿地空间结构和城市生态环境。附图说明图1是本发明实施例中资源三号遥感影像绿地提取方法的流程图；图2是本发明实施例中各方法提取结果对比图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施方式仅仅用以解释本发明，并不用于限定本发明。如图1所示，本实施例中，提供了一种复杂城市环境下的资源三号遥感影像绿地提取方法，具体包括如下三部分内容：一、阴影与非阴影区域划分：对资源三号高分遥感影像进行处理获取预设分辨率的多光谱影像，基于该多光谱影像获取红绿蓝三波段遥感影像，采用Segment Anything Model大模型对红绿蓝三波段遥感影像进行自动分割获取对象；通过将红绿蓝三波段遥感影像变换到HSI色彩空间，计算所有像素的阴影提取特征并按对象进行统计，以获取各对象的阴影提取特征，根据对象的阴影提取特征与阴影提取特征的分割阈值之间的大小关系，将各对象判定为阴影区域或非阴影区域。具体包括如下内容，1、获取资源三号高分遥感影像，对资源三号高分遥感影像中的全色影像和多光谱影像进行几何精校正和pan-sharp融合，获取预设分辨率的多光谱影像；2、抽取预设分辨率多光谱影像的红、绿、蓝波段，生成红绿蓝三波段遥感影像，采用SAM大模型对红绿蓝三波段遥感影像进行自动分割，生成多个色彩均匀的对象。其中，采用SAM大模型对红绿蓝三波段遥感影像进行自动分割，生成多个色彩均匀的对象，具体为，将单幅遥感影像按照256×256像素窗口滑动裁剪，且相邻两个窗口之间设置20％的重叠；将裁剪后的影像进行2％线性拉伸，再采用SAM大模型进行分割以生成对象；相邻窗口的重叠对象合并为单个对象。3、将红绿蓝三波段遥感影像变换到HSI色彩空间。4、逐个像素计算HIS色彩空间内的阴影提取特征FS，并将对象内部各像素的阴影提取特征FS的平均值作为对象的阴影提取特征FOS。阴影提取特征FS的计算公式如下，其中，H为色调；S为饱和度；I为亮度。5、采用人机交互解译的方式，确定对象的阴影提取特征FOS的分割阈值TOS，将阴影提取特征大于或等于分割阈值TOS的对象判定为阴影区域，将阴影提取特征小于分割阈值TOS的对象判定为非阴影区域。二、非阴影区域和阴影区域的城市绿地提取：对于非阴影区域，设置掩膜并计算抗低亮度像元干扰的绿地提取特征，基于改进的分块Otus分割算法对绿地提取特征进行分割，获取非阴影区域的绿地。具体包括如下内容，1.1、将蓝波段DN值大于经验值70的部分设置为掩膜，以将其排除在城市绿地提取结果中；1.2、计算抗低亮度像元干扰的绿地提取特征FG，计算公式为，其中，NIR为近红外波段的DN值；R为红光波段的DN值。1.3、利用参照现有提取产品的分块Otus分割算法，对绿地提取特征FG进行分割，生成非阴影区域的绿地。本实施例中，从分块和参考现有提取产品两个方面改进Otus分割算法，再利用改进的Otus分割算法对绿地提取特征进行分割，以生成非阴影区域的绿地。提取的具体过程为，a、按照初始分块尺寸将遥感影像进行无重叠的分块，初始分块尺寸j为128；b、对于每一个分块，采用Otus算法计算图像分割阈值T，基于图像分割阈值T对遥感影像进行二值分割，判定像素大于分割阈值T的区域为绿地；计算分块的绿地率p；c、计算现有提取产品的分块的绿地率p′；d、计算遥感影像的分块的绿地率与现有提取产品的分块的绿地率之间的差异度S，公式为，其中，pi为遥感影像的第i个分块的绿地率；p′i为现有提取产品的第i个分块的绿地率；n为分块的数量。e、将分块尺寸j扩大到原来的两倍，返回步骤a，再次计算差异度，直到扩大后的分块尺寸2j大于遥感影像宽度或2j大于遥感影像长度；f、选取最小的差异度所对应的分块尺寸k，在该分块尺寸k下，选取遥感影像的分块的绿地率与现有提取产品的分块的绿地率之差的绝对值小于或等于预设阈值的分块，以Otus算法分割阈值T对遥感影像进行二值分割，并记录当前分块Bi的中心坐标和对应的分割阈值Ti；g、基于分块Bi的中心坐标和分割阈值Ti，选取遥感影像的分块的绿地率与现有提取产品的分块的绿地率之差的绝对值大于预设阈值的分块E，对于该分块E，计算其相应的分割阈值C，公式为，其中，为分块E的中心坐标。h、根据分割阈值C提取各分块E内的绿地；i、合并各分块中提取的绿地，获取阴影区域的绿地提取结果。对于阴影区域，计算阴影区域的归一化植被指数特征，拉伸阴影区域，确定归一化植被指数特征的分割阈值，根据归一化植被指数特征与归一化植被指数特征的分割阈值之间的大小关系，将各像素判定为绿地或背景，以获取阴影区域的绿地。具体包括如下内容，2.1、计算阴影区域的归一化植被指数NDVI特征，计算公式为，其中，NIR为近红外波段的DN值；R为红光波段的DN值。2.2、将遥感影像进行432波段合成以生成假彩色遥感影像，对假彩色影像的阴影区域像素进行拉伸，拉伸的公式为，其中，gmin为波段的最小值；gmax为波段的最大值；g1为拉伸后的值。2.3、利用人机交互解译的方式，确定归一化植被指数NDVI特征的分割阈值TNDVI，并将大于或等于分割阈值TNDVI的像素判定为绿地，将小于分割阈值TNDVI的像素判定为背景。三、城市绿地合并：将非阴影区域和阴影区域的绿地合并后输出，获取城市绿地提取结果。具体包括如下内容，1、合并非阴影区域和阴影区域的城市绿地；2、对合并结果按照下式模板进行1次腐蚀和膨胀操作；3、输出城市绿地提取结果。通过采用本发明公开的上述技术方案，得到了如下有益的效果：本发明提供了一种复杂城市环境下的资源三号遥感影像绿地提取方法，本发明方法设计抗低亮度像元干扰的绿地提取特征、HSI颜色空间下的对象级阴影提取特征，构建参考现有提取结果的分块Otus分割算法，实现了非阴影区域和阴影区域的城市绿地高精度提取，克服了归一化植被指数精细划分绿地、水体、蓝顶建筑以及阴影存在的缺陷，有助于全面准确地获取城市绿地的空间分布，对于快速高效地开展城市绿地空间业务化、常态化遥感监测具有重要意义，有助于优化城市绿地空间结构和城市生态环境。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视本发明的保护范围。
