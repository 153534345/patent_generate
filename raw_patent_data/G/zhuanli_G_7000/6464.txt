标题title
泊车辅助装置、车辆、泊车辅助方法以及泊车辅助程序
摘要abst
泊车辅助装置具备控制部和泊车路径计算部，所述泊车路径计算部计算泊车路径，所述控制部基于被输入的障碍物信息和由所述泊车路径计算部计算出的泊车路径信息，来变更自动泊车参数中包含的停止判定距离参数。
权利要求书clms
1.一种泊车辅助装置，具备控制部和泊车路径计算部，其中，所述泊车路径计算部计算泊车路径，所述控制部基于被输入的障碍物信息和由所述泊车路径计算部计算出的泊车路径信息，来变更自动泊车参数中包含的停止判定距离参数。2.根据权利要求1所述的泊车辅助装置，其中，所述控制部基于所述障碍物信息中包含的障碍物与所述泊车路径信息所表示的泊车路径之间的距离，来变更自动泊车参数中包含的停止判定距离参数。3.根据权利要求2所述的泊车辅助装置，其中，所述控制部在所述距离低于规定的阈值的情况下，变更自动泊车参数中包含的停止判定距离参数。4.根据权利要求2所述的泊车辅助装置，其中，所述控制部在所述障碍物与所述泊车路径之间的最短距离低于规定的阈值的情况下，变更自动泊车参数中包含的停止判定距离参数。5.根据权利要求2所述的泊车辅助装置，其中，所述控制部针对所述泊车路径中包含的每个路径点来计算所述障碍物与所述泊车路径之间的距离，在存在所述距离低于规定的阈值的路径点的情况下，变更自动泊车参数中包含的停止判定距离参数。6.根据权利要求1至5中的任一项所述的泊车辅助装置，其中，针对从所述泊车路径朝向所述障碍物信息中包含的障碍物的方向进行所述停止判定距离参数的变更。7.根据权利要求1至6中的任一项所述的泊车辅助装置，其中，所述控制部在变更所述停止判定距离参数时，还变更自动泊车参数中包含的目标速度、最高速度、加速度、减速度、PID增益、自动制动器的停止目标距离、自动制动器的TTC设定时间中的任一个以上的参数。8.一种车辆，具备：泊车辅助装置，其具备控制部和泊车路径计算部；以及检测部，其检测障碍物，其中，所述泊车路径计算部计算泊车路径，所述检测部检测障碍物，并向所述泊车辅助装置输入与该障碍物有关的障碍物信息，所述控制部基于被输入的障碍物信息和由所述泊车路径计算部计算出的泊车路径信息，来变更自动泊车参数中包含的停止判定距离参数。9.根据权利要求8所述的车辆，其中，所述控制部基于所述障碍物信息中包含的障碍物与所述泊车路径信息所表示的泊车路径之间的距离，来变更自动泊车参数中包含的停止判定距离参数。10.根据权利要求9所述的车辆，其中，所述控制部在所述距离低于规定的阈值的情况下，变更自动泊车参数中包含的停止判定距离参数。11.根据权利要求9所述的车辆，其中，所述控制部在所述障碍物与所述泊车路径之间的最短距离低于规定的阈值的情况下，变更自动泊车参数中包含的停止判定距离参数。12.根据权利要求9所述的车辆，其中，所述控制部针对所述泊车路径中包含的每个路径点来计算所述障碍物与所述泊车路径之间的距离，在存在所述距离低于规定的阈值的路径点的情况下，变更自动泊车参数中包含的停止判定距离参数。13.根据权利要求8至12中的任一项所述的车辆，其中，针对从所述泊车路径朝向所述障碍物信息中包含的障碍物的方向进行所述停止判定距离参数的变更。14.根据权利要求8至13中的任一项所述的车辆，其中，所述控制部在变更所述停止判定距离参数时，还变更自动泊车参数中包含的目标速度、最高速度、加速度、减速度、PID增益、自动制动器的停止目标距离、自动制动器的TTC设定时间中的任一个以上的参数。15.一种泊车辅助方法，是利用具备控制部和泊车路径计算部的装置执行的泊车辅助方法，所述泊车辅助方法包括以下步骤：所述泊车路径计算部计算泊车路径；以及所述控制部基于被输入的障碍物信息和由所述泊车路径计算部计算出的泊车路径信息，来变更自动泊车参数中包含的停止判定距离参数。16.一种泊车辅助程序，使具备控制部和泊车路径计算部的装置执行以下步骤：所述泊车路径计算部计算泊车路径；以及所述控制部基于被输入的障碍物信息和由所述泊车路径计算部计算出的泊车路径信息，来变更自动泊车参数中包含的停止判定距离参数。
说明书desc
技术领域本公开涉及一种泊车辅助装置。本公开还涉及一种具备泊车辅助装置的车辆、泊车辅助方法以及泊车辅助程序。背景技术在专利文献1中记载了以下内容：为了提供一种能够在具备自动行驶装置和自动制动装置的车辆中实现两装置的协调来恰当地进行车辆的控制的车辆控制装置，在对具备自动行驶装置和自动制动装置的车辆进行控制的车辆控制装置中具备行驶输出设定单元，所述自动行驶装置使车辆进行自动行驶，所述自动制动装置在检测到障碍物的情况下对车辆进行自动制动，在检测到所述障碍物的情况下，所述行驶输出设定单元使所述自动行驶装置的行驶输出与通常输出相比减少。在专利文献2中记载了以下内容：为了提供一种能够在车辆进行泊车时执行恰当的自动制动的技术，本公开的某个方式的泊车辅助装置具备：多个对象物探测传感器，其探测本车辆的周边的对象物；停车区域检测部，其检测停车区域；以及制动器执行决定部，其在由多个对象物探测传感器探测到对象物位于第一检测范围内的情况下决定执行本车辆的制动，其中，在使本车辆泊车到停车区域时，如果对象物探测传感器探测到对象物位于与第一检测范围相比扩大的第二检测范围内，则制动器执行决定部决定执行本车辆的制动，第二检测范围与本车辆的车宽相比向车宽方向外侧扩大。现有技术文献专利文献专利文献1：日本特开2008-143337号公报专利文献2：日本特开2017-214011号公报发明内容用于解决问题的方案泊车辅助装置具备控制部和泊车路径计算部，其中，所述泊车路径计算部计算泊车路径，所述控制部基于被输入的障碍物信息和由所述泊车路径计算部计算出的泊车路径信息来变更自动泊车参数中包含的停止判定距离参数。附图说明图1是示出以往的自动泊车的概念图，图1的示出向通常空间的自动泊车，图1的示出向狭小空间的自动泊车。图2是示出具备本公开所涉及的泊车辅助装置1的车辆的自动泊车的概念图。图3是示出具备本公开所涉及的泊车辅助装置1的实施例的车辆的结构图。图4是示出由具备本公开所涉及的泊车辅助装置1的车辆进行的自动泊车处理的一例的流程图。图5是泊车路径与周边障碍物之间的距离d以及阈值ε的说明图。图6是示出自动泊车参数的变更例的图。具体实施方式。已经存在具有自动泊车功能的车辆。在该自动泊车功能中具有以下功能：即使车辆的驾驶员不进行方向盘操作或油门操作，车辆侧也自动地进行车辆的后退、转弯等。另外，自动地进行转向、驾驶员进行驱动之类的泊车辅助等也能够包含在上述的自动泊车中。从自动泊车时的安全性的观点出发，有时在所述自动泊车功能中附加有障碍物停止功能。障碍物停止功能例如是以下功能：车辆具有距车辆规定的距离来作为停止判定距离参数，在探测到在该规定的距离以内存在障碍物的情况下，自动制动器工作以使车辆自动停止。通过具有该障碍物停止功能，能够保证自动泊车的安全。另外，在停车场等中，有时从车辆到相邻车辆等障碍物的距离低于上述的规定距离。以下，将这样的停车场等的空间标记为狭小空间。在具备上述障碍物停止功能的车辆的情况下，即使试图向所述狭小空间进行自动泊车，有时也会因传感器对相邻的车辆或存在于附近的壁面等作出反应而使自动制动器工作，在泊车完成之前车辆停止。即，无法完成自动泊车。本公开提供一种即使是狭小空间也能够完成自动泊车的泊车辅助装置。以下，适当参照附图来详细地进行说明。此外，所附附图以及以下的说明是为了使本领域技术人员充分地理解本公开而提供的，并不希望通过它们来限定权利要求书所记载的主题。图1是示出以往的自动泊车的概念图，示出向通常空间的自动泊车，示出向狭小空间的自动泊车。在图1的示出的停车场PW中并排地配置有五个停车空间P1～P5。车辆100后退并试图进行自动泊车。车辆100具备障碍物停止功能。车辆100的周围示出的区域A1是相当于上述的停止判定距离的区域，在该区域A1内存在障碍物的情况下，自动制动器工作，车辆100停车。在停车空间P1、P2、P5中存在三台其它车辆。根据情况不同，这三台车辆对于车辆100来说可能成为障碍物OBJ1～OBJ3。此外，对于车辆100来说的障碍物不限于其它车辆。例如，相邻的建筑物的围栏、墙壁等也可能成为障碍物。在图1的的情况下，停车空间P1～P5各自的空间尺寸在宽度方向上大。因此，在车辆100的所述停止判定距离内不存在障碍物。因而，车辆100的自动制动器不工作，车辆100能够完成自动泊车。另一方面，在图1的的狭小空间的情况下，与上述情况不同。图1的示出的停车场PN与停车场PW的相同点是，存在五个停车空间P1～P5、车辆100要进行自动泊车以及存在其它车辆。但是，图1的示出的停车场PN的停车空间P1～P5的宽度窄。即，停车空间P1～P5各自为狭小空间。于是，由于作为其它车辆的障碍物OBJ2和OBJ3进入车辆100的所述停止判定距离内，因此车辆100使自动制动器工作，并当场停止。即，向停车空间P3的自动泊车未完成。接着，说明由本公开的泊车辅助装置进行的自动泊车的情况。图2是示出具备本公开所涉及的泊车辅助装置1的车辆的自动泊车的概念图。如图示那样，如果使用本公开所涉及的泊车辅助装置1，则能够缩小停止判定距离。其结果，图1的示出的区域A1为更狭小的区域A2。因此，即使是狭小空间，也不会与周围的障碍物碰撞，能够安全地完成自动泊车。以下，对用于实现这样的自动泊车的结构进行详细说明。图3是示出具备本公开所涉及的泊车辅助装置1的实施例的车辆的结构图。车辆100具备本公开的泊车辅助装置1。另外，车辆100具备检测装置2、行驶控制装置3、HMI4等。此外，车辆100也可以具备这些构成要素以外的构成要素。泊车辅助装置1具备控制部11和泊车路径计算部12。泊车辅助装置1可以具备用于存储执行该泊车辅助装置1的动作所需的软件程序和各种参数的存储器。另外，泊车辅助装置1也可以具备通信接口等其它构成要素。泊车辅助装置1与检测装置2、行驶控制装置3、HMI 4等相互连接，泊车辅助装置1与这些构成要素之间进行信息和指令的发送接收。此外，控制部11也可以在上述存储器等中保持有自动泊车参数。自动泊车参数包含上述的停止判定距离的值。除此以外，自动泊车参数也可以还包含车辆100的目标速度、加速度、减速度、PID增益、自动制动器的停止目标距离、自动制动器的TTC设定时间等。自动泊车参数也可以包含除这些参数以外的参数。控制部11对车辆100的自动泊车进行控制。泊车辅助装置1可以使用例如一个或多个ECU来构成。检测装置2是用于检测对车辆100而言的障碍物的装置。检测装置2可以是安装于车辆100的后置摄像头、声纳、雷达、LIDAR等。但是，不限定于这些装置。检测装置2能够检测位于车辆100的外侧的障碍物。检测装置2在检测到位于车辆100的外侧的障碍物时，向泊车辅助装置1发送障碍物信息。在该障碍物信息中可以包含所检测到的障碍物的位置信息、从车辆100到障碍物的距离信息等。此外，障碍物信息也可以包含除这些信息以外的信息。行驶控制装置3是控制车辆100的油门、制动器、方向盘等的装置。通过该行驶控制装置3的控制，进行与自动泊车有关的车辆100的移动。HMI 4是向车辆100的乘员提示信息并接受来自乘员的信息输入的设备，典型的是配备在车辆100的前置面板上的触摸面板式监视器。但并不限定于此。具备如上所述的构成要素的车辆100能够利用检测装置2检测障碍物，在泊车辅助装置1所具备的控制部11的控制下进行自动泊车。可以基于由乘员经由HMI 4发出的指示来进行该自动泊车。图4是示出由具备本公开所涉及的泊车辅助装置1的车辆100进行的自动泊车处理的一例的流程图。此外，在该例中，在自动泊车中动态地变更自动泊车参数。在步骤S01中，控制部11对表示直到泊车目标位置为止的路径的信息进行更新。此外，该泊车路径可以是泊车路径计算部12基于车辆100的驾驶员等利用上述的HMI 4输入的指示而计算出的路径。此外，由于车辆100在后退动作时移动，因此在移动中有时也会发生某种状况的变化。例如，考虑相邻的车辆的门突然打开等情形。因此，在该例中对以下方式进行说明：在开始了自动泊车处理后，也一边动态地更新泊车路径一边使车辆100移动到泊车目标位置。在进行不更新当初决定的泊车路径的类型的自动泊车处理的情况下，也可以省略该步骤S01。在步骤S02中，控制部11检测车辆100的周边存在的障碍物。例如能够通过如下的处理来进行由控制部11进行的该检测。首先，如上所述，检测装置2能够检测周边障碍物。能够适当设定该检测范围。而且，在检测装置2检测到周边障碍物的情况下，检测装置2向泊车辅助装置1发送上述的障碍物信息。因此，能够设为在泊车辅助装置1接收到该障碍物信息的情况下，在步骤S02中，控制部11检测到周边障碍物。在步骤S03中，控制部11选择自动泊车参数。该自动泊车参数选择处理具有步骤S31～S35。该步骤S31～S35在后面叙述。在步骤S04中，行驶控制装置3在控制部11的控制下，基于自动泊车参数的当前值来实施车辆控制。具体地说，进行方向盘和油门的自动操作、车辆100的挡位切换动作等。在泊车辅助的情况下，进行方向盘的自动操作。在步骤S05中，控制部11判断是否到达了泊车路径的终点位置。在到达了终点位置的情况下，自动泊车处理结束。在没有到达终点位置的情况下，转移到步骤S01。接着，对上述自动泊车参数选择处理中包括的步骤S31～S34进行说明。也一并参照图5来进行该说明。在步骤S31中，控制部11判断是否检测到周边障碍物。在检测到周边障碍物的情况下，向步骤S32分支，在没有检测到周边障碍物的情况下，向步骤S35分支。在步骤S32中，控制部11用于计算泊车路径与周边障碍物之间的距离D。图5的示出所述距离D的计算方法的一例。此外，为了明确说明的重点部分，在图5中，对于与图1、图2相同的部分，省略了一部分参照附图标记。控制部11能够基于泊车路径信息虚拟地生成如图5所示的路径点R的集合。该路径点R可以延伸到作为泊车完成地点的终点位置G。此外，虚拟地生成的路径点R的位置为对于控制部11来说已知的值。控制部11针对在之前的步骤S02中检测到的周边障碍物分别计算各路径点R与所述周边障碍物之间的距离d。该计算为已知的路径点R与障碍物的绝对位置之间的两点间距离计算，该障碍物的绝对位置是根据车辆100与障碍物之间的相对位置计算出的位置。而且，分别计算出的距离d中的最小值为泊车路径与周边障碍物之间的距离D。接着，在步骤S33中，控制部11判断所述距离D是否低于规定的阈值ε。在所述距离D低于规定的阈值ε的情况下，向步骤S34分支，在不低于规定的阈值ε的情况下，向步骤S35分支。此外，如果不基于距离D而基于距离d来表现步骤S33的上述的分支条件，则在存在距离d低于规定的阈值ε那样的路径点R的情况下，向步骤S34分支，在不存在这样的路径点R的情况下，向步骤S35分支。步骤S34是在所述距离D低于规定的阈值ε的情况下进行的处理。此时，控制部11选择狭小空间用的自动泊车参数。例如，将自动泊车参数中包含的停止判定距离参数变更为更小的值。另一方面，步骤S35是在所述距离D不低于规定的阈值ε的情况下进行的处理。在该情况下，由于是即使车辆100以这种状态后退也无障碍的情况，因此也选择通常的自动泊车参数。例如，自动泊车参数中包含的停止判定距离参数仍保持当前的值而不变更。此外，规定的阈值ε、狭小空间用的停止判定距离以及通常的停止判定距离的大小关系例如如以下那样。狭小空间用的停止判定距离＜通常的停止判定距离≤规定的阈值ε。如以上那样选择狭小空间用的自动泊车参数或通常的自动泊车参数。然后，处理转移到后续的步骤S04。于是，即使停车空间是上述的狭小空间，也能够基于狭小空间用的自动泊车参数来继续进行自动泊车。此外，在判断为是向狭小空间的自动泊车的情况下，能够变更的自动泊车参数不限于上述的停止判定距离参数。如上所述，作为其它自动泊车参数，具有车辆100的目标速度、最高速度、加速度、减速度、PID增益、自动制动器的停止目标距离、自动制动器的TTC设定时间等。在步骤S34中，控制部11也可以追加地变更这些参数。例如，在步骤S34中，能够将车辆100的目标速度降低到1km/h。由于是向狭小空间的泊车，因此降低车辆100的速度来慎重地进行自动泊车。另外，在步骤S34中，也可以不使停止判定距离参数相对于车辆100的周围一律减少。例如，如表示自动泊车参数的变更例的图6所示那样，由检测装置2检测到的障碍物有时仅存在于正在进行自动泊车的车辆100的左右任一侧。能够基于由泊车路径计算部12计算出的泊车路径和从检测装置2发送到控制部11的所述障碍物信息来确定相对于泊车路径而言障碍物所在的方向。在这种情况下，在步骤S34中，也可以针对从泊车路径朝向障碍物信息中包含的障碍物的方向，变更停止判定距离参数的值。例如，可以将图1示出的区域A1缩小为图6示出的区域A3或区域A4。如上所述，泊车辅助装置具备控制部和泊车路径计算部，所述泊车路径计算部计算泊车路径，所述控制部可以基于被输入的障碍物信息和由所述泊车路径计算部计算出的泊车路径信息，来变更自动泊车参数中包含的停止判定距离参数。另外，所述控制部可以基于所述障碍物信息中包含的障碍物与所述泊车路径信息所表示的泊车路径之间的距离，来变更自动泊车参数中包含的停止判定距离参数。根据所述结构，即使是例如自动制动器工作而无法完成自动泊车那样的狭小空间，具备泊车辅助装置的车辆也能够完成自动泊车。在上述结构中，所述控制部可以在所述距离低于规定的阈值的情况下变更自动泊车参数中包含的停止判定距离参数。另外，所述控制部可以在所述障碍物与所述泊车路径之间的最短距离低于规定的阈值的情况下，变更自动泊车参数中包含的停止判定距离参数。另外，所述控制部也可以针对所述泊车路径中包含的每个路径点来计算所述障碍物与所述泊车路径之间的距离，在存在所述距离低于规定的阈值的路径点的情况下，变更自动泊车参数中包含的停止判定距离参数。根据所述结构，在障碍物位于近的场所的情况下变更停止判定距离参数，由此，即使是狭小空间，具备泊车辅助装置的车辆也能够完成自动泊车。在上述结构中，可以针对从所述泊车路径朝向所述障碍物信息中包含的障碍物的方向进行所述停止判定距离参数的变更。根据所述结构，仅缩减停止判定距离参数中的发现了障碍物的一侧的参数，就能够安全地进行自动泊车。在上述结构中，所述控制部在变更所述停止判定距离参数时，可以还变更自动泊车参数中包含的目标速度、加速度、减速度、PID增益、自动制动器的停止目标距离、自动制动器的TTC设定时间中的任一个以上的参数。根据所述结构，在被判断为狭小空间时，不仅变更停止判定距离，还变更其它各种自动泊车参数，从而能够更安全地完成自动泊车。另外，在具备泊车辅助装置和检测障碍物的检测部的车辆中，所述泊车辅助装置具有控制部和泊车路径计算部，所述泊车辅助装置的所述泊车路径计算部计算泊车路径，所述检测部检测障碍物，向所述泊车辅助装置输入与该障碍物有关的障碍物信息，所述控制部可以基于被输入的障碍物信息和由所述泊车路径计算部计算出的泊车路径信息来变更自动泊车参数中包含的停止判定距离参数。另外，所述控制部可以基于所述障碍物信息中包含的障碍物与所述泊车路径信息所表示的泊车路径之间的距离，来变更自动泊车参数中包含的停止判定距离参数。根据所述结构，即使是狭小空间，车辆也能够完成自动泊车。在上述结构中，所述控制部可以在所述距离低于规定的阈值的情况下变更自动泊车参数中包含的停止判定距离参数。另外，所述控制部可以在所述障碍物与所述泊车路径之间的最短距离低于规定的阈值的情况下，变更自动泊车参数中包含的停止判定距离参数。另外，所述控制部也可以针对所述泊车路径中包含的每个路径点来计算所述障碍物与所述泊车路径之间的距离，在存在所述距离低于规定的阈值的路径点的情况下，变更自动泊车参数中包含的停止判定距离参数。根据所述结构，在障碍物位于近的场所的情况下变更停止判定距离参数，由此，即使是狭小空间，车辆也能够完成自动泊车。在上述结构中，可以针对从所述泊车路径朝向所述障碍物信息中包含的障碍物的方向进行所述停止判定距离参数的变更。根据所述结构，仅缩减停止判定距离参数中的发现了障碍物的一侧的参数，就能够安全地进行自动泊车。在上述结构中，所述控制部在变更所述停止判定距离参数时，可以还变更自动泊车参数中包含的目标速度、加速度、减速度、PID增益、自动制动器的停止目标距离、自动制动器的TTC设定时间中的任一个以上的参数。根据所述结构，通过所述结构而被判断为狭小空间时，不仅变更停止判定距离，还变更其它各种自动泊车参数，从而能够更安全地完成自动泊车。另外，利用具备控制部和泊车路径计算部的装置执行的泊车辅助方法可以包括以下步骤：所述泊车路径计算部计算泊车路径；以及所述控制部基于被输入的障碍物信息和由所述泊车路径计算部计算出的泊车路径信息，来变更自动泊车参数中包含的停止判定距离参数。根据所述结构，即使是狭小空间，使用了所述泊车辅助方法的车辆也能够完成自动泊车。另外，泊车辅助程序可以使具备控制部和泊车路径计算部的装置执行以下步骤：所述泊车路径计算部计算泊车路径；以及所述控制部基于被输入的障碍物信息和由所述泊车路径计算部计算出的泊车路径信息，来变更自动泊车参数中包含的停止判定距离参数。根据所述结构，即使是狭小空间，安装有所述程序的车辆也能够完成自动泊车。以上，参照附图对各种实施方式进行了说明，但本公开并不限定于所述例子，这是不言而喻的。例如，本公开也能够应用于驾驶员从车辆下来并委托车辆进行之后的泊车那样的代客泊车。如果是本领域技术人员，显然能够在权利要求书所记载的范畴内想到各种变更例或修改例，并能够理解这些各种变更例或修改例当然也属于本公开的技术范围。另外，也可以在不脱离公开的主旨的范围内任意地组合上述实施方式中的各构成要素。此外，本申请基于2019年3月22日申请的日本专利申请，其内容作为参照而被引用到本申请中。附图标记说明1：泊车辅助装置；2：检测装置；3：行驶控制装置；11：控制部；12：泊车路径计算部；100：车辆；A1～A3：区域；G：终点位置；OBJ1～OBJ3：障碍物；P1～P5：停车空间；PW、PN：停车场；R：路径点。
