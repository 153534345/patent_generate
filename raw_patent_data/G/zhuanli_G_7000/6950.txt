标题title
应用于监测报警系统的基于ARM的开关量处理方法
摘要abst
本公开的实施例提供了应用于监测报警系统的基于ARM的开关量处理方法、装置、设备和计算机可读存储介质。所述方法包括获取开关量数据；所述开关量数据为二进制的位变量，用于标识设备的运行状态；基于所述开关量数据，通过预设算法，分别在绑定区和别名区定义两个结构体；通过在所述绑定区定义的结构体，对所述开关量数据进行存储和传输；通过在所述别名区定义的结构体，对所述开关量数据进行更新；所述监测报警系统包括支持BitBand操作的ARM嵌入式平台。以此方式，提升了开关量数据的存储、传输和运算效率。
权利要求书clms
1.一种应用于监测报警系统的基于ARM的开关量处理方法，其特征在于，包括：获取开关量数据；所述开关量数据为二进制的位变量，用于标识设备的运行状态；基于所述开关量数据，通过预设算法，分别在绑定区和别名区定义两个结构体；通过在所述绑定区定义的结构体，对所述开关量数据进行存储和传输；通过在所述别名区定义的结构体，对所述开关量数据进行更新；所述监测报警系统包括支持BitBand操作的ARM嵌入式平台。2.根据权利要求1所述的方法，其特征在于，基于所述开关量数据，通过预设算法，分别在绑定区和别名区定义两个结构体包括：基于所述开关量数据，通过BitBand算法，分别在绑定区和别名区定义两个结构体。3.根据权利要求2所述的方法，其特征在于，所述通过BitBand算法，分别在绑定区和别名区定义两个结构体包括：通过bit寻址方法，在绑定区定义一个结构体；通过word寻址方法，在别名区定义一个结构体。4.根据权利要求3所述的方法，其特征在于，所述别名区中结构体的位宽为所述绑定区中结构体位宽的32倍。5.根据权利要求4所述的方法，其特征在于，每个开关量在所述别名区结构体和绑定区结构体中的排序相同。6.根据权利要求5所述的方法，其特征在于，所述别名区结构体和绑定区结构体的起始偏移地址相同。7.一种应用于监测报警系统的基于ARM的开关量处理装置，其特征在于，包括：获取模块，用于获取开关量数据；所述开关量数据为二进制的位变量，用于标识设备的运行状态；定义模块，用于基于所述开关量数据，通过预设算法，分别在绑定区和别名区定义两个结构体；处理模块，用于通过在所述绑定区定义的结构体，对所述开关量数据进行存储和传输；通过在所述别名区定义的结构体，对所述开关量数据进行更新；所述监测报警系统包括支持BitBand操作的ARM嵌入式平台。8.根据权利要求7所述的装置，其特征在于，基于所述开关量数据，通过预设算法，分别在绑定区和别名区定义两个结构体包括：基于所述开关量数据，通过BitBand算法，分别在绑定区和别名区定义两个结构体。9.一种电子设备，包括存储器和处理器，所述存储器上存储有计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求1～6中任一项所述的方法。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述程序被处理器执行时实现如权利要求1～6中任一项所述的方法。
说明书desc
技术领域本公开的实施例一般涉及数据处理领域，并且更具体地，涉及一种应用于监测报警系统的基于ARM的开关量处理方法、装置、设备和计算机可读存储介质。背景技术在船舶监测报警领域，需要用到大量的监测报警点，需要对这些报警点数据进行采集、存储、运算、传输；一个测点/报警点，一般是指某个物理状态，此物理状态有且仅有2个值，所以正好可以使用计算机上的一个二进制的位变量来表示，计算机上处理的这种变量在行业中又称作开关量。在实际应用中，监测报警点有时候会很多，大型船舶，可高达几千个。因为数据量大，且在实时刷新，如果处理不当，算法不良，可能会导致更新慢，不可靠等问题。因此，研究开关量的处理效率和算法，是很有价值的。发明内容根据本公开的实施例，提供了一种应用于监测报警系统的基于ARM的开关量处理方案。在本公开的第一方面，提供了一种应用于监测报警系统的基于ARM的开关量处理方法。该方法包括：获取开关量数据；所述开关量数据为二进制的位变量，用于标识设备的运行状态；基于所述开关量数据，通过预设算法，分别在绑定区和别名区定义两个结构体；通过在所述绑定区定义的结构体，对所述开关量数据进行存储和传输；通过在所述别名区定义的结构体，对所述开关量数据进行更新；所述监测报警系统包括支持BitBand操作的ARM嵌入式平台。进一步地，基于所述开关量数据，通过预设算法，分别在绑定区和别名区定义两个结构体包括：基于所述开关量数据，通过BitBand算法，分别在绑定区和别名区定义两个结构体。进一步地，所述通过BitBand算法，分别在绑定区和别名区定义两个结构体包括：通过bit寻址方法，在绑定区定义一个结构体；通过word寻址方法，在别名区定义一个结构体。进一步地，所述别名区中结构体的位宽为所述绑定区中结构体位宽的32倍。进一步地，每个开关量在所述别名区结构体和绑定区结构体中的排序相同。进一步地，所述别名区结构体和绑定区结构体的起始偏移地址相同。在本公开的第二方面，提供了一种应用于监测报警系统的基于ARM的开关量处理装置。该装置包括：获取模块，用于获取开关量数据；所述开关量数据为二进制的位变量，用于标识设备的运行状态；定义模块，用于基于所述开关量数据，通过预设算法，分别在绑定区和别名区定义两个结构体；处理模块，用于通过在所述绑定区定义的结构体，对所述开关量数据进行存储和传输；通过在所述别名区定义的结构体，对所述开关量数据进行更新；所述监测报警系统包括支持BitBand操作的ARM嵌入式平台。进一步地，基于所述开关量数据，通过预设算法，分别在绑定区和别名区定义两个结构体包括：基于所述开关量数据，通过BitBand算法，分别在绑定区和别名区定义两个结构体。在本公开的第三方面，提供了一种电子设备。该电子设备包括：存储器和处理器，所述存储器上存储有计算机程序，所述处理器执行所述程序时实现如以上所述的方法。在本公开的第四方面，提供了一种计算机可读存储介质，其上存储有计算机程序，所述程序被处理器执行时实现如根据本公开的第一方面的方法。本申请实施例提供的应用于监测报警系统的基于ARM的开关量处理方法，通过获取开关量数据；所述开关量数据为二进制的位变量，用于标识设备的运行状态；基于所述开关量数据，通过预设算法，分别在绑定区和别名区定义两个结构体；通过在所述绑定区定义的结构体，对所述开关量数据进行存储和传输；通过在所述别名区定义的结构体，对所述开关量数据进行更新，提升了开关量数据的存储、传输和运算效率。应当理解，发明内容部分中所描述的内容并非旨在限定本公开的实施例的关键或重要特征，亦非用于限制本公开的范围。本公开的其它特征将通过以下的描述变得容易理解。附图说明结合附图并参考以下详细说明，本公开各实施例的上述和其他特征、优点及方面将变得更加明显。在附图中，相同或相似的附图标记表示相同或相似的元素，其中：图1示出了根据本公开的实施例的应用于监测报警系统的基于ARM的开关量处理方法的流程图；图2示出了根据本公开的实施例的局部ARM CORTEX-M4的内存映射示意图；图3示出了根据本公开的实施例的位绑定的应用示意图；图4示出了根据本公开的实施例的应用于监测报警系统的基于ARM的开关量处理装置的方框图；图5示出了能够实施本公开的实施例的示例性电子设备的方框图。具体实施方式为使本公开实施例的目的、技术方案和优点更加清楚，下面将结合本公开实施例中的附图，对本公开实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本公开一部分实施例，而不是全部的实施例。基于本公开中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的全部其他实施例，都属于本公开保护的范围。另外，本文中术语“和/或”，仅仅是一种描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。另外，本文中字符“/”，一般表示前后关联对象是一种“或”的关系。图1示出了根据本公开实施例的应用于监测报警系统的基于ARM的开关量处理方法100的流程图，包括：其中，所述监测报警系统通常为，支持BitBand操作的ARM嵌入式平台，例如，M3、M4内核的ARM嵌入式平台等。S110，获取开关量数据；所述开关量数据为二进制的位变量，用于标识设备的运行状态。其中，所述开关量数据为二进制的位变量，测点/报警点的状态与开关量的取值的对应，如表1所示：测点/报警点BitVal＝逻辑1BitVal＝逻辑0发电机的运行状态运行中停止发电机故障报警发生故障报警未发生故障报警烟感报警发生报警未发生报警防火门打开已打开未打开表1在一些实施例中，所述测点/报警点，通常可通过传感器进行采集，即，通过传感器电路，转化为芯片的GPIO对一个电压量的高低电平的采集。在一些实施例中，所述开关量通常用于标识设备的运行状态，如表2所示：表2S120，基于所述开关量数据，通过预设算法，分别在绑定区和别名区定义两个结构体；在一些实施例中，参考图2，以M4内核的局部内存映射为例，其中地址0x20000000-0x200FFFFF区间为BitBand区，寻址方式为Bit寻址；0x22000000-0x23FFFFFF区间为BitBand别名区，寻址方式为Word寻址。在一些实施例中，基于CMSIS映射，位绑定区内的一个bit对应同名区的32个bit；参考图3，将位变量或其组合形式的变量定义在绑定区，同时将一个32倍位宽的映射变量定义在别名区。当访问别名区的中一个单位变量时，等同于同时访问了绑定区的一个位变量，为实现原子操作提供了基础；具体的，针对于每一个开关量，均定义两种形式：1，Bit寻址形式，占用位宽为1bit；2，Word寻址形式，占用位宽是1Word＝32bit；所述Word寻址形式的位宽为Bit寻址形式的32倍；进一步地，通过上述两种寻址形式定义两个结构体，其中，所述两个结构体内部的开关量排列顺序一致；参考表2中对左发电机结构体的定义：表2Bit寻址形式的结构体定义如下：参考上述两种结构体，每种开关量在上述两种结构体中均有定义，排序相同，且通过Word寻址形式定义的结构体位宽，为通过Bit寻址形式定义的结构体位宽的32倍；例如，b0_Com Alarm在bit寻址结构体排在第一个，占用1bit，而对应的w0_Com Alarm在Word寻址结构体中同样排在第一个，但占用32bit；进一步地，在本公开中，上述两种结构体的起始偏移地址相同，参考下式：LeftGenerator_Type LeftGenerator__at；//Bit寻址对象定义在绑定区，偏址0LeftGeneratorAlias_Type LeftGeneratorAlias__at；//Word寻址对象定义在别名区，偏址0通过如上定义，上述两个结构体可形式一一配对关系，即，操作其中一个结构体的同时，等效于操作另一个结构体，即，在ARM中实现bit型变量运算时，不需要再经过整体读出-整体保存-单bit改变-整体写入的繁琐步骤，仅需要把bit型变量的组合体定义到绑定区，其对应word变量定义在别名区，通过改变别名区的一个变量单元就可实现。S130，通过在所述绑定区定义的结构体，对所述开关量数据进行存储和传输；通过在所述别名区定义的结构体，对所述开关量数据进行更新在一些实施例中，更新开关量时，可直接应用word寻址对象；例如，将b0_ComAlarm更新成Sn时，只需要对其配对变量直接赋值：LeftGeneratorAlias.w0_Com Alarm＝Sn；当需要对b0_Com Alarm读取并格式化输出时，只需读取LeftGeneratorAlias.w0_Com Alarm：printf；在一些实施例中，对所述开关量的存储结果为LeftGenerator；传输时，可直接引用LeftGenerator，或直接拷贝LeftGenerator到传输的buffer均可。根据本公开的实施例，实现了以下技术效果：利用ARM中独有的bitband功能，实现了bit型变量的原子级运算和映射，弥补了ARM不支持bit变量的缺陷。在本公开的监测报警系统中，对使用到的大量开关量数据，用组合变量的形式定义在ARM的绑定区，当需要对这些开关量进行采集和运算时，可通过改变别名区一个变量单元，就可实现对绑定区内bit型变量的单步改变；当需要对开关量进行总线传输时，只传输绑定区变量即可；进一步地，参考表3，可见，本公开提供的开关量处理方法，在降低了经济成本的同时，大幅度提升了开关量数据的存储、传输和运算效率。表3注：表中以√表示优点，×表示缺点。需要说明的是，对于前述的各方法实施例，为了简单描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本公开并不受所描述的动作顺序的限制，因为依据本公开，某些步骤可以采用其他顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于可选实施例，所涉及的动作和模块并不一定是本公开所必须的。以上是关于方法实施例的介绍，以下通过装置实施例，对本公开所述方案进行进一步说明。图4示出了根据本公开的实施例的应用于监测报警系统的基于ARM的开关量处理装置400的方框图。如图4所示，装置400包括：获取模块410，用于获取开关量数据；所述开关量数据为二进制的位变量，用于标识设备的运行状态；定义模块420，用于基于所述开关量数据，通过预设算法，分别在绑定区和别名区定义两个结构体；处理模块430，用于通过在所述绑定区定义的结构体，对所述开关量数据进行存储和传输；通过在所述别名区定义的结构体，对所述开关量数据进行更新；所述监测报警系统包括M3或M4内核的ARM嵌入式平台。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，所述描述的模块的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。图5示出了可以用来实施本公开的实施例的电子设备500的示意性框图。如图所示，设备500包括中央处理单元501，其可以根据存储在只读存储器502中的计算机程序指令或者从存储单元508加载到随机访问存储器503中的计算机程序指令，来执行各种适当的动作和处理。在RAM 503中，还可以存储设备500操作所需的各种程序和数据。CPU 501、ROM502以及RAM 503通过总线504彼此相连。输入/输出接口505也连接至总线504。设备500中的多个部件连接至I/O接口505，包括：输入单元506，例如键盘、鼠标等；输出单元507，例如各种类型的显示器、扬声器等；存储单元508，例如磁盘、光盘等；以及通信单元509，例如网卡、调制解调器、无线通信收发机等。通信单元509允许设备500通过诸如因特网的计算机网络和/或各种电信网络与其他设备交换信息/数据。处理单元501执行上文所描述的各个方法和处理，例如方法100。例如，在一些实施例中，方法100可被实现为计算机软件程序，其被有形地包含于机器可读介质，例如存储单元508。在一些实施例中，计算机程序的部分或者全部可以经由ROM 502和/或通信单元509而被载入和/或安装到设备500上。当计算机程序加载到RAM 503并由CPU 501执行时，可以执行上文描述的方法100的一个或多个步骤。备选地，在其他实施例中，CPU501可以通过其他任何适当的方式而被配置为执行方法100。本文中以上描述的功能可以至少部分地由一个或多个硬件逻辑部件来执行。例如，非限制性地，可以使用的示范类型的硬件逻辑部件包括：场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、负载可编程逻辑设备等等。用于实施本公开的方法的程序代码可以采用一个或多个编程语言的任何组合来编写。这些程序代码可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器或控制器，使得程序代码当由处理器或控制器执行时使流程图和/或框图中所规定的功能/操作被实施。程序代码可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本公开的上下文中，机器可读介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的程序。机器可读介质可以是机器可读信号介质或机器可读储存介质。机器可读介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。此外，虽然采用特定次序描绘了各操作，但是这应当理解为要求这样操作以所示出的特定次序或以顺序次序执行，或者要求所有图示的操作应被执行以取得期望的结果。在一定环境下，多任务和并行处理可能是有利的。同样地，虽然在上面论述中包含了若干具体实现细节，但是这些不应当被解释为对本公开的范围的限制。在单独的实施例的上下文中描述的某些特征还可以组合地实现在单个实现中。相反地，在单个实现的上下文中描述的各种特征也可以单独地或以任何合适的子组合的方式实现在多个实现中。尽管已经采用特定于结构特征和/或方法逻辑动作的语言描述了本主题，但是应当理解所附权利要求书中所限定的主题未必局限于上面描述的特定特征或动作。相反，上面所描述的特定特征和动作仅仅是实现权利要求书的示例形式。
