标题title
基于视觉的测量机器人精确测量方法
摘要abst
本发明涉及测量机器人视觉测量领域，具体涉及基于视觉的测量机器人精确测量方法，包括：获取待测目标的RGB图像；构建损失函数；根据损失函数得到高质量亮度通道图像；根据高质量亮度通道金字塔图像序列和色调通道金字塔优化图像序列结合引导滤波算法得到各层高质量色调通道金字塔图像；获取高质量色调通道图像以及高质量饱和度通道图像；最终提取高质量待测目标RGB图像；根据高质量待测目标RGB图像对待测目标信息进行测量，得到待测目标的测量信息。本发明旨在通过测量机器人所采集的视觉信息，实现对待测目标信息的精确。
权利要求书clms
1.基于视觉的测量机器人精确测量方法，其特征在于，该方法包括以下步骤：根据测量机器人自带相机镜头对待测目标进行图像采集，得到待测目标RGB图像；根据图像颜色空间转换获取待测目标HSV图像，得到色调通道图像、饱和度通道图像以及亮度通道图像；获取亮度通道图像模型；根据亮度通道图像中像素点邻域内的最大亮度值和最小亮度值差异得到分布损失函数；获取待测目标的模糊图像，根据模糊图像对应的亮度通道图像中像素点的亮度值得到模糊分量图像高斯混合模型；根据模糊分量高斯混合模型得到模糊限定函数；根据亮度通道图像模型、分布损失函数以及模糊限定函数，得到高质量亮度通道图像提取的损失函数；根据损失函数得到高质量亮度通道图像；根据图像金字塔算法得到高质量亮度通道图像的各层高质量亮度通道金字塔图像；根据各层高质量亮度通道金字塔图像的分辨率得到高质量亮度通道金字塔图像序列；根据图像金字塔算法得到色调通道图像的各层色调通道金字塔图像；根据各层色调通道金字塔图像的分辨率得到色调通道金字塔图像序列；获取色调通道金字塔优化图像序列；根据高质量亮度通道金字塔图像序列和色调通道金字塔优化图像序列结合引导滤波算法得到各层色调通道金字塔图像对应的各层高质量色调通道金字塔图像；根据各层高质量色调通道金字塔图像得到高质量色调通道图像；获取高质量饱和度通道图像；根据高质量色调通道图像、高质量饱和度通道图像以及高质量亮度通道图像得到高质量待测目标RGB图像；根据高质量待测目标RGB图像对待测目标信息进行测量，得到待测目标的测量信息。2.根据权利要求1所述的基于视觉的测量机器人精确测量方法，其特征在于，所述获取亮度通道图像模型的表达式为：式中，为亮度通道图像；/＞为高质量亮度通道图像；也即待测目标亮度通道中的内容分量图像；/＞为待测目标亮度通道中的模糊分量图像；/＞为相机噪声。3.根据权利要求1所述的基于视觉的测量机器人精确测量方法，其特征在于，所述根据亮度通道图像中像素点邻域内的最大亮度值和最小亮度值差异得到分布损失函数的表达式为：式中，为分布损失函数；q为亮度通道图像中的像素点q；/＞为像素点q局部邻域范围内的第c个像素点的亮度值；/＞为像素点q局部邻域范围内的像素点总数；max为取最大值操作；min为取最小值操作；∑为求和操作。4.根据权利要求1所述的基于视觉的测量机器人精确测量方法，其特征在于，所述根据模糊分量高斯混合模型得到模糊限定函数的获取表达式为：/＞式中，为模糊限定函数；/＞为亮度通道图像中像素点q对应的模糊分量高斯混合模型值；/＞为以10为底数的对数函数；∑为求和操作。5.根据权利要求1所述的基于视觉的测量机器人精确测量方法，其特征在于，所述高质量亮度通道图像提取的损失函数的获取表达式为：式中，为亮度通道图像；/＞为高质量亮度通道图像；也即待测目标亮度通道中的内容分量图像；/＞为待测目标亮度通道中的模糊分量图像；min为取最小值操作；max为取最大值操作；/＞为L2范数；/＞为像素点q局部邻域范围内的第c个像素点的亮度值；/＞为像素点q局部邻域范围内的像素点总数；/＞为亮度通道图像中像素点q对应的模糊分量高斯混合模型值；/＞为以10为底数的对数函数；∑为求和操作。6.根据权利要求1所述的基于视觉的测量机器人精确测量方法，其特征在于，所述根据高质量亮度通道金字塔图像序列和色调通道金字塔优化图像序列结合引导滤波算法得到各层色调通道金字塔图像对应的各层高质量色调通道金字塔图像的获取方法包括：式中，为第i层高质量色调通道金字塔图像；/＞为第i层高质量亮度通道金字塔图像；为第i层色调通道金字塔优化图像；/＞为金字塔层数；/＞代表引导滤波操作。7.根据权利要求1所述的基于视觉的测量机器人精确测量方法，其特征在于，所述获取色调通道金字塔优化图像序列的方法包括：通过各层高质量色调通道金字塔图像以及各层色调通道金字塔图像，得到各层色调通道金字塔优化图像，根据各层色调通道金字塔优化图像的分辨率得到色调通道金字塔优化图像序列；各层色调通道金字塔优化图像表达式为：式中，为第一层色调通道金字塔优化图像，/＞为第一层色调通道金字塔图像，/＞为第i层色调通道金字塔优化图像；/＞为图像融合操作；/＞为第i层高质量色调通道金字塔图像；/＞为金字塔层数。8.根据权利要求1所述的基于视觉的测量机器人精确测量方法，其特征在于，所述根据各层高质量色调通道金字塔图像得到高质量色调通道图像的方法包括：根据各层高质量色调通道金字塔图像的分辨率，将与色调通道图像分辨率相同的高质量色调通道金字塔图像作为高质量色调通道图像。
说明书desc
技术领域本发明涉及测量机器人视觉测量领域，具体涉及基于视觉的测量机器人精确测量方法。背景技术测量机器人是一种能够代替人工进行自动搜索、跟踪和精确照准目标并获取角度、距离、三维坐标以及影像等信息的智能型电子全站仪器，是现在多项高技术集成应用于测量仪器制造领域的最杰出的代表，测量机器人通过CCD影像传感器和其他传感器对显示测量世界中的目标进行识别，迅速作出分析、判断与推理，实现自我控制，并自动完成照准、读数等操作，以实现代替人工手动操作过程；同时，测量机器人再与能够制定测量计划、控制测量过程、进行测量数据处理以及分析的软件系统结合，最终实现代替人工进行许多测量任务。测量机器人在进行测量任务过程中，大多直接通过测量机器人采集的目标物体的图像数据对其进行分析，但是受各种因素的影响，测量机器人对目标进行图像采集时，外界环境因素以及测量机器人自身因素都会对所采集的目标图像质量造成影响，进而导致对目标识别以及照准精度不高，测量数据提取精度不够，最终影响测量机器人的测量准确性。发明内容本发明提供基于视觉的测量机器人精确测量方法，以解决现有的问题。本发明的基于视觉的测量机器人精确测量方法采用如下技术方案：本发明一个实施例提供了基于视觉的测量机器人精确测量方法，该方法包括以下步骤：根据测量机器人自带相机镜头对待测目标进行图像采集，得到待测目标RGB图像；根据图像颜色空间转换获取待测目标HSV图像，得到色调通道图像、饱和度通道图像以及亮度通道图像；获取亮度通道图像模型；根据亮度通道图像中像素点的最大亮度值和最小亮度值差异得到分布损失函数；获取待测目标的模糊图像，根据模糊图像对应的亮度通道图像中像素点的亮度值得到模糊分量图像高斯混合模型；根据模糊分量高斯混合模型得到模糊限定函数；根据亮度通道图像模型、分布损失以及模糊限定函数，得到高质量亮度通道图像提取的损失函数；根据损失函数得到高质量亮度通道图像；根据图像金字塔算法得到高质量亮度通道图像的各层高质量亮度通道金字塔图像；根据各层高质量亮度通道金字塔图像的分辨率得到高质量亮度通道金字塔图像序列；根据图像金字塔算法得到色调通道图像的各层色调通道金字塔图像；根据各层色调通道金字塔图像的分辨率得到色调通道金字塔图像序列；获取色调通道金字塔优化图像序列；根据高质量亮度通道金字塔图像序列和色调通道金字塔优化图像序列结合引导滤波算法得到各层色调通道金字塔图像对应的各层高质量色调通道金字塔图像；根据各层高质量色调通道金字塔图像得到高质量色调通道图像；获取高质量饱和度通道图像；根据高质量色调通道图像、高质量饱和度通道图像以及高质量亮度通道图像得到高质量待测目标RGB图像；根据高质量待测目标RGB图像对待测目标信息进行测量，得到待测目标的测量信息。优选的，所述获取亮度通道图像模型的表达式为：式中，为亮度通道图像；为高质量亮度通道图像；也即待测目标亮度通道中的内容分量图像；为待测目标亮度通道中的模糊分量图像；为相机噪声。进一步，所述根据亮度通道图像中像素点邻域内的最大亮度值和最小亮度值差异得到分布损失函数的表达式为：式中，q为亮度通道图像中的像素点q；为像素点q局部邻域范围内的第c个像素点的亮度值；为像素点q局部邻域范围内的像素点总数；max为取最大值操作；min为取最小值操作；∑为求和操作。进一步，所述根据模糊分量高斯混合模型得到模糊限定函数的获取表达式为：式中，为亮度通道图像中像素点q对应的模糊分量高斯混合模型值；为以10为底数的对数函数；∑为求和操作。进一步，所述高质量亮度通道图像提取的损失函数的获取表达式为：式中，为亮度通道图像；为高质量亮度通道图像；也即待测目标亮度通道中的内容分量图像；为待测目标亮度通道中的模糊分量图像；min为取最小值操作；max为取最大值操作；为L2范数；为像素点q局部邻域范围内的第c个像素点的亮度值；为像素点q局部邻域范围内的像素点总数；为亮度通道图像中像素点q对应的模糊分量高斯混合模型值；为以10为底数的对数函数；∑为求和操作。进一步，所述根据高质量亮度通道金字塔图像序列和色调通道金字塔优化图像序列结合引导滤波算法得到各层色调通道金字塔图像对应的各层高质量色调通道金字塔图像的获取方法包括：式中，为第i层高质量色调通道金字塔图像；为第i层高质量亮度通道金字塔图像；为第i层色调通道金字塔优化图像；为金字塔层数；代表引导滤波操作。进一步，所述获取色调通道金字塔优化图像序列的方法包括：通过各层高质量色调通道金字塔图像以及各层色调通道金字塔图像，得到各层色调通道金字塔优化图像，根据各层色调通道金字塔优化图像的分辨率得到色调通道金字塔优化图像序列；各层色调通道金字塔优化图像表达式为：式中，为第一层色调通道金字塔优化图像，为第一层色调通道金字塔图像，为第i层色调通道金字塔优化图像；为图像融合操作；为第i层高质量色调通道金字塔图像；为金字塔层数。优选的，所述根据各层高质量色调通道金字塔图像得到高质量色调通道图像的方法包括：根据各层高质量色调通道金字塔图像的分辨率，将与色调通道图像分辨率相同的高质量色调通道金字塔图像作为高质量色调通道图像。本发明具有如下有益效果：本发明通过对测量机器人所采集的待测目标图像的处理分析，提高了基于视觉的测量机器人的测量精度。本发明通过对测量机器人图像采集过程中相机镜头的振动、抖动等原因的分析，结合所构建的损失函数对高质量亮度通道图像进行提取，提高了高质量亮度通道图像的提取精度，避免亮度通道图像中的模糊问题，同时结合图像金字塔算法对色调以及饱和度通道图像进行采样分析，可结合不同分辨率下的各层金字塔图像分别进行滤波操作，解决了引导滤波同一尺度下滤波精度低的问题，可实现准确获取高质量色调通道图像以及高质量饱和度通道图像，进一步解决了图像采集过程中测量机器人相机镜头抖动以及外界因素等导致图像模糊质量低的问题，进而提高了基于视觉特征测量机器人对待测目标信息的测量精度。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明的基于视觉的测量机器人精确测量方法的步骤流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的基于视觉的测量机器人精确测量方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的基于视觉的测量机器人精确测量方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的基于视觉的测量机器人精确测量方法的步骤流程图，该方法包括以下步骤：步骤S001：通过测量机器人上的工业相机对待测目标进行图像采集，获取待测目标RGB图像。首先，在测量机器人上安装工业相机，相机位置的部署以及镜头拍摄范围视角等问题实施者可自行设置。工业相机型号以及镜头分辨率的选取实施者自行设定。通过测量机器人上的工业相机对待测目标进行图像采集，获取待测目标RGB图像，以便测量机器人基于待测目标的视觉信息对其进行精确测量。考虑到多通道图像进行处理分析时将存在尺度不同维度不同处理效果不佳的问题，本实施例将待测目标RGB图像转换到符合人眼视觉特征的HSV颜色空间，获取待测目标HSV图像，得到H通道图像、S通道图像以及V通道图像，以便对待测目标的各通道图像进行处理分析。需要说明的是，RGB图像转换到HSV颜色空间得到HSV图像的过程为现有公知技术，H通道图像也即色调通道图像，S通道图像也即饱和度通道图像，V通道图像也即亮度通道图像。步骤S002：将对待测目标RGB图像进行处理分析，以获取高质量待测目标RGB图像。获取待测目标HSV图像后，考虑到在进行图像采集过程中，将会存在外界环境因素的影响，导致图像质量下降，同时，测量机器人的工业相机在进行图像采集过程中，由于测量机器人自身以及环境风力等作用，测量机器人的工业相机镜头很难做到完全静止状态，因此，工业相机在图像采集过程中将会产生模糊效果，导致所采集的图像出现线性模糊等图像质量问题。针对上述问题，本实施例将对待测目标的HSV图像进行处理分析，以提高图像质量，避免相机抖动以及外界环境因素等对待测目标图像中所包含的信息可靠度的影响。亮度通道图像主要体现亮度通道图像中像素点的亮度信息，用于表征像素点的灰度变化情况，相机抖动以及外界环境因素对待测目标RGB图像中像素点的灰度值影响较高，进而对亮度通道图像中像素点的亮度值影响较大，因此，本实施例将首先对亮度通道图像进行分析，以提取高质量亮度通道图像。需要说明的是，亮度通道图像中，将每个像素点在亮度通道上的灰度值作为每个像素点的亮度值。首先，构建亮度通道图像模型：式中，为亮度通道图像；为高质量亮度通道图像；也即待测目标亮度通道中的内容分量图像；为待测目标亮度通道中的模糊分量图像；为相机噪声。本实施例将从亮度通道图像中分离处高质量亮度通道图像，提高亮度通道图像质量。为实现准确提取高质量亮度通道图像，本实施例将构建损失函数对高质量亮度通道图像进行准确提取。本实施例考虑到当相机抖动时将导致所采集的待测目标RGB图像出现模糊现象，进而使得亮度通道图像中待测目标的边缘轮廓不明显，层次感不强，灰度变化不明显。因此，本实施例根据亮度通道图像中像素点的亮度分布层次特征，也即根据亮度通道图像中像素点邻域内的最大亮度值和最小亮度值的差异建立分布损失函数，分布损失函数的表达式为：式中，q为亮度通道图像中的像素点q；为像素点q局部邻域范围内的第c个像素点的亮度值；为像素点q局部邻域范围内的像素点总数；max为取最大值操作；min为取最小值操作；∑为求和操作。需要说明的是，像素点q局部邻域范围实施者可自行设定，本实施例将其设置为以像素点q为中心的的窗口范围。然后，为保证分离之后的高质量亮度通道图像中的模糊分量达到最小，本实施例将建立模糊限定函数对所提取的高质量亮度通道图像中的模糊分量进行控制。先通过人为设定采集大量的待测目标模糊图像，需要说明的是，待测目标模糊图像的采集视角与待测目标RGB图像的采集视角一致，待测目标模糊图像的采集可以通过人为抖动测量机器人的工业相机镜头或者通过其他手段使得测量机器人的工业相机镜头保持振动状态，对待测目标进行图像采集，得到的图像记为待测目标模糊图像。根据待测目标模糊图像对应的亮度通道图像中像素点的亮度值，拟合模糊分量图像高斯混合模型，模糊分量图像高斯混合模型记为。需要说明的是高斯混合模型的构建以及拟合过程为现有公知技术，不在本实施例保护范围内，不做相关详细描述。根据模糊分量高斯混合模型得到模糊限定函数，模糊限定函数的表达式为：式中，为亮度通道图像中像素点q对应的模糊分量高斯混合模型值；为以10为底数的对数函数；∑为求和操作。最后，为保证图像分离精度，实现对高质量亮度通道图像的准确提取，本实施例将构建高质量亮度通道图像提取的损失函数，损失函数的表达式具体为：式中，为亮度通道图像；为高质量亮度通道图像；也即待测目标亮度通道中的内容分量图像；为待测目标亮度通道中的模糊分量图像；min为取最小值操作；max为取最大值操作；为L2范数；为像素点q局部邻域范围内的第c个像素点的亮度值；为像素点q局部邻域范围内的像素点总数；为亮度通道图像中像素点q对应的模糊分量高斯混合模型值；为以10为底数的对数函数；∑为求和操作。上述损失函数通过引入分布损失函数主要为了保证所提取的高质量亮度通道图像中包含足够的内容分量信息，最小化分布损失函数以使高质量亮度通道图像中的边缘信息更加明显，轮廓分明；同时通过模糊限定函数对高质量亮度通道图像中的模糊分量进行控制，最小化模糊限定函数，可降低高质量亮度通道图像中的模糊效果；最小化的目的是为了保证图像的分离精度，对高质量亮度通道图像进行保真。通过优化算法迭代计算损失函数，设置迭代次数阈值，当迭代次数达到迭代次数阈值时最终对应的即为分离得到的高质量亮度通道图像。需要说明的是，迭代次数阈值实施者可自行设定，本实施例将其设置为20。通过优化算法对损失函数进行优化的过程为现有公知技术。至此，即可得到高质量亮度通道图像。本实施例考虑到色调以及饱和度通道图像受模糊效果的影响较小，影响不明显，通过上述分离提取过程将无法准确得到高质量色调通道图像以及高质量饱和度通道图像，因此，本实施例基于高质量亮度通道图像对色调通道图像以及饱和度通道图像进行滤波处理，以便准确提取高质量色调通道图像以及高质量饱和度通道图像。本实施例以高质量色调通道图像提取为例进行详细说明：首先，本实施例中采用引导滤波算法将高质量亮度通道图像作为导向图像，以提取高质量色调通道图像。引导滤波既能保证色调通道图像以及饱和度通道图像中的边缘细节信息，同时能够准确提取色调通道图像中的内容分量信息。但是，本实施例考虑到传统引导滤波对于窗口的大小设定过于随机，将影响滤波效果，因此，本实施例将通过对色调通道图像以及高质量亮度通道图像进行采样处理，以实现多尺度的引导滤波过程。本实施例先通过图像金字塔算法对色调通道图像进行采样处理，以得到不同分辨率下的色调通道金字塔图像，然后按照分辨率从小到大的顺序将各个色调通道金字塔图像进行排列得到色调通道金字塔图像序列，金字塔层数实施者可自行设定，本实施例设置为N=5，N为金字塔层数。需要说明的是，本实施例采用的图像金字塔算法为高斯金字塔算法，通过高斯金字塔算法对色调通道图像进行下采样处理，得到不同分辨率的色调通道金字塔图像，高斯金字塔算法以及对图像下采样处理的过程为现有公知技术，本实施例不做相关具体阐述。重复上述方法，通过图像金字塔算法对高质量亮度通道图像进行采样处理，得到高质量亮度通道金字塔图像序列。然后，本实施例将基于高质量亮度通道金字塔图像序列以及色调金字塔图像序列，通过引导滤波算法得到各层高质量色调通道金字塔图像，传统引导滤波算法对于图像进行滤波时，窗口尺寸难以确定，过于随机，而本实施例通过引导滤波算法对不同分辨率的各层色调通道金字塔图像，可自适应的得到各层色调通道金字塔图像所对应的高质量色调通道金字塔图像，提高滤波精度，准确提取各层色调通道金字塔图像中的内容分量信息，进而提高高质量色调通道图像的提取精度。各层高质量色调通道金字塔图像的获取表达式可以表示为：式中，为第i层高质量色调通道金字塔图像；为第i层高质量亮度通道金字塔图像；为第i层色调通道金字塔优化图像；为金字塔层数；代表引导滤波操作。为提高各层高质量色调金字塔图像的提取精度，本实施例将对各层色调通道金字塔优化图像进行引导滤波处理，对于上述第i层色调通道金字塔优化图像，本实施例获取各层色调通道金字塔优化图像，各层色调通道金字塔优化图像表达式为：式中，为第一层色调通道金字塔优化图像，为第一层色调通道金字塔图像，为第i层色调通道金字塔优化图像；为图像融合操作；为第i层高质量色调通道金字塔图像；为金字塔层数。需要说明的是，为：第i层高质量色调通道金字塔图像和第i层色调通道金字塔图像的融合操作，也即不同分辨率下的金字塔图像之间的融合操作，融合操作为现有公知技术。至此，得到各层高质量色调通道金字塔图像。最后，根据各层高质量色调通道金字塔图像的分辨率得到高质量色调通道图像，将与色调通道图像分辨率相同的高质量色调通道金字塔图像作为高质量色调通道图像。至此，可获取高质量色调通道图像。重复上述方法，获取高质量饱和度通道图像；根据高质量色调通道图像、高质量饱和度通道图像以及高质量亮度通道图像，获取高质量待测目标HSV图像，通过颜色空间转换将高质量待测目标HSV图像转换成高质量待测目标RGB图像。需要说明的是，高质量待测目标HSV图像转换成高质量待测目标RGB图像的过程为现有公知技术。至此，即可得到高质量待测目标RGB图像。步骤S003：根据高质量待测目标RGB图像，对待测目标的测量数据进行提取，实现高精度测量。根据高质量待测目标RGB图像对待测目标信息进行测量，得到待测目标的测量数据。需要说明的是，待测目标的测量数据可以包括但不限于：待测目标各个边缘的位置信息，边缘弯曲程度以及距离等测量数据。测量机器人基于视觉根据高质量待测目标RGB图像提取待测目标的测量数据以及实现测量的过程为现有公知技术。本实施例主要对基于视觉的测量机器人测量过程中待测目标的图像进行处理分析，通过获取高质量待测目标的RGB图像，以提高基于视觉的测量机器人对待测目标测量数据的测量精度。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。且上述对本说明书特定实施例进行了描述。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同或相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述实施例仅用以说明本申请的技术方案，而非对其限制；对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的范围，均应包含在本申请的保护范围之内。
