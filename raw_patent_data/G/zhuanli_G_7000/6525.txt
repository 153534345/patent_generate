标题title
一种基于二维栅格的时空大数据时段信息建模、存储及检索方法
摘要abst
本发明公开一种基于二维栅格的时空大数据时段信息建模、存储及检索方法，该建模方法包括：通过二维栅格的位置信息来描述时空对象的生命周期；采用二维栅格的位置信息来描述时空对象的时态拓扑关系；基于二维栅格的位置信息构建时空对象的时间运算模型；构建关系表来存储时空对象。本发明采用二维栅格进行时空大数据的时段信息建模，以栅格单元的行列值记录时段终止时间与开始时间，采用整型数据类型存储时间信息并进行时间运算，基于二维栅格定义了十三种时段拓扑关系及两类时段运算的空间语义，能够突破时段信息的一维建模范式，降低时段信息存储与计算复杂度，并提升时空大数据的数据检索效率。
权利要求书clms
1.一种基于二维栅格的时空大数据时段信息建模方法，其特征在于，包括：通过二维栅格的位置信息来描述时空对象的生命周期；采用二维栅格的位置信息来描述时空对象的时态拓扑关系；基于二维栅格的位置信息构建时空对象的时间运算模型；构建关系表来存储时空对象。2.根据权利要求1所述的一种基于二维栅格的时空大数据时段信息建模方法，其特征在于，所述二维栅格是一个N阶下三角矩阵，其中行i和列j分别代表结束时间和开始时间，采用下式计算N、i、j参数：其中Te为所有时空对象的最晚结束时间；Ts为所有时空对象的最早开始时间；和分别为第k个时空对象生命周期的开始时间和结束时间，且ct是时间分辨率。3.根据权利要求1所述的一种基于二维栅格的时空大数据时段信息建模方法，其特征在于，所述时态拓扑关系包括：A Before B：iA＜jB；A After B：jA＞iB；A Meets B：jA＜jB and iA＝jB-1；A Met-by B：jA＞jB and jA＝iB-1；A Overlaps B：jA＜jB and jB≤iA＜iB；A Overlapped-by B：jA＞jB and jA≤iB＜iA；A During B：jB＜jA＜iA＜iB；A Contains B：jA＜jB＜iB＜iA；A Starts B：jB＝jA＜iA＜iB；A Started-by B：jA＝jB＜iB＜iA；A Finishes B：jB＜jA＜iA＝iB；A Finished-by B：jA＜jB＜iB＝iA；A Equal B：jA＝jB and iA＝iB；其中A、B表示两个时空对象；A、B在二维栅格中的位置分别为CA、CB，jA、iA分别为二维栅格中单元格CA的列、行，jB、iB分别为二维栅格中单元格CB的列、行；A、B的开始时间分别为结束时间分别为4.根据权利要求3所述的一种基于二维栅格的时空大数据时段信息建模方法，其特征在于，所述时间运算包括一元时间运算和二元时间运算。5.根据权利要求4所述的一种基于二维栅格的时空大数据时段信息建模方法，其特征在于，所述一元时间运算是仅涉及一个时空对象的运算，所述一元时间运算包括：begin与end运算，pre与post运算，expand与collapse运算；begin＝jA，end＝iA；beginpre＝，beginpost＝；endpre＝，endpost＝；expand＝,jA＞n；collapse＝,iA＞n；begin、end分别表示计算二维栅格中单元格CA的列jA与行iA；beginpre表示计算CA开始时间的前一时段信息；beginpost表示计算CA开始时间的后一时段信息；endpre表示计算CA结束时间的前一时段信息；endpost表示计算CA结束时间的后一时段信息；expand表示在CA的列jA及行iA两侧分别扩展时长n；collapse表示在CA的列jA及行iA两侧分别收缩时长n。6.根据权利要求4所述的一种基于二维栅格的时空大数据时段信息建模方法，其特征在于，所述二元时间运算是涉及两个时空对象的运算，所述二元时间运算包括：时间集合运算与时间距离运算；所述时间集合运算包括：其中C1、C2均为二维栅格中的单元格，且C1的列、行分别为j、i，C2的列、行分别为m、n；C1∪C2表示同时包含两个时段的时间间隔，描述从两个实体的最早开始时间到最晚结束时间的部分；C1∩C2表示两个时段的重叠部分；C1-C2表示属于C1但不属于C2或属于C2但不属于C1的部分；所述时间距离运算包括：dss＝|m-j|*ct；dee＝|n-i|*ct；dse＝-min)*ct；其中dss表示起始时间距离，描述了C1与C2起始时间的间隔；dee表示终止时间距离，描述了C1与C2终止时间的间隔；dse表示经历时间距离，描述了从C1起始时间到C2终止时间之间的历时间隔；des表示延迟时间距离，描述了从C1终止到C2起始时间之间的历时间隔；ct是时间分辨率。7.根据权利要求1所述的一种基于二维栅格的时空大数据时段信息建模方法，其特征在于，所述关系表包括：时空对象表，时段信息表及时段元数据表；所述时空对象表用于存储时空对象的标识码、空间位置GEO及专题属性信息；所述时空对象的标识码包括时空对象标识码ID、时空对象所属图层标识码LID；所述时段信息表用来存储时空对象的生命周期信息；所述生命周期信息包括时空对象标识码ID、表达时空对象时段信息的单元格行号ROW及列号COL；所述时段元数据表用于存储时间二维栅格的元数据信息；所述元数据信息包括时空对象所属图层标识码LID、时空对象开始时间TSTART、时空对象结束时间TEND及时间分辨率TRESO。8.一种基于二维栅格的时空大数据时段信息存储方法，其特征在于，包括：基于权利要求1-7任一所述一种基于二维栅格的时空大数据时段信息建模方法构建的关系表存储时空对象。9.一种基于二维栅格的时空大数据检索方法，其特征在于，包括：根据所述一种基于二维栅格的时空大数据时段信息存储方法存储的时空对象进行数据检索。
说明书desc
技术领域本发明属于时空大数据与地理信息技术领域，尤其涉及一种基于二维栅格的时空大数据时段信息建模、存储及检索方法，可用于时空大数据建模与数据检索、可视化。背景技术近年来，随着大数据技术的快速发展，从各种遥感、现场观测、移动轨迹、社会感知或仿真模拟中可以获得大量的时空大数据，它是兼具时间与空间维度的大数据，能够有效挖掘和反演时空相关的社会、自然与经济活动规律，已被广泛应用于智慧城市、人类动态、智能交通、城市计算、污染治理、防灾减灾及传染病防治等多个领域。继承自传统GIS，四维世界的时空大数据采用了空间三维、时间一维的建模范式，当前定义了大量针对空间位置信息的矢量或栅格建模与表达方法，但时间信息建模仍然以一维线性时间建模为主，即从过去某一时点到未来相应时点的一维时间轴，这给高效的时空查询和海量数据访问带来了新的挑战。如何对时空对象的开始与结束时间的时段信息进行二维空间表达与建模，成为时空大数据领域时段信息建模的基础性问题。从时段信息建模与表达来看，当前主要采用一维时间轴的方式，通过记录时段信息在时间轴线上的起始时间与结束时间，在数据检索时通过时间信息的算术比较进行数据查询，在进行可视化时采用一维时间轴线上的标记点进行可视化。目前时段信息建模，主要采用一维时间轴的方式，建模方式单一，没有利用二维空间进行时段信息建模与表达；目前时段信息建模，通过记录时段的起始时间与终止时间，需要定义专门的时间数据类型，且运算复杂度高于整型等简单数据类型；目前时段信息建模，时段拓扑关系主要基于一维时间轴定义，在二维空间的时段拓扑关系没有相应定义。发明内容本发明针对目前时段信息建模，主要采用一维时间轴的方式，建模方式单一，没有利用二维空间进行时段信息建模与表达；目前时段信息建模，通过记录时段的起始时间与终止时间，需要定义专门的时间数据类型，且运算复杂度高于整型等简单数据类型；目前时段信息建模，时段拓扑关系主要基于一维时间轴定义，在二维空间的时段拓扑关系没有相应定义的问题，提出一种基于二维栅格的时空大数据时段信息建模、存储及检索方法。为了实现上述目的，本发明采用以下技术方案：本发明一方面提出一种基于二维栅格的时空大数据时段信息建模方法，包括：通过二维栅格的位置信息来描述时空对象的生命周期；采用二维栅格的位置信息来描述时空对象的时态拓扑关系；基于二维栅格的位置信息构建时空对象的时间运算模型；构建关系表来存储时空对象。进一步地，所述二维栅格是一个N阶下三角矩阵，其中行i和列j分别代表结束时间和开始时间，采用下式计算N、i、j参数：其中Te为所有时空对象的最晚结束时间；Ts为所有时空对象的最早开始时间；和分别为第k个时空对象生命周期的开始时间和结束时间，且ct是时间分辨率。进一步地，所述时态拓扑关系包括：A Before B：iA＜jB；A After B：jA＞iB；A Meets B：jA＜jBand iA＝jB-1；A Met-by B：jA＞jBand jA＝jB-1；A Overlaps B：jA＜jBand jB≤iA＜iB；A Overlapped-by B：jA＞jBand jA≤iB＜iA；A During B：jB＜jA＜iA＜iB；A Contains B：jA＜jB＜iB＜iA；A Starts B：jB＝jA＜iA＜iB；A Started-by B：jA＝jB＜iB＜iA；A Finishes B：jB＜jA＜iA＝iB；A Finished-by B：jA＜jB＜iB＝iA；A Equal B：jA＝jBand iA＝iB；其中A、B表示两个时空对象；A、B在二维栅格中的位置分别为CA、CB，jA、iA分别为二维栅格中单元格CA的列、行，jB、iB分别为二维栅格中单元格CB的列、行；A、B的开始时间分别为结束时间分别为进一步地，所述时间运算包括一元时间运算和二元时间运算。进一步地，所述一元时间运算是仅涉及一个时空对象的运算，所述一元时间运算包括：begin与end运算，pre与post运算，expand与collapse运算；begin＝jA，end＝iA；beginpre＝，beginpost＝；endpre＝，endpost＝；expand＝,jA＞n；collapse＝,iA＞n；begin、end分别表示计算二维栅格中单元格CA的列jA与行iA；beginpre表示计算CA开始时间的前一时段信息；beginpost表示计算CA开始时间的后一时段信息；endpre表示计算CA结束时间的前一时段信息；endpost表示计算CA结束时间的后一时段信息；expand表示在CA的列jA及行iA两侧分别扩展时长n；collapse表示在CA的列jA及行iA两侧分别收缩时长n。进一步地，所述二元时间运算是涉及两个时空对象的运算，所述二元时间运算包括：时间集合运算与时间距离运算；所述时间集合运算包括：其中C1、C2均为二维栅格中的单元格，且C1的列、行分别为j、i，C2的列、行分别为m、n；C1∪C2表示同时包含两个时段的时间间隔，描述从两个实体的最早开始时间到最晚结束时间的部分；C1∩C2表示两个时段的重叠部分；C1-C2表示属于C1但不属于C2或属于C2但不属于C1的部分；所述时间距离运算包括：dss＝|m-j|*ct；dee＝|n-i|*ct；dse＝-min)*ct；其中dss表示起始时间距离，描述了C1与C2起始时间的间隔；dee表示终止时间距离，描述了C1与C2终止时间的间隔；dse表示经历时间距离，描述了从C1起始时间到C2终止时间之间的历时间隔；des表示延迟时间距离，描述了从C1终止到C2起始时间之间的历时间隔；ct是时间分辨率。进一步地，所述关系表包括：时空对象表，时段信息表及时段元数据表；所述时空对象表用于存储时空对象的标识码、空间位置GEO及专题属性信息；所述时空对象的标识码包括时空对象标识码ID、时空对象所属图层标识码LID；所述时段信息表用来存储时空对象的生命周期信息；所述生命周期信息包括时空对象标识码ID、表达时空对象时段信息的单元格行号ROW及列号COL；所述时段元数据表用于存储时间二维栅格的元数据信息；所述元数据信息包括时空对象所属图层标识码LID、时空对象开始时间TSTART、时空对象结束时间TEND及时间分辨率TRESO。本发明第二方面提出一种基于二维栅格的时空大数据时段信息存储方法，包括：基于上述任一所述一种基于二维栅格的时空大数据时段信息建模方法构建的关系表存储时空对象。本发明第三方面提出一种基于二维栅格的时空大数据检索方法，包括：根据所述一种基于二维栅格的时空大数据时段信息存储方法存储的时空对象进行数据检索。与现有技术相比，本发明具有的有益效果：本发明采用二维栅格进行时空大数据的时段信息建模，以栅格单元的行列值记录时段终止时间与开始时间，采用整型数据类型存储时间信息并进行时间运算，基于二维栅格定义了十三种时段拓扑关系及两类时段运算的空间语义，能够突破时段信息的一维建模范式，降低时段信息存储与计算复杂度，并提升时空大数据的数据检索效率。附图说明图1为本发明实施例一种基于二维栅格的时空大数据时段信息建模方法的基本流程图；图2为时空大数据时段信息表达的二维栅格模型示意图；图3为基于二维栅格的时态拓扑关系表达示意图；图4为基于二维栅格的一元时间运算示意图；图5为基于二维栅格的时间集合运算示例；图6为基于二维栅格的时段建模数据结构定义示意图；图7为基于二维栅格的视频大数据检索效率测试结果示意图。具体实施方式下面结合附图和具体的实施例对本发明做进一步的解释说明：如图1所示，一种基于二维栅格的时空大数据时段信息建模方法，包括：1.通过二维栅格的位置信息来描述时空对象的生命周期。具体地，从一维角度来看，一个时空对象的生命周期反映为时间轴上的一个区间。它可以表示为，其中ts和te分别为开始时间和结束时间。假设有多个时空对象，每个对象都有其生命周期的时段信息。第k个时空对象生命周期的开始时间和结束时间分别为和且Ts被定义为所有时空对象的最早开始时间，Te被定义为所有时空对象的最晚结束时间，ct是时间分辨率，可以用小时、分钟、秒或其他不同的时段长度来衡量。本发明定义了一个二维栅格来描述时间间隔信息。进一步地，所述二维栅格是一个N阶下三角矩阵，其中行i和列j分别代表结束时间和开始时间，采用下式计算N、i、j参数：如图2所示，该二维格网以小时为时间分辨率，表示某1天内相应时空对象的生命周期信息，时空对象1的二维格网坐标为，位于二维格网的第16行第8列，表明实体1的生命周期开始于8时，结束于16时，从而实现基于二维格网描述时空对象的时段信息。根据Ts、ct等参数，根据式可将相应的格网坐标转换为实际时间。2.采用二维栅格的位置信息来描述时空对象的时态拓扑关系。具体地，在一维时间轴线上，不同时空对象根据其生命周期信息，存在有多种时态拓扑关系。在二维栅格中，相应的时段信息具备了位置信息，可采用类似于栅格数据的位置信息来描述时态拓扑关系，并具备对应的空间语义。在一维时间轴上，时态拓扑关系共包括13种类型。在二维栅格中，定义两个时空对象A、B，在二维网格中的位置分别为CA以及CB，其开始时间分别为结束时间分别为13种时态拓扑关系见表1，除Equal外，其余12种时态拓扑关系的空间语义如图3所示。以Overlaps and Overlapped-by为例，在一维时间线上，Overlap的时间语义是A比B早开始，且两个区间在时间轴上有相交，即且在二维栅格中，其空间语义为jA＜jB且jB≤iA＜iB。与Overlap相反，Overlapped-by的时间语义是A比B晚开始，且两个区间在时间轴上有相交，即且其空间语义为jA＞jB且jA≤iB＜iA。例如，假设A在二维栅格中位置为，则满足A Overlaps B的栅格包括,,,,,,,以及，满足A Overlapped-by B的栅格包括,,,,,,以及，如图3中c所示。表1时态拓扑关系及其时间语义3.基于二维栅格的位置信息构建时空对象的时间运算模型。除了时态关系外，时空对象直接可以根据其生命周期信息进行多种时间运算，在二维网格中可通过栅格单位行列信息进行定义与表达。根据参与运算的时空对象数量，这些运算可区分为一元时间运算与二元时间运算。3.1一元时间运算一元时间运算是仅涉及一个时空对象的运算。由于二维栅格中的单元格描述了时段信息，可根据单元格位置定义一元运算符，结合其行、列信息进行时态运算。给定二维栅格中的单元格CA，其开始时间与结束时间分别为其一元运算主要有三种类型。begin与end运算，用来计算单元格CA的列jA与行iA，即begin＝jA，end＝iA，并结合时间分辨率等信息可计算出单元格CA的开始时间与结束时间。pre与post运算，用来计算当前时段的前一时段或后一时段信息。考虑到CA同时包含了开始时间与结束时间，针对开始时间定义beginpre＝，beginpost＝，即为相对于CA的时段提前或推迟1个时段开始，但终止于相同时段，其空间语义为CA单元格的左右邻居；针对结束时间定义endpre＝，endpost＝，即为相对于CA的时段开始于相同时段，但提前或推迟1个时段终止，其空间语义为CA单元格的上下邻居；针对开始时间与结束时间定义allpre＝，allpost＝，即为相对于CA的时段同时提前或推迟1个时段开始与终止，其空间语义为CA单元格的左上、右下邻居。expand与collapse运算。其中expand用来在CA单元格的jA及iA两侧分别扩展一定时长n，即expand＝,jA＞n；collapse与之相反，用来在CA单元格的jA及iA两侧分别收缩一定时长n，即collapse＝,iA＞n。如果参数n为1，则expand与collapse运算获得的是单元格CA的左下角及右上角邻居单元，从而与pre及post运算一起定义了CA的栅格邻域。3.2二元时间运算二元时间运算是涉及两个时空对象的运算，主要包括集合运算与距离运算两种类型，其实质上是相应时段时长的延长与缩短。3.2.1时间集合运算除了Before与After两种时态关系外，其余时态关系的实体均可进行并、交与差集运算。以单元格C1与C2为例，定义三种集合运算如下：C1与C2的并集定义为同时包含两个时段的时间间隔，描述从两个实体的最早开始时间到最晚结束时间的部分；C1与C2的交集定义为两个时段的重叠部分；C1与C2的差集定义属于C1但不属于C2的部分。不同时态关系情况下C1与C2的集合运算见表2。例如，如果C1和C2在二维栅格中分别位于和，那么与C1和C2的并集是，C1和C2的交集是，C1和C2的差集是。表2基于二维栅格的时间集合运算语义即所述时间集合运算具体包括：3.2.2时间距离运算针对单个单元格，其距离即为其代表的时段历时，其距离定义为d0＝*ct。给定两个单元格C1与C2，其距离采用曼哈顿距离定义，包括四种类型：起始时间距离dss＝|m-j|*ct，描述了C1与C2起始时间的间隔。当两者存在Start和Start-by时态关系时，dss为0。终止时间距离dee＝|n-i|*ct，描述了C1与C2终止时间的间隔；两者存在Finish和Finished-by时态关系时，dee为0。经历时间距离dse＝-min)*ct，描述了从C1起始时间到C2终止时间之间的历时间隔；在C1与C2没有重叠的情况下，两者之间存在延迟时间距离，描述了从C1终止到C2起始时间之间的历时间隔，其计算根据C1与C2之间的时态关系不同而不同，如下式所示：其他情况下，从C1终止到C2起始之间没有延迟，延迟距离des取为0。4.构建关系表来存储时空对象。进一步地，采用主流关系数据结构，设计三个关系表存储时空对象，时空对象表，时段信息表及时段元数据表；所述时空对象表用于存储时空对象的标识码、空间位置GEO及专题属性信息；所述时空对象的标识码包括时空对象标识码ID、时空对象所属图层标识码LID；所述时段信息表用来存储时空对象的生命周期信息；所述生命周期信息包括时空对象标识码ID、表达时空对象时段信息的单元格行号ROW及列号COL；所述时段元数据表用于存储时间二维栅格的元数据信息；所述元数据信息包括时空对象所属图层标识码LID、时空对象开始时间TSTART、时空对象结束时间TEND及时间分辨率TRESO。上述三个关系表通过外键建立相应的关联关系，在具体应用时可结合需求进行关系表及其属性扩展，其结构及相互联系定义如图6所示。在上述实施例的基础上，本发明第二方面提出一种基于二维栅格的时空大数据时段信息存储方法，包括：基于上述一种基于二维栅格的时空大数据时段信息建模方法构建的关系表存储时空对象。在上述实施例的基础上，本发明第三方面提出一种基于二维栅格的时空大数据检索方法，包括：根据所述一种基于二维栅格的时空大数据时段信息存储方法存储的时空对象进行数据检索。为验证本发明效果，进行检索效率测试：基于上述方法，应用从10万到500万条记录的8个视频数据集，在不采用任何索引的前提下，对基于二维栅格的时空对象检索进行了效率测试，并与传统的基于时间戳的检索方法进行了对比，结果如图7所示。可以看出，在不同数据量的时空大数据检索中，基于二维栅格的检索方法均显著缩短了检索响应时间，提高了对象检索效率，且随着数据量增大这一趋势更为明显，在500万条记录时，缩短响应时间2.37秒。在实际应用中，如采用B树等索引方法并优化缓存大小等查询参数，将进一步提升检索效率。综上，本发明采用二维栅格进行时空大数据的时段信息建模，以栅格单元的行列值记录时段终止时间与开始时间，采用整型数据类型存储时间信息并进行时间运算，基于二维栅格定义了十三种时段拓扑关系及两类时段运算的空间语义，能够突破时段信息的一维建模范式，降低时段信息存储与计算复杂度，并提升时空大数据的数据检索效率。以上所示仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本发明的保护范围。
