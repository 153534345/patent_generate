标题title
一种文字定位模型的训练方法及文字定位方法
摘要abst
本公开提供了一种文字定位方法及文字定位模型的训练方法，涉及人工智能技术领域，具体为计算机视觉和深度学习技术领域，可应用于光学字符识别OCR等场景。具体实现方案为：获取样本图像；将样本图像输入至待训练的文字定位模型中，输出预测文本框；获取样本先验锚点框；根据样本先验锚点框、标注文本框和预测文本框，对文字定位模型的模型参数进行调整，并使用下一个样本图像对调整后的文字定位模型继续训练，直至模型训练结束生成目标文字定位模型。由此，本公开能够通过结合先验锚点框进行文字定位模型的训练，不再需要在模型训练过程中从零开始进行回归预测，降低了模型训练过程中的耗时及难度，提高了模型训练结果的可靠性。
权利要求书clms
1.一种文字定位模型的训练方法，包括：获取样本图像，其中，所述样本图像中包括样本待定位文字和所述样本待定位文字的标注文本框；将所述样本图像输入至待训练的文字定位模型中对所述样本待定位文字进行定位，输出所述样本图像的预测文本框；获取所述样本图像对应的样本先验锚点框；根据所述样本先验锚点框、所述标注文本框和所述预测文本框，对所述文字定位模型的模型参数进行调整，并使用下一个样本图像对调整后的所述文字定位模型继续训练，直至模型训练结束生成目标文字定位模型。2.根据权利要求1所述的文字定位模型的训练方法，其中，所述根据所述样本先验锚点框、所述标注文本框和所述预测文本框，对所述文字定位模型的模型参数进行调整，包括：根据所述样本先验锚点框和所述标注文本框，获取第一损失函数；根据所述标注文本框和所述预测文本框，获取第二损失函数；根据所述第一损失函数和所述第二损失函数，获取所述文字定位模型的损失函数；基于所述损失函数对所述文字定位模型的模型参数进行调整。3.根据权利要求2所述的文字定位模型的训练方法，其中，所述根据所述样本先验锚点框和所述标注文本框，获取第一损失函数，包括：根据所述标注文本框的属性信息和所述样本先验锚点框的属性信息，获取所述第一损失函数。4.根据权利要求3所述的文字定位模型的训练方法，其中，所述根据所述标注文本框的属性信息和所述样本先验锚点框的属性信息，获取所述第一损失函数，包括：获取所述标注文本框的X轴角点与中心点之间的第一距离，以及所述标注文本框的Y轴角点与所述中心点之间的第二距离；获取所述样本先验锚点框的长度以及宽度；分别获取所述第一距离与所述宽度之间的第一比值，以及所述第二距离与所述长度之间的第二比值；根据所述第一比值和所述第二比值，获取所述第一损失函数。5.根据权利要求4所述的文字定位模型的训练方法，其中，所述标注文本框的所述中心点与所述样本先验锚点框的中心点重合。6.根据权利要求1所述的文字定位模型的训练方法，其中，所述获取所述样本图像对应的样本先验锚点框，包括：对所述样本图像进行特征提取，以获取所述样本图像对应的特征图；根据所述特征图，获取匹配的所述样本先验锚点框。7.根据权利要求6所述的文字定位模型的训练方法，其中，所述根据所述特征图，获取匹配的所述样本先验锚点框，包括：根据所述特征图，获取至少一个所述样本待定位文字；获取每个所述样本待定位文字的尺寸；针对每个所述样本待定位文字，获取与所述样本待定位文字的尺寸对应的所述样本先验锚点框。8.一种文字定位方法，包括：获取图像，其中，所述图像中包括待定位文字；将所述图像输入至目标文字定位模型中对所述待定位文字进行定位，输出所述图像的目标文本框，其中，所述目标文字定位模型为基于权利要求1-7任一项所述的训练方法训练出的模型。9.一种文字定位模型的训练装置，包括：第一获取模块，用于获取样本图像，其中，所述样本图像中包括样本待定位文字和所述样本待定位文字的标注文本框；输出模块，用于将所述样本图像输入至待训练的文字定位模型中对所述样本待定位文字进行定位，输出所述样本图像的预测文本框；第二获取模块，用于获取所述样本图像对应的样本先验锚点框；生成模块，用于根据所述样本先验锚点框、所述标注文本框和所述预测文本框，对所述文字定位模型的模型参数进行调整，并使用下一个样本图像对调整后的所述文字定位模型继续训练，直至模型训练结束生成目标文字定位模型。10.根据权利要求9所述的文字定位模型的训练装置，其中，所述生成模块，还用于：根据所述样本先验锚点框和所述标注文本框，获取第一损失函数；根据所述标注文本框和所述预测文本框，获取第二损失函数；根据所述第一损失函数和所述第二损失函数，获取所述文字定位模型的损失函数；基于所述损失函数对所述文字定位模型的模型参数进行调整。11.根据权利要求10所述的文字定位模型的训练装置，其中，所述生成模块，还用于：根据所述标注文本框的属性信息和所述样本先验锚点框的属性信息，获取所述第一损失函数。12.根据权利要求11所述的文字定位模型的训练装置，其中，所述生成模块，还用于：获取所述标注文本框的X轴角点与中心点之间的第一距离，以及所述标注文本框的Y轴角点与所述中心点之间的第二距离；获取所述样本先验锚点框的长度以及宽度；分别获取所述第一距离与所述宽度之间的第一比值，以及所述第二距离与所述长度之间的第二比值；根据所述第一比值和所述第二比值，获取所述第一损失函数。13.根据权利要求12所述的文字定位模型的训练装置，其中，所述标注文本框的所述中心点与所述样本先验锚点框的中心点重合。14.根据权利要求9所述的文字定位模型的训练装置，其中，所述第二获取模块，还用于：对所述样本图像进行特征提取，以获取所述样本图像对应的特征图；根据所述特征图，获取匹配的所述样本先验锚点框。15.根据权利要求14所述的文字定位模型的训练方法，其中，所述第二获取模块，还用于：根据所述特征图，获取至少一个所述样本待定位文字；获取每个所述样本待定位文字的尺寸；针对每个所述样本待定位文字，获取与所述样本待定位文字的尺寸对应的所述样本先验锚点框。16.一种文字定位装置，包括：获取模块，用于获取图像，其中，所述图像中包括待定位文字；输出模块，用于将所述图像输入至目标文字定位模型中对所述待定位文字进行定位，输出所述图像的目标文本框，其中，所述目标文字定位模型为基于权利要求1-7任一项所述的训练方法训练出的模型。17.一种电子设备，其特征在于，包括处理器和存储器；其中，所述处理器通过读取所述存储器中存储的可执行程序代码来运行与所述可执行程序代码对应的程序，以用于实现如权利要求1-7或者8中任一项所述的方法。18.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，该程序被处理器执行时实现如权利要求1-7或者8中任一项所述的方法。19.一种计算机程序产品，包括计算机程序，所述计算机程序在被处理器执行时实现根据权利要求1-7或者8中任一项所述方法的步骤。
说明书desc
技术领域本公开涉及计算机技术领域，并且更具体地涉及人工智能领域，尤其涉及计算机视觉和深度学习技术领域。背景技术近年来，随着人工智能技术的飞速发展，文字定位也得到了广泛应用。特别地，针对票据等含有文字的图像的文字定位，更是受到了越来越多的重视。其中，票据是一种重要的结构化信息的文本载体，被广泛用于各种商业场景。尽管电子发票日益发展，传统纸质发票仍然被大量使用。而各式各样的票据，版式复杂、项目繁多，这样一来，文字定位结果的准确性往往难以保证。与此同时，针对海量票据的文字定位过程，通常需要耗费大量人力成本，这样一来，极可能导致文字定位过程效率极低，从而影响票据审核、报账等业务的效率。相关技术中，在对文字进行定位时，借助于光学字符识别技术的快速发展，自动化审核方式正逐步替代人工审核方式。但是基于票据具有版式复杂多样、存在大量文字重叠，以及文字行长短不一等特点，当前基于分割或者检测的文字定位方法在OCR等应用场景下表现无法达到预期。因此，如何提高文字定位过程中的效率及可靠性，已成为了重要的研究方向之一。发明内容本公开提供了一种文字定位模型的训练方法及文字定位方法。根据本公开的一方面，提供了一种文字定位模型的训练方法，包括：获取样本图像，其中，所述样本图像中包括样本待定位文字和所述样本待定位文字的标注文本框；将所述样本图像输入至待训练的文字定位模型中对所述样本待定位文字进行定位，输出所述样本图像的预测文本框；获取所述样本图像对应的样本先验锚点框；根据所述样本先验锚点框、所述标注文本框和所述预测文本框，对所述文字定位模型的模型参数进行调整，并使用下一个样本图像对调整后的所述文字定位模型继续训练，直至模型训练结束生成目标文字定位模型。根据本公开的另一方面，提供了一种文字定位方法，包括：获取图像，其中，所述图像中包括待定位文字；将所述图像输入至目标文字定位模型中对所述待定位文字进行定位，输出所述图像的目标文本框，其中，所述目标文字定位模型为基于本公开第一方面实施例所述的训练方法训练出的模型。根据本公开的另一方面，提供了一种文字定位模型的训练装置，包括：第一获取模块，用于获取样本图像，其中，所述样本图像中包括样本待定位文字和所述样本待定位文字的标注文本框；输出模块，用于将所述样本图像输入至待训练的文字定位模型中对所述样本待定位文字进行定位，输出所述样本图像的预测文本框；第二获取模块，用于获取所述样本图像对应的样本先验锚点框；生成模块，用于根据所述样本先验锚点框、所述标注文本框和所述预测文本框，对所述文字定位模型的模型参数进行调整，并使用下一个样本图像对调整后的所述文字定位模型继续训练，直至模型训练结束生成目标文字定位模型。根据本公开的另一方面，提供了一种文字定位装置，包括：获取模块，用于获取图像，其中，所述图像中包括待定位文字；输出模块，用于将所述图像输入至目标文字定位模型中对所述待定位文字进行定位，输出所述图像的目标文本框，其中，所述目标文字定位模型为基于本公开第一方面实施例所述的训练方法训练出的模型。根据本公开的另一方面，提供了一种电子设备，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行本公开第一方面所述的文字定位模型的训练方法或者第二方面所述的文字定位方法。根据本公开的另一方面，提供了一种存储有计算机指令的非瞬时计算机可读存储介质，所述计算机指令用于使所述计算机执行本公开第一方面所述的文字定位模型的训练方法或者第二方面所述的文字定位方法。根据本公开的另一方面，提供了一种计算机程序产品，包括计算机程序，其特征在于，所述计算机程序在被处理器执行时实现根据本公开第一方面所述的文字定位模型的训练方法或者第二方面所述的文字定位方法的步骤。应当理解，本部分所描述的内容并非旨在标识本公开的实施例的关键或重要特征，也不用于限制本公开的范围。本公开的其它特征将通过以下的说明书而变得容易理解。附图说明附图用于更好地理解本方案，不构成对本公开的限定。其中：图1是根据本公开第一实施例的示意图；图2是根据本公开一种样本图像的示意图；图3是根据本公开一种预测文本框的示意图；图4是根据本公开第二实施例的示意图；图5是根据本公开第三实施例的示意图；图6是根据本公开第四实施例的示意图；图7是根据本公开一种标注文本框与样本先验锚点框的示意图；图8是根据本公开第五实施例的示意图；图9是用来实现本公开实施例的文字定位模型的训练方法的文字定位模型的训练装置的框图；图10是用来实现本公开实施例的文字定位方法的文字定位装置的框图；图11是用来实现本公开实施例的文字定位模型的训练方法或文字定位方法的电子设备的框图。具体实施方式以下结合附图对本公开的示范性实施例做出说明，其中包括本公开实施例的各种细节以助于理解，应当将它们认为仅仅是示范性的。因此，本领域普通技术人员应当认识到，可以对这里描述的实施例做出各种改变和修改，而不会背离本公开的范围和精神。同样，为了清楚和简明，以下的描述中省略了对公知功能和结构的描述。以下对本公开的方案涉及的技术领域进行简要说明：计算机技术，计算机技术的内容非常广泛，可粗分为计算机系统技术、计算机器件技术、计算机部件技术和计算机组装技术等几个方面。计算机技术包括：运算方法的基本原理与运算器设计、指令系统、中央处理器设计、流水线原理及其在CPU设计中的应用、存储体系、总线与输入输出。AI，是研究使计算机来模拟人生的某些思维过程和智能行为的学科，既有硬件层面的技术，也有软件层面的技术。人工智能硬件技术一般包括计算机视觉技术、语音识别技术、自然语言处理技术以及及其学习/深度学习、大数据处理技术、知识图谱技术等几大方面。计算机视觉，是一门研究如何使机器“看”的科学，更进一步的说，是指用摄影机和电脑代替人眼对目标进行识别、跟踪和测量等机器视觉，并进一步做图形处理，使电脑处理成为更适合人眼观察或传送给仪器检测的图像。作为一个科学学科，计算机视觉研究相关的理论和技术，试图建立能够从图像或者多维数据中获取‘信息’的人工智能系统。DL，是学习样本数据的内在规律和表示层次，这些学习过程中获得的信息对诸如文字，图像和声音等数据的解释有很大的帮助。它的最终目标是让机器能够像人一样具有分析学习能力，能够识别文字、图像和声音等数据。深度学习是一个复杂的机器学习算法，在语音和图像识别方面取得的效果，远远超过先前相关技术。深度学习在搜索技术，数据挖掘，机器学习，机器翻译，自然语言处理，多媒体学习，语音，推荐和个性化技术，以及其他相关领域都取得了很多成果。深度学习使机器模仿视听和思考等人类的活动，解决了很多复杂的模式识别难题，使得人工智能相关技术取得了很大进步。下面参考附图描述本公开实施例的一种文字定位模型的训练方法及文字定位方法。图1是根据本公开第一实施例的示意图。如图1所示，本实施例提出的一种文字定位模型的训练方法，包括如下步骤：S101、获取样本图像，其中，样本图像中包括样本待定位文字和样本待定位文字的标注文本框。其中，样本图像，可以已标注文字定位结果的任一图像。举例而言，如图2所示，样本图像可以为采集到的记账凭单图像，其中，样本图像包括2-1～2-4，共4个标注文本框，标注文本框中包括样本待定文字。需要说明的是，本公开中对于样本图像的数量不作限定，可以根据实际情况进行获取。举例而言，可以获取1000个样本图像，此种情况下，1000个样本图像中，共包括1000个样本待定位文字和1000个样本待定位文字的标注文本框。S102、将样本图像输入至待训练的文字定位模型中对样本待定位文字进行定位，输出样本图像的预测文本框。本公开实施例中，在获取到样本图像后，可以根据样本图像对待训练的文字定位模型进行训练。可选地，可以将样本图像输入至待训练的文字定位模型中对样本待定位文字进行定位，输出样本图像的预测文本框。举例而言，如图3所示，以图2中的任一标注文本框对应的图像区域为例，将样本图像输入至待训练的文字定位模型中对样本待定位文字进行定位，可以获取到样本图像的预测文本框3-1。S103、获取样本图像对应的样本先验锚点框。其中，样本先验锚点框，可以为任一与样本图像对应的样本先验锚点框。需要说明的是，本公开中，样本先验锚点框的数量不少于样本图像的数量，也就是说，针对每个样本图像，至少获取对应的一个样本先验锚点框。需要说明的是，本公开中对于获取样本先验锚点框的具体方式不作限定，可以根据实际情况进行选取。例如，可以获取样本图像对应的业务垂类，并根据业务垂类获取对应的样本先验锚点框；又例如，可以获取样本图像的特征图，并根据特征图获取对应的样本先验锚点框。S104、根据样本先验锚点框、标注文本框和预测文本框，对文字定位模型的模型参数进行调整，并使用下一个样本图像对调整后的文字定位模型继续训练，直至模型训练结束生成目标文字定位模型。本公开实施例中，在获取到样本先验锚点框、标注文本框和预测文本框后，可以根据样本先验锚点框、标注文本框和预测文本框，对文字定位模型的模型参数进行调整，并使用下一个样本图像对调整后的文字定位模型继续训练，直至满足模型训练结束条件，则将最后一次调整模型参数后得到的模型作为目标文字定位模型。其中，训练结束条件可以根据实际情况进行设定，本公开不作限定。可选地，可以设定训练结束条件为预测文本框与标注文本框之间的差异小于预设差异阈值。举例而言，可以设定训练结束条件为预测文本框与标注文本框之间的差异小于95％。根据本公开实施例的一种文字定位模型的训练方法，可以通过获取样本图像，并将样本图像输入至待训练的文字定位模型中对样本待定位文字进行定位，输出样本图像的预测文本框，然后获取样本图像对应的样本先验锚点框，进而根据样本先验锚点框、标注文本框和预测文本框，对文字定位模型的模型参数进行调整，并使用下一个样本图像对调整后的文字定位模型继续训练，直至模型训练结束生成目标文字定位模型，实现文字定位模型的训练。由此，本公开引入样本先验锚点框，为模型训练过程中的预测文本框的获取提供了一种参考，不再需要在模型训练过程中从零开始进行回归预测，降低了模型训练过程中的耗时及难度，提高了模型训练结果的可靠性。图4是根据本公开第二实施例的示意图。如图4所示，本公开提出的文字定位模型的训练方法，在上述实施例的基础上，具体包括以下步骤：S401、获取样本图像，其中，样本图像中包括样本待定位文字和样本待定位文字的标注文本框。S402、将样本图像输入至待训练的文字定位模型中对样本待定位文字进行定位，输出样本图像的预测文本框。该步骤S401～S402与上述步骤S101～S102一致，此处不再赘述。上一实施例中的步骤S103中获取样本图像对应的样本先验锚点框的具体过程，包括以下步骤S403～S404。S403、对样本图像进行特征提取，以获取样本图像对应的特征图。需要说明的是，本公开中，可以针对特征图上的每个特征点，设置不同大小的样本先验锚点框。因此，在试图获取样本先验锚点框时，可以首先对样本图像进行特征提取，以获取样本图像对应的特征图。S404、根据特征图，获取匹配的样本先验锚点框。作为一种可能的实现方式，如图5所示，在上述实施例的基础上，具体包括以下步骤：S501、根据特征图，获取至少一个样本待定位文字。需要说明的是，针对特征图上的任一特征点，可能会对应唯一尺寸的样本待定位文字，也可能会对应不同尺寸的多个样本待定位文字。此种情况下，在获取到特征图后，可以根据特征图，获取至少一个样本待定位文字。S502、获取每个样本待定位文字的尺寸。S503、针对每个样本待定位文字，获取与样本待定位文字的尺寸对应的样本先验锚点框。本公开实施例中，针对特征图上的特征点对应不同尺寸的多个样本待定位文字的情况，可以通过将分配不同的样本先验锚点框，缓解文字重叠的问题。上一实施例中的步骤S104中根据样本先验锚点框、标注文本框和预测文本框，对文字定位模型的模型参数进行调整的具体过程，包括以下步骤S405～S408。S405、根据样本先验锚点框和标注文本框，获取第一损失函数。本申请实施例中，可以根据标注文本框的属性信息和样本先验锚点框的属性信息，获取第一损失函数。作为一种可能的实现方式，如图6所示，在上述实施例的基础上，具体包括以下步骤：S601、获取标注文本框的X轴角点与中心点之间的第一距离，以及标注文本框的Y轴角点与中心点之间的第二距离。需要说明的是，标注文本框共有4个X轴角点，任一X轴角点与中心点之间的距离相等，因此，在试图获取标注文本框的X轴角点与中心点之间的第一距离时，可以将任一X轴角点与中心点之间的距离作为第一距离。需要说明的是，标注文本框共有4个Y轴角点，任一Y轴角点与中心点之间的距离相等，因此，在试图获取标注文本框的Y轴角点与中心点之间的第二距离时，可以将任一Y轴角点与中心点之间的距离作为第二距离。S602、获取样本先验锚点框的长度以及宽度。其中，标注文本框的中心点与样本先验锚点框的中心点重合。举例而言，如图7所示，获取到标注文本框7-1的X轴角点Gx与中心点之间的第一距离d1＝Gx-Pcx，以及标注文本框7-1的Y轴角点Gy与中心点之间的第二距离d2＝Gy-Pcy。进一步地，获取到样本先验锚点框7-2的长度Ph以及宽度Pw。S603、分别获取第一距离与宽度之间的第一比值，以及第二距离与长宽度之间的第二比值。举例而言，针对第一距离d1、长度Ph、第二距离d2、宽度Pw，可以获取到第一比值k1＝d1/Pw，即k1＝/Pw；第二比值k2＝d2/Ph，即k2＝/Ph。S604、根据第一比值和第二比值，获取第一损失函数。需要说明的是，本公开中预先设置有第一比值和第二比值与第一损失函数之间的映射关系，在获取到第一比值和第二比值后，通过查询映射关系，可以获取第一损失函数。S406、根据标注文本框和预测文本框，获取第二损失函数。本公开实施例中，在获取到预测文本框后，可以获取标注文本框与预测文本框之间的差异。进一步地，通过查询预先设置的差异与第二损失函数之间的映射关系，可以获取第二损失函数。S407、根据第一损失函数和第二损失函数，获取文字定位模型的损失函数。需要说明的是，本公开中对于根据第一损失函数和第二损失函数，获取文字定位模型的损失函数的具体方式不作限定。例如，可以将第一损失函数和第二损失函数的和作为文字定位模型的损失函数；又例如，可以将第一损失函数和第二损失函数的乘积作为文字定位模型的损失函数；再例如，可以将第一损失函数和第二损失函数的加权结果作为文字定位模型的损失函数。S408、基于损失函数对文字定位模型的模型参数进行调整。S409、使用下一个样本图像对调整后的文字定位模型继续训练，直至模型训练结束生成目标文字定位模型。该步骤S409与上述步骤S104一致，此处不再赘述。根据本公开实施例的一种文字定位模型的训练方法，可以通过根据样本先验锚点框和标注文本框，获取第一损失函数，并根据标注文本框和预测文本框，获取第二损失函数，进而根据第一损失函数和第二损失函数，获取文字定位模型的损失函数，通过减少了损失函数确定过程的耗时，进一步降低了模型训练过程中的耗时及难度，提高了模型训练结果的可靠性。图8是根据本公开第五实施例的示意图。如图8所示，本实施例提出的一种文字定位方法，包括如下步骤：S801、获取图像，其中，图像中包括待定位文字。其中，图像，可以为包括待定位文字的任一图像。S802、将图像输入至目标文字定位模型中对待定位文字进行定位，输出图像的目标文本框，其中，目标文字定位模型为基于本公开第一实施例的训练方法训练出的模型。本公开实施例中，在获取到图像后，可以将图像输入至训练好的目标文字定位模型中对待定位文字进行定位，以输出图像的目标文本框，此种情况下，目标文本框即为针对图像的文字定位结果。根据本公开实施例的一种文字定位方法，可以通过获取图像，其中，图像中包括待定位文字，进而将图像输入至目标文字定位模型中对待定位文字进行定位，输出图像的目标文本框，以实现文字定位。由此，本公开通过基于样本先验锚点框进行训练得到的收敛的目标文字定位模型对图像中的文字进行定位，提高了文字定位过程中的准确性和可靠性。需要说明的是，相关技术中，通过采用基于分割的文字定位方式以及基于锚点框的文字定位方式进行文字模型的训练以及文字定位。其中，针对基于分割的文字定位方式，可以直接预测出图像中每个像素点对文字的响应，能够较好的处理文本较长的问题。然而，当存在文字重叠情况时，像素点对文字的响应无法区分出所属哪个字段。其中，针对基于锚点框的文字定位方式，如EAST，图像中每个网格点有文字的响应时，预测出文字的四角点。然而，基于正负样本难以准确区分等问题，可能造成遮挡问题的处理难度。综上所述，本公开提出的文字定位方法及文字定位模型的训练方法，区别于相关技术中采用的基于分割的文字定位方式以及基于锚点框的文字定位方式，具有不再需要在模型训练过程中从零开始进行回归预测，降低了模型训练过程中的耗时及难度，提高了模型训练结果的可靠性等优势。本公开的技术方案中，所涉及的用户个人信息的获取，存储和应用等，均符合相关法律法规的规定，且不违背公序良俗。与上述几种实施例提供的相对应，本公开的一个实施例还提供文字定位模型的训练装置，由于本公开实施例提供的文字定位模型的训练装置与上述几种实施例提供的文字定位模型的训练方法相对应，因此在文字定位模型的训练方法的实施方式也适用于本实施例提供的文字定位模型的训练的装置，在本实施例中不再详细描述。图9是根据本公开一个实施例的文字定位模型的训练装置的结构示意图。如图9所示，该文字定位模型的训练装置900，包括：第一获取模块901、输出模块902、第二获取模块903以及生成模块904。其中：第一获取模块901，用于获取样本图像，其中，所述样本图像中包括样本待定位文字和所述样本待定位文字的标注文本框；输出模块902，用于将所述样本图像输入至待训练的文字定位模型中对所述样本待定位文字进行定位，输出所述样本图像的预测文本框；第二获取模块903，用于获取所述样本图像对应的样本先验锚点框；生成模块904，用于根据所述样本先验锚点框、所述标注文本框和所述预测文本框，对所述文字定位模型的模型参数进行调整，并使用下一个样本图像对调整后的所述文字定位模型继续训练，直至模型训练结束生成目标文字定位模型。其中，生成模块904，还用于：根据所述样本先验锚点框和所述标注文本框，获取第一损失函数；根据所述标注文本框和所述预测文本框，获取第二损失函数；根据所述第一损失函数和所述第二损失函数，获取所述文字定位模型的损失函数；基于所述损失函数对所述文字定位模型的模型参数进行调整。其中，生成模块904，还用于：根据所述标注文本框的属性信息和所述样本先验锚点框的属性信息，获取所述第一损失函数。其中，生成模块904，还用于：获取所述标注文本框的X轴角点与中心点之间的第一距离，以及所述标注文本框的Y轴角点与所述中心点之间的第二距离；获取所述样本先验锚点框的长度以及宽度；分别获取所述第一距离与所述宽度之间的第一比值，以及所述第二距离与所述长度之间的第二比值；根据所述第一比值和所述第二比值，获取所述第一损失函数。其中，所述标注文本框的所述中心点与所述样本先验锚点框的中心点重合。其中，第二获取模块903，还用于：对所述样本图像进行特征提取，以获取所述样本图像对应的特征图；根据所述特征图，获取匹配的所述样本先验锚点框。根据本公开实施例的一种文字定位模型的训练装置，可以通过获取样本图像，并将样本图像输入至待训练的文字定位模型中对样本待定位文字进行定位，输出样本图像的预测文本框，然后获取样本图像对应的样本先验锚点框，进而根据样本先验锚点框、标注文本框和预测文本框，对文字定位模型的模型参数进行调整，并使用下一个样本图像对调整后的文字定位模型继续训练，直至模型训练结束生成目标文字定位模型，实现文字定位模型的训练。由此，本公开引入样本先验锚点框，为模型训练过程中的预测文本框的获取提供了一种参考，不再需要在模型训练过程中从零开始进行回归预测，降低了模型训练过程中的耗时及难度，提高了模型训练结果的可靠性。图10是根据本公开一个实施例的文字定位装置的结构示意图。如图10所示，该文字定位装置1000，包括：获取模块1001以及输出模块1002。其中，获取模块1001，用于获取图像，其中，所述图像中包括待定位文字；输出模块1002，用于将所述图像输入至目标文字定位模型中对所述待定位文字进行定位，输出所述图像的目标文本框，其中，所述目标文字定位模型为基于权利要求1-7任一项所述的训练方法训练出的模型。根据本公开实施例的一种文字定位装置，可以通过获取图像，其中，图像中包括待定位文字，进而将图像输入至目标文字定位模型中对待定位文字进行定位，输出图像的目标文本框，以实现文字定位。由此，本公开通过基于样本先验锚点框进行训练得到的收敛的目标文字定位模型对图像中的文字进行定位，提高了文字定位过程中的准确性和可靠性。根据本公开的实施例，本公开还提供了一种电子设备、一种可读存储介质和一种计算机程序产品。图11示出了可以用来实施本公开的实施例的示例电子设备1100的示意性框图。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本公开的实现。如图11所示，设备1100包括计算单元1101，其可以根据存储在只读存储器1102中的计算机程序或者从存储单元1108加载到随机访问存储器1103中的计算机程序，来执行各种适当的动作和处理。在RAM 1103中，还可存储设备1100操作所需的各种程序和数据。计算单元1101、ROM 1102以及RAM 1103通过总线1104彼此相连。输入/输出接口1105也连接至总线1104。设备1100中的多个部件连接至I/O接口1105，包括：输入单元1106，例如键盘、鼠标等；输出单元1107，例如各种类型的显示器、扬声器等；存储单元1108，例如磁盘、光盘等；以及通信单元1109，例如网卡、调制解调器、无线通信收发机等。通信单元1109允许设备1100通过诸如因特网的计算机网络和/或各种电信网络与其他设备交换信息/数据。计算单元1101可以是各种具有处理和计算能力的通用和/或专用处理组件。计算单元1101的一些示例包括但不限于中央处理单元、图形处理单元、各种专用的人工智能计算芯片、各种运行机器学习模型算法的计算单元、数字信号处理器、以及任何适当的处理器、控制器、微控制器等。计算单元1101执行上文所描述的各个方法和处理，例如文字定位模型的训练方法或文字定位方法。例如，在一些实施例中，文字定位模型的训练方法或文字定位方法可被实现为计算机软件程序，其被有形地包含于机器可读介质，例如存储单元11008。在一些实施例中，计算机程序的部分或者全部可以经由ROM 1102和/或通信单元1109而被载入和/或安装到设备1100上。当计算机程序加载到RAM 1103并由计算单元1101执行时，可以执行上文描述的文字定位模型的训练方法或文字定位方法的一个或多个步骤。备选地，在其他实施例中，计算单元1101可以通过其他任何适当的方式而被配置为执行文字定位模型的训练方法或文字定位方法。本文中以上描述的系统和技术的各种实施方式可以在数字电子电路系统、集成电路系统、场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、负载可编程逻辑设备、计算机硬件、固件、软件、和/或它们的组合中实现。这些各种实施方式可以包括：实施在一个或者多个计算机程序中，该一个或者多个计算机程序可在包括至少一个可编程处理器的可编程系统上执行和/或解释，该可编程处理器可以是专用或者通用可编程处理器，可以从存储系统、至少一个输入装置、和至少一个输出装置接收数据和指令，并且将数据和指令传输至该存储系统、该至少一个输入装置、和该至少一个输出装置。用于实施本公开的方法的程序代码可以采用一个或多个编程语言的任何组合来编写。这些程序代码可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器或控制器，使得程序代码当由处理器或控制器执行时使流程图和/或框图中所规定的功能/操作被实施。程序代码可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本公开的上下文中，机器可读介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的程序。机器可读介质可以是机器可读信号介质或机器可读储存介质。机器可读介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。为了提供与用户的交互，可以在计算机上实施此处描述的系统和技术，该计算机具有：用于向用户显示信息的显示装置或者LCD监视器)；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给计算机。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网、互联网以及区块链网络。计算机系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。服务器可以是云服务器，也可以为分布式系统的服务器，或者是结合了区块链的服务器。本公开还提供一种计算机程序产品，包括计算机程序，所述计算机程序在被处理器执行时，实现如上所述的文字定位模型的训练方法或文字定位方法的步骤。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本发公开中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本公开公开的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本公开保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本公开的精神和原则之内所作的修改、等同替换和改进等，均应包含在本公开保护范围之内。
