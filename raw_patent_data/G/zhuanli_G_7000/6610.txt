标题title
一种基于多路网络的智能网关管理方法及系统
摘要abst
本发明公开一种基于多路网络的智能网关管理方法及系统，所述方法包括：建立用户网络使用习惯数据库，根据用户网络使用习惯数据库分析出用户具体应用的网络路径；根据用户具体应用的网络路径构建用户访问策略路由表，创建相应路由条目；创建虚拟路由器模板，根据用户需求进行虚拟路由器管理。本发明在存在多网络出口需求的情况下，如果网络环境或需求发生变化，不需要繁琐配置即可智能切换网络出口，快速适应用户的不同应用需求和对应的网络出口需求、网络状态需求，实现路由动态切换。
权利要求书clms
1.一种基于多路网络的智能网关管理方法，其特征在于，所述方法包括：建立用户网络使用习惯数据库，根据用户网络使用习惯数据库分析出用户具体应用的网络路径；根据用户具体应用的网络路径构建用户访问策略路由表，创建相应路由条目；根据用户访问策略路由表创建虚拟路由器，根据用户需求进行虚拟路由器管理。2.根据权利要求1所述基于多路网络的智能网关管理方法，其特征在于，所述建立用户网络使用习惯数据库，根据网络使用习惯数据库分析出用户具体应用的网络路径具体包括：收集不同用户的网络使用数据，建立用户网络使用习惯数据库；通过spark分析用户网络使用习惯数据库，得到用户访问的应用类型排名；根据用户访问的应用类型排名分别获取用户每个具体应用类型对应的网络路径。3.根据权利要求2所述基于多路网络的智能网关管理方法，其特征在于，所述根据用户网络使用习惯数据库分析出用户具体应用的网络路径之后还包括：获取每个具体应用类型对应的网络出口需求，建立各个具体应用与对应的网络出口需求的对应关系表。4.根据权利要求3所述基于多路网络的智能网关管理方法，其特征在于，所述根据用户具体应用的网络路径构建用户访问策略路由表，创建相应路由条目具体包括：根据用户具体应用的网络路径分析用户网络数据包导向目标地址；根据具体应用的网络数据包导向目标地址和具体应用类型对应的网络出口需求的对应关系表产生路由规则；根据路由规则构建用户访问策略路由表，并创建相应路由条目。5.根据权利要求1所述基于多路网络的智能网关管理方法，其特征在于，所述根据用户访问策略路由表创建虚拟路由器之前，采用DV算法创建虚拟路由器模板。6.根据权利要求5所述基于多路网络的智能网关管理方法，其特征在于，所述根据用户需求进行虚拟路由器管理具体包括：通过虚拟路由器模板匹配不同应用类型和不同网络出口需求，创建不同的虚拟路由器网关；根据各个出口网络状态和当前应用类型智能切换网络出口，实现虚拟路由器智能管理。7.根据权利要求6所述基于多路网络的智能网关管理方法，其特征在于，所述根据出口网络状态和应用类型智能切换网络出口具体包括：建立网络状态评估机制，测试各个出口网络连接速度；根据用户访问的应用类型排名顺序确定关键类应用和普通类应用；若关键类应用当前的出口网络连接速度小于第一预设阈值，将关键类应用切换到出口网络连接速度大于第二预设阈值的优质网络；对于普通类应用，延迟观察处理并在对应网络出口的网络不稳定或掉线情况下智能切换当前网络出口至网络稳定的网络出口。8.一种基于多路网络的智能网关管理系统，其特征在于，所述系统包括：数据库分析模块：建立用户网络使用习惯数据库，根据用户网络使用习惯数据库分析出用户具体应用的网络路径；路由策略构建模块：根据用户具体应用的网络路径构建用户访问策略路由表，创建相应路由条目；路由管理模块：创建虚拟路由器模板，匹配不同应用类型和不同需求，创建不同的虚拟路由器网关，根据用户需求进行虚拟路由器管理。9.一种电子设备，其特征在于，包括：至少一个处理器、至少一个存储器、通信接口和总线；其中，所述处理器、存储器、通信接口通过所述总线完成相互间的通信；所述存储器存储有可被所述处理器执行的程序指令，所述处理器调用所述程序指令，以实现如权利要求1～7任一项所述的方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储计算机指令，所述计算机指令使所述计算机实现如权利要求1～7任一项所述的方法。
说明书desc
技术领域本发明属于网络通信技术领域，具体涉及一种基于多路网络的智能网关管理方法及系统。背景技术OpenStack是一个开源私有云计算平台，在国内私有云市场占有绝对份额。该平台使用虚拟路由器提供虚拟机对外访问，虚拟路由器具有判断网络地址和选择IP路径的功能，路由器能够在多网络互联环境中，建立灵活的连接，可通过完全不同的数据分组和介质访问方法连接各种子网。但是OpenStack平台提供的虚拟路由器存在以下问题：虚拟机如果存在多出口需求，且不同应用需要走不同的出口，例如腾讯会议要求走电信出口，VPN要求走联通出口，这样情况下实现方式繁琐且准确率不高；连接的外部网络状态无法智能检测，在出现网络不稳定或掉线的情况下无法立即处理；如果网络环境或需求发生变化，需要重新配置，消耗大量人力资源。发明内容有鉴于此，本发明提出了一种基于多路网络的智能网关管理方法及系统，用于解决网络环境或需求发生变化时无法快速进行路由动态切换的问题。本发明第一方面，公开一种基于多路网络的智能网关管理方法，所述方法包括：建立用户网络使用习惯数据库，根据用户网络使用习惯数据库分析出用户具体应用的网络路径；根据用户具体应用的网络路径构建用户访问策略路由表，创建相应路由条目；根据各个出口网络状态和当前应用类型智能切换网络出口；创建虚拟路由器模板，根据用户需求进行虚拟路由器管理。优选的，所述建立用户网络使用习惯数据库，根据网络使用习惯数据库分析出用户具体应用的网络路径具体包括：收集不同用户的网络使用数据，建立用户网络使用习惯数据库；通过spark分析用户网络使用习惯数据库，得到用户访问的应用类型排名；根据用户访问的应用类型排名分别获取用户每个具体应用类型对应的网络路径。优选的，所述根据用户网络使用习惯数据库分析出用户具体应用的网络路径之后还包括：获取每个具体应用类型对应的网络出口需求，建立各个具体应用与对应的网络出口需求的对应关系表。优选的，所述根据用户具体应用的网络路径构建用户访问策略路由表，创建相应路由条目具体包括：根据用户具体应用的网络路径分析用户网络数据包导向目标地址；根据具体应用的网络数据包导向目标地址和具体应用类型对应的网络出口需求的对应关系表产生路由规则；根据路由规则构建用户访问策略路由表，并创建相应路由条目。优选的，其特征在于，所述根据出口网络状态和应用类型智能切换网络出口具体包括：建立网络状态评估机制，测试各个出口网络连接速度；根据用户访问的应用类型排名顺序确定关键类应用和普通类应用；若关键类应用当前的出口网络连接速度小于第一预设阈值，将关键类应用切换到出口网络连接速度大于第二预设阈值的优质网络；对于普通类应用，延迟观察处理并在对应网络出口的网络不稳定或掉线情况下智能切换当前网络出口至网络稳定的网络出口。优选的，所述根据用户访问策略路由表创建虚拟路由器之前，采用DV算法创建虚拟路由器模板。优选的，通过虚拟路由器模板匹配不同应用类型和不同网络出口需求，创建不同的虚拟路由器网关，实现虚拟路由器智能管理。本发明第二方面，公开一种基于多路网络的智能网关管理系统，所述系统包括：数据库分析模块：建立用户网络使用习惯数据库，根据用户网络使用习惯数据库分析出用户具体应用的网络路径；路由策略构建模块：根据用户具体应用的网络路径构建用户访问策略路由表，创建相应路由条目；路由管理模块：创建虚拟路由器模板，匹配不同应用类型和不同需求，创建不同的虚拟路由器网关，根据用户需求进行虚拟路由器管理。本发明第三方面，公开一种电子设备，包括：至少一个处理器、至少一个存储器、通信接口和总线；其中，所述处理器、存储器、通信接口通过所述总线完成相互间的通信；所述存储器存储有可被所述处理器执行的程序指令，所述处理器调用所述程序指令，以实现如本发明第一方面所述的方法。本发明第四方面，公开一种计算机可读存储介质，所述计算机可读存储介质存储计算机指令，所述计算机指令使所述计算机实现如本发明第一方面所述的方法。本发明相对于现有技术具有以下有益效果：1)本发明根据用户网络使用习惯和应用类型对应的网络需求，建立网络信息数据库，构建用户访问策略路由表，创建虚拟路由器模板和网络状态评估机制，实现虚拟路由器的智能管理。2)在存在多路网络出口需求的情况下，如果网络环境或需求发生变化，不需要繁琐配置即可智能切换网络出口，快速适应用户的不同应用需求和对应的网络出口需求、网络状态需求，实现路由动态切换。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明的基于多路网络的智能网关管理方法流程图；图2为本发明切换网络出口的步骤流程图。具体实施方式下面将结合本发明实施方式，对本发明实施方式中的技术方案进行清楚、完整地描述，显然，所描述的实施方式仅仅是本发明一部分实施方式，而不是全部的实施方式。基于本发明中的实施方式，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施方式，都属于本发明保护的范围。传统的路由器路由方式基本上都是基于目的地的匹配规则来进行，网络转发服务器只通过接受的IP报文中的目的地址来进行匹配明细路由，很难按照用户指定的特定信息进行路由转发，虚拟机如果存在多出口需求，且不同应用需要走不同的出口时必然配置繁琐，并且网络环境或需求发生变化时，又需要重新配置，无法快速进行路由动态切换。为解决上述问题，本发明提出了基于多路网络的智能网关管理方法即系统，其通过建立用户网络使用习惯数据库，根据用户网络使用习惯数据库分析出用户具体应用的网络路径；根据用户具体应用的网络路径构建用户访问策略路由表；然后创建虚拟路由器模板，根据用户不同需求进行虚拟路由器管理，在存在多路网络出口需求、网络环境或需求发生变化时可快速进行网络出口切换，保证网络应用连接流畅。请参阅图1，本发明提出一种基于多路网络的智能网关管理方法，所述方法包括：S1、建立用户网络使用习惯数据库，根据用户网络使用习惯数据库分析出用户具体应用的网络路径；步骤S1具体包括：S11、收集不同用户的网络使用数据，建立用户网络使用习惯数据库；具体的，不同用户的网络使用情况包括常用的各类应用类型，各应用类型的访问频率、对应的网络出口运营商、源IP地址、目的IP地址等。各类应用类型可通过分析用户数据流报文来判断。S12、通过spark分析用户网络使用习惯数据库，得到用户访问的应用类型排名；具体的，通过大规模数据处理分析引擎spark分析用网络使用习惯数据库，依次分析出用户偏好应用类型和用户在不同应用之间的切换浏览路径偏好。S13、根据用户访问的应用类型排名分别获取用户每个具体应用类型对应的网络路径；S14、获取每个具体应用类型对应的网络出口需求，建立各个具体应用与对应的网络出口需求的对应关系表。具体的，所述网络出口可以是不同运营商线路的网络出口，也可以是各地区的网络出口，其基本要求是符合具体应用类型的出口类型需求。S2、根据用户具体应用的网络路径构建用户访问策略路由表，创建相应路由条目；步骤S2具体包括：S21、根据用户具体应用的网络路径分析用户网络数据包导向目标地址；比如源IP地址、目的IP地址等。S22、根据具体应用的网络数据包导向目标地址和具体应用类型对应的网络出口需求的对应关系表产生路由规则；S23、根据路由规则构建用户访问策略路由表，并创建相应路由条目。本发明根据不同的应用访问类型制定不同的路由规则，根据路由规则生成不同的用户访问策略路由表，基于用户访问策略路由表即可使互联网的出口链路满足不同内网用户的网络访问需求。S4、创建虚拟路由器模板，根据用户需求进行虚拟路由器管理。步骤S4具体包括如下分步骤：S41、通过虚拟路由器模板匹配不同应用类型和不同网络出口需求，创建不同的虚拟路由器网关；具体的，可采用DV算法创建虚拟路由器模板，根据虚拟路由器模板和用户访问策略路由表来匹配不同应用类型和不同需求，创建不同的虚拟路由器网关，基于该虚拟路由器网关可实现不同应用类型和不同网络出口需求的路由管理。S42、根据各个出口网络状态和当前应用类型智能切换网络出口，实现虚拟路由器智能管理。S421、建立网络状态评估机制，测试各个出口网络连接速度；S422、根据用户访问的应用类型排名顺序确定关键类应用和普通类应用；排名顺序在前N个可认为是关键类应用，其余为普通类应用。S423、若关键类应用当前的出口网络连接速度小于第一预设阈值，筛选出与当前应用类型的网络出口需求相匹配且出口网络连接速度大于第二预设阈值的优质网络出口；具体的，当前的出口网络连接速度未达到要求时，首先根据当前应用类型查询各个具体应用与对应的网络出口需求的对应关系表，确定当前应用类型的网络出口需求，然后在剩余网络出口中筛选出网络出口类型符合应用类型要求且网络连接速度符合需求的网络出口。S424、对于普通类应用，延迟观察处理，并在对应网络出口的网络不稳定或掉线情况下，筛选出与当前应用类型的网络出口需求相匹配且网络状态稳定的网络出口。S425、根据各筛选出的网络出口用户访问策略路由表，创建新的路由条目；S426、用户访问策略路由表将当前的出口网络连接速度小于第一预设阈值的关键类应用立即切换到筛选出与当前应用类型的网络出口需求相匹配且出口网络连接速度大于第二预设阈值的优质网络出口；S427、对于普通类应用，当对出现应网络出口的网络不稳定或掉线情况时，延迟观察处理，比如5分钟观察效果后处理，若还存在网络不稳定或掉线情况，智能切换网络出口至筛选出的与当前应用类型的网络出口需求相匹配且网络状态稳定的网络出口。本发明通过分析用户数据流报文判断用户访问应用类型，然后根据不同的应用访问类型制定不同的路由规则，根据路由规则生成不同的用户访问策略路由表，最后根据用户访问策略路由表和虚拟路由器模板创建虚拟路由器网关，从而满足不同内网用户的网络访问需求。在此基础上，为了进一步解决网络环境或需求发生变化时需要重新配置的问题，本发明还实时监测各网络应用上流经对应网络出口的实时网络状态信息以及网络需求是否变化；按预定义规则检测网络出口网络状态是否达到要求或网络需求是否发生变化；当发现存在网络状态不佳或网络需求发生变化时，向互联网出口网关发送改变用户访问策略路由表指令，并将指定用户IP地址添加到有剩余带宽的网络出口对应的用户访问策略路由表，实现用户访问控制和实时网络出口切换。与所述方法实施例相对应，本发明还提出一种基于多路网络的智能网关管理系统，所述系统包括：数据库分析模块：建立用户网络使用习惯数据库，根据用户网络使用习惯数据库分析出用户具体应用的网络路径；路由策略构建模块：根据用户具体应用的网络路径构建用户访问策略路由表，创建相应路由条目；路由管理模块：创建虚拟路由器模板，根据用户需求进行虚拟路由器管理。所述路由管理模块具体包括：网关创建单元：通过虚拟路由器模板匹配不同应用类型和不同网络出口需求，创建不同的虚拟路由器网关；出口切换单元：根据各个出口网络状态和当前应用类型智能切换网络出口，实现虚拟路由器智能管理。以上方法实施例和系统实施例是一一对应的，系统实施例简述之处请参阅方法实施例即可，不再赘述。本发明还公开一种电子设备，包括：至少一个处理器、至少一个存储器、通信接口和总线；其中，所述处理器、存储器、通信接口通过所述总线完成相互间的通信；所述存储器存储有可被所述处理器执行的程序指令，所述处理器调用所述程序指令，以实现本发明前述的方法。本发明还公开一种计算机可读存储介质，所述计算机可读存储介质存储计算机指令，所述计算机指令使所述计算机实现本发明实施例所述方法的全部或部分步骤。所述存储介质包括：U盘、移动硬盘、只议存储器ROM、随机存取存储器RAM、磁碟或者光盘等各种可以存储程序代码的介质。以上所描述的系统实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以分布到多个网络单元上。本领域普通技术人员在不付出创造性的劳动的情况下，可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。以上所述仅为本发明的较佳实施方式而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
