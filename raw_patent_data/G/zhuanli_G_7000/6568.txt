标题title
一种车辆距离探测方法、系统、设备及介质
摘要abst
本发明公开了一种车辆距离探测方法、系统、设备及介质，S1，在驾驶车辆行驶过程中，获取驾驶车辆正前方图像；S2，对获取的图像利用深度学习算法YOLOv4进行车辆检测，根据车辆横截面的大小将所有车辆分为小车、客车和货车三类；S3，确定小车、客车和货车三类分别对应的距离与像素点数的关系；S4，选取驾驶车辆当前车道中正前方的车辆；S5，对驾驶车辆正前方的车辆，判断该车辆的类别和像素点数，通过判断的类别与距离的关系，得到该车辆与驾驶车辆的距离。可以精确估计自身车辆与前方车辆的距离，为安全驾驶提供辅助。
权利要求书clms
1.一种车辆距离探测方法，其特征在于，包括以下过程：S1，在驾驶车辆行驶过程中，获取驾驶车辆正前方图像；S2，对获取的图像利用深度学习算法YOLOv4进行车辆检测，根据车辆横截面的大小将所有车辆分为小车、客车和货车三类；S3，确定小车、客车和货车三类分别对应的距离与像素点数的关系；S4，选取驾驶车辆当前车道中正前方的车辆；S5，对驾驶车辆正前方的车辆，判断该车辆的类别和像素点数，通过判断的类别与距离的关系，得到该车辆与驾驶车辆的距离。2.根据权利要求1所述的车辆距离探测方法，其特征在于，利用深度学习算法YOLOv4进行车辆检测的具体过程为：采集包含小车、客车、货车三类待检测目标的数据集，对数据集中的数据进行详细标注，利用此数据集训练YOLOv4算法；首先利用卷积神经网络进行特征提取，随后利用梯度下降算法训练模型，最后利用NMS算法消除同一目标的重叠边界框，获得可以精确检测上述三类目标的检测模型。3.根据权利要求1所述的车辆距离探测方法，其特征在于，S3具体过程为：对小车、客车和货车三类分别多次采集距离与像素点数之间的对应数据，拟合出距离与像素点数之间的表达式。4.根据权利要求1所述的车辆距离探测方法，其特征在于，S4具体过程为：根据预测框中心点横坐标与整体图像中心点横坐标的差值最小原则来选取当前车道中存在的车辆并排除其他相邻车道的车辆。5.根据权利要求1所述的车辆距离探测方法，其特征在于，S5具体过程为：针对当前车道车辆，利用深度学习算法进行目标框生成，得到当前目标像素点数，另根据具体目标类别信息选择小车、客车或货车对应表达式推算当前距离。6.根据权利要求1所述的车辆距离探测方法，其特征在于，得到驾驶车辆与正前方车辆的距离后，若距离小于安全距离，则向驾驶员发出预警信息。7.根据权利要求6所述的车辆距离探测方法，其特征在于，确定车速与安全距离的相互关系，若距离小于当前车速下的最小安全距离，则向驾驶员发出预警信息。8.一种车辆距离探测系统，其特征在于，包括以下过程：图像获取模块，用于在驾驶车辆行驶过程中，获取驾驶车辆正前方图像；车辆分类模块，用于对获取的图像利用深度学习算法YOLOv4进行车辆检测，根据车辆横截面的大小将所有车辆分为小车、客车和货车三类；距离与像素点数关系确定模块，用于确定小车、客车和货车三类分别对应的距离与像素点数的关系；目标筛选模块，用于选取驾驶车辆当前车道中正前方的车辆；距离计算模块，用于对驾驶车辆正前方的车辆，判断该车辆的类别和像素点数，通过判断的类别与距离的关系，得到该车辆与驾驶车辆的距离。9.一种计算机设备，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1至7任意一项所述车辆距离探测方法的步骤。10.一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至7任意一项所述车辆距离探测方法的步骤。
说明书desc
技术领域本发明属于汽车安全领域，涉及一种车辆距离探测方法、系统、设备及介质。背景技术根据最新数据，我国机动车保有量已经达到了3.6亿量，其中汽车保有量2.7亿量，由此导致了道路拥堵等一系列问题。由于车辆保有量大，在车辆的正常行驶中不可避免与其他车辆处于同一道路内，当紧急情况发生时若间隔距离太近容易发生事故。准确的估计自身与前方车辆的距离可以帮助驾驶员判断是否需要减速以保持安全距离，足够的安全距离能够在突发状况中给司机充分的动作时间，有效避免意外事故的发生。发明内容本发明的目的在于克服上述现有技术的缺点，提供一种车辆距离探测方法、系统、设备及介质，可以精确估计自身车辆与前方车辆的距离，为安全驾驶提供辅助。为达到上述目的，本发明采用以下技术方案予以实现：一种车辆距离探测方法，包括以下过程：S1，在驾驶车辆行驶过程中，获取驾驶车辆正前方图像；S2，对获取的图像利用深度学习算法YOLOv4进行车辆检测，根据车辆横截面的大小将所有车辆分为小车、客车和货车三类；S3，确定小车、客车和货车三类分别对应的距离与像素点数的关系；S4，选取驾驶车辆当前车道中正前方的车辆；S5，对驾驶车辆正前方的车辆，判断该车辆的类别和像素点数，通过判断的类别与距离的关系，得到该车辆与驾驶车辆的距离。优选的，利用深度学习算法YOLOv4进行车辆检测的具体过程为：采集包含小车、客车、货车三类待检测目标的数据集，对数据集中的数据进行详细标注，利用此数据集训练YOLOv4算法；首先利用卷积神经网络进行特征提取，随后利用梯度下降算法训练模型，最后利用NMS算法消除同一目标的重叠边界框，获得可以精确检测上述三类目标的检测模型。优选的，S3具体过程为：对小车、客车和货车三类分别多次采集距离与像素点数之间的对应数据，拟合出距离与像素点数之间的表达式。优选的，S4具体过程为：根据预测框中心点横坐标与整体图像中心点横坐标的差值最小原则来选取当前车道中存在的车辆并排除其他相邻车道的车辆。优选的，S5具体过程为：针对当前车道车辆，利用深度学习算法进行目标框生成，得到当前目标像素点数，另根据具体目标类别信息选择小车、客车或货车对应表达式推算当前距离。优选的，得到驾驶车辆与正前方车辆的距离后，若距离小于安全距离，则向驾驶员发出预警信息。进一步，确定车速与安全距离的相互关系，若距离小于当前车速下的最小安全距离，则向驾驶员发出预警信息。一种车辆距离探测系统，包括以下过程：图像获取模块，用于在驾驶车辆行驶过程中，获取驾驶车辆正前方图像；车辆分类模块，用于对获取的图像利用深度学习算法YOLOv4进行车辆检测，根据车辆横截面的大小将所有车辆分为小车、客车和货车三类；距离与像素点数关系确定模块，用于确定小车、客车和货车三类分别对应的距离与像素点数的关系；目标筛选模块，用于选取驾驶车辆当前车道中正前方的车辆；距离计算模块，用于对驾驶车辆正前方的车辆，判断该车辆的类别和像素点数，通过判断的类别与距离的关系，得到该车辆与驾驶车辆的距离。一种计算机设备，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现如上述任意一项所述车辆距离探测方法的步骤。一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序被处理器执行时实现如上述任意一项所述车辆距离探测方法的步骤。与现有技术相比，本发明具有以下有益效果：本发明通过深度学习算法YOLOv4对车辆进行分类，在针对不同类别车辆进行距离和像素点数的拟合，得到不同类别车辆距离和像素点数的关系，从而对驾驶车辆正前方的车辆进行类别识别，再带入对应的距离和像素点数的关系，得到驾驶车辆与其正前方车辆的精确距离，为安全驾驶提供辅助。进一步，通过车速与安全距离的相互关系，根据当前速度来判定当前距离是否安全，能够适应不同的车速，使距离预警更加智能。附图说明图1为本发明的行驶中拍摄得到的图像；图2为本发明的拍摄图像中车辆检测结果；图3为本发明的其他车道车辆排除结果。具体实施方式下面结合附图对本发明做进一步详细描述：本发明所述车辆距离探测方法，将摄像机角度固定，放置在车辆前端中部，车载电脑放置在车辆后端。由摄像机进行车辆行进方向的图像采集，车载电脑对采集的图像进行处理，根据特定算法求出车辆前方是否有车辆，当有车辆时，根据特定算法求出车辆距离。步骤一，图像拍摄：当车辆在行驶中时，摄像机拍摄道路中车辆前方的图像以备算法处理，获得的待处理图像如图1所示。由于摄像机位置固定，且会影响当前车辆行车安全的车辆肯定处于同一车道中，故应测量车辆距离的目标车辆应该处于图像特定区域。步骤二，图像处理：对摄像机拍摄得到的图像利用深度学习算法YOLOv4进行车辆检测。由于不同车辆在同一距离下的横截面大小不同，本发明专利根据车辆横截面的大小将其大致分为：小车、客车、货车三类。在YOLOv4算法训练中针对小车、客车、货车三类分别训练，以在检测时可以区分这三类目标。首先采集包含小车、客车、货车三类待检测目标的数据集，对数据集中的数据进行详细标注。利用此数据集在专业计算机上训练本专利所需的YOLOv4算法，首先利用卷积神经网络进行特征提取，随后利用梯度下降算法训练模型，最后利用NMS算法消除同一目标的重叠边界框，获得可以精确检测上述三类目标的检测模型。进一步将训练好的模型移植到车载计算机中，进行实时目标检测。对图1进行处理的结果如图2所示。步骤三，目标确定，在一幅图像中往往存在多个车辆，不仅包含当前车道前方的车辆，还包括相邻车道前方的图像。因为相邻车道车辆与本车辆无干扰，故其距离不需测量。因为摄像机安装在车辆前部，故当前车道一般处于图像中心。根据预测框中心点横坐标与整体图像中心点横坐标的差值最小原则来选取当前车道中存在的车辆并排除其他相邻车道的车辆。如图,2中以图像左上角为原点，横向为X轴，纵向为Y轴，图像横向长473像素，纵向高355像素，故图像中心点横坐标为236。图3中最左侧车辆预测框中心点横坐标为122，中间车辆预测框中心点横坐标为160，最右侧车辆预测框中心点横坐标为247。故根据预测框中心点横坐标与整体图像中心点横坐标的差值最小原则，确定当前车道中存在的目标为最右侧车辆。当处于弯道行车时，由于发生紧急事故需要刹停时，造成安全隐患最大的仍然是处于正前方车辆，故仍按上述过程确定检测目标。排除其他车道的目标后结果如图3所示。步骤四，数据处理：事先根据摄像机的具体安装位置拍摄并计算一定距离下目标的像素点数。如当间隔距离为1000厘米时，前方车辆目标框像素点为8000，当间隔距离为2000厘米时，前方车辆目标框像素点为5000。利用上述方案，多次采集间隔距离与像素点之间的对应数据，拟合出两者之间的表达式。上述数据处理方法针对小车、客车、货车三类分别进行，可得到三种车型对应的预测框像素与距离之间的关系表达式。步骤五，距离计算：针对当前车道任意目标，利用深度学习算法进行目标框生成，得到当前目标像素点数，另根据具体目标类别信息选择小车、客车、货车某一种表达式推算当前距离，这样，可根据任意目标像素点数求出间隔距离。如针对图1中的目标信息，利用深度学习算法进行目标框生成可以得到图2的结果，根据步骤三目标确定方法，得到图3的预测结果。在图3中，检测结果为bus，同时YOLOv4算法可输出预测框的坐标信息，计算得到预测框包含像素点数，利用得到的像素点数信息选择bus对应的像素点与距离关系表达式，计算得到当前目标车辆的距离。步骤六，信息预警：根据当前车辆的具体特性，事先确定车速与安全距离的相互关系。在行驶过程中利用本专利提出的算法帮助驾驶员确定精确的前方车辆间隔距离，若测算距离小于当前车速下的最小安全距离，则发出预警信息，提示驾驶员减速增加距离，避免紧急情况下制动距离不足导致事故的发生。实施例：步骤一，图像拍摄：当车辆在行驶中时，摄像机拍摄道路中车辆前方的图像以备算法处理，获得的待处理图像如图1所示。步骤二，图像处理：事先采集包含小车、客车、货车三类待检测目标的数据集，对数据集中的数据进行详细标注。利用此数据集在专业计算机上训练本专利所需的YOLOv4算法，首先利用卷积神经网络进行特征提取，随后利用梯度下降算法训练模型，最后利用NMS算法消除同一目标的重叠边界框，获得可以精确检测上述三类目标的检测模型。进一步将训练好的模型移植到车载计算机中，进行实时目标检测。对图1进行处理的结果如图2所示。步骤三，目标确定：在一幅图像中往往存在多个车辆，不仅包含当前车道前方的车辆，还包括相邻车道前方的图像。因为相邻车道车辆与本车辆无干扰，故其距离不需测量。因为摄像机安装在车辆前部，故当前车道一般处于图像中心。当处于弯道行车时，由于发生紧急事故需要刹停时，造成安全隐患最大的仍然是处于正前方车辆，故仍考虑正前方检测目标。根据预测框中心点横坐标与整体图像中心点横坐标的差值最小原则来选取当前车道中存在的车辆并排除其他相邻车道的车辆。如图2中以图像左上角为原点，横向为X轴，纵向为Y轴，图像横向长473像素，纵向高355像素，故图像中心点横坐标为236。图2中最左侧车辆预测框中心点横坐标为122，中间车辆预测框中心点横坐标为160，最右侧车辆预测框中心点横坐标为247。故根据预测框中心点横坐标与整体图像中心点横坐标的差值最小原则，确定当前车道中存在的目标为最右侧车辆。排除其他车道的目标后结果如图3所示。步骤四，数据处理：事先根据摄像机的具体安装位置拍摄并计算一定距离下目标的像素点数。如对于客车目标：当间隔距离为1000厘米时，前方车辆目标框像素点为8000。当间隔距离为2000厘米时，前方车辆目标框像素点为5000。当间隔距离为3000厘米时，前方车辆目标框像素点为3000。当间隔距离为4000厘米时，前方车辆目标框像素点为1500。当间隔距离为5000厘米时，前方车辆目标框像素点为600。当间隔距离为6000厘米时，前方车辆目标框像素点为250。当间隔距离为7000厘米时，前方车辆目标框像素点为100。利用上述数据，以目标框像素点为自变量x，间隔距离为y，拟合出两者之间的表达式为y＝9.812e-5*x2-1.442x+6390。步骤五，距离计算：针对步骤三所确定的检测结果，假设该客车目标框内像素点为4000，则利用步骤四所得公式，可推算出间隔距离为2191.92厘米。步骤六，信息预警：若在上述计算条件中安全车速为20km/h，而自身行驶速度为50km/h，则可以判断间隔距离不足，紧急状态下易发生事故，则对驾驶员进行信息预警，提醒驾驶员增加行车距离。本发明所述的车辆距离探测系统，包括以下过程：图像获取模块，用于在驾驶车辆行驶过程中，获取驾驶车辆正前方图像。车辆分类模块，用于对获取的图像利用深度学习算法YOLOv4进行车辆检测，根据车辆横截面的大小将所有车辆分为小车、客车和货车三类。距离与像素点数关系确定模块，用于确定小车、客车和货车三类分别对应的距离与像素点数的关系。目标筛选模块，用于选取驾驶车辆当前车道中正前方的车辆。距离计算模块，用于对驾驶车辆正前方的车辆，判断该车辆的类别和像素点数，通过判断的类别与距离的关系，得到该车辆与驾驶车辆的距离。本发明所述的计算机设备，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现如上述车辆距离探测方法的步骤。本发明所述的计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序被处理器执行时实现如上述车辆距离探测方法的步骤。以上内容仅为说明本发明的技术思想，不能以此限定本发明的保护范围，凡是按照本发明提出的技术思想，在技术方案基础上所做的任何改动，均落入本发明权利要求书的保护范围之内。
