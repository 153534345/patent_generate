标题title
一种眼标控制方法
摘要abst
本发明公开了一种眼标控制方法，包括：采集头部视频；根据头部视频信息实时提取脸部及眼球坐标信息和脸部动作信息；根据脸部及眼球坐标信息计算出显示屏的眼标指针显示位置，其中利用脸部坐标确定头部的上下及左右的位置移动，用于眼标指针的粗定位，眼球坐标用于眼标位置的定位微调。根据脸部动作信息确定眼标的左击、双击及右击，以及是否进行眼标初始位置及灵敏度校准。优点：仅利用头部及眼球定位，相对鼠标的秒级定位时间可提高控制速度，能够胜任基本的鼠标功能而无须手控，有发展潜力。
权利要求书clms
1.一种眼标控制方法，其特征在于，包括：采集头部视频，利用图像处理的方法识别视频中眼睛、眼球、鼻子、嘴巴并提取其坐标信息；利用所述坐标信息计算出相对屏幕的上下及左右的脸部位置变化，利用所述脸部位置变化对眼标指针进行粗定位；利用眼球的坐标信息对粗定位后的眼标指针进行微调；根据提取的眼睛、眼球、鼻子、嘴巴的坐标信息变化对眼标指针进行校准，并产生左击、双击或右击操作，包括：根据眼睛的坐标信息的变化确定为单次眨眼时，进行眼标指针的初始位置校准及灵敏度校准；在根据眼睛的坐标信息的变化确定为未眨眼时，根据脸部位置变化及眼球的坐标信息进行粗定位及微调，根据眼睛、鼻子、嘴巴的坐标信息的变化判断并进行左击、双击或右击操作。2.根据权利要求1所述的眼标控制方法，其特征在于，所述眼标指针的初始位置校准，包括：脸部正对并注视屏幕眼标单次眨眼，得到由眨眼前该注视点的脸部直角坐标系坐标值与屏幕上眼标指针直角坐标系坐标值的初始对应关系，得到眼标指针与脸部的初始位置的一次校准。3.根据权利要求2所述的眼标控制方法，其特征在于，所述眼标指针的灵敏度校准，包括：采用下式对本次眨眼后的眼标指针的灵敏度进行校准：Kx＝/Ky＝/式中，Kx表示水平方向的灵敏度，Ky表示垂直方向的灵敏度，坐标值的下标i-1、i表示上一次及本次的眨眼时刻。4.根据权利要求3所述的眼标控制方法，其特征在于，所述利用所述脸部位置变化对眼标指针进行粗定位；利用眼球的坐标信息对粗定位后的眼标指针进行微调，包括：眨眼结束后一定时间t内检测脸部的坐标变化Δfx，Δfy，得到水平方向及竖直方向上的眼标指针位置变化:ΔX＝KxΔfxΔY＝KyΔfy根据上一次眼标指针位置和眼标指针位置变化，得到屏幕上最新的眼标指针位置：Xi＝Xi-1+ΔXYi＝Yi-1+ΔY利用上一次位置不断更新眼标指针的最新位置，完成眼标指针的粗定位；眨眼t秒后，检测眼球坐标变化Δex，Δey，得到水平方向及竖直方向上的眼标指针位置变化值：ΔX'＝kKxΔexΔY'＝kKyΔey其中，k＝k02t，k0为小于1的一个常数，k为随时间t的增加按指数减小，直到小于0.1，以减小眼标指针的调节量。根据最近一次眼标指针位置和位置变化值，得到屏幕上眼标的最新指针位置：Xi+1＝Xi+ΔX'Yi+1＝Yi+ΔY'按此式，根据眼球坐标位置的变化不断微调眼标指针的位置，直到单次眨眼后再进行眼标指针的初始位置校准。5.根据权利要求4的所述的眼标控制方法，其特征在于，所述检测眼球的坐标位置变化Δex，Δey，包括：若能够识别到两个眼球的位置，则分别确定两眼球上眼球的位置变化值，取两眼球上眼球的位置变化值的平均值作为Δex，Δey；若只识别到一个眼球位置，则确定该眼球上眼球的位置变化值作为Δex，Δey；如果两个眼球均未能识别或者检测的眼球y方向的尺寸小于预先设定的阈值，且未能识别或检测到的时间短于预先设定的时间阈值，则表示眨眼。6.一种存储一个或多个程序的计算机可读存储介质，其特征在于，所述一个或多个程序包括指令，所述指令当由计算设备执行时，使得所述计算设备执行根据权利要求1至5所述的方法中的任一方法。7.一种计算设备，其特征在于，包括，一个或多个处理器、存储器以及一个或多个程序，其中一个或多个程序存储在所述存储器中并被配置为由所述一个或多个处理器执行，所述一个或多个程序包括用于执行根据权利要求1至5所述的方法中的任一方法的指令。
说明书desc
技术领域本发明涉及一种眼标控制方法，属于计算机输入技术领域。背景技术轨迹球用于早期的坐标控制中，在计算机应用中发展成为机械鼠标，从而使原来键盘对应的DOS等操作系统，进入到Windows等图形化操作系统。触摸屏的发展导致了IOS、Android等智能手机操作系统的出现。鼠标、触屏离不开手的操作，但是手的动作需要在眼睛配合下依靠手的移动来实现坐标变化，手的移动与眼睛的不断反馈才能到达所需位置，导致需要秒级的响应时间。同时使用鼠标时，需要在桌面上腾出鼠标移动或鼠标垫的位置并不停地在鼠标与键盘间切换。采用触屏时，同样需要手指与眼睛的互动才能到达指定位置，且存在手指干燥、潮湿或戴手套时导致无法正常触控的可靠性差问题。发明内容本发明所要解决的技术问题是克服现有技术的缺陷，提供一种眼标控制方法。为解决上述技术问题，本发明提供一种眼标控制方法，包括：采集头部视频，利用图像处理的方法识别视频中眼睛、眼球、鼻子、嘴巴并提取其坐标信息；利用所述坐标信息计算出相对屏幕的上下及左右的脸部位置变化，利用所述脸部位置变化对眼标指针进行粗定位；利用眼球的坐标信息对粗定位后的眼标指针进行微调；根据提取的眼睛、眼球、鼻子、嘴巴的坐标信息变化对眼标指针进行校准，并产生左击、双击或右击操作，包括：根据眼睛的坐标信息的变化确定为单次眨眼时，进行眼标指针的初始位置校准及灵敏度校准；在根据眼睛的坐标信息的变化确定为未眨眼时，根据脸部位置变化及眼球的坐标信息进行粗定位及微调，根据眼睛、鼻子、嘴巴的坐标信息的变化判断并进行左击、双击或右击操作。进一步的，所述眼标指针的初始位置校准，包括：脸部正对并注视屏幕眼标单次眨眼，得到由眨眼前该注视点的脸部直角坐标系坐标值与屏幕上眼标指针直角坐标系坐标值的初始对应关系，得到眼标指针与脸部的初始位置的一次校准。进一步的，所述眼标指针的灵敏度校准，包括：采用下式对本次眨眼后的眼标指针的灵敏度进行校准：Kx＝/Ky＝/式中，Kx表示水平方向的灵敏度，Ky表示垂直方向的灵敏度，坐标值的下标i-1、i表示上一次及本次的眨眼时刻。进一步的，所述利用所述脸部位置变化对眼标指针进行粗定位；利用眼球的坐标信息对粗定位后的眼标指针进行微调，包括：眨眼结束后一定时间t内检测脸部的坐标变化Δfx，Δfy，得到水平方向及竖直方向上的眼标指针位置变化:ΔX＝KxΔfxΔY＝KyΔfy根据上一次眼标指针位置和眼标指针位置变化，得到屏幕上最新的眼标指针位置：Xi＝Xi-1+ΔXYi＝Yi-1+ΔY利用上一次位置不断更新眼标指针的最新位置，完成眼标指针的粗定位；眨眼t秒后，检测眼球坐标变化Δex，Δey，得到水平方向及竖直方向上的眼标指针位置变化值：ΔX'＝kKxΔexΔY'＝kKyΔey其中，k＝k02t，k0为小于1的一个常数，k为随时间t的增加按指数减小，直到小于0.1，以减小眼标指针的调节量。根据最近一次眼标指针位置和位置变化值，得到屏幕上眼标的最新指针位置：Xi+1＝Xi+ΔX'Yi+1＝Yi+ΔY'按此式，根据眼球坐标位置的变化不断微调眼标指针的位置，直到单次眨眼后再进行眼标指针的初始位置校准。进一步的，所述检测眼球的坐标位置变化Δex，Δey，包括：若能够识别到两个眼球的位置，则分别确定两眼球上眼球的位置变化值，取两眼球上眼球的位置变化值的平均值作为Δex，Δey；若只识别到一个眼球位置，则确定该眼球上眼球的位置变化值作为Δex，Δey；如果两个眼球均未能识别或者检测的眼球y方向的尺寸小于预先设定的阈值，且未能识别或检测到的时间短于预先设定的时间阈值，则表示眨眼。一种存储一个或多个程序的计算机可读存储介质，所述一个或多个程序包括指令，所述指令当由计算设备执行时，使得所述计算设备执行所述的方法中的任一方法。一种计算设备，包括，一个或多个处理器、存储器以及一个或多个程序，其中一个或多个程序存储在所述存储器中并被配置为由所述一个或多个处理器执行，所述一个或多个程序包括用于执行所述的方法中的任一方法的指令。本发明所达到的有益效果：省去了手动的秒级定位时间，仅利用眼球定位，则可以大大提高控制速度，并解放双手；相对鼠标系统，节省了鼠标垫或鼠标的移动空间，消除了键盘操作时操控鼠标的轮流换手操作；相对触屏系统消除了因手指干燥或潮湿或手套等导致无法触控的问题；实际验证表明，眼标系统能够胜任基本的鼠标功能，且有发展潜力。附图说明图1是眼标控制方法的原理框图；图2是默认的眼标指针示意图；图3是实施后左右眼睛图像及眼球中心位置坐标的检测结果。具体实施方式下面结合附图对本发明作进一步描述。以下实施例仅用于更加清楚地说明本发明的技术方案，而不能以此来限制本发明的保护范围。一种眼标控制方法，包括：通过具有摄像头功能的智能设备，包括手机、个人计算机、笔记本电脑、智能仪器等具有基本视频采集功能及处理能力的设备采集人的头部视频信息。通过图像处理后，识别眼睛、眼球、鼻子、嘴等并求出位置坐标信息及其位置变化，提取注视点对应的眼球坐标信息以及眨眼、嘴巴开闭等动作信息，实现显示屏的眼标指针位置交互及控制命令实施，通过脸部动作交互来实现眼标指针位置调整及眼标灵敏度校准，并产生左击、双击、右击、滑屏等鼠标及触摸屏的常用控制信号。实施例：图1是一实施流程，眼标系统可内置于操作系统或安装眼标控制软件或App来启动。具有使能或禁用眼标系统的配置选项，使能后允许眼标系统工作并与鼠标系统一样与操作系统交互；图2是眼标指针示意图，中间黑色部分是眼睛的注视中心及眼标参考点，并采用对称结构；图3是眼球识别图，其中左图为右眼，右图为左眼。图中的双线及实心线圆周分别对应重心法与霍夫法确定的眼球位置，x及y值为经过融合处理后的眼球圆心坐标值。视频采集处理及脸部信息识别与定位启动眼标系统后，系统利用固定于屏幕上的摄像头开始采集图像，利用各图像帧进行脸部、眼睛、眼球、鼻子、嘴等的识别。脸及各器官识别时，均以图像中识别框的左上角为原点，水平方向为x轴，垂直方向为y轴。通过脸部识别，确定脸部识别框及坐标。截取上半脸，分别识别左眼及右眼，取得左右眼的识别框。从左眼及右眼识别框中再分别通过重心法及霍夫法，并经过融合处理来分别取得眼球中心的坐标值。.以脸部识别框的垂直方向中心线为中心，经过左眼球中心的水平线为顶端，截取半脸宽为边长的正方形图像，来识别鼻子及位置。利用脸部识别框的下半部分图像，识别嘴及位置。通过图像中双眼与脸部中心位置的距离差，确定头部与屏幕之间的水平相对位置fx，通过鼻子与双眼及嘴巴间的垂直距离变化确定垂直方向上的垂直相对位置fy，从而确定脸部的坐标值。根据前后帧的位置、大小、形状变化来分析提取眨眼、瞪眼、闭眼、张嘴等动作信息。眼标初始位置及灵敏度的校准头部与屏幕的相对位置经常会发生变化，导致眼睛视线与眼标位置不能对应，眼睛不适可能导致的自然眨眼或有意的眨眼均可触发眼标校准。面向及注视屏幕眼标指针后单次眨眼，得到一个新的脸部初始位置与眼标指针位置的实际对应关系，从而实现眼标指针初始位置的一次校准，使得眼睛注视位置与眼标指针的位置一致。为了防止智能设备或头部的相对运动破坏与眼标指针的移动轨迹对应关系，每次眨眼时，需要结合上一次的坐标值实现一次灵敏度校准，确保注视点与眼标指针移动轨迹保持一致，即取得水平及垂直方向上的灵敏度：Kx＝/，Ky＝/。眼标位置产生及响应根据脸部及眼球坐标信息计算出显示屏的眼标指针位置，包括：眨眼结束后一定时间t内检测脸部的坐标位置变化平滑值Δfx，Δfy，得到x方向及y方向上的眼标指针位置变化ΔX＝KxΔfx，ΔY＝KyΔfy。根据上一次眼标指针位置和眼标指针位置变化，得到屏幕上最新的眼标指针位置Xi＝Xi-1+ΔX，Yi＝Yi-1+ΔY。从而利用上一次位置不断更新眼标指针的最新位置，完成眼标的粗定位。眨眼t秒后，检测眼球坐标位置变化Δex，Δey，得到x方向及y方向上的眼标指针位置变化值：ΔX'＝kKxΔex，ΔY'＝kKyΔey。其中，k＝k02t，k0为小于1的一个常数，k随时间t的增加按指数减小，直到小于0.1以提高眼标指针的稳定性。根据最近一次眼标指针位置和位置变化值，得到屏幕上眼标的最新指针位置：Xi+1＝Xi+ΔX'，Yi+1＝Yi+ΔY'。从而利用原来位置微调眼标指针的最新位置。重复根据眼球位置变化来微调眼标指针的位置，直到眨眼后再改变眼标初始位置，以及调整眼标灵敏度。当眼标指针移动到按键区等特殊位置时，控制系统通过改变眼标指针形状或改变按键色彩等反馈形式以提示操作者的定位正确与否。双眼眼球位置的融合处理若能够识别到两个眼球的位置，则分别确定两眼球上眼球的位置变化值，取两眼球上眼球的位置变化值的平均值作为Δex，Δey；若只识别到一个眼球位置，则确定该眼球上眼球的位置变化值作为Δex，Δey；如果两个眼球均未能识别或者检测的眼球y方向的尺寸小于预先设定的阈值，且未能识别或检测到的时间短于预先设定的时间阈值，则表示眨眼。眼标操作信号产生眼标左击通过视频处理得到的瞪眼结合可选的张闭嘴巴或点头来实现，两次快速的瞪眼结合可选的两次张闭嘴巴或两次点头实现眼标双击。瞪眼或开嘴时移动视线来实现拖动窗口或对象或滑动显示屏，睁一只眼闭一只眼表示右击，闭眼表示撤销最近操作等。相应的本发明还提供一种存储一个或多个程序的计算机可读存储介质，所述一个或多个程序包括指令，所述指令当由计算设备执行时，使得所述计算设备执行所述的方法中的任一方法。相应的本发明还提供一种计算设备，包括，一个或多个处理器、存储器以及一个或多个程序，其中一个或多个程序存储在所述存储器中并被配置为由所述一个或多个处理器执行，所述一个或多个程序包括用于执行所述的方法中的任一方法的指令。本领域内的技术人员应明白，本申请的实施例可提供为方法、系统、或计算机程序产品。因此，本申请可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本申请可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本申请是参照根据本申请实施例的方法、设备、和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明技术原理的前提下，还可以做出若干改进和变形，这些改进和变形也应视为本发明的保护范围。
