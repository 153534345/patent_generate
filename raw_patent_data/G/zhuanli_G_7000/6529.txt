标题title
空气质量集合预报方法、装置、设备和可读存储介质
摘要abst
本公开的实施例提供了空气质量集合预报方法、装置、设备和计算机可读存储介质。所述方法包括：对各站点的气象信息进行扰动，然后输入至气象模式，以获得所述各站点在预报时刻的多组气象场，所述气象信息包括以下至少一项：初始气象以及所述气象模式的模式参数；根据所述多组气象场进行集合平均，获得目标气象场；将所述目标气象场输入至所述空气质量模式中，以获得所述各站点在预报时刻的空气质量预报结果。以此方式，可确保获得的预报时刻的空气质量预报结果更为准确，误差也更小，更加接近真实的空气质量预报结果。
权利要求书clms
1.一种空气质量集合预报方法，其特征在于，包括：对各站点的气象信息进行扰动，然后输入至气象模式，以获得所述各站点在预报时刻的多组气象场，所述气象信息包括以下至少一项：初始气象以及所述气象模式的模式参数；根据所述多组气象场进行集合平均，获得目标气象场；将所述目标气象场输入至所述空气质量模式中，以获得所述各站点在预报时刻的空气质量预报结果。2.根据权利要求1所述的方法，其特征在于，所述对各站点的气象信息进行扰动，然后输入至气象模式，以获得所述各站点在预报时刻的多组气象场，包括：对各站点的气象信息进行扰动，然后分别输入至一个或多个气象模式中，以获得所述各站点在所述预报时刻的多组气象场；所述根据所述多组气象场进行集合平均，获得目标气象场，包括：将所述多组气象场进行加权求和，以获得预报时刻的目标气象场。3.根据权利要求1所述的方法，其特征在于，所述方法还包括：利用排放源处理系统获得所述各站点的模拟区域在预报时刻的网格化排放清单；将所述预报时刻的网格化排放清单进行扰动，得到多组网格化排放清单；将所述空气质量模式的初始质量模式参数进行扰动，以获得多组质量模式参数；所述将所述目标气象场输入至所述空气质量模式中，以获得所述各站点在预报时刻的空气质量预报结果，包括：将所述目标气象场、所述多组网格化排放清单以及所述多组质量模式参数输入至所述空气质量模式中，以获得所述各站点在预报时刻的多组空气质量预报结果。4.根据权利要求3所述的方法，其特征在于，所述将所述目标气象场、所述多组网格化排放清单以及所述多组质量模式参数输入至所述空气质量模式中，以获得所述各站点在预报时刻的多组空气质量预报结果，包括：将所述目标气象场、所述多组网格化排放清单以及所述多组质量模式参数进行随机组合，得到多组随机组合输入参数；将所述多组随机组合输入参数，分别输入至一个或多个所述空气质量模式中，以获得所述各站点在预报时刻的多组空气质量预报结果。5.根据权利要求3或4所述的方法，其特征在于，所述方法还包括：对所述多组空气质量预报结果进行集合平均，以得到所述各站点在预报时刻的集合预报结果。6.根据权利要求5所述的方法，其特征在于，所述对所述多组空气质量预报结果进行集合平均，以得到所述各站点在预报时刻的集合预报结果，包括：获取所述各站点在预设历史时间段内的空气质量扰动序号集；其中，所述空气质量扰动序号集中每个扰动序号分别对应有所述各站点在所述预设历史时间段的不同时刻的空气质量预报结果和空气质量实际值；计算所述空气质量扰动序号集中每个扰动序号对应的误差，其中，所述每个扰动序号对应的误差包括：所述每个扰动序号在所述预设时间段内对应的均方根误差或者所述每个扰动序号在所述预设时间段内的每个时刻下对应的预报偏差；按照所述每个扰动序号对应的误差从小到大的顺序，选择误差最小的前N个扰动序号作为所述各站点的集合子集；根据所述各站点的集合子集中每个扰动序号，从所述多组空气质量预报结果中选择扰动序号相同的预报结果；获取所述各站点的集合子集中每个扰动序号对应的权重系数；根据所述每个扰动序号对应的权重系数以及所述扰动序号相同的预报结果，得到所述各站点在预报时刻的集合预报结果。7.根据权利要求6所述的方法，其特征在于，获取所述各站点的集合子集中每个扰动序号对应的权重系数，包括：计算所述各站点的集合子集中每个扰动序号对应的空气质量预报误差；根据所述各站点的集合子集中每个扰动序号对应的空气质量预报误差和/或所述每个扰动序号在不同时刻的空气质量预报结果与空气质量实际值之间的相关系数，确定所述各站点的集合子集中每个扰动序号对应的权重系数，其中，权重系数与所述空气质量预报误差成负相关，以及与所述相关系数成正相关。8.根据权利要求7所述的方法，其特征在于，所述根据所述每个扰动序号对应的权重系数以及所述扰动序号相同的预报结果，得到所述各站点在预报时刻的集合预报结果，包括：将所述集合子集中每个扰动序号对应的权重系数依次作为在所述多组空气质量预报结果中扰动序号相同的预报结果的权重系数；根据所述扰动序号相同的预报结果的权重系数对所述扰动序号相同的预报结果进行加权求和，以获得所述各站点在预报时刻的集合预报结果。9.一种空气质量集合预报装置，其特征在于，包括：扰动模块，用于对各站点的气象信息进行扰动，然后输入至气象模式，以获得所述各站点在预报时刻的多组气象场，所述气象信息包括以下至少一项：初始气象以及所述气象模式的模式参数；计算模块，用于根据所述多组气象场进行集合平均，获得目标气象场；处理模块，用于将所述目标气象场输入至所述空气质量模式中，以获得所述各站点在预报时刻的空气质量预报结果。10.一种电子设备，包括存储器和处理器，所述存储器上存储有计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求1～8中任一项所述的方法。11.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述程序被处理器执行时实现如权利要求1～8中任一项所述的方法。
说明书desc
技术领域本公开的实施例一般涉及空气质量预报技术领域，并且更具体地，涉 及空气质量集合预报方法、装置、设备和计算机可读存储介质。背景技术大气和大气化学模式都是高度非线性的的系统，模式初始场、模式中 的各类参数化方案和不同模式都存在微小误差，这些误差会随时间积分而 出现非线性离散。如图1所示，在起报时间t0，初始场的大气状态和真实 的大气状态的误差非常小，随着模式积分时间的加长，这种误差被不断放 大，到t0+n时刻，预报的大气状态和真实的大气状态差距会非常大。而对 于初始场，由于人为的、仪器的、观测网络覆盖率及同化和客观分析方法 的影响总会存在误差，永远只可能是实际大气的一种近似值。同样不同的 模式和不同的参数化方案也只是实际大气物理和化学过程中的一种近似处 理，存在较大误差。为了消除初值、参数化方案和模式本身的误差对预报 结果造成的影响，人们提出集合预报的思想。集合预报方法最早主要应用在中短期天气预报及气候预测上。而随着 空气质量模式的发展，空气质量预报也逐渐引入集合预报的方法。唐晓在 “北京地面O3的集合预报试验”中对包括排放源、气象场在内的151个模 式输入参数进行了扰动，模拟了北京某一段时间的一次臭氧过程，结果表 明与原确定性预报相比，集合预报对臭氧的预报准确率更高。但是这个方法只考虑了排放源、气象场和空气质量模式的模式参数的 不确定性，未考虑空不同空气质量模式的不确定性。且这种方法在进行空 气质量集合预报时，是先模拟得到一组气象场，然后对该气象场进行随机扰动， 同时对排放源和空气质量模式的模式参数进行随机扰动。该方法计算量非 常大，例如对气象场和排放源对应的网格化排放清单各进行10次随机扰动，通过随机组合输入一个空气质量模式，这样就需要有110组计算，且110 组计算同时进行，需要较多的计算资源。同时，该方法并未消除气象模式 的预报误差，对一个气象场进行10次扰动生成的10个气象场中，理论上 只有一个最接近真实大气，其余气象场的误差较大，输入到空气质量模式 中会造成大部分空气质量模式的预报误差较大，进而影响集合预报效果。发明内容根据本公开的实施例，提供了一种空气质量集合预报方案。在本公开的第一方面，提供了一种空气质量集合预报方法。该方法包 括：对各站点的气象信息进行扰动，然后输入至气象模式，以获得所述各 站点在预报时刻的多组气象场，所述气象信息包括以下至少一项：初始气 象以及所述气象模式的模式参数；根据所述多组气象场进行集合平均，获得目标气象场；将所述目标气象场输入至所述空气质量模式中，以获得所述各站点在 预报时刻的空气质量预报结果。如上所述的方面和任一可能的实现方式，进一步提供一种实现方式，所述对各站点的气象信息进行扰动，然后输入至气象模式，以获得所 述各站点在预报时刻的多组气象场，包括：对各站点的气象信息进行扰动，然后分别输入至一个或多个气象模式 中，以获得所述各站点在所述预报时刻的多组气象场；所述根据所述多组气象场进行集合平均，获得目标气象场，包括：将所述多组气象场进行加权求和，以获得预报时刻的目标气象场。如上所述的方面和任一可能的实现方式，进一步提供一种实现方式，利 用排放源处理系统获得所述各站点的模拟区域在预报时刻的网格化排放清 单；将所述预报时刻的网格化排放清单进行扰动，得到多组网格化排放清 单；将所述空气质量模式的初始质量模式参数进行扰动，以获得多组质量 模式参数；所述将所述目标气象场输入至所述空气质量模式中，以获得所述各站 点在预报时刻的空气质量预报结果，包括：将所述目标气象场、所述多组网格化排放清单以及所述多组质量模式 参数输入至所述空气质量模式中，以获得所述各站点在预报时刻的多组空 气质量预报结果。如上所述的方面和任一可能的实现方式，进一步提供一种实现方式，所 述将所述目标气象场、所述多组网格化排放清单以及所述多组质量模式参 数输入至所述空气质量模式中，以获得所述各站点在预报时刻的多组空气 质量预报结果，包括：将所述目标气象场、所述多组网格化排放清单以及所述多组质量模式 参数进行随机组合，得到多组随机组合输入参数；将所述多组随机组合输入参数，分别输入至一个或多个所述空气质量 模式中，以获得所述各站点在预报时刻的多组空气质量预报结果。如上所述的方面和任一可能的实现方式，进一步提供一种实现方式，所 述方法还包括：对所述多组空气质量预报结果进行集合平均，以得到所述各站点在预 报时刻的集合预报结果。如上所述的方面和任一可能的实现方式，进一步提供一种实现方式，所 述对所述多组空气质量预报结果进行集合平均，以得到所述各站点在预报 时刻的集合预报结果，包括：获取所述各站点在预设历史时间段内的空气质量扰动序号集；其中， 所述空气质量扰动序号集中每个扰动序号分别对应有所述各站点在所述预 设历史时间段的不同时刻的空气质量预报结果和空气质量实际值；计算所述空气质量扰动序号集中每个扰动序号对应的误差，其中，所 述每个扰动序号对应的误差包括：所述每个扰动序号在所述预设时间段内 对应的均方根误差或者所述每个扰动序号在所述预设时间段内的每个时刻 下对应的预报偏差；按照所述每个扰动序号对应的误差从小到大的顺序，选择误差最小的 前N个扰动序号作为所述各站点的集合子集；根据所述各站点的集合子集中每个扰动序号，从所述多组空气质量预 报结果中选择扰动序号相同的预报结果；获取所述各站点的集合子集中每个扰动序号对应的权重系数；根据所述每个扰动序号对应的权重系数以及所述扰动序号相同的预报 结果，得到所述各站点在预报时刻的集合预报结果。如上所述的方面和任一可能的实现方式，进一步提供一种实现方式，获 取所述各站点的集合子集中每个扰动序号对应的权重系数，包括：计算所述各站点的集合子集中每个扰动序号对应的空气质量预报误差；根据所述各站点的集合子集中每个扰动序号对应的空气质量预报误差 和/或所述每个扰动序号在不同时刻的空气质量预报结果与空气质量实际值 之间的相关系数，确定所述各站点的集合子集中每个扰动序号对应的权重系 数，其中，权重系数与空气质量预报误差成负相关，以及与所述相关系数成 正相关。如上所述的方面和任一可能的实现方式，进一步提供一种实现方式，所 述根据所述每个扰动序号对应的权重系数以及所述扰动序号相同的预报结 果，得到所述各站点在预报时刻的集合预报结果，包括：将所述集合子集中每个扰动序号对应的权重系数依次作为在所述多组 空气质量预报结果中扰动序号相同的预报结果的权重系数；根据所述扰动序号相同的预报结果的权重系数对所述扰动序号相同的 预报结果进行加权求和，以获得所述各站点在预报时刻的集合预报结果。在本公开的第二方面，提供了一种空气质量集合预报装置。该装置包 括：扰动模块，用于对各站点的气象信息进行扰动，然后输入至气象模式， 以获得所述各站点在预报时刻的多组气象场，所述气象信息包括以下至少 一项：初始气象以及所述气象模式的模式参数；计算模块，用于根据所述多组气象场进行集合平均，获得目标气象场；处理模块，用于将所述目标气象场输入至所述空气质量模式中，以获 得所述各站点在预报时刻的空气质量预报结果。在本公开的第三方面，提供了一种电子设备。该电子设备包括：存储 器和处理器，所述存储器上存储有计算机程序，所述处理器执行所述程序 时实现如以上所述的方法。在本公开的第四方面，提供了一种计算机可读存储介质，其上存储有计算 机程序，所述程序被处理器执行时实现如根据本公开的第一方面和/或第二发 面的方法。应当理解，发明内容部分中所描述的内容并非旨在限定本公开的实施例的 关键或重要特征，亦非用于限制本公开的范围。本公开的其它特征将通过以下 的描述变得容易理解。附图说明结合附图并参考以下详细说明，本公开各实施例的上述和其他特征、 优点及方面将变得更加明显。在附图中，相同或相似的附图标记表示相同 或相似的元素，其中：图1示出了大气状态变化示意图；图2示出了根据本公开的实施例的一种空气质量集合预报方法的流程 图；图3示出了根据本公开的实施例的另一种空气质量集合预报方法的流 程图；图4示出了根据本公开的实施例的又一种空气质量集合预报方法的流 程图；图5示出了根据本公开的实施例的空气质量集合预报装置的方框图；图6示出了能够实施本公开的实施例的示例性电子设备的方框图。具体实施方式为使本公开实施例的目的、技术方案和优点更加清楚，下面将结合本公 开实施例中的附图，对本公开实施例中的技术方案进行清楚、完整地描述， 显然，所描述的实施例是本公开一部分实施例，而不是全部的实施例。基于 本公开中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获 得的全部其他实施例，都属于本公开保护的范围。另外，本文中术语“和/或”，仅仅是一种描述关联对象的关联关系，表 示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在 A和B，单独存在B这三种情况。另外，本文中字符“/”，一般表示前后关 联对象是一种“或”的关系。本公开中，对多组气象场进行集合平均，以获得预报时刻最接近真实 大气的目标气象场，然后将目标气象场输入至空气质量模式中，即可获得 各站点在预报时刻的空气质量预报结果，而由于这种空气质量集合预报方 式考虑了气象模式的输入场以及气象模式的模式参数的不确定性，并削弱 了偏差较大的气象场对空气质量预报结果的准确度影响，因而，可确保获 得的预报时刻的空气质量预报结果更为准确，误差也更小，更加接近真实的空气质量预报结果。图2示出了根据本公开实施例的用于空气质量集合预报方法200的流 程图。如图2所示，所述空气质量集合预报方法200包括步骤210至步骤 230：在步骤210中，对各站点的气象信息进行扰动，然后输入至气象模式， 以获得所述各站点在预报时刻的多组气象场，所述气象信息包括以下至少 一项：初始气象以及所述气象模式的模式参数；气象模式包括但不限于WRF、 中尺度气象模式MM5、T639等。初始气象指的是气象模式的输入场或者初始场。另外，本领域技术人员应当理解的是：为了更精细地进行扰动，从而 得到各站点在预报时刻准确的气象场，“对各站点的气象信息进行扰动，然后输入至气象模式，以获得所述 各站点在预报时刻的多组气象场”包括：对各站点的模拟区域进行网格化，然后对各站点的网格化的气象信息 进行扰动，并将网格化的气象信息输入至气象模式中，最后再利用插值算 法，获得各站点在预报时刻的多组气象场。当然，这里的网格化与下文中排放源处理系统的网格化排放清单中的 网格化粒度应该保持一致，比如都是将模拟区域按照3公里*3公里的区域 标准划分为一个网格。在步骤220中，根据所述多组气象场进行集合平均，获得目标气象场；在步骤230中，将所述目标气象场输入至所述空气质量模式中，以获 得所述各站点在预报时刻的空气质量预报结果。通过对各站点的气象信息进行扰动，然后输入至气象模式中，可得到 多组气象场，进而，对多组气象场进行集合平均，可获得预报时刻最接近 真实大气的目标气象场，然后将目标气象场输入至空气质量模式中，即可 获得各站点在预报时刻的空气质量预报结果，而由于这种空气质量集合预 报方式考虑了气象模式的输入场以及气象模式的模式参数的不确定性，并 削弱了偏差较大的气象场对空气质量预报结果的准确度影响，因而，可确 保获得的预报时刻的空气质量预报结果更为准确，误差也更小，更加接近 真实的空气质量预报结果。在一个实施例中，所述对各站点的气象信息进行扰动，然后输入至气 象模式，以获得所述各站点在预报时刻的多组气象场，包括：对各站点的气象信息进行扰动，然后分别输入至一个或多个气象模式 中，以获得所述各站点在所述预报时刻的多组气象场；所述根据所述多组气象场进行集合平均，获得目标气象场，包括：将所述多组气象场进行加权求和，以获得预报时刻的目标气象场。通过对各站点的气象信息进行扰动，得到多组扰动气象信息，然后分 别输入至一个或多个气象模式中，即可得到各站点预报时刻的多组气象场， 然后对多组气象场进行加权求和，即可剔除气象模式的虚假误差，获得预 报时刻更加逼近真实气象场的目标气象场，且本实施例又考虑了不同气象 模式的不确定性对空气质量预报结果的影响，即考虑了气象模式的输入场、 气象模式的模式参数和气象模式的不确定性，又剔除了虚假误差，因而， 可以更加准确地进行空气质量预报，使得预报时刻的空气质量更加接近真 实的空气质量。在一个实施例中，所述方法还包括：利用排放源处理系统获得所述各站点的模拟区域在预报时刻的网格化 排放清单；将所述预报时刻的网格化排放清单进行扰动，得到多组网格化排放清 单；将所述空气质量模式的初始质量模式参数进行扰动，以获得多组质量 模式参数；所述将所述目标气象场输入至所述空气质量模式中，以获得所述各站 点在预报时刻的空气质量预报结果，包括：将所述目标气象场、所述多组网格化排放清单以及所述多组质量模式 参数输入至所述空气质量模式中，以获得所述各站点在预报时刻的多组空 气质量预报结果。通过将预报时刻的网格化排放清单进行扰动可得到多组网格化排放清 单，而将空气质量模式的初始质量模式参数进行扰动，同样也可以获得多 组质量模式参数，然后将目标气象场、所述多组网格化排放清单以及所述 多组质量模式参数输入至所述空气质量模式之后，由于综合考虑了气象模 式输入场的不确定性、气象模式的模式参数的不确定性、排放源的不确定 性以及空气质量模式的质量模式参数的不确定性对空气质量预报结果的影 响，因而，可确保获得所述各站点在预报时刻的多组空气质量预报结果的 准确性，而由于本实施例综合考虑了各种不确定性，因而，在一定程度上 也使得空气质量预报结果更加丰富、全面。另外，通过本申请可减少计算量，例如：同样是对气象场和网格化排放清单各进行10次随机扰动，本发明先对 气象场的输入场、气象模式的模式参数进行10次扰动，生成10组气象场， 取集合平均后得到一组目标气象场，然后再对网格化排放清单进行10次扰 动，和目标气象场共同输入空气质量模式进行10组计算，一共需要20组 计算，且20组计算分成两 次，每次10组计算，这相比于现有技术需要110组计算而言，计算资源显然更加节省资源，空气 质量预报结果的计算效率显然也会更高、更准确。在一个实施例中，所述将所述目标气象场、所述多组网格化排放清单 以及所述多组质量模式参数输入至所述空气质量模式中，以获得所述各站 点在预报时刻的多组空气质量预报结果，包括：将所述目标气象场、所述多组网格化排放清单以及所述多组质量模式 参数进行随机组合，得到多组随机组合输入参数；将所述多组随机组合输入参数，分别输入至一个或多个所述空气质量 模式中，以获得所述各站点在预报时刻的多组空气质量预报结果。通过将多组随机组合输入参数，分别输入至一个或多个所述空气质量 模式中，就不仅考虑到了气象模式输入场的不确定性、气象模式的模式参 数的不确定性、排放源的不确定性、空气质量模式的质量模式参数的不确 定性对空气质量预报结果的影响，还考虑到了空气质量模式的不确定性对 空气质量预报结果的影响，即在考虑了更多的不确定性同时有效剔除了气 象模式的虚假误差，因而，可进一步提高所述各站点在预报时刻的多组空气质量预报结果的准确性，进而提高空气质量集合预报结果的准确性。在一个实施例中，所述方法还包括：对所述多组空气质量预报结果进行集合平均，以得到所述各站点在预 报时刻的集合预报结果。通过对多组空气质量预报结果进行集合平均，可确保预报时刻的空气 质量预报结果更为精准，更加逼近真实的空气质量情况。在一个实施例中，所述对所述多组空气质量预报结果进行集合平均， 以得到所述各站点在预报时刻的集合预报结果，包括：获取所述各站点在预设历史时间段内的空气质量扰动序号集；其中， 所述空气质量扰动序号集中每个扰动序号分别对应有所述各站点在所述预 设历史时间段的不同时刻的空气质量预报结果和空气质量实际值；每个扰动序号对应一种扰动情况。计算所述空气质量扰动序号集中每个扰动序号对应的误差；其中，所 述每个扰动序号对应的误差包括：所述每个扰动序号在所述预设时间段内 对应的均方根误差或者所述每个扰动序号在所述预设时间段内的每个时刻 下对应的预报偏差；按照所述每个扰动序号对应的误差从小到大的顺序，选择误差最小的 前N个扰动序号作为所述各站点的集合子集；根据所述各站点的集合子集中每个扰动序号，从所述多组空气质量预 报结果中选择扰动序号相同的预报结果；获取所述各站点的集合子集中每个扰动序号对应的权重系数；根据所述每个扰动序号对应的权重系数以及所述扰动序号相同的预报 结果，得到所述各站点在预报时刻的集合预报结果。误差越小表示在该扰动序号对应的扰动情况下，空气质量预报结果越 准越接近空气质量实际值，因而，应该从空气质量扰动序号集中选择出误 差最小的前N个扰动序号，然后从所述多组空气质量预报结果中选择扰动 序号相同的预报结果，以剔除了预报误差较大的空气质量预报结果对集合 预报结果的影响，然后基于每个扰动序号对应的权重系数，即可准确获得 各站点在预报时刻的集合预报结果。其次，本实施例默认，多组空气质量预报结果中扰动序号相同的预报 结果与空气质量扰动序号集中具有相同扰动序号的空气质量预报结果的扰 动情况完全相同，例如：假设，空气质量扰动序号集＝{1，2，3，……z}， 且空气质量扰动序号集中均方根误差最小的前N个扰动序号为1～N，则说 明扰动序号为1～N的前N个扰动情况下的空气质量预报更为准确，剩余的 N～z个扰动情况下的空气质量预报误差较大，对集合预报的准确性的影响更大，因而，应该从预报时刻的多组空气质量预报结果选择相同扰动情况 下的空气质量预报结果，而由于同一种扰动情况对应的扰动序号相同，因 而，应该从多组空气质量预报结果中选择扰动序号分别为1～N个的空气质 量预报结果，然后进行集合平均，以得到该预报时刻的集合预报结果。另 外，扰动情况指的是扰动种类以及扰动幅度。另外，预设历史时间段可以是过去12小时、24小时、48小时或者与 预报时刻相同的时刻。预报时刻也可以是1个时间点或者 多个时间点如未来24小时。进一步地，求取述空气质量扰动序号集中每个扰动序号对应的误差的 方式有两种：第一种：求取每个扰动序号在所述预设时间段内的每个时刻下对应的 预报偏差，即对预设历史时间段内每个时刻都求取一个预报偏差，然后选择与预报时刻相同的时刻下的 预报偏差最小的前N个扰动序号作为各站点在该时刻下的集合子集，进而 从预报时刻的多组空气质量预报结果中选择扰动序号相同的预报结果进行 集合平均，这样如果预报时刻有多个，就需要确定所述预设历史时间段内 每个相同时刻下的预报偏差最小的前N个扰动序号，进而从每个预报时刻 的多组空气质量预报结果中选择扰动序号相同的预报结果进行集合平均。 这种方式，计算量大，但是由于考虑了同一扰动在不同时刻下对预报结果 影响可能不同，因而，每个预报时刻的精准度显然更高；第二种：无论预报时刻是哪个时刻以及预报时刻是有一个还是多个， 均求取每个扰动序号在所述预设时间段内对应的均方根误差，即根据每个 扰动序号在预设时间段内不同时刻下的空气质量预报结果和空气质量实际 值，求取该扰动序号对应的均方根误差，然后选择均方根误差最小的前N 个扰动序号，这样，无论预报时刻怎样，都选择相同扰动序号下的空气质 量预报结果进行集合平均，如此，计算工作量会小，只是由于无论哪个时 刻都选择了相同扰动序号的空气质量预报结果，未考虑同一扰动不同时刻 下对预报结果影响可能不同，因而，每个预报时刻的精准度没有第一种高。在一个实施例中，获取所述各站点的集合子集中每个扰动序号对应的 权重系数，包括：计算所述各站点的集合子集中每个扰动序号对应的空气质量预报误差；每个扰动序号对应的空气质量预报误差即：在每个扰动序号对应的扰 动情况下，不同时刻的空气质量预报结果与空气质量实际值之间的差值的 绝对值。根据所述各站点的集合子集中每个扰动序号对应的空气质量预报误差 和/或所述每个扰动序号在不同时刻的空气质量预报结果与空气质量实际 值之间的相关系数，确定所述各站点的集合子集中每个扰动序号对应的权 重系数，其中，权重系数与空气质量预报误差成负相关，以及与所述相关 系数成正相关。通过计算每个扰动序号对应的空气质量预报误差和/或每个扰动序号 在不同时刻的空气质量预报结果与空气质量实际值之间的相关系数即可准 确计算每个扰动序号对应的权重系数，以便于对每个扰动序号对应的空气 质量预报结果进行加权求和，具体地，空气质量预报误差越大，说明该扰 动序号对应的扰动情况下的空气质量预报结果与真实值的偏离越大，那么 预报时刻下该扰动序号对应的空气质量预报结果在集合预报中的占比就应 该越小，即空气质量预报误差与权重系数成负相关，当然，如果相关系数 越大，说明该扰动序号对应的扰动情况下的空气质量预报结果还是越接近 真实值的，该扰动序号对应的扰动情况下的空气质量预报结果在集合预报 中占比应该越多，从而便于提高集合预报的准确性，因而，相关系数应该 与权重系数成正相关，从而进一步通过每个扰动序号对应的权重系数减弱 或增强该扰动情况对集合预报的影响，这自然进一步增强了空气质量预报 结果的准确性。在一个实施例中，所述根据所述每个扰动序号对应的权重系数以及所 述扰动序号相同的预报结果，得到所述各站点在预报时刻的集合预报结果， 包括：将所述集合子集中每个扰动序号对应的权重系数依次作为在所述多组 空气质量预报结果中扰动序号相同的预报结果的权重系数；根据所述扰动序号相同的预报结果的权重系数对所述扰动序号相同的 预报结果进行加权求和，以获得所述各站点在预报时刻的集合预报结果。由于无论是过去还是未来预报，本发明默认扰动序号相同对应的扰动情 况相同，因而，在将所述集合子集中每个扰动序号对应的权重系数依次作 为在所述多组空气质量预报结果中扰动序号相同的预报结果的权重系数之 后，即可利用扰动序号相同的预报结果的权重系数对所述扰动序号相同的 预报结果进行加权求和，即将预报时刻的多组空气质量预报结果筛选出的 扰动序号相同的预报结果与这些预报结果分别对应的权重系数先相乘再求 和，从而更为准确地获得所述各站点在预报时刻的集合预报结果。当然， 如果预报时刻有多个，对从每个时刻的多组空气质量预报将结果中选择出 的扰动序号相同的预报结果都应该进行一次加权求和。下面将结合图3进一步详细说明本发明的另一实施方式，一种空气质 量集合预报方法300的步骤至 只是为了方便理解，并不是方法300中每个步骤的具体编号，所以， 图3并未显示至)包括：利用气象模式计算得出预报时刻的气象场；利用排放源处理系统得到站点的模拟区域的网格化排放清单；对第步生成的气象场进行随机扰动，生成多组气象场；对第步生成的网格化排放清单进行随机扰动，生成多组网 格化排放清单；对质量模式参数进行随机扰动生成多组质量模式参数；将气象场、网格化排放清单和质量模式参数进行随机组合得到多 组空气质量模式的输入参数；上述多组输入参数输入单个空气质量模式进行积分得到多组空气 质量预报结果；对多组空气质量预报结果取集合平均得到空气质量集合预报结果。下面将再结合图4进一步详细说明本发明的另一实施方式，一种空气 质量集合预报方法400的步骤 至只是为了方便理解，并不是方法400中每个步骤的具体编号，所 以，图4并未显示至)包括：对气象模式的初始场、气象模式的模式参数进行扰动，输入 至多个气象模式中，对时间进行积分，生成预报时刻的多组气象场；对第步的多组气象场取集合平均得到一组最接近实际大气 的目标气象场；在取集合平均时，考虑到气象场的连续性，对各成员取算术平均即可；利用排放源处理系统得到各站点模拟区域的预 报时刻的网格化排放清单；如：基于GIS 对模拟区域进行网格划分，将初始污染源排放数据分配 到所划分的网格中，得到预报时刻的网格化排放清单；对第步生成的网格化排放清单进行随机扰动，生成多组网 格化排放清单；由于不同天中同一时刻的网格化排放清单相对固定，所以，对生成的 网格化排放清单进行扰动即可。对质量模式参数进行随机扰动生成多组质量模式参数；将目标气象场、网格化排放清单和质量模式参数进行随机组合得 到多组空气质量模式的 输入参数；将第步的多组模式输入参数输入多个空气质量模式进行积 分得到各站点的多组空气质量预报结果；进而对多组空气质量预报结果进 行集合平均，从而得到空气质量集合预报结果，而集合平均的具体详细步 骤为步骤至步骤。对第步的空气质量预报结果取集合平均时，先确定各站点 集合子集的集合成员。具体步骤是：在对空气质量预报结 果取集合平均时，选取集合成员时先计算集合成员的均方根误差，其中，i为监测站点，j为集合样本序号，T为统 计总小时数，选前一天的预报结果即为24，为t时刻集合成员j在 观测站点i的空气质量预报值，为t时刻在观测站点i的空气质量观测值。按照均方根误差从小到大的顺序，在不同的站点，选取均方根误差最 小的20组试验作为该站点的集合子集。在对第步集合子集各集合成员取集合平均时，因空气质量 模式的日预报误差存在一定的时间自相关性，模式日预报误差与前一日预 报误差有较强的相关性，因此根据集合成员对该站点前一天的预报误差确 定各集合成员的权重，预报误差小的占的权重较大，具体做法是前一天模 式预报值和观测值的绝对偏差的倒数为权重，Modeli,j为集合子 集成员j对i站点前一天的预报日均值步中进行求和再 求平均)，Obsi为i站点前一天的监测日均值步中进行求 和再求平均)。20个集合成员，将i站点每个集合成员的权重归一化为根据集合成员的权重和集合成员预报值，确定每个监测站点的 集合平均预报值。具体步骤是用该站点各集合成员的权重值乘以今天的集 合成员的预报值，i站点的集合平均值为即Model′ti,j表示从多组空气质量预报结 果选出的第j个扰动序号的空气质量预报结果。或者第步骤可以更换为：确定集合子集中各集合成员权重时，将集合成员对该站点前一天的预 报的绝对偏差的倒数和相关系数的乘积确定为权重。式中Modeli,j为集合子集成员j对i站点前 一天的预报日均值，为前一天模式的逐时预报值即为t时刻集合成 员j在观测站点i的空气质量预报值；Obsi为i站点前一天的监测值，为 前一天的逐时监测值，即t时刻在观测站点i的空气质量观测值。20个集 合成员，i站点每个集合成员的权重为相应地，第 步骤的Wi,j也应该适应性更新。本公开采用这种方式，可在集合子集的选择上考虑了均方根误差，在 确定集合成员权重时综合考虑绝对偏差和相关系数。如此，在集合平均时 就综合考虑了均方根误差、相关系数和绝对偏差，有利于充分提高集合预 报的准确度。在本公开中，对各站点在预设历史时间段内的空气质量扰动序号集中 在预设时长内均未被选入各站点的集合子集的扰动序号进行删除，和/或更 新该扰动序号对应的扰动情况，该扰动情况包括：扰动种类、使用的扰动 值。例如：在确定集合子集成员时，对每一个随机数对应的集合成员进行统计，如果一个随机 数对应的集合成员在一段时间内均未被各集合子集选中，则该剔除该随机 数，生成新的随机数进行更换。以此类推，选择出更能反映模式不确定性 的集合成员，不仅达到动态调整权重，而且还能动态调整随机数的效果， 以提高集合预报的准确率。需要说明的是，对于前述的各方法实施例，为了简单描述，故将其都表 述为一系列的动作组合，但是本领域技术人员应该知悉，本公开并不受所描 述的动作顺序的限制，因为依据本公开，某些步骤可以采用其他顺序或者同 时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属 于可选实施例，所涉及的动作和模块并不一定是本公开所必须的。以上是关于方法实施例的介绍，以下通过装置实施例，对本公开所述方 案进行进一步说明。图5示出了根据本公开的实施例的空气质量集合预报装置500的方框 图。如图5所示，装置500包括：扰动模块510，用于对各站点的气象信息进行扰动，然后输入至气象 模式，以获得所述各站点在预报时刻的多组气象场，所述气象信息包括以 下至少一项：初始气象以及所述气象模式的模式参数；计算模块520，用于根据所述多组气象场进行集合平均，获得目标气 象场；处理模块530，用于将所述目标气象场输入至所述空气质量模式中， 以获得所述各站点在预报时刻的空气质量预报结果。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，所述描 述的模块的具体工作过程，可以参考前述方法实施例中的对应过程，在此不 再赘述。图6示出了可以用来实施本公开的实施例的电子设备600的示意性框图。 设备600可以用于实现图5的空气质量集合预报装置。如图所示，设备600 包括CPU601，其可以根据存储在ROM602中的计算机程序指令或者从存储 单元608加载到RAM603中的计算机程序指令，来执行各种适当的动作和 处理。在RAM 603中，还可以存储设备600操作所需的各种程序和数据。 CPU 601、ROM 602以及RAM 603通过总线604彼此相连。I/O接口605 也连接至总线604。设备600中的多个部件连接至I/O接口605，包括：输入单元606，例 如键盘、鼠标等；输出单元607，例如各种类型的显示器、扬声器等；存储 单元608，例如磁盘、光盘等；以及通信单元609，例如网卡、调制解调器、 无线通信收发机等。通信单元609允许设备600通过诸如因特网的计算机网 络和/或各种电信网络与其他设备交换信息/数据。CPU601执行上文所描述的各个方法和处理，例如方法200、300、400。 例如，在一些实施例中，方法200、300、400可被实现为计算机软件程序， 其被有形地包含于机器可读介质，例如存储单元608。在一些实施例中，计 算机程序的部分或者全部可以经由ROM 602和/或通信单元609而被载入和 /或安装到设备600上。当计算机程序加载到RAM 603并由CPU601执行时， 可以执行上文描述的方法200、300、400的一个或多个步骤。备选地，在其 他实施例中，CPU 601可以通过其他任何适当的方式 而被配置为执行方法200、300、400。本文中以上描述的功能可以至少部分地由一个或多个硬件逻辑部件来 执行。例如，非限制性地，可以使用的示范类型的硬件逻辑部件包括：场可 编程门阵列、专用集成电路、专用标准产品、 片上系统、复杂可编程逻辑器件等等。用于实施本公开的方法的程序代码可以采用一个或多个编程语言的任 何组合来编写。这些程序代码可以提供给通用计算机、专用计算机或其他可 编程数据处理装置的处理器或控制器，使得程序代码当由处理器或控制器执 行时使流程图和/或框图中所规定的功能/操作被实施。程序代码可以完全在 机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且 部分地在远程机器上执行或完全在远程机器或服务器上执行。在本公开的上下文中，机器可读介质可以是有形的介质，其可以包含或 存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结 合地使用的程序。机器可读介质可以是机器可读信号介质或机器可读储存介 质。机器可读介质可以包括但不限于电子的、磁性的、光学的、电磁的、红 外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。机器可 读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算 机盘、硬盘、RAM、ROM、EPROM、光纤、CD-ROM、光学储存设备、磁 储存设备、或上述内容的任何合适组合。此外，虽然采用特定次序描绘了各操作，但是这应当理解为要求这样操 作以所示出的特定次序或以顺序次序执行，或者要求所有图示的操作应被执 行以取得期望的结果。在一定环境下，多任务和并行处理可能是有利的。同 样地，虽然在上面论述中包含了若干具体实现细节，但是这些不应当被解释 为对本公开的范围的限制。在单独的实施例的上下文中描述的某些特征还可 以组合地实现在单个实现中。相反地，在单个实现的上下文中描述的各种特 征也可以单独地或以任何合适的子组合的方式实现在多个实现中。尽管已经采用特定于结构特征和/或方法逻辑动作的语言描述了本主题， 但是应当理解所附权利要求书中所限定的主题未必局限于上面描述的特定 特征或动作。相反，上面所描述的特定特征和动作仅仅是实现权利要求书的 示例形式。
