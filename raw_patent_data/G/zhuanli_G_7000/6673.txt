标题title
一种基于渠道断面流速场重建的流量测量方法
摘要abst
本发明公开了一种基于渠道断面流速场重建的流量测量方法，包括步骤1：根据雷达超声波多普勒原理测量渠道水面单点的流速；步骤2：利用雷达超声波反射原理测量渠道断面的形状以及水位高度；步骤3：建立径向基神经网络模型，根据雷达测得的水面固定点的流速、渠道断面的形状和此时的水位高度，还原被测渠道横切面的流速场；步骤4：使用遗传算法对径向基神经网络模型进行优化，使模型还原的全断面流速场的与真实速度分布的方差最小。本发明解决了在水利计量领域难以获得准确的流速分布规律的问题，大大减少了渠道流速测量工作的经济成本和时间成本，使渠道的计量工作更加便捷高效，具有重要的理论价值和应用潜力。
权利要求书clms
1.一种基于渠道断面流速场重建的流量测量方法，其特征在于，包括以下步骤：步骤1：根据雷达超声波多普勒原理测量渠道水面单点的流速；步骤2：利用雷达超声波反射原理测量渠道断面的形状以及水位高度；步骤3：建立径向基神经网络模型，根据雷达测得的水面固定点的流速、渠道断面的形状和此时的水位高度，还原被测渠道横切面的流速场；步骤4：使用遗传算法对径向基神经网络模型进行优化，使径向基神经网络模型还原的全断面流速场与真实速度分布的方差最小。2.根据权利要求1所述的一种基于渠道断面流速场重建的流量测量方法，其特征在于，所述径向基神经网络模型的建立，包括制作数据集、神经网络架构设计和模型训练。3.根据权利要求2所述的一种基于渠道断面流速场重建的流量测量方法，其特征在于，所述制作数据集具体为：通过传统标准测量方法对渠道断面流量进行测量，以测得的数据作为神经网络训练和测试的数据集。4.根据权利要求3所述的一种基于渠道断面流速场重建的流量测量方法，其特征在于，所述传统标准测量方法包括三点法和五点法。5.根据权利要求2所述的一种基于渠道断面流速场重建的流量测量方法，其特征在于，所述神经网络架构由三层结构组成，包括输入层、隐藏层以及输出层，所述隐藏层采用高斯核函数进行运算。6.根据权利要求4所述的一种基于渠道断面流速场重建的流量测量方法，其特征在于，所述模型训练具体为：将实际测得的断面各点流速值与模型计算的断面相同位置点的流速值一一对比，通过模型中加权滤波算法评价两者误差，并将所述误差作为评价指标在模型内反复迭代，使其不断减小，实现对断面速度场的真实还原；在RBF神经网络模型中输入表征断面形状的参数和超声波测量的单点流速后，模型实时计算该渠道断面每个点的流速。7.根据权利要求6所述的一种基于渠道断面流速场重建的流量测量方法，其特征在于，所述加权滤波算法具体为：E = e * W其中，E表示评价指标，W是一个矩阵，通过学习获取，e也是一个矩阵，是预测值减实际值的平方。8.根据权利要求1所述的一种基于渠道断面流速场重建的流量测量方法，其特征在于，所述步骤4具体为：使用遗传算法对所述径向基神经网络模型的神经元个数、核函数性质进行优化，通过编码使一个基因为神经网络模型的隐藏层神经元的个数，另一个基因为神经元的基函数特征参数；染色体由这两个基因排列组合产生。
说明书desc
技术领域本发明涉及水文测验应用技术领域，尤其涉及一种基于渠道断面流速场重建的流量测量方法。背景技术河流断面流量的精确测量是进行水资源优化配置和科学管理的重要环节，也是灌区和引水工程中取水量实时精确计量急需解决的技术问题。相比于管流流动，自然明渠流动更加复杂多变；且多为湍流流动。湍流边界层内的速度不单由粘性力决定，还与脉动产生的雷诺应力有关；故而湍流边界层并不由单一的规律决定，而是可以分为内外两层；其中外层较厚，内层较薄，内外层之间有交叠。。明渠流速分布大致满足对数分布规律，但实际多有偏差；很多科学家从试验中得到了不同的参数k和B，各种定律表示了造成这种流速偏离对数分布规律的原因。因此，使得对渠道流量的测量变得十分困难。21世纪以来，基于数据驱动的预测模型已经在水文领域有了广泛的应用，包括时间序列模型、支持向量机、决策树、主成分分析、神经网络等，并展现出了优异的预测结果。基于数据驱动的预测模型直接在数据样本上进行训练，无需过多人工干预，无需涉及过多水文专业知识背景，无需大量模拟计算来率定模型最优参数，并且直接使用其他流域的数据样本即可推广至其他流域的洪水流量预测。河流断面流量的精确测量是进行水资源优化配置和科学管理的重要环节，也是灌区和引水工程中取水量实时精确计量急需解决的技术问题。传统的流量测算方法包括水工建筑物测流法：利用标准型式的量水建筑物来测量流量，如堰槽法。目前使用最为广泛的流量测算方法是流速面积法，但是传统的流速面积法是同时测量多个点的流速，计算出部分区域的平均流速，再逐一结合断面面积累加计算得到断面流量，同时每次水位变化都需要重新测量各个点流速，过程繁琐且耗时。因此如何快速准确的得到平均流速是流量计算的难点。实际的河流断面流量测量中，由于河道断面的不规整，水深随着断面位置和河岸距离变化，且流速的变化也更加复杂，这都使得河流流量测量十分棘手。在专利申请CN202110359722.6中公开了一种基于卫星大数据的河流流量连续测量方法，通过提出基于卫星大数据的河流流量连续测量方法，解决了测验困难或无人区河流流量连续测量难题，填补了基于河流动力学原理的卫星流量测验方法空白，可极大地提高河流流量测验的范围和密度。但是该方案通过卫星数据对河道断面重构很容易产生较大误差，并不能准确还原断面流速场，无法获取准确的流速分布规律。在专利申请 CN201811479957.3中公开了一种利用无人机影像快速反演河道流量的方法，提供了有、无地面实测大断面两类情况下流量反演途径，通过无人机影像生成点云和表面高程，基于点云和DSM获取水面宽、糙率、水面比降以及水上大断面信息，采用水力学方法计算河道流量，具有计算高效、非接触、简易快速的优点。但是该方案未考虑实际河道断面的不规则，水深随着断面位置和河岸距离变化，且流速的变化也更加复杂的问题，其最终同样会产生较大的误差。发明内容本发明的目的在于克服现有技术的不足，提供一种基于渠道断面流速场重建的流量测量方法。本发明的目的是通过以下技术方案来实现的：一种基于渠道断面流速场重建的流量测量方法，包括以下步骤：包括以下步骤：步骤1：根据雷达超声波多普勒原理测量渠道水面单点的流速；步骤2：利用雷达超声波反射原理测量渠道断面的形状以及水位高度；步骤3：建立径向基神经网络模型，根据雷达测得的水面固定点的流速、渠道断面的形状和此时的水位高度，还原被测渠道横切面的流速场；步骤4：使用遗传算法对径向基神经网络模型进行优化，使径向基神经网络模型还原的全断面流速场与真实速度分布的方差最小。进一步的，所述径向基神经网络模型的建立，包括制作数据集、神经网络架构设计和模型训练。进一步的，所述制作数据集具体为：通过传统标准测量方法对渠道断面流量进行测量，以测得的数据作为神经网络训练和测试的数据集。进一步的，所述传统标准测量方法包括三点法和五点法。进一步的，所述神经网络架构由三层结构组成，包括输入层、隐藏层以及输出层，所述隐藏层采用高斯核函数进行运算。进一步的，所述模型训练具体为：将实际测得的断面各点流速值与模型计算的断面相同位置点的流速值一一对比，通过模型中加权滤波算法评价两者误差，并将所述误差作为评价指标在模型内反复迭代，使其不断减小，实现对断面速度场的真实还原；在RBF神经网络模型中输入表征断面形状的参数和超声波测量的单点流速后，模型实时计算该渠道断面每个点的流速。进一步的，所述加权滤波算法具体为：E = e * W其中，E表示评价指标，W是一个矩阵，通过学习获取，e也是一个矩阵，是预测值减实际值的平方。进一步的，所述步骤4具体为：使用遗传算法对所述径向基神经网络模型的神经元个数、核函数性质进行优化，通过编码使一个基因为神经网络模型的隐藏层神经元的个数，另一个基因为神经元的基函数特征参数；染色体由这两个基因排列组合产生。本发明的有益效果：本发明解决了在水利计量领域难以获得准确的流速分布规律的问题，通过本发明可以快速获得渠道各位置的流速值，大大减少了渠道流速测量工作的经济成本和时间成本，使渠道的计量工作更加便捷高效，具有重要的理论价值和应用潜力。附图说明图1是本发明的方法流程图。具体实施方式应当理解，此处所描述的具体实施例仅用以解释本发明，并不用于限定本发明。下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅是本发明的一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例1，如图1所示，一种基于渠道断面流速场重建的流量测量方法，包括以下步骤：步骤1：根据雷达超声波多普勒原理测量渠道水面单点的流速；步骤2：利用雷达超声波反射原理测量渠道断面的形状以及水位高度；步骤3：建立径向基神经网络模型，根据雷达测得的水面固定点的流速、渠道断面的形状和此时的水位高度，还原被测渠道横切面的流速场；步骤4：使用遗传算法对径向基神经网络模型进行优化，使径向基神经网络模型还原的全断面流速场与真实速度分布的方差最小。进一步的，所述径向基神经网络模型的建立，包括制作数据集、神经网络架构设计和模型训练。进一步的，所述制作数据集具体为：通过传统标准测量方法对渠道断面流量进行测量，以测得的数据作为神经网络训练和测试的数据集。在本实施例中，采用传统标准测量方法为三点法，使用水力测量行业标准的三点法测得的断面各点流速的实测值与模型计算的断面相同位置点的流速值一一对比；在该断面设置 3 条垂线，流速测点相对水深位置分别为 y/H=0.2、0.4、0.6、0.8 测点，采用转速仪实时测各点流速。测量时，将流速仪依次放置在提前设定的9个速度测量点，然后每个点重复 3 次测量。获得实测数据。进一步的，所述神经网络架构由三层结构组成，包括输入层、隐藏层以及输出层，隐藏层采用高斯核函数进行运算。进一步的，所述模型训练具体为：使用实际测得的断面各点流速值与模型计算的断面相同位置点的流速值一一对比，通过模型中加权滤波算法评价两者误差，并将误差作为评价指标在模型内反复迭代，使其不断减小，模型在这个过程中就准确学习了该断面的流速分布规律，就可以根据输入条件和规律对断面速度场进行还原；在RBF神经网络模型中输入表征断面形状的参数和超声波测量的单点流速后，通过事先已经训练完毕的神经网络，模型能够实时计算该渠道断面每个点的流速。进一步的，所述加权滤波算法具体为：E = e * W其中，E表示评价指标，W是一个矩阵，通过学习获取，e也是一个矩阵，是预测值减实际值的平方。进一步的，所述步骤4具体为：使用遗传算法对该径向基神经网络模型的神经元个数、核函数性质进行优化，通过编码使一个基因为神经网络模型的隐藏层神经元的个数，另一个基因为神经元的基函数特征参数；染色体由这两个基因排列组合产生。在RBF神经网络模型中输入表征断面形状的参数和超声波测量的单点流速后，通过事先已经训练完毕的神经网络，模型能够实时计算该渠道断面每个点的流速。具体训练过程是将使用水力测量行业标准的三点法测得的断面各点流速的实测值与模型计算的断面相同位置点的流速值一一对比，通过模型中特定算法评价两者误差，并将误差作为评价指标在模型内反复迭代，使其不断减小。模型在这个过程中就准确学习了该断面的流速分布规律。就可以根据输入条件和规律对断面速度场进行还原。使用遗传算法对该径向基神经网络模型的神经元个数、核函数性质进行优化，编码使一个基因为神经网络模型的隐藏层神经元个数、一个基因为神经元的基函数特征参数；染色体由这两个基因排列组合产生；初始种群规模为500；使用轮盘赌的增殖算法繁衍1000代；适应度评价指标为模型还原结果与真实测量速度的相对误差的方差。经过遗传算法的优化可以使模型还原的全断面流速场与真实速度分布的相对误差在4%之内。通过本方案还原建立的断面流速场，便可以自动估算河流流量，实现在线监测。实施例2：一种基于渠道断面流速场重建的流量测量方法，包括以下步骤：步骤1：根据雷达超声波多普勒原理测量渠道水面单点的流速；步骤2：利用雷达超声波反射原理测量渠道断面的形状以及水位高度；步骤3：建立径向基神经网络模型，根据雷达测得的水面固定点的流速、渠道断面的形状和此时的水位高度，还原被测渠道横切面的流速场；步骤4：使用遗传算法对径向基神经网络模型进行优化，使模型还原的全断面流速场的与真实速度分布的方差最小。进一步的，所述径向基神经网络模型的建立，包括制作数据集、神经网络架构设计和模型训练。进一步的，所述制作数据集具体为：通过传统标准测量方法对渠道断面流量进行实际测量，以实际测得的数据作为神经网络训练和测试的数据集。进一步的，所述神经网络架构由三层结构组成，包括输入层、隐层以及输出层，隐藏层采用高斯核函数进行运算。进一步的，所述模型训练具体为：使用实际测得的断面各点流速值与模型计算的断面相同位置点的流速值一一对比，通过模型中加权滤波算法评价两者误差，并将误差作为评价指标在模型内反复迭代，使其不断减小，模型在这个过程中就准确学习了该断面的流速分布规律，就可以根据输入条件和规律对断面速度场进行还原；在RBF神经网络模型中输入表征断面形状的参数和超声波测量的单点流速后，通过事先已经训练完毕的神经网络，模型能够实时计算该渠道断面每个点的流速。进一步的，所述加权滤波算法具体为：E = e * W其中，E表示评价指标，W是一个矩阵，通过学习获取，e也是一个矩阵，是预测值减实际值的平方。进一步的，所述步骤4具体为：使用遗传算法对该径向基神经网络模型的神经元个数、核函数性质进行优化，通过编码使一个基因为神经网络模型的隐藏层神经元的个数，另一个基因为神经元的基函数特征参数；染色体由这两个基因排列组合产生。在本实施例中，使用水力测量行业传统标准测量方法——五点法测得的断面各点流速的实测值与模型计算的断面相同位置点的流速值一一对比。在本实施例中，通过五点法测得断面各点流速的实测值与三点法类似，都是本领域人员所知的方法，有大量资料可参见，属于现有技术，此处不在进行累述。在RBF神经网络模型中输入表征断面形状的参数和超声波测量的单点流速后，通过事先已经训练完毕的神经网络，模型能够实时计算该渠道断面每个点的流速。具体训练过程是将使用水力测量行业标准的三点法测得的断面各点流速的实测值与模型计算的断面相同位置点的流速值一一对比，通过模型中特定算法评价两者误差，并将误差作为评价指标在模型内反复迭代，使其不断减小。模型在这个过程中就准确学习了该断面的流速分布规律。就可以根据输入条件和规律对断面速度场进行还原。使用遗传算法对该径向基神经网络模型的神经元个数、核函数性质进行优化，编码使一个基因为神经网络模型的隐藏层神经元个数、一个基因为神经元的基函数特征参数；染色体由这两个基因排列组合产生；初始种群规模为500；使用轮盘赌的增殖算法繁衍1000代；适应度评价指标为模型还原结果与真实测量速度的相对误差的方差。经过遗传算法的优化可以使模型还原的全断面流速场与真实速度分布的相对误差在4%之内。本发明解决了在水利计量领域难以获得准确的流速分布规律的问题，大大减少了渠道流速测量工作的经济成本和时间成本，使渠道的计量工作更加便捷高效，具有重要的理论价值和应用潜力。需要说明的是，对于前述的各个方法实施例，为了简单描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本申请并不受所描述的动作顺序的限制，因为依据本申请，某一些步骤可以采用其他顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于优选实施例，所涉及的动作和单元并不一定是本申请所必须的。在上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详细描述的部分，可以参见其他实施例的相关描述。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的程序可存储于计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，所述的存储介质可为磁碟、光盘、ROM、RAM等。以上所揭露的仅为本发明较佳实施例而已，当然不能以此来限定本发明之权利范围，因此依本发明权利要求所作的等同变化，仍属本发明所涵盖的范围。
