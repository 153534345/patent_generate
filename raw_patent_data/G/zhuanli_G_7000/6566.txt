标题title
一种城市景观喷泉的节能控制方法及控制系统
摘要abst
本发明涉及一种城市景观喷泉的节能控制方法及控制系统。主要包括：将喷泉外侧区域划分成人员数量判断区和人员行为判断区，人员数量判断区位于喷泉和人员行为判断区之间,在人员数量判断区统计观赏游客数量，如果人员数量判断区的观赏游客数量为0，则执行后续步骤，如果人员数量判断区的观赏游客数量大于等于1，则开启喷泉，在人员行为判断区统计潜在游客数量，如果人员数量判断区的观赏游客数量为0且人员行为判断区的潜在游客数量也为0，则喷泉保持关闭状态，如果潜在游客数量大于等于1，则开启喷泉。本申请有利于节能，同时，还涉及潜在游客数量的统计，这就为喷泉资源的充分利用提供了条件，使喷泉资源可更合理的被利用，为人们提供服务。
权利要求书clms
1.一种城市景观喷泉的节能控制方法，其特征在于，包括：S100、将喷泉外侧区域划分成两个区域，两个区域分别为人员数量判断区和人员行为判断区，所述人员数量判断区位于喷泉和人员行为判断区之间,S200、在人员数量判断区统计观赏游客数量，如果人员数量判断区的观赏游客数量为0，则执行步骤S300，如果人员数量判断区的观赏游客数量大于等于1，则开启喷泉，S300、在人员行为判断区统计潜在游客数量，如果人员数量判断区的观赏游客数量为0且人员行为判断区的潜在游客数量也为0，则喷泉保持关闭状态，如果潜在游客数量大于等于1，则开启喷泉，其中，所述潜在游客为朝喷泉中心方向移动的速度大于等于阈值的游客。2.根据权利要求1所述的城市景观喷泉的节能控制方法，其特征在于，还包括步骤S50，先根据所需调控的城市景观喷泉所在的城区或是城市的天气数据判断是否适宜开启喷泉，若适宜开启，则进行步骤S100，如不适宜，则保持喷泉为关闭状态。3.根据权利要求1所述的城市景观喷泉的节能控制方法，其特征在于，根据人员数量判断区的观察游客的数量对喷泉的喷射高度和喷射模式进行匹配控制。4.根据权利要求1所述的城市景观喷泉的节能控制方法，其特征在于，根据人员行为判断区的潜在游客的数量对喷泉的喷射高度和喷射模式进行匹配控制。5.根据权利要求1所述的城市景观喷泉的节能控制方法，其特征在于，根据人员数量判断区的观察游客的数量与人员行为判断区的潜在游客的数量之和，对喷泉的喷射高度和喷射模式进行匹配控制。6.一种用于实现权利要求1至5中任意一项所述城市景观喷泉的节能控制方法的控制系统，其特征在于，包括喷泉水泵、继电器、树莓派单片机、摄像头以及云端气象数据中心，所述喷泉水泵与继电器相连，所述继电器与水泵供电电源相连，所述喷泉水泵还与树莓派单片机相连，所述继电器与树莓派单片机相连，所述摄像头与所述树莓派单片机相连，所述云端气象数据中心与所述树莓派单片机相连，所述摄像头用于获取图像数据，所述云端气象数据中心用于提供气象数据，所述树莓派单片机用于根据图像数据以及气象数据对喷泉水泵进行控制，所述树莓派单片机内设置有PWM输出模块，所述PWM输出模块用于向喷泉水泵发送PWM控制信号。7.根据权利要求6所述的控制系统，其特征在于，所述树莓派单片机通过SSD算法对所述图像数据进行处理。8.根据权利要求7所述的控制系统，其特征在于，通过SSD算法获得人员数量判断区的观赏游客数量，通过SSD算法获得人员行为判断区的潜在游客数量。9.根据权利要求7所述的控制系统，其特征在于，所述SSD算法通过COCO数据集进行预训练。10.根据权利要求6所述的控制系统，其特征在于，所述树莓派单片机设置在摄像头的一侧。
说明书desc
技术领域本发明涉及节能控制领域，特别是涉及城市景观喷泉的控制方法及控制系统。背景技术随着我国经济社会的发展和人民生活水平的提高，人们对环境景观设计的要求也不断提高，而喷泉作为一种独特的人文景观逐渐出现在公园、广场、居住区等地方，不仅美化环境，而且给人视觉上的享受。但这些喷泉往往都是以长期开放的状态或者为了节约资源而长期关闭。没法做到根据喷泉周围的人员数量和人员行为去改变喷泉开闭状态以及开启后的模式变化。这就造成了以下不足：1、处于长期开启状态下的喷泉，对能耗消耗较大，造成能耗浪费。2、大部分时间处于关闭状态的喷泉失去了作为人文景观的意义。因此现在大多数的喷泉运行状态不适应我国“节能减排”的政策和“以人为本”的观念。发明内容基于此，有必要提供一种城市景观喷泉的节能控制方法。该控制方法可兼顾节能又能充分合理利用喷泉服务于人们。一种城市景观喷泉的节能控制方法，包括：S100、将喷泉外侧区域划分成两个区域，两个区域分别为人员数量判断区和人员行为判断区，所述人员数量判断区位于喷泉和人员行为判断区之间,S200、在人员数量判断区统计观赏游客数量，如果人员数量判断区的观赏游客数量为0，则执行步骤S300，如果人员数量判断区的观赏游客数量大于等于1，则开启喷泉，S300、在人员行为判断区统计潜在游客数量，如果人员数量判断区的观赏游客数量为0且人员行为判断区的潜在游客数量也为0，则喷泉保持关闭状态，如果潜在游客数量大于等于1，则开启喷泉，其中，所述潜在游客为朝喷泉中心方向移动的速度大于等于阈值的游客。本申请通过以上方法来实现节能的目的，同时，本申请的方法中，还涉及潜在游客数量的统计，这就为喷泉资源的充分利用提供了条件，使喷泉资源可更合理的被利用，为人们提供服务。在其中一个实施例中，其特征在于，还包括步骤S50，先根据所需调控的城市景观喷泉所在的城区或是城市的天气数据判断是否适宜开启喷泉，若适宜开启，则进行步骤S100，如不适宜，则保持喷泉为关闭状态。在其中一个实施例中，根据人员数量判断区的观察游客的数量对喷泉的喷射高度和喷射模式进行匹配控制。在其中一个实施例中，根据人员行为判断区的潜在游客的数量对喷泉的喷射高度和喷射模式进行匹配控制。在其中一个实施例中，根据人员数量判断区的观察游客的数量与人员行为判断区的潜在游客的数量之和，对喷泉的喷射高度和喷射模式进行匹配控制。一种用于实现所述城市景观喷泉的节能控制方法的控制系统，包括喷泉水泵、继电器、树莓派单片机、摄像头以及云端气象数据中心，所述喷泉水泵与继电器相连，所述继电器与水泵供电电源相连，所述喷泉水泵还与树莓派单片机相连，所述继电器与树莓派单片机相连，所述摄像头与所述树莓派单片机相连，所述云端气象数据中心与所述树莓派单片机相连，所述数据获取摄像头用于获取图像数据，所述云端气象数据中心用于提供气象数据，所述树莓派单片机用于根据图像数据以及气象数据对喷泉水泵进行控制，所述树莓派单片机内设置有PWM输出模块，所述PWM输出模块用于向喷泉水泵发送PWM控制信号。在其中一个实施例中，所述树莓派单片机通过SSD算法对所述图像数据进行处理。在其中一个实施例中，通过SSD算法获得人员数量判断区的观赏游客数量，通过SSD算法获得人员行为判断区的潜在游客数量。在其中一个实施例中，所述SSD算法通过COCO数据集进行预训练。在其中一个实施例中，所述树莓派单片机设置在摄像头的一侧。附图说明图1为本申请的城市景观喷泉的节能控制方法的一种实施方式的流程图。图2为本申请的城市景观喷泉的节能控制方法的第二种实施方式的流程图。图3为本申请的城市景观喷泉的节能控制方法的第三种实施方式的流程图。图4为本申请的城市景观喷泉的节能控制系统的布置方式示意图。图5为本申请的实施例的树莓派单片机、继电器、喷泉水泵以及数据获取摄像头的连接关系示意图。图6为本申请的实施例的人员数量判断区和人员行为判断区的示意图。具体实施方式为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图对本发明的具体实施方式做详细的说明。在下面的描述中阐述了很多具体细节以便于充分理解本发明。但是本发明能够以很多不同于在此描述的其它方式来实施，本领域技术人员可以在不违背本发明内涵的情况下做类似改进，因此本发明不受下面公开的具体实施例的限制。需要说明的是，当元件被称为“固定于”另一个元件，它可以直接在另一个元件上或者也可以存在居中的元件。当一个元件被认为是“连接”另一个元件，它可以是直接连接到另一个元件或者可能同时存在居中元件。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。本文中在本发明的说明书中所使用的术语只是为了描述具体的实施例的目的，不是旨在于限制本发明。如图1所示，本申请的实施例提供了一种城市景观喷泉的节能控制方法，该控制方法包括：S100、将喷泉外侧区域划分成两个区域，两个区域分别为人员数量判断区和人员行为判断区，所述人员数量判断区位于喷泉和人员行为判断区之间。S200、在人员数量判断区统计观赏游客数量，如果人员数量判断区的观赏游客数量为0，则执行步骤S300，如果人员数量判断区的观赏游客数量大于等于1，则开启喷泉。S300、在人员行为判断区统计潜在游客数量，如果人员数量判断区的观赏游客数量为0且人员行为判断区的潜在游客数量也为0，则喷泉保持关闭状态，如果潜在游客数量大于等于1，则开启喷泉，其中，所述潜在游客为朝喷泉中心方向移动的速度大于等于阈值的游客。具体的，如果简单的因为离喷泉较近的人员数量判断区的观赏游客为0，就关闭喷泉来节能，这违背了喷泉的设立初衷。本申请不光统计人员数量判断区的观赏游客数量，还对离喷泉较远的人员行为判断区的人员进行判断。人员行为判断区的人员有可能朝喷泉中心方向移动，也就是人员行为判断区内的部分人员是想去看喷泉。将人员行为判断区的潜在游客进行统计，这样有利于充分利用喷泉资源为游客服务。也就是本申请兼顾了节能和充分发挥喷泉的观赏作用。具体的，可使用opencv对地面进行轮廓提取，并且使用轮廓逼近与规划描点方式，提取喷泉附近区域轮廓，并对喷泉附近区域进行划分，划分出两类区域，也就是人员数量判断区和人员行为判断区。具体的，可先获得人员数量判断区的图像数据，然后应用SSD算法或其它算法模型来对图像数据进行处理，并输出观赏游客的数量。具体的，可先获得人员行为判断区的图像数据，然后应用SSD算法或其它算法模型来对图像数据进行处理，并输出人员数量以及人员位置信息。如果人员数量为0，也就是人员行为判断区没有人，则不需要判断是否有潜在游客。如果人员数量大于等于1，则判断这些人员中，是否有潜在游客。进一步的是，可根据人员位置信息获得人员的移动方向以及移动速度。进而判断朝喷泉移动的人员的速度是否大于等于阈值，如果大于等于阈值则判断为潜在游客。例如，应用SSD算法，通过人员行为判断区的人员的前后两帧图像数据来获得人员在不同时间点的位置数据，也就是检测框的X，Y，W，H。X，Y为检测框中心点位置，W，H为框的宽，高。通过计算得到检测框下边中点数据为，然后通过对比前后两帧的位置数据，以及前后两帧的时间间距可求出移动速度。同时，可将喷泉中心或其它位置作为参考点，如果前后两帧的位置数据是逐渐靠近参考点，则可认为该人员是朝喷泉方向移动。在其中一个实施例中，如图2所示，其特征在于，还包括步骤S50，先根据所需调控的城市景观喷泉所在的城区或是城市的天气数据判断是否适宜开启喷泉，若适宜开启，则进行步骤S100，如不适宜，则保持喷泉为关闭状态。在其中一个实施例中，根据人员数量判断区的观察游客的数量对喷泉的喷射高度和喷射模式进行匹配控制。上述匹配控制也就是观察游客的数量的越多，喷泉的喷射高度越高，喷射模式越复杂。观察游客的数量越少，喷泉的喷射高度越低，喷射模式越简单。在其中一个实施例中，根据人员行为判断区的潜在游客的数量对喷泉的喷射高度和喷射模式进行匹配控制。上述匹配控制也就是潜在游客的数量的越多，喷泉的喷射高度越高，喷射模式越复杂。观察游客的数量越少，喷泉的喷射高度越低，喷射模式越简单。在其中一个实施例中，根据人员数量判断区的观察游客的数量与人员行为判断区的潜在游客的数量之和，对喷泉的喷射高度和喷射模式进行匹配控制。上述匹配控制也就是上述两种游客的数量之和越大，喷泉的喷射高度越高，喷射模式越复杂。反之，喷泉的喷射高度越低，喷射模式越简单。可以理解，如果上述两种游客的数量之和大于等于一个临界值，则可将喷泉的喷射高度调为最高，喷射模式调为最复杂。如果上述两种游客的数量之和小于该临界值，则上述两种游客的数量之和越小，则喷泉的喷射高度越低，喷射模式越简单。如图4所示，本申请的实施例还提供了一种用于实现所述城市景观喷泉的节能控制方法的控制系统。上述控制系统包括喷泉水泵、继电器、树莓派单片机、摄像头以及云端气象数据中心，所述喷泉水泵与继电器相连，所述继电器与水泵供电电源相连，所述喷泉水泵还与树莓派单片机相连，所述继电器与树莓派单片机相连，所述摄像头与所述树莓派单片机相连，所述云端气象数据中心与所述树莓派单片机相连。所述摄像头用于获取图像数据，所述云端气象数据中心用于提供气象数据，所述树莓派单片机用于根据图像数据以及气象数据对喷泉水泵进行控制。所述树莓派单片机内设置有PWM输出模块，所述PWM输出模块用于向喷泉水泵发送PWM控制信号。本申请使用树莓派单片机，因为树莓派单片机的应用成本低、集成度高、扩展性强、设置方便、可应用范围广。通过树莓派单片机控制喷泉水泵，可实现智能化调控喷泉喷射，比传统人为控制喷泉更节省成本与能源。而且，可以通过树莓派单片机获得对控制方法OTA升级的机会。进一步的是，还可通过VNC等远程操控app来对树莓派单片机进行连接调控。具体的，本申请中，继电器连接树莓派单片机的GPIO端口，以弱电控制强电的方法控制喷泉水泵的开关。通过控制继电器，可实现喷泉水泵的彻底关闭。同时，树莓派单片机还可将PWM控制信号发送给喷泉水泵，以PWM方式控制喷泉水泵运转，使得喷泉水泵在节能的同时，更好的延长使用寿命。以下结合图3和图4来进一步详细介绍本申请的控制系统的工作流程。首先，通过云端气象数据中心获得城市景观喷泉所在的城区或是城市的天气数据，根据天气数据判断是否适宜开启喷泉，如不适宜开启，则保持喷泉为关闭状态。如适宜开启，则继续判断。接着，通过摄像头获得人员数量判断区域和人员行为判断区域的图像数据。根据图像数据获得人员数量判断区域的观赏游客数量，以及人员行为判断区域的人员数量和人员移动速度。如果人员数量判断区域的观赏游客数量大于等于1，则开启喷泉水泵。如果观赏游客的数量为0，则判断人员行为判断区是否有人，如果没有人，则喷泉水泵保持关闭状态。如果人员行为判断区有人，则继续判断，看这些人员是否朝喷泉中心移动，以及这些人员中的移动速度是否有大于等于阈值的人员。如果有，则这些人员为潜在游客，如有潜在游客，则可开启喷泉水泵。如果潜在游客为0，则喷泉水泵保持关闭状态。在其中一个实施例中，所述树莓派单片机通过SSD算法对所述图像数据进行处理。本申请使用SSD算法，在优化网络结构达成在树莓派单片机上实现实时检测的同时，也保证了识别的准确性。同时也防止了在室外由于复杂目标的干扰导致喷泉误开放的问题。在其中一个实施例中，通过SSD算法获得人员数量判断区的观赏游客数量，通过SSD算法获得人员行为判断区的潜在游客数量。在其中一个实施例中，本申请是基于TensorFlows框架，通过COCO数据集对所述SSD算法进行预训练。其中,上述COCO数据集也就是Common Objects in Context数据集。本申请使用该数据集对SSD算法进行预训练。在其中一个实施例中，所述摄像头可为城市内已经安装好的监控摄像头。也就是可从城市内已经安装好的监控摄像头获取本申请的方法所需的图像数据。所述树莓派单片机可安装在摄像头的一侧。目前，户外街道，公共建筑等已广泛普及视频监控系统，目前架设的监控摄像头接近1.5亿台。因此，适合本申请所用的摄像头的数量和位置较为广泛。以下通过具体的例子来对使用本申请的控制方法带来的节能效益进行说明。经过实地勘察，以芭蕾女孩喷泉为例，在8:00-11:00的时间段内有1h出现人员流动；在11:00-13:00的时间段内有20min出现人员流动；在13：00-18:00的时间段内有2h出现人员流动，则在8:00-18:00的时间段内每小时有19.8分钟的人员流动。采用配用电机额定功率55W、最大流量25L/min的新型环保增压泵。根据水池表面蒸发计算公式及风吹、溢流损失占循环流量的比例,可得出能耗数据分析结果，具体如表1和表2所示。表1为能源数据分析表，表2为水量损失估计表。其中，水池表面蒸发计算公式为：其中：H——表面蒸发损失,Pm——按水池表面温度计算的饱和蒸发压,P——空气中水蒸汽分压,Vm——日平均风速。在计算月平均蒸发损失时，应将式中Pm、P、Vm分别以日均值代入，并将计算结果乘以30。表1表2以上所述实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本发明的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干变形和改进，这些都属于本发明的保护范围。因此，本发明专利的保护范围应以所附权利要求为准。
