标题title
一种应用于多元场景下的定位建图管理方法及系统
摘要abst
本发明公开了一种应用于多元场景下的定位建图管理方法及系统，涉及机器人建图管理技术领域；定位建图管理系统包括执行模块、数据库、图像数据管理模块、清扫面积优化模块；执行模块用于通过机器人根据地图在设定场景内执行清扫任务，所述地图来源于数据库；数据库包括设定场景下的全局地图、与全局地图对应的若干子地图；图像数据管理模块用于更新数据库内的若干子地图，机器人通过执行模块依据更新后的子地图执行清扫动作；清扫面积优化模块用于优化在全局地图对应子地图的清扫面积，并控制执行模块执行清扫任务；本发明通过图像数据管理模块，使得机器人能有效的清扫设定环境，地图实时更新，无需重新采集全局地图，提升了地图更新的效率。
权利要求书clms
1.一种应用于多元场景下的定位建图管理方法，其特征在于：所述定位建图管理方法执行如下步骤： Z01：获取机器人在执行清扫任务时所对应环境下的全局地图，获取机器人依据自身定位建图得到第一子地图，将第一子地图与全局地图下对应的第二子地图相对比，获取在第一子地图下所设置的标志点，且围绕标志点形成清扫闭环路径，如若第一子地图形成的清扫闭环路径面积大于第二子地图形成的清扫闭环路径面积，且闭环路径面积内存在部分相同面积时，将第二子地图更新为第一子地图； Z02：获取机器人将第二子地图清扫干净的次数，以及获取第二子地图更新为第一子地图的间隔时间信息，根据间隔时间预测清扫第一子地图形成的闭环路径面积与第二子地图形成的闭环路径面积的面积差的次数； Z03：获取机器人清扫第一子地图时，机器人所碰撞的障碍物特征；机器人根据障碍物的动态特征，优化清扫第一子地图的面积；如若机器人在碰撞到障碍物后未形成被推动距离，则障碍物为静态特征，机器人围绕静态特征的障碍物执行清扫动作。2.根据权利要求1所述的一种应用于多元场景下的定位建图管理方法，其特征在于：在步骤Z02中，获取机器人在第i次清扫第二子地图形成的闭环路径面积s时的清扫次数W，得到清扫干净程度A；获取第二子地图变更为第一子地图时的间隔时间信息t，以及第一子地图与第二子地图形成的闭环路径面积的面积差s1；将机器人清扫面积s、清扫面积s时的清扫次数W、清扫程度A作为BP神经网络的三个输入神经元，将机器人清扫第一子地图与第二子地图形成的闭环路径面积的面积差所对应的清扫次数作为BP神经网络的输出神经元；初始化BP神经网络的参数，传递函数为双极性sigmoid函数，具体为；设置隐藏层；分别在输入层到隐藏层、隐藏层到输出层中设置权值Q；则得到预测结果W’；得到预测的结果误差函数；当误差小于设定阈值时，则输出机器人清扫面积s且清扫干净程度为A时的清扫次数为W’；如若误差大于设定阈值时，则重复上述内容，直至误差小于设定阈值；为实际清扫次数，j为神经网络的输出向量的初始维度，为神经网络的输出向量的最高维度。3.根据权利要求1所述的一种应用于多元场景下的定位建图管理方法，其特征在于：在步骤Z03中，获取机器人在第一子地图内清扫碰撞到障碍物的特征信息，如若核实到机器人在碰撞到障碍物后，推动障碍物移动了设定距离，则障碍物为动态特征，获取机器人推动障碍物的开始时间信息r1，机器人无法推动障碍物的结束时间信息r2；设定机器人从标志点开始清扫，机器人清扫完第一子地图后经过相同的标志点，进而形成清扫闭环路径；则机器人清扫第一子地图的最大化面积具体为：；其中：是指机器人清扫完动态障碍物后，清扫其他区域的时间点，是指机器人清扫角度为u=0°-359°中任意角度的速度，是指机器人清扫完第一子地图后经过标志点的时间点，m、g为任意常数；是指机器人清扫第一子地图的最大化面积。4.根据权利要求1所述的一种应用于多元场景下的定位建图管理方法，其特征在于：在步骤Z01中，通过机器人上安装的视觉系统对第一子地图的图片进行拍摄，通过颜色集采集第一子地图内颜色的分布特征，如若核实到第一子地图内包含有颜色集分布特征与第二子地图内的颜色集分布特征相同时，进一步提取第一子地图内的障碍物特征，将第一子地图内的障碍物特征与第二子地图内的障碍物特征比较，如若障碍物特征部分相同时，则表示闭环路径面积内存在部分相同面积，将第二子地图更新为第一子地图。5.执行权利要求1所述方法的一种应用于多元场景下的定位建图管理系统，其特征在于：所述定位建图管理系统包括执行模块、数据库、图像数据管理模块、清扫面积优化模块；所述执行模块用于通过机器人根据地图在设定场景内执行清扫任务，所述地图来源于数据库；所述数据库包括设定场景下的全局地图、与全局地图对应的若干子地图；所述图像数据管理模块用于更新数据库内的若干子地图，机器人通过执行模块依据更新后的子地图执行清扫动作；所述清扫面积优化模块用于优化在全局地图对应子地图的清扫面积，并控制执行模块执行清扫任务；所述执行模块与图像数据管理模块、清扫面积优化模块和数据库相连接。6.根据权利要求5所述的一种应用于多元场景下的定位建图管理系统，其特征在于：所述执行模块包括命令接收单元、命令发布单元和终端；所述命令接收单元用于接收终端发送的指令；所述命令发送单元用于向终端发送指令；所述终端与机器人红外连接，管理指令信息；所述指令包括控制机器人启动、关闭和定时清扫的信息；所述终端的输入端与命令发送单元和命令接收单元的输出端相连接。7.根据权利要求5所述的一种应用于多元场景下的定位建图管理系统，其特征在于：所述图像数据管理模块包括定位建图管理单元、地图对比单元、标志点设置单元和地图替换单元；所述定位建图管理单元用于对机器人的位置进行定位，依据机器人的实时位置进行建图，得到子地图集合；所述地图对比单元用于将建图得到的子地图与数据库内的子地图对应比较；所述标志点设置单元用于在子地图中设置标志点，用以核实所述子地图是否按照设置的标志点清扫完成，如若按照设置的标志点清扫完成，则形成清扫闭环路径；所述地图替换单元用于核实到建图得到的子地图闭环路径面积大于数据库内相对应子地图闭环路径面积，且子地图的闭环路径面积内存在部分相同面积时，则将建图得到的子地图替换为数据库内相对应子地图；所述定位建图管理单元的输出端与地图对比单元、标志点设置单元和地图替换单元的输入端相连接。8.根据权利要求5所述的一种应用于多元场景下的定位建图管理系统，其特征在于：所述清扫面积优化模块包括障碍物分类单元、清扫优化单元；所述障碍物分类单元用于根据机器人在执行模块的命令下推动障碍物，根据障碍物被机器人推动的距离，将障碍物分为静态障碍物和动态障碍物；所述清扫优化单元用于优化机器人在子地图中围绕标志点形成的闭环清扫面积；所述障碍物分类单元的输出端与清扫优化单元的输入端相连接。
说明书desc
技术领域本发明涉及机器人建图管理技术领域，具体为一种应用于多元场景下的定位建图管理方法及系统。背景技术随着技术的逐步发展，机器人的功能也逐渐丰富，例如：清扫地面、巡航、引导讲解、送餐等等任务；无论机器人的功能如何升级，机器人都要事先对所处的工作环境进行定位，并根据机器人的定位进行建图，使得机器人能在建图完成的地图内执行设定好的任务；然而工作环境内的物品摆放和空间位置会发生变化，因此需要对存储的地图进行及时更新，否则机器人无法及时清理好工作环境，致使工作环境有着脏、乱、差的现象；并且由于机器人反复对其中一块环境进行清理，进而造成机器人清理环境的效率不高；而现有技术中，往往需要人工对整个场景重新扫描来实现对地图的更新，这种方式不仅人力成本大且浪费时间；因此，需要对上述问题进行改善。发明内容本发明的目的在于提供一种应用于多元场景下的定位建图管理方法及系统，以解决上述背景技术中提出的问题。为了解决上述技术问题，本发明提供如下技术方案：一种应用于多元场景下的定位建图管理方法，所述定位建图管理方法执行如下步骤： Z01：获取机器人在执行清扫任务时所对应环境下的全局地图，获取机器人依据自身定位建图得到第一子地图，将第一子地图与全局地图下对应的第二子地图相对比，获取在第一子地图下所设置的标志点，且围绕标志点形成清扫闭环路径，如若第一子地图形成的清扫闭环路径面积大于第二子地图形成的清扫闭环路径面积，且闭环路径面积内存在部分相同面积时，将第二子地图更新为第一子地图； Z02：获取机器人将第二子地图清扫干净的次数，以及获取第二子地图更新为第一子地图的间隔时间信息，根据间隔时间预测清扫第一子地图形成的闭环路径面积与第二子地图形成的闭环路径面积的面积差的次数； Z03：获取机器人清扫第一子地图时，机器人所碰撞的障碍物特征；机器人根据障碍物的动态特征，优化清扫第一子地图的面积；如若机器人在碰撞到障碍物后未形成被推动距离，则障碍物为静态特征，机器人围绕静态特征的障碍物执行清扫动作。进一步的，在步骤Z02中，获取机器人在第i次清扫第二子地图形成的闭环路径面积s时的清扫次数W，得到清扫干净程度A；获取第二子地图变更为第一子地图时的间隔时间信息t，以及第一子地图与第二子地图形成的闭环路径面积的面积差s1；将机器人清扫面积s、清扫面积s时的清扫次数W、清扫程度A作为BP神经网络的三个输入神经元，将机器人清扫第一子地图与第二子地图形成的闭环路径面积的面积差所对应的清扫次数作为BP神经网络的输出神经元；初始化BP神经网络的参数，传递函数为双极性sigmoid函数，具体为；设置隐藏层；分别在输入层到隐藏层、隐藏层到输出层中设置权值Q；则得到预测结果W’；得到预测的结果误差函数；当误差小于设定阈值时，则输出机器人清扫面积s且清扫干净程度为A时的清扫次数为W’；如若误差大于设定阈值时，则重复上述内容，直至误差小于设定阈值；为实际清扫次数，j为神经网络的输出向量的初始维度，为神经网络的输出向量的最高维度。进一步的，在步骤Z03中，获取机器人在第一子地图内清扫碰撞到障碍物的特征信息，如若核实到机器人在碰撞到障碍物后，推动障碍物移动了设定距离，则障碍物为动态特征，获取机器人推动障碍物的开始时间信息r1，机器人无法推动障碍物的结束时间信息r2；设定机器人从标志点开始清扫，机器人清扫完第一子地图后经过相同的标志点，进而形成清扫闭环路径；则机器人清扫第一子地图的最大化面积具体为：；其中：是指机器人清扫完动态障碍物后，清扫其他区域的时间点，是指机器人清扫角度为u=0°-359°中任意角度的速度，是指机器人清扫完第一子地图后经过标志点的时间点，m、g为任意常数；是指机器人清扫第一子地图的最大化面积。进一步的，在步骤Z01中，通过机器人上安装的视觉系统对第一子地图的图片进行拍摄，通过颜色集采集第一子地图内颜色的分布特征，如若核实到第一子地图内包含有颜色集分布特征与第二子地图内的颜色集分布特征相同时，进一步提取第一子地图内的障碍物特征，将第一子地图内的障碍物特征与第二子地图内的障碍物特征比较，如若障碍物特征部分相同时，则表示闭环路径面积内存在部分相同面积，将第二子地图更新为第一子地图。进一步的，所述定位建图管理系统包括执行模块、数据库、图像数据管理模块、清扫面积优化模块；所述执行模块用于通过机器人根据地图在设定场景内执行清扫任务，所述地图来源于数据库；所述数据库包括设定场景下的全局地图、与全局地图对应的若干子地图；所述图像数据管理模块用于更新数据库内的若干子地图，机器人通过执行模块依据更新后的子地图执行清扫动作；所述清扫面积优化模块用于优化在全局地图对应子地图的清扫面积，并控制执行模块执行清扫任务；所述执行模块与图像数据管理模块、清扫面积优化模块和数据库相连接。所述执行模块包括命令接收单元、命令发布单元和终端；所述命令接收单元用于接收终端发送的指令；所述命令发送单元用于向终端发送指令；所述终端与机器人红外连接，管理指令信息；所述指令包括控制机器人启动、关闭和定时清扫的信息；所述终端的输入端与命令发送单元和命令接收单元的输出端相连接。所述图像数据管理模块包括定位建图管理单元、地图对比单元、标志点设置单元和地图替换单元；所述定位建图管理单元用于对机器人的位置进行定位，依据机器人的实时位置进行建图，得到子地图集合；所述地图对比单元用于将建图得到的子地图与数据库内的子地图对应比较；所述标志点设置单元用于在子地图中设置标志点，用以核实所述子地图是否按照设置的标志点清扫完成，如若按照设置的标志点清扫完成，则形成清扫闭环路径；所述地图替换单元用于核实到建图得到的子地图闭环路径面积大于数据库内相对应子地图闭环路径面积，且子地图的闭环路径面积内存在部分相同面积时，则将建图得到的子地图替换为数据库内相对应子地图；所述定位建图管理单元的输出端与地图对比单元、标志点设置单元和地图替换单元的输入端相连接。所述清扫面积优化模块包括障碍物分类单元、清扫优化单元；所述障碍物分类单元用于根据机器人在执行模块的命令下推动障碍物，根据障碍物被机器人推动的距离，将障碍物分为静态障碍物和动态障碍物；所述清扫优化单元用于优化机器人在子地图中围绕标志点形成的闭环清扫面积；所述障碍物分类单元的输出端与清扫优化单元的输入端相连接。与现有技术相比，本发明所达到的有益效果是：本发明通过图像数据管理模块，更新数据库内的若干子地图，从而使得机器人能有效的清扫设定环境，地图实时更新，无需重新采集全局地图，提升了地图更新的效率；通过清扫面积优化模块，能在全局地图对应子地图的清扫面积下，控制执行模块实现清扫任务，实现了机器人能最大化的清扫设定环境，提升机器人清扫的效率。附图说明附图用来提供对本发明的进一步理解，并且构成说明书的一部分，与本发明的实施例一起用于解释本发明，并不构成对本发明的限制。在附图中：图1是本发明一种应用于多元场景下的定位建图管理系统的模块组成示意图；图2是本发明一种应用于多元场景下的定位建图管理方法的步骤示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。请参阅图1-图2，本发明提供技术方案：一种应用于多元场景下的定位建图管理方法，所述定位建图管理方法执行如下步骤： Z01：获取机器人在执行清扫任务时所对应环境下的全局地图，获取机器人依据自身定位建图得到第一子地图，将第一子地图与全局地图下对应的第二子地图相对比，获取在第一子地图下所设置的标志点，且围绕标志点形成清扫闭环路径，如若第一子地图形成的清扫闭环路径面积大于第二子地图形成的清扫闭环路径面积，且闭环路径面积内存在部分相同面积时，将第二子地图更新为第一子地图； Z02：获取机器人将第二子地图清扫干净的次数，以及获取第二子地图更新为第一子地图的间隔时间信息，根据间隔时间预测清扫第一子地图形成的闭环路径面积与第二子地图形成的闭环路径面积的面积差的次数； Z03：获取机器人清扫第一子地图时，机器人所碰撞的障碍物特征；机器人根据障碍物的动态特征，优化清扫第一子地图的面积；如若机器人在碰撞到障碍物后未形成被推动距离，则障碍物为静态特征，机器人围绕静态特征的障碍物执行清扫动作。进一步的，在步骤Z02中，获取机器人在第i次清扫第二子地图形成的闭环路径面积s时的清扫次数W，得到清扫干净程度A；获取第二子地图变更为第一子地图时的间隔时间信息t，以及第一子地图与第二子地图形成的闭环路径面积的面积差s1；将机器人清扫面积s、清扫面积s时的清扫次数W、清扫程度A作为BP神经网络的三个输入神经元，将机器人清扫第一子地图与第二子地图形成的闭环路径面积的面积差所对应的清扫次数作为BP神经网络的输出神经元；初始化BP神经网络的参数，传递函数为双极性sigmoid函数，具体为；设置隐藏层；分别在输入层到隐藏层、隐藏层到输出层中设置权值Q；则得到预测结果W’；得到预测的结果误差函数；当误差小于设定阈值时，则输出机器人清扫面积s且清扫干净程度为A时的清扫次数为W’；如若误差大于设定阈值时，则重复上述内容，直至误差小于设定阈值；为实际清扫次数，j为神经网络的输出向量的初始维度，为神经网络的输出向量的最高维度；通过神经网络算法，能预测得到清扫所述面积的次数，从而能有效解决重复清扫同一块区域的问题；提升了清扫的效率和清扫的干净程度；通过神经网络方法，能够无限使得误差值小于预设值，使得预测的结果更加准确。进一步的，在步骤Z03中，获取机器人在第一子地图内清扫碰撞到障碍物的特征信息，如若核实到机器人在碰撞到障碍物后，推动障碍物移动了设定距离，则障碍物为动态特征，获取机器人推动障碍物的开始时间信息r1，机器人无法推动障碍物的结束时间信息r2；设定机器人从标志点开始清扫，机器人清扫完第一子地图后经过相同的标志点，进而形成清扫闭环路径；则机器人清扫第一子地图的最大化面积具体为：；其中：是指机器人清扫完动态障碍物后，清扫其他区域的时间点，是指机器人清扫角度为u=0°-359°中任意角度的速度，是指机器人清扫完第一子地图后经过标志点的时间点，m、g为任意常数；是指机器人清扫第一子地图的最大化面积；是指机器人除了动态障碍物的所在面积未清扫以外，所清扫的为闭合面积；是指清扫的为推动动态障碍物移动后，机器人清扫速所述动态障碍物移动后的面积。进一步的，在步骤Z01中，通过机器人上安装的视觉系统对第一子地图的图片进行拍摄，通过颜色集采集第一子地图内颜色的分布特征，如若核实到第一子地图内包含有颜色集分布特征与第二子地图内的颜色集分布特征相同时，进一步提取第一子地图内的障碍物特征，将第一子地图内的障碍物特征与第二子地图内的障碍物特征比较，如若障碍物特征部分相同时，则表示闭环路径面积内存在部分相同面积，将第二子地图更新为第一子地图。进一步的，所述定位建图管理系统包括执行模块、数据库、图像数据管理模块、清扫面积优化模块；所述执行模块用于通过机器人根据地图在设定场景内执行清扫任务，所述地图来源于数据库；所述数据库包括设定场景下的全局地图、与全局地图对应的若干子地图；所述图像数据管理模块用于更新数据库内的若干子地图，机器人通过执行模块依据更新后的子地图执行清扫动作；所述清扫面积优化模块用于优化在全局地图对应子地图的清扫面积，并控制执行模块执行清扫任务；所述执行模块与图像数据管理模块、清扫面积优化模块和数据库相连接。所述执行模块包括命令接收单元、命令发布单元和终端；所述命令接收单元用于接收终端发送的指令；所述命令发送单元用于向终端发送指令；所述终端与机器人红外连接，管理指令信息；所述指令包括控制机器人启动、关闭和定时清扫的信息；所述终端的输入端与命令发送单元和命令接收单元的输出端相连接。所述图像数据管理模块包括定位建图管理单元、地图对比单元、标志点设置单元和地图替换单元；所述定位建图管理单元用于对机器人的位置进行定位，依据机器人的实时位置进行建图，得到子地图集合；所述地图对比单元用于将建图得到的子地图与数据库内的子地图对应比较；所述标志点设置单元用于在子地图中设置标志点，用以核实所述子地图是否按照设置的标志点清扫完成，如若按照设置的标志点清扫完成，则形成清扫闭环路径；所述地图替换单元用于核实到建图得到的子地图闭环路径面积大于数据库内相对应子地图闭环路径面积，且子地图的闭环路径面积内存在部分相同面积时，则将建图得到的子地图替换为数据库内相对应子地图；所述定位建图管理单元的输出端与地图对比单元、标志点设置单元和地图替换单元的输入端相连接。所述清扫面积优化模块包括障碍物分类单元、清扫优化单元；所述障碍物分类单元用于根据机器人在执行模块的命令下推动障碍物，根据障碍物被机器人推动的距离，将障碍物分为静态障碍物和动态障碍物；所述清扫优化单元用于优化机器人在子地图中围绕标志点形成的闭环清扫面积；所述障碍物分类单元的输出端与清扫优化单元的输入端相连接。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。最后应说明的是：以上所述仅为本发明的优选实施例而已，并不用于限制本发明，尽管参照前述实施例对本发明进行了详细的说明，对于本领域的技术人员来说，其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
