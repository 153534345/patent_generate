标题title
对虾质量的估算方法和装置
摘要abst
本发明公开了一种对虾质量的估算方法和装置，所述方法包括：获取对虾的虾体图像；对虾体图像进行预处理，以获得虾体二值图像；根据虾体二值图像获取虾须去除图像；根据虾须去除图像获取虾体主骨架线；根据虾须去除图像和虾体主骨架线提取虾体形状特征，并根据虾体形状特征进行模型预测，实现对对虾质量的估算。本发明的对虾质量的估算方法，能够准确高效地估算对虾质量，为科学高效养殖对虾、实现对虾精准投喂、提高水产养殖效益提供技术支撑。
权利要求书clms
1.一种对虾质量的估算方法，其特征在于，包括：获取所述对虾的虾体图像；对所述虾体图像进行预处理，以获得虾体二值图像；根据所述虾体二值图像获取虾须去除图像；根据所述虾须去除图像获取虾体主骨架线；根据所述虾须去除图像和所述虾体主骨架线提取虾体形状特征，并根据所述虾体形状特征进行模型预测，实现对所述对虾质量的估算。2.根据权利要求1所述的对虾质量的估算方法，其特征在于，根据所述虾体二值图像获取虾须去除图像，包括：采用自适应阈值算法对所述虾体二值图像进行处理，以获得虾须去除图像。3.根据权利要求2所述的对虾质量的估算方法，其特征在于，采用自适应阈值算法对所述虾体的二值图像进行处理，包括：根据所述虾体二值图像获取虾体的宽度和高度；根据所述虾体的高度和宽度确定虾须阈值；遍历所述虾体二值图像以获取虾体的边缘像素点；根据所述虾体的边缘像素点和其邻域像素点确定所述虾体二值图像的虾须像素点，调整虾须像素点的灰度值，以获取所述虾须去除图像。4.根据权利要求1所述的对虾质量的估算方法，其特征在于，根据所述虾须去除图像获取虾体主骨架线，包括：采用Canny边缘检测方式对所述虾须去除图像进行边缘提取，以获得虾体轮廓；对所述虾体轮廓进行细化，以获得虾体骨架线；采用树结构去支法对所述虾体骨架线进行处理，以获得所述虾体主骨架线。5.根据权利要求4所述的对虾质量的估算方法，其特征在于，采用树结构去支法对所述虾体骨架线进行处理，包括：按列遍历所述虾体骨架线对应的图像，并将第一个像素值为0的像素点作为起始节点；根据所述起始节点将虾体骨架线的像素点坐标以树结构的形式存储；获取所述虾体骨架线所有分支点；计算每个所述分支点中各个分支的长度，存储每个分支点的最大长度的分支，以获取虾体主骨架线。6.根据权利要求5所述的对虾质量的估算方法，其特征在于，所述虾体形状特征包括：所述虾体轮廓的投影面积、所述虾体主骨架线长度、所述虾体轮廓的最小外接矩形面积、所述虾体轮廓的最小圆面积和所述虾体轮廓的外接矩形面积，采用下述公式提取所述虾体形状特征：A＝Count＝255)L＝Count＝255)Amr＝xmr×ymrAmc＝π×Rmc2Ar＝xr×yr其中，A为所述虾体轮廓图像的投影面积，L为所述虾体主骨架线长度，Amr为所述虾体轮廓图像的最小外接矩形面积，Amc为所述虾体轮廓图像的最小外接圆面积，Ar为所述虾体轮廓图像的外接矩形面积，xmr、ymr分别为所述虾体轮廓最小外接矩形的长和宽，Rmc为所述虾体轮廓最小外接圆的半径，xr、yr分别为所述虾体轮廓外接矩形的长和宽，Cn表示所述虾体轮廓图像在x行y列像素的灰度值，Kn表示所述虾体主骨架线图像在x行y列像素的灰度值，Count表示计数函数。7.根据权利要求6所述的对虾质量的估算方法，其特征在于，根据所述虾体形状特征进行模型预测，实现对所述对虾质量的估算，包括：采用XGBoost算法构建对虾质量预测模型；将所述虾体形状特征作为模型输入进行模型预测，输出所述对虾质量。8.根据权利要求1-7中任一项所述的对虾质量的估算方法，其特征在于，对所述虾体图像进行预处理，包括：将所述虾体图像由RGB图像转换为HSV图像；根据所述HSV图像获取S分量图像；采用Graphcut算法将所述目标虾体从所述S分量图像中分割出来；对所述分割后的目标虾体进行二值化处理，以获得所述虾体二值图像。9.一种对虾质量的估算装置，其特征在于，包括：第一获取模块，用于获取所述对虾的虾体图像；预处理模块，用于对所述虾体图像进行预处理，以获得虾体二值图像；第二获取模块，用于根据所述虾体二值图像获取虾须去除图像；第三获取模块，用于根据所述虾须去除图像获取虾体主骨架线；提取模块，用于根据所述虾须去除图像和所述虾体主骨架线提取虾体形状特征；估算模块，用于根据所述虾体形状特征进行模型预测，实现对所述对虾质量的估算。10.一种计算机可读存储介质，其特征在于，其上存储有对虾质量的估算程序，该对虾质量的估算程序被处理器执行时实现根据权利要求1-8中任一项所述的对虾质量的估算方法。
说明书desc
技术领域本发明涉及水产养殖技术领域，尤其涉及一种对虾质量的估算方法、一种对虾质量的 估算装置和一种计算机可读存储介质。背景技术对虾蛋白质含量高、脂肪含量低、富含多种维生素，已成为我国虾类养殖的主要品种 之一。在对虾养殖过程中，饲料是其成长的主要能量来源，而不同生长阶段的对虾个体的 质量差异导致饲料用量存在区别，无法形成统一的饲料投喂量。为了可持续高效地养殖对 虾，养殖者必须定期捕捞对虾并获得对虾质量。传统水产养殖行业通过人工测量对虾质量，不仅费时费力，且易使虾体产生应激，对 虾体造成物理伤害。发明内容本发明旨在至少在一定程度上解决相关技术中的技术问题之一。为此，本发明的第一 个目的在于提出一种对虾质量的估算方法，该方法能够准确高效地估算对虾质量，为科学 高效养殖对虾、实现对虾精准投喂、提高水产养殖效益提供技术支撑。本发明的第二个目的在于提出一种对虾质量的估算装置。本发明的第三个目的在于提出一种计算机可读存储介质。为达到上述目的，本发明第一方面实施例提出了对虾质量的估算方法，包括：获取所 述对虾的虾体图像；对所述虾体图像进行预处理，以获得虾体二值图像；根据所述虾体二 值图像获取虾须去除图像；根据所述虾须去除图像获取虾体主骨架线；根据所述虾须去除 图像和所述虾体主骨架线提取虾体形状特征，并根据所述虾体形状特征进行模型预测，实 现对所述对虾质量的估算。根据本发明实施例的对虾质量的估算方法，首先获取对虾的虾体图像，并对虾体图像 进行预处理，以获得虾体二值图像，然后根据虾体二值图像获取虾须去除图像，再根据虾 须去除图像获取虾体主骨架线，最后根据虾须去除图像和虾体主骨架线提取虾体形状特征， 并根据虾体形状特征进行模型预测，从而实现对对虾质量的估算。由此，该方法能够准确 高效地估算对虾质量，为科学高效养殖对虾、实现对虾精准投喂、提高水产养殖效益提供 技术支撑。另外，根据本发明上述实施例的对虾质量的估算方法，还可以具有如下的附加技术特 征：根据本发明的一个实施例，根据所述虾体二值图像获取虾须去除图像，包括：采用自 适应阈值算法对所述虾体二值图像进行处理，以获得虾须去除图像。根据本发明的一个实施例，采用自适应阈值算法对所述虾体的二值图像进行处理，包 括：根据所述虾体二值图像获取虾体的宽度和高度；根据所述虾体的高度和宽度确定虾须 阈值；遍历所述虾体二值图像以获取虾体的边缘像素点；根据所述虾体的边缘像素点和其 邻域像素点确定所述虾体二值图像的虾须像素点，调整虾须像素点的灰度值，以获取所述 虾须去除图像。根据本发明的一个实施例，根据所述虾须去除图像获取虾体主骨架线，包括：采用Canny 边缘检测方式对所述虾须去除图像进行边缘提取，以获得虾体轮廓；对所述虾体轮廓进行 细化，以获得虾体骨架线；采用树结构去支法对所述虾体骨架线进行处理，以获得所述虾 体主骨架线。根据本发明的一个实施例，采用树结构去支法对所述虾体骨架线进行处理，包括：按 列遍历所述虾体骨架线对应的图像，并将第一个像素值为0的像素点作为起始节点；根据 所述起始节点将虾体骨架线的像素点坐标以树结构的形式存储；获取所述虾体骨架线所有 分支点；计算每个所述分支点中各个分支的长度，存储每个分支点的最大长度的分支，以 获取虾体主骨架线。根据本发明的一个实施例，所述虾体形状特征包括：所述虾体轮廓的投影面积、所述 虾体主骨架线长度、所述虾体轮廓的最小外接矩形面积、所述虾体轮廓的最小圆面积和所 述虾体轮廓的外接矩形面积，采用下述公式提取所述虾体形状特征：A＝Count＝255)L＝Count＝255)Amr＝xmr×ymrAmc＝π×Rmc2Ar＝xr×yr其中，A为所述虾体轮廓图像的投影面积，L为所述虾体主骨架线长度，Amr为所述虾体轮廓图像的最小外接矩形面积，Amc为所述虾体轮廓图像的最小外接圆面积，Ar为所述 虾体轮廓图像的外接矩形面积，xmr、ymr分别为所述虾体轮廓最小外接矩形的长和宽，Rmc为所述虾体轮廓最小外接圆的半径，xr、yr分别为所述虾体轮廓外接矩形的长和宽， Cn表示所述虾体轮廓图像在x行y列像素的灰度值，Kn表示所述虾体主骨架线 图像在x行y列像素的灰度值，Count表示计数函数。根据本发明的一个实施例，根据所述虾体形状特征进行模型预测，实现对所述对虾质 量的估算，包括：采用XGBoost算法构建对虾质量预测模型；将所述虾体形状特征作为模 型输入进行模型预测，输出所述对虾质量。根据本发明的一个实施例，对所述虾体图像进行预处理，包括：将所述虾体图像由RGB图像转换为HSV图像；根据所述HSV图像获取目标虾体；采用Graphcut算法将所述目标虾体从所述 HSV图像中分割出来；对所述分割后的目标虾体进行二值化处理，以获得所述虾体二值图 像。为达到上述目的，本发明第二方面实施例提出了一种对虾质量的估算装置，包括：第 一获取模块，用于获取所述对虾的虾体图像；预处理模块，用于对所述虾体图像进行预处 理，以获得虾体二值图像；第二获取模块，用于根据所述虾体二值图像获取虾须去除图像； 第三获取模块，用于根据所述虾须去除图像获取虾体主骨架线；提取模块，用于根据所述 虾须去除图像和所述虾体主骨架线提取虾体形状特征；估算模块，用于根据所述虾体形状 特征进行模型预测，实现对所述对虾质量的估算。根据本发明实施例的对虾质量的估算装置，首先通过第一获取模块获取对虾的虾体图 像，并通过预处理模块对虾体图像进行预处理，以获得虾体二值图像，然后通过第二获取 模块根据虾体二值图像获取虾须去除图像，通过第三获取模块根据虾须去除图像获取虾体 主骨架线，通过提取模块根据虾须去除图像和虾体主骨架线提取虾体形状特征，估算模块 根据虾体形状特征进行模型预测，从而实现对对虾质量的估算。由此，该装置能够准确高 效地估算对虾质量，为科学高效养殖对虾、实现对虾精准投喂、提高水产养殖效益提供技 术支撑。为达到上述目的，本发明第三方面实施例提出的一种计算机可读存储介质，其上存储 有对虾质量的估算程序，该对虾质量的估算程序被处理器执行时实现上述的对虾质量的估 算方法。根据本发明实施例的计算机可读存储介质，通过执行上述的对虾质量的估算方法，能 够准确高效地估算对虾质量，为科学高效养殖对虾、实现对虾精准投喂、提高水产养殖效 益提供技术支撑。本发明附加的方面和优点将在下面的描述中部分给出，部分将从下面的描述中变得明 显，或通过本发明的实践了解到。附图说明图1为根据本发明实施例的对虾质量的估算方法的流程图；图2为根据本发明一个具体实施例的获取虾体二值图像的流程图；图3为根据本发明一个具体实施例的获取虾须去除图像的流程图；图4为根据本发明一个实施例的4邻域像素点示和虾须关键点分类示意图；图5为根据本发明一个具体实施例的获取虾体主骨架线的流程图；图6为根据本发明一个具体实施例的采用树结构去支法获取虾体主骨架线的流程图；图7为根据本发明实施例的对虾质量的估算装置的方框示意图。具体实施方式下面详细描述本发明的实施例，所述实施例的示例在附图中示出，其中自始至终相同 或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描 述的实施例是示例性的，旨在用于解释本发明，而不能理解为对本发明的限制。下面参考附图描述本发明实施例提出的对虾质量的估算方法、对虾质量的估算装置和 计算机可读存储介质。图1为根据本发明实施例的对虾质量的估算方法的流程图。如图1所示，本发明实施 例的对虾质量的估算方法可包括以下步骤：S1，获取对虾的虾体图像。其中，基于实际水产养殖的对虾本身的形状特征，具有多 须多足，形态弯曲的特点，因此为了提高虾体质量估算的准确性，可以获取对虾的俯视图 像，例如，可通过摄像头在对虾的上方拍摄图像，即可获得对虾的俯视图像，记为对虾的虾体图像。S2，对虾体图像进行预处理，以获得虾体二值图像。根据本发明的一个实施例，如图2所示，对虾体图像进行预处理，可包括以下步骤：S21，将虾体图像由RGB图像转换为HSV图像。S22，根据HSV图像获取S分量图像。S23，采用Graphcut算法将目标虾体从S分量图像中分割出来。S24，对分割后的目标虾体进行二值化处理，以获得虾体二值图像。具体而言，通过拍照获取到的虾体图像是RGB颜色空间。RGB颜色空间利用三个颜色分 量的线性组合来表示颜色，任何颜色都与这三个分量有关。而自然环境下获取的图像容易 受自然光照、遮挡和阴影等情况的影响，所以获取的虾体图像对亮度比较敏感，RGB颜色 空间的三个分量都与亮度密切相关，只要亮度改变，三个分量都会随之相应地改变。对虾 具有多须多足，形态弯曲的特点，其体色呈半透明，从形状和颜色上都不利于在RGB颜色空间对虾体轮廓提取和特征计算，所以，需要将RGB颜色空间转换为更符合人眼对颜色的感知效果的HSV颜色空间，其中，色调分量和饱和度分量受光照的影响较小，与RGB颜色空间相比能更准确地区分前景和背景。因此，在发明的一些实施例中，可以通过对虾体图像提取HSV颜色空间的S分量图像，以提高目标虾体与背景的对比度。具体地，设On为第n幅对虾图像，On是由R、G、B三分量组成的三维矩阵，即：On＝将On转换为HSV颜色空间并提取S分量图像Sn，公式如下所示：通过上述公式，虾体图像On即可转换为HSV颜色空间并提取S分量图像Sn。在获取S分量图像Sn之后，采用Graph cut算法分割目标虾体图像。将图像Sn定义为无向图Sn＝＜V,E＞，其中，V为顶点的集合，E为边的集合。对于虾体图像中的任意结点i∈V，设虾体图像分割状态Ln＝{l1,l2,...,lp}，其中li＝1，i为图像前景；li＝0，i为图像背景，则图像Sn的能量函数计算公式如下：E＝aR+B其中，R为区域项，B为边界项，a是区域项和边界项之间的重要因子。优化E使其值达到最小，可以将目标虾体从背景中分割出来，对分割后的结果进行二值化处理，从而获得虾体二值图像Bn。S3，根据虾体二值图像获取虾须去除图像。考虑到虾体二值图像中对虾主体与虾须像素点的分布规律，根据本发明的一个实施例， 根据虾体二值图像获取虾须去除图像，可包括：采用自适应阈值算法对虾体二值图像进行 处理，以获得虾须去除图像。进一步地，根据本发明的一个实施例，如图3所示，采用自适应阈值算法对虾体的二 值图像进行处理，可包括以下步骤：S31，根据虾体二值图像获取虾体的宽度和高度。S32，根据虾体的高度和宽度确定虾须阈值。S33，遍历虾体二值图像以获取虾体的边缘像素点。S34，根据虾体的边缘像素点和其邻域像素点确定虾体二值图像的虾须像素点，调整虾 须像素点的灰度值，以获得虾须去除图像。具体而言，根据虾体二值图像可以绘制出虾体最小外接矩形，可以获得虾体的宽度和 高度，并将虾体二值图像旋转为水平方向。由于采集的对虾的大小和摄像机的高度不同， 图像中呈现的虾体大小各不相同，因此需根据虾体高度与宽度自适应选取虾须阈值，虾须 阈值选取公式如下所示：式中，H表示为虾体高度，W表示为虾体宽度，Th为水平阈值，Tv为垂直阈值；代表计算结果向下取整。由此，通过上述公式可以得到虾须的水平阈值和垂直阈值。遍历图像寻找虾须关键点，并判断该关键点与图像边界和周围阈值范围内的像素点的 关系，设置像素点取值，进而去除虾须。例如，虾须关键点P为图像中目标虾体的边缘像 素点，如图4所示，虾须关键点P及其4邻域的示意图。设虾体二值图像中目标虾体 和背景的像素点取值分别为255和0，对虾须关键点P及其4邻域像素的取值进行分析， 共有“上黑下白”、“上白下黑”、“左黑右白”和“左白右黑”四种情况，如图4-图4 所示。当虾须关键点P为“上黑下白”和“上白下黑”时，使用公式Tv进行计算，即 沿竖直方向消除虾须；当虾须关键点P为“左黑右白”和“左白右黑”时，使用公式Th进 行计算，即沿水平方向消除虾须。由于上述四种情况的处理流程相似，下面以图4“上黑下白”为例进行进一步解释。 具体地，按行遍历虾体二值图像，寻找满足“上黑下白”条件的虾须关键点P，f 表示虾体二值图像在x行y列像素的灰度值，判断规则如下：IF f＝＝255and f＝＝0THENis PEND IF；基于和Tv调整虾须关键点的灰度值，设Xi＝，Xj＝，p∈，调整规则如下：IF xk≤TvTHEN f＝0ELSE IF xk＞Tv and exist f＝0THEN f＝0ΕΝD IF；图像遍历结束后，即可以得到虾体去须图像Rn。由此，通过调整图像中虾须关键点的 灰度值，有效去除虾须，解决了对虾图像的虾须导致不易提取虾体轮廓和特征计算准确度 低的问题。S4，根据虾须去除图像获取虾体主骨架线。根据本发明的一个实施例，如图5所示，根据虾须去除图像获取虾体主骨架线，可包 括以下步骤：S41，采用Canny边缘检测方式对虾须去除图像进行边缘提取，以获得虾体轮廓。S42，对虾体轮廓进行细化，以获得虾体骨架线。S43，采用树结构去支法对虾体骨架线进行处理，以获得虾体主骨架线。进一步地，根据本发明的一个实施例，如图6所示，采用树结构去支法对虾体骨架线 进行处理，可包括以下步骤：S431，按列遍历虾体骨架线对应的图像，并将第一个像素值为0的像素点作为起始节 点。S432，根据起始节点将虾体骨架线的全部像素点以树结构的形式存储。S433，获取虾体骨架线所有分支点。S434，计算每个分支点中各个分支的长度，存储每个分支点的最大长度的分支，以获 取虾体主骨架线。具体而言，对虾体去须图像Rn进行形态学闭运算，然后采用Canny边缘检测方式进行 边缘检测，提取虾体轮廓图像Cn。然后，采用基于形态学的查表法对虾体轮廓图像Cn进行细化，获得虾体骨架线图像Cn'，再采用树结构去支法去除虾体骨架线的分支，得到完整的虾体主骨架线。树结构去支法去除虾体骨架线的分支包括：首先按列遍历虾体骨架线对应的图像，寻 找像素值为0的点，并将该点作为起始节点，依次追踪骨架线的全部像素点。然后将骨架 线的像素坐标以树结构的形式存储，对于每一个骨架像素点，其八连通区域内像素值为0 且未在树中的点作为其孩子结点递归建树，存储结构如下所示：其中，Tree为骨架线像素点的坐标列表，pointi为树结构存储列表中的父结点，为树结构存储列表中pointi的孩子结点。孩子结点数大于1的为分 支点，获得所有的分支点，对每个分支点的各个分支依次遍历求长度，定义len_bran求 分支长度，公式如下：式中，n为某像素点的孩子结点数目，通过上述公式，可以求得各个分支的长度，将获得的长度中最大值，即最长分支，作为虾体主骨架线Kn。需要说明的是，在去除虾须步骤，已经根据虾体的高度和宽度将目标虾体旋转为水平 方向，因此在去除骨架线步骤获取起始节点时，将虾体骨架线中最左端的像素点作为起始 节点。由此，通过上述基于树结构去支的虾体主骨架线提取方法，将虾体骨架线像素的坐标 存储为树结构的形式，检测分支点并计算分支长度，保留最长分支实现虾体主骨架线提取， 对不同大小和形态的对虾都能够完整地提取虾体主骨架线，解决了虾体形态弯曲，体长不易直接获取的问题。S5，根据虾须去除图像和虾体主骨架线提取虾体形状特征，并根据虾体形状特征进行 模型预测，实现对对虾质量的估算。根据本发明的一个实施例，虾体形状特征可包括：虾体轮廓的投影面积、虾体主骨架 线长度、虾体轮廓的最小外接矩形面积、虾体轮廓的最小圆面积和虾体轮廓的外接矩形面 积，采用下述公式提取虾体形状特征：A＝Count＝255)L＝Count＝255)Amr＝xmr×ymrAmc＝π×Rmc2Ar＝xr×yr其中，A为虾体轮廓图像的投影面积，L为虾体主骨架线长度，Amr为虾体轮廓图像的最小外接矩形面积，Amc为虾体轮廓图像的最小外接圆面积，Ar为虾体轮廓图像的外接矩 形面积，xmr、ymr分别为虾体轮廓最小外接矩形的长和宽，Rmc为虾体轮廓最小外接圆的 半径，xr、yr分别为虾体轮廓外接矩形的长和宽，Cn表示虾体轮廓图像在x行y列 像素的灰度值，Kn表示虾体主骨架线图像在x行y列像素的灰度值，Count表示计 数函数。通过上述公式可以提取到虾体轮廓图像的投影面积、虾体主骨架线长度、虾体轮 廓图像的最小外接矩形面积、虾体轮廓图像的最小外接圆面积、虾体轮廓图像的外接矩形 面积等虾体形状特征。进一步地，根据本发明的一个实施例，根据虾体形状特征进行模型预测，实现对对虾 质量的估算，可包括：采用XGBoost算法构建对虾质量预测模型；将虾体形状特征作为模型输入进行模型预测，输出对虾质量。具体而言，XGBoost算法的基本思想是采用梯度下降的思想，通过学习上一步模型的残 差，最小化目标函数，使得对虾质量预测模型训练完毕后，可实现虾体质量估算。具体地，采用XGBoost算法构建对虾质量预测模型，给定对虾形状特征数据集 D＝{:i＝1,2,...,n,xi∈Rp,yi∈R}，其中n为样本个数，每个样本有P个特征。假设， 给定k个回归树，xi表示第i个对虾数据的特征向量，fk是一个回归树，F是 回归树的集合空间，预测值可表示为：对目标函数进行二阶泰勒展开，并引入正则项，化简后的结果为：式中，Oobj为最小化目标函数，γ表示为学习率，λ表示为正则化参数，T为回归树的叶子结点数量，Gj为一阶导数，Hj为二阶导数。通过上述公式可以构建对虾质量预测模 型。进一步地，将提取到的与质量相关性较高的虾体长度、投影面积等形状特征作为模型 的输入，对虾质量作为模型的输出，采用XGBoost算法构建对虾质量预测模型，并使用训练 集进行模型训练，在完成模型训练后，将测试集输入到训练好的质量预测模型中，即可输 出对虾质量，从而实现对虾质量估算。综上所述，根据本发明实施例的对虾质量的估算方法，首先获取对虾的虾体图像，并 对虾体图像进行预处理，以获得虾体二值图像，然后根据虾体二值图像获取虾须去除图像， 再根据虾须去除图像获取虾体主骨架线，最后根据虾须去除图像和虾体主骨架线提取虾体 形状特征，并根据虾体形状特征进行模型预测，从而实现对对虾质量的估算。由此，该方 法能够准确高效地估算对虾质量，为科学高效养殖对虾、实现对虾精准投喂、提高水产养 殖效益提供技术支撑。对应上述实施例，本发明还提出了一种对虾质量的估算装置。图7为根据本发明实施例的对虾质量的估算装置的方框示意图。如图7所示，本发明实施例的对虾质量的估算装置可包括：第一获取模块10、预处理 模块20、第二获取模块30、第三获取模块40、提取模块50和估算模块60。其中，第一获取模块10，用于获取对虾的虾体图像。预处理模块20，用于对虾体图像 进行预处理，以获得虾体二值图像。第二获取模块30，用于根据虾体二值图像获取虾须去 除图像。第三获取模块40，用于根据虾须去除图像获取虾体主骨架线。提取模块50，用于根据虾须去除图像和虾体主骨架线提取虾体形状特征。估算模块60，用于根据虾体形状特征进行模型预测，实现对对虾质量的估算。根据本发明的一个实施例，第二获取模块30根据虾体二值图像获取虾须去除图像，具 体用于，采用自适应阈值算法对虾体二值图像进行处理，以获得虾须去除图像。根据本发明的一个实施例，第二获取模块30采用自适应阈值算法对虾体的二值图像进 行处理，具体用于，根据虾体二值图像获取虾体的宽度和高度；根据虾体的高度和宽度确 定虾须阈值；遍历虾体二值图像以获取虾体的边缘像素点；根据虾体的边缘像素点和其邻 域像素点确定虾体二值图像中虾须像素点，调整虾须像素点的灰度值，以获取虾须去除图 像。根据本发明的一个实施例，第三获取模块40根据虾须去除图像获取虾体主骨架线，具 体用于，采用Canny边缘检测方式对虾须去除图像进行边缘提取，以获得虾体轮廓；对虾 体轮廓进行细化，以获得虾体骨架线；采用树结构去支法对虾体骨架线进行处理，以获得 虾体主骨架线。根据本发明的一个实施例，第三获取模块40采用树结构去支法对虾体骨架线进行处理， 具体用于，按列遍历虾体骨架线对应的图像，并将第一个像素值为0的像素点作为起始节 点；根据起始节点将虾体骨架线中的全部像素点以树结构的形式存储；获取虾体骨架线所 有分支点；计算每个分支点中各个分支的长度，存储每个分支点的最大长度的分支，以获 取虾体主骨架线。根据本发明的一个实施例，虾体形状特征包括：虾体轮廓的投影面积、虾体主骨架线 长度、虾体轮廓的最小外接矩形面积、虾体轮廓的最小圆面积和虾体轮廓的外接矩形面积， 提取模块50采用下述公式提取虾体形状特征：A＝Count＝255)L＝Count＝255)Amr＝xmr×ymrAmc＝π×Rmc2Ar＝xr×yr其中，A为虾体轮廓图像的投影面积，L为虾体主骨架线长度，Amr为虾体轮廓图像的最小外接矩形面积，Amc为虾体轮廓图像的最小外接圆面积，Ar为虾体轮廓图像的外接矩 形面积，xmr、ymr分别为虾体轮廓最小外接矩形的长和宽，Rmc为虾体轮廓最小外接圆的 半径，xr、yr分别为虾体轮廓外接矩形的长和宽，Cn表示虾体轮廓图像在x行y列 像素的灰度值，Kn表示虾体主骨架线图像在x行y列像素的灰度值，Count表示计 数函数。根据本发明的一个实施例，估算模块60根据虾体形状特征进行模型预测，实现对对虾 质量的估算，具体用于，采用XGBoost算法构建对虾质量预测模型；将虾体形状特征作为 模型输入进行模型预测，输出对虾质量。根据本发明的一个实施例，预处理模块20对虾体图像进行预处理，具体用于，将虾体 图像由RGB图像转换为HSV图像；根据HSV图像提取S分量图像；采用Graphcut算法将目标虾体从S分量图像中分割出来；对分割后的目标虾体进行二值化处理，以获得虾体二值图像。需要说明的是，本发明实施例的对虾质量的估算装置中未披露的细节，请参照本发明 实施例的对虾质量的估算方法中所披露的细节，具体这里不再赘述。据本发明实施例的对虾质量的估算装置，首先通过第一获取模块获取对虾的虾体图像， 并通过预处理模块对虾体图像进行预处理，以获得虾体二值图像，然后通过第二获取模块 根据虾体二值图像获取虾须去除图像，通过第三获取模块根据虾须去除图像获取虾体主骨 架线，通过提取模块根据虾须去除图像和虾体主骨架线提取虾体形状特征，通过估算模块 根据虾体形状特征进行模型预测，从而实现对对虾质量的估算。由此，该装置能够准确高 效地估算对虾质量，为科学高效养殖对虾、实现对虾精准投喂、提高水产养殖效益提供技 术支撑。对应上述实施例，本发明还提出了一种计算机可读存储介质。本发明实施例的计算机可读存储介质，其上存储有对虾质量的估算程序，该对虾质量 的估算程序被处理器执行时实现上述对虾质量的估算方法。根据本发明实施例的计算机可读存储介质，通过执行上述的对虾质量的估算方法，能 够准确高效地估算对虾质量，为科学高效养殖对虾、实现对虾精准投喂、提高水产养殖效 益提供技术支撑。需要说明的是，在流程图中表示或在此以其他方式描述的逻辑和/或步骤，例如，可以 被认为是用于实现逻辑功能的可执行指令的定序列表，可以具体实现在任何计算机可读介 质中，以供指令执行系统、装置或设备使用，或结合这些指令执行 系统、装置或设备而使用。就本说明书而言，"计算机可读介质"可以是任何可以包含、存 储、通信、传播或传输程序以供指令执行系统、装置或设备或结合这些指令执行系统、装置或设备而使用的装置。计算机可读介质的更具体的示例包括以下：具 有一个或多个布线的电连接部，便携式计算机盘盒，随机存取存储 器，只读存储器，可擦除可编辑只读存储器，光纤装 置，以及便携式光盘只读存储器。另外，计算机可读介质甚至可以是可在其上打 印所述程序的纸或其他合适的介质，因为可以例如通过对纸或其他介质进行光学扫描，接 着进行编辑、解译或必要时以其他合适方式进行处理来以电子方式获得所述程序，然后将 其存储在计算机存储器中。应当理解，本发明的各部分可以用硬件、软件、固件或它们的组合来实现。在上述实 施方式中，多个步骤或方法可以用存储在存储器中且由合适的指令执行系统执行的软件或 固件来实现。例如，如果用硬件来实现，和在另一实施方式中一样，可用本领域公知的下 列技术中的任一项或他们的组合来实现：具有用于对数据信号实现逻辑功能的逻辑门电路 的离散逻辑电路，具有合适的组合逻辑门电路的专用集成电路，可编程门阵列，现 场可编程门阵列等。在本说明书的描述中，参考术语“一个实施例”、“一些实施例”、“示例”、“具 体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材 料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意 性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点 可以在任何的一个或多个实施例或示例中以合适的方式结合。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示 或者隐含地包括至少一个该特征。在本发明的描述中，“多个”的含义是至少两个，例如两 个，三个等，除非另有明确具体的限定。在本发明中，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”、“固定”等术语应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或成一体；可以是 机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两 个元件内部的连通或两个元件的相互作用关系，除非另有明确的限定。对于本领域的普通 技术人员而言，可以根据具体情况理解上述术语在本发明中的具体含义。尽管上面已经示出和描述了本发明的实施例，可以理解的是，上述实施例是示例性的， 不能理解为对本发明的限制，本领域的普通技术人员在本发明的范围内可以对上述实施例 进行变化、修改、替换和变型。
