标题title
一种用于服务器的设备管理系统、方法、设备及存储介质
摘要abst
本发明公开了一种用于服务器的设备管理系统、方法、设备及存储介质，设备管理系统包括：接口模块；分别与所述接口模块连接的逻辑处理模块、监控模块、电源模块，所述电源模块和所述监控模块还分别与所述逻辑处理模块相连；与所述逻辑处理模块连接的逻辑设置模块；其中，所述监控模块配置为读取接入设备的设备信息以判断所述接入设备的设备类型，并将所述设备类型发送给所述逻辑处理模块；所述逻辑处理模块配置为基于接收到的所述设备类型对所述接入设备进行逻辑处理。通过本发明的方案，解决了服务器的现有系统互联复杂，使用线缆较多，稳定性差等问题，使服务器设计更加简洁，减少了互联成本，提高了系统的稳定性。
权利要求书clms
1.一种用于服务器的设备管理系统，其特征在于，包括：接口模块；分别与所述接口模块连接的逻辑处理模块、监控模块、电源模块，所述电源模块和所述监控模块还分别与所述逻辑处理模块相连；与所述逻辑处理模块连接的逻辑设置模块；其中，所述监控模块配置为读取接入设备的设备信息以判断所述接入设备的设备类型，并将所述设备类型发送给所述逻辑处理模块；所述逻辑处理模块配置为基于接收到的所述设备类型对所述接入设备进行逻辑处理。2.根据权利要求1所述的系统，其特征在于，所述接入设备包括硬盘或网卡。3.根据权利要求1所述的系统，其特征在于，所述监控模块配置为响应于有接入设备连接到所述接口模块，基于所述接口模块读取所述接入设备的设备信息以判断所述设备的设备类型，并将所述设备类型发送给所述逻辑处理模块。4.根据权利要求1所述的系统，其特征在于，所述逻辑处理模块配置为基于接收到的所述设备类型，发送对应的信号到所述电源模块，以使所述电源模块对所述接入设备进行供电。5.根据权利要求1所述的系统，其特征在于，所述逻辑设置模块包括所述接入设备的配置信息；所述逻辑处理模块配置为基于接收到的所述设备类型，从所述逻辑设备模块获取对应的配置信息以对所述接入设备进行逻辑处理。6.根据权利要求1所述的系统，其特征在于，还包括计算模块，所述计算模块配置为响应于服务器开机，向所述接入设备提供PCIE信号。7.一种用于服务器的设备管理方法，其特征在于，基于如权利要求1-6任一项所述的设备管理系统，执行以下步骤：响应于有接入设备连接到接口模块，基于监控模块读取所述接入设备的设备信息以判断所述接入设备的设备类型，并将所述设备类型发送给逻辑处理模块；所述逻辑处理模块基于接收到的所述设备类型对所述接入设备进行逻辑处理。8.根据权利要求7所述的方法，其特征在于，还包括：所述逻辑处理模块基于接收到的所述设备类型，发送对应的信号到所述电源模块，以使所述电源模块对所述接入设备进行供电。9.一种计算机设备，包括：至少一个处理器；以及存储器，所述存储器存储有可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时执行如权利要求7和8任意一项所述的方法的步骤。10.一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，其特征在于，所述计算机程序被处理器执行时执行如权利要求7和8任意一项所述的方法的步骤。
说明书desc
技术领域本发明涉及服务器领域，尤其涉及一种用于服务器的设备管理系统、方法、设备及存储介质。背景技术随着服务器行业的技术更新和产品迭代，OCP形态的网卡相比较传统的PCIE形态接口的网卡，体积更小、接口更短、便于从机器前端和后端维护，且能够支持热拔插hot-plug、多主机multi-host等灵活应用场景，所以OCP形态的网卡逐渐成为主流。相比较扣卡形态的OCP MEZZ 2.0，OCP3.0接口选用了GENZ连接器，应用场景更加广泛。近年来，硬盘市场往EDSFF等新型接口形态倾斜，E1、E3等硬盘逐步面世，且拥有良好的发展趋势。OCP3.0与E3都是建立在EDSFF协议的基础上，接口形态可兼容。在目前的服务器主板设计中，OCP3.0网卡的设计与硬盘设计相对独立，硬盘一般都通过硬盘背板实现硬盘管理。现有技术方案的缺点主要有：整系统互联复杂，使用较多线缆，系统稳定性差；在无OCP3.0网卡需求时，接口无法用作其他用途，造成接口专一、易浪费的问题；搭配主板及线缆，造成成本上升。发明内容有鉴于此，本发明提出了一种用于服务器的设备管理系统、方法、设备及存储介质，通过硬件线路和逻辑编译实现OCP3.0网卡与E3硬盘的自动识别及逻辑处理，保证设备在随机接入系统后正常工作，解决了服务器的现有系统互联复杂，使用线缆较多，稳定性差等问题，使服务器设计更加简洁，减少了互联成本，提高了系统的稳定性。基于上述目的，本发明实施例的一方面提供了一种用于服务器的设备管理系统，具体包括：接口模块；分别与所述接口模块连接的逻辑处理模块、监控模块、电源模块，所述电源模块和所述监控模块还分别与所述逻辑处理模块相连；与所述逻辑处理模块连接的逻辑设置模块；其中，所述监控模块配置为读取接入设备的设备信息以判断所述接入设备的设备类型，并将所述设备类型发送给所述逻辑处理模块；所述逻辑处理模块配置为基于接收到的所述设备类型对所述接入设备进行逻辑处理。在一些实施方式中，所述接入设备包括硬盘或网卡。在一些实施方式中，所述监控模块配置为响应于有接入设备连接到所述接口模块，基于所述接口模块读取所述接入设备的设备信息以判断所述设备的设备类型，并将所述设备类型发送给所述逻辑处理模块。在一些实施方式中，所述逻辑处理模块配置为基于接收到的所述设备类型，发送对应的信号到所述电源模块，以使所述电源模块对所述接入设备进行供电。在一些实施方式中，所述逻辑设置模块包括所述接入设备的配置信息；所述逻辑处理模块配置为基于接收到的所述设备类型，从所述逻辑设备模块获取对应的配置信息以对所述接入设备进行逻辑处理。在一些实施方式中，设备管理系统还包括计算模块，所述计算模块配置为响应于服务器开机，向所述接入设备提供PCIE信号。本发明实施例的另一方面，还提供了一种用于服务器的设备管理方法，基于如上所述的设备管理系统，执行以下步骤：响应于有接入设备连接到接口模块，基于监控模块读取所述接入设备的设备信息以判断所述接入设备的设备类型，并将所述设备类型发送给逻辑处理模块；所述逻辑处理模块基于接收到的所述设备类型对所述接入设备进行逻辑处理。在一些实施方式中，方法还包括：所述逻辑处理模块基于接收到的所述设备类型，发送对应的信号到所述电源模块，以使所述电源模块对所述接入设备进行供电。本发明实施例的又一方面，还提供了一种计算机设备，包括：至少一个处理器；以及存储器，所述存储器存储有可在所述处理器上运行的计算机程序，所述计算机程序由所述处理器执行时实现如上方法的步骤。本发明实施例的再一方面，还提供了一种计算机可读存储介质，计算机可读存储介质存储有被处理器执行时实现如上方法步骤的计算机程序。本发明具有以下有益技术效果：通过硬件线路和逻辑编译实现OCP3.0网卡与E3硬盘的自动识别及逻辑处理，保证设备在随机接入系统后正常工作，解决了服务器的现有系统互联复杂，使用线缆较多，稳定性差等问题，使服务器设计更加简洁，减少了互联成本，提高了系统的稳定性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的实施例。图1为本发明提供的用于服务器的设备管理系统的一实施例的示意图；图2为本发明提供的用于服务器的设备管理系统的又一实施例的示意图；图3为本发明提供的用于服务器的设备管理方法的一实施例的框图；图4为本发明提供的计算机设备的一实施例的结构示意图；图5为本发明提供的计算机可读存储介质的一实施例的结构示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚明白，以下结合具体实施例，并参照附图，对本发明实施例进一步详细说明。需要说明的是，本发明实施例中所有使用“第一”和“第二”的表述均是为了区分两个相同名称非相同的实体或者非相同的参量，可见“第一”“第二”仅为了表述的方便，不应理解为对本发明实施例的限定，后续实施例对此不再一一说明。基于上述目的，本发明实施例的第一个方面，提出了一种用于服务器的设备管理系统的实施例。如图1所示，设备管理系统具体包括：接口模块110；分别与所述接口模块110连接的逻辑处理模块120、监控模块130、电源模块140，所述电源模块140和所述监控模块130还分别与所述逻辑处理模块120相连；与所述逻辑处理模块120连接的逻辑设置模块150；其中，所述监控模块130配置为读取接入设备的设备信息以判断所述接入设备的设备类型，并将所述设备类型发送给所述逻辑处理模块120；所述逻辑处理模块120配置为基于接收到的所述设备类型对所述接入设备进行逻辑处理。具体的，接口模块是基于EDSFF协议设计的连接器，例如GENZ连接器；接入设备为同样具有GENZ连接器的网卡或硬盘，例如OCP3.0网卡或E3硬盘；监控模块一般为基板管理控制器BMC；逻辑处理模块一般为复杂可编程逻辑器件CPLD。OCP3.0网卡接口使用GENZ 4C+连接器，包含140pin的基础信号和额外28pin的“OCP Bay”，“OCP Bay”主要包含NCSI、multi-host下需要增加的控制信号、时钟等，E3硬盘接口使用GENZ 1C/2C/4C连接器，分别对应X4/X8/X16的不同带宽，因此，E3硬盘可完全兼容在OCP3.0网卡的GENZ 4C+接口上。设备接入系统后，系统或服务器提供P3V3_STBY电给接入设备，P3V3_STBY电的供电来源可以为服务器上的VRM电压调节模块，也可以为系统中的电源模块，监控模块通过SMBUS访问设备上的电可擦只读存储器EEPROM，SMBUS是一种低速系统管理总线，常用于系统中对设备的管理，获取生产信息、型号、部件号等，以及一些设备的寄存器状态读取。因此，监控模块依据从接入设备的EEPROM中存储的设备类型信息和厂商信息，判断接入设备的设备类型，并将设备类型发送到CPLD；CPLD在拿到设备类型的信息后，对应进行不同的逻辑处理，OCP3.0网卡和E3硬盘需要做不同的逻辑处理。例如A10 pin，对于OCP3.0网卡说是PRSNTA，需要接到地，对于E3硬盘来说，需要控制硬盘上的Amber led，因此CPLD需要依据设备类型做不同的逻辑处理。本发明的实施例通过硬件线路和逻辑编译实现OCP3.0网卡与E3硬盘的自动识别及逻辑处理，保证设备在随机接入系统后正常工作，解决了服务器的现有系统互联复杂，使用线缆较多，稳定性差等问题，使服务器设计更加简洁，减少了互联成本，提高了系统的稳定性。在一些实施方式中，所述接入设备包括硬盘或网卡。在一些实施方式中，所述监控模块配置为响应于有接入设备连接到所述接口模块，基于所述接口模块读取所述接入设备的设备信息以判断所述设备的设备类型，并将所述设备类型发送给所述逻辑处理模块。在一些实施方式中，所述逻辑处理模块配置为基于接收到的所述设备类型，发送对应的信号到所述电源模块，以使所述电源模块对所述接入设备进行供电。具体的，CPLD基于读取到的设备类型，控制电源模块对接入设备进行供电。如果是OCP3.0网卡，CPLD控制电源模块提供P12V_STBY电，如果是E3硬盘，则在服务器开机后再控制电源模块给硬盘上电。在一些实施方式中，所述逻辑设置模块包括所述接入设备的配置信息；所述逻辑处理模块配置为基于接收到的所述设备类型，从所述逻辑设备模块获取对应的配置信息以对所述接入设备进行逻辑处理。具体的，逻辑设备包括接入设备的配置信息，例如，如表1所示的OCP3.0网卡与E3硬盘的pin脚定义，CPLD获取到设备类型后，从逻辑设备模块读取相应的配置信息，对接入设备进行逻辑处理。例如，对于B7-B9pin，对于OCP3.0网卡用作BIF功能，系统通过控制这3个pin通知网卡bifurcation信息，CPLD驱动输出编码给网卡，该编码依据配置确定；搭配E3硬盘时，相应地实现MFG/RFU/DUALPORTEN#功能。对于A10 pin，对于OCP3.0网卡是PRSNTA#，CPLD将该pin输出低，对于E3硬盘来说，需要控制硬盘上的Amber led，CPLD需要输出点灯控制信号。表1在一些实施方式中，设备管理系统还包括计算模块，所述计算模块配置为响应于服务器开机，向所述接入设备提供PCIE信号。具体的，该计算模块可以是CPU、PCH、PCIe Switch等提供PCIe信号的主机。开机后，计算模块提供PCIE信号给接入设备，由于接入设备的相关信号已通过CPLD进行逻辑处理，因此设备进入正常工作状态。如图2所示，为包括计算模块的设备管理系统的结构示意图。设备管理系统包括：接口模块；分别与所述接口模块连接的逻辑处理模块、监控模块、电源模块、计算模块，所述电源模块和所述监控模块还分别与所述逻辑处理模块相连；与所述逻辑处理模块连接的逻辑设置模块。设备接入设备管理系统后，设备管理系统提供P3V3_STBY电给接入设备，监控模块通过SMBUS访问接入设备上的电可擦只读存储器EEPROM，读取设备类型信息和厂商信息，以判断接入设备的设备类型，并将设备类型发送到CPLD；CPLD在拿到设备类型的信息后，控制电源模块对接入设备进行供电，并且对应不同的接入设备进行不同的逻辑处理；开机后，计算模块提供PCIE信号给接入设备，设备进入正常工作状态。基于同一发明构思，根据本发明的另一个方面，如图3所示，本发明的实施例还提供了一种用于服务器的设备管理方法，基于如上所述的设备管理系统，执行以下步骤：步骤S101、响应于有接入设备连接到接口模块，基于监控模块读取所述接入设备的设备信息以判断所述接入设备的设备类型，并将所述设备类型发送给逻辑处理模块；步骤S103、所述逻辑处理模块基于接收到的所述设备类型对所述接入设备进行逻辑处理。在一些实施方式中，方法还包括：所述逻辑处理模块基于接收到的所述设备类型，发送对应的信号到所述电源模块，以使所述电源模块对所述接入设备进行供电。基于同一发明构思，根据本发明的另一个方面，如图4所示，本发明的实施例还提供了一种计算机设备20，在该计算机设备20中包括处理器210以及存储器220，存储器220存储有可在处理器上运行的计算机程序221，处理器210执行程序时执行如上的方法的步骤。基于同一发明构思，根据本发明的另一个方面，如图5所示，本发明的实施例还提供了一种计算机可读存储介质30，计算机可读存储介质30存储有被处理器执行时执行如上方法的计算机程序310。最后需要说明的是，本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，可以通过计算机程序来指令相关硬件来完成，程序可存储于一计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，程序的存储介质可为磁碟、光盘、只读存储记忆体或随机存储记忆体等。上述计算机程序的实施例，可以达到与之对应的前述任意方法实施例相同或者相类似的效果。本领域技术人员还将明白的是，结合这里的公开所描述的各种示例性逻辑块、模块、电路和算法步骤可以被实现为电子硬件、计算机软件或两者的组合。为了清楚地说明硬件和软件的这种可互换性，已经就各种示意性组件、方块、模块、电路和步骤的功能对其进行了一般性的描述。这种功能是被实现为软件还是被实现为硬件取决于具体应用以及施加给整个系统的设计约束。本领域技术人员可以针对每种具体应用以各种方式来实现的功能，但是这种实现决定不应被解释为导致脱离本发明实施例公开的范围。以上是本发明公开的示例性实施例，但是应当注意，在不背离权利要求限定的本发明实施例公开的范围的前提下，可以进行多种改变和修改。根据这里描述的公开实施例的方法权利要求的功能、步骤和/或动作不需以任何特定顺序执行。此外，尽管本发明实施例公开的元素可以以个体形式描述或要求，但除非明确限制为单数，也可以理解为多个。应当理解的是，在本文中使用的，除非上下文清楚地支持例外情况，单数形式“一个”旨在也包括复数形式。还应当理解的是，在本文中使用的“和/或”是指包括一个或者一个以上相关联地列出的项目的任意和所有可能组合。上述本发明实施例公开实施例序号仅仅为了描述，不代表实施例的优劣。本领域普通技术人员可以理解实现上述实施例的全部或部分步骤可以通过硬件来完成，也可以通过程序来指令相关的硬件完成，程序可以存储于一种计算机可读存储介质中，上述提到的存储介质可以是只读存储器，磁盘或光盘等。所属领域的普通技术人员应当理解：以上任何实施例的讨论仅为示例性的，并非旨在暗示本发明实施例公开的范围被限于这些例子；在本发明实施例的思路下，以上实施例或者不同实施例中的技术特征之间也可以进行组合，并存在如上的本发明实施例的不同方面的许多其它变化，为了简明它们没有在细节中提供。因此，凡在本发明实施例的精神和原则之内，所做的任何省略、修改、等同替换、改进等，均应包含在本发明实施例的保护范围之内。
