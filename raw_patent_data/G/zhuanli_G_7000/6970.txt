标题title
结合可量化因素及不可量化因素判断的坐姿检测方法及系统
摘要abst
本发明的结合可量化因素及不可量化因素判断的坐姿检测方法及系统，包括：获取采集的待检测坐姿图像；对所述待检测坐姿图像同时进行坐姿约束判断以及不可量化因素判断，并获得坐姿约束判断结果以及不可量化因素判断结果；根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果，以对所述待检测坐姿图像进行标记本发明通过结合可量化因素及不可量化因素判断两种方式对待检测坐姿图像进行坐姿检测，直接可以通过终端设备对不良的学习姿势和长时间的连续学习进行提醒，不仅降低了使用成本还可以随身携带，并且还能极大地减少孩子对于家长人工督促的逆反情绪，达到更好的提醒孩子用眼习惯等效果。
权利要求书clms
1.一种结合可量化因素及不可量化因素判断的坐姿检测方法，其特征在于，包括：获取采集的待检测坐姿图像；对所述待检测坐姿图像同时进行坐姿约束判断以及不可量化因素判断，并获得坐姿约束判断结果以及不可量化因素判断结果；根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果，以对所述待检测坐姿图像进行标记；其中，所述坐姿检测结果包括：坐姿标准结果、坐姿不标准结果以及对象不存在结果中的一种或多种。2.根据权利要求1中所述的结合可量化因素及不可量化因素判断的坐姿检测方法，其特征在于，所述对所述待检测坐姿图像进行坐姿约束判断的方式包括：对所述待检测坐姿图像进行关键点识别，并获得各关键点的位置信息；基于各关键点的位置信息分别绘制眼部连接直线、肩部连接直线以及水平线；基于坐姿约束判断条件，根据所述眼部连接直线、肩部连接直线以及水平线获得坐姿约束判断结果；其中，所述坐姿约束判断结果包括：姿势符合要求结果以及坐姿不符合要求结果。3.根据权利要求2中所述的结合可量化因素及不可量化因素判断的坐姿检测方法，其特征在于，所述关键点包括：左眼关键点、右眼关键点、左肩关键点、右肩关键点以及至少两个水平关键点。4.根据权利要求2或3中所述的结合可量化因素及不可量化因素判断的坐姿检测方法，其特征在于，所述基于坐姿约束判断条件包括：相对水平线角度条件、眼部肩部直线相对角度条件以及眼部肩部直线相对距离条件中的一种或多种；其中，所述相对水平线角度条件包括：判断所述眼部连接直线与所述水平线所成角度以及所述肩部连接直线与所述水平线所成角度是否均小于第一角度阈值；所述眼部肩部直线相对角度条件包括：判断所述眼部连接直线与所述肩部连接直线所成角度是否小于第二角度阈值；所述眼部肩部直线相对距离条件：判断所述眼部连接直线与所述肩部连接直线的中点之间的距离是否大于第一距离阈值。5.根据权利要求1中所述的结合可量化因素及不可量化因素判断的坐姿检测方法，其特征在于，所述对所述待检测坐姿图像进行不可量化因素判断的方式包括：将所述待检测坐姿图像输入经过训练的经验模型，并输出对应所述待检测坐姿图像的不可量化因素判断结果；其中，所述经验模型的训练方式包括：利用分别标注有不可量化因素判断结果的多个样本图像训练所述经验模型；并且其中，所述不可量化因素判断结果包括：符合标准判断结果、不符合标准判断结果以及没有检测到主体判断结果。6.根据权利要求5所述的结合可量化因素及不可量化因素判断的坐姿检测方法，其特征在于，所述根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果的方式包括：基于坐姿约束判断以及不可量化因素判断的置信度，根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果。7.根据权利要求6所述的结合可量化因素及不可量化因素判断的坐姿检测方法，其特征在于，所述基于坐姿约束判断以及不可量化因素判断的置信度，根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果的方式包括：当所述不可量化因素判断结果为没有检测到主体判断结果时，则结合可量化因素及不可量化因素判断的坐姿检测结果为对象不存在结果；当所述不可量化因素判断结果为符合标准判断结果或不符合标准判断结果时，则基于所述坐姿约束判断以及不可量化因素判断的置信度，获得坐姿标准结果或坐姿不标准结果。8.根据权利要求7中所述的结合可量化因素及不可量化因素判断的坐姿检测方法，其特征在于，所述当所述不可量化因素判断结果为符合标准判断结果或不符合标准判断结果时，则基于所述坐姿约束判断以及不可量化因素判断的置信度，获得坐姿标准结果或坐姿不标准结果的方式包括：当所述不可量化因素判断结果为符合标准判断结果或不符合标准判断结果时，且所述坐姿约束判断以及不可量化因素判断的置信度均大于置信度阈值时，则采用逻辑与方式对所述坐姿约束判断结果以及不可量化因素判断结果进行运算，获得符合标准判断结果或不符合标准判断结果结合可量化因素及不可量化因素判断的坐姿检测结果；当所述不可量化因素判断结果为符合标准判断结果或不符合标准判断结果时，且所述坐姿约束判断以及不可量化因素判断的置信度不全部大于置信度阈值时，则选择置信度大的所述坐姿约束判断或不可量化因素判断所对应的所述坐姿约束判断结果或不可量化因素判断结果作为结合可量化因素及不可量化因素判断的坐姿检测结果。9.一种基于结合可量化因素及不可量化因素判断的坐姿检测系统，其特征在于，包括：获取模块，用于获取由图像采集设备采集的待检测坐姿图像；判断模块，连接所述获取模块，用于对所述待检测坐姿图像同时进行坐姿约束判断以及不可量化因素判断，并获得坐姿约束判断结果以及不可量化因素判断结果；检测结果获取模块，连接所述判断模块，用于根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果，以对所述待检测坐姿图像进行标记；其中，所述结合可量化因素及不可量化因素判断的坐姿检测结果包括：坐姿标准结果、坐姿不标准结果以及对象不存在结果中的一种或多种。10.根据权利要求9中所述的结合可量化因素及不可量化因素判断的坐姿检测系统，其特征在于，所述图像采集设备设于支架上，所述支架包括：支撑所述图像采集设备的支撑面板、与所述支撑面板连接的垂直立柱以及与所述垂直立柱连接的底板；其中，所述支撑面板与所述垂直立柱所成角度处于预设角度阈值范围；所述垂直立柱的高度处于预设高度阈值范围；所述底板距离采集对象最远边缘距离所述采集对象的距离为预设距离阈值范围。
说明书desc
技术领域本申请涉及坐姿矫正领域，尤其涉及结合可量化因素及不可量化因素判断的坐姿检测方法及系统。背景技术根据国家卫健委的数据显示，近视问题已经成为中国视力损伤的主要原因。这其中，用眼时长和用眼距离成为影响青少年视力的主要因素。国家卫生健康委的数据显示，青少年平均每天用眼时长在4小时以上，超出推荐值的两倍有余。全天用眼平均距离为32.3cm，接近于33cm的标准线，但仍有17.7％的青少年平均每日用眼距离低于标准线。传统的坐姿监督大多借用外来物理设备进行坐姿矫正，包括人体工程学的座椅、需要长时间坚持佩戴的背部矫正弹力带等。使用传统物理设备进行坐姿矫正存在着使用成本高、随身携带困难等问题，难以使学生、上班族等坐姿用眼高频人群养成良好的坐姿用眼习惯。发明内容鉴于以上所述现有技术的缺点，本申请的目的在于提供结合可量化因素及不可量化因素判断的坐姿检测方法及系统，解决现有技术中坐姿矫正使用成本高、随身携带困难等问题。为实现上述目标及其他相关目标，本申请提供一种结合可量化因素及不可量化因素判断的坐姿检测系统，包括：获取采集的待检测坐姿图像；对所述待检测坐姿图像同时进行坐姿约束判断以及不可量化因素判断，并获得坐姿约束判断结果以及不可量化因素判断结果；根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果，以对所述待检测坐姿图像进行标记；其中，所述坐姿检测结果包括：坐姿标准结果、坐姿不标准结果以及对象不存在结果中的一种或多种。于本申请的一或多个实施例中，所述对所述待检测坐姿图像进行坐姿约束判断的方式包括：对所述待检测坐姿图像进行关键点识别，并获得各关键点的位置信息；基于各关键点的位置信息分别绘制眼部连接直线、肩部连接直线以及水平线；基于坐姿约束判断条件，根据所述眼部连接直线、肩部连接直线以及水平线获得坐姿约束判断结果；其中，所述坐姿约束判断结果包括：姿势符合要求结果以及坐姿不符合要求结果。于本申请的一或多个实施例中，所述关键点包括：左眼关键点、右眼关键点、左肩关键点、右肩关键点以及至少两个水平关键点。于本申请的一或多个实施例中，所述基于坐姿约束判断条件包括：相对水平线角度条件、眼部肩部直线相对角度条件以及眼部肩部直线相对距离条件中的一种或多种；其中，所述相对水平线角度条件包括：判断所述眼部连接直线与所述水平线所成角度以及所述肩部连接直线与所述水平线所成角度是否均小于第一角度阈值；所述眼部肩部直线相对角度条件包括：判断所述眼部连接直线与所述肩部连接直线所成角度是否小于第二角度阈值；所述眼部肩部直线相对距离条件：判断所述眼部连接直线与所述肩部连接直线的中点之间的距离是否大于第一距离阈值。于本申请的一或多个实施例中，所述对所述待检测坐姿图像进行不可量化因素判断的方式包括：将所述待检测坐姿图像输入经过训练的经验模型，并输出对应所述待检测坐姿图像的不可量化因素判断结果；其中，所述经验模型的训练方式包括：利用分别标注有不可量化因素判断结果的多个样本图像训练所述经验模型；并且其中，所述不可量化因素判断结果包括：符合标准判断结果、不符合标准判断结果以及没有检测到主体判断结果。于本申请的一或多个实施例中，所述根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果的方式包括：基于坐姿约束判断以及不可量化因素判断的置信度，根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果。于本申请的一或多个实施例中，所述基于坐姿约束判断以及不可量化因素判断的置信度，根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果的方式包括：当所述不可量化因素判断结果为没有检测到主体判断结果时，则结合可量化因素及不可量化因素判断的坐姿检测结果为对象不存在结果；当所述不可量化因素判断结果为符合标准判断结果或不符合标准判断结果时，则基于所述坐姿约束判断以及不可量化因素判断的置信度，获得坐姿标准结果或坐姿不标准结果。于本申请的一或多个实施例中，所述当所述不可量化因素判断结果为符合标准判断结果或不符合标准判断结果时，则基于所述坐姿约束判断以及不可量化因素判断的置信度，获得坐姿标准结果或坐姿不标准结果的方式包括：当所述不可量化因素判断结果为符合标准判断结果或不符合标准判断结果时，且所述坐姿约束判断以及不可量化因素判断的置信度均大于置信度阈值时，则采用逻辑与方式对所述坐姿约束判断结果以及不可量化因素判断结果进行运算，获得符合标准判断结果或不符合标准判断结果结合可量化因素及不可量化因素判断的坐姿检测结果；当所述不可量化因素判断结果为符合标准判断结果或不符合标准判断结果时，且所述坐姿约束判断以及不可量化因素判断的置信度不全部大于置信度阈值时，则选择置信度大的所述坐姿约束判断或不可量化因素判断所对应的所述坐姿约束判断结果或不可量化因素判断结果作为结合可量化因素及不可量化因素判断的坐姿检测结果。为实现上述目标及其他相关目标，本申请提供一种结合可量化因素及不可量化因素判断的坐姿检测系统，包括：获取模块，用于获取由图像采集设备采集的待检测坐姿图像；判断模块，连接所述获取模块，用于对所述待检测坐姿图像同时进行坐姿约束判断以及不可量化因素判断，并获得坐姿约束判断结果以及不可量化因素判断结果；检测结果获取模块，连接所述判断模块，用于根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果，以对所述待检测坐姿图像进行标记；其中，所述结合可量化因素及不可量化因素判断的坐姿检测结果包括：坐姿标准结果、坐姿不标准结果以及对象不存在结果中的一种或多种。于本申请的一或多个实施例中，所述图像采集设备设于支架上，所述支架包括：支撑所述图像采集设备的支撑面板、与所述支撑面板连接的垂直立柱以及与所述垂直立柱连接的底板；其中，所述支撑面板与所述垂直立柱所成角度处于预设角度阈值范围；所述垂直立柱的高度处于预设高度阈值范围；所述底板距离采集对象最远边缘距离所述采集对象的距离为预设距离阈值范围。如上所述，本申请的结合可量化因素及不可量化因素判断的坐姿检测方法及系统，本发明通过结合可量化因素及不可量化因素判断两种方式对待检测坐姿图像进行坐姿检测，直接可以通过终端设备对不良的学习姿势和长时间的连续学习进行提醒，不仅降低了使用成本还可以随身携带，并且还能极大地减少孩子对于家长人工督促的逆反情绪，在减小家长工作量的同时，达到更好的提醒孩子用眼习惯等效果。附图说明图1显示为本申请实施例中结合可量化因素及不可量化因素判断的坐姿检测方法的流程示意图。图2显示为本申请实施例中眼部连接直线、肩部连接直线以及水平线的绘制示意图。图3显示为本申请实施例中结合可量化因素及不可量化因素判断的坐姿检测方法的流程示意图。图4显示为本申请实施例中结合可量化因素及不可量化因素判断的坐姿检测方法的流程示意图。图5显示为本申请实施例中结合可量化因素及不可量化因素判断的坐姿检测方法的流程示意图。图6显示为本申请实施例中结合可量化因素及不可量化因素判断的坐姿检测系统的结构示意图。图7显示为本申请实施例中支架的结构示意图。具体实施方式以下通过特定的具体实例说明本申请的实施方式，本领域技术人员可由本说明书所揭露的内容轻易地了解本申请的其他优点与功效。本申请还可以通过另外不同的具体实施方式加以实施或应用系统，本说明书中的各项细节也可以基于不同观点与应用系统，在没有背离本申请的精神下进行各种修饰或改变。需说明的是，在不冲突的情况下，本申请中的实施例及实施例中的特征可以相互组合。下面以附图为参考，针对本申请的实施例进行详细说明，以便本申请所属技术领域的技术人员能够容易地实施。本申请可以以多种不同形态体现，并不限定于此处说明的实施例。为了明确说明本申请，省略与说明无关的部件，对于通篇说明书中相同或类似的构成要素，赋予了相同的参照符号。在通篇说明书中，当说某部件与另一部件“连接”时，这不仅包括“直接连接”的情形，也包括在其中间把其它元件置于其间而“间接连接”的情形。另外，当说某种部件“包括”某种构成要素时，只要没有特别相反的记载，则并非将其它构成要素排除在外，而是意味着可以还包括其它构成要素。当说某部件在另一部件“之上”时，这可以是直接在另一部件之上，但也可以在其之间伴随着其它部件。当对照地说某部件“直接”在另一部件“之上”时，其之间不伴随其它部件。虽然在一些实例中术语第一、第二等在本文中用来描述各种元件，但是这些元件不应当被这些术语限制。这些术语仅用来将一个元件与另一个元件进行区分。例如，第一接口及第二接口等描述。再者，如同在本文中所使用的，单数形式“一”、“一个”和“该”旨在也包括复数形式，除非上下文中有相反的指示。应当进一步理解，术语“包含”、“包括”表明存在所述的特征、步骤、操作、元件、组件、项目、种类、和/或组，但不排除一个或多个其他特征、步骤、操作、元件、组件、项目、种类、和/或组的存在、出现或添加。此处使用的术语“或”和“和/或”被解释为包括性的，或意味着任一个或任何组合。因此，“A、B或C”或者“A、B和/或C”意味着“以下任一个：A；B；C；A和B；A和C；B和C；A、B和C”。仅当元件、功能、步骤或操作的组合在某些方式下内在地互相排斥时，才会出现该定义的例外。此处使用的专业术语只用于言及特定实施例，并非意在限定本申请。此处使用的单数形态，只要语句未明确表示出与之相反的意义，那么还包括复数形态。在说明书中使用的“包括”的意义是把特定特性、区域、整数、步骤、作业、要素及/或成份具体化，并非排除其它特性、区域、整数、步骤、作业、要素及/或成份的存在或附加。虽然未不同地定义，但包括此处使用的技术术语及科学术语，所有术语均具有与本申请所属技术领域的技术人员一般理解的意义相同的意义。普通使用的字典中定义的术语追加解释为具有与相关技术文献和当前提示的内容相符的意义，只要未进行定义，不得过度解释为理想的或非常公式性的意义。传统的坐姿监督大多借用外来物理设备进行坐姿矫正，包括人体工程学的座椅、需要长时间坚持佩戴的背部矫正弹力带等。使用传统物理设备进行坐姿矫正存在着使用成本高、随身携带困难等问题，难以使学生、上班族等坐姿用眼高频人群养成良好的坐姿用眼习惯。因此，鉴于现有技术的缺失，本发明通过结合可量化因素及不可量化因素判断两种方式对待检测坐姿图像进行坐姿检测，直接可以通过终端设备对不良的学习姿势和长时间的连续学习进行提醒，不仅降低了使用成本还可以随身携带，并且还能极大地减少孩子对于家长人工督促的逆反情绪，在减小家长工作量的同时，达到更好的提醒孩子用眼习惯等效果。下面以附图为参考，针对本发明的实施例进行详细说明，以便本发明所述技术领域的技术人员能够容易地实施。本发明可以以多种不同形态体现，并不限于此处说明的实施例。如图1所示，展示本发明实施例中的结合可量化因素及不可量化因素判断的坐姿检测方法的流程示意图。所述方法包括：步骤S11：获取采集的待检测坐姿图像。可选的，所述待检测坐姿图像可以为视频，也可以为静态图片。步骤S12：对所述待检测坐姿图像同时进行坐姿约束判断以及不可量化因素判断，并获得坐姿约束判断结果以及不可量化因素判断结果。可选的，非标准的坐姿的判定因素不能仅由可量化因素决定，因此在模型构建的过程中充分考虑了其他因素对坐姿产生的影响，如身体的大幅度倾斜等，这类无法被精准量化的姿势将被纳入“其他因素”，因此还要结合不可量化因素判断，即将所述待检测坐姿图像进行可量化因素判断及不可量化因素判断并行独立判断，并分别获得对应所述可量化因素判断的坐姿约束判断结果以及对应所述不可量化因素判断的不可量化因素判断结果。可选的，所述对所述待检测坐姿图像进行坐姿约束判断的方式包括：对所述待检测坐姿图像进行关键点识别，并获得各关键点的位置信息；基于各关键点的位置信息分别绘制眼部连接直线、肩部连接直线以及水平线；基于坐姿约束判断条件，根据所述眼部连接直线、肩部连接直线以及水平线获得坐姿约束判断结果；其中，所述坐姿约束判断结果包括：姿势符合要求结果以及坐姿不符合要求结果。可选的，基于TensorFlow平台提供的成熟姿势识别视觉模型PostNet对所述待检测坐姿图像进行关键点识别；具体的，将所述待检测坐姿图像输入PostNet，PostNet可以根据输入的图像构建出支撑人体骨架的关键点，以通过分析所需关键点的相对位置和距离就可以辅助判断当前人体的姿势表现。可选的，基于TensorFlow平台提供的成熟姿势识别视觉模型PostNet对所述待检测坐姿图像进行关键点识别的步骤具体包括；预处理过程、推理过程以及后处理环节；其中，所述预处理过程包括：将待检测坐姿图像裁剪为符合模型宽高比的图像，然后根据预先设定的精度对图像进行处理，设定的精度越高，图像就会被分割为更多小的图像单元，预测出的模型精度也会随之提高，但处理时间和设备能耗也将会响应提升。所述推理过程包括：经过预处理裁切和分割的图像输入PostNet，并输出关键点的位置信息。需要注意的是，由于图像经过裁剪和放缩，此处的位置信息并非最终信息，需要经过坐标变换后才能得出原图中的位置坐标信息。所述后处理过程包括：PostNet会根据模型输入的大小将坐标变换为匹配原图的数值，并输出作出该判断的置信度得分，该得分分布在0-1之间，其中，得分越高则判断越精准。举例来说，在输入图像中左眼关键点的坐标位置和该判断的置信度的输出格式为："part":"leftEye","score":0.98781454563141"position":"y":71.839515686035,"x":246.00454711914.可选的，所述关键点包括：左眼关键点、右眼关键点、左肩关键点、右肩关键点以及至少两个水平关键点。需要说明的是，左眼关键点以及右眼关键点的选取最好保持一致，例如眼球中心位置，以保证更准确的检测；同样的，左肩关键点的右肩关键点选取最好也保持一致。所述水平关键点为图像的任一条水平线上的至少两个点，例如桌面水平线上的关键点。可选的，所述基于各关键点的位置信息分别绘制眼部连接直线、肩部连接直线以及水平线包括：根据左眼关键点以及右眼关键点的位置信息绘制眼部连接直线，根据左肩关键点以及右肩关键点的位置信息绘制肩部连接直线，根据各水平关键点的位置信息绘制水平线。需要说明的是，所述眼部连接直线、肩部连接直线以及水平线分别生成有一二维表达式。可选的，基于坐姿约束判断条件，根据所述眼部连接直线、肩部连接直线以及水平线获得坐姿约束判断结果；其中，所述坐姿约束判断结果包括：姿势符合要求结果以及坐姿不符合要求结果；具体的，根据所述眼部连接直线、肩部连接直线以及水平线判断为符合坐姿约束判断条件，则输出姿势符合要求结果；否则，则输出坐姿不符合要求结果。可选的，如图2所示，所述待坐姿检测图像绘制有所述眼部连接直线1、肩部连接直线2以及水平线3；所述基于坐姿约束判断条件包括：相对水平线角度条件、眼部肩部直线相对角度条件以及眼部肩部直线相对距离条件中的一种或多种；其中，所述相对水平线角度条件包括：判断所述眼部连接直线1与所述水平线3所成角度A以及所述肩部连接直线2与所述水平线3所成角度B是否均小于第一角度阈值；所述眼部肩部直线相对角度条件包括：判断所述眼部连接直线1与所述肩部连接直线2所成角度C是否小于第二角度阈值；所述眼部肩部直线相对距离条件：判断所述眼部连接直线1与所述肩部连接直线2的中点之间的距离是否大于第一距离阈值。需要注意的是，所述第一角度阈值、第二角度阈值以及第一距离阈值可以根据具体需求而设定；所述第一角度阈值以及第二角度阈值可以相同也可以不同。优选的，所述第一角度阈值以及第二角度阈值为15度。可选的，值得注意的是，结合生活实际，现实情况中人的坐姿模型复杂，在肢体姿势发生剧烈变化时可能无法通过上述三条约束条件来唯一判定人体的坐姿标准与否，因此需要其他辅助条件来帮助决策当前姿势的类别。因此引入不可量化因素判断来进行检测；所述对所述待检测坐姿图像进行不可量化因素判断的方式包括：将所述待检测坐姿图像输入经过训练的经验模型，并输出对应所述待检测坐姿图像的不可量化因素判断结果；其中，所述经验模型的训练方式包括：利用分别标注有不可量化因素判断结果的多个样本图像训练所述经验模型；并且其中，所述不可量化因素判断结果包括：符合标准判断结果、不符合标准判断结果以及没有检测到主体判断结果。其中，所述经验模型通过标注三类不同种类的图像，使用有监督学习的方法对输入图像进行分类。可选的，将已经收集到的带标记不可量化因素判断结果的样本图像根据用途划分为训练集和测试集两部分，其中训练集用于生成卷积神经网络中各层的卷积函数和全响应层的参数，测试集用于在每次生成参数后针对训练的模型提供评估结果。由于量化因素判断和非量化因素判断在数据处理时间和预期输出类别两方面的差异，需要针对两类判断方式的特点做耦合，综合两类判断方式的实际性能表现和输出结果后得出一致且置信度较高的判断结果，因此提出步骤S13。步骤S13：根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果，以对所述待检测坐姿图像进行标记。详细来说，所述坐姿检测结果包括：坐姿标准结果、坐姿不标准结果以及对象不存在结果中的一种或多种。可选的，由于两类判断方式使用的技术方案和实现方式有所不同，根据输入内容中潜在人物的数量和清晰度的不同，在处理时间上可能产生较大差异。如图3所示，在实际测试场景中，单一进程的处理时间意外延长会导致前端界面的短时间无响应。为了保证前端反馈样式的及时有效，当两类进程中任何一方率先完成结果判定后，若另外一个进程在结果输出的100ms内未输出有效结果，则中止尚未输出结果的进程，以率先输出判定结果的进程为本关键帧的坐姿检测结果。可选的，在所述坐姿检测结果只包括坐姿标准结果以及坐姿不标准结果以及所述不可量化因素判断结果只包括符合标准判断结果以及不符合标准判断结果的情况下，则采用逻辑与方式对所述坐姿约束判断结果以及不可量化因素判断结果进行运算，如图4所示，即只有所述坐姿约束判断结果为姿势符合要求结果以及不可量化因素判断结果为符合标准判断结果时，所述坐姿检测结果才为坐姿标准结果；若所述坐姿约束判断结果为姿势不符合要求结果或不可量化因素判断结果为不符合标准判断结果时，则所述坐姿检测结果为坐姿不标准结果。可选的，坐姿约束判断输出的坐姿约束判断结果只能判定用户的姿势是否符合预先设定的标准，而经验模型除了可以判断姿势是否标准外，还可以判断是否检测到了单一重要主体，因此需要针对两类模型的输出结果和置信度作出逻辑判断。步骤S13包括：基于坐姿约束判断以及不可量化因素判断的置信度，根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果。可选的，所述基于坐姿约束判断以及不可量化因素判断的置信度，根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果的方式包括：当所述不可量化因素判断结果为没有检测到主体判断结果时，则结合可量化因素及不可量化因素判断的坐姿检测结果为对象不存在结果；当所述不可量化因素判断结果为符合标准判断结果或不符合标准判断结果时，则基于所述坐姿约束判断以及不可量化因素判断的置信度，获得坐姿标准结果或坐姿不标准结果。可选的，所述当所述不可量化因素判断结果为符合标准判断结果或不符合标准判断结果时，则基于所述坐姿约束判断以及不可量化因素判断的置信度，获得坐姿标准结果或坐姿不标准结果的方式包括：当所述不可量化因素判断结果为符合标准判断结果或不符合标准判断结果时，且所述坐姿约束判断以及不可量化因素判断的置信度均大于置信度阈值时，则采用逻辑与方式对所述坐姿约束判断结果以及不可量化因素判断结果进行运算，获得符合标准判断结果或不符合标准判断结果结合可量化因素及不可量化因素判断的坐姿检测结果；具体的，即只有所述坐姿约束判断结果为姿势符合要求结果以及不可量化因素判断结果为符合标准判断结果时，所述坐姿检测结果才为坐姿标准结果；若所述坐姿约束判断结果为姿势不符合要求结果或不可量化因素判断结果为不符合标准判断结果时，则所述坐姿检测结果为坐姿不标准结果。当所述不可量化因素判断结果为符合标准判断结果或不符合标准判断结果时，且所述坐姿约束判断以及不可量化因素判断的置信度不全部大于置信度阈值时，则选择置信度大的判断方式，即所述坐姿约束判断或不可量化因素所对应的所述坐姿约束判断结果或不可量化因素判断结果作为结合可量化因素及不可量化因素判断的坐姿检测结果。可选的，对所述待检测坐姿图像进行标记的方式包括:将对应坐姿标准结果、坐姿不标准结果以及对象不存在结果的标记信息标注在所述图像上，所述标记信息可以为文字或图案，在本申请中不做限定。例如：nopeople代表图片中没有人正坐在桌前；abnormal：图片中有人正坐在桌前，但是这个人的姿势需要矫正；normal：图片中有人正坐在桌前，并且这个人姿势标准。需要说明的是，所述置信度阈值根据需求而设定，一般来说，在0-1范围内。为了更好的描述所述结合可量化因素及不可量化因素判断的坐姿检测方法，提供一具体实施例进行说明；实施例1：一种结合可量化因素及不可量化因素判断的坐姿检测方法。首先利用图像采集设备进行待检测坐姿图像的采集，图像采集设备使用放置在支架的智能手机的前置摄像头完成，前置摄像头的部分参数如下：有效像素：1200万光圈：f/2.2不可光学变焦最大采集图像分辨率：3840*2160；一次完整的检测步骤分为三个主要步骤：设备调试、图像采集、坐姿检测；所述设备调试包括：在开始图像采集工作前，需要对摄像头的硬件参数进行调整，为了在满足分析需求的前提下尽可能降低后续工作的设备性能负载，将前置摄像头的采集分辨率调整为1920*1080，并限定最高帧速率为30。为了保证图像拍摄角度和视野范围一致，在图像采集的过程中可以适当调整支架的各参数，使得被采集人的上身尽量处于采集图像的中央位置，且为了控制支架各参数在每次图像采集开始时保持相对一致。所述支架包括：支撑面板、垂直立柱以及支架底板；支架的参数及其满足的条件包括：支撑面板和垂直立柱之间的角度α满足：25°≤α≤30°；垂直立柱到桌面的高度H满足：10.0cm≤H≤12.0cm；支架底板到桌面边缘的距离L满足：40.0cm≤L≤45.0cm。所述图像采集：图像采集包含两个主要采集对象：有人员的室内阅读场景、无人的室内场景有人员的室内阅读场景具体采集步骤如下：完成设备调试步骤后，在保证室内光照条件良好稳定且无其他人员走动的前提下，邀请参加测试的人员坐在桌前，启动前置摄像头的定时拍照功能，设定拍摄时间间隔为1s，并邀请测试人员随意阅读平放于桌面上的阅读材料，完成“标准阅读”、“低角度阅读”、“任意姿势阅读”等阅读任务，单个测试人员的采集时长为2分钟。无人的室内场景采集步骤如下:完成设备调试步骤后，在保证室内光照条件良好稳定的前提下，在设备放置的桌前不安排任何的人员，启动前置摄像头的定时拍照功能，设定拍摄时间间隔为1s，并邀请测试人员随意在远离桌面但仍在摄像范围内的区域内随意走动。单次室内场景的采集时间为2分钟。完成图像采集工作后，将智能手机连接至电脑并以时间序导出捕获的采样照片，将照片按照两组场景分别存于对应文件夹中。所述坐姿检测包括：获取采集的图像；使用TensorFlow平台提供的成熟姿势识别视觉模型PostNet完成对左眼关键点、右眼关键点、左肩关键点、右肩关键点以及两个水平关键点的位置检测；PostNet使用下述配置项完成人体关键部位的识别：架构：MobileNetV1分辨率：宽度1080，高度1920权重：0.75。根据基于各关键点的位置信息分别绘制眼部连接直线、肩部连接直线以及水平线的二维表达式，就可以判断出眼部连接直线和肩部连接直线的相对角度和相对距离以及眼部连接直线和肩部连接直线分别与水平线的相对角度。并根据以下原则判断输入图像的姿势是否标准：眼部连接直线和肩部连接直线应分别与水平线保持15°以内的夹角，以此分别保证眼部和肩部对于桌面的相对水平。眼部连接直线和肩部连接直线之间应保持15°以内的夹角，以此保证头部姿势的相对水平眼部连接直线和肩部连接直线中点连线应大于等于画面高度像素的5％，以此避免过度低头导致的用眼距离过近。若以上三个条件有任何一个不满足要求，则针对本图像输出“0”，否则输出“1”经过以上环节，就可以根据输入的单一图像，根据量化的辨别指标，判断当前坐姿的标准与否。与PostNet完成对左眼关键点、右眼关键点、左肩关键点、右肩关键点以及两个水平关键点的位置检测同时进行将所述待检测坐姿图像输入经过训练的经验模型，经验模型使用上文中手动标记的数据进行模型训练，通过标注三类不同种类的图片，使用有监督学习的方法对输入图像进行分类。将带标记数据去除重复姿势和动作，共得到480张不同姿势的人体坐姿照片，将其完成标签内容的标注后，将所有带标签图片以3:1的比例随机分配给训练集和测试集，以对所述经验模型进行训练和测试。根据实际场景需求，模型除了需要辨别当前输入的图像是否为标准坐姿以外，还应能够分辨当前输入图像是否包含要检测的目标人体。综上所述，经验模型中预期的输出有三类：输出为“0”；输出为“1”；输出为“-1”；通过在数据收集阶段对不同姿势的采集和分类，使用有监督学习的方法，可以有效地弥补在量化模型之外的非预期姿势，提高边缘场景下对姿势判断的准确性。通过调用Azure提供的CustomVisionAPI对已经标记的数据进行共计四次的迭代训练，得到模型的预测准确度为97.2％。对图像同时进行坐姿约束判断以及不可量化因素判断后，由于量化模型输出的最终结果只能判定用户的姿势是否符合预先设定的标准，而经验模型除了可以判断姿势是否标准外，还可以判断是否检测到了单一重要主体，因此需要针对两类模型的输出结果和置信度作出逻辑判断，如图5所示，具体的判定条件如下：当经验模型输出的结果为“-1”时，直接输出“-1”；当经验模型输出的结果非“-1”且置信概率均高于0.5时，使用“逻辑与”运算两个模型的输出，并输出最终的结果；当经验模型输出的结果非“-1”且置信概率不都高于0.5时，采用两个模型中置信概率较高的结果作为输出结果。上述算法模型已在Apple手机中实现，由于无需后台服务器支持，只需要一个Apple手机无需联网即可实现实时检测用户坐姿，准确率和响应速度都达到实用标准。与上述实施例原理相似的是，本发明提供一种结合可量化因素及不可量化因素判断的坐姿检测系统，可以应用于终端中，例如手机，平板电脑等终端。以下结合附图提供具体实施例：如图6展示本发明实施例中的一种结合可量化因素及不可量化因素判断的坐姿检测系统的结构示意图。所述系统包括：获取模块61，用于获取由图像采集设备60采集的待检测坐姿图像；判断模块62，连接所述获取模块61，用于对所述待检测坐姿图像同时进行坐姿约束判断以及不可量化因素判断，并获得坐姿约束判断结果以及不可量化因素判断结果；检测结果获取模块63，连接所述判断模块62，用于根据所述坐姿约束判断结果以及不可量化因素判断结果，获得结合可量化因素及不可量化因素判断的坐姿检测结果，以对所述待检测坐姿图像进行标记；其中，所述结合可量化因素及不可量化因素判断的坐姿检测结果包括：坐姿标准结果、坐姿不标准结果以及对象不存在结果中的一种或多种。需说明的是，应理解图6系统实施例中的各个模块的划分仅仅是一种逻辑功能的划分，实际实现时可以全部或部分集成到一个物理实体上，也可以物理上分开。且这些模块可以全部以软件通过处理元件调用的形式实现；也可以全部以硬件的形式实现；还可以部分模块通过处理元件调用软件的形式实现，部分模块通过硬件的形式实现；例如各模块可以是被配置成实施以上方法的一个或多个集成电路，例如：一个或多个特定集成电路，或，一个或多个微处理器，或，一个或者多个现场可编程门阵列等。再如，当以上某个模块通过处理元件调度程序代码的形式实现时，该处理元件可以是通用处理器，例如中央处理器或其它可以调用程序代码的处理器。再如，这些模块可以集成在一起，以片上系统的形式实现。因此，由于该结合可量化因素及不可量化因素判断的坐姿检测系统的实现原理已在前述实施例中进行了叙述，因此此处不作重复赘述。可选的，所述图像采集设备设于支架上，如图7所示，所述支架包括：支撑所述图像采集设备的支撑面板71、与所述支撑面板71连接的垂直立柱72以及与所述垂直立柱72连接的底板73；为了保证图像拍摄角度和视野范围一致，在图像采集的过程中可以适当调整支架的三个参数，使得被采集人的上身尽量处于采集图像的中央位置，且为了控制上述参数在每次图像采集开始时保持相对一致，即参数调节标准包括：所述支撑面板71与所述垂直立柱72所成角度α处于预设角度阈值范围；所述垂直立柱72的高度H处于预设高度阈值范围；所述底板73距离采集对象最远边缘距离所述采集对象的距离L为预设距离阈值范围。在一具体实施例中，所述撑面板和垂直立柱之间的角度α满足：25°≤α≤30°；垂直立柱到桌面的高度H满足：10.0cm≤H≤12.0cm支架底部到桌面边缘的距离L满足：40.0cm≤L≤45.0cm。综上所述，本申请的结合可量化因素及不可量化因素判断的坐姿检测方法及系统，本发明通过结合可量化因素及不可量化因素判断两种方式对待检测坐姿图像进行坐姿检测，直接可以通过终端设备对不良的学习姿势和长时间的连续学习进行提醒，不仅降低了使用成本还可以随身携带，并且还能极大地减少孩子对于家长人工督促的逆反情绪，在减小家长工作量的同时，达到更好的提醒孩子用眼习惯等效果。上述实施例仅例示性说明本申请的原理及其功效，而非用于限制本申请。任何熟悉此技术的人士皆可在不违背本申请的精神及范畴下，对上述实施例进行修饰或改变。因此，举凡所属技术领域中具有通常知识者在未脱离本申请所揭示的精神与技术思想下所完成的一切等效修饰或改变，仍应由本申请的权利要求所涵盖。
