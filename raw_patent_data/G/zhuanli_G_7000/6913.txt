标题title
面向电池包的三坐标测量自动规划方法
摘要abst
本发明提出了一种面向电池包的三坐标测量自动规划方法，该方法包括模型前处理、检测特征分类、可达性分析、基于安全空间构建的路径规划等关键步骤。与现有的箱体结构的检测规划方法相比，因考虑了复杂结构的检测特征分类与自动避障策略，使规划过程效率更高、规划路径更短。本发明实现了面向电池包零件无碰撞、高效率的检测规划，提高了智能三坐标测量机的自动化程度与检测待测零部件效率，加快了生产节奏。
权利要求书clms
1.一种面向电池包的三坐标测量自动规划方法，其特征在于，包括：S101、提取网格节点空间坐标值，整理待测零部件测量特征信息；S102、利用静态碰撞检测算法确定探针测量角度集合，并在三坐标测量机与待测零部件不干涉条件下，确定待检测特征所需要的接长杆长度；S103、对同一类接长杆下满足全部测点最小覆盖的可达性角度进行聚类，并使测量机在检测过程中采用以某一角度定姿态的触测方式；S104、基于测点距离判断方法初步确定某一角度下全部测点的初始检测序列；S105、根据某一定姿态下测量机参数构建不同尺寸的测量安全空间，以保证测量机在空间内运动与零件无干涉；S106、对于在步骤S104确定的初始检测序列中，将任意相邻两测点间在S105中构建的测量安全空间内进行局部路径规划；S107、优化局部路径，使路径转折点最少，路径长度最短；S108、在测针以一种聚类下的角度完成测量后，将测头移动到安全平面外，转动测头角度至下一待测角度，并重复步骤S104至步骤S107；S109、在以当前接长杆完成测量后，将测头移动到安全平面外，更换接长杆并重复步骤S104至步骤S108，最终将不同类别测点组内的最优测量路径进行连接，构成遍历待测零部件所有测量特征的无碰撞最优测量路径。2.根据权利要求1所述的面向电池包的三坐标测量自动规划方法，其特征在于，在步骤S101中，使用有限元软件对所要测量的待测零部件进行自动网格划分，提取出网格节点的空间坐标值作为待测零部件点云信息；准备好待测零部件测量特征信息，包括空间坐标值、矢量方向、尺寸大小及类型，并根据触测距离计算出测量特征对应逼近点的空间坐标值。3.根据权利要求1所述的面向电池包的三坐标测量自动规划方法，其特征在于，在步骤S102中，利用静态碰撞检测算法针对每个测量特征进行判别；选择常用的接长杆长度规格，当部分测量特征使用该规格容易造成机械臂与待测零部件碰撞时，通过减少或增加的方式确保静态状态下机械臂与待测零部件不发生碰撞。4.根据权利要求1所述的面向电池包的三坐标测量自动规划方法，其特征在于，在步骤S103中，对同一类接长杆下满足全部测点最小覆盖的可达性角度进行聚类，尽可能减少测头角度的转换次数，并使测量机在检测任意一类特征的过程中采用满足该类的定姿态触测方式。5.根据权利要求1所述的面向电池包的三坐标测量自动规划方法，其特征在于，在步骤S105中，根据某一定姿态下测量机参数构建不同尺寸的测量安全空间，将测头包围盒遍历模型，通过拟合表面得到测量安全空间，以保证测量机在空间内运动与零件无干涉。6.根据权利要求1所述的面向电池包的三坐标测量自动规划方法，其特征在于，步骤S106中，在步骤S104确定的初始检测序列中，将任意相邻两测点间在S105中构建的测量安全空间内采用A*算法进行局部路径规划。7.根据权利要求1所述的面向电池包的三坐标测量自动规划方法，其特征在于，在步骤S107中，通过对A*算法获取的局部路径进行优化，使路径转折点最少，路径长度最短。
说明书desc
技术领域本发明涉及一种测量设备的路径规划方法，尤其涉及一种面向电池包下箱体结构的三坐标测量的自动检测规划方法。背景技术电池包作为电动车中最为重要的组成部分，其零件装配尺寸偏差直接影响到电池的散热性、稳定性等，且直接反映产品外观、精度、匹配性能，超差零部件为不合格产品，增加生产成本。三坐标测量机作为广泛使用的检测设备，应用于机械零件、钣金件等尺寸检测，评估产品制造质量和与初始设计意图的一致性，反映产品的制造精度。三坐标测量机需要接触特征进行测量，电池包零件由于结构特殊，测量特征数目众多，得到遍历所有测量特征的完整测量路径需要耗费大量人力和时间成本，且最终的路径难以保证最优。路径自动规划的方法主要包括“先全局后局部”以及“先局部后全局”两类。“先全局后局部”的策略即按照一定规则先对所有特征的检测顺序进行排列，再针对特征间的局部路径进行碰撞探测与规避。Ji和Li基于蚁群算法解决了关系矩阵建立和有效路径搜索的难题，实现了增压器叶轮的测量路径规划。Ruegsegger讨论了基于检验准则的人工神经网络实现检测顺序优化的方法。Garg和Kumar对比了遗传算法和模拟退火算法在解决路径规划问题时的效果，两种方法都收敛到全局最小值时模拟退火算法的收敛速度更快。“先全局后局部”的路径规划策略能够在较短的时间内获得检测路径，然而最终的无碰撞探测路径因为局部路径的再优化无法保证全局最优，甚至随着零部件结构复杂度的增加，存在碰撞规避策略无法解决碰撞情形导致路径规划失败的可能。“先局部后全局”的策略即先利用碰撞探测与规避方法实现任意特征间无碰撞局部路径的规划，再转化为全局路径规划问题进行求解。Han等人基于球面模型计算不同特征的检测方向，并求解特征之间的最短三维路径，再利用蚁群算法求解全局检测路径。“先局部后全局”的路径规划策略能够获得较好的全局检测路径，然而尺寸特征数目众多时，规划任意特征间无碰撞检测路径将耗费大量运算时间，不能满足当前生产快节奏，高效率的要求。申请号为：CN201810978479，发明名称为坐标测量机测量路径规划方法，该申请根据最邻近距离得到初始的测量路径，然后进行碰撞规避得到无碰撞路径。但是当测量特征数量较多时，利用最邻近的方法容易导致部分测量特征被孤立，需要更长的测量距离来连接被孤立的测量特征，导致测量总时间增加，并且该方法只适合平面内测量特征路径规划，避障效率较低，不能满足待测零部件复杂结构的测量路径规划。申请号为：CN110059879A，发明名称为车身三坐标测量的自动规划方法，该申请根据被测量零部件的结构模型和测量特征信息，提出动态碰撞检测算法和空间移动点自动生成算法得到测量特征间无碰撞路径；对同类别测头信息下的路径最优规划，通过测量时间矩阵实现检测时间的最小化。但是该方法对于结构特殊的电池包零件，采取的避障策略较为复杂，且动态碰撞检测的时间较长，影响了规划周期与效率。发明内容本发明的目的在于提供面向电池包三坐标测量的自动规划方法，实现待测零部件无碰撞最优测量路径的自动规划，同时提高待测零部件检测的效率。为实现上述目的，本发明所采用的技术方案为：一种面向电池包的三坐标测量自动规划方法，包括如下步骤：S101、提取网格节点空间坐标值，整理待测零部件测量特征信息，包括空间坐标值、矢量方向及零件尺寸轮廓；S102、利用静态碰撞检测算法确定探针测量角度集合，并在三坐标测量机与待测零部件不干涉条件下，确定待检测特征所需要的接长杆长度；S103、对同一类接长杆下满足全部测点最小覆盖的可达性角度进行聚类，并使测量机在检测过程中采用以某一角度定姿态的触测方式；S104、基于改进的测点距离判断方法初步确定某一角度下全部测点的初始检测序列；S105、根据某一定姿态下测量机参数构建不同尺寸的测量安全空间，以保证测量机在空间内运动与零件无干涉；S106、对于在步骤S104确定的初始检测序列中，将任意相邻两测点间在S105中构建的测量安全空间内进行局部路径规划；S107、优化局部路径，使路径转折点最少，路径长度最短；S108、在测针以一种聚类下的角度完成测量后，将测头移动到安全平面外，转动测头角度至下一待测角度，并重复步骤S104至步骤S107；S109、在以当前接长杆完成测量后，将测头移动到安全平面外，更换接长杆并重复步骤S104至步骤S108，最终将不同类别测点组内的最优测量路径进行连接，构成遍历待测零部件所有测量特征的无碰撞最优测量路径。与目前现有技术相比，本发明的优点为：本发明包括测量特征分类、安全空间构建、排列测量次序、局部路径规划、局部路径优化与全局路径融合等，结合待测零部件的特殊结构特征，通过算法程序与应用步骤的设计开发，实现面向电池包零部件结构的无碰撞、高效率的检测规划。本发明提取待测零部件测量特征的空间坐标、矢量方向等信息；利用静态碰撞检测算法对探针测量角度、接长杆等测头信息进行分类；结合被测量零部件的结构模型和同类别测量特征信息，提出基于构建安全空间的方法得到测量特征间的安全移动空间；采用“先全局后局部”的方法确定初步检测次序；再基于安全空间进行路径规划与优化，得到无碰撞的移动路径。对同类别测头信息下的路径最优规划，实现检测时间的最小化；连接不同类别测量特征的测量路径，得到遍历待测零部件全部测量特征的全局路径。提高了智能三坐标测量机的自动化程度与检测待测零部件效率。附图说明图1为本发明实施例中面向电池包的三坐标测量自动规划方法流程图。图2为本发明实施例中面向电池包的三坐标测量的自动规划方法具体流程图。图3为本发明实施例中待测电池包下箱体结构与测量特征示意图。图4为本发明实施例中待测电池包下箱体的无碰撞最优测量路径示意图。图5为本发明实施例中待测零部件数模结构测量路径利用MATLAB软件可视化效果。具体实施方式下面将结合示意图对本发明所采用的技术方案作进一步的说明。本实施例涉及一种面向电池包的三坐标测量的自动规划方法，如图1和图2所示，包括如下步骤：S101、提取网格节点空间坐标值，整理待测零部件测量特征信息，包括空间坐标值、矢量方向及零件尺寸轮廓；S102、利用静态碰撞检测算法确定探针测量角度集合，并在三坐标测量机与待测零部件不干涉条件下，确定待检测特征所需要的接长杆长度；S103、对同一类接长杆下满足全部测点最小覆盖的可达性角度进行聚类，并使测量机在检测过程中采用以某一角度定姿态的触测方式；S104、基于改进的测点距离判断方法初步确定某一角度下全部测点的初始检测序列；S105、根据某一定姿态下测量机参数构建不同尺寸的测量安全空间，以保证测量机在空间内运动与零件无干涉；S106、对于在步骤S104确定的初始检测序列中，将任意相邻两测点间在S105中构建的测量安全空间内进行局部路径规划；S107、优化局部路径，使路径转折点最少，路径长度最短；S108、在测针以一种聚类下的角度完成测量后，将测头移动到安全平面外，转动测头角度至下一待测角度，并重复步骤S104至步骤S107；S109、在以当前接长杆完成测量后，将测头移动到安全平面外，更换接长杆并重复步骤S104至步骤S108，最终将不同类别测点组内的最优测量路径进行连接，构成遍历待测零部件所有测量特征的无碰撞最优测量路径。具体而言，步骤S101中使用有限元软件对所要测量的待测零部件进行自动网格划分，提取出网格节点的空间坐标值作为待测零部件点云信息；准备好待测零部件测量特征信息，主要包括空间坐标值、矢量方向、尺寸大小及类型等，并根据触测距离计算出测量特征对应逼近点的空间坐标值。步骤S102利用静态碰撞检测算法针对每个测量特征进行判别；选择常用的接长杆长度规格，当部分测量特征使用该规格容易造成机械臂与待测零部件碰撞时，通过减少或增加的方式确保静态状态下机械臂与待测零部件不发生碰撞。步骤S103对同一类接长杆下满足全部测点最小覆盖的可达性角度进行聚类，尽可能减少测头角度的转换次数，并使测量机在检测任意一类特征的过程中采用满足该类的定姿态触测方式；步骤S104将求解测点的最短检测路径作为TSP问题，基于图4中改进的距离判断方法确定测点的初始检测序列；步骤S105根据某一定姿态下测量机参数构建不同尺寸的测量安全空间，采用图3所示的构建方法，将测头包围盒遍历模型，通过拟合表面得到测量安全空间，以保证测量机在空间内运动与零件无干涉；步骤S106对于在步骤S104确定的初始检测序列中，将任意相邻两测点间在S105中构建的测量安全空间内采用A*算法进行局部路径规划；步骤S107通过对A*算法获取的局部路径进行优化，使路径转折点最少，路径长度最短；步骤S108在测针以一种聚类下的角度完成测量后，将测头移动到设定的安全平面外，转动测头至下一待测角度，并重复步骤S104至步骤S107；步骤S109在以当前接长杆完成测量后，将测头移动到安全平面外，更换接长杆并重复步骤S104至步骤S108，最终将不同类别测点组内的最优测量路径进行连接，构成遍历待测零部件所有测量特征的无碰撞最优测量路径。为验证本方法的有效性，利用图3所示的待测零部件点云、测量特征信息案例实现测量路径自动规划。如图5所示，待测零部件数模结构已进行点云化处理，使用双臂式三坐标测量机进行测量，本案例以该电池包下箱体左侧的测量特征进行说明，待测零部件左侧共包括266个测量特征，其空间坐标值和矢量方向等信息如表1所示。表1利用静态碰撞检测算法可以获得每个测量特征对应的探针角度集合以及对应的接长杆长度。根据每一接长杆的探针角度集合，将探针角度按测量要求分类，对于不同类的探针角度在测量过程中采用定姿态触测，并建立基于该姿态下的测量安全空间，构建方式如图3所示，保证测头可以以当前姿态无干涉的在空间中进行移动。以每一种姿态构建一个安全空间，满足此要求的测量特征点构成了一组集合，所有集合构成了全部测量特征点。将一组集合下的测量特征点进行初始测量次序排列。由于测量特征分布较为分散，建立任意点间的距离矩阵需要对两点间实际距离做大致判断，故针对电池包结构的特殊性，采取如图4所示的距离估算方法，若两点连线与零件无干涉，距离认定为直线，反之则以连线中点为球心，半径逐步扩张到与测量安全空间相交为止，距离认定为折线。根据三坐标测量机的运动规律，设置基本运动参数，采用此方法可以计算得到三坐标测量机任意两个特征间大致需要移动的距离，最终将其汇总成距离矩阵形式，其中一组集合下的矩阵如表2所示。表2通过改进的距离判断方法得到距离矩阵后，利用模拟退火算法，设置计算参数，可以获得某一类别内测量特征的初始测量次序。初始测量次序确定后，对于序列中的任意相邻测量特征，采用A*算法进行基于安全空间的无碰路径搜索，全部特征遍历完成后，得到当前集合的移动路径；再通过对不同集合内的测量特征运用上述方法获得无碰撞最优测量路径，并将多条无碰撞最优测量路径通过移动到安全平面的方式进行连接。最终确定测量路径利用MATLAB软件可视化效果如图5所示，直线表示三坐标测量机探针的运动轨迹，〇表示添加的空间移动点位置。证明了本方法在三坐标测量机待测零部件测量路径规划过程中的可行性。本发明针对电池包零件结构的测量特征路径规划问题，提出了一种用于精度检测的三坐标测量机自动化路径规划系统与方法，解决了待测零部件多特征自动规划无碰撞时间最短路径的难题。实现了待测零部件测量路径的自动规划，加快了生产节奏。上述仅为本发明的优选实施例而已，并不对本发明起到任何限制作用。任何所属技术领域的技术人员，在不脱离本发明的技术方案的范围内，对本发明揭露的技术方案和技术内容做任何形式的等同替换或修改等变动，均属未脱离本发明的技术方案的内容，仍属于本发明的保护范围之内。
