标题title
一种基于区块链及PIT技术的文物运输云追踪系统
摘要abst
本发明提供了一种基于区块链及PIT技术的文物运输云追踪系统，包括移动监控终端系统和云追踪服务平台，所述的移动监控终端系统连接所述的云追踪服务平台，移动监控终端系统包括移动通信及定位追踪设备、箱内监控终端和手持运维管理设备，所述的云追踪服务平台包括数据库和运追踪数据区块链模块，所述的云追踪数据区块链模块采用基于区块链的链上链下混合存储的方式，所述的移动监控终端系统传来的原始数据均直接储存在所述的数据库中，云追踪数据区块链模块则存储相应原始数据数据的哈希值。本发明的文物运输云追踪系统可以实现文物运输过程的相关文物和设备的身份标识等功能，利用区块链技术实现文物相关信息数据可追溯、防篡改，提高文物特种运输行业的安全性和运行效率。
权利要求书clms
1.一种基于区块链及PIT技术的文物运输云追踪系统，包括移动监控终端系统和云追踪服务平台，其特征在于，所述的移动监控终端系统通过移动通信网络连接因特网Internet，再连接所述的云追踪服务平台，移动监控终端系统包括移动通信及定位追踪设备、箱内监控终端和手持运维管理设备，所述的移动通信及定位追踪设备端安装在文物运输车辆内，用于通过移动通信网络连接云追踪服务平台，通过定位系统进行定位，以及形成无线局域网主节点，所述的箱内监控终端安装在文物包装箱内，包括定位及身份识别模块和采集文物包装箱内环境状态信息的传感器，所述的定位及身份识别模块用于通过定位系统进行定位并具有身份识别标志，箱内监控终端作为子节点接入无线局域网，所述的手持运维管理设备用于在文物包装、装车、卸车、交付过程中，扫描认证箱内监控终端，能够拍摄现场情况并上传现场数据，手持运维管理设备通过移动通信网络连接云追踪服务平台，所述的云追踪服务平台包括数据库和运追踪数据区块链模块，所述的云追踪数据区块链模块采用基于区块链的链上链下混合存储的方式，所述的移动监控终端系统传来的原始数据均直接储存在所述的数据库中，云追踪数据区块链模块则存储相应原始数据的哈希值。2.根据权利要求1所述的一种基于区块链及PIT技术的文物运输云追踪系统，其特征在于，在文博单位向运输单位交接文物过程中，采用随机配重铅封对文物进行身份固定，随机配重铅封包括钢丝绳和铅封块，该铅封块具一块配重板，在文物包装阶段进行文物交接时，随机将配重板剪去一部分重量，用电子称对剩余的钢丝绳和铅封块进行称重得到铅封重量，通过所述的手持运维管理设备将铅封重量上传至云追踪服务平台，通过所述的数据库和云追踪数据区块链模块进行记录，随机配重铅封直接套在文物器物的耳、颈上，或将文物用保护袋封装后，再用随机配重铅封进行铅封，运输结束，运输单位向文博单位交付文物过程中，剪开随机配重铅封的钢丝绳，对随机配重铅封再次称重，并与云追踪服务平台中存储的铅封重量进行比较，就能够唯一确认该文物的身份。3.根据权利要求2所述的一种基于区块链及PIT技术的文物运输云追踪系统，其特征在于，所述的移动通信网络为5G网络，所述的定位系统为北斗定位系统，所述的无线局域网为WIFI无线网络。4.根据权利要求3所述的一种基于区块链及PIT技术的文物运输云追踪系统，其特征在于，所述的身份识别标志为二维码或无源射频标签。5.一种基于区块链及PIT技术的文物运输云追踪方法，其特征在于，在文物包装时，在文物包装箱内安装箱内监控终端，箱内监控终端包括定位及身份识别模块和采集文物包装箱内环境状态信息的传感器，所述的定位及身份识别模块用于通过定位系统进行定位并具有身份识别标志，箱内监控终端作为子节点接入无线局域网，包装完成后采集文物包装箱身份识别信息；在文物装车时，在文物运输车辆内安装移动通信及定位追踪设备，通过移动通信网络和定位系统进行定位，并形成无线局域网主节点，将文物包装箱装入文物运输车辆内，采集文物运输车辆信息及再次采集文物包装箱身份识别信息；在文物卸车时，确定文物运输车辆和文物包装箱的对应关系；在文物交付时，打开文物包装箱封装材料，确认文物包装箱身份识别信息与文物的对应关系，以上过程中产生的数据采用基于区块链的链上链下混合存储的方式，所有数据均直接储存在数据库中，数据的哈希值则采用区块链进行存储。6.如权利要求5所述的一种基于区块链及PIT技术的文物运输云追踪方法，其特征在于，在文物包装时，采用随机配重铅封对文物进行身份固定，随机配重铅封包括钢丝绳和铅封块，该铅封块具一块配重板，在文物包装阶段进行文物交接时，随机将配重板剪去一部分重量，用电子称对剩余的钢丝绳和铅封块进行称重得到铅封重量，并对该铅封重量采用数据库和区块链进行记录，随机配重铅封直接套在文物器物的耳、颈上，或将文物用保护袋封装后，再用随机配重铅封进行铅封，运输结束，在文物交付时，剪开随机配重铅封的钢丝绳，对随机配重铅封再次称重，并与已记录的铅封重量进行比较，就能够唯一确认该文物的身份。
说明书desc
技术领域本发明属于文物运输及其信息追踪技术领域，具体涉及一种基于区块链及PIT技术的文物运输云追踪系统。背景技术文物是不可再生资源，文博工作的生命线就是文物安全，同时也是文物运输系统的中心工作。近年来，随着文化事业的快速发展，文物交流、赴外展览等活动日益增多，文物运输过程中的包装环境监测、运输过程监控、数据分析评估等工作尤其重要。目前，国内文博单位主要以委托第三方珍品运输单位的方式进行文物藏品包装运输。在运输文物过程中，运输单位需对文物进行点交、包装、运输等过程的监测工作。在现有技术中，一般还是采用人工记录和视频监控的方式。随着GPS技术的发展，中国专利201711166709 .9一种基于计算机和GPS定位的文物安全管理系统公开了一种实时监控文物状态，通过设定文物的监控范围来保证文物安全的方法，如果文物流失可以根据GPS定位信息在地图上显示文物移动轨迹方便，方便相关人员进行追踪。不过，现有技术中文物的监控方式还是存在以下缺陷：1）数据记录处理工作量大，监控数据量大，检索困难，容易造成通信传输卡滞，难以实现实际意义上的实时监控；2）运输过程历史数据可追溯性差，无法防止上传数据被篡改，难以实现文物运输全过程安全保障；3）针对文物运输的特殊性，没有有效方法对运输交接过程中的文物身份进行识别，即在文博单位与运输单位的两次文物交接中，确保运输的文物没有被掉换。随着PIT认证和区块链技术在物联网上的运用，使构建新型文物运输云追踪系统成为可能，能够实现文物运输过程的相关文物和设备的身份标识、路线规划、转运交接管理、运输过程定位、环境状态监控和告警等功能。发明内容本发明的发明目的是提供一种基于区块链及PIT技术的文物运输云追踪系统，将北斗、5G等技术应用物联网，可以实现文物运输过程的相关文物和设备的身份标识、路线规划、转运交接管理、运输过程定位、环境状态监控和告警等功能，还利用区块链技术实现文物相关信息数据可追溯、防篡改，提高文物特种运输行业的安全性和运行效率。本发明的具体技术方案是一种基于区块链及PIT技术的文物运输云追踪系统，包括移动监控终端系统和云追踪服务平台，其特征在于，所述的移动监控终端系统通过移动通信网络连接因特网Internet，再连接所述的云追踪服务平台，移动监控终端系统包括移动通信及定位追踪设备、箱内监控终端和手持运维管理设备，所述的移动通信及定位追踪设备端安装在文物运输车辆内，用于通过移动通信网络连接云追踪服务平台，通过定位系统进行定位，以及形成无线局域网主节点，所述的箱内监控终端安装在文物包装箱内，包括定位及身份识别模块和采集文物包装箱内环境状态信息的传感器，所述的定位及身份识别模块用于通过定位系统进行定位并具有身份识别标志，箱内监控终端作为子节点接入无线局域网，所述的手持运维管理设备用于在文物包装、装车、卸车、交付过程中，扫描认证箱内监控终端，能够拍摄现场情况并上传现场数据，手持运维管理设备通过移动通信网络连接云追踪服务平台，所述的云追踪服务平台包括数据库和运追踪数据区块链模块，所述的云追踪数据区块链模块采用基于区块链的链上链下混合存储的方式，所述的移动监控终端系统传来的原始数据均直接储存在所述的数据库中，云追踪数据区块链模块则存储相应原始数据数据的哈希值。更进一步地，在文博单位向运输单位交接文物过程中，采用随机配重铅封对文物进行身份固定，随机配重铅封包括钢丝绳和铅封块，该铅封块具一块配重板，在文物包装阶段进行文物交接时，随机将配重板剪去一部分重量，用电子称对剩余的钢丝绳和铅封块进行称重得到铅封重量，通过所述的手持运维管理设备将铅封重量上传至云追踪服务平台，通过所述的数据库和云追踪数据区块链模块进行记录，随机配重铅封直接套在文物器物的耳、颈上，或将文物用保护袋封装后，再用随机配重铅封进行铅封，运输结束，运输单位向文博单位交付文物过程中，剪开随机配重铅封的钢丝绳，对随机配重铅封再次称重，并与云追踪服务平台中存储的铅封重量进行比较，就能够唯一确认该文物的身份。更进一步地，所述的移动通信网络为5G网络，所述的定位系统为北斗定位系统，所述的无线局域网为WIFI无线网络。更进一步地，所述的身份识别标志为二维码或无源射频标签。一种基于区块链及PIT技术的文物运输云追踪方法，在文物包装时，在文物包装箱内安装箱内监控终端，箱内监控终端包括定位及身份识别模块和采集文物包装箱内环境状态信息的传感器，所述的定位及身份识别模块用于通过定位系统进行定位并具有身份识别标志，箱内监控终端作为子节点接入无线局域网，包装完成后采集文物包装箱身份识别信息；在文物装车时，在文物运输车辆内安装移动通信及定位追踪设备，通过移动通信网络和定位系统进行定位，并形成无线局域网主节点，将文物包装箱装入文物运输车辆内，采集文物运输车辆信息及再次采集文物包装箱身份识别信息；在文物卸车时，确定文物运输车辆和文物包装箱的对应关系；在文物交付时，打开文物包装箱封装材料，确认文物包装箱身份识别信息与文物的对应关系，以上过程中产生的数据采用基于区块链的链上链下混合存储的方式，所有数据均直接储存在数据库中，数据的哈希值则采用区块链进行存储。更进一步地，在文物包装时，采用随机配重铅封对文物进行身份固定，随机配重铅封包括钢丝绳和铅封块，该铅封块具一块配重板，在文物包装阶段进行文物交接时，随机将配重板剪去一部分重量，用电子称对剩余的钢丝绳和铅封块进行称重得到铅封重量，并对该铅封重量采用数据库和区块链进行记录，随机配重铅封直接套在文物器物的耳、颈上，或将文物用保护袋封装后，再用随机配重铅封进行铅封，运输结束，在文物交付时，剪开随机配重铅封的钢丝绳，对随机配重铅封再次称重，并与已记录的铅封重量进行比较，就能够唯一确认该文物的身份。本发明的有益效果是1）本发明的基于区块链及PIT技术的文物运输云追踪系统，能够在文物包装、装车、卸车、交付过程中对海量数据进行记录处理和检索，真正实现实时监控；2）采用基于区块链的链上链下混合存储的方式，运输过程历史数据可追溯，有效防止上传数据被篡改，实现文物运输全过程安全保障；3）针对文物运输的特殊性，采用简单易行的随机配重板现场随机生成重量数据，并上传至云追踪服务平台采用区块链进行无篡改记录，能够对运输交接过程中的文物身份进行精确识别；4）云追踪服务平台采用运维管理后端服务器Webserver和运维管理前端服务器Webserver分离的部署形式，为运维管理后端服务器Webserver有效上云提供了便利。附图说明图1为本发明的基于区块链及PIT技术的文物运输云追踪系统的组成示意图；图2为本发明的基于区块链及PIT技术的文物运输云追踪系统在文物车辆运输过程中的系统结构示意图；图3为本发明的基于区块链及PIT技术的文物运输云追踪系统在文物交接过程中的系统结构示意图；图4为本发明的基于区块链及PIT技术的文物运输云追踪系统的随机配重铅封的示意图；图5为本发明的基于区块链及PIT技术的文物运输云追踪系统的运维管理后端服务器WebServer网络应用逻辑连接关系图；图6为本发明的基于区块链及PIT技术的文物运输云追踪系统的运维管理后端服务器WebServer的安全认证流程图；图7为本发明的基于区块链及PIT技术的文物运输云追踪系统的云追踪数据区块链模块链上链下混合存储模型示意图；图8为本发明的基于区块链及PIT技术的文物运输云追踪系统的云追踪数据区块链模块区块链节点记录数据过程示意图；图9为本发明的基于区块链及PIT技术的文物运输云追踪系统的云追踪数据区块链模块云追踪数据区块链模型示意图；图10为本发明的基于区块链及PIT技术的文物运输云追踪系统的云追踪数据区块链模块分布式P2P网络模型示意图。具体实施方式下面结构说明书附图对本发明的具体技术方案作进一步地描述。如附图1所示，本发明的基于区块链及PIT技术的文物运输云追踪系统，包括移动监控终端系统和云追踪服务平台。移动监控终端系统通过移动通信网络连接因特网Internet，再连接云追踪服务平台。移动监控终端系统包括箱内监控终端、移动通信及定位追踪设备和手持运维管理设备。云追踪服务平台包括运维管理后端服务器WebServer、运维管理前端服务器WebServer、数据库、北斗授时设备和运追踪数据区块链模块。本发明的文物运输云追踪系统运用了一些PIT技术的理念，PIT是Position、Identity、Time的缩写，其核心思想是物流仓储过程中任何物品都能通过Position、Identity、Time这三维信息随时随地的生成该物品状态的唯一表征，通过对表征的管理实现物品的追踪以及状态的管理。Position：对于精度不高的户外定位，采用北斗定位；对于精度要求较高的户外应用场景，采用北斗差分方式实现亚米级定位；对于室内应用场景，采用RSSI和定位指纹相结合的技术实现室内相对定位。Identity：识别主要分为2大类，第一类借助辅助手段对物品进行识别，如RFID电子标签、二维码等；第二类通过对物品自身属性测量获得，如体积、重量、表面纹路、材质分布、外形特征等；这些信息均可作为物品特征的一个参数，综合编码后形成唯一的识别特征码。Time：可采用北斗分级授时，在有条件架设北斗天线的环境下，安装授时设备，与北斗实现10纳秒级同步，其他终端通过有线或无线与授时终端组网，采用RTT方式与授时终端同步，同步经度可达微秒级；云端服务器架设专有北斗授时服务器，云服务器均与该设备实现同步。箱内监控终端安装在文物包装箱内，包括定位及身份识别模块和各种传感器，主要负责采集文物包装箱内各类环境状态信息，包括温度、湿度、光强、气压、震动、声音、图像信息，移动通信及定位追踪设备在运输车辆内形成无线局域网，箱内监控终端通过无线局域网将上述信息传递至移动通信及定位追踪设备，移动通信及定位追踪设备再通过Internet上传至云追踪服务平台。定位及身份识别模块可以采用现有射频识别技术、二维码技术和北斗、GPS等全球定位系统，设备唯一编号以及相应信息，不得修改。该身份编号与箱内监控终端设备ID号保持一致，通过手持运维管理设备无线读取，是文物运输监控管理流程中映射该箱内监控终端的唯一标识。箱内监控终端有独立电池供电，支持本地数据存储，在出现外部网络中断时也可以进行数据采集记录。箱内监控终端还包括各类传感器接口处理、数据记录、数据处理、WIFI网络维护等模块。传感器接口处理模块负责采集解析气象、震动、声音拉升传感器和图像信息。数据记录模块负责原始数据的记录，主要分为数据类文件、声音文件和图像文件三类数据。数据类文件：包括气象传感、震动传感器、拉升传感器，为确保数据存储安全，以10MB文件大小为限，超过10MB，另起文件记录；声音文件：采集到的声音数据，以WAV格式记录，为确保数据存储安全，以20分钟记录为限，超过20分钟，另起文件记录；图像文件：采集到的图像格式，压缩后以JPG格式记录。数据处理模块主要负责状态异常检测、采集信息汇总上报、时间统一、云追踪服务平台指令处理等功能。状态异常检测：分析传感器接口处理模块上报数据，当某个或某几个参数超过门限时，向云追踪服务平台发送告警信息；时间统一：通过移动通信及定位追踪设备或手持运维管理设备间接进行时统，在未连接上述设备时进行自守时；云追踪服务平台指令处理：将采集到的数据重新封装，以1Hz的数据率通过WIFI网络模块上报云追踪服务平台，同时接收云追踪服务平台指令，切换文物运输转运状态并上报详细状态信息。WIFI网络维护模块作为WIFI接入点的设备包括手持运维管理设备和移动通信及定位追踪设备，在网络中断或信号质量极差时自动扫描可接入WIFI网络。在公路运输阶段，运输车辆中的箱内监控终端周期上报文物包装箱环境状态信息ZDNet_ZDStatus，具体内容如表1所示。表1 箱内监控终端周期上报状态信息字段值备注ZD_IDZDA2020100001设备idZD_Time2021-6-14 13:21:22.102时间MSGTypeStatus数据类型ZD_DataLogYes数据记录状态ZD_Period3:2:14设备运行时长Quantityofelectricity60电量Temperature24温度Humidity33湿度Lightintensity43光强Atmosphericpressure950气压X_Palstance0.28X轴角速度X_Dip0.35X轴倾角X_Acc0.25X轴加速度Y_Palstance0.15Y轴角速度Y_Dip1.68Y轴倾角Y_Acc0.36Y轴加速度Z_Palstance0.28Z轴角速度Z_Dip0.65Z轴倾角Z_Acc0.58Z轴加速度移动通信及定位追踪设备可以为5G北斗追踪设备，集成5G模块、WIFI模块和北斗定位模块，5G模块和WIFI模块通过串口与北斗定位模块连接，5G北斗追踪设备可以分配射频识别标签或二维码作为该设备可追踪的唯一标识。5G北斗追踪设备还包括北斗接口处理、WIFI网络接口处理、云追踪服务平台接口处理、数据处理和数据记录模块。北斗接口处理模块通过RS232串口与北斗定位模块连接，处理解析北斗定位模块报送的状态、位置和时间报文，并将结果送给数据处理模块。WIFI网络接口处理模块接收并解析WIFI模块数据，将解析后的数据发送至数据处理模块；向WIFI模块发送数据。云追踪服务平台接口处理模块向云追踪服务平台发送的数据进行封装打包处理，接收并解析云追踪服务平台信息。数据处理模块接收北斗位置和时间信息，同步本地时钟，同时向WIFI模块网络广播发送位置和时间；数据处理模块同时检测本设备工作状态，与各监控终端设备上报的状态信息一同打包发送到云追踪服务平台。数据记录模块记录与云追踪服务平台交互的信息、北斗模块状态信息，数据记录文件格式与箱内监控终端设备数据记录方法相同。5G北斗追踪设备主要安装于文物公路运输车辆上，负责运输过程中的定位和箱内监控终端发送的信息收集上报。假设运输车辆中包含10个包装箱，则5G北斗追踪设备向云追踪服务平台周期上报位置信息和包装箱状态信息WG_Post_Status，具体内容如表2所示。表2 5G北斗追踪设备向云追踪平台周期上报信息内容手持运维管理设备，可以为安装了APP的手机或PAD，在文物包装、装车、卸车、交付过程中，现场管理人员使用手持运维管理设备，扫描认证箱内监控终端，完成对包装状态的确认和转移、包装箱与运输车辆的绑定或解绑功能。手持运维管理设备包括安全认证、状态信息收集转发、任务确认、数据导出模块。安全认证模块采用人脸识别验证使用者身份，通过设备前置摄像头采集用户图像，将图像连同本设备ID发送到云追踪服务平台，由平台完成身份认证，并将识别结果反馈到本设备。如果未匹配成功，则禁止进入系统。当设备5分钟内未进行任何操作或从待机状态恢复、或软件从后台切换到前台，则需要重新认证。当包装箱监控终端与5G北斗追踪设备未连接时，由手持运维管理设备的状态信息收集转发模块担当包装箱状态收集和转发节点，将包装箱状态信息发送至云追踪服务平台。包装确认：在文物包装完成后，手持设备对包装箱进行逐个扫描，将扫描结果上传到云追踪服务平台，由平台确认完成包装。当此次任务所有包装箱均确认完成，任务将进入下一阶段。装车清点确认：包装箱上车后，首先扫描5G北斗追踪设备确认车辆，其次对包装箱逐个扫描，将扫描结果上传到云追踪服务平台，由平台确认完成装车。当此次任务所有包装箱均已按照计划要求装载指定车辆，任务将进入下一阶段。卸车清点确认：包装箱卸车后逐个扫描，将扫描结果上传到云追踪服务平台，由平台确认完成卸车。当此次任务所有包装箱均已确认，任务将进入下一阶段。在任何一阶段，软件预留拍照、文字记录功能，可将图片和文字备注上传到云追踪服务平台，作为过程记录。数据导出模块导出数据时，将5G北斗追踪设备和监控设备的TF卡插入手持运维管理设备，执行导入操作，选择需导入的数据，将数据转存到本地存储器中，利用WIFI网络上传到云追踪服务平台。任务确认模块现场确认的环节主要包括：包装、装车清点、卸车清点拆箱4个环节。当进入系统后，手持设备向云追踪服务平台索取需确认的任务，选择进入需确认的任务。以包装确认转入运输阶段为例，说明手持运维管理设备实施方式。在文物包装完成后，手持运维管理设备通过设备前置摄像头采集文物和现场环境图像，将图像连同手持运维管理设备ID发送到云追踪服务平台，选择正在执行的文物运输任务，手持运维管理设备界面显示当前运输任务包含的包装箱信息列表，使用手持运维管理设备对包装箱进行逐个扫描，扫描报文PD_Post_PITscan上传到云追踪服务平台，PD_Post_PITscan内容如表3所示。表3 手持运维管理设备上报扫描包装箱信息内容手持运维管理设备扫描所有包装箱后确认任务完成包装，向云追踪服务平台上报转阶段确认信息PD_Post_TurnPhase，转入下一个阶段，PD_Post_TurnPhase内容如表4所示。手持运维管理设备也可以拍照或录制视频上传云追踪服务平台，作为任务阶段备注。表4 手持运维管理设备上报转阶段确认信息内容本领域技术人员知道，文物运输与普通商品运输相比，难点在文物的身份确认上。也就是说，在文物交接时能够低成本快速地确认文物的唯一性，也就是PIT中的“I”，即文物的身份识别。现有技术中用在商品身份识别的技术主要有一次性的身份标识技术，但这些一次性的身份标识技术都是对运输商品的有损身份识别技术，无法在文物这种特殊物品上进行应用。铅封作为商品运输过程中简单有效的身份确认工具，也存在被伪造和被内部人员篡改的可能。本发明的文物运输云追踪系统通过一种不但简单有效，也难以伪造替换的方法，使文物在交接过程的身份精确确认成为可能。如附图4所示，在文博单位向运输单位交接文物过程中，采用随机配重铅封对文物进行身份固定。随机配重铅封包括钢丝绳和铅封块，该铅封块具一块配重板。在文物包装阶段进行文物交接时，随机将配重板剪去一部分重量，用电子称对剩余的钢丝绳和铅封块进行称重得到铅封重量，通过手持运维管理设备将铅封重量上传至云追踪服务平台，通过数据库云追踪数据区块链模块进行记录。区块链技术只能做到存储层的安全，区块链技术是无法解决用户上传的数据真假问题，但是，随机的铅封重量是文物对应的唯一标识，通过云追踪数据区块链模块进行记录后，能保证存储在硬盘上的区块不被修改。随机配重铅封可以直接套在文物器物的耳、颈上，也可将文物用保护袋封装后，再用随机配重铅封进行铅封。随机配重铅封也可以对运输车辆的车箱门进行铅封。运输结束，运输单位向文博单位交接文物过程中，只用剪开随机配重铅封的钢丝绳，对随机配重铅封再次称重，并与云追踪服务平台中存储的铅封重量进行比较，就可唯一确认该运输的文物的身份。文物运输过程分为任务计划和文物运输两个阶段。任务计划阶段，通过运维管理前端服务器WebServer设计文物包装方式、运输路径和方式、时间计划等，将所有相关任务信息通过运维管理前端服务器WebServer网页界面录入到系统中。文物运输阶段，是从文物包装一直到拆箱交付整个过程，在每个环节进行文物交接确认时，均使用手持运维管理设备现场确认，提交系统以便进入到下一阶段。运维管理前端服务器WebServer，采用Node.js +Vue+ElementUI方式实现网页前端交互。可以采用百度地图作为GIS系统使用，百度地图为系统提供包括路线规划、导航、实时路况等相关服务。运维管理前端服务器WebServer包括系统登录、基础信息管理、运输任务管理、数据分析和日志模块。系统登录模块使用电话号码作为用户登录ID，获取验证码后，由运维管理后端服务器向该手机发送验证码短信，用户补全手机验证码密码和图片验证码后登陆系统，如果该手机号码未授权，则界面提示手机号码未授权。也可以使用用户名和密码的方式登录系统。基础信息管理模块的基础信息包括文物、员工、用户、车辆、系统设备和包装箱，基本管理操作包括查询、管理、添加、修改等。运输任务管理模块包括：任务管理维护、任务监控、任务规划等。任务管理维护以表格方式呈现任务列表，当任务未完成时可掌握当前进度；任务监控可查看当前任务各项信息以及运输车辆位置、状态等，当有异常情况时，具有报警提示；任务规划主要包括任务基本信息、包装信息、任务阶段规划、运输路径规划等信息录入，采用分步导航方式引导用户录入任务相关信息，并显示当前任务详细信息，由用户确认后最终提交完整任务信息。数据分析模块主要包括：任务状态统计、任务完成情况统计、交通运输方式情况统计和运输车辆使用情况统计。日志模块，记录系统运行和操作历史记录，以列表方式显示日志数据，支持查询排序等。用户可以使用电话号码和短信验证码的方式，或者用户名和密码的方式登录系统。登录系统后可查看：基础信息，包括文物、员工、用户、车辆、系统设备和包装箱信息；运输任务管理信息，包括任务管理维护、任务监控、任务规划；数据分析，包括任务状态统计、任务完成情况统计、交通运输方式情况统计和运输车辆使用情况统计；日志信息，以列表方式显示日志数据。以用户创建一个文物运输任务为例，通过运输任务管理模块创建新任务，上传任务信息。任务信息包括：任务基本信息，包装策略信息和任务阶段信息，信息内容分别如表5表6和表7所示。任务信息上传至运维管理后端服务器，保存至服务器内存和数据库中。表5 任务基本信息内容字段值备注TaskID18任务idName北京文物展览任务名称Describe西安至北京文物运输任务描述PlanStartTime2021-6-15 06:00:00.000计划开始时间PlanOverTime2021-6-15 21:00:00.000计划结束时间StartSite西安起始地Destination北京目的地SMSclientids{8,10}短信通知用户id列表SMSstaffids{2,5}短信通知员工id列表表6 包装策略信息内容字段值备注TaskID18任务idPackageId2包装箱idDevIdZDA2020100001任务描述ParentId1上级包装箱idCulturalrelics{…}文物列表表7 任务阶段信息字段值备注TaskID18任务idStepId1任务阶段idStepIndex1任务阶段序号StepStartSite西安任务阶段起始地StepDestination北京任务阶段目的地StepPlanStartTime2021-6-15 08:00:00.000任务阶段计划开始时间StepPlanOverTime2021-6-15 20:00:00.000任务阶段计划结束时间StepState0当前状态：0-计划 1-等待执行 2-正在执行 3-完成StepType0任务阶段类型：0-包装 1-陆运 2-空运 3-火车 4-交付TrunkTrace{…}货车路径Airplanes{…}飞机信息列表Trains{…}火车信息列表Trunks{…}货车信息列表运维管理后端服务器WebServer采用springboot框架构建RESTful架构的运维网络应用，网络应用逻辑连接关系如附图5所示。运维管理后端服务器WebServer按照系统运行流程处理手持运维管理设备、5G北斗定位设备和运维管理前端服务器WebServer上传的数据，并按照系统流程向上述设备提供数据服务。并直接与数据库连接，管理文物运输从任务规划到交付的全部过程数据。运维管理后端服务器WebServer从信息流程可分为接口处理模块、安全认证模块、公共服务模块、业务处理模块和数据库接口5个模块。接口处理模块利用Springboot框架，建立各类RESTful 的API接口处理函数，包括运维管理后端服务器WebServer与5G北斗追踪设备接口、与手持运维管理设备接口、与运维管理前端服务器WebServer接口。安全认证模块是对手持运维管理设备、5G北斗追踪设备发送的数据进行认证和加解密。安全认证流程如附图6所示。公共服务模块提供的公共服务包括短信服务、航班数据服务和铁路运输服务，系统在调用这些服务时均采用HTTP方式获取或发送数据。数据库接口模块负责数据库数据的查询、更新、插入等操作，将查询结果转换为定义JAVA类或类集合，并提供业务处理必要的查询接口。将JAVA类或类集合执行插入或更新数据库操作。业务处理模块主要包含权限认证、基础信息管理、任务管理模块。权限认证模块包括认证手持运维管理设备人员登录和运维管理前端服务器WebServer登录请求。手持设备通过人脸识别登录，当匹配员工人脸数据成功后，将员工ID返回，并反馈登陆成功。运维管理前端服务器Webserver权限认证包括手机短信认证和密码认证两种方式，对认证字符串进匹配，匹配失败拒绝服务，认证字符串有生命周期，在5分钟内未进行任何请求则进行销毁。基础信息管理模块作用是，系统运行后从数据库中加载员工、用户、货车、PIT设备等所有信息到内存中，提供上述基础信息管理接口，由运维管理前端服务器Webserver通过restful接口访问管理，如人员信息、用户信息、车辆信息等。当发生变化时，同步更新到数据库中。任务管理模块负责运输任务的数据提交和数据索取，系统运行将所有正在执行的任务从数据库中加载到内存中。且随着任务的新建和完成，自动添加或删除内存中的任务，当任务状态发生变化时，自动同步到数据库中。当请求的任务数据在内存中不存在时，到数据库中查询，当任务状态发生变化时，同时短信提醒用户和管理员。运维管理后端服务器Webserver的接口处理模块接收上述5G北斗追踪设备、手持运维管理设备和运维管理前端服务器Webserver发送的报文信息，首先经过安全认证模块进行认证和解密，解密成功则将报文信息发送至业务处理模块进行业务处理。对手持运维管理设备和运维管理前端服务器Webserver的系统登录进行权限认证，反馈认证结果；5G北斗追踪设备WG_Post_Status信息存入服务器内存和数据库；根据手持运维管理设备的PD_Post_PITscan信息和PD_Post_TurnPhase信息内容，更新内存和数据库中的包装箱和任务状态信息，并将更新后的信息反馈给手持运维管理设备；运维管理前端服务器的任务信息更新至服务器内存和数据库。数据库可以采用MySQL数据库，其体积小、速度快、总体拥有成本低。数据库存储系统所有人员、车辆、设备、文物、包装箱、任务日志基础信息和所有历史操作信息。云追踪数据区块链模块采用基于区块链的链上链下混合存储的方式。在链上链下混合存储模型中，原始数据均以键值对＜Key, Value＞的格式进行存储。系统中与文物相关原始数据直接储存在MySQL数据库中，在云追踪数据区块链中则存储相应数据的哈希值，即＜Key, hash＞。链上链下混合存储模型如附图7所示。各节点利用业务数据计算生成区块保存至本地区块链过程如附图8所示。云追踪数据区块链模块各节点都包含本地业务数据池模块，负责存储运维管理服务器发送的业务数据，即＜Key, hash＞。本地业务数据池包括：待确认业务数据链表和已确认业务数据链表。未记录到区块链的业务数据存入本地待确认业务数据链表；已记录到区块链的业务数据存入本地已确认业务数据链表。云追踪数据区块链模块的云追踪数据区块链模型如附图9所示，区块包括以下字段：当前区块Hash值，上一区块Hash值，时间戳，随机值nonce，目标难度和业务数据集合。本系统去掉了区块链激励层，不需要耗费全网最大算力，设置目标难度为5，减少算力和时间资源浪费。业务数据集合即为上述＜Key, hashValue＞集合。节点从本地待确认业务数据链表中提取业务数据集合，采用POW共识算法计算本地新区块Block_Local。若在计算本地新区块过程中接收到其他节点发送来的新区块Block_Receive，对新区块进行合法性验证。验证规则包括：新区块父区块Hash值与本地最新区块Hash值相同，新区块Hash值计算正确，业务数据集合为待确认业务数据。若Block_Receive合法则停止本地计算，将Block_Receive添加至本地区块链，否则继续计算Block_Local，计算得到的Block_Local添加至本地区块链，同时全网广播Block_Local。如附图10所示，采用P2P网络模型，各个节点之间交互运作、协同处理，每个节点在对外提供服务的同时也使用网络中其他节点所提供的服务。当前节点启动时，寻找区块链网络上的有效节点，并建立网络连接，节点网络列表配置在配置文件中；从连接上的节点获取最新的区块信息，如果当前节点首次运行，则获取整个区块链信息，并替换本地区块链；各个节点同时进行区块计算，节点n先计算完成，则把生成的新区块通过P2P网络全网广播给其他所有节点；当一个节点收到广播内容后，对接收到的新区块进行验证，验证通过后添加到本地区块链上。以步骤三中手持运维管理设备上传转阶段确认信息PD_Post_TurnPhase为例，运维管理后端服务器接收PD_Post_TurnPhase信息，转阶段确认原始信息存储在服务器内存和数据库中，提取操作内容：{TaskID:18;StaffID:10;Time:2021-6-14 20:23:11.000;Position:124.232,34.322,345;执行操作:包装箱扫描完成,任务从包装阶段转为运输阶段}，生成键值对＜Key, Value＞, 存入数据库日志数据表中，其中：Key=102，Value=“TaskID:18;StaffID:10;Time:2021-6-14 20:23:11.000; Position:124.232,34.322,345;执行操作:包装箱扫描完成,任务从包装阶段转为运输阶段”。生成Value的Hash值，生成＜Key，Hash＞，将其发送至区块链节点1至节点n，各节点接收到业务数据，存入本地待确认业务数据链表，当确认业务数据数量达到10个，则提取业务数据集合，进行新区块计算，假设节点2最先计算完成新区块Block_node2，则全网广播至其他节点，其他节点接收到Block_node2验证合法，停止计算新区块，并将Block_node2加入本地区块链，更新本地业务数据池，在Block_node2基础上继续计算新区块。继续重复上述过程。本发明的具体过程是一种基于区块链及PIT技术的文物运输云追踪方法，包括以下步骤：S1）在文物包装时，在文物包装箱内安装箱内监控终端，箱内监控终端包括定位及身份识别模块和采集文物包装箱内环境状态信息的传感器，所述的定位及身份识别模块用于通过定位系统进行定位并具有身份识别标志，箱内监控终端作为子节点接入无线局域网，包装完成后采集文物包装箱身份识别信息。采用随机配重铅封对文物进行身份固定，随机配重铅封包括钢丝绳和铅封块，该铅封块具一块配重板，在文物包装阶段进行文物交接时，随机将配重板剪去一部分重量，用电子称对剩余的钢丝绳和铅封块进行称重得到铅封重量，并对该铅封重量采用数据库和区块链进行记录，随机配重铅封直接套在文物器物的耳、颈上，或将文物用保护袋封装后，再用随机配重铅封进行铅封；S2）在文物装车时，在文物运输车辆内安装移动通信及定位追踪设备，通过移动通信网络和定位系统进行定位，并形成无线局域网主节点，将文物包装箱装入文物运输车辆内，采集文物运输车辆信息及再次采集文物包装箱身份识别信息；S3）在文物卸车时，确定文物运输车辆和文物包装箱的对应关系；S4）在文物交付时，打开文物包装箱封装材料，确认文物包装箱身份识别信息与文物的对应关系，剪开随机配重铅封的钢丝绳，对随机配重铅封再次称重，并与已记录的铅封重量进行比较，就能够唯一确认该文物的身份。以上过程中产生的数据采用基于区块链的链上链下混合存储的方式，所有数据均直接储存在数据库中，数据的哈希值则采用区块链进行存储。虽然本发明已经以较佳实施例公开如上，但实施例并不是用来限定本发明的。在不脱离本发明之精神和范围内，所做的任何等效变化或润饰，同样属于本发明之保护范围。因此本发明的保护范围应当以本申请的权利要求所界定的内容为标准。
