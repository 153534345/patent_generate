标题title
线路导航方法和装置、电子设备、计算机可读介质
摘要abst
本公开提供了一种线路导航方法和装置，涉及计算机视觉、图像处理、增强现实等技术领域。具体实现方案为：基于实时获取的终端的GPS信息，对当前路线进行增强现实导航；获取终端的同步定位与制图SLAM坐标；响应于确定GPS信息符合预设的定位差条件，将SLAM坐标转换为计算地理坐标；基于计算地理坐标，对当前路线进行增强现实导航。该实施方式提高了在GPS定位差时的增强现实导航的准确性。
权利要求书clms
1.一种线路导航方法，所述方法包括：基于实时获取的终端的GPS信息，对当前路线进行增强现实导航；获取所述终端的同步定位与制图SLAM坐标；响应于确定所述GPS信息符合预设的定位差条件，将所述SLAM坐标转换为计算地理坐标；基于所述计算地理坐标，对当前路线进行增强现实导航。2.根据权利要求1所述的方法，在响应于确定所述GPS信息符合预设的定位差条件，将所述SLAM坐标转换为计算地理坐标的步骤之前，所述方法还包括：基于当前路线，计算得到实际地理坐标；将所述实际地理坐标映射为SLAM的位姿；基于所述位姿，在增强现实导航的3D模型中生成追踪锚点；在所述追踪锚点上添加增强现实标识，以使实现增强现实标识与所述追踪锚点实时对应。3.根据权利要求2所述的方法，所述将所述实际地理坐标映射为SLAM的位姿，包括：基于实际基准坐标和所述实际地理坐标，得到偏移坐标；基于预先得到的偏差角，计算得到旋转矩阵；基于所述偏移坐标和所述旋转矩阵的转置矩阵，得到SLAM的位姿。4.根据权利要求1所述的方法，在响应于确定所述GPS信息符合预设的定位差条件，将所述SLAM坐标转换为计算地理坐标的步骤之前，所述方法还包括：对所述SLAM坐标进行校准。5.根据权利要求4所述的方法，其中，所述对所述SLAM坐标进行校准包括：计算所述SLAM坐标与基准点的步长；基于当前路线的方向，对所述SLAM坐标进行投影处理，得到校准后的SLAM坐标。6.根据权利要求1-5所述的方法，其中，所述响应于确定所述GPS信息符合预设的定位差条件，将所述SLAM坐标转换为计算地理坐标，包括：响应于确定所述GPS信息符合预设的定位差条件，基于预先得到的偏差角，计算得到旋转矩阵；基于所述SLAM坐标和所述旋转矩阵，得到偏移坐标；基于所述偏移坐标，得到计算地理坐标。7.根据权利要求6所述的方法，所述定位差条件包括以下至少一项：所述GPS信息对应的信号强度小于或等于预设的信号值；所述GPS信息对应的地理坐标不在预设的坐标范围内；所述GPS信息与预设地图中的建筑位置相对应。8.一种线路导航装置，所述装置包括：实时导航单元，被配置成基于实时获取的终端的同步定位与制图GPS信息，对当前路线进行增强现实导航；获取单元，被配置成获取所述终端的SLAM坐标；转换单元，被配置成响应于确定所述GPS信息符合预设的定位差条件，将所述SLAM坐标转换为计算地理坐标；修正导航单元，被配置成基于所述计算地理坐标，对当前路线进行增强现实导航。9.根据权利要求8所述的装置，所述装置还包括：计算单元，被配置成基于当前路线，计算得到实际地理坐标；映射单元，被配置成将所述实际地理坐标映射为SLAM的位姿；生成单元，被配置成基于所述位姿，在增强现实导航的3D模型中生成追踪锚点；添加单元，被配置成在所述追踪锚点上添加增强现实标识，以使实现增强现实标识与所述追踪锚点实时对应。10.根据权利要求9所述的装置，所述映射单元包括：偏移模块，被配置成基于实际基准坐标和所述实际地理坐标，得到偏移坐标；旋转计算模块，被配置成基于预先得到的偏差角，计算得到旋转矩阵；位姿得到模块，被配置成基于所述偏移坐标和所述旋转矩阵的转置矩阵，得到SLAM的位姿。11.根据权利要求8所述的装置，所述装置还包括：校准单元，被配置成对所述SLAM坐标进行校准。12.根据权利要求11所述的装置，所述校准单元包括：步长计算模块，被配置成计算所述SLAM坐标与基准点的步长；投影模块，被配置成基于当前路线的方向，对所述SLAM坐标进行投影处理，得到校准后的SLAM坐标。13.根据权利要求8-12之一所述的装置，其中，所述转换单元包括：矩阵计算模块，被配置成响应于确定所述GPS信息符合预设的定位差条件，基于预先得到的偏差角，计算得到旋转矩阵；矩阵得到模块，被配置成基于所述SLAM坐标和所述旋转矩阵，得到偏移坐标；坐标计算模块，被配置成基于所述偏移坐标，得到计算地理坐标。14.根据权利要求13所述的装置，所述定位差条件包括以下至少一项：所述GPS信息对应的信号强度小于或等于预设的信号值；所述GPS信息对应的地理坐标不在预设的坐标范围内；所述GPS信息与预设地图中的建筑位置相对应。15.一种电子设备，其特征在于，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-7中任一项所述的方法。16.一种存储有计算机指令的非瞬时计算机可读存储介质，其特征在于，所述计算机指令用于使所述计算机执行权利要求1-7中任一项所述的方法。17.一种计算机程序产品，包括计算机程序，所述计算机程序在被处理器执行时实现权利要求1-7中任一项所述的方法。
说明书desc
技术领域本公开涉及计算机技术领域，具体涉及计算机视觉、图像处理、增强现实等技术领域，尤其涉及一种线路导航方法和装置、电子设备、计算机可读介质以及计算机程序产品。背景技术通过在实景相机画面中，叠加与导航空间相贴合的虚拟AR标识可以直观地为用户提供增强现实导航。传统的二维地图步行导航，地图辨识成本较高，部分用户找路困难，并且在地道、高楼林立的地方，采用GPS信号进行的增强现实导航很容易受到干扰，或者出现GPS信号中断的情况，导致二维平面导航完全不可用。发明内容提供了一种线路导航方法和装置、电子设备、计算机可读介质以及计算机程序产品。根据第一方面，提供了一种线路导航方法，该方法包括：基于实时获取的终端的GPS信息，对当前路线进行增强现实导航；获取终端的SLAM坐标；响应于确定GPS信息符合预设的定位差条件，将SLAM坐标转换为计算地理坐标；基于计算地理坐标，对当前路线进行增强现实导航。根据第二方面，提供了一种线路导航装置，该装置包括：实时导航单元，被配置成基于实时获取的终端的GPS信息，对当前路线进行增强现实导航；获取单元，被配置成获取终端的SLAM坐标；转换单元，被配置成响应于确定GPS信息符合预设的定位差条件，将SLAM坐标转换为计算地理坐标；修正导航单元，被配置成基于计算地理坐标，对当前路线进行增强现实导航。根据第三方面，提供了一种电子设备，该电子设备包括：至少一个处理器；以及与至少一个处理器通信连接的存储器，其中，存储器存储有可被至少一个处理器执行的指令，指令被至少一个处理器执行，以使至少一个处理器能够执行如第一方面任一实现方式描述的方法。根据第四方面，提供了一种存储有计算机指令的非瞬时计算机可读存储介质，计算机指令用于使计算机执行如第一方面任一实现方式描述的方法。根据第五方面，提供了一种计算机程序产品，包括计算机程序，计算机程序在被处理器执行时实现如第一方面任一实现方式描述的方法。本公开的实施例提供的线路导航方法和装置，首先，基于实时获取的终端的GPS信息，对当前路线进行增强现实导航；其次，获取终端的SLAM坐标；再次，响应于确定GPS信息符合预设的定位差条件，将SLAM坐标转换为计算地理坐标；最后，基于计算地理坐标，对当前路线进行增强现实导航。由此，在GPS信号符合预设的定位差条件时，可以及时将SLAM坐标应用于增强现实导航，避免了出现路线指示错误的情况，提高了虚拟场景和现实场景结合时的地理定位的准确性，提高了增强现实导向的准确率。应当理解，本部分所描述的内容并非旨在标识本公开的实施例的关键或重要特征，也不用于限制本公开的范围。本公开的其它特征将通过以下的说明书而变得容易理解。附图说明附图用于更好地理解本方案，不构成对本公开的限定。其中：图1是根据本公开线路导航方法的一个实施例的流程图；图2是本公开实施例中地理空间与SLAM空间之间的对应关系图；图3是本公开实施例中SLAM校准前与当前线路之间的对应关系图；图4是本公开实施例中SLAM坐标与投影点的对应关系图；图5是根据本公开线路导航装置的实施例的结构示意图；图6是用来实现本公开实施例的线路导航方法的电子设备的框图。具体实施方式以下结合附图对本公开的示范性实施例做出说明，其中包括本公开实施例的各种细节以助于理解，应当将它们认为仅仅是示范性的。因此，本领域普通技术人员应当认识到，可以对这里描述的实施例做出各种改变和修改，而不会背离本公开的范围和精神。同样，为了清楚和简明，以下的描述中省略了对公知功能和结构的描述。图1示出了根据本公开线路导航方法的一个实施例的流程100，上述线路导航方法包括以下步骤：步骤101，基于实时获取的终端的GPS信息，对当前路线进行增强现实导航。本实施例中，终端可以是由对象手持的移动终端，该移动终端上设置有摄像装置，通过摄像装置可以实时拍摄终端或者对象周围的景象，当对象具有增强现实导航的需求时，打开终端上的支持增强现实显示的应用，可在应用对应的界面上实时查看当前线路以及当前线路上叠加的增强现实指示标识，本该实施中，对象是一个或多个对终端具有使用权限的用户。本实施例中，线路导航方法运行于其上的执行主体可以是上述终端中的处理器，也可以是与上述终端进行通信的服务器，还可以是其他与终端进行通信的电子设备。本实施例中，终端上可以设置有GPS，当检测终端当前所在的路段时，可以通过终端上的GPS获取终端的GPS信息，终端的GPS信息包括：GPS坐标，对象手持终端运行的运行位置，终端在各个运行位置的持续时间，终端在各个运行位置的具体时间点，以终端在各个运行位置相关信息等等，其中，GPS坐标是全球定位系统坐标的简称，一般由经度和维度两个参数组成，也叫经纬度。本实施例中，基于终端的GPS信息，对当前路线进行增强现实导航包括：基于预设的地图数据，将当前线路显示在支持增强现实的应用的界面上，并将终端的GPS信息中的GPS坐标转换成地理坐标，基于地理坐标，通过AR虚拟定位标识在显示的当前线路上指示当前终端的位置。步骤102，获取终端的同步定位与制图SLAM坐标。本实施例中，终端上可以设置有采集SLAM信息的装置，如ARKit和AREngine。通过该装置，选取SLAM信息中与终端相关的坐标值，即为终端的SLAM坐标。本实施例中，SLAM坐标是在三维空间对终端进行定位的位置信息，通过SLAM装置实时采集的SLAM坐标可以确定SLAM空间中终端的位置。SLAM能够根据传感器测量数据和摄像头重复观测周边环境的特点，建立环境地图，同时定位自身的位置和姿态，尤其是视觉SLAM，采用双目视觉传感器或摄像机，能够在成本较为低廉的情况下，获取包含尽可能丰富的方位特征信息量，用以执行局部区域环境的及时定位和路径特征地图构建；同时搭配上基于双目视觉传感器或摄像机采集图像而获得的视觉深度图像，能够有效地提供障碍物的三维占据信息，能够用于及时地重建局部环境3D场景地图。本实施例中的终端是支持SLAM的终端或视觉SLAM的终端，该终端还可以是支持SLAM的移动终端，进一步，支持SLAM的移动终端可以包括有：硬件支持SLAM的移动终端以及安装有支持SLAM应用的软件的移动终端。步骤103，响应于确定GPS信息符合预设的定位差条件，将SLAM坐标转换为计算地理坐标。本实施例中，预设的定位差条件是为GPS传输的GPS信息设置的限制条件，当GPS传输的GPS信息满足预设的定位差的条件时，确定当前GPS信息已不适用于进行增强现实导航，无法通过GPS信息进行当前线路的定位。本实施例中，预设的定位差条件可以包括：预设时间段中GPS信息的GPS坐标持续为GPS的原点坐标。其中，GPS的原点坐标为GPS的坐标轴的交点，预设时间是根据GPS的性能而预先设置的时间，例如3s，当GPS信息中的GPS坐标是原点坐标时，确定GPS测量到的终端的定位信息无效。可选地，预设的定位查条件还可以包括：预设的时间段中GPS信息的GPS坐标的各个向量变化量不大于预设值。其中，预设的时间段和预设值可以根据GPS性能进行适应性设置。在本实施例的一些可选实现方式中，上述定位差条件包括以下至少一项：GPS信息对应的信号强度小于或等于预设的信号值；GPS信息对应的地理坐标不在预设的坐标范围内；GPS信息与预设地图中的建筑位置相对应。本可选实现方式中，预设的信号值为GPS可以检测到最小信号值，该预设的信号值用于限定GPS信号的强弱，GPS信息对应的信号强度小于或等于预设的信号值，确定GPS的信号较弱。本可选实现方式中，通过投影变换工具将GPS信息中的GPS坐标转换为地理坐标，当前线路上的各个坐标位于预设的地图数据中，预设的坐标范围是当前路线对应的地图数据的坐标范围，当通过转换GPS坐标得到的地理坐标不再预设当前路线对应的地图数据中，确定GPS信息对应的地理坐标不在预设的坐标范围内。当通过预设地图的地图数据确定当前终端已经位于预设地图的建筑物位置，GPS信号被建筑物遮挡的机率较大，此时不宜再采用GPS进行增强现实导航。本可选实现方式中，将定位差条件设置为几种不同情况，为GPS在信号弱时的几种提供了可靠的可选方式，以涵盖GPS无法进行增强现实导航的情况。本实施例中，通过确定地理空间与SLAM空间之间的转换关系，可以有效保证采用终端当前的SLAM坐标实现增强现实导航。一般地对象是垂直抬起手机打开并使用AR导航的，所以地理空间与SLAM空间之间的转换关系，如图2所示，有两个特点：1)地理空间的地理原点对应AR导航初始化GPS基点，地理坐标原点和SLAM空间的SLAM坐标原点重合。2)地理空间的Height轴和SLAM空间的Y轴重合。基于该两个特点两个空间可以近似作为绕Y轴的旋转变换。可以通过设计旋转矩阵，将两个空间的坐标进行相互转化，从而实现将SLAM坐标转换为计算地理坐标。在本实施例的一些可选实现方式中，上述响应于确定GPS信息符合预设的定位差条件，将SLAM坐标转换为计算地理坐标，包括：响应于确定GPS信息符合预设的定位差条件，基于预先得到的偏差角，计算得到旋转矩阵；基于SLAM坐标和旋转矩阵，得到偏移坐标；基于偏移坐标，得到计算地理坐标。本实施例中，偏差角θ为GPS空间坐标系与SLAM空间坐标系之间的转换角度，一般地，偏差角可以是终端在地理坐标系下垂直地心时，相对于地理坐标中的正北的偏角。旋转矩阵为以偏差角为基础，得到的、表示GPS空间坐标系与SLAM坐标系之间转换关系的矩阵。本可选实现方式中，把SLAM坐标，转换为计算地理坐标，输出给执行主体中的导航引擎，进行绑路诱导触发，从而实现持续不间断增强现实导航。依次采用式1a、式1b进行计算，可以得到计算地理坐标。在式1a中，将每帧的SLAM坐标经过左乘旋转矩阵与1/λ，得到相对地理坐标的偏移坐标然后与基准地理坐标进行叠加，即可得到计算地理坐标式1a中，λ用于表示墨卡托坐标单位的步长和米的比例换算关系，一般地，λ约等于1。本实施例中，计算地理坐标是SLAM坐标通过旋转矩阵变换之后得到的坐标，通过预先得到的偏差角得到旋转矩阵，由旋转矩阵与SLAM坐标相乘得到偏移坐标，由偏移坐标得到计算地理坐标，可以有效还原地理坐标与SLAM之间的转换关系，保证了计算地理坐标得到的可靠性。步骤104，基于计算地理坐标，对当前路线进行增强现实导航。本实施例中，计算地理坐标为GPS信息无法采用时，通过SLAM坐标转换而成的世界坐标系下的地理坐标，一般地计算地理坐标为三维坐标，当通过GPS进行的增强现实导航是二维图像导航时，基于计算地理坐标进行的增强现实导航则是三维空间下的增强现实导航。本实施例中，计算地理坐标与通过GPS信息得到的地理坐标的作用相同，将计算地理坐标输送给增强现实导航的绑路诱导单元，进行帮路诱导触发，可以精确的对当前路线进行增强现实导航。需要说明的是，本实施例的线路导航方法运行于其上的执行主体也可以实现绑路诱导单元的功能。本实施例提供的线路导航方法，在地道中或高楼林立处，且GPS中断的时候，可以利用视觉SLAM技术实现相对位置推算，使对象能够持续完成导航。本公开的实施例提供的线路导航方法和装置，首先，基于实时获取的终端的GPS信息，对当前路线进行增强现实导航；其次，获取终端的SLAM坐标；再次，响应于确定GPS信息符合预设的定位差条件，将SLAM坐标转换为计算地理坐标；最后，基于计算地理坐标，对当前路线进行增强现实导航。由此，在GPS信号符合预设的定位差条件时，可以及时将SLAM坐标应用于增强现实导航，避免了出现路线指示错误的情况，提高了虚拟场景和现实场景结合时的地理定位的准确性，提高了增强现实导向的准确率。在本公开的另一个实施例中，在上述响应于确定GPS信息符合预设的定位差条件，将SLAM坐标转换为计算地理坐标的步骤之前，方法还包括：基于当前路线，计算得到实际地理坐标；将实际地理坐标映射为SLAM的位姿；基于位姿，在增强现实导航的3D模型中生成追踪锚点；在追踪锚点上添加增强现实标识，以使实现增强现实标识与追踪锚点实时对应。本实施例提供的线路导航方法运行于其上的执行主体可以实现线路诱导和3D的AR标识渲染两个功能，当执行主体实现线路诱导功能时，将SLAM坐标偏移转换为计算地理坐标，计算地理坐标以GPS信息对应的基准定位点为基点，并且计算地理坐标可以实现GPS信号中断后的定位推算，将计算地理坐标输入执行主体的线路诱导功能的导航引擎，导航引擎将当前路线和终端在当前路线的位置实时显示在增强现实的显示界面中，并且还可以持续输出对当前路线的文本、语音诱导，实现了无GPS导航。当执行主体实现3D AR标识渲染的功能时，可以将增强现实标识设置在3D模型的一些区域，以指示增强现实显示界面显示当前路线的路标和特殊点。本实施例中，基于当前路线结合GPS信息以及预先建立的增强现实导航的3D模型，可以确定该3D模型中的路标和特殊点，在3D模型中添加跟踪这些路标和特殊点的增强现实标识，需要说明的是，根据路标和特殊点的种类和型号等，在路标和特殊点上添加的增强现实标识可以相同也可以不同。进一步，将当前路线的实际地理坐标转化为SLAM的位姿，并结合SLAM的位姿在特殊点增加追踪锚点，可以使追踪锚点的追踪效果更好。本实施例中，将路线地理坐标映射为SLAM空间坐标并生成追踪锚点，然后将3D路线箭头模型摆放到对应追踪锚点上，利用SLAM追踪能力，使3D路线路标的移动、透视效果细腻并贴近现实，实现虚实无缝贴合的沉浸式导航体验。在本实施例的一些可选实现方式中，将实际地理坐标映射为SLAM的位姿，包括：基于实际基准坐标和实际地理坐标，得到偏移坐标；基于预先得到的偏差角，计算得到旋转矩阵；将偏移坐标左乘旋转矩阵的转置矩阵，得到SLAM的位姿。本实施例中，偏差角为如图2所示的θ角，该偏差角是对象在增强导航时，相对地心垂直抬起中终端之后，终端相对于地理坐标中正北方向的偏角，该偏角可以通过传感器直接测量得到，通过偏差角θ可以得到SLAM空间坐标系与GPS坐标系之间的旋转矩阵，进一步通过旋转矩阵可以得到SLAM位姿。可选地，偏差角还可以在对象使用终端时，通过计算得到，偏差角可以采用以下计算步骤得到：在终端打开之后，检测终端相对于地心是否处于垂直状态；响应于终端处于垂直状态，基于GPS信息对应的GPS坐标与SLAM坐标，计算得到偏差角。本可选实现方式中，可以依次采用式2a、式2b进行计算，可以得到SLAM位姿。在式2a中，将实际地理坐标和实际基准坐标求偏移，得到相对地理坐标的偏移坐标在式2b中，偏移坐标左乘旋转矩阵的转置矩阵与系数λ，得到SLAM的位姿的坐标利用SLAM的位姿坐标进行增强现实的3D模型跟踪摆放，从而实现虚实结合的AR效果。其中，系数λ用于表示墨卡托坐标单位的步长和米的比例换算关系，一般地，λ约等于1。本实施例中，基准地理坐标和实际基准坐标均为GPS信息对应的初始坐标，也是GPS的初始坐标值。本可选实现方式中，基于预先得到的偏差角，计算旋转矩阵，通过旋转矩阵得到SLAM的位姿，可以保证SLAM的位姿计算的可靠性，保证了增强现实标识的显示效果。在通常情况下，SLAM定位推算依赖于传感器的精度和周围磁场环境，在长距离定位推算下容易产生累积误差。在本公开的另一个实施例中，在响应于确定GPS信息符合预设的定位差条件，将SLAM坐标转换为计算地理坐标的步骤之前，方法还包括：对SLAM坐标进行校准，以采用校准后的SLAM坐标进行计算地理坐标的转换。在实际应用中，SLAM定位容易产生累积误差，推算距离大于100M后定位效果较差，效果如图3所示，可以看出SLAM定位2始终与路线1保持一定夹角。本可选实现方式中，基于实践中SLAM对线路定位时的固定偏差，可以将此偏差进行分解，得到坐标补偿值，在使用SLAM的坐标进行增强现实导航时，可以将SLAM坐标增加该坐标补偿值，从而达到对SLAM坐标进行校准的目的。可选地，在导航过程，还可以结合当前路线的特征，对SLAM坐标进行校准，例如，当前路线为曲线，针对当前路线的上不同路线的曲度，设置不同的坐标补偿值，从而为不同曲度的路段对应的SLAM坐标补偿不同的坐标补偿值。本可选实现方式中，通过对SLAM进行校准可以消除累积误差，提升定位精度。在上述实施例的一些可选实现方式中，上述对SLAM坐标进行校准包括：计算SLAM坐标与基准点的步长；基于当前路线的方向，对SLAM坐标进行投影处理，得到校准后的SLAM坐标。鉴于实际实践中，SLAM导航无法严格沿着当前路线行进，导致越走定位误差越大，本可选实现方式中，对SLAM坐标进行投影处理包括：针对每个SLAM坐标B，计算与基准点A的步长s。然后根据当前路线的方向α，利用如下公式等步长地投影：lng1＝s*sinα+lng0；lat1＝s*sinα+lat0； 投影到当前路线方向上，即可得到投影点的坐标C，其中，基准点A是当前SLAM坐标在进行一个步长定位前一个定位点，SLAM定位步长为SLAM装置在定位时的单位长度，当前路线的方向α相对于当前路线在地理坐标中正北方向具有的夹角，如图4所示：按照如上公式3a、3b，可以得到每个SLAM坐标的投影点，即可实现严格沿着当前路线行进，并且能够有效消除累积误差。经过投影处理后的SLAM坐标生成SLAM的定位轨迹，SLAM的定位轨迹严格按照当前路线方向行进，能够满足长距离的导航需求。本可选实现方式中，基于当前路线的方向，对SLAM坐标进行投影处理，可以使处理后的SLAM坐标实时沿着当前路线的方向贴合当前路线行进，提高了SLM对当前路线进行定位的准确性。本公开提供的线路导航方法，利用视觉SLAM跟踪技术，不仅可以提升虚实结合沉浸式导航体验，并且可以输出跟踪定位，解决GPS信号中断后无法继续导航的痛点。经过后续的持续优化，可以将SLAM定位推算效果延长到800M左右，由此，可以满足国内95％以上的地道场景导航需求。并且在其他场景，如楼宇林立处，导致的GPS中断，也可以启动SLAM定位推算，保证持续导航体验。进一步参考图5，作为对上述各图所示方法的实现，本公开提供了线路导航装置的一个实施例，该装置实施例与图1所示的方法实施例相对应，该装置具体可应用于各种电子设备中。如图5所示，本实施例提供的线路导航装置500包括：实时导航单元501，获取单元502，转换单元503，修正导航单元504。其中，上述实时导航单元501，可以被配置成基于实时获取的终端的GPS信息，对当前路线进行增强现实导航。上述获取单元502，可以被配置成获取终端的SLAM坐标。上述转换单元503，可以被配置成响应于确定GPS信息符合预设的定位差条件，将SLAM坐标转换为计算地理坐标。上述修正导航单元504，可以被配置成基于计算地理坐标，对当前路线进行增强现实导航。在本实施例中，线路导航装置500中：实时导航单元501，获取单元502，转换单元503，修正导航单元504的具体处理及其所带来的技术效果可分别参考图1对应实施例中的步骤101、步骤102、步骤103、步骤104的相关说明，在此不再赘述。在本实施例的一些可选的实现方式中，上述装置500还包括：计算单元、映射单元、生成单元、添加单元。其中，上述计算单元，可以被配置成基于当前路线，计算得到实际地理坐标。上述映射单元，可以被配置成将实际地理坐标映射为SLAM的位姿。上述生成单元，可以被配置成基于位姿，在增强现实导航的3D模型中生成追踪锚点。上述添加单元，可以被配置成在追踪锚点上添加增强现实标识，以使实现增强现实标识与追踪锚点实时对应。在本实施例的一些可选的实现方式中，上述映射单元包括：偏移模块、旋转计算模块、位姿得到模块。其中，上述偏移模块，可以被配置成基于实际基准坐标和实际地理坐标，得到偏移坐标。上述旋转计算模块，可以被配置成基于预先得到的偏差角，计算得到旋转矩阵。上述位姿得到模块，可以被配置成将偏移坐标左乘旋转矩阵的转置矩阵，得到SLAM的位姿。在本实施例的一些可选的实现方式中，上述装置还包括：校准单元。其中，上述校准单元，可以被配置成被配置成对SLAM坐标进行校准。在本实施例的一些可选实现方式中，上述校准单元包括：步长计算模块、投影模块。其中，上述步长计算模块，可以被配置成计算SLAM坐标与基准点的步长。上述投影模块，可以被配置成基于当前路线的方向，对SLAM坐标进行投影处理，得到校准后的SLAM坐标。在本实施例的一些可选的实现方式中，转换单元503包括：矩阵计算模块、矩阵得到模块、坐标计算模块。其中，上述矩阵计算模块，可以被配置成响应于确定GPS信息符合预设的定位差条件，基于预先得到的偏差角，计算得到旋转矩阵。上述矩阵得到模块，可以被配置成基于SLAM坐标和旋转矩阵，得到偏移坐标。上述坐标计算模块，可以被配置成基于偏移坐标，得到计算地理坐标。在本实施例的一些可选的实现方式中，定位差条件包括以下至少一项：GPS信息对应的信号强度小于或等于预设的信号值；GPS信息对应的地理坐标不在预设的坐标范围内；GPS信息与预设地图中的建筑位置相对应。本公开的实施例提供的线路导航装置，首先，实时导航单元501基于实时获取的终端的GPS信息，对当前路线进行增强现实导航；其次，获取单元502获取终端的SLAM坐标；再次，转换单元503响应于确定GPS信息符合预设的定位差条件，将SLAM坐标转换为计算地理坐标；最后，修正导航单元504基于计算地理坐标，对当前路线进行增强现实导航。由此，在GPS信号符合预设的定位差条件时，可以及时将SLAM坐标应用于增强现实导航，避免了出现路线指示错误的情况，提高了虚拟场景和现实场景结合时的地理准确性，提高了导向准确率。本公开的技术方案中，所涉及的用户个人信息的收集、存储、使用、加工、传输、提供和公开等处理，均符合相关法律法规的规定，且不违背公序良俗。根据本公开的实施例，本公开还提供了一种电子设备、一种可读存储介质和一种计算机程序产品。图6示出了可以用来实施本公开的实施例的示例电子设备600的示意性框图。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本公开的实现。如图6所示，设备600包括计算单元601，其可以根据存储在只读存储器602中的计算机程序或者从存储单元608加载到随机访问存储器603中的计算机程序，来执行各种适当的动作和处理。在RAM 603中，还可存储设备600操作所需的各种程序和数据。计算单元601、ROM 602以及RAM603通过总线604彼此相连。输入/输出接口605也连接至总线604。设备600中的多个部件连接至I/O接口605，包括：输入单元606，例如键盘、鼠标等；输出单元607，例如各种类型的显示器、扬声器等；存储单元608，例如磁盘、光盘等；以及通信单元609，例如网卡、调制解调器、无线通信收发机等。通信单元609允许设备600通过诸如因特网的计算机网络和/或各种电信网络与其他设备交换信息/数据。计算单元601可以是各种具有处理和计算能力的通用和/或专用处理组件。计算单元601的一些示例包括但不限于中央处理单元、图形处理单元、各种专用的人工智能计算芯片、各种运行机器学习模型算法的计算单元、数字信号处理器、以及任何适当的处理器、控制器、微控制器等。计算单元601执行上文所描述的各个方法和处理，例如线路导航方法。例如，在一些实施例中，线路导航方法可被实现为计算机软件程序，其被有形地包含于机器可读介质，例如存储单元608。在一些实施例中，计算机程序的部分或者全部可以经由ROM 602和/或通信单元609而被载入和/或安装到设备600上。当计算机程序加载到RAM 603并由计算单元601执行时，可以执行上文描述的线路导航方法的一个或多个步骤。备选地，在其他实施例中，计算单元601可以通过其他任何适当的方式而被配置为执行线路导航方法。本文中以上描述的系统和技术的各种实施方式可以在数字电子电路系统、集成电路系统、场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、负载可编程逻辑设备、计算机硬件、固件、软件、和/或它们的组合中实现。这些各种实施方式可以包括：实施在一个或者多个计算机程序中，该一个或者多个计算机程序可在包括至少一个可编程处理器的可编程系统上执行和/或解释，该可编程处理器可以是专用或者通用可编程处理器，可以从存储系统、至少一个输入装置、和至少一个输出装置接收数据和指令，并且将数据和指令传输至该存储系统、该至少一个输入装置、和该至少一个输出装置。用于实施本公开的方法的程序代码可以采用一个或多个编程语言的任何组合来编写。这些程序代码可以提供给通用计算机、专用计算机或其他可编程线路导航装置的处理器或控制器，使得程序代码当由处理器或控制器执行时使流程图和/或框图中所规定的功能/操作被实施。程序代码可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本公开的上下文中，机器可读介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的程序。机器可读介质可以是机器可读信号介质或机器可读储存介质。机器可读介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。为了提供与用户的交互，可以在计算机上实施此处描述的系统和技术，该计算机具有：用于向用户显示信息的显示装置或者LCD监视器)；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给计算机。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网和互联网。计算机系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。服务器可以是云服务器，也可以为分布式系统的服务器，或者是结合了区块链的服务器。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本公开中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本公开公开的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本公开保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本公开的精神和原则之内所作的修改、等同替换和改进等，均应包含在本公开保护范围之内。
