标题title
一种基于图片、视频的猪只点数算法
摘要abst
本发明公开了一种基于图片、视频的猪只点数算法，包括安装于围栏上的摄像头，点数算法通过摄像头采集的图片利用机器视觉技术对图片中猪的数量进行统计，点数算法利用标注软件对围栏进行标注，用猪只的坐标和围栏坐标进行比较，判断是否在围栏里，围栏的上方通过若干个支撑杆固定连接有支撑圈，支撑圈的内侧转动连接有转动环，摄像头安装于转动环的内侧一角，本发明所达到的有益效果包括：本发明通过摄像头采集的图片利用机器视觉技术对图片中猪的数量进行统计，利用标注软件对围栏进行标注，判断是否在围栏里，并且通过转动环带动摄像头进行转动，拍摄开关机构可自动控制摄像头进行三次相对猪群不同角度的照片拍摄，提高点数准确率。
权利要求书clms
1.一种基于图片、视频的猪只点数算法，包括安装于围栏上的摄像头，其特征在于，所述点数算法通过摄像头采集的图片利用机器视觉技术对图片中猪的数量进行统计，所述点数算法利用标注软件对围栏进行标注，用猪只的坐标和围栏坐标进行比较，判断是否在围栏里；所述围栏的上方通过若干个支撑杆固定连接有支撑圈，所述支撑圈的内侧转动连接有转动环，所述摄像头安装于转动环的内侧一角，所述摄像头通过转动环转动连接于支撑圈的内侧，所述摄像头的顶端设置有用于控制拍摄的拍摄开关机构；所述拍摄开关机构包括固定板，所述固定板的中部开设有插接孔且插杆插接于插接孔内，所述插杆的上端固定连接有弧形块，所述弧形块的底端一侧固定连接有挤压短杆，所述固定板的上端且位于挤压短杆的下方安装有开关，所述弧形块的底端另一侧与固定板上端之间固定连接有弹簧，所述支撑圈的三侧上端均固定连接有用于挤压弧形块的按压杆。2.根据权利要求1所述的一种基于图片、视频的猪只点数算法，其特征在于：所述摄像头的两侧设置有调节机构，所述调节机构包括一对侧板，一对所述侧板分别固定连接于固定板的底端两侧，其中一个所述侧板的外侧固定连接有一号电机，所述一号电机的输出端贯穿相应的侧板且固定连接于摄像头的连接座表面一侧，所述摄像头的连接座表面另一侧通过转轴转动连接于相应的侧板内侧，所述摄像头的后侧设置有清理机构；所述清理机构包括用于清理摄像头镜头部分的清理刷。3.根据权利要求2所述的一种基于图片、视频的猪只点数算法，其特征在于：所述固定板的底端且位于摄像头后侧的两侧固定连接有连接块，一对所述连接块之间固定连接有清理筒，一对所述连接块的下部之间转动连接有连接轴，所述连接轴横向贯穿清理筒的中部，所述清理刷固定连接于连接轴的表面，所述清理筒相对摄像头的一侧开设有刮尘口，所述清理刷的端部延伸出刮尘口。4.根据权利要求3所述的一种基于图片、视频的猪只点数算法，其特征在于：所述连接轴的一端与摄像头连接座的一侧转轴端部通过驱动机构连接，所述驱动机构包括两个蜗轮，两个所述蜗轮分别固定连接于连接轴的一端与摄像头连接座的一侧转轴端部，一对所述蜗轮的上侧啮合连接有蜗杆，相对所述蜗杆的侧板外侧固定连接有电动伸缩杆，所述电动伸缩杆的底端固定连接有导向环，且蜗杆的端部转动连接于导向环内。5.根据权利要求1所述的一种基于图片、视频的猪只点数算法，其特征在于：所述支撑圈的内侧沿着周圈开设有内槽，所述内槽内设置有转动机构，所述转动机构包括二号电机，所述二号电机固定连接于内槽的一侧中部底端，所述二号电机的输出端固定连接有齿轮，所述转动环的外环侧开凿设有齿痕，且转动环通过齿痕与齿轮啮合连接。6.根据权利要求5所述的一种基于图片、视频的猪只点数算法，其特征在于：所述转动环的底端沿着环向一体化连接有定位环，所述支撑圈的内槽底端相对定位环开设有环槽，所述定位环转动连接于环槽内。7.根据权利要求3所述的一种基于图片、视频的猪只点数算法，其特征在于：所述刮尘口的下侧口壁倾斜开设。8.根据权利要求3所述的一种基于图片、视频的猪只点数算法，其特征在于：所述清理筒的底端横向开设有排尘孔。
说明书desc
技术领域：本发明属于猪只点数设备技术领域，特别涉及一种基于图片、视频的猪只点数算法。背景技术：在饲养猪只时，需要对猪只的数量进行计数，为了提高工作效率，会利用摄像头对围栏中的猪只进行拍摄，再利用系统分析自动点数，但目前的图片点数中对围栏的标注都是基于对线条的判断，易受环境影响，准确率较差，并且摄像头一般固定安装在围栏上方一角，无法从多角度拍摄多个图片进行对比分析，当猪只数量较多又只进行一个角度的拍摄时，一些猪只部分拥挤在一起，猪只点数系统对照片的分析容易判断失误，因此本发明提出一种基于图片、视频的猪只点数算法。发明内容：本发明的目的就在于为了解决上述问题而提供一种基于图片、视频的猪只点数算法，解决了目前的图片点数中对围栏的标注都是基于对线条的判断，易受环境影响，准确率较差，并且摄像头一般固定安装在围栏上方一角，无法从多角度拍摄多个图片进行对比分析等缺点。为了解决上述问题，本发明提供了一种技术方案：一种基于图片、视频的猪只点数算法，包括安装于围栏上的摄像头，所述点数算法通过摄像头采集的图片利用机器视觉技术对图片中猪的数量进行统计，所述点数算法利用标注软件对围栏进行标注，用猪只的坐标和围栏坐标进行比较，判断是否在围栏里；所述围栏的上方通过若干个支撑杆固定连接有支撑圈，所述支撑圈的内侧转动连接有转动环，所述摄像头安装于转动环的内侧一角，所述摄像头通过转动环转动连接于支撑圈的内侧，所述摄像头的顶端设置有用于控制拍摄的拍摄开关机构，转动环带动摄像头进行转动，拍摄开关机构可自动控制摄像头进行三次相对猪群不同角度的照片拍摄，然后对比分析，提高点数准确率，避免猪只数量多拥挤在一起时出现点数不准确的情况。所述拍摄开关机构包括固定板，所述固定板的中部开设有插接孔且插杆插接于插接孔内，所述插杆的上端固定连接有弧形块，所述弧形块的底端一侧固定连接有挤压短杆，所述固定板的上端且位于挤压短杆的下方安装有开关，所述弧形块的底端另一侧与固定板上端之间固定连接有弹簧，所述支撑圈的三侧上端均固定连接有用于挤压弧形块的按压杆，在此摄像头由转动环带动在支撑圈内侧缓慢转动时，当摄像头上方的弧形块接触相应的按压杆，按压杆按压弧形块表面，使得弹簧压缩，插杆的下部下移深入固定板的插接孔中后，弧形块上的挤压短杆会挤压开关，使得摄像头进行拍摄。在进一步的实施例中，所述摄像头的两侧设置有调节机构，所述调节机构包括一对侧板，一对所述侧板分别固定连接于固定板的底端两侧，其中一个所述侧板的外侧固定连接有一号电机，所述一号电机的输出端贯穿相应的侧板且固定连接于摄像头的连接座表面一侧，所述摄像头的连接座表面另一侧通过转轴转动连接于相应的侧板内侧，在调节机构进行调节时，打开一号电机，带动摄像头转动，即可调节摄像头的角度，使得摄像头的镜头对准围栏内部全景，保证拍摄出的图片包括围栏内部全景，确保正常点数，所述摄像头的后侧设置有清理机构，清理机构用于清理摄像头镜头表面的灰尘，调节机构不仅可调节摄像头的角度，也方便带动摄像头至清理刷处进行清理。所述清理机构包括用于清理摄像头镜头部分的清理刷。在进一步的实施例中，所述固定板的底端且位于摄像头后侧的两侧固定连接有连接块，一对所述连接块之间固定连接有清理筒，一对所述连接块的下部之间转动连接有连接轴，所述连接轴横向贯穿清理筒的中部，所述清理刷固定连接于连接轴的表面，所述清理筒相对摄像头的一侧开设有刮尘口，所述清理刷的端部延伸出刮尘口，在清理刷进行清理时，清理刷转动至收纳在清理筒中，当清理刷收纳时，会与刮尘口产生刮蹭，灰尘会刮蹭掉落，通过清理刷反复转进转出刮尘口，即可将灰尘刮除。在进一步的实施例中，所述连接轴的一端与摄像头连接座的一侧转轴端部通过驱动机构连接，所述驱动机构包括两个蜗轮，两个所述蜗轮分别固定连接于连接轴的一端与摄像头连接座的一侧转轴端部，一对所述蜗轮的上侧啮合连接有蜗杆，相对所述蜗杆的侧板外侧固定连接有电动伸缩杆，所述电动伸缩杆的底端固定连接有导向环，且蜗杆的端部转动连接于导向环内，在需要清理刷进行转动刮灰时，打开电动伸缩杆，电动伸缩杆的输出端带动蜗杆下降接触两个蜗轮，当调节机构的一号电机带动摄像头转动时，摄像头连接座的一侧转轴转动，带动其端部相应的蜗轮转动，蜗轮转动时，其上侧的蜗杆转动，另一个蜗轮随之被蜗杆带动转动，使得连接轴转动，带动清理刷转动至刮尘口进行刮尘。在进一步的实施例中，所述支撑圈的内侧沿着周圈开设有内槽，所述内槽内设置有转动机构，所述转动机构包括二号电机，所述二号电机固定连接于内槽的一侧中部底端，所述二号电机的输出端固定连接有齿轮，所述转动环的外环侧开凿设有齿痕，且转动环通过齿痕与齿轮啮合连接，二号电机带动齿轮转动时，与之啮合的转动环随之转动，实现自动化转动调节摄像头的位置。在进一步的实施例中，所述转动环的底端沿着环向一体化连接有定位环，所述支撑圈的内槽底端相对定位环开设有环槽，所述定位环转动连接于环槽内，在转动环进行转动时，定位环在环槽内转动，定位环具有定位效果，转动环转动时不会在支撑圈的内槽内偏移，转动稳定。在进一步的实施例中，所述刮尘口的下侧口壁倾斜开设，刮蹭出的灰尘会顺着倾斜的刮尘口下侧口壁滑落，方便排灰。在进一步的实施例中，所述清理筒的底端横向开设有排尘孔，蹭落在清理筒内部的灰尘会顺着清理筒内部弧面滑落至排尘孔排出。本发明的有益效果包括：本发明通过摄像头采集的图片利用机器视觉技术对图片中猪的数量进行统计，利用标注软件对围栏进行标注，用猪只的坐标和围栏坐标进行比较，判断是否在围栏里，准确率高，不易受环境影响，并且通过设置转动环和拍摄开关机构，转动环带动摄像头进行转动，拍摄开关机构可自动控制摄像头进行三次相对猪群不同角度的照片拍摄，然后对比分析，提高点数准确率，避免猪只数量多拥挤在一起时出现点数不准确的情况，并且通过设置调节机构，不仅可调节摄像头的角度，保证摄像头的镜头对准围栏内部全景进行拍摄，也方便带动摄像头至清理刷处进行清理灰尘，保证拍摄效果，同时设置有驱动机构，通过调节机构配合驱动机构可带动清理刷转动，使得清理刷与刮尘口反复刮蹭，其刷毛上的灰尘会刮蹭掉落，保证清理刷的清理效果。附图说明：为了易于说明，本发明由下述的具体实施及附图作以详细描述。图1为本发明的立体结构示意图；图2为本发明的拍摄开关机构连接处的结构示意图；图3为本发明的支撑圈的剖视结构示意图；图4为本发明的清理机构的连接处后视结构示意图；图5为本发明的连接轴和驱动机构连接处的后视局部结构示意图；图6为本发明的清理筒的结构示意图；图7为本发明的A处放大结构示意图。图中：1、围栏；2、摄像头；3、支撑圈；4、转动环；5、拍摄开关机构；51、固定板；52、弧形块；53、开关；54、弹簧；55、按压杆；56、插杆；6、调节机构；61、侧板；62、一号电机；7、清理机构；71、连接块；72、清理筒；73、清理刷；74、连接轴；75、刮尘口；76、排尘孔；8、驱动机构；81、蜗轮；82、电动伸缩杆；83、蜗杆；9、转动机构；91、二号电机；92、齿轮；93、定位环；94、环槽。具体实施方式：下面将结合本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例一请参阅图1-2，本实施例提供了一种基于图片、视频的猪只点数算法，包括安装于围栏1上的摄像头2，点数算法通过摄像头2采集的图片利用机器视觉技术对图片中猪的数量进行统计，点数算法利用标注软件对围栏1进行标注，用猪只的坐标和围栏1坐标进行比较，判断是否在围栏1里，在此点数算法进行点数时，摄像头2采集猪场图片，通过标注软件进行处理和标注并制作样本，使用神经网络对样本进行训练，得到模型，用训练的模型对图片进行预测，得到图片中猪的坐标，然后和围栏1坐标进行比较，过滤围栏1以外的猪，此种点数算法通过标注软件进行标注，准确率高，不易受环境影响。现有的摄像头2固定安装在围栏1上方，无法对猪只进行多角度拍摄，当猪只数量多拥挤在一起时，点数容易出现不准确，因此通过设置转动环4带动摄像头2转动，方便对猪只进行多角度拍摄，围栏1的上方通过若干个支撑杆固定连接有支撑圈3，转动环4转动连接于支撑圈3的内侧，摄像头2安装于转动环4的内侧一角，摄像头2通过转动环4转动连接于支撑圈3的内侧，摄像头2的顶端设置有用于控制拍摄的拍摄开关机构5，在摄像头2进行拍摄时，通过转动环4可带动摄像头2转动，方便相对猪只群的不同角度进行拍摄，当转动至需要拍摄的角度时，拍摄开关机构5控制摄像头2进行自动拍照。通过拍摄开关机构5在相应的角度可控制摄像头2的拍摄开关，拍摄开关机构5包括固定板51，固定板51的中部开设有插接孔且插杆56插接于插接孔内，插杆56的上端固定连接有弧形块52，弧形块52的底端一侧固定连接有挤压短杆，固定板51的上端且位于挤压短杆的下方安装有开关53，弧形块52的底端另一侧与固定板51上端之间固定连接有弹簧54，支撑圈3的三侧上端均固定连接有用于挤压弧形块52的按压杆55，在此摄像头2由转动环4带动在支撑圈3内侧缓慢转动时，当摄像头2上方的弧形块52接触相应的按压杆55，按压杆55按压弧形块52表面，使得弹簧54压缩，插杆56的下部下移深入固定板51的插接孔中后，弧形块52上的挤压短杆会挤压开关53，使得摄像头2进行拍摄一次，接着随着摄像头2的继续移动，弧形块52在弹簧54的推动下复位，开关53不再受到挤压复位，接着当摄像头2移动至另一个拍摄开关机构5时，拍摄下一次，直至三个拍摄开关机构5均使得摄像头2拍摄一次后，摄像头2完成多角度的照片拍摄，转动环4停止运行，通过拍摄开关机构5可自动控制摄像头2进行三次相对猪群不同角度的照片拍摄，然后对比分析，提高点数准确率，避免猪只数量多拥挤在一起时出现点数不准确的情况。实施例二请参阅图1、图3和图4，在实施例一的基础上做了进一步改进：在此摄像头2固定安装进行拍摄时，摄像头2安装角度不可调节，当摄像头2的镜头没对准围栏1内部全景时，还需要重新拆卸安装，十分麻烦，因此通过设置调节机构6来调节摄像头2的角度，保证摄像头2对准猪只群进行拍摄，摄像头2的两侧设置有调节机构6，调节机构6包括一对侧板61，一对侧板61分别固定连接于固定板51的底端两侧，其中一个侧板61的外侧固定连接有一号电机62，一号电机62的输出端贯穿相应的侧板61且固定连接于摄像头2的连接座表面一侧，摄像头2的连接座表面另一侧通过转轴转动连接于相应的侧板61内侧，在调节机构6进行调节时，打开一号电机62，带动摄像头2转动，即可调节摄像头2的角度，使得摄像头2的镜头对准围栏1内部全景，保证拍摄出的图片包括围栏内部全景，确保正常点数。在摄像头2长期使用时，摄像头2镜头表面容易积累灰尘，会影响拍摄效果，因此摄像头2的后侧设置有清理机构7，清理机构7包括用于清理摄像头2镜头部分的清理刷73，当摄像头2进行清理时，通过调节机构6带动摄像头2转动，直至摄像头2的镜头部分接触清理刷73，清理刷73在摄像头2的镜头表面刷动，将灰尘刷去，可完成对摄像头2表面的清理，清理后再通过调节机构6带动摄像头2复位即可，避免摄像头2表面积累灰尘影响拍摄，因此调节机构6不仅可调节摄像头2的角度，也方便带动摄像头2至清理刷73处进行清理。实施例三请参阅图4和图6，在实施例二的基础上做了进一步改进：清理刷73清理镜头后，刷毛表面也需要进行清理，通过设置可转动的清理刷73，方便清理刷73转动至刮尘口75进行清理，固定板51的底端且位于摄像头2后侧的两侧固定连接有连接块71，一对连接块71之间固定连接有清理筒72，一对连接块71的下部之间转动连接有连接轴74，连接轴74横向贯穿清理筒72的中部，清理刷73固定连接于连接轴74的表面，清理筒72相对摄像头2的一侧开设有刮尘口75，清理刷73的端部延伸出刮尘口75，在清理刷73进行清理时，清理刷73转动至收纳在清理筒72中，当清理刷73收纳时，会与刮尘口75产生刮蹭，灰尘会刮蹭掉落，通过清理刷73反复转进转出刮尘口75，即可将灰尘刮除。进一步的，刮尘口75的下侧口壁倾斜开设，刮蹭出的灰尘会顺着倾斜的刮尘口75下侧口壁滑落，方便排灰，并且清理筒72的底端横向开设有排尘孔76，蹭落在清理筒72内部的灰尘会顺着清理筒72内部弧面滑落至排尘孔76排出，避免清理筒72内积累的灰尘无法排出。实施例四请参阅图4-6，在实施例三的基础上做了进一步改进：通过手动去转动清理刷73进行刮灰十分不方便，因此为了方便清理刷73自动转动进行本身的刮灰，设置了驱动机构8，连接轴74的一端与摄像头2连接座的一侧转轴端部通过驱动机构8连接，驱动机构8包括两个蜗轮81，两个蜗轮81分别固定连接于连接轴74的一端与摄像头2连接座的一侧转轴端部，一对蜗轮81的上侧啮合连接有蜗杆83，相对蜗杆83的侧板61外侧固定连接有电动伸缩杆82，电动伸缩杆82的底端固定连接有导向环，且蜗杆83的端部转动连接于导向环内，在需要清理刷73进行转动刮灰时，打开电动伸缩杆82，电动伸缩杆82的输出端带动蜗杆83下降接触两个蜗轮81，当调节机构6的一号电机62带动摄像头2转动时，摄像头2连接座的一侧转轴转动，带动其端部相应的蜗轮81转动，蜗轮81转动时，其上侧的蜗杆83转动，另一个蜗轮81随之被蜗杆83带动转动，使得连接轴74转动，带动清理刷73转动至刮尘口75进行刮尘，刮尘后，调节机构6再带动摄像头2复位，因此通过调节机构6配合驱动机构8可带动清理刷73转动，无需手动去转动清理刷73，更加方便。实施例五请参阅图3和图7，在实施例一的基础上做了进一步改进：转动环4通过转动机构9进行自动驱动，更加方便，支撑圈3的内侧沿着周圈开设有内槽，内槽内设置有转动机构9，转动机构9包括二号电机91，二号电机91固定连接于内槽的一侧中部底端，二号电机91的输出端固定连接有齿轮92，转动环4的外环侧开凿设有齿痕，且转动环4通过齿痕与齿轮92啮合连接，二号电机91带动齿轮92转动时，与之啮合的转动环4随之转动，实现自动化转动调节摄像头2的位置。进一步的，转动环4的底端沿着环向一体化连接有定位环93，支撑圈3的内槽底端相对定位环93开设有环槽94，定位环93转动连接于环槽94内，在转动环4进行转动时，定位环93在环槽94内转动，定位环93具有定位效果，转动环4转动时不会在支撑圈3的内槽内偏移，转动稳定。以上显示和描述了本发明的基本原理和主要特征和本发明的优点，本行业的技术人员应该了解，本发明不受上述实施例的限制，上述实施例和说明书中描述的只是说明本发明的原理，在不脱离本发明精神和范围的前提下，本发明还会有各种变化和改进，这些变化和改进都落入要求保护的本发明范围内，本发明要求保护范围由所附的权利要求书及其等效物界定。
