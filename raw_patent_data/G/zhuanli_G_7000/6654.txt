标题title
一种基于多尺度空间矢量数据级联更新方法
摘要abst
本发明公开了一种基于多尺度空间矢量数据级联更新方法，涉及空间矢量数据级联更新技术领域，该方法包括：将已更新的空间矢量数据与待更新的同级空间矢量数据进行空间相似度检测，提取变化信息；将变化信息与待更新的下一级别比例尺空间矢量数据进行相似度匹配，建立二者之间的关联关系；根据已制定的地图综合原则，根据关联关系与对待更新的下一级别比例尺空间矢量数据进行增量更新；根据关联关系对增量更新后的下一级别比例尺空间矢量数据进行属性信息融合。本发明同时考虑了点、线、面多种要素的级联更新和属性同步更新，完整的保证了多级别矢量数据的现势性和一致性，提高了工作效率。
权利要求书clms
1.一种基于多尺度空间矢量数据级联更新方法，其特征在于，包括：步骤s1：将已更新的比例尺空间矢量数据与待更新的同级空间矢量数据进行空间相似度检测，提取变化信息；步骤s2：将变化信息与待更新的下一级别比例尺空间矢量数据进行相似度匹配，建立变化信息与待更新的下一级别比例尺空间矢量数据之间的关联关系；步骤s3：根据已制定的地图综合原则，根据关联关系与对待更新的下一级别比例尺空间矢量数据进行增量更新；步骤s4：根据关联关系对增量更新后的空间矢量数据进行属性信息融合。2.根据权利要求1所述的基于多尺度空间矢量数据级联更新方法，其特征在于，步骤s3之前还包括：对待更新的下一级别比例尺空间矢量数据进行空间冲突检测；若存在冲突，则修改冲突后，执行步骤s3；否则，执行步骤s3。3.根据权利要求1或者2所述的基于多尺度空间矢量数据级联更新方法，其特征在于，所述变化信息中包括：第一综合变化要素和第一删除要素；所述关联关系中包括：第二综合变化要素和第二删除要素；所述第二综合变化要素包括：第二新增要素和第二局部变化要素；所述步骤s3具体为：根据已制定的地图综合原则，根据第二综合变化要素与对待更新的下一级别比例尺空间矢量数据进行增量更新；步骤s4之后还包括：判断根据步骤s4进行属性信息融合后得到的比例尺空间矢量数据的下一级比例尺空间矢量数据是否还需更新，如果是，则将根据步骤s4进行属性信息融合后得到的比例尺空间矢量数据的下一级比例尺空间矢量数据作为待更新的下一级别比例尺空间矢量数据，使用第二新增要素更新第一综合变化要素；使用第二删除要素更新第一删除要素；返回步骤s2；否则，结束。4.根据权利要求1所述的基于多尺度空间矢量数据级联更新方法，其特征在于，所述步骤s1具体包括：将已更新的比例尺空间矢量数据的点要素、线要素和面要素分别与待更新的同级空间矢量数据的点要素、线要素和面要素进行空间相似度检测，提取变化信息。5.根据权利要求4所述的基于多尺度空间矢量数据级联更新方法，其特征在于，将已更新的比例尺空间矢量数据的点要素与待更新的同级空间矢量数据的点要素进行空间相似度检测，提取变化信息，具体包括：设定缓冲阈值，依次遍历已更新的比例尺的空间矢量数据点的数据集A，做缓冲区分析，将落在设定缓冲阈值范围内的需匹配的同级空间矢量数据点作为候选数据集B，将候选数据集B的点要素逐一和数据集A中的点要素根据编辑距离计算相似度阈值，若相似度阈值大于第一预设值，则判断两个点要素相匹配，标记点要素变化信息；若相似度阈值为0，且数据集A中的点要素的编辑距离为0，则判断候选数据集B中的点要素为删除要素，标记点要素变化信息；若相似度阈值为0，且候选数据集B中的点要素的编辑距离为0，则判断候选数据集B中的点要素为新增要素，标记点要素变化信息。6.根据权利要求4所述的基于多尺度空间矢量数据级联更新方法，其特征在于，将已更新的比例尺空间矢量数据的线要素与待更新的同级空间矢量数据的线要素进行空间相似度检测，提取变化信息，具体包括：对已更新的比例尺空间矢量数据的目标线要素集中的线要素L逐一建立缓冲区，根据比例尺最小许可的范围设定缓冲范围，再与待更新的同级空间矢量数据的线要素进行匹配，提取和缓冲区存在交集的候选线要素集Li，再分别计算候选线要素落入缓冲区的长度，然后将线段长度进行叠加，得到落入缓冲区的匹配线段li；将落入线要素L的缓冲区范围的匹配线段li长度叠加获得匹配长度d；根据匹配长度d计算匹配度M:计算匹配度M方法为：设置阈值为α，判断阈值α与匹配度M之间的关系，若M≥α，且道路名称属性相一致，则判断线要素匹配，标记线要素变化信息，若1-α≤M≤α，则判断存在原有的道路进行延伸、合并、分解、聚合或者道路位置发生变更，标记线要素变化信息；若M≤1-α，则判断该条道路为新增道路，标记线要素变化信息；若M＝0，则判断该条道路为删除道路，标记线要素变化信息。7.根据权利要求4所述的基于多尺度空间矢量数据级联更新方法，其特征在于，将已更新的比例尺空间矢量数据的线要素与比例尺的同级空间矢量数据的线要素进行空间相似度检测，提取变化信息，具体包括：将已更新的比例尺空间矢量数据的目标面状要素集中的任一要素记为面状要素A，将与比例尺的同级空间矢量数据的面状要素集中的任一要素记为面状要素B；重叠度计算：式中，AreaSim为两个面状要素的重叠度，Area为两个面状要素的重叠面积，min,Area)表示取两个面状要素中面积较小的一个；若重叠度大于等于第二预设值，则将面状要素A和面状要素B定义为候选要素集；将面状要素A分别与候选要素集，进行边缘特征点匹配，计算边缘特征点相似度，通过同名边的长度、位置、方向判断两个面状要素的相似度；面状要素的相似度的计算公式为；SimFat＝W1*SimL+W2*SimLen+W3*SimDir式中，SimL为同名边的位置相似度；SimLen为同名边线段长度相似度；SimDir为同名边的方向相似度，W1，W2，W3分别为同名边的位置相似度、同名边线段长度相似度和同名边的方向相似度的权重，W1+W2+W3＝1；SimL为同名边的位置相似度的计算公式为：SimL＝/L；式中，L为同名边的同名点距离上最大允许误差，lA,B为同名边界点间的距离；同名边线段长度相似度SimLen的计算公式为：式中，分别为同名边上点SA，SB拓扑关联的边界线段平均长度；同名边的方向相似度SimDir的计算公式为：分别为，同名边的边界点A、边界点B处转角的角平分线向量；设置面相似度阈值为若则认为两个面状要素完全匹配；若则认为这两个面状要素存在部分匹配关系。8.根据权利要求3所述的基于多尺度空间矢量数据级联更新方法，其特征在于，步骤s3具体为：将第二综合变化要素与对待更新的下一级别比例尺空间矢量数据融合和缩编，利用已有的标准比例尺地图综合指标和规则，将第二综合变化要素经过尺度转换，传递更新到待更新的下一级别比例尺空间矢量数据。9.根据权利要求3所述的基于多尺度空间矢量数据级联更新方法，其特征在于，步骤s4具体为：若变化信息与待更新的下一级别比例尺空间矢量数据之间的关联关系为第二删除要素时，则删除空间矢量数据后，并删除空间矢量数据的属性数据；若变化信息与待更新的下一级别比例尺空间矢量数据之间的关联关系为第二局部变化要素，更新空间矢量数据后，根据已有软件计算赋值空间矢量数据的属性数据；若变化信息与待更新的下一级别比例尺空间矢量数据之间的关联关系为第二新增要素，则新增空间矢量数据后，同步赋值更新空间矢量数据的属性数据。10.根据权利要求2所述的所述的基于多尺度空间矢量数据级联更新方法，其特征在于，对待更新的下一级别比例尺空间矢量数据进行空间冲突检测，具体包括：检测线要素内部是否相互压盖、重叠；及检测面要素内部是否重叠，压盖，拓扑关系是否一致；及检测点要素、线要素和面要素之间是否存在拓扑逻辑不正确。
说明书desc
技术领域本发明涉及空间矢量数据级联更新技术领域，具体涉及一种基于多尺度空间矢量数据级联更新方法。背景技术地理空间信息作为城市建设和经济发展基础支撑数据，已经渗透到社会生产和生活的方方面面，空间数据作为地理信息的“血液”，其发挥的价值越来越大，为城市精细化管理提供了基本保障。随着近年来，城市建设的蓬勃发展与城市改造的全面推荐，各类城市空间要素在不断发生变化，导致现有空间数据库的现势性在逐年下降，直接影响了数据的使用价值，而空间数据的现势性是保持当今“数字政府、智慧城市”鲜活性的重要保障。空间数据应用越来越广泛，比如城市规划、工程设计、施工放样、建设和管理等方面，而空间数据基本比例尺总共有11种，各种尺度的数据都涉及，需要对各个层次的空间数据进行更新。自从全国启动地理信息公共服务平台以来，推动了地理信息的共享与应用，准确现势性的空间信息数据成为了平台发挥作用的关键所在。为保证空间数据的现势性、准确性和完整性，提高地理信息公共服务平台数据的使用价值，满足社会科学和动态管理的需求，及时进行空间信息数据的更新是十分重要的。因此，多尺度基础空间数据的及时、全面的更新将是一项任重道远的工作。如何快速、高效的进行多尺度空间矢量数据的级联更新，解决更新成本高、更新周期长，效率低、人工干预强是目前迫切需要解决的一大问题。现有技术存在的缺点：1、目前的方法仅是对空间数据的级联更新，并没有对属性进行同步更新、融合。2、多尺度数据更新采用人工方法采集周期长，工作任务量大、成本高、工作效率低。3、面状矢量数据匹配算法比较复杂，占用计算机内存空间。4、基本都是考虑单一形状要素之间的，未考虑多种类型数据之间的空间约束。发明内容本发明提供的一种基于多尺度空间矢量数据级联更新方法，解决了上述问题。本发明提供了一种基于多尺度空间矢量数据级联更新方法，包括：步骤s1：将已更新的比例尺空间矢量数据与待更新的同级空间矢量数据进行空间相似度检测，提取变化信息；步骤s2：将变化信息与待更新的下一级别比例尺空间矢量数据进行相似度匹配，建立变化信息与待更新的下一级别比例尺空间矢量数据之间的关联关系；步骤s3：根据已制定的地图综合原则，根据关联关系与对待更新的下一级别比例尺空间矢量数据进行增量更新；步骤s4：根据关联关系对增量更新后的空间矢量数据进行属性信息融合。可选地，步骤s3之前还包括：对待更新的下一级别比例尺空间矢量数据进行空间冲突检测；若存在冲突，则修改冲突后，执行步骤s3；否则，执行步骤s3；可选地，所述变化信息中包括：第一综合变化要素和第一删除要素；所述关联关系中包括：第二综合变化要素和第二删除要素；所述第二综合变化要素包括：第二新增要素和第二局部变化要素；所述步骤s3具体为：根据已制定的地图综合原则，根据第二综合变化要素与对待更新的下一级别比例尺空间矢量数据进行增量更新；步骤s4之后还包括：判断根据步骤s4进行属性信息融合后得到的比例尺空间矢量数据的下一级比例尺空间矢量数据是否还需更新，如果是，则将根据步骤s4进行属性信息融合后得到的比例尺空间矢量数据的下一级比例尺空间矢量数据作为待更新的下一级别比例尺空间矢量数据，使用第二新增要素更新第一综合变化要素；使用第二删除要素更新第一删除要素；返回步骤s2；否则，结束。可选地，所述步骤s1具体包括：将已更新的比例尺空间矢量数据的点要素、线要素和面要素分别与待更新的同级空间矢量数据的点要素、线要素和面要素进行空间相似度检测，提取变化信息。可选地，将已更新的比例尺空间矢量数据的点要素与待更新的同级空间矢量数据的点要素进行空间相似度检测，提取变化信息，具体包括：设定缓冲阈值，依次遍历已更新的比例尺的空间矢量数据点的数据集A，做缓冲区分析，将落在设定缓冲阈值范围内的需匹配的同级空间矢量数据点作为候选数据集B，将候选数据集B的点要素逐一和数据集A中的点要素根据编辑距离计算相似度阈值，若相似度阈值大于第一预设值，则判断两个点要素相匹配，标记点要素变化信息；若相似度阈值为0，且数据集A中的点要素的编辑距离为0，则判断候选数据集B中的点要素为删除要素，标记点要素变化信息；若相似度阈值为0，且候选数据集B中的点要素的编辑距离为0，则判断候选数据集B中的点要素为新增要素，标记点要素变化信息。可选地，将已更新的比例尺空间矢量数据的线要素与待更新的同级空间矢量数据的线要素进行空间相似度检测，提取变化信息，具体包括：对已更新的比例尺空间矢量数据的目标线要素集中的线要素L逐一建立缓冲区，根据比例尺最小许可的范围设定缓冲范围，再与待更新的同级空间矢量数据的线要素进行匹配，提取和缓冲区存在交集的候选线要素集Li，再分别计算候选线要素落入缓冲区的长度，然后将线段长度进行叠加，得到落入缓冲区的匹配线段li；将落入线要素L的缓冲区范围的匹配线段li长度叠加获得匹配长度d；根据匹配长度d计算匹配度M:计算匹配度M方法为：设置阈值为α，判断阈值α与匹配度M之间的关系，若M≥α，且道路名称属性相一致，则判断线要素匹配，标记线要素变化信息，若1-α≤M≤α，则判断存在原有的道路进行延伸、合并、分解、聚合或者道路位置发生变更，标记线要素变化信息；若M≤1-α，则判断该条道路为新增道路，标记线要素变化信息；若M＝0，则判断该条道路为删除道路，标记线要素变化信息。可选地，将已更新的比例尺空间矢量数据的线要素与比例尺的同级空间矢量数据的线要素进行空间相似度检测，提取变化信息，具体包括：将已更新的比例尺空间矢量数据的目标面状要素集中的任一要素记为面状要素A，将与比例尺的同级空间矢量数据的面状要素集中的任一要素记为面状要素B；重叠度计算：式中，AreaSim为两个面状要素的重叠度，Area为两个面状要素的重叠面积，min,Area)表示取两个面状要素中面积较小的一个；若重叠度大于等于第二预设值，则将面状要素A和面状要素B定义为候选要素集；将面状要素A分别与候选要素集，进行边缘特征点匹配，计算边缘特征点相似度，通过同名边的长度、位置、方向判断两个面状要素的相似度；面状要素的相似度的计算公式为；SimFat＝W1*SimL+W2*SimLen+W3*SimDir式中，SimL为同名边的位置相似度；SimLen为同名边线段长度相似度；SimDir为同名边的方向相似度，W1，W2，W3分别为同名边的位置相似度、同名边线段长度相似度和同名边的方向相似度的权重，W1+W2+W3＝1；SimL为同名边的位置相似度的计算公式为：SimL＝/L；式中，L为同名边的同名点距离上最大允许误差，lA,B为同名边界点间的距离；同名边线段长度相似度SimLen的计算公式为：式中，分别为同名边上点SA，SB拓扑关联的边界线段平均长度；同名边的方向相似度SimDir的计算公式为：分别为，同名边的边界点A、边界点B处转角的角平分线向量；设置面相似度阈值为若则认为两个面状要素完全匹配；若则认为这两个面状要素存在部分匹配关系。可选地，步骤s3具体为：将第二综合变化要素与对待更新的下一级别比例尺空间矢量数据融合和缩编，利用已有的标准比例尺地图综合指标和规则，将第二综合变化要素经过尺度转换，传递更新到待更新的下一级别比例尺空间矢量数据。可选地，步骤s4具体为：若变化信息与待更新的下一级别比例尺空间矢量数据之间的关联关系为第二删除要素时，则删除空间矢量数据后，并删除空间矢量数据的属性数据；若变化信息与待更新的下一级别比例尺空间矢量数据之间的关联关系为第二局部变化要素，更新空间矢量数据后，根据已有软件计算赋值空间矢量数据的属性数据；若变化信息与待更新的下一级别比例尺空间矢量数据之间的关联关系为第二新增要素，则新增空间矢量数据后，同步赋值更新空间矢量数据的属性数据。可选地，对待更新的下一级别比例尺空间矢量数据进行空间冲突检测，具体包括：检测线要素内部是否相互压盖、重叠；及检测面要素内部是否重叠，压盖，拓扑关系是否一致；及检测点要素、线要素和面要素之间是否存在拓扑逻辑不正确。本发明的有益效果，本发明提供了一种基于多尺度空间矢量数据级联更新方法，该方法实现了多种要素的级联更新和属性同步更新，完整的保证了多级别矢量数据的现势性和一致性，提高了工作效率。附图说明图1为本发明实施例1提供的一种基于多尺度空间矢量数据级联更新方法的流程图。具体实施方式下面将结合本发明中的附图，对本发明中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明的一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例1本实施例提供了本发明提出了一种基于多尺度空间矢量数据级联更新方法，如图1所示，包括：步骤s1：将已更新的比例尺空间矢量数据与待更新的同级空间矢量数据进行空间相似度检测，提取变化信息；步骤s2：将变化信息与待更新的下一级别比例尺空间矢量数据进行相似度匹配，建立变化信息与待更新的下一级别比例尺空间矢量数据之间的关联关系；步骤s3：根据已制定的地图综合原则，根据关联关系与对待更新的下一级别比例尺空间矢量数据进行增量更新；步骤s4：根据关联关系对增量更新后的空间矢量数据进行属性信息融合。可选地，步骤s3之前还包括：对待更新的下一级别比例尺空间矢量数据进行空间冲突检测；若存在冲突，则修改冲突后，执行步骤s3；否则，执行步骤s3；可选地，所述变化信息中包括：第一综合变化要素和第一删除要素；所述关联关系中包括：第二综合变化要素和第二删除要素；所述第二综合变化要素包括：第二新增要素和第二局部变化要素；所述步骤s3具体为：根据已制定的地图综合原则，根据第二综合变化要素与对待更新的下一级别比例尺空间矢量数据进行增量更新；步骤s4之后还包括：判断根据步骤s4进行属性信息融合后得到的比例尺空间矢量数据的下一级比例尺空间矢量数据是否还需更新，如果是，则将根据步骤s4进行属性信息融合后得到的比例尺空间矢量数据的下一级比例尺空间矢量数据作为待更新的下一级别比例尺空间矢量数据，使用第二新增要素更新第一综合变化要素；使用第二删除要素更新第一删除要素；返回步骤s2；否则，结束。可选地，所述步骤s1具体包括：将已更新的比例尺空间矢量数据的点要素、线要素和面要素分别与待更新的同级空间矢量数据的点要素、线要素和面要素进行空间相似度检测，提取变化信息。可选地，将已更新的比例尺空间矢量数据的点要素与待更新的同级空间矢量数据的点要素进行空间相似度检测，提取变化信息，具体包括：设定缓冲阈值，依次遍历已更新的比例尺的空间矢量数据点的数据集A，做缓冲区分析，将落在设定缓冲阈值范围内的需匹配的同级空间矢量数据点作为候选数据集B，将候选数据集B的点要素逐一和数据集A中的点要素根据编辑距离计算相似度阈值，若相似度阈值大于第一预设值，则判断两个点要素相匹配，标记点要素变化信息；若相似度阈值为0，且数据集A中的点要素的编辑距离为0，则判断候选数据集B中的点要素为删除要素，标记点要素变化信息；若相似度阈值为0，且候选数据集B中的点要素的编辑距离为0，则判断候选数据集B中的点要素为新增要素，标记点要素变化信息。可选地，将已更新的比例尺空间矢量数据的线要素与待更新的同级空间矢量数据的线要素进行空间相似度检测，提取变化信息，具体包括：对已更新的比例尺空间矢量数据的目标线要素集中的线要素L逐一建立缓冲区，根据比例尺最小许可的范围设定缓冲范围，再与待更新的同级空间矢量数据的线要素进行匹配，提取和缓冲区存在交集的候选线要素集Li，再分别计算候选线要素落入缓冲区的长度，然后将线段长度进行叠加，得到落入缓冲区的匹配线段li；将落入线要素L的缓冲区范围的匹配线段li长度叠加获得匹配长度d；根据匹配长度d计算匹配度M:计算匹配度M方法为：设置阈值为α，判断阈值α与匹配度M之间的关系，若M≥α，且道路名称属性相一致，则判断线要素匹配，标记线要素变化信息，若1-α≤M≤α，则判断存在原有的道路进行延伸、合并、分解、聚合或者道路位置发生变更，标记线要素变化信息；若M≤1-α，则判断该条道路为新增道路，标记线要素变化信息；若M＝0，则判断该条道路为删除道路，标记线要素变化信息。可选地，将已更新的比例尺空间矢量数据的线要素与比例尺的同级空间矢量数据的线要素进行空间相似度检测，提取变化信息，具体包括：将已更新的比例尺空间矢量数据的目标面状要素集中的任一要素记为面状要素A，将与比例尺的同级空间矢量数据的面状要素集中的任一要素记为面状要素B；重叠度计算：式中，AreaSim为两个面状要素的重叠度，Area为两个面状要素的重叠面积，min,Area)表示取两个面状要素中面积较小的一个；若重叠度大于等于第二预设值，则将面状要素A和面状要素B定义为候选要素集；将面状要素A分别与候选要素集，进行边缘特征点匹配，计算边缘特征点相似度，通过同名边的长度、位置、方向判断两个面状要素的相似度；面状要素的相似度的计算公式为；SimFat＝W1*SimL+W2*SimLen+W3*SimDir式中，SimL为同名边的位置相似度；SimLen为同名边线段长度相似度；SimDir为同名边的方向相似度，W1，W2，W3分别为同名边的位置相似度、同名边线段长度相似度和同名边的方向相似度的权重，W1+W2+W3＝1；SimL为同名边的位置相似度的计算公式为：SimL＝/L；式中，L为同名边的同名点距离上最大允许误差，lA,B为同名边界点间的距离；同名边线段长度相似度SimLen的计算公式为：式中，分别为同名边上点SA，SB拓扑关联的边界线段平均长度；同名边的方向相似度SimDir的计算公式为：分别为，同名边的边界点A、边界点B处转角的角平分线向量；设置面相似度阈值为若则认为两个面状要素完全匹配；若则认为这两个面状要素存在部分匹配关系。可选地，步骤s3具体为：将第二综合变化要素与对待更新的下一级别比例尺空间矢量数据融合和缩编，利用已有的标准比例尺地图综合指标和规则，将第二综合变化要素经过尺度转换，传递更新到待更新的下一级别比例尺空间矢量数据。可选地，步骤s4具体为：若变化信息与待更新的下一级别比例尺空间矢量数据之间的关联关系为第二删除要素时，则删除空间矢量数据后，并删除空间矢量数据的属性数据；若变化信息与待更新的下一级别比例尺空间矢量数据之间的关联关系为第二局部变化要素，更新空间矢量数据后，根据已有软件计算赋值空间矢量数据的属性数据；若变化信息与待更新的下一级别比例尺空间矢量数据之间的关联关系为第二新增要素，则新增空间矢量数据后，同步赋值更新空间矢量数据的属性数据。可选地，对待更新的下一级别比例尺空间矢量数据进行空间冲突检测，具体包括：检测线要素内部是否相互压盖、重叠；及检测面要素内部是否重叠，压盖，拓扑关系是否一致；及检测点要素、线要素和面要素之间是否存在拓扑逻辑不正确。本实施例提供的一种基于多尺度空间矢量数据级联更新方法，该方法同时考虑了点、线、面多种要素的级联更新和属性同步更新，完整的保证了多级别矢量数据的现势性和一致性，提高了工作效率，并考虑了单一类型要素之间的冲突和多种要素之间的空间约束关系。实施例2本实施例提供了一种基于多尺度空间矢量数据级联更新方法，首先将大比例尺的空间矢量数据更新成果与待更新的同级空间矢量数据进行空间相似度算法检测，并提取点要素、线要素和面要素的变化信息，将提取的变化信息与待更新的小比例尺空间矢量数据，包括点要素、线要素和面要素，分别选用适宜的方法进行空间相似度匹配，建立变化信息与待更新的小比例尺空间矢量数据之间的关联，确定关联关系。利用已制定的地图综合原则，将变化信息经过地图综合，根据关联关系，对待更新的小比例尺空间矢量数据更新，并将关联匹配的矢量数据属性融合，最后对更新信息进行冲突检测，完成符合质量要求的多尺度数据更新。本方法解决了矢量和属性数据不能同步更新，人工数据更新工作量大、成本高、效率低，单一矢量数据的更新问题。实现了多尺度数据及时、快速更新，为基于空间数据的政府决策和应急指挥提高了工作效率。本实施例提供的一种基于多尺度空间矢量数据级联更新方法的具体流程如下：Step1:数据预处理由于空间矢量数据来源可能各异，在空间参考、数据格式、数据精度、数据结构、属性信息详细程度等不尽相同，在进行数据匹配之前，根据统一数据标准，处理与待更新的同级空间矢量数据和待更新的小比例尺空间矢量数据，形成基本一致的标准数据。数据处理具体就是把已更新的数据格式比如说一个是CAD、一个是SHp，就需要按待更新比例尺格式处理，或者坐标统一，例如将一个坐标是国家2000，一个坐标是广州2000，二者统一。Step2:变化检测将经过数据预处理的数据进行变化检测，其中包括空间数据变化检测和属性数据变化检测两部分。空间变化检测：将已更新的大比例尺空间矢量数据与待更新的同级空间矢量数据进行逻辑运算，判断变化信息，变化信息包含新增要素、删除要素、局部变化要素；把新增要素和局部变化要素共同称为综合变化要素集。其中不同要素类型需要通过不同的检测方法进行处理。点要素变化检测空间矢量数据变化检测：点要素的相似度匹配，主要是通过空间相对位置和属性信息相似度来判断。首先建立别名数据库比如“广州塔＝小蛮腰”等，再设定点要素的缓冲阈值为100m，依次遍历已更新的大比例尺的空间矢量数据点的数据集A，并做缓冲区分析，将落在设定缓冲范围内的需匹配的矢量数据点作为候选数据集B，然后将候选数据集B的点要素逐一和数据集A中的点要素根据编辑距离计算相似度阈值，若候选数据集B的点要素在缓冲范围内且与数据集A中的点要素的相似度阈值大于一定阈值，认为候选数据集B的中点要素和数据集A中的点要素是一样的。其中编辑距离计算：其中i，j分别为字符串A和字符串B的下标；字符串A和字符串B分别指的是数据集点A的地名和数据集点B的地名属性信息；上式中的min函数中三部分对应三种字符串操作：edit+1表示在B串字符的最后插入了A串字符的最后字符，插入操作使得edit+1,再计算edit；edit+1表示将B串字符的最后字符删除，删除操作edit+1,再计算edit；edit+flag表示将B串字符的最后一个字符替换为A串字符的最后一个字符，flag标记替换的有效次数。具体地，相似度阈值计算公式为其中edit为数据集A中的点要素到候选集B中的点要素的最小编辑距离，max,edit)是取数据集A中的点要素到候选数据集B中的点要素最长的编辑距离。若候选数据集B中的点要素和数据集A中的点要素相似度阈值大于等于0.8，认为两个点要素的关联关系为相匹配；若候选数据集B的点和数据集A中的点要素相似度阈值为0，且数据集A中点要素的编辑距离为0，则认为候选集B中的点要素为删除要素；若候选集B中的点和数据集A中的点要素相似度阈值为0，且候选数据集B中点要素的编辑距离为0，则认为候选集B中的点要素为新增要素。属性变化检测：若两个对比的空间矢量数据完全匹配，则属性无变化，无需处理；若为删除关联关系，删除空间矢量数据时，属性数据也随之删除；若为新增关联关系，新增空间矢量数据时，属性伴随着矢量数据存在，即同步更新；线要素变化检测空间矢量数据变化检测：线要素变化的关联关系主要包括：完全匹配、新增要素、删除要素、线要素被分解成多个要素、多个要素合并成单个和对象聚合。线要素变化检测主要根据长度、空间相对位置、方向判断，首先对目标线要素集中的要素L逐一建立缓冲区，缓冲范围根据比例尺最小许可的范围设定1:1000比例尺设定为0.4，其他依此类推，获得缓冲范围后再与待更新的线要素进行匹配，提取和缓冲区存在交集的候选线要素集Li，再分别计算候选线要素Li落入缓冲区的长度，然后将线段长度进行叠加，得到落入缓冲区的匹配线段li。将落入目标线要素集中的要素L的缓冲区范围的匹配线段li长度叠加，就可获得匹配长度，即d＝∑i＝1,2…nli。在这个匹配过程中，可能不存在匹配线要素，也可能存在一条或多条线要素相匹配。最后计算匹配度:在线要素匹配过程中，设置阈值为α，若M≥α，且道路名称属性相一致，则认为线要素匹配，若1-α≤M≤α，可能存在道路进行了延伸、合并、分解、聚合、道路位置变更比较大多种情况；若M≤1-α，则认为该条道路为新增道路；若M＝0，则认为该条道路为删除道路。对各变化信息分别进行标记。其中涉及到道路进行了延伸、合并、分解、聚合、道路位置变更比较大则需要进行人机交互，更多的需要人工辅助判断；属性信息的变化及融合：若两个对比的空间矢量数据完全匹配，则属性无变化，无需处理；若为删除关联关系，删除空间矢量数据时，属性数据也随之删除；若空间数据涉及延伸、合并、分解、聚合、道路位置变更比较大，则属性信息也是随之部分变化，一般如果空间矢量数据变化了，可以直接利用已有软件计算赋值。若为新增关联关系，新增空间矢量数据时，属性伴随着矢量数据存，即同步赋值更新；面状要素变化检测面状要素的关联关系和线状要素相似，即关联关系主要有完全匹配、新增要素、删除要素、面要素被分解成多个要素、多个面要素合并成单个。面状要素变化信息检测主要根据重叠度、形状判断，将目标面状要素集中的任一要素记为A，待更新面状要素集中的任一要素记为B。重叠度计算：其中，AreaSim为两个面状要素的重叠度，Area为两个面状要素的重叠面积，min,Area)表示取两个要素中面积较小的一个。设定若两个面重叠度大于等于0.6，则认为A、B两个面要素可能存在匹配关联关系，将这些面状要素定义为候选要素集；若两个面重叠度小于0.6，且B的面积比A的面积大，则认为为删除要素；若两个面重叠度小于0.6，且A的面积比B的面积大，则认为新增要素。面状要素边界相似度计算：同名要素描述的是同一实体，两者的几何特征基本一致，所以同名面要素间存在较多同名点。将目标要素集中A分别与候选要素集，进行边缘特征点匹配。计算边缘特征点相似度。通过同名边的长度、位置、方向判断两个要素的相似度。位置相似度：设边的同名点距离上最大允许误差为L，同名边界点间的距离lA,B为SimL＝/L同名边线段长度相似度：分别为同名边上点SA，SB拓扑关联的边界线段平均长度。方向相似度：设边界点A，B，则其中边界点A、B处转角的角平分线向量分别为面的相似度:SimFat＝W1*SimL+W2*SimLen+W3*SimDir,其中W1+W2+W3＝1。将三种不同类型的变化要素分别标记关联关系，再将已确定为删除的要素直接去除，剩余要素归并于综合变化要素集，三种因素权重可以根据结果调整，设面相似度阈值为若则认为两个面完全匹配；若则认为这两个面存在匹配关系，但部分匹配，如果A面积大于B面积，则认为A面状要素与B面状要素关联关系为面要素被分解成多个要素，反之则；A面状要素与B面状要素关联关系多个面要素合并成单个，属性变化与矢量数据变化同步。属性信息的变化及融合：若两个对比的空间矢量数据完全匹配，则属性无变化，无需处理；若为删除关联关系，删除空间矢量数据时，属性数据也随之删除；若空间矢量数据部分匹配，则单个空间数据属性与多个空间数据属性之间进行传递，根据分段矢量数据进行定量和定性属性融合；若为新增关联关系，新增空间矢量数据时，属性伴随着矢量数据存，即同步赋值更新。本实施例中，将提取变化的信息直接和待更新的相邻小比例尺空间矢量数据空间相似度计算方法建立关联关系和上述变化检测一样，区别是不需用全部数据遍历计算一遍，因为已经提取出变化信息了，只需用变化信息和待更新的相邻小比例尺空间矢量数据的进行空间相似度计算就可以。Step3：空间冲突检测空间冲突检测包括各种类型要素的内部冲突检测和要素间的外部冲突检测。内部冲突检测主要包括线、面各要素内部冲突检测。线要素冲突检测：主要检测线状要素内部的相互压盖、重叠。面状要素冲突检测：检测要素面状要素内是否重叠，压盖，拓扑关系是否一致。外部冲突检测：各类型要素之间是否存在拓扑逻辑不正确，如独立房屋与街区的关系、道路与居民地的关系、居民地与水系的关系。根据检测的冲突问题逐一进行修改。Step4：融合及缩编将提取的综合变化要素与小比例尺待更新数据融合，利用已有的标准比例尺地图综合指标和规则，将变化信息经过尺度转换，传待更新到小比例尺空间矢量数据。综合变化要素的综合包括选取、概括、聚类。选取：对点、线、面三种不同的要素进行选取，根据比例尺有选择选取主要素，剔除次要要素，选取根据类别和级别选取。概括：概括指的对要素的形状、数量和质量特征进行化简。通过规则去掉综合曲线上的冗余点和不能够依比例尺表达的小弯曲，在保持基本形状特征的前提下，简化要素。聚类：将要素进行聚类，对同一类型要素进行综合操作，要素聚类把相似空间要素合并在相同类中。Step5：属性信息融合：若两个对比的空间矢量数据完全匹配，则属性无变化，无需处理；若为删除关联关系，删除空间矢量数据时，属性数据也随之删除；若空间数据涉及延伸、合并、分解、聚合、道路位置变更比较大，则属性信息也是随之部分变化，一般如果空间矢量数据变化了，可以直接利用已有软件计算赋值。若空间矢量数据部分匹配，则单个空间数据属性与多个空间数据属性之间进行传递，根据分段矢量数据进行定量和定性属性融合；若为新增关联关系，新增空间矢量数据时，属性伴随着矢量数据存，即同步赋值更新；Step6：级联更新判断此时完成了一个级别的小比例尺空间矢量数据更新，将新增要素集代替变化信息中的综合变化要素集，删除要素代替变化信息中的删除要素集，使用更新后的变化信息与下一级别待更新的小比例尺进行空间相似度检测，建立关联关系，再根据关联关系进行小比例尺空间矢量数据融合和综合缩编工作，直到需被更新的所有级别的小比例尺更新完截止。这种情况下，待更新空间矢量数据跨两个尺度，用于相邻比例尺空间矢量数据的更新变化信息只需要检测一次，大大提高了工作效率和节省物力。本实施例提供的一种基于多尺度空间矢量数据级联更新方法，该方法同时考虑了点、线、面多种要素的级联更新和属性同步更新，完整的保证了多级别矢量数据的现势性和一致性，提高了工作效率，并考虑了单一类型要素之间的冲突和多种要素之间的空间约束关系。以上所述，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，任何属于本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到的变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应该以权利要求的保护范围为准。
