标题title
一种基于矩阵联盟链的可隐藏实名的资助方法
摘要abst
本发明提出了一种基于矩阵联盟链的可隐藏实名的资助方法,通过联盟链系统将公益机构、企业、个人、政府和监管机构等多个行为体聚集在一起，设计矩阵联盟链，优化结构，组建联盟，资助人和受助人可隐藏实名信息，但不影响资助信息的透明度和真实性，确保可追溯、追责；优化共识机制，促进资助人行为诚信。本发明充分发挥区块链在公益场景中的优势，有效保护用户隐私。
权利要求书clms
1.一种基于矩阵联盟链的可隐藏实名的资助方法，其特征在于，所述方法的步骤为，S1、初始化联盟链系统，生成公共参数，联盟链的参与者包括受资助人、资助人、监管机构、密钥生成中心；S2、构建梦想区块，形成矩阵联盟链中的横向链；受资助人向联盟链系统提交申请资助信息，监管节点审核申请资助信息并验证通过后，打包受资助人发布梦想的交易信息，并生成交易副本，监管节点广播交易信息和交易副本，共识节点根据共识机制对交易信息和交易副本进行验证，并将验证后的交易信息和交易副本写入梦想区块；S3、构建资助区块，形成矩阵联盟链中的纵向链；资助人完成对受资助人的资助后，获取由监管节点签发并背书的资助证明，监管节点广播资助交易及其交易副本，共识节点根据共识机制对资助交易及其交易副本进行验证，并将验证后的资助交易及其交易副本存入交易池；主共识节点将受资助人ID及资助类型打包成区块，广播至区块链网络，从共识节点验证区块的正确性并投票，票数超过阈值即可上链；S4、当资助人想要隐藏其资助信息时，由资助人发出交易修改请求，监管节点收到请求后，快速定位该交易所在区块坐标，核验资助人身份后，为该资助人生成伪身份及签发新资助证书，经过全网广播，根据共识机制，共识节点验证通过后修改链上交易信息隐藏实名；隐藏实名后资助人仍可以向监管节点申请恢复实名信息用于追责查证；S5、当受资助人想要隐藏其受资助信息时，受资助人接收完成资助后，发起删除资助发布请求，监管节点收到请求后，上链查询该受资助人的交易数据，核验受资助人信息后，监管节点发起删除交易，共识节点根据共识机制验证后，对该梦想区块进行修改。2.根据权利要求1所述的一种基于矩阵联盟链的可隐藏实名的资助方法，其特征在于，S1的具体步骤为：S1-1、各参与用户生成与自己身份相关联的字符串，受资助人、资助人、监管机构、密钥生成中心生成的与身份信息相关联的字符串分别表示为：S1-2、输入安全参数，选取加法循环群与乘法循环群，且，为位的大素数，为群的生成元，并定义这样一个双线性映射：；S1-3、密钥生成中心随机选取随机数作为系统主密钥，并计算其公钥为，定义6个安全哈希函数，分别为：以及加解密算法对，，公开系统参数，并记录到区块链上，表示模的剩余类环的乘法群，表示公钥，表示不定长的比特串，表示；比特长的比特串；S1-4、密钥生成中心根据各参与用户提供的身份字符串计算，，，，以及，其中，为用户的公私钥对，为用户区块链公钥地址，为用户的注册证书，由密钥生成中心的私钥签名生成，为注册号，为通用哈希函数，然后通过安全通道将发送给用户。3.根据权利要求1所述的一种基于矩阵联盟链的可隐藏实名的资助方法，其特征在于，S2的具体内容为：S2-1、受资助人打包个人注册信息，梦想内容及类型生成消息，并计算其数字签名，其中，为当前时间戳，发送消息至区块链网络；S2-2、监管节点接收到受资助人消息后，首先选取当前时间戳，定义为消息的时间戳和收到消息时的时间戳之间的有效差值，若，则说明消息有效，否则中止对话，然后计算下列公式来验证消息的正确性：；若上式成立，则接收该消息，核验该受资助人的梦想内容及类型无误后，返回确认信息；S2-3、监管节点根据梦想区块的交易格式打包受资助人提交的信息，并生成交易副本，如下：；其中，包含受资助人的个人真实信息及，为交易副本，不包含这两项字符串，是监管节点对交易的签名，为交易生成时间，为梦想区块链的标签，用于后续编辑区块链时定位区块坐标及交易位置；S2-4、监管节点广播交易及交易副本，根据共识机制，由共识节点对交易及其副本进行验证，验证通过后根据标签写入梦想区块，并建立索引列表作为链下数据保存至本地数据库，其中为该区块的高度，用于生成资助链过程的快速定位，该区块的数据结构中存有两个merkleroot，分别为、，相对应地，区块头将存有前一区块的两个哈希值，区块与区块间由明链和暗链链接，用于修改区块链内容时仍能保证区块链结构不被破坏，即：其中，表示当前区块，表示前一区块的两个哈希值，表示当前区块的随机数，表示区块的生成时间戳。4.根据权利要求1所述的一种基于矩阵联盟链的可隐藏实名的资助方法，其特征在于，S3的具体步骤为：S3-1、资助人完成对受资助人的区块链地址的资金转账或服务，生成资助信息，向监管节点发送生成资助证书请求，其中，表示资助内容，表示加密算法，监管节点收到请求后，执行解密算法获得，若与资助消息直接由计算得到的值相等，则确认接收该请求，并签发资助证书，其中为证书生成时间，并进行背书；S3-2、监管节点根据资助区块的交易格式生成交易及交易副本，并广播至全网，根据共识机制，由共识节点进行验证，此外，监管节点还需提供资助对象的相关信息，用于区块定位；其中，，交易副本中不包括资助人的个人相关信息，，表示监管节点对该交易的签名，表示以资助人公钥对相应证书加密，用于资助人接收后以自己的私钥进行解密而获得资助证书，表示交易生成时间；S3-3、交易及其副本验证通过后，根据共识机制，主共识节点将交易及副本存入交易池，然后将时间内对同一受资助人的资助交易打包成区块，并广播至区块链网络，从共识节点对该区块进行验证，投票超过阈值后，计算索引定位所在区块高度height，将该区块链接到对应的资助链，其所在高度定义为depth，则某一交易在矩阵联盟链中的区块坐标；同样地，资助链的区块数据结构中存有两个merkleroot值，分别为和，以及前一区块的两个哈希值，且区块间由明链和暗链相链接。5.根据权利要求1所述的一种基于矩阵联盟链的可隐藏实名的资助方法，其特征在于，S 4的具体步骤为：S4-1、资助人发起匿名修改请求，其中为待修改交易所在区块坐标，为加密算法，表示资助证书，为当前时间戳；S4-2、监管节点接收到，首先选择当前时间戳，若，则消息有效，根据查询本地数据库获得，执行解密算法，若成立，则说明该资助人为合法用户，消息正确；S4-3、消息验证通过后，监管节点为资助人生成伪身份，并签发新资助证书并背书，然后，监管节点生成新的交易数据，其中，其中表示交易生成时间，表示对该交易的数字签名，表示链标签；此外，监管节点还需向共识节点提供待修改交易所在区块坐标以及修改请求发起者的身份信息；S4-4、根据共识机制，共识节点对交易验证通过后，根据及快速查询待修改交易，然后将待修改交易替换为，重新计算merkleroot的值，此时，该区块与后一区块之间的明链由于merkleroot的值改变而断开，而的值保持不变，因此暗链维护了资助链的完整性；若也发生了改变，则说明该区块发生了未经授权的篡改；S4-5、当资助人想要再次实名时，发送修改请求，监管节点通过搜索本地数据库可以获得相关背书内容，核验身份后进行步骤S4-1~S4-3完成实名修改。6.根据权利要求1所述的一种基于矩阵联盟链的可隐藏实名的资助方法，其特征在于，S 5的具体步骤为：S5-1、受资助人发起删除请求，其中为该梦想区块高度，为当前请求的时间戳；S5-2、监管节点收到受资助人发来的删除请求后，首先选取当前时间，若，则请求有效，然后上链查询获得交易数据，计算，若，则说明该受资助人身份可信；否则说明该受资助人身份不合法或值受到未经授权的篡改，则中止会话；S5-3、当受资助人身份核验通过时，监管节点生成新的交易数据并广播，此外，还需提供待修改区块的高度；S5-4、根据共识机制，经过共识节点验证后，对待修改区块进行删除操作，具体地，将原有的替换为，并重新计算。7.根据权利要求1-6任一项所述的一种基于矩阵联盟链的可隐藏实名的资助方法，其特征在于，所述共识机制是指实施基于多因素投票的实用拜占庭容错机制，所述共识节点为资助人和受助人；在链上发布交易或者修改交易需要得到共识节点的共识，共识节点通过综合计算匹配度SD、资助额度SA、资助人信用评分CS三因素投票选出排名前位的共识节点参与共识，每过小时换届，重新组织竞选投票。8.根据权利要求7所述的一种基于矩阵联盟链的可隐藏实名的资助方法，其特征在于，根据所述共识机制，共识节点进行验证的步骤为：S6-1、在矩阵联盟链冷启动时，由监管节点将此时资助交易信息写入创世区块；密钥生成中心KGC为每个节点分配独立的区块链地址、私钥和公钥，资助人的公钥只对监管节点及共识节点公开，已写入区块的账户地址公开可见，未写入的账户地址则不会在网络中显示；S6-2、监管机构中的第三方信用机构对新加入的资助节点授予信用评分；监管节点读取资助节点的资助证书，记录节点的资助值，根据资助类型type计算资助匹配度评分；S6-3、当进入竞选投票时间时，监管节点计算竞选节点的综合评分；其中，，是对进行归一化处理的结果，选出评分排序前位的节点担任共识节点；S6-4、第一批共识节点产生后，在时间内，共识节点按照排名依次担任主节点；主节点SP将验证通过的资助交易信息打包到一个区块中，生成发送给其余从节点；在主节点后的下一个节点是副主节点，与主节点同时打包，当主节点出错时才会发出自己产生的区块；S6-5、其余从节点接收到主节点发送的预准备消息后，验证签名，若验证通过，赞同区块上链，则发送确认消息转发给其他共识节点，若超时或不赞同则发送；S6-6、各共识节点接收到准备消息后，当接收到的有效准备消息数量，其中为最大恶意节点数量，计算赞同和不赞同的票数，决定确认消息中的值，节点广播确认信息Confirm，当收到的确认信息，则执行请求；；S6-7、若客户端收到个相同回复，则说明客户端发起的请求已经达成全网共识，否则需要重新发送请求；是系统节点数，若系统所允许的最大恶意节点数量，则要求；S6-8、若发现恶意节点，则更新其信用评分，其中，，并将评分发送给第三方信用机构；若完轮共识，则更新该节点的信用评分为。
说明书desc
技术领域本发明涉及联盟链技术领域，具体是涉及一种基于矩阵联盟链的可隐藏实名的资助方法。背景技术传统公益慈善组织的信息公开透明度低，监管机制缺位，公信力不足。公益组织的“资金去向与使用状况”以及“善款来源”往往是公众关注的焦点，而传统公益机构经常信息披露不足，社会监督力量薄弱，影响了公众对公益组织的信心与支持度。传统的公益慈善组织大多没有进行数字化技术改造，传统捐赠流程繁琐，技术手段落后，效率低下；同时，中国经济的快速发展带来了群众持续增长的公益需求。近年来社会公益总价值与社会组织数量不断上涨，个人捐款额度保持较好的增速，未来个人捐款资产规模尤其是网络募捐广泛被看好。随着互联网的飞速发展和信息技术的广泛运用，网络公益众筹平台如轻松筹、水滴筹、爱心筹等快速发展，但是互联网的开放性特征，使得众筹平台难以对发起者与受益者的信息进行有效筛查，个别求助者虚构病情、部分平台线上业务流程不合规、用户数据被滥用、个别平台涉嫌非法筹集资金等问题频现。这不仅对捐助者的基本权益造成了侵害，同时也削弱了群众对于网络公益众筹活动的信任，制约了公益事业的可持续发展。此外，在现有的公益场景，包括区块链+公益的产品中，主要集中在钱、物的财物资助，而忽视人可以给予的“志愿时间”、“在线课程”、“经验知识”等服务资源的帮助。在巩固拓展脱贫攻坚成果、推进乡村振兴的进程中，围绕实现乡村儿童梦想的公益场景，财物资助和服务资助都应考虑在内。区块链技术，是一种分布式账本技术，是由多方共同维护，使用密码学保证传输和访问安全，能够实现数据一致存储、难以篡改、防止抵赖的记账技术，具有去中心化、公开透明、信息可追溯、防篡改性质，可有效地保证公益项目的公开性和透明性，并且捐赠人可以对每一笔交易进行查询，追溯物资或款项的发放信息、使用情况等。区块链作为一种新兴的数字技术，有着巨大的应用潜力，目前区块链已经逐步开始应用在社会公益领域，然而，现有的公益区块链系统为更好更公开地向社会公众公示，在区块链中会记录完整的资助人和受资助人信息，由于区块链不可篡改的特性，用户的信息会永远保留在区块链中。从隐私保护来说，资助人或受资助人应当可以要求删除或隐藏有关自己的隐私数据记录，即用户应当可以选择实名或隐藏实名参与到区块链的记录中而又不影响资助数据公开透明、防止篡改，以保护用户的隐私权和匿名权。相比于公有链，联盟链的准入机制更适合于公益场景，具有良好信誉且符合资质的公益平台、政府监管部门以及信用部门将被允许进入，参与共识。但基于现有的联盟链系统，区块中只是不断记录资助交易信息，无法准确关联对于某受资助人所有的资助信息，无法定位某一特定的资助交易实现链上修改，无法保护受助人和资助人的实名信息。发明内容为解决上述技术问题，本发明提供了一种基于矩阵联盟链的可隐藏实名的资助方法，经过实名注册和认证后，资助人可对受资助人进行财物或服务资助，通过优化区块结构和链结构，区块链上存储的实名信息允许被隐藏却不影响链的整体结构，同时保证资助信息可追溯、追责，有效地保护个人隐私信息；优化共识机制，引入资助类型匹配度和权威信用部门的信用评分，促进资助人实施诚信行为，失信行为将反馈至信用单位的诚信档案中，促进诚信资助。本发明所述的一种基于矩阵联盟链的可隐藏实名的资助方法，所述方法的步骤为，S1、初始化联盟链系统，生成公共参数，联盟链的参与者包括受资助人、资助人、监管机构、密钥生成中心；S2、构建梦想区块，形成矩阵联盟链中的横向链；受资助人向联盟链系统提交申请资助信息，监管节点审核申请资助信息并验证通过后，打包受资助人发布梦想的交易信息，并生成交易副本，监管节点广播交易信息和交易副本，共识节点根据共识机制对交易信息和交易副本进行验证，并将验证后的交易信息和交易副本写入梦想区块；S3、构建资助区块，形成矩阵联盟链中的纵向链；资助人完成对受资助人的资助后，获取由监管节点签发并背书的资助证明，监管节点广播资助交易及其交易副本，共识节点根据共识机制对资助交易及其交易副本进行验证，并将验证后的资助交易及其交易副本存入交易池；主共识节点根据受资助人ID及资助类型打包成区块，广播至区块链网络，从共识节点验证区块的正确性并投票，票数超过阈值即可上链；S4、当资助人想要隐藏其资助信息时，由资助人发出交易修改请求，监管节点收到请求后，快速定位该交易所在区块坐标，核验资助人身份后，为该资助人生成伪身份及签发新资助证书，经过全网广播，根据共识机制，共识节点验证通过后修改链上交易信息隐藏实名，隐藏实名后资助人仍可以向监管节点申请恢复实名信息；S5、当受资助人想要隐藏其受资助信息时，受资助人接收完成资助后，发起删除资助发布请求，监管节点收到请求后，上链查询该受资助人的交易数据，核验受资助人信息后，监管节点发起删除交易，共识节点根据共识机制验证后，对该梦想区块进行修改。进一步的，S1的具体步骤为：S1-1、各参与用户生成与自己身份相关联的字符串，受资助人、资助人、监管机构、密钥生成中心生成的与身份信息相关联的字符串分别表示为：S1-2、输入安全参数，选取加法循环群与乘法循环群，且，为位的大素数，为群的生成元，并定义这样一个双线性映射：；S1-3、密钥生成中心随机选取随机数作为系统主密钥，并计算其公钥为，定义6个安全哈希函数，分别为：以及加解密算法对，，公开系统参数，并记录到区块链上，表示模的剩余类环的乘法群，表示公钥，表示不定长的比特串，表示；比特长的比特串；S1-4、密钥生成中心根据各参与用户提供的身份字符串计算，，，，以及，其中，为用户的公私钥对，为用户区块链公钥地址，为用户的注册证书，由密钥生成中心的私钥签名生成，为注册号，为通用哈希函数，然后通过安全通道将发送给用户。进一步的，S2的步骤为：S2-1、受资助人打包个人注册信息，梦想内容及类型生成消息，并计算其数字签名，其中，为当前时间戳，发送消息至区块链网络；S2-2、监管节点接收到受资助人消息后，首先选取当前时间戳，定义为消息的时间戳和收到消息时的时间戳之间的有效差值，若，则说明消息有效，否则中止对话，然后计算下列公式来验证消息的正确性：；若上式成立，则接收该消息，核验该受资助人的梦想内容及类型无误后，返回确认信息；S2-3、监管节点根据梦想区块的交易格式打包受资助人提交的信息，并生成交易副本，如下：；其中，包含受资助人的个人真实信息及，为交易副本，不包含这两项字符串，是监管节点对交易的签名，为交易生成时间，为梦想区块链的标签，用于后续编辑区块链时定位区块坐标及交易位置；S2-4、监管节点广播交易及交易副本，根据共识机制，由共识节点对交易及其副本进行验证，验证通过后根据标签写入梦想区块，并建立索引列表作为链下数据保存至本地数据库，其中为该区块的高度，用于生成资助链过程的快速定位，该区块的数据结构中存有两个merkleroot，分别为、，相对应地，区块头将存有前一区块的两个哈希值，区块与区块间由明链和暗链链接，用于修改区块链内容时仍能保证区块链结构不被破坏，即：其中，表示当前区块，表示前一区块的两个哈希值，表示当前区块的随机数，表示区块的生成时间戳。进一步的，S3的步骤为：S3-1、资助人完成对受资助人的区块链地址的资金转账或服务，生成资助信息，向监管节点发送生成资助证书请求，其中，表示资助内容，表示加密算法，监管节点收到请求后，执行解密算法获得，若与资助消息直接由计算得到的值相等，则确认接收该请求，并签发资助证书，其中为证书生成时间，并进行背书；S3-2、监管节点根据资助区块的交易格式生成交易及交易副本，并广播至全网，根据共识机制，由共识节点进行验证，此外，监管节点还需提供资助对象的相关信息，用于区块定位；其中，，交易副本中不包括资助人的个人相关信息，，表示监管节点对该交易的签名，表示以资助人公钥对相应证书加密，用于资助人接收后以自己的私钥进行解密而获得资助证书，表示交易生成时间；S3-3、交易及其副本验证通过后，根据共识机制，主共识节点将交易及副本存入交易池，然后将时间内对同一受资助人的资助交易打包成区块，并广播至区块链网络，从共识节点对该区块进行验证，投票超过阈值后，计算索引定位所在区块高度height，将该区块链接到对应的资助链，其所在高度定义为depth，则某一交易在矩阵联盟链中的区块坐标；同样地，资助链的区块数据结构中存有两个merkleroot值，分别为和，以及前一区块的两个哈希值，且区块间由明链和暗链相链接。进一步的，S4的具体内容为：S4-1、资助人发起匿名修改请求，其中为待修改交易所在区块坐标，为加密算法，表示资助证书，为当前时间戳；S4-2、监管节点接收到，首先选择当前时间戳，若，则消息有效，根据查询本地数据库获得，执行解密算法，若成立，则说明该资助人为合法用户，消息正确；S4-3、消息验证通过后，监管节点为资助人生成伪身份，并签发新资助证书并背书，然后，监管节点生成新的交易数据，其中，其中表示交易生成时间，表示对该交易的数字签名，表示链标签；此外，监管节点还需向共识节点提供待修改交易所在区块坐标以及修改请求发起者的身份信息；S4-4、根据共识机制，共识节点对交易验证通过后，根据及快速查询待修改交易，然后将待修改交易替换为，重新计算merkleroot的值，此时，该区块与后一区块之间的明链由于merkleroot的值改变而断开，而的值保持不变，因此暗链维护了资助链的完整性；若也发生了改变，则说明该区块发生了未经授权的篡改；S4-5、当资助人想要再次实名时，发送修改请求，监管节点通过搜索本地数据库可以获得相关背书内容，核验身份后进行步骤S4-1~S4-3完成实名修改。当受到虚假信息或公益纠纷时，仍可以核查信息，确保可追溯、追责。进一步的，S 5的具体步骤为：S5-1、受资助人发起删除请求，其中为该梦想区块高度，为当前请求的时间戳；S5-2、监管节点收到受资助人发来的删除请求后，首先选取当前时间，若，则请求有效，然后上链查询获得交易数据，计算，若，则说明该受资助人身份可信；否则说明该受资助人身份不合法或值受到未经授权的篡改，则中止会话；S5-3、当受资助人身份核验通过时，监管节点生成新的交易数据并广播，此外，还需提供待修改区块的高度；S5-4、根据共识机制，经过共识节点验证后，对待修改区块进行删除操作，具体地，将原有的替换为，并重新计算，由于该值的改变，对于梦想链而言，后一区块中存储的当前区块的第一个哈希值发生改变，而第二个哈希值保持不变，故梦想链的结构保持完整性；同理，对于资助链而言，其第一个资助区块中保存的第二哈希值不变，资助区块结构完整；由于资助链上交易内容不包含受资助人的相关信息，相应资助证书被加密，只有拥有相应的私钥的资助节点可以看到，其他节点均不可查询到受资助人的相关信息。进一步的，所述共识机制是指实施基于多因素投票的实用拜占庭容错机制，所述共识节点为资助人和受助人；在链上发布交易或者修改交易需要得到共识节点的共识，共识节点通过综合计算匹配度SD、资助额度SA、资助人信用评分CS三因素投票选出排名前位的共识节点参与共识，每过小时换届，重新组织竞选投票。进一步的，根据所述共识机制，共识节点进行验证的步骤为：S6-1、在矩阵联盟链冷启动时，由监管节点将此时资助交易信息写入创世区块；密钥生成中心KGC为每个节点分配独立的区块链地址、私钥和公钥，资助人的公钥只对监管节点及共识节点公开，已写入区块的账户地址公开可见，未写入的账户地址则不会在网络中显示；S6-2、监管机构中的第三方信用机构对新加入的资助节点授予信用评分；监管节点读取资助节点的资助证书，记录节点的资助值，根据资助类型type计算资助匹配度评分；S6-3、当进入竞选投票时间时，监管节点计算竞选节点的综合评分；其中，，是对进行归一化处理的结果，选出评分排序前位的节点担任共识节点；S6-4、第一批共识节点产生后，在时间内，共识节点按照排名依次担任主节点；主节点SP将验证通过的资助交易信息打包到一个区块中，生成发送给其余从节点；在主节点后的下一个节点是副主节点，与主节点同时打包，当主节点出错时才会发出自己产生的区块；S6-5、其余从节点接收到主节点发送的预准备消息后，验证签名，若验证通过，赞同区块上链，则发送确认消息转发给其他共识节点，若超时或不赞同则发送；S6-6、各共识节点接收到准备消息后，当接收到的有效准备消息数量，计算赞同和不赞同的票数，决定确认消息中的值，节点广播确认信息Confirm，当收到的确认信息，则执行请求；；S6-7、若客户端收到个相同回复，则说明客户端发起的请求已经达成全网共识，否则需要重新发送请求；是系统节点数，若系统所允许的最大恶意节点数量，则要求；S6-8、若发现恶意节点，则更新其信用评分，其中，，并将评分发送给第三方信用机构；若完成轮共识，则更新该节点的信用评分为。本发明所述的有益效果为：1、区别于传统资助的公益模式，在本发明所述的方法区块资助交易中引入资助类型，增设“服务资助”，为更多热心公益的群众提供了更多可以资助的方式，充分发挥资助人的积极性，更有针对性地帮助受资助人；2、立足本场景分类资助的模式，根据资助匹配度、信用值等因素选出共识节点，有利于每个节点都有机会参与共识，加强信用值对共识的影响，减弱节点因多次参与共识而更易获取记账权的优势，更有利于共识的公平公正；3、立足受资助人和资助人的隐私保护，通过优化的区块链结构，受资助人和资助人可以选择在联盟链上隐去其个人实名信息，以避免被网络永远记录、被公众永远关注；但仍能够保证资助和被资助信息公正公开、透明可溯源，避免因伪造信息或欺骗等虚假行为造成公益纠纷；在保证可追责的前提下，将选择是否实名公开的权利交还本人；4、建立矩阵联盟链，通过链上区块的坐标信息和链下索引列表，使得监管节点和共识节点能够快速定位待修改交易的区块位置，有助于提高区块修改效率；5、引入权威信用部门，如中国人民银行、公安局或支付宝等，参与监管，对梦想家、梦想资助人背书认证，授予资助人信用评分，当资助人在联盟链中有失信或恶意行为时，将同时记录在现实世界的诚信档案里，有利于资助人诚信作为，形成有效的信用反馈监督机制；6、通过密码学方法，任何攻击者无法通过梦想家或梦想资助人的数据操作获取到真实资助信息或判断出真实身份，保护了梦想家和梦想资助人的数据隐私。附图说明为了使本发明的内容更容易被清楚地理解，下面根据具体实施例并结合附图，对本发明作进一步详细的说明。图1是本发明所述系统的模型图；图2是区块结构图；图3是矩阵联盟链结构图；图4是本发明的流程图。具体实施方式本发明的重要术语及约束如下：联盟链：区块链是一种在对等网络环境下，通过透明和可信规则，构建不可伪造、难以篡改和可追溯的块链式数据结构，实现和管理可信数据的产生、存取和使用的模式。联盟链通常是指多个主体达成一定的协议，或建立了一个业务联盟后，多方共同组建的链，加入联盟链的成员需要经过验证。每个区块的生成由所有的预选节点共同决定，其他接入节点可以参与交易，但不过问记账过程，其他任何人可以通过该区块链开放的API进行限定查询。矩阵联盟链：在联盟链中构建横向链和纵向链，横向链以梦想区块高度为横向坐标，纵向链以资助区块深度为纵向坐标，通过区块坐标可定位该区块在联盟链中的唯一位置，这个坐标的实际意义是对某一梦想家梦想的某一个资助行为。因这种联盟链和区块的具象形式类似于矩阵，所以称之为“矩阵联盟链”。哈希函数：将任意长度的二进制值串映射为固定长度的二进制值串，这个映射的规则，就是哈希算法。而通过原始数据映射之后得到的二进制值串就是哈希值。树：Merkle树是一种哈希二叉树，它是一种用作快速归纳和校验大规模数据完整性的数据结构。这种二叉树包含加密哈希值。术语“树”在计算机学科中常被用来描述一种具有分支的数据结构。共识机制：共识机制是通过特殊节点的投票，在很短的时间内完成对交易的验证和确认；对一笔交易，如果利益不相干的若干个节点能够达成共识，就可以认为全网对此也能够达成共识。实用拜占庭容错算法：PBFT，Practical Byzantine Fault Tolerance。PBFT是一个实现拜占庭容错的实用型的共识机制，在系统中有一个节点会被当做主节点，而其他节点都是子节点。系统内的所有节点都会相互通信，最终目标是以少数服从多数的原则达成数据的共识；PBFT要求在总节点数为的前提下，最多可以容纳的拜占庭节点，在联盟链中有较广泛的应用。本发明应用场景可为实现乡村儿童梦想，助力乡村振兴。本发明所描述的方案包括一下四个实体，如图1所示。梦想家：指受资助人，在乡村公益场景中指有梦想的乡村儿童，可通过家长老师或其他监护人的帮助，完成实名注册，在监管机构背书认证后，发布梦想，梦想及所有资助信息将共识后记录在联盟链上；梦想完成后或梦想不再需要资助时，梦想家可选择隐藏其实名信息。梦想资助人：指资助人，可以是个体或集体；在乡村公益场景中指梦想资助人，在实名注册并通过监管机构认证后，可以在联盟链上查看到五彩斑斓的梦想，选择财物资助或服务资助，帮助梦想家实现梦想，资助信息将记录在联盟链上，而后梦想资助人可选择是否在联盟链上隐藏个人实名信息。监管机构：监管机构由政府监管部门、公益机构和第三方信用机构。政府监管部门、公益机构和梦想资助人组成联盟链，第三方信用机构在认证资助人时，将根据资助人诚信档案授予信用评分，但不参与共识，当资助人在联盟链中有失信行为时，将同时记录在信用部门诚信档案中。密钥生成中心：初始化公共参数，为方案中各成员生成并分发密钥、注册证书。本发明所述的一种基于矩阵联盟链的可隐藏实名的资助方法，方案模型图如图1所示，具体流程如图4所示，其步骤为：S1、初始化系统，生成安全参数、系统公钥、加解密算法、安全哈希函数等公共参数，参与者主要是梦想家、梦想资助人、监管机构及密钥生成中心)；S1-1、各参与方生成与自己身份相关联的字符串，张明、爱课堂公司、民政部门与“爱心筹”合作的监管者、征信中心分别生成的与身份信息相关联的字符串分别表示为：；S1-2、输入安全参数，选取加法循环群与乘法循环群，且，为位的大素数，为群的生成元，并定义这样一个双线性映射：；S1-3、KGC随机选取随机数作为系统主密钥，并计算其公钥为；定义6个安全哈希函数，分别为：以及加解密算法对，，公开系统参数，并记录到区块链上；其中，r表示随机数，表示模的剩余类环的乘法群，表示公钥，表示不定长的比特串，表示；比特长的比特串；；S1-4、密钥生成中心根据各参与用户提供的身份字符串计算，，，，以及，其中，为用户的公私钥对，为用户区块链公钥地址，为用户的注册证书，由密钥生成中心的私钥签名生成，为注册号，为通用哈希函数，然后通过安全通道将发送给用户。S2构建梦想区块，形成矩阵联盟链中的横向链；张明向联盟链系统提交个人注册信息，以及成为外交官的梦想和需要服务资助等信息M，民政局、爱心筹作为监管节点，审核张明小朋友的个人信息及梦想的真实性，验证通过后，打包张明的ID、区块链地址Addr、成为外交官的梦想内容msg、需要服务资助类型type等信息作为梦想的交易信息，并生成交易副本，广播及副本，根据共识机制，由共识节点进行验证并写入梦想区块，区块结构如图2所示。梦想区块间有明暗双链相连，形成一条梦想链如图3所示。S2的具体实现步骤如下：S2-1、张明打包个人注册信息，外交官的梦想内容及类型生成消息，并计算其数字签名，其中，为当前时间戳，发送消息至区块链网络；S2-2、民政局、爱心筹组成的监管节点接收到张明消息后，首先选取当前时间戳，定义为消息的时间戳和收到消息时的时间戳之间的有效差值，若，则说明消息有效，否则中止对话，然后计算下列公式来验证消息的正确性：；若上式成立，则接收该消息，核验该受资助人的梦想内容及类型无误后，返回确认信息；S2-3、监管节点根据梦想区块的交易格式打包张明提交的信息，并生成交易副本，如下：；其中，包含张明的个人真实信息及，为交易副本，不包含这两项字符串，是监管节点对交易的签名，为交易生成时间，为梦想区块链的标签，用于后续编辑区块链时定位区块坐标及交易位置；S2-4、监管节点广播交易及交易副本，根据共识机制，共识节点对交易及其副本进行验证，验证通过后根据标签写入梦想区块，并建立索引列表作为链下数据保存至本地数据库，其中为该区块的高度，用于生成资助链过程的快速定位，该区块的数据结构中存有两个merkleroot，分别为、，相对应地，区块头将存有前一区块的两个哈希值，区块与区块间由明链和暗链链接，用于修改区块链内容时仍能保证区块链结构不被破坏，即：；其中，表示当前区块，表示前一区块的两个哈希值，表示当前区块的随机数，表示区块的生成时间戳。S3、构建资助区块，形成矩阵联盟链中的纵向链；爱课程公司给予张明免费上在线英语课程的资助后，获取资助证明，该证明由民政局和爱心筹共同签发并背书，然后，监管节点广播交易及其交易副本，交易内容包括爱课程及张明的相关信息，资助证书，资助类型等，副本则不包含爱课程的企业信息，根据共识机制，共识节点对资助交易进行验证，验证通过后，资助交易及交易副本将被存入交易池，一段时间后，主共识节点根据张明的ID及资助类型打包成区块，广播至区块链网络，从共识节点验证区块的正确性并投票，票数超过阈值即可上链。对于张明的所有资助，资助区块都会记录到该张明的梦想区块所链接的资助链上，资助区块结构如图2所示，资助链结构如图3所示。S3的具体实现步骤如下：S3-1、爱课程公司完成对张明的区块链地址的免费使用英语课程资源的账号密码，生成资助信息，向监管节点发送生成资助证书请求，其中，表示资助内容，表示加密算法，监管节点收到请求后，执行解密算法获得，若与资助消息直接由计算得到的值相等，则确认接收该请求，并签发资助证书，其中为证书生成时间，并进行背书；；S3-2 监管节点根据资助区块的交易格式生成交易及交易副本，并广播至全网，根据共识机制，由共识节点进行验证，此外，监管节点还需提供张明的相关信息，用于区块定位；其中，，交易副本中不包括爱课程的企业相关信息，，表示监管节点对该交易的签名，表示以爱课程的公钥对相应证书加密，用于爱课程接收后以自己的私钥进行解密而获得资助证书，表示交易生成时间；S3-3交易及交易副本验证通过后，根据共识机制，主共识节点将交易及交易副本存入交易池，然后将时间内对张明的资助交易打包成区块，并广播至区块链网络，从共识节点对该区块进行验证，投票超过阈值后，计算索引定位所在区块高度height，将该区块链接到对应的资助链，其所在高度定义为depth，则某一交易在矩阵联盟链中的区块坐标；同样地，资助链的区块数据结构中存有两个merkleroot值，分别为和，以及前一区块的两个哈希值，且区块间由明链和暗链相链接。S4、当爱课程想要匿名时，不对外公开自己的资助信息时，爱课程发出交易修改请求，请求内容包括其企业相关信息及所在区块坐标，监管节点收到请求后，快速定位该交易所在区块坐标，核验爱课程身份后，为爱课程生成伪身份及签发新资助证书；根据共识机制，监管节点广播新交易，并提供待修改交易所在区块坐标，由共识节点对该交易进行修改，此时，该区块的的值发生改变，而保持不变，因此资助链的暗链仍存在，从而保证矩阵联盟链结构的完整性；同样地，若匿名后的爱课程想要再次实名时，只需要提供其真实身份信息及旧的资助证书，通过类似的步骤即可完成资助链的明链修补，实现实名隐藏后可追溯、追责的机制。S4的具体实现步骤如下：S4-1、爱课程发起匿名修改请求，其中为待修改交易所在区块坐标，为加密算法，表示资助证书，为当前时间戳；S4-2、监管节点接收到，首先选择当前时间戳，若，则消息有效，根据查询本地数据库获得，执行解密算法，若成立，则说明爱课程为合法用户，消息正确；S4-3、消息验证通过后，监管节点为爱课程生成伪身份，并签发新资助证书并背书，然后，监管节点生成新的交易数据，其中，其中表示交易生成时间，表示对该交易的数字签名，表示链标签；此外，监管节点还需向共识节点提供待修改交易所在区块坐标以及修改请求发起者的身份信息；S4-4、根据共识机制，共识节点对交易验证通过后，根据及快速查询待修改交易，然后将待修改交易替换为，重新计算merkleroot的值，此时，该区块与后一区块之间的明链由于merkleroot的值改变而断开，而的值保持不变，因此暗链维护了资助链的完整性；若也发生了改变，则说明该区块发生了未经授权的篡改；S4-5同样地，若爱课程想要再次实名，发送修改请求，监管节点通过搜索本地数据库可以获得相关背书内容，核验身份后进行步骤S4-1~S4-3完成实名修改；当受到虚假信息或公益纠纷时，仍可以核查信息，确保可追溯、追责。S5、当张明完成梦想，或不再需要资助，想注销梦想发布记录时，其首先发起删除请求，请求内容包括个人信息及其所在梦想链高度，监管节点收到请求后，上链查询张明的交易数据，核验个人信息后，发起删除交易，根据共识机制，经过共识节点验证后，对该梦想区块进行修改。S5的具体实现步骤如下：S5-1、张明发起删除请求，其中为该梦想区块高度，为当前请求的时间戳；S5-2、监管节点收到张明发来的删除请求后，首先选取当前时间，若，则请求有效，然后上链查询获得交易数据，计算，若，则说明该受资助人身份可信；否则说明该受资助人身份不合法或值受到未经授权的篡改，则中止会话；S5-3、当张明身份核验通过时，监管节点生成新的交易数据并广播，此外，还需提供待修改区块的高度；S5-4、根据共识机制，经过共识节点验证后，对待修改区块进行删除操作，具体地，将原有的替换为，并重新计算，由于该值的改变，对于梦想链而言，后一区块中存储的当前区块的第一个哈希值发生改变，而第二个哈希值保持不变，故梦想链的结构保持完整性；同理，对于资助链而言，其第一个资助区块中保存的第二哈希值不变，资助区块结构完整；由于资助链上交易内容不包含张明的相关信息，相应资助证书被加密，只有拥有相应的私钥的资助节点可以看到，其他节点均不可查询到张明的相关信息。S6、实施基于多因素投票的实用拜占庭容错机制。共识节点通过综合计算资助匹配度SD、资助额度SA、梦想资助人信用评分CS三因素投票选出排名前位的共识节点参与共识，每过小时换届，重新组织竞选投票。不失一般性取。本发明中所述的共识机制是指实施基于多因素投票的实用拜占庭容错机制，所述共识节点为资助人和受助人；在链上发布交易或者修改交易需要得到共识节点的共识，共识节点通过综合计算匹配度SD、资助额度SA、资助人信用评分CS三因素投票选出排名前位的共识节点参与共识，每过小时换届，重新组织竞选投票。根据所述共识机制，共识节点进行验证的步骤为S6的具体实现步骤如下：S6-1、在矩阵联盟链冷启动时，由监管节点将此时资助交易信息写入创世区块；密钥生成中心KGC为每个节点分配独立的区块链地址、私钥和公钥，梦想资助人的公钥只对监管节点及共识节点公开，已写入区块的账户地址公开可见，未写入的账户地址则不会在网络中显示；S6-2 、第三方信用机构对新加入的爱课程公司授予信用评分，读取爱课程公司的资助证书，记录其提供的在线课程资源按市场价计算的资助值，计算资助匹配度评分，若资助节点的资助类型与梦想家需要的类型一致，则，反之，，此时爱课程的资助匹配度为1；S6-3、当进入竞选投票时间时，监管节点计算竞选节点的综合评分，不失一般性取，其中，，选出评分排序前位的节点担任共识节点；S6-4、第一批共识节点产生后，在时间内，共识节点按照排名依次担任主节点；主节点SP将验证通过的资助交易信息打包到一个区块中，生成发送给其余从节点；在主节点后的下一个节点是副主节点，与主节点同时打包，当主节点出错时才会发出自己产生的区块；S6-5、其余从节点接收到主节点发送的预准备消息后，验证签名，若验证通过，赞同区块上链，则发送确认消息转发给其他共识节点，若超时或不赞同则发送；S6-6、各共识节点接收到准备消息后，当接收到的有效准备消息数量，计算赞同和不赞同的票数，决定确认消息中的值，节点广播确认信息Confirm，当收到的确认信息，则执行请求；；S6-7、若客户端收到个相同回复，则说明客户端发起的请求已经达成全网共识，否则需要重新发送请求；是系统节点数，若系统所允许的最大恶意节点数量，则要求；S6-8、若发现恶意节点，则更新其信用评分，其中，，并将评分发送给第三方信用机构；若完轮共识，则更新该节点的信用评分为。以上所述仅为本发明的优选方案，并非作为对本发明的进一步限定，凡是利用本发明说明书及附图内容所作的各种等效变化均在本发明的保护范围之内。
