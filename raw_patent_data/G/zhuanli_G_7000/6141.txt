标题title
一种边云端结合的分布式地震数据处理方法与装置
摘要abst
本发明提供了一种边云端结合的分布式地震数据处理方法与装置，其中该方法为：获取各地震观测台站的实时地震监测数据；利用预设的神经网络模型对实时地震监测数据进行识别得到震相类别、P波的初动极性、后方位角的正弦值和余弦值及地震震级；根据P波、S波震相到时进行多台震相关联得到震相关联结果；根据震相关联结果反演震中位置和发震时刻；根据地震监测数据识别结果和震中位置对震相机制进行反演得到震源机制解。本发明通过利用神经网络模型高效准确地获取P波、S波到时、P波初动极性、后方位角及地震震级等信息，并基于此得到震相关联结果和震中位置，可以大幅降低反演震源机制的工作量，提升了震源机制解的反演速度。
权利要求书clms
1.一种边云端结合的分布式地震数据处理方法，其特征在于，包括：获取各地震观测台站的原始地震监测数据；对所述原始地震监测数据进行去噪得到实时地震监测数据；利用谛听地震检测与震相拾取神经网络模型对所述实时地震监测数据进行震相拾取得到震相类别和事件类别；所述震相类别包括P波、S波和噪声；所述事件类别包括是和否；提取所有事件类别为“是”的地震波形，利用初动极性识别模型对所述地震波形的初动极性进行识别得到P波的初动极性和清晰度；所述P波的初动极性包括初动向上和初动向下；所述清晰度包括“清晰”、“平缓”、“不清晰”；根据P波、S波震相类别截取三分量事件波形，并将所述三分量事件波形输入到谛听单台方位角估算网络中得到后方位角的正弦值和余弦值；将所述三分量事件波形输入到谛听震级估算网络模型中得到地震震级；根据各地震观测台站的P波、S波震相到时进行多台震相关联得到震相关联结果；根据所述震相关联结果反演震中位置和发震时刻；当各地震观测台站的地震震级大于预设阈值时，根据所述震相关联结果、震中位置、P波的初动极性和P、S到时截取的三分量事件波形对震相机制进行反演得到震源机制解；所述震源机制解包括断层走向、倾角、滑动角地震震级。2.根据权利要求1所述的一种边云端结合的分布式地震数据处理方法，其特征在于，所述对所述原始地震监测数据进行去噪得到实时地震监测数据，包括：对所述原始地震监测数据进行小波分解得到小波系数；根据所述小波系数的中值构建分解尺度降噪系数；根据所述分解尺度降噪系数构建去噪函数；利用所述去噪函数对原始地震监测数据进行滤波得到实时地震监测数据。3.根据权利要求2所述的一种边云端结合的分布式地震数据处理方法，其特征在于，根据所述小波系数的中值构建分解尺度降噪系数，包括：采用公式：构建分解尺度降噪系数；其中，Gi,j表示分解尺度降噪系数，k表示预设参数，wi,j表示第i个分解尺度下第j个小波系数，μ表示第i个分解尺度下小波系数的均值，σ表示第i个分解尺度下第j个小波系数的标准差，Ti表示降噪比值，σ0＝median/0.6745，median表示第i个分解尺度下小波系数的中值。4.根据权利要求3所述的一种边云端结合的分布式地震数据处理方法，其特征在于，所述去噪函数为：其中，s表示调节权重，s＝n/N，N表示第i个尺度下所有小波系数的个数，n表示第i个尺度下所有小于降噪比值的小波系数的个数。5.根据权利要求1所述的一种边云端结合的分布式地震数据处理方法，其特征在于，所述谛听地震检测与震相拾取神经网络模型是以三分量地震波形为输入，以事件类别和震相类别为输出进行训练得到的；其中，谛听地震检测与震相拾取神经网络模型在训练过程中的损失函数为：式中，Yi′为二值化编码的标签，i＝1,2,3分别表示P波、S波和地震信号三个类别，Y′ij为第j个样本属于类i的真实概率，n为波形采样点数，Yi为神经网络模型最后一层的sigmoid函数计算得到的概率值，Yij为第j个样本属于类i的预测概率值，zi为谛听地震检测与震相拾取神经网络模型最后一层的输出张量，m为输入数据个数，αt为不同类别的均衡权重，γ为难易样本均衡系数。6.根据权利要求1所述的一种边云端结合的分布式地震数据处理方法，其特征在于，所述初动极性识别模型是以地震垂直分量波形数据为输入，以P波初动的极性和清晰度为输出进行训练得到的；其中，初动极性识别模型在训练过程中的损失函数为：式中，Yim，分别为神经网络模型的预测值和二值化编码的标签，i＝1,2分别表示初动向上和向下两个类别；Yic，分别为神经网络模型的预测值和二值化编码的标签，i＝1,2,3分别表示清晰、平缓和不清晰三个类别；Yi由神经网络模型最后一层的sigmoid函数计算得到的概率值，zi表示神经网络模型每个侧输出第i个节点的输出值，zk表示神经网络模型每个侧输出第k个节点的输出值，m为输入数据个数，求和符号表示所有类别的输出值之和。7.根据权利要求1所述的一种边云端结合的分布式地震数据处理方法，其特征在于，所述谛听单台方位角估算网络是以三分量波形作为输入，以后方位角的正弦值和余弦值为输出进行训练得到的；其中，谛听单台方位角估算网络在训练过程中的损失函数为：式中，Yi′为方位角对应的Sin或者Cos值，Yi为后方位角识别模型最后估算出的方位角的Sin或者Cos值，i＝1,2分别表示Sin与Cos值，zm与zn为方位角估算模型最后一层的输出张量，m为输入数据个数。8.根据权利要求1所述的一种边云端结合的分布式地震数据处理方法，其特征在于，所述谛听震级估算网络模型是以三分量地震波形为输入，以地震震级大小为输出进行训练得到的；其中，谛听震级估算网络模型在训练过程中的损失函数为：L＝2式中，Y为人工测定的震级标签，Y'为谛听震级估算网络模型的预测值。9.根据权利要求1所述的一种边云端结合的分布式地震数据处理方法，其特征在于，根据所述震相关联结果、震中位置、P波的初动极性和P、S到时截取的三分量事件波形对震相机制进行反演得到震源机制解，包括：利用全波形震源机制反演方法对震相机制进行反演得到震源机制解；其中，反演的目标函数为：其中，表示观测地震图，表示理论地震图，xcorr表示互相关，c表示地震图三分量，s为台站序号；表示观测的P波初动极性，表示理论的P波初动极性，且当和相同时，g值为0，否则为1；表示观测地震图的S/P振幅比，表示理论地震图的S/P振幅比，threshold为设定的阈值；s0表示观测波形和理论波形进行互相关之后获得的偏移量，α1表示第一权重系数，α2表示第二权重系数，α3表示第三权重系数，α4第四权重系数。10.一种边云端结合的分布式地震数据处理装置，其特征在于，包括：地震监测数据获取模块，用于获取各地震观测台站的原始地震监测数据；去噪模块，用于对所述原始地震监测数据进行去噪得到实时地震监测数据；震相拾取模块，用于利用震相识别模型对所述实时地震监测数据进行震相拾取得到震相类别；所述震相类别包括P波震相和S波震相；初动极性识别模块，用于利用初动极性识别模型对所述实时地震监测数据的初动极性进行识别得到P波的初动极性；震相关联模块，用于对所述震相类别进行震相关联得到震相关联结果；震中位置确定模块，用于根据所述震相关联结果得到震中位置；震源机制解计算模块，用于根据所述震相关联结果、震中位置和P波的初动极性对震相机制进行反演得到震源机制解；所述震源机制解包括断层走向、倾角和滑动角；地震监测数据获取模块，用于获取各地震观测台站的实时地震监测数据；震相拾取模块，用于利用谛听地震检测与震相拾取神经网络模型对所述实时地震监测数据进行震相拾取得到震相类别和事件类别；所述震相类别包括P波、S波和噪声；所述事件类别包括是和否；初动极性识别模块，用于提取所有事件类别为“是”的地震波形，利用初动极性识别模型对所述地震波形的初动极性进行识别得到P波的初动极性和清晰度；所述P波的初动极性包括初动向上和初动向下；所述清晰度包括“清晰”、“平缓”、“不清晰”；方位角估算模块，用于根据P波、S波震相类别截取三分量事件波形，并将所述三分量事件波形输入到谛听单台方位角估算网络中得到后方位角的正弦值和余弦值；地震震级预测模块，用于将所述三分量事件波形输入到谛听震级估算网络模型中得到地震震级；震相关联模块，用于根据各地震观测台站的P波、S波震相到时进行多台震相关联得到震相关联结果；反演模块，用于根据所述震相关联结果反演震中位置和发震时刻；震相机制反演模块，用于当各地震观测台站的地震震级大于预设阈值时，根据所述震相关联结果、震中位置、P波的初动极性和P、S到时截取的三分量事件波形对震相机制进行反演得到震源机制解；所述震源机制解包括断层走向、倾角、滑动角地震震级。
说明书desc
技术领域本发明涉及地震信息处理技术领域，特别是涉及一种边云端结合的分布式地震数据处理方法与装置。背景技术近年来，随着地震台站的不断加密，地震台网监测到的地震数据呈爆发式的增长，逐渐迎来了地震大数据时代。目前，各省、市地震局、监测中心仍采用“中心化”地震数据处理方式，即将各台站记录的连续波形记录汇集至中心服务器集中处理，日益陷入海量数据处理需求增长与有限的实际处理能力之间的矛盾困境。目前地震震源机制解的计算仍然主要通过人工完成，这在很大程度上加重了地震监测部门的日常工作负担，还会严重影响大地震发生时和发生后一段时间的应急处理、信息发布的速度。随着云计算、人工智能、边缘计算等先进技术突飞猛进，为解决这一矛盾带来了新的契机。其中，云计算擅长全局性、非实时、长周期的大数据处理与分析，是一种优化配置资源的中心化数据处理方式，而边缘计算是一种“去中心化”的分布式数据处理方式，能够在地震仪器端就近开展局部性、实时数据处理和分析，从而将繁重的数据处理任务“化整为零”，极大地减轻数据中心的压力。二者具有很强的互补性，因此在地震大数据监测与处理领域，“边云”结合的分布式地震数据处理系统是未来的发展趋势。发明内容为了克服现有技术的不足，本发明的目的是提供一种边云端结合的分布式地震数据处理方法与装置以解决震源机制解反演效率低的问题。为实现上述目的，本发明提供了如下方案：一种边云端结合的分布式地震数据处理方法，包括：获取各地震观测台站的原始地震监测数据；对所述原始地震监测数据进行去噪得到实时地震监测数据；利用谛听地震检测与震相拾取神经网络模型对所述实时地震监测数据进行震相拾取得到震相类别和事件类别；所述震相类别包括P波、S波和噪声；所述事件类别包括是和否；提取所有事件类别为“是”的地震波形，利用初动极性识别模型对所述地震波形的初动极性进行识别得到P波的初动极性和清晰度；所述P波的初动极性包括初动向上和初动向下；所述清晰度包括“清晰”、“平缓”、“不清晰”；根据P波、S波震相类别截取三分量事件波形，并将所述三分量事件波形输入到谛听单台方位角估算网络中得到后方位角的正弦值和余弦值；将所述三分量事件波形输入到谛听震级估算网络模型中得到地震震级；根据各地震观测台站的P波、S波震相到时进行多台震相关联得到震相关联结果；根据所述震相关联结果反演震中位置和发震时刻；当各地震观测台站的地震震级大于预设阈值时，根据所述震相关联结果、震中位置、P波的初动极性和P、S到时截取的三分量事件波形对震相机制进行反演得到震源机制解；所述震源机制解包括断层走向、倾角、滑动角地震震级。优选地，所述对所述原始地震监测数据进行去噪得到实时地震监测数据，包括：对所述原始地震监测数据进行小波分解得到小波系数；根据所述小波系数的中值构建分解尺度降噪系数；根据所述分解尺度降噪系数构建去噪函数；利用所述去噪函数对原始地震监测数据进行滤波得到实时地震监测数据。优选地，根据所述小波系数的中值构建分解尺度降噪系数，包括：采用公式：构建分解尺度降噪系数；其中，Gi,j表示分解尺度降噪系数，k表示预设参数，wi,j表示第i个分解尺度下第j个小波系数，μ表示第i个分解尺度下小波系数的均值，σ表示第i个分解尺度下第j个小波系数的标准差，Ti表示降噪比值，σ0＝median/0.6745，median表示第i个分解尺度下小波系数的中值。优选地，所述去噪函数为：其中，s表示调节权重，s＝n/N，N表示第i个尺度下所有小波系数的个数，n表示第i个尺度下所有小于降噪比值的小波系数的个数。优选地，所述谛听地震检测与震相拾取神经网络模型是以三分量地震波形为输入，以事件类别和震相类别为输出进行训练得到的；其中，谛听地震检测与震相拾取神经网络模型在训练过程中的损失函数为：式中，Yi′为二值化编码的标签，i＝1,2,3分别表示P波、S波和地震信号三个类别，Yij′为第j个样本属于类i的真实概率，n为波形采样点数，Yi为神经网络模型最后一层的sigmoid函数计算得到的概率值，Yij为第j个样本属于类i的预测概率值，zi为谛听地震检测与震相拾取神经网络模型最后一层的输出张量，m为输入数据个数，αt为不同类别的均衡权重，γ为难易样本均衡系数。优选地，所述初动极性识别模型是以地震垂直分量波形数据为输入，以P波初动的极性和清晰度为输出进行训练得到的；其中，初动极性识别模型在训练过程中的损失函数为：式中，Yim，分别为神经网络模型的预测值和二值化编码的标签，i＝1,2分别表示初动向上和向下两个类别；Yic，分别为神经网络模型的预测值和二值化编码的标签，i＝1,2,3分别表示清晰、平缓和不清晰三个类别；Yi由神经网络模型最后一层的sigmoid函数计算得到的概率值，zi表示神经网络模型每个侧输出第i个节点的输出值，zk表示神经网络模型每个侧输出第k个节点的输出值，m为输入数据个数，求和符号表示所有类别的输出值之和。优选地，所述谛听单台方位角估算网络是以三分量波形作为输入，以后方位角的正弦值和余弦值为输出进行训练得到的；其中，谛听单台方位角估算网络在训练过程中的损失函数为：式中，Yi′为方位角对应的Sin或者Cos值，Yi为后方位角识别模型最后估算出的方位角的Sin或者Cos值，i＝1,2分别表示Sin与Cos值，zm与zn为方位角估算模型最后一层的输出张量，m为输入数据个数。优选地，所述谛听震级估算网络模型是以三分量地震波形为输入，以地震震级大小为输出进行训练得到的；其中，谛听震级估算网络模型在训练过程中的损失函数为：L＝2式中，Y为人工测定的震级标签，Y'为谛听震级估算网络模型的预测值。优选地，根据所述震相关联结果、震中位置、P波的初动极性和P、S到时截取的三分量事件波形对震相机制进行反演得到震源机制解，包括：利用全波形震源机制反演方法对震相机制进行反演得到震源机制解；其中，反演的目标函数为：其中，表示观测地震图，表示理论地震图，xcorr表示互相关，c表示地震图三分量，s为台站序号；表示观测的P波初动极性，表示理论的P波初动极性，且当和相同时，g值为0，否则为1；表示观测地震图的S/P振幅比，表示理论地震图的S/P振幅比，threshold为设定的阈值；s0表示观测波形和理论波形进行互相关之后获得的偏移量，α1表示第一权重系数，α2表示第二权重系数，α3表示第三权重系数，α4第四权重系数。本发明还提供了一种边云端结合的分布式地震数据处理装置，包括：地震监测数据获取模块，用于获取各地震观测台站的原始地震监测数据；去噪模块，用于对所述原始地震监测数据进行去噪得到实时地震监测数据；震相拾取模块，用于利用震相识别模型对所述实时地震监测数据进行震相拾取得到震相类别；所述震相类别包括P波震相和S波震相；初动极性识别模块，用于利用初动极性识别模型对所述实时地震监测数据的初动极性进行识别得到P波的初动极性；震相关联模块，用于对所述震相类别进行震相关联得到震相关联结果；震中位置确定模块，用于根据所述震相关联结果得到震中位置；震源机制解计算模块，用于根据所述震相关联结果、震中位置和P波的初动极性对震相机制进行反演得到震源机制解；所述震源机制解包括断层走向、倾角和滑动角；地震监测数据获取模块，用于获取各地震观测台站的实时地震监测数据；震相拾取模块，用于利用谛听地震检测与震相拾取神经网络模型对所述实时地震监测数据进行震相拾取得到震相类别和事件类别；所述震相类别包括P波、S波和噪声；所述事件类别包括是和否；初动极性识别模块，用于提取所有事件类别为“是”的地震波形，利用初动极性识别模型对所述地震波形的初动极性进行识别得到P波的初动极性和清晰度；所述P波的初动极性包括初动向上和初动向下；所述清晰度包括“清晰”、“平缓”、“不清晰”；方位角估算模块，用于根据P波、S波震相类别截取三分量事件波形，并将所述三分量事件波形输入到谛听单台方位角估算网络中得到后方位角的正弦值和余弦值；地震震级预测模块，用于将所述三分量事件波形输入到谛听震级估算网络模型中得到地震震级；震相关联模块，用于根据各地震观测台站的P波、S波震相到时进行多台震相关联得到震相关联结果；反演模块，用于根据所述震相关联结果反演震中位置和发震时刻；震相机制反演模块，用于当各地震观测台站的地震震级大于预设阈值时，根据所述震相关联结果、震中位置、P波的初动极性和P、S到时截取的三分量事件波形对震相机制进行反演得到震源机制解；所述震源机制解包括断层走向、倾角、滑动角地震震级。根据本发明提供的具体实施例，本发明公开了以下技术效果：本发明提供了一种边云端结合的分布式地震数据处理方法与装置，与现有技术相比，本发明通过利用多个神经网络模型可以高效准确地获取P波、S波到时、P波初动极性、后方位角及地震震级等信息，并基于此得到震相关联结果和震中位置，可以大幅降低反演震源机制的工作量，提升了震源机制解的反演速度。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明提供的实施例中的一种边云端结合的分布式地震数据处理方法流程图；图2为本发明提供的实施例中的DiTingPicker神经网络原理图；图3为本发明提供的实施例中的DiTingMotion神经网络原理图；图4为本发明提供的实施例中的DiTingAzi神经网络原理图；图5为本发明提供的实施例中的DiTingMag神经网络原理图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本文中提及“实施例”意味着，结合实施例描述的特定特征、结构或特性可以包含在本申请的至少一个实施例中。在说明书中的各个位置出现该短语并不一定均是指相同的实施例，也不是与其它实施例互斥的独立的或备选的实施例。本领域技术人员显式地和隐式地理解的是，本文所描述的实施例可以与其它实施例相结合。本申请的说明书和权利要求书及所述附图中的术语“第一”、“第二”、“第三”和“第四”等是用于区别不同对象，而不是用于描述特定顺序。此外，术语“包括”和“具有”以及它们任何变形，意图在于覆盖不排他的包含。例如包含了一系列步骤、过程、方法等没有限定于已列出的步骤，而是可选地还包括没有列出的步骤，或可选地还包括对于这些过程、方法、产品或设备固有的其它步骤元。本发明的目的是提供一种边云端结合的分布式地震数据处理方法与装置以解决震源机制解反演效率低的问题。为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。请参阅图1，一种边云端结合的分布式地震数据处理方法，包括：步骤1：获取各地震观测台站的原始地震监测数据；在实际应用中，实时地震监测数据是指谛听智慧盒子通过wifi网络或USB接口从地震数据采集器里读取的实时数据。需要说明的是，本发明在获取实时地震监测数据之后，还需要对接收的实时地震监测数据包进行预处理，得到通用地震数据格式，如MiniSeed格式的数据文件，同时还需要对地震监测数据进行去趋势、去均值等基本数据处理。步骤2:对所述原始地震监测数据进行去噪得到实时地震监测数据。进一步的，步骤2包括：对所述原始地震监测数据进行小波分解得到小波系数；在小波去噪过程中，阈值选取的优劣直接影响着去噪的效果。常用的阈值函数有硬阈值函数和软阈值函数。软阈值函数由于收缩函数的不连续性，会导致处理后的地震监测数据过度平滑；而采用硬阈值函数虽然不会出现上述问题，但是会损失一些有用的高频信息。本发明基于不同分解尺度下高频小波系数的均值、标准差和中值构建自适应的分解尺度降噪系数，可以对每一尺度下的小波系数进行自适应变换，突出不同尺度的细节特征，抑制地震监测数据的各类噪声。根据所述小波系数的中值构建分解尺度降噪系数；具体的，本发明可采用公式：构建分解尺度降噪系数；其中，Gi,j表示分解尺度降噪系数，k表示预设参数，wi,j表示第i个分解尺度下第j个小波系数，μ表示第i个分解尺度下小波系数的均值，σ表示第i个分解尺度下第j个小波系数的标准差，Ti表示降噪比值，σ0＝median/0.6745，median表示第i个分解尺度下小波系数的中值。根据所述分解尺度降噪系数构建去噪函数；在本发明实施例中，所述去噪函数为：其中，s表示调节权重，s＝n/N，N表示第i个尺度下所有小波系数的个数，n表示第i个尺度下所有小于降噪比值的小波系数的个数。通常情况下，现有的小波去噪函数在进行去噪时，某些噪声也会相同程度地放大，影响地震监测数据的去噪效果。而本发明通过自适应的分解尺度降噪系数对不同尺度下的小波系数进行自适应变换，可以抑制地震监测数据中的各类的噪声，增强地震监测数据的真实性。利用所述去噪函数对原始地震监测数据进行滤波得到实时地震监测数据。步骤3：利用谛听地震检测与震相拾取神经网络模型对所述实时地震监测数据进行震相拾取得到震相类别和事件类别；所述震相类别包括P波、S波和噪声；所述事件类别包括是和否；本发明将地震检测与震相拾取看成深度学习里的语义分割问题，其数学原理实际是对目标函数进行最优化，通过反复比较当前网络的预测值与我们期望的目标值的差异，不断调整每一层的权重和偏差等超参数，使得差值最小化。衡量预测值与期望值差异的方程被称为损失函数。如图2所示，DiTingPicker的基本组件可分为下采样分支层和上采样分支，其中下采样分支由卷积层、残差模块和池化层组成。在训练阶段，还包括dropout层来防止过拟合；上采样层由卷积层、转置卷积层、残差模块和跳跃链接层组成。在训练过程中同样也加入了dropout层。一个下采样层和上采样层为一个阶段。本实施例的网络设计采用级联的架构，共包含三个阶段。网络输入为三分量地震波形，每一阶段的输出将作为下一阶段的输入，以及最终判别的输入。在级联结构中，网络可以提高感受野范围，自动提取地震和震相的抽象特征，以解决地震检测与震相拾取问题。在多次下采样和上采样的分支组合中，结合局部与全局的特征信息，逐步判别地震信号并识别震相的细节特征，以解决地震检测与震相拾取的问题。最后网络通过激活函数计算P波、S波及是否为地震事件的概率值。网络输出的预测经后处理模块后，根据预设阈值得到对应的地震时间及P波、S波震相的到时。进一步的，所述DiTingPicker模型是以6144个采样点三分量地震波形为输入，以是否为地震事件及震相类别为输出进行训练得到的。且DiTingPicker模型在训练过程中的损失函数为：式中，Yi′为二值化编码的标签，i＝1,2,3分别表示P波、S波和地震信号三个类别，Yij′为第j个样本属于类i的真实概率，n为波形采样点数，Yi为神经网络模型最后一层的sigmoid函数计算得到的概率值，Yij为第j个样本属于类i的预测概率值，zi为DiTingPicker模型最后一层的输出张量，m为输入数据个数，αt为不同类别的均衡权重，γ为难易样本均衡系数。步骤4：提取所有事件类别为“是”的地震波形，利用初动极性识别模型对所述地震波形的初动极性进行识别得到P波的初动极性和清晰度；所述P波的初动极性包括初动向上和初动向下；所述清晰度包括“清晰”、“平缓”、“不清晰”；本发明将地震初动极性判别看成深度学习里的分类问题，其数学原理实际是对目标函数进行最优化，通过反复比较当前网络的预测值与期望的目标值的差异，不断调整每一层的权重和偏差等超参数，使得差值最小化。衡量预测值与期望值差异的方程被称为损失函数。如图3所示，对于DiTingPicker预测事件类别为“是”的波形，按P波到时前后截取一段垂直分量，利用谛听地震P波初动判别神经网络进行识别得到P波的初动极性和清晰度。具体的，DiTingMotion的基本组件可分为卷积组合模块和侧分支层。其中卷积组合模块由组合卷积层和池化层组成，在训练中加入了dropout层来防止过拟合；侧输出层将第三至第五个卷积组合模块的输出映射为最终的地震初动判别结果，其中地震初动判别结果分为地震的极性及初动的清晰程度。DiTingMotion通过卷积组合模块提取地震初动的抽象特征，以解决初动判别问题。在训练过程中，多个侧输出层同时用于监督，可以有效加速网络收敛速度，并且综合不同感受野和不同尺度信息，以解决地震初动判别的问题。最后通过激活函数计算初动向下或向下及初动尖锐或平缓的概率值，并与预设阈值比对确定该地震波形的初动类别。进一步的，所述DiTingMotion模型是以P波到时前后各128个采样点的地震垂直分量波形为输入，以初动方向及清晰度类别为输出进行训练得到的；所述P波初动极性包括初动向上、向下，所述清晰度包括“清晰”、“平缓”、“不清晰”。其中，该神经网络模型在训练过程中的损失函数为：式中，为二值化编码的标签，i＝1,2分别表示初动向上和向下两个类别；为二值化编码的标签，i＝1,2,3分别表示初动清晰、介于清晰和平缓之间、初动平缓三个类别；Y'i为初动波形属于对应类i的真实概率，Yi为谛听地震初动判别神经网络最后一层的sigmoid函数计算得到的概率值，Yi为输入波形的属于类i的预测概率值，zi为谛听地震初动判别神经网络每个侧输出最后一层的输出张量，m为输入数据个数。步骤5：根据P波、S波震相类别截取三分量事件波形，并将所述三分量事件波形输入到谛听单台方位角估算网络中得到后方位角的正弦值和余弦值；本发明将地震单台方位角估算看成深度学习里的回归问题，其数学原理实际是对目标函数进行最优化，通过反复比较当前网络的预测值与我们期望的目标值的差异，不断调整每一层的权重和偏差等超参数，使得差值最小化。衡量预测值与期望值差异的方程被称为损失函数。如图4所示，DiTingAzi的基本组件可分为主干网络和估算网络。其中主干网络由卷积层、残差模块和池化层组成，训练中会加入dropout层来防止过拟合；其中估算网络由全连接网络和Sin或Cos函数组成。估算网络的数据结果经转换函数后为最终估算的方位角。在训练中，利用标签方位角对Sin及Cos函数的输出进行监督。进一步的，所述DiTingAzi模型是以P波前后64个采样点的三分量地震波形为输入，以方位角对应的Sin与Cos值为输出进行训练得到的；其中，DiTingAzi在训练过程中的损失函数为：式中，Yi′为方位角对应的Sin或者Cos值，i＝1,2分别表示Sin与Cos值。Yi为DiTingAzi网络最后估算出的该记录对应方位角的Sin或者Cos值，zm与zn为方位角估算模型后一层的输出张量，m为输入数据个数。步骤6：将所述三分量事件波形输入到谛听震级估算网络模型中得到地震震级；本发明将地震震级预测看成深度学习里的回归问题，其数学原理实际是对目标函数进行最优化，通过反复比较当前网络的预测值与我们期望的目标值的差异，不断调整每一层的权重和偏差等超参数，使得差值最小化。衡量预测值与期望值差异的方程被称为损失函数。该网络可以用于根据地震波形和振幅估算其对应的震级大小。如图5所示，DiTingMag的基本组件可分为主干网络和估算网络。其中主干网络由卷积层、残差模块和池化层组成，训练中加入dropout层来防止过拟合；其中估算网络由全连接网络组成。在训练中，利用人工测定的震级标签输出进行监督。进一步的，所述DiTingMag模型是以三分量地震波形为输入，以是否为地震事件及震相类别为输出进行训练得到的；其中，DiTingMag模型在训练过程中的损失函数为：L＝2式中，Y为人工测定的震级标签，Y'为谛听震级估算网络模型的预测值。步骤7：根据各地震观测台站的P波、S波震相到时进行多台震相关联得到震相关联结果；在实际应用中，本发明可利用REAL进行自动震相关联，REAL是一种三维网格搜索算法，其功能是将按时间顺序排列的多台P波、S波到时与特定事件相关联，同时通过震相到时计数和与理论到时的走时残差来粗略定位地震位置。REAL算法首先需要将待研究区域划分为三维均匀网格，并以P波最早到达的台站为中心开始向四周逐网格搜索，当关联到的P波、S波到时个数达到预设阈值就认为是找到一个事件，同时到时计数最多的网格所在位置作为该事件的初步定位结果；如果有多个网格拥有着共同最大数目关联震相，则其中走时残差最小的网格为最优位置。其具体的实现步骤为：1.利用待研究区域的一维速度结构模型，根据研究区域的大小和最大定位深度，计算待研究区域内的参考走时表。2.设置合理的REAL参数，包括搜索范围、网格尺寸大小，关联P波、S波个数阈值等。3.以观测台站经纬度列表，震相识别模型拾取的各台站P、S波到时列表，以及参考走时表作为输入，运行REAL程序即可得到震相关联初步定位结果。步骤8：根据所述震相关联结果反演震中位置和发震时刻；本发明可给定台站位置，利用上述REAL的震相关联和初步定位结果，以及一维速度参考模型，使用VELEST算法反演得到更加准确的事件位置，包括经纬度和深度。步骤9：当各地震观测台站的地震震级大于预设阈值时，根据所述震相关联结果、震中位置、P波的初动极性和P、S到时截取的三分量事件波形对震相机制进行反演得到震源机制解；所述震源机制解包括断层走向、倾角、滑动角地震震级。在本实施例中，预设阈值是一个经验值，指震级大于该值时，各台记录的P、S到时总数，以及P波初动极性个数可达到反演震源机制解的最低需求。进一步的，所述步骤8具体包括：利用全波形震源机制反演方法对震相机制进行反演得到震源机制解；其中，反演的目标函数为：其中，表示观测地震图，表示理论地震图，需要说明的是，本发明的理论地震图可根据VELEST定位结果计算得到，xcorr表示互相关，c表示地震图三分量，s为台站序号；表示观测的P波初动极性，表示理论的P波初动极性，且当和相同时，g值为0，否则为1，可由smart motion网络预测得到，可通过对理论P波到时附近的一小段窗的数据进行求和得到求和值，并根据求和值的正负判断极性；表示观测地震图的S/P振幅比，可根据预测的P、S波到时所计算的平均振幅得到，表示理论地震图的S/P振幅比，threshold为设定的阈值；s0表示观测波形和理论波形进行互相关之后获得的偏移量，α1表示第一权重系数，α2表示第二权重系数，α3表示第三权重系数，α4第四权重系数。通过求解目标函数F的最小值即可得到最佳断层参数。最后本发明还需要对结果进行质量评级；进一步的，质量评级可根据反演波形匹配相关度、反演残差、结果参数分布、台站数目及分布情况进行评价，并对以上每一项结合实际应用人为设定阈值，将质量评级分为A，B，C，D四个质量等级，当出现C和D评级时，需要重新选取训练样本对震相识别模型和初动极性识别模块进行训练，以提高后续反演精度。上文详细描述了本发明实施例提供的一种边云端结合的分布式地震数据处理方法，该方法也可以通过相应的系统实现，下面详细描述本发明实施例提供的一种边云端结合的分布式地震数据处理系统。本发明的边云端结合的分布式地震数据处理系统包括：边缘端和云端。在边缘端，将四个预训练深度学习模型：谛听地震检测与震相拾取神经网络、谛听地震P波初动判别神经网络、谛听单台方位角估算网络、谛听震级估算网络使用OpenVINOTM工具套件部署至谛听智慧盒子；具体的，OpenVINOTM工具套件是Intel为Movidius神经棒开发的深度神经网络部署工具；所述谛听智慧盒子是一款由树莓派CM4计算板主机和Intel Movidius计算加速模块，以及外壳组装而成的边缘计算设备；在边缘端，利用所述谛听智慧盒子的USB接口或者WIFI网络接入地震实时数据流；所述地震实时数据流包括但不限于：从宽频带、短周期等地震仪器实时传输的mseed、sac、segy等格式的地震数据；在边缘端，利用所述四个深度学习模型依次对所述实时数据流自动进行处理：首先调用DiTingPicker模型，每隔1分钟自动对最近一分钟接收到的实时数据进行事件类别和震相类别识别；所述震相类别包括P波、S波和噪声；所述事件类别包括是和否；当DiTingPicker模型检测的事件类别为“是”，则进一步调用DiTingMotion、DiTingAzi、DiTingMag分别进行P波初动极性和清晰度识别、台站后方位角及误差估计、单台地震震级及误差估计；其中，所述P波初动极性包括初动向上、向下；所述清晰度包括“清晰”、“平缓”、“不清晰”；所述后方位角指台站指向正北方向与震中指向台站方向之间的顺时针夹角；所述单台地震震级指利用单台地震波形预测的地震震级；将上述新检测到的P、S初至波到时，P波初动极性和清晰度，台站后方位角及误差估计，单台地震震级及误差估计等信息，以及包含了P、S波的三分量地震波形数据通过所述谛听智慧盒子所连接的4G或WIFI网络上传至云服务器；当DiTingPicker模型检测的事件类别为“否”，则退出继续等待下一次；在云端，以docker形式部署REAL震相关联、VELEST自动定位、全波形匹配震源机制自动反演算法；在云端,利用各台谛听智慧盒子上传的P、S初至波到时进行REAL震相关联得到震相关联结果；在云端,在REAL震相关联结果基础上进一步进行VELEST定位得到地震目录；所述地震目录包括地震的发震时刻、震中位置、震级等参数；在云端,对于上传数据中单台地震震级超过预设阈值的，利用所述震相关联结果截取各台站的事件波形，以及各台站记录P波的初动极性和清晰度，调用全波形匹配算法反演得到震源机制解。本发明首先通过在边缘端直接接入单台实时数据进行自动化处理，利用部署在谛听智慧盒子上的DiTingPicker、DiTingMotion、DiTingAzi、DiTingMag快速获取地震震相到时、初动极性、方位角、震级、事件波形等信息，并将处理结果自动上传至云端，待各台站的处理结果汇集至云端后，在云端调用震相关联、自动定位、震源机制解算法做进一步集中处理，得到地震的发震时刻、震中位置、震级等参数，以及断层走向角、倾角、滑动角等震源机制参数，从而将原本集中于云端的计算任务分配至各边缘端，突破了计算瓶颈，大大提升了地震数据处理的效率，使得云端可以将宝贵的计算资源专注于地震目录与震源机制解等应急产品的高效和快速产出。本发明还提供了一种边云端结合的分布式地震数据处理装置，包括：地震监测数据获取模块，用于获取各地震观测台站的原始地震监测数据；去噪模块，用于对所述原始地震监测数据进行去噪得到实时地震监测数据；震相拾取模块，用于利用震相识别模型对所述实时地震监测数据进行震相拾取得到震相类别；所述震相类别包括P波震相和S波震相；初动极性识别模块，用于利用初动极性识别模型对所述实时地震监测数据的初动极性进行识别得到P波的初动极性；震相关联模块，用于对所述震相类别进行震相关联得到震相关联结果；震中位置确定模块，用于根据所述震相关联结果得到震中位置；震源机制解计算模块，用于根据所述震相关联结果、震中位置和P波的初动极性对震相机制进行反演得到震源机制解；所述震源机制解包括断层走向、倾角和滑动角；地震监测数据获取模块，用于获取各地震观测台站的实时地震监测数据；震相拾取模块，用于利用谛听地震检测与震相拾取神经网络模型对所述实时地震监测数据进行震相拾取得到震相类别和事件类别；所述震相类别包括P波、S波和噪声；所述事件类别包括是和否；初动极性识别模块，用于提取所有事件类别为“是”的地震波形，利用初动极性识别模型对所述地震波形的初动极性进行识别得到P波的初动极性和清晰度；所述P波的初动极性包括初动向上和初动向下；所述清晰度包括“清晰”、“平缓”、“不清晰”；方位角估算模块，用于根据P波、S波震相类别截取三分量事件波形，并将所述三分量事件波形输入到谛听单台方位角估算网络中得到后方位角的正弦值和余弦值；地震震级预测模块，用于将所述三分量事件波形输入到谛听震级估算网络模型中得到地震震级；震相关联模块，用于根据各地震观测台站的P波、S波震相到时进行多台震相关联得到震相关联结果；反演模块，用于根据所述震相关联结果反演震中位置和发震时刻；震相机制反演模块，用于当各地震观测台站的地震震级大于预设阈值时，根据所述震相关联结果、震中位置、P波的初动极性和P、S到时截取的三分量事件波形对震相机制进行反演得到震源机制解；所述震源机制解包括断层走向、倾角、滑动角地震震级。根据本发明提供的具体实施例，本发明公开了以下技术效果：本发明提供了一种边云端结合的分布式地震数据处理方法与装置，与现有技术相比，本发明通过利用神经网络模型高效准确地获取P波、S波到时、P波初动极性、后方位角及地震震级等信息，并基于此得到震相关联结果和震中位置，可以大幅降低反演震源机制的工作量，提升了震源机制解的反演速度。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。对于实施例公开的方法而言，由于其与实施例公开的装置相对应，所以描述的比较简单，相关之处参见装置部分说明即可。本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处。综上所述，本说明书内容不应理解为对本发明的限制。
