标题title
电子锁虚拟钥匙管理方法、系统和电子锁系统
摘要abst
本发明公开了一种电子锁虚拟钥匙管理方法、系统和电子锁系统，涉及电子锁技术，其中，所述电子锁中存储有多个有效的虚拟钥匙，所述虚拟钥匙用于解锁所述电子锁，所述方法包括以下步骤：获取所述电子锁各虚拟钥匙的使用记录；根据所述使用记录，确定各所述虚拟钥匙的使用频率；向客户端发送提示信息，以提示删除使用频率小于等于阈值的虚拟钥匙。通过实施本方案，可以基于虚拟钥匙的使用频率提醒用户删除长期不使用的虚拟钥匙。
权利要求书clms
1.一种电子锁虚拟钥匙管理方法，所述电子锁中存储有多个有效的虚拟钥匙，所述虚拟钥匙用于解锁所述电子锁，其特征在于，所述方法包括：获取所述电子锁各虚拟钥匙的使用记录；根据所述使用记录，确定各所述虚拟钥匙的使用频率；向客户端发送提示信息，以提示删除使用频率小于等于阈值的虚拟钥匙。2.根据权利要求1所述的一种电子锁虚拟钥匙管理方法，其特征在于，所述方法还包括以下步骤：接收客户端发送的针对所述虚拟钥匙的删除指令；向所述电子锁发送删除所述虚拟钥匙的指令。3.根据权利要求1所述的一种电子锁虚拟钥匙管理方法，其特征在于，所述电子锁本地存储有虚拟钥匙对应的编号，所述电子锁在解锁后向服务器发送解锁时间和虚拟钥匙的编号作为使用记录；根据所述使用记录，确定各所述虚拟钥匙的使用频率，具体包括：筛选属于最近一段预设时长内的使用记录，根据筛选出来的使用记录中的编号确定对应的虚拟钥匙的使用频率。4.根据权利要求1所述的一种电子锁虚拟钥匙管理方法，其特征在于，在向客户端发送提示信息之前，所述方法还包括以下步骤：判断提示删除的虚拟钥匙是否为唯一的管理员密钥，若是，则不执行所述向客户端发送提示信息的步骤；若否，则执行所述向客户端发送提示信息的步骤；其中，所述管理员密钥是指电子锁中权限最高的虚拟钥匙。5.根据权利要求1所述的一种电子锁虚拟钥匙管理方法，其特征在于，所述向客户端发送提示信息，具体是：向客户端发送包括虚拟钥匙对应的编号或者备注名称的提示信息，其中，所述备注名称由客户端设定。6.根据权利要求1所述的一种电子锁虚拟钥匙管理方法，其特征在于，所述虚拟钥匙包括：密码信息、IC卡信息或生物特征信息；针对不同类别的虚拟钥匙由客户端配置相同或者不同的使用频率阈值。7.根据权利要求1所述的一种电子锁虚拟钥匙管理方法，其特征在于，所述虚拟钥匙归属于若干种类型的用户；针对属于不同类型的用户的虚拟钥匙由客户端配置相同或者不同的使用频率阈值。8.根据权利要求1所述的一种电子锁虚拟钥匙管理方法，其特征在于，所述电子锁根据所述虚拟钥匙的数量为所述电子锁动态划分所述虚拟钥匙的存储空间。9.一种电子锁虚拟钥匙管理系统，其特征在于，包括：存储器，用于存储程序；处理器，用于加载所述程序以执行如权利要求1-7任一项所述的电子锁虚拟钥匙管理方法。10.一种电子锁系统，其特征在于，包括：电子锁，存储有多个用于解锁所述电子锁的有效虚拟钥匙；服务器，用于执行如权利要求1-7任一项所述的电子锁虚拟钥匙管理方法；客户端，用于接收所述服务器发送的提示消息，以及向服务器发送删除虚拟钥匙的指令；所述电子锁根据所述虚拟钥匙的数量为所述电子锁动态划分所述虚拟钥匙的存储空间。
说明书desc
技术领域本发明涉及电子锁技术，具体涉及电子锁虚拟钥匙管理方法、系统和电子锁系统。背景技术电子锁又称作智能锁，是指由电子部件控制锁定和解锁，从而区别于传统机械解锁方式的一类锁。电子锁通常可以通过锁端或者连接服务器来设置指纹、密码或者IC卡等虚拟钥匙。电子锁会在本地存储这些虚拟钥匙。但是在激烈的市场竞争下，市场提出了更低功耗更低成本的要求。如果用户在锁端录入虚拟钥匙，尤其是诸如指纹、人脸等以图像或者其他复杂特征描述的虚拟钥匙，会占据电子锁较多的存储空间。发明内容鉴于以上技术问题，本发明的目的在于提供一种电子锁虚拟钥匙管理方法、系统和电子锁系统，以自动提醒用户删除可能不需要的虚拟钥匙。一方面，本发明采用以下技术方案一种电子锁虚拟钥匙管理方法，所述电子锁中存储有多个有效的虚拟钥匙，所述虚拟钥匙用于解锁所述电子锁，所述方法包括以下步骤：获取所述电子锁各虚拟钥匙的使用记录；根据所述使用记录，确定各所述虚拟钥匙的使用频率；向客户端发送提示信息，以提示删除使用频率小于等于阈值的虚拟钥匙。在一些实施例中，所述方法还包括以下步骤：接收针对所述虚拟钥匙的删除指令；向所述电子锁发送删除所述虚拟钥匙的指令。在一些实施例中，所述电子锁本地存储有虚拟钥匙对应的编号，所述电子锁在解锁后向服务器发送解锁时间和虚拟钥匙的编号作为使用记录；所述根据所述使用记录，确定各所述虚拟钥匙的使用频率，具体包括：筛选属于最近一段预设时长内的使用记录，根据筛选出来的使用记录中的编号确定对应的虚拟钥匙的使用频率。在一些实施例中，在向客户端发送提示信息之前，所述方法还包括以下步骤：判断提示删除的虚拟钥匙是否为唯一的管理员密钥，若是，则不执行所述向客户端发送提示信息的步骤；若否，则执行所述向客户端发送提示信息的步骤；其中，所述管理员密钥是指电子锁中权限最高的虚拟钥匙。所述虚拟钥匙归属于若干种类型的用户；针对属于不同类型的用户的虚拟钥匙由客户端配置相同或者不同的使用频率阈值。在一些实施例中，所述向客户端发送提示信息，具体是：向客户端发送包括虚拟钥匙对应的编号或者备注名称的提示信息，其中，所述备注名称由客户端设定。在一些实施例中，所述虚拟钥匙包括：密码信息、IC卡信息或生物特征信息；针对不同类别的虚拟钥匙由客户端配置相同或者不同的使用频率阈值。在一些实施例中，所述电子锁根据所述虚拟钥匙的数量为所述电子锁动态划分所述虚拟钥匙的存储空间。另一方面，本实施例公开了一种电子锁虚拟钥匙管理系统，包括：存储器，用于存储程序；处理器，用于加载所述程序以执行所述的电子锁虚拟钥匙管理方法。另一方面，本实施例公开了一种电子锁系统，包括：电子锁，存储有多个用于解锁所述电子锁的有效虚拟钥匙；服务器，用于执行所述的电子锁虚拟钥匙管理方法；客户端，用于接收所述服务器发送的提示消息，以及向服务器发送删除虚拟钥匙的指令。在一些实施例中，所述电子锁根据所述虚拟钥匙的数量为所述电子锁动态划分所述虚拟钥匙的存储空间。本发明通过服务器获取所述电子锁各虚拟钥匙的使用记录，然后根据所述使用记录，确定各所述虚拟钥匙的使用频率，虚拟钥匙的使用频率小于等于阈值的时候向用户发送提示信息，以促进用户删除长时间不用的密钥，以此降低电子锁端的存储空间，使得电子锁可以采用更小的存储空间，同时本方案可以实现智能提醒，用户可以便捷删除不常使用的虚拟钥匙。附图说明图1为本申请实施例提供的电子锁虚拟钥匙管理方法的流程图；图2为本申请实施例提供的电子锁系统的模块框图；图3为本申请实施例提供的电子锁的虚拟钥匙的存储表的示意图。具体实施方式为使本申请的目的、技术方案和优点更加清楚，以下将参照本申请实施例中的附图，通过实施方式清楚、完整地描述本申请的技术方案，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。在本发明的描述中，若干的含义是一个以上，多个的含义是两个以上，大于、小于、超过等理解为不包括本数，以上、以下、以内等理解为包括本数。如果有描述到第一、第二只是用于区分技术特征为目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量或者隐含指明所指示的技术特征的先后关系。本发明的描述中，除非另有明确的限定，设置等词语应做广义理解，所属技术领域技术人员可以结合技术方案的具体内容合理确定上述词语在本发明中的具体含义。本发明的描述中，参考术语“一个实施例”、“一些实施例”、“示意性实施例”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。参照图1和图2，本实施例公开了一种电子锁虚拟钥匙管理方法，其应用在如图2所示的电子锁系统之中，所述电子锁中存储有多个有效的虚拟钥匙，所述虚拟钥匙用于解锁所述电子锁。电子锁根据虚拟钥匙的数量为所述电子锁动态划分所述虚拟钥匙的存储空间。例如，可以预留现存虚拟钥匙数量+2的存储空间作为虚拟钥匙的存储空间。在电子锁本地存储的密码表格如图3所示，在图3的密码表中，包含三大类的密码，即以字符串形式表示的密码、表示生物特征的密码以及IC卡的信息，其中生物特征包括但不限于人脸特征、指纹特征和声纹特征。每个密码都带有对应的编号，同类的密钥可以集中在某个号段。例如，如图3所示，密码对应的是1～10的号段，生物特征对应的是11～20的号段，IC卡对应21～30的号段。其中，每种密码可以设置若干个，其中，密码会有相关的权限等级，一般情况下划分为管理员等级和普通用户等级，管理员等级所享受的权限高于普通用户等级的权限。一般情况下，属于管理员等级的虚拟钥匙可以以密码形式存在的，以便于电子锁出厂时配置相关的默认密码。为了实现本实施例，本实施例的电子锁是具备与服务器通信的能力的，即具备接入网络的能力。但是，并不意味着电子锁需要实时接入网络，其可以是定时接入网络并同步相关信息，后者是在用户开锁时触发网络接入。如图1所示，本方法主要应用在图2所示的服务器之中，所述方法包括以下步骤：S1、服务器获取所述电子锁各虚拟钥匙的使用记录。需要理解的是，电子锁在使用某个虚拟钥匙开锁后，会向服务器报送该虚拟钥匙的编号，使得服务器可以统计虚拟钥匙的编号。在服务器之中，也可以保存一份虚拟钥匙的编号表。但是与电子锁本地保存的不同，服务器可以不获取虚拟钥匙本身，单凭虚拟钥匙对应的编号就可以完成相关的统计。电子锁在解锁后向服务器发送表示“在某某时间，采用编号为1的虚拟钥匙解锁”的信息，服务器可以将该记录归类到服务器自己管理的记录表之中。这样服务器就可以统计某个编号的虚拟钥匙在何时被使用的信息。因此，本步骤可以在服务器记录的信息中获得虚拟钥匙的使用记录。需要理解的是，本步骤可以获取所有的使用记录，也可以获取最近一段时间的使用记录。S2、服务器根据所述使用记录，确定各所述虚拟钥匙的使用频率。由于使用记录带有时间，因此可以确定在某个时期，例如最近三个月每个有效的虚拟钥匙的使用频率。使用频率的计算方式是使用次数除以统计时长。例如，三个月内有30次的记录，则使用频率为10次每月。对于用户或者厂商可以定义何为低频使用的虚拟钥匙，例如阈值可以设置为每月1次。事实上，有很多用户会录入多个生物特征来作为虚拟钥匙，例如指纹等，但是用户只开锁时一般只会使用最常用的手指进行解锁，偶尔使用频次第二的手指进行解锁，其他手指极少使用。在部分实施例中，为了使得使用频率更具参考意义，本步骤也可以是：筛选属于最近一段预设时长内的使用记录，根据筛选出来的使用记录中的编号确定对应的虚拟钥匙的使用频率。例如，可以筛选最近3个月的使用记录来确定每个编号对应的虚拟钥匙的使用频率，例如近3个月使用次数小于等于2次，就建议客户进行删除。需要理解的是，在电子锁存储空间不足的情况下，释放存储空间，有利于电子锁的运行。此外，如图3所示，为了减少虚拟钥匙传输时泄露，所述电子锁本地存储有虚拟钥匙对应的编号，所述电子锁在解锁后向服务器发送解锁时间和虚拟钥匙的编号作为使用记录。实际在电子锁存储虚拟钥匙后，会对虚拟钥匙进行编号，然后将相关的编号报备到服务器中，服务器根据虚拟钥匙的编号来进行记录。服务器中既可以不知道虚拟钥匙的具体内容，但又可以进行统计。S3、服务器向客户端发送提示信息，以提示删除使用频率小于等于阈值的虚拟钥匙。在本步骤中，服务器可以根据虚拟钥匙对应的使用频率是否小于等于阈值来确定提示用户删除哪些虚拟钥匙，发送的时候可以发送一个提示删除的虚拟钥匙列表，列表中可以包括多个虚拟钥匙。在客户端，可以以弹窗的方式提示用户：“是否删除不常用密码A、B、C”，并可以设置一键删除的按钮和详情列表。S4、服务器接收针对所述虚拟钥匙的删除指令。S5、服务器向所述电子锁发送删除所述虚拟钥匙的指令。当用户选择删除某些虚拟钥匙的时候，客户端向服务器发送删除指令，服务器校验删除指令的合法性，然后向电子锁发送相关的删除指令。其中，无论是客户端还是服务器，只会以虚拟钥匙的编号来表示虚拟钥匙，而不会直接传输虚拟钥匙本身。这样使得虚拟钥匙被窃取的可能性降低。在一些实施例中，由于用户在初始配置电子锁的时候，会先设置一个管理员密码，而管理员密码是操作电子锁的最高权限凭证，系统在至少保留一个管理员密钥。因此，在前面的实施例中，在向客户端发送提示信息之前，所述方法还包括以下步骤：判断提示删除的虚拟钥匙是否为唯一的管理员密钥，若是，则不执行所述向客户端发送提示信息的步骤；若否，则执行所述向客户端发送提示信息的步骤。其中，所述管理员密钥是指电子锁中权限最高的虚拟钥匙。判断是否管理员密钥的时候也可以从虚拟钥匙的编号确定，例如可以将管理员密钥的号段设置成90～100。如果存在两个或以上的管理员密钥，则可以删除其中的至少之一。需要理解的是，服务器在判断完之后，如果没有一个编号对应的虚拟钥匙满足低频的条件，则不发送提示消息。在一些实施例中，所述向客户端发送提示信息，具体是：向客户端发送包括虚拟钥匙对应的编号或者备注名称的提示信息，其中，所述备注名称由客户端设定。用户在电子锁录入虚拟钥匙的时候，电子锁通过服务器向客户端发送提示消息，以提醒用户虚拟钥匙已经录入，用户可以通过提醒信息或者特定的设置界面来配置虚拟钥匙的备注指纹，例如备注成“拇指指纹”，“食指指纹”等。在一些实施例中，由于不同类型的密钥所占据的存储空间等不同，针对不同类别的虚拟钥匙由客户端配置相同或者不同的使用频率阈值。所述虚拟钥匙包括：密码信息、IC卡信息或生物特征信息。例如，根据虚拟钥匙分类的特征来配置频率阈值的大小。指纹存储空间大，阈值可以设置得更大，使得其更容易满足删除条件。配置阈值条件时，可以通过客户端向服务器进行配置。在部分实施例中，所述虚拟钥匙归属于若干种类型的用户，用户的种类划分可以包括管理员、亲友、访客等。根据密钥归属类型的不同，可以设置不同的使用频率阈值，例如，对于访客而言，很多时候采用是一次性的密钥。因此，可以设置成7天内使用频率小于等于1次就提醒用户删除。对于亲友而言，重复使用的可能性更大，可以设置成1个月内使用次数小于等于1次就提醒用户删除。因此，在本实施例中，针对属于不同类型的用户的虚拟钥匙由客户端配置相同或者不同的使用频率阈值。通过针对不同用户类型对密码进行删除提醒，可以优化电子锁的存储空间，降低电子锁的配置需求，降低电子锁成本。参照图2，本实施例还公开了一种电子锁系统，包括：电子锁，存储有多个用于解锁所述电子锁的有效虚拟钥匙；所述电子锁根据所述虚拟钥匙的数量为所述电子锁动态划分所述虚拟钥匙的存储空间。服务器，用于所述的电子锁虚拟钥匙管理方法。客户端，用于接收所述服务器发送的提示消息，以及向服务器发送删除虚拟钥匙的指令。一种电子锁虚拟钥匙管理系统，包括：存储器，用于存储程序；处理器，用于加载所述程序以执行所述的电子锁虚拟钥匙管理方法。需要理解的是，上述产品实施例对应于方法实施例的技术特征可以产生对应的技术效果。本发明还提供一种计算机存储介质，其上存储有计算机程序，本发明的方法如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在该计算机存储介质中。基于这样的理解，本发明实现上述实施例方法中的全部或部分流程，也可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一计算机存储介质中，该计算机程序在被处理器执行时，可实现上述各个方法实施例的步骤。其中，所述计算机程序包括计算机程序代码，所述计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。所述计算机存储介质可以包括：能够携带所述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。需要说明的是，所述计算机存储介质包含的内容可以根据司法管辖区内立法和专利实践的要求进行适当的增减，例如在某些司法管辖区，根据立法和专利实践，计算机存储介质不包括电载波信号和电信信号。对本领域的技术人员来说，可根据以上描述的技术方案以及构思，做出其它各种相应的改变以及形变，而所有的这些改变以及形变都应该属于本发明权利要求的保护范围之内。
