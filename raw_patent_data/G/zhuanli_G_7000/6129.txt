标题title
基于激光雷达的半喂入联合收割机穗头喂入深度控制方法
摘要abst
本发明涉及基于激光雷达的半喂入联合收割机穗头喂入深度控制方法，包括建立直角坐标系O和直角坐标系O′；通过激光雷达扫描脱粒滚筒前喂入链上的谷物层，获取谷物层及背景物上反射点的点云数据；采用直通滤波去除冗余数据，保留观测区域内的点云数据，并将观测区域内反射点的点云数据转换为所述O′中的坐标值，然后转换为O中的坐标值；设定判定阈值，通过判定阈值提取出穗头部位的点云数据，并投影到XOZ平面内，获得穗头平均位置在所述XOZ平面的拟合直线；将拟合直线与脱粒滚筒中轴线进行对比，获得喂入链条在所述脱粒滚筒径向的调整量，根据所述调整量调整喂入链条的位置。本发明有效提高了脱粒的效率，降低了谷物损失率。
权利要求书clms
1.基于激光雷达的半喂入联合收割机穗头喂入深度控制方法，其特征在于，包括：以脱粒滚筒中轴线建立直角坐标系O，基于激光雷达自身极坐标系建立直角坐标系O′；通过所述激光雷达以相同采样间隔扫描脱粒滚筒前喂入链上的谷物层，并获取所述谷物层及其背景物上反射点在所述激光雷达自身极坐标系中的点云数据；采用直通滤波保留设定观测区域内的点云数据，并将所述设定观测区域内反射点的点云数据转换为所述直角坐标系O′中的坐标值，然后将所述直角坐标系O′中的坐标转换为所述直角坐标系O中的坐标值；设定判定阈值，通过所述判定阈值从所述设定观测区域中提取出穗头部位的点云数据，将所述穗头部位的点云数据投影到所述直角坐标系O的XOZ平面内，利用最小二乘法回归获得穗头平均位置在所述XOZ平面的拟合直线；将所述拟合直线与所述脱粒滚筒中轴线进行对比，获得喂入链条在所述脱粒滚筒径向的调整量，根据所述调整量调整所述喂入链条的位置。2.根据权利要求1所述的基于激光雷达的半喂入联合收割机穗头喂入深度控制方法，其特征在于，所述激光雷达通过激光雷达底座安装在半喂入联合收割机的顶面，并调整所述激光雷达底座倾角。3.根据权利要求2所述的基于激光雷达的半喂入联合收割机穗头喂入深度控制方法，其特征在于，以所述激光雷达自身极坐标系建立直角坐标系O′，包括：以激光雷达自身极坐标系原点为坐标原点，沿所述激光雷达底座倾角的方向建立直角坐标系O′，其中，所述直角坐标系O′中X′轴与所述直角坐标系O中X轴同向，Y′轴、Z′轴与Y轴、Z轴各呈夹角θ。4.根据权利要求1所述的基于激光雷达的半喂入联合收割机穗头喂入深度控制方法，其特征在于，所述点云数据包括各反射点在所述激光雷达自身极坐标系中的径向距离radius、俯仰角elevation、方位角azimuth以及反射强度intensity。5.根据权利要求1所述的基于激光雷达的半喂入联合收割机穗头喂入深度控制方法，其特征在于，将所述设定区域内反射点的点云数据转换为所述直角坐标系O′中的坐标值的方法如下式：其中，X′、Y′、Z′分别为直角坐标系O′中的三个坐标轴。6.根据权利要求5所述的基于激光雷达的半喂入联合收割机穗头喂入深度控制方法，其特征在于，将所述直角坐标系O′中的坐标转换为所述直角坐标系O中的坐标值的方法如下式：其中，Δy、Δz分别为坐标系O′的原点O′在坐标系O中的坐标值。7.根据权利要求1所述的基于激光雷达的半喂入联合收割机穗头喂入深度控制方法，其特征在于，设定所述判定阈值包括：根据穗头与秸秆对激光反射强度的差异，设定所述判定阈值，基于所述判定阈值对所述穗头与所述秸秆进行区分，提取所述穗头部位的点云数据。8.根据权利要求1所述的基于激光雷达的半喂入联合收割机穗头喂入深度控制方法，其特征在于，获得所述穗头平均位置在所述XOZ平面的拟合直线，包括：利用最小二乘法，将穗头点云的X、Z坐标在所述XOZ平面内线性回归，获得所述穗头平均位置在所述XOZ平面的拟合直线。9.根据权利要求1所述的基于激光雷达的半喂入联合收割机穗头喂入深度控制方法，其特征在于，调整所述喂入链条的位置，包括：将所述拟合直线与所述脱粒滚筒中轴线进行对比，得到对比差值，基于所述对比差值，获得所述喂入链条在脱粒滚筒径向的调整量，根据所述调整量以及调整装置，调整喂入链条的位置。
说明书desc
技术领域本发明涉及农业机械自动化技术领域，特别是涉及基于激光雷达的半喂入联合收割机穗头喂入深度控制方法。背景技术半喂入联合收割机采用与全喂入联合收割机完全不同的脱粒方式，全喂入联合收割机将采收下来的秸秆与穗头共同喂入脱粒滚筒进行脱粒，而半喂入联合收割机则是将采收下来的秸秆整齐排列，由夹持链夹持秸秆尾部依次送入脱粒滚筒脱粒，半喂入脱粒时，秸秆尾部在外，仅有穗头部位与脱粒滚筒接触，通过滚齿与穗头的打击作用形成脱粒。故半喂入脱粒时消耗的功率小，脱粒效率高。但这种脱粒方式要求农作物穗头进入脱粒滚筒脱粒时，穗头要正好位于脱粒滚筒与作物秸秆相切的切点处，在这个位置，脱粒滚筒对穗头的脱粒效果最好。如果穗头进入脱粒滚筒过深或过浅，都会引起穗头脱粒不净，使谷物损失率增加。而由于谷物生长环境的不同及收割机割台切割高度的差异都会导致秸秆长度的差异，所以半喂入脱粒时穗头会经常偏离正确位置，出现脱粒不净，谷物损失率增加的情况。目前在解决喂入深度控制方面由两种途径：一是靠收割机操作人员实时观察穗头相对于脱粒滚筒的位置并手动操纵夹持链调整机构使穗头回到正确位置。二是采用喂入深度的自动控制系统。日本YANMAR收割机在滚筒入口处设置杆状传感器来判断喂入深度合不合适，并据此发出调整指令来调整夹持链条的位置，使穗头回到合适的喂入深度。该系统在一定程度上改善穗头的喂入深度，降低谷物损失率。但是杆状传感器容易被秸秆和杂草缠绕，导致传感器发生故障，使喂入深度调整装置产生误操作，故反而容易使谷物损失率增加，所以这种方案具有局限性。专利“半喂入联合收割机穗头喂入深度检测系统”采用一种利用光电二极管阵列的喂入深度检测系统，该系统能在一定程度上实现穗头位置的无接触检测，但光电阵列数目有限，在检测穗头位置时的精确度不够。故在解决半喂入联合收割机穗头喂入深度的无接触快速检测方面需要开发新的方式方法。发明内容本发明的目的是采用激光雷达来检测脱粒滚筒前喂入链上谷物的穗头位置，比较此位置与滚筒中线的偏差，根据此偏差可沿着脱粒滚筒径向调整喂入链位置，使脱粒滚筒前的谷物层在进入脱粒滚筒后其穗头位置与脱粒滚筒中线保持重合。为实现上述目的，本发明提供了如下方案：基于激光雷达的半喂入联合收割机穗头喂入深度控制方法，包括：以脱粒滚筒中轴线建立直角坐标系O，基于激光雷达自身极坐标系建立直角坐标系O′；通过所述激光雷达以相同采样间隔扫描脱粒滚筒前喂入链上的谷物层，并获取所述谷物层及其背景物上反射点在所述激光雷达自身极坐标系中的点云数据；采用直通滤波保留设定观测区域内的点云数据，并将所述设定观测区域内反射点的点云数据转换为所述直角坐标系O′中的坐标值，然后将所述直角坐标系O′中的坐标转换为所述直角坐标系O中的坐标值；设定判定阈值，通过所述判定阈值从所述设定观测区域中提取出穗头部位的点云数据，将所述穗头部位的点云数据投影到所述直角坐标系O的XOZ平面内，利用最小二乘法回归获得穗头平均位置在所述XOZ平面的拟合直线；将所述拟合直线与所述脱粒滚筒中轴线进行对比，获得喂入链条在所述脱粒滚筒径向的调整量，根据所述调整量调整所述喂入链条的位置。优选地，所述激光雷达通过激光雷达底座安装在半喂入联合收割机的顶面，并调整所述激光雷达底座倾角。优选地，以所述激光雷达自身极坐标系建立直角坐标系O′，包括：以激光雷达自身极坐标系原点为坐标原点，沿所述激光雷达底座倾角的方向建立直角坐标系O′，其中，所述直角坐标系O′中X′轴与所述直角坐标系O中X轴同向，Y′轴、Z′轴与Y轴、Z轴各呈夹角θ。优选地，所述点云数据包括各反射点在所述激光雷达自身极坐标系中的径向距离radius、俯仰角elevation、方位角azimuth以及反射强度intensity。优选地，将所述设定区域内反射点的点云数据转换为所述直角坐标系O′中的坐标值的方法如下式：其中，X′、Y′、Z′分别为直角坐标系O′中的三个坐标轴。优选地，将所述直角坐标系O′中的坐标转换为所述直角坐标系O中的坐标值的方法如下式：其中，Δy、Δz分别为坐标系O′的原点O′在坐标系O中的坐标值。优选地，设定所述判定阈值包括：根据穗头与秸秆对激光反射强度的差异，设定所述判定阈值，基于所述判定阈值对所述穗头与所述秸秆进行区分，提取所述穗头部位的点云数据。优选地，获得所述穗头平均位置在所述XOZ平面的拟合直线，包括：利用最小二乘法，将穗头点云的X、Z坐标在所述XOZ平面内线性回归，获得所述穗头平均位置在所述XOZ平面的拟合直线。优选地，调整所述喂入链条的位置，包括：将所述拟合直线与所述脱粒滚筒中轴线进行对比，得到对比差值，基于所述对比差值，获得所述喂入链条在脱粒滚筒径向的调整量，根据所述调整量以及调整装置，调整喂入链条的位置。本发明的有益效果为：本发明采用激光雷达对穗头位置实行无接触测量，避免了接触式传感器在测量穗头位置时容易出现的缠绕问题；通过采用激光雷达获取穗头位置有效提高了脱粒的效率，降低了谷物损失率；本发明相对于采用有限对光电管来获取穗头位置，激光雷达点云在获取穗头位置时分辨率和精确度大大提高，且激光雷达有成熟的商业产品，便于形成产业化。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例中基于激光雷达的半喂入联合收割机穗头喂入深度控制方法流程图；图2为本发明实施例中穗头位置识别及喂入链调整示意图；图3为本发明实施例中激光雷达安装示意图；图4为本发明实施例中坐标示意图；其中，1-激光雷达，2-谷物夹持链，3-谷物秸秆层，4-谷物穗头层，5-脱离滚筒。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。本实施例提供一种基于激光雷达的半喂入联合收割机穗头喂入深度控制方法，具体包括：在脱粒滚筒中轴线上建立坐标系O。在半喂入联合收割机的顶面上选择一确定点安装倾角可调的激光雷达底座，该底座的倾角设定为θ。将激光雷达安装到该底座上，激光雷达自身极坐标原点O′在脱粒滚筒坐标系O中的坐标确定为。以激光雷达自身极坐标原点O′为原点，沿着设定倾角θ的方向建立直角坐标系O′，该坐标系X′轴与脱粒滚筒坐标系X轴同向，Y′、Z′轴与脱粒滚筒坐标系的Y、Z轴各呈夹角θ。激光雷达以一定采样间隔T扫描脱粒滚筒前喂入链上谷物层并获得谷物层及其背景物上各反射点在激光雷达自身极坐标中的点云数据，该点云数据包含各反射点在激光雷达自身极坐标系中的径向距离、俯仰角、方位角以及反射强度。采用直通滤波以保留设定观测区域ABCD内的点云数据。将区域ABCD内各反射点的径向距离、俯仰角、方位角转换为直角坐标系O′中的直角坐标值，转换公式为：将ABCD区域中点云在坐标系O′中的直角坐标值转换为脱粒滚筒坐标系O中坐标值。转换公式为：区域ABCD中点云数据中同时记录了各反射点的反射强度值。根据穗头与秸秆在激光反射强度方面的差异设定一判定阈值，利用此阈值从区域ABCD中提取出穗头部位的点云。将穗头部位的点云数据投影到XOZ平面内，根据投影坐标利用最小二乘法线性回归获得穗头平均位置在XOZ平面的拟合直线；将拟合得到的穗头平均位置与滚筒中线进行对比，根据对比后的差值获得喂入链条的在脱粒滚筒径向的调整量，根据此调整量由调整装置调整喂入链条的位置，使穗头层回到设定的最佳位置。以上所述的实施例仅是对本发明优选方式进行的描述，并非对本发明的范围进行限定，在不脱粒本发明设计精神的前提下，本领域普通技术人员对本发明的技术方案做出的各种变形和改进，均应落入本发明权利要求书确定的保护范围内。
