标题title
用户请求的处理方法和装置
摘要abst
本发明公开了一种用户请求的处理方法和装置，涉及数据处理技术领域。该方法的一具体实施方式包括：接收目标用户针对目标事件的用户请求；确定所述目标事件的时间窗口是否大于预设时长，以得到判定结果；根据所述判定结果，确定目标存储，进而从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据；将所述用户请求的会话数据写入所述相关会话数据中，生成更新的会话数据；根据所述更新的会话数据，对所述用户请求进行处理。该实施方式减少系统所需的内存消耗，减少系统崩溃的风险。
权利要求书clms
1.一种用户请求的处理方法，其特征在于，包括：接收目标用户针对目标事件的用户请求；确定所述目标事件的时间窗口是否大于预设时长，以得到判定结果；根据所述判定结果，确定目标存储，进而从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据；将所述用户请求的会话数据写入所述相关会话数据中，生成更新的会话数据；根据所述更新的会话数据，对所述用户请求进行处理。2.根据权利要求1所述的方法，其特征在于，所述根据所述判定结果，确定目标存储，包括：在所述判定结果表征所述目标事件的时间窗口大于所述预设时长的情况下，确定所述目标存储为持久化存储。3.根据权利要求2所述的方法，其特征在于，所述持久化存储包括：数据库和/或磁盘文件。4.根据权利要求1所述的方法，其特征在于，所述根据所述判定结果，确定目标存储，包括：在所述判定结果表征所述目标事件的时间窗口不大于所述预设时长的情况下，确定所述目标存储为服务器内存。5.根据权利要求1所述的方法，其特征在于，所述根据所述更新的会话数据，对所述用户请求进行处理，包括：确定所述更新的会话数据是否满足预设规则；在所述更新的会话数据满足所述预设规则的情况下，对所述更新的会话数据进行针对所述预设规则的响应处理。6.根据权利要求5所述的方法，其特征在于，所述针对所述预设规则的响应处理包括以下至少之一：风控拦截、营销提醒及设备故障提醒。7.根据权利要求1所述的方法，其特征在于，所述根据所述更新的会话数据，对所述用户请求进行处理之后，还包括：从所述目标存储中，删除所述相关会话数据；将所述更新的会话数据写入在所述目标存储中。8.根据权利要求1所述的方法，其特征在于，所述从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据，包括：从所述用户请求中，获取所述目标用户的用户标识；确定所述用户标识对应的目标规则引擎组件；将所述用户请求路由给所述目标规则引擎组件，并利用所述目标规则引擎组件，从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据。9.根据权利要求1所述的方法，其特征在于，所述从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据之前，还包括：确定所述目标存储中是否存储有所述相关会话数据；在所述目标存储中未存储有所述相关会话数据的情况下，根据所述用户请求的请求信息，创建所述目标用户针对所述目标事件的会话数据。10.一种用户请求的处理装置，其特征在于，包括：请求接收模块，用于接收目标用户针对目标事件的用户请求；判定模块，用于确定所述目标事件的时间窗口是否大于预设时长，以得到判定结果；数据获取模块，用于根据所述判定结果，确定目标存储，进而从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据；更新模块，用于将所述用户请求的会话数据写入所述相关会话数据中，生成更新的会话数据；处理模块，用于根据所述更新的会话数据，对所述用户请求进行处理。11.根据权利要求10所述的装置，其特征在于，所述数据获取模块具体用于：在所述判定结果表征所述目标事件的时间窗口大于所述预设时长的情况下，确定所述目标存储为持久化存储。12.根据权利要求11所述的装置，其特征在于，所述持久化存储包括：数据库和/或磁盘文件。13.一种电子设备，其特征在于，包括：一个或多个处理器；存储装置，用于存储一个或多个程序，当所述一个或多个程序被所述一个或多个处理器执行，使得所述一个或多个处理器实现如权利要求1-9中任一所述的方法。14.一种计算机可读介质，其上存储有计算机程序，其特征在于,所述程序被处理器执行时实现如权利要求1-9中任一所述的方法。15.一种计算机程序产品，包括计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1-9中任一项所述的方法。
说明书desc
技术领域本发明涉及数据处理技术领域，尤其涉及一种用户请求的处理方法和装置。背景技术目前金融系统在对交易事件进行处理时，需要将未过期的交易事件会话的全量历史数据存储到服务器内存当中。而交易事件会话的全量历史数据的数据量往往是巨大的，在没有良好的分布式算法的情况下，系统往往无法直接处理这么大量数据，导致内存不足而引起系统的崩溃。发明内容有鉴于此，本发明实施例提供一种用户请求的处理方法和装置，能够减少系统所需的内存消耗，从而减少系统崩溃的风险。第一方面，本发明实施例提供了一种用户请求的处理方法，包括：接收目标用户针对目标事件的用户请求；确定所述目标事件的时间窗口是否大于预设时长，以得到判定结果；根据所述判定结果，确定目标存储，进而从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据；将所述用户请求的会话数据写入所述相关会话数据中，生成更新的会话数据；根据所述更新的会话数据，对所述用户请求进行处理。可选地，所述根据所述判定结果，确定目标存储，包括：在所述判定结果表征所述目标事件的时间窗口大于所述预设时长的情况下，确定所述目标存储为持久化存储。可选地，所述持久化存储包括：数据库和/或磁盘文件。可选地，所述根据所述判定结果，确定目标存储，包括：在所述判定结果表征所述目标事件的时间窗口不大于所述预设时长的情况下，确定所述目标存储为服务器内存。可选地，所述根据所述更新的会话数据，对所述用户请求进行处理，包括：确定所述更新的会话数据是否满足预设规则；在所述更新的会话数据满足所述预设规则的情况下，对所述更新的会话数据进行针对所述预设规则的响应处理。可选地，所述针对所述预设规则的响应处理包括以下至少之一：风控拦截、营销提醒及设备故障提醒。可选地，所述根据所述更新的会话数据，对所述用户请求进行处理之后，还包括：从所述目标存储中，删除所述相关会话数据；将所述更新的会话数据写入在所述目标存储中。可选地，所述从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据，包括：从所述用户请求中，获取所述目标用户的用户标识；确定所述用户标识对应的目标规则引擎组件；将所述用户请求路由给所述目标规则引擎组件，并利用所述目标规则引擎组件，从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据。可选地，所述从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据之前，还包括：确定所述目标存储中是否存储有所述相关会话数据；在所述目标存储中未存储有所述相关会话数据的情况下，根据所述用户请求的请求信息，创建所述目标用户针对所述目标事件的会话数据。第二方面，本发明实施例提供了一种用户请求的处理装置，包括：请求接收模块，用于接收目标用户针对目标事件的用户请求；判定模块，用于确定所述目标事件的时间窗口是否大于预设时长，以得到判定结果；数据获取模块，用于根据所述判定结果，确定目标存储，进而从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据；更新模块，用于将所述用户请求的会话数据写入所述相关会话数据中，生成更新的会话数据；处理模块，用于根据所述更新的会话数据，对所述用户请求进行处理。可选地，所述数据获取模块具体用于：在所述判定结果表征所述目标事件的时间窗口大于所述预设时长的情况下，确定所述目标存储为持久化存储。可选地，所述持久化存储包括：数据库和/或磁盘文件。第三方面，本发明实施例提供了一种电子设备，包括：一个或多个处理器；存储装置，用于存储一个或多个程序，当所述一个或多个程序被所述一个或多个处理器执行，使得所述一个或多个处理器实现上述任一实施例所述的方法。第四方面，本发明实施例提供了一种计算机可读介质，其上存储有计算机程序，所述程序被处理器执行时实现上述任一实施例所述的方法。第五方面，本发明实施例提供了一种计算机程序产品，包括计算机程序，所述程序被处理器执行时实现上述任一实施例所述的方法。上述发明中的一个实施例具有如下优点或有益效果：确定目标事件的时间窗口是否大于预设时长，以得到判定结果。根据判定结果，确定目标存储。预设时长及目标存储都可根据需要进行设定。例如，在目标事件的时间窗口较长的情况下，确定目标存储为持久化存储，从持久化存储中获取相关会话数据。在目标事件的时间窗口较短的情况下，确定目标存储为服务器内存，从服务器内存中获取相关会话数据。相比将全量的会话数据都放入服务器内存中的方式，能够减少系统所需的内存消耗，进而减少系统崩溃的风险。上述的非惯用的可选方式所具有的进一步效果将在下文中结合具体实施方式加以说明。附图说明附图用于更好地理解本发明，不构成对本发明的不当限定。其中：图1是本发明第一实施例提供的一种用户请求的处理方法的流程示意图；图2是本发明第二实施例提供的一种用户请求的处理方法的流程示意图；图3是本发明第三实施例提供的一种用户请求的处理方法的流程示意图；图4是本发明第四实施例提供的一种用户请求的处理系统的架构示意图；图5是本发明的实施例提供的一种用户请求的处理装置的结构示意图；图6是适于用来实现本发明实施例的终端设备或服务器的计算机系统的结构示意图。具体实施方式以下结合附图对本发明的示范性实施例做出说明，其中包括本发明实施例的各种细节以助于理解，应当将它们认为仅仅是示范性的。因此，本领域普通技术人员应当认识到，可以对这里描述的实施例做出各种改变和修改，而不会背离本发明的范围和精神。同样，为了清楚和简明，以下的描述中省略了对公知功能和结构的描述。本申请技术方案中对数据的获取、存储、使用、处理等均符合国家法律法规的相关规定。为使本申请实施例的技术方案便于理解，对本申请实施例涉及的部分专业数据进行解释：交易：金融系统中用户发起的请求。长效：长期有效，通常用于表述有效期在一天级以上的数据和事件。流水：用户在系统上的交易行为记录。规则引擎：通过特定的配置，实现对给定规则的交易组合进行检测。复杂事件处理：一种基于动态环境事件流的分析技术。会话：复杂事件处理引擎中对于复杂事件检测的中间状态的集合。图1是本发明第一实施例提供的一种用户请求的处理方法的流程示意图，如图1所示，该方法包括：步骤101：接收目标用户针对目标事件的用户请求。目标事件对应于用户对系统进行的一系列相关交互操作。例如：金融系统中用户发起交易请求之后，用户与系统之间进行的一系列交互，可以被作为一个目标事件。步骤102：确定所述目标事件的时间窗口是否大于预设时长，以得到判定结果。事件窗口为目标事件的有效时长。时间窗口可根据事件类型与具体需求进行设定。目标事件的时间类型不同，目标事件的时间窗口也可以不同。预设时长可根据具体需求设定。例如，预设时长可以为：6小时、12小时、24小时等。通过设置预设时长，可将时间窗口不同的事件的会话数据存储在不同的目标存储中，以节省处理事件所消耗的服务器内存。步骤103：根据所述判定结果，确定目标存储，进而从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据。目标存储用于存储目标事件的会话数据。目标存储可以包括：持久化存储和服务器内存等。持久化存储可包括：数据库、磁盘文件、XML数据文件等。相关会话数据为与目标事件相关的会话数据，可以根据该目标事件的之前用户请求的相关会话数据生成。之前用户请求为发生在当前用户请求之前的用户请求。在本发明一个实施例中，可以先确定所述目标存储中是否存储有所述相关会话数据；在所述目标存储中未存储有所述相关会话数据的情况下，根据所述用户请求的请求信息，创建所述目标用户针对所述目标事件的会话数据。在目标存储中不存在目标用户针对目标事件的相关会话数据的情况下，创建当前用户请求对应的会话数据，作为目标用户针对目标事件的相关会话数据。在本发明的一个实施例中，可以从所述用户请求中，获取所述目标用户的用户标识；确定所述用户标识对应的目标规则引擎组件；将所述用户请求路由给所述目标规则引擎组件，并利用所述目标规则引擎组件，从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据。根据用户标识，利用预设算法或随机，确定目标规则引擎组件。预设算法可以包括：取模、求余等。将用户请求路由给不同的规则引擎组件的实例，一方面，提升了用户请求处理的效率。另一方面，还需确保同一时间每个目标用户的请求都在一个服务器上处理，减少针对同一用户的交易数据处理不一致等情况的发生。步骤104：将所述用户请求的会话数据写入所述相关会话数据中，生成更新的会话数据。更新的会话数据中保存了目标用户针对目标事件的完整的会话数据。基于更新的会话数据可以进行用户请求的相关处理。步骤105：根据所述更新的会话数据，对所述用户请求进行处理。可以根据具体需求，设定至少一个预设规则。预设规则中可以包括：预设算法和/或关键词表达式等。预设方法可以包括：精确识别算法、正则表达式识别算法等。关键词表达式中包括至少一个关键词，关键词表达式中还可以包括：和、或、非等逻辑运算符，通过逻辑运算符将至少一个关键词组合起来，得到关键词表达式。利用预设算法或关键词表达式等，确定更新的会话数据是否满足预设规则；在更新的会话数据满足预设规则的情况下，对更新的会话数据进行针对预设规则的响应处理。针对预设规则的响应处理可以包括以下至少之一：风控拦截、营销提醒及设备故障提醒。通过设置预设规则，能够及时发现交易过程中可能存在的风险或商机，完成风控拦截、营销提醒等功能，最终可以放行的用户请求再提交给核心交易组件。在本发明实施例中，确定目标事件的时间窗口是否大于预设时长，以得到判定结果。根据判定结果，确定目标存储。预设时长及目标存储都可根据需要进行设定。例如，在目标事件的时间窗口较长的情况下，确定目标存储为持久化存储，从持久化存储中获取相关会话数据。在目标事件的时间窗口较短的情况下，确定目标存储为服务器内存，从服务器内存中获取相关会话数据。相比将全量的会话的历史数据都放入服务器内存中的方式，能够减少系统所需的内存消耗，进而减少系统崩溃的风险。图2是本发明第二实施例提供的一种用户请求的处理方法的流程示意图，如图2所示，该方法包括：步骤201：接收目标用户针对目标事件的用户请求。步骤202：确定所述目标事件的时间窗口是否大于预设时长，以得到判定结果。预设时长可根据具体需求设定。通过设置预设时长，可将时间窗口不同的事件的会话数据存储在不同的目标存储中，以节省处理事件所消耗的服务器内存。步骤203：在所述判定结果表征所述目标事件的时间窗口大于所述预设时长的情况下，确定所述目标存储为持久化存储。持久化存储可包括：数据库、磁盘文件、XML数据文件等。将时间窗口较长的目标事件的相关会话数据存储在持久化存储中。在对目标事件的用户请求进行处理的过程中，再将目标事件的相关会话数据从持久化存储中读取到服务器内存中进行处理。步骤204：从所述持久化存储中获取所述目标用户针对所述目标事件的相关会话数据。步骤205：将所述用户请求的会话数据写入所述相关会话数据中，生成更新的会话数据。步骤206：根据所述更新的会话数据，对所述用户请求进行处理。步骤207：从所述持久化存储中，删除所述相关会话数据。步骤208：将所述更新的会话数据写入在所述持久化存储中。从持久化存储中，删除相关会话数据，再写入更新的会话数据，以保证持久化存储中存储有目标用户针对目标事件的完整的会话数据。在本发明实施例中，将时间窗口较长的目标事件的相关会话数据存储在持久化存储中。在对目标事件的用户请求进行处理的过程中，再将目标事件的相关会话数据从持久化存储中读取到服务器内存中进行处理。一方面，通过持久化技术避免了海量数据常驻内存中可能引发的内存溢出问题。另一方面，使用数据库代替内存，实现了大量数据的存储。同等情况下分布式数据库的可靠性远高于分布式内存。本发明实施例的方案在减少服务器内存消耗的同时，还能够支持更大规模的数据集和更长效的时间窗口的时间处理。图3是本发明第三实施例提供的一种用户请求的处理方法的流程示意图，如图3所示，该方法包括：步骤301：接收目标用户针对目标事件的用户请求。步骤302：确定所述目标事件的时间窗口是否大于预设时长，以得到判定结果。预设时长可根据具体需求设定。通过设置预设时长，可将时间窗口不同的事件的会话数据存储在不同的目标存储中，以节省处理事件所消耗的服务器内存。步骤303：在所述判定结果表征所述目标事件的时间窗口不大于所述预设时长的情况下，确定所述目标存储为服务器内存。将时间窗口较短的目标事件的相关会话数据存储在服务器内存中。在对目标事件的用户请求进行处理的过程中，直接从服务器内存中读取目标事件的相关会话记录进行处理。步骤304：从所述服务器内存中获取所述目标用户针对所述目标事件的相关会话数据。步骤305：将所述用户请求的会话数据写入所述相关会话数据中，生成更新的会话数据。步骤306：根据所述更新的会话数据，对所述用户请求进行处理。步骤307：从所述服务器内存中，删除所述相关会话数据。步骤308：将所述更新的会话数据写入在所述服务器内存中。从服务内存中，删除相关会话数据，再写入更新的会话数据，以保证服务器内存中存储有目标用户针对目标事件的完整的会话数据。在本发明实施例中，将时间窗口较短的目标事件的相关会话数据存储在服务器内存中。在对目标事件的用户请求进行处理的过程中，直接从服务器内存中读取目标事件的相关会话记录进行处理。由于目标事件的时间窗口较短，如果将目标时间的相关会话数据存储在持久化存储中，有可能在较短时间内，使服务器内存和持久化存储频繁地进行数据交互，从而对系统性能造成不利影响。图4是本发明第四实施例提供的一种用户请求的处理系统的架构示意图。如图4所示，该架构包括：交易系统及规则引擎集群。用户向交易系统发送用户请求，交易系统通过交易预处理组件接收用户请求，并将用户请求路由给规则引擎集群中的数据接入组件。数据接入组件调用规则引擎组件处理该用户请求。规则引擎组件调用持久化组件，持久化组件用于从持久化存储中读取该用户相关的会话，如果持久化组件中没有该用户的相关会话，则新建该用户的相关会话。规则引擎组件将新接收的用户请求插入该用户的相关会话中，并判断该用户请求是否满足对应规则，得到检测结果，将新的会话通过持久化组件将该用户的相关会话写回持久化存储中。规则引擎组件再调用复杂事件记录将该用户请求的相关信息记录在日志或数据库中。规则引擎组件将检测结果返回给数据预处理组件，交易系统中的事件响应组件根据检测结果进行相关的响应，完成风控拦截、营销提醒等功能。在检测结果表征检测通过的情况下，将该用户请求提交给核心交易组件进行后续处理。该处理系统基于会话的持久化技术，除了初始化新建复杂事件会话之外，之后每次处理新的相关事件都从持久化存储中读取相关会话，并在相关会话中插入新事件的会话信息，生成新的会话信息。根据新的会话信息进行规则判断。处理完成后再将该新的会话重新存储在持久化存储中，并释放内存。如此可以避免由于有效事件过多而引起的内存溢出。通过数据库层面分布式以及分库分表的现有技术可以有效解决高可用和数据集中的问题。本发明实施例还提供了一种用户请求的处理方法。该方法可用于如图4所示的系统架构中，该方法包括：步骤S01：交易系统受到用户请求之后，首先将该数据投递给规则引擎集群中的数据接入组件。步骤S02：数据接入组件根据用户ID，将数据路由给不同的规则引擎组件的实例，确保同一时间每个用户的请求都在一个机器上处理。步骤S03：规则引擎首先从持久化存储中读取该用户相关的会话，如果没有则新建一个，并将新的用户请求插入会话并判断是否满足对应规则，判断结束后将新的会话通过持久化组件写回持久化存储。步骤S04：对于判断出满足一定规则的事件，首先将其记录下来用于数据分析，再将结果返回给数据预处理组件，交易系统根据检测结果进行相关的响应，完成风控拦截、营销提醒等功能，最终可以放行的交易再提交给核心交易组件。本发明实施例的方案，通过持久化技术避免了海量数据常驻内存中可能引发的内存溢出问题。使用数据库代替内存，实现了大量数据的存储。同等情况下分布式数据库的可靠性远高于分布式内存。不仅内存消耗少，还能够支持更大规模的数据集和更长效的时间窗口。图5是本发明的一个实施例提供的一种用户请求的处理装置的结构示意图，如图5所示，该装置包括：请求接收模块501，用于接收目标用户针对目标事件的用户请求；判定模块502，用于确定所述目标事件的时间窗口是否大于预设时长，以得到判定结果；数据获取模块503，用于根据所述判定结果，确定目标存储，进而从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据；更新模块504，用于将所述用户请求的会话数据写入所述相关会话数据中，生成更新的会话数据；处理模块505，用于根据所述更新的会话数据，对所述用户请求进行处理。可选地，所述数据获取模块503具体用于：在所述判定结果表征所述目标事件的时间窗口大于所述预设时长的情况下，确定所述目标存储为持久化存储。可选地，所述持久化存储包括：数据库和/或磁盘文件。可选地，所述数据获取模块503具体用于：在所述判定结果表征所述目标事件的时间窗口不大于所述预设时长的情况下，确定所述目标存储为服务器内存。可选地，所述处理模块505具体用于：确定所述更新的会话数据是否满足预设规则；在所述更新的会话数据满足所述预设规则的情况下，对所述更新的会话数据进行针对所述预设规则的响应处理。可选地，所述针对所述预设规则的响应处理包括以下至少之一：风控拦截、营销提醒及设备故障提醒。可选地，还包括：更新模块506，用于从所述目标存储中，删除所述相关会话数据；将所述更新的会话数据写入在所述目标存储中。可选地，所述数据获取模块503具体用于：从所述用户请求中，获取所述目标用户的用户标识；确定所述用户标识对应的目标规则引擎组件；将所述用户请求路由给所述目标规则引擎组件，并利用所述目标规则引擎组件，从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据。可选地，还包括：创建模块507，用于确定所述目标存储中是否存储有所述相关会话数据；在所述目标存储中未存储有所述相关会话数据的情况下，根据所述用户请求的请求信息，创建所述目标用户针对所述目标事件的会话数据。本发明实施例提供了一种电子设备，包括：一个或多个处理器；存储装置，用于存储一个或多个程序，当一个或多个程序被一个或多个处理器执行，使得一个或多个处理器实现上述任一实施例的方法。本发明实施例提供了一种计算机程序产品，包括计算机程序，所述计算机程序在被处理器执行时实现本发明实施例中的上述任一实施例的方法。下面参考图6，其示出了适于用来实现本发明实施例的终端设备的计算机系统600的结构示意图。图6示出的终端设备仅仅是一个示例，不应对本发明实施例的功能和使用范围带来任何限制。如图6所示，计算机系统600包括中央处理单元601，其可以根据存储在只读存储器602中的程序或者从存储部分608加载到随机访问存储器603中的程序而执行各种适当的动作和处理。在RAM 603中，还存储有系统600操作所需的各种程序和数据。CPU 601、ROM 602以及RAM 603通过总线604彼此相连。输入/输出接口605也连接至总线604。以下部件连接至I/O接口605：包括键盘、鼠标等的输入部分606；包括诸如阴极射线管、液晶显示器等以及扬声器等的输出部分607；包括硬盘等的存储部分608；以及包括诸如LAN卡、调制解调器等的网络接口卡的通信部分609。通信部分609经由诸如因特网的网络执行通信处理。驱动器610也根据需要连接至I/O接口605。可拆卸介质611，诸如磁盘、光盘、磁光盘、半导体存储器等等，根据需要安装在驱动器610上，以便于从其上读出的计算机程序根据需要被安装入存储部分608。特别地，根据本发明公开的实施例，上文参考流程图描述的过程可以被实现为计算机软件程序。例如，本发明公开的实施例包括一种计算机程序产品，其包括承载在计算机可读介质上的计算机程序，该计算机程序包含用于执行流程图所示的方法的程序代码。在这样的实施例中，该计算机程序可以通过通信部分609从网络上被下载和安装，和/或从可拆卸介质611被安装。在该计算机程序被中央处理单元601执行时，执行本发明的系统中限定的上述功能。需要说明的是，本发明所示的计算机可读介质可以是计算机可读信号介质或者计算机可读存储介质或者是上述两者的任意组合。计算机可读存储介质例如可以是——但不限于——电、磁、光、电磁、红外线、或半导体的系统、装置或器件，或者任意以上的组合。计算机可读存储介质的更具体的例子可以包括但不限于：具有一个或多个导线的电连接、便携式计算机磁盘、硬盘、随机访问存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑磁盘只读存储器、光存储器件、磁存储器件、或者上述的任意合适的组合。在本发明中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用。而在本发明中，计算机可读的信号介质可以包括在基带中或者作为载波一部分传播的数据信号，其中承载了计算机可读的程序代码。这种传播的数据信号可以采用多种形式，包括但不限于电磁信号、光信号或上述的任意合适的组合。计算机可读的信号介质还可以是计算机可读存储介质以外的任何计算机可读介质，该计算机可读介质可以发送、传播或者传输用于由指令执行系统、装置或者器件使用或者与其结合使用的程序。计算机可读介质上包含的程序代码可以用任何适当的介质传输，包括但不限于：无线、电线、光缆、RF等等，或者上述的任意合适的组合。附图中的流程图和框图，图示了根据本发明各种实施例的系统、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段、或代码的一部分，上述模块、程序段、或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个接连地表示的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图或流程图中的每个方框、以及框图或流程图中的方框的组合，可以用执行规定的功能或操作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。描述于本发明实施例中所涉及到的模块可以通过软件的方式实现，也可以通过硬件的方式来实现。所描述的模块也可以设置在处理器中，例如，可以描述为：请求接收模块、判定模块、数据获取模块、更新模块及处理模块。其中，这些模块的名称在某种情况下并不构成对该模块本身的限定，例如，请求接收模块还可以被描述为“接收目标用户针对目标事件的用户请求的模块”。作为另一方面，本发明还提供了一种计算机可读介质，该计算机可读介质可以是上述实施例中描述的设备中所包含的；也可以是单独存在，而未装配入该设备中。上述计算机可读介质承载有一个或者多个程序，当上述一个或者多个程序被一个该设备执行时，使得该设备包括：接收目标用户针对目标事件的用户请求；确定所述目标事件的时间窗口是否大于预设时长，以得到判定结果；根据所述判定结果，确定目标存储，进而从所述目标存储中获取所述目标用户针对所述目标事件的相关会话数据；将所述用户请求的会话数据写入所述相关会话数据中，生成更新的会话数据；根据所述更新的会话数据，对所述用户请求进行处理。根据本发明实施例的技术方案，确定目标事件的时间窗口是否大于预设时长，以得到判定结果。根据判定结果，确定目标存储。预设时长及目标存储都可根据需要进行设定。例如，在目标事件的时间窗口较长的情况下，确定目标存储为持久化存储，从持久化存储中获取相关会话数据。在目标事件的时间窗口较短的情况下，确定目标存储为服务器内存，从服务器内存中获取相关会话数据。相比将全量的会话的历史数据都放入服务器内存中的方式，能够减少系统所需的内存消耗，进而减少系统崩溃的风险。上述具体实施方式，并不构成对本发明保护范围的限制。本领域技术人员应该明白的是，取决于设计要求和其他因素，可以发生各种各样的修改、组合、子组合和替代。任何在本发明的精神和原则之内所作的修改、等同替换和改进等，均应包含在本发明保护范围之内。
