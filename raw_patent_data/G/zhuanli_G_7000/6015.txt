标题title
基于视频监控的交通运输图像增强方法
摘要abst
本发明涉及图像处理领域，具体涉及基于视频监控的交通运输图像增强方法，包括：获取得到各时刻亮度图像；获取第一时段亮度图像集合和第二时段亮度图像集合；根据第一时段亮度图像集合得到各时刻亮度图像的最佳亮度调整值；根据第二时段亮度图像集合得到第二时段亮度图像集合中各时刻亮度图像的最佳亮度调整值；根据各时刻亮度图像的最佳亮度调整值对各时刻亮度图像进行增强处理得到各时刻第一亮度图像，获取各时刻第一亮度图像的有效区域，对各时刻第一亮度图像进行增强处理得到各时刻第二亮度图像，根据各时刻第二亮度图像得到各时刻增强后交通运输图像，从而实现根据各时段的亮度情况对交通运输图像进行有效增强，提高交通运输图像的质量。
权利要求书clms
1.基于视频监控的交通运输图像增强方法，其特征在于，所述方法包括：获取得到各时刻交通运输图像，根据各时刻交通运输图像得到各时刻亮度图像；设置第一时段和第二时段，将第一时段中各时刻亮度图像构成的集合称为第一时段亮度图像集合，将第二时段中各时刻亮度图像构成的集合称为第二时段亮度图像集合；根据第一时段亮度图像集合得到第一时段的最佳亮度调整函数，根据第一时段亮度图像集合中各时刻亮度图像和最佳亮度调整函数得到第一时段亮度图像集合中各时刻亮度图像的最佳亮度调整值；根据第二时段亮度图像集合得到第二时段亮度图像集合中各时刻亮度图像的最佳亮度调整值；根据各时刻亮度图像的最佳亮度调整值对各时刻亮度图像进行增强处理得到各时刻第一亮度图像，获取各时刻第一亮度图像的有效区域，对各时刻第一亮度图像进行增强处理得到各时刻第二亮度图像，根据各时刻第二亮度图像得到各时刻增强后交通运输图像。2.如权利要求1所述的基于视频监控的交通运输图像增强方法，其特征在于，所述根据第一时段亮度图像集合得到第一时段的最佳亮度调整函数，包括的具体步骤为：第一时段的最佳亮度调整函数为：其中，、分别为最佳亮度调整函数的均值、方差，表示第一时段中最大亮度值，表示第一时段的各个时刻，表示第一时段亮度图像集合中各时刻亮度图像的最佳亮度调整值，exp表示以自然常数为底的指数函数。3.如权利要求1所述的基于视频监控的交通运输图像增强方法，其特征在于，所述根据第一时段亮度图像集合中各时刻亮度图像和最佳亮度调整函数得到第一时段亮度图像集合中各时刻亮度图像的最佳亮度调整值，包括的具体步骤为：将第一时段亮度图像集合中各时刻亮度图像对应的时刻代到第一时段的最佳亮度调整函数中可以得到第一时段亮度图像集合中各时刻亮度图像的最佳亮度调整值。4.如权利要求1所述的基于视频监控的交通运输图像增强方法，其特征在于，所述根据第二时段亮度图像集合得到第二时段亮度图像集合中各时刻亮度图像的最佳亮度调整值，包括的具体步骤为：对第二时段亮度图像集合中各时刻亮度图像的各像素的亮度值进行统计得到各时刻亮度图像的统计直方图，根据各时刻亮度图像的统计直方图得到各时刻亮度图像的亮度中值，根据第二时段亮度图像集合中各时刻亮度图像的亮度中值得到第二时段亮度图像集合中各时刻亮度图像的最佳亮度调整值：其中，表示第二时段亮度图像集合中各时刻亮度图像的亮度中值，表示第二时段亮度图像集合中图像的帧数，表示第二阶段亮度图像集合中各时刻亮度图像的最佳亮度调整值。5.如权利要求1所述的基于视频监控的交通运输图像增强方法，其特征在于，所述根据各时刻亮度图像的最佳亮度调整值对各时刻亮度图像进行增强处理得到各时刻第一亮度图像，增强处理包括：其中第t时刻亮度图像的亮度增强模型为：其中，为超参数，表示第t时刻亮度图像中像素处的亮度值，表示第t个时刻第一亮度图像中像素处的亮度值，表示第t个时刻亮度图像的最佳亮度调整值，exp表示以自然常数为底的指数函数，ln表示以自然常数为底的对数函数。6.如权利要求1所述的基于视频监控的交通运输图像增强方法，其特征在于，所述获取各时刻第一亮度图像的有效区域，包括的具体步骤为：人工判定得到各时刻交通运输图像中有效区域和无效区域，其中将各时刻交通运输图像中有效区域的像素标注为1，将各时刻交通运输图像中无效区域的像素标注为0，得到多个带标签的各时刻交通运输图像，将多个带标签的各时刻交通运输图像构成数据集；构建语义分割网络，网络的输入数据集中各时刻交通运输图像，网络的输出为语义分割效果图，网络训练的损失函数为交叉熵损失函数；将数据集中各时刻交通运输图像输入到语义分割网络中，完成网络训练；将各时刻的交通运输图像输入到训练完成后的语义分割网络中得到各时刻交通运输图像的语义分割图像；在各时刻第一亮度图像中获取有效区域对应的像素区域作为各时刻第一亮度图像的有效区域。7.如权利要求1所述的基于视频监控的交通运输图像增强方法，其特征在于，所述根据各时刻交通运输图像得到各时刻亮度图像，包括的具体步骤为：将各时刻交通运输图像从RGB图像转化为HIS图像，获取HIS图像的亮度I通道的图像称为各时刻亮度图像。
说明书desc
技术领域本申请涉及图像处理领域，具体涉及基于视频监控的交通运输图像增强方法。背景技术随着社会的发展交通运输越来越重要，由于车辆数目的急速增长，道路拥堵日益严重，车辆事故也经常发生，给人们日常生活以及安全构成了威胁，严重时将影响了经济发展。交通管理相关技术在这一背景下应运而生，主要对交通运输以及道路状况进行监督管理，为相关管理部门提供交通道路的全面信息，以便对其进行科学管理，从而改善交通环境，降低交通事故。交通运输管理技术主要通过信息采集技术获取交通运输图像，来对交通状况进行监督分析，进而实现管理调控，因此，交通运输图像在交通管理相关技术中起着极其重要的作用，若想从交通运输图像中准确获取有效数据，则对图像质量具有较高的要求，所以对于采集的图像数据进行相应的处理，提高图像质量，以保证提取较为准确的交通信息。因此，本发明设计一种基于视频监控的交通运输图像增强方法，通过道路视频监控设备获取交通运输图像，对交通运输图像进行区域划分，以便对不同的区域进行自适应增强，增加交通运输图像的对比度，提高图像质量。发明内容为了解决上述技术问题，本发明提供基于视频监控的交通运输图像增强方法，所述方法包括：获取得到各时刻交通运输图像，根据各时刻交通运输图像得到各时刻亮度图像；设置第一时段和第二时段，将第一时段中各时刻亮度图像构成的集合称为第一时段亮度图像集合，将第二时段中各时刻亮度图像构成的集合称为第二时段亮度图像集合；根据第一时段亮度图像集合得到第一时段的最佳亮度调整函数，根据第一时段亮度图像集合中各时刻亮度图像和最佳亮度调整函数得到第一时段亮度图像集合中各时刻亮度图像的最佳亮度调整值；根据第二时段亮度图像集合得到第二时段亮度图像集合中各时刻亮度图像的最佳亮度调整值；根据各时刻亮度图像的最佳亮度调整值对各时刻亮度图像进行增强处理得到各时刻第一亮度图像，获取各时刻第一亮度图像的有效区域，对各时刻第一亮度图像进行增强处理得到各时刻第二亮度图像，根据各时刻第二亮度图像得到各时刻增强后交通运输图像。优选的，所述根据第一时段亮度图像集合得到第一时段的最佳亮度调整函数，包括的具体步骤为：第一时段的最佳亮度调整函数为：/＞其中，、/＞分别为最佳亮度调整函数的均值、方差，/＞表示第一时段中最大亮度值，/＞表示第一时段的各个时刻，/＞表示第一时段亮度图像集合中各时刻亮度图像的最佳亮度调整值，exp表示以自然常数为底的指数函数。优选的，所述根据第一时段亮度图像集合中各时刻亮度图像和最佳亮度调整函数得到第一时段亮度图像集合中各时刻亮度图像的最佳亮度调整值，包括的具体步骤为：将第一时段亮度图像集合中各时刻亮度图像对应的时刻代到第一时段的最佳亮度调整函数中可以得到第一时段亮度图像集合中各时刻亮度图像的最佳亮度调整值。优选的，所述根据第二时段亮度图像集合得到第二时段亮度图像集合中各时刻亮度图像的最佳亮度调整值，包括的具体步骤为：对第二时段亮度图像集合中各时刻亮度图像的各像素的亮度值进行统计得到各时刻亮度图像的统计直方图，根据各时刻亮度图像的统计直方图得到各时刻亮度图像的亮度中值，根据第二时段亮度图像集合中各时刻亮度图像的亮度中值得到第二时段亮度图像集合中各时刻亮度图像的最佳亮度调整值：其中，表示第二时段亮度图像集合中各时刻亮度图像的亮度中值，/＞表示第二时段亮度图像集合中图像的帧数，/＞表示第二阶段亮度图像集合中各时刻亮度图像的最佳亮度调整值。优选的，所述根据各时刻亮度图像的最佳亮度调整值对各时刻亮度图像进行增强处理得到各时刻第一亮度图像，增强处理包括：其中第t时刻亮度图像的亮度增强模型为：其中，为超参数，/＞表示第t时刻亮度图像中像素处的亮度值，/＞表示第t个时刻第一亮度图像中像素处的亮度值，/＞表示第t个时刻亮度图像的最佳亮度调整值，exp表示以自然常数为底的指数函数，ln表示以自然常数为底的对数函数。优选的，所述获取各时刻第一亮度图像的有效区域，包括的具体步骤为：人工判定得到各时刻交通运输图像中有效区域和无效区域，其中将各时刻交通运输图像中有效区域的像素标注为1，将各时刻交通运输图像中无效区域的像素标注为0，得到多个带标签的各时刻交通运输图像，将多个带标签的各时刻交通运输图像构成数据集；构建语义分割网络，网络的输入数据集中各时刻交通运输图像，网络的输出为语义分割效果图，网络训练的损失函数为交叉熵损失函数；将数据集中各时刻交通运输图像输入到语义分割网络中，完成网络训练；将各时刻的交通运输图像输入到训练完成后的语义分割网络中得到各时刻交通运输图像的语义分割图像；在各时刻第一亮度图像中获取有效区域对应的像素区域作为各时刻第一亮度图像的有效区域。优选的，所述根据各时刻交通运输图像得到各时刻亮度图像，包括的具体步骤为：将各时刻交通运输图像从RGB图像转化为HIS图像，获取HIS图像的亮度I通道的图像称为各时刻亮度图。本发明实施例至少具有如下有益效果：通过多重增强过程可有效提高交通运输图像的增强效果，通过自适应获取不同时刻采集图像的最佳亮度调整值，实现对亮度I通道图像的整体亮度信息进行自适应调整，相比传统不考虑交通运输图像的采集时间，直接对图像进行固定手段的增强处理方法而言，本实施例能够实现自适应增强效果，更加针对性的对图像进行增强处理，同时，基于交通运输图像中的内容信息，对有效区域以及无效区域进行划分，对有效区域再次进行增强处理，提高有效区域的增强效果，保证有效区域信息的准确性，以便为相关部门提供精确的数据信息。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明提供的基于视频监控的交通运输图像增强方法的流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的基于视频监控的交通运输图像增强方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的基于视频监控的交通运输图像增强方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的基于视频监控的交通运输图像增强方法的步骤流程图，该方法包括以下步骤：步骤S001，采集得到各时刻交通运输图像和各时刻亮度图像。1、采集得到交通运输图像：本实施例通过道路视频监控设备获取交通运输视频，交通运输视频中各时刻的图像称为各时刻交通运输图像。所述道路视频监控设备可以是现有的道路摄像头，也可以是实施者进行安装部署的道路监控设备，具体的方式实施者可自行设置，该过程是为了获取交通运输图像，以便对交通运输图像进行增强处理，提高交通运输图像质量。2、获取各交通运输图像的亮度图像：将各时刻交通运输图像从RGB图像转化为HIS图像，获取HIS图像的亮度I通道的图像称为各时刻亮度图像。步骤S002，计算得到各时刻亮度图像的最佳亮度调整值。道路视频监控设备是进行实时监测的，所采集的图像也是连续多帧的，在对图像进行处理时，考虑到不同自然亮度下所获取的图像亮度本身就有一定的差异，如果对图像进行亮度调整时，若设置单一固定的最佳亮度调整值，将会使得在不同自然亮度下采集的交通运输图像的处理效果存在较大差异，因此，本实施例将根据一天当中各时刻的亮度分布情况，来对不同时刻采集的交通运输图像的最佳亮度调整值进行自适应设置。将T1到T2之间的时段称为第一时段，其中T1取早晨6:00，T2取18:00；将一天的剩余时段称为第二时段，第一时段和第二时段内均会采集到多张交通运输图像，多张交通运输图像就会得到多张亮度图像。1、设置第一时段中各时刻亮度图像的最佳亮度调整值：在所有亮度图像中获取第一时段内的亮度图像得到第一时段亮度图像集合；对于早晨6:00到晚上18:00自然光照呈现先递增后递减的现象，即第一阶段的每个时刻的亮度不同，因而无法利用单一固定的亮度调整值对第一阶段的不同时刻的交通运输图像进行增强处理；同时第一阶段的每个时刻的亮度变化呈现高斯分布特征，因而利用高斯模型来构建第一时段的最佳亮度调整函数，具体如下：其中，，/＞分别为最佳亮度调整函数的均值、方差，实施者可根据需求对其进行设定，本实施例中均值/＞取第一时段中的最大亮度值对应的时刻12，通常而言，正午是阳光最强的时候，此刻亮度最大，本实施例中取12点为正午时间，因而将均值/＞设置为12；方差/＞取，因为本实施例考虑到3sigma原则，即高斯函数数值分布在/＞中的概率为0.9974，因而该范围包含了大部分的高斯函数值，本实施例将T1到T2之间的第一时间段与范围/＞对应，即/＞，因而，/＞表示第一时段中最大亮度值，即12:00时亮度图像的所有像素的亮度均值，/＞表示第一时段的各个时刻，/＞表示第一时段亮度图像集合中各时刻亮度图像的最佳亮度调整值，exp表示以自然常数为底的指数函数。将第一时段亮度图像集合中各时刻亮度图像对应的时刻带入到第一时段的最佳亮度调整函数中可以得到第一时段亮度图像集合中各时刻亮度图像的最佳亮度调整值。2、设置第二时段中各时刻亮度图像的最佳亮度调整值：正常情况下由于晚上的亮度为灯光亮度，灯光亮度值是固定的，因此，本实施例将第二时段中各时刻亮度图像的最佳亮度调整值设定为一个固定值，第二时段内各时刻亮度图像的最佳连读调整值的设置方法如下：在第二时段的所有亮度图像中选取T帧亮度图像，得到第二时段亮度图像集合，本实施例中 T取100，其他实施例中实施者可根据实际设置，需要说明的是所选100帧各时刻亮度图像应尽量的多涵盖第二时段内的各个时间点；对第二时段亮度图像集合中各时刻亮度图像的各像素的亮度值进行统计得到各时刻亮度图像的统计直方图，根据各时刻亮度图像的统计直方图得到各时刻亮度图像的亮度中值，亮度中值能够体现各时刻亮度图像的主要亮度分布，可避免图像中的过亮以及过暗区域，根据第二时段亮度图像集合中各时刻亮度图像的亮度中值得到第二时段亮度图像集合中各时刻亮度图像的最佳亮度调整值：其中，表示第二时段亮度图像集合中各时刻亮度图像的亮度中值，/＞表示第二时段亮度图像集合中图像的帧数，/＞表示第二阶段亮度图像集合中各时刻亮度图像的最佳亮度调整值。至此得到各时刻亮度图像的最佳亮度调整值，在确定各时刻亮度图像的最佳亮度调整值时，将一天分为两个时段，其中考虑到第一时段的亮度分布服从高斯分布，因而基于此构建了第一时段的最佳亮度调整函数，利用第一时段的最佳亮度调整函数得到第一时段亮度图像集合中各时刻亮度图像的最佳亮度调整值；考虑到第二时段的亮度值为固定不变的，因而根据第二时段亮度图像集合中各时刻亮度图像的亮度中值得到第二时段亮度图像集合中各时刻亮度图像的最佳亮度调整值。步骤S003，根据各时刻亮度图像的最佳亮度调整值对各时刻亮度图像进行增强处理得到各时刻第一亮度图像。为了提高各交通运输图像的质量需对各交通运输图像进行增强处理。根据各时刻的最佳亮度值进行图像增强能够做到自适应增强效果，因为每个时刻所采集的图像的亮度信息是不固定的，各时刻交通运输图像之间就会存在一定的亮度差异，如果对不同时刻所采集的图像全部采用单一的增强方法会造成增强效果过度或者增强效果不明显的问题，因而本实施例提供一种增强模型，利用该增强模型可实现根据不同时刻图像的最佳亮度调整值对各时刻亮度图像进行自适应增强。根据亮度增强模型对各时刻亮度图像进行增强处理：为了便于描述，将第一时段亮度图像集合中各时刻亮度图像的最佳亮度调整值和第二时段亮度图像集合中各时刻亮度图像的最佳亮度调整值统称为各时刻亮度图像的最佳亮度调整值。为了提高交通运输图像的质量，需根据各时刻亮度图像的最佳亮度调整值对各时刻亮度图像进行自适应增强处理得到各时刻第一亮度图像，其中将亮度图像中亮度值高于最佳亮度调整值的像素点进行相应的亮度减弱处理，将亮度图像中亮度值低于最佳亮度调整值的像素点进行亮度增强处理，使得亮度图像的整体亮度均值接近最佳亮度调整值，使得图像的亮度均衡化，其中第t时刻亮度图像的亮度增强模型为：其中，分别为实施者可自行设定的超参数，用于控制像素点的亮度增强以及减弱的程度，本实施例中/＞取/＞取/＞，其他实施例中，实施者可根据实际设置，/＞表示第t时刻亮度图像中像素处的亮度值，/＞表示第t个时刻第一亮度图像中像素处的亮度值，/＞表示第t个时刻亮度图像的最佳亮度调整值，式中为大于1的亮度递增系数，用于将亮度图像中低于最佳亮度调整值/＞的像素点进行亮度增强处理，式中/＞为小于1的亮度增强系数，用于对亮度值高于最佳亮度调整值/＞的像素点进行亮度减弱处理，通过本实施例中亮度增强模型可实现对各时刻亮度图像进行全面的亮度均衡化，使得个时刻第一亮度图像的整体亮度趋于最佳亮度调整值；exp表示以自然常数为底的指数函数，ln表示以自然常数为底的对数函数。利用该亮度增强模型对各时刻亮度图像进行增强处理得到各时刻第一亮度图像。步骤S004，获取各时刻第一亮度图像的有效区域，对各时刻第一亮度图像的有效区域进行增强处理得到各时刻增强后交通运输图像。为了避免步骤S003中增强方法导致的亮度不连续和过度增强问题，需对各时刻第一亮度图像进一步增强处理。考虑到所采集的图像中包括多种多样的信息，其中有大部分为背景等无效信息，对于该类型的无效信息不需要对其进行进一步的增强处理，而对于图像中的有效信息，例如车辆、车牌、路面情况等信息，本实施例将对其进行进一步的增强处理，提高有效信息的显著性。获取各时刻第一亮度图像的有效区域：构建数据集：人工判定得到各时刻交通运输图像中有效区域和无效区域，其中将各时刻交通运输图像中有效区域的像素标注为1，将各时刻交通运输图像中无效区域的像素标注为0，通过该方式完成交通运输视频中各时刻交通运输图像的标注工作，得到多个带标签的各时刻交通运输图像，将多个带标签的各时刻交通运输图像构成数据集，需要说明的是有效区域以及无效区域是实施者根据情况自行设定的，比如：本实施例中将各时刻交通运输图像中车辆、车牌、路面以及道路护栏对应的像素区域作为有效区域，其他区域作为无效区域。构建语义分割网络，网络的输入数据集中各时刻交通运输图像，网络的输出为语义分割效果图，网络训练的损失函数为交叉熵损失函数。将数据集中各时刻交通运输图像输入到语义分割网络中，完成网络训练。将各时刻的交通运输图像输入到训练完成后的语义分割网络中得到各时刻交通运输图像的语义分割图像。各时刻交通运输图像的语义分割图像中像素值为1的区域为有效区域，在各时刻第一亮度图像中获取有效区域对应的像素区域作为各时刻第一亮度图像的有效区域。利用限制对比度的自适应直方图均衡化对各时刻第一亮度图像的有效区域进行增强处理得到各时刻第二亮度图像。利用各时刻第二亮度图像、H通道和S通道图像进行颜色转换得到各时刻增强后的RGB交通运输图像。综上所述，本发明实施例提供了基于视频监控的交通运输图像增强方法，通过多重增强过程可有效提高交通运输图像的增强效果，通过自适应获取不同时刻采集图像的最佳亮度调整值，实现对亮度I通道图像的整体亮度信息进行自适应调整，相比传统不考虑交通运输图像的采集时间，直接对图像进行固定手段的增强处理方法而言，本实施例能够实现自适应增强效果，更加针对性的对图像进行增强处理，同时，基于交通运输图像中的内容信息，对有效区域以及无效区域进行划分，对有效区域再次进行增强处理，提高有效区域的增强效果，保证有效区域信息的准确性，以便为相关部门提供精确的数据信息。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。且上述对本说明书特定实施例进行了描述。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
