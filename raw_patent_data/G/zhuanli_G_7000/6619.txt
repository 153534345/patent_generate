标题title
一种基于物联网的虚拟家装设计平台
摘要abst
本发明公开了一种基于物联网的虚拟家装设计平台，包括物联网单元、输入单元、数据库单元、工具单元和设计单元；物联网单元，用于通过读取协议头特征判定并获取智能家居设备的属性表；输入单元，用于获取用户的交互信息和房屋的户型数据；数据库单元包括智能设备模型库和房屋户型数据库；工具单元包括3D建模软件插件和3D建模工具；设计单元，用于根据交互信息、数据库单元中的数据和预设的设计模型得出设计方案；其效果是：通过数字化流程，减少家装设计从营销、设计、到供应链的时间，并且将家装的物理空间和智能家居结合起来，进行融合与协调统一，强化了智能化部署的精确性，同时也大幅提升了智能家居的服务水平。
权利要求书clms
1.一种基于物联网的虚拟家装设计平台，其特征在于，包括物联网单元、输入单元、数据库单元、工具单元和设计单元；所述物联网单元，用于通过读取协议头特征判定并获取智能家居设备的属性表；所述输入单元，用于获取用户的交互信息和房屋的户型数据；其中，所述交互信息包括客户的预算、喜好、客户的3D户型图和智能设备种类；所述数据库单元包括智能设备模型库和房屋户型数据库；其中，所述智能设备模型库根据所获取的智能家居设备的属性表建立，并分别为每个设备建立一个集成模型；所述房屋户型数据库根据所获取的户型数据建立，并生成对应的空间模型；所述工具单元包括3D建模软件插件和3D建模工具；其中，所述3D建模工具，用于提供轻量级的3D建模和动画设计功能，并将设计后的模型与所述智能设备模型库中的智能家居设备关联；所述3D建模软件插件，用于提供对应的插件工具，通过插件将所述3D建模和设计的动画上传至所述智能设备模型库，并完成与所述智能设备模型库中的智能家居设备关联；所述设计单元，用于根据所述用户的交互信息、所述数据库单元中的数据和预设的设计模型得出设计方案；其中，所述设计方案包括各智能设备在户型中的具体安装位置以及这些智能设备组合出的智慧复合功能。2.根据权利要求1所述的一种基于物联网的虚拟家装设计平台，其特征在于，所述平台还包括显示单元，所述显示单元用于将所述设计方案通过WEBGL和WEBVR技术，渲染和展示出智能家居设备在对应户型的房屋中的三维实景效果，使得客户可通过智能设备，大屏投影设备或VR设备查看。3.根据权利要求1或2所述的一种基于物联网的虚拟家装设计平台，其特征在于，所述根据所述用户的交互信息、所述数据库单元中的数据和预设的设计模型得出设计方案，具体包括：根据所述客户的预算、喜好得出对应的套餐；然后从所述数据库单元中拉取该套餐下所包含的设备清单和对应的户型空间，以及安装约束规则，并将所有设备清单中的集成模型置入户型空间中对应的空间模型中，并准备计算；其中，所述安装约束规则是基于基本物理原则和行业施工经验定义的基础设计规则；在安装约束规则范围内，为每一个设备找到在集成模型内的平衡点坐标，该平衡点根据所述设计模型得出，并确定置入坐标，重复如上过程直到所有设备都确定，从而生成所述设计方案。4.根据权利要求3所述的一种基于物联网的虚拟家装设计平台，其特征在于，生成所述设计方案时，还根据所得出的套餐，进行精简化，并列出冲突设备；若需要增加设备，优先从所述冲突设备中获取，其次从所述智能设备模型库中获取。5.根据权利要求4所述的一种基于物联网的虚拟家装设计平台，其特征在于，所述设计模型基于卷积神经网络并通过以下步骤得出：获取样本数据，并根据其中一部分数据建立测试数据T，另一部分作为训练数据Y，当做样本集；其中，所述测试数据中包含了不同设备和户型的对应关系，以及设备在户型内分布的权重点云热点图；所述点云分为两个区域，一个是非零权重区域，另一个是零权重区域；将所述样本集，设置初始网络权重W，并将相应训练数据Y输入卷积网络；通过多次尝试卷积核深度，确定初始配置，并将Y内的户型结构Y1和设备群组Y2共轭数据组输入进行特征提取；在特征提取过程中，需要以权重图中非零部分为中心，并忽略权重为零的部分；在非零权重的户型热点区域，结合输入的Y数据组，进行pooling操作，获得池化输出P；将P导入到Classifier，并输出结果OUTPUT；比对所述OUTPUT和测试数据T，发现positive或negative反馈，并确定损失函数delta值；将delta传回全连接层，计算网络内分布权重因子的分别误差delta，并查出产生的误差的上一级神经元连接；根据所述delta函数，输入回卷积层，并进行权重更新，获取更新后的识别模型；再将所述样本集输入所述更新后的识别模型，确定更新后的识别结果，根据所述标定结果及所述更新后的识别结果确定更新后的损失函数，并调整训练参数，重复上述步骤，直至所述更新后的损失函数收敛，从而得出所述设计模型。6.根据权利要求5所述的一种基于物联网的虚拟家装设计平台，其特征在于，所述样本数据包括户型结构图，设备类型，设备功能，设备性能以及户型图和各种智能设备在户型中的位置坐标；其中户型图的标准要求为:二值化灰度图像；清晰的墙体界线；门、窗位置使用统一的标注方式；训练数据Y要求有3D形式坐标，带有坐标参数。7.根据权利要求6所述的一种基于物联网的虚拟家装设计平台，其特征在于，所述设计单元包括原子场景库，所述原子场景库预置有设计方案，这些方案中包括需要的设备清单，调用的具体设备属性功能和相应制式，以及设备联网方式与场景的动画描述。
说明书desc
技术领域本发明涉及家装设计技术领域，具体涉及一种基于物联网的虚拟家装设计平台。背景技术现有的家装设计，一般是在物理空间内进行美化设计，其只针对物理空间本身；但随着智能家居的普遍应用，未来物理空间的智能化设计将是发展的趋势。然而，物理空间的智能化设计是个复杂过程，不但牵涉到物理本身的美观度、模块化，同时还包含智能化设备互联互通的稳定性，布局的合理性。目前，家装存在的一些设计方案平台，主要是依托设计师的设计能力，在网上提供一部分建模模块，降低了设计师在网上的设计成本，但在整体面对智能化空间时，由于完全分属不同领域，导致现有的家装设计师完全无法进行智能方案的设计，仍然更多的是线下弱电设计师靠经验和A4纸进行设计，没有办法进行数字化设计办公。这个因为，不同领域的基础背景完全不同，导致无法在同一个框架内进行融合，同时，因为没有同时专注于家装和智能家居的设计工具，这就导致两者互不相容，没有办法进行协调统一。发明内容为了解决上述问题，本发明的目的是提供一种基于物联网的虚拟家装设计平台，以克服现有技术中家装和智能家居无法在同一个框架内进行融合的缺陷。本发明所提供的一种技术方案为：一种基于物联网的虚拟家装设计平台，包括物联网单元、输入单元、数据库单元、工具单元和设计单元；所述物联网单元，用于通过读取协议头特征判定并获取智能家居设备的属性表；所述输入单元，用于获取用户的交互信息和房屋的户型数据；其中，所述交互信息包括客户的预算、喜好、客户的3D户型图和智能设备种类；所述数据库单元包括智能设备模型库和房屋户型数据库；其中，所述智能设备模型库根据所获取的智能家居设备的属性表建立，并分别为每个设备建立一个集成模型；所述房屋户型数据库根据所获取的户型数据建立，并生成对应的空间模型；所述工具单元包括3D建模软件插件和3D建模工具；其中，所述3D建模工具，用于提供轻量级的3D建模和动画设计功能，并将设计后的模型与所述智能设备模型库中的智能家居设备关联；所述3D建模软件插件，用于提供对应的插件工具，通过插件将所述3D建模和设计的动画上传至所述智能设备模型库，并完成与所述智能设备模型库中的智能家居设备关联；所述设计单元，用于根据所述用户的交互信息、所述数据库单元中的数据和预设的设计模型得出设计方案；其中，所述设计方案包括各智能设备在户型中的具体安装位置以及这些智能设备组合出的智慧复合功能。优选的，所述平台还包括显示单元，所述显示单元用于将所述设计方案通过WEBGL和WEBVR技术，渲染和展示出智能家居设备在对应户型的房屋中的三维实景效果，使得客户可通过智能设备，大屏投影设备或VR设备查看。优选的，所述根据所述用户的交互信息、所述数据库单元中的数据和预设的设计模型得出设计方案，具体包括：根据所述客户的预算、喜好得出对应的套餐；然后从所述数据库单元中拉取该套餐下所包含的设备清单和对应的户型空间，以及安装约束规则，并将所有设备清单中的集成模型置入户型空间中对应的空间模型中，并准备计算；其中，所述安装约束规则是基于基本物理原则和行业施工经验定义的基础设计规则；在安装约束规则范围内，为每一个设备找到在集成模型内的平衡点坐标，该平衡点根据所述设计模型得出，并确定置入坐标，重复如上过程直到所有设备都确定，从而生成所述设计方案。优选的，生成所述设计方案时，还根据所得出的套餐，进行精简化，并列出冲突设备；若需要增加设备，优先从所述冲突设备中获取，其次从所述智能设备模型库中获取。优选的，所述设计模型基于卷积神经网络并通过以下步骤得出：获取样本数据，并根据其中一部分数据建立测试数据T，另一部分作为训练数据Y，当做样本集；其中，所述测试数据中包含了不同设备和户型的对应关系，以及设备在户型内分布的权重点云热点图；所述点云分为两个区域，一个是非零权重区域，另一个是零权重区域；将所述样本集，设置初始网络权重W，并将相应训练数据Y输入卷积网络；通过多次尝试卷积核深度，确定初始配置，并将Y内的户型结构Y1和设备群组Y2共轭数据组输入进行特征提取；在特征提取过程中，需要以权重图中非零部分为中心，并忽略权重为零的部分；在非零权重的户型热点区域，结合输入的Y数据组，进行pooling操作，获得池化输出P；将P导入到Classifier，并输出结果OUTPUT；比对所述OUTPUT和测试数据T，发现positive或negative反馈，并确定损失函数delta值；将delta传回全连接层，计算网络内分布权重因子的分别误差delta，并查出产生的误差的上一级神经元连接；根据所述delta函数，输入回卷积层，并进行权重更新，获取更新后的识别模型；再将所述样本集输入所述更新后的识别模型，确定更新后的识别结果，根据所述标定结果及所述更新后的识别结果确定更新后的损失函数，并调整训练参数，重复上述步骤，直至所述更新后的损失函数收敛，从而得出所述设计模型。优选的，所述样本数据包括户型结构图，设备类型，设备功能，设备性能以及户型图和各种智能设备在户型中的位置坐标；其中户型图的标准要求为:二值化灰度图像；清晰的墙体界线；门、窗位置使用统一的标注方式；训练数据Y要求有3D形式坐标，带有坐标参数。优选的，所述设计单元包括原子场景库，所述原子场景库预置有设计方案，这些方案中包括需要的设备清单，调用的具体设备属性功能和相应制式，以及设备联网方式与场景的动画描述。采用上述技术方案，本发明提出的一种基于物联网的虚拟家装设计平台，通过数字化流程，大大减少家装设计从营销、设计、到供应链的时间，减少智能化服务场景设计师的参与，并且将家装的物理空间和智能家居结合起来，进行数字化设计，并在一个框架内进行融合与协调统一，强化了智能化部署的精确性，同时也大幅提升了智能家居的服务水平。附图说明图1为本发明实施例所提供的一种基于物联网的虚拟家装设计平台的结构示意图。具体实施方式为了使本发明要解决的技术问题、技术方案和优点更加清楚，下面将结合附图及具体实施例进行详细描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。以下实施例用于说明本发明，但不用来限制本发明的范围。如图1所示，本发明实施例提供了一种基于物联网的虚拟家装设计平台，包括物联网单元、输入单元、数据库单元、工具单元和设计单元；所述物联网单元，用于通过读取协议头特征判定并获取智能家居设备的属性表。具体地，基于IOT设备，上传智能家居设备的属性表，智能家居设备在工厂出厂的时候烧录有用于定义设备及其相关信息的内存，内置有相应的属性表；通过Zigbee/WiFi/BLE等协议，查询协议头特征并判定相应设备的属性表，从而完成DDL，即每个房间必须符合智慧场景执行所需的所有设备要素，包括未来可能会被剔除的各种共享设备。根据市场喜好，物理特性，厂商质量等多种社会因素考量，针对某个户型选择带有符合场景特性的某个设备功能和性能的设备群组；由于在不同的户型中，会有同一类设备满足；以及在一个户型中的某个局部，有多种设备满足，此时会同时给出标注；剩余的点云区域块为零权重区域，比如，大门门锁不会出现在大门以外任何区域，并记录相应摆放的位置坐标xyz点云，所以点云分为两个区域，一个是非零权重区域，一个是零权重区域；引入权重点云的原因是，智能设备通信与空间排布上相关但又存在微观上的排布范围，比如可视猫眼在宏观上，不可能装在天花板或者地板上，所以可视猫眼的权重点云中，位于这些空间部分的权重为0，在门的轴承部分也是0，但在门的开合部分会是1，但这部分的1存在一定的点云范围，比如可以装在门靠上的地方，也可以靠下面的地方，都是物理状况下猫眼的合理位置。二，其次是将训练数据导入识别模型进行权重更新将所述样本集，设置初始网络权重W，并将相应训练数据组Y输入卷积网络；其中，Y数据组的格式为通过多次尝试卷积核深度，确定初始配置，这些初始设置可先通过经验设置，不同的初始设置影响的是工作量而非结果准确度，并将Y内的户型结构Y1和设备群组Y2共轭数据组输入进行特征提取；在特征提取过程中，需要以权重图中非零部分为中心，并忽略权重为零的部分；在非零权重的户型热点区域，结合输入的Y数据组，进行pooling操作，获得池化输出P；即，根据设备信号属性，去标注设备在户型3D空间内的一个有效点云，去计算点云内设备的平均位置，然后下次有新的带标准的户型3D输入时，去预判这个设备应该出现在这个3D空间内的哪个有效点云内并在平均位置出现。池化输出P通过在非权重为0的点云处获得相对稳定的特征函数，并将P导入到Classifier，通过将相应的特征标记和原始图片进行整合，并输出结果3D模型OUTPUT；比对所述通过预测标注的OUTPUT 3D模型和通过人工标注的测试数据T 3D模型，发现positive或negative反馈，并确定损失函数delta，损失函数在Hinge损失函数和Log损失函数之间根据实际经验进行选择。将delta传回全连接层，计算网络内分布权重因子的分别误差delta，并查出产生的误差的上一级神经元连接；根据所述delta函数，输入回卷积层，并进行权重更新，获取更新后的识别模型；再将所述样本集输入所述更新后的识别模型，确定更新后的识别结果，根据所述标定结果及所述更新后的识别结果确定更新后的损失函数，重复上述步骤，直至所述更新后的损失函数收敛，从而得出所述识别模型。三，最后在应用时首先通过如上产生的识别模型，系统进行根据最新的训练结果进行设备的排布，并产生相应的排布点位，并同时结合平台已有的设备共享属性进行最终精简化。具体地，由于智能家居网络多种拓扑，例如，星型网络，总线网络，网状网络等，所以当还原到分房间排布时，存在共享设备问题；比如网关是全屋共享设备，往往放在客厅，但由于每个房间的场景都需要经过网关中转，但又不能在计算每个房间时，将网关每次叠加，所以引擎应具备自动将共享设备进行归一化的能力，或者在网状网络下，比如Zigbee协议下，设备之间通过多次跳跃完成信号传输，也会存在设备共享和中继的问题，所以进一步地，根据房间大小的信号强弱适当自动排布多个网关或中继器，经过精简后的设备组，才能够比较准确地反映最终用户购买的设备清单。所以，根据所得出的套餐，进行精简化是必要的，并列出冲突设备；冲突设备主要包含重复设备；若需要增加设备，优先从所述冲突设备中获取，其次从所述智能设备模型库中获取。其中，精简化过程包括两个核心过程，第一是根据后台设备属性进行的主动筛选，第二是根据场景体验闭环的设备补齐。1.根据后台设备属性进行自动筛选。在每个SRU内，由于是以最大化考虑了设备的排布，所以从全局看可能会存在冗余，所以那些有共享能力的设备以及开放共享开关的设备，引擎在按房间以“冗余”方式进行配置设备清单，即扫描清单中的可共享设备，当可共享设备大于1时，进行减除，但如果分散在不同空间楼层的，则不减除。2.根据场景体验闭环的设备补齐。在单空间内的设备需要保障基础的元素平衡，主要分为两类模式，一类是自动模式，一类是手动模式，其中自动模式包括触发器和执行器的存在，手动模式必须有个执行器。系统检测到在自动/手动模式下，缺少执行器或触发器等模式内必需元素时，通过前台提示销售或者用户进行输入补齐。实施时，所述样本数据包括户型结构图，设备类型，设备功能，设备性能以及户型图和各种智能设备在户型中的位置坐标；其中户型图的标准要求为:二值化灰度图像；清晰的墙体界线；门、窗位置使用统一的标注方式；训练数据Y要求有3D形式坐标，带有坐标参数。需要说明的是，在设计完成后，所述设计方案的输出为一组可通过互联网发布和传输的文件数据，其中包含方案对应的户型图、设备清单、设备在房屋中的安装位置和智慧场景清单；典型的数据结构描述如下:客厅:设备:大灯:位置:X0.2,Y0.2,Z0.1数量:1设备ID:100111设备模型文件:MOD1.glb动画清单:开灯玄关:设备:传感器:位置:X0.1,Y0.1,Z0.1数量:1设备ID:1000111设备模型文件:MOD2.glb场景动画描述:当玄关中的传感器接收到信号后,客厅中的大灯执行开灯动画。上述方案，通过数字化流程，大大减少家装设计从营销、设计、到供应链的时间，减少智能化服务场景设计师的参与，并且将家装的物理空间和智能家居结合起来，进行数字化设计，并在一个框架内进行融合与协调统一，强化了智能化部署的精确性，同时也大幅提升了智能家居的服务水平。在另一实施例中，为便于直观的进行方案输出和优化，以及更加直观地实现销售转化，渲染和展示出智能家居设备在对应户型的房屋中的三维实景效果；所述平台还包括显示单元，所述显示单元用于将所述设计方案通过WEBGL和WEBVR技术，渲染和展示出智能家居设备在对应户型的房屋中的三维实景效果，使得客户可通过智能设备，大屏投影设备或VR设备查看。进一步地，所述设计单元包括原子场景库，所述原子场景库预置有设计方案，这些方案中包括需要的设备清单，调用的具体设备属性功能和相应制式，以及设备联网方式与场景的动画描述。原子场景库是基于行业专家经验设计的预置设计方案,例如，回家场景下的开门自动打开客厅灯；这些方案中包括需要的设备清单，调用的具体设备属性功能和相应制式，设备联网方式，场景的动画描述；这样便于直接进行调用展示，进一步节约设计时间。在本申请所提供的实施例中，应该理解到，所揭露的单元，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另外，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口、装置或单元的间接耦合或通信连接，也可以是电的，机械的或其它的形式连接。以上所述，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到各种等效的修改或替换，这些修改或替换都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以权利要求的保护范围为准。
