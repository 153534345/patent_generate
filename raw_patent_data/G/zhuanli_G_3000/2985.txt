标题title
基于多传感器信像映射的阀门泄漏故障诊断方法
摘要abst
本发明涉及阀门管路泄漏故障诊断技术领域,特别是一种基于多传感器信像映射的阀门泄漏故障诊断方法。包括以下步骤，S1、数据采集与预处理；S2、搭建多通道多尺度卷积神经网络模型；S3、利用步骤S2训练得到的多通道多尺度卷积神经网络模型对阀门泄漏故障进行诊断。其兼顾数据级融合与特征级融合两种融合方式，避免人为因素与专家经验对阀门泄漏故障诊断的影响，在充分保留原始故障信息的同时，深度挖掘泄漏故障灰度图像特征，通过融合来自多个传感器的故障信息，最大限度的提高故障诊断精度，实现端到端的阀门泄漏故障诊断。
权利要求书clms
1.一种基于多传感器信像映射的阀门泄漏故障诊断方法，其特征在于，包括以下步骤，S1、数据采集与预处理；使用声发射传感器分别采集阀门内漏故障、外漏故障以及无泄漏时的声发射信号，对采集到的信号添加标签，分别得到标记为阀门微型内漏、微型外漏、常规内漏、常规外漏和无泄漏五种标签的时域信号样本数据，通过信像映射方法将上述声发射时域信号转换为灰度图像；S2、搭建多通道多尺度卷积神经网络模型；通过步骤S1得到的灰度图像数据集训练多通道多尺度卷积神经网络，模型收敛后保存模型；S3、利用步骤S2训练得到的多通道多尺度卷积神经网络模型对阀门泄漏故障进行诊断。2.根据权利要求1所述的基于多传感器信像映射的阀门泄漏故障诊断方法，其特征在于，步骤S1中，搭建阀门泄漏模拟实验台，在泄漏阀门的上游和下游分别各布置两个声发射传感器；将泄漏流量为0-20L/min之间采集到的声发射信号定义为微型泄漏，将泄漏流量为20-40L/min之间采集到的声发射信号定义为常规泄漏。3.根据权利要求2所述的基于多传感器信像映射的阀门泄漏故障诊断方法，其特征在于，步骤S1中的信像映射方法包括以下步骤，S1.1、对声发射时域信号切片，切片长度为M2；S1.2、将切片后的时域信号归一化到之间，进而对归一化后的信号进行取整，为行号，/＞为列号，；式中，/＞表示时域信号幅值；/＞表示灰度图像的像素值，函数为取整函数，通过四舍五入的方式取距离归一化信号值最近的整数值，依次填满像素矩阵，获得大小为M×M的灰度图像矩阵，像素值为0到255；S1.3、对来自不同传感器的灰度图像矩阵进行数据级融合。4.根据权利要求3所述的基于多传感器信像映射的阀门泄漏故障诊断方法，其特征在于，步骤S1.3中，将位于泄漏阀门上游的第一声发射传感器和第二声发射传感器的灰度图像矩阵进行数据级融合处理：对应于每个像素位置，分别从第一声发射传感器和第二声发射传感器的灰度图像中取出对应位置的像素值/＞和/＞，；将赋值给S12在/＞处的像素值，重复上述步骤，遍历所有像素点；将位于泄漏阀门下游的第三声发射传感器和第四声发射传感器的灰度图像进行数据级融合处理：对应于每个像素位置，分别从第三声发射传感器和第四声发射传感器的灰度图像中取出对应位置的像素值/＞和/＞，；将赋值给S34在/＞处的像素值，重复上述步骤，遍历所有像素点。5.根据权利要求1所述的基于多传感器信像映射的阀门泄漏故障诊断方法，其特征在于，步骤S2中多通道多尺度卷积神经网络模型的网络结构包括以下流程，S2.1、通过“卷积-池化-卷积”提取灰度图像S12和S34的深度特征：以灰度图像S12作为输入，利用16个大小为3×3的卷积核对其进行卷积操作；利用大小为2×2的池化核进行最大池化以减少参数量；最后，再利用16个大小为3×3的卷积核对池化后的特征图进行卷积操作，得到一个16层的特征图；与此同时，在另一个通道中，以灰度图像S34作为输入，利用16个大小为3×3的卷积核对其进行卷积操作；利用大小为2×2的池化核进行最大池化以减少参数量；最后，再利用16个大小为3×3的卷积核对池化后的特征图进行卷积操作，得到一个16层的特征图；将两个通道中经过“卷积-池化-卷积”得到的特征图通过深度连接层在深度方向上进行连接，得到一个32层的深度特征图；S2.2、将得到的32层深度特征图在三个通道上分别进行“卷积-池化-卷积”操作提取特征：在每个单一通道内，利用28个大小为5×5的卷积核对其进行卷积操作；利用大小为3×3的池化核进行最大池化以减少参数量；最后，再利用28个大小为5×5的卷积核对池化后的特征图进行卷积操作，得到一个28层的特征图；将通过三个单一通道处理后的特征图通过深度连接层在深度方向上进行连接，得到一个84层的深度特征图；S2.3、利用大小为2×2的池化核对深度连接层输出的84层的深度特征图在池化层进行最大池化，将池化后的特征图通过压平层展开为一维特征向量，最后通过全连接层和归一化指数函数层进行故障分类，故障类别分别为阀门微型内漏、微型外漏、常规内漏、常规外漏和无泄漏。6.根据权利要求5所述的基于多传感器信像映射的阀门泄漏故障诊断方法，其特征在于，步骤S2.1和步骤S2.2的卷积操作过程中，；其中为第/＞层输出的n个特征图，/＞为第/＞层输出的m个特征图作为原始输入图像，/＞为卷积核，b为偏置项，/＞表示卷积操作，/＞为激活函数，选择ReLU作为激活函数，/＞。7.根据权利要求1所述的基于多传感器信像映射的阀门泄漏故障诊断方法，其特征在于，步骤S3中，诊断过程中将四个声发射传感器分别置于阀门的两侧，阀门泄漏的声发射信号经前置放大器被采集仪采集，采集仪将采集到的信号通过步骤S1中的信像映射方法转换为灰度图像作为待诊断数据，并利用步骤S2中训练得到的多通道多尺度卷积神经网络模型对待诊断数据进行识别，最终判断阀门的故障。
说明书desc
技术领域本发明涉及阀门管路泄漏故障诊断技术领域,特别是一种基于多传感器信像映射的阀门泄漏故障诊断方法。背景技术阀门是一种流体管路控制设备，在石油、化工、电力、建筑等行业中广泛使用。由于长期处于高温、高压和强腐蚀的恶劣环境中，随着使用时间的增加，其控制性能会逐渐退化，从而经常出现泄漏故障。通过对阀门进行健康状态监测，可以有效维护管网安全，避免资源浪费。现代制造系统中，低成本传感器的广泛使用，为基于数据驱动的故障诊断方法提供了大量数据。传统的数据驱动方法通常包括以下几个关键部分：手工设计特征、特征提取和模型训练。然而，复杂的特征提取过程往往依靠于专家经验，对专业知识的要求很高，特征的构建与选择对最终诊断结果影响很大。声发射传感器通常安装在管壁上以捕捉泄漏声发射信号，而阀门内部泄漏发生在管道内部，这使测得的声发射信号通常包含强烈的背景噪声干扰。可见，单一传感器存在诊断不确定性等问题，仅依靠单个传感器测得的信号难以得到全面的故障特征，诊断结果缺乏准确性和可靠性。综上所述，现有的阀门泄漏故障诊断方法存在对专业知识要求高、特征的构建与选择对诊断结果影响大、单一传感器无法全面表征泄漏故障等问题，这使得阀门泄漏故障诊断方法和模型难以在实际工作场景中有效且广泛的应用。发明内容本发明的目的在于克服现有技术存在的上述缺陷，提出了一种多传感器信像映射阀门泄漏故障诊断方法，其兼顾数据级融合与特征级融合两种融合方式，避免人为因素与专家经验对阀门泄漏故障诊断的影响，在充分保留原始故障信息的同时，深度挖掘泄漏故障灰度图像特征，通过融合来自多个传感器的故障信息，最大限度的提高故障诊断精度，实现端到端的阀门泄漏故障诊断。本发明的技术方案是：一种多传感器信像映射阀门泄漏故障诊断方法，其中，包括以下步骤，S1、数据采集与预处理；使用声发射传感器分别采集阀门内漏故障、外漏故障以及无泄漏时的声发射信号，对采集到的信号添加标签，分别得到标记为阀门微型内漏、微型外漏、常规内漏、常规外漏和无泄漏五种标签的时域信号样本数据，通过信像映射方法将上述声发射时域信号转换为灰度图像；S2、搭建多通道多尺度卷积神经网络模型；通过步骤S1得到的灰度图像数据集训练多通道多尺度卷积神经网络，模型收敛后保存模型；S3、利用步骤S2训练得到的多通道多尺度卷积神经网络模型对阀门泄漏故障进行诊断。本发明的步骤S1中，搭建阀门泄漏模拟实验台，在泄漏阀门的上游和下游分别各布置两个声发射传感器；将泄漏流量为0-20L/min之间采集到的声发射信号定义为微型泄漏，将泄漏流量为20-40L/min之间采集到的声发射信号定义为常规泄漏。步骤S1中的信像映射方法包括以下步骤，S1.1、对声发射时域信号切片，切片长度为M2；S1.2、将切片后的时域信号归一化到之间，进而对归一化后的信号进行取整，为行号，为列号，；式中，表示时域信号幅值；表示灰度图像的像素值，函数为取整函数，通过四舍五入的方式取距离归一化信号值最近的整数值，依次填满像素矩阵，获得大小为M×M的灰度图像矩阵，像素值为0到255；S1.3、对来自不同传感器的灰度图像矩阵进行数据级融合。步骤S1.3中，将位于泄漏阀门上游的第一声发射传感器和第二声发射传感器的灰度图像矩阵进行数据级融合处理：对应于每个像素位置，分别从第一声发射传感器和第二声发射传感器的灰度图像中取出对应位置的像素值和，j为行号，k为列号，；将赋值给S12在处的像素值，重复上述步骤，遍历所有像素点；将位于泄漏阀门下游的第三声发射传感器和第四声发射传感器的灰度图像进行数据级融合处理：对应于每个像素位置，分别从第三声发射传感器和第四声发射传感器的灰度图像中取出对应位置的像素值和，；将赋值给S34在处的像素值，重复上述步骤，遍历所有像素点。步骤S2中多通道多尺度卷积神经网络模型的网络结构包括以下流程，S2.1、通过“卷积-池化-卷积”提取灰度图像S12和S34的深度特征：以灰度图像S12作为输入，利用16个大小为3×3的卷积核对其进行卷积操作；利用大小为2×2的池化核进行最大池化以减少参数量；最后，再利用16个大小为3×3的卷积核对池化后的特征图进行卷积操作，得到一个16层的特征图；与此同时，在另一个通道中，以灰度图像S34作为输入，利用16个大小为3×3的卷积核对其进行卷积操作；利用大小为2×2的池化核进行最大池化以减少参数量；最后，再利用16个大小为3×3的卷积核对池化后的特征图进行卷积操作，得到一个16层的特征图；将两个通道中经过“卷积-池化-卷积”得到的特征图通过深度连接层在深度方向上进行连接，得到一个32层的深度特征图；S2.2、将得到的32层深度特征图在三个通道上分别进行“卷积-池化-卷积”操作提取特征：在每个单一通道内，利用28个大小为5×5的卷积核对其进行卷积操作；利用大小为3×3的池化核进行最大池化以减少参数量；最后，再利用28个大小为5×5的卷积核对池化后的特征图进行卷积操作，得到一个28层的特征图；将通过三个单一通道处理后的特征图通过深度连接层在深度方向上进行连接，得到一个84层的深度特征图；S2.3、利用大小为2×2的池化核对深度连接层输出的84层的深度特征图在池化层进行最大池化，将池化后的特征图通过压平层展开为一维特征向量，最后通过全连接层和归一化指数函数层进行故障分类，故障类别分别为阀门微型内漏、微型外漏、常规内漏、常规外漏和无泄漏。步骤S2.1和步骤S2.2的卷积操作过程中，；其中为第层输出的n个特征图，为第层输出的m个特征图作为原始输入图像，为卷积核，b为偏置项，表示卷积操作，为激活函数，选择ReLU作为激活函数，。步骤S3中，诊断过程中将四个声发射传感器分别置于阀门的两侧，阀门泄漏的声发射信号经前置放大器被采集仪采集，采集仪将采集到的信号通过步骤S1中的信像映射方法转换为灰度图像作为待诊断数据，并利用步骤S2中训练得到的多通道多尺度卷积神经网络模型对待诊断数据进行识别，最终判断阀门的故障。本发明的有益效果是：与现有的基于专家经验的故障诊断方法不同，本申请提出一种基于深度学习的故障特征提取方法，实现端到端的阀门泄漏故障诊断，为了避免故障特征提取过程对专家经验的依赖，提出一种声发射信号信像映射方法，无需任何预定义参数，保留原始故障信息，将一维声发射信号转换为二维灰度图像，大大减少了人为因素的影响；针对单一传感器无法全面表征泄漏故障导致阀门泄漏诊断困难的问题，对来自不同传感器的时域原始信号进行数据级融合，建立多通道多尺度卷积神经网络模型，从来自四个传感器的灰色图像中提取故障特征并进行特征级融合，实现故障分类，有效提高了故障识别准确率。综上所述，本申请兼顾数据级融合与特征级融合两种融合方式，避免人为因素对阀门泄漏故障诊断的影响，在充分保留原始故障信息的同时，深度挖掘泄漏故障灰度图像特征，通过融合来自多个传感器的故障信息，最大限度的提高了故障诊断精度，实现了端到端的阀门泄漏故障诊断。附图说明图1是本发明所述方法的流程示意图。图2是本发明中灰度图像融合示意图。图3是本发明中MCMS-CNN模型的结构示意图。图4是本发明中的在线监测场景示意图。图5是本发明中MCMS-CNN模型的训练准确率和损失函数曲线图，其中是MCMS-CNN模型的训练准确率曲线图，是MCMS-CNN模型的损失函数曲线图。图6是BP神经网络的混淆矩阵图。图7是CNN的混淆矩阵。图8是MCMS-CNN模型的混淆矩阵图。图中：1、阀门；3、前置放大器；4、采集仪；5、计算机；6、第一声发射传感器；7、第二声发射传感器；8、第三声发射传感器；9、第四声发射传感器。具体实施方式为了使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图对本发明的具体实施方式做详细的说明。在以下描述中阐述了具体细节以便于充分理解本发明。但是本发明能够以多种不同于在此描述的其它方式来实施，本领域技术人员可以在不违背本发明内涵的情况下做类似推广，因此本发明不受下面公开的具体实施方式的限制。本发明所述的多传感器信像映射阀门泄漏故障诊断方法包括以下步骤。第一步，数据采集与预处理。搭建阀门泄漏模拟实验台，在泄漏阀门的上游和下游分别各布置两个声发射传感器，使用声发射传感器分别采集阀门内漏故障、外漏故障以及无泄漏时的声发射信号，对采集到的信号添加标签，将泄漏流量为0-20L/min之间采集到的声发射信号定义为微型泄漏，将泄漏流量为20-40L/min之间采集到的声发射信号定义为常规泄漏，分别得到标记为阀门微型内漏、微型外漏、常规内漏、常规外漏和无泄漏五种标签的时域信号样本数据，最后，通过信像映射方法将上述声发射时域信号转换为灰度图像。如图2所示，在信像映射过程中，分别将四个声发射传感器的一维时域信号转换为二维灰度图像，具体包括以下步骤。首先，对声发射时域信号切片，切片长度为M2。其次，将切片后的时域信号归一化到之间，进而对归一化后的信号进行取整，为行号，为列号，；式中，表示时域信号幅值；表示灰度图像的像素值，函数为取整函数，通过四舍五入的方式取距离归一化信号值最近的整数值，依次填满像素矩阵，获得大小为M×M的灰度图像矩阵，像素值为0到255。对来自不同传感器的灰度图像矩阵进行数据级融合。将位于泄漏阀门上游的第一声发射传感器和第二声发射传感器的灰度图像矩阵进行数据级融合处理：对应于每个像素位置，分别从第一声发射传感器和第二声发射传感器的灰度图像中取出对应位置的像素值和，；将赋值给S12在处的像素值，重复上述步骤，遍历所有像素点。将位于泄漏阀门下游的第三声发射传感器和第四声发射传感器的灰度图像进行数据级融合处理：对应于每个像素位置，分别从第三声发射传感器和第四声发射传感器的灰度图像中取出对应位置的像素值和，；将赋值给S34在处的像素值，重复上述步骤，遍历所有像素点。第二步，搭建多通道多尺度卷积神经网络模型，通过第一步得到的灰度图像数据集训练多通道多尺度卷积神经网络模型，在模型收敛后保存模型。多通道多尺度卷积神经网络在输入层有多个通道，用来处理来自不同传感器的数据，其主要思想是通过多个独立通道提取不同传感器的耦合特征来增强分类效果。因为MCMS-CNN能够在相同的学习框架下同时训练多个通道的输入，并且可以在训练过程中联合优化不同通道的参数，所以相比单通道CNN，它具有更好的性能表现。如图3所示，本申请中的MCMS-CNN模型的网络结构包括以下流程。首先，通过“卷积-池化-卷积”提取灰度图像S12和S34的深度特征：以灰度图像S12作为输入，利用16个大小为3×3的卷积核对其进行卷积操作；利用大小为2×2的池化核进行最大池化以减少参数量；最后，再利用16个大小为3×3的卷积核对池化后的特征图进行卷积操作，得到一个16层的特征图。与此同时，在另一个通道中，以灰度图像S34作为输入，利用16个大小为3×3的卷积核对其进行卷积操作；利用大小为2×2的池化核进行最大池化以减少参数量；最后，再利用16个大小为3×3的卷积核对池化后的特征图进行卷积操作，得到一个16层的特征图。将两个通道中经过“卷积-池化-卷积”得到的特征图通过深度连接层在深度方向上进行连接，得到一个32层的深度特征图。随后，将得到的32层深度特征图在三个通道上分别进行“卷积-池化-卷积”操作提取特征。在每个单一通道内，利用28个大小为5×5的卷积核对其进行卷积操作；利用大小为3×3的池化核进行最大池化以减少参数量；最后，再利用28个大小为5×5的卷积核对池化后的特征图进行卷积操作，得到一个28层的特征图。将通过三个单一通道处理后的特征图通过深度连接层在深度方向上进行连接，得到一个84层的深度特征图。最后，利用大小为2×2的池化核对深度连接层输出的84层的深度特征图在池化层进行最大池化，将池化后的特征图通过压平层展开为一维特征向量，最后通过全连接层和归一化指数函数层进行故障分类，故障类别分别为阀门微型内漏、微型外漏、常规内漏、常规外漏和无泄漏。上述卷积操作过程中，；其中为第层输出的n个特征图，为第层输出的m个特征图作为原始输入图像，为卷积核，b为偏置项，表示卷积操作，为激活函数。本申请中选择ReLU作为激活函数，。上述池化操作过程中，以最大池化方式进行池化操作。深度连接层用于将来自多个通道的输入层按深度方向进行连接，增强模型的表达能力。为了控制网络的学习率，使用sgdm优化算法更新网络参数。批大小和学习率分别设置为32和0.002。第三步，使用经过第二步训练得到的MCMS-CNN模型对阀门泄漏进行故障诊断。如图4所示，诊断过程中将四个声发射传感器，包括第一声发射传感器6、第二声发射传感器7、第三声发射传感器8和第四声发射传感器9，其中第一声发射传感器6和第二声发射传感器7位于阀门1的上游，第三声发射传感器8和第四声发射传感器9位于阀门1的下游，阀门泄漏的声发射信号经前置放大器3被采集仪4采集，计算机5将采集到的信号通过第一步中的信像映射方法转换为灰度图像作为待诊断数据，并利用第二步中训练得到的MCMS-CNN模型对待诊断数据进行识别，最终判断阀门的故障。本实施例中的MCMS-CNN模型训练的准确率和损失函数曲线如图5所示。图5中，采用MCMS-CNN模型识别阀门泄漏故障，在模型迭代840次过程中，训练集准确率迅速上升并收敛于99.57%，损失函数迅速下降并收敛于0.009，验证集的准确率上升速度更快，这表明MCMS-CNN模型对于阀门泄漏故障数据的特征挖掘和学习成效显著。将反向传播神经网络、现有的卷积神经网络和本申请的多通道多尺度卷积神经网络进行对比，将各种模型运行10次取测试集上的平均预测准确率作为指标，验证本申请所提方法的优越性。BP神经网络的输入层输入灰度图像数据，每个像素点对应一个输入节点，共16384个节点，设置单个隐藏层，神经元节点设置为128，输出层节点设置为5个，迭代840次后保存训练结果。卷积神经网络利用来自单个传感器的灰度图像作为输入，包括三组“卷积-归一化-池化”操作，使用全连接层进行分类，迭代840次后保存训练结果。多通道多尺度卷积神经网络为本实施例中建立的MCMS-CNN模型，迭代840次后保存训练结果。表1 各种模型的测试集预测精度模型准确率BP神经网络73.9卷积神经网络94.11多通道多尺度卷积神经网络99.89各种模型的平均预测准确率如表1所示。本实施例所述方法在测试集上的平均预测准确率为99.89%，相较于BP神经网络提升了25.99%，相较于CNN提升了5.78%，可见，在阀门泄漏故障诊断方面，MCMS-CNN相较于BP神经网络和传统CNN具有明显优势。进一步分析三种模型的混淆矩阵，混淆矩阵的纵轴表示样本的实际标签，横轴表示样本的预测标签，如图6所示。BP神经网络模型分别将49.5%的微型内漏样本错误的识别为阀门微型外漏故障，将50%的微型外漏样本识别为微型内漏，可见，BP神经网络模型无法较好的区分阀门内漏与外漏两种故障类型。此外，BP神经网络模型还将10.5%的常规内漏样本错误识别为阀门微型外漏，将15%的常规外漏样本错误识别为无泄漏。CNN的表现强于BP神经网络，但其在外漏样本的识别上表现糟糕，无法准确判断微型外漏和常规外漏两种故障类型，将23.5%的常规外漏样本错误地识别为微型外漏故障。MCMS-CNN模型表现出了极高的识别准确率，阀门内漏故障样本和无泄漏样本全部识别正确，在阀门外漏故障识别中，仅有0.5%的微型外漏样本被错误识别为常规外漏，综上所述，MCMS-CNN模型在阀门泄漏故障分类中表现最好。以上对本发明所提供的多传感器信像映射阀门泄漏故障诊断方法进行了详细介绍。本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想。应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以对本发明进行若干改进和修饰，这些改进和修饰也落入本发明权利要求的保护范围内；对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本发明。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本发明的精神或范围的情况下，在其它实施例中实现。因此，本发明将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
