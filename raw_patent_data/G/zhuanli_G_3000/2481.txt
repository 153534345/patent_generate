标题title
校正参数确定方法、图像重建方法、装置、设备及介质
摘要abst
本发明公开了一种校正参数确定方法、图像重建方法、装置、设备及介质。其中，校正参数确定方法包括：获取两不同能量值的真实信号之间的第一关系式，以及两不同能量值的散射信号的第二关系式；根据第一关系式、两不同能量值窄扫描下校正模体的扫描数据，以及两不同能量值对应的窄扫描下空气背景的扫描数据，确定第一散射校正参数集合；根据第二关系式、两不同能量值对应的不同扫描模式对应的校正模体的扫描数据，以及两不同能量值对应的不同扫描模式的空气背景的扫描数据，确定第二散射校正参数集合；将第一散射校正参数集合、第二散射校正参数集合的合集作为目标散射校正参数集合。提高散射校正参数确定方法的准确性和泛化性。
权利要求书clms
1.一种锥束CT的散射校正参数确定方法，其特征在于，包括：获取两不同能量值对应的真实信号之间的第一关系式，以及所述两不同能量值对应的散射信号之间的第二关系式；根据所述第一关系式、所述两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据，以及所述两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据，确定第一散射校正参数集合，所述窄扫描模式下采集的扫描数据不包括散射信号；根据所述第二关系式、所述两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据、所述两不同能量值对应的全扫描模式下采集的校正模体的扫描数据、所述两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据、所述两不同能量值对应的全扫描模式下采集的空气背景的扫描数据，确定第二散射校正参数集合；将所述第一散射校正参数集合、所述第二散射校正参数集合的合集作为与所述两不同能量值对应的目标散射校正参数集合。2.根据权利要求1所述的方法，其特征在于，通过以下步骤确定所述第一关系式，包括：基于所述校正模体在所述两不同能量值下分别对应的等效衰减系数之间的一阶线性拟合方程式，确定所述两不同能量值对应的真实信号之间的第一关系式。3.根据权利要求1所述的方法，其特征在于，通过以下步骤确定所述第二关系式，包括：基于所述校正模体在所述两不同能量值下分别对应的散射信号之间的一阶线性表达式，确定所述两不同能量值对应的散射信号之间的第二关系式。4.根据权利要求1所述的方法，其特征在于，所述校正模体为单一材质的圆柱体，所述校正模体的尺寸基于扫描对象的尺寸确定。5.根据权利要求1所述的方法，其特征在于，所述两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据与空气背景的扫描数据，以及所述两不同能量值对应的全扫描模式下采集的校正模体的扫描数据与空气背景的扫描数据对应相同的扫描参数，所述扫描参数包括管电压与总滤片厚度。6.根据权利要求1所述的方法，其特征在于，所述窄扫描模式对应的射线束在探测器的设定方向上的宽度小于10mm，所述设定方向为平行于圆柱形校正模体中心轴的方向，所述圆柱形校正模体的中心轴平行于扫描数据采集过程中扫描床的运动方向。7.一种锥束CT的图像重建方法，其特征在于，包括：根据两组待成像数据对应的能量值组合，获取与所述能量值组合对应的权利要求1-6中任一项所述的目标散射校正参数集合以及所述能量值组合对应的总信号之间的第三关系式，所述第三关系式基于所述第一关系式与所述第二关系式确定；根据所述第三关系式、所述能量值组合对应的所述目标散射校正参数集合、所述两组待成像数据，确定目标衰减参数与所述待成像数据中的散射信号；从所述待成像数据中去掉所述散射信号以得到真实信号；基于所述目标衰减参数对所述真实信号进行图像重建以得到目标图像。8.根据权利要求7所述的方法，其特征在于，所述根据两组待成像数据对应的能量值组合，获取与所述能量值组合对应的权利要求1-6中任一项所述的目标散射校正参数集合，包括：确定所述两组待成像数据对应的能量值组合与扫描参数；获取所述能量值组合与所述扫描参数对应的权利要求1-6中任一项所述的目标散射校正参数集合。9.根据权利要求7所述的方法，其特征在于，所述从所述待成像数据中去掉所述散射信号以得到真实信号，包括：去掉所述能量值组合中的两能量值分别对应的所述散射信号中的高频结构信息以更新两能量值分别对应的所述散射信号；从两组所述待成像数据中分别去掉更新后的对应所述散射信号以得到真实信号。10.一种锥束CT的散射校正参数确定装置，其特征在于，包括：关系式获取模块，用于获取两不同能量值对应的真实信号之间的第一关系式，以及两不同能量值对应的散射信号之间的第二关系式；第一参数模块，用于根据所述第一关系式、所述两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据，以及所述两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据，确定第一散射校正参数集合，所述窄扫描模式下采集的扫描数据不包括散射信号；第二参数模块，用于根据所述第二关系式、所述两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据，所述两不同能量值对应的全扫描模式下采集的校正模体的扫描数据、所述两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据、所述两不同能量值对应的全扫描模式下采集的空气背景的扫描数据，确定第二散射校正参数集合；结果模块，用于将所述第一散射校正参数集合、所述第二散射校正参数集合的合集作为与所述两不同能量值对应的目标散射校正参数集合。11.一种锥束CT的图像重建装置，其特征在于，包括：获取模块，用于根据两组待成像数据对应的能量值组合，获取与所述能量值组合对应的权利要求1-6中任一项所述的目标散射校正参数集合，以及所述能量值组合对应的总信号之间的第三关系式，所述第三关系式基于所述第一关系式与所述第二关系式确定；散射信号确定模块，根据所述第三关系式、所述能量值组合对应的所述校正参数集合、所述两组待成像数据，确定目标衰减参数与所述待成像数据中的散射信号；真实信号模块，用于从所述待成像数据中去掉所述散射信号以得到真实信号；图像重建模块，用于基于所述目标衰减参数对所述真实信号进行图像重建以得到目标图像。12.一种电子设备，其特征在于，所述电子设备包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够响应于校正指令执行权利要求1-6中任一项所述的锥束CT的散射校正参数确定方法，或者响应于图像重建指令执行权利要求7-9中任一项所述的锥束CT的图像重建方法。13.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机指令，所述计算机指令用于使处理器执行时实现权利要求1-6中任一项所述的锥束CT的散射校正参数确定或权利要求7-9中任一项所述的锥束CT的图像重建方法。
说明书desc
技术领域本发明涉及CT技术领域，尤其涉及校正参数确定方法、图像重建方法、装置、设备及介质。背景技术锥束能谱CT扫描是实现定量锥束CT成像的研究前沿。锥束能谱CT成像通过结合不同能量下对物体的CT扫描数据，就可以计算出不同组织和材料对不同能量X射线的衰减情况，进而获得定量信息。但是，采用锥束CT成像方式进行多能量扫描，X射线在物体内部会发生散射，导致CT图像会存在散射伪影。现有技术通过在锥束CT成像系统中引入具有周期结构的X射线遮挡物，并建立投影数据和透射X射线有效能量的关系，以及散射信号与有效能量的关系。这种去除伪影的方法对有效能量的精度要求高。此外由于不同身体部位尺寸不同，不能使用同样的遮挡物，因此泛化性较差。发明内容本发明提供了一种校正参数确定方法、图像重建方法、装置、设备及介质，以解决现有的锥束CT成像方法泛化性差的问题。根据本发明的一方面，提供了一种锥束CT的散射校正参数确定方法，该方法包括：获取两不同能量值对应的真实信号之间的第一关系式，以及两不同能量值对应的散射信号之间的第二关系式；根据第一关系式、两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据，以及两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据，确定第一散射校正参数集合，窄扫描模式下采集的扫描数据不包括散射信号；根据第二关系式、两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据，两不同能量值对应的全扫描模式下采集的校正模体的扫描数据、两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据、两不同能量值对应的全扫描模式下采集的空气背景的扫描数据，确定第二散射校正参数集合；将第一散射校正参数集合、第二散射校正参数集合的合集作为与两不同能量值对应的目标散射校正参数集合。根据本发明的另一方面，提供了一种锥束CT的图像重建方法，该方法包括：根据两组待成像数据对应的能量值组合，获取与能量值组合对应的本发明任一实施例的目标散射校正参数集合以及能量值组合对应的总信号之间的第三关系式，第三关系式基于第一关系式与第二关系式确定；根据第三关系式、能量值组合对应的目标散射校正参数集合、两组待成像数据，确定目标衰减参数与待成像数据中的散射信号；从待成像数据中去掉散射信号以得到真实信号；基于目标衰减参数对真实信号进行图像重建以得到目标图像。根据本发明的又一方面，提供了一种锥束CT的散射校正参数确定装置，该装置包括：关系式获取模块，用于获取两不同能量值对应的真实信号之间的第一关系式，以及两不同能量值对应的散射信号之间的第二关系式；第一参数模块，用于根据第一关系式、两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据，以及两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据，确定第一散射校正参数集合，窄扫描模式下采集的扫描数据不包括散射信号；第二参数模块，用于根据第二关系式、两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据，两不同能量值对应的全扫描模式下采集的校正模体的扫描数据、两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据、两不同能量值对应的全扫描模式下采集的空气背景的扫描数据，确定第二散射校正参数集合；结果模块，用于将第一散射校正参数集合、第二散射校正参数集合的合集作为与两不同能量值对应的目标散射校正参数集合。根据本发明的再一方面，提供了一种锥束CT的图像重建装置，该装置包括：获取模块，用于根据两组待成像数据对应的能量值组合，获取与能量值组合对应的本发明任一实施例的目标散射校正参数集合，以及能量值组合对应的总信号之间的第三关系式，第三关系式基于第一关系式与第二关系式确定；散射信号确定模块，用于根据第三关系式、能量值组合对应的校正参数集合、两组待成像数据，确定目标衰减参数与待成像数据中的散射信号；真实信号模块，用于从待成像数据中去掉散射信号以得到真实信号；图像重建模块，用于基于目标衰减参数对真实信号进行图像重建以得到目标图像。根据本发明的又一方面，提供了一种电子设备，该电子设备包括：至少一个处理器；以及与至少一个处理器通信连接的存储器；其中，存储器存储有可被至少一个处理器执行的计算机程序，计算机程序被至少一个处理器执行，以使至少一个处理器能够响应于校正指令执行本发明任一实施例的锥束CT的散射校正参数确定方法，或者响应于图像重建指令执行本发明任一实施例的锥束CT的图像重建方法。根据本发明的还一方面，提供了一种计算机可读存储介质，计算机可读存储介质存储有计算机指令，计算机指令用于使处理器执行时实现本发明任一实施例的锥束CT的散射校正参数确定方法或本发明任一实施例的锥束CT的图像重建方法。本发明实施例的技术方案，将窄扫描模式下采集的扫描数据作为真实信号，全扫描模式下采集的扫描数据包括散射信号和真实信号，基于两不同能量值对应的真实信号之间的第一关系式，确定第一散射校正参数集合，基于两不同能量值对应的散射信号之间的第二关系式，确定第二散射校正参数集合，得到两不同能量值对应的目标散射校正参数集合，提高散射校正参数确定方法的准确性和泛化性。应当理解，本部分所描述的内容并非旨在标识本发明的实施例的关键或重要特征，也不用于限制本发明的范围。本发明的其它特征将通过以下的说明书而变得容易理解。本申请技术方案中对数据的获取、存储、使用和处理等均符合国家法律法规的相关规定。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是根据本发明实施例提供的一种锥束CT的散射校正参数确定方法的流程图；图2是根据本发明实施例提供的一种锥束能谱CT在窄视野模式下采集校正模体的扫描数据的示意图；图3是根据本发明实施例提供的一种锥束能谱CT在全视野模式下采集校正模体的扫描数据的示意图；图4是根据本发明实施例提供的一种锥束CT的图像重建方法的流程图；图5是根据本发明实施例提供的一种锥束CT的散射校正参数确定装置的结构框图；图6是根据本发明实施例提供的另一种锥束CT的散射校正参数确定装置的结构框图；图7是根据本发明实施例提供的又一种锥束CT的散射校正参数确定装置的结构框图；图8是根据本发明实施例提供的一种锥束CT的图像重建装置的结构框图；图9是根据本发明实施例提供的另一种锥束CT的图像重建装置的结构框图；图10是根据本发明实施例提供的一种锥束CT散射校正设备的结构框图；图11是根据本发明实施例提供的一种锥束CT设备的结构框图；图12是根据本发明实施例提供的一种电子设备的结构框图。具体实施方式为了使本技术领域的人员更好地理解本发明方案，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分的实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本发明保护的范围。需要说明的是，本发明的说明书和权利要求书及上述附图中的术语“第一”、“第二”和“第三”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本发明的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。图1是根据本发明实施例提供的一种锥束CT的散射校正参数确定方法的流程图，本实施例可适用于基于校正模体进行锥束CT的散射校正参数确定的场景，该方法可以配置于锥束CT的散射校正参数确定装置中，该锥束CT的散射校正参数确定装置可以采用硬件和/或软件的形式实现，也可以配置于电子设备的处理器中。如图1 所示，一种锥束CT的散射校正参数确定方法包括以下步骤：S110、获取两不同能量值对应的真实信号之间的第一关系式，以及两不同能量值对应的散射信号之间的第二关系式。在一个实施例中，两不同能量值对应的真实信号之间的第一关系式，基于校正模体在两不同能量值下分别对应的等效衰减系数之间的一阶线性拟合方程式确定。基于校正模体在两不同能量值下分别对应的散射信号之间的一阶线性表达式确定第二关系式。具体的，CT扫描过程中，X射线穿过物体会有部分光子被吸收，从而导致X射线的强度以指数形式衰减，并且这种衰减与物体内部的密度相关，且衰减程度与密度成正比。理想情况下，X射线的衰减过程可以表示成公式：；其中，I0是X射线衰减前的光子量；I是X射线衰减后剩余的光子量，也就是CT探测器最终接收到的信号；μ是以射线路径l为变量的函数，用于表示物体的X射线的线性衰减系数，∫μdl用于表示X射线沿该方向的总衰减量。在实际的物体CT扫描中，由于X射线在物体内部会发生散射，导致了CT图像存在散射伪影，也就是说，CT探测器最终接收到的信号I包括物体的真实信号P和散射信号S。I=P+S 根据公式，本发明将锥束能谱CT扫描中不同能量下的探测结果，等效成多个独立的数据采集过程，由此可以将不同能量的原始信号I分别用如下方程表示： 。具体的，第一能量下，探测器接收到的原始信号是，该原始信号/＞包括真实信号和散射信号，/＞和/＞则分别表示第二能量下探测器接收到的信号中的真实信号和散射信号，而/＞和/＞则分别表示第n个能量下探测器接收到的原始信号/＞中的真实信号和散射信号。在一个实施例中，将本发明实施例的锥束CT散射校正参数确定方法用于双能量CT扫描的场景中，例如，双源双探测器扫描、双层平板探测器扫描、快速管电压切换扫描以及单源两次扫描等应用场景；也适用于获得物体能谱信息的锥束CT扫描，例如能量分辨光子计数探测器。具体的，对于只涉及到两种能量的扫描方式，只需将公式中的n设置为2。对于光子计数探测器扫描和其他多种能量的扫描，n的数值基于设置的能量分区的数目确定。在一个双能量CT扫描的实施例中，为了建立第一能量和第二能量下的真实信号之间的第一关系式，首先，确定第一能量和第二能量下的真实信号和/＞：；其中，和/＞分别表示在第一能量和第二能量下基于窄扫描模式下采集的空气背景的扫描数据，即第一能量和第二能量下窄扫描模式下采集的空气背景的光源出射光子数量或者探测器测量得到的光强；/＞是被扫描对象在第一能量下的等效扫描过程中的等效衰减系数，/＞是被扫描对象在第二能量下的等效扫描过程中的等效衰减系数；L是对应投影角度对应的被扫描对象的厚度。可以理解的是，等效衰减系数与被扫描对象的材质有关。然后，基于不同能量下等效衰减系数建立不同能量值对应的真实信号之间的联系。具体的，基于公式中关于和/＞的一阶线性方程，建立第一能量下真实信号和第二能量下真实信号/＞之间的联系，该一阶线性函数用于表示第一能量的等效衰减系数和第二能量的等效衰减系数的关系：；其中，α0和α1分别为一阶线性方程的常数项拟合系数和一阶项拟合系数。将公式和公式作为第一关系式。为了描述不同能量下的散射信号之间的关系，基于一阶线性的数学关系建立两不同能量下的散射信号的关系式，即，用第一能量下的散射信号的一阶线性函数表示第二能量下的散射信号：；其中，是一阶线性方程的常数项拟合系数，/＞是一阶线性方程的一阶项拟合系数。将公式作为第一能量下的散射信号和第二能量下的散射信号之间的第二关系式。S120、根据第一关系式、两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据，以及两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据，确定第一散射校正参数集合，窄扫描模式下采集的扫描数据不包括散射信号。在一个实施例中，校正模体为单一材质的圆柱体，校正模体的尺寸基于扫描对象的尺寸确定。示例性的，可以使用亚克力或纯水制作圆柱体，作为校正模体。可选的，还可以使用其他形状的校正模体，只要该校正模体的形状和尺寸等参数与扫描部位的形状和尺寸等参数相同或近似相同即可，示例性的，针对头部的CT扫描，校正模体可以使用单一材质的圆球，圆球的直径与需进行扫描的头部尺寸接近。在一个实施例中，图2是根据本发明实施例提供的一种锥束能谱CT在窄视野模式下采集校正模体的扫描数据的示意图，如图2所示，X射线源65发出X射线，经过滤片66，缩小X射线的探测视野69，在垂直方向对校正模体67进行窄扫描，经过校正模体67的X射线会衰减，通过能量分辨光子计数探测器68检测该衰减的X射线，得到该校正模体67的窄扫描模式的扫描数据。窄扫描模式对应的射线束在探测器的设定方向上的宽度小于10mm，设定方向为平行于圆柱形校正模体中心轴的方向，圆柱形校正模体的中心轴平行于扫描数据采集过程中扫描床的运动方向。可以理解的是，窄视野在垂直方向上的宽度需要小于第一设定宽度。需要注意的是，为了避免出射光子的数量受到光源处准直器的影响而减小，视野应不小于第二设定宽度，第二设定宽度小于第一设定宽度，示例性的，第一设定宽度是10毫米，第二设定宽度是5毫米。该实施例通过将窄扫描模式对应的射线束在探测器的设定方向上小于10mm，使得基于该窄扫描模式对应的扫描数据中的散射信号为零，即基于该窄扫描模式获取的扫描数据中仅包括真实信号。针对两不同能量，分别在窄扫描模式下采集空气背景的扫描数据。将各能量对应的空气背景的扫描数据作为对应能量下的X射线衰减前的光子量，即作为对应能量下的I0）。将采集得到第一能量下窄扫描模式下采集的校正模体的扫描数据作为第一能量下真实信号，将第二能量下窄扫描模式下采集的校正模体的扫描数据作为第二能量下真实信号；将上述数据、第一能量下窄扫描模式下采集的空气背景的扫描数据和第二能量下窄扫描模式下采集的空气背景的扫描数据代入第一关系式，得到校正模体在第一能量下的等效衰减系数和校正模体在第二能量下的等效衰减系数，代入公式和公式组成的第一关系式，得到α0和α1，作为第一散射校正参数集合。S130、根据第二关系式、两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据、两不同能量值对应的全扫描模式下采集的校正模体的扫描数据、两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据、两不同能量值对应的全扫描模式下采集的空气背景的扫描数据确定第二散射校正参数集合。其中，全视野是指X射线球管发射出的X光在设定方向上能够完全覆盖整个探测器，设定方向为扫描数据采集过程中扫描床的运动方向；全视野扫描模式下采集的扫描数据包括真实信号和散射信号。在一个实施例中，图3是根据本发明实施例提供的一种锥束能谱CT在全视野模式下采集校正模体的扫描数据的示意图，如图3所示，X射线源65发出X射线，X射线在全视野70范围内对校正模体67进行扫描，经过校正模体67的X射线会衰减，通过能量分辨光子计数探测器68检测到衰减的X射线，得到该校正模体67的全扫描模式的扫描数据。具体的，将第一能量下全扫描模式下采集的校正模体的扫描数据作为第一能量下的原始信号，该原始信号包括真实信号和散射信号，将第二能量下全扫描模式下采集的空气背景的扫描数据作为第二能量下原始信号，该原始信号包括真实信号和散射信号；将第一能量下全扫描模式下采集的校正模体的扫描数据减去第一能量下窄扫描模式下采集的校正模体的扫描数据，得到校正模体在第一能量对应的散射信号；将第二能量下全扫描模式下采集的校正模体的扫描数据减去第二能量下窄扫描模式下采集的校正模体的扫描数据，得到校正模体在第二能量对应的散射信号；将校正模体在第一能量下的散射信号和该第二能量下的散射信号作为第一散射信号组合；将第一能量下全扫描模式下采集的空气背景的扫描数据减去第一能量下窄扫描模式下采集的空气背景的扫描数据，得到空气背景在第一能量对应的散射信号；将第二能量下全扫描模式下采集的空气背景的扫描数据减去第二能量下窄扫描模式下采集的空气背景的扫描数据，得到空气背景在第二能量对应的散射信号；将空气背景在第一能量下的散射信号和空气背景在第二能量下的散射信号作为第二散射信号组合；基于该第一散射信号组合、第二散射信号组合分别确定第一能量下的散射信号和第二能量下的散射信号；将第一能量下的散射信号和第二能量下的散射信号代入第二关系式，得到/＞和/＞，作为第二散射校正参数集合。第二散射校正参数集合与第一散射校正参数集合均与该两不同能量值有关，即不同的能量值组合对应不同的第一散射校正参数集合与第二散射校正参数集合。需要说明的是，两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据与空气背景的扫描数据，以及两不同能量值对应的全扫描模式下采集的校正模体的扫描数据与空气背景的扫描数据对应相同的扫描参数，扫描参数包括管电压与总滤片厚度。具体的，对于任一能量值，管电压与总滤片厚度与X射线信号强度有关，若管电压与总滤片厚度发生变化，不同能量值对应的真实信号和散射信号也会发生变化，所以第一散射校正参数集合和第二散射校正参数集合均会发生变化，因此在锥束CT的散射校正参数确定的过程中，需要保持管电压与总滤片厚度不变。S140、将第一散射校正参数集合、第二散射校正参数集合的合集作为与两不同能量值对应的目标散射校正参数集合。具体的，在一个实施例中，两不同能量值对应的目标散射校正参数集合包括第一散射校正参数集合中的参数和第二散射校正参数集合中的参数。示例性的，目标散射校正参数集合包括第一散射校正参数集合中的α0和α1，以及，第二散射校正参数集合中的和/＞。关于校正模体的扫描数据采集。在当前能量与扫描模式下，控制射线源相对校正模体旋转360度并在旋转过程中采集相应的扫描数据。在一个实施例中，控制射线源与探测器保持不动，控制校正模体旋转360度，在校正模体的旋转过程中，通过射线源与探测器的配合，采集校正模体在各个投影角度的扫描数据。在一个实施例中，保持校正模体保持不动，控制X射线源与探测器绕校正模体旋转360度，且在射线源与探测器的旋转过程中，在多个投影角度采集校正模体的扫描数据。需要说明的是，若校正模体的形状规则且材质单一，可以仅在一个投影角度获取扫描模体的扫描数据，然后根据该一个投影角度的投影数据，确定可覆盖校正模体360度的多个投影角度的扫描数据。本发明实施例的技术方案，在窄扫描模式下采集的扫描数据仅包括真实信号，全扫描模式下采集的扫描数据包括散射信号和真实信号的前提下；基于两不同能量值对应的真实信号之间的第一关系式以及窄扫描模式下该两不同能量值对应的校正模体的扫描数据与空气背景的扫描数据，确定第一散射校正参数集合；基于该两不同能量值对应的散射信号之间的第二关系式、窄扫描模式下该两不同能量值对应的校正模体的扫描数据与空气背景的扫描数据、全扫描模式下该两不同能量值对应的校正模体的扫描数据与空气背景的扫描数据，确定第二散射校正参数集合；将第一散射校正参数集合和第二散射校正参数集合的合集作为目标散射校正参数集合，提高散射校正参数确定方法的准确性和泛化性。图4是根据本发明实施例提供的一种锥束CT的图像重建方法的流程图，本实施例可适用于基于散射校正的锥束CT图像重建的场景，该方法可以配置于锥束CT的图像重建方法装置中，该锥束CT的图像重建方法装置可以采用硬件和/或软件的形式实现，也可以配置于电子设备的处理器中。如图4所示，该方法包括：S210、根据两组待成像数据对应的能量值组合，获取与能量值组合对应的目标散射校正参数集合以及能量值组合对应的总信号之间的第三关系式，第三关系式基于第一关系式与第二关系式确定。具体的，确定两组待成像数据分别对应的第一能量和第二能量，将第一能量与第二能量的组合作为能量值组合。将公式代入公式的第二个方程，得到：。将公式中的记为变量/＞，公式可为：。将公式代入公式，得到与该能量值组合对应的目标散射校正参数集合以及能量值组合对应的总信号之间的第三关系式：。进一步的，根据两组待成像数据对应的能量值组合，获取与能量值组合对应的本发明任一实施例的目标散射校正参数集合，包括：步骤a1、确定两组待成像数据对应的能量值组合与扫描参数。具体的，对各组待扫描数据进行解析，以确定各组待成像数据对应的能量值与扫描参数。将两组待成像扫描数据分别对应的能量值的组合作为能量值组合。其中，扫描参数包括扫描模式、管电压与总滤片厚度等参数，扫描模式包括目标参数，该目标参数为锥束在探测器垂直方向上的宽度，或者为用于确定该宽度的其他参数。步骤a2、获取能量值组合与扫描参数对应的本发明任一实施例的目标散射校正参数集合。预先创建能量值组合、扫描参数与目标散射校正参数集合的对应关系。能量值组合与扫描参数确定后，根据该对应关系确定与该能量值组合、该扫描参数对应的目标散射校正参数集合。S220、根据第三关系式、能量值组合对应的目标散射校正参数集合、两组待成像数据，确定目标衰减参数与待成像数据中的散射信号。由于与被扫描对象对应的衰减系数有关，因此对于不同的被扫描对象，该参数的值是不同的。因此，此处/＞为变量，公式所示第三关系式中包含/＞和/＞两个变量。根据第三关系式，将两组待成像数据、能量值组合对应的目标散射校正参数集合中的四个参数α0、α1、/＞和/＞代入第三关系式，对第三关系式中的方程组进行迭代求解，可以得到目标衰减参数和待成像数据中的散射信号，进一步得到物体在第二能量下的散射信号。S230、从待成像数据中去掉散射信号以得到真实信号。第一能量对应的散射信号与第二能量对应的散射信号得到后，分别从第一能量对应的待成像数据中去掉散射信号以得到对应的真实信号，从第二能量对应的待成像数据中去掉对应的散射信号以得到对应的真实信号。在一个实施例中，去掉能量值组合中的两能量值分别对应的散射信号中的高频结构信息以更新两能量值分别对应的散射信号；从两组待成像数据中分别去掉更新后的对应散射信号以得到真实信号。可以理解的是，散射信号包括高频结构信息，可以对得到的散射信号做滤波处理，去除散射信号中的高频结构信息，得到更新后的散射信号；从待成像数据中去除更新后的散射信号，得到真实信号。在一个实施例中，采用迭代模糊的方法去掉能量值组合中的两能量值分别对应的散射信号中的高频结构信息。示例性的，首先，根据公式，对散射信号的高频结构信息做平滑处理，得到平滑后的散射信号，即为更新后的散射信号。其中，S是散射信号，i和j用于表示探测器像素的位置，k是迭代次数，ω和γ均为权重因子，具体取值可根据实际情况进行设置。散射信号更新完毕后，从待成像数据减去更新后的散射信号，得到真实信号。S240、基于目标衰减参数对真实信号进行图像重建以得到目标图像。各组待成像数据对应的目标衰减参数与真实信号确定后，基于该目标衰减参数对真实信号进行图像重建以得到目标图像。本实施例的技术方案，通过平滑滤波去掉能量值组合中的两能量值分别对应的散射信号中的高频结构信息，得到更新后的散射信号；在待成像数据中去除更新后的散射信号，得到真实信号；基于目标衰减参数对真实信号进行图像重建以得到目标图像，解决了锥束CT图像存在散射伪影的问题，基于散射校正，得到正式信号进行图像重建提高散射校正参数确定方法的准确性和泛化性，进一步提高了锥束CT图像重建方法的准确性。图5是根据本发明实施例提供的一种锥束CT的散射校正参数确定装置的结构框图。该装置可以采用硬件和/或软件的形式实现，集成于电子设备的处理器中。如图5所示，该锥束CT的散射校正参数确定装置包括：关系式获取模块501，用于获取两不同能量值对应的真实信号之间的第一关系式，以及两不同能量值对应的散射信号之间的第二关系式；第一参数模块502，用于根据第一关系式、两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据，以及两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据，确定第一散射校正参数集合，窄扫描模式下采集的扫描数据不包括散射信号；第二参数模块503，用于根据第二关系式、两不同能量值对应的窄扫描模式下采集的校正模体的扫描数据、两不同能量值对应的全扫描模式下采集的校正模体的扫描数据、两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据、两不同能量值对应的全扫描模式下采集的空气背景的扫描数据，确定第二散射校正参数集合；结果模块504，用于将第一散射校正参数集合、第二散射校正参数集合的合集作为与两不同能量值对应的目标散射校正参数集合。可选的，如图6所示,该装置还包括第一关系式确定模块505，该第一关系式确定模块505用于：基于校正模体在两不同能量值下分别对应的等效衰减系数之间的一阶线性拟合方程式，确定两不同能量值对应的真实信号之间的第一关系式。可选的，如图7所示，该装置还包括第二关系式确定模块506，该第二关系式确定模块506用于：基于校正模体在两不同能量值下分别对应的散射信号之间的一阶线性表达式，确定两不同能量值对应的散射信号之间的第二关系式。本实施例的技术方案，通过各个模块的相互配合，将窄扫描模式下采集的扫描数据作为真实信号，全扫描模式下采集的扫描数据包括散射信号和真实信号，基于两不同能量值对应的真实信号之间的第一关系式，确定第一散射校正参数集合，以及两不同能量值对应的散射信号之间的第二关系式，确定第二散射校正参数集合，得到两不同能量值对应的目标散射校正参数集合，提高散射校正参数确定方法的准确性和泛化性。本发明实施例所提供的锥束CT的散射校正参数确定装置可执行本发明任一实施例所提供的锥束CT的散射校正参数确定方法，具备执行方法相应的功能模块和有益效果。图8是根据本发明实施例提供的一种锥束CT的图像重建装置的结构框图，该装置可以采用硬件和/或软件的形式实现，集成于电子设备的处理器中。如图8所示，该锥束CT的图像重建装置包括：获取模块601，用于根据两组待成像数据对应的能量值组合，获取与能量值组合对应的本发明任一实施例的目标散射校正参数集合，以及能量值组合对应的总信号之间的第三关系式，第三关系式基于第一关系式与第二关系式确定；散射信号确定模块602，用于根据第三关系式、能量值组合对应的目标散射校正参数集合、两组待成像数据，确定目标衰减参数与所述待成像数据中的散射信号；真实信号模块603，用于从待成像数据中去掉散射信号以得到真实信号；图像重建模块604，用于基于目标衰减参数对真实信号进行图像重建以得到目标图像。可选的，如图9所示，该装置还包括校正参数集合模块605，该校正参数集合模块605用于：确定两组待成像数据对应的能量值组合与扫描参数；获取与能量值组合与扫描参数对应的本发明任一实施例的目标散射校正参数集合。可选的，真实信号模块603用于：去掉能量值组合中的两能量值分别对应的散射信号中的高频结构信息以更新两能量值分别对应的散射信号；从两组待成像数据中分别去掉更新后的对应散射信号以得到真实信号。本实施例的技术方案，通过各个模块的相互配合，根据两组待成像数据对应的能量值组合，获取与能量值组合对应的本发明任一实施例的目标散射校正参数集合，以及能量值组合对应的总信号之间的第三关系式，第三关系式基于所述第一关系式与第二关系式确定；根据第三关系式、能量值组合对应的目标散射校正参数集合、两组待成像数据，确定目标衰减参数与待成像数据中的散射信号；从待成像数据中去掉散射信号以得到真实信号；基于目标衰减参数对真实信号进行图像重建以得到目标图像。解决了锥束CT图像存在散射伪影的问题，提高了锥束CT图像重建的准确性。本发明实施例所提供的锥束CT的图像重建装置可执行本发明任一实施例所提供的锥束CT的图像重建装置方法，具备执行方法相应的功能模块和有益效果。图10是根据本发明实施例提供的一种锥束CT散射校正设备的结构框图，如图10所示，锥束CT散射校正设备800包括锥束CT装置801，用于采集两种设定能量值的射线对扫描对象进行扫描，以得到与两种设定能量值对应的扫描数据；散射校正装置802，用于获取锥束CT装置801的扫描数据，以得到两种设定能量值对应的窄扫描模式下采集的校正模体的扫描数据、两不同能量值对应的窄扫描模式下采集的空气背景的扫描数据、两不同能量值对应的全扫描模式下采集的校正模体的扫描数据，以及两不同能量值对应的全扫描模式下采集的空气背景的扫描数据。至少一个处理器803；以及与至少一个处理器通信连接的存储器；其中，存储器存储有可被至少一个处理器执行的计算机程序，计算机程序被至少一个处理器执行，以使至少一个处理器能够响应于图像校正指令执行本发明任一实施例的锥束CT的散射校正参数确定方法。具体的，在第一能量值下，锥束CT装置801分别使用窄扫描模式和全扫描模式扫描校正模体，得到第一能量值对应的窄扫描模式下采集的校正模体的扫描数据和全扫描模式下采集的校正模体的扫描数据；在第一能量值下，分别使用窄扫描模式和全扫描模式扫描空气背景，得到第一能量值对应的窄扫描模式下空气背景的扫描数据和全扫描模式下采集的空气背景的扫描数据；在第二能量值下，分别使用锥束CT装置801的全扫描模式和窄扫描模式扫描校正模体，得到第二能量值对应的全扫描模式下采集的校正模体的扫描数据和第二能量值对应的窄扫描模式下采集的校正模体的扫描数据；在第二能量值下，分别使用锥束CT装置801的全扫描模式和窄扫描模式扫描空气背景，得到第二能量值对应的全扫描模式下空气背景的扫描数据和第二能量值对应的窄扫描模式下空气背景的扫描数据；锥束CT装置801将上述扫描数据发送给处理器803，处理器803接收上述扫描数据，将上述扫描数据发送给存储器804，存储器804存储上述扫描数据；处理器803获取第一能量值和第二能量值的真实信号之间的第一关系式，以及第一能量值和第二能量值的散射信号的第二关系式，根据第一关系式、第二关系式和上述扫描数据，得到第一散射校正参数集合和第二散射校正参数集合；处理器803将上述第一散射校正参数集合和第二散射校正参数集合组成，得到第一能量和第二能量对应的目标散射校正参数集合。本实施例提供的锥束CT散射校正设备的技术方案，将窄扫描模式下采集的扫描数据作为真实信号，全扫描模式下采集的扫描数据包括散射信号和真实信号，基于两不同能量值对应的真实信号之间的第一关系式，确定第一散射校正参数集合；根据两不同能量值对应的散射信号之间的第二关系式，确定第二散射校正参数集合，得到两不同能量值对应的目标散射校正参数集合，提高散射校正参数确定方法的准确性和泛化性。本发明实施例所提供的锥束CT散射校正设备可实现本发明任一实施例所提供的锥束CT的散射校正参数确定方法，具备执行方法相应的功能模块和有益效果。图11是根据本发明实施例提供的一种锥束CT设备的结构框图，如图11所示，锥束CT设备700包括扫描台701，用于支撑被扫描对象；扫描装置702，用于采用两种设定能量值的射线对扫描对象进行扫描以确定与扫描对象对应的两组待成像数据；至少一个处理器703；以及与所述至少一个处理器703通信连接的存储器704；其中，存储器704存储有可被所述至少一个处理器703执行的计算机程序，计算机程序被所述至少一个处理器703执行，以使所述至少一个处理器703能够响应于图像执行指令执行本发明任一实施例的锥束CT的图像重建方法。具体的，扫描装置702使用两种不同能量值扫描位于扫描台701上的被扫描对象，得到两组待成像数据，扫描装置702将两组待成像数据发送给处理器703，处理器703接收上述两组待成像数据，将上述两组待成像数据发送给存储器704，存储器704存储上述两组待成像数据；存储器704存储了多组两种设定能量值的能量值组合、与其对应的目标散射校正参数集合和第三关系式，处理器703根据该两组待成像数据的两种不同能量值的能量值组合，获取存储器704中与该能量值组合对应的目标散射校正参数集合以及该能量值组合对应的总信号之间的第三关系式；处理器703根据第三关系式、该能量值组合对应的目标散射校正参数集合、上述两组待成像数据，确定目标衰减参数和待成像数据中的散射信号；再去掉能量值组合中的两能量值分别对应的散射信号中的高频结构信息以更新两能量值分别对应的散射信号；从两组待成像数据中分别去掉更新后的对应散射信号以得到真实信号；基于目标衰减参数对真实信号进行图像重建以得到目标图像。本实施例提供的锥束CT设备的技术方案，通过平滑滤波去掉能量值组合中的两能量值分别对应的散射信号中的高频结构信息，得到更新后的散射信号；在待成像数据中去除更新后的散射信号，得到真实信号；基于目标衰减参数对真实信号进行图像重建以得到目标图像，解决了锥束CT图像存在散射伪影的问题，提高散射校正参数确定方法的准确性和泛化性，提高了锥束CT图像重建方法的准确性。本发明实施例所提供的锥束CT设备可实现本发明任一实施例所提供的锥束CT的图像重建方法，具备执行方法相应的功能模块和有益效果。图12是根据本发明实施例提供的一种电子设备的结构框图。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本发明的实现。如图12所示，电子设备10包括至少一个处理器11，以及与至少一个处理器11通信连接的存储器，如只读存储器12、随机访问存储器13等，其中，存储器存储有可被至少一个处理器执行的计算机程序，处理器11可以根据存储在只读存储器12中的计算机程序或者从存储单元18加载到随机访问存储器13中的计算机程序，来执行各种适当的动作和处理。在RAM 13中，还可存储电子设备10操作所需的各种程序和数据。处理器11、ROM 12以及RAM 13通过总线14彼此相连。输入/输出接口15也连接至总线14。电子设备10中的多个部件连接至I/O接口15，包括：输入单元16，例如键盘、鼠标等；输出单元17，例如各种类型的显示器、扬声器等；存储单元18，例如磁盘、光盘等；以及通信单元19，例如网卡、调制解调器、无线通信收发机等。通信单元19允许电子设备10通过诸如因特网的计算机网络和/或各种电信网络与其他设备交换信息/数据。处理器11可以是各种具有处理和计算能力的通用和/或专用处理组件。处理器11的一些示例包括但不限于中央处理单元、图形处理单元、各种专用的人工智能计算芯片、各种运行机器学习模型算法的处理器、数字信号处理器、以及任何适当的处理器、控制器、微控制器等。处理器11执行上文所描述的各个方法和处理，例如锥束CT的散射校正参数确定方法和/或锥束CT的图像重建方法。在一些实施例中，锥束CT的散射校正参数确定方法和锥束CT的图像重建方法可被实现为计算机程序，其被有形地包含于计算机可读存储介质，例如存储单元18。在一些实施例中，计算机程序的部分或者全部可以经由ROM 12和/或通信单元19而被载入和/或安装到电子设备10上。当计算机程序加载到RAM 13并由处理器11执行时，可以执行上文描述的锥束CT的散射校正参数确定方法和锥束CT的图像重建方法的一个或多个步骤。备选地，在其他实施例中，处理器11可以通过其他任何适当的方式而被配置为执行锥束CT的散射校正参数确定方法和/或锥束CT的图像重建方法。本文中以上描述的系统和技术的各种实施方式可以在数字电子电路系统、集成电路系统、场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、负载可编程逻辑设备、计算机硬件、固件、软件、和/或它们的组合中实现。这些各种实施方式可以包括：实施在一个或者多个计算机程序中，该一个或者多个计算机程序可在包括至少一个可编程处理器的可编程系统上执行和/或解释，该可编程处理器可以是专用或者通用可编程处理器，可以从存储系统、至少一个输入装置、和至少一个输出装置接收数据和指令，并且将数据和指令传输至该存储系统、该至少一个输入装置、和该至少一个输出装置。用于实施本发明的方法的计算机程序可以采用一个或多个编程语言的任何组合来编写。这些计算机程序可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器，使得计算机程序当由处理器执行时使流程图和/或框图中所规定的功能/操作被实施。计算机程序可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本发明的上下文中，计算机可读存储介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的计算机程序。计算机可读存储介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。备选地，计算机可读存储介质可以是机器可读信号介质。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。为了提供与用户的交互，可以在电子设备上实施此处描述的系统和技术，该电子设备具有：用于向用户显示信息的显示装置或者LCD监视器）；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给电子设备。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网、区块链网络和互联网。计算系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。服务器可以是云服务器，又称为云计算服务器或云主机，是云计算服务体系中的一项主机产品，以解决了传统物理主机与VPS服务中，存在的管理难度大，业务扩展性弱的缺陷。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本发明中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本发明的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本发明保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本发明的精神和原则之内所作的修改、等同替换和改进等，均应包含在本发明保护范围之内。
