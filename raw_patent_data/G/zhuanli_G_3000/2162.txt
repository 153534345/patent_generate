标题title
叶菜产量预测方法、装置、设备及介质
摘要abst
本发明提供一种叶菜产量预测方法、装置、设备及介质，涉及作物产量预测领域，该方法包括：获取目标区域的叶菜图像，获取目标区域在历史时段内的环境数据以及生理数据；输入叶菜图像至图像分割模型，获取第一目标产量，输入环境数据以及生理数据至预设机理模型，获取第二目标产量；输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述目标区域对应的叶菜产量。本发明构建基于机理模型和机器视觉的叶菜产量预测模型，将基于机器视觉的图像分割模型所预测产量与基于机理模型所预测产量进行拟合，在充分考虑机理模型和机器视觉的叶菜产量预测的同时，又能够修正单一图像算法或机理模型估算的产量数据，从而提高估算准确率。
权利要求书clms
1.一种叶菜产量预测方法，其特征在于，包括：获取目标区域的叶菜图像，获取所述目标区域在历史时段内的环境数据以及生理数据；输入所述叶菜图像至图像分割模型，获取所述图像分割模型输出的第一目标产量，输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量；输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量；所述预设拟合方程是根据样本区域对应的第一预测产量、第二预测产量以及实际产量进行拟合而确定的；所述第一预测产量是输入样本区域对应的叶菜图像至所述图像分割模型后确定的，所述第二预测产量是输入样本区域对应的样本环境数据以及样本生理数据至所述预设机理模型后确定的；所述图像分割模型是根据叶菜面积覆盖度样本数据以及产量样本数据进行训练而确定的；所述预设机理模型是根据所述样本环境数据以及所述样本生理数据中每一样本数据对产量结果的影响程度确定每一样本数据对应的影响权重后确定的。2.根据权利要求1所述的叶菜产量预测方法，其特征在于，所述获取目标区域的叶菜图像，包括：获取目标区域中每一目标子区域对应的叶菜子图像以及图像位置信息；根据每一目标子区域对应的图像位置信息拼接所有目标子区域对应的每一叶菜子图像，获取目标区域的叶菜图像。3.根据权利要求1所述的叶菜产量预测方法，其特征在于，所述获取所述目标区域在历史时段内的环境数据以及生理数据，包括：获取所述目标区域内叶菜在生长期内每小时的空气温度数据、空气湿度数据、累积光辐射数据、土壤温度数据以及二氧化碳浓度数据，均值化处理生长期内每天的所有空气温度数据、空气湿度数据、累积光辐射数据、土壤温度数据以及二氧化碳浓度数据，获取所述目标区域在历史时段内的环境数据；根据所述目标区域内叶菜在生长期内每天的根长数据、茎粗数据、叶片数量数据以及叶面积数据，获取所述目标区域在历史时段内的生理数据。4.根据权利要求3所述的叶菜产量预测方法，其特征在于，在获取所述目标区域在历史时段内的生理数据之前，所述方法还包括：确定所述目标区域内叶菜在生长期内的异常数据；对于任一异常数据，均值化处理所述异常数据对应日期的前一天数据以及所述异常数据对应日期的后一天数据，确定插补数据；基于所述插补数据替换所述异常数据。5.根据权利要求4所述的叶菜产量预测方法，其特征在于，所述确定所述目标区域内叶菜在生长期内的异常数据，包括：在确定任一日期的根长数据大于所述日期之后一天的根长数据的情况下，确定所述日期的根长数据为异常数据；在确定任一日期的茎粗数据大于所述日期之后一天的茎粗数据的情况下，确定所述日期的茎粗数据为异常数据；在确定任一日期的叶片数量数据大于所述日期之后一天的叶片数量数据的情况下，确定所述日期的叶片数量数据为异常数据；在确定任一日期的叶面积数据大于所述日期之后一天的叶面积数据的情况下，确定所述日期的叶面积数据为异常数据。6.根据权利要求1所述的叶菜产量预测方法，其特征在于，在输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量之前，所述方法还包括：对于所述样本环境数据以及所述样本生理数据中每一样本数据，根据敏感性分析法调整所述样本数据的取值，以确定调整所述样本数据后叶菜产量变化幅度，将所述叶菜产量变化幅度大于预设幅度的样本数据确定为目标样本数据；归一化处理所有目标样本数据对应的每一叶菜产量变化幅度，确定每一目标样本数据的影响权重；根据所有目标样本数据对应的每一影响权重确定所述预设机理模型。7.根据权利要求6所述的叶菜产量预测方法，其特征在于，所述输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量，包括：从所述环境数据以及所述生理数据中确定出与所述目标样本数据对应的目标环境数据以及目标生理数据；输入所述目标环境数据以及目标生理数据至所述预设机理模型，获取所述预设机理模型输出的第二目标产量；所述预设机理模型用于根据每一目标环境数据以及所述目标环境数据对应的影响权重，每一目标生理数据以及所述目标生理数据对应的影响权重确定所述第二目标产量。8.一种叶菜产量预测装置，其特征在于，包括：获取单元，所述获取单元用于获取目标区域的叶菜图像，获取所述目标区域在历史时段内的环境数据以及生理数据；第一输入单元，所述第一输入单元用于输入所述叶菜图像至图像分割模型，获取所述图像分割模型输出的第一目标产量，输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量；第二输入单元，所述第二输入单元用户输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量；所述预设拟合方程是根据样本区域对应的第一预测产量、第二预测产量以及实际产量进行拟合而确定的；所述第一预测产量是输入样本区域对应的叶菜图像至所述图像分割模型后确定的，所述第二预测产量是输入样本区域对应的样本环境数据以及样本生理数据至所述预设机理模型后确定的；所述图像分割模型是根据叶菜面积覆盖度样本数据以及产量样本数据进行训练而确定的；所述预设机理模型是根据所述样本环境数据以及所述样本生理数据中每一样本数据对产量结果的影响程度确定每一样本数据对应的影响权重后确定的。9.一种电子设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求1-7中任一项所述的叶菜产量预测方法。10.一种非暂态计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1-7中任一项所述的叶菜产量预测方法。
说明书desc
技术领域本发明涉及作物产量预测领域，尤其涉及一种叶菜产量预测方法、装置、设备及介质。背景技术采用机理模型模拟作物的生长趋势来预测叶菜产量，存在数据获取难、数据量小的问题，会一定程度上影响产量预测结果；而仅使用机器学习算法的叶菜产量预测，由于受到品种、栽培农艺等影响，在泛化性能上存在制约，导致其可解释性不高，两种方式所预测的叶菜产量均不够准确。发明内容本发明提供一种叶菜产量预测方法、装置、设备及介质，用以解决现有技术中叶菜产量预测不够准确的技术问题，提供了一种耦合机理模型以及机器学习算法来实现叶菜产量预测的技术方案。第一方面，本发明提供了一种叶菜产量预测方法，包括：获取目标区域的叶菜图像，获取所述目标区域在历史时段内的环境数据以及生理数据；输入所述叶菜图像至图像分割模型，获取所述图像分割模型输出的第一目标产量，输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量；输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量；所述预设拟合方程是根据样本区域对应的第一预测产量、第二预测产量以及实际产量进行拟合而确定的；所述第一预测产量是输入样本区域对应的叶菜图像至所述图像分割模型后确定的，所述第二预测产量是输入样本区域对应的样本环境数据以及样本生理数据至所述预设机理模型后确定的；所述图像分割模型是根据叶菜面积覆盖度样本数据以及产量样本数据进行训练而确定的；所述预设机理模型是根据所述样本环境数据以及所述样本生理数据中每一样本数据对产量结果的影响程度确定每一样本数据对应的影响权重后确定的。根据本发明提供的叶菜产量预测方法，所述获取目标区域的叶菜图像，包括：获取目标区域中每一目标子区域对应的叶菜子图像以及图像位置信息；根据每一目标子区域对应的图像位置信息拼接所有目标子区域对应的每一叶菜子图像，获取目标区域的叶菜图像。根据本发明提供的叶菜产量预测方法，所述获取所述目标区域在历史时段内的环境数据以及生理数据，包括：获取所述目标区域内叶菜在生长期内每小时的空气温度数据、空气湿度数据、累积光辐射数据、土壤温度数据以及二氧化碳浓度数据，均值化处理生长期内每天的所有空气温度数据、空气湿度数据、累积光辐射数据、土壤温度数据以及二氧化碳浓度数据，获取所述目标区域在历史时段内的环境数据；根据所述目标区域内叶菜在生长期内每天的根长数据、茎粗数据、叶片数量数据以及叶面积数据，获取所述目标区域在历史时段内的生理数据。根据本发明提供的叶菜产量预测方法，在获取所述目标区域在历史时段内的生理数据之前，所述方法还包括：确定所述目标区域内叶菜在生长期内的异常数据；对于任一异常数据，均值化处理所述异常数据对应日期的前一天数据以及所述异常数据对应日期的后一天数据，确定插补数据；基于所述插补数据替换所述异常数据。根据本发明提供的叶菜产量预测方法，所述确定所述目标区域内叶菜在生长期内的异常数据，包括：在确定任一日期的根长数据大于所述日期之后一天的根长数据的情况下，确定所述日期的根长数据为异常数据；在确定任一日期的茎粗数据大于所述日期之后一天的茎粗数据的情况下，确定所述日期的茎粗数据为异常数据；在确定任一日期的叶片数量数据大于所述日期之后一天的叶片数量数据的情况下，确定所述日期的叶片数量数据为异常数据；在确定任一日期的叶面积数据大于所述日期之后一天的叶面积数据的情况下，确定所述日期的叶面积数据为异常数据。根据本发明提供的叶菜产量预测方法，在输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量之前，所述方法还包括：对于所述样本环境数据以及所述样本生理数据中每一样本数据，根据敏感性分析法调整所述样本数据的取值，以确定调整所述样本数据后叶菜产量变化幅度，将所述叶菜产量变化幅度大于预设幅度的样本数据确定为目标样本数据；归一化处理所有目标样本数据对应的每一叶菜产量变化幅度，确定每一目标样本数据的影响权重；根据所有目标样本数据对应的每一影响权重确定所述预设机理模型。根据本发明提供的叶菜产量预测方法，所述输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量，包括：从所述环境数据以及所述生理数据中确定出与所述目标样本数据对应的目标环境数据以及目标生理数据；输入所述目标环境数据以及目标生理数据至所述预设机理模型，获取所述预设机理模型输出的第二目标产量；所述预设机理模型用于根据每一目标环境数据以及所述目标环境数据对应的影响权重，每一目标生理数据以及所述目标生理数据对应的影响权重确定所述第二目标产量。第二方面，本发明提供了一种叶菜产量预测装置，包括：获取单元，所述获取单元用于获取目标区域的叶菜图像，获取所述目标区域在历史时段内的环境数据以及生理数据；第一输入单元，所述第一输入单元用于输入所述叶菜图像至图像分割模型，获取所述图像分割模型输出的第一目标产量，输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量；第二输入单元，所述第二输入单元用户输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量；所述预设拟合方程是根据样本区域对应的第一预测产量、第二预测产量以及实际产量进行拟合而确定的；所述第一预测产量是输入样本区域对应的叶菜图像至所述图像分割模型后确定的，所述第二预测产量是输入样本区域对应的样本环境数据以及样本生理数据至所述预设机理模型后确定的；所述图像分割模型是根据叶菜面积覆盖度样本数据以及产量样本数据进行训练而确定的；所述预设机理模型是根据所述样本环境数据以及所述样本生理数据中每一样本数据对产量结果的影响程度确定每一样本数据对应的影响权重后确定的。第三方面，本发明还提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现如上述任一种所述叶菜产量预测方法。第四方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现如上述任一种所述叶菜产量预测方法。本发明提供的叶菜产量预测方法、装置、设备及介质，通过输入所述叶菜图像至图像分割模型，获取所述图像分割模型输出的第一目标产量，输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量，并输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量，本发明构建基于机理模型和机器视觉的叶菜产量预测模型，将基于机器视觉的图像分割模型所预测产量与基于机理模型所预测产量进行拟合，在充分考虑机理模型和机器视觉的叶菜产量预测的同时，又能够修正单一图像算法或机理模型估算的产量数据，从而提高估算准确率。附图说明为了更清楚地说明本发明或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明提供的叶菜产量预测方法的流程示意图之一；图2是本发明提供的获取目标区域的叶菜图像的流程示意图；图3是本发明提供的获取环境数据以及生理数据的流程示意图；图4是本发明提供的叶菜产量预测方法的流程示意图之二；图5是本发明提供的叶菜产量预测方法的流程示意图之三；图6是本发明提供的叶菜产量预测方法的流程示意图之四；图7是本发明提供的叶菜产量预测装置的结构示意图；图8是本发明提供的电子设备的结构示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚，下面将结合本发明中的附图，对本发明中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。对于叶菜产量预测可以采用机理模型、遥感数据、机器学习等方法，然而由于机理模型的数据获取难且数据量较小的问题，且受到种植环境和作物自身等多方面影响，很难通过其模拟的作物生长趋势来实现叶菜产量的精准预测；温室由于空间局限性，遥感数据采集设备适用条件受限；而仅使用机器学习算法预测产量则存在可解释性不高的缺点，受到品种、栽培农艺等影响，在泛化性能上存在制约，从而使得预测结果存在误差。为了解决上述技术问题，本发明提供了一种叶菜产量预测方法、装置、设备及介质，图1是本发明提供的叶菜产量预测方法的流程示意图之一，所述叶菜产量预测方法包括：步骤101、获取目标区域的叶菜图像，获取所述目标区域在历史时段内的环境数据以及生理数据。在步骤101中，可选地，所述目标区域为温室区域，本发明可以通过无人机搭载预设图像采集设备对温室区域内的叶菜进行图像采集，获取目标区域的叶菜图像。可选地，所述目标区域在历史时段内的环境数据则可以根据预设在所述温室区域内的各种传感器确定，例如，本发明可以通过温度传感器获取空气温度，通过湿度传感器获取空气湿度，通过光照传感器获取光辐射数据，通过温度计获取土壤温度，通过二氧化碳检测设备确定二氧化碳浓度等等。可选地，所述目标区域在历史时段内的生理数据可以根据在历史时段所记录的观测数据或者图像采集的方式确定，具体地，所述生理数据包括但不限于采集日期、叶菜根长、叶菜茎粗、叶菜叶片数量、叶菜叶面积等等信息。步骤102、输入所述叶菜图像至图像分割模型，获取所述图像分割模型输出的第一目标产量，输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量。在步骤102中，本发明通过输入所述叶菜图像至图像分割模型的第一层，获取所述图像分割模型第一层输出的叶菜面积部分以及图像整体面积；输入所述叶菜面积部分以及图像整体面积至所述图像分割模型的第二层，获取所述图像分割模型第二层输出的叶菜面积覆盖度；输入所述叶菜面积覆盖度至所述图像分割模型的第三层，获取所述图像分割模型第三层输出的第一目标产量。可选地，所述叶菜可以为生菜，由于生菜在生长成熟后所显示的图像中，所有绿色区域均为可食用部分，故本发明通过将绿色像素点作为生菜面积覆盖度，分割生菜绿色叶片，计算叶片所占面积得出生菜覆盖度，并以此作为后续预测产量的模型输入，以确定出第一目标产量，能够大大提高生菜产量预测的准确性，本发明可以通过图像数据中的绿色像素点确定生菜面积部分，对根据生菜面积部分以及图像整体面积的商值确定生菜面积覆盖度，还可以根据所述绿色像素点与图像整体像素点之间的比值确定所述生菜面积覆盖度。可选地，根据叶菜面积覆盖度样本数据以及产量样本数据进行训练确定所述图像分割模型的第三层，以使得在输入所述叶菜面积覆盖度至所述图像分割模型的第三层后，获取所述图像分割模型第三层输出的第一目标产量。可选地，本发明为了检测每一环境数据以及每一生理数据对产量的影响程度，通过采用敏感性分析法对模型中的作物参数进行敏感性分析，该方法可以在一定程度上省略各参数之间的相互联系，快速确定敏感性较高的参数。根据所述样本环境数据以及所述样本生理数据中每一样本数据对产量结果的影响程度，确定出对产量结果的影响程度较大的样本数据，并根据对产量结果的影响程度较大的样本数据对应的影响权重确定所述预设机理模型。步骤103、输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量。在步骤103中，所述第一预测产量是输入样本区域对应的叶菜图像至所述图像分割模型后确定的，所述第二预测产量是输入样本区域对应的样本环境数据以及样本生理数据至所述预设机理模型后确定的，本发明可以通过多次对样本区域的叶菜图像以及样本环境数据以及样本生理数据进行获取，从而确定每次样本区域所对应的第一预测产量、第二预测产量，通过对每次样本区域的实际产量进行获取，然后基于所有第一预测产量、所有第二预测产量以及所有实际产量进行拟合，确定出拟合参数，并根据确定出的拟合参数构建所述预设拟合方程，本发明根据样本区域对应的第一预测产量、第二预测产量以及实际产量进行拟合而确定所述预设拟合方程，以使得在输入所述第一目标产量以及所述第二目标产量至预设拟合方程后，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量。可选地，本发明根据叶菜图像得出第一目标产量，根据所述环境数据以及所述生理数据得出所述第二目标产量，并通过田间观测确定出实际产量，再拟合出两个预测目标产量与实际产量三者间的非线性关系公式，以此修正单一图像算法或机理模型的预测产量数据，提高产量预测的准确率，本发明通过提前预判叶菜产量可以支持管理者在劳动力需求、储存运输方面的研判决策，能够为叶菜保供的采收调度、价格预测以及供需研判等提供有力支撑。本发明集机理模型、图像算法技术为一体，能够较好的减少人力、准确预测产量，具体地，本发明以机理模型为基础框架，引入空气温度、湿度、累积光辐射等环境数据和叶面积、覆盖度等作物生理数据，模拟作物生长过程，得到预测产量。针对叶菜作物，建立基于图像分割技术的覆盖度提取方法，研究覆盖度与产量的响应关系，修正环境、生理数据驱动的机理模型的预测结果，实现作物产量的准确预估，采用温室环境、作物机理、图像等多源数据融合的方式实现叶菜产量的高精度动态预测。本发明提供的叶菜产量预测方法、装置、设备及介质，通过输入所述叶菜图像至图像分割模型，获取所述图像分割模型输出的第一目标产量，输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量，并输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量，本发明构建基于机理模型和机器视觉的叶菜产量预测模型，将基于机器视觉的图像分割模型所预测产量与基于机理模型所预测产量进行拟合，在充分考虑机理模型和机器视觉的叶菜产量预测的同时，又能够修正单一图像算法或机理模型估算的产量数据，从而提高估算准确率。图2是本发明提供的获取目标区域的叶菜图像的流程示意图，所述获取目标区域的叶菜图像，包括：步骤201、获取目标区域中每一目标子区域对应的叶菜子图像以及图像位置信息。在步骤201中，本发明可以通过搭载无人机在距离叶菜顶端预设距离处进行图像采集，如果温室内面积较大，单次图像采集无法完成整个温室内叶菜图像的采集，则可以根据预设规划路径进行所有目标子区域的图像采集，在图像采集的同时记录采集每一叶菜子图像时的图像位置信息，所述图像位置信息包括采集时的图像经纬度信息以及图像边缘的经纬度信息。步骤202、根据每一目标子区域对应的图像位置信息拼接所有目标子区域对应的每一叶菜子图像，获取目标区域的叶菜图像。在步骤202中，所述目标区域是所有目标子区域所形成的整体区域，在获取到每一目标子区域对应的叶菜子图像后，由于在先获取了每一目标子区域对应的图像经纬度信息以及图像边缘的经纬度信息，可以根据每一目标子区域对应的图像经纬度信息进行初步拼接，然后根据每一目标子区域对应的图像边缘的经纬度信息进行修正拼接，最终获取目标区域的叶菜图像，本发明通过此方案突破了在温室中难以采用无人机进行图像采集的局限性，为后续叶菜产量预测提供了图像数据支撑。可选地，本发明在获取目标区域的叶菜图像后需要对其进行图像预处理，包括：对模糊、位置异常、严重色变等图像进行清洗，通过数据增强方式进行扩增，当图像中出现叶片时，对叶片进行分割标注，形成标注文件。图3是本发明提供的获取环境数据以及生理数据的流程示意图，所述获取所述目标区域在历史时段内的环境数据以及生理数据，包括：步骤301、获取所述目标区域内叶菜在生长期内每小时的空气温度数据、空气湿度数据、累积光辐射数据、土壤温度数据以及二氧化碳浓度数据，均值化处理生长期内每天的所有空气温度数据、空气湿度数据、累积光辐射数据、土壤温度数据以及二氧化碳浓度数据，获取所述目标区域在历史时段内的环境数据。在步骤301中，本发明通过各小型温室环境传感器探测实时监测所述目标区域的环境数据，例如每隔一小时监测一次所述目标区域内叶菜在生长期内的空气温度数据、空气湿度数据、累积光辐射数据、土壤温度数据以及二氧化碳浓度数据，则在一天时间内，将获取24次所述目标区域的环境数据，均值化处理生长期内每天的所有空气温度数据、空气湿度数据、累积光辐射数据、土壤温度数据以及二氧化碳浓度数据，获取所述目标区域在历史时段内的环境数据，所述环境数据即为空气温度数据均值、空气湿度数据均值、累积光辐射数据均值、土壤温度数据均值以及二氧化碳浓度数据均值。步骤302、根据所述目标区域内叶菜在生长期内每天的根长数据、茎粗数据、叶片数量数据以及叶面积数据，获取所述目标区域在历史时段内的生理数据。在步骤302中，本发明通过图像分析或者人工观测等手段，确定所述目标区域内叶菜在生长期内每天的根长数据、茎粗数据、叶片数量数据以及叶面积数据，本发明通过每天测定的形式使得叶菜产量预测结果更加准确，所述生理数据测定频率越频繁，则叶菜产量预测结果越准确，而在其他实施例中，本发明还可以降低所述生理数据的测定频率，例如每周测定一次或者间隔一天测定一次，从而降低工作人员的测定压力。图4是本发明提供的叶菜产量预测方法的流程示意图之二，在获取所述目标区域在历史时段内的生理数据之前，所述方法还包括：步骤401、确定所述目标区域内叶菜在生长期内的异常数据。在步骤401中，本发明为了使得叶菜产量预测结果更为精确，需要对用于进行产量预测的原始数据进行数据清洗，去除掉异常数据，例如，根据叶菜的正常生长规律，在某一天所测得根长数据后再次测得的根长数据不可能小于之前所测得的根长数据，若在确定任一日期的根长数据大于所述日期之后一天的根长数据的情况下，确定所述日期的根长数据为异常数据。可选地，在确定任一日期的茎粗数据大于所述日期之后一天的茎粗数据的情况下，确定所述日期的茎粗数据为异常数据；在确定任一日期的叶片数量数据大于所述日期之后一天的叶片数量数据的情况下，确定所述日期的叶片数量数据为异常数据；在确定任一日期的叶面积数据大于所述日期之后一天的叶面积数据的情况下，确定所述日期的叶面积数据为异常数据，这些均可以单独作为异常数据的筛选步骤，也可以组合作为异常数据的筛选步骤。步骤402、对于任一异常数据，均值化处理所述异常数据对应日期的前一天数据以及所述异常数据对应日期的后一天数据，确定插补数据。在步骤402中，若根据步骤401，确定叶菜在生长期内的第10天的叶片数量为8片，其被确定为异常数据，则获取叶菜在生长期内的第9天的叶片数量为10片，叶菜在生长期内的第11天的叶片数量为12片，均值化处理所述异常数据对应日期的前一天数据以及所述异常数据对应日期的后一天数据，确定插补数据为叶菜在生长期内的第10天的叶片数量为11片。步骤403、基于所述插补数据替换所述异常数据。在步骤403中，针对环境、生理数据的预处理，本发明可以删减极度异常数据，例如，对于某一条数据的缺失利用前后数据取平均对其进行插补，对于某一条数据的异常利用前后数据取平均对其进行修正，基于所述插补数据替换所述异常数据后，则确定叶菜在生长期内的第9天的叶片数量为10片，叶菜在生长期内的第10天的叶片数量为11片，叶菜在生长期内的第11天的叶片数量为12片。图5是本发明提供的叶菜产量预测方法的流程示意图之三，在输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量之前，所述方法还包括：步骤501、对于所述样本环境数据以及所述样本生理数据中每一样本数据，根据敏感性分析法调整所述样本数据的取值，以确定调整所述样本数据后叶菜产量变化幅度，将所述叶菜产量变化幅度大于预设幅度的样本数据确定为目标样本数据。在步骤501中，本发明可以将实际测量的环境数据和生理数据作为所述样本环境数据以及所述样本生理数据，输入至预设机理模型，每次运行所述预设机理模型时，只将数据库中所述样本环境数据以及所述样本生理数据中的一个样本数据数值增加10％，然后计算这种变化对产量模拟结果的影响，对于不敏感、敏感度较低或敏感度较高但取值变化范围较小的参数，后期可以直接通过参考相关文献确定或直接利用模型默认值，减少需要实际测量的数据，降低人力；敏感度高且取值范围较大的参数即为所述叶菜产量变化幅度大于预设幅度的样本数据，将所述叶菜产量变化幅度大于预设幅度的样本数据确定为目标样本数据，则可以采用实际测量数据，本发明利用预设机理模型模拟作物生长过程，输入敏感度高且取值范围较大的参数的实测数据，根据机理模型内嵌的公式，得出预测产量结果。步骤502、归一化处理所有目标样本数据对应的每一叶菜产量变化幅度，确定每一目标样本数据的影响权重。在步骤502中，若确定所述目标样本数据为叶面积数据、空气温度数据、累积光辐射数据以及土壤温度数据，其中，所述叶面积数据对应的叶菜产量变化幅度为40%，所述空气温度数据对应的叶菜产量变化幅度为20%，所述累积光辐射数据对应的叶菜产量变化幅度为30%，所述土壤温度数据对应的叶菜产量变化幅度为10%，则归一化处理所有目标样本数据对应的每一叶菜产量变化幅度，确定每一目标样本数据的影响权重，所述叶面积数据的影响权重为0.4，所述空气温度数据的影响权重为0.2，所述累积光辐射数据的影响权重为0.3，所述土壤温度数据的影响权重为0.1。步骤503、根据所有目标样本数据对应的每一影响权重确定所述预设机理模型。在步骤503中，本发明将根据所述叶面积数据的影响权重为0.4，所述空气温度数据的影响权重为0.2，所述累积光辐射数据的影响权重为0.3，所述土壤温度数据的影响权重为0.1，确定所述预设机理模型，由于叶菜的产量是由其生长过程中的环境及自身生长发育共同决定，故本发明采用敏感性分析探明多源变量对叶菜产量预测的影响，采用温室环境、作物机理、图像等多源数据融合的方式实现叶菜产量的高精度动态预测。可选地，所述输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量，包括：从所述环境数据以及所述生理数据中确定出与所述目标样本数据对应的目标环境数据以及目标生理数据；输入所述目标环境数据以及目标生理数据至所述预设机理模型，获取所述预设机理模型输出的第二目标产量；所述预设机理模型用于根据每一目标环境数据以及所述目标环境数据对应的影响权重，每一目标生理数据以及所述目标生理数据对应的影响权重确定所述第二目标产量。可选地，本发明首先从所述环境数据以及所述生理数据中确定出敏感度高且取值范围较大的参数，即与所述目标样本数据对应的目标环境数据以及目标生理数据，结合预先根据每一目标环境数据以及目标生理数据的相关权重所构建的预设机理模型，从而在输入所述目标环境数据以及目标生理数据至所述预设机理模型之后，根据每一目标环境数据以及所述目标环境数据对应的影响权重，每一目标生理数据以及所述目标生理数据对应的影响权重确定所述第二目标产量，并由所述预设机理模型输出所述第二目标产量。本发明集机理模型、图像算法技术为一体，能够较好的减少人力、准确预测产量，以机理模型为基础框架，引入空气温度、湿度、累积光辐射等环境数据和叶面积、覆盖度等作物生理数据，模拟作物生长过程，得到预测产量；针对叶菜作物，建立基于图像分割技术的覆盖度提取方法，研究覆盖度与产量的响应关系，修正环境、生理数据驱动的机理模型的预测结果，实现作物产量的准确预估，本发明采用温室环境、作物机理、图像等多源数据融合的方式，在每日预测中，通过每日所获取的叶菜图像，以及每日更新的叶菜环境数据以及生理数据，实现叶菜产量的高精度动态预测。图6是本发明提供的叶菜产量预测方法的流程示意图之四，公开了一种耦合多源要素的生菜产量预测方法，本发明利用小型温室环境传感器采集环境数据，其中包括但不限于逐小时的空气温度、空气湿度、累积光辐射、土壤温度、二氧化碳浓度等环境变量，将相关指标利用平均值算法转换为逐日时序数据，为后续机理模型驱动建模提供数据信息。可选地，在采集环境数据的同时实测生理数据，包括但不限于日期、根长、茎粗、茎节数、叶片数量、叶面积、覆盖度、生物量、产量等信息，再对上述数据进行删除、插补以及修正处理。可选地，利用相机采集图像，并对图像进行清洗、扩增、筛选人工标注，将所有图像按照8：2的比例随机划分为训练集、测试集，将训练集集输入图像分割模型中训练模型，测试集测试模型准确率以便优化模型。可选地，利用训练好的模型分割生菜绿色叶片，计算叶片所占面积得出生菜覆盖度，根据实测的覆盖度和产量数据建立二者的关系，利用图像得出的覆盖度进而得出第一目标产量。可选地，引入作物生长机理模型来对温室内生菜的生长发育情况进行模拟，依据模型所需的作物对温度、辐射强度、二氧化碳浓度等要素的机能反应来模拟生菜在特定的温室小气候条件和采用特定的农技措施的情况下的潜在生长情况，本发明通过对机理模型进行敏感性参数分析，得出对于敏感度高且取值范围较大的参数，输入数据预处理后的敏感度高且取值范围较大的环境数据以及生理数据，利用机理模型模拟出第二目标产量。可选地，本发明根据样本区域对应的第一预测产量、第二预测产量以及田间观测产量数据进行非线性关系拟合确定预设拟合方程，输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的生菜产量，本发明融合环境、生理和图像数据，建立基于机理模型和机器视觉的生菜产量预测模型，拟合预测产量和田间观测产量的非线性关系，修正单一图像算法或机理模型估算的产量数据，提高估算准确率。图7是本发明提供的叶菜产量预测装置的结构示意图，提供了一种叶菜产量预测装置，包括获取单元1，所述获取单元用于获取目标区域的叶菜图像，获取所述目标区域在历史时段内的环境数据以及生理数据，所述获取单元1的工作原理可以参考前述步骤101，在此不予赘述。所述叶菜产量预测装置还包括第一输入单元2，所述第一输入单元用于输入所述叶菜图像至图像分割模型，获取所述图像分割模型输出的第一目标产量，输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量，所述第一输入单元2的工作原理可以参考前述步骤102，在此不予赘述。所述叶菜产量预测装置还包括第二输入单元3，所述第二输入单元用户输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量，所述第二输入单元3的工作原理可以参考前述步骤103，在此不予赘述。所述预设拟合方程是根据样本区域对应的第一预测产量、第二预测产量以及实际产量进行拟合而确定的；所述第一预测产量是输入样本区域对应的叶菜图像至所述图像分割模型后确定的，所述第二预测产量是输入样本区域对应的样本环境数据以及样本生理数据至所述预设机理模型后确定的；所述图像分割模型是根据叶菜面积覆盖度样本数据以及产量样本数据进行训练而确定的；所述预设机理模型是根据所述样本环境数据以及所述样本生理数据中每一样本数据对产量结果的影响程度确定每一样本数据对应的影响权重后确定的。本发明提供的叶菜产量预测方法、装置、设备及介质，通过输入所述叶菜图像至图像分割模型，获取所述图像分割模型输出的第一目标产量，输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量，并输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量，本发明构建基于机理模型和机器视觉的叶菜产量预测模型，将基于机器视觉的图像分割模型所预测产量与基于机理模型所预测产量进行拟合，在充分考虑机理模型和机器视觉的叶菜产量预测的同时，又能够修正单一图像算法或机理模型估算的产量数据，从而提高估算准确率。图8是本发明提供的电子设备的结构示意图。如图8所示，该电子设备可以包括：处理器810、通信接口820、存储器830和通信总线840，其中，处理器810，通信接口820，存储器830通过通信总线840完成相互间的通信。处理器810可以调用存储器830中的逻辑指令，以执行叶菜产量预测方法，该方法包括：获取目标区域的叶菜图像，获取所述目标区域在历史时段内的环境数据以及生理数据；输入所述叶菜图像至图像分割模型，获取所述图像分割模型输出的第一目标产量，输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量；输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量；所述预设拟合方程是根据样本区域对应的第一预测产量、第二预测产量以及实际产量进行拟合而确定的；所述第一预测产量是输入样本区域对应的叶菜图像至所述图像分割模型后确定的，所述第二预测产量是输入样本区域对应的样本环境数据以及样本生理数据至所述预设机理模型后确定的；所述图像分割模型是根据叶菜面积覆盖度样本数据以及产量样本数据进行训练而确定的；所述预设机理模型是根据所述样本环境数据以及所述样本生理数据中每一样本数据对产量结果的影响程度确定每一样本数据对应的影响权重后确定的。此外，上述的存储器830中的逻辑指令可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。另一方面，本发明还提供一种计算机程序产品，所述计算机程序产品包括计算机程序，计算机程序可存储在非暂态计算机可读存储介质上，所述计算机程序被处理器执行时，计算机能够执行上述各方法所提供的一种叶菜产量预测方法，该方法包括：获取目标区域的叶菜图像，获取所述目标区域在历史时段内的环境数据以及生理数据；输入所述叶菜图像至图像分割模型，获取所述图像分割模型输出的第一目标产量，输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量；输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量；所述预设拟合方程是根据样本区域对应的第一预测产量、第二预测产量以及实际产量进行拟合而确定的；所述第一预测产量是输入样本区域对应的叶菜图像至所述图像分割模型后确定的，所述第二预测产量是输入样本区域对应的样本环境数据以及样本生理数据至所述预设机理模型后确定的；所述图像分割模型是根据叶菜面积覆盖度样本数据以及产量样本数据进行训练而确定的；所述预设机理模型是根据所述样本环境数据以及所述样本生理数据中每一样本数据对产量结果的影响程度确定每一样本数据对应的影响权重后确定的。又一方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现以执行上述各方法提供的叶菜产量预测方法，该方法包括：获取目标区域的叶菜图像，获取所述目标区域在历史时段内的环境数据以及生理数据；输入所述叶菜图像至图像分割模型，获取所述图像分割模型输出的第一目标产量，输入所述环境数据以及所述生理数据至预设机理模型，获取所述预设机理模型输出的第二目标产量；输入所述第一目标产量以及所述第二目标产量至预设拟合方程，获取所述预设拟合方程输出的，所述目标区域对应的叶菜产量；所述预设拟合方程是根据样本区域对应的第一预测产量、第二预测产量以及实际产量进行拟合而确定的；所述第一预测产量是输入样本区域对应的叶菜图像至所述图像分割模型后确定的，所述第二预测产量是输入样本区域对应的样本环境数据以及样本生理数据至所述预设机理模型后确定的；所述图像分割模型是根据叶菜面积覆盖度样本数据以及产量样本数据进行训练而确定的；所述预设机理模型是根据所述样本环境数据以及所述样本生理数据中每一样本数据对产量结果的影响程度确定每一样本数据对应的影响权重后确定的。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分所述的方法。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
