标题title
一种三维砂型打印铺砂过程中的缺陷识别方法和装置
摘要abst
本发明提供了一种三维砂型打印铺砂过程中的缺陷识别方法和装置，其中方法包括：获取三维砂型打印铺砂过程中的图像数据，并构建待打印图片的打印掩模图和与砂床图像数据对应的缺陷掩模图，对打印掩模图和缺陷掩模图进行按位运算，得到缺陷识别掩模图，缺陷识别掩模图包括缺陷位置和缺陷类别，根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作。本发明的有益效果包括：根据缺陷识别掩模图对铺砂过程中产生的缺陷进行监控，能够有效的减轻因铺砂过程中的缺陷对砂型打印质量的影响；通过缺陷位置与打印位置的对比，可以减少额外操作的频率，使打印过程更为顺畅，有利于打印过程中无人值守，减少时间的浪费。
权利要求书clms
1.一种三维砂型打印铺砂过程中的缺陷识别方法，其特征在于，包括：获取三维砂型打印铺砂过程中的图像数据，所述图像数据包括图像采集设备采集到的当前层的砂床图像数据、以及与当前层砂床图像数据对应的待打印图片数据；在切片形成的与当前层砂床图像数据对应的待打印图片中分别对打印区域和非打印区域进行标记，并构建待打印图片的打印掩模图；将所述砂床图像数据输入预设铺砂缺陷检测模型，由所述铺砂缺陷检测模型对所述砂床图像数据进行初次网格划分，得到若干个第一网格区域，并对所述第一网格区域内的第一图像块进行缺陷识别，得到与所述第一图像块对应的识别结果，所述识别结果包括缺陷位置和缺陷类别，所述缺陷类别包括无缺陷、缺砂和粘砂；根据砂床图像数据的缺陷位置和缺陷类别构建与所述砂床图像数据对应的缺陷掩模图；对打印掩模图和缺陷掩模图进行按位运算，得到缺陷识别掩模图，所述缺陷识别掩模图包括缺陷位置和缺陷类别，根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作。2.根据权利要求1所述的方法，其特征在于，所述根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作，包括：若待打印图片的打印区域和非打印区域均不存在铺砂缺陷，继续执行三维砂型的打印进程；若待打印图片的打印区域不存在铺砂缺陷，且非打印区域存在铺砂缺陷，继续执行三维砂型的打印进程；若待打印图片的打印区域存在铺砂缺陷，中止三维砂型的打印进程，并根据缺陷位置和缺陷类别进行处理。3.根据权利要求2所述的方法，其特征在于，所述若待打印图片的打印区域存在铺砂缺陷，中止三维砂型的打印进程，并根据缺陷位置和缺陷类别进行处理，包括：若所述缺陷类别为缺砂，根据所述缺陷位置进行补砂，并在补砂后对砂层执行铺平操作；若所述缺陷类别为粘砂，通过铺砂辊清洁机构对铺砂辊表面进行清洁，并在清洁后对砂层执行铺平操作。4.根据权利要求3所述的方法，其特征在于，在待打印图片的打印区域存在铺砂缺陷，中止三维砂型的打印进程，并根据缺陷位置和缺陷类别进行处理后，所述方法还包括：获取对砂层执行铺平操作后的当前层的图像数据，并由所述铺砂缺陷检测模型进行缺陷识别。5.根据权利要求1所述的方法，其特征在于，在对所述第一网格区域内的第一图像块进行缺陷识别，得到与所述第一图像块对应的识别结果后，所述方法还包括：若所述缺陷类别为无缺陷，将所述第一图像块标记为无缺陷；若所述缺陷类别为缺砂或粘砂，对所述第一图像块进行二次网格划分，得到若干个第二网格区域，并对所述第二网格区域内的第二图像块进行缺陷识别，得到与所述第二图像块对应的识别结果，识别结果包括缺陷位置和缺陷类别，所述缺陷类别包括无缺陷、缺砂和粘砂。6.一种三维砂型打印铺砂过程中的缺陷识别装置，其特征在于，包括：图像数据获取模块，用于获取三维砂型打印铺砂过程中的图像数据，所述图像数据包括图像采集设备采集到的当前层的砂床图像数据、以及与当前层砂床图像数据对应的待打印图片数据；打印掩模图获取模块，用于在切片形成的与当前层砂床图像数据对应的待打印图片中分别对打印区域和非打印区域进行标记，并构建待打印图片的打印掩模图；第一砂床图像缺陷识别模块，用于将所述砂床图像数据输入预设铺砂缺陷检测模型，由所述铺砂缺陷检测模型对所述砂床图像数据进行初次网格划分，得到若干个第一网格区域，并对所述第一网格区域内的第一图像块进行缺陷识别，得到与所述第一图像块对应的识别结果，所述识别结果包括缺陷位置和缺陷类别，所述缺陷类别包括无缺陷、缺砂和粘砂；缺陷掩模图获取模块，用于根据砂床图像数据的缺陷位置和缺陷类别构建与所述砂床图像数据对应的缺陷掩模图；三维砂型打印模块，用于对打印掩模图和缺陷掩模图进行按位运算，得到缺陷识别掩模图，所述缺陷识别掩模图包括缺陷位置和缺陷类别，根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作。7.根据权利要求6所述的装置，其特征在于，所述三维砂型打印模块包括：第一打印控制子模块，用于若待打印图片的打印区域和非打印区域均不存在铺砂缺陷，继续执行三维砂型的打印进程；第二打印控制子模块，用于若待打印图片的打印区域不存在铺砂缺陷，且非打印区域存在铺砂缺陷，继续执行三维砂型的打印进程；第三打印控制子模块，用于若待打印图片的打印区域存在铺砂缺陷，中止三维砂型的打印进程，并根据缺陷位置和缺陷类别进行处理。8.根据权利要求7所述的装置，其特征在于，所述第三打印控制子模块包括：第一打印控制单元，用于若所述缺陷类别为缺砂，根据所述缺陷位置进行补砂，并在补砂后对砂层执行铺平操作；第二打印控制单元，用于若所述缺陷类别为粘砂，通过铺砂辊清洁机构对铺砂辊表面进行清洁，并在清洁后对砂层执行铺平操作。9.一种电子设备，其特征在于，包括：处理器、存储器及存储在所述存储器上并能够在所述处理器上运行的计算机程序，所述计算机程序被所述处理器执行时实现如权利要求1-7中任一项所述方法的步骤。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储计算机程序，所述计算机程序被处理器执行时实现如权利要求1-7中任一项所述方法的步骤。
说明书desc
技术领域本发明涉及三维砂型打印技术领域，特别是涉及一种三维砂型打印铺砂过程中的缺陷识别方法和装置。背景技术三维砂型打印技术，是3D打印技术在砂型铸造领域的一种前沿应用技术。以铸造砂型的三维模型文件为基础，在型砂床上喷洒粘结剂，通过层层粘结的方式来构建砂型的实体。综合计算机图形处理、数字化信息控制、机电技术和材料技术等多项技术，使砂型的制造摆脱了传统的手工制模以及模样的约束，在一台设备上能够快速的制造出具有复杂形状的砂型用于铸造生产，从而实现砂型的快速自由制造，能够为传统砂型铸造工艺难以生产的高复杂零件提供生产条件。三维砂型打印的打印流程可大致分为铺砂以及打印两个不断循环的过程，铺砂过程中，可能会出现砂型部分位置缺砂或粘砂的现象，影响最终砂型产品的质量和精度。申请号为CN110394422A的专利，公开了一种砂型打印过程在线监控装置和方法，该发明通过两台布置于打印机喷头两侧工业相机，分别监测打印前和打印后状态，获得较高的图像监测质量，实现砂型打印过程实时监控。然而，使用该种砂型打印过程在线监控装置，虽然能够及时的发现砂层缺陷，但是，在实际三维砂型打印的打印流程中，非打印位置缺砂并不影响最终砂型产品的质量和精度，对非打印位置缺砂进行处理会使得打印过程不太顺畅，从而造成时间和生产材料的浪费。发明内容鉴于上述问题，提出了本发明实施例以便提供一种克服上述问题或者至少部分地解决上述问题的一种三维砂型打印铺砂过程中的缺陷识别方法和相应的一种三维砂型打印铺砂过程中的缺陷识别装置。为了解决上述问题，一方面，本发明实施例公开了一种三维砂型打印铺砂过程中的缺陷识别方法，包括：获取三维砂型打印铺砂过程中的图像数据，所述图像数据包括图像采集设备采集到的当前层的砂床图像数据、以及与当前层砂床图像数据对应的待打印图片数据；在切片形成的与当前层砂床图像数据对应的待打印图片中分别对打印区域和非打印区域进行标记，并构建待打印图片的打印掩模图；将所述砂床图像数据输入预设铺砂缺陷检测模型，由所述铺砂缺陷检测模型对所述砂床图像数据进行初次网格划分，得到若干个第一网格区域，并对所述第一网格区域内的第一图像块进行缺陷识别，得到与所述第一图像块对应的识别结果，所述识别结果包括缺陷位置和缺陷类别，所述缺陷类别包括无缺陷、缺砂和粘砂；根据砂床图像数据的缺陷位置和缺陷类别构建与所述砂床图像数据对应的缺陷掩模图；对打印掩模图和缺陷掩模图进行按位运算，得到缺陷识别掩模图，所述缺陷识别掩模图包括缺陷位置和缺陷类别，根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作。可选的，所述根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作，包括：若待打印图片的打印区域和非打印区域均不存在铺砂缺陷，继续执行三维砂型的打印进程；若待打印图片的打印区域不存在铺砂缺陷，且非打印区域存在铺砂缺陷，继续执行三维砂型的打印进程；若待打印图片的打印区域存在铺砂缺陷，中止三维砂型的打印进程，并根据缺陷位置和缺陷类别进行处理。可选的，所述若待打印图片的打印区域存在铺砂缺陷，中止三维砂型的打印进程，并根据缺陷位置和缺陷类别进行处理，包括：若所述缺陷类别为缺砂，根据所述缺陷位置进行补砂，并在补砂后对砂层执行铺平操作；若所述缺陷类别为粘砂，通过铺砂辊清洁机构对铺砂辊表面进行清洁，并在清洁后对砂层执行铺平操作。可选的，在待打印图片的打印区域存在铺砂缺陷，中止三维砂型的打印进程，并根据缺陷位置和缺陷类别进行处理后，所述方法还包括：获取对砂层执行铺平操作后的当前层的图像数据，并由所述铺砂缺陷检测模型进行缺陷识别。可选的，在对所述第一网格区域内的第一图像块进行缺陷识别，得到与所述第一图像块对应的识别结果后，所述方法还包括：若所述缺陷类别为无缺陷，将所述第一图像块标记为无缺陷；若所述缺陷类别为缺砂或粘砂，对所述第一图像块进行二次网格划分，得到若干个第二网格区域，并对所述第二网格区域内的第二图像块进行缺陷识别，得到与所述第二图像块对应的识别结果，识别结果包括缺陷位置和缺陷类别，所述缺陷类别包括无缺陷、缺砂和粘砂。另一方面，本发明还提供了一种三维砂型打印铺砂过程中的缺陷识别装置，包括：图像数据获取模块，用于获取三维砂型打印铺砂过程中的图像数据，所述图像数据包括图像采集设备采集到的当前层的砂床图像数据、以及与当前层砂床图像数据对应的待打印图片数据；打印掩模图获取模块，用于在切片形成的与当前层砂床图像数据对应的待打印图片中分别对打印区域和非打印区域进行标记，并构建待打印图片的打印掩模图；第一砂床图像缺陷识别模块，用于将所述砂床图像数据输入预设铺砂缺陷检测模型，由所述铺砂缺陷检测模型对所述砂床图像数据进行初次网格划分，得到若干个第一网格区域，并对所述第一网格区域内的第一图像块进行缺陷识别，得到与所述第一图像块对应的识别结果，所述识别结果包括缺陷位置和缺陷类别，所述缺陷类别包括无缺陷、缺砂和粘砂；缺陷掩模图获取模块，用于根据砂床图像数据的缺陷位置和缺陷类别构建与所述砂床图像数据对应的缺陷掩模图；三维砂型打印模块，用于对打印掩模图和缺陷掩模图进行按位运算，得到缺陷识别掩模图，所述缺陷识别掩模图包括缺陷位置和缺陷类别，根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作。可选的，所述三维砂型打印模块包括：第一打印控制子模块，用于若待打印图片的打印区域和非打印区域均不存在铺砂缺陷，继续执行三维砂型的打印进程；第二打印控制子模块，用于若待打印图片的打印区域不存在铺砂缺陷，且非打印区域存在铺砂缺陷，继续执行三维砂型的打印进程；第三打印控制子模块，用于若待打印图片的打印区域存在铺砂缺陷，中止三维砂型的打印进程，并根据缺陷位置和缺陷类别进行处理。可选的，所述第三打印控制子模块包括：第一打印控制单元，用于若所述缺陷类别为缺砂，根据所述缺陷位置进行补砂，并在补砂后对砂层执行铺平操作；第二打印控制单元，用于若所述缺陷类别为粘砂，通过铺砂辊清洁机构对铺砂辊表面进行清洁，并在清洁后对砂层执行铺平操作。可选的，所述装置还包括：第二砂床图像缺陷识别模块，用于获取对砂层执行铺平操作后的当前层的图像数据，并由所述铺砂缺陷检测模型进行缺陷识别。可选的，所述装置还包括：图像标记模块，永远若所述缺陷类别为无缺陷，将所述第一图像块标记为无缺陷；第三砂床图像缺陷识别模块，用于若所述缺陷类别为缺砂或粘砂，对所述第一图像块进行二次网格划分，得到若干个第二网格区域，并对所述第二网格区域内的第二图像块进行缺陷识别，得到与所述第二图像块对应的识别结果，识别结果包括缺陷位置和缺陷类别，所述缺陷类别包括无缺陷、缺砂和粘砂。另一方面，本发明的实施例还提供了一种电子设备，该电子设备包括处理器、存储器及存储在所述存储器上并能够在所述处理器上运行的计算机程序，所述计算机程序被所述处理器执行时实现该三维砂型打印铺砂过程中的缺陷识别方法的步骤。另一方面，本发明的实施例还提供了一种计算机可读存储介质，所述计算机可读存储介质上存储计算机程序，所述计算机程序被处理器执行时实现该三维砂型打印铺砂过程中的缺陷识别方法的步骤。本发明提供了一种三维砂型打印铺砂过程中的缺陷识别方法和装置，其中方法包括：获取三维砂型打印铺砂过程中的图像数据，并构建待打印图片的打印掩模图和与砂床图像数据对应的缺陷掩模图，对打印掩模图和缺陷掩模图进行按位运算，得到缺陷识别掩模图，缺陷识别掩模图包括缺陷位置和缺陷类别，根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作。本发明的有益效果包括：根据缺陷识别掩模图对铺砂过程中产生的缺陷进行监控，能够有效的减轻因铺砂过程中的缺陷对砂型打印质量的影响；通过缺陷位置与打印位置的对比，可以减少额外操作的频率，使打印过程更为顺畅，有利于打印过程中无人值守，减少时间的浪费。附图说明图1为本发明实施例提供的一种三维砂型打印铺砂过程中的缺陷识别方法的步骤流程图；图2为本发明实施例提供的一种三维砂型打印铺砂过程中的缺陷识别装置的结构框图；图3为本发明实施例提供的一种三维砂型打印铺砂过程中的缺陷识别方法的待打印的三维模型的示意图；图4为本发明实施例提供的一种三维砂型打印铺砂过程中的缺陷识别方法的待打印的三维模型的当前高度的切片图像；图5为本发明实施例提供的一种三维砂型打印铺砂过程中的缺陷识别方法的当前层砂床图像数据对应的待打印图片的打印掩模图；图6本发明实施例提供的一种三维砂型打印铺砂过程中的缺陷识别方法采用铺砂缺陷检测模型识别出的不同的缺陷区域的图像；图7为本发明实施例提供的一种三维砂型打印铺砂过程中的缺陷识别方法的打印掩膜图与缺陷区域进行与运算的过程示意图；图8为本发明实施例提供的一种三维砂型打印铺砂过程中的缺陷识别方法的打印掩膜图与缺陷区域进行与运算的结果示意图。具体实施方式为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。图1为本发明实施例提供的一种三维砂型打印铺砂过程中的缺陷识别方法的步骤流程图，该方法包括以下步骤：步骤101、获取三维砂型打印铺砂过程中的图像数据，所述图像数据包括图像采集设备采集到的当前层的砂床图像数据、以及与当前层砂床图像数据对应的待打印图片数据；在一些实施例中，打印铺砂过程中当前层的砂床图像数据可以通过工业相机进行拍摄获取。示例性的，为获取完整的砂床表面图像，本领域技术人员可以在砂床上方安装多个工业相机形成工业相机矩阵，拍摄多张边缘有所重合的砂床表面图像，并根据相机的位置和边缘将工业相机拍摄到的图片组合成为完整的砂床图像。需要说明的是，为了保证砂床图像数据的完整性，相邻的工业相机的成像区域需要至少有10mm的重合区域，以保障用于图像拼合成完整的砂床图像，工业相机成像区域总和必须覆盖全部砂床，同时，相邻工业相机之间的距离尽量保持一致。待打印图片数据可以直接根据实际打印需求获取，在对待打印的图片进行切片后，可以形成与当前层砂床图像数据对应的待打印图片数据。对待打印图片进行切片在现有技术中已有较多应用，本申请实施例对此不作赘述。在一些实施中，打印铺砂过程中当前层的砂床图像数据可以通过工业相机进行拍摄获取，砂床图像数据是经由工业相机采集三维砂型打印机器当前工作幅面图像经处理而得到的图像数据，该图像数据反映了三维砂型打印设备在完成一次铺砂操作之后所得到的铺砂幅面的铺砂状况。 在一个具体的应用示例中，工业相机可以通过网络与处理器连接，处理器用于对工业相机获取的图像进行处理。具体的实现流程可以包括：获取三维砂型打印设备铺砂情况的原始图像数据，对原始图像进行透视变换，透视变换参数为在缺陷识别执行前进行，裁剪掉原始图像中非代表三维砂型打印设备铺砂情况的数据，仅留下目标区域的图像数据，对目标区域进行数字图像处理，目标区域的图像数据进行增强。需要说明的是，对目标区域进行数字图像处理的处理方法，在实际应用中可以包括多种图像处理方法，如白平衡、高斯滤波、中值滤波等。经过处理后输出的目标图像数据即为三维砂型打印设备当前层铺砂情况的砂床图像数据。步骤102、在切片形成的与当前层砂床图像数据对应的待打印图片中分别对打印区域和非打印区域进行标记，并构建待打印图片的打印掩模图；为了方便对与当前层砂床图像数据对应的待打印图片中的打印区域和非打印区域进行区分，可以在切片形成的待打印图片中，将打印区域标记为1，非打印区域标记为0，形成待打印图片的打印掩膜图。具体的，可以采用如下内容来构建待打印图片的打印掩膜图：步骤1021：通过三维模型切片方法获取当前层砂床图像数据对应的切片图像；如图3和图4所示，图3为待打印的三维模型，图4为获取的当前高度/当前层的切片图像；步骤1022：创建与当前层砂床图像幅面大小一致的空白掩膜，根据打印时设置的三维模型打印位置和打印分辨率，将切片图像映射到创建的空白掩膜上；如掩膜图像上的像素点位于切片图像之外，则将该像素点标记为0；如果掩膜图像上的像素点位于切片图像之内，但是位于打印区域范围之外，则将该像素点标记为0；如果掩膜图像上的像素点位于打印区域之内，则将像素点标记为1；步骤1023：各标记为0的像素点共同构成非打印区域，各标记为1的像素点共同构成打印区域，得到当前层砂床图像数据对应的待打印图片的打印掩模图，即图5所示的图像。步骤103、将所述砂床图像数据输入预设铺砂缺陷检测模型，由所述铺砂缺陷检测模型对所述砂床图像数据进行初次网格划分，得到若干个第一网格区域，并对所述第一网格区域内的第一图像块进行缺陷识别，得到与所述第一图像块对应的识别结果，所述识别结果包括缺陷位置和缺陷类别，所述缺陷类别包括无缺陷、缺砂和粘砂；由于缺砂或者粘砂是因为缺陷部位的砂的边缘存在间隙，即间隙处的砂床存在细微的模糊或者透视效果，肉眼较难直观的发现这些缺陷。为了对这些采用机器视觉方式进行识别，需要建立相应的机器视觉模型并有效训练。具体的，在采用铺砂缺陷检测模型对砂床图像数据进行缺陷检测前，需要对预设铺砂缺陷检测模型进行训练，具体的训练过程可以包括以下步骤：1、训练数据集的获取：通过多次的铺砂和图像采集，采集大量的砂床表面图像，对采集到的砂床表面图像进行裁剪和缩放，得到多个固定尺寸的、携带或者不携带铺砂缺陷的图像块，并标注图像块的缺陷类型。需要说明的是，对砂床表面图像的裁剪和缩放指从砂床图像中裁剪出任意尺寸大小的图像块，目的在于在样本中保留不同尺度下的缺陷特征信息。在对获取的图像块样本进行样本标注的过程中，缺陷标记包括无缺陷、缺砂和粘砂，若图像块中包含缺砂和粘砂两种缺陷，则标记为粘砂。2、将标记后的图像块按预设比例输入缺陷识别分类神经网络进行训练。于本实施例中，由于实际获取的图像块样本中，无缺陷样本的数量要远远高于缺砂和粘砂的样本数量，因此，上述预设比例可以将无缺陷、缺砂和粘砂的三种类型的样本数量的比例设置为1：1：1，当然，本领域技术人员可以根据实际需求对样本数量的比例进行调整。同时，为了保障缺陷识别分类神经网络的训练效率和识别成功率，在训练的过程中，应当将所有图像块都缩放到神经网络所规定的输入像素尺寸大小。缺陷识别分类神经网络的训练可以采用ResNet网络结构为基础，将无缺陷、缺砂和粘砂的三种类型的样本数量的比例设置为1：1：1后，取全部样本的80%的图像数据输入ResNet神经网络进行训练，使用交叉熵函数作为损失函数，剩余20%的样本图像数据用作训练后的缺陷识别分类神经网络的测试数据，不参与训练，直至训练完成时，ResNet神经网络对缺陷的识别准确率达到95%以上。需要说明的是，本领域技术人员可以根据实际需求对铺砂缺陷检测模型的识别准确率进行阈值设定，并相应的调整训练参数，直至铺砂缺陷检测模型达到预设的检测要求。可以较可靠的识别各切片图像中的缺砂或者粘砂的信息。在铺砂缺陷检测模型训练完成后，可以将所床图像数据输入预设铺砂缺陷检测模型，由铺砂缺陷检测模型对砂床图像数据进行缺陷检测。为了减少缺陷识别的运算量，在进行缺陷检测的过程中，可以采用图像金字塔分割方法。具体的，首先根据设置的图像块最大实际尺寸，对砂床图像进行初次网格划分，得到若干个第一网格区域，并对第一网格区域内的第一图像块输入神经网络进行缺陷识别，得到与第一图像块对应的识别结果，该识别结果包括缺陷位置和缺陷类别，缺陷类别包括无缺陷、缺砂和粘砂。在得到识别结果后，若缺陷类别为无缺陷，将第一图像块标记为无缺陷；若缺陷类别为缺砂或粘砂，对第一图像块进行二次网格划分，得到若干个第二网格区域，并将第二网格区域内的第二图像块输入神经网络进行缺陷识别，得到与第二图像块对应的识别结果，并重复上述分割和识别的过程，如此循环直至分割出来的图像块到达设定好的最小图像块实际尺寸。采用上述图像分割的方式，可以提高铺砂缺陷检测模型识别砂床图像数据缺陷的效率。示例性的，在上述图像切割和识别过程中，可以在图像块分割时，保存该图像块的坐标位置和尺寸）。步骤104、根据砂床图像数据的缺陷位置和缺陷类别构建与所述砂床图像数据对应的缺陷掩模图；在使用铺砂缺陷检测模型进行缺陷识别后，对相应的砂床图像数据分割后的图像块进行标记。示例性的，可以将砂床图像数据中存在缺砂或粘砂缺陷的位置标记为1，无缺陷位置标记为0，形成与砂床图像数据对应的缺陷掩模图。具体的，如图6展示了识别出的不同的缺陷区域。图6上方的图像为缺砂缺陷；图6下方的图像为粘砂缺陷，当存在不同的缺陷时，不同的缺陷可以用不同深度的颜色表示；将步骤1023获得的打印掩膜图与缺陷区域进行“与”运算求交集，与运算的过程如图7所示，与运算的结果如图8所示，图8展示的是粘砂缺陷与打印掩膜图的交集公共部分。步骤105、对打印掩模图和缺陷掩模图进行按位运算，得到缺陷识别掩模图，所述缺陷识别掩模图包括缺陷位置和缺陷类别，根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作。其中，根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作，包括：若待打印图片的打印区域和非打印区域均不存在铺砂缺陷，继续执行三维砂型的打印进程；若待打印图片的打印区域不存在铺砂缺陷，且非打印区域存在铺砂缺陷，继续执行三维砂型的打印进程；若待打印图片的打印区域存在铺砂缺陷，中止三维砂型的打印进程，并根据缺陷位置和缺陷类别进行处理。需要说明的是，若缺陷类别为缺砂，缺砂一般是因为铺砂时供砂量不足，导致的砂床凹陷，需要通过供砂机构在缺砂处重新供砂，然后再次进行铺平。若缺陷类别为粘砂，粘砂一般是由于铺砂辊表面不洁净造成砂床表面规律型的突起、凹陷及划痕，需要通过铺砂辊清洁机构对铺砂辊表面进行清洁，并重新进行砂床铺平。为了减轻因铺砂过程中的缺陷对砂型打印质量的影响，根据缺陷位置和缺陷类别进行处理后，可以获取对砂层执行铺平操作后的当前层的图像数据，并由铺砂缺陷检测模型进行缺陷识别，具体缺陷识别过程与上述缺陷识别相同，在此不作赘述。本发明提供了一种三维砂型打印铺砂过程中的缺陷识别方法和装置，其中方法包括：获取三维砂型打印铺砂过程中的图像数据，并构建待打印图片的打印掩模图和与砂床图像数据对应的缺陷掩模图，对打印掩模图和缺陷掩模图进行按位运算，得到缺陷识别掩模图，缺陷识别掩模图包括缺陷位置和缺陷类别，根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作。本发明的有益效果包括：根据缺陷识别掩模图对铺砂过程中产生的缺陷进行监控，能够有效的减轻因铺砂过程中的缺陷对砂型打印质量的影响，避免因铺砂缺陷导致砂型结构破坏，强度降低甚至出现损坏，从而造成时间和生产材料的浪费；通过待打印图像位置与缺陷位置的相关分析，只处理对打印质量存在影响的缺陷区域，尽量保证打印过程的流畅和顺利，可以减少额外操作的频率，有利于制造过程中无人值守，减少时间的浪费。需要说明的是，对于方法实施例，为了简单描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本发明实施例并不受所描述的动作顺序的限制，因为依据本发明实施例，某些步骤可以采用其他顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于优选实施例，所涉及的动作并不一定是本发明实施例所必须的。为了实现上述三维砂型打印铺砂过程中的缺陷识别方法，本发明实施例还提供了一种三维砂型打印铺砂过程中的缺陷识别装置，图2为本发明实施例提供的一种三维砂型打印铺砂过程中的缺陷识别装置的结构框图，所述装置包括：图像数据获取模块201，用于获取三维砂型打印铺砂过程中的图像数据，所述图像数据包括图像采集设备采集到的当前层的砂床图像数据、以及与当前层砂床图像数据对应的待打印图片数据；打印掩模图获取模块202，用于在切片形成的与当前层砂床图像数据对应的待打印图片中分别对打印区域和非打印区域进行标记，并构建待打印图片的打印掩模图；第一砂床图像缺陷识别模块203，用于将所述砂床图像数据输入预设铺砂缺陷检测模型，由所述铺砂缺陷检测模型对所述砂床图像数据进行初次网格划分，得到若干个第一网格区域，并对所述第一网格区域内的第一图像块进行缺陷识别，得到与所述第一图像块对应的识别结果，所述识别结果包括缺陷位置和缺陷类别，所述缺陷类别包括无缺陷、缺砂和粘砂；缺陷掩模图获取模块204，用于根据砂床图像数据的缺陷位置和缺陷类别构建与所述砂床图像数据对应的缺陷掩模图；三维砂型打印模块205，用于对打印掩模图和缺陷掩模图进行按位运算，得到缺陷识别掩模图，所述缺陷识别掩模图包括缺陷位置和缺陷类别，根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作。在一种可选的实施例中，三维砂型打印模块205可以包括：第一打印控制子模块，用于若待打印图片的打印区域和非打印区域均不存在铺砂缺陷，继续执行三维砂型的打印进程；第二打印控制子模块，用于若待打印图片的打印区域不存在铺砂缺陷，且非打印区域存在铺砂缺陷，继续执行三维砂型的打印进程；第三打印控制子模块，用于若待打印图片的打印区域存在铺砂缺陷，中止三维砂型的打印进程，并根据缺陷位置和缺陷类别进行处理。在一种可选的实施例中，第三打印控制子模块可以包括：第一打印控制单元，用于若所述缺陷类别为缺砂，根据所述缺陷位置进行补砂，并在补砂后对砂层执行铺平操作；第二打印控制单元，用于若所述缺陷类别为粘砂，通过铺砂辊清洁机构对铺砂辊表面进行清洁，并在清洁后对砂层执行铺平操作。在一种可选的实施例中，所述装置还包括：第二砂床图像缺陷识别模块，用于获取对砂层执行铺平操作后的当前层的图像数据，并由所述铺砂缺陷检测模型进行缺陷识别。在一种可选的实施例中，所述装置还包括：图像标记模块，永远若所述缺陷类别为无缺陷，将所述第一图像块标记为无缺陷；第三砂床图像缺陷识别模块，用于若所述缺陷类别为缺砂或粘砂，对所述第一图像块进行二次网格划分，得到若干个第二网格区域，并对所述第二网格区域内的第二图像块进行缺陷识别，得到与所述第二图像块对应的识别结果，识别结果包括缺陷位置和缺陷类别，所述缺陷类别包括无缺陷、缺砂和粘砂。本发明提供了一种三维砂型打印铺砂过程中的缺陷识别方法和装置，该装置通过获取三维砂型打印铺砂过程中的图像数据，并构建待打印图片的打印掩模图和与砂床图像数据对应的缺陷掩模图，对打印掩模图和缺陷掩模图进行按位运算，得到缺陷识别掩模图，缺陷识别掩模图包括缺陷位置和缺陷类别，根据缺陷识别掩模图判断铺砂缺陷是否影响三维砂型当前层的打印进程，并执行预设操作。本发明的有益效果包括：根据缺陷识别掩模图对铺砂过程中产生的缺陷进行监控，能够有效的减轻因铺砂过程中的缺陷对砂型打印质量的影响，避免因铺砂缺陷导致砂型结构破坏，强度降低甚至出现损坏，从而造成时间和生产材料的浪费；通过待打印图像位置与缺陷位置的相关分析，只处理对打印质量存在影响的缺陷区域，尽量保证打印过程的流畅和顺利，减少额外操作的频率，有利于制造过程中无人值守，减少时间的浪费。本发明实施例还提供了一种电子设备，包括处理器、存储器及存储在所述存储器上并能够在所述处理器上运行的计算机程序，该计算机程序被处理器执行时实现上述三维砂型打印铺砂过程中的缺陷识别方法实施例的各个过程，且能达到相同的技术效果，为避免重复，这里不再赘述。本发明实施例还提供了一种计算机可读存储介质，计算机可读存储介质上存储计算机程序，计算机程序被处理器执行时实现上述三维砂型打印铺砂过程中的缺陷识别方法实施例的各个过程，且能达到相同的技术效果，为避免重复，这里不再赘述。本说明书中的各个实施例均采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似的部分互相参见即可。本领域内的技术人员应明白，本发明的实施例可提供为方法、装置、或计算机程序产品。因此，本发明实施例可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明实施例可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本发明实施例是参照根据本发明实施例的方法、终端设备、和计算机程序产品的流程图和／或方框图来描述的。应理解可由计算机程序指令实现流程图和／或方框图中的每一流程和／或方框、以及流程图和／或方框图中的流程和／或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理终端设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理终端设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理终端设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理终端设备上，使得在计算机或其他可编程终端设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程终端设备上执行的指令提供用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的步骤。尽管已描述了本发明实施例的优选实施例，但本领域内的技术人员一旦得知了基本创造性概念，则可对这些实施例做出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本发明实施例范围的所有变更和修改。最后，还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者终端设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者终端设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者终端设备中还存在另外的相同要素。以上对本发明所提供的一种三维砂型打印铺砂过程中的缺陷识别方法和一种三维砂型打印铺砂过程中的缺陷识别装置，进行了详细介绍，本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处，综上所述，本说明书内容不应理解为对本发明的限制。
