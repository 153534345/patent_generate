标题title
基于全局最优偏振图像的相机-投影仪标定方法和系统
摘要abst
本公开涉及一种基于全局最优偏振图像的相机‑投影仪标定方法和系统，所述方法包括如下步骤：S10、获取n组标定图像，其中，每组标定图像均包括多个不同偏振度和波长的偏振图像，其中n为大于2的自然数；S20、将n组标定图像依次分组计算重投影误差，将重投影误差最高的一组标定图像替换为重投影误差最低的一组标定图像；S30、循环进行步骤S20，直至重投影误差的变化小于设定的阈值，将其中重投影误差最低的一组标定图像作为全局最优偏振图像进行相机和投影仪的标定。本公开能够通过重投影误差选取全局最优偏振图像，使相机‑投影仪标定过程中的标定图像质量得到提升，从而提高标定的精度。
权利要求书clms
1.基于全局最优偏振图像的相机-投影仪标定方法，其特征在于，包括如下步骤：S10、获取n组标定图像，其中，每组标定图像均包括多个不同偏振度和波长的偏振图像，其中n为大于2的自然数；对结构光图像进行RGB三通道编码得到偏振标定图像，所述偏振标定图像包括n组相移条纹和对应的单色图像；将n组所述偏振标定图像依次输入到投影仪中，以获得n组标定图像；所述投影仪为LCD投影仪，其输出的偏振状态可表示为，其中Ep为投影仪的输出偏振状态矩阵，VG、VR、VB分别为G、R、B通道的输出；通过对RGB三通道进行赋值改变偏振图像的偏振度和波长，进而获得n组具有不同偏振度和波长的偏振图像；S20、将n组标定图像依次分组计算重投影误差，将重投影误差最高的一组标定图像替换为重投影误差最低的一组标定图像；S30、循环进行步骤S20，直至重投影误差的变化小于设定的阈值，将其中重投影误差最低的一组标定图像作为全局最优偏振图像进行相机和投影仪的标定。2.如权利要求1所述的基于全局最优偏振图像的相机-投影仪标定方法，其特征在于，步骤S20中的重投影误差为投影位置的欧氏距离的平方根，采用如下公式计算：，其中，对于每个三维点，在标定图像上的投影位置为/＞，对应的实际观测到的二维点为/＞。3.如权利要求1所述的基于全局最优偏振图像的相机-投影仪标定方法，其特征在于，所述结构光图像通过以下方式获得：将偏振片置于相机前，所述相机获取被测物体以及投影到物体表面的结构光图像。4.一种基于全局最优偏振图像的相机-投影仪标定系统，其特征在于，包括：标定图像获取单元，获取n组标定图像，其中，每组标定图像均包括多个不同偏振度和波长的偏振图像，其中n为大于2的自然数；对结构光图像进行RGB三通道编码得到偏振标定图像，所述偏振标定图像包括n组相移条纹和对应的单色图像；将n组所述偏振标定图像依次输入到投影仪中，以获得n组标定图像；所述投影仪为LCD投影仪，其输出的偏振状态可表示为，其中Ep为投影仪的输出偏振状态矩阵，VG、VR、VB分别为G、R、B通道的输出；通过对RGB三通道进行赋值改变偏振图像的偏振度和波长，进而获得n组具有不同偏振度和波长的偏振图像；重投影误差计算单元，将n组标定图像依次分组计算重投影误差，将重投影误差最高的一组标定图像替换为重投影误差最低的一组标定图像；全局最优偏振图像求解单元，循环进行重投影误差计算，直至重投影误差的变化小于设定的阈值，将其中重投影误差最低的一组标定图像作为全局最优偏振图像进行相机和投影仪的标定。5.如权利要求4所述的基于全局最优偏振图像的相机-投影仪标定系统，其特征在于，所述系统还包括相机和线偏振片，所述相机将偏振片置于相机前，所述相机获取被测物体以及投影到物体表面的结构光图像。6.如权利要求4所述的基于全局最优偏振图像的相机-投影仪标定系统，其特征在于，重投影误差计算单元中，重投影误差为投影位置的欧氏距离的平方根，采用如下公式计算：，其中，对于每个三维点，在标定图像上的投影位置为/＞，对应的实际观测到的二维点为/＞。
说明书desc
技术领域本公开涉及投影仪-相机标定技术领域，具体涉及一种基于全局最优偏振图像的相机-投影仪标定方法和系统。背景技术主动结构光测量方法作为一种重要的表面非接触三维形状测量技术，近年来发展迅速。采用主动结构光测量方法的结构光三维测量系统具有测量精度高，测量速度快的优点，在工业生产中具有广泛的应用。结构光三维测量系统主要由两个部分构成：用来捕获图像的相机和用来投影结构光的投影仪。三维重构的关键是构建相机捕获的像素点与世界坐标系的关系，从而得到物体深度信息。由于投影仪不能像摄像机一样直接捕捉图像，因此相较于相机标定而言，投影仪-相机系统的标定更加复杂。高精度标定对是高精度测量的前提和基础。为了提高投影仪-相机系统的标定精度，有许多方法已经被提出，如利用液晶显示屏幕提供高密度参考点来提高校准精度，为了减小由折射率和屏幕涂层厚度引起的相位误差，建立了LCD屏幕的折射模型。然而，这些研究都主要集中在提高特征点提取精度与算法精度或使用精度更高的标定靶标，没有关注投影的结构光的物理特性。在自然条件下，不同的材料具有不同的反射特性。标定靶标的材质会极大地影响相机捕捉到的图像质量。特别是对于一些金属标定板，相机会捕捉到一定的高光区域，这些高光区域可能导致信息丢失，使捕获的图像不准确，为了提高标定精度，光的偏振参数被引入到标定中，但是调整光的偏振角度带来的机械振动或调整角度不精确等也会引入新的扰动和误差。发明内容本公开提供一种基于全局最优偏振图像的相机-投影仪标定方法和系统，能够通过重投影误差选取全局最优偏振图像，使相机-投影仪标定过程中的标定图像质量得到提升，从而提高标定的精度。本公开提供以下技术方案来解决上述技术问题：作为本公开实施例的一个方面，提供一种基于全局最优偏振图像的相机-投影仪标定方法，包括如下步骤：S10、获取n组标定图像，其中，每组标定图像均包括多个不同偏振度和波长的偏振图像，其中n为大于2的自然数；对结构光图像进行RGB三通道编码得到偏振标定图像，所述偏振标定图像包括n组相移条纹和对应的单色图像；将n组所述偏振标定图像依次输入到投影仪中，以获得n组标定图像；所述投影仪为LCD投影仪，其输出的偏振状态可表示为，其中Ep为投影仪的输出偏振状态矩阵，VG、VR、VB分别为G、R、B通道的输出；通过对RGB三通道进行赋值改变偏振图像的偏振度和波长，进而获得n组具有不同偏振度和波长的偏振图像；S20、将n组标定图像依次分组计算重投影误差，将重投影误差最高的一组标定图像替换为重投影误差最低的一组标定图像；S30、循环进行步骤S20，直至重投影误差的变化小于设定的阈值，将其中重投影误差最低的一组标定图像作为全局最优偏振图像进行相机和投影仪的标定。可选地，步骤S20中的重投影误差为投影位置的欧氏距离的平方根，采用如下公式计算：/＞，其中，对于每个三维点，在标定图像上的投影位置为/＞，对应的实际观测到的二维点为/＞。可选地，所述结构光图像通过以下方式获得：将偏振片置于相机前，所述相机获取被测物体以及投影到物体表面的结构光图像。作为本公开实施例的另一方面，提供一种基于全局最优偏振图像的相机-投影仪标定系统，包括：标定图像获取单元，获取n组标定图像，其中，每组标定图像均包括多个不同偏振度和波长的偏振图像，其中n为大于2的自然数；对结构光图像进行RGB三通道编码得到偏振标定图像，所述偏振标定图像包括n组相移条纹和对应的单色图像；将n组所述偏振标定图像依次输入到投影仪中，以获得n组标定图像；所述投影仪为LCD投影仪，其输出的偏振状态可表示为，其中Ep为投影仪的输出偏振状态矩阵，VG、VR、VB分别为G、R、B通道的输出；通过对RGB三通道进行赋值改变偏振图像的偏振度和波长，进而获得n组具有不同偏振度和波长的偏振图像；重投影误差计算单元，将n组标定图像依次分组计算重投影误差，将重投影误差最高的一组标定图像替换为重投影误差最低的一组标定图像；全局最优偏振图像求解单元，循环进行重投影误差计算，直至重投影误差的变化小于设定的阈值，将其中重投影误差最低的一组标定图像作为全局最优偏振图像进行相机和投影仪的标定。可选地，所述系统还包括相机和线偏振片，所述相机将偏振片置于相机前，所述相机获取被测物体以及投影到物体表面的结构光图像。可选地，重投影误差计算单元中，重投影误差为投影位置的欧氏距离的平方根，采用如下公式计算：，其中，对于每个三维点，在标定图像上的投影位置为/＞，对应的实际观测到的二维点为/＞。相对于现有技术，本公开的有益效果是：1）对投影的标定图像的偏振度进行编码，通过重投影误差对捕获的偏振图像进行评估，从而实现全局最优偏振度全局最优偏振图像标定，提高了标定精度；2）采用n组具有不同偏振度的标定图像进行投影，利用重投影误差对图像质量进行评估，从中选择最优投影模式，因此，在测量的过程中不需要额外的机械运动，例如转动偏振片、移动待测物体或移动投影装置，这避免了由于机械运动引起的扰动和误差。附图说明图1为基于全局最优偏振图像的相机-投影仪标定方法的流程图；图2为获取n组标定图像的流程图；图3为基于全局最优偏振图像的相机-投影仪标定系统框图；图4为基于全局最优偏振图像的相机-投影仪标定系统示意框图。具体实施方式下面将结合本公开实施例中的附图，对本公开实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本公开一部分实施例，而不是全部的实施例。基于本公开中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本公开保护的范围。实施例1基于本公开背景技术中记载的技术问题，也即“对于一些金属标定板，相机会捕捉到一定的高光区域，这些高光区域可能导致信息丢失，使捕获的图像不准确，为了提高标定精度，光的偏振参数被引入到标定中，但是调整光的偏振角度带来的机械振动或调整角度不精确等也会引入新的扰动和误差”，发明人发现，在使用标定系统进行图像标定时，对于任意位置和姿态的标定板而言，一定会存在一个最优偏振度使得反射光的镜面反射部分能够最大限度被放置在相机前的偏振片过滤，使镜面反射分量对标定的影响最低；然而对于一个形状和材质不确定的物体而言，其反射光的偏振特性是难以计算的；因此，本实施例提出利用投影仪偏振特性的高精度标定方法，采用多种具有不同偏振度的标定图像进行投影，利用重投影误差对图像质量进行评估，从中选择最优投影模式的方式来解决上述问题。具体实施例如下：本实施例可以通过构建标定系统来实现所述的方法，标定系统可以包括一个LCD投影仪和一个彩色相机，在相机前放置一个线偏振片，系统中的设备均放置在光学平台上，通过水平仪确认相机和LCD投影仪均为水平放置。作为本公开实施例的一个方面，如图1所示，提供一种基于全局最优偏振图像的相机-投影仪标定方法，包括如下步骤：S10、获取n组标定图像，其中，每组标定图像均包括多个不同偏振度和波长的偏振图像，其中n为大于2的自然数；如图2所示，S101、对结构光图像进行RGB三通道编码得到偏振标定图像，所述偏振标定图像包括n组相移条纹和对应的单色图像；S103、将n组所述偏振标定图像依次输入到投影仪中，以获得n组标定图像；所述投影仪为LCD投影仪，其输出的偏振状态可表示为，其中Ep为投影仪的输出偏振状态矩阵，VG、VR、VB分别为G、R、B通道的输出；通过对RGB三通道进行赋值改变偏振图像的偏振度和波长，进而获得n组具有不同偏振度和波长的偏振图像；S20、将n组标定图像依次分组计算重投影误差，将重投影误差最高的一组标定图像替换为重投影误差最低的一组标定图像；S30、循环进行步骤S20，直至重投影误差的变化小于设定的阈值，将其中重投影误差最低的一组标定图像作为全局最优偏振图像进行相机和投影仪的标定。基于上述步骤，本实施例可以采用多种具有不同偏振度的标定图像进行投影，通过重投影误差对捕获的偏振图像进行评估，从而实现全局最优偏振度全局最优偏振图像标定，提高了标定精度。以下，将对上述步骤可选的实施例给予详细说明。S10、获取n组标定图像，其中，每组标定图像均包括多个不同偏振度和波长的偏振图像，其中n为大于2的自然数。作为一种可选的实施方式，步骤S10中的获取n组标定图像，如图2所示，包括：S101、对结构光图像进行RGB三通道编码得到偏振标定图像，所述偏振标定图像包括n组相移条纹和对应的单色图像；其中结构光图像可从具有偏振功能的相机或者具有线偏振片的相机获得，例如，采用在相机镜头前设置线偏振片用于拍摄标定板上具有高光区域的图像。然后，对拍摄得到的结构光图像进行RGB三通道编码得到不同偏振度和波长的偏振标定图像，例如，得到6组不同偏振度和波长的偏振标定图像，其中，1-6组偏振标定图像为如下的状态：第1组线偏振状态：偏振度：水平，波长：红色；第2组线偏振状态：偏振度：垂直，波长：红色；第3组线偏振状态：偏振度：45度，波长：绿色；第4组线偏振状态：偏振度：90度，波长：绿色；第5组圆偏振状态：偏振度：左旋，波长：蓝色；第6组圆偏振状态：偏振度：右旋，波长：蓝色。S103、将n组所述偏振标定图像依次输入到投影仪中，以获得n组标定图像。其中，例如，n取为6，如上，可以将上述列出的1-6组偏振标定图像依次输入到投影仪中，经过投影得到6组标定图像。S20、将n组标定图像依次分组计算重投影误差，将重投影误差最高的一组标定图像替换为重投影误差最低的一组标定图像。作为一种可选的实施方式，步骤S20中的重投影误差为投影位置的欧氏距离的平方根，采用如下公式计算：，其中，对于每个三维点，在标定图像上的投影位置为/＞，对应的实际观测到的二维点为/＞。重投影误差表示了实际观测到的二维点与重投影位置的差异。重投影误差越小，表示重投影位置与实际观测到的二维点之间的差异越小，模型估计的准确性越高。作为一种可选的实施方式，所述结构光图像通过以下方式获得：将偏振片置于相机前，所述相机获取被测物体以及投影到物体表面的结构光图像。作为一种可选的实施方式，所述投影仪为LCD投影仪，其输出的偏振状态可表示为，其中Ep为投影仪的输出偏振状态矩阵，VG、VR、VB分别为G、R、B通道的输出；通过对RGB三通道进行赋值改变偏振图像的偏振度和波长，进而获得n组具有不同偏振度和波长的偏振图像。例如，利用LCD投影仪的RGB三通道生成，通过对三个通道进行赋值可以改变投影光的偏振度和波长，编码了六组不同偏振度和波长的用于标定的结构光，将六组彩色偏振标定图像以及一组非偏振黑白标定图像依次输入到投影仪中，投影输入到投影仪中的标定结构光图像。S30、循环进行步骤S20，直至重投影误差的变化小于设定的阈值，将其中重投影误差最低的一组标定图像作为全局最优偏振图像进行相机和投影仪的标定。其中，重投影误差的变化小于设定的阈值是指重投影误差的变化非常小，可以认为已经达到了一个较为稳定的状态。阈值是根据具体情况来设定的，一般可以根据实际的需求和性能要求进行调整。假设有一个相机标定的任务，要求将相机内外参数进行优化和存储。在进行优化的过程中，每次迭代后，计算并保存当前的重投影误差值。当重投影误差的变化小于设定的阈值时，即可认为优化过程已经收敛到一个稳定状态，不再继续迭代优化，并保存最终的相机内外参数。根据实验需要设置阈值，当变化量小于阈值，变化很小则视为重投影误差不变。本实施例中，还包括导出标定结果的步骤，也即进行相机和投影仪的标定后的结果，采用本实施例举例的方式获取得到的标定结果为：相机平均重投影误差为0.0362个像素；投影仪平均重投影误差为0.2569个像素。实施例2作为本公开实施例的另一个方面，如图3所示，提供一种基于全局最优偏振图像的相机-投影仪标定系统100，包括：标定图像获取单元1，获取n组标定图像，其中，每组标定图像均包括多个不同偏振度和波长的偏振图像，其中n为大于2的自然数；对结构光图像进行RGB三通道编码得到偏振标定图像，所述偏振标定图像包括n组相移条纹和对应的单色图像；将n组所述偏振标定图像依次输入到投影仪中，以获得n组标定图像；所述投影仪为LCD投影仪，其输出的偏振状态可表示为，其中Ep为投影仪的输出偏振状态矩阵，VG、VR、VB分别为G、R、B通道的输出；通过对RGB三通道进行赋值改变偏振图像的偏振度和波长，进而获得n组具有不同偏振度和波长的偏振图像；重投影误差计算单元2，将n组标定图像依次分组计算重投影误差，将重投影误差最高的一组标定图像替换为重投影误差最低的一组标定图像；全局最优偏振图像求解单元3，循环进行重投影误差计算，直至重投影误差的变化小于设定的阈值，将其中重投影误差最低的一组标定图像作为全局最优偏振图像进行相机和投影仪的标定。其中，如图4所示，所述系统还包括结构光编码单元4和多偏振态标定单元5，所述结构光编码单元用于对结构光图像进行RGB三通道编码得到n组偏振标定图像，偏振标定图像为n组具有不同偏振度和波长的偏振图像；所述多偏振态标定单元用于将n组所述偏振标定图像依次输入到投影仪中，以获得n组标定图像。其中结构光图像可从具有偏振功能的相机或者具有线偏振片的相机获得，例如，采用在相机镜头前设置线偏振片用于拍摄标定板上具有高光区域的图像。然后，对拍摄得到的结构光图像进行RGB三通道编码得到不同偏振度和波长的偏振标定图像，例如，得到6组不同偏振度和波长的偏振标定图像，其中，1-6组偏振标定图像为如下的状态：第1组线偏振状态：偏振度：水平，波长：红色；第2组线偏振状态：偏振度：垂直，波长：红色；第3组线偏振状态：偏振度：45度，波长：绿色；第4组线偏振状态：偏振度：90度，波长：绿色；第5组圆偏振状态：偏振度：左旋，波长：蓝色；第6组圆偏振状态：偏振度：右旋，波长：蓝色。将n组所述偏振标定图像依次输入到投影仪中，以获得n组标定图像。其中，例如，n取为6，如上，可以将上述列出的1-6组偏振标定图像依次输入到投影仪中，经过投影得到6组标定图像。作为一种可选的实施方式，如图4所示，为基于全局最优偏振图像的相机-投影仪标定系统示意框图，所述系统还包括相机6和线偏振片7，所述相机将偏振片置于相机前，所述相机获取被测物体9以及投影到物体9表面的结构光图像。例如物体9在本实施例取为标定板。作为一种可选的实施方式，所述投影仪为LCD投影仪8，其输出的偏振状态可表示为，其中Ep为投影仪的输出偏振状态矩阵，VG、VR、VB分别为G、R、B通道的输出；通过对RGB三通道进行赋值改变偏振图像的偏振度和波长，进而获得n组具有不同偏振度和波长的偏振图像。例如，利用LCD投影仪的RGB三通道生成，通过对三个通道进行赋值可以改变投影光的偏振度和波长，编码了六组不同偏振度和波长的用于标定的结构光，将六组彩色偏振标定图像以及一组非偏振黑白标定图像依次输入到投影仪中，投影输入到投影仪中的标定结构光图像。作为一种可选的实施方式，重投影误差计算单元2中，重投影误差为投影位置的欧氏距离的平方根，采用如下公式计算：，其中，对于每个三维点，在标定图像上的投影位置为/＞，对应的实际观测到的二维点为/＞。重投影误差表示了实际观测到的二维点与重投影位置的差异。重投影误差越小，表示重投影位置与实际观测到的二维点之间的差异越小，模型估计的准确性越高。其中，重投影误差的变化小于设定的阈值是指重投影误差的变化非常小，可以认为已经达到了一个较为稳定的状态。阈值是根据具体情况来设定的，一般可以根据实际的需求和性能要求进行调整。假设有一个相机标定的任务，要求将相机内外参数进行优化和存储。在进行优化的过程中，每次迭代后，计算并保存当前的重投影误差值。当重投影误差的变化小于设定的阈值时，即可认为优化过程已经收敛到一个稳定状态，不再继续迭代优化，并保存最终的相机内外参数。根据实验需要设置阈值，当变化量小于阈值，变化很小则视为重投影误差不变。本实施例中，还包括导出标定结果的步骤，也即进行相机和投影仪的标定后的结果，采用本实施例举例的方式获取得到的标定结果为：相机平均重投影误差为0.0362个像素；投影仪平均重投影误差为0.2569个像素。尽管已经示出和描述了本公开的实施例，对于本领域的普通技术人员而言，可以理解在不脱离本公开的原理和精神的情况下可以对这些实施例进行多种变化、修改、替换和变型，本公开的范围由所附权利要求及其等同物限定。
