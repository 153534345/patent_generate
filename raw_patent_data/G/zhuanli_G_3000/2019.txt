标题title
电容检测装置、提高电容式触摸屏检测精度的方法和装置
摘要abst
本发明揭示了一种内置电容检测装置、提高电容式触摸屏检测精度的方法和装置，内置电容检测装置包括：RX输入通道，所述RX输入通道包括：RX检测通道和断合开关SW，第一信号RX_TST接入所述RX检测通道并连接断合开关SW的一端；可变电容，所述可变电容通过所述断合开关SW接入所述RX检测通道；第二信号VTX，所述第二信号VTX接入所述可变电容。本发明的内置电容检测装置结构简单，可在芯片测试过程中进行内置电容检测、判断检测通道性能，存储各个通道失配值，通过算法补偿提升检测精度，减小触摸屏模组应用初始化时间及复杂度。
权利要求书clms
1.一种内置电容检测装置，其特征在于，包括：RX输入通道，所述RX输入通道包括：RX检测通道和断合开关SW，第一信号RX_TST通过所述断合开关SW接入所述RX检测通道；可变电容，所述可变电容通过所述断合开关SW接入所述RX检测通道；第二信号VTX，所述第二信号VTX接入所述可变电容。2.根据权利要求1所述的内置电容检测装置，其特征在于，包括：所述RX输入通道的数量为n，n为大于1的自然数，第m个RX检测通道连接对应的第m个断合开关SW的一端，n个断合开关SW的另一端都连接所述可变电容,1=＜m＜=n。3.一种提高电容式触摸屏检测精度的方法，基于权利要求1或权利要求2所述的内置电容检测装置，其特征在于，包括：确定可变电容的第一电容值，合上断合开关SW, 接入第一信号RX_TST，启动第二信号VTX，RX检测通道获取测量值RX1；确定可变电容的第二电容值，再次接入所述第一信号RX_TST，启动所述第二信号VTX，所述RX检测通道获取测量值RX2；断开所述断合开关SW，关闭所述RX检测通道的测量；计算所述测量值RX1和测量值RX2的测量差值RXd，获取失配值；若所述测量值RX1、测量值RX2或测量差值RXd超过失配阈值，则判定所述RX检测通道异常。4.根据权利要求3所述的提高电容式触摸屏检测精度的方法，其特征在于，n个RX检测通道依次获取测量值RX1和测量值RX2，并计算所述测量值RX1和测量值RX2的测量差值RXd，通过第m个所述断合开关SW控制第m个RX检测通道进行测量。5.根据权利要求4所述的提高电容式触摸屏检测精度的方法，其特征在于，若n个RX检测通道中，其测量差值RXd超过偏差阈值的RX检测通道的数量达到设定门限值，则对所述n个RX检测通道在软件层面进行程序归一化。6.根据权利要求5所述的提高电容式触摸屏检测精度的方法，其特征在于，在所述获取失配值前还包括：设定所述偏差阈值、失配阈值和设定门限值。7.根据权利要求5所述的提高电容式触摸屏检测精度的方法，其特征在于，所述程序归一化的数据为：。8.一种提高电容式触摸屏检测精度的装置，其特征在于，包括：如权利要求1或权利要求2所述的内置电容检测装置；测量筛选模块，用于检测RX检测通道的失配值，并判断所述RX检测通道是否存在异常。9.根据权利要求8所述的提高电容式触摸屏检测精度的装置，其特征在于，还包括：存储模块，用于存储测量所述RX检测通道的测量数据。10.根据权利要求8所述的提高电容式触摸屏检测精度的装置，其特征在于，还包括：程序设置模块：用于程序归一化所述RX检测通道。
说明书desc
技术领域本发明涉及触摸屏控制领域，特别涉及一种电容检测装置、提高电容式触摸屏检测精度的方法和装置。背景技术电容式触摸传感是手机、平板和可穿戴手表等电子设备中占据绝对主流地位的人机交互方式，其触摸检测的灵敏度、精准度和抗干扰性将直接影响用户与电子设备进行交互的体验感。现今，触摸检测芯片通常在触摸屏装置上施加激励，将电容的变化转变为电压的变化，再通过模数转换将电压变化数字化，进而根据信号的大小判断触摸的位置。触摸屏有多个感应线连接至芯片接收通道，接收通道间的一致性影响电容检测的精准度。检测通道中的电路因设计、制造等因素难免存在一定的系统失调和随机失调问题，减少这些失调问题往往需要复杂的电路设计和较大的芯片面积，这意味着芯片的成本也会有所增加。或者，在组成模组后，各接收通道先对同一总线电容进行充放电，根据充放电时间推断通道模拟量，如IDAC、电流型数模转换等的失配，存储失配值，在后续真实电容感测中补偿相应的失配值。但这增加了触控检测初始化的时间，通常只能获得部分通道模拟量的失配，而无法获得整个感测通道的失配，对于失配较大的芯片无法完全补偿，对触摸检测的精准度不高，且无法筛查失配大的芯片。因此，需要提供一种内置电容检测装置、提高电容式触摸屏检测精度的方法和装置，减少芯片制造成本，减小模组初始化时间及复杂度，提高触摸屏检测的精准度。发明内容本发明的目的是提供一种内置电容检测装置、提高电容式触摸屏检测精度的方法和装置，减少芯片制造成本，减小模组初始化时间及复杂度，提高触摸屏检测的精准度。为了达到上述目的，本发明提供了一种内置电容检测装置，包括：RX输入通道，所述RX输入通道包括：RX检测通道和断合开关SW，第一信号RX_TST通过所述断合开关SW接入所述RX检测通道；可变电容，所述可变电容通过所述断合开关SW接入所述RX检测通道；第二信号VTX，所述第二信号VTX接入所述可变电容。可选的，包括：所述RX输入通道的数量为n，n为大于1的自然数，第m个RX检测通道连接对应的第m个断合开关SW的一端，n个断合开关SW的另一端都连接所述可变电容,1=＜m＜=n。本发明还提供一种提高电容式触摸屏检测精度的方法，基于上述的内置电容检测装置，包括：确定可变电容的第一电容值，合上断合开关SW, 接入第一信号RX_TST，启动第二信号VTX，RX检测通道获取测量值RX1；确定可变电容的第二电容值，再次接入所述第一信号RX_TST，启动所述第二信号VTX，所述RX检测通道获取测量值RX2；断开所述断合开关SW，关闭所述RX检测通道的测量；计算所述测量值RX1和测量值RX2的测量差值RXd，获取失配值；若所述测量值RX1、测量值RX2或测量差值RXd超过失配阈值，则判定所述RX检测通道异常。可选的，n个RX检测通道依次获取测量值RX1和测量值RX2，并计算所述测量值RX1和测量值RX2的测量差值RXd，通过第m个所述断合开关SW控制第m个RX检测通道进行测量。可选的，若n个RX检测通道中，其测量差值RXd超过偏差阈值的RX检测通道的数量达到设定门限值，则对所述n个RX检测通道在软件层面进行程序归一化。可选的，在所述获取失配值前还包括：设定所述偏差阈值、失配阈值和设定门限值。可选的，所述程序归一化的数据为：。本发明还提供一种提高电容式触摸屏检测精度的装置，包括：内置电容检测装置；测量筛选模块，用于检测RX检测通道的失配值，并判断所述RX检测通道是否存在异常。可选的，还包括：存储模块，用于存储测量所述RX检测通道的测量数据。可选的，还包括：程序设置模块：用于程序归一化所述RX检测通道。本发明的内置电容检测装置结构简单，能够降低芯片的制造成本；并且在检测电容式触摸屏的应用中，能够检测各个通道的失配值，可在芯片测试过程中进行内置电容检测，并判断检测通道性能，对通道进行筛选，以及存储各个通道失配值，通过算法补偿提升检测精度，并且能够减小模组初始化时间及复杂度。附图说明图1为现有技术的内置电容检测装置的示意图；图2为本发明一具体实施例中的内置电容检测装置的示意图；图3为本发明一具体实施例中的提高电容式触摸屏检测精度的方法的流程图。具体实施方式下面将结合说明书附图对本发明的电容检测装置、提高电容式触摸屏检测精度的方法和装置进行更详细的描述，其中表示了本发明的优选实施例，应该理解本领域技术人员可以修改在此描述的本发明，而仍然实现本发明的有利效果。因此，下列描述应当被理解为对于本领域技术人员的广泛知道，而并不作为对本发明的限制。实施例一请参考图2，图2为本发明一具体实施例中的内置电容装置的示意图。本实施例提供了一种内置电容检测装置，包括：RX输入通道，所述RX输入通道包括：RX检测通道201和断合开关SW203，第一信号RX_TST202通过所述断合开关SW203接入所述RX检测通道201；可变电容204，所述可变电容204通过所述断合开关SW203接入所述RX检测通道201；第二信号VTX205，所述第二信号VTX205接入所述可变电容204。进一步的，所述RX输入通道的数量为n，n为大于1的自然数，第m个RX检测通道连接对应的第m个断合开关SW的一端，n个断合开关SW的另一端都连接所述可变电容,1=＜m＜=n。可以通过分别控制n个断合开关SW203的断合来依次检测n个RX检测通道201的测量值。在本具体实施例中，n的数量为4，内置电容检测装置包括：4个RX检测通道201，分别为RX Channel 0、RX Channel 1、RX Channel 2和RX Channel 3；所述RX检测通道201连接4个断合开关SW，4个断合开关SW分别为SW0、SW1、SW2和SW3；4个第一信号RX_TST202通过断合开关203连接RX检测通道201，4个第一信号RX_TST202分别为RX_TST0、RX_TST1、RX_TST2和RX_TST3；可变电容204通过4个断合开关SW201分别连接4个RX检测通道201，即SW0、SW1、SW2和SW3的一端分别连接RX Channel 0、RX Channel 1、RX Channel 2和RX Channel3，SW0、SW1、SW2和SW3的另一端都连接可变电容204；第二信号VTX205接入可变电容204。在其他具体实施方式中，RX输入通道的数量也可以是8个、12个、20个等。这种内置电容检测装置能够减小模组初始化时间及复杂度，提升触控精准度，降低RX检测通道涉及匹配性的要求。图1为现有技术中的电容检测装置，显而易见的，当没有内置电容检测装置时无法评估校正检测通道间的失配，给电容检测引入偏差或者说是噪声，会带来检测精度下降、检测时间增长、成本上升等问题。实施例二请参考图3，图3为本发明一具体实施例中的提高电容式触摸屏检测精度的方法的流程图。本实施例提供了一种提高电容式触摸屏检测精度的方法，基于上述内置电容检测装置，包括：步骤S301：确定所述可变电容的第一电容值，合上断合开关SW，接入第一信号RX_TST，启动第二信号VTX，RX检测通道获取测量值RX1；步骤S302：确定所述可变电容的第二电容值，再次接入所述第一信号RX_TST，启动所述第二信号VTX，所述RX检测通道获取测量值RX2；步骤S303：断开所述断合开关SW，关闭所述RX检测通道的测量；步骤S304：计算所述测量值RX1和测量值RX2的测量差值RXd，获取失配值；若所述测量值RX1、测量值RX2或测量差值RXd超过失配阈值，则判定所述RX检测通道异常。具体的，当所述RX输入通道的数量为大于1的自然数n时，对n个所述RX检测通道的测量为依次测量，通过所述断合开关SW控制被检测的RX检测通道，例如当测完第一个RX检测通道后，断开与第一个RX检测通道串联的断合开关SW，关闭所述RX检测通道的测量；然后闭合与第二个RX检测通道串联的断合开关SW，开始测量第二个RX检测通道。这种检测方法可以获得全部RX检测通道的测量值，从而获取全部RX检测通道的失配值，依据失配值对触摸屏检测模组进行补偿；并且能够根据测量值RX1、测量值RX2和测量差值RXd与失配阈值的对比结果来判断RX检测通道是否存在异常；若测量值RX1、测量值RX2或测量差值RXd大于失配阈值，则证明该检测通道存在异常。这种通道检测方法能够减小模组初始化时间及复杂度，提升触摸检测的精准度。在步骤S304中，被判定为异常的RX检测通道应当被筛除，而其通道失配值不超过失配阈值的RX检测通道，保存其失配值，以便根据保存的失配值对触摸屏模组检测进行补偿。进一步的，测量数据将被记录，作为作为各个通道增益的表征量，用于软件层面的校正，提高检测精度。若n个RX检测通道中，其测量差值RXd超过偏差阈值的RX检测通道的数量达到设定门限值，则对n个RX检测通道进行程序归一化。不管是部分RX检测通道的测量差值RXd超过偏差阈值，还是全部RX检测通道的测量差值RXd超过偏差阈值，都存在需要程序归一化的可能性，例如可以设定设定门限值为1，只要存在RX检测通道的测量差值RXd超过偏差阈值，则对其进行程序归一化处理，或者设定门限值为n，只有n个RX检测通道的测量差值RXd都超过偏差阈值时，才会对其进行程序归一化处理，这可以根据装置参数或用户需求进行自主设置。所述程序归一化的数据为：。本发明的电容式触摸屏的检测方法，能够检测各个通道的失配值，根据失配值对触摸屏检测模组进行补偿，有效提升触摸屏检测精准度，并减小模组初始化时间及复杂度。本发明还提供一种电容式触摸屏的检测装置，包括：内置电容检测装置；测量筛选模块，用于检测RX检测通道的失配值，并判断所述RX检测通道是否存在异常。具体的，获取RX检测通道在两个不同电容值的状态下的两个测量值RX1和RX2的测量差值RXd，依据测量值和测量差值获取失配值；若测量值RX1、测量值RX2和测量差值RXd超过失配阈值，则判断所述RX检测通道存在异常。进一步的，还包括：存储模块，用于存储测量所述RX检测通道的测量数据，包括测量值RX1、测量值RX2、测量差值RXd和失配值。其中失配值能够对触摸屏模组检测进行补偿，提升检测精度；测量差值RXd能够作为各个通道增益的表征量，用于软件层面的校正，提高检测精度。进一步的，还包括：程序设置模块：用于归一化所述RX检测通道。若部分或所有RX检测通道的测量差值RXd高于偏差阈值，则需要对它们在软件层面进行程序归一化设置。程序归一化RX检测通道的方式是数值重置为，这种方式能够补偿各个通道的增益偏差。本发明的电容式触摸屏的检测装置能够检测全部RX检测通道并获取它们的测量数据，根据测量数据对触摸屏检测模组进行补偿，提升电容式触摸屏的检测精准度，并且该检测装置相比较现有技术中的电容式触摸屏的面积更小，能够有效降低芯片的制造成本，且其检测方式能够减小模组初始化时间及复杂度。显然，本领域的技术人员可以对本发明进行各种改动和变型而不脱离本发明的精神和范围。这样，倘若本发明的这些修改和变型属于本发明的权利要求及其等同技术的范围之内，则本发明也意图包含这些改动和变型在内。
