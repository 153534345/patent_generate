标题title
一种数据-知识驱动的城市轨道交通风险辨识方法
摘要abst
本发明提供了一种数据‑知识驱动的城市轨道交通风险辨识方法。该方法包括：对城市轨道交通的基础数据进行解析；基于数据解析结果获取多源数据融合的风险场景集合；根据病例流调信息、仿真病例的出行场景和所述风险场景集合，获取潜在风险站点的空间伴随者初步筛选结果；根据潜在风险站点的空间伴随者的可观测出行属性，对病例风险断面索引集合进行循环匹配，确定潜在风险列车集合，获取基于潜在风险列车的时空伴随者的筛选结果；对时空伴随者在站点和列车层面进行风险叠加量化，获取基于个体风险叠加映射的城市轨道交通系统风险量化。本发明方法可以控制风险传播，为政府控制突发事件制定相关政策提供数据支持，为企业运营提供辅助决策。
权利要求书clms
1.一种数据-知识驱动的城市轨道交通风险辨识方法，其特征在于，包括：对城市轨道交通的基础数据进行解析；基于所述基础数据的解析结果，获取多源数据融合的风险场景集合；根据病例流调信息、仿真病例的出行场景和所述风险场景集合，获取基于断面映射的潜在风险站点的空间伴随者初步筛选结果；根据所述潜在风险站点的空间伴随者的可观测出行属性，对病例风险断面索引集合进行循环匹配，确定潜在风险列车集合，获取基于潜在风险列车的时空伴随者的筛选结果；对所述基于潜在风险列车的时空伴随者在站点和列车层面进行风险叠加量化，获取基于个体风险叠加映射的城市轨道交通系统风险量化。2.根据权利要求1所述的方法，其特征在于，所述的对城市轨道交通的基础数据进行解析，包括：获取城市轨道交通站点的基础信息表，提取所有换乘站的站点信息和普通站/＞的站点信息；获取城市轨道交通断面的基础信息表，提取整理有效断面信息表；获取城市轨道交通线路的基础信息表，提取整理有效线路信息表；获取城市轨道交通出行的每日自动售检票系统AFC刷卡数据表；获取向社会面推送公布的病例乘坐地铁出行的时间、站点和线路文本信息，形成基础信息表；获取官方流调基础信息表。3.根据权利要求1或者2所述的方法，其特征在于，所述的基于所述基础数据的解析结果，获取基于多源数据融合的风险场景集合，包括：步骤S021、判断是否已知病例i的出行起始站PO、出行终到站PD、出行换乘站站台方向Pdir和搭乘线路Pline，辨识风险场景；步骤S022、定义场景1：病例乘坐城市轨道交通出行的完整出行链均确定，所述完整出行链包括出行搭乘线路Pline、站台方向Pdir、出行起始站PO、出行终到站PD和出行换乘站场景1的表现形式为：/＞步骤S023、定义场景2：病例乘坐城市轨道交通出行的出行链不完整，仅已知病例的出行起始站PO、出行终到站PD，场景2的表现形式为：Situation2＝{PO，PD}；步骤S024、定义场景3：病例乘坐城市轨道交通出行的出行链不完整，仅已知病例的出行起始站PO、站台方向Pdir，场景3的表现形式为：Situation3＝{PO，PDir}；步骤S025、匹配场景4：病例乘坐城市轨道交通出行的出行链不完整，仅已知病例的出行起始站PO，场景4的表现形式为：Situation4＝{PO}。4.根据权利要求3所述的方法，其特征在于，所述的根据病例流调信息、仿真病例的出行场景和所述风险场景集合，获取基于断面映射的潜在风险站点的空间伴随者初步筛选结果，包括：步骤S031、根据深度广义搜索算法确定基础路径集；其中，Sm表示节点起点；Sk表示节点终点；Ri表示第i条路径；links表示第i条路径上的第j条路段；costs表示第i条路径的广义费用；步骤S032、根据病例的出行场景关联病例的出行路径或潜在出行路径，定义断面因子生成直接受影响站点集合Sstations-cases，形成病例的潜在风险断面索引集合Slink-cases；步骤S033、根据断面数据、站点数据、换乘方向数据、列车时刻表数据、病例出行信息数据和其他人出行AFC数据，判断病例的基础路径中的某一断面与其他出行者的基础路径断面集合的包含关系，建立基于断面因子索引的风险断面映射模型，映射匹配其他出行者的路径集：步骤S03301、在基础路径集RO→D中对任意路径Ri进行检索，筛选包含断面因子的路径，生成断面影响的路径集合Sroutes；步骤S03302、关联路径选择模型对路径集合Sroutes进行更新，使之涵盖路径选择概率；步骤S03303、获取直接或潜在风险站点集通过风险站点集对AFC数据进行标记；步骤S034、获取经过风险站点集Sstations乘客，生成潜在风险站点的空间伴随者集合5.根据权利要求4所述的方法，其特征在于，所述的根据所述潜在风险站点的空间伴随者的可观测出行属性，对病例风险断面索引集合进行循环匹配，确定潜在风险列车集合，获取基于潜在风险列车的时空伴随者的筛选结果，包括：步骤S041、定义换乘次数切分因子Tk，基于换乘次数切分因子Tk通过物理约束辨识风险路段Slinks，生成潜在风险路段时空伴随者Sroute-persons：关联接触者空间筛选结果集Ssta-persons，基于Tk切分伴随者的基础路径；若Ssta-persons中伴随者i的直接或潜在路径r的Tk为0，则为无换乘路径，关联病例风险断面索引集合Slink-cases并判断路径r是否包含断面因子生成潜在交叉路径集Sr*r；若Ssta-persons中伴随者i的直接或潜在路径r的Tk不为0，则基于Tk切分路径r得到切分后的子路径关联病例风险断面索引集合Slink-cases并判断子路径是否包含断面因子/＞生成潜在交叉路径集Sr*r；处理潜在交叉路径集Sr*r，若Sr*r中断面因子连续则对其进行合并形成路段Ls，生成潜在风险路段集合/＞其中，Links_O表示路段起点，Links_D表示路段终点，/＞表示该路段的方向；获得潜在风险路段时空伴随者/＞其中，SO表示乘客进站站点，SD表乘客出站站点，Pentrytime表示乘客进站时间，Pexittime，表示乘客出站时间，/＞表示方向；步骤S042、基于时空耦合通过时间约束辨识风险列车Strains，生成潜在风险列车时空伴随者Strains-persOns：定义列车备选因子Tnum、最小接触传播时间阈值dual；通过如下约束：生成潜在风险列车集合根据潜在风险列车集合Strains获得生成潜在风险列车的时空伴随者与带列车的病例出行数据Strains-cases，其中，SO表示乘客进站站点，SD表乘客出站站点，Pentrytime表示乘客进站时间，Pexittime，表示乘客出站时间，表示方向，Trainnum表示列车编号，/＞表示列车进站时间，/＞表示列车到站时间，表列车运行方向；步骤S043、基于潜在风险列车通过列车约束辨识风险时空伴随者，生成潜在风险时空伴随者Ss-t-persons：通过潜在风险列车集合Strains关联乘客列车选择模型，更新潜在风险列车时空伴随者Strains-persons与带列车的病例出行数据Strains-cases；判断伴随者i与病例在每个路段上是否同列车，并生成基于潜在风险列车的时空伴随者集合6.根据权利要求5所述的方法，其特征在于，所述的对所述基于潜在风险列车的时空伴随者在站点和列车层面进行风险叠加量化，获取基于个体风险叠加映射的城市轨道交通系统风险量化，包括：步骤S051、基于个体出行链通过出行状态约束辨识时空伴随者的个体风险，生成时空伴随者的个体风险集合Srisk-persons：潜在时空伴随者集合Ss-t-persons关联个体出行状态链推断算法，修正个体路径选择概率与个体列车选择概率；定义风险量化特征，该风险量化特征包括：场景风险特征因子、站点风险特征因子、路段风险特征因子和列车风险特征因子；根据潜在时空伴随者集合Ss-t-persons，统计出某出行者与病例可能共乘的时间Co_traveltime；假设个体风险重合时间长度时间特征Co_traveltime可被表示为聚类为多个高斯分布的结果，适用于高斯混合模型：假设p为风险等级分类结果的概率密度函数，则，其中：y表示风险分类结果，θ表示参数集合；αi是第i个高斯分量的权重，αi≥0，是第i个高斯分量的高斯分布密度，/＞μi，/＞分别表示第i个高斯分量的均值和协方差；由手肘法确定聚类类别，根据结果将个体出行者分为k类：低风险、中风险、高风险；构建一维高斯混合模型GMM模型，传入聚类类别数k，训练数据集，返回每个数据点的类别i、属于第i类的最大概率Pi；根据GMM训练结果，得到第i个高斯分布函数参数μi，以及其所占权重αi，分别绘制k个类别数据的密度等值图；根据第i个类别所占的权重αi合成k个类别的总体密度等值图，验证分类效果的好坏；步骤S052、基于个体风险叠加通过时空伴随风险进行城市轨道交通风险辨识，生成城市轨道交通系统的风险评估集合：时空伴随者个体风险集合Srisk-persons关联潜在风险站点集合Sstatiohs，生成个体关联风险站点，循环迭代更新潜在风险站点集合Sstations；定义风险站点集合Sstations风险量化特征：站点不同风险等级个体出行者的数量占全站出行者的数量之比的最大值代表站点风险等级；时空伴随者个体风险集合Srisk-persons关联潜在风险列车集合Strains，生成个体关联风险列车，循环迭代更新潜在风险列车集合Strains；定义风险列车集合Strains风险量化特征：列车不同风险等级个体出行者的数量占全车出行者的数量之比的最大值代表列车风险等级。
说明书desc
技术领域本发明涉及交通风险辨识技术领域，尤其涉及一种数据-知识驱动的城市轨道交通风险辨识方法。背景技术超大城市具有人口稠密、出行需求旺盛等特点，而城市轨道交通是超大城市居民首选的公共交通出行工具，一旦发生重大事件，极易造成严重的风险传播。目前流行的风险辨识方法主要包括基于人工的风险辨识法、基于规则的风险辨识法和数据驱动的风险辨识法。人工风险辨识法具有效率低下、漏检率高的缺陷；规则风险辨识法具有准确性差的缺点；数据风险辨识法具有场景适应性差的缺点。因此，我们需要通过知识和数据融合的形式，形成适应性强、准确率高的风险辨识方法。以突发公共卫生事件为例，目前流行的风险辨识方法主要包括人工流调辨识或基于手机信令数据的辨识方法，人工风险辨识方法是一种基于知识驱动的风险辨识方法，基于手机信令数据的风险辨识方法是数据驱动的方法，两种方法同时存在着效率较低、准确性较低的问题。因此，如何面对不同场景将领域知识和大量数据融合，形成高效的风险辨识方法是重要的科学研究问题。发明内容本发明的实施例提供了一种数据-知识驱动的城市轨道交通风险辨识方法，以实现有效地辨识城市轨道交通风险。为了实现上述目的，本发明采取了如下技术方案。一种数据-知识驱动的城市轨道交通风险辨识方法，包括：对城市轨道交通的基础数据进行解析；基于所述基础数据的解析结果，获取多源数据融合的风险场景集合；根据病例流调信息、仿真病例的出行场景和所述风险场景集合，获取基于断面映射的潜在风险站点的空间伴随者初步筛选结果；根据所述潜在风险站点的空间伴随者的可观测出行属性，对病例风险断面索引集合进行循环匹配，确定潜在风险列车集合，获取基于潜在风险列车的时空伴随者的筛选结果；对所述基于潜在风险列车的时空伴随者在站点和列车层面进行风险叠加量化，获取基于个体风险叠加映射的城市轨道交通系统风险量化。优选地，所述的对城市轨道交通的基础数据进行解析，包括：获取城市轨道交通站点的基础信息表，提取所有换乘站的站点信息和普通站/＞的站点信息；获取城市轨道交通断面的基础信息表，提取整理有效断面信息表；获取城市轨道交通线路的基础信息表，提取整理有效线路信息表；获取城市轨道交通出行的每日自动售检票系统AFC刷卡数据表；获取向社会面推送公布的病例乘坐地铁出行的时间、站点和线路文本信息，形成基础信息表；获取官方流调基础信息表。优选地，所述的基于所述基础数据的解析结果，获取基于多源数据融合的风险场景集合，包括：步骤S021、判断是否已知病例i的出行起始站PO、出行终到站PD、出行换乘站站台方向Pdir和搭乘线路Pline，辨识风险场景；步骤S022、定义场景1：病例乘坐城市轨道交通出行的完整出行链均确定，所述完整出行链包括出行搭乘线路Pline、站台方向Pdir、出行起始站PO、出行终到站PD和出行换乘站场景1的表现形式为：/＞步骤S023、定义场景2：病例乘坐城市轨道交通出行的出行链不完整，仅已知病例的出行起始站PO、出行终到站PD，场景2的表现形式为：Situation2＝{PO，PD}；步骤S024、定义场景3：病例乘坐城市轨道交通出行的出行链不完整，仅已知病例的出行起始站PO、站台方向Pdir，场景3的表现形式为：Situation3＝{PO，PDir}；步骤S025、匹配场景4：病例乘坐城市轨道交通出行的出行链不完整，仅已知病例的出行起始站PO，场景4的表现形式为：Situation4＝{PO}。优选地，所述的根据病例流调信息、仿真病例的出行场景和所述风险场景集合，获取基于断面映射的潜在风险站点的空间伴随者初步筛选结果，包括：步骤S031、根据深度广义搜索算法确定基础路径集；其中，Sm表示节点起点；Sk表示节点终点；Ri表示第i条路径；links表示第i条路径上的第j条路段；costs表示第i条路径的广义费用；步骤S032、根据病例的出行场景关联病例的出行路径或潜在出行路径，定义断面因子生成直接受影响站点集合Sstations-cases，形成病例的潜在风险断面索引集合Slink-cases；步骤S033、根据断面数据、站点数据、换乘方向数据、列车时刻表数据、病例出行信息数据和其他人出行AFC数据，判断病例的基础路径中的某一断面与其他出行者的基础路径断面集合的包含关系，建立基于断面因子索引的风险断面映射模型，映射匹配其他出行者的路径集：步骤S03301、在基础路径集RO→D中对任意路径Ri进行检索，筛选包含断面因子的路径，生成断面影响的路径集合Sroutes；步骤S03302、关联路径选择模型对路径集合Sroutes进行更新，使之涵盖路径选择概率；步骤S03303、获取直接或潜在风险站点集通过风险站点集对AFC数据进行标记；步骤S034、获取经过风险站点集Sstations乘客，生成潜在风险站点的空间伴随者集合优选地，所述的根据所述潜在风险站点的空间伴随者的可观测出行属性，对病例风险断面索引集合进行循环匹配，确定潜在风险列车集合，获取基于潜在风险列车的时空伴随者的筛选结果，包括：步骤S041、定义换乘次数切分因子Tk，基于换乘次数切分因子Tk通过物理约束辨识风险路段Slinks，生成潜在风险路段时空伴随者Sroute-persons：关联接触者空间筛选结果集Ssta-persons，基于Tk切分伴随者的基础路径；若Ssta-persons中伴随者i的直接或潜在路径r的Tk为0，则为无换乘路径，关联病例风险断面索引集合Slink-cases并判断路径r是否包含断面因子生成潜在交叉路径集Sr*r；若Ssta-persons中伴随者i的直接或潜在路径r的Tk不为0，则基于Tk切分路径r得到切分后的子路径关联病例风险断面索引集合Slink-cases并判断子路径/＞是否包含断面因子/＞生成潜在交叉路径集Sr*r；处理潜在交叉路径集Sr*r，若Sr*r中断面因子连续则对其进行合并形成路段Ls，生成潜在风险路段集合/＞其中，Links_0表示路段起点，Links_D表示路段终点，/＞表示该路段的方向；获得潜在风险路段时空伴随者/＞其中，SO表示乘客进站站点，SD表乘客出站站点，Pentrytime表示乘客进站时间，Pexittime，表示乘客出站时间，/＞表示方向；步骤S042、基于时空耦合通过时间约束辨识风险列车Strains，生成潜在风险列车时空伴随者Strains-persons：定义列车备选因子Tnum、最小接触传播时间阈值dual；通过如下约束：生成潜在风险列车集合根据潜在风险列车集合Strains获得生成潜在风险列车的时空伴随者与带列车的病例出行数据Strains-cases，其中，SO表示乘客进站站点，SD表乘客出站站点，Pentrytime表示乘客进站时间，Pexittime，表示乘客出站时间，表示方向，Trainnum表示列车编号，/＞表示列车进站时间，/＞表示列车到站时间，表列车运行方向；步骤S043、基于潜在风险列车通过列车约束辨识风险时空伴随者，生成潜在风险时空伴随者Ss-t-persons：通过潜在风险列车集合Strains关联乘客列车选择模型，更新潜在风险列车时空伴随者Strains-persons与带列车的病例出行数据Strains-cases；判断伴随者i与病例在每个路段上是否同列车，并生成基于潜在风险列车的时空伴随者集合优选地，所述的对所述基于潜在风险列车的时空伴随者在站点和列车层面进行风险叠加量化，获取基于个体风险叠加映射的城市轨道交通系统风险量化，包括：步骤S051、基于个体出行链通过出行状态约束辨识时空伴随者的个体风险，生成时空伴随者的个体风险集合Srisk-persons：潜在时空伴随者集合Ss-t-persons关联个体出行状态链推断算法，修正个体路径选择概率与个体列车选择概率；定义风险量化特征，该风险量化特征包括：场景风险特征因子、站点风险特征因子、路段风险特征因子和列车风险特征因子；根据潜在时空伴随者集合Ss-t-persons，统计出某出行者与病例可能共乘的时间Co_traveltime；假设个体风险重合时间长度时间特征Co_traveltime可被表示为聚类为多个高斯分布的结果，适用于高斯混合模型：假设p为风险等级分类结果的概率密度函数，则，其中：y表示风险分类结果，θ表示参数集合；αi是第i个高斯分量的权重，αi≥0，是第i个高斯分量的高斯分布密度，/＞μi，/＞分别表示第i个高斯分量的均值和协方差；由手肘法确定聚类类别，根据结果将个体出行者分为k类：低风险、中风险、高风险；构建一维高斯混合模型GMM模型，传入聚类类别数k，训练数据集，返回每个数据点的类别i、属于第i类的最大概率Pi；根据GMM训练结果，得到第i个高斯分布函数参数μi，以及其所占权重αi，分别绘制k个类别数据的密度等值图；根据第i个类别所占的权重αi合成k个类别的总体密度等值图，验证分类效果的好坏；步骤S052、基于个体风险叠加通过时空伴随风险进行城市轨道交通风险辨识，生成城市轨道交通系统的风险评估集合：时空伴随者个体风险集合Srisk-persons关联潜在风险站点集合Sstations，生成个体关联风险站点，循环迭代更新潜在风险站点集合Sstations；定义风险站点集合Sstations风险量化特征：站点不同风险等级个体出行者的数量占全站出行者的数量之比的最大值代表站点风险等级；时空伴随者个体风险集合Srisk-persons关联潜在风险列车集合Strains，生成个体关联风险列车，循环迭代更新潜在风险列车集合Strains；定义风险列车集合Strains风险量化特征：列车不同风险等级个体出行者的数量占全车出行者的数量之比的最大值代表列车风险等级。由上述本发明的实施例提供的技术方案可以看出，本发明提出一种数据-知识驱动的城市轨道交通风险辨识方法，通过细分场景形成知识融合，设计出一种可面向精细化多场景细分的高效数据挖掘和风险辨识方法，进而控制风险传播。本发明为政府控制突发事件制定相关政策提供数据支持，为企业运营提供辅助决策。本发明附加的方面和优点将在下面的描述中部分给出，这些将从下面的描述中变得明显，或通过本发明的实践了解到。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例提供的一种数据-知识驱动的城市轨道交通风险辨识方法总流程图；图2为本发明实施例提供的一种基于多源数据融合的风险场景解耦流程图；图3为本发明实施例提供的一种基于断面映射的潜在风险站点空间伴随者初步筛选流程图；图4为本发明实施例提供的一种基于换乘切分因子的潜在风险路段迭代匹配流程图；图5为本发明实施例提供的一种基于时空耦合映射的潜在风险列车筛选流程图；图6为本发明实施例提供的一种基于潜在风险列车的时空伴随者筛选流程图；图7为本发明实施例提供的一种基于个体出行链的时空伴随者风险推断流程图；图8为本发明实施例提供的一种基于个体风险叠加映射的系统风险量化流程图；图9为本发明实施例提供的一种第1类别个体风险量化概率密度图；图10为本发明实施例提供的一种第2类别个体风险量化概率密度图；图11为本发明实施例提供的一种第3类别个体风险量化概率密度图；图12为本发明实施例提供的一种个体风险量化总体密度等值图。具体实施方式下面详细描述本发明的实施方式，所述实施方式的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施方式是示例性的，仅用于解释本发明，而不能解释为对本发明的限制。本技术领域技术人员可以理解，除非特意声明，这里使用的单数形式“一”、“一个”、“所述”和“该”也可包括复数形式。应该进一步理解的是，本发明的说明书中使用的措辞“包括”是指存在所述特征、整数、步骤、操作、元件和/或组件，但是并不排除存在或添加一个或多个其他特征、整数、步骤、操作、元件、组件和/或它们的组。应该理解，当我们称元件被“连接”或“耦接”到另一元件时，它可以直接连接或耦接到其他元件，或者也可以存在中间元件。此外，这里使用的“连接”或“耦接”可以包括无线连接或耦接。这里使用的措辞“和/或”包括一个或更多个相关联的列出项的任一单元和全部组合。本技术领域技术人员可以理解，除非另外定义，这里使用的所有术语具有与本发明所属领域中的普通技术人员的一般理解相同的意义。还应该理解的是，诸如通用字典中定义的那些术语应该被理解为具有与现有技术的上下文中的意义一致的意义，并且除非像这里一样定义，不会用理想化或过于正式的含义来解释。为便于对本发明实施例的理解，下面将结合附图以几个具体实施例为例做进一步的解释说明，且各个实施例并不构成对本发明实施例的限定。本发明实施例提供的一种数据-知识驱动的城市轨道交通风险辨识方法的处理流程如图1所述，包括如下的处理步骤：步骤S10、对城市轨道交通的基础数据进行解析。解析站点数据、断面数据、线路数据、AFC刷卡数据、文本数据和事件信息数据，分别构建以站点、断面、个体为基本单元的数据集，以下以突发公共卫生事件下的城市轨道交通风险辨识为例进行分析。步骤S20、基于所述基础数据的解析结果，获取基于多源数据融合的风险场景集合。基于多源基础数据的融合和时空关联，根据流调信息、病例个体记忆程度及病例在轨道交通不同时段、不同空间位置的出行特征，基于典型场景对突发公共卫生事件下城市轨道交通风险传播机理进行解耦分析，形成四种风险场景标识知识集合。步骤S30、根据病例流调信息、仿真病例的出行场景和风险场景集合，获取基于断面映射的潜在风险站点的空间伴随者初步筛选结果。根据病例流调信息和仿真病例的出行场景，关联病例出行路径或潜在出行路径，定义断面因子，生成直接受影响站点集合Sstations-cases，并形成病例潜在风险断面索引集合Slink-cases，建立基于断面因子索引的风险映射模型，映射匹配其他出行者的路径集；辨识站点是否为风险站点，形成潜在风险站点集合Sstations，初步筛选出潜在风险站点空间伴随者。步骤S40、根据潜在风险站点空间伴随者的可观测出行属性，对病例风险断面索引集合进行循环匹配，确定潜在风险列车集合，获取基于潜在风险列车的时空伴随者的递进式精确筛选结果。定义换乘切分因子，根据潜在风险站点空间伴随者的可观测出行属性，涉及进站时间、出站时间、确定或潜在出行路径，对病例风险断面索引集合Slink-cases进行循环匹配，生成潜在交叉路径集Sr*r集合；辨识连续断面是否为风险断面，累加生成潜在风险路段集合Slinks并生成带路段的病例出行数据Slinks-cases，以支持基于时空耦合映射的潜在风险列车筛选；定义列车备选因子Tnum和最小接触传播时间阈值dual，确定基于时间约束的局部搜索规则，根据列车运行时刻表、潜在风险路段集合、出行者确定或潜在的换乘特性，辨识出潜在风险路段和时间约束下的出行者所乘列车是否为风险列车，确定潜在风险列车集合Strains，并生成潜在风险列车时空伴随者Strains-persons和带列车的病例出行数据Strains-cases，以支持基于潜在风险列车的时空伴随者筛选；关联乘客列车选择模型，添加分时段的列车选择概率，确定基于列车约束的搜索规则，进一步筛选出潜在时空伴随者。步骤S50、对基于潜在风险列车的时空伴随者在站点和列车层面进行风险叠加量化，获取基于个体风险叠加映射的城市轨道交通系统风险量化。融合风险场景标识知识集合、潜在风险站点集合、潜在风险路段集合、潜在风险路段集合、潜在风险列车集合及潜在时空伴随者集合，关联个体出行状态链推断算法，更新个体路径选择概率和列车选择概率；定义风险量化特征，输入GMM聚类算法量化确定个体风险，形成时空伴随者个体风险集合Srisk-persons；对潜在时空伴随者风险在站点和列车层面进行叠加量化，更新潜在风险站点集合Sstations和潜在风险列车集合Strains，最终生成城市轨道交通系统风险评估集合Ssysterm。具体的，上述步骤S10包括：步骤S011、获取城市轨道交通站点基础信息表，其中，SID表示站点编号，Sline表示站点所在线路，Ssta表示站点名称，Stype表示站点类型；提取所有换乘站的站点信息和普通站/＞的站点信息；步骤S012、获取城市轨道交通断面基础信息表，提取整理有效断面信息表，其中，LID表示断面编号，Lline表示断面线路，Ldir表示断面方向，Ldistance表示断面距离Lruntime表示断面运行时间，Lwaittime表示断面等候时间；骤S013、获取城市轨道交通线路基础信息表，提取整理有效线路信息表，其中，LineID表示线路编号，Linesta表示线路所有站点，Linedir表示线路方向，Linetrain表示线路运行列车，Linearrivetime表示线路开始运行时间，Lineleavetime表示线路结束运行时间，Linestanum表示线路车站编号；步骤S014、获取城市轨道交通出行每日AFC刷卡数据表，其中，Pentryline表示乘客进站线路，Pentrysta表示乘客进站站点，Pentrytime表示乘客进站时间，Pexitline表示乘客出站线路，Pexitsta表示表示乘客出站站点，Pexittime表示乘客出站时间，PID表示记录编号，Pstarttime表示开始时间，Pendtime表示结束时间，Ptraveltime表示出行时间；步骤S015、获取向社会面经微信推送公布的病例乘坐地铁出行的时间、站点、线路等文本信息，并形成基础信息表，其中，Wontime表示病例进站时间，Wofftime表示病例出站时间，Wsta表示病例进站站点，Wline表示病例进站线路；步骤S016、获取官方流调基础信息表，包括个人信息、健康状况、旅游史、居住史、密切接触史、交通工具、其他必要信息等。具体的，上述步骤S20包括：步骤S021、判断是否已知病例i的出行起始站PO、出行终到站PD、出行换乘站站台方向Pdir、搭乘线路Pline，辨识风险场景；步骤S022、定义场景1：病例乘坐城市轨道交通出行的完整出行链均确定，已知出行搭乘线路Pline、站台方向Pdir、出行起始站PO、出行终到站PD和出行换乘站即步骤S023、定义场景2：病例乘坐城市轨道交通出行的出行链不完整，仅已知出行起始站PO、出行终到站PD，即Situation2＝{PO，PD}；步骤S024、定义场景3：病例乘坐城市轨道交通出行的出行链不完整，仅已知出行起始站PO、站台方向Pdir，即Situation3＝{PO，PDir}；步骤S025、匹配场景4：病例乘坐城市轨道交通出行的出行链不完整，仅已知出行起始站PO，即Situation4＝{PO}；具体的，上述步骤S30包括：步骤S031、根据深度广义搜索算法确定基础路径集其中/＞其中，Sm表示节点起点；Sk表示节点终点；Ri表示第i条路径；links表示第i条路径上的第j条路段；costs表示第i条路径的广义费用；步骤S032、根据四种病例出行场景关联病例出行路径或潜在出行路径，定义断面因子生成直接受影响站点集合Sstations-cases，并形成病例潜在风险断面索引集合Slink-cases；步骤S033、根据断面数据、站点数据、换乘方向数据、列车时刻表数据、病例出行信息数据、其他人出行AFC数据，判断病例的基础路径中的某一断面与其他出行者的基础路径断面集合的包含关系，建立基于断面因子索引的风险断面映射模型，映射匹配其他出行者的路径集：步骤S033 01、在基础路径集RO→D中对任意路径Ri进行检索，筛选包含断面因子的路径，生成断面影响的路径集合Sroutes；步骤S033 02、关联路径选择模型对路径集合Sroutes进行更新，使之涵盖路径选择概率；步骤S033 03、获取直接或潜在风险站点集通过风险站点集对AFC数据进行标记；步骤S034、获取经过风险站点集Sstations乘客，生成潜在风险站点的空间伴随者集合其中，Pentrytime表示乘客进站时间，Pexittime，表示乘客出站时间，PO表示乘客进站站点，PD表乘客出站站点，/＞表示方向。具体的，上述步骤S40包括：步骤S041、基于换乘次数切分因子Tk通过物理约束辨识风险路段Slinks，生成潜在风险路段时空伴随者Sroute-persons：步骤S041 01、定义换乘次数切分因子Tk，关联接触者空间筛选结果集Ssta-persons，基于换乘次数切分因子Tk切分伴随者的基础路径；步骤S041 02、若Ssta-persons中伴随者i的直接或潜在路径r的换乘切分因子Tk为0，则为无换乘路径，关联病例风险断面索引集合Slink-cases并判断路径r是否包含断面因子生成潜在交叉路径集Sr*r；步骤S041 02、若Ssta-persons中伴随者i的直接或潜在路径r的换乘切分因子Tk不为0，则基于Tk切分路径r得到切分后的子路径关联病例风险断面索引集合Slink-cases并判断子路径/＞是否包含断面因子/＞生成潜在交叉路径集Sr*r；步骤S041 03、处理潜在交叉路径集Sr*r，若Sr*r中断面因子连续则对其进行合并形成路段Ls，生成潜在风险路段集合/＞获得潜在风险路段时空伴随者/＞其中，SO表示乘客进站站点，SD表乘客出站站点，Pentrytime表示乘客进站时间，Pexittime，表示乘客出站时间，/＞表示方向；步骤S042、基于时空耦合通过时间约束辨识风险列车Strains，生成潜在风险列车时空伴随者Strains-persons：步骤S042 01、定义列车备选因子Tnum、最小接触传播时间阈值dual；步骤S042 02、通过如下约束：生成潜在风险列车集合步骤S04203、潜在风险列车集合Strains获得生成潜在风险列车时空伴随者与带列车的病例出行数据Strains-cases；步骤S043、基于潜在风险列车通过列车约束辨识风险时空伴随者，生成潜在风险时空伴随者Ss-t-persons：步骤S043 01、通过潜在风险列车集合Strains关联乘客列车选择模型，更新潜在风险列车时空伴随者Strains-persons与带列车的病例出行数据Strains-cases；步骤S043 02、判断伴随者i与病例在每个路段上是否同列车并生成潜在时空伴随者集合，其中，SO表示乘客进站站点，SD表乘客出站站点，Pentrytime表示乘客进站时间，Pexittime，表示乘客出站时间，/＞表示方向，Trainnum表示列车编号，/＞表示列车进站时间，表示列车到站时间，/＞表列车运行方向；具体的，上述步骤S50包括：步骤S051、基于个体出行链通过出行状态约束辨识时空伴随者个体风险，生成时空伴随者个体风险集合Srisk-persons：步骤S051 01、潜在时空伴随者集合Ss-t-persons关联个体出行状态链推断算法，修正个体路径选择概率与个体列车选择概率；步骤S051 02、定义风险量化特征：场景风险特征因子、站点风险特征因子、路段风险特征因子、列车风险特征因子；步骤S051 03、根据潜在时空伴随者集合Ss-t-persons，统计出某出行者与病例可能共乘的时间Co_traveltime；步骤S051 04、假设个体风险重合时间长度时间特征Co_traveltime可被表示为聚类为多个高斯分布的结果，适用于高斯混合模型：假设p为风险等级分类结果的概率密度函数，则，其中：y表示风险分类结果，θ表示参数集合；αi是第i个高斯分量的权重，αi≥0，是第i个高斯分量的高斯分布密度，/＞μi，/＞分别表示第i个高斯分量的均值和协方差；步骤S051 05、由手肘法确定聚类类别，根据结果将个体出行者分为k类：低风险、中风险、高风险。低风险的个体出行者与病例的共乘时间范围为0-120s，存在共乘的几率很小；中风险的个体出行者与病例的共乘时间范围为120-600s之间；高风险的个体出行者与病例的共乘时间范围为600-3000s之间；步骤S051 06、构建一维GMM模型，传入聚类类别数k，训练数据集，返回每个数据点的类别i、属于第i类的最大概率Pi；步骤S051 07、根据GMM训练结果，得到第i个高斯分布函数参数μi，以及其所占权重αi，分别绘制k个类别数据的密度等值图；步骤S051 08、根据第i个类别所占的权重αi合成k个类别的总体密度等值图，验证分类效果的好坏；步骤S052、基于个体风险叠加通过时空伴随风险进行城市轨道交通风险辨识，生成城市轨道交通系统风险评估集合：步骤S052 01、时空伴随者个体风险集合Srisk-persons关联潜在风险站点集合Sstations，生成个体关联风险站点，循环迭代更新潜在风险站点集合Sstations；步骤S052 02、定义风险站点集合Sstations风险量化特征：站点不同风险等级个体出行者的数量占全站出行者的数量之比的最大值代表站点风险等级；步骤S052 03、时空伴随者个体风险集合Srisk-persons关联潜在风险列车集合Strains，生成个体关联风险列车，循环迭代更新潜在风险列车集合Strains；步骤S052 04、定义风险列车集合Strains风险量化特征：列车不同风险等级个体出行者的数量占全车出行者的数量之比的最大值代表列车风险等级。以北京市城市轨道交通网络为例进行车站风险等级量化，本发明过程如下：1、获取城市轨道交通站点基础信息表，提取所有换乘站的站点信息和普通站/＞的站点信息，其中包含了线路编号、线路名称、车站编号、车站名称以及是否换乘，以宋家庄站为例，获取的站点信息属性集合为{线路名称：5号线、10号线、亦庄线；车站编号：0565、1053、9621；车站名称：宋家庄；换乘标志：1}2、获取城市轨道交通断面基础信息表，提取整理有效断面信息表，以0103-0104断面为例，提取的断面基础信息集合为{线路编号：1；断面编号：0103-0104；行车方向：2；断面运行距离：3740；断面运行时长：220；断面停靠时长：0}；3、获取城市轨道交通线路基础信息表，提取整理有效线路信息表；4、获取城市轨道交通出行每日AFC刷卡数据表，以出行者编号为205002984505为例，并将随机得到的该名出行者定义为病例，其AFC刷卡属性集合为{进站线路：6号线；进站站点：0665；进站时间：2019-05-20 08:00:51；出站线路：10号线；出站站点：1041；出站时间：2019-05-20 08:42:23；乘客编号：205002984505；出行开始时间：28851；出行结束时间：31343；总旅行时间：2492}；5、根据解耦后的风险场景类别，分类别对出行者的出行轨迹进行分析，以场景1：病例乘坐城市轨道交通出行的完整出行链均确定，即已知出行搭乘线路Pline、站台方向Pdir、出行起始站PO、出行终到站PD和出行换乘站为例，进行之后的分析；6、根据深度广义搜索算法确定基础路径集其中/＞以出行者编号为205002984505为例，匹配到的路径可能为：0665-0663-0661-0659-0657-0655-0653-0651-0649-0647/1035-1037-1039-1041，并根据路径对应的换乘次数分别记录，换乘次数的可能值为{0，1，2，3，4，5}；7、根据四种病例出行场景关联病例出行路径或潜在出行路径，定义断面因子生成直接受影响站点集合Sstations-cases，并形成病例潜在风险断面索引集合Slink-cases；8、在基础路径集RO→D中对任意路径Ri进行检索，筛选包含断面因子的路径，生成断面影响的路径集合Sroutes，获取直接或潜在风险站点集通过其对AFC数据进行标记，获取经过风险站点集Sstations乘客，生成潜在风险站点空间伴随者集合9、根据接触者空间筛选结果集Ssta-persons，基于换乘次数切分接触者的基础路径，得到切分后的子路径基于换乘切分子路径迭代映射，通过子路径得到接触者时空伴随备选映射集/＞10、定义列车备选因子Tnum、最小接触传播时间阈值dual，通过约束生成潜在风险列车集合潜在风险列车集合Strains获得生成潜在风险列车时空伴随者/＞11、基于潜在风险列车通过列车约束辨识风险时空伴随者，生成潜在风险时空伴随者12、由手肘法确定聚类类别，根据结果将个体出行者分为3类：低风险、中风险、高风险。低风险的个体出行者与病例的共乘时间范围为0-120s，存在共乘的几率很小；中风险的个体出行者与病例的共乘时间范围为120-600s之间；高风险的个体出行者与病例的共乘时间范围为600-3000s之间；13、构建一维GMM模型，传入聚类类别数k，训练数据集，返回每个数据点的类别i、属于第i类的最大概率Pi；14、根据GMM训练结果，得到第i个高斯分布函数参数μi，以及其所占权重αi，分别绘制k个类别数据的密度等值图；15、根据第i个类别所占的权重αi合成3个类别的总体密度等值图，验证分类效果的好坏；16、在10000个出行者AFC数据中，随机定义1个病例，可筛选出209个与病例可能存在时空交集的其他出行者，并生成相应的空间特征和时间特征。经GMM聚类后，可将出行者分为低风险、中风险、高风险三类，其中低风险96人，中风险97人，高风险16人，分类效果较好。综上所述，本发明实施例提出了一种数据-知识驱动的城市轨道交通风险辨识方法，通过细分场景形成知识融合，设计出一种可面向精细化多场景细分的高效数据挖掘和风险辨识方法，可以有效解决各类风险场景排查时效差、精度低、成本高、速度慢的问题，进而控制风险传播。本发明为政府控制突发事件制定相关政策提供数据支持，为企业运营提供辅助决策。本领域普通技术人员可以理解：附图只是一个实施例的示意图，附图中的模块或流程并不一定是实施本发明所必须的。通过以上的实施方式的描述可知，本领域的技术人员可以清楚地了解到本发明可借助软件加必需的通用硬件平台的方式来实现。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行本发明各个实施例或者实施例的某些部分所述的方法。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于装置或系统实施例而言，由于其基本相似于方法实施例，所以描述得比较简单，相关之处参见方法实施例的部分说明即可。以上所描述的装置及系统实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。以上所述，仅为本发明较佳的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到的变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应该以权利要求的保护范围为准。
