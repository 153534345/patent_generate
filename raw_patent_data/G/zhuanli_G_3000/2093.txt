标题title
一种硬碳电极生产质量检测方法
摘要abst
本发明涉及图像处理技术领域，具体涉及一种硬碳电极生产质量检测方法。本发明通过对待测硬碳电极的灰度图像进行分析，获取灰度图像在不同阈值分割下图像的连通域，然后基于裂纹缺陷的灰度值特征对连通域筛选，获得疑似缺陷区域；然后对疑似缺陷区域进一步分析，获得最终缺陷区域；将最终缺陷区域的形状特征参数与最终缺陷区域的面积、疑似缺陷区域的面积进行结合完成阈值的最优程度的评价，进而获得最优阈值，基于最优阈值完成图像分割，获得精准的分割结果，完成质量检测。本发明对待测硬碳电极的灰度图像进行分析获取最优阈值并获得精准的分割结果，然后根据分割结果完成硬碳电极的质量检测，提高了硬碳电极质量检测的可靠性与精确度。
权利要求书clms
1.一种硬碳电极生产质量检测方法，其特征在于，所述方法包括：获取待测硬碳电极的灰度图像；获取所述灰度图像在不同阈值分割下图像的连通域；将任一阈值作为目标阈值，根据目标阈值下图像的连通域在所述灰度图像中对应区域内像素点的灰度值获得疑似缺陷区域；根据每个所述疑似缺陷区域的边缘像素点与预设邻域内邻域像素点的灰度值的差异获得最终缺陷区域；根据每个所述最终缺陷区域和对应疑似缺陷区域中像素点的分布获得最终缺陷区域的形状特征参数；根据所述最终缺陷区域的面积、所述疑似缺陷区域的面积以及所述最终缺陷区域的形状特征参数，获得所述目标阈值的最优程度参数；根据所有阈值的所述最优程度参数获得最优阈值；根据所述最优阈值获得所述待测硬碳电极的灰度图像的分割结果；根据所述分割结果获得所述待测硬碳电极的质量。2.根据权利要求1所述的一种硬碳电极生产质量检测方法，其特征在于，所述疑似缺陷区域的获取方法包括：获取所述灰度图像中每个像素点的灰度梯度值；将每个连通域在所述灰度图像中对应区域内所有像素点的灰度梯度值的平均值作为第一平均灰度梯度值、灰度值的方差作为第一灰度方差、灰度值的均值作为第一灰度均值；将所述灰度图像中所有像素点的灰度梯度值的平均值作为第二平均灰度梯度值、灰度值的方差作为第二灰度方差、灰度值的均值作为第二灰度均值；将第一平均灰度梯度值大于第二平均灰度梯度值、第一灰度方差小于第二灰度方差、第一灰度均值小于第二灰度均值的连通域在所述灰度图像中对应区域作为疑似缺陷区域。3.根据权利要求2所述的一种硬碳电极生产质量检测方法，其特征在于，所述最终缺陷区域的获取方法包括：将任一疑似缺陷区域作为待测缺陷区域；将所述第二灰度均值与所述待测缺陷区域的第一灰度均值的差异作为灰度差异值；将所述待测缺陷区域中任一边缘像素点作为待测边缘像素点；根据所述灰度差异值对所述待测边缘像素点进行调整分析，获得所述最终缺陷区域。4.根据权利要求3所述的一种硬碳电极生产质量检测方法，其特征在于，所述根据所述灰度差异值对所述待测边缘像素点进行调整分析，获得所述最终缺陷区域，包括：在以所述待测边缘像素点为中心的预设邻域内，将每个邻域像素点与中心像素点的灰度值的差异作为邻域灰度差异；获取中心像素点对应的所有所述邻域灰度差异的最小值，若所述最小值小于所述灰度差异值，则将所述最小值对应的邻域像素点作为更新待测边缘像素点；继续对所述更新待测边缘像素点进行调整分析；若所述最小值大于或者等于所述灰度差异值，则停止调整分析；若所有待测边缘像素点都进行了更新，则所述更新待测边缘像素点围成所述最终缺陷区域；否则未更新的待测边缘像素点和更新边缘像素点围成所述最终缺陷区域。5.根据权利要求1所述的一种硬碳电极生产质量检测方法，其特征在于，所述形状特征参数的获取方法包括：以任一最终缺陷区域作为目标区域；以目标区域对应的疑似缺陷区域的质心作为起点，获取预设方向上的划线；将所述划线与所述目标区域的交点数作为第一交点数；将所述划线与所述目标区域对应的疑似缺陷区域的交点数作为第二交点数；将所述第一交点数与所述第二交点数的比值作为所述目标区域的所述形状特征参数。6.根据权利要求1所述的一种硬碳电极生产质量检测方法，其特征在于，所述最优程度参数的获取方法包括：将所有最终缺陷区域的面积相加获得最终缺陷区域的总面积；将所有疑似缺陷区域的面积相加获得疑似缺陷区域的总面积；将所述最终缺陷区域的总面积与所述疑似缺陷区域的总面积的比值作为面积比值；将所有最终缺陷区域的形状特征参数的平均值作为均值特征值；将所述面积比值与预设常数的差异作为差异特征值；将所述差异特征值进行负相关映射并归一化后与所述均值特征值相乘，作为所述最优程度参数。7.根据权利要求1所述的一种硬碳电极生产质量检测方法，其特征在于，所述最优阈值的获取方法包括：将所有所述最优程度参数的最大值对应的阈值作为所述最优阈值。8.根据权利要求1所述的一种硬碳电极生产质量检测方法，其特征在于，所述预设邻域为四邻域。9.根据权利要求5所述的一种硬碳电极生产质量检测方法，其特征在于，所述预设方向为八链码方向。10.根据权利要求1所述的一种硬碳电极生产质量检测方法，其特征在于，所述待测硬碳电极的灰度图像的获取方法包括：获取待测硬碳电极的初始图像，对所述初始图像进行平均法灰度化获得待测硬碳电极的所述灰度图像。
说明书desc
技术领域本发明涉及图像处理技术领域，具体涉及一种硬碳电极生产质量检测方法。背景技术硬碳电极是以石油焦、针状焦为主要原料制成的导体，硬碳电极在成型加工过程中容易产生各种缺陷，其中硬碳电极的缺陷主要包括裂纹、缺棱、掉角等，而缺陷的存在会严重影响电极的使用性能，因此需要对硬碳电极的缺陷进行检测。由于硬碳电极板上存在许多干扰，并且硬碳电极的裂纹缺陷属于不易被检测出来的缺陷。而现有技术中通常采用传统的阈值分割方法，因此无法获取精确的最优阈值，导致无法精准检测出硬碳电极的裂纹缺陷，进而导致硬碳电极的质量检测可靠性与精确度不高。发明内容为了解决采用传统的阈值分割方法无法获取精确的最优阈值，导致无法精准检测出硬碳电极的裂纹缺陷，进而导致硬碳电极的质量检测可靠性与精确度不高的技术问题，本发明的目的在于提供一种硬碳电极生产质量检测方法，所采用的技术方案具体如下：获取待测硬碳电极的灰度图像；获取所述灰度图像在不同阈值分割下图像的连通域；将任一阈值作为目标阈值，根据目标阈值下图像的连通域在所述灰度图像中对应区域内像素点的灰度值获得疑似缺陷区域；根据每个所述疑似缺陷区域的边缘像素点与预设邻域内邻域像素点的灰度值的差异获得最终缺陷区域；根据每个所述最终缺陷区域和对应疑似缺陷区域中像素点的分布获得最终缺陷区域的形状特征参数；根据所述最终缺陷区域的面积、所述疑似缺陷区域的面积以及所述最终缺陷区域的形状特征参数，获得所述目标阈值的最优程度参数；根据所有阈值的所述最优程度参数获得最优阈值；根据所述最优阈值获得所述待测硬碳电极的灰度图像的分割结果；根据所述分割结果获得所述待测硬碳电极的质量。进一步地，所述疑似缺陷区域的获取方法包括：获取所述灰度图像中每个像素点的灰度梯度值；将每个连通域在所述灰度图像中对应区域内所有像素点的灰度梯度值的平均值作为第一平均灰度梯度值、灰度值的方差作为第一灰度方差、灰度值的均值作为第一灰度均值；将所述灰度图像中所有像素点的灰度梯度值的平均值作为第二平均灰度梯度值、灰度值的方差作为第二灰度方差、灰度值的均值作为第二灰度均值；将第一平均灰度梯度值大于第二平均灰度梯度值、第一灰度方差小于第二灰度方差、第一灰度均值小于第二灰度均值的连通域在所述灰度图像中对应区域作为疑似缺陷区域。进一步地，所述最终缺陷区域的获取方法包括：将任一疑似缺陷区域作为待测缺陷区域；将所述第二灰度均值与所述待测缺陷区域的第一灰度均值的差异作为灰度差异值；将所述待测缺陷区域中任一边缘像素点作为待测边缘像素点；根据所述灰度差异值对所述待测边缘像素点进行调整分析，获得所述最终缺陷区域。进一步地，所述根据所述灰度差异值对所述待测边缘像素点进行调整分析，获得所述最终缺陷区域，包括：在以所述待测边缘像素点为中心的预设邻域内，将每个邻域像素点与中心像素点的灰度值的差异作为邻域灰度差异；获取中心像素点对应的所有所述邻域灰度差异的最小值，若所述最小值小于所述灰度差异值，则将所述最小值对应的邻域像素点作为更新待测边缘像素点；继续对所述更新待测边缘像素点进行调整分析；若所述最小值大于或者等于所述灰度差异值，则停止调整分析；若所有待测边缘像素点都进行了更新，则所述更新待测边缘像素点围成所述最终缺陷区域；否则未更新的待测边缘像素点和更新边缘像素点围成所述最终缺陷区域。进一步地，所述形状特征参数的获取方法包括：以任一最终缺陷区域作为目标区域；以目标区域对应的疑似缺陷区域的质心作为起点，获取预设方向上的划线；将所述划线与所述目标区域的交点数作为第一交点数；将所述划线与所述目标区域对应的疑似缺陷区域的交点数作为第二交点数；将所述第一交点数与所述第二交点数的比值作为所述目标区域的所述形状特征参数。进一步地，所述最优程度参数的获取方法包括：将所有最终缺陷区域的面积相加获得最终缺陷区域的总面积；将所有疑似缺陷区域的面积相加获得疑似缺陷区域的总面积；将所述最终缺陷区域的总面积与所述疑似缺陷区域的总面积的比值作为面积比值；将所有缺陷区域的形状特征参数的平均值作为均值特征值；将所述面积比值与预设常数的差异作为差异特征值；将所述差异特征值进行负相关映射并归一化后与所述均值特征值相乘，作为所述最优程度参数。进一步地，所述最优阈值的获取方法包括：将所有所述最优程度参数的最大值对应的阈值作为所述最优阈值。进一步地，所述预设邻域为四邻域。进一步地，所述预设方向为八链码方向。进一步地，所述待测硬碳电极的灰度图像的获取方法包括：获取待测硬碳电极的初始图像，对所述初始图像进行平均法灰度化获得待测硬碳电极的所述灰度图像。本发明具有如下有益效果：本发明的目的在于获得阈值分割时的最优阈值，进而能够精准检测出硬碳电极的裂纹缺陷，提高质量检测的可靠性与精确度；首先应获取硬碳电极的灰度图像，然后对灰度图像进行分析；由于裂纹具有区域集中的特性，因此可对灰度图像进行连通域的获取，同时因为目的在于获取最优阈值，故可以获取灰度图像在不同阈值下进行分割的图像，便于后续对不同的阈值进行评价；进一步地，由于裂纹区域内的像素点的灰度值具有偏低且变化小的特性，所以可据此对连通域进行筛选获得疑似缺陷区域；因为连通域的获取可能会受到图像噪声的干扰，所以可对疑似缺陷区域进行进一步的分析获得精确的最终缺陷区域；进一步地，由于裂纹具有明显的形状特征，因此可以获取每个最终缺陷区域的形状特征参数，然后将形状特征参数与最终缺陷区域的面积、疑似缺陷区域的面积进行结合对当前阈值进行评估获得当前阈值的最优程度参数；进而可以基于所有阈值的最优程度参数进行比较获得最优阈值；然后可基于最优阈值对灰度图像进行分割即可获得精准的分割结果，最后基于精准的分割结果对硬碳电极进行质量检测。本发明通过对灰度图像中的疑似缺陷区域进行进一步的分析获得准确的最终缺陷区域，并与裂纹缺陷的形状特征进行结合对阈值进行评价，精准获得最优阈值并进行图像分割，即可精准检测出硬碳电极的裂纹缺陷，进而提高了硬碳电极质量检测的可靠性与精确度。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例所提供的一种硬碳电极生产质量检测方法流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种硬碳电极生产质量检测方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种硬碳电极生产质量检测方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种硬碳电极生产质量检测方法的方法流程图，该方法包括：步骤S1：获取待测硬碳电极的灰度图像。本发明实施例通过对待测硬碳电极的灰度图像进行分析，获得最优阈值进而获得准确的分割结果完成硬碳电极的质量检测，所以首先需要获取待测硬碳电极的灰度图像。优选地，本发明一个实施例中待测硬碳电极的灰度图像的获取方法包括：通过工业相机，采用固定光源的形式采集传送带上硬碳电极的图像，然后需要对采集到的图像进行平均法灰度化处理，即可得到待测硬碳电极的灰度图像。需要说明的是，具体图像采集装置的部署以及相机的视角范围等参数设置，实施者可根据具体实施场景进行调整，在此不作限定及赘述；平均法灰度化的方法为本领域技术人员熟知的技术手段，同时在本发明其他实施例中也可使用其他灰度化的方法，具体可以例如为最大值法、加权灰度法等，在此不做限定及赘述。至此，获取到了待测硬碳电极的灰度图像，可以完成后续对待测硬碳电极的灰度图像的分析过程。步骤S2：获取灰度图像在不同阈值分割下图像的连通域；将任一阈值作为目标阈值，根据目标阈值下图像的连通域在灰度图像中对应区域内像素点的灰度值获得疑似缺陷区域；根据每个疑似缺陷区域的边缘像素点与预设邻域内邻域像素点的灰度值的差异获得最终缺陷区域。由于本发明实施例的目的在于获取到最优阈值进而完成硬碳电极的质量检测，因此可以首先遍历阈值，将步骤S1中的待测硬碳电极的灰度图像进行二值化，此时即可获取到灰度图像在不同阈值下的二值图像。由于裂纹缺陷具有区域集中的特性，因此可以对每个二值图像进行连通域的分析，获取到每个二值图像中的连通域。为了便于分析与说明，在本发明实施例中将任一阈值作为目标阈值。需要说明的是，本发明实施例中，在二值图像中用0表示裂纹缺陷区域，即黑色表示前景区域；连通域的获取方法为本领域技术人员熟知的操作过程，在此不做赘述；遍历阈值的范围具体可以例如为，由于阈值过大或者过小可能会导致图像丢失细节或者过度保留噪声，因此可根据具体实施场景对遍历阈值的范围进行调整，在此不做限定。由于将获取到的连通域直接视为裂纹区域不够准确，会导致较大的误差，因此需要对连通域进行进一步的筛选，获取到疑似缺陷区域；筛选的条件可以基于二值图像中连通域在灰度图像中对应的区域内像素点的灰度值；原因在于裂纹区域内像素点的灰度值会普遍偏低，并且裂纹区域内的灰度值变化较小，同时裂纹区域边缘像素点的灰度梯度值会较大。优选地，本发明一个实施例中疑似缺陷区域的获取方法包括：首先获取待测硬碳电极的灰度图像中每个像素点的灰度梯度值；然后将每个连通域在灰度图像中对应区域内所有像素点的灰度梯度值进行累加后求平均，作为第一平均灰度梯度值，将灰度值的方差作为第一灰度方差，将灰度值的均值作为第一灰度均值；然后再将灰度图像中所有像素点的平均灰度梯度值作为第二平均灰度梯度值，将灰度值的方差作为第二灰度方差，将灰度值的均值作为第二灰度均值。基于上述分析可知，裂纹区域内像素点的灰度值普遍偏低，且裂纹区域内的灰度值变化较小，同时裂纹区域边缘像素点的灰度梯度值较大，因此通过比较，将第一平均灰度梯度值大于第二平均灰度梯度值、第一灰度方差小于第二灰度方差，并且第一灰度均值小于第二灰度均值的连通域在灰度图像中对应区域作为疑似缺陷区域。因为阈值分割过后获取到的连通域即使经过进一步地筛选获取到了疑似缺陷区域，然而在获取连通域的过程中可能会丢失图像细节和受到噪声的干扰，进而导致获取的连通域不够准确，所以此时的疑似缺陷区域也不够准确，因此需要对疑似缺陷区域进行进一步的分析以便获得准确的最终缺陷区域；由于裂纹缺陷区域内的像素点的灰度值呈现出明显的偏小特征，因此分析过程可以基于疑似缺陷区域的边缘像素点与预设邻域内的邻域像素点的灰度值差异完成。优选地，本发明一个实施例中最终缺陷区域的获取方法包括：为了便于分析与说明，将任一疑似缺陷区域作为待测缺陷区域；通过对裂纹区域的灰度特征进行分析可知，裂纹缺陷区域内的像素点的灰度值有明显的偏小特征，所以首先可获取第二灰度均值，即灰度图像中所有像素点的灰度值的均值，然后获取第二灰度均值与待测缺陷区域的第一灰度均值的差异，并将该差异作为灰度差异值；然后以待测缺陷区域中任一边缘像素点为例，将其作为待测边缘像素点，然后基于灰度差异值对待测边缘像素点进行调整分析，获得最终缺陷区域。调整分析的目的在于获取更加精确的最终缺陷区域，同时，调整分析缩小了疑似缺陷区域。需要说明的是，如果调整分析过程中扩大了疑似缺陷区域，则说明在对应阈值下进行分割获得的分割结果极不准确，可将该对应阈值直接去掉，不再对其进行后续分析。优选地，本发明一个实施例中根据灰度差异值对待测边缘像素点进行调整分析，获得最终缺陷区域，包括：在以待测边缘像素点为中心的预设邻域内，获取每个邻域像素点与中心像素点的灰度值的差异，将该差异作为邻域灰度差异；由于裂纹区域内像素点的灰度梯度小，所以获取中心像素点对应的所有邻域灰度差异中的最小值，将该最小邻域灰度差异与灰度差异值进行比较，能够将裂纹区域内像素点的灰度值普遍偏小的特征与裂纹区域内像素点的灰度梯度小的特征进行结合；如果最小邻域灰度差异小于灰度差异值时，则将最小邻域灰度差异对应的邻域像素点作为更新待测边缘像素点，然后对更新待测边缘像素点继续进行调整分析，直至最小邻域灰度差异值不小于灰度差异值时，则停止调整分析。在对所有的待测边缘像素点都完成调整分析之后，如果所有待测边缘像素点都进行了更新，则以所有更新待测边缘像素点作为边缘像素点，围成最终缺陷区域；如果存在不需要更新的待测边缘像素点，则以未更新的待测边缘像素点和进行了更新的更新待测边缘像素点作为边缘像素点，围成最终缺陷区域。优选地，本发明一个实施例中预设邻域设置为四邻域。至此，基于裂纹区域的灰度值特征对疑似裂纹区域进行了进一步地分析，获得了准确的最终裂纹区域，然后可进行后续的分析与处理。步骤S3：根据每个最终缺陷区域和对应疑似缺陷区域中像素点的分布获得最终缺陷区域的形状特征参数；根据最终缺陷区域的面积、疑似缺陷区域的面积以及最终缺陷区域的形状特征参数，获得目标阈值的最优程度参数。通过上述步骤可以获得精确的裂纹区域，因此可以完成对目标阈值的评估以获得当前阈值的最优程度参数。由于裂纹区域具有细且长的形状特征，因此可以首先通过分析裂纹区域的形状特征获取形状特征参数，形状特征参数即可进一步表征出步骤S2中获取的裂纹区域为实际裂纹的可能性，可以进一步的提高后续分析结果的可靠性。优选地，本发明一个实施例中，形状特征参数的获取方法包括：以步骤S2中的任一缺陷区域作为目标区域为例，以目标区域对应的疑似缺陷区域的质心作为起点，在预设方向上画线获得多条划线，然后获取每个预设方向上的划线与目标区域的交点数，将该交点数作为第一交点数；然后获取预设方向上的划线与目标区域对应的疑似缺陷区域的交点数，将该交点数作为第二交点数；然后将第一交点数与第二交点数的比值作为目标区域的形状特征参数；由于目标区域应比对应的疑似缺陷区域小，并且结合裂缝细且长的形状特征，所以当划线与目标区域的交点数越多，即分子越大，而划线与目标区域对应的疑似缺陷区域的交点数越少，即分母越小时，整体比值就越大，那么可以反映出疑似缺陷区域与对应的目标区域比较相似，也可说明此时目标区域越满足裂纹的形状特征。优选地，本发明一个实施例中预设方向为八链码方向。基于上述形状特征参数的获取方法可以对每个最终缺陷区域进行分析，获得每个最终缺陷区域的形状特征参数。然后可以将最终缺陷区域的形状特征参数与疑似缺陷区域的面积、最终缺陷区域的面积进行结合完成目标阈值的评价，即获得目标阈值的最优程度参数。优选地，本发明一个实施例中最优程度参数的获取方法包括：判断阈值的最优程度参数，可以以在当前阈值下获取到的疑似缺陷区域的面积与步骤S2中进一步分析获取到的精准的最终缺陷区域的面积的比值作为评价指标之一，所以，首先获取每个最终缺陷区域的面积，然后将所有最终缺陷区域的面积进行相加获得最终缺陷区域的总面积；获取每个疑似缺陷区域的面积，然后将所有疑似缺陷区域的面积进行相加获得疑似缺陷区域的总面积，然后将最终缺陷区域的总面积与疑似缺陷区域的总面积的比值作为面积比值；面积比值越接近1，则说明在当前阈值下获取到的疑似缺陷区域为最终缺陷区域的准确度越高。由于裂纹区域还具有细且长的形状特征，因此可以将形状特征参数也作为评价阈值的最优程度的评价指标之一；将所有最终缺陷区域的形状特征参数进行累加求和后获取平均值，然后将该平均值作为均值特征值；将面积比值与预设常数的差异作为差异特征值，由于上述分析中可知，面积比值越接近1，说明在当前阈值下获取到的疑似缺陷区域为最终缺陷区域的准确度越高，所以本发明实施例中将预设常数设置为1；然后将差异特征值进行负相关映射并归一化后与均值特征值相乘，即可获得最优程度参数。最优程度参数的公式模型具体可以例如为：其中，表示最优程度参数，/＞表示面积比值，/＞表示均值特征值，/＞表示以自然常数/＞为底的指数函数。在最优程度参数的公式模型中，当面积比值与预设常数的差异，即差异特征值越小，说明面积比值越接近于1，反映出当前阈值下的分割结果较好，同时由于该差异可能为0，因此使用/＞对其进行归一化操作；然后当均值特征值/＞越大，即每个形状特征参数越大时，说明当前阈值下获取到的裂纹区域即最终缺陷区域为实际裂纹的可能性就越大。因此当/＞越小，/＞越大，同时/＞越大时，那么最优程度参数/＞就越大，即当前阈值的分割效果就越好。至此，可以基于上述操作获取每个阈值的最优程度参数，然后完成后续的分析过程。步骤S4：根据所有阈值的最优程度参数获得最优阈值；根据最优阈值获得待测硬碳电极的灰度图像的分割结果；根据分割结果获得待测硬碳电极的质量。在获取到所有阈值的最优程度参数之后，可对其进行比较获得最优阈值。优选地，本发明一个实施例中最优阈值的获取方法包括：基于步骤S3中的分析可知，当最优程度参数越大时，说明当前阈值的分割效果越好，因此本发明实施例中将所有最优程度参数的最大值对应的阈值作为最优阈值。需要说明的是，如果出现多个阈值的最优程度参数相同时，则选其中一个作为最优阈值即可。获取到最优阈值之后，即可利用最优阈值对待测硬碳电极的灰度图像进行阈值分割，得到更加精确的分割结果，可以有助于更加准确、更加清晰的显示与识别硬碳电极表面的裂纹，若检测到硬碳电极表面存在裂纹，则该硬碳电极即为不合格产品；若不存在裂纹，则该硬碳电极即为合格产品，本发明实施例通过获取最优阈值，提高了硬碳电极质量检测的可靠性与精确度，同时便于根据裂纹的特征分析裂纹产生的原因然后对生产线进行改进。综上所述，本发明实施例通过对待测硬碳电极的灰度图像进行分析，获取灰度图像在不同阈值分割下图像的连通域，然后基于缺陷区域的灰度值特征对连通域进行筛选，获得疑似缺陷区域；因为连通域的获取过程中可能会受到噪声的干扰，因此需要对连通域进行进一步的分析，获得精确的最终缺陷区域。然后由于实际裂纹区域不仅具有明显的灰度值特征，还具有细而长的形状特征，因此获取最终缺陷区域的形状特征参数，进而将形状特征参数与最终缺陷区域的面积、疑似缺陷区域的面积进行结合完成阈值的最优程度的评价，即获得阈值的最优程度参数。进而可以对所有阈值的最优程度参数进行比较获得最优阈值，然后基于最优阈值完成灰度图像的分割，获得了精准的分割结果。最后可以根据精准的分割结果完成硬碳电极的质量检测，提高了硬碳电极质量检测的可靠性与精确度，同时还有益于根据裂纹的特征分析裂纹产生的原因进而改进生产线。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。
