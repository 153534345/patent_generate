标题title
一种基于机器学习算法的裂缝相似度判断方法
摘要abst
本发明公开了一种基于机器学习算法的裂缝相似度判断方法，包括以下步骤：S1：获取目标井的压裂施工曲线数据，并进行压裂施工阶段划分，获得所述目标井各个压裂施工阶段的主压裂段；S2：对数据进行预处理，获得各主压裂段归一化后的压裂施工曲线数据；S3：采用能够进行时序性训练的机器学习算法进行单段压力预测模型训练，获得单段压力预测模型一；S4：根据所述单段压力预测模型一进行施工压力预测，得到裂缝相似程度，并初步判断出与裂缝相似段；S5：进行二次验证，若二次验证仍然判断裂缝相似，则最终判断两个压裂段裂缝相似。本发明能够快速判断各压裂段间的裂缝相似程度，从而更方便快捷的评价各压裂间的压裂效果。
权利要求书clms
1.一种基于机器学习算法的裂缝相似度判断方法，其特征在于，包括以下步骤：S1：获取目标井的压裂施工曲线数据，并根据所述压裂施工曲线数据进行压裂施工阶段划分，获得所述目标井各个压裂施工阶段的主压裂段；S2：对所述目标井所有主压裂段的压裂施工曲线数据进行预处理，获得各主压裂段归一化后的压裂施工曲线数据；S3：选取其中一段主压裂段作为目标段一，根据所述目标段一归一化后的压裂施工曲线数据，采用能够进行时序性训练的机器学习算法进行单段压力预测模型训练，获得单段压力预测模型一；S4：根据所述单段压力预测模型一对其余各主压裂段进行施工压力预测，得到其余各主压裂段与所述目标段一的裂缝相似程度，并初步判断出与所述目标段一裂缝相似的裂缝相似段；S5：对所述裂缝相似段进行二次验证，若二次验证仍然判断所述目标段一与所述裂缝相似段裂缝相似，则最终判断所述目标段一与所述裂缝相似段裂缝相似。2.根据权利要求1所述的基于机器学习算法的裂缝相似度判断方法，其特征在于，步骤S1中，所述压裂施工曲线数据包括加砂浓度、施工排量以及施工压力。3.根据权利要求1所述的基于机器学习算法的裂缝相似度判断方法，其特征在于，步骤S1中，进行压裂施工阶段划分时，以加砂开始作为所述主压裂段的起始阶段，以加砂结束作为所述主压裂段的结束阶段。4.根据权利要求1所述的基于机器学习算法的裂缝相似度判断方法，其特征在于，步骤S2中，所述预处理包括依次进行的平滑处理和归一化处理。5.根据权利要求4所述的基于机器学习算法的裂缝相似度判断方法，其特征在于，采用Savitzky-Golay滤波器进行平滑处理，采用0~1标准化法进行归一化处理。6.根据权利要求1所述的基于机器学习算法的裂缝相似度判断方法，其特征在于，步骤S3中，采用长短期记忆网络进行单段压力预测模型训练。7.根据权利要求6所述的基于机器学习算法的裂缝相似度判断方法，其特征在于，步骤S3具体包括以下子步骤：S31：将所述目标段一归一化后的压裂施工曲线数据按照比例划分为训练集和验证集；S32：设定所述长短期记忆网络输入层、输出层、隐含层、学习率以及时间步长的预设值，向所述长短期记忆网络输入所述预设值，并根据所述训练集的数据进行施工压力预测，获得预测施工压力值一；S33：计算所述预测施工压力值一与其对应的真实施工压力值一之间的相关系数一；若所述相关系数一小于阈值一，则调整所述长短期记忆网络隐含层、学习率以及时间步长的预设值，重复步骤S32-S33；若所述相关系数一大于等于阈值一，则获得初始单段压力预测模型并进入步骤S34；S34：根据所述验证集的数据，采用所述初始单段压力预测模型进行施工压力预测，获得预测施工压力值二；S35：计算所述预测施工压力值二与其对应的真实施工压力值二之间的相关系数二；若所述相关系数二小于阈值二，则调整所述长短期记忆网络隐含层、学习率以及时间步长的预设值，重复步骤S32-S35；若所述相关系数二大于等于阈值二，则获得所述单段压力预测模型一。8.根据权利要求7所述的基于机器学习算法的裂缝相似度判断方法，其特征在于，所述阈值一大于等于所述阈值二。9.根据权利要求1-8中任意一项所述的基于机器学习算法的裂缝相似度判断方法，其特征在于，步骤S4具体包括以下子步骤：S41：根据所述单段压力预测模型一对其余各主压裂段进行施工压力预测，得到其余各主压裂段的预测施工压力值三；S42：计算所述预测施工压力值三与其对应的真实施工压力值三之间的相关系数三；当某一相关系数三大于等于阈值三时，则初步判断该相关系数三对应的主压裂段与所述目标段一裂缝相似，将其作为所述裂缝相似段。10.根据权利要求9所述的基于机器学习算法的裂缝相似度判断方法，其特征在于，步骤S5具体包括以下子步骤：S51：将所述裂缝相似段作为目标段二，重复步骤S3，获得单段压力预测模型二；S52：根据所述单段压力预测模型二对所述目标段一进行施工压力预测，得到所述目标段一的预测施工压力值四；S53：计算所述预测施工压力值四与其对应的真实施工压力值四之间的相关系数四；若所述相关系数四大于等于阈值四，则最终判断所述目标段一与所述裂缝相似段裂缝相似。
说明书desc
技术领域本发明涉及油气藏开采技术领域，特别涉及一种基于机器学习算法的裂缝相似度判断方法。背景技术砾岩致密油藏，孔渗条件较差，主要通过水平井压裂提高产能，但段间或井间产能差异巨大，如何判断不同压裂段间的压裂效果是亟需解决的问题。目前常用的裂缝监测方法包括直接监测法和间接监测法。其中，直接监测方法普遍成本较高，受监测条件的限制，在实际施工过程中无法进行“一井一测”，并且监测后的结果也不是准确无误，仍需要多种手段联合分析。而间接监测法受制于模型的限制，在实际使用过程中解释需要求解不同的数据模型，计算过程繁琐，耗时较长，无法经济便捷的评价压裂效果。发明内容针对上述问题，本发明旨在提供一种基于机器学习算法的裂缝相似度判断方法。本发明的技术方案如下：一种基于机器学习算法的裂缝相似度判断方法，包括以下步骤：S1：获取目标井的压裂施工曲线数据，并根据所述压裂施工曲线数据进行压裂施工阶段划分，获得所述目标井各个压裂施工阶段的主压裂段；S2：对所述目标井所有主压裂段的压裂施工曲线数据进行预处理，获得各主压裂段归一化后的压裂施工曲线数据；S3：选取其中一段主压裂段作为目标段一，根据所述目标段一归一化后的压裂施工曲线数据，采用能够进行时序性训练的机器学习算法进行单段压力预测模型训练，获得单段压力预测模型一；S4：根据所述单段压力预测模型一对其余各主压裂段进行施工压力预测，得到其余各主压裂段与所述目标段一的裂缝相似程度，并初步判断出与所述目标段一裂缝相似的裂缝相似段；S5：对所述裂缝相似段进行二次验证，若二次验证仍然判断所述目标段一与所述裂缝相似段裂缝相似，则最终判断所述目标段一与所述裂缝相似段裂缝相似。作为优选，步骤S1中，所述压裂施工曲线数据包括加砂浓度、施工排量以及施工压力。作为优选，步骤S1中，进行压裂施工阶段划分时，以加砂开始作为所述主压裂段的起始阶段，以加砂结束作为所述主压裂段的结束阶段。作为优选，步骤S2中，所述预处理包括依次进行的平滑处理和归一化处理。作为优选，采用Savitzky-Golay滤波器进行平滑处理，采用0~1标准化法进行归一化处理。作为优选，步骤S3中，采用长短期记忆网络进行单段压力预测模型训练。作为优选，步骤S3具体包括以下子步骤：S31：将所述目标段一归一化后的压裂施工曲线数据按照比例划分为训练集和验证集；S32：设定所述长短期记忆网络输入层、输出层、隐含层、学习率以及时间步长的预设值，向所述长短期记忆网络输入所述预设值，并根据所述训练集的数据进行施工压力预测，获得预测施工压力值一；S33：计算所述预测施工压力值一与其对应的真实施工压力值一之间的相关系数一；若所述相关系数一小于阈值一，则调整所述长短期记忆网络隐含层、学习率以及时间步长的预设值，重复步骤S32-S33；若所述相关系数一大于等于阈值一，则获得初始单段压力预测模型并进入步骤S34；S34：根据所述验证集的数据，采用所述初始单段压力预测模型进行施工压力预测，获得预测施工压力值二；S35：计算所述预测施工压力值二与其对应的真实施工压力值二之间的相关系数二；若所述相关系数二小于阈值二，则调整所述长短期记忆网络隐含层、学习率以及时间步长的预设值，重复步骤S32-S35；若所述相关系数二大于等于阈值二，则获得所述单段压力预测模型一。作为优选，所述阈值一大于等于所述阈值二。作为优选，步骤S4具体包括以下子步骤：S41：根据所述单段压力预测模型一对其余各主压裂段进行施工压力预测，得到其余各主压裂段的预测施工压力值三；S42：计算所述预测施工压力值三与其对应的真实施工压力值三之间的相关系数三；当某一相关系数三大于等于阈值三时，则初步判断该相关系数三对应的主压裂段与所述目标段一裂缝相似，将其作为所述裂缝相似段。作为优选，步骤S5具体包括以下子步骤：S51：将所述裂缝相似段作为目标段二，重复步骤S3，获得单段压力预测模型二；S52：根据所述单段压力预测模型二对所述目标段一进行施工压力预测，得到所述目标段一的预测施工压力值四；S53：计算所述预测施工压力值四与其对应的真实施工压力值四之间的相关系数四；若所述相关系数四大于等于阈值四，则最终判断所述目标段一与所述裂缝相似段裂缝相似。本发明的有益效果是：本发明通过机器学习算法建立单段的施工压力预测模型，根据不同压裂段在压力预测模型上的响应关系，可以确定压裂后裂缝扩展较为相似的压裂段，从而使得本发明可以通过压裂施工曲线判断出单井内各压裂段的裂缝相似程度；且本发明的判断结果与实际微地震监测结果对比具有一致性，在使用过程中更加方便快捷，为快速评估压裂效果提供技术支持。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为一个具体实施例X1井S2段的压裂施工曲线示意图；图2为一个具体实施例X1井S2主压裂段的压裂施工曲线示意图；图3为一个具体实施例X1井S2主压裂段的单段压力预测模型一结果示意图；图4为一个具体实施例单段压力预测模型一在各压裂段的施工压力预测结果示意图；图5为一个具体实施例X1井S24段的单段压力预测模型二和该模型在S2段的施工压力预测结果示意图；图6为一个具体实施例X1井各压裂段的微地震监测结果示意图。具体实施方式下面结合附图和实施例对本发明进一步说明。需要说明的是，在不冲突的情况下，本申请中的实施例及实施例中的技术特征可以相互结合。需要指出的是，除非另有指明，本申请使用的所有技术和科学术语具有与本申请所属技术领域的普通技术人员通常理解的相同含义。本发明公开使用的“包括”或者“包含”等类似的词语意指出现该词前面的元件或者物件涵盖出现在该词后面列举的元件或者物件及其等同，而不排除其他元件或者物件。本发明提供一种基于机器学习算法的裂缝相似度判断方法，包括以下步骤：S1：获取目标井的压裂施工曲线数据，并根据所述压裂施工曲线数据进行压裂施工阶段划分，获得所述目标井各个压裂施工阶段的主压裂段。在一个具体的实施例中，所述压裂施工曲线数据包括加砂浓度、施工排量以及施工压力；进行压裂施工阶段划分时，以加砂开始作为所述主压裂段的起始阶段，以加砂结束作为所述主压裂段的结束阶段。S2：对所述目标井所有主压裂段的压裂施工曲线数据进行预处理，获得各主压裂段归一化后的压裂施工曲线数据。在一个具体的实施例中，所述预处理包括依次进行的平滑处理和归一化处理。可选地，采用Savitzky-Golay滤波器进行平滑处理，采用0~1标准化法进行归一化处理。需要说明的是，平滑处理是为了去除数据中的噪声，若原始数据的噪声较小，可直接进行归一化处理而无需进行平滑处理。另外，上述实施例的平滑处理方法仅为优选的一种平滑处理方法，除了采用该滤波器外，现有技术中的其他平滑处理方法也可适用于本发明。同样的，除了采用所述0~1标准化法进行归一化处理外，现有技术中的其他归一化处理方法也可适用于本发明，其主要目的在于将数据归一化，具体方法在此不做限制。S3：选取其中一段主压裂段作为目标段一，根据所述目标段一归一化后的压裂施工曲线数据，采用能够进行时序性训练的机器学习算法进行单段压力预测模型训练，获得单段压力预测模型一。在一个具体的实施例中，采用长短期记忆网络进行单段压力预测模型训练。需要说明的是，长短期记忆网络是一种特殊的循环神经网络模型，通常被称为LSTM，在传统的循环神经网络中引入了门控机制，可以有效地解决梯度消失和梯度爆炸等问题，在有时间维度的问题上表现非常出色。LSTM模型由输入门、遗忘门和输出门三个门控单元组成，通过对输入和记忆的控制来实现对信息流的控制和筛选。主要原理是：通过对输入的历史信息和上一时刻的记忆进行处理，并输出当前时刻的状态和预测结果，从而实现对序列数据的建模和预测。除了所述长短期记忆网络外，现有技术中其他能够进行时序性训练的机器学习算法也可适用于本发明，例如循环神经网络模型和门控循环单元网络模型等。在一个具体使用长短期记忆网络进行单段压力预测模型训练的实施例中，步骤S3具体包括以下子步骤：S31：将所述目标段一归一化后的压裂施工曲线数据按照比例划分为训练集和验证集。可选地，所述比例采用3:1。需要说明的是，除了本实施例采用的比例外，也可采用7:3、6:4、4:1等等的比例划分训练集和验证集。另外，由于压裂施工曲线的时序性，进行数据划分时按照时间顺序进行划分。S32：设定所述长短期记忆网络输入层、输出层、隐含层、学习率以及时间步长的预设值，向所述长短期记忆网络输入所述预设值，并根据所述训练集的数据进行施工压力预测，获得预测施工压力值一。S33：计算所述预测施工压力值一与其对应的真实施工压力值一之间的相关系数一；若所述相关系数一小于阈值一，则调整所述长短期记忆网络隐含层、学习率以及时间步长的预设值，重复步骤S32-S33；若所述相关系数一大于等于阈值一，则获得初始单段压力预测模型并进入步骤S34。S34：根据所述验证集的数据，采用所述初始单段压力预测模型进行施工压力预测，获得预测施工压力值二。S35：计算所述预测施工压力值二与其对应的真实施工压力值二之间的相关系数二；若所述相关系数二小于阈值二，则调整所述长短期记忆网络隐含层、学习率以及时间步长的预设值，重复步骤S32-S35；若所述相关系数二大于等于阈值二，则获得所述单段压力预测模型一。在一个具体的实施例中，所述阈值一大于等于所述阈值二。可选地，所述阈值一为0.9，所述阈值二为0.8。在一个具体的实施例中，步骤S33和步骤S35中，调整所述长短期记忆网络隐含层、学习率以及时间步长的预设值时，若相关系数偏小，则增大隐含层数量和学习率；其中的时间步长的值是根据数据量的大小确定的一个初始值，变动较小。S4：根据所述单段压力预测模型一对其余各主压裂段进行施工压力预测，得到其余各主压裂段与所述目标段一的裂缝相似程度，并初步判断出与所述目标段一裂缝相似的裂缝相似段。在一个具体的实施例中，步骤S4具体包括以下子步骤：S41：根据所述单段压力预测模型一对其余各主压裂段进行施工压力预测，得到其余各主压裂段的预测施工压力值三。S42：计算所述预测施工压力值三与其对应的真实施工压力值三之间的相关系数三；当某一相关系数三大于等于阈值三时，则初步判断该相关系数三对应的主压裂段与所述目标段一裂缝相似，将其作为所述裂缝相似段；可选地，所述阈值三为0.5。S5：对所述裂缝相似段进行二次验证，若二次验证仍然判断所述目标段一与所述裂缝相似段裂缝相似，则最终判断所述目标段一与所述裂缝相似段裂缝相似。在一个具体的实施例中，步骤S5具体包括以下子步骤：S51：将所述裂缝相似段作为目标段二，重复步骤S3，获得单段压力预测模型二。S52：根据所述单段压力预测模型二对所述目标段一进行施工压力预测，得到所述目标段一的预测施工压力值四。S53：计算所述预测施工压力值四与其对应的真实施工压力值四之间的相关系数四；若所述相关系数四大于等于阈值四，则最终判断所述目标段一与所述裂缝相似段裂缝相似；可选地，所述阈值四为0.5。需要说明的是，所述阈值一、阈值二、阈值三、阈值四均为人为设定的阈值，阈值越大，判断精度越高，使用本发明时，根据判断精度需求进行人为设定。在一个具体的实施例中，以某目标区域的X1井作为目标井，采用本发明所述基于机器学习算法的裂缝相似度判断方法对该井的各压裂段进行裂缝相似度判断，具体包括以下步骤：获取X1井各压裂段的压裂施工曲线数据，部分结果分别如表1所示：表1 X1井S1压裂段的压裂施工曲线部分数据结果表进行压裂施工阶段划分将每一段的压裂施工曲线数据按照格式分别保存在不同的文本文件中，便于读取。根据所述压裂施工曲线数据进行压裂施工阶段划分，获得主压裂段，并将主压裂段的压裂施工曲线保存至单独的文本文件中。需要说明的是，在本实施例中，压裂施工曲线阶段划分的依据是通过加砂浓度的大小进行划分，以刚开始加砂的点作为主压裂施工曲线的起始段，即加砂浓度刚大于0的点，以加砂结束的点作为主压裂施工曲线的结束段，其中X1井S2段划分结果如图1和图2所示。数据预处理根据步骤主压裂段的划分结果，对X1井S2段的主压裂段施工曲线数据进行读取，并将读取后的数据采用0~1标准化进行处理，存入新的文件中。进行单段压力预测模型训练根据S2段主压裂段压裂施工曲线的加砂浓度和施工排量进行单段压力预测模型训练。训练时，采用的机器学习算法为长短期记忆网络模型，模型的初始预设值为：输入层为2，输出层为1，隐含层数量为10，学习率为0.001，时间步长为60；训练过程中，所述阈值一采用0.9，所述阈值二采用0.8。在本实施例中，X1井S2段训练好的单段压力预测模型一如图3所示。从图3可以看出，在本实施例中预测值与真实值之间的相关指数R2值为0.91。进行施工压力预测根据S2主压裂段的单段压力预测模型一对其余各主压裂段进行施工压力预测，得到各主压裂段与S2主压裂段的裂缝相似程度，结果如图4所示。从图4可以看出，S2主压裂段的相关指数R2值为0.91，S3主压裂段的相关指数R2值为0.04，S19主压裂段的相关指数R2值为0.27，S24主压裂段的相关指数R2值为0.64，即仅S3、S19、S24主压裂段与S2主压裂段正相关。在本实施例中，所述阈值三采用0.5，由此初步判断S24主压裂段和所述S2主压裂段裂缝相似。进行二次验证以S24主压裂段的压裂施工曲线数据重复步骤，获得其对应的单段压力预测模型二，结果如图5所示。以S24主压裂段的单段压力预测模型二对S2主压裂段进行施工压力预测，预测结果同样如图5所示。从图5可以看出，S2主压裂段的施工压力预测结果的相关指数R2值为0.71，大于本实施例阈值四的0.5，因此，最终判断S2压裂段和S24压裂段裂缝相似。获取X1井各压裂段的微地震数据，其中部分结果如表2和图6所示：表2 X1井S2压裂段的微地震部分数据结果表需要说明的是，表2中，X、Y、Z分别表示点在三维坐标系中X轴、Y轴、Z轴的值，根据X、Y、Z即可确定点的具体位置。从图6可以看出，S2压裂段和S24压裂段微地震数据的散点密度和大小相近，表明S2压裂段与S24压裂段裂缝形态相似，证明了本发明判断结果的准确性。需要说明的是，上述实施例仅以S2主压裂段作为了目标段一，在使用本发明时，也可分别采用其他主压裂段作为目标段一，然后重复本发明的步骤，如此完成所有压裂段之间的裂缝相似度判断，得到单井内所有的裂缝相似压裂段。综上所述，本发明能够方便快捷地通过压裂施工曲线判断出单井内各压裂段的裂缝相似程度。与现有技术相比，本发明具有显著的进步。以上所述，仅是本发明的较佳实施例而已，并非对本发明作任何形式上的限制，虽然本发明已以较佳实施例揭露如上，然而并非用以限定本发明，任何熟悉本专业的技术人员，在不脱离本发明技术方案范围内，当可利用上述揭示的技术内容作出些许更动或修饰为等同变化的等效实施例，但凡是未脱离本发明技术方案的内容，依据本发明的技术实质对以上实施例所作的任何简单修改、等同变化与修饰，均仍属于本发明技术方案的范围内。
