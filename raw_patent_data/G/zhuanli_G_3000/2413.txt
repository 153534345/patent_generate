标题title
一种应用于定向测量设备的姿态和振动监测方法
摘要abst
本发明公开了一种应用于定向测量设备的姿态和振动监测方法，该方法采用姿态和振动监测系统对定向测量设备进行监测，监测系统包括电源、传感器检测单元、信号处理单元及上位机，传感器检测单元包括MEMS惯组、振动传感器和冲击传感器；信号处理单元包括电压放大电路、带通滤波电路、监测电路和通讯模块。采用MEMS惯组进行姿态信息监测，突破了传统振动监测系统只能输出振动量级的局限性。采用振动传感器和冲击传感器监测信息融合，两者互补精度和量程，提高了系统的准确性和可靠性。采用三个单片机及监测电路，单片机通过轮询的方式采集传感器信息，输出中断信号到监测电路的ARM芯片，与采用传统方法相比，提高了采集数据的完整性。
权利要求书clms
1.一种应用于定向测量设备的姿态和振动监测方法，其特征在于，所述方法是采用姿态和振动监测系统对定向测量设备的姿态和振动进行监测，监测步骤如下：S1、所述姿态和振动监测系统上电，打开所述姿态和振动监测系统供电；S2、所述姿态和振动监测系统传感器检测单元的MEMS惯组、振动传感器和冲击传感器采集所述定向测量设备的姿态和振动数据信息；S3、所述姿态和振动监测系统信号处理单元对接收到所述定向测量设备的姿态、振动数据信息进行以下振动量级判断：当所述姿态和振动监测系统信号处理单元监测到所述定向测量设备的姿态≤2°且振动量级≤5g时，所述姿态和振动监测系统判定振动量级为轻微抖动，不影响定向测量设备工作；当所述姿态和振动监测系统信号处理单元监测到所述定向测量设备的姿态＞2°时，或者振动量级＞5g时，所述姿态和振动监测系统判定振动量级为对设备有影响的机械振动，并将姿态和振动数据信息通过所述姿态和振动监测系统信号处理单元传输给上位机；S4、所述上位机接收到姿态和振动数据信息后，对振动量级作出判断并采取措施：当振动量级＜50g，所述姿态和振动监测系统去除监测到所述定向测量设备的姿态＞2°或者振动量级＞5g，并且振动量级＜50g的时间段定向测量设备的监测信息，以免影响测量精度；当振动量级≥50g时，所述姿态和振动监测系统判定定向测量设备受到了严重冲击，立刻停止所述定向测量设备工作，避免造成安全事故。2.根据权利要求1所述的一种应用于定向测量设备的姿态和振动监测方法，其特征在于，所述姿态和振动监测系统包括电源、传感器检测单元、信号处理单元和上位机；所述传感器检测单元包括MEMS惯组、振动传感器和冲击传感器；所述信号处理单元包括传感器接口、电源转换模块、第一电压放大电路、第二电压放大电路、第一带通滤波电路、第二带通滤波电路、第一单片机、第二单片机、第三单片机、监测电路和通讯模块；所述传感器检测单元的MEMS惯组、振动传感器和冲击传感器分别通过信号处理单元的传感器接口与所述第一单片机、第一电压放大电路、第二电压放大电路连接，所述第一电压放大电路、第二电压放大电路分别与第一带通滤波电路、第二带通滤波电路连接，第一带通滤波电路、第二带通滤波电路分别与所述第二单片机、第三单片机连接，所述第一单片机、第二单片机、第三单片机分别与所述监测电路连接，监测电路与所述通讯模块连接，通讯模块与所述上位机通过无线传输进行通讯；所述电源分别连接所述MEMS惯组、振动传感器、冲击传感器，提供±12V电源；所述电源通过电源转换模块分别连接所述第一电压放大电路、第二电压放大电路，提供5V电源；所述电源通过电源转换模块分别连接第一单片机、第二单片机、第三单片机和监测电路，提供3.3V电源。3.根据权利要求2所述的一种应用于定向测量设备的姿态和振动监测方法，其特征在于，所述MEMS惯组将采集所述定向测量设备的姿态信息直接发送至第一单片机的串口；所述振动传感器将采集所述定向测量设备的振动信息通过传感器接口传输至信号处理单元，经过第一电压放大电路将采集到的原始电压放大为第二单片机可识别的电压，再通过第一带通滤波电路去除所用频段外的干扰数据后传输至第二单片机；所述冲击传感器采集所述定向测量设备的振动信息，通过传感器接口传输至信号处理单元，经过第二电压放大电路将采集到的原始电压放大为第三单片机可识别的电压，再通过第二带通滤波电路去除所用频段外的干扰数据后传输至第三单片机；三个单片机发送中断信号至所述监测电路的ARM芯片，所述ARM芯片记录监测数据，并传输至上位机，实现对采集数据信息的融合、判断及输出最终设备姿态和振动数据。4.根据权利要求3所述的一种应用于定向测量设备的姿态和振动监测方法，其特征在于，当所述振动传感器出现故障时，采用所述冲击传感器监测的振动量级，以提高所述姿态和振动监测系统的可靠性。5.根据权利要求4所述的一种应用于定向测量设备的姿态和振动监测方法，其特征在于，当振动量级≤50g时，以所述振动传感器监测的振动量级为准；当振动量级在50g至500g范围内时，采用所述冲击传感器监测的振动量级，以提高所述姿态和振动监测系统的准确性。6.根据权利要求3所述的一种应用于定向测量设备的姿态和振动监测方法，其特征在于，所述MEMS惯组为测量所述定向测量设备三轴角度的九轴MEMS惯组，所述三轴角度为滚轴角、俯仰角和偏航角。7.根据权利要求5所述的一种应用于定向测量设备的姿态和振动监测方法，其特征在于，所述振动传感器采用测量定向测量设备三轴振动参数的三向振动传感器，型号为YCZ23-2。8.根据权利要求5所述的一种应用于定向测量设备的姿态和振动监测方法，其特征在于，所述冲击传感器采用测量定向测量设备三轴冲击参数的三轴冲击传感器，型号为BCJ-4173。9.根据权利要求2所述的一种应用于定向测量设备的姿态和振动监测方法，其特征在于，所述电源转换模块选用SM4644MPY电源芯片，所述第一单片机、第二单片机、第三单片机均选用ST公司的STM32F405RGT6型单片机，所述监测电路选用TI公司的COTEX-M4核的ARM芯片TM4C123GH6PZ，所述通讯模块选用MAX232芯片。10.根据权利要求2所述的一种应用于定向测量设备的姿态和振动监测方法，其特征在于，所述传感器检测单元的MEMS惯组在放置时，MEMS惯组的X轴Y轴Z轴与所述定向测量设备质心处X轴、Y轴、Z轴平行；所述振动传感器和冲击传感器放置方式与所述定向测量设备质心处X轴平行。
说明书desc
技术领域本发明涉及定向测量设备的监测，具体涉及一种应用于定向测量设备的姿态和振动监测方法。背景技术矿下综掘工作面一直是煤矿灾害事故的高发区，定向测量设备为矿山智能掘进系统的重要定向工具，通过监测其振动信息可去除因其他设备工作带来的误差数据以及识别周边环境的安全性。当前已有的振动监测系统主要测量系统的振动量级，但其未考虑姿态信息，例如，文献1提出了一种地下管线开挖振动监测技术，主要监测振动加速度和频率，不具备姿态信息监测功能，不适用于矿下定向设备。文献2提出了一种可调节的煤矿机电设备振动监测装置，其不具备姿态测量功能且采用单一振动传感器，振动传感器损坏后系统故障，不能及时反映振动信息。发明内容鉴于现有技术存在的问题和缺陷，本发明的目的是建立一种应用于定向测量设备的姿态和振动监测方法。首先研发具备姿态监测及振动量级监测的姿态和振动监测系统，本发明采用MEMS惯组、振动传感器和冲击传感器，具备姿态监测功能，实现对定向测量设备系统运行时姿态、位置的监测，并根据振动信息调整定向测量设备测量方案以及整个工作面测量进程，在保证测量精度的同时提高定向测量设备系统可靠性。本发明为实现上述目的，采取的技术方案是：一种应用于定向测量设备的姿态和振动监测方法是采用姿态和振动监测系统对定向测量设备的姿态和振动进行监测，监测步骤如下：S1、所述姿态和振动监测系统上电，打开所述姿态和振动监测系统供电。S2、所述姿态和振动监测系统传感器检测单元的MEMS惯组、振动传感器和冲击传感器采集所述定向测量设备的姿态和振动数据信息。S3、所述姿态和振动监测系统信号处理单元对接收到所述定向测量设备的姿态、振动数据信息进行以下振动量级判断：当所述姿态和振动监测系统信号处理单元监测到所述定向测量设备的姿态≤2°且振动量级≤5g时，所述姿态和振动监测系统判定振动量级为轻微抖动，不影响定向测量设备工作。当所述姿态和振动监测系统信号处理单元监测到所述定向测量设备的姿态＞2°时，或者振动量级＞5g时，所述姿态和振动监测系统判定振动量级为对设备有影响的机械振动，并将姿态和振动数据信息通过所述姿态和振动监测系统信号处理单元传输给上位机。S4、所述上位机接收到姿态和振动数据信息后，对振动量级作出判断并采取措施：当振动量级＜50g，所述姿态和振动监测系统去除监测到所述定向测量设备的姿态＞2°或者振动量级＞5g，并且振动量级＜50g的时间段定向测量设备的监测信息，以免影响测量精度；当振动量级≥50g时，所述姿态和振动监测系统判定定向测量设备受到了严重冲击，立刻停止所述定向测量设备工作，避免造成安全事故。本发明具有的优点和积极效果：1、为更好的适应定向测量设备的振动监测，采用MEMS惯组进行姿态信息监测，突破了传统振动监测系统只能输出振动量级的局限性。2、本发明采用振动传感器和冲击传感器监测信息融合，两者互补精度和量程，提高了系统的准确性和可靠性。3、本发明信号处理单元采用三个低功耗单片机及监测电路，低功耗单片机通过“轮询”的方式采集传感器信息，输出中断信号到监测电路的ARM芯片，与采用单一主控芯片处理多传感器信息的方法相比，提高了采集数据的完整性。附图说明图1是本发明的系统组成框图；图2是本发明的布局示意图；图3是本发明的工作流程图；图4是图1中传感器接口电路原理图；图5是图1中电源转换模块电路原理图；图6是图1中第一电压放大电路原理图；图7是图1中第二电压放大电路原理图；图8是图1中第一带通滤波电路原理图；图9是图1中第二带通滤波电路原理图；图10是图1中第一单片机第一部分电路原理图；图11是图1中第一单片机第二部分电路原理图；图12是图1中第二单片机第一部分电路原理图；图13是图1中第二单片机第二部分电路原理图；图14是图1中第三单片机第一部分电路原理图；图15是图1中第三单片机第二部分电路原理图；图16是图1中监测电路原理图；图17是图1中通讯模块原理图。具体实施方式以下结合附图和实施例对本发明作进一步说明：如图1所示，本发明的姿态和振动监测系统包括电源、传感器检测单元、信号处理单元和上位机；传感器检测单元包括MEMS惯组、振动传感器和冲击传感器；信号处理单元包括传感器接口、电源转换模块、第一电压放大电路、第二电压放大电路、第一带通滤波电路、第二带通滤波电路、第一单片机、第二单片机、第三单片机、监测电路和通讯模块；传感器检测单元的MEMS惯组、振动传感器和冲击传感器分别通过信号处理单元的传感器接口与第一单片机、第一电压放大电路、第二电压放大电路连接，第一电压放大电路、第二电压放大电路分别与第一带通滤波电路、第二带通滤波电路连接，第一带通滤波电路、第二带通滤波电路分别与第二单片机、第三单片机连接，第一单片机、第二单片机、第三单片机分别与监测电路连接，监测电路与通讯模块连接，通讯模块与上位机通过无线传输进行通讯；电源分别连接MEMS惯组、振动传感器、冲击传感器，提供±12V电源；电源通过电源转换模块分别连接第一电压放大电路、第二电压放大电路，提供5V电源；电源通过电源转换模块分别连接第一单片机、第二单片机、第三单片机、监测电路，提供3.3V电源。如图3所示，本实施例的定向测量设备为矿用掘进系统，采用姿态和振动监测系统对定向测量设备的姿态和振动进行监测，监测步骤如下：S1、姿态和振动监测系统上电，打开姿态和振动监测系统供电。S2、姿态和振动监测系统传感器检测单元的MEMS惯组、振动传感器和冲击传感器采集定向测量设备的姿态和振动数据信息。MEMS惯组为测量定向测量设备三轴角度的九轴MEMS惯组，三轴角度为滚轴角、俯仰角和偏航角。MEMS惯组主要对三轴角度进行测量，即姿态测量，角度量程±180°，姿态测量稳定度0.01°，其主要优点是姿态测量精度高、体积小、性价比高。振动传感器采用中国电子科技集团49研究所用于测量定向测量设备三轴振动参数的三向振动传感器。主要采用电容式工作原理实现三轴振动参数测量，量程±50g，横向灵敏度比小于3%，非线性小于1%，其主要优点是三轴一体化设计、小型化、环境适应性好。冲击传感器采用中国电子科技集团49研究所生产的用于测量定向测量设备三轴冲击参数的三轴冲击传感器。主要采用电容式工作原理实现三轴冲击参数测量，量程±500g，横向灵敏度比小于3%，非线性小于3%，其主要优点是分体式结构设计、传感器探头尺寸小、长期稳定性好。如图2所示，姿态和振动监测系统传感器检测单元的MEMS惯组在放置时，MEMS惯组的X轴Y轴Z轴与定向测量设备质心处X轴、Y轴、Z轴平行；振动传感器和冲击传感器放置方式与定向测量设备质心处X轴平行。电源和信号处理单元放置在定向测量设备箱体内。S3、姿态和振动监测系统信号处理单元中监测电路的ARM芯片对接收到定向测量设备的姿态、振动数据信息进行以下振动量级判断：当监测电路的ARM芯片监测到定向测量设备的姿态≤2°且振动量级≤5g时，姿态和振动监测系统判定振动量级为轻微抖动，不影响定向测量设备工作。当监测电路的ARM芯片监测到定向测量设备的姿态＞2°时，或者振动量级＞5g时，姿态和振动监测系统判定振动量级为对设备有影响的机械振动，并将姿态和振动数据信息通过姿态和振动监测系统信号处理单元中的通讯模块传输给上位机。S4、上位机接收到振动数据信息后，对振动量级作出判断并采取措施：当振动量级＜50g，姿态和振动监测系统去除监测到定向测量设备的姿态＞2°或者振动量级＞5g，并且振动量级＜50g的时间段定向测量设备的监测信息，以免影响测量精度。当振动量级≥50g时，姿态和振动监测系统判定定向测量设备受到了严重冲击，立刻停止定向测量设备所在的整个综采工作面掘进系统工作，避免造成安全事故。本发明姿态和振动监测系统传感器检测单元中的MEMS惯组监测姿态信息，并输出RS232串口信号，振动传感器和冲击传感器监测不同量级的振动信息并输出电压信号。MEMS惯组将采集定向测量设备的姿态信息发送至第一单片机的串口；振动传感器将采集定向测量设备的振动信息通过传感器接口传输至信号处理单元，经过第一电压放大电路将采集到的原始电压放大为第二单片机可识别的电压，再通过第一带通滤波电路去除所用频段外的干扰数据后传输至第二单片机；冲击传感器采集定向测量设备的振动信息，通过传感器接口传输至信号处理单元，经过第二电压放大电路将采集到的原始电压放大为第三单片机可识别的电压，再通过第二带通滤波电路去除所用频段外的干扰数据后传输至第三单片机。三个低功耗单片机通过轮询的方式采集传感器信息，发送中断信号至监测电路的ARM芯片，ARM芯片记录监测数据，并传输至上位机，实现对采集数据信息的融合、判断及输出最终设备姿态和振动数据。采用三个低功耗单片机及监测芯片保证数据采集的实时性和全面性。监测电路ARM芯片对接收到的姿态、振动信息进行振动量级判断：当振动传感器出现故障时，本方法采用冲击传感器监测的振动量级，以提高姿态和振动监测系统的可靠性。当振动量级≤50g时，本方法以振动传感器监测的振动量级为准。当振动量级在50g至500g范围内时，本方法采用冲击传感器监测的振动量级，以提高姿态和振动监测系统的准确性。如图4所示，姿态和振动监测系统中的传感器接口电路包括三个接口；振动传感器接口J1、冲击传感器接口J2、MEMS惯组接口J3。传感器接口选用矩形连接器。如图5所示，姿态和振动监测系统中的电源转换模块电路选用SM4644MPY电源芯片N1，电源芯片N1的B3引脚、B4引脚、B5引脚连接电容C69一端后接+12V电源，电容C69另一端接地；电源芯片N1的A6引脚连接D6引脚，并通过电容C76接地；电源芯片N1的B6引脚和C4引脚相连，B7引脚连接E7引脚，并通过电容C77接地；E6引脚和F4引脚相连，电容C77、电容C76通过电容C75连接电源芯片N1的C6引脚、E3引脚、E4引脚、E5引脚后接+12V电源；电源芯片N1的F6引脚、H3引脚、H4引脚、H5引脚接+12V电源,并通过电容C78接地；电源芯片N1的G6引脚连接K6引脚，并通过电容C85接地；电源芯片N1的H7引脚连接L7引脚，并通过电容C86接地；H6引脚和J4引脚相连，L6引脚和K5引脚相连，电容C86、电容C85连接电源芯片N1的J6引脚、L3引脚、L4引脚、L5引脚后接+12V电源，K7引脚接+12V电源；电源芯片N1的A1引脚、A2引脚、A3引脚、C1引脚、D1引脚、D2引脚和电容C70、电容C71、电容C72、电容C73、电容C74的一端接3.3V电源；电源芯片A7的引脚、D7引脚连接电容C70的另一端，并通过电阻R37与电容C71、电容C72、电容C73、电容C74的另一端连接后接地；电源芯片N1的F1引脚、G1引脚、G2引脚、J1引脚、K1引脚、K2引脚和电容C79、电容C80、电容C81、电容C82、电容C83的一端接5V电源；电源芯片N1的G7引脚、J7引脚连接电容C79的另一端，并通过电阻R38与电容C80、电容C81、电容C82、电容C83的另一端连接后接地。如图6、图7所示，姿态和振动监测系统中的第一电压放大电路和第二电压放大电路均选用OP07电压芯片D1和电压芯片D2，电压芯片D1和电压芯片D2的2脚、3脚分别通过电阻R6、电阻R7和电阻R2、电阻R3接至传感器接口电路振动传感器接口J1、冲击传感器接口J2的4脚、5脚；电压芯片D1和电压芯片D2的2脚又分别通过电阻R10、电阻R5连接6脚；电压芯片D1和电压芯片D2的3脚、4脚分别通过电阻R9、电容C15和电阻R4、电容C17接信号地；电压芯片D1和电压芯片D2的6脚、7脚分别通过电容C43、电容C16和电容C44、电容C18接信号地；同时电容C43、电容C16和电容C44、电容C18又分别通过电阻R11、电阻R8接地。如图8、图9所示，姿态和振动监测系统中的第一带通滤波电路和第二带通滤波电路分别包括电感LOUT1、电解电容COUTI和电感LOUT2、电解电容COUT2，电感LOUT1、电感LOUT2的一端分别接至第一电压放大电路和第二电压放大电路的VOUT1、VOUT2端。如图10至图15所示，姿态和振动监测系统中的第一单片机电路、第二单片机电路、第三单片机电路均选用ST公司的STM32F405RGT6型单片机，第一单片机电路、第二单片机电路、第三单片机电路分别包括晶振X3、晶振X1、晶振X2，第一单片机U3、第二单片机U1、第三单片机U2的5引脚分别连接晶振X3、晶振X1、晶振X2的3脚，晶振X3、晶振X1、晶振X2的4脚分别接+3.3V电源，晶振X3、晶振X1、晶振X2的2脚分别接地；第一单片机U3、第二单片机U1、第三单片机U2的1引脚、19引脚、32引脚、48引脚、64引脚、13引脚分别接+3.3V电源，同时分别通过电容C12、电容C13和电容C14、电容C6、电容C7和电容C8、电容C9、电容C10和电容C11接地；第一单片机U3、第二单片机U1、第三单片机U2的1引脚和19引脚、32引脚和48引脚、64引脚和13引脚分别通过电容C12、电容C13、电容C14接地；第一单片机U3、第二单片机U1、第三单片机U2的18引脚、63引脚、12引脚接地；第一单片机U3、第二单片机U1、第三单片机U2的7引脚分别通过电阻R17、电阻R13、电阻R15接+3.3V电源，又分别通过复位开关K3、复位开关K1、复位开关K2接地；第一单片机U3、第二单片机U1、第三单片机U2的60引脚分别通过电阻R16、电阻R12、电阻R14接地。如图16所示，姿态和振动监测系统中的监测电路选用TI公司的COTEX-M4核的TM4C123GH6PZ ARM芯片U4，监测电路还包括一个调试接口J11, 调试接口J11的1脚接3.3V电源，5脚接ARM芯片U4的83引脚，7脚接ARM芯片U4的84引脚，并通过电阻R30接 3.3V电源，9脚接ARM芯片U4的85引脚，4脚接ARM芯片U4的63引脚，6脚接ARM芯片U4的82引脚，8脚和10脚连接后接地；ARM芯片U4的65引脚、66引脚分别连接晶振X4两端，并分别通过电容C56、电容C57接地；电容C45、电容C46、电容C47、电容C48、电容C49一端接3.3V电源，另一端接地；ARM芯片U4的63脚通过电阻R34连接至复位按钮1，并通过电容C58接地，通过电阻R35连接至3.3V电源。如图17所示，姿态和振动监测系统中的通讯模块选用MAX232芯片D5，芯片D5的1脚、3脚分别连接电容C21两端，4脚、5脚分别连接电容C22两端，11脚、12脚分别接至 ARM芯片U4的100引脚、99引脚，15脚通过电容C25连接16脚后接+5V电源，芯片D5的2脚通过电容C23接+5V电源，芯片D5的6脚通过电容C24接地。本发明实施例建立了综采工作面测量机器人姿态和振动监测系统，可实现对综采工作面测量机器人的姿态和振动参数采集，判断振动量级以采取对应的应对方案及处理措施，大大提升了综采工作面测量机器人的可靠性和安全性。
