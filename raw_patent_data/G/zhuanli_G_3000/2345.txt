标题title
一种图像处理方法及装置
摘要abst
本发明公开了一种图像处理方法及装置，运用于激光直写技术领域，方法包括：将M幅灰度图像全部处理成M幅二值图像，其中，所述M幅灰度图像由F颗激光器、每颗激光器分别曝光R块同样形状和大小的感光涂层后得到，M=R*F;求出任意第S颗激光器对应的R幅二值图像的像素密度均值,得到F个像素密度均值,以使得按像素密度均值从大到小或者从小到大排序F颗激光器后曝光感光涂层得到的图像的色差更加均匀。利用本图像处理方法及装置对F颗激光器根据像素密度均值按从大到小或者从小到大顺序排序并依次安装在激光直写设备上，曝光得到的图像的色差分布更加均匀。
权利要求书clms
1.一种图像处理方法，应用于激光直写技术领域，其特征在于，包括如下处理步骤：将M幅灰度图像全部处理成M幅二值图像，其中，所述M幅灰度图像由F颗激光器、每颗激光器分别曝光R块同样形状和大小的感光涂层后得到，M=R*F ;求出任意第S颗激光器对应的R幅二值图像的像素密度均值，得到F个像素密度均值，以使得按像素密度均值从大到小或者从小到大排序对应的F颗激光器后，F颗激光器曝光感光涂层得到的图像的色差更加均匀，其中，S为变量且 1≤S≤F。2.如权利要求1所述的图像处理方法，其特征在于：将M幅灰度图像全部处理成M幅二值图像，包括如下步骤：对每一幅所述灰度图像进行均值卷积，均值卷积完成后乘系数，得到卷积图像；将所述卷积图像中的每一个像素值和所述灰度图像的对应的每一个像素值逐个对比，区分出前景和背景，得到所述二值图像；其中，均值卷积的公式如下：，其中，Z为均值卷积结果，n为卷积核大小，为所述灰度图像中坐标为处的像素点的像素值，/＞，/＞为0到1的系数，value为自定义值，/＞为所述灰度图像中坐标为的像素点，Yi为所述灰度图像中的第i个像素，/＞为卷积图的第i个像素点,Ri为输出的二值化图像。3.如权利要求1所述的图像处理方法，其特征在于：求出第S颗激光器对应的R幅二值图像的像素密度均值的具体步骤为：求出第S颗激光器对应的R幅二值图像中的第1幅二值图像的像素密度值；以和求同样的办法，求出剩余的幅二值图像的像素密度值/＞；根据公式，求出第S颗激光器对应的R幅二值图像对应的像素密度均值/＞。4.如权利要求3所述的图像处理方法，其特征在于，求出第S颗激光器对应的R幅二值图像中的第1幅的像素密度值，具体步骤为：计算第S颗激光器曝光对应的第1幅二值图像中的像素值为0的像素点的数量；根据公式，求得/＞；其中，为像素值为0的像素点的数量，/＞表示像素点的像素值为0，Q表示每一幅二值图像的面积。5.一种图像处理装置，其特征在于，包括：图像处理模块，用于：将M幅灰度图像全部处理成M幅二值图像，其中，所述M幅灰度图像由F颗激光器、每颗激光器分别曝光R块同样形状和大小的感光涂层后得到，M=R*F ;像素密度均值获取模块，用于：求出任意第S颗激光器对应的R幅二值图像的像素密度均值，得到F个像素密度均值，以使得按像素密度均值从大到小或者从小到大排序对应的F颗激光器后，F颗激光器曝光感光涂层得到的图像的色差更加均匀，其中：S为变量且1≤S≤F。6.如权利要求5所述的图像处理装置，其特征在于，所述M幅二值图像是由M幅灰度图像经二值化处理后得到，具体包括如下步骤：对每一幅所述灰度图像进行均值卷积，均值卷积完成后乘系数，得到卷积图像；将所述卷积图像中的每一个像素值和所述灰度图像的对应的每一个像素值逐个对比，区分出前景和背景，得到所述二值图像；其中，均值卷积的公式如下：，其中，Z为均值卷积结果，n为卷积核大小，为所述灰度图像中坐标为处的像素点的像素值，/＞，/＞为0到1的系数，value为自定义值，/＞为所述灰度图像中坐标为的像素点，Yi为所述灰度图像中的第i个像素，/＞为卷积图的第i个像素点,Ri为输出的二值化图像。7.如权利要求6所述的图像处理装置，其特征在于，求出第S颗激光器对应的R幅二值图像的像素密度均值的具体步骤为：求出第S颗激光器对应的R幅二值图像中的第1幅二值图像的像素密度值；以和求同样的办法，求出剩余的幅二值图像的像素密度值/＞；根据公式，求出第S颗激光器对应的R幅二值图像对应的像素密度均值/＞。8.如权利要求6所述的图像处理装置，其特征在于，求出第S颗激光器对应的R幅二值图像中的第1幅的像素密度值，具体步骤为：计算第S颗激光器曝光对应的第1幅二值图像中的像素值为0的像素点的数量；根据公式，求得/＞；其中，为像素值为0的像素点的数量，/＞表示像素点的像素值为0，Q表示每一幅二值图像的面积。
说明书desc
技术领域本发明涉及激光直写技术领域，尤其涉及到一种图像处理方法及装置。背景技术在激光直写技术领域 ，若干颗同规格激光器在理论上技术参数是相同的，用若干颗同规格激光器逐行曝光同一网版上涂镀均匀的感光涂层时，每一颗激光器曝光对应的那部分感光涂层后得到的图像区块的像素密度值相等。因此，由若干图像区块组成的整幅图像的像素密度理论上均匀一致且和每一图像区块的像素密度值相同。然而，由于每颗激光器因性能差异导致曝光技术参数存在差异，例如不同的激光器曝光同一面积大小的感光涂层得到的经处理后的二值图像的像素密度不同，导致曝光各自对应的那部分感光涂层后得到的各图像区块的像素密度值不相等，最后由若干图像区块组成的整幅图像的色差分布不均匀。发明内容本发明提供一种图像处理方法及装置，其目的在于解决若干激光器因不是根据曝光得到的图像的像素密度值大小排序安装在激光直写设备上，导致所有激光器爆光出的图像在整体上色差分布不均匀的问题。本发明的技术方案如下：一种图像处理方法，应用于激光直写技术领域，包括如下处理步骤：将M幅灰度图像全部处理成M幅二值图像，其中，M幅灰度图像由F颗激光器、每颗激光器分别曝光R块同样形状和大小的感光涂层后得到，M=R*F ;求出任意第S颗激光器对应的R幅二值图像的像素密度均值，得到F个像素密度均值/＞，以使得按像素密度均值从大到小或者从小到大排序对应的F颗激光器后，F颗激光器曝光感光涂层得到的图像的色差更加均匀，其中，S为变量且 1≤S≤F。在一些实施例中，将M幅灰度图像全部处理成M幅二值图像，包括如下步骤：对每一幅灰度图像进行均值卷积，均值卷积完成后乘系数，得到卷积图像；将卷积图像中的每一个像素值和灰度图像的对应的每一个像素值逐个对比，区分出前景和背景，得到二值图像；其中，均值卷积的公式如下：，其中，Z为均值卷积结果，n为卷积核大小，为灰度图像中坐标为处的像素点的像素值，/＞，/＞为0到1的系数，value为自定义值，/＞为灰度图像中坐标为的像素点，Yi为灰度图像中的第i个像素，/＞为卷积图的第i个像素点,Ri为输出的二值化图像。在一些实施例中，求出第S颗激光器对应的R幅二值图像的像素密度均值的具体步骤为：求出第S颗激光器对应的R幅二值图像中的第1幅二值图像的像素密度值；以和求同样的办法，求出剩余的幅二值图像的像素密度值/＞；根据公式，求出第S颗激光器对应的R幅二值图像对应的像素密度均值/＞。在一些实施例中，求出第S颗激光器对应的R幅二值图像中的第1幅的像素密度值，具体步骤为：计算第S颗激光器曝光对应的第1幅二值图像中的像素值为0的像素点的数量；根据公式，求得/＞；其中，为像素值为0的像素点数量，/＞表示像素点的像素值为0，Q表示每一幅二值图像的面积。 本发明还公开了一种图像处理装置，包括：图像处理模块，用于：将M幅灰度图像全部处理成M幅二值图像，其中，M幅灰度图像由F颗激光器、每颗激光器分别曝光R块同样形状和大小的感光涂层后得到，M=R*F ;像素密度均值获取模块，用于：求出任意第S颗激光器对应的R幅二值图像的像素密度均值，得到F个像素密度均值，以使得按像素密度均值从大到小或者从小到大排序对应的F颗激光器后，F颗激光器曝光感光涂层得到的图像的色差更加均匀，其中：S为变量且1≤S≤F。在一些实施例中，M幅二值图像是由M幅灰度图像经二值化处理后得到，具体包括如下步骤：对每一幅灰度图像进行均值卷积，均值卷积完成后乘系数，得到卷积图像；将卷积图像中的每一个像素值和灰度图像的对应的每一个像素值逐个对比，区分出前景和背景，得到二值图像；其中，均值卷积的公式如下：，其中，Z为均值卷积结果，n为卷积核大小，为灰度图像中坐标为处像素点的像素值，/＞，/＞为0到1的系数，value为自定义值，/＞为灰度图像中坐标为的像素点，Yi为灰度图像中的第i个像素，/＞为卷积图的第i个像素点,Ri为输出的二值化图像。在一些实施例中，求出第S颗激光器对应的R幅二值图像的像素密度均值的具体步骤为：求出第S颗激光器对应的R幅二值图像中的第1幅二值图像的像素密度值；以和求同样的办法，求出剩余的幅二值图像的像素密度值/＞；根据公式，求出第S颗激光器对应的R幅二值图像对应的像素密度均值/＞。在一些实施例中，求出第S颗激光器对应的R幅二值图像中的第1幅的像素密度值，具体步骤为：计算第S颗激光器曝光对应的第1幅二值图像中的像素值为0的像素点的数量；根据公式，求得/＞；其中，为像素值为0的像素点数量，/＞表示像素点的像素值为0，Q表示每一幅二值图像的面积。通过上述技术方案，每一颗激光器均曝光同样大小的感光涂层，得到R幅同样大小的灰度图像，F颗激光器共曝光得到M=R*F幅灰度图像。该M幅灰度图像全部通过二值化处理形成M幅二值图像。求出这F*R幅二值图的每幅的像素密度值，然后根据公式求出每一组的R幅二值图像的像素密度均值，共得到F个像素密度均值。根据F个像素密度均值，按照从大到小或者从小到大的顺序将对应的F颗激光器依次安装在激光直写设备上，然后用这重新排序后的F颗激光器曝光图像，则得到的图像的色差分布更加均匀。附图说明为了更清楚地说明本公开实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本公开的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明公开的图像处理方法的步骤图；图2是本发明公开的由摄像装置拍摄的第1颗激光器曝光同样大小的感光涂层得到的5幅灰度图；图3是本发明公开的由摄像装置拍摄的第2颗激光器曝光同样大小的感光涂层得到的5幅灰度图；图4是本发明公开的摄像装置拍摄的第3颗激光器曝光同样大小的感光涂层得到的5幅灰度图；图5是图2的5幅灰度图经图像处理后得到的对应的5幅二值图；图6是图3的5幅灰度图经图像处理后得到的对应的5幅二值图；图7是图4的5幅灰度图经图像处理后得到的对应的5幅二值图。图8是3颗激光器每颗曝光得到的5幅灰度图经图像处理后得到的5幅二值图像的像素密度值以及像素密度均值的列表图。图9为本发明公开的一种图像处理装置的模块图。实施方式下面结合附图和实施例对本公开的实施方式作进一步详细描述。以下实施例的详细描述和附图用于示例性地说明本公开的原理，但不能用来限制本公开的范围，本公开可以以许多不同的形式实现，不局限于文中公开的特定实施例，而是包括落入权利要求的范围内的所有技术方案。本公开提供这些实施例是为了使本公开透彻且完整，并且向本领域技术人员充分表达本公开的范围。应注意到：除非另外具体说明，这些实施例中阐述的部件和步骤的相对布置、材料的组分、数字表达式和数值应被解释为仅仅是示例性的，而不是作为限制。需要说明的是，在本公开的描述中，除非另有说明，“多个”的含义是大于或等于两个；术语“上”、“下”、“左”、“右”、“内”、“外”等指示的方位或位置关系仅是为了便于描述本公开和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本公开的限制。当被描述对象的绝对位置改变后，则该相对位置关系也可能相应地改变。此外，本公开中使用的“第一”、“第二”以及类似的词语并不表示任何顺序、数量或者重要性，而只是用来区分不同的部分。“垂直”并不是严格意义上的垂直，而是在误差允许范围之内。“平行”并不是严格意义上的平行，而是在误差允许范围之内。“包括”或者“包含”等类似的词语意指在该词前的要素涵盖在该词后列举的要素，并不排除也涵盖其他要素的可能。还需要说明的是，在本公开的描述中，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是直接相连，也可以通过中间媒介间接相连。对于本领域的普通技术人员而言，可视具体情况理解上述术语在本公开中的具体含义。当描述到特定器件位于第一器件和第二器件之间时，在该特定器件与第一器件或第二器件之间可以存在居间器件，也可以不存在居间器件。本公开使用的所有术语与本公开所属领域的普通技术人员理解的含义相同，除非另外特别定义。还应当理解，在诸如通用字典中定义的术语应当被解释为具有与它们在相关技术的上下文中的含义相一致的含义，而不应用理想化或极度形式化的意义来解释，除非这里明确地这样定义。对于相关领域普通技术人员已知的技术、方法和设备可能不作详细讨论，但在适当情况下，技术、方法和设备应当被视为说明书的一部分。参考图1，本发明所说的一种图像处理方法，应用于激光直写技术领域，包括如下处理步骤：将M幅灰度图像全部处理成M幅二值图像，其中，M幅灰度图像由F颗激光器、每颗激光器分别曝光R块同样形状和大小的感光涂层后得到，M=R*F ;求出任意第S颗激光器对应的R幅二值图像的像素密度均值，得到F个像素密度均值/＞，以使得按像素密度均值从大到小或者从小到大排序对应的F颗激光器后，F颗激光器曝光感光涂层得到的图像的色差更加均匀，其中，S为变量且 1≤S≤F。参考图2到图7，在一些实施例中，M取15，F取3，R则等于5。也就是说，用3颗激光器参与曝光感光涂层，每颗激光曝光5次同样面积大小的感光涂层，共得到5幅灰度图，所以3颗激光器共曝光得到15幅灰度图：图2中第1颗激光器曝光感光涂层后得到5幅灰度图，从左到右分别命名为：1-1A,1-2A,1-3A，1-4A，1-5A;图3中第2颗激光器曝光感光涂层后得到5幅灰度图，从左到右分别命名为2-1A,2-2A,2-3A,2-4A,2-5A;图4中第3颗激光器曝光感光涂层后得到曝光5幅灰度图，从左到右分别命名为3-1A,3-2A,3-3A,3-4A,3-5A。参考图5，图2中的5幅灰度图经过处理后分别得到对应的5幅二值图，分别命名为：1-1B,1-2B,1-3B，1-4B，1-5B; 参考图6，图3中的5幅灰度图经过处理后分别得到对应的5幅二值图，分别命名为：2-1B,2-2B,2-3B，2-4B，2-5B；参考图7， 图4中的5幅灰度图经过处理后分别得到对应的5幅二值图，分别命名为：3-1B,3-2B,3-3B，3-4B，3-5B 。需要说明的是，上述15幅灰度图的幅面大小均相同。在一些实施例中，每一幅灰度图通过二值化处理后，得到对应的二值图像。具体地，在一些实施例中，二值化处理的步骤如下：对每一幅灰度图像进行均值卷积，均值卷积完成后乘系数，得到卷积图像；将卷积图像中的每一个像素值和灰度图像的对应的每一个像素值逐个对比，区分出前景和背景，得到二值图像；其中，均值卷积的公式如下：，其中，Z为均值卷积结果，n为卷积核大小，为灰度图像中处像素值，/＞，/＞为0到1的系数，value为自定义值，/＞为灰度图像中坐标为的像素点，Yi为灰度图像中的第i个像素，/＞为卷积图的第i个像素点,Ri为输出的二值化图像。 为了求出每一颗激光器曝光的R幅二值图像的像素密度均值，需要求出任意第S颗激光器对应的R幅二值图像的像素密度均值，得到S个像素密度均值/＞。本实施例中，S=3,即有3颗激光器，每颗激光器曝光的二值图形的幅数R为5，故M=15。因此，先根据每颗激光器曝光的5幅二值图像求出5个像素密度值，然后再根据5个像素密度值求出1个像素密度均值。 下面以求图5中最左边的一幅二值图像1-1B的像素密度值为例进行讲解，对于图5中其余四幅二值图像：1-2B、1-3B、1-4B和1-5B的密度值，以及图6和图7中每一幅二值图像的像素密度值，均可以采用和求二值图像1-1B的像素密度同样的办法求出。对于图5的左边的第一幅二值图像1-1B，定义像素密度值为，/＞中“11”左边的“1” 表示第1颗激光器，右边的“1”表示用第1颗激光器曝光得到的5幅二值图像中的第一幅1-1B。由此，可以理解的是，图5中从左到右的5幅二值图像的像素密度值分别为和/＞，第1颗激光器曝光得到的5幅二值图像的像素密度均值定义为，/＞=/＞；图6中, 从左到右的5幅二值图像的像素密度值分别为，第2颗激光器曝光得到的5幅二值图像的像素密度均值定义为/＞，/＞；图7中，从左到右5幅二值图像的像素密度值分别为/＞和/＞，第3颗激光器曝光得到的5幅二值图像的像素密度均值定义为，可以理解的是，当/＞、都求出后，则/＞均可求出。下面介绍如何计算任意第S颗激光器曝光的R幅二值图像中的第1幅的像素密度值的计算方法，对于其余像素像素密度值，均可以用同样的办法求得，在此不再累述。参考图5，示例性的，S取1，R取5，即计算第1颗激光器曝光得到的第一幅二值图像1-1B中像素值为0的像素值为0的像素点的数量，然后根据公式/＞，得到第1颗激光器曝光得到的第一幅二值图像1-1B的像素密度值。其中，Q表示每一幅二值图像的面积。对于/＞，可以通过计算机中的统计软件统计得到 ，同样的，Q也可以通过计算机计算得到。求出了15个像素密度值后，根据前面的公式，则：，/＞，/＞均可求出。参考图8，图8是利用3颗激光器各自分别曝光5块面积同样大小的感光涂层后，摄像装置拍摄得到的5幅灰度图像经处理后变成的5幅二值图像，每张二值图像的像素密度，以及5张二值图像的像素密度均值和去掉最大像素密度及最小像素密度后的均值。例如：图5中第1号激光器对应的5幅二值图像的密度值分别为：0.482851，0.483659，0.547584，0.548989和0.554316，则像素密度均值为0.523480；去掉最大值0.554316和最小值0.482851后，得到的像素密度均值为0.526744。图6中第2号激光器对应的5幅二值图像的密度值分别为：0.48196、0.506601、0.531561、0.547071和0.555244，则像素密度均值/＞为0.524487，去掉最大值0.555244和最小值0.48196后，得到的像素密度均值为0.528411。图7中的第3号激光器对应的5幅二值图像的密度值分别为：0.450572、0.477533、0.495542、0.515997和0.527162，则像素密度均值/＞为0.493361，去掉最大值0.527162和最小值0.450572后，得到的像素密度均值为0.496357。因此，第1号至第3号激光器各自对应的5张二值图的像素密度均值分别为：0.523480、0.524487和0.493361，按从大到小的顺序为：第2号激光器、第1号激光器和第3号激光器。可以理解的是，若激光器共有F颗，每一颗激光器曝光的M幅灰度图像经处理后得到M幅二值图像的F个像素密度均值/＞均可以求出，然后根据像素密度均值按从大到小或者从小到大的顺序将F个像素密度均值对应的激光器重新排序后依次安装在激光直写设备上，以使得重新排序后的这F个激光器在同时出光曝光感光涂层后，得到的整幅图像的色差分布更加均匀。参考图9，本发明还公开了一种图像处理装置，包括：图像处理模块，将M幅灰度图像全部处理成M幅二值图像，其中，M幅灰度图像由F颗激光器、每颗激光器分别曝光R块同样形状和大小的感光涂层后得到，M=R*F ；像素密度均值获取模块，用于：求出任意第S颗激光器对应的R幅二值图像的像素密度均值，得到F个像素密度均值，以使得按像素密度均值从大到小或者从小到大排序F颗激光器后曝光感光涂层得到的图像的色差更加均匀，其中：S为变量且1≤S≤F。该图像处理装置的工作原理及方法和前面介绍的图像处理方法完全相同，在此不再累述。另外，本申请中所描述的摄像装置，优选为常见的CCD摄像装置。本发明公开的图像处理方法及图像处理装置，均能实现的技术效果有：每颗激光器均曝光R块面积和形状同样大小的感光涂层，得到R幅灰度图像，F颗激光器共曝光得到M=R*F幅灰度图。该M幅灰度图像全部通过图像二值化处理得到M幅二值图像。求出这F组每组包括R幅二值图像中每幅二值图像的像素密度值，然后根据公式求出每一组的R幅二值图像的像素密度均值，共得到F个像素密度均值，将F个像素密度均值对应的F颗激光器按照从大到小或者从小到大的顺序安装在激光直写设备上，以使得用这F颗激光器爆出来的图像的色差分布更加均匀。因此，本专利申请的目的就是为了将若干颗激光器根据曝光的二值图像的像素密度均值大小这一指标进行重新排序并安装在激光直写设备上，从而在以后的图像曝光过程中，重新排序的F颗激光器爆出的图像的色差分布更加均匀。至此，已经详细描述了本公开的各实施例。为了避免遮蔽本公开的构思，没有描述本领域所公知的一些细节。本领域技术人员根据上面的描述，完全可以明白如何实施这里公开的技术方案。虽然已经通过示例对本公开的一些特定实施例进行了详细说明，但是本领域的技术人员应该理解，以上示例仅是为了进行说明，而不是为了限制本公开的范围。本领域的技术人员应该理解，可在不脱离本公开的范围和精神的情况下，对以上实施例进行修改或者对部分技术特征进行等同替换。尤其是，只要不存在结构冲突，各个实施例中所提到的各项技术特征均可以任意方式组合起来。
