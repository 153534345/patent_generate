标题title
一种基于定向区域生长的激光轮廓线提取方法
摘要abst
本申请公开了一种基于定向区域生长的激光轮廓线提取方法，涉及图像数据处理领域，该激光轮廓线提取方法从提取到的目标采样列中的激光区间的区间中心的像素点开始，依次向两侧定向搜索有效区域，提取得到目标采样列及其两侧相邻的像素列中的激光区间的区间中心的像素点所连成的激光线段；根据已经提取到的激光线段的线段端点确定更新后的目标采样列及其采样区域继续提取，最终对所有激光线段进行后处理操作，可以提取得到激光图像中完整的激光轮廓线。该方法的像素点搜索过程更具有导引性，因此可以提高搜索的效率，快速提取得到激光轮廓线。
权利要求书clms
1.一种基于定向区域生长的激光轮廓线提取方法，其特征在于，所述基于定向区域生长的激光轮廓线提取方法包括：初始化激光图像中的一个像素列作为目标采样列，并初始化所述目标采样列中的采样区域，每个像素列中的采样区域覆盖所述像素列中连续的若干个像素点；从所述目标采样列的初始化的采样区域开始对所述目标采样列中的像素点进行采样，提取所述目标采样列中的激光区间，每个像素列中的激光区间包含所述像素列中灰度值达到灰度值阈值的像素点；对于任意一个像素列，从所述像素列的采样区域开始对所述像素列中的像素点进行采样以提取所述像素列中的激光区间的方法包括：对所述像素列的采样区域内的像素点进行采样，当所述像素列的采样区域中灰度值达到所述灰度值阈值的像素点构成的候选区间与所述采样区域沿着列方向的两侧边界处的像素点之间的距离均达到距离阈值时，直接将所述候选区间作为所述像素列中的激光区间，当所述像素列的采样区域中不存在灰度值达到所述灰度值阈值的像素点时，或者当所述像素列的采样区域中灰度值达到所述灰度值阈值的像素点构成的候选区间与所述采样区域沿着列方向的至少一侧边界处的像素点之间的距离未达到所述距离阈值时，沿着列方向移动所述采样区域并再次执行所述对所述像素列的采样区域内的像素点进行采样的步骤，将对多个采样区域内采样提取得到的候选区间包含的像素点进行去重合并，得到所述像素列中的激光区间；从所述目标采样列中的激光区间的区间中心的像素点开始，依次确定所述目标采样列两侧相邻的像素列的采样区域，并从每个像素列的采样区域开始对所述像素列中的像素点进行采样，直至提取得到所述目标采样列及其两侧相邻的像素列中的激光区间的区间中心的像素点所连成的激光线段，包括对于从所述目标采样列开始、在所述目标采样列的同一侧沿着行方向依次排列的第i个像素列：确定所述第i个像素列的采样区域的中心像素点与候选端点列中的激光区间的区间中心的像素点位于同一行，i为起始值为1的整数；i=1时，第i个像素列的的候选端点列为所述目标采样列；i≥2时，所述候选端点列是所述目标采样列及前i-1个像素列中最近一个已经确定存在激光区间的像素列，则提取所述目标采样列及其两侧相邻的像素列中的激光区间的区间中心的像素点所连成的激光线段包括：从所述第i个像素列的采样区域开始对所述第i个像素列中的像素点进行采样，提取所述第i个像素列中的灰度值达到灰度值阈值的像素点构成的参考区间，当所述第i个像素列中的参考区间与所述第i个像素列的候选端点列中的激光区间具有连通关系时，将所述第i个像素列中的参考区间作为所述第i个像素列的激光区间，并将所述第i个像素列作为更新后的候选端点列，令i=i+1并再次执行所述从所述第i个像素列的采样区域开始对所述第i个像素列中的像素点进行采样的步骤，当确定所述第i个像素列中不存在参考区间，或者确定所述第i个像素列中的参考区间与所述第i个像素列的候选端点列中的激光区间不具有连通关系时，确定所述第i个像素列不存在激光区间，当确定所述第i个像素列中不存在激光区间，且所述第i个像素列与所述候选端点列之间间隔的像素列的列数未达到列数阈值时，保持当前的候选端点列不变，令i=i+1并再次执行所述确定所述第i个像素列的采样区域的中心像素点与候选端点列中的激光区间的区间中心的像素点位于同一行的步骤，当确定所述第i个像素列中不存在激光区间，且所述第i个像素列与所述候选端点列之间间隔的像素列的列数达到所述列数阈值时，将所述候选端点列中的激光区间的区间中心的像素点作为所述激光线段的一侧的线段端点；根据所述激光线段的线段端点确定更新后的目标采样列及其采样区域，再次执行所述从所述目标采样列的初始化的采样区域开始对所述目标采样列中的像素点进行采样的步骤，直至遍历完所述激光图像中所有像素列时提取得到所有激光线段；对所有激光线段进行后处理操作，提取得到所述激光图像中的激光轮廓线。2.根据权利要求1所述的基于定向区域生长的激光轮廓线提取方法，其特征在于，所述沿着列方向移动所述采样区域包括：将所述采样区域沿着列方向朝目标移动侧移动预定个数的像素点以更新所述采样区域，所述采样区域在移动更新前后至少重合覆盖一个像素点；当移动更新前的所述采样区域中不存在灰度值达到所述灰度值阈值的像素点，且移动更新前的所述采样区域的一侧边界位于所在像素列的边界处时，确定远离所述像素列的边界的一侧为所述目标移动侧；当移动更新前的所述采样区域中不存在灰度值达到所述灰度值阈值的像素点，且移动更新前的所述采样区域的两侧边界都不位于像素列的边界处时，确定沿着列方向的任意一侧为所述目标移动侧；当移动更新前的采样区域中存在候选区间时，确定移动更新前的采样区域及提取到的候选区间之间未达到所述距离阈值的一侧为所述目标移动侧。3.根据权利要求1所述的基于定向区域生长的激光轮廓线提取方法，其特征在于，所述基于定向区域生长的激光轮廓线提取方法还包括：当确定所述第i个像素列中的参考区间与所述第i个像素列的候选端点列中的激光区间具有连通关系，且所述候选端点列不是第i-1个像素列时，在所述第i个像素列的激光区间和所述第i个像素列的候选端点列的激光区间之间添加灰度值达到灰度值阈值的像素点以形成连通域。4.根据权利要求1所述的基于定向区域生长的激光轮廓线提取方法，其特征在于，所述提取得到所述目标采样列及其两侧相邻的像素列中的激光区间的区间中心的像素点所连成的激光线段还包括：计算所述目标采样列及其两侧相邻的像素列中的激光区间所构成的连通域中的所有像素点的平均灰度值，当计算得到的所述平均灰度值达到线段灰度阈值时，提取所述目标采样列及其两侧相邻的像素列中的激光区间的区间中心的像素点所连成的激光线段，否则丢弃所述目标采样列及其两侧相邻的像素列中的激光区间所构成的连通域。5.根据权利要求1所述的基于定向区域生长的激光轮廓线提取方法，其特征在于，所述根据所述激光线段的线段端点确定更新后的目标采样列及其采样区域：以所述激光线段的线段端点在待搜索侧间隔若干列的像素列作为更新后的目标采样列，并初始化更新后的目标采样列中的采样区域，其中，待搜索侧是所述激光线段的线段端点远离另一个线段端点的一侧。6.根据权利要求1所述的基于定向区域生长的激光轮廓线提取方法，其特征在于，所述对所有激光线段进行后处理操作包括：当两条激光线段的线段距离未超过线段距离阈值时，通过插值法在所述两条激光线段的相靠近的线段端点之间添加灰度值达到灰度值阈值的像素点，以使得所述两条激光线段的线段端点相连。7.根据权利要求6所述的基于定向区域生长的激光轮廓线提取方法，其特征在于，所述线段距离阈值包括第一距离阈值和第二距离阈值，确定两条激光线段的线段距离是否超过所述线段距离阈值包括：当确定两条激光线段的相靠近的线段端点之间在行方向上的距离达到所述第一距离阈值，或者，确定两条激光线段的相靠近的线段端点在列方向上的距离达到所述第二距离阈值时，确定两条激光线段的线段距离超过所述线段距离阈值，否则确定两条激光线段的线段距离未超过所述线段距离阈值。
说明书desc
技术领域本申请涉及图像数据处理领域，尤其是一种基于定向区域生长的激光轮廓线提取方法。背景技术随着生产技术的发展，工业产线自动化需求越来越高，线激光轮廓传感器被广泛应用于无接触地获取物体的轮廓信息，是物体表面三维重构技术的基础，为物体的检测、识别、分类等提供依据。线激光轮廓传感器向物体发射激光并接收物体表面的漫反射光线，漫反射光线在线激光轮廓传感器上成像得到包含激光图案的激光图像，从激光图像中提取激光图案的激光轮廓线，就能准确获取物体的轮廓信息。由于线激光轮廓传感器向物体发射一条激光，因此得到的激光图像中也仅存在一条激光图案，但是受物体表面形态、环境干扰、采集误差等因素的影响，激光图像中的激光图案往往会存在分段和弯曲等情况，导致难以准确完整的从激光图案中提取激光轮廓线，直接影响了对物体的轮廓信息的识别效率。由于各种干扰和误差的存在，仅通过阈值分割的方法难以从激光图像中提取激光轮廓线，因此目前发展出各种提取激光轮廓线的算法，有些甚至引入了机器学习与神经网络，但是这些方法的数据处理量往往较大，提取激光轮廓线的耗时较长。发明内容本申请人针对上述问题及技术需求，提出了一种基于定向区域生长的激光轮廓线提取方法，本申请的技术方案如下：一种基于定向区域生长的激光轮廓线提取方法，该基于定向区域生长的激光轮廓线提取方法包括：初始化激光图像中的一个像素列作为目标采样列，并初始化目标采样列中的采样区域，每个像素列中的采样区域覆盖像素列中连续的若干个像素点；从目标采样列的初始化的采样区域开始对目标采样列中的像素点进行采样，提取目标采样列中的激光区间，每个像素列中的激光区间包含像素列中灰度值达到灰度值阈值的像素点；从目标采样列中的激光区间的区间中心的像素点开始，依次确定目标采样列两侧相邻的像素列的采样区域，并从每个像素列的采样区域开始对像素列中的像素点进行采样，直至提取得到目标采样列及其两侧相邻的像素列中的激光区间的区间中心的像素点所连成的激光线段；根据激光线段的线段端点确定更新后的目标采样列及其采样区域，再次执行从目标采样列的初始化的采样区域开始对目标采样列中的像素点进行采样的步骤，直至遍历完激光图像中所有像素列时提取得到所有激光线段；对所有激光线段进行后处理操作，提取得到激光图像中的激光轮廓线。其进一步的技术方案为，对于任意一个像素列，从像素列的采样区域开始对像素列中的像素点进行采样以提取像素列中的激光区间的方法包括：对像素列的采样区域内的像素点进行采样；当像素列的采样区域中灰度值达到灰度值阈值的像素点构成的候选区间与采样区域沿着列方向的两侧边界处的像素点之间的距离均达到距离阈值时，直接将候选区间作为像素列中的激光区间；当像素列的采样区域中不存在灰度值达到灰度值阈值的像素点时，或者当像素列的采样区域中灰度值达到灰度值阈值的像素点构成的候选区间与采样区域沿着列方向的至少一侧边界处的像素点之间的距离未达到距离阈值时，沿着列方向移动采样区域并再次执行对像素列的采样区域内的像素点进行采样的步骤；将对多个采样区域内采样提取得到的候选区间包含的像素点进行去重合并，得到像素列中的激光区间。其进一步的技术方案为，沿着列方向移动采样区域包括：将采样区域沿着列方向朝目标移动侧移动预定个数的像素点以更新采样区域，采样区域在移动更新前后至少重合覆盖一个像素点；当移动更新前的采样区域中不存在灰度值达到灰度值阈值的像素点，且移动更新前的采样区域的一侧边界位于所在像素列的边界处时，确定远离像素列的边界的一侧为目标移动侧；当移动更新前的采样区域中不存在灰度值达到灰度值阈值的像素点，且移动更新前的采样区域的两侧边界都不位于像素列的边界处时，确定沿着列方向的任意一侧为目标移动侧；当移动更新前的采样区域中存在候选区间时，确定移动更新前的采样区域及提取到的候选区间之间未达到距离阈值的一侧为目标移动侧。其进一步的技术方案为，依次确定目标采样列两侧相邻的像素列的采样区域包括对于从目标采样列开始、在目标采样列的同一侧沿着行方向依次排列的第i个像素列：确定第i个像素列的采样区域的中心像素点与候选端点列中的激光区间的区间中心的像素点位于同一行，i为起始值为1的整数；i=1时，第i个像素列的的候选端点列为目标采样列；i≥2时，候选端点列是目标采样列及前i-1个像素列中最近一个已经确定存在激光区间的像素列。其进一步的技术方案为，提取目标采样列及其两侧相邻的像素列中的激光区间的区间中心的像素点所连成的激光线段包括：从第i个像素列的采样区域开始对第i个像素列中的像素点进行采样，提取第i个像素列中的灰度值达到灰度值阈值的像素点构成的参考区间；当第i个像素列中的参考区间与第i个像素列的候选端点列中的激光区间具有连通关系时，将第i个像素列中的参考区间作为第i个像素列的激光区间，并将第i个像素列作为更新后的候选端点列，令i=i+1并再次执行从第i个像素列的采样区域开始对第i个像素列中的像素点进行采样的步骤；当确定第i个像素列中不存在参考区间，或者确定第i个像素列中的参考区间与第i个像素列的候选端点列中的激光区间不具有连通关系时，确定第i个像素列不存在激光区间；当确定第i个像素列中不存在激光区间，且第i个像素列与候选端点列之间间隔的像素列的列数未达到列数阈值时，保持当前的候选端点列不变，令i=i+1并再次执行确定第i个像素列的采样区域的中心像素点与候选端点列中的激光区间的区间中心的像素点位于同一行的步骤；当确定第i个像素列中不存在激光区间，且第i个像素列与候选端点列之间间隔的像素列的列数达到列数阈值时，将候选端点列中的激光区间的区间中心的像素点作为激光线段的一侧的线段端点。其进一步的技术方案为，基于定向区域生长的激光轮廓线提取方法还包括：当确定第i个像素列中的参考区间与第i个像素列的候选端点列中的激光区间具有连通关系，且候选端点列不是第i-1个像素列时，在第i个像素列的激光区间和第i个像素列的候选端点列的激光区间之间添加灰度值达到灰度值阈值的像素点以形成连通域。其进一步的技术方案为，提取得到目标采样列及其两侧相邻的像素列中的激光区间的区间中心的像素点所连成的激光线段还包括：计算目标采样列及其两侧相邻的像素列中的激光区间所构成的连通域中的所有像素点的平均灰度值，当计算得到的平均灰度值达到线段灰度阈值时，提取目标采样列及其两侧相邻的像素列中的激光区间的区间中心的像素点所连成的激光线段，否则丢弃目标采样列及其两侧相邻的像素列中的激光区间所构成的连通域。其进一步的技术方案为，根据激光线段的线段端点确定更新后的目标采样列及其采样区域：以激光线段的线段端点在待搜索侧间隔若干列的像素列作为更新后的目标采样列，并初始化更新后的目标采样列中的采样区域，其中，待搜索侧是激光线段的线段端点远离另一个线段端点的一侧。其进一步的技术方案为，对所有激光线段进行后处理操作包括：当两条激光线段的线段距离未超过线段距离阈值时，通过插值法在两条激光线段的相靠近的线段端点之间添加灰度值达到灰度值阈值的像素点，以使得两条激光线段的线段端点相连。其进一步的技术方案为，线段距离阈值包括第一距离阈值和第二距离阈值，确定两条激光线段的线段距离是否超过线段距离阈值包括：当确定两条激光线段的相靠近的线段端点之间在行方向上的距离达到第一距离阈值，或者，确定两条激光线段的相靠近的线段端点在列方向上的距离达到第二距离阈值时，确定两条激光线段的线段距离超过线段距离阈值，否则确定两条激光线段的线段距离未超过线段距离阈值。本申请的有益技术效果是：本申请公开了一种基于定向区域生长的激光轮廓线提取方法，该激光轮廓线提取方法以目标采样列中的激光区间的区间中心的像素点作为生长种子，向两侧的像素列定向搜索有效区域，在向两侧的像素列定向搜索的过程中，取第i个像素列的采样区域的中心像素点与候选端点列中的激光区间的区间中心的像素点位于同一行，该步骤限定了搜索的行范围，使得对目标采样列相邻的像素列不需要对每一列从上至下遍历所有像素点，而只需要直接在候选端点列的激光区间的区间中心所限定的行范围内进行搜索，从而可以更快搜索到目标采样列相邻的像素列中的激光区间以提取得到激光线段，搜索过程中更具有导引性，因此可以提高搜索的效率，快速提取得到激光轮廓线，降低激光轮廓线提取耗时，满足实时性要求。另外基于本申请从目标采样列开始向两侧相邻的像素列搜索的方法，在提取得到一条激光线段后，以激光线段的线段端点在待搜索侧间隔若干列的像素列作为更新后的目标采样列，也即对于分为了多段的激光轮廓线，搜索完当前激光线段后，可直接跳过多个像素列以搜索下一个激光线段，而无需固定逐列检索，跳过的这多个像素列中的激光区间会在下一次从目标采样列开始向两侧相邻的像素列搜索的过程中进行搜索补充，从而可以在保证搜索准确性的基础上进一步提高搜索的效率，快速提取得到激光轮廓线。本申请的激光轮廓线提取方法不管是在搜索提取一条激光线段的过程中，还是在对多条激光线段进行后处理操作的过程中，都会在符合要求的像素点之间添加灰度值达到灰度值阈值的像素点形成连通域，从而弥补因外界干扰和误差而缺失的像素点，有利于提取得到更完整、更连贯、更准确的激光轮廓线。附图说明图1是本申请一个实施例中的基于定向区域生长的激光轮廓线提取方法的方法流程图。图2是本申请一个实施例中提取任意一个像素列中的激光区间的方法流程图。图3是本申请一个实例中初始化的目标采样列以及目标采样列的采样区域的示意图。图4是本申请一个实施例中对目标采样列任意一侧依次排列的第i个像素列提取激光区间的示意图。图5是基于图3的实例，从目标采样列开始向左侧遍历搜寻的示意图。图6是本申请另一个实施例中对目标采样列任意一侧依次排列的第i个像素列提取激光区间的示意图。图7是基于图5的实例，向目标采样列左侧继续遍历搜寻，并在两个像素列的激光区间之间添加灰度值达到灰度值阈值的像素点的示意图。图8是本申请一个实例中获取到的激光图像的示意图。图9是对图8所示的激光图像按照传统的激光轮廓线提取方法提取得到的激光轮廓线的示意图。图10是对图8所示的激光图像按照本申请的激光轮廓线提取方法提取得到的激光轮廓线的示意图。具体实施方式下面结合附图对本申请的具体实施方式做进一步说明。本申请公开了一种基于定向区域生长的激光轮廓线提取方法，请参考图1所示的流程图，该激光轮廓线提取方法包括如下步骤：步骤1，初始化激光图像中的一个像素列作为目标采样列，并初始化该目标采样列中的采样区域。在本申请中，每个像素列中的采样区域覆盖该像素列中连续的若干个像素点，采样区域的区域大小固定不变，也即采样区域覆盖的像素点的数量总是不变，但采样区域所覆盖的像素点的数量可以自定义调节。在一个实施例中，初始化的目标采样列是位于激光图像的最左侧或最右侧的像素列，初始化的目标采样列中的采样区域覆盖该目标采样列中第一行开始的若干个像素点。步骤2，从目标采样列的初始化的采样区域开始对目标采样列中的像素点进行采样，提取目标采样列中的激光区间。在本申请中，提取得到的每个像素列中的激光区间包含该像素列中灰度值达到灰度值阈值的像素点，灰度值达到灰度值阈值的像素点即为属于激光图案的像素点，灰度值阈值是自定义值，该灰度值阈值应确保可以分离激光图案和背景图像，实际操作时一般可选取激光图案边缘的像素点的灰度值作为灰度值阈值。在一个实施例中，提取任意一个像素列中的激光区间的方法包括如下步骤，请参考图2所示的流程图：对该像素列的当前的采样区域内的像素点进行采样，确定该像素列中当前的采样区域中灰度值达到灰度值阈值的像素点，采样区域中可能存在部分像素点的灰度值达到灰度值阈值，或者，采样区域中所有像素点的灰度值都未达到灰度值阈值。当像素列的采样区域中不存在灰度值达到灰度值阈值的像素点时，沿着列方向移动以更新采样区域，并针对更新后的采样区域再次执行步骤进行采样。当像素列的当前的采样区域中存在灰度值达到灰度值阈值的像素点时，定义采样区域中灰度值达到灰度值阈值的像素点构成采样区域中的候选区间。检测像素列的当前的采样区域中的候选区间与该采样区域沿着列方向的两侧边界处的像素点之间的距离是否都达到距离阈值，距离阈值为自定义值。当像素列的当前的采样区域中的候选区间与该采样区域沿着列方向的两侧边界处的像素点之间的距离均达到距离阈值时，表示提取得到的候选区间位于采样区域中较为中心的区域，此时提取得到的候选区间可以认为是完整的，则直接将采样区域中提取到的候选区间作为该像素列中的激光区间。当像素列的采样区域中灰度值达到灰度值阈值的像素点构成的候选区间与采样区域沿着列方向的至少一侧边界处的像素点之间的距离未达到距离阈值时，表示候选区间靠近采样区域的边界处，则此时提取得到的候选区间有较大概率是不完整的，则沿着列方向移动以更新采样区域，并针对更新后的采样区域再次执行步骤进行采样。在上述步骤和步骤的情况中，都需要沿着列方向移动以更新采样区域，包括：将采样区域沿着列方向朝目标移动侧移动预定个数的像素点以更新采样区域，采样区域在移动更新前后至少重合覆盖一个像素点。每次沿着列方向移动的像素点的预定个数可以自定义设置，预定个数可以为1实现依次采样，或者预定个数也可以大于1实现间隔采样，比如可以移动3-5个像素点。但无论预定个数设置为多少，需要保证移动的像素点的预定个数不能超过单个采样区域覆盖的像素点的个数，也即要保证采样区域在移动更新前后至少重复覆盖一个像素点。采样区域在移动更新前后覆盖同一个像素列中不同的像素点，但覆盖的像素点的数量是相同的。在上述步骤的情况中，由于移动更新前的采样区域中不存在灰度值达到灰度值阈值的像素点，则在确定目标移动侧时包括两种情况：当移动更新前的采样区域的一侧边界位于所在像素列的边界处时，确定远离所述像素列的边界的一侧为目标移动侧：当移动更新前的采样区域位于像素列的上边界处时，确定目标移动侧为采样区域的下边界所在侧。当移动更新前的采样区域位于像素列的下边界处时，确定目标移动侧为采样区域的上边界所在侧。当移动更新前的采样区域的两侧边界都不位于像素列的边界处时，确定沿着列方向的任意一侧为目标移动侧。也即当移动更新前的采样区域既不位于像素列的上边界处也不位于像素列的下边界处，随机选取采样区域的上边界所在侧或下边界所在侧作为目标移动侧。当重复执行上述步骤和始终未在采样区域内提取到灰度值达到灰度值阈值的像素点，且移动更新后的采样区域已经沿着目标移动侧依次移动到达像素列的边界处时，确定该像素列中不存在激光区间。而在上述步骤的情况中，移动更新前的采样区域中存在候选区间，则确定移动更新前的采样区域及提取到的候选区间之间未达到距离阈值的一侧为目标移动侧。此时同样的，目标移动侧是采样区域的上边界所在侧或下边界所在侧。需要说明的是，在步骤这种情况下，由于采样区域所覆盖的像素点的数量远大于一个像素列中的激光区间所包含的像素点的数量，因此采样区域中的候选区间一般最多仅有一侧与采样区域的边界之间未达到距离阈值，而不会出现两侧边界之间都未达到距离阈值的情况。当在像素列的一个采样区域中提取到位于采样区域的边界处的候选区间后，移动更新采样区域后，会在移动更新的采样区域中再次提取到候选区间，且采样区域在移动更新前后提取到的候选区间之间会存在重合的像素点，因此将对多个采样区域内采样提取得到的候选区间包含的像素点进行去重合并，得到像素列中的激光区间。对不同采样区域内提取到的候选区间进行去重合并是图像处理领域的常用技术，本申请不详细赘述。需要说明的是，由于采样区域所覆盖的像素点的数量远大于一个像素列中的激光区间所包含的像素点，因此在当在像素列的一个采样区域中提取到位于采样区域的边界处的候选区间后，一般通过移动更新一次采样区域，就能去重合并得到完整的激光区间，从而可以减少需要移动的次数，提高效率。比如在一个实例中，获取到的激光图像如图3所示，图3中以阴影部分的方格表示激光图像中灰度值达到灰度值阈值的像素点、其余白色方格表示激光图像中灰度值未达到灰度值阈值的像素点。需要说明的是，图3为了简化以二值化的形式示出各个像素点的灰度值，但实际应用时像素点的灰度值的取值是更多的。该实例中初始化激光图像最左侧的列1的像素列作为目标采样列，如图中箭头所指，初始化该目标采样列的采样区域覆盖第1行-第7行的7个像素点，如图3中实线框所示。则在图3的实例中，对于该目标采样列，从初始化的采样区域开始依次遍历采样以提取激光区间的方法包括：首先采样初始化的采样区域中的7个像素点，确定其中不包含灰度值达到灰度值阈值的像素点。由于此时采样区域位于该目标采样列的上边界处，因此目标移动侧为下边界所在侧，将采样区域向下侧移动2个像素点，移动更新后的采样区域覆盖目标采样列中第3行-第9行的7个像素点。采样当前的采样区域中的7个像素点，确定当前的采样区域中有两个灰度值达到灰度值阈值的像素点。但是此时这两个灰度值达到灰度值阈值构成的候选区间与当前的采样区域的下侧边界的像素点之间未间隔一个像素点以上，因此继续将当前的采样区域向下侧移动2个像素点作为移动更新后的采样区域，移动更新后的采样区域覆盖目标采样列中第5行-第11行的7个像素点。采样当前的采样区域中的7个像素点，确定当前的采样区域中有两个灰度值达到灰度值阈值的像素点，且此时这两个灰度值达到灰度值阈值构成的候选区间与当前的采样区域的下侧边界的像素点之间间隔至少一个像素点。则完成遍历，对两次提取到的候选区间进行去重合并，最终提取到目标采样列中的激光区间包括目标采样列中第8行和第9行的两个像素点。比较特殊的，当初始化激光图像的最左侧的像素列作为目标采样列，且初始化的目标采样列中未提取到激光区间时，更新以当前的目标采样列的右侧像素列作为目标采样列，再次重复上述过程，直至提取到目标采样列中的激光区间。同样的，当初始化激光图像的最右侧的像素列作为目标采样列，且初始化的目标采样列中未提取到激光区间时，更新以当前的目标采样列的左侧像素列作为目标采样列，再次重复上述过程，直至提取到目标采样列中的激光区间。比如假设初始化激光图像最左侧的列1的像素列为目标采样列，但列1的像素列中未提取到激光区间时，则更新以激光图像的左侧的列2的像素列为目标采样列，如果列2的像素列中仍然未提取到激光区间时，继续更新以激光图像的左侧的列3的像素列为目标采样列，此时若提取到列3的像素列中的激光区间，则以列3的像素列作为目标采样列继续执行下列步骤3。步骤3，从目标采样列中的激光区间的区间中心的像素点开始，依次确定目标采样列两侧相邻的像素列的采样区域，并从每个像素列的采样区域开始对该像素列中的像素点进行采样，直至提取得到目标采样列及其两侧相邻的像素列中的激光区间的区间中心的像素点相连形成的激光线段。一个像素列的激光区间的区间中心的像素点可以采用灰度重心法来确定。本申请在确定目标采样列中的激光区间后，以目标采样列的激光区间的区间中心的像素点作为生长种子，沿激光线段的分布方向从生长种子开始向两侧搜寻，以定向区域生长提取得到激光线段。当目标采样列位于激光图像的最左侧时，向目标采样列的右侧的各个像素列进行搜寻。当目标采样列位于激光图像的最右侧时，向目标采样列的左侧的各个像素列进行搜寻。当目标采样列位于激光图像中除最左侧和最右侧之外的像素列时，分别向目标采样列的两侧各个像素列进行搜寻，在从目标采样列中的激光区间的区间中心的像素点开始完成对目标采样列一侧的像素列的搜寻之后，再从目标采样列中的激光区间的区间中心的像素点开始向目标采样列另一侧的像素列进行搜寻，对左右两侧方向的搜寻顺序可以自定义，且对两侧的搜寻方法是相同的。在一个实施例中，请参考图4所示的流程图，向目标采样列的任意一侧进行搜寻的方法包括：初始化参数i=1，初始化目标采样列为候选端点列，参数i为整数。对于从目标采样列开始、在目标采样列的该侧沿着行方向依次排列的第i个像素列，确定第i个像素列的采样区域的中心像素点与候选端点列中的激光区间的区间中心的像素点位于同一行。初始化i=1时，第一个像素列即为直接与目标采样列相邻的像素列，则初始化i=1时的候选端点列为目标采样列，第一个像素列的采样区域的中心像素点即为目标采样列的激光区间的区间中心的像素点的相邻像素点。当i≥2时，候选端点列是目标采样列及该侧前i-1个像素列中最近一个已经确定存在激光区间的像素列。由于采样区域覆盖的像素点的个数是固定的，在确定第i个像素列的采样区域的中心像素点的位置之后，即能确定第i个像素列的采样区域所覆盖的像素点。比如在图3的实例中，假设在确定目标采样列中的激光区间包括第8行和第9行的两个像素点，且选择第8行的像素点作为激光区间的区间中心的像素点时，以向目标采样列右侧像素列进行遍历搜寻的过程为例：位于目标采样列右侧的直接相邻的像素列即为第一个像素列，该第一个像素列的采样区域的中心像素点即为第8行的像素点，结合采样区域覆盖7个像素点的条件，则第一个像素列的采样区域覆盖该像素列中第5行-第11行的7个像素点，如图5中第一个像素列中的实线框示出了该第一个像素列中的采样区域。从第i个像素列的采样区域开始对第i个像素列中的像素点进行采样，提取第i个像素列中的灰度值达到灰度值阈值的像素点构成的参考区间。该步骤提取第i个像素列中的参考区间的方法与上述步骤2中提取目标采样列中的激光区间的方法是类似的，该实施例不再赘述。当确定第i个像素列中不存在参考区间，也即第i个像素列中不存在灰度值达到灰度值阈值的像素点时，确定第i个像素列中不存在激光区间。当确定第i个像素列中存在参考区间，且第i个像素列中的参考区间与候选端点列中的激光区间具有连通关系时，将第i个像素列中提取得到的参考区间作为第i个像素列的激光区间，将第i个像素列作为更新后的候选端点列，令i=i+1并再次执行步骤和，向该侧方向依次排列的下一个像素列进行遍历搜寻。当确定第i个像素列中存在参考区间，但第i个像素列中的参考区间与候选端点列中的激光区间不具有连通关系时，确定第i个像素列中不存在激光区间。比如在图5所示的实例中，通过采样可以确定第一个像素列中存在参考区间，且参考区间包括该第一个像素列中的第8行和第9行的两个像素点，由于第一个像素列中的参考区间与目标采样列中的激光区间存在直接相邻的像素点，因此两者具有连通关系，确定第一个像素列中的激光区间即包括该第8行和第9行的两个像素点。将第一个像素列更新作为候选端点列，继续向右侧遍历，将列3作为第二个像素列，采用上述同样的方法，可以确定得到第二个像素列的采样区域覆盖该像素列中第5行-第11行的7个像素点，然后从第二个像素列中的采样区域开始对第二个像素列中的像素点进行采样。在上述步骤和中，当第i个像素列中的参考区间与候选端点列中的激光区间中最靠近的两个像素点之间在行方向上的距离未达到第一距离阈值，且在列方向上的距离未达到第二距离阈值时，也即行方向的横向距离较近且列方向的纵向距离较近时，确定第i个像素列中的参考区间与候选端点列中的激光区间具有连通关系，否则确定第i个像素列中的参考区间与候选端点列中的激光区间不具有连通关系。在一个实施例中，对于从目标采样列开始、在目标采样列的同一侧沿着行方向依次排列的第i个像素列，其对应的候选端点列为第i-1个像素列，也即将第i个像素列按照遍历搜寻顺序的前一个相邻像素列作为候选端点列。则在该实施例中，在上述步骤和中，当确定第i个像素列中不存在激光区间时，直接结束搜寻，完成对目标采样列的该侧的遍历搜寻，直接将此时的候选端点列作为激光线段的一侧线段端点处的像素列。比如在图5的实例中，通过上述方法依次遍历搜寻，直至i=15时，将列16作为第十五个像素列进行采样，最终确定第十五个像素列中不存在参考区间，则可以直接完成对目标采样列的右侧像素列的遍历搜寻，直接将第十四个像素列作为提取得到的激光线段的右侧线段端点处的像素列，第十四个像素列中的激光区间覆盖的像素点形成为激光线段的右侧线段端点处的像素点。但是考虑到实际应用时，由于外界干扰和采样误差，完整的激光轮廓线中容易出现部分像素点缺失的情况，则上述实施例提供的方法容易导致最终提取的激光轮廓线不完整。因此在另一个实施例中，对于从目标采样列开始、在目标采样列的同一侧沿着行方向依次排列的第i个像素列，其对应的候选端点列与第i个像素列之间可以间隔若干列的像素列。则在该实施例中，请参考图6所示的流程图：在上述步骤和中，当确定第i个像素列中不存在激光区间时，首先检测第i个像素列与候选端点列之间间隔的像素列的列数是否达到列数阈值。当确定第i个像素列中不存在激光区间，且第i个像素列与候选端点列之间间隔的像素列的列数未达到列数阈值时，保持当前的候选端点列不变，令i=i+1并再次执行确定第i个像素列的采样区域的中心像素点与候选端点列中的激光区间的区间中心的像素点位于同一行的步骤，也即执行步骤~继续遍历搜寻。当确定第i个像素列中不存在激光区间，且第i个像素列与候选端点列之间间隔的像素列的列数达到列数阈值时，确定完成对当前侧的遍历搜寻，将此时的候选端点列作为激光线段的一侧线段端点处的像素列，将候选端点列中的激光区间的区间中心的像素点作为激光线段的一侧的线段端点。而在上述步骤中，当提取得到第i个像素列中的激光区间后，若此时的候选端点列是第i-1个像素列，第i个像素列中的激光区间与第i-1个像素列中的激光区间形成连通域，则直接将第i个像素列作为更新后的候选端点列，令i=i+1并再次执行步骤和，向该侧方向依次排列的下一个像素列继续遍历搜寻。若此时的候选端点列并不是第i-1个像素列，则第i个像素列中的激光区间与候选端点列中的激光区间之间还间隔着若干列像素列，此时首先在第i个像素列的激光区间和候选端点列的激光区间之间添加灰度值达到灰度值阈值的像素点，以使得第i个像素列的激光区间和候选端点列的激光区间形成连通域，可以采用插值法添加灰度值达到灰度值阈值的像素点，本申请对添加方法不赘述。然后再将第i个像素列作为更新后的候选端点列，令i=i+1并再次执行步骤和，向该侧方向依次排列的下一个像素列继续遍历搜寻。比如基于图5的实例，假设列数阈值为3。则在从目标采样列开始依次向右侧的像素列遍历搜寻的过程中，依次确定各个像素列中的激光区间并将各个像素列依次作为更新后的候选端点列，直至遍历确定第十四个像素列中的激光区间并将第十四个像素列作为更新后的候选端点列后，遍历搜寻第十五个像素列确定第十五个像素列中不存在激光区间时，由于此时的第十五个像素列与候选端点列直接相邻，间隔的像素列的列数未达到列数阈值，因此并不直接结束搜寻，而是保持第十四个像素列作为候选端点列，继续搜寻右侧的第17列作为第十六个像素列。通过如上方法确定得到的第十六个像素列的采样区域如图7中第十六个像素列中的实线框所示。对第十六个像素列从采样区域开始采样，可以提取得到第十六个像素列中的参考区间包括第12行的像素点。此时判断第十六个像素列中的参考区间与候选端点列中的激光区间中最靠近的两个像素点分别为：第15列第9行的像素点，以及第17列第12行的像素点，确定这两个像素点之间的行方向上的距离未达到第一距离阈值且在列方向上的距离未达到第二距离阈值，则将第十六个像素列中的第12行的像素点作为其激光区间，然后在第十六个像素列的激光区间和第十四个像素列的激光区间之间添加灰度值达到灰度值阈值的像素点如图7的示意图所示。然后将第十六个像素列作为更新后的候选端点列，再次向右侧的像素列遍历搜寻。通过图7的实例可以看出，按照常规的方法只能提取得到间断的线段，但按照本申请的方法可以提取得到完整的激光线段。本申请中的激光图像中仅包括一条激光图案，该激光图案可能分段、弯曲且存在一定宽度，但是激光图像中的每一个像素列中最多只有一个激光区间的区间中心的像素点。因此在一个实施例中，当通过上述方法提取得到目标采样列及其两侧相邻的像素列中的激光区间所构成的连通域后，直接将该连通域中的各个区间中心依次相连即可得到一条激光线段。但是在另一个实施例中，为了减小误差，首先计算目标采样列及其两侧相邻的像素列中的激光区间所构成的连通域中的所有像素点的平均灰度值，当计算得到的平均灰度值达到线段灰度阈值时，提取目标采样列及其两侧相邻的像素列中的激光区间的区间中心的像素点所连成的激光线段，否则丢弃目标采样列及其两侧相邻的像素列中的激光区间所构成的连通域。步骤4，根据激光线段的线段端点确定更新后的目标采样列及其采样区域，再次执行从目标采样列的采样区域开始对目标采样列中的像素点进行采样的步骤，直至遍历完激光图像中所有像素列时提取得到所有激光线段。在一个实施例中，以激光线段的其中一个线段端点在待搜索侧间隔若干个列的像素列作为更新后的目标采样列，并初始化更新后的目标采样列中的采样区域覆盖该更新后的目标采样列中连续的若干个像素点，然后针对更新后的目标采样列重新按照本申请提供的方法搜寻对应的激光线段，也即重新从上述步骤2开始遍历搜寻。其中，待搜索侧是激光线段的线段端点远离另一个线段端点的一侧。更新后的目标采样列与已经搜寻到的激光线段的线段端点所在的像素列之间相隔的像素列的数量可以自定义设置，可以直接相邻，也可以间隔若干个其他的像素列。需要说明的是，本领域技术人员可以理解，当激光线段的一个线段端点在激光图像的最左侧或最右侧时，待搜索侧直接取相对的另一侧。比如基于图7的实例，当按照本申请提供的方法从初始化的目标采样列向右侧的像素列遍历的过程中，最终会按照本申请提供的方法依次遍历到图7中的列27提取到激光区间，然后以列27作为候选端点列，依次遍历列28、列29、列30都未提取到激光区间，则在遍历第31列时，会确定此时与作为候选端点列的列27之间间隔的像素列的数量达到列数阈值3，会结束遍历，并将列27中的激光区间的区间中心的像素点作为激光线段的线段端点，此时已经搜寻到一条激光线段，且待搜索侧即为右侧。然后可以将列27右侧的列30作为更新后的目标采样列，继续从上述步骤2开始遍历搜寻。步骤5，对所有激光线段进行后处理操作，提取得到激光图像中的激光轮廓线。当仅提取得到一条激光线段时，直接将该激光线段作为激光轮廓线。当提取得到多条激光线段时，对于每相邻两条激光线段：检测这两条激光线段的线段距离是否超过线段距离阈值。在一个实施例中，线段距离阈值包括第一距离阈值和第二距离阈值，则当确定两条激光线段的相靠近的线段端点在行方向上的距离达到第一距离阈值，或者，确定两条激光线段的相靠近的线段端点在列方向上的距离达到第二距离阈值时，确定这两条激光线段的线段距离超过线段距离阈值。线段距离阈值可以自定义设置。当这两条激光线段的线段距离未超过线段距离阈值时，通过插值法在这两条激光线段的相靠近的线段端点之间添加灰度值达到灰度值阈值的像素点，以使得两条激光线段包含的像素点连通为一个连通域，两条激光线段相连形成为一条激光线段。当这两条激光线段的线段距离超过线段距离阈值时，保留这两条激光线段作为独立的激光线段。通过上述后处理操作同样可以避免由于外界干扰和采样误差导致的像素点缺失而提取得到间断的线段的情况，可以进一步提高提取得到的激光轮廓线的完整性和连贯性。在一个实例中获取到的激光图像如图8所示，按照现有的激光轮廓线提取方法从图8的激光图像中提取得到的激光轮廓线如图9所示，按照本申请的激光轮廓线提取方法从图8的激光图像中提取得到的激光轮廓线如图10所示，对比图9和图10可以看出，本申请的激光轮廓线提取方法提取得到的激光轮廓线的完整性、连贯性和准确性都更高。另外在按照本申请的方法提取得到激光轮廓线后，可进一步进行去噪、拟合等处理。在一个应用实例中，对100张分辨率大小为1920*648的图像分别使用传统的MSER算法、Steger算法和本申请的方法来提取激光轮廓线，使用本申请方法提取得到激光轮廓线的平均耗时为0.90ms，使用MSER算法提取得到激光轮廓线的平均耗时为5.45ms，使用Steger算法提取得到激光轮廓线的平均耗时为2.61ms，对比可以发现，本申请方法提取激光轮廓线的耗时较少，提取效率高。以上所述的仅是本申请的优选实施方式，本申请不限于以上实施例，可以理解，本领域技术人员在不脱离本申请的精神和构思的前提下直接导出或联想到的其他改进和变化，均应认为包含在本申请的保护范围之内。
