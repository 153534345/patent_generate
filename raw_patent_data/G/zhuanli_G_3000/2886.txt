标题title
一种基于无人机技术的复杂山区便道规划方法及系统
摘要abst
本发明属于复杂山区便道规划技术领域，尤其涉及一种基于无人机技术的复杂山区便道规划方法及系统，方法包括：获取复杂山区卫星图，并根据预设的点位布设规划在卫星图中进行点位模拟布设，生成点位布设文件；将点位布设文件导入无人机自动控制系统中，经预处理后生成无人机飞行航线；使用无人机根据飞行航线执行对应的飞行任务，生成飞行数据，并将飞行数据传输至数据中台；数据中台对飞行数据进行数据整理和正射数据处理后，输出便道规划成果数据；将便道规划成果数据导入三维软件中进行处理和分析，生成便道路线模型。本发明能够解决现有的复杂山区便道规划存在修筑后不能达到预期效果的问题。
权利要求书clms
1.一种基于无人机技术的复杂山区便道规划方法，其特征在于：包括：获取复杂山区卫星图，并根据预设的点位布设规划在卫星图中进行点位模拟布设，生成点位布设文件；将点位布设文件导入无人机自动控制系统中，经预处理后生成无人机飞行航线；使用无人机根据飞行航线执行对应的飞行任务，生成飞行数据，并将飞行数据传输至数据中台；数据中台对飞行数据进行数据整理和正射数据处理后，输出便道规划成果数据；将便道规划成果数据导入三维软件中进行处理和分析，生成便道路线模型。2.根据权利要求1所述的一种基于无人机技术的复杂山区便道规划方法，其特征在于：所述数据中台对飞行数据进行数据整理和正射数据处理后，输出便道规划成果数据具体为：对飞行数据中的GPS数据进行核实，并检查文件类数据的完整性、一致性以及质量进行评估；将经数据整理后的飞行数据进行千寻基站差分解算处理、参数计算与坐标转换处理以及空三处理，输出便道规划成果数据。3.根据权利要求2所述的一种基于无人机技术的复杂山区便道规划方法，其特征在于：所述千寻基站差分结算处理具体为：将无人机的GPS数据进行格式转换，生成rinex格式的GPS观测文件；将GPS观测文件导入流动站，输出基站数据；预设差分参数，并根据无人机及其拍摄相机类型进行偏心距改正；根据预设的差分参数对基站数据进行差分解算，输出解算成果，并进行解算成果质量检查。4.根据权利要求3所述的一种基于无人机技术的复杂山区便道规划方法，其特征在于：所述参数计算与坐标转换处理具体为：将解算成果中数据按照预设的经纬度排布规则进行排布，生成参数计算表，并根据布设的点位选择检查点，验证参数的正确性；将参数计算表进行残差计算，生成带参数的经纬度坐标系；将带参数的经纬度坐标系数据导入转换器中进行转换，生成投影坐标系。5.根据权利要求1所述的一种基于无人机技术的复杂山区便道规划方法，其特征在于：所述获取复杂山区卫星图，并根据预设的点位布设规划在卫星图中进行点位模拟布设，生成点位布设文件具体为：根据获取的复杂山区卫星图判断便道规划所在区域形状；区域形状包括规则地形和不规则地形；若判断的区域形状为规则地形，则布设至少5个点位在规则图形四周和中间；若判断区域形状为不规则地形，则根据地形形状均匀布设。6.根据权利要求4所述的一种基于无人机技术的复杂山区便道规划方法，其特征在于：所述将便道规划成果数据导入三维软件中进行处理和分析，生成便道路线模型具体为：便道规划成果数据包括DEM数字高程模型和DOM数字正射影像，将DEM数字高程模型通过格式转换器转换为可被三维软件识别的数据文件；在三维软件中输入地形登高线数据，输出曲面图形，并对输出的曲面图形进行预处理，输出预处理后的曲面图形；将预采集的主线道路图形与预处理后的曲面图形融合，生成3D地形，再将地形数据与DOM数字正射影像导入，生成复杂山区施工现场真实场景；在复杂山区施工现场真实场景中根据地形等高线数据绘制施工便道。7.一种基于无人机技术的复杂山区便道规划系统，应用于权利要求1-6任一项所述的一种基于无人机技术的复杂山区便道规划方法，其特征在于：包括数据中台和无人机平台，所述无人机平台和数据中台通讯连接；所述数据中台中包括点位布设模块、数据传输模块、数据处理模块以及模型构建模块；所述无人机平台包括无人机和控制终端；所述点位布设模块用于获取复杂山区卫星图，并根据预设的点位布设规划在卫星图中进行点位模拟布设，生成点位布设文件；所述数据传输模块用于将点位布设文件传输至控制终端，所述控制终端用于接收点位布设文件，生成无人机飞行航线，并传输至无人机；所述无人机根据飞行航线执行对应的飞行任务，生成飞行数据，并将飞行数据传输至数据中台；所述数据处理模块接收飞行数据并进行数据整理和正射数据处理后，输出便道规划成果数据；所述模型构建模块用于将便道规划成果数据导入三维软件中进行处理和分析，生成便道路线模型。
说明书desc
技术领域本发明属于复杂山区便道规划技术领域，尤其涉及一种基于无人机技术的复杂山区便道规划方法及系统。背景技术在复杂山区中修建高速公路时，施工便道是必不可少的重要道路，高速公路向复杂山区延伸时，因交通堵塞、地形地势复杂，便道的服务功能的匹配度与完备性，能够直接影响到施工过程中各种生产要素输入与输出的流通程度，因此便道的设计和施工占据重要作用。目前的复杂山区高速公路便道的施工中，大多通过GPS、全站仪等设备进行测量形成等高线地形图，再采用CAD绘图的方式在平面进行便道规划，而因为山区的地形地势复杂程度大，使得测绘工作受到实地的地理环境限制较大，并且CAD中不能直观直接的展现出坡率等信息，因此使得便道修筑后并不能达到预期的效果。发明内容本发明所解决的技术问题在于提供一种基于无人机技术的复杂山区便道规划方法及系统，以解决现有的复杂山区便道规划存在修筑后不能达到预期效果的问题。本发明提供的基础方案：一种基于无人机技术的复杂山区便道规划方法，包括：获取复杂山区卫星图，并根据预设的点位布设规划在卫星图中进行点位模拟布设，生成点位布设文件；将点位布设文件导入无人机自动控制系统中，经预处理后生成无人机飞行航线；使用无人机根据飞行航线执行对应的飞行任务，生成飞行数据，并将飞行数据传输至数据中台；数据中台对飞行数据进行数据整理和正射数据处理后，输出便道规划成果数据；将便道规划成果数据导入三维软件中进行处理和分析，生成便道路线模型。进一步，所述数据中台对飞行数据进行数据整理和正射数据处理后，输出便道规划成果数据具体为：对飞行数据中的GPS数据进行核实，并检查文件类数据的完整性、一致性以及质量进行评估；将经数据整理后的飞行数据进行千寻基站差分解算处理、参数计算与坐标转换处理以及空三处理，输出便道规划成果数据。进一步，所述千寻基站差分结算处理具体为：将无人机的GPS数据进行格式转换，生成rinex格式的GPS观测文件；将GPS观测文件导入流动站，输出基站数据；预设差分参数，并根据无人机及其拍摄相机类型进行偏心距改正；根据预设的差分参数对基站数据进行差分解算，输出解算成果，并进行解算成果质量检查。进一步，所述参数计算与坐标转换处理具体为：将解算成果中数据按照预设的经纬度排布规则进行排布，生成参数计算表，并根据布设的点位选择检查点，验证参数的正确性；将参数计算表进行残差计算，生成带参数的经纬度坐标系；将带参数的经纬度坐标系数据导入转换器中进行转换，生成投影坐标系。进一步，所述获取复杂山区卫星图，并根据预设的点位布设规划在卫星图中进行点位模拟布设，生成点位布设文件具体为：根据获取的复杂山区卫星图判断便道规划所在区域形状；区域形状包括规则地形和不规则地形；若判断的区域形状为规则地形，则布设至少5个点位在规则图形四周和中间；若判断区域形状为不规则地形，则根据地形形状均匀布设。进一步，所述将便道规划成果数据导入三维软件中进行处理和分析，生成便道路线模型具体为：便道规划成果数据包括DEM数字高程模型和DOM数字正射影像，将DEM数字高程模型通过格式转换器转换为可被三维软件识别的数据文件；在三维软件中输入地形登高线数据，输出曲面图形，并对输出的曲面图形进行预处理，输出预处理后的曲面图形；将预采集的主线道路图形与预处理后的曲面图形融合，生成3D地形，再将地形数据与DOM数字正射影像导入，生成复杂山区施工现场真实场景；在复杂山区施工现场真实场景中根据地形等高线数据绘制施工便道。一种基于无人机技术的复杂山区便道规划系统，应用于如上所述的一种基于无人机技术的复杂山区便道规划方法，包括数据中台和无人机平台，所述无人机平台和数据中台通讯连接；所述数据中台中包括点位布设模块、数据传输模块、数据处理模块以及模型构建模块；所述无人机平台包括无人机和控制终端；所述点位布设模块用于获取复杂山区卫星图，并根据预设的点位布设规划在卫星图中进行点位模拟布设，生成点位布设文件；所述数据传输模块用于将点位布设文件传输至控制终端，所述控制终端用于接收点位布设文件，生成无人机飞行航线，并传输至无人机；所述无人机根据飞行航线执行对应的飞行任务，生成飞行数据，并将飞行数据传输至数据中台；所述数据处理模块接收飞行数据并进行数据整理和正射数据处理后，输出便道规划成果数据；所述模型构建模块用于将便道规划成果数据导入三维软件中进行处理和分析，生成便道路线模型。本发明的原理及优点在于：在本申请中，针对复杂山区的便道规划，首先通过在卫星图中按照预设的点位布设规则进行布点，布点完成后通过无人机控制系统将点位生成飞行航线，无人机根据飞行航线采集该区域的GPS数据和基站数据，将采集的数据再进行处理和分析，生成的便道规划的成果数据，将便道规划成果数据连同影像数据一同导入三维软件中进行生成便道规划的实景，因此通过本申请的方案能够得到直接明了的便道规划图，使得修筑后的效果与设计时一致。附图说明图1为本发明实施例一的流程框图；图2为本发明实施例一中规则地形布点示意图；图3为本发明实施例一中不规则地形布点示例图；图4为本发明实施例一中无人机航线规划前的示意图；图5为本发明实施例一中无人机航线规划后的示意图；图6为本发明实施例一中数据中台对飞行数据的处理流程图；图7为本发明实施例一中千寻基站差分解算流程示意图；图8为本发明实施例一中差分解算结果示例图；图9为本发明实施例一中空三处理流程示意图；具体实施方式下面通过具体实施方式进一步详细说明：实施例基本如图1所示：一种基于无人机技术的复杂山区便道规划方法，包括：S1：获取复杂山区卫星图，并根据预设的点位布设规划在卫星图中进行点位模拟布设，生成点位布设文件；其中，S1包括：S1-1：根据获取的复杂山区卫星图判断便道规划所在区域形状；区域形状包括规则地形和不规则地形；S1-2：若判断的区域形状为规则地形，则布设至少5个点位在规则图形四周和中间；S1-3：若判断区域形状为不规则地形，则根据地形形状均匀布设。在本实施例中，首先通过地图软件获取复杂山区的卫星图，在卫星图中欲修建的公路区域中的便道区域中进行布点，预设的点位布设规划具体为，根据便道所在区域的地形进行分别处理，地形的形状可包括规则图形和不规则图形，针对规则图形，例如矩形或者正方形，如图2所示，需要布设至少5个点位在四周和中间，例如针对正方形的小面积地形，在正方形的四个角和中间进行布点；针对正方形的大面积地形，则除了四周和中间布点之外，在每两个点的中间增加额外的点位；如图3所示，若针对的是不规则地形，无特殊形状的则进行均匀布点，有特殊形状的，一方面要满足均匀布点，另一方面根据地形的特殊形状进行布点，例如，针对带状地形、河流地形或者公路地形，采用“Z”型布点法，即垂直于带状地形两边各两个点位，带状区域的中间一个点位；此外针对带状的，还可采用“S”型布点法。针对选点，还需要使得布点的地方具有较好的条件，例如，选在交角良好的细小线状物体交点、明显的物体拐角点等；布点时，对于点位的标识，采用直角模具涂刷和标靶板的方式，直角模具的涂刷大小大于50cm，字体清洗，字体的高度大于30cm；标靶板采用60cm*60cm的KT板制作，并采用黑白相间的颜色，使得点位更加易于识别。点位布设后的数据生成KML文件导入无人机中，因此包括：S2：将点位布设文件导入无人机自动控制系统中，经预处理后生成无人机飞行航线；在本实施例中，通过无人机的自动控制系统接收KML文件，在地图中找到测区位置，绘制飞行区域，如图4所示，并在飞行区域内根据布设的点位绘制飞行航线；如图5所示，绘制飞行航线时，计算点位之间的飞行距离，根据计算结果对飞行航线进行规划，确保航线的条数设置为偶数条、入航路线加出航路线最短、免相控航线在3条以上等等。最终生成的飞行航线由可执行任务的无人机接收，具体为：S3：使用无人机根据飞行航线执行对应的飞行任务，生成飞行数据，并将飞行数据传输至数据中台；在本实施例中，在无人机出航前首先对无人机进行固件升级检查、检查维护状态、配套相机功能检查等等，无人机出航前准备完成后，通过自动控制系统的飞行界面实时监控无人机传输回的影像数据，掌握无人机的动态，本申请中主要监控的内容包括飞机姿态、位置、高度、飞行速度、GPS卫星数、RTK状态、剩余电量等。在本实施例中，针对无人机的飞行状态增加避障功能，具体为，在无人机前端设置避障雷达，当无人机处于全速状态下，无人机与障碍物的距离小于55m，且处于前进状态时触发避障功能，具体为，无人机的飞行速度降低到0.2m/s，减速完成后若在5s后未检测到障碍物则继续执行飞行任务，若检测到障碍物则进行悬停处理，由位于自动控制系统处的用户输入飞行高度，无人机根据输入的飞行高度上升后继续执行飞行任务；此外，当飞行高度高于障碍物高度40m以上时无需进行避障，当飞行高度比障碍物高度低于30m时则启动避障功能。无人机飞行任务执行完成后，将无人机的飞行数据进行下载至数据中台，由数据中台对飞行数据进行处理和分析，具体为：S4：数据中台对飞行数据进行数据整理和正射数据处理后，输出便道规划成果数据；如图6所示，S4中还包括：S4-1：对飞行数据中的GPS数据进行核实，并检查文件类数据的完整性、一致性以及质量进行评估；S4-2：将经数据整理后的飞行数据进行千寻基站差分解算处理、参数计算与坐标转换处理以及空三处理，输出便道规划成果数据。在本实施例中，对无人机传输回的飞行数据首先进行数据整理，整理过程主要检查飞行数据中的GPS数据，以及检查文件类数据的完整性、一致性以及质量进行评估；具体的，包括原始影像数据、观测数据、基站GPS数据、无人机GPS数据以及机载POS文件，数据的质量评估主要针对影像清晰、无模糊等现象，且色彩明暗度适中。如图7和图8所示，经数据整理后，将基站GPS数据和无人机GPS数据进行格式转换-差分解算-参数计算/坐标转换-自由网空三计算；具体为，将基站GPS数据和无人机GPS数据转换为rinex格式，生成机载GPS观测文件，在流动站中导入机载GPS观测文件，输出基站数据，输出的基站数据为base文件；设置差分参数，包括GPS天线高默认为0，GNSS系统选择GPS和BeiDou，并根据无人机及其相机的型号选择偏心距，从而进行差分解算，差分解算的成果包括：_cam_pos:为相机POS文件；_pos.txt:为融合差分相位中心POS文件；_rtk_pos.txt：为仅RTK的POS文件；_config：为差分解算参数设置文件；_all：为差分轨迹文件。如图8所示,解算成果完成后对结算率进行判断，若高于98％则满足要求，并检查点位是否符合规整、飞行航线是否符合、以及差分解算成果和影像数据是否一致。差分解算完成后则进行参数计算和坐标转换，具体为，将解算成果中数据按照预设的经纬度排布规则进行排布，生成参数计算表，并根据布设的点位选择检查点，验证参数的正确性，本实施例中的预设的经纬度排布规则具体为，按照点位ID、纬度、经度、地高、北坐标、东坐标、高程进行排布，对解算成果进行参数计算，参数计算中首先根据点位分布选择1-2各检查点，计算参数计算表中参数的残差值，确认残差值小于2cm即可认为参数正确，随后将参数计算表生成带参数的坐标系，因为参数计算表中示有各个点位的坐标，因此即可直接生成带参数的坐标系；最后将带参数的坐标系转成平面投影坐标。将生成的平面投影坐标、影像数据以及相机的参数进行自由网空三处理，如图9所示，自由网空三处理在本申请中为本领域技术人员可实现的，本申请不做过多赘述，空三处理后判断空三精度是否满足要求，满足则输出便道规划成果数据，若不满足，则进行数据合格性检查和处理，直至满足要求。S5：将便道规划成果数据导入三维软件中进行处理和分析，生成便道路线模型；S5包括：S5-1：便道规划成果数据包括DEM数字高程模型和DOM数字正射影像，将DEM数字高程模型通过格式转换器转换为可被三维软件识别的数据文件；S5-2：在三维软件中输入地形登高线数据，输出曲面图形，并对输出的曲面图形进行预处理，输出预处理后的曲面图形；预处理为删除不符合要求的高程点位；S5-3：将预采集的主线道路图形与预处理后的曲面图形融合，生成3D地形，再将地形数据与DOM数字正射影像导入，生成复杂山区施工现场真实场景；S5-4：在复杂山区施工现场真实场景中根据地形等高线数据绘制施工便道。在本实施例中，三维软件包括infraworks软件和GlobalMapper14软件，通过S5-1和S5-2生成曲面图形后，通过S5-3生成的3D地形与DEM数字高程模型中的地形数据导入infraworks软件中，并将所述DOM数字正射影像模型导入infraworks软件中，生成所述待施工区域的真实场景。具体的，将civil3d路线和地形数据导入infraworks软件中，同时将格式为.GIFf的DOM数字正射影像模型导入infraworks软件，在infraworks软件中完成配置，infraworks软件中显示地面图像和地形重合，生成该待施工区域的真实场景，并根据生成的所述待施工区域的真实场景，对施工区域的道路进行规划，生成道路并导出道路数据，将道路数据导入所述Civil3d软件中，生成包含纵断面的便道及道路曲面，并根据道路曲面计算填挖方量，确定便道路线走向，以此能够准确地实现待施工区域的便道规划。在本实施例的另一实施例中，还包括一种基于无人机技术的复杂山区便道规划系统，应用于如上所述的一种基于无人机技术的复杂山区便道规划方法，包括数据中台和无人机平台，所述无人机平台和数据中台通讯连接；所述数据中台中包括点位布设模块、数据传输模块、数据处理模块以及模型构建模块；所述无人机平台包括无人机和控制终端；所述点位布设模块用于获取复杂山区卫星图，并根据预设的点位布设规划在卫星图中进行点位模拟布设，生成点位布设文件；所述数据传输模块用于将点位布设文件传输至控制终端，所述控制终端用于接收点位布设文件，生成无人机飞行航线，并传输至无人机；所述无人机根据飞行航线执行对应的飞行任务，生成飞行数据，并将飞行数据传输至数据中台；所述数据处理模块接收飞行数据并进行数据整理和正射数据处理后，输出便道规划成果数据；所述模型构建模块用于将将便道规划成果数据导入三维软件中进行处理和分析，生成便道路线模型。实施例二：实施例二与实施例一的不同之处在于，实施例二中获取复杂山区卫星图，并根据预设的点位布设规划在卫星图中进行点位模拟布设，生成点位布设文件还包括：第一便道方案生成步骤：根据当前的卫星图，基于便道起点和便道终点，生成若干个便道布点；截取卫星图中便道规划区域，从历史数据库中调取与该便道规划区域相识度最高的历史三维实景模型所对应的历史最优便道，并依据该历史最优便道，对截取的卫星图中便道规划区域进行套用，并依据该历史最优便道，将其中涉及的便道布点进行连接，生成第一便道方案。便道初始种群生成步骤：根据便道起点和便道终点，确定便道起点到便道终点所对应的便道方向，生成对应的第一方向；获取截取的卫星图中便道规划区域中的已有道路信息，并识别出已有道路信息所对应的第二方向，并筛选出第二方向与第一方向之间的方向差值小于或者等于预设方向差值的已有道路信息；根据筛选出来的已有道路信息，识别出距离该已有道路信息最近的两个便道布点，并将其与该已有道路信息进行绑定，生成对应的绑定布点；根据绑定布点以及剩余的便道布点，随机产生规模为N的初始种群，所述初始种群的个体为便道起点到便道终点所经过的便道布点和绑定布点所对应的施工路径。便道随机种群生成步骤：根据所有的便道布点，随机产生规模为N的随机种群，所述随机种群的个体为便道起点到便道终点所经过的便道布点所对应的施工路径。种群集成步骤：将第一便道方案所对应的施工路径、初始种群以及随机种群进行集成，生成规模为2N+1的初始集成种群。筛选计算步骤：通过约束条件对初始集成种群的个体进行判断筛选，所述约束条件包括施工总最大费用约束条件以及施工最大危险度约束条件；若满足约束条件，则对应的施工路径为可行解，若不满足，则为不可行解；在本实施例中，第一便道方案所对应的施工路径不会进行约束条件的判断；对筛选后的种群进行适应度计算，在本实施例中，适应度计算包括第一适应度计算和第二适应度计算，第一适应度计算具体为：其中，D1为初始集成种群中便道施工距离总和，所述Xi为便道布点i到便道布点i-1的距离，f1为第一适应度；第二适应度计算具体为：f2＝D2其中，D2为初始集成种群中各个个体的通畅度总和，所述Yj为便道布点j到便道布点j-1d的通畅度，f2为第二适应度。成果选取步骤：在第一预设迭代次数内，根据预设的权重比，计算出第一适应度和第二适应度与其所对应的权重比的总和，并根据该总和计算出对应的适用度平均值，选取出适用度平均值小于或者等于第一阈值的种群；超出第一预设迭代次数时，根据超出次数的大小，对第二适应度所对应的权重比进行动态增加，然后计算出第一适应度和第二适应度与其所对应的权重比的总和，选取出总和大于或者等于第二阈值的种群；本申请中设置的迭代次数、权重比、阈值，均根据实际需求选取；对选择的种群通过遗传算法的杂交、变异得到子代种群，在得到子代种群之后，继续执行适应度计算，直到满足预设迭代数量，然后输出子代种群作为多目标优化的最优解集合，对业务集合的施工方案进行优化，得到最优的便道规划方案。在本申请中，前期种群的随机生成时不仅包括通过相似地形之前的历史最优便道，根据这边便道，套用到当前的截取的卫星图中便道规划区域上，根据此进行对应的第一便道方案的生成；同时还包括通过各个便道布点随机生成的便道方案，而且还充分考虑到在截取的卫星图中便道规划区域中现有的道路，例如村道、乡道或者普通道路等，且在对这些现有道路识别之后还会进行筛选，筛选道路方向与施工便道方向差不多的，然后根据这些已有道路信息来进行便道布点的绑定，使得满足条件的道路信息能够为便道布点之间的连接产生关系，从而使得在对此时的种群生成时，不仅有绑定布点还有便道布点，此时生成的施工路径，是在充分考虑已有道路的情况下生成的施工路径，即本方案中的种群包括三大板块，这样使得整个前期种群的采集更加的准确和多样化，为后续的便道的优化提供了强有力的依据，能够更好的匹配出最优的便道方案，极大提高了便道规划的准确性。还有在对种群进行选择时充分考虑了不同的迭代次数下所对应的不同适应度的不同影响程度，例如前期的迭代可能对应的路程距离影响度比较大，后续的随着迭代的不断进行，种群之间的路程距离相差也会越来越像，那么对应的通畅度也就成为了关注点，所以本方案中通过对第一适应度和第二适应度的权重比的动态调整，能够更好的选择出符合要求的种群。以上的仅是本发明的实施例，方案中公知的具体结构及特性等常识在此未作过多描述，所属领域普通技术人员知晓申请日或者优先权日之前发明所属技术领域所有的普通技术知识，能够获知该领域中所有的现有技术，并且具有应用该日期之前常规实验手段的能力，所属领域普通技术人员可以在本申请给出的启示下，结合自身能力完善并实施本方案，一些典型的公知结构或者公知方法不应当成为所属领域普通技术人员实施本申请的障碍。应当指出，对于本领域的技术人员来说，在不脱离本发明结构的前提下，还可以作出若干变形和改进，这些也应该视为本发明的保护范围，这些都不会影响本发明实施的效果和专利的实用性。本申请要求的保护范围应当以其权利要求的内容为准，说明书中的具体实施方式等记载可以用于解释权利要求的内容。
