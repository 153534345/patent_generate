标题title
一种自动驾驶轨迹偏差检测方法及检测系统
摘要abst
本发明公开了一种自动驾驶轨迹偏差检测方法及检测系统，通过采用现有技术中常见的传感器采集车辆的初始状态参数值和过程参数值，模拟车辆在行驶过程中的行驶路径方程，计算车辆在过程位置点pmt的坐标与目标路径轨迹方程组规划的位置点之间的欧拉距离，引入重合率的概念，并计算过程位置坐标点与目标路径轨迹方程上点的重合率值，作为自动驾驶轨迹偏差程度的表征值，可以直观的量化评价车辆行驶过程中的轨迹偏差程度，且系统结构简单，成本低，布置方便，无需通过卫星定位法来对自动驾驶车辆进行高精度的实时定位获取车辆行驶轨迹，适用于网络信号差的环境中。
权利要求书clms
1.一种自动驾驶轨迹偏差检测方法，用于自动驾驶车辆行驶轨迹偏差检测，其特征在于：所述方法包括以下步骤：步骤一，获取车辆目标路径的轨迹方程，以目标路径起点为圆心构建坐标系，设pi=为目标路径轨迹方程上的点，xi,yi分别为点的横坐标和纵坐标值，其中，i=1,2,...,n，n为整数，p1为目标路径的起点，pn为目标路径的终点；步骤二，获取车辆初始状态参数值，包括初始位置p0的坐标、初始加速度a0m/s2、初始行驶速度v0m/s及初始转向角θ0°；步骤三，采集车辆在行驶过程中的过程参数值，包括过程加速度atm/s2、过程行驶速度vtm/s及过程转向角θt°；步骤四，模拟车辆在行驶过程中的行驶路径方程，通过模拟结果计算车辆在行驶过程中的过程位置点pmt的坐标,其中，m为大于一的正整数；步骤五，计算车辆在过程位置点pmt的坐标与目标路径轨迹方程组规划的位置点之间的欧拉距离；步骤六，根据计算结果，计算过程位置坐标点与目标路径轨迹方程上点的重合率Co，计算公式为：，其中，Di为计算重合率时选取的目标路径轨迹方程上点的总数量值，Dt为程位置坐标点与目标路径轨迹方程上点重合的点的个数，以重合率作为自动驾驶轨迹偏差程度的表征值，其中，轨迹偏差程度反比于重合率。2.根据权利要求1所述的一种自动驾驶轨迹偏差检测方法，其特征在于：在步骤六中，以车辆在行驶过程中的过程位置点为圆心作半径为R的圆，当所作圆与目标路径轨迹存在交点时，判定该过程位置坐标点与该圆内目标路径轨迹方程上点的重合。3.根据权利要求1所述的一种自动驾驶轨迹偏差检测方法，其特征在于：Di的值根据目标路径轨迹长度确定，Di值正比于目标路径轨迹长度。4.根据权利要求1所述的一种自动驾驶轨迹偏差检测方法，其特征在于：R的取值范围根据目标路径轨迹长度确定，R的取值正比于目标路径轨迹长度。5.根据权利要求1所述的一种自动驾驶轨迹偏差检测方法，其特征在于：在步骤三中，过程参数值的采集时刻点为从过程转向角θt开始时刻t0至结束时刻tf。6.根据权利要求1所述的一种自动驾驶轨迹偏差检测方法，其特征在于：在步骤四中，车辆从初始位置至终点位置的行驶路径方程的模拟方法根据过程转向角θt确定，具体方法为：一，当过程转向角θt为零度的时间段内，采用直线方程模拟该时间段内的行驶路径方程；二，当过程转向角θt不为零度的时间段内，采用圆周方程模拟该时间段内的行驶路径方程。7.根据权利要求1所述的一种自动驾驶轨迹偏差检测方法，其特征在于：在步骤六中，获取重合率Co的值后，利用重合率Co的数值创建样本集，并获取样本集中的均值和标准差，利用均值和标准差对数据进行标准化，标准化公式为，在此式中z为标准参量，σ为样本数据的方差，μ为样本数据的均值，在完成标准化后，将标准参量利用/＞将数值区间调整至之间，利用f的函数值对重合率进行分类，分类的机制为：当时，重合率分类为一级，即表示轨迹偏差程度为一级；当时，重合率分类为二级，即表示轨迹偏差程度为二级；其中，fmin，fmax分别为f的函数值的最小值和最大值。8.一种自动驾驶轨迹偏差检测系统，用于自动驾驶车辆行驶轨迹偏差检测，其特征在于：所述系统包括：目标路径轨迹获取模块，用于通过以目标路径起点为圆心构建坐标系，获取车辆目标路径轨迹方程；数据采集模块，用于采集车辆的初始状态参数值和过程参数值；数据分析模块，用于模拟车辆在行驶过程中的行驶路径方程，并通过模拟结果计算车辆在行驶过程中的过程位置点pmt的坐标；距离计算模块，用于计算车辆在过程位置点pmt的坐标与目标路径轨迹方程组规划的位置点之间的欧拉距离；数据拟合模块，用于计算过程位置坐标点与目标路径轨迹方程上点的重合率Co，并以重合率作为自动驾驶轨迹偏差程度的表征值，对轨迹偏差程度进行等级划分。9.根据权利要求8所述的一种自动驾驶轨迹偏差检测系统，其特征在于：所述系统还包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其中，处理器执行程序时实现权利要求1-7任一项所述自动驾驶轨迹偏差检测方法的步骤。10.根据权利要求8所述的一种自动驾驶轨迹偏差检测系统，其特征在于：数据采集模块通过传感器采集车辆的初始状态参数值和过程参数值，所述传感器包括速度传感器、加速度传感器、转角传感器，所述速度传感器和加速度传感器均安装于车厢内部，所述转角传感器安装于车辆转向轴或任意一个前轮主销上。
说明书desc
技术领域本发明涉及自动驾驶自动化控制技术领域，特别涉及一种自动驾驶轨迹偏差检测方法及检测系统。背景技术自动驾驶汽车又称无人驾驶汽车，是依靠人工智能、视觉计算、雷达、监控装置和全球定位系统协同合作，让电脑可以在没有任何人类主动的操作下，自动安全地操作机动车辆。随着信息技术和控制技术的发展,新一轮科技革命和产业变革蓬勃兴起，智能汽车已成为汽车产业发展的战略方向。智能汽车是解决汽车社会面临的交通安全、道路拥堵、能源消耗、环境污染等问题的重要手段。自动驾驶轨迹控制技术主要指的是对自动驾驶车辆的横向控制，主要研究不同车速、载荷下，车辆沿预定的参考线行驶的控制算法，为了使车辆能够按照设定轨迹行驶，国内外学者已经在车辆轨迹跟踪算法精确性方面开展了大量的研究工作，现有的轨迹控制算法包括有纯跟踪算法、Stanley法、LQR、MPC算法等。而横向控制主要是对车辆方向盘的转向角进行控制，以减小车辆与参考线轨迹的横向距离。检测轨迹偏差是评价控制算法精确性，判断控制算法、参数优劣的最重要依据。目前，现有技术中采用卫星定位法来对自动驾驶车辆进行高精度的实时定位，从而获取车辆行驶轨迹，并与设定的轨迹路线进行对比检测轨迹偏差，但采用卫星定位方法，当行驶至信号强度较弱或者有信号屏蔽的区域时，会由于无法获取位置信息造成数据缺失，导致检测结果与实际值之间存在较大误差。为此，我们提出一种自动驾驶轨迹偏差检测方法及检测系统。发明内容本发明的主要目的在于提供一种自动驾驶轨迹偏差检测方法及检测系统，通过采集车辆的初始状态参数值和过程参数值，模拟车辆在行驶过程中的行驶路径方程，计算车辆在过程位置点pmt的坐标与目标路径轨迹方程组规划的位置点之间的欧拉距离，根据计算结果，引入两个点之间重合率的概念作为自动驾驶轨迹偏差程度的表征值，可以有效解决背景技术中的问题。为实现上述目的，本发明采取的技术方案为：一种自动驾驶轨迹偏差检测方法，用于自动驾驶车辆行驶轨迹偏差检测，所述方法包括以下步骤：步骤一，获取车辆目标路径的轨迹方程，以目标路径起点为圆心构建坐标系，设pi=为目标路径轨迹方程上的点，xi,yi分别为点的横坐标和纵坐标值，其中，i=1,2,...,n，n为整数，p1为目标路径的起点，pn为目标路径的终点；步骤二，获取车辆初始状态参数值，包括初始位置p0的坐标、初始加速度a0m/s2、初始行驶速度v0m/s及初始转向角θ0°；步骤三，采集车辆在行驶过程中的过程参数值，包括过程加速度atm/s2、过程行驶速度vtm/s及过程转向角θt°；步骤四，模拟车辆在行驶过程中的行驶路径方程，通过模拟结果计算车辆在行驶过程中的过程位置点pmt的坐标,其中，m为大于一的正整数；步骤五，计算车辆在过程位置点pmt的坐标与目标路径轨迹方程组规划的位置点之间的欧拉距离；步骤六，根据计算结果，计算过程位置坐标点与目标路径轨迹方程上点的重合率Co，计算公式为：，其中，Di为计算重合率时选取的目标路径轨迹方程上点的总数量值，Dt为程位置坐标点与目标路径轨迹方程上点重合的点的个数，以重合率作为自动驾驶轨迹偏差程度的表征值，其中，轨迹偏差程度反比于重合率。进一步的，在步骤六中，以车辆在行驶过程中的过程位置点为圆心作半径为R的圆，当所作圆与目标路径轨迹存在交点时，判定该过程位置坐标点与该圆内目标路径轨迹方程上点的重合。进一步的，Di的值根据目标路径轨迹长度确定，Di值正比于目标路径轨迹长度。进一步的，R的取值范围根据目标路径轨迹长度确定，R的取值正比于目标路径轨迹长度。进一步的，在步骤三中，过程参数值的采集时刻点为从过程转向角θt开始时刻t0至结束时刻tf。进一步的，在步骤四中，车辆从初始位置至终点位置的行驶路径方程的模拟方法根据过程转向角θt确定，具体方法为：一，当过程转向角θt为零度的时间段内，采用直线方程模拟该时间段内的行驶路径方程；二，当过程转向角θt不为零度的时间段内，采用圆周方程模拟该时间段内的行驶路径方程。进一步的，在步骤六中，获取重合率Co的值后，利用重合率Co的数值创建样本集，并获取样本集中的均值和标准差，利用均值和标准差对数据进行标准化，标准化公式为，在此式中z为标准参量，σ为样本数据的方差，μ为样本数据的均值，在完成标准化后，将标准参量利用/＞将数值区间调整至之间，利用f的函数值对重合率进行分类，分类的机制为：当时，重合率分类为一级，即表示轨迹偏差程度为一级；当时，重合率分类为二级，即表示轨迹偏差程度为二级；/＞其中，fmin，fmax分别为f的函数值的最小值和最大值。一种自动驾驶轨迹偏差检测系统，用于自动驾驶车辆行驶轨迹偏差检测，所述系统包括：目标路径轨迹获取模块，用于通过以目标路径起点为圆心构建坐标系，获取车辆目标路径轨迹方程；数据采集模块，用于采集车辆的初始状态参数值和过程参数值；数据分析模块，用于模拟车辆在行驶过程中的行驶路径方程，并通过模拟结果计算车辆在行驶过程中的过程位置点pmt的坐标；距离计算模块，用于计算车辆在过程位置点pmt的坐标与目标路径轨迹方程组规划的位置点之间的欧拉距离；数据拟合模块，用于计算过程位置坐标点与目标路径轨迹方程上点的重合率Co，并以重合率作为自动驾驶轨迹偏差程度的表征值，对轨迹偏差程度进行等级划分；进一步的，所述系统包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序。进一步的，数据采集模块通过传感器采集车辆的初始状态参数值和过程参数值，包括速度传感器、加速度传感器、转角传感器，所述速度传感器和加速度传感器均安装于车厢内部，所述转角传感器安装于车辆转向轴或任意一个前轮主销上。本发明方案的具体实施步骤为：步骤1,首先，通过目标路径轨迹获取模块获取车辆目标路径轨迹，以目标路径起点为圆心构建目标路径轨迹的二维坐标系，并以目标路径轨迹方程上的点集作为目标路径轨迹方程的表达式，记作pi=；步骤2,然后，通过数据采集模块采集车辆的初始状态参数值和过程参数值；步骤3,通过数据分析模块根据步骤2中采集的数据，模拟车辆在行驶过程中的行驶路径方程，具体方法为：一，当过程转向角θt为零度的时间段内，说明车辆在此时间段内行驶方向未发生变化，是沿直线行驶，采用直线方程模拟该时间段内的行驶路径方程；二，当过程转向角θt不为零度的时间段内，说明车辆在此时间段内以固定的转向角行驶，由于转向角度固定，车辆在做圆周运动，其行驶轨迹为圆弧状，采用圆周方程模拟该时间段内的行驶路径方程；并通过模拟结果依次计算车辆在行驶过程中的各个过程位置点pmt的坐标；步骤4，接下来，通过距离计算模块计算车辆在行驶过程中的各个过程位置点pmt的坐标与目标路径轨迹方程组规划的位置点之间的欧拉距离，其中欧拉距离的计算公式为：；步骤5，最后，根据计算结果，通过数据拟合模块计算过程位置坐标点与目标路径轨迹方程上点的重合率Co，以重合率作为自动驾驶轨迹偏差程度的表征值，获取轨迹偏差程度的等级评价结果。与现有技术相比，本发明具有如下有益效果：1)本发明通过采集车辆的初始状态参数值和过程参数值，并模拟车辆在行驶过程中的行驶路径方程，根据模拟结果计算车辆在行驶过程中的过程位置点pmt的坐标,并进一步计算车辆在过程位置点pmt的坐标与目标路径轨迹方程组规划的位置点之间的欧拉距离，根据计算结果，引入两个点之间重合率的概念，通过计算过程位置坐标点与目标路径轨迹方程上点的重合率Co作为自动驾驶轨迹偏差程度的表征值，可以直观的量化评价车辆行驶过程中的轨迹偏差程度；2)本发明的方案通过数据采集模块，采用现有技术中常见的传感器采集车辆的初始状态参数值和过程参数值，包括速度传感器、加速度传感器、转角传感器等，无需通过卫星定位法来对自动驾驶车辆进行高精度的实时定位，获取车辆行驶轨迹，系统结构简单，成本低，布置方便，适用于网络信号差的环境中。附图说明图1为本发明一种自动驾驶轨迹偏差检测方法的技术路线图；图2为目标路径轨迹的示意图。图中：1、目标路径轨迹；2、与目标路径轨迹线相距为R的线；a、目标路径轨迹起点；b、目标路径轨迹终点。具体实施方式下面结合具体实施方式对本发明作进一步的说明，其中，附图仅用于示例性说明，表示的仅是示意图，而非实物图，不能理解为对本发明的限制，为了更好地说明本发明的具体实施方式，附图某些部件会有省略、放大或缩小，并不代表实际产品的尺寸。下面提供本发明的一种具体实施例：步骤1，首先，通过目标路径轨迹获取模块获取车辆目标路径轨迹，目标路径轨迹为卫星导航系统生成的导航路线图，此步骤中，路径轨迹忽略在高度上的差异，通过定位路径的起点位置，以目标路径起点为圆心构建目标路径轨迹的二维坐标系，并以目标路径轨迹方程上的点集作为目标路径轨迹方程的表达式，记作pi=；步骤2,然后，通过数据采集模块采集车辆的初始状态参数值和过程参数值，其中，初始状态参数值包括初始位置p0的坐标、初始加速度a0m/s2、初始行驶速度v0m/s及初始转向角θ0°，过程参数值包括过程加速度atm/s2、过程行驶速度vtm/s及过程转向角θt°，过程参数值的采集时刻点为从过程转向角θt开始时刻t0至结束时刻tf；步骤3，通过数据分析模块根据步骤2中采集的数据，模拟车辆在行驶过程中的行驶路径方程，具体方法为：一，当过程转向角θt为零度的时间段内，说明车辆在此时间段内行驶方向未发生变化，是沿直线行驶，采用直线方程模拟该时间段内的行驶路径方程，需要说明的是，当过程转向角θt为零度的时间段内，过程加速度at的值存在两种情况，情况一是过程加速度at发生变化，即此时车辆在做变加速直线运动；情况二是过程加速度at未发生变化，即此时车辆在做匀加速直线运动，且当过程加速度at为零时，车辆在做匀速直线运动；对于上述情况，假设车辆由初始位置p0行驶至第一个过程位置点p1t的时间段内，过程转向角θt为零，由步骤2中获取的数据可知，初始位置p0的坐标为，初始加速度为a0m/s2、初始行驶速度为v0m/s，第一个过程位置点p1t的坐标设为，车辆到达第一个过程位置点时的过程加速度a1m/s2、过程行驶速度v1m/s，对于情况一，根据运动学定理的位移时间公式：s=*t/2=v1*t+at2/2；对于情况二，根据加速度变化规律求加速度对时间的平均值，再结合上式即可求解出初始位置p0与第一个过程位置点p1t的距离，从而确定第一个过程位置点p1t的坐标；二，当过程转向角θt不为零度的时间段内，说明车辆在此时间段内以固定的转向角行驶，由于转向角度固定，车辆在做圆周运动，其行驶轨迹为圆弧状，采用圆周方程模拟该时间段内的行驶路径方程，需要说明的是，当过程转向角θt不为零度的时间段内，过程加速度at的值存在两种情况，情况一是过程加速度at发生变化，即此时车辆在做变加速曲线运动；情况二是过程加速度at未发生变化，即此时车辆在做匀加速曲线运动，且当过程加速度at为零时，车辆在做匀速曲线运动，对于上述情况一，根据加速度变化规律求加速度对时间的平均值，然后由平面曲线运动的运动方程：；其中，ax，ay分别为过程加速度at在x轴和y轴上的分量，根据上式确定第一个过程位置点p1t的坐标；从而模拟完成车辆由初始位置p0至第一个过程位置点p1t的行驶路径方程，同理，当车辆由第一个过程位置点p1t行驶至第二个过程位置点p2t的过程采用同样的方法进行模拟，从而通过模拟结果依次计算车辆在行驶过程中的各个过程位置点pmt的坐标；步骤4，接下来，通过距离计算模块计算车辆在行驶过程中的各个过程位置点pmt的坐标与目标路径轨迹方程组规划的位置点之间的欧拉距离，其中欧拉距离的计算公式为：；需要说明的是目标路径轨迹方程组规划的位置点是由目标路径轨迹获得的，在本实施例中，可以在坐标系统通过作过程位置点pmt与目标路径轨迹的垂线，从而确定目标路径轨迹方程组规划的位置点的坐标值；步骤5，最后，根据计算结果，通过数据拟合模块计算过程位置坐标点与目标路径轨迹方程上点的重合率Co，以重合率作为自动驾驶轨迹偏差程度的表征值，其中，以车辆在行驶过程中的过程位置点为圆心作半径为R的圆，当所作圆与目标路径轨迹存在交点时，判定该过程位置坐标点与该圆内目标路径轨迹方程上点的重合，如图2所示，图2中1线为目标路径轨迹，2线为与目标路径轨迹距离为R的两条线，则当过程位置点落在图中阴影区域内时，说明该过程位置坐标点与该圆内目标路径轨迹方程上点的重合，当落在阴影区域外部时，说明该过程位置坐标点与该圆内目标路径轨迹方程上点的不重合，获取重合率Co的值后，利用重合率Co的数值创建样本集，并获取样本集中的均值和标准差，利用均值和标准差对数据进行标准化，标准化公式为，在此式中z为标准参量，σ为样本数据的方差，μ为样本数据的均值，在完成标准化后，将标准参量利用将数值区间调整至之间，利用f的函数值对重合率进行分类，分类的机制为：当时，重合率分类为一级，即表示轨迹偏差程度为一级；当时，重合率分类为二级，即表示轨迹偏差程度为二级，从而获取轨迹偏差程度的等级评价结果。本发明的技术方案具有以下优点：1)本发明通过采集车辆的初始状态参数值和过程参数值，并模拟车辆在行驶过程中的行驶路径方程，根据模拟结果计算车辆在行驶过程中的过程位置点pmt的坐标,并进一步计算车辆在过程位置点pmt的坐标与目标路径轨迹方程组规划的位置点之间的欧拉距离，根据计算结果，引入两个点之间重合率的概念，通过计算过程位置坐标点与目标路径轨迹方程上点的重合率Co作为自动驾驶轨迹偏差程度的表征值，可以直观的量化评价车辆行驶过程中的轨迹偏差程度；2)本发明的方案通过数据采集模块，采用现有技术中常见的传感器采集车辆的初始状态参数值和过程参数值，包括速度传感器、加速度传感器、转角传感器等，无需通过卫星定位法来对自动驾驶车辆进行高精度的实时定位，获取车辆行驶轨迹，系统结构简单，成本低，布置方便，适用于网络信号差的环境中。以上显示和描述了本发明的基本原理和主要特征和本发明的优点。本行业的技术人员应该了解，本发明不受上述实施例的限制，上述实施例和说明书中描述的只是说明本发明的原理，在不脱离本发明精神和范围的前提下，本发明还会有各种变化和改进，这些变化和改进都落入要求保护的本发明范围内。本发明要求保护范围由所附的权利要求书及其等效物界定。
