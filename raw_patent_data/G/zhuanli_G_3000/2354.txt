标题title
基于图像处理的塑料膜挤出质量评估方法
摘要abst
本发明涉及图像处理技术领域，具体涉及基于图像处理的塑料膜挤出质量评估方法，包括：采集若干塑料膜的塑料灰度图像；根据塑料灰度图像得到若干塑料区域；获取局部邻域差值，根据局部邻域差值得到局部差异概率；根据局部差异概率得到亮差参数；根据亮差参数得到路径终止点以及路径起始点；根据路径终止点以及路径起始点得到路径方向；根据路径方向以及亮差参数得到外界干扰路径；根据外界干扰路径以及亮差参数得到明暗阈值；根据明暗阈值得到还原塑料区域；根据还原塑料区域进行质量评估。本发明使还原后的图像更加准确地表示塑料膜真实的灰度分布，提高了质量评估的准确性。
权利要求书clms
1.基于图像处理的塑料膜挤出质量评估方法，其特征在于，该方法包括以下步骤：采集若干塑料膜的塑料灰度图像；对塑料灰度图像划分区域得到若干塑料区域；获取每个塑料区域内每个像素点的若干局部邻域差值；根据局部邻域差值得到每个塑料区域内每个像素点的若干局部差异概率；根据局部差异概率得到每个塑料区域内每个像素点的亮差参数；根据亮差参数得到每个塑料区域的路径终止点以及若干路径起始点；根据路径终止点以及路径起始点得到每个塑料区域内每个路径起始点的路径方向；根据路径方向以及亮差参数得到每个塑料区域内每个路径起始点的若干外界干扰路径；根据外界干扰路径以及亮差参数得到每条外界干扰路径的明暗阈值；根据明暗阈值对每个塑料区域内每个路径起始点进行还原得到每个还原塑料区域；根据还原塑料区域进行质量评估。2.根据权利要求1所述基于图像处理的塑料膜挤出质量评估方法，其特征在于，所述获取每个塑料区域内每个像素点的若干局部邻域差值，包括的具体方法为：将任意一张塑料灰度图像上任意一个塑料区域内任意一个像素点记为目标像素点，以目标像素点为中心，获取目标像素点的八邻域内每个像素点的灰度值，记为目标像素点的局部邻域灰度值；对于目标像素点的任意一个局部邻域灰度值，将目标像素点的灰度值与局部邻域灰度值差值的绝对值记为目标像素点的局部邻域差值；获取塑料区域内目标像素点的所有局部邻域差值；获取每个塑料区域内每个像素点的若干局部邻域差值。3.根据权利要求1所述基于图像处理的塑料膜挤出质量评估方法，其特征在于，所述根据局部邻域差值得到每个塑料区域内每个像素点的若干局部差异概率，包括的具体方法为：对于任意一个塑料区域，在塑料区域内所有像素点的所有局部邻域差值中，获取塑料区域内每个像素点的每个局部邻域差值出现的频率，记为塑料区域内每个像素点的局部差异概率；获取每个塑料区域内每个像素点的若干局部差异概率。4.根据权利要求1所述基于图像处理的塑料膜挤出质量评估方法，其特征在于，所述根据局部差异概率得到每个塑料区域内每个像素点的亮差参数，包括的具体方法为：将任意一个塑料区域内任意一个像素点记为第一目标像素点，式中，表示第一目标像素点的亮差参数；/＞表示第一目标像素点所属塑料区域内包含的像素点的数量；/＞表示第一目标像素点的灰度值；/＞表示在第一目标像素点所属的塑料区域内，除第一目标像素点以外的第/＞个像素点的灰度值；/＞表示预设的超参数；/＞表示第一目标像素点的所有局部差异概率的均值；获取每个塑料区域内每个像素点的亮差参数。5.根据权利要求1所述基于图像处理的塑料膜挤出质量评估方法，其特征在于，所述根据亮差参数得到每个塑料区域的路径终止点以及若干路径起始点，包括的具体方法为：对于任意一个塑料区域，将塑料区域内亮差参数最大的像素点记为塑料区域的路径终止点；将塑料区域内除路径终止点以外的每个像素点记为塑料区域的路径起始点；获取每个塑料区域的路径终止点以及若干路径起始点。6.根据权利要求1所述基于图像处理的塑料膜挤出质量评估方法，其特征在于，所述根据路径终止点以及路径起始点得到每个塑料区域内每个路径起始点的路径方向，包括的具体方法为：对于任意一个塑料区域的路径终止点以及任意一个路径起始点；若路径终止点位于路径起始点的右上方区域，路径起始点的路径方向为右上方向；若路径终止点位于路径起始点的右下方区域，路径起始点的路径方向为右下方向；若路径终止点位于路径起始点的左上方区域，路径起始点的路径方向为左上方向；若路径终止点位于路径起始点的左下方区域，路径起始点的路径方向为左下方向；若路径终止点位于路径起始点水平向右的方向，路径起始点的路径方向为水平向右；若路径终止点位于路径起始点水平向左的方向，路径起始点的路径方向为水平向左；若路径终止点位于路径起始点竖直向上的方向，路径起始点的路径方向为竖直向上；若路径终止点位于路径起始点竖直向下的方向，路径起始点的路径方向为竖直向下；获取每个塑料区域内每个路径起始点的路径方向。7.根据权利要求1所述基于图像处理的塑料膜挤出质量评估方法，其特征在于，所述根据路径方向以及亮差参数得到每个塑料区域内每个路径起始点的若干外界干扰路径，包括的具体方法为：对于任意一个路径方向为水平向右的路径起始点，将路径起始点八邻域内水平向右的像素点作为第一个路径点，后续获取的路径点均为前一个路径点八邻域内水平向右的像素点，直至最新获取的路径点为路径终止点时停止遍历，将所有路径点所占的图像区域记为路径起始点的外界干扰路径；若路径起始点的路径方向为水平向左、竖直向上或竖直向下，均以八邻域内路径方向对应的像素点作为第一个路径点，并根据路径方向获取后续路径点，直到遍历到路径终止点，得到所有路径方向为水平向右、水平向左、竖直向上及竖直向下的路径起始点的外界干扰路径；对于任意一个路径方向为右下方向的路径起始点，在路径起始点的八邻域内，将路径起始点在水平向右的像素点记为路径起始点的水平右侧起始点，将路径起始点在水平向左的像素点记为路径起始点的水平左侧起始点，将路径起始点在竖直向上的像素点记为路径起始点的竖直上侧起始点，将路径起始点在竖直向下的像素点记为路径起始点的竖直下侧起始点；对于路径起始点的水平左侧起始点，将水平左侧起始点作为第一个路径点，将第一个路径点八邻域内竖直向下的像素点作为第二个路径点；若第二个路径点八邻域内水平向右的像素点的亮差参数大于等于竖直向下的像素点的亮差参数，将第二个路径点八邻域内水平向右的像素点记为第三个路径点；若第二个路径点八邻域内水平向右的像素点的亮差参数小于竖直向下的像素点的亮差参数，将第二个路径点八邻域内竖直向下的像素点记为第三个路径点；若第三个路径点八邻域内水平向右的像素点的亮差参数大于等于竖直向下的像素点的亮差参数，将第三个路径点八邻域内水平向右的像素点记为第四个路径点；若第三个路径点八邻域内水平向右的像素点的亮差参数小于竖直向下的像素点的亮差参数，将第三个路径点八邻域内竖直向下的像素点记为第四个路径点；后续的路径点获取过程中，若最新遍历获取的路径点与路径终止点处于同一水平线时，后续获取的路径点是前一个路径点八邻域内水平向右的像素点；若最新遍历获取的路径点与路径终止点处于同一竖直线时，后续获取的路径点是前一个路径点八邻域内竖直向下的像素点；若最新遍历获取的路径点与路径终止点仍不处于同一水平线或竖直线，继续根据亮差参数获取下一个路径点，直到最新遍历获取的路径点与路径终止点处于同一水平线或竖直线，获取后续的路径点，直至最新获取的路径点为路径终止点时停止遍历，将所有路径点所占的图像区域记为水平左侧起始点的干扰路径；对于路径起始点的水平右侧起始点、竖直上侧起始点及竖直下侧起始点分别作为第一个路径点的情况，根据路径方向对应的八邻域内两个像素点的亮差参数以及是否为路径起始点，进行下一个路径点的获取，直到最终得到三种情况下第一个起始点分别对应的干扰路径；将水平左侧起始点的干扰路径、水平右侧起始点的干扰路径、竖直上侧起始点的干扰路径以及竖直下侧起始点的干扰路径分别记为该路径方向为右下方向的路径起始点的一条外界干扰路径，获取每个路径方向为右下方向的路径起始点的若干外界干扰路径；对于路径方向为右上方向、左上方向或左下方向的路径起始点，得到每个路径起始点的四条干扰路径，将每个路径起始点的四条干扰路径作为每个路径起始点的外界干扰路径；获取每个塑料区域内每个路径起始点的若干外界干扰路径。8.根据权利要求7所述基于图像处理的塑料膜挤出质量评估方法，其特征在于，所述根据外界干扰路径以及亮差参数得到每条外界干扰路径的明暗阈值，包括的具体方法为：对于任意一个塑料区域内任意一个路径起始点的任意一条外界干扰路径，式中，表示外界干扰路径的明暗阈值；/＞表示预设的超参数；/＞表示塑料区域内包含的像素点的数量；表示塑料区域内第/＞个像素点的亮差参数；/＞表示塑料区域内所有像素点的亮差参数的最大值；/＞表示塑料区域内所有像素点的亮差参数的最小值；/＞表示预设的超参数；/＞表示外界干扰路径包含的路径点的数量；/＞表示塑料区域内所有像素点的亮差参数的均值；表示以自然常数为底的指数函数；获取每条外界干扰路径的明暗阈值。9.根据权利要求1所述基于图像处理的塑料膜挤出质量评估方法，其特征在于，所述根据明暗阈值对每个塑料区域内每个路径起始点进行还原得到每个还原塑料区域，包括的具体方法为：对于任意一个塑料区域内任意一个路径起始点的任意一条外界干扰路径，根据外界干扰路径的明暗阈值利用Retinex算法得到外界干扰路径的相对明暗关系；获取塑料区域内路径起始点的所有外界干扰路径的相对明暗关系；根据塑料区域内路径起始点的所有外界干扰路径的相对明暗关系，对路径起始点进行还原，具体方法为：式中，表示路径起始点还原后的灰度值；/＞表示塑料区域内路径终止点的灰度值；/＞表示路径起始点所有外界干扰路径的相对明暗关系的均值；将塑料区域内所有路径起始点进行还原，将还原后的塑料区域记为还原塑料区域；获取每个还原塑料区域。10.根据权利要求1所述基于图像处理的塑料膜挤出质量评估方法，其特征在于，所述根据还原塑料区域进行质量评估，包括的具体方法为：对于任意一张塑料灰度图像，将每个还原塑料区域内所有像素点的灰度值的累加和记为每个还原塑料区域的初始均匀程度，对所有还原塑料区域的初始均匀程度进行线性归一化，将归一化后的初始均匀程度记为每个还原塑料区域的均匀程度；将预设的均匀程度阈值记为T2，若存在任意一个还原塑料区域的均匀程度大于T2，将塑料灰度图像记为质量不合格的塑料灰度图像；若不存在任意一个还原塑料区域的均匀程度大于T2，不对塑料灰度图像进行任何处理；获取所有质量不合格的塑料灰度图像。
说明书desc
技术领域本发明涉及图像处理技术领域，具体涉及基于图像处理的塑料膜挤出质量评估方法。背景技术塑料膜挤出是塑料膜生产过程中非常重要的一个工业阶段，由于这个工业阶段的产品质量好坏对于后面产品质量、性能合规性、成本控制和产品竞争力有着非常大的影响，因此在塑料膜挤出环节需要对产品质量进行一个评估，从而确保挤出的膜达到预期的质量标准，具备良好的性能和可靠的使用性能。其中塑料膜挤出后的均匀程度是一项重要的评判标准，若塑料膜因外界光照干扰导致图像不清晰，那么对塑料膜挤出后的均匀程度判断的准确性也会降低，因此需要对塑料膜的图像进行灰度还原，获取塑料膜真实的灰度分布，以便进行质量评估。随机路径Retinex算法可以消除光照影响来还原各像素点之间的真实灰度值，但由于对照点、路径以及门限阈值的选取均是随机的，不能根据塑料膜的图像特征进行自适应选取，导致还原后的图像不能准确表示塑料膜真实的灰度分布。发明内容本发明提供基于图像处理的塑料膜挤出质量评估方法，以解决现有的问题：随机路径Retinex算法对照点、路径以及门限阈值的选取均是随机的，不能根据塑料膜的图像特征进行自适应选取，导致还原后的图像不能准确表示塑料膜真实的灰度分布。本发明的基于图像处理的塑料膜挤出质量评估方法采用如下技术方案：本发明一个实施例提供了基于图像处理的塑料膜挤出质量评估方法，该方法包括以下步骤：采集若干塑料膜的塑料灰度图像；对塑料灰度图像划分区域得到若干塑料区域；获取每个塑料区域内每个像素点的若干局部邻域差值；根据局部邻域差值得到每个塑料区域内每个像素点的若干局部差异概率；根据局部差异概率得到每个塑料区域内每个像素点的亮差参数；根据亮差参数得到每个塑料区域的路径终止点以及若干路径起始点；根据路径终止点以及路径起始点得到每个塑料区域内每个路径起始点的路径方向；根据路径方向以及亮差参数得到每个塑料区域内每个路径起始点的若干外界干扰路径；根据外界干扰路径以及亮差参数得到每条外界干扰路径的明暗阈值；根据明暗阈值对每个塑料区域内每个路径起始点进行还原得到每个还原塑料区域；根据还原塑料区域进行质量评估。优选的，所述获取每个塑料区域内每个像素点的若干局部邻域差值，包括的具体方法为：将任意一张塑料灰度图像上任意一个塑料区域内任意一个像素点记为目标像素点，以目标像素点为中心，获取目标像素点的八邻域内每个像素点的灰度值，记为目标像素点的局部邻域灰度值；对于目标像素点的任意一个局部邻域灰度值，将目标像素点的灰度值与局部邻域灰度值差值的绝对值记为目标像素点的局部邻域差值；获取塑料区域内目标像素点的所有局部邻域差值；获取每个塑料区域内每个像素点的若干局部邻域差值。优选的，所述根据局部邻域差值得到每个塑料区域内每个像素点的若干局部差异概率，包括的具体方法为：对于任意一个塑料区域，在塑料区域内所有像素点的所有局部邻域差值中，获取塑料区域内每个像素点的每个局部邻域差值出现的频率，记为塑料区域内每个像素点的局部差异概率；获取每个塑料区域内每个像素点的若干局部差异概率。优选的，所述根据局部差异概率得到每个塑料区域内每个像素点的亮差参数，包括的具体方法为：将任意一个塑料区域内任意一个像素点记为第一目标像素点，式中，表示第一目标像素点的亮差参数；/＞表示第一目标像素点所属塑料区域内包含的像素点的数量；/＞表示第一目标像素点的灰度值；/＞表示在第一目标像素点所属的塑料区域内，除第一目标像素点以外的第/＞个像素点的灰度值；/＞表示预设的超参数；/＞表示第一目标像素点的所有局部差异概率的均值；获取每个塑料区域内每个像素点的亮差参数。优选的，所述根据亮差参数得到每个塑料区域的路径终止点以及若干路径起始点，包括的具体方法为：对于任意一个塑料区域，将塑料区域内亮差参数最大的像素点记为塑料区域的路径终止点；将塑料区域内除路径终止点以外的每个像素点记为塑料区域的路径起始点；获取每个塑料区域的路径终止点以及若干路径起始点。优选的，所述根据路径终止点以及路径起始点得到每个塑料区域内每个路径起始点的路径方向，包括的具体方法为：对于任意一个塑料区域的路径终止点以及任意一个路径起始点；若路径终止点位于路径起始点的右上方区域，路径起始点的路径方向为右上方向；若路径终止点位于路径起始点的右下方区域，路径起始点的路径方向为右下方向；若路径终止点位于路径起始点的左上方区域，路径起始点的路径方向为左上方向；若路径终止点位于路径起始点的左下方区域，路径起始点的路径方向为左下方向；若路径终止点位于路径起始点水平向右的方向，路径起始点的路径方向为水平向右；若路径终止点位于路径起始点水平向左的方向，路径起始点的路径方向为水平向左；若路径终止点位于路径起始点竖直向上的方向，路径起始点的路径方向为竖直向上；若路径终止点位于路径起始点竖直向下的方向，路径起始点的路径方向为竖直向下；获取每个塑料区域内每个路径起始点的路径方向。优选的，所述根据路径方向以及亮差参数得到每个塑料区域内每个路径起始点的若干外界干扰路径，包括的具体方法为：对于任意一个路径方向为水平向右的路径起始点，将路径起始点八邻域内水平向右的像素点作为第一个路径点，后续获取的路径点均为前一个路径点八邻域内水平向右的像素点，直至最新获取的路径点为路径终止点时停止遍历，将所有路径点所占的图像区域记为路径起始点的外界干扰路径；若路径起始点的路径方向为水平向左、竖直向上或竖直向下，均以八邻域内路径方向对应的像素点作为第一个路径点，并根据路径方向获取后续路径点，直到遍历到路径终止点，得到所有路径方向为水平向右、水平向左、竖直向上及竖直向下的路径起始点的外界干扰路径；对于任意一个路径方向为右下方向的路径起始点，在路径起始点的八邻域内，将路径起始点在水平向右的像素点记为路径起始点的水平右侧起始点，将路径起始点在水平向左的像素点记为路径起始点的水平左侧起始点，将路径起始点在竖直向上的像素点记为路径起始点的竖直上侧起始点，将路径起始点在竖直向下的像素点记为路径起始点的竖直下侧起始点；对于路径起始点的水平左侧起始点，将水平左侧起始点作为第一个路径点，将第一个路径点八邻域内竖直向下的像素点作为第二个路径点；若第二个路径点八邻域内水平向右的像素点的亮差参数大于等于竖直向下的像素点的亮差参数，将第二个路径点八邻域内水平向右的像素点记为第三个路径点；若第二个路径点八邻域内水平向右的像素点的亮差参数小于竖直向下的像素点的亮差参数，将第二个路径点八邻域内竖直向下的像素点记为第三个路径点；若第三个路径点八邻域内水平向右的像素点的亮差参数大于等于竖直向下的像素点的亮差参数，将第三个路径点八邻域内水平向右的像素点记为第四个路径点；若第三个路径点八邻域内水平向右的像素点的亮差参数小于竖直向下的像素点的亮差参数，将第三个路径点八邻域内竖直向下的像素点记为第四个路径点；后续的路径点获取过程中，若最新遍历获取的路径点与路径终止点处于同一水平线时，后续获取的路径点是前一个路径点八邻域内水平向右的像素点；若最新遍历获取的路径点与路径终止点处于同一竖直线时，后续获取的路径点是前一个路径点八邻域内竖直向下的像素点；若最新遍历获取的路径点与路径终止点仍不处于同一水平线或竖直线，继续根据亮差参数获取下一个路径点，直到最新遍历获取的路径点与路径终止点处于同一水平线或竖直线，获取后续的路径点，直至最新获取的路径点为路径终止点时停止遍历，将所有路径点所占的图像区域记为水平左侧起始点的干扰路径；对于路径起始点的水平右侧起始点、竖直上侧起始点及竖直下侧起始点分别作为第一个路径点的情况，根据路径方向对应的八邻域内两个像素点的亮差参数以及是否为路径起始点，进行下一个路径点的获取，直到最终得到三种情况下第一个起始点分别对应的干扰路径；将水平左侧起始点的干扰路径、水平右侧起始点的干扰路径、竖直上侧起始点的干扰路径以及竖直下侧起始点的干扰路径分别记为该路径方向为右下方向的路径起始点的一条外界干扰路径，获取每个路径方向为右下方向的路径起始点的若干外界干扰路径；对于路径方向为右上方向、左上方向或左下方向的路径起始点，得到每个路径起始点的四条干扰路径，将每个路径起始点的四条干扰路径作为每个路径起始点的外界干扰路径；获取每个塑料区域内每个路径起始点的若干外界干扰路径。优选的，所述根据外界干扰路径以及亮差参数得到每条外界干扰路径的明暗阈值，包括的具体方法为：对于任意一个塑料区域内任意一个路径起始点的任意一条外界干扰路径，式中，表示外界干扰路径的明暗阈值；/＞表示预设的超参数；/＞表示塑料区域内包含的像素点的数量；/＞表示塑料区域内第/＞个像素点的亮差参数；/＞表示塑料区域内所有像素点的亮差参数的最大值；/＞表示塑料区域内所有像素点的亮差参数的最小值；/＞表示预设的超参数；/＞表示外界干扰路径包含的路径点的数量；/＞表示塑料区域内所有像素点的亮差参数的均值；/＞表示以自然常数为底的指数函数；获取每条外界干扰路径的明暗阈值。优选的，所述根据明暗阈值对每个塑料区域内每个路径起始点进行还原得到每个还原塑料区域，包括的具体方法为：对于任意一个塑料区域内任意一个路径起始点的任意一条外界干扰路径，根据外界干扰路径的明暗阈值利用Retinex算法得到外界干扰路径的相对明暗关系；获取塑料区域内路径起始点的所有外界干扰路径的相对明暗关系；根据塑料区域内路径起始点的所有外界干扰路径的相对明暗关系，对路径起始点进行还原，具体方法为：式中，表示路径起始点还原后的灰度值；/＞表示塑料区域内路径终止点的灰度值；/＞表示路径起始点所有外界干扰路径的相对明暗关系的均值；将塑料区域内所有路径起始点进行还原，将还原后的塑料区域记为还原塑料区域；获取每个还原塑料区域。优选的，所述根据还原塑料区域进行质量评估，包括的具体方法为：对于任意一张塑料灰度图像，将每个还原塑料区域内所有像素点的灰度值的累加和记为每个还原塑料区域的初始均匀程度，对所有还原塑料区域的初始均匀程度进行线性归一化，将归一化后的初始均匀程度记为每个还原塑料区域的均匀程度；将预设的均匀程度阈值记为T2，若存在任意一个还原塑料区域的均匀程度大于T2，将塑料灰度图像记为质量不合格的塑料灰度图像；若不存在任意一个还原塑料区域的均匀程度大于T2，不对塑料灰度图像进行任何处理；获取所有质量不合格的塑料灰度图像。本发明的技术方案的有益效果是：通过区域划分得到每个塑料区域内每个像素点的亮差参数，根据亮差参数获取路径终止点以及若干路径起始点，根据路径终止点以及若干路径起始点得到路径方向，根据路径方向以及亮差参数得到若干外界干扰路径，根据外界干扰路径以及亮差参数得到明暗阈值，根据明暗阈值进行质量评估；相较于现有技术对照点、路径以及门限阈值的选取均是随机的，不能根据塑料膜的图像特征进行自适应选取的缺陷；像素点的亮差参数更好地表示了像素点受到外界光照影响的程度，更准确地确定了对照点；明暗阈值更好地表示了外界干扰路径受到外界干扰影响的程度以及需要消除的力度；使获取的对照点、路径以及门限阈值更加符合塑料膜的图像特征，使还原后的图像更加准确地表示塑料膜真实的灰度分布，提高了质量评估的准确性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明基于图像处理的塑料膜挤出质量评估方法的步骤流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的基于图像处理的塑料膜挤出质量评估方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的基于图像处理的塑料膜挤出质量评估方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的基于图像处理的塑料膜挤出质量评估方法的步骤流程图，该方法包括以下步骤：步骤S001：采集若干塑料膜的塑料灰度图像。需要说明的是，随机路径Retinex算法可以消除光照影响来还原各像素点之间的真实灰度值，但由于对照点、路径以及门限阈值的选取均是随机的，不能根据塑料膜的图像特征进行自适应选取，导致还原后的图像不能准确表示塑料膜真实的灰度分布。具体的，为了实现本实施例提出的基于图像处理的塑料膜挤出质量评估方法，首先需要采集塑料膜的灰度图像，具体过程为：使用工业相机对正在工作的塑料膜挤出机产出的塑料膜进行拍摄，每隔5秒拍摄一次，共拍摄1小时，得到若干塑料膜图像；对每张塑料膜图像进行灰度化处理得到灰度图像，记为每张塑料膜图像的塑料灰度图像。其中灰度化处理是公知技术，本实施例不进行叙述。至此，通过上述方法得到若干塑料膜的塑料灰度图像。步骤S002：对塑料灰度图像划分区域得到若干塑料区域；获取每个塑料区域内每个像素点的若干局部邻域差值；根据局部邻域差值得到每个塑料区域内每个像素点的若干局部差异概率；根据局部差异概率得到每个塑料区域内每个像素点的亮差参数。需要说明的是，通常情况下挤出后的塑料膜越均匀，说明塑料膜的质量越好，在后续制作的成品质量越好；而在塑料灰度图像中，不同厚度的塑料膜区域对应的灰度分布不同，所以灰度分布的均匀程度可以很好地表示塑料膜的均匀程度；但由于塑料灰度图像中的灰度信息会受到光照影响干扰，使反映的灰度分布并不是实际上塑料膜的灰度分布。为此，本实施例通过像素点之间的关系以及灰度特征信息对塑料灰度图像中像素点的灰度值进行还原，使塑料灰度图像反映真实的塑料膜灰度信息。具体的，预设一个塑料区域数量T1，其中本实施例以T1=9为例进行叙述，本实施例不进行具体限定，其中T1可根据具体实施情况而定；以任意一张塑料灰度图像为例，将该塑料灰度图像均分为T1个塑料区域；以该塑料灰度图像上任意一个塑料区域内任意一个像素点为例，以该像素点为中心，获取该像素点的八邻域内每个像素点的灰度值，记为该像素点的局部邻域灰度值；以该像素点的任意一个局部邻域灰度值为例，将该像素点的灰度值与该局部邻域灰度值差值的绝对值记为该像素点的局部邻域差值；获取该塑料区域内该像素点的所有局部邻域差值，获取该塑料区域内所有像素点的所有局部邻域差值；其中每个像素点对应多个局部邻域灰度值，每个像素点对应多个局部邻域差值；需要说明的是，若像素点处于塑料灰度图像的边界位置导致八邻域超出图像边界，则以像素点八邻域内实际能获取到的像素点进行分析处理。进一步的，在该塑料区域内所有像素点的所有局部邻域差值中，获取该塑料区域内每个像素点的每个局部邻域差值出现的频率，记为该塑料区域内每个像素点的局部差异概率；获取该塑料区域内所有像素点的所有局部差异概率。其中每个像素点对应多个局部差异概率，一个局部邻域差值对应一个局部差异概率。进一步的，以该塑料区域内任意一个像素点为例，根据该像素点的若干局部差异概率得到该像素点的亮差参数；其中该像素点的亮差参数的计算方法为：式中，表示该像素点的亮差参数；/＞表示该像素点所属塑料区域内包含的像素点的数量；/＞表示该像素点的灰度值；/＞表示在该像素点所属的塑料区域内，除该像素点以外的第/＞个像素点的灰度值；/＞表示超参数，本实例预设/＞，用于防止分母为0；/＞表示该像素点的所有局部差异概率的均值；/＞表示在该像素点所属塑料区域内，除该像素点以外的像素点的数量；/＞表示该像素点的灰度值的偏差程度。其中该像素点的灰度偏差程度越小，同时邻域内像素点的局部差异频率越大，该像素点的灰度值越趋近于该塑料区域均匀分布的灰度值，说明该像素点的灰度值在该塑料区域内分布越均匀，则亮差参数越大，反映该像素点受到外界光照影响的程度越小。获取该塑料区域内所有像素点的亮差参数；获取所有塑料区域内所有像素点的亮差参数。至此，通过上述方法得到获取所有塑料区域内所有像素点的亮差参数。步骤S003：根据亮差参数得到每个塑料区域的路径终止点以及若干路径起始点；根据路径终止点以及路径起始点得到每个塑料区域内每个路径起始点的路径方向；根据路径方向以及亮差参数得到每个塑料区域内每个路径起始点的若干外界干扰路径。需要说明的是，传统的随机路径Retinex算法对于两个参考点的选取已经两点之间路径的选取都是具有随机性的。在理想情况下，塑料膜表面的颜色特征较为单一，且颜色分布较为均匀，像素点之间影响较小；在受外界光照影响情况下，塑料表面的颜色特征较为多样，且颜色分布多呈不规则分布，像素点之间的影响较大；同时由于亮差参数可以一定程度地反映外界光照影响对像素点的影响，所以可以根据亮差参数确定两个参考点以及两点之间的路径。具体的，以任意一个塑料区域为例，将该塑料区域内亮差参数最大的像素点记为该塑料区域的路径终止点；以该塑料区域内除路径终止点以外的任意一个像素点为例，将该像素点记为该塑料区域的路径起始点；判断路径起始点与路径终止点的方向关系，获取路径起始点的路径方向，具体方法如下：若路径终止点位于路径起始点的右上方区域，路径起始点的路径方向为右偏上45°方向，记为右上方向；若路径终止点位于路径起始点的右下方区域，路径起始点的路径方向为右偏下45°方向，记为右下方向；若路径终止点位于路径起始点的左上方区域，路径起始点的路径方向为左偏下45°方向，记为左下方向；若路径终止点位于路径起始点的左下方区域，路径起始点的路径方向为左偏上45°方向，记为左上方向；若路径终止点位于路径起始点水平向右的方向，路径起始点的路径方向为水平向右；若路径终止点位于路径起始点水平向左的方向，路径起始点的路径方向为水平向左；若路径终止点位于路径起始点竖直向上的方向，路径起始点的路径方向为竖直向上；若路径终止点位于路径起始点竖直向下的方向，路径起始点的路径方向为竖直向下；获取每个塑料区域内每个路径起始点的路径方向。进一步的，以任意一个路径方向为水平向右的路径起始点为例，则路径终止点与路径起始点在同一水平线上，且路径终止点在路径起始点的右方，则将路径起始点八邻域内水平向右的像素点作为第一个路径点，后续获取的路径点均为前一个路径点八邻域内水平向右的像素点，直至最新获取的路径点为路径终止点时停止遍历，将所有路径点所占的图像区域记为路径起始点的外界干扰路径；同理若路径起始点的路径方向为水平向左、竖直向上或竖直向下，则均以八邻域内路径方向对应的像素点作为第一个路径点，并根据路径方向获取后续路径点，直到遍历到路径终止点，得到所有路径方向为水平向右、水平向左、竖直向上及竖直向下的路径起始点的外界干扰路径。进一步的，以任意一个路径方向为右下方向的路径起始点为例，在路径起始点的八邻域内，将路径起始点在水平向右的像素点记为路径起始点的水平右侧起始点，将路径起始点在水平向左的像素点记为路径起始点的水平左侧起始点，将路径起始点在竖直向上的像素点记为路径起始点的竖直上侧起始点，将路径起始点在竖直向下的像素点记为路径起始点的竖直下侧起始点；判断路径起始点的路径方向，获取路径起始点的若干条外界干扰路径，具体方法如下：以路径起始点的水平左侧起始点为例，将水平左侧起始点作为第一个路径点，将第一个路径点八邻域内竖直向下的像素点作为第二个路径点；若第二个路径点八邻域内水平向右的像素点的亮差参数大于等于竖直向下的像素点的亮差参数，将第二个路径点八邻域内水平向右的像素点记为第三个路径点；若第二个路径点八邻域内水平向右的像素点的亮差参数小于竖直向下的像素点的亮差参数，将第二个路径点八邻域内竖直向下的像素点记为第三个路径点；若第三个路径点八邻域内水平向右的像素点的亮差参数大于等于竖直向下的像素点的亮差参数，将第三个路径点八邻域内水平向右的像素点记为第四个路径点；若第三个路径点八邻域内水平向右的像素点的亮差参数小于竖直向下的像素点的亮差参数，将第三个路径点八邻域内竖直向下的像素点记为第四个路径点；以此类推，若最新遍历获取的路径点与路径终止点处于同一水平线时，后续获取的路径点是前一个路径点八邻域内水平向右的像素点；若最新遍历获取的路径点与路径终止点处于同一竖直线时，后续获取的路径点是前一个路径点八邻域内竖直向下的像素点；以此类推，若最新遍历获取的路径点与路径终止点仍不处于同一水平线或竖直线，则继续根据亮差参数获取下一个路径点，直到最新遍历获取的路径点与路径终止点处于同一水平线或竖直线，按照上述方法获取后续的路径点，直至最新获取的路径点为路径终止点时停止遍历，将所有路径点所占的图像区域记为水平左侧起始点的干扰路径；此时，已经将路径起始点的水平左侧起始点作为第一个路径点，则第二个路径点的获取实际为根据路径方向获取的同时，避开路径起始点，即路径起始点的路径方向为右下方向，下一个路径点需要从八邻域内水平向右及竖直向下的两个像素点进行选取，若其中一个像素点为路径起始点，则选择另一个像素点作为下一个路径点；若两个像素点都不是路径起始点，则将两个像素点的亮差参数中最大的一个像素点作为下一个路径点，相等的情况选择水平向右的像素点；则对于路径起始点的水平右侧起始点、竖直上侧起始点及竖直下侧起始点分别作为第一个路径点的情况，都可以按照上述方法，根据路径方向对应的八邻域内两个像素点的亮差参数以及是否为路径起始点，进行下一个路径点的获取，直到最终得到三种情况下第一个起始点分别对应的干扰路径；将水平左侧起始点的干扰路径、水平右侧起始点的干扰路径、竖直上侧起始点的干扰路径以及竖直下侧起始点的干扰路径分别记为该路径方向为右下方向的路径起始点的一条外界干扰路径，则按照上述方法获取每个路径方向为右下方向的路径起始点的若干外界干扰路径。进一步的，对于路径方向为右上方向、左上方向或左下方向的路径起始点，按照上述方法获取路径起始点用于得到四条干扰路径的四个第一个路径点之后，对于右上方向，需要从八邻域内水平向右及竖直向上的两个像素点进行下一个路径点的选取；对于左上方向，需要从八邻域内水平向左及竖直向上的两个像素点进行下一个路径点的选取；对于左下方向，需要从八邻域内水平向左及竖直向下的两个像素点进行下一个路径点的选取；则按照上述方法，若待选取的两个像素点中存在路径起始点，则以不是路径起始点的像素点作为下一个路径点；若待选取的两个像素点中不存在路径起始点，则将两个像素点的亮差参数中最大的一个像素点作为下一个路径点，相等的情况选择水平方向上的像素点作为下一个路径点；则按照上述方法对于路径方向为右上方向、左上方向或左下方向的路径起始点，得到每个路径起始点的四种第一个路径点情况下对应的干扰路径，并将每个路径起始点的四条干扰路径作为每个路径起始点的外界干扰路径，则得到了每个塑料区域中每个路径起始点的若干外界干扰路径。至此，通过上述方法得到所有塑料区域内每个路径起始点的所有外界干扰路径。步骤S004：根据外界干扰路径以及亮差参数得到每条外界干扰路径的明暗阈值；根据明暗阈值对每个塑料区域内每个路径起始点进行还原得到每个还原塑料区域；根据还原塑料区域进行质量评估。具体的，以任意一个塑料区域内任意一个路径起始点的任意一条外界干扰路径为例，根据该塑料区域内每个像素点的亮差参数以及该外界干扰路径包含的路径点，得到该外界干扰路径的明暗阈值；其中该外界干扰路径的明暗阈值的计算方法为：式中，表示该外界干扰路径的明暗阈值；/＞表示超参数，本实施例预设/＞；表示该塑料区域内包含的像素点的数量；/＞表示该塑料区域内第/＞个像素点的亮差参数；/＞表示该塑料区域内所有像素点的亮差参数的最大值；/＞表示该塑料区域内所有像素点的亮差参数的最小值；/＞表示超参数，本实施例预设/＞，用于防止分母为0；/＞表示该外界干扰路径包含的路径点的数量；/＞表示该塑料区域内所有像素点的亮差参数的均值；/＞表示以自然常数为底的指数函数；实施例采用/＞函数来呈现反比例关系及归一化处理，实施者可根据实际情况选择反比例函数及归一化函数；/＞表示该塑料区域受到的外界影响程度；/＞用于将/＞归一化。若该外界干扰路径的明暗阈值越大，说明该外界干扰路径受到外界干扰影响的程度越大，反映该外界干扰路径越需要消除影响，消除力度越大。进一步的，根据该外界干扰路径的明暗阈值利用Retinex算法得到该外界干扰路径的相对明暗关系；获取该塑料区域内该路径起始点的所有外界干扰路径的相对明暗关系；其中明暗阈值作为Retinex算法的门限阈值，获取相邻明暗关系是Retinex算法的公知内容，本实施例不进行叙述。进一步的，根据该塑料区域内该路径起始点的所有外界干扰路径的相对明暗关系，对该路径起始点进行还原，具体方法为：式中，表示该路径起始点还原后的灰度值；/＞表示该塑料区域内路径终止点的灰度值；/＞表示该路径起始点所有外界干扰路径的相对明暗关系的均值。其中若该路径起始点还原后的灰度值越大，说明该路径起始点受到外界干扰影响的程度越大，反映该路径起始点越需要消除影响。进一步的，将该塑料区域内所有路径起始点进行还原，将还原后的塑料区域记为还原塑料区域，将每个还原塑料区域内所有像素点的灰度值的累加和记为每个还原塑料区域的初始均匀程度，对所有还原塑料区域的初始均匀程度进行线性归一化，将归一化后的初始均匀程度记为每个还原塑料区域的均匀程度。进一步的，预设一个均匀程度阈值T2，其中本实施例以T2=0.5为例进行叙述，本实施例不进行具体限定，其中T2可根据具体实施情况而定；若存在任意一个还原塑料区域的均匀程度大于均匀程度阈值T2，将该塑料灰度图像记为质量不合格的塑料灰度图像；若不存在任意一个还原塑料区域的均匀程度大于均匀程度阈值T2，不对该塑料灰度图像进行任何处理。获取所有质量不合格的塑料灰度图像。至此，通过上述方法得到所有质量不合格的塑料灰度图像。至此，本实施例完成。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
