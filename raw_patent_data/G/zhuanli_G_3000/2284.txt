标题title
无人机及其返航电量调整方法、装置、飞行控制器
摘要abst
本申请涉及无人机技术领域，公开了一种无人机及其返航电量调整方法、装置、飞行控制器，该无人机的返航电量调整方法，应用于飞行控制器，包括：获取无人机返航的预估电量；获取无人机飞行时的环境风速和环境风向；根据环境风速和环境风向，获取预估电量的调整系数；根据调整系数，调整预估电量，得到调整后的返航电量。通过根据环境风速和环境风向，获取无人机返航电量的调整系数，根据调整系数，调整无人机返航预估电量，本申请能够提高无人机返航电量预测的准确性。
权利要求书clms
1.一种无人机的返航电量调整方法，其特征在于，应用于飞行控制器，所述方法包括：获取无人机返航的预估电量；获取无人机飞行时的环境风速和环境风向；根据所述环境风速和环境风向，获取所述预估电量的调整系数；根据所述调整系数，调整所述预估电量，得到调整后的返航电量。2.根据权利要求1所述的方法，其特征在于，所述获取无人机返航的预估电量，包括：获取所述无人机的飞行离线数据，其中，所述飞行离线数据包括飞行高度和飞行距离；根据所述飞行离线数据，建立电池耗电模型；根据所述电池耗电模型，构建所述电池耗电模型的统计模型，其中，所述统计模型服从正态分布；根据所述统计模型，将所述统计模型的期望值确定为无人机返航的预估电量。3.根据权利要求1所述的方法，其特征在于，所述获取无人机飞行时的环境风速和环境风向，包括：获取所述无人机当前水平运动的加速度和油门指令，其中，所述油门指令包括油门大小；根据所述无人机当前水平运动的加速度、油门大小以及无人机当前飞行速度，得到无人机飞行时的环境风速和环境风向。4.根据权利要求1所述的方法，其特征在于，所述根据所述无人机当前水平运动的加速度、油门大小以及无人机当前飞行速度，得到无人机飞行时的环境风速和环境风向，具体包括：根据油门指令-推力模型，获取无人机的螺旋桨推力；根据所述螺旋桨推力，获取所述螺旋桨推力产生的运动加速度，包括：，其中，为螺旋桨推力产生的运动加速度，/＞为螺旋桨推力，/＞为无人机倾斜角的正弦值，/＞为无人机的质量；根据所述螺旋桨推力产生的运动加速度和所述无人机当前水平运动的加速度，确定气流作用于无人机所产生的加速度，包括：，其中，为气流作用于无人机所产生的加速度，/＞为无人机当前水平运动的加速度，/＞为螺旋桨推力产生的运动加速度；根据所述气流作用于无人机所产生的加速度，获取无人机飞行时的环境风速和环境风向。5.根据权利要求4所述的方法，其特征在于，所述根据所述气流作用于无人机所产生的加速度，获取无人机飞行时的环境风速和环境风向，包括：获取所述无人机的当前飞行速度，并结合气动阻力模型，得到气动阻力加速度；根据所述气流作用于无人机所产生的加速度和所述气动阻力加速度，获取无人机飞行时的环境风速和环境风向。6.根据权利要求1-4任一项所述的方法，其特征在于，当所述环境风向与所述无人机的返航方向相反时，则无人机返航电量的调整系数大于1；当所述环境风向与所述无人机的返航方向相同时，则无人机返航电量的调整系数小于1。7.根据权利要求1-4任一项所述的方法，其特征在于，所述根据所述调整系数，调整所述无人机返航预估电量，得到调整后的电量，包括：，其中，为调整后的电量，/＞为调整系数，/＞为无人机返航预估电量。8.一种无人机的返航电量调整装置，其特征在于，应用于飞行控制器，所述装置包括：获取单元，用于获取无人机返航的预估电量，以及，获取无人机飞行时的环境风速和环境风向；调整单元，用于根据所述环境风速和环境风向，获取所述预估电量的调整系数；根据所述调整系数，调整所述预估电量，得到调整后的返航电量。9.一种飞行控制器，其特征在于，包括：至少一个处理器；和与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行如权利要求1-7任一项所述的无人机的返航电量调整方法。10.一种无人机，其特征在于，包括：如权利要求9所述的飞行控制器。
说明书desc
技术领域本申请实施方式涉及无人机技术领域，特别是涉及一种无人机及其返航电量调整方法、装置、飞行控制器。背景技术无人机飞行过程中，依靠机载电池提供电力，供机载设备和动力系统正常工作。电池电量低时，触发响应低电保护，进行返航、迫降等动作。无人机的低电返航，是当机载电池电量低于某阈值后，无人机自动飞行至所设定返航点，同时尽量保证无人机到达返航点上空时，依然有一定电量进行安全降落等动作。在现有技术中，通常采用设置无人机返航电量阈值来确保无人机返航时具备充足电量，例如：设定固定阈值，如电量低于20%时触发低电返航；根据无人机离开返航点距离，预估无人机返航所需电量，根据此预估电量设定动态返航电量阈值；根据无人机离开返航点距离，同时结合无人机当前时刻所处环境风力状况，综合计算动态返航电量阈值。但无人机因飞行环境多变、高度多变等情况，现有技术的方案不能准确地预测无人机返航电量，以至于可能会出现回到返航点时依然留存很多电量或电量耗尽依然没有回到返航点的情况。发明内容本申请实施例提供一种无人机及其返航电量调整方法、装置、飞行控制器，通过根据环境风速和环境风向，获取无人机返航电量的调整系数，根据调整系数，调整无人机返航预估电量，以提高无人机返航电量预测的准确性。本申请实施例提供以下技术方案：第一方面，本申请实施例提供一种无人机的返航电量调整方法，应用于飞行控制器，该无人机的返航电量调整方法，包括：获取无人机返航的预估电量；获取无人机飞行时的环境风速和环境风向；根据环境风速和环境风向，获取预估电量的调整系数；根据调整系数，调整预估电量，得到调整后的返航电量。在一些实施例中，获取无人机返航的预估电量，包括：获取无人机的飞行离线数据，其中，飞行离线数据包括飞行高度和飞行距离；根据飞行离线数据，建立电池耗电模型；根据电池耗电模型，构建电池耗电模型的统计模型，其中，统计模型服从正态分布；根据统计模型，将统计模型的期望值确定为无人机返航的预估电量。在一些实施例中，获取无人机飞行时的环境风速和环境风向，包括：获取无人机当前水平运动的加速度和油门指令，其中，油门指令包括油门大小；根据无人机当前水平运动的加速度、油门大小以及无人机当前飞行速度，得到无人机飞行时的环境风速和环境风向。在一些实施例中，根据无人机当前水平运动的加速度、油门大小以及无人机当前飞行速度，得到无人机飞行时的环境风速和环境风向，具体包括：根据油门指令-推力模型，获取无人机的螺旋桨推力；根据螺旋桨推力，获取螺旋桨推力产生的运动加速度，包括：，其中，为螺旋桨推力产生的运动加速度，/＞为螺旋桨推力，/＞为无人机倾斜角的正弦值，/＞为无人机的质量；根据螺旋桨推力产生的运动加速度和无人机当前水平运动的加速度，确定气流作用于无人机所产生的加速度，包括：，其中，为气流作用于无人机所产生的加速度，/＞为无人机当前水平运动的加速度，/＞为螺旋桨推力产生的运动加速度；根据气流作用于无人机所产生的加速度，获取无人机飞行时的环境风速和环境风向。在一些实施例中，根据气流作用于无人机所产生的加速度，获取无人机飞行时的环境风速和环境风向，包括：获取无人机的当前飞行速度，并结合气动阻力模型，得到气动阻力加速度；根据气流作用于无人机所产生的加速度和气动阻力加速度，获取无人机飞行时的环境风速和环境风向。在一些实施例中，当环境风向与无人机的返航方向相反时，则无人机返航电量的调整系数大于1；当环境风向与无人机的返航方向相同时，则无人机返航电量的调整系数小于1。在一些实施例中，根据调整系数，调整无人机返航预估电量，得到调整后的电量，包括：，其中，为调整后的电量，/＞为调整系数，/＞为无人机返航预估电量。第二方面，本申请实施例提供一种无人机的返航电量调整装置，应用于飞行控制器，该装置：获取单元，用于获取无人机返航的预估电量，以及，获取无人机飞行时的环境风速和环境风向；调整单元，用于根据环境风速和环境风向，获取预估电量的调整系数；根据调整系数，调整预估电量，得到调整后的返航电量。第三方面，本申请实施例提供一种飞行控制器，包括：至少一个处理器；和与至少一个处理器通信连接的存储器；其中，存储器存储有可被至少一个处理器执行的指令，指令被至少一个处理器执行，以使至少一个处理器能够执行如第一方面的无人机的返航电量调整方法。第四方面，本申请实施例提供一种多旋翼无人机，包括：如第三方面的飞行控制器。本申请实施方式的有益效果是：区别于现有技术的情况，本申请实施方式提供一种无人机的返航电量调整方法，应用于飞行控制器，该无人机的返航电量调整方法，包括：获取无人机返航的预估电量；获取无人机飞行时的环境风速和环境风向；根据环境风速和环境风向，获取预估电量的调整系数；根据调整系数，调整预估电量，得到调整后的返航电量。通过根据环境风速和环境风向，获取无人机返航电量的调整系数，根据调整系数，调整无人机返航预估电量，本申请能够提高无人机返航电量预测的准确性。附图说明一个或多个实施例通过与之对应的附图进行示例性说明，这些示例性说明并不构成对实施例的限定，附图中具有相同参考数字标号的元件表示为类似的元件，除非有特别申明，附图中的图不构成比例限制。图1是本申请实施例提供的一种应用环境的示意图；图2是本申请实施例提供的一种无人机的返航电量调整方法的流程示意图；图3是图2中的步骤S201的细化流程示意图；图4是图2中的步骤S202的细化流程示意图；图5是图4中的步骤S222的细化流程示意图；图6是图5中的步骤S2204的细化流程示意图；图7是本申请实施例提供的一种无人机的返航电量调整装置的结构示意图；图8是本申请实施例提供的一种飞行控制器的结构示意图；图9是本申请实施例提供的一种无人机的结构示意图。附图标号说明：具体实施方式为了便于理解本申请，下面结合附图和具体实施方式，对本申请进行更详细的说明。需要说明的是，当元件被表述“固定于”另一个元件，它可以直接在另一个元件上、或者其间可以存在一个或多个居中的元件。当一个元件被表述“连接”另一个元件，它可以是直接连接到另一个元件、或者其间可以存在一个或多个居中的元件。本说明书所使用的术语“垂直的”、“水平的”、“左”、“右”以及类似的表述只是为了说明的目的。除非另有定义，本说明书所使用的所有的技术和科学术语与属于本申请的技术领域的技术人员通常理解的含义相同。本说明书中在本申请的说明书中所使用的术语只是为了描述具体的实施方式的目的，不是用于限制本申请。本说明书所使用的术语“和/或”包括一个或多个相关的所列项目的任意的和所有的组合。下面结合说明书附图具体阐述本申请的技术方案：请参阅图1，图1是本申请实施例提供的一种应用环境的示意图；如图1所示，该应用环境100，包括：无人机10、遥控器20，其中，无人机10与遥控器20通过网络通信连接，其中，该网络包括有线网络和/或无线网络。可以理解的是，该网络包括2G、3G、4G、5G、无线局域网、蓝牙等无线网络，也可以包括串口线、网线等有线网络。在本申请实施例中，该无人机10包括机身和动力系统、通信模块以及飞行控制器。需要注意的是，该无人机包括但不限于三轴多旋翼无人机、四轴多旋翼无人机、六轴多旋翼无人机、八轴多旋翼无人机。在本申请实施例中，以多旋翼无人机举例，多旋翼无人机，也称为多轴飞行器，其机身是多旋翼无人机的主要骨架，用于支撑和保护多旋翼无人机的内部结构，一般采用轻物料制造为主，以减轻无人机的负载量，其他零部件都需要按照机身的布局进行安装，其中，低速多旋翼无人机结构用材主要是木材、塑料、玻璃纤维或碳纤维复合材料蜂窝夹层结构，而高速度多旋翼无人机结构多以铝合金为主体材料，其余材料选用钛合金或碳纤维复合材料与先进制造工艺方式相适应的其他材料，以达到增加承载能力和减轻结构质量的目的。在本申请实施例中，无人机的动力系统用于为无人机提供动力，该动力系统包括螺旋桨、电机、电子调速器、动力电源，其中，螺旋桨为无人机产生推力的主要部件，以四旋翼无人机举例，四旋翼无人机配备四个螺旋桨，四旋翼无人机是依靠改变电机的转速，使螺旋桨产生上升的动力，即升力，当无人机四个螺旋桨的升力之和等于无人机总重量的时候，无人机的上升力与无人机的重量平衡，无人机就可以悬停在空中，而为了避免无人机不断自旋，四旋翼无人机的四个螺旋桨中，相邻的两个螺旋桨旋转方向设置为相反方向，例如，将两个螺旋桨设置为顺时针旋转，两个螺旋桨设置为逆时针旋转。无人机的电机，也称为马达，该电机用于将电能转化为机械能，带动螺旋桨旋转，从而产生推力。需要注意的是，该电机包括但不限于有刷电动机和无刷电动机。电机的技术指标很多，与无人机动力系统的特性最相关的两个技术指标是转速和功率，电机的转速一般用kV来表示，其中，kV指的是每伏特能达到的空载每分钟转速，例如，使用kV1000的电机，11.1V电池，电机转速是1000x11.1=11100，即每分钟11100转，也即每增加1V电机空载转速增加1000转。无人机的电子调速器用于根据控制信号调节电动机的转速，还用于为遥控接收器上其他通道的舵机供电以及将电池提供的直流电转换为可直接驱动电机的三相交流电。无人机的动力电源用于为无人机提供电能，该动力电源直接关系到无人机的悬停时长、最大负载重量和飞行距离等重要指标，通常采用化学电池作为无人机的动力电源，需要注意的是，该动力电源包括但不限于镍氢电池、镍铬电池、锂聚合物电池、锂离子动力电池。在本申请实施例中，无人机的通信模块包括遥控器接收器，通信连接遥控器中的遥控器发射器，用于传输数据，例如：接收遥控器发射器发送的讯号或指令；或者，向遥控器发射器发送数据，例如：向遥控器发射器发送讯号的反馈信息，以四旋翼无人机举例，需要通过四条频道传送遥控器发射器发射的讯号，以便分别控制前后左右四组悬轴和电机。在本申请实施例中，通信模块可以实现与因特网、互联网的通信，其中，通信模块还包括但不限于WIFI模块、ZigBee模块、NB_IoT模块、4G模块、5G模块、蓝牙模块等通信单元。在本申请实施例中，飞行控制器设置于无人机的内部，又称为飞行管理和控制系统，控制器作为无人机的控制核心，用于控制无人机飞行以及返航，该飞行控制器包括主控单元、惯性测量单元、GPS指南针模块，以实现无人机数据传输的可靠性和精确度。其中，主控单元为飞行控制器的核心单元，用于实现自主飞行和数据记录；惯性测量单元包括陀螺仪、加速度计、地磁传感器以及气压计，惯性测量单元是测量物体三轴姿态角以及加速度的装置。一般的，一个IMU包含了三个单轴的加速度计和三个单轴的陀螺仪，加速度计检测物体在载体坐标系统独立三轴的加速度信号，而陀螺仪的检测载体相对于导航坐标系的角速度信号，测量无人机在三维空间中的角速度和加速度，并以此解算出无人机的姿态，例如，解算出无人机的倾斜角；GPS指南针模块用于导航和定位。在本申请实施例中，飞行控制器可以为通用处理器、数字信号处理器、专用集成电路、现场可编程门阵列、单片机、ARM或其它可编程逻辑器件、分立门或晶体管逻辑、分立的硬件组件或者这些部件的任何组合。飞行控制器还可以是任何传统处理器、控制器、微控制器或状态机。飞行控制器也可以被实现为计算设备的组合，例如，DSP和微处理器的组合、多个微处理器、一个或多个微处理器结合DSP和/或任何其它这种配置，或者微控制单元、现场可编程门阵列、系统级芯片中的一种或多种组合。可以理解的是，本申请实施例中的飞行控制器还包括存储模块，存储模块包括但不限于：FLASH闪存、NAND闪存、垂直NAND闪存、NOR闪存、电阻随机存取存储器、磁阻随机存取存储器、铁电随机存取存储器、自旋转移扭矩随机存取存储器等设备中的一种或多种。在本申请实施例中，该遥控器20包括手柄、遥控器发射器、电源，用于控制无人机飞行以及返航。其的工作原理是通过遥控信号的传输来实现对无人机的控制。其中，手柄为遥控器的主体，包括控制杆、按钮、开关等组件，通过手柄来操控无人机的飞行方向、高度、速度等参数；遥控器发射器是一种用于发射无线遥控信号的装置，一般由天线、电路板、调制电路等组件构成，遥控器发射器将手柄产生的控制信号转化为无线信号，并通过天线将信号发射至遥控器接收器，以实现对无人机的控制；电源用于为遥控器提供电能，该电源包括但不限于镍氢电池、镍铬电池、锂聚合物电池、锂离子动力电池。请参阅图2，图2是本申请实施例提供的一种无人机的返航电量调整方法的流程示意图；其中，该无人机的返航电量调整方法，应用于飞行控制器，具体的，该无人机的返航电量调整方法的执行主体为飞行控制器的一个或至少两个处理器。如图2所示，无人机的返航电量调整方法，包括：步骤S201：获取无人机返航的预估电量；请再参阅图3，图3是图2中的步骤S201的细化流程示意图；如图3所示，步骤S201：获取无人机返航的预估电量，包括：步骤S2011：获取无人机的飞行离线数据；具体的，针对同一型号的无人机电池，在不同环境下进行大量测试飞行，该不同环境涵盖不同的飞行高度及顺逆风场景，获取无人机的飞行离线数据，其中，飞行离线数据除了包括飞行高度、飞行距离之外，还包括飞行距离对应的电池耗电量。步骤S2012：根据飞行离线数据，建立电池耗电模型；具体的，根据飞行离线数据，将大量无人机的飞行离线数据采用最小二乘法进行拟合，得到与无人机飞行高度相关的电池耗电模型，如下式：，其中，为无人机飞行单位距离所需电量，/＞为飞行高度，/＞、/＞为电池耗电模型的模型参数，该模型参数由飞行离线数据拟合得到，/＞为无人机电池总电量，/＞为飞行距离，模型参数由飞行离线数据拟合过程中由最小二乘法计算得到，在本申请实施例中，该电池耗电模型可取10至20m的飞行高度间隔，单位距离为1m，如无人机飞行高度80m时，每米耗电量百分比为0.02%，即/＞=80，/＞=0.02；无人机飞行高度100m时，每米耗电量百分比为0.01%，即/＞=100，/＞=0.01。需要注意的是，该电池耗电模型是由实际情况下的飞行离线数据拟合而成的模型，由于飞行离线数据会随着实际情况发生变化，具有多变性，经飞行离线数据拟合出的模型不一定是线性模型或者其他具有数学解析式的模型，所以该电池耗电模型不一定存在明确的数学解析式，电池耗电模型可以理解为在不同飞行高度下，无人机飞行单位距离所需电量/＞取不同值的模型，电池耗电模型实际上表示飞行高度/＞和无人机飞行单位距离所需电量/＞之间的输入和输出关系，该电池耗电模型可以是具有数学解析式的模型，例如，，也可以是其他能够根据无人机飞行高度得到无人机飞行单位距离所需电量的模型，本申请对此不做限定。步骤S2013：根据电池耗电模型，构建电池耗电模型的统计模型；具体的，根据电池耗电模型，结合飞行离线数据，计算无人机飞行单位距离所需电量的期望值和方差，得到电池耗电模型的统计模型，该统计模型服从正态分布，如下式：，其中，为电池耗电模型，/＞为电池耗电模型的统计模型，/＞为统计模型的期望值，/＞为统计模型的方差。步骤S2014：根据统计模型，将统计模型的期望值确定为无人机返航的预估电量；具体的，统计模型的期望值代表电池耗电的平均值，根据统计模型，将统计模型的期望值确定为无人机返航的预估电量。在本申请实施例中，该无人机返航的预估电量并非无人机返航的准确电量，需要进一步根据无人机飞行时的环境风速和环境风向进行实时调整。步骤S202：获取无人机飞行时的环境风速和环境风向；请再参阅图4，图4是图2中的步骤S202的细化流程示意图；如图4所示，步骤S202：获取无人机飞行时的环境风速和环境风向，包括：步骤S221：获取无人机当前水平运动的加速度和油门指令；具体的，无人机包括惯性测量单元，惯性测量单元内部包括3轴陀螺仪和3轴加速度计，通过惯性测量单元获取无人机当前水平运动的加速度，并获取油门指令，其中，油门指令为飞行控制器发送给动力系统的脉冲宽度调制指令。步骤S222：根据无人机当前水平运动的加速度、油门大小以及无人机当前飞行速度，得到无人机飞行时的环境风速和环境风向；请再参阅图5，图5是图2中的步骤S222的细化流程示意图；如图5所示，步骤S222：根据无人机当前水平运动的加速度、油门大小以及无人机当前飞行速度，得到无人机飞行时的环境风速和环境风向，包括：步骤S2201：根据油门指令-推力模型，获取无人机的螺旋桨推力；具体的，获取无人机发动机的离线台架试验数据，该离线台架试验数据包括大量油门指令和油门指令对应产生的螺旋桨推力数据，采用最小二乘法拟合油门指令和油门指令对应产生的螺旋桨推力数据得到油门指令-推力模型，该油门指令-推力模型为油门大小和螺旋桨推力之间的映射关系，该映射关系呈线性关系，当油门大小越大时，对应产生的螺旋桨推力越大，从而根据油门大小，获取该油门大小对应的无人机的螺旋桨推力。步骤S2202：根据螺旋桨推力，获取螺旋桨推力产生的运动加速度；具体的，获取无人机的质量，以及通过惯性测量单元获取无人机倾斜角的正弦值，根据螺旋桨推力，获取螺旋桨推力产生的运动加速度，如下式：，其中，为螺旋桨推力产生的运动加速度，/＞为螺旋桨推力，/＞为无人机倾斜角的正弦值，/＞为无人机的质量。需要注意的是，由于螺旋桨推力产生的运动加速度为矢量，所以该螺旋桨推力产生的运动加速度包括加速度的大小以及方向。步骤S2203：根据螺旋桨推力产生的运动加速度和无人机当前水平运动的加速度，确定气流作用于无人机所产生的加速度；具体的，由于无人机在飞行过程中会受到气流作用，所以无人机当前水平运动的加速度不等于螺旋桨推力产生的运动加速度。将螺旋桨推力产生的运动加速度和无人机当前水平运动的加速度作差，即可确定气流作用于无人机所产生的加速度，如下式：，其中，为气流作用于无人机所产生的加速度，/＞为无人机当前水平运动的加速度，/＞为螺旋桨推力产生的运动加速度。需要注意的是，由于气流作用于无人机所产生的加速度为矢量，所以该气流作用于无人机所产生的加速度包括加速度的大小以及方向。步骤S2204：根据气流作用于无人机所产生的加速度，获取无人机飞行时的环境风速和环境风向；请再参阅图6，图6是图5中的步骤S2204的细化流程示意图；如图6所示，步骤S2204：根据气流作用于无人机所产生的加速度，获取无人机飞行时的环境风速和环境风向，包括：步骤S2241：获取无人机的当前飞行速度，并结合气动阻力模型，得到气动阻力加速度；具体的，通过飞行控制器获取无人机的当前飞行速度，并结合气动阻力模型，得到气动阻力加速度，其中，气动阻力模型是与无人机的当前飞行速度相关的模型，气动阻力模型包括：，其中，为气动阻力加速度，/＞为速度系数，/＞是由空气的密度、无人机的形状以及无人机的体积决定的一个常数，/＞为无人机的当前飞行速度，/＞为无人机倾斜角的正弦值，/＞为无人机的质量。需要注意的是，该气动阻力模型可以是，也可以是其他能够计算气动阻力加速度的模型，本申请对此不做限定。步骤S2242：根据气流作用于无人机所产生的加速度和气动阻力加速度，获取无人机飞行时的环境风速和环境风向；具体的，气动阻力包括无人机受到气流的推力或阻力，将气流作用于无人机所产生的加速度和气动阻力加速度作差，即可获取无人机飞行时的环境风的加速度，如下式：，其中，为无人机飞行时的环境风的加速度，/＞为气流作用于无人机所产生的加速度，/＞为气动阻力加速度。获取无人机飞行时的环境风的加速度之后，利用如下公式获取环境风速：，其中，为环境风速，/＞为无人机飞行时的环境风的加速度，/＞为单位时间，例如，/＞=1s。由于环境风的加速度是矢量，所以由环境风的加速度方向可以得到无人机飞行时的环境风向。可以理解的是，当环境风的方向与无人机当前飞行方向相同时，无人机受到环境风的推力，为负值；当环境风的方向与无人机当前飞行方向相反时，无人机受到环境风的阻力，/＞为正值。步骤S203：根据环境风速和环境风向，获取预估电量的调整系数；具体的，在步骤S201中获取的无人机返航的预估电量需要根据实际情况中的环境风速和环境风向进行实时调整，此时则需要确定预估电量的调整系数，该调整系数的选取由环境风速大小决定，例如，假设无人机在无风情况下每飞行1m的耗电量为0.02，当环境风向与无人机返航方向相反时，即逆风，环境风速为4m/s，则取调整系数为1.4；当环境风向与无人机返航方向相反时，即逆风，环境风速为8m/s，则取调整系数为1.8。可以理解的是，当环境风向与无人机返航方向相反时，无人机需要克服风力带来的阻力，因此，无人机返航电量的调整系数大于1；当环境风向与无人机返航方向相同时，则无人机返航电量的调整系数小于1。步骤S204：根据调整系数，调整预估电量，得到调整后的返航电量；具体的，根据调整系数，将调整系数与预估电量相乘，以调整预估电量，得到调整后的返航电量，调整公式如下：，其中，为调整后的电量，/＞为调整系数，/＞为无人机返航预估电量。在本申请实施例中，若无人机返航时环境风向为逆风，k＞1，则表示无人机返航过程中单位距离耗电升高；若无人机返航时环境风向为逆风，k＜1，则表示无人机在返航过程中单位距离耗电降低。调整系数的选取根据环境风速大小决定，风速越大，调整系数越大，例如，调整系数的取值区间为，需要注意的是，不同机型的无人机的调整系数区间不同，调整系数的取值区间需要根据无人机的机型确定。可以理解的是，在实际情况中，当环境风速和环境风向发生改变时，调整系数也会发生改变，从而实时调整预估电量。综上，在本申请实施例中，实时调整预估电量的方式包括如下两种：根据实际情况，更新电池耗电模型以及电池耗电模型的统计模型，即将大量新获取的离线数据拟合成新的电池耗电模型以及电池耗电模型的统计模型，并将新的模型参数传入飞行控制器。根据环境风速和环境风向，获取预估电量的调整系数；根据调整系数，调整预估电量，得到调整后的返航电量，例如，在不同高度情况下，无人机耗电情况不同，通常飞行高度越高，环境风速越大，则无人机耗电量增加，当环境风速增加时，无人机的飞行控制器会调整无人机返航所需的预估电量。在本申请实施例中，通过提供一种无人机的返航电量调整方法，应用于飞行控制器，该无人机的返航电量调整方法，包括：获取无人机返航的预估电量；获取无人机飞行时的环境风速和环境风向；根据环境风速和环境风向，获取预估电量的调整系数；根据调整系数，调整预估电量，得到调整后的返航电量。通过根据环境风速和环境风向，获取无人机返航电量的调整系数，根据调整系数，调整无人机返航预估电量，本申请能够提高无人机返航电量预测的准确性。请再参阅图7，图7是本申请实施例提供的一种无人机的返航电量调整装置的结构示意图；其中，该无人机的返航电量调整装置，应用于飞行控制器，具体的，该无人机的返航电量调整装置应用于飞行控制器的一个或多个处理器。如图7所示，该无人机的返航电量调整装置70，包括：获取单元701，用于获取无人机返航的预估电量；获取无人机飞行时的环境风速和环境风向；调整单元702，用于根据环境风速和环境风向，获取预估电量的调整系数；根据调整系数，调整预估电量，得到调整后的返航电量。在本申请实施例中，该获取单元701具体用于：获取无人机的飞行离线数据，其中，飞行离线数据包括飞行高度、飞行距离和飞行单位距离所需电量；根据飞行离线数据，建立电池耗电模型；根据电池耗电模型，构建电池耗电模型的统计模型，其中，统计模型服从正态分布；根据统计模型，将统计模型的期望值确定为无人机返航的预估电量；获取无人机当前水平运动的加速度和油门指令，其中，油门指令包括油门大小；根据无人机当前水平运动的加速度、油门大小以及无人机当前飞行速度，得到无人机飞行时的环境风速和环境风向。在本申请实施例中，该调整单元702具体用于：根据调整系数，调整无人机返航预估电量，得到调整后的电量，包括：，其中，为调整后的电量，/＞为调整系数，/＞为无人机返航预估电量。在本申请实施例中，该无人机的返航电量调整装置亦可以由硬件器件搭建成的，例如，无人机的返航电量调整装置可以由一个或两个以上的芯片搭建而成，各个芯片可以互相协调工作，以完成上述各个实施例所阐述的无人机的返航电量调整方法。再例如，无人机的返航电量调整装置还可以由各类逻辑器件搭建而成，诸如由通用处理器、数字信号处理器、专用集成电路、现场可编程门阵列、单片机、ARM或其它可编程逻辑器件、分立门或晶体管逻辑、分立的硬件组件或者这些部件的任何组合而搭建成。本申请实施例中的无人机的返航电量调整装置可以是装置，也可以是终端中的部件、集成电路、或芯片。该装置可以是移动电子设备，也可以为非移动电子设备。示例性的，移动电子设备可以为手机、平板电脑、笔记本电脑、掌上电脑、车载电子设备、可穿戴设备、超级移动个人计算机、上网本或者个人数字助理等，非移动电子设备可以为服务器、网络附属存储器、个人计算机、电视机、柜员机或者自助机等，本申请实施例不作具体限定。本申请实施例中的无人机的返航电量调整装置可以为具有操作系统的装置。该操作系统可以为安卓操作系统，可以为ios操作系统，还可以为其他可能的操作系统，本申请实施例不作具体限定。本申请实施例提供的无人机的返航电量调整装置能够实现图2实现的各个过程，为避免重复，这里不再赘述。需要说明的是，上述无人机的返航电量调整装置可执行本申请实施例所提供的无人机的返航电量调整方法，具备执行方法相应的功能模块和有益效果。未在无人机的返航电量调整装置实施例中详尽描述的技术细节，可参考上述实施例所提供的无人机的返航电量调整方法。在本申请实施例中，通过提供一种无人机的返航电量调整装置，包括：获取单元，用于获取无人机返航的预估电量；获取无人机飞行时的环境风速和环境风向；调整单元，用于根据环境风速和环境风向，获取预估电量的调整系数；根据调整系数，调整预估电量，得到调整后的返航电量，本申请能够根据环境风速和环境风向，获取无人机返航电量的调整系数，根据调整系数，调整无人机返航预估电量，从而提高无人机返航电量预测的准确性。请再参阅图8，图8是本申请实施例提供的一种飞行控制器的结构示意图；如图8所示，该飞行控制器80包括一个或多个处理器801以及存储器802。其中，图8中以一个处理器801为例。处理器801和存储器802可以通过总线或者其他方式连接，图8中以通过总线连接为例。处理器801，用于提供计算和控制能力，以控制飞行控制器80执行相应任务，例如，控制飞行控制器80执行上述任一方法实施例中的无人机的返航电量调整方法，包括：获取无人机返航的预估电量；获取无人机飞行时的环境风速和环境风向；根据环境风速和环境风向，获取预估电量的调整系数；根据调整系数，调整预估电量，得到调整后的返航电量。通过根据环境风速和环境风向，获取无人机返航电量的调整系数，根据调整系数，调整无人机返航预估电量，本申请能够提高无人机返航电量预测的准确性。处理器801可以是通用处理器，包括中央处理器、网络处理器、硬件芯片或者其任意组合；还可以是数字信号处理器、专用集成电路、可编程逻辑器件或其组合。上述PLD可以是复杂可编程逻辑器件，现场可编程逻辑门阵列，通用阵列逻辑或其任意组合。存储器802作为一种非暂态计算机可读存储介质，可用于存储非暂态软件程序、非暂态性计算机可执行程序以及模块，如本申请实施例中的无人机的返航电量调整方法对应的程序指令/模块。处理器801通过运行存储在存储器802中的非暂态软件程序、指令以及模块，可以实现下述任一方法实施例中的无人机的返航电量调整方法。具体地，存储器802可以包括易失性存储器，例如随机存取存储器；存储器802也可以包括非易失性存储器，例如只读存储器，快闪存储器，硬盘或固态硬盘或其他非暂态固态存储器件；存储器802还可以包括上述种类的存储器的组合。存储器802可以包括高速随机存取存储器，还可以包括非易失性存储器，例如至少一个磁盘存储器件、闪存器件、或其他非易失性固态存储器件。在一些实施例中，存储器802可选包括相对于处理器801远程设置的存储器，这些远程存储器可以通过网络连接至处理器801。上述网络的实例包括但不限于互联网、企业内部网、局域网、移动通信网及其组合。一个或者多个模块存储在存储器802中，当被一个或者多个处理器801执行时，执行上述任意方法实施例中的无人机的返航电量调整方法，例如，执行以上描述的图2所示的各个步骤；也可实现图7的各个模块或单元的功能。在本申请实施例中，飞行控制器80还可以具有有线或无线网络接口、键盘以及输入输出接口等部件，以便进行输入输出，飞行控制器80还可以包括其他用于实现设备功能的部件，在此不做赘述。请再参阅图9，图9是本申请实施例提供的一种无人机的结构示意图；如图9所示，该无人机10包括动力系统101、通信模块102以及飞行控制器80。需要注意的是，该无人机包括但不限于三轴多旋翼无人机、四轴多旋翼无人机、六轴多旋翼无人机、八轴多旋翼无人机。在本申请实施例中，动力系统101用于为多旋翼无人机提供动力，该动力系统101包括螺旋桨、电机、电子调速器、动力电源，其中，螺旋桨为多旋翼无人机产生推力的主要部件，以四旋翼无人机举例，四旋翼无人机配备四个螺旋桨，四旋翼无人机是依靠改变电机的转速，使螺旋桨产生上升的动力，即升力，当无人机四个螺旋桨的升力之和等于无人机总重量的时候，无人机的上升力与无人机的重量平衡，无人机就可以悬停在空中，而为了避免无人机不断自旋，四旋翼无人机的四个螺旋桨中，相邻的两个螺旋桨旋转方向设置为相反方向，例如，将两个螺旋桨设置为顺时针旋转，两个螺旋桨设置为逆时针旋转。电机，也称为马达，该电机用于将电能转化为机械能，带动螺旋桨旋转，从而产生推力。需要注意的是，该电机包括但不限于有刷电动机和无刷电动机。电机的技术指标很多，与无人机动力系统的特性最相关的两个技术指标是转速和功率，电机的转速一般用kV来表示，其中，kV指的是每伏特能达到的空载每分钟转速，例如，使用kV1000的电机，11.1V电池，电机转速是1000x11.1=11100，即每分钟11100转，也即每增加1V电机空载转速增加1000转。电子调速器用于根据控制信号调节电动机的转速，还用于为遥控接收器上其他通道的舵机供电以及将电池提供的直流电转换为可直接驱动电机的三相交流电。动力电源用于为无人机提供电能，该动力电源直接关系到无人机的悬停时长、最大负载重量和飞行距离等重要指标，通常采用化学电池作为无人机的动力电源，需要注意的是，该动力电源包括但不限于镍氢电池、镍铬电池、锂聚合物电池、锂离子动力电池。在本申请实施例中，通信模块102包括遥控器接收器，通信连接遥控器中的遥控器发射器，用于传输数据，例如：接收遥控器发射器发送的讯号或指令；或者，向遥控器发射器发送数据，例如：向遥控器发射器发送讯号的反馈信息，以四旋翼无人机举例，需要通过四条频道传送遥控器发射器发射的讯号，以便分别控制前后左右四组悬轴和电机。在本申请实施例中，通信模块可以实现与因特网、互联网的通信，其中，通信模块还包括但不限于WIFI模块、ZigBee模块、NB_IoT模块、4G模块、5G模块、蓝牙模块等通信单元。在本申请实施例中，飞行控制器80设置于无人机10的内部，又称为飞行管理和控制系统，控制器作为无人机的控制核心，用于控制无人机飞行以及返航，该飞行控制器80包括主控单元、惯性测量单元、GPS指南针模块，以实现无人机数据传输的可靠性和精确度。其中，主控单元为飞行控制器的核心单元，用于实现自主飞行和数据记录；惯性测量单元包括陀螺仪、加速度计、地磁传感器以及气压计，惯性测量单元是测量物体三轴姿态角以及加速度的装置。一般的，一个IMU包含三个单轴的加速度计和三个单轴的陀螺仪，加速度计检测物体在载体坐标系统独立三轴的加速度信号，而陀螺仪的检测载体相对于导航坐标系的角速度信号，测量无人机在三维空间中的角速度和加速度，并以此解算出无人机的姿态，例如，解算出无人机的倾斜角；GPS指南针模块用于导航和定位。在本申请实施例中，飞行控制器可以为通用处理器、数字信号处理器、专用集成电路、现场可编程门阵列、单片机、ARM或其它可编程逻辑器件、分立门或晶体管逻辑、分立的硬件组件或者这些部件的任何组合。飞行控制器还可以是任何传统处理器、控制器、微控制器或状态机。飞行控制器也可以被实现为计算设备的组合，例如，DSP和微处理器的组合、多个微处理器、一个或多个微处理器结合DSP和/或任何其它这种配置，或者微控制单元、现场可编程门阵列、系统级芯片中的一种或多种组合。可以理解的是，本申请实施例中的飞行控制器还包括存储模块，存储模块包括但不限于：FLASH闪存、NAND闪存、垂直NAND闪存、NOR闪存、电阻随机存取存储器、磁阻随机存取存储器、铁电随机存取存储器、自旋转移扭矩随机存取存储器等设备中的一种或多种。本申请实施例还提供了一种计算机可读存储介质，例如包括程序代码的存储器，上述程序代码可由处理器执行以完成上述实施例中的无人机的返航电量调整方法。例如，该计算机可读存储介质可以是只读存储器、随机存取存储器、只读光盘、磁带、软盘和光数据存储设备等。本申请实施例还提供了一种计算机程序产品，该计算机程序产品包括一条或多条程序代码，该程序代码存储在计算机可读存储介质中。电子设备的处理器从计算机可读存储介质读取该程序代码，处理器执行该程序代码，以完成上述实施例中提供的无人机的返航电量调整方法的方法步骤。本领域普通技术人员可以理解实现上述实施例的全部或部分步骤可以通过硬件来完成，也可以通过程序来程序代码相关的硬件完成，该程序可以存储于一种计算机可读存储介质中，上述提到的存储介质可以是只读存储器，磁盘或光盘等。通过以上的实施方式的描述，本领域普通技术人员可以清楚地了解到各实施方式可借助软件加通用硬件平台的方式来实现，当然也可以通过硬件。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程是可以通过计算机程序来指令相关的硬件来完成，程序可存储于一计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，存储介质可为磁碟、光盘、只读存储记忆体或随机存储记忆体等。最后应说明的是：以上实施例仅用以说明本申请的技术方案，而非对其限制；在本申请的思路下，以上实施例或者不同实施例中的技术特征之间也可以进行组合，步骤可以以任意顺序实现，并存在如上述的本申请的不同方面的许多其它变化，为了简明，它们没有在细节中提供；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的范围。
