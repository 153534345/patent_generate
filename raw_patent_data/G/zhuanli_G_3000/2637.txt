标题title
一种微生物发酵自动控制系统
摘要abst
本发明涉及数据处理技术领域，提出了一种微生物发酵自动控制系统，包括：获取发酵罐的温度时序数据构成温度曲线，得到若干目标曲线段；选择第一温度曲线和第一目标曲线段，得到第一目标曲线段的数据点与其余目标曲线段的数据点的距离参数；根据距离参数对第一目标曲线段与其余目标曲线段进行最短路径匹配，得到匹配结果，根据匹配结果得到发酵罐在第一目标曲线段时序上的净热量；对于第一目标曲线段进行聚类，得到聚簇；得到调节量的补偿量；根据调节量的补偿量对发酵罐热量进行调节补偿，完成对微生物发酵的控制。本发明加入曲线段的成分信息作为距离参数，解决了路径不均的问题，通过历史数据进行补偿，使微生物发酵温度调节更为稳定。
权利要求书clms
1.一种微生物发酵自动控制系统，其特征在于，该系统包括以下模块：温度数据采集模块，获取发酵罐不同位置的温度时序数据；距离参数获取模块，将发酵罐每个位置的温度时序数据构成一条温度曲线并在温度曲线中得到目标曲线段；以发酵罐内平均温度最高的一条温度曲线为主，记为第一温度曲线，第一温度曲线中的目标曲线段记为第一目标曲线段，将第一目标曲线段与其余温度曲线的目标曲线段逐个进行匹配，根据第一目标曲线段与其余目标曲线段的最大温度值、最小温度值以及曲线段上每个数据点的温度值和时间得到第一目标曲线段的成分参数，根据任意两条目标曲线段的每个数据点的成分参数的差异、时间的差异、温度的差异得到数据点的距离参数；温度调节量的补偿量获取模块，根据距离参数对第一目标曲线段与其余目标曲线段进行最短路径匹配，得到路径点，根据路径点的分布、路径点的数量和距离参数建立目标函数对最短路径进行限定并得到第一目标曲线段与其余目标曲线段的匹配结果，根据匹配结果得到发酵罐在第一目标曲线段时序上的净热量；获取历史温度数据，对于历史温度数据中的第一目标曲线段进行聚类，得到聚簇；根据聚簇内所有第一目标曲线段以及对应的匹配目标曲线段得到调节量的补偿量；最终控制模块，根据调节量的补偿量对发酵罐热量控制进行调节补偿，完成对微生物发酵的控制。2.根据权利要求1所述的一种微生物发酵自动控制系统，其特征在于，所述在温度曲线中得到目标曲线段的方法为：统计温度曲线趋势单调递增然后单调递减的上弧线曲线段，将上弧线曲线段的两侧端点记为趋势变化节点，相邻趋势变化节点中间的曲线段作为趋势变化节点。3.根据权利要求1所述的一种微生物发酵自动控制系统，其特征在于，所述根据第一目标曲线段与其余目标曲线段的最大温度值、最小温度值以及曲线段上每个数据点的温度值和时间得到第一目标曲线段的成分参数，根据任意两条目标曲线段的每个数据点的成分参数的差异、时间的差异、温度的差异得到数据点的距离参数的方法为：式中，i表示目标曲线段内的第i个数据点，表示目标曲线段内第i个数据点的温度值，/＞表示目标曲线段内第i个数据点的采集时间，/＞表示目标曲线段内最小的温度值，/＞表示目标曲线段内最大的温度值，/＞表示目标曲线段内第i+1个数据点的温度值，/＞表示目标曲线段内第i+1个数据点的采集时间，/＞为第i个数据点的成分参数，为传感器A的目标曲线段a上的第i个数据点的温度值，/＞为传感器B的目标曲线段b上的第r个数据点的温度值，/＞为传感器A的目标曲线段a上的第i个数据点的时间，/＞为传感器B的目标曲线段b上的第r个数据点的时间，/＞为传感器A的目标曲线段a上的第i个数据点的成分参数，/＞为传感器B的目标曲线段b上的第r个数据点的成分参数，/＞表示传感器A的目标曲线段a上的第i个数据点与传感器B的目标曲线段b上的第r个数据点的距离参数。4.根据权利要求1所述的一种微生物发酵自动控制系统，其特征在于，所述路径点为匹配时获取的路径图中最短路径经过的数据点。5.根据权利要求1所述的一种微生物发酵自动控制系统，其特征在于，所述根据路径点的分布、路径点的数量和距离参数建立目标函数对最短路径进行限定的方法为：式中，I为A传感器信号中第a个目标曲线段的数据点个数，代表在DTW路径图中第i列中的路径点个数，/＞代表所有列中平均路径点个数，/＞为路径点在每列中分布的方差，/＞代表A传感器信号中第a个目标曲线段内数据点数量，/＞代表B传感器信号中第b个目标曲线段内采样点数量，/＞为目标曲线段a中第i个采样点，/＞为目标曲线段b中第r个采样点，W代表a、b目标曲线段数据点匹配组的数量，/＞为目标函数，min为最小值函数。6.根据权利要求1所述的一种微生物发酵自动控制系统，其特征在于，所述对于历史温度数据中的第一目标曲线段进行聚类，得到聚簇的方法为：对所有第一目标曲线段进行K-means聚类，获得所有聚簇，聚类所使用的聚类距离为；令y1为任意第一目标曲线段的最大幅值波动差值， /＞，y2为波动持续时间差值， /＞，其中，/＞为任意第一目标曲线段的温度最大值，/＞为任意第一目标曲线段的温度最小值，/＞为任意第一目标曲线段右侧的趋势变化节点的时间值，/＞为任意第一目标曲线段左侧的趋势变化节点的时间值，将每条第一目标曲线段由表示，根据最大幅值波动差值和波动持续时间差值计算聚类距离/＞，公式如下：式中，表示第a1条第一目标曲线段的最大幅值波动差值/＞，/＞表示第a2条目标曲线段的最大幅值波动差值/＞，/＞表示第a1条第一目标曲线段的波动持续时间差值y2，/＞表示第a2条第一目标曲线段的波动持续时间差值y2，/＞表示聚类距离。7.根据权利要求1所述的一种微生物发酵自动控制系统，其特征在于，所述根据聚簇内所有第一目标曲线段以及对应的匹配目标曲线段得到调节量的补偿量的方法为：对于聚簇中的每个第一目标曲线段，将与第一目标曲线段匹配的目标曲线段记为匹配目标曲线段，第一目标曲线段的每个数据点与匹配目标曲线段的匹配数据点的温度作差，得到净热量，在每个第一目标曲线段中得到最大净热量以及右侧趋势变化节点处的净热量，所有第一目标曲线段中的最大净热量与右侧趋势变化节点处的净热量的差值的均值作为调节量的补偿量。
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及一种微生物发酵自动控制系统。背景技术生物发酵项目的自动化生产不仅提高了车间生产效率且保证了产品高质量，其中发酵工艺是决定整个发酵生产过程成败的关键，也是整个生产工艺中最复杂最易受到污染的阶段。所以在生产前要将发酵罐及其工艺管路进行清洗和灭菌，在罐内加入培养基后再进行灭菌，在灭菌结束的同时要启动罐压力、温度、溶氧的控制，以确保罐内的无菌性。这些工艺参数不仅会影响发酵的效率，而且有时候还决定着菌体产物的合成方向。其中微生物的生长随着温度的上升而繁殖加快，但同时酶失活的速度也加快，菌体提前衰老，发酵周期变短，不利于发酵生产。微生物受高温伤害大于低温伤害，因此一旦发酵罐内超过最高温度，微生物很快死亡。在实际生产过程中，罐内温度变化相当复杂，包括微生物产热、搅拌热、显热等，对于通过传统温度传感器数据反馈来调节温度参数时，由于发酵温度存在延后性，常常会引发一系列微生物发酵的连锁反应，导致调节后的实际温度比理想值更高，传统DTW仅是基于时序长短不同的曲线上数据点之间的最短欧式距离进行匹配，这样的匹配会无视曲线的趋势，欧式距离较小的部分匹配组密集，这导致匹配结果失真。发明内容本发明提供一种微生物发酵自动控制系统，以解决现有的温度变化复杂，调节温度不精确的问题，所采用的技术方案具体如下：本发明一个实施例提供了一种微生物发酵自动控制系统，该系统包括以下模块：温度数据采集模块，获取发酵罐不同位置的温度时序数据；距离参数获取模块，将发酵罐每个位置的温度时序数据构成一条温度曲线并在温度曲线中得到目标曲线段；以发酵罐内平均温度最高的一条温度曲线为主，记为第一温度曲线，第一温度曲线中的目标曲线段记为第一目标曲线段，将第一目标曲线段与其余温度曲线的目标曲线段逐个进行匹配，根据第一目标曲线段与其余目标曲线段的最大温度值、最小温度值以及曲线段上每个数据点的温度值和时间得到第一目标曲线段的成分参数，根据任意两条目标曲线段的每个数据点的成分参数的差异、时间的差异、温度的差异得到数据点的距离参数；温度调节量的补偿量获取模块，根据距离参数对第一目标曲线段与其余目标曲线段进行最短路径匹配，得到路径点，根据路径点的分布、路径点的数量和距离参数建立目标函数对最短路径进行限定并得到第一目标曲线段与其余目标曲线段的匹配结果，根据匹配结果得到发酵罐在第一目标曲线段时序上的净热量；获取历史温度数据，对于历史温度数据中的第一目标曲线段进行聚类，得到聚簇；根据聚簇内所有第一目标曲线段以及对应的匹配目标曲线段得到调节量的补偿量；最终控制模块，根据调节量的补偿量对发酵罐热量控制进行调节补偿，完成对微生物发酵的控制。优选的，所述在温度曲线中得到目标曲线段的方法为：统计温度曲线趋势单调递增然后单调递减的上弧线曲线段，将上弧线曲线段的两侧端点记为趋势变化节点，相邻趋势变化节点中间的曲线段作为趋势变化节点。优选的，所述根据第一目标曲线段与其余目标曲线段的最大温度值、最小温度值以及曲线段上每个数据点的温度值和时间得到第一目标曲线段的成分参数，根据任意两条目标曲线段的每个数据点的成分参数的差异、时间的差异、温度的差异得到数据点的距离参数的方法为：式中，i表示目标曲线段内的第i个数据点，表示目标曲线段内第i个数据点的温度值，表示目标曲线段内第i个数据点的采集时间，表示目标曲线段内最小的温度值，表示目标曲线段内最大的温度值，表示目标曲线段内第i+1个数据点的温度值，表示目标曲线段内第i+1个数据点的采集时间，为第i个数据点的成分参数，为传感器A的目标曲线段a上的第i个数据点的温度值，为传感器B的目标曲线段b上的第r个数据点的温度值，为传感器A的目标曲线段a上的第i个数据点的时间，为传感器B的目标曲线段b上的第r个数据点的时间，为传感器A的目标曲线段a上的第i个数据点的成分参数，为传感器B的目标曲线段b上的第r个数据点的成分参数，表示传感器A的目标曲线段a上的第i个数据点与传感器B的目标曲线段b上的第r个数据点的距离参数。优选的，所述路径点为匹配时获取的路径图中最短路径经过的数据点。优选的，所述根据路径点的分布、路径点的数量和距离参数建立目标函数对最短路径进行限定的方法为：式中，I为A传感器信号中第a个目标曲线段的数据点个数，代表在DTW路径图中第i列中的路径点个数，代表所有列中平均路径点个数，为路径点在每列中分布的方差，代表A传感器信号中第a个目标曲线段内数据点数量，代表B传感器信号中第b个目标曲线段内采样点数量，为目标曲线段a中第i个采样点，为目标曲线段b中第r个采样点，W代表a、b目标曲线段数据点匹配组的数量，为目标函数，min为最小值函数。优选的，所述对于历史温度数据中的第一目标曲线段进行聚类，得到聚簇的方法为：对所有第一目标曲线段进行K-means聚类，获得所有聚簇，聚类所使用的聚类距离为；令y1为任意第一目标曲线段的最大幅值波动差值，，y2为波动持续时间差值，，其中，为任意第一目标曲线段的温度最大值，为任意第一目标曲线段的温度最小值，为任意第一目标曲线段右侧的趋势变化节点的时间值，为任意第一目标曲线段左侧的趋势变化节点的时间值，将每条第一目标曲线段由表示，根据最大幅值波动差值和波动持续时间差值计算聚类距离，公式如下：式中，表示第a1条第一目标曲线段的最大幅值波动差值，表示第一第a2条目标曲线段的最大幅值波动差值，表示第a1条第一目标曲线段的波动持续时间差值y2，表示第a2条第一目标曲线段的波动持续时间差值y2，表示聚类距离。优选的，所述根据聚簇内所有第一目标曲线段以及对应的匹配目标曲线段得到调节量的补偿量的方法为：对于聚簇中的每个第一目标曲线段，将与第一目标曲线段匹配的目标曲线段记为匹配目标曲线段，第一目标曲线段的每个数据点与匹配目标曲线段的匹配数据点的温度作差，得到净热量，在每个第一目标曲线段中得到最大净热量以及右侧趋势变化节点处的净热量，所有第一目标曲线段中的最大净热量与右侧趋势变化节点处的净热量的差值的均值作为调节量的补偿量。本发明的有益效果是：本发明针对微生物发酵罐内净发酵温度变化存在延后性的调节精度问题，提出通过多传感器温度数据，进行目标曲线段分割，然后多传感器数据之间进行DTW匹配，根据匹配结果确定单次自然参数变化导致的各个传感器温度趋势变化。然后利用历史数据聚类确定与当前温度变化趋势相似的历史数据聚簇，获得延后波动值作为调节量补偿值，对温度参数进行补偿调节，以延长单次温度参数调节的有效性、提高调节效率与罐内温度稳定性。其中在进行多传感器数据匹配的过程中，针对不同传感器温度曲线段时序、趋势不一致时DTW常规欧氏距离参数存在匹配组稀疏、密集的路径不均问题，加入数据点在曲线段中的成分信息作为第三距离参数，并对搜索路径的目标函数进行惩罚项设置，很大程度解决了路径不均问题，提高了DTW对不同传感器数据匹配结果的准确度。进而可以得到单一自然参数变化导致的多传感器温度数据变化段，通过历史数据得到对当前待调节发酵温度的延后波动并对调节量进行补偿，避免了由于热传递方式不同导致出现延后的温度反馈，干扰调节效果，使微生物发酵温度调节更为稳定，达到长期有效的调节效果。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明的一个实施例所提供的一种微生物发酵自动控制系统的流程示意图；图2为目标曲线段匹配示意图；图3为目标曲线段原始DTW匹配示意图；图4为DTW最短搜索路径图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。请参阅图1，其示出了本发明一个实施例提供的一种微生物发酵自动控制系统流程图，该系统包括以下模块：温度数据采集模块，在一摩尔葡萄糖彻底氧化为二氧化碳和水的过程中，好氧微生物产生287.2千焦耳热量，183千焦耳转变为高能化合物，104.2千焦耳以热的形式释放，净热量为104.2千焦耳加上搅拌增加的热量，再减去另外液体蒸发带走的热量、空气带走的热量、以及发酵罐壁向外散失的热量。即净热量公式为：Q发酵＝Q生物＋Q搅拌－Q蒸发－Q显－Q辐射。Q生物、Q搅拌为罐内液体产生的总热量，Q蒸发、Q显为发散在罐内空气的热量，Q辐射为罐壁向外辐射的热量，热量变化过程为持续过程并非立刻完成，而由于每一类热传递方式不同，存在热反馈的延后性。因此我们在发酵罐内底部和顶部分别安装温度传感器，即分别测量罐内液体和罐内空气的温度变化，记为A、B传感器，然后在发酵罐外壁再安装一个温度传感器，记为C传感器。获取三个传感器的时序数据变化。距离参数获取模块，三个温度传感器的变化趋势相互影响，即发酵罐内液体温度上升，也会加速蒸发使罐内空气温度上升，罐壁温度也同样上升，但是对于三个温度传感器而言，单个因素导致发酵热温度变化这一过程在时序上并非一致，这是因为热量来源和热传递形式不同。例如搅拌导致罐内液体温度上升持续了10s再趋于稳定或者下降，罐内空气温度上升却只持续了7s就趋于稳定或者下降，罐壁温度上升则持续了15s才向外辐射出去的情况，那么在时序变化不一致的情况下，发酵温度变化可能由于散热不同，热量的反馈存在一定延后性，难以通过多个传感器的即时数据对发酵罐内发酵温度进行准确调节，其中发酵罐的液体温度最高。基于此，引入DTW算法，对同一自然参数导致的三个传感器的温度变化趋势进行时间规整，获取同一自然参数导致的三个传感器采集到的温度变化周期，需要说明的是，自然参数为引起发酵罐内温度变化的行为操作。获取每个传感器的温度数据，每个传感器的温度数据构成一条温度曲线，获得温度曲线的极大值点和极小值点，将极小值点记为趋势变化节点，任意两个相邻的趋势变化节点中间构成的曲线段在温度曲线中是单调递增后又单调递减的曲线段，记这种走势的曲线段为目标曲线段，其余曲线段为非目标曲线段，即目标曲线段的两侧端点为趋势变化节点，趋势变化节点之间的曲线段即目标曲线段为一次独立的温度上升然后发散的过程。每两个相邻的趋势变化节点之间为一次单独的变化过程，当一个自然参数变化导致温度升高时，三个传感器均会出现一次温度上升然后平稳或下降的趋势，但趋势变化节点的开始和结束时间并不同步，一般是罐内液体温度先发生变化，然后罐内空气温度和罐壁温度才发生变化，而热传递、发散形式不同，因此持续时间和结束时间也不同。以A传感器温度数据为主，利用DTW算法对另外两个传感器温度曲线中时序长短不一的温度曲线段进行匹配。引入DTW算法是为了将不同传感器温度曲线内的目标曲线段和目标曲线段进行匹配，目的是为了获取同一次自然参数变化时不同传感器上温度曲线的对应关系，如图2，当三个传感器温度曲线变化趋势在时序上不同步时，我们需要判断目标曲线段1，应与2、3中哪个进行匹配。由于传统DTW仅是基于时序长短不同的温度曲线上数据点之间的最短欧式距离进行匹配，而当整个温度曲线时序长度相同，仅在目标曲线段之间进行匹配时，可以视为是一个独立数据集和另一个独立数据集之间的最短距离计算，而并非一个数据和另一个数据之间距离计算，独立数据集和独立数据集之间的距离度量仅采用传统欧式距离则可能存在局部最优，即会无视曲线段的趋势，仅取最短欧式距离进行匹配。那么必然就会出现欧式距离较大的部分匹配组稀疏，欧式距离较小的部分匹配组密集，这导致匹配结果失真，如图3所示，原本A传感器信号的一个目标曲线段峰值应该与B传感器信号的峰值匹配，但实际匹配结果却并非如此。因此需要对现有的DTW算法进行更改，加入温度曲线上每个数据点的成分信息来影响匹配结果，公式如下：式中，i表示目标曲线段内的第i个数据点，表示目标曲线段内第i个数据点的温度值，表示目标曲线段内第i个数据点的采集时间，表示目标曲线段内最小的温度值，表示目标曲线段内最大的温度值，表示目标曲线段内第i+1个数据点的温度值，表示目标曲线段内第i+1个数据点的采集时间，为传感器A的目标曲线段a上的第i个数据点的温度值，为传感器B的目标曲线段b上的第r个数据点的温度值，为传感器A的目标曲线段a上的第i个数据点的时间，为传感器B的目标曲线段b上的第r个数据点的时间，为三个传感器中任意目标曲线段内第i个数据点的成分参数，其中为传感器A的目标曲线段a上的第i个数据点的成分参数，为传感器B的目标曲线段b上的第r个数据点的成分参数，表示传感器A的目标曲线段a上的第i个数据点与传感器B的目标曲线段b上的第r个数据点的距离参数。为目标曲线段内第i个数据点的温度值与局部峰值的差异与该目标曲线段内幅值极差的比值，表示第i个数据点在该目标曲线段内所处的相对位置，该值越小则代表第i个数据点越接近峰值点，越大则越偏离峰值点。因为峰值点两侧需要进行区分，因此引入斜率值，峰值点左侧斜率为正，峰值点右侧斜率为负。因此可以表示第i个数据点在目标曲线段内的成分信息，所述成分信息包括第i个数据点在目标曲线段内的左侧或右侧和第i个数据点所在目标曲线段内的位置，为数据点匹配中除温度值、时间值之外的第三距离参数记为成分参数。加入成分信息可以避免在时序不一致时数据点匹配出现局部最优、匹配组分布不均的问题。温度调节量的补偿量获取模块，根据得到的距离参数使用DTW最短距离搜索，两个不同传感器的目标曲线匹配得到DTW路径图，以A传感器和B传感器的目标曲线段匹配为例，代表A传感器信号中第a个目标曲线段内数据点数量，代表B传感器信号中第b个目标曲线段内采样点数量，a、b两个目标曲线段中任意两个匹配的数据点为一个匹配组，路径图中的横坐标时A传感器的采样点数量，纵坐标是B传感器的采样点数量，为了避免采样点分配不均的问题，在使用DTW最短距离搜索时，对搜索过程的目标函数进行限定，该算法最优化的是DTW路径图中的一条路径，如图4是示出了DTW路径图中的一条路径，路径图中，，…即表示一条路径。DTW路径图中的第i列和第r行对应一个二元参数，其中为目标曲线段a中第i个采样点，为目标曲线段b中第r个采样点，记为一个匹配组，那么当i取1、2、…、以及r取1、2、…、时得到的多个二元参数：容易看到多个二元参数在DTW路径图中对应一条路径，一条路径就是一个待优化参数，当该待优化参数最优时对应的路径就是最优的；构建一个关于待优化参数的目标函数如下：其中待优化参数在DTW路径图中就是一条路径；式中，I为A传感器信号中第a个目标曲线段的数据点个数，代表在DTW路径图中第i列中的路径点个数，代表所有列中平均路径点个数，为路径点在每列中分布的方差，当该方差越小时，匹配组的分布越均匀，越不会出现局部匹配组密集、稀疏问题，其中路径点为在DTW路径图中的最短陆行经过的像素点，W代表a、b目标曲线段数据点匹配组的数量，如图4所示。代表最短数据点平均匹配距离，根据最短数据点平均匹配距离和路径点的方差的和作为目标函数， 利用遗传算法获得目标函数最小时，得到的最优路径以及目标曲线段a和目标曲线段b的数据点的匹配结果。同理得到目标曲线段c与目标曲线段a和目标曲线段b的匹配结果，c为传感器C的目标曲线段。根据匹配结果得到同一自然参数影响下，发酵罐的净热量为：式中，为目标曲线段a的第i个数据点的温度值，为目标曲线段b的第r个数据点的温度值，为目标曲线段c的第u个数据点的温度值，其中第i个数据点、第r个数据点、第u个数据点是对应匹配关系，为收到同一参数影响后在某一匹配关系中的净热量。对传感器A的历史温度数据中的目标曲线段进行K-means聚类，令y1为任意目标曲线段的最大幅值波动差值，，y2为波动持续时间差值，，其中，为目标曲线段的温度最大值，为目标曲线段的温度最小值，为目标曲线段右侧的趋势变化节点的时间值，为目标曲线段左侧的趋势变化节点的时间值，为聚类距离，这两个参数可以表示目标曲线段的相似性，将每条目标曲线段由表示，根据最大幅值波动差值和波动持续时间差值计算聚类距离，公式如下：式中，表示第a1条目标曲线段的最大幅值波动差值，表示第a2条目标曲线段的最大幅值波动差值，表示第a1条目标曲线段的波动持续时间差值，表示第a2条目标曲线段的波动持续时间差值，表示聚类距离。根据两个目标曲线段的最大幅值波动差值和波动持续时间共同反映两个目标曲线段的相似度。传感器A中温度数据波动趋势是自然参数变化的直接反馈，将历史温度数据中与当前温度数据中波动趋势相似的目标曲线段进行聚类，将所在聚簇记为V。每一个聚簇为都为某一自然参数影响下造成的温度波动变化，聚簇中的每个目标曲线段都得到与传感器B、传感器C的匹配结果。根据簇内所有目标曲线段的最大净热量和右侧趋势变化节点处的净热量差异的均值得到聚簇内净发酵热量波动均值，公式如下：式中，表示第V个聚簇中任意一个传感器A的目标曲线段，E表示聚簇内目标曲线段总数，代表第e个目标曲线段的最大净热量，是该目标曲线段内最可能超过最高温度线的点，代表该目标曲线段右侧趋势变化节点处的净热量，为第e个目标曲线段的最大净热量减去右侧趋势变化节点处的净热量，得到第e个目标曲线段由于三个传感器温度数据延后产生的净发酵热量波动。表示为簇内净发酵热量波动均值。由于聚簇V内均为历史数据中与当前A传感器分量中实时温度变化目标曲线段相近的历史温度目标曲线段，相似指的是历史数据中的温度曲线，因此可以作为当前调节量的补偿量。最终控制模块，在控制微生物发酵时，需要在发酵罐内加入调节量S，在本实施例中，发酵罐的调节量为历史使用该发酵罐时所使用的调节量均值，理论净发酵热量会变为J-S，但是由于存在温度序列延后波动，因此需要对调节量加入补偿值，得到最终净热量，即：式中，为最大净热量，为调节量，为调节量的补偿量，为最终净热量。当达到最大净热量释放时，在发酵罐内加入调节量和调节量的补偿量，使最大净热量减少，使微生物能够正常生长，完成发酵罐的温度控制。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
