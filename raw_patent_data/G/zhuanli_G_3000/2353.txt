标题title
基于多模型融合与多参数组合识别非法渔船捕捞的方法
摘要abst
本发明公开一种基于多模型融合与多参数组合识别非法渔船捕捞的方法，步骤S1:训练渔船检测模型、人员检测模型、河面分割模型；步骤S2:送入渔船检测模型、人员检测模型，若同时满足再送入河面分割模型，得到一组拆分事件；步骤S3:根据预设参数集过滤拆分事件，确定渔船目标，否则返回步骤S2；步骤S4:根据渔船捕鱼状态预设条件分析渔船目标，得到有效事件，否则返回步骤S2；步骤S5:根据前后有效事件计算渔船的速度,判断渔船的速度是否大于预设速度，若大于预设速度排除非法捕捞作业，返回步骤S2；步骤S6:以渔船为单位，按渔船分组目标，计算各组目标的综合置信度，若综合置信度高于预设阈值，得到预警事件。本发明提高了渔船捕捞的识别精度、降低误报率。
权利要求书clms
1.一种基于多模型融合与多参数组合识别非法渔船捕捞的方法，其特征在于：步骤S1:训练渔船检测模型、人员检测模型、河面分割模型；步骤S2:将相机采集的监控视频图像先送入所述渔船检测模型、所述人员检测模型进行推理，若同时满足渔船、人员再送入所述河面分割模型进行推理，得到一组拆分事件，否则重新采集监控视频图像；步骤S3:根据预设参数集过滤所述拆分事件，若满足预设参数，确定渔船目标，否则返回步骤S2；步骤S4:根据渔船捕鱼状态预设条件分析所述渔船目标，若满足条件，得到有效事件，否则返回步骤S2；步骤S5:根据前后所述有效事件计算渔船的速度,判断所述渔船的速度是否大于预设速度，若大于预设速度排除非法捕捞作业，返回步骤S2；步骤S6:以渔船为单位，按渔船分组目标，计算各组目标的综合置信度，若所述综合置信度高于预设阈值，得到预警事件。2.据权利要求1所述基于多模型融合与多参数组合识别非法渔船捕捞的方法，其特征在于：还包括步骤S7：将所述预警事件上传到监控平台，并发送预警信息。3.根据权利要求1或2所述基于多模型融合与多参数组合识别非法渔船捕捞的方法，其特征在于：所述步骤S1:训练渔船检测模型、人员检测模型、河面分割模型，包括:基于YOLOv5训练渔船检测模型、人员检测模型；基于YOLOv5-seg训练河面分割模型。4.据权利要求1或2所述基于多模型融合与多参数组合识别非法渔船捕捞的方法，其特征在于：所述步骤S2:将相机采集的监控视频图像先送入所述渔船检测模型、所述人员检测模型进行推理，若同时满足渔船、人员再送入所述河面分割模型进行推理，得到一组拆分事件，否则重新采集监控视频图像,包括：按一定帧率抽取相机实时监控视频图像，并以一定间隔将所述监控视频图像送入所述所述渔船检测模型、所述人员检测模型，若同时满足渔船、人员，再送入所述河面分割模型进行推理，若存在分割结果，得到一组拆分事件，同时保存原始图像；否则重新抽取相机实时监控视频图像。5.权利要求1或2所述基于多模型融合与多参数组合识别非法渔船捕捞的方法，其特征在于：所述步骤S3:根据预设参数集过滤所述拆分事件，若满足预设参数，确定渔船目标，否则返回步骤S2，包括：步骤S3.1：根据获取的相机预置点位、运动状态排除无关区域和模糊的图像：所述获取相机预置点位是通过onvif协议获取相机预置点位，排除无关区域；所述获取相机运动状态是通过厂家SDK或onvif协议获取相机运动状态；步骤S3.2：根据检测时间段预设不同置信度进行过滤，舍去低于置信度的目标，若过滤后渔船、人员和河面均无满足置信度的目标，舍去该事件；步骤S3.3：根据预设渔船目标尺寸过滤，若符合预设渔船目标尺寸，确定渔船目标；若渔船目标较小，根据渔船尺寸与渔船标准尺寸对比获取放大相机倍数所述相机采用联动相机，根据所述放大相机倍数调整所述相机，对所述渔船目标进行3D放大，对于放大后任不符合预设渔船目标尺寸要求的舍去，返回步骤S2重复循环。6.据权利要求5所述基于多模型融合与多参数组合识别非法渔船捕捞的方法，其特征在于：所述步骤S3.2：根据检测时间段预设不同置信度进行过滤，还包括，根据不同目标、检测时间段预设不同置信度进行过滤。7.据权利要求1或2所述基于多模型融合与多参数组合识别非法渔船捕捞的方法，其特征在于：所述步骤S4:根据渔船捕鱼状态预设条件分析所述渔船目标，若满足条件，得到有效事件，否则返回步骤S2，包括：步骤S4.1：分析所述渔船目标的完整性，取出渔船目标位置信息与目标图像尺寸计算出渔船完整性B＝＞10)&amp;＞5)，若B为假，渔船不完整，移除渔船目标；步骤S4.2分别计算渔船目标与人员目标、鱼竿目标、抄网目标、拖网目标的交并比排除岸上目标，按渔船分组目标，若交并比小于0.15，舍去事件；步骤S4.3使用opencv依次计算渔船目标到河面岸线的距离D，若距离为正数，渔船处于河面上，得到有效事件；否则渔船处于靠岸停泊或岸线以外，返回步骤S2重复循环。8.据权利要求1或2所述基于多模型融合与多参数组合识别非法渔船捕捞的方法，其特征在于：所述步骤S5:根据前后所述有效事件计算渔船的速度,判断所述渔船的速度是否大于预设速度，若大于预设速度排除非法捕捞作业，返回步骤S2，包括：以前后帧识别的有效事件计算渔船速度，正常情况下，渔船捕捞作业时移动缓慢或静止，循环比较前后帧有效事件中的渔船目标，设前后帧的渔船目标分别为B、N，计算两者相似度S＝1-2*IoU+C+W+H，其中IoU为前后目标交并比、C为置信度差值绝对值C＝|CB-CN|、W,H为宽、高比例差值且满足IoU＞0.1、C＜0.1，W,H＜0.15，取S值最小的前后目标计算速度；当渔船行驶缓慢且远离岸线符合非法捕捞作业；当渔船行驶速度中等，需要持续观察，防止相机抖动带来的计算误差；当V＞max，渔船快速行驶，排除非法捕捞作业，返回步骤S2循环操作。9.据权利要求1或2所述基于多模型融合与多参数组合识别非法渔船捕捞的方法，其特征在于：在所述步骤S5:根据前后所述有效事件计算渔船的速度,判断所述渔船的速度是否大于预设速度前，还包括：缓存本次过滤后的有效事件，并取出上次有效事件目标进行对比，若存在同类型标签的目标，排除图像异常影响、检测模型输出错误。10.根据权利要求1或2所述基于多模型融合与多参数组合识别非法渔船捕捞的方法，其特征在于：所述步骤S6:以渔船为单位，按渔船分组目标，计算各组目标的综合置信度，若所述综合置信度高于预设阈值，得到预警事件后，还包括：按照预置点位预设预警事件时间间隔过滤，计算出同一预置位点上次预警事件中渔船的相似度SF，若SF＜0.5且时间间隔小于预设预警事件时间间隔值，则认为是相同渔船目标，移除渔船与船上目标。
说明书desc
技术领域本发明涉及渔船捕鱼目标跟踪技术领域，特别涉及一种基于多模型融合与多参数组合识别非法渔船捕捞的方法。背景技术相机视频监控加AI分析在安防、渔政监管、车辆车牌识别等领域中具有广泛的应用，而随着长江流域十年禁渔全面开展，对非法渔船捕捞事件识别更是有着迫切需求。非捕识别多使用AI算法模型实时分析监控视频，但传统模型在实际应用环境中易受到光线、距离、角度、姿态等诸多因素影响。当前对非捕事件识别的难点在于船只形状各异，方位、航行速度随机，且易受货船、客船、航标船、岸线等影响，船上人员数量不一、衣着颜色不同、形态各异、位置变动频繁等，捕捞工具包括鱼竿、抄网等，这些训练素材难收集导致单一模型训练困难、检出事件错误率较高。故提升非捕事件识别精度是当前需要解决的问题。发明内容本发明的目的是针对现有技术的不足，提供一种基于多模型融合与多参数组合识别非法渔船捕捞的方法，提高非法渔船捕捞事件识别精度、降低误报率，训练素材难收集。本发明的技术方案是：一种基于多模型融合与多参数组合识别非法渔船捕捞的方法，包括：步骤S1:训练渔船检测模型、人员检测模型、河面分割模型；步骤S2:将相机采集的监控视频图像先送入所述渔船检测模型、所述人员检测模型进行推理，若同时满足渔船、人员再送入所述河面分割模型进行推理，得到一组拆分事件，否则重新采集监控视频图像；步骤S3:根据预设参数集过滤所述拆分事件，若满足预设参数，确定渔船目标，否则返回步骤S2；步骤S4:根据渔船捕鱼状态预设条件分析所述渔船目标，若满足条件，得到有效事件，否则返回步骤S2；步骤S5:根据前后所述有效事件计算渔船的速度,判断所述渔船的速度是否大于预设速度，若大于预设速度排除非法捕捞作业，返回步骤S2；步骤S6:根据所述步骤S4中渔船捕鱼状态进行分组，计算各组的综合置信度，若所述综合置信度高于预设阈值，得到预警事件。进一步地：还包括步骤S7：将所述预警事件上传到监控平台，并发送预警信息。进一步地：步骤S1:训练渔船检测模型、人员检测模型、河面分割模型，包括:所述多个目标检测模型为渔船检测模型、人员检测模型，基于YOLOv5训练渔船检测模型、人员检测模型；所述实例分割模型为河面分割模型，基于YOLOv5-seg训练河面分割模型。进一步地：所述步骤S2:将相机采集的监控视频图像先送入所述多个目标检测模型进行推理，若同时满足多个目标再送入所述实例分割模型进行推理，得到一组拆分事件；否则重新采集监控视频图像,包括：按一定帧率抽取相机实时监控视频图像，并以一定间隔将所述监控视频图像送入所述多个目标检测模型，若同时满足多个目标，再送入所述实例分割模型进行推理，若存在分割结果，得到一组拆分事件，同时保存原始图像；否则重新抽取相机实时监控视频图像。进一步地：所述步骤S3:根据预设参数集过滤所述拆分事件，若满足预设参数，确定渔船目标，否则返回步骤S2，包括：步骤S3.1：根据获取的相机预置点位、运动状态排除无关区域和模糊的图像：所述获取相机预置点位是通过onvif协议获取相机预置点位，排除无关区域；所述获取相机运动状态是通过厂家SDK或onvif协议获取相机运动状态；步骤S3.2：根据检测时间段预设不同置信度进行过滤，舍去低于置信度的目标，若过滤后渔船、人员和河面均无满足置信度的目标，舍去该事件；步骤S3.3：根据预设渔船目标尺寸过滤，若符合预设渔船目标尺寸，确定渔船目标；若渔船目标较小，根据渔船尺寸与渔船标准尺寸对比获取放大相机倍数所述相机采用联动相机，根据所述放大相机倍数调整所述相机，对所述渔船目标进行3D放大，对于放大后任不符合预设渔船目标尺寸要求的舍去，返回步骤S2重复循环。进一步地：所述步骤S3.2：根据检测时间段预设不同置信度进行过滤，还包括，根据不同目标、检测时间段预设不同置信度进行过滤。进一步地：所述步骤S4:根据渔船捕鱼状态预设条件分析所述渔船目标，若满足条件，得到有效事件，否则返回步骤S2，包括：步骤S4.1：分析所述渔船目标的完整性，取出渔船目标位置信息与目标图像尺寸计算出渔船完整性B＝＞10)&amp;＞5)，若B为假，渔船不完整，移除渔船目标；步骤S4.2分别计算渔船目标与人员目标、鱼竿目标、抄网目标、拖网目标的交并比排除岸上目标、按渔船分组目标，若交并比小于0.15，舍去事件；步骤S4.3使用opencv依次计算渔船目标到河面岸线的距离D，若距离为正数，渔船处于河面上，得到有效事件；否则渔船处于靠岸停泊或岸线以外，返回步骤S2重复循环。进一步地：所述步骤S5:根据前后所述有效事件计算渔船的速度,判断所述渔船的速度是否大于预设速度，若大于预设速度排除非法捕捞作业，返回步骤S2，包括：以前后帧识别的有效事件计算渔船速度，正常情况下，渔船捕捞作业时移动缓慢或静止，循环比较前后帧有效事件中的渔船目标，设前后帧的渔船目标分别为B、N，计算两者相似度S＝1-2*IoU+C+W+H，其中IoU为前后目标交并比、C为置信度差值绝对值C＝|CB-CN|、W,H为宽、高比例差值且满足IoU＞0.1、C＜0.1，W,H＜0.15，取S值最小的前后目标计算速度；当渔船行驶缓慢且远离岸线符合非法捕捞作业；当渔船行驶速度中等，需要持续观察，防止相机抖动带来的计算误差；当V＞max，渔船快速行驶，排除非法捕捞作业，返回步骤S2循环操作。进一步地：在所述步骤S5:根据前后所述有效事件计算渔船的速度,判断所述渔船的速度是否大于预设速度前，还包括：缓存本次过滤后的有效事件，并取出上次有效事件目标进行对比，若存在同类型标签的目标，排除图像异常影响、检测模型输出错误。进一步地：所述步骤S6：以渔船为单位，按渔船分组目标，计算各组目标的综合置信度，若所述综合置信度高于预设阈值，得到预警事件后，还包括：按照预置点位预设预警事件时间间隔过滤，计算出同一预置位点上次预警事件中渔船的相似度SF，若SF＜0.5且时间间隔小于预设预警事件时间间隔值，则认为是相同渔船目标，移除渔船与船上目标。采用上述技术方案具有以下有益效果：本发明结构解决了现有非法渔船捕捞事件识别精度低、易误报、训练素材难的问题，建立渔船、人员的多目标检测模型，及河面的分割模型，实现了目标检测模型、实例分割模型的组合应用，没有使用分类模型，大幅降低了训练素材的收集难度，降低了模型网络的深宽度要求与硬件成本，便于模型快速训练、转换和线上部署替换。同时将单一非捕事件转化为多特征识别的多个事件的组合。然后根据识别时间、目标置信度、尺寸参数过滤事件，得到渔船目标；根据渔船目标中渔船与人员、鱼竿、抄网、拖网的交并比、完整性等渔船捕鱼状态预设条件得到有效事件，最后根据渔船目标运动速度、岸线距离最终确实是否为非法渔船捕捞事件，得到预警事件。该识别方法对单一目标的检出率与精度提升较大，减少了非法渔船捕捞事件的误报情况。根据前后所述有效事件计算渔船的速度前，缓存本次过滤后的有效事件，并取出上次有效事件目标进行对比，若存在同类型标签的目标，排除图像异常影响、检测模型输出错误，采用多帧检测，保证有效事件检测的连续性。按照预置点位预设预警事件时间间隔过滤，计算出同一预置位点上次预警事件中渔船的相似度SF，若SF＜0.5且时间间隔小于预设预警事件时间间隔值，则认为是相同渔船目标，移除渔船与船上目标。由于渔船作业运动缓慢或长期停留，同一渔船会被反复识别，因此需要设定上报时间间隔降低系统资源消耗与人工处理成本。与下面结合附图和具体实施方式作进一步的说明。附图说明图1为具体实施例1的流程框图；图2为具体实施例1的具体流程图；图3为具体实施例2的流程框图。具体实施方式具体实施例1：如图1和图2所示，一种基于多模型融合与多参数组合识别非法渔船捕捞的方法，该方法基于相机、网络和服务器构建的非法渔船捕捞系统，相机与AI运算盒子相连，所述AI运算盒子通过网络与服务器相连，所述网络为有线网络或无线网络，该相机采用联动相机，本发明无环境无需利用传感器，计时器等辅助工具，只有相机+AI盒子设备，降低了成本。步骤S1:训练渔船检测模型、人员检测模型、河面分割模型；渔船检测模型、人员检测模型构成目标检测模型，河面分割模型是实例分割模型，包括:基于YOLOv5训练渔船检测模型、人员检测模型。具体包括：所述训练渔船检测模型采用基于相机监控以相同比例收集标记货船、航标船、客船、渔船图像素材，白天、夜晚素材均要收集，使用现有开源算法YOLOv5训练渔船检测模型；以K-Mean聚类算法计算出一个渔船标准尺寸，其中w为宽，h为高；并统计相机缩放倍数与图像中渔船尺寸关系M0。所述训练人员检测模型采用收集并标记人员站姿、蹲姿、坐姿、鱼竿、抄网、拖网、雨伞素材，使用现有开源算法YOLOv5训练人员与捕捞工具的检测模型，即训练人员检测模型。通常情况下，判断渔船是否作业，需要检测出船上人员与捕捞工具，能大幅度提升非捕事件识别精度。由于捕捞工具素材从相机监控获取难度较大，故先从网络中获取，再根据实际检出事件逐渐替换。基于YOLOv5-seg训练河面分割模型，具体包括：所述河面分割模型采用基于相机监控收集标记河面素材，白天夜晚素材各占一半，使用现有YOLOv5-seg训练河面分割模型。通常情况船只作业位于河中且离岸线一定距离，采用分割河面有利于过滤掉岸上与岸边停泊的渔船目标。本具体实施例中，渔船和河面是从监控中手动截取的，人员、鱼竿、抄网等初期是从网络中收集的，后期通过从预警事件中逐渐迭代选取的真实图片。本发明通过将单一非捕事件转化为渔船、人员、河面识别的多个事件的组合，然后以检测模型检测船只、人员，若同时存在船只和人员，再使用分割模型分割河面岸线，得到一组拆分后的事件，以提高系统性能。步骤S2:将相机采集的监控视频图像先送入所述渔船检测模型、所述人员检测模型进行推理，若同时满足渔船、人员再送入所述河面分割模型进行推理，得到一组拆分事件；否则重新采集监控视频图像。包括：按一定帧率抽取相机实时监控视频图像，并以一定间隔将所述监控视频图像送入所述渔船检测模型、所述人员检测模型，若同时满足渔船、人员，再送入所述河面分割模型进行推理，若存在分割结果，得到一组拆分事件，同时保存原始图像；否则重新抽取相机实时监控视频图像。本实施例中，在多个位置点固定安装该相机进行监控，所述相机为联动相机，即该相机可以控制转动，运维人员会根据河面设置一些固定监控地点。相机同时刻只能监控一个地点，每隔一定时间切换到下一地点。根据相机数各起一个第一线程使用OpenCV每秒每路抽取N帧实时监控视频图像存入队列Q，另起第二线程循环从Q中取出监控视频图像，并对各路监控视频图像以一定间隔分别送入所述渔船检测模型、所述人员检测模型进行推理。该间隔时间以事件目标连续性与节省系统资源人为设定，本具体实施例设置每路相机一秒一检测。判断是否同时存在渔船、人员目标，若同时存在渔船、人员目标，保存检测结果并继续送入所述河面分割模型推理；否则重新抽取相机的实时监控视频图像，再取出监控视频图像分别送入所述渔船检测模型、所述人员检测模型进行推理、判断，重复循环。若存在河面分割结果，则得到一组拆分事件集合，同时保存原始图像，保存原始图像时间不作限制，将获得的原始图像保存在AI盒子本地，以便后期绘制图片、合成视频，将处理后的图片与视频上传到监控平台，本具体实施例中，保存原始图像10秒。步骤S3:根据预设参数集过滤所述拆分事件，若满足预设参数，确定渔船目标，否则返回步骤S2，具体步骤：步骤S3.1：根据获取的相机预置点位、运动状态排除无关区域和模糊的图像；包括：所述获取相机预置点位是通过onvif协议获取相机预置点位，对于渔船捕捞作业监控识别，通常会延河面、岸线设置一些监控点位来排除一些无关区域，提升识别精度。如果出现在河岸上、草地等位置就是无效的。设置相机只在河面上巡航能最大可能发现有效事件。所述获取相机运动状态是通过厂家SDK或onvif协议获取相机运动状态；若相机移动速度较快，会导致监控画面模糊、目标位置变化较大，速度计算不准确，因此需要排除相机运动中产生的事件。根据相机实时位置判断，本具体实施例采用间隔0.2秒取两次相机位置比较，如果无变化，则未运动，相机位置通过onvif协议获取。步骤S3.2：根据检测时间段预设的不同置信度进行过滤，白天光线充足、训练素材更多，模型检出率较高、错误检出更多，设置较高置信度；若夜晚相机激光成像生成灰度图，目标特征较少，检出较少，降低模型置信度增加检测事件输出。模型输出的置信度越高越好，因此只需要设置最低置信度即可，置信度是0-1之间的小数。根据所述渔船检测模型、所述人员检测模型输出的置信度与预设的不同置信度比较，舍去低于置信度的目标，若过滤后渔船、人员和河面均无满足置信度的目标，舍去该事件。具体的：首先过滤渔船的置信度，若满足渔船置信度要求；然后再过滤人员的置信度，若满足渔船置信度要求；最后再过滤河面置信度；若任一环节不满足要求则不用进行后续环节处理，直接舍去该事件。可能地，所述根据检测时间段预设不同置信度进行过滤，还包括，根据不同目标、检测时间段预设不同置信度进行过滤。对不同目标分白天夜间设定置信度，舍去低于置信度的目标。对于渔船、人员、雨伞等特征明显的目标，白天设定0.85、夜间0.8；对于鱼竿、抄网、拖网等特征不明显、检出率较低目标，白天设定0.75，夜间0.6；对于河面分割，白天设定0.8，夜间0.65。步骤S3.3：根据预设渔船目标尺寸过滤，若符合预设渔船目标尺寸，渔船目标的长、宽与预设渔船的长、宽比较，任一满足即可确定渔船目标，进入下一步骤。若渔船目标较小，则根据步骤1中训练渔船检测模型时，以K-Mean聚类算法计算出一个渔船标准尺寸，统计相机缩放倍数与图像中渔船尺寸关系M0，使用渔船目标尺寸与渔船标准尺寸对比获取放大相机倍数再根据所述放大相机倍数M调整联动相机，对渔船目标进行3D放大；重复步骤1至步骤3，对于放大后任不符合预设渔船目标尺寸要求的事件舍去。因小尺寸目标包含特征较少，目标检测模型对小目标的识别精度较低，故需要设置合理的尺寸过滤掉极小目标。本具体实施例中：根据实际经验，以渔船标准尺寸，渔船目标尺寸预设为,即预设渔船目标尺寸，人员目标、雨伞目标尺寸预设为，鱼竿目标、抄网目标、拖网目标尺寸预设为为例，若过滤后渔船目标无满足尺寸，舍去事件；若过滤后渔船目标满足尺寸；然后判断过滤后人员目标、雨伞目标是否满足尺寸，若满足人员目标、雨伞目标尺寸；最后再判断过滤后鱼竿目标、抄网目标、拖网目标是否满足尺寸；若任一环节不满足要求则不用进行后续环节处理，直接舍去该事件，返回步骤S2重复循环。步骤S4:根据渔船捕鱼状态预设条件分析所述渔船目标，若满足条件，得到有效事件，否则返回步骤S2。包括：步骤S4.1：分析所述渔船目标的完整性，取出渔船目标位置信息与目标图像尺寸计算渔船完整性B＝＞10)&amp;＞5)，表示目标在图像左边或右边10个像素内，在图像上边或下边5个像素内，即可认为目标不完整，因为模型对不完整的目标也会识别，但错误率较大，即B为假。若B为假，渔船不完整，移除目标图像中不完整的渔船目标。不完整的渔船货船、航标船、石头极易误报成渔船，因此需要去除图像边缘的渔船，由于渔船的运动性与相机监控分析的连续性，渔船终会出现在图像中央，漏检情况极少，大幅增加检测正确率。步骤S4.2：分别计算渔船目标与人员目标、鱼竿目标、抄网目标、拖网目标的交并比，排除岸上目标、按渔船分组目标。若渔船目标与人员的交并比小于0.15，均为舍去事件。若渔船目标与人员的交并比大于等于0.15，再判断渔船目标与鱼竿目标、抄网目标、拖网目标的交并比任意一个满足交并比大于等于0.15就进入下一步骤。采用判断船上关联目标用交并比，主要是为了排除没有在渔船上的目标，捕捞时人员一般在渔船上面，使用交并比使用距离判断更加精准。以人员为例，取出人员目标位置信息依次与渔船目标位置信息比较并计算面积交集I。若yb+hb＞ya+ha|wb＞wa为真，舍去渔船，排除渔船误报情况；若xa＞＝xb+wb|xa+wa＜＝xb|y＞＝yb+hb|ya+ha＜＝yb为真，I＝0；否则I＝-max)*-max，当交并比小于0.15时，舍去人员，排除岸边人员与其他作业人员。依据人员目标交并比方法依次算出鱼竿目标与渔船目标的交并比，若小于0.15舍去鱼竿。抄网目标与渔船目标的交并比，若小于0.15舍去抄网。拖网目标与渔船目标的交并比，若小于0.15舍去拖网。步骤S4.3：使用跨平台计算机视觉和机器学习软件库OpenCV依次计算渔船目标到河面岸线的距离D，若距离为正数，渔船处于河面上，得到有效事件；否则渔船处于靠岸停泊或岸线以外，返回步骤S2重复循环。根据实际应用经验，当距离D＜0时渔船处于岸线以外或者靠岸停泊，均为无效事件，返回步骤S2。当距离D＞0时，渔船处于河面内，得到有效事件。步骤S5:根据前后所述有效事件计算渔船的速度,判断所述渔船的速度是否大于预设速度，若大于预设速度排除非法捕捞作业，返回步骤S2。包括：以前后帧识别的有效事件计算渔船速度，正常情况下，渔船捕捞作业时移动缓慢或静止，循环比较前后帧有效事件中的渔船目标，设前后帧的渔船目标分别为B、N，计算两者相似度S＝1-2*IoU+C+W+H，其中IoU为前后目标交并比C为置信度差值绝对值C＝|CB-CN|、W,H为宽、高比例差值/＞且满足IoU＞0.1、C＜0.1，W,H＜0.15，取S值最小的前后目标计算速度，采用前后事件在3秒内有效；公式中，tB、tN分别表示前后帧渔船目标B、N事件的时间。当渔船行驶缓慢且远离岸线符合非法捕捞作业；当渔船行驶速度中等，需要持续观察，防止相机抖动带来的计算误差；当V＞max，表示目标渔船在监控画面上移动速度，以像素为单位，如果移速大于目标长宽的最大值max，认为渔船快速行驶，排除非法捕捞作业，返回步骤S2重复循环。可能地，在所述步骤S5:根据前后所述有效事件计算渔船的速度,判断所述渔船的速度是否大于预设速度前，还包括：缓存本次过滤后的有效事件，本具体实施例中：缓存本次过滤后的有效事件3秒，并取出上次有效事件目标进行对比，若存在同类型标签的目标，排除图像异常影响、检测模型输出错误。步骤S6:以渔船为单位，按渔船分组目标，计算各组目标的综合置信度，若所述综合置信度高于预设阈值，得到预警事件。包括：以渔船为单位，根据步骤S4.2计算得到的渔船目标与人员目标、鱼竿目标、抄网目标、拖网目标的交并比进行分组，并计算各组综合置信度，移除小于阈值的事件组，缓存高于阈值的事件组，得到预警事件。本具体实施例：以某一个渔船为主体，与这个渔船相交的人员、捕捞工具为一组事件。若有m个渔船就有m组事件。阈值根据预警事件统计，阈值为0.8，若高于0.8的事件组，即属于预警事件。可能地，步骤S6:以渔船为单位，按渔船分组目标，计算各组目标的综合置信度，若所述综合置信度高于预设阈值，得到预警事件后，还包括：按照预置点位预设预警事件时间间隔过滤，根据步骤S3中获取的相机预置点位与步骤S5中计算前后帧渔船目标两者相似度S方法，计算出同一预置位点上次预警事件中渔船的相似度SF，若SF＜0.5且时间间隔小于预设预警事件时间间隔值，预警事件时间间隔根据系统存储、以及相关要求设定，一般5分钟。则认为是相同渔船目标，移除渔船与船上目标。由于渔船作业运动缓慢或长期停留，同一渔船会被反复识别，因此需要设定上报时间间隔降低系统资源消耗与人工处理成本。本发明将单一非法渔船捕捞事件识别转化为对河面、渔船、人员、鱼竿、抄网等目标的组合检测，基于YOLOv5目标检测模型、实例分割模型的组合应用，大幅降低了训练素材的收集难度，同时对单一目标的检出率与精度提升较大。同时降低了模型网络的深宽度要求与硬件成本，便于模型快速训练、转换和线上部署替换。通过置信度、检测时间段、尺寸、完整性、交并比、河面岸线距离、运动速度等参数组合调优过滤事件，降低系统整体出错概率，增加了系统整体检出率。解决了现有非法渔船捕捞事件识别精度低、易误报、训练素材难收集的问题，提高了识别方法的精度要求。以上对本发明所提供的技术方案进行了详细介绍。本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想。应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以对本发明进行若干改进和修饰，这些改进和修饰也落入本发明权利要求的保护范围内。具体实施例2参见图2所示，步骤S7：根据预设配置绘制检测框、合成视频，将所述预警事件上传到监控平台，并发送预警信息，发出推送事件。本具体实施例中预设配置包括：检测框线的颜色、宽度，事件类型、置信度字体大小、颜色等。利用步骤S2中AI盒子保存的原始图像利用现有技术绘制检测框、合成视频，通过将该预警事件上传到监控平台，便于监控平台进行远程管控，并及时通知提醒渔政监控人员。其它特征与具体实施例1相同，故本具体实施例在此省略。
