标题title
一种油炸花生智能拣选方法
摘要abst
本发明涉及图像数据处理技术领域，具体涉及一种油炸花生智能拣选方法，包括：获取待拣选油炸花生的表面灰度图像，基于表面灰度图像的图像特征，获得每个油炸花生的完整度、发育指数以及油炸色比；基于完整度、发育指数以及油炸色比构建劣质指数，利用劣质指数，改进显著性检测算法中的差异值，获得改进后的显著度，进而获得待拣选油炸花生的拣选结果。本发明最大程度使用油炸花生的视觉特征，多方面对油炸花生质量进行综合评比，可以获得准确性更高的拣选结果，主要应用于油炸花生拣选领域。
权利要求书clms
1.一种油炸花生智能拣选方法，其特征在于，包括以下步骤：获取待拣选油炸花生的表面灰度图像；获取表面灰度图像中每个油炸花生的最外层闭合轮廓；根据每个油炸花生的最外层闭合轮廓内的像素点数量以及最外层闭合轮廓上每个像素点的曲率，确定每个油炸花生的完整度；获取表面灰度图像中每个油炸花生对应的各纹理边缘；根据每个油炸花生的最外层闭合轮廓内像素灰度均值、各个纹理边缘以及纹理边缘个数，确定每个油炸花生的发育指数；将表面灰度图像转换成Lab颜色空间的油炸花生颜色图像；根据油炸花生颜色图像中每个油炸花生的最外层闭合轮廓内每个像素点的亮度，确定每个油炸花生的油炸色比；根据每个油炸花生的完整度、发育指数以及油炸色比，确定每个油炸花生的劣质指数；利用每个油炸花生的劣质指数，改进CA显著性检测算法中的差异值，获得每个油炸花生对应的改进后的显著度；利用所述改进后的显著度，对待拣选油炸花生进行拣选，获得待拣选油炸花生的拣选结果。2.根据权利要求1所述的一种油炸花生智能拣选方法，其特征在于，根据每个油炸花生的最外层闭合轮廓内的像素点数量以及最外层闭合轮廓上每个像素点的曲率，确定每个油炸花生的完整度，包括：将任意一个油炸花生确定为第一选定油炸花生，确定第一选定油炸花生的饱满指数，所述饱满指数与第一选定油炸花生的最外层闭合轮廓内的像素点数量呈现正相关；将第一选定油炸花生的最外层闭合轮廓上的任意一个像素点确定为标定像素点，根据标定像素点以及与标定像素点相邻的像素点的曲率，确定标定像素点的曲率变化系数；根据第一选定油炸花生的最外层闭合轮廓上每个像素点的曲率变化系数与预设阈值的对比结果，确定第一选定油炸花生的轮廓碎裂指数；将第一选定油炸花生的饱满指数与轮廓碎裂指数的比值确定为第一选定油炸花生的完整度。3.根据权利要求2所述的一种油炸花生智能拣选方法，其特征在于，所述第一选定油炸花生的饱满指数的确定过程包括：将所有油炸花生的最外层闭合轮廓内的像素点数量的平均值作为第一比值的分母，将第一选定油炸花生的最外层闭合轮廓内的像素点数量作为第一比值的分子，将所述第一比值确定为第一选定油炸花生的饱满指数。4.根据权利要求2所述的一种油炸花生智能拣选方法，其特征在于，所述标定像素点的曲率变化系数的确定步骤包括：计算标定像素点的前一个像素点和后一个像素点的曲率平均值，将标定像素点的曲率和所述曲率平均值的差值绝对值确定为标定像素点的曲率变化系数。5.根据权利要求4所述的一种油炸花生智能拣选方法，其特征在于，所述第一选定油炸花生的轮廓碎裂指数的确定步骤包括：对第一选定油炸花生的最外层闭合轮廓上每个像素点的曲率变化系数进行归一化处理，获得归一化后的各个曲率变化系数，统计归一化后的各个曲率变化系数大于预设阈值的像素点个数；将归一化后的曲率变化系数大于预设阈值的像素点个数确定为第二比值的分子，将第一选定油炸花生的最外层闭合轮廓上所有像素点个数确定为第二比值的分母，将所述第二比值确定为第一选定油炸花生的轮廓碎裂指数。6.根据权利要求1所述的一种油炸花生智能拣选方法，其特征在于，根据每个油炸花生的最外层闭合轮廓内像素灰度均值、各个纹理边缘以及纹理边缘个数，确定每个油炸花生的发育指数，包括：将任意一个油炸花生确定为第二选定油炸花生，若第二选定油炸花生的最外层闭合轮廓内像素灰度均值不大于第一灰度阈值，则判定第二选定油炸花生为脱皮花生表面区域；若第二选定油炸花生的最外层闭合轮廓内像素灰度均值大于第一灰度阈值且小于第二灰度阈值，则判定第二选定油炸花生为花生内部区域；若第二选定油炸花生的最外层闭合轮廓内像素灰度均值不小于第二灰度阈值，则判定第二选定油炸花生为未脱皮花生表面区域；对于脱皮花生表面区域，将第二选定油炸花生的发育指数确定为数值1；对于花生内部区域，根据第二选定油炸花生的最外层闭合轮廓中的纹理边缘，确定第二选定油炸花生的胚乳发育度，将所述胚乳发育度确定为第二选定油炸花生的发育指数；对于未脱皮花生表面区域，根据第二选定油炸花生对应的任意两个纹理边缘之间的欧氏距离和纹理边缘个数，确定第二选定油炸花生的褶皱分布密度，将所述褶皱分布密度确定为第二选定油炸花生的发育指数。7.根据权利要求6所述的一种油炸花生智能拣选方法，其特征在于，根据第二选定油炸花生的最外层闭合轮廓中的纹理边缘，确定第二选定油炸花生的胚乳发育度，包括：将第二选定油炸花生的最外层闭合轮廓中的纹理边缘确定为胚乳边缘，统计胚乳边缘上的像素点个数；获取最外层闭合轮廓和胚乳边缘上每个像素点的位置，将位置相同像素点确定为第二选定油炸花生的花冠顶点；确定胚乳边缘的最小外接矩形，过所述最小外接矩形的中心做垂线，垂线与胚乳边缘相交获得的两个交点；将两个交点与花冠顶点相连接，将连接后形成的夹角确定为胚乳夹角，计算所述胚乳夹角的余弦值；将所述胚乳边缘上的像素点个数与所述胚乳夹角的余弦值的乘积确定为油炸花生的胚乳发育度；其中，对于存在一个花冠顶点的第二选定油炸花生，计算第二选定油炸花生的胚乳夹角的余弦值；对于存在两个花冠顶点的第二选定油炸花生，计算第二选定油炸花生的两个胚乳夹角均值的余弦值；对于不存在花冠顶点的第二选定油炸花生，则不对第二选定油炸花生进行发育程度分析。8.根据权利要求6所述的一种油炸花生智能拣选方法，其特征在于，根据第二选定油炸花生对应的任意两个纹理边缘之间的欧氏距离和纹理边缘个数，确定第二选定油炸花生的褶皱分布密度，包括：根据第二选定油炸花生对应的任意两个纹理边缘之间的欧氏距离，确定最大欧氏距离；将所述最大欧氏距离与纹理边缘个数的比值确定为第二选定油炸花生的褶皱分布密度。9.根据权利要求1所述的一种油炸花生智能拣选方法，其特征在于，根据油炸花生颜色图像中每个油炸花生的最外层闭合轮廓内每个像素点的亮度，确定每个油炸花生的油炸色比，包括：对于任意一个油炸花生，统计油炸花生的最外层闭合轮廓内亮度小于亮度阈值的像素点个数，将油炸花生的最外层闭合轮廓内所有像素点个数确定为第三比值的分母，将油炸花生的最外层闭合轮廓内所有像素点个数与所述亮度小于亮度阈值的像素点个数的差值确定为第三比值的分子，将所述第三比值确定为油炸花生的油炸色比。10.根据权利要求1所述的一种油炸花生智能拣选方法，其特征在于，根据每个油炸花生的完整度、发育指数以及油炸色比，确定每个油炸花生的劣质指数，包括：对于任意一个油炸花生，计算油炸花生的完整度、发育指数以及油炸色比的乘积，对所述油炸花生的完整度、发育指数以及油炸色比的乘积进行反比例的归一化处理，将反比例的归一化后的乘积确定为油炸花生的劣质指数。
说明书desc
技术领域本发明涉及图像数据处理技术领域，具体涉及一种油炸花生智能拣选方法。背景技术油炸花生作为一种风味小吃，深得人们的喜爱与赞美。随着市场的发展和进步，人们对于食品的市场要求也逐步提升，为了满足食品市场的要求，提高产品质量，需要对油炸花生进行拣选，也就是将低质量的油炸花生挑选出来。传统的油炸花生的拣选流程为人工拣选，其不仅耗费了大量的人力和时间，而且雇佣成本较高。现有专利公开了一种油幕式油炸花生生产系统，其公开号为CN116168025B，该现有专利通过对花生的原始边缘检测算法进行改进，利用像素点的梯度信息获取疑似边缘像素点，根据花生边缘闭合特征对疑似边缘点构成的曲线进行分析，避免油膜对实际花生边缘识别的影响，但是，该现有专利仅对实际花生边缘识别过程进行改进，并没有考虑部分花生在油炸之前已经产生霉变或因油温控制问题导致花生过度油炸产生的黒糊、以及油炸花生发生萎缩导致其表面产生凹凸不平的褶皱的现象，在分析花生油炸效果时的考虑因素不完整，导致油炸花生拣选的准确性较低。发明内容为了解决上述在分析花生油炸效果时的考虑因素不完整，导致油炸花生拣选的准确性较低的技术问题，本发明的目的在于提供一种油炸花生智能拣选方法，所采用的技术方案具体如下：本发明一个实施例提供了一种油炸花生智能拣选方法，该方法包括以下步骤：获取待拣选油炸花生的表面灰度图像；获取表面灰度图像中每个油炸花生的最外层闭合轮廓；根据每个油炸花生的最外层闭合轮廓内的像素点数量以及最外层闭合轮廓上每个像素点的曲率，确定每个油炸花生的完整度；获取表面灰度图像中每个油炸花生对应的各纹理边缘；根据每个油炸花生的最外层闭合轮廓内像素灰度均值、各个纹理边缘以及纹理边缘个数，确定每个油炸花生的发育指数；将表面灰度图像转换成Lab颜色空间的油炸花生颜色图像；根据油炸花生颜色图像中每个油炸花生的最外层闭合轮廓内每个像素点的亮度，确定每个油炸花生的油炸色比；根据每个油炸花生的完整度、发育指数以及油炸色比，确定每个油炸花生的劣质指数；利用每个油炸花生的劣质指数，改进CA显著性检测算法中的差异值，获得每个油炸花生对应的改进后的显著度；利用所述改进后的显著度，对待拣选油炸花生进行拣选，获得待拣选油炸花生的拣选结果。进一步地，根据每个油炸花生的最外层闭合轮廓内的像素点数量以及最外层闭合轮廓上每个像素点的曲率，确定每个油炸花生的完整度，包括：将任意一个油炸花生确定为第一选定油炸花生，确定第一选定油炸花生的饱满指数，所述饱满指数与第一选定油炸花生的最外层闭合轮廓内的像素点数量呈现正相关；将第一选定油炸花生的最外层闭合轮廓上的任意一个像素点确定为标定像素点，根据标定像素点以及与标定像素点相邻的像素点的曲率，确定标定像素点的曲率变化系数；根据第一选定油炸花生的最外层闭合轮廓上每个像素点的曲率变化系数与预设阈值的对比结果，确定第一选定油炸花生的轮廓碎裂指数；将第一选定油炸花生的饱满指数与轮廓碎裂指数的比值确定为第一选定油炸花生的完整度。进一步地，所述第一选定油炸花生的饱满指数的确定过程包括：将所有油炸花生的最外层闭合轮廓内的像素点数量的平均值作为第一比值的分母，将第一选定油炸花生的最外层闭合轮廓内的像素点数量作为第一比值的分子，将所述第一比值确定为第一选定油炸花生的饱满指数。进一步地，所述标定像素点的曲率变化系数的确定步骤包括：计算标定像素点的前一个像素点和后一个像素点的曲率平均值，将标定像素点的曲率和所述曲率平均值的差值绝对值确定为标定像素点的曲率变化系数。进一步地，所述第一选定油炸花生的轮廓碎裂指数的确定步骤包括：对第一选定油炸花生的最外层闭合轮廓上每个像素点的曲率变化系数进行归一化处理，获得归一化后的各个曲率变化系数，统计归一化后的各个曲率变化系数大于预设阈值的像素点个数；将归一化后的曲率变化系数大于预设阈值的像素点个数确定为第二比值的分子，将第一选定油炸花生的最外层闭合轮廓上所有像素点个数确定为第二比值的分母，将所述第二比值确定为第一选定油炸花生的轮廓碎裂指数。进一步地，根据每个油炸花生的最外层闭合轮廓内像素灰度均值、各个纹理边缘以及纹理边缘个数，确定每个油炸花生的发育指数，包括：将任意一个油炸花生确定为第二选定油炸花生，若第二选定油炸花生的最外层闭合轮廓内像素灰度均值不大于第一灰度阈值，则判定第二选定油炸花生为脱皮花生表面区域；若第二选定油炸花生的最外层闭合轮廓内像素灰度均值大于第一灰度阈值且小于第二灰度阈值，则判定第二选定油炸花生为花生内部区域；若第二选定油炸花生的最外层闭合轮廓内像素灰度均值不小于第二灰度阈值，则判定第二选定油炸花生为未脱皮花生表面区域；对于脱皮花生表面区域，将第二选定油炸花生的发育指数确定为数值1；对于花生内部区域，根据第二选定油炸花生的最外层闭合轮廓中的纹理边缘，确定第二选定油炸花生的胚乳发育度，将所述胚乳发育度确定为第二选定油炸花生的发育指数；对于未脱皮花生表面区域，根据第二选定油炸花生对应的任意两个纹理边缘之间的欧氏距离和纹理边缘个数，确定第二选定油炸花生的褶皱分布密度，将所述褶皱分布密度确定为第二选定油炸花生的发育指数。进一步地，根据第二选定油炸花生的最外层闭合轮廓中的纹理边缘，确定第二选定油炸花生的胚乳发育度，包括：将第二选定油炸花生的最外层闭合轮廓中的纹理边缘确定为胚乳边缘，统计胚乳边缘上的像素点个数；获取最外层闭合轮廓和胚乳边缘上每个像素点的位置，将位置相同像素点确定为第二选定油炸花生的花冠顶点；确定胚乳边缘的最小外接矩形，过所述最小外接矩形的中心做垂线，垂线与胚乳边缘相交获得的两个交点；将两个交点与花冠顶点相连接，将连接后形成的夹角确定为胚乳夹角，计算所述胚乳夹角的余弦值；将所述胚乳边缘上的像素点个数与所述胚乳夹角的余弦值的乘积确定为油炸花生的胚乳发育度；其中，对于存在一个花冠顶点的第二选定油炸花生，计算第二选定油炸花生的胚乳夹角的余弦值；对于存在两个花冠顶点的第二选定油炸花生，计算第二选定油炸花生的两个胚乳夹角均值的余弦值；对于不存在花冠顶点的第二选定油炸花生，则不对第二选定油炸花生进行发育程度分析。进一步地，根据第二选定油炸花生对应的任意两个纹理边缘之间的欧氏距离和纹理边缘个数，确定第二选定油炸花生的褶皱分布密度，包括：根据第二选定油炸花生对应的任意两个纹理边缘之间的欧氏距离，确定最大欧氏距离；将所述最大欧氏距离与纹理边缘个数的比值确定为第二选定油炸花生的褶皱分布密度。进一步地，根据油炸花生颜色图像中每个油炸花生的最外层闭合轮廓内每个像素点的亮度，确定每个油炸花生的油炸色比，包括：对于任意一个油炸花生，统计油炸花生的最外层闭合轮廓内亮度小于亮度阈值的像素点个数，将油炸花生的最外层闭合轮廓内所有像素点个数确定为第三比值的分母，将油炸花生的最外层闭合轮廓内所有像素点个数与所述亮度小于亮度阈值的像素点个数的差值确定为第三比值的分子，将所述第三比值确定为油炸花生的油炸色比。进一步地，根据每个油炸花生的完整度、发育指数以及油炸色比，确定每个油炸花生的劣质指数，包括：对于任意一个油炸花生，计算油炸花生的完整度、发育指数以及油炸色比的乘积，对所述油炸花生的完整度、发育指数以及油炸色比的乘积进行反比例的归一化处理，将反比例的归一化后的乘积确定为油炸花生的劣质指数。本发明具有如下有益效果：本发明提供了一种油炸花生智能拣选方法，该方法通过改进图像数据处理领域中的显著性检测算法，确定待拣选油炸花生中每个油炸花生对应的改进后的显著度，对待拣选油炸花生进行拣选，提高了油炸花生拣选的准确性，主要应用于油炸花生拣选领域。为了最大程度地使用油炸花生的视觉特征，综合分析待拣选油炸花生的质量情况，对待拣选油炸花生进行外观特征、发育程度以及颜色特征的分析，以确定每个油炸花生的完整度、发育指数和油炸色比，进而构建每个油炸花生的劣质指数；从三个不同角度分析油炸花生的视觉特征，有效提高了计算的劣质指数的参考价值，有助于后续获得更准确的改进后的显著度，以突出待拣选油炸花生的表面图像中劣质花生区域。本发明从多个考虑因素较为完整地分析花生的油炸效果，以便于基于花生的油炸效果对劣质油炸花生进行准确拣选处理。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一种油炸花生智能拣选方法的流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的技术方案的具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一个实施例。此外，一个或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。需要说明的是，低质量的油炸花生主要体现在三个方面，其一是花生在保存和处理过程中，内部的脆性物质和油脂含量较少，导致花生在油炸过程出现外形不完整的现象；其二，部分花生在油炸之前已经产生霉变或因油温控制问题导致花生过度油炸产生黒糊的现象；其三，油炸花生发生萎缩，导致油炸花生表面产生凹凸不同的褶皱，花生发育程度较差的现象。为了提高油炸花生的生产质量，分析生产流水线上脱油后的油炸花生的图像特征，可以得到待拣选油炸花生中每个油炸花生的劣质指数。利用劣质指数对显著性检测算法进行改进，可以获得准确性更高的显著性，进而实现油炸花生的智能拣选。具体，本实施例提供了一种油炸花生智能拣选方法，如图1所示，包括以下步骤：S1，获取待拣选油炸花生的表面灰度图像。在本实施例中，油炸花生的生产步骤一般分为浸泡盐水、油炸、脱油和加料四个步骤，待拣选油炸花生为脱油后的花生，每间隔预设时间，利用电荷耦合元件相机对位于传送带上的脱油之后的油炸花生的表面图像进行图像采集，获得待拣选油炸花生的表面图像。其中，间隔预设时间可以设置为8秒，实施者可以根据具体实际情况设置拍摄间隔时间；待拣选油炸花生的表面图像中包含多个油炸花生区域，油炸花生区域的花生可以是未脱皮完整花生表面、脱皮完整花生表面、未脱皮半个花生表面、脱皮半个花生内部或者脱皮碎块花生。为了便于后续进行图像分析计算，对待拣选油炸花生的表面图像进行灰度化，获得了待拣选油炸花生的表面灰度图像。灰度化的实现手段包括但不限于：加权平均值法、平均值法、最大值法以及最小值法等，灰度化处理的实现过程为现有技术，此处不再进行详细阐述。为了提高表面灰度图像的清晰度，可以对表面灰度图像进行预处理，即使用中值滤波对表面灰度图像进行去噪，去噪处理后使用直方图均衡化的方式增强图像中花生的对比度，获得预处理后的表面灰度图像。当然，实施者也可以使用其他方式进行图像预处理操作，中值滤波和直方图均衡化的实现过程为现有技术，不在本发明保护范围内，此处不再进行详细阐述。需要说明的是，由于待拣选的油炸花生数量较多，为保证采集到较为完整的油炸花生视觉特征，需要控制传送带的运行速度以及相邻油炸花生之间的间隔距离，以确保传送带上的油炸花生分布均匀，不存在遮挡、重叠现象。至此，本实施例获得了待拣选油炸花生的表面灰度图像。S2，获取表面灰度图像中每个油炸花生的最外层闭合轮廓；根据每个油炸花生的最外层闭合轮廓内的像素点数量以及最外层闭合轮廓上每个像素点的曲率，确定每个油炸花生的完整度。第一步，获取表面灰度图像中每个油炸花生的最外层闭合轮廓。需要说明的是，为了分析待拣选油炸花生中每个油炸花生的外观特征，需要区分表面灰度图像中各个油炸花生区域，确定各个油炸花生区域的最外层闭合轮廓。其中，完整度是指各个油炸花生相对于整个没有发生破裂的油炸花生的完整程度。在本实施例中，首先，利用大津法，对待拣选油炸花生的表面灰度图像进行二值化处理，可以获得待拣选油炸花生的二值图像，大津法的实现过程为现有技术，此处不再进行详细阐述；然后，利用八连通区域标记算法，对待拣选油炸花生的二值图像进行图像处理，可以获得表面灰度图像中的所有连通区域，可以将连通区域确定为单个油炸花生对应的区域，获得每个油炸花生区域；其次，为了便于后续确定不同油炸花生的最外层闭合轮廓，对每个油炸花生区域内的像素点进行标记处理，可以获得标记处理后的油炸花生区域；接着，对于标记处理后的油炸花生区域内的任意一个像素点，判断像素点的四邻域内是否均为所属油炸花生区域内的像素点，若不是，则将像素点确定为所属油炸花生区域的最外层轮廓像素点，若是，则继续遍历所属油炸花生区域内的下一个像素点；最后，对于标记处理后的每个油炸花生区域的每个像素点均进行最外层轮廓像素点判断步骤，可以获得每个油炸花生对应的各个最外层轮廓像素点，将油炸花生对应的各个最外层轮廓像素点平滑地连接在一起，可以获得表面灰度图像中每个油炸花生的最外层闭合轮廓。八连通区域标记算法的实现过程为现有技术，不在本发明保护范围内，此处不再进行详细阐述。第二步，根据每个油炸花生的最外层闭合轮廓内的像素点数量以及最外层闭合轮廓上每个像素点的曲率，确定每个油炸花生的完整度。第一子步骤，将任意一个油炸花生确定为第一选定油炸花生，确定第一选定油炸花生的饱满指数，饱满指数与第一选定油炸花生的最外层闭合轮廓内的像素点数量呈现正相关。在本实施例中，将所有油炸花生的最外层闭合轮廓内的像素点数量的平均值作为第一比值的分母，将第一选定油炸花生的最外层闭合轮廓内的像素点数量作为第一比值的分子，将第一比值确定为第一选定油炸花生的饱满指数。作为示例，第一选定油炸花生的饱满指数的计算公式为：；式中，为第i个油炸花生的饱满指数，第i个油炸花生即为第一选定油炸花生，为第i个油炸花生的最外层闭合轮廓内的像素点数量，/＞为每个油炸花生的最外层闭合轮廓内的像素点数量的平均值，/＞为第一比值。在饱满指数的计算公式中，第i个油炸花生的最外层闭合轮廓内的像素点数量与饱满指数/＞为正相关，第一比值/＞可以表征第i个油炸花生的面积与图像中所有油炸花生的平均面积之间的差异情况，面积即为最外层闭合轮廓内的像素点数量；/＞越小，其说明第i个油炸花生越干瘪或者破裂现象越严重，那么第i个油炸花生的质量越差，第i个油炸花生的饱满指数/＞就会越小；反之，/＞越大，其说明第i个油炸花生越饱满或者破裂现象越轻微，那么第i个油炸花生的质量越高，第i个油炸花生的饱满指数/＞就会越大；参考第i个油炸花生的饱满指数，可以获得每个油炸花生的饱满指数。第二子步骤，将第一选定油炸花生的最外层闭合轮廓上的任意一个像素点确定为标定像素点，根据标定像素点以及与标定像素点相邻的像素点的曲率，确定标定像素点的曲率变化系数；根据第一选定油炸花生的最外层闭合轮廓上每个像素点的曲率变化系数与预设阈值的对比结果，确定第一选定油炸花生的轮廓碎裂指数。需要说明的是，高质量的油炸花生呈现饱满纺锤状，在花冠位置会有明显的突出尖端，而其他边缘较为平滑圆润，花冠尖端或因花生碎裂产生的花生碎块与周围环境有着较大的差异。因此，基于油炸花生的最外层闭合轮廓上每个像素点的曲率变化情况，可以分析油炸花生的轮廓碎裂程度。首先，将第一选定油炸花生的最外层闭合轮廓上的任意一个像素点确定为标定像素点，根据标定像素点以及与标定像素点相邻的像素点的曲率，确定标定像素点的曲率变化系数。在本实施例中，计算标定像素点的前一个像素点和后一个像素点的曲率平均值，将标定像素点的曲率和曲率平均值的差值绝对值确定为标定像素点的曲率变化系数。作为示例，标定像素点的曲率变化系数的计算公式可以为：；式中，为第i个油炸花生的最外层闭合轮廓上的标定像素点的曲率变化系数，为第i个油炸花生上的标定像素点的曲率，/＞为第i个油炸花生上的标定像素点的前一个像素点的曲率，/＞为第i个油炸花生上的标定像素点的后一个像素点的曲率，/＞为求绝对值函数。在曲率变化系数的计算公式中，曲率变化系数可以表征标定像素点的曲率与其相邻像素点的曲率均值之间的差异情况，/＞越大，说明第i个油炸花生的最外层闭合轮廓上的标定像素点处的曲率变化越大，标定像素点越有可能是花冠顶点或是碎块边缘点；反之，/＞越小，说明第i个油炸花生的最外层闭合轮廓上的标定像素点处的曲率变化越小，标定像素点越不可能为花冠顶点或碎块边缘点；绝对值函数是为了避免相减差值为负数的特殊情况；参考第i个油炸花生的最外层闭合轮廓上的标定像素点的曲率变化系数的确定过程，可以获得每个油炸花生的最外层闭合轮廓上的标定像素点的曲率变化系数。其次，根据第一选定油炸花生的最外层闭合轮廓上每个像素点的曲率变化系数与预设阈值的对比结果，确定第一选定油炸花生的轮廓碎裂指数。需要说明的是，一个油炸花生最多有一个花冠顶点，花冠顶点即为边缘突变点，若某个油炸花生存在多个边缘突变点，则说明对应的油炸花生为破损花生的可能性较大。因此，基于每个像素点的曲率变化系数与预设阈值的对比结果，可以分析油炸花生的轮廓碎裂指数。对第一选定油炸花生的最外层闭合轮廓上每个像素点的曲率变化系数进行归一化处理，获得归一化后的各个曲率变化系数，统计归一化后的各个曲率变化系数大于预设阈值的像素点个数；将归一化后的曲率变化系数大于预设阈值的像素点个数确定为第二比值的分子，将第一选定油炸花生的最外层闭合轮廓上所有像素点个数确定为第二比值的分母，将第二比值确定为第一选定油炸花生的轮廓碎裂指数。其中，归一化后的曲率变化系数的取值范围为0到1之间，预设阈值可以设置为0.6，实施者可以根据具体实际情况设置曲率变化系数的阈值，这里不做具体限定。作为示例，第一选定油炸花生的轮廓碎裂指数的计算公式可以为：；式中，为第i个油炸花生的轮廓碎裂指数，/＞为第i个油炸花生的最外层闭合轮廓上归一化后的曲率变化系数大于预设阈值的像素点个数，/＞为第i个油炸花生的最外层闭合轮廓上所有像素点个数，/＞为第二比值。在轮廓碎裂指数的计算公式中，最外层闭合轮廓上曲率变化系数大于预设阈值的像素点即为边缘突变点，边缘突变点的像素点个数可以表征曲率发生较大变化的像素点个数；曲率发生较大变化的像素点个数越多，边缘突变点的个数在整个最外层闭合轮廓上的占比越大，说明对应的油炸花生的破裂程度越高，生产质量越低，第i个油炸花生的轮廓碎裂指数/＞越大；反之，说明对应的油炸花生的破裂程度越低，生产质量越高，第i个油炸花生的轮廓碎裂指数/＞越小；参考第i个油炸花生的轮廓碎裂指数的确定过程，可以获得每个油炸花生的轮廓碎裂指数。第三子步骤，将第一选定油炸花生的饱满指数与轮廓碎裂指数的比值确定为第一选定油炸花生的完整度。在本实施例中，第一选定油炸花生的饱满指数与完整度为正相关关系，而第一选定油炸花生的轮廓碎裂指数与完整度为负相关关系，基于第一选定油炸花生的两个指标与完整度的相关关系，将第一选定油炸花生的饱满指数与轮廓碎裂指数的比值确定为油炸花生的完整度。作为示例，第一选定油炸花生的完整度的计算公式可以为：；式中，为第i个油炸花生的完整度，/＞为第i个油炸花生的饱满指数，/＞为第i个油炸花生的轮廓碎裂指数。在完整度的计算公式中，饱满指数越大，说明第i个油炸花生的饱满程度越大，油炸花生的完整程度越大，完整程度也就是完整度，第i个油炸花生的质量越高；反之，第i个油炸花生越干瘪，油炸花生的完整程度越小，第i个油炸花生的质量越低；轮廓碎裂指数/＞越大，说明第i个油炸花生的最外层闭合轮廓上的边缘突变点越多，第i个油炸花生的破裂程度越大，油炸花生的完整度越低，花生质量越低；反之，第i个油炸花生的破裂程度越小，油炸花生的完整度越高，花生质量越高。至此，本实施例获得了待拣选油炸花生中每个油炸花生的完整度。S3，获取表面灰度图像中每个油炸花生对应的各纹理边缘；根据每个油炸花生的最外层闭合轮廓内像素灰度均值、各个纹理边缘以及纹理边缘个数，确定每个油炸花生的发育指数。需要说明的是，现针对油炸花生发育程度进行分析，首先，油炸花生外表面褶皱越多，褶皱分布越密集，说明对应的油炸花生的生长状况越差，油炸花生颗粒越干瘪，质量越差；其次，油炸花生内部的胚乳沟越宽，说明对应的油炸花生的发育越差，油炸花生的质量越低。第一步，获取表面灰度图像中每个油炸花生对应的各纹理边缘。在本实施例中，通过霍夫直线变换，对表面灰度图像进行图像处理，可以获得表面灰度图像中每个油炸花生对应的各纹理边缘。霍夫直线变换的实现过程为现有技术，不在本发明保护范围内，此处不再进行详细阐述。第二步，根据每个油炸花生的最外层闭合轮廓内像素灰度均值、各个纹理边缘以及纹理边缘个数，确定每个油炸花生的发育指数。第一子步骤，根据每个油炸花生的最外层闭合轮廓内像素灰度均值，确定每个油炸花生的所属性质。在本实施例中，将任意一个油炸花生确定为第二选定油炸花生，若第二选定油炸花生的最外层闭合轮廓内像素灰度均值不大于第一灰度阈值，则判定第二选定油炸花生为脱皮花生表面区域；若第二选定油炸花生的最外层闭合轮廓内像素灰度均值大于第一灰度阈值且小于第二灰度阈值，则判定第二选定油炸花生为花生内部区域；若第二选定油炸花生的最外层闭合轮廓内像素灰度均值不小于第二灰度阈值，则判定第二选定油炸花生为未脱皮花生表面区域。其中，第一灰度阈值可以设置为由历史经验获取的油炸后的脱皮花生表面的灰度均值，第二灰度值阈值可以设置为由历史经验获取的油炸后的花生内部区域的灰度均值。第一灰度阈值和第二灰度值阈值的数值大小可以由实施者根据具体实际情况设置，这里不做具体限定。需要说明的是，花生内部区域存在胚乳沟，花生内部区域可以是未脱皮的半个花生中呈现水平状态的表面区域，也可以是脱皮的半个花生中呈现水平状态的表面区域。第二子步骤，确定不同属性的油炸花生的发育指数。对于脱皮花生表面区域，将第二选定油炸花生的发育指数确定为数值1；对于花生内部区域，根据第二选定油炸花生的最外层闭合轮廓中的纹理边缘，确定第二选定油炸花生的胚乳发育度，将胚乳发育度确定为第二选定油炸花生的发育指数；对于未脱皮花生表面区域，根据第二选定油炸花生对应的任意两个纹理边缘之间的欧氏距离和纹理边缘个数，确定第二选定油炸花生的褶皱分布密度，将褶皱分布密度确定为第二选定油炸花生的发育指数。在本实施例中，对于脱皮花生表面区域，不存在明显的发育图像特征，不考虑其对应的油炸花生的发育程度，仅从上述完整度和后续的油炸色比来分析对应的油炸花生的质量。对于存在胚乳沟的花生内部区域，通过分析胚乳沟区域的图像特征，将油炸花生的胚乳发育度作为油炸花生的发育指数。对于未脱皮花生表面区域，通过分析油炸花生表面的褶皱情况，将油炸花生的褶皱分布密度作为油炸花生的发育指数。每个油炸花生均有其对应的发育指数，通过分析油炸花生的不同属性，针对性计算油炸花生的发育指数，有助于提高确定的油炸花生的发育指数的准确性，提升后续进行油炸花生拣选的可靠性。其中，对于花生内部区域，根据第二选定油炸花生的最外层闭合轮廓中的纹理边缘，确定第二选定油炸花生的胚乳发育度。需要说明的是，花生碎裂成两半时，两半对应的区域图像表示为原花生内在特征，区域中心有明显的胚乳沟连接花生上下两端，胚乳边缘在汇聚点的夹角越大，胚乳沟越宽，表示胚乳未得到充分的发育，花生质量越差；反之，夹角越小，胚乳沟越窄，胚乳越可以得到较好的发育，花生质量越好。其次，胚乳边缘的长度也可反映花生的质量，胚乳边缘越长，花生颗粒越大，花生生长状况越好，花生质量越好。将第二选定油炸花生的最外层闭合轮廓中的纹理边缘确定为胚乳边缘，统计胚乳边缘上的像素点个数；获取最外层闭合轮廓和胚乳边缘上每个像素点的位置，将位置相同像素点确定为第二选定油炸花生的花冠顶点；确定胚乳边缘的最小外接矩形，过最小外接矩形的中心做垂线，垂线与胚乳边缘相交获得的两个交点；将两个交点与花冠顶点相连接，将连接后形成的夹角确定为胚乳夹角，计算胚乳夹角的余弦值；将胚乳边缘上的像素点个数与胚乳夹角的余弦值的乘积确定为油炸花生的胚乳发育度。值得说明的是，对于半个油炸花生内部区域，对其进行纹理边缘检测时，只能检测到一个闭合纹理边缘，且该闭合纹理边缘只能为胚乳边缘。需要说明的是，花冠顶点可能存在一个或两个，对于仅存在一个花冠顶点的第二选定油炸花生，计算第二选定油炸花生的胚乳夹角的余弦值；对于存在两个花冠顶点的第二选定油炸花生，计算第二选定油炸花生的两个胚乳夹角均值的余弦值；对于不存在花冠顶点的第二选定油炸花生，则不对第二选定油炸花生进行发育程度分析。其中，胚乳边缘形成的夹角均值为胚乳沟上下两个汇聚点处的夹角均值，将胚乳夹角记为，/＞。作为示例，对于仅存在一个花冠顶点的第二选定油炸花生，第二选定油炸花生的胚乳发育度的计算公式可以为：；式中，为第i个油炸花生的胚乳发育度，第i个油炸花生可以为第二选定油炸花生，/＞为第i个油炸花生的胚乳边缘上的像素点个数，/＞为第i个油炸花生的胚乳夹角，为第i个油炸花生的胚乳夹角的余弦值，/＞为余弦函数。在胚乳发育度的计算公式中，胚乳夹角与胚乳发育度为负相关关系；胚乳夹角越大，说明胚乳沟越宽，花生生长状况越不好，胚乳发育度越小，反之，胚乳沟越窄，花生生长状况越好，胚乳发育度越大；胚乳边缘上的像素点个数与胚乳发育度为正相关关系；胚乳边缘上的像素点个数/＞越大，说明胚乳边缘越长，油炸花生颗粒越大，该油炸花生的生长状况越好，胚乳发育度越大，油炸花生质量越高；反之，油炸花生颗粒越小，油炸花生的生长状况越差，胚乳发育度越小，油炸花生质量越低。其次，对于未脱皮花生表面区域，根据第二选定油炸花生对应的任意两个纹理边缘之间的欧氏距离和纹理边缘个数，确定第二选定油炸花生的褶皱分布密度欧氏距离，具体实现步骤可以包括：在本实施例中，根据第二选定油炸花生对应的任意两个纹理边缘之间的欧氏距离，确定最大欧氏距离；将最大欧氏距离与纹理边缘个数的比值确定为第二选定油炸花生的褶皱分布密度。欧氏距离的计算过程为现有技术，不在本发明保护范围内，此处不再进行详细阐述。作为示例，第二选定油炸花生的褶皱分布密度的计算公式可以为：；式中，为第i个油炸花生的褶皱分布密度，/＞为第i个油炸花生对应的最大欧氏距离，/＞为第i个油炸花生对应的纹理边缘个数。在褶皱分布密度的计算公式中，可以表征第i个油炸花生的最外侧边缘距离，最外侧边缘距离与纹理边缘个数的比值越大，说明第i个油炸花生的褶皱分布越密集，第i个油炸花生颗粒越不饱满，花生质量越差；反之，表示第i个油炸花生的褶皱分布越离散，第i个油炸花生颗粒越饱满，花生质量越好。至此，本实施例获得了待拣选油炸花生中每个油炸花生的发育指数。S4，将表面灰度图像转换成Lab颜色空间的油炸花生颜色图像；根据油炸花生颜色图像中每个油炸花生的最外层闭合轮廓内每个像素点的亮度，确定每个油炸花生的油炸色比。需要说明的是，对油炸花生进行颜色特征分析，油炸花生产生霉变或油炸过程因油温因素导致焦糊时，油炸花生表面呈现焦黑色，焦黑色的像素点的亮度值较低，故可以将油炸花生转换成Lab颜色空间进行分析，获得每个油炸花生的油炸色比。第一步，将表面灰度图像转换成Lab颜色空间的油炸花生颜色图像。在本实施例中，为了确定油炸花生图像中每个像素点的亮度，对表面灰度图像进行颜色空间分析，可以获得基于Lab颜色空间的油炸花生颜色图像。油炸花生颜色图像的转换过程为现有技术，不在本发明保护范围内，此处不再进行详细阐述。第二步，根据油炸花生颜色图像中每个油炸花生的最外层闭合轮廓内每个像素点的亮度，确定每个油炸花生的油炸色比。对于任意一个油炸花生，统计油炸花生的最外层闭合轮廓内亮度小于亮度阈值的像素点个数，将油炸花生的最外层闭合轮廓内所有像素点个数确定为第三比值的分母，将油炸花生的最外层闭合轮廓内所有像素点个数与亮度小于亮度阈值的像素点个数的差值确定为第三比值的分子，将第三比值确定为油炸花生的油炸色比。其中，亮度阈值可以设置为10，实施者可以根据具体实际情况设置亮度阈值的大小，可以将亮度小于亮度阈值的像素点确定为焦霉像素点。作为示例，油炸花生的油炸色比的计算公式可以为：；式中，为第i个油炸花生的油炸色比，/＞为第i个油炸花生的最外层闭合轮廓内所有像素点个数，/＞为第i个油炸花生的最外层闭合轮廓内亮度小于亮度阈值的像素点个数，/＞为第三比值。在油炸色比的计算公式中，亮度小于亮度阈值的像素点个数越多，即焦霉像素点个数越多，表示油炸花生越有可能是产生霉变或油炸过度导致焦糊，焦霉像素点个数与油炸色比为负相关关系；油炸色比越小，说明油炸花生的颜色越不正常，对应的油炸花生的质量越差，相反，油炸色比越大，说明油炸花生颜色越正常，对应的油炸花生的质量越好。至此，本实施例获得了待拣选油炸花生中每个油炸花生的油炸色比。S5，根据每个油炸花生的完整度、发育指数以及油炸色比，确定每个油炸花生的劣质指数；利用每个油炸花生的劣质指数，改进CA显著性检测算法中的差异值，获得每个油炸花生对应的改进后的显著度。第一步，根据每个油炸花生的完整度、发育指数以及油炸色比，确定每个油炸花生的劣质指数。对于任意一个油炸花生，计算油炸花生的完整度、发育指数以及油炸色比的乘积，对油炸花生的完整度、发育指数以及油炸色比的乘积进行反比例的归一化处理，将反比例的归一化后的乘积确定为油炸花生的劣质指数。作为示例，油炸花生的劣质指数的计算公式可以为：；式中，为第i个油炸花生的劣质指数，/＞为归一化函数，/＞为第i个油炸花生的完整度，/＞为第i个油炸花生的发育指数，/＞为第i个油炸花生的油炸色比。在劣质指数的计算公式中，第i个油炸花生的完整度越大，表示第i个油炸花生的颗粒饱满度越高；第i个油炸花生的发育指数/＞越大，表示第i个油炸花生的生长状况越良好；第i个油炸花生的油炸色比/＞越大，表示第i个油炸花生内花生焦霉占比越小；/＞越大，表示第i个油炸花生的质量越高，则第i个油炸花生的劣质指数越小；为了减少计算量，对/＞进行归一化处理，使劣质指数的取值范围为0到1之间。需要说明的是，在计算油炸花生的劣质指数时，从三个不同角度分析油炸花生的质量，可以有效提高每个油炸花生的劣质指数的参考价值，便于后续获得更准确的改进后的显著度。第二步，利用每个油炸花生的劣质指数，改进CA显著性检测算法中的差异值，获得每个油炸花生对应的改进后的显著度。第一子步骤，利用每个油炸花生的劣质指数，获得每个油炸花生对应的与各个油炸花生之间的新的差异度。作为示例，新的差异值的计算公式可以为：；式中，为第i个油炸花生对应的与第k个油炸花生之间的新的差异度，/＞为第i个油炸花生的劣质指数，/＞为第k个油炸花生的劣质指数，c为超参数，为第i个油炸花生对应的与第k个油炸花生之间的空间欧氏距离。在新的差异值的计算公式中，第i个油炸花生对应多个新的差异度，超参数c可以取经验值为3；越大，说明两个油炸花生之间的劣质指数差异度越大，第i个油炸花生对应的与第k个油炸花生之间的新的差异度越大，说明第i个油炸花生与其他油炸花生的差异度越大，第i个油炸花生的质量越低，后续计算的显著值越大；反之，说明第i个油炸花生与其他油炸花生的差异度越小，第i个油炸花生的质量越高，后续计算的显著值越小；CA显著性检测算法中的新的差异值的确定过程以及空间欧氏距离的计算过程均为现有技术，此处不再进行详细阐述。第二子步骤，根据每个油炸花生对应的与各个油炸花生之间的新的差异度，计算每个油炸花生对应的改进后的显著度。作为示例，油炸花生对应的改进后的显著度的计算公式可以为：；式中，为第i个油炸花生对应的改进后的显著度，/＞为以自然常数e为底的指数函数，K为待拣选油炸花生的表面图像中油炸花生的个数，/＞为第i个油炸花生对应的与第k个油炸花生之间的新的差异度。在显著度的计算公式中，新的差异度与显著度为正相关关系，第i个油炸花生对应的与第k个油炸花生之间的新的差异度越大，第i个油炸花生的显著度越大，在待拣选油炸花生的表面图像中越明显，也就是将质量不达标的油炸花生进行显著性增强；CA显著性检测算法的实现过程为现有技术，此处不再进行详细阐述。/＞至此，本实施例获得了待拣选油炸花生中每个油炸花生对应的改进后的显著度。S6，利用改进后的显著度，对待拣选油炸花生进行拣选，获得待拣选油炸花生的拣选结果。在本实施例中，显著度阈值可以取经验值为0.7，设定显著度大于显著度阈值0.7的油炸花生为劣质油炸花生，设定显著度不大于显著度阈值的油炸花生不为劣质油炸花生，即为优质油炸花生。显著度阈值的大小可以由实施者根据具体实际情况设置，这里不做具体限定。若任意一个油炸花生的显著度大于显著度阈值，则判定对应的油炸花生为劣质油炸花生区域，将劣质油炸花生拣选出来，否则，判定对应的油炸花生不为优质油炸花生。在比较判断后，通过图像分割算法将劣质花生分割处理，即将劣质油炸花生拣选出来。图像分割算法的实现过程为现有技术不在本发明保护范围内，此处不再进行详细阐述。本发明提供了一种油炸花生智能拣选方法，该拣选方法对脱油之后的油炸花生进行视觉检测，结合花生的完整情况、发育状况以及油炸色泽进行综合考虑，确定每个油炸花生的劣质指数，以改进CA显著性检测算法中的差异度，实现油炸花生的准确拣选。以上所述实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的范围，均应包含在本发明的保护范围之内。
