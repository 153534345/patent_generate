标题title
基于大数据的天然气船舶动力异常智能监控方法
摘要abst
本发明涉及数据处理领域，具体涉及基于大数据的天然气船舶动力异常智能监控方法，采集各监控数据序列；根据各监控数据序列的分布得到各数据点的异常变化熵；根据噪声数据序列中各数据点截取范围内各窗口的频谱信号得到各数据点的最终频域异常因子，结合噪声数据序列各数据点的异常变化熵得到系统异质性序列中各数据点的自适应k值；采用LOF异常检测算法判断各时刻的异常情况，完成天然气船舶动力异常的智能监控。提高了算法的准确度、可靠度，有利于对天然气船舶动力系统的各监控数据序列进行全面分析，增加了监控的客观性。
权利要求书clms
1.基于大数据的天然气船舶动力异常智能监控方法，其特征在于，该方法包括以下步骤：采集各监控数据序列；设置各监控数据序列各数据点的截取范围；获取各监控数据序列各数据点的异常变化熵；将各数据点在所有监控数据序列的异常变化熵的均值记为各数据点的平均异常变化熵，根据各数据点的平均异常变化熵构建系统异质性序列；根据噪声数据序列各数据点的异常变化熵得到各数据点在截取范围内分割的窗口数量；基于噪声数据序列各窗口内各数据点的推进器转速获取各窗口频谱信号的低通滤波器截止频率；根据噪声数据序列各窗口的低通滤波器截止频率得到各窗口的频域能量异常比值；将噪声数据序列各窗口频谱信号的能量与能量衰减一半时3dB带宽的比值作为窗口的峰值带宽比；根据噪声数据序列各窗口的峰值带宽比得到各窗口的峰值带宽比差异系数；根据噪声数据序列各窗口的频域能量异常比值及峰值带宽比差异系数得到噪声数据序列各数据点的最终频域异常因子，结合噪声数据序列各数据点的异常变化熵及最终频域异常因子得到各数据点的时频跳变性；根据系统异质性序列各数据点的平均异常变化熵及噪声数据序列各数据点的时频跳变性得到系统异质性序列各数据点的自适应k值；根据系统异质性序列各数据点的自适应k值得到系统异质性序列各数据点的局部离群因子，结合各数据点的局部离群因子完成天然气船舶动力异常的智能监控。2.如权利要求1所述的基于大数据的天然气船舶动力异常智能监控方法，其特征在于，所述设置各监控数据序列各数据点的截取范围的具体步骤为：对于各监控数据序列各数据点，以数据点为中心，获取左右两侧相同数量的数据点作为中心数据点的截取范围。3.如权利要求1所述的基于大数据的天然气船舶动力异常智能监控方法，其特征在于，所述获取各监控数据序列各数据点的异常变化熵的具体步骤为：对于各监控数据序列各数据点截取范围内的每个数据点，获取每个数据点的数值在截取范围内出现的概率，根据截取范围内每个数据点的概率得到各监控数据序列各数据点的异常变化熵。4.如权利要求1所述的基于大数据的天然气船舶动力异常智能监控方法，其特征在于，所述根据噪声数据序列各数据点的异常变化熵得到各数据点在截取范围内分割的窗口数量的具体步骤为：设置窗口变换系数；将窗口变换系数与噪声数据序列各数据点的异常变化熵的乘积作为噪声数据序列各数据点在截取范围内分割的窗口数量；噪声数据序列各数据点在截取范围内分割的窗口数量与噪声数据序列各数据点的异常变化熵成正相关关系。5.如权利要求1所述的基于大数据的天然气船舶动力异常智能监控方法，其特征在于，所述基于噪声数据序列各窗口内各数据点的推进器转速获取各窗口频谱信号的低通滤波器截止频率的表达式为：式中，表示噪声数据序列/＞时刻数据点截取范围内第/＞个窗口内各数据点的推进器转速均值，/＞为转速映射系数，/＞为噪声数据序列/＞时刻数据点截取范围内第/＞个窗口内频谱信号的低通滤波器截止频率。6.如权利要求1所述的基于大数据的天然气船舶动力异常智能监控方法，其特征在于，所述根据噪声数据序列各窗口的低通滤波器截止频率得到各窗口的频域能量异常比值的具体步骤为：对于噪声数据序列各窗口，采用窗口的低通滤波器截止频率对窗口内的频谱信号进行滤波，将滤波前的频谱信号记为频域分量，将滤波后剩余的频谱信号记为异常频域分量；将窗口各频域分量求和得到总频域能量，将窗口各异常频域分量求和得到异常频域能量；将窗口内异常频域能量与总频域能量的比值作为窗口的频域能量异常比值。7.如权利要求1所述的基于大数据的天然气船舶动力异常智能监控方法，其特征在于，所述根据噪声数据序列各窗口的峰值带宽比得到各窗口的峰值带宽比差异系数的具体步骤为：对于噪声数据序列各窗口，获取窗口的峰值带宽比，计算窗口的峰值带宽比与截取范围内其他所有窗口的峰值带宽比的差值绝对值的和值，将所述和值记为窗口的峰值带宽比差异系数。8.如权利要求1所述的基于大数据的天然气船舶动力异常智能监控方法，其特征在于，所述根据噪声数据序列各窗口的频域能量异常比值及峰值带宽比差异系数得到噪声数据序列各数据点的最终频域异常因子的具体步骤为：对于噪声数据序列各数据点的截取范围，将截取范围内相邻两个窗口的频域能量异常比值的差值的L2范数记为第一差值，对截取范围内各相邻两个窗口的第一差值求均值得到截取范围的第一参数；将截取范围内各窗口的峰值带宽比差异系数求和得到截取范围的第二参数；将截取范围的第一参数与第二参数的和值作为噪声数据序列各数据点的最终频域异常因子。9.如权利要求1所述的基于大数据的天然气船舶动力异常智能监控方法，其特征在于，所述结合噪声数据序列各数据点的异常变化熵及最终频域异常因子得到各数据点的时频跳变性的具体步骤为：对于噪声数据序列各数据点，将数据点的时频跳变性与异常变化熵的乘积作为数据点的时频跳变性。10.如权利要求1所述的基于大数据的天然气船舶动力异常智能监控方法，其特征在于，所述根据系统异质性序列各数据点的平均异常变化熵及噪声数据序列各数据点的时频跳变性得到系统异质性序列各数据点的自适应k值的表达式为：式中，表示系统异质性序列/＞时刻数据点的平均异常变换熵，/＞为噪声数据序列/＞时刻数据点的时频跳变性，/＞表示向下取整函数，/＞为噪声数据序列与系统异质性序列的相关性系数，/＞为系统异质性序列/＞时刻数据点的自适应k值。
说明书desc
技术领域本发明主要涉及大数据技术处理领域，具体为基于大数据的天然气船舶动力异常智能监控方法。背景技术天然气船舶是指以天然气作为船舶燃料的船舶，相比于传统的燃油船舶，天然气船舶具有较低的碳排放，且具有运输成本低、震动噪音小的优点，但是由于燃料系统更加复杂，所以可能会出现不稳定的现象。发动机是为船舶提供动力的核心，发动机工作的稳定与否关系到船舶的正常运行甚至关系到船上工作人员的生命安全，如果在正常航行时出现动力异常将会出现不可预估的损失。传统的船舶动力检测方法主要依靠高素质的技术人员实时检测，但是这种需要花费极大的时间成本和资金成本，且依靠人工的检测方式具有一定的主观性，故障检测准确度和效率较低。综上所述，本发明提出基于大数据的天然气船舶动力异常智能监控方法，采集天然气船舶动力系统的各监控数据序列，结合各监控数据序列分析计算LOF异常检测算法中的自适应k值，完成天然气船舶动力异常智能监控。发明内容为了解决上述技术问题，本发明提供基于大数据的天然气船舶动力异常智能监控方法，以解决现有的问题。本发明的基于大数据的天然气船舶动力异常智能监控方法采用如下技术方案：本发明一个实施例提供了基于大数据的天然气船舶动力异常智能监控方法，该方法包括以下步骤：采集各监控数据序列；设置各监控数据序列各数据点的截取范围；获取各监控数据序列各数据点的异常变化熵；将各数据点在所有监控数据序列的异常变化熵的均值记为各数据点的平均异常变化熵，根据各数据点的平均异常变化熵构建系统异质性序列；根据噪声数据序列各数据点的异常变化熵得到各数据点在截取范围内分割的窗口数量；基于噪声数据序列各窗口内各数据点的推进器转速获取各窗口频谱信号的低通滤波器截止频率；根据噪声数据序列各窗口的低通滤波器截止频率得到各窗口的频域能量异常比值；将噪声数据序列各窗口频谱信号的能量与能量衰减一半时3dB带宽的比值作为窗口的峰值带宽比；根据噪声数据序列各窗口的峰值带宽比得到各窗口的峰值带宽比差异系数；根据噪声数据序列各窗口的频域能量异常比值及峰值带宽比差异系数得到噪声数据序列各数据点的最终频域异常因子，结合噪声数据序列各数据点的异常变化熵及最终频域异常因子得到各数据点的时频跳变性；根据系统异质性序列各数据点的平均异常变化熵及噪声数据序列各数据点的时频跳变性得到系统异质性序列各数据点的自适应k值；根据系统异质性序列各数据点的自适应k值得到系统异质性序列各数据点的局部离群因子，结合各数据点的局部离群因子完成天然气船舶动力异常的智能监控。优选的，所述设置各监控数据序列各数据点的截取范围的具体步骤为：对于各监控数据序列各数据点，以数据点为中心，获取左右两侧相同数量的数据点作为中心数据点的截取范围。优选的，所述获取各监控数据序列各数据点的异常变化熵的具体步骤为：对于各监控数据序列各数据点截取范围内的每个数据点，获取每个数据点的数值在截取范围内出现的概率，根据截取范围内每个数据点的概率得到各监控数据序列各数据点的异常变化熵。优选的，所述根据噪声数据序列各数据点的异常变化熵得到各数据点在截取范围内分割的窗口数量的具体步骤为：设置窗口变换系数；将窗口变换系数与噪声数据序列各数据点的异常变化熵的乘积作为噪声数据序列各数据点在截取范围内分割的窗口数量；噪声数据序列各数据点在截取范围内分割的窗口数量与噪声数据序列各数据点的异常变化熵成正相关关系。优选的，所述基于噪声数据序列各窗口内各数据点的推进器转速获取各窗口频谱信号的低通滤波器截止频率的表达式为：式中，表示噪声数据序列/＞时刻数据点截取范围内第/＞个窗口内各数据点的推进器转速均值，/＞为转速映射系数，/＞为噪声数据序列/＞时刻数据点截取范围内第/＞个窗口内频谱信号的低通滤波器截止频率。优选的，所述根据噪声数据序列各窗口的低通滤波器截止频率得到各窗口的频域能量异常比值的具体步骤为：对于噪声数据序列各窗口，采用窗口的低通滤波器截止频率对窗口内的频谱信号进行滤波，将滤波前的频谱信号记为频域分量，将滤波后剩余的频谱信号记为异常频域分量；将窗口各频域分量求和得到总频域能量，将窗口各异常频域分量求和得到异常频域能量；将窗口内异常频域能量与总频域能量的比值作为窗口的频域能量异常比值。优选的，所述根据噪声数据序列各窗口的峰值带宽比得到各窗口的峰值带宽比差异系数的具体步骤为：对于噪声数据序列各窗口，获取窗口的峰值带宽比，计算窗口的峰值带宽比与截取范围内其他所有窗口的峰值带宽比的差值绝对值的和值，将所述和值记为窗口的峰值带宽比差异系数。优选的，所述根据噪声数据序列各窗口的频域能量异常比值及峰值带宽比差异系数得到噪声数据序列各数据点的最终频域异常因子的具体步骤为：对于噪声数据序列各数据点的截取范围，将截取范围内相邻两个窗口的频域能量异常比值的差值的L2范数记为第一差值，对截取范围内各相邻两个窗口的第一差值求均值得到截取范围的第一参数；将截取范围内各窗口的峰值带宽比差异系数求和得到截取范围的第二参数；将截取范围的第一参数与第二参数的和值作为噪声数据序列各数据点的最终频域异常因子。优选的，所述结合噪声数据序列各数据点的异常变化熵及最终频域异常因子得到各数据点的时频跳变性的具体步骤为：对于噪声数据序列各数据点，将数据点的时频跳变性与异常变化熵的乘积作为数据点的时频跳变性。优选的，所述根据系统异质性序列各数据点的平均异常变化熵及噪声数据序列各数据点的时频跳变性得到系统异质性序列各数据点的自适应k值的表达式为：式中，表示系统异质性序列/＞时刻数据点的平均异常变换熵，/＞为噪声数据序列/＞时刻数据点的时频跳变性，/＞表示向下取整函数，/＞为噪声数据序列与系统异质性序列的相关性系数，/＞为系统异质性序列/＞时刻数据点的自适应k值。本发明至少具有如下有益效果：本发明方法可实现对天然气船舶动力异常的智能监控，相比于传统的LOF异常检测算法，本发明使用大数据技术，基于各监控数据序列各时刻数据点的异常变化熵在时域融合得到的平均异常变化熵进行分析，将各监控数据序列的异常情况结合起来，有利于对天然气船舶动力数据的全面分析，提高数据的准确性；通过将与发动机最相关的噪声数据转换到频域进行分析，根据噪声数据序列各数据点的异常变换熵对各数据点截取范围内的窗口进行均匀分割，实现自适应调整窗口的目的，有益于实现对实时数据频谱信号的异常监测；结合噪声数据在时域与频域的异常信息，将异常值进行数字化度量，以此为依据自适应调整LOF异常检测算法中的值，提高算法的准确度、可靠度。由于该方法不参与人工的主观评判，因此对天然气船舶动力系统的异常监控更加客观，且该方法的检测精度较高。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明提供的基于大数据的天然气船舶动力异常智能监控方法的流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的基于大数据的天然气船舶动力异常智能监控方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的基于大数据的天然气船舶动力异常智能监控方法的具体方案。本发明一个实施例提供的基于大数据的天然气船舶动力异常智能监控方法。具体的，提供了如下的基于大数据的天然气船舶动力异常智能监控方法，请参阅图1，该方法包括以下步骤：步骤S001，采集天然气船舶动力系统相关的各监控数据序列并进行预处理。本实施例主要通过大数据技术对天然气船舶动力异常进行智能监控。天然气船舶的类型有很多种，具体根据使用天然气的形式和发动机技术分为：LNG船、LPG船、CNG船、LBG船和Dual-Fuel船等，它们都是压缩天然气作为燃料进行运输的船舶，只是压缩天然气的形式和类型略有不同。本发明实施例选取市场保有量最高且使用频率最多的LNG船为例。大型天然气船舶上一般安装有成百上千个传感器，共同对船舶的运行数据进行实时监控，以此形成大量的数据，而通过单一的计算器无法分析处理这些数据信息，因此需要将采集到的数据上传到IoT智能数据采集平台。该平台将实时数据分发到Apache Spark平台进行分析处理，对船舶动力数据进行实时监控。实现对天然气动力船舶的异常监控，首先需要采集天然气船舶动力相关的传感器数据。由于数据指标众多，且内部之间具有一定的相关性，因此本实施例选取最具代表性的四个指标作为异常检测的标准，分别为与发动机相关的：排气温度，燃气供应压力，推进器转速和噪声。其中，噪声为监测发动机的噪声。这些数据通过安装在船舶上的实时监测系统VMS获取。为提高异常检测的准确性，每间隔20ms对数据进行一次采集，由此得到各监控数据。由于各项指标的单位、大小各不相同，为了对数据进行统一，方便后续进行计算，对数据进行线性归一化处理，即可得到天然气船舶动力相关的各监控数据序列。步骤S002，对各监控数据序列进行分析得到系统异质性序列各数据点的自适应k值。由于传感器连续不断地采集数据，当时间足够长时，数据量趋近无限大。为简化各监控数据序列中各数据点的计算，本实施例对各监控数据序列中各数据点的计算范围进行截取，即以各数据点为中心数据点、获取中心数据点左右两侧各250个数据点作为中心数据点的截取范围，即获取的截取范围为时间间隔范围内数据点。由于各监控数据序列中异常值的显著程度不同，此处通过构建各监控数据序列中各数据点在截取范围内的异常变化熵，用于表征不同数据序列各数据点的异常显著程度。式中，表示时间间隔/＞内采集到的数据量，/＞表示各监控数据序列在/＞时刻数据点的截取范围内/＞时刻数据点的数值，/＞表示各监控数据序列在/＞时刻数据点的截取范围内数值为/＞的概率，/＞表示各监控数据序列在/＞时刻的异常变化熵，/＞、/＞、/＞、/＞分别为排气温度、燃气供应压力、推进器转速和噪声数据序列。需要说明的是，若天然气船舶动力系统的各监控数据均正常，则时刻数据点的截取范围内每个数据点的数值应该在一定的范围内平稳波动，那么/＞将越趋近于1，将越趋近于0，所以/＞值将越趋近于0。通过构建各监控数据序列各数据点的异常变换熵，可以反映各监控数据中各数据点的异常显著程度。当天然气船舶动力出现异常时，可能在各数据点的各监控数据序列中均有体现，为了避免单个动力相关的数据传感器采集异常而引起的误差，因此计算各监控数据序列中各数据点的平均异常变化熵，由此得到系统异质性序列。式中，表示各监控数据序列中/＞时刻数据点的异常变化熵，表示本实施例中选取的四种监控数据序列，/＞取值为4，/＞表示系统异质性序列中/＞时刻数据点的平均异常变化熵。检测天然气船舶的动力异常时，需要重点关注与发动机直接相关的发动机的噪声，发动机的工作状态会直接对噪声产生影响。根据天然气船舶的航速，正常的噪声范围是在。当发动机内部出现点火系统故障、燃料供应问题、冷却系统故障、润滑系统故障或者内部零件脱落等问题时，都会使得发动机内部出现异响。对噪声的监控是一个长期的过程，因此噪声数据序列是一个无限长的时域数据，而离散傅里叶变换无法对其进行分析。针对这个问题，对噪声数据序列中各数据点的截取范围施加窗口，再选择合适的窗口大小后，对每个窗口内的时域数据进行快速傅里叶变换，得到各窗口内噪声的频谱信号。需要选取合适的窗口大小才能够准确地分析频谱信号。较小的窗口能够提供更高的时间分辨率，捕捉信号的快速变化，但是会导致频率分辨率降低；较大的窗口可以提供较高的频率分量，同时减少频率泄露。因此在发动机正常工作中选取较小的窗口，用来捕捉信号的快速变化；当噪声异常时选取较大的窗口，提高频率分辨率。本实施例具体根据噪声数据序列中各数据点的异常变化熵得到各数据点在截取范围内分割的窗口数量。式中，为取整函数，/＞为噪声数据序列/＞时刻数据点的截取范围内的异常变化熵，/＞为窗口变换系数，/＞表示噪声序列中/＞时刻数据点的截取范围内划分的窗口数量。需要说明的是，当噪声在时刻周围出现异常时，/＞会变大，此时截取范围内的窗口数量会变多，窗口会变小，可以提高频率分辨率。其中，/＞取经验值100。由于对于噪声异常信号的检测在频域更容易实现，根据上述步骤得到噪声序列中各数据点截取范围内的窗口数量，对各窗口内的噪声数据序列进行快速傅里叶变换，将时域噪声信号转换到频域分析，将转变到/＞，即得到各窗口的频域分量。快速傅里叶变换为公知技术，这里不再进行赘述。将噪声数据序列转换到频域后，根据各时刻数据点截取范围内各个窗口内的推进器转速均值得到各窗口频谱信号的低通滤波器截止频率，用于过滤掉发动机的正常噪声。式中，表示噪声数据序列/＞时刻数据点截取范围内第/＞个窗口内各数据点的推进器转速均值，/＞为转速映射系数，/＞为噪声数据序列/＞时刻数据点截取范围内第/＞个窗口内频谱信号的低通滤波器截止频率。需要说明的是，用于将推进器转速映射到频率的系数，本实施例取经验值3000；分母60为将推进器转速单位rpm转换成rps；噪声数据序列中各个窗口的推进器转速不同，当发动机在低转速工作时发动机的噪声处于较低的频率，当发动机的转速越高其噪声的频率也越高；根据推进器转速与发动机正常工作状态下的噪声之间的对应关系，使用转速映射系数来将噪声截止频率映射到合理的噪声变化范围内，使用这种方法能够得到各窗口频谱信号的低通滤波器截止频率。重复上述步骤，各个窗口都能得到对应频谱信号的低通滤波器截止频率。根据各窗口的截止频率，将窗口内低于截止频率的低频信号过滤掉，将剩余的高频信号作为窗口内的异常频率分量。通过使用低通滤波器截止频率对噪声的频谱信号进行滤波，得到滤波后的噪声异常频域分量。对滤波后的信号进行分析，如果滤波后还存在较多其他较大的频域分量，表示除了发动机正常噪声的频域分量外还存在其他异常频域分量，说明发动机存在异响。式中，表示滤波后噪声数据序列中/＞时刻数据点的截取范围内第/＞个窗口的频域能量异常比值，/＞表示滤波后噪声数据序列中/＞时刻数据点的截取范围内第/＞个窗口的异常频域分量，/＞表示滤波后噪声数据序列中/＞时刻数据点的截取范围内第/＞个窗口的频域分量，/＞表示滤波后噪声数据序列中/＞时刻数据点的截取范围内第/＞个窗口噪声频谱信号中最大的频域分量，/＞为噪声数据序列/＞时刻数据点截取范围内第/＞个窗口内频谱信号的低通滤波器截止频率，/＞表示滤波后噪声数据序列中/＞时刻数据点的截取范围的窗口数量。需要说明的是，通过将窗口内的异常频域分量求和得到的异常频域能量与总频域能量的比值作为评价该窗口的频域能量异常比值，即当滤波后的信号还包含其他异常频域分量，发动机出现异响时，因此会越大。通常发动机正常工作时也会有少量的高频噪声，只计算各窗口内的频域能量异常比值并不能完全表征该窗口的异常情况，还需要考虑到各窗口内频谱信号的分布。通过频谱分析可以得到各窗口内频谱信号的能量和能量衰减一半时的3dB带宽。由此计算各窗口噪声频谱信号的峰值带宽比，具体表达式为：式中，为第/＞个窗口噪声频谱信号的幅度，/＞为第/＞个窗口噪声频谱信号的幅度能量衰减一半时的3dB带宽，/＞为噪声数据序列/＞时刻数据点截取范围内第/＞个窗口的频域能量异常比值，/＞为噪声数据序列/＞时刻数据点的截取范围内第/＞个窗口滤波后的噪声频谱信号的峰值带宽比。需要说明的是，根据各窗口的频谱信号中的能量与能量衰减一般时的3dB带宽的比值作为峰值带宽比，反映了异常噪声的能量集中度，集中度越高表明信号异常越明显。当异常信号的能量越集中，峰值带宽比将越大，但是异常噪声的出现是不确定的，因此单个窗口内的峰值带宽比值只能表现该窗口的情况，因此计算/＞时刻数据点截取范围内各窗口与其他所有窗口的峰值带宽比差异系数。式中，、/＞分别为噪声数据序列中/＞时刻数据点截取范围内第/＞、/＞个窗口的峰值带宽比，/＞为噪声数据序列中/＞时刻数据点截取范围内的窗口数量，/＞表示噪声数据序列中/＞时刻数据点的截取范围内第/＞个窗口的峰值带宽比差异系数。当某个窗口内出现异常噪声时，其峰值带宽比与正常窗口的差异性越大，值也将越大。通过对噪声数据序列时刻数据点截取范围内各窗口的异常情况及各窗口之间的异常情况差异变化进行分析，可以得到各数据点的最终频域异常因子。式中，、/＞分别为噪声数据序列/＞时刻数据点截取范围内第/＞、/＞个窗口的频域能量异常比值，/＞表示噪声数据序列/＞时刻数据点截取范围内划分的窗口数量，表示L2范数，/＞表示噪声数据序列/＞时刻数据点截取范围内第/＞个窗口的峰值带宽比差异系数，/＞表示噪声数据序列/＞时刻数据点的最终频域异常因子。需要说明的是，当信号出现异常时，过滤掉正常发动机的噪声后，还存在异常噪声的频谱能量，因此该窗口在滤波后的频域能量异常比值将变大；将该窗口的频域能量异常比值与截取范围内其他剩余所有窗口的频域能量异常比值的差值越大，说明该时刻数据点的截取范围存在异常情况；同时，为了防止将发动机正常工作时的噪声对判断该时刻数据点的异常情况产生影响，在正常情况下，相同大小、距离较近的窗口之间的总体频谱信号较为相似，即各窗口之间的峰值带宽比差异系数较小；因此结合该时刻的数据点截取范围内所有窗口之间的峰值带宽比差异系数，协助判断该数据点截取范围内的窗口是否出现异常频谱信号；即得到的该时刻的数据点的最终频域异常因子越大，表示该时刻的数据点截取范围内各窗口的频谱信号之间存在异常情况。并且出现异常信号的窗口的峰值带宽比差异系数也将变大，即最终频域异常因子变大，能够反映噪声在频域中异常噪声的异常情况。通过将噪声数据序列中各数据点时域和频域的信息结合起来，共同表征各数据点的时频跳变性。式中，为噪声数据序列/＞时刻数据点的异常变化熵，/＞表示噪声数据序列中/＞时刻数据点的最终频域异常因子，/＞为噪声数据序列中/＞时刻数据点的时频跳变性。本方案采用LOF异常检测算法进行异常值检测。由于LOF异常检测算法有一个最重要的超参数k，被称为k个最近邻点，其取值直接影响算法的性能，k值代表用于计算检测点的邻域大小。当k较小时，较少的邻域样本点会被考虑，导致过度敏感和错误的离群点判定。当k较大时，邻域内的样本点数量增多，导致较低的灵敏度和计算复杂度上升。合适的k值应根据具体需求平衡敏感性和计算效率。因此本方案提出了自适应k值计算，根据上述得到的系统异质性序列中各数据点的平均异常变换熵和噪声数据序列对应数据点的时频跳变性计算自适应k值。如果信号值出现异常，需要LOF算法灵敏度较高，即k值应当调小；如果大部分监控指标都在正常范围内，则需要LOF算法拥有较低的灵敏度，即k值应当调大。按照这个思路进行自适应k值调整。式中，表示系统异质性序列/＞时刻数据点的平均异常变换熵，/＞为噪声数据序列/＞时刻数据点的时频跳变性，/＞表示向下取整函数，/＞为噪声数据序列与系统异质性序列的相关性系数，/＞为系统异质性序列/＞时刻数据点的自适应k值。需要说明的是，皮尔森相关系数为公知技术，本实施例不再赘述。当时刻数据出现异常时，/＞时刻数据点的平均异常变换熵会变大，并且噪声的时频跳变性也会变大，所以值会变小，LOF算法的灵敏度越高，符合上述的推理逻辑。至此，得到天然气船舶动力系统的系统异质性序列中各数据点的自适应k值。步骤S003，根据自适应k值优化LOF算法，对异常情况进行及时的检修和维护。上一步已经确定了LOF算法中最重要的超参数k，因此按照LOF算法步骤对天然气船舶的动力系统的系统异质性数据序列进行异常检测，得到各数据点的局部离群因子。LOF算法为公知技术，本发明实施例不再赘述。设置阈值，当各数据点的局部离群因子大于阈值时判断该时刻数据存在异常。本发明实施例中将阈值设置为经验值1。将异常数据反馈给随船维护人员，及时根据异常情况采取维护措施，以减少潜在的经济损失。这种方法利用局部离群因子作为异常检测的规则，对船舶维护过程进行监控和维护预警，从而提高船舶运行的可靠性和安全性。至此，可以根据上述方法实现对天然气船舶动力异常智能监控。综上所述，本发明实施例提出基于大数据的天然气船舶动力异常智能监控方法，采集天然气船舶动力系统的各监控数据序列，结合各监控数据序列分析计算LOF异常检测算法中的自适应k值，完成天然气船舶动力异常智能监控。本发明实施例方法可实现对天然气船舶动力异常的智能监控，相比于传统的LOF异常检测算法，本发明实施例使用大数据技术，基于各监控数据序列各时刻数据点的异常变化熵在时域融合得到的平均异常变化熵进行分析，将各监控数据序列的异常情况结合起来，有利于对天然气船舶动力数据的全面分析，提高数据的准确性；通过将与发动机最相关的噪声数据转换到频域进行分析，根据噪声数据序列各数据点的异常变换熵对各数据点截取范围内的窗口进行均匀分割，实现自适应调整窗口的目的，有益于实现对实时数据频谱信号的异常监测；结合噪声数据在时域与频域的异常信息，将异常值进行数字化度量，以此为依据自适应调整LOF异常检测算法中的值，提高算法的准确度、可靠度。由于该方法不参与人工的主观评判，因此对天然气船舶动力系统的异常监控更加客观，且该方法的检测精度较高。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。且上述对本说明书特定实施例进行了描述。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同或相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述实施例仅用以说明本申请的技术方案，而非对其限制；对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的范围，均应包含在本申请的保护范围之内。
