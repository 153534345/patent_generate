标题title
一种角膜曲率的生成方法及装置
摘要abst
本发明公开了一种角膜曲率的生成方法及装置，所述方法包括：获取待检测眼部相对于视标的瞬时注视图像；将瞬时注视图像输入至预先设置的神经网络模型，以使神经网络模型根据瞬时注视图像进行预设数量的关键点检测，输出关键点坐标信息；其中，神经网络模型是根据多个瞬时注视样本图像以及各瞬时注视样本图像对应的关键点标注结果进行训练得到的；基于关键点坐标信息进行椭圆拟合，生成用于表征角膜轮廓的第一椭圆方程以及视标在角膜中的成像轮廓的第二椭圆方程；提取第一、第二椭圆方程并结合预设公式生成瞬时注视图像的角膜曲率值。本发明基于深度学习的神经网络模型进行角膜轮廓拟合和角膜曲率计算，可提高角膜曲率的生成的准确性和便利性。
权利要求书clms
1.一种角膜曲率的生成方法，其特征在于，包括：获取待检测眼部相对于视标的瞬时注视图像；将所述瞬时注视图像输入至预先设置的神经网络模型，以使所述神经网络模型根据所述瞬时注视图像进行预设数量的关键点检测，输出关键点坐标信息；其中，所述神经网络模型是根据多个瞬时注视样本图像以及各瞬时注视样本图像对应的关键点标注结果进行训练得到的；基于所述关键点坐标信息进行椭圆拟合，生成用于表征角膜轮廓的第一椭圆方程以及所述视标在角膜中的成像轮廓的第二椭圆方程；提取所述第一椭圆方程和所述第二椭圆方程并结合预设公式生成所述瞬时注视图像的角膜曲率值。2.如权利要求1所述的一种角膜曲率的生成方法，其特征在于，所述获取待检测眼部相对于视标的瞬时注视图像，包括：在预设位置处固定一个视标并开启摄像头设备；当所述待检测眼部与所述视标的距离为预设距离时，闭合所述待检测眼部；当闭合时间达到预设时发送睁眼信号，并获取所述待检测眼部在睁开时对所述视标的瞬时注视图像。3.如权利要求1所述的一种角膜曲率的生成方法，其特征在于，所述神经网络模型是根据多个瞬时注视样本图像以及各瞬时注视样本图像对应的关键点标注结果进行训练得到，具体包括：将所述瞬时注视样本图像输入至初始神经网络模型进行迭代训练，以使所述初始神经网络模型对输入的瞬时注视样本图像中的角膜轮廓和视标在角膜中的成像轮廓进行预设数量的关键点检测；当达到预设训练次数或输出的关键点坐标信息与输入的瞬时注视样本图像对应的关键点标注结果的误差在预设范围内时，得到所述神经网络模型；其中，所述关键点标注结果为预设数量关键点的坐标信息。4.如权利要求1所述的一种角膜曲率的生成方法，其特征在于，所述角膜曲率的生成方法还包括基于第一浦肯野像成像原理计算角膜曲率半径值，具体包括：根据第一预设公式计算所述视标在所述待检测眼部的角膜中的成像尺寸；其中所述第一预设公式的表达式为：式中，h′h为视标在水平方向上像的物理尺寸；Hhp为角膜的水平像素直径；Sh为角膜的水平物理横径；Phpix为视标在水平方向上像的像素尺寸；h′v为视标在垂直方向上像的物理尺寸；Vp为角膜的垂直像素直径；Sv为角膜的垂直物理直径；Pvpix为视标在垂直方向上像的像素尺寸；h′为视标的像的物理尺寸；根据第二预设公式计算所述视标在角膜中成像的横向放大率；其中，所述第二预设公式的表达式为：式中，β为横向放大率；h′为视标的像的物理尺寸；h为视标的物理尺寸；根据第三预设公式计算所述视标到所述视标在角膜中成像位置的距离；其中，所述第三预设公式的表达式为：式中，l为视标到成像位置的距离；Sh为角膜在水平方向上的物理尺寸；f为摄像头设备的焦距；Hhp为角膜在水平方向的像素直径；根据第四预设公式计算所述待检测眼部的角膜曲率半径；其中，所述第四预设公式的表达式为：式中，r为角膜曲率半径；l为视标到成像位置的距离；β为横向放大率。5.如权利要求4所述的一种角膜曲率的生成方法，其特征在于，所述提取所述第一椭圆方程和所述第二椭圆方程并结合预设公式生成所述待检测眼部的角膜曲率值，具体包括：基于所述第一椭圆方程的短轴长度和长轴长度获取角膜的水平像素直径，根据所述第一预设公式计算所述视标在水平方向上像的物理尺寸；基于所述第二椭圆方程的短轴长度和长轴长度获取所述视标的垂直像素直径，根据所述第一预设公式计算所述视标在垂直方向上像的物理尺寸；基于所述第一预设公式、所述第二预设公式和所述第四预设公式计算所述待检测眼部的角膜曲率半径；根据第五预设公式计算所述待检测眼部的角膜曲率；其中，所述第五预设公式的表达式为：式中，k为角膜曲率；r为曲率半径。6.如权利要求5所述的一种角膜曲率的生成方法，其特征在于，所述角膜曲率的生成方法还包括：当计算第一预设角膜曲率时，基于所述第二椭圆方程提取所述视标在短轴方向上的像的像素尺寸，根据提取的所述视标在短轴方向上的像的像素尺寸计算所述第一预设角膜曲率；其中，所述第一预设角膜曲率为平K；当计算第二预设角膜曲率时，基于所述第二椭圆方程提取所述视标在长轴方向上的像的像素尺寸，根据提取的所述视标在长轴方向上的像的像素尺寸计算所述第二预设角膜曲率；其中，所述第二预设角膜曲率为陡K。7.如权利要求1所述的一种角膜曲率的生成方法，其特征在于，所述角膜曲率的生成方法还包括基于角膜曲率生成所述待检测眼部的散光度数，具体为：基于散光度数计算公式确定所述待检测眼部的散光度数；其中，所述散光度数计算公式的表达式为：d＝k2-k1；式中，d为散光度数；k2为陡K曲率，k1为平K曲率。8.一种角膜曲率的生成装置，其特征在于，包括图像获取模块、模型检测模块、椭圆拟合模块和曲率生成模块；所述图像获取模块用于获取待检测眼部相对于视标的瞬时注视图像；所述模型检测模块用于将所述瞬时注视图像输入至预先设置的神经网络模型，以使所述神经网络模型根据所述瞬时注视图像进行预设数量的关键点检测，输出关键点坐标信息；其中，所述神经网络模型是根据多个瞬时注视样本图像以及各瞬时注视样本图像对应的关键点标注结果进行训练得到的；所述椭圆拟合模块用于基于所述关键点坐标信息进行椭圆拟合，生成用于表征角膜轮廓的第一椭圆方程以及所述视标在角膜中的成像轮廓的第二椭圆方程；所述曲率生成模块用于提取所述第一椭圆方程和所述第二椭圆方程并结合预设公式生成所述待检测眼部的角膜曲率值。9.一种终端设备，其特征在于，包括处理器、存储器以及存储在所述存储器中且被配置为由所述处理器执行的计算机程序，所述处理器执行所述计算机程序时实现如权利要求1至7任意一项所述的角膜曲率的生成方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质包括存储的计算机程序，其中，在所述计算机程序运行时控制所述计算机可读存储介质所在设备执行如权利要求1至7中任意一项所述的角膜曲率的生成方法。
说明书desc
技术领域本发明涉及角膜检测技术领域，特别是涉及一种角膜曲率的生成方法及装置。背景技术角膜是人眼最前面的透明部分，为人眼提供大部分的屈光力。角膜曲率指通过角膜曲率检测仪器检测出来的屈光度或曲率半径值，可用于评判眼部是否存在散光症状，为眼部矫正、角膜屈光手术等眼部活动提供科学依据。近年来，随着角膜接触镜片配戴、人工晶体植入和近视眼角膜放射状切开手术等眼部活动的开展普及，对角膜曲率检测的准确性和便捷性也提出更高的要求。目前的角膜曲率检测主要通过角膜曲率仪和角膜地形图仪辅助完成。角膜曲率仪只能检查角膜中央3mm区域的范围，如果患者角膜周边区域发生病变，角膜曲率计无法观察获取，而角膜地形图则是对整个角膜做检查，可以对整个角膜进行全面的观测。但无论是角膜曲率计还是角膜地形图仪，都需要依赖于特定的角膜测定设备且由专业人员进行操作，若用户需要检测眼部角膜曲率情况均需要去到医院或眼睛店等地方才能进行测量，不利于角膜曲率检测的普及和推广。发明内容本申请提供了一种角膜曲率的生成方法及装置，基于深度学习的神经网络模型进行角膜轮廓拟合和角膜曲率计算，可提高角膜曲率的生成的准确性和便利性。第一方面，本申请提供了一种角膜曲率的生成方法，包括：获取待检测眼部相对于视标的瞬时注视图像；将所述瞬时注视图像输入至预先设置的神经网络模型，以使所述神经网络模型根据所述瞬时注视图像进行预设数量的关键点检测，输出关键点坐标信息；其中，所述神经网络模型是根据多个瞬时注视样本图像以及各瞬时注视样本图像对应的关键点标注结果进行训练得到的；基于所述关键点坐标信息进行椭圆拟合，生成用于表征角膜轮廓的第一椭圆方程以及所述视标在角膜中的成像轮廓的第二椭圆方程；提取所述第一椭圆方程和所述第二椭圆方程并结合预设公式生成所述待检测眼部的角膜曲率值。这样，将获取待检测眼部相对于视标的瞬时注视图像输入至预先设置的神经网络模型，通过深度学习训练后的模型对该瞬时注视图像进行关键点检测，输出该瞬时注视图像的关键点坐标信息，分别根据检测到的角膜与视标的关键点坐标信息进行椭圆拟合，获取角膜及视标轮廓，进而通过该椭圆方程的坐标参数以及预设公式计算待检测眼部的角膜曲率。本申请提供的一种角膜曲率的生成方法通过深度学习的神经网络模型进行关键点检测，根据关键点坐标信息进行椭圆拟合，生成角膜轮廓以及视标在角膜中的成像轮廓，并通过预设公式生成角膜曲率值，无需专业人员进行操作，也不需要依赖高昂的专业设备，操作简单，易于普及。在一种实现方式中，所述获取待检测眼部相对于视标的瞬时注视图像，包括：在预设位置处固定一个视标并开启摄像头设备；当所述待检测眼部与所述视标的距离为预设距离时，闭合所述待检测眼部；当闭合时间达到预设时发送睁眼信号，并获取所述待检测眼部在睁开时对所述视标的瞬时注视图像。在一种实现方式中，所述神经网络模型是根据多个瞬时注视样本图像以及各瞬时注视样本图像对应的关键点标注结果进行训练得到，具体包括：将所述瞬时注视样本图像输入至初始神经网络模型进行迭代训练，以使所述初始神经网络模型对输入的瞬时注视样本图像中的角膜轮廓和视标在角膜中的成像轮廓进行预设数量的关键点标注；当达到预设训练次数或输出的关键点坐标信息与输入的瞬时注视样本图像对应的关键点标注结果的误差在预设范围内时，得到所述神经网络模型；其中，所述关键点标注结果为预设数量关键点的坐标信息。在一种实现方式中，所述角膜曲率的生成方法还包括基于第一浦肯野像成像原理计算角膜曲率半径值，具体包括：根据第一预设公式计算所述视标在所述待检测眼部的角膜中的成像尺寸；其中所述第一预设公式的表达式为：式中，h′h为视标在水平方向上像的物理尺寸；Hhp为角膜的水平像素直径；Sh为角膜的水平物理横径；Phpix为视标在水平方向上像的像素尺寸；h′v为视标在垂直方向上像的物理尺寸；Vp为角膜的垂直像素直径；Sv为角膜的垂直物理直径；Pvpix为视标在垂直方向上像的像素尺寸；h′为视标的像的物理尺寸；根据第二预设公式计算所述视标在角膜中成像的横向放大率；其中，所述第二预设公式的表达式为：式中，β为横向放大率；h′为视标的像的物理尺寸；h为视标的物理尺寸；根据第三预设公式计算所述视标到所述视标在角膜中成像位置的距离；其中，所述第三预设公式的表达式为：式中，l为视标到成像位置的距离；Sh为角膜在水平方向上的物理尺寸；f为摄像头设备的焦距；Hhp为角膜的水平像素直径；根据第四预设公式计算所述待检测眼部的角膜曲率半径；其中，所述第四预设公式的表达式为：式中，r为角膜曲率半径；l为视标到成像位置的距离；β为横向放大率。在一种实现方式中，所述提取所述椭圆方程的坐标参数并结合预设公式生成所述待检测眼部的角膜曲率值，具体包括：基于所述第一椭圆方程的短轴长度和长轴长度获取角膜的水平像素直径，根据所述第一预设公式计算所述视标在水平方向上像的物理尺寸；基于所述第二椭圆方程的短轴长度和长轴长度获取所述视标的垂直像素直径，根据所述第一预设公式计算所述视标在垂直方向上像的物理尺寸；基于所述第一预设公式、所述第二预设公式和所述第四预设公式计算所述待检测眼部的角膜曲率半径；根据第五预设公式计算所述待检测眼部的角膜曲率；其中，所述第五预设公式的表达式为：式中，k为角膜曲率；r为曲率半径。在一种实现方式中，所述角膜曲率的生成方法还包括：当计算第一预设角膜曲率时，基于所述第二椭圆方程提取所述视标在短轴方向上的像的像素尺寸，根据提取的所述视标在短轴方向上的像的像素尺寸计算所述第一预设角膜曲率；其中，所述第一预设角膜曲率为平K；当计算第二预设角膜曲率时，基于所述第二椭圆方程提取所述视标在长轴方向上的像的像素尺寸，根据提取的所述视标在长轴方向上的像的像素尺寸计算所述第二预设角膜曲率；其中，所述第二预设角膜曲率为陡K。在一种实现方式中，所述角膜曲率的生成方法还包括基于角膜曲率生成所述待检测眼部的散光度数，具体为：基于散光度数计算公式确定所述待检测眼部的散光度数；其中，所述散光度数计算公式的表达式为：d＝k2-k1；式中，d为散光度数；k2为陡K曲率，k1为平K曲率。第二方面，本申请还提供一种角膜曲率的生成装置，包括图像获取模块、模型检测模块、椭圆拟合模块和曲率生成模块；所述图像获取模块用于获取待检测眼部相对于视标的瞬时注视图像；所述模型检测模块用于将所述瞬时注视图像输入至预先设置的神经网络模型，以使所述神经网络模型根据所述瞬时注视图像进行预设数量的关键点检测，输出关键点坐标信息；其中，所述神经网络模型是根据多个瞬时注视样本图像以及各瞬时注视样本图像对应的关键点标注结果进行训练得到的；所述椭圆拟合模块用于基于所述关键点坐标信息进行椭圆拟合，生成用于表征角膜轮廓的第一椭圆方程以及所述视标在角膜中的成像轮廓的第二椭圆方程；所述曲率生成模块用于提取所述第一椭圆方程和所述第二椭圆方程并结合预设公式生成所述待检测眼部的角膜曲率值。这样，将获取待检测眼部相对于视标的瞬时注视图像输入至预先设置的神经网络模型，通过深度学习训练后的模型对该瞬时注视图像进行关键点检测，输出该瞬时注视图像的关键点坐标信息，分别根据检测到的角膜与视标的关键点坐标信息进行椭圆拟合，获取角膜及视标轮廓，进而通过该椭圆方程的坐标参数以及预设公式计算待检测眼部的角膜曲率。本申请提供的一种角膜曲率的生成方法通过深度学习的神经网络模型进行关键点检测，根据关键点坐标信息进行椭圆拟合，生成角膜轮廓以及视标在角膜中的成像轮廓，并通过预设公式生成角膜曲率值，无需专业人员进行操作，也不需要依赖高昂的专业设备，操作简单，易于普及。在一种实现方式中，所述图像获取模块用于获取待检测眼部相对于视标的瞬时注视图像，包括：在预设位置处固定一个视标并开启摄像头设备；当所述待检测眼部与所述视标的距离为预设距离时，闭合所述待检测眼部；当闭合时间达到预设时发送睁眼信号，并获取所述待检测眼部在睁开时对所述视标的瞬时注视图像。在一种实现方式中，所述神经网络模型是根据多个瞬时注视样本图像以及各瞬时注视样本图像对应的关键点标注结果进行训练得到，具体包括：将所述瞬时注视样本图像输入至初始神经网络模型进行迭代训练，以使所述初始神经网络模型对输入的瞬时注视样本图像中的角膜轮廓和视标在角膜中的成像轮廓进行预设数量的关键点标注；当达到预设训练次数或输出的关键点坐标信息与输入的瞬时注视样本图像对应的关键点标注结果的误差在预设范围内时，得到所述神经网络模型；其中，所述关键点标注结果为预设数量关键点的坐标信息。在一种实现方式中，所述角膜曲率的生成装置还包括基于第一浦肯野像成像原理计算角膜曲率半径值的半径计算模块，具体包括：根据第一预设公式计算所述视标在所述待检测眼部的角膜中的成像尺寸；其中所述第一预设公式的表达式为：式中，h′h为视标在水平方向上像的物理尺寸；Hhp为角膜的水平像素直径；Sh为角膜的水平物理横径；Phpix为视标在水平方向上像的像素尺寸；h′v为视标在垂直方向上像的物理尺寸；Vp为角膜的垂直像素直径；Sv为角膜的垂直物理直径；Pvpix为视标在垂直方向上像的像素尺寸；h′为视标的像的物理尺寸；根据第二预设公式计算所述视标在角膜中成像的横向放大率；其中，所述第二预设公式的表达式为：式中，β为横向放大率；h′为视标的像的物理尺寸；h为视标的物理尺寸；根据第三预设公式计算所述视标到所述视标在角膜中成像位置的距离；其中，所述第三预设公式的表达式为：式中，l为视标到成像位置的距离；Sh为角膜的实际水平横径；f为摄像头设备的焦距；Hhp为角膜的水平像素直径；根据第四预设公式计算所述待检测眼部的角膜曲率半径；其中，所述第四预设公式的表达式为：式中，r为角膜曲率半径；l为视标到成像位置的距离；β为横向放大率。在一种实现方式中，所述提取所述椭圆方程的坐标参数并结合预设公式生成所述待检测眼部的角膜曲率值，具体包括：基于所述第一椭圆方程的短轴长度和长轴长度获取角膜的水平像素直径，根据所述第一预设公式计算所述视标在水平方向上像的物理尺寸；基于所述第二椭圆方程的短轴长度和长轴长度获取所述视标的垂直像素直径，根据所述第一预设公式计算所述视标在垂直方向上像的物理尺寸；基于所述第一预设公式、所述第二预设公式和所述第四预设公式计算所述待检测眼部的角膜曲率半径；根据第五预设公式计算所述待检测眼部的角膜曲率；其中，所述第五预设公式的表达式为：式中，k为角膜曲率；r为曲率半径。在一种实现方式中，所述角膜曲率的生成装置还包括：当计算第一预设角膜曲率时，基于所述第二椭圆方程提取所述视标在短轴方向上的像的像素尺寸，根据提取的所述视标在短轴方向上的像的像素尺寸计算所述第一预设角膜曲率；其中，所述第一预设角膜曲率为平K；当计算第二预设角膜曲率时，基于所述第二椭圆方程提取所述视标在长轴方向上的像的像素尺寸，根据提取的所述视标在长轴方向上的像的像素尺寸计算所述第二预设角膜曲率；其中，所述第二预设角膜曲率为陡K。在一种实现方式中，所述角膜曲率的生成装置还包括基于角膜曲率生成所述待检测眼部的散光度数的散光计算模块，具体为：基于散光度数计算公式确定所述待检测眼部的散光度数；其中，所述散光度数计算公式的表达式为：d＝k2-k1；式中，d为散光度数；k2为陡K曲率，k1为平K曲率。第三方面，本申请还提供一种终端设备，包括处理器、存储器以及存储在所述存储器中且被配置为由所述处理器执行的计算机程序，所述处理器执行所述计算机程序时实现如上所述的角膜曲率的生成方法。第四方面，本申请还提供一种计算机可读存储介质，所述计算机可读存储介质包括存储的计算机程序，其中，在所述计算机程序运行时控制所述计算机可读存储介质所在设备执行如上所述的角膜曲率的生成方法。附图说明图1是本发明实施例提供的一种角膜曲率的生成方法的流程示意图；图2是本发明实施例提供的一种第一浦肯野像成像原理图；图3是本发明实施例提供的一种角膜曲率的生成装置的模块结构图。具体实施方式下面结合附图和实施例，对本发明的具体实施方式作进一步详细描述。以下实施例用于说明本发明，但不用来限制本发明的范围。本申请的说明书和权利要求书及所述附图中的术语“第一”和“第二”等是用于区别不同对象，而不是用于描述特定顺序。此外，术语“包括”和“具有”以及它们任何变形，意图在于覆盖不排他的包含。例如包含了一系列步骤或单元的过程、方法、系统、产品或设备没有限定于已列出的步骤或单元，而是可选地还包括没有列出的步骤或单元，或可选地还包括对于这些过程、方法、产品或设备固有的其它步骤或单元。在本文中提及“实施例”意味着，结合实施例描述的特定特征、结构或特性可以包含在本申请的至少一个实施例中。在说明书中的各个位置出现该短语并不一定均是指相同的实施例，也不是与其它实施例互斥的独立的或备选的实施例。本领域技术人员显式地和隐式地理解的是，本文所描述的实施例可以与其它实施例相结合。实施例1参见图1，图1是本发明实施例提供的一种角膜曲率的生成方法的流程示意图。本发明实施例提供一种角膜曲率的生成方法，包括步骤101至步骤104，各项步骤具体如下：步骤101：获取待检测眼部相对于视标的瞬时注视图像；步骤102：将所述瞬时注视图像输入至预先设置的神经网络模型，以使所述神经网络模型根据所述瞬时注视图像进行预设数量的关键点检测，输出关键点坐标信息；其中，所述神经网络模型是根据多个瞬时注视样本图像以及各瞬时注视样本图像对应的关键点标注结果进行训练得到的；步骤103：基于所述关键点坐标信息进行椭圆拟合，生成用于表征角膜轮廓的第一椭圆方程以及所述视标在角膜中的成像轮廓的第二椭圆方程；步骤104：提取所述第一椭圆方程和所述第二椭圆方程并结合预设公式生成所述待检测眼部的角膜曲率值。一实施例中，所述获取待检测眼部相对于视标的瞬时注视图像，包括：在预设位置处固定一个视标并开启摄像头设备；当所述待检测眼部与所述视标的距离为预设距离时，闭合所述待检测眼部；当闭合时间达到预设时发送睁眼信号，并获取所述待检测眼部在睁开时对所述视标的瞬时注视图像。在手机屏幕上显示一个固定大小的白色圆形视标，优选的，除视标外的手机屏幕整体背景设置为黑色。打开手机的摄像头设备，双眼盯住视标。以待检测眼部为右眼进行示例说明，在20cm处遮盖左眼，并闭合右眼1s左右后睁开，获取睁开右眼那一瞬间对视标的瞬时注视图像。睁眼信号可预先设置，由手机定时发送，也可自行默数一定时长再睁开待检测眼部。一实施例中，所述神经网络模型是根据多个瞬时注视样本图像以及各瞬时注视样本图像对应的关键点标注结果进行训练得到，具体包括：将所述瞬时注视样本图像输入至初始神经网络模型进行迭代训练，以使所述初始神经网络模型对输入的瞬时注视样本图像中角膜轮廓和视标轮廓进行预设数量的关键点检测；当达到预设训练次数或输出的关键点坐标信息与输入的瞬时注视样本图像对应的关键点标注结果的误差在预设范围内时，得到所述神经网络模型；其中，所述关键点标注结果为预设数量关键点的坐标信息。本发明实施例中对包含人脸图像的角膜轮廓、视标在角膜中的成像轮廓进行关键点标注，得到瞬时注释样本图像。对单只眼睛采用38关键点的标注，其中，角膜轮廓包含32个关键点，视标轮廓包含6个关键点。将所有标注好的图像根据8：2的比例随机分为训练集和测试集，输入至初始神经网络模型。优选的，本发明实施例中采用TinyPose作为初始神经网络模型进行训练，将训练集输入至TinyPose网络模型进行训练，直至达到预设训练次数或模型输出的关键点检测结果与输入的瞬时注释样本图像对应的关键点标注结果的误差在预设范围内时，判定模型训练完成，得到训练后的神经网络模型。将采集的待检测眼部的瞬时注视图像输入至训练好后的神经网络模型，由神经网络模型进行关键点检测后输出关键点坐标信息。由于人体的角膜形状不是规范的圆形，大多为椭圆形状，本发明实施例中基于生成的关键点坐标信息进行椭圆拟合。优选的，基于第一浦肯野成像原理对角膜轮廓以及视标在角膜中的成像轮廓进行椭圆拟合，生成表征角膜轮廓的第一椭圆方程以及所述视标在角膜中的成像轮廓的第二椭圆方程。本发明实施例中，在获取关键点坐标信息后，通过最小二乘法进行椭圆拟合，生成椭圆方程。需要说明的是，最小二乘法仅是椭圆拟合的一种基本方法，也可通过迭代最小二乘法或其余方法进行椭圆拟合，在此不做限定。第一浦肯野像成像原理是在角膜前一特定位置防止固定大小h的光标，该光标经角膜表面反射为一个像，该像即为第一浦肯野像。参见图2，图2是本发明实施例提供的一种第一浦肯野像成像原理图。成像公式为横向放大率公式/＞其中，GB表示视标；h表示视标的物理尺寸；h′表示视标在角膜中的成像尺寸；-l表示视标到角膜的距离；l′表示视标在角膜中成像位置B′到角膜前表面的距离；r表示角膜曲率半径。基于上述公式可得，角膜的曲率半径/＞一实施例中，所述角膜曲率的生成方法还包括基于第一浦肯野像成像原理计算角膜曲率半径值，具体包括：根据第一预设公式计算所述视标在所述待检测眼部的角膜中的成像尺寸；其中所述第一预设公式的表达式为：式中，h′h为视标在水平方向上像的物理尺寸；Hhp为角膜的水平像素直径；Sh为角膜的水平物理横径；Phpix为视标在水平方向上像的像素尺寸；h′v为视标在垂直方向上像的物理尺寸；Vp为角膜的垂直像素直径；Sv为角膜的垂直物理直径；Pvpix为视标在垂直方向上像的像素尺寸；h′为视标的像的物理尺寸。根据第二预设公式计算所述视标在角膜中成像的横向放大率；其中，所述第二预设公式的表达式为：式中，β为横向放大率；h′为视标的像的物理尺寸；h为视标的物理尺寸；根据第三预设公式计算所述视标到所述视标在角膜中成像位置的距离；其中，所述第三预设公式的表达式为：式中，l为视标到成像位置的距离；Sh为角膜的实际水平横径；f为摄像头设备的焦距；Hhp为角膜的水平像素直径；根据第四预设公式计算所述待检测眼部的角膜曲率半径；其中，所述第四预设公式的表达式为：式中，r为角膜曲率半径；l为视标到成像位置的距离；β为横向放大率。曲率值除了与曲率半径有关外，还和透镜的屈光指数有关。角膜屈光度是指角膜对光线的曲折程度，角膜的屈光指数为1.337。一实施例中，所述提取所述第一椭圆方程和所述第二椭圆方程的坐标参数并结合预设公式生成所述待检测眼部的角膜曲率值，具体包括：基于所述第一椭圆方程的短轴长度和长轴长度获取角膜的水平像素直径，根据所述第一预设公式计算所述视标在水平方向上像的物理尺寸；基于所述第二椭圆方程的短轴长度和长轴长度获取所述视标的垂直像素直径，根据所述第一预设公式计算所述视标在垂直方向上像的物理尺寸；基于所述第一预设公式、所述第二预设公式和所述第四预设公式计算所述待检测眼部的角膜曲率半径；根据第五预设公式计算所述待检测眼部的角膜曲率；其中，所述第五预设公式的表达式为：式中，k为角膜曲率；r为曲率半径。本发明实施例中，生成的椭圆方程的格式如下：，，angle)，其中椭圆中心坐标，为长轴与短轴，angle为旋转角度。取长轴与短轴的长度平均值作为角膜的像素直径。第一椭圆方程用于表征角膜的轮廓，根据第一椭圆方程的长轴和短轴长度的平均值即可获取角膜的水平像素直径Hhp，同时，也用作角膜的垂直像素直径Vp。第二椭圆方程用于表征视标在角膜中的成像轮廓，可根据椭圆方程计算出视标在水平方向与垂直方向的像素尺寸分别为Phpix，Pvpix。而人的角膜物理尺寸约为11.8mm，可认为Sh＝Sv＝11.8mm，则根据第一预设公式中的即可生成视标在水平方向上的像的物理尺寸；根据第一预设方程中的/＞即可生成视标在垂直方向上像的物理尺寸。根据视标在水平方向上的像的物理尺寸h′h、垂直方向上像的物理尺寸h′v即可通过第一预设公式中的即可生成视标的像的物理尺寸，进而结合第二预设公式和第四预设公式即可生成待检测眼部的角膜曲率半径。人体的角膜并不是规范的圆形，大多为椭圆形，在互相垂直的两个径线上曲率会有所不同。K1通常是角膜水平径线上的曲率值，也称为平K，而K2是垂直方向的曲率值，又称为陡K，由于大多数人群的K1、K2数值都是不同的，因此在测量角膜曲率时需要参考K1、K2的数值，才能反映出角膜的形态。正常成年人的角膜曲率范围是在39D到46D之间，如果角膜曲率低于39D，说明角膜的角度比较平坦，可能是偏平角膜；当角膜曲率大于46D且过于陡峭或者是平坦与陡峭部位的曲率值超过3个D时，说明可能存在圆锥角膜。一实施例中，当计算第一预设角膜曲率时，基于所述第二椭圆方程提取所述视标在短轴方向上的像的像素尺寸，根据提取的所述视标在短轴方向上的像的像素尺寸计算所述第一预设角膜曲率；其中，所述第一预设角膜曲率为平K；当计算第二预设角膜曲率时，基于所述第二椭圆方程提取所述视标在长轴方向上的像的像素尺寸，根据提取的所述视标在长轴方向上的像的像素尺寸计算所述第二预设角膜曲率；其中，所述第二预设角膜曲率为陡K。其中，视标在角膜中成像轮廓的短轴方向即为平K曲率下的轴位，视标在角膜中成像轮廓的长轴方向即为陡K曲率下的轴位，可通过第二椭圆方程的旋转角度获取，角膜曲率的计算过程前文已进行详细阐述，在此不做赘述。一实施例中，所述角膜曲率的生成方法还包括基于角膜曲率的生成所述待检测眼部的散光度数，具体为：基于散光度数计算公式确定所述待检测眼部的散光度数；其中，所述散光度数计算公式的表达式为：d＝k2-k1；式中，d为散光度数；k2为陡K曲率，k1为平K曲率。需要说明的是，在对散光度数进行计算时离不开对散光轴位的描述。散光度数的轴位与计算平K曲率时的轴位一致。其中，平k曲率下的散光轴位α即视标在角膜中的成像尺寸所在的位置。本发明实施例中，还提供了一种角膜曲率的生成设备，包括处理器、存储器以及存储在存储器中且被配置为由处理器执行的计算机程序，处理器执行计算机程序时实现上述的角膜曲率的生成方法。本发明实施例中，还提供了一种计算机可读存储介质，计算机可读存储介质包括存储的计算机程序，其中，在计算机程序运行时控制计算机可读存储介质所在设备执行上述的角膜曲率的生成方法。示例性的，所述计算机程序可以被分割成一个或多个模块，所述一个或者多个模块被存储在所述存储器中，并由所述处理器执行，以完成本发明。所述一个或多个模块可以是能够完成特定功能的一系列计算机程序指令段，该指令段用于描述所述计算机程序在角膜曲率的生成设备中的执行过程。所述角膜曲率的生成设备可以是桌上型计算机、笔记本、掌上电脑及云端服务器等计算设备。所述角膜曲率的生成设备可包括，但不仅限于，处理器、存储器、显示器。本领域技术人员可以理解，上述部件仅仅是角膜曲率的生成设备的示例，并不构成对角膜曲率的生成设备的限定，可以包括比所述部件更多或更少的部件，或者组合某些部件，或者不同的部件，例如所述角膜曲率的生成设备还可以包括输入输出设备、网络接入设备、总线等。所称处理器可以是中央处理单元，还可以是其他通用处理器、数字信号处理器、专用集成电路、现成可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等，所述处理器是所述角膜曲率的生成设备的控制中心，利用各种接口和线路连接整个所述角膜曲率的生成设备的各个部分。所述存储器可用于存储所述计算机程序和/或模块，所述处理器通过运行或执行存储在所述存储器内的计算机程序和/或模块，以及调用存储在存储器内的数据，实现所述角膜曲率的生成设备的各种功能。所述存储器可主要包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需的应用程序等；存储数据区可存储根据手机的使用所创建的数据等。此外，存储器可以包括高速随机存取存储器，还可以包括非易失性存储器，例如硬盘、内存、插接式硬盘，智能存储卡，安全数字卡，闪存卡、至少一个磁盘存储器件、闪存器件、或其他易失性固态存储器件。其中，所述角膜曲率的生成设备集成的模块如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明实现上述实施例方法中的全部或部分流程，也可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一个计算机可读存储介质中，该计算机程序在被处理器执行时，可实现上述各个方法实施例的步骤。其中，所述计算机程序包括计算机程序代码，所述计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。所述计算机可读介质可以包括：能够携带所述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。需要说明的是，所述计算机可读介质包含的内容可以根据司法管辖区内立法和专利实践的要求进行适当的增减，例如在某些司法管辖区，根据立法和专利实践，计算机可读介质不包括电载波信号和电信信号。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。本发明实施例提供一种角膜曲率的生成装置，将获取待检测眼部相对于视标的瞬时注视图像输入至预先设置的神经网络模型，通过深度学习训练后的模型对该瞬时注视图像进行关键点检测，输出该瞬时注视图像的关键点坐标信息，分别根据检测到的角膜与视标的关键点坐标信息进行椭圆拟合，获取角膜及视标轮廓，进而通过该椭圆方程的坐标参数以及预设公式计算待检测眼部的角膜曲率。本发明实施例提供的一种角膜曲率的生成方法通过深度学习的神经网络模型进行关键点检测，根据关键点坐标信息进行椭圆拟合，生成角膜轮廓以及视标在角膜中的成像轮廓，并通过预设公式生成角膜曲率值，无需专业人员进行操作，也不需要依赖高昂的专业设备，操作简单，易于普及。实施例2参见图3，图3是本发明实施例提供的一种角膜曲率的生成装置，包括图像获取模块201、模型检测模块202、椭圆拟合模块203和曲率生成模块204；所述图像获取模块201用于获取待检测眼部相对于视标的瞬时注视图像；所述模型检测模块202用于将所述瞬时注视图像输入至预先设置的神经网络模型，以使所述神经网络模型根据所述瞬时注视图像进行预设数量的关键点检测，输出关键点坐标信息；其中，所述神经网络模型是根据多个瞬时注视样本图像以及各瞬时注视样本图像对应的关键点标注结果进行训练得到的；所述椭圆拟合模块203用于基于所述关键点坐标信息进行椭圆拟合，生成用于表征角膜轮廓的第一椭圆方程以及所述视标在角膜中的成像轮廓的第二椭圆方程；所述曲率生成模块204用于提取所述第一椭圆方程和所述第二椭圆方程并结合预设公式生成所述待检测眼部的角膜曲率值。一实施例中，所述图像获取模块201用于获取待检测眼部相对于视标的瞬时注视图像，包括：在预设位置处固定一个视标并开启摄像头设备；当所述待检测眼部与所述视标的距离为预设距离时，闭合所述待检测眼部；当闭合时间达到预设时发送睁眼信号，并获取所述待检测眼部在睁开时对所述视标的瞬时注视图像。一实施例中，所述神经网络模型是根据多个瞬时注视样本图像以及各瞬时注视样本图像对应的关键点标注结果进行训练得到，具体包括：将所述瞬时注视样本图像输入至初始神经网络模型进行迭代训练，以使所述初始神经网络模型对输入的瞬时注视样本图像中的角膜轮廓和视标在角膜中的成像轮廓进行预设数量的关键点检测；当达到预设训练次数或输出的关键点坐标信息与输入的瞬时注视样本图像对应的关键点标注结果的误差在预设范围内时，得到所述神经网络模型；其中，所述关键点标注结果为预设数量关键点的坐标信息。一实施例中，所述角膜曲率的生成装置还包括基于第一浦肯野像成像原理计算角膜曲率半径值的半径计算模块，具体包括：根据第一预设公式计算所述视标在所述待检测眼部的角膜中的成像尺寸；其中所述第一预设公式的表达式为：式中，h′h为视标在水平方向上像的物理尺寸；Hhp为角膜的水平像素直径；Sh为角膜的水平物理横径；Phpix为视标在水平方向上像的像素尺寸；h′v为视标在垂直方向上像的物理尺寸；Vp为角膜的垂直像素直径；Sv为角膜的垂直物理直径；Pvpix为视标在垂直方向上像的像素尺寸；h′为视标的像的物理尺寸；根据第二预设公式计算所述视标在角膜中成像的横向放大率；其中，所述第二预设公式的表达式为：式中，β为横向放大率；h′为视标的像的物理尺寸；h为视标的物理尺寸；根据第三预设公式计算所述视标到所述视标在角膜中成像位置的距离；其中，所述第三预设公式的表达式为：式中，l为视标到成像位置的距离；Sh为角膜的实际水平横径；f为摄像头设备的焦距；Hhp为角膜的水平像素直径；根据第四预设公式计算所述待检测眼部的角膜曲率半径；其中，所述第四预设公式的表达式为：式中，r为角膜曲率半径；l为视标到成像位置的距离；β为横向放大率。一实施例中，所述提取所述第一椭圆方程和所述第二椭圆方程的坐标参数并结合预设公式生成所述待检测眼部的角膜曲率值，具体包括：基于所述第一椭圆方程的短轴长度和长轴长度获取角膜的水平像素直径，根据所述第一预设公式计算所述视标在水平方向上像的物理尺寸；基于所述第二椭圆方程的短轴长度和长轴长度获取所述视标的垂直像素直径，根据所述第一预设公式计算所述视标在垂直方向上像的物理尺寸；基于所述第一预设公式、所述第二预设公式和所述第四预设公式计算所述待检测眼部的角膜曲率半径；根据第五预设公式计算所述待检测眼部的角膜曲率；其中，所述第五预设公式的表达式为：式中，k为角膜曲率；r为曲率半径。一实施例中，角膜曲率的生成装置还包括：当计算第一预设角膜曲率时，基于所述第二椭圆方程提取所述视标在短轴方向上的像的像素尺寸，根据提取的所述视标在短轴方向上的像的像素尺寸计算所述第一预设角膜曲率；其中，所述第一预设角膜曲率为平K；当计算第二预设角膜曲率时，基于所述第二椭圆方程提取所述视标在长轴方向上的像的像素尺寸，根据提取的所述视标在长轴方向上的像的像素尺寸计算所述第二预设角膜曲率；其中，所述第二预设角膜曲率为陡K。一实施例中，所述角膜曲率的生成装置还包括基于角膜曲率生成所述待检测眼部的散光度数的散光计算模块，具体为：基于散光度数计算公式确定所述待检测眼部的散光度数；其中，所述散光度数计算公式的表达式为：d＝k2-k1；式中，d为散光度数；k2为陡K曲率，k1为平K曲率。所属领域的技术人员可以清楚的了解到，为描述的方便和简洁，上述描述的装置的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。本发明实施例提供一种角膜曲率的生成装置，将获取待检测眼部相对于视标的瞬时注视图像输入至预先设置的神经网络模型，通过深度学习训练后的模型对该瞬时注视图像进行关键点检测，输出该瞬时注视图像的关键点坐标信息，分别根据检测到的角膜与视标的关键点坐标信息进行椭圆拟合，获取角膜及视标轮廓，进而通过该椭圆方程的坐标参数以及预设公式计算待检测眼部的角膜曲率。本发明实施例提供的一种角膜曲率的生成方法通过深度学习的神经网络模型进行关键点检测，根据关键点坐标信息进行椭圆拟合，生成角膜轮廓以及视标在角膜中的成像轮廓，并通过预设公式生成角膜曲率值，无需专业人员进行操作，也不需要依赖高昂的专业设备，操作简单，易于普及。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明技术原理的前提下，还可以做出若干改进和替换，这些改进和替换也应视为本发明的保护范围。
