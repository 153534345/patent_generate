标题title
一种脊柱针刀穿刺导航系统
摘要abst
本发明实施例提供了一种脊柱针刀穿刺导航系统，包括：设置有第一导航单元的水针刀、设置有第二导航单元的三维超声探头、光学手术定位导航仪和跨模态图像显示模块，光学手术定位导航仪用于对水针刀和三维超声探头的三维空间坐标进行动态追踪，跨模态图像显示模块，用于三维脊柱病灶融合图像以及所述水针刀的刀体位于所述三维脊柱病灶融合图像中的位置信息，所述三维脊柱病灶融合图像为对所述三维超声图像数据和第一图像数据所配准融合得到的图像。医生在手术的过程中能够通过跨模态图像显示模块直观看到水针刀的针刀穿刺到患者的脊柱的具体位置能够提高腰椎间盘突出症提高治疗效果、减少并发症发生、缩短操作时间、降低医患辐射危害。
权利要求书clms
1.一种脊柱针刀穿刺导航系统，其特征在于，包括：水针刀，包括第一导航单元；三维超声探头，包括第二导航单元，所述三维超声探头用于在手术过程中获取患者脊柱的三维超声图像；光学手术定位导航仪，用于根据所获取的所述第一导航单元的坐标信息和所述第二导航单元的坐标信息对所述水针刀和所述三维超声探头的三维空间坐标进行动态追踪，得到所述水针刀的实时坐标信息和所述三维超声探头的实时坐标信息；跨模态图像显示模块，用于显示目标图像，所述目标图像包括三维脊柱病灶融合图像以及所述水针刀的刀体位于所述三维脊柱病灶融合图像中的位置信息，所述三维脊柱病灶融合图像为对所述三维超声图像数据和第一图像数据所配准融合得到的图像，所述第一图像数据为对手术前获取的患者脊柱的CT图像和/或MRI图像进行腰椎病变部位进行三维重建后的图像，所述位置信息根据所述水针刀的实时坐标信息、所述三维超声探头的实时坐标信息以及所述三维脊柱病灶融合图像得到。2.根据权利要求1所述的脊柱针刀穿刺导航系统，其特征在于，所述水针刀的刀体的末端设置第一导航单元，所述三维超声探头的前端设置有第二导航单元。3.根据权利要求2所述的脊柱针刀穿刺导航系统，其特征在于，所述第一导航单元包括第一导航空间架体和设置在所述第一导航空间架体上的多个红外反射球，所述第二导航单元包括第二导航空间架体和设置在所述第二导航空间架体上的多个红外反射球。4.根据权利要求1所述的脊柱针刀穿刺导航系统，其特征在于，所述跨模态图像显示模块还包括穿刺路径计算单元，所述穿刺路径计算单元用于对第一图像数据进行识别处理得到神经压迫靶点，并根据所述神经压迫靶点在所述第一图像数据中计算得到穿刺路径。5.根据权利要求1所述的脊柱针刀穿刺导航系统，其特征在于，所述跨模态图像显示模块还包括图像融合模块单元和显示屏单元，所述图像融合模块单元用于将手术前获取的患者脊柱的所述CT图像和/或所述MRI图像进行椎骨分割识别处理，得到所述第一图像数据；所述图像融合模块单元还用于将手术过程中获取的患者脊柱的三维超声图像和第一图像数据进行对称对齐与质心对齐处理，得到对齐后的初步融合图像数据；所述图像融合模块单元还用于利用点云精配准ICP算法对所述将初步融合图像数据进行融合处理得到三维脊柱病灶融合图像并将所述三维脊柱病灶融合图像传输至所述显示屏单元。6.根据权利要求5所述的脊柱针刀穿刺导航系统，其特征在于，所述第一图像包括CT图像和MRI图像；所述图像融合模块单元还用于将所述CT图像和所述MRI图像分别椎骨定位网络进行第一定位处理，得到所述CT图像的每个椎骨对应的定位点信息和所述MRI图像中的每个椎骨对应的定位点信息；通过所述定位点信息分别分割所述CT图像和所述MRI图像中的每个椎骨，得到所述CT图像中每个椎骨的第一椎骨图像数据和所述MRI图像中每个椎骨的第二椎骨图像数据；根据所述CT图像中每个椎骨的第一椎骨图像数据和所述MRI图像中每个椎骨的第二椎骨图像数据得到椎骨分割后的所述CT图像和所述MRI图像；将椎骨分割后的所述CT图像和所述MRI图像进行配准处理，得到所述第一图像数据。7.根据权利要求6所述的脊柱针刀穿刺导航系统，其特征在于，所述图像融合模块单元还用于：提取椎骨分割后的所述CT图像的landmark点和所述MRI图像的landmark点；依次取所述CT图像的landmark点与所述MRI图像的landmark点数量相同的点；将所述CT图像的landmark点与所述MRI图像的landmark点依次进行质心对齐，得到初始对齐图像；对所述初始对齐图像进行刚体变换和基于金字塔的非刚体配准处理，得到所述第一图像数据。8.一种脊柱针刀穿刺导航显示方法，其特征在于，应用于权利要求1-7任意一项所述的脊柱针刀穿刺导航系统，所述脊柱针刀穿刺导航显示方法包括：获取手术前的患者脊柱的CT图像和/或MRI图像；对所述CT图像和/或所述MRI图像进行腰椎病变部位进行三维重建，得到第一图像数据；获取三维超声图像数据；将所述三维超声图像数据与所述第一图像数据进行配准融合得到的三维脊柱病灶融合图像；分别通过所述第一导航单元和所述第二导航单元获取所述水针刀的坐标信息和所述三维超声探头的坐标信息；通过光学手术定位导航仪对获取的所述第一导航单元的坐标信息和所述第二导航单元的坐标信息对所述水针刀和所述三维超声探头的三维空间坐标进行动态追踪，得到所述水针刀的实时坐标信息和所述三维超声探头的实时坐标信息；根据所述水针刀的实时坐标信息、所述三维超声探头的实时坐标信息以及所述三维脊柱病灶融合图像计算得到所述水针刀的位置信息；根据所述三维脊柱病灶融合图像以及所述水针刀的位置信息生成目标图像并将目标图像发送至跨模态图像显示模块；控制所述跨模态图像显示模块对所述目标图像进行显示。9.一种控制器，包括：存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求8所述的脊柱针刀穿刺导航显示方法。10.一种计算机可读存储介质，存储有计算机可执行指令，所述计算机用于执行权利要8所述的脊柱针刀穿刺导航显示方法。
说明书desc
技术领域本发明涉及但不限于数据处理技术领域，尤其涉及一种脊柱针刀穿刺导航系统。背景技术腰椎间盘突出症是指纤维环断裂及髓核突出使腰椎间盘组织局限性移位而压迫邻近的韧带和神经根导致腰痛及下肢疼痛，是骨科常见疾病，人群发病率高。腰腿痛的终生发病率在60％-80％，复发率为60％-85％，其中35％左右的患病人群发展为腰椎间盘突出症。随着人口老龄化和现代人工作、生活习惯的改变，人们的腰背痛疾病负担上升越来越明显，腰椎间盘突出症患者越来越多，针对腰椎间盘突出症的治疗，主要分为手术和非手术治疗两种方法。腰椎间盘突出症手术治疗多需要在病变部位的皮肤上切口，分离肌肉、筋膜，再不同程度地切除组成椎管的部分结构，在椎管壁上打开一个窗口，最终显露、切除椎管内的病变椎间盘，这种方法会对腰椎的结构造成不同程度破坏，导致腰椎退变、腰椎不稳等后遗症，甚至还要通过融合内固定的方法重建术后脊柱的稳定性。脊柱传统手术治疗风险高创伤大，患者恢复慢、患者需要付出的住院费用高。发明内容以下是对本文详细描述的主题的概述。本概述并非是为了限制权利要求的保护范围。本发明实施例的主要目的在于提出一种脊柱针刀穿刺导航系统，能够提高腰椎间盘突出症提高治疗效果、减少并发症发生、缩短操作时间、降低医患辐射危害。第一方面，本发明实施例提供了一种脊柱针刀穿刺导航系统，包括：水针刀，包括第一导航单元；三维超声探头，包括第二导航单元，所述三维超声探头用于在手术过程中获取患者脊柱的三维超声图像；光学手术定位导航仪，用于根据所获取的所述第一导航单元的坐标信息和所述第二导航单元的坐标信息对所述水针刀和所述三维超声探头的三维空间坐标进行动态追踪，得到所述水针刀的实时坐标信息和所述三维超声探头的实时坐标信息；跨模态图像显示模块，用于显示目标图像，所述目标图像包括三维脊柱病灶融合图像以及所述水针刀的刀体位于所述三维脊柱病灶融合图像中的位置信息，所述三维脊柱病灶融合图像为对所述三维超声图像数据和第一图像数据所配准融合得到的图像，所述第一图像数据为对手术前获取的患者脊柱的CT图像和/或MRI图像进行腰椎病变部位进行三维重建后的图像，所述位置信息根据所述水针刀的实时坐标信息、所述三维超声探头的实时坐标信息以及所述三维脊柱病灶融合图像得到。在一些可选的实施例中，所述水针刀的刀体的末端设置第一导航单元，所述三维超声探头的前端设置有第二导航单元。在一些可选的实施例中，所述第一导航单元包括第一导航空间架体和设置在所述第一导航空间架体上的多个红外反射球，所述第二导航单元包括第二导航空间架体和设置在所述第二导航空间架体上的多个红外反射球。在一些可选的实施例中，所述光学手术定位导航仪为NDI VEGA光学定位仪。在一些可选的实施例中，所述跨模态图像显示模块还包括穿刺路径计算单元，所述穿刺路径计算单元用于对第一图像数据进行识别处理得到神经压迫靶点，并根据所述神经压迫靶点在所述第一图像数据中计算得到穿刺路径。在一些可选的实施例中，所述跨模态图像显示模块还包括图像融合模块单元和显示屏单元，所述图像融合模块单元用于将手术前获取的患者脊柱的所述CT图像和/或所述MRI图像进行椎骨分割识别处理，得到所述第一图像数据；所述图像融合模块单元还用于将手术过程中获取的患者脊柱的三维超声图像和处理后的述第一图像数据进行对称对齐与质心对齐处理，得到对齐后的初步融合图像数据；所述图像融合模块单元还用于利用点云精配准ICP算法对所述将初步融合图像数据进行融合处理得到三维脊柱病灶融合图像并将所述三维脊柱病灶融合图像传输至所述显示屏单元。在一些可选的实施例中，所述第一图像包括CT图像和MRI图像；所述图像融合模块单元还用于将所述CT图像和所述MRI图像分别椎骨定位网络进行第一定位处理，得到所述CT图像的每个椎骨对应的定位点信息和所述MRI图像中的每个椎骨对应的定位点信息；通过所述定位点信息分别分割所述CT图像和所述MRI图像中的每个椎骨，得到所述CT图像中每个椎骨的第一椎骨图像数据和所述MRI图像中每个椎骨的第二椎骨图像数据；根据所述CT图像中每个椎骨的第一椎骨图像数据和所述MRI图像中每个椎骨的第二椎骨图像数据得到椎骨分割后的所述CT图像和所述MRI图像；将椎骨分割后的所述CT图像和所述MRI图像进行配准处理，得到所述第一图像数据。在一些可选的实施例中，所述图像融合模块单元还用于：提取椎骨分割后的所述CT图像的l andmark点和所述MRI图像的l andmark点；依次取所述CT图像的l andmark点与所述MRI图像的l andmark点数量相同的点；将所述CT图像的l andmark点与所述MRI图像的l andmark点依次进行质心对齐，得到初始对齐图像；对所述初始对齐图像进行刚体变换和基于金字塔的非刚体配准处理，得到所述第一图像数据。第二方面，本发明实施例提供了一种脊柱针刀穿刺导航显示方法，其特征在于，应用于第一方面所述的脊柱针刀穿刺导航系统，所述脊柱针刀穿刺导航显示方法包括：获取手术前获取的患者脊柱的CT图像和/或MRI图像；对所述CT图像和/或所述MRI图像进行腰椎病变部位进行三维重建，得到第一图像数据；获取三维超声图像数据；将所述三维超声图像数据与所述第一图像数据进行配准融合得到的三维脊柱病灶融合图像；分别通过所述第一导航单元和所述第二导航单元获取所述水针刀的坐标信息和所述三维超声探头的坐标信息；通过光学手术定位导航仪对获取的所述第一导航单元的坐标信息和所述第二导航单元的坐标信息对所述水针刀和所述三维超声探头的三维空间坐标进行动态追踪，得到所述水针刀的实时坐标信息和所述三维超声探头的实时坐标信息；根据所述水针刀的实时坐标信息、所述三维超声探头的实时坐标信息以及所述三维脊柱病灶融合图像计算得到所述水针刀的位置信息；根据所述三维脊柱病灶融合图像以及所述水针刀的位置信息生成目标图像并将目标图像发送至跨模态图像显示模块；控制所述跨模态图像显示模块对所述目标图像进行显示。第三方面，本发明实施例提供了一种控制器，包括：存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现第二方面所述的脊柱针刀穿刺导航显示方法。第四方面，一种计算机可读存储介质，存储有计算机可执行指令，所述计算机可执行指令用于执行第二方面所述的脊柱针刀穿刺导航显示方法。本发明有益效果包括：一种脊柱针刀穿刺导航系统，该系统包括：水针刀、三维超声探头、光学手术定位导航仪以及跨模态图像显示模块，水针刀包括第一导航单元，三维超声探头包括第二导航单元，三维超声探头用于在手术过程中获取患者脊柱的三维超声图像。获取手术前的患者脊柱的CT图像和/或MRI图像，并对所述CT图像和/或所述MRI图像进行腰椎病变部位进行三维重建，得到第一图像数据，在手术的过程中，通过三维超声探头对患者脊柱进行扫描，获取患者脊柱的三维超声图像，跨模态图像显示模块会将三维超声图像和第一图像数据进行配准融合处理生成三维脊柱病灶融合图像，并将该三维脊柱病灶融合图像进行显示，通过光学手术定位导航仪将所获取的所述第一导航单元的坐标信息和所述第二导航单元的坐标信息对所述水针刀和所述三维超声探头的三维空间坐标进行动态追踪，得到所述水针刀的实时坐标信息和所述三维超声探头的实时坐标信息，由于三维脊柱病灶融合图像是根据三维超声探头所获取的三维超声图像，三维超声探头的实时坐标信息能够与三维脊柱病灶融合图像上的坐标匹配上，那么可以根据水针刀的实时坐标信息与三维超声探头的实时坐标信息的位置相对关系，即可以得到水针刀在三维脊柱病灶融合图像中的位置信息并在跨模态图像显示模块上显示三维脊柱病灶融合图像以及所述水针刀的刀体位于所述三维脊柱病灶融合图像中的位置信息。在本实施的技术方案中，脊柱针刀穿刺导航系统，能够将手术前的第一图像数据和在手术过程中扫描的动态的三维超声图像进行融合从而可以在跨模态图像显示模块动态地显示出患者脊柱中的重要结构，医生在手术的过程中能够通过跨模态图像显示模块直观看到水针刀的针刀穿刺到患者的脊柱的具体位置，能够提高手术的精准度，从而提高腰椎间盘突出症提高治疗效果、减少并发症发生、缩短操作时间、降低医患辐射危害。本发明的其它特征和优点将在随后的说明书中阐述，并且，部分地从说明书中变得显而易见，或者通过实施本发明而了解。本发明的目的和其他优点可通过在说明书、权利要求书以及附图中所特别指出的结构来实现和获得。附图说明图1是本发明一个实施例提供的脊柱针刀穿刺导航系统的示意图；图2是本发明一个实施例提供的脊柱针刀穿刺导航系统的跨模态图像显示模块中的控制器的示意图；图3是本发明一个实施例提供的应用于脊柱针刀穿刺导航系统的脊柱针刀穿刺导航显示方法的流程图；图4是本发明一个实施例提供的CT图像的示意图；图5是本发明一个实施例提供的MRI图像的示意图；图6是本发明一个实施例提供的对CT图像、MRI图像进行椎骨分割处理的椎骨定位网络的示意图；图7是本发明一个实施例提供的三维超声图像的示意图；图8是本发明一个实施例提供的三维脊柱病灶融合图像的示意图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅用以解释本发明，并不用于限定本发明。需要说明的是，虽然在装置示意图中进行了功能模块划分，在流程图中示出了逻辑顺序，但是在某些情况下，可以以不同于装置中的模块划分，或流程图中的顺序执行所示出或描述的步骤。说明书、权利要求书或上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。腰椎间盘突出症是指纤维环断裂及髓核突出使腰椎间盘组织局限性移位而压迫邻近的韧带和神经根导致腰痛及下肢疼痛，是骨科常见疾病，人群发病率高。其中，腰腿痛的终生发病率在60％-80％，复发率为60％-85％，其中35％左右的患病人群发展为腰椎间盘突出症。腰腿痛是造成人群伤残负担的第一原因，随着人口老龄化和现代人工作、生活习惯的改变，腰背痛疾病负担上升越来越明显,针对腰椎间盘突出症的治疗，主要分为手术和非手术治疗两种方法。腰椎间盘突出症手术治疗多需要在病变部位的皮肤上切口，分离肌肉、筋膜，再不同程度地切除组成椎管的部分结构，在椎管壁上打开一个窗口，最终显露、切除椎管内的病变椎间盘，这种方法会对腰椎的结构造成不同程度破坏，导致腰椎退变、腰椎不稳等后遗症，甚至还要通过融合内固定的方法重建术后脊柱的稳定性。脊柱传统手术治疗风险高创伤大，患者恢复慢、住院费用高，而对于大多数腰椎间盘突出症轻症病人首先采用或结合不同的非手术治疗方式，如推拿、牵引、针灸、针刀等，即可取得良好的症状缓解效果，非手术治疗方式缓解疼痛的成功率约为80％-90％。近年来针刀医学得到迅速的推广发展，不少的腰椎间盘突出症患者经水针刀治疗后腰腿痛症状均有明显的改善。水针刀疗法以中医学整体观和水针刀治疗原理相关理论为指导，结合现代脊柱腰椎局部解剖中脊神经-韧带-小关节囊，对腰椎小关节外侧囊区域的脊神经后内、外分支或椎间孔外口区域的脊神经前支神经卡压进行松解，从而达到治疗的目的，在临床应用于腰椎间盘突出症的治疗较为广泛。水针刀集合传统小针刀松解和局部硬膜外注射为一体的优势，通过直接松解椎间孔附近的韧带、关节囊以及瘢痕、粘连等病变软组织，来解除对神经血管的压迫，同时施以局部阻滞或封闭注射，以此消除脊神经周围的无菌性炎症，进而改善局部血液微循环，减轻神经根水肿，促进炎症物质吸收，从而缓解腰痛和下肢症状,水针刀已成为治疗腰椎间盘突出症重要的治疗方式之一。然而现阶段的水针刀疗法大多仍是以盲探为主，对针刀的穿刺深度、角度及剥离范围不易控制和掌握，并且存在误伤重要神经血管的可能，具有极大的盲目性和安全隐患。为解决上述存在的问题，本发明实施例提供了一种脊柱针刀穿刺导航系统，该系统包括：水针刀、三维超声探头、光学手术定位导航仪以及跨模态图像显示模块，其中水针刀，包括第一导航单元；三维超声探头，包括第二导航单元，三维超声探头用于在手术过程中获取患者脊柱的三维超声图像；光学手术定位导航仪，用于根据所获取的第一导航单元的坐标信息和第二导航单元的坐标信息对水针刀和三维超声探头的三维空间坐标进行动态追踪，得到水针刀的实时坐标信息和三维超声探头的实时坐标信息；跨模态图像显示模块，用于显示目标图像，目标图像包括三维脊柱病灶融合图像以及水针刀的刀体位于三维脊柱病灶融合图像中的位置信息，三维脊柱病灶融合图像为对三维超声图像数据和第一图像数据所配准融合得到的图像，第一图像数据为对手术前获取的患者脊柱的CT图像和/或MRI图像进行腰椎病变部位进行三维重建后的图像，位置信息根据水针刀的实时坐标信息、三维超声探头的实时坐标信息以及三维脊柱病灶融合图像得到。在本实施例的技术方案中，在手术的过程中，首先通过三维超声探头对患者脊柱进行扫描，获取患者脊柱的三维超声图像，跨模态图像显示模块会将三维超声图像和第一图像数据进行配准融合处理生成三维脊柱病灶融合图像，并将该三维脊柱病灶融合图像进行显示，通过光学手术定位导航仪将所获取的第一导航单元的坐标信息和第二导航单元的坐标信息对水针刀和三维超声探头的三维空间坐标进行动态追踪，得到水针刀的实时坐标信息和三维超声探头的实时坐标信息，由于三维脊柱病灶融合图像是根据三维超声探头所获取的三维超声图像，三维超声探头的实时坐标信息能够与三维脊柱病灶融合图像上的坐标匹配上，那么可以根据水针刀的实时坐标信息与三维超声探头的实时坐标信息的位置相对关系，即可以得到水针刀在三维脊柱病灶融合图像中的位置信息并在跨模态图像显示模块上显示三维脊柱病灶融合图像以及水针刀的刀体位于三维脊柱病灶融合图像中的位置信息。在本实施的技术方案中，脊柱针刀穿刺导航系统，能够将手术前的第一图像数据和在手术过程中扫描的动态的三维超声图像进行融合从而可以在跨模态图像显示模块动态地显示出患者脊柱中的重要结构，医生在手术的过程中能够通过跨模态图像显示模块直观看到水针刀的针刀穿刺到患者的脊柱的具体位置，能够提高手术的精准度，从而提高腰椎间盘突出症提高治疗效果、减少并发症发生、缩短操作时间、降低医患辐射危害。下面结合附图，对本发明实施例作进一步阐述。参照图1，图1为本发明一个实施例提供的一种脊柱针刀穿刺导航系统，包括：水针刀110、三维超声探头120、光学手术定位导航仪130以及跨模态图像显示模块140，其、其中，水针刀110包括第一导航单元111，三维超声探头120包括第二导航单元，该三维超声探头120用于在手术过程中获取患者脊柱的三维超声图像，光学手术定位导航仪130用于获取的第一导航单元111的坐标信息和第二导航单元的坐标信息，并根据所获取的第一导航单元111的坐标信息和第二导航单元的坐标信息对水针刀110和三维超声探头120的三维空间坐标进行动态追踪，得到水针刀110的实时坐标信息和三维超声探头120的实时坐标信息，跨模态图像显示模块140用于显示目标图像，目标图像包括三维脊柱病灶融合图像以及水针刀110的刀体位于三维脊柱病灶融合图像中的位置信息，三维脊柱病灶融合图像为对三维超声图像数据和第一图像数据所配准融合得到的图像，第一图像数据包括手术前获取的患者脊柱的CT图像和/或MRI图像，位置信息根据水针刀110的实时坐标信息、三维超声探头120的实时坐标信息以及三维脊柱病灶融合图像得到。需要说明的是，为了提高对水针刀110在三维脊柱病灶融合图像的位置信息的准确性，可以将第一导航单元111设置在水针刀110的刀体的末端，将第二导航单元设置在三维超声探头120的前端，使得在对水针刀110和三维超声探头120使用过程中既不会影响到医生的手术操作，也不会影响到光学手术定位导航仪130对第一导航单元111的坐标信息和第二导航单元的坐标信息的获取。在一些可选的实施例中，第一导航单元111包括第一导航空间架体和设置在第一导航空间架体上的多个红外反射球，第二导航单元包括第二导航空间架体和设置在第二导航空间架体上的多个红外反射球，光学手术定位导航仪130为NDI VEGA光学定位仪，可以通过NDI VEGA光学定位仪对水针刀110和三维超声探头120的位置进行动态追踪，得到水针刀110的实时坐标信息和三维超声探头120的实时坐标信息，从而可以根据水针刀110的实时坐标信息和三维超声探头120的实时坐标信息确定水针刀110和三维超声探头120的相对关系。可以理解的是，多个红外反射球表示至少三个红外反射球，本实施例对其不作具体限定。在一些可选的实施例中，跨模态图像显示模块140还包括图像融合模块单元和显示屏单元，图像融合模块单元用于将手术前获取的患者脊柱的CT图像和/或MRI图像进行椎骨分割识别处理，得到第一图像数据；然后将手术过程中获取的患者脊柱的三维超声图像和第一图像数据进行对称对齐与质心对齐处理，得到对齐后的初步融合图像数据；再利用点云精配准ICP算法对将初步融合图像数据进行融合处理得到三维脊柱病灶融合图像并将三维脊柱病灶融合图像传输至显示屏单元。在一些可选的实施例中，第一图像包括CT图像和MRI图像；由于每节椎骨之间形状及灰度差异较小，椎骨自动分割时难以区分，尽管骨骼可以通过阈值处理提取，但是每块椎骨之间空间上连通，难以分开，因此对椎骨的分割归结为椎骨的多类分割，目标是将每块椎骨及椎骨之间的关节囊独立的分割出来，为后续的穿刺规划、导航及CT、MRI融合提供支持，那么图像融合模块单元还可以用于将CT图像和MRI图像分别椎骨定位网络进行第一定位处理，得到CT图像的每个椎骨对应的定位点信息和MRI图像中的每个椎骨对应的定位点信息；然后通过定位点信息分别分割CT图像和MRI图像中的每个椎骨，得到CT图像中每个椎骨的第一椎骨图像数据和MRI图像中每个椎骨的第二椎骨图像数据；再根据CT图像中每个椎骨的第一椎骨图像数据和MRI图像中每个椎骨的第二椎骨图像数据得到椎骨分割后的CT图像和MRI图像；接着将椎骨分割后的CT图像和MRI图像进行配准处理，得到第一图像数据。在一些可选的实施例中，由于多模态图像的测度难以定义，在CT图像及MRI图像的脊椎骨分割的基础上，进一步对CT/MRI多模态图像进行自动配准，那么图像融合模块单元还可以用于先提取椎骨分割后的CT图像的l andmark点和MRI图像的l andmark点；然后依次取CT图像的l andmark点与MRI图像的l andmark点数量相同的点；再将CT图像的landmark点与MRI图像的l andmark点依次进行质心对齐，得到初始对齐图像；接着对初始对齐图像进行刚体变换和基于金字塔的非刚体配准处理，得到第一图像数据。在一些可选的实施例中，跨模态图像显示模块140还包括穿刺路径计算单元，穿刺路径计算单元用于对第一图像数据进行识别处理得到神经压迫靶点，并根据神经压迫靶点在第一图像数据中计算得到穿刺路径，并将穿刺路径发送至显示屏单元，通过显示屏单元进行显示。通过本实施例中的穿刺路径计算单元，导航系统的智能穿刺路径规划模块需依靠智能算法自动识别出病变的突出腰椎间盘及其附近骨骼、韧带、压迫的神经或血管等结构，在不损伤重要组织前提下给出安全有效的穿刺路径方案以供操作医生参考和选择。如图2所示，图2是本申请一个实施例提供的用于执行脊柱针刀穿刺导航显示方法的控制器的示意图，控制器设置在图1的脊柱针刀穿刺导航系统的跨模态图像显示模块中。在图1的示例中，该控制器100设置有处理器110和存储器120，其中，处理器110和存储器120可以通过总线或者其他方式连接，图1中以通过总线连接为例。存储器120作为一种非暂态计算机可读存储介质，可用于存储非暂态软件程序以及非暂态性计算机可执行程序。此外，存储器120可以包括高速随机存取存储器，还可以包括非暂态存储器，例如至少一个磁盘存储器件、闪存器件、或其他非暂态固态存储器件。在一些实施方式中，存储器120可选包括相对于处理器110远程设置的存储器，这些远程存储器可以通过网络连接至该控制器100。上述网络的实例包括但不限于互联网、企业内部网、局域网、移动通信网及其组合。控制器可以是可编程控制器，或者可以是其他控制器，本实施例对其不作具体限定。本领域技术人员可以理解的是，图1中示出的控制器并不构成对本申请实施例的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件布置。基于上述控制器，下面提出本发明的应用于脊柱针刀穿刺导航系统的脊柱针刀穿刺导航显示方法的各个实施例。参照图3，图3为本发明一个实施例提供的脊柱针刀穿刺导航显示方法的流程图，本发明实施例的脊柱针刀穿刺导航显示方法可以包括但不限于包括步骤S100、步骤S200、步骤S300、步骤S400、步骤S500、步骤S600、步骤S700、步骤S800和步骤S900。步骤S100，获取手术前的患者脊柱的CT图像和/或MRI图像。具体地，如图4所示的CT图像可清晰显示骨组织，如图5所示的MRI图像可以细腻显示骨骼肌、病变的椎间盘或韧带、被压迫的神经或血管等软组织，能够识别得到超声检测无法检测得到的病变情况。步骤S200，对CT图像和/或MRI图像进行腰椎病变部位进行三维重建，得到第一图像数据。具体地，将CT图像和MRI图像进行三维重建得到的融合图像能够使得医生在术前辨认得到骨骼、气体等不易被术中超声检出的病变，被重新识别出来，在CT和MRI的融合图像里能够同时看到同一平面内超声扫描显示不到的其余区域。该跨模态图像融合技术得到的第一图像数据相比于超声有更佳的分辨率和更大的视野。在一些可选的实施例中，将CT图像和MRI图像通过椎骨定位网络进行第一定位处理，得到CT图像的每个椎骨对应的定位点信息和MRI图像中的每个椎骨对应的定位点信息；然后通过定位点信息分别分割CT图像和MRI图像中的每个椎骨，得到CT图像中每个椎骨的第一椎骨图像数据和MRI图像中每个椎骨的第二椎骨图像数据；再根据CT图像中每个椎骨的第一椎骨图像数据和MRI图像中每个椎骨的第二椎骨图像数据得到椎骨分割后的CT图像和MRI图像；接着将椎骨分割后的CT图像和MRI图像进行配准处理，得到第一图像数据。在一些可选的实施例中，对于将椎骨分割后的CT图像和MRI图像进行配准处理，得到第一图像数据的步骤，可以先对于将椎骨分割后的CT图像和MRI图像进行配准处理，得到第一图像数据的步骤中，可以先提取椎骨分割后的CT图像的l andmark点和MRI图像的landmark点；然后依次取CT图像的l andmark点与MRI图像的l andmark点数量相同的点；再将CT图像的l andmark点与MRI图像的l andmark点依次进行质心对齐，得到初始对齐图像；接着对初始对齐图像进行刚体变换和基于金字塔的非刚体配准处理，得到第一图像数据。在一些可选的实施例中，参照图6，椎骨定位网络由两部分组成，第一部分是椎骨的自动定位网络，第二部分是通过自动定位点分割出定位点所在的椎骨。在椎骨定位网络中通过一个语义分割网络回归出每个定位点热图。热图的生成是,首先计算第i个脊椎骨的质心xi，根据质心采用高斯模糊函数生成金标准热图：表示越靠近目标点xi，灰度值越大，其中σi为可学习参数，这样热图就类似于一个光斑图像，初始生成的热图HLA是一个粗糙的热图，可能会出来多个光斑或者光斑比较模糊，将光斑图像输入到几个连续的卷积核中，目标是排除掉那些虚假的光斑，并使用较大的卷积核尺度提高特征的感受野，从全局的角度进一步提取目标点，得到一个更加精确的热图HSC。HLA的优势是视野较小，提取局部特征，可以预测出较多的位置精确的目标点，缺点是针对具体的目标点假阳性高，HSC的优势在于感受野大，假阳性低，但是预测位置不精确，因此结合两者的优点，通过相乘的方式得到目标热图：目标函数采用L2损失函数：那么最终的定位点取热图中灰度值最大的点的坐标：根据得到的热图点，通过裁剪的方式提取局部的椎骨原始灰度图像，将热图与灰度图作为分割网络U-Net的输入，进一步专注于分割定位点所在的脊椎骨，损失函数采用交叉熵和DSC损失函数：步骤S300，获取三维超声图像数据。具体地，由于CT图像和MRI图像融合的第一图像数据虽然能够识别到病变情况，但是并不能获取到患者的实时情况，在手术过程中，需要通过三维超声探头对患者脊柱进行扫描，得到实时的如图7所示的三维超声图像。步骤S400，将三维超声图像数据与第一图像数据进行配准融合得到的三维脊柱病灶融合图像。具体地，将三维超声图像数据与第一图像数据进行配准融合得到的如图8所示的三维脊柱病灶融合图像，三维脊柱病灶融合图像能够实时得到患者脊柱的实时图像的情况下，还能够通过手术前得到CT图像和MRI图像中获取到患者的病灶情况。通过跨模态图像融合技术得到的三维脊柱病灶融合图像具有以下优势：1、三维超声图像与MRI/CT图像叠合相当于变相增加术中超声的清晰度与扫描范围；2、超声的实时快速成像使术前和术中影像的配准调整更加简捷，这对于引导介入性的检查治疗非常有利；3、目前多采用术中CT或C臂/O臂采集的放射影像进行图像融合，将超声声像对其进行替换既可节约设备经济成本及手术室占地空间，更重要的是能够大大减少医护人员和患者暴露于电离辐射的机会；4、对比增强或彩色多普勒超声可进一步拓展基于术中超声的跨模态融合图像的丰度与功能。在一些可选的实施例中，先将手术过程中获取的患者脊柱的三维超声图像和第一图像数据进行对称对齐与质心对齐处理，得到对齐后的初步融合图像数据；图像融合模块单元还用于利用点云精配准ICP算法对将初步融合图像数据进行融合处理得到三维脊柱病灶融合图像并将三维脊柱病灶融合图像传输至显示屏单元。步骤S500，分别从第一导航单元和第二导航单元获取水针刀的坐标信息和三维超声探头的坐标信息。具体地，当完成三维脊柱病灶融合图像生成以后，为了能够在手术的过程中得到水针刀的位置信息，那么需要分别通过第一导航单元和第二导航单元获取水针刀的坐标信息和三维超声探头的坐标信息。步骤S600，通过光学手术定位导航仪对获取的第一导航单元的坐标信息和第二导航单元的坐标信息对水针刀和三维超声探头的三维空间坐标进行动态追踪，得到水针刀的实时坐标信息和三维超声探头的实时坐标信息。具体地，当获取到第一导航单元的坐标信息和第二导航单元的坐标信息之后，通过光学手术定位导航仪对获取的第一导航单元的坐标信息和第二导航单元的坐标信息对水针刀和三维超声探头的三维空间坐标进行动态追踪，从而得到水针刀的实时坐标信息和三维超声探头的实时坐标信息，从而可以根据水针刀的实时坐标信息和三维超声探头的实时坐标信息确定水针刀和三维超声探头的相对位置关系。步骤S700，根据水针刀的实时坐标信息、三维超声探头的实时坐标信息以及三维脊柱病灶融合图像计算得到水针刀的位置信息。具体地，根据水针刀的实时坐标信息、三维超声探头的实时坐标信息能够得到水针刀和三维超声探头的相对位置关系，由于三维脊柱病灶融合图像是基于三维超声探头所获取的三维超声图像所融合得到的图像，那么水针刀在三维脊柱病灶融合图像中的位置信息能够根据水针刀和三维超声探头的相对位置关系换算得到。步骤S800，根据三维脊柱病灶融合图像以及水针刀的位置信息生成目标图像并将目标图像发送至跨模态图像显示模块。步骤S900，控制跨模态图像显示模块对目标图像进行显示。在一些可选的实施例中，在手术的过程中，先通过三维超声探头对患者脊柱进行扫描，获取患者脊柱的三维超声图像，跨模态图像显示模块会将三维超声图像和第一图像数据进行配准融合处理生成三维脊柱病灶融合图像，并将该三维脊柱病灶融合图像进行显示，通过光学手术定位导航仪将所获取的第一导航单元的坐标信息和第二导航单元的坐标信息对水针刀和三维超声探头的三维空间坐标进行动态追踪，得到水针刀的实时坐标信息和三维超声探头的实时坐标信息，由于三维脊柱病灶融合图像是根据三维超声探头所获取的三维超声图像，三维超声探头的实时坐标信息能够与三维脊柱病灶融合图像上的坐标匹配上，那么可以根据水针刀的实时坐标信息与三维超声探头的实时坐标信息的位置相对关系，即可以得到水针刀在三维脊柱病灶融合图像中的位置信息并在跨模态图像显示模块上显示三维脊柱病灶融合图像以及水针刀的刀体位于三维脊柱病灶融合图像中的位置信息。在本实施的技术方案中，脊柱针刀穿刺导航系统，能够将手术前的第一图像数据和在手术过程中扫描的动态的三维超声图像进行融合从而可以在跨模态图像显示模块动态地显示出患者脊柱中的重要结构，医生在手术的过程中能够通过跨模态图像显示模块直观看到水针刀的针刀穿刺到患者的脊柱的具体位置，能够提高手术的精准度，从而提高腰椎间盘突出症提高治疗效果、减少并发症发生、缩短操作时间、降低医患辐射危害。在一些可选的实施例中，在手术前获取手术前的患者脊柱的CT图像和/或MRI图像，对CT图像和/或MRI图像进行腰椎病变部位进行三维重建，得到第一图像数据，然后对第一图像数据进行识别处理得到神经压迫靶点，并根据神经压迫靶点在第一图像数据中计算得到穿刺路径，并将穿刺路径融合至第一图像数据中，从而生成具有穿刺路径的第一图像数据。在手术的过程中，先通过三维超声探头对患者脊柱进行扫描，获取患者脊柱的三维超声图像，跨模态图像显示模块会将三维超声图像和第一图像数据进行配准融合处理生成三维脊柱病灶融合图像，并将该三维脊柱病灶融合图像进行显示，通过光学手术定位导航仪将所获取的第一导航单元的坐标信息和第二导航单元的坐标信息对水针刀和三维超声探头的三维空间坐标进行动态追踪，得到水针刀的实时坐标信息和三维超声探头的实时坐标信息，由于三维脊柱病灶融合图像是根据三维超声探头所获取的三维超声图像，三维超声探头的实时坐标信息能够与三维脊柱病灶融合图像上的坐标匹配上，那么可以根据水针刀的实时坐标信息与三维超声探头的实时坐标信息的位置相对关系，即可以得到水针刀在三维脊柱病灶融合图像中的位置信息并在跨模态图像显示模块上显示三维脊柱病灶融合图像以及水针刀的刀体位于三维脊柱病灶融合图像中的位置信息。在本实施的技术方案中，脊柱针刀穿刺导航系统，能够将手术前的第一图像数据和在手术过程中扫描的动态的三维超声图像进行融合从而可以在跨模态图像显示模块动态地显示出患者脊柱中的重要结构以及具体的穿刺路径，医生在手术的过程中能够通过跨模态图像显示模块看到水针刀的针刀穿刺的过程中是否在穿刺路径上，从而在手术的过程中能够进行实时调整，使得水针刀的针刀能够准确达到病灶位置，能够提高手术的精准度，从而提高腰椎间盘突出症提高治疗效果、减少并发症发生、缩短操作时间、降低医患辐射危害。在一些可选的实施例中，先对脊柱多模态影像数据的进行收集与分类；具体地，收集预设数量的腰椎间盘突出症患者的脊柱穿刺前病变腰椎节段的CT图像、MRI图像和脊柱穿刺中三维超声影像，进行归类整理，并排除CT图像数据中植入物金属伪影、腰椎滑脱、脊柱畸形、脊柱感染、脊柱肿瘤等影像数据。然后，将CT图像、MRI图像进行多类别分割融合处理，得到三维可视化完整腰椎数字化解剖模型。具体地，先将获取的患者脊柱穿刺前CT图像、MRI图像数据，利用高度形变微分同胚度量映射及深度卷积神经网络等技术，对CT图像、MRI图像数据分割提取出有效特征数据，然后采用特征相似性度量、优化策略选择、形变建模、拉普拉斯网络等方法进行刚体变换和非刚体配准融合，利用面绘制方法三维重建腰椎完整模型，能够清晰呈现病变腰椎间盘突出组织以及周围椎骨、神经、血管、韧带等结构。再将三维超声声像数据与CT、MRI数据的配准融合；具体地，先通过手动自由式超声扫描与光学导航系统配合完成患者病灶三维空间的多平面二维扫描成像，然后基于超声声像二值化和最近邻像素建立患者病灶二维显像平面之间的空间变换关系并进行超声三维重建，并利用深度学习算法增强三维超声图像质量。在实现CT/MRI图像融合的基础上，为了进一步完成基于深度卷积神经网络的CT/MRI融合模型与三维超声的表面骨性结构自动化配准。可以在该表面配准初始化采用对称对齐与质心对齐两种方式，然后利用点云精配准ICP算法完成CT、MRI、三维超声的三模态图像融合，实现腰椎三维可视化模型与患者实时解剖位置的精准快速自动配准。接着利用人工智能深度学习算法自动学习分割出腰椎间孔周围椎骨、椎间盘、神经、血管、韧带等结构，以腰椎间盘突出部分为中心，分析计算出不同手术路径靶点中心与邻近重要神经血管、关节突关节距离和相应Kambin三角面积等参数，记录相关经皮穿刺角度与深度，经卷积神经网络不断迭代训练，最终生成较优的一个或数个手术路径方案，在手术医生选择确定目标使用的穿刺路径后，将穿刺路径显示在显示屏单元上。在手术过程中，通过NDI VEGA光学定位仪获取水针刀的第一导航单元的坐标信息和三维超声探头的第二导航单元的坐标信息，并根据第一导航单元的坐标信息和第二导航单元的坐标信息对水针刀和三维超声探头的三维空间坐标进行动态追踪，得到水针刀的实时坐标信息和三维超声探头的实时坐标信息，从而能够在跨模态图像显示模块的显示屏单元上显示目标图像包括三维脊柱病灶融合图像以及水针刀的刀体位于三维脊柱病灶融合图像中的位置信息。在本实施的技术方案中，脊柱针刀穿刺导航系统，能够将手术前的第一图像数据和在手术过程中扫描的动态的三维超声图像进行融合从而可以在跨模态图像显示模块动态地显示出患者脊柱中的重要结构，医生在手术的过程中能够通过跨模态图像显示模块直观看到水针刀的针刀穿刺到患者的脊柱的具体位置，能够提高手术的精准度，从而提高腰椎间盘突出症提高治疗效果、减少并发症发生、缩短操作时间、降低医患辐射危害。此外，本申请的一个实施例还提供了一种计算机可读存储介质，该计算机可读存储介质存储有计算机可执行指令，当计算机可执行指令用于执行上述脊柱针刀穿刺导航显示方法，例如，执行以上描述的图3中的方法步骤S100至S900。本领域普通技术人员可以理解，上文中所公开方法中的全部或某些步骤、系统可以被实施为软件、固件、硬件及其适当的组合。某些物理组件或所有物理组件可以被实施为由处理器，如中央处理器、数字信号处理器或微处理器执行的软件，或者被实施为硬件，或者被实施为集成电路，如专用集成电路。这样的软件可以分布在计算机可读介质上，计算机可读介质可以包括计算机存储介质和通信介质。如本领域普通技术人员公知的，术语计算机存储介质包括在用于存储信息的任何方法或技术中实施的易失性和非易失性、可移除和不可移除介质。计算机存储介质包括但不限于RAM、ROM、EEPROM、闪存或其他存储器技术、CD-ROM、数字多功能盘或其他光盘存储、磁盒、磁带、磁盘存储或其他磁存储装置、或者可以用于存储期望的信息并且可以被计算机访问的任何其他的介质。此外，本领域普通技术人员公知的是，通信介质通常包括计算机可读指令、数据结构、程序模块或者诸如载波或其他传输机制之类的调制数据信号中的其他数据，并且可包括任何信息递送介质。需要说明的是，计算机可读存储介质可以是非易失性，也可以是易失性。以上是对本申请的较佳实施进行了具体说明，但本申请并不局限于上述实施方式，熟悉本领域的技术人员在不违背本申请精神的共享条件下还可作出种种等同的变形或替换，这些等同的变形或替换均包括在本申请权利要求所限定的范围内。
