标题title
基于图像文件的头文件实现地图栅格数据加密及偏移方法
摘要abst
本申请公开一种基于图像文件的头文件实现地图栅格数据加密及偏移方法。该方法包括：采用均值重采样的方法将地图栅格数据分层形成一定层数的金字塔结构；以地理信息处理工具作为转换工具，将地图矢量数据转换为栅格数据，将空间分辨率相同的、经矢量数据转换的栅格数据的图层和形成金字塔结构的栅格数据叠置处理，形成栅格图层数据；将栅格图层数据划分为不重叠且大小为设定尺寸的影像块；将设定尺寸的瓦片影像存储为图像文件TIFF文件；对TIFF文件的头文件设置至少三位数的数字密码。利用本申请实施例能够实现地图栅格数据向外发布时的坐标加密及偏移处理，操作过程便捷，且可靠性高。
权利要求书clms
1.一种基于图像文件的头文件实现地图栅格数据加密及偏移方法，其特征在于，包括：采用均值重采样的方法将地图栅格数据分层形成一定层数的金字塔结构；其中，以地图栅格数据的底层原始影像为金字塔结构的第一层，金字塔结构的所有层的影像表示的地理范围一致；以地理信息处理工具作为转换工具，将地图矢量数据转换为栅格数据，将空间分辨率相同的、经矢量数据转换的栅格数据的图层和形成金字塔结构的栅格数据叠置处理，形成栅格图层数据；其中，矢量数据与栅格数据表示的地理范围一致；将所述栅格图层数据按照由上到下、从左到右的顺序划分为不重叠且大小为设定尺寸的瓦片影像，其中，不足所述设定尺寸的部分通过补足形成所述设定尺寸的瓦片影像；将所述设定尺寸的瓦片影像存储为图像文件TIFF文件，其中属于同一层级或同一区域范围的瓦片影像存储在同一个TIFF文件中；对所述TIFF文件的头文件设置至少三位数的数字密码，其中第一位和第二位密码与解密密码相对应，第三位密码用于控制栅格数据的坐标偏移量，并且第一位和第二位密码为预先设置的数字，第三位密码为设置密码时确定的数字或随机数。2.根据权利要求1所述的基于图像文件的头文件实现地图栅格数据加密及偏移方法，其特征在于，还包括解密时，输入所述TIFF文件的数字密码，其中，所述第一位和第二位密码输入正确时解密TIFF文件，第三位密码输入正确时使空间数据产生坐标偏移。3.根据权利要求1所述的基于图像文件的头文件实现地图栅格数据加密及偏移的方法，其特征在于，第一位密码位0-9中任一数字；第二位密码为0-9中任一数字；第三位密码为0-9中任一数字。4.根据权利要求1所述的基于图像文件的头文件实现地图栅格数据加密及偏移方法，其特征在于，金字塔的层数越高，影像分辨率越低，所述方法还包括：根据需要的影像覆盖范围和影像分辨率，确定金字塔的总层数。5.根据权利要求1所述的基于图像文件的头文件实现地图栅格数据加密及偏移方法，其特征在于，将所述栅格数据分层形成以2为因子的金字塔结构，以原始影像作为所述金字塔结构的第0层，对所述第0层影像的行、列数分别除以２，采用均值重采样的方法，得到所述金字塔结构的第1层；再以第1层金字塔为基础，采用上述相同的步骤得到所述金字塔结构的第2层；以此类推，得到所述金字塔结构的第n层。6.根据权利要求1所述的基于图像文件的头文件实现地图栅格数据加密及偏移方法，其特征在于，所述设定尺寸包括256像元×256像元。7.根据权利要求1所述的基于图像文件的头文件实现地图栅格数据加密及偏移方法，其特征在于，所述金字塔的总层数≤15。8.根据权利要求6所述的基于图像文件的头文件实现地图栅格数据加密及偏移方法，其特征在于，所述坐标偏移的偏移量总长为300米至500米。9.一种基于图像文件的头文件实现地图栅格数据加密及偏移装置，其特征在于，包括：分层模块，采用均值重采样的方法将地图的栅格数据分层形成一定层数的金字塔结构；其中，以地图的栅格数据的底层原始影像为金字塔结构的第一层，金字塔结构的所有层的影像表示的地理范围一致；融合模块，以地理信息处理工具作为转换工具，将地图的矢量数据转换为栅格数据，将空间分辨率相同的、经矢量数据转换的栅格数据的图层和形成金字塔结构的栅格数据叠置处理，形成栅格图层数据；其中，矢量数据与栅格数据表示的地理范围一致；划分模块，用于将所述栅格图层数据按照由上到下、从左到右的顺序划分为不重叠且大小为设定尺寸的瓦片影像，其中，不足所述设定尺寸的部分通过补足形成所述设定尺寸的瓦片影像；存储模块，用于将所述设定尺寸的瓦片影像存储为图像文件TIFF文件，其中属于同一层级或同一区域范围的瓦片影像存储在同一个TIFF文件中；设置模块，用于对所述TIFF文件的头文件设置至少三位数的数字密码，其中第一位和第二位密码与解密密码相对应，第三位密码用于控制栅格数据的坐标偏移量，并且第一位和第二位密码为预先设置的数字，第三位密码为设置密码时确定的数字或随机数。10.一种电子设备，其特征在于，所述电子设备包括：处理器以及存储有计算机程序指令的存储器；所述电子设备执行所述计算机程序指令时实现如权利要求1-8中任一项所述的方法。11.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储有计算机程序指令，所述计算机程序指令被处理器执行时实现如权利要求1-8中任一项所述的方法。
说明书desc
技术领域本申请涉及地图数据处理技术领域，特别涉及基于图像文件的头文件实现地图栅格数据加密及偏移的方法、装置、电子设备及计算机可读存储介质。背景技术目前，对于地图类产品的研究及公布，相关要求之一是必须使用加偏移的算法，对地图的真实坐标进行偏移处理之后才可公之于众，例如，对于一款电子地图，需要将电子地图的真实坐标加密成“火星坐标”才可以出版和发布。对于具有定位和导航功能的相关软件，还要求加入保密算法，通过保密算法将输出的坐标信号加密转换成才可准许使用。但是，经研究发现，目前一些广泛使用的商用地图软件的卫星影像坐标包含真实坐标，在此情况下，这类地图软件中的数据与“火星坐标”存在偏差，不相匹配。存在一种情况是，对于习惯使用这类商业地图软件的用户群体，诸如旅游爱好者或探险爱好者等，由于地图数据不匹配，在参与某些导航定位活动时，在一些地理区域中可能无法正常开展，随之可能出现某些用户为了使地图数据相匹配而费力破解加密的“火星坐标”的情况。针对此情况，需要本领域的研究者提出更加可靠且便捷易用的地图数据加密及偏移处理技术。发明内容针对现有技术中存在的技术问题，本申请实施例提供一种基于图像文件的头文件实现地图栅格数据加密及偏移的方法、装置、电子设备、计算机可读存储介质及计算机程序产品，用于解决至少一种技术问题。本申请实施例提供一种基于图像文件的头文件实现地图栅格数据加密及偏移的方法，包括：采用均值重采样的方法将地图栅格数据分层形成一定层数的金字塔结构；其中，以地图栅格数据的底层原始影像为金字塔结构的第一层，金字塔结构的所有层的影像表示的地理范围一致；以地理信息处理工具作为转换工具，将地图矢量数据转换为栅格数据，将空间分辨率相同的、经矢量数据转换的栅格数据的图层和形成金字塔结构的栅格数据叠置处理，形成栅格图层数据；其中，矢量数据与栅格数据表示的地理范围一致；将所述栅格图层数据按照由上到下、从左到右的顺序划分为不重叠且大小为设定尺寸的影像块，其中，不足所述设定尺寸的部分通过补足形成所述设定尺寸的影像块；将所述设定尺寸的瓦片影像存储为图像文件TIFF文件，其中属于同一层级或同一区域范围的瓦片影像存储在同一个TIFF文件中；对所述TIFF文件的头文件设置至少三位数的数字密码，其中第一位和第二位密码与解密密码相对应，第三位密码用于控制栅格数据的坐标偏移量，并且第一位和第二位密码为预先设置的数字，第三位密码为设置密码时确定的数字或随机数。可选地，根据本申请实施例的方法，还包括解密时，输入所述TIFF文件的数字密码，其中，所述第一位和第二位密码输入正确时解密TIFF文件，第三位密码输入正确时使空间数据产生坐标偏移。可选地，根据本申请实施例的方法，第一位密码位0-9中任一数字；第二位密码为0-9中任一数字；第三位密码为0-9中任一数字。可选地，根据本申请实施例的方法，金字塔的层数越高，影像分辨率越低，所述方法还包括：根据需要的影像覆盖范围和影像分辨率，确定金字塔的总层数。可选地，根据本申请实施例的方法，将所述栅格数据分层形成以2为因子的金字塔结构，以原始影像作为所述金字塔结构的第0层，对所述第0层影像的行、列数分别除以２，采用均值重采样的方法，得到所述金字塔结构的第1层；再以第1层金字塔为基础，采用上述相同的步骤得到所述金字塔结构的第2层；以此类推，得到所述金字塔结构的第n层。可选地，根据本申请实施例的方法，所述设定尺寸包括256像元×256像元。可选地，根据本申请实施例的方法，所述金字塔的总层数≤15。可选地，根据本申请实施例的方法，所述坐标偏移的偏移量总长为300米至500米。本申请实施例提供一种基于图像文件的头文件实现地图栅格数据加密及偏移的装置，包括：分层模块，采用均值重采样的方法将地图栅格数据分层形成一定层数的金字塔结构；其中，以地图栅格数据的底层原始影像为金字塔结构的第一层，金字塔结构的所有层的影像表示的地理范围一致；融合模块，以地理信息处理工具作为转换工具，将地图矢量数据转换为栅格数据，将空间分辨率相同的、经矢量数据转换的栅格数据的图层和形成金字塔结构的栅格数据叠置处理，形成栅格图层数据；其中，矢量数据与栅格数据表示的地理范围一致；划分模块，用于将所述栅格图层数据按照由上到下、从左到右的顺序划分为不重叠且大小为所述设定尺寸的影像块，其中，不足所述设定尺寸的部分通过补足形成所述设定尺寸的影像块；存储模块，用于将所述设定尺寸的瓦片影像存储为图像文件TIFF文件，其中属于同一层级或同一区域范围的瓦片影像存储在同一个TIFF文件中；设置模块，用于对所述TIFF文件的头文件设置至少三位数的数字密码，其中第一位和第二位密码与解密密码相对应，第三位密码用于控制栅格数据的坐标偏移量，并且第一位和第二位密码为预先设置的数字，第三位密码为设置密码时确定的数字或随机数。本申请实施例提供一种电子设备，所述电子设备包括处理器以及存储有计算机程序指令的存储器；所述处理器执行所述计算机程序指令时实现如上所述的方法的步骤。本申请实施例提供一种计算机可读存储介质，所述计算机可读存储介质上存储有计算机程序指令，所述计算机程序指令被处理器执行时实现如上所述的方法的步骤。本申请实施例提供一种计算机程序产品，所述计算机程序产品中包括计算机程序指令，所述计算机程序指令被处理器执行时实现如上所述方法的步骤。本申请实施例基于地图矢量数据与栅格数据的融合技术，将矢量数据固定在栅格数据中形成栅格图层数据，并将栅格图层数据划分为瓦片影像并将瓦片影像储存到图像文件中，通过对图像文件的头文件设置三位密码，实现对栅格数据的加密及坐标偏移，在头文件中设置密码的方式操作简便，且便于适时更换，密码的破解、模仿以及反纠偏难度大，可靠性高。附图说明为了更清楚地说明本申请实施例的技术方案，以下对本申请实施例中的附图作简单介绍。图1是本申请实施例的系统架构的示意图；图2是本申请实施例的基于图像文件的头文件实现地图栅格数据加密及偏移的方法的流程框图；图3是本申请实施例的栅格数据坐标偏移的流程图；图4是本申请实施例的TFFF文件读取及显示的流程图；图5是本申请实施例的基于图像文件的头文件实现地图栅格数据加密及偏移装置的结构框图；图6是用来实现本申请实施例的基于图像文件的头文件实现地图栅格数据加密及偏移的方法的电子设备的示意图。具体实施方式以下将参考若干示例性实施方式来描述本申请的原理和精神。应当理解，提供这些实施方式的目的是为了使本申请的原理和精神更加清楚和透彻，使本领域技术人员能够更好地理解进而实现本申请的原理和精神。本文中提供的示例性实施方式仅是本申请的一部分实施方式，而不是全部的实施方式。基于本文中的实施方式，本领域普通技术人员在不付出创造性劳动前提下所获得的所有其他实施方式，都属于本申请保护的范围。本申请的实施例涉及终端设备和/或服务器。本领域技术人员知晓，本申请的实施方式可以实现为一种系统、装置、设备、方法、计算机可读存储介质或计算机程序产品。因此，本公开可以具体实现为以下至少一种形式：完全的硬件、完全的软件，或者硬件与软件结合的形式。根据本申请的实施方式，本申请请求保护一种基于图像文件的头文件实现地图栅格数据加密及偏移的方法、装置、电子设备、计算机可读存储介质及计算机程序产品。图1示出了本申请实施例的一种系统架构的示意图。如图1所示，该系统包括终端设备102和服务器104。其中，终端设备102可以包括以下至少一项：智能手机、平板电脑、笔记本电脑、台式电脑、智能电视、各类可穿戴设备、增强现实AR设备、虚拟现实VR设备等等。终端设备102上可以安装客户端，例如，该客户端可以为专门执行特定功能的客户端，或者为内嵌有多种应用小程序的客户端，还可以是通过浏览器登录的客户端。用户可以在终端设备102上进行操作，比如，用户可以打开终端设备102上安装的客户端，并通过客户端操作输入指令，或者，用户可以打开终端设备102上安装的浏览器，并通过浏览器操作输入指令。在终端设备102接收到用户输入的指令之后，将包含指令的请求信息发送至服务器104。服务器104接收到请求信息之后执行相应的处理，然后将处理结果信息返回给终端设备102。通过一系列数据处理和信息交互完成用户指令。在本文中，诸如第一、第二、第三之类的用语，仅用来将一个实体与另一个实体区分开来，而不在于要求或暗示这些实体之间存在任何顺序或关联。以下对本申请实施例中可能涉及的概念和技术术语等相关内容进行简要描述。一、矢量数据和栅格数据在矢量数据中，现实世界物体及其状态用点、线、面表达，物体位置用所在空间位置的坐标定义，状态用属性表达。在栅格数据中，现实世界物体及其状态用它们占据的栅格行列号表达，栅格的值为所表达物体的属性值。二、火星坐标系“火星坐标系”是一种保密插件或SM模组，将真实坐标增加随机的偏差量，加密成虚假坐标，而这个加偏并不是线性的，各地的偏移量都会有所不同。从投影方式进行区分，可以分为GCJ-02 Web 墨卡托投影和GCJ-02经纬度投影。如今主流Web地图几乎都是使用的Web墨卡托。另一种GCJ02经纬度投影是在WGS84经纬度的基础上进行GCJ-02加偏。BD09经纬度投影属于企业采用的地图的坐标系，只适用于企业采用的地图的相关产品，它是在标准经纬度基础上进行GCJ-02加偏，再加上企业采用的地图自身的加偏算法，也就是在标准经纬度的基础之上进行了两次加偏；而BD09 Web墨卡托投影也属于企业采用的地图得坐标系，它是在标准Web墨卡托的基础上进行GCJ-02加偏，再加上企业采用的地图自身的加偏算法，是在Web墨卡托的基础之上进行了两次加偏。图2示出了本申请实施例的基于图像文件的头文件实现地图栅格数据加密及偏移方法的流程示意图，该方法包括以下步骤：S101：采用均值重采样的方法将地图栅格数据分层形成一定层数的金字塔结构；其中，以地图栅格数据的底层原始影像为金字塔结构的第一层，金字塔结构的所有层的影像表示的地理范围一致；S102：以地理信息处理工具作为转换工具，将地图矢量数据转换为栅格数据，将空间分辨率相同的、经矢量数据转换的栅格数据的图层和形成金字塔结构的栅格数据叠置处理，形成栅格图层数据；其中，矢量数据与栅格数据表示的地理范围一致；S103：将栅格图层数据按照由上到下、从左到右的顺序划分为不重叠且大小为所述设定尺寸的影像块，其中，不足设定尺寸的部分通过补足形成设定尺寸的影像块；S104：将设定尺寸的瓦片影像存储为图像文件TIFF文件，其中属于同一层级或同一区域范围的瓦片影像存储在同一个TIFF文件中；S105：对TIFF文件的头文件设置至少三位数的数字密码，其中第一位和第二位密码与解密密码相对应，第三位密码用于控制栅格数据的坐标偏移量，并且第一位和第二位密码为预先设置的数字，第三位密码为设置密码时确定的数字或随机数。本申请提出的一种基于图像文件的头文件实现地图栅格数据加密及偏移的方法，将矢量数据固定在栅格数据上形成栅格图层数据，然后将栅格图层数据划分为相同尺寸的瓦片影像，并将瓦片影像存储在TIFF文件中，对TIFF文件的头文件进行密码设置以完成对栅格数据的加密及坐标的偏移。TIFF文件能够在不改变影像文件数据区存储方式的情况下，充分利用当前数据文件的共性，将这些共性用一个固定的文件表述出来，不仅程序可读，而且操作人员打开该文件的同时，可以设置密码，实现栅格图层数据加密和坐标偏移，操作简洁，使用方便。在本申请的一些实施例中，一种基于图像文件的头文件实现地图栅格数据加密及偏移的方法还包括解密时，输入所述TIFF文件的数字密码，其中，所述第一位和第二位密码输入正确时解密TIFF文件，第三位密码输入正确时使空间数据产生坐标偏移。也就是说，只要前两位数字密码输入正确即可解密数据。在本申请的一些实施例中，第一位密码位0-9中任一数字；第二位密码为0-9中任一数字；第三位密码为0-9中任一数字。在本申请的一些实施例中，金字塔的层数越高，影像分辨率越低，本申请提出的方法还包括：根据需要的影像覆盖范围和影像分辨率，确定金字塔的总层数。在本申请的一些实施例中，将栅格数据分层形成金字塔结构的具体步骤如下：将栅格数据分层形成以2为因子的金字塔结构，以原始影像作为所述金字塔结构的第0层，对所述第0层影像的行、列数分别除以２，采用均值重采样的方法，得到所述金字塔结构的第1层；再以第1层金字塔为基础，采用上述相同的步骤得到所述金字塔结构的第2层；以此类推，得到所述金字塔结构的第n层。在本申请的实施例中，金字塔的总层数≤15，通常金字塔的层数为12。在本申请的一些实施例中，设定尺寸包括256像元×256像元。在本申请的一些实施例中，坐标偏移的偏移量总长为300米至500米。本申请提出的一种基于图像文件的头文件实现地图栅格数据加密及偏移的方法，运用矢量数据和栅格数据融合技术，将矢量数据固定在栅格数据上形成栅格图层数据，并将上个图层数据分片存储在TIFF文件中，利用TIFF文件扩展性好、移植方便和可改性强的特点，对TIFF文件的头文件进行三位数的密码设置，完成对栅格数据的加密及坐标偏移，满足目前对地图类产品准许上市的要求。以上通过多个实施例描述了本申请提出的一种基于图像文件的头文件实现地图栅格数据加密及偏移的方法的实现方式及技术优势，下面通过具体的例子详细描述本申请实施例的具体处理过程。步骤一、栅格数据分层形成金字塔结构。从金字塔的底层原始影像依次重采样得到下一层影像，直到达到设定层数终止采样，这一过程中影像分辨率逐渐降低，金字塔所有层影像表示的地理范围一致。具体来说，采用以2为因子的金字塔数据结构，以原始影像作为金字塔最底层即第0层，对其行、列数分别除以２，采用均值重采样方法，得到金字塔的第1层，其分辨率是第0层的二分之一；然后以第１层金字塔为基础，采用同样的方法得到第２层；以此类推，得到第３层、第4层……。设定层数根据影像覆盖范围和影像分辨率，以及应用需求来确定，一般不超过15层。步骤二、矢量数据与各层栅格数据融合为栅格图层数据。根据对应层级栅格数据的分辨率和坐标确定矢量数据转换目标栅格元素大小和坐标系统。本申请采用地理信息系统ArcGIS软件进行操作，具体步骤为：打开地理地图ArcMap并添加栅格数据和矢量数据，在地理处理工具ArcToolbox选择转换工具，选矢量数据转为栅格数据，双击要素转栅格，选择矢量要素，点击确定，进行转换。转换成功后，将转换好的图层与形成金字塔结构的栅格数据叠置处理形成栅格图层数据。也就是说，将矢量数据“点”状实体用这个点坐标所在栅格像元表示；矢量数据“线”实体由一系列相连点坐标对表示，在变为栅格结构时，除把序列中点坐标对变为栅格像元外，还在点坐标对之间填满一系列栅格像元点，也可以由两点式直线方程得到；矢量数据“面”实体向栅格格式转换，就是给矢量多边形边界内部的所有栅格像元赋予相应编号，从而形成栅格数据阵列。按上述方法将矢量数据分层栅格化，并逐层将栅格化处理的图层与空间分辨率相同的原栅格图层进行叠置处理，这就是矢量数据与栅格数据分层融合技术。步骤三：栅格图层数据切片为256像元×256像元的瓦片影像。栅格图层数据切片的做法是由上到下、从左到右的顺序划分为不重叠且大小为256像元×256像元的瓦片影像。为了不丢失信息量，不足256像元×256像元的部分通过补足形成256像元×256像元的瓦片影像。每一块瓦片影像的大小均为256像元×256像元，这样便于影像数据的索引、网络传输和 磁盘读/写，以及在影像显示时根据区域范围和分辨率等信息计算加载相应的切片影像数量。瓦片影像构建的层级根据具体应用需求确定，一般不高于15层；瓦片影像数量以2的幂次方尺寸构建瓦片数据。步骤四：瓦片影像存储为TIFF，同一层级或同一区域范围的瓦片影像存储在同一个TIFF文件中。步骤五：设置栅格数据的读取及显示密码。栅格数据需要设置三位数密码，前二位为解密数据的密码，可以预先设置；第三位是坐标偏移量控制密码，一般采用临时设置的方式，坐标总偏移量为300米至500米，是随机产生的。步骤六：解密时，输入三位数密码。实际操作时，前两位密码输入正确就可以解密数据，第三位密码输入错误的话也不会影响正常工作。实施例一图3示意性地示出了本申请的实施例的栅格数据坐标偏移的流程图，如图3所示：系统初始化：读取内置密钥my 1、密钥my 2、总偏移量最小值minD和总偏移量最大值maxD，并令偏移量p1=0，偏移量p2=0；接收用户输入的密码mm1、mm2和临时设置偏移量控制密码k，若密码与密钥相符，按偏移量控制密码k生成符合指定梯度范围条件的随机偏移量；若不相符，无法加载数据，退出系统；根据偏移量控制密码k，计算基础偏移量d1和d2，d1=step×K+minD，step=/10，d1=d2；计算相对于基础偏移量的增加量d21和d22，d21=rand×step，d22=rand×step；设置随机参数d31和d32，d31= rand，d32= rand，并根据d31、d32的值与0.5的比较结果判定偏移量属于正偏移或负偏移，即偏移可为正偏离，也可是负偏离，总偏移量区间为或/＞；若d31＞0.5，则p1=p1+d1+d21，若d31＜0.5，则p1=p1-d1-d21；若d32＞0.5，则p2=p2+d2+d22，若d32＜0.5，则p2=p2-d2-d22；核算偏离值，并输出偏离量p1和p2。实施例二图4示意性地示出了本申请的实施例的TIFF文件读取及显示流程图，首先读取TIFF文件头，判断是否为TIFF文件，若不是TIFF文件则结束该流程，若是TIFF文件，则读取TIFF的指针计数，直至全部读完，然后输入3位密码，若密码正确则判断该文件是否有调色板，若有调色板则读入调色板，若没有则读入图像数据，而后判断该图像是否为压缩图像，若不是压缩图像则显示该图像，若是压缩图像则解压该图像并显示，最后读入终结字段并判断该图像是否为多图像，若不是多图像，则读取结束，若是多图像，则重新读入指针针数，重复上述步骤，直至读取结束。与本申请提供的方法对应地，本申请还提出一种基于地面控制点数据库建立地表纹理基准面的装置，图5示意性地示出了本申请实施例的一种基于图像文件的头文件实现地图栅格数据加密及偏移的装置100的结构示意图，该装置100包括：分层模块110，采用均值重采样的方法将地图栅格数据分层形成一定层数的金字塔结构；其中，以地图栅格数据的底层原始影像为金字塔结构的第一层，金字塔结构的所有层的影像表示的地理范围一致；融合模块120，以地理信息处理工具作为转换工具，将地图矢量数据转换为栅格数据，将空间分辨率相同的、经矢量数据转换的栅格数据的图层和形成金字塔结构的栅格数据叠置处理，形成栅格图层数据；其中，矢量数据与栅格数据表示的地理范围一致；划分模块130，用于将所述栅格图层数据按照由上到下、从左到右的顺序划分为不重叠且大小为所述设定尺寸的影像块，其中，不足所述设定尺寸的部分通过补足形成所述设定尺寸的影像块；存储模块140，用于将所述设定尺寸的瓦片影像存储为图像文件TIFF文件，其中属于同一层级或同一区域范围的瓦片影像存储在同一个TIFF文件中；设置模块150，用于对所述TIFF文件的头文件设置至少三位数的数字密码，其中第一位和第二位密码与解密密码相对应，第三位密码用于控制栅格数据的坐标偏移量，并且第一位和第二位密码为预先设置的数字，第三位密码为设置密码时确定的数字或随机数。利用本申请实施例提出的一种基于图像文件的头文件实现地图栅格数据加密及偏移的装置能够完成对栅格数据的加密及坐标偏移，使用方便，操作简单。本申请实施例中的电子设备可以是用户终端设备，可以是服务器，还可以是其他计算设备，也可以是云端服务器。图6示出本申请实施例的电子设备的硬件结构示意图，该电子设备可以包括处理器601以及存储有计算机程序指令的存储器602，处理器601执行计算机程序指令时实现上述任一实施例方法的流程或功能。具体地，处理器601可以包括中央处理器，或者特定集成电路，或者可以被配置成实施本申请实施例的一个或多个集成电路。存储器602可以包括用于数据或指令的大容量存储器。举例来说，存储器602可以是以下至少一者：硬盘驱动器、只读存储器，随机存取存储器、软盘驱动器、闪存、光盘、磁光盘、磁带、通用串行总线驱动器或其他物理/有形的存储器存储设备。又如，存储器602可包括可移除或不可移除的介质。再如，存储器602可在综合网关容灾设备的内部或外部。存储器602可以是非易失性固态存储器。换句话说，通常存储器602包括编码有计算机可执行指令的有形计算机可读存储介质，并且当该软件被执行时，可执行本申请实施例的方法所描述的操作。处理器601通过读取并执行存储器602中存储的计算机程序指令，实现上述实施例中任一种方法的流程或功能。在一个示例中，图6所示的电子设备还可包括通信接口603和总线610。其中，处理器601、存储器602、通信接口603通过总线610连接并完成相互间的通信。通信接口603主要用于实现本申请实施例中各模块、装置、单元和/或设备之间的通信。总线610包括硬件、软件或两者皆有，可将在线数据流量计费设备的部件彼此耦接在一起。举例来说，总线可包括以下至少一者：加速图形端口或其他图形总线、增强工业标准架构总线、前端总线、超传输互连、工业标准架构总线、无限带宽互连、低引脚数总线、存储器总线、微信道架构总线、外围组件互连总线、PCI-Express总线、串行高级技术附件总线、视频电子标准协会局部总线或其他合适的总线。总线610可包括一个或多个总线。尽管本申请实施例描述或示出了特定的总线，但本申请实施例可考虑任何合适的总线或互连方式。结合上述实施例中的方法，本申请实施例还提供一种计算机可读存储介质，该计算机可读存储介质上存储有计算机程序指令，该计算机程序指令被处理器执行时实现上述实施例中任一种方法的流程或功能。另外，本申请实施例还提供一种计算机程序产品，该计算机程序产品上存储有计算机程序指令，该计算机程序指令被处理器执行时实现上述实施例中任一种方法的流程或功能。以上示例性地描述了本申请实施例的方法、装置、系统和计算机程序产品的流程图和/或框图，并描述了相关的各个方面。应当理解，流程图和/或框图中的每个方框或其组合，可以由计算机程序指令实现，也可以由执行指定功能或动作的专用硬件来实现，还可由专用硬件和计算机指令的组合来实现。例如，这些计算机程序指令可被提供给通用计算机、专用计算机或其它可编程数据处理装置的处理器，以形成一种机器可使得经由这种处理器执行的这些指令使能对流程图和/或框图中的每个方框或其组合中指定的功能/动作的实现。这种处理器可以是通用处理器、专用处理器、特殊应用处理器或者现场可编程逻辑电路。本申请实施例的结构框图中所示的功能块可以实现为硬件、软件、固件或者它们的组合。当以硬件方式实现时，其可以例如是电子电路、专用集成电路、适当的固件、插件、功能卡等等；当以软件方式实现时，是被用于执行所需任务的程序或者代码段。程序或者代码段可以存储在存储器中，或者通过载波中携带的数据信号在传输介质或者通信链路上传送。代码段可以经由诸如因特网、内联网等的计算机网络被下载。需说明，本申请并不局限于上文所描述或在图中示出的特定配置和处理。以上所述仅为本申请的具体实施方式，所属领域的技术人员可以清楚地了解到，为了描述的方便和简洁，所描述的系统、设备、模块或单元的具体工作过程，可以参考方法实施例中的对应过程，不需再赘述。应理解，本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可想到各种等效的修改或替换，这些修改或替换都应涵盖在本申请的保护范围之内。
