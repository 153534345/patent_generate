标题title
基于机器视觉的复合镍铜散热底板缺陷检测方法及系统
摘要abst
本发明公开了基于机器视觉的复合镍铜散热底板缺陷检测方法及系统，通过获取复合镍铜散热底板的历史加工图像数据，并划分出多个加工图像集，进一步筛选出N个高缺陷加工步骤；对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型；实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果；基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案。通过本发明对一个生产周期内的历史图像数据中进行对比分析，筛选出相应的高缺陷加工步骤并生产对应识别模型，从而能够实现对多个加工步骤进行精准高效的缺陷分析。
权利要求书clms
1.一种基于机器视觉的复合镍铜散热底板缺陷检测方法，其特征在于，包括：获取复合镍铜散热底板的历史加工图像数据；根据所述历史加工图像数据，基于加工步骤划分出多个加工图像集，一个加工图像集对应一个加工步骤；从加工图像集中获取合格品图像与缺陷品图像的特征进行对比分析，筛选出N个高缺陷加工步骤；对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型；实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果；基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案。2.根据权利要求1所述的一种基于机器视觉的复合镍铜散热底板缺陷检测方法，其特征在于，所述根据所述历史加工图像数据，基于加工步骤划分出多个加工图像集，一个加工图像集对应一个加工步骤，具体为：获取在一个历史生产周期内的，复合镍铜散热底板的全部加工步骤的历史加工图像数据；基于复合镍铜散热底板的多个加工步骤，将历史加工图像数据进行数据划分，得到多个加工图像集。3.根据权利要求1所述的一种基于机器视觉的复合镍铜散热底板缺陷检测方法，其特征在于，所述从加工图像集中获取合格品图像与缺陷品图像的特征进行对比分析，筛选出N个高缺陷加工步骤，具体为：选取一个当前加工步骤对应的加工图像集并标记为当前加工图像集；将所述当前加工图像集进行图像特征提取，得到加工图像特征；获取当前加工步骤的合格对比图像特征；基于马氏距离，将所述加工图像特征与所述对比图像特征进行数据相似度计算并判断相似度是否大于预设相似度；若大于预设相似度，则将当前加工步骤标记为高缺陷加工步骤，分析所有加工步骤，并筛选出N个高缺陷加工步骤。4.根据权利要求3所述的一种基于机器视觉的复合镍铜散热底板缺陷检测方法，其特征在于，所述对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型，具体为：获取一个高缺陷加工步骤对应的加工图像集并标记为加工缺陷图像集；将所述加工缺陷图像集进行基于形状与色彩的特征提取，得到缺陷特征数据；基于预设启发式算法，对缺陷特征数据进行特征分类，并基于分类结果生成一个根节点与多个内部节点，且每个节点对应一个分类条件；基于所述一个根节点与多个内部节点生成一个基于决策树的缺陷识别模型；分析所有高缺陷加工步骤对应的加工图像集，并得到N个缺陷识别模型。5.根据权利要求4所述的一种基于机器视觉的复合镍铜散热底板缺陷检测方法，其特征在于，所述实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果，具体为：实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，选取一个当前加工图像数据；将所述当前加工图像数据进行网格划分，并形成多个细分图像；基于所述多个细分图像进行形状与色彩特征提取，得到多个图像特征数据；将所述多个图像特征数据导入对应的缺陷识别模型中进行分类分析，并得到缺陷识别结果；分析所有N个加工图像数据，并得到所有N个高缺陷加工步骤中对应的N个缺陷识别结果。6.根据权利要求1所述的一种基于机器视觉的复合镍铜散热底板缺陷检测方法，其特征在于，所述基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案，具体为：基于所有缺陷识别结果，对目标复合镍铜散热底板进行缺陷分析，得到每个高缺陷加工步骤对应的缺陷信息；所述缺陷信息包括缺陷类别、缺陷位置、缺陷数量信息；基于所述缺陷信息，生成每个高缺陷加工步骤对应的缺陷修复方案；在下一个生产周期中，基于缺陷修复方案进行加工生产。7.一种基于机器视觉的复合镍铜散热底板缺陷检测系统，其特征在于，该系统包括：存储器、处理器，所述存储器中包括基于机器视觉的复合镍铜散热底板缺陷检测程序，所述基于机器视觉的复合镍铜散热底板缺陷检测程序被所述处理器执行时实现如下步骤：获取复合镍铜散热底板的历史加工图像数据；根据所述历史加工图像数据，基于加工步骤划分出多个加工图像集，一个加工图像集对应一个加工步骤；从加工图像集中获取合格品图像与缺陷品图像的特征进行对比分析，筛选出N个高缺陷加工步骤；对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型；实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果；基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案。8.根据权利要求7所述的一种基于机器视觉的复合镍铜散热底板缺陷检测系统，其特征在于，所述根据所述历史加工图像数据，基于加工步骤划分出多个加工图像集，一个加工图像集对应一个加工步骤，具体为：获取在一个历史生产周期内的，复合镍铜散热底板的全部加工步骤的历史加工图像数据；基于复合镍铜散热底板的多个加工步骤，将历史加工图像数据进行数据划分，得到多个加工图像集。9.根据权利要求7所述的一种基于机器视觉的复合镍铜散热底板缺陷检测系统，其特征在于，所述从加工图像集中获取合格品图像与缺陷品图像的特征进行对比分析，筛选出N个高缺陷加工步骤，具体为：选取一个当前加工步骤对应的加工图像集并标记为当前加工图像集；将所述当前加工图像集进行图像特征提取，得到加工图像特征；获取当前加工步骤的合格对比图像特征；基于马氏距离，将所述加工图像特征与所述对比图像特征进行数据相似度计算并判断相似度是否大于预设相似度；若大于预设相似度，则将当前加工步骤标记为高缺陷加工步骤，分析所有加工步骤，并筛选出N个高缺陷加工步骤。10.根据权利要求7所述的一种基于机器视觉的复合镍铜散热底板缺陷检测系统，其特征在于，所述对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型，具体为：获取一个高缺陷加工步骤对应的加工图像集并标记为加工缺陷图像集；将所述加工缺陷图像集进行基于形状与色彩的特征提取，得到缺陷特征数据；基于预设启发式算法，对缺陷特征数据进行特征分类，并基于分类结果生成一个根节点与多个内部节点，且每个节点对应一个分类条件；基于所述一个根节点与多个内部节点生成一个基于决策树的缺陷识别模型；分析所有高缺陷加工步骤对应的加工图像集，并得到N个缺陷识别模型。
说明书desc
技术领域本发明涉及机器视觉领域，更具体的，涉及基于机器视觉的复合镍铜散热底板缺陷检测方法及系统。背景技术复合镍铜是一种由镍和铜两种金属材料组成的复合材料，它具有两种金属的优点，广泛应用于各个领域，如散热器的应用。但受制于现有加工技术，其难免会出现材料表面及内部存在缺陷的情况，影响散热性能，因此，如何快速、精准地识别缺陷，检测缺陷，是目前亟需解决的重要问题。发明内容本发明克服了现有技术的缺陷，提出了基于机器视觉的复合镍铜散热底板缺陷检测方法及系统。本发明第一方面提供了一种基于机器视觉的复合镍铜散热底板缺陷检测方法，包括：获取复合镍铜散热底板的历史加工图像数据；根据所述历史加工图像数据，基于加工步骤划分出多个加工图像集，一个加工图像集对应一个加工步骤；从加工图像集中获取合格品图像与缺陷品图像的特征进行对比分析，筛选出N个高缺陷加工步骤；对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型；实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果；基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案。本方案中，所述根据所述历史加工图像数据，基于加工步骤划分出多个加工图像集，一个加工图像集对应一个加工步骤，具体为：获取在一个历史生产周期内的，复合镍铜散热底板的全部加工步骤的历史加工图像数据；基于复合镍铜散热底板的多个加工步骤，将历史加工图像数据进行数据划分，得到多个加工图像集。本方案中，所述从加工图像集中获取合格品图像与缺陷品图像的特征进行对比分析，筛选出N个高缺陷加工步骤，具体为：选取一个当前加工步骤对应的加工图像集并标记为当前加工图像集；将所述当前加工图像集进行图像特征提取，得到加工图像特征；获取当前加工步骤的合格对比图像特征；基于马氏距离，将所述加工图像特征与所述对比图像特征进行数据相似度计算并判断相似度是否大于预设相似度；若大于预设相似度，则将当前加工步骤标记为高缺陷加工步骤，分析所有加工步骤，并筛选出N个高缺陷加工步骤。本方案中，所述对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型，具体为：获取一个高缺陷加工步骤对应的加工图像集并标记为加工缺陷图像集；将所述加工缺陷图像集进行基于形状与色彩的特征提取，得到缺陷特征数据；基于预设启发式算法，对缺陷特征数据进行特征分类，并基于分类结果生成一个根节点与多个内部节点，且每个节点对应一个分类条件；基于所述一个根节点与多个内部节点生成一个基于决策树的缺陷识别模型；分析所有高缺陷加工步骤对应的加工图像集，并得到N个缺陷识别模型。本方案中，所述实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果，具体为：实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，选取一个当前加工图像数据；将所述当前加工图像数据进行网格划分，并形成多个细分图像；基于所述多个细分图像进行形状与色彩特征提取，得到多个图像特征数据；将所述多个图像特征数据导入对应的缺陷识别模型中进行分类分析，并得到缺陷识别结果；分析所有N个加工图像数据，并得到所有N个高缺陷加工步骤中对应的N个缺陷识别结果。本方案中，所述基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案，具体为：基于所有缺陷识别结果，对目标复合镍铜散热底板进行缺陷分析，得到每个高缺陷加工步骤对应的缺陷信息；所述缺陷信息包括缺陷类别、缺陷位置、缺陷数量信息；基于所述缺陷信息，生成每个高缺陷加工步骤对应的缺陷修复方案；在下一个生产周期中，基于缺陷修复方案进行加工生产。本发明第二方面还提供了一种基于机器视觉的复合镍铜散热底板缺陷检测系统，该系统包括：存储器、处理器，所述存储器中包括基于机器视觉的复合镍铜散热底板缺陷检测程序，所述基于机器视觉的复合镍铜散热底板缺陷检测程序被所述处理器执行时实现如下步骤：获取复合镍铜散热底板的历史加工图像数据；根据所述历史加工图像数据，基于加工步骤划分出多个加工图像集，一个加工图像集对应一个加工步骤；从加工图像集中获取合格品图像与缺陷品图像的特征进行对比分析，筛选出N个高缺陷加工步骤；对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型；实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果；基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案。本方案中，所述根据所述历史加工图像数据，基于加工步骤划分出多个加工图像集，一个加工图像集对应一个加工步骤，具体为：获取在一个历史生产周期内的，复合镍铜散热底板的全部加工步骤的历史加工图像数据；基于复合镍铜散热底板的多个加工步骤，将历史加工图像数据进行数据划分，得到多个加工图像集。本方案中，所述从加工图像集中获取合格品图像与缺陷品图像的特征进行对比分析，筛选出N个高缺陷加工步骤，具体为：选取一个当前加工步骤对应的加工图像集并标记为当前加工图像集；将所述当前加工图像集进行图像特征提取，得到加工图像特征；获取当前加工步骤的合格对比图像特征；基于马氏距离，将所述加工图像特征与所述对比图像特征进行数据相似度计算并判断相似度是否大于预设相似度；若大于预设相似度，则将当前加工步骤标记为高缺陷加工步骤，分析所有加工步骤，并筛选出N个高缺陷加工步骤。本方案中，所述对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型，具体为：获取一个高缺陷加工步骤对应的加工图像集并标记为加工缺陷图像集；将所述加工缺陷图像集进行基于形状与色彩的特征提取，得到缺陷特征数据；基于预设启发式算法，对缺陷特征数据进行特征分类，并基于分类结果生成一个根节点与多个内部节点，且每个节点对应一个分类条件；基于所述一个根节点与多个内部节点生成一个基于决策树的缺陷识别模型；分析所有高缺陷加工步骤对应的加工图像集，并得到N个缺陷识别模型。本发明公开了基于机器视觉的复合镍铜散热底板缺陷检测方法及系统，通过获取复合镍铜散热底板的历史加工图像数据，并划分出多个加工图像集，进一步筛选出N个高缺陷加工步骤；对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型；实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果；基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案。通过本发明对一个生产周期内的历史图像数据中进行对比分析，筛选出相应的高缺陷加工步骤并生产对应识别模型，从而能够实现对多个加工步骤进行精准高效的缺陷分析。附图说明图1示出了本发明一种基于机器视觉的复合镍铜散热底板缺陷检测方法的流程图；图2示出了本发明加工图像集获取流程图；图3示出了本发明高缺陷加工步骤获取流程图；图4示出了本发明一种基于机器视觉的复合镍铜散热底板缺陷检测系统的框图。具体实施方式为了能够更清楚地理解本发明的上述目的、特征和优点，下面结合附图和具体实施方式对本发明进行进一步的详细描述。需要说明的是，在不冲突的情况下，本申请的实施例及实施例中的特征可以相互组合。在下面的描述中阐述了很多具体细节以便于充分理解本发明，但是，本发明还可以采用其他不同于在此描述的其他方式来实施，因此，本发明的保护范围并不受下面公开的具体实施例的限制。图1示出了本发明一种基于机器视觉的复合镍铜散热底板缺陷检测方法的流程图。如图1所示，本发明第一方面提供了一种基于机器视觉的复合镍铜散热底板缺陷检测方法，包括：S102，获取复合镍铜散热底板的历史加工图像数据；S104，根据所述历史加工图像数据，基于加工步骤划分出多个加工图像集，一个加工图像集对应一个加工步骤；S106，从加工图像集中获取合格品图像与缺陷品图像的特征进行对比分析，筛选出N个高缺陷加工步骤；S108，对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型；S110，实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果；S112，基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案。图2示出了本发明加工图像集获取流程图。根据本发明实施例，所述根据所述历史加工图像数据，基于加工步骤划分出多个加工图像集，一个加工图像集对应一个加工步骤，具体为：S202，获取在一个历史生产周期内的，复合镍铜散热底板的全部加工步骤的历史加工图像数据；S204，基于复合镍铜散热底板的多个加工步骤，将历史加工图像数据进行数据划分，得到多个加工图像集。需要说明的是，所述一个历史生产周期内，包括多个产品批次的生成过程，即所述得到的图像集，包括不止一个散热底板的图像，所述数据越多，能够分析得到的数据特征库越大。值得一提的是，在所述多个加工步骤中，一种复合镍铜散热底板往往有多个加工步骤，如切削、挤压、精密切削、压铸、抛光等，不同的步骤所对应产生的复合镍铜的形状、图像等存在差异，且不同加工步骤中，对应的图像特征、缺陷特征均存在差异。另外，不同加工步骤中，均有可能产生相应缺陷，如粗糙不平、沟痕、毛刺、精度不符、变形、裂纹等缺陷。图3示出了本发明高缺陷加工步骤获取流程图。根据本发明实施例，所述从加工图像集中获取合格品图像与缺陷品图像的特征进行对比分析，筛选出N个高缺陷加工步骤，具体为：S302，选取一个当前加工步骤对应的加工图像集并标记为当前加工图像集；S304，将所述当前加工图像集进行图像特征提取，得到加工图像特征；S306，获取当前加工步骤的合格对比图像特征；S308，基于马氏距离，将所述加工图像特征与所述对比图像特征进行数据相似度计算并判断相似度是否大于预设相似度；S310，若大于预设相似度，则将当前加工步骤标记为高缺陷加工步骤，分析所有加工步骤，并筛选出N个高缺陷加工步骤。需要说明的是，所述当前加工步骤的合格对比图像特征具体为从图像数据库中获取的，所述图像数据库包括所有复合镍铜散热底板历史图像数据与对比特征数据。所述高缺陷加工步骤中，具体为具有高概率缺陷的加工步骤，本发明通过对一个生产周期内的历史图像数据中进行对比分析，筛选出相应的高缺陷加工步骤，从而对多个加工步骤进行精准高效的缺陷分析。值得一提的是，在多个加工步骤中，由于一些加工步骤过程简单，对应的图像变化量较少，因此，如果将全部加工图像进行逐个分析，将费时费力，加大了计算机的消耗。而通过本发明能够对每个加步骤进行精细化的缺陷分析，从而筛选出高缺陷加工步骤，减少图像分析算力的消耗。所述马氏距离用于计算两种特征数据的相似度。根据本发明实施例，所述对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型，具体为：获取一个高缺陷加工步骤对应的加工图像集并标记为加工缺陷图像集；将所述加工缺陷图像集进行基于形状与色彩的特征提取，得到缺陷特征数据；基于预设启发式算法，对缺陷特征数据进行特征分类，并基于分类结果生成一个根节点与多个内部节点，且每个节点对应一个分类条件；基于所述一个根节点与多个内部节点生成一个基于决策树的缺陷识别模型；分析所有高缺陷加工步骤对应的加工图像集，并得到N个缺陷识别模型。需要说明的是，所述预设启发式算法包括ID3、C4.5、CART等算法，具体由用户设定。在本发明中，对于不同的高缺陷加工步骤，将生成不同的缺陷识别模型，用于对复合镍铜缺陷进行快速分析与高精确度的识别，进一步地，通过分步骤式地缺陷特征分析，能够实现在加工过程中进行动态识别与分析，从而实现对复合镍铜的精细化加工调控。根据本发明实施例，所述实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果，具体为：实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，选取一个当前加工图像数据；将所述当前加工图像数据进行网格划分，并形成多个细分图像；基于所述多个细分图像进行形状与色彩特征提取，得到多个图像特征数据；将所述多个图像特征数据导入对应的缺陷识别模型中进行分类分析，并得到缺陷识别结果；分析所有N个加工图像数据，并得到所有N个高缺陷加工步骤中对应的N个缺陷识别结果。需要说明的是，所述导入对应的缺陷识别模型中，一个高缺陷加工步骤对应一个加工图像数据，也对应一个缺陷识别模型。每个高缺陷加工步骤对应一个缺陷识别结果。本发明中的图像数据均基于机器视觉技术的摄像装置进行获取。根据本发明实施例，所述基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案，具体为：基于所有缺陷识别结果，对目标复合镍铜散热底板进行缺陷分析，得到每个高缺陷加工步骤对应的缺陷信息；所述缺陷信息包括缺陷类别、缺陷位置、缺陷数量信息；基于所述缺陷信息，生成每个高缺陷加工步骤对应的缺陷修复方案；在下一个生产周期中，基于缺陷修复方案进行加工生产。需要说明的是，在本发明中，基于分析得到的缺陷类别、缺陷位置、缺陷数量信息，能够进一步分析加工存在的缺陷，如，在复合镍铜底板中，通过分析某一切割加工步骤存在过多的裂痕或划痕缺陷，则对应加工步骤存在优化的需求，并基于分析结果生成加工修复方案。另外，对于一些高精度、高质量的复合镍铜生成制造过程，包括较多个加工步骤，若对每个步骤进行图像分析，则势必造成不必要的计算机资源浪费，因此，本发明对于加工步骤进行分析，提取出高缺陷加工步骤，在保证缺陷分析精准度的前提下，有效减少分析数据量与资源消耗量。根据本发明实施例，所述缺陷识别结果，还包括：获取一个加工图像数据中的多个细分图像；选取其中一个细分图像并标记为当前细分图像；对当前细分图像进行形状与色彩特征提取，将得到的图像特征数据导入对应缺陷识别模型进行识别，若存在缺陷，则将所述当前细分图像进行基于预设边缘检测算法的线条提取，得到缺陷线条信息；基于所述缺陷线条信息进行基于曲率变化的连续性分析，并在当前细分图像中，判断缺陷线条在图像的边缘位置是否有连续趋势，若有，则将对应的边缘方向进行标记，得到至少一个缺陷连续边缘方向；判断所述当前细分图像的缺陷连续边缘方向中是否存在相邻的细分图像，若存在，将全部相邻细分图像与所述当前细分图像进行图像融合，形成融合缺陷图像；分析所有细分图像并进行图像融合，得到多个融合缺陷图像；将所述融合缺陷图像进行特征提取并基于对应缺陷识别模型进行识别，得到融合特征缺陷识别结果。需要说明的是，所述预设边缘检测算法包括Sobel、Canny等。所述边缘方向包括一个网格中心的八个方向，即上、下、左、右、左上、右上、左下、右下。值得一提的是，在进行基于图像的缺陷分析中，由于一些缺陷特征具有一定的连续性，如裂痕、裂纹等，通过本发明中细分图像的线条连续性分析，并将相邻的图像进行融合形成整体融合图像进行进一步缺陷识别，能够有效提高缺陷识别的精确度与完整度，并且减少对单个缺陷的重复性分析，提高缺陷分析效率。所述分析所有细分图像并进行图像融合，得到多个融合缺陷图像中，若一个细分图像已经存在一次融合过程，则不需要再次分析与融合。根据本发明实施例，还包括：在一个生产周期内，获取当前加工步骤，判断所述加工步骤是否为高缺陷加工步骤；若是，则实时获取当前高缺陷加工步骤的加工图像数据；将所述加工图像数据进行特征提取并基于对应缺陷识别模型识别出缺陷类别与数量；基于缺陷类别与数量、复合镍铜散热底板加工面积进行缺陷评估，得到缺陷率；在下一个高缺陷加工步骤中再次进行缺陷评估，得到第二个缺陷率；将缺陷率与第二个缺陷率进行均值计算，得到平均缺陷率；重复获取下一个高缺陷加工步骤进行缺陷评估并实时更新平均缺陷率；实时判断平均缺陷率是否大与预设阈值，若大于，则基于已加工步骤生成重复加工修复方案。需要说明的是，在进行复合镍铜散热底板加工时，在生产周期的某个阶段，金属缺陷可能会出现突增的情况，此时，需要对上一步加工步骤或者前几步加工步骤进行再次加工，实现重复性的加工修复。本发明通过实时计算出平均缺陷率，用于科学、精准地分析缺陷情况，并在合适的情况下生成修复方案，减少当前生产加工缺陷对后续成品的影响，提高后续成品的良品率。图4示出了本发明一种基于机器视觉的复合镍铜散热底板缺陷检测系统的框图。本发明第二方面还提供了一种基于机器视觉的复合镍铜散热底板缺陷检测系统4，该系统包括：存储器41、处理器42，所述存储器中包括基于机器视觉的复合镍铜散热底板缺陷检测程序，所述基于机器视觉的复合镍铜散热底板缺陷检测程序被所述处理器执行时实现如下步骤：获取复合镍铜散热底板的历史加工图像数据；根据所述历史加工图像数据，基于加工步骤划分出多个加工图像集，一个加工图像集对应一个加工步骤；从加工图像集中获取合格品图像与缺陷品图像的特征进行对比分析，筛选出N个高缺陷加工步骤；对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型；实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果；基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案。根据本发明实施例，所述根据所述历史加工图像数据，基于加工步骤划分出多个加工图像集，一个加工图像集对应一个加工步骤，具体为：获取在一个历史生产周期内的，复合镍铜散热底板的全部加工步骤的历史加工图像数据；基于复合镍铜散热底板的多个加工步骤，将历史加工图像数据进行数据划分，得到多个加工图像集。需要说明的是，所述一个历史生产周期内，包括多个产品批次的生成过程，即所述得到的图像集，包括不止一个散热底板的图像，所述数据越多，能够分析得到的数据特征库越大。值得一提的是，在所述多个加工步骤中，一种复合镍铜散热底板往往有多个加工步骤，如切削、挤压、精密切削、压铸、抛光等，不同的步骤所对应产生的复合镍铜的形状、图像等存在差异，且不同加工步骤中，对应的图像特征、缺陷特征均存在差异。另外，不同加工步骤中，均有可能产生相应缺陷，如粗糙不平、沟痕、毛刺、精度不符、变形、裂纹等缺陷。根据本发明实施例，所述从加工图像集中获取合格品图像与缺陷品图像的特征进行对比分析，筛选出N个高缺陷加工步骤，具体为：选取一个当前加工步骤对应的加工图像集并标记为当前加工图像集；将所述当前加工图像集进行图像特征提取，得到加工图像特征；获取当前加工步骤的合格对比图像特征；基于马氏距离，将所述加工图像特征与所述对比图像特征进行数据相似度计算并判断相似度是否大于预设相似度；若大于预设相似度，则将当前加工步骤标记为高缺陷加工步骤，分析所有加工步骤，并筛选出N个高缺陷加工步骤。需要说明的是，所述当前加工步骤的合格对比图像特征具体为从图像数据库中获取的，所述图像数据库包括所有复合镍铜散热底板历史图像数据与对比特征数据。所述高缺陷加工步骤中，具体为具有高概率缺陷的加工步骤，本发明通过对一个生产周期内的历史图像数据中进行对比分析，筛选出相应的高缺陷加工步骤，从而对多个加工步骤进行精准高效的缺陷分析。值得一提的是，在多个加工步骤中，由于一些加工步骤过程简单，对应的图像变化量较少，因此，如果将全部加工图像进行逐个分析，将费时费力，加大了计算机的消耗。而通过本发明能够对每个加步骤进行精细化的缺陷分析，从而筛选出高缺陷加工步骤，减少图像分析算力的消耗。所述马氏距离用于计算两种特征数据的相似度。根据本发明实施例，所述对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型，具体为：获取一个高缺陷加工步骤对应的加工图像集并标记为加工缺陷图像集；将所述加工缺陷图像集进行基于形状与色彩的特征提取，得到缺陷特征数据；基于预设启发式算法，对缺陷特征数据进行特征分类，并基于分类结果生成一个根节点与多个内部节点，且每个节点对应一个分类条件；基于所述一个根节点与多个内部节点生成一个基于决策树的缺陷识别模型；分析所有高缺陷加工步骤对应的加工图像集，并得到N个缺陷识别模型。需要说明的是，所述预设启发式算法包括ID3、C4.5、CART等算法，具体由用户设定。在本发明中，对于不同的高缺陷加工步骤，将生成不同的缺陷识别模型，用于对复合镍铜缺陷进行快速分析与高精确度的识别，进一步地，通过分步骤式地缺陷特征分析，能够实现在加工过程中进行动态识别与分析，从而实现对复合镍铜的精细化加工调控。根据本发明实施例，所述实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果，具体为：实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，选取一个当前加工图像数据；将所述当前加工图像数据进行网格划分，并形成多个细分图像；基于所述多个细分图像进行形状与色彩特征提取，得到多个图像特征数据；将所述多个图像特征数据导入对应的缺陷识别模型中进行分类分析，并得到缺陷识别结果；分析所有N个加工图像数据，并得到所有N个高缺陷加工步骤中对应的N个缺陷识别结果。需要说明的是，所述导入对应的缺陷识别模型中，一个高缺陷加工步骤对应一个加工图像数据，也对应一个缺陷识别模型。每个高缺陷加工步骤对应一个缺陷识别结果。本发明中的图像数据均基于机器视觉技术的摄像装置进行获取。根据本发明实施例，所述基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案，具体为：基于所有缺陷识别结果，对目标复合镍铜散热底板进行缺陷分析，得到每个高缺陷加工步骤对应的缺陷信息；所述缺陷信息包括缺陷类别、缺陷位置、缺陷数量信息；基于所述缺陷信息，生成每个高缺陷加工步骤对应的缺陷修复方案；在下一个生产周期中，基于缺陷修复方案进行加工生产。需要说明的是，在本发明中，基于分析得到的缺陷类别、缺陷位置、缺陷数量信息，能够进一步分析加工存在的缺陷，如，在复合镍铜底板中，通过分析某一切割加工步骤存在过多的裂痕或划痕缺陷，则对应加工步骤存在优化的需求，并基于分析结果生成加工修复方案。另外，对于一些高精度、高质量的复合镍铜生成制造过程，包括较多个加工步骤，若对每个步骤进行图像分析，则势必造成不必要的计算机资源浪费，因此，本发明对于加工步骤进行分析，提取出高缺陷加工步骤，在保证缺陷分析精准度的前提下，有效减少分析数据量与资源消耗量。根据本发明实施例，所述缺陷识别结果，还包括：获取一个加工图像数据中的多个细分图像；选取其中一个细分图像并标记为当前细分图像；对当前细分图像进行形状与色彩特征提取，将得到的图像特征数据导入对应缺陷识别模型进行识别，若存在缺陷，则将所述当前细分图像进行基于预设边缘检测算法的线条提取，得到缺陷线条信息；基于所述缺陷线条信息进行基于曲率变化的连续性分析，并在当前细分图像中，判断缺陷线条在图像的边缘位置是否有连续趋势，若有，则将对应的边缘方向进行标记，得到至少一个缺陷连续边缘方向；判断所述当前细分图像的缺陷连续边缘方向中是否存在相邻的细分图像，若存在，将全部相邻细分图像与所述当前细分图像进行图像融合，形成融合缺陷图像；分析所有细分图像并进行图像融合，得到多个融合缺陷图像；将所述融合缺陷图像进行特征提取并基于对应缺陷识别模型进行识别，得到融合特征缺陷识别结果。需要说明的是，所述预设边缘检测算法包括Sobel、Canny等。所述边缘方向包括一个网格中心的八个方向，即上、下、左、右、左上、右上、左下、右下。值得一提的是，在进行基于图像的缺陷分析中，由于一些缺陷特征具有一定的连续性，如裂痕、裂纹等，通过本发明中细分图像的线条连续性分析，并将相邻的图像进行融合形成整体融合图像进行进一步缺陷识别，能够有效提高缺陷识别的精确度与完整度，并且减少对单个缺陷的重复性分析，提高缺陷分析效率。所述分析所有细分图像并进行图像融合，得到多个融合缺陷图像中，若一个细分图像已经存在一次融合过程，则不需要再次分析。根据本发明实施例，还包括：在一个生产周期内，获取当前加工步骤，判断所述加工步骤是否为高缺陷加工步骤；若是，则实时获取当前高缺陷加工步骤的加工图像数据；将所述加工图像数据进行特征提取并基于对应缺陷识别模型识别出缺陷类别与数量；基于缺陷类别与数量、复合镍铜散热底板加工面积进行缺陷评估，得到缺陷率；在下一个高缺陷加工步骤再次进行缺陷评估，得到第二个缺陷率；将缺陷率与第二个缺陷率进行均值计算，得到平均缺陷率；重复获取下一个高缺陷加工步骤进行缺陷评估并实时更新平均缺陷率；实时判断平均缺陷率是否大与预设阈值，若大于，则基于已加工步骤生成重复加工修复方案。需要说明的是，在进行复合镍铜散热底板加工时，在生产周期的某个阶段，金属缺陷可能会出现突增的情况，此时，需要对上一步加工步骤或者前几步加工步骤进行再次加工，实现重复性的加工修复。本发明通过实时计算出平均缺陷率，用于科学、精准地分析缺陷情况，并在合适的情况生成修复方案，减少当前生产加工缺陷对后续成品的影响，提高后续成品的良品率。本发明公开了基于机器视觉的复合镍铜散热底板缺陷检测方法及系统，通过获取复合镍铜散热底板的历史加工图像数据，并划分出多个加工图像集，进一步筛选出N个高缺陷加工步骤；对高缺陷加工步骤对应的加工图像集进行特征提取并生成N个基于决策树的缺陷识别模型；实时获取目标复合镍铜散热底板在高缺陷加工步骤中的N个加工图像数据，基于对应的缺陷识别模型进行缺陷识别，并得到缺陷识别结果；基于所述缺陷识别结果，对目标复合镍铜散热底板进行缺陷修复分析，并形成缺陷修复方案。通过本发明对一个生产周期内的历史图像数据中进行对比分析，筛选出相应的高缺陷加工步骤并生产对应识别模型，从而能够实现对多个加工步骤进行精准高效的缺陷分析。在本申请所提供的几个实施例中，应该理解到，所揭露的设备和方法，可以通过其它的方式实现。以上所描述的设备实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，如：多个单元或组件可以结合，或可以集成到另一个系统，或一些特征可以忽略，或不执行。另外，所显示或讨论的各组成部分相互之间的耦合、或直接耦合、或通信连接可以是通过一些接口，设备或单元的间接耦合或通信连接，可以是电性的、机械的或其它形式的。上述作为分离部件说明的单元可以是、或也可以不是物理上分开的，作为单元显示的部件可以是、或也可以不是物理单元；既可以位于一个地方，也可以分布到多个网络单元上；可以根据实际的需要选择其中的部分或全部单元来实现本实施例方案的目的。另外，在本发明各实施例中的各功能单元可以全部集成在一个处理单元中，也可以是各单元分别单独作为一个单元，也可以两个或两个以上单元集成在一个单元中；上述集成的单元既可以采用硬件的形式实现，也可以采用硬件加软件功能单元的形式实现。本领域普通技术人员可以理解：实现上述方法实施例的全部或部分步骤可以通过程序指令相关的硬件来完成，前述的程序可以存储于计算机可读取存储介质中，该程序在执行时，执行包括上述方法实施例的步骤；而前述的存储介质包括：移动存储设备、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。或者，本发明上述集成的单元如果以软件功能模块的形式实现并作为独立的产品销售或使用时，也可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明实施例的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分。而前述的存储介质包括：移动存储设备、ROM、RAM、磁碟或者光盘等各种可以存储程序代码的介质。以上所述，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以所述权利要求的保护范围为准。
