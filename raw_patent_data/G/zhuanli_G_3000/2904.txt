标题title
一种交通出行量数据处理方法、装置、设备及存储介质
摘要abst
本发明公开了一种交通出行量数据处理方法、装置、设备及存储介质，所述方法包括：获取城域网内各个历史时间段对应的第一交通出行量数据；根据所述第一交通出行量数据以及时间移位图卷积模型，确定特征矩阵，其中，所述时间移位图卷积模型用于捕获时空相关性；根据所述特征矩阵以及第一时间循环神经网络，确定目标隐藏状态；根据所述目标隐藏状态以及全连接层，确定预测时间段的交通出行量。能够根据第一交通出行量数据，准确确定预测时间段的交通出行量。
权利要求书clms
1.一种交通出行量数据处理方法，其特征在于，所述交通出行量数据处理方法包括：获取城域网内各个历史时间段对应的第一交通出行量数据；根据所述第一交通出行量数据以及时间移位图卷积模型，确定特征矩阵，其中，所述时间移位图卷积模型用于捕获时空相关性；根据所述特征矩阵以及第一时间循环神经网络，确定目标隐藏状态；根据所述目标隐藏状态以及全连接层，确定预测时间段的交通出行量;所述根据所述目标隐藏状态以及全连接层，确定预测时间段的交通出行量包括：获取历史日期对应的第二交通出行量数据、历史周期对应的第三交通出行量数据以及当前时间段部分观测到的交通出行量以及完全观测到的进站需求；根据所述目标隐藏状态、所述第二交通出行量数据和第二时间循环神经网络，计算所述历史日期对应的第一上下文向量；根据所述目标隐藏状态、所述第三交通出行量数据和第三时间循环神经网络，计算所述历史周期对应的第二上下文向量；根据当前时间段部分观测到的交通出行量，对当前时间段的交通出行量进行估计，以获得第一估计值，并根据当前时间段部分观测到的交通出行量以及完全观测到的进站需求的平均比率，对当前时间段的交通出行量进行估计，以获得第二估计值；根据所述目标隐藏状态、所述第一上下文向量、所述第二上下文向量、所述第一估计值、所述第二估计值以及所述全连接层，确定预测时间段的交通出行量。2.如权利要求1所述的交通出行量数据处理方法，其特征在于，所述第一交通出行量数据包括预设数量的历史流量数据，所述历史时间段对应的预设数量的历史流量数据，所述根据所述第一交通出行量数据以及时间移位图卷积模型，确定特征矩阵包括：对于每个所述第一交通出行量数据，将历史流量数据以及所述历史流量数据对应的时间移位相关矩阵，输入至时间移位图卷积模型，获得输出结果；将各个输出结果进行融合运算以及激活函数处理，获得特征矩阵。3.如权利要求2所述的交通出行量数据处理方法，其特征在于，所述时间移位相关矩阵由下式表示： ，其中，/＞为时间移位相关矩阵，城域网被定义为具有N个节点的图/＞，表示N个不同起止点间的交通出行量，引入两个相等长度的时间序列观测/＞和/＞，/＞代表对一个起止点间的交通出行量/＞的历史交通出行量需求，/＞代表对另一个起止点间的交通出行量/＞的历史交通出行量需求，cov是两个向量之间的协方差，var是向量的方差，s代表时间间隔，/＞是滞后s时间间隔的时间序列/＞，/＞用/＞表示；所述时间移位图卷积模型由下式表示：，其中，/＞为在历史时间段t-s，第一交通出行量数据中第/＞个历史流量数据，/＞为特征矩阵，/＞，/＞是单位矩阵，/＞是/＞的度矩阵，W是时间移位图卷积模型中训练的层特定权重矩阵，/＞是激活函数。4.如权利要求1所述的交通出行量数据处理方法，其特征在于，所述根据所述特征矩阵以及第一时间循环神经网络，确定目标隐藏状态包括：所述第一交通出行量数据包括预设数量的历史流量数据，根据历史流量数据的时间顺序，在各个历史流量数据中确定时间最晚的目标历史流量数据；将所述特征矩阵与所述目标流量数据进行连接处理，以获得连接结果，并根据所述连接结果以及所述第一时间循环神经网络，确定目标隐藏状态。5.如权利要求4所述的交通出行量数据处理方法，其特征在于，所述根据所述连接结果以及所述第一时间循环神经网络，确定目标隐藏状态包括：根据所述时间顺序，在未经过第一时间循环神经网络处理的连接结果中，将时间最早的连接结果输入至第一时间循环神经网络中，以获取隐藏状态以及单元状态；确定是否存在未经过第一时间循环神经网络处理的连接结果，若存在，则根据所述隐藏状态以及单元状态，更新所述第一时间循环神经网络；将更新后的第一时间循环神经网络作为第一时间循环神经网络，并返回执行步骤在未经过第一时间循环神经网络处理的连接结果中将时间最早的连接结果输入至第一时间循环神经网络；若不存在未经过第一时间循环神经网络处理的连接结果，则将所述隐藏状态作为目标隐藏状态。6.如权利要求1所述的交通出行量数据处理方法，所述根据所述目标隐藏状态、所述第二交通出行量数据和第二时间循环神经网络，计算所述历史日期对应的第一上下文向量包括：根据第二交通出行量数据的时间顺序，在未经过第二时间循环神经网络处理的第二交通出行量数据中将时间最早的第二交通出行量数据输入至第二时间循环神经网络，获取隐藏状态以及单元状态，并将所述隐藏状态添加至隐藏状态集；确定是否存在未经过第二时间循环神经网络处理的第二交通出行量数据，若存在，则根据所述隐藏状态以及单元状态，更新所述第二时间循环神经网络；将更新后的第二时间循环神经网络作为第二时间循环神经网络，并返回执行步骤在未经过第二时间循环神经网络处理的第二交通出行量数据中将时间最早的第二交通出行量数据输入至第二时间循环神经网络；若不存在，则根据所述目标隐藏状态、所述隐藏状态集以及注意力机制，确定所述历史日期对应的第一上下文向量。7.一种交通出行量数据处理装置，其特征在于，所述装置包括：获取模块，用于获取城域网内各个历史时间段对应的第一交通出行量数据；第一确定模块，用于根据所述第一交通出行量数据以及时间移位图卷积模型，确定特征矩阵，其中，所述时间移位图卷积模型用于捕获时空相关性；第二确定模块，用于根据所述特征矩阵以及第一时间循环神经网络，确定目标隐藏状态；第三确定模块，用于根据所述目标隐藏状态以及全连接层，确定当前时间段的交通出行量;第三确定模块，还用于根据所述目标隐藏状态、所述第二交通出行量数据和第二时间循环神经网络，计算所述历史日期对应的第一上下文向量；根据所述目标隐藏状态、所述第三交通出行量数据和第三时间循环神经网络，计算所述历史周期对应的第二上下文向量；根据当前时间段部分观测到的交通出行量，对当前时间段的交通出行量进行估计，以获得第一估计值，并根据当前时间段部分观测到的交通出行量以及完全观测到的进站需求的平均比率，对当前时间段的交通出行量进行估计，以获得第二估计值；根据所述目标隐藏状态、所述第一上下文向量、所述第二上下文向量、所述第一估计值、所述第二估计值以及所述全连接层，确定预测时间段的交通出行量。8.一种计算机设备，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1至6任一项所述的方法。9.一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至6任一项所述的方法。
说明书desc
技术领域本发明涉及交通出行量数据处理技术领域，尤其涉及一种交通出行量数据处理方法、装置、设备及存储介质。背景技术客流预测在交通运输中扮演着关键角色，有助于监测系统的性能并优化运营策略以提高服务质量。预测短期乘客需求和交通出行量客流是重要的信息，前者指的是特定时间内进出车站的乘客总数或在出租车服务中上下车地点和时间内的请求数量，后者指的是在一段时间内在始发地和目的地地点之间旅行的乘客总数。过去的研究中已经提出了许多使用统计模型的方法来进行短期乘客需求预测，例如时间序列预测方法、ARIMA模型及其变体和基于卡尔曼滤波器的方法。然而，统计模型的一个主要缺陷是假设乘客需求动态是静态和线性的，忽略了其时间序列的动态和非线性特征。因此，如何提供一种交通出行量数据处理方法，实现轨道交通客流量的精确预测，成为了目前亟待解决的技术问题。发明内容本发明实施例提供一种交通出行量数据处理方法、装置、计算机设备及存储介质，能够提高交通出行量数据处理的准确性。为了解决上述技术问题，本申请实施例提供一种交通出行量数据处理方法，包括以下步骤：获取城域网内各个历史时间段对应的第一交通出行量数据；根据所述第一交通出行量数据以及时间移位图卷积模型，确定特征矩阵，其中，所述时间移位图卷积模型用于捕获时空相关性；根据所述特征矩阵以及第一时间循环神经网络，确定目标隐藏状态；根据所述目标隐藏状态以及全连接层，确定预测时间段的交通出行量。进一步地，所述第一交通出行量数据包括预设数量的历史流量数据，所述历史时间段对应的预设数量的历史流量数据，所述根据所述第一交通出行量数据以及时间移位图卷积模型，确定特征矩阵包括：对于每个所述第一交通出行量数据，将历史流量数据以及所述历史流量数据对应的时间移位相关矩阵，输入至时间移位图卷积模型，获得输出结果；将各个输出结果进行融合运算以及激活函数处理，获得特征矩阵。进一步地，所述时间移位相关矩阵由下式表示： ，其中，/＞为时间移位相关矩阵，城域网被定义为具有N个节点的图/＞，表示N个不同起止点间的交通出行量，引入两个相等长度的时间序列观测/＞和/＞，/＞代表对一个起止点间的交通出行量/＞的历史交通出行量需求，/＞代表对另一个起止点间的交通出行量/＞的历史交通出行量需求，cov是两个向量之间的协方差，var是向量的方差，s代表时间间隔，/＞是滞后s时间间隔的时间序列/＞，/＞用表示；所述时间移位图卷积模型由下式表示：，其中，/＞为在历史时间段t-s，第一交通出行量数据中第/＞个历史流量数据，/＞为特征矩阵，/＞，/＞是单位矩阵，/＞是/＞的度矩阵，/＞是时间移位图卷积模型中训练的层特定权重矩阵，/＞是激活函数。进一步地，所述根据所述特征矩阵以及第一时间循环神经网络，确定目标隐藏状态包括：所述第一交通出行量数据包括预设数量的历史流量数据，根据历史流量数据的时间顺序，在各个历史流量数据中确定时间最晚的目标历史流量数据；将所述特征矩阵与所述目标流量数据进行连接处理，以获得连接结果，并根据所述连接结果以及所述第一时间循环神经网络，确定目标隐藏状态。进一步地，所述根据所述连接结果以及所述第一时间循环神经网络，确定目标隐藏状态包括：根据所述时间顺序，在未经过第一时间循环神经网络处理的连接结果中，将时间最早的连接结果输入至第一时间循环神经网络中，以获取隐藏状态以及单元状态；确定是否存在未经过第一时间循环神经网络处理的连接结果，若存在，则根据所述隐藏状态以及单元状态，更新所述第一时间循环神经网络；将更新后的第一时间循环神经网络作为第一时间循环神经网络，并返回执行步骤在未经过第一时间循环神经网络处理的连接结果中将时间最早的连接结果输入至第一时间循环神经网络；若不存在未经过第一时间循环神经网络处理的连接结果，则将所述隐藏状态作为目标隐藏状态。进一步地，所述根据所述目标隐藏状态以及全连接层，确定预测时间段的交通出行量包括：获取历史日期对应的第二交通出行量数据、历史周期对应的第三交通出行量数据以及当前时间段部分观测到的交通出行量以及完全观测到的进站需求；根据所述目标隐藏状态、所述第二交通出行量数据和第二时间循环神经网络，计算所述历史日期对应的第一上下文向量；根据所述目标隐藏状态、所述第三交通出行量数据和第三时间循环神经网络，计算所述历史周期对应的第二上下文向量；根据当前时间段部分观测到的交通出行量，对当前时间段的交通出行量进行估计，以获得第一估计值，并根据当前时间段部分观测到的交通出行量以及完全观测到的进站需求的平均比率，对当前时间段的交通出行量进行估计，以获得第二估计值；根据所述目标隐藏状态、所述第一上下文向量、所述第二上下文向量、所述第一估计值、所述第二估计值以及所述全连接层，确定预测时间段的交通出行量。进一步地，所述根据所述目标隐藏状态、所述第二交通出行量数据和第二时间循环神经网络，计算所述历史日期对应的第一上下文向量包括：根据第二交通出行量数据的时间顺序，在未经过第二时间循环神经网络处理的第二交通出行量数据中将时间最早的第二交通出行量数据输入至第二时间循环神经网络，获取隐藏状态以及单元状态，并将所述隐藏状态添加至隐藏状态集；确定是否存在未经过第二时间循环神经网络处理的第二交通出行量数据，若存在，则根据所述隐藏状态以及单元状态，更新所述第二时间循环神经网络；将更新后的第二时间循环神经网络作为第二时间循环神经网络，并返回执行步骤在未经过第二时间循环神经网络处理的第二交通出行量数据中将时间最早的第二交通出行量数据输入至第二时间循环神经网络；若不存在，则根据所述目标隐藏状态、所述隐藏状态集以及注意力机制，确定所述历史日期对应的第一上下文向量。为了解决上述技术问题，本申请实施例还提供一种交通出行量数据处理装置，包括：获取模块，用于获取城域网内各个历史时间段对应的第一交通出行量数据；第一确定模块，用于根据所述第一交通出行量数据以及时间移位图卷积模型，确定特征矩阵，其中，所述时间移位图卷积模型用于捕获时空相关性；第二确定模块，用于根据所述特征矩阵以及第一时间循环神经网络，确定目标隐藏状态；第三确定模块，用于根据所述目标隐藏状态以及全连接层，确定当前时间段的交通出行量。为了解决上述技术问题，本申请实施例还提供一种计算机设备，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述方法的步骤。为了解决上述技术问题，本申请实施例还提供一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序被处理器执行时实现上述方法的步骤。本发明实施例提供的交通出行量数据处理方法、装置、计算机设备及存储介质，通过获取城域网内各个历史时间段对应的第一交通出行量数据，然后根据所述第一交通出行量数据以及时间移位图卷积模型，确定特征矩阵，其中，所述时间移位图卷积模型用于捕获时空相关性，接着根据所述特征矩阵以及第一时间循环神经网络，确定目标隐藏状态，最后根据所述目标隐藏状态以及全连接层，确定预测时间段的交通出行量。能够根据第一交通出行量数据，准确确定预测时间段的交通出行量。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对本发明实施例的描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1是本申请可以应用于其中的示例性系统架构图；图2是本申请的交通出行量数据处理方法的一个实施例的流程图；图3是本申请的交通出行量数据处理方法中不同交通出行量对的行进时间不同信息的可观察性水平的示意图；图4是本申请的交通出行量数据处理方法中不同交通出行量对的行进时间不同信息的可观察性水平的又一示意图；图5是本申请的交通出行量数据处理方法的一实施例的结构示意图；图6是根据本申请的交通出行量数据处理装置的一个实施例的结构示意图；图7是根据本申请的计算机设备的一个实施例的结构示意图。具体实施方式除非另有定义，本文所使用的所有的技术和科学术语与属于本申请的技术领域的技术人员通常理解的含义相同；本文中在申请的说明书中所使用的术语只是为了描述具体的实施例的目的，不是旨在于限制本申请；本申请的说明书和权利要求书及上述附图说明中的术语“包括”和“具有”以及它们的任何变形，意图在于覆盖不排他的包含。本申请的说明书和权利要求书或上述附图中的术语“第一”、“第二”等是用于区别不同对象，而不是用于描述特定顺序。在本文中提及“实施例”意味着，结合实施例描述的特定特征、结构或特性可以包含在本申请的至少一个实施例中。在说明书中的各个位置出现该短语并不一定均是指相同的实施例，也不是与其它实施例互斥的独立的或备选的实施例。本领域技术人员显式地和隐式地理解的是，本文所描述的实施例可以与其它实施例相结合。下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。请参阅图1，如图1所示，系统100可以包括终端设备110、网络120和服务器130。网络120用以在终端设备110和服务器130之间提供通信链路的介质。网络120可以包括各种连接类型，例如有线、无线通信链路或者光纤电缆等。用户可以使用终端设备110通过网络120与服务器130交互，以接收或发送消息等。终端设备110可以是具有显示屏并且支持网页浏览和拍摄功能的各种电子设备，包括但不限于智能手机、平板电脑、电子书阅读器、MP3播放器、MP4播放器、膝上型便携计算机和台式计算机等。服务器130可以是提供各种服务的服务器，例如对终端设备110上显示的页面提供支持的后台服务器。需要说明的是，本申请实施例所提供的交通出行量数据处理方法由服务器执行，相应地，交通出行量数据处理装置设置于服务器中。应该理解，图1中的终端设备、网络和服务器的数目仅仅是示意性的。根据实现需要，可以具有任意数目的终端设备、网络和服务器，本申请实施例中的终端设备110具体可以对应的是实际生产中的应用系统。请参阅图2，图2示出本发明实施例提供的一种交通出行量数据处理方法，以该方法应用在图1中的服务器为例进行说明，详述如下。S201、获取城域网内各个历史时间段对应的第一交通出行量数据；需要说明的是，在城域网中包括N个交通出行量对， 例如，起点站以及终点站对应的交通出行量对/＞，对于/＞这个交通出行量对在时间t从起点站/＞出发到终点站/＞的流量可以表示为/＞。对于i这个交通出行量对，在1到t时间的流量的集合可以表示为/＞。在时间步长t，N个交通出行量对的流量可以表示为。在本实施例中，获取城域网内各个历史时间段对应的第一交通出行量数据，其中，历史时间段可以是人为预设的时间段，可以是每30分钟为一个时间段，也可是以每15分钟为一个时间段。作为一示例，一个第一交通出行量数据可以是历史时间段t，在城域网内所有交通出行量对的流量，用表示。作为又一示例，一个第一交通出行量数据还可以是至任意历史时间段的流量集合，任意历史时间段要早于/＞，例如，历史时间段/＞到任意历史时间段/＞时间段之间的流量集合，用/＞表示。还需要说明的是，图3以及图4展示由于不同交通出行量对的行进时间不同信息的可观察性水平。假设有两个交通出行量对和，行程时间分别为10分钟和20分钟。假设上午8:15，任务是预测t＋1的交通出行量对的流量。对于，可以在8:15观察到间隔t-1期间的流量，因为从S1到S2需要10分钟，并且在间隔t-1中开始的所有行程都完成了。在间隔中，只有在上午8:00到8:05之间开始的行程在8:15之前完成，导致t处的部分交通出行量对的流量产生间隔。对于中，只有在早上7:45-7:55期间出发的行程才能完成，因为它们的旅行时间为20分钟。说明只有间隔t-1的部分信息，没有间隔t的信息对于交通出行量对的流量预测问题，重要的是识别不同水平的历史交通出行量对的流量部分可观测性。S202、根据所述第一交通出行量数据以及时间移位图卷积模型，确定特征矩阵，其中，所述时间移位图卷积模型用于捕获时空相关性；在本实施例中，通过时间移位图卷积模型可以捕获第一交通出行量数据的时空相关性，从而得到具备时空相关性的特征矩阵。进一步地，一实施例中，第一交通出行量数据包括预设数量的历史流量数据，S202还包括：S2021，对于每个所述第一交通出行量数据，将历史流量数据以及所述历史流量数据对应的时间移位相关矩阵，输入至时间移位图卷积模型，获得输出结果；S2022，将各个输出结果进行融合运算以及激活函数处理，获得特征矩阵。其中，历史流量数据是指每个第一交通出行量数据可以是历史时间段t至任意历史时间段的流量集合中的一个元素，任意历史时间段早于t，如，历史时间段t到任意历史时间段t-h时间段之间的流量集合，用表示，集合/＞中的每个元素即为历史流量数据。时间移位相关矩阵可用于捕捉到交通出行量对之间的滞后时间相关性。在本实施例中，对于每个第一交通出行量数据，将第一交通出行量数据中的历史流量数据以及历史流量数据对应的时间移位相关矩阵，输入至时间移位图卷积模型，以获得输出结果。进一步地，一实施例中，时间移位相关矩阵由下式表示： ，其中，/＞为时间移位相关矩阵，城域网被定义为具有N个节点的图/＞，表示N个不同起止点间的交通出行量，引入两个相等长度的时间序列观测/＞和/＞，/＞代表对一个起止点间的交通出行量/＞的历史交通出行量需求，/＞代表对另一个起止点间的交通出行量/＞的历史交通出行量需求，cov是两个向量之间的协方差，var是向量的方差，s代表时间间隔，/＞是滞后s时间间隔的时间序列/＞，用/＞表示；所述时间移位图卷积模型由下式表示，其中，/＞为在历史时间段t-s，第一交通出行量数据中第/＞个历史流量数据，/＞为特征矩阵，/＞，/＞是单位矩阵，/＞是/＞的度矩阵，W是时间移位图卷积模型中训练的层特定权重矩阵，/＞是激活函数。在得到输出结果后，将各个输出结果进行融合运算以及激活函数处理，获得特征矩阵。具体地，如下公式所示其中，表示融合运算，融合运算可以是平均值、最大值等，/＞为输出结果，表示历史时间段t-s至t，第一交通出行量数据中各个历史流量数据对应的特征矩阵。S203、根据所述特征矩阵以及第一时间循环神经网络，确定目标隐藏状态；在本实施例中，通过第一时间循环神经网络对特征矩阵进行处理，从而得到目标隐藏状态。进一步地，一实施例中，S203还包括：S2031，所述第一交通出行量数据包括预设数量的历史流量数据，根据历史流量数据的时间顺序，在各个历史流量数据中确定时间最晚的目标历史流量数据；S2032，将所述特征矩阵与所述目标流量数据进行连接处理，以获得连接结果，并根据所述连接结果以及所述第一时间循环神经网络，确定目标隐藏状态。进一步地，一实施例中，S2032还包括：A，根据所述时间顺序，在未经过第一时间循环神经网络处理的连接结果中，将时间最早的连接结果输入至第一时间循环神经网络中，获取隐藏状态以及单元状态；B，确定是否存在未经过第一时间循环神经网络处理的连接结果，若存在，则根据所述隐藏状态以及单元状态，更新所述第一时间循环神经网络；C，将更新后的第一时间循环神经网络作为第一时间循环神经网络，并返回执行步骤在未经过第一时间循环神经网络处理的连接结果中将时间最早的连接结果输入至第一时间循环神经网络；D，若不存在未经过第一时间循环神经网络处理的连接结果，则将所述隐藏状态作为目标隐藏状态。需要说明的是，未来的交通出行量与之前的观测值之间存在一定的时间序列依赖关系。为了能够捕捉这种依赖关系，通过采用时间循环神经网络网络来学习短期时间序列的特征。时间循环神经网络由存储单元、输入门/＞、输出门/＞和遗忘门/＞组成。它通过在时间间隔t保持存储单元/＞来学习序列相关性，这可以被视为先前序列信息的累积，并且三个门调节信息进出单元的流动。计算过程如下所示：其中，表示哈达玛乘积。Wi、Wf、Wg和Wo是可学习参数，bi、bf、bg和bo是相应的偏置向量。Xt是时间t处的输入参数，ht-1和Ct-1是t-1处的隐藏状态和单元状态。/＞和tanh是两个广泛使用的非线性激活函数。输入Xt可以是入口需求、交通出行量或间隔t处交通出行量的偏差。在本实施例中，连接结果的时间顺序，即历史时间段的时间顺序，在未经过第一时间循环神经网络处理的连接结果中，将时间最早的连接结果输入至第一时间循环神经网络中，以获取隐藏状态以及单元状态，而后确定是否存在未经过第一时间循环神经网络处理的连接结果，若存在，则根据隐藏状态以及单元状态，更新第一时间循环神经网络，将更新后的第一时间循环神经网络作为第一时间循环神经网络，并返回执行步骤在未经过第一时间循环神经网络处理的连接结果中将时间最早的连接结果输入至第一时间循环神经网络。若不存在未经过第一时间循环神经网络处理的连接结果，则将隐藏状态作为目标隐藏状态。作为一示例，应用时间循环神经网络对最近时间间隔的交通出行量依赖性进行建模，称为间隔时间循环神经网络，间隔时间循环神经网络可以作为第一时间循环神经网络。S204、根据所述目标隐藏状态和全连接层，确定预测时间段的交通出行量。其中，预测时间段可以是当前时间段或者未来时间段，在本实施例中，通过目标隐藏状态和全连接层，确定预测时间段的交通出行量。进一步地，一实施例中，S204包括：S2041，获取历史日期对应的第二交通出行量数据、历史周期对应的第三交通出行量数据以及当前时间段部分观测到的交通出行量以及完全观测到的进站需求；S2042，根据所述目标隐藏状态、所述第二交通出行量数据和第二时间循环神经网络，计算所述历史日期对应的第一上下文向量；S2043，根据所述目标隐藏状态、所述第三交通出行量数据和第三时间循环神经网络，计算所述历史周期对应的第二上下文向量；S2044，根据当前时间段部分观测到的交通出行量，对当前时间段的交通出行量进行估计，以获得第一估计值，并根据当前时间段部分观测到的交通出行量以及完全观测到的进站需求的平均比率，对当前时间段的交通出行量进行估计，以获得第二估计值；S2045，根据所述目标隐藏状态、所述第一上下文向量、所述第二上下文向量、所述第一估计值、所述第二估计值以及所述全连接层，确定预测时间段的交通出行量。在本实施例中，获取历史日期对应的第二交通出行量数据、历史周期对应的第三交通出行量数据以及当前时间段部分观测到的交通出行量以及完全观测到的进站需求，接着根据目标隐藏状态、第二交通出行量数据和第二时间循环神经网络，计算历史日期对应的第一上下文向量，其中历史日期可以是以每日为单位。作为一示例，长期时间模式可以提高预测性能，用长序列训练时间循环神经网络增加了梯度消失的风险，从而显著削弱了学习周期性的影响。为此进一步设计了两个时间循环神经网络，即每日时间循环神经网络和每周时间循环神经网络，每日时间循环神经网络可以作为第二时间循环神经网络，每周时间循环神经网络可以作为第三时间循环神经网络。作为一示例，假设对交通出行量对的I时间循环神经网络的目标隐藏状态是/＞，并且前/＞天的隐藏状态是/＞。每日时间注意力权重在公式-中计算。每日上下文向量/＞是通过对公式中的注意力权重与来自每日时间循环神经网络的隐藏状态进行逐元素相乘而生成的。第二上下文向量/＞的计算方法类似。根据目标隐藏状态、所述第三交通出行量数据和第三时间循环神经网络，计算所述历史周期对应的第二上下文向量，其中，历史周期可以以每周为单位，如第1周、第2周、第3周。需要说明的是，在城市轨道交通的交通出行量预测时，行程不完整是一个常见的问题。具体而言，这意味着无法获得最近一些区间的完整交通出行量的需求数据，为了应对这一难题，需要结合不同来源的信息来提高预测性能其中，一个解决方法是利用当前时间段部分观测到的交通出行量与进站需求的平均比率来估计交通出行量，以获得第一估计值。这种方法的基本假设是交通出行量与进站需求之间具有相关性，并且这种相关性可以用来得到基于历史数据的交通出行量估计值，从而提高预测精度。 另一种信息来源是直接利用最近一些区间内的部分观测交通出行量数据。例如，当区间开始时，一些行程已经完成，这些完成的行程提供了一些有限的交通出行量信息，可以用来推断整个区间的交通出行量，以获得第二估计值/＞。最后，将目标隐藏状态、第一上下文向量、第二上下文向量、第一估计值，第二估计值通过全连接层，将全连接层的输出结果作为预测时间段的交通出行量。在一种实现方式中，根据第二交通出行量数据的时间顺序，在未经过第二时间循环神经网络处理的第二交通出行量数据中将时间最早的第二交通出行量数据输入至第二时间循环神经网络，获取隐藏状态以及单元状态，并将隐藏状态添加至隐藏状态集；确定是否存在未经过第二时间循环神经网络处理的第二交通出行量数据，若存在，则根据隐藏状态以及单元状态，更新第二时间循环神经网络；将更新后的第二时间循环神经网络作为第二时间循环神经网络，并返回执行步骤在未经过第二时间循环神经网络处理的第二交通出行量数据中将时间最早的第二交通出行量数据输入至第二时间循环神经网络；若不存在，则根据目标隐藏状态、隐藏状态集以及注意力机制，确定历史日期对应的第一上下文向量。为了更好的理解本发明，作为一示例，如下式、、、、所示，第一交通出行量数据、第一交通出行量数据中每一个集合为一个历史流量数据、第二交通出行量数据、第三交通出行量数据、时间移位相关矩阵以及当前时间段部分观测到的交通出行量以及完全观测到的进站需求。 如图5所示，空间模块中，第一交通出行量数据以及第一交通出行量数据对应的时间移位相关矩阵输入至TSGC中，从而得到特征矩阵至/＞，其中TSGC为时间移位图卷积模型。如图5所示，目标历史流量数据以及特征矩阵/＞，将特征矩阵与目标流量数据进行连接处理，以获得连接结果，将连接结果输入至I时间循环神经网络中从而得到隐藏状态/＞，根据/＞更新下一层I时间循环神经网络，从而在最后一层输出目标隐藏状态/＞。将第二交通出行量数据/＞输入至每日时间循环神经网络，从而得到隐藏状态/＞，根据/＞更新下一层I时间循环神经网络，从而在最后一层输出隐藏状态/＞。将第三交通出行量数据，输入至每周时间循环神经网络，从而得到隐藏状态/＞，根据/＞更新下一层每周时间循环神经网络，从而在最后一层输出隐藏状态/＞。将当前时间段部分观测到的交通出行量以及完全观测到的进站需求通过FC，得到/＞以及/＞。根据至/＞的隐藏状态以及目标隐藏状态/＞，通过时间注意力，得到每周上下文向量。根据/＞至/＞的隐藏状态以及目标隐藏状态/＞，通过时间注意力，得到每日上下文向量。最后，将/＞、/＞、目标隐藏状态/＞以及每周上下文向量、每日上下文向量，通过FC全连接层，得到预测当前时间段t的交通出行量预测值/＞。/＞在一种实现方式中，使用地铁系统的进出站数据，将原始数据预处理为粒度为15分钟的交通出行量矩阵。最后两周的数据用作测试集，剩余天数用作训练集。选择了12对具有不同特征的典型交通出行量对进行实验。选定的12个交通出行量对在需求水平和行程距离上各不相同，涵盖了直达和换乘行程。使用平均绝对误差和均方误差评估模型性能，如下式：其中，和 /＞分别是交通出行量需求的基本事实和预测值， n是测试数据集的大小，/＞表示特定的交通出行量对和时间段。所有模型都是使用Pytorch和python 3.7实现，超参数通过网格搜索选择的。测试了几种常用的超参数值，并选择了性能最好的超参数。例如，对于时态模块，用1、2和3个隐藏层测试了性能。测试的隐藏单元数量为16、32、48、64。有1个隐藏层和32个单元的备选方案表现最好。关于输入变量，使用3个先前的时间间隔作为间隔时间循环神经网络，使用4个先前的日子作为每日时间循环神经网络，以及使用3个之前的星期作为每周时间循环神经网络。对于空间模块，使用一个具有16个隐藏单元的图卷积层。将3个滞后区间用于时间移位的图矩阵。学习率设置为0.0001，批量大小设置为4。下降率为0.3。本实例提出的交通出行量数据处理方法，获取城域网内各个历史时间段对应的第一交通出行量数据，然后根据所述第一交通出行量数据以及时间移位图卷积模型，确定特征矩阵，其中，所述时间移位图卷积模型用于捕获时空相关性，接着根据所述特征矩阵以及第一时间循环神经网络，确定目标隐藏状态，最后根据所述目标隐藏状态以及全连接层，确定预测时间段的交通出行量。能够根据第一交通出行量数据，准确确定预测时间段的交通出行量。图6示出与上述实施例对应的交通出行量数据处理装置300的原理框图。如图6所示，该装置300包括获取模块310、第一确定模块320、第二确定模块330、第三确定模块340。各功能模块详细说明如下。获取模块310，用于获取城域网内各个历史时间段对应的第一交通出行量数据；第一确定模块320，用于根据所述第一交通出行量数据以及时间移位图卷积模型，确定特征矩阵，其中，所述时间移位图卷积模型用于捕获时空相关性；第二确定模块330，用于根据所述特征矩阵以及第一时间循环神经网络，确定目标隐藏状态；第三确定模块340，用于根据所述目标隐藏状态以及全连接层，确定当前时间段的交通出行量。关于交通出行量数据处理装置的具体限定可以参见上文中对于交通出行量数据处理方法的限定，在此不再赘述。上述交通出行量数据处理装置中的各个模块可全部或部分通过软件、硬件及其组合来实现。上述各模块可以硬件形式内嵌于或独立于计算机设备中的处理器中，也可以以软件形式存储于计算机设备中的存储器中，以便于处理器调用执行以上各个模块对应的操作。为解决上述技术问题，本申请实施例还提供计算机设备。具体请参阅图7，图7为本实施例计算机设备基本结构框图。所述计算机设备400包括通过系统总线相互通信连接存储器410、处理器420、网络接口430。需要指出的是，图中仅示出了具有组件连接存储器410、处理器420、网络接口430的计算机设备400，但是应理解的是，并不要求实施所有示出的组件，可以替代的实施更多或者更少的组件。其中，本技术领域技术人员可以理解，这里的计算机设备是一种能够按照事先设定或存储的指令，自动进行数值计算和/或交通出行量数据处理的设备，其硬件包括但不限于微处理器、专用集成电路、可编程门阵列、数字处理器 、嵌入式设备等。所述计算机设备可以是桌上型计算机、笔记本、掌上电脑及云端服务器等计算设备。所述计算机设备可以与用户通过键盘、鼠标、遥控器、触摸板或声控设备等方式进行人机交互。所述存储器410至少包括一种类型的可读存储介质，所述可读存储介质包括闪存、硬盘、多媒体卡、卡型存储器、随机访问存储器、静态随机访问存储器、只读存储器、电可擦除可编程只读存储器、可编程只读存储器、磁性存储器、磁盘、光盘等。在一些实施例中，所述存储器410可以是所述计算机设备400的内部存储单元，例如该计算机设备400的硬盘或内存。在另一些实施例中，所述存储器410也可以是所述计算机设备400的外部存储设备，例如该计算机设备400上配备的插接式硬盘，智能存储卡，安全数字卡，闪存卡等。当然，所述存储器410还可以既包括所述计算机设备400的内部存储单元也包括其外部存储设备。本实施例中，所述存储器410通常用于存储安装于所述计算机设备400的操作系统和各类应用软件，例如电子文件的控制的程序代码等。此外，所述存储器410还可以用于暂时地存储已经输出或者将要输出的各类数据。所述处理器420在一些实施例中可以是中央处理器、控制器、微控制器、微处理器、或其他数据处理芯片。该处理器420通常用于控制所述计算机设备400的总体操作。本实施例中，所述处理器420用于运行所述存储器410中存储的程序代码或者处理数据，例如运行电子文件的控制的程序代码。所述网络接口430可包括无线网络接口或有线网络接口，该网络接口430通常用于在所述计算机设备400与其他电子设备之间建立通信连接。本申请还提供了另一种实施方式，即提供一种计算机可读存储介质，所述计算机可读存储介质存储有界面显示程序，所述界面显示程序可被至少一个处理器执行，以使所述至少一个处理器执行如上述的方法的步骤。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到上述实施例方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台终端设备执行本申请各个实施例所述的方法。显然，以上所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例，附图中给出了本申请的较佳实施例，但并不限制本申请的专利范围。本申请可以以许多不同的形式来实现，相反地，提供这些实施例的目的是使对本申请的公开内容的理解更加透彻全面。尽管参照前述实施例对本申请进行了详细的说明，对于本领域的技术人员来而言，其依然可以对前述各具体实施方式所记载的技术方案进行修改，或者对其中部分技术特征进行等效替换。凡是利用本申请说明书及附图内容所做的等效结构，直接或间接运用在其他相关的技术领域，均同理在本申请专利保护范围之内。
