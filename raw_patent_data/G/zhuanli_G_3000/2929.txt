标题title
一种土工格室质量智能检测方法
摘要abst
本发明涉及图像处理技术领域，具体涉及一种土工格室质量智能检测方法，包括：采集土工格室表面图像，对土工格室表面图像进行预处理，对土工格室灰度图进行灰度分级，获取多个灰度级图像，根据灰度级图像中非零像素点的灰度差异和灰度离散程度获取归一化显著性，进而得到获取每个灰度级图像中存在裂缝缺陷的概率，根据归一化显著性获取每个灰度级图像的位置离散程度，对存在裂缝缺陷的概率进行修正，根据修正结果获取每个灰度级图像的伽马参数，对每个灰度级图像进行增强，根据增强图像进行土工格室质量检测。本发明对不同灰度级图像进行自适应增强，避免了过增强和欠增强的问题，增强效果更好，使得土工格室质量检测更加准确。
权利要求书clms
1.一种土工格室质量智能检测方法，其特征在于，该方法包括以下步骤：采集土工格室表面图像，对土工格室表面图像中的镂空区域进行填充，得到土工格室灰度图；对土工格室灰度图进行灰度分级，得到多个灰度级图像；将任意一个灰度级图像作为目标灰度级图像，获取目标灰度级图像中每个非零像素点的灰度差异以及灰度离散程度；根据目标灰度级图像中每个非零像素点的灰度差异和灰度离散程度获取每个非零像素点的归一化显著性；根据归一化显著性获取目标灰度级图像中存在裂缝缺陷的概率；根据归一化显著性获取目标灰度级图像中所有非零像素点的位置离散程度；根据位置离散程度对目标灰度级图像中存在裂缝缺陷的概率进行修正，得到目标灰度级图像中存在裂缝缺陷的修正概率；根据修正概率获取目标灰度级图像的伽马参数，对目标灰度级图像进行伽马变换增强，得到目标灰度级图像的增强图像；获取每个灰度级图像的增强图像，将所有灰度级图像的增强图像叠加，得到土工格室灰度图的增强图像；根据土工格室灰度图的增强图像进行土工格室质量检测。2.根据权利要求1所述的一种土工格室质量智能检测方法，其特征在于，所述对土工格室表面图像中的镂空区域进行填充，得到土工格室灰度图，包括的具体步骤如下：对土工格室表面图像进行灰度化处理，对灰度化后的土工格室表面图像中的所有像素点按照灰度值进行聚类，将所有像素点聚为两个类别；将灰度值均值小的类别中所有像素点的灰度值置为0，将灰度值均值大的类别中所有像素点的灰度值置为1，得到一幅二值图像；对二值图像中灰度值为1的像素点进行连通域分析，得到多个连通域，将每个连通域在灰度化后的土工格室表面图像中对应位置的区域作为一个镂空区域；获取每个镂空区域相邻的所有非镂空区域的像素点的灰度值的均值，作为每个镂空区域的修正灰度；将镂空区域中所有像素点的灰度值调整为该镂空区域的修正灰度，得到土工格室灰度图。3.根据权利要求1所述的一种土工格室质量智能检测方法，其特征在于，所述对土工格室灰度图进行灰度分级，得到多个灰度级图像，包括的具体步骤如下：获取土工格室灰度图的灰度直方图，对土工格室灰度图的灰度直方图进行多阈值分割，将灰度直方图分为多个灰度区间，将每个灰度区间中的所有灰度值作为一个灰度级；将任意一个灰度级作为目标灰度级，将土工格室灰度图中属于目标灰度级的所有像素点标记1，将其余像素点标记为0，得到目标灰度级的二值掩膜图像，将目标灰度级的二值掩膜图像与土工格室灰度图相乘，得到目标灰度级对应的灰度级图像；获取每个灰度级对应的灰度级图像。4.根据权利要求1所述的一种土工格室质量智能检测方法，其特征在于，所述灰度差异的获取方法为：以目标灰度级图像中每个非零像素点为中心，构建大小的窗口；根据每个非零像素点的窗口获取目标灰度级图像中每个非零像素点的灰度差异：其中，为目标灰度级图像中第/＞个非零像素点的灰度差异；/＞为目标灰度级图像中第个非零像素点的窗口内非零像素点的个数；/＞为窗口大小；/＞为目标灰度级图像中第个非零像素点的灰度值；/＞为目标灰度级图像中第/＞个非零像素点的窗口内所有非零像素点的灰度值的均值；/＞为绝对值符号；/＞为自然常数。5.根据权利要求1所述的一种土工格室质量智能检测方法，其特征在于，所述灰度离散程度的获取方法为：其中为目标灰度级图像中第/＞个非零像素点的灰度离散程度；/＞为目标灰度级图像中第/＞个非零像素点的窗口内非零像素点的个数；/＞为目标灰度级图像中第/＞个非零像素点的灰度值；/＞为目标灰度级图像中第/＞个非零像素点的窗口内第/＞个像素点的灰度值。6.根据权利要求1所述的一种土工格室质量智能检测方法，其特征在于，所述根据目标灰度级图像中每个非零像素点的灰度差异和灰度离散程度获取每个非零像素点的归一化显著性，包括的具体步骤如下：获取每个非零像素点的显著性：其中，为目标灰度级图像中第/＞个非零像素点的显著性；/＞为目标灰度级图像中第/＞个非零像素点的灰度差异；/＞为目标灰度级图像中第/＞个非零像素点的灰度离散程度；/＞为超参数；对目标灰度级图像中所有非零像素点的显著性进行线性归一化，得到每个非零像素点的归一化显著性。7.根据权利要求1所述的一种土工格室质量智能检测方法，其特征在于，所述根据归一化显著性获取目标灰度级图像中存在裂缝缺陷的概率，包括的具体步骤如下：其中，为目标灰度级图像中存在裂缝缺陷的概率；/＞为目标灰度级图像的第/＞种归一化显著性的频率；/＞为目标灰度级图像中归一化显著性的种类数。8.根据权利要求1所述的一种土工格室质量智能检测方法，其特征在于，所述根据归一化显著性获取目标灰度级图像中所有非零像素点的位置离散程度，包括的具体步骤如下：获取目标灰度级图像中所有非零像素点的归一化显著性的均值，作为显著性阈值；当目标灰度级图像中非零像素点的归一化显著性大于显著性阈值时，将该非零像素点作为标记像素点；获取目标灰度级图像中的所有标记像素点，对所有标记像素点进行连通性分析，获取所有标记像素点形成的所有连通域，记为标记连通域；获取一个标记连通域的连通域边缘上每个像素点到另一个标记连通域的连通域边缘上每个像素点的距离，将其中最短距离作为此两个标记连通域之间的最短距离；根据标记连通域获取目标灰度级图像中所有非零像素点的位置离散程度：其中，为目标灰度级图像中所有非零像素点的位置离散程度；/＞为目标灰度级图像中第/＞个标记连通域的中心与第/＞个标记连通域的中心之间的距离；/＞为目标灰度级图像中第个标记连通域与第/＞个标记连通域的最短距离；/＞为目标灰度级图像中标记连通域的个数。9.根据权利要求1所述的一种土工格室质量智能检测方法，其特征在于，所述根据位置离散程度对目标灰度级图像中存在裂缝缺陷的概率进行修正，得到目标灰度级图像中存在裂缝缺陷的修正概率，包括的具体步骤如下：其中，目标灰度级图像中存在裂缝缺陷的修正概率；/＞为目标灰度级图像中存在裂缝缺陷的概率；/＞为目标灰度级图像中所有非零像素点的位置离散程度；/＞为双曲正切函数。10.根据权利要求1所述的一种土工格室质量智能检测方法，其特征在于，所述根据修正概率获取目标灰度级图像的伽马参数，包括的具体步骤如下：其中，为目标灰度级图像的伽马参数；/＞为目标灰度级图像中存在裂缝缺陷的修正概率；/＞为以自然常数为底的对数函数。
说明书desc
技术领域本发明涉及图像处理技术领域，具体涉及一种土工格室质量智能检测方法。背景技术土工格室是一种由钢筋和混凝土组成的预制结构，在土壤中起到固定和加强作用，若土工格室表面产生裂缝缺陷，会造成土工格室的承载能力下降、安全风险增加和维护成本增加等问题，因此在土工格室生产完后的出厂过程中需要对其质量进行检测，但是在检测过程中由于表面缺陷过于细微而不易检测，因此需要利用高分辨率相机采集图像并对细微缺陷区域进行增强，使缺陷区域表现更明显。现有的图像增强方法对图像进行增强时，对图像的空间局部性考虑不足，在整个图像上进行处理会导致原始图像中噪声等信息的增强，同时也增加了图像细节丢失或边缘失真等问题，导致土工格室上细微的缺陷增强效果差。发明内容本发明提供一种土工格室质量智能检测方法，以解决现有的问题。本发明的一种土工格室质量智能检测方法采用如下技术方案：本发明一个实施例提供了一种土工格室质量智能检测方法，该方法包括以下步骤：采集土工格室表面图像，对土工格室表面图像中的镂空区域进行填充，得到土工格室灰度图；对土工格室灰度图进行灰度分级，得到多个灰度级图像；将任意一个灰度级图像作为目标灰度级图像，获取目标灰度级图像中每个非零像素点的灰度差异以及灰度离散程度；根据目标灰度级图像中每个非零像素点的灰度差异和灰度离散程度获取每个非零像素点的归一化显著性；根据归一化显著性获取目标灰度级图像中存在裂缝缺陷的概率；根据归一化显著性获取目标灰度级图像中所有非零像素点的位置离散程度；根据位置离散程度对目标灰度级图像中存在裂缝缺陷的概率进行修正，得到目标灰度级图像中存在裂缝缺陷的修正概率；根据修正概率获取目标灰度级图像的伽马参数，对目标灰度级图像进行伽马变换增强，得到目标灰度级图像的增强图像；获取每个灰度级图像的增强图像，将所有灰度级图像的增强图像叠加，得到土工格室灰度图的增强图像；根据土工格室灰度图的增强图像进行土工格室质量检测。优选的，所述对土工格室表面图像中的镂空区域进行填充，得到土工格室灰度图，包括的具体步骤如下：对土工格室表面图像进行灰度化处理，对灰度化后的土工格室表面图像中的所有像素点按照灰度值进行聚类，将所有像素点聚为两个类别；将灰度值均值小的类别中所有像素点的灰度值置为0，将灰度值均值大的类别中所有像素点的灰度值置为1，得到一幅二值图像；对二值图像中灰度值为1的像素点进行连通域分析，得到多个连通域，将每个连通域在灰度化后的土工格室表面图像中对应位置的区域作为一个镂空区域；获取每个镂空区域相邻的所有非镂空区域的像素点的灰度值的均值，作为每个镂空区域的修正灰度；将镂空区域中所有像素点的灰度值调整为该镂空区域的修正灰度，得到土工格室灰度图。优选的，所述对土工格室灰度图进行灰度分级，得到多个灰度级图像，包括的具体步骤如下：获取土工格室灰度图的灰度直方图，对土工格室灰度图的灰度直方图进行多阈值分割，将灰度直方图分为多个灰度区间，将每个灰度区间中的所有灰度值作为一个灰度级；将任意一个灰度级作为目标灰度级，将土工格室灰度图中属于目标灰度级的所有像素点标记1，将其余像素点标记为0，得到目标灰度级的二值掩膜图像，将目标灰度级的二值掩膜图像与土工格室灰度图相乘，得到目标灰度级对应的灰度级图像；获取每个灰度级对应的灰度级图像。优选的，所述灰度差异的获取方法为：以目标灰度级图像中每个非零像素点为中心，构建大小的窗口；根据每个非零像素点的窗口获取目标灰度级图像中每个非零像素点的灰度差异：其中，为目标灰度级图像中第个非零像素点的灰度差异；为目标灰度级图像中第个非零像素点的窗口内非零像素点的个数；为窗口大小；为目标灰度级图像中第个非零像素点的灰度值；为目标灰度级图像中第个非零像素点的窗口内所有非零像素点的灰度值的均值；为绝对值符号；为自然常数。优选的，所述灰度离散程度的获取方法为：其中为目标灰度级图像中第个非零像素点的灰度离散程度；为目标灰度级图像中第个非零像素点的窗口内非零像素点的个数；为目标灰度级图像中第个非零像素点的灰度值；为目标灰度级图像中第个非零像素点的窗口内第个像素点的灰度值。优选的，所述根据目标灰度级图像中每个非零像素点的灰度差异和灰度离散程度获取每个非零像素点的归一化显著性，包括的具体步骤如下：获取每个非零像素点的显著性：其中，为目标灰度级图像中第个非零像素点的显著性；为目标灰度级图像中第个非零像素点的灰度差异；为目标灰度级图像中第个非零像素点的灰度离散程度；为超参数；对目标灰度级图像中所有非零像素点的显著性进行线性归一化，得到每个非零像素点的归一化显著性。优选的，所述根据归一化显著性获取目标灰度级图像中存在裂缝缺陷的概率，包括的具体步骤如下：其中，为目标灰度级图像中存在裂缝缺陷的概率；为目标灰度级图像的第种归一化显著性的频率；为目标灰度级图像中归一化显著性的种类数。优选的，所述根据归一化显著性获取目标灰度级图像中所有非零像素点的位置离散程度，包括的具体步骤如下：获取目标灰度级图像中所有非零像素点的归一化显著性的均值，作为显著性阈值；当目标灰度级图像中非零像素点的归一化显著性大于显著性阈值时，将该非零像素点作为标记像素点；获取目标灰度级图像中的所有标记像素点，对所有标记像素点进行连通性分析，获取所有标记像素点形成的所有连通域，记为标记连通域；获取一个标记连通域的连通域边缘上每个像素点到另一个标记连通域的连通域边缘上每个像素点的距离，将其中最短距离作为此两个标记连通域之间的最短距离；根据标记连通域获取目标灰度级图像中所有非零像素点的位置离散程度：其中，为目标灰度级图像中所有非零像素点的位置离散程度；为目标灰度级图像中第个标记连通域的中心与第个标记连通域的中心之间的距离；为目标灰度级图像中第个标记连通域与第个标记连通域的最短距离；为目标灰度级图像中标记连通域的个数。优选的，所述根据位置离散程度对目标灰度级图像中存在裂缝缺陷的概率进行修正，得到目标灰度级图像中存在裂缝缺陷的修正概率，包括的具体步骤如下：其中，目标灰度级图像中存在裂缝缺陷的修正概率；为目标灰度级图像中存在裂缝缺陷的概率；为目标灰度级图像中所有非零像素点的位置离散程度；为双曲正切函数。优选的，所述根据修正概率获取目标灰度级图像的伽马参数，包括的具体步骤如下：其中，为目标灰度级图像的伽马参数；为目标灰度级图像中存在裂缝缺陷的修正概率；为以自然常数为底的对数函数。本发明的技术方案的有益效果是：现有的图像增强方法对图像进行增强时，对图像的空间局部性考虑不足，在整个图像上进行处理会导致原始图像中噪声等信息的增强，同时也增加了图像细节丢失或边缘失真等问题，导致土工格室上细微的缺陷增强效果差；本发明对土工格室灰度图进行灰度分级，获取多个灰度级图像，根据灰度级图像中非零像素点的灰度差异和灰度离散程度获取归一化显著性，进而得到获取每个灰度级图像中存在裂缝缺陷的概率，根据归一化显著性获取每个灰度级图像的位置离散程度，对存在裂缝缺陷的概率进行修正，一定程度上消除了噪声点对裂缝缺陷概率的影响，根据修正结果获取每个灰度级图像的伽马参数，对每个灰度级图像进行增强，根据增强图像进行土工格室质量检测。本发明对不同灰度级图像进行自适应增强，避免了过增强和欠增强的问题，增强效果更好，使得土工格室质量检测更加准确。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明的一种土工格室质量智能检测方法的步骤流程图；图2为灰度化后的土工格室表面图像。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种土工格室质量智能检测方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种土工格室质量智能检测方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种土工格室质量智能检测方法的步骤流程图，该方法包括以下步骤：S001．采集土工格室表面图像，对土工格室表面图像进行预处理。在土工格室出厂生产线的正上方部署工业相机，通过工业相机垂直拍摄获取土工格室表面图像，并对采集到的土工格室表面图像进行灰度化处理，灰度化后的土工格室表面图像参见图2。需要说明的是，土工格室表面分布圆形镂空区域，为降低后续计算量，可对镂空区域进行填充。在本发明实施例中，利用聚类算法对灰度化后的土工格室表面图像中的所有像素点按照灰度值进行聚类，令，将灰度化后的土工格室表面图像中的所有像素点聚为两个类别，将灰度值均值小的类别中所有像素点的灰度值置为0，将灰度值均值大的类别中所有像素点的灰度值置为1，得到一幅二值图像，对二值图像中灰度值为1的像素点进行连通域分析，得到多个连通域，则每个连通域在灰度化后的土工格室表面图像中对应位置的区域即为土工格室的一个镂空区域。至此，获取了灰度化后的土工格室表面图像中所有镂空区域。获取每个镂空区域相邻的所有非镂空区域的像素点，获取此些像素点的灰度值均值，作为每个镂空区域的修正灰度。将镂空区域中所有像素点的灰度值调整为该镂空区域的修正灰度，如此实现了镂空区域的填充，将填充之后的图像记为土工格室灰度图。至此，实现了对土工格室表面图像的预处理，得到了土工格室灰度图。S002．对土工格室灰度图进行灰度分级，获取多个灰度级图像。需要说明的时，生产土工格室时，可能受到人工失误、生产环境等影响，造成土工格室表面产生裂缝等缺陷，因此需要根据土工格室灰度图进行土工格室的质量检测。由于采集过程中的光照影响，可能会导致土工格室的细微裂缝缺陷难以检测，因此需要对土工格室灰度图进行增强后检测。无光照影响的土工格室灰度图的灰度分布稳定且均匀，一旦受到光照影响，土工格室灰度图的灰度分布会产生差异，为方便对灰度特征表现不同的区域进行局部分析，本发明实施例首先将土工格室灰度图中的灰度值进行分级，获取每个灰度级的图像，以便后续通过多个灰度级图像分析灰度分布情况。在本发明实施例中，根据土工格室灰度图中每种灰度值出现的个数，绘制灰度直方图。利用大津多阈值分割方法对土工格室灰度图的灰度直方图进行分割，将灰度直方图分为多个灰度区间，将每个灰度区间中的所有灰度值作为一个灰度级，如此得到多个灰度级。将任意一个灰度级作为目标灰度级，将土工格室灰度图中属于目标灰度级的所有像素点标记1，将其余像素点标记为0，得到目标灰度级的二值掩膜图像，将目标灰度级的二值掩膜图像与土工格室灰度图相乘，得到目标灰度级对应的灰度级图像。同理，获取每个灰度级对应的灰度级图像。至此，实现了土工格室灰度图的灰度分级，得到了所有灰度级图像。S003．获取每个灰度级图像中存在裂缝缺陷的概率。需要说明的是，由于正常的土工格室图像的灰度分布是稳定且均匀的，但是产生裂缝的区域的灰度分布是比较复杂的，因此本发明实施例首先通过量化像素点相对于周围像素点所表现的特征获取每个像素点的显著性。像素点所表现的显著性越强则说明该像素点相对于周围像素点的表现越突出，处于裂缝缺陷的概率越大，后续对该区域的增强程度越大。在本发明实施例中，将任意一个灰度级图像作为目标灰度级图像，以目标灰度级图像中每个非零像素点为中心，构建大小的窗口。在本发明实施例中，，在其他实施例中，实施人员可根据实际实施情况设置窗口的大小。获取目标灰度级图像中每个非零像素点的灰度差异：其中，为目标灰度级图像中第个非零像素点的灰度差异；为目标灰度级图像中第个非零像素点的窗口内非零像素点的个数；为窗口大小，即窗口内像素点的个数；为目标灰度级图像中第个非零像素点的灰度值；为目标灰度级图像中第个非零像素点的窗口内所有非零像素点的灰度值的均值；为绝对值符号；为自然常数；当第个非零像素点与窗口内所有非零像素点的灰度值的均值的差异越大，第个非零像素点与其窗口内其余非零像素点越不相似，此时第个非零像素点的灰度差异越大；当目标灰度级图像中第个非零像素点的窗口内非零像素点的个数越少时，窗口内灰度值为0的像素点越多，灰度值为0的像素点与非零像素点属于不同的灰度级，若目标灰度级图像中第个非零像素点的窗口内灰度值为0的像素点个数越多，第个非零像素点与窗口内像素点的差异越大，因此将作为第个非零像素点与窗口内所有非零像素点的灰度值的均值的差异的系数，对差异进行放大。需要说明的是，正常区域的灰度分布式稳定且均匀的，但一旦产生缺陷，该区域的灰度波动就会增大，还需获取目标灰度级图像中每个非零像素点的灰度离散程度，用来表示每个非零像素点相对于周围像素点的灰度波动情况。在本发明实施例中，获取目标灰度级图像中每个非零像素点的灰度离散程度：其中为目标灰度级图像中第个非零像素点的灰度离散程度；为目标灰度级图像中第个非零像素点的窗口内非零像素点的个数；为目标灰度级图像中第个非零像素点的灰度值；为目标灰度级图像中第个非零像素点的窗口内第个像素点的灰度值。根据目标灰度级图像中每个非零像素点的灰度差异和灰度离散程度获取每个非零像素点的显著性：其中，为目标灰度级图像中第个非零像素点的显著性；为目标灰度级图像中第个非零像素点的灰度差异；为目标灰度级图像中第个非零像素点的灰度离散程度；为超参数，经验值为，在其他实施例中，实施人员可根据实际实施情况设置超参数的值；当第个非零像素点的灰度差异和灰度离散程度都越大时，第个非零像素点越显著。对目标灰度级图像中所有非零像素点的显著性进行线性归一化，得到每个非零像素点的归一化显著性。需要说明的是，非零像素点的归一化显著性越大，非零像素点表现出的特征越明显，说明该非零像素点相对于其相邻区域越突出，该非零像素点为裂缝缺陷像素点的概率越大，同时由于裂缝缺陷像素点较为聚集，所以显著性较大的非零像素点越聚集，对应的目标灰度级图像中存在裂缝缺陷的概率越大，后续对目标灰度级图像进行增强的程度越大。由于裂缝缺陷的灰度分布较为集中，因此本发明实施例通过目标灰度级图像全局以及局部的计算确定目标灰度级图像中包含裂缝缺陷的概率。在本发明实施例中，对目标灰度级图像中所有非零像素点的归一化显著性进行统计，将值相同的归一化显著性视作一种归一化显著性，获取每种归一化显著性的频率。获取目标灰度级图像中存在裂缝缺陷的概率：其中，为目标灰度级图像中存在裂缝缺陷的概率；为目标灰度级图像的第种归一化显著性的频率；为目标灰度级图像中归一化显著性的种类数；当种归一化显著性的频率均相同时，达到最大，为，因此乘以用作对进行归一化；当不同的归一化显著性的频率相差越小，目标灰度级图像中像素点显著程度的随机性越大，目标灰度级图像中存在裂缝缺陷的概率越大。需要说明的是，裂缝缺陷在的分布较为集中，若非零像素点的显著性较高但是分布较为离散，则该非零像素点可能是噪声点，因此可通过所有高显著性的非零像素点之间的距离关系获取目标灰度级图像中所有非零像素点的位置离散程度，根据位置离散程度对目标灰度级图像中存在裂缝缺陷的概率进行修正，排除噪声点对裂缝缺陷概率的影响。在本发明实施例中，获取目标灰度级图像中所有非零像素点的归一化显著性的均值，作为显著性阈值。若目标灰度级图像中非零像素点的归一化显著性大于显著性阈值，则将该非零像素点作为标记像素点。获取目标灰度级图像中的所有标记像素点，对所有标记像素点进行连通性分析，获取所有标记像素点形成的所有连通域，记为标记连通域。获取一个标记连通域的连通域边缘上每个像素点到另一个标记连通域的连通域边缘上每个像素点的距离，将其中最短距离作为此两个标记连通域之间的最短距离。根据标记连通域获取目标灰度级图像中所有非零像素点的位置离散程度：其中，为目标灰度级图像中所有非零像素点的位置离散程度；为目标灰度级图像中第个标记连通域的中心与第个标记连通域的中心之间的距离，简称为目标灰度级图像中第个标记连通域与第个标记连通域的中心距离；为目标灰度级图像中第个标记连通域与第个标记连通域的最短距离；为目标灰度级图像中标记连通域的个数；当最短距离与中心距离的比值越小时，说明此两个标记连通域中包含的非零像素点个数越少，且分布离散，此两个标记连通域大概率都为噪声；当最短距离与中心距离的比值越大时，说明此两个标记连通域中包含的非零像素点个数较多，同时分布较为聚集，此两个标记连通域大概率为裂缝缺陷；为所有标记连通域两两之间的最短距离与中心距离的比值的均值，当该均值越大时，目标灰度级图像中所有非零像素点的位置离散程度越大，目标灰度级图像中越不可能存在裂缝，当该均值越小时，目标灰度级图像中所有非零像素点的位置离散程度越小，目标灰度级图像中越可能存在裂缝。需要说明的是，得到目标灰度级图像中所有非零像素点的位置离散程度后，由于显著性较高的非零像素点形成的连通域可以反映目标灰度级图像局部非零像素点的位置分布情况，当非零像素点的位置离散程度越大，该目标灰度级图像的噪声区域相对较多，显著性高的非零像素点形成裂缝缺陷的概率就越低，因此本发明实施例以位置离散程度确定目标灰度级图像中存在裂缝缺陷的概率的修正权重，对目标灰度级图像中存在裂缝缺陷的概率进行修正。在本发明实施例中，根据目标灰度级图像中所有非零像素点的位置离散程度对目标灰度级图像中存在裂缝缺陷的概率进行修正，得到目标灰度级图像中存在裂缝缺陷的修正概率：其中，目标灰度级图像中存在裂缝缺陷的修正概率；为目标灰度级图像中存在裂缝缺陷的概率；为目标灰度级图像中所有非零像素点的位置离散程度；为双曲正切函数；结合目标灰度级图像中所有非零像素点的位置离散程度对目标灰度级图像中存在裂缝缺陷的概率进行修正，当位置离散程度越大，目标灰度级图像中的标记连通域更可能为噪声，根据位置离散程度降低目标灰度级图像中存在裂缝缺陷的概率，一定程度上减少了噪声点的影响。至此，获取了目标灰度级图像中存在裂缝缺陷的修正概率。同理获取每个灰度级图像中存在裂缝缺陷的修正概率。S004．对每个灰度级图像进行自适应增强，得到增强图像。需要说明的是，伽马变换是一种常用的图像增强方法，目前通常通过人为设置伽马变换的伽马参数，若伽马参数设置不当，会导致图像增强效果差，甚至达不到增强的效果。由于伽马变换函数参数的设置与图像的亮暗程度相关，因此本发明实施例根据每个灰度级图像中存在裂缝缺陷的修正概率，为每个灰度级图像设置伽马参数。在得到每个灰度级图像对应的裂缝缺陷的修正概率后，需要根据伽马变换增加缺陷区域与周围区域的对比度，一般来说，当伽马参数大于1时，图像的暗部对比度会增强，图像会变暗；当伽马参数小于1时，图像的亮部对比度会增强，图像会变亮。由于缺陷区域形成的灰度值相对正常区域偏低，所以缺陷概率越大，则伽马参数应越大且大于1。由于伽马参数的特殊性，本发明实施例根据得到的裂缝缺陷的修正概率自适应调整伽马变换的参数，若缺陷概率为0，则伽马参数设为1，此时的灰度级图像不需要进行调整，但是当裂缝缺陷的修正概率逐渐增加时，则需要对灰度级图像进行不同程度的调整，裂缝缺陷的修正概率越大，调整的越多。在本发明实施例中，获取目标灰度级图像的伽马参数：其中，为目标灰度级图像的伽马参数；为目标灰度级图像中存在裂缝缺陷的修正概率；为以自然常数为底的对数函数；当目标灰度级图像中存在裂缝缺陷的修正概率越大，目标灰度级图像的伽马参数越大。根据目标灰度级图像的伽马参数，对目标灰度级图像进行伽马变换增强，得到目标灰度级图像的增强图像。同理，获取每个灰度级图像的增强图像。将所有灰度级图像的增强图像叠加，得到土工格室灰度图的增强图像。至此，获取了土工格室灰度图的增强图像。S005．根据增强图像进行土工格室质量检测。对土工格室灰度图的增强图像进行边缘检测，获取准确的裂缝缺陷区域，根据裂缝缺陷的程度，对土工格室的质量进行分级，确定对其淘汰或修复的价值，确保企业的最大收益。通过以上步骤，完成了土工格室质量的智能检测。本发明实施例通过对土工格室灰度图进行灰度分级，获取多个灰度级图像，根据灰度级图像中非零像素点的灰度差异和灰度离散程度获取归一化显著性，进而得到获取每个灰度级图像中存在裂缝缺陷的概率，根据归一化显著性获取每个灰度级图像的位置离散程度，对存在裂缝缺陷的概率进行修正，一定程度上消除了噪声点对裂缝缺陷概率的影响，根据修正结果获取每个灰度级图像的伽马参数，对每个灰度级图像进行增强，根据增强图像进行土工格室质量检测。本发明对不同灰度级图像进行自适应增强，避免了过增强和欠增强的问题，增强效果更好，使得土工格室质量检测更加准确。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
