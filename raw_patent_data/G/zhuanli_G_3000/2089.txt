标题title
一种订单业务异常监控方法及系统
摘要abst
本发明涉及数据处理技术领域，提出了一种订单业务异常监控方法及系统，包括：获取订单业务的商品名称、订单价格、订单日期和订单商品数量，获取订单业务的产品销量散点图和产品价格散点图；根据产品价格散点图获取产品价格拟合值，进而获取订单业务的产品基础价格，根据产品销量散点图获取月销售量拟合值，获取销量影响浮动率；获取订单业务对应的订单折扣影响浮动率；获取订单校正价格，根据订单业务对应的订单校正价格和订单价格对订单业务进行异常监控。本发明解决订单业务异常监控效果并不理想的问题。
权利要求书clms
1.一种订单业务异常监控方法，其特征在于，该方法包括以下步骤：获取订单业务的商品名称、订单价格、订单日期和订单商品数量，设置订单业务的所有商品名称的底价，获取订单业务的产品销量散点图和产品价格散点图；根据产品价格散点图获取产品价格拟合值，进而获取订单业务的产品基础价格，根据产品销量散点图获取月销售量拟合值，根据订单业务对应的订单商品数量、订单价格、订单业务的订单日期所在月份的月销售量拟合值和产品价格拟合值获取销量影响浮动率；获取订单业务的商品名称的对标竞品的折扣率和折扣率的信息熵，进而获取订单业务对应的订单折扣影响浮动率；根据单业务对应的产品基础价格、销量影响浮动率和订单折扣影响浮动率获取订单校正价格，根据订单业务对应的订单校正价格和订单价格对订单业务进行异常监控。2.根据权利要求1所述的一种订单业务异常监控方法，其特征在于，所述获取订单业务的产品销量散点图和产品价格散点图的获取方法为：从企业的订单业务系统中获取企业近三年内每个月对商品名称对应的商品的销售量，建立产品销量散点图，产品销量散点图的横轴为月份，纵轴为月份对应的当月销售量，销量散点图内每个散点对应企业近三年内每个月份对应的销售量；从企业的订单业务系统中获取企业近三年内每个月对商品名称对应的商品的平均价格，建立产品价格散点图，产品价格散点图的横轴为月份，纵轴为月份对应的商品平均价格，价格散点图内每个散点对应企业近三年内每个月份对应的销售量。3.根据权利要求1所述的一种订单业务异常监控方法，其特征在于，所述根据产品价格散点图获取产品价格拟合值，进而获取订单业务的产品基础价格的获取方法为：将产品价格散点图中的散点与曲线进行拟合，获取第一拟合函数，根据第一拟合函数获取每个月份对应的产品价格拟合值；将订单业务对应的订单日期所在月份对应的产品价格拟合值作为订单业务的产品基础价格。4.根据权利要求1所述的一种订单业务异常监控方法，其特征在于，所述根据产品销量散点图获取月销售量拟合值的获取方法为：将产品销量散点图中的散点与曲线进行拟合，获取第二拟合函数，根据第二拟合函数获取每个月份对应的月销售量拟合值。5.根据权利要求1所述的一种订单业务异常监控方法，其特征在于，所述根据订单业务对应的订单商品数量、订单价格、订单业务的订单日期所在月份的月销售量拟合值和产品价格拟合值获取销量影响浮动率的方法为：将订单业务对应的订单商品数量与订单业务的订单日期所在月份的月销售量拟合值的比值记为第一比值；将订单业务的订单日期所在月份的产品价格拟合值与订单业务对应的订单价格的比值记为第二比值；将第一比值与第二比值的乘积的归一化值记为第一归一化值；将第一值域调整系数与第一归一化值的乘积记为订单业务对应的销量影响浮动率。6.根据权利要求1所述的一种订单业务异常监控方法，其特征在于，所述获取订单业务的商品名称的对标竞品的折扣率和折扣率的信息熵的方法为：提取企业的订单业务的商品名称在市面上的所有对标竞品；从订单业务的销售平台获取对标竞品在当月的商品折扣价格和商品标价；将对标竞品在当月的商品折扣价格和商品标价的比值记为对标竞品的折扣率；获取订单业务对应的订单商品在市面上的所有对标竞品的折扣率的信息熵。7.根据权利要求1所述的一种订单业务异常监控方法，其特征在于，所述进而获取订单业务对应的订单折扣影响浮动率的方法为：将订单业务的商品名称在市面上所有对标竞品的折扣率的均值与订单业务对应的订单商品在市面上的所有对标竞品的折扣率的信息熵的比值记为第三比值；将第三比值的归一化值与第三值域调整系数的乘积记为第一乘积；将第二值域调整系数与第一乘积的差值记为订单业务对应的订单折扣影响浮动率。8.根据权利要求1所述的一种订单业务异常监控方法，其特征在于，所述根据单业务对应的产品基础价格、销量影响浮动率和订单折扣影响浮动率获取订单校正价格的方法为：将第二值域调整系数与订单业务对应的销量影响浮动率记为第一和值；将订单业务对应的产品基础价格、订单折扣影响浮动率和第一和值的乘积记为订单业务对应的订单校正价格；比较订单业务对应的订单校正价格与订单业务的商品名称的底价的数值大小；当订单业务对应的订单校正价格小于订单业务的商品名称的底价时，将订单业务对应的订单校正价格赋值为订单业务的商品名称的底价；当订单业务对应的订单校正价格大于等于订单业务的商品名称的底价时，保持订单业务对应的订单校正价格不变。9.根据权利要求1所述的一种订单业务异常监控方法，其特征在于，所述根据订单业务对应的订单校正价格和订单价格对订单业务进行异常监控的方法为：将订单业务对应的订单校正价格与订单业务的订单价格的差值的绝对值记为订单业务的价格差异；对所有订单业务的价格差异进行异常检测，获取订单业务的局部离群因子；当订单业务的局部离群因子大于等于第一判定阈值时，认为订单业务为异常订单业务；当订单业务的局部离群因子小于第一判定阈值时，认为订单业务为正常订单业务。10.一种订单业务异常监控系统，包括存储器、处理器以及存储在所述存储器中并在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1-9任意一项所述方法的步骤。
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及一种订单业务异常监控方法及系统。背景技术在企业生产经营和发展的过程中，对订单业务异常进行监控非常重要。对订单业务异常进行监控，可以帮助及时发现和解决异常订单，其中，异常订单包含订单价格错误、付款价格错误等问题。同时，对订单业务异常进行监控，可以促进企业及时处理异常订单，保障企业和客户的利益，提升客户的满意度和企业的品牌形象。为了获取更多的销售利润，企业的同一种类产品在面对不同客户进行销售时，产品的价格会有所不同，即黏性越高、购买量越大的客户往往购买产品的价格越低。所以，企业相同产品的不同订单的价格往往存在差异，这就为订单业务管理识别订单业务的异常带来了不便。在对企业的订单业务价格进行异常监控时，现有的异常检测算法可以根据相同产品的所有订单业务价格的差异识别出异常价格。但是，识别异常价格的过程仅仅依靠于订单价格之间的差异，没有考虑由于多种原因导致的不同订单业务对应的商品的价格差异，所以，现有的订单业务异常监控效果并不理想。发明内容本发明提供一种订单业务异常监控方法及系统，以解决订单业务异常监控效果并不理想的问题，所采用的技术方案具体如下：第一方面，本发明一个实施例提供了一种订单业务异常监控方法，该方法包括以下步骤：获取订单业务的商品名称、订单价格、订单日期和订单商品数量，设置订单业务的所有商品名称的底价，获取订单业务的产品销量散点图和产品价格散点图；根据产品价格散点图获取产品价格拟合值，进而获取订单业务的产品基础价格，根据产品销量散点图获取月销售量拟合值，根据订单业务对应的订单商品数量、订单价格、订单业务的订单日期所在月份的月销售量拟合值和产品价格拟合值获取销量影响浮动率；获取订单业务的商品名称的对标竞品的折扣率和折扣率的信息熵，进而获取订单业务对应的订单折扣影响浮动率；根据单业务对应的产品基础价格、销量影响浮动率和订单折扣影响浮动率获取订单校正价格，根据订单业务对应的订单校正价格和订单价格对订单业务进行异常监控。进一步，所述获取订单业务的产品销量散点图和产品价格散点图的获取方法为：从企业的订单业务系统中获取企业近三年内每个月对商品名称对应的商品的销售量，建立产品销量散点图，产品销量散点图的横轴为月份，纵轴为月份对应的当月销售量，销量散点图内每个散点对应企业近三年内每个月份对应的销售量；从企业的订单业务系统中获取企业近三年内每个月对商品名称对应的商品的平均价格，建立产品价格散点图，产品价格散点图的横轴为月份，纵轴为月份对应的商品平均价格，价格散点图内每个散点对应企业近三年内每个月份对应的销售量。进一步，所述根据产品价格散点图获取产品价格拟合值，进而获取订单业务的产品基础价格的获取方法为：将产品价格散点图中的散点与曲线进行拟合，获取第一拟合函数，根据第一拟合函数获取每个月份对应的产品价格拟合值；将订单业务对应的订单日期所在月份对应的产品价格拟合值作为订单业务的产品基础价格。进一步，所述根据产品销量散点图获取月销售量拟合值的获取方法为：将产品销量散点图中的散点与曲线进行拟合，获取第二拟合函数，根据第二拟合函数获取每个月份对应的月销售量拟合值。进一步，所述根据订单业务对应的订单商品数量、订单价格、订单业务的订单日期所在月份的月销售量拟合值和产品价格拟合值获取销量影响浮动率的方法为：将订单业务对应的订单商品数量与订单业务的订单日期所在月份的月销售量拟合值的比值记为第一比值；将订单业务的订单日期所在月份的产品价格拟合值与订单业务对应的订单价格的比值记为第二比值；将第一比值与第二比值的乘积的归一化值记为第一归一化值；将第一值域调整系数与第一归一化值的乘积记为订单业务对应的销量影响浮动率。进一步，所述获取订单业务的商品名称的对标竞品的折扣率和折扣率的信息熵的方法为：提取企业的订单业务的商品名称在市面上的所有对标竞品；从订单业务的销售平台获取对标竞品在当月的商品折扣价格和商品标价；将对标竞品在当月的商品折扣价格和商品标价的比值记为对标竞品的折扣率；获取订单业务对应的订单商品在市面上的所有对标竞品的折扣率的信息熵。进一步，所述进而获取订单业务对应的订单折扣影响浮动率的方法为：将订单业务的商品名称在市面上所有对标竞品的折扣率的均值与订单业务对应的订单商品在市面上的所有对标竞品的折扣率的信息熵的比值记为第三比值；将第三比值的归一化值与第三值域调整系数的乘积记为第一乘积；将第二值域调整系数与第一乘积的差值记为订单业务对应的订单折扣影响浮动率。进一步，所述根据单业务对应的产品基础价格、销量影响浮动率和订单折扣影响浮动率获取订单校正价格的方法为：将第二值域调整系数与订单业务对应的销量影响浮动率记为第一和值；将订单业务对应的产品基础价格、订单折扣影响浮动率和第一和值的乘积记为订单业务对应的订单校正价格；比较订单业务对应的订单校正价格与订单业务的商品名称的底价的数值大小；当订单业务对应的订单校正价格小于订单业务的商品名称的底价时，将订单业务对应的订单校正价格赋值为订单业务的商品名称的底价；当订单业务对应的订单校正价格大于等于订单业务的商品名称的底价时，保持订单业务对应的订单校正价格不变。进一步，所述根据订单业务对应的订单校正价格和订单价格对订单业务进行异常监控的方法为：将订单业务对应的订单校正价格与订单业务的订单价格的差值的绝对值记为订单业务的价格差异；对所有订单业务的价格差异进行异常检测，获取订单业务的局部离群因子；当订单业务的局部离群因子大于等于第一判定阈值时，认为订单业务为异常订单业务；当订单业务的局部离群因子小于第一判定阈值时，认为订单业务为正常订单业务。第二方面，本发明实施例还提供了一种订单业务异常监控系统，包括存储器、处理器以及存储在所述存储器中并在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述任意一项所述方法的步骤。本发明的有益效果是：本发明根据订单业务中商品的价格和订单业务达成的时间获取商品在月份对应的产品价格拟合值，根据产品价格拟合值获取订单业务的产品基础价格，提供了更为精确的产品价格拟合值的评价值，为后续订单业务异常监控奠定准确的计算基础；其次，根据订单业务伴随时间的波动情况获取订单业务对应的销量影响浮动率，根据订单业务的销售平台的销售折扣活动的折扣力度获取订单业务对应的订单折扣影响浮动率，进而根据单业务对应的产品基础价格、销量影响浮动率和订单折扣影响浮动率获取订单校正价格，订单校正价格为考虑了订单价格出现波动的客观因素后对产品基础价格的校正值，为订单业务按照客观因素的实际情况对应的价格，为订单业务异常监控提供订单业务的价格依据；最后，根据订单业务对应的订单校正价格和订单价格对订单业务进行异常监控，解决仅根据订单价格之间的差异导致订单业务异常监控效果不佳的问题，使订单业务异常监控更为准确。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明一个实施例所提供的一种订单业务异常监控方法的流程示意图；图2为销量散点图示意图；图3为价格散点图示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。请参阅图1，其示出了本发明一个实施例提供的一种订单业务异常监控方法流程图，该方法包括以下步骤：步骤S001，获取订单业务的商品名称、订单价格、订单日期和订单商品数量，设置订单业务的所有商品名称的底价，获取订单业务的产品销量散点图和产品价格散点图。从企业的订单业务系统中提取每一笔订单业务的商品名称，订单价格，订单日期，订单商品数量。对商品名称相同的订单业务进行分析。设置订单业务的所有商品名称的底价。订单业务的商品名称的底价为商品在售卖的过程中可设置的最低价格，作用为防止订单业务的商品价格低于商品成本价，导致订单业务的签订为企业带来损失。从企业的订单业务系统中获取企业近三年内每个月对商品名称对应的商品的销售量，建立产品销量散点图。产品销量散点图的横轴为月份，纵轴为月份对应的当月销售量，销量散点图内每个散点对应企业近三年内每个月份对应的销售量。所以，销量散点图横轴的每一个数值，都对应三个散点。销量散点图示意图如图2所示。从企业的订单业务系统中获取企业近三年内每个月对商品名称对应的商品的平均价格，建立产品价格散点图。产品价格散点图的横轴为月份，纵轴为月份对应的商品平均价格，价格散点图内每个散点对应企业近三年内每个月份对应的销售量。所以，价格散点图横轴的每一个数值，都对应三个散点。价格散点图示意图如图3所示。至此，获取订单业务的商品名称、订单价格、订单日期、订单商品数量、所有商品名称的底价、订单业务的产品销量散点图和产品价格散点图。步骤S002，根据产品价格散点图获取产品价格拟合值，进而获取订单业务的产品基础价格，根据产品销量散点图获取月销售量拟合值，根据订单业务对应的订单商品数量、订单价格、订单业务的订单日期所在月份的月销售量拟合值和产品价格拟合值获取销量影响浮动率。由于供求、季节等的影响，即使面对同一客户且订单业务的商品销售量相同，商品的价格也会出现不同。例如，应季的蔬菜水果价格较低，而反季的蔬菜水果价格较高；冬季的鸭绒衣、手套等保暖衣物的价格较高，而夏季价格较低。所以，为了对订单业务对应的商品的价格进行精确的监控，需要对商品本身的价格波动规律进行分析，获取订单业务对应的商品的基础价格。使用polyfit多项式拟合函数将产品价格散点图中的散点与曲线进行拟合，获取第一拟合函数，根据第一拟合函数获取每个月份对应的产品价格拟合值。其中，polyfit多项式拟合函数为公知技术，不再赘述。根据产品价格散点图中的散点获取的产品价格拟合值为结合企业近三年内每个月份对应的商品平均价格获取产品价格拟合值，提供了更为精确的订单业务对应的产品价格拟合值。将订单业务对应的订单日期所在月份对应的产品价格拟合值作为订单业务的产品基础价格。至此，获取订单业务的产品基础价格。商品的销售量也会对订单的价格产生影响。例如，应季的蔬菜水果在价格较低情况下销量较大，而反季的蔬菜水果在价格较高的情况下销量较小；冬季的鸭绒衣、手套等保暖衣物在价格较高的情况下销量较大，而夏季在价格较低的情况下销量较小。为了达成订单，会在订单业务对应的商品的基础价格的前提下，价格产生浮动。所以，为了对订单业务对应的商品的价格进行精确的监控，需要对商品的销量波动规律进行分析，获取订单业务对应的商品在销量影响下的影响程度。使用polyfit多项式拟合函数将产品销量散点图中的散点与曲线进行拟合，获取第二拟合函数，根据第二拟合函数获取每个月份对应的月销售量拟合值。其中，polyfit多项式拟合函数为公知技术，不再赘述。根据产品销量散点图中的散点获取的月销售量拟合值为结合企业近三年内每个月份对应的销售量获取的月销售量拟合值，提供了更为精确的每个月份对应的销量。当订单业务对应的订单商品数量占订单业务对应的日期所在月份对应的销量的比例越大时，订单业务对企业越为重要，为了促成订单的签订，订单业务的商品价格向下浮动的可能性越大。同时，当订单业务对应的产品价格拟合值越低时，订单业务的商品价格向下浮动的空间越小。以此为依据获取订单业务对应的销量影响浮动率。式中，为订单业务/＞对应的销量影响浮动率；/＞为订单业务/＞对应的订单商品数量；/＞为订单业务/＞的订单日期所在月份的月销售量拟合值；/＞为订单业务/＞对应的订单价格；/＞为订单业务/＞的订单日期所在月份的产品价格拟合值；/＞为第一值域调整系数，经验值为0.1；/＞为归一化函数，作用为取括号内的线性归一化值。第一值域调整系数的作用为调整销量影响浮动率的取值范围，实施者可根据需要选取具体取值。当订单业务对应的订单商品数量越大、订单业务的订单日期所在月份的月销售量拟合值越小、订单业务对应的订单价格越小、订单业务的订单日期所在月份的产品价格拟合值越大时，订单业务对应的销量影响浮动率越大，即订单业务对应的商品被销量影响的程度越大，订单业务对应的商品在销量影响下的校正价格越大，订单业务对应的订单价格越高。至此，获取订单业务对应的销量影响浮动率。步骤S003，获取订单业务的商品名称的对标竞品的折扣率和折扣率的信息熵，进而获取订单业务对应的订单折扣影响浮动率。产品基础价格受到销量影响浮动率的影响后得到的产品价格并不是订单业务的订单价格，订单业务的销售平台的销售折扣活动也会影响到产品基础价格受到销量影响浮动率的影响后得到的产品价格。其中，订单业务的销售平台的销售折扣活动包括女王节、618年中大促、双十一、双十二等。这些销售折扣活动的时间和折扣力度不同，所以，需要额外对折扣活动的折扣力度进行评价。为了方便评价，将折扣活动划分至折扣活动的月份，按月份对折扣活动的折扣力度进行评价。提取企业的订单业务的商品名称在市面上的所有对标竞品。从订单业务的销售平台获取对标竞品在当月的商品折扣价格和商品标价，将对标竞品在当月的商品折扣价格和商品标价的比值记为对标竞品的折扣率。获取订单业务对应的订单商品在市面上的所有对标竞品的折扣率的信息熵。根据订单业务的商品名称的对标竞品的折扣率和折扣率的信息熵，获取订单业务对应的订单折扣影响浮动率。式中，为订单业务/＞对应的订单折扣影响浮动率；/＞为订单业务/＞的商品名称在市面上的对标竞品的数量；/＞为订单业务/＞的商品名称在市面上第/＞个对标竞品的折扣率；/＞为订单业务/＞对应的订单商品在市面上的所有对标竞品的折扣率的信息熵；/＞为第二值域调整系数，经验值为1；/＞为归一化函数，作用为取括号内的线性归一化值；为第三值域调整系数，经验值为0.15。第二值域调整系数和第三值域调整系数的作用为调整订单折扣影响浮动率的取值范围，实施者可根据需要选取具体取值。当订单业务的商品名称在市面上所有对标竞品的折扣率越大、订单业务对应的订单商品在市面上的所有对标竞品的折扣率的信息熵越小时，则订单业务对应的订单折扣影响浮动率越小，即订单业务的销售平台的销售折扣活动对订单业务的商品基础价格受到销量影响浮动率的影响后得到的产品价格影响越大，订单业务对应的订单价格越低。获取订单业务对应的订单折扣影响浮动率。步骤S004，根据单业务对应的产品基础价格、销量影响浮动率和订单折扣影响浮动率获取订单校正价格，根据订单业务对应的订单校正价格和订单价格对订单业务进行异常监控。式中，为订单业务/＞对应的订单校正价格；/＞为订单业务/＞对应的产品基础价格；/＞为订单业务/＞对应的销量影响浮动率；/＞为订单业务/＞对应的订单折扣影响浮动率；/＞为第二值域调整系数，经验值为1。当订单业务的产品基础价格、销量影响浮动率和订单折扣影响浮动率越大时，订单校正价格越大，即订单业务对应的订单价格应越大。比较订单业务对应的订单校正价格与订单业务的商品名称的底价的数值大小，当订单业务对应的订单校正价格小于订单业务的商品名称的底价时，将订单业务对应的订单校正价格赋值为订单业务的商品名称的底价；当订单业务对应的订单校正价格大于等于订单业务的商品名称的底价时，保持订单业务对应的订单校正价格不变。至此，获取每个订单业务对应的订单校正价格。将订单业务对应的订单校正价格与订单业务的订单价格的差值的绝对值记为订单业务的价格差异。对所有订单业务的价格差异使用LOF异常检测算法获取订单业务的局部离群因子。当订单业务的局部离群因子大于等于第一判定阈值时，认为订单业务为异常订单业务；当订单业务的局部离群因子小于第一判定阈值时，认为订单业务为正常订单业务。其中，第一判定阈值的经验值为1。至此，完成对订单业务的异常监控。基于与上述方法相同的发明构思，本发明实施例还提供了一种订单业务异常监控系统，包括存储器、处理器以及存储在所述存储器中并在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述一种订单业务异常监控方法中任意一项所述方法的步骤。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
