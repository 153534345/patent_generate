标题title
基于图像处理的塑料管材质量检测方法
摘要abst
本发明涉及图像数据处理技术领域，具体涉及基于图像处理的塑料管材质量检测方法，该方法通过对塑料管材表面图像局部邻域范围内的灰度变化表征局部差异指数，通过预设邻域窗口中的局部差异指数变化区域表征差异度渐变规律指数，通过差异度渐变规律指数的大小和分布情况得到塑料管材表面图像的裂缝开裂程度，通过裂缝开裂程度和差异度渐变规律指数以及局部差异指数表征每个像素点的裂缝特征值，通过裂缝特征值构建地形特征图像，最后对地形特征图像进行图像分割得到狭长连通域进行塑料管材的质量检测。本发明对构建的地形特征图像进行图像分割完成塑料管材的质量检测的方法，对塑料管材的质量检测效果更好。
权利要求书clms
1.基于图像处理的塑料管材质量检测方法，其特征在于，所述方法包括：获取塑料管材表面图像；根据所述塑料管材表面图像中每个像素点相邻局部区域的灰度值分布特征，得到每个像素点对应的局部差异指数；根据每个像素点预设邻域窗口中局部差异指数变化趋势，得到每个像素点的差异度渐变规律指数；根据差异度渐变规律指数获取像素点的连通域，根据连通域的分布特征得到所述塑料管材表面图像的裂缝开裂程度；根据所述裂缝开裂程度和每个像素点对应的差异度渐变规律指数，得到每个像素点对应的裂缝增益系数；根据所述局部差异指数和所述裂缝增益系数得到每个像素点的裂缝特征值；根据每个像素点的裂缝特征值构建地形特征图像，对所述地形特征图像进行图像分割得到裂缝区域内部图像，对所述裂缝区域内部图像进行区域生长得到狭长连通域，根据所述狭长连通域的大小对塑料管材进行质量检测。2.根据权利要求1所述的基于图像处理的塑料管材质量检测方法，其特征在于，所述局部差异指数的获取方法包括：计算每个像素点与其预设邻域范围内各个像素点之间的灰度值差异均值，将所述灰度值差异均值与预设比例系数的乘积向上取整，得到每个像素点的局部差异指数。3.根据权利要求1所述的基于图像处理的塑料管材质量检测方法，其特征在于，所述差异度渐变规律指数包括：在每个像素点对应的预设邻域窗口中，将预设方向下像素点的局部差异指数顺序排列，得到至少两个方向局部差异指数序列，以方向局部差异指数序列中的序号为自变量，以局部差异指数的大小为因变量，对方向局部差异指数序列进行曲线拟合得到方向局部差异指数序列曲线，将每条方向局部差异指数序列曲线对应极值点数量的均值作为对应方向下的差异度渐变规律指数；对所有不同预设方向下的所述差异度渐变规律指数进行加权求和，得到对应像素点对应的差异度渐变规律指数。4.根据权利要求1所述的基于图像处理的塑料管材质量检测方法，其特征在于，所述裂缝开裂程度的获取方法包括：将面积大于或等于预设第一阈值，且对应的差异度渐变规律指数大于或等于预设第二阈值的连通域作为参考连通域；根据所有参考连通域中像素点数量与塑料管材表面图像中像素点数量的比值，得到裂缝开裂程度。5.根据权利要求1所述的基于图像处理的塑料管材质量检测方法，其特征在于，所述裂缝增益系数的获取方法包括：将每个像素点对应的差异度渐变规律指数进行归一化，得到每个像素点对应的裂缝近似度；根据所述裂缝近似度和所述裂缝开裂程度得到裂缝增益系数，所述裂缝增益系数与所述裂缝近似度呈正相关，所述裂缝增益系数与所述裂缝开裂程度呈负相关。6.根据权利要求1所述的基于图像处理的塑料管材质量检测方法，其特征在于，所述裂缝特征值的获取方法包括：将所述局部差异指数和所述裂缝增益系数的乘积向上取整，得到每个像素点对应的裂缝特征值。7.根据权利要求1所述的基于图像处理的塑料管材质量检测方法，其特征在于，所述地形特征图像的获取方法包括：将每个像素点的裂缝特征值替代所述塑料管材表面图像中对应的像素值得到地形特征图像。8.根据权利要求1所述的基于图像处理的塑料管材质量检测方法，其特征在于，所述图像分割采用分水岭算法。
说明书desc
技术领域本发明涉及图像数据处理技术领域，具体涉及基于图像处理的塑料管材质量检测方法。背景技术塑料管材由于其性能优越、卫生、环保、低耗等特点，在地下水管、电线、光缆保护套和农业灌溉等领域应用广泛，但是塑料管材会受到环境等不可抗力因素影响出现开裂等质量问题，且塑料管材开裂会对正常的生活生产造成巨大的麻烦，甚至影响人们的生命安全。所以需要对塑料管材进行质量检测。由于人工检测方法效率低下且成本较高，并且对于不易被发现的塑料管材开裂情况的检测准确度较差，所以通常依据现有图像数据处理技术采用计算机视觉检测的方法实现对塑料管材的智能检测。现有的计算机视觉检测方法对塑料管材进行开裂检测，通常对塑料管材的梯度图像采用分水岭算法等图像分割算法进行图像分割，但是现有技术的图像分割算法对图像复杂度要求较高，在对塑料管材表面图像进行图像分割时容易出现过分割现象，造成裂缝的检测结果不够准确，使得对塑料管材的质量检测效果较差。发明内容为了解决现有技术对塑料管材的质量检测效果较差的技术问题，本发明的目的在于提供一种基于图像处理的塑料管材质量检测方法，所采用的技术方案具体如下：本发明提出了一种基于图像处理的塑料管材质量检测方法，所述方法包括：获取塑料管材表面图像；根据所述塑料管材表面图像中每个像素点相邻局部区域的灰度值分布特征，得到每个像素点对应的局部差异指数；根据每个像素点预设邻域窗口中局部差异指数变化趋势，得到每个像素点的差异度渐变规律指数；根据差异度渐变规律指数获取像素点的连通域，根据连通域的分布特征得到所述塑料管材表面图像的裂缝开裂程度；根据所述裂缝开裂程度和每个像素点对应的差异度渐变规律指数，得到每个像素点对应的裂缝增益系数；根据所述局部差异指数和所述裂缝增益系数得到每个像素点的裂缝特征值；根据每个像素点的裂缝特征值构建地形特征图像，对所述地形特征图像进行图像分割得到裂缝区域内部图像，对所述裂缝区域内部图像进行区域生长得到狭长连通域，根据所述狭长连通域的大小对塑料管材进行质量检测。进一步地，所述局部差异指数的获取方法包括：计算每个像素点与其预设邻域范围内各个像素点之间的灰度值差异均值，将所述灰度值差异均值与预设比例系数的乘积向上取整，得到每个像素点的局部差异指数。进一步地，所述差异度渐变规律指数包括：在每个像素点对应的预设邻域窗口中，将预设方向下像素点的局部差异指数顺序排列，得到至少两个方向局部差异指数序列，以方向局部差异指数序列中的序号为自变量，以局部差异指数的大小为因变量，对方向局部差异指数序列进行曲线拟合得到方向局部差异指数序列曲线，将每条方向局部差异指数序列曲线对应极值点数量的均值作为对应方向下的差异度渐变规律指数；对所有不同预设方向下的所述差异度渐变规律指数进行加权求和，得到对应像素点对应的差异度渐变规律指数。进一步地，所述裂缝开裂程度的获取方法包括：将面积大于或等于预设第一阈值，且对应的差异度渐变规律指数大于或等于预设第二阈值的连通域作为参考连通域；根据所有参考连通域中像素点数量与塑料管材表面图像中像素点数量的比值，得到裂缝开裂程度。进一步地，所述裂缝增益系数的获取方法包括：将每个像素点对应的差异度渐变规律指数进行归一化，得到每个像素点对应的裂缝近似度；根据所述裂缝近似度和所述裂缝开裂程度得到裂缝增益系数，所述裂缝增益系数与所述裂缝近似度呈正相关，所述裂缝增益系数与所述裂缝开裂程度呈负相关。进一步地，所述裂缝特征值的获取方法包括：将所述局部差异指数和所述裂缝增益系数的乘积向上取整，得到每个像素点对应的裂缝特征值。进一步地，所述地形特征图像的获取方法包括：将每个像素点的裂缝特征值替代所述塑料管材表面图像中对应的像素值得到地形特征图像。进一步地，所述图像分割采用分水岭算法。本发明具有如下有益效果：考虑到塑料管材表面出现开裂情况时，对应的开裂区域的边界上灰度值差异较大且灰度值分布较为复杂的特征，本发明实施例结合塑料管材表面图像中局部区域的灰度值分布特征得到每个像素点的局部差异指数，通过局部差异指数表征灰度值差异情况；根据局部差异指数的变化趋势得到每个像素点对应的差异度渐变规律指数，进一步通过差异度渐变规律指数得到裂缝增益系数以表征每个像素点局部区域内的纹理特征，通过裂缝增益系数表征灰度值分布的复杂度特征；结合局部差异指数和裂缝增益系数获得每个图像对应的裂缝特征值，通过裂缝特征值构建地形特征图像，使得裂缝区域对应的图像得到增强，使得对图像进行分割时不易出现过分割的现象，对裂缝的检测结果更加准确，提高对塑料管材的质量检测效果。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例所提供的一种基于图像处理的塑料管材质量检测方法流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种基于图像处理的塑料管材质量检测方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种基于图像处理的塑料管材质量检测方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种基于图像处理的塑料管材质量检测方法流程图，该方法包括：步骤S1：获取塑料管材表面图像。本发明旨在提供一种基于图像处理的塑料管材质量检测方法，用于对塑料管材表面图像进行图像数据处理分割出裂缝区域，根据裂缝区域对塑料管材进行质量检测。考虑到塑料管材发生开裂时，对应的开裂区域边界上会呈现灰度差异较大且纹理分布较为复杂的特点，本发明实施例根据该特点对塑料管材表面图像进行图像数据处理，得到裂缝区域特征增强后的地形特征图像，并对地形特征图像进行图像分割来进一步进行对塑料管材的质量检测。因此首先需要获取本发明实施例的图像数据处理对象，即获取塑料管材表面图像。在本发明实施例中，通过高精度工业相机采集塑料管材表面初始图像。考虑到由于外界干扰等因素产生的噪声会影响后续的图像处理过程，所以为了增强后续图像处理过程的准确性，对采集到塑料管材表面初始图像后进行预处理，得到塑料管材表面图像。预处理过程包括：将塑料管材表面初始图像灰度化后进行去噪。在本发明实施例中，采用非局部均值滤波对图像进行去噪。需要说明的是，实施者可根据具体实施环境通过其他图像采集设备采集塑料管材表面图像，但是需要保证所采集到的塑料管材表面初始图像能够转化为灰度图像；且实施者也可根据具体实施环境选择对图像的去噪方法，比如均值滤波、中值滤波等常规去噪方法；且非局部均值滤波、均值滤波、中值滤波等常规去噪方法为本领域技术人员所熟知的现有技术，在此不做进一步限定和赘述。需要说明的是，后续涉及的塑料管材表面图像均为预处理后的塑料管材表面初始图像，后续不再进一步赘述。步骤S2：根据塑料管材表面图像中每个像素点相邻局部区域的灰度值分布特征，得到每个像素点对应的局部差异指数；根据每个像素点预设邻域窗口中局部差异指数变化趋势，得到每个像素点的差异度渐变规律指数。由于当塑料管材表面出现开裂情况时，对应的开裂的裂缝区域不会像噪声点一样单独出现，而是在开裂处呈现一个黑色狭长区域，裂缝区域内部的灰度值较为均匀，但是裂缝区域通常与塑料管材表面呈现明显的灰度值差异，所以在裂缝区域和塑料管材表面的交界处通常会呈现较大的灰度值变化。因此可对塑料管材表面图像中局部区域的灰度值差异情况进行分析来初步表征开裂情况。本发明实施例根据塑料管材表面图像中每个像素点相邻局部区域的灰度值分布特征，得到每个像素点对应的局部差异指数。即根据每个像素点相邻局部区域内的灰度值的分布情况得到表征灰度值差异的局部差异指数。对应的靠近或者处于裂缝边缘上的像素点对应的局部差异指数较大，裂缝区域内部的像素点对应的局部差异指数较小。优选地，局部差异指数的获取方法包括：计算每个像素点与其预设邻域范围内各个像素点之间的灰度值差异均值，将灰度值差异均值与预设比例系数的乘积向上取整，得到每个像素点的局部差异指数。通过局部差异指数表征每个像素点局部区域内的灰度值差异特征，局部差异指数越大，对应的像素点与邻域范围内像素点的灰度值差异越大，说明对应的像素点越符合开裂区域边界上像素点的特征。特别地，由于裂缝区域内部的像素点的灰度值较为均匀，对应裂缝区域内的局部差异指数应当较小。因此通过局部差异指数能够初步表征裂缝区域的边界特征。由于塑料管材表面图像是大小有限的二维图像，因此在靠近图像边界或处于图像边界上的像素点相较于其他像素点，对应预设邻域范围内的像素点数量不同，因此通过求灰度值差异均值的方式能够避免预设邻域范围内像素点数量不同的影响，使得塑料管材表面图像中的所有像素点所求得的局部差异指数的量纲统一。而将灰度值差异均值与预设比例系数相乘的目的是防止数值过小影响向上取整的效果。在本发明实施例中，预设邻域范围设置为八邻域，预设比例系数设置为10。需要说明的是，实施者也可根据具体实施情况调整预设邻域范围和预设比例系数的大小，且在获取局部差异指数时，也可通过灰度值差异均值与预设比例系数的乘积向下区域整的方式获得局部差异指数，在此不做进一步限定和赘述。在本发明实施例中，像素点的局部差异指数的获取方法在公式上表现为：其中，为像素点的局部差异指数，为像素点的灰度值，为像素点的预设邻域范围内第个像素点的灰度值；为预设比例系数，为预设邻域范围的大小，本发明实施例中预设比例系数为10，预设邻域范围的大小为8；为预设邻域范围内像素点的序号，为向上取整函数。此外，在本发明的另一些实施例中，像素点的局部差异指数还可以使用向下取整的形式进行表征，例如：其中，为向下取整函数，其他参数的含义与本发明实施例中像素点的局部差异指数的获取方法对应的公式相同，在此不做进一步限定和赘述。考虑到当塑料管材表面出现较大的裂缝时，通常能够清楚的通过肉眼观察得到，且对应的塑料管材的质量一定较差，所以本发明实施例所针对的检测对象应为塑料管材表面出现较小或者肉眼不容易观察到的裂缝，即对应的裂缝的宽度通常很小。因此当在裂缝区域中获取一个能够包含裂缝两条边缘的窗口时，对应窗口内的灰度值由于裂缝边缘的存在，通常会出现较为复杂的变化特征。且裂缝会发生分裂的情况，即一条延伸的裂缝在分裂点分裂为两条以上裂缝，当所选取的窗口中心距离分裂点较近或处于分裂点时，对应的纹理变化特征会更加复杂，因此本发明实施例根据该特点，计算出每个像素点作为窗口中心时对应的纹理变化特征，从而进一步表征塑料管材表面的裂缝特征。本发明实施例根据每个像素点预设邻域窗口中局部差异指数变化趋势，得到每个像素点的差异度渐变规律指数。预设邻域窗口的大小需要根据裂缝宽度自适应选取。通过局部差异指数变化趋势分析预设邻域窗口中的纹理变化，通过差异度渐变规律指数表征纹理变化特征。优选地，差异度渐变规律指数包括：在每个像素点对应的预设邻域窗口中，将预设方向下像素点的局部差异指数顺序排列，得到至少两个方向局部差异指数序列，以方向局部差异指数序列中的序号为自变量，以局部差异指数的大小为因变量，对方向局部差异指数序列进行曲线拟合得到方向局部差异指数序列曲线，将每条方向局部差异指数序列曲线对应极值点数量的均值作为对应方向下的差异度渐变规律指数。在本发明实施例中，预设邻域窗口大小设置为15×15。由于裂缝的位置和方向在塑料管材表面图像中是不确定的，因此若需要根据窗口中的纹理变化表征裂缝的特征，需要从不同的角度进行分析。本发明实施例从预设邻域窗口的横向和纵向两个方向，通过局部差异指数的变化趋势对窗口中的纹理变化特征进行分析。需要说明的是，实施者也可根据实际情况选取除横向和纵向外的其他方向；且实施者可根据历史数据中裂缝的宽度具体进行预设邻域窗口大小的设置，在此不做进一步限定和赘述。考虑到在预设邻域窗口中，横向对应的每一行像素点和纵向对应的每一列像素点的数量是均匀分布的，且横向和纵向对应的方向互相垂直，使得对处于窗口不同位置和方向不同的裂缝都能进行完整的纹理变化特征的分析。当窗口中心位于裂缝区域时，通常会包含两条以上裂缝边缘，且裂缝边缘对应的局部差异指数较大，当裂缝的延伸方向与分析的方向不平行时，每一行或每一列的像素点对应的数值会在裂缝边缘区域对应的像素点处出现突变，使得在对应方向局部差异指数序列对应的拟合区域出现极值点的情况，由于对应的曲线是拟合得到的，所以对应方向局部差异指数序列中较小的数值波动不会体现在拟合曲线上，即在对应的拟合曲线中所有的极值点都是由于裂缝边缘产生的。例如，当预设邻域窗口中存在一条纵向延伸的裂缝时，若从横向角度分析，则会存在两条裂缝边缘，每一行的像素点在裂缝边缘处都会产生明显的局部差异指数变化，对应的拟合曲线会出现两个波峰和一个波谷，即对应三个极值点。需要说明的是，裂缝的延伸方向与分析的方向不平行是指：分析横向差异度渐变规律指数时，裂缝的延伸方向不与每一行的像素点平行；分析纵向差异度渐变规律指数时，裂缝的延伸方向不与每一列平行。对所有不同预设方向下的差异度渐变规律指数进行加权求和，得到对应像素点对应的差异度渐变规律指数。本发明实施例中不同预设方向下对应的差异度渐变规律指数的权重均相等且和为1。因为裂缝的位置和角度不能确定，所以单从一个方向进行差异度渐变规律指数的分析，无法检测出与分析方向平行的延伸方向对应的裂缝，造成所得到的差异度渐变规律指数对纹理变化特征的表征不够准确。在本发明实施例中，在得到横向差异度渐变规律指数和纵向差异度渐变规律指数的基础上进行加权求和，且横向差异度渐变规律指数和纵向差异度渐变规律指数越大，对应的差异度渐变规律指数越大，说明裂缝的特征越明显，且横向差异度渐变规律指数和纵向差异度渐变规律指数对应的权重均设置为0.5。需要说明的是，实施者可根据具体实施情况自行设置对应的权重的大小，在此不做进一步赘述。在本发明实施例中，像素点的差异度渐变规律指数的获取方法在公式上表现为：其中，为像素点的差异度渐变规律指数，为像素点的预设邻域窗口中第行像素点对应的横向局部差异指数序列曲线中极值点的数量，为像素点的预设邻域窗口中第列像素点对应的纵向局部差异指数序列曲线中极值点的数量，为像素点的横向差异度渐变规律指数，为像素点的横向差异度渐变规律指数的权重，为像素点的纵向差异度渐变规律指数，为像素点的纵向差异度渐变规律指数的权重，为像素点的预设邻域窗口中像素点的行数量和列数量，在本发明实施例中，对应预设邻域窗口的长度和宽度即15。在本发明实施例中，横向差异度渐变规律指数的权重和纵向差异度渐变规律指数的权重均设置为0.5。需要说明的是，除均值外，实施者也可通过其他方式表征横向差异度渐变规律指数和纵向差异度渐变规律指数，例如累加和，对应的公式表现为：需要说明的是，该公式中的参数与本发明实施例中像素点的差异度渐变规律指数的获取方法相同，在此不做进一步赘述。步骤S3：根据差异度渐变规律指数获取像素点的连通域，根据连通域的分布特征得到塑料管材表面图像的裂缝开裂程度；根据裂缝开裂程度和每个像素点对应的差异度渐变规律指数，得到每个像素点对应的裂缝增益系数；根据局部差异指数和裂缝增益系数得到每个像素点的裂缝特征值。至此，通过步骤S2得到塑料管材表面图像中每个像素点对应的局部差异指数和差异度渐变规律指数。由于裂缝区域的像素点对应的差异度渐变规律指数较大，且由于裂缝区域的像素点通常是集中分布的，所以根据差异度渐变规律指数可以将裂缝区域划分为不同的连通域，其对应裂缝区域的连通域通常比较大，所以若需要进一步表征图像中的裂缝特征，需要进一步对差异渐变规律度较大且面积较大的连通域进行分析。所以为了表征图像中的裂缝特征，本发明实施例根据差异度渐变规律指数获取像素点的连通域，根据连通域的分布特征得到塑料管材表面图像的裂缝开裂程度。优选地，裂缝开裂程度的获取方法包括：将面积大于或等于预设第一阈值，且对应的差异度渐变规律指数大于或等于预设第二阈值的连通域作为参考连通域；根据所有参考连通域中像素点数量与塑料管材表面图像中像素点数量的比值，得到裂缝开裂程度。在本发明实施例中，预设第一阈值设置为20，预设第二阈值设置为6，即将像素点数量大于或等于20且对应的差异度渐变规律指数大于或等于6的连通域作为参考连通域。需要说明的是，实施者可根据具体实施情况自行设定预设第一阈值和预设第二阈值的大小，在此不做进一步赘述。由于裂缝区域中像素点对应的差异度渐变规律指数通常相差不大，裂缝区域中像素点分布较为集中对应的连通域一般较大，且相较于其他区域即正常管材区域和背景区域，对应的差异度渐变规律指数更大，所以参考连通域对应的面积和差异度渐变规律指数均较大。由于瑕疵或者脏污对应面积较小且与裂缝区域所表现出的灰度差异特征相同，即对应的差异度渐变规律指数也较大，但是瑕疵或者脏污与裂缝区域相比形成的连通域一般较小，所以对于较大差异度渐变规律指数对应的较小连通域，其对应的区域往往是塑料管材表面的瑕疵或者脏污。而较小差异度渐变规律指数对应的较大连通域则通常对应背景区域或塑料管材正常区域。对于裂缝开裂程度，当参考连通域中像素点的数量越多，对应的裂缝区域越大，说明塑料管材表面图像中裂缝开裂程度越大。裂缝开裂程度的获取方法在公式上表现为：其中，为塑料管材表面图像对应的裂缝开裂程度，为所有参考连通域中的像素点数量，为塑料管材表面图像中像素点数量。即裂缝开裂程度为所有参考连通域在塑料管材表面图像中的面积占比。需要说明的是，由于塑料管材表面图像中像素点数量不可能为0，所以不存在分母为0的情况；且实施者也可通过其他方法表征裂缝开裂程度，例如直接将所有参考连通域中的像素点数量进行归一化的值作为裂缝开裂程度，对应公式上表现为：其中，为塑料管材表面图像对应的裂缝开裂程度，为所有参考连通域中像素点数量，为归一化函数，在此不做进一步赘述。由于裂缝开裂程度越小时，对应的裂缝区域图像越不明显，所以为了放大不明显的裂缝区域的特征，本发明实施例根据裂缝开裂程度和每个像素点对应的差异度渐变规律指数，得到每个像素点对应的裂缝增益系数。通过差异度渐变规律指数表征像素点对应的裂缝区域特征，通过引入裂缝开裂程度对不明显的裂缝区域特征进行放大，以达到通过裂缝增益系数放大像素点裂缝特征的目的。裂缝增益系数的获取方法包括：将每个像素点对应的差异度渐变规律指数进行归一化，得到每个像素点对应的裂缝近似度。当对应像素点的差异度渐变规律指数越大时，说明对应的像素点越可能处于裂缝区域，即对应像素点的裂缝近似度越大。根据裂缝近似度和裂缝开裂程度得到裂缝增益系数，裂缝增益系数与裂缝近似度呈正相关，裂缝增益系数与裂缝开裂程度呈负相关。考虑到裂缝开裂程度越大，对应的裂缝区域图像越明显，说明越不需要对裂缝特征进行放大，即对应的裂缝增益系数应当越小，所以裂缝增益系数与裂缝开裂程度呈负相关。而当对应像素点的裂缝近似度越大时，说明对应的像素点越可能处于裂缝区域，对应的裂缝增益指数就应当越大；而对应的裂缝近似度越小时，说明对应的像素点越可能处于背景区域或正常塑料管材区域，对应的裂缝增益指数就应当越小，因此裂缝增益系数与裂缝近似度呈正相关。在本发明实施例中，将裂缝近似度通过以自然常数e为底的指数函数进行映射得到映射值，将裂缝开裂程度与预设调节常数进行相加得到对应的和值，将映射值与和值的比值作为裂缝增益系数。需要说明的是，实施者也可通过其他方式根据裂缝近似度和裂缝开裂程度得到裂缝增益系数，但是需要保证裂缝增益系数与裂缝近似度呈正相关，裂缝增益系数与裂缝开裂程度呈负相关，在此不做进一步限定和赘述。在本发明实施例中，像素点的裂缝增益系数的获取方法在公式上表现为：其中，为像素点对应的裂缝增益系数，为像素点对应的差异度渐变规律指数，为像素点所处塑料管材表面图像对应的裂缝开裂程度；为预设调节参数，在本发明实施例中，预设调节参数设置为0.001；为以自然常数e为底的指数函数；为归一化函数，在本发明实施例中采用线性归一化；需要说明的是，实施者可根据具体实施环境自行设定预设调节参数的大小和归一化方式，且归一化为本领域技术人员所熟知的技术手段，在此不做进一步赘述。此外，实施者也可通过其他形式的公式表征像素点的裂缝增益系数，例如：其中，该公式中所有的参数与本发明实施例中像素点的裂缝增益系数的获取方法对应的公式相同，在此不做进一步赘述。至此，得到塑料管材表面图像中每个像素点的局部差异指数和裂缝增益系数。由于每个像素点的局部差异指数反映局部较小窗口的灰度变化，而裂缝边缘的灰度变化尤为明显，因此裂缝边缘上的像素点的局部差异指数较大，但是图像中也会不可避免的出现其他灰度变化较大的区域，例如塑料管材上的脏污或者塑料管材与背景区域的交界，所以若通过表征裂缝增益系数的对局部差异指数进行调整，在使得没有处于裂缝区域的像素点对应的局部差异指数边小的同时，还能放大处于裂缝区域像素点的局部差异指数。所以在本发明实施例中，根据局部差异指数和裂缝增益系数得到每个像素点的裂缝特征值。通过裂缝特征值表征每个像素点对应的最终裂缝特征。优选地，裂缝特征值的获取方法包括：将局部差异指数和裂缝增益系数的乘积向上取整，得到每个像素点对应的裂缝特征值。由于局部差异指数越大时，越具有裂缝区域的特征，对应的像素点越可能处于裂缝边缘上；同时裂缝增益系数越大时，对应的像素点越可能位于裂缝区域，因此通过局部差异指数和裂缝增益系数的乘积得到裂缝特征值越大，说明对应的像素点的裂缝区域特征越明显。因此表征每个像素点裂缝特征的裂缝特征值与裂缝增益系数呈正相关，与局部差异指数也呈正相关。而向上取整的目的是为了后续得到的地形特征图像中的裂缝区域更加清晰。需要说明的是，实施者也可通过其他方法根据局部差异指数和裂缝增益系数获取裂缝特征值，例如将局部差异指数和裂缝增益系数的乘积向下取整等，在此不做进一步赘述。在本发明实施例中，像素点的裂缝特征值的获取方法在公式上表现为：其中，为像素点的裂缝特征值，为像素点的局部差异指数，为像素点的裂缝增益系数，为向上取整函数。步骤S4：根据每个像素点的裂缝特征值构建地形特征图像，对地形特征图像进行图像分割得到裂缝区域内部图像，对裂缝区域内部图像进行区域生长得到狭长连通域，根据狭长连通域的大小对塑料管材进行质量检测。通过步骤S3得到每个像素点的裂缝特征值，且在整体的塑料管材表面图像中，裂缝区域像素点的裂缝特征值明显大于其他区域的像素点，且裂缝边缘区域的像素点对应的裂缝特征值最大，而裂缝区域中的像素点对应的裂缝特征值虽然相较于裂缝边缘区域较小，但是对应的裂缝特征值分布较为均匀。因此进一步可根据裂缝区域像素点的裂缝特征值明显大于其他区域的特点，筛选出塑料管材表面图像的裂缝区域。本发明实施例根据每个像素点的裂缝特征值构建地形特征图像，对地形特征图像进行图像分割得到裂缝区域内部图像，对裂缝区域内部图像进行区域生长得到狭长连通域。由于裂缝边缘像素点对应的裂缝特征值最大，因此在地形特征图中能够清晰的得到裂缝的边缘，虽然裂缝区域的裂缝特征值相对裂缝边缘较小，但是对应的裂缝特征值非常均匀，且根据裂缝狭长的形状特点，在获取通过区域生长获取连通域时，对应的狭长连通域即表征塑料管材表面图像的裂缝区域。需要说明的是，区域生长为本领域技术人员所熟知的现有技术，在此不做进一步限定和赘述。优选地，地形特征图像的获取方法包括：将每个像素点的裂缝特征值替代塑料管材表面图像中对应的像素值得到地形特征图像。即地形特征图像中将裂缝区域的特征进行放大，使得在进行图像分割时所得到裂缝区域内部图像中裂缝区域更加明显。优选地，本发明实施例中的图像分割采用分水岭算法。由于裂缝边缘像素点的局部差异指数大小并不均匀，导致对应的裂缝特征值也是不均匀的。但是由于裂缝边缘像素点的裂缝特征值较大，因此在进行图像分割时采用分水岭算法，将地形特征图像作为分水岭算法的输入，能够忽略裂缝边缘像素点裂缝特征值不均匀的特征，仅根据裂缝边缘像素点的裂缝特征值较大的特征筛选出所需要的连通域。需要说明的是，分水岭算法为本领域技术人员所熟知的现有技术，在此不做进一步限定和赘述。最后根据狭长连通域的大小对塑料管材进行质量检测。具体的，将狭长连通域的面积作为塑料管材开裂度，对应的塑料管材开裂度越大，说明塑料管材质量越差；对应的塑料管材开裂度越小或者越趋近于0，对应的塑料管材质量越好。综上所述，本发明通过对塑料管材表面图像局部邻域范围内的灰度变化表征局部差异指数，通过预设邻域窗口中的局部差异指数变化区域表征差异度渐变规律指数，通过差异度渐变规律指数的大小和分布情况得到塑料管材表面图像裂缝的开裂程度，通过裂缝开裂程度和差异度渐变规律指数以及局部差异指数表征每个像素点的裂缝特征值，通过裂缝特征值构建地形特征图像，最后对地形特征图像进行图像分割得到狭长连通域进行塑料管材的质量检测。本发明对构建的地形特征图像进行图像分割完成塑料管材的质量检测的方法，对塑料管材的质量检测效果更好。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。
