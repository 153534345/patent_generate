标题title
图像处理方法、装置、系统、存储介质以及电子设备
摘要abst
本申请公开了一种墨水屏的图像处理方法、装置、存储介质以及电子设备，其中所述方法通过获取待显示的帧画面数据以及墨水屏的参数信息，并根据所述参数信息判断所述墨水屏的类型，所述墨水屏的类型包括黑白墨水屏和彩色墨水屏；如果所述墨水屏为黑白墨水屏，则对所述帧画面数据进行处理得到第一中间图像数据，所述第一中间图像数据为灰度画面数据；如果所述墨水屏为彩色墨水屏，则对所述帧画面数据进行处理得到第二中间图像数据，所述第二中间图像数据为彩色格式图像数据。也即是本申请解决了现有技术的图像处理功能单一以及通用性低的问题。
权利要求书clms
1.一种墨水屏的图像处理方法，其特征在于，包括步骤：获取待显示的帧画面数据以及墨水屏的参数信息，并根据所述参数信息判断所述墨水屏的类型，所述墨水屏的类型包括黑白墨水屏和彩色墨水屏；如果所述墨水屏为黑白墨水屏，则对所述帧画面数据进行处理得到第一中间图像数据，所述第一中间图像数据为灰度画面数据；如果所述墨水屏为彩色墨水屏，则对所述帧画面数据进行处理得到第二中间图像数据，所述第二中间图像数据为彩色格式图像数据。2.根据权利要求1所述的图像处理方法，其特征在于，所述对所述帧画面数据进行处理得到第一中间图像数据，所述第一中间图像数据为灰度画面数据的步骤包括：判断所述帧画面数据是否是灰度画面数据，如果是，则所述第一中间图像数据包括所述帧画面数据的灰度画面数据；如果否，则对所述帧画面数据进行灰度处理得到所述第一中间图像数据，所述第一中间图像数据为灰度画面数据。3.根据权利要求1所述的图像处理方法，其特征在于，所述图像处理方法的步骤还包括：对所述第一中间图像数据进行抖动处理得到第一目标图像数据。4.根据权利要求1所述的图像处理方法，其特征在于，所述对所述帧画面数据进行处理得到第二中间图像数据，所述第二中间图像数据为彩色格式图像数据的步骤包括：判断所述帧画面数据是否是彩色格式图像数据，如果是，则所述第二目标图像数据包括所述帧画面数据的彩色格式图像数据；如果否，则对所述帧画面数据进行颜色转换处理得到所述第二中间图像数据，所述第二目标图像数据为彩色格式图像数据。5.根据权利要求1所述的图像处理方法，其特征在于，在所述如果所述墨水屏为彩色墨水屏，则对所述帧画面数据进行处理得到第二中间图像数据，所述第二中间图像数据为彩色格式图像数据的步骤之后，所述图像处理方法的步骤还包括：获取所述彩色墨水屏的显示模式信息，所述显示模式包括彩色显示模式和非彩色显示模式，判断所述显示模式信息是否为彩色显示模式，如果是，则输出所述第二中间图像数据；如果否，则对所述第二中间图像数据进行处理得到第三目标图像数据，所述第三目标图像数据为灰度画面数据，并输出所述第三目标图像数据。6.根据权利要求1或5所述的图像处理方法，其特征在于，所述第二中间图像数据包括每个像素的红色分量值、绿色分量值和蓝色分量值，所述图像处理方法的步骤还包括：根据预设子像素映射关系对所述第二中间图像数据中的每个所述像素的红色分量值、绿色分量值和蓝色分量值进行映射处理得到第二映射图像数据，所述第二映射图像数据包括每个像素的红色映射分量值、绿色映射分量值和蓝色映射分量值。7.根据权利要求6所述的图像处理方法，其特征在于，所述图像处理方法的步骤还包括：判断所述第二映射图像数据的像素的色阶值是否大于所述彩色墨水屏所能显示的最高色阶；如果是，则根据色阶转换规则对所述第二映射图像数据中的每个像素的红色映射分量值、绿色映射分量值和蓝色映射分量值进行降阶处理得到第二量化图像数据；如果否，所述第二量化图像数据为所述第二映射图像数据。8.根据权利要求7所述的图像处理方法，其特征在于，所述图像处理方法的步骤还包括：对所述第二量化图像数据进行抖动处理得到第二目标图像数据。9.一种墨水屏的图像处理装置，其特征在于包括：信号分配模块、灰阶图像处理模块和彩色图像处理模块，所述信号分配模块分别与所述灰阶图像处理模块、所述彩色图像处理模块相连接；所述信号分配模块用于获取帧画面数据以及墨水屏的参数信息，所述信号分配模块用于根据所述参数信息判断所述墨水屏的类型，所述墨水屏的类型包括黑白墨水屏和彩色墨水屏，所述信号分配模块用于根据所述墨水屏的类型将所述帧画面数据输送至所述灰阶图像处理模块和所述彩色图像处理模块中的一者；所述灰阶图像处理模块用于对所述帧画面数据进行处理得到第一中间图像数据，所述第一中间图像数据为灰度画面数据；所述彩色图像处理模块用于对所述帧画面数据进行处理得到第二中间图像数据，所述第二中间图像数据为彩色格式图像数据。10.根据权利要求9所述的图像处理装置，其特征在于，所述灰阶图像处理模块用于判断所述帧画面数据是否是灰度画面数据，如果是，则所述第一中间图像数据包括所述帧画面数据的灰度画面数据；如果否，则对所述帧画面数据进行灰度处理得到所述第一中间图像数据，所述第一中间图像数据为灰度画面数据。11.根据权利要求9所述的图像处理装置，其特征在于，所述图像处理装置还包括第一抖动模块，所述第一抖动模块与所述灰阶图像处理模块相连接；所述第一抖动模块用于获取所述第一中间图像数据，并对所述第一中间图像数据进行抖动处理得到第一目标图像数据。12.根据权利要求11所述的图像处理装置，其特征在于，所述图像处理装置还包括第一抖动控制模块，所述第一抖动控制模块与所述第一抖动模块相连接，所述第一抖动控制模块用于控制所述第一抖动模块并调节所述第一抖动模块的抖动处理参数。13.根据权利要求9所述的图像处理装置，其特征在于，所述彩色图像处理模块用于判断所述帧画面数据是否是彩色格式图像数据，如果是，则所述第二目标图像数据包括所述帧画面数据的彩色格式图像数据；如果否，则对所述帧画面数据进行颜色转换处理得到所述第二中间图像数据，所述第二目标图像数据为彩色格式图像数据。14.根据权利要求9所述的图像处理装置，其特征在于，所述图像处理装置还包括显示模式切换模块，所述显示模式切换模块与所述彩色图像处理模块相连接，所述显示模式切换模块用于获取所述彩色墨水屏的显示模式信息，所述显示模式包括彩色显示模式和非彩色显示模式，判断所述显示模式信息是否为彩色显示模式，如果是，则输出所述第二中间图像数据；如果否，则对所述第二中间图像数据进行处理得到第三目标图像数据，所述第三目标图像数据为灰度画面数据，并输出所述第三目标图像数据。15.根据权利要求9或14所述的图像处理装置，其特征在于，所述第二中间图像数据包括每个像素的红色分量值、绿色分量值和蓝色分量值，所述图像处理装置还包括像素映射模块，所述像素映射模块与所述彩色图像处理模块相连接；所述像素映射模块用于获取所述第二中间图像数据，根据预设子像素映射关系对所述第二中间图像数据中的每个所述像素的红色分量值、绿色分量值和蓝色分量值进行映射处理得到第二映射图像数据，所述第二映射图像数据包括每个像素的红色映射分量值、绿色映射分量值和蓝色映射分量值。16.根据权利要求15所述的图像处理装置，其特征在于，所述图像处理装置还包括像素量化模块，所述像素量化模块与所述像素映射模块相连接；所述像素量化模块用于获取所述第二映射图像数据，并判断所述第二映射图像数据的像素的色阶值是否大于所述彩色墨水屏所能显示的最高色阶，如果是，则根据色阶转换规则对所述第二映射图像数据中的每个像素的红色映射分量值、绿色映射分量值和蓝色映射分量值进行降阶处理得到第二量化图像数据；如果否，所述第二量化图像数据为所述第二映射图像数据。17.根据权利要求16所述的图像处理装置，其特征在于，所述图像处理装置还包括第二抖动模块，所述第二抖动模块与所述像素量化模块相连接；所述第二抖动模块用于获取所述第二量化图像数据，并对所述第二量化图像数据进行抖动处理得到第二目标图像数据。18.根据权利要求17所述的图像处理装置，其特征在于，所述图像处理装置还包括第二抖动控制模块，所述第二抖动控制模块与所述第二抖动模块相连接，所述第二抖动控制模块用于控制所述第二抖动模块并调节所述第二抖动模块的抖动处理参数。19.一种系统，其特征在于，包括：命令解析转换装置、视频转换装置、图像提取装置、以及如权利要求9至18任一所述的图像处理装置、画面缓存装置、波形数据装置、墨水屏驱动装置、电源控制装置和控制处理装置；所述视频转换装置、所述图像提取装置、所述图像处理装置、所述画面缓存装置、所述波形数据装置和所述墨水屏驱动装置依次相连接，所述控制处理装置分别与命令解析转换装置、所述图像提取装置、所述的图像处理装置、所述画面缓存装置、所述波形数据装置、所述墨水屏驱动装置、所述电源控制装置相连接，所述电源控制装置与所述墨水屏驱动装置相连接；所述视频转换装置用于接收视频信号，并将视频信号转换成设定视频格式的视频数据；所述图像提取装置用于接收所述视频数据，并从所述视频数据中提取得到待显示的帧画面数据；所述图像处理装置用于获取待显示的帧画面数据以及墨水屏的参数信息，并基于所述墨水屏的参数信息对所述帧画面数据进行处理得到处理后图像数据；所述画面缓存装置用于存储所述处理后图像数据；所述波形数据装置用于获取所述处理后图像数据，并根据所述处理后图像数据生成所述处理后图像数据的驱动波形序列；所述墨水屏驱动装置用于获取所述驱动波形序列，根据驱动波形序列得到屏幕驱动信号，并根据实时驱动波形序列控制实时电源控制装置输出驱动电压；所述控制处理装置用于对所述图像提取装置、所述的图像处理装置、所述画面缓存装置、所述波形数据装置、所述墨水屏驱动装置和所述电源控制装置进行控制；所述命令解析转换装置用于获取控制信号，将所述控制信号转换成控制命令后发送至所述控制处理装置。20.根据权利要求19所述的图像处理装置，其特征在于，所述波形数据装置包括波形数据生成模块、波形数据缓存模块以及动态调节模块，所述波形数据生成模块分别与所述画面缓存装置、波形数据缓存模块、动态调节模块相连接，所述波形数据缓存模块和所述墨水屏驱动装置相连接，所述；所述波形数据生成模块用于获取所述处理后图像数据并根据所述处理后图像数据生成所述处理后图像数据的驱动波形序列，并将所述驱动波形序列输送至所述波形数据缓存模块，所述墨水屏驱动装置从所述波形数据缓存模块获取所述驱动波形序列；所述动态调节模块用于获取墨水屏的设备信息和输入指令，并根据所述设备信息和所述输入指令确定所述墨水屏的目标刷新模式，并分析所述设备信息或所述输入指令确定所述墨水屏的优化类型，并将所述目标刷新模式和所述优化类型输送至所述波形数据生成模块；所述波形数据生成模块用于根据所述目标刷新模式和所述处理后图像数据匹配得到至少一个像素的第一驱动波形序列；所述波形数据生成模块用于使用与所述墨水屏的优化类型相对应的优化策略对至少一个像素的第一驱动波形序列进行处理，得到至少一个像素的第二驱动波形序列，所述波形数据生成模块将所述第二驱动波形序列输送至所述波形数据缓存模块。21.一种电子设备，其特征在于，包括：一个或多个处理器；存储器，用于存储一个或多个程序； 当所述一个或多个程序被所述一个或多个处理器执行，使得所述电子设备实现如权利要求1至8任一所述的图像处理方法。22.一种可读存储介质，其特征在于，所述可读存储介质上存储程序或指令，所述程序或指令被处理器执行如权利要求1至8任一所述的图像处理方法。
说明书desc
技术领域本申请实施例涉及显示技术领域，尤其涉及一种墨水屏的图像处理方法、装置、存储介质以及电子设备。背景技术墨水屏利用电泳技术实现接近传统纸张的显示效果，因此也被成为“电子纸”。墨水屏一般通过电子墨水进行画面显示，电子墨水通常会制成电子墨水薄膜的形式，电子墨水薄膜由大量微囊组成，微囊中设置有带不同电荷的色素颗粒。初始状态下，色素颗粒悬浮在微囊中，当施加一定方向的电场后，相应的色素颗粒被推到顶部，微囊就会显示不同的颜色，而不同颜色的微囊组成了各种文字和图案。现有墨水屏包括彩色墨水屏和黑白墨水屏，而彩色墨水屏主要包括两种类型，一种是在微囊中设有至少两种非黑白颜色的色素颗粒的墨水屏，如基于eink公司先进彩色电子纸 、输入/输出接口、网络接口和内存。存储器可能包括计算机可读介质中的非永久性存储器，随机存取存储器和/或非易失性内存等形式，如只读存储器或闪存。存储器是计算机可读介质的示例。计算机可读介质包括永久性和非永久性、可移动和非可移动媒体可以由任何方法或技术来实现信息存储。信息可以是计算机可读指令、数据结构、程序的模块或其他数据。计算机的存储介质的例子包括，但不限于相变内存、静态随机存取存储器、动态随机存取存储器、其他类型的随机存取存储器、只读存储器、电可擦除可编程只读存储器、快闪记忆体或其他内存技术、只读光盘只读存储器（CD-ROM)、数字多功能光盘或其他光学存储、磁盒式磁带，磁带磁磁盘存储或其他磁性存储设备或任何其他非传输介质，可用于存储可以被计算设备访问的信息。按照本文中的界定，计算机可读介质不包括暂存电脑可读媒体，如调制的数据信号和载波。还需要说明的是，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、商品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、商品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括要素的过程、方法、商品或者设备中还存在另外的相同要素。注意，上述仅为本发明的较佳实施例及所运用技术原理。本领域技术人员会理解，本发明不限于这里的特定实施例，对本领域技术人员来说能够进行各种明显的变化、重新调整和替代而不会脱离本发明的保护范围。因此，虽然通过以上实施例对本发明进行了较为详细的说明，但是本发明不仅仅限于以上实施例，在不脱离本发明构思的情况下，还可以包括更多其他等效实施例，而本发明的范围由所附的权利要求范围决定。
