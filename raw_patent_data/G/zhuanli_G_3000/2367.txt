标题title
请求处理方法、装置、电子设备和计算机可读介质
摘要abst
本公开的实施例公开了请求处理方法、装置、电子设备和计算机可读介质。该方法的一具体实施方式包括：响应于确定请求转发服务器在预设时间窗口内的总请求转发量大于等于预设流量阈值，执行以下第一处理步骤：根据主页面服务器和从页面服务器，构建虚拟页面服务器；通过请求转发服务器，将实时页面请求转发至虚拟页面服务器；响应于确定总请求转发量小于预设流量阈值，执行以下第二处理步骤：根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率；根据第一转发概率和第二转发概率，通过请求转发服务器将实时页面请求，转发至主页面服务器或从页面服务器。该实施方式与减少了请求阻塞的发生，以及服务器出现崩溃的问题。
权利要求书clms
1.一种请求处理方法，包括：响应于确定请求转发服务器在预设时间窗口内的总请求转发量大于等于预设流量阈值，执行以下第一处理步骤：根据主页面服务器和从页面服务器，构建虚拟页面服务器；通过所述请求转发服务器，将实时页面请求转发至所述虚拟页面服务器；响应于确定所述总请求转发量小于所述预设流量阈值，执行以下第二处理步骤：根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率，其中，所述第一转发概率为所述请求转发服务器将页面请求转发至所述主页面服务器的概率，所述第二转发概率为所述请求转发服务器将页面请求转发至所述从页面服务器的概率，所述第一实时访问量是所述主页面服务器的实时被访问量，所述第二实时访问量是所述从页面服务器的实时被访问量；根据所述第一转发概率和所述第二转发概率，通过所述请求转发服务器将所述实时页面请求，转发至所述主页面服务器或所述从页面服务器。2.根据权利要求1所述的方法，其中，所述根据主页面服务器和从页面服务器，构建虚拟页面服务器，包括：分别确定所述主页面服务器和所述从页面服务器的资源实时占用信息，以生成第一资源实时占用信息和第二资源实时占用信息；根据所述第一资源实时占用信息和所述主页面服务器对应的第一容灾比例，确定所述主页面服务器对应的待融合服务器资源信息，作为第一待融合服务器资源信息；根据所述第二资源实时占用信息和所述从页面服务器对应的第二容灾比例，确定所述从页面服务器对应的待融合服务器资源信息，作为第二待融合服务器资源信息；根据所述总请求转发量，进行服务器资源占用量预测，以生成服务器资源预测使用量信息；根据所述第一待融合服务器资源信息、所述第二待融合服务器资源信息和所述服务器资源预测使用量信息，确定待申请服务器资源信息；根据所述第一待融合服务器资源信息、所述第二待融合服务器资源信息和所述待申请服务器资源信息，构建所述虚拟页面服务器，其中，所述待申请服务器资源信息对应的服务器通过套接字的方式，与所述主页面服务器和所述从页面服务器进行服务器通讯。3.根据权利要求2所述的方法，其中，所述根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率，包括：根据所述第一资源实时占用信息、所述第二资源实时占用信息、所述第一实时访问量和所述第二实时访问量，确定资源占用均值；根据所述主页面服务器对应的可用服务器资源信息和所述资源占用均值，确定所述主页面服务器对应的第一访问量阈值；根据所述从页面服务器对应的可用服务器资源信息和所述资源占用均值，确定所述从页面服务器对应的第二访问量阈值；根据所述第一访问量阈值、所述第一实时访问量、所述第二访问量阈值和所述第二实时访问量，确定所述第一转发概率和所述第二转发概率。4.根据权利要求3所述的方法，其中，在所述通过所述请求转发服务器，将实时页面请求转发至所述虚拟页面服务器之后，所述方法还包括：响应于确定所述虚拟页面服务器宕机，向所述请求转发服务器发送虚拟服务器宕机回应信息；响应于所述请求转发服务器接收到所述虚拟服务器宕机回应信息，执行以下第三处理步骤：唤醒容灾页面服务器，其中，所述容灾页面服务器在非唤醒状态下定时与所述主页面服务器和所述从页面服务器进行数据同步；通过所述请求转发服务器，将所述实时页面请求转发至所述容灾页面服务器。5.根据权利要求4所述的方法，其中，在所述根据所述第一转发概率和所述第二转发概率，通过所述请求转发服务器将所述实时页面请求，转发至所述主页面服务器或所述从页面服务器之后，所述方法还包括：响应于确定所述主页面服务器宕机或所述第一实时访问量大于等于所述第一访问量阈值，向所述请求转发服务器发送第一请求重定向信息，其中，所述第一请求重定向信息对应的请求重定向地址为所述从页面服务器；响应于所述请求转发服务器接收到所述第一请求重定向信息，通过所述请求转发服务器，将所述实时页面请求转发所述从页面服务器；响应于确定所述从页面服务器宕机或所述第二实时访问量大于等于所述第二访问量阈值，向所述请求转发服务器发送第二请求重定向信息，其中，所述第二请求重定向信息对应的请求重定向地址为所述主页面服务器；响应于所述请求转发服务器接收到所述第二请求重定向信息，通过所述请求转发服务器，将所述实时页面请求转发所述主页面服务器。6.根据权利要求5所述的方法，其中，所述方法还包括：响应于确定所述总请求转发量大于等于所述预设流量阈值、且数据同步时间位于所述预设时间窗口内，根据所述虚拟页面服务器，对所述主页面服务器和所述从页面服务器进行差异数据同步；响应于确定所述总请求转发量大于等于所述预设流量阈值、且数据同步时间未位于所述预设时间窗口内，对所述主页面服务器和所述从页面服务器进行数据同步；响应于数据同步完成，通过所述主页面服务器或所述从页面服务器，对所述容灾页面服务器进行数据同步。7.根据权利要求6所述的方法，其中，所述方法还包括：对所述主页面服务器和所述从页面服务器进行服务器状态监测；响应于检测到所述主页面服务器和所述从页面服务器中存在宕机服务器，执行以下第四处理步骤：生成宕机服务器对应的基础数据快照；根据所述基础数据快照，确定所述主页面服务器和所述从页面服务器中非宕机服务器对应的增量数据快照；响应于确定所述宕机服务器恢复，根据所述基础数据快照和所述增量数据快照，对所述宕机服务器进行数据恢复。8.一种请求处理装置，包括：第一执行单元，被配置成响应于确定请求转发服务器在预设时间窗口内的总请求转发量大于等于预设流量阈值，执行以下第一处理步骤：根据主页面服务器和从页面服务器，构建虚拟页面服务器；通过所述请求转发服务器，将实时页面请求转发至所述虚拟页面服务器；第二执行单元，被配置成响应于确定所述总请求转发量小于所述预设流量阈值，执行以下第二处理步骤：根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率，其中，所述第一转发概率为所述请求转发服务器将页面请求转发至所述主页面服务器的概率，所述第二转发概率为所述请求转发服务器将页面请求转发至所述从页面服务器的概率，所述第一实时访问量是所述主页面服务器的实时被访问量，所述第二实时访问量是所述从页面服务器的实时被访问量；根据所述第一转发概率和所述第二转发概率，通过所述请求转发服务器将实时页面请求，转发至所述主页面服务器或所述从页面服务器。9.一种电子设备，包括：一个或多个处理器；存储装置，其上存储有一个或多个程序；当所述一个或多个程序被所述一个或多个处理器执行，使得所述一个或多个处理器实现如权利要求1至7中任一所述的方法。10.一种计算机可读介质，其上存储有计算机程序，其中，所述计算机程序被处理器执行时实现如权利要求1至7中任一所述的方法。
说明书desc
技术领域本公开的实施例涉及计算机技术领域，具体涉及请求处理方法、装置、电子设备和计算机可读介质。背景技术针对网页页面的渲染，通常是客户端根据服务器反馈的、针对页面请求的数据进行页面渲染。其中，在进行数据请求时，通常是客户端直接向对应的服务器发送页面请求。然而，发明人发现，当采用上述方式时，经常会存在如下技术问题：第一，受限于硬件资源成本的限制，单一的服务器的配置往往存在一定上限，当存在较大的服务器访问量时，往往会导致请求阻塞，甚至导致服务器崩溃；第二，在进行针对多台服务器的数据同步时，常规的同步方式如全量同步方式往往会占用较多的计算机资源。该背景技术部分中所公开的以上信息仅用于增强对本发明构思的背景的理解，并因此，其可包含并不形成本国的本领域普通技术人员已知的现有技术的信息。发明内容本公开的内容部分用于以简要的形式介绍构思，这些构思将在后面的具体实施方式部分被详细描述。本公开的内容部分并不旨在标识要求保护的技术方案的关键特征或必要特征，也不旨在用于限制所要求的保护的技术方案的范围。本公开的一些实施例提出了请求处理方法、装置、电子设备和计算机可读介质，来解决以上背景技术部分提到的技术问题中的一项或多项。第一方面，本公开的一些实施例提供了一种请求处理方法，该方法包括：响应于确定请求转发服务器在预设时间窗口内的总请求转发量大于等于预设流量阈值，执行以下第一处理步骤：根据主页面服务器和从页面服务器，构建虚拟页面服务器；通过上述请求转发服务器，将实时页面请求转发至上述虚拟页面服务器；响应于确定上述总请求转发量小于上述预设流量阈值，执行以下第二处理步骤：根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率，其中，上述第一转发概率为上述请求转发服务器将页面请求转发至上述主页面服务器的概率，上述第二转发概率为上述请求转发服务器将页面请求转发至上述从页面服务器的概率，上述第一实时访问量是上述主页面服务器的实时被访问量，上述第二实时访问量是上述从页面服务器的实时被访问量；根据上述第一转发概率和上述第二转发概率，通过上述请求转发服务器将上述实时页面请求，转发至上述主页面服务器或上述从页面服务器。第二方面，本公开的一些实施例提供了一种请求处理装置，装置包括：第一执行单元，被配置成响应于确定请求转发服务器在预设时间窗口内的总请求转发量大于等于预设流量阈值，执行以下第一处理步骤：根据主页面服务器和从页面服务器，构建虚拟页面服务器；通过上述请求转发服务器，将实时页面请求转发至上述虚拟页面服务器；第二执行单元，被配置成响应于确定上述总请求转发量小于上述预设流量阈值，执行以下第二处理步骤：根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率，其中，上述第一转发概率为上述请求转发服务器将页面请求转发至上述主页面服务器的概率，上述第二转发概率为上述请求转发服务器将页面请求转发至上述从页面服务器的概率，上述第一实时访问量是上述主页面服务器的实时被访问量，上述第二实时访问量是上述从页面服务器的实时被访问量；根据上述第一转发概率和上述第二转发概率，通过上述请求转发服务器将实时页面请求，转发至上述主页面服务器或上述从页面服务器。第三方面，本公开的一些实施例提供了一种电子设备，包括：一个或多个处理器；存储装置，其上存储有一个或多个程序，当一个或多个程序被一个或多个处理器执行，使得一个或多个处理器实现上述第一方面任一实现方式所描述的方法。第四方面，本公开的一些实施例提供了一种计算机可读介质，其上存储有计算机程序，其中，程序被处理器执行时实现上述第一方面任一实现方式所描述的方法。本公开的上述各个实施例具有如下有益效果：通过本公开的一些实施例的请求处理方法，减少了请求阻塞的情况发生，进而避免了服务器出现崩溃的问题。具体来说，造成请求阻塞，甚至导致服务器崩溃的原因在于：受限于硬件资源成本的限制，单一的服务器的配置往往存在一定上限，当存在较大的服务器访问量时，往往会导致请求阻塞，甚至导致服务器崩溃。基于此，本公开的一些实施例的请求处理方法，首先，设计了请求转发服务器、主页面服务器和从页面服务器的“三服务器架构”，通过请求转发服务器实现页面请求的转发控制，以此保证主页面服务器和从页面服务器的负载均衡。其次，响应于确定请求转发服务器在预设时间窗口内的总请求转发量大于等于预设流量阈值，执行以下第一处理步骤：第一步，根据主页面服务器和从页面服务器，构建虚拟页面服务器。第二步，通过上述请求转发服务器，将实时页面请求转发至上述虚拟页面服务器。实践中，常规的页面资源请求方式往往为：客户端直接向服务器发送页面请求。其中，当单位时间的页面请求较多时，如多个客户端同时向服务器发送多个页面请求，极易造成请求阻塞。同时考虑到硬件资源成本的限制，单台服务器往往存在配置上限，当请求量大于单台服务器的承载极限时，也会造成请求阻塞，以及服务器崩溃。因此，本公开考虑到主页面服务器和从页面服务器本质为主/从结构，主页面服务器和从页面服务器中存储的内容相同，因此，当总请求转发量大于等于预设流量阈值，可以根据主页面服务器和从页面服务器，构建虚拟页面服务器，以提升服务器的请求处理能力。其次，响应于确定上述总请求转发量小于上述预设流量阈值，执行以下第二处理步骤：第一步，根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率，其中，上述第一转发概率为上述请求转发服务器将页面请求转发至上述主页面服务器的概率，上述第二转发概率为上述请求转发服务器将页面请求转发至上述从页面服务器的概率，上述第一实时访问量是上述主页面服务器的实时被访问量，上述第二实时访问量是上述从页面服务器的实时被访问量；第二步，根据上述第一转发概率和上述第二转发概率，通过上述请求转发服务器将上述实时页面请求，转发至上述主页面服务器或上述从页面服务器。通过结合第一实时访问量和第二实时访问量，即主页面服务器和从页面服务器的实时被访问量，以此确定实时页面请求被转发至主页面服务器或从页面服务器的被转发概率。一定程度上保证了服务器不会出现因请求过多出现的崩溃问题。同时，结合第一转发概率和第二转发概率，避免固定向某一服务器发送页面请求时，因服务器宕机所导致的请求无法响应的问题。综上，上述方法减少了请求阻塞的情况发生，以及避免了服务器出现崩溃的问题。附图说明结合附图并参考以下具体实施方式，本公开各实施例的上述和其他特征、优点及方面将变得更加明显。贯穿附图中，相同或相似的附图标记表示相同或相似的元素。应当理解附图是示意性的，元件和元素不一定按照比例绘制。图1是根据本公开的请求处理方法的一些实施例的流程图；图2是根据本公开的请求处理装置的一些实施例的结构示意图；图3是适于用来实现本公开的一些实施例的电子设备的结构示意图。具体实施方式下面将参照附图更详细地描述本公开的实施例。虽然附图中显示了本公开的某些实施例，然而应当理解的是，本公开可以通过各种形式来实现，而且不应该被解释为限于这里阐述的实施例。相反，提供这些实施例是为了更加透彻和完整地理解本公开。应当理解的是，本公开的附图及实施例仅用于示例性作用，并非用于限制本公开的保护范围。另外还需要说明的是，为了便于描述，附图中仅示出了与有关发明相关的部分。在不冲突的情况下，本公开中的实施例及实施例中的特征可以相互组合。需要注意，本公开中提及的“第一”、“第二”等概念仅用于对不同的装置、模块或单元进行区分，并非用于限定这些装置、模块或单元所执行的功能的顺序或者相互依存关系。需要注意，本公开中提及的“一个”、“多个”的修饰是示意性而非限制性的，本领域技术人员应当理解，除非在上下文另有明确指出，否则应该理解为“一个或多个”。本公开实施方式中的多个装置之间所交互的消息或者信息的名称仅用于说明性的目的，而并不是用于对这些消息或信息的范围进行限制。下面将参考附图并结合实施例来详细说明本公开。参考图1，示出了根据本公开的请求处理方法的一些实施例的流程100。该请求处理方法，包括以下步骤：步骤101，响应于确定请求转发服务器在预设时间窗口内的总请求转发量大于等于预设流量阈值，执行以下第一处理步骤：步骤1011，根据主页面服务器和从页面服务器，构建虚拟页面服务器。在一些实施例中，请求处理方法的执行主体可以根据主页面服务器和从页面服务器，构建虚拟页面服务器。其中，请求转发服务器是用于对客户端发送的页面请求进行请求转发的服务器。实践中，上述执行请求转发服务器可以将页面请求转发至主页面服务器，从页面服务器或虚拟页面服务器中的任一服务器。上述预设时间窗口可以是预先设定的、用于统计请求转发服务器的请求转发量的时间窗口。例如，预设时间窗口可以是30分钟。总请求转发量是请求转发服务器在预设时间窗口内、向主页面服务器，从页面服务器或虚拟页面服务器中的任一服务器转发页面请求的总量。预设流量阈值可以表征主页面服务器和从页面服务器中的任一服务器的、单位时间内的最大请求接收量。主页面服务器和从页面服务器中存储的资源相同。实践中，主页面服务器和从页面服务器的服务器配置相同。上述虚拟页面服务器可以是虚拟的、共用主页面服务器和从页面服务器的服务器资源的服务器。实践中，上述执行主体可以将主页面服务器和从页面服务器，映射为虚拟页面服务器。需要说明的是，上述计算设备是由请求转发服务器、主页面服务器、从页面服务器和容灾页面服务器构成的硬件设备。其中，主页面服务器、从页面服务器和容灾页面服务器均可以实现为单个服务器，或构建成服务器集群。例如，主页面服务器可以是由多台服务器构成的服务器集群。在一些实施例的一些可选的实现方式中，上述执行主体根据主页面服务器和从页面服务器，构建虚拟页面服务器，可以包括以下步骤：第一步，分别确定上述主页面服务器和上述从页面服务器的资源实时占用信息，以生成第一资源实时占用信息和第二资源实时占用信息。其中，第一资源实时占用信息可以表征主页面服务器的服务器实时资源占用。第二资源实时占用信息可以表征从页面服务器的服务器实时资源占用。实践中，第一资源实时占用信息和第二资源实时占用信息均可以包括但不限于：处理器占用率，内存占用率，外存占用率。第二步，根据上述第一资源实时占用信息和上述主页面服务器对应的第一容灾比例，确定上述主页面服务器对应的待融合服务器资源信息，作为第一待融合服务器资源信息。其中，第一容灾比例表征主页面服务器对应的、锁定的服务器资源量。例如，第一容灾比例可以为15％，即表征主页面服务器对应的15％的服务器资源不可被重分配或与其它服务器合并。第一待融合服务器资源信息可以表征主页面服务器中处于空闲状态、且可被重分配的服务器资源。第一待融合服务器资源信息对应的服务器资源＝主页面服务器对应的总服务资源－。第三步，根据上述第二资源实时占用信息和上述从页面服务器对应的第二容灾比例，确定上述从页面服务器对应的待融合服务器资源信息，作为第二待融合服务器资源信息。其中，其中，第二容灾比例表征从页面服务器对应的、锁定的服务器资源量。例如，第二容灾比例可以为15％，即表征从页面服务器对应的15％的服务器资源不可被重分配或与其它服务器合并。第二待融合服务器资源信息可以表征从页面服务器中处于空闲状态、且可被重分配的服务器资源。第二待融合服务器资源信息对应的服务器资源＝从页面服务器对应的总服务资源－。第四步，根据上述总请求转发量，进行服务器资源占用量预测，以生成服务器资源预测使用量信息。实践中，服务器资源预测使用量信息。可以表征在下一个预设时间窗口内的、主页面服务器和从页面服务器的总服务器资源使用量。实践中，上述执行主体可以通过资源使用量预测模型，确定服务器资源预测使用量信息。实践中，资源使用量预测模型可以包括：资源使用量特征提取模型，规则约束池和预测模型。其中，资源使用量特征提取模型可以为时序性特征提取模型。资源使用量特征提取模型用于提取总请求转发量对应的转发量特征。规则约束池中包括用于对预测模型预测的、服务器资源预测使用量信息的约束信息。实践中，特征提取模型可以是LSTM模型。上述预测模型可以是残差神经网络模型。例如，上述规则约束池可以在预测模型进行预测时进行约束，以生成唯一的服务器资源预测使用量信息。又如，上述预测模型可以预测多个服务器资源预测使用量信息。上述执行主体可以根据规则约束池，对多个服务器资源预测使用量信息。进行筛选，得到唯一的服务器资源预测使用量信息。第五步，根据上述第一待融合服务器资源信息、上述第二待融合服务器资源信息和上述待申请服务器资源信息，构建上述虚拟页面服务器。其中，虚拟页面服务器对应的服务器资源量＝第一待融合服务器资源信息对应的服务器资源量+上述第二待融合服务器资源信息对应的服务器资源量和上述待申请服务器资源信息对应的服务器资源量。待申请服务器资源信息可以表征待申请的服务器资源量。待申请服务器资源信息对应的服务器通过套接字的方式，与上述主页面服务器和上述从页面服务器进行服务器通讯。步骤1012，通过请求转发服务器，将实时页面请求转发至虚拟页面服务器。在一些实施例中，上述执行主体可以通过请求转发服务器，将实时页面请求转发至虚拟页面服务器。实践中，上述执行主体可以将请求转发服务器的服务器地址，重定向为上述实时页面请求的请求地址，并将实时页面请求转发至虚拟页面服务器的服务器地址。步骤102，响应于确定总请求转发量小于预设流量阈值，执行以下第二处理步骤：步骤1021，根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率。在一些实施例中，上述执行主体可以根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率。其中，第一转发概率为上述请求转发服务器将页面请求转发至上述主页面服务器的概率。上述第二转发概率为上述请求转发服务器将页面请求转发至上述从页面服务器的概率。上述第一实时访问量是上述主页面服务器的实时被访问量。上述第二实时访问量是上述从页面服务器的实时被访问量。作为示例，第一转发概率＝)。第二转发概率＝)。在一些实施例的一些可选的实现方式中，上述执行主体根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率，可以包括以下步骤：第一步，根据上述第一资源实时占用信息、上述第二资源实时占用信息、上述第一实时访问量和上述第二实时访问量，确定资源占用均值。其中，资源占用均值＝+。第二步，根据上述主页面服务器对应的可用服务器资源信息和上述资源占用均值，确定上述主页面服务器对应的第一访问量阈值。其中，第一访问量阈值＝上述主页面服务器对应的可用服务器资源信息对应的服务器资源/资源占用均值。第三步，根据上述从页面服务器对应的可用服务器资源信息和上述资源占用均值，确定上述从页面服务器对应的第二访问量阈值。其中，第二访问量阈值＝从页面服务器对应的可用服务器资源信息对应的服务器资源/资源占用均值。第四步，根据上述第一访问量阈值、上述第一实时访问量、上述第二访问量阈值和上述第二实时访问量，确定上述第一转发概率和上述第二转发概率。其中，第一转发概率＝/+)。第二转发概率＝/+)。在一些实施例的一些可选的实现方式中，在上述通过上述请求转发服务器，将实时页面请求转发至上述虚拟页面服务器之后，上述方法还包括：第一步，响应于确定上述虚拟页面服务器宕机，向上述请求转发服务器发送虚拟服务器宕机回应信息。其中，虚拟服务器宕机回应信息可以表征虚拟页面服务器处于宕机状态。第二步，响应于上述请求转发服务器接收到上述虚拟服务器宕机回应信息，执行以下第三处理步骤：第一子步骤，唤醒容灾页面服务器。其中，容灾页面服务器在非唤醒状态下定时与上述主页面服务器和上述从页面服务器进行数据同步。具体的，在非唤醒状态下，上述容灾页面服务器与上述主页面服务器和上述从页面服务器被动式通信，即容灾页面服务器不主动与上述主页面服务器和上述从页面服务器通信。例如，容灾页面服务器仅接受主页面服务器和上述从页面服务器发送的同步数据以用于数据同步，不主动向上述主页面服务器和上述从页面服务器发送以用于数据同步的请求。容灾页面服务器与上述主页面服务器、上述从页面服务器中存储的数据一致。第二子步骤，通过上述请求转发服务器，将上述实时页面请求转发至上述容灾页面服务器。实践中，当上述容灾页面服务器被唤醒，上述执行主体可以通过上述请求转发服务器，将上述实时页面请求转发至上述容灾页面服务器。具体的，上述执行主体可以通过套接字通讯的方式，将上述实时页面请求转发至上述容灾页面服务器。步骤1022，根据第一转发概率和第二转发概率，通过请求转发服务器将实时页面请求，转发至主页面服务器或从页面服务器。在一些实施例中，上述执行主体可以根据第一转发概率和第二转发概率，通过请求转发服务器将实时页面请求，随机转发至主页面服务器或从页面服务器。其中，上述执行主体将上述实时页面请求转发至主页面服务器的概率与第一转发概率相同。上述执行主体将上述实时页面请求转发至从页面服务器的概率与第二转发概率相同。在一些实施例的一些可选的实现方式中，在上述根据上述第一转发概率和上述第二转发概率，通过上述请求转发服务器将上述实时页面请求，转发至上述主页面服务器或上述从页面服务器之后，上述方法还包括：第一步，响应于确定上述主页面服务器宕机或上述第一实时访问量大于等于上述第一访问量阈值，向上述请求转发服务器发送第一请求重定向信息。其中，请求重定向信息是用于重新定向接收上述实时页面请求的服务器地址的信息。上述第一请求重定向信息对应的请求重定向地址为上述从页面服务器。第二步，响应于上述请求转发服务器接收到上述第一请求重定向信息，通过上述请求转发服务器，将上述实时页面请求转发上述从页面服务器。具体的，上述执行主体可以通过上述请求转发服务器，以套接字通讯的方式，将上述实时页面请求转发至上述从页面服务器。第三步，响应于确定上述从页面服务器宕机或上述第二实时访问量大于等于上述第二访问量阈值，向上述请求转发服务器发送第二请求重定向信息。其中，上述第二请求重定向信息对应的请求重定向地址为上述主页面服务器。第四步，响应于上述请求转发服务器接收到上述第二请求重定向信息，通过上述请求转发服务器，将上述实时页面请求转发上述主页面服务器。具体的，上述执行主体可以通过上述请求转发服务器，以套接字通讯的方式，将上述实时页面请求转发至上述主页面服务器。在一些实施例的一些可选的实现方式中，上述方法还包括：第一步，响应于确定上述总请求转发量大于等于上述预设流量阈值、且数据同步时间位于上述预设时间窗口内，根据上述虚拟页面服务器，对上述主页面服务器和上述从页面服务器进行差异数据同步。作为示例，虚拟页面服务器中待申请服务器资源信息对应的服务器中存储的数据可以是数据A。虚拟页面服务器中主页面服务器中存储的数据可以是数据B。虚拟页面服务器中从页面服务器中存储的数据可以是数据C。即上述执行主体可以将数据A和数据C同步至上述主页面服务器。将数据A和数据B同步至上述从页面服务器。第二步，响应于确定上述总请求转发量大于等于上述预设流量阈值、且数据同步时间未位于上述预设时间窗口内，对上述主页面服务器和上述从页面服务器进行数据同步。实践中，上述执行主体可以以主页面服务器为主体，对上述从页面服务器进行增量数据同步。第三步，响应于数据同步完成，通过上述主页面服务器或上述从页面服务器，对上述容灾页面服务器进行数据同步。在一些实施例的一些可选的实现方式中，上述方法还包括：第一步，对上述主页面服务器和上述从页面服务器进行服务器状态监测。实践中，上述执行主体可以定频的对上述主页面服务器和上述从页面服务器进行状态监测。第二步，响应于检测到上述主页面服务器和上述从页面服务器中存在宕机服务器，执行以下第四处理步骤：第一子步骤，生成宕机服务器对应的基础数据快照。其中，上述基础数据快照是上述宕机服务器在宕机时的、宕机服务器中当前存储数据的数据快照。第二子步骤，根据上述基础数据快照，确定上述主页面服务器和上述从页面服务器中非宕机服务器对应的增量数据快照。实践中，首先，上述执行主体可以确定主页面服务器和上述从页面服务器中非宕机服务器对应的数据快照，作为候选数据快照。然后，将候选数据快照和上述基础数据快照的差异部分，确定为增量数据快照。第三子步骤，响应于确定上述宕机服务器恢复，根据上述基础数据快照和上述增量数据快照，对上述宕机服务器进行数据恢复。上述步骤1022中的可选的内容，作为本公开的一个发明点，解决了背景技术提及的技术问题二，即“在进行针对多台服务器的数据同步时，常规的同步方式如全量同步方式往往会占用较多的计算机资源”。当服务器中存储有大量数据时，全量同步方式会占用大量的时间和计算机资源。基于此，本公开首先，考虑到在总请求转发量大于等于上述预设流量阈值、且数据同步时间位于上述预设时间窗口内的情况下，可以理解为同步时间所在的时间存在大量的请求。为了尽可能降低数据同步所消耗的计算机资源，因此，采用差异数据同步的方式对主页面服务器和从页面服务器进行数据同步。当总请求转发量大于等于上述预设流量阈值、且数据同步时间未位于上述预设时间窗口内时，可以理解为同步时间所在的时间未存在大量的请求，因此可以结合主页面服务器和上述从页面服务器进行数据同步。例如以主页面服务器为主题，对上述从页面服务器进行增量数据同步。同时，考虑到容灾页面服务器作为最后的保障，保障容灾页面服务器中的数据与主页面服务器或上述从页面服务器的数据一致尤为重要。因此，在主页面服务器和上述从页面服务器数据同步完成后，需要对容灾页面服务器也进行数据同步。此外，考虑到，服务器在长时间的运行中，无可避免的会产生宕机的情况。因此，本公开设计了针对宕机服务器的快照方式的数据恢复方式，即，当服务器宕机时，立刻确定宕机服务器对应的基础数据快照，同时，结合未宕机服务器得到增量数据快照。通过生成基础数据快照，避免宕机服务器在恢复时因机械故障等造成原始数据损坏无法复原的情况结合增量数据快照，可以得到宕机服务器在宕机阶段，新产生的数据。最后，通过基础数据快照和增量数据快照，对宕机服务器进行数据恢复。通过此种方式，降低了数据同步过程中，对计算资源的消耗，同时避免了因服务器宕机所造成的数据损坏或无法恢复的问题。本公开的上述各个实施例具有如下有益效果：通过本公开的一些实施例的请求处理方法，减少了请求阻塞的情况发生，进而避免了服务器出现崩溃的问题。具体来说，造成请求阻塞，甚至导致服务器崩溃的原因在于：受限于硬件资源成本的限制，单一的服务器的配置往往存在一定上限，当存在较大的服务器访问量时，往往会导致请求阻塞，甚至导致服务器崩溃。基于此，本公开的一些实施例的请求处理方法，首先，设计了请求转发服务器、主页面服务器和从页面服务器的“三服务器架构”，通过请求转发服务器实现页面请求的转发控制，以此保证主页面服务器和从页面服务器的负载均衡。其次，响应于确定请求转发服务器在预设时间窗口内的总请求转发量大于等于预设流量阈值，执行以下第一处理步骤：第一步，根据主页面服务器和从页面服务器，构建虚拟页面服务器。第二步，通过上述请求转发服务器，将实时页面请求转发至上述虚拟页面服务器。实践中，常规的页面资源请求方式往往为：客户端直接向服务器发送页面请求。其中，当单位时间的页面请求较多时，如多个客户端同时向服务器发送多个页面请求，极易造成请求阻塞。同时考虑到硬件资源成本的限制，单台服务器往往存在配置上限，当请求量大于单台服务器的承载极限时，也会造成请求阻塞，以及服务器崩溃。因此，本公开考虑到主页面服务器和从页面服务器本质为主/从结构，主页面服务器和从页面服务器中存储的内容相同，因此，当总请求转发量大于等于预设流量阈值，可以根据主页面服务器和从页面服务器，构建虚拟页面服务器，以提升服务器的请求处理能力。其次，响应于确定上述总请求转发量小于上述预设流量阈值，执行以下第二处理步骤：第一步，根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率，其中，上述第一转发概率为上述请求转发服务器将页面请求转发至上述主页面服务器的概率，上述第二转发概率为上述请求转发服务器将页面请求转发至上述从页面服务器的概率，上述第一实时访问量是上述主页面服务器的实时被访问量，上述第二实时访问量是上述从页面服务器的实时被访问量；第二步，根据上述第一转发概率和上述第二转发概率，通过上述请求转发服务器将上述实时页面请求，转发至上述主页面服务器或上述从页面服务器。通过结合第一实时访问量和第二实时访问量，即主页面服务器和从页面服务器的实时被访问量，以此确定实时页面请求被转发至主页面服务器或从页面服务器的被转发概率。一定程度上保证了服务器不会出现因请求过多出现的崩溃问题。同时，结合第一转发概率和第二转发概率，避免固定向某一服务器发送页面请求时，因服务器宕机所导致的请求无法响应的问题。综上，上述方法减少了请求阻塞的情况发生，以及避免了服务器出现崩溃的问题。进一步参考图2，作为对上述各图所示方法的实现，本公开提供了一种请求处理装置的一些实施例，这些装置实施例与图1所示的那些方法实施例相对应，该请求处理装置具体可以应用于各种电子设备中。如图2所示，一些实施例的请求处理装置200包括：第一执行单元201和第二执行单元202。其中，上述第一执行单元201，被配置成响应于确定请求转发服务器在预设时间窗口内的总请求转发量大于等于预设流量阈值，执行以下第一处理步骤：根据主页面服务器和从页面服务器，构建虚拟页面服务器；通过上述请求转发服务器，将实时页面请求转发至上述虚拟页面服务器；第二执行单元202，被配置成响应于确定上述总请求转发量小于上述预设流量阈值，执行以下第二处理步骤：根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率，其中，上述第一转发概率为上述请求转发服务器将页面请求转发至上述主页面服务器的概率，上述第二转发概率为上述请求转发服务器将页面请求转发至上述从页面服务器的概率，上述第一实时访问量是上述主页面服务器的实时被访问量，上述第二实时访问量是上述从页面服务器的实时被访问量；根据上述第一转发概率和上述第二转发概率，通过上述请求转发服务器将实时页面请求，转发至上述主页面服务器或上述从页面服务器。可以理解的是，该请求处理装置200中记载的诸单元与参考图1描述的方法中的各个步骤相对应。由此，上文针对方法描述的操作、特征以及产生的有益效果同样适用于请求处理装置200及其中包含的单元，在此不再赘述。下面参考图3，其示出了适于用来实现本公开的一些实施例的电子设备300的结构示意图。图3示出的电子设备仅仅是一个示例，不应对本公开的实施例的功能和使用范围带来任何限制。如图3所示，电子设备300可以包括处理装置301，其可以根据存储在只读存储器302中的程序或者从存储装置308加载到随机访问存储器303中的程序而执行各种适当的动作和处理。在随机访问存储器303中，还存储有电子设备300操作所需的各种程序和数据。处理装置301、只读存储器302以及随机访问存储器303通过总线304彼此相连。输入/输出接口305也连接至总线304。通常，以下装置可以连接至I/O接口305：包括例如触摸屏、触摸板、键盘、鼠标、摄像头、麦克风、加速度计、陀螺仪等的输入装置306；包括例如液晶显示器、扬声器、振动器等的输出装置307；包括例如磁带、硬盘等的存储装置308；以及通信装置309。通信装置309可以允许电子设备300与其他设备进行无线或有线通信以交换数据。虽然图3示出了具有各种装置的电子设备300，但是应理解的是，并不要求实施或具备所有示出的装置。可以替代地实施或具备更多或更少的装置。图3中示出的每个方框可以代表一个装置，也可以根据需要代表多个装置。特别地，根据本公开的一些实施例，上文参考流程图描述的过程可以被实现为计算机软件程序。例如，本公开的一些实施例包括一种计算机程序产品，其包括承载在计算机可读介质上的计算机程序，该计算机程序包含用于执行流程图所示的方法的程序代码。在这样的一些实施例中，该计算机程序可以通过通信装置309从网络上被下载和安装，或者从存储装置308被安装，或者从只读存储器302被安装。在该计算机程序被处理装置301执行时，执行本公开的一些实施例的方法中限定的上述功能。需要说明的是，本公开的一些实施例中记载的计算机可读介质可以是计算机可读信号介质或者计算机可读存储介质或者是上述两者的任意组合。计算机可读存储介质例如可以是——但不限于——电、磁、光、电磁、红外线、或半导体的系统、装置或器件，或者任意以上的组合。计算机可读存储介质的更具体的例子可以包括但不限于：具有一个或多个导线的电连接、便携式计算机磁盘、硬盘、随机访问存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑磁盘只读存储器、光存储器件、磁存储器件、或者上述的任意合适的组合。在本公开的一些实施例中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用。而在本公开的一些实施例中，计算机可读信号介质可以包括在基带中或者作为载波一部分传播的数据信号，其中承载了计算机可读的程序代码。这种传播的数据信号可以采用多种形式，包括但不限于电磁信号、光信号或上述的任意合适的组合。计算机可读信号介质还可以是计算机可读存储介质以外的任何计算机可读介质，该计算机可读信号介质可以发送、传播或者传输用于由指令执行系统、装置或者器件使用或者与其结合使用的程序。计算机可读介质上包含的程序代码可以用任何适当的介质传输，包括但不限于：电线、光缆、RF等等，或者上述的任意合适的组合。在一些实施方式中，客户端、服务器可以利用诸如HTTP之类的任何当前已知或未来研发的网络协议进行通信，并且可以与任意形式或介质的数字数据通信互连。通信网络的示例包括局域网，广域网，网际网以及端对端网络，以及任何当前已知或未来研发的网络。上述计算机可读介质可以是上述电子设备中所包含的；也可以是单独存在，而未装配入该电子设备中。上述计算机可读介质承载有一个或者多个程序，当上述一个或者多个程序被该电子设备执行时，使得该电子设备：响应于确定请求转发服务器在预设时间窗口内的总请求转发量大于等于预设流量阈值，执行以下第一处理步骤：根据主页面服务器和从页面服务器，构建虚拟页面服务器；通过上述请求转发服务器，将实时页面请求转发至上述虚拟页面服务器；响应于确定上述总请求转发量小于上述预设流量阈值，执行以下第二处理步骤：根据第一实时访问量和第二实时访问量，确定第一转发概率和第二转发概率，其中，上述第一转发概率为上述请求转发服务器将页面请求转发至上述主页面服务器的概率，上述第二转发概率为上述请求转发服务器将页面请求转发至上述从页面服务器的概率，上述第一实时访问量是上述主页面服务器的实时被访问量，上述第二实时访问量是上述从页面服务器的实时被访问量；根据上述第一转发概率和上述第二转发概率，通过上述请求转发服务器将上述实时页面请求，转发至上述主页面服务器或上述从页面服务器。可以以一种或多种程序设计语言或其组合来编写用于执行本公开的一些实施例的操作的计算机程序代码，上述程序设计语言包括面向对象的程序设计语言—诸如Java、Smalltalk、C++，还包括常规的过程式程序设计语言—诸如“C”语言或类似的程序设计语言。程序代码可以完全地在用户计算机上执行、部分地在用户计算机上执行、作为一个独立的软件包执行、部分在用户计算机上部分在远程计算机上执行、或者完全在远程计算机或服务器上执行。在涉及远程计算机的情形中，远程计算机可以通过任意种类的网络——包括局域网或广域网——连接到用户计算机，或者，可以连接到外部计算机。附图中的流程图和框图，图示了按照本公开各种实施例的系统、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段、或代码的一部分，该模块、程序段、或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个接连地表示的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行规定的功能或操作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。描述于本公开的一些实施例中的单元可以通过软件的方式实现，也可以通过硬件的方式来实现。所描述的单元也可以设置在处理器中，例如，可以描述为：一种处理器包括第一执行单元和第二执行单元。其中，这些单元的名称在某种情况下并不构成对该单元本身的限定，例如，第一执行单元还可以被描述为“响应于确定请求转发服务器在预设时间窗口内的总请求转发量大于等于预设流量阈值，执行以下第一处理步骤：根据主页面服务器和从页面服务器，构建虚拟页面服务器；通过上述请求转发服务器，将实时页面请求转发至上述虚拟页面服务器的单元”。本文中以上描述的功能可以至少部分地由一个或多个硬件逻辑部件来执行。例如，非限制性地，可以使用的示范类型的硬件逻辑部件包括：现场可编程门阵列、专用集成电路、专用标准产品、片上系统、复杂可编程逻辑设备等等。以上描述仅为本公开的一些较佳实施例以及对所运用技术原理的说明。本领域技术人员应当理解，本公开的实施例中所涉及的发明范围，并不限于上述技术特征的特定组合而成的技术方案，同时也应涵盖在不脱离上述发明构思的情况下，由上述技术特征或其等同特征进行任意组合而形成的其它技术方案。例如上述特征与本公开的实施例中公开的具有类似功能的技术特征进行互相替换而形成的技术方案。
