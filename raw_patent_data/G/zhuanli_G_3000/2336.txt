标题title
基于区块链的供应链系统管理方法、装置、设备及介质
摘要abst
本发明公开了一种基于区块链的供应链系统管理方法、装置、设备及介质，该方法通过获取待验证的交易信息，并基于交易信息对应的供应链参与方的所属地理位置确定第一数量，其中，第一数量为参与本次共识的共识节点的数量；确定区块链的各共识节点中各自被随机选取的子用户的第二数量，将第二数量映射为共识节点参与共识时的权重值；基于各权重值和各共识节点各自的信誉值，从各共识节点中选取第一数量的共识节点作为参与本次共识的目标共识节点；通过目标共识节点对交易消息进行验证，得到验证结果。本发明采用上述技术方案，提高了供应链中各参与方之间的交易信息的真实性和准确性。
权利要求书clms
1.一种基于区块链的供应链系统管理方法，其特征在于，所述基于区块链的供应链系统管理方法包括：获取待验证的交易信息，并基于所述交易信息对应的供应链参与方的所属地理位置确定第一数量，其中，所述第一数量为参与本次共识的共识节点的数量；确定区块链的各共识节点中各自被随机选取的子用户的第二数量，将所述第二数量映射为所述共识节点参与共识时的权重值；基于各所述权重值和各所述共识节点各自的信誉值，从各所述共识节点中选取所述第一数量的共识节点作为参与本次共识的目标共识节点；通过所述目标共识节点对所述交易消息进行验证，得到验证结果。2.如权利要求1所述的基于区块链的供应链系统管理方法，其特征在于，所述基于所述交易信息对应的供应链参与方的所属地理位置确定第一数量的步骤，包括：基于所述交易信息对应的供应链参与方的所属地理位置，检测所述供应链参与方是否处于单一地理区域；若检测到所述供应链参与方处于单一地理区域，则将预设数量作为第一数量；若检测到所述供应链参与方处于多个地理区域，则确定所述供应链参与方所处的地理区域的区域数量，并基于所述预设数量和所述区域数量计算所述第一数量。3.如权利要求1所述的基于区块链的供应链系统管理方法，其特征在于，所述确定区块链的各共识节点中各自被随机选取的子用户的第二数量的步骤，包括：基于可验证随机函数生成一个随机数；基于所述随机数的字节长度计算所述随机数对应的随机概率值；根据所述随机概率值确定第一共识节点中被随机选取的子用户的第二数量，其中，所述第一共识节点为区块链的各共识节点中的任意一个。4.如权利要求3所述的基于区块链的供应链系统管理方法，其特征在于，所述根据所述随机概率值确定第一共识节点中被随机选取的子用户的第二数量的步骤，包括：根据所述随机概率值确定所述随机概率值所在的概率分布区间；基于所述概率分布区间和二项分布的累积分布曲线确定所述第一共识节点中被随机选取的子用户的第二数量。5.如权利要求1所述的基于区块链的供应链系统管理方法，其特征在于，所述基于各所述权重值和各所述共识节点各自的信誉值，从各所述共识节点中选取所述第一数量的共识节点作为参与本次共识的目标共识节点的步骤，包括：基于各所述权重值，从各所述共识节点中选取所述第一数量的第二共识节点；基于各所述共识节点各自的信誉值，检测所述第二共识节点的信誉值是否大于预设阈值；若检测到所述第二共识节点的信誉值大于所述预设阈值，则将所述第二共识节点作为参与本次共识的目标共识节点；若检测到所述第二共识节点的信誉值小于或者等于所述预设阈值，则将剩余节点中信誉值最大的第三共识节点替换所述第二共识节点，并将所述第三共识节点作为所述目标共识节点，其中，所述剩余节点为各所述共识节点中除所述第二共识节点之外的其他共识节点。6.如权利要求5所述的基于区块链的供应链系统管理方法，其特征在于，所述基于各所述权重值，从各所述共识节点中选取所述第一数量的第二共识节点的步骤，包括：基于各所述权重值之间的大小关系，从各所述权重值中选取最大的多个目标权重值，其中，所述目标权重值的个数为所述第一数量；将各所述目标权重值各自对应的共识节点作为第二共识节点。7.如权利要求1至6中任一项所述的基于区块链的供应链系统管理方法，其特征在于，在所述通过所述目标共识节点对所述交易消息进行验证，得到验证结果的步骤之后，所述方法还包括：在所述验证结果为验证通过时，将所述交易信息计入区块链账本，并基于所述验证结果对所述目标共识节点的信誉值进行更新。8.一种基于区块链的供应链系统管理装置，其特征在于，所述基于区块链的供应链系统管理装置，包括：共识节点数量模块，用于获取待验证的交易信息，并基于所述交易信息对应的供应链参与方的所属地理位置确定第一数量，其中，所述第一数量为参与本次共识的共识节点的数量；权重值模块，用于确定区块链的各共识节点中各自被随机选取的子用户的第二数量，将所述第二数量映射为各所述共识节点各自参与共识时的权重值；目标共识节点模块，用于基于各所述权重值和各所述共识节点各自的信誉值，从各所述共识节点中选取所述第一数量的共识节点作为参与本次共识的目标共识节点；验证模块，用于通过所述目标共识节点对待交易消息进行验证，得到验证结果。9.一种终端设备，其特征在于，所述终端设备包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的基于区块链的供应链系统管理程序，所述基于区块链的供应链系统管理程序被所述处理器执行时实现如权利要求1至7中任一项所述的基于区块链的供应链系统管理方法的步骤。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储有基于区块链的供应链系统管理程序，所述基于区块链的供应链系统管理程序被处理器执行时实现如权利要求1至7中任一项所述的基于区块链的供应链系统管理方法的步骤。
说明书desc
技术领域本发明属于数据处理技术领域，尤其涉及一种基于区块链的供应链系统管理方法、装置、设备及介质。背景技术随着科技的快速发展，区块链技术作为一种分布式账本技术，对金融、智能制造、供应链、物流等领域带来了深入的影响，并驱动新一轮技术变革和应用变革。传统供应链金融模式下，各参与方利用各自系统分散管理各自的业务，包括核心企业的内部系统、卖方供销及财务系统、第三方融资服务系统、商业银行或资金提供方系统以及其他辅助验证的物流、仓储、资金流相关系统等。而在现有基于区块链技术的供应链管理方法中，在区块链中统一管理各参与方各自的业务，并且在参与方发起新的交易时，需要通过区块链的共识机制对新交易进行共识，只有在超过半数的区块链节点同意当前交易时，才能把该交易添加到区块链中，以对各参与方之间的交易信息进行管理，其中，现有区块链共识机制中对于共识节点的选取会直接影响到当前交易信息的共识结果，从而影响该交易信息的真实性和准确性。综上，如何通过改进区块链共识算法，提高供应链中各参与方之间的交易信息的真实性和准确性，已经成为区块链技术领域亟待解决的技术问题。发明内容本发明的主要目的在于提供一种基于区块链的供应链系统管理方法、装置、设备及介质。旨在通过改进区块链共识算法，提高供应链中各参与方之间的交易信息的真实性和准确性。为了实现上述目的，本发明提供一种基于区块链的供应链系统管理方法，所述基于区块链的供应链系统管理方法包括：获取待验证的交易信息，并基于所述交易信息对应的供应链参与方的所属地理位置确定第一数量，其中，所述第一数量为参与本次共识的共识节点的数量；确定区块链的各共识节点中各自被随机选取的子用户的第二数量，将所述第二数量映射为所述共识节点参与共识时的权重值；基于各所述权重值和各所述共识节点各自的信誉值，从各所述共识节点中选取所述第一数量的共识节点作为参与本次共识的目标共识节点；通过所述目标共识节点对所述交易消息进行验证，得到验证结果。可选地，所述基于所述交易信息对应的供应链参与方的所属地理位置确定第一数量的步骤，包括：基于所述交易信息对应的供应链参与方的所属地理位置，检测所述供应链参与方是否处于单一地理区域；若检测到所述供应链参与方处于单一地理区域，则将预设数量作为第一数量；若检测到所述供应链参与方处于多个地理区域，则确定所述供应链参与方所处的地理区域的区域数量，并基于所述预设数量和所述区域数量计算所述第一数量。可选地，所述确定区块链的各共识节点中各自被随机选取的子用户的第二数量的步骤，包括：基于可验证随机函数生成一个随机数；基于所述随机数的字节长度计算所述随机数对应的随机概率值；根据所述随机概率值确定第一共识节点中被随机选取的子用户的第二数量，其中，所述第一共识节点为区块链的各共识节点中的任意一个。可选地，所述根据所述随机概率值确定第一共识节点中被随机选取的子用户的第二数量的步骤，包括：根据所述随机概率值确定所述随机概率值所在的概率分布区间；基于所述概率分布区间和二项分布的累积分布曲线确定所述第一共识节点中被随机选取的子用户的第二数量。可选地，所述基于各所述权重值和各所述共识节点各自的信誉值，从各所述共识节点中选取所述第一数量的共识节点作为参与本次共识的目标共识节点的步骤，包括：基于各所述权重值，从各所述共识节点中选取所述第一数量的第二共识节点；基于各所述共识节点各自的信誉值，检测所述第二共识节点的信誉值是否大于预设阈值；若检测到所述第二共识节点的信誉值大于所述预设阈值，则将所述第二共识节点作为参与本次共识的目标共识节点；若检测到所述第二共识节点的信誉值小于或者等于所述预设阈值，则将剩余节点中信誉值最大的第三共识节点替换所述第二共识节点，并将所述第三共识节点作为所述目标共识节点，其中，所述剩余节点为各所述共识节点中除所述第二共识节点之外的其他共识节点。可选地，所述基于各所述权重值，从各所述共识节点中选取所述第一数量的第二共识节点的步骤，包括：基于各所述权重值之间的大小关系，从各所述权重值中选取最大的多个目标权重值，其中，所述目标权重值的个数为所述第一数量；将各所述目标权重值各自对应的共识节点作为第二共识节点。可选地，在所述通过所述目标共识节点对所述交易消息进行验证，得到验证结果的步骤之后，所述方法还包括：在所述验证结果为验证通过时，将所述交易信息计入区块链账本，并基于所述验证结果对所述目标共识节点的信誉值进行更新。此外，为实现上述目的，本发明还提供一种基于区块链的供应链系统管理装置，所述基于区块链的供应链系统管理装置包括：共识节点数量模块，用于获取待验证的交易信息，并基于所述交易信息对应的供应链参与方的所属地理位置确定第一数量，其中，所述第一数量为参与本次共识的共识节点的数量；权重值模块，用于确定区块链的各共识节点中各自被随机选取的子用户的第二数量，将所述第二数量映射为各所述共识节点各自参与共识时的权重值；目标共识节点模块，用于基于各所述权重值和各所述共识节点各自的信誉值，从各所述共识节点中选取所述第一数量的共识节点作为参与本次共识的目标共识节点；验证模块，用于通过所述目标共识节点对待交易消息进行验证，得到验证结果。此外，为实现上述目的，本发明还提供一种终端设备，所述终端设备包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的基于区块链的供应链系统管理程序，所述终端设备的基于区块链的供应链系统管理程序被所述处理器执行时实现如上所述的基于区块链的供应链系统管理方法的步骤。此外，为实现上述目的，本发明还提供一种计算机可读存储介质，所述计算机可读存储介质上存储有基于区块链的供应链系统管理程序，所述基于区块链的供应链系统管理程序被处理器执行时实现如上所述的基于区块链的供应链系统管理方法的步骤。本发明实施例提出的一种基于区块链的供应链系统管理方法、装置、设备及介质，所述方法获取待验证的交易信息，并基于所述交易信息对应的供应链参与方的所属地理位置确定第一数量，其中，所述第一数量为参与本次共识的共识节点的数量；确定区块链的各共识节点中各自被随机选取的子用户的第二数量，将所述第二数量映射为所述共识节点参与共识时的权重值；基于各所述权重值和各所述共识节点各自的信誉值，从各所述共识节点中选取所述第一数量的共识节点作为参与本次共识的目标共识节点；通过所述目标共识节点对待交易消息进行验证，得到验证结果。本发明实施例通过获取当前待验证的交易信息，基于该交易信息对应的供应链参与方的所述地理位置确定参与本次共识的共识节点的数量，即上述第一数量，然后确定区块链的各共识节点中各自被随机选取的子用户的数量，即上述第二数量，并将该第二数量映射为共识节点参与共识时的权重值，基于各共识节点各自对应的权重值和信誉值，从各共识节点中选取出第一数量的共识节点作为参与本次共识的目标共识节点，最后通过目标共识节点对交易消息进行验证，得到验证结果。如此，本发明通过基于交易发起方所在的地理位置确定参与共识的节点数量，并基于区块链中各共识节点的权重值和信誉值确定最终参与本次共识的共识节点，提高了供应链中各参与方之间的交易信息的真实性和准确性。附图说明图1是本发明实施例方案涉及的终端设备硬件运行环境的设备结构示意图；图2为本发明基于区块链的供应链系统管理方法第一实施例的步骤流程示意图；图3为本发明基于区块链的供应链系统管理方法的一实施例所涉及的整体流程示意图；图4为本发明基于区块链的供应链系统管理装置一实施例的功能模块示意图。本发明目的的实现、功能特点及优点将结合实施例，参照附图做进一步说明。具体实施方式应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。参照图1，图1为本发明实施例方案涉及终端设备的硬件运行环境的设备结构示意图。本发明实施例终端设备可以是应用于数据处理技术领域的终端设备。具体地，该终端设备可以是智能手机、PC、平板电脑、便携计算机等等。如图1所示，该终端设备可以包括：处理器1001，例如CPU，通信总线1002，用户接口1003，网络接口1004，存储器1005。其中，通信总线1002用于实现这些组件之间的连接通信。用户接口1003可以包括显示屏、输入单元比如键盘，可选用户接口1003还可以包括标准的有线接口、无线接口。网络接口1004可选的可以包括标准的有线接口、无线接口。存储器1005可以是高速RAM存储器，也可以是稳定的存储器，例如磁盘存储器。存储器1005可选的还可以是独立于前述处理器1001的存储装置。本领域技术人员可以理解，图1中示出的终端设备结构并不构成对终端设备的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件布置。如图1所示，作为一种计算机存储介质的存储器1005中可以包括操作系统、网络通信模块、用户接口模块以及基于区块链的供应链系统管理程序。在图1所示的终端中，网络接口1004主要用于连接后台服务器，与后台服务器进行数据通信；用户接口1003主要用于连接客户端，与客户端进行数据通信；而处理器1001可以用于调用存储器1005中存储的基于区块链的供应链系统管理程序，并执行如下操作：获取待验证的交易信息，并基于所述交易信息对应的供应链参与方的所属地理位置确定第一数量，其中，所述第一数量为参与本次共识的共识节点的数量；确定区块链的各共识节点中各自被随机选取的子用户的第二数量，将所述第二数量映射为所述共识节点参与共识时的权重值；基于各所述权重值和各所述共识节点各自的信誉值，从各所述共识节点中选取所述第一数量的共识节点作为参与本次共识的目标共识节点；通过所述目标共识节点对所述交易消息进行验证，得到验证结果。可选地，处理器1001还可以用于调用存储器1005中存储的基于区块链的供应链系统管理程序，并执行如下操作：基于所述交易信息对应的供应链参与方的所属地理位置，检测所述供应链参与方是否处于单一地理区域；若检测到所述供应链参与方处于单一地理区域，则将预设数量作为第一数量；若检测到所述供应链参与方处于多个地理区域，则确定所述供应链参与方所处的地理区域的区域数量，并基于所述预设数量和所述区域数量计算所述第一数量。可选地，处理器1001还可以用于调用存储器1005中存储的基于区块链的供应链系统管理程序，并执行如下操作：基于可验证随机函数生成一个随机数；基于所述随机数的字节长度计算所述随机数对应的随机概率值；根据所述随机概率值确定第一共识节点中被随机选取的子用户的第二数量，其中，所述第一共识节点为区块链的各共识节点中的任意一个。可选地，处理器1001还可以用于调用存储器1005中存储的基于区块链的供应链系统管理程序，并执行如下操作：根据所述随机概率值确定所述随机概率值所在的概率分布区间；基于所述概率分布区间和二项分布的累积分布曲线确定所述第一共识节点中被随机选取的子用户的第二数量。可选地，处理器1001还可以用于调用存储器1005中存储的基于区块链的供应链系统管理程序，并执行如下操作：基于各所述权重值，从各所述共识节点中选取所述第一数量的第二共识节点；基于各所述共识节点各自的信誉值，检测所述第二共识节点的信誉值是否大于预设阈值；若检测到所述第二共识节点的信誉值大于所述预设阈值，则将所述第二共识节点作为参与本次共识的目标共识节点；若检测到所述第二共识节点的信誉值小于或者等于所述预设阈值，则将剩余节点中信誉值最大的第三共识节点替换所述第二共识节点，并将所述第三共识节点作为所述目标共识节点，其中，所述剩余节点为各所述共识节点中除所述第二共识节点之外的其他共识节点。可选地，处理器1001还可以用于调用存储器1005中存储的基于区块链的供应链系统管理程序，并执行如下操作：基于各所述权重值之间的大小关系，从各所述权重值中选取最大的多个目标权重值，其中，所述目标权重值的个数为所述第一数量；将各所述目标权重值各自对应的共识节点作为第二共识节点。可选地，处理器1001还可以用于调用存储器1005中存储的基于区块链的供应链系统管理程序，在所述通过所述目标共识节点对所述交易消息进行验证，得到验证结果的步骤之后，还执行如下操作：在所述验证结果为验证通过时，将所述交易信息计入区块链账本，并基于所述验证结果对所述目标共识节点的信誉值进行更新。基于上述的终端设备，提出本发明基于区块链的供应链系统管理方法的各实施例。请参照图2，图2为本发明基于区块链的供应链系统管理方法第一实施例的流程示意图。需要说明的是，虽然在流程图中示出了逻辑顺序，但是在某些情况下，本发明基于区块链的供应链系统管理方法当然也可以以不同于此处的顺序执行所示出或描述的步骤。在本发明基于区块链的供应链系统管理方法的第一实施例中，本发明基于区块链的供应链系统管理方法包括：步骤S10，获取待验证的交易信息，并基于所述交易信息对应的供应链参与方的所属地理位置确定第一数量，其中，所述第一数量为参与本次共识的共识节点的数量；在本实施例中，终端设备获取待验证的交易信息，并基于交易信息对应的供应链参与方的所属地理位置确定参与本次共识的共识节点的数量。进一步地，在一种可行的实施例中，上述步骤S10中，“基于所述交易信息对应的供应链参与方的所属地理位置确定第一数量”的步骤，可以包括：步骤S101，基于所述交易信息对应的供应链参与方的所属地理位置，检测所述供应链参与方是否处于单一地理区域；在本实施例中，终端设备基于待验证的交易信息对应的供应链参与方的所属地理位置，检测发起当前交易的供应链参与方是否处于单一地理区域。示例性地，预先将本供应链所在的地理范围分割成多个地理区域，检测发起当前交易的供应链参与方节点所在的地理位置属于单一地理区域或者多个地理区域。步骤S102，若检测到所述供应链参与方处于单一地理区域，则将预设数量作为第一数量；在本实施例中，终端设备若检测到供应链参与方处于单一地理区域，则将预设数量作为第一数量。需要说明的是，基于实际应用的不同设计需要，在不同可行的实施方式当中，上述预设数量可以是任何符合实际需求的取值，本发明不对预设阈值数量的具体大小进行限定。步骤S103，若检测到所述供应链参与方处于多个地理区域，则确定所述供应链参与方所处的地理区域的区域数量，并基于所述预设数量和所述区域数量计算所述第一数量。在本实施例中，终端设备若检测到发起当前交易的供应链参与方处于多个地理区域，则确定供应链参与方所处的地理区域的区域数量，并基于预设数量和区域数量计算第一数量。示例性地，在终端设备检测到发起当前交易的供应链参与节点为3个，且检测到3个参与节点各自分布在不同的地理区域时，可以确定参与节点所在地理区域的数量为3，假设预设数量为30，那么第一数量为90个，也就是说参与节点对应的区域数量与第一数量成正比例关系。步骤S20，确定区块链的各共识节点中各自被随机选取的子用户的第二数量，将所述第二数量映射为所述共识节点参与共识时的权重值；在本实施例中，终端设备确定区块链的各共识节点中各自被随机选取的子用户的数量，将第二数量映射为共识节点参与共识时的权重值。示例性地，终端设备将共识节点的权重值建模为子用户的个数，具体的，从各共识节点各自的子用户中随机选取多个子用户，并将每个共识节点中各自被选中的子用户的个数作为该共识节点在参与共识投票时的权重值。示例性地，在每一次选取共识节点时，对于权重为 w 的共识节点来说，其拥有的子用户个数为 w，在共识算法的特定步骤中每次使用子用户选取算法选取的子用户个数可能为 0，1，2，…，w 中的某一个值，共识节点被选中的子用户的个数即代表其在该次共识步骤中所具有的投票权重，也就是说，如果选中的子用户个数为 0，则代表在当前共识步骤中共识节点没有被选中；当选取的子用户数为 i 时，代表该共识节点在当前共识步骤中每发送一次投票消息，该共识节点在当前共识步骤中总计投票数为 i。具体的，如果一次选取中某权重值为 100 的共识节点有 5 个子用户被选中，则该共识节点在该次共识步骤中每发送一次投票消息，表示该节点实际上在所述共识步骤中总计投票数计为 5，依此类推。步骤S30，基于各所述权重值和各所述共识节点各自的信誉值，从各所述共识节点中选取所述第一数量的共识节点作为参与本次共识的目标共识节点；在本实施例中，终端设备基于各权重值和各共识节点各自的信誉值，从各共识节点中选取第一数量的共识节点作为参与本次共识的目标共识节点。进一步地，在一种可行的实施例中，上述步骤S30，可以包括：步骤S301，基于各所述权重值，从各所述共识节点中选取所述第一数量的第二共识节点；在本实施例中，终端设备基于各共识节点各自对应的权重值，从各共识节点中选取第一数量的共识节点。进一步地，在一种可行的实施例中，上述步骤S301，可以包括：步骤A10，基于各所述权重值之间的大小关系，从各所述权重值中选取最大的多个目标权重值，其中，所述目标权重值的个数为所述第一数量；步骤A20，将各所述目标权重值各自对应的共识节点作为第二共识节点。在本实施例中，终端设备基于各权重值之间的大小关系，从各权重值中选取最大的多个目标权重值，其中，目标权重值的个数与上述第一数量相等，将各目标权重值各自对应的共识节点作为第二共识节点。示例性地，假设第一数量为30，那么在确定各共识节点各自对应的权重值之后，将各权重值按照从大到小的规则进行排序，确定排列在前30位的权重值作为目标权重值，将30个目标权重值各自对应的共识节点作为第一共识节点。步骤S302，基于各所述共识节点各自的信誉值，检测所述第二共识节点的信誉值是否大于预设阈值；在本实施例中，终端设备基于各共识节点各自的信誉值，检测第二共识节点的信誉值是否大于预设阈值。需要说明的是，预先建立了区块链中所有共识节点对应的行为记录表，该行为记录表记录着供应链的全部节点共同维护的节点信誉，并可以根据节点信誉将各节点分类为良好节点、中间节点和恶意节点，应当理解的是，本发明将上述预设阈值设置为供应链中各中间节点各自对应的信誉值的均值，但基于实际应用的不同设计需要，在不同可行的实施方式当中，上述预设阈值可以是任何符合实际需求的取值，本发明不对预设阈值的具体大小进行限定。示例性地，终端设备依次检测权重值排列在前30的30个第二共识节点各自对应的信誉值是否大于预设阈值。步骤S303，若检测到所述第二共识节点的信誉值大于所述预设阈值，则将所述第二共识节点作为参与本次共识的目标共识节点；在本实施例中，终端设备若检测到第二共识节点的信誉值大于预设阈值，则将第二共识节点作为参与本次共识的目标共识节点。示例性地，终端设备如果检测到30个第二共识节点的信誉值均大于预设阈值，则将当前30个第二共识节点作为参与本次共识的目标共识节点。步骤S304，若检测到所述第二共识节点的信誉值小于或者等于所述预设阈值，则将剩余节点中信誉值最大的第三共识节点替换所述第二共识节点，并将所述第三共识节点作为所述目标共识节点，其中，所述剩余节点为各所述共识节点中除所述第二共识节点之外的其他共识节点。在本实施例中，终端设备若检测到第二共识节点的信誉值小于或者等于预设阈值，则将剩余节点中信誉值最高的共识节点替换第二共识节点，并将第三共识节点作为目标共识节点，其中，剩余节点为各共识节点中除第二共识节点之外的其他共识节点。示例性地，终端设备若检测到30个第二共识节点中存在4个共识节点的信誉值是小于预设阈值的，那么从各共识节点中除上述30个共识节点之外的其他共识节点中选出信誉值最高的4个共识节点，即上述第三共识节点，用第三共识节点代替4个信誉值小于预设阈值的共识节点，并将第三共识节点作为参与当前共识的目标共识节点。步骤S40，通过所述目标共识节点对所述交易消息进行验证，得到验证结果。在本实施例中，终端设备通过目标共识节点对交易消息进行验证，得到验证结果。示例性地，在选出30个目标共识节点之后，由各目标共识节点对当前交易信息进行投票，若超过3分之2的目标共识节点同意当前交易信息，那么确定该验证结果为验证通过。进一步地，在一种可行的实施例中，在上述步骤S40之后，还可以包括：步骤B10，在所述验证结果为验证通过时，将所述交易信息计入区块链账本，并基于所述验证结果对所述目标共识节点的信誉值进行更新。在本实施例中，终端设备在当前交易信息的验证结果为验证通过时，将该交易信息计入区块链账本，并基于该验证结果对目标共识节点的信誉值进行更新。示例性地，如图3所示，终端设备首先确定待验证交易信息的发起方所在的地理区域，基于地理区域确定当次共识所需要的共识节点的数量，然后基于区块链中各共识节点的权重值和信誉值，选取所需数量的目标共识节点，然后由多个目标共识节点对当前交易信息进行验证，得到验证结果，在当前交易信息的验证结果为验证通过时，将该交易信息计入区块链账本，并在全网广播，然后将同意当前交易信息的目标共识节点的信誉值加1，将反对当前交易信息的目标共识节点的信誉值减1，另外，成功发出投票消息的目标共识节点的信誉值保持不变。在本实施例中，本发明基于区块链的供应链系统管理方法通过获取待验证的交易信息，并基于交易信息对应的供应链参与方的所属地理位置确定参与本次共识的共识节点的第一数量；基于待验证的交易信息对应的供应链参与方的所属地理位置，检测发起当前交易的供应链参与方是否处于单一地理区域；若检测到供应链参与方处于单一地理区域，则将预设数量作为第一数量；若检测到发起当前交易的供应链参与方处于多个地理区域，则确定供应链参与方所处的地理区域的区域数量，并基于预设数量和区域数量，计算第一数量；确定区块链的各共识节点中各自被随机选取的子用户的第二数量，将第二数量映射为共识节点参与共识时的权重值；基于各权重值之间的大小关系，从各权重值中选取最大的多个目标权重值，其中，目标权重值的个数与上述第一数量相等，将各目标权重值各自对应的共识节点作为第二共识节点；基于各共识节点各自的信誉值，检测第二共识节点的信誉值是否大于预设阈值；若检测到第二共识节点的信誉值大于预设阈值，则将第二共识节点作为参与本次共识的目标共识节点；若检测到第二共识节点的信誉值小于或者等于预设阈值，则将剩余节点中信誉值最高的第三共识节点替换第二共识节点，并将第三共识节点作为目标共识节点，其中，剩余节点为各共识节点中除第二共识节点之外的其他共识节点；通过目标共识节点对交易消息进行验证，得到验证结果；在当前交易信息的验证结果为验证通过时，将该交易信息计入区块链账本，并基于该验证结果对目标共识节点的信誉值进行更新。如此，本发明实施例通过获取当前待验证的交易信息，基于该交易信息对应的供应链参与方的所述地理位置确定参与本次共识的共识节点的数量，即上述第一数量，然后确定区块链的各共识节点中各自被随机选取的子用户的数量，即上述第二数量，并将该第二数量映射为共识节点参与共识时的权重值，基于各共识节点各自对应的权重值和信誉值，从各共识节点中选取出第一数量的共识节点作为参与本次共识的目标共识节点，最后通过目标共识节点对交易消息进行验证，得到验证结果。如此，本发明通过基于交易发起方所在的地理位置确定参与共识的节点数量，并基于区块链中各共识节点的权重值和信誉值确定最终参与本次共识的共识节点，提高了供应链中各参与方之间的交易信息的真实性和准确性。进一步地，基于上述本发明基于区块链的供应链系统管理方法的第一实施例，提出本发明基于区块链的供应链系统管理方法的第二实施例。在本实施例中，在步骤S20中，“确定区块链的各共识节点中各自被随机选取的子用户的第二数量”的步骤，可以包括：步骤S201，基于可验证随机函数生成一个随机数；步骤S202，基于所述随机数的字节长度计算所述随机数对应的随机概率值；步骤S203，根据所述随机概率值确定第一共识节点中被随机选取的子用户的第二数量，其中，所述第一共识节点为区块链的各共识节点中的任意一个。在本实施例中，终端设备基于可验证随机函数生成一个随机数，基于该随机数的字节长度计算随机数对应的随机概率值，然后根据随机概率值确定第一共识节点中被随机选取的子用户的第二数量，其中，该第一共识节点为区块链的各共识节点中的任意一个。示例性地，在共识节点选取过程中，当所述随机数选取算法产生一个随机数时，可以通过随机数计算得到一个对应的概率值，具体计算方式为，假设随机数 R 对应的长度为32 字节，即 256 位，则该概率值为：然后，根据该概率值确定该共识节点中被随机选中的子用户的数量。进一步地，在一种可行的实施例中，上述步骤S203，可以包括：步骤C10，根据所述随机概率值确定所述随机概率值所在的概率分布区间；步骤C20，基于所述概率分布区间和二项分布的累积分布曲线确定所述第一共识节点中被随机选取的子用户的第二数量。在本实施例中，终端设备根据随机概率值确定随机概率值所在的概率分布区间，基于概率分布区间和二项分布的累积分布曲线确定第一共识节点中被随机选取的子用户的第二数量。示例性地，二项分布累积分布曲线对应的是二项分布的累积分布函数的曲线图。对于权重为 w 的共识节点来说，其拥有的子用户个数为 w，在共识算法的特定步骤中每次使用所述子用户选取算法选取的子用户个数可能为 0，1，2，…，w 中的某一个值。假设从区块链的公开账本中查询得到所有参与共识节点选取的权重值之和为 w，在特定的共识步骤中要选取的节点子用户的期望个数为 e，其中，该概率期望值可用于计算任意共识节点的任意一个子用户被选取的概率，则任意共识节点的任意一个子用户被选取的概率均为：并且所述共识节点的 m 个子用户被选取的概率为，此处/＞表示从w 个子用户中选出 m 个子用户的组合数。由此，在相对应的所述子用户选取的二项分布的累积分布曲线上，纵轴上的概率区间  可以被划分为/＞，以及剩余的系列区间/＞）。然后，通过查看该概率值位于所述概率区间划分中哪一个区间即可确定出所述共识节点被选取的子用户的个数。具体的，如果所述概率值位于/＞区间内，则所述共识节点被选取的子用户的个数为 6，依此类推。在本实施例中，本发明基于区块链的供应链系统管理方法通过基于可验证随机函数生成一个随机数，基于该随机数的字节长度计算随机数对应的随机概率值；根据随机概率值确定随机概率值所在的概率分布区间，基于概率分布区间和二项分布的累积分布曲线确定第一共识节点中被随机选取的子用户的第二数量。如此，通过随机选取共识节点中的子用户，确定被选子用户的数量，从而反映出共识节点的权重值、该共识节点被选中参与共识算法运行的概率以及该共识节点被选中后的投票权重，进而大大提高了共识节点选取的随机性和公平性。此外，本发明实施例还提供一种基于区块链的供应链系统管理装置。请参照图4，图4为本发明基于区块链的供应链系统管理装置一实施例的功能模块示意图，如图4所示，本发明基于区块链的供应链系统管理装置包括：共识节点数量模块10，用于获取待验证的交易信息，并基于所述交易信息对应的供应链参与方的所属地理位置确定第一数量，其中，所述第一数量为参与本次共识的共识节点的数量；权重值模块20，用于确定区块链的各共识节点中各自被随机选取的子用户的第二数量，将所述第二数量映射为各所述共识节点各自参与共识时的权重值；目标共识节点模块30，用于基于各所述权重值和各所述共识节点各自的信誉值，从各所述共识节点中选取所述第一数量的共识节点作为参与本次共识的目标共识节点；验证模块40，用于通过所述目标共识节点对待交易消息进行验证，得到验证结果。可选地，共识节点数量模块10，包括：地理区域检测单元，用于基于所述交易信息对应的供应链参与方的所属地理位置，检测所述供应链参与方是否处于单一地理区域；单一区域单元，用于若检测到所述供应链参与方处于单一地理区域，则将预设数量作为第一数量；非单一区域单元，用于若检测到所述供应链参与方处于多个地理区域，则确定所述供应链参与方所处的地理区域的区域数量，并基于所述预设数量和所述区域数量计算所述第一数量。可选地，权重值模块20，包括：随机函数单元，用于基于可验证随机函数生成一个随机数；随机概率值单元，用于基于所述随机数的字节长度计算所述随机数对应的随机概率值；子用户数量单元，用于根据所述随机概率值确定第一共识节点中被随机选取的子用户的第二数量，其中，所述第一共识节点为区块链的各共识节点中的任意一个。可选地，子用户数量单元，包括：分布区间子单元，用于根据所述随机概率值确定所述随机概率值所在的概率分布区间；二项分布子单元，用于基于所述概率分布区间和二项分布的累积分布曲线确定所述第一共识节点中被随机选取的子用户的第二数量。可选地，目标共识节点模块30，包括：权重值单元，用于基于各所述权重值，从各所述共识节点中选取所述第一数量的第二共识节点；信誉值单元，用于基于各所述共识节点各自的信誉值，检测所述第二共识节点的信誉值是否大于预设阈值；节点保留单元，用于若检测到所述第二共识节点的信誉值大于所述预设阈值，则将所述第二共识节点作为参与本次共识的目标共识节点；节点替换单元，用于若检测到所述第二共识节点的信誉值小于或者等于所述预设阈值，则将剩余节点中信誉值最大的第三共识节点替换所述第二共识节点，并将所述第三共识节点作为所述目标共识节点，其中，所述剩余节点为各所述共识节点中除所述第二共识节点之外的其他共识节点。可选地，权重值单元，包括：权重值选取子单元，用于基于各所述权重值之间的大小关系，从各所述权重值中选取最大的多个目标权重值，其中，所述目标权重值的个数为所述第一数量；第二共识节点子单元，用于将各所述目标权重值各自对应的共识节点作为第二共识节点。可选地，本发明基于区块链的供应链系统管理装置，还包括：验证通过模块，用于在所述验证结果为验证通过时，将所述交易信息计入区块链账本，并基于所述验证结果对所述目标共识节点的信誉值进行更新。本发明还提供一种计算机存储介质，该计算机存储介质上存储有基于区块链的供应链系统管理程序，上述基于区块链的供应链系统管理程序被处理器执行时实现如以上任一项实施例所述的基于区块链的供应链系统管理程序方法的步骤。本发明计算机存储介质的具体实施例与上述本发明基于区块链的供应链系统管理程序方法各实施例基本相同，在此不作赘述。本发明还提供一种计算机程序产品，所述计算机程序产品包括计算机程序，所述计算机程序被处理器执行时实现如以上任一项实施例所述的本发明基于区块链的供应链系统管理方法的步骤，在此不作赘述。需要说明的是，在本文中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者系统不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者系统所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括该要素的过程、方法、物品或者系统中还存在另外的相同要素。上述本发明实施例序号仅仅为了描述，不代表实施例的优劣。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到上述实施例方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在如上所述的一个存储介质中，包括若干指令用以使得一台终端设备执行本发明各个实施例所述的方法。以上仅为本发明的优选实施例，并非因此限制本发明的专利范围，凡是利用本发明说明书及附图内容所作的等效结构或等效流程变换，或直接或间接运用在其他相关的技术领域，均同理包括在本发明的专利保护范围内。
