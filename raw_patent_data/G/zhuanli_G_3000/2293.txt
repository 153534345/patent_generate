标题title
一种双余度机电作动系统控制器的自主式余度管理方法
摘要abst
本发明涉及自动控制技术领域，具体涉及一种双余度机电作动系统控制器的自主式余度管理方法，包括：当主余度控制通道的逻辑综合芯片检测到主余度控制通道的算法执行芯片陷入故障时，主余度控制通道的逻辑综合芯片主导的余度控制通道切换；当备余度控制通道的算法执行芯片检测到主余度控制通道的算法执行芯片陷入故障时，备余度控制通道的算法执行芯片主导的余度控制通道切换；当备余度控制通道的逻辑综合芯片检测到主余度控制通道的逻辑综合芯片陷入故障时，备余度控制通道的逻辑综合芯片主导的余度控制通道切换。本方法在保证低成本的前提下，实现对余度控制通道切换，保证控制器的正常运行。
权利要求书clms
1.一种双余度机电作动系统控制器的自主式余度管理方法，其特征在于，包括：当主余度控制通道的逻辑综合芯片检测到主余度控制通道的算法执行芯片陷入故障时，由主余度控制通道的逻辑综合芯片主导的余度控制通道切换；当备余度控制通道的算法执行芯片检测到主余度控制通道的算法执行芯片陷入故障时，由备余度控制通道的算法执行芯片主导的余度控制通道切换；当备余度控制通道的逻辑综合芯片检测到主余度控制通道的逻辑综合芯片陷入故障时，由备余度控制通道的逻辑综合芯片主导的余度控制通道切换。2.根据权利要求1所述的一种双余度机电作动系统控制器的自主式余度管理方法，其特征在于，当主余度控制通道的逻辑综合芯片检测到主余度控制通道的算法执行芯片陷入故障时，余度控制通道切换的步骤为：通过主余度控制通道的逻辑综合芯片封锁主余度控制通道的输出；并通过主余度控制通道的逻辑综合芯片将余度控制权移交给备余度控制通道的算法执行芯片；通过备余度控制通道的算法执行芯片向备余度控制通道的逻辑综合芯片发送开启备余度控制通道的输出指令；在备余度控制通道的逻辑综合芯片接收到备余度控制通道的输出指令后，并控制备余度控制通道开始输出。3.根据权利要求1所述的一种双余度机电作动系统控制器的自主式余度管理方法，其特征在于，当备余度控制通道的算法执行芯片检测到主余度控制通道的算法执行芯片陷入故障时，余度控制通道切换的步骤为：通过主余度控制通道的逻辑综合芯片封锁主余度控制通道的输出；并通过主余度控制通道的逻辑综合芯片将余度控制权移交给备余度控制通道的算法执行芯片；通过备余度控制通道的算法执行芯片向备余度控制通道的逻辑综合芯片发送开启备余度控制通道的输出指令；在备余度控制通道的逻辑综合芯片接收到备余度控制通道的输出指令后，并控制备余度控制通道开始输出。4.根据权利要求3所述的一种双余度机电作动系统控制器的自主式余度管理方法，其特征在于，通过主余度控制通道的逻辑综合芯片封锁主余度控制通道的输出的步骤包括：备余度控制通道的算法执行芯片通过I/O端口，向主余度控制通道的逻辑综合芯片发出封锁主余度控制通道输出指令；在所述封锁主余度控制通道的输出指令被主余度控制通道的逻辑综合芯片接收后，封锁主余度控制通道的输出。5.根据权利要求1所述的一种双余度机电作动系统控制器的自主式余度管理方法，其特征在于，当备余度控制通道的逻辑综合芯片检测到主余度控制通道的逻辑综合芯片陷入故障时，余度控制通道切换的步骤为：通过主余度控制通道的逻辑综合芯片封锁主余度控制通道的输出；并通过主余度控制通道的逻辑综合芯片将余度控制权移交给备余度控制通道的算法执行芯片；通过备余度控制通道的算法执行芯片向备余度控制通道的逻辑综合芯片发送开启备余度控制通道的输出指令；在备余度控制通道的逻辑综合芯片接收到备余度控制通道的输出指令后，并控制备余度控制通道开始输出。6.根据权利要求2或3或5所述的一种双余度机电作动系统控制器的自主式余度管理方法，其特征在于，通过主余度控制通道的逻辑综合芯片将余度控制权移交给备余度控制通道的算法执行芯片的步骤包括：主余度控制通道的逻辑综合芯片通过I/O端口，向备余度控制通道的算法执行芯片发出余度控制权移交指令；备余度控制通道的算法执行芯片接收余度控制权移交指令，并进行余度控制。7.根据权利要求2或3或5所述的一种双余度机电作动系统控制器的自主式余度管理方法，其特征在于，备余度控制通道的算法执行芯片是通过并行通信总线，向备余度控制通道的逻辑综合芯片发送开启备余度控制通道的输出指令。8.根据权利要求5所述的一种双余度机电作动系统控制器的自主式余度管理方法，其特征在于，通过主余度控制通道的逻辑综合芯片封锁主余度控制通道的输出的步骤包括：备余度控制通道的逻辑综合芯片通过I/O端口，向主余度控制通道的算法执行芯片发送封锁主余度控制通道的输出的指令；主余度控制通道的算法执行芯片通过I/O端口，向主余度控制通道的逻辑综合芯片发送逻辑触发指令；在逻辑触发指令被主余度控制通道的逻辑综合芯片接收后，封锁主余度控制通道的输出。9.根据权利要求2或4或8所述的一种双余度机电作动系统控制器的自主式余度管理方法，其特征在于，通过主余度控制通道的逻辑综合芯片的内部逻辑电路封锁主余度控制通道的输出。10.根据权利要求1所述的一种双余度机电作动系统控制器的自主式余度管理方法，其特征在于，还包括：当主余度控制通道的逻辑综合芯片检测到备余度控制通道的逻辑综合芯片陷入故障时，本次上电工作期间不进行余度控制通道切换；备余度控制通道的逻辑综合芯片检测到备余度控制通道的算法执行芯片故障时，本次上电工作期间不再进行余度控制通道切换。
说明书desc
技术领域本发明涉及自动控制技术领域，具体涉及一种双余度机电作动系统控制器的自主式余度管理方法。背景技术余度化的控制器广泛应用于对可靠性要求较高的应用场合，如机载机电作动系统。三余度广泛用于余度化控制器的自我监控机制，其优点是三个子系统可以形成一套三表决的自监控机制，以确定某个子系统是否故障。但三套子系统之间信号交联复杂，带来设计难度和生产成本增大。因此需要设计一种可靠的、能有效进行自监控的双余度机电作动系统控制器自监控机制，在显著提高控制器可靠性的同时，有效降低设计和生产成本。在双余度机电作动系统中，需要驱动电机完成作动任务，由于电机驱动控制频率高，需要运算能力强的控制芯片执行其控制算法，使用浮点类处理器，如单片机、数字信号处理器作为系统的算法执行芯片，完成系统状态采集以及控制算法运算等任务，同时，在双余度机电作动系统中，由于各个余度控制通道之间的信息交流、故障诊断以及余度管理的多任务需要，对双余度作动系统控制器的外设接口、逻辑运算能力以及时序的准确性也提出了较高的要求。因此需要一款硬件资源丰富、配置灵活的芯片，来承担外扩接口、外扩存储、时序管理以及逻辑运算等任务。因此，基于双余度系统处理较大数据量的需要，使用可编程逻辑芯片，如FPGA、CPLD等，作为系统的逻辑综合芯片，来扩展硬件资源。将作动系统控制器余度化后，带来了如何对余度进行管理的问题，尤其是在控制器余度管理问题上，一个重点是要对控制芯片的故障进行监测，更重要的是在监测到故障后，实现两个余度控制通道之间可靠地余度控制通道切换。现有技术中的系统有主、从两个算法执行芯片，通过心跳信号完成互检，同时通过SPI闭环检测主、从控制通道的通信，通过硬件搭建选择开关进行主、从余度控制通道切换，然而，该控制过程中在进行余度控制通道切换时需要增加硬件电路，故，其成本比较高和结构复杂度。因此，需要提供一种双余度机电作动系统控制器的自主式余度管理方法以解决上述问题。发明内容本发明提供一种双余度机电作动系统控制器的自主式余度管理方法，通过两个通道内的芯片对余度的自主切换，以解决现有的余度控制通道切换时需要增加硬件电路，导致成本高，结构复杂的问题。本发明的一种双余度机电作动系统控制器的自主式余度管理方法采用如下技术方案：包括：当主余度控制通道的逻辑综合芯片检测到主余度控制通道的算法执行芯片陷入故障时，由主余度控制通道的逻辑综合芯片主导的余度控制通道切换；当备余度控制通道的算法执行芯片检测到主余度控制通道的算法执行芯片陷入故障时，由备余度控制通道的算法执行芯片主导的余度控制通道切换；当备余度控制通道的逻辑综合芯片检测到主余度控制通道的逻辑综合芯片陷入故障时，由备余度控制通道的逻辑综合芯片主导的余度控制通道切换。优选的，当主余度控制通道的逻辑综合芯片检测到主余度控制通道的算法执行芯片陷入故障时，余度控制通道切换的步骤为：通过主余度控制通道的逻辑综合芯片封锁主余度控制通道的输出；并通过主余度控制通道的逻辑综合芯片将余度控制权移交给备余度控制通道的算法执行芯片；通过备余度控制通道的算法执行芯片向备余度控制通道的逻辑综合芯片发送开启备余度控制通道的输出指令；在备余度控制通道的逻辑综合芯片接收到备余度控制通道的输出指令后，并控制备余度控制通道开始输出。优选的，当备余度控制通道的算法执行芯片检测到主余度控制通道的算法执行芯片陷入故障时，余度控制通道切换的步骤为：通过主余度控制通道的逻辑综合芯片封锁主余度控制通道的输出；并通过主余度控制通道的逻辑综合芯片将余度控制权移交给备余度控制通道的算法执行芯片；通过备余度控制通道的算法执行芯片向备余度控制通道的逻辑综合芯片发送开启备余度控制通道的输出指令；在备余度控制通道的逻辑综合芯片接收到备余度控制通道的输出指令后，并控制备余度控制通道开始输出。优选的，通过主余度控制通道的逻辑综合芯片封锁主余度控制通道的输出的步骤包括：备余度控制通道的算法执行芯片通过I/O端口，向主余度控制通道的逻辑综合芯片发出封锁主余度控制通道输出指令；在封锁主余度控制通道的输出指令被主余度控制通道的逻辑综合芯片接收后，封锁主余度控制通道的输出。优选的，当备余度控制通道的逻辑综合芯片检测到主余度控制通道的逻辑综合芯片陷入故障时，余度控制通道切换的步骤为：通过主余度控制通道的逻辑综合芯片封锁主余度控制通道的输出；并通过主余度控制通道的逻辑综合芯片将余度控制权移交给备余度控制通道的算法执行芯片；通过备余度控制通道的算法执行芯片向备余度控制通道的逻辑综合芯片发送开启备余度控制通道的输出指令；在备余度控制通道的逻辑综合芯片接收到备余度控制通道的输出指令后，并控制备余度控制通道开始输出。优选的，通过主余度控制通道的逻辑综合芯片将余度控制权移交给备余度控制通道的算法执行芯片的步骤包括：主余度控制通道的逻辑综合芯片通过I/O端口，向备余度控制通道的算法执行芯片发出余度控制权移交指令；备余度控制通道的算法执行芯片接收余度控制权移交指令，并进行余度控制。优选的，备余度控制通道的算法执行芯片是通过并行通信总线，向备余度控制通道的逻辑综合芯片发送开启备余度控制通道的输出指令。优选的，通过主余度控制通道的逻辑综合芯片封锁主余度控制通道的输出的步骤包括：备余度控制通道的逻辑综合芯片通过I/O端口，向主余度控制通道的算法执行芯片发送封锁主余度控制通道的输出的指令；主余度控制通道的算法执行芯片通过I/O端口，向主余度控制通道的逻辑综合芯片发送逻辑触发指令；在逻辑触发指令被主余度控制通道的逻辑综合芯片接收后，封锁主余度控制通道的输出。优选的，通过主余度控制通道的逻辑综合芯片的内部逻辑电路封锁主余度控制通道的输出。优选的，还包括：当主余度控制通道的逻辑综合芯片检测到备余度控制通道的逻辑综合芯片陷入故障时，本次上电工作期间不进行余度控制通道切换；备余度控制通道的逻辑综合芯片检测到备余度控制通道的算法执行芯片故障时，本次上电工作期间不再进行余度控制通道切换。本发明的有益效果是：通过主余度控制通道的逻辑综合芯片检测到主余度控制通道的算法执行芯片，来进行主余度控制通道内部的算法执行芯片是否故障，通过备余度控制通道的算法执行芯片检测主余度控制通道的算法执行芯片之间的通信，来判断主余度控制通道的算法执行芯片是否故障，并在判断为故障时进行余度控制通道切换，通过备余度控制通道的逻辑综合芯片检测余度控制通道的逻辑综合芯片是否故障，并在判断为故障时进行余度控制通道切换，即本发明的余度控制通道切换都是通过两个控制通道内的芯片进行完成的，不需要外接电路或者芯片，故此，本发明的在保证低成本的前提下，实现对余度控制通道切换，保证控制器的正常运行。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明的一种双余度机电作动系统控制器的自主式余度管理方法的流程图。图2为本发明的一种双余度机电作动系统控制器的自主式余度管理方法的两个控制通道之间通信的示意图。图3为本发明的一种双余度机电作动系统控制器的自主式余度管理方法中的主余度控制通道的逻辑综合芯片主导余度控制通道切换时的示意图。图4为本发明的一种双余度机电作动系统控制器的自主式余度管理方法中的备余度控制通道的算法执行芯片主导余度控制通道切换时的示意图。图5为本发明的一种双余度机电作动系统控制器的自主式余度管理方法中的备余度控制通道的逻辑综合芯片主导余度控制通道切换时的示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本发明的一种双余度机电作动系统控制器的自主式余度管理方法的实施例，如图1所示，包括：S1、当主余度控制通道的逻辑综合芯片检测到主余度控制通道的算法执行芯片陷入故障时，由主余度控制通道的逻辑综合芯片主导的余度控制通道切换。具体的，如图1、图2和图3所示，步骤S1中的余度控制通道切换的具体步骤为：通过主余度控制通道的逻辑综合芯片C封锁主余度控制通道的输出；如图3所示，并通过主余度控制通道的逻辑综合芯片C将余度控制权移交给备余度控制通道的算法执行芯片B；通过备余度控制通道的算法执行芯片B向备余度控制通道的逻辑综合芯片D发送开启备余度控制通道的输出指令。其中，如图2和图3所示，本实施的S1步骤中通过主余度控制通道的逻辑综合芯片C将余度控制权移交给备余度控制通道的算法执行芯片B的具体步骤为：主余度控制通道的逻辑综合芯片C通过I/O端口，向备余度控制通道的算法执行芯片B发出余度控制权移交指令；备余度控制通道的算法执行芯片B接收余度控制权移交指令，此时即完成了余度控制权的移交。其中，如图2和图3所示，步骤S1中的备余度控制通道的算法执行芯片B是通过并行通信总线，向备余度控制通道的逻辑综合芯片D发送开启备余度控制通道的输出指令，备余度控制通道的逻辑综合芯片D接收到备余度控制通道的输出指令，并控制备余度控制通道开始输出，至此，完成余度控制通道切换。S2、当备余度控制通道的算法执行芯片检测到主余度控制通道的算法执行芯片陷入故障时，由备余度控制通道的算法执行芯片主导的余度控制通道切换；具体的，如图1、图2和图4所示，步骤S2中的余度控制通道切换的具体步骤为：通过主余度控制通道的逻辑综合芯片C封锁主余度控制通道的输出；并通过主余度控制通道的逻辑综合芯片C将余度控制权移交给备余度控制通道的算法执行芯片B；通过备余度控制通道的算法执行芯片B向备余度控制通道的逻辑综合芯片D发送开启备余度控制通道的输出指令，备余度控制通道的逻辑综合芯片D接收到备余度控制通道的输出指令，并控制备余度控制通道开始输出，至此，完成余度控制通道切换。其中，如图2和图4所示，在步骤S2中，通过主余度控制通道的逻辑综合芯片C封锁主余度控制通道的输出时，由于当前的当备余度控制通道的算法执行芯片检测到主余度控制通道的算法执行芯片陷入故障，故需要通过备余度控制通道的算法执行芯片B通过I/O端口，向主余度控制通道的逻辑综合芯片C发出封锁主余度控制通道输出指令；在封锁主余度控制通道的输出指令被主余度控制通道的逻辑综合芯片C接收后，通过主余度控制通道的逻辑综合芯片C的内部逻辑电路封锁主余度控制通道的输出。其中，如图2和图4所示，在步骤S2中，通过主余度控制通道的逻辑综合芯片C将余度控制权移交给备余度控制通道的算法执行芯片B的具体步骤为：主余度控制通道的逻辑综合芯片C通过I/O端口，向备余度控制通道的算法执行芯片B发出余度控制权移交指令；备余度控制通道的算法执行芯片B接收余度控制权移交指令，并进行余度控制，此时即完成了余度控制权的移交。其中，在步骤S2中，如图4所示，具体的，备余度控制通道的算法执行芯片B是通过并行通信总线，向备余度控制通道的逻辑综合芯片D发送开启备余度控制通道的输出指令。S3、当备余度控制通道的逻辑综合芯片检测到主余度控制通道的逻辑综合芯片陷入故障时，由备余度控制通道的逻辑综合芯片主导的余度控制通道切换；具体的，如图1、图2和图5所示，S3步骤中的余度控制通道切换的步骤为：通过主余度控制通道的逻辑综合芯片C封锁主余度控制通道的输出；并通过主余度控制通道的逻辑综合芯片C将余度控制权移交给备余度控制通道的算法执行芯片B；通过备余度控制通道的算法执行芯片向备余度控制通道的逻辑综合芯片D发送开启备余度控制通道的输出指令；备余度控制通道的逻辑综合芯片D接收到备余度控制通道的输出指令，并控制备余度控制通道开始输出。其中，S3步骤中，通过主余度控制通道的逻辑综合芯片C将余度控制权移交给备余度控制通道的算法执行芯片B的步骤包括：如图2和图5所示，主余度控制通道的逻辑综合芯片C是通过I/O端口，向备余度控制通道的算法执行芯片B发出余度控制权移交指令；当备余度控制通道的算法执行芯片B接收到余度控制权移交指令，并进行余度控制，即完成了余度控制权的移交。其中，如图2和图5所示，S3步骤中通过主余度控制通道的逻辑综合芯片C封锁主余度控制通道的输出的步骤包括：备余度控制通道的逻辑综合芯片D通过I/O端口，向主余度控制通道的算法执行芯片A发送封锁主余度控制通道的输出的指令；主余度控制通道的算法执行芯片A通过I/O端口，向主余度控制通道的逻辑综合芯片C发送逻辑触发指令；在逻辑触发指令被主余度控制通道的逻辑综合芯片C接收后，逻辑综合芯片C封锁主余度控制通道的输出，其中，进行主控制通道的输出封锁是通过主余度控制通道的逻辑综合芯片C的内部逻辑电路进行封锁的。其中，如图5所示，S3步骤中备余度控制通道的算法执行芯片B是通过并行通信总线，向备余度控制通道的逻辑综合芯片D发送开启备余度控制通道的输出指令的。需要说明的是，本发明中还包括：当主余度控制通道的逻辑综合芯片C检测到备余度控制通道的逻辑综合芯片D陷入故障时，以及当备余度控制通道的逻辑综合芯片D检测到备余度控制通道的算法执行芯片B故障时，说明备余度控制通道的逻辑综合芯片D或者备余度控制通道的算法执行芯片B并不能使用，故本次上电工作期间均不再进行余度控制通道切换。综上所述，本发明实施例提供的一种双余度机电作动系统控制器的自主式余度管理方法，通过主余度控制通道的逻辑综合芯片检测到主余度控制通道的算法执行芯片，来进行主余度控制通道内部的算法执行芯片是否故障，通过备余度控制通道的算法执行芯片检测主余度控制通道的算法执行芯片之间的通信，来判断主余度控制通道的算法执行芯片是否故障，并在判断为故障时进行余度控制通道切换，通过备余度控制通道的逻辑综合芯片检测余度控制通道的逻辑综合芯片是否故障，并在判断为故障时进行余度控制通道切换，即本发明的余度控制通道切换都是通过两个控制通道内的芯片进行完成的，不需要外接电路或者芯片，故此，本发明的在保证低成本的前提下，实现对余度控制通道切换，保证控制器的正常运行。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
