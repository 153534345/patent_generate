标题title
一种机房运维监控数据处理方法及系统
摘要abst
本发明涉及数据处理技术领域，提出了一种机房运维监控数据处理方法及系统，包括：获取使用率变化特征曲线；根据使用率变化特征曲线获取每个时间点的超阈值程度，并获取超阈值序列；根据超阈值序列中的时间点及其对应的CPU使用率获取持续性程度；并获取预警必要程度高的数据点；根据时间点的持续性程度获取待处理序列，根据待处理序列中的每个时间点与相邻时间点的时间差异以及超阈值程度差异获取节奏性程度值；并获取预警必要程度高的数据点；标记所有预警必要程度高的数据点，实现机房的运维监控管理。本发明结合具体超阈值前后数据点在特征空间中的波动特点进行持续性和节奏性的评估，实现准确的异常监测。
权利要求书clms
1.一种机房运维监控数据处理方法，其特征在于，该方法包括以下步骤：根据CPU使用率获取使用率变化特征曲线；根据使用率变化特征曲线获取每个时间点的超阈值程度，并根据超阈值程度获取超阈值序列；根据超阈值序列中的时间点所在使用率变化特征曲线中的时间位置以及该位置与其周围时间点对应的CPU使用率获取超阈值序列中的时间点的持续性程度；根据超阈值序列中时间点的持续性程度获取预警必要程度高的数据点；根据超阈值序列中时间点的持续性程度获取待处理序列，根据待处理序列中的每个时间点与其在待处理序列中的相邻时间点的时间差异以及待处理序列中每个时间点与其相邻时间点超阈值程度的差异获取待处理序列中每个时间点的节奏性程度值；根据待处理序列中的时间点的节奏性程度值获取预警必要程度高的数据点；标记所有预警必要程度高的数据点，实现机房的运维监控管理。2.根据权利要求1所述的一种机房运维监控数据处理方法，其特征在于，所述根据CPU使用率获取使用率变化特征曲线的方法为：每1s采集一次系统CPU的CPU使用率，将所采集的CPU使用率按照时间构成使用率序列，根据使用率序列将获取得到的各时间点对应其CPU使用率数据标注在空间坐标系中，并连接各数据点构成一条使用率变化特征曲线，使用率变化特征曲线的横坐标是时间点，纵坐标是每个时间点对应的CPU使用率。3.根据权利要求1所述的一种机房运维监控数据处理方法，其特征在于，所述根据使用率变化特征曲线获取每个时间点的超阈值程度，并根据超阈值程度获取超阈值序列的方法为：给定预设预警阈值，在使用率变化特征曲线中，令每个时间点的CPU使用率和预设预警阈值作差得到每个时间点的超阈值程度；将超阈值程度大于0的时间点提取出来，将提取出来的时间点对应的CPU使用率按照时间顺序排序得到超阈值序列。4.根据权利要求1所述的一种机房运维监控数据处理方法，其特征在于，所述根据超阈值序列中的时间点所在使用率变化特征曲线中的时间位置以及该位置与其周围时间点对应的数据获取超阈值序列中的时间点的持续性程度的方法为：将超阈值序列中的数据点记为标准数据点，对每个标准数据点获取一个选取区域，获取标准数据点在使用率变化特征曲线中的位置，将该位置的前一个时间点和后一个时间点提取出来，根据标准时间点与其相邻时间点的数据差异以及标准数据点的选取区域中的标准数据点的数量获取标准时间点的持续性程度。5.根据权利要求4所述的一种机房运维监控数据处理方法，其特征在于，所述对每个标准数据点获取一个选取区域的方法为：对于每个标准时间点获取一个时间点相邻选取值，每个标准时间点的时间点相邻选取值为标准时间点在使用率变化特征曲线中向左选取/＞个时间点，向右选取/＞个时间点，由此构成了每个标准时间点的选取区域。6.根据权利要求5所述的一种机房运维监控数据处理方法，其特征在于，所述根据标准时间点与其相邻时间点的数据差异以及标准数据点的选取区域中的标准数据点的数量获取标准时间点的持续性程度的方法为：式中，表示使用率变化特征曲线上的第i个时间点的CPU使用率是标准时间点的CPU使用率，/＞表示使用率变化特征曲线上的第i+1个时间点的CPU使用率，/＞表示使用率变化特征曲线上的第i-1个时间点的CPU使用率，/＞表示以自然常数为底的指数函数，表示以使用率变化特征曲线上的第i个时间点为中心的选取区域内标准时间点的数量，/＞表示标准时间点的时间点相邻选取值，/＞表示正比例归一化函数，/＞和/＞分别表示权重值，/＞表示使用率变化特征曲线上的第i个时间点的持续性程度。7.根据权利要求1所述的一种机房运维监控数据处理方法，其特征在于，所述根据待处理序列中的每个时间点与其在待处理序列中的相邻时间点的时间差异以及待处理序列中每个时间点与其相邻时间点超阈值程度的差异获取待处理序列中每个时间点的节奏性程度值方法为：将待处理序列中的时间点记为处理时间点，对于每个处理时间点获取其相邻处理时间点；获取处理时间点和其相邻处理时间点的超阈值程度的均值记为超阈值程度均值，根据处理时间点和其相邻处理时间点按照时间顺序相邻作差得到的差值以及处理时间点的超阈值程度和超阈值程度均值的差异获取处理时间点的节奏性程度值。8.根据权利要求7所述的一种机房运维监控数据处理方法，其特征在于，所述对于每个处理时间点获取其相邻处理时间点的方法为：获取该处理时间点在待处理序列中依照顺序得到的两个处理时间点，将这两个提取出来的处理时间点记为相邻处理时间点。9.根据权利要求7所述的一种机房运维监控数据处理方法，其特征在于，所述根据处理时间点和其相邻处理时间点按照时间顺序相邻作差得到的差值以及处理时间点的超阈值程度和超阈值程度均值的差异获取处理时间点的节奏性程度值的方法为：式中，表示待处理序列中第a个处理时间点在使用率变化特征曲线中的时间值，/＞表示待处理序列中第a+1个处理时间点在使用率变化特征曲线中的时间值，/＞表示待处理序列中第a+2个处理时间点在使用率变化特征曲线中的时间值，/＞待处理序列中第a个处理时间点对应的超阈值程度，/＞表示待处理序列中第a个处理时间点与其相邻处理时间点的超阈值程度的均值，/＞表示以自然常数为底的指数函数，/＞和/＞表示为权重参数，/＞表示待处理序列中第a个处理时间点的节奏性程度值。10.一种机房运维监控数据处理系统，包括存储器、处理器以及存储在所述存储器中并在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1-9任意一项所述方法的步骤。
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及一种机房运维监控数据处理方法及系统。背景技术机房运维监控是指通过监测和收集机房内各种设备和系统的运行数据，对机器、网络、电力、环境等方面进行全面的监管；其可以提高机房的稳定性，及时发现并处理潜在的故障和问题，并通过持续的监控和分析，识别预测机房中可能出现的问题采取措施避免故障的发生从而降低机房故障率。而其中设备的CPU使用率变化情况时衡量计算机性能和负载的重要指标之一，CPU使用率是指机器中CPU工作负荷占用情况的百分比；通过监测设备CPU使用率，可以及时掌握机器当前的资源占用情况，及时发现资源不足或过剩的问题。采取相对应的措施优化性能；同时可以及时发现故障和异常：异常的CPU使用率波动可能会导致系统不稳定或出现故障检测CPU使用率可及时发现该类异常，提高系统的可靠性和稳定性。系统对于计算机设备运行时CPU使用率变化的异常监测方式通常采取过阈警告；即对CPU使用率预设合理的上限阈值；当某一时刻获取的目标使用率超过了预设的阈值；则会出现异常预警提示管理员及时发现问题并采取对应措施；而由于计算机面向于多样性场景和复杂的运行环境；其造成CPU使用率增高即数值超过阈值的原因各不相同；即在某些情况下CPU使用率高并非异常；而为一种正常的运行表现；此时常规的异常使用率监测方式并不合理，得到的监测预警结果也并不准确；因此本方案针对该问题对数据进行区分，准确地实现对异常使用率数据的识别监测。发明内容本发明提供一种机房运维监控数据处理方法及系统，以解决由于计算机面向于多样性场景和复杂的运行环境下导致的CPU使用率高并非异常的问题，所采用的技术方案具体如下：第一方面，本发明一个实施例提供了一种机房运维监控数据处理方法，该方法包括以下步骤：根据CPU使用率获取使用率变化特征曲线；根据使用率变化特征曲线获取每个时间点的超阈值程度，并根据超阈值程度获取超阈值序列；根据超阈值序列中的时间点所在使用率变化特征曲线中的时间位置以及该位置与其周围时间点对应的CPU使用率获取超阈值序列中的时间点的持续性程度；根据超阈值序列中时间点的持续性程度获取预警必要程度高的数据点；根据超阈值序列中时间点的持续性程度获取待处理序列，根据待处理序列中的每个时间点与其在待处理序列中的相邻时间点的时间差异以及待处理序列中每个时间点与其相邻时间点超阈值程度的差异获取待处理序列中每个时间点的节奏性程度值；根据待处理序列中的时间点的节奏性程度值获取预警必要程度高的数据点；标记所有预警必要程度高的数据点，实现机房的运维监控管理。优选的，所述根据CPU使用率获取使用率变化特征曲线的方法为：每1s采集一次系统CPU的CPU使用率，将所采集的CPU使用率按照时间构成使用率序列，根据使用率序列将获取得到的各时间点对应其CPU使用率数据标注在空间坐标系中，并连接各数据点构成一条使用率变化特征曲线，使用率变化特征曲线的横坐标是时间点，纵坐标是每个时间点对应的CPU使用率。优选的，所述根据使用率变化特征曲线获取每个时间点的超阈值程度，并根据超阈值程度获取超阈值序列的方法为：给定预设预警阈值，在使用率变化特征曲线中，令每个时间点的CPU使用率和预设预警阈值作差得到每个时间点的超阈值程度；将超阈值程度大于0的时间点提取出来，将提取出来的时间点对应的CPU使用率按照时间顺序排序得到超阈值序列。优选的，所述根据超阈值序列中的时间点所在使用率变化特征曲线中的时间位置以及该位置与其周围时间点对应的数据获取超阈值序列中的时间点的持续性程度的方法为：将超阈值序列中的数据点记为标准数据点，对每个标准数据点获取一个选取区域，获取标准数据点在使用率变化特征曲线中的位置，将该位置的前一个时间点和后一个时间点提取出来，根据标准时间点与其相邻时间点的数据差异以及标准数据点的选取区域中的标准数据点的数量获取标准时间点的持续性程度。优选的，所述对每个标准数据点获取一个选取区域的方法为：对于每个标准时间点获取一个时间点相邻选取值，每个标准时间点的时间点相邻选取值为标准时间点在使用率变化特征曲线中向左选取/＞个时间点，向右选取/＞个时间点，由此构成了每个标准时间点的选取区域。优选的，所述根据标准时间点与其相邻时间点的数据差异以及标准数据点的选取区域中的标准数据点的数量获取标准时间点的持续性程度的方法为：式中，表示使用率变化特征曲线上的第i个时间点的CPU使用率是标准时间点的CPU使用率，/＞表示使用率变化特征曲线上的第i+1个时间点的CPU使用率，/＞表示使用率变化特征曲线上的第i-1个时间点的CPU使用率，/＞表示以自然常数为底的指数函数，表示以使用率变化特征曲线上的第i个时间点为中心的选取区域内标准时间点的数量，/＞表示标准时间点的时间点相邻选取值，/＞表示正比例归一化函数，/＞和/＞分别表示权重值，/＞表示使用率变化特征曲线上的第i个时间点的持续性程度。优选的，所述根据待处理序列中的每个时间点与其在待处理序列中的相邻时间点的时间差异以及待处理序列中每个时间点与其相邻时间点超阈值程度的差异获取待处理序列中每个时间点的节奏性程度值方法为：将待处理序列中的时间点记为处理时间点，对于每个处理时间点获取其相邻处理时间点；获取处理时间点和其相邻处理时间点的超阈值程度的均值记为超阈值程度均值，根据处理时间点和其相邻处理时间点按照时间顺序相邻作差得到的差值以及处理时间点的超阈值程度和超阈值程度均值的差异获取处理时间点的节奏性程度值。优选的，所述对于每个处理时间点获取其相邻处理时间点的方法为：获取该处理时间点在待处理序列中依照顺序得到的两个处理时间点，将这两个提取出来的处理时间点记为相邻处理时间点。优选的，所述根据处理时间点和其相邻处理时间点按照时间顺序相邻作差得到的差值以及处理时间点的超阈值程度和超阈值程度均值的差异获取处理时间点的节奏性程度值的方法为：式中，表示待处理序列中第a个处理时间点在使用率变化特征曲线中的时间值，表示待处理序列中第a+1个处理时间点在使用率变化特征曲线中的时间值，/＞表示待处理序列中第a+2个处理时间点在使用率变化特征曲线中的时间值，/＞待处理序列中第a个处理时间点对应的超阈值程度，/＞表示待处理序列中第a个处理时间点与其相邻处理时间点的超阈值程度的均值，/＞表示以自然常数为底的指数函数，/＞和/＞表示为权重参数，/＞表示待处理序列中第a个处理时间点的节奏性程度值。第二方面，本发明实施例还提供了一种机房运维监控数据处理系统，包括存储器、处理器以及存储在所述存储器中并在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述任意一项所述方法的步骤。本发明的有益效果是：由于造成超阈值的情况有多种；本发明结合具体超阈值前后数据点在特征空间中的波动特点进行持续性和节奏性的评估，得到其超阈值的具体原因，通过当前对于数据点持续性的分析，可以首先将会导致系统的稳定性出现问题的长时间持续高负荷波动的数据点进行筛选；之后将上述无法判断的另一类数据点进行更为准确的区分，按照节奏性得到两类不同原因造成超阈值异常的数据点；由此深入区分和判断，实现更为准确地监测；并根据不同原因进行预警监测的不同处理，比起传统方式更为具体和准确。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明一个实施例所提供的一种机房运维监控数据处理方法的流程示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。请参阅图1，其示出了本发明一个实施例提供的一种机房运维监控数据处理方法流程图，该方法包括步骤：步骤S001，采集时间序列下的CPU使用率构建使用率变化特征曲线。在传统方式下对于计算机CPU使用率异常的监测预警采用过阈警告即为直接对当前时间点使用率数据与阈值比较，根据结果进行判断，该方式过于宽泛和笼统；导致监测准确性较低且会为管理人员带来二次判断的冗余操作；增大工作量且降低异常数的捕捉效率；为了提高监测的准确性本方案首先对系统CPU在各时间点得到的CPU使用率进行使用率变化特征曲线的构建。具体的，对系统CPU在依照时间顺序采集CPU使用率，其中每1s采集一次数据，由此得到了使用率序列，所述使用率序列中是CPU使用率，根据使用率序列将获取得到的各时间点对应其CPU使用率数据标注在空间坐标系中，并连接各数据点构成一条使用率变化特征曲线，使用率变化特征曲线的横坐标是时间点，纵坐标是每个时间点对应的CPU使用率。由此可以更为客观地展现在当前时间段内设备CPU使用率的变化波动特征；由此也能够凸显出相邻时间点使用率之间的变化特征；进而进行细分判断和区分。至此，获取了使用率变化特征曲线。步骤S002，根据使用率变化特征曲线获取超阈值序列，根据超阈值序列中的时间点在使用率变化特征曲线的位置获取时间点的持续性程度，并由此获取预警必要程度高的数据点。造成计算机CPU使用率异常的原因有很多；通常情况下对于长时间持续高负荷导致CPU使用率持续保持较高水平的异常数据点，其会导致系统的稳定性出现问题；另外，当前计算机系统CPU使用率突然爆发，即表现在时序空间中为短时间内数值迅速攀升且变化增长幅度较大；该类突发性波动的异常使用率数值同样表示系统出现了异常，极可能是由于某个进程出现崩溃、或恶意攻击所造成的；该类异常使用率数据点需要受到重点关注，即预警的必要程度较高。对于获取到的使用率变化特征曲线，给定预设的使用率预警阈值记为，在本实施例中令使用率预警阈值/＞，将使用率变化特征曲线上每个时间点的CPU使用率和使用率预警阈值作差得到超阈值程度，公式如下：式中，表示使用率预警阈值，/＞表示第i个时间点对应的CPU使用率，/＞表示第i个时间点对应的超阈值程度。将/＞时的时间点对应的CPU使用率称为超阈值使用率，将所有超阈值使用率统计按照时间顺序排序得到超阈值序列。对于超阈值序列中的每个数据点，获取该数据点在使用率变化特征曲线中的时间点，将此时间点记为标准时间点，获取标准时间点相邻的两个时间点对应的CPU使用率；对于每个标准时间点获取一个时间点相邻选取值，在本实施例中令时间点相邻选取值，每个标准时间点的时间点相邻选取值为标准时间点在使用率变化特征曲线中向左选取/＞个时间点，向右选取/＞个时间点，由此构成了每个标准时间点的选取区域，大小为/＞，统计每个标准时间点的选取区域中标准时间点的数量；根据标准时间点对应的CPU使用率与相邻时间点对应的CPU使用率的差异以及标准时间点的选取区域中标准时间点的数量得到每个标准时间点的持续性程度，公式如下：式中，表示使用率变化特征曲线上的第i个时间点的CPU使用率是标准时间点的CPU使用率，/＞表示使用率变化特征曲线上的第i+1个时间点的CPU使用率，/＞表示使用率变化特征曲线上的第i-1个时间点的CPU使用率，/＞表示以自然常数为底的指数函数，表示以使用率变化特征曲线上的第i个时间点为中心的选取区域内标准时间点的数量，/＞表示标准时间点的时间点相邻选取值，/＞表示正比例归一化函数，/＞和/＞分别表示权重值，在本实施例中令/＞，/＞表示使用率变化特征曲线上的第i个时间点的持续性程度。可反应当前异常的持续性质；/＞可以反应当前异常的上升或下降的波动性质，当其中的分式接近1时，说明标准时间点周围的时间点对应的CPU使用率与标准时间点的CPU使用率的差值相差不大，此时影响持续性程度数值的第二项会最大，由于/＞对于持续性的评估更具有普适性，因此给定更高的权重；获取每个标准时间点的持续性程度后，给定模型评估阈值，在本实施例中令模型评估阈值为0.5，当持续性程度大于模型评估阈值时，认为当前标准时间点对应的数据点的持续性程度较高；其满足导致系统的稳定性出现问题的数据点特征，即此时的数据点的预警必要程度高；当持续性程度小于等于模型评估阈值时，则认为此时的数据点的持续性程度较低；需要进一步进行预警必要性的分析。通过当前对于数据点持续性的分析，可以首先将会导致系统的稳定性出现问题的长时间持续高负荷波动的数据点进行筛选；比起传统方式更为具体和准确。至此，获取了每个标准时间点的持续性程度，并获得预警必要程度高的数据点。步骤S003，根据持续性程度获取待处理序列，根据待处理序列中时间点的时间差异以及超阈值程度获取时间点的节奏性程度值，并获取预警必要程度高的数据点。将获得标准时间点的持续性程度较低的标准时间点进行二次分析，即将持续性程度较低的标准时间点构成一个待处理序列。将待处理序列中的时间点记为处理时间点，对于待处理序列中的每个处理时间点，获取该处理时间点在待处理序列中依照顺序得到的两个处理时间点，将这两个提取出来的处理时间点记为相邻处理时间点，例如，对于待处理序列中的第一个处理时间点，获取第二个和第三个处理时间点，对于待处理序列中的第二个处理时间点，获取第三个和第四个处理时间点；对于每个处理时间点获取其对应的超阈值程度，计算处理时间点和其相邻处理时间点的超阈值程度的均值，根据处理时间点和其相邻处理时间点的CPU使用率的差异以及处理时间点的超阈值程度与超阈值程度均值的差异获取节奏性程度值，公式如下：式中，表示待处理序列中第a个处理时间点在使用率变化特征曲线中的时间值，表示待处理序列中第a+1个处理时间点在使用率变化特征曲线中的时间值，/＞表示待处理序列中第a+2个处理时间点在使用率变化特征曲线中的时间值，/＞待处理序列中第a个处理时间点对应的超阈值程度，/＞表示待处理序列中第a个处理时间点与其相邻处理时间点的超阈值程度的均值，/＞表示以自然常数为底的指数函数，/＞和/＞表示为权重参数，/＞表示待处理序列中第a个处理时间点的节奏性程度值。中的分式越接近为0，时间间隔差异越接近，其结果越接近与1，说明该三类数据节点节奏性较强；/＞为评估处理时间点的超阈值程度是否与平均超阈值差异大小相近；若越相近，此时结果同样越趋于1；若差异甚远；表示当前处理时间点符合突发性波动特征，即数值变化幅度较大。由于/＞的表现更加直观清晰且具有更强的说服力，因此设定权重参数/＞。当/＞和/＞都越趋近于1时，说明此时的处理时间点的节奏性越强；认为当前处理时间点为正常波动。由此设定节奏性评估阈值/＞，在本实施例中/＞，当/＞时，认为此时的处理时间点对应的数据点为非正常波动数据；此时的数据点预警必要性强；反之若/＞时，处理时间点对应的数据点为正常波动数据，将此时的数据点排除；认为其预警必要性较低。该评估模型可以将上述持续性公式无法判断的另一类数据点进行更为准确的区分，按照节奏性得到两类不同原因造成超阈值异常的数据点；由此深入区分和判断，实现更为准确地监测。至此，获取了处理时间点的节奏性程度值，并获取预警必要性强的数据点。步骤S004，根据所有预警必要性强的数据点完成数据的监管。根据每个标准时间点的持续性程度获取了一部分预警程度必要性强的数据点，根据处理时间点的节奏性程度值，同样获取了一部分预警必要性强的数据点，对于对于筛选后的预警必要性强的数据点作为异常数据点，完成异常数据识别；从而实现机房运维中使用率数据异常的准确识别和监管。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
