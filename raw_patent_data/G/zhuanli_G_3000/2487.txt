标题title
基于人工智能的墙板表面缺陷快速检测方法
摘要abst
本发明涉及图像数据处理技术领域，具体涉及一种基于人工智能的墙板表面缺陷快速检测方法，包括，获取待检测墙板的亚像素灰度矩阵，确定亚像素灰度矩阵中每个亚像素点的隶属主像素点；根据隶属主像素点的灰度值，对墙板表面灰度图像中的隶属主像素点进行全局复杂性分析，确定每个亚像素点的灰度权重，进而确定每个亚像素点的灰度值；根据亚像素点的灰度值构建待检测墙板的亚像素图像，对亚像素图像进行色差检测，判断待检测墙板是否存在色差缺陷。本发明利用亚像素插值的方式，对待检测墙板进行细致化增强，实现了墙板表面色差缺陷的快速检测，提高了墙板表面缺陷检测效率，主要应用于色差缺陷检测领域。
权利要求书clms
1.一种基于人工智能的墙板表面缺陷快速检测方法，其特征在于，包括以下步骤：获取待检测墙板的墙板表面灰度图像，根据墙板表面灰度图像确定亚像素灰度矩阵；其中，所述亚像素灰度矩阵中包括主像素点和主像素点对应的各个亚像素点；确定亚像素灰度矩阵中每个主像素点对应的各个待选像素点；根据亚像素灰度矩阵中主像素点和待选像素点的灰度值、位置以及亚像素点的位置，确定每个亚像素点的隶属主像素点；根据每个亚像素点的隶属主像素点的灰度值，对墙板表面灰度图像中的隶属主像素点进行全局复杂性分析，确定每个亚像素点的灰度权重；根据每个亚像素点的灰度权重、每个亚像素点的隶属主像素点和每个亚像素点所属的主像素点的灰度值，确定亚像素灰度矩阵中每个亚像素点的灰度值；根据所述亚像素点的灰度值构建待检测墙板的亚像素图像，对所述亚像素图像进行色差检测，判断待检测墙板是否存在色差缺陷。2.根据权利要求1所述的一种基于人工智能的墙板表面缺陷快速检测方法，其特征在于，根据亚像素灰度矩阵中主像素点和待选像素点的灰度值、位置以及亚像素点的位置，确定每个亚像素点的隶属主像素点，包括：对于任意一个亚像素点对应的任意一个待选像素点，计算亚像素点所属的主像素点的灰度值和待选像素点的灰度值之间的差值绝对值，并计算亚像素点所属的主像素点的灰度值和待选像素点的灰度值相加后的数值，将所述差值绝对值和所述相加后的数值的比值确定为待选像素点的第一隶属因子；将亚像素点与其所属的主像素点之间的距离确定为第一距离，将亚像素点与其对应的待选像素点之间的距离确定为第二距离；对第二距离和第一距离的比值进行反比例的归一化处理，将归一化处理后的比值与第一预设数值之间的差值确定为待选像素点的第二隶属因子；计算第一隶属因子和第二隶属因子的乘积，将所述乘积确定为待选像素点的隶属度，从而获得亚像素点对应的各个待选像素点的隶属度；若亚像素点对应的任意一个待选像素点的隶属度不为第二预设数值，则将最大隶属度对应的待选像素点确定为亚像素点的隶属主像素点；若亚像素点对应的所有待选像素点的隶属度均为第二预设数值，则将亚像素点所属的主像素点确定为亚像素点的隶属主像素点。3.根据权利要求1所述的一种基于人工智能的墙板表面缺陷快速检测方法，其特征在于，根据每个亚像素点的隶属主像素点的灰度值，对墙板表面灰度图像中的隶属主像素点进行全局复杂性分析，确定每个亚像素点的灰度权重，包括：对于任意一个亚像素点，若亚像素点的隶属主像素点为亚像素点所属的主像素点，则将亚像素点的灰度权重赋值为数值1；若亚像素点的隶属主像素点不为亚像素点所属的主像素点，则将亚像素点的隶属主像素点的灰度值确定为目标灰度，将墙板表面灰度图像中灰度值为目标灰度的像素点确定为亚像素点的参考像素点；将墙板表面灰度图像中亚像素点的参考像素点个数与所有像素点的总个数之间的比值，确定为亚像素点的第一权重因子；对于亚像素点的任意一个参考像素点，计算参考像素点的灰度值和参考像素点邻域内每个邻域像素点的灰度值之间的差值绝对值，进而计算参考像素点对应的各个差值绝对值的累加和，将所述累加和确定为参考像素点的第一累加和；计算亚像素点的所有参考像素点的第一累加和的平均值，对所述平均值进行反比例的归一化处理，将反比例的归一化处理后的平均值确定为亚像素点的第二权重因子；将亚像素点的第一权重因子和第二权重因子的乘积确定为亚像素点的灰度权重。4.根据权利要求1所述的一种基于人工智能的墙板表面缺陷快速检测方法，其特征在于，根据每个亚像素点的灰度权重、每个亚像素点的隶属主像素点和每个亚像素点所属的主像素点的灰度值，确定亚像素灰度矩阵中每个亚像素点的灰度值，包括：对于任意一个亚像素点，若亚像素点的隶属主像素点为亚像素点所属的主像素点，则将亚像素点所属的主像素点的灰度值确定为亚像素点的灰度值；若亚像素点的隶属主像素点不为亚像素点所属的主像素点，则将数值1与亚像素点的灰度权重之间的差值确定为目标灰度权重；将亚像素点的隶属主像素点的灰度值与灰度权重的乘积确定为亚像素点的第一乘积，将亚像素点所属的主像素点的灰度值与目标灰度权重的乘积确定为亚像素点的第二乘积；对第一乘积、第二乘积和第三预设数值相加后的数值进行向下取整处理，将向下取整处理后的数值确定为亚像素点的灰度值。5.根据权利要求1所述的一种基于人工智能的墙板表面缺陷快速检测方法，其特征在于，根据墙板表面灰度图像确定亚像素灰度矩阵，包括：将墙板表面灰度图像转化为像素灰度矩阵，将像素灰度矩阵中的每个像素点确定为主像素点；对主像素点进行预设分割数目的分割处理，将分割获得的像素点确定为亚像素点；利用主像素点对应的各个亚像素点，对像素灰度矩阵进行亚像素点插值处理，将插值处理后的像素灰度矩阵确定为亚像素灰度矩阵。6.根据权利要求5所述的一种基于人工智能的墙板表面缺陷快速检测方法，其特征在于，确定亚像素灰度矩阵中每个主像素点对应的各个待选像素点，包括：对于任意一个主像素点，确定像素灰度矩阵中主像素点对应的邻域区域内的各个邻域像素点，将亚像素灰度矩阵中与主像素点对应的各个邻域像素点灰度值相同的像素点确定为主像素点对应的待选像素点，从而获得亚像素灰度矩阵中每个主像素点对应的各个待选像素点。
说明书desc
技术领域本发明涉及图像数据处理技术领域，具体涉及一种基于人工智能的墙板表面缺陷快速检测方法。背景技术在建筑装饰行业中，墙板作为一个功能性强的材料，对于墙板的质量要求越来越高。在墙板生产过程中墙板容易出现色差缺陷，而出现色差缺陷的墙板为工业瑕疵品。色差缺陷具体表现为墙板表面灰度图像中不同位置的像素点的灰度值具有一定差异，纯色墙板的表面漆料的材料一致和上漆工艺相同，导致灰度图像中每个像素点的灰度值一般是相等的。该缺陷不仅降低了产品的美观性，还可能影响墙板的质量和出售等方面。因此，墙板表面缺陷检测具有非常重要的现实意义。现有检测方法通常是基于色差纹理，利用灰度共生矩阵的对比度对墙板的色差缺陷进行检测，该检测方法在对表面色差较大的墙板进行检测时，具有一定的检测效果，但是对于表面具有色差但色差不明显的墙板，受墙板表面色差过小而导致纹理特征不明显因素的影响，即相应像素点的灰度差异值较小，一次色差检测往往不能获得准确结果，需要调节环境进行多次检测，该检测方法浪费了大量的时间成本和生产成本，导致墙板表面缺陷检测效率低下。发明内容为了解决上述墙板表面缺陷检测效率低下的技术问题，本发明的目的在于提供一种基于人工智能的墙板表面缺陷快速检测方法，所采用的技术方案具体如下：本发明一个实施例提供了一种基于人工智能的墙板表面缺陷快速检测方法，该方法包括以下步骤：获取待检测墙板的墙板表面灰度图像，根据墙板表面灰度图像确定亚像素灰度矩阵；其中，所述亚像素灰度矩阵中包括主像素点和主像素点对应的各个亚像素点；确定亚像素灰度矩阵中每个主像素点对应的各个待选像素点；根据亚像素灰度矩阵中主像素点和待选像素点的灰度值、位置以及亚像素点的位置，确定每个亚像素点的隶属主像素点；根据每个亚像素点的隶属主像素点的灰度值，对墙板表面灰度图像中的隶属主像素点进行全局复杂性分析，确定每个亚像素点的灰度权重；根据每个亚像素点的灰度权重、每个亚像素点的隶属主像素点和每个亚像素点所属的主像素点的灰度值，确定亚像素灰度矩阵中每个亚像素点的灰度值；根据所述亚像素点的灰度值构建待检测墙板的亚像素图像，对所述亚像素图像进行色差检测，判断待检测墙板是否存在色差缺陷。进一步地，根据亚像素灰度矩阵中主像素点和待选像素点的灰度值、位置以及亚像素点的位置，确定每个亚像素点的隶属主像素点，包括：对于任意一个亚像素点对应的任意一个待选像素点，计算亚像素点所属的主像素点的灰度值和待选像素点的灰度值之间的差值绝对值，并计算亚像素点所属的主像素点的灰度值和待选像素点的灰度值相加后的数值，将所述差值绝对值和所述相加后的数值的比值确定为待选像素点的第一隶属因子；将亚像素点与其所属的主像素点之间的距离确定为第一距离，将亚像素点与其对应的待选像素点之间的距离确定为第二距离；对第二距离和第一距离的比值进行反比例的归一化处理，将归一化处理后的比值与第一预设数值之间的差值确定为待选像素点的第二隶属因子；计算第一隶属因子和第二隶属因子的乘积，将所述乘积确定为待选像素点的隶属度，从而获得亚像素点对应的各个待选像素点的隶属度；若亚像素点对应的任意一个待选像素点的隶属度不为第二预设数值，则将最大隶属度对应的待选像素点确定为亚像素点的隶属主像素点；若亚像素点对应的所有待选像素点的隶属度均为第二预设数值，则将亚像素点所属的主像素点确定为亚像素点的隶属主像素点。进一步地，根据每个亚像素点的隶属主像素点的灰度值，对墙板表面灰度图像中的隶属主像素点进行全局复杂性分析，确定每个亚像素点的灰度权重，包括：对于任意一个亚像素点，若亚像素点的隶属主像素点为亚像素点所属的主像素点，则将亚像素点的灰度权重赋值为数值1；若亚像素点的隶属主像素点不为亚像素点所属的主像素点，则将亚像素点的隶属主像素点的灰度值确定为目标灰度，将墙板表面灰度图像中灰度值为目标灰度的像素点确定为亚像素点的参考像素点；将墙板表面灰度图像中亚像素点的参考像素点个数与所有像素点的总个数之间的比值，确定为亚像素点的第一权重因子；对于亚像素点的任意一个参考像素点，计算参考像素点的灰度值和参考像素点邻域内每个邻域像素点的灰度值之间的差值绝对值，进而计算参考像素点对应的各个差值绝对值的累加和，将所述累加和确定为参考像素点的第一累加和；计算亚像素点的所有参考像素点的第一累加和的平均值，对所述平均值进行反比例的归一化处理，将反比例的归一化处理后的平均值确定为亚像素点的第二权重因子；将亚像素点的第一权重因子和第二权重因子的乘积确定为亚像素点的灰度权重。进一步地，根据每个亚像素点的灰度权重、每个亚像素点的隶属主像素点和每个亚像素点所属的主像素点的灰度值，确定亚像素灰度矩阵中每个亚像素点的灰度值，包括：对于任意一个亚像素点，若亚像素点的隶属主像素点为亚像素点所属的主像素点，则将亚像素点所属的主像素点的灰度值确定为亚像素点的灰度值；若亚像素点的隶属主像素点不为亚像素点所属的主像素点，则将数值1与亚像素点的灰度权重之间的差值确定为目标灰度权重；将亚像素点的隶属主像素点的灰度值与灰度权重的乘积确定为亚像素点的第一乘积，将亚像素点所属的主像素点的灰度值与目标灰度权重的乘积确定为亚像素点的第二乘积；对第一乘积、第二乘积和第三预设数值相加后的数值进行向下取整处理，将向下取整处理后的数值确定为亚像素点的灰度值。进一步地，根据墙板表面灰度图像确定亚像素灰度矩阵，包括：将墙板表面灰度图像转化为像素灰度矩阵，将像素灰度矩阵中的每个像素点确定为主像素点；对主像素点进行预设分割数目的分割处理，将分割获得的像素点确定为亚像素点；利用主像素点对应的各个亚像素点，对像素灰度矩阵进行亚像素点插值处理，将插值处理后的像素灰度矩阵确定为亚像素灰度矩阵。进一步地，确定亚像素灰度矩阵中每个主像素点对应的各个待选像素点，包括：对于任意一个主像素点，确定像素灰度矩阵中主像素点对应的邻域区域内的各个邻域像素点，将亚像素灰度矩阵中与主像素点对应的各个邻域像素点灰度值相同的像素点确定为主像素点对应的待选像素点，从而获得亚像素灰度矩阵中每个主像素点对应的各个待选像素点。本发明具有如下有益效果：本发明提供了一种基于人工智能的墙板表面缺陷快速检测方法，主要应用于色差缺陷检测领域，该方法通过图像数据处理相关技术，确定亚像素灰度矩阵，以便于对色差变化不明显的墙板进行亚像素增强处理；亚像素增强处理可以实现细致化增强，促使待检测墙板的弱色差通过图像增强处理后表现出强色差的特征，使得进行墙板表面色差缺陷检测时无需多次重复检测，实现了墙板表面缺陷快速检测，提高了墙板表面缺陷检测效率。确定每个亚像素点的隶属主像素点，可以明确与亚像素点特征最为相近的主像素点，分析亚像素点的隶属主像素点有助于提高亚像素点的灰度权重的准确性，相较于现有技术的亚像素点随机分配，隶属主像素点可以使亚像素点与整体图像的结合更为紧密。根据亚像素点的灰度权重、隶属主像素点和主像素点的灰度值，计算亚像素点的灰度值，即利用墙板色差缺陷的特征进行亚像素点的灰度值的赋值，亚像素点的灰度值更符合墙板色差的特征，有效提高了墙板表面色差缺陷的检测精准度和便捷度，同时提高了墙板表面缺陷的检测效率。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一种基于人工智能的墙板表面缺陷快速检测方法的流程图；图2为本发明实施例中的像素灰度矩阵对应的示意图；图3为本发明实施例中的亚像素灰度矩阵对应的示意图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的技术方案的具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一个实施例。此外，一个或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。本实施例的应用场景：对色差纹理较弱的墙板进行表面色差缺陷识别，现有检测方法进行色差缺陷检测时容易发生误检，需要对色差纹理较差的墙板进行多次质量检测，以便于判断墙板是否存在色差缺陷，该现有检测方法的墙板表面缺陷检测效率低下。为了实现墙板表面缺陷快速检测，本实施例提供了一种基于人工智能的墙板表面缺陷快速检测方法，如图1所示，包括以下步骤：S1，获取待检测墙板的墙板表面灰度图像，根据墙板表面灰度图像确定亚像素灰度矩阵，具体实现步骤可以包括：第一步，获取待检测墙板的墙板表面灰度图像。在本实施例中，为了实现后续的色差缺陷分割，需要获取待检测墙板的墙板表面图像。具体为，通过布置在流水线上的俯视相机，以俯视角度对流水线上的墙板进行表面图像采集。其中，俯视相机可以为常用的高清工业相机；为了获取待检测墙板的完整图像，在进行墙板图像采集之前，需要对工业相机进进行标定，使得工业相机的拍摄范围稍大于待检测墙板的整体大小。获得待检测墙板的墙板表面图像为多通道图像，可能存在噪声影响，需要对墙板表面图像进行图像预处理。首先，利用加权平均法对墙板表面图像进行灰度化处理，获得墙板表面灰度图像；然后，通过图像分割方式对墙板表面灰度图进行分割提取，获得仅包含墙板表面的灰度图像；最后，利用中值滤波分割提取后的灰度图像进行滤波处理，获得滤波图像。将滤波处理后的墙板表面灰度图像对应的滤波图像确定为最终的墙板表面灰度图像。加权平均法、图像分割方式以及中值滤波的实现过程为现有技术，不在本发明保护范围内，此处不再进行详细阐述。值得说明的是，待检测墙板的墙板表面灰度图像仅考虑图像整体色差，不考虑局部边缘，所以利用中值滤波进行滤波处理有着较好的检测平滑滤波效果。第二步，根据墙板表面灰度图像确定亚像素灰度矩阵，具体实现步骤可以包括：第一子步骤，将墙板表面灰度图像转化为像素灰度矩阵，进而将像素灰度矩阵中的每个像素点确定为主像素点；对主像素点进行预设分割数目的分割处理，将分割获得的像素点确定为亚像素点。在本实施例中，像素灰度矩阵包含墙板表面灰度图像中不同位置的像素点的灰度值，为了便于区分，将像素灰度矩阵中的每个像素点标记为主像素点，像素灰度矩阵对应的示意图如图2所示，图2中的10、20、30、40、50、60、70、80和90均为灰度值。主像素点的预设分割数目可以确定为5，即可以将主像素点分割成除其本身以外的5个亚像素点。主像素点的预设分割数目可以由实施者根据具体实际情况设置，这里不做具体限定。亚像素点的分割获取过程为现有技术，不在本发明保护范围内，此处不再进行详细阐述。第二子步骤，利用主像素点对应的各个亚像素点，对像素灰度矩阵进行亚像素点插值处理，将插值处理后的像素灰度矩阵确定为亚像素灰度矩阵。在本实施例中，利用插值法，对每个主像素点对应的5个亚像素点在像素灰度矩阵中进行插值处理，获得插值处理后的像素灰度矩阵，主像素点与其对应的5个亚像素点可以组成一个单元，将插值处理后的像素灰度矩阵确定为亚像素灰度矩阵。为了便于后续进行灰度计算，将每个亚像素点的初始灰度值赋值为0，获得亚像素灰度矩阵，亚像素灰度矩阵对应的示意图如图3所示。图3中亚像素灰度矩阵包括主像素点的灰度值和主像素点对应的各个亚像素点的初始灰度值。插值法的实现过程为现有技术，此处不再进行详细阐述。至此，本实施例获得了待检测墙板的亚像素灰度矩阵。S2，确定亚像素灰度矩阵中每个主像素点对应的各个待选像素点；根据亚像素灰度矩阵中主像素点和待选像素点的灰度值、位置以及亚像素点的位置，确定每个亚像素点的隶属主像素点。第一步，确定亚像素灰度矩阵中每个主像素点对应的各个待选像素点。在本实施例中，进行亚像素点插值之前的亚像素灰度矩阵为像素灰度矩阵，像素灰度矩阵中的每个像素点为主像素点，确定像素灰度矩阵中每个主像素点对应的八邻域区域内的各个邻域像素点。其中，邻域像素点是位于邻域区域内的像素点，邻域像素点的本质也为主像素点。将主像素点对应的八邻域区域内的各个邻域像素点确定为对应的主像素点对应的各个待选像素点，将各个待选像素点对照到亚像素灰度矩阵中，将亚像素灰度矩阵中与主像素点对应的各个邻域像素点灰度值相同的像素点确定为主像素点对应的待选像素点，进而得到亚像素灰度矩阵中每个主像素点对应的各个待选像素点。值得说明的是，每个亚像素点均有其所属的主像素点，同一主像素点的亚像素点对应的各个待选像素点相同。例如，在图2中，灰度值为50的主像素点的八邻域区域内的各个待选像素点分别为灰度值为10的主像素点、灰度值为20的主像素点、灰度值为30的主像素点、灰度值为40的主像素点、灰度值为60的主像素点、灰度值为70的主像素点、灰度值为80的主像素点以及灰度值为90的主像素点。那么，在图3中，灰度值为50的主像素点对应的各个待选像素点依然为上述8个主像素点。第二步，根据亚像素灰度矩阵中主像素点和待选像素点的灰度值、位置以及亚像素点的位置，确定每个亚像素点的隶属主像素点。首先，需要说明的是，亚像素灰度矩阵中每个亚像素点的初始灰度值为0，相对于像素灰度矩阵，亚像素灰度矩阵仅实现了墙板表面灰度图像的放大，并没有对墙板表面灰度图像进行有效增强放大。为了便于后续确定每个亚像素点的灰度值，需要确定与亚像素点特征更为相似的隶属主像素点，具体实现步骤可以包括：第一子步骤，对于任意一个亚像素点对应的任意一个待选像素点，计算亚像素点所属的主像素点的灰度值和待选像素点的灰度值之间的差值绝对值，并计算亚像素点所属的主像素点的灰度值和待选像素点的灰度值相加后的数值，将差值绝对值和相加后的数值的比值确定为待选像素点的第一隶属因子。第二子步骤，将亚像素点与其所属主像素点之间的距离确定为第一距离，将亚像素点与其对应的待选像素点之间距离确定为第二距离；对第二距离和第一距离的比值进行反比例的归一化处理，将归一化处理后的比值与第一预设数值之间的差值确定为待选像素点的第二隶属因子。第三子步骤，计算第一隶属因子和第二隶属因子的乘积，将乘积确定为待选像素点的隶属度，从而获得亚像素点对应的各个待选像素点的隶属度。基于上述步骤S2的第一步至第三步，本实施例通过主像素点和亚像素点的邻域位置和灰度特征，计算亚像素点的隶属度，隶属度可以表征亚像素点与某个待选像素点之间的特征相似度，隶属度越大，说明亚像素点越趋近该待选像素点，该待选像素点越有可能为亚像素点的隶属主像素点。以确定第i个亚像素点对应的第个待选像素点的隶属度为例，隶属度的计算公式可以为：其中，为第i个亚像素点对应的第/＞个待选像素点的隶属度，/＞为第i个亚像素点所属的主像素点的灰度值，/＞为第i个亚像素点对应的第/＞个待选像素点的灰度值，/＞为第i个亚像素点对应的第/＞个待选像素点的第一隶属因子，/＞为第i个亚像素点对应的第/＞个待选像素点的第一距离，/＞为第i个亚像素点对应的第/＞个待选像素点的第二距离，/＞为第一预设数值，/＞为第i个亚像素点对应的第/＞个待选像素点的第二隶属因子，/＞为对/＞进行反比例的归一化处理，e为自然常数，/＞为求绝对值函数，n表示主像素点。在隶属度的计算公式中，第一距离表示第i个亚像素点与其所属的主像素点之间的欧氏距离，第一距离/＞的计算公式可以为：/＞，其中，/＞为第i个亚像素点的横坐标，/＞为第i个亚像素点的纵坐标，/＞为第i个亚像素点所属的主像素点的横坐标，/＞为第i个亚像素点所属的主像素点的纵坐标；第二距离表示第i个亚像素点与其对应的第/＞个待选像素点之间的欧氏距离，第二距离/＞的计算公式可以为：/＞，其中，/＞为第i个亚像素点对应的第/＞个待选像素点的横坐标，/＞为第i个亚像素点对应的第/＞个待选像素点的纵坐标；第一距离/＞越大，说明第i个亚像素点的位置与第i个亚像素点所属的主像素点的位置越远，第i个亚像素点与其所属的主像素点的联系越弱；第二距离/＞越小，说明第i个亚像素点的位置与第i个亚像素点对应的第/＞个待选像素点的位置越近，第i个亚像素点与第/＞个待选像素点的联系越强；/＞越小，第i个亚像素点对应的第/＞个待选像素点的隶属度/＞越大；第一隶属因子/＞可以表示第i个亚像素点所属的主像素点与第/＞个待选像素点之间的灰度差异，当第二距离/＞越小、第一隶属因子/＞越大时，说明在色差特征相似方面，第i个亚像素点更趋近于其对应的第/＞个待选像素点；对于/＞，通常情况下不存在主像素点灰度值和待选像素点灰度值均为0的特殊情况，若存在特殊情况，为了避免分数的分母为0的特殊情况，在第一隶属因子的分母加上一个超参数，这里的超参数可以设置为0.1；对于第一预设数值/＞，若亚像素点对应的第一距离等于第二距离或主像素点灰度值等于待选像素点灰度值，说明该待选像素点与亚像素点之间的色差关联不大，可以直接将亚像素点对应的待选像素点的隶属度赋值为0。所以，为了确保亚像素点对应的第一距离等于第二距离时的待选像素点的隶属度赋值为0，根据第二隶属因子将第一预设数值赋值为/＞。需要说明的是，亚像素点虽然是由主像素点分割得到的，但是随着亚像素点距离主像素点的位置越远，该亚像素点与主像素点的联系越弱，主要体现在墙板表面灰度图像中绝大部分像素点的灰度值相等，没有明确体现增强色差。因此，利用亚像素点、待选像素点以及主像素点的位置和灰度计算隶属度，通过隶属度便于分析经过分割的亚像素点与其对应的各个待选像素点之间的联系关系。第四子步骤，若亚像素点对应的任意一个待选像素点的隶属度不为第二预设数值，则将最大隶属度对应的待选像素点确定为亚像素点的隶属主像素点；若亚像素点对应的所有待选像素点的隶属度均为第二预设数值，则将亚像素点所属的主像素点确定为亚像素点的隶属主像素点。在本实施例中，第二预设数值只能设置为数值0，当亚像素点对应的所有待选像素点的隶属度均为0，说明亚像素点更趋近于其所属的主像素点的特征，可以将亚像素点所属的主像素点作为亚像素点的隶属主像素点。当亚像素点对应的所有待选像素点中存在一个待选像素点的隶属度不为0，说明亚像素点存在更趋近的待选像素点，将最大隶属度对应的待选像素点确定为亚像素点的隶属主像素点。至此，本实施例获得了亚像素灰度矩阵中每个亚像素点的隶属主像素点。S3，根据每个亚像素点的隶属主像素点的灰度值，对墙板表面灰度图像中的隶属主像素点进行全局复杂性分析，确定每个亚像素点的灰度权重。首先，需要说明的是，墙板出现色差是因为漆料或漆料涂刷工艺导致的，所以色差缺陷并非单一的像素点，而是由多个像素点构成的区域。当墙板出现色差缺陷时，色差区域的像素点与相邻区域的像素点的灰度值不同，色差区域内部的灰度值较为一致，可以在整体的墙板表面灰度图像中对亚像素点的隶属主像素点进行分析，以明确隶属主像素点在整体全图中的全局复杂性，通过衡量亚像素点的隶属主像素点的全局复杂性，确定亚像素点的灰度权重。若隶属主像素点的全局复杂性较高，则说明对应隶属主像素点为色差区域内像素点的可能性越小，为偶然因素的可能性越大，此时利用对应隶属主像素点对亚像素点进行插值时的灰度权重应越小。在本实施例中，隶属主像素点的全局复杂性可以从两个方面进行分析，其一是隶属主像素点的灰度值在墙板表面灰度图像中出现频率，这里的出现频率对应墙板的色差像素点的区域特征，出现频率越大，对应隶属主像素点为色差像素点的可能性越大；其二是隶属主像素点的邻域灰度值在墙板表面灰度图像中的灰度变化情况，色差区域内像素点的灰度值较为一致，灰度变化情况越小，对应隶属主像素点为色差像素点的可能性越大。根据每个亚像素点的隶属主像素点的灰度值，确定每个亚像素点的灰度权重，亚像素点的灰度权重的具体实现步骤可以包括：第一步，对于任意一个亚像素点，若亚像素点的隶属主像素点为亚像素点所属的主像素点，则将亚像素点的灰度权重赋值为数值1。在本实施例中，若亚像素点的隶属主像素点为亚像素点所属的主像素点，说明该亚像素点对应的各个待选像素点的隶属度均为0，也就是说明亚像素点在图像分布上更加趋近于亚像素点所属的主像素点，可以将亚像素点的灰度权重赋值为数值1。第二步，若亚像素点的隶属主像素点不为亚像素点所属的主像素点，则将亚像素点的隶属主像素点的灰度值确定为目标灰度，将墙板表面灰度图像中灰度值为目标灰度的像素点确定为亚像素点的参考像素点。第三步，将墙板表面灰度图像中亚像素点的参考像素点个数与所有像素点的总个数之间的比值确定为亚像素点的第一权重因子。第四步，对于亚像素点的任意一个参考像素点，计算参考像素点的灰度值和参考像素点邻域内每个邻域像素点的灰度值之间的差值绝对值，进而计算参考像素点对应的各个差值绝对值的累加和，将累加和确定为参考像素点的第一累加和。第五步，计算亚像素点的所有参考像素点的第一累加和的平均值，对平均值进行反比例的归一化处理，将反比例的归一化处理后的平均值确定为亚像素点的第二权重因子。第六步，将亚像素点的第一权重因子和第二权重因子的乘积确定为亚像素点的灰度权重。基于上述步骤S3的第二步至第六步，可以确定每个亚像素点的灰度权重，灰度权重的计算公式可以为：其中，为第i个亚像素点的灰度权重，/＞为墙板表面灰度图像中第i个亚像素点的所有参考像素点的个数，N为墙板表面灰度图像中所有像素点的总个数，/＞为第i个亚像素点的第一权重因子，/＞为第i个亚像素点的第m个参考像素点的八邻域内第j个邻域像素点的灰度值，/＞为第i个亚像素点的第m个参考像素点的灰度值，m为第i个亚像素点的参考像素点的序号，/＞，j为第i个亚像素点的第m个参考像素点的八邻域内邻域像素点的序号，/＞，数值8为八邻域，e为自然常数，/＞为对/＞进行反比例的归一化处理，/＞为第i个亚像素点的第二权重因子，/＞为求绝对值函数。在灰度权重的计算公式中，第一权重因子表示第i个亚像素点的隶属主像素点的灰度值在墙板表面灰度图像中出现频率，第一权重因子/＞越大，说明墙板表面灰度图像中灰度值为第i个亚像素点的隶属主像素点的灰度值的像素点个数越多，此时第i个亚像素点的隶属主像素点在墙板表面灰度图像中的复杂度越低，第i个亚像素点的隶属主像素点为色差区域的像素点的可能性越大，第i个亚像素点的灰度权重越大；/＞表示第i个亚像素点的隶属主像素点的邻域灰度值在墙板表面灰度图像中的灰度变化情况，越小，说明墙板表面灰度图像中第i个亚像素点的隶属主像素点对应的各个邻域像素点的灰度差异程度越小，此时第i个亚像素点的隶属主像素点与其相邻的八邻域像素点之间的灰度大小越一致，此时第i个亚像素点的隶属主像素点在墙板表面灰度图像中的复杂度越低，第i个亚像素点的灰度权重越大，所以需要对灰度差异程度进行反比例处理。至此，本实施例获得了亚像素灰度矩阵中每个亚像素点的灰度权重。S4，根据每个亚像素点的灰度权重、每个亚像素点的隶属主像素点和每个亚像素点所属的主像素点的灰度值，确定亚像素灰度矩阵中每个亚像素点的灰度值。本实施例在获得每个亚像素点的灰度权重后，由于灰度权重为数值1的亚像素点与灰度权重不为数值1的亚像素点的灰度值的确定方式不同，所以先判断亚像素点的灰度权重是否为数值1。当亚像素点的灰度权重为1时，即亚像素点的隶属主像素点为亚像素点所属的主像素点，亚像素点的灰度值为亚像素点所属的主像素点的灰度值，也就是亚像素点所属的主像素点的灰度值与灰度权重1相乘，可以将相乘后的数值确定为亚像素点的灰度值。当亚像素点的灰度权重不为1时，即亚像素点的隶属主像素点不为亚像素点所属的主像素点，基于每个亚像素点的灰度权重、隶属主像素点和主像素点的灰度值，计算每个亚像素点的灰度值，具体实现步骤可以包括：第一步，将数值1与亚像素点的灰度权重之间的差值确定为目标灰度权重。第二步，将亚像素点的隶属主像素点的灰度值与灰度权重的乘积确定为亚像素点的第一乘积，将亚像素点所属的主像素点的灰度值与目标灰度权重的乘积确定为亚像素点的第二乘积。第三步，对第一乘积、第二乘积和第三预设数值相加后的数值进行向下取整处理，将向下取整处理后的数值确定为亚像素点的灰度值。在本实施例中，亚像素点与其所属的主像素点具有较强的隶属关系，可以通过亚像素点所属的主像素点的灰度值和隶属主像素点的灰度值，确定亚像素点的灰度值的计算公式，其计算公式可以为：其中，为第i个亚像素点的灰度值，/＞为第i个亚像素点所属的主像素点的灰度值，/＞为第i个亚像素点的灰度权重，/＞为第i个亚像素点的目标灰度权重，为第i个亚像素点的第二乘积，/＞为第i个亚像素点的第一乘积，数值0.5为第三预设数值，/＞第i个亚像素点的隶属主像素点的灰度值，/＞为向下取整函数。在亚像素点的灰度值的计算公式中，在利用加权平均法对墙板表面图像进行灰度化处理时，可能会使得亚像素点的灰度值出现小数，故需要对亚像素点的灰度值进行四舍五入取整处理，第三预设数值0.5用于实现四舍五入操作，第三预设数值可以根据具体实际情况自行设置；灰度权重可以衡量亚像素点的隶属主像素点在整体图像中的全局复杂性，也是用于判断隶属主像素点是否为色差像素点的重要参数；若第一乘积/＞越大，说明第i个亚像素点的隶属主像素点为色差像素点的可能性越大，第i个亚像素点的灰度值更偏向于隶属主像素点的灰度值，第i个亚像素点的灰度值更偏向于色差像素点，以便于增加色差范围；若第二乘积/＞越大，说明第i个亚像素点的隶属主像素点为色差像素点的可能性越小，第i个亚像素点的灰度值更偏向于主像素点的灰度值，以避免出现灰度混乱的现象。至此，本实施例获得了亚像素灰度矩阵中每个亚像素点的灰度值。S5，根据亚像素点的灰度值构建待检测墙板的亚像素图像，对亚像素图像进行色差检测，判断待检测墙板是否存在色差缺陷。在本实施例中，将亚像素点的灰度值赋值给亚像素灰度矩阵中对应亚像素点的灰度值，从而获得待检测墙板的亚像素图像，通过亚像素图像实现了待检测墙板的墙板表面灰度图像的色差放大处理。对亚像素图像进行色差检测，例如，计算待检测墙板的亚像素图像的二维熵，若二维熵大于阈值，则判定待检测墙板存在色差缺陷，需要对其进行重新表面刷漆或者其他处理；若二维熵不大于阈值，则判定待检测墙板不存在色差缺陷，无需进行额外处理。实现色差检测的现有方法还有很多，此处不再进行一一举例说明。本发明提供了一种基于人工智能的墙板表面缺陷快速检测方法，该检测方法利用主像素点和亚像素点的邻域位置以及灰度值特征，进行亚像素点的隶属度计算，获取亚像素更趋近与主像素点作为隶属主像素点，而后利用全局中隶属主像素点的灰度值变化结合亚像素点的隶属度，进行亚像素点的像素值的灰度值的权值获取，以便于后续的亚像素点的灰度值的赋值。通过亚像素点的灰度值，构建色差特征增强的亚像素图像，对亚像素图像进行色差检测，有助于实现墙板表面色差缺陷的快速检测。以上所述实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的范围，均应包含在本发明的保护范围之内。
