标题title
一种配电设备焊接生产缺陷检测系统
摘要abst
本发明涉及图像数据处理技术领域，具体涉及一种配电设备焊接生产缺陷检测系统，包括：通过分析焊缝图像中边缘线的端点获得边缘线的第一特征，并对存在分支边缘的边缘线进行加权拟合获取拟合线，根据拟合线与边缘线之间的差异获得边缘线的第二特征值，利用第一特征值和第二特征值实现裂缝缺陷检测。本发明通过结合裂缝缺陷产生时受到应力变化而产生分支裂缝的特点，避免了焊缝图像中鱼骨纹对缺陷检测的影响，结合加权拟合的方法对边缘线进行曲线拟合，大大提高了利用边缘检测实现裂缝缺陷检测的准确性。
权利要求书clms
1.一种配电设备焊接生产缺陷检测系统，其特征在于，该系统包括以下模块：图像准备模块：获取焊缝图像；第一特征模块：将焊缝图像中的边缘线记为第一焊缝边缘，获取任意第一焊缝边缘的端点记为第二端点，根据第一焊缝边缘上第二端点的距离以及斜率，对第一焊缝边缘中的部分第二端点进行连接，获得若干个第一新边缘；根据第一新边缘中不同部分的差异获得疑似边缘，将疑似边缘断开处理获得第二新边缘；获取第二新边缘的端点记为新边缘端点，根据新边缘端点的数量获得特殊边缘，获取特殊边缘中新边缘端点之间形成的编码路径，根据特殊边缘中新边缘端点之间形成的编码路径，获得特殊边缘的主边缘和若干个分支边缘，根据分支边缘的数量和编码路径的长度获得特殊边缘的第一特征值；第二特征模块：获取分支边缘和主边缘形成的连接点，将连接点与主边缘上相邻像素点所形成向量的夹角记为连接点的角度特征，结合分支边缘以及连接点的角度特征对预设的初始权重进行调节获得连接点的修正权重，结合修正权重对特殊边缘的主边缘进行加权拟合获得拟合线，根据主边缘与拟合线之间的差异获得主边缘对应特殊边缘的第二特征值；缺陷检测模块：根据第一特征值和第二特征值获得缺陷概率，利用缺陷概率实现配电设备焊接生产缺陷检测。2.根据权利要求1所述一种配电设备焊接生产缺陷检测系统，其特征在于，所述获取焊缝图像，包括的具体步骤如下：步骤，布置工业相机，获取配电设备经过焊接后焊缝部分的表面图像，并对获取到的表面图像进行灰度化处理，将灰度化处理后的图像记为焊接图像；步骤，首先，利用Sobel算子获取焊接图像中所有像素点的梯度值，获取所有大于预设第一阈值的像素点所形成的边缘线，记为第一边缘线，获得若干个第一边缘线；然后，利用Harris角点检测算法获取任意第一边缘线的端点记为第一端点，获取任意不属于同一个第一边缘线的两个第一端点最近时对应的距离，以及端点与相邻的边缘像素点之间所形成直线的斜率，分别记为端点距离和端点斜率；任意两个不属于同一个第一边缘线的两个第一端点对应一个端点距离，任意一个第一端点对应一个端点斜率；最后，将所有不属于同一个第一边缘线、端点距离小于预设第二阈值且端点斜率相同的两个第一端点进行连接，将第一边缘线连接后所形成内部区域面积最大的边缘线，记为第二边缘线，第二边缘线的内部区域为焊缝区域，将焊接图像中焊缝区域对应的图像记为焊缝图像。3.根据权利要求1所述一种配电设备焊接生产缺陷检测系统，其特征在于，所述将焊缝图像中的边缘线记为第一焊缝边缘，获取任意第一焊缝边缘的端点记为第二端点，根据第一焊缝边缘上第二端点的距离以及斜率，对第一焊缝边缘中的部分第二端点进行连接，获得若干个第一新边缘，包括的具体步骤如下：利用Canny边缘检测算法获取焊缝图像中的边缘线，记为第一焊缝边缘，利用Harris角点检测算法获取任意第一焊缝边缘的端点记为第二端点；获取任意不属于同一个第一焊缝边缘的两个第二端点欧式距离最近时对应的距离，记为焊缝端点距离；将第二端点与相邻的边缘像素点所形成直线的斜率，记为对应第二端点的焊缝端点斜率；当不属于同一个第一焊缝边缘的两个第二端点对应的焊缝端点距离小于预设距离阈值，且焊缝端点斜率相同时将所述两个第二端点进行连接，将连接后的第一焊缝边缘记为第一新边缘，获得若干第一新边缘。4.根据权利要求1所述一种配电设备焊接生产缺陷检测系统，其特征在于，所述根据第一新边缘中不同部分的差异获得疑似边缘，包括的具体步骤如下：以第一新边缘中任意像素点为起点，从左下方开始顺时针方向，利用8邻域链码编码获取第一新边缘中形成循环的链码序列时，将序列元素的数量记为第一数量，将第一新边缘的所有像素点的数量记为第二数量，将第一数量与第二数量的比值，记为第一新边缘的疑似度，将疑似度大于预设疑似度阈值的第一新边缘记为疑似边缘。5.根据权利要求1所述一种配电设备焊接生产缺陷检测系统，其特征在于，所述将疑似边缘断开处理获得第二新边缘，包括的具体步骤如下：以疑似边缘中任意像素点为起点，从左下方开始顺时针方向，利用8邻域链码编码获取疑似边缘中可以形成循环的链码序列的边缘线，记为循环边缘；获取循环边缘中所有像素点的切线斜率最大时预设的第一参数对应数量下的像素点，记为特殊像素点，获取任意两个特殊像素点之间的欧式距离，将循环边缘中欧式距离最大的两个特殊像素点记为断裂点，将断裂点的灰度值设置为0，使闭合的循环边缘断开，循环边缘断开后对应的疑似边缘也断开为两条边缘线，将疑似边缘断开后的两个边缘线记为第二新边缘。6.根据权利要求1所述一种配电设备焊接生产缺陷检测系统，其特征在于，所述获取第二新边缘的端点记为新边缘端点，根据新边缘端点的数量获得特殊边缘，获取特殊边缘中新边缘端点之间形成的编码路径，根据特殊边缘中新边缘端点之间形成的编码路径，获得特殊边缘的主边缘和若干个分支边缘，包括的具体步骤如下：利用Harris角点检测算法获取所有第二新边缘的端点，记为新边缘端点，将新边缘端点数量大于2的第二新边缘记为特殊边缘，并以特殊边缘中任意一个新边缘端点为起点，另外任意新边缘端点为终点，利用8邻域链码编码进行编码获得编码路径对应的链码序列，则特殊边缘对应若干个链码序列，任意链码序列对应两个新边缘端点，获取链码序列长度最长时对应的编码路径记为主编码路径，将主编码路径对应的边缘线记为特殊边缘的主边缘，将特殊边缘中除主边缘以外的边缘线记为分支边缘。7.根据权利要求6所述一种配电设备焊接生产缺陷检测系统，其特征在于，所述根据分支边缘的数量和编码路径的长度获得特殊边缘的第一特征值，包括的具体步骤如下：将特殊边缘的新边缘端点的数量减去2所得数值记为特殊边缘的分支边缘的数量；利用8邻域链码编码获取特殊边缘上，除主编码路径对应的两个新边缘端点以外任意新边缘端点到主边缘的最短编码路径所对应链码序列的长度，记为新边缘端点对应分支边缘的路径长度；任意特殊边缘的第一特征值的具体计算方法为：其中，表示特殊边缘的第一特征值；/＞表示特殊边缘的分支边缘的数量；/＞表示特殊边缘的第/＞个分支边缘的路径长度。8.根据权利要求1所述一种配电设备焊接生产缺陷检测系统，其特征在于，所述获取分支边缘和主边缘形成的连接点，将连接点与主边缘上相邻像素点所形成向量的夹角记为连接点的角度特征，包括的具体步骤如下：首先，利用Hough变换获取特殊边缘中分支边缘所对应直线与主边缘所产生的交点，记为特殊边缘中分支边缘与主边缘的连接点；然后，获取任意连接点在主边缘上两侧分别相邻的预设的参数个像素点，记为连接点的邻点，将由连接点与邻点在焊接图像中的坐标获得对应的向量记为基向量，则连接点任意一侧对应参数/＞个基向量，将连接点任意一侧的所有基向量的平均值记为连接点的平均向量，获取连接点两侧平均向量的夹角，记为连接点的角度特征。9.根据权利要求1所述一种配电设备焊接生产缺陷检测系统，其特征在于，所述结合分支边缘以及连接点的角度特征对预设的初始权重进行调节获得连接点的修正权重，结合修正权重对特殊边缘的主边缘进行加权拟合获得拟合线，根据主边缘与拟合线之间的差异获得主边缘对应特殊边缘的第二特征值，包括的具体步骤如下：首先，对特殊边缘的主边缘上的连接点对应初始权重进行调节，获得连接点的修正权重，具体计算方法为：其中，表示特殊边缘的主边缘上第/＞个分支边缘对应连接点的修正权重，/＞表示预设的初始权重；/＞表示特殊边缘的主边缘上第/＞个分支边缘对应连接点的角度特征；/＞表示特殊边缘的第/＞个分支边缘的路径长度；/＞表示特殊边缘的主边缘的路径长度；/＞表示特殊边缘的第/＞个分支边缘上所有像素点到主边缘的最短欧式距离的平均值；然后，结合特殊边缘的主边缘上连接点对应修正权重，利用最小二乘法对主边缘进行曲线拟合，将拟合获得的曲线记为拟合线，获取任意连接点对应分支边缘上任意像素点与连接点对应主边缘的最小欧式距离，记为连接点的残差因子，一个连接点对应若干个残差因子，一个残差因子对应分支边缘上的一个像素点，将任意连接点的所有残差因子的均值记为连接点与拟合线的残差；将特殊边缘的主边缘上除连接点以外的任意像素点与拟合线之间的距离，记为像素点与拟合线的残差；最后，将任意特殊边缘的主边缘上所有像素点对应残差的均值，记为特殊边缘的第二特征值。10.根据权利要求1所述一种配电设备焊接生产缺陷检测系统，其特征在于，所述根据第一特征值和第二特征值获得缺陷概率，利用缺陷概率实现配电设备焊接生产缺陷检测，包括的具体步骤如下：首先，将特殊边缘的第一特征值和第二特征值的乘积结果记为概率因子，获取焊缝图像中所有特殊边缘的概率因子；然后，利用线性归一化方法将所有概率因子进行归一化处理，将归一化结果记为缺陷概率；最后，焊缝图像中缺陷概率大于预设概率阈值的特殊边缘为裂缝缺陷的边缘线，记为缺陷边缘，并对缺陷边缘线进行可视化标注，完成对配电设备焊接生产的缺陷检测。
说明书desc
技术领域本发明涉及图像数据处理技术领域，具体涉及一种配电设备焊接生产缺陷检测系统。背景技术配电设备在电力系统中具有重要作用，焊接是其制造过程中关键的环节之一。焊接缺陷可能导致设备性能下降、损坏甚至故障，进而威胁到电力系统的正常运行。通过检测焊接缺陷，可以及时发现和解决问题，确保产品质量达到标准要求。目前对配电设备焊接进行缺陷检测时，通常利用边缘检测的方法对焊接裂缝缺陷进行检测，但是由于焊接部分的表面上，存在的纹理信息使得表面边缘信息多，影响特征提取的准确性，增加了缺陷检测的难度，因此当直接利用边缘检测进行缺陷检测时，检测系统容易受到多余边缘信息的干扰，导致焊接缺陷检测结果不准确。发明内容本发明提供一种配电设备焊接生产缺陷检测系统，以解决现有的问题。本发明的一种配电设备焊接生产缺陷检测系统采用如下技术方案：本发明提供了一种配电设备焊接生产缺陷检测系统，该系统包括以下模块：图像准备模块：获取焊缝图像；第一特征模块：将焊缝图像中的边缘线记为第一焊缝边缘，获取任意第一焊缝边缘的端点记为第二端点，根据第一焊缝边缘上第二端点的距离以及斜率，对第一焊缝边缘中的部分第二端点进行连接，获得若干个第一新边缘；根据第一新边缘中不同部分的差异获得疑似边缘，将疑似边缘断开处理获得第二新边缘；获取第二新边缘的端点记为新边缘端点，根据新边缘端点的数量获得特殊边缘，获取特殊边缘中新边缘端点之间形成的编码路径，根据特殊边缘中新边缘端点之间形成的编码路径，获得特殊边缘的主边缘和若干个分支边缘，根据分支边缘的数量和编码路径的长度获得特殊边缘的第一特征值；第二特征模块：获取分支边缘和主边缘形成的连接点，将连接点与主边缘上相邻像素点所形成向量的夹角记为连接点的角度特征，结合分支边缘以及连接点的角度特征对预设的初始权重进行调节获得连接点的修正权重，结合修正权重对特殊边缘的主边缘进行加权拟合获得拟合线，根据主边缘与拟合线之间的差异获得主边缘对应特殊边缘的第二特征值；缺陷检测模块：根据第一特征值和第二特征值获得缺陷概率，利用缺陷概率实现配电设备焊接生产缺陷检测。进一步的，所述获取焊缝图像，包括的具体步骤如下：步骤，布置工业相机，获取配电设备经过焊接后焊缝部分的表面图像，并对获取到的表面图像进行灰度化处理，将灰度化处理后的图像记为焊接图像；步骤，首先，利用Sobel算子获取焊接图像中所有像素点的梯度值，获取所有大于预设第一阈值的像素点所形成的边缘线，记为第一边缘线，获得若干个第一边缘线；然后，利用Harris角点检测算法获取任意第一边缘线的端点记为第一端点，获取任意不属于同一个第一边缘线的两个第一端点最近时对应的距离，以及端点与相邻的边缘像素点之间所形成直线的斜率，分别记为端点距离和端点斜率；任意两个不属于同一个第一边缘线的两个第一端点对应一个端点距离，任意一个第一端点对应一个端点斜率；最后，将所有不属于同一个第一边缘线、端点距离小于预设第二阈值且端点斜率相同的两个第一端点进行连接，将第一边缘线连接后所形成内部区域面积最大的边缘线，记为第二边缘线，第二边缘线的内部区域为焊缝区域，将焊接图像中焊缝区域对应的图像记为焊缝图像。进一步的，所述将焊缝图像中的边缘线记为第一焊缝边缘，获取任意第一焊缝边缘的端点记为第二端点，根据第一焊缝边缘上第二端点的距离以及斜率，对第一焊缝边缘中的部分第二端点进行连接，获得若干个第一新边缘，包括的具体步骤如下：利用Canny边缘检测算法获取焊缝图像中的边缘线，记为第一焊缝边缘，利用Harris角点检测算法获取任意第一焊缝边缘的端点记为第二端点；获取任意不属于同一个第一焊缝边缘的两个第二端点欧式距离最近时对应的距离，记为焊缝端点距离；将第二端点与相邻的边缘像素点所形成直线的斜率，记为对应第二端点的焊缝端点斜率；当不属于同一个第一焊缝边缘的两个第二端点对应的焊缝端点距离小于预设距离阈值，且焊缝端点斜率相同时将所述两个第二端点进行连接，将连接后的第一焊缝边缘记为第一新边缘，获得若干第一新边缘。进一步的，所述根据第一新边缘中不同部分的差异获得疑似边缘，包括的具体步骤如下：以第一新边缘中任意像素点为起点，从左下方开始顺时针方向，利用8邻域链码编码获取第一新边缘中形成循环的链码序列时，将序列元素的数量记为第一数量，将第一新边缘的所有像素点的数量记为第二数量，将第一数量与第二数量的比值，记为第一新边缘的疑似度，将疑似度大于预设疑似度阈值的第一新边缘记为疑似边缘。进一步的，所述将疑似边缘断开处理获得第二新边缘，包括的具体步骤如下：以疑似边缘中任意像素点为起点，从左下方开始顺时针方向，利用8邻域链码编码获取疑似边缘中可以形成循环的链码序列的边缘线，记为循环边缘；获取循环边缘中所有像素点的切线斜率最大时预设的第一参数对应数量下的像素点，记为特殊像素点，获取任意两个特殊像素点之间的欧式距离，将循环边缘中欧式距离最大的两个特殊像素点记为断裂点，将断裂点的灰度值设置为0，使闭合的循环边缘断开，循环边缘断开后对应的疑似边缘也断开为两条边缘线，将疑似边缘断开后的两个边缘线记为第二新边缘。进一步的，所述获取第二新边缘的端点记为新边缘端点，根据新边缘端点的数量获得特殊边缘，获取特殊边缘中新边缘端点之间形成的编码路径，根据特殊边缘中新边缘端点之间形成的编码路径，获得特殊边缘的主边缘和若干个分支边缘，包括的具体步骤如下：利用Harris角点检测算法获取所有第二新边缘的端点，记为新边缘端点，将新边缘端点数量大于2的第二新边缘记为特殊边缘，并以特殊边缘中任意一个新边缘端点为起点，另外任意新边缘端点为终点，利用8邻域链码编码进行编码获得编码路径对应的链码序列，则特殊边缘对应若干个链码序列，任意链码序列对应两个新边缘端点，获取链码序列长度最长时对应的编码路径记为主编码路径，将主编码路径对应的边缘线记为特殊边缘的主边缘，将特殊边缘中除主边缘以外的边缘线记为分支边缘。进一步的，所述根据分支边缘的数量和编码路径的长度获得特殊边缘的第一特征值，包括的具体步骤如下：将特殊边缘的新边缘端点的数量减去2所得数值记为特殊边缘的分支边缘的数量；利用8邻域链码编码获取特殊边缘上，除主编码路径对应的两个新边缘端点以外任意新边缘端点到主边缘的最短编码路径所对应链码序列的长度，记为新边缘端点对应分支边缘的路径长度；任意特殊边缘的第一特征值的具体计算方法为：其中，表示特殊边缘的第一特征值；/＞表示特殊边缘的分支边缘的数量；/＞表示特殊边缘的第/＞个分支边缘的路径长度。进一步的，所述获取分支边缘和主边缘形成的连接点，将连接点与主边缘上相邻像素点所形成向量的夹角记为连接点的角度特征，包括的具体步骤如下：首先，利用Hough变换获取特殊边缘中分支边缘所对应直线与主边缘所产生的交点，记为特殊边缘中分支边缘与主边缘的连接点；然后，获取任意连接点在主边缘上两侧分别相邻的预设的参数个像素点，记为连接点的邻点，将由连接点与邻点在焊接图像中的坐标获得对应的向量记为基向量，则连接点任意一侧对应参数/＞个基向量，将连接点任意一侧的所有基向量的平均值记为连接点的平均向量，获取连接点两侧平均向量的夹角，记为连接点的角度特征。进一步的，所述结合分支边缘以及连接点的角度特征对预设的初始权重进行调节获得连接点的修正权重，结合修正权重对特殊边缘的主边缘进行加权拟合获得拟合线，根据主边缘与拟合线之间的差异获得主边缘对应特殊边缘的第二特征值，包括的具体步骤如下：首先，对特殊边缘的主边缘上的连接点对应初始权重进行调节，获得连接点的修正权重，具体计算方法为：其中，表示特殊边缘的主边缘上第/＞个分支边缘对应连接点的修正权重，/＞表示预设的初始权重；/＞表示特殊边缘的主边缘上第/＞个分支边缘对应连接点的角度特征；表示特殊边缘的第/＞个分支边缘的路径长度；/＞表示特殊边缘的主边缘的路径长度；/＞表示特殊边缘的第/＞个分支边缘上所有像素点到主边缘的最短欧式距离的平均值；然后，结合特殊边缘的主边缘上连接点对应修正权重，利用最小二乘法对主边缘进行曲线拟合，将拟合获得的曲线记为拟合线，获取任意连接点对应分支边缘上任意像素点与连接点对应主边缘的最小欧式距离，记为连接点的残差因子，一个连接点对应若干个残差因子，一个残差因子对应分支边缘上的一个像素点，将任意连接点的所有残差因子的均值记为连接点与拟合线的残差；将特殊边缘的主边缘上除连接点以外的任意像素点与拟合线之间的距离，记为像素点与拟合线的残差；最后，将任意特殊边缘的主边缘上所有像素点对应残差的均值，记为特殊边缘的第二特征值。进一步的，所述根据第一特征值和第二特征值获得缺陷概率，利用缺陷概率实现配电设备焊接生产缺陷检测，包括的具体步骤如下：首先，将特殊边缘的第一特征值和第二特征值的乘积结果记为概率因子，获取焊缝图像中所有特殊边缘的概率因子；然后，利用线性归一化方法将所有概率因子进行归一化处理，将归一化结果记为缺陷概率；最后，焊缝图像中缺陷概率大于预设概率阈值的特殊边缘为裂缝缺陷的边缘线，记为缺陷边缘，并对缺陷边缘线进行可视化标注，完成对配电设备焊接生产的缺陷检测。本发明的技术方案的有益效果是：通过分析焊缝图像中边缘线的端点获得边缘线的第一特征，并对存在分支边缘的边缘线进行加权拟合获取拟合线，根据拟合线与边缘线之间的差异获得边缘线的第二特征值，利用第一特征值和第二特征值实现裂缝缺陷检测，通过结合裂缝缺陷产生时受到应力变化而产生分支裂缝的特点，避免了焊缝图像中鱼骨纹对缺陷检测的影响，结合加权拟合的方法，大大提高了利用边缘检测实现裂缝缺陷检测的准确性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明一种配电设备焊接生产缺陷检测系统的模块流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种配电设备焊接生产缺陷检测系统，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种配电设备焊接生产缺陷检测系统的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种配电设备焊接生产缺陷检测系统的模块流程图，该系统包括以下模块：图像准备模块：获取焊缝图像。步骤，布置工业相机，获取配电设备经过焊接后焊缝部分的表面图像，并对获取到的表面图像进行灰度化处理，将灰度化处理后的图像记为焊接图像。步骤，由于获取的焊接图像中同时包含了焊缝区域和背景区域，背景区域可能会存在其他的边缘信息，对焊缝缺陷检测产生干扰，另外，由于焊缝和母材之间的灰度差异较大，因此本实施例根据焊接图像中像素点的梯度大小获取焊接图像中的焊缝区域，具体步骤为：首先，利用Sobel算子获取焊接图像中所有像素点的梯度值，获取所有大于预设第一阈值的像素点所形成的边缘线，记为第一边缘线，获得若干个第一边缘线；然后，利用Harris角点检测算法获取任意第一边缘线的端点记为第一端点，获取任意不属于同一个第一边缘线的两个第一端点最近时对应的距离，以及端点与相邻的边缘像素点之间所形成直线的斜率，分别记为端点距离和端点斜率；任意两个不属于同一个第一边缘线的两个第一端点对应一个端点距离，任意一个第一端点对应一个端点斜率；最后，将所有不属于同一个第一边缘线、端点距离小于预设第二阈值且端点斜率相同的两个第一端点进行连接，将第一边缘线连接后所形成内部区域面积最大的边缘线，记为第二边缘线，内部区域即为焊缝区域，将焊接图像中焊缝区域对应的图像记为焊缝图像。需要说明的是，第一阈值和第二阈值均为经验值，可分别预设为焊接图像中所有像素点的平均梯度值和所有端点距离的平均值；需要说明的是，Sobel算子和Harris角点检测算法均为现有技术，中文名称分别为索贝尔算子和哈里斯角点检测算法，本实施例不过多赘述。至此，获得焊缝图像。第一特征模块：根据焊缝图像中边缘线的端点，获得第二特征值。在焊接过程中焊缝表面的熔池在冷却时会收缩，导致焊缝表面出现鱼骨状的纹理称为鱼骨纹，由于鱼骨纹具有一定的高度差，虽然在检测较大的焊缝裂缝时鱼骨纹对检测结果的影响较小，但是在对焊缝表面进行高精度的缺陷检测时，就会导致与裂缝之间灰度差异较小的鱼骨纹对检测结果造成干扰。由于鱼骨纹在焊缝表面的分布往往类似于鱼骨的排列方式，即和焊缝的中轴线之间的夹角相似且鱼骨纹的边缘线一般较为光滑，而裂缝的方向分布往往是平行于焊缝中轴线，或者是方向不规则，同时裂缝的边缘线往往曲折性较强不光滑，同时伴随着较多的分支，因此本实施例根据鱼骨纹的特征以避免鱼骨纹对焊缝的裂缝缺陷检测产生影响。另外，由于焊缝中通常出现裂缝是由于焊接处不稳定而发生断裂，因此裂缝在图像中表现为由新边缘围成的狭长闭合区域，两侧的长边近似平行，因此为便于后续分析，获取焊缝图像中可能的裂缝区域，并将对应的新边缘划分为两部分。步骤，首先，利用Canny边缘检测算法获取焊缝图像中的边缘线，记为第一焊缝边缘，利用Harris角点检测算法获取任意第一焊缝边缘的端点记为第二端点；获取任意不属于同一个第一焊缝边缘的两个第二端点欧式距离最近时对应的距离，记为焊缝端点距离；将第二端点与相邻的边缘像素点所形成直线的斜率，记为对应第二端点的焊缝端点斜率；当不属于同一个第一焊缝边缘的两个第二端点对应的焊缝端点距离小于预设距离阈值，且焊缝端点斜率相同时将所述两个第二端点进行连接，将连接后的第一焊缝边缘记为第一新边缘，获得若干第一新边缘。需要说明的是，Canny边缘检测算法为现有算法，中文名称为坎尼算子，本实施例不过多赘述。需要说明的是，距离阈值预设经验值为4，可根据实际情况进行调整，本实施例不作具体限定。然后，由于焊接裂缝缺陷通常不仅是闭合的狭长曲线，而且存在若干个分支，因此本实施例以第一新边缘中任意像素点为起点，从左下方开始顺时针方向，利用8邻域链码编码获取第一新边缘中形成循环的链码序列时，将序列元素的数量记为第一数量，将第一新边缘的所有像素点的数量记为第二数量，将第一数量与第二数量的比值，记为第一新边缘的疑似度，将疑似度大于预设疑似度阈值的第一新边缘记为疑似边缘；需要说明的是，预设的疑似度阈值的经验值为0.5，可根据实际情况进行调整，本实施例不作具体限定。最后，以疑似边缘中任意像素点为起点，从左下方开始顺时针方向，利用8邻域链码编码获取疑似边缘中可以形成循环的链码序列的边缘线，记为循环边缘；获取循环边缘中所有像素点的切线斜率，获取斜率最大的第一参数对应数量下的像素点，记为特殊像素点，获取任意两个特殊像素点之间的欧式距离，将循环边缘中欧式距离最大的两个特殊像素点记为断裂点，将断裂点的灰度值设置为0，使闭合的循环边缘断开，循环边缘断开后对应的疑似边缘也断开为两条边缘线，将疑似边缘断开后的两个边缘线记为第二新边缘。需要说明的是，链码编码为现有算法，因此本实施例不过多赘述。步骤，焊缝表面产生裂缝时，裂缝区域周围都会受到应力，使得裂缝周边出现一些小的延伸裂缝，在焊缝图像中表现为裂缝对应的边缘线上存在若干较短的分支，而焊缝表面的鱼骨纹是由于熔池冷却不均匀导致的，因此鱼骨纹所对应的边缘线上不会存在较多的分支，故当边缘线上的分支越多，就越有可能是裂缝缺陷所对应的边缘。首先，利用Harris角点检测算法获取所有第二新边缘的端点，记为新边缘端点，如果第二新边缘的新边缘端点数量为2，那么所述第二新边缘就不存在分支；如果新边缘端点数量大于2，则对应第二新边缘存在分支，将新边缘端点数量大于2的第二新边缘记为特殊边缘，并以特殊边缘中任意一个新边缘端点为起点，另外任意新边缘端点为终点，利用8邻域链码编码进行编码获得编码路径对应的链码序列，则特殊边缘对应若干个链码序列，任意链码序列对应两个新边缘端点，获取链码序列长度最长时对应的编码路径记为主编码路径，将主编码路径对应的边缘线记为特殊边缘的主边缘，将主编码路径对应的链码序列长度记为主边缘的路径长度，将特殊边缘中除主边缘以外的边缘线记为分支边缘；一个特殊边缘对应若干个分支边缘，特殊边缘上除主编码路径对应的两个特殊边缘上分支边缘数量越多，弱边缘的长度越长，说明越有可能为裂缝缺陷对应的边缘线；然后，特殊边缘的新边缘端点的数量减去2所得数值即为特殊边缘的分支边缘的数量；利用8邻域链码编码获取特殊边缘上，除主编码路径对应的两个新边缘端点以外任意新边缘端点到主边缘的最短编码路径所对应链码序列的长度，记为新边缘端点对应分支边缘的路径长度；最后，根据分支边缘的数量和长度获取任意特殊边缘的第一特征值，具体计算方法为：其中，表示特殊边缘的第一特征值；/＞表示特殊边缘的分支边缘的数量；/＞表示特殊边缘的第/＞个分支边缘的路径长度。特殊边缘的分支边缘的数量越多且长度越长，特殊边缘的第一特征值越大，说明特殊边缘越有可能是裂缝缺陷对应的边缘线。至此，获得特殊边缘以及特殊边缘对应的第一特征值。第二特征模块：由于焊缝表面上的裂缝周边的应力方向多样，导致裂缝各处的断裂情况也不同，因此裂缝对应边缘的整体趋势是及其不规则的，而熔池冷却时由于表面张力的原因，所产生的鱼骨纹的边缘较为光滑的，延伸方向变化较为规则。因此本实施例通过拟合边缘，如果边缘越不规则，那么边缘与拟合曲线之间的残差就越大；相反边缘越规则，那么边缘和拟合曲线的残差越小。另外，将分支的权重加到分支和主边缘的连接点上，让连接点占更大的权重，来将分支的边缘信息结合在拟合边缘的过程中。步骤，首先，利用Hough变换获取特殊边缘中分支边缘所对应直线与主边缘所产生的交点，记为分支边缘与主边缘的连接点，一个连接点对应一个主边缘上的边缘像素点，且对应一个分支边缘，则一个主边缘上存在若干个分支边缘时，也对应有与分支边缘同样数量的连接点；然后，将作为主边缘上各边缘像素点的初始权重；需要说明的是，根据经验预设初始权重为1，可根据实际情况进行调整，本实施例不作具体限定；需要说明的是，Hough变换为现有算法，中文名称为霍夫变换，本实施例不过多赘述。通过分支边缘的特征来对主边缘上的各边缘像素点设置更高的权重，使其在拟合中做出更大的贡献，从而让拟合结果更合理。另外，分支边缘之间也存在差异，如果一个分支边缘越有可能是裂缝缺陷的延伸裂缝，那么就需要赋予更大的权重，如果分支边缘是检测过程中由于光影等原因造成，那么权重就应该减小。根据分支边缘的差异获取各分支边缘的不同权重，如果分支边缘和主边缘的连接点处主边缘的延伸方向变化越大，那么连接点处的裂缝延伸程度越大，则所述连接点对应的分支边缘的权重越大；如果分支边缘上所有边缘像素点到达主边缘的路径长度越小，说明分支边缘和主边缘越平行，所述分支边缘越有可能是光影形成的边缘线，因此对应的权重应该越小；而分支边缘的长度越长，那么分支边缘的权重应该越大。步骤，首先，获取任意连接点在主边缘上两侧分别相邻的参数个像素点，记为连接点的邻点，将由连接点与邻点在焊接图像中的坐标获得对应的向量记为基向量，则连接点任意一侧对应参数/＞个基向量，将连接点任意一侧的所有基向量的平均值记为连接点的平均向量，获取连接点两侧平均向量的夹角，记为连接点的角度特征；需要说明的是，根据经验预设参数为3，可根据实际情况进行调整，本实施例不作具体限定。然后，对特殊边缘的主边缘上的连接点对应初始权重进行调节，获得连接点的修正权重，具体计算方法为：其中，表示特殊边缘的主边缘上第/＞个分支边缘对应连接点的修正权重，/＞表示预设的初始权重；/＞表示特殊边缘的主边缘上第/＞个分支边缘对应连接点的角度特征；表示特殊边缘的第/＞个分支边缘的路径长度；/＞表示特殊边缘的主边缘的路径长度；/＞表示特殊边缘的第/＞个分支边缘上所有像素点到主边缘的最短欧式距离的平均值；连接点的角度特征表示主边缘与分支边缘所形成连接点处，边缘线的延伸方向变化的程度，角度特征的数值越大，对应位置处主边缘的延伸方向变化越大，就越有可能产生较大的裂缝分支，因此该位置处像素点的权重就越大；分支边缘上所有像素点到主边缘的最短欧式距离的平均值越大，说明分支边缘和主边缘距离越远，越有可能在方向上趋近平行，则有可能是光影造成的边缘线，因此对应位置处像素点的权重应该越小。分支边缘长度越长且连接点的角度特征越大，那么对应分支边缘和主边缘的连接点的权重越大。最后，结合特殊边缘的主边缘上连接点对应修正权重，利用最小二乘法对主边缘进行曲线拟合，将拟合获得的曲线记为拟合线；如果主边缘越光滑，边缘走势变化越小，那么主边缘和拟合线的残差就越小；而如果主边缘越不规则，延伸方向变化越大，那么主边缘与拟合线的残差就越大，也就说明主边缘越有可能是裂缝缺陷的边缘线。步骤，首先，获取任意连接点对应分支边缘上任意像素点与连接点对应主边缘的最小欧式距离，记为连接点的残差因子，连接点对应若干个残差因子，一个残差因子对应分支边缘上的一个像素点，将任意连接点的所有残差因子的均值记为连接点与拟合线的残差；将特殊边缘的主边缘上除连接点以外的任意像素点与拟合线之间的距离，记为像素点与拟合线的残差。分支边缘越有可能是裂缝的分支裂缝时，那么在获取拟合线的拟合过程中对应的权重越大，那么拟合线越靠近这条分支边缘，因此分支边缘上各像素点与拟合线的最小欧式距离就越小，那么分支边缘对应连接点的残差就越小，主边缘上其他像素点的残差就更大，但是由于分支边缘的所有像素点对应残差因子融合在了主边缘的一个连接点上，在拟合线与特殊边缘之间整体上残差的占比较小，因此整体的残差就越大。分支边缘越偏离拟合线，对应连接点的残差越大。然后，将任意特殊边缘的主边缘上所有像素点对应残差的均值，记为特殊边缘的第二特征值。第二特征值越大，说明特殊边缘越不规则，就越有可能是裂缝缺陷的边缘线，即特殊边缘和拟合线的差异越大，说明特殊边缘越不规则，越有可能是裂缝缺陷的边缘。至此，得到各特殊边缘的第二特征值。缺陷检测模块：根据特殊边缘的第一特征值和第二特征值获得缺陷概率，完成对配电设备焊接缺陷的智能检测。首先，将特殊边缘的第一特征值和第二特征值的乘积结果记为概率因子，获取焊缝图像中所有特殊边缘的概率因子；然后，利用线性归一化方法将所有概率因子进行归一化处理，将归一化结果记为缺陷概率；最后，焊缝图像中缺陷概率大于预设概率阈值的特殊边缘为裂缝缺陷的边缘线，记为缺陷边缘，并对缺陷边缘线进行可视化标注，完成对配电设备焊接生产的缺陷检测。需要说明的是，根据经验预设概率阈值为0.7，可根据实际情况进行调整，本实施例不作具体限定。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
