标题title
回环检测数据的处理方法、装置、存储介质以及车辆
摘要abst
本公开涉及一种回环检测数据的处理方法、装置、存储介质以及车辆，属于自动驾驶技术领域，以解决回环检测过程消耗资源较多的问题，所述方法包括：获取车辆在当前时刻的第一位姿以及当前时刻车辆中的图像采集装置对车辆周围环境采集得到的图像；在从图像中识别到停车场的库位编号的情况下，根据所述第一位姿、所述当前时刻以及从图像中识别到的停车场的第一库位编号，生成第一检测结果；从保存的历史的检测结果中，匹配库位编号为第一库位编号的检测结果，得到第二检测结果；将所述第一检测结果和所述第二检测结果作为回环对。这种方式可以基于库位编号字符进行回环检测，对计算资源和存储资源的占用较低。
权利要求书clms
1.一种回环检测数据的处理方法，其特征在于，包括：获取车辆在当前时刻的第一位姿以及当前时刻车辆中的图像采集装置对车辆周围环境采集得到的图像；在从所述图像中识别到停车场的库位编号的情况下，根据所述第一位姿、所述当前时刻以及从所述图像中识别到的停车场的第一库位编号，生成第一检测结果，所述第一检测结果为对应于所述当前时刻的检测结果；从保存的历史的检测结果中，匹配库位编号为第一库位编号的检测结果，得到第二检测结果，所述历史的检测结果包括历史生成的对应于历史时刻的检测结果；将所述第一检测结果和所述第二检测结果作为回环对。2.根据权利要求1所述的方法，其特征在于，包括：获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；在所述第三检测结果中的第一时刻与所述第四检测结果中的第二时刻的差值小于时刻阈值的情况下，从已确定的回环对中删除所述目标回环对。3.根据权利要求1所述的方法，其特征在于，包括：获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；计算第三检测结果中的第一时刻与第四检测结果中的第二时刻之间的，所述车辆的行驶距离值；在所述行驶距离值小于距离阈值时，从已确定的回环对中删除所述目标回环对。4.根据权利要求1所述的方法，其特征在于，包括：获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；根据第三检测结果中的第三位姿与第四检测结果中的第四位姿，计算距离差值；计算所述距离差值与参照差值的差值，得到第一差值；在所述第一差值大于第一阈值时，从已确定的回环对中删除所述目标回环对。5.根据权利要求4所述的方法，其特征在于，所述方法包括：对各个已确定的回环对，计算所述回环对所对应的两个位姿的距离差值，得到多个距离差值；计算所述多个距离差值的均值，得到所述参照差值。6.根据权利要求1至4中任一项所述的方法，其特征在于，包括：对多个已确定的回环对中的各个回环对，计算所述回环对所对应的两个位姿的距离差值，得到所述回环对的距离差值；根据回环对的确定时刻对回环对进行排序；在排序相邻的两个回环对的距离差值的差值小于第二阈值的情况下，确定所述两个回环对为同一类回环对；对各个类别的回环对，将所述类别的回环对合并为一个回环对，得到合并回环对；并，生成所述类别的回环对的第一几何约束，通过所述第一几何约束计算所述合并回环对中的两个位姿的相对位姿；通过所述相对位姿，对所述合并回环对中的两个位姿之间的车辆轨迹进行修正。7.根据权利要求6所述的方法，其特征在于，所述第一检测结果还包括所述第一库位编号所对应的库位的位置信息，所述位置信息包括库位的四个顶点，所述四个顶点包括作为所述库位的入口点的第一顶点和第二顶点，与第一顶点相连的第四顶点，以及与第二顶点相连的第三顶点，所述生成所述类别的回环对的第一几何约束，包括：分别将该类回环对中的各个回环对作为第一回环对，对所述第一回环对中的两个检测结果，分别计算检测结果中的第一顶点至第二顶点的向量，得到第一向量；并，计算第一顶点至第四顶点的向量，得到第二向量；计算第二顶点至第三顶点的向量，得到第三向量；将所述第一回环对所对应的两个第一顶点之间的距离值最小、第一回环对所对应的两个第二顶点之间的距离值最小、所述第一回环对所对应的两个第一向量之间的夹角最小、所述第一回环对所对应的两个第二向量之间的夹角最小以及所述第一回环对所对应的两个第三向量之间的夹角最小作为所述第一回环对的目标几何约束，所述第一几何约束包括各种第一回环对的目标几何约束。8.一种回环检测数据的处理装置，其特征在于，包括：第一获取模块，被配置为获取车辆在当前时刻的第一位姿以及当前时刻车辆中的图像采集装置对车辆周围环境采集得到的图像；第一生成模块，被配置为在从所述图像中识别到停车场的库位编号的情况下，根据所述第一位姿、所述当前时刻以及从所述图像中识别到的停车场的第一库位编号，生成第一检测结果，所述第一检测结果为对应于所述当前时刻的检测结果；第一匹配模块，被配置为从保存的历史的检测结果中，匹配库位编号为第一库位编号的检测结果，得到第二检测结果，所述历史的检测结果包括历史生成的对应于历史时刻的检测结果；第一执行模块，被配置为将所述第一检测结果和所述第二检测结果作为回环对。9.一种回环检测数据的处理装置，其特征在于，包括：处理器；用于存储处理器可执行指令的存储器；其中，所述处理器被配置为执行权利要求1至7中任一项所述方法的步骤。10.一种计算机可读存储介质，其上存储有计算机程序指令，其特征在于，该程序指令被处理器执行时实现权利要求1至7中任一项所述方法的步骤。11.一种车辆，其特征在于，包括权利要求9所述的回环检测数据的处理装置。
说明书desc
技术领域本公开涉及自动驾驶技术领域，尤其涉及回环检测数据的处理方法、装置、存储介质以及车辆。背景技术回环检测，又称闭环检测，是指机器识别曾到达某场景，使得地图闭环的能力。根据使用传感器的不同，回环检测分为基于激光雷达的回环检测和基于视觉的回环检测。相关场景中，这些回环检测方式对内存资源以及计算资源的消耗还较高，因而具有较高的使用成本。发明内容为克服相关技术中存在的问题，本公开提供一种回环检测数据的处理方法、装置、存储介质以及车辆。根据本公开实施例的第一方面，提供一种回环检测数据的处理方法，包括：获取车辆在当前时刻的第一位姿以及当前时刻车辆中的图像采集装置对车辆周围环境采集得到的图像；在从所述图像中识别到停车场的库位编号的情况下，根据所述第一位姿、所述当前时刻以及从所述图像中识别到的停车场的第一库位编号，生成第一检测结果，所述第一检测结果为对应于所述当前时刻的检测结果；从保存的历史的检测结果中，匹配库位编号为第一库位编号的检测结果，得到第二检测结果，所述历史的检测结果包括历史生成的对应于历史时刻的检测结果；将所述第一检测结果和所述第二检测结果作为回环对。可选地，包括：获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；在所述第三检测结果中的第一时刻与所述第四检测结果中的第二时刻的差值小于时刻阈值的情况下，从已确定的回环对中删除所述目标回环对。可选地，包括：获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；计算第三检测结果中的第一时刻与第四检测结果中的第二时刻之间的，所述车辆的行驶距离值；在所述行驶距离值小于距离阈值时，从已确定的回环对中删除所述目标回环对。可选地，包括：获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；根据第三检测结果中的第三位姿与第四检测结果中的第四位姿，计算距离差值；计算所述距离差值与参照差值的差值，得到第一差值；在所述第一差值大于第一阈值时，从已确定的回环对中删除所述目标回环对。可选地，所述方法包括：对各个已确定的回环对，计算所述回环对所对应的两个位姿的距离差值，得到多个距离差值；计算所述多个距离差值的均值，得到所述参照差值。可选地，包括：对多个已确定的回环对中的各个回环对，计算所述回环对所对应的两个位姿的距离差值，得到所述回环对的距离差值；根据回环对的确定时刻对回环对进行排序；在排序相邻的两个回环对的距离差值的差值小于第二阈值的情况下，确定所述两个回环对为同一类回环对；对各个类别的回环对，将所述类别的回环对合并为一个回环对，得到合并回环对；并，生成所述类别的回环对的第一几何约束，通过所述第一几何约束计算所述合并回环对中的两个位姿的相对位姿；通过所述相对位姿，对所述合并回环对中的两个位姿之间的车辆轨迹进行修正。可选地，所述第一检测结果还包括所述第一库位编号所对应的库位的位置信息，所述位置信息包括库位的四个顶点，所述四个顶点包括作为所述库位的入口点的第一顶点和第二顶点，与第一顶点相连的第四顶点，以及与第二顶点相连的第三顶点，所述生成所述类别的回环对的第一几何约束，包括：分别将该类回环对中的各个回环对作为第一回环对，对所述第一回环对中的两个检测结果，分别计算检测结果中的第一顶点至第二顶点的向量，得到第一向量；并，计算第一顶点至第四顶点的向量，得到第二向量；计算第二顶点至第三顶点的向量，得到第三向量；将所述第一回环对所对应的两个第一顶点之间的距离值最小、第一回环对所对应的两个第二顶点之间的距离值最小、所述第一回环对所对应的两个第一向量之间的夹角最小、所述第一回环对所对应的两个第二向量之间的夹角最小以及所述第一回环对所对应的两个第三向量之间的夹角最小作为所述第一回环对的目标几何约束，所述第一几何约束包括各种第一回环对的目标几何约束。根据本公开实施例的第二方面，提供一种回环检测数据的处理装置，包括：第一获取模块，被配置为获取车辆在当前时刻的第一位姿以及当前时刻车辆中的图像采集装置对车辆周围环境采集得到的图像；第一生成模块，被配置为在从所述图像中识别到停车场的库位编号的情况下，根据所述第一位姿、所述当前时刻以及从所述图像中识别到的停车场的第一库位编号，生成第一检测结果，所述第一检测结果为对应于所述当前时刻的检测结果；第一匹配模块，被配置为从保存的历史的检测结果中，匹配库位编号为第一库位编号的检测结果，得到第二检测结果，所述历史的检测结果包括历史生成的对应于历史时刻的检测结果；第一执行模块，被配置为将所述第一检测结果和所述第二检测结果作为回环对。可选地，包括：第二获取模块，被配置为获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；第一删除模块，被配置为在所述第三检测结果中的第一时刻与所述第四检测结果中的第二时刻的差值小于时刻阈值的情况下，从已确定的回环对中删除所述目标回环对。可选地，包括：第三获取模块，被配置为获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；第一计算模块，被配置为计算第三检测结果中的第一时刻与第四检测结果中的第二时刻之间的，所述车辆的行驶距离值；第二删除模块，被配置为在所述行驶距离值小于距离阈值时，从已确定的回环对中删除所述目标回环对。可选地，包括：第四获取模块，被配置为获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；第二计算模块，被配置为根据第三检测结果中的第三位姿与第四检测结果中的第四位姿，计算距离差值；第三计算模块，被配置为计算所述距离差值与参照差值的差值，得到第一差值；第三删除模块，被配置为在所述第一差值大于第一阈值时，从已确定的回环对中删除所述目标回环对。可选地，所述装置包括：第四计算模块，被配置为对各个已确定的回环对，计算所述回环对所对应的两个位姿的距离差值，得到多个距离差值；第五计算模块，被配置为计算所述多个距离差值的均值，得到所述参照差值。可选地，包括：第六计算模块，被配置为对多个已确定的回环对中的各个回环对，计算所述回环对所对应的两个位姿的距离差值，得到所述回环对的距离差值；第一排序模块，被配置为根据回环对的确定时刻对回环对进行排序；第一确定模块，被配置为在排序相邻的两个回环对的距离差值的差值小于第二阈值的情况下，确定所述两个回环对为同一类回环对；合并模块，被配置为对各个类别的回环对，将所述类别的回环对合并为一个回环对，得到合并回环对；并，约束生成模块，被配置为生成所述类别的回环对的第一几何约束，通过所述第一几何约束计算所述合并回环对中的两个位姿的相对位姿；轨迹修正模块，被配置为通过所述相对位姿，对所述合并回环对中的两个位姿之间的车辆轨迹进行修正。可选地，所述第一检测结果还包括所述第一库位编号所对应的库位的位置信息，所述位置信息包括库位的四个顶点，所述四个顶点包括作为所述库位的入口点的第一顶点和第二顶点，与第一顶点相连的第四顶点，以及与第二顶点相连的第三顶点，所述约束生成模块，包括：第一计算子模块，被配置为分别将该类回环对中的各个回环对作为第一回环对，对所述第一回环对中的两个检测结果，分别计算检测结果中的第一顶点至第二顶点的向量，得到第一向量；第二计算子模块，被配置为分别将该类回环对中的各个回环对作为第一回环对，对所述第一回环对中的两个检测结果，分别计算检测结果中的第一顶点至第四顶点的向量，得到第二向量；计算第二顶点至第三顶点的向量，得到第三向量；约束生成子模块，被配置为将所述第一回环对所对应的两个第一顶点之间的距离值最小、第一回环对所对应的两个第二顶点之间的距离值最小、所述第一回环对所对应的两个第一向量之间的夹角最小、所述第一回环对所对应的两个第二向量之间的夹角最小以及所述第一回环对所对应的两个第三向量之间的夹角最小作为所述第一回环对的目标几何约束，所述第一几何约束包括各种第一回环对的目标几何约束。根据本公开实施例的第三方面，提供一种回环检测数据的处理装置，包括：处理器；用于存储处理器可执行指令的存储器；其中，所述处理器被配置为执行上述第一方面中任一项所述方法的步骤。根据本公开实施例的第四方面，提供一种计算机可读存储介质，其上存储有计算机程序指令，该程序指令被处理器执行时实现上述第一方面中任一项所述方法的步骤。根据本公开实施例的第五方面，提供一种车辆，包括上述第三方面中所述的回环检测数据的处理装置。上述技术方案中，能够获取车辆在当前时刻的第一位姿以及当前时刻车辆中的图像采集装置对车辆周围环境采集得到的图像，并对所述图像进行识别。在从所述图像中识别到停车场的库位编号的情况下，可以根据所述第一位姿、所述当前时刻以及从所述图像中识别到的停车场的第一库位编号，生成第一检测结果，所述第一检测结果为对应于所述当前时刻的检测结果。这样，可以从保存的历史的检测结果中，匹配库位编号为第一库位编号的检测结果，得到第二检测结果，并将所述第一检测结果和所述第二检测结果作为回环对。也就是说，上述技术方案能够基于停车场的库位编号进行回环检测识别。相对于基于激光点云、图像SLAM这样的回环检测方式，上述方案可以基于少量的库位编号字符进行回环检测，因而对计算资源和存储资源的占用较低。并且，库位编号与库位的对应程度较高，即便停车场不同楼层的结构相似，也能够通过库位编号区分位于不同楼层的停车库位。这样，上述方案基于库位编号进行回环检测，也能够区分不同楼层的库位，因而能够降低回环误匹配的概率，提升回环检测的准确度。应当理解的是，以上的一般描述和后文的细节描述仅是示例性和解释性的，并不能限制本公开。附图说明此处的附图被并入说明书中并构成本说明书的一部分，示出了符合本公开的实施例，并与说明书一起用于解释本公开的原理。图1是根据一示例性实施例示出的一种回环检测数据的处理方法的流程图。图2是根据一示例性实施例示出的一种回环检测的流程图。图3是根据一示例性实施例示出的一种回环检测数据的处理方法的流程图。图4是根据一示例性实施例示出的一种库位的示意图。图5是根据一示例性实施例示出的一种回环检测数据的处理装置的框图。图6是根据一示例性实施例示出的一种用于回环检测数据的处理的装置800的框图。具体实施方式这里将详细地对示例性实施例进行说明，其示例表示在附图中。下面的描述涉及附图时，除非另有表示，不同附图中的相同数字表示相同或相似的要素。以下示例性实施例中所描述的实施方式并不代表与本公开相一致的所有实施方式。相反，它们仅是与如所附权利要求书中所详述的、本公开的一些方面相一致的装置和方法的例子。在介绍本公开的回环检测数据的处理方法、装置、存储介质以及车辆之前，首先对本公开的应用场景进行介绍。精确地记忆泊车需要依赖精确的停车场建图。但在建图时，长时间运行的定位模块可能产生漂移，导致构建的地图产生偏差。所以，需要回环检测来识别回环，并通过回环消除定位模块累积的误差。在相关场景中，根据使用传感器的差异，回环检测可以分为基于激光雷达的回环检测和基于视觉的回环检测。基于激光雷达的回环检测需要加装激光雷达传感器，使得车辆的成本升高。基于视觉的回环检测可以通过相机进行。需要说明的是，这些回环检测方式对内存资源以及计算资源的消耗还较高，因而具有较高的使用成本。例如，基于激光雷达的回环检测需要保存较多的激光点云特征，对内存资源和计算资源的占用较大。而基于视觉的回环检测也可能要维护图像点云，还可能需要加载SLAM模型，因此对内存资源和计算资源的占用较大。为此，本公开提供一种回环检测数据的处理方法。所述方法可以由计算装置执行，所述计算装置可以为与车辆相互独立设置的设备，所述计算装置也可以作为车辆的一部分。图1是本公开所示出的一种回环检测数据的处理方法的流程图，参照图1，所述方法包括：在步骤S11中，获取车辆在当前时刻的第一位姿以及当前时刻车辆中的图像采集装置对车辆周围环境采集得到的图像。例如，车辆可以包括多个鱼眼相机，如采集方向分别对应于车辆前后左右四个方向的4个鱼眼相机。这样，在车辆实时行驶过程中，可以通过多个鱼眼相机采集车辆周围环境的图像。此外，还可以获取车辆的实时位姿，实时位姿可以是车辆在自建的坐标系中的位姿。例如，车辆可以响应于用户触发的泊车路线学习操作，开始学习泊车路线，并建立地图坐标系。在这种情况下，可以设置开始学习泊车路线的时刻车辆位于所述地图坐标系的原点，并结合该时刻车辆的姿态，得到开始学习泊车路线的时刻车辆的位姿。在一些实施场景中，所述位姿也可以是指车辆在世界坐标系中的位姿，本公开对此不做限制。通过实时采集车辆的位姿以及车辆周围环境的图像，实时采集得到的位姿和实时采集得到的图像可以形成基于采集时刻的关联关系。在步骤S12中，在从图像中识别到停车场的库位编号的情况下，根据第一位姿、当前时刻以及从图像中识别到的停车场的第一库位编号，生成第一检测结果，第一检测结果为对应于所述当前时刻的检测结果。例如在一些实施场景中，可以基于采集到的图像生成鸟瞰图，并从鸟瞰图中识别库位编号。例如，可以通过OCR技术从图像中识别得到库位编号，库位编号可以是用于标识停车场各个停车位的编号。这样，在从图像中识别到停车场的库位编号的情况下，可以根据第一位姿、当前时刻以及从图像中识别到的停车场的第一库位编号，生成第一检测结果。值得说明的是，步骤S11以及步骤S12可以多次执行。例如，可以在车辆启动后或识别到用户的指令/操作后，周期性执行步骤S11以及步骤S12。示例性的，可以获取车辆在每一时刻的位姿以及该时刻车辆中的图像采集装置对车辆周围环境采集得到的图像，并在从所述图像中识别到停车场的库位编号的情况下，生成对应于该时刻的检测结果。示例性的，可以获取车辆在时刻t1的位姿s1以及车辆中的图像采集装置在时刻t1对车辆周围环境采集得到的图像p1。在从图像p1中识别到停车场的库位编号的情况下，可以生成对应于该时刻的检测结果r1，检测结果r1包括。类似的，在t1的下一时刻t2，可以获取车辆在时刻t2的位姿s2以及车辆中的图像采集装置在时刻t2对车辆周围环境采集得到的图像p2。在从图像p2中识别到停车场的库位编号的情况下，可以生成对应于该时刻的检测结果r2，检测结果r2包括。在t2的下一时刻t3，可以获取车辆在时刻t3的位姿s3以及车辆中的图像采集装置在时刻t3对车辆周围环境采集得到的图像p3。在从图像p3中识别到停车场的库位编号的情况下，可以生成对应于该时刻的检测结果r3，检测结果r3包括。此外，这些检测结果还可以保存在存储介质中，以便于进行回环检测。在步骤S13中，从保存的历史的检测结果中，匹配库位编号为第一库位编号的检测结果，得到第二检测结果。所述历史的检测结果包括历史生成的对应于历史时刻的检测结果。例如，可以将当前时刻之前的时刻作为历史时刻，并将历史生成的对应于历史时刻的检测结果作为所述历史的检测结果。沿用上述例子，若当前时刻为t3，则可以将当前时刻之前的时刻t2和t1作为历史时刻，并将检测结果r2和检测结果r1作为历史的检测结果。应当理解，历史的检测结果包括历史时刻、所述历史时刻车辆的位姿以及从所述历史时刻采集到的图像中识别到的库位编号。因此，可以通过查找历史的检测结果中的库位编号字段，从而确定库位编号为第一库位编号的历史的检测结果，得到第二检测结果。第二检测结果包括所述第一库位编号、相应的历史时刻以及在该历史时刻所述车辆的位姿。在一些实施场景中，也可能无法匹配到库位编号为第一库位编号的检测结果，此时可以将所述第一检测结果进行保存，以便于后续匹配。在步骤S14中，将第一检测结果和第二检测结果作为回环对。应当理解，两个不同的检测结果中包括相同的库位编号，即表明在不同的时刻识别到了相同的库位编号，即在不同的时刻车辆周围环境中包括相同的库位。也就是说，车辆可能回到了历史路径中的某个位置，因此可以将第一检测结果和第二检测结果作为回环对。上述技术方案能够基于停车场的库位编号进行回环检测识别。相对于基于激光点云、图像SLAM这样的回环检测方式，上述方案可以基于少量的库位编号字符进行回环检测，因而对计算资源和存储资源的占用较低。并且，库位编号与库位的对应程度较高，即便停车场不同楼层的结构相似，也能够通过库位编号区分位于不同楼层的停车库位。这样，上述方案基于库位编号进行回环检测，也能够区分不同楼层的库位，因而能够降低回环误匹配的概率，提升回环检测的准确度。在一些可能的实施方式中，还可以对检测到的回环对进行识别，从中滤除异常的回环对，从而提升回环对的准确性，进而提升建图结果的准确性。滤除异常回环对的过程可以是实时的也可以是记忆泊车建图的后处理阶段进行的。参照图2所示出的一种回环检测的流程图，在一些实施方式中，可以基于时间信息对检测到的回环进行错误剔除。所述方法包括：获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；在所述第三检测结果中的第一时刻与所述第四检测结果中的第二时刻的差值小于时刻阈值的情况下，从已确定的回环对中删除所述目标回环对。例如，可以从已确定的回环对中获取一个、多个或全部回环对，将获取到的回环对中的各个回环对分别作为目标回环对。这样，可以比较目标回环对中的两个检测结果的第一时刻和第二时刻，当第一时刻和第二时刻的差值小于时刻阈值时，所述两个检测结果可能是相邻的两次采集的结果。此时，即便这两个检测结果中包括相同的库位编号，也不认为这两个检测结果为回环对。因此，可以从已确定的回环对中删除所述目标回环对。在一种可能的实施方式中，还可以基于空间距离识别异常回环对。在这种情况下，所述方法包括：获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；计算第三检测结果中的第一时刻与第四检测结果中的第二时刻之间的，所述车辆的行驶距离值；在所述行驶距离值小于距离阈值时，从已确定的回环对中删除所述目标回环对。示例性的，可以通过里程计获取第一时刻与第二时刻之间车辆的行驶距离值，当所述行驶距离值较小，例如所述行驶距离值为0时，所述车辆可能处于静止状态。因此，即便目标回环对中的两个检测结果中包括相同的库位编号，也不认为这两个检测结果为回环对，此时可以从已确定的回环对中删除所述目标回环对。在一种可能的实施方式中，还可以基于回环对之间的位姿的一致性识别异常回环对。在这种情况下，所述方法包括：获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；根据第三检测结果中的第三位姿与第四检测结果中的第四位姿，计算距离差值；计算所述距离差值与参照差值的差值，得到第一差值；在所述第一差值大于第一阈值时，从已确定的回环对中删除所述目标回环对。例如，可以获取第三位姿在地图坐标系中的第一坐标以及第四位姿在地图坐标系中的第二坐标，并计算第一坐标与第二坐标之间的距离，得到所述距离差值。这样，可以计算所述距离差值与参照差值的差值，得到第一差值，第一差值可以以绝对数的形式呈现。当第一差值大于第一阈值时，可以确定当前的目标回环对所对应的两个位姿的差异较大，可能为异常值，因此可以从已确定的回环对中删除所述目标回环对。其中，所述参照差值可以基于需求进行设置。例如在一些实施方式中，参照差值可以是经验值。在一些实施方式中，也可以通过如下方式确定所述参照差值：对各个已确定的回环对，计算所述回环对所对应的两个位姿的距离差值，得到多个距离差值；计算所述多个距离差值的均值，得到所述参照差值。在一些可能的实施方式中，也可以根据回环对的确定时刻将回环对划分为多个类别。例如，可以将时间周期内所识别到的回环对作为同一类。在这种情况下，上述的确定参照差值的步骤也可以是：对同一类回环对中的各个回环对，计算所述回环对所对应的两个位姿的距离差值，得到多个距离差值；计算所述多个距离差值的均值，得到所述参照差值。当然，回环对的类别的划分方式可以不局限于上述方式，如在一些实施方式中也可以根据车辆行驶距离将回环对划分为多个类别。示例性的，可以根据行驶距离划分多个区间，如0-100米，100-200米。这样，在同一行驶距离区间内所识别到的回环对也可以作为同一类回环对，如车辆从启动至行驶到100米的过程中所识别到的回环对可以作为一类回环对。另外值得说明的是，上述的滤除异常的回环对的方式可以分别或组合使用，本公开对此不做限制。例如，在图2中同时使用了三种滤除异常的回环对的方式。图3是本公开所示出的一种回环检测数据的处理方法的流程图，参照图3，所述方法在图1的基础上包括：在步骤S15中，对多个已确定的回环对中的各个回环对，计算回环对所对应的两个位姿的距离差值，得到回环对的距离差值。沿用目标回环对的例子，可以获取目标回环对所对应的第三检测结果的第三位姿，以及第四检测结果的第四位姿。这样，可以获取第三位姿在地图坐标系中的第一坐标以及第四位姿在地图坐标系中的第二坐标，并计算第一坐标与第二坐标之间的距离，得到所述距离差值。在步骤S16中，根据回环对的确定时刻对回环对进行排序。例如，可以按照确定时刻的先后顺序对所述回环对进行排序。在步骤S17中，在排序相邻的两个回环对的距离差值的差值小于第二阈值的情况下，确定两个回环对为同一类回环对。例如，对于相邻的回环对A和回环对B，回环对A的距离差值为XA，回环对B的距离差值为XB。那么若|XA-XB|小于第二阈值，则可以认为回环对A和回环对B为同一类回环对。需要说明的是，由于同类回环对之间的距离差值较小，因此各个回环对所对应的相对位姿的差异也较小。所述相对位姿可以根据所述回环对所对应的两个位姿计算得到，所述相对位姿可以表征所述两个位姿之间旋转、平移等转换关系。因此，在步骤S18中，对各个类别的回环对，将所述类别的回环对合并为一个回环对，得到合并回环对。例如，对于相邻的属于同一类的9个回环对，可以将第5个回环对作为所述合并回环对。在一些实施方式中，也可以对所述9个回环对进行融合，得到所述合并回环对。在步骤S19中，生成所述类别的回环对的第一几何约束，通过第一几何约束计算合并回环对中的两个位姿的相对位姿。这里对第一几何约束的获得方式进行示例性说明。在一种可能的实施方式中，第一检测结果还包括所述第一库位编号所对应的库位的位置信息，参照图4所示出的一种库位的示意图，可以通过库位的顶点1、2、3、4来标识库位的位置。也就是说，所述位置信息可以包括库位的四个顶点，所述四个顶点包括作为所述库位的入口点的第一顶点和第二顶点，与第一顶点相连的第四顶点，以及与第二顶点相连的第三顶点。所述生成所述类别的回环对的第一几何约束，包括：分别将该类回环对中的各个回环对作为第一回环对，对所述第一回环对中的两个检测结果，分别计算检测结果中的第一顶点至第二顶点的向量，得到第一向量；并，计算第一顶点至第四顶点的向量，得到第二向量；计算第二顶点至第三顶点的向量，得到第三向量。示例性的，第一回环对中包括两个检测结果，每个检测结果对应有一个库位的位置信息，即顶点1至4的位置信息。这样，对于一个检测结果中的位置信息，可以计算第一向量、第二向量以及第三向量。对于另一个检测结果中的位置信息，也可以计算第一向量、第二向量以及第三向量。也就是说，一个第一回环对可以生成一组第一向量、一组第二向量、一组第三向量以及一组库位的位置信息。这样，可以根据所述一组第一向量、一组第二向量、一组第三向量以及一组库位的位置信息生成约束，从而求解所述类别的回环对的相对位姿。例如，考虑到库位检测的误差，可以取位置信息中的第一点和第二点建立约束。这样，可以将所述第一回环对所对应的两个第一顶点之间的距离值最小、第一回环对所对应的两个第二顶点之间的距离值最小、所述第一回环对所对应的两个第一向量之间的夹角最小、所述第一回环对所对应的两个第二向量之间的夹角最小以及所述第一回环对所对应的两个第三向量之间的夹角最小作为所述第一回环对的目标几何约束，所述第一几何约束包括各种第一回环对的目标几何约束。值得说明的是，在上述实施例中，一组回环对包括5个用于求解相对位姿的约束。而在一些场景中，根据一组回环对的5个约束计算得到的相对位姿的准确度较低。因此，上述方案中采用了对回环对进行分类，对每一类回环对进行合并的方式。同时，在计算合并回环对的相对位姿时所使用的第一几何约束包括了合并回环对所属的类别中的其他回环对的约束。示例性的，对于相邻的属于同一类的9个回环对，可以将第5个回环对作为所述合并回环对。在计算所述合并回环对的相对位姿时，不仅采用了基于第5个回环对生成的5个约束，还采用了基于其他8个回环对所生成的目标几何约束，从而使得最终用于计算相对位姿的约束数量为45个。这样，可以根据所述45个约束计算合并回环对的相对位姿。例如，可以设置所述45个约束，并通过迭代最近点算法优化计算得到相对位姿。通过这样的方式，能够提升用于计算的约束的数量，进而有助于提升相对位姿的计算准确度。在步骤S110中，通过相对位姿，对合并回环对中的两个位姿之间的车辆轨迹进行修正。例如，可以根据相对位姿计算合并回环对中的两个位姿之间的车辆轨迹之间的误差，进而对累计误差进行消除。基于同一发明构思，本公开还提供一种回环检测数据的处理装置。图5是本公开所示出的一种回环检测数据的处理装置的框图，参照图5，所述回环检测数据的处理装置，包括：第一获取模块501，被配置为获取车辆在当前时刻的第一位姿以及当前时刻车辆中的图像采集装置对车辆周围环境采集得到的图像；第一生成模块502，被配置为在从所述图像中识别到停车场的库位编号的情况下，根据所述第一位姿、所述当前时刻以及从所述图像中识别到的停车场的第一库位编号，生成第一检测结果，所述第一检测结果为对应于所述当前时刻的检测结果；第一匹配模块503，被配置为从保存的历史的检测结果中，匹配库位编号为第一库位编号的检测结果，得到第二检测结果，所述历史的检测结果包括历史生成的对应于历史时刻的检测结果；第一执行模块504，被配置为将所述第一检测结果和所述第二检测结果作为回环对。上述技术方案中，能够获取车辆在当前时刻的第一位姿以及当前时刻车辆中的图像采集装置对车辆周围环境采集得到的图像，并对所述图像进行识别。在从所述图像中识别到停车场的库位编号的情况下，可以根据所述第一位姿、所述当前时刻以及从所述图像中识别到的停车场的第一库位编号，生成第一检测结果，所述第一检测结果为对应于所述当前时刻的检测结果。这样，可以从保存的历史的检测结果中，匹配库位编号为第一库位编号的检测结果，得到第二检测结果，并将所述第一检测结果和所述第二检测结果作为回环对。也就是说，上述技术方案能够基于停车场的库位编号进行回环检测识别。相对于基于激光点云、图像SLAM这样的回环检测方式，上述方案可以基于少量的库位编号字符进行回环检测，因而对计算资源和存储资源的占用较低。并且，库位编号与库位的对应程度较高，即便停车场不同楼层的结构相似，也能够通过库位编号区分位于不同楼层的停车库位。这样，上述方案基于库位编号进行回环检测，也能够区分不同楼层的库位，因而能够降低回环误匹配的概率，提升回环检测的准确度。可选地，回环检测数据的处理装置包括：第二获取模块，被配置为获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；第一删除模块，被配置为在所述第三检测结果中的第一时刻与所述第四检测结果中的第二时刻的差值小于时刻阈值的情况下，从已确定的回环对中删除所述目标回环对。可选地，回环检测数据的处理装置包括：第三获取模块，被配置为获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；第一计算模块，被配置为计算第三检测结果中的第一时刻与第四检测结果中的第二时刻之间的，所述车辆的行驶距离值；第二删除模块，被配置为在所述行驶距离值小于距离阈值时，从已确定的回环对中删除所述目标回环对。可选地，回环检测数据的处理装置包括：第四获取模块，被配置为获取目标回环对中的第三检测结果以及第四检测结果，目标回环对为已确定的回环对中的任一回环对；第二计算模块，被配置为根据第三检测结果中的第三位姿与第四检测结果中的第四位姿，计算距离差值；第三计算模块，被配置为计算所述距离差值与参照差值的差值，得到第一差值；第三删除模块，被配置为在所述第一差值大于第一阈值时，从已确定的回环对中删除所述目标回环对。可选地，所述回环检测数据的处理装置包括：第四计算模块，被配置为对各个已确定的回环对，计算所述回环对所对应的两个位姿的距离差值，得到多个距离差值；第五计算模块，被配置为计算所述多个距离差值的均值，得到所述参照差值。可选地，回环检测数据的处理装置包括：第六计算模块，被配置为对多个已确定的回环对中的各个回环对，计算所述回环对所对应的两个位姿的距离差值，得到所述回环对的距离差值；第一排序模块，被配置为根据回环对的确定时刻对回环对进行排序；第一确定模块，被配置为在排序相邻的两个回环对的距离差值的差值小于第二阈值的情况下，确定所述两个回环对为同一类回环对；合并模块，被配置为对各个类别的回环对，将所述类别的回环对合并为一个回环对，得到合并回环对；并，约束生成模块，被配置为生成所述类别的回环对的第一几何约束，通过所述第一几何约束计算所述合并回环对中的两个位姿的相对位姿；轨迹修正模块，被配置为通过所述相对位姿，对所述合并回环对中的两个位姿之间的车辆轨迹进行修正。可选地，所述第一检测结果还包括所述第一库位编号所对应的库位的位置信息，所述位置信息包括库位的四个顶点，所述四个顶点包括作为所述库位的入口点的第一顶点和第二顶点，与第一顶点相连的第四顶点，以及与第二顶点相连的第三顶点，所述约束生成模块，包括：第一计算子模块，被配置为分别将该类回环对中的各个回环对作为第一回环对，对所述第一回环对中的两个检测结果，分别计算检测结果中的第一顶点至第二顶点的向量，得到第一向量；第二计算子模块，被配置为分别将该类回环对中的各个回环对作为第一回环对，对所述第一回环对中的两个检测结果，分别计算检测结果中的第一顶点至第四顶点的向量，得到第二向量；计算第二顶点至第三顶点的向量，得到第三向量；约束生成子模块，被配置为将所述第一回环对所对应的两个第一顶点之间的距离值最小、第一回环对所对应的两个第二顶点之间的距离值最小、所述第一回环对所对应的两个第一向量之间的夹角最小、所述第一回环对所对应的两个第二向量之间的夹角最小以及所述第一回环对所对应的两个第三向量之间的夹角最小作为所述第一回环对的目标几何约束，所述第一几何约束包括各种第一回环对的目标几何约束。本公开还提供一种回环检测数据的处理装置，包括：处理器；用于存储处理器可执行指令的存储器；其中，所述处理器被配置为执行本公开任意实施例所提供的回环检测数据的处理方法的步骤。本公开还提供一种计算机可读存储介质，其上存储有计算机程序指令，该程序指令被处理器执行时实现本公开任意实施例所提供的回环检测数据的处理方法的步骤。本公开还提供一种车辆，包括本公开任意实施例所提供的回环检测数据的处理装置。关于上述实施例中的回环检测数据的处理装置，其中各个模块执行操作的具体方式已经在有关回环检测数据的处理方法的实施例中进行了详细描述，此处将不做详细阐述说明。图6是根据一示例性实施例示出的一种用于回环检测数据的处理的装置800的框图。例如，装置800可以是独立的或集成在车辆中的计算装置。参照图6，装置800可以包括以下一个或多个组件：处理组件802，存储器804，电源组件806，多媒体组件808，音频组件810，输入/输出接口812，传感器组件814，以及通信组件816。处理组件802通常控制装置800的整体操作，诸如与显示，数据通信，图像采集和记录相关联的操作。处理组件802可以包括一个或多个处理器820来执行指令，以完成上述的回环检测数据的处理方法的全部或部分步骤。此外，处理组件802可以包括一个或多个模块，便于处理组件802和其他组件之间的交互。例如，处理组件802可以包括多媒体模块，以方便多媒体组件808和处理组件802之间的交互。存储器804被配置为存储各种类型的数据以支持在装置800的操作。这些数据的示例包括用于在装置800上操作的任何应用程序或方法的指令，消息，图片，视频等。存储器804可以由任何类型的易失性或非易失性存储设备或者它们的组合实现，如静态随机存取存储器，电可擦除可编程只读存储器，可擦除可编程只读存储器，可编程只读存储器，只读存储器，磁存储器，快闪存储器，磁盘或光盘。电源组件806为装置800的各种组件提供电力。电源组件806可以包括电源管理系统，一个或多个电源，及其他与为装置800生成、管理和分配电力相关联的组件。多媒体组件808包括在所述装置800和用户之间的提供一个输出接口的屏幕。在一些实施例中，屏幕可以包括液晶显示器和触摸面板。如果屏幕包括触摸面板，屏幕可以被实现为触摸屏，以接收来自用户的输入信号。触摸面板包括一个或多个触摸传感器以感测触摸、滑动和触摸面板上的手势。所述触摸传感器可以不仅感测触摸或滑动动作的边界，而且还检测与所述触摸或滑动操作相关的持续时间和压力。音频组件810被配置为输出和/或输入音频信号。例如，音频组件810包括一个麦克风，当装置800处于操作模式，如记录模式或语音识别模式时，麦克风被配置为接收外部音频信号。所接收的音频信号可以被进一步存储在存储器804或经由通信组件816发送。在一些实施例中，音频组件810还包括一个扬声器，用于输出音频信号。输入/输出接口812为处理组件802和外围接口模块之间提供接口，上述外围接口模块可以是键盘，点击轮，按钮等。这些按钮可包括但不限于：主页按钮、音量按钮、启动按钮和锁定按钮。传感器组件814包括一个或多个传感器，用于为装置800提供各个方面的状态评估。例如，传感器组件814可以检测到装置800的打开/关闭状态，传感器组件814还可以检测装置800或装置800的组件的位置改变。传感器组件814可以包括光传感器，如CMOS或CCD图像传感器，用于在成像应用中使用。通信组件816被配置为便于装置800和其他设备之间有线或无线方式的通信。装置800可以接入基于通信标准的无线网络，如WiFi，4G或5G，或它们的组合。在一个示例性实施例中，通信组件816经由广播信道接收来自外部广播管理系统的广播信号或广播相关信息。在示例性实施例中，装置800可以被一个或多个应用专用集成电路、数字信号处理器、数字信号处理设备、可编程逻辑器件、现场可编程门阵列、控制器、微控制器、微处理器或其他电子元件实现，用于执行上述回环检测数据的处理方法。在示例性实施例中，还提供了一种包括指令的非临时性计算机可读存储介质，例如包括指令的存储器804，上述指令可由装置800的处理器820执行以完成上述回环检测数据的处理方法。例如，所述非临时性计算机可读存储介质可以是ROM、随机存取存储器、CD-ROM、磁带、软盘和光数据存储设备等。在另一示例性实施例中，还提供一种计算机程序产品，该计算机程序产品包含能够由可编程的装置执行的计算机程序，该计算机程序具有当由该可编程的装置执行时用于执行上述的回环检测数据的处理方法的代码部分。本领域技术人员在考虑说明书及实践本公开后，将容易想到本公开的其它实施方案。本公开旨在涵盖本公开的任何变型、用途或者适应性变化，这些变型、用途或者适应性变化遵循本公开的一般性原理并包括本公开未公开的本技术领域中的公知常识或惯用技术手段。说明书和实施例仅被视为示例性的，本公开的真正范围和精神由下面的权利要求指出。应当理解的是，本公开并不局限于上面已经描述并在附图中示出的精确结构，并且可以在不脱离其范围进行各种修改和改变。本公开的范围仅由所附的权利要求来限制。
