标题title
双时相影像建筑物变化检测方法、装置、设备及存储介质
摘要abst
本发明提供一种双时相影像建筑物变化检测方法、装置、设备及存储介质，所述方法包括：将双时相影像输入特征提取模型并获取拼接特征；对拼接特征进行差分计算并分割为若干个不重叠特征块；计算每一不重叠特征块与平均特征的差分特征；对差分特征数据进行pca计算并获取协方差矩阵的特征向量和特征值；将协方差矩阵的特征向量按照特征值的大小进行降序排列，并将不重叠特征块投影至特征向量上获取目标向量；对目标向量的特征向量空间进行聚类，最后根据聚类结果进行双时相影像建筑物变化检测。本发明通过将有监督方法转换为无监督方法，并且采用了特征提取预训练模型，无需人工对图像进行大量批注，从而大大提高了建筑物变化检测的效率。
权利要求书clms
1.一种双时相影像建筑物变化检测方法，其特征在于，包括：将第一时相影像和第二时相影像输入至预先训练好的图像特征提取模块，并分别对与所述第一时相影像和所述第二时相影像对应的输出特征进行通道拼接，得到第一拼接特征和第二拼接特征；将所述第一拼接特征与所述第二拼接特征进行差分计算，得到图像差分特征；对所述图像差分特征进行上采样操作得到与所述第一时相影像的尺寸大小相同的待分割特征块，将所述待分割特征块分割为若干个不重叠特征块；计算所有不重叠特征块的平均特征，并计算每一所述不重叠特征块与所述平均特征的差分特征，得到差分特征数据；利用pca技术对所述差分特征数据进行计算得到协方差矩阵，并获取所述协方差矩阵的特征向量和特征值；将所述协方差矩阵的特征向量按照特征值的大小进行降序排列，并将不重叠特征块按照从左到右、从上到下的像素投影至所述协方差矩阵的特征向量后得到的向量依次排列，得到目标向量；对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正；基于纠正后的聚类结果确定双时相影像的建筑物变化区域。2.根据权利要求1所述的双时相影像建筑物变化检测方法，其特征在于，所述将第一时相影像和第二时相影像输入至预先训练好的图像特征提取模块，并分别对与所述第一时相影像和所述第二时相影像对应的输出特征进行通道拼接，得到第一拼接特征和第二拼接特征，包括：将第一时相影像输入至预先训练好的图像特征提取模块，获取得到所述图像特征提取模块输出的与所述第一时相影像对应的二阶段特征、三阶段特征和四阶段特征；采用双线性插值法分别对与所述第一时相影像对应的二阶段特征、三阶段特征和四阶段特征进行上采样操作，并基于预设的轴对各阶段特征进行拼接得到与所述第一时相影像对应的第一拼接特征；将第二时相影像输入至预先训练好的图像特征提取模块，获取得到所述图像特征提取模块输出的与所述第二时相影像对应的二阶段特征、三阶段特征和四阶段特征；采用双线性插值法分别对与所述第二时相影像对应的二阶段特征、三阶段特征和四阶段特征进行上采样操作，并基于预设的轴对各阶段特征进行拼接得到与所述第二时相影像对应的第二拼接特征。3.根据权利要求1所述的双时相影像建筑物变化检测方法，其特征在于，所述图像差分特征为所述第一拼接特征与所述第二拼接特征相减的差的绝对值。4.根据权利要求1所述的双时相影像建筑物变化检测方法，其特征在于，所述对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正，包括：采用k-medoids聚类算法对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正。5.根据权利要求4所述的双时相影像建筑物变化检测方法，其特征在于，所述采用k-medoids聚类算法对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正，包括：采用k-medoids聚类算法对所述目标向量的特征向量空间进行聚类，得到代表建筑变化区域的第一聚类向量和代表建筑非变化区域的第二聚类向量；计算所述目标向量的目标平均向量；当不重叠特征块对应的数据被标记为第一聚类向量并且其均值小于所述目标平均向量时，将该不重叠特征块对应的数据标记为第一聚类向量，否则将其标记为第二聚类向量；当不重叠特征块对应的数据被标记为第二聚类向量并且其均值大于所述目标平均向量时，将该不重叠特征块对应的数据标记为第二聚类向量，否则将其标记为第一聚类向量。6.根据权利要求5所述的双时相影像建筑物变化检测方法，其特征在于，所述基于纠正后的聚类结果确定双时相影像的建筑物变化区域，包括：在进行标记纠正后，计算所述第一聚类向量对应的第一聚类平均向量以及所述第二聚类向量对应的第二聚类平均向量；基于所述第一聚类平均向量和所述第二聚类平均向量生成双时相影像的建筑变化二值图；基于所述双时相影像的建筑变化二值图确定双时相影像的建筑物变化区域；其中，所述双时相影像的建筑变化二值图中值为1的像素代表建筑物发生了变化，所述双时相影像的建筑变化二值图中值为0的像素代表建筑物未发生变化。7.根据权利要求1-6任一项所述的双时相影像建筑物变化检测方法，其特征在于，所述预先训练好的图像特征提取模块为采用ImageNet预训练好的swin transformer网络模型。8.一种双时相影像建筑物变化检测装置，其特征在于，包括：特征提取模块，用于将第一时相影像和第二时相影像输入至预先训练好的图像特征提取模块，并分别对与所述第一时相影像和所述第二时相影像对应的输出特征进行通道拼接，得到第一拼接特征和第二拼接特征；差分计算模块，用于将所述第一拼接特征与所述第二拼接特征进行差分计算，得到图像差分特征；特征分割模块，用于对所述图像差分特征进行上采样操作得到与所述第一时相影像的尺寸大小相同的待分割特征块，将所述待分割特征块分割为若干个不重叠特征块；特征差分模块，用于计算所有不重叠特征块的平均特征，并计算每一所述不重叠特征块与所述平均特征的差分特征，得到差分特征数据；特征获取模块，用于利用pca技术对所述差分特征数据进行计算得到协方差矩阵，并获取所述协方差矩阵的特征向量和特征值；向量获取模块，用于将所述协方差矩阵的特征向量按照特征值的大小进行降序排列，并将不重叠特征块按照从左到右、从上到下的像素投影至所述协方差矩阵的特征向量后得到的向量依次排列，得到目标向量；聚类标记模块，用于对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正；变化检测模块，用于基于纠正后的聚类结果确定双时相影像的建筑物变化区域。9.一种终端设备，包括处理器和存储有计算机程序的存储器，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至7任一项所述的双时相影像建筑物变化检测方法。10.一种非暂态计算机可读存储介质，其上存储有计算机程序，其特征在于，该计算机程序被处理器执行时实现如权利要求1至7任一项所述的双时相影像建筑物变化检测方法。
说明书desc
技术领域本发明涉及影像检测技术领域，尤其是涉及一种双时相影像建筑物变化检测方法、装置、设备及存储介质。背景技术近年来随着我国经济的快速发展，遥感影像的应用范围也不断扩大，包括建筑物变化检测、城市数据更新、防灾应急、城市规划、人口估计、地形图制作和更新等多个方面。随着深度学习技术的快速发展，利用深度学习基于双时相遥感影像进行建筑物变化检测成为近年来遥感科学工作中的发展趋势和研究热点。目前大部分深度学习算法主要基于有监督的方式训练深度学习网络模型基于双时相遥感影像进行建筑物变化检测。基于有监督方式的建筑物变化检测需要人工标注大量的标签，耗费较多人力、财力，时间成本高，而且模型性能的好坏跟标注的数据集大小息息相关。因此，亟需一种能够快速准确地提取建筑物变化的方案。发明内容本发明旨在提供一种双时相影像建筑物变化检测方法、装置、设备及存储介质，以解决上述技术问题，从而能够快速准确地提取出建筑物变化。为了解决上述技术问题，本发明提供了一种双时相影像建筑物变化检测方法，包括：将第一时相影像和第二时相影像输入至预先训练好的图像特征提取模块，并分别对与所述第一时相影像和所述第二时相影像对应的输出特征进行通道拼接，得到第一拼接特征和第二拼接特征；将所述第一拼接特征与所述第二拼接特征进行差分计算，得到图像差分特征；对所述图像差分特征进行上采样操作得到与所述第一时相影像的尺寸大小相同的待分割特征块，将所述待分割特征块分割为若干个不重叠特征块；计算所有不重叠特征块的平均特征，并计算每一所述不重叠特征块与所述平均特征的差分特征，得到差分特征数据；利用pca技术对所述差分特征数据进行计算得到协方差矩阵，并获取所述协方差矩阵的特征向量和特征值；将所述协方差矩阵的特征向量按照特征值的大小进行降序排列，并将不重叠特征块按照从左到右、从上到下的像素投影至所述协方差矩阵的特征向量后得到的向量依次排列，得到目标向量；对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正；基于纠正后的聚类结果确定双时相影像的建筑物变化区域。进一步地，所述将第一时相影像和第二时相影像输入至预先训练好的图像特征提取模块，并分别对与所述第一时相影像和所述第二时相影像对应的输出特征进行通道拼接，得到第一拼接特征和第二拼接特征，包括：将第一时相影像输入至预先训练好的图像特征提取模块，获取得到所述图像特征提取模块输出的与所述第一时相影像对应的二阶段特征、三阶段特征和四阶段特征；采用双线性插值法分别对与所述第一时相影像对应的二阶段特征、三阶段特征和四阶段特征进行上采样操作，并基于预设的轴对各阶段特征进行拼接得到与所述第一时相影像对应的第一拼接特征；将第二时相影像输入至预先训练好的图像特征提取模块，获取得到所述图像特征提取模块输出的与所述第二时相影像对应的二阶段特征、三阶段特征和四阶段特征；采用双线性插值法分别对与所述第二时相影像对应的二阶段特征、三阶段特征和四阶段特征进行上采样操作，并基于预设的轴对各阶段特征进行拼接得到与所述第二时相影像对应的第二拼接特征。进一步地，所述图像差分特征为所述第一拼接特征与所述第二拼接特征相减的差的绝对值。进一步地，所述对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正，包括：采用k-medoids聚类算法对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正。进一步地，所述采用k-medoids聚类算法对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正，包括：采用k-medoids聚类算法对所述目标向量的特征向量空间进行聚类，得到代表建筑变化区域的第一聚类向量和代表建筑非变化区域的第二聚类向量；计算所述目标向量的目标平均向量；当不重叠特征块对应的数据被标记为第一聚类向量并且其均值小于所述目标平均向量时，将该不重叠特征块对应的数据标记为第一聚类向量，否则将其标记为第二聚类向量；当不重叠特征块对应的数据被标记为第二聚类向量并且其均值大于所述目标平均向量时，将该不重叠特征块对应的数据标记为第二聚类向量，否则将其标记为第一聚类向量。进一步地，所述基于纠正后的聚类结果确定双时相影像的建筑物变化区域，包括：在进行标记纠正后，计算所述第一聚类向量对应的第一聚类平均向量以及所述第二聚类向量对应的第二聚类平均向量；基于所述第一聚类平均向量和所述第二聚类平均向量生成双时相影像的建筑变化二值图；基于所述双时相影像的建筑变化二值图确定双时相影像的建筑物变化区域；其中，所述双时相影像的建筑变化二值图中值为1的像素代表建筑物发生了变化，所述双时相影像的建筑变化二值图中值为0的像素代表建筑物未发生变化。进一步地，所述预先训练好的图像特征提取模块为采用ImageNet预训练好的swintransformer网络模型。本发明还提供一种双时相影像建筑物变化检测装置，包括：特征提取模块，用于将第一时相影像和第二时相影像输入至预先训练好的图像特征提取模块，并分别对与所述第一时相影像和所述第二时相影像对应的输出特征进行通道拼接，得到第一拼接特征和第二拼接特征；差分计算模块，用于将所述第一拼接特征与所述第二拼接特征进行差分计算，得到图像差分特征；特征分割模块，用于对所述图像差分特征进行上采样操作得到与所述第一时相影像的尺寸大小相同的待分割特征块，将所述待分割特征块分割为若干个不重叠特征块；特征差分模块，用于计算所有不重叠特征块的平均特征，并计算每一所述不重叠特征块与所述平均特征的差分特征，得到差分特征数据；特征获取模块，用于利用pca技术对所述差分特征数据进行计算得到协方差矩阵，并获取所述协方差矩阵的特征向量和特征值；向量获取模块，用于将所述协方差矩阵的特征向量按照特征值的大小进行降序排列，并将不重叠特征块按照从左到右、从上到下的像素投影至所述协方差矩阵的特征向量后得到的向量依次排列，得到目标向量；聚类标记模块，用于对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正；变化检测模块，用于基于纠正后的聚类结果确定双时相影像的建筑物变化区域。本发明还提供一种终端设备，包括处理器和存储有计算机程序的存储器，所述处理器执行所述计算机程序时实现任一项所述的双时相影像建筑物变化检测方法。本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现任一项所述的双时相影像建筑物变化检测方法。与现有技术相比，本发明具有如下有益效果：本发明提供了一种双时相影像建筑物变化检测方法、装置、设备及存储介质，所述方法包括：将双时相影像输入特征提取模型并获取拼接特征；对拼接特征进行差分计算并分割为若干个不重叠特征块；计算每一不重叠特征块与平均特征的差分特征；对差分特征数据进行pca计算并获取协方差矩阵的特征向量和特征值；将协方差矩阵的特征向量按照特征值的大小进行降序排列，并将不重叠特征块投影至特征向量上获取目标向量；对目标向量的特征向量空间进行聚类，最后根据聚类结果进行双时相影像建筑物变化检测。本发明通过将有监督方法转换为无监督方法，并且采用了特征提取预训练模型，无需人工对图像进行大量批注，从而大大提高了建筑物变化检测的效率。附图说明图1是本发明提供的双时相影像建筑物变化检测方法的流程示意图；图2是本发明提供的swin transformer的架构示意图；图3是本发明提供的双时相影像建筑物变化检测装置的结构示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整的描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。请参见图1，本发明实施例提供了一种双时相影像建筑物变化检测方法，可以包括步骤：S1、将第一时相影像和第二时相影像输入至预先训练好的图像特征提取模块，并分别对与所述第一时相影像和所述第二时相影像对应的输出特征进行通道拼接，得到第一拼接特征和第二拼接特征；S2、将所述第一拼接特征与所述第二拼接特征进行差分计算，得到图像差分特征；S3、对所述图像差分特征进行上采样操作得到与所述第一时相影像的尺寸大小相同的待分割特征块，将所述待分割特征块分割为若干个不重叠特征块；S4、计算所有不重叠特征块的平均特征，并计算每一所述不重叠特征块与所述平均特征的差分特征，得到差分特征数据；S5、利用pca技术对所述差分特征数据进行计算得到协方差矩阵，并获取所述协方差矩阵的特征向量和特征值；S6、将所述协方差矩阵的特征向量按照特征值的大小进行降序排列，并将不重叠特征块按照从左到右、从上到下的像素投影至所述协方差矩阵的特征向量后得到的向量依次排列，得到目标向量；S7、对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正；S8、基于纠正后的聚类结果确定双时相影像的建筑物变化区域。在本发明实施例中，进一步地，所述将第一时相影像和第二时相影像输入至预先训练好的图像特征提取模块，并分别对与所述第一时相影像和所述第二时相影像对应的输出特征进行通道拼接，得到第一拼接特征和第二拼接特征，包括：将第一时相影像输入至预先训练好的图像特征提取模块，获取得到所述图像特征提取模块输出的与所述第一时相影像对应的二阶段特征、三阶段特征和四阶段特征；采用双线性插值法分别对与所述第一时相影像对应的二阶段特征、三阶段特征和四阶段特征进行上采样操作，并基于预设的轴对各阶段特征进行拼接得到与所述第一时相影像对应的第一拼接特征；将第二时相影像输入至预先训练好的图像特征提取模块，获取得到所述图像特征提取模块输出的与所述第二时相影像对应的二阶段特征、三阶段特征和四阶段特征；采用双线性插值法分别对与所述第二时相影像对应的二阶段特征、三阶段特征和四阶段特征进行上采样操作，并基于预设的轴对各阶段特征进行拼接得到与所述第二时相影像对应的第二拼接特征。在本发明实施例中，进一步地，所述图像差分特征为所述第一拼接特征与所述第二拼接特征相减的差的绝对值。在本发明实施例中，进一步地，所述对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正，包括：采用k-medoids聚类算法对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正。在本发明实施例中，进一步地，所述采用k-medoids聚类算法对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正，包括：采用k-medoids聚类算法对所述目标向量的特征向量空间进行聚类，得到代表建筑变化区域的第一聚类向量和代表建筑非变化区域的第二聚类向量；计算所述目标向量的目标平均向量；当不重叠特征块对应的数据被标记为第一聚类向量并且其均值小于所述目标平均向量时，将该不重叠特征块对应的数据标记为第一聚类向量，否则将其标记为第二聚类向量；当不重叠特征块对应的数据被标记为第二聚类向量并且其均值大于所述目标平均向量时，将该不重叠特征块对应的数据标记为第二聚类向量，否则将其标记为第一聚类向量。在本发明实施例中，进一步地，所述基于纠正后的聚类结果确定双时相影像的建筑物变化区域，包括：在进行标记纠正后，计算所述第一聚类向量对应的第一聚类平均向量以及所述第二聚类向量对应的第二聚类平均向量；基于所述第一聚类平均向量和所述第二聚类平均向量生成双时相影像的建筑变化二值图；基于所述双时相影像的建筑变化二值图确定双时相影像的建筑物变化区域；其中，所述双时相影像的建筑变化二值图中值为1的像素代表建筑物发生了变化，所述双时相影像的建筑变化二值图中值为0的像素代表建筑物未发生变化。在本发明实施例中，进一步地，所述预先训练好的图像特征提取模块为采用ImageNet预训练好的swin transformer网络模型。基于上述方案，为便于更好的理解本发明实施例提供的双时相影像建筑物变化检测方法，以下进行详细说明：本发明实施例通过采用ImageNet数据集预训练的swin transformer的图像特征提取模块backbone进行建筑特征提取，然后基于提取的特征进行一系列的特征向量处理，可以快速实现建筑物变化的提取，极大简化了建筑物变化检测的工作流程。本发明实施例可以通过以下步骤实现：1、请参见图2，将T1时相影像输入到使用ImageNet预训练好的swin transformer网络模型中，分别获取stage2阶段输出的特征T1_stage2，stage3阶段输出的特征T1_stage3以及stage4阶段输出的特征T1_stage4；接着，将T2时相影像输入swin transformer网络模型中，分别得到stage2、stage3和stage4阶段输出的特征T2_stage2、T2_stage3、T2_stage4。可以理解的是，T1时相影像和T2时相影像具有相同的尺寸大小；；T1_stage2和T2_stage2具有相同的尺寸大小和通道数目，尺寸大小为T1时相影像的8倍下采样；T1_stage3和T2_stage3具有相同的尺寸大小和通道数目，尺寸大小为T1时相影像的16倍下采样；T1_stage4和T2_stage4具有相同的尺寸大小和通道数目，尺寸大小为T1时相影像的32倍下采样。1.1、将T1_stage4采用双线性插值法上采样2倍，然后与T1_stage3以axes＝1进行通道拼接，得到T1_stage34；接着将T1_stage34采用双线性插值法上采样2倍，然后与T1_stage2以axes＝2进行拼接，得到T1_stage23。需要说明的是，双线性插值法是指将数学上的二维线性插值算法应用到图像上，实现图像的放大和缩小。利用双线性插值来进行图像的缩放步骤如下：计算目标图片与原始图片之间的缩放因子；利用缩放因子，由目标图片像素位置反推回原始图片中的虚拟像素位置；由虚拟像素位置找到宽度和高度方向相邻的四个像素点；由四个像素点进行双线性插值计算，得出目标图像中的像素值。可以理解的是，得到T1_stage2，T1_stage3，T1_stage4，同理对应的T2_stage2，T2_stage3，T2_stage4，他们的数据格式是，分别表示批量数目，通道数，高，宽；axes＝1表示以channel为轴进行拼接。例如：假设T1_stage4上采样后的数据格式为，T1_stage3的数据格式为，则将其以axes＝1为轴拼接后的数据格式为。1.2、同理对T2_stage4，T2_stage3和T2_stage2按照上述步骤顺序操作，最后得到T2_stage23。2、将特征T1_stage23和特征T2_stage23进行差分计算，得到差分特征F。对于图像，差分计算可以简单定义为两个特征的差的绝对值：F＝|T1_stage23-T2_stage23|，当然差分也可以定义为其他形式，最简单的是相减然后求绝对值。需要说明的是，由于本方法是求两幅同一地点，不同时期拍摄的影像。这里就有一个假设前提，如果前影像没有建筑，后影像有建筑。提取的两个特征做差分运算后，在建筑变化的地方和没有变化的地方会存在数值上的差异，有变化的地方差分计算后数据在概率上要大一些的。3、对差分特征F采用2倍的上采样操作，连续上采样操作3次，逐步上采样得到与T1时相影像相同尺寸大小的特征，假设特征的长是H，宽是W。4、将X特征分割为大小为hxh不重叠的特征块，记为xi，长是h，宽是h，其中i表示不重叠特征块的索引号，其大小范围是1≤i≤N＝/，N表示将特征X分割为大小为hxh不重叠特征块的数量。5、计算所有不重叠特征块的平均特征，记为ΨN，N表示将特征X分割为大小为hxh不重叠特征块的数量，计算公式是：6、计算每一个不重叠特征块与平均特征的差分特征，记为Δi，i代表不重叠特征块的索引：Δi＝xi-ΨN7、对差分数据Δi进行pca计算，得到一个数据集，假设该数据集包含了h2个相互正交的向量Es以及对应相关联的最适合描述Δi数据分布的的标量λs。相应地，向量Es和标量λs分别是协方差矩阵CM的特征向量和特征值。其中ΔiT是差分矩阵Δi的转置矩阵，CM的大小为h2×h2，有h2个特征向量以及对应的特征值。需要说明的是，pca实际上是高维的数据降维。假设数据降维的优化目标是：假设将一组N维向量降为K维，其目标是选择K个单位正交基，使得原始数据变换到这组基上后，各变量两两间协方差为0，而变量方差则尽可能大；实际将pca作用于Δi，就是对它进行降维，获得相互正交的特征向量和特征值。8、将CM的特征向量按照特征值的大小进行降序排序。9、将不重叠特征块xi上的每一个像素投影到CM的特征向量中，假设像素的坐标是，记为则得到新的向量：vi＝T其中，参数S是向量vi的特征向量的个数，1≤S≤h2，1≤s≤S，s为CM的特征向量按照特征值大小降序排序的索引值，操作T代表矩阵转置。10、将不重叠特征块xi按照从左到右，从上到下的像素投影后得到的向量依次排列在一起，得到向量v。11、使用k-medoids聚类算法对v特征向量空间进行聚类，设置k＝2。将k-medoids聚类算法生成的聚类标记为ku和kc，分别表示建筑变化区域和建筑非变化区域。聚类的过程具体如下：1、在数据样本v中随机选择k＝2个数据样本作为质点。；2、按照与medoids距离最近的原则，重复地将剩下的样本点分配到k个簇类当中。3、在每一类中，计算每个成员点对应的准则函数，选取准则函数最小时对应的点作为新的medoids。4、重复2-3的过程，直到所有的medoids点不再发生变化，或已达到设定的最大迭代次数。然后计算求得聚类ku向量的聚类平均向量vu；计算聚类kc向量的聚类平均向量vc；计算向量v的平均向量vm；再进一步纠正k-medoids聚类生成的聚类标签：当在两个不同时相的同一区域发生变化时，双时相影像差分后得到的绝对值比没有发生变化的区域要高。当xi上位置的数据被k-medoids标记为kc且其均值大于vm时，标记其为kc，否则标记为ku；当xi上位置的数据被k-medoids标记为ku且其均值小于vm时，标记其为ku，否则标记为kc；纠正后重新计算聚类ku向量的聚类平均向量vu和聚类kc向量的聚类平均向量vc。12、利用vu和vc生成双时相影像的建筑变化二值图，记为CBM＝{cbm|1≤j≤H,1≤k≥W}，当cbm为1代表对应双时相影像在位置处的像素发生了变化，当cbm为0代表对应双时相影像在位置处的像素没有变化。具体的计算公式：||||2表示欧氏距离。需要说明的是，相比其他以深度学习方式实现的建筑变化检测或者语义分割方法来说，本发明实施例的优点主要有：一、其他任务的特征提取模块容易迁移：无论是图像分类、目标检测还是语义分割等深度学习实现的任务，其训练好的特征提取模块都可以直接作为本方法的特征提取模块，不需要针对本方法重新训练一个特征提取模块，目前网络上开源了大量预训练的模型，可以直接使用，本方法使用了ImageNet预训练的swintransformer的图像特征提取模块。二、由于使用了特征提取预训练模型，本方法不需要人工标注标签，极大提升建筑物变化检测的工作效率；三、从某种意义来说，本方法巧妙地将有监督方法转换为无监督方法，避免重复造轮子浪费资源和时间。需要说明的是，对于以上方法或流程实施例，为了简单描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本发明实施例并不受所描述的动作顺序的限制，因为依据本发明实施例，某些步骤可以采用其他顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于可选实施例，所涉及的动作并不一定是本发明实施例所必须的。请参见图3，本发明实施例还提供一种双时相影像建筑物变化检测装置，包括：特征提取模块1，用于将第一时相影像和第二时相影像输入至预先训练好的图像特征提取模块，并分别对与所述第一时相影像和所述第二时相影像对应的输出特征进行通道拼接，得到第一拼接特征和第二拼接特征；差分计算模块2，用于将所述第一拼接特征与所述第二拼接特征进行差分计算，得到图像差分特征；特征分割模块3，用于对所述图像差分特征进行上采样操作得到与所述第一时相影像的尺寸大小相同的待分割特征块，将所述待分割特征块分割为若干个不重叠特征块；特征差分模块4，用于计算所有不重叠特征块的平均特征，并计算每一所述不重叠特征块与所述平均特征的差分特征，得到差分特征数据；特征获取模块5，用于利用pca技术对所述差分特征数据进行计算得到协方差矩阵，并获取所述协方差矩阵的特征向量和特征值；向量获取模块6，用于将所述协方差矩阵的特征向量按照特征值的大小进行降序排列，并将不重叠特征块按照从左到右、从上到下的像素投影至所述协方差矩阵的特征向量后得到的向量依次排列，得到目标向量；聚类标记模块7，用于对所述目标向量的特征向量空间进行聚类标记，并对聚类过程生成的聚类标签进行纠正；变化检测模块8，用于基于纠正后的聚类结果确定双时相影像的建筑物变化区域。可以理解的是上述装置项实施例，是与本发明方法项实施例相对应的，本发明实施例提供的一种双时相影像建筑物变化检测装置，可以实现本发明任意一项方法项实施例提供的双时相影像建筑物变化检测方法。本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现任一项所述的双时相影像建筑物变化检测方法。需说明的是，以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。另外，本发明提供的装置实施例附图中，模块之间的连接关系表示它们之间具有通信连接，具体可以实现为一条或多条通信总线或信号线。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。所述领域的技术人员可以清楚地了解到，为了方便和简洁，上述描述的装置的具体工作过程，可参考前述方法实施例中对应的过程，在此不再赘述。终端设备可以是桌上型计算机、笔记本、掌上电脑及云端服务器等计算设备。所述终端设备可包括，但不仅限于，处理器、存储器。所称处理器可以是中央处理单元，还可以是其他通用处理器、数字信号处理器、专用集成电路、现成可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等，所述处理器是所述终端设备的控制中心，利用各种接口和线路连接整个终端设备的各个部分。所述存储器可用于存储所述计算机程序，所述处理器通过运行或执行存储在所述存储器内的计算机程序，以及调用存储在存储器内的数据，实现所述终端设备的各种功能。所述存储器可主要包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需的应用程序等；存储数据区可存储根据手机的使用所创建的数据等。此外，存储器可以包括高速随机存取存储器，还可以包括非易失性存储器，例如硬盘、内存、插接式硬盘，智能存储卡，安全数字卡，闪存卡、至少一个磁盘存储器件、闪存器件、或其他易失性固态存储器件。所述存储介质为计算机可读存储介质，所述计算机程序存储在所述计算机可读存储介质中，该计算机程序在被处理器执行时，可实现上述各个方法实施例的步骤。其中，所述计算机程序包括计算机程序代码，所述计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。所述计算机可读介质可以包括：能够携带所述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。需要说明的是，所述计算机可读介质包含的内容可以根据司法管辖区内立法和专利实践的要求进行适当的增减，例如在某些司法管辖区，根据立法和专利实践，计算机可读介质不包括电载波信号和电信信号。以上所述是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也视为本发明的保护范围。
