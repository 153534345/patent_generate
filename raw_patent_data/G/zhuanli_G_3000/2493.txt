标题title
一种用于肾结石图像的轮廓分析系统
摘要abst
本发明涉及医疗信息处理领域，具体公开了一种用于肾结石图像的轮廓分析系统，包括图像采集单元、图像预处理单元、肾结石分割单元、穿刺针路径分析单元以及穿刺针路径输出单元，利用多模态肾脏检测图像进行融合，构建肾结石三维数字图像，并对肾结石图像进行切片分析，构建肾结石轮廓点集，并利用肾结石轮廓点集中的点和肾结石的质心进行联合分析，利用最佳路径寻优算法实现最佳手术路径入针点以及入针角度的寻优，根据医学影像对肾结石图像进行分析，分割并识别肾结石轮廓、周边的动脉以及静脉血管。
权利要求书clms
1.一种用于肾结石图像的轮廓分析系统，包括图像采集单元、图像预处理单元、肾结石分割单元、穿刺针路径分析单元以及穿刺针路径输出单元，其特征在于，穿刺针路径分析单元根据肾结石分割单元分割出的肾结石轮廓获取肾结石轮廓信息，将肾结石的轮廓坐标存储为一组有序的点集P，点集，其中/＞，/＞为点集P中点的数量，获取结石轮廓上最大的两点间距作为结石分析直径，并将点集P以及结石分析直径作为穿刺针路径分析单元的输入数据，利用点集中/＞坐标之和的/＞分之一作为结石质心的/＞坐标，利用点集中/＞坐标之和的/＞分之一作为结石质心的/＞坐标，初始化最佳路径的评估值和最佳路径的入针坐标，其中最佳路径评估值为/＞，/＞的初始值为0，最佳路径的入针坐标为/＞，入针角度为/＞，入针角度的范围为/＞]，根据入针角度和结石质心坐标获取PCNL手术入针点坐标，PCNL手术入针点坐标获取公式为：；；式中：为PCNL手术入针点坐标的/＞坐标，/＞为PCNL手术入针点坐标的/＞坐标，以及/＞分别为结石质心的/＞和/＞坐标，/＞为结石分析直径。2.根据权利要求1所述的一种用于肾结石图像的轮廓分析系统，其特征在于，穿刺针路径分析单元获取PCNL入针点到结石轮廓的欧几里得距离，构建PCNL入针点到结石轮廓欧几里得距离的数据集，获取PCNL入针点到结石轮廓欧几里得距离数据集中的最小值作为最佳距离初始值，比较最佳距离初始值与的初始值的相对大小，当最佳距离初始值大于的初始值时，将最佳距离初始值更新为最佳距离的更新值，同时将入针点坐标更新为最佳距离更新值对应的结石轮廓上的对应点，返回最佳路径对应的入针点坐标，作为下一次穿刺针路径分析单元的循环输入数据，输入不同的入针角度，直至最佳路径评估值满足预先设定的数值，穿刺针路径输出单元输出穿刺针入针点坐标和入针角度。3.根据权利要求1所述的一种用于肾结石图像的轮廓分析系统，其特征在于，图像采集单元与图像预处理单元相连，图像预处理单元与肾结石分割单元相连，肾结石分割单元与穿刺针路径分析单元相连，穿刺针路径分析单元与穿刺针路径输出单元相连。4.根据权利要求1所述的一种用于肾结石图像的轮廓分析系统，其特征在于，图像采集单元采集肾结石患者肾脏CT成像、肾脏超声成像以及肾脏磁共振成像，并将采集的成像图片传输给图像预处理单元。5.根据权利要求1所述的一种用于肾结石图像的轮廓分析系统，其特征在于，成像预处理单元将获取的肾脏图像采用直方图均衡化、对比度增强以及多尺度融合的方式对多模态肾脏图像进行预处理，并获取多模态肾脏图像的轮廓信息，进行多模态肾脏图像信息融合，获取肾结石轮廓信息，并利用深度学习技术训练肾结石识别分割模型，自动学习结石形状、纹理及颜色特征以及肾脏内动脉、静脉特征，肾结石分割单元将肾结石从多模态融合的肾脏图像中进行分割和识别，再进一步对识别分割后的肾结石图像和肾脏内动脉、静脉图像进行增强处理，获取肾脏、肾结石、肾脏内动脉以及静脉三维数字图像。6.根据权利要求1所述的一种用于肾结石图像的轮廓分析系统，其特征在于，穿刺针路径分析单元构建肾结石轮廓点集P的过程包括如下步骤：步骤S1，肾结石三维数字图像切片：对肾结石三维数字图像进行水平切片和人体中线所在竖直面切片，切片厚度为1mm；步骤S2，获取最大面积切面：从切片中获取肾结石切面面积最大的面作为参考面，以参考面的中心点为原点，以参考面中贯穿肾结石轮廓两点间距最大的直线为轴，以垂直于/＞轴的直线为/＞轴，以参考面俯视视角时/＞轴的左侧为正方向，以/＞轴上侧为正方向，建立肾结石二维相对坐标系，并将最大切面的肾结石轮廓等距分割为/＞个点，分割间距为1mm；步骤S3，构建肾结石轮廓点集P：采集肾结石轮廓点上的分割点坐标，构建肾结石轮廓点集P。7.根据权利要求6所述的一种用于肾结石图像的轮廓分析系统，其特征在于，穿刺针路径分析单元中，PCNL手术入针点在参考面上，且入针角度A的相对基准线为以入针点为起点，平行于轴且方向指向肾脏一侧的射线为入针角度A的基准线，入针角度A在基准线逆时针方向且小于180°的角度为负值，入针角度A在基准线顺时针方向且小于等于180°的为正值。8.根据权利要求1所述的一种用于肾结石图像的轮廓分析系统，其特征在于，穿刺针路径分析单元中，最佳路径评估值与穿刺针计算路径上所遇的动脉主干次数二次函数负相关，与穿刺针计算路径上所遇的静脉主干次数一次函数负相关，与通过肾实质以及肾盏路径长度之和指数正相关，最佳路径评估值的公式为：；式中：为穿刺针计算路径上所遇的动脉主干次数，/＞为穿刺针计算路径上所遇的静脉主干次数，/＞和/＞分别为通过肾实质以及肾盏路径长度，/＞为肾动脉中一级和二级分支肾动脉对肾动脉主干的影响修正系数，/＞为深静脉中一级和二级分支肾静脉对肾静脉主干的影响修正系数，/＞为计算穿刺针路径平直度修正系数，/＞为自然对数函数的底数。9.根据权利要求8所述的一种用于肾结石图像的轮廓分析系统，其特征在于，穿刺针路径分析单元中，对最佳路径评估值的数值基于阈值进行分类，分类的机制如下：当最佳路径评估的数值在预设的合理设计阈值范围内时，最佳路径评估值的分类结果为合理；当最佳路径评估值的数值小于预设合理设计阈值范围最小值时，最佳路径评估值的分类结果为不合理；当最佳路径评估值的数值大于预设合理设计阈值范围的最大值时，提示采取多路径穿刺；穿刺针路径输出单元用于输出穿刺针的入针坐标、入针角度以及入针路径的三维数字图像，同时输出最佳路径评估值的分类结果和穿刺路径的深度。
说明书desc
技术领域本发明涉及医疗信息处理领域，更具体地说，本发明涉及一种用于肾结石图像的轮廓分析系统。背景技术肾结石是泌尿结石中最常见的一种结石，它能够引起尿路梗阻及感染，长期的结石梗阻、结石反复复发以及治疗会给肾脏带来沉重负担，最终演变成肾功能衰竭，危及患者的生命，而经皮肾镜造瘘术是一种治疗肾结石常用的技术，该手术具备创伤小且结石清除率高的特点，但是其也存在一些高风险的并发症，出血和感染是PCNL手术常见的并发症，而针对复杂性结石，单通道一次性结石清除较为困难，进一步增加了手术风险和手术并发症的发生率。据研究表明肾结石的清除率与结石大小、结石位置、结石分布和结石与集合系统的关系有关，而术后并发症出血、输血与穿刺通道大小、手术时间、结石位置和结石数目相关，而手术时间是增加手术大出血风险的首要因素，因此最大限度缩短手术时间是减少PCNL手术风险和手术出血的重要手段。传统的肾结石信息获取通常依赖医生的经验和手动测量，这种方法存在主观性和操作难度大的问题，无法根据医学影像对肾结石图像进行分析，分割并识别肾结石轮廓、周边的动脉以及静脉血管，不能够利用图像处理和分析的结果为医生进行PCNL手术提供入针的参数指导。为了解决上述问题，现提供一种技术方案。发明内容为了克服现有技术的上述缺陷，本发明的实施例提供一种用于肾结石图像的轮廓分析系统，利用多模态肾脏检测图像进行融合，构建肾结石三维数字图像，并对肾结石图像进行切片分析，构建肾结石轮廓点集，并利用肾结石轮廓点集中的点和肾结石的质心进行联合分析，利用最佳路径寻优算法实现最佳手术路径入针点以及入针角度的寻优，根据医学影像对肾结石图像进行分析，分割并识别肾结石轮廓、周边的动脉以及静脉血管，以解决上述背景技术中提出的问题。为实现上述目的，本发明提供如下技术方案：一种用于肾结石图像的轮廓分析系统，包括图像采集单元、图像预处理单元、肾结石分割单元、穿刺针路径分析单元以及穿刺针路径输出单元，穿刺针路径分析单元根据肾结石分割单元分割出的肾结石轮廓获取肾结石轮廓信息，将肾结石的轮廓坐标存储为一组有序的点集P，点集，其中/＞，/＞为点集P中点的数量，获取结石轮廓上最大的两点间距作为结石分析直径，并将点集P以及结石分析直径作为穿刺针路径分析单元的输入数据，利用点集中/＞坐标之和的/＞分之一作为结石质心的/＞坐标，利用点集中/＞坐标之和的/＞分之一作为结石质心的/＞坐标，初始化最佳路径的评估值和最佳路径的入针坐标，其中最佳路径评估值为/＞，/＞的初始值为0，最佳路径的入针坐标为，入针角度为/＞，入针角度的范围为/＞]，根据入针角度和结石质心坐标获取PCNL手术入针点坐标，PCNL手术入针点坐标获取公式为：；；式中：为PCNL手术入针点坐标的/＞坐标，/＞为PCNL手术入针点坐标的/＞坐标，/＞以及/＞分别为结石质心的/＞和/＞坐标，/＞为结石分析直径；穿刺针路径分析单元获取PCNL入针点到结石轮廓的欧几里得距离，构建PCNL入针点到结石轮廓欧几里得距离的数据集，获取PCNL入针点到结石轮廓欧几里得距离数据集中的最小值作为最佳距离初始值，比较最佳距离初始值与的初始值的相对大小，当最佳距离初始值大于/＞的初始值时，将最佳距离初始值更新为最佳距离的更新值，同时将入针点坐标更新为该最佳距离更新值对应的结石轮廓上的对应点，返回最佳路径对应的入针点坐标，作为下一次穿刺针路径分析单元的循环输入数据，输入不同的入针角度，直至最佳路径评估值满足预先设定的数值，穿刺针路径输出单元输出穿刺针入针点坐标和入针角度。作为本发明进一步的方案，图像采集单元与图像预处理单元相连，图像预处理单元与肾结石分割单元相连，肾结石分割单元与穿刺针路径分析单元相连，穿刺针路径分析单元与穿刺针路径输出单元相连。作为本发明进一步的方案，图像采集单元采集肾结石患者肾脏CT成像、肾脏超声成像以及肾脏磁共振成像，并将采集的成像图片传输给图像预处理单元。作为本发明进一步的方案，成像预处理单元将获取的肾脏图像采用直方图均衡化、对比度增强以及多尺度融合的方式对多模态肾脏图像进行预处理，并获取多模态肾脏图像的轮廓信息，进行多模态肾脏图像信息融合，获取肾结石轮廓信息，并利用深度学习技术训练肾结石识别分割模型，自动学习结石形状、纹理及颜色特征以及肾脏内动脉、静脉特征，肾结石分割单元将肾结石从多模态融合的肾脏图像中进行分割和识别，再进一步对识别分割后的肾结石图像和肾脏内动脉、静脉图像进行增强处理，获取肾脏、肾结石、肾脏内动脉以及静脉三维数字图像。作为本发明进一步的方案，穿刺针路径分析单元构建肾结石轮廓点集P的过程包括如下步骤：步骤S1，肾结石三维数字图像切片：对肾结石三维数字图像进行水平切片和人体中线所在竖直面切片，切片厚度为1mm；步骤S2，获取最大面积切面：从切片中获取肾结石切面面积最大的面作为参考面，以参考面的中心点为原点，以参考面中贯穿肾结石轮廓两点间距最大的直线为轴，以垂直于/＞轴的直线为/＞轴，以参考面俯视视角时/＞轴的左侧为正方向，以/＞轴上侧为正方向，建立肾结石二维相对坐标系，并将最大切面的肾结石轮廓等距分割为/＞个点，分割间距为1mm；步骤S3，构建肾结石轮廓点集P：采集肾结石轮廓点上的分割点坐标，构建肾结石轮廓点集P。作为本发明进一步的方案，穿刺针路径分析单元中，PCNL手术入针点在参考面上，且入针角度A的相对基准线为以入针点为起点，平行于轴且方向指向肾脏一侧的射线为入针角度A的基准线，入针角度A在基准线逆时针方向且小于180°的角度为负值，入针角度A在基准线顺时针方向且小于等于180°的为正值。进一步地，PCNL术后不可避免的大出血主要原因是穿刺路径损伤肾内段动脉或者静脉瘘，其肾动脉的主干以及一级、二级分支对手术的路径干预很大，会引起术后大出血风险的提高，同时在设计穿刺点时要求必须通过肾实质、肾盏穿刺入肾盂，而不能直接穿刺肾盂，从肾盏中沿肾盏长轴方向进针能够避免损伤肾盏旁边的动脉和静脉，减少出血，路径的设计应尽可能向肾脏后组中盏穿刺进入肾盂，不仅有利于输尿管镜向肾上、下盏及输尿管方向移动，更利于处理多个肾盏和输尿管结石，以及其他原因引起的输尿管梗阻，而在多发性肾结石的处理上，尽可能选择同时处理多个肾盏结石的共同通道，必要时需要建立第二通道。作为本发明进一步的方案，穿刺针路径分析单元中，最佳路径评估值与穿刺针计算路径上所遇的动脉主干次数二次函数负相关，与穿刺针计算路径上所遇的静脉主干次数一次函数负相关，与通过肾实质以及肾盏路径长度之和指数正相关，最佳路径评估值的公式为：；式中：为穿刺针计算路径上所遇的动脉主干次数，/＞为穿刺针计算路径上所遇的静脉主干次数，/＞和/＞分别为通过肾实质以及肾盏路径长度，/＞为肾动脉中一级和二级分支肾动脉对肾动脉主干的影响修正系数，/＞为深静脉中一级和二级分支肾静脉对肾静脉主干的影响修正系数，/＞为计算穿刺针路径平直度修正系数，/＞为自然对数函数的底数。作为本发明进一步的方案，穿刺针路径分析单元中，对最佳路径评估值的数值基于阈值进行分类，分类的机制如下：当最佳路径评估的数值在预设的合理设计阈值范围内时，最佳路径评估值的分类结果为合理；当最佳路径评估值的数值小于预设合理设计阈值范围最小值时，最佳路径评估值的分类结果为不合理；当最佳路径评估值的数值大于预设合理设计阈值范围的最大值时，提示采取多路径穿刺。作为本发明进一步的方案，穿刺针路径输出单元用于输出穿刺针的入针坐标、入针角度以及入针路径的三维数字图像，同时输出最佳路径评估值的分类结果和穿刺路径的深度。本发明一种用于肾结石图像的轮廓分析系统的技术效果和优点：本发明利用多模态肾脏检测图像进行融合，构建肾结石三维数字图像，并对肾结石图像进行切片分析，构建肾结石轮廓点集，并利用肾结石轮廓点集中的点和肾结石的质心进行联合分析，利用最佳路径寻优算法实现最佳手术路径入针点以及入针角度的寻优，根据医学影像对肾结石图像进行分析，分割并识别肾结石轮廓、周边的动脉以及静脉血管。附图说明图1为本发明一种用于肾结石图像的轮廓分析系统的二维相对坐标系示意图；图2为本发明一种用于肾结石图像的轮廓分析系统的结构示意图。具体实施方式下面将结合本发明中的附图，对本发明中的技术方案进行清楚、完整地描述，显然，所描述的发明内容仅仅是本发明一部分，而不是全部。基于本发明中的发明内容，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他发明内容，都属于本发明保护的范围。本发明提出的一种用于肾结石图像的轮廓分析系统，利用多模态肾脏检测图像进行融合，构建肾结石三维数字图像，并对肾结石图像进行切片分析，构建肾结石轮廓点集，并利用肾结石轮廓点集中的点和肾结石的质心进行联合分析，利用最佳路径寻优算法实现最佳手术路径入针点以及入针角度的寻优，根据医学影像对肾结石图像进行分析，分割并识别肾结石轮廓、周边的动脉以及静脉血管。如图1-图2所示，本发明提出的一种用于肾结石图像的轮廓分析系统，具体包括图像采集单元、图像预处理单元、肾结石分割单元、穿刺针路径分析单元以及穿刺针路径输出单元，穿刺针路径分析单元根据肾结石分割单元分割出的肾结石轮廓获取肾结石轮廓信息，将肾结石的轮廓坐标存储为一组有序的点集P，点集，其中/＞，/＞为点集P中点的数量，获取结石轮廓上最大的两点间距作为结石分析直径，并将点集P以及结石分析直径作为穿刺针路径分析单元的输入数据，利用点集中/＞坐标之和的/＞分之一作为结石质心的/＞坐标，利用点集中/＞坐标之和的/＞分之一作为结石质心的/＞坐标，初始化最佳路径的评估值和最佳路径的入针坐标，其中最佳路径评估值为/＞，/＞的初始值为0，最佳路径的入针坐标为/＞，入针角度为/＞，入针角度的范围为/＞]，根据入针角度和结石质心坐标获取PCNL手术入针点坐标，PCNL手术入针点坐标获取公式为：；；式中：为PCNL手术入针点坐标的/＞坐标，/＞为PCNL手术入针点坐标的/＞坐标，/＞以及/＞分别为结石质心的/＞和/＞坐标，/＞为结石分析直径；穿刺针路径分析单元获取PCNL入针点到结石轮廓的欧几里得距离，构建PCNL入针点到结石轮廓欧几里得距离的数据集，获取PCNL入针点到结石轮廓欧几里得距离数据集中的最小值作为最佳距离初始值，比较最佳距离初始值与的初始值的相对大小，当最佳距离初始值大于/＞的初始值时，将最佳距离初始值更新为最佳距离的更新值，同时将入针点坐标更新为该最佳距离更新值对应的结石轮廓上的对应点，返回最佳路径对应的入针点坐标，作为下一次穿刺针路径分析单元的循环输入数据，输入不同的入针角度，直至最佳路径评估值满足预先设定的数值，穿刺针路径输出单元输出穿刺针入针点坐标和入针角度。需要说明的是，图像采集单元与图像预处理单元相连，图像预处理单元与肾结石分割单元相连，肾结石分割单元与穿刺针路径分析单元相连，穿刺针路径分析单元与穿刺针路径输出单元相连。具体地，图像采集单元采集肾结石患者肾脏CT成像、肾脏超声成像以及肾脏磁共振成像，并将采集的成像图片传输给图像预处理单元。需要指出的是，超声成像利用高频声波在人体组织中的反射和传播来生成图像，在肾结石的检查中，使用超声波探头通过皮肤对肾脏进行扫描，从而生成肾结石的超声图像，超声成像具有无创、实时性和无辐射的优点，是一种常用的肾结石成像技术；磁共振成像利用强磁场和无线电波来生成人体组织的详细图像，在肾结石的检查中，使用MRI仪器对肾脏进行扫描，获取肾结石的MRI图像，MRI成像具有良好的软组织对比度和多平面成像能力，对肾结石的诊断和评估具有一定的优势；计算机断层扫描通过将X射线束通过患者的身体部位，然后使用X射线探测器捕捉穿过身体的X射线，从而生成肾脏的图像。优选的，多模态肾脏图像可以通过结合不同成像技术，提供更全面的肾脏结构信息，每种成像技术都有其独特的优势和局限性，通过融合多模态图像，弥补各种成像技术的局限性，提供更准确、详细的肾脏结构图像，提供不同角度和不同对比度的肾脏图像，从而增强结石的检测和定位能力，不同的成像技术突出显示结石在不同图像模态下的特征，使医生能够更准确地检测和定位结石的位置和大小，通过将多模态图像进行三维重建，能够获得具有空间上下文和几何信息的肾脏结石三维数字图像，这种三维图像能够提供更丰富的信息，有助于医生进行结石的分析、测量和规划手术路径。具体地，成像预处理单元将获取的肾脏图像采用直方图均衡化、对比度增强以及多尺度融合的方式对多模态肾脏图像进行预处理，并获取多模态肾脏图像的轮廓信息，进行多模态肾脏图像信息融合，获取肾结石轮廓信息，并利用深度学习技术训练肾结石识别分割模型，自动学习结石形状、纹理及颜色特征以及肾脏内动脉、静脉特征，肾结石分割单元将肾结石从多模态融合的肾脏图像中进行分割和识别，再进一步对识别分割后的肾结石图像和肾脏内动脉、静脉图像进行增强处理，获取肾脏、肾结石、肾脏内动脉以及静脉三维数字图像。需要说明的是，穿刺针路径分析单元构建肾结石轮廓点集P的过程包括如下步骤：步骤S1，肾结石三维数字图像切片：对肾结石三维数字图像进行水平切片和人体中线所在竖直面切片，切片厚度为1mm；步骤S2，获取最大面积切面：从切片中获取肾结石切面面积最大的面作为参考面，以参考面的中心点为原点，以参考面中贯穿肾结石轮廓两点间距最大的直线为轴，以垂直于/＞轴的直线为/＞轴，以参考面俯视视角时/＞轴的左侧为正方向，以/＞轴上侧为正方向，建立肾结石二维相对坐标系，并将最大切面的肾结石轮廓等距分割为/＞个点，分割间距为1mm；步骤S3，构建肾结石轮廓点集P：采集肾结石轮廓点上的分割点坐标，构建肾结石轮廓点集P。如图1所示，穿刺针路径分析单元中，PCNL手术入针点在参考面上，且入针角度A的相对基准线为以入针点为起点，平行于轴且方向指向肾脏一侧的射线为入针角度A的基准线，入针角度A在基准线逆时针方向且小于180°的角度为负值，入针角度A在基准线顺时针方向且小于等于180°的为正值。需要说明的是，PCNL术后不可避免的大出血主要原因是穿刺路径损伤肾内段动脉或者静脉瘘，其肾动脉的主干以及一级、二级分支对手术的路径干预很大，会引起术后大出血风险的提高，同时在设计穿刺点时要求必须通过肾实质、肾盏穿刺入肾盂，而不能直接穿刺肾盂，从肾盏中沿肾盏长轴方向进针能够避免损伤肾盏旁边的动脉和静脉，减少出血，路径的设计应尽可能向肾脏后组中盏穿刺进入肾盂，不仅有利于输尿管镜向肾上、下盏及输尿管方向移动，更利于处理多个肾盏和输尿管结石，以及其他原因引起的输尿管梗阻，而在多发性肾结石的处理上，尽可能选择同时处理多个肾盏结石的共同通道，必要时需要建立第二通道。优选的，穿刺针路径分析单元中，最佳路径评估值与穿刺针计算路径上所遇的动脉主干次数二次函数负相关，与穿刺针计算路径上所遇的静脉主干次数一次函数负相关，与通过肾实质以及肾盏路径长度之和指数正相关，最佳路径评估值的公式为：；式中：为穿刺针计算路径上所遇的动脉主干次数，/＞为穿刺针计算路径上所遇的静脉主干次数，/＞和/＞分别为通过肾实质以及肾盏路径长度，/＞为肾动脉中一级和二级分支肾动脉对肾动脉主干的影响修正系数，/＞为深静脉中一级和二级分支肾静脉对肾静脉主干的影响修正系数，/＞为计算穿刺针路径平直度修正系数，/＞为自然对数函数的底数。需要指出的是，最佳路径评估值与穿刺针计算路径上所遇的动脉主干次数呈二次函数负相关，能够表明最佳路径评估值在穿刺针经过动脉主干次数较少或较多的情况下会较高，而在动脉主干次数适中的情况下会较低，是由于经过较少或较多的动脉主干次数会增加穿刺针对动脉的干扰和风险，而经过适中的动脉主干次数能够减少干扰和风险，从而获得较高的评估值。同时，最佳路径评估值与穿刺针计算路径上所遇的静脉主干次数呈一次函数负相关，能够表明最佳路径评估值在穿刺针经过静脉主干次数较少的情况下会较高，而在静脉主干次数较多的情况下会较低，由于经过较多的静脉主干次数会增加穿刺针对静脉的干扰和风险，而经过较少的静脉主干次数能够减少干扰和风险，从而获得较高的评估值。同时，最佳路径评估值与通过肾实质以及肾盏路径长度之和呈指数正相关，说明最佳路径评估值随着路径长度的增加而增加，由于通过较长的路径能够更充分地覆盖和穿越肾实质以及肾盏，从而能够更有效地完成手术操作，获得较高的评估值。作为本发明进一步的方案，穿刺针路径分析单元中，对最佳路径评估值的数值基于阈值进行分类，分类的机制如下：当最佳路径评估的数值在预设的合理设计阈值范围内时，最佳路径评估值的分类结果为合理；当最佳路径评估值的数值小于预设合理设计阈值范围最小值时，最佳路径评估值的分类结果为不合理；当最佳路径评估值的数值大于预设合理设计阈值范围的最大值时，提示采取多路径穿刺。最佳路径评估值考虑了穿刺针经过动脉和静脉主干次数的影响以及路径长度的影响，用最佳路径评估值来反映在给定条件下选择最优路径的优劣程度。通过优化这些因素，能够提高肾结石手术的效果和安全性，同时为医生在选择穿刺路径数的时候提供指导意见。具体地，穿刺针路径输出单元用于输出穿刺针的入针坐标、入针角度以及入针路径的三维数字图像，同时输出最佳路径评估值的分类结果和穿刺路径的深度。本发明能够自动处理肾结石图像，提高工作效率并减少人工操作的主观性，通过图像分割和轮廓分析，能够准确地分割肾结石并获取其形状信息，通过分析穿刺针入针路径，帮助医生选择最佳的入针点，降低手术风险和伤害，提供的自动化分析结果能够为医生提供更多客观的信息，辅助肾结石的诊断和治疗决策。以上所述，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以所述权利要求的保护范围为准。最后：以上所述仅为本发明的优选方案而已，并不用于限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
