标题title
一种塑料缺陷检查方法
摘要abst
本发明提供了一种塑料缺陷检查方法，属于图像处理技术领域，包括：S1、采集待检查塑料的图像，得到待检查图像；S2、将待检查图像与无缺陷的塑料样本图像进行相减，得到差距图像；S3、对差距图像进行提取轮廓，得到差距图像轮廓；S4、将差距图像轮廓的轮廓特征输入塑料缺陷检查模型中，得到塑料缺陷评分；本发明解决了现有塑料缺陷检查方法存在缺陷检查精度不高的问题。
权利要求书clms
1.一种塑料缺陷检查方法，其特征在于，包括以下步骤：S1、采集待检查塑料的图像，得到待检查图像；S2、将待检查图像与无缺陷的塑料样本图像进行相减，得到差距图像；S3、对差距图像进行提取轮廓，得到差距图像轮廓；S4、将差距图像轮廓的轮廓特征输入塑料缺陷检查模型中，得到塑料缺陷评分。2.根据权利要求1所述的塑料缺陷检查方法，其特征在于，所述S2包括以下分步骤：S21、将待检查图像和无缺陷的塑料样本图像通过预设的定位标志进行配准；S25、将配准后的待检查图像和无缺陷的塑料样本图像按像素点位置进行相减，取相同位置处像素点的像素值差值的绝对值，作为差距图像在相同位置处像素点的像素值。3.根据权利要求1所述的塑料缺陷检查方法，其特征在于，所述S3包括以下分步骤：S31、从差距图像上任取一像素点，作为对比点；S32、计算对比点3*3邻域范围内的8个像素点与对比点的像素值的余弦相似度；S33、在8个余弦相似度均大于相似阈值时，对比点标记为非轮廓点；S34、在对比点的邻域范围内任取一像素点，作为下一对比点，并跳转至S32，直到遍历完差距图像上的像素点；S35、将标记为非轮廓点的像素点从差距图像中剔除，得到初始轮廓；S36、对初始轮廓进行轮廓平滑处理，得到差距图像轮廓。4.根据权利要求3所述的塑料缺陷检查方法，其特征在于，所述S36包括以下分步骤：S361、根据初始轮廓中每个像素点的3*3邻域范围内存在的像素点数量，计算轮廓系数；S362、根据轮廓系数，对每个像素点进行平滑处理，得到差距图像轮廓。5.根据权利要求4所述的塑料缺陷检查方法，其特征在于，所述S361中计算轮廓系数的公式为：其中，为轮廓系数，/＞为每个像素点的3*3邻域范围内存在的像素点数量，/＞为比例系数，/＞为像素点门限。6.根据权利要求5所述的塑料缺陷检查方法，其特征在于，所述S362中对每个像素点进行平滑处理的公式为：其中，为平滑处理后的像素点的像素值，/＞为待平滑处理的像素点的像素值，/＞为待平滑处理的像素点的3*3邻域范围内存在的像素点像素值的平均值，/＞为轮廓系数。7.根据权利要求1所述的塑料缺陷检查方法，其特征在于，所述S4包括以下分步骤：S41、将差距图像轮廓采用固定大小的窗口进行截取，得到各个轮廓子块；S42、提取每个轮廓子块的轮廓特征；S43、将轮廓特征输入塑料缺陷检查模型中，得到塑料缺陷评分。8.根据权利要求7所述的塑料缺陷检查方法，其特征在于，所述S42中轮廓特征包括：轮廓密度、轮廓长度和平滑程度；所述轮廓密度的计算公式为：其中，为第/＞个轮廓子块的轮廓密度，/＞为第/＞个轮廓子块中像素点数量，/＞为第/＞个轮廓子块的面积；所述轮廓长度的计算公式为：其中，为第/＞个轮廓子块的轮廓长度，/＞为第/＞个轮廓子块中最远一对像素点中其中一个像素点的横坐标，/＞为第/＞个轮廓子块中最远一对像素点中其中一个像素点的纵坐标，/＞为第/＞个轮廓子块中最远一对像素点中其中另一个像素点的横坐标，/＞为第/＞个轮廓子块中最远一对像素点中其中另一个像素点的纵坐标；所述平滑程度的计算公式为：其中，为第/＞个轮廓子块的平滑程度，/＞为第/＞个轮廓子块中第/＞个像素点的像素值，为第/＞个轮廓子块中像素点数量，| |为绝对值，/＞为轮廓子块的编号，/＞为像素点的编号。9.根据权利要求8所述的塑料缺陷检查方法，其特征在于，所述S43中塑料缺陷检查模型为：其中，为塑料缺陷评分，/＞为轮廓子块的数量，/＞为sigmoid激活函数，/＞为轮廓密度系数，/＞为轮廓长度系数，/＞为平滑程度系数，/＞为第/＞个轮廓子块的轮廓密度，/＞为第/＞个轮廓子块的轮廓长度，/＞为第/＞个轮廓子块的平滑程度。
说明书desc
技术领域本发明涉及图像处理技术领域，具体而言，涉及一种塑料缺陷检查方法。背景技术在塑料的生产过程中，极容易受到生产过程中工艺或者环境等影响，从而造成塑料存在缺陷。常见的塑料缺陷包括：缩水、气纹、黑点、变形、漏色、划伤和烧焦等。这些缺陷在影响塑料外观的同时，还影响塑料结构的稳定性。现有塑料缺陷检查方法通过获取塑料表面图像的灰度直方图，从而根据灰度直方图，得到灰度级，再基于灰度级的分布获取像素点的灰度不均匀程度，从而评估出塑料表面是否粗糙，将粗糙的表面图像进行合并，从而找到缺陷。但是塑料表面并非是光滑的，其上包含了各种凹凸不平的结构，通过灰度的分布情况来确定疑似缺陷的区域，存在缺陷检查精度不高的问题。发明内容本发明的目的在于提供一种塑料缺陷检查方法，其解决了现有塑料缺陷检查方法存在缺陷检查精度不高的问题。本发明的实施例通过以下技术方案实现：一种塑料缺陷检查方法，包括以下步骤：S1、采集待检查塑料的图像，得到待检查图像；S2、将待检查图像与无缺陷的塑料样本图像进行相减，得到差距图像；S3、对差距图像进行提取轮廓，得到差距图像轮廓；S4、将差距图像轮廓的轮廓特征输入塑料缺陷检查模型中，得到塑料缺陷评分。进一步地，所述S2包括以下分步骤：S21、将待检查图像和无缺陷的塑料样本图像通过预设的定位标志进行配准；S25、将配准后的待检查图像和无缺陷的塑料样本图像按像素点位置进行相减，取相同位置处像素点的像素值差值的绝对值，作为差距图像在相同位置处像素点的像素值。上述进一步地方案的有益效果为：本发明中通过预设定位标志使得待检查图像和无缺陷的塑料样本图像可以配准，从而实现图像的对齐，将相同位置的像素点进行相减，从而凸显缺陷区域，避免塑料本身结构影响缺陷区域的提取。进一步地，所述S3包括以下分步骤：S31、从差距图像上任取一像素点，作为对比点；S32、计算对比点3*3邻域范围内的8个像素点与对比点的像素值的余弦相似度；S33、在8个余弦相似度均大于相似阈值时，对比点标记为非轮廓点；S34、在对比点的邻域范围内任取一像素点，作为下一对比点，并跳转至S32，直到遍历完差距图像上的像素点；S35、将标记为非轮廓点的像素点从差距图像中剔除，得到初始轮廓；S36、对初始轮廓进行轮廓平滑处理，得到差距图像轮廓。上述进一步地方案的有益效果为：从差距图像上任取一像素点作为对比点，通过其与3*3邻域范围内的8个像素点的余弦相似度，从而估计出9个像素点的像素值水平，若像素值水平一致，则8个余弦相似度均大于相似阈值，若像素值水平不一致，则存在余弦相似度小于相似阈值。在像素值水平一致时，则中心像素点为非轮廓点，在遍历完差距图像后，将所有非轮廓点进行剔除，得到初始轮廓，但是初始轮廓线条并不平滑，其存在个别突兀的异常点，影响缺陷检查的精度。进一步地，所述S36包括以下分步骤：S361、根据初始轮廓中每个像素点的3*3邻域范围内存在的像素点数量，计算轮廓系数；S362、根据轮廓系数，对每个像素点进行平滑处理，得到差距图像轮廓。进一步地，所述S361中计算轮廓系数的公式为：其中，为轮廓系数，/＞为每个像素点的3*3邻域范围内存在的像素点数量，/＞为比例系数，/＞为像素点门限。上述进一步地方案的有益效果为：本发明中统计每个像素点的3*3邻域范围内存在的像素点数量，从而衡量出该像素点的孤立情况，在时，则邻域范围内仅有1个像素点，认为该中心像素点为噪点，为孤立的像素点，在/＞，/＞时，则/＞，则该中心像素点将被抹去，在/＞，/＞时，则邻域范围内仅有2个像素点，认为该中心像素点为噪点，/＞也等于0，该中心像素点将被抹去，因此，本发明中像素点门限的大小，决定本发明中平滑处理的程度，一般情况下，设置/＞或/＞。进一步地，所述S362中对每个像素点进行平滑处理的公式为：其中，为平滑处理后的像素点的像素值，/＞为待平滑处理的像素点的像素值，/＞为待平滑处理的像素点的3*3邻域范围内存在的像素点像素值的平均值，/＞为轮廓系数。上述进一步地方案的有益效果为：本发明中在时，/＞等于0，则平滑处理后像素点的像素值也为0，从而实现去除该相对孤立像素点，避免影响后续轮廓特征的提取，在时，该像素点邻近范围像素点较多，因此，利用邻域范围的像素值分布情况，对该像素点的像素值进行去噪处理，避免异常的像素值影响后续轮廓特征的提取。本发明中去除了相对孤立像素点，以及去除了异常的像素值，从而使得轮廓线条更平滑。进一步地，所述S4包括以下分步骤：S41、将差距图像轮廓采用固定大小的窗口进行截取，得到各个轮廓子块；S42、提取每个轮廓子块的轮廓特征；S43、将轮廓特征输入塑料缺陷检查模型中，得到塑料缺陷评分。上述进一步地方案的有益效果为：本发明中采用固定大小的窗口对差距图像轮廓进行截取，将差距图像轮廓截取成大小相同的轮廓子块，根据每个轮廓子块的轮廓特征，计算塑料缺陷评分。进一步地，所述S42中轮廓特征包括：轮廓密度、轮廓长度和平滑程度；所述轮廓密度的计算公式为：其中，为第/＞个轮廓子块的轮廓密度，/＞为第/＞个轮廓子块中像素点数量，/＞为第个轮廓子块的面积；所述轮廓长度的计算公式为：其中，为第/＞个轮廓子块的轮廓长度，/＞为第/＞个轮廓子块中最远一对像素点中其中一个像素点的横坐标，/＞为第/＞个轮廓子块中最远一对像素点中其中一个像素点的纵坐标，/＞为第/＞个轮廓子块中最远一对像素点中其中另一个像素点的横坐标，为第/＞个轮廓子块中最远一对像素点中其中另一个像素点的纵坐标；所述平滑程度的计算公式为：其中，为第/＞个轮廓子块的平滑程度，/＞为第/＞个轮廓子块中第/＞个像素点的像素值，/＞为第/＞个轮廓子块中像素点数量，| |为绝对值，/＞为轮廓子块的编号，/＞为像素点的编号。上述进一步地方案的有益效果为：本发明中设置轮廓密度，通过轮廓密度表达一个轮廓子块中像素点的数量，再通过最远一对像素点之间的距离表征一个轮廓子块中轮廓的长度，再通过像素值的平滑程度表征一个轮廓子块中像素值的分布情况。进一步地，所述S43中塑料缺陷检查模型为：其中，为塑料缺陷评分，/＞为轮廓子块的数量，/＞为sigmoid激活函数，/＞为轮廓密度系数，/＞为轮廓长度系数，/＞为平滑程度系数，/＞为第/＞个轮廓子块的轮廓密度，为第/＞个轮廓子块的轮廓长度，/＞为第/＞个轮廓子块的平滑程度。上述进一步地方案的有益效果为：本发明中分别为轮廓密度、轮廓长度和平滑程度设置不同系数，从而为轮廓密度、轮廓长度和平滑程度分配不同权重，再根据每个轮廓子块中轮廓密度、轮廓长度和平滑程度，从而估算出整体的待检查图像上缺陷情况。本发明实施例的技术方案至少具有如下优点和有益效果：本发明中采集待检查塑料的图像，将待检查图像与无缺陷的塑料样本图像进行相减，从而构造出新的图像，新的图像表征两个图像之间的差值，从而凸显出非相同区域，对差距图像进行提取轮廓，凸显缺陷特征，将差距图像轮廓的轮廓特征输入到塑料缺陷检查模型中，得到塑料缺陷评分，评估塑料缺陷程度；本发明中先通过两个图像相减的方式，减少相同区域对缺陷检查过程的影响，后又通过提取轮廓特征的方式，进一步地减少数据量，凸显缺陷特征，尽量减少塑料表面本身的塑料结构对于缺陷检查的影响，提高缺陷检查的精度。附图说明图1为一种塑料缺陷检查方法的流程图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本发明实施例的组件可以以各种不同的配置来布置和设计。如图1所示，一种塑料缺陷检查方法，包括以下步骤：S1、采集待检查塑料的图像，得到待检查图像；S2、将待检查图像与无缺陷的塑料样本图像进行相减，得到差距图像；所述S2包括以下分步骤：S21、将待检查图像和无缺陷的塑料样本图像通过预设的定位标志进行配准；S25、将配准后的待检查图像和无缺陷的塑料样本图像按像素点位置进行相减，取相同位置处像素点的像素值差值的绝对值，作为差距图像在相同位置处像素点的像素值。在S25中像素值为0处的像素点，认为该处不存在像素点，不参与后续过程。本发明中通过预设定位标志使得待检查图像和无缺陷的塑料样本图像可以配准，从而实现图像的对齐，将相同位置的像素点进行相减，从而凸显缺陷区域，避免塑料本身结构影响缺陷区域的提取。在外界环境完全一致时，待检查图像和无缺陷的塑料样本图像中相同位置点的像素值一致，但是通常情况下，外界环境是时刻变化的，因此，待检查图像和无缺陷的塑料样本图像中相同位置点的像素值是存在差异的，通过相减取绝对值的方式，相减后得到的差距图像非相同区域的像素值更大。S3、对差距图像进行提取轮廓，得到差距图像轮廓；所述S3包括以下分步骤：S31、从差距图像上任取一像素点，作为对比点；S32、计算对比点3*3邻域范围内的8个像素点与对比点的像素值的余弦相似度；S33、在8个余弦相似度均大于相似阈值时，对比点标记为非轮廓点；S34、在对比点的邻域范围内任取一像素点，作为下一对比点，并跳转至S32，直到遍历完差距图像上的像素点；S35、将标记为非轮廓点的像素点从差距图像中剔除，得到初始轮廓；S36、对初始轮廓进行轮廓平滑处理，得到差距图像轮廓。差距图像上任取一像素点作为对比点，通过其与3*3邻域范围内的8个像素点的余弦相似度，从而估计出9个像素点的像素值水平，若像素值水平一致，则8个余弦相似度均大于相似阈值，若像素值水平不一致，则存在余弦相似度小于相似阈值。在像素值水平一致时，则中心像素点为非轮廓点，在遍历完差距图像后，将所有非轮廓点进行剔除，得到初始轮廓，但是初始轮廓线条并不平滑，其存在个别突兀的异常点，影响缺陷检查的精度。所述S36包括以下分步骤：S361、根据初始轮廓中每个像素点的3*3邻域范围内存在的像素点数量，计算轮廓系数；S362、根据轮廓系数，对每个像素点进行平滑处理，得到差距图像轮廓。所述S361中计算轮廓系数的公式为：其中，为轮廓系数，/＞为每个像素点的3*3邻域范围内存在的像素点数量，/＞为比例系数，/＞为像素点门限。本发明中统计每个像素点的3*3邻域范围内存在的像素点数量，从而衡量出该像素点的孤立情况，在时，则邻域范围内仅有1个像素点，认为该中心像素点为噪点，为孤立的像素点，在/＞，/＞时，则/＞，则该中心像素点将被抹去，在/＞，/＞时，则邻域范围内仅有2个像素点，认为该中心像素点为噪点，/＞也等于0，该中心像素点将被抹去，因此，本发明中像素点门限的大小，决定本发明中平滑处理的程度，一般情况下，设置或/＞。所述S362中对每个像素点进行平滑处理的公式为：其中，为平滑处理后的像素点的像素值，/＞为待平滑处理的像素点的像素值，/＞为待平滑处理的像素点的3*3邻域范围内存在的像素点像素值的平均值，/＞为轮廓系数。本发明中在时，/＞等于0，则平滑处理后像素点的像素值也为0，从而实现去除该相对孤立像素点，避免影响后续轮廓特征的提取，在/＞时，该像素点邻近范围像素点较多，因此，利用邻域范围的像素值分布情况，对该像素点的像素值进行去噪处理，避免异常的像素值影响后续轮廓特征的提取。本发明中去除了相对孤立像素点，以及去除了异常的像素值，从而使得轮廓线条更平滑。S4、将差距图像轮廓的轮廓特征输入塑料缺陷检查模型中，得到塑料缺陷评分。所述S4包括以下分步骤：S41、将差距图像轮廓采用固定大小的窗口进行截取，得到各个轮廓子块；S42、提取每个轮廓子块的轮廓特征；S43、将轮廓特征输入塑料缺陷检查模型中，得到塑料缺陷评分。本发明中采用固定大小的窗口对差距图像轮廓进行截取，将差距图像轮廓截取成大小相同的轮廓子块，根据每个轮廓子块的轮廓特征，计算塑料缺陷评分。所述S42中轮廓特征包括：轮廓密度、轮廓长度和平滑程度；所述轮廓密度的计算公式为：其中，为第/＞个轮廓子块的轮廓密度，/＞为第/＞个轮廓子块中像素点数量，/＞为第个轮廓子块的面积；在本发明中轮廓子块的面积，用布满像素点的数量进行定义。所述轮廓长度的计算公式为：其中，为第/＞个轮廓子块的轮廓长度，/＞为第/＞个轮廓子块中最远一对像素点中其中一个像素点的横坐标，/＞为第/＞个轮廓子块中最远一对像素点中其中一个像素点的纵坐标，/＞为第/＞个轮廓子块中最远一对像素点中其中另一个像素点的横坐标，为第/＞个轮廓子块中最远一对像素点中其中另一个像素点的纵坐标；所述平滑程度的计算公式为：其中，为第/＞个轮廓子块的平滑程度，/＞为第/＞个轮廓子块中第/＞个像素点的像素值，/＞为第/＞个轮廓子块中像素点数量，| |为绝对值，/＞为轮廓子块的编号，/＞为像素点的编号。本发明中设置轮廓密度，通过轮廓密度表达一个轮廓子块中像素点的数量，再通过最远一对像素点之间的距离表征一个轮廓子块中轮廓的长度，再通过像素值的平滑程度表征一个轮廓子块中像素值的分布情况。所述S43中塑料缺陷检查模型为：其中，为塑料缺陷评分，/＞为轮廓子块的数量，/＞为sigmoid激活函数，/＞为轮廓密度系数，/＞为轮廓长度系数，/＞为平滑程度系数，/＞为第/＞个轮廓子块的轮廓密度，为第/＞个轮廓子块的轮廓长度，/＞为第/＞个轮廓子块的平滑程度。本发明中分别为轮廓密度、轮廓长度和平滑程度设置不同系数，从而为轮廓密度、轮廓长度和平滑程度分配不同权重，再根据每个轮廓子块中轮廓密度、轮廓长度和平滑程度，从而估算出整体的待检查图像上缺陷情况。本发明中采集待检查塑料的图像，将待检查图像与无缺陷的塑料样本图像进行相减，从而构造出新的图像，新的图像表征两个图像之间的差值，从而凸显出非相同区域，对差距图像进行提取轮廓，凸显缺陷特征，将差距图像轮廓的轮廓特征输入到塑料缺陷检查模型中，得到塑料缺陷评分，评估塑料缺陷程度；本发明中先通过两个图像相减的方式，减少相同区域对缺陷检查过程的影响，后又通过提取轮廓特征的方式，进一步地减少数据量，凸显缺陷特征，尽量减少塑料表面本身的塑料结构对于缺陷检查的影响，提高缺陷检查的精度。以上仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
