标题title
遥感图像的舰船检测方法、装置、电子设备及存储介质
摘要abst
本发明提供一种遥感图像的舰船检测方法、装置、电子设备及存储介质，涉及计算机视觉技术领域，该方法包括：按照不同尺度，对遥感图像进行特征提取，得到不同尺度下的第一特征图；根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所有第一特征图中的第三特征图，确定高层融合特征图；其中，第二特征图包括除最后一个尺度对应第一特征图以外的至少一个第一特征图，第三特征图包括除首个尺度对应第一特征图以外的至少一个第一特征图；根据低层融合特征图和高层融合特征图，确定目标融合特征图；根据目标融合特征图对应的自适应点集，确定遥感图像中的舰船检测结果，该方法可有效提高舰船检测结果的检测性能和准确性。
权利要求书clms
1.一种遥感图像的舰船检测方法，其特征在于，包括：按照不同尺度，对遥感图像进行特征提取，得到所述不同尺度下的第一特征图；根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所述所有第一特征图中的第三特征图，确定高层融合特征图；其中，所述第二特征图包括除最后一个尺度对应第一特征图以外的至少一个第一特征图，所述第三特征图包括除首个尺度对应第一特征图以外的至少一个第一特征图；根据所述低层融合特征图和所述高层融合特征图，确定目标融合特征图；根据所述目标融合特征图对应的自适应点集，确定所述遥感图像中的舰船检测结果。2.根据权利要求1所述的方法，其特征在于，所述根据所述目标融合特征图对应的自适应点集，确定所述遥感图像中的舰船检测结果，包括：根据所述目标融合特征图对应的自适应点集，确定所述自适应点集对应的质量度量结果；根据所述质量度量结果，确定所述遥感图像中的舰船检测结果。3.根据权利要求2所述的方法，其特征在于，所述根据所述目标融合特征图对应的自适应点集，确定所述自适应点集对应的质量度量结果，包括：根据所述目标融合特征图对应的自适应点集，确定所述自适应点集对应的空间位置距离度量、分类度量和角度度量；根据所述空间位置距离度量、所述分类度量和所述角度度量，确定所述自适应点集对应的质量度量结果。4.根据权利要求1-3任一项所述的方法，其特征在于，所述根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所述所有第一特征图中的第三特征图，确定高层融合特征图，包括：根据第一融合公式，得到所述低层融合特征图，并根据第二融合公式，得到所述高层融合特征图；其中，所述第一融合公式为：；所述第二融合公式为：；fl表示所述低层融合特征图；fA表示所述第二特征图；α1表示第一注意力特征系数；fh表示所述高层融合特征图；fB表示所述第三特征图；α2表示第二注意力特征系数；LAE表示局部注意力操作。5.根据权利要求1-3任一项所述的方法，其特征在于，所述根据所述低层融合特征图和所述高层融合特征图，确定目标融合特征图，包括：根据第三融合公式，得到所述目标融合特征图；其中，所述第三融合公式为；；F表示所述目标融合特征图；fl表示所述低层融合特征图；fh表示所述高层融合特征图；LAE表示局部注意力操作；α3表示第三注意力特征系数。6.根据权利要求3所述的方法，其特征在于，所述根据所述空间位置距离度量、所述分类度量和所述角度度量，确定所述自适应点集对应的质量度量结果，包括：根据度量函数，得到所述自适应点集对应的质量度量结果；其中，所述度量函数为：；F表示所述目标融合特征图；Q表示所述质量度量结果；Qcls表示所述分类度量；β1表示第一预设学习权重；Qloc表示所述空间位置距离度量；β2表示第二预设学习权重；Qos表示所述角度度量；β3表示第三预设学习权重；Qpix表示所述角度度量Qos和所述目标融合特征图对应方向点集的逐像素相关性。7.根据权利要求1-3任一项所述的方法，其特征在于，所述按照不同尺度，对遥感图像进行特征提取，得到所述不同尺度下的第一特征图，包括：采用初始特征提取模块，对所述遥感图像进行首次特征提取，得到初始特征图；按照特征提取器中的不同尺度，对所述初始特征图进行再次特征提取，得到所述不同尺度下的第一特征图。8.一种遥感图像的舰船检测装置，其特征在于，包括：特征图确定模块，用于按照不同尺度，对遥感图像进行特征提取，得到所述不同尺度下的第一特征图；局部注意力嵌入的特征金字塔模块，用于根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所述所有第一特征图中的第三特征图，确定高层融合特征图；其中，所述第二特征图包括除最后一个尺度对应第一特征图以外的至少一个第一特征图，所述第三特征图包括除首个尺度对应第一特征图以外的至少一个第一特征图；根据所述低层融合特征图和所述高层融合特征图，确定目标融合特征图；动态自适应点聚合模块，用于根据所述目标融合特征图对应的自适应点集，确定所述遥感图像中的舰船检测结果。9.一种电子设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求1至7任一项所述遥感图像的舰船检测方法。10.一种非暂态计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至7任一项所述遥感图像的舰船检测方法。
说明书desc
技术领域本发明涉及计算机视觉技术领域，尤其涉及一种遥感图像的舰船检测方法、装置、电子设备及存储介质。背景技术随着遥感图像技术的快速发展，遥感图像的空间分辨率逐渐可以达到分米级，甚至到厘米级。在早期的低分辨率的遥感图像上往往只能区分出粗糙的地物类别，而如今在高分辨率的遥感图像上可以利用图像处理、深度学习等方法，自动地检测识别出精细的地物目标。在军事、生态等智能监控等方面，遥感图像的舰船检测方法都有着广阔的应用前景。现有流行的多光谱遥感舰船检测方法主要是源于经典的目标检测器，并引入了方向回归的任务，以实现舰船检测。整个过程在舰船类别较多、分布密集和朝向任意的情况下，可能会严重降低舰船检测的性能，进而导致最终确定的舰船检测结果不够准确。发明内容本发明提供一种遥感图像的舰船检测方法、装置、电子设备及存储介质，用以解决现有技术中在舰船类别较多、分布密集和朝向任意的情况下，可能会严重降低舰船检测的性能，进而导致最终确定的舰船检测结果不够准确的缺陷，实现对不同尺度下的第一特征图进行多次融合处理，得到目标融合特征图，并基于动态确定的目标融合特征图对应的自适应点集，得到准确性较高的遥感图像中的舰船检测结果，提高了舰船检测结果的检测性能和准确性。本发明提供一种遥感图像的舰船检测方法，包括：按照不同尺度，对遥感图像进行特征提取，得到所述不同尺度下的第一特征图；根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所述所有第一特征图中的第三特征图，确定高层融合特征图；其中，所述第二特征图包括除最后一个尺度对应第一特征图以外的至少一个第一特征图，所述第三特征图包括除首个尺度对应第一特征图以外的至少一个第一特征图；根据所述低层融合特征图和所述高层融合特征图，确定目标融合特征图；根据所述目标融合特征图对应的自适应点集，确定所述遥感图像中的舰船检测结果。根据本发明提供的一种遥感图像的舰船检测方法，所述根据所述目标融合特征图对应的自适应点集，确定所述遥感图像中的舰船检测结果，包括：根据所述目标融合特征图对应的自适应点集，确定所述自适应点集对应的质量度量结果；根据所述质量度量结果，确定所述遥感图像中的舰船检测结果。根据本发明提供的一种遥感图像的舰船检测方法，所述根据所述目标融合特征图对应的自适应点集，确定所述自适应点集对应的质量度量结果，包括：根据所述目标融合特征图对应的自适应点集，确定所述自适应点集对应的空间位置距离度量、分类度量和角度度量；根据所述空间位置距离度量、所述分类度量和所述角度度量，确定所述自适应点集对应的质量度量结果。根据本发明提供的一种遥感图像的舰船检测方法，所述根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所述所有第一特征图中的第三特征图，确定高层融合特征图，包括：根据第一融合公式，得到所述低层融合特征图，并根据第二融合公式，得到所述高层融合特征图；其中，所述第一融合公式为：；所述第二融合公式为：/＞；fl表示所述低层融合特征图；fA表示所述第二特征图；α1表示第一注意力特征系数；fh表示所述高层融合特征图；fB表示所述第三特征图；α2表示第二注意力特征系数；LAE表示局部注意力操作。根据本发明提供的一种遥感图像的舰船检测方法，所述根据所述低层融合特征图和所述高层融合特征图，确定目标融合特征图，包括：根据第三融合公式，得到所述目标融合特征图；其中，所述第三融合公式为：；F表示所述目标融合特征图；fl表示所述低层融合特征图；fh表示所述高层融合特征图；LAE表示局部注意力操作；α3表示第三注意力特征系数。根据本发明提供的一种遥感图像的舰船检测方法，所述根据所述空间位置距离度量、所述分类度量和所述角度度量，确定所述自适应点集对应的质量度量结果，包括：根据度量函数，得到所述自适应点集对应的质量度量结果；其中，所述度量函数为：；F表示所述目标融合特征图；Q表示所述质量度量结果；Qcls表示所述分类度量；β1表示第一预设学习权重；Qloc表示所述空间位置距离度量；β2表示第二预设学习权重；Qos表示所述角度度量；β3表示第三预设学习权重；Qpix表示所述角度度量Qos和所述目标融合特征图对应方向点集的逐像素相关性。根据本发明提供的一种遥感图像的舰船检测方法，所述按照不同尺度，对遥感图像进行特征提取，得到所述不同尺度下的第一特征图，包括：采用初始特征提取模块，对所述遥感图像进行首次特征提取，得到初始特征图；按照特征提取器中的不同尺度，对所述初始特征图进行再次特征提取，得到所述不同尺度下的第一特征图。本发明还提供一种遥感图像的舰船检测装置，包括：特征图确定模块，用于按照不同尺度，对遥感图像进行特征提取，得到所述不同尺度下的第一特征图；局部注意力嵌入的特征金字塔模块，用于根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所述所有第一特征图中的第三特征图，确定高层融合特征图；其中，所述第二特征图包括除最后一个尺度对应第一特征图以外的至少一个第一特征图，所述第三特征图包括除首个尺度对应第一特征图以外的至少一个第一特征图；根据所述低层融合特征图和所述高层融合特征图，确定目标融合特征图；动态自适应点聚合模块，用于根据所述目标融合特征图对应的自适应点集，确定所述遥感图像中的舰船检测结果。本发明还提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现如上述任一种所述遥感图像的舰船检测方法。本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现如上述任一种所述遥感图像的舰船检测方法。本发明还提供一种计算机程序产品，包括计算机程序，所述计算机程序被处理器执行时实现如上述任一种所述遥感图像的舰船检测方法。本发明提供的遥感图像的舰船检测方法、装置、电子设备及存储介质，通过按照不同尺度，对遥感图像进行特征提取，得到所述不同尺度下的第一特征图；根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所述所有第一特征图中的第三特征图，确定高层融合特征图；其中，所述第二特征图包括除最后一个尺度对应第一特征图以外的至少一个第一特征图，所述第三特征图包括除首个尺度对应第一特征图以外的至少一个第一特征图；根据所述低层融合特征图和所述高层融合特征图，确定目标融合特征图；根据所述目标融合特征图对应的自适应点集，确定所述遥感图像中的舰船检测结果。该方法对不同尺度下的第一特征图进行多次融合处理，得到目标融合特征图，并基于动态确定的目标融合特征图对应的自适应点集，得到准确性较高的遥感图像中的舰船检测结果，提高了舰船检测结果的检测性能和准确性。附图说明为了更清楚地说明本发明或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明提供的遥感图像的舰船检测方法的流程示意图；图2a是本发明提供的确定特征提取器中各阶段对应第一特征图的流程示意图；图2b是本发明提供的确定目标融合特征图的流程示意图；图2c是本发明提供的遥感图像的舰船检测方法对应网络框架的结构示意图；图3是本发明提供的遥感图像的舰船检测装置的结构示意图；图4是本发明提供的电子设备的结构示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚，下面将结合本发明中的附图，对本发明中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。为更好地理解本发明实施例，首先对背景技术进行详细阐述：现有流行的多光谱遥感舰船检测方法一直以来都是计算机视觉技术领域的研究热点之一，舰船检测引起了越来越多的关注，在遥感图像理解中发挥着重要的作用。不同于传统的舰船检测方法，基于遥感图像的舰船定位具有独特性，即任意方向的非轴对齐和复杂上下文的密集紧凑分布。现有流行的多光谱遥感舰船检测方法主要是源于经典的目标检测器，并引入了方向回归的任务。其中，用于小型，杂乱和旋转物体的新型多类别旋转探测器、计算机辅助设计网络、深度残差网络和旋转物体特征细化的改进单级检测器，这些方法都通过预测边界框的旋转角度来获得显著的性能。而GlidingVertex和RSDet通过回归四边形来提升舰船检测结果的准确性。为了解决基于角度的方向估计中边界不连续性的问题，可将角度回归转换为角度分类任务，再将旋转边界框的参数转化到二维高斯分布中，从而使得旋转目标检测获得了更加稳健的舰船检测结果。然而，上述所有方法致力于使用旋转角度表示来改进方向估计。此外，现有流行的多光谱遥感舰船检测方法，如基于区域建议网络的实时目标检测，全卷积单阶段目标检测和目标检测的点集表示等方法，大多是面向正矩形或轴向对齐的舰船，难以用于复杂背景中密集分布的舰船非轴向对齐的目标。为了解决这个问题，可对轴向对齐的感兴趣区域进行空间变换，并在旋转边界框监督下学习轴向无关的表征。其中，SCRDet增强了轴向无关的特征并且在训练网络中带来了更高的目标响应。有一种特征对齐模块，以减轻轴向对齐卷积特征和任意方向目标之间的错位。在DRN中提出一种特征选择模块，来聚合从不同大小卷积核、形状和方向中获得的轴向对齐信息，并使用动态滤波生成器来进一步回归描点框。另，采用凸包表示来学习不规则的形状和排布，通过可学习的特征自适应来避免特征混叠。此外，现有的多光谱遥感舰船检测方法多使用了简单的方式来设置选择正样本的交并比阈值。但由于隐藏的无关噪声，以及样本标注困难等问题，这些简单的样本筛选方式无法保证训练样本的质量。因此，提出了一些样本分配策略来选择高质量的样本，如自适应训练样本选择和无锚点训练样本选择等。在基于遥感的舰船场景中，由于舰船方向的多样性和分布密集性，为样本选择带了困难，从而在旋转检测器学习选择高质量的样本是十分必要的。另，还引入了匹配性度量来评估基于角度锚框的空间对齐程度，使用了对齐敏感损失来加强分类和方向定位的相关性。综上，现有流行的多光谱遥感舰船检测方法存在以下几个问题：相比与自然图像，遥感图像的背景和内容更为复杂，密集分布的舰船边缘存在很大的语义歧义性，为精准分类和定位造成巨大挑战。此外，同一张遥感图像中不同类舰船的尺度变化较大，且存在类别不均衡问题，这将进一步加大分类的难度，导致最终确定的舰船检测结果不够准确。由于舰船是非轴向对齐且朝向任意，同时，不同类舰船直接存在很大的相似性。简单的特征提取方式很难有效感知相似类舰船之间的差异性，在特征融合过程中重复使用无关噪声，降低了显著特征对舰船的表示。此外，还忽略了底层语义中的物理外观细节，进一步降低了舰船的检测和定位能力，导致最终确定的舰船检测结果不够准确。简单的舰船检测方法多是通过特征回归了关键点而忽略了对学习关键点质量的有效评估，在舰船类别较多、分布密集和朝向任意的情况下，可能会严重降低舰船检测的性能，导致最终确定的舰船检测结果不够准确。综上，现有流行的多光谱遥感舰船检测方法存在一定局限性，会导致最终确定的舰船检测结果不够准确。为解决上述问题，本发明提供一种遥感图像的目标检测方法、装置、电子设备及存储介质，通过对不同尺度下的第一特征图进行多次融合处理，得到目标融合特征图，并基于动态确定的目标融合特征图对应的自适应点集，得到准确性较高的遥感图像中的舰船检测结果，提高了舰船检测结果的检测性能和准确性。要说明的是，本发明实施例涉及的执行主体可以是遥感图像的舰船检测装置，也可以是电子设备，可选的，该电子设备可以包括：计算机、移动终端及可穿戴设备等。下面以电子设备为例对本发明实施例进行进一步地说明。如图1所示，是本发明提供的遥感图像的舰船检测方法的流程示意图，可以包括：101、按照不同尺度，对遥感图像进行特征提取，得到不同尺度下的第一特征图。其中，尺度指的是尺寸信息，不同尺度对应的顺序为特征提取的顺序，首个尺度对应首个第一特征图，以此类推，最后一个尺度对应最后一个第一特征图。遥感图像也可称为卫星图像/多光谱遥感图像，指的是由卫星采集的图像，携带有舰船信息。其中，该遥感图像的数量不限，任一遥感图像可用x表示，x∈RH×W×C，R表示实数，H表示遥感图像的高，W表示遥感图像的宽，C表示遥感图像的通道维度。示例性的，电子设备在获取遥感图像之后，可将该遥感图像输入至特征提取器中，得到该特征提取器输出的多个第一特征图。其中，该特征提取器可称为连续小尺度和大尺度卷积的特征提取模块，该特征提取器可以包括4个阶段，分别为阶段1、阶段2、阶段3和阶段4，每个阶段是一个子空间，每个阶段对应一个尺度，也就是说，该特征提取器对应了4个尺度。其中，这4个尺度中的任意两个尺度都是不同的，且从阶段1至阶段4各自的尺度是依次递减的。此外，每个尺度对应一个第一特征图。电子设备在采用上述特征提取器对该遥感图像进行特征提取的过程中，可先按照阶段1对应的尺度，对该遥感图像进行特征提取，得到该阶段1对应的第一特征图F1；然后，将该第一特征图F1输入至阶段2，并按照该阶段2对应的尺度，对该第一特征图F1进行特征提取，得到该阶段2对应的第一特征图F2；接着，将该第一特征图F2输入至阶段3，并按照该阶段3对应的尺度，对该第一特征图F2进行特征提取，得到该阶段3对应的第一特征图F3；之后，将该第一特征图F3输入至阶段4，并按照该阶段4对应的尺度，对该第一特征图F3进行特征提取，得到该阶段4对应的第一特征图F4。这样一来，电子设备最终可以获取4个第一特征图，分别为：第一特征图F1、第一特征图F2、第一特征图F3和第一特征图F4。示例性的，如图2a所示，是本发明提供的确定特征提取器中各阶段对应第一特征图的流程示意图。其中，Conv1×1表示卷积核大小为1×1的卷积操作；Conv3×3表示卷积核大小为3×3的卷积操作；Conv7×7表示卷积核大小为7×7的卷积操作；UsP表示上采样操作。从图2a中可以看出，针对各阶段，电子设备先采用一组卷积核大小为1×1的卷积块对上层特征进行挤压，得到挤压特征图像，以确保该挤压特征图像携带更有效的特征信息；其次，再采用一组并行且连续的不同尺度卷积块对该挤压特征图像进行激励，得到不同的激励特征图像，这种方式有助于获取不同尺寸下遥感图像中舰船检测结果的局部细节；最后，对一组连续的卷积块的输出特征图像进行上采样操作，得到采样图像，并与上述挤压特征图像和其它连续的卷积块输出的激励特征图像进行拼接，得到该阶段对应的第一特征图，这种方式可有效解决不同尺度下第一特征图在空间分布上存在的特征差异，以有效改善感受野不足等问题。图2a所示的整个过程，在小尺度卷积和大尺度卷积相结合的情况下，能够更好地获取遥感图像中不同尺度的第一特征图，引入先验知识可有效提高物理外观等低层语义信息的表示，此外，整个过程在不增加网络深度的同时能够充分获取多尺度信息，有效提高各阶段对应第一特征图的准确性。可选的，结合上述图2a，针对各阶段，挤压特征可用Fs’=Conv1×1表示，s={1,2,3,4}可表示特征提取器中不同的阶段，也可表示不同阶段对应的尺度。第一激励特征图可用表示，Δ3×3表示连续的卷积核大小为3×3的卷积操作。第二激励特征图可用Fsb=Δ7×7表示，a和b表示并行的不同卷积块分支，Δ7×7表示连续的卷积核大小为7×7的卷积操作。第一特征图Fs可用表示。在一些实施例中，电子设备按照不同尺度，对遥感图像进行特征提取，得到不同尺度下的第一特征图，可以包括：电子设备采用初始特征提取模块，对遥感图像进行首次特征提取，得到初始特征图；该电子设备按照特征提取器中的不同尺度，对初始特征图进行再次特征提取，得到不同尺度下的第一特征图。其中，初始特征图携带有物理外观属性的先验知识。电子设备在获取遥感图像之后，可将该遥感图像输入至初始特征提取模块中，使得该初始特征提取模块能够对该遥感图像进行首次特征提取，即对该遥感图像进行卷积操作和最大池化操作，得到该初始特征提取模块输出的初始特征图。为了适应不同尺度的遥感图像，及通过增加卷积核的感受野来获取更好的局部细节，该电子设备可将该初始特征图输入至特征提取器，该特征提取器可按照不同尺度，对该初始特征图进行再次特征提取，得到不同尺度下的第一特征图。可选的，电子设备采用初始特征提取模块，对遥感图像进行首次特征提取，得到初始特征图，可以包括：电子设备采用初始特征提取模块中的特征提取公式，对遥感图像进行首次特征提取，得到初始特征图。其中，特征提取公式为：F=MaxPooling)。F表示初始特征图；Conv5×5表示卷积核大小为5×5的卷积操作；MaxPooling表示最大池化操作。电子设备采用上述特征提取公式，可提取到遥感图像中较为准确的细节特征，进而得到准确性较高的初始特征图。可选的，在步骤101之前，该方法还可以包括：电子设备获取初始遥感图像，并对该初始遥感图像进行处理，得到遥感图像。示例性的，电子设备在获取初始遥感图像的过程中，可接收卫星发送的791张初始遥感图像。其中，18张初始遥感图像的大小为25000×25000，剩余773张初始遥感图像的大小为10000×15000。为了确保后续网络训练实验的顺利进行，可将这773张按照5:1:4的比例划分为训练样本、验证样本和测试样本。此外，18张超大初始遥感图像主要用于测试图像速度及所提网络框架对超大遥感图像中舰船的检测精度。示例性的，电子设备在对初始遥感图像进行处理，得到遥感图像的过程中，可首先采用相应的标注软件，对初始遥感图像中的舰船进行标注，标注对象与包括：航空母舰、两栖攻击舰、巡洋舰、驱逐舰、护卫舰、潜艇、补给舰、其它舰船和民用船只等。为了确保舰船类别的均衡，对类别较少的航空母舰和两栖攻击舰进行复制-粘贴，实现数据增强的目的。然后，再对标注后的初始遥感图像进行归一化处理，便于后续的数据处理，具体的，可按照缩放率r=0.5、1.0或2.0，将这些初始遥感图像裁剪至1024×1024，移动步长为824，同时为确保正负样本的平衡，随机删除了30%的负样本。需要说明的是，针对不同类舰船数据不均衡和尺度变化较大等问题，可采用复制-粘贴的数据增强方式，对类别较少的舰船进行增扩，让类别较少的舰船与其它类舰船数量保持一致，提高数据的可靠性。102、根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所有第一特征图中的第三特征图，确定高层融合特征图。其中，第二特征图可以包括：除最后一个尺度对应第一特征图以外的至少一个第一特征图，第三特征图可以包括：除首个尺度对应第一特征图以外的至少一个第一特征图。电子设备可从所有第一特征图中先确定第二特征图，进而确定对应的低层融合特征图；同时，该电子设备可从所有第一特征图中先确定第三特征图，进而确定对应的高层融合特征图。需要说明的是，电子设备确定低层融合特征图与该电子设备确定高层融合特征图的时序不限。在一些实施例中，电子设备根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所有第一特征图中的第三特征图，确定高层融合特征图，可以包括：电子设备根据第一融合公式，得到低层融合特征图，并根据第二融合公式，得到高层融合特征图。其中，第一融合公式为：；第二融合公式为：；fl表示低层融合特征图；fA表示第二特征图；α1表示第一注意力特征系数；fh表示高层融合特征图；fB表示第三特征图；α2表示第二注意力特征系数；LAE表示局部注意力操作。电子设备根据上述第一融合公式，能够得到准确性较高的低层融合特征图；该电子设备根据上述第二融合公式，能够得到准确性较高的高层融合特征图。示例1，针对上述特征提取器的四个阶段，电子设备最终可确定四个第一特征图，此时，若第二特征图包括第一特征图F1、第一特征图F2和第一特征图F3，说明fA=，则电子设备能够根据公式fl=LAE=+α1，得到准确性较高的低层融合特征图；若第三特征图包括第一特征图F2、第一特征图F3和第一特征图F4，说明fB=，则电子设备能够根据公式fh=LAE=+α2，得到准确性较高的高层融合特征图。103、根据低层融合特征图和高层融合特征图，确定目标融合特征图。电子设备在确定低层融合特征图和高层融合特征图之后，可对这两个融合特征图进行融合，得到遥感图像对应的目标融合特征图，以备后续提取准确性较高的自适应点集。在一些实施例中，电子设备根据低层融合特征图和高层融合特征图，确定目标融合特征图，可以包括：电子设备根据第三融合公式，得到目标融合特征图。其中，第三融合公式为：；F表示目标融合特征图；fl表示低层融合特征图；fh表示高层融合特征图；LAE表示局部注意力操作；α3表示第三注意力特征系数。电子设备根据上述第三融合公式，得到准确性较高的目标融合特征图。结合示例1，示例2，如图2b所示，是本发明提供的确定目标融合特征图的流程示意图。从图2b中可以看出，电子设备可根据第一特征图F1、第一特征图F2和第一特征图F3，采用第一融合公式，得到低层融合特征图fl；电子设备可根据第一特征图F2、第一特征图F3和第一特征图F4，采用第二融合公式，得到高层融合特征图fh；进而结合低层融合特征图fl和高层融合特征图fh，采用第三融合公式，得到准确性较高的目标融合特征图F。基于上述过程，电子设备可将四个阶段各自的第一特征图沿自上而下的路径来组合多尺度特征，并融合对应的第一特征图以得到低层融合特征图和高层融合特征图，确保低层融合特征和高层融合特征之间能够独立表示，且有效避免特征之间的干扰，此外，整个过程在同一空间分布上降低差异性，可更好地获取遥感图像中的舰船检测结果的语义细节。104、根据目标融合特征图对应的自适应点集，确定遥感图像中的舰船检测结果。其中，自适应点集指的是用于设计自适应填充图案构件的修改参照点的集合，用于表征任意朝向舰船的物理外观等信息，便于后续能够有效提高任意方向分布舰船的分类结果和/或定位结果。电子设备在确定目标融合特征图会后，可先对该目标融合特征图进行角度旋转，并确定旋转后目标融合特征图对应的自适应点集，进而对该自适应点集进行筛选和表征，得到遥感图像中的舰船检测结果，该舰船检测结果的准确性较高。在一些实施例中，电子设备根据目标融合特征图对应的自适应点集，确定遥感图像中的舰船检测结果，可以包括：电子设备根据目标融合特征图对应的自适应点集，确定自适应点集对应的质量度量结果；该电子设备根据质量度量结果，确定遥感图像中的舰船检测结果。对于遥感图像中密集分布、任意朝向和尺度变化较大的舰船，由于缺乏有效的监督，从高质量点集中自适应地捕获检测的几何特征较为困难，因为，电子设备在确定目标融合特征图对应的自适应点集之后，可动态度量该自适应点集，即确定该自适应点集对应的质量度量结果，进而遥感图像中的舰船检测结果。在一些实施例中，电子设备根据目标融合特征图对应的自适应点集，确定自适应点集对应的质量度量结果，可以包括：电子设备根据目标融合特征图对应的自适应点集，确定自适应点集对应的空间位置距离度量、分类度量和角度度量；该电子设备根据空间位置距离度量、分类度量和角度度量，确定自适应点集对应的质量度量结果。其中，空间位置距离度量指的是任意两个自适应点之间的距离值。分类度量指的是各自适应点的类别。角度度量指的是任意两个自适应点之间的角度。电子设备在确定自适应点集对应的质量度量结果的过程中，可先确定该自适应点集对应的空间位置距离度量、分类度量和角度度量，进而确定该自适应点集对应的质量度量结果。在一些实施例中，电子设备根据空间位置距离度量、分类度量和角度度量，确定自适应点集对应的质量度量结果，可以包括：电子设备根据度量函数，得到自适应点集对应的质量度量结果。其中，度量函数为：；F表示目标融合特征图；Q表示质量度量结果；Qcls表示分类度量；β1表示第一预设学习权重；Qloc表示空间位置距离度量；β2表示第二预设学习权重；Qos表示角度度量；β3表示第三预设学习权重；Qpix表示角度度量Qos和目标融合特征图对应方向点集的逐像素相关性。电子设备根据上述度量函数，得到准确性较高的自适应点集所对应的质量度量结果。可选的，电子设备根据质量度量结果，确定遥感图像中的舰船检测结果，可以包括：电子设备根据自适应点集中质量度量结果满足预设度量范围的自适应点，确定遥感图像中的舰船检测结果。其中，预设度量范围可以是电子设备出厂前设置的，也可以是用户自定义的，此处不作具体限定。电子设备从自适应点集中，确定的质量度量结果满足预设度量范围的自适应点是较为准确的，进而得到的舰船检测结果也是较为准确的。这样一来，在动态自适应点学习表示阶段，采用高效、高质量的样本评估和分类策略，以筛选高代表性的定向代表点样本，并从邻近舰船或冗余噪声中捕获非轴对齐的特征语义，可有效提高舰船检测结果的准确性。在本发明实施例中，按照不同尺度，对遥感图像进行特征提取，得到不同尺度下的第一特征图；根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所有第一特征图中的第三特征图，确定高层融合特征图；根据低层融合特征图和高层融合特征图，确定目标融合特征图；根据目标融合特征图对应的自适应点集，确定遥感图像中的舰船检测结果。该方法对不同尺度下的第一特征图进行多次融合处理，得到目标融合特征图，并基于动态确定的目标融合特征图对应的自适应点集，得到准确性较高的遥感图像中的舰船检测结果，提高了舰船检测结果的检测性能和准确性。需要说明的是，上述步骤101可在电子设备中的特征图确定模块中实现，该特征图确定模块包括初始特征提取模块和特征提取器；上述步骤102-103可在该电子设备中的局部注意力嵌入的特征金字塔模块中实现；上述步骤104可在该电子设备中的动态自适应点聚合模块中实现。这样一来，电子设备可确定整个过程对应的分类损失δcls和定位损失δres，并根据公式δTotal=δcls+λδres，得到总损失δTotal。其中，λ表示预设的平衡权重，δres=δloc+δsc，δloc表示空间位置距离损失，δsc表示空间约束损失。上述过程能够能有效监督网络学习到更好地的特征表示，提高了遥感图像中尺度变化较大舰船的检测精度和效率，即可得到准确性较高的舰船检测结果。此外，由于添加了空间约束损失，可有效提高对应网络框架的鲁棒性。后续在不同分辨率的遥感图像集上进行评测验证，所提网络框架具有良好的检测精度和效率。为更好地理解本发明实施例，示例性的，如图2c所示，是本发明提供的遥感图像的舰船检测方法对应网络框架的结构示意图。该网络框架包括：特征图确定模块、局部注意力嵌入的特征金字塔模块、动态自适应点聚合模块和回归分类模块。其中，Stage1、Stage2、Stage3和Stage4表示特征提取器的不同阶段；Lreg表示回归分类模块中的回归损失函数，Lcls表示回归分类模块中的分类损失函数；g表示角度旋转函数；Q表示自适应点质量度量操作，对应度量函数。需要说明的是，g表示一种凸包的角度定向转换函数，旨在生成个不规则的包围所有采样点的外接四边形和多边形。假设自适应点集可用S表示，自适应点集S的中心点属于欧氏空间，该自适应点集S中的列向量由N个不同向量λ组成，并且满足 ，且N个λ均大于零。此外，纵坐标最小且横坐标最小的点一定是凸包上的点，同时，将这个凸包上的点记为So，从So开始按逆时针的方向，逐个找凸包上的点，每前进一步找到一个点，形成最终的外接多边形。从图2c中可以看出：电子设备在获取遥感图像之后，可将该遥感图像输入至CSLFEM中，对该遥感图像进行二次特征提取，主要为了获取不同尺寸下舰船的细节变化，可改变感受野的方式有益于尺度变化较大目标的特征表示；然后，将获取的四组不同尺度特征输入至LAFPM，该LAFPM对这四个第一特征图进行精细化处理，得到目标融合特征图，整个过程在降低冗余信息使用的同时获取更有效的上下文和全局语义，以进一步提高显著特征的表示性能；接着，采用角度旋转函数确定该目标融合特征图对应的自适应点集，进而采用动态自适应点聚合模块对该自适应点集进行筛选和表征，并利用回归分类模块中的空间约束策略对离散的自适应点集进行约束，以提高检测性能，得到准确性较高的舰船检测结果。结合图1与图2c，进行实验仿真，得到的仿真结果如表1所示：表1其中，Class用于表征对应类别的舰船；P用于表征舰船分类的精确度，即有多少正类是被分对的；R用于表征在实际正类中，有多少正类被网络框架对应的模型发现；F1-score表示F1分数，是一种舰船分类的衡量指标。从表1中可以看出：电子设备采用遥感图像的舰船检测方法对应网络框架，确定的舰船检测结果的精确率、召回率和F1分数都较高，说明该电子设备最终确定的舰船检测结果的准确性都较高。即可有效提高对遥感图像中舰船的检测精度和效率。此外，针对上述过程，还具有以下优点：在特征提取阶段，采用一组连续的小尺度和大尺度卷积块，以提高感受野对舰船的特征获取能力。此外，在每个特征提取阶段可采用加权的类别权重，进一步减低类别不均衡造成的误差。考虑到使用简单的FPN在聚合上下文语义时，重复使用无关噪声，并忽略了底层物理外观等基本属性信息。采用LAFPM，并在该LAFPM中引入先验知识，以在提高底层语义表示的同时提高显著细节的表征。此外，在特征融合阶段，采用了一种跳跃的跨层传递方式，在大尺度特征和小尺度特征之间建立有效依赖。采用了一种动态自适应点学习和样本评估方法，在选取自适应点样本时综合考虑了分类定位方向和点特征之间的相关性，并利用动态自适应点分配和评估方法来进行点集学习，同时，采用空间约束策略对离散的自适应点集进行惩罚。最终，上述所有模块之间相互协作可有效提高遥感图像中舰船的检测性能，使得最终确定的舰船检测结果更为准确。下面对本发明提供的遥感图像的舰船检测装置进行描述，下文描述的遥感图像的舰船检测装置与上文描述的遥感图像的舰船检测方法可相互对应参照。如图3所示，是本发明提供的遥感图像的舰船检测装置的结构示意图，可以包括：特征图确定模块301，用于按照不同尺度，对遥感图像进行特征提取，得到该不同尺度下的第一特征图；局部注意力嵌入的特征金字塔模块302，用于根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据该所有第一特征图中的第三特征图，确定高层融合特征图；其中，该第二特征图包括除最后一个尺度对应第一特征图以外的至少一个第一特征图，该第三特征图包括除首个尺度对应第一特征图以外的至少一个第一特征图；根据该低层融合特征图和该高层融合特征图，确定目标融合特征图；动态自适应点聚合模块303，用于根据该目标融合特征图对应的自适应点集，确定该遥感图像中的舰船检测结果。可选的，动态自适应点聚合模块303，具体用于根据该目标融合特征图对应的自适应点集，确定该自适应点集对应的质量度量结果；根据该质量度量结果，确定该遥感图像中的舰船检测结果。可选的，动态自适应点聚合模块303，具体用于根据该目标融合特征图对应的自适应点集，确定该自适应点集对应的空间位置距离度量、分类度量和角度度量；根据该空间位置距离度量、该分类度量和该角度度量，确定该自适应点集对应的质量度量结果。可选的，局部注意力嵌入的特征金字塔模块302，具体用于根据第一融合公式，得到该低层融合特征图，并根据第二融合公式，得到该高层融合特征图；其中，该第一融合公式为：；该第二融合公式为：/＞；fl表示该低层融合特征图；fA表示该第二特征图；α1表示第一注意力特征系数；fh表示该高层融合特征图；fB表示该第三特征图；α2表示第二注意力特征系数；LAE表示局部注意力操作。可选的，局部注意力嵌入的特征金字塔模块302，具体用于根据第三融合公式，得到该目标融合特征图；其中，该第三融合公式为：；F表示该目标融合特征图；fl表示该低层融合特征图；fh表示该高层融合特征图；LAE表示局部注意力操作；α3表示第三注意力特征系数。可选的，动态自适应点聚合模块303，具体用于根据度量函数，得到该自适应点集对应的质量度量结果；其中，该度量函数为：；F表示该目标融合特征图；Q表示该质量度量结果；Qcls表示该分类度量；β1表示第一预设学习权重；Qloc表示该空间位置距离度量；β2表示第二预设学习权重；Qos表示该角度度量；β3表示第三预设学习权重；Qpix表示该角度度量Qos和该目标融合特征图对应方向点集的逐像素相关性。可选的，特征图确定模块301包括初始特征提取模块和特征提取器；初始特征提取模块，用于对该遥感图像进行首次特征提取，得到初始特征图；特征提取器，用于按照不同尺度，对该初始特征图进行再次特征提取，得到该不同尺度下的第一特征图。如图4所示，是本发明提供的电子设备的结构示意图，该电子设备可以包括：处理器410、通信接口420、存储器430和通信总线440，其中，处理器410，通信接口420，存储器430通过通信总线440完成相互间的通信。处理器410可以调用存储器430中的逻辑指令，以执行遥感图像的舰船检测方法，该方法包括：按照不同尺度，对遥感图像进行特征提取，得到所述不同尺度下的第一特征图；根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所述所有第一特征图中的第三特征图，确定高层融合特征图；其中，所述第二特征图包括除最后一个尺度对应第一特征图以外的至少一个第一特征图，所述第三特征图包括除首个尺度对应第一特征图以外的至少一个第一特征图；根据所述低层融合特征图和所述高层融合特征图，确定目标融合特征图；根据所述目标融合特征图对应的自适应点集，确定所述遥感图像中的舰船检测结果。此外，上述的存储器430中的逻辑指令可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。另一方面，本发明还提供一种计算机程序产品，所述计算机程序产品包括计算机程序，计算机程序可存储在非暂态计算机可读存储介质上，所述计算机程序被处理器执行时，计算机能够执行上述各方法所提供的遥感图像的舰船检测方法，该方法包括：按照不同尺度，对遥感图像进行特征提取，得到所述不同尺度下的第一特征图；根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所述所有第一特征图中的第三特征图，确定高层融合特征图；其中，所述第二特征图包括除最后一个尺度对应第一特征图以外的至少一个第一特征图，所述第三特征图包括除首个尺度对应第一特征图以外的至少一个第一特征图；根据所述低层融合特征图和所述高层融合特征图，确定目标融合特征图；根据所述目标融合特征图对应的自适应点集，确定所述遥感图像中的舰船检测结果。又一方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现以执行上述各方法提供的遥感图像的舰船检测方法，该方法包括：按照不同尺度，对遥感图像进行特征提取，得到所述不同尺度下的第一特征图；根据所有第一特征图中的第二特征图，确定低层融合特征图，并根据所述所有第一特征图中的第三特征图，确定高层融合特征图；其中，所述第二特征图包括除最后一个尺度对应第一特征图以外的至少一个第一特征图，所述第三特征图包括除首个尺度对应第一特征图以外的至少一个第一特征图；根据所述低层融合特征图和所述高层融合特征图，确定目标融合特征图；根据所述目标融合特征图对应的自适应点集，确定所述遥感图像中的舰船检测结果。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分所述的方法。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
