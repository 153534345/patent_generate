标题title
内容安全检测方法、装置、设备及系统
摘要abst
本申请提供一种内容安全检测方法、装置、设备及系统，该方法包括：获取待检测图像数据；对所述待检测图像数据进行特征提取，得到所述待检测图像数据对应的特征信息；在所述目标设备为画面拼接的子设备的情况下，将所述特征信息以及所述目标设备对应的拼接参数上传至服务端，由所述服务端依据画面拼接的各子设备对应的拼接参数确定各子设备之间的拼接关系，依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接，并对拼接后的特征信息进行内容安全检测；接收所述服务端发送的检测反馈。该方法可以提高内容安全检测的准确性。
权利要求书clms
1.一种内容安全检测方法，其特征在于，应用于目标设备，所述目标设备为存在内容安全检测需求的设备，所述方法包括：获取待检测图像数据；对所述待检测图像数据进行特征提取，得到所述待检测图像数据对应的特征信息；在所述目标设备为画面拼接的子设备的情况下，将所述特征信息以及所述目标设备对应的拼接参数上传至服务端，由所述服务端依据画面拼接的各子设备对应的拼接参数确定各子设备之间的拼接关系，依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接，并对拼接后的特征信息进行内容安全检测；接收所述服务端发送的检测反馈。2.根据权利要求1所述的方法，其特征在于，所述将所述特征信息以及所述目标设备对应的拼接参数上传至服务端，包括：在获取到所述目标设备的拼接标识的情况下，以所述拼接标识为所述目标设备对应的拼接参数，将所述特征信息以及所述拼接标识上传至服务端；其中，对于任一画面拼接的子设备，该子设备的拼接标识用于指示该子设备在画面拼接的各子设备中的位置；或，在未获取到所述目标设备的拼接标识的情况下，以所述待检测图像数据的原始画面的边缘像素数据为所述目标设备对应的拼接参数，将所述特征信息以及边缘像素数据上传至服务端，以使所述服务端依据各子设备对应的边缘像素数据，基于边缘相似性，确定画面拼接的各子设备的位置，依据画面拼接的各子设备的位置确定各子设备的拼接标识，并将各子设备的拼接标识反馈给对应的子设备。3.根据权利要求2所述的方法，其特征在于，所述待检测图像数据的原始画面的边缘像素数据包括所述待检测图像的原始画面边缘的预设数量行/列的像素数据。4.一种内容安全检测方法，其特征在于，应用于服务端，所述方法包括：接收画面拼接的各子设备上报的特征信息，以及，各子设备对应的拼接参数；其中，子设备上报的特征信息由该子设备对获取到的待检测图像数据进行特征提取得到；依据各子设备对应的拼接参数确定各子设备之间的拼接关系，并依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接；对拼接后的特征信息进行内容安全检测；向各子设备发送检测反馈。5.根据权利要求4所述的方法，其特征在于，所述依据各子设备对应的拼接参数确定各子设备之间的拼接关系，包括：在所述拼接参数为子设备的拼接标识的情况下，依据各子设备的拼接标识确定各子设备之间的拼接关系；其中，对于任一画面拼接的子设备，该子设备的拼接标识用于指示该子设备在画面拼接的各子设备中的位置；或，在所述拼接参数为子设备的原始画面的边缘像素数据的情况下，依据各子设备对应的边缘像素数据，基于边缘相似性，确定各子设备之间的拼接关系。6.根据权利要求5所述的方法，其特征在于，所述依据各子设备对应的边缘像素数据，基于边缘相似性，确定各子设备之间的拼接关系，包括：对于目标子设备目标边缘的边缘像素数据，分别确定该目标边缘的边缘像素数据，与其它子设备的边缘像素数据之间的边缘相似性；其中，所述目标子设备为任一子设备，所述目标边缘为所述目标子设备的任一边缘；在该目标边缘的边缘像素数据，与任一其它子设备的任一边缘的边缘像素数据之间的边缘相似性超过阈值的情况下，确定该两条边缘满足拼接条件。7.根据权利要求6所述的方法，其特征在于，各子设备的显示画面为矩形画面；所述对于目标子设备目标边缘的边缘像素数据，分别确定该目标边缘的边缘像素数据，与其它子设备的各边缘的边缘像素数据之间的边缘相似性，包括：对于目标子设备目标边缘的边缘像素数据，分别确定该目标边缘的边缘像素数据，与其它子设备的指定边缘的边缘像素数据之间的边缘相似性；其中，所述指定边缘与该目标边缘属于相对侧。8.根据权利要求5所述的方法，其特征在于，在所述拼接参数为子设备的原始画面的边缘像素数据的情况下，所述方法还包括：依据各子设备之间的拼接关系，确定各子设备的位置；依据各子设备的位置确定各子设备的拼接标识，并将各子设备的拼接标识反馈给对应的子设备。9.一种内容安全检测装置，其特征在于，部署于目标设备，所述目标设备为存在内容安全检测需求的设备，所述装置包括：获取单元，用于获取待检测图像数据；特征提取单元，用于对所述待检测图像数据进行特征提取，得到所述待检测图像数据对应的特征信息；通信单元，用于在所述目标设备为画面拼接的子设备的情况下，将所述特征信息以及所述目标设备对应的拼接参数上传至服务端，由所述服务端依据画面拼接的各子设备对应的拼接参数确定各子设备之间的拼接关系，依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接，并对拼接后的特征信息进行内容安全检测；所述通信单元，还用于接收所述服务端发送的检测反馈。10.一种内容安全检测装置，其特征在于，部署于服务端，所述装置包括：通信单元，用于接收画面拼接的各子设备上报的特征信息，以及，各子设备对应的拼接参数；其中，子设备上报的特征信息由该子设备对获取到的待检测图像数据进行特征提取得到；拼接单元，用于依据各子设备对应的拼接参数确定各子设备之间的拼接关系，并依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接；检测单元，用于对拼接后的特征信息进行内容安全检测；所述通信单元，还用于向各子设备发送检测反馈。11.一种电子设备，其特征在于，包括处理器和存储器，其中，存储器，用于存放计算机程序；处理器，用于执行存储器上所存放的程序时，实现权利要求1~3或4~8任一项所述的方法。12.一种内容安全检测系统，其特征在于，包括：目标设备及服务端；所述目标设备为存在内容安全检测需求的设备；其中：所述目标设备，用于获取待检测图像数据；对所述待检测图像数据进行特征提取，得到所述待检测图像数据对应的特征信息；所述目标设备，还用于在所述目标设备为画面拼接的子设备的情况下，将所述特征信息以及所述目标设备对应的拼接参数上传至服务端；所述服务端，用于接收画面拼接的各子设备上报的特征信息，以及，各子设备对应的拼接参数；依据各子设备对应的拼接参数确定各子设备之间的拼接关系，并依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接；对拼接后的特征信息进行内容安全检测；向各子设备发送检测反馈。
说明书desc
技术领域本申请涉及网络安全技术领域，尤其涉及一种内容安全检测方法、装置、设备及系统。背景技术内容安全检测是指基于深度学习方法检测图片或视频画面中是否包含敏感内容，例如，不适合在当前场景下在图片或视频画面中显示的内容。目前基于深度学习的内容安全检测已经有很多实现方案，其主要实现方式通常是存在内容安全检测需求的设备将待检测数据上传至服务端，服务端进行检测后反馈检测结果。如何提高内容安全检测的准确性，尤其是提高分布式分割数据场景下的内容安全检测的准确性，成为亟待解决的技术问题。发明内容有鉴于此，本申请提供一种内容安全检测方法、装置、设备及系统。具体地，本申请是通过如下技术方案实现的：根据本申请实施例的第一方面，提供一种内容安全检测方法，应用于目标设备，所述目标设备为存在内容安全检测需求的设备，所述方法包括：获取待检测图像数据；对所述待检测图像数据进行特征提取，得到所述待检测图像数据对应的特征信息；在所述目标设备为画面拼接的子设备的情况下，将所述特征信息以及所述目标设备对应的拼接参数上传至服务端，由所述服务端依据画面拼接的各子设备对应的拼接参数确定各子设备之间的拼接关系，依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接，并对拼接后的特征信息进行内容安全检测；接收所述服务端发送的检测反馈。根据本申请实施例的第二方面，提供一种内容安全检测方法，应用于服务端，所述方法包括：接收画面拼接的各子设备上报的特征信息，以及，各子设备对应的拼接参数；其中，子设备上报的特征信息由该子设备对获取到的待检测图像数据进行特征提取得到；依据各子设备对应的拼接参数确定各子设备之间的拼接关系，并依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接；对拼接后的特征信息进行内容安全检测；向各子设备发送检测反馈。根据本申请实施例的第三方面，提供一种内容安全检测装置，部署于目标设备，所述目标设备为存在内容安全检测需求的设备，所述装置包括：获取单元，用于获取待检测图像数据；特征提取单元，用于对所述待检测图像数据进行特征提取，得到所述待检测图像数据对应的特征信息；通信单元，用于在所述目标设备为画面拼接的子设备的情况下，将所述特征信息以及所述目标设备对应的拼接参数上传至服务端，由所述服务端依据画面拼接的各子设备对应的拼接参数确定各子设备之间的拼接关系，依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接，并对拼接后的特征信息进行内容安全检测；所述通信单元，还用于接收所述服务端发送的检测反馈。根据本申请实施例的第四方面，提供一种内容安全检测装置，部署于服务端，所述装置包括：通信单元，用于接收画面拼接的各子设备上报的特征信息，以及，各子设备对应的拼接参数；其中，子设备上报的特征信息由该子设备对获取到的待检测图像数据进行特征提取得到；拼接单元，用于依据各子设备对应的拼接参数确定各子设备之间的拼接关系，并依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接；检测单元，用于对拼接后的特征信息进行内容安全检测；所述通信单元，还用于向各子设备发送检测反馈。根据本申请实施例的第五方面，提供一种电子设备，包括处理器和存储器，其中，存储器，用于存放计算机程序；处理器，用于执行存储器上所存放的程序时，实现第一方面或第二方面提供的方法。根据本申请实施例的第六方面，提供一种内容安全检测系统，包括：目标设备及服务端；所述目标设备为存在内容安全检测需求的设备；其中：所述目标设备，用于获取待检测图像数据；对所述待检测图像数据进行特征提取，得到所述待检测图像数据对应的特征信息；所述目标设备，还用于在所述目标设备为画面拼接的子设备的情况下，将所述特征信息以及所述目标设备对应的拼接参数上传至服务端；所述服务端，用于接收画面拼接的各子设备上报的特征信息，以及，各子设备对应的拼接参数；依据各子设备对应的拼接参数确定各子设备之间的拼接关系，并依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接；对拼接后的特征信息进行内容安全检测；向各子设备发送检测反馈。本申请实施例的内容安全检测方法，目标设备获取待检测图像数据，并对待检测图像数据进行特征提取，得到待检测图像数据对应的特征信息；在目标设备为画面拼接的子设备的情况下，将特征提取得到的特征信息以及目标设备对应的拼接参数上传至服务端；服务端依据画面拼接的各子设备对应的拼接参数确定各子设备之间的拼接关系，依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接，并对拼接后的特征信息进行内容安全检测，向画面拼接的各子设备发送检测反馈，通过目标设备对待检测图像数据进行特征提取，并将特征信息上传至服务端进行内容安全检测，一方面，将数据预处理动作由服务端下放至目标设备，节约了服务端的计算资源；另一方面，目标设备上传特征信息，替代上传原始待检测图像数据，减少了降低了需要进行网络通信上报的数据量；同时也对原始图像数据进行了特征化处理，避免了攻击者直接截取相关数据，导致数据泄露，提高了数据安全性。此外，通过基于画面拼接的子设备上传的拼接参数，对各子设备上传的特征信息进行拼接，能够有效处理画面拼接场景下由于图像分割导致的内容检测漏报问题，提高了内容安全检测的准确性。附图说明图1为本申请一示例性实施例示出的一种内容安全检测方法的流程示意图；图2为本申请一示例性实施例示出的一种内容安全检测方法的流程示意图；图3为本申请一示例性实施例示出的一种内容安全检测方案的流程示意图；图4为本申请一示例性实施例示出的一种内容安全检测装置的结构示意图；图5为本申请一示例性实施例示出的一种内容安全检测装置的结构示意图；图6为本申请一示例性实施例示出的一种电子设备的硬件结构示意图。具体实施方式这里将详细地对示例性实施例进行说明，其示例表示在附图中。下面的描述涉及附图时，除非另有表示，不同附图中的相同数字表示相同或相似的要素。以下示例性实施例中所描述的实施方式并不代表与本申请相一致的所有实施方式。相反，它们仅是与如所附权利要求书中所详述的、本申请的一些方面相一致的装置和方法的例子。在本申请使用的术语是仅仅出于描述特定实施例的目的，而非旨在限制本申请。在本申请和所附权利要求书中所使用的单数形式的“一种”、“所述”和“该”也旨在包括多数形式，除非上下文清楚地表示其他含义。为了使本领域技术人员更好地理解本申请实施例提供的技术方案，下面先对本申请实施例涉及的部分术语进行简单说明。1、边缘相似性：指的是一张图片中内部像素或纹理呈现出区域相似的特征，一般用于对一张大尺寸的图片进行分割，本申请基于边缘相似性进行终端画面的自动化拼接。为了使本申请实施例的上述目的、特征和优点能够更加明显易懂，下面结合附图对本申请实施例中技术方案作进一步详细的说明。请参见图1，为本申请实施例提供的一种内容安全检测方法的流程示意图，其中，该方法可以应用于任一存在内容安全检测需求的设备，例如，智慧屏幕、显示屏等终端设备，如图1所示，该内容安全检测方法可以包括以下步骤：步骤S100、获取待检测图像数据。示例性的，目标设备可以通过截屏或码流采集方式，采集设备画面数据，以采集到的设备画面数据作为待检测图像数据。示例性的，目标设备可以实时进行待检测图像数据采集，以实现对显示画面内容的实时监测。步骤S110、对待检测图像数据进行特征提取，得到待检测图像数据对应的特征信息。本申请实施例中，对于获取到的待检测图像数据，目标设备可以对其进行特征提取，得到待检测图像数据对应的特征信息。例如，目标设备可以基于深度学习算法，对获取到的待检测图像数据进行特征提取，得到待检测图像数据对应的特征信息，如特征矩阵。需要说明的是，在目标设备不支持数据采集以及特征提取的情况下，可以通过在目标设备上安装本申请提供的客户端的方式实现上述处理。步骤S120、在目标设备为画面拼接的子设备的情况下，将特征信息以及目标设备对应的拼接参数上传至服务端，由服务端依据画面拼接的各子设备对应的拼接参数确定各子设备之间的拼接关系，依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接，并对拼接后的特征信息进行内容安全检测。本申请实施例中，对于目标设备为画面拼接的子设备的情况，例如，目标设备为拼接屏中的一个显示屏，目标设备在将按照上述方式得到的特征信息上传给服务端的情况下，还需要向服务端上传目标设备对应的拼接参数。示例性的，该拼接参数可以用于确定画面拼接的各子设备之间的拼接关系。服务端接收到画面拼接的各子设备上传的特征信息以及各子设备对应的拼接参数的情况下，可以依据画面拼接的各子设备对应的拼接参数确定各子设备之间的拼接关系，依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接，并对拼接后的特征信息进行内容安全检测，得到内容安全检测结果，其具体实现可以参见图2所示方法流程中的相关说明，本申请实施例在此不做赘述。需要说明的是，在服务端负责内容安全检测的设备包括需要进行画面拼接的设备以及不需要进行画面拼接的设备；或者，包括多个不同拼接群组的设备的情况下，服务端可以维护各设备的设备标识与设备归属的拼接群组的对应关系，以便依据设备ID确定设备归属的拼接群组。相应地，目标设备向服务端上传的数据中还可以包括目标设备的设备标识，如设备ID。其中，在目标设备不属于画面拼接的子设备的情况下，目标设备向服务端上传特征信息的情况下，可以不需要上传对应的拼接参数。此外，在目标设备不属于画面拼接的子设备的情况下，目标设备在进行特征信息上传的情况下，可以不需要上传拼接参数。服务端接收到目标设备上传的特征信息，且确定不存在拼接参数的情况下，可以不需要进行特征信息拼接处理，而是对目标设备上传的特征信息进行内容安全检测。步骤S130、接收服务端发送的检测反馈。本申请实施例中，服务端在得到了内容安全检测结果的情况下，可以基于内容安全检测结果向画面拼接的各子设备发送检测反馈。在一个示例中，服务端可以将内容安全检测结果反馈给画面拼接的各子设备。示例性的，目标设备在接收到服务端反馈的内容安全检测结果的情况下，可以依据内容安全检测结果采取相应的处理措施。例如，在依据内容安全检测结果确定显示内容存在异常的情况下，目标设备可以采取关机、息屏或屏幕遮盖等处理。示例性的，上述目标设备的处理方案可以提前配置，或者，可以由服务端下发给目标设备，例如，服务端可以将内容检测结果和处理方案反馈给目标设备。在另一个示例中，服务端可以在基于内容安全检测结果确定显示内容存在异常的情况下，确定对应的处理方案，并将处理方案发送给画面拼接的各子设备，由画面拼接的各子设备依据接收到的处理方案进行处理。可见，在图1所示方法流程中，目标设备获取待检测图像数据，并对待检测图像数据进行特征提取，得到待检测图像数据对应的特征信息；在目标设备为画面拼接的子设备的情况下，将特征提取得到的特征信息以及目标设备对应的拼接参数上传至服务端；服务端依据画面拼接的各子设备对应的拼接参数确定各子设备之间的拼接关系，依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接，并对拼接后的特征信息进行内容安全检测，向画面拼接的各子设备发送检测反馈，通过目标设备对待检测图像数据进行特征提取，并将特征信息上传至服务端进行内容安全检测，一方面，将数据预处理动作由服务端下放至目标设备，节约了服务端的计算资源；另一方面，目标设备上传特征信息，替代上传原始待检测图像数据，减少了降低了需要进行网络通信上报的数据量；同时也对原始图像数据进行了特征化处理，避免了攻击者直接截取相关数据，导致数据泄露，提高了数据安全性。此外，通过基于画面拼接的子设备上传的拼接参数，对各子设备上传的特征信息进行拼接，能够有效处理画面拼接场景下由于图像分割导致的内容检测漏报问题，提高了内容安全检测的准确性。在一些实施例中，上述将特征信息以及目标设备对应的拼接参数上传至服务端，包括：在获取到目标设备的拼接ID的情况下，以拼接ID为目标设备对应的拼接参数，将特征信息以及拼接ID上传至服务端；其中，对于任一画面拼接的子设备，该子设备的拼接ID用于指示该子设备在画面拼接的各子设备中的位置；或，在未获取到目标设备的拼接ID的情况下，以待检测图像数据的原始画面的边缘像素数据为目标设备对应的拼接参数，将特征信息以及边缘像素数据上传至服务端，以使服务端依据各子设备对应的边缘像素数据，基于边缘相似性，确定画面拼接的各子设备的位置，依据画面拼接的各子设备的位置确定各子设备的拼接ID，并将各子设备的拼接ID反馈给对应的子设备。示例性的，在目标设备为画面拼接子设备的情况下，目标设备可以尝试获取本设备的拼接标识。其中，对于任一画面拼接的子设备，该子设备的拼接ID用于指示该子设备在画面拼接的各子设备中的位置。例如，目标设备可以查询指定存储区域内是否存在拼接ID。示例性的，在目标设备获取到拼接ID的情况下，例如，从指定存储区域查询到拼接ID，目标设备可以以拼接ID为目标设备对应的拼接参数，将特征信息以及拼接ID上传至服务端。在目标设备未获取到拼接ID的情况下，例如，从指定存储区域未查询到拼接ID，目标设备可以以待检测图像数据的原始画面的边缘像素数据为目标设备对应的拼接参数，将待检测图像数据的特征信息以及该边缘像素数据上传至服务端。服务端接收到画面拼接的各子设备上传的边缘像素数据的情况下，可以基于边缘相似性，确定画面拼接的各子设备的位置，如，确定显示屏在拼接屏中的位置。例如，对于3*3的拼接屏，显示屏的拼接位置为x-y可以表示显示屏在第x行，第y列。服务端可以依据画面拼接的各子设备的位置确定各子设备的拼接ID，并将各子设备的拼接ID反馈给对应的子设备。目标设备接收到服务端反馈的拼接ID的情况下，可以记录该拼接ID，例如，将其保存在上述指定存储区域，在需要再次向服务端上传特征信息的情况下，可以以该拼接ID为拼接参数。在一个示例中，待检测图像数据的原始画面的边缘像素数据可以包括待检测图像的原始画面边缘的预设数量行/列的像素数据。示例性的，以待检测图像数据的原始画面为矩形画面为例，假设原始画面的分辨率为1024*720，则可以将原始画面左右侧各20列，上下侧各10行的像素数据，确定为原始画面的边缘像素数据。请参见图2，为本申请实施例提供的一种内容安全检测方法的流程示意图，其中，该方法可以应用于服务端，该服务端可以用于进行内容安全检测，例如，内容安全检测服务器，如图2所示，该内容安全检测方法可以包括以下步骤：步骤S200、接收画面拼接的各子设备上报的特征信息，以及，各子设备对应的拼接参数；其中，子设备上报的特征信息由该子设备对获取到的待检测图像数据进行特征提取得到。示例性的，画面拼接的子设备上报特征信息以及拼接参数的具体实现可以参见图1所示方法流程中的相关描述，本申请实施例对此不再复述。步骤S210、依据各子设备对应的拼接参数确定各子设备之间的拼接关系，并依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接。本申请实施例中，服务端可以依据画面拼接的各子设备对应的拼接参数确定各子设备之间的拼接关系。例如，对于2*2拼接屏，各子设备之间的拼接关系可以包括：子设备2在子设备1的右侧，子设备3在子设备1的下方，子设备4在子设备2的下方。服务端可以依据各子设备之间的拼接关系，对各子设备上报的特征信息进行拼接，得到拼接后的特征信息。步骤S220、对拼接后的特征信息进行内容安全检测，得到内容安全检测结果。本申请实施例中，服务端在按照上述方式得到拼接后的特征信息的情况下，可以对拼接后的特征信息进行内容安全检测，得到内容安全检测结果。例如，服务端可以将拼接后的特征信息，输入训练好的内容安全检测模型，利用内容安全检测模型，依据拼接后的特征信息进行内容安全检测，输出内容安全检测结果。示例性的，内容安全检测模型可以包括但不限于：深度学习中的卷积神经网络模型、循环神经网络模型、多重神经网络模型，或，其他机器学习模型。步骤S230、向各子设备发送检测反馈。本申请实施例中，服务端依据各子设备上报的特征信息，按照上述方式得到了内容安全检测结果的情况下，可以基于内容安全检测结果向各子设备发送检测反馈。可见，在图2所示方法流程中，服务端接收画面拼接的各子设备上报的特征信息，以及，各子设备对应的拼接参数，依据各子设备对应的拼接参数确定各子设备之间的拼接关系，并依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接，进而，对拼接后的特征信息进行内容安全检测，并向画面拼接的各子设备发送检测反馈，通过目标设备对待检测图像数据进行特征提取，并将特征信息上传至服务端进行内容安全检测，一方面，将数据预处理动作由服务端下放至目标设备，节约了服务端的计算资源；另一方面，目标设备上传特征信息，替代上传原始待检测图像数据，减少了降低了需要进行网络通信上报的数据量；同时也对原始图像数据进行了特征化处理，避免了攻击者直接截取相关数据，导致数据泄露，提高了数据安全性。此外，相较于对每一子设备的画面单独进行内容安全检测，本申请通过基于画面拼接的子设备上传的拼接参数，对各子设备上传的特征信息进行拼接，从而实现对整体图片进行内容安全检测，能够有效处理画面拼接场景下由于图像分割导致的内容检测漏报问题，提高了内容安全检测的准确性。在一些实施例中，上述依据各子设备对应的拼接参数确定各子设备之间的拼接关系，可以包括：在拼接参数为子设备的拼接ID的情况下，依据各子设备的拼接ID确定各子设备之间的拼接关系；其中，对于任一画面拼接的子设备，该子设备的拼接ID用于指示该子设备在画面拼接的各子设备中的位置；或，在拼接参数为子设备的原始画面的边缘像素数据的情况下，依据各子设备对应的边缘像素数据，基于边缘相似性，确定各子设备之间的拼接关系。示例性的，由于子设备的拼接ID可以指示子设备在画面拼接的各子设备中的位置，因此，在拼接参数为子设备的拼接ID的情况下，服务端可以依据拼接ID确定各子设备之间的拼接关系。在拼接参数为子设备的原始画面的边缘像素数据的情况下，服务端可以依据各子设备对应的边缘像素数据，基于边缘相似性，确定各子设备之间的拼接关系。在一个示例中，上述依据各子设备对应的边缘像素数据，基于边缘相似性，确定各子设备之间的拼接关系，可以包括：对于目标子设备目标边缘的边缘像素数据，分别确定该目标边缘的边缘像素数据，与其它子设备的边缘像素数据之间的边缘相似性；其中，目标子设备为任一子设备，目标边缘为目标子设备的任一边缘；在该目标边缘的边缘像素数据，与任一其它子设备的任一边缘的边缘像素数据之间的边缘相似性超过阈值的情况下，确定该两条边缘满足拼接条件。示例性的，对于画面拼接的各子设备中任一设备的任一边缘，可以分别确定该目标边缘的边缘像素数据，与画面拼接的各子设备中除目标子设备之外的其它子设备的边缘像素数据之间的边缘相似性。示例性的，服务端可以基于预设的算子计算像素之间的差异度或梯度，确定两条边缘像素条之间的边缘相似性。其中，预设的算子可以包括但不限于Roberts算子、Prewitt算子、Sobel算子等。示例性的，在目标边缘的边缘像素数据，与任一其它子设备的任一边缘的边缘像素数据之间的边缘相似性超过阈值的情况下，可以确定该两条边缘满足拼接条件，即该两条边缘为对应的两个子设备的显示平面之间拼接的边缘。例如，假设子设备1的右侧边缘的边缘像素数据，与子设备2的左侧边缘的边缘像素数据之间的边缘相似性超过阈值，则在画面拼接过程中，子设备1显示的画面的右侧边缘与子设备2显示的画面的左侧边缘进行拼接。作为一种示例，各子设备的显示画面为矩形画面；对于目标子设备目标边缘的边缘像素数据，分别确定该目标边缘的边缘像素数据，与其它子设备的各边缘的边缘像素数据之间的边缘相似性，可以包括：对于目标子设备目标边缘的边缘像素数据，分别确定该目标边缘的边缘像素数据，与其它子设备的指定边缘的边缘像素数据之间的边缘相似性；其中，指定边缘为与该目标边缘属于相对侧。示例性的，以各子设备的显示画面为矩形画面为例。拼接画面的各子设备在上传边缘像素数据的情况下，可以指明各边缘像素数据为哪一侧的边缘像素数据。例如，子设备上传的边缘像素数据可以按照上下左右的顺序，对各侧的边缘像素数据进行排列。服务端在进行边缘相似性计算的过程中，可以针对长度相同，且属于相对侧的边缘进行边缘相似性计算。示例性的，相对侧包括上方和下方，或，左侧和右侧。例如，假设目标边缘为目标子设备的左侧边缘，则可以分别确定目标边缘的边缘像素数据，与其它子设备的右侧边缘之间的边缘相似性，以确定与目标边缘满足拼接条件的其它子设备的边缘。在一个示例中，在拼接参数为子设备的原始画面的边缘像素数据的情况下，本申请实施例提供的方法还可以包括：依据各子设备之间的拼接关系，确定各子设备的位置；依据各子设备的位置确定各子设备的拼接ID，并将各子设备的拼接ID反馈给对应的子设备。示例性的，服务端在按照上述方式确定了画面拼接的各子设备之间的拼接关系的情况下，可以依据各子设备之间的拼接关系，确定各子设备的位置，并依据各子设备的位置确定各子设备的拼接ID，并将各子设备的拼接ID反馈给对应的子设备。子设备接收到服务端反馈的拼接ID的情况下，可以记录该拼接ID，例如，将其保存在上述指定存储区域，在需要再次向服务端上传特征信息的情况下，可以以该拼接ID为拼接参数。为了使本领域技术人员更好地理解本申请实施例提供的技术方案，下面结合具体实例对本申请实施例提供的技术方案进行说明。该实施例提供一种轻量化内容安全检测方案，基于包括轻量化客户端和实时检测服务的架构实现。在待检测终端上安装轻量化客户端用于实时数据采集、初步特征处理、数据上报和接收处置方案，将图像数据处理为不可读的特征数据；实时检测服务则负责接收客户端上报的数据、并进行数据完整性判断与处理、内容安全检测和数据反馈下发。在该实施例中，可以不依赖客户端自主功能改造，自动化分布式实时监测多客户端的画面内容安全，将图像数据预处理工作下放到终端执行，极大地降低了主服务的计算压力，同时也提升了数据传输过程的安全性；创新性提出基于画面边缘相似性进行自动化数据拼接处理，有效解决了因为大尺寸像素拼屏分割导致的画面信息缺失不完整问题，提升了异常内容的检测成功率，保证了设备的安全。如图3所示，该实施例提供的内容安全检测方案可以包括以下步骤：S1、待检测终端自动化客户端部署与策略配置；S2、客户端实时数据采集与数据预处理；S3、服务端实时接收上报数据并进行完整性分析与处理；S4、内容安全检测与检测结果反馈下发；S5、终端自动化结果处置。下面结合优选实施例对各步骤的实现作进一步说明。S1、待检测终端自动化客户端部署与策略配置本步骤的目的是在待检测终端上部署客户端程序，用于数据采集、数据预处理、数据上报、检测结果接收和自动化处置。示例性的，终端可以包括但不限于操作系统、智慧屏幕或显示屏等。需要说明的是，本申请实施例提供的方案中，并不局限于终端上报检测数据，也可以是由其他服务上传待检测样本进行实时检测，如：信发系统将需要发布的信息提前进行内容安全检测，或服务端用户需要对本地保存的一些影像材料进行内容检测，都可以以新建任务的方式进行内容安全检测。1.1、由终端自主执行或服务端自动化下发方式，将内容检测客户端程序部署到待监测的待检测终端上。部署过程和部署完成后不影响终端设备的业务；1.2、客户端部署成功的情况下，可以在服务端进行批量策略配置，配置内容包括：数据采集周期、异常处置手段。S2、客户端实时数据采集与数据预处理本步骤是客户端程序在终端设备上进行数据采集，并对采集的图像数据进行数据预处理，即图像的特征提取，然后将提取的特征信息上报到服务端进行内容安全检测。需要说明的是，在实际应用过程中会出现终端需要展示的画面尺寸很大，通过多个终端屏幕进行拼接展示的情况，虽然展示的最终效果是一张完整的图片，但各个终端上采集画面数据只有完整画面的一部分，如果只检测单终端的画面，很可能会因为画面分割导致敏感内容漏检。2.1、数据实时采集：通过截屏或码流采集方式，采集终端画面数据；2.2、数据预处理：对采集到的图像数据进行特征提取，一方面将原始画面数据处理为满足服务端内容检测模型输入的格式，如：将画面数据处理为Fm*Fn的特征矩阵；其中，Fm、Fn指的是特征矩阵的维度；另一方面，对于终端属于画面拼接的子设备的情况，获取拼接ID，在未获取到拼接ID的情况下，需要将原始画面的边缘像素数据保留。示例性的，以矩形画面为例，保留4个边的原始像素数据：。E1指的是S3中边缘相似度计算算子的维度、Lt指的是矩形画面横向像素点数量、Lv指的是矩形画面竖向像素点数量；2.3、数据上报：将数据上报到检测服务，上报的数据包括]。示例性的，在未获取到拼接ID的情况下，例如，首次进行数据上报的状态下，拼接ID为空，边缘像素数据不为空；在获取到拼接ID的情况下，拼接ID不为空，边缘像素数据为空。示例性的，在当前终端不属于拼屏终端的情况下，拼接ID和边缘像素数据均为空。S3、服务端实时接收上报数据并进行完整性分析与处理本步骤是对客户端上报的数据进行完整性分析和处理，目的是能够对于拼屏画面数据进行自动化拼接，从而实现整个画面数据的检测，避免因为画面分割导致的漏检。需要说明的是，在进行画面拼接的过程中，若上报的数据中携带有当前终端所属拼接ID，则可以基于拼接ID进行特征信息拼接，不需要进行边缘相似性计算。此外，边缘相似性计算的目标是计算出两个像素条之间的相似性，得出一个具体的数值。示例性的，可以基于Roberts算子、Prewitt算子或Sobel算子等实现边缘相似性计算，基本原理是基于预设的算子计算像素之间的差异度或梯度。以Sobel算子为例，实现流程如下：3.1、对于终端上报的数据，在拼接ID和边缘像素数据均为空的情况下，进入S4进行内容安全检测；3.2、对于拼接ID不为空的数据，进入3.4；3.3、对于存在边缘像素数据的数据，需要确定终端的拼接ID。示例性的，可以对每个图像的四侧边缘基于边缘像素数据进行边缘相似性计算，判断两张图像是否属于被切割的完整画面；在相似性超过阈值的情况下，判断属于同一画面；否则，确定不属于同一画面。3.3.1、根据边缘像素数据的Lt和Lv划分横向拼接和纵向拼接群，同一个Lt的划分为一个竖向拼接群中，同一个Lv划分到一个横向拼接群中，即横向像素点数量相同的划分至同一个竖向拼接群，竖向像素点数量相同的划分至同一横向拼接群；3.3.2、在竖向拼接群中，计算每两个边缘像素数据上下像素边之间的边缘相似性，在边缘相似性超过阈值Threshold的情况下，认为数据属于同一画面，进行标记，完成本拼接群中所有画面的拼接信息提取Info_t；3.3.3、在横向拼接群中，计算每两个边缘像素数据左右像素边之间的边缘相似性，在边缘相似性超过阈值Threshold的情况下，认为数据属于同一画面，进行标记，完成本拼接群中所有画面的拼接信息提取Info_v；3.3.4、基于Info_t和Info_v进行全部画面的拼接，最终实现全部拼接屏画面的自动化拼接，全部终端画面自动化分配不同拼接ID。示例性的，拼接ID可以包括四部分：拼接群ID-拼接群终端数量-终端横向位置-终端竖向位置；其中，拼接群ID是唯一标识终端所属拼接群，拼接群终端数量指的是当前群所属拼接屏由多少块终端拼接而成，终端位置指的是当前终端所属区域，包括横向和竖向两个数据。例如，拼接ID可以是：0000001-16-4-3，指的是标记为0000001的拼接屏由16块屏组成，当前终端所处位置是横向第4纵向第3。3.4、基于拼接参数重构终端画面特征矩阵。例如，通过特征向量加权方式重新计算，得到新的特征矩阵Fmx*Fnx。需要说明的是，不同子画面对应的画面特征矩阵的权重可以相同，即可以直接对各子画面对应的特征矩阵进行拼接，得到新的特征矩阵；或者，拼接屏中非边缘屏的子画面的重要性可以更高，相应地，在进行特征矩阵拼接的情况下，非边缘屏的子画面对应特征矩阵的权重可以高于边缘屏的子画面对应的特征矩阵。S4、内容安全检测与检测结果反馈下发本步骤是对S3中处理完成后的特征数据进行内容安全检测，并反馈检测结果。需要说明的是，也可以是在依据内容安全检测结果确定显示内容存在异常的情况下向终端下发处理方案。4.1、基于S3中的特征矩阵进行内容安全检测，将特征矩阵输入预先训练好的检测模型中；示例性的，检测模型可以包括深度学习中的卷积神经网络模型、循环神经网络模型、多重神经网络模型，或，其他机器学习模型。其中，模型输出当前特征对应的画面是否包含敏感内容。4.2、服务端根据内容安全检测结果发送检测反馈。S5、终端自动化结果处置本步骤是终端设备对服务端下发的信息进行接收和处理，处理方案可以是由服务端下发，也可以是提前配置。例如，终端接收内容安全检测结果，在依据内容安全检测结果确定显示内容存在异常的情况下，按照对应的处理方案进行自动化处置，如：关机、息屏、屏幕遮盖等。以上对本申请提供的方法进行了描述。下面对本申请提供的装置进行描述：请参见图4，为本申请实施例提供的一种内容安全检测装置的结构示意图，其中，该内容安全检测装置可以部署于上述实施例中的目标设备，如图4所示，该内容安全检测装置可以包括：获取单元410，用于获取待检测图像数据；特征提取单元420，用于对所述待检测图像数据进行特征提取，得到所述待检测图像数据对应的特征信息；通信单元430，用于在所述目标设备为画面拼接的子设备的情况下，将所述特征信息以及所述目标设备对应的拼接参数上传至服务端，由所述服务端依据画面拼接的各子设备对应的拼接参数确定各子设备之间的拼接关系，依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接，并对拼接后的特征信息进行内容安全检测；所述通信单元430，还用于接收所述服务端发送的检测反馈。在一些实施例中，所述通信单元430将所述特征信息以及所述目标设备对应的拼接参数上传至服务端，包括：在获取到目标设备的拼接ID的情况下，以所述拼接ID为所述目标设备对应的拼接参数，将所述特征信息以及所述拼接ID上传至服务端；其中，对于任一画面拼接的子设备，该子设备的拼接ID用于指示该子设备在画面拼接的各子设备中的位置；或，在未获取到目标设备的拼接ID的情况下，以所述待检测图像数据的原始画面的边缘像素数据为所述目标设备对应的拼接参数，将所述特征信息以及边缘像素数据上传至服务端，以使所述服务端依据各子设备对应的边缘像素数据，基于边缘相似性，确定画面拼接的各子设备的位置，依据画面拼接的各子设备的位置确定各子设备的拼接ID，并将各子设备的拼接ID反馈给对应的子设备。在一些实施例中，所述待检测图像数据的原始画面的边缘像素数据包括所述待检测图像的原始画面边缘的预设数量行/列的像素数据。请参见图5，为本申请实施例提供的一种内容安全检测装置的结构示意图，其中，该内容安全检测装置可以部署于上述实施例中的服务端，如图5所示，该内容安全检测装置可以包括：通信单元510，用于接收画面拼接的各子设备上报的特征信息，以及，各子设备对应的拼接参数；其中，子设备上报的特征信息由该子设备对获取到的待检测图像数据进行特征提取得到；拼接单元520，用于依据各子设备对应的拼接参数确定各子设备之间的拼接关系，并依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接；检测单元530，用于对拼接后的特征信息进行内容安全检测；所述通信单元510，还用于向各子设备发送检测反馈。在一些实施例中，所述拼接单元520依据各子设备对应的拼接参数确定各子设备之间的拼接关系，包括：在所述拼接参数为子设备的拼接ID的情况下，依据各子设备的拼接ID确定各子设备之间的拼接关系；其中，对于任一画面拼接的子设备，该子设备的拼接ID用于指示该子设备在画面拼接的各子设备中的位置；或，在所述拼接参数为子设备的原始画面的边缘像素数据的情况下，依据各子设备对应的边缘像素数据，基于边缘相似性，确定各子设备之间的拼接关系。在一些实施例中，所述拼接单元520依据各子设备对应的边缘像素数据，基于边缘相似性，确定各子设备之间的拼接关系，包括：对于目标子设备目标边缘的边缘像素数据，分别确定该目标边缘的边缘像素数据，与其它子设备的边缘像素数据之间的边缘相似性；其中，所述目标子设备为任一子设备，所述目标边缘为所述目标子设备的任一边缘；在该目标边缘的边缘像素数据，与任一其它子设备的任一边缘的边缘像素数据之间的边缘相似性超过阈值的情况下，确定该两条边缘满足拼接条件。在一些实施例中，各子设备的显示画面为矩形画面；所述拼接单元520对于目标子设备目标边缘的边缘像素数据，分别确定该目标边缘的边缘像素数据，与其它子设备的各边缘的边缘像素数据之间的边缘相似性，包括：对于目标子设备目标边缘的边缘像素数据，分别确定该目标边缘的边缘像素数据，与其它子设备的指定边缘的边缘像素数据之间的边缘相似性；其中，所述指定边缘与该目标边缘属于相对侧。在一些实施例中，所述拼接单元520，还用于在所述拼接参数为子设备的原始画面的边缘像素数据的情况下，依据各子设备之间的拼接关系，确定各子设备的位置；依据各子设备的位置确定各子设备的拼接ID；所述通信单元510，还用于将各子设备的拼接ID反馈给对应的子设备。本申请实施例还提供一种电子设备，包括处理器和存储器，其中，存储器，用于存放计算机程序；处理器，用于执行存储器上所存放的程序时，实现上文描述的内容安全检测方法。请参见图6，为本申请实施例提供的一种电子设备的硬件结构示意图。该电子设备可包括处理器601、存储有机器可执行指令的存储器602。处理器601与存储器602可经由系统总线603通信。并且，通过读取并执行存储器602中与内容安全检测逻辑对应的机器可执行指令，处理器601可执行上文描述的内容安全检测方法。本文中提到的存储器602可以是任何电子、磁性、光学或其它物理存储装置，可以包含或存储信息，如可执行指令、数据，等等。例如，机器可读存储介质可以是：RAM、易失存储器、非易失性存储器、闪存、存储驱动器、固态硬盘、任何类型的存储盘，或者类似的存储介质，或者它们的组合。在一些实施例中，还提供了一种机器可读存储介质，如图6中的存储器602，该机器可读存储介质内存储有机器可执行指令，所述机器可执行指令被处理器执行时实现上文描述的内容安全检测方法。例如，所述机器可读存储介质可以是ROM、RAM、CD-ROM、磁带、软盘和光数据存储设备等。本申请实施例还提供了一种计算机程序产品，存储有计算机程序，并且当处理器执行该计算机程序时，促使处理器执行上文中描述的内容安全检测方法。本申请实施例还提供一种内容安全检测系统，包括：目标设备及服务端；所述目标设备为存在内容安全检测需求的设备；其中：所述目标设备，用于获取待检测图像数据；对所述待检测图像数据进行特征提取，得到所述待检测图像数据对应的特征信息；所述目标设备，还用于在所述目标设备为画面拼接的子设备的情况下，将所述特征信息以及所述目标设备对应的拼接参数上传至服务端；所述服务端，用于接收画面拼接的各子设备上报的特征信息，以及，各子设备对应的拼接参数；依据各子设备对应的拼接参数确定各子设备之间的拼接关系，并依据各子设备之间的拼接关系对各子设备上报的特征信息进行拼接；对拼接后的特征信息进行内容安全检测；向各子设备发送检测反馈。示例性的，目标设备上可以部署图4所示的内容安全检测装置，服务端上可以部署图5所示的内容安全检测装置，并按照上述实施例中描述的方式实现内容安全检测。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。以上所述仅为本申请的较佳实施例而已，并不用以限制本申请，凡在本申请的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本申请保护的范围之内。
