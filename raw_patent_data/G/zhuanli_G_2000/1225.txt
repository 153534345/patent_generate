标题title
一种车路协同服务系统
摘要abst
本申请涉及一种车路协同服务系统，包括：提供车路协同、无人车场景服务、交通服务，其中车路协同服务是由平台发布相关的车辆预警信息、信号灯信息等，全方位实施车车、车路动态实时信息交互，并在全时空动态交通信息采集与融合的基础上开展车辆主动安全控制和道路协同管理，充分实现人车路的有效协同，保证交通安全，提高通行效率，从而形成的安全、高效和环保的道路交通系统；判断弱势交通参与者与车辆之间碰撞风险，并在发生碰撞预警时进行相应的提示，可以提前预防和避免交通事故的发生，提高交通安全性和驾驶者的安全性，同时，该技术方案还能为车辆提供准确的周围环境感知信息，帮助驾驶者更好地做出决策和控制车辆行驶。
权利要求书clms
1.一种车路协同服务系统，其特征在于，包括：车路协同服务平台、智UI设备、服务后台以及显示装置，车路协同服务平台用于提供信号灯上车提示、绿波车速引导、闯红灯预警以及超速预警的服务，智UI设备用于获取车辆位置和航向角信息以及提供V2I预警以及感知结果，服务后台用于获取V2I信息、前方信号灯信息和车辆周边的交通参与者感知结果并反馈至智UI设备，显示装置通过弹窗显示信号灯上车提示、绿波车速引导、闯红灯预警、超速预警、V2I预警以及感知结果；其中，智UI设备获取感知结果的方法如下：智UI设备获取当前车辆位置和航向角信息并发送至车路协同服务平台，车路协同服务平台基于当前车辆位置和航向角信息获取周边感知信息并回传至智UI设备，所述周边感知信息包括所有周边感知对象的航向角、速度、和经纬度，所述周边感知对象包括弱势交通参与者和机动车，弱势交通参与者包括行人和非机动车，智UI设备基于接受到的信息，通过计算判断当前车辆是否存在碰撞可能，当存在碰撞可能时，执行碰撞预警，显示装置通过弹窗显示碰撞预警，所述显示装置设置在车辆内部，当不存在碰撞可能时，弹窗显示感知结果。2.根据权利要求1所述的一种车路协同服务系统，其特征在于，所述碰撞预警包括弱势交通参与者碰撞预警以及机动车碰撞预警，当行人或非机动车位置在车辆前方时则会在感知结果中展示；弱势交通参与者碰撞预警算法如下：计算其他物体相对本车航向角α，判断行人或非机动车是否在本车前方，判断行人或非机动车行进方向，判断行人或非机动车和本车是否存在发生碰撞的可能；判断行人或非机动车和本车是否存在发生碰撞可能的方法如下：如果行人或非机动车位于本车行进方向航向角向右偏离20度以内，且行人或非机动车行进方向为从右向左行进，则判定为可能发生碰撞；如果行人或非机动车位于本车行进方向航向角向左偏离20度以内，且行人或非机动车行进方向为从左向右行进，则判定为可能发生碰撞。3.根据权利要求2所述的一种车路协同服务系统，其特征在于，计算其他物体相对车辆航向角α的方法如下：第一步、计算其他物体和车辆相对经纬度的距离，具体如下：计算本车和相对物体经度距离：计算“本车经度，本车纬度”和“相对物体经度，本车纬度”两点距离，此距离记作X；计算本车和相对物体纬度距离：计算“本车经度，本车纬度”和“本车经度，相对物体纬度”两点距离，此距离记作Y；第二步、算出以本车为原点，正北向坐标系上相对物体位于哪个象限，具体如下：如果相对物体经度＞=本车经度，相对物体纬度＞本车纬度，那么是第一象限和Y轴上半部，此时相对角度α计算公式为α=arctan；如果相对物体经度＜本车经度，相对物体纬度＞本车纬度，那么是第二象限，此时相对角度α计算公式为α=360-arctan；如果相对物体经度=＜本车经度，相对物体纬度＜本车纬度，那么是第三象限和Y轴下半部，此时相对角度α计算公式为α=180+arctan；如果相对物体经度＞本车经度，相对物体纬度＜本车纬度，那么是第四象限，此时相对角度α计算公式为α=180-arctan；如果相对物体经度＞本车经度，相对物体纬度=本车纬度，那么是X轴上半部分，此时相对角度α=90；如果相对物体经度＜本车经度，相对物体纬度=本车纬度，那么是X轴下半部分，此时相对角度α=270；如果相对物体经度=本车经度，相对物体纬度=本车纬度，那么是原点，忽略此结果。4.根据权利要求3所述的一种车路协同服务系统，其特征在于，判断行人或非机动车是否在本车前方的方法如下：当同时满足以下条件时，判定行人或非机动车在本车前方：行人或非机动车距离本车距离在10米以内；行人或非机动车当前所在位置在本车行进方向航向角左右偏离20度以内，也就是相对角度＜=20或相对角度＞=340。5.根据权利要求4所述的一种车路协同服务系统，其特征在于，判断行人或非机动车行进方向的方法如下，其中，行人或非机动车在感知结果提示中只显示向左或向右行进：0＜=行人或非机动车航向角减去本车航向角＜=180：则判断为从左向右行进；-360＜=行人或非机动车航向角减去本车航向角＜=-180：则判断为从左向右行进；180＜行人或非机动车航向角减去本车航向角＜360：则判断为从右向左行进；-180＜行人或非机动车航向角减去本车航向角＜0：则判断为从右向左行进。6.根据权利要求5所述的一种车路协同服务系统，其特征在于，机动车碰撞预警算法如下：当机动车位于本车正前方，且本车速度-前方机动车速度＞10km/h时，则显示碰撞预警；机动车如果在本车后方则不显示，当满足如下条件时，判定机动车在本车后方：机动车距离本车距离在20米以内；机动车当前所在位置在本车行进方向反方向航向角左右偏离20度以内；机动车相对位置判断方法如下：相对角度＜=45或相对角度＞=315，判断机动车在本车正前方；45＜相对角度＜=135，判断机动车为本车右方；225＜=相对角度＜315，判断机动车为本车左方。7.根据权利要求6所述的一种车路协同服务系统，其特征在于，所述车路协同服务平台的工作流程如下：S1、判断车辆与路口之间的距离，当车辆与路口之间的距离小于等于150m，且路口有信号灯时执行步骤S2，否则不做任何处理；S2、判断路口信号灯是否存在计时装置，当存在时执行步骤S4，否则执行步骤S3；S3、判断车辆是否存在超速可能，当存在超速可能时，执行超速预警操作，当不存在超速可能时，执行信号灯上车操作；S4、判断当前信号灯颜色，当信号灯的颜色为绿色时，执行步骤S51，当信号灯的颜色为红色时，执行步骤S52，否则不做任何处理；S51、当车辆预期行驶距离大于车辆与信号灯之间的距离时，则车辆能够正常通过绿色信号灯，执行步骤S6，当车辆预期行驶距离小于等于车辆与信号灯之间的距离时，则绿色信号灯会变色，执行闯红灯预警操作，其中，所述车辆预期行驶距离=车辆当前车速*信号灯下次变化时间；S52、当车辆预期行驶距离大于车辆与信号灯之间的距离时，则车辆会闯过红色信号灯，执行闯红灯预警操作，当车辆预期行驶距离小于等于车辆与信号灯之间的距离时，则红色信号灯会变色，车辆不会闯过红色信号灯，不做任何操作；S6、判断车辆是否存在超速可能，当车辆存在超速可能时，执行超速预警操作，当车辆不存在超速可能时，执行绿波引导操作。8.根据权利要求7所述的一种车路协同服务系统，其特征在于，闯红灯预警的流程如下：获取车辆当前速度、车辆和信号灯之间的距离、车辆当前车道信号灯相位数据、信号灯计时时间；显示装置显示信号灯相位信息，当信号灯存在计时时间信息，则信号灯计时时间显示在信号灯相位信息下方，并显示车辆和信号灯之间的距离；显示装置显示闯红灯预警提示，根据车辆当前速度以及车速变化情况显示不同预警级别；闯红灯预警级别分为三级预警，根据不同情况分级提示，具体如下：三级预警：弹窗显示闯红灯预警；弹窗显示闯红灯预警，信号灯信息正常显示；文案显示：前方红灯，车速较快；文案显示时间：3秒；二级预警：弹窗显示闯红灯预警，信号灯信息闪烁显示；弹窗显示闯红灯预警，信号灯信息做闪烁提示；文案显示时间：3秒；文案：前方红灯，车速过快；一级预警：弹窗显示闯红灯预警，信号灯信息闪烁显示，输出语音报警；弹窗显示闯红灯预警，信号灯信息做闪烁显示；文案显示时间：3秒；语音播报时间：3秒内完成；文字显示文案：前方红灯，车速过快，请注意；语音告警文案：前方红灯，车速过快，请注意。9.根据权利要求8所述的一种车路协同服务系统，其特征在于，告警级别判断方法如下：当前车速＞80km/m，且车速变化为提速或未减速时，距离信号灯150m时执行二级预警，距离信号灯100m、50m、20m时执行一级预警；当前车速＞80km/m，且车速变化为减速时，距离信号灯150m、100m时执行二级预警，距离信号灯50m、20m时执行一级预警；当前车速在40至80km/m，且车速变化为提速或未减速时，距离信号灯150m时执行三级预警，距离信号灯100m、50m时执行二级预警，距离信号灯20m时执行一级预警；当前车速在40至80km/m，且车速变化为减速时，距离信号灯100m时执行三级预警，距离信号灯50m、20m时执行二级预警；当前车速在20至40km/m，且车速变化为提速或未减速时，距离信号灯50m时执行三级预警，距离信号灯20m时执行二级预警；当前车速在20至40km/m，且车速变化为减速时，距离信号灯20m时执行三级预警；车辆提速和降速判断方法如下：记录上一秒车辆速度，如果上一秒速度大于当前速度5km/h，则判断为降速，如果上一秒速度和当前速度差在5km/h以内，则判断为未减速，如果上一秒速度小于当前速度5km/h，则判断为提速。10.根据权利要求1所述的一种车路协同服务系统，其特征在于，V2I预警内容包括道路危险提示、前方拥堵提醒、车内标牌。
说明书desc
技术领域本申请涉及车路协同技术领域，尤其涉及一种车路协同服务系统。背景技术随着经济的不断发展，交通越来越便利，越来越多的汽车进入普通家庭中，使得人们的生活质量不断提高，随着汽车的保有量急剧上升，更多的出行方式由步行、汽车改成了驾车，车辆的急剧增加导致了交通事故的频频发生，尤其在高速公路行车，驾驶习惯、天气、行车距离等都会成为交通事故的导火索，高速公路上的小问题如果不能好好处理，造成的危害可能被放大到极限。因此，高速公路行驶，一定要采取有效的解决方案提高交通安全水平，降低事故发生的可能性。目前，针对前方故障车辆及交通事故车辆，后方车辆采用前方碰撞预警系统，通过雷达系统监测前方，判断本车与前车的距离、方位及相对速度，当存在碰撞危险时对驾驶员进行告警。但是，现有的技术方案存在以下缺点：只通过本车车速与其他物体之间的位置距离进行判断，未能参考其他物体的运动情况，仅在将要发生碰撞时进行碰撞提示，留给驾驶员的思考时间过短或预警时间过早。公开于本发明背景技术部分的信息仅仅旨在加深对本发明的一般背景技术的理解，而不应当被视为承认或以任何形式暗示该信息构成已为本领域技术人员所公知的现有技术。发明内容为了解决上述背景技术提到的技术问题或者至少部分地解决上述技术问题，本申请提供一种车路协同服务系统，包括：一种车路协同服务系统，其特征在于，包括：车路协同服务平台、智UI设备、服务后台以及显示装置，车路协同服务平台用于提供信号灯上车提示、绿波车速引导、闯红灯预警以及超速预警的服务，智UI设备用于获取车辆位置和航向角信息以及提供V2I预警以及感知结果，服务后台用于获取V2I信息、前方信号灯信息和车辆周边的交通参与者感知结果并反馈至智UI设备，显示装置通过弹窗显示信号灯上车提示、绿波车速引导、闯红灯预警、超速预警、V2I预警以及感知结果；其中，智UI设备获取感知结果的方法如下：智UI设备获取当前车辆位置和航向角信息并发送至车路协同服务平台，车路协同服务平台基于当前车辆位置和航向角信息获取周边感知信息并回传至智UI设备，所述周边感知信息包括所有周边感知对象的航向角、速度、和经纬度，所述周边感知对象包括弱势交通参与者和机动车，弱势交通参与者包括行人和非机动车，智UI设备基于接受到的信息，通过计算判断当前车辆是否存在碰撞可能，当存在碰撞可能时，执行碰撞预警，显示装置通过弹窗显示碰撞预警，所述显示装置设置在车辆内部，当不存在碰撞可能时，弹窗显示感知结果。所述碰撞预警包括弱势交通参与者碰撞预警以及机动车碰撞预警，当行人或非机动车位置在车辆前方时则会在感知结果中展示；弱势交通参与者碰撞预警算法如下：计算其他物体相对本车航向角α，判断行人或非机动车是否在本车前方，判断行人或非机动车行进方向，判断行人或非机动车和本车是否存在发生碰撞的可能；判断行人或非机动车和本车是否存在发生碰撞可能的方法如下：如果行人或非机动车位于本车行进方向航向角向右偏离20度以内，且行人或非机动车行进方向为从右向左行进，则判定为可能发生碰撞；如果行人或非机动车位于本车行进方向航向角向左偏离20度以内，且行人或非机动车行进方向为从左向右行进，则判定为可能发生碰撞。计算其他物体相对车辆航向角α的方法如下：第一步、计算其他物体和车辆相对经纬度的距离，具体如下：计算本车和相对物体经度距离：计算“本车经度，本车纬度”和“相对物体经度，本车纬度”两点距离，此距离记作X；计算本车和相对物体纬度距离：计算“本车经度，本车纬度”和“本车经度，相对物体纬度”两点距离，此距离记作Y；第二步、算出以本车为原点，正北向坐标系上相对物体位于哪个象限，具体如下：如果相对物体经度＞=本车经度，相对物体纬度＞本车纬度，那么是第一象限和Y轴上半部，此时相对角度α计算公式为α=arctan；如果相对物体经度＜本车经度，相对物体纬度＞本车纬度，那么是第二象限，此时相对角度α计算公式为α=360-arctan；如果相对物体经度=＜本车经度，相对物体纬度＜本车纬度，那么是第三象限和Y轴下半部，此时相对角度α计算公式为α=180+arctan；如果相对物体经度＞本车经度，相对物体纬度＜本车纬度，那么是第四象限，此时相对角度α计算公式为α=180-arctan；如果相对物体经度＞本车经度，相对物体纬度=本车纬度，那么是X轴上半部分，此时相对角度α=90；如果相对物体经度＜本车经度，相对物体纬度=本车纬度，那么是X轴下半部分，此时相对角度α=270；如果相对物体经度=本车经度，相对物体纬度=本车纬度，那么是原点，忽略此结果。判断行人或非机动车是否在本车前方的方法如下：当同时满足以下条件时，判定行人或非机动车在本车前方：行人或非机动车距离本车距离在10米以内；行人或非机动车当前所在位置在本车行进方向航向角左右偏离20度以内，也就是相对角度＜=20或相对角度＞=340。判断行人或非机动车行进方向的方法如下，其中，行人或非机动车在感知结果提示中只显示向左或向右行进：0＜=行人或非机动车航向角减去本车航向角＜=180：则判断为从左向右行进；-360＜=行人或非机动车航向角减去本车航向角＜=-180：则判断为从左向右行进；180＜行人或非机动车航向角减去本车航向角＜360：则判断为从右向左行进；-180＜行人或非机动车航向角减去本车航向角＜0：则判断为从右向左行进。其他碰撞预警算法如下：当机动车位于本车正前方，且本车速度-前方机动车速度＞10km/h时，则显示碰撞预警；机动车如果在本车后方则不显示，当满足如下条件时，判定机动车在本车后方：机动车距离本车距离在20米以内；机动车当前所在位置在本车行进方向反方向航向角左右偏离20度以内；机动车相对位置判断方法如下：相对角度＜=45或相对角度＞=315，判断机动车在本车正前方；45＜相对角度＜=135，判断机动车为本车右方；225＜=相对角度＜315，判断机动车为本车左方。所述车路协同服务平台的工作流程如下：S1、判断车辆与路口之间的距离，当车辆与路口之间的距离小于等于150m，且路口有信号灯时执行步骤S2，否则不做任何处理；S2、判断路口信号灯是否存在计时装置，当存在时执行步骤S4，否则执行步骤S3；S3、判断车辆是否存在超速可能，当存在超速可能时，执行超速预警操作，当不存在超速可能时，执行信号灯上车操作；S4、判断当前信号灯颜色，当信号灯的颜色为绿色时，执行步骤S51，当信号灯的颜色为红色时，执行步骤S52，否则不做任何处理；S51、当车辆预期行驶距离大于车辆与信号灯之间的距离时，则车辆能够正常通过绿色信号灯，执行步骤S6，当车辆预期行驶距离小于等于车辆与信号灯之间的距离时，则绿色信号灯会变色，执行闯红灯预警操作，其中，所述车辆预期行驶距离=车辆当前车速*信号灯下次变化时间；S52、当车辆预期行驶距离大于车辆与信号灯之间的距离时，则车辆会闯过红色信号灯，执行闯红灯预警操作，当车辆预期行驶距离小于等于车辆与信号灯之间的距离时，则红色信号灯会变色，车辆不会闯过红色信号灯，不做任何操作；S6、判断车辆是否存在超速可能，当车辆存在超速可能时，执行超速预警操作，当车辆不存在超速可能时，执行绿波引导操作。闯红灯预警的流程如下：获取车辆当前速度、车辆和信号灯之间的距离、车辆当前车道信号灯相位数据、信号灯计时时间；显示装置显示信号灯相位信息，当信号灯存在计时时间信息，则信号灯计时时间显示在信号灯相位信息下方，并显示车辆和信号灯之间的距离；显示装置显示闯红灯预警提示，根据车辆当前速度以及车速变化情况显示不同预警级别。闯红灯预警分三级预警，根据不同情况分级提示，具体如下：三级预警：弹窗显示闯红灯预警；弹窗显示闯红灯预警，信号灯信息正常显示；文案显示：前方红灯，车速较快；文案显示时间：3秒；二级预警：弹窗显示闯红灯预警，信号灯信息闪烁显示；弹窗显示闯红灯预警，信号灯信息做闪烁提示；文案显示时间：3秒；文案：前方红灯，车速过快；一级预警：弹窗显示闯红灯预警，信号灯信息闪烁显示，输出语音报警；弹窗显示闯红灯预警，信号灯信息做闪烁显示；文案显示时间：3秒；语音播报时间：3秒内完成；文字显示文案：前方红灯，车速过快，请注意；语音告警文案：前方红灯，车速过快，请注意；告警级别判断方法如下：当前车速＞80km/m，且车速变化为提速或未减速时，距离信号灯150m时执行二级预警，距离信号灯100m、50m、20m时执行一级预警；当前车速＞80km/m，且车速变化为减速时，距离信号灯150m、100m时执行二级预警，距离信号灯50m、20m时执行一级预警；当前车速在40至80km/m，且车速变化为提速或未减速时，距离信号灯150m时执行三级预警，距离信号灯100m、50m时执行二级预警，距离信号灯20m时执行一级预警；当前车速在40至80km/m，且车速变化为减速时，距离信号灯100m时执行三级预警，距离信号灯50m、20m时执行二级预警；当前车速在20至40km/m，且车速变化为提速或未减速时，距离信号灯50m时执行三级预警，距离信号灯20m时执行二级预警；当前车速在20至40km/m，且车速变化为减速时，距离信号灯20m时执行三级预警。其特征在于，车辆提速和降速判断方法如下：记录上一秒车辆速度，如果上一秒速度大于当前速度5km/h，则判断为降速，如果上一秒速度和当前速度差在5km/h以内，则判断为未减速，如果上一秒速度小于当前速度5km/h，则判断为提速。本申请实施例提供的上述技术方案与现有技术相比具有如下优点：本申请实施例提供的一种车路协同服务系统，提供车路协同、无人车场景服务、交通服务，其中车路协同服务是由平台发布相关的车辆预警信息、信号灯信息等，全方位实施车车、车路动态实时信息交互，并在全时空动态交通信息采集与融合的基础上开展车辆主动安全控制和道路协同管理，充分实现人车路的有效协同，保证交通安全，提高通行效率，从而形成的安全、高效和环保的道路交通系统；判断弱势交通参与者与车辆之间碰撞风险，并在发生碰撞预警时进行相应的提示，可以提前预防和避免交通事故的发生，提高交通安全性和驾驶者的安全性，同时，该技术方案还能为车辆提供准确的周围环境感知信息，帮助驾驶者更好地做出决策和控制车辆行驶。附图说明此处的附图被并入说明书中并构成本说明书的一部分，示出了符合本发明的实施例，并与说明书一起用于解释本发明的原理。为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，对于本领域普通技术人员而言，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例提供的一种车路协同服务系统的车路协同服务平台工作流程图；图2为本申请实施例提供的一种车路协同服务系统的提供信号灯上车提示流程图；图3为本申请实施例提供的一种车路协同服务系统的绿波车速引导流程图；图4为本申请实施例提供的一种车路协同服务系统的闯红灯预警流程图；图5为本申请实施例提供的一种车路协同服务系统的超速预警流程图；图6为本申请实施例提供的一种车路协同服务系统的弹窗示意图。具体实施方式为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本申请的一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都属于本申请保护的范围。为了便于理解，下面对本申请实施例提供的一种车路协同服务系统进行详细介绍，如图1所示，包括：车路协同服务平台、智UI设备、服务后台以及显示装置，所述车路协同服务平台提供信号灯上车提示、绿波车速引导、闯红灯预警以及超速预警的服务，智UI设备用于获取车辆位置和航向角信息，服务后台用于获取V2I信息、前方信号灯信息和车辆周边的交通参与者感知结果并反馈至智UI设备，智UI设备提供V2I预警以及感知结果，显示装置用于显示信号灯上车提示、绿波车速引导、闯红灯预警、超速预警、V2I预警以及感知结果。其中，所述车路协同服务平台的工作流程如下：S1、判断车辆与路口之间的距离，当车辆与路口之间的距离小于等于150m，且路口有信号灯时执行步骤S2，否则不做任何处理；S2、判断路口信号灯是否存在计时装置，当存在时执行步骤S4，否则执行步骤S3；S3、判断车辆是否存在超速可能，当存在超速可能时，执行超速预警操作，当不存在超速可能时，执行信号灯上车操作；S4、判断当前信号灯颜色，当信号灯的颜色为绿色时，执行步骤S51，当信号灯的颜色为红色时，执行步骤S52，否则不做任何处理；S51、当车辆预期行驶距离大于车辆与信号灯之间的距离时，则车辆能够正常通过绿色信号灯，执行步骤S6，当车辆预期行驶距离小于等于车辆与信号灯之间的距离时，则绿色信号灯会变色，执行闯红灯预警操作，其中，所述车辆预期行驶距离=车辆当前车速*信号灯下次变化时间；S52、当车辆预期行驶距离大于车辆与信号灯之间的距离时，则车辆会闯过红色信号灯，执行闯红灯预警操作，当车辆预期行驶距离小于等于车辆与信号灯之间的距离时，则红色信号灯会变色，车辆不会闯过红色信号灯，不做任何操作；S6、判断车辆是否存在超速可能，当车辆存在超速可能时，执行超速预警操作，当车辆不存在超速可能时，执行绿波引导操作。其中，如图2所示，信号灯上车提示的流程如下：获取车辆当前速度、车辆和信号灯之间的距离、车辆当前车道信号灯相位数据、信号灯计时时间，显示装置显示信号灯相位信息，当信号灯存在计时时间信息，则信号灯计时时间显示在信号灯相位信息下方，并显示车辆和信号灯之间的距离。优选的，智UI设备通过网关接收车辆当前位置周边的信号灯实时数据，接收频率为1秒/次。优选的，如图6所示，显示装置以弹窗形式显示提示信息，弹窗上方位置为前方信号灯，前方信号灯下方显示车辆当前位置与信号灯之间的距离，弹窗中间位置显示各车道信息，各车道信息包括各车道对应的信号灯的颜色以及信号灯计时，弹窗下方位置为关闭按钮。如图3所示，绿波车速引导的流程如下：获取车辆当前速度、车辆和信号灯之间的距离、车辆当前车道信号灯相位数据、信号灯计时时间；显示装置显示信号灯相位信息，显示装置显示信号灯相位信息，当信号灯存在计时时间信息，则信号灯计时时间显示在信号灯相位信息下方，并显示车辆和信号灯之间的距离；显示装置显示绿灯提醒，并对车道进行动画提示。优选的，智UI设备通过网关接收车辆当前位置周边的信号灯实时数据，接收频率为1秒/次，智UI设备根据信号灯相位数据，计算出车辆在绿灯周期内通过路口应该保持的车速，如果在可行范围内，则智UI设备计算出车辆需要保持的行车速度，并弹窗显示绿波车速引导。优选的，显示装置以弹窗形式显示提示信息，弹窗中间位置显示各车道信息，各车道信息包括各车道对应的信号灯的颜色以及信号灯计时，当前车道方向绿灯高亮显示并闪烁提醒。如图4所示，闯红灯预警的流程如下：获取车辆当前速度、车辆和信号灯之间的距离、车辆当前车道信号灯相位数据、信号灯计时时间；显示装置显示信号灯相位信息，当信号灯存在计时时间信息，则信号灯计时时间显示在信号灯相位信息下方，并显示车辆和信号灯之间的距离；显示装置显示闯红灯预警提示，根据车辆当前速度以及车速变化情况显示不同预警级别。优选的，智UI设备通过网关接收车辆当前位置周边的信号灯实时数据，接收频率为1秒/次，智UI设备根据信号灯相位数据，计算出车辆是否存在闯红灯的风险，如果存在，则在智UI上显示“闯红灯预警”信息。优选的，显示装置以弹窗形式显示提示信息，弹窗上方显示闯红灯预警，闯红灯预警下方显示车辆当前位置与信号灯之间的距离，弹窗中间位置显示各车道信息，各车道信息包括各车道对应的信号灯的颜色以及信号灯计时，当前车道方向红灯灯高亮显示并闪烁提醒，弹窗下方显示车辆当前速度。更优选的，闯红灯预警分三级预警，根据不同情况分级提示，具体如下：三级预警：弹窗显示闯红灯预警；弹窗显示闯红灯预警，信号灯信息正常显示。文案显示时间：3秒。文案：前方红灯，车速较快。二级预警：弹窗显示闯红灯预警，信号灯信息闪烁显示；弹窗显示闯红灯预警，信号灯信息做闪烁提示。文案显示时间：3秒。文案：前方红灯，车速过快！一级预警：弹窗显示闯红灯预警，信号灯信息闪烁显示，输出语音报警；弹窗显示闯红灯预警，信号灯信息做闪烁显示。文案显示时间：3秒语音播报时间：3秒内完成文字显示文案：前方红灯，车速过快，请注意！语音告警文案：前方红灯，车速过快，请注意！优选的，告警级别判断方法如下表1所示。表1 告警级别判断表其中，车辆提速和降速判断方法如下：记录上一秒车辆速度，如果上一秒速度大于当前速度5km/h，则判断为降速，如果上一秒速度和当前速度差在5km/h以内，则判断为未减速，如果上一秒速度小于当前速度5km/h，则判断为提速。产生告警后的处理方法如下：如果第二次告警和上次告警时间差＜3秒，且告警级别没有上升，则不再展示新告警；如果第二次告警和上次告警时间差＜3秒，且告警级别上升，则展示新告警；如果第二次告警和上次告警时间差≧3秒，则展示新告警。如图5所示，超速预警的流程如下：获取车辆当前速度、车辆当前位置限速信息；显示装置显示超速预警。优选的，智UI设备通过网关接收车辆前方限速提醒，智UI设备根据不同限速提醒级别进行限速预警展示，闯红灯预警级别高于限速预警，如果产生闯红灯预警后，则不进行限速预警展示。其中，限速提醒级别具体如下：超速：如果当前车速＞=限速，则弹窗展示当前车速和限速信息3秒钟，语音播报提示信息，语音播报时不能播报其他信息，设计图需要突出展现出当前已超速；未超速：如果当前车速＜限速，则弹窗展示当前车速和限速信息3秒钟。V2I预警的流程如下：智UI设备收到V2I信息后，在信息提示区展示预警信息。V2I预警内容包括：道路危险提示，文字展示3秒钟，文案由接口获取，同样信息1分钟只播报一次；前方拥堵提醒，文字展示3秒钟，文案由接口获取，同样信息1分钟内只播报一次。车内标牌，文字展示3秒钟，同样信息1分钟只播报一次，车内标牌中Title、图标和标牌内容均从后端获取。感知结果的获取方法如下：智UI设备用于获取当前车辆位置和航向角信息并发送至车路协同服务平台，车路协同服务平台获取当前车辆信息和周边感知信息并回传至智UI设备，所述周边感知信息包括所有周边感知对象的航向角、速度、和经纬度，智UI设备基于接受到的信息，通过计算判断当前车辆和其他物体是否存在碰撞可能，当存在碰撞可能时，则通过显示装置弹窗显示碰撞预警，当不存在碰撞可能时，弹窗显示感知结果；其中，碰撞预警包括弱势交通参与者碰撞预警以及其他碰撞预警，弱势交通参与者包括行人和非机动车，当行人或非机动车当前位置在车辆前方时则会在感知结果中展示；弱势交通参与者碰撞预警算法如下：计算其他物体相对本车航向角α，判断行人或非机动车是否在本车前方，判断行人或非机动车行进方向，判断行人或非机动车和本车是否存在发生碰撞的可能。其中，计算其他物体相对车辆航向角α的方法如下：第一步、计算其他物体和车辆相对经纬度的距离，具体如下：计算本车和相对物体经度距离：计算“本车经度，本车纬度”和“相对物体经度，本车纬度”两点距离，此距离记作X；计算本车和相对物体纬度距离：计算“本车经度，本车纬度”和“本车经度，相对物体纬度”两点距离，此距离记作Y；第二步、算出以本车为原点，正北向坐标系上相对物体位于哪个象限，具体如下：a.如果相对物体经度＞=本车经度，相对物体纬度＞本车纬度，那么是第一象限和Y轴上半部，此时相对角度α计算公式为α=arctan；b.如果相对物体经度＜本车经度，相对物体纬度＞本车纬度，那么是第二象限，此时相对角度α计算公式为α=360-arctan；c.如果相对物体经度=＜本车经度，相对物体纬度＜本车纬度，那么是第三象限和Y轴下半部，此时相对角度α计算公式为α=180+arctan；d.如果相对物体经度＞本车经度，相对物体纬度＜本车纬度，那么是第四象限，此时相对角度α计算公式为α=180-arctan；e.如果相对物体经度＞本车经度，相对物体纬度=本车纬度，那么是X轴上半部分，此时相对角度α=90；f.如果相对物体经度＜本车经度，相对物体纬度=本车纬度，那么是X轴下半部分，此时相对角度α=270；g.如果相对物体经度=本车经度，相对物体纬度=本车纬度，那么是原点，忽略此结果。其中，当满足以下条件时，判定行人或非机动车在本车前方：1.行人或非机动车距离本车距离在10米以内；2.行人或非机动车当前所在位置在本车行进方向航向角左右偏离20度以内，也就是相对角度＜=20或相对角度＞=340。行人或非机动车行进方向判断方法如下，其中，行人或非机动车在感知结果提示中只显示向左或向右行进：0＜=行人或非机动车航向角减去本车航向角＜=180：则判断为从左向右行进；-360＜=行人或非机动车航向角减去本车航向角＜=-180：则判断为从左向右行进；180＜行人或非机动车航向角减去本车航向角＜360：则判断为从右向左行进；-180＜行人或非机动车航向角减去本车航向角＜0：则判断为从右向左行进。判断行人或非机动车和本车是否存在发生碰撞可能的方法如下：如果行人或非机动车本车行进方向航向角向右偏离20度以内，且行人或非机动车行进方向为从右向左行进，则判定为可能发生碰撞；如果行人或非机动车本车行进方向航向角向左偏离20度以内，且行人或非机动车行进方向为从左向右行进，则判定为可能发生碰撞。其他碰撞预警算法如下：机动车如果在本车后方则不显示，机动车一律显示为车头正向上。当满足如下条件时，判定机动车在本车后方：机动车距离本车距离在20米以内；机动车当前所在位置在本车行进方向反方向航向角左右偏离20度以内。机动车相对位置判断方法如下：相对角度＜=45或相对角度＞=315，判断为在正前方；45＜相对角度＜=135，判断为在右方；225＜=相对角度＜315，判断为在左方。当满足以下条件时，判定机动车存在碰撞预警：当机动车位于本车正前方，且本车速度-前车速度＞10km/h时，则显示碰撞预警。弱势交通参与者碰撞预警算法：该算法用于判断行人、非机动车等弱势交通参与者与车辆之间是否存在碰撞风险。通过计算相对经纬度距离和相对角度，确定弱势交通参与者相对于车辆的位置和方向，从而进行碰撞预警提示。碰撞预警弹窗显示效果设计：根据感知结果中的数据，设计弹窗的显示效果，包括标题、图标、信息内容等。弹窗持续3秒钟，期间如果有新的碰撞预警或感知信息，则更新弹窗内信息，重新计时。感知结果数据对比和处理：将当前位置和航向角信息发送给后端，接收后端传输的当前车辆信息和周边感知信息。对数据进行对比计算，判断是否存在碰撞可能和其他物体的相对位置关系，并根据情况在屏幕上展示相应的警示信息。弱势交通参与者行进方向判断方法：根据行人或非机动车与车辆之间的相对位置和角度关系，判断其行进方向是否为从左向右或从右向左。根据不同的情况，确定可能发生碰撞的可能性。车辆相对位置判断方法：根据车辆与周围物体的距离和相对角度关系，判断车辆是否位于其他物体的前方或后方。根据不同的情况，确定是否需要进行碰撞告警或其他操作。碰撞告警条件判断：当发生碰撞预警时，根据车辆速度与其他物体的速度差等条件，判断是否标记为可能碰撞。根据不同的阈值和判断标准，确定车辆之间是否会发生实际碰撞。需要说明的是，在本文中，诸如“第一”和“第二”等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。以上所述仅是本发明的具体实施方式，使本领域技术人员能够理解或实现本发明。对这些实施例的多种修改对本领域的技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本发明的精神或范围的情况下，在其它实施例中实现。因此，本发明将不会被限制于本文所示的这些实施例，而是要符合与本文所申请的原理和新颖特点相一致的最宽的范围。
