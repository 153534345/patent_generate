标题title
一种集群控制系统及方法
摘要abst
本申请提供了一种集群控制系统及方法，应用于数据处理技术领域。先通过控制单元设置集群的初始参数；初始参数用于指示所述集群被划分的子集群的数量；对于一个子集群，子集群由主节点和其他节点构成；然后利用主节点根据所属子集群的目标状态信息确定本节点的第一行为，并执行第一行为，并与所属子集群中的其他节点通信以共享第一行为；最后利用其他节点与主节点通信以获取第一行为，根据第一行为和目标状态信息确定其他节点的第二行为，并执行第二行为。通过增加子集群的概念，使得个体的行为通过控制子集群中的主节点和利用主节点控制其他节点实现，达到了简化个体计算量的效果。可以不影响群体行为效果的同时提高运行效率，使画面流畅显示。
权利要求书clms
1.一种集群控制系统，其特征在于，包括：控制单元，用于设置集群的初始参数；所述初始参数用于指示所述集群被划分的子集群的数量；对于一个子集群，所述子集群由主节点和其他节点构成；所述主节点，用于根据所属子集群的目标状态信息确定本节点的第一行为，并执行所述第一行为，并与所属子集群中的其他节点通信以共享所述第一行为；所述所属子集群的目标状态信息包括追逐状态、徘徊状态和逃离状态中的至少一个；所述其他节点，用于与所述主节点通信以获取所述第一行为，根据所述第一行为和所述目标状态信息确定所述其他节点的第二行为，并执行所述第二行为。2.根据权利要求1所述的系统，其特征在于，所述控制单元具体用于：根据所述集群的初始参数将所述集群划分为N个子集群；每个子集群包括M个节点，将每个子集群中M个节点中的任意一个节点设置为所属子集群的主节点；所述N和M为正整数。3.根据权利要求1所述的系统，其特征在于，当所述所属子集群的目标状态信息为追逐状态时，所述主节点具体用于：响应于接收的向第一目标位置移动的指令，获取第一目标位置信息，并与所属子集群中的其他节点通信以共享所述第一目标位置信息和追逐状态；根据所述第一目标位置信息确定本节点与所述第一目标位置的第一目标位置矢量；与所述集群的其他子集群的主节点通信以获取所述集群的其他子集群的主节点的状态信息；所述集群的其他子集群的主节点的状态信息包括其他子集群的主节点的位置信息和速度矢量；根据所述集群的其他子集群的主节点的状态信息确定本节点的速度矢量；根据所述第一目标位置矢量和所述本节点的速度矢量确定本节点的第一补充速度矢量；根据所述本节点的速度矢量和第一补充速度矢量确定本节点的第一行为。4.根据权利要求1所述的系统，其特征在于，当所述所属子集群的目标状态信息为徘徊状态时，所述主节点具体用于：设置第二目标位置并获取所述第二目标位置的第二目标位置信息，并与所属子集群中的其他节点通信以共享所述第二目标位置信息和徘徊状态；根据所述第二目标位置信息确定本节点与所述第二目标位置的第二目标位置矢量；与所述集群的其他子集群的主节点通信以获取所述集群的其他子集群的主节点的状态信息；所述集群的其他子集群的主节点的状态信息包括其他子集群的主节点的位置信息和速度矢量；根据所述集群的其他子集群的主节点的状态信息确定本节点的速度矢量；根据预设第二补充速度权重、所述第二目标位置矢量和所述本节点的速度矢量确定本节点的第二补充速度矢量；根据所述第二补充速度矢量和所述本节点的速度矢量确定本节点的第一行为。5.根据权利要求1所述的系统，其特征在于，当所述所属子集群的目标状态信息为逃离状态时，所述主节点具体用于：当检测到目标障碍物时获取所述目标障碍物的位置信息，并与所属子集群中的其他节点通信以共享所述目标障碍物的位置信息和逃离状态；根据所述目标障碍物的位置信息确定目标障碍物与本节点的第三目标位置矢量；与所述集群的其他子集群的主节点通信以获取所述集群的其他子集群的主节点的状态信息；所述集群的其他子集群的主节点的状态信息包括其他子集群的主节点的位置信息和速度矢量；根据所述集群的其他子集群的主节点的状态信息确定本节点的速度矢量；根据第一预设逃离速度权重、第三目标位置矢量和本节点的速度矢量确定本节点的逃离速度矢量；根据所述逃离速度矢量和所述本节点的速度矢量确定本节点的第一行为。6.根据权利要求3所述的系统，其特征在于，所述其他节点具体用于：与所述主节点通信以获取所述主节点的位置信息，根据所述主节点的位置信息和本节点的位置信息确定主节点与本节点的位置矢量，基于预设的跟随系数和跟随系数权重得到本节点的跟随矢量；与所述主节点通信以获取所述主节点的第一行为，根据所述主节点的第一行为得到队列速度矢量，基于预设队列权重系数、所述队列速度矢量和本节点的速度矢量确定本节点的队列矢量；所述其他节点至少包括第一节点和第二节点，所述其他节点中的第一节点与所述其他节点中的第二节点通信以获取所述第二节点的位置信息，根据所述第二节点的位置信息和第一节点的位置信息确定第二节点与第一节点的位置矢量，基于第二节点与第一节点的位置矢量确定第一节点的间隔矢量；根据所述本节点的跟随矢量、所述本节点的队列矢量和所述本节点的间隔矢量确定本节点的第二行为。7.根据权利要求4所述的系统，其特征在于，所述其他节点具体用于：与所述主节点通信以获取所述主节点的位置信息，根据所述主节点的位置信息和本节点的位置信息确定主节点与本节点的位置矢量，基于预设的跟随系数和跟随系数权重得到本节点的跟随矢量；与所述主节点通信以获取所述主节点的第一行为，根据所述主节点的第一行为得到队列速度矢量，基于预设队列权重系数、所述队列速度矢量和本节点的速度矢量确定本节点的队列矢量；所述其他节点至少包括第一节点和第二节点，所述其他节点中的第一节点与所述其他节点中的第二节点通信以获取所述第二节点的位置信息，根据所述第二节点的位置信息和第一节点的位置信息确定第二节点与第一节点的位置矢量，基于第二节点与第一节点的位置矢量确定第一节点的间隔矢量；与所述主节点通信以获取所述第二目标位置信息、徘徊状态和第二补充速度矢量，根据所述第二目标位置信息和本节点的位置信息确定本节点与第二目标位置的第四目标位置矢量；设置第五目标位置并获取所述第五目标位置的第五目标位置信息，根据所述第五目标位置信息确定本节点与所述第五目标位置的第五目标位置矢量；基于预设徘徊目标权重、第四目标位置矢量和第五目标位置矢量确定第六目标位置矢量；基于预设第三补充速度权重、所述第六目标位置矢量、所述第二补充速度矢量和所述本节点的速度矢量确定本节点的第三补充速度矢量；根据所述本节点的跟随矢量、所述本节点的队列矢量、所述本节点的间隔矢量和第三补充速度矢量确定本节点的第二行为。8.根据权利要求5所述的系统，其特征在于，所述其他节点具体用于：与所述主节点通信以获取所述主节点的位置信息，根据所述主节点的位置信息和本节点的位置信息确定主节点与本节点的位置矢量，基于预设的跟随系数和跟随系数权重得到本节点的跟随矢量；与所述主节点通信以获取所述主节点的第一行为，根据所述主节点的第一行为得到所述主节点的速度矢量，基于预设的本节点的队列权重系数、所述主节点的速度矢量和本节点的单位矢量确定本节点的队列矢量；所述其他节点至少包括第一节点和第二节点，所述其他节点中的第一节点与所述其他节点中的第二节点通信以获取所述第二节点的位置信息，根据所述第二节点的位置信息和本节点的位置信息确定第二节点与本节点的位置矢量，基于预设的间隔系数确定本节点的间隔矢量；与所述主节点通信以获取所述目标障碍物的位置信息和逃离状态，根据所述目标障碍物的位置信息和本节点的位置信息确定目标障碍物与本节点的第七目标位置矢量；根据第二预设逃离速度权重、第七目标位置矢量和本节点的速度矢量确定本节点的逃离矢量；根据所述本节点的跟随矢量、所述本节点的队列矢量、所述本节点的间隔矢量和所述本节点的逃离矢量确定本节点的第二行为。9.根据权利要求2所述的系统，其特征在于，所述控制单元具体用于：根据所述集群的初始参数将所述集群划分为n个一级子集群；每个一级子集群包括M个节点，将每个一级子集群中M个节点中的任意一个节点设置为所属一级子集群的一级主节点；所述n为正整数；将所述n个一级子集群划分为Q个二级子集群；每个二级子集群包括S个一级子集群，将每个二级子集群中S个一级子集群中的任意一个一级子集群的一级主节点设置为所属二级子集群的二级主节点；所述Q和S为正整数。10.一种集群控制方法，其特征在于，所述方法包括：通过控制单元设置集群的初始参数；所述初始参数用于指示所述集群被划分的子集群的数量；对于一个子集群，所述子集群由主节点和其他节点构成；利用主节点根据所属子集群的目标状态信息确定本节点的第一行为，并执行所述第一行为，并与所属子集群中的其他节点通信以共享所述第一行为；所述所属子集群的目标状态信息包括追逐状态、徘徊状态和逃离状态中的至少一个；利用其他节点与所述主节点通信以获取所述第一行为，根据所述第一行为和所述目标状态信息确定所述其他节点的第二行为，并执行所述第二行为。
说明书desc
技术领域本申请涉及数据处理技术领域，尤其涉及一种集群控制系统及方法。背景技术群体运动合成技术在近些年受到了愈来愈多的关注，它广泛的应用在诸多领域中，例如应用在电影工业的群体运动特效合成等方面。在这些应用中的群体运动往往通过展示它们的宏观属性来达到模拟的目的，比如模拟鸟群、鱼群等集群生物的集群行为，使得模拟得到的画面能够相对真实的演绎现实生活中集群的行为。但是，目前常用的大规模群体表演动画合成方法是在多个关键帧中分别设定每个个体的位置，然后通过每个个体与集群中其他个体的关系再模拟计算每个个体的相对行为。然而，这类方法需要用户手动地设置大量的空间约束关系，这是一个非常费时费力的过程。尤其是要合成的群体表演中包含的个体数目非常大的时候，由于计算量庞大，因此对硬件的要求比较高，还会出现画面卡顿的情况，从而影响用户的体验。发明内容有鉴于此，本申请提供了一种集群控制系统及方法，旨在不影响群体行为效果的同时提高运行效率，使画面流畅显示。第一方面，本申请实施例公开了一种集群控制系统，包括：控制单元，用于设置集群的初始参数；所述初始参数用于指示所述集群被划分的子集群的数量；对于一个子集群，所述子集群由主节点和其他节点构成；所述主节点，用于根据所属子集群的目标状态信息确定本节点的第一行为，并执行所述第一行为，并与所属子集群中的其他节点通信以共享所述第一行为；所述所属子集群的目标状态信息包括追逐状态、徘徊状态和逃离状态中的至少一个；所述其他节点，用于与所述主节点通信以获取所述第一行为，根据所述第一行为和所述目标状态信息确定所述其他节点的第二行为，并执行所述第二行为。可选地，所述控制单元具体用于：根据所述集群的初始参数将所述集群划分为N个子集群；每个子集群包括M个节点，将每个子集群中M个节点中的任意一个节点设置为所属子集群的主节点；所述N和M为正整数。可选地，当所述所属子集群的目标状态信息为追逐状态时，所述主节点具体用于：响应于接收的向第一目标位置移动的指令，获取第一目标位置信息，并与所属子集群中的其他节点通信以共享所述第一目标位置信息和追逐状态；根据所述第一目标位置信息确定本节点与所述第一目标位置的第一目标位置矢量；与所述集群的其他子集群的主节点通信以获取所述集群的其他子集群的主节点的状态信息；所述集群的其他子集群的主节点的状态信息包括其他子集群的主节点的位置信息和速度矢量；根据所述集群的其他子集群的主节点的状态信息确定本节点的速度矢量；根据所述第一目标位置矢量和所述本节点的速度矢量确定本节点的第一补充速度矢量；根据所述本节点的速度矢量和第一补充速度矢量确定本节点的第一行为。可选地，当所述所属子集群的目标状态信息为徘徊状态时，所述主节点具体用于：设置第二目标位置并获取所述第二目标位置的第二目标位置信息，并与所属子集群中的其他节点通信以共享所述第二目标位置信息和徘徊状态；根据所述第二目标位置信息确定本节点与所述第二目标位置的第二目标位置矢量；与所述集群的其他子集群的主节点通信以获取所述集群的其他子集群的主节点的状态信息；所述集群的其他子集群的主节点的状态信息包括其他子集群的主节点的位置信息和速度矢量；根据所述集群的其他子集群的主节点的状态信息确定本节点的速度矢量；根据预设第二补充速度权重、所述第二目标位置矢量和所述本节点的速度矢量确定本节点的第二补充速度矢量；根据所述第二补充速度矢量和所述本节点的速度矢量确定本节点的第一行为。可选地，当所述所属子集群的目标状态信息为逃离状态时，所述主节点具体用于：当检测到目标障碍物时获取所述目标障碍物的位置信息，并与所属子集群中的其他节点通信以共享所述目标障碍物的位置信息和逃离状态；根据所述目标障碍物的位置信息确定目标障碍物与本节点的第三目标位置矢量；与所述集群的其他子集群的主节点通信以获取所述集群的其他子集群的主节点的状态信息；所述集群的其他子集群的主节点的状态信息包括其他子集群的主节点的位置信息和速度矢量；根据所述集群的其他子集群的主节点的状态信息确定本节点的速度矢量；根据第一预设逃离速度权重、第三目标位置矢量和本节点的速度矢量确定本节点的逃离速度矢量；根据所述逃离速度矢量和所述本节点的速度矢量确定本节点的第一行为。可选地，所述其他节点具体用于：与所述主节点通信以获取所述主节点的位置信息，根据所述主节点的位置信息和本节点的位置信息确定主节点与本节点的位置矢量，基于预设的跟随系数和跟随系数权重得到本节点的跟随矢量；与所述主节点通信以获取所述主节点的第一行为，根据所述主节点的第一行为得到队列速度矢量，基于预设队列权重系数、所述队列速度矢量和本节点的速度矢量确定本节点的队列矢量；所述其他节点至少包括第一节点和第二节点，所述其他节点中的第一节点与所述其他节点中的第二节点通信以获取所述第二节点的位置信息，根据所述第二节点的位置信息和第一节点的位置信息确定第二节点与第一节点的位置矢量，基于第二节点与第一节点的位置矢量确定第一节点的间隔矢量；根据所述本节点的跟随矢量、所述本节点的队列矢量和所述本节点的间隔矢量确定本节点的第二行为。可选地，所述其他节点具体用于：与所述主节点通信以获取所述主节点的位置信息，根据所述主节点的位置信息和本节点的位置信息确定主节点与本节点的位置矢量，基于预设的跟随系数和跟随系数权重得到本节点的跟随矢量；与所述主节点通信以获取所述主节点的第一行为，根据所述主节点的第一行为得到队列速度矢量，基于预设队列权重系数、所述队列速度矢量和本节点的速度矢量确定本节点的队列矢量；所述其他节点至少包括第一节点和第二节点，所述其他节点中的第一节点与所述其他节点中的第二节点通信以获取所述第二节点的位置信息，根据所述第二节点的位置信息和第一节点的位置信息确定第二节点与第一节点的位置矢量，基于第二节点与第一节点的位置矢量确定第一节点的间隔矢量；与所述主节点通信以获取所述第二目标位置信息、徘徊状态和第二补充速度矢量，根据所述第二目标位置信息和本节点的位置信息确定本节点与第二目标位置的第四目标位置矢量；设置第五目标位置并获取所述第五目标位置的第五目标位置信息，根据所述第五目标位置信息确定本节点与所述第五目标位置的第五目标位置矢量；基于预设徘徊目标权重、第四目标位置矢量和第五目标位置矢量确定第六目标位置矢量；基于预设第三补充速度权重、所述第六目标位置矢量、所述第二补充速度矢量和所述本节点的速度矢量确定本节点的第三补充速度矢量；根据所述本节点的跟随矢量、所述本节点的队列矢量、所述本节点的间隔矢量和第三补充速度矢量确定本节点的第二行为。可选地，所述其他节点具体用于：与所述主节点通信以获取所述主节点的位置信息，根据所述主节点的位置信息和本节点的位置信息确定主节点与本节点的位置矢量，基于预设的跟随系数和跟随系数权重得到本节点的跟随矢量；与所述主节点通信以获取所述主节点的第一行为，根据所述主节点的第一行为得到所述主节点的速度矢量，基于预设的本节点的队列权重系数、所述主节点的速度矢量和本节点的单位矢量确定本节点的队列矢量；所述其他节点至少包括第一节点和第二节点，所述其他节点中的第一节点与所述其他节点中的第二节点通信以获取所述第二节点的位置信息，根据所述第二节点的位置信息和本节点的位置信息确定第二节点与本节点的位置矢量，基于预设的间隔系数确定本节点的间隔矢量；与所述主节点通信以获取所述目标障碍物的位置信息和逃离状态，根据所述目标障碍物的位置信息和本节点的位置信息确定目标障碍物与本节点的第七目标位置矢量；根据第二预设逃离速度权重、第七目标位置矢量和本节点的速度矢量确定本节点的逃离矢量；根据所述本节点的跟随矢量、所述本节点的队列矢量、所述本节点的间隔矢量和所述本节点的逃离矢量确定本节点的第二行为。可选地，所述控制单元具体用于：根据所述集群的初始参数将所述集群划分为n个一级子集群；每个一级子集群包括M个节点，将每个一级子集群中M个节点中的任意一个节点设置为所属一级子集群的一级主节点；所述n为正整数；将所述n个一级子集群划分为Q个二级子集群；每个二级子集群包括S个一级子集群，将每个二级子集群中S个一级子集群中的任意一个一级子集群的一级主节点设置为所属二级子集群的二级主节点；所述Q和S为正整数。第二方面，本申请提供了一种集群控制方法，所述方法包括：通过控制单元设置集群的初始参数；所述初始参数用于指示所述集群被划分的子集群的数量；对于一个子集群，所述子集群由主节点和其他节点构成；利用主节点根据所属子集群的目标状态信息确定本节点的第一行为，并执行所述第一行为，并与所属子集群中的其他节点通信以共享所述第一行为；所述所属子集群的目标状态信息包括追逐状态、徘徊状态和逃离状态中的至少一个；利用其他节点与所述主节点通信以获取所述第一行为，根据所述第一行为和所述目标状态信息确定所述其他节点的第二行为，并执行所述第二行为。第三方面，本申请提供了一种设备，所述设备包括存储器和处理器，所述存储器用于存储指令或代码，所述处理器用于执行所述指令或代码，以使所述设备执行前述第二方面所述的集群控制方法。第四方面，本申请提供了一种计算机存储介质，所述计算机存储介质中存储有代码，当所述代码被运行时，运行所述代码的设备实现前述第二方面所述的集群控制方法。本申请提供了一种集群控制系统及方法。在执行集群控制时，先通过控制单元设置集群的初始参数；所述初始参数用于指示所述集群被划分的子集群的数量；对于一个子集群，所述子集群由主节点和其他节点构成；然后利用主节点根据所属子集群的目标状态信息确定本节点的第一行为，并执行所述第一行为，并与所属子集群中的其他节点通信以共享第一行为；所述所属子集群的目标状态信息包括追逐状态、徘徊状态和逃离状态中的至少一个；最后利用其他节点与主节点通信以获取第一行为，根据第一行为和目标状态信息确定其他节点的第二行为，并执行第二行为。这样，通过增加子集群的概念，使得个体的行为通过控制子集群中的主节点和利用主节点控制其他节点实现，达到了简化个体计算量的效果。如此，可以不影响群体行为效果的同时提高运行效率，使画面流畅显示。附图说明为更清楚地说明本实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例提供的一种集群控制系统的结构示意图；图2为本申请实施例提供的一种主节点和其他节点的关系示意图；图3为本申请实施例提供的一种不同层级的子集群的结构示意图；图4为本申请实施例提供的一种集群控制系统中主节点实现的流程图；图5为本申请实施例提供的一种主节点向第一目标位置移动的示意图；图6为本申请实施例提供的一种集群控制系统中主节点实现的流程图；图7为本申请实施例提供的一种集群控制系统中主节点实现的流程图；图8为本申请实施例提供的一种逃离状态的示意图；图9为本申请实施例提供的一种集群控制系统中其他节点实现的流程图；图10为本申请实施例提供的一种其他节点第二行为确定的示意图；图11为本申请实施例提供的一种集群控制系统中其他节点实现的流程图；图12为本申请实施例提供的一种其他节点徘徊状态的示意图；图13为本申请实施例提供的一种集群控制系统中其他节点实现的流程图；图14为申请实施例提供的一种集群控制方法的流程图。具体实施方式正如前文所述，目前常用的大规模群体表演动画合成方法是在多个关键帧中分别设定每个个体的位置，然后通过每个个体与集群中其他个体的关系再模拟计算每个个体的相对行为。然而，这类方法需要用户手动地设置大量的空间约束关系，这是一个非常费时费力的过程。尤其是要合成的群体表演中包含的个体数目非常大的时候，由于计算量庞大，因此对硬件的要求比较高，还会出现画面卡顿的情况，从而影响用户的体验。为了解决上述问题，本申请实施例提供了一种集群控制系统，包括：控制单元，用于设置集群的初始参数；所述初始参数用于指示所述集群被划分的子集群的数量；对于一个子集群，所述子集群由主节点和其他节点构成；主节点，用于根据所属子集群的目标状态信息确定本节点的第一行为，并执行所述第一行为，并与所属子集群中的其他节点通信以共享所述第一行为；所述所属子集群的目标状态信息包括追逐状态、徘徊状态和逃离状态中的至少一个；其他节点，用于与主节点通信以获取第一行为，根据第一行为和目标状态信息确定其他节点的第二行为，并执行第二行为。可见，通过增加子集群的概念，使得个体的行为通过控制子集群中的主节点和利用主节点控制其他节点实现，达到了简化个体计算量的效果。如此，可以不影响群体行为效果的同时提高运行效率，使画面流畅显示。需要说明的是，本申请实施例不限定集群控制方法的执行主体，例如，本申请实施例的集群控制方法可以应用于终端设备或服务器等数据处理设备。其中，终端设备可以为智能手机、计算机、个人数字助理或平板电脑等。服务器可以为独立服务器、集群服务器或云服务器。为了使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。参见图1，图1为本申请实施例提供的一种集群控制系统的结构示意图100，包括：控制单元101、主节点102和其他节点103，控制单元101，用于设置集群的初始参数；所述初始参数用于指示所述集群被划分的子集群的数量；对于一个子集群，所述子集群由主节点和其他节点构成。在本实施例中，控制单元101根据集群控制的需求设置集群的初始参数，该初始参数用于指示集群被划分的子集群的数量。具体的，初始参数可以包括集群的个体总数量和子集群的数量，例如一个集群的个体总数量为1000，子集群的数量的为100，表示将该拥有1000个个体成员的集群平均分到100个子集群，则每个子集群的拥有10个个体成员，或者初始参数可以包括集群的个体总数量和子集群的个体成员数，例如一个集群的个体总数量为1000，子集群的个体成员数的为10，表示将该拥有1000个个体成员的集群分为每10个个体成员构成一个子集群的100个子集群。 将该集群的个体成员分为N个组后，为了对每个子集群的各个体成员的行为进行控制，需要将每个子集群中的一个个体成员设置为主节点，除被设置为主节点的个体成员外的其他个体成员即为其他节点，一个子集群中的被设置为主节点的个体成员对其他节点也就是其他个体成员可以进行主动发送指令控制其行为，即，对于一个子集群，所述子集群由主节点和其他节点构成。可选地，为了给每个子集群分配主节点，该控制单元101具体可以用于根据所述集群的初始参数将所述集群划分为N个子集群；每个子集群包括M个节点，将每个子集群中M个节点中的任意一个节点设置为所述每个子集群的主节点。其中，N和M为正整数。接上述举例，若一个集群的个体总数量为1000，子集群的数量的为100，也就是N为100，由于将该拥有1000个个体成员的集群平均分到100个子集群中，则每个子集群的拥有10个个体成员，也就是M为10，表示每个子集群中包括10个节点，为了对每个子集群的各个体成员的行为进行控制，图2为本申请实施例提供的一种主节点和其他节点的关系示意图，结合图2所示，将10个节点中的任意一个节点设置为该节点对应的子集群的主节点，则剩余的9个节点为其他节点，同一个子集群中的主节点可以和其他9个节点进行通信并控制其他节点。在一个可选地实施例中，将集群划分为N个子集群时，在实际的应用过程中还可以在初始参数中设置子集群的层级，以便通过不同层级的子集群实现高级子集群对低级子集群的管理，具体地，可以由一级子集群组成二级子集群，在二级子集群中设置一个二级主节点，该二级主节点可以管理一级子集群的一级主节点，故，上述控制单元101具体可以用于：根据集群的初始参数将所述集群划分为n个一级子集群；每个一级子集群包括M个节点，将每个一级子集群中M个节点中的任意一个节点设置为所属一级子集群的一级主节点；将n个一级子集群划分为Q个二级子集群；每个二级子集群包括S个一级子集群，将每个二级子集群中S个一级子集群中的任意一个一级子集群的一级主节点设置为所属二级子集群的二级主节点。其中，n、Q和S均为正整数。图3为本申请实施例提供的一种不同层级的子集群的结构示意图，结合图3所示，若一个集群的个体总数量为1000，子集群的个体成员数为10，层级数为2，首先将该集群划分为由10个个体成员组成的一级子集群，每个一级子集群包括10个节点，将每个节点中的任意一个节点设置为所属集群的一级主节点，则其他个体成员为其他节点，同一个一级子集群的一级主节点可以控制同一个一级子集群中的其他节点，图3中示例性的给出了一个一级主节点和其他节点的示意图，可以理解的是，图3中虽然只展示了一个一级主节点与其他节点的关系，但是在实际的应用过程中每个一级主节点都有对应的其他节点，如此，就可以得到100个一级子集群，在此基础上，由于本实施例中子集群的层级数为2，故需要将一级子集群进一步进行划分，也就是说，将100个一级子集群进一步划分为10个由10个一级子集群组成的二级子集群，即每个二级子集群包括10个一级子集群，将每个二级子集群中10个一级子集群中的任意一个一级子集群的一级主节点设置为所属二级子集群的二级主节点，如图3所示，其中的一个一级子集群的一级主节点同时为所述二级子集群的二级主节点，需要说明的是，如图3所示，在同一个二级子集群中，二级主节点只与所属二级子集群中的其他一级主节点通信，也即其他一级主节点在二级集群中为所属二级集群的其他节点。主节点102，用于根据所属子集群的目标状态信息确定本节点的第一行为，并执行所述第一行为，并与所属子集群中的其他节点通信以共享所述第一行为；所述所属子集群的目标状态信息包括追逐状态、徘徊状态和逃离状态中的至少一个。在本实施例中，集群行为可以包括追逐、徘徊和逃离三种，其中追逐是指该集群有指定的目标，以模拟鸟群的飞行行为为例，在一个具体的动画场景中，可以响应于用户的在画面中的点击位置确定鸟群的第一目标位置，也可以是响应于画面中出现鸟群捕捉的食物等，将该食物的位置作为鸟群的第一目标位置，使得鸟群向一个指定的目标位置飞行，即该集群处于追逐状态；徘徊是指该集群没有指定的目标，集群中的个体可以随机设置一个目标位置并向该随机目标位置移动，需要说明的是，在本实施例中，集群中的每个体成员也就是主节点102和其他节点在集群徘徊时均可自行选择随机目标位置，也就是说，集群中的每个个体成员的目标位置可以是不一样的；逃离是为了模拟集群在遇到障碍时的避障行为，接上述以鸟群为例，逃离行为可以在当鸟群遇到猛禽时，该集群需要躲避猛禽的攻击，因此需要向远离猛禽的方向逃离。故，集群的子集群的目标状态信息可以包括追逐状态、徘徊状态和逃离状态，根据所属子集群的目标状态信息确定本节点的第一行为，并执行第一行为。为了达到主节点102对所属集群中其他节点的控制效果，在本实施例中，当主节点102根据目标状态信息确定第一行为之后，需要将主节点102确定的第一行为和目标状态信息共享到其他节点，以便其他节点根据主节点102共享的信息确定其他节点的第二行为，需要说明的是，本实施例中主节点102在于其他节点通信共享第一行为时不但共享的确定的第一行为，还包括共享确定第一行为时的相关数据信息以及子集群的目标状态信息。其他节点103，用于与主节点通信以获取所述第一行为，根据所述第一行为和所述目标状态信息确定所述其他节点的第二行为，并执行所述第二行为。在本实施例中，与主节点102同属于一个子集群的其他节点103的行为受主节点102的控制，其他节点103的第二行为受主节点102的第一行为的约束，其他节点103根据主节点102的第一行为和所属子集群的目标状态信息确定第二行为，由于第二行为是根据第一行为确定的，因此第二行为在第一行为的基础上表现出集群行为的特征，可以理解的是，本实施例其他节点103在进行第二行为的确定时只与子集群中的主节点102和其他节点103相关，与集群中其他子集群中的主节点102和其他子集群中的其他节点103并不相关，因此利用本实施例的其他节点103确定第二行为时能够降低计算量。具体而言，当目标状态信息为追逐状态时，其他节点103与主节点102通信获取主节点102的第一行为，以集群为鸟群为例，一个子集群的主节点102为追逐状态时，其他节点103也为追逐状态并且其他节点103追逐的目标位置与主节点102一致，这样就可以模拟集群行为中的追逐行为；当目标状态信息为徘徊状态时，其他节点103随机生成目标位置并向目标位置飞行，但是为了实现集群行为的特征，其他节点103的行为是受主节点102控制的，因此其他节点103会与主节点102通信获取主节点102的随机目标位置，通过将其他节点103本身随机生成的目标位置和主节点102的随机目标位置求和，使得其他节点103在随机徘徊的同时跟随主节点102的行为，从而实现模拟集群行为时乱中有序的效果，使得画面更加流畅；当目标状态信息为逃离状态时，其他节点103与主节点102通信获取主节点102的共享的目标障碍物的位置和主节点102的第一行为，其他节点103根据主节点102的第一行为也即逃离行为的确定其他节点103的第二行为，也就是跟随主节点102躲避障碍物。上述实施例中，通过增加子集群的概念，使得通过控制子集群中的主节点和利用主节点控制其他节点的方式达到模拟个体行为的目的，从而简化个体计算量。如此，可以不影响群体行为效果的同时提高运行效率，使画面流畅显示。在本申请实施例中，上述图1所述的主节点102存在多种可能的实现方式，下面分别进行介绍。需要说明的是，下文介绍中给出的实现方式仅作为示例性的说明，并不代表本申请实施例的全部实现方式。图4为本申请实施例提供的一种集群控制系统中主节点实现的流程图，当所属子集群的目标状态信息为追逐状态时，所述主节点具体用于：S401：响应于接收的向第一目标位置移动的指令，获取第一目标位置信息，并与所属子集群中的其他节点通信以共享第一目标位置信息和追逐状态。当所属子集群的目标状态信息为追逐状态时，主节点102响应于接收向第一目标位置移动的指令，获取第一目标位置信息，图5为本申请实施例提供的一种主节点102向第一目标位置移动的示意图，结合图5所示，A为第一目标位置，在一个具体的场景中，A点的位置信息由A点的位置坐标确定，当主节点102收到向A点移动的指令时，同时获取A点的位置坐标。可以理解的是，对于向第一目标位置移动的指令本申请实施例不做限制，例如可以通过在群体动画的场景中，可以通过用户点击画面中的任意位置，主节点102接收向用户点击位置移动的指令，获取用户点击位置的位置坐标，控制集群向第一目标位置移动。又例如用户通过按键输入集群的第一目标位置，主节点102基于用户输入的第一目标位置获取该位置的位置坐标。又例如，在一个具体的应用场景中，为了模拟集群的捕食或者游戏行为，预先在场景中设置食物或者游戏道具，主节点102可以在场景中的预设范围进行检测，当主节点102检测到食物或者游戏道具时，接收向食物或者游戏道具移动的指令，获取食物或者游戏道具的位置坐标，以便控制子集群向食物或者游戏道具移动。同时，主节点102为了控制所属子集群中的其他节点103，需要将接收的第一目标位置信息和子集群的追逐状态信息共享至所属子集群中的其他节点103，以便其他节点103可以通过主节点102发送的第一目标位置信息和子集群的追逐状态跟随主节点102的移动。S402：根据第一目标位置信息确定本节点与第一目标位置的第一目标位置矢量。上文已经获取了第一目标位置信息，结合图5示例，主节点102可以通过第一目标位置信息和本节点的位置信息确定本节点和第一目标位置的第一目标位置矢量Dt，需要说明的是，通过第一目标位置信息可以得到了第一目标位置坐标，本节点的位置信息包括本节点的位置坐标，通过第一目标位置坐标和本节点的位置坐标确定的第一目标位置矢量是一个有大小有方向的矢量，表示本节点和第一目标位置的位置关系。S403：与集群的其他子集群的主节点通信以获取集群的其他子集群的主节点的状态信息；所述集群的其他子集群的主节点的状态信息包括其他子集群的主节点的位置信息和速度矢量。在进行集群控制时，子集群的行为不但由目标状态信息确定，为了避免集群中个体成员在移动的过程中不与其他个体成员产生碰撞或者重叠，从而导致集群行为的画面冗杂，因此主节点102需要与所属集群中的其他子集群的主节点102通信获取集群中其他子集群的主节点102的状态信息，其中其他子集群的主节点102的状态信息包括其他子集群主节点102的位置信息和速度矢量。结合图5所示，当一个集群被划分为五个子集群时，以其中一个主节点102为例，与其他四个主节点102通信获取其他四个主节点102的位置信息和速度矢量，其中位置信息具体可以包括其他四个子集群主节点102的位置坐标。S404：根据集群的其他子集群的主节点的状态信息确定本节点的速度矢量。在上述步骤S403中，主节点102通过与其他子集群的主节点102通信获取了其他子集群主节点102的速度矢量和位置信息，通过其他子集群主节点102的速度矢量和位置信息确定本节点的速度矢量。具体而言，主节点102根据本节点当前状态的速度矢量和其他子集群主节点102的速度矢量平均得到本节点的平均速度矢量，也就是说，本节点平均速度矢量是所述集群中所有子集群的主节点102的速度矢量的平均值。结合图5所示，确定本节点的平均速度矢量为V1，在本实施例中，由于本节点的平均速度矢量是根据所属集群中所有子集群主节点102的速度矢量平均得到的，因此本节点的速度矢量受其他子集群的行为约束，使得集群中每个主节点102的行为基本上趋于一致，从而可以实现集群行为的效果。前文中提到，为了避免集群中个体成员在移动的过程中不与其他个体成员产生碰撞或者重叠，因此获取了其他子集群的主节点102的位置信息，通过其他子集群的主节点102位置信息确定其他子集群的主节点102与本节点的间隔速度矢量，从而保证主节点102所属的子集群与其他子集群的保持一定的距离。结合图5所示，以一个主节点102为例，若Dn1表示集群中一个子集群的主节点102与第一个子集群的主节点102的单位矢量，Dm1表示该子集群的主节点102与第一个子集群的主节点102的矢量的长度，同理Dn2、Dn3和Dn4分别表示集群中一个子集群的主节点102与第二个、第三个和第四个子集群的主节点102的单位矢量，Dm2、Dm3和Dm4分别表示集群中一个子集群的主节点102与第二个、第三个和第四个子集群的主节点102的矢量的长度，则可以将本节点的间隔速度矢量表示为V2=/4。综上，通过主节点的平均速度矢量和间隔速度矢量得到主节点的速度矢量。S405：根据所述第一目标位置矢量和本节点的速度矢量确定本节点的第一补充速度矢量。在上述步骤S404中已经得到了主节点102的速度矢量，可以理解的是，该速度矢量是一个有大小有方向的量，根据本节点的速度矢量确定主节点的速度矢量的单位矢量，该单位矢量表示主节点102的方向，同时将速度矢量的大小表示为speed1。结合图5所示，主节点102速度矢量的单位矢量可以用Df表示，为了让主节点102向第一目标位置移动，需要调整主节点102的方向，因此主节点102可以根据第一目标位置矢量和本节点的速度矢量确定本节点的第一补充速度矢量，具体可以表示为V3=*speed1。S406：根据本节点的速度矢量和第一补充速度矢量确定本节点的第一行为。在上述步骤S404和步骤S405中，得到了本节点的速度矢量和第一补充速度矢量，其中速度矢量是本节点当前的移动方向和移动速度，可以表示为平均速度矢量V1和间隔速度矢量V2之和，为了使得本节点所属的子集群向第一目标位置移动，需要根据当前的移动方向和移动速度和补充后的速度矢量确定本节点的第一行为，即主节点102最终的移动速度和移动方向，具体可以表示为V追逐=V1+V2+V3。在上述实施例中，当所属子集群的目标状态信息为追逐状态时，可以通过主节点确定第一行为并执行第一行为，在上述确定第一行为的过程中，只需要子集群的主节点接收向第一目标位置移动的指令，且每个子集群的主节点仅仅需要和其他子集群的主节点通信，即可控制所属的子集群向第一目标位置移动，简化了集群控制过程中下发指令的计算量，并且减轻了集群行为计算量，仅利用集群中的子集群的主节点即可确定该子集群的第一行为并执行，在不影响集群行为的效果下提高运行效率。图6为本申请实施例提供的一种集群控制系统中主节点实现的流程图，当所属子集群的目标状态信息为徘徊状态时，所述主节点具体用于：S601：设置第二目标位置并获取第二目标位置的第二目标位置信息，并与所属子集群中的其他节点通信以共享所述第二目标位置信息和徘徊状态。在本实施例中，当前集群没有明确的目标位置，该集群进入徘徊状态，所属子集群的目标状态信息为徘徊状态时，集群中的每个个体成员可以自行设置移动的目标位置，因此子集群的主节点102可以随机设置第二目标位置，并获取第二目标位置的第二目标位置信息，由于第二目标位置的选择是随机的，为了更好的表现集群的徘徊状态效果，可以预设第二目标位置的范围，使得主节点102在一个预设的范围内移动，具体而言，主节点102在预设的范围内设置第二目标位置，以便控制主节点102向该目标位置移动。且当主节点102获取第二目标位置的第二目标位置信息之后，会与所述子集群中的其他节点103通信以共享主节点102设置的第二目标位置信息的当前子集群的徘徊状态，以便其他节点103能够将自身设置的随机目标位置和主节点102的设置的随机目标位置进行叠加，在实现子集群中各节点随机移动的基础上又使得所属子集群中的节点朝一个方向移动，从而达到乱中有序的集群模拟真实自然的效果。S602：根据所述第二目标位置信息确定本节点与所述第二目标位置的第二目标位置矢量。本实施例的第二目标位置矢量的确定方式与上文步骤S402中记载的第一目标位置矢量的确定方式相同，具体实现方式参照上文即可，在此不做赘述。S603：与所述集群的其他子集群的主节点通信以获取所述集群的其他子集群的主节点的状态信息；所述集群的其他子集群的主节点的状态信息包括其他子集群的主节点的位置信息和速度矢量。本实施例的具体实现方式与上文步骤S403中记载的具体实现方式相同，参照上文即可，在此不做赘述。S604：根据所述集群的其他子集群的主节点的状态信息确定本节点的速度矢量。本实施例的具体实现方式与上文步骤S404中记载的具体实现方式相同，参照上文即可，在此不做赘述。S605：根据预设第二补充速度权重、第二目标位置矢量和本节点的速度矢量确定本节点的第二补充速度矢量。在本实施例中，由于所述子集群的目标状态信息为徘徊状态，上述步骤S601中该子集群中的主节点102设置了第二目标位置，但是子集群对于移动到第二目标位置的过程相比于追逐状态时移动到第一目标位置的过程缓慢一些，因此当确定第二补充速度矢量时，可以预设第二补充速度权重，根据预设第二补充速度权重、第二目标位置矢量和本节点的速度矢量可以确定本节点的第二补充速度矢量。具体而言，设预设第二补充速度权重为G1，第二目标位置矢量为Dt，主节点102速度矢量的单位矢量为Df，主节点102速度矢量的大小为Speed2，则第二补充速度矢量V4可以表示为V4=*speed2*G4。S606：根据所述第二补充速度矢量和所述本节点的速度矢量确定本节点的第一行为。在上述步骤S604和步骤S605中，得到了本节点的速度矢量和第二补充速度矢量，其中速度矢量是本节点当前的移动方向和移动速度，可以表示为平均速度矢量V1和间隔速度矢量V2之和，为了使得本节点所属的子集群向第二目标位置移动，需要根据当前的移动方向和移动速度和补充后的第二速度矢量确定本节点的第一行为，即主节点102最终的移动速度和移动方向，具体可以表示为V徘徊=/2+V4。在上述实施例中，通过当所属子集群的目标状态信息为徘徊状态时，可以通过主节点确定第一行为并执行第一行为，在上述确定第一行为的过程中，子集群的主节点随机设置第二目标位置，在主节点向第二目标位置的移动过程中，通过控制移动的速度，控制所属的子集群向第二目标位置移动，在简化集群控制过程中计算量的同时，利用集群中的子集群的主节点即可确定该子集群的第一行为并执行，可以更加真实自然的呈现徘徊状态的集群行为。图7为本申请实施例提供的一种集群控制系统中主节点实现的流程图，当所属子集群的目标状态信息为逃离状态时，所述主节点具体用于：S701：当检测到目标障碍物时获取所述目标障碍物的位置信息，并与所属子集群中的其他节点通信以共享所述目标障碍物的位置信息和逃离状态。在本实施例中，当集群遇到危险时，需要通过集群行为逃离危险源，例如当鸟群遇到猛禽或者遇到阻挡飞行的障碍物，鸟群需要向着远离猛禽或者障碍物的方向飞行，因此主节点102需要检测所处环境中是否存在猛禽或者障碍物，也就是目标障碍物，以便控制主节点102向着远离目标障碍物的方向移动，从而可以模拟集群行为中躲避天敌、避障等的行为，当主节点102检测到目标障碍物时获取所述目标障碍物的位置信息。且当主节点102获取目标障碍物的位置信息之后，会与所述子集群中的其他节点103通信以共享目标障碍物的位置信息，以便其他节点103能够跟随主机点躲避目标障碍物。在一种可选的实施例中，可以为主节点设置警戒范围，图8为本申请实施例提供的一种逃离状态的示意图，结合图8所示，主节点可以在警戒范围内检测目标障碍物，使得主节点只有在目标障碍物靠近子集群时，才进入逃离状态，达到模拟集群真实逃离行为的效果。在主节点可以设置警戒范围基础上，上文中提到在进行集群划分时，为了方便控制可以划分不同层级的子集群，具体可以包括一级子集群和二级子集群，其中每个子集群都包括对应的一级主节点和二级主节点，二级主节点可以控制同一个二级子集群的一级主节点，一级主节点可以控制同一个一级子集群的其他节点，因此，为了达到上级主节点可以控制下级主节点的目的，从而使得上级节点控制下级节点进行逃离状态的集群行为，为一级主节点设置第一警戒范围，二级主节点设置第二警戒范围，其中第一警戒范围大于第二警戒范围。S702：根据所述目标障碍物的位置信息确定目标障碍物与本节点的第三目标位置矢量。在本实施例中，上述步骤S701获取了目标障碍物的位置信息，通过目标障碍物的位置信息确定目标障碍物与本节点的第三目标位置矢量，可以理解的是，由于子集群处于逃离状态，因此需要在主节点102控制本节点向着背离目标障碍物的方向移动，因此根据目标障碍物的位置信息得到目标障碍物的位置坐标，结合本节点的位置坐标，得到本节点与目标障碍物相反方向的矢量的方向和矢量的大小，本节点与目标障碍物相反方向的矢量的单位向量可以表示为Vn，矢量的大小为Vm。S703：与所述集群的其他子集群的主节点通信以获取所述集群的其他子集群的主节点的状态信息；所述集群的其他子集群的主节点的状态信息包括其他子集群的主节点的位置信息和速度矢量。本实施例的具体实现方式与上文步骤S403中记载的具体实现方式相同，参照上文即可，在此不做赘述。S704：根据所述集群的其他子集群的主节点的状态信息确定本节点的速度矢量。本实施例的具体实现方式与上文步骤S404中记载的具体实现方式相同，参照上文即可，在此不做赘述。S705：根据第一预设逃离速度权重、第三目标位置矢量和本节点的速度矢量确定本节点的逃离速度矢量。在本实施例中，由于所述子集群的目标状态信息为逃离状态，上述步骤S701和S702中该子集群中的主节点通过检测目标障碍物的位置信息确定了第三目标位置矢量，根据第一预设逃离速度权重、第三目标位置矢量和本节点的速度矢量可以确定本节点的逃离速度矢量。结合图8所示，设第一预设逃离速度权重为G2，第三目标位置矢量为Vm，则逃离速度矢量V5可以表示为V5= Vn/Vm*G2。S706：根据所述逃离速度矢量和所述本节点的速度矢量确定本节点的第一行为。在上述步骤S704和步骤S705中，得到了本节点的速度矢量和逃离速度矢量，其中速度矢量是本节点当前的移动方向和移动速度，可以表示为平均速度矢量V1和间隔速度矢量V2之和，为了使得本节点所属的子集群向逃离目标障碍物，向背离目标障碍物的第三目标位置移动，需要根据当前的移动方向和移动速度和逃离速度矢量确定本节点的第一行为，即主节点最终的移动速度和移动方向，具体可以表示为V逃离=/2+V5。在上述实施例中，通过当所属子集群的目标状态信息为逃离状态时，可以通过主节点确定第一行为并执行第一行为，在上述确定第一行为的过程中，子集群的主节点通过检测警戒范围中的目标障碍物，控制所属的子集群向背离目标障碍物的第三目标位置移动，在简化集群控制过程中计算量的同时，利用集群中的子集群的主节点即可确定该子集群的第一行为并执行，可以更加真实自然的呈现逃离状态的集群行为。在本申请实施例中，上述图1所述的主节点103存在多种可能的实现方式，下面分别进行介绍。需要说明的是，下文介绍中给出的实现方式仅作为示例性的说明，并不代表本申请实施例的全部实现方式。图9为本申请实施例提供的一种集群控制系统中其他节点实现的流程图，当所属子集群的目标状态信息为追逐状态时，所述其他节点具体用于：S901：与主节点通信以获取主节点的位置信息和第一行为，根据所述主节点的位置信息和本节点的位置信息确定主节点与本节点的位置矢量，基于预设的跟随系数和跟随系数权重得到本节点的跟随矢量。在本实施例中，一个子集群中的其他节点103的行为受同一个子集群中主节点102的约束，当主节点102向第一目标位置移动时，其他节点103跟随主节点102向第一目标位置移动，为了使实现其他节点103和主节点102的跟随关系，其他节点103通过与主节点102通信获取与其他节点103同属于一个子集群的主节点102的位置信息，然后根据主节点102的位置信息和本节点的位置信息确定主节点102和本节点的位置矢量，可以表示为D。可以理解的是，当其他节点103跟随主节点102移动时，其他节点103通过移动到主节点102的位置以便实现与主节点102的跟随关系，因此可以预设其他节点103相对主节点102的跟随系数为P，需要说明的是，上述跟随系数是个矢量，表示其他节点103与主节点102的跟随力，其中P可以等于D，也即跟随系数等于主节点102和本节点的位置矢量，表示其他节点103和主节点102为完全跟随关系，但是在实际的应用过程中，其他节点103在跟随主节点102的同时，为了实现更加自然的跟随状态，其他节点103与主节点102并不是完全跟随的关系，因此为该跟随系数设置跟随系数权重，使得其他节点103对主节点102的跟随状态更加自然，基于预设的跟随系数P和跟随系数权重G3确定本节点的跟随矢量V6，具体可以表示为V6= P*G3。在一个可选的实施例中，上文中提到在进行集群划分时，为了方便控制可以划分不同层级的子集群，具体可以包括一级子集群和二级子集群，其中每个子集群都包括对应的一级主节点和二级主节点，二级主节点可以控制同一个二级子集群的一级主节点，一级主节点可以控制同一个一级子集群的其他节点，因此，为了达到上级主节点可以控制下级主节点的目的，从而使得上级节点控制下级节点进行追逐状态的集群行为，此时，同属二个子集群的一级主节点作为二级主节点的其他节点跟随二级主节点移动，一级主节点相对二级主节点的跟随系数权重大于一级主节点对应的一级子集群的其他节点的跟随系数权重。S902：与主节点通信以获取主节点的第一行为，根据主节点的第一行为得到队列速度矢量，基于预设的本节点的队列权重系数、所述主节点的速度矢量和本节点的单位矢量确定本节点的队列矢量。在本实施例中，由于其他节点103的行为受主节点102的行为的约束，一个子集群中主节点102的第一行为可以代表整个子集群的行为，子集群中的其他节点103的行为是基于主节点102的第一行为确定的，因此当步骤S102确定主节点102的第一行为之后，为了利用子集群的主节点控制其他节点103，其他节点103与主节点102通信以获取主节点的第一行为，根据主节点102的第一行为得到队列速度矢量Va，然后确定本节点的速度矢量，可以理解的是，本节点的速度矢量是指其他节点103在与主节点102通信之前，已经处于移动的状态的速度矢量，基于此，为了使得其他节点103跟随主节点102移动，预设队列权重系数G4，用队列速度矢量Va、本节点的速度矢量Vf和预设队列权重系数G4确定本节点的队列矢量V7，具体可以表示为V7=Va-Vf*G4。在一个可选的实施例中，上文中提到在进行集群划分时，为了方便控制可以划分不同层级的子集群，具体可以包括一级子集群和二级子集群，其中每个子集群都包括对应的一级主节点和二级主节点，二级主节点可以控制同一个二级子集群的一级主节点，一级主节点可以控制同一个一级子集群的其他节点，因此，一级主节点相对二级主节点的跟随系数权重大于一级主节点对应的一级子集群的其他节点的跟随系数权重，同理，在本实施例中，一级主节点相对二级主节点的预设队列权重系数大于一级主节点对应的一级子集群的其他节点的预设队列权重系数。S903：所述其他节点至少包括第一节点和第二节点，所述其他节点中的第一节点与所述其他节点中的第二节点通信以获取所述第二节点的位置信息，根据所述第二节点的位置信息和本节点的位置信息确定第二节点与本节点的位置矢量，基于预设的间隔系数确定本节点的间隔矢量。前文步骤S404中提到，为了避免集群中个体成员在移动的过程中不与其他个体成员产生碰撞或者重叠 ，因此获取了其他子集群的主节点102的位置信息，通过其他子集群的主节点102位置信息确定其他子集群的主节点102与本节点的间隔速度矢量，从而保证主节点102所属的子集群与其他子集群的保持一定的距离。同理，当一个子集群中的其他节点103个数大于一个时，为了避免同一个子集群中的其他节点103在移动过程中发生碰撞或者重叠的情况，一个子集群中多个其他节点103需要保持一定的间隔，基于此，当其他节点103至少包括第一节点和第二节点，其他节点103中的第一节点与其他节点103中的第二节点通信以获取所述第二节点的位置信息，根据第二节点的位置信息和本节点的位置信息确定第二节点与本节点的位置矢量，基于预设的间隔系数确定本节点的间隔矢量。需要说明的是，本实施例中的第一和第二只是为了区分其他节点103中不同节点的示例性说明，在实际的应用过程中，其他节点103的个数由初始参数决定，因此一个子集群中的其他节点103包括但不限于第一节点和第二节点，实际上，其他节点103和还可以包括第三节点和第四节点等，具体根据子集群中其他节点103的个数决定。可以理解的是，为了保证集群中个体成员不产生碰撞和重叠，主节点102的预设的间隔系数大于其他节点103的预设的间隔系数。S904：根据本节点的跟随矢量、本节点的队列矢量和本节点的间隔矢量确定本节点的第二行为。在本实施例中，图10为本申请实施例提供的一种其他节点第二行为确定的示意图，结合图10所示，需要说明的是，图10仅以其他节点包括第一节点和第二节点作为示例，根据上述步骤S901-S903，已知第一节点的跟随矢量V6、第一节点的队列矢量V7和第一节点的间隔矢量V8，当第一节点所属的子集群处于追逐状态时，可以确定本节点的第二行为V9=V6+V7+V8。图11为本申请实施例提供的一种集群控制系统中其他节点实现的流程图，当所属子集群的目标状态信息为徘徊状态时，所述其他节点具体用于：S1101：与所述主节点通信以获取所述第二目标位置信息、徘徊状态和第二补充速度矢量，根据所述第二目标位置信息和本节点的位置信息确定本节点与第二目标位置的第四目标位置矢量。上文步骤S601中提到，为了实现子集群中各节点随机移动的基础上又使得所属子集群中的节点朝一个方向移动，从而达到乱中有序的集群模拟真实自然的效果，主节点102获取第二目标位置的第二目标位置信息之后，会与所述子集群中的其他节点103通信以共享主节点102设置的第二目标位置信息和当前子集群的徘徊状态，以便其他节点103能够将自身设置的随机目标位置和主节点102的设置的随机目标位置进行叠加，因此在本实施例中其他节点103与主节点102通信以获取主节点102设置的第二目标位置信息、徘徊状态和第二补充速度矢量，图12为本申请实施例提供的一种其他节点103徘徊状态的示意图，需要说明的是，图12仅以其他节点103包括第一节点和第二节点作为示例，结合图12所示，根据第二目标位置信息A和本节点的位置信息确定本节点与第二目标位置A的第四目标位置矢量A1。S1102：设置第五目标位置并获取所述第五目标位置的第五目标位置信息，根据所述第五目标位置信息确定本节点与所述第五目标位置的第五目标位置矢量。上文中提到，当前集群没有明确的目标位置，该集群进入徘徊状态，所属子集群的目标状态信息为徘徊状态时，集群中的每个个体成员可以自行设置移动的目标位置，故当所属子集群的目标状态信息为徘徊状态时，其他节点103可以随机设置目标位置以便确定该其他节点103的移动位置，具体地，结合图12所示，其他节点设置第五目标位置B并获取第五目标位置B的第五目标位置信息，例如获取第五目标位置B的位置坐标，根据第五目标位置B的位置坐标确定本节点与第五目标位置B的位置坐标的第五目标位置矢量B1。S1103：基于预设徘徊目标权重、第四目标位置矢量和第五目标位置矢量确定第六目标位置矢量。在本实施例中，为了在集群中各个体成员随机移动的基础上体现集群行为的特征，也就是集群向着大致相同的方向移动，因此，其他节点103在接收到主节点102发送的主节点102设置的主节点102的随机目标位置之后，会将本节点设置的随机目标位置和主节点102的随机目标位置加权叠加，使得本节点的随机目标位置偏向主节点102的随机目标位置，结合图12所示，基于预设徘徊目标权重、第四目标位置矢量A1和第五目标位置矢量B1确定第六目标位置矢量C1，从而保证同一个子集群中的各成员向着大致相同的方向移动，形成乱中有序的真实自然效果。S1104：基于预设第三补充速度权重、第六目标位置矢量、第二补充速度矢量和本节点的速度矢量确定本节点的第三补充速度矢量。在本实施例中，由于所述子集群的目标状态信息为徘徊状态，上述步骤S1101-S1103中该子集群中的其他节点103得到了第六目标位置矢量，但是子集群对于移动到第六目标位置的过程相比于追逐状态时移动到第六目标位置的过程缓慢一些，且由于同属于一个子集群中的其他节点103受主节点102的约束，因此当确定第三补充速度矢量时，可以预设第三补充速度权重且参考主节点102的第二补充速度矢量，基于预设第三补充速度权重、第六目标位置矢量、第二补充速度矢量和本节点的速度矢量确定本节点的第三补充速度矢量。具体而言，设预设第三补充速度权重为G5，第六目标位置矢量为C1，其他节点103速度矢量的单位矢量为Df，其他节点103速度矢量的大小为Speed3，第二补充速度矢量为V4，则第三补充速度矢量V10可以表示为V10=*speed3*G5+ V4*。S1105：根据所述本节点的跟随矢量、所述本节点的队列矢量、所述本节点的间隔矢量和第三补充速度矢量确定本节点的第二行为。在本实施例中，当所述子集群的目标状态信息为徘徊状态时，需要根据本节点的跟随矢量、本节点的队列矢量、本节点的间隔矢量和第三补充速度矢量确定本节点的第二行为，其中，本节点的跟随矢量、本节点的队列矢量和本节点的间隔矢量的确定方式与上文步骤S901-S903中的确定方式相同，在本实施例中不做赘述。通过上述步骤S1104，得到了本节点的第三补充速度矢量V10，结合图12所示，则其他节点的徘徊速度可以表示为V11=/2+V10。在一个可选的实施例中，上文中提到在进行集群划分时，为了方便控制可以划分不同层级的子集群，具体可以包括一级子集群和二级子集群，其中每个子集群都包括对应的一级主节点和二级主节点，二级主节点可以控制同一个二级子集群的一级主节点，一级主节点可以控制同一个一级子集群的其他节点，因此，一级主节点相对二级主节点的跟随系数权重大于一级主节点对应的一级子集群的其他节点的跟随系数权重，同理，在本实施例中，一级主节点相对二级主节点的补充速度权重大于一级主节点对应的一级子集群的其他节点的补充速度权重。在上述实施例中，其他节点通过将主节点的随机目标和自身的随机目标叠加，使得其他节点在徘徊状态自由移动的同时和子集群中的主节点保持一致的方向，从而实现仿真实自然的集群行为。图13为本申请实施例提供的一种集群控制系统中其他节点实现的流程图，当所属子集群的目标状态信息为逃离状态时，所述其他节点具体用于：S1301：与主节点通信以获取目标障碍物的位置信息和逃离状态，根据所述目标障碍物的位置信息和本节点的位置信息确定目标障碍物与本节点的第七目标位置矢量。在本实施例中，主节点102在检测到目标障碍物之后，会将目标障碍物的信息分享给其他节点103，基于此，其他节点103通过和主节点102通信获取目标障碍物的位置，并获取当前子集群的状态为逃离状态，根据目标障碍物的位置信息和本节点的位置信息确定目标障碍物与本节点的第七目标位置矢量。需要说明的是，本实施例中目标障碍物与本节点的第七目标位置矢量的确定方式与步骤S702中的具体实现方式相同，本实施例中不做赘述。S1302：根据第二预设逃离速度权重、第七目标位置矢量和本节点的速度矢量确定本节点的逃离矢量。在上述步骤S705中，由于所述子集群的目标状态信息为逃离状态，上述步骤S1301中该子集群中的其他节点103通过接收主节点102发送的目标障碍物的位置信息确定了第七目标位置矢量，根据第二预设逃离速度权重、第七目标位置矢量和本节点的速度矢量确定本节点的逃离矢量。需要说明的是，为了保证主节点102控制其他节点逃离目标障碍物，因此上文步骤S705中主节点102的第一预设逃离速度权重大于第二预设逃离速度权重。可以理解的是，当主节点具有不同的层级时，上级主节点的预设逃离速度权重均大于下级主节点的预设逃离速度权重。S1303：根据所述本节点的跟随矢量、所述本节点的队列矢量、所述本节点的间隔矢量和所述本节点的逃离矢量确定本节点的第二行为。在本实施例中，当所述子集群的目标状态信息为逃离状态时，需要根据本节点的跟随矢量、本节点的队列矢量、本节点的间隔矢量和第三补充速度矢量确定本节点的第二行为，其中，本节点的跟随矢量、本节点的队列矢量和本节点的间隔矢量的确定方式与上文步骤S901-S903中的确定方式相同，在本实施例中不做赘述。通过上述步骤S1302，得到了本节点的逃离速度矢量V12，则其他节点的徘徊速度可以表示为V13=/2+V12。在本实施例中，其他节点通过主节点发送的目标障碍物位置信息，实现了跟随主节点逃离障碍物，从而实现处于逃离状态的集群行为。以上为本申请实施例提供集群控制系统的一些具体实现方式，基于此，本申请还提供了对应的方法。图14为申请实施例提供的一种集群控制方法的流程图，结合图14所示，所述方法包括：S1401：通过控制单元设置集群的初始参数；所述初始参数用于指示所述集群被划分的子集群的数量；对于一个子集群，所述子集群由主节点和其他节点构成。S1402：利用主节点根据所属子集群的目标状态信息确定本节点的第一行为，并执行所述第一行为，并与所属子集群中的其他节点通信以共享所述第一行为；所述所属子集群的目标状态信息包括追逐状态、徘徊状态和逃离状态中的至少一个。S1403：利用其他节点与所述主节点通信以获取所述第一行为，根据所述第一行为和所述目标状态信息确定所述其他节点的第二行为，并执行所述第二行为。本申请实施例还提供了对应的设备以及计算机存储介质，用于实现本申请实施例提供的方案。其中，所述设备包括存储器和处理器，所述存储器用于存储指令或代码，所述处理器用于执行所述指令或代码，以使所述设备执行本申请任一实施例所述的集群控制方法。所述计算机存储介质中存储有代码，当所述代码被运行时，运行所述代码的设备实现本申请任一实施例所述的集群控制方法。本申请实施例中提到的 “第一”、“第二”等名称中的“第一”、“第二”只是用来做名字标识，并不代表顺序上的第一、第二。通过以上的实施方式的描述可知，本领域的技术人员可以清楚地了解到上述实施例方法中的全部或部分步骤可借助软件加通用硬件平台的方式来实现。基于这样的理解，本申请的技术方案可以以软件产品的形式体现出来，该计算机软件产品可以存储在存储介质中，如只读存储器/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行本申请各个实施例或者实施例的某些部分所述的方法。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于装置实施例而言，由于其基本相似于方法实施例，所以描述得比较简单，相关之处参见方法实施例的部分说明即可。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。以上所述仅是本申请示例性的实施方式，并非用于限定本申请的保护范围。
