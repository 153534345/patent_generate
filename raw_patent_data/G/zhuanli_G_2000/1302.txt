标题title
基于中间数据池和可视化自定义的系统集成方法及系统
摘要abst
本发明涉及系统集成技术领域，本发明公开了基于中间数据池和可视化自定义的系统集成方法及系统，包括：加载数据发送页，获取源系统数据库，并结合配置项中的展示列要求，映射至所述数据发送页，形成发送窗口属性列；获取待发送数据，并依据所述发送窗口属性列进行显示，响应于数据下发指令，对所述待发送数据进行校验后，根据配置项中的中间表表名和字段名，将所述待发送数据推送至中间表；获取所述配置项的根节点设置的第三方数据库，创建第三方数据库请求，并结合所述配置项中的数据转换规则，组织第三方数据库插入语句，将所述待发送数据插入中间表。节省了开发工作时间，降低成本。
权利要求书clms
1.基于中间数据池和可视化自定义的系统集成方法，其特征在于，包括：加载数据发送页，获取源系统数据库，并结合配置项中的展示列要求，映射至所述数据发送页，形成发送窗口属性列；获取待发送数据，并依据所述发送窗口属性列进行显示，响应于数据下发指令，对所述待发送数据进行校验后，根据配置项中的中间表表名和字段名，将所述待发送数据推送至中间表；获取所述配置项的根节点设置的第三方数据库，创建第三方数据库请求，并结合所述配置项中的数据转换规则，组织第三方数据库插入语句，将所述待发送数据插入中间表。2.如权利要求1所述的基于中间数据池和可视化自定义的系统集成方法，其特征在于，所述根节点包含若干个子节点，每个子节点包括若干个配置项。3.如权利要求1所述的基于中间数据池和可视化自定义的系统集成方法，其特征在于，还包括，结合所述配置项中的下发展示数据值，将所述待发送数据推送至中间表；所述下发展示数据值定义推送至中间表的所述待发送数据为，获取的待发送数据，还是，所述发送窗口属性列显示的待发送数据。4.如权利要求1所述的基于中间数据池和可视化自定义的系统集成方法，其特征在于，还包括，结合所述配置项的根节点设置的下发数据状态，将所述待发送数据推送至中间表；所述下发数据状态定义将所述待发送数据推送至中间表时是否进行状态校验。5.如权利要求1所述的基于中间数据池和可视化自定义的系统集成方法，其特征在于，还包括，结合所述配置项的根节点设置的下发数据规则，将所述待发送数据推送至中间表；所述下发数据规则定义是否允许所述待发送数据重复推送至中间表。6.如权利要求1所述的基于中间数据池和可视化自定义的系统集成方法，其特征在于，还包括：分别响应于新建指令、修改指令、编辑指令和删除指令，对所述配置项的字段进行新建、修改、编辑和删除。7.如权利要求1所述的基于中间数据池和可视化自定义的系统集成方法，其特征在于，还包括：响应于所述根节点的第三方数据库切换指令，更新所述根节点设置的第三方数据库。8.基于中间数据池和可视化自定义的系统集成系统，其特征在于，包括：属性列形成模块，其被配置为：加载数据发送页，获取源系统数据库，并结合配置项中的展示列要求，映射至所述数据发送页，形成发送窗口属性列；数据推送模块，其被配置为：获取待发送数据，并依据所述发送窗口属性列进行显示，响应于数据下发指令，对所述待发送数据进行校验后，根据配置项中的中间表表名和字段名，将所述待发送数据推送至中间表；数据集成模块，其被配置为：获取所述配置项的根节点设置的第三方数据库，创建第三方数据库请求，并结合所述配置项中的数据转换规则，组织第三方数据库插入语句，将所述待发送数据插入中间表。9.如权利要求8所述的基于中间数据池和可视化自定义的系统集成系统，其特征在于，所述根节点包含若干个子节点，每个子节点包括若干个配置项。10.如权利要求8所述的基于中间数据池和可视化自定义的系统集成系统，其特征在于，还包括，集成配置模块，其被配置为：分别响应于新建指令、修改指令、编辑指令和删除指令，对所述配置项的字段进行新建、修改、编辑和删除。
说明书desc
技术领域本发明涉及系统集成技术领域，具体的说，是涉及基于中间数据池和可视化自定义的系统集成方法及系统。背景技术本部分的陈述仅仅是提供了与本发明相关的背景技术信息，不必然构成在先技术。PLM系统，与ERP系统或MES的集成，是工业制造行业较为普遍的需求，其目的是将PLM中的物料信息、BOM结构、工艺卡片中相关信息推送至下游系统中，实现信息化建设满足各业务系统之间协同协作。目前，如图1所示，对于PLM集成方案普遍采用中间数据池集成方式，中间数据池是依托于数据库原生的数据操作的标准实现数据之间交互。PLM与第三方系统集成大多数采用人为驱动的方式，以物料数据下发为例，整个业务流程及逻辑如图2所示。中间数据池集成方式多数情况下需要使用同类别的数据库进行开发，且不同系统数据结构差异较大，对于数据结构的对应关系的可配置性以及可操作性要求较高，大多数情况下，数据发送窗口展示属性列，需要根据不同的项目进行重新定制化开发，普通用户无法自行定义设置，导致PLM系统与其他不同系统集成时，需要进行大量的二次开发工作。传统的中间数据池集成方式，由于数据库类型的限制系统之间进行协同使用过程中，多数情况下要求数据库类型一致，且由于系统之间数据存储表结构设计存在较大的差异，不同系统集成进行集成时，数据发送窗口展示内容通常需要软件开发人员利用前段开发技术针对不同的项目进行定制化的开发，对于系统之间数据推送对应关系多数采用后台XML文件配置方式修改对应关系，造成用户可读性较差，使用群体受到限制，多数情况下需要系统软件开发或实施人员进行修改调整，维护成本较高。发明内容本发明为了解决上述问题，本发明提供基于中间数据池和可视化自定义的系统集成方法及系统，利用可视化集成配置，控制数据发送界面展示与待发送数据的对应关系、控制与第三方数据库字段相关对应关系、以及数据流转业务规则设置，无需进二次开发，节省开发工作时间，降低成本。控制数据下发界面展示列，为了实现上述目的，本发明采用如下技术方案：本发明的第一个方面提供基于中间数据池和可视化自定义的系统集成方法，其包括：加载数据发送页，获取源系统数据库，并结合配置项中的展示列要求，映射至所述数据发送页，形成发送窗口属性列；获取待发送数据，并依据所述发送窗口属性列进行显示，响应于数据下发指令，对所述待发送数据进行校验后，根据配置项中的中间表表名和字段名，将所述待发送数据推送至中间表；获取所述配置项的根节点设置的第三方数据库，创建第三方数据库请求，并结合所述配置项中的数据转换规则，组织第三方数据库插入语句，将所述待发送数据插入中间表。进一步地，所述根节点包含若干个子节点，每个子节点包括若干个配置项。进一步地，还包括，结合所述配置项中的下发展示数据值，将所述待发送数据推送至中间表；所述下发展示数据值定义推送至中间表的所述待发送数据为，获取的待发送数据，还是，所述发送窗口属性列显示的待发送数据。进一步地，还包括，结合所述配置项的根节点设置的下发数据状态，将所述待发送数据推送至中间表；所述下发数据状态定义将所述待发送数据推送至中间表时是否进行状态校验。进一步地，还包括，结合所述配置项的根节点设置的下发数据规则，将所述待发送数据推送至中间表；所述下发数据规则定义是否允许所述待发送数据重复推送至中间表。进一步地，还包括：分别响应于新建指令、修改指令、编辑指令和删除指令，对所述配置项的字段进行新建、修改、编辑和删除。进一步地，还包括：响应于所述根节点的第三方数据库切换指令，更新所述根节点设置的第三方数据库。本发明的第二个方面提供基于中间数据池和可视化自定义的系统集成系统，其包括：属性列形成模块，其被配置为：加载数据发送页，获取源系统数据库，并结合配置项中的展示列要求，映射至所述数据发送页，形成发送窗口属性列；数据推送模块，其被配置为：获取待发送数据，并依据所述发送窗口属性列进行显示，响应于数据下发指令，对所述待发送数据进行校验后，根据配置项中的中间表表名和字段名，将所述待发送数据推送至中间表；数据集成模块，其被配置为：获取所述配置项的根节点设置的第三方数据库，创建第三方数据库请求，并结合所述配置项中的数据转换规则，组织第三方数据库插入语句，将所述待发送数据插入中间表。进一步地，所述根节点包含若干个子节点，每个子节点包括若干个配置项。进一步地，还包括，集成配置模块，其被配置为：分别响应于新建指令、修改指令、编辑指令和删除指令，对所述配置项的字段进行新建、修改、编辑和删除。与现有技术相比，本发明的有益效果为：本发明提供了基于中间数据池和可视化自定义的系统集成方法，其利用可视化集成配置，控制数据发送界面展示与待发送数据的对应关系、控制与第三方数据库字段相关对应关系、以及数据流转业务规则设置，无需进二次开发，节省开发工作时间，降低成本。附图说明构成本发明的一部分说明书附图用来提供对本发明的进一步理解，本发明的示意性实施例及其说明用于解释本发明，并不构成对本发明的限定。图1为传统的中间数据池集成方式示意图；图2为传统的物料数据下发的业务流程图；图3为本发明的实施例一的PLM系统集成数据流转示意图；图4为本发明的实施例一的基于中间数据池和可视化自定义的系统集成方法的流程图；图5为本发明的实施例一的集成配置功能示意图；图6为本发明的实施例一的可视化集成配置界面示意图；图7为本发明的实施例一的数据发送界面示意图。具体实施方式下面结合附图与实施例对本发明作进一步说明。应该指出，以下详细说明都是示例性的，旨在对本发明提供进一步的说明。除非另有指明，本文使用的所有技术和科学术语具有与本发明所属技术领域的普通技术人员通常理解的相同含义。在不冲突的情况下，本发明中的实施例及实施例中的特征可以相互组合下面结合附图与实施例对本发明作进一步说明。实施例一本实施例一的目的是提供基于中间数据池和可视化自定义的系统集成方法，在中间数据池的集成方式的基础上，利用Web技术实现可视化的集成配置，在PLM与其他不同的系统进行集成时，无需进行大量的开发且不需要专业开发人员进行维护，实施人员或管理员可直接针对系统间集成协议方案进行修改相关配置项，自定义数据发送窗口展示内容，以及PLM系统中业务数据与中间数据池存储表结构对应关系，实现数据在不同系统中流转。如图3所示，PLM系统集成数据流转，首先获取数据展示到发送窗口，通过数据校验之后，按照业务数据与中间数据池的对应关系将数据推送至对应的表中，其中可视化配置的要求较高的分为两部分：数据发送窗口属性列展示；PLM系统要推送至中间数据池的业务数据属性值与数据库中间表及表结构的字段对应关系。数据发送窗口属性列内容与要推送的业务数据有着相关联的关系，因此，在开发平台封装技术的基础上实现可视化集成配置，利用可视化集成配置，同时控制数据发送界面展示与数据的对应关系。为实现基于中间数据池的系统集成的可视化动态自定义集成配置，功能界面采用的是“单页面+Ajax”作为基本的界面开发模式，为了屏蔽html、css的技术复杂性以及在各浏览器的兼容性问题，将所有的界面元素进行了二次封装，使用配置文件进行界面布局和配置，利用Web服务器对界面提供支持，包括界面的初始化、配置信息的获取，在此种模式下形成一种新的开发平台。平台将所有常用的控件进行统一的封装，以统一的机制完成控件的生成、布局、数据加载、事件响应、界面操作，控件类型信息专门的配置文件存储,在IIS初始化的时候加载到内存，需要的时候下载到客户端使用。每个控件都有专门的“控件js类”，作为控件的原始类型，封装了控件的创建、操作等必须的接口。“控件生成控制”部分包含了控件实例化、信息获取、ID生成等一系列用于控件生成和控制的通用方法，是页面与控件类的中间层。平台以xml格式配置文件的形式，来进行界面配置，将界面布局、控件类型、控件参数、界面事件等维护到配置文件中，由统一的页面生成和控制机制来完成界面的生成、事件的响应以及其他页面控制。除了基本的初始化以及操作接口之外，平台界面层也提供了界面事件响应的机制。在页面的配置文件中，包括了页面事件以及控件事件两种不同的事件等级，在事件触发的时候，会自动执行配置文件中指定的事件入口脚本。本实施例中的可视化集成配置除主要*.js以外用到以下几种自定义配置文件：*.page*.menu*.eais*.tree。其中，Page表示页面；Menu表示菜单；eais表示一种自定义的文件后缀格式；tree表示树结构。解析集成配置基于如图6所示的可视化集成配置界面，集成配置界面整体分为三个模块：左侧树、数据展示界面、对象属性。左侧树：集成配置将数据按照业务场景分成两个大类：物料下发、BOM下发，采用树形结构，进行展示，内部根据属性类别划分：物料下发划分为：结构信息、基础信息、表单信息；BOM下发，在物料划分的基础上增加bom关系属性分类。数据展示界面：根据左侧树节点所选，数据展示界面展示对应对象集成配置数据。选择父级节点，数据列表展示为下级子节点汇总数据。点击父级节点后，在数据列表顶部设置有“数据库链接”选择下拉框、“重复下发”选择下拉框、“下发数据状态”选择下拉框，切换下拉框自动保存。数据下发一般按照业务类型推送至同一数据库中，因此对集成配置的左侧树按照业务类型分为物料下发、bom下发，对根节点与子节点点击事件右侧数据列菜单功能展示不同。点击根节点时，右侧列表上方位置展示下拉框数据设置：数据库连接、重复下发、以及下发数据状态规则。切换数据库连接，更改第三方数据库连接配置。切换重复下发，更改下发数据规则，是否允许重复下发：否、不允许重复下发数据；是，允许重复下发，第三方数据库中累增数据。切换下发数据状态，下发数据时针对数据内容进行状态校验，发布状态、全部状态均可下发。点击子节点，右侧数据列表上方展示操作菜单，列表内容展示根节点业务数据所涉及到的子节点数据分类，例如：点击物料下发的子节点基础信息，右侧列表展示已经维护的物料的基础信息内容。选择业务节点的子节点进入界面设置相关配置内容。点击子节点后，数据列表展示当前子节点的内容，且在数据列表顶部设置有新建按钮、修改按钮、编辑按钮和删除按钮。新建按钮、修改按钮、编辑按钮和删除按钮等，分别用于对集成配置内容进行新建、修改、编辑和删除。点击新建按钮，创建配置内容，弹窗内容展示的是集成配置中列表字段的维护。其中，集成配置内容的创建，对象类型根据所选业务子节点自动默认数据，可根据实际填写需求进行切换，集成配置项的字段包括：顺序号：用于控制当前集成配置内容在数据下发界面展示位置，排序依据从小到大；对象类型：当前集成配置数据的类别、表单信息或路线信息）；名称：自动关联对象类型所选数据内容；系统管理员可以通过修改对应业务数据模型进行增加或者修改字段，名称下拉内容会自动根据业务模型进行加载；源对象表达式：根据名称自动填充，采用的格式进行填写,可手动更改，允许拼接多个源对象表达式、固定值、以及除‘’之外特殊连接符；例如：； ； _；20221120；其中，ItemObject表示对象名，ENAME、ECODE表示字段名，_表示连接符；目标对象：业务数据下发至中间库表名；目标字段：各数据字段对应中间库表中字段名称；数据转换规则：用于数据转换值例，如：plm系统中的A对应erp系统中的1，需在此处设置：A:1;B:2，存在多组转换用分号隔开；唯一验证条件：不允许重复下发时，设置唯一验证条件为是，作为校验数据重复标志，默认为否；是否展示列：所设置列是否要展示在界面中；下发展示数据值：是：下发界面展示的数值，否：下发数据库中所存的数据；用户可以自行设置数据发送窗口展示列，在集成配置模块进行维护数据，利用Web服务从数据库中读取集成配置所设置的内容，解析集成配置数据组织成grid数据发送窗口列信息；是否必填：必填字段是指在erp需要必须维护数据值。在集成配置模块设有编辑菜单，勾选数据点击编辑菜单，弹出修改界面，修改数据完整之后，数据列表界面会更新，用户在进行数据发送的操作时，后台web接口会重新读取最新的修改后的数据，数据发送窗口展示列会自动更新，在进行下发时也会采用修改后的对应关系。对象属性：数据列表中内嵌对象查看器页签，对行进行点击，则可以展示行数据对象属性值。由于不同类型的数据库之间，字段类型的差别较大，为了达到统一的效果，平台定义了统一的内部字段类型，并和各种不同数据库的字段类型做对应。为了便于调整，以及满足数据库兼容的要求，平台所有的数据库操作命令，以配置文件的形式存在。集成配置模块，主要针对于PLM于第三方系统采用中间库方式进行集成完成物料、BOM相关数据流转过程中的配置中心，配置项用于控制数据下发界面展示列，控制与第三方数据库字段相关对应关系，以及数据流转业务规则设置；集成配置将原有的xml配置内容进行界面可视化，操作简单，便于理解；集成配置模块作为中间数据池集成可视化自定义配置中心。本实施例提供的基于中间数据池和可视化自定义的系统集成配置方法，包括以下步骤：步骤1、对于根节点，接收并存储用户在数据库连接下拉框中选择的第三方数据库、在重复下发下拉数据框中选择的下发数据规则、在下发数据状态数据框中选择的下发数据状态；步骤2、对于子节点，接收并存储集成配置项的字段。本实施例提供的基于中间数据池和可视化自定义的系统集成方法，包括：加载数据发送页，获取源系统数据库，并结合配置项中的展示列要求，映射至所述数据发送页，形成发送窗口属性列；获取待发送数据，并依据所述发送窗口属性列进行显示，响应于数据下发指令，对所述待发送数据进行校验后，根据配置项中的中间表表名和字段名，将所述待发送数据推送至中间表；获取所述配置项的根节点设置的第三方数据库，创建第三方数据库请求，并结合所述配置项中的数据转换规则，组织第三方数据库插入语句，将所述待发送数据插入中间表；其中，根节点包含若干个子节点，每个子节点包括若干个配置项。如图4和图5所示，具体包括以下步骤：步骤、菜单数据下发功能请求web服务；前端解析菜单XML配置文件，调用JS方法加载数据发送page页；步骤、数据发送page页采用XML封装页面容器，嵌套上下两个子page页，两个子page页分别对应操作菜单和数据展示界面，解析数据发送page页内部js，利用ajax请求业务服务接口；步骤、通过请求数据库，获取集成配置内容，解析配置项数据成grid类型，映射至数据page页，形成数据发送窗口属性展示列；步骤、获取发送数据业务集，根据发送窗口属性列，展示对应业务数据内容，数据校验成功之后将待发送数据推送至中间表；步骤、解析集成配置中数据对应关系，创建第三方数据库请求，组织第三方数据库插入语句，调用comdsql执行命令将数据插入erp中间表。如图5所示，主要的业务流转支撑文件：eais，主界面是只数据发送界面，菜单按钮：数据发送事务驱动开始。可视化界面与功能关联是通过EAIS配置文件进行衔接的。EAIS配置文件中主要包含的配置内容：页面加载需要的配置项、数据推送配置项、获取ERP系统中的数据内容。其中，界面加载配置项，配置文件包含xml标签：page和DataList,包括：设置page页名称，界面数据加载接口，界面列加载web服务接口，界面样式设置，设置绑定数据源接口，沿置下发接口。其中，数据推送配置项包括：下发数据实现接口，集成第三方系统的名称，集成配置。其中，获取ERP数据包括：集成实现接口对应plugin文件，查询内容配置，查询数据。菜单按钮点击事务，执行js解析菜单传递对应的配置项的name，在js中请求后台web服务解析配置项中内容，先利用配置中所设置的page名称找到对应的page页，加载整个界面，数据发送界面列表展示；数据下发内容、数据下发接口，则是根据配置文件中所设置绑定数据源服务接口、下发数据实现接口实现，采用这种配置文件的形式，针对不同的项目集成，则只需要更改web服务的指向即可。数据发送page页，即数据发送界面，如图7所示，利用封装控件，采用嵌套式界面，主要由上下两个子界面组成。上方页面对应操作菜单，主要包含文本输入及各种操作按钮，下方是数据展示子页面，主要展示数据发送属性列内容。利用平台运转规则，在菜单XML配置文件后缀名为.eais。菜单XML配置文件中定义了获取、校验、下发的接口以及上下子页面的名称等，支持动态扩展属性。集成组件服务在启动时搜索所有.eais配置文件，以name属性作为主键。如果存在相同name的配置项，则按照组件的优先级进行覆盖。其中，name是一个列表代号，可以为任意名称。利用Web接口，解析集成配置内容，将属性列内容解析成grid类别，加载到界面。其中，grid表示界面网格值类型。根据集成配置下拉选择的数据库链接，下发时创建数据库链接，根据配置项进行数据对应sql语句，调用对应类别的数据库语句，组织语句进行推送至中间数据池。中间数据池方式进行系统集成时，无需进二次开发，对集成配置界面可直接进行数据配置，节省开发工作时间，降低成本。实施例二本实施例二的目的是提供基于中间数据池和可视化自定义的系统集成系统，包括：集成配置模块，其被配置为：分别响应于新建指令、修改指令、编辑指令和删除指令，对所述配置项的字段进行新建、修改、编辑和删除；属性列形成模块，其被配置为：加载数据发送页，获取源系统数据库，并结合配置项中的展示列要求，映射至所述数据发送页，形成发送窗口属性列；数据推送模块，其被配置为：获取待发送数据，并依据所述发送窗口属性列进行显示，响应于数据下发指令，对所述待发送数据进行校验后，根据配置项中的中间表表名和字段名，将所述待发送数据推送至中间表；数据集成模块，其被配置为：获取所述配置项的根节点设置的第三方数据库，创建第三方数据库请求，并结合所述配置项中的数据转换规则，组织第三方数据库插入语句，将所述待发送数据插入中间表。此处需要说明的是，本实施例中的各个模块与实施例一中的各个步骤一一对应，其具体实施过程相同，此处不再累述。以上所述仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。上述虽然结合附图对本发明的具体实施方式进行了描述，但并非对本发明保护范围的限制，所属领域技术人员应该明白，在本发明的技术方案的基础上，本领域技术人员不需要付出创造性劳动即可做出的各种修改或变形仍在本发明的保护范围以内。
