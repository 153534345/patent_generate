标题title
一种实景三维数据构建方法和装置
摘要abst
本发明公开了一种实景三维数据构建方法和装置，方法包括：获取地理场景的DEM数据和漂浮物数据，并生成对应的方块实体和漂浮物实体；根据地理场景的调查分类矢量数据，分别对预设的地理空间高度的方块实体和漂浮物实体进行赋值，生成至少一个第一数据结构和一个对应的第二数据结构；第一数据结构用于存储方块实体或者漂浮物实体的一种属性类型的调查分类矢量数据的值；第二数据结构用于存储方块实体或者漂浮物实体的地理空间高度信息；第一数据结构和第二数据结构的格式相同；根据第一数据结构和第二数据结构，生成实景三维数据文件，以实现降低实景三维模型加载或者修改其实景三维数据的操作难度，提高实景三维模型的数据承载能力。
权利要求书clms
1.一种实景三维数据构建方法，其特征在于，包括：获取第一地理场景的倾斜摄影三维模型数据；将所述倾斜摄影三维模型数据进行切割，生成DEM数据和漂浮物数据；所述DEM数据包括：地表高程信息；根据所述地表高程信息，生成第一方块数据；根据所述漂浮物数据，生成漂浮物的第一实体数据；获取所述第一地理场景的调查分类矢量数据，所述调查分类矢量数据包括第一方块数据的时空属性信息和第一实体数据的时空属性信息；所述第一方块数据的时空属性信息包括：方块随时间变化的空间属性信息；所述第一实体数据的时空属性信息包括：漂浮物随时间变化的空间属性信息；根据所述调查分类矢量数据的属性类型，分别对预设的地理空间高度的所述第一方块数据或者所述第一实体数据进行赋值，生成至少一个第一数据结构和一个对应的第二数据结构；所述第一数据结构用于存储所述第一方块数据或者所述第一实体数据的一种属性类型的调查分类矢量数据的值；所述第二数据结构用于存储所述第一方块数据或者所述第一实体数据的地理空间高度信息；所述第一数据结构和所述第二数据结构的格式相同；根据所述第一数据结构和所述第二数据结构，生成实景三维数据文件。2.如权利要求1所述的一种实景三维数据构建方法，其特征在于，所述根据所述地表高程信息，生成第一方块数据，具体为：在地表高程信息中获取第一地理场景的每个栅格的高程值，根据所述高程值在对应的栅格的位置上纵向生成若干个正方体方块；每个栅格的位置上的正方体方块的数量为对应的栅格的高程值；将所述第一地理场景上的所有正方体方块作为第一方块数据。3.如权利要求2所述的一种实景三维数据构建方法，其特征在于，所述根据所述漂浮物数据，生成漂浮物的第一实体数据，具体为：将漂浮物数据进行实体化，生成若干个三维粒子；其中，一个漂浮物生成一个三维粒子；所述漂浮物为第一地理场景的地表上的物体；将第一地理场景上的所有三维粒子作为漂浮物的第一实体数据。4.如权利要求3所述的一种实景三维数据构建方法，其特征在于，所述根据所述调查分类矢量数据的属性类型，分别对预设的地理空间高度的所述第一方块数据或者所述第一实体数据进行赋值，具体为：根据调查分类矢量数据中正方体方块的属性类型，分别对预设的地理空间高度的第一方块数据进行赋值，所述正方体方块的属性类型包括：空间及物理属性、归类及扩展属性和时间变化属性；根据调查分类矢量数据中三维粒子的属性类型，分别对预设的地理空间高度的第一实体数据进行赋值，所述三维粒子的属性类型包括：空间及物理属性、归类及扩展属性、时间变化属性、组合地理实体属性和聚合地理实体属性。5.如权利要求4所述的一种实景三维数据构建方法，其特征在于，所述生成至少一个第一数据结构和一个对应的第二数据结构，具体为：每次在根据调查分类矢量数据中正方体方块的一种属性类型，对预设的地理空间高度的第一方块数据或者第一实体数据进行赋值后，将赋值后的预设的地理空间高度的第一方块数据按照栅格的顺序存储在一个第一数据结构的数据区内；所述第一数据结构的数据区还包括：属性类型名称标签、数据长度和校验码；将所述预设的地理空间高度的数值按照栅格的顺序存储在一个对应的第二数据结构的数据区内；所述第一数据结构和所述第二数据结构的格式相同。6.如权利要求5所述的一种实景三维数据构建方法，其特征在于，所述根据所述第一数据结构和所述第二数据结构，生成实景三维数据文件，具体为：将所有第一数据结构和其对应的第二数据结构存储在实景三维数据文件的数据区内，并构建所述实景三维数据文件的头部魔数、格式版本号和文件校验码；所述头部魔数用于表示文件格式；所述格式版本号用于表示文件版本；所述文件校验码为文件数据区的字符串MD5值；所述实景三维数据文件用于载入三维模型后，通过算法生成对应的区块三维网格，并使用纹理库对区块三维网格进行渲染。7.一种实景三维数据构建装置，其特征在于，包括：实体构建模块、实体数据模块和数据构建模块；其中，所述实体构建模块用于获取第一地理场景的倾斜摄影三维模型数据；将所述倾斜摄影三维模型数据进行切割，生成DEM数据和漂浮物数据；所述DEM数据包括：地表高程信息；根据所述地表高程信息，生成第一方块数据；根据所述漂浮物数据，生成漂浮物的第一实体数据；所述实体数据模块用于获取所述第一地理场景的调查分类矢量数据，所述调查分类矢量数据包括第一方块数据的时空属性信息和第一实体数据的时空属性信息；所述第一方块数据的时空属性信息包括：方块随时间变化的空间属性信息；所述第一实体数据的时空属性信息包括：漂浮物随时间变化的空间属性信息；所述数据构建模块用于根据所述调查分类矢量数据的属性类型，分别对预设的地理空间高度的所述第一方块数据或者所述第一实体数据进行赋值，生成至少一个第一数据结构和一个对应的第二数据结构；所述第一数据结构用于存储所述第一方块数据或者所述第一实体数据的一种属性类型的调查分类矢量数据的值；所述第二数据结构用于存储所述第一方块数据或者所述第一实体数据的地理空间高度信息；所述第一数据结构和所述第二数据结构的格式相同；根据所述第一数据结构和所述第二数据结构，生成实景三维数据文件。8.如权利要求7所述的一种实景三维数据构建装置，其特征在于，所述实体构建模块包括：方块构建单元和漂浮物构建单元；所述方块构建单元用于在地表高程信息中获取第一地理场景的每个栅格的高程值，根据所述高程值在对应的栅格的位置上纵向生成若干个正方体方块；每个栅格的位置上的正方体方块的数量为对应的栅格的高程值；将所述第一地理场景上的所有正方体方块作为第一方块数据；所述漂浮物构建用于将漂浮物数据进行实体化，生成若干个三维数字时空粒子；其中，一个漂浮物生成一个三维粒子；所述漂浮物为第一地理场景的地表上的物体；将第一地理场景上的所有三维粒子作为漂浮物的第一实体数据。9.如权利要求8所述的一种实景三维数据构建装置，其特征在于，所述实体数据模块包括：赋值单元；所述赋值单元用于根据调查分类矢量数据中正方体方块的属性类型，分别对预设的地理空间高度的第一方块数据进行赋值，所述正方体方块的属性类型包括：空间及物理属性、归类及扩展属性和时间变化属性；根据调查分类矢量数据中三维粒子的属性类型，分别对预设的地理空间高度的第一实体数据进行赋值，所述三维粒子的属性类型包括：空间及物理属性、归类及扩展属性、时间变化属性、组合地理实体属性和聚合地理实体属性。10.如权利要求9所述的一种实景三维数据构建装置，其特征在于，所述数据构建模块包括：数据结构构建单元和文件构建单元；所述数据结构构建单元用于每次在根据调查分类矢量数据中正方体方块的一种属性类型，对预设的地理空间高度的第一方块数据或者第一实体数据进行赋值后，将赋值后的预设的地理空间高度的第一方块数据按照栅格的顺序存储在一个第一数据结构的数据区内；所述第一数据结构的数据区还包括：属性类型名称标签、数据长度和校验码；将所述预设的地理空间高度的数值按照栅格的顺序存储在一个对应的第二数据结构的数据区内；所述第一数据结构和所述第二数据结构的格式相同；所述文件构建单元用于将所有第一数据结构和其对应的第二数据结构存储在实景三维数据文件的数据区内，并构建所述实景三维数据文件的头部魔数、格式版本号和文件校验码；所述头部魔数用于表示文件格式；所述格式版本号用于表示文件版本；所述文件校验码为文件数据区的字符串MD5值。
说明书desc
技术领域本发明涉及实景三维技术领域，尤其涉及一种实景三维数据构建方法、装置及存储介质。背景技术目前的实景三维数据构建方法是以倾斜摄影技术获取多角度航空影像数据为基础，利用影像数据构建最基本的三维场景，即倾斜摄影三维模型。再利用倾斜摄影三维模型生产DEM、DOM和DLG等传统地理信息数据，即实景三维数据。现有的利用实景三维数据生成实景三维模型的方法中，首先用“DOM+DEM”融合的方式生成地理场景；基于DLG中的地理信息要素数据转换生产地理实体，或者，在倾斜摄影三维模型上直接采集生产地理实体；最后将地理场景和地理实体进行融合，产生实景三维模型。上述提到的实景三维模型构建方法中所使用的实景三维数据并不是一种统一的数据格式，而是多种数据的集合，需要实景三维专业软件打开多种数据进行视觉表现。其中，DEM数据一般以ARGIS的GRID格式存储；DOM数据一般以TIFF格式存储；DLG数据以DWG、DXF或SHAPE格式存储；地理实体数据一般以FBX、OSGB、OBJ、DEA、3DS等三维格式存储。现有的实景三维模型需要承载的全部自然资源信息的支撑能力不足，具体表现为，一是难以用三维空间的表达方式区分地表覆盖层、地表基质层、地下矿藏层等多层次的土地资源；二是当前以“DOM+DEM+实体模型”构建实景三维的数据结构，其数据承载能力不足，基本不能表达水系、海洋、大气的资源信息，表达地下资源也很困难；三是由于实景三维数据具有多种格式，多种格式数据之间操作困难，不便于修改，因此地理实体是固化的，不可分解、不可转化，对时空变化的信息无法表达，不具备表达复杂三维地理空间信息的能力。发明内容本发明提供了一种实景三维数据构建方法和装置，通过构建实景三维数据的时空表达方式，并统一各实景三维数据的格式，以实现降低实景三维模型加载或者修改其实景三维数据的操作难度，提高实景三维模型的数据承载能力。本发明提供了一种实景三维数据构建方法，包括：获取第一地理场景的倾斜摄影三维模型数据；将所述倾斜摄影三维模型数据进行切割，生成DEM数据和漂浮物数据；所述DEM数据包括：地表高程信息；根据所述地表高程信息，生成第一方块数据；根据所述漂浮物数据，生成漂浮物的第一实体数据；获取所述第一地理场景的调查分类矢量数据，所述调查分类矢量数据包括第一方块数据的时空属性信息和第一实体数据的时空属性信息；所述第一方块数据的时空属性信息包括：方块随时间变化的空间属性信息；所述第一实体数据的时空属性信息包括：漂浮物随时间变化的空间属性信息；根据所述调查分类矢量数据的属性类型，分别对预设的地理空间高度的所述第一方块数据或者所述第一实体数据进行赋值，生成至少一个第一数据结构和一个对应的第二数据结构；所述第一数据结构用于存储所述第一方块数据或者所述第一实体数据的一种属性类型的调查分类矢量数据的值；所述第二数据结构用于存储所述第一方块数据或者所述第一实体数据的地理空间高度信息；所述第一数据结构和所述第二数据结构的格式相同；根据所述第一数据结构和所述第二数据结构，生成实景三维数据文件。进一步地，根据所述地表高程信息，生成第一方块数据，具体为：在地表高程信息中获取第一地理场景的每个栅格的高程值，根据所述高程值在对应的栅格的位置上纵向生成若干个正方体方块；每个栅格的位置上的正方体方块的数量为对应的栅格的高程值；将所述第一地理场景上的所有正方体方块作为第一方块数据。进一步地，根据所述漂浮物数据，生成漂浮物的第一实体数据，具体为：将漂浮物数据进行实体化，生成若干个三维粒子；其中，一个漂浮物生成一个三维粒子；所述漂浮物为第一地理场景的地表上的物体；将第一地理场景上的所有三维粒子作为漂浮物的第一实体数据。进一步地，根据所述调查分类矢量数据的属性类型，分别对预设的地理空间高度的所述第一方块数据或者所述第一实体数据进行赋值，具体为：根据调查分类矢量数据中正方体方块的属性类型，分别对预设的地理空间高度的第一方块数据进行赋值，所述正方体方块的属性类型包括：空间及物理属性、归类及扩展属性和时间变化属性；根据调查分类矢量数据中三维粒子的属性类型，分别对预设的地理空间高度的第一实体数据进行赋值，所述三维粒子的属性类型包括：空间及物理属性、归类及扩展属性、时间变化属性、组合地理实体属性和聚合地理实体属性。进一步地，生成至少一个第一数据结构和一个对应的第二数据结构，具体为：每次在根据调查分类矢量数据中正方体方块的一种属性类型，对预设的地理空间高度的第一方块数据或者第一实体数据进行赋值后，将赋值后的预设的地理空间高度的第一方块数据按照栅格的顺序存储在一个第一数据结构的数据区内；所述第一数据结构的数据区还包括：属性类型名称标签、数据长度和校验码；将所述预设的地理空间高度的数值按照栅格的顺序存储在一个对应的第二数据结构的数据区内；所述第一数据结构和所述第二数据结构的格式相同。进一步地，根据所述第一数据结构和所述第二数据结构，生成实景三维数据文件，具体为：将所有第一数据结构和其对应的第二数据结构存储在实景三维数据文件的数据区内，并构建所述实景三维数据文件的头部魔数、格式版本号和文件校验码；所述头部魔数用于表示文件格式；所述格式版本号用于表示文件版本；所述文件校验码为文件数据区的字符串MD5值；所述实景三维数据文件用于载入三维模型后，通过算法生成对应的区块三维网格，并使用纹理库对区块三维网格进行渲染。作为优选方案，本发明融合了调查分类矢量数据、DEM数据、实体模型进行真实纹理表达，本发明根据实景三维数据使用纹理库对区块三维网格进行渲染，实景三维数据所需要的数据更少，具有数据量轻量化优势。相应地，本发明还提供一种实景三维数据构建装置，包括：实体构建模块、实体数据模块和数据构建模块；其中，所述实体构建模块用于获取第一地理场景的倾斜摄影三维模型数据；将所述倾斜摄影三维模型数据进行切割，生成DEM数据和漂浮物数据；所述DEM数据包括：地表高程信息；根据所述地表高程信息，生成第一方块数据；根据所述漂浮物数据，生成漂浮物的第一实体数据；所述实体数据模块用于获取所述第一地理场景的调查分类矢量数据，所述调查分类矢量数据包括第一方块数据的时空属性信息和第一实体数据的时空属性信息；所述第一方块数据的时空属性信息包括：方块随时间变化的空间属性信息；所述第一实体数据的时空属性信息包括：漂浮物随时间变化的空间属性信息；所述数据构建模块用于根据所述调查分类矢量数据的属性类型，分别对预设的地理空间高度的所述第一方块数据或者所述第一实体数据进行赋值，生成至少一个第一数据结构和一个对应的第二数据结构；所述第一数据结构用于存储所述第一方块数据或者所述第一实体数据的一种属性类型的调查分类矢量数据的值；所述第二数据结构用于存储所述第一方块数据或者所述第一实体数据的地理空间高度信息；所述第一数据结构和所述第二数据结构的格式相同；根据所述第一数据结构和所述第二数据结构，生成实景三维数据文件。进一步地，实体构建模块包括：方块构建单元和漂浮物构建单元；所述方块构建单元用于在地表高程信息中获取第一地理场景的每个栅格的高程值，根据所述高程值在对应的栅格的位置上纵向生成若干个正方体方块；每个栅格的位置上的正方体方块的数量为对应的栅格的高程值；将所述第一地理场景上的所有正方体方块作为第一方块数据；所述漂浮物构建用于将漂浮物数据进行实体化，生成若干个三维数字时空粒子；其中，一个漂浮物生成一个三维粒子；所述漂浮物为第一地理场景的地表上的物体；将第一地理场景上的所有三维粒子作为漂浮物的第一实体数据。进一步地，实体数据模块包括：赋值单元；所述赋值单元用于根据调查分类矢量数据中正方体方块的属性类型，分别对预设的地理空间高度的第一方块数据进行赋值，所述正方体方块的属性类型包括：空间及物理属性、归类及扩展属性和时间变化属性；根据调查分类矢量数据中三维粒子的属性类型，分别对预设的地理空间高度的第一实体数据进行赋值，所述三维粒子的属性类型包括：空间及物理属性、归类及扩展属性、时间变化属性、组合地理实体属性和聚合地理实体属性。进一步地，数据构建模块包括：数据结构构建单元和文件构建单元；所述数据结构构建单元用于每次在根据调查分类矢量数据中正方体方块的一种属性类型，对预设的地理空间高度的第一方块数据或者第一实体数据进行赋值后，将赋值后的预设的地理空间高度的第一方块数据按照栅格的顺序存储在一个第一数据结构的数据区内；所述第一数据结构的数据区还包括：属性类型名称标签、数据长度和校验码；将所述预设的地理空间高度的数值按照栅格的顺序存储在一个对应的第二数据结构的数据区内；所述第一数据结构和所述第二数据结构的格式相同；所述文件构建单元用于将所有第一数据结构和其对应的第二数据结构存储在实景三维数据文件的数据区内，并构建所述实景三维数据文件的头部魔数、格式版本号和文件校验码；所述头部魔数用于表示文件格式；所述格式版本号用于表示文件版本；所述文件校验码为文件数据区的字符串MD5值。作为优选方案，本发明装置先利用实体构建模块以方块和漂浮物构造基本数据单位，即三维时空粒子，并通过实体数据模块根据调查分类矢量数据对三维时空粒子进行赋值，能够承载绝大部分物质的时间信息、空间信息、物理属性信息、自然属性信息和人文业务属性信息；最后通过数据构建模块构造出该实景三维数据。相比现有技术的大幅提升了实景三维数据的信息承载能力，不仅能体现复杂三维地理空间信息还能够体现信息的时空变化。三维时空粒子承载的信息以对方块或者实体进行赋值的形式生成的数据结构具备易构建，易修改以及表达方式直观的特点，降低实景三维模型加载或者修改其实景三维数据的操作难度。相应地，本发明还提供一种计算机可读存储介质，所述计算机可读存储介质包括存储的计算机程序；其中，所述计算机程序在运行时控制所述计算机可读存储介质所在的设备执行如本发明内容所述的一种实景三维数据构建方法。附图说明图1是本发明提供的实景三维数据构建方法的一种实施例的流程示意图；图2是本发明提供的实景三维数据构建方法的一种实施例的单位区块的初始三维模型的示意图；图3是本发明提供的实景三维数据构建方法的一种实施例的渲染后的单位区块三维模型的示意图；图4是本发明提供的实景三维数据构建方法的一种实施例的渲染后的整体三维模型的示意图；图5是本发明提供的实景三维数据构建装置的一种实施例的结构示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例一请参照图1，为本发明实施例提供的一种实景三维数据构建方法，包括步骤S101-S103：步骤S101：获取第一地理场景的倾斜摄影三维模型数据；将所述倾斜摄影三维模型数据进行切割，生成DEM数据和漂浮物数据；所述DEM数据包括：地表高程信息；根据所述地表高程信息，生成第一方块数据；根据所述漂浮物数据，生成漂浮物的第一实体数据；进一步地，根据所述地表高程信息，生成第一方块数据，具体为：在地表高程信息中获取第一地理场景的每个栅格的高程值，根据所述高程值在对应的栅格的位置上纵向生成若干个正方体方块；每个栅格的位置上的正方体方块的数量为对应的栅格的高程值；将所述第一地理场景上的所有正方体方块作为第一方块数据。进一步地，根据所述漂浮物数据，生成漂浮物的第一实体数据，具体为：将漂浮物数据进行实体化，生成若干个三维粒子；其中，一个漂浮物生成一个三维粒子；所述漂浮物为第一地理场景的地表上的物体；将第一地理场景上的所有三维粒子作为漂浮物的第一实体数据。在本实施例中，DEM数据是数字高程模型的缩写，是由倾斜摄影三维模型加航空摄影激光点云数据生产而来的，描述了去掉植被、房屋、人工构筑物之后的地表高程信息。DEM是一种栅格数据，每个栅格的灰度值代表了该地理位置的高程，将其在该位置上进行纵向拉伸可生成若干个方块。例如，DEM中其中一个栅格的高程值为330，可在该栅格位置上纵向生成330个正方体方块，同理在每一个栅格都生成与其高程数值相等的正方体方块后，即可形成连续起伏的三维地理场景。而地表上的植被和房屋等造型复杂的地理实体不适宜用方块表示，因此从倾斜摄影模型中将植被、房屋切割下来进行实体化，生成漂浮物漂浮于该物体原本的空间位置的方式进行三维展现。因此，通过“方块+漂浮物”构造出三维空间中的全部三维实体，其中，每个方块视为一个三维数字时空粒子，方块一般用来描述地理场景信息；每个漂浮物视为一个三维数字时空粒子，视为漂浮于三维数字时空中的漂浮物。需要说明的是，本发明中第一方块数据表示的第一地理场景上所有正方体方块，以及第一实体数据表示的第一地理场景上所有三维粒子，即漂浮物实体。这些正方体方块实体和漂浮物实体均没有属性，需要通过调查分类矢量数据对正方体方块实体和漂浮物实体进行属性赋值，使每个方块和漂浮物均具有与现实世界该空间位置填充物质对应的各类属性信息。步骤S102：获取所述第一地理场景的调查分类矢量数据，所述调查分类矢量数据包括第一方块数据的时空属性信息和第一实体数据的时空属性信息；所述第一方块数据的时空属性信息包括：方块随时间变化的空间属性信息；所述第一实体数据的时空属性信息包括：漂浮物随时间变化的空间属性信息；在本实施例中，调查分类矢量数据是各部委的如国土空间调查、土地利用调查、矿产资源调查或者人口普查等等调查专项形成的数据，一般以矢量数据或表格数据存储，当这些调查分类矢量数据具有空间位置信息时，可根据空间位置将调查数据的属性赋值给在同一空间位置的三维实体，以生成实景三维数据文件。示例性地，方块随时间变化的空间属性信息用方块时间变化表表示如下：方块时间变化表表达了方块的时间信息和演变信息。方块的时间变化基于如下认知：物质A的属性发生变化，演变为物质B，通过演变的过程，人类能够感觉到时间；若所有的物质均一直无变化，则人类无法感受到时间；物质B变为物质A，则人类会感觉到时间倒流。因此人类对时间的认知是由于物质产生演变引起的，时间与属性变化必须同时存在。方块时间变化表记录了每个方块的一切属性变化的时间点，因此也就记录了时间。需要说明的是此表只举例挂载了方块空间位置和属性按变化的时间顺序的变化，但是不限于挂载了方块空间位置和属性的变化，还可以挂载方块的其他属性表的变化。同理，漂浮物随时间变化的空间属性信息与方块的相应信息的形式大致相同，不再赘述。在本实施例中，所述第一方块数据的时空属性信息还包括：方块空间及物理属性信息和方块归类及扩展属性信息；示例性地，方块空间及物理属性信息用方块空间及物理属性基础表表示如下：方块空间及物理属性基础表描述了方块的空间位置、边长、方向、物理状态、密度、物质基本属性和纹理表现，为强化数据结构的稳定性，该表的字段项不能进行扩展。示例性地，方块归类及扩展属性信息用方块归类及扩展属性表表示如下：方块归类及扩展属性表表达了方块的各类自然信息、人文信息、业务管理信息等。类似地，所述第一实体数据的时空属性信息还包括：漂浮物空间及物理属性信息和漂浮物归类及扩展属性信息；示例性地，漂浮物空间及物理属性信息用漂浮物空间及物理属性基础表表示如下：漂浮物空间及物理属性基础表描述了漂浮物的空间位置、方向、物理状态、物质基本属性和基本物质含量，为强化数据结构的稳定性，该表的字段项不能进行扩展。同理，漂浮物的归类及扩展属性信息与方块的相应表格雷同，不再赘述。步骤S103：根据所述调查分类矢量数据的属性类型，分别对预设的地理空间高度的所述第一方块数据或者所述第一实体数据进行赋值，生成至少一个第一数据结构和一个对应的第二数据结构；所述第一数据结构用于存储所述第一方块数据或者所述第一实体数据的一种属性类型的调查分类矢量数据的值；所述第二数据结构用于存储所述第一方块数据或者所述第一实体数据的地理空间高度信息；所述第一数据结构和所述第二数据结构的格式相同；根据所述第一数据结构和所述第二数据结构，生成实景三维数据文件。进一步地，根据所述调查分类矢量数据的属性类型，分别对预设的地理空间高度的所述第一方块数据或者所述第一实体数据进行赋值，具体为：根据调查分类矢量数据中正方体方块的属性类型，分别对预设的地理空间高度的第一方块数据进行赋值，所述正方体方块的属性类型包括：空间及物理属性、归类及扩展属性和时间变化属性；根据调查分类矢量数据中三维粒子的属性类型，分别对预设的地理空间高度的第一实体数据进行赋值，所述三维粒子的属性类型包括：空间及物理属性、归类及扩展属性、时间变化属性、组合地理实体属性和聚合地理实体属性。进一步地，生成至少一个第一数据结构和一个对应的第二数据结构，具体为：每次在根据调查分类矢量数据中正方体方块的一种属性类型，对预设的地理空间高度的第一方块数据或者第一实体数据进行赋值后，将赋值后的预设的地理空间高度的第一方块数据按照栅格的顺序存储在一个第一数据结构的数据区内；所述第一数据结构的数据区还包括：属性类型名称标签、数据长度和校验码；将所述预设的地理空间高度的数值按照栅格的顺序存储在一个对应的第二数据结构的数据区内；所述第一数据结构和所述第二数据结构的格式相同。作为其中一种实施例，示例性地，以平面地理信息为例，取第一地理场景的地表高程作为预设的地理空间高度，也就是对地表最高处的方块实体进行赋值。将第一地理场景地表最高处的每个栅格的地理类型对应的数值按照栅格的顺序存储于第一数据结构的数据区，第一数据结构命名为“CHUNK”。将第一地理场景的地表高程数值按照栅格的顺序存储在一个对应的第二数据结构的数据区内，第二数据结构命名为“CHUNK_H”。作为其中另一种实施例，取第一地理场景的同一个地理高度作为预设的地理空间高度，示例性地，取第一地理场景高度均为1的高度作为预设的地理空间高度，也就是对地表最底层的方块实体进行赋值。将第一地理场景高度为1的每个栅格的地理类型对应的数值按照栅格的顺序存储于第一数据结构的数据区，第一数据结构命名为“CHUNK”。将第一地理场景的地表高程数值按照栅格的顺序存储在一个对应的第二数据结构的数据区内，第二数据结构命名为“CHUNK_H”。同理，对逐层高度的方块实体进行赋值，最终能够将第一地理场景的所有方块实体进行赋值。对漂浮物实体，即第一实体数据进行赋值同理，不再赘述。进一步地，根据所述第一数据结构和所述第二数据结构，生成实景三维数据文件，具体为：将所有第一数据结构和其对应的第二数据结构存储在实景三维数据文件的数据区内，并构建所述实景三维数据文件的头部魔数、格式版本号和文件校验码；所述头部魔数用于表示文件格式；所述格式版本号用于表示文件版本；所述文件校验码为文件数据区的字符串MD5值；所述实景三维数据文件用于载入三维模型后，通过算法生成对应的区块三维网格，并使用纹理库对区块三维网格进行渲染。在本实施例中，根据所述第一数据结构和所述第二数据结构，生成实景三维数据文件，完成了“调查分类矢量数据+DEM数据+漂浮物数据”的融合统一，实景三维数据文件的格式为*.gbox。在本实施例中，实景三维数据文件的头部魔数、格式版本号和文件校验码，具体为：头部魔数：字符串，通常为“GBOX”，主要用户确定是否是该文件格式，占据6字节空间。格式版本号：用于区分不同版本之间文件数据区不同功能数据结构，从而有效的为开发相关程序时提供版本向上和向下读取兼容，占据12个字节空间。文件校验码：为后面数据区计算的32位字符串MD5值。允许用0填充留空，软件开发时将不做全局数据校验，占据32个字节空间。实景三维数据文件的数据区用于存储若干个数据结构，如第一数据结构“CHUNK”和第二数据结构“CHUNK_H”；数据结构包括：标签、数据长度、校验码和数据；标签为字符串，表示数据的类型的业务含义，代表该数据结构的“物质基本属性”，占据8字节空间。校验码：为一个数据字节补充一个二进制位，称为校验位，使字节的8位和该校验位含有1值的个数为奇数或偶数。数据：则是该数据的真实值，用二进制代表的数值。数据长度：该标签类型下数据的总字节长度，占据4字节空间。示例性地，该数据结构的标签type代表该数据区的方块的属性类型名称，标签内部名称是type，数据长度是24，数据占据3个字节空间，则该数据结构表示如下：在本实施例中，以平面地理信息为例，将平面地理矢量信息，如Shapefile栅格化后，划分成16x16个单位数据，每个单位数据表示一个栅格的地理类型信息，每个单位数据占据2字节。则表示地理类型信息的数据结构标签为CHUNK；数据划分为16x16个数据分块，每个数据分块大小一样，数据为16x16x2个字节，即512个字节；数据长度为4096。其中，数据分块遵从从上之下，从左到右的方式连续存储每个单位数据。若最后划分块时不足16x16个单位数据则需要用0填充补齐到16x16。该2字节单位数据主要表达地理类型，如泥土、沙、水等，地理类型编码由具体软件开发商自行定义。其对应的CHUNK_H 标签数据结构和上述CHUNK标签数据结构一致，区别在于CHUNK_H 标签数据结构的数据由地理类型信息变为地形高度信息，用2字节表示，表示CHUNK标签数据结构中对应的数据分块的高度。*.gbox数据类似于乐高积木的颗粒化三维模型，*.gbox是一种类似于*.shap的多文件数据存储格式。在*gbox格式下能够存在多个存储表格，每个表格描述三维数字时空粒子的不同属性及性质。在本实施例中，通过软件工具，加载DEM、调查分类矢量数据后自动生成*.gbox文件，利用专用的可视化软件打开*.gbox文件即可展示地形三维模型，在可视化软件中加载漂浮物后，即可形成最后的三维数字时空模型成果。该地形三维模型不仅能够体现时间的变化，还能在专用软件环境中对虚拟的外部环境因子做出反馈。在本实施例中，根据*.gbox文件中的DEM数据和调查监测矢量数据，以特定算法组合成多个区块三维网格进行渲染，建设渲染时DrawCall次数，优化CPU到GPU之间的消耗。示例性地，将16x16个方块单位作为一个单位区块，如图2所示，为单位区块的初始三维模型的示意图，通过算法动态组织区块网格的点、线、面，以稳定三角形组成的网格表面，生成初始三维模型的示意图。相比独立的方块对象，本发明大大减少了所需渲染的面的数量，提高了载入时三维模型生成的效率以及动态渲染时的效率，该方式相比动态渲染独立方块对象时，网格三角面数量减少近6倍，对象数量减少近300倍，在不同的复杂度地形下粗略估算渲染效率提升约450%。如图3所示，为渲染后的单位区块三维模型的示意图，通过算法根据区块数据中地形类型来动态划分网格的UV分布，整个地形以单个材质实现高效的地形渲染，而非一个方块调用一种纹理材质。通过编写着色器代码最终达到图3所示的渲染效果。用同样的方式构建并渲染多个单位区块，并将单位区块按顺序排列拼接后，生成如图4的渲染后的整体三维模型的示意图。若需要修改其中的地形，重新载入该单位区块的*.gbox文件，软件匹配对应的单位区块，通知该单位区块重新刷新，即可构建新的地形。实施本发明实施例，具有如下效果：本发明融合了调查分类矢量数据、DEM数据、实体模型进行真实纹理表达，本发明根据实景三维数据使用纹理库对区块三维网格进行渲染，实景三维数据所需要的数据更少，具有数据量轻量化优势。实施例二请参照图5，为本发明实施例提供的一种实景三维数据构建装置，包括：实体构建模块201、实体数据模块202和数据构建模块203；其中，所述实体构建模块201用于获取第一地理场景的倾斜摄影三维模型数据；将所述倾斜摄影三维模型数据进行切割，生成DEM数据和漂浮物数据；所述DEM数据包括：地表高程信息；根据所述地表高程信息，生成第一方块数据；根据所述漂浮物数据，生成漂浮物的第一实体数据；所述实体数据模块202用于获取所述第一地理场景的调查分类矢量数据，所述调查分类矢量数据包括第一方块数据的时空属性信息和第一实体数据的时空属性信息；所述第一方块数据的时空属性信息包括：方块随时间变化的空间属性信息；所述第一实体数据的时空属性信息包括：漂浮物随时间变化的空间属性信息；所述数据构建模块203用于根据所述调查分类矢量数据的属性类型，分别对预设的地理空间高度的所述第一方块数据或者所述第一实体数据进行赋值，生成至少一个第一数据结构和一个对应的第二数据结构；所述第一数据结构用于存储所述第一方块数据或者所述第一实体数据的一种属性类型的调查分类矢量数据的值；所述第二数据结构用于存储所述第一方块数据或者所述第一实体数据的地理空间高度信息；所述第一数据结构和所述第二数据结构的格式相同；根据所述第一数据结构和所述第二数据结构，生成实景三维数据文件。实体构建模块201包括：方块构建单元和漂浮物构建单元；所述方块构建单元用于在地表高程信息中获取第一地理场景的每个栅格的高程值，根据所述高程值在对应的栅格的位置上纵向生成若干个正方体方块；每个栅格的位置上的正方体方块的数量为对应的栅格的高程值；将所述第一地理场景上的所有正方体方块作为第一方块数据；所述漂浮物构建用于将漂浮物数据进行实体化，生成若干个三维数字时空粒子；其中，一个漂浮物生成一个三维粒子；所述漂浮物为第一地理场景的地表上的物体；将第一地理场景上的所有三维粒子作为漂浮物的第一实体数据。实体数据模块202包括：赋值单元；所述赋值单元用于根据调查分类矢量数据中正方体方块的属性类型，分别对预设的地理空间高度的第一方块数据进行赋值，所述正方体方块的属性类型包括：空间及物理属性、归类及扩展属性和时间变化属性；根据调查分类矢量数据中三维粒子的属性类型，分别对预设的地理空间高度的第一实体数据进行赋值，所述三维粒子的属性类型包括：空间及物理属性、归类及扩展属性、时间变化属性、组合地理实体属性和聚合地理实体属性。数据构建模块203包括：数据结构构建单元和文件构建单元；所述数据结构构建单元用于每次在根据调查分类矢量数据中正方体方块的一种属性类型，对预设的地理空间高度的第一方块数据或者第一实体数据进行赋值后，将赋值后的预设的地理空间高度的第一方块数据按照栅格的顺序存储在一个第一数据结构的数据区内；所述第一数据结构的数据区还包括：属性类型名称标签、数据长度和校验码；将所述预设的地理空间高度的数值按照栅格的顺序存储在一个对应的第二数据结构的数据区内；所述第一数据结构和所述第二数据结构的格式相同；所述文件构建单元用于将所有第一数据结构和其对应的第二数据结构存储在实景三维数据文件的数据区内，并构建所述实景三维数据文件的头部魔数、格式版本号和文件校验码；所述头部魔数用于表示文件格式；所述格式版本号用于表示文件版本；所述文件校验码为文件数据区的字符串MD5值。所述实景三维数据文件用于载入三维模型后，通过算法生成对应的区块三维网格，并使用纹理库对区块三维网格进行渲染。上述的实景三维数据构建装置可实施上述方法实施例的实景三维数据构建方法。上述方法实施例中的可选项也适用于本实施例，这里不再详述。本申请实施例的其余内容可参照上述方法实施例的内容，在本实施例中，不再进行赘述。实施本发明实施例，具有如下效果：本发明装置先利用实体构建模块以方块和漂浮物构造基本数据单位，即三维时空粒子，并通过实体数据模块根据调查分类矢量数据对三维时空粒子进行赋值，能够承载绝大部分物质的时间信息、空间信息、物理属性信息、自然属性信息和人文业务属性信息；最后通过数据构建模块构造出该实景三维数据。相比现有技术的大幅提升了实景三维数据的信息承载能力，不仅能体现复杂三维地理空间信息还能够体现信息的时空变化。三维时空粒子承载的信息以对方块或者实体进行赋值的形式生成的数据结构具备易构建，易修改以及表达方式直观的特点，降低实景三维模型加载或者修改其实景三维数据的操作难度。实施例三相应地，本发明还提供一种计算机可读存储介质，所述计算机可读存储介质包括存储的计算机程序，其中，在所述计算机程序运行时控制所述计算机可读存储介质所在设备执行如上任意一项实施例所述的实景三维数据构建方法。示例性的，所述计算机程序可以被分割成一个或多个模块/单元，所述一个或者多个模块/单元被存储在所述存储器中，并由所述处理器执行，以完成本发明。所述一个或多个模块/单元可以是能够完成特定功能的一系列计算机程序指令段，该指令段用于描述所述计算机程序在所述终端设备中的执行过程。所述终端设备可以是桌上型计算机、笔记本、掌上电脑及云端服务器等计算设备。所述终端设备可包括，但不仅限于，处理器、存储器。所称处理器可以是中央处理单元，还可以是其他通用处理器、数字信号处理器 、专用集成电路、现场可编程门阵列  或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等，所述处理器是所述终端设备的控制中心，利用各种接口和线路连接整个终端设备的各个部分。所述存储器可用于存储所述计算机程序和/或模块，所述处理器通过运行或执行存储在所述存储器内的计算机程序和/或模块，以及调用存储在存储器内的数据，实现终端设备的各种功能。所述存储器可主要包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需的应用程序等；存储数据区可存储根据移动终端的使用所创建的数据等。此外，存储器可以包括高速随机存取存储器，还可以包括非易失性存储器，例如硬盘、内存、插接式硬盘，智能存储卡，安全数字卡，闪存卡、至少一个磁盘存储器件、闪存器件、或其他易失性固态存储器件。其中，所述终端设备集成的模块/单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明实现上述实施例方法中的全部或部分流程，也可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一计算机可读存储介质中，该计算机程序在被处理器执行时，可实现上述各个方法实施例的步骤。其中，所述计算机程序包括计算机程序代码，所述计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。所述计算机可读介质可以包括：能够携带所述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。以上所述的具体实施例，对本发明的目的、技术方案和有益效果进行了进一步的详细说明，应当理解，以上所述仅为本发明的具体实施例而已，并不用于限定本发明的保护范围。特别指出，对于本领域技术人员来说，凡在本发明的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
