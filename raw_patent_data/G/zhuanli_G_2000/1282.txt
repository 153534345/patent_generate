标题title
一种铸材表面瑕疵边缘视觉检测方法、系统、装置及介质
摘要abst
本发明涉及一种铸材表面瑕疵边缘视觉检测方法、系统、装置及介质，涉及图像处理的技术领域，其中铸材表面瑕疵边缘视觉检测方法包括特征提取、初次计算、初次判断、二次计算、二次判断、输出、反馈等步骤；铸材表面瑕疵边缘视觉检测系统包括收集模块、上传模块、储存模块、计算模块I、判断模块I、计算模块II、判断模块II、输出模块以及反馈模块；本发明通过判断铸件表面是否有凹陷或凸起扎堆的情况，进而提高对铸件表面瑕疵的检测精度，进而提高铸件的出厂时的质量。
权利要求书clms
1.一种铸材表面瑕疵边缘视觉检测方法，其特征在于：包括以下步骤：特征提取：对边缘打磨后的铸件进行n个方向上的拍照，并形成照片集合M，对照片集合M中的照片Mn进行灰度处理；以照片Mn的像素为单位，建立坐标系，对照片Mn上的像素进行坐标赋值，使每一个像素均对应一个坐标；初次计算：计算照片Mn中第一异常灰度个数K，第一异常灰度个数K的计算模型如下：；；式中为照片Mn上像素对应的坐标，Mn为坐标对应的灰度值，Z为第一灰度阈值；初次判断：设置第一异常灰度个数阈值T，若K＞T，则判断铸件为不合格，若K≤T时，则执行二次计算步骤；二次计算：在照片Mn的像素对应的坐标上取c*c的像素区域，计算c*c的像素区域中第二异常灰度个数，第二异常灰度个数/＞的计算模型如下：；；；；Z1为第二灰度阈值；式中i为选定区域c*c在x轴方向上的个数，j为选定区域c*c在y轴方向上的个数；i的取值范围为：；j的取值范围为：/＞；其中A为x轴上像素的数量，B为图像中y轴上像素的数量；二次判断：设置第二异常灰度个数阈值T1以及第三异常灰度个数阈值T2，若＞T2，则判断铸件为不合格，若/＞≤T1，则判断铸件为合格，若T1＜/＞≤T2，则判断铸件为残次品，并执行输出步骤。2.根据权利要求1所述的一种铸材表面瑕疵边缘视觉检测方法，其特征在于：当二次判断中T1＜≤T2时执行输出步骤；输出：当T1＜≤T2时，输出像素区域c*c的坐标，并输出坐标区域/＞；。3.根据权利要求2所述的一种铸材表面瑕疵边缘视觉检测方法，其特征在于：所述输出步骤后还设置有反馈步骤，当输出步骤中输出坐标区域后，执行反馈步骤；反馈：将坐标区域以及/＞对应的铸件实体表面进行修补反馈，提醒工作人员根据反馈信息对铸件进行修补，并再次执行二次计算步骤。4.根据权利要求2所述的一种铸材表面瑕疵边缘视觉检测方法，其特征在于：所述初次判断步骤中当K＞T时，则不再对其它方向n上的照片Mn执行初步计算，所述二次判断步骤中当＞T2时，则不再对照片Mn执行二次计算。5.一种铸材表面瑕疵边缘视觉检测系统，应用权利要求1-4中任意一项所述的铸材表面瑕疵边缘视觉检测方法，其特征在于：包括收集模块、上传模块、储存模块、计算模块I、判断模块I、计算模块II以及判断模块II；收集模块：输出端与上传模块的输入端电信号连接，用于对边缘打磨后的铸件进行n个方向上的拍照，并形成照片集合M，对照片集合M中的照片Mn进行灰度处理；以照片Mn的像素为单位，建立坐标系，对照片Mn上的像素进行坐标赋值，使每一个像素均对应一个坐标；上传模块：输出端与储存模块的输入端电信号连接，用于向储存模块中上传收集模块收集的信息；储存模块：输入端与上传模块的输出端电信号连接，输出端与计算模块I的输入端电信号连接，用于储存上传模块上传的信息；计算模块I：输出端与判断模块I的输入端电信号连接，用于计算计算照片Mn中第一异常灰度个数K，判断模块I：输出端与计算模块II的输入端电信号连接，在判断模块I中设置第一异常灰度个数阈值T，若K＞T，则判断铸件为不合格，若K≤T时，则将判断结果传递至计算模块II；计算模块II：输出端与判断模块II的输入端电信号连接，用于在照片Mn的像素对应的坐标上取c*c的像素区域，计算c*c的像素区域中第二异常灰度个数，移动模块：输入端与计算模块II的输出端电信号连接，用于使c*c的像素区域在照片Mn上移动；判断模块II：在判断模块II中设置第二异常灰度个数阈值T1以及第三异常灰度个数阈值T2，若＞T2，则判断铸件为不合格，若/＞≤T1，则判断铸件为合格，若T1＜/＞≤T2，则判断铸件为残次品。6.根据权利要求5所述的一种铸材表面瑕疵边缘视觉检测系统，其特征在于：还包括输出模块；输出模块：输入端与判断模块II的输出端电信号连接，当判断模块II中T1＜≤T2时，输出模块输出像素区域c*c的坐标，并输出坐标区域/＞；/＞；所述输出模块还输出判断模块I以及判断模块II中的判断结果。7.根据权利要求5所述的一种铸材表面瑕疵边缘视觉检测系统，其特征在于：还包括反馈模块；反馈模块：输入端与输出模块的输出端电信号连接，当输出模块中输出坐标区域后，反馈模块将坐标区域；/＞对应的铸件实体表面进行反馈，提醒工作人员根据反馈信息对铸件进行修补，并再次将信号传递至计算模块II。8.根据权利要求5所述的一种铸材表面瑕疵边缘视觉检测系统，其特征在于：所述判断模块I中当K＞T时，则不再对其它方向n上的照片Mn执行计算模块I，所述判断模块II中当＞T2时，则不再对照片Mn执行计算模块II。9.一种铸材表面瑕疵边缘视觉检测装置，其特征在于：包括处理器以及储存器，所述储存器用于存储计算机程序，所述处理器用于执行所述储存器存储的计算机程序，以使所述装置执行如权利要求1-4中任意一项所述的方法。10.一种用于铸材表面瑕疵边缘视觉检测的计算机储存介质，其上存储有计算机程序；其特征在于：所述计算机程序被处理器执行时实现如权利要求1-4中任意一项所述的方法。
说明书desc
技术领域本发明涉及图像处理的技术领域，尤其是涉及一种铸材表面瑕疵边缘视觉检测方法、系统、装置及介质。背景技术近年来全球对铝合金铸件的需求量逐年增长。由于我国的铝资源具有得天独厚的优势，所以目前我国的铝合金压铸行业呈现一个高速发展的态势。根据报道，福建省现阶段每年铸件产量约三百万吨，其中铝合金铸件的比例在四分之三以上，压铸产业已成为我省装备制造业发展的重要基础。铸件是通过浇筑模型浇筑出金属的形状，当铸件冷却后对铸件的边缘进行打磨，但是在浇注过程中产生的气体未能及时逸出而形成的孔洞凹陷，或模具中可能有杂质，引起杂质融化形成凸起，进而需要打磨结束后对铸件的表面进行缺陷检测，目前，现有的铸件表面检测方法是，通过拍取铸件表面的照片，分析铸件表面的凹陷或凸起的个数是否达标。但是，铸件表面的凸起或凹陷的分布可能是不均匀的，当铸件表面的凹陷或凸起扎堆时，可能会导致不合格的铸件被误识别为合格的铸件，进而降低了铸件的生产质量。发明内容为了能够提高铸件的生产质量，本发明提供一种铸材表面瑕疵边缘视觉检测方法、系统、装置及介质。第一方面，本发明提供的一种铸材表面瑕疵边缘视觉检测方法，采用如下的技术方案：一种铸材表面瑕疵边缘视觉检测方法，包括以下步骤：特征提取：对边缘打磨后的铸件进行n个方向上的拍照，并形成照片集合M，对照片集合M中的照片Mn进行灰度处理；以照片Mn的像素为单位，建立坐标系，对照片Mn上的像素进行坐标赋值，使每一个像素均对应一个坐标；初次计算：计算照片Mn中第一异常灰度个数K，第一异常灰度个数K的计算模型如下：；；式中为照片Mn上像素对应的坐标，Mn为坐标对应的灰度值，Z为第一灰度阈值；初次判断：设置第一异常灰度个数阈值T，若K＞T，则判断铸件为不合格，若K≤T时，则执行二次计算步骤；二次计算：在照片Mn的像素对应的坐标上取c*c的像素区域，计算c*c的像素区域中第二异常灰度个数，第二异常灰度个数/＞的计算模型如下：；；；；Z1为第二灰度阈值；式中i为选定区域c*c在x轴方向上的个数，j为选定区域c*c在y轴方向上的个数；i的取值范围为：；j的取值范围为：；其中A为x轴上像素的数量，B为图像中y轴上像素的数量；二次判断：设置第二异常灰度个数阈值T1以及第三异常灰度个数阈值T2，若＞T2，则判断铸件为不合格，若/＞≤T1，则判断铸件为合格，若T1＜/＞≤T2，则判断铸件为残次品，并执行输出步骤。可选的，当二次判断中T1＜≤T2时执行输出步骤；输出：当T1＜≤T2时，输出像素区域c*c的坐标，并输出坐标区域；/＞。可选的，所述输出步骤后还设置有反馈步骤，当输出步骤中输出坐标区域后，执行反馈步骤；反馈：将坐标区域以及/＞对应的铸件实体表面进行修补反馈，提醒工作人员根据反馈信息对铸件进行修补，并再次执行二次计算步骤。可选的，所述初次判断步骤中当K＞T时，则不再对其它方向n上的照片Mn执行初步计算，所述二次判断步骤中当＞T2时，则不再对照片Mn执行二次计算。第二方面，本发明提供的一种铸材表面瑕疵边缘视觉检测系统，采用如下的技术方案：一种铸材表面瑕疵边缘视觉检测系统，包括收集模块、上传模块、储存模块、计算模块I、判断模块I、计算模块II以及判断模块II；收集模块：输出端与上传模块的输入端电信号连接，用于对边缘打磨后的铸件进行n个方向上的拍照，并形成照片集合M，对照片集合M中的照片Mn进行灰度处理；以照片Mn的像素为单位，建立坐标系，对照片Mn上的像素进行坐标赋值，使每一个像素均对应一个坐标；上传模块：输出端与储存模块的输入端电信号连接，用于向储存模块中上传收集模块收集的信息；储存模块：输入端与上传模块的输出端电信号连接，输出端与计算模块I的输入端电信号连接，用于储存上传模块上传的信息；计算模块I：输出端与判断模块I的输入端电信号连接，用于计算计算照片Mn中第一异常灰度个数K，第一异常灰度个数K的计算模型如下：；；式中为照片Mn上像素对应的坐标，Mn为坐标对应的灰度值，Z为第一灰度阈值；判断模块I：输出端与计算模块II的输入端电信号连接，在判断模块I中设置第一异常灰度个数阈值T，若K＞T，则判断铸件为不合格，若K≤T时，则将判断结果传递至计算模块II；计算模块II：输出端与判断模块II的输入端电信号连接，用于在照片Mn的像素对应的坐标上取c*c的像素区域，计算c*c的像素区域中第二异常灰度个数，第二异常灰度个数/＞的计算模型如下：；；；；Z1为第二灰度阈值；式中i为选定区域c*c在x轴方向上的个数，j为选定区域c*c在y轴方向上的个数；i的取值范围为：；j的取值范围为：；其中A为x轴上像素的数量，B为图像中y轴上像素的数量；判断模块II：在判断模块II中设置第二异常灰度个数阈值T1以及第三异常灰度个数阈值T2，若＞T2，则判断铸件为不合格，若/＞≤T1，则判断铸件为合格，若T1＜/＞≤T2，则判断铸件为残次品。可选的，还包括输出模块；输出模块：输入端与判断模块II的输出端电信号连接，当判断模块II中T1＜≤T2时，输出模块输出像素区域c*c的坐标，并输出坐标区域/＞；/＞。可选的，还包括反馈模块；反馈模块：输入端与输出模块的输出端电信号连接，当输出模块中输出坐标区域后，反馈模块将坐标区域；/＞对应的铸件实体表面进行反馈，提醒工作人员根据反馈信息对铸件进行修补，并再次将信号传递至计算模块II。可选的，所述判断模块I中当K＞T时，则不再对其它方向n上的照片Mn执行计算模块I，所述判断模块II中当＞T2时，则不再对照片Mn执行计算模块II。第三方面，本发明提供一种铸材表面瑕疵边缘视觉检测装置，采用如下技术方案：一种装置，包括处理器以及储存器，所述储存器用于存储计算机程序，所述处理器用于执行所述储存器存储的计算机程序，以使所述装置执行如第一方面所述的方法。第四方面，本发明提供的一种用于铸材表面瑕疵边缘视觉检测的计算机储存介质，采用如下的技术方案：一种介质，其上存储有计算机程序；所述计算机程序被处理器执行时实现如第一方面所述的方法。综上所述，本发明包括以下至少一种有益技术效果：1. 对铸件进行多方向拍照，并形成照片集合M，对照片集合M中的照片Mn进行灰度处理，计算每个方向上照片灰度处理后的异常灰度个数，进而判断出每个方向上的照片对一部分的铸件表面师傅存在瑕疵，进而提高剔除瑕疵铸件的效率。2.通过对照片上取区域c*c，判断在区域c*c中是否有异常灰度集中，进而判断出铸件表面是否有扎堆的凹陷或凸起，进而提高对铸件表面瑕疵的检测精度，进而提高铸件的生产质量。3.通过计算出铸件表面瑕疵的位置，判断是否还可以进行修复，进而降低铸件的生产成本。附图说明图1是本申请实施例1的流程图；图2是实施例2的系统图；图3是实施例3的总线通信结构示意图。具体实施方式以下结合图1至图3对本发明作进一步详细说明。实施例1：本实施例公开了一种铸材表面瑕疵边缘视觉检测方法，参照图1，一种铸材表面瑕疵边缘视觉检测方法包括以下步骤：S1：特征提取：对边缘打磨后的铸件进行n个方向上的拍照，并形成照片集合M，对照片集合M中的照片Mn进行灰度处理；以照片Mn的像素为单位，建立坐标系，对照片Mn上的像素进行坐标赋值，使每一个像素均对应一个坐标；）。S2：初次计算：计算照片Mn中第一异常灰度个数K，第一异常灰度个数K的计算模型如下：；；式中为照片Mn上像素对应的坐标，Mn为坐标对应的灰度值，Z为第一灰度阈值；。S3：初次判断：设置第一异常灰度个数阈值T，若K＞T，则判断铸件为不合格，若K≤T时，则执行二次计算步骤；若在判断中第一次出现K＞T，则不再对其它方向n上的照片Mn执行S4步骤；。S4：二次计算：在照片Mn的像素对应的坐标上取c*c的像素区域，计算c*c的像素区域中第二异常灰度个数，第二异常灰度个数/＞的计算模型如下：；；；；Z1为第二灰度阈值；式中i为选定区域c*c在x轴方向上的个数，j为选定区域c*c在y轴方向上的个数；i的取值范围为：；j的取值范围为：；其中A为x轴上像素的数量，B为图像中y轴上像素的数量；，在y轴上的取值范围是；当区域30*30沿x轴方向移动时，每次移动一个单位，则在x轴上的取值范围是，在y轴上的取值范围是；当区域30*30沿y轴方向移动时，每次移动一个单位，则在x轴上的取值范围是，在y轴上的取值范围是；当在x轴上移动2个单位，且在y轴上移动3个单位时，则在x轴上的取值范围是，在y轴上的取值范围是）。S5：二次判断：设置第二异常灰度个数阈值T1以及第三异常灰度个数阈值T2，若＞T2，则判断铸件为不合格，若/＞≤T1，则判断铸件为合格，若T1＜/＞≤T2，则判断铸件为残次品，并执行输出步骤，若在判断中第一次出现/＞＞T2，则不再对照片Mn执行S4步骤；。S6：输出：当S5步骤中T1＜≤T2时，输出像素区域c*c的坐标，并输出坐标区域/＞；/＞。，并输出坐标区域/＞；/＞，当S6步骤中输出坐标区域后，执行反馈步骤；将坐标区域/＞以及/＞对应的铸件实体表面进行修补反馈，提醒工作人员根据反馈信息对铸件进行修补，并再次执行二次计算步骤。实施例2：本实施例公开了一种铸材表面瑕疵边缘视觉检测系统，参照图2，包括收集模块、上传模块、储存模块、计算模块I、判断模块I、计算模块II、判断模块II、输出模块以及反馈模块：收集模块：输出端与上传模块的输入端电信号连接，用于对边缘打磨后的铸件进行n个方向上的拍照，并形成照片集合M，对照片集合M中的照片Mn进行灰度处理；以照片Mn的像素为单位，建立坐标系，对照片Mn上的像素进行坐标赋值，使每一个像素均对应一个坐标。上传模块：输出端与储存模块的输入端电信号连接，用于向储存模块中上传收集模块收集的信息。储存模块：输入端与上传模块的输出端电信号连接，输出端与计算模块I的输入端电信号连接，用于储存上传模块上传的信息。计算模块I：输出端与判断模块I的输入端电信号连接，用于计算计算照片Mn中第一异常灰度个数K，第一异常灰度个数K的计算模型如下：；；式中为照片Mn上像素对应的坐标，Mn为坐标对应的灰度值，Z为第一灰度阈值。判断模块I：输出端与计算模块II的输入端电信号连接，在判断模块I中设置第一异常灰度个数阈值T，若K＞T，则判断铸件为不合格，若K≤T时，则将判断结果传递至计算模块II，若在判断中第一次出现K＞T，则不再对其它方向n上的照片Mn执行计算模块II。计算模块II：输出端与判断模块II的输入端电信号连接，用于在照片Mn的像素对应的坐标上取c*c的像素区域，计算c*c的像素区域中第二异常灰度个数，第二异常灰度个数/＞的计算模型如下：；；；；Z1为第二灰度阈值；式中i为选定区域c*c在x轴方向上的个数，j为选定区域c*c在y轴方向上的个数；i的取值范围为：；j的取值范围为：；其中A为x轴上像素的数量，B为图像中y轴上像素的数量。移动模块：输入端与计算模块II的输出端电信号连接，用于使c*c的像素区域在照片Mn上移动。判断模块II：在判断模块II中设置第二异常灰度个数阈值T1以及第三异常灰度个数阈值T2，若＞T2，则判断铸件为不合格，若/＞≤T1，则判断铸件为合格，若T1＜/＞≤T2，则判断铸件为残次品,若在判断中第一次出现/＞＞T2，则不再对照片Mn执行计算模块II。输出模块：输入端与判断模块II的输出端电信号连接，当判断模块II中T1＜≤T2时，输出模块输出像素区域c*c的坐标，并输出坐标区域/＞；/＞。反馈模块：输入端与输出模块的输出端电信号连接，当输出模块中输出坐标区域后，反馈模块将坐标区域；/＞对应的铸件实体表面进行反馈，提醒工作人员根据反馈信息对铸件进行修补，并再次将信号传递至计算模块II。本实施例一种铸材表面瑕疵边缘视觉检测系统的实施原理为：收集模块用于对边缘打磨后的铸件进行n个方向上的拍照，并形成照片集合M，对照片集合M中的照片Mn进行灰度处理；以照片Mn的像素为单位，建立坐标系，对照片Mn上的像素进行坐标赋值，使每一个像素均对应一个坐标，收集模块将收集的数据通过上传模块上传到储存模块中，储存模块将储存上传模块上传的信息计算模块I调用储存模块中储存的信息，并计算照片Mn中第一异常灰度个数K，第一异常灰度个数K的计算模型如下：；；式中为照片Mn上像素对应的坐标，Mn为坐标对应的灰度值，Z为第一灰度阈值；判断模块I对计算模块I中计算的结果进行判断，在判断模块I中设置第一异常灰度个数阈值T，若K＞T，则判断铸件为不合格，若K≤T时，则将判断结果传递至计算模块II，若在判断中第一次出现K＞T，则不再对其它方向n上的照片Mn执行计算模块II；计算模块II在照片Mn的像素对应的坐标上取c*c的像素区域，计算c*c的像素区域中第二异常灰度个数，第二异常灰度个数/＞的计算模型如下：；；；；Z1为第二灰度阈值；式中i为选定区域c*c在x轴方向上的个数，j为选定区域c*c在y轴方向上的个数；i的取值范围为：；j的取值范围为：；其中A为x轴上像素的数量，B为图像中y轴上像素的数量；判断模块II对计算模块II中计算的结果进行判断，在判断模块II中设置第二异常灰度个数阈值T1以及第三异常灰度个数阈值T2，若/＞＞T2，则判断铸件为不合格，若/＞≤T1，则判断铸件为合格，若T1＜/＞≤T2，则判断铸件为残次品,若在判断中第一次出现/＞＞T2，则不再对照片Mn执行计算模块II；当判断模块II中T1＜/＞≤T2时，将信息传递至输出模块，输出模块输出像素区域c*c的坐标，并输出坐标区域/＞；/＞，输出模块输出坐标X，Y后，将信息传递至反馈模块，反馈模块将坐标区域/＞；/＞对应的铸件实体表面进行反馈，提醒工作人员根据反馈信息对铸件进行修补，并再次将信号传递至计算模块II。实施例3：本实施例公开了一种资源匹配装置，参照图3，信息推荐装置包括：储存器，用于储存计算机程序；处理器，用于执行储存器储存的计算机程序，进而实现实施例1中所述的方法。储存器可以包括用于储存数据或指令的大容量储存器。举例来说而非限制，储存器可以包括硬盘、软盘、闪存、光盘、磁光盘、磁带或者两个或更多个以上这些的组合。在合适的情况下，储存器可包括可移除或不可移除的介质。在合适的情况下，储存器可在数据处理装置的内部或外部。在特定实施例中，储存器是非易失性固态储存器。在特定实施例中，储存器包括只读储存器。在合适的情况下，该ROM可以是掩模编程的ROM、可编程ROM、可擦除PROM、电可擦除PROM、电可改写ROM或者两个或更多个以上这些的组合。实施例4：本实施例公开了一种用于资源匹配的计算机储存介质，其中，该计算机储存介质存储有程序，该程序执行时能够实现实施例1中所记载的方法的部分或全部步骤。以上均为本发明的较佳实施例，并非依此限制本发明的保护范围，故：凡依本发明的结构、形状、原理所做的等效变化，均应涵盖于本发明的保护范围之内。
