标题title
商品损坏检测方法、装置及存储介质
摘要abst
本申请提供了一种商品损坏检测方法、装置及存储介质，计算机设备可以在获取到无人商店的监控视频片段时，分别识别每帧视频图像的指关节纹区域，并根据每帧视频图像中的各个指关节纹区域在该帧视频图像中标注手指结构，该手指结构可以反映顾客各根手指的弯曲状态。计算机设备可以将已标注手指结构的监控视频片段输入至手部动作分类模型中，使得手部动作分类模型可以基于各根手指的弯曲状态准确识别并输出顾客的手部动作类型。计算机设备可以基于手部动作类型判断无人商店内的商品是否被人为损坏。如此，可以自动、准确地检测无人商店内的商品是否人为损坏，从而可进一步提高无人商店的自动化程度。
权利要求书clms
1.一种商品损坏检测方法，其特征在于，所述方法包括：在满足预设检测规则的情况下，获取无人商店的监控视频片段；针对所述监控视频片段的每帧视频图像，在该视频图像中识别指关节纹区域，并根据该视频图像中各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构；将已标注手指结构的监控视频片段输入至预先训练得到的手部动作分类模型中，以获取由所述手部动作分类模型输出的手部动作类型；基于所述手部动作类型生成检测结果，所述检测结果用于指示所述无人商店内的商品是否被人为损坏。2.根据权利要求1所述的方法，其特征在于，针对每帧视频图像，根据该视频图像中各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构，包括：针对每帧视频图像，根据该视频图像中每个所述指关节纹区域的像素信息，分别确定每个所述指关节纹区域对应的关节纹类型，并基于各个所述关节纹类型对各个所述指关节纹区域进行分组，根据分组情况和各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构；其中，属于同一组的各个指关节纹区域对应同一手指，分属于不同组的各个指关节纹区域分别对应不同手指。3.根据权利要求2所述的方法，其特征在于，针对每帧视频图像，根据该视频图像中每个所述指关节纹区域的像素信息，分别确定每个所述指关节纹区域对应的关节纹类型，包括：针对每帧视频图像的每个指关节纹区域，生成该指关节纹区域对应的灰度直方图，并计算所述灰度直方图中每一灰度等级对应的像素比例，根据各个所述灰度等级对应的像素比例确定该指关节纹区域对应的纹理复杂度，且基于所述纹理复杂度确定该指关节纹区域对应的关节纹类型。4.根据权利要求3所述的方法，其特征在于，针对每帧视频图像的每个指关节纹区域，根据各个所述灰度等级对应的像素比例确定该指关节纹区域对应的纹理复杂度，包括：针对每帧视频图像的每个指关节纹区域，计算该指关节纹区域对应的灰度直方图的灰度均值，并采用以下表达式计算该指关节纹区域对应的纹理复杂度：；式中，为该指关节纹区域对应的纹理复杂度；/＞为该指关节纹区域对应的灰度等级数量；/＞为在该指关节纹区域对应的灰度直方图中，第i个灰度等级对应的灰度值；/＞为该指关节纹区域对应的灰度直方图的灰度均值；/＞为在该指关节纹区域对应的灰度直方图中，第i个灰度等级对应的像素比例。5.根据权利要求3所述的方法，其特征在于，针对每帧视频图像的每个指关节纹区域，基于所述纹理复杂度确定该指关节纹区域对应的关节纹类型，包括：针对每帧视频图像的每个指关节纹区域，若该指关节纹区域对应的纹理复杂度大于预设复杂度阈值，则该指关节纹区域对应的关节纹类型为中间关节纹，否则，该指关节纹区域对应的关节纹类型为远侧关节纹。6.根据权利要求2所述的方法，其特征在于，每个所述指关节纹区域对应的关节纹类型为中间关节纹或远侧关节纹；针对每帧视频图像，基于各个所述关节纹类型对各个所述指关节纹区域进行分组，包括：针对每帧视频图像，分别确定该视频图像中每一中间关节纹区域对应的最近远侧关节纹区域，以及每一远侧关节纹区域对应的最近中间关节纹区域；其中，关节纹类型为中间关节纹的指关节纹区域为中间关节纹区域，关节纹类型为远侧关节纹的指关节纹区域为远侧关节纹区域；针对每个中间关节纹区域，将该中间关节纹区域作为第一目标区域，以及将第一目标区域对应的最近远侧关节纹区域作为第二目标区域，若第二目标区域对应的最近中间关节纹区域为第一目标区域，则确定第一目标区域和第二目标区域属于同一组，否则，确定第一目标区域和第二目标区域属于不同组。7.根据权利要求1至6任一项所述的方法，其特征在于，所述基于所述手部动作类型生成检测结果，包括：根据所述监控视频片段，识别被持握商品的商品种类；基于所述商品种类确定所述被持握商品对应的损坏动作类型集合；若所述损坏动作类型集合包括所述手部动作类型，则生成用于指示所述无人商店内的商品已被人为损坏的损坏检测结果。8.根据权利要求1至6任一项所述的方法，其特征在于，所述在满足预设检测规则的情况下，获取无人商店的监控视频片段，包括：实时获取所述无人商店内每个货架对应的商品重量；在检测到任一所述货架对应的商品重量减少时，启动目标摄像头，以通过所述目标摄像头获取所述监控视频片段；其中，所述目标摄像头为设于目标货架的摄像头，所述目标货架为商品重量减少的货架。9.一种商品损坏检测装置，其特征在于，所述装置包括：视频片段获取模块，用于在满足预设检测规则的情况下，获取无人商店的监控视频片段；手指结构标注模块，用于针对所述监控视频片段的每帧视频图像，在该视频图像中识别指关节纹区域，并根据该视频图像中各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构；手部动作类型确定模块，用于将已标注手指结构的监控视频片段输入至预先训练得到的手部动作分类模型中，以获取由所述手部动作分类模型输出的手部动作类型；检测结果生成模块，用于基于所述手部动作类型生成检测结果，所述检测结果用于指示所述无人商店内的商品是否被人为损坏。10.一种存储介质，其特征在于，所述存储介质中存储有计算机可读指令，所述计算机可读指令被一个或多个处理器执行时，使得一个或多个处理器执行如权利要求1至8中任一项所述商品损坏检测方法的步骤。
说明书desc
技术领域本申请涉及图像识别技术领域，尤其涉及一种商品损坏检测方法、装置及存储介质。背景技术随着软件算法和硬件设备的不断发展和优化，无人技术已经逐渐应用在日常生活中，例如无人驾驶、无人机、无人工厂、无人商店等。其中，无人商店是指通过技术手段对商店内的所有或部分经营流程进行智能化自动处理，以降低人工干预的店铺，其可以自动检测顾客的选购商品、自动生成订单、自动收款。无人商店由于具备设置方便、人力成本低、运营效率高的优点，具有广阔的发展前景。但是，随着无人商店的普及，新的问题和挑战也随之出现。由于无人商店现场没有设置店员岗位，因此无法及时发现顾客损坏商品的行为，进而无法制止损坏行为的继续或及时要求赔偿。由此可见，有必要提供一种能够自动检测商品是否被人为损坏的方案。发明内容本申请的目的旨在至少能解决上述的技术缺陷之一，特别是现有技术中无法自动检测商品是否被人为损坏的技术缺陷。第一方面，本申请实施例提供了一种商品损坏检测方法，所述方法包括：在满足预设检测规则的情况下，获取无人商店的监控视频片段；针对所述监控视频片段的每帧视频图像，在该视频图像中识别指关节纹区域，并根据该视频图像中各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构；将已标注手指结构的监控视频片段输入至预先训练得到的手部动作分类模型中，以获取由所述手部动作分类模型输出的手部动作类型；基于所述手部动作类型生成检测结果，所述检测结果用于指示所述无人商店内的商品是否被人为损坏。在其中一个实施例中，针对每帧视频图像，根据该视频图像中各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构，包括：针对每帧视频图像，根据该视频图像中每个所述指关节纹区域的像素信息，分别确定每个所述指关节纹区域对应的关节纹类型，并基于各个所述关节纹类型对各个所述指关节纹区域进行分组，根据分组情况和各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构；其中，属于同一组的各个指关节纹区域对应同一手指，分属于不同组的各个指关节纹区域分别对应不同手指。在其中一个实施例中，针对每帧视频图像，根据该视频图像中每个所述指关节纹区域的像素信息，分别确定每个所述指关节纹区域对应的关节纹类型，包括：针对每帧视频图像的每个指关节纹区域，生成该指关节纹区域对应的灰度直方图，并计算所述灰度直方图中每一灰度等级对应的像素比例，根据各个所述灰度等级对应的像素比例确定该指关节纹区域对应的纹理复杂度，且基于所述纹理复杂度确定该指关节纹区域对应的关节纹类型。在其中一个实施例中，针对每帧视频图像的每个指关节纹区域，根据各个所述灰度等级对应的像素比例确定该指关节纹区域对应的纹理复杂度，包括：针对每帧视频图像的每个指关节纹区域，计算该指关节纹区域对应的灰度直方图的灰度均值，并采用以下表达式计算该指关节纹区域对应的纹理复杂度：；式中，为该指关节纹区域对应的纹理复杂度；/＞为该指关节纹区域对应的灰度等级数量；/＞为在该指关节纹区域对应的灰度直方图中，第i个灰度等级对应的灰度值；为该指关节纹区域对应的灰度直方图的灰度均值；/＞为在该指关节纹区域对应的灰度直方图中，第i个灰度等级对应的像素比例。在其中一个实施例中，针对每帧视频图像的每个指关节纹区域，基于所述纹理复杂度确定该指关节纹区域对应的关节纹类型，包括：针对每帧视频图像的每个指关节纹区域，若该指关节纹区域对应的纹理复杂度大于预设复杂度阈值，则该指关节纹区域对应的关节纹类型为中间关节纹，否则，该指关节纹区域对应的关节纹类型为远侧关节纹。在其中一个实施例中，每个所述指关节纹区域对应的关节纹类型为中间关节纹或远侧关节纹；针对每帧视频图像，基于各个所述关节纹类型对各个所述指关节纹区域进行分组，包括：针对每帧视频图像，分别确定该视频图像中每一中间关节纹区域对应的最近远侧关节纹区域，以及每一远侧关节纹区域对应的最近中间关节纹区域；其中，关节纹类型为中间关节纹的指关节纹区域为中间关节纹区域，关节纹类型为远侧关节纹的指关节纹区域为远侧关节纹区域；针对每个中间关节纹区域，将该中间关节纹区域作为第一目标区域，以及将第一目标区域对应的最近远侧关节纹区域作为第二目标区域，若第二目标区域对应的最近中间关节纹区域为第一目标区域，则确定第一目标区域和第二目标区域属于同一组，否则，确定第一目标区域和第二目标区域属于不同组。在其中一个实施例中，所述基于所述手部动作类型生成检测结果，包括：根据所述监控视频片段，识别被持握商品的商品种类；基于所述商品种类确定所述被持握商品对应的损坏动作类型集合；若所述损坏动作类型集合包括所述手部动作类型，则生成用于指示所述无人商店内的商品已被人为损坏的损坏检测结果。在其中一个实施例中，所述在满足预设检测规则的情况下，获取无人商店的监控视频片段，包括：实时获取所述无人商店内每个货架对应的商品重量；在检测到任一所述货架对应的商品重量减少时，启动目标摄像头，以通过所述目标摄像头获取所述监控视频片段；其中，所述目标摄像头为设于目标货架的摄像头，所述目标货架为商品重量减少的货架。第二方面，本申请实施例提供了一种商品损坏检测装置，所述装置包括：视频片段获取模块，用于在满足预设检测规则的情况下，获取无人商店的监控视频片段；手指结构标注模块，用于针对所述监控视频片段的每帧视频图像，在该视频图像中识别指关节纹区域，并根据该视频图像中各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构；手部动作类型确定模块，用于将已标注手指结构的监控视频片段输入至预先训练得到的手部动作分类模型中，以获取由所述手部动作分类模型输出的手部动作类型；检测结果生成模块，用于基于所述手部动作类型生成检测结果，所述检测结果用于指示所述无人商店内的商品是否被人为损坏。第三方面，本申请实施例提供了一种存储介质，该存储介质中存储有计算机可读指令，该计算机可读指令被一个或多个处理器执行时，使得一个或多个处理器执行上述任一实施例所述商品损坏检测方法的步骤。第四方面，本申请实施例提供了一种计算机设备，该计算机设备包括：一个或多个处理器，以及存储器；所述存储器中存储有计算机可读指令，所述计算机可读指令被所述一个或多个处理器执行时，执行上述任一实施例所述商品损坏检测方法的步骤。在本申请一些实施例提供的商品损坏检测方法、装置及存储介质中，计算机设备可以在获取到无人商店的监控视频片段时，分别识别每帧视频图像的指关节纹区域，并根据每帧视频图像中的各个指关节纹区域在该帧视频图像中标注手指结构，该手指结构可以反映顾客各根手指的弯曲状态。计算机设备可以将已标注手指结构的监控视频片段输入至手部动作分类模型中，使得手部动作分类模型可以基于各根手指的弯曲状态准确识别并输出顾客的手部动作类型。计算机设备可以基于手部动作类型判断无人商店内的商品是否被人为损坏。如此，可以自动、准确地检测无人商店内的商品是否人为损坏，从而可进一步提高无人商店的自动化程度。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其它的附图。图1为一个实施例中商品损坏检测方法的应用示意图；图2为一个实施例中商品损坏检测方法的流程示意图；图3为一个实施例中基于手部动作类型生成检测结果步骤的流程示意图；图4为一个实施例中商品损坏检测装置的结构框图；图5为一个实施例中计算机设备的内部结构图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。在一些实施例中，本申请提供的商品损坏检测方法可以应用于图1所示的应用环境中。其中，计算机设备104可以是具备数据处理功能的设备，可以但不限于是各种个人计算机、笔记本电脑和服务器。摄像头102可以是具备视频采集功能与通信功能的设备。摄像头102的数量可以为一个或多个，本文对此不作具体限制。每个摄像头102可以设置在无人商店中并生成无人商店的监控视频，从而可通过监控视频记录无人商店的店内情况。计算机设备104可以与各个摄像头102通信连接或电连接，以获取由摄像头102采集得到的监控视频并据此判断无人商店内的商品是否被人为损坏。可以理解，摄像头数量和每个摄像头102的设置位置均可依据无人商店的面积大小、无人商店的格局和/或无人商店的商品摆放情况等实际因素确定，本文对此不作具体限定。在一个示例中，摄像头102可以包括至少一个第一摄像头和至少一个第二摄像头，各个第一摄像头均可设置在无人商店的高点位置，各个第二摄像头可一一对应地设置在各个货架上，以便近距离采集顾客行为并得到监控视频。在其中一个实施例中，无人商店的每个货架还可设置有重量传感器。每个重量传感器用于采集相应货架对应的商品重量，该商品重量可为由相应货架承托的商品的总重量。计算机设备104可以与每个重量传感器通信连接或电连接，以获取无人商店中各个货架对应的商品重量。在其中一个实施例中，无人商店还可设有警报装置，计算机设备104可以与警报装置通信连接或电连接，并可在检测到无人商店内的商品被人为损坏的情况下驱动警报装置进行报警。在一个示例中，警报装置可以为声光报警装置。在一个实施例中，本申请提供了一种商品损坏检测方法，下述实施例以该方法应用于图1所示的计算机设备为例进行说明。如图2所示，本申请的商品损坏检测方法可以包括如下步骤：S202：在满足预设检测规则的情况下，获取无人商店的监控视频片段。其中，预设检测规则可用于判断是否触发进行商品损坏检测，以检测无人商店内的商品是否被人为破坏。可以理解，预设检测规则的规则内容可以根据计算机设备的计算资源、计算机设备接收到的配置信息、设置在无人商店内的摄像头数量和/或各个摄像头的设置位置等实际因素确定，本文对此不作具体限制。在一个示例中，商品损坏检测可以是每时每刻执行的。监控视频片段可以是待进行商品损坏检测的视频片段，例如，可以是从完整监控视频中截取的视频片段和/或由特定摄像头采集的监控视频。由于无人商店具备人工干预程度低的特点，因此无人商店多会处于全时段监控状态，导致完整监控视频的视频时长较长。基于此，计算机设备可以从完整监控视频中截取出视频时长较短的监控视频片段，并基于该监控视频片段进行商品损坏检测。可以理解，监控视频片段的获取方式和/或监控视频片段的视频时长等均可依据实际情况确定，本文对此不作具体限制。当无人商店设置有多个摄像头时，各个摄像头的拍摄角度有所差异，因此，计算机设备可以根据特定摄像头采集的监控视频得到监控视频片段，并据此进行商品损坏检测。S204：针对所述监控视频片段的每帧视频图像，在该视频图像中识别指关节纹区域，并根据该视频图像中各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构。其中，指关节纹是指手指背面指关节处的纹理，例如位于掌指关节处的关节纹和位于指骨间关节处的关节纹。指关节纹区域的区域坐标可用于反映指关节纹区域在视频图像中所处的位置。手指结构可用于反映各根手指的弯曲状态。进一步地，该弯曲状态可以包括手指是否弯曲，以及手指在弯曲时的弯曲方向和弯曲角度。由于指关节纹位于手指背面，容易被摄像头捕捉，因此计算机设备可以对指关节纹进行检测，以便于后续识别手部动作。具体地，监控视频片段包括至少一帧视频图像，对于每帧视频图像，计算机设备均可执行步骤A1至步骤A3，以在该帧视频图像中标注手指结构：步骤A1：在该帧视频图像中识别指关节纹区域。也即，在该帧视频图像中识别各个指关节纹，并在识别到至少一个指关节纹的情况下，分别确定每个指关节纹在该帧视频图像中所处的区域，以得到各个指关节纹区域。步骤A3：根据该帧视频图像中各个指关节纹区域的区域坐标，在该帧视频图像中标注手指结构。换言之，若计算机设备在该帧视频图像中识别得到至少一个指关节纹区域，则可确定监控视频片段记录有顾客的手部动作，因此计算机设备可以根据各个指关节纹区域的区域坐标，在该帧视频图像中标注手指结构，以标注各根手指的弯曲状态。S206：将已标注手指结构的监控视频片段输入至预先训练得到的手部动作分类模型中，以获取由所述手部动作分类模型输出的手部动作类型。其中，已标注手指结构的监控视频片段可以是每帧目标视频图像均已标注有手指结构的监控视频片段，目标视频图像可以是能识别到至少一个指关节纹区域的视频图像。具体地，计算机设备可以将已标注手指结构的监控视频片段输入至手部动作分类模型中，使得手部动作分类模型可以基于各根手指的弯曲状态识别手部动作类型并输出。在一个示例中，手部动作分类模型可以是采用手部动作训练集预先训练得到的，其中，手部动作训练集可以包括多组手部动作样本，每组手部动作样本可以包括标注有手指结构的人手作用于商品时的手部动作视频和预先确定的动作类型标签。进一步地，计算机设备可以将手部动作训练集中90%的手部动作样本作为训练集，5%的手部动作样本作为验证集，5%的手部动作样本作为测试集，并据此训练、验证和测试深度学习网络模型，进而得到手部动作分类模型。S208：基于所述手部动作类型生成检测结果，所述检测结果用于指示所述无人商店内的商品是否被人为损坏。计算机设备在得到由手部动作分类模型输出的手部动作类型的情况下，可以根据该手部动作类型判断无人商店内的商品是否被人为损坏。在一个示例中，计算机设备可获取预先构建的动作类型集合，该动作类型集合可包括各个可能导致商品损坏的损坏动作类型，例如动作类型集合可以包括拧、撕、揉和搓等损坏动作类型。计算机设备可以判断手部动作分类模型输出的手部动作类型是否存在于动作类型集合中，并依据判断结果生成检测结果。在其中一个实施例中，本申请的商品损坏检测方法还可包括：若检测结果为用于指示所述无人商店内的商品已被人为损坏的损坏检测结果，则驱动设置在无人商店内的警报装置进行告警。例如，计算机设备可以驱动警报装置发出警报声。如此，可以及时提醒、警告顾客。在其中一个实施例中，本申请的商品损坏检测方法还可包括：若检测结果为用于指示所述无人商店内的商品已被人为损坏的损坏检测结果，则计算机设备可获取在店顾客的顾客信息，并将所述顾客信息加入至黑名单中，以拒绝该顾客再次进入无人商店。需要说明的是，顾客信息是在得到顾客授权的情况下获取的。在其中一个实施例中，本申请的商品损坏检测方法还可包括：若检测结果为用于指示所述无人商店内的商品已被人为损坏的损坏检测结果，则计算机设备可以向目标电子终端发送提醒消息，以通知无人商店的相关人员及时赶往现场。本申请中，计算机设备可以在获取到无人商店的监控视频片段时，分别识别每帧视频图像的指关节纹区域，并根据每帧视频图像中的各个指关节纹区域在该帧视频图像中标注手指结构，该手指结构可以反映顾客各根手指的弯曲状态。计算机设备可以将已标注手指结构的监控视频片段输入至手部动作分类模型中，使得手部动作分类模型可以基于各根手指的弯曲状态准确识别并输出顾客的手部动作类型。计算机设备可以基于手部动作类型判断无人商店内的商品是否被人为损坏。如此，可以自动、准确地检测无人商店内的商品是否人为损坏，从而可进一步提高无人商店的自动化程度。可以理解，在S204中，计算机设备可以采用任意方式识别、检测视频图像中的指关节纹，并据此确定视频图像中的指关节纹区域。在一个实施例中，针对每帧视频图像，在该帧视频图像中识别指关节纹区域可以包括：针对每帧视频图像，在该帧视频图像中识别手部区域，并在识别到手部区域的情况下，根据手部区域的区域坐标，从该帧视频图像中截取手部区域图像，采用纹理特征提取算法处理手部区域图像，以识别指关节纹区域。本实施例中，计算机设备可以在视频图像中识别、提取感兴趣区域，即手部区域。例如，计算机设备可以使用基于深度学习的人体检测模型检测视频图像中的手部区域，为后续的关节纹识别提供基础。其中，人体检测模型可以基于RCNN或YOLO等实现。在识别到手部区域的情况下，计算机设备可以根据手部区域的区域坐标，从视频图像中分割出手部区域对应的手部区域图像，以避免视频图像的背景信息对后续识别造成干扰，便于后续针对手部区域图像的处理。相较于手部其他区域，指关节纹区域的纹理复杂度较高，因此可以通过纹理特征提取算法，在手部区域图像中提取指关节纹所在的指关节纹区域。例如，计算机设备可以采用统计方法、结构方法、基于变换的方法、基于模型的方法、基于图的方法、基于学习的方法和/或基于熵的方法等纹理特征提取算法来实现。本实施例中，通过采用纹理分析来识别指关节纹区域，具有算法简单、成本低廉和计算速度快的优点，可用于应对无人商店中的实时情况。在一个实施例中，针对每帧视频图像，根据该视频图像中各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构，包括：针对每帧视频图像，根据该视频图像中每个所述指关节纹区域的像素信息，分别确定每个所述指关节纹区域对应的关节纹类型，并基于各个所述关节纹类型对各个所述指关节纹区域进行分组，根据分组情况和各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构；其中，属于同一组的各个指关节纹区域对应同一手指，分属于不同组的各个指关节纹区域分别对应不同手指。本实施例中，每个指关节纹区域的像素信息可用于反映该指关节纹区域的像素分布情况，每个指关节纹区域对应的关节纹类型可用于反映该指关节纹区域与手掌之间的远近关系。具体地，关节纹可分为近侧关节纹、中间关节纹和远侧关节纹，近侧关节纹是指位于掌指关节处的关节纹，远侧关节纹是指位于靠近指尖的指骨间关节处的关节纹，中间关节纹是指位于靠近手掌的指骨间关节处的关节纹。拇指的关节纹包括近侧关节纹和远侧关节纹，其余四指的关节纹均包括近侧关节纹、中间关节纹和远侧关节纹。在一个示例中，每个指关节纹区域对应的关节纹类型可以为近侧关节纹、中间关节纹或远侧关节纹。针对监控视频片段的每帧视频图像，计算机设备均可执行步骤B1至步骤B5，以在该帧视频图像中标注手指结构：步骤B1：分别根据该帧视频图像中每个指关节纹区域的像素信息，确定每个指关节纹区域对应的关节纹类型，以分别确定每个指关节纹区域与手掌之间的远近关系。步骤B3：基于各个所述关节纹类型对各个所述指关节纹区域进行分组。具体地，计算机设备可以依据该帧视频图像中各个指关节纹区域与掌心之间的远近关系，分别判断每两个指关节纹区域是否对应同一手指上的两个指关节纹，若是，则可将该两个指关节纹区域归属至同一组，否则，可将该两个指关节纹区域归属至不同组。步骤B5：根据分组情况和各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构。在一个示例中，计算机设备可以在该帧视频图像中识别掌心坐标。对于每个分组，若该分组包括多个指关节纹区域，则计算机设备可以根据掌心坐标、该分组中各个指关节纹区域对应的关节纹类型和各个指关节纹区域的区域坐标构建连线。例如，计算机设备可以依次连接掌心坐标、中间关节纹区域的区域坐标和远侧关节纹区域的区域坐标。其中，中间关节纹区域为关节纹类型为中间关节纹的指关节纹区域，远侧关节纹区域为关节纹类型为远侧关节纹的指关节纹区域。对于每个分组，若该分组包括一个指关节纹区域，则计算机设备可以将掌心坐标与该分组包括的指关节纹区域的区域坐标相连，以构建连线。如此，可以通过各条连线反映完整的手指结构。考虑到商品损坏行为一般不会出现手指交叠的情况，且摄像头的拍摄角度一般较少导致手指交叠的情况，因此，在一个示例中，针对每帧视频图像，若该帧视频图像的各条连线中存在至少两条连线相交，则计算机设备可以确定当前分组情况存在分组错误的问题，并基于各个关节纹类型进行重新分组，以提高分组的准确性。本实施例中，计算机设备可以确定指关节纹区域对应的关节纹类型，并根据关节纹类型进行分组，使得分组情况可以反映各个指关节纹区域与手指之间的对应关系。如此，计算机设备可以依据分组情况准确标注手指结构，以提高后续手部动作分类的准确性。在一个实施例中，针对每帧视频图像，根据该视频图像中每个所述指关节纹区域的像素信息，分别确定每个所述指关节纹区域对应的关节纹类型，包括：针对每帧视频图像的每个指关节纹区域，生成该指关节纹区域对应的灰度直方图，并计算所述灰度直方图中每一灰度等级对应的像素比例，根据各个所述灰度等级对应的像素比例确定该指关节纹区域对应的纹理复杂度，且基于所述纹理复杂度确定该指关节纹区域对应的关节纹类型。具体地，指关节纹适应指关节的屈曲运动，当指关节的屈曲范围较大时，指关节纹的纹路较为复杂。因此，计算机设备可以根据指关节纹区域对应的纹理复杂度确定指关节纹区域对应的关节纹类型。本实施例中，在确定每个指关节纹区域对应的关节纹类型的过程中，计算机设备可以根据该指关节纹区域中每个像素的像素值，统计该指关节纹区域的灰度直方图，并分别统计灰度直方图中每个灰度等级对应的像素比例。其中，每个灰度等级对应的像素比例可以是该灰度等级对应的像素数量占灰度直方图的总像素数量的比例。计算机设备可以根据该指关节区域对应的各个像素比例，确定该指关节纹区域对应的纹理复杂度，进而依据纹理复杂度确定关节纹类型。如此，可以简化纹理复杂度的计算方式，并节省计算资源。在一个实施例中，针对每帧视频图像的每个指关节纹区域，根据各个所述灰度等级对应的像素比例确定该指关节纹区域对应的纹理复杂度，包括：针对每帧视频图像的每个指关节纹区域，计算该指关节纹区域对应的灰度直方图的灰度均值，并采用以下表达式计算该指关节纹区域对应的纹理复杂度：；式中，为该指关节纹区域对应的纹理复杂度；/＞为该指关节纹区域对应的灰度等级数量；/＞为在该指关节纹区域对应的灰度直方图中，第i个灰度等级对应的灰度值；为该指关节纹区域对应的灰度直方图的灰度均值；/＞为在该指关节纹区域对应的灰度直方图中，第i个灰度等级对应的像素比例。本实施例中，计算机设备可以采用上式计算得到每个指关节纹区域对应的纹理复杂度，实现简单，具有成本低廉和计算速度快的优点。在一个实施例中，针对每帧视频图像的每个指关节纹区域，计算机设备可以采用以下表达式计算该指关节纹区域对应的灰度均值：；式中，为该指关节纹区域对应的灰度直方图的灰度均值；/＞为该指关节纹区域对应的灰度等级数量；/＞为在该指关节纹区域对应的灰度直方图中，第i个灰度等级对应的灰度值；/＞为在该指关节纹区域对应的灰度直方图中，第i个灰度等级对应的像素比例。在一个实施例中，针对每帧视频图像的每个指关节纹区域，基于所述纹理复杂度确定该指关节纹区域对应的关节纹类型，包括：针对每帧视频图像的每个指关节纹区域，若该指关节纹区域对应的纹理复杂度大于预设复杂度阈值，则该指关节纹区域对应的关节纹类型为中间关节纹，否则，该指关节纹区域对应的关节纹类型为远侧关节纹。具体地，由于指关节的屈曲范围越大，指关节纹的纹路约复杂，因此中间关节纹的纹理复杂度高于远侧关节纹的纹理复杂度。本实施例中，计算机设备在确定指关节纹区域对应的纹理复杂度的情况下，可以将该指关节纹区域对应的纹理复杂度与预设复杂度阈值进行大小比较，并依据纹理复杂度与预设复杂度阈值的大小关系，确定该指关节纹区域对应的关节纹类型。当指关节纹区域对应的纹理复杂度大于预设复杂度阈值时，该指关节纹区域对应的关节纹类型为中间关节纹。当指关节纹区域对应的纹理复杂度小于或等于预设复杂度阈值时，该指关节纹区域对应的关节纹类型为远侧关节纹。可以理解，预设复杂度阈值的具体数值可以依据实际情况确定，本文对此不作具体限制。本实施例通过数值比较即可确定关节纹类型，实现简单，具有成本低廉和计算速度快的优点。在一个实施例中，每个所述指关节纹区域对应的关节纹类型为中间关节纹或远侧关节纹。关于中间关节纹和远侧关节纹的具体说明可参阅上述实施例，本文在此不再赘述。针对每帧视频图像，基于各个所述关节纹类型对各个所述指关节纹区域进行分组，包括：针对每帧视频图像，分别确定该视频图像中每一中间关节纹区域对应的最近远侧关节纹区域，以及每一远侧关节纹区域对应的最近中间关节纹区域；其中，关节纹类型为中间关节纹的指关节纹区域为中间关节纹区域，关节纹类型为远侧关节纹的指关节纹区域为远侧关节纹区域；针对每个中间关节纹区域，将该中间关节纹区域作为第一目标区域，以及将第一目标区域对应的最近远侧关节纹区域作为第二目标区域，若第二目标区域对应的最近中间关节纹区域为第一目标区域，则确定第一目标区域和第二目标区域属于同一组，否则，确定第一目标区域和第二目标区域属于不同组。其中，中间关节纹区域对应的最近远侧关节纹区域可以是同一视频图像中，与该中间关节纹区域距离最近的远侧关节纹区域。远侧关节纹区域对应的最近中间关节纹区域可以是同一视频图像中，与该远侧关节纹区域距离最近的中间关节纹区域。针对每帧视频图像，计算机设备可以分别依据每个中间关节纹区域对应的最近远侧关节纹区域，和每个远侧关节纹区域对应的最近中间关节纹区域，分别对各个中间关节纹区域和各个远侧关节纹区域进行分组。具体地，计算机设备可以将该帧视频图像中，每个中间关节纹区域和每个远侧关节纹区域进行两两匹配。在两两匹配的过程中，计算机设备可以选择一个中间关节纹区域和一个远侧关节纹区域，若被选中的中间关节纹区域对应的最近远侧关节纹区域为被选中的远侧关节纹区域，且被选中的远侧关节纹区域对应的最近中间关节纹区域为被选中的中间关节纹区域，则被选中的中间关节纹区域和被选中的远侧关节纹区域可以归属至同一组。若被选中的中间关节纹区域对应的最近远侧关节纹区域非被选中的远侧关节纹区域，或者被选中的远侧关节纹区域对应的最近中间关节纹区域非被选中的中间关节纹区域，则可分别将被选中的中间关节纹区域和被选中的远侧关节纹区域归属至不同组。如此，可以提高分组的准确性，确保属于同一组的各个指关节纹区域对应于同一手指，从而可提高手指结构标注的准确性，进而可提高手部动作分类的准确性。在一个实施例中，如图3所示，所述基于所述手部动作类型生成检测结果，包括：S302：根据所述监控视频片段，识别被持握商品的商品种类；S304：基于所述商品种类确定所述被持握商品对应的损坏动作类型集合；S306：若所述损坏动作类型集合包括所述手部动作类型，则生成用于指示所述无人商店内的商品已被人为损坏的损坏检测结果。其中，被持握商品可以是被持握在手中的商品。具体地，不同种类的商品可以对应不同的商品损坏行为。例如，若商品为饮料，则当顾客对商品做出拧这一动作时可能意味着饮料瓶盖被拧开，进而导致商品被损坏。又如，若商品为袋装食品，则当顾客对商品做出撕这一动作时可能意味着商品包装被撕开，进而导致商品被损坏。再如，若商品为膨化食品，则当顾客对商品做出揉、挤等动作时可能导致食品破碎，进而导致商品损坏。本实施例中，计算机设备可以从监控视频片段中识别被握持商品的商品种类，并基于商品种类确定被持握商品对应的损坏动作类型集合，该损坏动作类型集合可以包括各个可能导致被握持商品发生商品损坏的目标手部动作类型。计算机设备可以结合损坏动作类型集合和顾客的手部动作类型，判断商品是否被人为损坏。当手部动作分类模型输出的手部动作类型为目标手部动作类型时，计算机设备可以确定无人商店内的商品被人为损坏，并生成损坏检测结果。本实施例中，通过根据商品种类确定对应的损坏动作类型集合，并结合损坏动作类型集合和手部动作类型共同判断商品是否被人为损坏，从而可进一步提高商品损坏检测的准确性。可以理解，本申请可采用任意方式来识别被握持商品的商品种类。在一个实施例中，计算机设备可以使用预先训练得到的商品识别模型识别商品种类。该商品识别模型可以采用商品训练集训练得到，其中，商品训练集可以包括多组商品训练样本，每组商品训练样本可以包括预先采集的商品图像和预先标注的商品种类。进一步地，商品训练集中包括的各张商品图像可以是多角度及多光照条件下对商店中摆放的商品进行拍摄得到的图像。在一个实施例中，所述基于所述手部动作类型生成检测结果，包括：根据所述监控视频片段，识别被持握商品的商品种类；基于所述商品种类确定所述被持握商品对应的损坏动作类型集合；若所述损坏动作类型集合包括所述手部动作类型，则分别获取手部坐标被握持商品的商品坐标，并基于商品坐标和手部坐标生成检测结果。本实施例中，识别商品种类和确定损坏动作类型集合的具体说明可参阅上述实施例，本文在此不再赘述。若损坏动作类型集合包括手部动作类型，则可分别获取手部坐标和被握持商品的商品坐标，并基于商品坐标和手部坐标再次判断被握持商品是否依旧被握持在手部，进而生成检测结果。如此，可以进一步提高商品损坏检测的准确性。在一个实施例中，本申请的商品损坏检测方法还可包括：若检测结果为用于指示所述无人商店内的商品已被人为损坏的损坏检测结果，则根据被持握商品的商品信息生成结算账单。如此，可将被人为损坏的商品的价格添加到结算行单中。在一个实施例中，所述在满足预设检测规则的情况下，获取无人商店的监控视频片段，包括：实时获取所述无人商店内每个货架对应的商品重量；在检测到任一所述货架对应的商品重量减少时，启动目标摄像头，以通过所述目标摄像头获取所述监控视频片段；其中，所述目标摄像头为设于目标货架的摄像头，所述目标货架为商品重量减少的货架。具体地，无人商店内每个货架均可设置有重量传感器，以实时检测每个货架对应的商品重量，每个货架对应的商品重量可为由该货架承托的商品的总重量。在商品从货架上离开的情况下，货架对应的商品重量会减少。因此，计算机设备可以实时获取每个货架对应的商品重量，并在任一货架对应的商品重量发生减少时，启动设置在该货架的目标摄像头，以通过目标摄像头近距离采集顾客行为，并得到获取监控视频片段。如此，可以减少资源消耗，进而可通过较少的资源完成商品损坏检测。进一步地，在一个实施例中，计算机设备还可在在检测到任一所述货架对应的商品重量减少时，获取由设置在无人商店的高点位置的第一摄像头采集的监控视频片段，并根据第一摄像头采集的监控视频片段和目标摄像头采集的监控视频片段进行商品损坏检测。如此，可以多角度识别第一客户的行为，提高识别的效率及准确性。下面对本申请实施例提供的商品损坏检测装置进行描述，下文描述的商品损坏检测装置与上文描述的商品损坏检测方法可相互对应参照。在一个实施例中，本申请实施例提供了一种商品损坏检测装置400。如图4所示，该装置400可以包括：视频片段获取模块410，用于在满足预设检测规则的情况下，获取无人商店的监控视频片段；手指结构标注模块420，用于针对所述监控视频片段的每帧视频图像，在该视频图像中识别指关节纹区域，并根据该视频图像中各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构；手部动作类型确定模块430，用于将已标注手指结构的监控视频片段输入至预先训练得到的手部动作分类模型中，以获取由所述手部动作分类模型输出的手部动作类型；检测结果生成模块440，用于基于所述手部动作类型生成检测结果，所述检测结果用于指示所述无人商店内的商品是否被人为损坏。在一个实施例中，手指结构标注模块420可以包括结构标注单元。该结构标注单元用于针对每帧视频图像，根据该视频图像中每个所述指关节纹区域的像素信息，分别确定每个所述指关节纹区域对应的关节纹类型，并基于各个所述关节纹类型对各个所述指关节纹区域进行分组，根据分组情况和各个所述指关节纹区域的区域坐标，在该视频图像中标注手指结构。其中，属于同一组的各个指关节纹区域对应同一手指，分属于不同组的各个指关节纹区域分别对应不同手指。在一个实施例中，结构标注单元可以包括关节纹类型确定单元。该关节纹类型确定单元用于针对每帧视频图像的每个指关节纹区域，生成该指关节纹区域对应的灰度直方图，并计算所述灰度直方图中每一灰度等级对应的像素比例，根据各个所述灰度等级对应的像素比例确定该指关节纹区域对应的纹理复杂度，且基于所述纹理复杂度确定该指关节纹区域对应的关节纹类型。在一个实施例中，关节纹类型确定单元可以包括纹理复杂度计算单元。该纹理复杂度计算单元用于针对每帧视频图像的每个指关节纹区域，计算该指关节纹区域对应的灰度直方图的灰度均值，并采用以下表达式计算该指关节纹区域对应的纹理复杂度：；式中，为该指关节纹区域对应的纹理复杂度；/＞为该指关节纹区域对应的灰度等级数量；/＞为在该指关节纹区域对应的灰度直方图中，第i个灰度等级对应的灰度值；为该指关节纹区域对应的灰度直方图的灰度均值；/＞为在该指关节纹区域对应的灰度直方图中，第i个灰度等级对应的像素比例。在一个实施例中，关节纹类型确定单元可以包括纹理复杂度比较单元。该纹理复杂度比较单元用于针对每帧视频图像的每个指关节纹区域，若该指关节纹区域对应的纹理复杂度大于预设复杂度阈值，则该指关节纹区域对应的关节纹类型为中间关节纹，否则，该指关节纹区域对应的关节纹类型为远侧关节纹。在一个实施例中，每个所述指关节纹区域对应的关节纹类型为中间关节纹或远侧关节纹。结构标注单元可以包括最近区域确定单元和分组单元。其中，最近区域确定单元用于针对每帧视频图像，分别确定该视频图像中每一中间关节纹区域对应的最近远侧关节纹区域，以及每一远侧关节纹区域对应的最近中间关节纹区域；其中，关节纹类型为中间关节纹的指关节纹区域为中间关节纹区域，关节纹类型为远侧关节纹的指关节纹区域为远侧关节纹区域。分组单元用于针对每个中间关节纹区域，将该中间关节纹区域作为第一目标区域，以及将第一目标区域对应的最近远侧关节纹区域作为第二目标区域，若第二目标区域对应的最近中间关节纹区域为第一目标区域，则确定第一目标区域和第二目标区域属于同一组，否则，确定第一目标区域和第二目标区域属于不同组。在一个实施例中，检测结果生成模块440可以包括商品种类识别单元、集合确定单元和结果生成单元。其中，商品种类识别单元用于根据所述监控视频片段，识别被持握商品的商品种类。集合确定单元用于基于所述商品种类确定所述被持握商品对应的损坏动作类型集合。结果生成单元用于若所述损坏动作类型集合包括所述手部动作类型，则生成用于指示所述无人商店内的商品已被人为损坏的损坏检测结果。在一个实施例中，视频片段获取模块410可以包括重量获取单元和摄像头启动单元。其中，重量获取单元用于实时获取所述无人商店内每个货架对应的商品重量。摄像头启动单元用于在检测到任一所述货架对应的商品重量减少时，启动目标摄像头，以通过所述目标摄像头获取所述监控视频片段；其中，所述目标摄像头为设于目标货架的摄像头，所述目标货架为商品重量减少的货架。在一个实施例中，本申请还提供了一种存储介质，该存储介质中存储有计算机可读指令，计算机可读指令被一个或多个处理器执行时，使得一个或多个处理器执行如任一实施例中商品损坏检测方法的步骤。在一个实施例中，本申请还提供了一种计算机设备，所述计算机设备中存储有计算机可读指令，所述计算机可读指令被一个或多个处理器执行时，使得一个或多个处理器执行如任一实施例中商品损坏检测方法的步骤。示意性地，图5为本申请实施例提供的一种计算机设备的内部结构示意图，在一个示例中，该计算机设备可以为服务器。参照图5，计算机设备900包括处理组件902，其进一步包括一个或多个处理器，以及由存储器901所代表的存储器资源，用于存储可由处理组件902的执行的指令，例如应用程序。存储器901中存储的应用程序可以包括一个或一个以上的每一个对应于一组指令的模块。此外，处理组件902被配置为执行指令，以执行上述任一实施例所述商品损坏检测方法的步骤。计算机设备900还可以包括一个电源组件903被配置为执行计算机设备900的电源管理，一个有线或无线网络接口904被配置为将计算机设备900连接到网络，和一个输入输出接口905。计算机设备900可以操作基于存储在存储器901的操作系统，例如WindowsServer TM、Mac OS XTM、Unix TM、Linux TM、Free BSDTM或类似。本领域技术人员可以理解，本申请示出的计算机设备的内部结构，仅仅是与本申请方案相关的部分结构的框图，并不构成对本申请方案所应用于其上的计算机设备的限定，具体的计算机设备可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。最后，还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本文中，“一”、“一个”、“所述”、“该”和“其”也可以包括复数形式，除非上下文清楚指出另外的方式。多个是指至少两个的情况，如2个、3个、5个或8个等。“和/或”包括相关所列项目的任何及所有组合。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间可以根据需要进行组合，且相同相似部分互相参见即可。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本申请。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本申请的精神或范围的情况下，在其它实施例中实现。因此，本申请将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
