标题title
运动控制方法、控制器、机电设备以及介质
摘要abst
本申请实施例提供了一种运动控制方法、控制器、机电设备以及介质，该方法包括：通过第一核心单元在预设计算周期到达时，基于获取到的实时位姿以及第一运动轨迹，确定第一目标位姿；在预设计算周期的周期时间内，通过第二核心单元确定第二目标位姿，并对应于第二目标位姿生成控制指令信息；通过第三核心单元接收到控制指令信息时，计算当前接收到的控制指令信息与前一控制指令信息的时间间隔，在时间间隔超出设定范围时，请求第二核心单元关闭主站功能，并开启备用主站功能以接替第二核心单元向从站节点输出控制指令信息。本方案无需设置多余的主站设备，第二核心单元与第三核心单元可以实时通信，有利于主站功能与备用主站功能的低延迟切换。
权利要求书clms
1.一种运动控制方法，应用于运动控制器，其特征在于，所述运动控制器包括多核芯片以及内存模块，所述多核芯片包括第一核心单元、第二核心单元以及第三核心单元，所述第二核心单元处于启用主站功能的运行状态，所述第三核心单元设置有备用主站功能；所述运动控制方法，包括：所述第一核心单元基于获取到的运动规划信息确定第一运动轨迹，在预设计算周期到达时，基于获取到的实时位姿以及所述第一运动轨迹，确定第一目标位姿，并将所述第一目标位姿存储到所述内存模块；在预设计算周期的周期时间内，所述第二核心单元从所述内存模块中获取所述第一目标位姿，并基于获取到的控制规划信息以及所述第一目标位姿确定第二运动轨迹，在预设控制周期到达时，基于获取到的实时位姿以及所述第二运动轨迹，确定第二目标位姿，并对应于所述第二目标位姿生成控制指令信息，将所述控制指令信息发送到位于控制链路的起始端位置的从站节点，所述第三核心单元位于所述控制链路的结束端位置，所述控制链路的起始端位置与结束端位置之间串接至少一个从站节点；所述第三核心单元接收到控制指令信息时，计算当前接收到的控制指令信息与前一控制指令信息的时间间隔，在所述时间间隔超出设定范围时，请求所述第二核心单元关闭主站功能，并开启备用主站功能以接替所述第二核心单元向从站节点输出控制指令信息。2.根据权利要求1所述的运动控制方法，其特征在于，所述运动规划信息包括当前位姿、目标位姿、设置的运动规划算法以及预设计算周期的时间间隔；所述第一核心单元基于获取到的运动规划信息确定第一运动轨迹，包括：所述第一核心单元基于获取到的当前位姿、目标位姿、设置的运动规划算法以及预设计算周期的时间间隔，确定从所述当前位姿到所述目标位姿的第一运动轨迹。3.根据权利要求1所述的运动控制方法，其特征在于，所述控制规划信息包括实时位姿、预设控制周期的时间间隔以及设置的运动插值算法；所述第二核心单元基于获取到的控制规划信息以及所述第一目标位姿确定第二运动轨迹，包括：所述第二核心单元基于获取到的实时位姿、预设控制周期的时间间隔、设置的运动插值算法以及所述第一目标位姿，确定从获取到的实时位姿到所述第一目标位姿的第二运动轨迹。4.根据权利要求1所述的运动控制方法，其特征在于，所述第三核心单元开启备用主站功能的同时，还包括：开启第一预设计时；相应的，所述运动控制方法还包括：在所述第一预设计时达到第一预设门限值时，所述第三核心单元关闭备用主站功能，并请求所述第二核心单元开启主站功能以使所述第二核心单元重新向从站节点输出控制指令信息。5.根据权利要求1所述的运动控制方法，其特征在于，所述运动控制器包括无线通信模块；所述第三核心单元开启备用主站功能的同时，还包括：递增记录的预警次数；相应的，所述运动控制方法还包括：当所述记录的预警次数达到预设次数阈值时，所述第三核心单元通过所述无线通信模块输出预警信息。6.根据权利要求1所述的运动控制方法，其特征在于，所述第三核心单元接收到控制指令信息的同时，还包括：开启第二预设计时；相应的，所述运动控制方法还包括：在所述第二预设计时未达到第二预设门限值时，若所述第三核心单元接收到新的控制指令信息，重置所述第二预设计时；在所述第二预设计时达到所述第二预设门限值时，若所述第三核心单元没有接收到新的控制指令信息，请求所述第二核心单元关闭主站功能，并开启备用主站功能以接替所述第二核心单元向从站节点输出控制指令信息。7.根据权利要求1所述的运动控制方法，其特征在于，所述运动控制方法还包括：所述第三核心单元在预设监测周期到达时，采集所述第二核心单元的运行状态信息，在所述运行状态信息为非正常运行状态的情况下，请求所述第二核心单元关闭主站功能，并开启备用主站功能。8.一种运动控制器，其特征在于，包括：多核芯片，所述多核芯片包括第一核心单元、第二核心单元以及第三核心单元；无线通信模块，用于向后台服务器传送预警信息；内存模块，用于提供存储空间，以及存储一个或多个程序；当所述一个或多个程序被所述多核芯片执行，使得所述运动控制器实现如权利要求1-7任一项所述的运动控制方法。9.一种机电设备，其特征在于，包括权利要求8所述的运动控制器以及至少一个控制节点。10.一种可读存储介质，其特征在于，所述可读存储介质上存储程序或指令，所述程序或指令被处理器执行时实现如权利要求1-7任一项所述的运动控制方法。
说明书desc
技术领域本申请实施例涉及设备控制技术领域，尤其涉及一种运动控制方法、控制器、机电设备以及介质。背景技术工业自动化对通信系统的高可靠性有着十分严格的要求。在工业现场，机器设备的正常运行需要依赖工业控制网络进行实时的数据交换和指令控制。一旦网络发生故障而导致通信中断，整个自动化系统都将陷入停顿，直接造成生产流程的中断，带来巨大的经济损失。EtherCAT作为新一代的工业以太网技术，与传统的现场总线相比，具有速度快、精确时间同步以及更强的实时性能等优点。EtherCAT采用了创新的处理即转发机制，主站发送的以太网帧可以在各个从站之间瞬时传递，大大缩短了通信延时。此外，EtherCAT还通过硬件的时间同步机制实现了精确的时间同步，确保整个网络中的所有设备能够精确地协同运行。借助于这些技术创新，EtherCAT的通信速率和实时性远超传统的现场总线技术，完全可以满足对高速稳定通信的需求。然而，EtherCAT也存在主站单点故障的问题。在EtherCAT网络中，主站负责网络的控制和管理，主站故障将导致整个网络瘫痪。相关技术中通过修改从站的固件或者引入额外的主站设备来达到主站冗余的目的，增加了系统的复杂度，而且主站设备直接进行切换容易造成通信丢帧。发明内容本申请实施例提供了运动控制方法、控制器、机电设备以及介质，解决了因现有主站冗余设计复杂，主站设备之间切换容易导致通信丢帧的问题，实现了通过设置多核心单元进行功能合理分配，第一核心单元用于执行复杂运动计算，第二核心单元用于执行主站功能，第三核心单元用于执行备用主站功能，有效提高核心单元的协同运作效率，无需设置多余的主站设备，第二核心单元与第三核心单元可以实时通信，有利于主站功能与备用主站功能的低延迟切换，减少通信丢帧的风险。第一方面，本申请实施例提供了一种运动控制方法，应用于运动控制器，该运动控制器包括多核芯片以及内存模块，该多核芯片包括第一核心单元、第二核心单元以及第三核心单元，该第二核心单元处于启用主站功能的运行状态，该第三核心单元设置有备用主站功能，该运动控制方法包括：第一核心单元基于获取到的运动规划信息确定第一运动轨迹，在预设计算周期到达时，基于获取到的实时位姿以及所述第一运动轨迹，确定第一目标位姿，并将所述第一目标位姿存储到所述内存模块；在预设计算周期的周期时间内，所述第二核心单元从所述内存模块中获取所述第一目标位姿，并基于获取到的控制规划信息以及所述第一目标位姿确定第二运动轨迹，在预设控制周期到达时，基于获取到的实时位姿以及所述第二运动轨迹，确定第二目标位姿，并对应于所述第二目标位姿生成控制指令信息，将所述控制指令信息发送到位于控制链路的起始端位置的从站节点，所述第三核心单元位于所述控制链路的结束端位置，所述控制链路的起始端位置与结束端位置之间串接至少一个从站节点；所述第三核心单元接收到控制指令信息时，计算当前接收到的控制指令信息与前一控制指令信息的时间间隔，在所述时间间隔超出设定范围时，请求所述第二核心单元关闭主站功能，并开启备用主站功能以接替所述第二核心单元向从站节点输出控制指令信息。其中，所述运动规划信息包括当前位姿、目标位姿、设置的运动规划算法以及预设计算周期的时间间隔；所述第一核心单元基于获取到的运动规划信息确定第一运动轨迹，包括：所述第一核心单元基于获取到的当前位姿、目标位姿、设置的运动规划算法以及预设计算周期的时间间隔，确定从所述当前位姿到所述目标位姿的第一运动轨迹。其中，所述控制规划信息包括实时位姿、预设控制周期的时间间隔以及设置的运动插值算法；所述第二核心单元基于获取到的控制规划信息以及所述第一目标位姿确定第二运动轨迹，包括：所述第二核心单元基于获取到的实时位姿、预设控制周期的时间间隔、设置的运动插值算法以及所述第一目标位姿，确定从获取到的实时位姿到所述第一目标位姿的第二运动轨迹。其中，所述第三核心单元开启备用主站功能的同时，还包括：开启第一预设计时；相应的，所述运动控制方法还包括：在所述第一预设计时达到第一预设门限值时，所述第三核心单元关闭备用主站功能，并请求所述第二核心单元开启主站功能以使所述第二核心单元重新向从站节点输出控制指令信息。其中，所述运动控制器包括无线通信模块；所述第三核心单元开启备用主站功能的同时，还包括：递增记录的预警次数；相应的，所述运动控制方法还包括：当所述记录的预警次数达到预设次数阈值时，所述第三核心单元通过所述无线通信模块输出预警信息。其中，所述第三核心单元接收到控制指令信息的同时，还包括：开启第二预设计时；相应的，所述运动控制方法还包括：在所述第二预设计时未达到第二预设门限值时，若所述第三核心单元接收到新的控制指令信息，重置所述第二预设计时；在所述第二预设计时达到所述第二预设门限值时，若所述第三核心单元没有接收到新的控制指令信息，请求所述第二核心单元关闭主站功能，并开启备用主站功能以接替所述第二核心单元向从站节点输出控制指令信息。其中，运动控制方法还包括：所述第三核心单元在预设监测周期到达时，采集所述第二核心单元的运行状态信息，在所述运行状态信息为非正常运行状态的情况下，请求所述第二核心单元关闭主站功能，并开启备用主站功能。第二方面，本申请实施例还提供了一种运动控制器，包括：多核芯片，所述多核芯片包括第一核心单元、第二核心单元以及第三核心单元；无线通信模块，用于向后台服务器传送预警信息；内存模块，用于提供存储空间，以及存储一个或多个程序；当所述一个或多个程序被所述多核芯片执行，使得所述运动控制器实现如本申请任一实施例所述的运动控制方法。第三方面，本申请实施例还提供了一种机电设备，该设备包括本申请实施例所述的运动控制器以及至少一个控制节点。第四方面，本申请实施例还提供了一种存储计算机可执行指令的非易失性存储介质，所述计算机可执行指令在由计算机处理器执行时配置为执行本申请实施例所述的运动控制方法。本申请实施例中，通过第一核心单元基于获取到的运动规划信息确定第一运动轨迹，在预设计算周期到达时，基于获取到的实时位姿以及第一运动轨迹，确定第一目标位姿，并将第一目标位姿存储到内存模块；在预设计算周期的周期时间内，通过第二核心单元从内存模块中获取第一目标位姿，并基于获取到的控制规划信息以及第一目标位姿确定第二运动轨迹，在预设控制周期到达时，基于获取到的实时位姿以及第二运动轨迹，确定第二目标位姿，并对应于第二目标位姿生成控制指令信息，将控制指令信息发送到位于控制链路的起始端位置的从站节点，第三核心单元位于控制链路的结束端位置，控制链路的起始端位置与结束端位置之间串接至少一个从站节点；通过第三核心单元接收到控制指令信息时，计算当前接收到的控制指令信息与前一控制指令信息的时间间隔，在时间间隔超出设定范围时，请求第二核心单元关闭主站功能，并开启备用主站功能以接替第二核心单元向从站节点输出控制指令信息。实现了通过设置多核心单元进行功能合理分配，第一核心单元用于执行复杂运动计算，第二核心单元用于执行主站功能，第三核心单元用于执行备用主站功能，有效提高核心单元的协同运作效率，无需设置多余的主站设备，第二核心单元与第三核心单元可以实时通信，有利于主站功能与备用主站功能的低延迟切换，减少通信丢帧的风险。附图说明图1为本申请实施例提供的一种运动控制方法的流程图；图2为本申请实施例提供的一种第二核心单元与第三核心单元之间串接从站节点的示意图；图3为本申请实施例提供的一种第三核心单元启用备用主站功能的过程的流程图；图4为本申请实施例提供的另一种第三核心单元启用备用主站功能的过程的流程图；图5为本申请实施例提供的另一种第三核心单元启用备用主站功能的过程的流程图；图6为本申请实施例提供的一种运动控制器的结构框图；图7为本申请实施例提供的另一种运动控制器的结构框图。具体实施方式下面结合附图和实施例对本申请实施例作进一步的详细说明。可以理解的是，此处所描述的具体实施例仅仅用于解释本申请实施例，而非对本申请实施例的限定。另外还需要说明的是，为了便于描述，附图中仅示出了与本申请实施例相关的部分而非全部结构。本申请的说明书和权利要求书中的术语“第一”、“第二”等是用于区别类似的对象，而不用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便本申请的实施例能够以除了在这里图示或描述的那些以外的顺序实施，且“第一”、“第二”等所区分的对象通常为一类，并不限定对象的个数，例如第一对象可以是一个，也可以是多个。此外，说明书以及权利要求中“和/或”表示所连接对象的至少其中之一，字符“/”，一般表示前后关联对象是一种“或”的关系。图1为本申请实施例提供的一种运动控制方法的流程图，该运动控制方法可以以运动控制器为执行主体实现，其中运动控制器包括多核芯片以及内存模块，该多核芯片包括第一核心单元、第二核心单元以及第三核心单元。在本申请实施例中，第二核心单元处于启用主站功能的运行状态，第三核心单元设置有备用主站功能，多核芯片可以包括多个计算核心，核心单元可以是不同计算核心的组合，不同核心单元可以负责不同功能实现。本申请实施例的多核芯片提供了第一核心单元、第二核心单元以及第三核心单元，为了提高运动控制的高实时性，第一核心单元负责计算量较大的运动规划任务，对应线程的计算周期相对较长，第二核心单元负责实现主站功能，对应线程的控制周期相对较短，可以完成运动插值以及输出各个从站节点对应的运动结果，第三核心单元负责实现备用主站功能，可以对第二核心单元进行监测，并在第二核心单元的主站功能失效的时候启用备用主站功能来确保运动控制的正常进行。示例的，控制算法可以由两个线程实现，第一核心单元通过周期间隔为4ms的线程完成运动规划任务，第二核心单元通过周期间隔为1ms的线程完成运动插值以及输出各个从站节点的结果脉冲。具体的，如图1所示，该运动控制方法具体包括如下步骤：步骤S101、第一核心单元基于获取到的运动规划信息确定第一运动轨迹，在预设计算周期到达时，基于获取到的实时位姿以及第一运动轨迹，确定第一目标位姿，并将第一目标位姿存储到内存模块。其中，运动控制器可以对于至少一个运动节点进行运动控制，运动规划信息可以是用来计算各个运动节点对应的第一运动轨迹的参考信息，例如外部输入路径点或目标位置、内部传感器的反馈信息以及设置的运动规划算法等，第一运动轨迹可以是根据各个运动节点的起始位置以及结束位置进行规划的运动路径，运动路径中每个关键点都有对应的位姿信息和时间信息，可选的，运动规划信息包括当前位姿、目标位姿、设置的运动规划算法以及预设计算周期的时间间隔，其中，当前位姿可以是第一核心单元在运动规划阶段获取到的每个运动节点反馈的当前位置信息以及姿态信息，目标位姿可以是第一核心单元在运动规划阶段获取到的外部输入的每个运动节点的目标位置信息和姿态信息，运动规划算法可以是图搜索算法、RRT算法、人工势场法等，预设计算周期可以是根据完成实时运动规划的相关计算所需的最小计算周期来设置，由于对于高实时性的运动控制而言，该最小计算周期作为控制周期无法满足预期控制精度，容易造成运动不流畅的问题。因而，第一核心单元仅用于计算并输出以该最小计算周期为控制周期对应的各个运动节点的第一目标位姿，并将该第一目标位姿存储到内存模块，其中第一核心单元、第二核心单元以及第三核心单元可以通过共享内存模块的方式进行数据交互，第二核心单元执行主站功能或第三核心单元执行备用主站功能时均可以从内存模块中获取到该第一目标位姿。可选的，第一核心单元确定第一运动轨迹的具体实施过程包括：第一核心单元基于获取到的当前位姿、目标位姿、设置的运动规划算法以及预设计算周期的时间间隔，确定从当前位姿到目标位姿的第一运动轨迹。其中，第一运动轨迹对应于预设计算周期的时间间隔会设置有关键点，每个关键点会有对应的预期位置以及预期姿态。进一步的，第一核心单元完成第一运动轨迹的运动规划后，在预设计算周期到达时，可以基于获取到的实时位姿与第一运动轨迹中规划的对应于当前时刻的设定位姿进行偏差确定，并结合第一运动轨迹中规划的对应于下一时刻的设定位姿，进行当前计算周期节点的第一目标位姿的确定。步骤S102、在预设计算周期的周期时间内，第二核心单元从内存模块中获取第一目标位姿，并基于获取到的控制规划信息以及第一目标位姿确定第二运动轨迹，在预设控制周期到达时，基于获取到的实时位姿以及第二运动轨迹，确定第二目标位姿，并对应于第二目标位姿生成控制指令信息，将控制指令信息发送到位于控制链路的起始端位置的从站节点，第三核心单元位于控制链路的结束端位置，控制链路的起始端位置与结束端位置之间串接至少一个从站节点。其中，由于运动控制的高实时性要求，第一核心单元基于预设计算周期的计算线程输出的运动计算结果无法满足该运动控制需求，因而本申请实施例设置第二核心单元来基于周期时间间隔比预设计算周期更短的预设控制周期，进行进一步的控制规划，比如第一运动轨迹的关键点之间的线性插值或曲线插值等，具体的，控制规划信息可以包括实时位姿、预设控制周期的时间间隔以及设置的运动插值算法，其中，实时位姿可以是第二核心单元获取到的各个运动节点反馈的当前时刻的位姿信息。预设控制周期可以是根据实时控制需求设置的最小控制周期。运动插值算法可以是线性插值、样条插值、二次贝塞尔曲线插值等，用于在第一运动轨迹的每个关键点之间进行插值计算，以获得细致的第二运动轨迹。可选的，第二核心单元确定第二运动轨迹的具体实施过程包括：第二核心单元基于获取到的实时位姿、预设控制周期的时间间隔、设置的运动插值算法以及第一目标位姿，确定从获取到的实时位姿到第一目标位姿的第二运动轨迹。在预设控制周期到达时，可以基于获取到的实时位姿与第二运动轨迹中规划的对应于当前时刻的设定位姿进行偏差确定，并结合第二运动轨迹中规划的对应于下一时刻的设定位姿，进行当前控制周期节点的第二目标位姿的确定。可以理解的是，对于第一核心单元的预设计算周期而言，第二核心单元的预设控制周期时间粒度更细，例如，预设计算周期的时间间隔为4ms，预设控制周期的时间间隔为1ms，那么，相当于第一核心单元以4ms的时间间隔向第二核心单元输出运动计算结果后，第二核心单元会以1ms的时间间隔输出对应的控制指令信息，完成对于运动节点的实时控制。此外，由于第二核心单元处于启用主站功能的运行状态，需要将运动控制的实时计算结果发送到连接的各个从站，具体的，图2为本申请实施例提供的一种第二核心单元与第三核心单元之间串接从站节点的示意图，如图2所示，第二核心单元101与第三核心单元102之间串联多个从站节点103，第二核心单元101发送的控制指令信息包括串联的多个从站节点103的控制指令信息，每个从站节点103都有对应的控制指令信息，可选的，由于第二核心单元101发送的控制指令信息需要从控制链路的起始段位置的从站节点103开始传送，串联的从站节点103会按照与连接顺序先后接收到控制指令信息，最后第三核心单元102会接收到控制指令信息，会存在各个从站节点运动存在延迟偏差，运动不同步的问题，因此可以设置同步时钟，确保各个从站节点103的运动同步，降低运动延迟。步骤S103、第三核心单元接收到控制指令信息时，计算当前接收到的控制指令信息与前一控制指令信息的时间间隔，在时间间隔超出设定范围时，请求第二核心单元关闭主站功能，并开启备用主站功能以接替第二核心单元向从站节点输出控制指令信息。值得说明的是，第三核心单元接收控制指令信息，旨在对于处于启用主站功能的第二核心单元的控制监测，由于第二核心单元按照预设控制周期进行固定时间间隔的控制指令信息发送，第三核心单元接收到控制指令信息的时间差应该会在稳定的设定范围内波动，如果超出设定范围，意味着第二核心单元的主站功能可能存在异常，会影响运动控制的实时性，因而第三核心单元需要向第二核心单元请求关闭主站功能，并开启备用主站功能来接替第二核心单元的主站控制任务的执行，保障运动控制的正常进行。具体的，图3为本申请实施例提供的一种第三核心单元启用备用主站功能的过程的流程图，如图3所示，第三核心单元启用备用主站功能的过程具体包括以下步骤：步骤S1031、第三核心单元接收到控制指令信息时，计算当前接收到的控制指令信息与前一控制指令信息的时间间隔，在时间间隔超出设定范围时，请求第二核心单元关闭主站功能；步骤S1032、开启备用主站功能，同时开启第一预设计时；步骤S1033、在第一预设计时达到第一预设门限值时，第三核心单元关闭备用主站功能，并请求第二核心单元开启主站功能以使第二核心单元重新向从站节点输出控制指令信息。值得说明的是，第二核心单元作为主站功能的执行单元，在控制过程中可能受外界不良因素干扰，发生偶发的控制指令信息发送异常后，可以尝试通过重启主站功能来恢复到正常状态。因而第三核心单元可以在第二核心单元因偶发异常暂时关闭主站功能的期间，接替第二核心单元的控制作用，并通过计时方式达到固定时间后，请求第二核心单元重启主站功能，恢复正常控制。其中，第一预设门限值可以通过测试阶段对于第二核心单元的异常历史记录来设置，也可以根据最近一次异常所记录的时间间隔与设定范围的偏差值来制定。此外，出于成本考虑，第三核心单元的计算核心可以设置为与第二核心单元的不同，第二核心单元作为主要的主站功能执行单元的性能设置可以相对高于第三核心单元，因而第三核心单元可以仅作为短时接替第二核心单元的控制单元，在第二核心单元的主站功能存在异常时，通过通知第二核心单元进行主站功能重启，可以使得第二核心单元尽快重新恢复控制作用，保障运动控制的执行质量。进一步的，运动控制器包括无线通信模块，图4为本申请实施例提供的另一种第三核心单元启用备用主站功能的过程的流程图，如图4所示，第三核心单元启用备用主站功能的另一种过程具体包括以下步骤：步骤S1034、第三核心单元接收到控制指令信息时，计算当前接收到的控制指令信息与前一控制指令信息的时间间隔，在时间间隔超出设定范围时，请求第二核心单元关闭主站功能；步骤S1035、开启备用主站功能，同时递增记录的预警次数；步骤S1036、当记录的预警次数达到预设次数阈值时，第三核心单元通过无线通信模块输出预警信息。其中，对于第二核心单元发生异常的情况可以进行次数累计，每次第二核心单元发生异常，可以对预警次数进行累加，结合图3提供的实施例，第二核心单元可以通过重启主站功能的方式来恢复控制作用，但是可能存在第二核心单元重启主站功能后很快又回到主站功能异常状态，出现控制指令信息的延迟发送，因而可以通过记录预警次数的方式，来对于第二核心单元频繁发生功能异常的情况进行预警信息的输出，提醒工作人员及时停机排查异常，更换或检修多核芯片。在一个实施例中，图5为本申请实施例提供的另一种第三核心单元启用备用主站功能的过程的流程图，如图5所示，第三核心单元启用备用主站功能的另一种过程具体包括以下步骤：步骤S1037、第三核心单元接收到控制指令信息时，计算当前接收到的控制指令信息与前一控制指令信息的时间间隔，在时间间隔超出设定范围时，请求第二核心单元关闭主站功能，同时开启第二预设计时；步骤S1038、在第二预设计时未达到第二预设门限值时，若第三核心单元接收到新的控制指令信息，重置第二预设计时；步骤S1039、在第二预设计时达到第二预设门限值时，若第三核心单元没有接收到新的控制指令信息，请求第二核心单元关闭主站功能，并开启备用主站功能以接替第二核心单元向从站节点输出控制指令信息。值得说明的是，第二核心单元除了可能发生发送控制指令信息出现延迟的异常波动情况外，还可能发生无法输出控制指令信息的异常情况，此时，第二核心单元无法继续执行主站功能，因而需要第三核心单元及时接替第二核心单元继续进行运动控制。因而可以通过在每次接收到控制指令信息后，开启第二预设计时，若在第二预设计时未达到第二预设门限值时，第三核心单元接收到新的控制指令信息，可以视为第二核心单元正常发出控制指令信息，若在第二预设计时达到第二预设门限值时，第三核心单元没有接收到新的控制指令信息，那么可以视为第二核心单元无法发出控制指令信息，处于异常状态，因而第三核心单元可以请求第二核心单元关闭主站功能，并开启备用主站功能以接替第二核心单元向从站节点输出控制指令信息，第三核心单元执行的功能作用与本申请实施例中描述的第二核心单元执行的功能作用相同。可选的，第三核心单元还可以通过设置的无线通信模块输出预警信息，提醒工作人员及时安排多核芯片的异常排查。此外，第三核心单元的计算核心还可以与第二核心单元的计算核心设置为相同，第三核心单元可以作为第二核心单元的冗余设计，在第二核心单元发生异常时接替第二核心单元继续进行运动控制。在另一个实施例中，除了前述实施例涉及的第三核心单元通过监测控制指令信息的到达时间外，第三核心单元还可以对第二核心单元的运行状态信息进行采集，该运行状态信息包括运算状态、通信状态等。在第二核心单元的运行状态不佳，可能会引起运动控制异常的情况下，第三核心单元需要接替第二核心单元的主站控制作用，并进行运动控制。具体的，第三核心单元对于第二核心单元的监测过程包括：第三核心单元在预设监测周期到达时，采集第二核心单元的运行状态信息，在运行状态信息为非正常运行状态的情况下，请求第二核心单元关闭主站功能，并开启备用主站功能。由此，第三核心单元可以有效作为第二核心单元的备用核心单元，满足控制功能的冗余设计需求，及时发现第二核心单元的异常状态，并启用备用主站功能来保障运动控制的正常进行。上述，本申请实施例通过设置多核心单元进行功能合理分配，第一核心单元用于执行复杂运动计算，第二核心单元用于执行主站功能，第三核心单元用于执行备用主站功能，有效提高核心单元的协同运作效率，无需设置多余的主站设备，第二核心单元与第三核心单元可以实时通信，有利于主站功能与备用主站功能的低延迟切换，减少通信丢帧的风险。图6为本申请实施例提供的一种运动控制器的结构框图，该运动控制器配置为执行上述实施例提供的运动控制方法，具备执行方法相应的功能模块和有益效果。如图6所示，该运动控制器具体包括：多核芯片201，该多核芯片包括第一核心单元2011、第二核心单元2012以及第三核心单元2013；其中，第一核心单元2011、第二核心单元2012以及第三核心单元2013可以包括一个或多个计算核心，不同核心单元设置的计算核心可以相同也可以不同。无线通信模块202，用于向后台服务器传送预警信息。内存模块203，用于提供存储空间，以及存储一个或多个程序。设备中的多核芯片201、无线通信模块202、内存模块203可以通过总线或其他方式连接，图6中以通过总线连接为例。内存模块203作为一种计算机可读存储介质，可配置为存储软件程序、计算机可执行程序以及模块，如本申请实施例中的运动控制方法对应的程序指令/模块。多核芯片201通过运行存储在内存模块203中的软件程序、指令以及模块，从而执行运动控制器的各种功能应用以及数据处理，即实现上述的运动控制方法。示例的，图7为本申请实施例提供的一种运动控制器的结构框图，在图6所示的运动控制器的基础上进行其他功能模块的描述，具体的，如图7所示，多核芯片301包括第一核心单元3011、第二核心单元3012以及第三核心单元3013，其中，内核设置可以为异构核，第一核心单元3011可以包括Arm Cortex-A53核，第二核心单元3012可以包括Arm Cortex-A53核，第三核心单元3013可以包括4个Arm Cortex-R5F核，内存模块302可以包括EMMC 3021，DDR4 3022和FLASH 3023。此外，运动控制器还可以包括无线通信模块303，两路千兆网口304，该千兆网口304可以采用IEEE 802.3 1000Base-T标准,其中一路千兆网口304与第二核心单元3012连接，另一路千兆网口304与第三核心单元3013连接；还包括两路百兆网口305，该百兆网口305可以采用IEEE 802.3100Base-TX标准，其中一路百兆网口305可以用于连接示教器进行示教工作，另一路百兆网口305可以用于连接工业相机进行视觉检测；还包括USB口306，用于提供1个USB 2.0HOST接口来实现U盘程序加载和数据存储；还包括16路数字输入端口307，用于采集编码器反馈信号和输入执行器限位开关信号；还包括16路数字输出端口308，用于驱动电磁阀、继电器等执行器设备；还包括蜂鸣器309，用于提示运动控制器的预警和报警信息；还包括指示灯310，例如，正常状态指示灯、错误状态指示灯、示教器连接指示灯以及EtherCAT通信指示灯等；还包括电源接口311，例如24V宽温度范围的电源输入接口，用于支持18-36V直流工业级电源输入；还包括掉电检测装置312，用于检测电源是否掉电，若出现掉电情况，可以启用备用电池313；还包括备用电池313，用于在电源断电后，通过法拉电容继续供电，续航时间为5s左右。当然，运动控制器的具体结构设置还可以适应于具体应用场景的功能需求来调整，在此本申请不作限制。上述提供的运动控制器可用于执行上述任一实施例提供的运动控制方法，具备相应的功能和有益效果。本申请实施例还提供一种机电设备，包括本申请中任一实施例提供的运动控制器以及至少一个控制节点。其中，控制节点可以作为从站节点接收运动控制器的控制作用，例如，机械臂的各个运动关节机构，机电设备可用于执行上述任一实施例提供的运动控制方法，具备相应的功能和有益效果。本申请实施例还提供一种包含计算机可执行指令的非易失性存储介质，所述计算机可执行指令在由计算机处理器执行时配置为执行一种上述实施例描述的运动控制方法，其中，包括：第一核心单元基于获取到的运动规划信息确定第一运动轨迹，在预设计算周期到达时，基于获取到的实时位姿以及第一运动轨迹，确定第一目标位姿，并将第一目标位姿存储到内存模块；在预设计算周期的周期时间内，第二核心单元从内存模块中获取第一目标位姿，并基于获取到的控制规划信息以及第一目标位姿确定第二运动轨迹，在预设控制周期到达时，基于获取到的实时位姿以及第二运动轨迹，确定第二目标位姿，并对应于第二目标位姿生成控制指令信息，将控制指令信息发送到位于控制链路的起始端位置的从站节点，第三核心单元位于控制链路的结束端位置，控制链路的起始端位置与结束端位置之间串接至少一个从站节点；第三核心单元接收到控制指令信息时，计算当前接收到的控制指令信息与前一控制指令信息的时间间隔，在时间间隔超出设定范围时，请求第二核心单元关闭主站功能，并开启备用主站功能以接替第二核心单元向从站节点输出控制指令信息。存储介质——任何的各种类型的存储器设备或存储设备。术语“存储介质”旨在包括：安装介质，例如CD-ROM、软盘或磁带装置；计算机系统存储器或随机存取存储器，诸如DRAM、DDR RAM、SRAM、EDO RAM，兰巴斯RAM等；非易失性存储器，诸如闪存、磁介质；寄存器或其它相似类型的存储器元件等。存储介质可以还包括其它类型的存储器或其组合。另外，存储介质可以位于程序在其中被执行的第一计算机系统中，或者可以位于不同的第二计算机系统中，第二计算机系统通过网络连接到第一计算机系统。第二计算机系统可以提供程序指令给第一计算机用于执行。术语“存储介质”可以包括驻留在不同位置中的两个或更多存储介质。存储介质可以存储可由一个或多个处理器执行的程序指令。当然，本申请实施例所提供的一种包含计算机可执行指令的存储介质，其计算机可执行指令不限于如上所述的运动控制方法，还可以执行本申请任意实施例所提供的运动控制方法中的相关操作。值得注意的是，上述运动控制器的实施例中，所包括的各个单元和模块只是按照功能逻辑进行划分的，但并不局限于上述的划分，只要能够实现相应的功能即可；另外，各功能单元的具体名称也只是为了便于相互区分，并不配置为限制本申请实施例的保护范围。需要说明的是，本方案中对各步骤的编号仅用于描述本方案的整体设计框架，不表示步骤之间的必然先后关系。在整体实现过程符合本方案整体设计框架的基础上，均属于本方案的保护范围，描述时文字形式上的先后顺序不是对本方案具体实现过程的排他限定。本领域内的技术人员应明白，本申请的实施例可提供为方法、系统、或计算机程序产品。在一个典型的配置中，计算设备包括一个或多个处理器、输入/输出接口、网络接口和内存。存储器可能包括计算机可读介质中的非永久性存储器，随机存取存储器和/或非易失性内存等形式，如只读存储器或闪存。存储器是计算机可读介质的示例。还需要说明的是，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、商品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、商品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括要素的过程、方法、商品或者设备中还存在另外的相同要素。注意，上述仅为本发明的较佳实施例及所运用技术原理。本领域技术人员会理解，本发明不限于这里的特定实施例，对本领域技术人员来说能够进行各种明显的变化、重新调整和替代而不会脱离本发明的保护范围。因此，虽然通过以上实施例对本发明进行了较为详细的说明，但是本发明不仅仅限于以上实施例，在不脱离本发明构思的情况下，还可以包括更多其他等效实施例，而本发明的范围由所附的权利要求范围决定。
