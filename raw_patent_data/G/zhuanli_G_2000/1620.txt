标题title
一种基于大数据的用药提示方法、系统、设备及存储介质
摘要abst
本发明公开了一种基于大数据的用药提示方法、系统、设备及存储介质，属于数据处理技术领域，其用药提示方法包括以下步骤：S1、获取用户的电子病历和历史用药信息；S2、将用户的电子病历输入至电子病历解析模型中，进行特征提取、特征卷积和特征融合，生成用户的最新用药信息；S3、根据历史用药信息，确定最新用药信息的提醒频次，根据最新用药信息的提醒频次，将用户的最新用药信息发送至用户终端。本发明通过对用户的电子病历输入至构建的电子病历解析模型中，解析得到用户的用药名称、用药数量、用药次数和用药禁忌信息，解析过程充分考虑药品名称存在生僻字的情况，对用药名称进行二次修正，其用药生成信息准确无误。
权利要求书clms
1.一种基于大数据的用药提示方法，其特征在于，包括以下步骤：S1、获取用户的电子病历和历史用药信息；S2、构建电子病历解析模型，将用户的电子病历输入至电子病历解析模型中，进行特征提取、特征卷积和特征融合，生成用户的最新用药信息；S3、根据历史用药信息，确定最新用药信息的提醒频次，根据最新用药信息的提醒频次，将用户的最新用药信息发送至用户终端。2.根据权利要求1所述的基于大数据的用药提示方法，其特征在于，所述S2中，电子病历解析模型包括文本提取层、第一特征提取层、第二特征提取层、第三特征提取层、第四特征提取层、特征卷积层、特征融合层和信息输出层；所述文本提取层的输入端作为电子病历解析模型的输入端，其第一输出端和第一特征提取层的输入端连接，其第二输出端和第二特征提取层的输入端连接，其第三输出端和第三特征提取层的输入端连接，其第四输出端和第四特征提取层的输入端连接；所述第一特征提取层的输出端和特征卷积层的输入端连接；所述第二特征提取层的输出端和特征融合层的第一输入端连接；所述第三特征提取层的输出端和特征融合层的第二输入端连接；所述特征卷积层的输出端和信息输出层的第一输入端连接；所述特征融合层的输出端和信息输出层的第二输入端连接；所述第四特征提取层的输出端和信息输出层的第三输入端连接；所述信息输出层的输出端作为电子病历解析模型的输出端。3.根据权利要求2所述的基于大数据的用药提示方法，其特征在于，所述第一特征提取层的表达式为：式中，X表示第一特征卷积层的输出，gm表示电子病历对应文本信息中第m个关键词的词向量，dm表示电子病历对应文本信息中第m个关键词的词频，η表示文本提取层的输出，M表示电子病历对应文本信息的关键词个数，e表示指数；第二特征提取层的表达式为：式中，Y表示第二特征提取层的输出，cn表示电子病历对应文本信息中第n个数值的词频，N表示电子病历对应文本信息的数值个数，e表示指数；第三特征提取层的表达式为：式中，Z表示第三特征提取层的输出，log表示对数函数；第四特征提取层的表达式为：式中，W表示第四特征提取层的输出。4.根据权利要求2所述的基于大数据的用药提示方法，其特征在于，所述特征卷积层的表达式为：式中，F表示特征卷积层的输出，sigmoid表示激活函数，K表示特征卷积层的卷积核个数，μk表示特征卷积层中第k个卷积核的偏置，ak表示特征卷积层中第k个卷积核的高，bk表示特征卷积层中第k个卷积核的宽，yk+2表示特征卷积层中第k+2个卷积核的输出，yk+1表示特征卷积层中第k+1个卷积核的输出，yk表示特征卷积层中第k个卷积核的输出，X表示第一特征卷积层的输出。5.根据权利要求2所述的基于大数据的用药提示方法，其特征在于，所述特征融合层的表达式为：式中，G表示特征融合层的输出，表示哈达玛积运算，L表示特征融合层的卷积核个数，xl+2表示特征融合层中第l+2个卷积核的输出，xl+1表示特征融合层中第l+1个卷积核的输出，xl表示特征融合层中第l个卷积核的输出，Y表示第二特征提取层的输出，Z表示第三特征提取层的输出，A表示第二特征提取层中所有数值组成的矩阵，B表示第三特征提取层中所有数值组成的矩阵。6.根据权利要求1所述的基于大数据的用药提示方法，其特征在于，所述S1中，历史用药信息包括历史超时反馈次数和历史超时反馈时长。7.根据权利要求1所述的基于大数据的用药提示方法，其特征在于，所述S3中，最新用药信息的提醒频次a的计算公式为：式中，J表示历史超时反馈次数，Tj表示第j次超时反馈时长，表示向上取整运算，ε表示极小值，e表示指数。8.一种基于大数据的用药提示系统，其特征在于，包括用药信息获取单元、用药信息生成单元和用药信息提醒单元；所述用药信息获取单元用于获取用户的电子病历和历史用药信息；所述用药信息生成单元用于构建电子病历解析模型，将用户的电子病历输入至电子病历解析模型中，进行特征提取、特征卷积和特征融合，生成用户的最新用药信息；所述用药信息提醒单元根据历史用药信息，确定最新用药信息的提醒频次，根据最新用药信息的提醒频次，将用户的最新用药信息发送至用户终端。9.一种计算机设备，其特征在于，所述计算机设备包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的用药提示程序，所述用药提示程序被所述处理器执行时实现如权利要求1至7中任一项所述的用药提示方法的步骤。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机程序，其特征在于，执行所述计算机程序时实现如权利要求1至7中任一项所述的用药提示方法的步骤。
说明书desc
技术领域本发明属于数据处理技术领域，具体涉及一种基于大数据的用药提示方法、系统、设备及存储介质。背景技术随着社会的发展和环境的变差，人口老龄化日益明显，有越来越多的老人患上诸如高血压糖尿病心脏病之类的各种慢性病，需要吃各种药来治疗疾病。但是由于药品种类多且数量多，再加上老年人记忆力不好，很容易漏掉一些药，或者重复吃一些药，进而加重病情。同时，大量的药品有哪些注意事项、如何服用、每日服用的次数和每次服用量，这些问题都成了记忆上的负担，很多老年人因为视力的衰退，老花眼的问题，也很难看清楚药品上所印制的密密麻麻的文字，从而导致许多困难。而大多数年轻慢性病患者都能够按照医嘱持续用药，服药依从性好；仅有少部分患者由于工作繁忙或其他因素导致了用药不及时的情况发生，服药依从性不好，需要对其进行用药提醒。传统患者用药行为提示通常采用人为完成，除了医务人员的口头用药教育和提供宣教资料外，还有纸质日记卡记录用药情况等方式，但由于日常使用不便、受众局限和强化教育不足等缺点，推广受限。而通过医生或家属手写用药事项的提示方法往往不够严谨，且容易忽略患者历史用药情况，不能对患者进行及时且多次提醒。发明内容本发明为了解决以上问题，提出了一种基于大数据的用药提示方法、系统、设备及存储介质。本发明的技术方案是：一种基于大数据的用药提示方法包括以下步骤：S1、获取用户的电子病历和历史用药信息；S2、构建电子病历解析模型，将用户的电子病历输入至电子病历解析模型中，进行特征提取、特征卷积和特征融合，生成用户的最新用药信息；S3、根据历史用药信息，确定最新用药信息的提醒频次，根据最新用药信息的提醒频次，将用户的最新用药信息发送至用户终端。进一步地，S2中，电子病历解析模型包括文本提取层、第一特征提取层、第二特征提取层、第三特征提取层、第四特征提取层、特征卷积层、特征融合层和信息输出层；文本提取层的输入端作为电子病历解析模型的输入端，其第一输出端和第一特征提取层的输入端连接，其第二输出端和第二特征提取层的输入端连接，其第三输出端和第三特征提取层的输入端连接，其第四输出端和第四特征提取层的输入端连接；第一特征提取层的输出端和特征卷积层的输入端连接；第二特征提取层的输出端和特征融合层的第一输入端连接；第三特征提取层的输出端和特征融合层的第二输入端连接；特征卷积层的输出端和信息输出层的第一输入端连接；特征融合层的输出端和信息输出层的第二输入端连接；第四特征提取层的输出端和信息输出层的第三输入端连接；信息输出层的输出端作为电子病历解析模型的输出端。上述进一步方案的有益效果是：在本发明中，文本提取层作为电子病历解析模型的输入端，用于提取电子病历的文本信息，便于第一特征提取层、第二特征提取层、第三特征提取层和第四特征提取层进行特征提取。第一特征提取层通过对文本信息中关键词的词向量和词频进行数学运算，生成最新用药信息中的用药名称。第二特征提取层通过对文本信息中数值出现的频率进行数学运算，生成最新用药信息中的用药数量。第三特征提取层通过对文本信息中数值出现的频率进行数学运算，生成最新用药信息中的用药次数。第四特征提取层通过对文本信息中关键词的词向量和词频进行数学运算，生成最新用药信息中的用药方式和用药禁忌信息。由于许多药品名称较为复杂且常涉及生僻字，所以本发明的特征卷积层通过激活运算，对第一特征提取层生成的用药名称进行修正。特征融合层对第二特征提取层输出的用药数量和第三特征提取层输出的用药次数进行整合。信息输出层用于将修正后的用药名称、用药数量、用药次数和用药禁忌信息统一作为整体模型的输出。进一步地，第一特征提取层的表达式为：式中，X表示第一特征卷积层的输出，gm表示电子病历对应文本信息中第m个关键词的词向量，dm表示电子病历对应文本信息中第m个关键词的词频，η表示文本提取层的输出，M表示电子病历对应文本信息的关键词个数，e表示指数；第二特征提取层的表达式为：式中，Y表示第二特征提取层的输出，cn表示电子病历对应文本信息中第n个数值的词频，N表示电子病历对应文本信息的数值个数，e表示指数；第三特征提取层的表达式为：式中，Z表示第三特征提取层的输出，log表示对数函数；第四特征提取层的表达式为：式中，W表示第四特征提取层的输出。进一步地，特征卷积层的表达式为：式中，F表示特征卷积层的输出，sigmoid表示激活函数，K表示特征卷积层的卷积核个数，μk表示特征卷积层中第k个卷积核的偏置，ak表示特征卷积层中第k个卷积核的高，bk表示特征卷积层中第k个卷积核的宽，yk+2表示特征卷积层中第k+2个卷积核的输出，yk+1表示特征卷积层中第k+1个卷积核的输出，yk表示特征卷积层中第k个卷积核的输出，X表示第一特征卷积层的输出。进一步地，特征融合层的表达式为：式中，G表示特征融合层的输出，表示哈达玛积运算，L表示特征融合层的卷积核个数，xl+2表示特征融合层中第l+2个卷积核的输出，xl+1表示特征融合层中第l+1个卷积核的输出，xl表示特征融合层中第l个卷积核的输出，Y表示第二特征提取层的输出，Z表示第三特征提取层的输出，A表示第二特征提取层中所有数值组成的矩阵，B表示第三特征提取层中所有数值组成的矩阵。进一步地，S1中，历史用药信息包括历史超时反馈次数和历史超时反馈时长。上述进一步方案的有益效果是：在本发明中，用户用药后可通过终端反馈用药结果，如按时服药、超时服药等。因此可通过用户历史用药超时次数和超时时长来判断是否提高提醒用户用药频次。进一步地，S3中，最新用药信息的提醒频次a的计算公式为：式中，J表示历史超时反馈次数，Tj表示第j次超时反馈时长，表示向上取整运算，ε表示极小值，e表示指数。基于以上方法，本发明还提出基于大数据的用药提示系统，包括用药信息获取单元、用药信息生成单元和用药信息提醒单元；用药信息获取单元用于获取用户的电子病历和历史用药信息；用药信息生成单元用于构建电子病历解析模型，将用户的电子病历输入至电子病历解析模型中，进行特征提取、特征卷积和特征融合，生成用户的最新用药信息；用药信息提醒单元根据历史用药信息，确定最新用药信息的提醒频次，根据最新用药信息的提醒频次，将用户的最新用药信息发送至用户终端。为实现上述目的，本发明还提供了一种计算机设备，计算机设备包括存储器、处理器及存储在存储器上并可在处理器上运行的用药提示程序，用药提示程序被处理器执行时实现上述用药提示方法的部分或全部步骤。为实现上述目的，本发明还提供了一种计算机可读存储介质，计算机可读存储介质存储有计算机程序，执行计算机程序时实现上述用药提示方法的部分或全部步骤。本发明的有益效果是：本发明提出了一种基于大数据的用药提示方法、系统、设备及存储介质，通过对用户的电子病历输入至构建的电子病历解析模型中，解析得到用户的用药名称、用药数量、用药次数和用药禁忌信息，解析过程充分考虑药品名称存在生僻字的情况，对用药名称进行二次修正，其用药生成信息准确无误；本发明的电子病历解析模型通过对文本提取层、第一特征提取层、第二特征提取层、第三特征提取层、第四特征提取层、特征卷积层、特征融合层和信息输出层的构建，可以对电子病历完成文本信息提取、文本特征提取、数值特征提取、特征卷积和特征融合等操作，将修正后的用药名称、用药数量、用药次数和用药禁忌信息统一作为整体模型的输出，构建的电子病历解析模型可以简化信息提取流程，便于后续步骤根据电子病历的提取结果生成最新的用药信息；本发明结合用户历史用药情况，提取历史超时反馈次数和历史超时反馈时长，为用户生成有针对性的提醒频次，可有效防止用户漏服和误服等情况出现。附图说明图1为基于大数据的用药提示方法的流程图；图2为基于电子病历解析模型的结构示意图；图3为基于大数据的用药提示系统的结构示意图；图4为计算机设备的结构示意图。具体实施方式下面结合附图对本发明的实施例作进一步的说明。如图1所示，本发明提供了一种基于大数据的用药提示方法，包括以下步骤：S1、获取用户的电子病历和历史用药信息；S2、构建电子病历解析模型，将用户的电子病历输入至电子病历解析模型中，进行特征提取、特征卷积和特征融合，生成用户的最新用药信息；S3、根据历史用药信息，确定最新用药信息的提醒频次，根据最新用药信息的提醒频次，将用户的最新用药信息发送至用户终端。在本发明实施例中，如图2所示，S2中，电子病历解析模型包括文本提取层、第一特征提取层、第二特征提取层、第三特征提取层、第四特征提取层、特征卷积层、特征融合层和信息输出层；文本提取层的输入端作为电子病历解析模型的输入端，其第一输出端和第一特征提取层的输入端连接，其第二输出端和第二特征提取层的输入端连接，其第三输出端和第三特征提取层的输入端连接，其第四输出端和第四特征提取层的输入端连接；第一特征提取层的输出端和特征卷积层的输入端连接；第二特征提取层的输出端和特征融合层的第一输入端连接；第三特征提取层的输出端和特征融合层的第二输入端连接；特征卷积层的输出端和信息输出层的第一输入端连接；特征融合层的输出端和信息输出层的第二输入端连接；第四特征提取层的输出端和信息输出层的第三输入端连接；信息输出层的输出端作为电子病历解析模型的输出端。在本发明中，文本提取层作为电子病历解析模型的输入端，用于提取电子病历的文本信息，便于第一特征提取层、第二特征提取层、第三特征提取层和第四特征提取层进行特征提取。第一特征提取层通过对文本信息中关键词的词向量和词频进行数学运算，生成最新用药信息中的用药名称。第二特征提取层通过对文本信息中数值出现的频率进行数学运算，生成最新用药信息中的用药数量。第三特征提取层通过对文本信息中数值出现的频率进行数学运算，生成最新用药信息中的用药次数。第四特征提取层通过对文本信息中关键词的词向量和词频进行数学运算，生成最新用药信息中的用药方式和用药禁忌信息。由于许多药品名称较为复杂且常涉及生僻字，所以本发明的特征卷积层通过激活运算，对第一特征提取层生成的用药名称进行修正。特征融合层对第二特征提取层输出的用药数量和第三特征提取层输出的用药次数进行整合。信息输出层用于将修正后的用药名称、用药数量、用药次数和用药禁忌信息统一作为整体模型的输出。在本发明实施例中，第一特征提取层的表达式为：式中，X表示第一特征卷积层的输出，gm表示电子病历对应文本信息中第m个关键词的词向量，dm表示电子病历对应文本信息中第m个关键词的词频，η表示文本提取层的输出，M表示电子病历对应文本信息的关键词个数，e表示指数；第二特征提取层的表达式为：式中，Y表示第二特征提取层的输出，cn表示电子病历对应文本信息中第n个数值的词频，N表示电子病历对应文本信息的数值个数，e表示指数；第三特征提取层的表达式为：式中，Z表示第三特征提取层的输出，log表示对数函数；第四特征提取层的表达式为：式中，W表示第四特征提取层的输出。在本发明实施例中，特征卷积层的表达式为：式中，F表示特征卷积层的输出，sigmoid表示激活函数，K表示特征卷积层的卷积核个数，μk表示特征卷积层中第k个卷积核的偏置，ak表示特征卷积层中第k个卷积核的高，bk表示特征卷积层中第k个卷积核的宽，yk+2表示特征卷积层中第k+2个卷积核的输出，yk+1表示特征卷积层中第k+1个卷积核的输出，yk表示特征卷积层中第k个卷积核的输出，X表示第一特征卷积层的输出。在本发明实施例中，特征融合层的表达式为：式中，G表示特征融合层的输出，表示哈达玛积运算，L表示特征融合层的卷积核个数，xl+2表示特征融合层中第l+2个卷积核的输出，xl+1表示特征融合层中第l+1个卷积核的输出，xl表示特征融合层中第l个卷积核的输出，Y表示第二特征提取层的输出，Z表示第三特征提取层的输出，A表示第二特征提取层中所有数值组成的矩阵，B表示第三特征提取层中所有数值组成的矩阵。在本发明实施例中，S1中，历史用药信息包括历史超时反馈次数和历史超时反馈时长。在本发明中，用户用药后可通过终端反馈用药结果，如按时服药、超时服药等。因此可通过用户历史用药超时次数和超时时长来判断是否提高提醒用户用药频次。在本发明实施例中，S3中，最新用药信息的提醒频次a的计算公式为：式中，J表示历史超时反馈次数，Tj表示第j次超时反馈时长，表示向上取整运算，ε表示极小值，e表示指数。本发明实施例提供了一种基于大数据的用药提示系统，如图3所示，包括用药信息获取单元、用药信息生成单元和用药信息提醒单元；用药信息获取单元用于获取用户的电子病历和历史用药信息；用药信息生成单元用于构建电子病历解析模型，将用户的电子病历输入至电子病历解析模型中，进行特征提取、特征卷积和特征融合，生成用户的最新用药信息；用药信息提醒单元根据历史用药信息，确定最新用药信息的提醒频次，根据最新用药信息的提醒频次，将用户的最新用药信息发送至用户终端。本申请实施例中还提供一种计算机设备，该计算机设备可以是服务器，其内部结构可以如图4所示。该计算机设备包括通过系统总线连接的处理器、存储器、网络接口和数据库。其中，该计算机设计的处理器用于提供计算和控制能力。该计算机设备的存储器包括非易失性存储介质、内存储器。该非易失性存储介质存储有操作系统、计算机程序和数据库。该内存储器为非易失性存储介质中的操作系统和计算机程序的运行提供环境。 该计算机设备的数据库用于用药提示程序。该计算机设备的网络接口用于与外部的终端通过网络连接通信。该计算机程序被处理器执行时以实现一种基于大数据的用药提示方法。系统总线包括数据总线、地址总线和控制总线。内存储器可以包括易失性存储器，例如随机存取存储器和/或高速缓存存储器，还可以进一步包括只读存储器。应当注意，尽管在上文详细描述中提及了计算机设备的若干模块/模块或子模块/模块，但是这种划分仅仅是示例性的并非强制性的。实际上，根据本发明的实施方式，上文描述的几个或更多模块/模块的特征和功能可以在一个模块/模块中具体化；反之，上文描述的一个模块/模块的特征和功能可以进一步划分为由多个模块/模块来具体化。本发明实施例还提供了一种计算机可读存储介质，计算机可读存储介质存储有计算机程序，执行计算机程序时实现上述方法实施例的任意一种用药提示方法的部分或全部步骤。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成的，计算机程序可存储于一非易失性计算机可读取存储介质中，该计算机程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的和实施例中所使用的对存储器、存储、数据库或其它介质的任何引用，均可包括非易失性和/或易失性存储器。非易失性存储器可以包括只读存储器、可编程ROM、电可编程ROM、电可擦除可编程ROM或闪存。易失性存储器可包括随机存取存储器或者外部高速缓冲存储器。作为说明而非局限，RAM通过多种形式可得，诸如静态RAM、动态RAM、同步DRAM、双速据率SDRAM、增强型SDRAM、同步链路DRAM、存储器总线直接RAM、直接存储器总线动态RAM、以及存储器总线动态RAM等。需要说明的是，在本发明中，诸如“第一”和“第二”等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本领域的普通技术人员将会意识到，这里所述的实施例是为了帮助读者理解本发明的原理，应被理解为本发明的保护范围并不局限于这样的特别陈述和实施例。本领域的普通技术人员可以根据本发明公开的这些技术启示做出各种不脱离本发明实质的其它各种具体变形和组合，这些变形和组合仍然在本发明的保护范围内。
