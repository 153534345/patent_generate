标题title
一种炼钢转炉的钢水倾倒方法
摘要abst
本发明涉及图像数据处理领域，更具体地，本发明涉及一种炼钢转炉的钢水倾倒方法，方法包括：采集炼钢转炉倾倒过程中的连续视频序列中单帧实时图像，进行预处理，使用凸包算法得到火光变化区域；计算凸包边界序列和亮度值；计算灰度变化曲线之间的相似值，构建预设实例分割网络模型，得到识别结果；根据转动过程的图像与转炉识别结果的乘积，计算匹配值，得到角度的合适程度值，从而判断炼钢转炉的倾倒姿态。本发明通过减少过程中由于火光过亮的部分，降低炼钢转炉倾倒过程中由于火光过亮引起钢水倾倒角度的监测误差，提高了钢水倾倒角度的准确性，完成转炉姿态调整，完成炼钢转炉的钢水倾倒过程。
权利要求书clms
1.一种炼钢转炉的钢水倾倒方法，其特征在于，包括：采集炼钢转炉倾倒过程中的连续视频序列中单帧实时图像，并进行预处理，得到灰度图像和二值化图像；根据所述二值化图像进行边缘检测，得到边缘检测结果；使用凸包算法对所述边缘检测结果进行计算，得到每一个连通域对应的凸包区域以及对应的面积；根据最大所述凸包区域的面积，得到转炉在倾倒钢水中所产生的火光变化区域，其中，所述火光变化区域为实时图像中过亮变化部分的区域；计算所述过亮变化部分的区域和其他区域中同一连通域的凸包边界序列和亮度值，其中其他区域为过亮变化部分的区域以外的区域，其他区域包括：背景、转炉区域以及吊臂区域，同一连通域为转炉区域；使用时间序列相似算法，计算各个所述同一连通域的灰度变化曲线与过亮变化部分的区域的灰度变化曲线之间的相似值，并进行归一化处理；构建预设实例分割网络模型，采集历史未开始倾倒的转炉图像进行训练，得到的待预测实例分割网络模型，将实时采集的未开始倾倒的转炉图像送入待预测实例分割网络模型，得到转炉识别结果和吊臂转动部分的识别结果；根据所述连续视频序列中转动过程的图像与转炉识别结果的乘积，得到待匹配的局部图像，计算所述待匹配的局部图像与转炉标准图像之间的匹配值，根据所述匹配值使用归一化后的相似值作为加权，得到转动过程的角度的合适程度值；根据倾倒转炉转动过程的角度的合适程度值，判断炼钢转炉的倾倒姿态。2.根据权利要求1所述的一种炼钢转炉的钢水倾倒方法，其特征在于，采集炼钢转炉倾倒过程中的连续视频序列中单帧的实时图像，并进行预处理，得到灰度图像和二值化图像，包括：根据单帧的所述实时图像进行灰度化处理，得到单帧所述实时图像的灰度图像；获取连续两帧所述灰度图像，根据所述灰度图像中同一位置的像素点灰度值的差值的绝对值，作为同一位置的像素点在连续两帧下的灰度变化量，得到灰度变化量图像；根据所述灰度变化量图像进行二值化分割，其中，大于阈值的像素点则标记为1，小于阈值的像素点则标记为0，得到所述灰度变化量图像的二值化图像。3.根据权利要求1所述的一种炼钢转炉的钢水倾倒方法，其特征在于，计算所述过亮变化部分的区域和其他区域中同一连通域的凸包边界序列和亮度值，包括：计算连续两张二值化图像与连续两张图像之间的最大凸包区域的面积进行掩膜运算，得到连续两张灰度图像的过亮变化部分的区域；计算连续两张二值化图像之间所述过亮变化部分的区域内所有像素点的灰度值的均值，得到所述区域的凸包边界序列和亮度值；计算连续两张二值化图像之间除所述过亮变化部分的区域外，所述同一连通域的像素点的灰度值的均值，得到所述同一连通域的凸包边界序列和亮度值。4.根据权利要求3所述的一种炼钢转炉的钢水倾倒方法，其特征在于，所述过亮变化部分的区域和同一连通域，还包括：建立二维坐标系，其中，以凸包边界的序列为横坐标，光亮值为纵坐标，得到所述同一连通域和过亮变化部分的区域的灰度变化曲线。5.根据权利要求1所述的一种炼钢转炉的钢水倾倒方法，其特征在于，根据所述转炉识别结果和吊臂转动部分的识别结果，还包括：获取吊臂转动部分的识别结果的掩膜图像，并提取掩膜图像的质心；使用骨架化算法对转炉识别结果的掩膜图像提取中心脊线，其中，所述中心脊线即为转炉的中轴线，转炉跟随所述中轴线同步转动；根据所述中心脊线，计算转炉的转动角度。6.根据权利要求1所述的一种炼钢转炉的钢水倾倒方法，其特征在于，所述转动过程的角度的合适程度值，包括：计算所述局部图像与转炉标准图像的像素点的像素值的差值的绝对值，其中，每个像素点的像素值对应一个所述绝对值和一个所述相似值；将所述绝对值对应像素点的相似值作为权重，进行加权平均，得到转动过程的角度的合适程度值。7.根据权利要求1所述的一种炼钢转炉的钢水倾倒方法，其特征在于，根据倾倒转炉转动过程的角度的合适程度值，判断炼钢转炉的倾倒姿态，包括：获取所有转炉的角度的合适程度值，其中，最大的合适程度值为转炉的角度值；计算开始倾倒时间到转炉转动至角度值的时间间隔；计算所述时间间隔下转炉转动角度值与预设倾倒角度值的差值；响应于差值大于等于预设差值，则进行转炉姿态调整。
说明书desc
技术领域本发明一般地涉及图像数据处理领域。更具体地，本发明涉及一种炼钢转炉的钢水倾倒方法。背景技术在冶金工业中，钢水的倾倒是重要的一环，其过程既危险又复杂。通过对转炉进行实时监控，通过采集转炉图像进行转炉识别获取转炉实时的倾倒状态，可实现炼钢转炉的钢水倾倒过程中倾倒监测及调整，防止倾倒过快导致飞溅，或者倾倒过慢导致钢水降温形成较多的炉渣。由于炼钢转炉的钢水倾倒过程中会产生高温、大量火光，导致难以在炼钢转炉进行钢水倾倒过程中加装传感器用于钢水倾倒过程中的监测调整，进而通过在炼钢转炉较远处安装相机，通过相机进行钢水倾倒过程中炼钢转炉的识别，以用于钢水倾倒过程中的监测调整。但是由于炼钢转炉的钢水倾倒过程中会产生高温、大量火光，导致摄像头采集转炉部分质量不佳，并且随着火光的晃动，导致转炉部分具有较大的成像质量变化，不利用转炉识别，使得转炉主体以及其他重要设备信息无法看清，导致影响炼钢转炉钢水倾倒过程中无法及时进行调整倾倒角度，因此需要一种炼钢转炉的钢水倾倒方法。发明内容为解决上述一个或多个技术问题，本发明提出通过对炼钢转炉的钢水倾倒过程中的图像进行有效增强，以获取准确的转炉主体信息，进而用于炼钢转炉的钢水倾倒角度调整，为此，本发明在如下的多个方面中提供方案。一种炼钢转炉的钢水倾倒方法，包括：采集炼钢转炉倾倒过程中的连续视频序列中单帧实时图像，并进行预处理，得到灰度图像和二值化图像；根据所述二值化图像进行边缘检测，得到边缘检测结果；使用凸包算法对所述边缘检测结果进行计算，得到每一个连通域对应的凸包区域以及对应的面积；根据最大所述凸包区域的面积，得到转炉在倾倒钢水中所产生的火光变化区域，其中，所述火光变化区域为实时图像中过亮变化部分的区域；计算所述过亮变化部分的区域和其他区域中同一连通域的凸包边界序列和亮度值，其中其他区域为过亮变化部分的区域以外的区域，其他区域包括：背景、转炉区域以及吊臂区域，同一连通域为转炉区域；使用时间序列相似算法，计算各个所述同一连通域的灰度变化曲线与过亮变化部分的区域的灰度变化曲线之间的相似值，并进行归一化处理；构建预设实例分割网络模型，采集历史未开始倾倒的转炉图像进行训练，得到的待预测实例分割网络模型，将实时采集的未开始倾倒的转炉图像送入待预测实例分割网络模型，得到转炉识别结果和吊臂转动部分的识别结果；根据所述连续视频序列中转动过程的图像与转炉识别结果的乘积，得到待匹配的局部图像，计算所述待匹配的局部图像与转炉标准图像之间的匹配值，根据所述匹配值使用归一化后的相似值作为加权，得到转动过程的角度的合适程度值；根据倾倒转炉转动过程的角度的合适程度值，判断炼钢转炉的倾倒姿态。在一个实施例中，采集炼钢转炉倾倒过程中的连续视频序列中单帧的实时图像，并进行预处理，得到灰度图像和二值化图像，包括：根据单帧的所述实时图像进行灰度化处理，得到单帧所述实时图像的灰度图像；获取连续两帧所述灰度图像，根据所述灰度图像中同一位置的像素点灰度值的差值的绝对值，作为同一位置的像素点在连续两帧下的灰度变化量，得到灰度变化量图像；根据所述灰度变化量图像进行二值化分割，其中，大于阈值的像素点则标记为1，小于阈值的像素点则标记为0，得到所述灰度变化量图像的二值化图像。在一个实施例中，计算所述过亮变化部分的区域和其他区域中同一连通域的凸包边界序列和亮度值，包括：计算连续两张二值化图像与连续两张图像之间的最大凸包区域的面积进行掩膜运算，得到连续两张灰度图像的过亮变化部分的区域；计算连续两张二值化图像之间所述过亮变化部分的区域内所有像素点的灰度值的均值，得到所述区域的凸包边界序列和亮度值；计算连续两张二值化图像之间除所述过亮变化部分的区域外，所述同一连通域的像素点的灰度值的均值，得到所述同一连通域的凸包边界序列和亮度值。在一个实施例中，所述过亮变化部分的区域和同一连通域，还包括：建立二维坐标系，其中，以凸包边界的序列为横坐标，光亮值为纵坐标，得到所述同一连通域和过亮变化部分的区域的灰度变化曲线。在一个实施例中，根据所述转炉识别结果和吊臂转动部分的识别结果，还包括：获取吊臂转动部分的识别结果的掩膜图像，并提取掩膜图像的质心；使用骨架化算法对转炉识别结果的掩膜图像提取中心脊线，其中，所述中心脊线即为转炉的中轴线，转炉跟随所述中轴线同步转动；根据所述中心脊线，计算转炉的转动角度。在一实施例中，所述转动过程的角度的合适程度值，包括：计算所述局部图像与转炉标准图像的像素点的像素值的差值的绝对值，其中，每个像素点的像素值对应一个所述绝对值和一个所述相似值；将所述绝对值对应像素点的相似值作为权重，进行加权平均，得到转动过程的角度的合适程度值。在一实施例中，根据倾倒转炉转动过程的角度的合适程度值，判断炼钢转炉的倾倒姿态，包括：获取所有转炉的角度的合适程度值，其中，最大的合适程度值为转炉的角度值；计算开始倾倒时间到转炉转动至角度值的时间间隔；计算所述时间间隔下转炉转动角度值与预设倾倒角度值的差值；响应于差值大于等于预设差值，则进行转炉姿态调整。本发明具有以下效果：1、本发明通过获取炼钢转炉倾倒过程中由于火光过亮的部分，降低炼钢转炉倾倒过程中由于火光过亮引起钢水倾倒角度的监测误差，进而根据准确的钢水倾倒角度监测误差，完成转炉姿态调整，完成炼钢转炉的钢水倾倒。2、本发明通过对转炉运动方向进行预估，即可完成当前转炉状态监测，由于火光引起转炉表面的灰度变化，对转炉部分所受火光照射影响的灰度部分进行灰度调整，提高在沿着转炉运动方向进行转炉状态估计的准确性，进而用于转炉中钢水倾倒过程的调整。附图说明通过参考附图阅读下文的详细描述，本发明示例性实施方式的上述以及其他目的、特征和优点将变得易于理解。在附图中，以示例性而非限制性的方式示出了本发明的若干实施方式，并且相同或对应的标号表示相同或对应的部分，其中：图1是本发明实施例一种炼钢转炉的钢水倾倒方法中步骤S1-S9的方法流程图。图2是本发明实施例一种炼钢转炉的钢水倾倒方法中步骤S10-S12的方法流程图。图3是本发明实施例一种炼钢转炉的钢水倾倒方法中步骤S50-S51的方法流程图。图4是本发明实施例一种炼钢转炉的钢水倾倒方法中步骤S60-S62的方法流程图。图5是本发明实施例一种炼钢转炉的钢水倾倒方法中步骤S80-S81的方法流程图。图6是本发明实施例一种炼钢转炉的钢水倾倒方法中步骤S90-S93的方法流程图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。下面结合附图来详细描述本发明的具体实施方式。参照图1，一种炼钢转炉的钢水倾倒方法包括步骤S1-S9，具体如下：S1：采集炼钢转炉倾倒过程中的连续视频序列中单帧实时图像，并进行预处理，得到灰度图像和二值化图像，参照图2，包括步骤S10-S12：S10：根据单帧的实时图像进行灰度化处理，得到单帧实时图像的灰度图像；S11：获取连续两帧灰度图像，根据灰度图像中同一位置的像素点灰度值的差值的绝对值，作为同一位置的像素点在连续两帧下的灰度变化量，得到灰度变化量图像；S12：根据灰度变化量图像进行二值化分割，其中，大于阈值的像素点则标记为1，小于阈值的像素点则标记为0，得到灰度变化量图像的二值化图像。示例性的，单帧图像中出现了由于炼钢转炉倾倒起火的火光，则会造成连续两帧图像中出现很强的灰度变化，其中火光为高亮部分，进而为了获取转炉及吊臂部分所受火光影响造成的灰度变化分布，本方案选择获取图像中由于火光产生的过亮变化部分，以用于转炉及吊臂部分所受火光影响分析。S2：根据二值化图像进行边缘检测，得到边缘检测结果。S3：使用凸包算法对边缘检测结果进行计算，得到每一个连通域对应的凸包区域以及对应的面积。示例性的，通过凸包检测结果可将火光部分对应的区域填充完整。S4：根据最大凸包区域的面积，得到转炉在倾倒钢水中所产生的火光变化区域，其中，火光变化区域为实时图像中过亮变化部分的区域，包括：计算连续两张二值化图像与连续两张图像之间的最大凸包区域的面积进行掩膜运算，得到连续两张灰度图像的过亮变化部分的区域。示例性的，钢水倾倒过程中所产生的火光为图像中的最强火光，获取最大凸包面积的凸包区域即为转炉在倾倒钢水中所产生的火光变化区域，即为当前炼钢转炉倾倒过程中实时图像的过亮变化部分。S5：计算过亮变化部分的区域和其他区域中同一连通域的凸包边界序列和亮度值，其中其他区域为过亮变化部分的区域以外的区域，其他区域包括：背景、转炉区域以及吊臂区域，同一连通域为转炉区域，参照图3，包括步骤S50-S51：S50：计算连续两张二值化图像之间过亮变化部分的区域内所有像素点的灰度值的均值，得到区域的凸包边界序列和亮度值；S51：计算连续两张二值化图像之间除过亮变化部分的区域外，同一连通域的像素点的灰度值的均值，得到同一连通域的凸包边界序列和亮度值。示例性的，获取得到炼钢转炉倾倒过程中实时图像的过亮变化部分后，由于火光的形态变化和亮度变化，会使得在转炉上所映射的火光部分和亮度部分的变化，本方案中获取连续10帧图像之间所对应火光的凸包边界，进而10张连续可以得到9个凸包边界，其中10为超参数可由实施者根据具体实施场景进行调整。为了判断10帧图像是否属于同一局部区域对应连通域的灰度变化，通过二值图像中所有连通域的质心像素点的坐标属于相邻两张二值图像中的某一个连通域，则二值图像的质心像素点的坐标对应的连通域与相邻两张二值图像中包含对应质心的连通域为同一连通域，若在连续9次判断中，都存在所属于的同一连通域，则完成同一连通域的判断，如果存在一次不属于同一连通域，则将该连通域进行剔除，不作为后续分析。S6：使用时间序列相似算法，计算各个同一连通域的灰度变化曲线与过亮变化部分的区域的灰度变化曲线之间的相似值，并进行归一化处理，参照图4，包括步骤S60-S62：S60：建立二维坐标系，其中，以凸包边界的序列为横坐标，光亮值为纵坐标，得到同一连通域和过亮变化部分的区域的灰度变化曲线；S61：计算同一连通域和过亮变化部分的区域的灰度变化曲线的相似值；S62：根据相似值进行归一化处理。示例性的，其中相似值越大，则表示两条曲线之间差异越大，则该同一区域受火光的影响越小，如果相似值越小，则表示两条曲线之间差异越小，则该同一区域受火光的影响越大，则在进行转炉识别时，准确率越低，对转炉在钢水倾倒过程中进行调整时，越可能出现误差，相似值进行归一化处理，将相似值范围设置在0-1之间。S7：构建预设实例分割网络模型，采集历史未开始倾倒的转炉图像进行训练，得到的待预测实例分割网络模型，将实时采集的未开始倾倒的转炉图像送入待预测实例分割网络模型，得到转炉识别结果和吊臂转动部分的识别结果。示例性的，其中实例分割本方案选择0为Mask R-CNN网络，Mask R-CNN网络是一种用于目标检测和语义分割的深度学习模型，它是在Faster R-CNN的基础上扩展而来的，其中训练集为历史未开始倾倒的转炉图像，并通过具有相关经验的人员进行标注，其中属于背景类别的像素点标注为0，转炉部分的像素点标注为1，吊臂转动部分的像素点标注为2。获取吊臂转动部分的识别结果的掩膜图像，并提取掩膜图像的质心；使用骨架化算法对转炉识别结果的掩膜图像提取中心脊线，其中，中心脊线即为转炉的中轴线，转炉跟随中轴线同步转动；根据中心脊线，计算转炉的转动角度。示例性的，由于吊臂转动部分的识别结果为圆形区域，获取吊臂转动部分的识别结果对应的掩膜图像，提取掩膜的质心，进而由于吊臂转动部分的识别结果圆形，所以质心即为圆心；对转炉识别结果对应的掩膜图像利用骨架化算法提取中心脊线，即中心脊线即为转炉中轴线，进而将识别的中轴线绕上述所得圆心进行圆周运动，其中由于中轴线在转炉部分的位置固定，进行可将转炉部分跟随中轴线一同转动，其中转动角度本方案设置为0.1°，可根据具体实施场景进行调整，其中转动方向为顺时针方向，其中转动方向由相机所处转炉相对位置决定，其中转动方向一定是转炉倾倒口的方向向下。S8：根据连续视频序列中转动过程的图像与转炉识别结果的乘积，得到待匹配的局部图像，计算待匹配的局部图像与转炉标准图像之间的匹配值，根据匹配值使用归一化后的相似值作为加权，得到转动过程的角度的合适程度值，参照图5，包括步骤S80-S81：S80：计算局部图像与转炉标准图像的像素点的像素值的差值的绝对值，其中，每个像素点的像素值对应一个绝对值和一个相似值；示例性的，由于待匹配的局部图像与转炉识别结果的大小一致，进而在计算匹配程度时，可利用对应像素点位置相减做差取绝对值，表示单个像素点的匹配度，其中绝对值越小，则表示单个像素点的匹配度越高。S81：将绝对值对应像素点的相似值作为权重，进行加权平均，得到转动过程的角度的合适程度值。S9：根据倾倒转炉转动过程的角度的合适程度值，判断炼钢转炉的倾倒姿态，参照图6，包括步骤S90-S93：S90：获取所有转炉的角度的合适程度值，其中，最大的合适程度值为转炉的角度值；S91：计算开始倾倒时间到转炉转动至角度值的时间间隔；S92：计算时间间隔下转炉转动角度值与预设倾倒角度值的差值；S93：响应于差值大于等于预设差值，则进行转炉姿态调整。示例性的，预设差值为2°。在本说明书的描述中，“多个”、“若干个”的含义是至少两个，例如两个，三个或更多个等，除非另有明确具体的限定。虽然本说明书已经示出和描述了本发明的多个实施例，但对于本领域技术人员显而易见的是，这样的实施例只是以示例的方式提供的。本领域技术人员会在不偏离本发明思想和精神的情况下想到许多更改、改变和替代的方式。应当理解的是在实践本发明的过程中，可以采用对本文所描述的本发明实施例的各种替代方案。
