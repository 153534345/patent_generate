标题title
一种矿用智能水泵叶轮故障图像细节增强方法
摘要abst
本发明涉及图像处理领域，具体涉及一种矿用智能水泵叶轮故障图像细节增强方法，包括：采集叶轮图像，获取若干个边缘、每个边缘的向量和像素点的向量，得到每个边缘的异常程度；根据每个边缘的异常程度、边缘之间的距离得到每个边缘的间距异常影响因子，根据每个叶轮区域中像素点的灰度值得到每个叶轮区域的灰度异常影响因子，得到叶轮图像的异常影响程度；根据叶轮图像的异常影响程度得到线性增强的系数，根据线性增强的系数获得线性增强的一次函数公式，根据线性增强的一次函数公式对叶轮图像进行增强得到增强后的叶轮图像。本发明对叶轮图像进行处理，得到线性增强的系数，提升了图像增强的效果，提高了图像异常故障检测的效率。
权利要求书clms
1.一种矿用智能水泵叶轮故障图像细节增强方法，其特征在于，该方法包括以下步骤：采集矿用水泵叶轮的叶轮图像；对叶轮图像进行边缘检测得到若干个边缘，根据每个边缘上像素点的位置分布得到每个边缘的异常程度；根据每个边缘的异常程度、每个边缘与所述边缘间隔一个边缘的边缘之间的距离得到每个边缘的间距异常影响因子，根据每个叶轮区域中像素点的灰度值得到每个叶轮区域的灰度异常影响因子，根据每个边缘的间距异常影响因子和每个叶轮区域的灰度异常影响因子得到叶轮图像的异常影响程度；根据叶轮图像的异常影响程度得到线性增强的系数，根据线性增强的系数获得线性增强的一次函数公式，根据线性增强的一次函数公式对叶轮图像进行增强得到增强后的叶轮图像。2.根据权利要求1所述一种矿用智能水泵叶轮故障图像细节增强方法，其特征在于，所述每个边缘的异常程度的计算公式为：式中，表示第i个边缘上的第j个像素点的水平坐标值，/＞表示第i个边缘上的所有像素点的水平坐标值的均值，/＞表示第i个边缘上的所有像素点个数，/＞表示第i个边缘上的第j个像素点的向量，/＞表示第i个边缘的向量，/＞表示向量/＞和向量/＞之间的内积，表示反余弦函数，/＞表示线性归一化函数，/＞表示第i个边缘的异常程度，/＞表示绝对值符号，/＞表示向量的取模长符号。3.根据权利要求2所述一种矿用智能水泵叶轮故障图像细节增强方法，其特征在于，所述边缘的向量的具体获取步骤如下：将每个边缘上离叶轮图像下边缘处最近的一个像素点记为每个边缘的第一个像素点，以第一个像素点为起始点沿着边缘得到每个边缘的最后一个像素点；连接边缘上的第一个像素点和最后一个像素点，得到边缘的向量，边缘的向量的方向是由第一个像素点指向最后一个像素点，边缘的向量的大小为第一个像素点到最后一个像素点之间的距离。4.根据权利要求2所述一种矿用智能水泵叶轮故障图像细节增强方法，其特征在于，所述边缘上的第j个像素点的向量的具体获取步骤如下：连接第j个像素点和第A+j个像素点，得到第j个像素点的向量，其方向是由第j个像素点指向第A+j个像素点，向量的大小为第j个像素点到第A+j个像素点之间的距离；其中，A为预设数量。5.根据权利要求1所述一种矿用智能水泵叶轮故障图像细节增强方法，其特征在于，所述对叶轮图像进行边缘检测得到若干个边缘，包括的具体步骤如下：使用canny算子对叶轮图像进行边缘检测，得到叶轮边缘图像中的若干个边缘。6.根据权利要求1所述一种矿用智能水泵叶轮故障图像细节增强方法，其特征在于，所述每个边缘的间距异常影响因子的计算公式为：式中，表示第i-2个边缘与第i个边缘之间的距离，/＞表示第i个边缘与第i+2个边缘之间的距离，/＞表示第i个边缘的异常程度，/＞表示第i-2个边缘的异常程度，/＞表示第i+2个边缘的异常程度，/＞表示第i个边缘的间距异常影响因子，/＞表示绝对值符号。7.根据权利要求6所述一种矿用智能水泵叶轮故障图像细节增强方法，其特征在于，所述第i-2个边缘与第i个边缘之间的距离的具体获取步骤如下：以第i-2个边缘上的第一个起始像素点开始遍历第i-2个边缘上的所有像素点，将遍历后的所有像素点的坐标构成第i-2个边缘的坐标序列，记为第一坐标序列；以第i个边缘上的第一个起始像素点开始遍历第i个边缘上的所有像素点，将遍历后的所有像素点的坐标构成第i个边缘的坐标序列，记为第二坐标序列，对第一坐标序列和第二坐标序列使用DTW算法得到第一坐标序列和第二坐标序列之间的距离，将两组序列之间的距离作为两个边缘之间的距离。8.根据权利要求1所述一种矿用智能水泵叶轮故障图像细节增强方法，其特征在于，所述每个叶轮区域的灰度异常影响因子的计算公式为：式中，表示第h个叶轮区域中第c个像素点的灰度值，/＞表示第h个叶轮区域中所有像素点的灰度值的最小值，/＞表示第h个叶轮区域中第c个像素点的八邻域中第v个像素点的灰度值，/＞表示第h个叶轮区域中的所有像素点的个数，/＞表示第h个叶轮区域的灰度异常影响因子，8表示八邻域，/＞表示绝对值符号。9.根据权利要求1所述一种矿用智能水泵叶轮故障图像细节增强方法，其特征在于，所述叶轮图像的异常影响程度的计算公式为：式中，表示第i个边缘的间距异常影响因子，/＞表示第h个叶轮区域的灰度异常影响因子，g表示所有边缘的个数，H表示所有叶轮区域的个数，G表示叶轮图像的异常影响程度，表示线性归一化函数。10.根据权利要求1所述一种矿用智能水泵叶轮故障图像细节增强方法，其特征在于，所述根据叶轮图像的异常影响程度得到线性增强的系数，包括的具体步骤如下：对叶轮图像的异常影响程度加1得到线性增强的系数。
说明书desc
技术领域本发明涉及图像处理技术领域，具体涉及一种矿用智能水泵叶轮故障图像细节增强方法。背景技术矿用水泵是一种专门用于采矿和处理矿石的工业设备。它们在矿山、矿井和矿石加工厂等环境中广泛使用，矿用水泵是矿业领域中不可或缺的设备，它们在采矿、矿石加工和物料输送过程中发挥着关键作用；矿用水泵叶轮是将进入水泵的液体加速并推动液体从泵的进口处流向泵的出口处的装置，在使用过程中由于水中可能存在的颗粒物等可能造成叶轮故障。在对矿用水泵的叶轮进行故障检测时，由于矿用水泵在运转中，叶轮之间还存在矿物质，使得对矿用水泵的检测效果不太理想，不能准确的确定出是水泵的叶轮的故障，还是矿物质的干扰使得采集到的图像有异常，因此为了准确的检测出矿用水泵的叶轮是否有异常故障，还需对采集到的图像进行增强，然后再进行矿用水泵叶轮的异常故障检测，但是在对图像进行线性增强时，没有根据图像的特征去调整线性增强的系数，而是自己一次一次去调整线性增强的系数，这样导致花费的时间较多。发明内容本发明提供一种矿用智能水泵叶轮故障图像细节增强方法，以解决现有的问题。本发明的一种矿用智能水泵叶轮故障图像细节增强方法采用如下技术方案：本发明一个实施例提供了一种矿用智能水泵叶轮故障图像细节增强方法，该方法包括以下步骤：采集矿用水泵叶轮的叶轮图像；对叶轮图像进行边缘检测得到若干个边缘，根据每个边缘上像素点的位置分布得到每个边缘的异常程度；根据每个边缘的异常程度、每个边缘与所述边缘间隔一个边缘的边缘之间的距离得到每个边缘的间距异常影响因子，根据每个叶轮区域中像素点的灰度值得到每个叶轮区域的灰度异常影响因子，根据每个边缘的间距异常影响因子和每个叶轮区域的灰度异常影响因子得到叶轮图像的异常影响程度；根据叶轮图像的异常影响程度得到线性增强的系数，根据线性增强的系数获得线性增强的一次函数公式，根据线性增强的一次函数公式对叶轮图像进行增强得到增强后的叶轮图像。进一步地，所述每个边缘的异常程度的计算公式为：式中，表示第i个边缘上的第j个像素点的水平坐标值，表示第i个边缘上的所有像素点的水平坐标值的均值，表示第i个边缘上的所有像素点个数，表示第i个边缘上的第j个像素点的向量，表示第i个边缘的向量，表示向量和向量之间的内积，表示反余弦函数，表示线性归一化函数，表示第i个边缘的异常程度，表示绝对值符号，表示向量的取模长符号。进一步地，所述边缘的向量的具体获取步骤如下：将每个边缘上离叶轮图像下边缘处最近的一个像素点记为每个边缘的第一个像素点，以第一个像素点为起始点沿着边缘得到每个边缘的最后一个像素点；连接边缘上的第一个像素点和最后一个像素点，得到边缘的向量，边缘的向量的方向是由第一个像素点指向最后一个像素点，边缘的向量的大小为第一个像素点到最后一个像素点之间的距离。进一步地，所述边缘上的第j个像素点的向量的具体获取步骤如下：连接第j个像素点和第A+j个像素点，得到第j个像素点的向量，其方向是由第j个像素点指向第A+j个像素点，向量的大小为第j个像素点到第A+j个像素点之间的距离；其中，A为预设数量。进一步地，所述对叶轮图像进行边缘检测得到若干个边缘，包括的具体步骤如下：使用canny算子对叶轮图像进行边缘检测，得到叶轮边缘图像中的若干个边缘。进一步地，所述每个边缘的间距异常影响因子的计算公式为：式中，表示第i-2个边缘与第i个边缘之间的距离，表示第i个边缘与第i+2个边缘之间的距离，表示第i个边缘的异常程度，表示第i-2个边缘的异常程度，表示第i+2个边缘的异常程度，表示第i个边缘的间距异常影响因子，表示绝对值符号。进一步地，所述第i-2个边缘与第i个边缘之间的距离的具体获取步骤如下：以第i-2个边缘上的第一个起始像素点开始遍历第i-2个边缘上的所有像素点，将遍历后的所有像素点的坐标构成第i-2个边缘的坐标序列，记为第一坐标序列；以第i个边缘上的第一个起始像素点开始遍历第i个边缘上的所有像素点，将遍历后的所有像素点的坐标构成第i个边缘的坐标序列，记为第二坐标序列，对第一坐标序列和第二坐标序列使用DTW算法得到第一坐标序列和第二坐标序列之间的距离，将两组序列之间的距离作为两个边缘之间的距离。进一步地，所述每个叶轮区域的灰度异常影响因子的计算公式为：式中，表示第h个叶轮区域中第c个像素点的灰度值，表示第h个叶轮区域中所有像素点的灰度值的最小值，表示第h个叶轮区域中第c个像素点的八邻域中第v个像素点的灰度值，表示第h个叶轮区域中的所有像素点的个数，表示第h个叶轮区域的灰度异常影响因子，8表示八邻域，表示绝对值符号。进一步地，所述叶轮图像的异常影响程度的计算公式为：式中，表示第i个边缘的间距异常影响因子，表示第h个叶轮区域的灰度异常影响因子，g表示所有边缘的个数，H表示所有叶轮区域的个数，G表示叶轮图像的异常影响程度，表示线性归一化函数。进一步地，所述根据叶轮图像的异常影响程度得到线性增强的系数，包括的具体步骤如下：对叶轮图像的异常影响程度加1得到线性增强的系数。本发明的技术方案的有益效果是：本发明通过获取若干个边缘、边缘的相邻和边缘上像素点的向量，帮助图像中边缘检测，根据每个边缘的向量、每个边缘上每个像素点的向量和边缘上像素点的位置得到每个边缘的异常程度，再根据每个边缘的异常程度、边缘之间的距离得到每个边缘的间距异常影响因子，提高了对边缘的异常检测；根据每个叶轮区域中像素点的灰度值得到每个叶轮区域的灰度异常影响因子，提高了对叶轮区域的异常检测；根据每个边缘的间距异常影响因子和每个叶轮区域的灰度异常影响因子得到叶轮图像的异常影响程度，根据叶轮图像的异常影响程度得到线性增强的系数，提升了图像增强的效果，提高了图像异常故障检测的效率。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明一种矿用智能水泵叶轮故障图像细节增强方法的步骤流程图；图2为本发明一种矿用智能水泵叶轮故障图像细节增强方法的水泵叶轮区域示意图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种矿用智能水泵叶轮故障图像细节增强方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种矿用智能水泵叶轮故障图像细节增强方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种矿用智能水泵叶轮故障图像细节增强方法的步骤流程图，该方法包括以下步骤：步骤S001：采集矿用水泵叶轮的叶轮图像。需要说明的是，为了分析矿用水泵叶轮的故障情况，则首先需要采集叶轮的图像，根据叶轮图像中的特征去进行分析叶轮的异常故障情况。具体地，采集矿用水泵侧面的图像得到矿用水泵叶轮图像，再对矿用水泵叶轮图像进行灰度化和均值滤波处理得到处理后的叶轮图像；其中本实施例采集的水泵叶轮为直的，且侧面采集到的图大致为图2所示。至此，得到叶轮图像。步骤S002：对叶轮图像进行边缘检测得到若干个边缘，根据每个边缘上像素点的位置分布得到每个边缘的异常程度。需要说明的是，由于在采集时采集的水泵叶轮侧面的图像，其每个边缘都是直线；因此当水泵的叶轮存在故障时，其叶轮边缘不是直的，则根据相邻像素点的位置关系获取每个像素点的向量，根据每个像素点的向量和边缘向量之间的关系，得到每个边缘是否有异常故障；又由于当边缘正常时，其每个像素点的水平坐标都是相同的，不存在差异；当边缘存在异常故障时，其每个像素点的水平坐标是存在差异的。因此根据边缘上像素点的向量之间的角度差异和像素点对应的水平坐标之间的差异对每个边缘进行分析。具体地，预设一个阈值A，其中本实施例以A=5为例进行叙述，本实施例不进行具体限定，其中A可根据具体实施情况而定。使用canny算子对叶轮图像进行边缘检测，得到叶轮边缘图像和叶轮边缘图像中的若干个边缘；其中，用canny算子对图像进行边缘检测为公知技术，此处不再进行赘述。以叶轮图像中的左下像素点为坐标原点，以水平向右为横轴，以竖直向上为纵轴来建立坐标系。将每个边缘上离叶轮图像下边缘处最近的一个像素点记为每个边缘的第一个像素点，以第一个像素点为起始点沿着边缘得到每个边缘的最后一个像素点。从边缘上的第一个像素点开始，连接第一个像素点和第A+1个像素点，得到第一个像素点的向量，其方向是由第一个像素点指向第A+1个像素点，向量的大小为第一个像素点到第A+1个像素点之间的距离；连接第二个像素点和第A+2个像素点，得到第二个像素点的向量，其方向是由第二个像素点指向第A+2个像素点，向量的大小为第二个像素点到第A+2个像素点之间的距离；依次，得到边缘上每个像素点的向量；其中，边缘上的最后A的像素点的向量都是与边缘上最后一个像素点连接得到的。连接边缘上的第一个像素点和最后一个像素点，得到边缘的向量，边缘的向量的方向是由第一个像素点指向最后一个像素点，边缘的向量的大小为第一个像素点到最后一个像素点之间的距离；其中，最后一个像素点的向量和倒数第二个像素点的向量相同。获取边缘上每个像素点的水平坐标值，根据边缘上像素点的向量之间的角度差异和像素点对应的水平坐标之间的差异得到每个边缘的异常程度，用公式具体表示为：式中，表示第i个边缘上的第j个像素点的水平坐标值，表示第i个边缘上的所有像素点的水平坐标值的均值，表示第i个边缘上的所有像素点个数，表示第i个边缘上的第j个像素点的向量，表示第i个边缘的向量，表示向量和向量之间的内积，表示反余弦函数，表示线性归一化函数，表示第i个边缘的异常程度，表示绝对值符号，表示向量的取模长符号。其中，表示向量和向量之间的夹角。其中，表示每个边缘上像素点的水平坐标值的差异，差异越大，则边缘越异常；表示边缘上像素点的向量之间的角度差异，差异越大，则边缘越异常。至此，得到每个边缘的异常程度。步骤S003：根据每个边缘的异常程度、每个边缘与所述边缘间隔一个边缘的边缘之间的距离得到每个边缘的间距异常影响因子，根据每个叶轮区域中像素点的灰度值得到每个叶轮区域的灰度异常影响因子，根据每个边缘的间距异常影响因子和每个叶轮区域的灰度异常影响因子得到叶轮图像的异常影响程度。根据每个边缘的异常程度、每个边缘与所述边缘间隔一个边缘的边缘之间的距离得到每个边缘的间距异常影响因子。需要说明的是，在水泵叶轮没有出现故障时，其叶轮图像中每个叶轮之间的距离应该是相等的，当叶轮出现故障时，检测出来的相邻叶轮之间的距离可能是有差异的；因此根据叶轮之间的间距进行分析。进一步需要说明的是，由于每个叶轮在进行边缘检测时得到两个边缘，为了分析叶轮之间的距离之间的差异，因此需要获取相邻叶轮同侧的边缘之间的距离作为相邻叶轮之间的距离。具体地，获取每个边缘与每个边缘间隔一个边缘的边缘之间的距离，两个边缘之间的距离的计算方式为：将任意两个边缘中的一个边缘记为第一边缘，将另外一个边缘记为第二边缘，以第一边缘上的第一个起始像素点开始遍历第一边缘上的所有像素点，将遍历后的所有像素点的坐标构成第一边缘的坐标序列，记为第一坐标序列；以第二边缘上的第一个起始像素点开始遍历第二边缘上的所有像素点，将遍历后的所有像素点的坐标构成第二边缘的坐标序列，记为第二坐标序列，对第一坐标序列和第二坐标序列使用DTW算法得到第一坐标序列和第二坐标序列之间的距离，将两组序列之间的距离作为两个边缘之间的距离。其中，DTW算法为公知技术，此处不进行赘述。根据每个边缘的异常程度、每个边缘与每个边缘间隔一个边缘的边缘之间的距离得到每个边缘的间距异常影响因子，用公式表示为：式中，表示第i-2个边缘与第i个边缘之间的距离，表示第i个边缘与第i+2个边缘之间的距离，表示第i个边缘的异常程度，表示第i-2个边缘的异常程度，表示第i+2个边缘的异常程度，表示第i个边缘的间距异常影响因子，表示绝对值符号。将叶轮图像中的边缘个数记为B。则i的取值范围为：。其中，第一个边缘的间距异常影响因子等于第三个边缘的间距异常影响因子，第二个边缘的间距异常影响因子等于第四个边缘的间距异常影响因子，第B-1个边缘的间距异常影响因子等于第B-3个边缘的间距异常影响因子，第B个边缘的间距异常影响因子等于第B-2个边缘的间距异常影响因子。其中，当相邻两个边缘之间的距离差异越小，则中间边缘的间隔异常影响因子越小，即表示该边缘越正常；反之，当相邻两个边缘之间的距离差异越大，则中间边缘的间隔异常影响因子越大，即表示该边缘越异常。至此，得到每个边缘的间距异常影响因子。根据每个叶轮区域中像素点的灰度值得到每个叶轮区域的灰度异常影响因子。需要说明的是，叶轮图像中的像素点一般都表现为低灰度，但由于叶轮的磨损或断裂在异常叶轮区域上存在高亮像素点，因此将每个像素点与对应叶轮区域内部的最小灰度值进行对比，差异越大则说明该像素点的异常程度越大。同时，对像素点所在区域邻域像素点的灰度值分布进行分析，若每个像素点的邻域像素点的灰度值越高，则该像素点存在异常的可能性越大。具体地，根据每个叶轮区域中像素点的灰度值得到每个叶轮区域的灰度异常影响因子，用公式表示为：式中，表示第h个叶轮区域中第c个像素点的灰度值，表示第h个叶轮区域中所有像素点的灰度值的最小值，表示第h个叶轮区域中第c个像素点的八邻域中第v个像素点的灰度值，表示第h个叶轮区域中的所有像素点的个数，表示第h个叶轮区域的灰度异常影响因子，8表示八邻域，表示绝对值符号。其中，当每个像素点灰度值与区域内灰度值最小值之间的差异越大，表示对应的叶轮越异常；当像素点的邻域像素点的灰度值越高，则对应的叶轮存在异常的可能性越大。至此，得到每个叶轮区域的灰度异常影响因子。根据每个边缘的间距异常影响因子和每个叶轮区域的灰度异常影响因子得到叶轮图像的异常影响程度。根据每个边缘的间距异常影响因子和每个叶轮区域的灰度异常影响因子得到叶轮图像的异常影响程度，用公式表示为：式中，表示第i个边缘的间距异常影响因子，表示第h个叶轮区域的灰度异常影响因子，g表示所有边缘的个数，H表示所有叶轮区域的个数，G表示叶轮图像的异常影响程度，表示线性归一化函数。其中，当边缘的间距异常影响因子和叶轮区域的灰度异常影响因子越大，则叶轮图像的异常影响程度越大。至此，得到叶轮图像的异常影响程度。步骤S004：根据叶轮图像的异常影响程度得到线性增强的系数，根据线性增强的系数获得线性增强的一次函数公式，根据线性增强的一次函数公式对叶轮图像进行增强得到增强后的叶轮图像。需要说明的是，当水泵的叶轮上有矿渣，导致在检测时检测不出叶轮的异常故障，又由于采集到的叶轮图像的灰度值偏低，而当水泵的叶轮出现异常故障时会表现出高灰度的像素点，在有矿渣粘连在叶轮的故障地方时，导致检测不出叶轮的故障，因此需要根据叶轮图像的异常影响程度提高线性增强的系数。具体地，为了让增强的图像看起来更清晰，将线性增强的系数防在大于1的区间中，因此根据叶轮图像的异常影响程度得到最终线性增强的系数，即为，其中，G表示叶轮图像的异常影响程度。则可以得到线性增强的一次函数公式为：式中，表示增强前每个像素点的灰度值，表示增强后每个像素点的灰度值，表示线性增强的系数，b为截距，本实施例中为0，但是b不作具体限定。根据线性增强的一次函数公式对叶轮图像进行增强得到增强后的叶轮图像。至此，本实施例完成。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
