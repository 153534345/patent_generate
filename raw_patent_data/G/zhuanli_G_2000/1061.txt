标题title
一种基于人机共融的塔式起重机自动控制方法及系统
摘要abst
本发明公开了一种基于人机共融的塔式起重机自动控制方法及系统，涉及起重机系统控制技术领域。该方法包括步骤：获取塔式起重机驱动状态，定义塔式起重机驱动系统模型；人工操作介入控制塔式起重机驱动系统模型，并调整人工操作过程中的定位误差；根据人工操作的控制指令进行轨迹跟踪，并计算跟踪误差；根据跟踪误差进行补偿，得到控制最优解，按照控制最优解对塔式起重机进行自动控制。本发明在自动控制中同时考虑人工操作命令介入的情况，在实现人工操作命令和自动控制互融共通的同时，有效抑制负载摆动，从而有效提高塔式起重机工作效率和运行稳定性与安全性。
权利要求书clms
1.一种基于人机共融的塔式起重机自动控制方法，其特征在于，包括以下步骤：获取塔式起重机驱动状态，定义塔式起重机驱动系统模型；人工操作介入控制塔式起重机驱动系统模型，并调整人工操作过程中的定位误差；根据人工操作的控制指令进行轨迹跟踪，并计算跟踪误差；根据跟踪误差进行补偿，得到控制最优解，按照控制最优解对塔式起重机进行自动控制。2.如权利要求1所述的基于人机共融的塔式起重机自动控制方法，其特征在于，定义塔式起重机驱动系统模型时，还考虑了交流异步电机输入和塔式起重机驱动系统的外界扰动。3.如权利要求1所述的基于人机共融的塔式起重机自动控制方法，其特征在于，人工操作通过速度命令控制旋转臂和小车运行。4.如权利要求1所述的基于人机共融的塔式起重机自动控制方法，其特征在于，跟踪误差由期望速度与人工操作实际速度之间的差值以及塔式起重机系统实际响应存在的延迟共同作用产生。5.如权利要求1所述的基于人机共融的塔式起重机自动控制方法，其特征在于，根据跟踪误差进行补偿，得到控制最优解的具体步骤为：将跟踪误差作为新的状态量进行定义，并根据新的状态量重构塔式起重机驱动系统模型；根据理论，定义控制器的约束条件；根据约束条件对重构的塔式起重机驱动系统模型进行求解，得到控制最优解。6.如权利要求1所述的基于人机共融的塔式起重机自动控制方法，其特征在于，人工操作过程中的定位误差包括负载的定位精度误差以及目标位置的定位误差。7.如权利要求6所述的基于人机共融的塔式起重机自动控制方法，其特征在于，目标位置的定位误差调整步骤包括：通过目标位置视觉测量方法对目标位置进行准确的识别；按照识别结果，对目标位置进行确定。8.如权利要求7所述的基于人机共融的塔式起重机自动控制方法，其特征在于，目标位置视觉测量方法的具体步骤为：获取塔式起重机工作空间图像；利用深度学习算法对塔式起重机工作空间图像进行处理，得到现场目标位置的图像信息；利用图像边缘检测算法对现场目标位置的图像信息进行识别，得到目标位置的识别轮廓。9.如权利要求6所述的基于人机共融的塔式起重机自动控制方法，其特征在于，负载的定位精度误差调整步骤包括：塔式起重机减速过程期望信号由速度信号转换为位移信号；利用双目相机获得目标位置的高度和平移距离信息；将高度和平移距离信息作为系统控制的未来信息引入控制器，控制器控制旋转臂、小车和起吊机构运行至目标位置；负载接近目标位置过程中，通过旋转臂编码器测量角度、小车测距传感器测量位移和起吊机构测量高度实时调整实现负载的定位精度的误差调整。10.一种基于人机共融的塔式起重机自动控制系统，其特征在于，包括：模型构建模块，被配置为获取塔式起重机驱动状态，定义塔式起重机驱动系统模型；人工介入模块，被配置为人工操作介入控制塔式起重机驱动系统模型，并调整人工操作过程中的定位误差；轨迹跟踪模块，被配置为根据人工操作的控制指令进行轨迹跟踪，并计算跟踪误差；误差调整模块，被配置为根据跟踪误差进行补偿，得到控制最优解，按照控制最优解对塔式起重机进行自动控制。
说明书desc
技术领域本发明涉及起重机系统控制技术领域，尤其涉及一种基于人机共融的塔式起重机自动控制方法及系统。背景技术塔式起重机以其结构简单、能耗小等显著优势，被广泛应用于建筑工地、桥梁和隧道工程、港口和船厂、风电场、城市基础建设、高层建筑施工等场所。然而，塔式起重机通过小车和旋转臂的运动实现负载的运输，不能直接控制负载状态，即输入自由度少于输出自由度，属于典型的欠驱动系统。此外，负载通过柔性钢丝绳悬吊在小车下方，小车或旋转臂以及外界扰动变化极易导致负载的摆动，这将严重降低塔式起重机的工作效率。与此同时，在火箭装备、核电设备组装等狭小工作空间中，负载摆动极易导致其与周围设备或人员的碰撞，造成严重的安全事故。为此，开展塔式起重机智能控制至关重要。传统塔式起重机依赖于人工操作经验，工作效率低、操作工人培训时间长、成本高，且极易因工人操作操作失误导致安全事故。为此，部分学者提出了一些可行的解决方案，利用轨迹规划、PID控制等方法实现负载摆动的抑制。近年来，部分基于智能控制方法，如模糊控制、神经网络等，被应用于塔式起重机的自动控制。但是现有塔式起重机控制多为自动化控制，即塔式起重机系统按照预定轨迹实现点到点的负载运输。然而，相对于桥式起重机的结构化场景，塔式起重机工作环境复杂、定制化特征显著，自动化需要针对特定的场景进行设计，成本高，适应性差。此外，工业应用中，塔式起重机多采用交流异步减速电机驱动，其价格低廉、驱动力大且易于维护，但也存在未知死区、时滞等非线性因素，影响控制精度，甚至造成系统的不稳定。发明内容针对现有技术存在的不足，本发明的目的是提供一种基于人机共融的塔式起重机自动控制方法及系统，相对于现有塔式起重机自动化控制方法，本发明在自动控制中同时考虑人工操作命令介入的情况，在实现人工操作命令和自动控制互融共通的同时，有效抑制负载摆动，从而有效提高塔式起重机工作效率和运行稳定性与安全性。为了实现上述目的，本发明是通过如下的技术方案来实现：本发明第一方面提供了一种基于人机共融的塔式起重机自动控制方法，包括以下步骤：获取塔式起重机驱动状态，定义塔式起重机驱动系统模型；人工操作介入控制塔式起重机驱动系统模型，并调整人工操作过程中的定位误差；根据人工操作的控制指令进行轨迹跟踪，并计算跟踪误差；根据跟踪误差进行补偿，得到控制最优解，按照控制最优解对塔式起重机进行自动控制。进一步的，定义塔式起重机驱动系统模型时，还考虑了交流异步电机输入和塔式起重机驱动系统的外界扰动。进一步的，人工操作通过速度命令控制旋转臂和小车运行。更进一步的，跟踪误差由期望速度与人工操作实际速度之间的差值以及塔式起重机系统实际响应存在的延迟共同作用产生。进一步的，根据跟踪误差进行补偿，得到控制最优解的具体步骤为：将跟踪误差作为新的状态量进行定义，并根据新的状态量重构塔式起重机驱动系统模型；根据理论，定义控制器的约束条件；根据约束条件对重构的塔式起重机驱动系统模型进行求解，得到控制最优解。进一步的，人工操作过程中的定位误差包括负载的定位精度误差以及目标位置的定位误差。更进一步的，目标位置的定位误差调整步骤包括：通过目标位置视觉测量方法对目标位置进行准确的识别；按照识别结果，对目标位置进行确定。更进一步的，目标位置视觉测量方法的具体步骤为：获取塔式起重机工作空间图像；利用深度学习算法对塔式起重机工作空间图像进行处理，得到现场目标位置的图像信息；利用图像边缘检测算法对现场目标位置的图像信息进行识别，得到目标位置的识别轮廓。更进一步的，负载的定位精度误差调整步骤包括：塔式起重机减速过程期望信号由速度信号转换为位移信号；利用双目相机获得目标位置的高度和平移距离信息；将高度和平移距离信息作为系统控制的未来信息引入控制器，控制器控制旋转臂、小车和起吊机构运行至目标位置；负载接近目标位置过程中，通过旋转臂编码器测量角度、小车测距传感器测量位移和起吊机构测量高度实时调整实现负载的定位精度的误差调整。本发明第二方面提供了一种基于人机共融的塔式起重机自动控制系统，包括：模型构建模块，被配置为获取塔式起重机驱动状态，定义塔式起重机驱动系统模型；人工介入模块，被配置为人工操作介入控制塔式起重机驱动系统模型，并调整人工操作过程中的定位误差；轨迹跟踪模块，被配置为根据人工操作的控制指令进行轨迹跟踪，并计算跟踪误差；误差调整模块，被配置为根据跟踪误差进行补偿，得到控制最优解，按照控制最优解对塔式起重机进行自动控制。以上一个或多个技术方案存在以下有益效果：本发明公开了一种基于人机共融的塔式起重机自动控制方法及系统，将人工操作意图分解为智能跟随和精确定位两部分，面向塔式起重机人工操作接入工况，利用智能感知和控制方法，实现塔式起重机的精确跟随与定位，有利于塔式起重机工作效率的提高和安全性的提升，从而促进塔式起重机自动化和智能化。本发明附加方面的优点将在下面的描述中部分给出，部分将从下面的描述中变得明显，或通过本发明的实践了解到。附图说明构成本发明的一部分的说明书附图用来提供对本发明的进一步理解，本发明的示意性实施例及其说明用于解释本发明，并不构成对本发明的不当限定。图1为本发明实施例一中人机共融塔式起重机结构示意图；图2为本发明实施例一中人机共融控制硬件系统框图；其中，1.旋转臂，2.支撑架，3.吊钩，4.小车，5.双目相机。具体实施方式应该指出，以下详细说明都是示例性的，旨在对本发明提供进一步的说明。除非另有指明，本文使用的所有技术和科学术语具有与本发明所属技术领域的普通技术人员通常理解的相同含义。需要注意的是，这里所使用的术语仅是为了描述具体实施方式，而非意图限制根据本发明的示例性实施方式。如在这里所使用的，除非上下文另外明确指出，否则单数形式也意图包括复数形式，此外，还应当理解的是，当在本说明书中使用术语“包含”和/或“包括”时，其指明存在特征、步骤、操作、器件、组件和/或它们的组合。实施例一：本发明公开了一种人机共融的塔式起重机自动控制方法及系统，将人工操作意图分解为智能跟随和精确定位两部分。首先，将人工操作速度命令作为可以获得的期望值。基于此，提出一种基于预见控制的智能跟随算法，通过引入期望速度的未来信息，基于测距传感器实时测量位移，实现旋转臂和小车驱动误差的有效补偿。随后，提出一种基于视觉引导的精确定位方法，在操作工人松开控制手柄时，固定于旋转臂末端下方的相机自动识别并确定目标位置，控制器根据测量位置，利用预见控制方法，在抑制负载摆动的同时，实现负载的精确定位。本发明所提方法，面向塔式起重机人工操作接入工况，利用智能感知和控制方法，实现塔式起重机的精确跟随与定位，有利于塔式起重机工作效率的提高和安全性的提升，从而促进塔式起重机自动化和智能化。具体步骤如下：本发明实施例一提供了一种基于人机共融的塔式起重机自动控制方法，包括以下步骤：步骤1：获取塔式起重机驱动状态，定义塔式起重机驱动系统模型。步骤2：人工操作介入控制塔式起重机驱动系统模型，并调整人工操作过程中的定位误差。步骤3：根据人工操作的控制指令进行轨迹跟踪，并计算跟踪误差。步骤4：根据跟踪误差进行补偿，得到控制最优解，按照控制最优解对塔式起重机进行自动控制。步骤1中，本实施例的塔式起重机系统如图1所示，包括旋转臂1、支撑架2、吊钩3、小车4和双目相机5，其中，支撑架2垂直于地面，用于支撑旋转臂1，吊钩3通过小车4安装在旋转臂1上，小车4可沿旋转臂1带动吊钩3进行移动，双目相机5安装在旋转臂1的端部，用于采集作业现场图像。具体电控系统如图2所示，电控系统由控制器、触摸屏、小车变频器、小车电机、小车、旋转臂变频器、旋转臂电机、旋转臂、起吊机构变频器、起吊机构电机、起吊机构、工业相机、小车测距传感器、旋转臂编码器、起吊机构编码器等组成。其中，工业相机通过以太网将采集的图像快速传输至控制器，旋转臂编码器和起吊机构编码器信号通过高速计数模块采集并传输至控制器，小车测距传感器采用模拟量进行数据传输。控制器通过工业以太网控制旋转臂变频器、小车变频器和起吊机构变频器分别驱动旋转臂、小车和起吊机构的运行。另外，小车电机、旋转臂电机和起吊机构电机分别为小车、旋转臂和起吊机构提供驱动力。同时，触摸屏可以实现系统参数设置与状态实时监控与记录分析。人工操作介入后，首先期望塔式起重机旋转臂和小车能够按照期望轨迹运行，然后，实际驱动系统死区、时滞等非线性因素导致系统存在跟踪误差，使得系统难以执行预定的轨迹，这将严重影响系统控制性能，甚至导致系统不稳定。为此，考虑人工操作介入的情况，本实施例提出一种基于预见控制的智能跟随方法。具体来说，首先，考虑交流异步电机输入和塔式起重机驱动系统的外界扰动，定义塔式起重机驱动系统模型为：。其中，分别表示/＞时刻和/＞时刻的驱动系统状态，/＞分别表示/＞时刻交流异步电机输入和驱动系统外界扰动，/＞表示驱动系统/＞时刻/＞至/＞时刻/＞的映射。步骤2中，在塔式起重机系统，人工操作习惯于通过速度命令控制旋转臂和小车运行。步骤3中，跟踪误差由期望速度与人工操作实际速度之间的差值以及塔式起重机系统实际响应存在的延迟共同作用产生。为此，定义人工操作速度为，可得速度跟踪误差为/＞。同时，相对于人工操作命令，塔式起重机系统的小车和旋转臂的实际响应存在一定延迟，可认为人工操作命从k时刻起N个采样周期内的速度可获得。进而有：/＞。其中，表示未来n个采样周期的速度矩阵，，/＞，。步骤4中，根据跟踪误差进行补偿，得到控制最优解的具体步骤为：步骤4.1：将跟踪误差作为新的状态量进行定义，并根据新的状态量重构塔式起重机驱动系统模型。本实施例中，将跟踪误差作为状态，定义新的状态量为，同时，假定扰动未来N个采样周期内的信息可以获得，即/＞，塔式起重机系统方程可以重构为如下扩展状态：/＞。其中，为重构后的扩展状态。步骤4.2：根据理论，定义控制器的约束条件为：/＞。式中，为奖励函数，/＞，Q为半正定矩阵，/＞表示折扣因子，/＞为扰动衰减因子。步骤4.3：根据约束条件对重构的塔式起重机驱动系统模型进行求解，得到控制最优解。可得系统性能指标为：。式中，表示每一步的奖励，/＞。本实施例中，为实现最优控制的求解，可以利用群集智能算法和深度强化学习等方法实现，上述方法求解为本领域常规手段，这里不再进行赘述。另外，当工人操作指令介入后，基于智能跟随算法可以在加速和匀速运行过程中，可以实现良好的轨迹跟踪，但当旋转臂和小车减速时，旋转臂和小车不能立刻停止运行，存在一段滑行距离，这将严重影响负载的定位精度。此外，当定位时，操作工人只是确定大概的位置，期望停止位置与实际停止位置不可避免地存在误差。为此，本实施例提出了一种基于视觉引导的人类意图识别与精确定位方法。具体来说，当塔式起重机开始减速时，固定于旋转臂末端下方的双目相机将采集塔式起重机工作空间图像并设传输至控制器，控制器通过图像分割、连通性分析和特征选择等流程，获得目标位置信息。同时，根据双目相机当前位置，利用旋转臂编码器测量旋转角度、小车测距传感器测量位移、起吊机构编码器测量负载起升高度等信息，控制小车、旋转臂和起吊机构运行至目标位置。具体表现为步骤2中对人工操作过程中的定位误差进行调整。其中，人工操作过程中的定位误差包括负载的定位精度误差以及目标位置的定位误差。因此，对人工操作过程中的定位误差进行调整步骤包括：步骤2.1：对目标位置的定位误差调整。步骤2.2：对负载的定位精度误差进行调整。本实施例中，当人工操作介入时，考虑驱动系统非线性因素影响，仅依靠人眼难以确定精确的卸载位置，通常需要反复多次调节，时间长、操作难度大。为此，本发明提出了一种基于双目视觉的目标位置识别方法，因此目标位置的定位误差调整步骤主要包括目标位置识别和目标位置确定两部分，其中，目标位置识别用于确定期望位置信息，通过提前采集塔式起重机工作空间图像，利用深度学习算法，获得现场目标位置的图像信息。具体包括：步骤2.1.1：通过目标位置视觉测量方法对目标位置进行准确的识别。其中，目标位置视觉测量方法的具体步骤为：获取塔式起重机工作空间图像。利用深度学习算法对塔式起重机工作空间图像进行处理，得到现场目标位置的图像信息。利用更丰富的卷积特征图像边缘检测算法对现场目标位置的图像信息进行识别，得到目标位置的识别轮廓。其中，损失函数定义为：。式中，为损失函数，M表示图像所有像素的个数，/＞表示总的训练阶段，/＞表示单个像素的损失函数，/＞表示卷积神经网络需要学习的参数，/＞分别表示/＞阶段卷积神经网络特征向量和最终融合层的特征向量。步骤2.1.2：按照识别结果，对目标位置进行确定。基于识别轮廓，假定两点坐标为，则有点/＞到两点连线的距离表示为：/＞。随后，在每次递归中找到距离当前逼近线段最远的点。如果该距离超过设定的阈值，那么该点将被标记为关键点，用于更新逼近线段。这个过程一直递归下去，直到满足停止条件。进一步的，当确定目标位置轮廓关键点，通过曲线拟合可以确定目标位置。与此同时，假定相机角度为f，双目相机间距为a，视差为e，则有目标位置高度信息计算公式为，则有目标位置坐标为/＞。当双目相机导航系统确定目标位置，同样基于预测控制方法，实现负载的精确卸载。负载的定位精度误差调整步骤包括：步骤2.2.1：相对与塔式起重机的加速和匀速过程，塔式起重机减速过程期望信号由速度信号转换为位移信号。步骤2.2.2：利用双目相机获得目标位置的高度和平移距离信息。步骤2.2.3：将高度和平移距离信息作为系统控制的未来信息引入控制器，控制器控制旋转臂、小车和起吊机构运行至目标位置。步骤2.2.4：负载接近目标位置过程中，通过旋转臂编码器测量角度、小车测距传感器测量位移和起吊机构测量高度实时调整实现负载的定位精度的误差调整。本实施例中，负载接近目标位置过程中，未来已知期望位移不断减少，为此，本实施例设计了一种变步长预见控制精确定位策略。具体来说，假定小车位移、旋转臂角度和负载高度分别表示为，可得到：/＞。式中，、/＞和/＞分别表示小车位移、旋转臂角度和负载高度的设定值，/＞、/＞和/＞分别为小车、旋转臂和负载高度未来已知状态的采样频率个数，即未来已知位移和角度由/＞、/＞和/＞确定。当实际位移或角度确定值时，/＞、/＞和/＞需要实时调整，这可以通过旋转臂编码器测量角度、小车测距传感器测量位移和起吊机构测量高度实时调整：/＞。式中，、/＞和/＞分别表示小车位移、旋转臂角度和负载高度的实际测量值，表示结尾取整函数，/＞为正整数，用于设定控制冗余度，因为在实际运行过程中，函数计算结果异常等原因，将导致/＞、/＞和/＞大于实际值。实施例二：本发明实施例二提供了一种基于人机共融的塔式起重机自动控制系统，包括：模型构建模块，被配置为获取塔式起重机驱动状态，定义塔式起重机驱动系统模型；人工介入模块，被配置为人工操作介入控制塔式起重机驱动系统模型，并调整人工操作过程中的定位误差；轨迹跟踪模块，被配置为根据人工操作的控制指令进行轨迹跟踪，并计算跟踪误差；误差调整模块，被配置为根据跟踪误差进行补偿，得到控制最优解，按照控制最优解对塔式起重机进行自动控制。以上实施例二中涉及的各步骤与方法实施例一相对应，具体实施方式可参见实施例一的相关说明部分。本领域技术人员应该明白，上述本发明的各模块或各步骤可以用通用的计算机装置来实现，可选地，它们可以用计算装置可执行的程序代码来实现，从而，可以将它们存储在存储装置中由计算装置来执行，或者将它们分别制作成各个集成电路模块，或者将它们中的多个模块或步骤制作成单个集成电路模块来实现。本发明不限制于任何特定的硬件和软件的结合。上述虽然结合附图对本发明的具体实施方式进行了描述，但并非对本发明保护范围的限制，所属领域技术人员应该明白，在本发明的技术方案的基础上，本领域技术人员不需要付出创造性劳动即可做出的各种修改或变形仍在本发明的保护范围以内。
