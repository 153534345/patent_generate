标题title
一种光伏连接线生产质量智能检测方法
摘要abst
本发明涉及图像数据处理技术领域，具体涉及一种光伏连接线生产质量智能检测方法，包括：采集一张光伏连接线表面RGB图像，获取每个像素点的颜色阈值，并筛选出黄色和绿色像素点，由此得到黄绿灰度差，从而获取光伏连接线表面RGB图像中每条边缘线上每个像素点的缺陷可能性、缺陷修正值，从而得到每条边缘线上每个像素点的修正缺陷可能性，并筛选出疑似缺陷点，由此得到每条边缘线的缺陷程度，用以判断光伏连接线表面RGB图像中的光伏连接线质量是否合格。本发明通过分析图像中每条边缘线的缺陷程度，提高了缺陷检测的准确性，从而提高了光伏连接线生产质量检测的准确性。
权利要求书clms
1.一种光伏连接线生产质量智能检测方法，其特征在于，该方法包括以下步骤：采集一张光伏连接线表面RGB图像，进行灰度化处理，得到光伏连接线表面RGB图像中每个像素点的灰度值；在光伏连接线表面RGB图像中，根据每个像素点的R、G、B通道的亮度值，得到每个像素点的颜色阈值，并筛选出黄色和绿色像素点；根据黄色和绿色像素点的灰度值差异，得到黄绿灰度差；获取光伏连接线表面RGB图像中的若干条边缘线，根据每条边缘线上每个像素点和其周围像素点的梯度和灰度值、黄绿灰度差，得到每条边缘线上每个像素点的缺陷可能性；根据每条边缘线上每个像素点和其周围像素点的颜色阈值、黄色和绿色像素点的数量，得到每条边缘线上每个像素点的缺陷修正值；根据每条边缘线上每个像素点的缺陷可能性、缺陷修正值，得到每条边缘线上每个像素点的修正缺陷可能性；在所有边缘线上，根据所有像素点的修正缺陷可能性，筛选出疑似缺陷点；根据每条边缘线上疑似缺陷点的数量、修正缺陷可能性、灰度值，得到每条边缘线的缺陷程度；根据所有边缘线的缺陷程度，判断光伏连接线表面RGB图像中的光伏连接线质量是否合格。2.根据权利要求1所述一种光伏连接线生产质量智能检测方法，其特征在于，所述在光伏连接线表面RGB图像中，根据每个像素点的R、G、B通道的亮度值，得到每个像素点的颜色阈值，并筛选出黄色和绿色像素点，包括的具体步骤如下：在光伏连接线表面RGB图像中，将任意一个像素点，记为参考像素点；计算参考像素点在R通道的亮度值除以在B通道的亮度值的商值，将所述商值的归一化值，记为参考像素点的颜色阈值；当参考像素点在G通道的亮度值大于预设的绿阈值时，若参考像素点的颜色阈值大于预设的判定阈值，则将参考像素点，记为黄色像素点；若参考像素点的颜色阈值小于等于预设的判定阈值，则将参考像素点，记为绿色像素点。3.根据权利要求1所述一种光伏连接线生产质量智能检测方法，其特征在于，所述根据黄色和绿色像素点的灰度值差异，得到黄绿灰度差，包括的具体步骤如下：在光伏连接线表面RGB图像中，将所有黄色像素点灰度值的均值，记为黄色均值；将所有绿色像素点灰度值的均值，记为绿色均值；将黄色均值和绿色均值的差值的绝对值，记为黄绿灰度差。4.根据权利要求1所述一种光伏连接线生产质量智能检测方法，其特征在于，所述获取光伏连接线表面RGB图像中的若干条边缘线，根据每条边缘线上每个像素点和其周围像素点的梯度和灰度值、黄绿灰度差，得到每条边缘线上每个像素点的缺陷可能性，包括的具体步骤如下：根据光伏连接线表面RGB图像中所有像素点的灰度值，使用Canny边缘检测算法和Sobel算子，分别得到光伏连接线表面RGB图像中的若干条边缘线、每个像素点的梯度；将任意一条边缘线上的像素点，记为边缘点；将任意一个边缘点，记为目标点；在光伏连接线表面RGB图像中，以目标点为中心点，构建大小为的目标窗口；所述q为预设的窗口边长；在目标窗口内，根据任意相邻两个边缘点的梯度，使用反余弦函数，得到所述相邻两个边缘点的夹角值；将目标窗口内所有相邻边缘点的夹角值的均值，记为目标窗口内边缘线的变化程度；根据目标窗口内像素点的灰度值、目标窗口内边缘线的变化程度、黄绿灰度差，得到目标点的缺陷可能性。5.根据权利要求4所述一种光伏连接线生产质量智能检测方法，其特征在于，所述根据目标窗口内像素点的灰度值、目标窗口内边缘线的变化程度、黄绿灰度差，得到目标点的缺陷可能性对应的具体计算公式为：其中P为目标点的缺陷可能性，和/＞分别为目标窗口内所有像素点中的最大灰度值和最小灰度值，C为黄绿灰度差，/＞为目标窗口内边缘线的变化程度，| |为绝对值函数，为线性归一化函数。6.根据权利要求4所述一种光伏连接线生产质量智能检测方法，其特征在于，所述根据每条边缘线上每个像素点和其周围像素点的颜色阈值、黄色和绿色像素点的数量，得到每条边缘线上每个像素点的缺陷修正值对应的具体计算公式为：其中X为目标点的缺陷修正值，为目标窗口内黄色像素点的数量，/＞为目标窗口内绿色像素点的数量，D为目标窗口内像素点的数量，/＞为目标窗口内第i个黄色像素点的颜色阈值，/＞为目标窗口内第j个绿色像素点的颜色阈值，/＞为线性归一化函数。7.根据权利要求4所述一种光伏连接线生产质量智能检测方法，其特征在于，所述根据每条边缘线上每个像素点的缺陷可能性、缺陷修正值，得到每条边缘线上每个像素点的修正缺陷可能性，包括的具体步骤如下：计算一减去目标点的缺陷修正值的差值，将所述差值与目标点的缺陷可能性的乘积的归一化值，记为目标点的修正缺陷可能性。8.根据权利要求1所述一种光伏连接线生产质量智能检测方法，其特征在于，所述在所有边缘线上，根据所有像素点的修正缺陷可能性，筛选出疑似缺陷点，包括的具体步骤如下：在所有边缘线上的所有像素点中，将修正缺陷可能性大于预设的缺陷阈值的像素点，记为疑似缺陷点。9.根据权利要求1所述一种光伏连接线生产质量智能检测方法，其特征在于，所述根据每条边缘线上疑似缺陷点的数量、修正缺陷可能性、灰度值，得到每条边缘线的缺陷程度对应的具体计算公式为：其中为第b条边缘线的缺陷程度，/＞为第b条边缘线上所有疑似缺陷点的修正缺陷可能性的均值，/＞为第b条边缘线上所有疑似缺陷点的数量，/＞为第b条边缘线上所有像素点的数量，/＞为第b条边缘线上所有疑似缺陷点的灰度值的均值，/＞为线性归一化函数。10.根据权利要求1所述一种光伏连接线生产质量智能检测方法，其特征在于，所述根据所有边缘线的缺陷程度，判断光伏连接线表面RGB图像中的光伏连接线质量是否合格，包括的具体步骤如下：将缺陷程度大于预设的边缘阈值的边缘线，记为缺陷边缘线；在光伏连接线表面RGB图像中，当存在缺陷边缘线时，判定光伏连接线表面RGB图像中的光伏连接线质量不合格；当不存在缺陷边缘线时，判定光伏连接线表面RGB图像中的光伏连接线质量合格。
说明书desc
技术领域本发明涉及图像数据处理技术领域，具体涉及一种光伏连接线生产质量智能检测方法。背景技术光伏连接线是一种专用于太阳能光伏系统中的电缆，其用于连接太阳能电池板和其他组件，以便于利用太阳能。在生产过程中，连接线的表面可能出现破损导致铜线裸露，导致电力流失甚至造成安全隐患，当前常利用边缘检测算法对连接线表面的纹理进行检测，对异常部位的灰度值进行分析确定存在缺陷的可能性，实现生产质量的把控。现有的问题：光伏连接线上存在规律的纹理边缘，由于光伏连接线的扭曲，会导致光伏连接线表面的正常纹理边缘出现扭曲，可能导致部分扭曲的正常纹理边缘被误检测为缺陷边缘，由此减小了光伏连接线生产质量检测的准确性。发明内容本发明提供一种光伏连接线生产质量智能检测方法，以解决现有的问题。本发明的一种光伏连接线生产质量智能检测方法采用如下技术方案：本发明一个实施例提供了一种光伏连接线生产质量智能检测方法，该方法包括以下步骤：采集一张光伏连接线表面RGB图像，进行灰度化处理，得到光伏连接线表面RGB图像中每个像素点的灰度值；在光伏连接线表面RGB图像中，根据每个像素点的R、G、B通道的亮度值，得到每个像素点的颜色阈值，并筛选出黄色和绿色像素点；根据黄色和绿色像素点的灰度值差异，得到黄绿灰度差；获取光伏连接线表面RGB图像中的若干条边缘线，根据每条边缘线上每个像素点和其周围像素点的梯度和灰度值、黄绿灰度差，得到每条边缘线上每个像素点的缺陷可能性；根据每条边缘线上每个像素点和其周围像素点的颜色阈值、黄色和绿色像素点的数量，得到每条边缘线上每个像素点的缺陷修正值；根据每条边缘线上每个像素点的缺陷可能性、缺陷修正值，得到每条边缘线上每个像素点的修正缺陷可能性；在所有边缘线上，根据所有像素点的修正缺陷可能性，筛选出疑似缺陷点；根据每条边缘线上疑似缺陷点的数量、修正缺陷可能性、灰度值，得到每条边缘线的缺陷程度；根据所有边缘线的缺陷程度，判断光伏连接线表面RGB图像中的光伏连接线质量是否合格。进一步地，所述在光伏连接线表面RGB图像中，根据每个像素点的R、G、B通道的亮度值，得到每个像素点的颜色阈值，并筛选出黄色和绿色像素点，包括的具体步骤如下：在光伏连接线表面RGB图像中，将任意一个像素点，记为参考像素点；计算参考像素点在R通道的亮度值除以在B通道的亮度值的商值，将所述商值的归一化值，记为参考像素点的颜色阈值；当参考像素点在G通道的亮度值大于预设的绿阈值时，若参考像素点的颜色阈值大于预设的判定阈值，则将参考像素点，记为黄色像素点；若参考像素点的颜色阈值小于等于预设的判定阈值，则将参考像素点，记为绿色像素点。进一步地，所述根据黄色和绿色像素点的灰度值差异，得到黄绿灰度差，包括的具体步骤如下：在光伏连接线表面RGB图像中，将所有黄色像素点灰度值的均值，记为黄色均值；将所有绿色像素点灰度值的均值，记为绿色均值；将黄色均值和绿色均值的差值的绝对值，记为黄绿灰度差。进一步地，所述获取光伏连接线表面RGB图像中的若干条边缘线，根据每条边缘线上每个像素点和其周围像素点的梯度和灰度值、黄绿灰度差，得到每条边缘线上每个像素点的缺陷可能性，包括的具体步骤如下：根据光伏连接线表面RGB图像中所有像素点的灰度值，使用Canny边缘检测算法和Sobel算子，分别得到光伏连接线表面RGB图像中的若干条边缘线、每个像素点的梯度；将任意一条边缘线上的像素点，记为边缘点；将任意一个边缘点，记为目标点；在光伏连接线表面RGB图像中，以目标点为中心点，构建大小为的目标窗口；所述q为预设的窗口边长；在目标窗口内，根据任意相邻两个边缘点的梯度，使用反余弦函数，得到所述相邻两个边缘点的夹角值；将目标窗口内所有相邻边缘点的夹角值的均值，记为目标窗口内边缘线的变化程度；根据目标窗口内像素点的灰度值、目标窗口内边缘线的变化程度、黄绿灰度差，得到目标点的缺陷可能性。进一步地，所述根据目标窗口内像素点的灰度值、目标窗口内边缘线的变化程度、黄绿灰度差，得到目标点的缺陷可能性对应的具体计算公式为：其中P为目标点的缺陷可能性，和/＞分别为目标窗口内所有像素点中的最大灰度值和最小灰度值，C为黄绿灰度差，/＞为目标窗口内边缘线的变化程度，| |为绝对值函数，/＞为线性归一化函数。进一步地，所述根据每条边缘线上每个像素点和其周围像素点的颜色阈值、黄色和绿色像素点的数量，得到每条边缘线上每个像素点的缺陷修正值对应的具体计算公式为：其中X为目标点的缺陷修正值，为目标窗口内黄色像素点的数量，/＞为目标窗口内绿色像素点的数量，D为目标窗口内像素点的数量，/＞为目标窗口内第i个黄色像素点的颜色阈值，/＞为目标窗口内第j个绿色像素点的颜色阈值，/＞为线性归一化函数。进一步地，所述根据每条边缘线上每个像素点的缺陷可能性、缺陷修正值，得到每条边缘线上每个像素点的修正缺陷可能性，包括的具体步骤如下：计算一减去目标点的缺陷修正值的差值，将所述差值与目标点的缺陷可能性的乘积的归一化值，记为目标点的修正缺陷可能性。进一步地，所述在所有边缘线上，根据所有像素点的修正缺陷可能性，筛选出疑似缺陷点，包括的具体步骤如下：在所有边缘线上的所有像素点中，将修正缺陷可能性大于预设的缺陷阈值的像素点，记为疑似缺陷点。进一步地，所述根据每条边缘线上疑似缺陷点的数量、修正缺陷可能性、灰度值，得到每条边缘线的缺陷程度对应的具体计算公式为：其中为第b条边缘线的缺陷程度，/＞为第b条边缘线上所有疑似缺陷点的修正缺陷可能性的均值，/＞为第b条边缘线上所有疑似缺陷点的数量，/＞为第b条边缘线上所有像素点的数量，/＞为第b条边缘线上所有疑似缺陷点的灰度值的均值，/＞为线性归一化函数。进一步地，所述根据所有边缘线的缺陷程度，判断光伏连接线表面RGB图像中的光伏连接线质量是否合格，包括的具体步骤如下：将缺陷程度大于预设的边缘阈值的边缘线，记为缺陷边缘线；在光伏连接线表面RGB图像中，当存在缺陷边缘线时，判定光伏连接线表面RGB图像中的光伏连接线质量不合格；当不存在缺陷边缘线时，判定光伏连接线表面RGB图像中的光伏连接线质量合格。本发明的技术方案的有益效果是：本发明实施例中，采集一张光伏连接线表面RGB图像，获取每个像素点的颜色阈值，并筛选出黄色和绿色像素点，由此得到黄绿灰度差。从而获取光伏连接线表面RGB图像中每条边缘线上每个像素点的缺陷可能性、缺陷修正值，从而得到每条边缘线上每个像素点的修正缺陷可能性，并筛选出疑似缺陷点。其通过分析缺陷边缘像素点梯度方向的无序性，提高了缺陷边缘像素点检测的准确性，并且进一步结合了光伏连接线表面破损导致表面的黄绿颜色变化，令缺陷边缘像素点检测的结果更加准确。根据每条边缘线上疑似缺陷点的数量、修正缺陷可能性、灰度值，得到每条边缘线的缺陷程度，由此判断光伏连接线表面RGB图像中的光伏连接线质量是否合格。至此本发明通过分析图像中每条边缘线的缺陷程度，提高了缺陷检测的准确性，从而提高了光伏连接线生产质量检测的准确性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明一种光伏连接线生产质量智能检测方法的步骤流程图；图2为本实施例所提供的一个光伏连接线表面图像采集过程示意图；图3为本实施例所提供的一张光伏连接线表面图像示意图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种光伏连接线生产质量智能检测方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种光伏连接线生产质量智能检测方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种光伏连接线生产质量智能检测方法的步骤流程图，该方法包括以下步骤：步骤S001：采集一张光伏连接线表面RGB图像，进行灰度化处理，得到光伏连接线表面RGB图像中每个像素点的灰度值；在光伏连接线表面RGB图像中，根据每个像素点的R、G、B通道的亮度值，得到每个像素点的颜色阈值，并筛选出黄色和绿色像素点；根据黄色和绿色像素点的灰度值差异，得到黄绿灰度差。采集一张光伏连接线表面RGB图像，进行灰度化处理，得到光伏连接线表面RGB图像中每个像素点的灰度值。图2为本实施例所提供的一个光伏连接线表面图像采集过程示意图。图3为本实施例所提供的一张光伏连接线表面图像示意图。所需说明的是：图2所示的光伏连接线表面图像采集过程为：将光伏连接线摆放在传送带上，沿传送带方向光伏连接线滚动传输，使用工业相机分别从三个拍摄方向进行光伏连接线表面图像，由此保障光伏连接线的全部表面都被拍摄到。图3中光伏连接线表面呈沿连接线方向黄绿相间分布，本实施例选取表面呈沿连接线方向黄绿相间分布的光伏连接线为例进行叙述，其它实施方式中可设置为其它种类的光伏连接线，本实施例不进行限定。并且为了去除为背景的传送带区域的影响，本实施例先在传送带上采集无光伏连接线的图像，再采集有光伏连接线的图像，两者进行图像差分，得到光伏连接线表面图像。其中，图像灰度化处理和图像差分均为公知技术，具体方法在此不做介绍。在生产过程中可能由于一些原因导致光伏连接线的表面出现破损，在其破损位置会对光伏连接线表面图像中的边缘造成影响，并且破损区域的灰度值也与其他区域出现差异。而光伏连接线的扭曲也会对边缘造成影响，因此通过对比异常位置和其他位置连接线在不同颜色通道的占比，对缺陷存在的可能性进行修正，得到连接线表面缺陷存在的可能性，从而计算该位置的缺陷程度。当连接线表面出现破损时，由于破损区域在连接线上的分布随机，因此破损区域的存在会对边缘的方向造成影响，导致边缘上相邻像素点的梯度方向发生改变，并且当破损程度越大时其内部铜线的裸露面积越大，并且由于铜线会对光照存在反射，从而导致图像中某一区域像素点的灰度值差异出现变化。由于本实施例中的光伏连接线表面呈沿连接线方向黄绿相间分布，因此先区分出光伏连接线表面RGB图像中为黄色的像素点、为绿色的像素点。而破损区域中裸露的铜线会反射部分光线，其会破坏光伏连接线表面颜色。已知在光伏连接线表面RGB图像中，当G通道的亮度值越大时，像素点越接近绿色，当G、R通道的亮度值越大，且B通道的亮度值越小时，像素点越接近黄色。本实施例预设的绿阈值为200，预设的判定阈值为0.6，以此为例进行叙述，其它实施方式中可设置为其它值，本实施例不进行限定。在光伏连接线表面RGB图像中，将任意一个像素点，记为参考像素点。由此可知参考像素点的颜色阈值Y的计算公式为：其中Y为参考像素点的颜色阈值，为参考像素点在R通道的亮度值，/＞为参考像素点在B通道的亮度值，/＞为线性归一化函数，将数据值归一化至区间内。由此可知，当参考像素点在G通道的亮度值大于预设的绿阈值，并且参考像素点的颜色阈值大于预设的判定阈值时，将参考像素点，记为黄色像素点。当参考像素点在G通道的亮度值大于预设的绿阈值，并且参考像素点的颜色阈值小于等于预设的判定阈值时，将参考像素点，记为绿色像素点。按照上述方式，得到每个像素点的颜色阈值，并将光伏连接线表面RGB图像中的所有像素点划分为黄色像素点和绿色像素点。在光伏连接线表面RGB图像中，将所有黄色像素点灰度值的均值，记为黄色均值，将所有绿色像素点灰度值的均值，记为绿色均值，将黄色均值和绿色均值的差值的绝对值，记为黄绿灰度差。步骤S002：获取光伏连接线表面RGB图像中的若干条边缘线，根据每条边缘线上每个像素点和其周围像素点的梯度和灰度值、黄绿灰度差，得到每条边缘线上每个像素点的缺陷可能性。在光伏连接线表面RGB图像中，根据所有像素点的灰度值，使用Sobel算子，得到每个像素点的梯度。在光伏连接线表面RGB图像中，根据所有像素点的灰度值，使用Canny边缘检测算法，得到光伏连接线表面RGB图像中的若干条边缘线。所需说明的是：Canny边缘检测算法和Sobel算子均为公知技术，具体方法在此不做介绍。并且若边缘线上的像素点数量为1，则说明其大概率为噪声点，其不进行后续的分析。将任意一条边缘线上的像素点，记为边缘点。将任意一个边缘点，记为目标点。本实施例预设的窗口边长q为11，以此为例进行叙述，其它实施方式中可设置为其它值，本实施例不进行限定，但预设的窗口边长q应为奇数。在光伏连接线表面RGB图像中，以目标点为中心点，构建大小为的目标窗口。所述目标窗口存在与光伏连接线表面RGB图像的长边和宽边平行的边长。已知光伏连接线表面RGB图像中的破损区域的边缘上的像素点梯度方向无序，故边缘上相邻像素点之间梯度方向的差异越大，即梯度方向的变化越大，则说明该边缘为缺陷边缘的可能性越大。并且当连接线表面出现破损时，由于内部铜线会将部分光线发射从而导致目标窗口中灰度值之间差异出现变化，由此计算目标窗口中的灰度差异，结合目标窗口中梯度方向的变化程度，判断缺陷存在的可能性。在目标窗口内，根据相邻两个边缘点的梯度，使用反余弦函数，得到相邻两个边缘点的夹角值。将目标窗口内所有相邻边缘点的夹角值的均值，记为目标窗口内边缘线的变化程度。所需说明的是：反余弦函数为公知技术，具体方法在此不做介绍，梯度为矢量，可以通过反余弦函数，计算两个矢量的夹角。由此可知目标点的缺陷可能性P的计算公式为：其中P为目标点的缺陷可能性，和/＞分别为目标窗口内所有像素点中的最大灰度值和最小灰度值，C为黄绿灰度差，/＞为目标窗口内边缘线的变化程度，| |为绝对值函数，/＞为线性归一化函数，将数据值归一化至区间内。所需说明的是：若目标点为正常纹理边缘，则目标窗口内应只存在黄色和绿色像素点，因此当与C的差异越大时，目标点为缺陷边缘像素点的可能性越大。而缺陷边缘上的像素点梯度方向无序，因此/＞越大，目标窗口内相邻边缘点的梯度方向差异越大，即目标点为缺陷边缘像素点的可能性越大。由此用/＞和/＞的乘积的归一化值，表示目标点的缺陷可能性。步骤S003：根据每条边缘线上每个像素点和其周围像素点的颜色阈值、黄色和绿色像素点的数量，得到每条边缘线上每个像素点的缺陷修正值。在不同方向上对连接线进行观察时，可以观察到的纹理表现存在差异，当连接线表面出现扭曲导致连接线表面纹理方向出现变化，容易造成正常纹理边缘被识别为缺陷。由于连接线表面纹理颜色特征明显，故通过对异常区域进行颜色分析对比，从而确定连接线表面存在缺陷的可能性。在连接线表面属于黄色和绿色的像素点占据的面积较大，当目标窗口中连接线出现破损导致目标窗口出现不同于这两类的像素点时，则在该位置像素点数量的占比就会出现变化。即在目标窗口中还存在不属于黄绿两色的像素点，则其属于缺陷的可能性较大，当这一类像素点较少时，可以认为当前区域存在缺陷的可能性较小，通过该分析对缺陷可能性进行修正。由此可知目标点的缺陷修正值X的计算公式为：其中X为目标点的缺陷修正值，为目标窗口内黄色像素点的数量，/＞为目标窗口内绿色像素点的数量，D为目标窗口内像素点的数量，/＞为目标窗口内第i个黄色像素点的颜色阈值，/＞为目标窗口内第j个绿色像素点的颜色阈值。/＞为线性归一化函数，将数据值归一化至区间内。所需说明的是：越接近于1，说明目标窗口内只有黄色和绿色像素点，即目标点越不可能为缺陷，当/＞越小时，说明目标窗口内其它像素点的数量越多，即为缺陷的可能性越大。/＞越大，说明像素点越可能为黄色，/＞越小，说明像素点越可能为绿色，因此越大，说明目标窗口内为黄色和绿色的像素点越可信，由此用/＞和/＞的乘积的归一化值，表示目标点的缺陷修正值，X越大，说明目标点越不可能为缺陷。步骤S004：根据每条边缘线上每个像素点的缺陷可能性、缺陷修正值，得到每条边缘线上每个像素点的修正缺陷可能性；在所有边缘线上，根据所有像素点的修正缺陷可能性，筛选出疑似缺陷点。由此可知目标点的修正缺陷可能性的计算公式为：其中为目标点的修正缺陷可能性，X为目标点的缺陷修正值，P为目标点的缺陷可能性，/＞为线性归一化函数，将数据值归一化至区间内。所需说明的是：X越大，说明目标点越不可能为缺陷，而P越大，说明目标点越可能为缺陷，因此用与P的乘积的归一化值，表示目标点的修正缺陷可能性。按照上述方式，得到每条边缘线上每个像素点的修正缺陷可能性。本实施例预设的缺陷阈值为0.5，以此为例进行叙述，其它实施方式中可设置为其它值，本实施例不进行限定。在所有边缘线上所有像素点中，将修正缺陷可能性大于预设的缺陷阈值的像素点，记为疑似缺陷点。所需说明的是：当修正缺陷可能性小于等于预设的缺陷阈值时，说明该像素点为正常像素点。步骤S005：根据每条边缘线上疑似缺陷点的数量、修正缺陷可能性、灰度值，得到每条边缘线的缺陷程度；根据所有边缘线的缺陷程度，判断光伏连接线表面RGB图像中的光伏连接线质量是否合格。光伏连接线表面的缺陷表现为对表面纹理的破坏以及区域内为灰度值的差异，连接线表面存在异常的区域面积越大，并且在该区域内像素点灰度值与其邻域像素灰度值的差异越大，说明在当前连接线的位置存在的缺陷程度越大。根据修正缺陷可能性，确定当前连接线表面可能存在缺陷的位置。由于破损区域像素点的表现为高亮像素点，统计疑似缺陷点的数量，根据边缘线上疑似缺陷点的灰度值以及疑似缺陷点的数量，计算每条边缘线的缺陷程度。由此可知每条边缘线的缺陷程度的计算公式为：其中为第b条边缘线的缺陷程度，/＞为第b条边缘线上所有疑似缺陷点的修正缺陷可能性的均值，/＞为第b条边缘线上所有疑似缺陷点的数量，/＞为第b条边缘线上所有像素点的数量，/＞为第b条边缘线上所有疑似缺陷点的灰度值的均值，t为边缘线的数量。/＞为线性归一化函数，将数据值归一化至区间内。所需说明的是：当边缘线上疑似缺陷点的修正缺陷可能性、灰度值越大，即越大，说明疑似缺陷点为缺陷点的可能性越大，而疑似缺陷点的占比越多，即/＞越大，说明该边缘线为缺陷边缘的可能性越大，因此用/＞的归一化值，表示第b条边缘线的缺陷程度，/＞越大，说明第b条边缘线为缺陷边缘的可能性越大。本实施例预设的边缘阈值为0.7，以此为例进行叙述，其它实施方式中可设置为其它值，本实施例不进行限定。由此，将缺陷程度大于预设的边缘阈值的边缘线，记为缺陷边缘线。而缺陷程度小于等于预设的边缘阈值的边缘线，为正常边缘线。故在光伏连接线表面RGB图像中，当存在缺陷边缘线时，判定光伏连接线表面RGB图像中的光伏连接线质量不合格。当不存在缺陷边缘线时，判定光伏连接线表面RGB图像中的光伏连接线质量合格。至此，本发明完成。综上所述，在本发明实施例中，采集一张光伏连接线表面RGB图像，根据每个像素点的R、G、B通道的亮度值，得到每个像素点的颜色阈值，并筛选出黄色和绿色像素点，由此得到黄绿灰度差。获取光伏连接线表面RGB图像中的若干条边缘线，再获取每条边缘线上每个像素点的缺陷可能性、缺陷修正值，从而得到每条边缘线上每个像素点的修正缺陷可能性，并筛选出疑似缺陷点。根据每条边缘线上疑似缺陷点的数量、修正缺陷可能性、灰度值，得到每条边缘线的缺陷程度，由此判断光伏连接线表面RGB图像中的光伏连接线质量是否合格。本发明通过分析图像中每条边缘线的缺陷程度，提高了缺陷检测的准确性，从而提高了光伏连接线生产质量检测的准确性。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
