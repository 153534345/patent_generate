标题title
基于多次测量扩维并行滤波的动力定位船舶参数辨识方法
摘要abst
本发明提供一种基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，属于船舶动力定位技术领域，步骤为：S1、建立动力定位船舶推进器模型及运动模型；S2、参数辨识算法设计，包括状态估计模型扩维及建立、多次测量并行滤波；S3、参数辨识动作及流程设计，按照设计的辨识动作及流程完成全部待辨参数的估计。本发明能够实现船舶水动力系数及推进器推力系数的辨识获取，从而为动力定位船舶运动状态估计及运动控制提供精准的操控模型；通过算法设计，可提升辨识参数的收敛性，且通过设计一系列辨识动作流程，实现在有限的航次内完成动力定位船舶纵向、横向及艏向的水动力系数与全部推进器推力系统的辨识，提高参数辨识的准确度。
权利要求书clms
1.一种基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，其特征在于：包括如下步骤：S1、建立动力定位船舶推进器模型及运动模型：船舶推进器模型为：推进器产生的纵向推力、横向推力和艏向力矩用三维向量表示为：其中，，R表示向量元素均为实数；T为推进器布置矩阵，K为推力系数矩阵，/＞为输入的控制变量，/＞，/＞为推进器个数；船舶运动模型为：其中，M为质量矩阵，为波浪飘移阻尼和层流表面摩擦产生引起的阻尼矩阵，/＞为船体坐标系下加速度及角加速度向量，/＞为船体坐标系下速度及角速度向量，/＞中各元素分别是/＞中对应元素的一阶导数，/＞表示在纵向、横向、艏向三个自由度上的未知环境力组成的向量；S2、参数辨识算法设计：S21、状态估计模型扩维及建立：采集船舶运动测量数据，使用状态估计方法对船舶运动模型中的运动状态进行估计，同时对状态估计模型进行扩维设计，将待辨识参数作为状态包含在状态估计模型的状态向量中；S22、多次测量并行滤波：将扩维后的状态估计模型作进一步处理，在进行状态估计时进行离线并行滤波，建立动力定位船舶状态估计模型；S3、参数辨识动作及流程设计，按照设计的辨识动作及流程完成全部待辨参数的估计：从质量矩阵M、阻尼矩阵D的区块对角结构出发，将纵向从横向和艏向运动解耦。2.根据权利要求1所述的基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，其特征在于：在步骤S1中，所述船舶运动模型建立的条件是当动力定位船舶处于低速航行状态时。3.根据权利要求1所述的基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，其特征在于：在步骤S1中，其中，为推进器转速，T的维度为3×/＞；K为一个对角阵，由个推进器推力系数组成：；船舶在大地坐标系下的北向位置、东向位置/＞及艏向角/＞用向量表示为，在船体坐标系中分解后的纵向速度/＞、横向速度/＞、艏向角速度/＞用向量表示为/＞，船体坐标系和大地坐标系的速度之间有如下转换关系：其中，为大地坐标系下位置及艏向向量，/＞为大地坐标系下速度及角速度向量，/＞中各元素分别是/＞中对应元素的一阶导数；坐标变换矩阵表示如下：其中，为非奇异坐标变换矩阵，且/＞。4.根据权利要求3所述的基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，其特征在于：在步骤S1中，质量矩阵为：其中，为船舶质量，/＞为船舶转动惯量，/＞为船舶质心纵向坐标，/＞为纵向水动力加速度导数，/＞为横向水动力加速度导数，/＞为艏向对横向的耦合水动力加速度导数，/＞为横向对艏向的耦合水动力加速度导数，/＞为艏向水动力加速度导数；阻尼矩阵为：其中，为纵向水动力速度导数，/＞为横向水动力速度导数，/＞为艏向对横向的耦合水动力速度导数，/＞为横向对艏向的耦合水动力速度导数，/＞为艏向水动力速度导数。5.根据权利要求4所述的基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，其特征在于：在步骤S21中，状态估计模型扩维及建立的具体方法为：确定待辨识参数为阻尼矩阵中的未知参数/＞、/＞、/＞、/＞、/＞，以及推力系数矩阵/＞中的未知参数/＞、/＞、…、/＞、/＞，阻尼矩阵/＞和推力系数矩阵/＞中的未知参数组成的向量记为待辨识参数向量/＞：建立待辨识参数向量的状态估计模型如下：其中，为待辨识参数向量/＞的一阶导数，/＞为/＞维的高斯白噪声列向量；建立系统测量模型为：式中z为北向位置、东向位置及艏向角组成的列向量，为零均值高斯白噪声三维列向量；所建立的动力定位船舶状态估计模型为：其中，，/＞中各元素分别是/＞中对应元素的一阶导数，/＞、/＞、分别为纵向环境力高斯白噪声、横向环境力高斯白噪声、艏向环境力矩高斯白噪声；令，x表示状态估计模型中不包含待辨识参数的状态向量，则上式表示为：其中，为/＞的一阶导数，/＞为函数矩阵，/＞为噪声向量。6.根据权利要求5所述的基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，其特征在于：在步骤S22中，动力定位船舶状态估计模型为：其中，N为测量次数，为第N次测量得到的状态估计模型中不包含待辨识参数的状态向量，/＞为/＞的一阶导数，/＞为第N次输入的控制变量，/＞为第N次测量得到的噪声向量，zN为第N次测量得到的北向位置、东向位置及艏向角组成的列向量，/＞N为第N次测量得到的大地坐标系下位置及艏向向量，/＞N为第N次测量得到的零均值高斯白噪声三维列向量；对状态估计模型采用滤波算法，在多次测量后进行滤波处理，得到待辨识参数，然后对/＞中的参数采取分批辨识。7.根据权利要求6所述的基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，其特征在于：所述推进器分为艏侧推进器和艉部推进器。8.根据权利要求7所述的基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，其特征在于：在步骤S3中，包括三个动作流程，完成全部待辨识参数的估计，S31、解耦的纵向：设置艉部推进器角度为0°，艉部推进器同步正转、反转交替，只允许船舶在纵向通道上前后加减速往复运动，此动作多次重复；S32、耦合的横向及艏向：通过设置两个艉部推进器方位角为90°与-90°，异步发力，使其交替正转，实现船舶在横向及艏向通道的往复运动，此动作多次重复；S33、艏侧推进器：通过艏侧推进器异步发力，使其交替向横向正向及横向反向发力，使船舶在横向及艏向通道往复运动，辨识艏侧推进器推力系数，此动作多次重复；通过步骤S31的动作，得到纵向阻尼系数及艉部推进器推力系数；然后将辨识出的艉部推进器推力系数代入步骤S32的动作，得到横向、艏向阻尼系数；最后将辨识出的横向、艏向阻尼系数代入步骤S33的动作，得到艏侧推进器推力系数，采用EKF或UKF算法进行N次数据采集的状态估计及待辨识参数的估计。9.根据权利要求8所述的基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，其特征在于：所述艏侧推进器采用槽道推进器，所述艉部推进器采用全回转推进器。
说明书desc
技术领域本发明属于船舶动力定位技术领域，尤其是涉及一种基于多次测量扩维并行滤波的动力定位船舶参数辨识方法。背景技术动力定位船舶是仅依靠自身推进系统就能够自动地保持位置和艏向的船舶，已被广泛应用于海洋工程领域。现代动力定位系统基于运动模型进行反馈控制，通过建立由风、流、二阶波浪力引起的船舶低频运动模型及由一阶波浪力引起的船舶高频运动模型，进行状态观测器及控制器的设计。为了得到较好的控制性能，就需要较为精准的模型参数，包括水动力系数及推进器推力系数等。获取船舶模型参数的方法有约束船模试验法、经验公式法等，但上述方法均存在计算效率低、误差较大的缺陷。系统参数辨识是控制理论的一个分支，其研究要点为确定系统模型及模型参数，目前已经产生各种不同的辨识方法，例如采用最小二乘或卡尔曼滤波方法，但是利用单次测量信息进行滤波处理，可能带来待辨识参数收敛慢、辨识结果不准确等问题。发明内容本发明要解决的问题是提供一种基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，实现动力定位船舶水动力系数及推进器推力系数的获取，从而为船舶运动状态估计及控制提供精准的模型。为解决上述技术问题，本发明采用的技术方案是：一种基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，包括如下步骤：S1、建立动力定位船舶推进器模型及运动模型：所述推进器分为艏侧推进器和艉部推进器，所述艏侧推进器采用槽道推进器，所述艉部推进器采用全回转推进器。所述槽道推进器及全回转推进器用于动力定位船舶的位置和艏向保持。船舶推进器模型为：所述推进器产生的纵向推力、横向推力和艏向力矩可用三维向量表示为：其中，，R表示向量元素均为实数；T为推进器布置矩阵，K为推力系数矩阵，/＞为输入的控制变量，/＞，/＞为推进器个数；其中，为各推进器转速；T与/＞个推进器的布置位置、推进器的类型有关，T的维度为3×/＞。K为一个对角阵，由i个推进器推力系数组成：船舶在大地坐标系下的北向位置、东向位置/＞及艏向角/＞可用向量表示为，在船体坐标系中分解后的纵向速度/＞、横向速度/＞、艏向角速度/＞可用向量表示为/＞，船体坐标系和大地坐标系的速度之间有如下转换关系：其中，为大地坐标系下位置及艏向向量，/＞为船体坐标系下速度及角速度向量，/＞为大地坐标系下速度及角速度向量，/＞中各元素分别是/＞中对应元素的一阶导数。坐标变换矩阵表示如下：其中，为非奇异坐标变换矩阵，且/＞，当动力定位船舶处于低速航行状态时，船舶运动模型为：其中，M为质量矩阵，为波浪飘移阻尼和层流表面摩擦产生引起的阻尼矩阵，/＞为船体坐标系下加速度及角加速度向量，/＞中各元素分别是/＞中对应元素的一阶导数，/＞表示在纵向、横向、艏向三个自由度上的未知环境力组成的向量。质量矩阵为：其中，为船舶质量，/＞为船舶转动惯量，/＞为船舶质心纵向坐标，/＞为纵向水动力加速度导数，/＞为横向水动力加速度导数，/＞为艏向对横向的耦合水动力加速度导数，为横向对艏向的耦合水动力加速度导数，/＞为艏向水动力加速度导数。阻尼矩阵为：其中，为纵向水动力速度导数，/＞为横向水动力速度导数，/＞为艏向对横向的耦合水动力速度导数，/＞为横向对艏向的耦合水动力速度导数，/＞为艏向水动力速度导数。本发明中所定义的大地坐标系为北东地系，即正北方向为纵轴，正东方向为横轴；船体坐标系为前右下系，即船艏方向为纵轴，右舷方向为横轴。S2、参数辨识算法设计：S21、状态估计模型扩维及建立：采集船舶运动测量数据，使用状态估计方法对船舶运动模型中的运动状态进行估计，同时对状态估计模型进行扩维设计，从而可以将待辨识参数作为状态包含在状态估计模型的状态向量中，具体方法如下：确定待辨识参数为阻尼矩阵中的未知参数/＞、/＞、/＞、/＞、/＞，以及推力系数矩阵/＞中的未知参数/＞、/＞、…、/＞、/＞，上述所有未知参数组成的向量记为待辨识参数向量/＞如下：建立待辨识参数向量的状态估计模型如下：其中，为待辨识参数向量/＞的一阶导数，/＞为/＞维的高斯白噪声列向量。建立系统测量模型为：式中z为传感器测得的北向位置、东向位置及艏向角组成的列向量，为零均值高斯白噪声三维列向量。因此，所建立的动力定位船舶状态估计模型为：其中，，/＞中各元素分别是/＞中对应元素的一阶导数，、/＞、/＞分别为纵向环境力高斯白噪声、横向环境力高斯白噪声、艏向环境力矩高斯白噪声；令，x表示状态估计模型中不包含待辨识参数的状态向量，则上式可表示为：其中，为/＞的一阶导数，/＞为函数矩阵，/＞为噪声向量。S22、多次测量并行滤波，改进状态估计模型：将扩维后的状态估计模型作进一步处理，在进行状态估计时进行离线并行滤波，其基本思想是为了改善参数估计的收敛性及准确性，同一个量可采用不同的输入被测量多次。在待估计参数为常量的假设下，对于每一次测量，都是相同的，其中p为待辨识参数的个数。于是动力定位船舶状态估计模型可设计为：其中，N为测量次数，为第N次测量得到的状态估计模型中不包含待辨识参数的状态向量，/＞为/＞的一阶导数，/＞为第N次输入的控制变量，/＞为第N次测量得到的噪声向量，/＞为第N次测量得到的北向位置、东向位置及艏向角组成的列向量，/＞N为第N次测量得到的大地坐标系下位置及艏向向量，/＞N为第N次测量得到的零均值高斯白噪声三维列向量；通过利用多次测量可获得系统更多信息，更多信息使得参数估计精度改善，减小参数漂移的可能性。对上述模型采用EKF或UKF等滤波算法，在多次测量后进行滤波处理，可以得到待辨识参数。然后对中的参数采取分批辨识。S3、参数辨识动作及流程设计，按照设计的辨识动作及流程完成全部待辨参数的估计：辨识动作及流程需根据船舶的推进器配置具体设计。一般地，从质量矩阵M、阻尼矩阵D的区块对角结构出发，将纵向从横向和艏向运动解耦是较好的策略。本发明设计如下的三个动作流程，完成全部待辨识参数的估计。S31、解耦的纵向：设置艉部推进器角度为0°，艉部推进器同步正转、反转交替，只允许船舶在纵向通道上前后加减速往复运动，此动作多次重复。S32、耦合的横向及艏向：通过设置两个艉部推进器方位角为90°与-90°，异步发力，使其交替正转，实现船舶在横向及艏向通道的往复运动，此动作多次重复。S33、艏侧推进器：通过艏侧推进器异步发力，使其交替向横向正向及横向反向发力，使船舶在横向及艏向通道往复运动，辨识艏侧推进器推力系数，此动作多次重复。三个辨识动作流程的关系为：通过步骤S31的动作，得到纵向阻尼系数及艉部推进器推力系数；然后将辨识出的艉部推进器推力系数代入步骤S32的动作，得到横向、艏向阻尼系数；最后将辨识出的横向、艏向阻尼系数代入步骤S33的动作，得到艏侧推进器推力系数。采用EKF或UKF算法进行N次数据采集的状态估计及待辨识参数的估计。由于采用上述技术方案，本发明具有如下有益效果：本发明将船舶动力定位状态估计模型扩维，在模型中引入待辨识参数，从而在滤波的同时将包含在扩维的状态估计模型的状态向量中的待辨识参数估计出来。同时，本发明利用多次测量信息进行并行滤波处理，获得系统更多信息，使得参数估计精度改善，减小参数漂移的可能性。本发明还设计了参数辨识的动作流程，实现针对性的分批次辨识，提高了参数辨识的准确度。由此可见，本发明能够实现船舶水动力系数及推进器推力系数的辨识获取，从而为动力定位船舶运动状态估计及运动控制提供精准的操控模型；且通过算法设计，可提升辨识参数的收敛性。本发明通过设计一系列辨识动作流程，可以实现在有限的航次内完成动力定位船舶纵向、横向及艏向的水动力系数与全部推进器推力系统的辨识；且尽可能地规避了各个通道的耦合效应，从而提高了参数辨识的准确度。附图说明下面通过参考附图并结合实例具体地描述本发明，本发明的优点和实现方式将会更加明显，其中附图所示内容仅用于对本发明的解释说明，而不构成对本发明的任何意义上的限制，在附图中：图1为本发明的方法流程图。图2为本发明三并行滤波示意图。图3为本发明辨识动作流程图。具体实施方式如图1所示，本发明一种基于多次测量扩维并行滤波的动力定位船舶参数辨识方法，包括如下步骤：S1、建立动力定位船舶推进器模型及运动模型：推进器分为槽道推进器和全回转推进器，槽道推进器及全回转推进器用于动力定位船舶的位置和艏向保持。以某型动力定位船舶为例，其在船艏布置两个艏侧推进器，在船艉布置两个艉部全回转推进器，全船共4个推进器。船舶推进器模型为：推进器产生的纵向推力、横向推力和艏向力矩可用三维向量表示为：其中，，R表示向量元素均为实数；T为推进器布置矩阵，K为推力系数矩阵，/＞为输入的控制变量，/＞，/＞为推进器个数，/＞=4；其中，、/＞、/＞、/＞为各推进器转速；T与4个推进器的布置位置、推进器的类型有关，T的维度为3×4。推力系数矩阵K为一个对角阵，由4个推进器推力系数组成：则推进器布置矩阵T可表示为：其中，为左侧全回转推进器方位角，/＞为右侧全回转推进器方位角，/＞为各推进器相对于船舶重心的纵向力臂，/＞为各推进器相对于船舶重心的横向力臂。本发明中所定义的大地坐标系为北东地系，即正北方向为纵轴，正东方向为横轴；船体坐标系为前右下系，即船艏方向为纵轴，右舷方向为横轴。船舶在大地坐标系下的北向位置、东向位置/＞及艏向角/＞可用向量表示为，在船体坐标系中分解后的纵向速度/＞、横向速度/＞、艏向角速度/＞可用向量表示为/＞，船体坐标系和大地坐标系的速度之间有如下转换关系：其中，为大地坐标系下位置及艏向向量，/＞为船体坐标系下速度及角速度向量，/＞为大地坐标系下速度及角速度向量，/＞中各元素分别是/＞中对应元素的一阶导数。坐标变换矩阵表示如下：其中，为非奇异坐标变换矩阵，且/＞，当动力定位船舶处于低速航行状态时，船舶运动模型为：其中，M为质量矩阵，为波浪飘移阻尼和层流表面摩擦产生引起的阻尼矩阵，/＞为船体坐标系下加速度及角加速度向量，/＞中各元素分别是/＞中对应元素的一阶导数，/＞表示在纵向、横向、艏向三个自由度上的未知环境力组成的向量；质量矩阵为：其中，为船舶质量，/＞为船舶转动惯量，/＞为船舶质心纵向坐标，/＞为纵向水动力加速度导数，/＞为横向水动力加速度导数，/＞为艏向对横向的耦合水动力加速度导数，/＞为横向对艏向的耦合水动力加速度导数，/＞为艏向水动力加速度导数。阻尼矩阵为：其中，为纵向水动力速度导数，/＞为横向水动力速度导数，/＞为艏向对横向的耦合水动力速度导数，/＞为横向对艏向的耦合水动力速度导数，/＞为艏向水动力速度导数。S2、参数辨识算法设计：S21、状态估计模型扩维及建立：采集船舶运动测量数据，使用状态估计方法对船舶运动模型中的运动状态进行估计，同时对状态估计模型进行扩维设计，从而可以将待辨识参数作为状态包含在状态估计模型的状态向量中，具体方法如下：确定待辨识参数为阻尼矩阵中的未知参数/＞、/＞、/＞、/＞、/＞以及推力系数矩阵/＞中的未知参数/＞、/＞、/＞、/＞，其中，/＞、/＞、/＞、/＞、/＞分别为中第一行第一列、第二行第二列、第二行第三列、第三行第二列、第三行第三列对应元素，上述所有未知参数组成的向量记为待辨识参数向量/＞，即：建立待辨识参数向量的状态估计模型如下：其中，为待辨识参数向量/＞的一阶导数，/＞为9维的高斯白噪声列向量。建立系统测量模型为：式中z为传感器测得的北向位置、东向位置及艏向角组成的列向量，为零均值高斯白噪声三维列向量。因此，所建立的动力定位船舶状态估计模型为：其中，，/＞中各元素分别是/＞中对应元素的一阶导数，、/＞、/＞分别为纵向环境力高斯白噪声、横向环境力高斯白噪声、艏向环境力矩高斯白噪声；令，x表示状态估计模型中不包含待辨识参数的状态向量，则上式可表示为：其中，为/＞的一阶导数，/＞为函数矩阵，/＞为噪声向量；其中，、/＞、/＞分别为推进器布置矩阵/＞第一、二、三行中第个元素；/＞为第/＞个推进器的推力系数；/＞为列向量中第/＞个元素，/＞；/＞、/＞、/＞为未知环境力向量/＞的三个元素；/＞为质量矩阵/＞中第一行第一列元素，/＞为质量矩阵/＞中第二行第二列元素，/＞为质量矩阵/＞中第二行第三列元素，/＞为质量矩阵/＞中第三行第二列元素，/＞为质量矩阵中第三行第三列元素。S22、多次测量并行滤波，改进状态估计模型：将扩维后的状态估计模型作进一步处理，在进行状态估计时进行离线并行滤波，其基本思想是为了改善参数估计的收敛性及准确性，同一个量可采用不同的输入被测量多次。在待估计参数为常量的假设下，对于每一次测量，都是相同的，其中p为待辨识参数的个数。于是动力定位船舶状态估计模型可设计为：其中，N为测量次数，为第N次测量得到的状态估计模型中不包含待辨识参数的状态向量，/＞为/＞的一阶导数，/＞为第N次输入的控制变量，/＞为第N次测量得到的噪声向量，zN为第N次测量得到的北向位置、东向位置及艏向角组成的列向量，/＞N为第N次测量得到的大地坐标系下位置及艏向向量，/＞N为第N次测量得到的零均值高斯白噪声三维列向量；当N=3时，如图2所示，可以采用三并行滤波，即通过利用三次测量可获得系统更多信息，更多信息使得参数估计精度改善，减小参数漂移的可能性。对上述模型采用EKF或UKF等滤波算法，在多次测量后进行滤波处理，可以得到待辨识参数。然后对中的参数采取分批辨识。S3、参数辨识动作及流程设计，按照设计的辨识动作及流程完成全部待辨参数的估计：辨识动作及流程需根据船舶的推进器配置具体设计。一般地，从质量矩阵M、阻尼矩阵D的区块对角结构出发，将纵向从横向和艏向运动解耦是较好的策略。本发明设计如下的三个动作流程，完成全部待辨识参数的估计，如图3所示。S31、解耦的纵向：设置两个艉部全回转推进器角度为0°，艉部全回转推进器同步正转、反转交替，只允许船舶在纵向通道上前后加减速往复运动，为保证参数估计精度，此动作重复3次，此动作后辨识得到纵向阻尼系数和两个艉部全回转推进器推力系数/＞、/＞。S32、耦合的横向及艏向：通过设置两个艉部全回转推进器方位角为90°与-90°，异步发力，使其交替正转，实现船舶在横向及艏向通道的往复运动，为保证参数估计精度，此动作重复3次，此动作后辨识得到横向阻尼系数、/＞和艏向阻尼系数/＞、/＞。S33、艏侧推进器：通过两个艏侧推进器异步发力，使其交替向横向正向及横向反向发力，使船舶在横向及艏向通道往复运动，辨识艏侧推进器推力系数，为保证参数估计精度，此动作重复3次。此动作后辨识得到艏侧推进器推力系数、/＞。三个辨识动作流程的关系为：通过步骤S31的动作，得到纵向阻尼系数及艉部全回转推进器推力系数/＞、/＞；然后将辨识出的艉部全回转推进器推力系数代入步骤S32的动作，得到横向阻尼系数/＞、/＞和艏向阻尼系数/＞、/＞；最后将辨识出的横向、艏向阻尼系数代入步骤S33的动作，得到艏侧推进器推力系数/＞、/＞。如图3所示，过程中采用了EKF或UKF算法进行3次数据采集的状态估计及待辨识参数的估计。以上对本发明的实施例进行了详细说明，但所述内容仅为本发明的较佳实施例，不能被认为用于限定本发明的实施范围。凡依本发明范围所作的均等变化与改进等，均应仍归属于本专利涵盖范围之内。
