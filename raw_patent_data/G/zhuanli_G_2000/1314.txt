标题title
一种基于强化学习和数字孪生体的物流分拣方法
摘要abst
本发明公开了一种基于强化学习和数字孪生体的物流分拣方法，包括以下步骤：S1.采集物流分拣系统中历史货物数据；S2.采集物流分拣系统中分拣机的分拣格口的历史分拣数据，拟合格口处理效率函数；S3.通过聚类算法整合包牌信息，获取包牌类别相似度矩阵和转移概率矩阵；S4.设计强化学习策略以及价值网络，构造蒙特卡洛树的叶节点；S5.通过对蒙特卡洛树的叶节点进行展开，获取最优的格口分拣策略；S6.对于不同物流中转场的物流分拣系统，构建数字孪生体，并获取最优格口分拣策略。本发明分别统计格口锁格货物件数和锁格时间数据，采用蒙特卡洛树搜索强化学习算法，提高分拣计划的泛化性，适应不同场地条件因素的中转场物流分拣系统。
权利要求书clms
1.一种基于强化学习和数字孪生体的物流分拣方法，其特征在于：包括以下步骤：S1.采集物流分拣系统中历史货物数据；S2.采集物流分拣系统中分拣机的分拣格口的历史分拣数据，拟合格口处理效率函数；S3.通过聚类算法整合包牌信息，获取包牌类别相似度矩阵和转移概率矩阵；S4.基于包牌类别的相似度和转移概率矩阵设计强化学习策略以及价值网络，构造蒙特卡洛树的叶节点；S5.通过对蒙特卡洛树的叶节点进行展开，获取最优的格口分拣策略；S6.对于不同物流中转场的物流分拣系统，构建数字孪生体，并在数字孪生体中模拟获得该物流中转场中的历史货物数据和历史分拣数据，并按照步骤S1~S5动态调整蒙特卡洛树获得当前物流中转场中物流分拣系统的最优格口分拣策略。2.根据权利要求1所述的一种基于强化学习和数字孪生体的物流分拣方法，其特征在于：步骤S1中所述物流分拣系统中历史货物数据包括：在设定时间T内，物流分拣系统中每一个包裹所属的包牌编号信息、包牌流向信息和包牌的时效信息；其中，包牌的流向信息包括包裹流向城市代码；包牌的时效信息包括航空件和陆运件。3.根据权利要求1所述的一种基于强化学习和数字孪生体的物流分拣方法，其特征在于：步骤S2中所述分拣机的分拣格口的历史分拣数据包括：分拣格口的数目，分拣格口的锁格次数，以及设定时间T内，各分拣格口在每一次锁格时的锁格时长，分拣格口锁格包含包裹件数。4.根据权利要求1所述的一种基于强化学习和数字孪生体的物流分拣方法，其特征在于：所述步骤S2包括：S201.基于历史格口锁格时间以及锁格件数数据，分别拟合所有格口的锁格件数函数以及锁格时间函数：设定时间T内，每个分拣格口的锁格次数均为M；A1、在第i次锁格时，统计此时各个编号的分拣格口包含的包裹件数，然后利用折现逼近法拟合包裹件数与分拣格口编号的关系函数，记为，该函数中/＞表示分拣格口编号，/＞为编号为/＞的格口对应的包裹件数，x=1,2,…,X，X表示分拣格口的数目，/＞用于表征拟合得到的包裹件数与分拣格口编号的关系；统计此时各个编号的分拣格口的锁格时长，然后利用折现逼近法拟合锁格时长与分拣格口编号的关系函数，记为，该函数中/＞表示分拣格口编号，为编号为/＞的格口对应的锁格时长，x=1,2,…,X，X表示分拣格口的数目，/＞用于表征拟合得到的锁格时长与分拣格口编号的关系；A2、在i=1,2,…,M，重复执行A1，获得每一次锁格时和/＞，即得到了和/＞，取平均得到包裹件数与分拣格口编号的关系函数，记为/＞、/＞；S202.计算格口处理效率函数。5.根据权利要求2或4所述的一种基于强化学习和数字孪生体的物流分拣方法，其特征在于：所述设定时间T为历史的一周时间。6.根据权利要求1所述的一种基于强化学习和数字孪生体的物流分拣方法，其特征在于：所述步骤S3包括：S301.将每一个包裹的包牌信息中的时效信息以及流向信息作为特征向量：假设包牌的时效特征为z，流向特征为w，该包牌的特征向量则为 ；设定聚类的数目N等于格口数目X，通过聚类算法对包牌特征向量进行聚类，得到 N个包牌类别，记为：，各个包牌类别的聚类中心记为/＞，并统计每个包牌类别的包裹占总包裹的比例：/＞；定义各个包牌类别的特征向量，其中/＞表示器k个包牌类别的特征向量，其中/＞表示第n个包牌类别的聚类中心中包含的时效特征；/＞表示第n个包牌类别聚类中心的流向特征，/＞表示第n个包牌类别的包裹占总包裹的比例，；S302.通过计算与每一个包牌类别特征向量与之间的欧式距离，构造第n个包牌类别与所有包牌类别之间的相似度矩阵/＞，该矩阵是一个1*N的矩阵，矩阵中的第k列表示/＞与的欧式距离，/＞，当n=k，时计算得到的欧氏距离为0；通过标准化相似度矩阵后，得到，获取当前包牌类别与所有包牌类别之间的状态转移矩阵/＞，/＞表示取模，该矩阵也是一个1*N的矩阵；S303.在，重复执行步骤S303，得到每一个包牌类别对应的相似度矩阵和状态转移矩阵。7.根据权利要求1所述的一种基于强化学习和数字孪生体的物流分拣方法，其特征在于：所述步骤S4包括：S401.根据包牌类别的相似度矩阵以及状态转移矩阵/＞，设计强化学习策略网络：设计状态-动作集 ，状态n代表当前物流分拣格口所对应的包牌类别n，动作a代表下一个物流分拣格口编号所要安置的包牌类别选择；对于当前状态n：当前物流分拣格口排布的策略网络预估产能价值为：，其中/＞表示/＞中的第k列的元素；下一个物流分拣格口编号所要安置的包牌类别选择的转移概率为：/＞；/＞表示/＞中的第k列元素；S402.设计物流分拣格口预估产能价值网络，对于状态-动作集 ，在满足在当前物流分拣格口所对应的包牌类别n状态下，计算预估产能价值网络的预估产能价值：所述预估产能价值网络中，首先遍历/＞，并在k的每一个取值下，计算/＞，对k在每一个取值下的计算结果进行求和，得到的结果记为/＞，即预估产能价值网络的预估产能价值；S403.构造蒙特卡洛树的叶节点：其中，每个叶节点对应一个分拣格口，且每一个分拣格口中只能有一个包牌类别的包裹，P为先前转移概率，其值等于，/＞为蒙特卡洛树当前叶节点展开前的评估初始值，/＞；/＞为在蒙特卡洛树当前叶节点预估展开后的奖励函数；/＞为蒙特卡洛树当前叶节点展开前的访问次数，/＞蒙特卡洛树当前叶节点展开后的选择次数；/＞为当前节点的加权价值均值：为预设权重；在对于每个蒙特卡洛树节点进行最大预估产能价值评估时，对于当前包牌类别状态n下进行固定次数或者限定固定时间的模拟物流分拣格口排布分配，使得策略网络对于物流分拣格口在包牌类别状态n下的预估产能价值/＞逼近价值网络/＞对于物流分拣格口在包牌类别状态n下的预估产能价值/＞。
说明书desc
技术领域本发明涉及物流分拣领域，特别是涉及一种基于强化学习和数字孪生体的物流分拣方法。背景技术现有的物流分拣方法通常基于分拣机的人工分拣经验规则，通过对历史建包规则、格口分布以及历史分拣数据进行分析，然后进行建模。这样的建模方法有很多缺陷：第一，对分拣机传送带以及格口进行效率评估以及预测分析时，受限于人工分拣的效率因素，建模准确度以及预测精度不高，建模效率低下。第二，现有的分拣计划优化每次只能针对特定场地的特定历史班次，并且普遍依靠人为经验来进行分拣计划的调整，使数字孪生模型的泛化性较弱，难以适应多个中转场场地、不同的班次条件。发明内容本发明的目的在于克服现有技术的不足，提供一种基于强化学习和数字孪生体的物流分拣方法，本发明分别统计格口锁格货物件数和锁格时间数据，采用蒙特卡洛树搜索强化学习算法，提高分拣计划的泛化性，适应不同场地条件因素的中转场物流分拣系统。本发明的目的是通过以下技术方案来实现的：一种基于强化学习和数字孪生体的物流分拣方法，包括以下步骤：S1.采集物流分拣系统中历史货物数据；S2.采集物流分拣系统中分拣机的分拣格口的历史分拣数据，拟合格口处理效率函数；S3.通过聚类算法整合包牌信息，获取包牌类别相似度矩阵和转移概率矩阵；S4.基于包牌类别的相似度和转移概率矩阵设计强化学习策略以及价值网络，构造蒙特卡洛树的叶节点；S5.通过对蒙特卡洛树的叶节点进行展开，获取最优的格口分拣策略；S6.对于不同物流中转场的物流分拣系统，构建数字孪生体，并在数字孪生体中模拟获得该物流中转场中的历史货物数据和历史分拣数据，并按照步骤S1~S5动态调整蒙特卡洛树获得当前物流中转场中物流分拣系统的最优格口分拣策略。本发明的有益效果是：基于物流中转场场地的历史和当前分拣数据，分别统计格口锁格货物件数和锁格时间数据，通过历史格口分拣信息拟合所有格口的分拣效率函数。该方法不再需要对每个场地人员分布信息进行详细分析，只需收集格口历史分拣信息，将不确定的人为分拣效率转化成以格口为单位的可量化数据，提高了建模效率。采用了蒙特卡洛树搜索强化学习算法，提高了优化后的分拣计划的泛化性，可以适应不同场地条件因素的中转场物流分拣系统。附图说明图1为本发明的方法流程图。具体实施方式下面结合附图进一步详细描述本发明的技术方案，但本发明的保护范围不局限于以下所述。针对不同中转场场地的制约条件以及多个分拣优化目标，本发明采用一种基于强化学习和数字孪生的物流分拣方法。分拣格口作为物流分拣机的分拣落袋的最小单位，货物包牌作为中转场制定的货物流向与时效信息的货物聚类，两者的映射关系极大影响着整个物流分拣的效率。本方法通过采集大量物流分拣机的分拣格口的 历史分拣数据，拟合格口处理效率函数，结合分拣机传送带运送速率、上货速率等信息 ，对分拣系统直接建模。考虑到在物流分拣过程中，每一个分拣机格口都有固定容量的存储空间，在存储空间到达上限时会进行锁格人工打包清空处理。所以在物流分拣的过程中，分拣格口的锁格效率决定着物流分拣系统的货物处理效率。如图1所示，该方法包含以下步骤：一种基于强化学习和数字孪生体的物流分拣方法，包括以下步骤：S1.采集物流分拣系统中历史货物数据；所述物流分拣系统中历史货物数据包括：在设定的时间内，物流分拣系统中每一个包裹所属的包牌编号信息、包牌流向信息和包牌的时效信息；其中，包牌的流向信息包括包裹流向城市代码；包牌的时效信息包括航空件和陆运件。此时，还可以所述对历史货物数据进行预处理包括：根据每一个包裹所述包牌的时效信息以及流向信息，对包裹进行初步分类：根据时效信息将包裹初步分类为航空件、陆运件两类；然后根据包裹流向信息，将每一类的包裹的流向按照城市代码进行区域分类。S2.采集物流分拣系统中分拣机的分拣格口的历史分拣数据，拟合格口处理效率函数；步骤S2中所述分拣机的分拣格口的历史分拣数据包括：分拣格口的数目，分拣格口的锁格次数，以及设定时间T内，各分拣格口在每一次锁格时的锁格时长，分拣格口锁格包含包裹件数；所述步骤S2包括：S201.基于历史格口锁格时间以及锁格件数数据，分别拟合所有格口的锁格件数函数以及锁格时间函数/＞：设定时间T内，每个分拣格口的锁格次数均为M；A1、在第i次锁格时，统计此时各个编号的分拣格口包含的包裹件数，然后利用折现逼近法拟合包裹件数与分拣格口编号的关系函数，记为，该函数中x表示分拣格口编号，/＞为编号为x的格口对应的包裹件数，x=1,2,…,X，X表示分拣格口的数目，/＞用于表征拟合得到的包裹件数与分拣格口编号的关系；统计此时各个编号的分拣格口的锁格时长，然后利用折现逼近法拟合锁格时长与分拣格口编号的关系函数，记为，该函数中x表示分拣格口编号，/＞为编号为x的格口对应的锁格时长，x=1,2,…,X，X表示分拣格口的数目，/＞用于表征拟合得到的锁格时长与分拣格口编号的关系；A2、在i=1,2,…,M，重复执行A1，获得每一次锁格时和/＞，即得到了和/＞，取平均得到包裹件数与分拣格口编号的关系函数，记为/＞、/＞；S202.计算格口处理效率函数。所述设定时间T为历史的一周时间；S3.通过聚类算法整合包牌信息，获取包牌类别相似度矩阵和转移概率矩阵；所述步骤S3包括：S301.将每一个包裹的包牌信息中的时效信息以及流向信息作为特征向量：假设包牌的时效特征为z，流向特征为w，该包牌的特征向量则为 ；设定聚类的数目N等于格口数目X，通过聚类算法对包牌特征向量进行聚类，得到N个包牌类别，记为：，各个包牌类别的聚类中心记为/＞，并统计每个包牌类别的包裹占总包裹的比例:；定义各个包牌类别的特征向量，其中/＞表示器k个包牌类别的特征向量，其中/＞表示第n个包牌类别的聚类中心中包含的时效特征；/＞表示第n个包牌类别聚类中心的流向特征，/＞表示第n个包牌类别的包裹占总包裹的比例，；S302.通过计算与每一个包牌类别特征向量与之间的欧式距离，构造第n个包牌类别与所有包牌类别之间的相似度矩阵/＞，该矩阵是一个1*N的矩阵，矩阵中的第k列表示与/＞的欧式距离，/＞，当n=k，时计算得到的欧氏距离为0；通过标准化相似度矩阵后，得到，获取当前包牌类别与所有包牌类别之间的状态转移矩阵/＞，/＞表示取模，该矩阵也是一个1*N的矩阵；S303.在，重复执行步骤S303，得到每一个包牌类别对应的相似度矩阵和状态转移矩阵。S4.基于包牌类别的相似度和转移概率矩阵设计强化学习策略以及价值网络，构造蒙特卡洛树的叶节点；S401.根据包牌类别的相似度矩阵以及状态转移矩阵/＞，设计强化学习策略网络/＞：设计状态-动作集 ，状态n代表当前物流分拣格口所对应的包牌类别n，动作a代表下一个物流分拣格口编号所要安置的包牌类别选择；对于当前状态n：当前物流分拣格口排布的策略网络预估产能价值为：，其中/＞表示/＞中的第k列的元素；下一个物流分拣格口编号所要安置的包牌类别选择的转移概率为：/＞；/＞表示/＞中的第k列元素；S402.设计物流分拣格口预估产能价值网络，对于状态-动作集 ，在满足在当前物流分拣格口所对应的包牌类别n状态下，计算预估产能价值网络的预估产能价值：所述预估产能价值网络中，首先遍历/＞，并在k的每一个取值下，计算/＞，对k在每一个取值下的计算结果进行求和，得到的结果记为/＞，即预估产能价值网络的预估产能价值；S403.构造蒙特卡洛树的叶节点：其中，每个叶节点对应一个分拣格口，且每一个分拣格口中只能有一个包牌类别的包裹，P为先前转移概率，其值等于，/＞为蒙特卡洛树当前叶节点展开前的评估初始值，/＞；/＞为在蒙特卡洛树当前叶节点预估展开后的奖励函数；/＞为蒙特卡洛树当前叶节点展开前的访问次数，/＞蒙特卡洛树当前叶节点展开后的选择次数；Q为当前节点的加权价值均值：；为预设权重；在对于每个蒙特卡洛树节点进行最大预估产能价值评估时，对于当前包牌类别状态n下进行固定次数或者限定固定时间的模拟物流分拣格口排布分配，使得策略网络对于物流分拣格口在包牌类别状态n下的预估产能价值/＞逼近价值网络/＞对于物流分拣格口在包牌类别状态n下的预估产能价值/＞。S5.通过对蒙特卡洛树的叶节点进行展开，获取最优的格口分拣策略；在本申请的实施例中，所述步骤S5中按照选择、拓展、评估、回溯的流程对蒙特卡洛树的节点进行展开，其中：选择流程如下：给定根节点位置，探寻子节点信息，根据多项式置信选择规则当前最优子节点，其策略为：其中常数是决定着选择子节点时拓展程度，在选择的过程中初始时会选择有着更高选择概率的节点，但在蒙特卡洛树的展开过程中逐渐的选择有着更高价值的节点；拓展流程如下：在蒙特卡洛树展开的过程中，使用的是S4中策略网络，策略网络/＞根据包牌类别转移矩阵给出先前转移概率P，一直执行到蒙特卡洛树的下一个叶节点或者直至蒙特卡洛树的完全展开；评估流程如下：在蒙特卡洛树展开的过程中，从叶节点开始，一直持续到蒙特卡洛树的完全展开，在完全展开时根据当前分支的包裹格口分配以及奖励函数获得当前分支选择的奖励值；奖励函数的构造基于排队论理论，根据中转场分拣系统硬件设施的物理数据得到传送带上的平均速率为v，根据每个包牌类别占总包裹的比例为，且每个包牌类别占总包裹比例皆为独立同分布的，得到相应的每个包牌类别的格口到达速率：基于S2中根据历史格口锁格时间以及锁格件数数据所得到的格口处理效率函数，以及每个包牌类别所根据分配占用的格口x，得到每个包牌类别在物流分拣的队伍长度：通过构造奖励函数，极大程度的加快了蒙特卡洛树每一个分支评估过程，也极大程度的减少了调用中转场物流分拣数字孪生系统的仿真次数，提升了基于历史数据的分拣优化速度；回溯流程如下：在蒙特卡洛树完全展开后，从蒙特卡洛树的最底层节点向上更新选择次数，/＞以及对应的叶节点评估值和展开策略下的奖励值/＞，/＞直到当前叶节点，通过回溯流程，计算得到当前叶节点的加权价值均值Q：进行多轮蒙特卡洛树的展开探索交互后，当前所有节点的累积奖励值的变化低于预设阈值时，在当前根节点的蒙特卡洛树展开路径为最优路径，即最优格口分拣策略。由于每个叶节点对应着一个分拣格口，所以得到了最优格口分拣策略。S6.对于不同物流中转场的物流分拣系统，构建数字孪生体，并在数字孪生体中模拟获得该物流中转场中的历史货物数据和历史分拣数据，并按照步骤S1~S5动态调整蒙特卡洛树获得当前物流中转场中物流分拣系统的最优格口分拣策略。构造物流中转场物流分拣数字孪生体时是基于历史数据进行的，并串联融合物流中转场分拣机共有的运行机理模型，包含：传送带模型、分拣格口模型、包裹上货架模型、包裹扫描模型等。因为不同物流中转场的场地条件不同，所以在构造物流中转场物流分拣数字孪生体时，在共有运行机理模型中添加可改变的参数，例如：格口排布的数量差异、包裹上货架数量差异、传送带设定固定速率差异等。在固定场地下使用的蒙特卡洛树搜索所得到物流格口分拣策略不具有相应的普适性。在设计蒙特卡路树搜索算法的reward函数，是基于排队论M/G/n的理论模型所得，在面对不同物流中转场场地差异存在对于固定参数的变化。通过应用实际物流分拣的测试指标到物流分拣数字孪生体中进行模拟，例如：峰值产能、包裹半圈落入格口比例、平均产能等指标，动态调整蒙特卡洛树搜索算法中相应参数，例如：格口排布的数量差异对应的包牌类别总数量n，包裹上货架数量差异对应的包裹上货速率，传送带设定固定速率差异对应每个物流分拣格口的包裹到达速率等，从而获得对应最优分拣策略。以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
