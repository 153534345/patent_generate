标题title
一种基于深度学习的油气井产量预测方法与预测系统
摘要abst
本申请属于石油开采技术领域，具体公开了一种基于深度学习的油气井产量预测方法，包括如下步骤：获取现存油气井的第一生产数据和第一产量数据，判定待测油气井的类型，根据类型筛选第一生产数据，并与第一产量数据组成训练集；通过训练集训练预测模型，以获得第一生产数据和第一产量数据的关联关系；将第二生产数据输入预测模型并通过关联关系获得第二产量数据；将第二生产数据通过不同的时间尺度分割并处理生成预测生产数据，将预测生产数据输入预测模型并根据关联关系生成预测产量数据；具有如下优点：对于投产时间短、自身历史数据少、生产规律不明显的井，借用生产历史较长井的生产规律，对目标井进行产量预测，使之具备更强的适应性。
权利要求书clms
1.一种基于深度学习的油气井产量预测方法，其特征在于，包括如下步骤：获取现存油气井的第一生产数据和第一产量数据，判定待测油气井的类型，根据所述类型筛选所述第一生产数据，并与所述第一产量数据组成训练集；构建预测模型，通过所述训练集训练所述预测模型，以获得所述第一生产数据和所述第一产量数据的关联关系；获取所述待测油气井过往的第二生产数据，将所述第二生产数据输入所述预测模型，并通过所述关联关系获得第二产量数据；以及将所述第二生产数据通过不同的时间尺度分割并处理生成预测生产数据，将所述预测生产数据输入所述预测模型并根据所述关联关系生成预测产量数据，通过所述第二产量数据和所述预测产量数据生成待测油气井的产量预测结果。2.根据权利要求1所述的油气井产量预测方法，其特征在于，所述的根据所述类型筛选所述第一生产数据的步骤，具体包括：在第一预设范围内对所述现存油气井和所述待测油气井进行匹配；对匹配后的所述现存油气井和所述待测油气井，在第二预设范围内获取相同的生产指标；根据所述生产指标在所述第一生产数据中筛选匹配。3.根据权利要求2所述的油气井产量预测方法，其特征在于，所述第二预设范围包括：套压、油压、井口温度、水油比、气油比和工作制度；其中，所述工作制度包括油嘴、冲程、冲次和电泵频率；以及当所述现存油气井和所述待测油气井匹配时，获取的所述生产指标至少为三个；当所述现存油气井和所述待测油气井不匹配时，获取的所述生产指标至少为五个。4.根据权利要求2所述的油气井产量预测方法，其特征在于，所述的将所述第二生产数据通过不同的时间尺度分割并处理生成预测生产数据的步骤，具体包括：对不同时间尺度设置等量的分割片，在不同时间尺度下通过所述分割片分别分割所述第二生产数据，以获得分割数据；根据所述生产指标之间对生产状态的影响关系，通过所述分割数据构建各个时间尺度下分割片的因果拓扑图；将所述因果拓扑图通过卷积处理以获得所述预测生产数据。5.根据权利要求4所述的油气井产量预测方法，其特征在于，对于每个时间尺度下T个连续所述分割片，所述的将所述因果拓扑图通过卷积处理以获得所述预测生产数据的步骤，具体包括：令T=1表示时间开端的分割片，设定前一个分割片的总隐藏层状态向量；对当前所述分割片的油气井生产状态向量、及其前一个分割片的总隐藏层状态向量与历史因果图采用图卷积神经网络处理，以获得各时间尺度下的隐藏层状态向量；设计可训练嵌入向量，对每个时间尺度的历史隐藏层状态向量获得未来因果图矩阵；根据所有所述未来因果图矩阵，分别对当前所述分割片的油气井生产状态向量分别进行单图因果卷积，设定各时间尺度下的可训练自适应参数，并对单图因果卷积的结果进行动态加权，以获得当前所述分割片的总隐藏层状态向量；令T=T+1并重新进行图卷积神经网络处理，直至所有分割片均被处理，将当前分割片的总隐藏层状态向量转换为单维度特征矩阵，并作为下一分割片的所述预测生产数据输出。6.根据权利要求5所述的油气井产量预测方法，其特征在于，将所述预测生产数据划分入当前分割片，以预测下一分割片的预测生产数据。7.根据权利要求4所述的油气井产量预测方法，其特征在于，所述的根据所述生产指标之间对生产状态的影响关系，通过油气井生产状态向量构建各个时间尺度下分割片的因果拓扑图的步骤，具体包括：根据每个生产条件对生产状态的影响关系，并通过所述分割数据在不同时间尺度下构建油气井生产状态向量序列；消除每个生产条件在不同时间尺度下油气井生产状态向量序列的时间趋势化影响；判定各所述生产条件之间是否具有生产状态的影响关系，以构建各时间尺度下分割片的因果拓扑图。8.用于实施如权利要求1-7中任一项所述油气井产量预测方法的预测系统，其特征在于，包括：数据收集筛选模块，用于获取现存油气井的第一生产数据和第一产量数据判定待测油气井的类型，根据所述类型筛选所述第一生产数据，并与所述第一产量数据组成训练集；模型构建训练模块，用于构建预测模型，通过所述训练集训练所述预测模型，以获得所述第一生产数据和所述第一产量数据的关联关系；预测模块，用于获取所述待测油气井过往的第二生产数据，将所述第二生产数据输入所述预测模型，并通过所述关联关系获得第二产量数据；及分割模块，用于将所述第二生产数据通过不同的时间尺度分割并处理生成预测生产数据，将所述预测生产数据输入所述预测模型并根据所述关联关系生成预测产量数据，通过所述第二产量数据和所述预测产量数据生成待测油气井的产量预测结果。9.一种电子设备，包括存储器、处理器以及储存在所述存储器中并且能够在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1至7中任一项所述方法的步骤。10.一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至7中任一项所述方法的步骤。
说明书desc
技术领域本申请涉及石油开采技术领域，具体而言，涉及一种基于深度学习的油气井产量预测方法及预测系统。背景技术产量预测结果是油田制定规划计划、配产配注方案和开发调整方案的重要依据。随着油田对产量精细化管理的需求越来越高，对产量预测的准确性和效率也提出了更高的要求，现有方法中例如包含针对常规油气藏的Aprs递减法和针对非常规油气藏的递减分析方法，需要较长时间的生产数据，需要出现明显的递减趋势，对噪点处理能力较弱，假设条件多，输入的油藏参数不确定性较大，预测精度低，不能考虑工作制度调整的影响；因此常用的产量预测方法已不能很好地满足开发生产研究的需求。为此提出一种基于深度学习的油气井产量预测方法，以解决上述提出的问题。发明内容本申请旨在提供一种基于深度学习的油气井产量预测方法及系统，以解决或改善上述技术问题中的至少之一。有鉴于此，本申请的第一方面在于提供一种基于深度学习的油气井产量预测方法。本申请的第二方面在于提供一种预测系统。本申请的第三方面在于提供一种电子设备。本申请的第四方面在于提供一种计算机可读存储介质。本申请的第一方面提供了一种基于深度学习的油气井产量预测方法，包括如下步骤：获取现存油气井的第一生产数据和第一产量数据，判定待测油气井的类型，根据所述类型筛选所述第一生产数据，并与所述第一产量数据组成训练集；构建预测模型，通过所述训练集训练所述预测模型，以获得所述第一生产数据和所述第一产量数据的关联关系；获取所述待测油气井过往的第二生产数据，将所述第二生产数据输入所述预测模型，并通过所述关联关系获得第二产量数据；将所述第二生产数据通过不同的时间尺度分割并处理生成预测生产数据，将所述预测生产数据输入所述预测模型并根据所述关联关系生成预测产量数据，通过所述第二产量数据和所述预测产量数据生成待测油气井的产量预测结果。上述任一技术方案中，所述的根据所述类型筛选所述第一生产数据的步骤，具体包括：在第一预设范围内对现存油气井和待测油气井进行匹配；对匹配后的所述现存油气井和所述待测油气井，在第二预设范围内获取相同的生产指标；根据所述生产指标在所述第一生产数据中筛选匹配。上述任一技术方案中，所述第二预设范围包括：套压、油压、井口温度、水油比、气油比和工作制度；其中，所述工作制度包括油嘴、冲程、冲次和电泵频率；以及当所述现存油气井和所述待测油气井不匹配时，获取的所述生产指标至少为三个；当所述现存油气井和所述待测油气井不匹配时，获取的所述生产指标至少为五个。上述任一技术方案中，所述的将所述第二生产数据通过不同的时间尺度分割并处理生成预测生产数据的步骤，具体包括：对不同时间尺度设置等量的分割片，在不同时间尺度下通过所述分割片分别分割所述第二生产数据，以获得分割数据；根据所述生产指标之间对生产状态的影响关系，通过所述分割数据构建各个时间尺度下分割片的因果拓扑图；将所述因果拓扑图通过卷积处理以获得所述预测生产数据。上述任一技术方案中，对于每个时间尺度下T个连续所述分割片，所述的将所述因果拓扑图通过卷积处理以获得所述预测生产数据的步骤，具体包括：令T=1表示时间开端的分割片，设定前一个分割片的总隐藏层状态向量；对当前所述分割片的油气井生产状态向量、及其前一个分割片的总隐藏层状态向量与历史因果图采用图卷积神经网络处理，以获得各时间尺度下的隐藏层状态向量；设计可训练嵌入向量，对每个时间尺度的历史隐藏层状态向量获得未来因果图矩阵；根据所有所述未来因果图矩阵，分别对当前所述分割片的油气井生产状态向量分别进行单图因果卷积，设定各时间尺度下的可训练自适应参数，并对单图因果卷积的结果进行动态加权，以获得当前所述分割片的总隐藏层状态向量；令T=T+1并重新进行图卷积神经网络处理，直至所有分割片均被处理，将当前分割片的总隐藏层状态向量转换为单维度特征矩阵，并作为下一分割片的所述预测生产数据输出。上述任一技术方案中，将所述预测生产数据划分入当前分割片，以预测下一分割片的预测生产数据。上述任一技术方案中，所述的根据所述生产指标之间对生产状态的影响关系，通过油气井生产状态向量构建各个时间尺度下分割片的因果拓扑图的步骤，具体包括：根据每个生产条件对生产状态的影响关系，并通过所述分割数据在不同时间尺度下构建油气井生产状态向量序列；消除每个生产条件在不同时间尺度下油气井生产状态向量序列的时间趋势化影响；判定各所述生产条件之间是否具有生产状态的影响关系，以构建各时间尺度下分割片的因果拓扑图。本发明的第二方面提供了一种预测系统，包括：数据收集筛选模块，用于获取现存油气井的第一生产数据和第一产量数据，，判定待测油气井的类型，根据所述类型筛选所述第一生产数据，并与所述第一产量数据组成训练集；模型构建训练模块，用于构建预测模型，通过所述训练集训练所述预测模型，以获得所述第一生产数据和所述第一产量数据的关联关系；预测模块，用于获取所述待测油气井过往的第二生产数据，将所述第二生产数据输入所述预测模型，并通过所述关联关系获得第二产量数据；以及分割模块，用于将所述第二生产数据通过不同的时间尺度分割并处理生成预测生产数据，将所述预测生产数据输入所述预测模型并根据所述关联关系生成预测产量数据，通过所述第二产量数据和所述预测产量数据生成待测油气井的产量预测结果。本发明的第三方面提供了一种电子设备，包括存储器、处理器以及存储在存储器中并且可在处理器上运行的计算机程序，该处理器执行计算机程序时实现上述方法的步骤。本发明的第四方面提供了一种计算机可读存储介质，该计算机可读存储介质存储有计算机程序，该计算机程序被处理器执行时实现上述方法的步骤。本申请与现有技术相比所具有的有益效果：提出一种新型的基于深度学习的产量预测方法，训练井的整个生产历史，并利用套压、油压、水油比、气油比、工作制度等指标作为约束条件，从而实现更准确的产量预测。油井产量数据通常具有明显的时序性，通过处理处理时间序列数据的神经网络，可以有效地捕捉产量随时间变化的模式，包括趋势、季节性和周期性。通过存储和检索长期依赖关系，能够考虑过去较长时间内的数据，从而更好地预测未来的产量，并且油井产量的变化通常是非线性的，通过非线性建模能力可以更好地适应这种非线性关系；油井产量数据可能包含缺失或异常值，通过记忆单元的状态来处理缺失数据，并对异常值具有一定的鲁棒性；可以自动学习在不同时间步上对产量预测有影响的特征，无需手动特征工程。减轻了特征工程的负担；具有较好的泛化性，可以适应不同油井和不同地理区域的产量预测任务，而不需要重新训练模型。可以用于实时或近实时的产量预测，对于油田运营和决策制定非常有用，并且可以通过不断迭代和调优LSTM模型来提高其性能，以适应不断变化的油井产量数据。根据本申请的实施例的附加方面和优点将在下面的描述部分中变得明显，或通过根据本申请的实施例的实践了解到。附图说明本申请的上述和/或附加的方面和优点从结合下面附图对实施例的描述中将变得明显和容易理解，其中：图1为本申请的方法步骤流程图；图2为以30天为尺度在150-180天预测结果示意图；图3为以30天为尺度在180-210天预测结果示意图；图4为以30天为尺度在210-240天预测结果示意图；图5为以30天为尺度在240-270天预测结果示意图；图6为以30天为尺度在270-300天预测结果示意图；图7为以30天为尺度在300-330天预测结果示意图；图8为本申请的预测系统结构框图；图9为本申请的一种电子设备的结构示意图。具体实施方式为了可以更清楚地理解本申请的上述目的、特征和优点，下面结合附图和具体实施方式对本申请进行进一步的详细描述。需要说明的是，在不冲突的情况下，本申请的实施例及实施例中的特征可以相互组合。在下面的描述中阐述了很多具体细节以便于充分理解本申请，但是，本申请还可以采用其他不同于在此描述的其他方式来实施，因此，本申请的保护范围并不受下面公开的具体实施例的限制。请参阅图1-9，下面描述本申请一些实施例的一种基于深度学习的油气井产量预测方法。本申请第一方面的实施例提出了一种基于深度学习的油气井产量预测方法。在本申请的一些实施例中，如图1-7所示，该油气井产量预测方法包括：S101，获取现存油气井的第一生产数据和第一产量数据，判定待测油气井的类型，根据类型筛选第一生产数据，并与第一产量数据组成训练集。具体而言，在第一预设范围内对现存油气井和待测油气井进行匹配。对匹配后的现存油气井和待测油气井，在第二预设范围内获取相同的生产指标。根据生产指标在第一生产数据中筛选匹配。这里，第一预设范围内的匹配：首先，确定第一预设范围的条件，可以包括地理位置、地质条件、井口特征等。针对待测油气井，使用这些条件在现存油气井数据库中进行匹配。将产生一组与待测油气井在第一预设范围内匹配的现存油气井。第二预设范围内的生产指标获取：定义第二预设范围，包括时间范围和生产指标范围。对于匹配后的现存油气井和待测油气井，从第一生产数据中提取相同时间范围内的生产指标数据，可以包括每日产量、产液量、产气量、注水量等。根据生产指标筛选匹配项：对于每个匹配的现存油气井和待测油气井，比较它们的生产指标是否在第二预设范围内。例如，检查它们的产量是否在一定范围内。将符合第二预设范围内生产指标的匹配项筛选出来。上述可知，通过第一预设范围内的条件，可以找到与待测油气井具有相似特征的现存油气井，从而建立了数据匹配的基础。获取匹配油气井的生产指标数据可以帮助建立现存和待测井之间的数据关联，以便进一步分析和比较。第二预设范围内的生产指标范围可以用于筛选出符合特定条件的匹配项。有助于缩小关注范围，使分析更加精确。通过对匹配项进行生产指标筛选，可以为决策制定提供有关现存和待测油气井的生产性能和可行性的信息。综上所述，有助于将现存油气井与待测油气井进行匹配和关联，以便更好地理解其生产性能和潜力，为决策制定提供数据支持。同时，它可以帮助在大量数据中筛选出最相关的信息，减少了决策制定的复杂性。具体而言，第二预设范围包括：套压、油压、井口温度、水油比、气油比和工作制度；其中，工作制度包括油嘴、冲程、冲次和电泵频率。当现存油气井和待测油气井匹配时，获取的生产指标至少为三个。当现存油气井和待测油气井不匹配时，获取的生产指标至少为五个。这里，针对匹配的现存油气井和待测油气井，获取第二预设范围内的生产指标数据，包括套压、油压、井口温度、水油比、气油比以及工作制度；针对每对匹配的现存油气井和待测油气井，比较它们的生产指标，逐一检查是否满足第二预设范围内的条件。对于每个生产指标，检查其是否在合理的范围内或满足特定条件。判断匹配项的数量：如果在第二预设范围内的条件下，获取的生产指标数量少于三个，那么可以考虑现存油气井和待测油气井匹配，并采取相应的措施。如果获取的生产指标数量至少为五个，那么可以继续进行后续的分析和决策。上述可知，通过比较多个生产指标，可以更精确地判断现存油气井和待测油气井是否匹配。获取足够的生产指标数据可以为进一步的决策提供更充分的依据。有助于确定是否要对待测油气井采取特定的操作或维护措施。要求获取多个生产指标可以提高数据质量，减少由于数据不完整或不准确而导致的误判。当获取的生产指标数量不足时，可以考虑采取额外的措施来验证或完善数据，以降低决策的风险。综上所述，根据油气井是否匹配，选择不同数量的生产指标，使方法更为灵活，适应不同的场景。对于匹配的油气井对，选择更多的生产指标可以增加分析的准确性。对于不匹配的油气井对，选择较少的生产指标，节省分析时间和资源。第二预设范围涵盖了油气井的多个关键生产指标，有助于提供一个全面的井状况分析。此方法提供了一个明确的框架，可以根据需要容易地添加或减少生产指标。通过根据油气井的匹配情况选择不同的生产指标，决策者可以更快地得到所需的信息，并据此做出决策。，通过考虑多个生产指标并根据数量来判断匹配情况，可以更好地管理和分析油气井的生产数据，以支持决策制定和维护操作。有助于提高生产效率和减少潜在的风险。S102，构建预测模型，通过训练集训练预测模型，以获得第一生产数据和第一产量数据的关联关系。具体包括如下步骤：获取训练数据：首先，需要收集现存油气井的第一生产数据和第一产量数据。这些数据包括但不限于日产量、产液量、产气量、注水量等。通过确定的第一预设范围内的条件在现存油气井数据库中进行匹配，以找到与待测油气井具有相似特征的现存油气井。数据匹配与筛选：在第二预设范围内，从匹配后的现存油气井和待测油气井中获取相同的生产指标。这些生产指标包括套压、油压、井口温度、水油比、气油比以及工作制度。根据这些生产指标，在第一生产数据中筛选匹配项。比如，检查匹配油气井的产量是否在特定范围内，以确保数据的相关性和准确性。训练集的构建：从上述步骤中筛选出的数据构成训练集。训练集中的数据应包括那些满足第二预设范围内生产指标的匹配项。这样的筛选有助于提供关于现存和待测油气井的生产性能和可行性的信息，进而支持决策制定。预测模型的构建与训练：使用这个训练集来构建和训练一个深度学习预测模型。旨在理解和捕捉第一生产数据与第一产量数据之间的复杂关系。模型的设计可能包括使用多层神经网络、卷积神经网络或循环神经网络等深度学习架构。模型验证和调整：在模型训练过程中，需要不断地验证和调整模型以确保其预测准确性。涉及到使用不同的参数设置、层结构和激活函数等，以达到最佳的学习效果。上述可知：训练好的模型可以用于预测未来的油气井产量，为实际的开采计划和运营决策提供支持。基于数据驱动的方法可以提高预测的准确性和效率，特别是在处理复杂的油田数据时。具体地，关联关系是指第一生产数据与第一产量数据之间的相互联系，该关联关系为后续的预测提供了基础，并确保预测结果的可靠性。通过进行关联分析，可以更好地理解生产数据与产量之间的因果关系，通过分析历史生产数据与产量数据之间的相互关系，可以建立一个模型，用于预测未来的产量。关联关系包括但不限于：生产指标与产量的直接关系：比如，日产量、产液量等直接影响总产量。间接影响因素：如某些生产条件可能间接影响产量。时间序列分析：考虑时间因素，分析生产指标随时间的变化如何影响总产量。S103，获取待测油气井过往的第二生产数据，将第二生产数据输入预测模型，并通过关联关系获得第二产量数据。具体包括如下步骤：获取第二生产数据：首先，需要从待测油气井中收集过去的第二生产数据。这些数据可能包括但不限于每日产量、产液量、产气量、注水量等关键生产指标。数据处理和时间尺度分割：接着，将第二生产数据通过不同的时间尺度进行分割和处理，以生成预测生产数据。涉及将数据分割成等量的片段，每个片段代表一个特定时间尺度内的生产数据。构建因果拓扑图：基于生产指标之间的因果关系，在各个时间尺度下对分割片构建因果拓扑图。需要分析历史数据中的相关性和因果性。应用卷积处理：将构建的因果拓扑图进行卷积处理，以获得预测生产数据。卷积处理可能包括使用卷积神经网络或其他时间序列预测方法。细粒度时间尺度分析：通过不同时间尺度的等量分割片进行数据分割，可以对油气井的生产状态进行更为细致和深入的分析，捕捉到可能被大尺度忽视的变化。明确因果关系：通过因果拓扑图直观地表示和理解生产指标之间的关联和影响，为后续的分析和预测提供了强有力的支撑。上述可知，卷积处理能够快速地从因果拓扑图中提取重要的特征，使得预测更为准确和高效；可以根据实际需求灵活地选择不同的时间尺度，满足不同的分析和预测需求；通过细粒度的时间尺度分析和因果拓扑图，可以充分利用历史生产数据，更好地理解油气井的生产特性和趋势。S104，将第二生产数据通过不同的时间尺度分割并处理生成预测生产数据，将预测生产数据输入预测模型并根据关联关系生成预测产量数据，通过第二产量数据和预测产量数据生成待测油气井的产量预测结果。具体而言，对不同时间尺度设置等量的分割片，在不同时间尺度下通过分割片分别分割第二生产数据，以获得分割数据。根据生产指标之间对生产状态的影响关系，通过分割数据构建各个时间尺度下分割片的因果拓扑图。将因果拓扑图通过卷积处理以获得预测生产数据。这里，等量分割片的设置：针对不同的时间尺度，确定等量的分割片数量和时长。这些分割片将用于分割第二生产数据。分割数据获取：使用等量的分割片将第二生产数据分割成小段。每个分割片代表了一个特定时间尺度内的生产数据。因果拓扑图构建：针对每个时间尺度下的分割片，基于生产指标之间的因果关系构建因果拓扑图。可以通过分析历史数据中的相关性和因果性来实现。预测生产数据：将构建的因果拓扑图传入卷积处理中，以获得对未来生产数据的预测。卷积处理可能包括卷积神经网络或其他时间序列预测方法。上述可知，通过不同时间尺度的等量分割片分割数据，可以对油气井的生产状态进行更为细致和深入的分析，捕获到可能被大尺度忽视的变化。明确的因果关系：通过因果拓扑图，可以直观地表示和理解生产指标之间的关联和影响，为后续的分析和预测提供强有力的支撑。高效的数据转化：卷积处理可以快速地从因果拓扑图中提取重要的特征，使得预测更为准确和高效。灵活的时间尺度分析：可以根据实际需求灵活地选择不同的时间尺度，满足不同的分析和预测需求。充分利用历史数据：通过细粒度的时间尺度分析和因果拓扑图，可以充分利用历史生产数据，更好地理解油气井的生产特性和趋势。具体地，因果拓扑图为一种因果拓扑关系，标识各个生产指标之间的相互作用影响关系，具体的影响关系需要根据不同的油井的生产数据进行获取。综上所述，将不同时间尺度的生产数据进行分析、建模和预测，有助于提高生产过程的效率、质量和可控性，同时也为实时监测和决策提供了强有力的工具。具体而言，对于每个时间尺度下T个连续分割片，将因果拓扑图通过卷积处理以获得预测生产数据的步骤，具体包括：令T=1表示时间开端的分割片，设定前一个分割片的总隐藏层状态向量。总隐藏层状态向量是指将不同时间尺度下分割片的隐藏层状态向量综合在一起的表示，综合了来自多个分割片的信息，反映了油气井生产状态随时间的整体变化和趋势，且时间尺度采用日、周、月和年尺度。对当前分割片的油气井生产状态向量、及其前一个分割片的总隐藏层状态向量与历史因果图采用图卷积神经网络处理，以获得各时间尺度下的隐藏层状态向量。设计可训练嵌入向量，对每个时间尺度的历史隐藏层状态向量获得未来因果图矩阵、/＞、/＞和/＞；具体获取步骤为：；；；；其中，为激活函数，/＞为激活函数，T为矩阵转置符号，分别为各时间尺度下的加权向量、/＞，/＞为隐藏层输出维度，N为生产条件，/＞和/＞为设计的可训练嵌入向量，并借助特征增强获得加权向量。根据所有未来因果图矩阵，分别对当前分割片的油气井生产状态向量分别进行单图因果卷积，设定各时间尺度下的可训练自适应参数，并对单图因果卷积的结果进行动态加权，以获得当前分割片的总隐藏层状态向量。具体地，总隐藏层状态向量为，以及具有下述求解公式：；其中，、/＞、/＞和/＞分别为各时间尺度下的隐藏层状态向量，具体为年、月、周和日；/＞、/＞、/＞和/＞分别为设计的可训练自适应参数；以年尺度下的总隐藏层状态向量为例，具体公式为：；其中，为第k个时间片的隐藏层状态、/＞为激活函数、/＞为因果单图卷积、/＞为第k-1个时间片的隐藏层状态、/＞为向量拼接、/＞为生产状态之间的影响向量，并借助单图因果卷积以获得各时间尺度下的隐藏层状态向量。令T=T+1并重新进行图卷积神经网络处理，直至所有分割片均被处理，将当前分割片的总隐藏层状态向量转换为单维度特征矩阵，并作为下一分割片的预测生产数据输出，具体为：；其中，为全连接层、/＞为单维度特征矩阵、/＞为当前时间片的隐藏层状态向量、/＞为激活函数。单维度特征矩阵是通过结合历史隐藏层状态向量和嵌入向量生成的，它反映了各个生产指标在不同时间尺度上的因果关系和相互作用，并允许深度学习模型有效地理解和预测油气井的产量，通过捕捉油气井生产数据中的复杂模式和趋势。这里，构建图结构：将历史因果图表示成一个图结构，其中每个节点表示一个相关的生产指标或变量。使用历史数据中的因果关系信息，确定图中节点之间的边。节点特征表示：为图中的每个节点创建节点特征表示。这可以包括生产状态的时间序列数据、嵌入向量或其他相关特征。输入数据准备：将当前分割片的油气井生产状态向量和前一个分割片的总隐藏层状态向量表示为图中的节点，并赋予适当的节点特征。图卷积神经网络处理：使用GCN模型处理构建好的图结构。在每个GCN层中，每个节点都会聚合其相邻节点的信息，通过权重连接计算出新的节点表示。隐藏层状态向量提取：在GCN模型的最后一层，提取当前分割片中油气井生产状态向量和前一个分割片的总隐藏层状态向量所对应的节点表示。这些节点表示可以被认为是各时间尺度下的隐藏层状态向量。输出隐藏层状态向量：将提取的隐藏层状态向量用于后续的预测或加权操作。选择嵌入向量维度：确定每个嵌入向量的维度，决定了嵌入向量的表示能力和复杂性。初始化嵌入向量：针对每个时间尺度，为历史隐藏层状态向量中的每个节点初始化一个嵌入向量。这些嵌入向量是模型的可训练参数，可以随机初始化。构建未来因果图矩阵：对于每个时间尺度，根据历史隐藏层状态向量和嵌入向量，构建未来因果图矩阵。对于每个节点，将其历史隐藏层状态向量与相应的嵌入向量相连接，形成一个扩展的节点表示。使用这些扩展的节点表示计算未来因果图矩阵。可以通过矩阵乘法、注意力机制或其他方法来完成，以考虑不同节点之间的影响关系。嵌入向量训练：在训练模型的过程中，这些嵌入向量将会被调整，以最小化预测误差或优化目标。模型会学习哪些嵌入向量更适合用于构建未来因果图，从而提高预测的准确性。使用未来因果图矩阵：构建好的未来因果图矩阵可以用于后续的预测任务。可以将其作为模型的输入之一，结合当前分割片的生产状态向量，用于预测未来的生产数据。准备未来因果图矩阵：使用之前构建的未来因果图矩阵，其中包含了不同时间尺度下的因果关系信息。单图因果卷积：对于每个时间尺度，将当前分割片的油气井生产状态向量与相应时间尺度的未来因果图矩阵进行单图因果卷积。单图因果卷积的目标是根据因果图关系更新当前分割片的生产状态向量。可训练自适应参数：为每个时间尺度设置可训练的自适应参数，用于动态调整每个时间尺度的因果卷积结果的权重。动态加权：将每个时间尺度下的因果卷积结果与对应的自适应参数相乘，以进行动态加权。动态加权的目的是将不同时间尺度下的信息融合，以获得当前分割片的总隐藏层状态向量。总隐藏层状态向量：将动态加权的结果汇总，得到当前分割片的总隐藏层状态向量。可以被用于后续的预测任务或其他分析。令T=T+1，表示将处理下一个时间步的分割片。重新进行图卷积神经网络处理：使用更新后的总隐藏层状态向量，作为新的输入，重新进行图卷积神经网络的处理。包括构建新的未来因果图矩阵和应用GCN模型。在新的时间步T下，将当前分割片的生产状态向量与前一个分割片的总隐藏层状态向量一起输入GCN模型。总隐藏层状态向量转换：在每个时间步T下，GCN模型将生成一个新的总隐藏层状态向量，反映了当前分割片的状态。单维度特征矩阵：将当前分割片的总隐藏层状态向量转换为单维度特征矩阵。可以通过简单的降维操作或其他转换方法来实现。单维度特征矩阵是一个向量，包含了模型对当前分割片的预测生产数据的估计。输出预测生产数据：将单维度特征矩阵作为下一分割片的预测生产数据的输出。输出可以用于监测、控制或进一步的分析。具体而言，将预测生产数据划分入当前分割片，以预测下一分割片的预测生产数据。这里，在前一个步骤中，已经获得了当前分割片的预测生产数据，它是一个单维度特征矩阵，代表了模型对当前时间步的生产数据的估计。将上一步中获得的预测生产数据作为输入，用于预测下一分割片的预测生产数据。在下一个时间步T+1下，使用上一步中的预测生产数据作为新的输入，重新进行图卷积神经网络的处理。包括构建新的未来因果图矩阵和应用GCN模型。在新的时间步T+1下，GCN模型将生成新的总隐藏层状态向量，代表了下一分割片的状态，以及相应的预测生产数据。重复上述步骤，将新的预测生产数据用于预测下一个时间步的数据。可以连续进行，以进行多个时间步的生产数据预测。上述可知，通过将上一个时间步的预测结果用作下一个时间步的输入，模型可以连续地进行预测，考虑了时间上的动态变化。模型可以根据前一个时间步的预测结果调整预测，从而更好地适应数据的变化。适用于需要实时数据预测的应用场景，支持实时决策和监测。综上所述，递归的过程允许模型在连续时间步内进行生产数据预测，考虑了时间上的动态变化和实时性需求，有助于更准确地预测未来的生产数据。具体而言，根据生产指标之间对生产状态的影响关系，通过油气井生产状态向量构建各个时间尺度下分割片的因果拓扑图的步骤，具体包括：根据每个生产条件对生产状态的影响关系，并通过分割数据在不同时间尺度下构建油气井生产状态向量序列。消除每个生产条件在不同时间尺度下油气井生产状态向量序列的时间趋势化影响。判定各生产条件之间是否具有生产状态的影响关系，若是则赋值为1，若否则赋值为0，以构建各时间尺度下分割片的因果拓扑图。这里，对于每个生产条件，根据其对生产状态的影响关系，使用分割数据在不同时间尺度下构建油气井生产状态向量序列。生产状态向量包含了不同时间尺度下的生产条件信息，可以看作是一个时间序列。为了消除每个生产条件在不同时间尺度下的时间趋势化影响，可以应用时间序列分析方法，如差分或滤波，将原始数据转化为稳定的、无时间趋势的序列。有助于更准确地捕捉生产条件对生产状态的影响。使用统计方法或机器学习技术，对不同生产条件之间的影响关系进行判定。可以包括相关性分析、回归分析、因果推断等方法。根据判定结果，可以将影响关系赋值为1或0，以构建各时间尺度下分割片的因果拓扑图。根据判定的影响关系，构建各时间尺度下分割片的因果拓扑图。在拓扑图中，节点表示不同的生产条件或时间尺度，边表示它们之间的影响关系。上述可知，通过构建因果拓扑图，可以更清晰地理解各生产条件之间的因果关系，有助于揭示影响生产状态的关键因素。消除时间趋势化影响后，可以更准确地分析生产条件的影响，而不受时间变化的干扰。基于因果拓扑图的分析结果，可以支持数据驱动的决策和优化，提高生产效率和质量。综上所述，帮助建立了一个基于因果关系的模型，以更好地理解生产条件对生产状态的影响，并支持相关决策和优化。本申请提供的一种基于深度学习的油气井产量预测方法，通过步骤S101，从现有的油气井中收集第一生产数据和第一产量数据，判定待测油气井的类型，根据待测油气井的类型筛选与其相关的第一生产数据。将筛选后的第一生产数据与对应的第一产量数据组合，构成训练集。通过对数据的筛选和处理，确保模型训练使用的数据是与待测油气井相关的，增加预测准确性。数据组织清晰，有助于快速建立和训练模型。通过步骤S102，使用训练集对模型进行训练，以找到第一生产数据和第一产量数据之间的关联关系。为后续的预测提供了基础，确保预测结果有较高的可靠性。通过关联分析，有助于了解生产数据与产量之间的因果关系。通过步骤S103，收集待测油气井过往的第二生产数据，将这些数据输入到已训练的预测模型中，通过模型获得第二产量数据。能够快速得到待测油气井的产量预测，为生产决策提供依据。减少了人工分析的时间和努力，提高工作效率。通过步骤S104，将第二生产数据按不同的时间尺度进行分割，根据需要进行数据处理，生成预测生产数据，将预测生产数据输入到预测模型中，得到预测产量数据。时间尺度的划分允许对不同时间段的数据进行预测，提供了更多维度的分析。有助于识别和理解生产数据中的时间趋势和模式。可以更好地为未来的生产计划和策略制定提供支持。综上所述，通过系统化、结构化的方法来预测油气井的产量，使得预测更为准确和有效。模块化的步骤设计使得流程更容易理解和实施。自动化预测减少了人为误差，提高了工作效率和可靠性。具体的实施例，如图2-7所示，使用LSTM方法对某油井的日产油进行了预测，具体采用下述条件：模型：使用LSTM进行时序数据建模；数据分割：每30天为一个尺度；油井类型：自喷井；训练参数：油压、套压、井口温度、油嘴、气油比、日产水；预测参数：日产油。图表分析：150-180天：在这一段时期内，预测值与实际值趋势大致相同，但在大约160天左右有些许偏差；180-210天：预测值开始出现一些偏离实际值的情况，特别是在195天左右，预测值比实际值低了许多；210-240天：预测值与实际值在开始时相差不大，但在225天左右开始出现较大的偏差；240-270天：在这段时间内，预测值在大部分时间都比实际值高；270-300天：预测值与实际值在270至280天间有些许差异，但之后的趋势基本上是接近的；300-330天：预测与实际值的差异在这段时间内相对较小。上述可知，预测在150-180天的结果相对较好，与实际值趋势大致相同。但随着时间的推移，特别是在180-210天和210-240天，预测与实际值出现了明显的偏差。说明模型对某些长期影响因子的捕捉不足。由于日产油量可能受到多种因素的影响，仅靠油压、套压、井口温度等几个参数可能无法完全描述日产油量的变化。例如，可能存在外部因素如天气变化、地下压力变动等未被考虑到的因素。在某些特定时间段，如195天左右，预测值与实际值的偏差特别大，说明在这些时间段内有某些异常事件或者噪音，这些异常事件在模型训练时可能没有被充分考虑。当前模型是基于30天的数据进行预测的，但这个时间段的选择可能并不是最优的。不同的窗口大小可能会影响模型的预测效果，特别是当数据具有季节性或周期性变化时。LSTM模型有许多可以调整的参数，如隐藏层的大小、学习率、dropout率等。针对上述不准确的因素，可采用下述方式进行持续的优化：考虑增加更多可能影响日产油量的特征，如天气数据、地下压力等；检查数据中是否存在异常值或噪音，并考虑进行处理，如使用平滑方法或移除异常值；尝试使用不同的窗口大小进行训练和预测，以找到最佳的时间段；进行一系列的实验，调整LSTM模型的参数，以优化模型的预测效果；综上所述，LSTM在某些时间段的预测表现很好，但在一些末尾且特定的时间段则需要进一步优化。针对上述的在一些末尾且特定的时间段则需要进一步优化的问题，为了增大对预测尺度的末端时间的准确优化，可进行下述的模型优选和训练；1数据预处理；标准化/归一化：将所有的输入特征缩放到一个相似的尺度上，有助于模型更快地收敛；时间滑窗：根据历史数据的时间窗口，如过去30天，来预测未来的日产油。2模型选择与设计：a)循环神经网络：适用于序列数据，但可能因为梯度消失或爆炸而难以训练。b)长短期记忆网络：专门设计来处理梯度消失的问题，对于长时间的依赖关系表现更好。参数建议：隐藏单元数：50-200，取决于数据的复杂性；批次大小：32or64；学习率：0.001或0.0001；Dropout：0.2-0.5，防止过拟合。c)卷积神经网络：在处理固定大小的滑动窗口时，CNN可以捕捉到局部的时间模式。参数建议：卷积层滤波器数：32，64，128...；卷积核大小：2-5，取决于滑动窗口的大小；池化层大小：2；Dropout：0.2-0.5。3训练策略：损失函数：均方误差是一个常用的损失函数，用于回归问题；优化器：Adam或RMSprop是常用于这类问题的优化器；早停：当验证集上的损失不再减少时，停止训练，有助于防止过拟合。4模型验证与测试：将数据集分为训练集、验证集和测试集；使用训练集训练模型，使用验证集进行参数调优，并使用测试集来评估模型的最终表现。5模型优化：特征选择：尝试加入或去掉某些特征，观察对模型性能的影响；超参数调整：使用如网格搜索或随机搜索的方法，来找到最佳的模型参数。综上所述，对于油井的日产油预测，通过在于选择和设计合适的模型，以及进行细致的数据预处理和模型调优，以确保预测的准确性和稳定性，特别是预测尺度末端的预测精度。本申请第二方面的实施例提出了预测系统2，用于实施上述技术方案中任一项油气井产量预测方法的预测系统，如图8所示，该预测系统2包括：数据收集筛选模块201，用于获取现存油气井的第一生产数据和第一产量数据，判定待测油气井的类型，根据所述类型筛选所述第一生产数据，并与所述第一产量数据组成训练集；模型构建训练模块202，用于构建预测模型，通过所述训练集训练所述预测模型，以获得所述第一生产数据和所述第一产量数据的关联关系；预测模块203，用于获取所述待测油气井过往的第二生产数据，将所述第二生产数据输入所述预测模型，并通过所述关联关系获得第二产量数据；以及分割模块204，用于将所述第二生产数据通过不同的时间尺度分割并处理生成预测生产数据，将所述预测生产数据输入所述预测模型并根据所述关联关系生成预测产量数据，通过所述第二产量数据和所述预测产量数据生成待测油气井的产量预测结果。本申请提供的一种预测系统，数据收集，数据收集筛选模块启动，收集油气井的第一生产数据和第一产量数据，整理和存储收集到的数据，确保其完整性和准确性；数据筛选处理，根据输入的油气井类型，数据筛选处理模块筛选出与该类型相关的第一生产数据和第一产量数据，将筛选后的数据整理成适合训练的格式，例如CSV或数据库表；模型构建与训练，模型构建训练模块启动，选择一个合适的预测模型结构，如神经网络、决策树等，使用筛选后的第一生产数据和第一产量数据作为输入，训练预测模型，优化模型参数，确保模型有最佳的预测性能；预测操作，预测模块接收第二生产数据作为输入，通过训练好的预测模型，基于第二生产数据预测得到第二产量数据，对第二生产数据进行进一步的处理或变换，获得预测生产数据，再次使用训练好的预测模型，根据预测生产数据预测得到预测产量数据。模块化设计：该系统通过不同的模块化设计，确保每个模块的功能明确且独立，方便维护和升级。数据完整性和准确性：数据收集筛选模块确保了所需数据的完整性和准确性，为后续的分析和预测提供了坚实的基础。灵活性和扩展性：通过数据筛选处理模块，系统可以灵活地针对不同类型的油气井进行预测，并且易于扩展新的井类型。高预测准确性：模型构建训练模块可以选择和优化多种预测算法，确保预测的准确性。实时预测能力：预测模块能够实时接收新的生产数据并进行预测，为油气生产决策提供及时的参考。节约人工成本：整个过程自动化，减少了大量的人工干预，提高效率并减少了出错的可能性。持续优化：随着更多的数据被收集和分析，预测模型可以持续进行优化和训练，提高其预测的准确度。综上所述，模块化和自动化的系统设计，旨在提高油气井产量预测的准确性、效率和实时性，从而为油气田的运营和管理提供有力支持。本申请第三方面的实施例提出了电子设备。在本申请的一些实施例中，如图9所示，提供了电子设备，该电子设备包括：可以是桌上型计算机、笔记本、掌上电脑及云端服务器等电子设备。电子设备3可以包括但不仅限于处理器301和存储器302。本领域技术人员可以理解，图9仅仅是电子设备3的示例，并不构成对电子设备3的限定，可以包括比图示更多或更少的部件，或者不同的部件。处理器301可以是中央处理单元，也可以是其它通用处理器、数字信号处理器、专用集成电路、现场可编程门阵列或者其它可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。存储器302可以是电子设备3的内部存储单元，例如，电子设备3的硬盘或内存。存储器302也可以是电子设备3的外部存储设备，例如，电子设备3上配备的插接式硬盘，智能存储卡，安全数字卡，闪存卡等。存储器302还可以既包括电子设备3的内部存储单元也包括外部存储设备。存储器302用于存储计算机程序以及电子设备所需的其它程序和数据。本申请第四方面的实施例提出了计算机可读存储介质。在本申请的一些实施例中，提供了计算机可读存储介质，该计算机可读存储介质被处理器301执行时实现上述方法的步骤，因此本申请第四方面提供的计算机可读存储介质具有上述步骤的全部技术效果，在此不再赘述。所属领域的技术人员可以清楚地了解到，为了描述的方便和简洁，仅以上述各功能单元、模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能单元、模块完成，即将装置的内部结构划分成不同的功能单元或模块，以完成以上描述的全部或者部分功能。实施例中的各功能单元、模块可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中，上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。另外，各功能单元、模块的具体名称也只是为了便于相互区分，并不用于限制本申请的保护范围。上述系统中单元、模块的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本公开的范围。在本公开所提供的实施例中，应该理解到，所揭露的装置/电子设备和方法，可以通过其它的方式实现。例如，以上所描述的装置/电子设备实施例仅仅是示意性的，例如，模块或单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通讯连接可以是通过一些接口，装置或单元的间接耦合或通讯连接，可以是电性，机械或其它的形式。集成的模块/单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读存储介质中。基于这样的理解，本公开实现上述实施例方法中的全部或部分流程，也可以通过计算机程序来指令相关的硬件来完成，计算机程序可以存储在计算机可读存储介质中，该计算机程序在被处理器执行时，可以实现上述各个方法实施例的步骤。计算机程序可以包括计算机程序代码，计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。计算机可读介质可以包括：能够携带计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。需要说明的是，计算机可读介质包含的内容可以根据司法管辖区内立法和专利实践的要求进行适当的增减，例如，在某些司法管辖区，根据立法和专利实践，计算机可读介质不包括电载波信号和电信信号。以上实施例仅用以说明本公开的技术方案，而非对其限制；尽管参照前述实施例对本公开进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本公开各实施例技术方案的精神和范围，均应包含在本公开的保护范围之内。
