标题title
一种回退工作方法、装置、数控系统及存储介质
摘要abst
本申请实施例提供一种回退工作方法、装置、数控系统及存储介质，其中方法应用于驱动器，所述方法包括：在控制机床回退的过程中，实时检测监控数据，并将实时检测的监控数据发送至CNC系统；以及，接收CNC系统传输的回退控制指令，并根据所述回退控制指令控制机床回退，直至机床回退到指定位置；其中，所述回退控制指令根据实时检测的监控数据进行更新。本申请实施例提供的回退工作方法提高了回退工作的安全性和可靠性。
权利要求书clms
1.一种回退工作方法，其特征在于，应用于驱动器，所述方法包括：在控制机床回退的过程中，实时检测监控数据，并将实时检测的监控数据发送至CNC系统；以及，接收CNC系统传输的回退控制指令，并根据所述回退控制指令控制机床回退，直至机床回退到指定位置；其中，所述回退控制指令根据实时检测的监控数据进行更新。2.根据权利要求1所述的回退工作方法，其特征在于，还包括：在控制机床回退之前，将回退触发数据发送至CNC系统，所述回退触发数据包括：电源异常信息以及电源异常时检测的监控数据；以及，接收CNC系统传输的初始回退控制指令，并根据所述初始回退控制指令，开始控制机床回退，以进入机床回退的过程；其中，所述初始回退控制指令根据电源异常时检测的监控数据确定。3.根据权利要求2所述的回退工作方法，其特征在于，在将回退触发数据发送至CNC系统之前，还包括：实时检测监控数据，以及电源的供电信息；如果基于电源的供电信息，检测到电源异常，确定电源异常信息以及电源异常时的监控数据；至少基于电源异常信息以及电源异常时的监控数据，形成回退触发数据。4.根据权利要求3所述的回退工作方法，其特征在于，所述电源的供电信息包括：三相电网的电压值，以及开关电源的电压值；所述电源异常包括：三相电网的电压值异常，和/或，开关电源的电压值异常；所述电源异常信息包括：三相电网的电压值异常时的故障代码，和/或，开关电源的电压值异常时的故障代码。5.根据权利要求1-4任一项所述的回退工作方法，其特征在于，所述监控数据至少包括母线电容能量数据和驱动器运行状态数据；所述母线电容能量数据指示回退工作的可用能量值；所述驱动器运行状态数据用于确定回退工作的回退参数，且所确定的回退参数与所述可用能量值相匹配。6.根据权利要求1所述的回退工作方法，其特征在于，所述将实时检测的监控数据发送至CNC系统包括：将实时检测的监控数据通过EtherCAT总线发送给CNC系统。7.一种回退工作方法，其特征在于，应用于CNC系统，所述方法包括：在控制机床回退过程中，接收驱动器发送的实时检测的监控数据；根据所述监控数据形成回退控制指令，其中，所述回退控制指令根据实时检测的监控数据进行更新；将所述回退控制指令发送给驱动器，以便驱动器根据所述回退控制指令控制机床回退，直至机床回退到指定位置。8.根据权利要求7所述的回退工作方法，其特征在于，还包括：在控制机床回退之前，接收驱动器发送的回退触发数据，所述回退触发数据包括：电源异常信息以及电源异常时检测的监控数据；其中，所述电源异常信息用于指示CNC系统开始形成初始回退控制指令；根据电源异常时检测的监控数据形成初始回退控制指令，将所述初始回退控制指令发送给驱动器，使得驱动器根据所述初始回退控制指令开始控制机床回退，以便进入机床回退的过程。9.根据权利要求7或8所述的回退工作方法，其特征在于，所述监控数据至少包括母线电容能量数据和驱动器运行状态数据；所述根据监控数据形成回退控制指令包括：根据所述母线电容能量数据指示的回退工作的可用能量值，利用所述驱动器运行状态数据确定回退工作的回退参数，其中，所确定的回退参数与所述可用能量值相匹配；基于所确定的回退参数形成回退控制指令。10.一种回退工作装置，其特征在于，应用于驱动器，包括：监控数据检测模块，用于在控制机床回退的过程中，实时检测监控数据，并将实时检测的监控数据发送至CNC系统；回退控制模块，用于接收CNC系统传输的回退控制指令，并根据所述回退控制指令控制机床回退，直至机床回退到指定位置；其中，所述回退控制指令根据实时检测的监控数据进行更新。11.一种回退工作装置，其特征在于，应用于CNC系统，包括：监控数据接收模块，用于在控制机床回退过程中，接收驱动器发送的实时检测的监控数据；指令形成模块，用于根据所述监控数据形成回退控制指令，其中，所述回退控制指令根据实时检测的监控数据进行更新；指令发送模块，用于将所述回退控制指令发送给驱动器，以便驱动器根据所述回退控制指令控制机床回退，直至机床回退到指定位置。12.根据权利要求11所述的回退工作装置，其特征在于，还包括：设置于CNC系统内部的延时供电模块；所述延时供电模块，用于转换输入电压，并将转换后的输入电压，延时提供给CNC系统。13.一种数控系统，其特征在于，包括：驱动器，所述驱动器被配置为执行如权利要求1-6任一项所述的回退工作方法；CNC系统，所述CNC系统被配置为执行如权利要求7-9任一项所述的回退工作方法。14.一种存储介质，其特征在于，所述存储介质存储一条或多条计算机可执行指令，所述一条或多条计算机可执行指令被执行时，实现如权利要求1-6任一项所述的回退工作方法，或者，如权利要求7-9任一项所述的回退工作方法。
说明书desc
技术领域本申请实施例涉及数控技术领域，具体涉及一种回退工作方法、装置、数控系统及存储介质。背景技术CNC系统是一种根据计算机存储器中存储的控制程序，执行部分或全部数值控制功能，并配有接口电路和伺服驱动装置的专用计算机系统。CNC系统可应用于数控加工领域，例如数控机床等数控系统中。在数控系统的加工过程中，可能会突然发生异常断电，为了避免由于异常断电而发生事故，CNC系统需要设置回退工作流程。因此，如何提高回退工作的安全性和可靠性，成为了本领域技术人员亟需解决的技术问题。发明内容有鉴于此，本申请实施例提供一种回退工作方法、装置、数控系统及存储介质，以提高回退工作的安全性和可靠性。为实现上述目的，本申请实施例提供如下技术方案。第一方面，本申请实施例提供一种回退工作方法，应用于驱动器，所述方法包括：在控制机床回退的过程中，实时检测监控数据，并将实时检测的监控数据发送至CNC系统；以及，接收CNC系统传输的回退控制指令，并根据所述回退控制指令控制机床回退，直至机床回退到指定位置；其中，所述回退控制指令根据实时检测的监控数据进行更新。可选的，还包括：在控制机床回退之前，将回退触发数据发送至CNC系统，所述回退触发数据包括：电源异常信息以及电源异常时检测的监控数据；以及，接收CNC系统传输的初始回退控制指令，并根据所述初始回退控制指令，开始控制机床回退，以进入机床回退的过程；其中，所述初始回退控制指令根据电源异常时检测的监控数据确定。可选的，在将回退触发数据发送至CNC系统之前，还包括：实时检测监控数据，以及电源的供电信息；如果基于电源的供电信息，检测到电源异常，确定电源异常信息以及电源异常时的监控数据；至少基于电源异常信息以及电源异常时的监控数据，形成回退触发数据。可选的，所述电源的供电信息包括：三相电网的电压值，以及开关电源的电压值；所述电源异常包括：三相电网的电压值异常，和/或，开关电源的电压值异常；所述电源异常信息包括：三相电网的电压值异常时的故障代码，和/或，开关电源的电压值异常时的故障代码。可选的，所述监控数据至少包括母线电容能量数据和驱动器运行状态数据；所述母线电容能量数据指示回退工作的可用能量值；所述驱动器运行状态数据用于确定回退工作的回退参数，且所确定的回退参数与所述可用能量值相匹配。可选的，所述将实时检测的监控数据发送至CNC系统包括：将实时检测的监控数据通过EtherCAT总线发送给CNC系统。第二方面，本申请实施例还提供一种回退工作方法，应用于CNC系统，所述方法包括：在控制机床回退过程中，接收驱动器发送的实时检测的监控数据；根据所述监控数据形成回退控制指令，其中，所述回退控制指令根据实时检测的监控数据进行更新；将所述回退控制指令发送给驱动器，以便驱动器根据所述回退控制指令控制机床回退，直至机床回退到指定位置。可选的，还包括：在控制机床回退之前，接收驱动器发送的回退触发数据，所述回退触发数据包括：电源异常信息以及电源异常时检测的监控数据；其中，所述电源异常信息用于指示CNC系统开始形成初始回退控制指令；根据电源异常时检测的监控数据形成初始回退控制指令，将所述初始回退控制指令发送给驱动器，使得驱动器根据所述初始回退控制指令开始控制机床回退，以便进入机床回退的过程。可选的，所述监控数据至少包括母线电容能量数据和驱动器运行状态数据；所述根据监控数据形成回退控制指令包括：根据所述母线电容能量数据指示的回退工作的可用能量值，利用所述驱动器运行状态数据确定回退工作的回退参数，其中，所确定的回退参数与所述可用能量值相匹配；基于所确定的回退参数形成回退控制指令。第三方面，本申请实施例还提供一种回退工作装置，应用于驱动器，包括：监控数据检测模块，用于在控制机床回退的过程中，实时检测监控数据，并将实时检测的监控数据发送至CNC系统；回退控制模块，用于接收CNC系统传输的回退控制指令，并根据所述回退控制指令控制机床回退，直至机床回退到指定位置；其中，所述回退控制指令根据实时检测的监控数据进行更新。第四方面，本申请实施例还提供一种回退工作装置，应用于CNC系统，包括：监控数据接收模块，用于在控制机床回退过程中，接收驱动器发送的实时检测的监控数据；指令形成模块，用于根据所述监控数据形成回退控制指令，其中，所述回退控制指令根据实时检测的监控数据进行更新；指令发送模块，用于将所述回退控制指令发送给驱动器，以便驱动器根据所述回退控制指令控制机床回退，直至机床回退到指定位置。可选的，还包括：设置于CNC系统内部的延时供电模块；所述延时供电模块，用于转换输入电压，并将转换后的输入电压，延时提供给CNC系统。第五方面，本申请实施例还提供一种数控系统，包括：驱动器，所述驱动器被配置为执行如上述第一方面所述的回退工作方法；CNC系统，所述CNC系统被配置为执行如上述第二方面所述的回退工作方法。第六方面，本申请实施例还提供一种存储介质，所述存储介质存储一条或多条计算机可执行指令，所述一条或多条计算机可执行指令被执行时，实现如上述第一方面所述的回退工作方法，或者，如上述第二方面所述的回退工作方法。基于本申请实施例提供的回退工作方法，在控制机床回退的过程中，驱动器可以实时检测监控数据，并将实时检测的监控数据发送至CNC系统；从而CNC系统可以根据驱动器实时检测的监控数据更新回退控制指令，并将回退控制指令传输给驱动器；进而驱动器可以根据CNC传输的回退控制指令控制机床回退，直至机床回退到指定位置。可见，在机床的回退过程中，驱动器可以将实时检测的监控数据发送至CNC系统，并且CNC系统可以根据实时检测的监控数据更新回退控制指令，使得驱动器可以基于不断更新的回退控制指令控制机床回退。也就是说，在机床的回退过程中，驱动器与CNC系统之间可以不断进行信息交互，使得驱动器可以根据实时检测的监控数据所更新的回退控制指令，控制机床回退，提升了回退工作时的安全性和可靠性。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据提供的附图获得其他的附图。图1为数控系统的架构示例图。图2为数控系统的工作流程示例图。图3为回退工作方法的流程图。图4为数控系统的另一架构示例图。图5为驱动器的结构示例图。图6为驱动器的回退工作装置的一种可选框图。图7为驱动器的回退工作装置的另一种可选框图。图8为CNC系统的回退工作装置的一种可选框图。图9为CNC系统的回退工作装置的另一种可选框图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。数控系统是一种由输入输出装置、CNC系统、PLC、主轴伺服驱动装置和进给伺服驱动装置以及检测装置等组成的集成系统，用于精确控制机床和其他制造设备的运动和操作，实现高精度、高效率的加工和制造过程。为便于理解数控系统，图1示例性的示出了数控系统的架构示例图。参照图1，数控系统可以包括以下组成。操作面板1，为设置参数、控制运动和监控加工过程的交互式控制界面。PLC 2,用于工业自动化控制，负责处理开关逻辑、信号处理、设备状态检测等，适用于各种自动化工程中的逻辑控制。电器回路3，用于控制气动执行元件，实现机床的机械动作，如刀具运动、夹紧、卸料等。辅助装置4，用于增强操作和控制功能，辅助装置4例如手轮、示教器等；辅助装置与PLC可以一起实现数控机床更灵活的操作和更精确的控制。主轴驱动装置5，用于控制主轴的旋转运动，主轴驱动装置、辅助装置和PLC可以协同工作，以实现精准的切削加工和多轴协调运动控制。机床6，是一种用于制造加工工件的设备，通过切削、磨削、锻压等工艺将原材料加工成具有特定形状、尺寸和表面质量的成品。在数控系统中，机床被配备了数字化控制系统，可以通过编程来控制加工过程，实现高精度、高效率的生产加工。检测装置7，用于检测加工过程中的各种参数和状态，如工件尺寸、刀具磨损、位置精度等，以便实时调整和控制加工过程，确保加工质量和精度。进给驱动装置8，用于控制数控机床的进给运动，负责控制工件在加工过程中的移动，通过精确的运动控制，实现工件的定位、进给速度和加工精度的控制。CNC系统9，用于控制数控机床的运动、轨迹规划、加工路径生成等高级加工控制功能，能够实现复杂的加工任务和精密的运动控制。在数控系统中，CNC系统的主要功能是解释和处理加工程序，生成控制指令，以实现精确的数控加工。输入输出装置10，用于实时传输指令和状态信息，实现与操作员和外部设备的交互，以控制加工过程和检测机床状态。可以进一步说明的是，在数控系统中，主轴驱动装置和进给驱动装置为伺服驱动装置的示例，例如，伺服驱动装置分为主轴驱动装置、进给驱动装置。伺服驱动装置的主要功能是将控制信号转换为精确的电机运动，实现位置、速度和加速度的精准控制，从而驱动机床和其他设备进行高精度加工和运动操作。在一个实现示例中，伺服驱动装置可以包括驱动器和电机。为便于理解数控系统的工作流程，图2示例性的示出了数控系统的工作流程示例图。参照图2，当操作员输入加工要求和程序后，CNC系统负责解释和生成相应的控制指令，随后将控制指令传递给伺服驱动装置中的驱动器。驱动器将控制指令转化为电机可理解的运动指令，然后将运动指令传送给电机，以实现精确的运动控制。在数控机床的加工过程中，可能会突然发生异常断电，导致刀具停留在不合适的位置，造成碰撞或损坏，还可能会导致机床轴位置信息丢失，进而影响加工精度。此外数据丢失也是一个潜在问题，未保存的加工数据可能会丢失，需要重新开始加工。因此，CNC系统需要设置回退工作流程去避免发生上述事故，从而提高回退工作的安全性和可靠性显得尤为重要。基于此，本申请实施例提供了一种回退工作方法，在机床的回退过程中，通过驱动器与CNC系统之间不断的信息交互，使得驱动器可以将实时检测的监控数据发送给CNC系统，并且CNC系统可以根据驱动器发送的实时检测的监控数据更新回退控制指令，进而驱动器可以根据实时更新的回退控制指令，控制机床回退，提升了回退工作时的安全性和可靠性。基于上述思路，图3示例性的示出了本申请实施例提供的回退工作方法的流程图，参考图3，该方法可以分为两个阶段，即机床回退之前的阶段，以及机床回退过程的阶段。在机床回退之前的阶段，图3所示方法流程可以包括以下步骤。步骤S311、驱动器实时检测监控数据，以及电源的供电信息。驱动器是伺服驱动装置中的一部分，在机床回退之前，驱动器可以通过检测电路、传感器等检测装置，实时的对预设的监控对象进行检测，从而得到监控数据；同时，可以对驱动器的电源进行检测，得到电源的供电信息。在机床回退之前，驱动器检测的电源的供电信息用于识别、确认是否存在电源异常；从而在电源异常时，驱动器可以触发CNC系统控制机床进入回退过程。在可选实现中，驱动器的电源可以包括三相电网和开关电源；其中三相电网是一种用于分配和传输电能的电力系统，通常由三个相位组成，每个相位之间的电压波形相位差相隔120度；开关电源是一种通过快速切换电子元件来控制电能的流动，以便将电能从输入电源转换为稳定的输出电压的电源装置。驱动器可以通过对三相电网的供电信息进行检测，以及对开关电源的供电信息进行检测，以实现对电源的供电信息的检测。供电信息例如电压值，比如可以对三相电网的电压值、开关电源的电压值进行检测。在进一步的可选实现中，电源的供电信息可以通过驱动器中的电源检测电路进行检测，例如，通过驱动器中的电压检测电路，检测三相电网的电压值、开关电源的电压值等。在可选实现中，监控数据可以包括母线电容能量数据以及驱动器运行状态数据。也就是说，在机床回退之前，驱动器可以实时检测母线电容能量数据以及驱动器运行状态数据。其中，母线电容能量数据是驱动器的外部对象的一种示例，表示的是母线电容器中储存的电能量。母线电容能量数据可以指示驱动器的电能存储状态，以确保驱动器能够在需要时提供额外的电能，从而满足瞬态负载需求或应对电力波动。驱动器运行状态数据是驱动器自身数据的一种示例，表示的是驱动器当前的工作状态和性能情况。驱动器运行状态数据包含了有关驱动器操作和性能的信息，以便用户或数控系统监视和控制驱动器的工作。在进一步的可选实现中，母线电容能量数据通过检测母线电容器的能量参数而得到。驱动器运行状态数据可以指示驱动器的工作状态，例如，电流、电压、温度、故障代码、控制的电机速度、位置反馈以及通信状态等信息；这些信息通过各种传感器、检测电路、内置控制算法和通信接口等方式检测得来。步骤S312、驱动器在根据电源的供电信息确定电源异常时，形成回退触发数据。驱动器在实时检测电源的供电信息的过程中，可以根据实时检测的电源的供电信息，判断电源是否异常。电源是否异常的判断可以通过预先定义的供电标准来进行，比如电源的供电信息未达到供电标准，则视为电源异常。在可选实现中，供电标准可以包括电压标准、电流标准等。例如，电压标准可以指示电压的合理范围，如果电源的电压不处于电压的合理范围，则可确定电源异常。又例如，电流标准可以指示电流的合理范围，如果电源的电流不处于电流的合理范围，则可以确定电源异常，因电流异常导致的电源异常可以表明电源供应或负载部分存在异常问题。在一个实现示例中，电源异常可以包括：三相电网的电压值异常，和/或，开关电源的电压值异常。例如，三相电网的电压值不处于三相电网的电压的合理范围，和/或，开关电源的电压值不处于开关电源的电压的合理范围，则可以确认电源异常。在确认电源异常时，驱动器可以形成回退触发数据，回退触发数据可用于触发CNC系统产生初始回退控制指令，从而使得机床开始进入回退过程。在可选实现中，回退触发数据可以至少包括电源异常信息以及电源异常时的监控数据；其中，电源异常信息可以指示CNC系统可以开始形成初始回退控制指令，电源异常时的监控数据可以用于CNC系统形成初始回退控制指令。在可选实现中，电源异常信息可以包括电源的供电信息异常的故障代码。例如，在三相电网的电压值异常时，电源异常信息可以包括三相电网的电压值异常时的故障代码。又例如，在开关电源的电压值异常时，电源异常信息可以包括开关电源的电压值异常时的故障代码。也就是说，电源异常信息可以包括：三相电网的电压值异常时的故障代码，和/或，开关电源的电压值异常时的故障代码。在可选实现中，电源异常时的监控数据可以包括电源异常时的母线电容能量数据和驱动器运行状态数据。电源异常时的母线电容能量数据可以指示电源异常时的回退工作的可用能量值。步骤S313、驱动器将回退触发数据发送给CNC系统。步骤S314、CNC系统形成初始回退控制指令。相应的，CNC系统可以接收驱动器发送的回退触发数据，并形成初始回退控制指令。初始回退控制指令是CNC系统用于指示驱动器开始启动机床的回退过程的指令。在可选实现中，驱动器发送的回退触发数据可以包括电源异常信息、电源异常时的监控数据。从而CNC系统可以基于电源异常信息，确认此时可以生成初始回退控制指令；在生成初始回退控制指令时，CNC系统可以基于电源异常时的监控数据实现初始回退控制指令的具体生成。作为可选实现，母线电容能量数据指示回退工作的可用能量值，从而CNC系统可以将母线电容能量数据指示的可用能量值作为指导，利用驱动器运行状态数据指示的驱动器的工作状态、电流、电压、温度、故障代码、转速、位置反馈以及通信状态等信息，生成控制机床回退的回退参数，并使得回退参数与可用能量值相匹配。基于此，在一个实现示例中，CNC系统可以根据电源异常时的母线电容能量数据指示的初始回退工作的可用能量值，利用电源异常时的驱动器运行状态数据，确定机床初始回退工作的回退参数，并且，机床初始回退工作的回退参数与初始回退工作的可用能量值相匹配。在可选实现中，回退参数可以指示机床回退的速度、加速度、方向、轴向、距离等参数信息。从而，机床初始回退工作的回退参数可以指示机床初始回退的速度、加速度、方向、轴向、距离等参数信息。步骤S315、CNC系统将初始回退控制指令发送给驱动器。步骤S316、驱动器根据初始回退控制指令，开始控制机床回退，以进入机床回退的过程。驱动器接收CNC系统发送的初始回退控制指令后，可以根据初始回退控制指令控制电机开始机床的初始回退。例如，驱动器可以根据初始回退控制指令指示的机床初始回退工作的回退参数，控制电机开始机床的初始回退，以使得机床进入回退过程。在机床回退过程的阶段，图3所示方法流程可以包括以下步骤。步骤S317、驱动器实时检测监控数据。步骤S318、驱动器将实时检测的监控数据发送至CNC系统。在机床回退过程中，驱动器可以实时检测监控数据，并将实时检测的监控数据发送至CNC系统，以便CNC系统实时的更新回退控制指令。例如，驱动器可以将每个时刻检测的监控数据，发送至CNC系统，以使得CNC系统获得每个时刻的监控数据，以便CNC系统基于每个时刻的监控数据，更新每个时刻的回退控制指令。在机床回退过程中，驱动器实时检测的监控数据可以包括实时检测的母线电容能量数据和驱动器运行状态数据。驱动器实时检测监控数据的方式、以及监控数据的具体内容可以参照机床回退之前阶段的相关描述，此处不再赘述。步骤S319、CNC系统根据监控数据形成回退控制指令，回退控制指令根据实时检测的监控数据进行更新。在机床回退过程中，CNC系统可以根据驱动器发送的实时检测的监控数据，更新回退控制指令，以优化机床的回退工作，从而使得机床的回退工作能够与驱动器实时检测的监控数据相匹配，提升回退工作的安全性和可靠性。在可选实现中，CNC系统在接收监控数据后，可以根据监控数据中的母线电容能量数据所指示的回退工作的可用能量值，利用监控数据中的驱动器运行状态数据确定回退工作的回退参数，并且所确定的回退参数与所述可用能量值相匹配；从而基于所确定的回退参数形成回退控制指令。可选的，CNC系统通过驱动器发送的实时检测的监控数据，可以确定实时的母线电容能量数据，从而实时的分析母线电容的能量值，并通过结合实时的驱动器运行状态数据，来实时的调整回退参数，以确保实时的母线电容的能量值能够支持回退工作。如果实时的母线电容的能量值较低，则CNC系统可以基于实时的母线电容的能量值，以及驱动器运行状态数据，调整回退参数，以降低回退工作对于能量的需求。需要说明的是，基于实时的驱动器运行状态数据，CNC系统可以了解驱动器实时的运行情况，例如了解驱动器控制的电机速度、输出频率的情况等；从而，基于实时的驱动器运行状态数据的分析，CNC系统可以通过实时更新的回退控制指令，实时调整驱动器的输出，以确保回退工作按照预期进行。例如，如果驱动器控制的电机速度较低，则CNC系统可以控制增大电机转速，相应的，驱动器可以增大输出频率，从而加速回退。在此基础上，CNC系统结合实时的母线电容能量数据，可以在异常断电等电源异常情况下，考虑回退工作实时的可用能量值，从而结合实时的驱动器运行状态数据，来实时更新回退控制指令，以实时调整驱动器的输出，确保回退工作按照预期进行。比如，在回退工作实时的可用能量值较高时，CNC系统可以通过调整回退参数，并通过相应的回退控制指令来控制增加电机的速度，以加速回退，此时可以设置较大的回退距离，和较长的回退持续时间。又比如，在回退工作实时的可用能量值较低时，CNC系统可以通过调整回退参数，并通过相应的回退控制指令来控制降低电机的速度，以降低回退工作对于能量的需求，即减少能量损耗，此时可以设置较小的回退距离和较短的回退持续时间。步骤S320、CNC系统将回退控制指令发送给驱动器。步骤S321、驱动器根据回退控制指令控制机床回退，直至机床回退到指定位置。驱动器可以基于回退控制指令指示的回退参数，通过向电机传递与回退参数相应的运行指令，以在电机的带动下，来控制机床回退。可以理解的是，在机床回退过程中，驱动器是不断的将实时检测的监控数据发送至CNC系统，CNC系统是基于不断更新的监控数据，来实时的调整回退控制指令，并传递给驱动器。因此驱动器接收的回退控制指令是根据实时检测的监控数据进行更新的，从而驱动器可以基于不断实时更新的回退控制指令控制机床回退，从而使得机床的回退与实时的监控数据相匹配，进而提升了回退工作的安全性和可靠性。也就是说，在机床回退过程中，本申请实施例可以不断的执行步骤S317至S321，直至机床回退到指定位置。可见，在机床回退过程中，驱动器可以不断实时的检测监控数据并传递给CNC系统，CNC系统通过实时的监控数据可以实时的更新回退控制指令，并发送给驱动器；从而驱动器可以通过实时更新的回退控制指令中的回退参数，实时的调整针对电机的输出命令，以引导机床朝着指定位置执行回退。这一过程在机床达到指定位置之前反复执行，以确保回退操作的准确性和安全性。在可选实现中，驱动器与CNC系统之间可以通过总线进行信息交互，比如，在控制机床回退之前，驱动器可以在检测到电源异常时，将回退触发数据通过总线传输给CNC系统；CNC系统可以将初始回退控制指令，通过总线传输给驱动器。在控制机床回退的过程中，驱动器可以将实时检测的监控数据，通过总线传输给CNC系统；CNC系统可以将实时更新的回退控制指令，通过总线传输给驱动器。在一个实现示例中，总线例如EtherCAT总线，比如，驱动器可以将实时检测的监控数据通过EtherCAT总线发送给CNC系统，CNC系统可以将回退控制指令通过EtherCAT总线发送给驱动器。可以看出，本申请实施例提供的回退工作方法，在机床的回退过程中，驱动器可以将实时检测的监控数据发送至CNC系统，并且CNC系统可以根据实时检测的监控数据更新回退控制指令，使得驱动器可以基于不断更新的回退控制指令控制机床回退。也就是说，在机床的回退过程中，驱动器与CNC系统之间可以不断进行信息交互，使得驱动器可以根据实时检测的监控数据所更新的回退控制指令，控制机床回退，提升了回退工作时的安全性和可靠性。也就是说，本申请实施例存在监控数据的实时检测机制，以及回退控制指令实时更新并反馈给驱动器的数据反馈机制。即，在控制机床回退的过程中，驱动器可以实时检测监控数据，并将实时检测的监控数据发送至CNC系统，形成监控数据的实时检测机制；CNC系统可以根据实时检测的监控数据，实时更新回退控制指令并将回退控制指令发送给驱动器，形成CNC系统的数据反馈机制。本申请实施例通过CNC系统和驱动器之间实时的信息交互，实现了机床回退过程的实时监控，以及回退控制指令更新后的实时作用，可以提升回退工作时的安全性和可靠性。在本申请实施例中，CNC系统基于监控数据不断优化回退控制指令，使回退参数能够实时调整，适应实际情况，从而提升了回退工作的可靠性。这种动态优化确保了回退过程在不同情况下都能够保持稳定，减少了意外事件发生的可能性，提高了机床整体生产过程的效率和质量。进一步的，通过实时监控，本申请实施例也能够使得CNC系统快速检测到可能的风险和异常情况，例如机床的碰撞、阻塞或不正常的力量变化。进一步的，通过数据反馈机制，可以及时停止回退操作，避免了风险和异常情况，有效提升了回退工作的安全性。进一步的，将实时监控数据传递给CNC系统，可以使得CNC系统准确判断回退状态，发现回退工作中存在的潜在问题。作为一个实现示例，图4示出了本申请实施例的数控系统的另一架构示例图，参照图4，该数控系统可以包括以下组成。三相电网11，用于为数控设备提供稳定的电力，支持精密控制和高性能操作。驱动器12，是伺服驱动装置中的主要组成部分，负责将控制信号转换为电机可理解的运动指令，实现精确的轴运动和位置控制，支持加工过程的自动化和精密控制。变压器13，用于调整电源电压，为机床和相关设备提供适合的电力供应，确保稳定的运行和精确的控制。开关电源14，用于将交流电转换为稳定的直流电供应给各种电子元件和部件，确保数控系统的正常运行和精准控制。后备转换电源15，用于提供备用电源，以应对主电源中断或故障情况，保障数控机床的持续运行和数据保护。CNC系统9，用于控制数控机床的运动、轨迹规划、加工路径生成等高级加工控制功能，能够实现复杂的加工任务和精密的运动控制。在可选实现中，所述后备转换电源15设置于CNC系统9的内部。开关电源输入检测及转换电路16，用于检测输入电压是否正常，并将交流电转换为稳定的直流电供应给各种电子元件和部件，确保数控系统的正常运行和精准控制。三相电网输入检测及转换电路17，将三相交流电转换为稳定的直流电，以供应数控机床内的电子元件和设备，并检测输入电源状态，确保机床稳定运行和精确控制。母线电容能量检测电路18，用于检测数控系统中的母线电容器的能量状态，这有助于确保数控系统在运行时能够维持稳定的电能供应，以保证设备的正常工作和精确控制。在可选实现中，驱动器12设置开关电源输入检测及转换电路16，三相电网输入检测及转换电路17，以及母线电容能量检测电路18。电机19，负责根据驱动器的控制信号，将电能转化为机械运动，驱动刀具或工件在加工过程中实现精确的移动和切削，以完成工件加工任务。其中，三相电网11提供输入电能给驱动器12以及变压器13，所述变压器13将所述三相电网11输入的交流电转换为低压交流电，并传输给开关电源14；所述开关电源14将低压交流电转化为直流电，并作为输入电源提供给所述驱动器12和后备转换电源15；所述后备转换电源15作为输入电源，为CNC系统供电。在一个示例中，所述三相电网11输入380V交流电，变压器13将380V交流电转化为220V交流电。三相电网11的输入电压也可包括但不限于220V、230V、240V等。所述开关电源14为24V开关电源，也可根据三相电网11的输入电压来进行对应代替，开关电源14的代替电压包括但不限于48V、12V。所述后备转换电源15将24V直流电转换为12V交流电，并提供给CNC系统9供电，同时后备转换电源15具有延时供电功能。进一步的，图5为本申请实施例提供的驱动器的结构示例图，参照图5，驱动器可以包括：MCU510，用于负责控制和协调机床的各种运动、操作和反馈，以实现高精度的自动化加工。MCU 510是一种嵌入式系统组件，通常包含了中央处理器、内存、输入/输出接口和各种外设，用于执行特定的控制和计算任务。母线电压实时检测电路520为母线电容能量检测电路18中的部分电路，用于检测和测量数控系统中的母线电压，并提供实时的电压数据。这种电路通常包括电压传感器、信号调理电路、模数转换器等组件。在本申请实施例中，为每个驱动器设计对应的驱动器母线电容识别码，驱动器母线电容识别码用于标识和管理不同驱动器的电容参数，以确保精确控制和优化电力分配，从而驱动器内部的MCU，可以根据对应的驱动器母线电容识别码，获取该驱动器的母线电容值C；并通过母线电压实时检测电路520，实时采样母线电容电压U；进而，MCU可以根据驱动器的母线电压U与该驱动器的母线电容值C，确定驱动器的母线电容能量值，从而实现对母线电容能量数据的检测。可选的，母线电容能量值E可以根据如下公式计算得到：E＝/2。结合图4和图5，在一个示例中，在机床回退之前，驱动器12的母线电压实时检测电路520实时检测母线电容电压U，MCU 510根据电容能量值计算公式E＝/2，得出对应驱动器12的母线电容能量值。驱动器12通过内部的开关电源输入检测及转换电路16检测开关电源14是否异常断电，以及通过三相电网输入检测及转换电路17检测三相电网11是否异常断电；当检测的开关电源14和/或三相电网11的电压值低于设定值，或者为0V时，则驱动器12形成电源异常信息；从而，驱动器12通过EtherCAT总线将电源异常信息、电源异常时检测的母线电容能量值、以及驱动器12自身的运行状态数据传输至CNC系统9。CNC系统9通过电源异常时的母线电容能量值和驱动器运行状态数据，形成初始回退控制指令，并通过EtherCAT总线将初始回退控制指令发送至驱动器12。驱动器12在接收到初始回退控制指令后，通过控制电机19开始进行机床回退。在机床回退过程中，驱动器12实时更新母线电容能量值和自身的运行状态数据，驱动器12将实时更新的母线电容能量值和自身的运行状态数据通过EtherCAT总线，实时传输至CNC系统9。CNC系统9根据驱动器12传输的实时更新的母线电容能量值和自身的运行状态数据，实时更新回退控制指令，并将实时更新的回退控制指令通过EtherCAT总线传输至驱动器12。驱动器12基于实时更新的回退控制指令，控制电机19进行机床回退，直到机床回到指定位置。本申请实施例通过将驱动器实时检测的监控数据传递给CNC系统，可以使得CNC系统基于实时更新的监控数据，实时的更新优化回退控制指令，使回退参数能够实时调整，适应实际情况，从而提升了回退工作的可靠性。这种动态优化确保了回退过程在不同情况下都能够保持稳定，减少了意外事件发生的可能性，提高了整体生产过程的效率和质量。进一步的，本申请实施例通过运用驱动器的三相电网输入检测功能、24V开关电源输入检测功能，可以不需要额外的配置检测电路，即可及时发现输入电源异常，进行故障报警并通知CNC系统进入断电保护功能，从而开始机床回退。进一步的，后备转换电源集成到了CNC系统内部，且驱动器与CNC系统之间通过EtherCAT总线通讯，降低了成本、提高了数控系统的集成性。下面从驱动器的角度，对本申请实施例提供的回退工作装置进行介绍，下文描述的回退工作装置可以认为是驱动器为实现本申请实施例提供的一种回退工作方法，所需设置的功能模块。下文描述的回退工作装置可与前文描述的方案内容相互对应参照。图6为本申请实施例提供的驱动器的回退工作装置的一种可选框图，参照图6，该装置可以包括：监控数据检测模块610，用于在控制机床回退的过程中，实时检测监控数据，并将实时检测的监控数据发送至CNC系统；回退控制模块620，用于接收CNC系统传输的回退控制指令，并根据所述回退控制指令控制机床回退，直至机床回退到指定位置；其中，所述回退控制指令根据实时检测的监控数据进行更新。在进一步的可选实现中，图7示例性的示出了驱动器的回退工作装置的另一种可选框图，参照图7，该回退工作装置还可以包括：回退触发数据发送模块710，用于在控制机床回退之前，将回退触发数据发送至CNC系统，所述回退触发数据包括：电源异常信息以及电源异常时检测的监控数据；初始回退控制指令接收模块720，用于接收CNC系统传输的初始回退控制指令，并根据所述初始回退控制指令，开始控制机床回退，以进入机床回退的过程；其中，所述初始回退控制指令根据电源异常时检测的监控数据确定。可选的，监控数据检测模块610还可以用于，在控制机床回退之前，实时检测监控数据。在进一步的可选实现中，结合图7所示，回退工作装置还可以包括：电源供电信息检测模块730，用于在控制机床回退之前，实时检测电源的供电信息；异常信息确定模块740，用于如果基于电源的供电信息，检测到电源异常，确定电源异常信息以及电源异常时的监控数据；回退触发数据形成模块750，用于至少基于电源异常信息以及电源异常时的监控数据，形成回退触发数据。在可选实现中，所述电源的供电信息包括：三相电网的电压值，以及开关电源的电压值；所述电源异常包括：三相电网的电压值异常，和/或，开关电源的电压值异常；所述电源异常信息包括：三相电网的电压值异常时的故障代码，和/或，开关电源的电压值异常时的故障代码。在可选实现中，所述监控数据至少包括母线电容能量数据和驱动器运行状态数据；所述母线电容能量数据指示回退工作的可用能量值；所述驱动器运行状态数据用于确定回退工作的回退参数，且所确定的回退参数与所述可用能量值相匹配。在可选实现中，监控数据检测模块610，用于将实时检测的监控数据发送至CNC系统，可以包括：将实时检测的监控数据通过EtherCAT总线发送给CNC系统。下面从CNC系统的角度，对本申请实施例提供的一种回退工作装置进行介绍，下文描述的回退工作装置可以认为是CNC系统为实现本申请实施例提供的回退工作方法，所需设置的功能模块。下文描述的一种回退工作装置可与前文描述的方案内容相互对应参照。图8为本申请实施例提供的CNC系统的回退工作装置的一种可选框图，参照图8，该装置可以包括：监控数据接收模块810，用于在控制机床回退过程中，接收驱动器发送的实时检测的监控数据；指令形成模块820，用于根据所述监控数据形成回退控制指令，其中，所述回退控制指令根据实时检测的监控数据进行更新；指令发送模块830，用于将所述回退控制指令发送给驱动器，以便驱动器根据所述回退控制指令控制机床回退，直至机床回退到指定位置。进一步结合图8所示，该装置还可以包括：延时供电模块840，用于转换输入电压，并将转换后的输入电压，延时提供给CNC系统。在进一步的可选实现中，图9示例性的示出了CNC系统的回退工作装置的另一种可选框图，参照图9，该回退工作装置还可以包括：回退触发数据接收模块910，用于在控制机床回退之前，接收驱动器发送的回退触发数据，所述回退触发数据包括：电源异常信息以及电源异常时检测的监控数据；其中，所述电源异常信息用于指示CNC系统开始形成初始回退控制指令；初始回退控制指令形成并发送模块920，用于根据电源异常时检测的监控数据形成初始回退控制指令，将所述初始回退控制指令发送给驱动器，使得驱动器根据所述初始回退控制指令开始控制机床回退，以便进入机床回退的过程。在可选实现中，所述监控数据至少包括母线电容能量数据和驱动器运行状态数据；指令形成模块820，用于根据所述监控数据形成回退控制指令，包括：根据所述母线电容能量数据指示的回退工作的可用能量值，利用所述驱动器运行状态数据确定回退工作的回退参数，其中，所确定的回退参数与所述可用能量值相匹配；基于所确定的回退参数形成回退控制指令。可选的，本申请实施例还可提供数控系统，所述数控系统包括驱动器和CNC系统；其中，驱动器被配置为执行本申请实施例提供的由驱动器执行的回退工作方法，CNC系统被配置为执行本申请实施例提供的由CNC系统执行的回退工作方法。可选的，本申请实施例还可提供一种存储介质，该存储介质可以存储，实现上述驱动器执行的回退工作方法，或，实现上述CNC系统执行的回退方法。上文描述了本申请实施例提供的多个实施例方案，各实施例方案介绍的各可选方式可在不冲突的情况下相互结合、交叉引用，从而延伸出多种可能的实施例方案，这些均可认为是本申请实施例披露、公开的实施例方案。虽然本申请实施例披露如上，但本申请并非限定于此。任何本领域技术人员，在不脱离本申请的精神和范围内，均可作各种更动与修改，因此本申请的保护范围应当以权利要求所限定的范围为准。
