标题title
基于物联网的智慧停车管理方法和系统
摘要abst
本申请涉及一种基于物联网的智慧停车管理方法和系统，方法包括：通过安装在目标车位处的传感器采集目标车位处的图像；通过网络收集目标车位处的图像；从目标车位处的图像中提取图像特征；将图像特征输入经过训练的卷积神经网络，识别目标车位处的图像是否反映目标车位处已停放车辆；统计停车场的所有车位中未停放车辆的多个车位；计算停车场中未停放车辆的多个车位与用户的车辆之间的路径；从多个车位中选择推荐给用户的车位；将推荐给用户的车位的信息发送给用户。本发明有利于大幅降低卷积神经网络训练过程中的计算量，同时也能够有效降低卷积神经网络的模型冗余，适于高效精准地对车位是否被占用进行判断，快速引导用户的车辆进入推荐车位。
权利要求书clms
1.一种基于物联网的智慧停车管理方法，其特征在于，包括：以停车场的所有车位中任一车位为目标车位，通过安装在所述目标车位处的传感器采集所述目标车位处的图像；通过网络收集所述目标车位处的图像；从所述目标车位处的图像中提取图像特征；将所述图像特征输入经过训练的卷积神经网络，由所述卷积神经网络识别所述目标车位处的图像是否反映所述目标车位处已停放车辆，并在确定所述目标车位处已停放所述车辆时在所述目标车位处的图像中添加标注框，以标注所述目标车位处的图像中所述车辆的位置，其中，在所述卷积神经网络的训练过程中使用的损失函数为：其中，σ表示预设的第一加权值，s表示所述卷积神经网络输出的在训练图像中标注的第一标注框的尺寸，x和y表示所述卷积神经网络输出的所述第一标注框的中心坐标，x’和y’表示所述训练图像中人为标注的第二标注框的中心坐标，表示所述卷积神经网络输出的所述第一标注框中是否具有车辆，Loss'为目标置信度损失，Loss”为分类损失；统计所述停车场的所有车位中未停放车辆的多个车位；在用户的车辆进入所述停车场时，计算所述停车场中未停放车辆的多个车位与所述用户的车辆之间的路径；根据所述多个车位与所述用户的车辆之间的路径，从所述多个车位中选择推荐给所述用户的车位；将所述推荐给所述用户的车位的信息以及所述推荐给所述用户的车位与所述用户的车辆之间的路径信息，发送给所述用户。2.根据权利要求1所述的基于物联网的智慧停车管理方法，其特征在于，所述目标置信度损失为：其中，ci表示所述卷积神经网络输出的所述第一标注框的置信度的数值，表示所述卷积神经网络输出的所述第一标注框中是否不具有车辆，σ'表示预设的第二加权值。3.根据权利要求1所述的基于物联网的智慧停车管理方法，其特征在于，所述分类损失为：其中，pi表示所述卷积神经网络输出的所述第一标注框中具有车辆的概率，pi'表示所述训练图像中人为标注的第二标注框中具有车辆的概率。4.根据权利要求1所述的基于物联网的智慧停车管理方法，其特征在于，“根据所述多个车位与所述用户的车辆之间的路径，从所述多个车位中选择推荐给所述用户的车位”的步骤包括：以所述多个车位中任一车位为候选推荐车位，统计所述候选推荐车位至所述用户的车辆之间的路径长短，以及统计位于所述候选推荐车位至所述用户的车辆之间的路径之上的其他车辆的数量；根据所述候选推荐车位至所述用户的车辆之间的路径长短，以及位于所述候选推荐车位至所述用户的车辆之间的路径之上的其他车辆的数量，计算用于反映所述候选推荐车位被占用的可能性的第一分值：其中，L表示所述候选推荐车位至所述用户的车辆之间的路径的长度，n为所述候选推荐车位至所述用户的车辆之间的路径之上的其他车辆的数量，a为预设的常数；根据所述多个车位对应的第一分值高低，从所述多个车位中选择推荐给所述用户的车位。5.根据权利要求1所述的基于物联网的智慧停车管理方法，其特征在于，“根据所述多个车位与所述用户的车辆之间的路径，从所述多个车位中选择推荐给所述用户的车位”的步骤包括：以所述多个车位中任一车位为候选推荐车位，统计与所述候选推荐车位至所述用户的车辆之间的路径间的距离小于预设阈值的其他停车位的数量；根据所述候选推荐车位至所述用户的车辆之间的路径长短，以及与所述候选推荐车位至所述用户的车辆之间的路径间的距离小于预设阈值的其他停车位的数量，计算用于反映所述用户沿所述候选推荐车位对应的路径停车的可能性的第二分值：s'＝bm2L其中，L表示所述候选推荐车位至所述用户的车辆之间的路径的长度，m为与所述候选推荐车位至所述用户的车辆之间的路径间的距离小于预设阈值的其他停车位的数量，b为预设的常数；根据所述多个车位对应的第二分值高低，从所述多个车位中选择推荐给所述用户的车位。6.根据权利要求1所述的基于物联网的智慧停车管理方法，其特征在于，“将所述推荐给所述用户的车位的信息以及所述推荐给所述用户的车位与所述用户的车辆之间的路径信息，发送给所述用户”的步骤还包括：将所述推荐给所述用户的车位的停车费用信息发送给所述用户。7.根据权利要求6所述的基于物联网的智慧停车管理方法，其特征在于，在“将所述推荐给所述用户的车位的停车费用信息发送给所述用户”的步骤之前，还包括：在所述用户的车辆进入所述停车场时，识别所述用户的车辆的车牌号码；根据所述用户的车辆的车牌号码，查询所述用户的身份；根据所述用户的身份，计算所述用户在所述停车场所在建筑物的停留时间；根据所述用户在所述停车场所在建筑物的停留时间，计算所述用户的车辆在所述停车场的停车时间；根据所述用户的车辆在所述停车场的停车时间，计算所述推荐给所述用户的车位的停车费用信息。8.根据权利要求1所述的基于物联网的智慧停车管理方法，其特征在于，“通过安装在所述目标车位处的传感器采集所述目标车位处的图像”的步骤包括：实时检测所述停车场是否进入新的车辆，在发现所述停车场进入新的车辆时执行“通过安装在所述目标车位处的传感器采集所述目标车位处的图像”的步骤。9.一种基于物联网的智慧停车管理系统，其特征在于，包括：图像采集模块，以停车场的所有车位中任一车位为目标车位，通过安装在所述目标车位处的传感器采集所述目标车位处的图像；图像收集模块，通过网络收集所述目标车位处的图像；特征提取模块，从所述目标车位处的图像中提取图像特征；车位分析模块，将所述图像特征输入经过训练的卷积神经网络，由所述卷积神经网络识别所述目标车位处的图像是否反映所述目标车位处已停放车辆，并在确定所述目标车位处已停放所述车辆时在所述目标车位处的图像中添加标注框，以标注所述目标车位处的图像中所述车辆的位置，其中，在所述卷积神经网络的训练过程中使用的损失函数为：其中，σ表示预设的第一加权值，s表示所述卷积神经网络输出的在训练图像中标注的第一标注框的尺寸，x和y表示所述卷积神经网络输出的所述第一标注框的中心坐标，x’和y’表示所述训练图像中人为标注的第二标注框的中心坐标，表示所述卷积神经网络输出的所述第一标注框中是否具有车辆，Loss'为目标置信度损失，Loss”为分类损失；车位统计模块，统计所述停车场的所有车位中未停放车辆的多个车位；路径计算模块，在用户的车辆进入所述停车场时，计算所述停车场中未停放车辆的多个车位与所述用户的车辆之间的路径；车位推荐模块，根据所述多个车位与所述用户的车辆之间的路径，从所述多个车位中选择推荐给所述用户的车位；信息发送模块，将所述推荐给所述用户的车位的信息以及所述推荐给所述用户的车位与所述用户的车辆之间的路径信息，发送给所述用户。
说明书desc
技术领域本发明涉及智慧停车领域，且更为具体地，涉及一种基于物联网的智慧停车管理方法和系统。背景技术智慧停车是一种将物联网、人工智能、大数据等前沿技术应用于停车管理的创新解决方案，它通过对停车环节的全面优化和智能化，提供了更高效、便捷的停车体验，智慧停车的主要环节包括入口管理、车位检测识别、车位引导、反向寻车、车辆出场和出口管理。其中，车位检测识别技术可以通过传感器等设备实时监测停车场的车位情况，准确判断车位的占用状态，这些信息可以通过移动客户端等方式呈现给司机，方便他们快速找到可用的停车位，提高车位的周转率和利用效率。目前市面的智慧停车方案中，对于车位占用状态的识别在精准性和效率性上普遍有所不足，因此需要一种新的智慧停车方案，能够精准高效地识别停车场车位的占用情况并为用户智能地做出车位推荐。发明内容为了解决上述技术问题，提出了本申请，以提供一种能够精准高效地识别停车场车位的占用情况并为用户智能地做出车位推荐的基于物联网的智慧停车管理方法和系统。第一方面，本发明提供了一种基于物联网的智慧停车管理方法，包括：以停车场的所有车位中任一车位为目标车位，通过安装在所述目标车位处的传感器采集所述目标车位处的图像；通过网络收集所述目标车位处的图像；从所述目标车位处的图像中提取图像特征；将所述图像特征输入经过训练的卷积神经网络，由所述卷积神经网络识别所述目标车位处的图像是否反映所述目标车位处已停放车辆，并在确定所述目标车位处已停放所述车辆时在所述目标车位处的图像中添加标注框，以标注所述目标车位处的图像中所述车辆的位置，其中，在所述卷积神经网络的训练过程中使用的损失函数为：其中，σ表示预设的第一加权值，s表示所述卷积神经网络输出的在训练图像中标注的第一标注框的尺寸，x和y表示所述卷积神经网络输出的所述第一标注框的中心坐标，x’和y’表示所述训练图像中人为标注的第二标注框的中心坐标，表示所述卷积神经网络输出的所述第一标注框中是否具有车辆，Loss'为目标置信度损失，Loss”为分类损失；统计所述停车场的所有车位中未停放车辆的多个车位；在用户的车辆进入所述停车场时，计算所述停车场中未停放车辆的多个车位与所述用户的车辆之间的路径；根据所述多个车位与所述用户的车辆之间的路径，从所述多个车位中选择推荐给所述用户的车位；将所述推荐给所述用户的车位的信息以及所述推荐给所述用户的车位与所述用户的车辆之间的路径信息，发送给所述用户。可选地，前述的基于物联网的智慧停车管理方法，所述目标置信度损失为：其中，ci表示所述卷积神经网络输出的所述第一标注框的置信度的数值，表示所述卷积神经网络输出的所述第一标注框中是否不具有车辆，σ'表示预设的第二加权值。可选地，前述的基于物联网的智慧停车管理方法，所述分类损失为：其中，pi表示所述卷积神经网络输出的所述第一标注框中具有车辆的概率，pi'表示所述训练图像中人为标注的第二标注框中具有车辆的概率。可选地，前述的基于物联网的智慧停车管理方法，“根据所述多个车位与所述用户的车辆之间的路径，从所述多个车位中选择推荐给所述用户的车位”的步骤包括：以所述多个车位中任一车位为候选推荐车位，统计所述候选推荐车位至所述用户的车辆之间的路径长短，以及统计位于所述候选推荐车位至所述用户的车辆之间的路径之上的其他车辆的数量；根据所述候选推荐车位至所述用户的车辆之间的路径长短，以及位于所述候选推荐车位至所述用户的车辆之间的路径之上的其他车辆的数量，计算用于反映所述候选推荐车位被占用的可能性的第一分值：其中，L表示所述候选推荐车位至所述用户的车辆之间的路径的长度，n为所述候选推荐车位至所述用户的车辆之间的路径之上的其他车辆的数量，a为预设的常数；根据所述多个车位对应的第一分值高低，从所述多个车位中选择推荐给所述用户的车位。可选地，前述的基于物联网的智慧停车管理方法，“根据所述多个车位与所述用户的车辆之间的路径，从所述多个车位中选择推荐给所述用户的车位”的步骤包括：以所述多个车位中任一车位为候选推荐车位，统计与所述候选推荐车位至所述用户的车辆之间的路径间的距离小于预设阈值的其他停车位的数量；根据所述候选推荐车位至所述用户的车辆之间的路径长短，以及与所述候选推荐车位至所述用户的车辆之间的路径间的距离小于预设阈值的其他停车位的数量，计算用于反映所述用户沿所述候选推荐车位对应的路径停车的可能性的第二分值：s'＝bm2L其中，L表示所述候选推荐车位至所述用户的车辆之间的路径的长度，m为与所述候选推荐车位至所述用户的车辆之间的路径间的距离小于预设阈值的其他停车位的数量，b为预设的常数；根据所述多个车位对应的第二分值高低，从所述多个车位中选择推荐给所述用户的车位。可选地，前述的基于物联网的智慧停车管理方法，“将所述推荐给所述用户的车位的信息以及所述推荐给所述用户的车位与所述用户的车辆之间的路径信息，发送给所述用户”的步骤还包括：将所述推荐给所述用户的车位的停车费用信息发送给所述用户。可选地，前述的基于物联网的智慧停车管理方法，在“将所述推荐给所述用户的车位的停车费用信息发送给所述用户”的步骤之前，还包括：在所述用户的车辆进入所述停车场时，识别所述用户的车辆的车牌号码；根据所述用户的车辆的车牌号码，查询所述用户的身份；根据所述用户的身份，计算所述用户在所述停车场所在建筑物的停留时间；根据所述用户在所述停车场所在建筑物的停留时间，计算所述用户的车辆在所述停车场的停车时间；根据所述用户的车辆在所述停车场的停车时间，计算所述推荐给所述用户的车位的停车费用信息。可选地，前述的基于物联网的智慧停车管理方法，“通过安装在所述目标车位处的传感器采集所述目标车位处的图像”的步骤包括：实时检测所述停车场是否进入新的车辆，在发现所述停车场进入新的车辆时执行“通过安装在所述目标车位处的传感器采集所述目标车位处的图像”的步骤。第二方面，本发明提供了一种基于物联网的智慧停车管理系统，包括：图像采集模块，以停车场的所有车位中任一车位为目标车位，通过安装在所述目标车位处的传感器采集所述目标车位处的图像；图像收集模块，通过网络收集所述目标车位处的图像；特征提取模块，从所述目标车位处的图像中提取图像特征；车位分析模块，将所述图像特征输入经过训练的卷积神经网络，由所述卷积神经网络识别所述目标车位处的图像是否反映所述目标车位处已停放车辆，并在确定所述目标车位处已停放所述车辆时在所述目标车位处的图像中添加标注框，以标注所述目标车位处的图像中所述车辆的位置，其中，在所述卷积神经网络的训练过程中使用的损失函数为：其中，σ表示预设的第一加权值，s表示所述卷积神经网络输出的在训练图像中标注的第一标注框的尺寸，x和y表示所述卷积神经网络输出的所述第一标注框的中心坐标，x’和y’表示所述训练图像中人为标注的第二标注框的中心坐标，表示所述卷积神经网络输出的所述第一标注框中是否具有车辆，Loss'为目标置信度损失，Loss”为分类损失；车位统计模块，统计所述停车场的所有车位中未停放车辆的多个车位；路径计算模块，在用户的车辆进入所述停车场时，计算所述停车场中未停放车辆的多个车位与所述用户的车辆之间的路径；车位推荐模块，根据所述多个车位与所述用户的车辆之间的路径，从所述多个车位中选择推荐给所述用户的车位；信息发送模块，将所述推荐给所述用户的车位的信息以及所述推荐给所述用户的车位与所述用户的车辆之间的路径信息，发送给所述用户。本发明上述一个或多个技术方案，至少具有如下一种或多种有益效果：本发明的技术方案，通过传感器对停车场的车位的图像进行采集，基于物联网技术对传感器拍摄的图像进行收集，并使用卷积神经网络进行图像识别以分析车位当前是否处于被占用的状态，相比于现有的技术方案，本发明对卷积神经网络的损失函数进行了优化，基于卷积神经网络的输出的第一标注框的中心坐标以及训练图像中人为标注的第二标注框的中心坐标，结合目标置信度损失和分类损失，设计了轻量化的损失函数，有利于大幅降低卷积神经网络训练过程中的计算量，同时也能够有效降低卷积神经网络的模型冗余，适于高效精准地对车位是否被占用进行判断，根据判断结果向进入停车场的用户进行车位推荐，同时将推荐车位的信息以及前往推荐车位的路径信息发送给用户，以快速引导用户的车辆进入推荐车位。附图说明通过结合附图对本申请实施例进行更详细的描述，本申请的上述以及其他目的、特征和优势将变得更加明显。附图用来提供对本申请实施例的进一步理解，并且构成说明书的一部分，与本申请实施例一起用于解释本申请，并不构成对本申请的限制。在附图中，相同的参考标号通常代表相同部件或步骤。图1为根据本申请实施例的一种基于物联网的智慧停车管理方法的流程图；图2为根据本申请实施例的一种基于物联网的智慧停车管理方法的局部流程图；图3为根据本申请实施例的一种基于物联网的智慧停车管理方法的另一局部流程图；图4为根据本申请实施例的一种基于物联网的智慧停车管理方法的又一局部流程图；图5为根据本申请实施例的一种基于物联网的智慧停车管理系统的框图。具体实施方式下面参照附图来描述本发明的一些实施方式。本领域技术人员应当理解的是，这些实施方式仅仅用于解释本发明的技术原理，并非旨在限制本发明的保护范围。如图1所示，本发明的一个实施例中提供了一种基于物联网的智慧停车管理方法，包括：步骤S110，以停车场的所有车位中任一车位为目标车位，通过安装在目标车位处的传感器采集目标车位处的图像。本实施例中，对安装在停车场车位处的传感器类型不进行限制，该传感器上具有摄像头，从而能够拍摄车位的图像。具体地，可以实时检测停车场是否进入新的车辆，在发现停车场进入新的车辆时再通过安装在目标车位处的传感器采集目标车位处的图像，从而避免长时间进行图像采集造成传感器的资源消耗及性能损耗。步骤S120，通过网络收集目标车位处的图像。本实施例中，通过网络将设置在停车场多个车位处的传感器进行连接形成物联网，从而实现对多个传感器拍摄图像的归集。步骤S130，从目标车位处的图像中提取图像特征。步骤S140，将图像特征输入经过训练的卷积神经网络，由卷积神经网络识别目标车位处的图像是否反映目标车位处已停放车辆，并在确定目标车位处已停放车辆时在目标车位处的图像中添加标注框，以标注目标车位处的图像中车辆的位置，其中，在卷积神经网络的训练过程中使用的损失函数为：其中，σ表示预设的第一加权值，s表示卷积神经网络输出的在训练图像中标注的第一标注框的尺寸，x和y表示卷积神经网络输出的第一标注框的中心坐标，x’和y’表示训练图像中人为标注的第二标注框的中心坐标，Loss'为目标置信度损失，表示卷积神经网络输出的第一标注框中是否具有车辆，Loss”为分类损失。本实施例中，对卷积神经网络的损失函数进行了优化，基于卷积神经网络的输出的第一标注框的中心坐标以及训练图像中人为标注的第二标注框的中心坐标，结合目标置信度损失和分类损失，设计了轻量化的损失函数，有利于大幅降低卷积神经网络训练过程中的计算量，同时也能够有效降低卷积神经网络的模型冗余，适于高效精准地对车位是否被占用进行判断，步骤S150，统计停车场的所有车位中未停放车辆的多个车位。步骤S160，在用户的车辆进入停车场时，计算停车场中未停放车辆的多个车位与用户的车辆之间的路径。步骤S170，根据多个车位与用户的车辆之间的路径，从多个车位中选择推荐给用户的车位。本实施例中，通常地，可以根据多个车位与用户的车辆之间的路径的长短，从而选择较短路径对应的车位作为推荐给用户的车位，以确保用户能够尽快到达车位完成停车。步骤S180，将推荐给用户的车位的信息以及推荐给用户的车位与用户的车辆之间的路径信息，发送给用户。根据本实施例的技术方案，通过传感器对停车场的车位的图像进行采集，基于物联网技术对传感器拍摄的图像进行收集，并使用卷积神经网络进行图像识别以分析车位当前是否处于被占用的状态，相比于现有的技术方案，本实施例的技术方案对卷积神经网络的损失函数进行了优化，基于卷积神经网络的输出的第一标注框的中心坐标以及训练图像中人为标注的第二标注框的中心坐标，结合目标置信度损失和分类损失，设计了轻量化的损失函数，有利于大幅降低卷积神经网络训练过程中的计算量，同时也能够有效降低卷积神经网络的模型冗余，适于高效精准地对车位是否被占用进行判断，根据判断结果向进入停车场的用户进行车位推荐，同时将推荐车位的信息以及前往推荐车位的路径信息发送给用户，以快速引导用户的车辆进入推荐车位。本发明的一个实施例中还提供了一种基于物联网的智慧停车管理方法，相比于前述的实施例，本实施例的基于物联网的智慧停车管理方法，目标置信度损失为：其中，ci表示卷积神经网络输出的第一标注框的置信度的数值，表示卷积神经网络输出的第一标注框中是否不具有车辆，σ'表示预设的第二加权值。根据本实施例的技术方案，置信度用于表征所预测标注框的可信程度，对目标置信度损失的计算方式做了明确，基于目标置信度损失进一步合理优化了卷积神经网络的损失函数。本发明的一个实施例中还提供了一种基于物联网的智慧停车管理方法，相比于前述的实施例，本实施例的基于物联网的智慧停车管理方法，分类损失为：其中，pi表示卷积神经网络输出的第一标注框中具有车辆的概率，pi'表示训练图像中人为标注的第二标注框中具有车辆的概率。根据本实施例的技术方案，对分类损失的计算方式做了明确，基于分类损失进一步合理优化了卷积神经网络的损失函数。如图2所示，本发明的一个实施例中还提供了一种基于物联网的智慧停车管理方法，相比于前述的实施例，本实施例的基于物联网的智慧停车管理方法，步骤S170包括：步骤S210，以多个车位中任一车位为候选推荐车位，统计候选推荐车位至用户的车辆之间的路径长短，以及统计位于候选推荐车位至用户的车辆之间的路径之上的其他车辆的数量。本实施例中，本领域技术人员容易理解，当位于候选推荐车位至用户的车辆之间的路径之上的其他车辆的数量较多时，说明可能存在较多的车辆计划前往候选推荐车位进行停车，当位于候选推荐车位至用户的车辆之间的路径之上的其他车辆的数量较少时，说明可能只有少量的车辆计划前往候选推荐车位进行停车。步骤S220，根据候选推荐车位至用户的车辆之间的路径长短，以及位于候选推荐车位至用户的车辆之间的路径之上的其他车辆的数量，计算用于反映候选推荐车位被占用的可能性的第一分值：其中，L表示候选推荐车位至用户的车辆之间的路径的长度，n为候选推荐车位至用户的车辆之间的路径之上的其他车辆的数量，a为预设的常数。本实施例中，基于上述公式计算得到的第一分值，反映了候选推荐车位被其他车辆占用的可能性的高低。步骤S230，根据多个车位对应的第一分值高低，从多个车位中选择推荐给用户的车位。根据本实施例的技术方案，按照多个车位对应的第一分值高低选择推荐给用户的车位，可以确保用户前往的车位有较低的可能性被其他用户的车辆先行占用，能够有效提升用户的停车体验。如图3所示，本发明的一个实施例中还提供了一种基于物联网的智慧停车管理方法，相比于前述的实施例，本实施例的基于物联网的智慧停车管理方法，步骤S170包括：步骤S310，以多个车位中任一车位为候选推荐车位，统计与候选推荐车位至用户的车辆之间的路径间的距离小于预设阈值的其他停车位的数量。本实施例中，对预设阈值的距离不进行限制，例如可以是2米或3米。本领域技术人员容易理解，当与候选推荐车位至用户的车辆之间的路径间的距离小于一定距离的其他停车位的数量较多时，用户沿着候选推荐车位对应的路径行驶，即使候选推荐车位被占用，用户可以容易地停在途经的其他停车位上，从而不必返回重新寻找车位，而当与候选推荐车位至用户的车辆之间的路径间的距离小于一定距离的其他停车位的数量较少时，用户沿着候选推荐车位对应的路径行驶，如果候选推荐车位被占用，而沿途可停的其他车位又比较少，则用户则更可能需要原路返回以重新寻找车位。步骤S320，根据候选推荐车位至用户的车辆之间的路径长短，以及与候选推荐车位至用户的车辆之间的路径间的距离小于预设阈值的其他停车位的数量，计算用于反映用户沿候选推荐车位对应的路径停车的可能性的第二分值：s'＝bm2L其中，L表示候选推荐车位至用户的车辆之间的路径的长度，m为与候选推荐车位至用户的车辆之间的路径间的距离小于预设阈值的其他停车位的数量，b为预设的常数。本实施例中，基于上述公式计算得到的第二分值，反映了用户沿候选推荐车位对应的路径停车的可能性的高低。步骤S330，根据多个车位对应的第二分值高低，从多个车位中选择推荐给用户的车位。根据本实施例的技术方案，按照多个车位对应的第二分值高低选择推荐给用户的车位，用户沿着推荐车位及路径行驶时，在推荐车位被占用的情况下也可以停在途经的其他车位上，而不必返回重新寻找车位，有效提升了用户的停车体验。如图4所示，本发明的一个实施例中还提供了一种基于物联网的智慧停车管理方法，相比于前述的实施例，本实施例的基于物联网的智慧停车管理方法，步骤S180还包括：将推荐给用户的车位的停车费用信息发送给用户，具体包括：步骤S410，在用户的车辆进入停车场时，识别用户的车辆的车牌号码。本实施例中，根据现有的车牌号码识别技术，即可在用户的车辆进入停车场时容易地识别车牌号码。步骤S420，根据用户的车辆的车牌号码，查询用户的身份。本实施例中，可以将用户的车辆的车牌号码与用户的姓名、联系方式、身份等关联记录，从而可以从记录的文件中按照用户的车辆的车牌号码查询出用户的身份。步骤S430，根据用户的身份，计算用户在停车场所在建筑物的停留时间。本实施例中，例如，如果停车场所在的建筑物为办公楼，查询发现用户为办公楼内A公司的员工时，由于A公司的下班时间为下午5点，则将当前时间至下午5点的时间长度作为用户在办公楼内停留的时间，而当查询发现用户为办公楼内B公司的员工时，由于B公司的下班时间为下午6点，则将当前时间至下午6点的时间长度作为用户在办公楼内停留的时间。步骤S440，根据用户在停车场所在建筑物的停留时间，计算用户的车辆在停车场的停车时间。本实施例中，当明确了用户在停车场所在建筑物的停留时间后，则用户需要在停车场停车的时间也能够确定。步骤S450，根据用户的车辆在停车场的停车时间，计算推荐给用户的车位的停车费用信息。根据本实施例的技术方案，通常地，停车场单位时间内的停车费用是固定的，则在明确用户的车辆在停车场的停车时间后，可以估算出用户在停车场停车的总费用，对用户进行提示。如图5所示，本发明的一个实施例中提供了一种基于物联网的智慧停车管理系统，包括：图像采集模块510，以停车场的所有车位中任一车位为目标车位，通过安装在目标车位处的传感器采集目标车位处的图像。本实施例中，对安装在停车场车位处的传感器类型不进行限制，该传感器上具有摄像头，从而能够拍摄车位的图像。具体地，可以实时检测停车场是否进入新的车辆，在发现停车场进入新的车辆时再通过安装在目标车位处的传感器采集目标车位处的图像，从而避免长时间进行图像采集造成传感器的资源消耗及性能损耗。图像收集模块520，通过网络收集目标车位处的图像。本实施例中，通过网络将设置在停车场多个车位处的传感器进行连接形成物联网，从而实现对多个传感器拍摄图像的归集。特征提取模块530，从目标车位处的图像中提取图像特征。车位分析模块540，将图像特征输入经过训练的卷积神经网络，由卷积神经网络识别目标车位处的图像是否反映目标车位处已停放车辆，并在确定目标车位处已停放车辆时在目标车位处的图像中添加标注框，以标注目标车位处的图像中车辆的位置，其中，在卷积神经网络的训练过程中使用的损失函数为：其中，σ表示预设的第一加权值，s表示卷积神经网络输出的在训练图像中标注的第一标注框的尺寸，x和y表示卷积神经网络输出的第一标注框的中心坐标，x’和y’表示训练图像中人为标注的第二标注框的中心坐标，表示所述卷积神经网络输出的所述第一标注框中是否具有车辆，Loss'为目标置信度损失，Loss”为分类损失。本实施例中，对卷积神经网络的损失函数进行了优化，基于卷积神经网络的输出的第一标注框的中心坐标以及训练图像中人为标注的第二标注框的中心坐标，结合目标置信度损失和分类损失，设计了轻量化的损失函数，有利于大幅降低卷积神经网络训练过程中的计算量，同时也能够有效降低卷积神经网络的模型冗余，适于高效精准地对车位是否被占用进行判断，车位统计模块550，统计停车场的所有车位中未停放车辆的多个车位。路径计算模块560，在用户的车辆进入停车场时，计算停车场中未停放车辆的多个车位与用户的车辆之间的路径。车位推荐模块570，根据多个车位与用户的车辆之间的路径，从多个车位中选择推荐给用户的车位。本实施例中，通常地，可以根据多个车位与用户的车辆之间的路径的长短，从而选择较短路径对应的车位作为推荐给用户的车位，以确保用户能够尽快到达车位完成停车。信息发送模块580，将推荐给用户的车位的信息以及推荐给用户的车位与用户的车辆之间的路径信息，发送给用户。根据本实施例的技术方案，通过传感器对停车场的车位的图像进行采集，基于物联网技术对传感器拍摄的图像进行收集，并使用卷积神经网络进行图像识别以分析车位当前是否处于被占用的状态，相比于现有的技术方案，本实施例的技术方案对卷积神经网络的损失函数进行了优化，基于卷积神经网络的输出的第一标注框的中心坐标以及训练图像中人为标注的第二标注框的中心坐标，结合目标置信度损失和分类损失，设计了轻量化的损失函数，有利于大幅降低卷积神经网络训练过程中的计算量，同时也能够有效降低卷积神经网络的模型冗余，适于高效精准地对车位是否被占用进行判断，根据判断结果向进入停车场的用户进行车位推荐，同时将推荐车位的信息以及前往推荐车位的路径信息发送给用户，以快速引导用户的车辆进入推荐车位。以上结合具体实施例描述了本申请的基本原理，但是，需要指出的是，在本申请中提及的优点、优势、效果等仅是示例而非限制，不能认为这些优点、优势、效果等是本申请的各个实施例必须具备的。另外，上述公开的具体细节仅是为了示例的作用和便于理解的作用，而非限制，上述细节并不限制本申请为必须采用上述具体的细节来实现。本申请中涉及的器件、装置、设备、系统的方框图仅作为例示性的例子并且不意图要求或暗示必须按照方框图示出的方式进行连接、布置、配置。如本领域技术人员将认识到的，可以按任意方式连接、布置、配置这些器件、装置、设备、系统。诸如“包括”、“包含”、“具有”等等的词语是开放性词汇，指“包括但不限于”，且可与其互换使用。这里所使用的词汇“或”和“和”指词汇“和/或”，且可与其互换使用，除非上下文明确指示不是如此。这里所使用的词汇“诸如”指词组“诸如但不限于”，且可与其互换使用。还需要指出的是，在本申请的装置、设备和方法中，各部件或各步骤是可以分解和/或重新组合的。这些分解和/或重新组合应视为本申请的等效方案。提供所公开的方面的以上描述以使本领域的任何技术人员能够做出或者使用本申请。对这些方面的各种修改对于本领域技术人员而言是非常显而易见的，并且在此定义的一般原理可以应用于其他方面而不脱离本申请的范围。因此，本申请不意图被限制到在此示出的方面，而是按照与在此公开的原理和新颖的特征一致的最宽范围。为了例示和描述的目的已经给出了以上描述。此外，此描述不意图将本申请的实施例限制到在此公开的形式。尽管以上已经讨论了多个示例方面和实施例，但是本领域技术人员将认识到其某些变型、修改、改变、添加和子组合。
