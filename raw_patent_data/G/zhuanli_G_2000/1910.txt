标题title
一种水质监测系统健康度评价方法、计算机设备及介质
摘要abst
本申请公开了一种水质监测系统健康度评价方法、计算机设备及介质。该方法通过获取每个工作模块相关的监测参数，生成相应的预判断数据集，并根据各工作模块在工作初始阶段多次采样得到的监测参数，针对系统内部单个独立模块、模块组合及流程运行状态进行自学习；根据自学习结果进行计算判断，然后各个工作模块产生对应的预测或故障信息，并产生该部分对应的健康值，得出涵盖各个工作模块健康值的健康值矩阵，并结合配置的健康关系矩阵，进行汇总计算，综合判定系统健康程度，从而可通过每天对水质监测系统进行诊断，以减少整个系统停机、数据丢失、人员大量投入维护、故障突发导致备货不足以及维修不及时等异常情况。
权利要求书clms
1.一种水质监测系统健康度评价方法，其特征在于，包括：将所述水质监测系统划分为多个工作模块，获取每个工作模块相关的监测参数，生成相应的预判断数据集，并根据各工作模块在工作初始阶段多次采样得到的监测参数计算相应的自学习参数；基于每个工作模块的预判断数据集及其自学习参数，计算该工作模块的量化参数值，再对照预先设定的阈值，得到该工作模块的状态判定值；构建健康值矩阵V和健康关系矩阵K；所述健康值矩阵V的元素vij与所述工作模块一一对应，元素取值即为所述状态判定值；所述健康关系矩阵K的元素kij为预先设定的值，表示对应的所述元素vij对水质监测系统整体的影响程度；根据所述健康值矩阵V和健康关系矩阵K，计算得到系统健康度矩阵H，进而得到系统健康度。2.根据权利要求1所述的水质监测系统健康度评价方法，其特征在于，所述多个工作模块包括：COD传感器模块、水泵模块、采水模块、排水模块和配水模块以及各模块两两之间的健康关联作用模块。3.根据权利要求2所述的水质监测系统健康度评价方法，其特征在于，所述COD传感器模块的预判断数据集记为第一子集，计算COD传感器模块的状态判定值的过程如下：对第n日多次采样的COD浊度原始测量值A进行算数平均处理，得到第n日的浊度日均值Zn；基于卷积算法对浊度日均值Zn进行滑动平均滤波处理，得到低通滤波浊度值Hn；根据最小二乘法计算低通滤波浊度值Hn的最小二乘斜率Kn；计算低通滤波浊度值Hn的Pearson相关系数Rn；计算浊度日均值Zn与自学习参数B的差值Dn；自学习参数B=/ N，ZN表示该COD传感器模块新装后第N天的浊度日均值，N为用户设定值，n＞N；记COD传感器模块的状态判定值为v11，则有：v11=1，W1=0，若同时满足Kn＞Kl、Rn＞Rl、Dn＞Dl，则W1=W1+1，当W1＝L1时，v11=0；W1为第一子集中的计数器，Kl、Rl、Dl、L1均为用户设定值。4.根据权利要求2所述的水质监测系统健康度评价方法，其特征在于，所述水泵模块的预判断数据集记为第二子集，计算水泵模块的状态判定值的过程如下：It=Max{i1,i2,……,it}；it为每次水泵启动指令发出后第t分钟时读取的负载直流电流值；It为每次水泵启动指令发出后t分钟内负载直流电流的最大值；Pn=It/Iz，Iz为水泵模块的自学习参数，Iz=/ N，其中IN表示该水泵模块新装后第N次水泵启动指令发出后t分钟内负载直流电流的最大值，N为用户设定值；设定有效性控制参数△I，若Iz＞I+△I或Iz＜I－△I，判断为自学习失败，则重新开始学习或直接停止系统运算监控，其中I为水泵额定电流值；记水泵模块的状态判定值为v22，则有：v22=1，W2=0，若Pn＜P，则W2=W2+1，当W2＝L2时，v22=0；W2为第二子集中的计数器，P、L2为用户设定值。5.根据权利要求2所述的水质监测系统健康度评价方法，其特征在于，所述采水模块的预判断数据集记为第三子集，计算采水模块的状态判定值的过程如下：；v33为采水模块的状态判定值；C为设定的最大采水允许时长；Tcn为第n次采水开始至采水结束所用时间；Tcz为采水模块的自学习参数，Tcz=/N；TcN表示该采水模块新装后第N次采水开始至采水结束所用时间，N为用户设定值，n＞N。6.根据权利要求2所述的水质监测系统健康度评价方法，其特征在于，所述排水模块的预判断数据集记为第四子集，计算排水模块的状态判定值的过程如下：；v44为排水模块的状态判定值；U为设定的最大排水允许时长；Tpn为第n次排水开始至排水结束所用时间；Tpz为排水模块的自学习参数；Tpz=/N，TpN表示该排水模块新装后第N次排水开始至排水结束所用时间，N为用户设定值，n＞N。7.根据权利要求2所述的水质监测系统健康度评价方法，其特征在于，所述配水模块的预判断数据集记为第五子集，计算配水模块的状态判定值的过程如下：；v55为配水模块的状态判定值；D为设定的最大配水允许时长；Tdn为第n次配水开始至配水结束所用时间；Tdz为配水模块的自学习参数；Tdz=/N，TdN表示该配水模块新装后第N次配水开始至配水结束所用时间，N为用户设定值，n＞N。8.根据权利要求1所述的水质监测系统健康度评价方法，其特征在于，所述系统健康度矩阵H、系统健康度的计算方法如下：记健康值矩阵V和健康关系矩阵K的组成分别如下：对健康关系矩阵K所有元素进行归一化处理，首先，计算矩阵K内部所有元素的总和S；然后，将每个元素除以总和S，得到新矩阵P，表示为：计算系统健康度矩阵H，表示为：计算系统健康度矩阵H内所有元素的总和，得到系统健康度/＞。9.一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至8中任一项所述水质监测系统健康度评价方法的步骤。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至8中任一项所述水质监测系统健康度评价方法的步骤。
说明书desc
技术领域本申请涉及监测系统状态评测技术领域，特别是涉及一种水质监测系统健康度评价方法。背景技术近年来，随着城市化进程的加速和环境污染问题的日益严重，水质安全已成为人们关注的焦点。为了保障水质的安全和可持续利用，智慧水质监测成为智慧城市建设中的一项重要内容。水质监测系统作为监测水质状态数据的来源，其准确性、稳定性、安全性对于整个生态环境的监管和治理有着非常重要的指导意义。水质监测系统虽然其表现形式多种多样，如固定站房式、小型户外监测站式、预警站式等等，但是其构成均包含采配水单元、分析单元、动力单元、环境监测单元。正是因为这种系统组成设备多，逻辑关系复杂、干扰因素多，导致系统容易出现故障和问题。传统的工作流程是：故障发生后，系统判断部件损坏，然后产生相应的报警信息，之后根据报警信息，相关运维负责人前去维护和修理。在这期间会引发设备停运、监测数据丢失、已经获取的监测数据有效性降低、人员投入成本上升等一系列人员和经济问题。可见，传统的水质监测系统运行模式对系统状态监测滞后性严重，总体来说是：先故障，再发现，再维修。发明内容基于此，针对上述技术问题，本申请提供了一种水质监测系统健康度评价方法、计算机设备及介质，可通过每天对水质监测系统进行诊断，为可能到来的故障进行提前预警，以减少整个水质监测系统停机、数据丢失、人员大量投入维护、故障突发导致备货不足以及维修不及时等异常情况。本申请提供的解决方案如下：第一方面，一种水质监测系统健康度评价方法，包括：将所述水质监测系统划分为多个工作模块，获取每个工作模块相关的监测参数，生成相应的预判断数据集，并根据各工作模块在工作初始阶段多次采样得到的监测参数计算相应的自学习参数；基于每个工作模块的预判断数据集及其自学习参数，计算该工作模块的量化参数值，再对照预先设定的阈值，得到该工作模块的状态判定值；构建健康值矩阵V和健康关系矩阵K；所述健康值矩阵V的元素vij与所述工作模块一一对应，元素取值即为所述状态判定值；所述健康关系矩阵K的元素kij为预先设定的值，表示对应的所述元素vij对水质监测系统整体的影响程度；根据所述健康值矩阵V和健康关系矩阵K，计算得到系统健康度矩阵H，进而得到系统健康度。这里划分的多个工作模块，与预判断数据集以及后面健康值矩阵V的元素一一对应，所以，这里所说的工作模块不限于单独功能组件，还可以是某一单独功能组件对另一单独功能组件的健康关联作用；因此，元素vij的值也可以认为是第i单独模块对第j单独模块的健康影响值。可选地，所述多个工作模块包括：COD传感器模块、水泵模块、采水模块、排水模块和配水模块以及各模块两两之间的健康关联作用模块。进一步地，所述COD传感器模块的预判断数据集记为第一子集，计算COD传感器模块的状态判定值的过程如下：对第n日多次采样的COD浊度原始测量值A进行算数平均处理，得到第n日的浊度日均值Zn；基于卷积算法对浊度日均值Zn进行滑动平均滤波处理，得到低通滤波浊度值Hn；根据最小二乘法计算低通滤波浊度值Hn的最小二乘斜率Kn；计算低通滤波浊度值Hn的Pearson相关系数Rn；计算浊度日均值Zn与自学习参数B的差值Dn；自学习参数B=/ N，ZN表示该COD传感器模块新装后第N天的浊度日均值，N为用户设定值，n＞N；记COD传感器模块的状态判定值为v11，则有：v11=1，W1=0，若同时满足Kn＞Kl、Rn＞Rl、Dn＞Dl，则W1=W1+1，当W1＝L1时，v11=0；W1为第一子集中的计数器，Kl、Rl、Dl、L1均为用户设定值。进一步地，所述水泵模块的预判断数据集记为第二子集，计算水泵模块的状态判定值的过程如下：It=Max{i1,i2,……,it}it为每次水泵启动指令发出后第t分钟时读取的负载直流电流值；It为每次水泵启动指令发出后t分钟内负载直流电流的最大值；Pn=It/Iz，Iz为水泵模块的自学习参数，Iz=/ N，其中IN表示该水泵模块新装后第N次水泵启动指令发出后t分钟内负载直流电流的最大值，N为用户设定值；设定有效性控制参数△I，若Iz＞I+△I或Iz＜I－△I，判断为自学习失败，则重新开始学习或直接停止系统运算监控，其中I为水泵额定电流值；记水泵模块的状态判定值为v22，则有：v22=1，W2=0，若Pn＜P，则W2=W2+1，当W2＝L2时，v22=0；W2为第二子集中的计数器，P、L2为用户设定值。进一步地，所述采水模块的预判断数据集记为第三子集，计算采水模块的状态判定值的过程如下：v33为采水模块的状态判定值；C为设定的最大采水允许时长；Tcn为第n次采水开始至采水结束所用时间；Tcz为采水模块的自学习参数，Tcz=/N；TcN表示该采水模块新装后第N次采水开始至采水结束所用时间，N为用户设定值，n＞N。进一步地，所述排水模块的预判断数据集记为第四子集，计算排水模块的状态判定值的过程如下：v44为排水模块的状态判定值；U为设定的最大排水允许时长；Tpn为第n次排水开始至排水结束所用时间；Tpz为排水模块的自学习参数；Tpz=/N，TpN表示该排水模块新装后第N次排水开始至排水结束所用时间，N为用户设定值，n＞N。进一步地，所述配水模块的预判断数据集记为第五子集，计算配水模块的状态判定值的过程如下：v55为配水模块的状态判定值；D为设定的最大配水允许时长；Tdn为第n次配水开始至配水结束所用时间；Tdz为配水模块的自学习参数；Tdz=/N，TdN表示该配水模块新装后第N次配水开始至配水结束所用时间，N为用户设定值，n＞N。进一步地，所述系统健康度矩阵H、系统健康度的计算方法如下：记健康值矩阵V和健康关系矩阵K的组成分别如下：对健康关系矩阵K所有元素进行归一化处理，首先，计算矩阵K内部所有元素的总和S；然后，将每个元素除以总和S，得到新矩阵P，表示为：计算系统健康度矩阵H，表示为：计算系统健康度矩阵H内所有元素的总和，得到系统健康度。第二方面，一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，其特殊之处在于，所述处理器执行所述计算机程序时实现上述水质监测系统健康度评价方法的步骤。第三方面，一种计算机可读存储介质，其上存储有计算机程序，其特殊之处在于，所述计算机程序被处理器执行时实现上述水质监测系统健康度评价方法的步骤。本申请至少具有以下有益效果：本申请通过对水质监测系统结构和运行特点的深入分析，将水质监测系统划分为多个工作模块，获取每个工作模块相关的监测参数，生成相应的预判断数据集，并根据各工作模块在工作初始阶段多次采样得到的监测参数，针对系统内部单个独立模块、模块组合及流程运行状态进行自学习；根据自学习结果进行计算判断，然后各个工作模块产生对应的预测或故障信息，并产生该部分对应的健康值，得出涵盖各个工作模块健康值的健康值矩阵V，并结合配置的健康关系矩阵K，进行汇总计算，综合判定系统健康程度，从而可通过每天对水质监测系统进行诊断，为可能到来的故障进行提前预警，以减少整个水质监测系统停机、数据丢失、人员大量投入维护、故障突发导致备货不足以及维修不及时等异常情况。本申请具备独立性和可扩展性，独立性在于独立于系统运行，不干扰、不影响设备或系统的整体运行状况；可扩展性在于，根据系统硬件的迭代和升级情况，可不断接入新的模块参与判断评估。附图说明图1为本申请的一种水质监测系统健康度评价方法的流程原理示意图；图2为本申请一个实施例的方法步骤流程图；图3为本申请一个实施例的数据流向框架。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。在本申请的描述中：除非另有说明，“多个”的含义是两个或两个以上。本申请中的术语“第一”、“第二”、“第三”等旨在区别指代的对象，而不具有技术内涵方面的特别意义。“包括”、“包含”、“具有”等表述方式，同时还意味着“不限于”。如图1至图3所示，本实施例提供的一种水质监测系统健康度评价方法，包括以下步骤：S1：将所述水质监测系统划分为多个工作模块，获取每个工作模块相关的监测参数，生成相应的预判断数据集，并根据各工作模块在工作初始阶段多次采样得到的监测参数计算相应的自学习参数；这里划分的多个工作模块，与预判断数据集以及后面健康值矩阵V的元素一一对应，所以，这里所说的工作模块不限于单独功能组件，还可以是某一单独功能组件对另一单独功能组件的健康关联作用；因此，元素vij的值也可以认为是第i单独模块对第j单独模块的健康影响值。S2：基于每个工作模块的预判断数据集及其自学习参数，计算该工作模块的量化参数值，再对照预先设定的阈值，得到该工作模块的状态判定值；S3：构建健康值矩阵V和健康关系矩阵K；所述健康值矩阵V的元素vij与所述工作模块一一对应，元素取值即为所述状态判定值；所述健康关系矩阵K的元素kij为预先设定的值，表示对应的所述元素vij对水质监测系统整体的影响程度；S4：根据所述健康值矩阵V和健康关系矩阵K，计算得到系统健康度矩阵H，进而得到系统健康度。以下具体介绍COD传感器模块、水泵模块、采水模块、排水模块、配水模块的预判断数据集的计算方法。1、关于COD传感器模块COD传感器模块的预判断数据集记为第一子集，计算COD传感器模块的状态判定值的过程如下：1.1）对第n日多次采样的COD浊度原始测量值A进行算数平均处理，得到第n日的浊度日均值Zn；公式如下：其中，Zn为第n日的浊度日均值数据，Aq表示传感器在当日第q次实际测量得到的浓度值。1.2）基于卷积算法对浊度日均值Zn进行滑动平均滤波处理，得到低通滤波浊度值Hn。将测得的浊度日均值Zn表示为长度为n的离散函数F，定义一个平均滤波卷积核为G，长度为k，则其每个元素的值为1/k，则滑动平均的计算可以表示为：其中，Hn表示滑动平均滤波后的日均浊度值结果，F表示第x个日均浓度，G表示卷积核的第y个元素，*表示卷积操作。1.3）根据最小二乘法计算第n日的低通滤波浊度值Hn的最小二乘斜率Kn：1.4）计算第n日的低通滤波浊度值Hn的Pearson相关系数Rn：1.5）计算第n日浊度日均值Zn与自学习参数B的差值Dn；自学习参数B=/ N，ZN表示该COD传感器模块新装后第N天的浊度日均值，N为用户设定值，n＞N；本实施例具体取N≤6。1.6）记COD传感器模块的状态判定值为v11，则有：v11=1，W1=0，若同时满足Kn＞Kl、Rn＞Rl、Dn＞Dl，则W1=W1+1，当W1＝L1时，v11=0；W1为第一子集中的计数器，Kl、Rl、Dl、L1均为用户设定值。若v11=0，则表明COD传感器即将完全损坏，需要筹备人工维修或更换。2、关于水泵模块水泵模块的预判断数据集记为第二子集，计算水泵模块的状态判定值的过程如下：2.1） It=Max{i1,i2,……,it}it为每次水泵启动指令发出后第t分钟时读取的负载直流电流值；It为每次水泵启动指令发出后t分钟内负载直流电流的最大值；这里，t的取值可以是4，在很多应用场景下，一般t大于采水时长即可，采水时长是指系统从采水开始至采水完成的时间间隔；2.2） Pn=It/IzIz为水泵模块的自学习参数，Iz=/ N，其中IN表示该水泵模块新装后第N次水泵启动指令发出后t分钟内负载直流电流的最大值，N为用户设定值，本实施例取N≤10；考虑到水泵出厂通常就带有误差，实际水泵不一定按其额定电流运行，本实施例中还设置有自学习校验过程，如图2所示：设定有效性控制参数△I，若Iz＞I+△I或Iz＜I－△I，判断为自学习失败，则重新开始学习或直接停止系统运算监控，其中I为水泵额定电流值；例如：水泵额定电流值I为10A，△I可设定为2A，即只要实际电流在8A-12A之间，就是有效的。2.3）记水泵模块的状态判定值为v22，则有：v22=1，W2=0，若Pn＜P，则W2=W2+1，当W2＝L2时，v22=0；W2为第二子集中的计数器，P、L2为用户设定值。若v22=0，则表明水泵故障或故障风险。3、关于采水模块采水模块的预判断数据集记为第三子集，计算采水模块的状态判定值的过程如下：v33为采水模块的状态判定值；C为设定的采水最大允许时长；Tcn为第n次采水开始至采水结束所用时间；Tcz为采水模块的自学习参数；Tcz=/N；TcN表示该采水模块新装后第N次采水开始至采水结束所用时间，N为用户设定值，n＞N，本实施例中取N≤48。本实施例中C取值为3，若v33≤0.67，则表明采水相关管路及阀门有故障或故障风险。4、关于排水模块排水模块的预判断数据集记为第四子集，计算排水模块的状态判定值的过程如下：v44为排水模块的状态判定值；U为设定的排水最大允许时长；Tpn为第n次排水开始至排水结束所用时间；Tpz为排水模块的自学习参数；Tpz=/N，TpN表示该排水模块新装后第N次排水开始至排水结束所用时间，N为用户设定值，n＞N，本实施例中取N≤48。本实施例中U取值为1，若v44≤0.5，则表明排水相关管路及阀门有故障或故障风险。5、关于配水模块配水模块的预判断数据集记为第五子集，计算配水模块的状态判定值的过程如下：v55为配水模块的状态判定值；D为设定的最大配水允许时长；Tdn为第n次配水开始至配水结束所用时间；Tdz为配水模块的自学习参数；Tdz=/N，TdN表示该配水模块新装后第N次配水开始至配水结束所用时间，N为用户设定值，n＞N，本实施例中取N≤48。本实施例中D取值为3，若v55≤0.67，则表明配水相关管路及阀门有故障或故障风险。以上各个工作模块，与预判断数据集以及后面健康值矩阵V的元素一一对应，如图3所示，所以，这里所说的工作模块不限于单独功能组件，还可以是某一单独功能组件对另一单独功能组件的健康关联作用；因此，元素vij的值也可以认为是第i单独模块对第j单独模块的健康影响值。例如，单独的水泵模块和采水模块都给出告警时，不宜直接认定“系统健康度极低”，因为当水泵出现堵塞时，也会导致采水时间延长；虽然此时采水模块的预判断数据集计算结果显示采水时间明显延长，但很可能采水模块本身并无故障，通过引入水泵模块对采水模块的健康影响值，就能够进一步提高系统健康度评估的准确性。在得到以上各个工作模块的计算结果后，可根据加权分数思想进行系统健康度评判。具体如下：记健康值矩阵V和健康关系矩阵K的组成分别如下：健康值矩阵V，其元素为 vij，vij表示第i单独模块对第j单独模块的健康影响值；对应的健康关系矩阵K，其元素为 kij。健康关系矩阵K中的元素均为有向元素，kij表示对应的vij对系统整体的影响程度，kij用0~100之间的正整数表示权重。对健康关系矩阵K所有元素进行归一化处理：首先，计算健康关系矩阵K内部所有元素的总和，记为S：S= ΣK，其中i∈，j∈然后，将每个元素k除以总和S，得到归一化处理后的新矩阵P：P = k / S，其中i∈，j∈；表示为：例如，将COD传感器模块编号为1，水泵模块编号为2，采水模块编号为3，排水模块编号为4，配水模块编号为5，则有：健康关系矩阵K中的值，根据系统及用户要求，自行设定；健康值矩阵V在本实施例中为主对角矩阵。最后，两矩阵点乘，计算系统健康度矩阵H，表示为：计算系统健康度矩阵H内所有元素的总和，得到系统健康度，Soh为百分比数值，数值越大表示系统健康程度越高，最大不会超过100%。从健康值矩阵V中可体现出各个工作模块是否正常工作，从系统健康度Soh可以看出整个系统运行的健康程度，还可根据Soh百分比数值分级：低风险、中风险、高风险。本实施例针对系统内部单个部件、模块组合、流程运行进行状态进行自学习，之后根据自学习结果进行计算判断，然后各个模块产生对应的预测或故障信息，并产生该部分对应的健康值，通过汇总计算，综合判定系统健康程度。可通过每天对水质监测系统进行诊断，为可能到来的故障进行提前预警，以减少整个水质监测系统停机、数据丢失、人员大量投入维护、故障突发导致备货不足以及维修不及时等异常情况。本申请具备独立性和可扩展性，独立性在于独立于系统运行，不干扰、不影响设备或系统的整体运行状况；可扩展性在于，根据系统硬件的迭代和升级情况，可不断接入新的模块参与判断评估。本实施例可评估水质监测分析仪器、采配水单元、系统流程运行状态，并综合评估当前整个水质监测系统运行状态。还可根据不同系统实际情况，对前述数据子集进行裁剪选择，灵活调整所需的评估内容，以适配不同系统。在一个实施例中，还提供了一种计算机设备，该计算机设备可以是服务器，也可以是终端，通过获取各个工作模块相关的监测参数以及用户设定的参数等，执行水质监测系统健康度评价方法，再通过人机交互界面呈现系统健康度评价信息以及告警提示，其中系统健康度评价信息可以是系统健康度Soh以及前述分级风险情况，还可以同时展示健康值矩阵V中对应的各个单独模块的健康状态。在一个实施例中，还提供了一种计算机可读存储介质，其上存储有计算机程序，涉及上述实施例方法中的全部或部分流程。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。
