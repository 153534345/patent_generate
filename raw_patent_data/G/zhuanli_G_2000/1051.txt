标题title
基于三维引擎的夜视图像处理方法、系统、设备、介质
摘要abst
本发明涉及图像处理技术领域，具体为基于三维引擎的夜视图像处理方法、系统、设备、介质，该处理方法中，通过获取三维引擎摄影机的屏幕图像，将屏幕图像整体亮度增强后，获取人眼可接受的饱和度最低值，基于饱和度最低值，处理第一屏幕图像后，与预设灰色模板图像进行叠加融合，得到第三屏幕图像，将第三屏幕图像中每个位置的所有颜色通道的加权平均值作为灰度图的灰度值，得到夜视效果好的夜视模拟图像，通过模拟夜间光照条件和颜色调整，使夜视效果更加逼真，该处理方法步骤简单，易于实现，效率高，可根据用户需求进行系数等的调整和优化，满足不同应用场景的要求。
权利要求书clms
1.一种基于三维引擎的夜视图像处理方法，其特征在于，包括如下操作：S1、获取屏幕图像，所述屏幕图像经亮度增强处理，得到第一屏幕图像；S2、获取所述第一屏幕图像的饱和度最低值，基于所述饱和度最低值，得到第二屏幕图像；S3、创建灰色模板图像，所述灰色模板图像与第二屏幕图像经叠加处理，得到第三屏幕图像；S4、所述第三屏幕图像经灰度化处理，得到夜视模拟图像。2.根据权利要求1所述的夜视图像处理方法，其特征在于，所述S1中亮度增强处理的操作具体为：预设亮度系数，基于所述亮度系数，增强所述屏幕图像中每个位置处的颜色通道的强度，得到所述第一屏幕图像。3.根据权利要求1所述的夜视图像处理方法，其特征在于，所述S2中基于饱和度最低值，得到第二屏幕图像的操作具体为：降低所述第一屏幕图像中每个位置处的饱和度，降低幅度与所述饱和度最低值相等，得到间接屏幕图像；所述间接屏幕图像中每个位置处的饱和度，经均衡处理后，与所述饱和度最低值相加，得到所述第二屏幕图像。4.根据权利要求1所述的夜视图像处理方法，其特征在于，所述S3的操作具体为：预设对比度系数，基于所述对比度系数，分别降低所述第二屏幕图像与灰色模板图像的饱和度后，经叠加融合处理，得到所述第三屏幕图像。5.根据权利要求1所述的夜视图像处理方法，其特征在于，所述S4的操作具体为：预设灰度系数，基于所述灰度系数，降低所述第三屏幕图像中每个位置处的颜色通道的强度，得到所述夜视模拟图像。6.根据权利要求1所述的夜视图像处理方法，其特征在于，所述S3中灰色模板图像的灰度值为0.5。7.根据权利要求2或5所述的夜视图像处理方法，其特征在于，所述颜色通道包括红色通道、绿色通道和蓝色通道。8.一种基于三维引擎的夜视图像处理系统，其特征在于，包括：第一屏幕图像生成模块，获取屏幕图像，所述屏幕图像经亮度增强处理，得到第一屏幕图像；第二屏幕图像生成模块，获取所述第一屏幕图像的饱和度最低值，基于所述饱和度最低值，得到第二屏幕图像；第三屏幕图像生成模块，创建灰色模板图像，所述灰色模板图像与第二屏幕图像经叠加处理，得到第三屏幕图像；夜视模拟图像生成模块，所述第三屏幕图像经灰度化处理，得到夜视模拟图像。9.一种基于三维引擎的夜视图像处理设备，其特征在于，包括处理器和存储器，其中，所述处理器执行所述存储器中保存的计算机程序时实现如权利要求1-7任一项所述的夜视图像处理方法。10.一种计算机可读存储介质，其特征在于，用于存储计算机程序，其中，所述计算机程序被处理器执行时实现如权利要求1-7中任一项所述的夜视图像处理方法。
说明书desc
技术领域本发明涉及图像处理技术领域，具体为基于三维引擎的夜视图像处理方法、系统、设备、介质。背景技术三维游戏引擎是一种用于开发和运行游戏的软件框架，包括3D图形的各种技术处理，三维游戏引擎中的夜视技术能够在低光条件下增强人类视觉的技术，常用于游戏、虚拟现实和模拟训练等应用中，能够提供逼真的夜间场景效果，增强用户夜视体验。在夜视模拟方面，常用像素着色器来模拟夜视效果，然而利用这种这种方法进行图像处理的过程中，计算复杂度较高、稳定性较差，且计算结果可信度较差，导致夜视模拟效率低、质量差。发明内容本发明的目的是提供一种基于三维引擎的夜视图像处理方法、系统、设备、介质。本发明技术方案如下：一种基于三维引擎的夜视图像处理方法，包括如下操作：S1、获取屏幕图像，所述屏幕图像经亮度增强处理，得到第一屏幕图像；S2、获取所述第一屏幕图像的饱和度最低值，基于所述饱和度最低值，得到第二屏幕图像；S3、创建灰色模板图像，所述灰色模板图像与第二屏幕图像经叠加处理，得到第三屏幕图像；S4、所述第三屏幕图像经灰度化处理，得到夜视模拟图像。所述S1中亮度增强处理的操作具体为：预设亮度系数，基于所述亮度系数，增强所述屏幕图像中每个位置处的颜色通道的强度，得到所述第一屏幕图像。所述S2中基于饱和度最低值，得到第二屏幕图像的操作具体为：降低所述第一屏幕图像中每个位置处的饱和度，降低幅度与所述饱和度最低值相等，得到间接屏幕图像；所述间接屏幕图像中每个位置处的饱和度，经均衡处理后，与所述饱和度最低值相加，得到所述第二屏幕图像。所述S3的操作具体为：预设对比度系数，基于所述对比度系数，分别降低所述第二屏幕图像与灰色模板图像的饱和度后，经叠加融合处理，得到所述第三屏幕图像。所述S4的操作具体为：预设灰度系数，基于所述灰度系数，降低所述第三屏幕图像中每个位置处的颜色通道的强度，得到所述夜视模拟图像。所述S3中灰色模板图像的灰度值为0.5。所述颜色通道包括红色通道、绿色通道和蓝色通道。一种基于三维引擎的夜视图像处理系统，包括：第一屏幕图像生成模块，获取屏幕图像，所述屏幕图像经亮度增强处理，得到第一屏幕图像；第二屏幕图像生成模块，获取所述第一屏幕图像的饱和度最低值，基于所述饱和度最低值，得到第二屏幕图像；第三屏幕图像生成模块，创建灰色模板图像，所述灰色模板图像与第二屏幕图像经叠加处理，得到第三屏幕图像；夜视模拟图像生成模块，所述第三屏幕图像经灰度化处理，得到夜视模拟图像。一种基于三维引擎的夜视图像处理设备，包括处理器和存储器，其中，所述处理器执行所述存储器中保存的计算机程序时实现上述的夜视图像处理方法。一种计算机可读存储介质，用于存储计算机程序，其中，所述计算机程序被处理器执行时实现上述的夜视图像处理方法。本发明的有益效果在于：本发明提供的一种基于三维引擎的夜视图像处理方法，获取三维引擎摄影机的屏幕图像，将屏幕图像整体亮度增强后，获取人眼可接受的饱和度最低值，基于饱和度最低值，处理第一屏幕图像后，与预设灰色模板图像进行叠加融合，得到第三屏幕图像，将第三屏幕图像中每个位置的所有颜色通道的加权平均值作为灰度图的灰度值，得到夜视效果好的夜视模拟图像，通过模拟夜间光照条件和颜色调整，使夜视效果更加逼真，该处理方法步骤简单，易于实现，效率高，可根据用户需求进行系数等的调整和优化，满足不同应用场景的要求。具体实施方式本实施例提供一种基于三维引擎的夜视图像处理方法，包括如下操作：S1、获取屏幕图像，所述屏幕图像经亮度增强处理，得到第一屏幕图像；S2、获取所述第一屏幕图像的饱和度最低值，基于所述饱和度最低值，得到第二屏幕图像；S3、创建灰色模板图像，所述灰色模板图像与第二屏幕图像经叠加处理，得到第三屏幕图像；S4、所述第三屏幕图像经灰度化处理，得到夜视模拟图像。S1、获取屏幕图像，屏幕图像经亮度增强处理，得到第一屏幕图像。获取三维引擎摄影机的渲染画面，然后对渲染画面进行图像采样，获取彩色的屏幕图像M0，预设亮度系数，基于亮度系数，增强屏幕图像中每个位置处的颜色通道的强度，得到第一屏幕图像。颜色通道包括红色通道、绿色通道和蓝色通道。得到第一屏幕图像的操作可通过如下公式实现：M=M0·L1，M为第一屏幕图像，L1为亮度系数，L1大于0。S2、获取第一屏幕图像的饱和度最低值，基于饱和度最低值，得到第二屏幕图像。计算第一屏幕图像中每个位置处的饱和度值，获取人眼可接受的饱和度最低值。获取饱和度最低值的操作可通过如下公式实现：Ls=min，Ls为饱和度最低值，Mr为第一屏幕图像中某一位置的红色通道强度，Mg为第一屏幕图像中某一位置的绿色通道强度，Mb为第一屏幕图像中某一位置的蓝色通道强度，0.30、0.59、0.11分别为第一红色通道系数、第一绿色通道系数和第一蓝色通道系数。基于饱和度最低值，得到第二屏幕图像的操作为：降低第一屏幕图像中每个位置处的饱和度，降低幅度与饱和度最低值相等，得到间接屏幕图像；间接屏幕图像中每个位置处的饱和度，经均衡处理后，与饱和度最低值相加，得到第二屏幕图像。均衡处理的操作为，预设饱和度系数，间接屏幕图像中每个位置处的像饱和度与饱和度系数相乘后，再与饱和度最低值相加，得到第二屏幕图像。饱和度系数可以为一个具体值，也可以为与图像的像素位置对应的数据矩阵。基于饱和度最低值，得到第二屏幕图像的操作可通过如下公式实现：Mf1=·Ls+ C1·M，Mf1为第二屏幕图像，Ls为饱和度最低值，C1为饱和度系数，M为第一屏幕图像。S3、创建灰色模板图像，灰色模板图像与第二屏幕图像经叠加处理，得到第三屏幕图像。预设对比度系数，基于对比度系数，分别降低第二屏幕图像与灰色模板图像的饱和度后，经叠加融合处理，得到第三屏幕图像。其中，灰色模板图像的灰度值为0.5。得到第三屏幕图像的操作可通过如下公式实现：Mf2=·Mz+ C2·Mf1，Mf2为第三屏幕图像，C2为对比度系数，Mz为灰色模板图像，Mf1为第二屏幕图像。S4、第三屏幕图像经灰度化处理，得到夜视模拟图像。第三屏幕图像中每个位置处的颜色通道的强度经加权平均处理，得到夜视模拟图像。得到夜视模拟图像的操作可通过如下公式实现：Gray= Mf2r·0.299+ Mf2g·0.587+Mf2b·0.114，Mf=，Mf为夜视模拟图像、Gray为加权平均处理后得到的灰度值，Mf2r为第三屏幕图像中的某一位置处的红色通道，Mf2g·为第三屏幕图像中的某一位置处的绿色通道，Mf2b为第三屏幕图像中的某一位置处的蓝色通道，0.2999、0.587、0.114分别为红色通道灰度权重、绿色通道灰度权重和蓝色通道灰度权重。本实施例还提供一种基于三维引擎的夜视图像处理系统，包括：第一屏幕图像生成模块，获取屏幕图像，屏幕图像经亮度增强处理，得到第一屏幕图像；第二屏幕图像生成模块，获取第一屏幕图像的饱和度最低值，基于饱和度最低值，得到第二屏幕图像；第三屏幕图像生成模块，创建灰色模板图像，灰色模板图像与第二屏幕图像经叠加处理，得到第三屏幕图像；夜视模拟图像生成模块，第三屏幕图像经灰度化处理，得到夜视模拟图像。本实施例还提供一种基于三维引擎的夜视图像处理设备，包括处理器和存储器，其中，所述处理器执行所述存储器中保存的计算机程序时实现上述的夜视图像处理方法。本实施例还提供一种计算机可读存储介质，用于存储计算机程序，其中，所述计算机程序被处理器执行时实现上述的夜视图像处理方法。本实施例提供的一种基于三维引擎的夜视图像处理方法，获取三维引擎摄影机的屏幕图像，将屏幕图像整体亮度增强后，获取人眼可接受的饱和度最低值，基于饱和度最低值，处理第一屏幕图像后，与预设灰色模板图像进行叠加融合，得到第三屏幕图像，将第三屏幕图像中每个位置的所有颜色通道的加权平均值作为灰度图的灰度值，得到夜视效果好的夜视模拟图像，通过模拟夜间光照条件和颜色调整，使夜视效果更加逼真，该处理方法步骤简单，易于实现，效率高，可根据用户需求进行系数等的调整和优化，满足不同应用场景的要求。
