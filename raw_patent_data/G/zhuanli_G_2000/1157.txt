标题title
一种水库生态调度方案确定方法、系统、电子设备及介质
摘要abst
本发明公开一种水库生态调度方案确定方法、系统、电子设备及介质，涉及水库调度技术领域，所述方法包括：获取待调度水库历史时期每月的入库流量和每天的气象数据；根据多个调度目标构建水库多目标优化调度模型以及确定多个深度不确定因素；采用带全局存档的NSGA‑II多目标优化算法对水库多目标优化调度模型进行求解得到多个调度图；基于各深度不确定因素的预设变化范围得到多个情景；根据各情景、调度图、历史时期每月的入库流量和每天的气象数据，得到每个调度图的稳健性，根据稳健性得到水库生态调度方案。本发明可客观地评价并筛选出可持续的水库生态调度方案。
权利要求书clms
1.一种水库生态调度方案确定方法，其特征在于，包括：获取待调度水库历史时期每月的入库流量和历史时期每天的气象数据；根据多个调度目标构建水库多目标优化调度模型；根据各调度目标确定多个深度不确定因素；采用带全局存档的NSGA-II多目标优化算法对所述水库多目标优化调度模型进行求解得到多个Pareto解，一个Pareto解为一个调度图；基于各深度不确定因素的预设变化范围得到多个情景；每个情景包括所有深度不确定因素的变化量，一个深度不确定因素对应一个变化量，所述变化量为所述深度不确定因素的预设变化范围内的一个值；根据所述待调度水库历史时期每月的入库流量、所述历史时期每天的气象数据、各所述情景和所述调度图，计算每个调度图在每个情景下各调度目标的值；根据每个调度图在每个情景下各调度目标的值，计算每个调度图的稳健性，根据每个调度图的稳健性得到水库生态调度方案。2.根据权利要求1所述的水库生态调度方案确定方法，其特征在于，调度目标包括：一年的发电效益、鱼类产卵季的生态流量保证率以及一年内高表面水温天数。3.根据权利要求2所述的水库生态调度方案确定方法，其特征在于，深度不确定因素包括：每月上网电价、每月气温、湿季每月的入库流量以及旱季每月入库流量。4.根据权利要求3所述的水库生态调度方案确定方法，其特征在于，所述水库多目标优化调度模型包括目标函数和约束函数：所述目标函数包括：Pt＝3600×QGt/R所述约束函数包括：St+1＝St+·Δt2QRt＝QGt+QStQRt,QGt,QSt,St≥0QGt≤QGmaxPt≤IC其中，HB为待调度水库一年的发电效益，c为待调度水库每月上网电价，Pt为t月待调度水库发电出力，Δt1为t月的总小时数，QGt为t月待调度水库发电流量，ht为t月待调度水库上下游水位差，R为待调度水库发电耗水率函数，FR为待调度水库鱼类产卵季的生态流量保证率，a为鱼类产卵季的起始月，b为鱼类产卵季的结束月，QRt为t月待调度水库下泄流量，δ为t月待调度水库下泄流量是否满足生态流量需求，QRmin为生态流量需求，TD为高表面水温天数，SWTd为d日待调度水库的表面水温，τ代表d日待调度水库表面水温是否超过25℃，D为一年中的总天数，St+1为t+1月月初待调度水库蓄水量，St为t月月初待调度水库蓄水量，QIt为t月待调度水库的入库流量，Δt2为t月总秒数，QSt为t月待调度水库弃水流量，为待调度水库最小下泄流量，/＞为待调度水库容许最大下泄流量，QGmax为待调度水库最大发电流量，IC为待调度水库装机库容，ξ表示水电站出力是否满足待调度水库最小出力要求，Pmin为待调度水库最小发电出力要求，C为待调度水库发电出力保证率。5.根据权利要求3所述的水库生态调度方案确定方法，其特征在于，根据所述待调度水库历史时期每月的入库流量、所述历史时期每天的气象数据、各所述情景和所述调度图，计算每个调度图在每个情景下各调度目标的值，具体包括：对于任意一个调度图在任意一个情景下，根据所述情景、所述待调度水库历史时期每月的入库流量和所述历史时期每天的气象数据得到所述情景对应的湿季每月的入库流量值、所述情景对应的旱季每月入库流量值、所述情景对应的每月上网电价值和所述情景对应的每月气温值；根据所述调度图、所述情景对应的湿季每月的入库流量值、所述情景对应的旱季每月入库流量值以及给定初始蓄水量计算每月待调度水库发电出力、每月待调度水库下泄流量和每月月末蓄水量；根据每月月末待调度水库蓄水量计算每月待调度水库水位；根据每月待调度水库发电出力、每月总小时数以及所述情景对应的每月待调度水库上网电价值计算所述调度图在所述情景下每月发电效益的值；根据每月待调度水库下泄流量和生态流量需求计算所述调度图在所述情景下每月待调度水库生态流量保证率的值；根据每日气象数据、所述情景对应的每月气温值以及每日待调度水库水位利用表面水温模拟模型计算所述调度图在所述情景下每月高表面水温天数。6.根据权利要求1所述的水库生态调度方案确定方法，其特征在于，根据每个调度图在每个情景下各调度目标的值，计算每个调度图的稳健性，具体包括：根据公式计算第s个调度图的稳健性，其中，Rs表示第s个调度图的稳健性，N表示情景的总数量，Λs,j表示第s个调度图在第j个情景下各调度目标的值是否均符合各调度目标对应的条件。7.根据权利要求5所述的水库生态调度方案确定方法，其特征在于，所述表面水温模拟模型为长短期记忆网络。8.一种水库生态调度方案确定系统，其特征在于，包括：获取模块，用于获取待调度水库历史时期每月的入库流量和历史时期每天的气象数据；水库多目标优化调度模型构建模块，用于根据多个调度目标构建水库多目标优化调度模型；深度不确定因素确定模块，用于根据各调度目标确定多个深度不确定因素；水库多目标优化调度模型求解模块，用于采用带全局存档的NSGA-II多目标优化算法对所述水库多目标优化调度模型进行求解得到多个Pareto解，一个Pareto解为一个调度图；情景构建模块，用于基于各深度不确定因素的预设变化范围得到多个情景；每个情景包括所有深度不确定因素的变化量，一个深度不确定因素对应一个变化量，所述变化量为所述深度不确定因素的预设变化范围内的一个值；调度目标的值计算模块，用于根据所述待调度水库历史时期每月的入库流量、所述历史时期每天的气象数据、各所述情景和所述调度图，计算每个调度图在每个情景下各调度目标的值；水库生态调度方案确定模块，用于根据每个调度图在每个情景下各调度目标的值，计算每个调度图的稳健性，根据每个调度图的稳健性得到水库生态调度方案。9.一种电子设备，其特征在于，包括：存储器和处理器，所述存储器用于存储计算机程序，所述处理器运行所述计算机程序以使所述电子设备执行根据权利要求1至7中任一项所述的水库生态调度方案确定方法。10.一种计算机可读存储介质，其特征在于，其存储有计算机程序，所述计算机程序被处理器执行时实现如权利要求1至7中任一项所述的水库生态调度方案确定方法。
说明书desc
技术领域本发明涉及水库调度技术领域，特别是涉及一种水库生态调度方案确定方法、系统、电子设备及介质。背景技术水库在为社会发展提供大量电能的同时，也影响了当地的生态环境。开展水库生态调度，平衡水库发电效益与生态环境影响，对水库可持续绿色发展具有重要作用。水库生态调度的方案设计与决策主要以多目标优化作为基本框架。根据工程实际确定发电与生态环境目标，以调度图作为优化变量，利用多目标优化算法生成Pareto解，进而利用可视化等技术分析水库发电目标与环境目标之间的竞争协同关系，最后根据特定指标或决策者偏好确定水库生态调度方案。现有生态调度确定方案研究往往建立在静态的情景假设之上，如历史情景、推算的某一个或某几个未来情景，并针对这些特定情景进行优化，试图找到最优的调度方案。然而水库在未来可能面临许多深度不确定因素，这些因素在未来的概率分布往往难以被准确地估计，在静态情景中优化得到的最优调度方案很可能不适应未来不确定环境。此外，根据偏好对水库调度方案进行评价与决策有时也不够客观，因此需要一种能够客观评级并筛选出可持续的水库生态调度方案的方法。发明内容本发明的目的是提供一种水库生态调度方案确定方法、系统、电子设备及介质，可客观地评价并筛选出可持续的水库生态调度方案。为实现上述目的，本发明提供了如下方案：一种水库生态调度方案确定方法，包括：获取待调度水库历史时期每月的入库流量和历史时期每天的气象数据；根据多个调度目标构建水库多目标优化调度模型；根据各调度目标确定多个深度不确定因素；采用带全局存档的NSGA-II多目标优化算法对所述水库多目标优化调度模型进行求解得到多个Pareto解，一个Pareto解为一个调度图；基于各深度不确定因素的预设变化范围得到多个情景；每个情景包括所有深度不确定因素的变化量，一个深度不确定因素对应一个变化量，所述变化量为所述深度不确定因素的预设变化范围内的一个值；根据所述待调度水库历史时期每月的入库流量、所述历史时期每天的气象数据、各所述情景和所述调度图，计算每个调度图在每个情景下各调度目标的值；根据每个调度图在每个情景下各调度目标的值，计算每个调度图的稳健性，根据每个调度图的稳健性得到水库生态调度方案。一种水库生态调度方案确定系统，包括：获取模块，用于获取待调度水库历史时期每月的入库流量和历史时期每天的气象数据；水库多目标优化调度模型构建模块，用于根据多个调度目标构建水库多目标优化调度模型；深度不确定因素确定模块，用于根据各调度目标确定多个深度不确定因素；水库多目标优化调度模型求解模块，用于采用带全局存档的NSGA-II多目标优化算法对所述水库多目标优化调度模型进行求解得到多个Pareto解，一个Pareto解为一个调度图；情景构建模块，用于基于各深度不确定因素的预设变化范围得到多个情景；每个情景包括所有深度不确定因素的变化量，一个深度不确定因素对应一个变化量，所述变化量为所述深度不确定因素的预设变化范围内的一个值；调度目标的值计算模块，用于根据所述待调度水库历史时期每月的入库流量、所述历史时期每天的气象数据、各所述情景和所述调度图，计算每个调度图在每个情景下各调度目标的值；水库生态调度方案确定模块，用于根据每个调度图在每个情景下各调度目标的值，计算每个调度图的稳健性，根据每个调度图的稳健性得到水库生态调度方案。一种电子设备，包括：存储器和处理器，所述存储器用于存储计算机程序，所述处理器运行所述计算机程序以使所述电子设备执行根据上述所述的水库生态调度方案确定方法。一种计算机可读存储介质，其存储有计算机程序，所述计算机程序被处理器执行时实现如上述所述的水库生态调度方案确定方法。根据本发明提供的具体实施例，本发明公开了以下技术效果：本发明以多个调度目标为基础，考虑多种深度不确定因素，以稳健性作为指标，采用稳健决策方法在大量情景中找到表现最稳健的方案，能客观地评价与筛选出可持续的水库调度方案。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例提供的水库调度方法的流程图；图2为水库调度图；图3为本发明实施例提供的多目标优化结果图；图4为本发明实施例提供的多个方案的稳健性评价结果图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。本发明实施例提供的一种水库生态调度方案确定方法，旨在提供一种深度不确定条件下水库生态调度与稳健决策方法，该方法以水库多目标优化调度为基础，考虑来自上网电价、气温、湿季入库流量和旱季入库流量等深度不确定因素，以稳健性作为指标，在深度不确定条件下制定稳健的水库生态调度方案。所述水库生态调度方案确定方法包括：获取待调度水库历史时期每月的入库流量和历史时期每天的气象数据，气象数据包括气温、辐射和湿度，用于水库水温模拟。根据多个调度目标构建水库多目标优化调度模型；所述优化调度模型以水库调度图为优化决策变量，所述调度目标均可通过调度模型计算得到。根据各调度目标确定多个深度不确定因素。采用带全局存档的NSGA-II多目标优化算法对所述水库多目标优化调度模型进行求解得到多个Pareto解，一个Pareto解为一个调度图，作为稳健决策的备选方案。基于各深度不确定因素的预设变化范围得到多个情景；每个情景包括所有深度不确定因素的变化量，一个深度不确定因素对应一个变化量，所述变化量为所述深度不确定因素的预设变化范围内的一个值。根据所述待调度水库历史时期每月的入库流量、所述历史时期每天的气象数据、各所述情景和所述调度图，计算每个调度图在每个情景下各调度目标的值。根据每个调度图在每个情景下各调度目标的值，计算每个调度图的稳健性，根据每个调度图的稳健性得到水库生态调度方案。根据每个调度图的稳健性得到水库生态调度方案，具体包括：对各方案稳健性进行排序，确定最稳健方案，采用水库调度图作为调度规则，调度图包括三条出力控制线，将水库调度空间分为四个出力区间：降低出力区、标准出力区、第一加大出力区及第二加大出力区；每一条出力控制线对应一个非汛期蓄水量、一个汛期蓄水量、一个汛期开始时刻、一个汛期结束时刻、以及一个出力系数。则一共有3个蓄水量基础水量，3个蓄水量下调后水量，汛期始末时间，以及3个出力系数，这11个变量共同组成优化决策变量。在实际应用中，调度目标包括：一年的发电效益、鱼类产卵季的生态流量保证率以及一年内高表面水温天数。在实际应用中，深度不确定因素包括：每月上网电价、每月气温、湿季每月的入库流量以及旱季每月入库流量。在实际应用中，所述水库多目标优化调度模型包括目标函数和约束函数：所述目标函数包括：Pt＝3600×QGt/R 所述约束函数包括：St+1＝St+·Δt2QRt＝QGt+QStQRt,QGt,QSt,St≥0QGt≤QGmaxPt≤IC其中，其中，HB为待调度水库一年的发电效益，c为待调度水库每月上网电价，Pt为t月待调度水库发电出力，Δt1为t月的总小时数，QGt为t月待调度水库发电流量，ht为t月待调度水库上下游水位差，R为待调度水库发电耗水率函数，FR为待调度水库鱼类产卵季的生态流量保证率，a为鱼类产卵季的起始月，b为鱼类产卵季的结束月，QRt为t月待调度水库下泄流量，δ为t月待调度水库下泄流量是否满足生态流量需求QRmin，TD为高表面水温天数，SWTd为d日待调度水库的表面水温，τ代表d日待调度水库表面水温是否超过25℃，D为一年中的总天数，St+1为t+1月月初待调度水库蓄水量，St为t月月初待调度水库蓄水量，QIt为t月待调度水库的入库流量，Δt2为t月总秒数，QSt为t月待调度水库弃水流量，Qtmin为待调度水库最小下泄流量，Qtmax为待调度水库容许最大下泄流量，QGmax为待调度水库最大发电流量，IC为待调度水库装机库容，ξ表示水电站出力是否满足最小出力要求，C为待调度水库发电出力保证率，Pmin为待调度水库最小发电出力要求。在实际应用中，根据所述待调度水库历史时期每月的入库流量、所述历史时期每天的气象数据、各所述情景和所述调度图，计算每个调度图在每个情景下各调度目标的值，具体包括：对于任意一个调度图在任意一个情景下，根据所述情景、所述待调度水库历史时期每月的入库流量和所述历史时期每天的气象数据得到所述情景对应的湿季每月的入库流量值、所述情景对应的旱季每月入库流量值、所述情景对应的每月上网电价值和所述情景对应的每月气温值。根据所述调度图、所述情景对应的湿季每月的入库流量值、所述情景对应的旱季每月入库流量值以及给定初始蓄水量计算每月待调度水库发电出力、每月待调度水库下泄流量和每月月末蓄水量，当要计算的月为湿季时入库流量为湿季每月入库流量值，当要计算的月为旱季时，入库流量为旱季每月入库流量值。根据每月月末待调度水库蓄水量计算每月待调度水库水位。根据公式、每月待调度水库发电出力、每月总小时数以及所述情景对应的每月待调度水库上网电价值计算所述调度图在所述情景下每月发电效益的值。具体的：根据每月待调度水库发电出力和时间，计算总发电量，结合总发电量与当前情景上网电价，计算发电效益。根据公式、每月待调度水库下泄流量和生态流量需求计算所述调度图在所述情景下每月待调度水库生态流量保证率的值。根据公式、每日气象数据、所述情景对应的每月气温值以及每日待调度水库水位利用表面水温模拟模型计算所述调度图在所述情景下每月高表面水温天数。具体的，将每月水位数据插值为逐日水位数据，当前情景气温、结合每日气象数据，利用表面水温模拟模型，计算每日表面水温，并根据式和式确定高表面水温天数。在实际应用中，根据每月月末待调度水库蓄水量计算每月待调度水库水位，具体包括：根据蓄水量和水位库容关系，得到水库水位。在实际应用中，根据每个调度图在每个情景下各调度目标的值，计算每个调度图的稳健性，具体包括：根据公式计算第s个调度图的稳健性，其中，Rs表示第s个调度图的稳健性，N表示情景的总数量，Λs,j表示第s个调度图在第j个情景下各调度目标的值是否均符合各调度目标对应的条件。在实际应用中，所述表面水温模拟模型为长短期记忆网络神经网络模型，该模型以过去60天逐日气温、辐射、相对湿度、风速和水位作为输入，具有1个LSTM隐藏层30个LSTM单元，采用采用MSE作为损失函数，以Adam作为优化方法。在实际应用中，采用带全局存档的NSGA-II多目标优化算法对所述水库多目标优化调度模型进行求解得到多个Pareto解，具体步骤如下：随机生成初始化种群。种群内个体数N，其中每个个体代表一幅调度图。对每个个体，依据调度图和待调度水库历史时期每月的入库流量，计算模拟期内多年平均发电效益、生态流量保证率、高表面水温天数，作为各优化目标适应度。根据各个目标适应度，对种群进行非支配排序。创建全局存档，存档空间为10N，将初代种群放入存档中。对种群中的个体进行选择、交叉、变异，得到子代种群。对子代种群个体进行模拟，计算目标适应度。将子代种群与父代种群合并，得到个体数为2N的中间种群；将中间种群与全局存档合并，计算更新后全局存档的拥挤度，根据拥挤距离选择10N个个体保留在全局存档中；在中间种群中，根据适应度挑选前N个个体作为新的父代种群。当迭代次数小于最大迭代次数时，跳转到步骤“对种群中的个体进行选择、交叉、变异”；当达到最大迭代次数，停止计算，得到最终的Pareto解集。在实际应用中，在计算各目标适应度时，为了使所得到的调度方案在未来条件下具有更高的稳健性，可以在考虑多个上网电价与优化气温的优化情景中进行模拟，然后取平均值作为适应度。式中，U代表优化情景个数。ci代表优化情景i中的上网电价，SWTd,j代表优化情景j中第d天的表面水温。在实际应用中，基于各深度不确定因素的预设变化范围得到多个情景具体为：在每月上网电价、每月气温、湿季每月入库流量和旱季每月入库流量这四个深度不确定因素的预设变化范围内，利用蒙特卡洛抽样方法，随机生成大量模拟情景，每一组情景包含一个上网电价变化量，一个气温变化量，一个湿季入库流量变化量，一个旱季入库流量变化量。在实际应用中，根据所述调度图、所述情景对应的湿季每月的入库流量值、所述情景对应的旱季每月入库流量值以及给定初始蓄水量计算每月待调度水库发电出力、每月待调度水库下泄流量和每月月末蓄水量，具体包括：对于任意一个调度图，给定月初水库蓄水量St，在调度图中确定当前所在的发电出力区间，以及根据公式得到对应的发电出力要求Pr,t；假定t月月末水库蓄水量达到最大库容，并假定没有弃水量QSt，即QRt＝QGt，根据式、式和式，结合月初蓄水量St与所述情景对应的t月待调度水库的入库流量QIt，此刻t月为湿季则入库流量为湿季每月入库流量值，当t月为旱季时，入库流量为旱季每月入库流量值，可以计算得到t月内下泄流量QRt以及发电出力Pt。式中，0＜c1＜1＜c2＜c3，ci为出力系数，Smin＜St＜Smax，St为t月月初蓄水量，Smin为水库允许最低库容，Smax为水库最大库容，Zone1为降低出力区，Zone2为标准出力区，Zone3为第一加大出力区，Zone4为第二加大出力区，Pg为水库保证发电出力。如果该发电出力Pt满足出力要求Pr,t且不超过水库装机容量IC，则按照该出力进行发电并后续根据St+1计算水位；如果该发电出力Pt超过水库装机容量IC，则按装机容量IC进行发电并根据St+1计算水位，下泄流量QRt超过发电流量QGt的部分作为弃水流量QSt；如果该发电出力Pt小于发电出力要求，则降低月末水库蓄水量St+1，即提高下泄流量QR，从而提高发电出力，直至满足出力要求；如果月末蓄水量降低至死库容，仍不满足出力要求，则按降至死库容对应的发电出力发电，根据至死库容计算水位。在完成当前月的试算后，进行下一月的出力计算。如图1所示，本发明提供了一种更具体的实施例对上述方法进行详细介绍：本实施例以糯扎渡水库为研究对象。糯扎渡水库位于澜沧江干流，水库总库容237.03亿立方米。水库死水位765米，正常蓄水位812米。水库2011年11月开始蓄水，2013年10月蓄至正常蓄水位。S1：收集水库入库流量与气象数据。入库流量采用糯扎渡坝址处1980年至2009年共30年的逐月径流流量数据，由水电站提供。气象资料包括1980年至2009年逐日气温、辐射、相对湿度、风速数据，从国家气象科学数据中心获取。S2：确定水库优化调度目标。所述水库优化调度目标包括发电效益最大，生态流量保证率最大，高表面水温天数最短，具体公式如下：Pt＝3600×QGt/R式中，HB为待调度水库一年的发电效益，c为待调度水库每月上网电价，Pt为t月待调度水库发电出力，Δt1为t月的总小时数，QGt为t月待调度水库发电流量，ht为t月待调度水库上下游水位差，上游水位可由当前蓄水量以及水位库容关系曲线得到，下游水位根据观测基本维持在607m；R为待调度水库发电耗水率函数；FR为鱼类产卵季生态流量保证率；QRt为t月水库下泄流量；δ表示t月水库下泄流量是否满足生态流量QRmin；TD表示高表面水温天数；SWTd为d日的表面水温；τ代表d日表面水温是否超过25℃；D表示一年中的总天数。S3：确定水库深度不确定因素。根据水库优化调度目标，确定水库在未来可能面临的深度不确定因素及其范围，范围可以预设或者根据经验确定。所述深度不确定因素包括上网电价、气温、湿季入库流量和旱季入库流量，上网电价会影响水库发电效益，入库流量会影响水库调度过程即水库下泄流量过程，进而影响水库发电量和发电效益以及生态流量保证率，气温会影响水库高表面水温天数。预设变化范围如下：上网电价。假设基础上网电价为1元/kWh，水库湿季上网电价下降u1，旱季上网电价上升u1。0≤u1≤40％。气温。气温升高幅度u2，u2≤2℃。旱季入库流量不确定范围u3∈。湿季入库流量不确定范围u4∈。S4：构建水库多目标优化调度模型。以S2得到的公式为目标函数，以公式到公式所示的约束函数为约束构建水库多目标优化调度模型。S5：利用带全局存档的NSGA-II算法求解多目标优化问题，生成备选方案。随机生成初始化种群。种群内个体数N＝200，其中每个个体代表一幅调度图，包含11个决策变量。对每个个体，计算各目标适应度值。假定1980年1月初的蓄水量为正常蓄水位对应库容的90％，利用调度图和入库流量，计算逐月水库发电出力、下泄流量、蓄水量、水位。为了使所得到的调度方案在未来条件下具有更高的稳健性，在考虑5个上网电价与气温的优化情景中进行模拟，五种上网电价优化情景为u1＝0,10％,20％,30％,40％；五种气温优化情景为u2＝0,0.5,1.0,1.5,2.0℃。根据发电出力和5个优化情景下的上网电价以及公式计算发电效益，然后取平均值作为发电效益目标适应度值；根据逐月下泄流量以及公式计算生态流量保证率，作为生态流量保证率目标适应度值；利用单调三次插值方法将逐月水库水位插值到日尺度，逐日气象资料，并根据5个气温优化情景对气温数据进行修改，利用基于LSTM的表面水温模拟模型，计算得到模拟期内逐日表面水温过程，根据公式/＞进而计算高表面水温天数，然后取平均值作为高表面水温目标适应度值；式中，Y代表模拟时长，Y＝30；ci代表优化情景i中的上网电价，SWTd,j代表优化情景j中第d天的表面水温。根据各个目标适应度，对种群进行非支配排序。创建全局存档，存档空间为10N，将初代种群放入存档中。对种群中的个体进行选择、交叉、变异，得到子代种群。根据非支配排序选择个体，从高等级个体开始选择，直至个体数达到规定种群大小N；再根据指定的概率和方法对个体进行交叉、变异操作，本章中二进制交叉算子的交叉率为1.0，交叉算子分布指数为20；多点变异的变异率为0.09，变异算子分布指数为20。对子代种群个体进行模拟，得到每个个体的三个目标适应度。将子代种群与父代种群合并，得到个体数为2N的中间种群；将中间种群与全局存档合并，计算更新后全局存档的拥挤度，根据拥挤距离选择10N个个体保留在全局存档中；在中间种群中，根据适应度挑选前N个个体作为新的父代种群。当迭代次数小于最大迭代次数2000时，跳转到步骤“对种群中的个体进行选择、交叉、变异，得到子代种群”；当达到最大迭代次数，停止计算，得到最终的Pareto解集。每一个Pareto解均代表一幅调度图，即11个决策变量的组合。在具体实施时，S5中利用调度图和入库流量，计算逐月水库发电出力、下泄流量、蓄水量、水位具体步骤如下：对于任意一个调度图，给定月初水库蓄水量St，在调度图中确定当前所在的发电出力区间，以及根据公式得到对应的发电出力要求Pr,t；假定t月月末水库蓄水量达到最大库容，并假定没有弃水量QSt，即QRt＝QGt，根据式、式和式，结合月初蓄水量St与月内入库流量QIt，可以计算得到月内下泄流量QRt以及发电出力Pt。式中，0＜c1＜1＜c2＜c3，ci为出力系数，Smin＜St＜Smax，St为t月月初蓄水量，Smin为水库允许最低库容，Smax为水库最大库容，Zone1为降低出力区，Zone2为标准出力区，Zone3为第一加大出力区，Zone4为第二加大出力区，Pg为水库保证发电出力。如果该发电出力Pt满足出力要求Pr,t且不超过水库装机容量IC，则按照该出力进行发电并根据St+1计算水位；如果该发电出力Pt超过水库装机容量IC，则按装机容量IC进行发电并根据St+1计算水位，下泄流量QRt超过发电流量QGt的部分作为弃水流量QSt；如果该发电出力Pt小于发电出力要求，则降低月末水库蓄水量St+1，即提高下泄流量QR，从而提高发电出力，直至满足出力要求；如果月末蓄水量降低至死库容，仍不满足出力要求，则按降至死库容对应的发电出力发电根据至死库容计算水位。在完成当前月的试算后，进行下一月的出力计算；直至完成所有月份计算，得到水库每月发电出力、下泄流量、蓄水量St+1、水位。S6：计算各方案在深度不确定情景中表现。在不确定性范围内，利用蒙特卡洛模拟，生成1000个情景，每种情景表示一种上网电价、气温、湿季入库流量和旱季入库流量的组合，对优化所得的497个Pareto解，重新计算在1000个情景下的目标值。利用当前Pareto解对应的调度图、当前情景入库流量和给定初始蓄水量，计算每月发电出力、下泄流量、蓄水量、水位，然后根据每月发电出力和时间，计算总发电量，结合当前情景上网电价，计算发电效益；根据每月下泄流量和生态流量需求，计算生态流量保证率。另外将每月水位数据插值为逐日水位数据，结合每日气象数据，利用表面水温模拟模型，计算每日表面水温以及高表面水温天数。S7：计算方案稳健性并排序，确定最稳健方案。利用满意度指标来评价方案稳健性。根据公式计算稳健性，其中，N＝1000，Λs,j表示第s个调度图在第j个情景下各调度目标的值是否均符合各调度目标对应的条件，各调度目标对应的条件为：发电效益超过200亿元，高水温时长低于140天，生态流量保证率大于50％。利用带全局存档的NSGA-II算法求解多目标优化问题，所得Pareto解分布如图3所示，其中，图3中的反映发电效益与高表面水温天数之间的关系，图3中的反映发电效益与生态流量保证率之间的关系，图3中的反映高表面水温天数和生态流量保证率之间的关系。发电效益和高水温时长之间存在显著的竞争关系，Pareto前沿分布很广，方案B具有最高的发电效益，达到226亿元，但对应高水温时长达到147天。方案T具有最短的高水温时长，仅107天，但发电效益也最低，为190亿元。原因在于高发电效益方案往往水位较高，通过提高水头以加大发电量，但高水位也会增强水温垂直分层，减弱垂向上的水与热量交换，使得表层水温显著提高。发电效益和生态流量之间存在竞争关系，F方案生态流量保证率达到85％，高于B方案的35％，但F方案发电效益为208亿元，低于B方案。原因在于高发电效益方案倾向于蓄水以提高水头，但这会减少产卵期的下泄流量。生态流量和高水温时长两个生态目标之间也存在微弱的竞争关系，原因在于高水温时长最短方案水位维持在较低水平，水库调控能力有限，当遇到枯水年时便无法保障生态流量。如图4所示，方案R具有最高的稳健性。发电效益达到210亿元，高水温时长为118天，生态流量保证率为58％。从图3也能看出，方案R基本上位于三个目标的中间位置，较好地平衡三个目标之间的竞争关系。本发明提供了一种与上述方法对应的水库生态调度方案确定系统，包括：获取模块，用于获取待调度水库历史时期每月的入库流量和历史时期每天的气象数据。水库多目标优化调度模型构建模块，用于根据多个调度目标构建水库多目标优化调度模型。深度不确定因素确定模块，用于根据各调度目标确定多个深度不确定因素。水库多目标优化调度模型求解模块，用于采用带全局存档的NSGA-II多目标优化算法对所述水库多目标优化调度模型进行求解得到多个Pareto解，一个Pareto解为一个调度图。情景构建模块，用于基于各深度不确定因素的预设变化范围得到多个情景；每个情景包括所有深度不确定因素的变化量，一个深度不确定因素对应一个变化量，所述变化量为所述深度不确定因素的预设变化范围内的一个值。调度目标的值计算模块，用于根据所述待调度水库历史时期每月的入库流量、所述历史时期每天的气象数据、各所述情景和所述调度图，计算每个调度图在每个情景下各调度目标的值。水库生态调度方案确定模块，用于根据每个调度图在每个情景下各调度目标的值，计算每个调度图的稳健性，根据每个调度图的稳健性得到水库生态调度方案。一种电子设备，包括：存储器和处理器，所述存储器用于存储计算机程序，所述处理器运行所述计算机程序以使所述电子设备执行上述实施例所述的水库生态调度方案确定方法。一种计算机可读存储介质，其存储有计算机程序，所述计算机程序被处理器执行时实现上述实施例所述的水库生态调度方案确定方法。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。对于实施例公开的系统而言，由于其与实施例公开的方法相对应，所以描述的比较简单，相关之处参见方法部分说明即可。本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处。综上所述，本说明书内容不应理解为对本发明的限制。
