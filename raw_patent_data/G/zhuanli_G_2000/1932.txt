标题title
一种用于行车记录仪的数据存储更新方法
摘要abst
本发明提供一种用于行车记录仪的数据存储更新方法，涉及行车记录仪技术领域，包括以下方法：对车辆周围的环境信息及其运行信息进行趋势分析处理，以得到物距值、徘徊值、相对速值、角速值；将车物间距、徘徊值、相对速值和角速值进行归一化计算，以得到存储更新系数；设定存储更新系数的更新方案组，以得到对应的存储更新方式。通过对车辆周围环境信息的趋势分析处理及其运行信息进行趋势分析处理，得到物距值、徘徊值、相对速值和角速值，对车辆的行车情况进行客观评估，由此得到存储更新系数，依此行车记录仪能动态调整存储频率，以确保重要的行车数据能够得到有效记录，根据实际情况灵活地满足数据存储的需求，提高数据的准确性和实用性。
权利要求书clms
1.一种用于行车记录仪的数据存储更新方法，其特征在于，包括：步骤一：行车记录仪搭载汽车感知系统，汽车感知系统实时监测行车记录仪所搭载车辆周围的环境信息及其运行信息；将车辆周围的环境信息及其运行信息标记为各类信息；步骤二：对所述车辆周围的环境信息及其运行信息进行趋势分析处理，以得到物距值A1、徘徊值A2、相对速值A3、角速值A4；将车物间距、徘徊值、相对速值和角速值进行归一化计算，然后利用公式 得到存储更新系数A；其中，a1、a2、a3、a4分别表示车物间距、徘徊值、相对速值和角速值所对应的权重比例系数，B表示为预设的频次调节修正系数；设定存储更新系数的更新方案组，以得到对应的存储更新方式，具体如下：设定存储更新系数的更新方案组并标记其阈值为Fn、Fn+1，将存储更新系数与其阈值进行比对，在0＜A＜Fn时，则用正常存储更新方式；在Fn≤A＜Fn+1时，则用异常存储更新方式；在Fn+1≤A时，则用高频存储更新方式；将正常存储更新、异常存储更新、高频存储更新方式标记为存储更新方式；步骤三：根据存储更新系数动态调整行车记录仪的存储频率，并以该频率记录各类信息并保存在存储介质中；步骤四：根据存储更新方式动态调整行车记录仪对各类信息进行信息上传处理，将各类信息上传到云平台，具体如下：S1：在存储更新方式不为正常存储更新方式时，将对应存储更新方式的生成时刻之前设定时长作为起始提取时刻，将起始提取时刻与当前时刻之间的时间区域标记为前置时区；将存储更新方式变更的时刻标记为回归时刻，将回归时刻与当前时刻之间的时间区域标记为后置时区；设定回归时刻之后设定时长作为终止提取时刻，将回归时刻与终止提取时刻之间的时间区域标记为事后时区；将前置时区、后置时区和事后时区标记为提取时区组；S2：将提取时区组各个时区按照等量时长均匀划分若干个短时区，并按照时间顺序对提取时区组内各个时区进行编号；按照编号由大至小依次将前置时区内对应短时区的各类信息进行上传，同样按照编号由小至大依次将后置时区和事后时区内对应短时区的各类信息进行上传；将正常存储更新方式上传的各类信息标记为一类信息，将异常存储更新方式上传的各类信息标记为二类信息，将高频存储更新方式上传的各类信息标记为三类信息；步骤五：由云平台接收各类信息，对各类信息进行存储、处理和分析及显示。2.根据权利要求1所述的一种用于行车记录仪的数据存储更新方法，其特征在于，对所述车辆周围的环境信息及其运行信息进行趋势分析处理，以得到物距值、徘徊值、相对速值、角速值，具体趋势分析处理如下：获取车辆周围一定范围内物体的位置，将该物体的位置与车辆位置之间进行距离差计算，以得到车物间距；提取物体的个数并标记为周物数；对车物间距与周物数进行计算，得到物距值；获取感应到物体的时刻标记为初始时刻，并将无法感应物体的时刻标记为第二时刻，若无第二时刻，则将当前时刻标记为第二时刻，计算初始时刻与第二时刻之间的时长标记为徘徊时长；设定徘徊时长的正常采集时长阈值，获取该时长阈值内所有徘徊时长的次数并标记为徘徊次数；对徘徊时长、徘徊次数进行计算，得到徘徊值；利用车联网获取物体在徘徊时长的正常采集时长阈值内所有时刻的相对加速度，当相对加速度为正时，则标记为正加值，在相对加速度为负时，则标记为负加值；将所有的正加值、负加值分别进行和值计算得到正加总值、负加总值；对正加总值、负加总值进行计算，得到相对速值；利用陀螺仪获取车辆在徘徊时长的正常采集时长阈值内所有时刻的角速度，当角速度为正时，则标记为正角值，当角速度为负时，则标记为负角值；将所有的正角值、负角值分别进行和值计算得到正角总值、负角总值；对正角总值、负角总值进行计算，得到角速值。3.根据权利要求1所述的一种用于行车记录仪的数据存储更新方法，其特征在于，所述云平台还用于接收人员所提交的人员信息进行注册，将成功注册的人员信息进行存储；人员信息包括用户个人身份信息、车辆信息、账号信息；注册成功的人员可以通过账号信息登录云平台查询对应车辆信息所对应的上传的各类信息。4.根据权利要求1所述的一种用于行车记录仪的数据存储更新方法，其特征在于，在云平台接收到行车记录仪发送的各类信息时，对接收的各类信息进行查验与归整处理，其处理方法为：根据存储更新方式中设定的提取时区组，按照提取时区组将接收的短时区的各类信息按照编号进行排序，以得到提取时区组对应排列列表；对提取时区组对应排列列表进行查验操作，查验提取时区组对应排列列表中对应短时区的编号，以得到缺失短时区的编号，向行车记录仪反馈并获取缺失编号所对应短时区的各类信息；若无缺失短时区的编号，则不向行车记录仪反馈；按照编号的大小顺序将短时区的各类信息进行合并或整合，得到对应的关联信息。5.根据权利要求1所述的一种用于行车记录仪的数据存储更新方法，其特征在于，根据存储更新系数动态调整行车记录仪的存储频率，具体如下：在正常存储更新方式时，行车记录仪将以设定的正常存储频率记录各类信息并保存在存储介质中；在异常存储更新方式时，将存储更新系数输入到行车记录仪的调节器中，由此调控行车记录仪的存储频率并记录各类信息并保存在存储介质中；在高频存储更新方式时，行车记录仪将以设定的高存储频率记录各类信息并保存在存储介质中。6.根据权利要求1所述的一种用于行车记录仪的数据存储更新方法，其特征在于，在所述云平台在接收上传的各类信息时，按优先级排列依次优先接收三类信息、二类信息、一类信息。
说明书desc
技术领域本发明涉及行车记录仪相关技术领域，尤其涉及一种用于行车记录仪的数据存储更新方法。背景技术随着物联网和大数据技术的快速发展，行车记录仪等设备在日常使用中能够产生大量的数据。行车记录仪产生的数据量庞大、多样化，处理和分析的需求也更加复杂。传统的行车记录仪本地存储虽采用“循环录制”技术，定期或自动识别存储介质的可用空间，并根据设定的规则删除最早的一些数据，以腾出空间来存储最新的数据。目前行车记录仪通常根据预设的设置或者时间间隔进行数据存储，在车辆处于风险情况下，无法根据车辆的安全情况自动调整存储频率，若数据无法及时存储，可能会造成部分数据丢失，影响数据的完整性和重要性。因此，有必要提供一种用于行车记录仪的数据存储更新方法解决上述技术问题。发明内容本发明提供一种用于行车记录仪的数据存储更新方法，解决了在车辆处于风险情况下，无法根据车辆的安全情况自动调整存储频率，若数据无法及时存储，可能会造成部分数据丢失，影响数据的完整性和重要性的问题。为解决上述技术问题，本发明提供的一种用于行车记录仪的数据存储更新方法，应用于行车记录仪，本发明包括以下方法：步骤一：所述行车记录仪搭载汽车感知系统，汽车感知系统实时监测行车记录仪所搭载车辆周围的环境信息及其运行信息；将车辆周围的环境信息及其运行信息标记为各类信息；步骤二：对所述车辆周围的环境信息及其运行信息进行趋势分析处理，以得到物距值A1、徘徊值A2、相对速值A3、角速值A4；将车物间距、徘徊值、相对速值和角速值进行归一化计算，利用公式，以得到存储更新系数A；其中，a1、a2、a3、a4分别表示车物间距、徘徊值、相对速值和角速值所对应的权重比例系数，B表示为预设的频次调节修正系数；设定存储更新系数的更新方案组，以得到对应的存储更新方式，具体如下：设定存储更新系数的更新方案组并标记其阈值为Fn、Fn+1，将存储更新系数与其阈值进行比对，在0＜A＜Fn时，则用正常存储更新方式；在Fn≤A＜Fn+1时，则用异常存储更新方式；在Fn+1≤A时，则用高频存储更新方式；将正常存储更新、异常存储更新、高频存储更新方式标记为存储更新方式；步骤三：根据存储更新系数动态调整行车记录仪的存储频率，并以该频率记录各类信息并保存在存储介质中；步骤四：根据存储更新方式动态调整行车记录仪对各类信息进行信息上传处理，将各类信息上传到云平台，具体如下：S1：在存储更新方式不为正常存储更新方式时，将对应存储更新方式的生成时刻之前设定时长作为起始提取时刻，将起始提取时刻与当前时刻之间的时间区域标记为前置时区；将存储更新方式变更的时刻标记为回归时刻，将回归时刻与当前时刻之间的时间区域标记为后置时区；设定回归时刻之后设定时长作为终止提取时刻，将回归时刻与终止提取时刻之间的时间区域标记为事后时区；将前置时区、后置时区和事后时区标记为提取时区组；S2：将提取时区组各个时区按照等量时长均匀划分若干个短时区，并按照时间顺序对提取时区组内各个时区进行编号；按照编号由大至小依次将前置时区内对应短时区的各类信息进行上传，同样按照编号由小至大依次将后置时区和事后时区内对应短时区的各类信息进行上传；将正常存储更新方式上传的各类信息标记为一类信息，将异常存储更新方式上传的各类信息标记为二类信息，将高频存储更新方式上传的各类信息标记为三类信息；步骤五：由云平台接收各类信息，对各类信息进行存储、处理和分析及显示。作为本发明的一种优选实施方式，对所述车辆周围的环境信息及其运行信息进行趋势分析处理，以得到物距值、徘徊值、相对速值、角速值，具体趋势分析处理如下：获取车辆周围一定范围内物体的位置，将该物体的位置与车辆位置之间进行距离差计算，以得到车物间距并标记为A11；提取物体的个数并标记为周物数A12；利用公式，得到物距值A1；其中，将物体按照车物间距的大小顺序进行排列并编号表示为i，i∈A12，iA11表示编号为i所对应的车物间距，ia11表示编号为i所对应的车物间距的权重比例系数；获取感应到物体的时刻标记为初始时刻，并将无法感应物体的时刻标记为第二时刻，若无第二时刻，则将当前时刻标记为第二时刻，计算初始时刻与第二时刻之间的时长标记为徘徊时长A21；设定徘徊时长的正常采集时长阈值，获取该时长阈值内所有徘徊时长的次数并标记为徘徊次数A22；对徘徊时长、徘徊次数进行计算，利用公式A2=A21×a21+A22×a22，得到徘徊值A2；其中，a21、a22分别表示徘徊时长、徘徊次数所对应的权重因子；利用车联网获取物体在徘徊时长的正常采集时长阈值内所有时刻的相对加速度，当相对加速度为正时，则标记为正加值，在相对加速度为负时，则标记为负加值；将所有的正加值、负加值分别进行和值计算得到正加总值A31、负加总值A32；利用公式A3=A31×a31+A32×a32，得到相对速值A3；其中，a31、a32分别表示正加总值、负加总值所对应的权重因子；利用陀螺仪获取车辆在徘徊时长的正常采集时长阈值内所有时刻的角速度，当角速度为正时，则标记为正角值，当角速度为负时，则标记为负角值；将所有的正角值、负角值分别进行和值计算得到正角总值A41、负角总值A42；对正角总值、负角总值进行计算，利用公式A4=A41×a41+A42×a42，得到角速值A4；其中，a41、a42分别表示正角总值、负角总值所对应的权重因子。作为本发明的一种优选实施方式，所述云平台还用于接收人员所提交的人员信息进行注册，将成功注册的人员信息进行存储；人员信息包括用户个人身份信息、车辆信息、账号信息；注册成功的人员可以通过账号信息登录云平台查询对应车辆信息所对应的上传的各类信息。作为本发明的一种优选实施方式，在云平台接收到行车记录仪发送的各类信息时，对接收的各类信息进行查验与归整处理，其处理方法为：根据存储更新方式中设定的提取时区组，按照提取时区组将接收的短时区的各类信息按照编号进行排序，以得到提取时区组对应排列列表；对提取时区组对应排列列表进行查验操作，查验提取时区组对应排列列表中对应短时区的编号，以得到缺失短时区的编号，向行车记录仪反馈并获取缺失编号所对应短时区的各类信息；若无缺失短时区的编号，则不向行车记录仪反馈；按照编号的大小顺序将短时区的各类信息进行合并或整合，得到对应的关联信息。作为本发明的一种优选实施方式，根据存储更新系数动态调整行车记录仪的存储频率，具体如下：在正常存储更新方式时，行车记录仪将以设定的正常存储频率记录各类信息并保存在存储介质中；在异常存储更新方式时，将存储更新系数输入到行车记录仪的调节器中，由此调控行车记录仪的存储频率并记录各类信息并保存在存储介质中；在高频存储更新方式时，行车记录仪将以设定的高存储频率记录各类信息并保存在存储介质中。作为本发明的一种优选实施方式，在所述云平台在接收上传的各类信息时，按优先级排列依次优先接收三类信息、二类信息、一类信息。与相关技术相比较，本发明提供的一种用于行车记录仪的数据存储更新方法具有如下有益效果：1、本发明方法通过对车辆周围环境信息的趋势分析处理及其运行信息进行趋势分析处理，得到物距值、徘徊值、相对速值和角速值，对车辆的行车情况进行客观评估，由此得到存储更新系数，依此行车记录仪能动态调整存储频率，以确保重要的行车数据能够得到有效记录，根据实际情况灵活地满足数据存储的需求，提高数据的准确性和实用性。2、本发明方法通过存储更新系数动态调整存储上传方式，使在车辆处于异常或风险状态下时，优先对重要数据进行上传，避免了重要数据的丢失，提高了数据的完整性和可用性。附图说明图1为本发明提供的一种用于行车记录仪的数据存储更新方法的步骤流程图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本公开使用的术语是仅仅出于描述特定实施例的目的，而非旨在限制本公开。在本公开和所附权利要求书中所使用的单数形式的“一种”、“一类”和“该”也旨在包括多数形式，除非上下文清楚地表示其他含义。还应当理解，本文中使用的术语“和/或”是指并包含一个或多个相关联的列出项目的任何或所有可能组合。应当理解，尽管在本公开可能采用术语第一、第二、第三等来描述各类信息，但这些信息不应限于这些术语。这些术语仅用来将同一类型的信息彼此区分开。例如，在不脱离本公开范围的情况下，第一信息也可以被称为第二信息，类似地，第二信息也可以被称为第一信息。取决于语境，如在此所使用的词语“如果”可以被解释成为“在……时”或“当……时”或“响应于确定”请结合参阅图1。一种用于行车记录仪的数据存储更新方法，应用于行车记录仪，本发明包括以下方法：步骤一：行车记录仪搭载汽车感知系统，汽车感知系统实时监测行车记录仪所搭载车辆周围的环境信息及其运行信息；环境信息包括车辆周围物体的位置与其之间的相对加速度，运行信息包括车辆的角速度；将车辆周围的环境信息及其运行信息标记为各类信息；步骤二：对车辆周围的环境信息及其运行信息进行趋势分析处理，以得到物距值A1、徘徊值A2、相对速值A3、角速值A4；将车物间距、徘徊值、相对速值和角速值进行归一化计算，利用公式，以得到存储更新系数A；其中，a1、a2、a3、a4分别表示车物间距、徘徊值、相对速值和角速值所对应的权重比例系数，B表示为预设的频次调节修正系数；设定存储更新系数的更新方案组，以得到对应的存储更新方式，具体如下：设定存储更新系数的更新方案组并标记其阈值为Fn、Fn+1，将存储更新系数与其阈值进行比对，在0＜A＜Fn时，则用正常存储更新方式；在Fn≤A＜Fn+1时，则用异常存储更新方式；在Fn+1≤A时，则用高频存储更新方式；将正常存储更新、异常存储更新、高频存储更新方式标记为存储更新方式；步骤三：根据存储更新系数动态调整行车记录仪的存储频率，并以该频率记录各类信息并保存在存储介质中；步骤四：根据存储更新方式动态调整行车记录仪对各类信息进行信息上传处理，将各类信息上传到云平台，具体如下：S1：在存储更新方式不为正常存储更新方式时，将对应存储更新方式的生成时刻之前设定时长作为起始提取时刻，将起始提取时刻与当前时刻之间的时间区域标记为前置时区；将存储更新方式变更的时刻标记为回归时刻，将回归时刻与当前时刻之间的时间区域标记为后置时区；设定回归时刻之后设定时长作为终止提取时刻，将回归时刻与终止提取时刻之间的时间区域标记为事后时区；将前置时区、后置时区和事后时区标记为提取时区组；S2：将提取时区组各个时区按照等量时长均匀划分若干个短时区，并按照时间顺序对提取时区组内各个时区进行编号；按照编号由大至小依次将前置时区内对应短时区的各类信息进行上传，同样按照编号由小至大依次将后置时区和事后时区内对应短时区的各类信息进行上传；将正常存储更新方式上传的各类信息标记为一类信息，将异常存储更新方式上传的各类信息标记为二类信息，将高频存储更新方式上传的各类信息标记为三类信息；步骤五：由云平台接收各类信息，对各类信息进行存储、处理和分析及显示。车记录仪所采集的数据上传到云平台可以实现数据的集中存储、备份和分析，提供实时监控和预警，支持数据共享和合作，以及方便用户查询和管理。在本申请中，对车辆周围的环境信息及其运行信息进行趋势分析处理，以得到物距值、徘徊值、相对速值、角速值，具体趋势分析处理如下：获取车辆周围一定范围内物体的位置，将该物体的位置与车辆位置之间进行距离差计算，以得到车物间距并标记为A11；提取物体的个数并标记为周物数A12；利用公式，得到物距值A1；其中，将物体按照车物间距的大小顺序进行排列并编号表示为i，i∈A12，iA11表示编号为i所对应的车物间距，ia11表示编号为i所对应的车物间距的权重比例系数；获取感应到物体的时刻标记为初始时刻，并将无法感应物体的时刻标记为第二时刻，若无第二时刻，则将当前时刻标记为第二时刻，计算初始时刻与第二时刻之间的时长标记为徘徊时长A21；设定徘徊时长的正常采集时长阈值，获取该时长阈值内所有徘徊时长的次数并标记为徘徊次数A22；对徘徊时长、徘徊次数进行计算，利用公式A2=A21×a21+A22×a22，得到徘徊值A2；其中，a21、a22分别表示徘徊时长、徘徊次数所对应的权重因子；利用车联网获取物体在徘徊时长的正常采集时长阈值内所有时刻的相对加速度，当相对加速度为正时，则标记为正加值，在相对加速度为负时，则标记为负加值；将所有的正加值、负加值分别进行和值计算得到正加总值A31、负加总值A32；利用公式A3=A31×a31+A32×a32，得到相对速值A3；其中，a31、a32分别表示正加总值、负加总值所对应的权重因子；利用陀螺仪获取车辆在徘徊时长的正常采集时长阈值内所有时刻的角速度，当角速度为正时，则标记为正角值，当角速度为负时，则标记为负角值；将所有的正角值、负角值分别进行和值计算得到正角总值A41、负角总值A42；对正角总值、负角总值进行计算，利用公式A4=A41×a41+A42×a42，得到角速值A4；其中，a41、a42分别表示正角总值、负角总值所对应的权重因子。在本申请中，云平台还用于接收人员所提交的人员信息进行注册，将成功注册的人员信息进行存储；人员信息包括用户个人身份信息、车辆信息、账号信息；注册成功的人员可以通过账号信息登录云平台查询对应车辆信息所对应的上传的各类信息。需要说明的是，通过账号登录来查询车辆信息和相关上传的各类信息，可以实现用户身份验证、方便的车辆信息管理、快速查询行车记录和状态。在本申请中，在云平台接收到行车记录仪发送的各类信息时，对接收的各类信息进行查验与归整处理，其处理方法为：根据存储更新方式中设定的提取时区组，按照提取时区组将接收的短时区的各类信息按照编号进行排序，以得到提取时区组对应排列列表；对提取时区组对应排列列表进行查验操作，查验提取时区组对应排列列表中对应短时区的编号，以得到缺失短时区的编号，向行车记录仪反馈并获取缺失编号所对应短时区的各类信息；若无缺失短时区的编号，则不向行车记录仪反馈；按照编号的大小顺序将短时区的各类信息进行合并或整合，得到对应的关联信息。需要说明的是，通过对接收的各类信息进行查验与归整处理，可以验证上传各类信息的完整性和准确性，并提高其可用性和管理效率。在本申请中，根据存储更新系数动态调整行车记录仪的存储频率，具体如下：在正常存储更新方式时，行车记录仪将以设定的正常存储频率记录各类信息并保存在存储介质中；在异常存储更新方式时，将存储更新系数输入到行车记录仪的调节器中，由此调控行车记录仪的存储频率并记录各类信息并保存在存储介质中；在高频存储更新方式时，行车记录仪将以设定的高存储频率记录各类信息并保存在存储介质中。需要说明的是，通过根据存储更新系数来调整存储频率，行车记录仪可以根据不同情况选择合适的存储方式。在正常存储更新方式下，记录常规行车数据；在异常存储更新方式下，可以根据实际情况提高存储频率，记录关键和紧急事件；在高频存储更新方式下，可以实现实时监测和记录，适用于对短期变动和临时事件的高要求场景。在本申请中，在云平台在接收上传的各类信息时，按优先级排列依次优先接收三类信息、二类信息、一类信息。需要说明的是，按照优先级排列接收信息可以使云平台的资源和工作流程得到优化。由于三类信息相对较少但更紧急重要，二类信息次之，一类信息相对更多但优先级较低，可以确保云平台合理分配资源，高效地处理各类信息，实现资源优化和工作效率。本领域技术人员在考虑说明书及实践这里公开的发明后，将容易想到本发明的其它实施方案。本申请旨在涵盖本发明的任何变型、用途或者适应性变化，这些变型、用途或者适应性变化遵循本发明的一般性原理并包括本公开未公开的本技术领域中的公知常识或惯用技术手段。说明书和实施例仅被视为示例性的，本发明的真正范围和精神由下面的权利要求指出。应当理解的是，本发明并不局限于上面已经描述并在附图中示出的精确结构，并且可以在不脱离其范围进行各种修改和改变。本发明的范围仅由所附的权利要求来限制。
