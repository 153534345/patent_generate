标题title
医疗数据跨模态检索方法、装置和相关设备
摘要abst
本申请提供一种医疗数据跨模态检索方法、装置和相关设备，涉及医学数据处理技术领域，该方法包括：通过网络模型结构对训练医学影像、训练影像报告文本和训练诊断报告文本进行处理，获得训练医学图像特征、训练影像报告文本特征以及训练诊断报告文本特征；根据训练医学图像特征与训练影像报告文本特征之间的第一对比损失值、训练医学图像特征与训练诊断报告文本特征之间的第二对比损失值、训练诊断报告文本特征与训练影像报告文本特征之间的第三对比损失值对网络模型结构进行训练。通过上述网络模型可以将类别相同的跨模态数据在公共空间中映射在相近的距离内、将类别不同的跨模态数据在公共空间中映射在相远的距离内，以提高跨模态检索的准确率。
权利要求书clms
1.一种医疗数据跨模态检索方法，其特征在于，包括：通过网络模型结构对训练医学影像、训练影像报告文本以及训练诊断报告文本分别进行特征提取处理，分别获得训练医学图像特征、训练影像报告文本特征以及训练诊断报告文本特征，其中所述训练影像报告文本用于对所述训练医学影像中的特征进行描述，其中所述训练诊断报告文本用于对所述训练医学影像中的诊断结果进行描述；确定所述训练医学图像特征与所述训练影像报告文本特征之间的第一对比损失值，其中所述第一对比损失值用于控制类别相同的训练医学图像特征与训练影像报告文本特征的距离近，所述第一对比损失值还用于控制类别不同的训练医学图像特征与训练影像报告文本特征的距离远；确定所述训练医学图像特征与所述训练诊断报告文本特征之间的第二对比损失值，其中所述第二对比损失值用于控制类别相同的训练医学图像特征与训练诊断报告文本特征的距离近，所述第二对比损失值还用于控制类别不同的训练医学图像特征与训练诊断报告文本特征的距离远；确定所述训练诊断报告文本特征与所述训练影像报告文本特征之间的第三对比损失值，其中所述第三对比损失值用于控制相同类别的训练诊断报告文本特征与训练影像报告文本特征的距离近，所述第三对比损失值还用于控制不同类别的训练诊断报告文本特征与训练影像报告文本特征的距离远；根据所述第一对比损失值、所述第二对比损失值以及所述第三对比损失值对所述网络模型结构进行训练，以便根据训练完成后的所述网络模型结构进行跨模态检索。2.根据权利要求1所述方法，其特征在于，所述训练医学图像特征是多个，所述训练影像报告文本特征也是多个；其中，确定所述训练医学图像特征与所述训练影像报告文本特征之间的第一对比损失值，包括：确定各个训练医学图像特征与各个训练影像报告文本特征两两之间的特征距离；根据所述两两之间的特征距离将类别相同的训练医学图像特征与训练影像报告文本特征的特征距离相加获得第一距离和；根据所述两两之间的特征距离将类别不同的训练医学图像特征与训练影像报告文本特征的特征距离相加获得第二距离和；根据所述第一距离和和所述第二距离和确定所述第一对比损失值，其中所述第一对比损失值与所述第一距离和正相关，所述第一对比损失值与所述第二距离和负相关。3.根据权利要求1所述方法，其特征在于，所述方法还包括：通过所述网络模型结构中的分类器对所述训练医学图像特征与所述训练影像报告文本特征进行预测处理，以确定所述训练医学图像特征与所述训练影像报告文本特征之间的第一类别相关度；通过所述网络模型结构中的分类器对所述训练医学图像特征与所述训练诊断报告文本特征进行预测处理，以确定所述训练医学图像特征与所述训练诊断报告文本特征之间的第二类别相关度；通过所述网络模型结构中的分类器对所述训练诊断报告文本特征与所述训练影像报告文本特征进行预测处理，以确定所述训练诊断报告文本特征与所述训练影像报告文本特征之间的第三类别相关度；确定所述训练医学影像、所述训练影像报告文本以及所述训练诊断报告文本之间的类别标签，所述类别标签用于指示所述训练医学影像、所述训练影像报告文本以及所述训练诊断报告文本是否是同一类别的；根据所述类别标签、所述第一类别相关度、所述第二类别相关度以及所述第三类别相关度确定所述训练医学影像、所述训练影像报告文本以及所述训练诊断报告文本之间交叉损失函数值；其中，根据所述第一对比损失值、所述第二对比损失值以及所述第三对比损失值对所述网络模型结构进行训练，包括：根据所述第一对比损失值、所述第二对比损失值、所述第三对比损失值以及所述交叉损失函数值对所述网络模型结构进行训练。4.根据权利要求1所述方法，其特征在于，根据训练完成后的所述网络模型结构进行跨模态检索，包括：获取第一待检索医学影像；通过所述网络模型结构对所述第一待检索医学影像进行特征提取处理，获得第一待检索医学图像特征；获取多个预置影像报告文本特征，所述预置影像报告文本特征是通过所述网络模型结构对预置影像文本报告进行特征提取后获得的；在所述多个预置影像报告文本特征中确定与所述待检索医学图像特征距离前N的预置影像报告文本特征作为目标影像报告文本特征，N为大于或者等于1的整数；将所述目标影像报告文本特征对应的预置影像文本报告作为所述第一待检索医学影像对应的影像报告文本。5.根据权利要求1所述方法，其特征在于，根据训练完成后的所述网络模型结构进行跨模态检索，包括：获取第二待检索医学影像；通过所述网络模型结构对所述第二待检索医学影像进行特征提取处理，获得第二待检索医学图像特征；获取多个预置诊断报告文本特征，所述预置诊断报告文本特征是通过所述网络模型结构对预置诊断报告文本进行特征提取后获得的；在所述多个预置诊断报告文本特征中确定与所述第二待检索医学图像特征距离前M的预置影像报告文本特征作为目标诊断报告文本特征，M为大于或者等于1的整数；将所述目标诊断报告文本特征对应的预置诊断报告文本作为所述第二待检索医学影像对应的诊断报告文本。6.根据权利要求1所述方法，其特征在于，所述网络模型结构包括多模态预训练模型，所述多模态预训练模型包括视觉编码器和文本编码器；其中，通过网络模型结构对训练医学影像、训练影像报告文本以及训练诊断报告文本分别进行特征提取处理，分别获得训练医学图像特征、训练影像报告文本特征以及训练诊断报告文本特征，包括：通过所述多模态预训练模型的视觉编码器对所述训练医学影像进行特征提取处理，获得所述训练医学图像预训练特征，以便根据所述训练医学图像预训练特征确定所述训练医学图像特征；通过所述多模态预训练模型的文本编码器对所述训练影像报告文本进行特征提取处理，获得所述训练影像报告文本预训练特征，以便根据所述训练影像报告文本训练特征确定所述训练影像报告文本特征；通过所述多模态预训练模型的文本编码器对所述训练诊断报告文本进行特征提取处理，获得所述训练诊断报告文本预训练特征，以便根据所述训练诊断报告文本预训练特征确定所述训练诊断报告文本特征。7.根据权利要求6所述方法，其特征在于，所述网络模型结构还包括多层感知机模型，所述多层感知机模型包括第一参数单元、第二参数单元以及第三参数单元；其中，根据所述训练医学图像预训练特征确定所述训练医学图像特征，包括：通过所述第一参数单元对所述训练医学图像预训练特征进行加权和激活处理，获得所述训练医学图像特征；其中，根据所述训练影像报告文本训练特征确定所述训练影像报告文本特征，包括：通过所述第二参数单元对所述训练影像报告文本训练特征进行加权和激活处理，获得所述训练影像报告文本特征；其中，根据所述训练诊断报告文本预训练特征确定所述训练诊断报告文本特征，包括：通过所述第三参数单元对所述训练诊断报告文本预训练特征进行加权和激活处理，获得所述训练诊断报告文本特征。8.一种医疗数据跨模态检索装置，其特征在于，包括：特征提取处理模块，用于通过网络模型结构对训练医学影像、训练影像报告文本以及训练诊断报告文本分别进行特征提取处理，分别获得训练医学图像特征、训练影像报告文本特征以及训练诊断报告文本特征，其中所述训练影像报告文本用于对所述训练医学影像中的特征进行描述，其中所述训练诊断报告文本用于对所述训练医学影像中的诊断结果进行描述；第一对比损失值确定模块，用于确定所述训练医学图像特征与所述训练影像报告文本特征之间的第一对比损失值，其中所述第一对比损失值用于控制类别相同的训练医学图像特征与训练影像报告文本特征的距离近，所述第一对比损失值还用于控制类别不同的训练医学图像特征与训练影像报告文本特征的距离远；第二对比损失值确定模块，用于确定所述训练医学图像特征与所述训练诊断报告文本特征之间的第二对比损失值，其中所述第二对比损失值用于控制类别相同的训练医学图像特征与训练诊断报告文本特征的距离近，所述第二对比损失值还用于控制类别不同的训练医学图像特征与训练诊断报告文本特征的距离远；第三对比损失值确定模块，用于确定所述训练诊断报告文本特征与所述训练影像报告文本特征之间的第三对比损失值，其中所述第三对比损失值用于控制相同类别的训练诊断报告文本特征与训练影像报告文本特征的距离近，所述第三对比损失值还用于控制不同类别的训练诊断报告文本特征与训练影像报告文本特征的距离远；训练模块，用于根据所述第一对比损失值、所述第二对比损失值以及所述第三对比损失值对所述网络模型结构进行训练，以便根据训练完成后的所述网络模型结构进行跨模态检索。9.一种电子设备，其特征在于，包括：存储器和处理器；所述存储器用于存储计算机程序指令；所述处理器调用所述存储器存储的所述计算机程序指令，用于实现如权利要求1-7任一项所述的医疗数据跨模态检索方法。10.一种计算机可读存储介质，所述计算机可读存储介质上存储有计算机程序指令，其特征在于，所述计算机程序指令被处理器执行时实现如权利要求1-7任一项所述的医疗数据跨模态检索方法。
说明书desc
技术领域本申请涉及医学数据处理技术领域，尤其涉及一种医疗数据跨模态检索方法、装置、电子设备和计算机可读存储介质。背景技术本部分旨在为权利要求书中陈述的本申请的实施方式提供背景或上下文。此处的描述不因为包括在本部分中就承认是现有技术。信息资源主要包括3种模态：自然语言、视觉信号及音频信号。跨模态检索是以一种类型的数据作为查询来检索另一种类型的相关数据。在临床场景中，临床医生通过分析医学图像中的病灶特征与诊断信息形成医学影像报告或者医学诊断报告，诊断报告可以被用来检索与其描述相关的各种模态的医学图像，而医学图像也可以被用来检索关于该类病症的或者影像报告诊断报告。因此，为临床医生开发一种跨模态的医疗数据检索系统，可以辅助医生快速查询包括医学图像和诊断报告在内的相关过往病例，支持临床医生按影像的征象标签进行影像数据检索，对于辅助临床诊疗和多模态医学信息管理具有重要意义。因此，本申请要解决的技术问题是如何提供跨模态检索的准确性。发明内容本申请的目的在于提供一种医疗数据跨模态检索方法、装置、电子设备以及计算机可读存储介质，可以提高跨模态检索的准确性。本申请的其他特性和优点将通过下面的详细描述变得显然，或部分地通过本申请的实践而习得。本申请实施例提供了一种医疗数据跨模态检索方法，包括：通过网络模型结构对训练医学影像、训练影像报告文本以及训练诊断报告文本分别进行特征提取处理，分别获得训练医学图像特征、训练影像报告文本特征以及训练诊断报告文本特征，其中所述训练影像报告文本用于对所述训练医学影像中的特征进行描述，其中所述训练诊断报告文本用于对所述训练医学影像中的诊断结果进行描述；确定所述训练医学图像特征与所述训练影像报告文本特征之间的第一对比损失值，其中所述第一对比损失值用于控制类别相同的训练医学图像特征与训练影像报告文本特征的距离近，所述第一对比损失值还用于控制类别不同的训练医学图像特征与训练影像报告文本特征的距离远；确定所述训练医学图像特征与所述训练诊断报告文本特征之间的第二对比损失值，其中所述第二对比损失值用于控制类别相同的训练医学图像特征与训练诊断报告文本特征的距离近，所述第二对比损失值还用于控制类别不同的训练医学图像特征与训练诊断报告文本特征的距离远；确定所述训练诊断报告文本特征与所述训练影像报告文本特征之间的第三对比损失值，其中所述第三对比损失值用于控制相同类别的训练诊断报告文本特征与训练影像报告文本特征的距离近，所述第三对比损失值还用于控制不同类别的训练诊断报告文本特征与训练影像报告文本特征的距离远；根据所述第一对比损失值、所述第二对比损失值以及所述第三对比损失值对所述网络模型结构进行训练，以便根据训练完成后的所述网络模型结构进行跨模态检索。在一些实施例中，所述训练医学图像特征是多个，所述训练影像报告文本特征也是多个；其中，确定所述训练医学图像特征与所述训练影像报告文本特征之间的第一对比损失值，包括：确定各个训练医学图像特征与各个训练影像报告文本特征两两之间的特征距离；根据所述两两之间的特征距离将类别相同的训练医学图像特征与训练影像报告文本特征的特征距离相加获得第一距离和；根据所述两两之间的特征距离将类别不同的训练医学图像特征与训练影像报告文本特征的特征距离相加获得第二距离和；根据所述第一距离和和所述第二距离和确定所述第一对比损失值，其中所述第一对比损失值与所述第一距离和正相关，所述第一对比损失值与所述第二距离和负相关。在一些实施例中，所述方法还包括：通过所述网络模型结构中的分类器对所述训练医学图像特征与所述训练影像报告文本特征进行预测处理，以确定所述训练医学图像特征与所述训练影像报告文本特征之间的第一类别相关度；通过所述网络模型结构中的分类器对所述训练医学图像特征与所述训练诊断报告文本特征进行预测处理，以确定所述训练医学图像特征与所述训练诊断报告文本特征之间的第二类别相关度；通过所述网络模型结构中的分类器对所述训练诊断报告文本特征与所述训练影像报告文本特征进行预测处理，以确定所述训练诊断报告文本特征与所述训练影像报告文本特征之间的第三类别相关度；确定所述训练医学影像、所述训练影像报告文本以及所述训练诊断报告文本之间的类别标签，所述类别标签用于指示所述训练医学影像、所述训练影像报告文本以及所述训练诊断报告文本是否是同一类别的；根据所述类别标签、所述第一类别相关度、所述第二类别相关度以及所述第三类别相关度确定所述训练医学影像、所述训练影像报告文本以及所述训练诊断报告文本之间交叉损失函数值；其中，根据所述第一对比损失值、所述第二对比损失值以及所述第三对比损失值对所述网络模型结构进行训练，包括：根据所述第一对比损失值、所述第二对比损失值、所述第三对比损失值以及所述交叉损失函数值对所述网络模型结构进行训练。在一些实施例中，根据训练完成后的所述网络模型结构进行跨模态检索，包括：获取第一待检索医学影像；通过所述网络模型结构对所述第一待检索医学影像进行特征提取处理，获得第一待检索医学图像特征；获取多个预置影像报告文本特征，所述预置影像报告文本特征是通过所述网络模型结构对预置影像文本报告进行特征提取后获得的；在所述多个预置影像报告文本特征中确定与所述待检索医学图像特征距离前N的预置影像报告文本特征作为目标影像报告文本特征，N为大于或者等于1的整数；将所述目标影像报告文本特征对应的预置影像文本报告作为所述第一待检索医学影像对应的影像报告文本。在一些实施例中，根据训练完成后的所述网络模型结构进行跨模态检索，包括：获取第二待检索医学影像；通过所述网络模型结构对所述第二待检索医学影像进行特征提取处理，获得第二待检索医学图像特征；获取多个预置诊断报告文本特征，所述预置诊断报告文本特征是通过所述网络模型结构对预置诊断报告文本进行特征提取后获得的；在所述多个预置诊断报告文本特征中确定与所述第二待检索医学图像特征距离前M的预置影像报告文本特征作为目标诊断报告文本特征，M为大于或者等于1的整数；将所述目标诊断报告文本特征对应的预置诊断报告文本作为所述第二待检索医学影像对应的诊断报告文本。在一些实施例中，所述网络模型结构包括多模态预训练模型，所述多模态预训练模型包括视觉编码器和文本编码器；其中，通过网络模型结构对训练医学影像、训练影像报告文本以及训练诊断报告文本分别进行特征提取处理，分别获得训练医学图像特征、训练影像报告文本特征以及训练诊断报告文本特征，包括：通过所述多模态预训练模型的视觉编码器对所述训练医学影像进行特征提取处理，获得所述训练医学图像预训练特征，以便根据所述训练医学图像预训练特征确定所述训练医学图像特征；通过所述多模态预训练模型的文本编码器对所述训练影像报告文本进行特征提取处理，获得所述训练影像报告文本预训练特征，以便根据所述训练影像报告文本训练特征确定所述训练影像报告文本特征；通过所述多模态预训练模型的文本编码器对所述训练诊断报告文本进行特征提取处理，获得所述训练诊断报告文本预训练特征，以便根据所述训练诊断报告文本预训练特征确定所述训练诊断报告文本特征。在一些实施例中，所述网络模型结构还包括多层感知机模型，所述多层感知机模型包括第一参数单元、第二参数单元以及第三参数单元；其中，根据所述训练医学图像预训练特征确定所述训练医学图像特征，包括：通过所述第一参数单元对所述训练医学图像预训练特征进行加权和激活处理，获得所述训练医学图像特征；其中，根据所述训练影像报告文本训练特征确定所述训练影像报告文本特征，包括：通过所述第二参数单元对所述训练影像报告文本训练特征进行加权和激活处理，获得所述训练影像报告文本特征；其中，根据所述训练诊断报告文本预训练特征确定所述训练诊断报告文本特征，包括：通过所述第三参数单元对所述训练诊断报告文本预训练特征进行加权和激活处理，获得所述训练诊断报告文本特征。本申请实施例提供了一种医疗数据跨模态检索装置，包括：特征提取处理模块、第一对比损失值确定模块、第二对比损失值确定模块、第三对比损失值确定模块和训练模块。其中，所述特征提取处理模块用于通过网络模型结构对训练医学影像、训练影像报告文本以及训练诊断报告文本分别进行特征提取处理，分别获得训练医学图像特征、训练影像报告文本特征以及训练诊断报告文本特征，其中所述训练影像报告文本用于对所述训练医学影像中的特征进行描述，其中所述训练诊断报告文本用于对所述训练医学影像中的诊断结果进行描述；所述第一对比损失值确定模块可以用于确定所述训练医学图像特征与所述训练影像报告文本特征之间的第一对比损失值，其中所述第一对比损失值用于控制类别相同的训练医学图像特征与训练影像报告文本特征的距离近，所述第一对比损失值还用于控制类别不同的训练医学图像特征与训练影像报告文本特征的距离远；所述第二对比损失值确定模块可以用于确定所述训练医学图像特征与所述训练诊断报告文本特征之间的第二对比损失值，其中所述第二对比损失值用于控制类别相同的训练医学图像特征与训练诊断报告文本特征的距离近，所述第二对比损失值还用于控制类别不同的训练医学图像特征与训练诊断报告文本特征的距离远；所述第三对比损失值确定模块可以用于确定所述训练诊断报告文本特征与所述训练影像报告文本特征之间的第三对比损失值，其中所述第三对比损失值用于控制相同类别的训练诊断报告文本特征与训练影像报告文本特征的距离近，所述第三对比损失值还用于控制不同类别的训练诊断报告文本特征与训练影像报告文本特征的距离远；所述训练模块可以用于根据所述第一对比损失值、所述第二对比损失值以及所述第三对比损失值对所述网络模型结构进行训练，以便根据训练完成后的所述网络模型结构进行跨模态检索。本申请实施例提出一种电子设备，该电子设备包括：存储器和处理器；所述存储器用于存储计算机程序指令；所述处理器调用所述存储器存储的所述计算机程序指令，用于实现上述任一项所述的医疗数据跨模态检索方法。本申请实施例提出一种计算机可读存储介质，其上存储有计算机程序指令，实现如上述任一项所述的医疗数据跨模态检索方法。本申请实施例提出一种计算机程序产品或计算机程序，该计算机程序产品或计算机程序包括计算机程序指令，该计算机程序指令存储在计算机可读存储介质中。从计算机可读存储介质读取该计算机程序指令，处理器执行该计算机程序指令，实现上述医疗数据跨模态检索方法。本申请实施例提供的医疗数据跨模态检索方法、装置及电子设备和计算机可读存储介质，可以通过训练医学图像特征、训练影像报告文本特征以及训练诊断文本报告两两之间的对比损失值，对网络模型结构进行训练，以通过网络模型结构对训练医学图像特征、训练影像报文文本特征以及训练诊断文本报告特征两两之间进行准确的跨模态检索。应当理解的是，以上的一般描述和后文的细节描述仅是示例性的，并不能限制本申请。附图说明此处的附图被并入说明书中并构成本说明书的一部分，示出了符合本申请的实施例，并与说明书一起用于解释本申请的原理。显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1示出了可以应用于本申请实施例的医疗数据跨模态检索方法或医疗数据跨模态检索装置的场景示意图。图2是根据一示例性实施例示出的一种医疗数据跨模态检索方法的流程图。图3是根据一示例性实施例示出的一种对比损失值确定方法的流程图。图4是根据一示例性实施例示出的一种网络模型结构训练方法的流程图。图5是根据一示例性实施例示出的一种跨模态检索方法的流程图。图6是根据一示例性实施例示出的一种跨模态检索方法的流程图。图7是根据一示例性实施例示出的一种跨模态检索方法对应的结构示意图。图8是根据一示例性实施例示出的一种医疗数据跨模态检索装置的框图。图9示出了适于用来实现本申请实施例的电子设备的结构示意图。具体实施方式现在将参考附图更全面地描述示例实施例。然而，示例实施例能够以多种形式实施，且不应被理解为限于在此阐述的实施例；相反，提供这些实施例使得本申请将全面和完整，并将示例实施例的构思全面地传达给本领域的技术人员。在图中相同的附图标记表示相同或类似的部分，因而将省略对它们的重复描述。本领域技术人员知道，本申请的实施方式可以为一种系统、装置、设备、方法或计算机程序产品。因此，本申请可以具体实现为以下形式，即：完全的硬件、完全的软件，或者硬件和软件结合的形式。本申请所描述的特征、结构或特性可以以任何合适的方式结合在一个或更多实施方式中。在下面的描述中，提供许多具体细节从而给出对本申请的实施方式的充分理解。然而，本领域技术人员将意识到，可以实践本申请的技术方案而省略特定细节中的一个或更多，或者可以采用其它的方法、组元、装置、步骤等。在其它情况下，不详细示出或描述公知方法、装置、实现或者操作以避免模糊本申请的各方面。附图仅为本申请的示意性图解，图中相同的附图标记表示相同或类似的部分，因而将省略对它们的重复描述。附图中所示的一些方框图不一定必须与物理或逻辑上独立的实体相对应。可以采用软件形式来实现这些功能实体，或在一个或多个硬件模块或集成电路中实现这些功能实体，或在不同网络和/或处理器装置和/或微控制器装置中实现这些功能实体。附图中所示的流程图仅是示例性说明，不是必须包括所有的内容和步骤，也不是必须按所描述的顺序执行。例如，有的步骤还可以分解，而有的步骤可以合并或部分合并，因此实际执行的顺序有可能根据实际情况改变。在本申请的描述中，除非另有说明，“/”表示“或”的意思，例如，A/B可以表示A或B。本文中的“和/或”仅仅是一种描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。此外，“至少一个”是指一个或多个，“多个”是指两个或两个以上。“第一”、“第二”等字样并不对数量和执行次序进行限定，并且“第一”、“第二”等字样也并不限定一定不同；用语“包含”、“包括”和“具有”用以表示开放式的包括在内的意思并且是指除了列出的要素/组成部分/等之外还可存在另外的要素/组成部分/等。为了能够更清楚地理解本申请的上述目的、特征和优点，下面结合附图和具体实施方式对本申请进行进一步的详细描述，需要说明的是，在不冲突的情况下，本申请的实施例及实施例中的特征可以相互组合。在相关技术中，基于预训练的大语言模型得到了越来越多的关注，并广泛应用于下游任务，例如可以基于预训练的CLIP模型获取丰富的文本-图像语义。CLIP模型是一种基于对抗学习的图像分类模型，能够同时理解自然语言描述和图像内容，并在二者之间建立联系。它旨在通过大规模的对比学习，学习一种通用的图像-文本表示，用于各种视觉和语言任务。但是CLIP模型使用对比损失约束只能给出两种模态匹配或不匹配的判断，且每条图像模态信息有且仅有一条文本模态信息与之匹配，而医学图像通常是对某一身体区域的整体扫描，其中包含了复杂的组织结构和解剖结构，通常能够显示多种疾病特征，因此一张医学图像和一份诊断报告一般属于多个语义类别，因此，本申请提出了一种基于CLIP模型的医学图像-文本跨模态检索方法，旨在充分考虑模态内、模态间的相互关联的语义信息，提高应用于多标签医疗数据的跨模态检索的准确性。在公共特征空间中，不同模态的特征在分布上具有较大的差异，如何在多模态的数据差异较大的情况下进行特征相似性度量是一个极大的挑战。目前常用的方法是基于相似度匹配，将图像和文本分别编码为向量，然后在向量空间中计算它们的相似度，但是该方法存在局限性，难以理解向量背后的语义含义，无法捕捉高层次的语义信息。为了解决上述问题，本申请提供了以下技术方案。下面结合附图对本申请示例实施方式进行详细说明。图1示出了可以应用于本申请实施例的医疗数据跨模态检索方法或医疗数据跨模态检索装置的场景示意图。请参考图1，其示出了本申请一个示例性实施例提供的实施环境的示意图。如图1所示，系统架构100可以包括终端设备101、102、103，网络104和服务器105。网络104用以在终端设备101、102、103和服务器105之间提供通信链路的介质。网络104可以包括各种连接类型，例如有线、无线通信链路或者光纤电缆等等。用户可以使用终端设备101、102、103通过网络104与服务器105交互，以接收或发送消息等。其中，终端设备101、102、103可以是具有显示屏并且支持网页浏览的各种电子设备，包括但不限于智能手机、平板电脑、膝上型便携计算机、台式计算机、可穿戴设备、虚拟现实设备、智能家居等等。服务器105可以是提供各种服务的服务器，例如对用户利用终端设备101、102、103所进行操作的装置提供支持的后台管理服务器。后台管理服务器可以对接收到的请求等数据进行分析等处理，并将处理结果反馈给终端设备。服务器可以是独立的物理服务器，也可以是多个物理服务器构成的服务器集群或者分布式系统，还可以是提供云服务、云数据库、云计算、云函数、云存储、网络服务、云通信、中间件服务、域名服务、安全服务、CDN、以及大数据和人工智能平台等基础云计算服务的云服务器等，本申请对此不做限制。服务器105可例如通过网络模型结构对训练医学影像、训练影像报告文本以及训练诊断报告文本分别进行特征提取处理，分别获得训练医学图像特征、训练影像报告文本特征以及训练诊断报告文本特征，其中训练影像报告文本用于对训练医学影像中的特征进行描述，其中训练诊断报告文本用于对训练医学影像中的诊断结果进行描述；服务器105可例如确定训练医学图像特征与训练影像报告文本特征之间的第一对比损失值，其中第一对比损失值用于控制类别相同的训练医学图像特征与训练影像报告文本特征的距离近，第一对比损失值还用于控制类别不同的训练医学图像特征与训练影像报告文本特征的距离远；服务器105可例如确定训练医学图像特征与训练影像报告文本特征之间的第二对比损失值，其中第二对比损失值用于控制类别相同的训练医学图像特征与训练影像报告文本特征的距离近，第二对比损失值还用于控制类别不同的训练医学图像特征与训练影像报告文本特征的距离远；服务器105可例如确定训练诊断报告文本特征与训练影像报告文本特征之间的第三对比损失值，其中第三对比损失值用于控制相同类别的训练诊断报告文本特征与训练影像报告文本特征的距离近，第三对比损失值还用于控制不同类别的训练诊断报告文本特征与训练影像报告文本特征的距离远；服务器105可例如根据第一对比损失值、第二对比损失值以及第三对比损失值对网络模型结构进行训练，以便根据训练完成后的网络模型结构进行跨模态检索。应该理解，图1中的终端设备、网络和服务器的数目仅仅是示意性的，服务器105可以是一个实体的服务器，还可以为多个服务器组成，根据实际需要，可以具有任意数目的终端设备、网络和服务器。在上述系统架构下，本申请实施例中提供了一种医疗数据跨模态检索方法，该方法可以由任意具备计算处理能力的电子设备执行。图2是根据一示例性实施例示出的一种医疗数据跨模态检索方法的流程图。本申请实施例所提供的方法可以由任意具备计算处理能力的电子设备来执行，例如该方法可以由上述图1实施例中的服务器或终端设备来执行，也可以由服务器和终端设备共同执行，在下面的实施例中，以服务器为执行主体为例进行举例说明，但本申请并不限定于此。参照图2，本申请实施例提供的医疗数据跨模态检索方法可以包括以下步骤。步骤S202，通过网络模型结构对训练医学影像、训练影像报告文本以及训练诊断报告文本分别进行特征提取处理，分别获得训练医学图像特征、训练影像报告文本特征以及训练诊断报告文本特征，其中训练影像报告文本用于对训练医学影像中的特征进行描述，其中训练诊断报告文本用于对训练医学影像中的诊断结果进行描述。上述网络结构可以是神经网络结构、机器学习结构等，本申请对此不做限制。上述医学影像可以指的是医学领域中的电子计算机断层扫描影像超声成像、核素成像以及磁共振成像等，本申请对此不做限制。上述影像报告文本能够对医学影像中的特征进行描述，上述特征可以指的是肿块形状、大小、器官大小、形状等，本申请对影像报告文本中的文本内容不做限制。上述诊断报告文本可以用于对医学影像中的诊断结果进行描述。在一些实施例中，诊断报告文本可以包括一个或者多个诊断编码，每个诊断编码能够对医学影像中出现症状或者根据医学影像确定的诊断结果进行表示。在本申请中名词前面的训练、预测等词仅仅用于进行区分不同阶段，不对词语本身进行限定。在一些实施例中，网络模型结构可以包括多模态预训练模型，多模态预训练模型包括视觉编码器和文本编码器。上述多模态预训练模型可以指的是CLIP模型。其中，视觉编码器是CLIP模型中用于对视觉数据进行特征提取的编码器，文本编码器可以指的是CLIP模型中对文本数据进行特征提取的编码器。在一些实施例中，可以通过多模态预训练模型的视觉编码器对训练医学影像进行特征提取处理，获得训练医学图像预训练特征，以便根据训练医学图像预训练特征确定训练医学图像特征。在一些实施例中，可以通过多模态预训练模型的文本编码器对训练影像报告文本进行特征提取处理，获得训练影像报告文本预训练特征，以便根据训练影像报告文本训练特征确定训练影像报告文本特征。在一些实施例中，可以通过多模态预训练模型的文本编码器对训练诊断报告文本进行特征提取处理，获得训练诊断报告文本预训练特征，以便根据训练诊断报告文本预训练特征确定训练诊断报告文本特征。在一些实施例中，上述网络模型结构还可以包括多层感知机模型，多层感知机模型可以包括第一参数单元、第二参数单元以及第三参数单元。在一些实施例中，根据训练医学图像预训练特征确定训练医学图像特征可以包括：通过第一参数单元对训练医学图像预训练特征进行加权和激活处理，获得训练医学图像特征）。在一些实施例中，根据训练影像报告文本训练特征确定训练影像报告文本特征可以包括：通过第二参数单元对训练影像报告文本训练特征进行加权和激活处理，获得训练影像报告文本特征）。在一些实施例中，根据训练诊断报告文本预训练特征确定训练诊断报告文本特征可以包括：通过第三参数单元对训练诊断报告文本预训练特征进行加权和激活处理，获得训练诊断报告文本特征）。步骤S204，确定训练医学图像特征与训练影像报告文本特征之间的第一对比损失值，其中第一对比损失值用于控制类别相同的训练医学图像特征与训练影像报告文本特征的距离近，第一对比损失值还用于控制类别不同的训练医学图像特征与训练影像报告文本特征的距离远。步骤S206，确定训练医学图像特征与训练诊断报告文本特征之间的第二对比损失值，其中第二对比损失值用于控制类别相同的训练医学图像特征与训练诊断报告文本特征的距离近，第二对比损失值还用于控制类别不同的训练医学图像特征与训练诊断报告文本特征的距离远。步骤S208，确定训练诊断报告文本特征与训练影像报告文本特征之间的第三对比损失值，其中第三对比损失值用于控制相同类别的训练诊断报告文本特征与训练影像报告文本特征的距离近，第三对比损失值还用于控制不同类别的训练诊断报告文本特征与训练影像报告文本特征的距离远。步骤S210，根据第一对比损失值、第二对比损失值以及第三对比损失值对网络模型结构进行训练，以便根据训练完成后的网络模型结构进行跨模态检索。上述实施例，可以通过训练医学图像特征与训练影像报告文本特征与训练诊断文本报告两两之间的对比损失值，对网络模型结构进行训练，以通过网络模型结构对训练医学图像特征、训练影像报文文本特征以及训练诊断文本报告特征两两之间进行准确的跨模态检索。图3是根据一示例性实施例示出的一种对比损失值确定方法的流程图。在一些实施例中，上述训练医学图像特征可以是多个，上述训练影像报告文本特征也可以是多个。参考图3，上述对比损失值确定方法可以包括以下步骤。步骤S302，确定各个训练医学图像特征与各个训练影像报告文本特征两两之间的特征距离。步骤S304，根据两两之间的特征距离将类别相同的训练医学图像特征与训练影像报告文本特征的特征距离相加获得第一距离和。步骤S306，根据两两之间的特征距离将类别不同的训练医学图像特征与训练影像报告文本特征的特征距离相加获得第二距离和。步骤S308，根据第一距离和和第二距离和确定第一对比损失值，其中第一对比损失值与第一距离和正相关，第一对比损失值与第二距离和负相关。上述方案的具体实现过程可以参考公式对应的部分说明，本实施例不再赘述。图4是根据一示例性实施例示出的一种网络模型结构训练方法的流程图。参考图4，上述网络模型结构训练方法可以包括以下步骤。步骤S402，通过网络模型结构中的分类器对训练医学图像特征与训练影像报告文本特征进行预测处理，以确定训练医学图像特征与训练影像报告文本特征之间的第一类别相关度。在一些实施例中，上述网络模型结构还可以包括分类器，那么可以通过网络模型结构中的分类器对训练医学图像特征与训练影像报告文本特征进行预测处理，以确定训练医学图像特征与训练影像报告文本特征之间的第一类别相关度。步骤S404，通过网络模型结构中的分类器对训练医学图像特征与训练诊断报告文本特征进行预测处理，以确定训练医学图像特征与训练诊断报告文本特征之间的第二类别相关度。在一些实施例中，还可以通过网络模型结构中的分类器对训练医学图像特征与训练诊断报告文本特征进行预测处理，以确定训练医学图像特征与训练诊断报告文本特征之间的第二类别相关度。步骤S406，通过网络模型结构中的分类器对训练诊断报告文本特征与训练影像报告文本特征进行预测处理，以确定训练诊断报告文本特征与训练影像报告文本特征之间的第三类别相关度。在一些实施例中，还可以通过网络模型结构中的分类器对训练诊断报告文本特征与训练影像报告文本特征进行预测处理，以确定训练诊断报告文本特征与训练影像报告文本特征之间的第三类别相关度。步骤S408，确定训练医学影像、训练影像报告文本以及训练诊断报告文本之间的类别标签，类别标签用于指示训练医学影像、训练影像报告文本以及训练诊断报告文本是否是同一类别的。在一些实施例中，在生成医学影像时可以对应的生成医学影像报告和医学诊断报告，那么在医学影像生成初期即存在对应关系的医学影像、影像报告即诊断报告即可以认为属于一类的。步骤S410，根据类别标签、第一类别相关度、第二类别相关度以及第三类别相关度确定训练医学影像、训练影像报告文本以及训练诊断报告文本之间交叉损失函数值。在一些实施例中，已知训练医学影像、训练影像报告文本以及训练诊断报告文本是否为一类，又已知训练医学影像和训练影像报告文本之间的第一类别相关度、训练医学影像与训练诊断报之间的第二类别相关度以及训练影像报告与训练诊断报告之间的第三类别相关度，则可以获得训练医学影像、训练影像报告文本以及训练诊断报告文本之间的交叉损失函数值，具体可以参考公式，本实施例不再赘述。步骤S412，根据第一对比损失值、第二对比损失值、第三对比损失值以及交叉损失函数值对网络模型结构进行训练。通过上述实施例提供的技术方案，可以通过训练医学影像、训练影像报告文本以及训练诊断报告文本之间的交叉损失函数值和对比损失值对网络模型结构进行训练，以使得通过训练完成后的网络模型结构对图像和文本进行映射处理时，能够使得相同类别的图像和文本映射的足够近、同时能够使得类别不同的图像和文本映射的足够远。图5是根据一示例性实施例示出的一种跨模态检索方法的流程图。参考图5，上述跨模态检索方法可以包括以下步骤。步骤S502，获取第一待检索医学影像。步骤S504，通过网络模型结构对第一待检索医学影像进行特征提取处理，获得第一待检索医学图像特征。步骤S506，获取多个预置影像报告文本特征，预置影像报告文本特征是通过网络模型结构对预置影像文本报告进行特征提取后获得的。在一些实施例中，可以通过上述训练完成的网络模型结构对已知的各个预设影像报告文本进行特征提取，以获得各个预设影像报告文本组应的预置影像报告文本特征。步骤S508，在多个预置影像报告文本特征中确定与待检索医学图像特征距离前N的预置影像报告文本特征作为目标影像报告文本特征，N为大于或者等于1的整数。在一些实施例中，可以计算待检索医学图像特征与各个预设影像报告文本特征之间的距离，然后将特征距离前N的预置影像报告文本特征作为目标影像报告文本特征。步骤S510，将目标影像报告文本特征对应的预置影像文本报告作为第一待检索医学影像对应的影像报告文本。图6是根据一示例性实施例示出的一种跨模态检索方法的流程图。参考图6，上述跨模态检索方法可以包括以下步骤。步骤S602，获取第二待检索医学影像。步骤S604，通过网络模型结构对第二待检索医学影像进行特征提取处理，获得第二待检索医学图像特征。步骤S606，获取多个预置诊断报告文本特征，预置诊断报告文本特征是通过网络模型结构对预置诊断报告文本进行特征提取后获得的。在一些实施例中，可以通过上述训练完成的网络模型结构对已知的各个预置诊断报告文本进行特征提取，以获得各个预置诊断报告文本组应的预置诊断报告文本特征。步骤S608，在多个预置诊断报告文本特征中确定与第二待检索医学图像特征距离前M的预置影像报告文本特征作为目标诊断报告文本特征，M为大于或者等于1的整数。步骤610，将目标诊断报告文本特征对应的预置诊断报告文本作为第二待检索医学影像对应的诊断报告文本。根据上述图5和图6所示实施例，本领域技术人员还可以想到根据诊断报告文本跨模态检索影像报文文本和医学影像的技术方案；同理，本领域技术人员还可以想到根据影像报告文本跨模态检索诊断报告文本和医学影像的技术方案。本申请实施例还提供了一种跨模态检索方法。本实施例实现的过程是构建一种基于视觉-语言模型的医学图像-文本跨模态检索方法，该方法主要包括以下组成部分：数据编码模块：将医学图像和对应的影像报告文本、诊断报告文本构成图像-文本组作为模型输入。多模态特征提取模块：包括图像特征编码器和文本特征编码器。特征匹配模块：将各单模态特征通过跨模态注意力模块建立多模态之间的语义相关。损失函数：利用混合损失函数，强化类内相似度，弱化类间相似度。具体步骤如下：步骤1：获取训练数据。收集医学图像-影像报告文本-诊断报告文本组，利用数据增强方法，增加训练数据量，避免模型过拟合。步骤2：采用CLIP图像预训练模型对医学图像进行特征编码，获得单模态图像特征。步骤3：采用CLIP文本预训练模型对影像报告文本和诊断报告文本进行特征编码，获得单模态文本特征。步骤4：将各单模态特征通过注意力对齐处理得到模态对齐数据建立多模态之间的语义相关。步骤5：利用混合损失函数，强化类内相似度，弱化类间相似度，并通过反向传播更新训练参数。步骤6：跨模态检索。载入新的医学图像/报告文本，经过训练好的模型，设定检索参数，如选择前K张相匹配结果，即可返回与输入数据最相关的前K项报告文本/医学图像检索结果。本实施例的技术方案步骤如下。获取训练数据。收集医学图像-影像报告文本-诊断报告文本组，将图像-文本集合设定为，其中，/＞为输入医学图像样本，/＞为输入诊断报告样本，/＞为输入影像报告样本，N为图像文本组个数，k为大于或者等于1的整数。利用数据增强方法，增加训练数据量，避免模型过拟合。基于CLIP视觉模型获取图像特征。在相关技术中CLIP模型的视觉编码器采用卷积神经网络或视觉变形器的形式，在本申请中可以采用ResNet-50的CLIP图像特征提取器。通过CLIP图像预训练模型对医学图像进行特征编码，获得单模态图像特征，图像特征由以下公式表示：其中，为1024维，/＞为基于CLIP模型的视觉编码器，/＞为输入的第i张图像，i为大于或者等于1的整数，v代表图像数据对应的上标。基于CLIP文本模型获取文本特征。CLIP模型的视文本编码器使用Transformer学习文本表示。通过CLIP文本预训练模型对影像报告进行特征编码，获得单模态文本特征，文本特征由以下公式表示：其中，维度为1024，/＞为CLIP的文本编码器，/＞为输入的第i个报告文本，i为大于或者等于1的整数，t代表影像报告文本数据对应的上标。基于CLIP文本模型获取诊断编码特征。通过基于transformer的CLIP文本预训练模型对诊断类别进行特征编码，获得单模态诊断编码特征，文本特征由以下公式表示：其中，维度为1024，/＞为CLIP的文本编码器，/＞为输入的第i个图像文本组对应的诊断报告文本中的诊断编码，i为大于或者等于1的整数，l代表诊断报告文本对应的上标。将各单模态特征输入多层感知器来生成一个共同的表示空间进行数据对齐，具体可以参考公式~公式。其中，为图像特征，/＞为影像报告文本特征，/＞诊断报告文本特征，为可学习参数，/＞分别表示映射到公共空间的医学影像特征、影像报告文本特征和诊断报告文本特征。利用类内级与类间级混合损失函数将得到的最终模态数据进行归一化类别边界约束，强化类内相似度、弱化类间相似度，并通过反向传播更新训练参数。对于类别级损失函数基于交叉熵损失，其定义如公式。其中，代表第i个医学影像特征，/＞代表第j个影像报告文本特征，/＞代表第k个诊断报告文本特征，N表示多模态数据组个数，p表示两种不同模态的数据之间的匹配概率，标签/＞表示多模态数据对是否匹配为一类。其中，i是大于或者等于1的整数，T代表转置。对于类间级损失函数，使用基于公共特征空间的跨模态检索方法，需要在特征空间中计算跨模态样本的类内相似度和类间相似度，常用欧式距离来计算。欧式距离在二维空间中的计算如下式所示：其中，表示X在二维空间中A和B两个维度上的值，/＞表示Y在二维空间中A和B两个维度上的值。使用对比性损失来提供丰富的监督信号，它将属于同一类别的正样本对的距离最小化，将负样本对的距离最大化，给定n个医学影像图像-影像报告文本-诊断报告文本数据，计算公式~如下：其中，代表第i个医学影像特征，/＞代表第j个影像报告文本特征，/＞代表第k个诊断报告文本特征，/＞表示欧氏距离的平方，/＞表示预设的距离差，标签/＞表示多模态数据对是否匹配，n表示数据个数。标签/＞表示多模态数据对是否匹配为一类。为了利用数据到数据和数据到语义标签的关系，最大限度地提高信息利用率，使用混合损失使跨模态特征分布在同一语义特征的约束下。混合损失计算公式如下：其中，表示交叉熵损失，/＞为对比损失函数值，/＞为超参数。跨模态检索。载入新的单模态数据，经过训练好的模型，进行单模态特征提取。将特征向量与数据库中的存储的多模态数据进行特征相似度匹配计算，计算方法采用余弦相似度计算。设定检索参数，返回与输入数据最相关的前K项报告文本/医学图像检索/诊断类别结果。以输入病历报告中的病灶征象描述文本来检索匹配的影像数据为例，检索过程如图7所示。图7是根据一示例性实施例示出的一种跨模态检索过程。如图7所示，可以把报告文本输入到本申请提供的网络模型结构中即可以得到对应文本特征；然后将影像报告文本的文本特征与多个预置的诊断报告文本特征、或者预置的影像报告文本特征或者预置医学影像特征计算相似度，然后将相似度前几的预置诊断报告、预置影像报告或者预置医学影像作为检索结果。目前已有的跨模态检索方法大多是应用于自然数据集，而在医学领域中医学图像噪声较大，类间差异较小，往往需要专业的医生才能进行鉴别，这对于跨模态特征学习中图像端的特征学习是一个挑战。本申请使用预先训练好的CLIP模型作为视觉和文本编码器，将词级和区域级的细粒度相似性汇总为跨模态相似性来执行检索任务，通过对比学习从不同模态的数据中挖掘出隐含的高级语义信息，使具有相同语义信息的数据在特征空间中分布在相同的区域，具有不同语义信息的数据分布在特征空间的不同区域，使模型具有语义上的判别性，提高针对医学领域跨模态的数据检索的准确性。需要特别指出的是，上述医疗数据跨模态检索方法的各个实施例中的各个步骤均可以相互交叉、替换、增加、删减。因此，这些合理的排列组合变换之于医疗数据跨模态检索方法也应当属于本申请的保护范围，并且不应将本申请的保护范围局限在实施例之上。基于同一发明构思，本申请实施例中还提供了一种医疗数据跨模态检索装置，如下面的实施例。由于该装置实施例解决问题的原理与上述方法实施例相似，因此该装置实施例的实施可以参见上述方法实施例的实施，重复之处不再赘述。图8是根据一示例性实施例示出的一种医疗数据跨模态检索装置的框图。参照图8，本申请实施例提供的医疗数据跨模态检索装置800可以包括：特征提取处理模块801、第一对比损失值确定模块802、第二对比损失值确定模块803、第三对比损失值确定模块804和训练模块805。其中，特征提取处理模块801可以用于通过网络模型结构对训练医学影像、训练影像报告文本以及训练诊断报告文本分别进行特征提取处理，分别获得训练医学图像特征、训练影像报告文本特征以及训练诊断报告文本特征，其中训练影像报告文本用于对训练医学影像中的特征进行描述，其中训练诊断报告文本用于对训练医学影像中的诊断结果进行描述；第一对比损失值确定模块802可以用于确定训练医学图像特征与训练影像报告文本特征之间的第一对比损失值，其中第一对比损失值用于控制类别相同的训练医学图像特征与训练影像报告文本特征的距离近，第一对比损失值还用于控制类别不同的训练医学图像特征与训练影像报告文本特征的距离远；第二对比损失值确定模块803可以用于确定训练医学图像特征与训练诊断报告文本特征之间的第二对比损失值，其中第二对比损失值用于控制类别相同的训练医学图像特征与训练诊断报告文本特征的距离近，第二对比损失值还用于控制类别不同的训练医学图像特征与训练诊断报告文本特征的距离远；第三对比损失值确定模块804可以用于确定训练诊断报告文本特征与训练影像报告文本特征之间的第三对比损失值，其中第三对比损失值用于控制相同类别的训练诊断报告文本特征与训练影像报告文本特征的距离近，第三对比损失值还用于控制不同类别的训练诊断报告文本特征与训练影像报告文本特征的距离远；训练模块805可以用于根据第一对比损失值、第二对比损失值以及第三对比损失值对网络模型结构进行训练，以便根据训练完成后的网络模型结构进行跨模态检索。此处需要说明的是，上述特征提取处理模块801、第一对比损失值确定模块802、第二对比损失值确定模块803、第三对比损失值确定模块804、训练模块805对应于方法实施例中的S202～S210，上述模块与对应的步骤所实现的示例和应用场景相同，但不限于上述方法实施例所申请的内容。需要说明的是，上述模块作为装置的一部分可以在诸如一组计算机可执行指令的计算机系统中执行。在一些实施例中，训练医学图像特征是多个，训练影像报告文本特征也是多个；其中，第一对比损失值确定模块802可以包括：两辆距离确定子模块、第一距离和确定子模块、第二距离和确定子模块以及第一对比损失值确定子模块。其中，两辆距离确定子模块可以用于确定各个训练医学图像特征与各个训练影像报告文本特征两两之间的特征距离；第一距离和确定子模块可以用于根据两两之间的特征距离将类别相同的训练医学图像特征与训练影像报告文本特征的特征距离相加获得第一距离和；第二距离和确定子模块可以用于根据两两之间的特征距离将类别不同的训练医学图像特征与训练影像报告文本特征的特征距离相加获得第二距离和；第一对比损失值确定子模块可以用于根据第一距离和和第二距离和确定第一对比损失值，其中第一对比损失值与第一距离和正相关，第一对比损失值与第二距离和负相关。在一些实施例中，医疗数据跨模态检索装置还可以包括：第一类别相关度确定子模块、第二类别相关度确定子模块、第三类别相关度确定子模块、类别标签确定子模块以及交叉损失函数值确定子模块。其中，第一类别相关度确定子模块可以用于通过网络模型结构中的分类器对训练医学图像特征与训练影像报告文本特征进行预测处理，以确定训练医学图像特征与训练影像报告文本特征之间的第一类别相关度；第二类别相关度确定子模块可以用于通过网络模型结构中的分类器对训练医学图像特征与训练诊断报告文本特征进行预测处理，以确定训练医学图像特征与训练诊断报告文本特征之间的第二类别相关度；第三类别相关度确定子模块可以用于通过网络模型结构中的分类器对训练诊断报告文本特征与训练影像报告文本特征进行预测处理，以确定训练诊断报告文本特征与训练影像报告文本特征之间的第三类别相关度；类别标签确定子模块可以用于确定训练医学影像、训练影像报告文本以及训练诊断报告文本之间的类别标签，类别标签用于指示训练医学影像、训练影像报告文本以及训练诊断报告文本是否是同一类别的；交叉损失函数值确定子模块可以用于根据类别标签、第一类别相关度、第二类别相关度以及第三类别相关度确定训练医学影像、训练影像报告文本以及训练诊断报告文本之间交叉损失函数值。在一些实施例中，训练模块805可以包括：联合训练子模块。其中联合训练子模块可以用于根据第一对比损失值、第二对比损失值、第三对比损失值以及交叉损失函数值对网络模型结构进行训练。在一些实施例中，训练模块805可以包括：第一待检索医学影像获取子模块、第一待检索医学图像特征确定子模块、预置影像报告文本特征获取子模块、目标影像报告文本特征确定子模块以及影像报告文本确定子模块。其中，第一待检索医学影像获取子模块可以用于获取第一待检索医学影像；第一待检索医学图像特征确定子模块可以用于通过网络模型结构对第一待检索医学影像进行特征提取处理，获得第一待检索医学图像特征；预置影像报告文本特征获取子模块可以用于获取多个预置影像报告文本特征，预置影像报告文本特征是通过网络模型结构对预置影像文本报告进行特征提取后获得的；目标影像报告文本特征确定子模块可以用于在多个预置影像报告文本特征中确定与待检索医学图像特征距离前N的预置影像报告文本特征作为目标影像报告文本特征，N为大于或者等于1的整数；影像报告文本确定子模块可以用于将目标影像报告文本特征对应的预置影像文本报告作为第一待检索医学影像对应的影像报告文本。在一些实施例中，训练模块805可以包括：第二待检索医学影像获取子模块、第二待检索医学图像特征获取子模块、预置诊断报告文本特征确定子模块、目标诊断报告文本特征确定子模块以及诊断报告文本确定子模块。其中，第二待检索医学影像获取子模块可以用于获取第二待检索医学影像；第二待检索医学图像特征获取子模块可以用于通过网络模型结构对第二待检索医学影像进行特征提取处理，获得第二待检索医学图像特征；预置诊断报告文本特征确定子模块可以用于获取多个预置诊断报告文本特征，预置诊断报告文本特征是通过网络模型结构对预置诊断报告文本进行特征提取后获得的；目标诊断报告文本特征确定子模块可以用于在多个预置诊断报告文本特征中确定与第二待检索医学图像特征距离前M的预置影像报告文本特征作为目标诊断报告文本特征，M为大于或者等于1的整数；诊断报告文本确定子模块可以用于将目标诊断报告文本特征对应的预置诊断报告文本作为第二待检索医学影像对应的诊断报告文本。在一些实施例中，网络模型结构包括多模态预训练模型，多模态预训练模型包括视觉编码器和文本编码器；其中，特征提取处理模块801可以包括：训练医学图像预训练特征确定子模块、训练影像报告文本特征确定子模块、训练诊断报告文本预训练特征确定子模块。其中，训练医学图像预训练特征确定子模块可以用于通过多模态预训练模型的视觉编码器对训练医学影像进行特征提取处理，获得训练医学图像预训练特征，以便根据训练医学图像预训练特征确定训练医学图像特征；训练影像报告文本特征确定子模块可以用于通过多模态预训练模型的文本编码器对训练影像报告文本进行特征提取处理，获得训练影像报告文本预训练特征，以便根据训练影像报告文本训练特征确定训练影像报告文本特征；训练诊断报告文本预训练特征确定子模块可以用于通过多模态预训练模型的文本编码器对训练诊断报告文本进行特征提取处理，获得训练诊断报告文本预训练特征，以便根据训练诊断报告文本预训练特征确定训练诊断报告文本特征。在一些实施例中，网络模型结构还包括多层感知机模型，多层感知机模型包括第一参数单元、第二参数单元以及第三参数单元；其中，根据训练医学图像预训练特征确定训练医学图像特征，包括：通过第一参数单元对训练医学图像预训练特征进行加权和激活处理，获得训练医学图像特征；其中，根据训练影像报告文本训练特征确定训练影像报告文本特征，包括：通过第二参数单元对训练影像报告文本训练特征进行加权和激活处理，获得训练影像报告文本特征；其中，根据训练诊断报告文本预训练特征确定训练诊断报告文本特征，包括：通过第三参数单元对训练诊断报告文本预训练特征进行加权和激活处理，获得训练诊断报告文本特征。由于装置800的各功能已在其对应的方法实施例中予以详细说明，本申请于此不再赘述。描述于本申请实施例中所涉及到的模块和/或子模块和/或单元可以通过软件的方式实现，也可以通过硬件的方式来实现。所描述的模块和/或子模块和/或单元也可以设置在处理器中。其中，这些模块和/或子模块和/或单元的名称在某种情况下并不构成对该模块和/或子模块和/或单元本身的限定。附图中的流程图和框图，图示了按照本申请各种实施例的系统、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块或程序段的一部分，上述模块或程序段的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个接连地表示的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图或流程图中的每个方框、以及框图或流程图中的方框的组合，可以用执行规定的功能或操作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机程序指令的组合来实现。此外，上述附图仅是根据本申请示例性实施例的方法所包括的处理的示意性说明，而不是限制目的。易于理解，上述附图所示的处理并不表明或限制这些处理的时间顺序。另外，也易于理解，这些处理可以是例如在多个模块中同步或异步执行的。图9示出了适于用来实现本申请实施例的电子设备的结构示意图。需要说明的是，图9示出的电子设备900仅是一个示例，不应对本申请实施例的功能和使用范围带来任何限制。如图9所示，电子设备900包括中央处理单元901，其可以根据存储在只读存储器902中的程序或者从储存部分908加载到随机访问存储器903中的程序而执行各种适当的动作和处理。在RAM 903中，还存储有电子设备900操作所需的各种程序和数据。CPU 901、ROM 902以及RAM 903通过总线904彼此相连。输入/输出接口905也连接至总线904。以下部件连接至I/O接口905：包括键盘、鼠标等的输入部分906；包括诸如阴极射线管、液晶显示器等以及扬声器等的输出部分907；包括硬盘等的储存部分908；以及包括诸如LAN卡、调制解调器等的网络接口卡的通信部分909。通信部分909经由诸如因特网的网络执行通信处理。驱动器910也根据需要连接至I/O接口905。可拆卸介质911，诸如磁盘、光盘、磁光盘、半导体存储器等等，根据需要安装在驱动器910上，以便于从其上读出的计算机程序根据需要被安装入储存部分908。特别地，根据本申请的实施例，上文参考流程图描述的过程可以被实现为计算机软件程序。例如，本申请的实施例包括一种计算机程序产品，其包括承载在计算机可读存储介质上的计算机程序，该计算机程序包含用于执行流程图所示的方法的计算机程序指令。在这样的实施例中，该计算机程序可以通过通信部分909从网络上被下载和安装，和/或从可拆卸介质911被安装。在该计算机程序被中央处理单元901执行时，执行本申请的系统中限定的上述功能。需要说明的是，本申请所示的计算机可读存储介质可以是计算机可读信号介质或者计算机可读存储介质或者是上述两者的任意组合。计算机可读存储介质例如可以是——但不限于——电、磁、光、电磁、红外线、或半导体的系统、装置或器件，或者任意以上的组合。计算机可读存储介质的更具体的例子可以包括但不限于：具有一个或多个导线的电连接、便携式计算机磁盘、硬盘、随机访问存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑磁盘只读存储器、光存储器件、磁存储器件、或者上述的任意合适的组合。在本申请中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用。而在本申请中，计算机可读的信号介质可以包括在基带中或者作为载波一部分传播的数据信号，其中承载了计算机可读的计算机程序指令。这种传播的数据信号可以采用多种形式，包括但不限于电磁信号、光信号或上述的任意合适的组合。计算机可读的信号介质还可以是计算机可读存储介质以外的任何计算机可读存储介质，该计算机可读存储介质可以发送、传播或者传输用于由指令执行系统、装置或者器件使用或者与其结合使用的程序。计算机可读存储介质上包含的计算机程序指令可以用任何适当的介质传输，包括但不限于：无线、电线、光缆、RF等等，或者上述的任意合适的组合。作为另一方面，本申请还提供了一种计算机可读存储介质，该计算机可读存储介质可以是上述实施例中描述的设备中所包含的；也可以是单独存在，而未装配入该设备中。上述计算机可读存储介质承载有一个或者多个程序，当上述一个或者多个程序被一个该设备执行时，使得该设备可实现功能包括：通过网络模型结构对训练医学影像、训练影像报告文本以及训练诊断报告文本分别进行特征提取处理，分别获得训练医学图像特征、训练影像报告文本特征以及训练诊断报告文本特征，其中训练影像报告文本用于对训练医学影像中的特征进行描述，其中训练诊断报告文本用于对训练医学影像中的诊断结果进行描述；确定训练医学图像特征与训练影像报告文本特征之间的第一对比损失值，其中第一对比损失值用于控制类别相同的训练医学图像特征与训练影像报告文本特征的距离近，第一对比损失值还用于控制类别不同的训练医学图像特征与训练影像报告文本特征的距离远；确定训练医学图像特征与训练影像报告文本特征之间的第二对比损失值，其中第二对比损失值用于控制类别相同的训练医学图像特征与训练影像报告文本特征的距离近，第二对比损失值还用于控制类别不同的训练医学图像特征与训练影像报告文本特征的距离远；确定训练诊断报告文本特征与训练影像报告文本特征之间的第三对比损失值，其中第三对比损失值用于控制相同类别的训练诊断报告文本特征与训练影像报告文本特征的距离近，第三对比损失值还用于控制不同类别的训练诊断报告文本特征与训练影像报告文本特征的距离远；根据第一对比损失值、第二对比损失值以及第三对比损失值对网络模型结构进行训练，以便根据训练完成后的网络模型结构进行跨模态检索。根据本申请的一个方面，提供了一种计算机程序产品或计算机程序，该计算机程序产品或计算机程序包括计算机程序指令，该计算机程序指令存储在计算机可读存储介质中。从计算机可读存储介质读取该计算机程序指令，处理器执行该计算机程序指令，实现上述实施例的各种可选实现方式中提供的方法。通过以上的实施方式的描述，本领域的技术人员易于理解，这里描述的示例实施方式可以通过软件实现，也可以通过软件结合必要的硬件的方式来实现。因此，本申请实施例的技术方案可以以软件产品的形式体现出来，该软件产品可以存储在一个非易失性存储介质中，包括若干计算机程序指令用以使得一台电子设备执行根据本申请实施例的方法。本领域技术人员在考虑说明书及实践在这里申请的申请后，将容易想到本申请的其他实施例。本申请旨在涵盖本申请的任何变型、用途或者适应性变化，这些变型、用途或者适应性变化遵循本申请的一般性原理并包括本申请未申请的本技术领域中的公知常识或惯用技术手段。说明书和实施例仅被视为示例性的，本申请的真正范围和精神由权利要求指出。应当理解的是，本申请并不限于这里已经示出的详细结构、附图方式或实现方法，相反，本申请意图涵盖包含在所附权利要求的精神和范围内的各种修改和等效设置。
