标题title
一种财务报表自动统计结算方法及系统
摘要abst
本发明涉及数据处理技术领域，具体涉及一种财务报表自动统计结算方法及系统，包括：采集所有用户的每个类型的整体历史财务数据集合、当前用户的每个类型的个体历史财务数据集合以及当前用户的当前财务数据；根据所有用户的每个类型的整体历史财务数据集合得到每个类型的表征能力，进而得到最佳类型；根据当前用户的最佳类型的个体历史财务数据集合及当前财务数据得到当前财务数据的面积差异值，根据面积差异值设置K值；筛选出当前财务数据的参考历史财务数据，根据K值和参考历史财务数据进行异常分析和财务结算分析。从而根据当前数据的异常情况设置出适用于当前数据异常分析的K值，提高异常分析的准确性。
权利要求书clms
1.一种财务报表自动统计结算方法，其特征在于，该方法包括以下步骤：采集所有用户的每个类型的整体历史财务数据集合、当前用户的每个类型的个体历史财务数据集合以及当前用户的当前财务数据；根据所有用户的每个类型的整体历史财务数据集合得到每个类型的整体历史财务数据集合的多个子集合，根据每个类型的整体历史财务数据集合的多个子集合得到每个类型的表征能力，根据每个类型的表征能力得到最佳类型；获取当前用户的最佳类型的个体历史财务数据集合中每个历史财务数据所属的工作领域以及当前财务数据所属的工作领域；根据当前用户的最佳类型的个体历史财务数据集合得到当前用户的最佳类型的个体财务数据集合，根据最佳类型的个体历史财务数据集合和个体财务数据集合中每个历史财务数据所属的工作领域得到当前用户对每个工作领域的第一趋近度和第二趋近度，根据当前用户对每个工作领域的第一趋近度、第二趋近度以及当前财务数据所属的工作领域得到当前财务数据的面积差异值，根据当前财务数据的面积差异值得到K值；根据每个类型的表征能力以及每个类型的整体历史财务数据集合中历史财务数据离散情况得到当前财务数据的参考历史财务数据；根据参考历史财务数据以及K值对当前财务数据进行异常判断得到当前财务数据的异常判断结果；根据异常判断结果进行财务结算分析。2.根据权利要求1所述一种财务报表自动统计结算方法，其特征在于，所述根据所有用户的每个类型的整体历史财务数据集合得到每个类型的整体历史财务数据集合的多个子集合，包括的具体方法为：对于任意一个类型的整体历史财务数据集合，计算每个历史财务数据与其他每个历史财务数据的差值绝对值，记为每个历史财务数据与其他每个历史财务数据的第一距离，将第一距离小于预设距离的两个历史财务数据归为一个子集合，得到多个子集合。3.根据权利要求1所述一种财务报表自动统计结算方法，其特征在于，所述根据每个类型的整体历史财务数据集合的多个子集合得到每个类型的表征能力，根据每个类型的表征能力得到最佳类型，包括的具体方法为：获取每个类型的整体历史财务数据集合与其他各类型整体历史财务数据集合的分布差异；获取每个类型的整体历史财务数据集合的变异系数值；根据每个类型的整体历史财务数据集合与其他各类型整体历史财务数据集合的分布差异以及变异系数值得到每个类型的表征能力的计算方法为：其中，/＞表示第/＞个类型的整体历史财务数据集合与第/＞个类型的整体历史财务数据集合的分布差异，/＞表示第/＞个类型的整体历史财务数据集合中包含子集合的数量，/＞表示第/＞个类型的整体历史财务数据集合中最大历史财务数据与最小历史财务数据的差值，/＞表示第/＞个类型的整体历史财务数据集合中最大历史财务数据与最小历史财务数据的差值，/＞表示第/＞个类型的整体历史财务数据集合的变异系数值，/＞表示绝对值符号，/＞表示第/＞个类型的整体历史财务数据集合的表征能力，L表示整体历史财务数据集合的类型个数，exp{}表示以自然常数为底的指数函数；将表征能力最大值对应的类型作为最佳类型。4.根据权利要求3所述一种财务报表自动统计结算方法，其特征在于，所述获取每个类型的整体历史财务数据集合与其他各类型整体历史财务数据集合的分布差异，包括的具体方法为：将任意一个类型的整体历史财务数据集合中任意一个子集合记为目标子集合，将其他各类型的整体历史财务数据集合的各子集合中与目标子集合中历史财务数据取值相同的历史财务数据记为目标子集合的同种历史财务数据，在其他各类型的整体历史财务数据的所有子集合中获取目标子集合的同种历史财务数据分布的子集合个数，记为目标子集合与其他各类型整体历史财务数据集合的分布差异；将每个类型的整体历史财务数据集合中所有子集合与其他各类型整体历史财务数据集合的分布差异的均值作为每个类型的整体历史财务数据集合与其他各类型整体历史财务数据集合的分布差异。5.根据权利要求1所述一种财务报表自动统计结算方法，其特征在于，所述获取当前用户的最佳类型的个体历史财务数据集合中每个历史财务数据所属的工作领域以及当前财务数据所属的工作领域，包括的具体方法为：在最佳类型的整体历史财务数据集合中选取部分历史财务数据记为待标注数据，获取每个待标注数据所属的工作领域，根据每个带标注数据所属的工作领域来标注出每个待标注数据的工作领域标签，将带标签的筛选出的历史财务数据构成数据集，利用数据集对yoloV3网络进行训练得到训练完成的网络，利用训练完成的网络获取当前用户的最佳类型的个体历史财务数据集合中各历史财务数据以及当前用户的当前财务数据所属的工作领域。6.根据权利要求2所述一种财务报表自动统计结算方法，其特征在于，所述根据当前用户的最佳类型的个体历史财务数据集合得到当前用户的最佳类型的个体财务数据集合，根据最佳类型的个体历史财务数据集合和个体财务数据集合中每个历史财务数据所属的工作领域得到当前用户对每个工作领域的第一趋近度和第二趋近度，包括的具体方法为：将当前用户的当前财务数据加入到个体历史财务数据集合中的所属工作领域中得到当前用户的最佳类型的个体财务数据集合；根据当前用户的最佳类型的个体历史财务数据集合得到当前用户对每个工作领域的第一趋近度的方法为：对于当前用户的最佳类型的个体历史财务数据集合，将每个工作领域的所有历史财务数据中每两个历史财务数据构成历史财务数据对，计算历史财务数据对中两个历史财务数据的第一距离，将所有历史财务数据对的第一距离的均值作为当前用户的每个工作领域的第二距离；根据当前用户的每个工作领域的第二距离得到当前用户对每个工作领域的第一趋近度的计算公式为：其中，/＞表示当前用户的最佳类型的个体历史财务数据集合中包含历史财务数据的数量，/＞表示当前用户的最佳类型的个体历史财务数据集合的第u个工作领域中包含历史财务数据的数量，/＞表示当前用户的最佳类型的个体历史财务数据集合中第u个工作领域的第二距离，exp{}表示以自然常数为底的指数函数，/＞表示当前用户对第u个工作领域的第一趋近度；根据当前用户的最佳类型的个体财务数据集合得到当前用户对每个工作领域的第二趋近度。7.根据权利要求1所述一种财务报表自动统计结算方法，其特征在于，所述根据当前用户对每个工作领域的第一趋近度、第二趋近度以及当前财务数据所属的工作领域得到当前财务数据的面积差异值，包括的具体方法为：将每个工作领域作为雷达图的每个坐标轴，将当前用户对每个工作领域的第一趋近度作为雷达图的每个变量，在雷达图上获取当前用户对每种工作领域的第一趋近度的坐标点，雷达图上当前用户对所有工作领域的第一趋近度的坐标点构成当前用户的工作领域趋近度的第一雷达图；根据当前用户对每个工作领域的第二趋近度得到当前用户的工作领域趋近度的第二雷达图；将第一雷达图所覆盖面积与第二雷达图所覆盖面积的差值作为当前财务数据的面积差异值。8.根据权利要求1所述一种财务报表自动统计结算方法，其特征在于，所述根据当前财务数据的面积差异值得到K值，包括的具体方法为：其中，/＞表示预设的超参数，/＞表示LOF算法的K值参数，exp表示以自然常数为底的指数函数，/＞表示向下取整符号，/＞表示当前用户的当前财务数据的面积差异值。9.根据权利要求1所述一种财务报表自动统计结算方法，其特征在于，所述根据每个类型的表征能力以及每个类型的整体历史财务数据集合中历史财务数据离散情况得到当前财务数据的参考历史财务数据；根据参考历史财务数据以及K值对当前财务数据进行异常判断得到当前财务数据的异常判断结果，包括的具体方法为：将所有用户的所有类型的整体历史财务数据集合中表征能力大于预设表征能力阈值的类型的整体历史财务数据集合记为候选集合；将候选集合中的历史财务数据作为当前财务数据的候选历史财务数据；对于当前财务数据的候选历史财务数据，将每个类型的整体历史财务数据集合中每两个候选历史财务数据构成候选历史财务数据对，计算候选历史财务数据对中两个候选历史财务数据的第一距离，将每种类型的所有候选历史财务数据对的第一距离均值作为每个类型的第三距离，将第三距离与表征能力的乘积作为每个类型的筛选程度，将筛选程度小于预设筛选程度阈值的整体历史财务数据集合中的候选历史财务数据作为当前财务数据的参考财务数据；基于LOF算法，利用第K距离邻域内的所有参考财务数据计算当前用户的当前财务数据的局部异常因子；当局部异常因子大于预设异常因子阈值时，将当前用户的当前财务数据判定为异常数据。10.一种财务报表自动统计结算系统，其特征在于，该系统包括以下模块：数据采集模块，用于采集所有用户的每个类型的整体历史财务数据集合、当前用户的每个类型的个体历史财务数据集合以及当前用户的当前财务数据；最佳类型获取模块，用于根据所有用户的每个类型的整体历史财务数据集合得到每个类型的整体历史财务数据集合的多个子集合，根据每个类型的整体历史财务数据集合的多个子集合得到每个类型的表征能力，根据每个类型的表征能力得到最佳类型；K值获取模块，用于获取当前用户的最佳类型的个体历史财务数据集合中每个历史财务数据所属的工作领域以及当前财务数据所属的工作领域；根据当前用户的最佳类型的个体历史财务数据集合得到当前用户的最佳类型的个体财务数据集合，根据最佳类型的个体历史财务数据集合和个体财务数据集合中每个历史财务数据所属的工作领域得到当前用户对每个工作领域的第一趋近度和第二趋近度，根据当前用户对每个工作领域的第一趋近度、第二趋近度以及当前财务数据所属的工作领域得到当前财务数据的面积差异值，根据当前财务数据的面积差异值得到K值；异常结算分析模块，用于根据每个类型的表征能力以及每个类型的整体历史财务数据集合中历史财务数据离散情况得到当前财务数据的参考历史财务数据；根据参考历史财务数据以及K值对当前财务数据进行异常判断得到当前财务数据的异常判断结果；根据异常判断结果进行财务结算分析。
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及一种财务报表自动统计结算方法及系统。背景技术在现代商业环境中，财务报表是企业的重要部分，它们为企业的决策者、投资者和相关的第三方提供关于企业状况的全面信息。然而，传统的财务报表编制过程却存在许多挑战。人工统计结算方法效率低下，且容易出错。财务报表需要处理大量的数据，包括收入、支出、资产和负债等等。这些营业数字需要经过一系列复杂的计算和分析，以生成财务报表。同时对于实时更新的需求越来越高，企业需要实时了解其财务状况以做出及时的决策，然而手动更新财务报表通常需要花费大量时间，从而导致报表无法实时反映出最新的财务情况。在财务报表数据的自动统计结算过程中，由于存在人员的疏忽，使得输入的财务报表数据出现错误，同时会存在用户的瞒报现象发生，所以往往需要进行数据异常检测。发明内容本发明提供一种财务报表自动统计结算方法及系统，以解决现有的问题：如何准确的筛选出财务报表中各用户的异常数据，降低财务分析的误差。本发明的一种财务报表自动统计结算方法及系统采用如下技术方案：本发明一个实施例提供了一种财务报表自动统计结算方法，该方法包括以下步骤：采集所有用户的每个类型的整体历史财务数据集合、当前用户的每个类型的个体历史财务数据集合以及当前用户的当前财务数据；根据所有用户的每个类型的整体历史财务数据集合得到每个类型的整体历史财务数据集合的多个子集合，根据每个类型的整体历史财务数据集合的多个子集合得到每个类型的表征能力，根据每个类型的表征能力得到最佳类型；获取当前用户的最佳类型的个体历史财务数据集合中每个历史财务数据所属的工作领域以及当前财务数据所属的工作领域；根据当前用户的最佳类型的个体历史财务数据集合得到当前用户的最佳类型的个体财务数据集合，根据最佳类型的个体历史财务数据集合和个体财务数据集合中每个历史财务数据所属的工作领域得到当前用户对每个工作领域的第一趋近度和第二趋近度，根据当前用户对每个工作领域的第一趋近度、第二趋近度以及当前财务数据所属的工作领域得到当前财务数据的面积差异值，根据当前财务数据的面积差异值得到K值；根据每个类型的表征能力以及每个类型的整体历史财务数据集合中历史财务数据离散情况得到当前财务数据的参考历史财务数据；根据参考历史财务数据以及K值对当前财务数据进行异常判断得到当前财务数据的异常判断结果；根据异常判断结果进行财务结算分析。优选的，所述根据所有用户的每个类型的整体历史财务数据集合得到每个类型的整体历史财务数据集合的多个子集合，包括的具体方法为：对于任意一个类型的整体历史财务数据集合，计算每个历史财务数据与其他每个历史财务数据的差值绝对值，记为每个历史财务数据与其他每个历史财务数据的第一距离，将第一距离小于预设距离的两个历史财务数据归为一个子集合，得到多个子集合。优选的，所述根据每个类型的整体历史财务数据集合的多个子集合得到每个类型的表征能力，根据每个类型的表征能力得到最佳类型，包括的具体方法为：获取每个类型的整体历史财务数据集合与其他各类型整体历史财务数据集合的分布差异；获取每个类型的整体历史财务数据集合的变异系数值；根据每个类型的整体历史财务数据集合与其他各类型整体历史财务数据集合的分布差异以及变异系数值得到每个类型的表征能力的计算方法为：其中，表示第/＞个类型的整体历史财务数据集合与第/＞个类型的整体历史财务数据集合的分布差异，/＞表示第/＞个类型的整体历史财务数据集合中包含子集合的数量，表示第/＞个类型的整体历史财务数据集合中最大历史财务数据与最小历史财务数据的差值，/＞表示第/＞个类型的整体历史财务数据集合中最大历史财务数据与最小历史财务数据的差值，/＞表示第/＞个类型的整体历史财务数据集合的变异系数值，/＞表示绝对值符号，表示第/＞个类型的整体历史财务数据集合的表征能力，L表示整体历史财务数据集合的类型个数，exp{}表示以自然常数为底的指数函数；将表征能力最大值对应的类型作为最佳类型。优选的，所述获取每个类型的整体历史财务数据集合与其他各类型整体历史财务数据集合的分布差异，包括的具体方法为：将任意一个类型的整体历史财务数据集合中任意一个子集合记为目标子集合，将其他各类型的整体历史财务数据集合的各子集合中与目标子集合中历史财务数据取值相同的历史财务数据记为目标子集合的同种历史财务数据，在其他各类型的整体历史财务数据的所有子集合中获取目标子集合的同种历史财务数据分布的子集合个数，记为目标子集合与其他各类型整体历史财务数据集合的分布差异；将每个类型的整体历史财务数据集合中所有子集合与其他各类型整体历史财务数据集合的分布差异的均值作为每个类型的整体历史财务数据集合与其他各类型整体历史财务数据集合的分布差异。优选的，所述获取当前用户的最佳类型的个体历史财务数据集合中每个历史财务数据所属的工作领域以及当前财务数据所属的工作领域，包括的具体方法为：在最佳类型的整体历史财务数据集合中选取部分历史财务数据记为待标注数据，获取每个待标注数据所属的工作领域，根据每个带标注数据所属的工作领域来标注出每个待标注数据的工作领域标签，将带标签的筛选出的历史财务数据构成数据集，利用数据集对yoloV3网络进行训练得到训练完成的网络，利用训练完成的网络获取当前用户的最佳类型的个体历史财务数据集合中各历史财务数据以及当前用户的当前财务数据所属的工作领域。优选的，所述根据当前用户的最佳类型的个体历史财务数据集合得到当前用户的最佳类型的个体财务数据集合，根据最佳类型的个体历史财务数据集合和个体财务数据集合中每个历史财务数据所属的工作领域得到当前用户对每个工作领域的第一趋近度和第二趋近度，包括的具体方法为：将当前用户的当前财务数据加入到个体历史财务数据集合中的所属工作领域中得到当前用户的最佳类型的个体财务数据集合；根据当前用户的最佳类型的个体历史财务数据集合得到当前用户对每个工作领域的第一趋近度的方法为：对于当前用户的最佳类型的个体历史财务数据集合，将每个工作领域的所有历史财务数据中每两个历史财务数据构成历史财务数据对，计算历史财务数据对中两个历史财务数据的第一距离，将所有历史财务数据对的第一距离的均值作为当前用户的每个工作领域的第二距离；根据当前用户的每个工作领域的第二距离得到当前用户对每个工作领域的第一趋近度的计算公式为：其中，表示当前用户的最佳类型的个体历史财务数据集合中包含历史财务数据的数量，/＞表示当前用户的最佳类型的个体历史财务数据集合的第u个工作领域中包含历史财务数据的数量，/＞表示当前用户的最佳类型的个体历史财务数据集合中第u个工作领域的第二距离，exp{}表示以自然常数为底的指数函数，/＞表示当前用户对第u个工作领域的第一趋近度；根据当前用户的最佳类型的个体财务数据集合得到当前用户对每个工作领域的第二趋近度。优选的，所述根据当前用户对每个工作领域的第一趋近度、第二趋近度以及当前财务数据所属的工作领域得到当前财务数据的面积差异值，包括的具体方法为：将每个工作领域作为雷达图的每个坐标轴，将当前用户对每个工作领域的第一趋近度作为雷达图的每个变量，在雷达图上获取当前用户对每种工作领域的第一趋近度的坐标点，雷达图上当前用户对所有工作领域的第一趋近度的坐标点构成当前用户的工作领域趋近度的第一雷达图；根据当前用户对每个工作领域的第二趋近度得到当前用户的工作领域趋近度的第二雷达图；将第一雷达图所覆盖面积与第二雷达图所覆盖面积的差值作为当前财务数据的面积差异值。优选的，所述根据当前财务数据的面积差异值得到K值，包括的具体方法为：其中，表示预设的超参数，/＞表示LOF算法的K值参数，exp表示以自然常数为底的指数函数，/＞表示向下取整符号，/＞表示当前用户的当前财务数据的面积差异值。优选的，所述根据每个类型的表征能力以及每个类型的整体历史财务数据集合中历史财务数据离散情况得到当前财务数据的参考历史财务数据；根据参考历史财务数据以及K值对当前财务数据进行异常判断得到当前财务数据的异常判断结果，包括的具体方法为：将所有用户的所有类型的整体历史财务数据集合中表征能力大于预设表征能力阈值的类型的整体历史财务数据集合记为候选集合；将候选集合中的历史财务数据作为当前财务数据的候选历史财务数据；对于当前财务数据的候选历史财务数据，将每个类型的整体历史财务数据集合中每两个候选历史财务数据构成候选历史财务数据对，计算候选历史财务数据对中两个候选历史财务数据的第一距离，将每种类型的所有候选历史财务数据对的第一距离均值作为每个类型的第三距离，将第三距离与表征能力的乘积作为每个类型的筛选程度，将筛选程度小于预设筛选程度阈值的整体历史财务数据集合中的候选历史财务数据作为当前财务数据的参考财务数据；基于LOF算法，利用第K距离邻域内的所有参考财务数据计算当前用户的当前财务数据的局部异常因子；当局部异常因子大于预设异常因子阈值时，将当前用户的当前财务数据判定为异常数据。一种财务报表自动统计结算系统，该系统包括以下模块：数据采集模块，用于采集所有用户的每个类型的整体历史财务数据集合、当前用户的每个类型的个体历史财务数据集合以及当前用户的当前财务数据；最佳类型获取模块，用于根据所有用户的每个类型的整体历史财务数据集合得到每个类型的整体历史财务数据集合的多个子集合，根据每个类型的整体历史财务数据集合的多个子集合得到每个类型的表征能力，根据每个类型的表征能力得到最佳类型；K值获取模块，用于获取当前用户的最佳类型的个体历史财务数据集合中每个历史财务数据所属的工作领域以及当前财务数据所属的工作领域；根据当前用户的最佳类型的个体历史财务数据集合得到当前用户的最佳类型的个体财务数据集合，根据最佳类型的个体历史财务数据集合和个体财务数据集合中每个历史财务数据所属的工作领域得到当前用户对每个工作领域的第一趋近度和第二趋近度，根据当前用户对每个工作领域的第一趋近度、第二趋近度以及当前财务数据所属的工作领域得到当前财务数据的面积差异值，根据当前财务数据的面积差异值得到K值；异常结算分析模块，用于根据每个类型的表征能力以及每个类型的整体历史财务数据集合中历史财务数据离散情况得到当前财务数据的参考历史财务数据；根据参考历史财务数据以及K值对当前财务数据进行异常判断得到当前财务数据的异常判断结果；根据异常判断结果进行财务结算分析。本发明的技术方案的有益效果是：采集所有用户的每个类型的整体历史财务数据集合、当前用户的每个类型的个体历史财务数据集合以及当前用户的当前财务数据；根据所有用户的每个类型的整体历史财务数据集合得到每个类型的整体历史财务数据集合的多个子集合，根据每个类型的整体历史财务数据集合的多个子集合得到每个类型的表征能力，根据每个类型的表征能力得到最佳类型；获取当前用户的最佳类型的个体历史财务数据集合中每个历史财务数据所属的工作领域以及当前财务数据所属的工作领域；根据当前用户的最佳类型的个体历史财务数据集合得到当前用户的最佳类型的个体财务数据集合，根据最佳类型的个体历史财务数据集合和个体财务数据集合中每个历史财务数据所属的工作领域得到当前用户对每个工作领域的第一趋近度和第二趋近度，根据当前用户对每个工作领域的第一趋近度、第二趋近度以及当前财务数据所属的工作领域得到当前财务数据的面积差异值，根据当前财务数据的面积差异值得到K值；根据每个类型的表征能力以及每个类型的整体历史财务数据集合中历史财务数据离散情况得到当前财务数据的参考历史财务数据；根据参考历史财务数据以及K值对当前财务数据进行异常判断得到当前财务数据的异常判断结果；根据异常判断结果进行财务结算分析。从而实现利用当前财务数据相较于当前用户的同工作领域历史财务数据的异常情况，来设置对适用于当前财务数据异常分析的K值，从而准确的筛选出异常的财务数据，提高财务结算分析的准确性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明的一种财务报表自动统计结算方法的步骤流程图；图2为本发明的一种财务报表自动统计结算系统的结构框图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种财务报表自动统计结算方法及系统，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种财务报表自动统计结算方法及系统的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种财务报表自动统计结算方法的步骤流程图，该方法包括以下步骤：步骤S001：获取所有用户的每种类型的整体历史财务数据集合、当前用户的每种类型的个体历史财务数据集合以及当前用户的当前财务数据。需要说明的是，由于人员的疏忽，使得在财务报表中输入错误的财务数据，同时用户的瞒报也会导致财务报表中存在错误，所以往往需要对财务报表数据进行异常检测。具体的，为了实现本实施例提出的一种财务报表自动统计结算方法，本实施例首先需要采集所有用户的每种类型的整体历史财务数据集合、当前用户的每种类型的个体历史财务数据集合以及当前用户的当前财务数据。采集所有用户的每种类型的整体历史财务数据集合、当前用户的每种类型的个体历史财务数据集合以及当前用户的当前财务数据的具体操作为：在财务报表中获取每个用户的每种类型的多个历史财务数据，例如将用户出差时每天的房屋住宿费用作为一种类型的一个历史财务数据，用户出差时多天的房屋住宿费用作为一种类型的多个历史财务数据，将用户出差时的每天的交通费用作为一种类型的一个财务数据，用户出差时多天的交通费用作为一种类型的多个历史财务数据。将所有用户的每种类型的历史财务数据构成所有用户的每种类型的整体历史财务数据集合。将需要进行异常检测的财务数据记为当前用户的当前财务数据。获取当前用户的每种类型的多个历史财务数据，将当前用户的每种类型的所有历史财务数据构成当前用户的个体历史财务数据集合。至此，通过上述方法得到所有用户的每种类型的整体历史财务数据集合、当前用户的每种类型的个体历史财务数据集合以及当前用户的当前财务数据。步骤S002：根据每种类型的整体历史财务数据集合得到每种类型的整体历史财务数据的多个子集合，根据每种类型的整体历史财务数据的多个子集合得到每种类型的表征能力，根据每种类型的表征能力得到最佳类型。需要说明的是，传统财务数据异常检测一般是利用LOF异常检测方法在同类型的财务数据中进行异常检测，但是在当前用户的历史数据中存在较少的与当前财务数据同类型的历史财务数据时，就会导致对当前财务数据的异常检测不够准确。因而需结合其他用户的历史财务数据来对当前用户的当前财务数据进行异常检测。而LOF异常检测算法中的K值参数的设置会影响异常检测的准确性，当K值参数设置的不合理时，会导致当前财务数据的异常误判。需要进一步说明的是，为了能够使LOF异常检测算法设置K值能够适用于当前财务数据的异常检测，需根据当前财务数据在当前用户的同工作领域的历史财务数据中的分布情况来确定K值。为了方便当前用户的所有历史财务数据进行工作领域划分，需在所有类型财务数据中获取表征能力最强的财务数据。具体的，对于任意一个类型的整体历史财务数据集合，计算每个历史财务数据与其他每个历史财务数据的差值绝对值，记为每个历史财务数据与其他每个历史财务数据的第一距离，利用最大值最小值归一化方法对每个第一距离进行归一化处理得到归一化后第一距离，将归一化后的第一距离小于预设距离D的两个历史财务数据归为一个子集合，得到多个子集合。本实施例以D取0.35为例进行叙述，其他实施例可以取其他值，本实施例不进行具体限制。进一步的，将任意一个类型的整体历史财务数据集合中任意一个子集合记为目标子集合，将其他各类型的整体历史财务数据集合的各子集合中与目标子集合中历史财务数据取值相同的历史财务数据记为目标子集合的同种历史财务数据，在其他各类型的整体历史财务数据的所有子集合中获取目标子集合的同种历史财务数据分布的子集合个数，记为目标子集合与其他各类型整体历史财务数据集合的分布差异。该值越大说明在该类型的整体历史财务数据集合中分布较为集中的数据，而在其他类型的整体历史财务数据集合中分布较为离散。同理得到每个类型的整体历史财务数据集合中每个子集合与其他类型整体历史财务数据集合的分布差异。例如，在第个类型的整体历史财务数据集合中第s个子集合中包含数据5、6、7、8，但是在第/＞个类型的整体历史财务数据集合中数据5、6、7、8分别属于两个子集合，则第/＞个类型的整体历史财务数据集合中第s个子集合与第/＞个类型的整体历史财务数据集合的分布差异为2。将每个类型的整体历史财务数据集合中所有子集合与其他各类型整体历史财务数据集合的分布差异的均值作为每个类型的整体历史财务数据集合与其他各类型整体历史财务数据集合的分布差异。根据现有变异系数值获取方法，获取每个类型的整体历史财务数据集合中所有历史财务数据的变异系数值，该值越大说明该个类型的整体历史财务数据集合中所有历史财务数据分布越离散。根据每个类型的整体历史财务数据集合与其他各类型整体历史财务数据集合的分布差异以及每个类型的整体历史财务数据集合的变异系数值得到每个类型的表征能力的计算方法为：其中，表示第/＞个类型的整体历史财务数据集合与第/＞个类型的整体历史财务数据集合的分布差异，/＞表示第/＞个类型的整体历史财务数据集合中包含子集合的数量，表示第/＞个类型的整体历史财务数据集合中最大历史财务数据与最小历史财务数据的差值，/＞表示第/＞个类型的整体历史财务数据集合中最大历史财务数据与最小历史财务数据的差值。/＞反映了第/＞个类型的整体历史财务数据集合与第/＞个类型的整体历史财务数据集合的数据跨度相似度情况。L表示整体历史财务数据集合的类型个数。其中/＞表示第/＞个类型的整体历史财务数据集合的变异系数值。该值越小说明第j个类型的整体历史财务数据集合中数据较为规整，因而第j个类型的整体历史财务数据集合的表征能力越强。表示绝对值符号。/＞表示第/＞个类型的整体历史财务数据集合的表征能力，exp{}表示以自然常数为底的指数函数。其中反映了第/＞个类型的整体历史财务数据集合的离散情况，通过该值作为权重来对第j个类型的整体历史财务数据集合的分布情况进行调整，即本类型的整体历史财务数据集合中的数据能够较好的描述分布较为离散的其他类型的整体历史财务数据集合的数据，进而本类型的整体历史财务数据集合中的数据能够较好的描述其他类型的整体历史财务数据集合中不规整的数据，因而其他类型的整体历史财务数据集合的离散程度越大，则越需要放大对本类型的整体历史财务数据集合的表征能力的影响。至此，得到每个类型的表征能力。将表征能力最大值对应的类型作为最佳类型。步骤S003：根据最佳类型得到当前用户对每种工作领域的第一趋向性和第二趋向性，根据当前用户对每种工作领域的第一趋向性和第二趋向性得到当前财务数据的面积差异值，根据当前财务数据的面积差异值得到K值。需要说明的是，通过上述过程得到了表征能力最强的最佳类型，下面需基于当前用户的最佳类型的个体历史财务数据集合来进行工作领域划分。然后根据当前数据与所属工作领域的历史财务数据差异情况来设置适应与当前数据异常检测的K值。具体的，在最佳类型的整体历史财务数据集合中选取部分历史财务数据记为待标注数据，通过人工判断每个待标注数据所属的工作领域，并根据每个待标注数据所属的工作领域标注出每个待标注数据的工作领域标签，将带标签的筛选出的历史财务数据构成数据集，利用数据集对yoloV3网络进行训练得到训练完成的网络，利用训练完成的网络获取当前用户的最佳类型的个体历史财务数据集合中各历史财务数据以及当前用户的当前财务数据所属的工作领域。进一步的，对于当前用户的最佳类型的个体历史财务数据集合，将每个工作领域的所有历史财务数据中每两个历史财务数据构成历史财务数据对，计算历史财务数据对中两个历史财务数据的第一距离，将所有历史财务数据对的第一距离的均值作为当前用户的最佳类型的个体历史财务数据集合中每个工作领域的第二距离。根据每个工作领域的第二距离得到当前用户对每个工作领域的第一趋近度的方法为：其中，表示当前用户的最佳类型的个体历史财务数据集合中包含历史财务数据的数量，/＞表示当前用户的最佳类型的个体历史财务数据集合的第u个工作领域中包含历史财务数据的数量，该值越大说明当前用户包含第u个工作领域的历史财务数据较多，因而当前用户从事第u个工作领域的工作较多。/＞表示当前用户的最佳类型的个体历史财务数据集合中第u个工作领域的第二距离，该值越大说明第u个工作领域的历史财务数据越离散，进而第u个工作领域的历史财务数据分布越不规律，因而当前用户只是偶尔处理第u个工作领域的工作，还未形成规律的历史财务数据，exp{}表示以自然常数为底的指数函数，表示当前用户对第u个工作领域的第一趋近度。将当前用户的当前财务数据加入到个体历史财务数据集合中的所属工作领域中得到当前用户的最佳类型的个体财务数据集合，根据计算当前用户对每种工作领域的历史趋近度的方法，利用当前用户的最佳类型的个体财务数据集合计算当前用户对每种工作领域的第二趋近度。进一步的，将每个工作领域作为雷达图的每个坐标轴，将当前用户对每个工作领域的第一趋近度作为雷达图的每个变量，在雷达图上获取当前用户对每种工作领域的第一趋近度的坐标点，雷达图上当前用户对所有工作领域的第一趋近度的坐标点构成当前用户的工作领域趋近度的第一雷达图。同理根据当前用户对每个工作领域的第二趋近度得到当前用户的工作领域趋近度的第二雷达图。将第一雷达图所覆盖面积与第二雷达图所覆盖面积的差值作为当前用户的当前财务数据的面积差异值。进一步的，根据当前用户的当前财务数据的工作趋近度影响程度得到K值的计算方法为：其中，表示预设的超参数，本实施例以/＞取6为例进行叙述，其他实施例可以取其他值，本实施例不进行具体限制，/＞表示LOF算法的K值参数，exp表示以自然常数为底的指数函数，/＞表示向下取整符号，/＞表示当前用户的当前财务数据的面积差异值。当/＞小于等于0时说明当前财务数据加入后，当前用户对所属工作领域更趋近，因而当前财务数据越正常。至此，通过上述步骤得到了K值。步骤S004：根据所有用户的整体历史财务数据集合得到当前财务数据的参考财务数据，根据当前财务数据的参考财务数据和K值对当前财务数据进行异常、结算分析。需要说明的是，由于所有用户的历史财务数据的数据量较大，并且有些历史财务数据的表征能力较差，如果利用所有的历史财务数据对当前财务数据进行异常分析会导致分析效率较低，因而需在所有用户的历史财务数据中筛选部分财务数据付诸于当前财务数据的异常分析。具体的，将所有用户的所有类型的整体历史财务数据集合中表征能力大于预设表征能力阈值Y2的类型的整体历史财务数据集合记为候选集合；将候选集合中的历史财务数据作为当前财务数据的候选历史财务数据。本实施例以Y2取0.65为例进行叙述，其他实施例可以取其他值，本实施例不进行具体限制。对于当前财务数据的候选历史财务数据，将每个类型的整体历史财务数据集合中每两个候选历史财务数据构成候选历史财务数据对，计算候选历史财务数据对中两个候选历史财务数据的第一距离，将每种类型的所有候选历史财务数据对的第一距离均值作为每个类型的第三距离，将第三距离与表征能力的乘积作为每个类型的筛选程度，将筛选程度小于预设筛选程度阈值Y3的类型的整体历史财务数据集合中的候选历史财务数据作为当前财务数据的参考财务数据。本实施例以Y3取0.58为例进行叙述，其他实施例可以取其他值，本实施例不进行具体限制。进一步的，基于LOF算法，利用第K距离邻域内的所有参考财务数据计算当前用户的当前财务数据的局部异常因子。当局部异常因子大于预设异常因子阈值Y4时，将当前用户的当前财务数据判定为异常数据。通过该方式得到所有的异常数据，将财务报表中的所有异常数据去除得到无误的财务报表。基于无误的财务报表进行结算分析。本实施例以Y4取1为例进行叙述，其他实施例可以取其他值，本实施例不进行具体限制。请参阅图2，其示出了本发明一个实施例提供的一种财务报表自动统计结算系统的结构框图，该系统包括以下模块：数据采集模块，用于采集所有用户的每个类型的整体历史财务数据集合、当前用户的每个类型的个体历史财务数据集合以及当前用户的当前财务数据；最佳类型获取模块，用于根据所有用户的每个类型的整体历史财务数据集合得到每个类型的整体历史财务数据集合的多个子集合，根据每个类型的整体历史财务数据集合的多个子集合得到每个类型的表征能力，根据每个类型的表征能力得到最佳类型；K值获取模块，用于获取当前用户的最佳类型的个体历史财务数据集合中每个历史财务数据所属的工作领域以及当前财务数据所属的工作领域；根据当前用户的最佳类型的个体历史财务数据集合得到当前用户的最佳类型的个体财务数据集合，根据最佳类型的个体历史财务数据集合和个体财务数据集合中每个历史财务数据所属的工作领域得到当前用户对每个工作领域的第一趋近度和第二趋近度，根据当前用户对每个工作领域的第一趋近度、第二趋近度以及当前财务数据所属的工作领域得到当前财务数据的面积差异值，根据当前财务数据的面积差异值得到K值；异常结算分析模块，用于根据每个类型的表征能力以及每个类型的整体历史财务数据集合中历史财务数据离散情况得到当前财务数据的参考历史财务数据；根据参考历史财务数据以及K值对当前财务数据进行异常判断得到当前财务数据的异常判断结果；根据异常判断结果进行财务结算分析。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
