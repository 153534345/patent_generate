标题title
一种无人船水质监测数据传输方法及系统
摘要abst
本发明涉及数据传输领域，具体涉及一种无人船水质监测数据传输方法及系统，包括：获取各个采样点的所有参考采样点，根据各个参考采样点的趋势性得到各个参考采样点的距离影响权重，并根据各个采样点与其对应的各个参考采样点之间各种水质指标的差值以及水体浑浊度的差值，得到各个采样点不同水质指标的异常程度，最后根据各个采样点的各种水质指标的异常程度进行霍夫曼数据编码，得到各种水质指标的编码数据；再将各种水质指标的编码数据分别进行传输。本发明通过降低异常程度大的水质指标数据的编码长度，来降低网络波动造成的异常数据丢失的概率，从而保证水质异常数据在传输过程中的可靠性。
权利要求书clms
1.一种无人船水质监测数据传输方法，其特征在于，该方法包括以下步骤：S1、获取多个采样点的坐标，使用相机采集各个采样点的水体图像，使用多个水质监测仪分别获取各个采样点的各种水质指标；S2、根据各采样点与其他所有采样点之间的欧氏距离得到各个采样点的各个初始参考采样点；根据各个采样点与所述各个采样点的各个初始参考采样点的坐标得到所述各个采样点与所述各个初始参考采样点之间的趋势性；根据所述趋势性得到所述各个采样点的各个参考采样点；根据各个参考采样点之间的欧氏距离以及趋势性得到所述各个参考采样点的距离影响权重；S3、根据各个采样点的水体图像的灰度直方图计算所述各个采样点的水体浑浊度；将各个采样点与各个参考采样点水体浑浊度之间的差值记为所述各个参考采样点的第一差值，将各个采样点与各个参考采样点的各种水质指标之间的差值记为所述各个参考采样点的第二差值；根据各个采样点的各个参考采样点的距离影响权重、所述各个参考采样点的第一差值以及所述各个参考采样点的第二差值，得到所述各个采样点的各种水质指标的异常程度；S4、根据各个采样点的各种水质指标的异常程度对所述各种水质指标进行自适应霍夫曼编码，得到所述各种水质指标的编码数据；对各种水质指标的编码数据分别进行传输。2.根据权利要求1所述的一种无人船水质监测数据传输方法，其特征在于，所述各个采样点的各个初始参考采样点的获取方法为：对各个采样点与其他所有采样点之间的欧氏距离从小到大进行排序，将所得排序结果中，欧氏距离最小的预设个数的采样点作为所述各个采样点的各个初始参考采样点。3.根据权利要求1所述的一种无人船水质监测数据传输方法，其特征在于，所述各个采样点与所述各个初始参考采样点之间的趋势性的计算方法为：式中，为第i个采样点与该采样点的第k个初始参考采样点之间的趋势性，与分别为第个采样点的纵坐标与横坐标；与分别为第个采样点的第个初始参考采样点的纵坐标与横坐标；为反正切函数。4.根据权利要求1所述的一种无人船水质监测数据传输方法，其特征在于，所述各个采样点的各个参考采样点的获取方法为：根据经验阈值设置趋势性差值阈值，将各个采样点与上一个采样点之间的趋势性作为参考趋势性，将各个采样点与各个初始参考采样点之间的趋势性与参考趋势性进行作差，获取所得差值的绝对值，当所述绝对值大于趋势性差值阈值时，所述初始参考采样点不为参考采样点，否则所述初始参考采样点为参考采样点，得到各个采样点的各个参考采样点，所述上一个采样点是指无人船行驶到所述各个采样点位置之前所处的采样点。5.根据权利要求1所述的一种无人船水质监测数据传输方法，其特征在于，所述各个参考采样点的距离影响权重的获取方法为：计算各个采样点的所有参考采样点的趋势性的均值，得到趋势性均值，计算各个参考采样点趋势性与所述趋势性均值之间的差值，将各个参考采样点与所述各个采样点之间的欧氏距离和所述差值进行相加，根据相加结果得到各个参考采样点与所述各个采样点之间的距离影响权重。6.根据权利要求1所述的一种无人船水质监测数据传输方法，其特征在于，所述根据各个采样点的水体图像的灰度直方图计算所述各个采样点的水体浑浊度的表达式为：式中，为第i个采样点的水体浑浊度；为第i个采样点水体图像的灰度直方图中灰度级的个数；为第i个采样点水体图像中所有像素点的灰度均值；为第i个采样点水体图像的灰度直方图中的第j个灰度级；为第i个采样点水体图像的灰度直方图中的第j个灰度级出现的概率；为以2为底的对数函数。7.根据权利要求1所述的一种无人船水质监测数据传输方法，其特征在于，所述各个采样点的各种水质指标的异常程度的获取方法为：将各个采样点的各个参考采样点的第一差值的绝对值，作为所述各个参考采样点的第一绝对值；将各个采样点的各个参考采样点的第二差值的绝对值，作为所述各个参考采样点的第二绝对值；将各个参考采样点的第一绝对值的倒数，距离影响权重以及第二绝对值的乘积进行累加求和，所得加和结果作为所述各个采样点的各种水质指标的异常程度。8.根据权利要求1所述的一种无人船水质监测数据传输方法，其特征在于，所述各种水质指标的编码数据的获取方法为：对各个采样点的各种水质指标的异常程度分别进行归一化处理；对于一种水质指标，以各个采样点为各个节点，以各个采样点归一化后的异常程度为所述各个节点的权值，根据各个节点的权值使用霍夫曼算法构建所述水质指标的霍夫曼树，得到所述一种水质指标的编码数据；同理，根据各个采样点对应的各种水质指标的归一化后的异常程度得到所有采样点的所述各种水质指标的编码数据。9.一种无人船水质监测数据传输系统，其特征在于，该系统包括以下模块：无人船控制模块，用以控制无人船从一个采样点行驶到下一个采样点；数据采集模块，用以通过相机采集各个采样点的水体图像，通过多个水质监测仪获取各个采样点的各种水质指标，并将采集到的数据发送到数据处理模块；数据处理模块，用以接收数据采集模块采集的数据，根据各个采样点的水体图像的灰度直方图计算所述各个采样点的水体浑浊度；将各个采样点与各个参考采样点水体浑浊度之间的差值记为所述各个参考采样点的第一差值，将各个采样点与各个参考采样点的各种水质指标之间的差值记为所述各个参考采样点的第二差值；根据各个采样点的各个参考采样点的距离影响权重、所述各个参考采样点的第一差值以及所述各个参考采样点的第二差值，得到所述各个采样点的各种水质指标的异常程度，根据各个采样点的各种水质指标的异常程度对所述各种水质指标进行编码，得到各种水质指标的编码数据；数据传输模块，用于对数据处理模块处理后的各种水质指标编码数据分别进行传输。
说明书desc
技术领域本发明涉及数据传输领域，具体涉及一种无人船水质监测数据传输方法及系统。背景技术无人船技术是一种新型的水质监测手段。通过无人驾驶的无人船完全独立自主地执行水质监测的任务，获取实时的监测水质参数。无人船在监测城市河道中的水质参数时，通过无人船下伸出的水质检测仪的探头进行水质参数的监测。然而无人船的水质监测数据在传输过程中，由于无人船是运动的，因而无法设定稳定的传输位置，且容易受到网络带宽的影响，使得无人船获取的水质监测数据并不能稳定的传输。此外，由于传输时会对水质监测数据进行编码，现有的编码方法，如霍夫曼编码，是根据数据或符号出现的概率来决定数据的编码长度的，即出现的频率越高，对应数据的编码长度越短，出现的频率越低，对应数据的编码长度越长。然而，在实际检测过程中，大多数的采样点水质指标是正常的，少数采样点的水质指标存在异常，人们往往更加关注存在异常的数据，传统的编码方法可能会使正常的水质指标数据编码长度较短，而异常的水质指标数据编码长度较长，但是相对于编码长度较短的数据，编码长度较长的数据在传输过程中，更容易受到网络波动而造成数据的丢失，考虑到水质监测任务中需要精确地确定水质异常区域，因此本发明需要提出一种数据传输方法，来保证异常数据在传输过程中的可靠性，避免异常数据的丢失。发明内容本发明提供一种无人船水质监测数据传输方法，以解决现有技术存在的异常数据容易丢失的问题。本发明的一种无人船水质监测数据传输方法采用如下技术方案：本发明一个实施例提供一种无人船水质监测数据传输方法，该方法包括以下步骤：S1、获取多个采样点的坐标，使用相机采集各个采样点的水体图像，使用多个水质监测仪分别获取各个采样点的各种水质指标；S2、根据各采样点与其他所有采样点之间的欧氏距离得到各个采样点的各个初始参考采样点；根据各个采样点与所述各个采样点的各个初始参考采样点的坐标得到所述各个采样点与所述各个初始参考采样点之间的趋势性；根据所述趋势性得到所述各个采样点的各个参考采样点；根据各个参考采样点之间的欧氏距离以及趋势性得到所述各个参考采样点的距离影响权重；S3、根据各个采样点的水体图像的灰度直方图计算所述各个采样点的水体浑浊度；将各个采样点与各个参考采样点水体浑浊度之间的差值记为所述各个参考采样点的第一差值，将各个采样点与各个参考采样点的各种水质指标之间的差值记为所述各个参考采样点的第二差值；根据各个采样点的各个参考采样点的距离影响权重、所述各个参考采样点的第一差值以及所述各个参考采样点的第二差值，得到所述各个采样点的各种水质指标的异常程度；S4、根据各个采样点的各种水质指标的异常程度对所述各种水质指标进行自适应霍夫曼编码，得到所述各种水质指标的编码数据；对各种水质指标的编码数据分别进行传输。优选的，所述各个采样点的各个初始参考采样点的获取方法为：对各个采样点与其他所有采样点之间的欧氏距离从小到大进行排序，将所得排序结果中，欧氏距离最小的预设个数的采样点作为所述各个采样点的各个初始参考采样点。优选的，所述各个采样点与所述各个初始参考采样点之间的趋势性的计算方法为：式中，为第i个采样点与该采样点的第k个初始参考采样点之间的趋势性，与分别为第个采样点的纵坐标与横坐标；与分别为第个采样点的第个初始参考采样点的纵坐标与横坐标；为反正切函数。优选的，所述各个采样点的各个参考采样点的获取方法为：根据经验阈值设置趋势性差值阈值，将各个采样点与上一个采样点之间的趋势性作为参考趋势性，将各个采样点的各个初始参考采样点之间的趋势性与参考趋势性进行作差，获取所得差值的绝对值，当所述绝对值大于趋势性差值阈值时，所述初始参考采样点不为参考采样点，否则所述初始参考采样点为参考采样点，得到各个采样点的各个参考采样点，所述上一个采样点是指无人船行驶到所述各个采样点位置之前所处的采样点。优选的，所述各个参考采样点的距离影响权重的获取方法为：计算各个采样点的所有参考采样点的趋势性的均值，得到趋势性均值，计算各个参考采样点趋势性与所述趋势性均值之间的差值，将各个参考采样点与所述各个采样点之间的欧氏距离和所述差值进行相加，根据相加结果得到各个参考采样点与所述各个采样点之间的距离影响权重。优选的，所述根据各个采样点的水体图像的灰度直方图计算所述各个采样点的水体浑浊度的表达式为：式中，为第i个采样点的水体浑浊度；为第i个采样点水体图像的灰度直方图中灰度级的个数；为第i个采样点水体图像中所有像素点的灰度均值；为第i个采样点水体图像的灰度直方图中的第j个灰度级；为第i个采样点水体图像的灰度直方图中的第j个灰度级出现的概率；为以2为底的对数函数。优选的，所述各个采样点的各种水质指标的异常程度的获取方法为：将各个采样点的各个参考采样点的第一差值的绝对值，作为所述各个参考采样点的第一绝对值；将各个采样点的各个参考采样点的第二差值的绝对值，作为所述各个参考采样点的第二绝对值；将各个参考采样点的第一绝对值的倒数，距离影响权重以及第二绝对值的乘积进行累加求和，所得加和结果作为所述各个采样点的各种水质指标的异常程度。优选的，所述各种水质指标的编码数据的获取方法为：对各个采样点的各种水质指标的异常程度分别进行归一化处理；对于一种水质指标，以各个采样点为各个节点，以各个采样点归一化后的异常程度为所述各个节点的权值，根据各个节点的权值使用霍夫曼算法构建所述水质指标的霍夫曼树，得到所述一种水质指标的编码数据；同理，根据各个采样点对应的各种水质指标的归一化后的异常程度得到所有采样点的所述各种水质指标的编码数据。本发明的另一个目的是提供一种无人船水质监测数据传输系统，该系统包括：无人船控制模块，用以控制无人船从一个采样点行驶到下一个采样点；数据采集模块，用以通过相机采集各个采样点的水体图像，通过多个水质监测仪获取各个采样点的各种水质指标，并将采集到的数据发送到数据处理模块；数据处理模块，用以接收数据采集模块采集的数据，根据各个采样点的水体图像的灰度直方图计算所述各个采样点的水体浑浊度；将各个采样点与各个参考采样点水体浑浊度之间的差值记为所述各个参考采样点的第一差值，将各个采样点与各个参考采样点的各种水质指标之间的差值记为所述各个参考采样点的第二差值；根据各个采样点的各个参考采样点的距离影响权重、所述各个参考采样点的第一差值以及所述各个参考采样点的第二差值，得到所述各个采样点的各种水质指标的异常程度，根据各个采样点的各种水质指标的异常程度对所述各种水质指标进行编码，得到各种水质指标的编码数据；数据传输模块，用于对数据处理模块处理后的各种水质指标编码数据分别进行传输。本发明的有益效果是：通过计算在一定范围内的采样点的趋势性来判断周围采样点对当前采样点的距离影响权重的影响，并且通过采集的水体图像的灰度分布来表征水体图像的浑浊度。通过综合考虑每个采样点与附近的参考采样点之间的距离影响权重、水体浑浊度之间的差值以及水质指标之间的差值来表征各个采样点不同水质指标的异常程度值；通过将图像特征和传感器两个模态的数据相融合，获得水质的完备数据，同时根据不同采样点之间的位置关系以及一定范围内的水质指标的数据值的相似与否对两个模态的数据进行对比与融合，更好的获取不同采样点之间的水质差异，进而较为准确得到水质异常程度；最后根据各个采样点的各种水质指标的异常程度进行霍夫曼数据编码，使异常程度较大的水质指标数据获得较短的编码长度，异常程度较小的水质指标数据获得较长的编码长度，通过降低异常程度大的水质指标数据的编码长度，来降低网络波动造成的异常数据丢失的概率，从而保证异常数据在传输过程中的可靠性，确保可以对水质异常区域的精确确定。附图说明图1为本发明的一种无人船水质监测数据传输方法的步骤流程图；图2为本发明另一个实施例的一种无人船水质监测数据传输系统的结构框图。具体实施方式下面结合附图具体的说明本发明所提供的一种无人船水质监测数据传输方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种无人船水质监测数据传输方法的步骤流程图，该方法包括以下步骤：步骤S1：获取多个采样点的坐标，使用相机采集各个采样点的水体图像，使用多个水质监测仪分别获取各个采样点的各种水质指标。在进行无人船水质监测过程中，首先人为确定无人船行驶路径中的多个采样点坐标。然后，每当无人船行驶到一个采样点之后，使用水质检测仪获取该采样点出的水质监测数据，如BOD、COD、氨氮、总磷、总氮、浊度、PH、溶解氧等各种水质指标，而后使用无人船底安装的光源进行补光，再使用无人船上安装的高分辨率相机进行无人船航行图像的采集。由于采集的航行图像中，并不完全为水体区域，因此本发明通过语义分割网络进行水体区域提取。本发明中使用的语义分割网络为DNN网络，训练该语义分割网络所使用的数据集为先验的在进行水质监测时采集的历史图像；需要分割的像素共分为两类，即在语义分割网络的训练过程中对应标签的标注过程为：采用人工标注的方式将图像中水体区域像素点标注为1，将非水体部分的像素点标注为0；网络训练过程中使用的损失函数为交叉熵函数。将无人船采集到的航行图像输入到训练好语义分割网络中，得到各个采样点的水体图像。步骤S2：根据各采样点与其他所有采样点之间的欧氏距离得到各个采样点的各个初始参考采样点；根据各个采样点与所述各个采样点的各个初始参考采样点的坐标得到所述各个采样点与所述各个初始参考采样点之间的趋势性；根据所述趋势性得到所述各个采样点的各个参考采样点；根据各个参考采样点之间的欧氏距离以及趋势性得到所述各个参考采样点的距离影响权重。由于在水质监测过程中，河道中的水会呈现一定的范围相似性，即一定范围内的水质指标的数据值基本相似；并且水质的好坏在一定程度上与水体的浑浊度有关，即一个采样点的水质监测数据的异常程度与该采样点相对于其他采样点的位置分布特征以及该采样点的水体图像的浑浊度特征有关。计算每个采样点与其他采样点之间的欧氏距离，将得到的所有欧氏距离从小到大进行排序，设置预设个数N，该值由实施者根据具体实施情况自行设定，本发明中设置的预设个数N=5，将排序后的所有欧氏距离中前N个欧氏距离所对应的采样点为初始参考采样点。由于城市中的河道路径存在转弯拐角区域等，为了减少河道路径对距离影响权重的影响，通过分析所有采样点坐标的得到各个初始参考采样点的趋势性，进而得到初始采样点的趋势性偏差值，在计算距离影响权重时同时考虑趋势性影响。记第个采样点的坐标为，距离其最近的第个初始参考采样点的坐标记为，其中，则其中第个采样点和其最近的第个初始参考采样点之间的趋势性的计算表达式为：式中，为第i个采样点与该采样点的第k个初始参考采样点之间的趋势性，与分别为第个采样点的纵坐标与横坐标；与分别为第个采样点的第个初始参考采样点的纵坐标与横坐标；为反正切函数。表示第i个采样点和其第个初始参考采样点的连线与水平向右的正方向之间的角度，即第i个采样点和其第个初始参考采样点的连线角度；该连线角度与180的比值表示第i个采样点和其第个初始参考采样点的连线角度在180°范围内的占比。由此得到第个采样点与该第i个采样点的所有初始参考采样点之间的趋势性。设置趋势性差值阈值，将当前采样点与上一个采样点之间的趋势性作为参考趋势性，即以第i-1个采样点与第i个采样点之间的趋势性作为参考趋势性，计算各个采样点的各个初始参考采样点的趋势性与参考趋势性之间的差值，获取所得差值的绝对值，例如，对于第i个采样点的第k个初始参考采样点，计算与参考趋势性之间的差值，并获取所得差值的绝对值，当所得差值的绝对值大于设置的趋势性差值阈值，则表明第个初始参考采样点为城市中河道路径的转弯拐角区域的采样点，为了减少不同流向的河道路径对距离影响权重的影响，该初始参考采样点的趋势性不参与距离影响权重的计算，否则将该初始参考采样点记为一个参考采样点。由此获取各个采样点的所有参考采样点。则第个采样点受其最近的第个参考采样点的距离影响权重的计算表达式为：式中，表示第个采样点的第个参考采样点的趋势性与所有参考采样点的趋势性均值之间的差值的绝对值；表示第i个采样点与该采样点的第个参考采样点之间的欧氏距离；为以自然常数为底数的指数函数。其中，在当前采样点的其周围参考采样点中，通过计算各个参考采样点与当前采样点的趋势性以及欧氏距离，来表征各个参考采样点与当前采样点的距离影响权重，当参考采样点的趋势性与平均趋势性的差异越大，欧氏距离越大，则表明该参考采样点对当前第i个采样点的影响越小，即对应该参考采样点的距离影响权重越小。至此，获得了各采样点与其各个参考采样点之间的距离影响权重。步骤S3：根据各个采样点的水体图像的灰度直方图计算所述各个采样点的水体浑浊度；将各个采样点与各个参考采样点水体浑浊度之间的差值记为所述各个参考采样点的第一差值，将各个采样点与各个参考采样点的各种水质指标之间的差值记为所述各个参考采样点的第二差值；根据各个采样点的各个参考采样点的距离影响权重、所述各个参考采样点的第一差值以及所述各个参考采样点的第二差值，得到所述各个采样点的各种水质指标的异常程度。由于浑浊的水体中存在较多的漂浮物，并且浑浊的水体中经过光照后呈现较暗特性，因此图像的水体浑浊度体现在像素点灰度值的分布的不均匀性，即由于水体中存在的漂浮物众多，这些漂浮物在水体中表现为不同的灰度级分布，且灰度值均值较低的特性。其中获取第个采样点水体图像灰度直方图，根据灰度直方图中各个灰度级以及各个灰度级出现的概率计算该采样点水体图像的水体浑浊度，则：式中，为第i个采样点的水体浑浊度；为第i个采样点水体图像的灰度直方图中灰度级的个数；为第i个采样点水体图像中所有像素点的灰度均值；为第i个采样点水体图像的灰度直方图中的第j个灰度级；为第i个采样点水体图像的灰度直方图中的第j个灰度级出现的概率；为以2为底的对数函数。表示第个采样点的水体图像的灰度信息熵，来表征图像中灰度级的复杂程度，该值越大，表示水体图像中不同灰度级的种类越大，即该采样点的水体中存在的漂浮物种类较多，此时该采样点的水体浑浊度越高，通过灰度信息熵来表现水体图像中不同的灰度级分布，灰度均值来表征水体图像整体的灰度特征。用以表示水体图像灰度均值的大小，由于不能排除水体图像中漂浮物在水体图像中分布较为均匀的情况，此时得到的灰度信息熵较小，进而得出水体浑浊度较低的错误结论，因此，本发明需要进一步根据灰度均值的大小对所得结果进行调整，由于整个灰度的灰度范围为，因此如果水体图像的平均灰度值相对于255的比值越小，对应的越大，即本发明中灰度信息熵越大，灰度均值越小，表征水体浑浊度越高。由于每个采样点的水体容易受到其周围的采样点的影响，当两个采样点之间的距离影响权重值越大，对应的图像浑浊度越相似，正常情况下，距离较近，且水体灰度特征较为相似的两个采样点的各种水质指标的数据值也是较为相似的，但是如果此时采样点之间的水质指标的数据值之间的差距较大，则对应的采样点的必然存在异常，即该采样点的异常程度值就较大，因此，第个采样点的异常程度的计算表达式为：其中，为第i个采样点的参考采样点的总个数；为第i个采样点的第个参考采样点的水体浑浊度；为第i个采样点的水质指标f所对应的参数值，为第i个采样点的第个参考采样点同种指标的水质指标，即水质指标f的参数值。由于正常情况下，距离较近且水体浑浊度相似的采样点所对应的同种水质指标的数据值是相同的，即当前采样点在受到其最近的参考采样点的距离影响权重值越大，水体浑浊度之间的差值越小时，如果当前采样点与该参考采样点之间的水质指标差异越大，对应当前采样点的异常程度越大，即本发明使用为计算第i个采样点水质指标f的异常程度时，对第i个采样点的第个参考采样点的参考权重，该值越大，对该参考采样点的参考程度越大，此时如果第i个采样点与该参考采样点之间水质指标之间的差异越大，该第i个采样点的水质指标越可能存在异常。本发明中，该计算异常程度的方法一方面将图像特征和传感器两个模态的数据相融合，获得水质的完备数据，同时根据不同采样点之间的位置关系以及一定范围内的水质指标的数据值的相似与否对两个模态的数据进行对比与融合，更好的获取不同采样点之间的水质差异，进而较为准确得到水质异常程度。由此得到各个采样点的不同水质指标的异常程度。步骤S4：根据各个采样点的各种水质指标的异常程度对所述各种水质指标进行自适应霍夫曼编码，得到所述各种水质指标的编码数据；对各种水质指标的编码数据分别进行传输。对于一种水质指标f，将各个采样点的该水质指标的数据值视为一个节点，每个采样点的该水质指标的异常程度作为对应节点的权值，根据各个节点的权值，使用霍夫曼算法对各个节点构建霍夫曼树，即每种水质指标均对应一个霍夫曼树；具体的构建过程如下：首先将得到的每个采样点的水质指标f的异常程度值进行归一化，即将单个采样点的水质指标f的异常程度除以所有采样点的水质指标f异常程度的累加和，所得结果记为该单个采样点的水质指标f的异常程度值归一化后的结果；传统的霍夫曼编码的基本方法是先对所有数据扫描一遍，计算出各种数据出现的概率，按概率的大小指定不同长度的唯一码字，由此得到所有数据对应的霍夫曼码表。编码后的数据记录的是每个数据的码字，而码字与实际数据的对应关系记录在码表中，霍夫曼编码原理为现有技术，与之不同的是，本发明中将各个采样点归一化后的异常程度值作为对应节点的权值，对应传统霍夫曼编码中该数据“出现的概率”，从而得到水质指标f的霍夫曼编码结果。本发明中，异常程度大的数据最终得到的编码长度较短，而异常程度较小的数据最终得到的编码长度较长，即本发明通过降低异常程度大的水质指标数据的编码长度，来降低网络波动造成的异常数据丢失的概率，从而保证水质异常数据在传输过程中的可靠性。至此得到各种水质指标的编码数据。最后将各种水质指标的编码数据分别传输到服务器中，完成无人船采集的水质检测数据的传输过程。本发明通过计算在一定范围内的采样点的趋势性来判断周围采样点对当前采样点的距离影响权重的影响，并且通过采集的水体图像的灰度分布来表征水体图像的浑浊度。通过综合考虑每个采样点与附近的参考采样点之间的距离影响权重、水体浑浊度之间的差异以及水质指标的数据值之间的差异来表征各个采样点不同水质指标的异常程度值；最后根据各个采样点的各种水质指标的异常程度进行霍夫曼数据编码，使异常程度较大的水质指标数据获得较短的编码长度，异常程度较小的水质指标数据获得较长的编码长度，通过降低异常程度大的水质指标数据的编码长度，来降低网络波动造成的异常数据丢失的概率，从而保证异常数据在传输过程中的可靠性，确保可以对水质异常区域的精确确定。本发明的另一个实施例提供了一种无人船水质监测数据传输系统，如图2所示，包括无人船控制模块、数据采集模块、数据处理模块和数据传输模块，其中：无人船控制模块，用以控制无人船从一个采样点行驶到下一个采样点；数据采集模块，用以通过相机采集各个采样点的水体图像，通过多个水质监测仪获取各个采样点的各种水质指标，并将采集到的数据发送到数据处理模块；数据处理模块，用以接收数据采集模块采集的数据，根据各个采样点的水体图像的灰度直方图计算所述各个采样点的水体浑浊度；将各个采样点与各个参考采样点水体浑浊度之间的差值记为所述各个参考采样点的第一差值，将各个采样点与各个参考采样点的各种水质指标之间的差值记为所述各个参考采样点的第二差值；根据各个采样点的各个参考采样点的距离影响权重、所述各个参考采样点的第一差值以及所述各个参考采样点的第二差值，得到所述各个采样点的各种水质指标的异常程度，根据各个采样点的各种水质指标的异常程度对所述各种水质指标进行编码，得到各种水质指标的编码数据；数据传输模块，用于对数据处理模块处理后的各种水质指标编码数据分别进行传输。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
