标题title
一种点云地图的维护系统
摘要abst
本公开提供了一种点云地图的维护系统，包括智能车辆和服务器。本公开利用智能车辆最基础的车辆位置信息和第一帧点云维护预设第二点云地图的有效性，不用增加额外的数据和占用其他流量，降低了应用成本。同时，利用点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据。将与移动障碍物相关的非定位的点数据清除出帧点云，降低了维护的难度和计算量，保证了维护效果的准确性。
权利要求书clms
1.一种点云地图的维护系统，其特征在于，包括：智能车辆，配置为：获取车辆位置信息和第一帧点云，其中，所述车辆位置信息和所述第一帧点云均设置于预设第一坐标系下；以所述车辆位置信息为参照将所述第一帧点云中各个点数据的坐标投影至预设第一点云地图所属的预设第二坐标系下，且与预设第一点云地图中点数据的坐标进行评估，获得所述第一帧点云的第一评估结果；当所述第一评估结果满足预设维护条件时，至少基于所述车辆位置信息和所述第一帧点云以及所述第一帧点云中各个点数据的坐标生成维护数据；服务器，与所述智能车辆通信连接，配置为：基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云；以所述车辆位置信息为参照将所述第二帧点云中各个点数据的坐标投影至预设第二点云地图所属的预设第二坐标系下，生成第三帧点云；对所述第三帧点云进行网格化处理，获取多个网格；对所述第三帧点云在任一网格下的多个点数据的坐标进行评估，获取所述网格的第二评估结果；当所述网格的第二评估结果满足预设维护条件时，利用所述网格下所述第三帧点云的多个点数据更新对应网格下预设第二点云地图。2.根据权利要求1所述的系统，其特征在于，所述维护数据还包括第一维护类型；相应地，所述服务器配置为所述基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云，包括：当所述维护数据中包括所述第一维护类型时，基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云。3.根据权利要求1所述的系统，其特征在于，所述维护数据还包括第二维护类型和第一校验信息；相应地，所述服务器配置为所述基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云，包括：当所述维护数据中包括所述第二维护类型时，将以所述车辆位置信息为参照投影至预设第二点云地图所属的预设第二坐标系下的所述第一帧点云中各个点数据的坐标与预设第二点云地图中各个点数据的坐标进行匹配，获得所述第一帧点云的第一匹配结果，且基于所述第一帧点云的第一匹配结果生成第二校验信息；当所述第二校验信息等于所述第一校验信息时，基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云。4.根据权利要求1所述的系统，其特征在于，所述服务器配置为所述对所述第三帧点云在任一网格下的多个点数据的坐标进行评估，获取所述网格的第二评估结果，包括：基于所述第三帧点云在任一网格下的任一点数据的坐标获得所述点数据的网格坐标索引；基于所述点数据的网格坐标索引检索对应所述网格坐标索引的网格，并获取所述网格的网格数据；当所述网格的网格数据中不存在索引数据集时，在所述网格数据中建立索引数据集，将所述点数据的坐标添加至所述索引数据集中，且标记所述索引数据集为第一标识信息，标记所述索引数据集中每个坐标的点云标识为第二标识信息，标记所述索引数据集中每个坐标的地图标识为第三标识信息；获得所述网格的索引数据集中所有坐标的坐标数量。5.根据权利要求4所述的系统，其特征在于，所述服务器配置为所述当所述网格的第二评估结果满足预设维护条件时，利用所述网格下所述第三帧点云的多个点数据更新对应网格下预设第二点云地图，包括：当所述索引数据集中的坐标数量大于预设坐标数量阈值，且所述索引数据集标记为第一标识信息时，将所述网格的索引数据集中所有坐标所对应的点数据添加至所述对应网格下预设第二点云地图中。6.根据权利要求4所述的系统，其特征在于，所述服务器配置为所述基于所述点数据的网格坐标索引检索对应所述网格坐标索引的网格，并获取所述网格的网格数据之后，还包括：当所述网格的网格数据中存在所述索引数据集时，当所述点数据的坐标存在于所述索引数据集中时，将所述点数据的坐标的点云标识和地图标识均标记为第二标识信息。7.根据权利要求6所述的系统，其特征在于，所述服务器配置为所述当所述网格的第二评估结果满足预设维护条件时，利用所述网格下所述第三帧点云的多个点数据更新对应网格下预设第二点云地图，包括：当所述索引数据集中任一坐标的点云标识和地图标识均标记为第二标识信息时，不更新对应网格下预设第二点云地图中所述坐标上的点数据。8.根据权利要求4所述的系统，其特征在于，所述服务器配置为所述基于所述点数据的网格坐标索引检索对应所述网格坐标索引的网格，并获取所述网格的网格数据之后，还包括：当所述网格的网格数据中存在所述索引数据集时，当所述点数据的坐标不存在于所述索引数据集中时，将所述点数据的坐标添加至所述索引数据集中，且将所述点数据的坐标的点云标识标记为第二标识信息，且将所述点数据的坐标的地图标识标记为第三标识信息。9.根据权利要求8所述的系统，其特征在于，所述服务器配置为所述当所述网格的第二评估结果满足预设维护条件时，利用所述网格下所述第三帧点云的多个点数据更新对应网格下预设第二点云地图，包括：当所述索引数据集中任一坐标的点云标识标记为第二标识信息，且所述坐标的地图标识标记为第三标识信息时，将所述坐标所对应的点数据添加至所述对应网格下预设第二点云地图中。10.根据权利要求1所述的系统，其特征在于，所述服务器还配置为：当进行网格化处理时，将预设点云地图在任一网格中的点数据的坐标记录入所述网格的索引数据集中，且将任一坐标的点云标识标记为第三标识信息，以及将对应坐标的地图标识标记为第二标识信息；所述服务器还配置为：待遍历完所述第三帧点云在任一网格下的所有点数据后，基于所述网格的网格数据中的索引数据集获取任一坐标的点云标识标记为第三标识信息，且所述坐标的地图标识标记为第二标识信息，从所述预设第二点云地图中删除所述坐标所对应的点数据。
说明书desc
技术领域本公开涉及智能车辆技术领域，具体而言，涉及一种点云地图的维护系统。背景技术智能车辆是一个集环境感知、规划决策、多等级辅助驾驶等功能于一体的综合系统，它集中运用了计算机、现代传感、信息融合、通讯、人工智能及自动控制等技术，为智能车辆提供安全性、可靠性和舒适性。其中，激光雷达采集的点云能够实时反映车辆周围的环境特点，通过与三维电子地图的匹配达到环境感知的效果。因此，维护一个有效的三维电子地图非常重要。当前，主要是定期扫描道路采集点云来重建三维电子地图，达到维护的目的。但是，这种维护方法费时费力，维护的数据量大，耗费时间长，维护成本高。因此，本公开提供了一种点云地图的维护系统，以解决上述技术问题之一。发明内容本公开的目的在于提供一种点云地图的维护方法和智能移动装置，能够解决上述提到的至少一个技术问题。具体方案如下：根据本公开的具体实施方式，第一方面，本公开提供一种点云地图的维护系统，包括：智能车辆，配置为：获取车辆位置信息和第一帧点云，其中，所述车辆位置信息和所述第一帧点云均设置于预设第一坐标系下；以所述车辆位置信息为参照将所述第一帧点云中各个点数据的坐标投影至预设第一点云地图所属的预设第二坐标系下，且与预设第一点云地图中点数据的坐标进行评估，获得所述第一帧点云的第一评估结果；当所述第一评估结果满足预设维护条件时，至少基于所述车辆位置信息和所述第一帧点云以及所述第一帧点云中各个点数据的坐标生成维护数据；服务器，与所述智能车辆通信连接，配置为：基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云；以所述车辆位置信息为参照将所述第二帧点云中各个点数据的坐标投影至预设第二点云地图所属的预设第二坐标系下，生成第三帧点云；对所述第三帧点云进行网格化处理，获取多个网格；对所述第三帧点云在任一网格下的多个点数据的坐标进行评估，获取所述网格的第二评估结果；当所述网格的第二评估结果满足预设维护条件时，利用所述网格下所述第三帧点云的多个点数据更新对应网格下预设第二点云地图。可选的，所述维护数据还包括第一维护类型；相应地，所述服务器配置为所述基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云，包括：当所述维护数据中包括所述第一维护类型时，基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云。可选的，所述维护数据还包括第二维护类型和第一校验信息；相应地，所述服务器配置为所述基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云，包括：当所述维护数据中包括所述第二维护类型时，将以所述车辆位置信息为参照投影至预设第二点云地图所属的预设第二坐标系下的所述第一帧点云中各个点数据的坐标与预设第二点云地图中各个点数据的坐标进行匹配，获得所述第一帧点云的第一匹配结果，且基于所述第一帧点云的第一匹配结果生成第二校验信息；当所述第二校验信息等于所述第一校验信息时，基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云。可选的，所述服务器配置为所述对所述第三帧点云在任一网格下的多个点数据的坐标进行评估，获取所述网格的第二评估结果，包括：基于所述第三帧点云在任一网格下的任一点数据的坐标获得所述点数据的网格坐标索引；基于所述点数据的网格坐标索引检索对应所述网格坐标索引的网格，并获取所述网格的网格数据；当所述网格的网格数据中不存在索引数据集时，在所述网格数据中建立索引数据集，将所述点数据的坐标添加至所述索引数据集中，且标记所述索引数据集为第一标识信息，标记所述索引数据集中每个坐标的点云标识为第二标识信息，标记所述索引数据集中每个坐标的地图标识为第三标识信息；获得所述网格的索引数据集中所有坐标的坐标数量。可选的，所述服务器配置为所述当所述网格的第二评估结果满足预设维护条件时，利用所述网格下所述第三帧点云的多个点数据更新对应网格下预设第二点云地图，包括：当所述索引数据集中的坐标数量大于预设坐标数量阈值，且所述索引数据集标记为第一标识信息时，将所述网格的索引数据集中所有坐标所对应的点数据添加至所述对应网格下预设第二点云地图中。可选的，所述服务器配置为所述基于所述点数据的网格坐标索引检索对应所述网格坐标索引的网格，并获取所述网格的网格数据之后，还包括：当所述网格的网格数据中存在所述索引数据集时，当所述点数据的坐标存在于所述索引数据集中时，将所述点数据的坐标的点云标识和地图标识均标记为第二标识信息。可选的，所述服务器配置为所述当所述网格的第二评估结果满足预设维护条件时，利用所述网格下所述第三帧点云的多个点数据更新对应网格下预设第二点云地图，包括：当所述索引数据集中任一坐标的点云标识和地图标识均标记为第二标识信息时，不更新对应网格下预设第二点云地图中所述坐标上的点数据。可选的，所述服务器配置为所述基于所述点数据的网格坐标索引检索对应所述网格坐标索引的网格，并获取所述网格的网格数据之后，还包括：当所述网格的网格数据中存在所述索引数据集时，当所述点数据的坐标不存在于所述索引数据集中时，将所述点数据的坐标添加至所述索引数据集中，且将所述点数据的坐标的点云标识标记为第二标识信息，且将所述点数据的坐标的地图标识标记为第三标识信息。可选的，所述服务器配置为所述当所述网格的第二评估结果满足预设维护条件时，利用所述网格下所述第三帧点云的多个点数据更新对应网格下预设第二点云地图，包括：当所述索引数据集中任一坐标的点云标识标记为第二标识信息，且所述坐标的地图标识标记为第三标识信息时，将所述坐标所对应的点数据添加至所述对应网格下预设第二点云地图中。可选的，所述服务器还配置为：当进行网格化处理时，将预设点云地图在任一网格中的点数据的坐标记录入所述网格的索引数据集中，且将任一坐标的点云标识标记为第三标识信息，以及将对应坐标的地图标识标记为第二标识信息；所述服务器还配置为：待遍历完所述第三帧点云在任一网格下的所有点数据后，基于所述网格的网格数据中的索引数据集获取任一坐标的点云标识标记为第三标识信息，且所述坐标的地图标识标记为第二标识信息，从所述预设第二点云地图中删除所述坐标所对应的点数据。本公开实施例的上述方案与现有技术相比，至少具有以下有益效果：本公开提供了一种点云地图的维护系统，包括智能车辆和服务器。本公开利用智能车辆最基础的车辆位置信息和第一帧点云维护预设第二点云地图的有效性，不用增加额外的数据和占用其他流量，降低了应用成本。同时，利用点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据。将与移动障碍物相关的非定位的点数据清除出帧点云，降低了维护的难度和计算量，保证了维护效果的准确性。其中，车辆位置信息和第一帧点云均可为离线数据。也就是无需定期扫描道路，采集点云来重建三维电子地图。而是能够通过离线方式，将预先采集的数据对预设第二点云地图进行更新，避免了在线计算资源的消耗以及算法的在线更新，避免了占用智能车辆的系统资源，减少了对系统性能的严重依赖，降低了系统成本。附图说明图1示出了根据本公开实施例的点云地图的维护系统的示意图。具体实施方式为了使本公开的目的、技术方案和优点更加清楚，下面将结合附图对本公开作进一步地详细描述，显然，所描述的实施例仅仅是本公开一部分实施例，而不是全部的实施例。基于本公开中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其它实施例，都属于本公开保护的范围。在本公开实施例中使用的术语是仅仅出于描述特定实施例的目的，而非旨在限制本公开。在本公开实施例和所附权利要求书中所使用的单数形式的“一种”、“所述”和“该”也旨在包括多数形式，除非上下文清楚地表示其他含义，“多种”一般包含至少两种。应当理解，本文中使用的术语“和/或”仅仅是一种描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。另外，本文中字符“/”，一般表示前后关联对象是一种“或”的关系。应当理解，尽管在本公开实施例中可能采用术语第一、第二、第三等来描述，但这些描述不应限于这些术语。这些术语仅用来将描述区分开。例如，在不脱离本公开实施例范围的情况下，第一也可以被称为第二，类似地，第二也可以被称为第一。取决于语境，如在此所使用的词语“如果”、“若”可以被解释成为“在……时”或“当……时”或“响应于确定”或“响应于检测”。类似地，取决于语境，短语“如果确定”或“如果检测”可以被解释成为“当确定时”或“响应于确定”或“当检测时”或“响应于检测”。还需要说明的是，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的商品或者装置不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种商品或者装置所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的商品或者装置中还存在另外的相同要素。特别需要说明的是，在说明书中存在的符号和/或数字，如果在附图说明中未被标记的，均不是附图标记。下面结合附图详细说明本公开的可选实施例。实施例1对本公开提供的实施例，即一种点云地图的维护系统的实施例。下面结合附图对本公开实施例进行详细说明。如图1所示，本公开实施例提供了一种点云地图的维护系统，包括：智能车辆和服务器。智能车辆是一个集环境感知、规划决策、多等级辅助驾驶等功能于一体的综合系统，它集中运用了计算机、现代传感、信息融合、通讯、人工智能及自动控制等技术，为智能车辆提供安全性、可靠性和舒适性。智能车辆，配置为：获取车辆位置信息和第一帧点云，其中，所述车辆位置信息和所述第一帧点云均设置于预设第一坐标系下；以所述车辆位置信息为参照将所述第一帧点云中各个点数据的坐标投影至预设第一点云地图所属的预设第二坐标系下，且与预设第一点云地图中点数据的坐标进行评估，获得所述第一帧点云的第一评估结果；当所述第一评估结果满足预设维护条件时，至少基于所述车辆位置信息和所述第一帧点云以及所述第一帧点云中各个点数据的坐标生成维护数据。智能车辆通过其内部设置的多传感器单元获取智能车辆的车辆位置信息和第一帧点云。多传感器单元，汇集了多种传感器采集的数据，多传感器单元包括：全球导航卫星单元，底盘数据采集单元、惯性测量单元、摄像头和/或激光雷达，其中，全球导航卫星单元用于采集位置信息，惯性测量单元用于采集惯性信息，激光雷达用于采集帧点云。通过算法程序能够基于多传感器单元采集的数据实时获得智能车辆的车辆位置信息、姿态信息和/或速度值。所述车辆位置信息是指对多传感器单元采集数据进行滤波计算后融合而成的位置。点云，是指在一个三维坐标系统中表征目标表面特性的海量的点数据的集合，每个点数据包括一组向量。所述第一帧点云，是激光雷达对周围环境扫描一周后，所获得的点云。所述第一帧点云包括多个点数据，每个点数据即为一个向量，所述点数据包括测距信息和光强信息。所述车辆位置信息和所述第一帧点云均设置于预设第一坐标系下，例如，预设第一坐标系下为世界坐标系。本公开实施例中，所述预设第一点云地图和预设第二点云地图均设置于预设第二坐标系下，且所述预设第一点云地图来源于预设第二点云地图。例如，预设第二坐标系是指地图坐标系。预设第二坐标系至少包括：第一坐标轴、第二坐标轴和第三坐标轴，第一坐标轴和第二坐标轴构成的坐标轴水平面，例如，预设第二坐标系是XYZ坐标系，第一坐标轴为X轴、第二坐标轴为Y轴，第三坐标轴为Z轴，坐标轴水平面为XY面。所述评估是指在预设第二坐标系下点云中点数据的坐标与预设第一点云地图中点数据的坐标进行评估。所述第一帧点云的第一评估结果包括：智能车辆起步后的移动距离、第一帧点云中点数据的坐标到预设第一点云地图中最近点数据的坐标的平均距离值、第一帧点云中点数据的坐标的概率分布得分值、以及第一帧点云中点数据的坐标的离群点比例值。在一些具体实施例中，智能车辆，配置为所述基于所述第一评估结果确定维护数据，包括：当所述智能车辆起步后的移动距离大于预设距离阈值时，当所述平均距离值大于预设距离阈值，所述概率分布得分值大于预设得分阈值，和/或所述离群点比例值大于预设比例阈值时，确定第一维护类型，且基于所述第一维护类型、所述车辆位置信息和所述第一帧点云以及所述第一帧点云中各个点数据的坐标生成维护数据。第一维护类型用于通知服务器该维护数据中的数据能够直接参与数据维护。在另一些具体实施例中，智能车辆，配置为所述基于所述第一评估结果确定维护数据，包括：当所述平均距离值小于或等于预设距离阈值，所述概率分布得分值小于或等于预设得分阈值，和/或所述离群点比例值小于或等于预设比例阈值时，确定第二维护类型；将投影至预设第二坐标系下的所述第一帧点云中各个点数据的坐标与预设第二点云地图中各个点数据的坐标进行匹配，获得所述第一帧点云的第二匹配结果，且基于所述第一帧点云的第二匹配结果生成第一校验信息；基于所述第二维护类型、所述第一校验信息、所述车辆位置信息和所述第一帧点云以及所述第一帧点云中各个点数据的坐标生成维护数据。第二维护类型用于通知服务器该维护数据中的数据必须通过数据校验，当满足校验条件后才能够参与数据维护。服务器，与所述智能车辆通信连接，配置为：基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云；以所述车辆位置信息为参照将所述第二帧点云中各个点数据的坐标投影至预设第二点云地图所属的预设第二坐标系下，生成第三帧点云；对所述第三帧点云进行网格化处理，获取多个网格；对所述第三帧点云在任一网格下的多个点数据的坐标进行评估，获取所述网格的第二评估结果；当所述网格的第二评估结果满足预设维护条件时，利用所述网格下所述第三帧点云的多个点数据更新对应网格下预设第二点云地图。本公开实施例利用点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据。将与移动障碍物相关的非定位的点数据清除出帧点云，保证了维护效果的准确性。例如，移动障碍物包括：车辆、行人，本公开实施例不限于此。网格，也称为体素。所述网格化处理，也称体素化处理。对所述第三帧点云进行网格化处理，也可以理解为，将所述预设第二坐标系下的三维空间划分成一个个三维网格。无论是预设第二点云地图中的点数据还是第三帧点云中的点数据均被分到了一个个网格中进行管理。通过网格化管理能够加速数据处理的收敛速度，同时将复杂和庞大的数据处理简化成对网格的处理，提高了数据处理的效率。在一些具体实施例中，所述维护数据还包括第一维护类型。相应地，所述服务器配置为所述基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云，包括：当所述维护数据中包括所述第一维护类型时，基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云。当所述维护数据中包括所述第一维护类型时，可以认为该维护数据能够直接参与数据维护。在一些具体实施例中，所述维护数据还包括第二维护类型和第一校验信息。相应地，所述服务器配置为所述基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云，包括：当所述维护数据中包括所述第二维护类型时，将以所述车辆位置信息为参照投影至预设第二点云地图所属的预设第二坐标系下的所述第一帧点云中各个点数据的坐标与预设第二点云地图中各个点数据的坐标进行匹配，获得所述第一帧点云的第一匹配结果，且基于所述第一帧点云的第一匹配结果生成第二校验信息；当所述第二校验信息等于所述第一校验信息时，基于点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据，获得第二帧点云。当所述维护数据中包括所述第二维护类型时，可以认为必须通过数据校验，当满足校验条件后才能够参与数据维护。如果不满足校验条件时，保存第一帧点云中不满足匹配条件的点数据的坐标。在一些具体实施例中，所述服务器配置为所述对所述第三帧点云在任一网格下的多个点数据的坐标进行评估，获取所述网格的第二评估结果，包括：基于所述第三帧点云在任一网格下的任一点数据的坐标获得所述点数据的网格坐标索引；基于所述点数据的网格坐标索引检索对应所述网格坐标索引的网格，并获取所述网格的网格数据；当所述网格的网格数据中不存在索引数据集时，在所述网格数据中建立索引数据集，将所述点数据的坐标添加至所述索引数据集中，且标记所述索引数据集为第一标识信息，标记所述索引数据集中每个坐标的点云标识为第二标识信息，标记所述索引数据集中每个坐标的地图标识为第三标识信息；获得所述网格的索引数据集中所有坐标的坐标数量。所述网格坐标索引是指网格在预设第二坐标系下的坐标。所述基于所述第三帧点云在任一网格下的任一点数据的坐标获得所述点数据的网格坐标索引，通过以下公式获得：X_idx＝的商；Y_idx＝的商；Z_idx＝的商；其中，X_idx、Y_idx和Z_idx是网格坐标索引，也就是网格在预设第二坐标系下的坐标；x、y和z分别表示所述点数据在预设第二坐标系下的坐标；voxel_x_size、voxel_y_size和voxel_z_size表示网格分别在三轴上的长度。所述网格中包括网格数据。当所述网格中包括点数据时，本公开实施例会建立网格的索引数据集，也就是网格数据包括索引数据集。索引数据集用于保存预设第二坐标系下的网格中点数据的坐标。在一些具体实施例中，所述服务器还配置为：当进行网格化处理时，将预设点云地图在任一网格中的点数据的坐标记录入所述网格的索引数据集中，且将任一坐标的点云标识标记为第三标识信息，以及将对应坐标的地图标识标记为第二标识信息。本公开实施例，为索引数据集中每个坐标均设置了点云标识和地图标识，用于记录坐标的更新状态。点云标识和地图标识分别用于标记索引数据集中的坐标是否被遍历过。当标记为第二标识信息时，表示被遍历过；当标记为第三标识信息时，表示未被遍历过。第二标识信息包括逻辑真信息；第三标识信息包括逻辑假信息。第一标识信息包括有效信息，用于表示所述网格的索引数据集是新建的。也就是在预设第二点云地图在该网格中的不存在点数据的坐标。在一些具体实施例中，所述服务器配置为所述当所述网格的第二评估结果满足预设维护条件时，利用所述网格下所述第三帧点云的多个点数据更新对应网格下预设第二点云地图，包括：当所述索引数据集中的坐标数量大于预设坐标数量阈值，且所述索引数据集标记为第一标识信息时，将所述网格的索引数据集中所有坐标所对应的点数据添加至所述对应网格下预设第二点云地图中。当网格的索引数据集中的坐标数量小于或等于预设坐标数量阈值，表明该网格的数据量过少，将该网格中的点数据判定为干扰数据，将其过滤掉。当网格的索引数据集中的坐标数量足够大，且索引数据集是新建的时，此时索引数据集中所有坐标所对应的点数据均属于第三帧点云；也就是在获得此次第三帧点云前，预设第二点云地图在该网格中不存在点数据的坐标，可以理解为，预设第二点云地图在该网格中未记录固定障碍物的信息。因此，将所述网格的索引数据集中所有坐标所对应的点数据添加至所述对应网格下预设第二点云地图中。在一些具体实施例中，所述服务器配置为所述基于所述点数据的网格坐标索引检索对应所述网格坐标索引的网格，并获取所述网格的网格数据之后，还包括：当所述网格的网格数据中存在所述索引数据集时，当所述点数据的坐标存在于所述索引数据集中时，将所述点数据的坐标的点云标识和地图标识均标记为第二标识信息。所述点数据的坐标存在于所述索引数据集中，可以理解为，第三帧点云在该网格中的点数据的坐标与预设第二点云地图在该网格中的点数据的坐标一致。所述点数据的坐标的点云标识和地图标识均标记为第二标识信息，表明该点数据在第三帧点云和预设第二点云地图中均存在，且已经被遍历过了。在一些具体实施例中，所述服务器配置为所述当所述网格的第二评估结果满足预设维护条件时，利用所述网格下所述第三帧点云的多个点数据更新对应网格下预设第二点云地图，包括：当所述索引数据集中任一坐标的点云标识和地图标识均标记为第二标识信息时，不更新对应网格下预设第二点云地图中所述坐标上的点数据。当第三帧点云在该网格中的点数据的坐标与预设第二点云地图在该网格中的点数据的坐标一致时，不需要更新预设第二点云地图在该网格中的点数据的坐标。在一些具体实施例中，所述服务器配置为所述基于所述点数据的网格坐标索引检索对应所述网格坐标索引的网格，并获取所述网格的网格数据之后，还包括：当所述网格的网格数据中存在所述索引数据集时，当所述点数据的坐标不存在于所述索引数据集中时，将所述点数据的坐标添加至所述索引数据集中，且将所述点数据的坐标的点云标识标记为第二标识信息，且将所述点数据的坐标的地图标识标记为第三标识信息。所述将所述点数据的坐标的点云标识标记为第二标识信息，且将所述点数据的坐标的地图标识标记为第三标识信息，可以理解为，第三帧点云在网格中存在该点数据，且被遍历过；预设第二点云地图在网格中不存在该点数据，也就未能被遍历。在一些具体实施例中，所述服务器配置为所述当所述网格的第二评估结果满足预设维护条件时，利用所述网格下所述第三帧点云的多个点数据更新对应网格下预设第二点云地图，包括：当所述索引数据集中任一坐标的点云标识标记为第二标识信息，且所述坐标的地图标识标记为第三标识信息时，将所述坐标所对应的点数据添加至所述对应网格下预设第二点云地图中。当第三帧点云在网格中存在该点数据，且预设第二点云地图在网格中不存在该点数据时，将所述坐标所对应的点数据添加至所述对应网格下预设第二点云地图中，进行数据更新。在一些具体实施例中，所述服务器还配置为：待遍历完所述第三帧点云在任一网格下的所有点数据后，基于所述网格的网格数据中的索引数据集获取任一坐标的点云标识标记为第三标识信息，且所述坐标的地图标识标记为第二标识信息，从所述预设第二点云地图中删除所述坐标所对应的点数据。本公开实施例在遍历完所述第三帧点云在任一网格下的所有点数据后，将预设第二点云地图在该网格中未能通过第三帧点云被遍历过的点数据确定为已经无效的数据，表明这类点数据在现实场景中不存在，对预设第二点云地图在该表格中的这类点数据进行清除。保证了预设第二点云地图始终能够与感知到的现场情况相一致。在清除这类数据时，也可以在所有网格遍历完成后，进行清除。本公开实施例不做限制。本公开实施例，智能车辆最基础的车辆位置信息和第一帧点云维护预设第二点云地图的有效性，不用增加额外的数据和占用其他流量，降低了应用成本。同时，利用点云检测模型去除所述第一帧点云中与移动障碍物相关的点数据。将与移动障碍物相关的非定位的点数据清除出帧点云，降低了维护的难度和计算量，保证了维护效果的准确性。其中，车辆位置信息和第一帧点云均可为离线数据。也就是无需定期扫描道路，采集点云来重建三维电子地图。而是能够通过离线方式，将预先采集的数据对预设第二点云地图进行更新，避免了在线计算资源的消耗以及算法的在线更新，避免了占用智能车辆的系统资源，减少了对系统性能的严重依赖，降低了系统成本。最后应说明的是：本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。对于实施例公开的系统或装置而言，由于其与实施例公开的方法相对应，所以描述比较简单，相关之处参见方法部分说明即可。以上实施例仅用以说明本公开的技术方案，而非对其限制；尽管参照前述实施例对本公开进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本公开各实施例技术方案的精神和范围。
