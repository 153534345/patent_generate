标题title
一种车铣复合五轴加工中心八通道控制方法
摘要abst
本发明公开了一种车铣复合五轴加工中心八通道控制方法，其包括调整数控系统中的组态配置管理器，按照加工中心的机械工件，配置相应的工作通道，工作通道设置相应的逻辑轴并封装对应物理轴，通过改变数控系统的PLC逻辑控制指令控制工作通道的切换，实现多通道多轴联动工作，不同工作通道对应不同机床机械结构，可以有效确保众多物理轴之间的协同配合工作，同时优化了通道与通道间的各轴相应的互锁关系，协同性更高。
权利要求书clms
1.一种车铣复合五轴加工中心八通道控制方法，其特征在于，包括：调整数控系统中的组态配置管理器，按照加工中心的机械工件要求配置相应的工作通道，工作通道设置相应的逻辑轴并封装对应物理轴，通过改变数控系统的PLC逻辑控制指令控制工作通道的切换，实现多通道多轴联动工作。2.如权利要求1所述的一种车铣复合五轴加工中心八通道控制方法，其特征在于：根据机械加工要求在数控系统中添加机械工件的配置与工作通道控制策略，在加工时数控系统识别机械工件的配置，并利用所述控制策略自动启动对应工作通道进行机械加工。3.如权利要求2所述的一种车铣复合五轴加工中心八通道控制方法，其特征在于，根据机械加工要求在数控系统中添加机械工件的配置过程为：设置如下4种机械工件配置方案：第一机械工件配置：中心架和尾座顶尖机械结构，无下刀塔及工件副主轴；第二机械工件配置：中心架和工件双主轴机械结构，无下刀塔；第三机械工件配置：下刀塔和尾座顶尖机械结构，无工件副主轴；第四机械工件配置：下刀塔和工件双主轴机械结构；工作通道为8个，分别为工作通道1、工作通道2、工作通道3、工作通道4、工作通道5、工作通道6、工作通道7和工作通道8：工作通道1用于控制摆头主轴和工件主轴，摆头主轴和工件主轴构成第一物理轴C1；工作通道2用于控制摆头主轴和工件双主轴同步双驱，摆头主轴和工件双主轴同步双驱构成第二物理轴C2；工作通道3用于控制刀塔主轴和工件双主轴同步双驱，刀塔主轴和工件双主轴同步双驱构成第三物理轴C3；工作通道4用于控制刀塔主轴和工件主轴，刀塔主轴和工件主轴构成第四物理轴C4；工作通道5用于控制刀塔主轴和工件副主轴，刀塔主轴和工件副主轴构成第五物理轴C5；工作通道6用于控制摆头主轴和工件副主轴，摆头主轴和工件副主轴构成第六物理轴C6；工作通道7用于控制刀塔主轴；工作通道8用于控制刀塔主轴；所述第一机械工件配置通过工作通道1的控制实现机械工件的加工；所述第二机械工件配置通过工作通道1、工作通道2和工作通道6的控制实现机械工件的加工；所述第三机械工件配置通过工作通道1和工作通道7的控制实现机械工件的加工；所述第四机械工件配置通过工作通道1、工作通道2、工作通道3、工作通道4、工作通道5、工作通道6、工作通道7和工作通道8的控制实现机械工件的加工。4.如权利要求3所述的一种车铣复合五轴加工中心八通道控制方法，其特征在于，每个工作通道在数控系统中均设置有对应的M代码。5.如权利要求4所述的一种车铣复合五轴加工中心八通道控制方法，其特征在于，改变数控系统的PLC逻辑控制指令控制工作通道的方法为利用代码控制方式，具体方法为：步骤1、数控系统设置工作通道显示界面；步骤2、根据机械工件配置选择对应的两个工作通道，数控系统执行第一个工作通道，启动第一个工作通道的M代码，数控系统进行机械加工，加工完成后关闭第一个工作通道；步骤3、第一个工作通道关闭后，数控系统将第一个工作通道的M代码切换为第二个工作通道的M代码，并下发对应的PLC逻辑控制指令；步骤4、第二个工作通道的逻辑轴接收PLC逻辑控制指令，完成通道切换，同时将第一个工作通道对应的物理轴控制权移交给第二个工作通道，第二个工作通道工作。6.如权利要求5所述的一种车铣复合五轴加工中心八通道控制方法，其特征在于，PLC系统检测当前工作通道物理轴无转速后，PLC系统发出工作通道变量，数控系统接收工作通道变量后切换工作通道显示界面，释放当前工作通道控制权，移交给下一工作通道，并将下一工作通道逻辑轴绑定对应物理轴。7.如权利要求3所述的一种车铣复合五轴加工中心八通道控制方法，其特征在于，改变数控系统的PLC逻辑控制指令控制工作通道的方法为手动控制方式，具体方法为：在数控系统中设置不同档位的旋钮开关，不同档位的旋钮开关对应不同的工作通道组合；旋转旋钮开关后，旋钮开关触发数字量信号并传递给数控机床的PLC系统，PLC系统识别数字量信号获得PLC逻辑控制指令，进而实现工作通道的切换。8.如权利要求7所述的一种车铣复合五轴加工中心八通道控制方法，其特征在于，改变数控系统的PLC逻辑控制指令控制工作通道的方法为手动控制方式时，当切换不同工作通道组合时若涉及共有物理轴，则判断为通道互锁关系，PLC系统停止工作通道切换并发出报警信号，共有物理轴控制权移交后恢复工作通道组合切换。
说明书desc
技术领域本发明涉及多通道多轴联动及复合加工技术领域，尤其涉及一种车铣复合五轴加工中心八通道控制方法。背景技术数控系统对于国家的经济发展具有超越其经济价值的战略意义，也是一个国家装备制造业发展水平的重要标志。多通道多轴联动及复合加工技术是数控技术发展的主要趋势之一，各数控厂商都将其作为研究热点。在支持多通道功能的高档数控系统中，多个通道可以并行地对工件进行加工，提高了加工效率。但存在因车铣复合五轴加工中心具有复杂的机械结构配置，多个平行轴存在重叠的情况，使得数控系统协同性不高，效率低。发明内容本发明提供一种车铣复合五轴加工中心八通道控制方法，以克服数控系统协同性不高等技术问题。为了实现上述目的，本发明的技术方案是：一种车铣复合五轴加工中心八通道控制方法，其特征在于，包括：调整数控系统中的组态配置管理器，按照加工中心的机械工件要求配置相应的工作通道，工作通道设置相应的逻辑轴并封装对应物理轴，通过改变数控系统的PLC逻辑控制指令控制工作通道的切换，实现多通道多轴联动工作。进一步的，根据机械加工要求在数控系统中添加机械工件的配置与工作通道控制策略，在加工时数控系统识别机械工件的配置，并利用所述控制策略自动启动对应工作通道进行机械加工。进一步的，根据机械加工要求在数控系统中添加机械工件的配置过程为：设置如下4种机械工件配置方案：第一机械工件配置：中心架和尾座顶尖机械结构，无下刀塔及工件副主轴；第二机械工件配置：中心架和工件双主轴机械结构，无下刀塔；第三机械工件配置：下刀塔和尾座顶尖机械结构，无工件副主轴；第四机械工件配置：下刀塔和工件双主轴机械结构；工作通道为8个，分别为工作通道1、工作通道2、工作通道3、工作通道4、工作通道5、工作通道6、工作通道7和工作通道8：工作通道1用于控制摆头主轴和工件主轴，摆头主轴和工件主轴构成第一物理轴C1；工作通道2用于控制摆头主轴和工件双主轴同步双驱，摆头主轴和工件双主轴同步双驱构成第二物理轴C2；工作通道3用于控制刀塔主轴和工件双主轴同步双驱，刀塔主轴和工件双主轴同步双驱构成第三物理轴C3；工作通道4用于控制刀塔主轴和工件主轴，刀塔主轴和工件主轴构成第四物理轴C4；工作通道5用于控制刀塔主轴和工件副主轴，刀塔主轴和工件副主轴构成第五物理轴C5；工作通道6用于控制摆头主轴和工件副主轴，摆头主轴和工件副主轴构成第六物理轴C6；工作通道7用于控制刀塔主轴；工作通道8用于控制刀塔主轴；所述第一机械工件配置通过工作通道1的控制实现机械工件的加工；所述第二机械工件配置通过工作通道1、工作通道2和工作通道6的控制实现机械工件的加工；所述第三机械工件配置通过工作通道1和工作通道7的控制实现机械工件的加工；所述第四机械工件配置通过工作通道1、工作通道2、工作通道3、工作通道4、工作通道5、工作通道6、工作通道7和工作通道8的控制实现机械工件的加工。进一步的，每个工作通道在数控系统中均设置有对应的M代码。进一步的，改变数控系统的PLC逻辑控制指令控制工作通道的方法为利用代码控制方式，具体方法为：步骤1、数控系统设置工作通道显示界面，步骤2、根据机械工件配置选择对应的两个工作通道，数控系统执行第一个工作通道，启动第一个工作通道的M代码，数控系统进行机械加工，加工完成后关闭第一个工作通道；步骤3、第一个工作通道关闭后，数控系统将第一个工作通道的M代码切换为第二个工作通道的M代码，并下发对应的PLC逻辑控制指令；步骤4、第二个工作通道的逻辑轴接收PLC逻辑控制指令，完成通道切换，同时将第一个工作通道对应的物理轴控制权移交给第二个工作通道，第二个工作通道工作。进一步的，PLC系统检测当前工作通道物理轴无转速后，PLC系统发出工作通道变量，数控系统接收工作通道变量后切换工作通道显示界面，释放当前工作通道控制权，移交给下一工作通道，并将下一工作通道逻辑轴绑定对应物理轴。进一步的，改变数控系统的PLC逻辑控制指令控制工作通道的方法为手动控制方式，具体方法为：在数控系统中设置不同档位的旋钮开关，不同档位的旋钮开关对应不同的工作通道组合；旋转旋钮开关后，旋钮开关触发数字量信号并传递给数控机床的PLC系统，PLC系统识别数字量信号获得PLC逻辑控制指令，进而实现工作通道的切换。进一步的，改变数控系统的PLC逻辑控制指令控制工作通道的方法为手动控制方式时，当切换不同工作通道组合时若涉及共有物理轴，则判断为通道互锁关系，PLC系统停止工作通道切换并发出报警信号，共有物理轴控制权移交后恢复工作通道组合切换。有益效果：本发明通过机床机械结构配置决定所控制的通道数量，并以主轴作为区分通道控制的方式，一共定义八个通道，包括独立工作通道和辅助工作通道，不同工作通道对应不同机床机械结构，可以有效确保众多物理轴之间的协同配合工作，同时优化了通道与通道间的各轴相应的互锁关系，协同性更高。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1是本发明所使用机械机构配置示意图；图2是本发明所使用通道的定义规划示意图；图3是本发明手动控制通道规划示意图；图4是本发明代码控制通道规划示意图；图5是本发明通道同步指令控制示意图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本实施例提供了一种车铣复合五轴加工中心八通道控制方法，如图1-4，其特征在于，包括：调整数控系统中的组态配置管理器，按照加工中心的机械工件要求配置相应的工作通道，工作通道设置相应的逻辑轴并封装对应物理轴，通过改变数控系统的PLC逻辑控制指令控制工作通道的切换，实现多通道多轴联动工作。根据机械加工要求在数控系统中添加机械工件的配置与工作通道控制策略，在加工时数控系统识别机械工件的配置，并利用所述控制策略自动启动对应工作通道进行机械加工。所述控制策略为：中心架采用摆头主轴加工，尾座顶尖采用工件主轴加工，工件双主轴采用摆头主轴、工件主轴和工件双轴中的一种或两种或三种加工，下刀塔采用刀塔主轴加工。根据机械加工要求在数控系统中添加机械工件的配置过程为：设置如下4种机械工件配置方案：第一机械工件配置：中心架和尾座顶尖机械结构，无下刀塔及工件副主轴；第二机械工件配置：中心架和工件双主轴机械结构，无下刀塔；第三机械工件配置：下刀塔和尾座顶尖机械结构，无工件副主轴；第四机械工件配置：下刀塔和工件双主轴机械结构；工作通道为8个，分别为工作通道1、工作通道2、工作通道3、工作通道4、工作通道5、工作通道6、工作通道7和工作通道8：工作通道1用于控制摆头主轴和工件主轴，摆头主轴和工件主轴构成第一物理轴C1；工作通道2用于控制摆头主轴和工件双主轴同步双驱，摆头主轴和工件双主轴同步双驱构成第二物理轴C2；工作通道3用于控制刀塔主轴和工件双主轴同步双驱，刀塔主轴和工件双主轴同步双驱构成第三物理轴C3；工作通道4用于控制刀塔主轴和工件主轴，刀塔主轴和工件主轴构成第四物理轴C4；工作通道5用于控制刀塔主轴和工件副主轴，刀塔主轴和工件副主轴构成第五物理轴C5；工作通道6用于控制摆头主轴和工件副主轴，摆头主轴和工件副主轴构成第六物理轴C6；工作通道7用于控制刀塔主轴；工作通道8用于控制刀塔主轴；其中工作通道1-6是独立的，工作通道7-8是辅助的；所述第一机械工件配置通过工作通道1的控制实现机械工件的加工；所述第二机械工件配置通过工作通道1、工作通道2和工作通道6的控制实现机械工件的加工；所述第三机械工件配置通过工作通道1和工作通道7的控制实现机械工件的加工；所述第四机械工件配置通过工作通道1、工作通道2、工作通道3、工作通道4、工作通道5、工作通道6、工作通道7和工作通道8的控制实现机械工件的加工。在具体实施例中，每个工作通道在数控系统中均设置有对应的M代码。当通道自动加工程序加载运行时，通过使能控制，该控制接口被PLC系统调用，这样可以通过PLC系统判断通道能否并行工作。为了区分独立通道和辅助通道，通道手动功能也有使能控制，该控制接口传递给PLC逻辑控制，实现通道协同和互锁关系。在具体实施例中，改变数控系统的PLC逻辑控制指令控制工作通道的方法为利用代码控制方式，具体方法为：步骤1、数控系统设置工作通道显示界面，步骤2、根据机械工件配置选择对应的两个工作通道，数控系统执行第一个工作通道，启动第一个工作通道的M代码，数控系统进行机械加工，加工完成后关闭第一个工作通道；步骤3、第一个工作通道关闭后，数控系统将第一个工作通道的M代码切换为第二个工作通道的M代码，并下发对应的PLC逻辑控制指令；步骤4、第二个工作通道的逻辑轴接收PLC逻辑控制指令，完成通道切换，同时将第一个工作通道对应的物理轴控制权移交给第二个工作通道，第二个工作通道工作。PLC逻辑控制多通道切换，双通道下的操作通道选定，执行M代码切换通道，PLC逻辑传递系统接口指令，完成独立通道切换，同时将通道封装的物理轴控制权移交给转换后的通道，完成物理轴控制权的自动移交；在PLC中进行条件判断：协作加工通道间自动运行时可以进行切换、切换非协作加工通道需停止运行后进行切换组合；通道间M代码相互独立，通过协同通道间的M代码传递双通道同步协作加工信息，实现双通道多轴同步联动控制。在具体实施例中，PLC系统检测当前工作通道物理轴无转速后，PLC系统发出工作通道变量，数控系统接收工作通道变量后切换工作通道显示界面，释放当前工作通道控制权，移交给下一工作通道，并将下一工作通道逻辑轴绑定对应物理轴。在具体实施例中，改变数控系统的PLC逻辑控制指令控制工作通道的方法为手动控制方式，具体方法为：在数控系统中设置不同档位的旋钮开关，不同档位的旋钮开关对应不同的工作通道组合；旋转旋钮开关后，旋钮开关触发数字量信号并传递给数控机床的PLC系统，PLC系统识别数字量信号获得PLC逻辑控制指令，进而实现多通道工作通道的切换。在具体实施例中，改变数控系统的PLC逻辑控制指令控制工作通道的方法为手动控制方式时，当切换不同工作通道组合时若涉及共有物理轴，则判断为通道互锁关系，PLC系统停止工作通道切换并发出报警信号，共有物理轴控制权移交后恢复工作通道组合切换。如图1所示，车铣复合五轴加工中心结构配置为例，以主轴作为区分通道控制的方式，当配置了中心架+双车削主轴时，数控系统为了独立控制摆头与工件主轴、摆头与工件副主轴、摆头与工件双主轴同步双驱，这三种工件主轴的加工控制模式，所述多通道控制方法使用三个独立通道分别封装工件主轴、工件副主轴、工件双主轴实现控制；当配置了摆头主轴、刀塔主轴、工件双主轴时，数控系统为了实现多通道多轴联动及复合加工技术；如图2所示，多通道控制方法定义了独立工作通道中，工作通道1与工作通道5可同时工作，即在工作通道1自动加工中可以启动工作通道5程序，反之亦然。工作通道4与工作通道6可同时工作，如上。多通道控制方式有以下两种：Ⅰ：独立通道间双通道联动加工有工作通道1与工作通道5、联动加工时，调用工作通道1与工作通道5，工作通道1下包含逻辑轴XYBC，工作通道5下包含逻辑轴XC，独立通道设置相应逻辑轴封装对应物理轴，工作通道1中的逻辑轴C轴封装的为物理轴C1，工作通道5中的逻辑轴C轴封装的为物理轴C5，其逻辑轴采用同样的命名方式也方便了编程者进行工艺编程的需求，降低了代码编写的出错率。Ⅱ：独立通道与辅助通道联动加工有工作通道1与工作通道7、工作通道2与工作通道7、工作通道6与工作通道8。在共有物理轴控制权的两个工作通道组合时，若都包含了物理轴C1轴，工作通道组合时通道与通道间进行互锁，当其中一个工作通道自动加工程序加载运行时，不允许非协同通道进行切换，也不支持物理轴控制权的强制切换，只有在工作通道1共有物理轴停止状态下，才可以切换工作通道2、工作通道3或工作通道4，系统将本通道中逻辑轴封装的物理轴控制权移交到所切换的通道下逻辑轴封装的物理轴上，这样有效的避免了物理轴控制权转移产生的冲突。本方法技术支持范围覆盖硬件、组态、HMI、系统、PLC、伺服等方向的功能扩展：①数控系统硬件，采用研祥主板+6500型，提高光纤总线多通道控制实时同步速率。②数控组态，组态配置管理器支持多通道规划应用，可按照车铣复合五轴加工中心机械结构，配置相应的通道物理轴，每个工作通道独立设置相应逻辑轴并封装对应物理轴，满足加工编程工艺需求。手动控制方式，如图3中十种通道状态所述，通过11个档位的旋钮开关对应通道组合；由旋钮开关触发数字量信号传递给PLC，PLC获取信号0～10，PLC通过系统接口实时获取所有物理轴当前所在通道，当旋钮开关信号触发后，由PLC判断所要切换控制通道与当前通道关系为互锁时，提示需要当前通道程序停止后，共有物理轴控制权才可以进行通道移交。PLC通过系统检测当前通道物理轴无转速后，发出对应通道号变量，系统接收此变量后切换通道界面显示，将当前通道下物理轴实时获取的通道号，更改为切换通道的变量，过程由控制权释放，到控制权移交给所切换通道逻辑轴绑定的物理轴上。并且在PLC中触发通道组合。例如，旋钮开关拨档至0位时，当前双通道组合为通道1与通道7，控制当前通道1；旋钮开关拨档至1位时，当前双通道组合为通道1与通道7，控制当前通道7，这个过程是协同通道间进行通道控制切换，因通道与通道间没有共有物理轴，不会产生物理轴控制权冲突，可以在通道程序运行过程中直接切换协同通道；旋钮开关拨档至2位时，当前双通道组合为通道2与通道7，控制当前通道2，拨档至3时，激活当前通道7……若旋钮开关档位为0时，双通道组合为通道1与通道7，当前通道1程序运行状态，拨档至2位，切换双通道组合通道2与通道7，由于方式4方法Ⅱ所述，通道1与通道2间为互锁关系，控制通道仍保持在通道1。代码控制方式，如图4中M代码控制所述，通道间M代码相互独立。在通道下执行M91～M98代码对应切换通道1～通道8，由PLC逻辑实现，在系统发出M91～M98代码指令后，当M代码执行后，通过系统接口传递给PLC判断所要切换控制通道与当前通道关系为互锁时，提示需要当前通道程序停止后，共有物理轴控制权才可以进行通道移交。PLC通过系统检测当前通道物理轴无转速后，发出对应通道号变量，系统接收此变量后切换通道界面显示，将当前通道下物理轴实时获取的通道号，更改为切换通道的变量，过程由控制权释放，到控制权移交给所切换通道逻辑轴绑定的物理轴上。例如，当前通道1所包含的物理轴实际速度为0时，执行M92切换通道2代码，可以将通道1共有物理轴控制权移交给通道2，并将当前双通道组合1-7切换为双通道组合2-7控制当前通道2；若在协同通道组合中进行控制通道切换，因通道与通道间没有共有物理轴，不会产生物理轴控制权冲突，可以在通道程序运行过程中直接切换协同通道。如图5通道同步指令控制所述，协同工作双通道间的M代码，其中一个通道下执行M55E01，E01代表序号为1的指令码，也可以由多个序号指令如E02E03…在当前通道，如通道1系统发出M55E01后，当M代码执行后，通过系统接口传递给PLC判断为当前通道1下所发出的序号为1的指令码，等待协同通道5的程序也执行到M55E01时，PLC也接收到协同通道5下系统传递来的M55E01时，PLC发出结束系统M代码命令，两个通道程序同时通过M代码段，继续进行程序加工。最后应说明的是：以上各实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述各实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分或者全部技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的范围。
