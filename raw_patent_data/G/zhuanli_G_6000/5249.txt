标题title
一种智能跟随小车的视觉跟随方法及装置
摘要abst
本发明公开了一种智能跟随小车的视觉跟随方法及装置，通过获取实时图像，将所述实时图像输入到预训练的目标识别模型中，以使所述目标识别模型对所述实时图像进行目标识别，输出目标；获取智能跟随小车与所述目标的距离，基于所述距离，获取所述目标的实时空间几何位置；根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，以使所述智能跟随小车对所述目标进行自动跟随，直至所述智能跟随小车移动到所述目标处。与现有技术相比，本发明提供的技术方案能基于智能跟随小车与目标的距离以及目标的实时空间几何位置，实现智能跟随小车的自动跟随，提高了工人的工作效率。
权利要求书clms
1.一种智能跟随小车的视觉跟随方法，其特征在于，包括：获取实时图像，将所述实时图像输入到预训练的目标识别模型中，以使所述目标识别模型对所述实时图像进行目标识别，输出目标；获取智能跟随小车与所述目标的距离，基于所述距离，获取所述目标的实时空间几何位置；根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，以使所述智能跟随小车对所述目标进行自动跟随，直至所述智能跟随小车移动到所述目标处。2.如权利要求1所述的一种智能跟随小车的视觉跟随方法，其特征在于，预训练的目标识别模型，具体包括：获取目标图像训练样本集，其中，所述目标图像训练样本集包括石头样本图像、沙子样本图像和砖块样本图像；将所述目标图像训练样本集按预设比例划分为训练集和验证集，基于所述训练集对卷积神经网络进行训练，得到初始目标识别模型，并基于所述验证集对所述初始目标识别模型进行调优处理，得到目标识别模型。3.如权利要求1所述的一种智能跟随小车的视觉跟随方法，其特征在于，所述目标识别模型对所述实时图像进行目标识别，具体包括：对所述实时图像进行二值化处理，得到二值化图像；对所述二值化图像进行轮廓提取，得到第一图像轮廓，基于所述第一图像轮廓，生成第一轮廓点集合；获取并基于所述第一轮廓点集合中每个轮廓点位置，依次连接每个轮廓点，得到实时图像的轮廓图像，并基于所述轮廓图像，输出对应的目标。4.如权利要求1所述的一种智能跟随小车的视觉跟随方法，其特征在于，获取智能跟随小车与所述目标的距离，具体包括：控制所述智能跟随小车向所述目标发射第一发射信号，以使所述目标接收到所述第一发射信号，并获取所述第一发射信号的第一发射时间和第一接收时间；控制所述目标向所述智能跟随小车发射第二发射信号，以使所述智能跟随小车接收到所述第二发射信号，并获取所述第二发射信号的第二发射时间和第二接收时间；控制所述智能跟随小车向所述目标发射第三发射信号，以使所述目标接收到所述第三发射信号，并获取所述第三发射信号的第三发射时间和第三接收时间；根据所述第一发射时间、所述第一接收时间、所述第二发射时间、所述第二接收时间、所述第三发射时间和所述第三接收时间，计算所述智能跟随小车和所述目标的距离。5.如权利要求1所述的一种智能跟随小车的视觉跟随方法，其特征在于，根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，具体包括：获取所述智能跟随小车的当前车辆位置，将所述当前车辆位置和所述实时空间几何位置作为位置PID控制器的输入，以使所述位置PID控制器根据预设PID算法，计算并输出PWM占空比信号；基于所述PWM占空比信号调整所述智能跟随小车中第一直流有刷电机、第二直流有刷电机、第三直流有刷电机和第四直流有刷电机的转速；同时通过三角函数根据所述实时空间几何位置和所述智能跟随小车的当前车辆位置，计算所述智能跟随小车与所述目标的偏离角及偏离方向，以使根据所述偏离角和偏离方向调整所述智能跟随小车的转向。6.一种智能跟随小车的视觉跟随装置，其特征在于，包括：目标识别模块、距离获取模块和自动跟随模块；其中，所述目标识别模块，用于获取实时图像，将所述实时图像输入到预训练的目标识别模型中，以使所述目标识别模型对所述实时图像进行目标识别，输出目标；所述距离获取模块，用于获取智能跟随小车与所述目标的距离，基于所述距离，获取所述目标的实时空间几何位置；所述自动跟随模块，用于根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，以使所述智能跟随小车对所述目标进行自动跟随，直至所述智能跟随小车移动到所述目标处。7.如权利要求6所述的一种智能跟随小车的视觉跟随装置，其特征在于，所述目标识别模块中的预训练的目标识别模型，具体包括：获取目标图像训练样本集，其中，所述目标图像训练样本集包括石头样本图像、沙子样本图像和砖块样本图像；将所述目标图像训练样本集按预设比例划分为训练集和验证集，基于所述训练集对卷积神经网络进行训练，得到初始目标识别模型，并基于所述验证集对所述初始目标识别模型进行调优处理，得到目标识别模型。8.如权利要求6所述的一种智能跟随小车的视觉跟随装置，其特征在于，所述距离获取模块，用于获取智能跟随小车与所述目标的距离，具体包括：控制所述智能跟随小车向所述目标发射第一发射信号，以使所述目标接收到所述第一发射信号，并获取所述第一发射信号的第一发射时间和第一接收时间；控制所述目标向所述智能跟随小车发射第二发射信号，以使所述智能跟随小车接收到所述第二发射信号，并获取所述第二发射信号的第二发射时间和第二接收时间；控制所述智能跟随小车向所述目标发射第三发射信号，以使所述目标接收到所述第三发射信号，并获取所述第三发射信号的第三发射时间和第三接收时间；根据所述第一发射时间、所述第一接收时间、所述第二发射时间、所述第二接收时间、所述第三发射时间和所述第三接收时间，计算所述智能跟随小车和所述目标的距离。9.一种终端设备，其特征在于，包括处理器、存储器以及存储在所述存储器中且被配置为由所述处理器执行的计算机程序，所述处理器执行所述计算机程序时实现如权利要求1至5任意一项所述的智能跟随小车的视觉跟随方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质包括存储的计算机程序，其中，在所述计算机程序运行时控制所述计算机可读存储介质所在设备执行如权利要求1至5中任意一项所述的智能跟随小车的视觉跟随方法。
说明书desc
技术领域本发明涉及视觉识别的技术领域，特别是涉及一种智能跟随小车的视觉跟随方法及装置。背景技术在工地上，工人常常需要搬运车来搬运一些建筑所需的东西，传统的搬运车主要是通过人力进行拖拉，在此过程中，工人需要在工地中寻找闲置的搬运车，且在找到闲置搬运车后，还需将其推至所需要搬运的目标物旁，才能对目标物进行装车运输，在此过程中，不仅寻找闲置搬运车需要时间，找到搬运车后，将其推至目标物旁也需要一定的时间，且在推拉搬运车的过程中，也会进一步耗费工人的力气，导致工作效率下降。发明内容本发明要解决的技术问题是：提供一种智能跟随小车的视觉跟随方法及装置，使智能跟随小车自动行驶至目标物旁，减少对人工的依赖性，提高工人的工作效率。为了解决上述技术问题，本发明提供了一种智能跟随小车的视觉跟随方法，包括：获取实时图像，将所述实时图像输入到预训练的目标识别模型中，以使所述目标识别模型对所述实时图像进行目标识别，输出目标；获取智能跟随小车与所述目标的距离，基于所述距离，获取所述目标的实时空间几何位置；根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，以使所述智能跟随小车对所述目标进行自动跟随，直至所述智能跟随小车移动到所述目标处。在一种可能的实现方式中，预训练的目标识别模型，具体包括：获取目标图像训练样本集，其中，所述目标图像训练样本集包括石头样本图像、沙子样本图像和砖块样本图像；将所述目标图像训练样本集按预设比例划分为训练集和验证集，基于所述训练集对卷积神经网络进行训练，得到初始目标识别模型，并基于所述验证集对所述初始目标识别模型进行调优处理，得到目标识别模型。在一种可能的实现方式中，所述目标识别模型对所述实时图像进行目标识别，具体包括：对所述实时图像进行二值化处理，得到二值化图像；对所述二值化图像进行轮廓提取，得到第一图像轮廓，基于所述第一图像轮廓，生成第一轮廓点集合；获取并基于所述第一轮廓点集合中每个轮廓点位置，依次连接每个轮廓点，得到实时图像的轮廓图像，并基于所述轮廓图像，输出对应的目标。在一种可能的实现方式中，获取智能跟随小车与所述目标的距离，具体包括：控制所述智能跟随小车向所述目标发射第一发射信号，以使所述目标接收到所述第一发射信号，并获取所述第一发射信号的第一发射时间和第一接收时间；控制所述目标向所述智能跟随小车发射第二发射信号，以使所述智能跟随小车接收到所述第二发射信号，并获取所述第二发射信号的第二发射时间和第二接收时间；控制所述智能跟随小车向所述目标发射第三发射信号，以使所述目标接收到所述第三发射信号，并获取所述第三发射信号的第三发射时间和第三接收时间；根据所述第一发射时间、所述第一接收时间、所述第二发射时间、所述第二接收时间、所述第三发射时间和所述第三接收时间，计算所述智能跟随小车和所述目标的距离。在一种可能的实现方式中，根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，具体包括：获取所述智能跟随小车的当前车辆位置，将所述当前车辆位置和所述实时空间几何位置作为位置PID控制器的输入，以使所述位置PID控制器根据预设PID算法，计算并输出PWM占空比信号；基于所述PWM占空比信号调整所述智能跟随小车中第一直流有刷电机、第二直流有刷电机、第三直流有刷电机和第四直流有刷电机的转速；同时通过三角函数根据所述实时空间几何位置和所述智能跟随小车的当前车辆位置，计算所述智能跟随小车与所述目标的偏离角及偏离方向，以使根据所述偏离角和偏离方向调整所述智能跟随小车的转向。本发明还提供了一种智能跟随小车的视觉跟随装置，包括：目标识别模块、距离获取模块和自动跟随模块；其中，所述目标识别模块，用于获取实时图像，将所述实时图像输入到预训练的目标识别模型中，以使所述目标识别模型对所述实时图像进行目标识别，输出目标；所述距离获取模块，用于获取智能跟随小车与所述目标的距离，基于所述距离，获取所述目标的实时空间几何位置；所述自动跟随模块，用于根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，以使所述智能跟随小车对所述目标进行自动跟随，直至所述智能跟随小车移动到所述目标处。在一种可能的实现方式中，所述目标识别模块中的预训练的目标识别模型，具体包括：获取目标图像训练样本集，其中，所述目标图像训练样本集包括石头样本图像、沙子样本图像和砖块样本图像；将所述目标图像训练样本集按预设比例划分为训练集和验证集，基于所述训练集对卷积神经网络进行训练，得到初始目标识别模型，并基于所述验证集对所述初始目标识别模型进行调优处理，得到目标识别模型。在一种可能的实现方式中，所述目标识别模块中所述目标识别模型对所述实时图像进行目标识别，具体包括：对所述实时图像进行二值化处理，得到二值化图像；对所述二值化图像进行轮廓提取，得到第一图像轮廓，基于所述第一图像轮廓，生成第一轮廓点集合；获取并基于所述第一轮廓点集合中每个轮廓点位置，依次连接每个轮廓点，得到实时图像的轮廓图像，并基于所述轮廓图像，输出对应的目标。在一种可能的实现方式中，所述距离获取模块，用于获取智能跟随小车与所述目标的距离，具体包括：控制所述智能跟随小车向所述目标发射第一发射信号，以使所述目标接收到所述第一发射信号，并获取所述第一发射信号的第一发射时间和第一接收时间；控制所述目标向所述智能跟随小车发射第二发射信号，以使所述智能跟随小车接收到所述第二发射信号，并获取所述第二发射信号的第二发射时间和第二接收时间；控制所述智能跟随小车向所述目标发射第三发射信号，以使所述目标接收到所述第三发射信号，并获取所述第三发射信号的第三发射时间和第三接收时间；根据所述第一发射时间、所述第一接收时间、所述第二发射时间、所述第二接收时间、所述第三发射时间和所述第三接收时间，计算所述智能跟随小车和所述目标的距离。在一种可能的实现方式中，所述自动跟随模块，用于根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，具体包括：获取所述智能跟随小车的当前车辆位置，将所述当前车辆位置和所述实时空间几何位置作为位置PID控制器的输入，以使所述位置PID控制器根据预设PID算法，计算并输出PWM占空比信号；基于所述PWM占空比信号调整所述智能跟随小车中第一直流有刷电机、第二直流有刷电机、第三直流有刷电机和第四直流有刷电机的转速；同时通过三角函数根据所述实时空间几何位置和所述智能跟随小车的当前车辆位置，计算所述智能跟随小车与所述目标的偏离角及偏离方向，以使根据所述偏离角和偏离方向调整所述智能跟随小车的转向。本发明还提供了一种终端设备，包括处理器、存储器以及存储在所述存储器中且被配置为由所述处理器执行的计算机程序，所述处理器执行所述计算机程序时实现如上述任意一项所述的智能跟随小车的视觉跟随方法。本发明还提供了一种计算机可读存储介质，所述计算机可读存储介质包括存储的计算机程序，其中，在所述计算机程序运行时控制所述计算机可读存储介质所在设备执行如上述任意一项所述的智能跟随小车的视觉跟随方法。本发明实施例一种智能跟随小车的视觉跟随方法及装置，与现有技术相比，具有如下有益效果：通过获取实时图像，将所述实时图像输入到预训练的目标识别模型中，以使所述目标识别模型对所述实时图像进行目标识别，输出目标；获取智能跟随小车与所述目标的距离，基于所述距离，获取所述目标的实时空间几何位置；根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，以使所述智能跟随小车对所述目标进行自动跟随，直至所述智能跟随小车移动到所述目标处。与现有技术相比，本发明提供的技术方案能基于智能跟随小车与目标的距离以及目标的实时空间几何位置，实现智能跟随小车的自动跟随，减少了对人工的依赖性，同时提高了工人的工作效率。附图说明图1是本发明提供的一种智能跟随小车的视觉跟随方法的一种实施例的流程示意图；图2是本发明提供的一种智能跟随小车的视觉跟随装置的一种实施例的结构示意图；图3是本发明提供的一种智能跟随小车的视觉跟随装置的一种实施例的距离计算示意图；图4是本发明提供的一种实施例的目标空间集合位置计算示意图。具体实施方式下面将结合本发明中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例1参见图1，图1是本发明提供的一种智能跟随小车的视觉跟随方法的一种实施例的流程示意图，如图1所示，该方法包括步骤101-步骤103，具体如下：步骤101：获取实时图像，将所述实时图像输入到预训练的目标识别模型中，以使所述目标识别模型对所述实时图像进行目标识别，输出目标。一实施例中，在智能跟随小车获取实时图像前，需要对智能跟随小车进行上电，并对智能跟随小车中的系统进行初始化设置，以及对DWM1000模块进行初始化，其中，所述初始化设置包括时钟配置、定时器，中断初始化以及调试程序时所需要的串口的输出化。一实施例中，在所述智能跟随小车上设置摄像头模块，通过摄像头模块获取实时图像，具体的，通过OpenCV算法直接调用device库写帧读取，通过读取智能跟随小车上的摄像头模块，直接获取实时图像。一实施例中，设置不同角度，从不同角度对所述石头、沙子和砖块进行拍摄，得到不同角度的石头样本图像、沙子样本图像和砖块样本图像；同时设置不同的图片大小，获取不同图片大小的石头样本图像、沙子样本图像和砖块样本图像；通过整合不同图片大小、不同拍摄角度的石头样本图像、沙子样本图像和砖块样本图像，得到目标图像训练样本集。相比于单一角度拍摄及大小相同样本图像，通过不同角度，不同图片大小的样本图像，能进一步提高图像识别的准确性，避免因角度或图片大小不同导致的误识别。优选的，所述不同图片大小、不同拍摄角度的石头样本图像、沙子样本图像和砖块样本图像的图像来源可以为现场拍摄，也可以网络下载；对于石头样本图像、沙子样本图像和砖块样本图像，各自获取十万分样本数据后，才组建成为一个模型正样本数据集。一实施例中，将所述目标图像训练样本集按预设比例划分为正样本数据集和负样本数据集，基于所述正样本数据集对卷积神经网络进行训练，得到初始目标识别模型，并基于所述负样本数据集对所述初始目标识别模型进行调优处理，得到目标识别模型。具体的，对于模型正样本数据集中各个样本的像素设置为20x20；同时为了提高训练的模型的精度，设置负样本数据集的像素不低于50x50，以使方便OpenCv加快模型训练。基于此，对获取的正样本数据集和负样本数据集进行像素修改，具体的，通过先进行样本图像读取，将读取的样本图像进行保存，然后再读取保存后的样本图像进行显示，主要基于OpenVC直接调用device写帧读取，实现样本图像的显示，通过读取显示的样本图像的像素组，对像素组进行修改，实现对样本图像的像素修改。一实施例中，目标识别模型进行目标识别时，主要将获取到的实时图像输入到模型中进行判断和评估，获取样本图像中物体的轮廓和位置。一实施例中，主要是对所述实时图像进行二值化处理，得到二值化图像；其中，所述二值化处理是指获取实时图像中所有像素点对应的像素值，分别将每个像素值与预设像素值阈值进行对比；当所述像素值大于所述预设像素值阈值时，将所述像素值设置为255，当所述像素值不大于所述预设像素值阈值时，将所述像素值设置为0，得到的二值化图像。一实施例中，对所述二值化图像进行轮廓提取，得到第一图像轮廓，基于所述第一图像轮廓，生成第一轮廓点集合；其中，在进行轮廓提取时，由于已将每个像素点的像素值转换为0或255，因此，基于每个像素点的像素值即可进行轮廓提取，得到待识别目标的轮廓。一实施例中，获取并基于所述第一轮廓点集合中每个轮廓点位置，依次连接每个轮廓点，待识别的目标的轮廓，并基于所述轮廓图像，输出对应的目标。优选的，基于多边形拟合曲线函数算法对所述第一轮廓点集合进行拟合处理，待识别的目标的轮廓。优选的，由于这个阶段的误差范围还较大，因此，还基于获取连续帧的实时图像，对所述连续帧的实时图像进行目标轮廓提取和识别，排除交叉关系和周边环境的干扰，提高识别的准确性。一实施例中，用户通过智能跟随小车上装载的液晶屏输入智能跟随小车所需识别的目标，其中，所述智能跟随小车所需识别的目标可以为设置的沙子、砖头或石头中的任意一种，基于根据用户设定的识别目标，在设置的场地中进行目标识别。一实施例中，当识别出实时图像中不包含石头、沙子或砖块中的任意一种时，则认为当前并没有检测到目标，继续获取实时图像，并对实时图像进行目标识别。步骤102：获取智能跟随小车与所述目标的距离，基于所述距离，获取所述目标的实时空间几何位置。一实施例中，对智能跟随小车设置第一跟随系统基站和第二跟随系统基站，其中，所述第一跟随系统基站和所述第二跟随系统基站主要设置在智能跟随小车车头的左右两侧，所述第一跟随系统基站和所述第二跟随系统基站分别与UWB跟随系统相连接，如图3所示，图3是距离计算示意图。一实施例中，对检测的目标设置UWB标签，其中，所述UWB标签与所述UWB跟随系统相连接。一实施例中，所述第一跟随系统基站和所述第二跟随系统基站扥分别通过所述UWB跟随系统与所述UWB标签相连接；基于UWB双边测距原理，分别计算所述第一跟随系统基站和第二跟随系统基站与所述目标之间的距离。一实施例中，控制所述智能跟随小车向所述目标发射第一发射信号，以使所述目标接收到所述第一发射信号，并获取所述第一发射信号的第一发射时间和第一接收时间；控制所述目标向所述智能跟随小车发射第二发射信号，以使所述智能跟随小车接收到所述第二发射信号，并获取所述第二发射信号的第二发射时间和第二接收时间；控制所述智能跟随小车向所述目标发射第三发射信号，以使所述目标接收到所述第三发射信号，并获取所述第三发射信号的第三发射时间和第三接收时间；根据所述第一发射时间、所述第一接收时间、所述第二发射时间、所述第二接收时间、所述第三发射时间和所述第三接收时间，计算所述智能跟随小车和所述目标的距离。具体的，计算所述第一跟随系统基站到所述目标之间的第一距离；通过控制所述智能跟随小车上的第一跟随系统基站向所述目标上的UWB标签发射第一发射信号，以使所述UWB标签接收到所述第一发射信号，并获取所述第一发射信号的第一发射时间和第一接收时间；控制所述UWB标签向所述第一跟随系统基站发射第二发射信号，以使所述第一跟随系统基站接收到所述第二发射信号，并获取所述第二发射信号的第二发射时间和第二接收时间，控制所述第一跟随系统基站向所述UWB标签发射第三发射信号，以使所述UWB标签接收到所述第三发射信号，并获取所述第三发射信号的第三发射时间和第三接收时间。将所述第一发射时间、所述第一接收时间、所述第二发射时间、所述第二接收时间、所述第三发射时间和所述第三接收时间代入预设飞行公式计算公式中，得到信号在空中的第一飞行时间，基于第一飞行时间乘以光速即为第一跟随系统基站到所述目标之间的第一距离。具体的，所述预设飞行公式计算公式，如下所示：式中，为UWB标签在接收到所述第一发射信号到其发射第二发射信号之间的等待时刻，为第一跟随系统基站在接收到所述第二发射信号到其发射第三发射信号之间的等待时刻，为第一跟随基站发出第一发射信号到UWB标签接收并应答第一发射信号的时间，为UWB标签发出第二发射信号到第一跟随基站接收并应答第二发射信号的时间。具体的，计算所述第二跟随系统基站到所述目标之间的第二距离；通过控制所述智能跟随小车上的第二跟随系统基站向所述目标上的UWB标签发射第四发射信号，以使所述UWB标签接收到所述第四发射信号，并获取所述第四发射信号的第四发射时间和第四接收时间；控制所述UWB标签向所述第二跟随系统基站发射第五发射信号，以使所述第二跟随系统基站接收到所述第五发射信号，并获取所述第五发射信号的第五发射时间和第五接收时间，控制所述第二跟随基站向所述UWB标签发射第六发射信号，以使所述UWB标签接收到所述第六发射信号，并获取所述第六发射信号的第六发射时间和第六接收时间。将所述第四发射时间、所述第四接收时间、所述第五发射时间、所述第五接收时间、所述第六发射时间和所述第六接收时间代入预设飞行公式计算公式中，得到信号在空中的第二飞行时间，基于第二飞行时间乘以光速即为第二跟随系统基站到所述UWB标签之间的第一距离。具体的，所述预设飞行公式计算公式，如下所示：式中，为UWB标签在接收到所述第一发射信号到其发射第二发射信号之间的等待时刻，为第一跟随系统基站在接收到所述第二发射信号到其发射第三发射信号之间的等待时刻，为第二跟随基站发出第四发射信号到UWB标签接收并应答第四发射信号的时间，为UWB标签发出第五发射信号到第二跟随基站接收并应答第五发射信号的时间。一实施例中，由于需要对目标进行准确跟踪，因此通过建立参考坐标系，基于参考坐标系确定目标的空间几何位置。具体的，以第一跟随系统基站1和第二跟随基站2所在直线为x轴，第一跟随系统基站1和第二跟随基站2的中点o为原点，建立直角坐标系。假设第一跟随系统基站1、第二跟随系统基站2和目标的坐标分别为、和，由于上述已计算得到第一跟随系统基站1和第二跟随系统基站2到目标的第一距离和第二距离，第一跟随系统基站1和第二跟随基站2之间的距离为l，基于图4可知，图4是本发明提供的一种实施例的目标空间集合位置计算示意图，这些物理量之间具有如下关系：通过求解以上方程式，可得到方程组的关于被跟踪目标的坐标有两个解，且两个解关于x轴是对称的；假设目标一直在车头的前方，则可知的那个解是目标的实际位置。通过基于室内定位模块，获取所述第一跟随系统基站和第二跟随系统基站的坐标值，将所述第一跟随系统基站和第二跟随系统基站的坐标值代入下述公式，可得出目标的空间几何位置：通过求解目标的位置坐标，可知，当时，目标在智能跟随小车的左侧；当时，目标在智能跟随小车的右侧；当时，目标在智能跟随小车的正前方；目标与智能跟随小车的偏离角为；目标与智能跟随小车的垂直距离为y。步骤103：根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，以使所述智能跟随小车对所述目标进行自动跟随，直至所述智能跟随小车移动到所述目标处。一实施例中，所述智能跟随小车设置为四个带有编码器的直流有刷电机，其中，所述四个直流有刷电机分别设置在所述智能跟随小车的车轮上，且每个直流有刷电机都设置有预设速度，其中，所述预设速度的范围为0-100。一实施例中，获取所述智能跟随小车的当前车辆位置，将所述当前车辆位置和所述实时空间几何位置作为位置PID控制器的输入，以使所述位置PID控制器根据预设PID算法，计算并输出PWM占空比信号，并基于所述PWM占空比信号调整所述智能跟随小车的转速和转向。具体的，在当前时刻，根据第一编码器的脉冲累加测量第一直流有刷电机的第一位置信息，将第一位置信息与目标的实时空间几何位置进行比较，得到第一控制偏差；在下一时刻，根据第一编码器的脉冲累加测量第一直流有刷电机的第二位置信息，将第二位置信息与目标的实时空间几何位置进行比较，得到第二控制偏差；将所述第一控制偏差设置为上一次偏差，将所述第二控制偏差设置为本次偏差。将所述上一次偏差和本次偏差作为位置PID控制器的输入，以使所述位置PID控制器根据预设离散PID算法，计算并输出PWM占空比信号，其中，预设PID算法，如下所示：式中，为上一次偏差，为本次偏差，为本次偏差以及之前所有时刻的偏差的累计和，为比例增益，为积分增益，为微分增益。一实施例中，三个系数、、分别表示比例、积分、微分三个分量，其计算过程，如下所示：在公式括号内第一项是比例项，第二项是积分项，第三项是微分项，是一个系数，为了方便程序编程将公式简化为离散型，则：将每一项前面的系数设为新的一个系数后，可简化为：上述式中，为积分时间常数，为微分时间常数，为PID控制器的输入，为输出的智能跟随小车的位置偏移量，为运算周期。经过多次实验调整、、三个系数，并将调整后的、、三个系数代入预设PID算法中。优选的，对于第二直流有刷电机、第三直流有刷电机和第四直流有刷电机的控制与上述第一直流有刷电机的控制相同，因此，本实施例中不再具体叙述。一实施例中，位置PID控制器基于PID控制算法通过比例、积分、微分三个分量控制的累加和得到控制量调节PWM占空比信号，基于PWM占空比信号，调整第一直流有刷电机设置的预设速度，以使调整第一直流有刷电机的转速。优选的，对于第二直流有刷电机、第三直流有刷电机和第四直流有刷电机的转速的调整与上述对第一直流有刷电机的转速的调整相同，因此，本实施例中不再具体叙述。一实施例中，通过周期性读取目标的空间几何位置及智能跟随小车与目标之间的偏离角，基于三角函数算法对智能跟随小车与目标之间的偏离角的变化进行分析，得到智能跟随小车在下一时刻的偏离方向及偏离角度，基于偏离方向和偏离角度控制所述智能跟随小车的转向。一实施例中，还对所述智能跟随小车设置激光避障模块，所述智能跟随小车在向所述目标移动的过程中，还基于所述激光避障模块，通过IIC协议在30cm范围内进行激光避障。具体的，在所述智能跟随小车对所述目标进行自动跟随时，还控制智能跟随小车在预设范围内发射第一激光信号，并获取反射回来的第二激光信号，获取第一激光信号与所述第二激光信号之间的时间差，基于所述时间差，获取所述智能跟随小车到所述障碍物之间的第一障碍距离，判断所述第一障碍距离是否大于预设障碍距离阈值，若是，则认为智能跟随小车没有检测到障碍物，若否，则判断所述认为智能跟随小车检测到障碍物。一实施例中，当所述智能跟随小车检测到障碍物时，还获取所述智能跟随小车的发射第一激光信号的第一发射角度，基于所述第一发射角度，得到所述障碍物与所述智能跟随小车的相对方向位置。一实施例中，对于智能跟随小车的避障，通过建立一个数学模型，基于设置训练坐标系，并采用GPS模块对智能跟随小车进行全程定位以坐标系X轴、Y轴、Z轴的方向和智能小车的定位进行多方面的模型训练，以使在云端上通过对摄像头进行选型调参可以看到电脑和手机的监控画面和实时路线的规划路线和避障路径的提前规划。其中，对于GPS模块采用NMEA-0183协议输出定位信息，这些定位的经纬度信息采用的是设置训练坐标系，为WGS-84坐标系，把解码得到的经纬度数据输入到谷歌地图，可在地图上定位到正确的位置。实施例2参见图2，图2是本发明提供的一种智能跟随小车的视觉跟随装置的一种实施例的结构示意图，如图2所示，该装置包括目标识别模块201、距离获取模块202和自动跟随模块203，具体如下：所述目标识别模块201，用于获取实时图像，将所述实时图像输入到预训练的目标识别模型中，以使所述目标识别模型对所述实时图像进行目标识别，输出目标。所述距离获取模块202，用于获取智能跟随小车与所述目标的距离，基于所述距离，获取所述目标的实时空间几何位置。所述自动跟随模块203，用于根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，以使所述智能跟随小车对所述目标进行自动跟随。一实施例中，所述目标识别模块201中的预训练的目标识别模型，具体包括：获取目标图像训练样本集，其中，所述目标图像训练样本集包括石头样本图像、沙子样本图像和砖块样本图像；将所述目标图像训练样本集按预设比例划分为训练集和验证集，基于所述训练集对卷积神经网络进行训练，得到初始目标识别模型，并基于所述验证集对所述初始目标识别模型进行调优处理，得到目标识别模型。一实施例中，所述目标识别模块201所述目标识别模型对所述实时图像进行目标识别；具体的，对所述实时图像进行二值化处理，得到二值化图像；对所述二值化图像进行轮廓提取，得到第一图像轮廓，基于所述第一图像轮廓，生成第一轮廓点集合；获取并基于所述第一轮廓点集合中每个轮廓点位置，依次连接每个轮廓点，得到实时图像的轮廓图像，并基于所述轮廓图像，输出对应的目标。一实施例中，所述距离获取模块202，用于获取智能跟随小车与所述目标的距离，具体包括：控制所述智能跟随小车向所述目标发射第一发射信号，以使所述目标接收到所述第一发射信号，并获取所述第一发射信号的第一发射时间和第一接收时间；控制所述目标向所述智能跟随小车发射第二发射信号，以使所述智能跟随小车接收到所述第二发射信号，并获取所述第二发射信号的第二发射时间和第二接收时间；控制所述智能跟随小车向所述目标发射第三发射信号，以使所述目标接收到所述第三发射信号，并获取所述第三发射信号的第三发射时间和第三接收时间；根据所述第一发射时间、所述第一接收时间、所述第二发射时间、所述第二接收时间、所述第三发射时间和所述第三接收时间，计算所述智能跟随小车和所述目标的距离。一实施例中，所述自动跟随模块203，用于根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，具体包括：获取所述智能跟随小车的当前车辆位置，将所述当前车辆位置和所述实时空间几何位置作为位置PID控制器的输入，以使所述位置PID控制器根据预设PID算法，计算并输出PWM占空比信号；基于所述PWM占空比信号调整所述智能跟随小车中第一直流有刷电机和第二直流有刷电机的转速；同时通过三角函数根据所述实时空间几何位置和所述智能跟随小车的当前车辆位置，计算所述智能跟随小车与所述目标的偏离角及偏离方向，以使根据所述偏离角和偏离方向调整所述智能跟随小车的转向。所属领域的技术人员可以清楚的了解到，为描述的方便和简洁，上述描述的装置的具体工作过程，可以参考前述方法实施例中的对应过程，在此不在赘述。需要说明的是，上述智能跟随小车的视觉跟随装置的实施例仅仅是示意性的，其中所述作为分离部件说明的模块可以是或者也可以不是物理上分开的，作为模块显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。在上述的智能跟随小车的视觉跟随方法的实施例的基础上，本发明另一实施例提供了一种智能跟随小车的视觉跟随终端设备，该智能跟随小车的视觉跟随终端设备，包括处理器、存储器以及存储在所述存储器中且被配置为由所述处理器执行的计算机程序，所述处理器执行所述计算机程序时，实现本发明任意一实施例的智能跟随小车的视觉跟随方法。示例性的，在这一实施例中所述计算机程序可以被分割成一个或多个模块，所述一个或者多个模块被存储在所述存储器中，并由所述处理器执行，以完成本发明。所述一个或多个模块可以是能够完成特定功能的一系列计算机程序指令段，该指令段用于描述所述计算机程序在所述智能跟随小车的视觉跟随终端设备中的执行过程。所述智能跟随小车的视觉跟随终端设备可以是桌上型计算机、笔记本、掌上电脑及云端服务器等计算设备。所述智能跟随小车的视觉跟随终端设备可包括，但不仅限于，处理器、存储器。所称处理器可以是中央处理单元，还可以是其他通用处理器、数字信号处理器 、专用集成电路、现成可编程门阵列  或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等，所述处理器是所述智能跟随小车的视觉跟随终端设备的控制中心，利用各种接口和线路连接整个智能跟随小车的视觉跟随终端设备的各个部分。所述存储器可用于存储所述计算机程序和/或模块，所述处理器通过运行或执行存储在所述存储器内的计算机程序和/或模块，以及调用存储在存储器内的数据，实现所述智能跟随小车的视觉跟随终端设备的各种功能。所述存储器可主要包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需的应用程序等；存储数据区可存储根据手机的使用所创建的数据等。此外，存储器可以包括高速随机存取存储器，还可以包括非易失性存储器，例如硬盘、内存、插接式硬盘，智能存储卡，安全数字卡，闪存卡、至少一个磁盘存储器件、闪存器件、或其他易失性固态存储器件。在上述智能跟随小车的视觉跟随方法的实施例的基础上，本发明另一实施例提供了一种存储介质，所述存储介质包括存储的计算机程序，其中，在所述计算机程序运行时，控制所述存储介质所在的设备执行本发明任意一实施例的智能跟随小车的视觉跟随方法。在这一实施例中，上述存储介质为计算机可读存储介质，所述计算机程序包括计算机程序代码，所述计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。所述计算机可读介质可以包括：能够携带所述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。需要说明的是，所述计算机可读介质包含的内容可以根据司法管辖区内立法和专利实践的要求进行适当的增减，例如在某些司法管辖区，根据立法和专利实践，计算机可读介质不包括电载波信号和电信信号。综上，本发明提供的一种智能跟随小车的视觉跟随方法及装置，通过获取实时图像，将所述实时图像输入到预训练的目标识别模型中，以使所述目标识别模型对所述实时图像进行目标识别，输出目标；获取智能跟随小车与所述目标的距离，基于所述距离，获取所述目标的实时空间几何位置；根据所述实时空间几何位置，通过PID控制算法调节所述智能跟随小车的转速和转向，以使所述智能跟随小车对所述目标进行自动跟随，直至所述智能跟随小车移动到所述目标处。与现有技术相比，本发明提供的技术方案能基于智能跟随小车与目标的距离以及目标的实时空间几何位置，实现智能跟随小车的自动跟随，减少了对人工的依赖性，同时提高了工人的工作效率。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明技术原理的前提下，还可以做出若干改进和替换，这些改进和替换也应视为本发明的保护范围。
