标题title
输液液体容量校准方法、装置、电子设备及介质
摘要abst
本申请涉及容量校准领域，提供一种输液液体容量校准方法、装置、电子设备及介质。所述方法包括：根据红外线检测流过软管的流体中是否存在气泡；所述流体由软管流向输液袋；若存在气泡，则根据所述气泡形成的修正模拟信号与所述输液袋空袋时形成的模拟信号，得到流入所述输液袋的流体容量中的液体容量；根据所述液体容量与目标容量之间的差值，对所述输液袋中的液体容量进行补充，直到所述输液袋中的液体容量达到所述目标容量，完成输液液体的校准。本申请实施例提供的输液液体容量校准方法能够保证输入人体的细胞液体的剂量是足量的，从而保证治疗效果。
权利要求书clms
1.一种输液液体容量校准方法，其特征在于，包括：根据红外线检测流过软管的流体中是否存在气泡；所述流体由软管流向输液袋；若存在气泡，则根据所述气泡形成的修正模拟信号与所述输液袋空袋时形成的模拟信号，得到流入所述输液袋的流体容量中的液体容量；根据所述液体容量与目标容量之间的差值，对所述输液袋中的液体容量进行补充，直到所述输液袋中的液体容量达到所述目标容量，完成输液液体的校准。2.根据权利要求1所述的输液液体容量校准方法，其特征在于，所述根据红外线检测流过软管的流体中是否存在气泡，包括：在第一预设位置向所述流体发射第一红外线，在第二预设位置接收第一模拟信号；所述第一预设位置和所述第二预设位置位于所述软管的两侧，所述第一模拟信号为所述第一红外线穿过所述流体后的模拟信号；在第三预设位置向所述流体发射第二红外线，在第四预设位置接收第二模拟信号；所述第三预设位置和所述第四预设位置位于所述软管的两侧，且所述第三预设位置位于所述第一预设位置的下游，所述第二模拟信号为所述第二红外线穿过所述流体后的模拟信号；根据所述第一模拟信号的波形、所述第二模拟信号的波形、单个凹陷波形的持续时长和预设距离，得到疑似气泡的直径；所述单个凹陷波形的持续时长为所述第一模拟信号的波形或所述第二模拟信号的波形中单个凹陷波形从出现到消失的持续时长，所述预设距离为所述第一预设位置和所述第三预设位置的直线距离在所述软管上的投影长度；若所述疑似气泡的直径大于直径阈值，则确定所述流体内存在气泡。3.根据权利要求2所述的输液液体容量校准方法，其特征在于，所述根据所述第一模拟信号的波形、所述第二模拟信号的波形、单个凹陷波形的持续时长和预设距离，得到疑似气泡的直径，包括：利用第二开始时间点减去第一开始时间点，得到第一时间差值绝对值；所述第一开始时间点为所述第一模拟信号的波形中第N个凹陷波形开始出现的时间点，所述第二开始时间点为所述第二模拟信号的波形中第N个凹陷波形开始出现的时间点，其中，N为大于等于1的整数，凹陷波形的顺序按照时间顺序由先到后排列；根据所述预设距离与所述第一时间差值绝对值的比值，得到所述流体的流速；根据所述第一模拟信号的波形中第N个凹陷波形的持续时长，与所述流体的流速的乘积，得到所述疑似气泡的直径；或根据所述第二模拟信号的波形中第N个凹陷波形的持续时长，与所述流体的流速的乘积，得到所述疑似气泡的直径。4.根据权利要求2所述的输液液体容量校准方法，其特征在于，所述根据所述气泡形成的修正模拟信号与所述输液袋空袋时形成的模拟信号，得到流入所述输液袋的流体容量中的液体容量，包括：比对所述第一模拟信号和所述第二模拟信号，若所述第一模拟信号与所述第二模拟信号之间的误差绝对值小于等于误差阈值，则将所述第一模拟信号与所述第二模拟信号进行拟合，得到所述修正模拟信号；在第五预设位置向所述输液袋发射第三红外线，在第六预设位置接收第三模拟信号；所述输液袋为空袋状态，所述第五预设位置和所述第六预设位置位于所述输液袋的入口管路两侧，所述第三模拟信号为所述第三红外线穿过所述入口管路后的模拟信号；将所述修正模拟信号和所述第三模拟信号平移至第一预设时间点和第二预设时间点之间，得到修正模拟信号段和第三模拟信号段；所述第一预设时间点为所述流体开始进入所述输液袋的时间点，所述第二预设时间点为所述输液袋为空袋状态时，晚于所述第一预设时间点的任一时间点；根据所述第一预设时间点、所述第二预设时间点、所述修正模拟信号段和所述第三模拟信号段，得到流入所述输液袋的流体容量中的液体容量。5.根据权利要求4所述的输液液体容量校准方法，其特征在于，所述根据所述第一预设时间点、所述第二预设时间点、所述修正模拟信号段和所述第三模拟信号段，得到流入所述输液袋的流体容量中的液体容量，包括：利用所述第二预设时间点减去所述第一预设时间点，得到第二时间差值绝对值；利用所述修正模拟信号段中的最大电压数字值减去所述第三模拟信号段的空液电压数字值，得到电压数字差值；所述空液电压数字值为所述第三模拟信号段在所述输液袋为空袋状态时任一时间点的电压数字值；根据所述第二时间差值绝对值与所述电压数字差值的乘积，得到待处理总面积；根据所述修正模拟信号段的波形中凹陷波形的凹陷部总面积和所述待处理总面积，得到流入所述输液袋的流体容量中的液体容量。6.根据权利要求5所述的输液液体容量校准方法，其特征在于，所述确定所述流体内存在气泡之后，包括：若所述修正模拟信号段的波形中单个凹陷波形斜率绝对值从最大值到最小值的变化率大于变化率阈值，则所述凹陷波形对应的气泡类型为类圆气泡；若所述修正模拟信号段的波形中单个凹陷波形斜率绝对值从最大值到最小值的变化率大于零且小于等于变化率阈值，则所述凹陷波形对应的气泡类型为类椭圆气泡；根据所述气泡类型，计算所述修正模拟信号段的波形中单个凹陷波形的凹陷面积；加总所述修正模拟信号段中所有单个凹陷波形的凹陷面积，得到加总凹陷面积；将所述加总凹陷面积与所述凹陷部总面积进行比较，以对所述凹陷部总面积进行校验。7.一种输液液体容量校准装置，其特征在于，包括：气泡判定模块，用于：根据红外线检测流过软管的流体中是否存在气泡；所述流体由软管流向输液袋；液体容量计算模块，用于：若存在气泡，则根据所述气泡形成的修正模拟信号与所述输液袋空袋时形成的模拟信号，得到流入所述输液袋的流体容量中的液体容量；输液液体校准模块，用于：根据所述液体容量与目标容量之间的差值，对所述输液袋中的液体容量进行补充，直到所述输液袋中的液体容量达到所述目标容量，完成输液液体的校准。8.根据权利要求7所述的输液液体容量校准装置，其特征在于：所述气泡判定模块，包括：第一红外传感器模块，包括：第一红外发射管，用于：在第一预设位置向所述流体发射第一红外线；第一光电接收器，用于：在第二预设位置接收第一模拟信号；所述第一预设位置和所述第二预设位置位于所述软管的两侧，所述第一模拟信号为所述第一红外线穿过所述流体后的模拟信号；第二红外传感器模块，包括：第二红外发射管，用于：在第三预设位置向所述流体发射第二红外线；第二光电接收器，用于：在第四预设位置接收第二模拟信号；所述第三预设位置和所述第四预设位置位于所述软管的两侧，且所述第三预设位置位于所述第一预设位置的下游，所述第二模拟信号为所述第二红外线穿过所述流体后的模拟信号；直径计算模块，用于：根据所述第一模拟信号的波形、所述第二模拟信号的波形、单个凹陷波形的持续时长和预设距离，得到疑似气泡的直径；所述单个凹陷波形的持续时长为所述第一模拟信号的波形或所述第二模拟信号的波形中单个凹陷波形从出现到消失的持续时长，所述预设距离为所述第一预设位置和所述第三预设位置的直线距离在所述软管上的投影长度；直径比较模块，用于：若所述疑似气泡的直径大于直径阈值，则确定所述流体内存在气泡。9.一种电子设备，包括处理器和存储有计算机程序的存储器，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至6任一项所述的输液液体容量校准方法的步骤。10.一种非暂态计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至6任一项所述的输液液体容量校准方法的步骤。
说明书desc
技术领域本申请涉及容量校准技术领域，具体涉及一种输液液体容量校准方法、装置、电子设备及介质。背景技术在细胞治疗领域，需要将输液袋中定量的细胞液体输送至人体内进行治疗，在此之前，需要先通过软管将细胞液体注入输液袋，在注入过程中，由于各种因素干扰，细胞液体内会产生气泡，导致注入输液袋的并不完全是细胞液体，而是细胞液体与气泡混合的流体，气泡挤占了细胞液体的空间，导致实际注入输液袋的细胞液体容量出现偏差，在需要定量输液治疗时，由于剂量不准确，从而影响治疗效果。发明内容本申请实施例提供一种输液液体容量校准方法、装置、电子设备及介质，用以解决细胞液体内产生气泡，导致实际注入输液袋的细胞液体容量出现偏差，在需要定量输液治疗时，由于剂量不准确，从而影响治疗效果的技术问题。第一方面，本申请实施例提供一种输液液体容量校准方法，包括：根据红外线检测流过软管的流体中是否存在气泡；所述流体由软管流向输液袋；若存在气泡，则根据所述气泡形成的修正模拟信号与所述输液袋空袋时形成的模拟信号，得到流入所述输液袋的流体容量中的液体容量；根据所述液体容量与目标容量之间的差值，对所述输液袋中的液体容量进行补充，直到所述输液袋中的液体容量达到所述目标容量，完成输液液体的校准。在一个实施例中，所述根据红外线检测流过软管的流体中是否存在气泡，包括：在第一预设位置向所述流体发射第一红外线，在第二预设位置接收第一模拟信号；所述第一预设位置和所述第二预设位置位于所述软管的两侧，所述第一模拟信号为所述第一红外线穿过所述流体后的模拟信号；在第三预设位置向所述流体发射第二红外线，在第四预设位置接收第二模拟信号；所述第三预设位置和所述第四预设位置位于所述软管的两侧，且所述第三预设位置位于所述第一预设位置的下游，所述第二模拟信号为所述第二红外线穿过所述流体后的模拟信号；根据所述第一模拟信号的波形、所述第二模拟信号的波形、单个凹陷波形的持续时长和预设距离，得到疑似气泡的直径；所述单个凹陷波形的持续时长为所述第一模拟信号的波形或所述第二模拟信号的波形中单个凹陷波形从出现到消失的持续时长，所述预设距离为所述第一预设位置和所述第三预设位置的直线距离在所述软管上的投影长度；若所述疑似气泡的直径大于直径阈值，则确定所述流体内存在气泡。在一个实施例中，所述根据所述第一模拟信号的波形、所述第二模拟信号的波形、单个凹陷波形的持续时长和预设距离，得到疑似气泡的直径，包括：利用第二开始时间点减去第一开始时间点，得到第一时间差值绝对值；所述第一开始时间点为所述第一模拟信号的波形中第N个凹陷波形开始出现的时间点，所述第二开始时间点为所述第二模拟信号的波形中第N个凹陷波形开始出现的时间点，其中，N为大于等于1的整数，凹陷波形的顺序按照时间顺序由先到后排列；根据所述预设距离与所述第一时间差值绝对值的比值，得到所述流体的流速；根据所述第一模拟信号的波形中第N个凹陷波形的持续时长，与所述流体的流速的乘积，得到所述疑似气泡的直径；或根据所述第二模拟信号的波形中第N个凹陷波形的持续时长，与所述流体的流速的乘积，得到所述疑似气泡的直径。在一个实施例中，所述根据所述气泡形成的修正模拟信号与所述输液袋空袋时形成的模拟信号，得到流入所述输液袋的流体容量中的液体容量，包括：比对所述第一模拟信号和所述第二模拟信号，若所述第一模拟信号与所述第二模拟信号之间的误差绝对值小于等于误差阈值，则将所述第一模拟信号与所述第二模拟信号进行拟合，得到所述修正模拟信号；在第五预设位置向所述输液袋发射第三红外线，在第六预设位置接收第三模拟信号；所述输液袋为空袋状态，所述第五预设位置和所述第六预设位置位于所述输液袋的入口管路两侧，所述第三模拟信号为所述第三红外线穿过所述入口管路后的模拟信号；将所述修正模拟信号和所述第三模拟信号平移至第一预设时间点和第二预设时间点之间，得到修正模拟信号段和第三模拟信号段；所述第一预设时间点为所述流体开始进入所述输液袋的时间点，所述第二预设时间点为所述输液袋为空袋状态时，晚于所述第一预设时间点的任一时间点；根据所述第一预设时间点、所述第二预设时间点、所述修正模拟信号段和所述第三模拟信号段，得到流入所述输液袋的流体容量中的液体容量。在一个实施例中，所述根据所述第一预设时间点、所述第二预设时间点、所述修正模拟信号段和所述第三模拟信号段，得到流入所述输液袋的流体容量中的液体容量，包括：利用所述第二预设时间点减去所述第一预设时间点，得到第二时间差值绝对值；利用所述修正模拟信号段中的最大电压数字值减去所述第三模拟信号段的空液电压数字值，得到电压数字差值；所述空液电压数字值为所述第三模拟信号段在所述输液袋为空袋状态时任一时间点的电压数字值；根据所述第二时间差值绝对值与所述电压数字差值的乘积，得到待处理总面积；根据所述修正模拟信号段的波形中凹陷波形的凹陷部总面积和所述待处理总面积，得到流入所述输液袋的流体容量中的液体容量。在一个实施例中，所述确定所述流体内存在气泡之后，包括：若所述修正模拟信号段的波形中单个凹陷波形斜率绝对值从最大值到最小值的变化率大于变化率阈值，则所述凹陷波形对应的气泡类型为类圆气泡；若所述修正模拟信号段的波形中单个凹陷波形斜率绝对值从最大值到最小值的变化率大于零且小于等于变化率阈值，则所述凹陷波形对应的气泡类型为类椭圆气泡；根据所述气泡类型，计算所述修正模拟信号段的波形中单个凹陷波形的凹陷面积；加总所述修正模拟信号段中所有单个凹陷波形的凹陷面积，得到加总凹陷面积；将所述加总凹陷面积与所述凹陷部总面积进行比较，以对所述凹陷部总面积进行校验。第二方面，本申请实施例提供一种输液液体容量校准装置，包括：气泡判定模块，用于：根据红外线检测流过软管的流体中是否存在气泡；所述流体由软管流向输液袋；液体容量计算模块，用于：若存在气泡，则根据所述气泡形成的修正模拟信号与所述输液袋空袋时形成的模拟信号，得到流入所述输液袋的流体容量中的液体容量；输液液体校准模块，用于：根据所述液体容量与目标容量之间的差值，对所述输液袋中的液体容量进行补充，直到所述输液袋中的液体容量达到所述目标容量，完成输液液体的校准。在一个实施例中，所述气泡判定模块，包括：第一红外传感器模块，包括：第一红外发射管，用于：在第一预设位置向所述流体发射第一红外线；第一光电接收器，用于：在第二预设位置接收第一模拟信号；所述第一预设位置和所述第二预设位置位于所述软管的两侧，所述第一模拟信号为所述第一红外线穿过所述流体后的模拟信号；第二红外传感器模块，包括：第二红外发射管，用于：在第三预设位置向所述流体发射第二红外线；第二光电接收器，用于：在第四预设位置接收第二模拟信号；所述第三预设位置和所述第四预设位置位于所述软管的两侧，且所述第三预设位置位于所述第一预设位置的下游，所述第二模拟信号为所述第二红外线穿过所述流体后的模拟信号；直径计算模块，用于：根据所述第一模拟信号的波形、所述第二模拟信号的波形、单个凹陷波形的持续时长和预设距离，得到疑似气泡的直径；所述单个凹陷波形的持续时长为所述第一模拟信号的波形或所述第二模拟信号的波形中单个凹陷波形从出现到消失的持续时长，所述预设距离为所述第一预设位置和所述第三预设位置的直线距离在所述软管上的投影长度；直径比较模块，用于：若所述疑似气泡的直径大于直径阈值，则确定所述流体内存在气泡。第三方面，本申请实施例提供一种电子设备，包括处理器和存储有计算机程序的存储器，所述处理器执行所述程序时实现第一方面所述的输液液体容量校准方法的步骤。第四方面，本申请实施例提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现第一方面所述的输液液体容量校准方法的步骤。本申请实施例提供的输液液体容量校准方法、装置、电子设备及介质，利用红外线照射软管中的气泡形成的模型信号，以及红外线照射空袋状态的输液袋形成的模型信号，得到流入输液袋的流体容量中的液体容量，从而能够确定该液体容量相对目标容量的偏差并进行容量补充，最终使得液体容量达到目标容量，完成液体容量的校准，在进行细胞治疗时，能够保证输入人体的细胞液体的剂量是足量的，从而保证治疗效果。附图说明为了更清楚地说明本申请或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本申请实施例提供的输液液体容量校准方法的流程示意图之一；图2是本申请实施例提供的输液液体容量校准方法的流程示意图之二；图3是本申请实施例提供的输液液体容量校准方法的流程示意图之三；图4是本申请实施例提供的输液液体容量校准方法的流程示意图之四；图5是本申请实施例提供的修正模拟信号和第三模拟信号平移至第一预设时间点和第二预设时间点之间的波形示意图；图6是本申请实施例提供的输液液体容量校准方法的流程示意图之五；图7为本申请实施例提供的输液液体容量校准装置的结构示意图；图8为本申请实施例提供的输液液体容量校准装置中气泡判定模块的结构示意图；图9是本申请实施例提供的电子设备的结构示意图。具体实施方式为使本申请的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。图1是本申请实施例提供的输液液体容量校准方法的流程示意图之一。参照图1，本申请实施例提供一种输液液体容量校准方法，可以包括：101、根据红外线检测流过软管的流体中是否存在气泡；该流体由软管流向输液袋。102、若存在气泡，则根据气泡形成的修正模拟信号与输液袋空袋时形成的模拟信号，得到流入输液袋的流体容量中的液体容量；由于流入输液袋的液体通常会掺杂一定量的气体，形成流体，因此，实际流入输液袋的液体容量是少于流体容量的。103、根据该液体容量与目标容量之间的差值，对输液袋中的液体容量进行补充，直到输液袋中的液体容量达到目标容量，完成输液液体的校准。需要说明的是，由于软管到输液袋的流路相对封闭，因此，在流体从软管流入输液袋的过程中，气泡的形态和数量并不会有明显变化，即可以通过检测流过软管的流体中的气泡情况，来表征流入输液袋中的流体中的气泡情况。本实施例提供的输液液体容量校准方法，利用红外线照射软管中的气泡形成的模型信号，以及红外线照射空袋状态的输液袋形成的模型信号，得到流入输液袋的流体容量中的液体容量，从而能够确定该液体容量相对目标容量的偏差并进行容量补充，最终使得液体容量达到目标容量，完成液体容量的校准，在进行细胞治疗时，能够保证输入人体的细胞液体的剂量是足量的，从而保证治疗效果。图2是本申请实施例提供的输液液体容量校准方法的流程示意图之二。参照图2，在一个实施例中，根据红外线检测流过软管的流体中是否存在气泡，可以包括：201、在第一预设位置向流体发射第一红外线，在第二预设位置接收第一模拟信号；第一预设位置和第二预设位置位于软管的两侧，第一模拟信号为第一红外线穿过流体后的模拟信号。第一红外线的波长可以为850纳米，发射角度可以为±10度，即第一预设位置与第二预设位置的连线，与第一预设位置或第二预设位置到软管的垂直线之间的夹角可以为±10度。202、在第三预设位置向流体发射第二红外线，在第四预设位置接收第二模拟信号；第三预设位置和第四预设位置位于软管的两侧，且第三预设位置位于第一预设位置的下游，第二模拟信号为第二红外线穿过流体后的模拟信号。第二红外线的波长可以为850纳米，发射角度可以为±10度，即第三预设位置与第四预设位置的连线，与第三预设位置或第四预设位置到软管的垂直线之间的夹角可以为±10度。需要说明的是，第一预设位置和第三预设位置可以位于软管的同侧，也可以位于软管的异侧，此处不作限定，当第一预设位置和第三预设位置位于软管的同侧时，第二预设位置和第四预设位置也位于软管的同侧，当第一预设位置和第三预设位置位于软管的异侧时，第二预设位置和第四预设位置也位于软管的异侧。203、根据第一模拟信号的波形、第二模拟信号的波形、单个凹陷波形的持续时长和预设距离，得到疑似气泡的直径；单个凹陷波形的持续时长为第一模拟信号的波形或第二模拟信号的波形中单个凹陷波形从出现到消失的持续时长，预设距离为第一预设位置和第三预设位置的直线距离在软管上的投影长度，该投影长度可以为16.5毫米。若流体中存在气泡，则红外线经过气泡时，由于气泡对光的折射和吸收，通过气泡后的红外线的电压数字值会受到影响，第一模拟信号的波形和第二模拟信号的波形会呈现凹陷状态，因此，可以根据第一模拟信号的波形、第二模拟信号的波形、单个凹陷波形的持续时长和预设距离，对疑似气泡进行分析。需要说明的是，由于第三预设位置位于第一预设位置的下游，若流体中存在气泡，气泡在第一模拟信号上的体现必然先于其在第二模拟信号上的体现，因此，可以在第一模拟信号上出现凹陷形态的波形时，再触发第三预设位置的红外线发射以及第四预设位置的模拟信号接收，提高第二模拟信号采集成功率，避免在流体中不存在气泡或存在很少气泡时仍旧实时采集第二模拟信号，造成资源浪费。204、若疑似气泡的直径大于直径阈值，则确定流体内存在气泡。该直径阈值可以为2毫米，即当疑似气泡的直径大于2毫米时，确定该疑似气泡确实为气泡。本实施例在软管侧边的两个不同的位置向软管内的流体发送红外线，根据接收到的模拟信号、模拟信号中的凹陷波形持续时长以及红外线发射位置的距离确定疑似气泡的直径，通过直径大小判定疑似气泡是否确实为气泡，本实施例能够通过红外线的发射和接收识别流体中的微小气泡，有助于后续对流体中液体容量的评估。图3是本申请实施例提供的输液液体容量校准方法的流程示意图之三。参照图3，在一个实施例中，根据第一模拟信号的波形、第二模拟信号的波形、单个凹陷波形的持续时长和预设距离，得到疑似气泡的直径，可以包括：301、利用第二开始时间点减去第一开始时间点，得到第一时间差值绝对值；第一开始时间点为第一模拟信号的波形中第N个凹陷波形开始出现的时间点，第二开始时间点为第二模拟信号的波形中第N个凹陷波形开始出现的时间点，其中，N为大于等于1的整数，凹陷波形的顺序按照时间顺序由先到后排列。由于流体在相对封闭的环境中流动，因此疑似气泡在软管中流动时的形态和数量并不会显著变化，即第一模拟信号和第二模拟信号的波形是类似的，同一个疑似气泡在第一模拟信号对应的凹陷波形顺序，与在第二模拟信号对应的凹陷波形顺序是一致的，例如，某个疑似气泡在第一模拟信号对应的是第三个凹陷波形，则该疑似气泡在第二模拟信号对应的也是第三个凹陷波形，第一模拟信号和第二模拟信号上凹陷波形的顺序按照时间顺序由先到后排列。需要说明的是，也可以选取第一模拟信号的波形中第N个凹陷波形完全消失的时间点，以及第一模拟信号的波形中第N个凹陷波形完全消失的时间点来计算第一时间差值绝对值，此处不作限定，只要保证是针对同一个疑似气泡在第一模拟信号和第二模拟信号的凹陷波形中选取相同状态对应的时间点即可。另外，第一模拟信号的波形中凹陷波形的数量即为流经软管的流体中疑似气泡的数量，第二模拟信号同理。302、根据预设距离与第一时间差值绝对值的比值，得到流体的流速；流体的流速即为疑似气泡的流速。303、根据第一模拟信号的波形中第N个凹陷波形的持续时长，与流体的流速的乘积，得到疑似气泡的直径；或根据第二模拟信号的波形中第N个凹陷波形的持续时长，与流体的流速的乘积，得到疑似气泡的直径。即将第一模拟信号的波形中第N个凹陷波形的持续时长乘以疑似气泡的流速，得到疑似气泡的直径，或将第二模拟信号的波形中第N个凹陷波形的持续时长乘以疑似气泡的流速，得到疑似气泡的直径。本实施例通过选取同一疑似气泡在第一模拟信号和第二模拟信号中处于相同状态时的时间点之差，作为该疑似气泡流过软管特定距离的时间差，再利用该特定距离除以该时间差，得到该疑似气泡的流速，最后用该疑似气泡的流速，乘以该疑似气泡流过第一预设位置或第三预设位置的红外线照射点所用时间，得到该疑似气泡的直径，通过红外线的模拟信号，能够更加精准的衡量疑似气泡在不同模拟信号出现的时间差和同一疑似气泡经过红外线照射点所用的时间，使得疑似气泡的直径计算更为精确。图4是本申请实施例提供的输液液体容量校准方法的流程示意图之四；图5是本申请实施例提供的修正模拟信号和第三模拟信号平移至第一预设时间点和第二预设时间点之间的波形示意图；参照图4-5，在一个实施例中，根据气泡形成的修正模拟信号与输液袋空袋时形成的模拟信号，得到流入输液袋的流体容量中的液体容量，可以包括：401、比对第一模拟信号和第二模拟信号，若第一模拟信号与第二模拟信号之间的误差绝对值小于等于误差阈值，则将第一模拟信号与第二模拟信号进行拟合，得到修正模拟信号。由于气泡表面或液体内可能存在杂质，导致气泡和液体在运动过程中对接收的模拟信号产生干扰，使得第一模拟信号和第二模拟信号的波形类似，但存在偏差，因此可在偏差在可接受范围内时，将第一模拟信号和第二模拟信号进行拟合，过滤掉噪声和杂波，以消除偏差。得到更能表征气泡状态的修正模拟信号。402、在第五预设位置向输液袋发射第三红外线，在第六预设位置接收第三模拟信号；输液袋为空袋状态，第五预设位置和第六预设位置位于输液袋的入口管路两侧，第三模拟信号为第三红外线穿过入口管路后的模拟信号。由于输液袋处于空袋状态，即入口管路处于空液状态，因此，第三模拟信号的波形不受液体和气泡干扰，呈现为一条固定电压数字值的水平线。403、将修正模拟信号和第三模拟信号平移至第一预设时间点和第二预设时间点之间，得到修正模拟信号段和第三模拟信号段；第一预设时间点t1为流体开始进入输液袋的时间点，第二预设时间点t2为为输液袋为空袋状态时，晚于第一预设时间点的任一时间点。由于第三模拟信号为输液袋空袋状态时测得的模拟信号，修正模拟信号为软管中存在气泡和体液时测得的模拟信号，因此，第三模拟信号段的电压数字值要低于修正模拟信号段的电压数字值，呈现为修正模拟信号段的凹陷波形下方的一条水平线，如图5所示。404、利用第二预设时间点减去第一预设时间点，得到第二时间差值绝对值；405、利用修正模拟信号段中的最大电压数字值减去第三模拟信号段的空液电压数字值，得到电压数字差值；该空液电压数字值为第三模拟信号段在输液袋为空袋状态时任一时间点的电压数字值，由于第三模拟信号段的波形为一条水平线，因此任意时间点的电压数字值相等，即任一时间点的空液电压数字值相等。406、根据第二时间差值绝对值与电压数字差值的乘积，得到待处理总面积；407、根据修正模拟信号段的波形中凹陷波形的凹陷部总面积和待处理总面积，得到流入输液袋的流体容量中的液体容量。即待处理总面积表征第一预设时间到第二预设时间内流入输液袋的流体容量，修正模拟信号段的波形中凹陷波形的凹陷部总面积表征该流体容量中的气泡体积，其中，气泡体积可以换算为容量单位后再进行运算。例如，若修正模拟信号段的波形中凹陷波形的凹陷部总面积为A，待处理总面积为B，第一预设时间到第二预设时间内流入输液袋的流体容量为L，则流入输液袋的流体容量中的液体容量为，假定目标容量为C，则可以用C减去该液体容量，得到需要补充的液体容量并以此为标准进行液体容量进行补充，直到输液袋中的液体容量达到该目标容量，完成输液液体的校准。其中，第一预设时间到第二预设时间内流入输液袋的流体容量可以通过在第一预设位置的上游设置的用于运输液体的蠕动泵获得，蠕动泵转动运输的流量就为流体容量，即蠕动泵转动的单位圈数可以一一对应确定出移动液体的单位容量，利用第一预设时间到第二预设时间内的单位容量与转动圈数的乘积即可得到第一预设时间到第二预设时间内流入输液袋的流体容量。需要说明的是，可以从第一预设时间点t1开始，每间隔特定时间，如0.5秒在修正模拟信号段和第三模拟信号段上进行采样，并根据采样结果对修正模拟信号段的波形中凹陷波形的凹陷部面积进行累计，对修正模拟信号段和第三模拟信号段之间的面积进行累计，直到最后一次采样时间到达第二预设时间点t2为止，通过各面积的累计得到修正模拟信号段的波形中凹陷波形的凹陷部总面积和待处理总面积，进而得到流入输液袋的流体容量中的液体容量。进一步地，不同的细胞液体，对红外光的衰减、放大强度是不同的，可以通过判断细胞液体的电压数字值并进行大量数据测试和数值标定，识别软管内的液体成分，例如红细胞液体的电压数字值范围在300-550之间，单核细胞PBMC液体的电压数字值范围在900-1100之间，盐水的电压数字值范围在1200-1300之间。本实施例通过拟合第一模拟信号和第二模拟信号，将气泡的模拟信号进行修正，再将修正模拟信号和空袋状态的输液袋的第三模拟信号平移至第一预设时间点和第二预设时间点之间，通过两个模拟信号波形形成的面积来表征流体容量中的液体容量，能够使得液体容量的测算更为精准，进而能够对液体容量进行更精准的补充，使得液体容量尽快达到目标容量。图6是本申请实施例提供的输液液体容量校准方法的流程示意图之五；参照图6，在一个实施例中，确定流体内存在气泡之后，可以包括：601、若修正模拟信号段的波形中单个凹陷波形斜率绝对值从最大值到最小值的变化率大于变化率阈值，则该凹陷波形对应的气泡类型为类圆气泡；602、若修正模拟信号段的波形中单个凹陷波形斜率绝对值从最大值到最小值的变化率大于零且小于等于变化率阈值，则该凹陷波形对应的气泡类型为类椭圆气泡；603、根据气泡类型，计算修正模拟信号段的波形中单个凹陷波形的凹陷面积；对类圆气泡采用圆形面积计算公式进行凹陷面积计算，对类椭圆气泡采用椭圆面积计算公式进行凹陷面积计算。604、加总修正模拟信号段中所有单个凹陷波形的凹陷面积，得到加总凹陷面积；605、将加总凹陷面积与凹陷部总面积进行比较，以对凹陷部总面积进行校验。若加总凹陷面积与凹陷部总面积相等，则校验通过，加总凹陷面积与凹陷部总面积不相等，则校验不通过。本实施例中，由于单个凹陷波形与气泡实际形态较为类似，因此能够通过修正模拟信号段的波形中单个凹陷波形斜率的变化快慢来判定气泡的形态，当斜率变化较快时，说明气泡表面曲线的弯曲程度较大，则气泡类型为类圆形气泡，当斜率变化较慢时，说明气泡表面曲线的弯曲程度较小，则气泡类型为类椭圆形气泡，再根据气泡类型计算单个凹陷波形的凹陷面积，并利用加总凹陷面积对凹陷部总面积进行校验，能够识别修正模拟信号段凹陷部总面积的计量误差，有助于对该凹陷部总面积进行修正，以便后续得到更为精准的输液液体容量。下面对本申请实施例提供的输液液体容量校准装置进行描述，下文描述的输液液体容量校准装置与上文描述的输液液体容量校准方法可相互对应参照。图7为本申请实施例提供的输液液体容量校准装置的结构示意图；图8为本申请实施例提供的输液液体容量校准装置中气泡判定模块的结构示意图；参照图7-8，本申请实施例提供一种输液液体容量校准装置，可以包括：气泡判定模块701，用于：根据红外线检测流过软管的流体中是否存在气泡；所述流体由软管流向输液袋；液体容量计算模块702，用于：若存在气泡，则根据所述气泡形成的修正模拟信号与所述输液袋空袋时形成的模拟信号，得到流入所述输液袋的流体容量中的液体容量；输液液体校准模块703，用于：根据所述液体容量与目标容量之间的差值，对所述输液袋中的液体容量进行补充，直到所述输液袋中的液体容量达到所述目标容量，完成输液液体的校准。本申请实施例提供的输液液体容量校准装置，利用红外线照射软管中的气泡形成的模型信号，以及红外线照射空袋状态的输液袋形成的模型信号，得到流入输液袋的流体容量中的液体容量，从而能够确定该液体容量相对目标容量的偏差并进行容量补充，最终使得液体容量达到目标容量，完成液体容量的校准，在进行细胞治疗时，能够保证输入人体的细胞液体的剂量是足量的，从而保证治疗效果。在一个实施例中，气泡判定模块701，包括：第一红外传感器模块801，包括：第一红外发射管，用于：在第一预设位置向所述流体发射第一红外线；第一光电接收器，用于：在第二预设位置接收第一模拟信号；所述第一预设位置和所述第二预设位置位于所述软管的两侧，所述第一模拟信号为所述第一红外线穿过所述流体后的模拟信号；第二红外传感器模块802，包括：第二红外发射管，用于：在第三预设位置向所述流体发射第二红外线；第二光电接收器，用于：在第四预设位置接收第二模拟信号；所述第三预设位置和所述第四预设位置位于所述软管的两侧，且所述第三预设位置位于所述第一预设位置的下游，所述第二模拟信号为所述第二红外线穿过所述流体后的模拟信号；直径计算模块803，用于：根据所述第一模拟信号的波形、所述第二模拟信号的波形、单个凹陷波形的持续时长和预设距离，得到疑似气泡的直径；所述单个凹陷波形的持续时长为所述第一模拟信号的波形或所述第二模拟信号的波形中单个凹陷波形从出现到消失的持续时长，所述预设距离为所述第一预设位置和所述第三预设位置的直线距离在所述软管上的投影长度；直径比较模块804，用于：若所述疑似气泡的直径大于直径阈值，则确定所述流体内存在气泡。其中，第一红外传感器模块801和第二红外传感器模块802可以被封装在同一个红外气泡传感器模块中，该红外气泡传感器模块可以是硅光电传感器模块。可以将第一光电接收器和第二光电接收器连接至差分运算放大器，对微弱的电压信号进行采集、放大，提高信噪比，放大的信号输出至微控制单元MCU自带的电压数字外设转换为数字信号，主控MCU将气泡直径数据、细胞液体成份数据以及气泡形态数据存放至寄存器中，在实际使用时，通过主机获取传感器的实时状态。在一个实施例中，直径计算模块803具体用于：利用第二开始时间点减去第一开始时间点，得到第一时间差值绝对值；所述第一开始时间点为所述第一模拟信号的波形中第N个凹陷波形开始出现的时间点，所述第二开始时间点为所述第二模拟信号的波形中第N个凹陷波形开始出现的时间点，其中，N为大于等于1的整数，凹陷波形的顺序按照时间顺序由先到后排列；根据所述预设距离与所述第一时间差值绝对值的比值，得到所述流体的流速；根据所述第一模拟信号的波形中第N个凹陷波形的持续时长，与所述流体的流速的乘积，得到所述疑似气泡的直径；或根据所述第二模拟信号的波形中第N个凹陷波形的持续时长，与所述流体的流速的乘积，得到所述疑似气泡的直径。在一个实施例中，液体容量计算模块702具体用于：比对所述第一模拟信号和所述第二模拟信号，若所述第一模拟信号与所述第二模拟信号之间的误差绝对值小于等于误差阈值，则将所述第一模拟信号与所述第二模拟信号进行拟合，得到所述修正模拟信号；在第五预设位置向所述输液袋发射第三红外线，在第六预设位置接收第三模拟信号；所述输液袋为空袋状态，所述第五预设位置和所述第六预设位置位于所述输液袋的入口管路两侧，所述第三模拟信号为所述第三红外线穿过所述入口管路后的模拟信号；将所述修正模拟信号和所述第三模拟信号平移至第一预设时间点和第二预设时间点之间，得到修正模拟信号段和第三模拟信号段；所述第一预设时间点为所述流体开始进入所述输液袋的时间点，所述第二预设时间点为所述输液袋为空袋状态时，晚于所述第一预设时间点的任一时间点；根据所述第一预设时间点、所述第二预设时间点、所述修正模拟信号段和所述第三模拟信号段，得到流入所述输液袋的流体容量中的液体容量。在一个实施例中，液体容量计算模块702具体用于：利用所述第二预设时间点减去所述第一预设时间点，得到第二时间差值绝对值；利用所述修正模拟信号段中的最大电压数字值减去所述第三模拟信号段的空液电压数字值，得到电压数字差值；所述空液电压数字值为所述第三模拟信号段在所述输液袋为空袋状态时任一时间点的电压数字值；根据所述第二时间差值绝对值与所述电压数字差值的乘积，得到待处理总面积；根据所述修正模拟信号段的波形中凹陷波形的凹陷部总面积和所述待处理总面积，得到流入所述输液袋的流体容量中的液体容量。在一个实施例中，还包括面积校验模块，用于：若所述修正模拟信号段的波形中单个凹陷波形斜率绝对值从最大值到最小值的变化率大于变化率阈值，则所述凹陷波形对应的气泡类型为类圆气泡；若所述修正模拟信号段的波形中单个凹陷波形斜率绝对值从最大值到最小值的变化率大于零且小于等于变化率阈值，则所述凹陷波形对应的气泡类型为类椭圆气泡；根据所述气泡类型，计算所述修正模拟信号段的波形中单个凹陷波形的凹陷面积；加总所述修正模拟信号段中所有单个凹陷波形的凹陷面积，得到加总凹陷面积；将所述加总凹陷面积与所述凹陷部总面积进行比较，以对所述凹陷部总面积进行校验。图9示例了一种电子设备的实体结构示意图，如图9所示，该电子设备可以包括：处理器910、通信接口920、存储器930和通信总线940，其中，处理器910，通信接口920，存储器930通过通信总线940完成相互间的通信。处理器910可以调用存储器930中的计算机程序，以执行输液液体容量校准方法的步骤，例如包括：根据红外线检测流过软管的流体中是否存在气泡；所述流体由软管流向输液袋；若存在气泡，则根据所述气泡形成的修正模拟信号与所述输液袋空袋时形成的模拟信号，得到流入所述输液袋的流体容量中的液体容量；根据所述液体容量与目标容量之间的差值，对所述输液袋中的液体容量进行补充，直到所述输液袋中的液体容量达到所述目标容量，完成输液液体的校准。此外，上述的存储器930中的逻辑指令可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。另一方面，本申请实施例还提供一种计算机程序产品，所述计算机程序产品包括计算机程序，所述计算机程序可存储在非暂态计算机可读存储介质上，所述计算机程序被处理器执行时，计算机能够执行上述各实施例所提供的输液液体容量校准方法的步骤，例如包括：根据红外线检测流过软管的流体中是否存在气泡；所述流体由软管流向输液袋；若存在气泡，则根据所述气泡形成的修正模拟信号与所述输液袋空袋时形成的模拟信号，得到流入所述输液袋的流体容量中的液体容量；根据所述液体容量与目标容量之间的差值，对所述输液袋中的液体容量进行补充，直到所述输液袋中的液体容量达到所述目标容量，完成输液液体的校准。另一方面，本申请实施例还提供一种处理器可读存储介质，所述处理器可读存储介质存储有计算机程序，所述计算机程序用于使处理器执行上述各实施例提供的方法的步骤，例如包括：根据红外线检测流过软管的流体中是否存在气泡；所述流体由软管流向输液袋；若存在气泡，则根据所述气泡形成的修正模拟信号与所述输液袋空袋时形成的模拟信号，得到流入所述输液袋的流体容量中的液体容量；根据所述液体容量与目标容量之间的差值，对所述输液袋中的液体容量进行补充，直到所述输液袋中的液体容量达到所述目标容量，完成输液液体的校准。所述处理器可读存储介质可以是处理器能够存取的任何可用介质或数据存储设备，包括但不限于磁性存储器等）、光学存储器、以及半导体存储器、固态硬盘）等。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分所述的方法。最后应说明的是：以上实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围。
