标题title
一种普适焊接起弧连续性实时检测方法及系统
摘要abst
本发明公开了一种普适焊接起弧连续性实时检测方法及系统，该检测方法包括：首先对采集的高频电流数据进行滑窗采样，并根据已知的起弧点和熄弧点为样本打标注，生成数据样本集；而后搭建融合深度可分卷积与膨胀因果卷积的神经网络模型，并利用生成的数据样本集进行训练，得到焊接起弧连续性检测模型；最后获取新的实时高频电流数据，输入到训练好的检测模型中进行预测，实时输出起弧点和熄弧点。本发明采用电焊机普遍具备的焊接电流信号，结合深度学习和无特征构造的卷积神经网络训练方法，设计了一种普适、准确、实时的起弧连续性检测方法，能够对焊接过程中的起弧事件和熄弧事件进行实时智能检测。
权利要求书clms
1.一种普适焊接起弧连续性实时检测方法，其特征在于，包括以下步骤：步骤1：对采集的高频电流数据进行滑窗构造样本，并根据已知的起弧点和熄弧点为每个样本打标注，生成数据样本集；步骤2：搭建融合深度可分卷积与膨胀因果卷积的神经网络模型，并利用生成的数据样本集进行训练，得到焊接起弧连续性检测模型；步骤3：获取新的实时高频电流数据，按照设定窗长输入到训练好的焊接起弧连续性检测模型中进行预测，实时输出起弧点和熄弧点。2.根据权利要求1所述的一种普适焊接起弧连续性实时检测方法，其特征在于，所述步骤1具体包括：步骤1.1：将采集的高频电流数据按照设定窗长window_size进行滑窗构造样本；步骤1.2：将样本中起弧开始的时间点记为start_point，熄弧结束的时间点记为end_point，若样本中没有起弧点则start_point=0，若样本中没有熄弧点且样本中不存在焊接则end_point=0，若样本中没有熄弧点且样本中存在焊接则end_point=window_size，由此生成样本标签；步骤1.3：将生成的所有样本随机乱序，并按照设定比例划分为训练集、测试集和验证集。3.根据权利要求1所述的一种普适焊接起弧连续性实时检测方法，其特征在于，所述步骤2中搭建的神经网络模型包括：输入层、一维卷积层、至少四个网络模块、池化层、Dropout层和全连接层，其中每个网络模块包含至少两个倒残差网络块，所述倒残差网络块包含两个卷积核大小为1*1的一维卷积网络层以及一个融合深度卷积与膨胀因果卷积的一维卷积网络层。4.根据权利要求3所述的一种普适焊接起弧连续性实时检测方法，其特征在于，所述网络模块还包含一个降维网络块，所述降维网络块包含两个卷积核大小为1*1的一维卷积网络层以及一个卷积核大小为3*3的一维深度卷积网络层。5.根据权利要求1所述的一种普适焊接起弧连续性实时检测方法，其特征在于，还包括步骤4：通过以下逻辑判断对模型预测结果进行校正：a、若start_point/window_size＜th1，则令start_point=0；b、若end_point/window_size＜th1，则令end_point=0；c、若end_point/window_size＞th2，则令end_point=window_size；d、若前一窗口的end_point/window_size与后一窗口的start_point/window_size之间的距离小于th3，则令后一窗口的start_point=0，其中th1、th2、th3分别为设定阈值。6.一种普适焊接起弧连续性实时检测系统，其特征在于，包括数据采集模块和数据处理模块，其中数据处理模块利用权利要求1~5任一所述检测方法，根据数据采集模块所采集的高频电流数据进行焊接起弧连续性的实时检测。7.根据权利要求6所述的一种普适焊接起弧连续性实时检测系统，其特征在于，所述数据采集模块采用高频电流传感器，且数据处理模块采用嵌入式终端。
说明书desc
技术领域本发明涉及一种普适焊接起弧连续性实时检测方法及系统，属于自动化焊接技术领域。背景技术智能化焊接是智能制造领域中最重要的研究课题之一。而传感技术及其信息处理则是实现焊接过程智能化及自动化的关键要素。近年来，具有小型化、无接触式及大传输量等特点的传感技术更多地被应用到焊接过程及质量实时控制中，但更多的关注点集中在焊接的缺陷检测方面，目前还没有人通过传感数据进行焊接起弧的连续性检测。焊接起弧连续性检测是指检测每次焊接的起弧时间和结束时间，这在焊接技术中具有非常重要的作用，起弧连续性跟焊接质量以及焊工的能力都紧密相关。一方面，频繁起弧，即起弧连续性过短，会造成焊接一致性问题，导致焊接接头过多，更容易存在缺陷隐患；另一方面，起弧连续性能够反映出焊工的操作能力，通过起弧连续性检测可以统计焊工每天的长时焊接和短时焊接，对工艺和人员绩效评价都具有非常重要的意义。考虑到焊接过程充满剧烈光、热和噪声，当前的焊接起弧连续性检测主要依靠焊接完成后的视觉检查和抽检，具有检测不准确、延迟大、闭环管控难等缺陷。发明内容发明目的：针对现有技术所存在的问题，本发明采用电焊机普遍具备的焊接电流信号，结合深度学习和无特征构造的卷积神经网络训练方法，设计一种普适、准确、实时的起弧连续性检测方法，能够对焊接过程中的起弧事件和熄弧事件进行实时智能检测。技术方案：为实现上述目的，本发明提供一种普适焊接起弧连续性实时检测方法，包括以下步骤：步骤1：对采集的高频电流数据进行滑窗构造样本，并根据已知的起弧点和熄弧点为每个样本打标注，生成数据样本集；步骤2：搭建融合深度可分卷积与膨胀因果卷积的神经网络模型，并利用生成的数据样本集进行训练，得到焊接起弧连续性检测模型；步骤3：获取新的实时高频电流数据，按照设定窗长输入到训练好的焊接起弧连续性检测模型中进行预测，实时输出起弧点和熄弧点。进一步的，所述步骤1具体包括：步骤1.1：将采集的高频电流数据按照设定窗长window_size进行滑窗构造样本；步骤1.2：将样本中起弧开始的时间点记为start_point，熄弧结束的时间点记为end_point，若样本中没有起弧点则start_point=0，若样本中没有熄弧点且样本中不存在焊接则end_point=0，若样本中没有熄弧点且样本中存在焊接则end_point=window_size，由此生成样本标签；步骤1.3：将生成的所有样本随机乱序，并按照设定比例划分为训练集、测试集和验证集。进一步的，所述步骤2中搭建的神经网络模型包括：输入层、一维卷积层、至少四个网络模块、池化层、Dropout层和全连接层，其中每个网络模块包含至少两个倒残差网络块，所述倒残差网络块包含两个卷积核大小为1*1的一维卷积网络层以及一个融合深度卷积与膨胀因果卷积的一维卷积网络层。以IOU为评估指标，融合深度可分卷积与膨胀因果卷积的神经网络模型对起弧连续性检测的准确率相较于普通TCN神经网络提升了12%，且网络参数量是普通TCN神经网络的四十分之一，仅仅为0.4Million的参数量，这使得训练好的起弧连续性检测模型可以直接部署在嵌入式终端进行模型推理，不需要将高频时序数据上传到云端，避免了信号通信和云端处理，让焊接实时检测成为可能。进一步的，所述网络模块还包含一个降维网络块，所述降维网络块包含两个卷积核大小为1*1的一维卷积网络层以及一个卷积核大小为3*3的一维深度卷积网络层。降维网络块的加入是为了降低输出序列长度，这样随着网络层数的堆叠，网络通道数不断增加，由于序列长度不断缩减，网络参数量能够进一步降低，否则通道数不断增加之后会导致参数爆炸，网络难以训练，出现内存不足的报错。进一步的，该检测方法还包括步骤4：通过以下逻辑判断对模型预测结果进行校正：a、若start_point/window_size＜th1，则令start_point=0；b、若end_point/window_size＜th1，则令end_point=0；c、若end_point/window_size＞th2，则令end_point=window_size；d、若前一窗口的end_point/window_size与后一窗口的start_point/window_size之间的距离小于th3，则令后一窗口的start_point=0，即不算一次新的起弧，起弧连续性未中断，其中th1、th2、th3分别为设定阈值。此外，本发明还提供了一种普适焊接起弧连续性实时检测系统，包括数据采集模块和数据处理模块，其中数据处理模块利用上述起弧连续性实时检测方法，根据数据采集模块所采集的高频电流数据进行焊接起弧连续性的实时预测。进一步的，所述数据采集模块采用高精度电流传感器，数据处理模块采用嵌入式终端，用于部署上述检测模型以及逻辑规则，进行焊接起弧连续性的实时检测。有益效果：本发明所提供的一种普适焊接起弧连续性实时检测方法及系统，相对于现有技术，具有以下优点：1、围绕焊接电流变化各异、难以用特定特征进行描述的特点，本发明设计了一种无需构造特征、可以直接训练的卷积神经网络，一方面降低了数据建模的难度，另一方面模型本身具备轻量级的特点，网络参数量仅为0.4Million，是常见网络结构例如GoogleNet6.8Million参数量的10%以下，因此可以运行在廉价的嵌入式终端硬件上，不再需要将数据上传到云端，让现场的“实时检测”成为可能。2、本发明将深度可分卷积与TCN中的膨胀因果卷积进行融合，形成一个新的网络结构，相对于深度可分卷积网络，可以使模型学习到焊接电流数据的时序特征；相对于普通的TCN网络，可以大大降低网络参数量，同时加深网络层数，增加网络通道数，显著提高模型的准确率。3、基于膨胀因果卷积无法改变序列长度的这一特性，本发明另外加入了用于降维的网络块，随着网络层数的堆叠，网络通道数不断增加，由于序列长度不断缩减，网络参数量能够进一步降低，否则通道数不断增加之后会导致参数爆炸，网络难以训练，出现内存不足的报错。4、依照真实工业数据和先进经验知识，本发明设置了一套简单的逻辑判断方法对模型预测结果进行校正，在实际工程中可以避免误判，具备了较高的实用价值。附图说明图1为本发明实施例的检测方法流程图；图2为焊接起弧过程的电流图像；图3为焊接过程中的电流图像；图4为焊接熄弧过程的电流图像；图5为本发明实施例中焊接起弧连续性检测模型的网络结构图；图6为本发明实施例中降维网络块的结构图；图7为本发明实施例中倒残差网络块的结构图；图8为本发明实施例的部分预测结果图。具体实施方式下面将结合附图对本发明的优选实施方式进行描述，更加清楚、完整地阐述本发明的技术方案。如图1所示为一种普适焊接起弧连续性实时检测方法，包括以下步骤：步骤1：数据标注；步骤1.1：将采集的高频电流数据按照窗长window_size进行滑窗构造样本，本实施例中window_size=1000。步骤1.2：根据电流图像进行样本标注；将样本中起弧开始的时间点记为start_point，熄弧结束的时间点记为end_point，由此生成样本标签，若样本中没有起弧点则start_point=0，若样本中没有熄弧点且样本中不存在焊接则end_point=0，若样本中没有熄弧点且样本中存在焊接则end_point=window_size。步骤1.3：将生成的所有样本随机shuffle，并根据比例6∶2∶2来划分训练集、验证集和测试集。步骤2：网络搭建；如图5所示，搭建的神经网络模型如下：Ⅰ、输入层，Ⅱ、一维卷积层，Ⅲ、四个串联的网络模块block，其中每个block包含一个降维网络块和三个倒残差网络块，Ⅳ、GlobalAveragePooling层，Ⅴ、Dropout层，Ⅵ、全连接层。如图6所示，每个降维网络块包含：a、1*1一维卷积网络层，b、BatchNormalization层，c、ReLU6层，d、3*3一维深度卷积网络层，e、BatchNormalization层，f、ReLU6层，g、1*1一维卷积网络层，h、BatchNormalization层。如图7所示，每个倒残差网络块包含：A、1*1一维卷积网络层，B、BatchNormalization层，C、ReLU6层，D、深度卷积与膨胀因果卷积融合的一维卷积网络层，E、BatchNormalization层，F、ReLU6层，G、1*1一维卷积网络层，H、BatchNormalization层。将深度卷积与膨胀因果卷积进行融合，一方面相较于深度可分卷积网络，将普通卷积改为膨胀因果卷积可以使模型学习到时序特征，应用到解决时序问题中，另一方面相较于普通的TCN网络，既可以大大降低网络参数量，又能加深网络层数，增加网络通道数，有效提高模型的准确率。降维网络块的加入是为了降低输出序列长度，这样随着网络层数的堆叠，网络通道数不断增加，由于序列长度不断缩减，网络参数量能够进一步降低，否则通道数不断增加之后会导致参数爆炸，网络难以训练，出现内存不足的报错。此外，倒残差网络块和降维网络块中都引进了1*1卷积进行通道扩张和通道压缩，因为通道数越多保留的特征越多，所以要进行通道扩张的操作。步骤3：网络训练；设定learning_rate=α，batch_size=β，进行模型训练，本实施例中α=0.001，β=16。图8展示了上述检测模型对测试集样本的部分预测结果。图中可以看出，该模型的平均IOU达到了0.90116762。IOU是指真实值与预测值的交并比，即真实值与预测值重合的交集大小除以二者的并集大小。例如真实值为，预测值为，则交集大小为0.9-0.3=0.6，并集大小为1-0.2=0.8，则IOU=0.6/0.8=0.75。步骤4：起弧连续型实时检测；对于新的实时高频电流数据，按照窗长window_size进行滑窗，将每个窗长的数据输入到训练好的检测模型中进行预测，实时输出起弧点和熄弧点。步骤5：通过以下逻辑判断对模型预测结果进行校正：a、若start_point/window_size＜th1，则令start_point=0；b、若end_point/window_size＜th1，则令end_point=0；c、若end_point/window_size＞th2，则令end_point=window_size；d、若前一窗口的end_point/window_size与后一窗口的start_point/window_size之间的距离小于th3，则令后一窗口的start_point=0，即不算一次新的起弧，起弧连续性未中断。本实施例中th1=0.005，th2=0.996，th3=0.400。此外，本发明还提供了一种普适焊接起弧连续性实时检测系统，包括数据采集模块和数据处理模块，其中数据采集模块采用高精度电流传感器，数据处理模块采用嵌入式终端，用于部署上述检测模型以及逻辑规则，根据所采集的高频电流数据进行焊接起弧连续性的实时检测。本发明首先采用高精度电流传感器，实时采集焊接过程中的电流数据，适用于高端、中端、低端焊机，不需要焊机本身具有数字通信能力，具有较好的普适性。其次对于采集到的电流数据，不需要构造特征，直接输入到神经网络模型中进行训练，模型部署后，即可实现焊接起弧连续性的实时检测。上述具体实施方式仅仅对本发明的优选实施方式进行描述，而并非对本发明的保护范围进行限定。在不脱离本发明设计构思和精神范畴的前提下，本领域的普通技术人员根据本发明所提供的文字描述、附图对本发明的技术方案所作出的各种变形、替代和改进，均应属于本发明的保护范畴。
