标题title
基于异步串行通信接口的星载遥测遥控动态闭环测试系统
摘要abst
本发明提供了一种基于异步串行通信接口的星载遥测遥控动态闭环测试系统，涉及星载电子设备技术领域，该方法包括：串行通信设备、动态闭环测试软件和被测单机；串行通信设备是动态闭环测试软件的运行载体，串行通信设备和被测单机通过异步串行通信接口连接；被测单机向串行通信设备输出遥控命令，并传递至动态闭环测试软件，根据要求向被测单机反馈输出遥测信号。本发明能够建立遥控命令和遥测信号之间的关联关系，实现遥测信号相应位置数据的公式动态、查表动态、关联动态，满足各类自定义的遥测和遥控数字量数据闭环测试需求，提高测试效率和通用性。
权利要求书clms
1.一种基于异步串行通信接口的星载遥测遥控动态闭环测试系统，其特征在于，包括：串行通信设备、动态闭环测试软件和被测单机；所述串行通信设备是动态闭环测试软件的运行载体，串行通信设备和被测单机通过异步串行通信接口连接；被测单机向串行通信设备输出遥控命令，并传递至动态闭环测试软件，根据要求向被测单机反馈输出遥测信号。2.根据权利要求1所述的基于异步串行通信接口的星载遥测遥控动态闭环测试系统，其特征在于，所述被测单机输出的遥控命令包括遥测采集遥控命令、状态设置遥控命令及关联设置遥控命令；所述遥测采集遥控命令，在动态闭环测试软件接收到后，校验正确时在规定时间内输出遥测数据模拟信号，校验错误时在规定时间内输出数据校验错误信号；所述状态设置遥控命令，在动态闭环测试软件接收到后，校验正确时在规定时间内输出数据校验正确信号，校验错误时在规定时间内输出数据校验错误信号；所述关联设置遥控命令，在动态闭环测试软件接收到后，校验正确时在规定时间内输出数据校验正确信号，校验错误时在规定时间内输出数据校验错误信号；正确接收到关联设置遥控命令后，根据关联设置要求修改遥测数据模拟信号相应位置的数据，并在下一次接收到遥测采集遥控命令后输出修改后的遥测数据模拟信号。3.根据权利要求1所述的基于异步串行通信接口的星载遥测遥控动态闭环测试系统，其特征在于，所述串行通信设备输出的遥测信号包括数据校验正确信号、数据校验错误信号及遥测数据模拟信号；所述数据校验正确信号，是接收到被测单机输出的状态设置遥控命令、关联设置遥控命令并经过校验正确后，在规定时间内反馈输出至被测单机的信号；所述数据校验错误信号，是接收到被测单机输出的遥测采集遥控命令、状态设置遥控命令、关联设置遥控命令并经过校验错误后，在规定时间内反馈输出至被测单机的信号；所述遥测数据模拟信号，是接收到被测单机输出的遥测采集遥控命令并经过校验正确后，在规定时间内反馈输出至被测单机的信号。4.根据权利要求1所述的基于异步串行通信接口的星载遥测遥控动态闭环测试系统，其特征在于，所述动态闭环测试软件能够接收、存储和显示被测单机输出的遥控命令，通过预先设置实现特定遥控命令筛选，筛选后的遥控命令不再存储、显示和处理。5.根据权利要求1所述的基于异步串行通信接口的星载遥测遥控动态闭环测试系统，其特征在于，所述动态闭环测试软件能够设置遥测数据模拟信号，由通道号表征遥测数据模拟信号的位置信息，通道号依次按顺序排列，通道号设置的最小分辨率为比特。6.根据权利要求1所述的基于异步串行通信接口的星载遥测遥控动态闭环测试系统，其特征在于，所述遥测数据模拟信号每个通道号对应的数据，能够固定设置，或动态设置，其中，动态设置类型包括：公式动态，按照预先设置的公式转换要求输出相应通道号的数据；查表动态，按照预先设置的数据表格要求输出相应通道号的数据，每收到一次遥测采集遥控命令，输出一个数据表格中的数据，并移至下一行等待下一次遥测采集遥控命令，依此反复循环；关联动态，建立遥控命令与遥测数据模拟信号相应通道号的数据关联关系，当接收到特定遥控命令后，根据预先建立的关联关系，反馈输出相应的数据。
说明书desc
技术领域本发明涉及星载电子设备技术领域，具体地，涉及一种基于异步串行通信接口的星载遥测遥控动态闭环测试系统。背景技术星载电子系统趋向综合集成化设计，产品间数据交互多，信息关联性强，各类产品的运行控制操作和状态分析复杂。遥测遥控是卫星状态监视、操作控制的主要手段，串行通信接口是实现星上各类产品之间低速数据传输的主要方式，因此，遥测遥控功能的正确性是产品功能正常的基础。针对星载遥测遥控功能的测试，对测试设备的可用性、易用性、便携性和可靠性提出了更高的要求。专用测试设备针对特定需求独立开发，实用性强，但通用性弱，易造成资源浪费。通过对各类型测试板卡的组合集成和二次开发，实现测试设备的通用化设计，提高测试设备的利用效率。公开号为CN204215187U的实用新型专利，公开了一种月面巡视器测月雷达遥测、遥控地检装置，使用本实用新型能够为测月雷达提供一次母线电源及多路二次电源；能够对16路遥测量进行采集，并能够实施6路遥控指令发送功能，同时，采用参数注入和回读的总线和科学数据回传总线分开。公开号为CN103676657B的发明专利，公开了一种用于卫星综合电子系统的验证系统，采用主控计算机向综合电子星上设备发送指令，接收星上遥测数据并进行显示和处理，在单功能测试时对其它功能模块的遥测数据进行实时记录和判读，对地面专检设备进行控制，记录发送指令和接收遥测的时间信息；按照星上综合电子系统各项功能，提供相应的激励源、模拟器和监视器等地面专检设备，进行正常情况下的带载测试，并对数据传输信号的电平和时延进行拉偏设置，测试设备在不同工况下的工作性能，定量得到裕度指标。公开号为CN109347853B的发明专利，公开了一种基于深度包解析的面向综合电子系统的异常检测方法，包括：收集总线数据：监听并收集总线传输数据包；提取周期性数据包特征：在收集的周期性数据包中提取内容变化的特征值；生成多个决策树：根据提取所得的特征值集合，对不同子系统下的不同应用训练生成对应决策树；行为规范检测异常数据包：根据周期性数据包提供信息选择对应的决策树并利用该决策树预测当前周期性数据包的合法操作，若待检验的非周期性数据包内容中的指令符合决策树预测结果，则让消息通过，否则数据包异常，进行异常处理。公开号为CN107817781B的发明专利，公开了一种应用于星载多功能平台电子单机的通用测试设备，包括工控机、显示器、星务处理模块、程控电源、电子负载模块、信号调理箱、单机产品、软件测试模块，显示器与工控机相连，星务处理模块、程控电源、电子负载模块都与工控机相连，星务处理模块、程控电源、电子负载模块都与单机产品相连，星务处理模块位于程控电源上方，程控电源位于电子负载模块的上方，工控机与信号调理箱相连，信号调理箱与单机产品相连。公开号为CN209746049U的实用新型专利，公开了一种用于发送模拟或数字量并同时采集输出量的遥测，包括电源模块、模拟量输出模块、数字量输出模块、信号实时采集模块、FPGA模块和存储模块；电源模块，用于为其他各个模块供电；模拟量出模块，FPGA模块通过该模块将模拟量输出至外部被测设备；数字量输出模块，FPGA模块通过该模块将数字量输出至外部被测设备；信号实时采集模块，FPGA模块通过该模块采集FPGA模块输出的模拟量和数字量；存储模块，用于测试数据的存储。上述测试设备可以满足各类遥测遥控接口的测试需求，但是对于最常用的基于异步串行通信接口的星载数字量遥测遥控，基本上仅能满足数据单向收发测试。对遥测和遥控之间的动态闭环测试能力较弱，对各类数据格式的通用化适应性较差，无法满足闭环测试需求。发明内容针对现有技术中的缺陷，本发明提供一种基于异步串行通信接口的星载遥测遥控动态闭环测试系统。根据本发明提供的一种基于异步串行通信接口的星载遥测遥控动态闭环测试系统，所述方案如下：一种基于异步串行通信接口的星载遥测遥控动态闭环测试系统，所述系统包括：串行通信设备、动态闭环测试软件和被测单机；所述串行通信设备是动态闭环测试软件的运行载体，串行通信设备和被测单机通过异步串行通信接口连接；被测单机向串行通信设备输出遥控命令，并传递至动态闭环测试软件，根据要求向被测单机反馈输出遥测信号。优选的，所述被测单机输出的遥控命令包括遥测采集遥控命令、状态设置遥控命令及关联设置遥控命令；所述遥测采集遥控命令，在动态闭环测试软件接收到后，校验正确时在规定时间内输出遥测数据模拟信号，校验错误时在规定时间内输出数据校验错误信号；所述状态设置遥控命令，在动态闭环测试软件接收到后，校验正确时在规定时间内输出数据校验正确信号，校验错误时在规定时间内输出数据校验错误信号；所述关联设置遥控命令，在动态闭环测试软件接收到后，校验正确时在规定时间内输出数据校验正确信号，校验错误时在规定时间内输出数据校验错误信号；正确接收到关联设置遥控命令后，根据关联设置要求修改遥测数据模拟信号相应位置的数据，并在下一次接收到遥测采集遥控命令后输出修改后的遥测数据模拟信号。优选的，所述串行通信设备输出的遥测信号包括数据校验正确信号、数据校验错误信号及遥测数据模拟信号；所述数据校验正确信号，是接收到被测单机输出的状态设置遥控命令、关联设置遥控命令并经过校验正确后，在规定时间内反馈输出至被测单机的信号；所述数据校验错误信号，是接收到被测单机输出的遥测采集遥控命令、状态设置遥控命令、关联设置遥控命令并经过校验错误后，在规定时间内反馈输出至被测单机的信号；所述遥测数据模拟信号，是接收到被测单机输出的遥测采集遥控命令并经过校验正确后，在规定时间内反馈输出至被测单机的信号。优选的，所述动态闭环测试软件能够接收、存储和显示被测单机输出的遥控命令，通过预先设置实现特定遥控命令筛选，筛选后的遥控命令不再存储、显示和处理。优选的，所述动态闭环测试软件能够设置遥测数据模拟信号，由通道号表征遥测数据模拟信号的位置信息，通道号依次按顺序排列，通道号设置的最小分辨率为比特。优选的，所述遥测数据模拟信号每个通道号对应的数据，能够固定设置，或动态设置，其中，动态设置类型包括：公式动态，按照预先设置的公式转换要求输出相应通道号的数据；查表动态，按照预先设置的数据表格要求输出相应通道号的数据，每收到一次遥测采集遥控命令，输出一个数据表格中的数据，并移至下一行等待下一次遥测采集遥控命令，依此反复循环；关联动态，建立遥控命令与遥测数据模拟信号相应通道号的数据关联关系，当接收到特定遥控命令后，根据预先建立的关联关系，反馈输出相应的数据。与现有技术相比，本发明具有如下的有益效果：1、本发明通过遥控命令的分类，以及遥测数据模拟信号相应数据的公式动态、查表动态、关联动态，建立遥控命令和遥测信号之间的关系，实现遥测和遥控数据的闭环测试；2、本发明通过遥控命令、遥测信号数据格式的灵活设计，以及数据位置的定义，满足各类产品自定义的遥测和遥控数字量数据测试需求，提高测试设备的通用性。附图说明通过阅读参照以下附图对非限制性实施例所作的详细描述，本发明的其它特征、目的和优点将会变得更明显：图1为星载遥测遥控动态闭环测试系统功能框图。具体实施方式下面结合具体实施例对本发明进行详细说明。以下实施例将有助于本领域的技术人员进一步理解本发明，但不以任何形式限制本发明。应当指出的是，对本领域的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干变化和改进。这些都属于本发明的保护范围。本发明实施例提供了一种基于异步串行通信接口的星载遥测遥控动态闭环测试系统，参照图1所示，该系统包括：串行通信设备、动态闭环测试软件和被测单机；其中，串行通信设备是动态闭环测试软件的运行载体，串行通信设备和被测单机通过异步串行通信接口连接；被测单机向串行通信设备输出遥控命令，并传递至动态闭环测试软件，根据要求向被测单机反馈输出遥测信号。被测单机输出的遥控命令包括遥测采集遥控命令、状态设置遥控命令及关联设置遥控命令；遥测采集遥控命令，在动态闭环测试软件接收到后，校验正确时在规定时间内输出遥测数据模拟信号，校验错误时在规定时间内输出数据校验错误信号；状态设置遥控命令，在动态闭环测试软件接收到后，校验正确时在规定时间内输出数据校验正确信号，校验错误时在规定时间内输出数据校验错误信号；关联设置遥控命令，在动态闭环测试软件接收到后，校验正确时在规定时间内输出数据校验正确信号，校验错误时在规定时间内输出数据校验错误信号；正确接收到关联设置遥控命令后，根据关联设置要求修改遥测数据模拟信号相应位置的数据，并在下一次接收到遥测采集遥控命令后输出修改后的遥测数据模拟信号。串行通信设备输出的遥测信号包括数据校验正确信号、数据校验错误信号及遥测数据模拟信号；数据校验正确信号，是接收到被测单机输出的状态设置遥控命令、关联设置遥控命令并经过校验正确后，在规定时间内反馈输出至被测单机的信号；数据校验错误信号，是接收到被测单机输出的遥测采集遥控命令、状态设置遥控命令、关联设置遥控命令并经过校验错误后，在规定时间内反馈输出至被测单机的信号；遥测数据模拟信号，是接收到被测单机输出的遥测采集遥控命令并经过校验正确后，在规定时间内反馈输出至被测单机的信号。动态闭环测试软件可以接收、存储和显示被测单机输出的遥控命令，通过预先设置可以实现特定遥控命令筛选，筛选后的遥控命令不再存储、显示和处理。动态闭环测试软件能够设置遥测数据模拟信号，由通道号表征遥测数据模拟信号的位置信息，通道号依次按顺序排列，通道号设置的最小分辨率为比特。遥测数据模拟信号每个通道号对应的数据，能够固定设置，或动态设置，其中，动态设置类型包括：公式动态，按照预先设置的公式转换要求输出相应通道号的数据；查表动态，按照预先设置的数据表格要求输出相应通道号的数据，每收到一次遥测采集遥控命令，输出一个数据表格中的数据，并移至下一行等待下一次遥测采集遥控命令，依此反复循环；关联动态，建立遥控命令与遥测数据模拟信号相应通道号的数据关联关系，当接收到特定遥控命令后，根据预先建立的关联关系，反馈输出相应的数据。接下来，对本发明进行更为具体的说明。采用本发明设计的基于异步串行通信接口的星载遥测遥控动态闭环测试系统为例，系统功能框图如图1所示。测试系统由串行通信设备、动态闭环测试软件和被测单机组成。串行通信设备是动态闭环测试软件的运行载体，串行通信设备和被测单机通过异步串行通信接口连接。被测单机向串行通信设备输出遥控命令，并传递至动态闭环测试软件，根据要求向被测单机反馈输出遥测信号。被测单机输出的遥控命令包括遥测采集遥控命令、状态设置遥控命令、关联设置遥控命令，具体是：动态闭环测试软件接收到遥测采集遥控命令后，校验正确时在规定时间内输出遥测数据模拟信号，校验错误时在规定时间内输出数据校验错误信号；动态闭环测试软件接收到状态设置遥控命令后，校验正确时在规定时间内输出数据校验正确信号，校验错误时在规定时间内输出数据校验错误信号；动态闭环测试软件接收到关联设置遥控命令后，校验正确时在规定时间内输出数据校验正确信号，校验错误时在规定时间内输出数据校验错误信号。正确接收到关联设置遥控命令后，根据关联设置要求修改遥测数据模拟信号相应位置的数据，并在下一次接收到遥测采集遥控命令后输出修改后的遥测数据模拟信号。串行通信设备输出的遥测信号包括数据校验正确信号、数据校验错误信号、遥测数据模拟信号，具体是：数据校验正确信号，是接收到被测单机输出的状态设置遥控命令、关联设置遥控命令并经过校验正确后，在规定时间内反馈输出至被测单机的信号；数据校验错误信号，是接收到被测单机输出的遥测采集遥控命令、状态设置遥控命令、关联设置遥控命令并经过校验错误后，在规定时间内反馈输出至被测单机的信号；遥测数据模拟信号，是接收到被测单机输出的遥测采集遥控命令并经过校验正确后，在规定时间内反馈输出至被测单机的信号。异步串行通信过程中，数据格式为：1位起始位，8位数据位，1位奇校验位和1位停止位，共11位。遥控命令采用CCSDS遥控包格式，如下表1所示。串行通信设备接收到遥控命令后，由动态闭环测试软件进行校验，校验内容包括包长检查与和校验检查。本例中，接收到遥控命令后，应在1ms内完成校验，并反馈校验结果。表1遥控命令包格式遥测信号采用CCSDS遥测包格式，如下表2所示：表2遥测信号包格式动态闭环测试软件可设置遥测数据模拟信号，遥测信号起始字、包主导头部分为预先固定配置项，每个接口可单独配置。包数据域为可变部分。由通道号表征遥测信号的位置信息，通道号从1开始往后依次排列，每增加1表示1个字节，最小分辨率为0.125，表示1个比特。下表3给出了示例：表3遥测信号通道号设置示例遥测信号名称通道号输出值起始字10xEB90包识别30xXXXX包顺序控制50xXXXX包长度70xXXXXXXX90xXXXXX9.1250b1XXX9.250b1111111XXX100xXX动态闭环测试软件可以接收、存储和显示被测单机输出的遥控命令，通过预先设置可以实现特定遥控命令筛选，筛选后的遥控命令不再存储、显示和处理。本例中，如表1所示，筛选方式包括特定APID筛选、特定功能识别筛选和特定位置应用数据筛选三种。遥测数据模拟信号每个通道号对应的数据，可以固定设置，也可以动态设置，动态设置类型包括：公式动态，按照预先设置的公式转换要求输出相应通道号的数据，比如按照公式Y＝Y+a，a为常数，Y为实际输出值，表2中输出值作为Y的初始值；查表动态，按照预先设置的数据表格要求输出相应通道号的数据，如下表4给出了一个示例，每收到一次遥测采集遥控命令，输出一个数据表格中的数据，并移至下一行等待下一次遥测采集遥控命令，依此反复循环，实现遥测动态反馈；表4查表动态示例关联动态，建立遥控命令与遥测数据模拟信号相应通道号的数据关联关系。下表5给出了一个示例，动态闭环测试软件接收到遥控命令后，若APID、功能识别或应用数据符合表5中预设的数据，则相应的修改对应通道号的数据，实现遥测动态反馈。表5关联动态设置示例本发明实施例提供了一种基于异步串行通信接口的星载遥测遥控动态闭环测试系统，建立遥控命令和遥测信号之间的关联关系，实现遥测信号相应位置数据的公式动态、查表动态、关联动态，满足各类自定义的遥测和遥控数字量数据闭环测试需求，提高测试效率和通用性。本领域技术人员知道，除了以纯计算机可读程序代码方式实现本发明提供的系统及其各个装置、模块、单元以外，完全可以通过将方法步骤进行逻辑编程来使得本发明提供的系统及其各个装置、模块、单元以逻辑门、开关、专用集成电路、可编程逻辑控制器以及嵌入式微控制器等的形式来实现相同功能。所以，本发明提供的系统及其各项装置、模块、单元可以被认为是一种硬件部件，而对其内包括的用于实现各种功能的装置、模块、单元也可以视为硬件部件内的结构；也可以将用于实现各种功能的装置、模块、单元视为既可以是实现方法的软件模块又可以是硬件部件内的结构。以上对本发明的具体实施例进行了描述。需要理解的是，本发明并不局限于上述特定实施方式，本领域技术人员可以在权利要求的范围内做出各种变化或修改，这并不影响本发明的实质内容。在不冲突的情况下，本申请的实施例和实施例中的特征可以任意相互组合。
