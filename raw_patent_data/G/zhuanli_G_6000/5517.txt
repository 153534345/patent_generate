标题title
一种无人机定位及速度估计方法
摘要abst
本发明公开一种无人机定位及速度估计方法，包括无人机，所述无人机上安装有摄像机和交汇测量系统，所述交汇测量系统包括两个性能相同且对称安装在所述摄像机两侧的面阵CCD，两个所述面阵CCD以摄像机主光轴为对称轴；本发明利用光流和相机自动变焦技术相结合，在无GPS的情况下，可以实现无人机的自主定位以及测量水平方向和竖直方向的位移；采用面阵CCD图像经小波变换后获取的图像边缘特征和CCD交汇测距原理，并利用小波变换具有的良好多尺度分辨能力和边缘图像的内、外标量特征，较好地解决面目标中目标点的确定。
权利要求书clms
1.一种无人机定位及速度估计方法，包括无人机，所述无人机上安装有摄像机和交汇测量系统，所述交汇测量系统包括两个性能相同且对称安装在所述摄像机两侧的面阵CCD，两个所述面阵CCD以摄像机主光轴为对称轴，其特征在于，具体包括以下步骤：S1：随机选取无人机飞行的参照物，在无人机飞行过程中，获取无人机摄像头采集到不同时刻的两帧图像，其中，两帧图像均包含参照物且像素灰度相同；S2：利用光流法计算两帧图像中像素点的位移，得到光流向量，进而计算出无人机的水平位移；S3：选择摄像机主光轴与地面交点作为目标点；S4：在第一时刻，获取两侧面阵CCD上的图像，根据小波变换的时频局域化特征和多尺度分析，提取图像边缘特征，确定目标点在图像上的位置，计算得到无人机与目标点之间的实际高度；S5：在第二时刻，摄像机自动对焦后，获取两侧面阵CCD上的图像，根据小波变换的时频局域化特征和多尺度分析，提取图像边缘特征，确定目标点在图像上的位置，计算得到无人机与目标点之间的实际高度；S6：将两次获取的实际高度进行计算，得到无人机竖直方向的位移；S7：根据无人机单位时间内前后两次相对位置偏移，计算出无人机的飞行速度；依据无人机前一时刻的定位数据，以及无人机的水平位移和竖直位移，计算出无人机当前时刻的定位数据。2.根据权利要求1所述的一种无人机定位及速度估计方法，其特征在于，在步骤S2中，由于两帧图像像素灰度相同，得到：其中，I为： 由于目标点为摄像机主光轴与地面交点h1=h2=h，即，目标点y坐标即相机拍照距离：。4.根据权利要求3所述的一种无人机定位及速度估计方法，其特征在于，在步骤S4中，根据小波变换具有的最佳的时频局域化特征和多尺度分析能力，提取图像边缘特征，具体包括：设CCD输出的二维信号实函数为f，取高斯函数为平滑函数，其一阶导数为：在尺度2j条件下，在x方向和y方向的小波变换可表示为：式中：；令，由于小波变换的模极大值点对应于图像的边缘，统一取域值为m0；若，即作为边缘点，进而得到边缘部分为1，其余部分为0的二值化图像；确定图像中的中心区域和中心点图像边缘特征，通过两侧CCD图像进行比较，得到像高，计算无人机与目标点之间的实际高度。5.根据权利要求4所述的一种无人机定位及速度估计方法，其特征在于，在步骤S4中，还包括去除二值化图像中的伪目标，具体包括：采用面积作为内标量参数，采用以闭合曲线的形心为中心的半径向量作为外标量参数，去除二值化图像中的伪目标，其中，闭合曲线形心坐标为：式中，k为闭合曲线的采样点数，xi、zi为第个采样点坐标；则第个采样点的半径向量为：。
说明书desc
技术领域本发明属于无人机定位技术领域，尤其涉及一种无人机定位及速度估计方法。背景技术通常情况下无人机主要依赖于GPS惯性组合导航，而在丛林、城市楼宇、室内等环境中，由于GPS信号受到干扰或遮挡，导致无人机难以定位或定位不稳定。发明内容本发明提供一种无人机定位及速度估计方法，旨在解决上述存在的问题。本发明是这样实现的，一种无人机定位及速度估计方法，包括无人机，所述无人机上安装有摄像机和交汇测量系统，所述交汇测量系统包括两个性能相同且对称安装在所述摄像机两侧的面阵CCD，两个所述面阵CCD以摄像机主光轴为对称轴，具体包括以下步骤：S1：随机选取无人机飞行的参照物，在无人机飞行过程中，获取无人机摄像头采集到不同时刻的两帧图像，其中，两帧图像均包含参照物且像素灰度相同；S2：利用光流法计算两帧图像中像素点的位移，得到光流向量，进而计算出无人机的水平位移；S3：选择摄像机主光轴与地面交点作为目标点；S4：在第一时刻，获取两侧面阵CCD上的图像，根据小波变换的时频局域化特征和多尺度分析，提取图像边缘特征，确定目标点在图像上的位置，计算得到无人机与目标点之间的实际高度；S5：在第二时刻，摄像机自动对焦后，获取两侧面阵CCD上的图像，根据小波变换的时频局域化特征和多尺度分析，提取图像边缘特征，确定目标点在图像上的位置，计算得到无人机与目标点之间的实际高度；S6：将两次获取的实际高度进行计算，得到无人机竖直方向的位移；S7：根据无人机单位时间内前后两次相对位置偏移，计算出无人机的飞行速度；依据无人机前一时刻的定位数据，以及无人机的水平位移和竖直位移，计算出无人机当前时刻的定位数据。进一步的，在步骤S2中，由于两帧图像像素灰度相同，得到：其中，I 为： 由于目标点为摄像机主光轴与地面交点h1=h2=h，即，目标点y坐标即相机拍照距离：进一步的，在步骤S4中，根据小波变换具有的最佳的时频局域化特征和多尺度分析能力，提取图像边缘特征，具体包括：设CCD输出的二维信号实函数为f，取高斯函数为平滑函数，其一阶导数为：在尺度2j条件下，在x方向和y方向的小波变换可表示为：式中： ;令，由于小波变换的模极大值点对应于图像的边缘，统一取域值为m0，若，即作为边缘点，进而得到边缘部分为1，其余部分为0的二值化图像；确定图像中的中心区域和中心点图像边缘特征，通过两侧CCD图像进行比较，得到像高，计算无人机与目标点之间的实际高度。进一步的，在步骤S4中，还包括去除二值化图像中的伪目标，具体包括：采用面积作为内标量参数，采用以闭合曲线的形心为中心的半径向量作为外标量参数，去除二值化图像中的伪目标，其中，闭合曲线形心坐标为：式中，k为闭合曲线的采样点数，xi、zi为第个采样点坐标；则第个采样点的半径向量为：。与现有技术相比，本发明的有益效果是：本发明公开一种无人机定位及速度估计方法，利用光流和相机自动变焦技术相结合，在无GPS的情况下，可以实现无人机的自主定位以及测量水平方向和竖直方向的位移；采用面阵CCD图像经小波变换后获取的图像边缘特征和CCD交汇测距原理，并利用小波变换具有的良好多尺度分辨能力和边缘图像的内、外标量特征，较好地解决面目标中目标点的确定；利用小波变换后边缘图像内标量和外标量特征，能较准确确定相机摄影距离，并借助反馈电路可实现相机自动对焦。附图说明图1为本发明CCD交汇距离测量原理图；图2为本发明CCD与相机相对安装位置图；图3为本发明系统设计结构图；图4为本发明试验例二维码放置图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。在本发明的描述中，需要理解的是，术语“长度”、“宽度”、“上”、“下”、“前”、“后”、“左”、“右”、“竖直”、“水平”、“顶”、“底”“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。此外，在本发明的描述中，“多个”的含义是两个或两个以上，除非另有明确具体的限定。实施例请参阅图1-图3，在光流理论中，摄像头采集到的两帧图像之间的像素灰度不变且相邻的两帧像素具有相对运动，那么有以下关系成立：其中I 为：该交汇系统在最优化结构布局的条件是：，并且为保证测距系统在实测距离时计算方便，目标点S选择相机主光轴与地面交点，即h1=h2=h，在此条件下，目标点y坐标，即相机拍照距离：根据上述分析，利用交汇系统测量相机高度，关键是如何确定目标中位于相机主光轴上的点在CCD面上的像。根据小波变换具有的最佳的时频局域化特征和多尺度分析能力，提取图像边缘特征，并以此为基础判断目标点的位置。设CCD输出的二维信号实函数为f，取高斯函数为平滑函数，其一阶导数为 那么在尺度2j条件下，在x方向和y方向的小波变换可表示为式中：令，从理论上讲，小波变换的模极大值点对应于图像的边缘，为简化运算，统一取域值为m0，若，即作为边缘点，这不影响图像固有的边缘特征。为提高计算速度，从x，z两个方向进行边缘探测，得到边缘部分为1，其余部分为0的二值化图像。为减小定位误差，面阵CCD与相机的相对安装位置如图2所示。此时，CCD1的输出只作为确定主光轴像点的参考图像，根据CCD1定出的中心区域和中心点图像边缘特征，通过与CCD2图像比较，确定其在CCD2中的位置，即像高，然后根据坐标公式自动计算目标点高度。二维图像形状描述技术可分为标量和空间域两大类，标量技术是指用一个和一组标量参数来描述物体形状，分为内标量技术和外标量技术两大类；空间域技术是描述物体形状的结构和关系特性。二维图像经小波变换并二值化后，面积作为简单的内标量参数，可以将图像中大部分非相关目标去除，但也存在面积相同且非同一目标的伪目标，以闭合曲线的形心为中心的半径向量作为外标量参数，可以很好地去除伪目标。闭合曲线形心坐标公式为式中，k为闭合曲线的采样点数，，为第个采样点坐标。则第i个采样点的半径向量为。本发明利用光流定位可以测量出无人机的水平方向的位移，进而实现对速度的估计。当无人机的高度发生变化时，即竖直方向存在速度时，目标经各自物镜分别成像在两面阵CCD，经快速A/D转换后，存储到大容量存储器中，当计算机检测到两图像全部存储完信号后，按照先CCD1后CCD2的顺序自动读取存储器内的数据，并完成图像边缘二值化处理、目标点确定和距离计算，将结果提供给数模转换，驱动镜头调整电机工作，并将调整过程反馈到计算机中，当镜头到达合适的位置后，计算机输出中断，电机停止工作。试验例1使用光流定位传感器在p450系列无人机上试验，选取防护网的一面作为试验光流定位的参照物，每间隔1m贴一张二维码，作为光流技术识别定位的图像，规定第一张二维码的位置为0m。将无人机定点飞行分别经过每一次二维码，试验数据如表1所示。表1试验例2测量系统两面阵CCD均采用TEXAS INSTRUMENTS生产的Tc215型全帧图像传感器，镜头采用焦距18-200mm的双高斯照相物镜。试验场地在距地面15m高的楼层，每隔一层，对楼下街道目标拍照，试验数据如表2所示。表2试验例3两面阵CCD采用TEXAS INSTRUMENTS生产的Tc215型全帧图像传感器，镜头采用焦距18-200mm的双高斯照相物镜，采用p450系列无人机试验。试验场地选为有防护网保护的长宽6m×6m，高度为3.5m的空旷区域，选取二维码为识别物，依次让无人机从不同高度依次经过每张二维码，估计出无人机的位置，速度。记录相机焦距的变化，二维码阵列放在地面上，如图4所示，高度记为0，试验数据如表3所示，其中，坐标用表示。表3通过试验例1-3可以得出，本发明公开的一种无人机定位及速度估计方法，利用光流定位和面阵CCD技术，在不依赖GPS等定位设备的情况下，在无GPS的情况下，可以实现无人机的自主定位以及测量水平方向和竖直方向的位移；在绝大多数情况下，数据偏差不高于5%，实现了无人机的定位稳定。以上仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明的保护范围之内。
