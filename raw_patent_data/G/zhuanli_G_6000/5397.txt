标题title
一种基于过象限检测的高精度大量程相位测量系统
摘要abst
本发明公开了一种基于过象限检测的高精度大量程相位测量系统，该系统通过IQ混频器与A/D采样模块得到反映相位的正余弦模拟电压并以低采样率fs转化为数字量，FPGA通过arctan函数进行解算，得到每个采样点的相位值；过零比较器将IQ混频器输出的正余弦模拟电压转化为方波后，FPGA以高采样率fH对方波信号进行抓取，通过逻辑判断得到相位在四个象限中的变化情况；结合A/D采样模块得到的精准相位信息与过零比较器得到的象限变化信息，从而实现高精度兼具大量程的相位测量。本发明解决了arctan函数解调相位角度范围有限，仅可求得，，，四种组合，这四种组合分别对应四个象限，通过连续两个组合的变化，得到采样间隔为1/fH的所处象限的信息。5.根据权利要求1所述的基于过象限检测的高精度大量程相位测量系统，其特征在于，所述过零比较器为基于运放搭建的过零施密特滞回比较器，其采用正负电源供电，输入支持所述IQ混频器输出的正弦值电压和余弦值电压的正负电压摆幅；过零比较器输出级设置钳位功能，滞回电压为Th，输入的与两个电压信号的数值增大至大于Th时，过零比较器输出变为0，即0V电平；输入的与两个信号的数值减小至小于-Th时，过零比较器输出变为1，即正供电电压；输入的与两个信号的数值减小但未小于-Th，以及增大但未大于Th时，过零比较器输出保持不变。6.根据权利要求1所述的基于过象限检测的高精度大量程相位测量系统，其特征在于，所述FPGA实现过零比较器与A/D采样模块输出信息的融合，基于所述过零比较器得到的采样间隔为1/fH的所处象限的信息补充基于所述A/D采样模块得到的采样间隔为1/fS的连续两个采样点之间在象限中的波动情况，即补充的变化是否存在±2kπ的变化以及k的具体数值，结合所述A/D采样模块解调出来的在本发明属于电子测量技术领域的相位测量技术，尤其涉及一种基于过象限检测的高精度大量程相位测量系统。背景技术相位测量技术在在激光测距、扭矩测量、光纤传感等领域具有广泛的应用，它在信号变换、信息采集与控制等方面有着重要的意义，相位检测的精度往往影响着整个系统的性能。在相位检测中，通常会将测得的包含待测信号相位信息的模拟量通过A/D采样模块转化为数字量进行后续的计算与控制，显然，相位检测的精度与A/D转换的精度是密切相关的。通常，低采样率的A/D转换的精度较高，而高采样率的A/D转换的精度则较低，所以在相位测量中一般选用低采样率高精度的A/D采样模块。但是，低采样率A/D采样虽然可以保证转换的精度，在被测信号的相位快速且剧烈地变化时，极有可能会因为采样点间隔过大而导致丢失被测信号相位发生±2kπ变化的信息，也就无法正确地还原出被测信号相位的变化曲线，相位测量结果失真。若想在被测信号的相位快速且剧烈地变化时也能很好地跟踪上其相位的变化，可以加大 A/D采样模块的采样率，选用高速A/D模块，用采样间隔足够小的大量采样点去还原被测信号的相位的变化曲线，但前段已经提到，高速A/D转换的精度很低，并不能满足相位测量对精度的要求。发明内容本发明的目的在于针对现有方案的不足，提供一种基于过象限检测的高精度大量程相位测量系统。本发明在现有低采样率高精度A/D采样模块可能导致相位测量丢失±2kπ变化的信息的基础上，引入过象限判断方法，与A/D采样模块融合使用，弥补其缺陷，最终达到即使在被测信号相位剧烈变化的情况下也能精准地测量出其变化曲线的目的。一种基于过象限检测的高精度大量程相位测量系统，该相位测量系统包括IQ混频器、 A/D采样模块、过零比较器和FPGA四部分；所述IQ混频器为四端口器件，包含两输入两输出，基于内部乘法器与移相器实现正交解调，将输入被测调相信号与参考信号的相位差以正弦值电压与余弦值电压形式输出；所述A/D采样模块以fS采样频率对所述IQ混频器输出的正弦值电压与余弦值电压进行采样，转化得到采样间隔为1/fS的数字量电压；所述过零比较器将所述IQ混频器输出的正弦值电压和余弦值电压输入, 与参考零电位电平进行比较鉴别，将模拟电压信号转化为方波信号；所述FPGA以采样频率fH对过零比较器输出的方波信号进行抓取，根据与两路过零比较器的输出方波信号进行判断，得到采样间隔为所处象限的信息；同时利用所述A/D采样模块采样得到的采样间隔为1/fS的数字量电压，基于arctan函数将在进一步地，所述A/D采样模块采用基于逐次逼近原理的差分输入A/D转换芯片，分辨率位数为24bit，完成模拟量到数字量的高精度转化。进一步地，所述FPGA对过零比较器输出的方波信号进行抓取的频率fH为所述A/D采样模块的采样频率fS的整数倍。进一步地，所述FPGA抓取两路过零比较器输出采样间隔为1/fH的数字信号，构成， ，，四种组合，这四种组合分别对应四个象限，通过连续两个组合的变化，得到采样间隔为1/fH的所处象限的信息。进一步地，所述过零比较器为基于运放搭建的过零施密特滞回比较器，其采用正负电源供电，输入支持所述IQ混频器输出的正弦值电压和余弦值电压的正负电压摆幅；过零比较器输出级设置钳位功能，滞回电压为Th，输入的与两个电压信号的数值增大至大于Th时，过零比较器输出变为0，即0V电平；输入的与两个信号的数值减小至小于-Th时，过零比较器输出变为1，即正供电电压；输入的与两个信号的数值减小但未小于-Th，以及增大但未大于Th时，过零比较器输出保持不变。进一步地，所述FPGA实现过零比较器与A/D采样模块输出信息的融合，基于所述过零比较器得到的采样间隔为1/fH的所处象限的信息补充基于所述A/D采样模块得到的采样间隔为1/fS的连续两个采样点之间在象限中的波动情况，即补充的变化是否存在±2kπ的变化以及k的具体数值，结合所述A/D采样模块解调出来的在本发明的有益效果为：本发明提出的基于过象限检测的高精度大范围相位测量系统，充分考虑到A/D采样模块的采样精度和采样频率为互相制约的关系，采样率高的时候采样精度较低，采样率低的时候虽然采样精度高，但无法得出待测相位变化是否存在±2kπ的情况以及k的具体数值；FPGA 对信号的抓取频率可以远高于A/D采样模块的采样频率，可以对待测信号的相位变化进行粗略但快速的跟踪，得到两个A/D采样模块的采样点间在象限中的波动情况，即是否存在±2kπ的情况以及k的具体数值。将A/D采样模块的高采样精度和FPGA的高采样频率二者优点结合，可以在待测调相信号的相位变化剧烈的情况下精准地测量出相位，避免了因A/D 采样模块采样率不够而漏掉被测信号相位发生±2kπ变化的信息。附图说明图1是本发明一个实施例的基于过象限检测的高精度大量程相位测量系统的系统框图；图2是本发明一个实施例的A/D采样模块的电路拓扑图；图3是本发明一个实施例的过零比较器的电路拓扑图；图4是本发明一个实施例的FPGA内部逻辑判断流程图；图5是本发明一个实施例的Simulink仿真模型图；图6是本发明一个实施例的Simulink仿真结果图。具体实施方式下面结合附图和具体实施例对本发明作进一步详细说明。如图1所示，本实施例提供的一种基于过象限检测的高精度大量程相位测量系统，该系统包括IQ混频器1、A/D采样模块2、过零比较器3、FPGA4。该系统的输入信号为被测调相信号和参考信号。被测调相信号的相位表达式为其中f0是载波频率，则是待检测信号对此路信号产生的相位调制，也即拟解调出的相位波动。参考信号的相位表达式为其与被测调相信号同频率，初相为常数。两个信号一同输入到IQ混频器1中，IQ混频器1 一共有两路输出，一路输出为I，输出的是两个输入信号的相位差的正弦电压即另一路输出为Q，输出的是两个输入信号的相位差的余弦电压即采样频率为fS的A/D采样模块2，其电路拓扑图如图2所示，为差分A/D转换器的标准前端调理电路，其中R1与R3、R2与R4构成比例放大电路，放大系数为R5、R6、C4、C5、C6构成抗混叠滤波器，C1、C2、C3为电源去耦电容。IQ混频器1的正余弦电压输出与输入进A/D采样模块2，采样输出为与两个模拟信号被采样为间隔为Ts＝1/fS的数字量。采用arctan函数基于正余弦电压的数字量进行相位解算时，数字量的分辨率与精度直接决定了解调相位的精度，而模拟量到数字量的转化取决于A/D转换器芯片，因此为了保证相位测量的高精度，A/D采样模块采用基于逐次逼近原理的差分输入A/D 转换芯片，分辨率位数为24bit，实现模拟量到数字量的高精度转化。IQ混频器1的正余弦电压输出与同时输入过零比较器3，过零比较器3 的电路拓扑图如图3所示，R3、R4对输入的信号进行分压，避免输入电压范围超过过零比较器3的工作电压范围；为了提升进行过零比较时的抗噪声性能，通过R1、R2设置滞回电压的大小，滞回电压Th＝VCC*R1/，当输入信号增大至大于Th时，输出变为0，即0V电平；当输入信号减小至小于-Th时，输出变为1，即正供电电压；当输入信号增大但未超过Th，或者输入信号减小但未超过-Th时，输出保持不变；R5与D1构成输出钳位电路，使得转化完的方波信号电平范围符合FPGA4的引脚电平工作范围，可以直接输入 FPGA4中。FPGA4以fH采样频率对过零比较器3输出的方波信号进行抓取，为避免采样不同步导致的逻辑判断错误，该采样频率fH为所述A/D采样模块采样频率fS的N倍，也即在所述A/D采样模块采集得到的连续两个数字量中插入了N-1个方波信号的数字量。FPGA4 抓取两路过零比较器输出采样间隔为1/fH的数字信号，构成，，，四种组合，这四种组合分别对应四个象限，通过连续两个组合的变化，得到采样间隔为1/fH的过象限的信息。FPGA4内部的逻辑判断与运算流程如图4。一方面，A/D采样模块2得到的正弦数字量电压与余弦数字量电压相除可以得到相位的正切值，再通过arctan函数解调即可得到在本系统的Simulink仿真模型如图5所示，其中建立了信号生成模块、A/D采样模块、过零比较器模块与FPGA逻辑判断模块，其运行结果如图6所示，由仿真结果可以看到，本发明测得的是准确的，能够很好的跟踪上被测调相信号产生的相位变化的。这进一步说明了本方法的可行性。本技术领域的人员根据本发明所提供的文字描述、附图以及权利要求书能够很容易在不脱离权利要求书所限定的本发明的思想和范围条件下，可以做出多种变化和改动。凡是依据本发明的技术思想和实质对上述实施例进行的任何修改、等同变化，均属于本发明的权利要求所限定的保护范围之内。
