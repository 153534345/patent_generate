标题title
激光雷达的发射端电路及检测其驱动电流的方法
摘要abst
本发明提供了一种用于激光雷达的发射端电路，包括：驱动电路，用于向至少一个激光器施加驱动电压，以使所述至少一个激光器发光；检测电路，包括分压部和采样单元，用于检测所述至少一个激光器发光时的驱动电流，其中：所述分压部配置成对所述驱动电压进行分压，以向所述采样单元输出分压信号；所述采样单元配置成可根据所述发射端电路的系统时钟信号，对所述分压部上输出的分压信号进行采样，以获得相应的采样值。
权利要求书clms
1.一种用于激光雷达的发射端电路，包括：驱动电路，用于向至少一个激光器施加驱动电压，以使所述至少一个激光器发光；检测电路，包括分压部和采样单元，用于检测所述至少一个激光器发光时的驱动电流，其中：所述分压部配置成对所述驱动电压进行分压，以向所述采样单元输出分压信号；所述采样单元配置成可根据所述发射端电路的系统时钟信号，对所述分压部上输出的分压信号进行采样，以获得相应的采样值。2.如权利要求1所述的发射端电路，其中所述驱动电路包括电压源和开关器件，所述至少一个激光器的一端连接到所述电压源，另一端连接到所述开关器件以形成发光电流回路，所述开关器件根据所述系统时钟信号控制所述发光电流回路的导通和断开，所述电压源通过第一电容接地；其中所述分压部包括：第一分压电容，所述第一分压电容的第一端与所述电压源耦接；第二分压电容，所述第二分压电容的第一端与所述第一分压电容的第二端耦接，所述第二分压电容的第二端接地。3.如权利要求1或2所述的发射端电路，其中所述检测电路还包括：信号处理单元，与所述采样单元的输出端耦接，用于根据所述采样单元输出的采样值，确定所述至少一个激光器发光时的驱动电流。4.如权利要求2所述的发射端电路，其中所述检测电路还包括低通滤波单元，耦接在所述分压部与所述采样单元的输入端之间，用以减缓所述分压部上输出的分压信号的变化速度。5.如权利要求4所述的发射端电路，其中所述低通滤波单元包括：第一电阻，所述第一电阻的第一端与所述第一分压电容的第二端耦接，所述第一电阻的第二端与所述采样单元的输入端耦接；第二电阻，所述第二电阻的第一端与所述第一电阻的第二端耦接；第二电容，所述第二电容的第一端与所述采样单元的输入端耦接，所述第二电容的第二端接地；直流源，所述直流源与所述第二电阻的第二端耦接。6.如权利要求4或5所述的发射端电路，其中所述检测电路还包括增益单元，耦接在所述低通滤波单元与所述采样单元的输入端之间，用以还原所述分压部上输出的分压信号的电压幅度。7.如权利要求1或2所述的发射端电路，其中所述检测电路还包括：时钟调节部，配置成可调节所述系统时钟信号的脉冲周期和/或脉冲宽度，以向所述采样单元输出采样时钟信号；其中，所述采样单元根据与所述系统时钟信号对应的采样时钟信号，对所述分压部上输出的分压信号进行采样。8.根据权利要求7所述的发射端电路，其中所述时钟调节部包括周期扩展单元，配置成可接收所述系统时钟信号，并扩展所述系统时钟信号的信号周期，以输出扩展后的中间时钟信号。9.根据权利要求8所述的发射端电路，其中所述周期扩展单元采用单稳态电路构成，所述单稳态电路包括：第一D触发器，由所述系统时钟信号触发，输入端接高电平，反向输出端输出中间时钟信号；第一反相器，输入端与所述第一D触发器的反向输出端耦接；第三电容，第一端与所述第一反相器的输出端耦接，第二端接地；第二反相器，输入端与所述第三电容的第一端耦接，输出端与所述第一D触发器的复位端耦接。10.如权利要求9所述的发射端电路，其中所述周期扩展单元对于所述系统时钟信号的周期扩展长度由所述单稳态电路中的第三电容的参数来决定。11.如权利要求9或10所述的发射端电路，其中所述时钟调节部还包括脉宽扩展单元，配置成可根据所述系统时钟信号以及所述中间时钟信号，来生成采样时钟信号；其中，所述采样时钟信号的脉宽大于所述系统时钟信号的脉宽，并且，所述采样时钟信号的周期与所述中间时钟信号的周期相同。12.根据权利要求11所述的发射端电路，其中所述脉宽扩展单元包括：第二D触发器，由所述系统时钟信号的反向信号触发，输入端接高电平，复位端与所述第一D触发器的反向输出端耦接；或非门，两个输入端分别与所述第二D触发器的正向输出端和所述系统时钟信号的反向信号耦接；第三反相器，输入端与所述或非门的输出端耦接；第四电容，第一端与所述第三反相器的输出端耦接，第二端接地；第四反相器，输入端与所述第四电容的第一端耦接，第二端作为所述脉宽扩展单元的输出端输出所述采样时钟信号。13.如权利要求12所述的发射端电路，其中所述脉宽扩展单元对于所述系统时钟信号的脉宽扩展长度由所述第四电容的参数来决定。14.如权利要求1或2所述的发射端电路，其中所述采样单元包括模数转换器。15.根据权利要求1或2所述的发射端电路，其中所述驱动电路为高边管驱动。16.根据权利要求1或2所述的发射端电路，其中所述驱动电路的驱动电压范围为30-60v。17.一种检测激光雷达发射端电路的驱动电流的方法，包括：S101：通过驱动电路，向至少一个激光器施加驱动电压，以使所述至少一个激光器发光；S102：通过分压部对所述驱动电压进行分压，以输出分压信号；S103：通过采样单元，根据所述发射端电路的系统时钟信号，对所述分压部上输出的分压信号进行采样，以获得相应的采样值。18.如权利要求17所述的检测方法，还包括：通过信号处理单元接收所述采样单元输出的采样值，并确定所述至少一个激光器上的驱动电流。19.如权利要求17或18所述的检测方法，还包括：通过耦接在所述分压部与所述采样单元的输入端之间的低通滤波单元，减缓所述分压部上输出的分压信号的变化速度。20.如权利要求19所述的检测方法，还包括：通过耦接在所述低通滤波单元与所述采样单元的输入端之间的增益单元，还原所述分压部上输出的分压信号的电压幅度。21.如权利要求17或18所述的检测方法，还包括：通过时钟调节部调节所述系统时钟信号的脉冲周期和/或脉冲宽度，以向所述采样单元输出采样时钟信号。22.如权利要求21所述的检测方法，其中所述时钟调节部包括周期扩展单元，所述检测方法还包括：通过所述周期扩展单元接收所述系统时钟信号，并扩展所述系统时钟信号的脉冲周期，以输出扩展后的中间时钟信号。23.如权利要求22所述的检测方法，其中所述时钟调节部还包括脉宽扩展单元，所述检测方法还包括：通过所述脉宽扩展单元接收所述系统时钟信号以及所述中间时钟信号，并扩展所述中间时钟信号的脉冲宽度，以生成所述采样时钟信号。
说明书desc
技术领域本发明大致涉及激光雷达技术领域，尤其涉及一种激光雷达的发射端电路。背景技术在激光雷达发射系统中，发射端依靠高压驱动管为激光器提供电流，使激光器发光。而高压驱动管的阈值电压、迁移率等特性会随着温度、工艺角等因素变化，因此输出电流会存在温漂以及芯片间的不一致的问题。目前行业内没有有效解决上述输出电流不准问题的办法，一个主要原因是无法直接读取电流，而读取电流比较困难的原因有两点：一方面，由于动电流是从高压端流出，直接检测的话要求检测电路内部的器件都工作在高压域，检测电路里面的功能元件较多，用高压管实现会浪费较大的面积，同时由于面积大带来的寄生影响使得电路工作速度较慢。另一方面，由于当前场景下驱动电流是窄脉冲形式的电流信号，而量化窄脉冲信号的峰值有两种办法。第一种是依靠高速模数转换器，但高速模数转换器难以实现，此外电流值的变化速率较快，一旦采样时钟有偏差，测量误差将会特别大；第二种是将脉冲峰值展宽，用低速模数转换器来量化，但高压域的峰值保持电路较难实现。背景技术部分的内容仅仅是公开人所知晓的技术，并不当然代表本领域的现有技术。发明内容有鉴于现有技术的至少一个缺陷，本发明提供一种用于激光雷达的发射端电路，包括：驱动电路，用于向至少一个激光器施加驱动电压，以使所述至少一个激光器发光；检测电路，包括分压部和采样单元，用于检测所述至少一个激光器发光时的驱动电流，其中：所述分压部配置成对所述驱动电压进行分压，以向所述采样单元输出分压信号；所述采样单元配置成可根据所述发射端电路的系统时钟信号，对所述分压部上输出的分压信号进行采样，以获得相应的采样值。根据本发明的一个方面，其中所述驱动电路包括电压源和开关器件，所述至少一个激光器的一端连接到所述电压源，另一端连接到所述开关器件以形成发光电流回路，所述开关器件根据所述系统时钟信号控制所述发光电流回路的导通和断开，所述电压源通过第一电容接地；其中所述分压部包括：第一分压电容，所述第一分压电容的第一端与所述电压源耦接；第二分压电容，所述第二分压电容的第一端与所述第一电容的第二端耦接，所述第二分压电容的第二端接地。根据本发明的一个方面，其中所述检测电路还包括：信号处理单元，与所述采样单元的输出端耦接，用于根据所述采样单元输出的采样值，确定所述至少一个激光器发光时的驱动电流。根据本发明的一个方面，其中所述检测电路还包括低通滤波单元，耦接在所述分压部与所述采样单元的输入端之间，用以减缓所述分压部上输出的分压信号的变化速度。根据本发明的一个方面，其中所述低通滤波单元包括：第一电阻，所述第一电阻的第一端与所述第一分压电容的第二端耦接，所述第一电阻的第二端与所述采样单元的输入端耦接；第二电阻，所述第二电阻的第一端与所述第一电阻的第二端耦接；第二电容，所述第二电容的第一端与所述采样单元的输入端耦接，所述第二电容的第二端接地；直流源，所述直流源与所述第二电阻的第二端耦接。根据本发明的一个方面，其中所述检测电路还包括增益单元，耦接在所述低通滤波单元与所述采样单元的输入端之间，用以还原所述分压部上输出的分压信号的电压幅度。根据本发明的一个方面，其中所述检测电路还包括：时钟调节部，配置成可调节所述系统时钟信号的脉冲周期和/或脉冲宽度，以向所述采样单元输出采样时钟信号；其中，所述采样单元根据与所述系统时钟信号对应的采样时钟信号，对所述分压部上输出的分压信号进行采样。根据本发明的一个方面，其中所述时钟调节部包括周期扩展单元，配置成可接收所述系统时钟信号，并扩展所述系统时钟信号的信号周期，以输出扩展后的中间时钟信号。根据本发明的一个方面，其中所述周期扩展单元采用单稳态电路构成，所述单稳态电路包括：第一D触发器，由所述系统时钟信号触发，输入端接高电平，反向输出端输出中间时钟信号；第一反相器，输入端与所述第一D触发器的反向输出端耦接；第三电容，第一端与所述第一反相器的输出端耦接，第二端接地；第二反相器，输入端与所述第三电容的第一端耦接，输出端与所述第一D触发器的复位端耦接。根据本发明的一个方面，其中所述周期扩展单元对于所述系统时钟信号的周期扩展长度由所述单稳态电路中的第三电容的参数来决定。根据本发明的一个方面，其中所述时钟调节部还包括脉宽扩展单元，配置成可根据所述系统时钟信号以及所述中间时钟信号，来生成采样时钟信号；其中，所述采样时钟信号的脉宽大于所述系统时钟信号的脉宽，并且，所述采样时钟信号的周期与所述中间时钟信号的周期相同。根据本发明的一个方面，其中所述脉宽扩展单元包括：第二D触发器，由所述系统时钟信号的反向信号触发，输入端接高电平，复位端与所述第一D触发器的反向输出端耦接；或非门，两个输入端分别与所述第二D触发器的正向输出端和所述系统时钟信号的反向信号耦接；第三反相器，输入端与所述或非门的输出端耦接；第四电容，第一端与所述第三反相器的输出端耦接，第二端接地；第四反相器，输入端与所述第四电容的第一端耦接，第二端作为所述脉宽扩展单元的输出端输出所述采样时钟信号。根据本发明的一个方面，其中所述脉宽扩展单元对于所述系统时钟信号的脉宽扩展长度由所述第四电容的参数来决定。根据本发明的一个方面，其中所述采样单元包括模数转换器。根据本发明的一个方面，其中所述驱动电路为高边管驱动。根据本发明的一个方面，其中所述驱动电路的驱动电压范围为30-60v。本发明还提供一种检测激光雷达发射端电路的驱动电流的方法，包括：S101：通过驱动电路，向至少一个激光器施加驱动电压，以使所述至少一个激光器发光；S102：通过分压部对所述驱动电压进行分压，以输出分压信号；S103：通过采样单元，根据所述发射端电路的系统时钟信号，对所述分压部上输出的分压信号进行采样，以获得相应的采样值。根据本发明的一个方面，所述检测方法还包括：通过信号处理单元接收所述采样单元输出的采样值，并确定所述至少一个激光器上的驱动电流。根据本发明的一个方面，所述检测方法还包括：通过耦接在所述分压部与所述采样单元的输入端之间的低通滤波单元，减缓所述分压部上输出的分压信号的变化速度。根据本发明的一个方面，所述检测方法还包括：通过耦接在所述低通滤波单元与所述采样单元的输入端之间的增益单元，还原所述分压部上输出的分压信号的电压幅度。根据本发明的一个方面，所述检测方法还包括：通过时钟调节部调节所述系统时钟信号的脉冲周期和/或脉冲宽度，以向所述采样单元输出采样时钟信号。根据本发明的一个方面，其中所述时钟调节部包括周期扩展单元，所述检测方法还包括：通过所述周期扩展单元接收所述系统时钟信号，并扩展所述系统时钟信号的脉冲周期，以输出扩展后的中间时钟信号。根据本发明的一个方面，其中所述时钟调节部还包括脉宽扩展单元，所述检测方法还包括：通过所述脉宽扩展单元接收所述系统时钟信号以及所述中间时钟信号，并扩展所述中间时钟信号的脉冲宽度，以生成所述采样时钟信号。本发明的优选实施例提供了一种激光雷达的发射端电路，该发射端电路能够实现在低压侧检测高压侧的驱动电流，该电路实现的代价较低，无需高压域的电路元件，节省了电路面积，提高了电路的工作速度，且通过中低速模数转换器即可实现高速检测电流脉冲，解决了电流脉冲难以保持、难以同步测量的问题，本发明还提供了一种检测激光雷达发射端电路的驱动电流的方法。附图说明附图用来提供对本发明的进一步理解，并且构成说明书的一部分，与本发明的实施例一起用于解释本发明，并不构成对本发明的限制。在附图中：图1示意性地示出了根据本发明的一个优选实施例的发射端电路；图2示意性地示出了根据本发明的一个优选实施例的发射端电路；图3示意性地示出了根据本发明的一个优选实施例的发射端电路；图4示出了图3所示的发射端电路各个节点的输出波形时序图；图5示意性地示出了根据本发明的一个优选实施例的发射端电路；图6示意性地示出了根据本发明的一个优选实施例的发射端电路中的周期扩展单元；图7示意性地示出了根据本发明的一个优选实施例的发射端电路中的脉宽扩展单元；图8示出了根据本发明的一个优选实施例的发射端电路中周期扩展单元、脉宽扩展单元中各个节点的输出波形时序图；图9示出了图6所示的发射端电路各个节点的输出波形时序图；图10示出了根据本发明的一个优选实施例的发射端电路输出驱动电流的检测方法。具体实施方式在下文中，仅简单地描述了某些示例性实施例。正如本领域技术人员可认识到的那样，在不脱离本发明的精神或范围的情况下，可通过各种不同方式修改所描述的实施例。因此，附图和描述被认为本质上是示例性的而非限制性的。在本发明的描述中，需要理解的是，术语"中心"、"纵向"、"横向"、"长度"、"宽度"、"厚度"、"上"、"下"、"前"、"后"、"左"、"右"、"竖直"、"水平"、"顶"、"底"、"内"、"外"、"顺时针"、"逆时针"等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。此外，术语"第一"、"第二"仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有"第一"、"第二"的特征可以明示或者隐含地包括一个或者更多个所述特征。在本发明的描述中，"多个"的含义是两个或两个以上，除非另有明确具体的限定。在本发明的描述中，需要说明的是，除非另有明确的规定和限定，术语"安装"、"相连"、"连接"应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接:可以是机械连接，也可以是电连接或可以相互通讯；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通或两个元件的相互作用关系。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本发明中的具体含义。在本发明中，除非另有明确的规定和限定，第一特征在第二特征之"上"或之"下"可以包括第一和第二特征直接接触，也可以包括第一和第二特征不是直接接触而是通过它们之间的另外的特征接触。而且，第一特征在第二特征"之上"、"上方"和"上面"包括第一特征在第二特征正上方和斜上方，或仅仅表示第一特征水平高度高于第二特征。第一特征在第二特征"之下"、"下方"和"下面"包括第一特征在第二特征正上方和斜上方，或仅仅表示第一特征水平高度小于第二特征。下文的公开提供了许多不同的实施方式或例子用来实现本发明的不同结构。为了简化本发明的公开，下文中对特定例子的部件和设置进行描述。当然，它们仅仅为示例，并且目的不在于限制本发明。此外，本发明可以在不同例子中重复参考数字和/或参考字母，这种重复是为了简化和清楚的目的，其本身不指示所讨论各种实施方式和/或设置之间的关系。此外，本发明提供了的各种特定的工艺和材料的例子，但是本领域普通技术人员可以意识到其他工艺的应用和/或其他材料的使用。以下结合附图对本发明的实施例进行说明，应当理解，此处所描述的实施例仅用于说明和解释本发明，并不用于限定本发明。本发明提供一种适用于激光雷达发射系统的芯片内部自动检测高压输出电流的电路，该电路结构的原理基于以下公式：Q＝C·ΔV＝I·Δt 则：I＝/Δt 考虑到高压电容是固定的，因此在控制Δt不变的前提下，测量ΔV即可等效测量输出电流。基于上述检测原理，本发明提供一种基于对高压电容上电压变化的检测来确定高压输出电流的电路结构与测量方法。如图1所示，根据本发明一个优选实施例，本发明提供一种激光雷达的发射端电路10，包括：驱动电路11和检测电路12。驱动电路11用于向至少一个激光器、边发射型激光器中的一种或多种，而不仅限于图1中所示的情形)施加驱动电压VHVDD，以使至少一个激光器13发光。检测电路12包括分压部121和采样单元122，用于检测至少一个激光器13发光时的驱动电流。其中，分压部121配置成对驱动电压VHVDD进行分压，以向采样单元122输出分压信号。采样单元122配置成可根据发射端电路10的系统时钟信号CLK，对分压部121上输出的分压信号进行采样，以获得相应的采样值。根据本发明的一个优选实施例，如图1所示，发射端电路10中的驱动电路11包括电压源111和开关器件112，至少一个激光器13的一端连接到电压源111，另一端连接到开关器件112以形成发光电流回路，开关器件112根据系统时钟信号CLK控制所述发光电流回路的导通和断开，电压源111通过第一电容113接地。可以根据第一电容113上电压的变化值，计算驱动电路端输出的驱动电流的大小。优选地，检测电路12中的分压部121包括：串联在电压源111上的第一分压电容1211和第二分压电容1212。其中第一分压电容1211的第一端与电压源111耦接，第一分压电容1211的第二端与第二分压电容1212的第一端耦接。第二分压电容1212的第一端与第一分压电容1211的第二端耦接，第二分压电容1212的第二端接地。系统时钟信号CLK作为触发信号来临后，开关器件112导通，即驱动管开启，此时电压源111会向至少一个激光器13施加驱动电压VHVDD，从而产生压降。利用第一分压电容1211和第二分压电容1212进行分压，将VHVDD的变化耦合到检测电路12中。优选地，采样单元122包括模数转换器，根据上文所述的检测原理，基于系统时钟信号CLK来确定Δt，并读出第一分压电容1211和第二分压电容1212之间输出的分压信号，进而确定驱动电路端的输出电流I。但由于系统时钟信号CLK的脉宽很窄，至少一个激光器13上的驱动电压VHVDD的变化速度很快，直接检测该信号会对模数转换器的要求十分苛刻。根据本发明的一个优选实施例，发射端电路10中的检测电路12还包括信号处理单元123。信号处理单元123与采样单元122的输出端耦接，用于根据采样单元122输出的采样值，确定至少一个激光器13发光时的驱动电流。本发明的优选实施例实现了自动检测驱动电路端输出电流的功能，可通过读取采样单元122的输出码值得到芯片输出电流值的信息。假设检测电路12的满量程为20A，采用10bit的模数转换器作为采样单元122，则电流为0时，输出码值为0；电流为20A时，输出码值为1023；电流为10A时，输出码值为511；电流为5A时，输出码值为255；将0至20A的电流线性的量化，共得到1024个量化值。根据本发明的一个优选实施例，如图2所示，检测电路12还包括低通滤波单元124，耦接在分压部121与采样单元122的输入端之间，用以减缓分压部121上输出的分压信号的变化速度。低通滤波单元124包括：第一电阻1241、第二电阻1242、第二电容1243和直流源1244。第一电阻1241的第一端与第一分压电容1211的第二端耦接，第一电阻1241的第二端与采样单元122的输入端耦接。第二电阻1242的第一端与第一电阻1241的第二端耦接，第二电阻1242的第二端与直流源1244耦接。第二电容1243的第一端与采样单元122的输入端耦接，第二电容1243的第二端接地。在分压部121进行分压耦合后加入低通滤波单元124，减缓信号变化速度，便于采样单元122采样。低通滤波单元124由第一电阻1241、第二电阻1242、第二分压电容1212、第二电容1243共同作用实现，第二电阻1242的第二端接直流源1244，直流源1244提供固定电压，通常也是采样单元122的参考电压的上限。其作用在于固定采样单元122对应的采样电压Vo的直流点，Vo通常在采样单元122的参考电压的上下限之间变化。例如，采样单元122参考电压的上限为3.2V，下限为1.6V，则Vo的变化范围为从3.2V向下变化至1.6V，采样单元122的量化范围是1.6V至3.2V，而VHVDD的变化可基于公式确定。假定第一电容113的容值C＝40nF，最大测量电流I＝20A，时间t＝5ns，则变化的范围V＝20A*5ns/40nF＝2.5V。这种情况下VHVDD变化区间为40V至37.5V。因此考虑输入电压只能朝下降方向变化，利用第二电阻1242固定采样网络的直流点为采样单元参考电压的上限，有效利用采样单元的量化范围。可以推导从VHVDD到Vo的增益如下：根据本发明的一个优选实施例，如图2所示，检测电路12还包括增益单元125，耦接在低通滤波单元124与采样单元122的输入端之间，用以还原分压部121上输出的分压信号的电压幅度。低通滤波会造成信号峰值的衰减，在低通滤波后面引入增益级还原信号幅度，增益级的输出送入模数转换器被量化。继续基于前述实施例，20A的电流对应VHVDD最大变化2.5V，然后通过调节第一分压电容1211、第二分压电容1212、第二电容1243、第一电阻1241、第二电阻1242的值以及增益单元125的增益，保证VHVDD到采样单元122的输入端的增益是/，即可以满足采样单元对应到满量程20A。如图3所示，根据本发明的一个优选实施例，在芯片本身具有合适的系统时钟的情况下，可以根据系统时钟信号CLK触发采样单元122直接进行采样。基于高速模数转换器的采样单元122，利用系统时钟信号CLK作为采样时钟信号CLK_ADC，对分压部121上输出的分压信号直接进行采样。图3所示的实施例省去了对系统时钟信号的周期和脉宽进行调整的工作，更有利于采样时钟信号与系统时钟信号的对齐，电路内部的部件简单，易于集成。图3所示的优选实施例各个节点的输出波形如图4所示，在开关器件112导通的瞬间，至少一个激光器13上的电压VHVDD下降，再通过第一电容113充电回升，脉冲Vo为采样单元122对应的采样电压，Vo与VHVDD的关系由上述公式确定。通过低通滤波单元124，减缓了Vo相对于至少一个激光器13上电压的变化速度，本实施例中的采样时钟信号CLK_ADC即为系统时钟信号CLK。如图4中所示，该系统时钟信号CLK具有合适的脉宽和周期，可以根据系统时钟信号CLK触发采样单元122直接进行采样。DOUT为采样单元122根据系统时钟信号CLK的触发对采样电压Vo的峰值电压进行采样得到的波形，可以通过Vo的峰值变化值反推出至少一个激光器13上的电压VHVDD的变化值，并根据上述公式、计算发射端电路10输出的驱动电流。然而，通常情况下，激光雷达发射系统的芯片不会提供刚好满足要求的时钟，因此需要在分压部121进行分压耦合、低通滤波单元124进行低通滤波后，加入时钟调节部。如图5所示，根据本发明的一个优选实施例，发射端电路10中的检测电路12还包括时钟调节部126。时钟调节部126配置成可调节系统时钟信号CLK的脉冲周期和/或脉冲宽度，以向采样单元122输出采样时钟信号CLK_ADC。其中，采样单元122根据与系统时钟信号CLK对应的采样时钟信号CLK_ADC，对分压部121上输出的分压信号进行采样。根据本发明的一个优选实施例，如图5所示，其中时钟调节部126包括周期扩展单元127，配置成可接收系统时钟信号CLK，并扩展系统时钟信号CLK的信号周期，以输出扩展后的中间时钟信号CLK1。周期扩展单元127采用单稳态电路构成，如图6所示，所述单稳态电路包括：第一D触发器1271，由系统时钟信号CLK触发，输入端接高电平，输出端输出中间时钟信号CLK1。第一反相器1272，输入端与第一D触发器1271的反向输出端耦接。第三电容1273，第一端与第一反相器1272的输出端耦接，第二端接地。第二反相器1274，输入端与第三电容1273的第一端耦接，输出端与第一D触发器1271的复位端耦接。如图6所示的单稳态电路中，第一D触发器1271的输入端接高电平，由系统时钟信号CLK触发，反向输出端移位输出低电平，经过两个反相器后，向复位端输出低电平。在D触发器中，复位端触发的优先级高于输入端，且该D触发器为RST/N触发，即：当向复位端输出低电平时，反向输出端输出高电平。当第二反相器1274向复位端输出一次低电平时，反向输出端输出高电平，并保持一段时间，直到下一个时钟周期到来时，反向输出端移位输出低电平，此时，两个反相器之间的节点，如图6中所示的A点，从低电平变为高电平需要重新充电，当A点充电到高电平时，通过第二反相器1274输出低电平，即向复位端输出低电平，反向输出端此时输出高电平，重复上述过程。该单稳态电路既拉长了系统时钟信号CLK的周期，获得周期相比于系统时钟信号CLK长的中间时钟信号CLK1，又使中间时钟信号CLK1的每一次变化与系统时钟信号CLK的变化对齐，从而获得与系统时钟信号CLK相对应的周期展宽的时钟信号。对应的时序图如图8所示，可以看出，第一D触发器1271的反向输出端输出中间时钟信号CLK1，QN输出高电平由第一D触发器1271的复位端触发，QN输出低电平由下一次系统时钟信号CLK触发，QN输出的中间时钟信号CLK1的周期长度由A点的充电时间决定，也就是说，周期扩展单元127对于系统时钟信号CLK的周期扩展长度由所述单稳态电路中的第三电容1273的参数来决定。根据本发明的一个优选实施例，如图5所示，其中时钟调节部126还包括脉宽扩展单元128。脉宽扩展单元128配置成可根据系统时钟信号CLK以及中间时钟信号CLK1，来生成采样时钟信号CLK_ADC。其中，采样时钟信号CLK_ADC的脉宽大于系统时钟信号CLK的脉宽，并且，采样时钟信号CLK_ADC的周期与中间时钟信号CLK1的周期相同。如图7所示，其中脉宽扩展单元127包括：第二D触发器1281，由系统时钟信号CLK的反向信号触发，输入端接高电平，复位端与第一D触发器1271的反向输出端耦接。或非门1282，两个输入端分别与第二D触发器1281的正向输出端和系统时钟信号CLK的反向信号耦接。第三反相器1283，输入端与或非门1282的输出端耦接。第四电容1284，第一端与第三反相器1283的输出端耦接，第二端接地。第四反相器1285，输入端与第四电容1284的第一端耦接，第二端作为脉宽扩展单元128的输出端输出采样时钟信号CLK_ADC。如图7所示，或非门1282的两个输入端分别输入系统时钟信号CLK的反向信号，以及第二D触发器1281的输出，由于第二D触发器1281的输入端接高电平，在没有向第二D触发器1281的复位端输出触发信号的情况下，第二D触发器1281的输出端持续输出高电平，则或非门1282持续输出低电平。第二D触发器1281的复位端与单稳态电路中的第一D触发器1271输出端耦接，当第一D触发器1271输出的中间时钟信号CLK1与系统时钟信号CLK的反向信号同时输出低电平时，或非门1282的输出发生反转，即或非门1282输出高电平，并通过两个反相器将高电平输出，作为系统时钟信号CLK_ADC，并保持一段时间。当系统时钟信号CLK的反向信号重新变为高电平时，或非门1282的输出重新变为低电平，此时，两个反相器之间的节点，如图7中所示的B点，从低电平变为高电平需要重新充电，当B点充电到高电平时，通过第四反相器1285输出低电平，即将输出的采样时钟信号CLK_ADC变为低电平。该脉宽扩展单元128输出采样时钟信号CLK_ADC，采样时钟信号CLK_ADC相较于系统时钟信号CLK的脉宽得到展宽，且该采样时钟信号CLK_ADC的周期与中间时钟信号CLK1的周期相同，既使系统获得了周期拉长、脉宽展宽的采样时钟信号CLK_ADC，且该采样时钟信号CLK_ADC的每一次变化与系统时钟信号CLK的变化对齐。对应的时序图如图8所示，可以看出，采样时钟信号CLK_ADC的上升沿由中间时钟信号CLK1和与之对齐的系统时钟信号CLK触发，采样时钟信号CLK_ADC的脉宽由B点的充电时间决定，也就是说，脉宽扩展单元128对于系统时钟信号CLK的脉宽扩展长度由第四电容1274的参数来决定。由于时钟周期的时间受限于采样单元的转换速度，受工艺、功耗、面积的限制，以10bit的模数转换器为例，其转换速度在1M附近，因此需要把模数转换器的输入时钟周期控制在不低于1μs。扩展脉冲宽度同样是为了降低模数转换器的负担，若脉冲宽度太窄，要求模数转换器的采样网络带宽很大，难以实现。如图9所示，采样单元，优选地为模数转换器工作需要采样时钟，且要求采样时刻与被采样信号的峰值对齐。在根据本方案的一个实施例中，ADC采样时刻由采样时钟信号CLK_ADC的下降沿触发，亦即，该实施例中，需要采样时钟信号CLK_ADC的下降沿与Vo的峰值对齐。如前所述，采样时钟信号CLK_ADC的脉宽由B点的充电时间决定，因此，通过调节B点处所采用的第四电容1274的性能参数，可使得采样时钟信号CLK_ADC的下降沿与采样电压Vo的峰值点对应。从而获得尽可能准确的采样信息。在激光雷达发射系统的芯片没有全局时钟的情况下，本发明的优选实施例利用周期扩展单元和脉宽扩展单元，将输入系统时钟信号转化成模数转换器所需的时钟信号。单稳态电路把重复周期为200ns的信号转换成重复周期为1μs的信号，也可看做消除1μs内的重复脉冲。整形电路用于将脉冲宽度从5ns转化成100ns。这样送入模数转换器的为周期1μs，占空比为10％的时钟信号。此外模数转换器的输出是被寄存器锁存的，所以在一个周期内是不会变化的，每次经采样时钟信号CLK_ADC触发之后会刷新对采样电压Vo的峰值电压进行采样得到的波形DOUT的值。假定前一个周期内VHVDD的变化相同，则采样波形DOUT一直输出同一个值，亦即其波形为如图9所示的一直线。本发明的优选实施例通过采用包括单稳态电路的周期扩展单元和包括整形电路的脉宽扩展单元，将系统时钟的周期拉长、脉宽展宽，从而为采用中低速模数转换器对高速变化的驱动电压进行采样成为可能，进而解决了驱动电流的脉冲难以保持、难以同步测量的技术问题。根据本发明的一个优选实施例，发射端电路10中的驱动电路11为高边管驱动，驱动电路11的驱动电压范围为30-60v。根据本发明的一个优选实施例，如图10所示，本发明还提供一种检测激光雷达发射端电路的驱动电流的方法100，包括：在步骤S101中，通过驱动电路，向至少一个激光器施加驱动电压，以使所述至少一个激光器发光；在步骤S102中，通过分压部对所述驱动电压进行分压，以输出分压信号；在步骤S103中，通过采样单元，根据所述发射端电路的系统时钟信号，对所述分压部上输出的分压信号进行采样，以获得相应的采样值。根据本发明的一个优选实施例，检测方法100还包括：通过信号处理单元接收所述采样单元输出的采样值，并确定所述至少一个激光器上的驱动电流。根据本发明的一个优选实施例，检测方法100还包括：通过耦接在所述分压部与所述采样单元的输入端之间的低通滤波单元，减缓所述分压部上输出的分压信号的变化速度。根据本发明的一个优选实施例，检测方法100还包括：通过耦接在所述低通滤波单元与所述采样单元的输入端之间的增益单元，还原所述分压部上输出的分压信号的电压幅度。根据本发明的一个优选实施例，检测方法100还包括：通过时钟调节部调节所述系统时钟信号的脉冲周期和/或脉冲宽度，以向所述采样单元输出采样时钟信号。根据本发明的一个优选实施例，其中所述时钟调节部包括周期扩展单元，所述检测方法100还包括：通过所述周期扩展单元接收所述系统时钟信号，并扩展所述系统时钟信号的脉冲周期，以输出扩展后的中间时钟信号。根据本发明的一个优选实施例，其中所述时钟调节部还包括脉宽扩展单元，所述检测方法100还包括：通过所述脉宽扩展单元接收所述系统时钟信号以及所述中间时钟信号，并扩展所述中间时钟信号的脉冲宽度，以生成所述采样时钟信号。本发明的优选实施例提供了一种激光雷达的发射端电路，该发射端电路能够实现在低压侧检测高压侧的驱动电流，该电路实现的代价较低，无需高压域的电路元件，节省了电路面积，提高了电路的工作速度，且通过中低速模数转换器即可实现高速检测电流脉冲，解决了电流脉冲难以保持、难以同步测量的问题，本发明还提供了一种检测激光雷达发射端电路的驱动电流的方法。最后应说明的是：以上所述仅为本发明的优选实施例而已，并不用于限制本发明，尽管参照前述实施例对本发明进行了详细的说明，对于本领域的技术人员来说，其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
