标题title
多光谱调制输出光源装置及调制方法
摘要abst
本发明提供了一种多光谱调制输出光源装置及调制方法。其中，多光谱调制输出光源装置，包括，分光模块、控制模块和光耦合模块；其中分光模块，用于将入射光调制为多光谱的光；所述耦合模块，用于耦合所述多光谱的光，并将耦合后的光输出；所述控制模块，用于控制分光模块波长编码。通过控制模块控制分光模块对入射光进行波长编码从而得到多光谱的光，并将调制后的多光谱光耦合输出，控制模块可以根据耦合输出的成像结果，对光的波长进行调制，从而获得高对比度的成像的目的。
权利要求书clms
1.一种多光谱调制输出光源装置，其特征在于，包括分光模块、控制模块和光耦合模块；其中分光模块，用于将入射光调制为多光谱的光；所述耦合模块，用于耦合所述多光谱的光，并将耦合后的光输出；所述控制模块，用于控制分光模块波长编码。2.根据权利要求1所述的多光谱调制输出光源装置，其特征在于，所述分光模块，包括第一透镜、光栅、第二透镜和数字微镜器件，所述数字微镜器件包括多个微镜单元；所述第一透镜将入射光变为平行光束，所述光栅对平行光束进行分光后得到不同波长的光，所述第二透镜将不同波长的光汇聚至不同的微镜单元上。3.根据权利要求2所述的多光谱调制输出光源装置，其特征在于，所述数字微镜器件设置在第二透镜的焦平面上。4.根据权利要求2所述的多光谱调制输出光源装置，其特征在于，所述控制模块，包括控制器和控制板卡；所述控制器的信号通过控制板卡传送至分光模块，所述控制器用于控制微镜单元的方向及工作状态的持续时间，将指定波长的光在指定时间内反射至光耦合模块中。5.根据权利要求4所述的多光谱调制输出光源装置，其特征在于，所述微镜单元包括开状态或关状态；控制模块通过控制指定波长所对应的微镜单元处于开状态及开状态的持续时间，并控制其它微镜单元处于关状态，实现多光谱调制，其它微镜单元为指定波长所对应的微镜单元之外的微镜单元。6.根据权利要求5所述的多光谱调制输出光源装置，其特征在于，控制模块通过控制指定波长所对应的微镜单元处于开状态及开状态的持续时间中，控制指定波长的光所对应的微镜单元序数的计算公式为：，其中，表示向下取整，为光栅刻线密度，为透镜焦距，为单个微镜单元的横向工作长度，为入射光角度，为设定的最小工作波长。7.根据权利要求2所述的多光谱调制输出光源装置，其特征在于，所述耦合模块，包括透镜组和光纤；所述透镜组，用于将分光模块调制后的光汇聚并耦合进光纤中；所述光纤，用于将耦合后的光输出。8.根据权利要求2所述的多光谱调制输出光源装置，其特征在于，分光模块调制后的波长范围，通过调整入射光角度、光栅刻线密度、第二透镜的焦距和数字微镜器件横向工作长度调制。9.根据权利要求2所述的多光谱调制输出光源装置，其特征在于，波长范围调整公式为：，其中，为入射光角度，为设定的最小工作波长，为最大工作波长，为光栅刻线密度，为第二透镜焦距，L为数字微镜器件的横向工作长度。10.一种多光谱调制输出光源调制方法，基于权利要求1至9任一所述的装置，所述耦合模块后设置成像装置，耦合模块输出的光被成像装置采集为图像，其特征在于，包括，利用聚类算法将图像上各个位置聚类为目标和背景两类，并计算目标和背景两类的差别，得到计算结果；基于计算结果，对输出光的波长及其权重以设定的步长进行调整后，耦合模块输出调制后的光，成像装置采集调制后的光得到调制后图像，再次利用聚类算法计算调制后图像的目标和背景两类的差别，基于差别结果调制设定步长；迭代优化输出的光源波长及其权重，当成像结果与上次的成像结果的差别小于设定阈值后，停止迭代则实现最优的光源输出；基于差别结果调制设定步长包括若差别加大则加大设定步长，反之则减小设定步长。
说明书desc
技术领域本发明属于内镜窄带成像技术领域，尤其是涉及一种多光谱调制输出光源装置及调制方法。背景技术传统的电子内镜使用氙灯作为照明光，这种被称为“白光”的宽带光谱实际上是由R/G/B3种光组成的。内镜窄带成像系统采用窄带滤光器代替传统的宽带滤光器，对不同波长的光进行限定，仅留下绿、蓝色窄带光波。窄带光波穿透胃肠道黏膜的深度是不同的，蓝色波段穿透较浅用于显示黏膜下血管网，绿色波段则能较好地显示中间层的血管。由于黏膜内血液的光学特性对蓝、绿光吸收较强，因此使用难以扩散并能被血液吸收的光波，能够增加黏膜上皮和黏膜下血管的对比度和清晰度。但现有技术中光源无法根据成像结果调整波长，从而存在对比度不足的问题。发明内容针对现有技术中存在的问题，本发明提供了一种多光谱调制输出光源装置及调制方法，至少部分的解决现有技术中存在的成像对比度不足的问题。第一方面，本公开实施例提供了一种多光谱调制输出光源装置，包括分光模块、控制模块和光耦合模块；其中分光模块，用于将入射光调制为多光谱的光；所述耦合模块，用于耦合所述多光谱的光，并将耦合后的光输出；所述控制模块，用于控制分光模块波长编码。可选的，所述分光模块，包括第一透镜、光栅、第二透镜和数字微镜器件，所述数字微镜器件包括多个微镜单元；所述第一透镜将入射光变为平行光束，所述光栅对平行光束进行分光后得到不同波长的光，所述第二透镜将不同波长的光汇聚至不同的微镜单元上。可选的，所述数字微镜器件设置在第二透镜的焦平面上。可选的，所述控制模块，包括控制器和控制板卡；所述控制器的信号通过控制板卡传送至分光模块，所述控制器用于控制微镜单元的方向及工作状态的持续时间，将指定波长的光在指定时间内反射至光耦合模块中。可选的，所述微镜单元包括开状态或关状态；控制模块通过控制指定波长所对应的微镜单元处于开状态及开状态的持续时间，并控制其它微镜单元处于关状态，实现多光谱调制，其它微镜单元为指定波长所对应的微镜单元之外的微镜单元。可选的，控制模块通过控制指定波长所对应的微镜单元处于开状态及开状态的持续时间中，控制指定波长的光所对应的微镜单元序数的计算公式为：，其中，表示向下取整，为光栅刻线密度，为透镜焦距，为单个微镜单元的横向工作长度，为入射光角度，为设定的最小工作波长。可选的，所述耦合模块，包括透镜组和光纤；所述透镜组，用于将分光模块调制后的光汇聚并耦合进光纤中；所述光纤，用于将耦合后的光输出。可选的，分光模块调制后的波长范围，通过调整入射光角度、光栅刻线密度、第二透镜的焦距和数字微镜器件横向工作长度调制。可选的，波长范围调整公式为：，其中，为入射光角度，为设定的最小工作波长，为最大工作波长，为光栅刻线密度，为透镜焦距，L为数字微镜器件的横向工作长度。第二方面，本公开实施例还提供了一种多光谱调制输出光源调制方法，基于第一方面任一所述的装置，所述耦合模块后设置成像装置，耦合模块输出的光被成像装置采集为图像，包括，利用聚类算法将图像上各个位置聚类为目标和背景两类，并计算目标和背景两类的差别，得到计算结果；基于计算结果，对输出光的波长及其权重以设定的步长进行调整后，耦合模块输出调制后的光，成像装置采集调制后的光得到调制后图像，再次利用聚类算法计算调制后图像的目标和背景两类的差别，基于差别结果调制设定步长；迭代优化输出的光源波长及其权重，当成像结果与上次的成像结果的差别小于设定阈值后，停止迭代则实现最优的光源输出；基于差别结果调制设定步长包括若差别加大则加大设定步长，反之则减小设定步长。本发明提供的多光谱调制输出光源装置及调制方法，其中多光谱调制输出光源装置，通过控制模块控制分光模块对入射光进行波长编码从而得到多光谱的光，并将调制后的多光谱光耦合输出，控制模块可以根据耦合输出的成像结果，对光的波长进行调制，从而获得高对比度的成像的目的。而在调制方法中通过成像结果中目标和背景的差别，优化输出的光源波长及其权重，从而对输出的光进行自使用调制，实现最优的光源输出。附图说明通过结合附图对本公开示例性实施例进行更详细的描述，本公开的上述以及其它目的、特征和优势将变得更加明显，其中，在本公开示例性实施例中，相同的参考标号通常代表相同部件。图1为本公开实施例提供的一种多光谱调制输出光源装置的原理框图图；图2a为本公开实施例提供的白光光源条件下的成像效果示意图；图2b为本公开实施例提供的采用本发明调制方法后光源下的成像效果示意图；附图说明：1-白光光源；2-第一透镜；3-光栅；4-第二透镜；5-数字微镜器件；6-透镜组；7-光纤；8-灰度相机；9-控制板卡；10-计算机。具体实施方式下面结合附图对本公开实施例进行详细描述。应当明确，以下通过特定的具体实例说明本公开的实施方式，本领域技术人员可由本说明书所揭露的内容轻易地了解本公开的其他优点与功效。显然，所描述的实施例仅仅是本公开一部分实施例，而不是全部的实施例。本公开还可以通过另外不同的具体实施方式加以实施或应用，本说明书中的各项细节也可以基于不同观点与应用，在没有背离本公开的精神下进行各种修饰或改变。需说明的是，在不冲突的情况下，以下实施例及实施例中的特征可以相互组合。基于本公开中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本公开保护的范围。需要说明的是，下文描述在所附权利要求书的范围内的实施例的各种方面。应显而易见，本文中所描述的方面可体现于广泛多种形式中，且本文中所描述的任何特定结构及/或功能仅为说明性的。基于本公开，所属领域的技术人员应了解，本文中所描述的一个方面可与任何其它方面独立地实施，且可以各种方式组合这些方面中的两者或两者以上。举例来说，可使用本文中所阐述的任何数目个方面来实施设备及/或实践方法。另外，可使用除了本文中所阐述的方面中的一或多者之外的其它结构及/或功能性实施此设备及/或实践此方法。还需要说明的是，以下实施例中所提供的图示仅以示意方式说明本公开的基本构想，图式中仅显示与本公开中有关的组件而非按照实际实施时的组件数目、形状及尺寸绘制，其实际实施时各组件的型态、数量及比例可为一种随意的改变，且其组件布局型态也可能更为复杂。另外，在以下描述中，提供具体细节是为了便于透彻理解实例。然而，所属领域的技术人员将理解，可在没有这些特定细节的情况下实践所述方面。为了便于理解，如图1所示，本实施例公开了一种多光谱调制输出光源装置，包括分光模块、控制模块和光耦合模块；其中分光模块，用于将入射光调制为多光谱的光；可选的，所述分光模块，包括第一透镜2、光栅3、第二透镜4和数字微镜器件5，所述数字微镜器件5包括多个微镜单元；所述第一透镜2将入射光变为平行光束，所述光栅3对平行光束进行分光后得到不同波长的光，所述第二透镜4将不同波长的光汇聚至不同的微镜单元上。在一个具体的应用场景中，入射光源为白光光源1，白光光源1发出的可见光经第一透镜2准直为平行白光束，平行白光束经由光栅3分光，然后通过第二透镜4后，不同波长的光将分别汇聚在数字微镜器件5的不同微镜单元上。所述微镜单元包括开状态或关状态。所述耦合模块，用于耦合所述多光谱的光，并将耦合后的光输出；可选的，所述耦合模块，包括透镜组6和光纤7；所述透镜组6，用于将分光模块调制后的光汇聚并耦合进光纤7中；透镜组6包括两个或两个以上的凸透镜。所述光纤7，用于将耦合后的光输出。所述控制模块，用于控制分光模块波长编码。可选的，所述控制模块，包括控制器和控制板卡9；在一个具体的示例中控制器可以为计算机10。所述控制器的信号通过控制板卡9传送至分光模块，所述控制器用于控制微镜单元的方向及工作状态的持续时间，将指定波长的光在指定时间内反射至光耦合模块中。控制模块通过控制指定波长所对应的微镜单元处于开状态及开状态的持续时间，并控制其它微镜单元处于关状态，实现多光谱调制，其它微镜单元为指定波长所对应的微镜单元之外的微镜单元。可选的，所述数字微镜器件5设置在第二透镜4的焦平面上。可选的，控制模块通过控制指定波长所对应的微镜单元处于开状态及开状态的持续时间中，控制指定波长的光所对应的微镜单元序数的计算公式为：，其中，表示向下取整，为光栅刻线密度，为透镜焦距，为单个微镜单元的横向工作长度，为入射光角度，为设定的最小工作波长。可选的，分光模块调制后的波长范围，通过调整入射光角度、光栅刻线密度、第二透镜4的焦距和数字微镜器件5横向工作长度调制。可选的，波长范围调整公式为：，其中，为入射光角度，为设定的最小工作波长，为最大工作波长，为光栅刻线密度，为透镜焦距，L为数字微镜器件5的横向工作长度。本实施例还公开了一种多光谱调制输出光源调制方法，所述耦合模块后设置成像装置，在一个具体的示例中，成像装置可以为灰度相机8，耦合模块输出的光被成像装置采集为图像，包括，利用聚类算法将图像上各个位置聚类为目标和背景两类，并计算目标和背景两类的差别，得到计算结果；基于计算结果，对输出光的波长及其权重以设定的步长进行调整后，耦合模块输出调制后的光，成像装置采集调制后的光得到调制后图像，再次利用聚类算法计算调制后图像的目标和背景两类的差别，基于差别结果调制设定步长；迭代优化输出的光源波长及其权重，当成像结果与上次的成像结果的差别小于设定阈值后，停止迭代则实现最优的光源输出；基于差别结果调制设定步长包括若差别加大则加大设定步长，反之则减小设定步长。在一个具体的示例中，调制方法具体包括：步骤1、白光光源1发出的可见光经第一透镜2准直为平行白光束，第一透镜2包括准直透镜组6，平行白光束经由光栅3分光，通过第二透镜4后，不同波长的光将分别汇聚在数字微镜器件5的不同微镜单元上。步骤2、设定初始输出照明光束的波长及其权重，通过控制板卡9及计算机10控制数字微镜器件5上调节各微镜单元的开关时间，控制不同窄带光谱的曝光时间，进而实现指定的输出照明光束。步骤3、数字微镜器件5编码后的照明光束经汇聚透镜组6汇聚至光纤7，经光纤7耦合后包含光谱权重的照明光束照在待测样本上，通过光纤7与灰度相机8采集待测样本图像。步骤4、根据K-Means算法，将采集到的图像根据其灰度信息将图像上各像素点聚类为2个类别。生成2个灰度值作为聚类中心，计算每个像素的灰度值到 2个聚类中心的距离，并将每个像素的灰度值分到距离最小的聚类中心所对应的类中，再对每类样本重新计算聚类中心的灰度值，重复计算，当新生成聚类中心与上一次聚类中心灰度值的差值小于设定差值阈值，计算终止并记录此时的均方误差；步骤5、以特定步长调整权重，重复步骤2到4，比较此时的均方误差与上一次光谱权重下的均方误差。若均方误差减小，则增大步长调整权重；反之，则减小步长反方向调整权重。重复上述操作，直至均方误差变化小于设定阈值。上述迭代优化过程可以自适应地调节输出的照明光束，直至适合于该不同颜色色块的样本的高对比度成像，其结果如图2a和图2b所示。以上结合具体实施例描述了本公开的基本原理，但是，需要指出的是，在本公开中提及的优点、优势、效果等仅是示例而非限制，不能认为这些优点、优势、效果等是本公开的各个实施例必须具备的。另外，上述公开的具体细节仅是为了示例的作用和便于理解的作用，而非限制，上述细节并不限制本公开为必须采用上述具体的细节来实现。在本公开中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序，本公开中涉及的器件、装置、设备、系统的方框图仅作为例示性的例子并且不意图要求或暗示必须按照方框图示出的方式进行连接、布置、配置。如本领域技术人员将认识到的，可以按任意方式连接、布置、配置这些器件、装置、设备、系统。诸如“包括”、“包含”、“具有”等等的词语是开放性词汇，指“包括但不限于”，且可与其互换使用。这里所使用的词汇“或”和“和”指词汇“和/或”，且可与其互换使用，除非上下文明确指示不是如此。这里所使用的词汇“诸如”指词组“诸如但不限于”，且可与其互换使用。另外，如在此使用的，在以“至少一个”开始的项的列举中使用的“或”指示分离的列举，以便例如“A、B或C的至少一个”的列举意味着A或B或C，或AB或AC或BC，或ABC。此外，措辞“示例的”不意味着描述的例子是优选的或者比其他例子更好。还需要指出的是，在本公开的系统和方法中，各部件或各步骤是可以分解和/或重新组合的。这些分解和/或重新组合应视为本公开的等效方案。可以不脱离由所附权利要求定义的教导的技术而进行对在此所述的技术的各种改变、替换和更改。此外，本公开的权利要求的范围不限于以上所述的处理、机器、制造、事件的组成、手段、方法和动作的具体方面。可以利用与在此所述的相应方面进行基本相同的功能或者实现基本相同的结果的当前存在的或者稍后要开发的处理、机器、制造、事件的组成、手段、方法或动作。因而，所附权利要求包括在其范围内的这样的处理、机器、制造、事件的组成、手段、方法或动作。提供所公开的方面的以上描述以使本领域的任何技术人员能够做出或者使用本公开。对这些方面的各种修改对于本领域技术人员而言是非常显而易见的，并且在此定义的一般原理可以应用于其他方面而不脱离本公开的范围。因此，本公开不意图被限制到在此示出的方面，而是按照与在此公开的原理和新颖的特征一致的最宽范围。为了例示和描述的目的已经给出了以上描述。此外，此描述不意图将本公开的实施例限制到在此公开的形式。尽管以上已经讨论了多个示例方面和实施例，但是本领域技术人员将认识到其某些变型、修改、改变、添加和子组合。
