标题title
一种虚拟现实图像数据传输方法、系统及芯片
摘要abst
本发明公开了一种虚拟现实图像数据传输方法、系统及芯片，涉及图像数据传输领域，其中所述方法包括：用户设备向服务器上报的位姿信息和运动信息；服务器根据运动信息以及位姿数据确定绝对角度范围；服务器将包含绝对角度范围的部分传输指示发送给采集设备；采集设备根据部分传输指示将全景RGB中的部分数据和与全景RGB中的部分数据对应的点云数据上传到服务器；服务器将接收到采集设备上传的数据进行点位匹配和重新压缩后发送给用户设备；用户设备对所述重新压缩的虚拟现实图像数据进行解码后进行显示。通过本发明的方法可以减少虚拟图像数据传输的数据量，减小传输带宽，使得用户在接收和显示虚拟图像时的卡顿情况得到改善，提高了用户体验。
权利要求书clms
1.一种虚拟现实图像数据传输方法，用于采集设备，所述方法包括：实时采集全景RGB数据和与全景RGB数据对应的点云数据，根据接收的部分传输指示，将全景RGB中的部分数据和与全景RGB中的部分数据对应的点云数据上传到服务器；其中，所述部分传输指示由服务器发送给采集设备，服务器接收用户设备的位姿信息和运动信息，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围，服务器将包含所述绝对角度范围的部分传输指示发送给采集设备；其中，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围包括，步骤一，计算下一传输时段所需数据的角度信息：，其中，为用户设备在当前传输时段的平均角速度信息，当时为顺时针方向的角速度信息，当时为逆时针方向的角速度信息，为用户设备在当前传输时段的平均加速度信息，为用户设备下一传输时段的时长，其中为用户从多个预设传输时段时长中选择的并预存在服务器中的本次业务的传输时段时长数值；步骤二，确定绝对角度R的取值范围：，其中，为用户设备在水平方向上的位姿角度，当用户设备朝向正北时，所述用户设备在水平方向上的位姿角度取值为0，为所述用户设备的视角范围，所述用户设备在建立业务连接将所述视角范围上报给所述服务器，由所述服务器进行预存；其中，所述采集设备接收所述部分传输指示，获取其中的绝对角度范围，结合自身位置和角度信息，确定需要传输数据的部分摄像头，以及所述部分摄像头采集数据角度范围对应的激光雷达数据的采集角度，保存并传输所述部分摄像头的全景RGB数据和对应角度的激光雷达采集的点云数据。2.如权利要求1所述的方法，其特征在于，所述采集设备包括6个摄像头，所述6个摄像头安装角度间隔为60度，每个摄像头朝向反延伸线可以汇聚于同一点上。3.如权利要求1所述的方法，其特征在于，所述采集设备上安装有360度扫描的激光雷达用于探测，实时采集点云数据。4.如权利要求1所述的方法，其特征在于，所述采集设备获取绝对角度范围后，确定需要传输数据的摄像头最少个数，再根据当前每个摄像头对应的绝对角度范围，来确定需要保存传输数据的具体摄像头；当所述采集设备确定的需要保存传输数据的具体摄像头个数大于所述最少个数时，调整所述采集设备的角度重新确定需要保存传输数据的具体摄像头。5.一种虚拟现实图像数据传输方法，用于服务器，所述方法包括：服务器根据用户设备上报的位姿信息和运动信息，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围；服务器将包含所述绝对角度范围的部分传输指示发送给采集设备；用于指示采集设备根据接收的部分传输指示，将全景RGB中的部分数据和与全景RGB中的部分数据对应的点云数据上传到服务器，服务器将接收到采集设备上传的数据进行点位匹配和重新压缩后发送给用户设备；其中，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围包括，步骤一，计算下一传输时段所需数据的角度信息：，其中，为用户设备在当前传输时段的平均角速度信息，当时为顺时针方向的角速度信息，当时为逆时针方向的角速度信息，为用户设备在当前传输时段的平均加速度信息，为用户设备下一传输时段的时长，其中为用户从多个预设传输时段时长中选择的并预存在服务器中的本次业务的传输时段时长数值；步骤二，确定绝对角度R的取值范围：，其中，为用户设备在水平方向上的位姿角度，当用户设备朝向正北时，所述用户设备在水平方向上的位姿角度取值为0，为所述用户设备的视角范围，所述用户设备在建立业务连接将所述视角范围上报给所述服务器，由所述服务器进行预存；其中，所述采集设备接收所述部分传输指示，获取其中的绝对角度范围，结合自身位置和角度信息，确定需要传输数据的部分摄像头，以及所述部分摄像头采集数据角度范围对应的激光雷达数据的采集角度，保存并传输所述部分摄像头的全景RGB数据和对应角度的激光雷达采集的点云数据。6.如权利要求5所述的方法，其特征在于，服务器根据网络带宽情况和用户设备的处理能力，将采集设备上传的虚拟现实图像信息重新压缩后再发送给用户设备。7.一种虚拟现实图像数据传输方法，用于用户设备，所述方法包括：用户设备向服务器上报位姿信息和运动信息，服务器根据用户设备的能力信息和带宽情况向用户设备发送重新压缩的虚拟现实图像数据，用户设备对所述重新压缩的虚拟现实图像数据进行解码后进行显示；其中，所述服务器根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围；服务器将包含所述绝对角度范围的部分传输指示发送给采集设备；用于指示采集设备根据接收的部分传输指示，将全景RGB中的部分数据和与全景RGB中的部分数据对应的点云数据上传到服务器，服务器将接收到采集设备上传的数据重新压缩后发送给用户设备；其中，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围包括，步骤一，计算下一传输时段所需数据的角度信息：，其中，为用户设备在当前传输时段的平均角速度信息，当时为顺时针方向的角速度信息，当时为逆时针方向的角速度信息，为用户设备在当前传输时段的平均加速度信息，为用户设备下一传输时段的时长，其中为用户从多个预设传输时段时长中选择的并预存在服务器中的本次业务的传输时段时长数值；步骤二，确定绝对角度R的取值范围：，其中，为用户设备在水平方向上的位姿角度，当用户设备朝向正北时，所述用户设备在水平方向上的位姿角度取值为0，为所述用户设备的视角范围，所述用户设备在建立业务连接将所述视角范围上报给所述服务器，由所述服务器进行预存；其中，所述采集设备接收所述部分传输指示，获取其中的绝对角度范围，结合自身位置和角度信息，确定需要传输数据的部分摄像头，以及所述部分摄像头采集数据角度范围对应的激光雷达数据的采集角度，保存并传输所述部分摄像头的全景RGB数据和对应角度的激光雷达采集的点云数据。8.如权利要求7所述的方法，其特征在于，用户设备基于动传感器和定位模块获取位姿信息和运动信息，所述动传感器包括3D加速度传感器、陀螺仪、地磁传感器。9.一种虚拟现实图像数据传输系统，由用于执行权利要求1-3中任一项方法所述的采集设备，以及用于执行权利要求4-6任一项方法所述的服务器，以及用于执行权利要求7-8任一项方法所述的用户设备组成。10.一种虚拟现实图像数据传输芯片，用于执行计算机可读存储介质上的程序实现权利要求1-4中任一项方法所述的采集设备的功能，或者用于执行计算机可读存储介质上的程序实现权利要求5-6任一项方法所述的服务器的功能，或者用于执行计算机可读存储介质上的程序实现权利要求7-8任一项方法所述的用户设备的功能。
说明书desc
技术领域本发明属于图像数据传输领域，尤其涉及一种虚拟现实图像数据传输方法、系统及芯片。背景技术随着5G和虚拟现实技术的快速发展，数字孪生技术得以运用于各类领域，如在工业领域中，如果一些现场作业环境恶劣的场景下，可以使用数字孪生技术使得检测人员在远端通过虚拟现实设备产生一比一复原的现场作业场景，复合现代设备人们对工作环境不断提升的要求。但虚拟现实图像数据量巨大，当前5G网络仍然无法满足虚拟现实图像实时采集、实时传输、实时显示的应用需求，需要提出一种当前网络情况下，尽量减小传输虚拟现实图像传输数据量的方式。发明内容针对上述现有技术中存在的缺陷，本发明提供一种虚拟现实图像数据传输方法，用于采集设备，所述方法包括：实时采集全景RGB数据和与全景RGB数据对应的点云数据，根据接收的部分传输指示，将全景RGB中的部分数据和与全景RGB中的部分数据对应的点云数据上传到服务器；其中，所述部分传输指示由服务器发送给采集设备，服务器接收用户设备的位姿信息和运动信息，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围，服务器将包含所述绝对角度范围的部分传输指示发送给采集设备；其中，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围包括，步骤一，计算下一传输时段所需数据的角度信息：，其中，为用户设备在当前传输时段的平均角速度信息,当时为顺时针方向的角速度信息，当时为逆时针方向的角速度信息，为用户设备在当前传输时段的平均加速度信息，为用户设备下一传输时段的时长，其中为用户从多个预设传输时段时长中选择的并预存在服务器中的本次业务的传输时段时长数值；步骤二，确定绝对角度R的取值范围：,其中，为用户设备在水平方向上的位姿角度，当用户设备朝向正北时，所述用户设备在水平方向上的位姿角度取值为0，为所述用户设备的视角范围，所述用户设备在建立业务连接将所述视角范围上报给所述服务器，由所述服务器进行预存；其中，所述采集设备接收所述部分传输指示，获取其中的绝对角度范围，结合自身位置和角度信息，确定需要传输数据的部分摄像头，以及所述部分摄像头采集数据角度范围对应的激光雷达数据的采集角度，保存并传输所述部分摄像头的全景RGB数据和对应角度的激光雷达采集的点云数据。其中，所述采集设备包括6个摄像头，所述6个摄像头安装角度间隔为60度，每个摄像头朝向反延伸线可以汇聚于同一点上；其中，所述采集设备上安装有360度扫描的激光雷达用于探测，实时采集点云数据。其中，所述采集设备获取绝对角度范围后，确定需要传输数据的摄像头最少个数，再根据当前每个摄像头对应的绝对角度范围，来确定需要保存传输数据的具体摄像头；当所述采集设备确定的需要保存传输数据的具体摄像头个数大于所述最小个数时，调整所述采集设备的角度重新确定需要保存传输数据的具体摄像头。本发明还提出了一种虚拟现实图像数据传输方法，用于服务器，所述方法包括：服务器根据用户设备上报的位姿信息和运动信息，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围；服务器将包含所述绝对角度范围的部分传输指示发送给采集设备；用于指示采集设备根据接收的部分传输指示，将全景RGB中的部分数据和与全景RGB中的部分数据对应的点云数据上传到服务器，服务器将接收到采集设备上传的数据进行点位匹配重新压缩后发送给用户设备；其中，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围包括，步骤一，计算下一传输时段所需数据的角度信息：，其中，为用户设备在当前传输时段的平均角速度信息,当时为顺时针方向的角速度信息，当时为逆时针方向的角速度信息，为用户设备在当前传输时段的平均加速度信息，为用户设备下一传输时段的时长，其中为用户从多个预设传输时段时长中选择的并预存在服务器中的本次业务的传输时段时长数值；步骤二，确定绝对角度R的取值范围：,其中，为用户设备在水平方向上的位姿角度，当用户设备朝向正北时，所述用户设备在水平方向上的位姿角度取值为0，为所述用户设备的视角范围，所述用户设备在建立业务连接将自身设备的所述视角范围上报给所述服务器，由所述服务器进行预存；其中，所述采集设备接收所述部分传输指示，获取其中的绝对角度范围，结合自身位置和角度信息，确定需要传输数据的部分摄像头，以及所述部分摄像头采集数据角度范围对应的激光雷达数据的采集角度，保存并传输所述部分摄像头的全景RGB数据和对应角度的激光雷达采集的点云数据。其中，服务器根据网络带宽情况和用户设备的处理能力，将采集设备上传的虚拟现实图像信息重新压缩后再发送给用户设备。本发明还提出了一种虚拟现实图像数据传输方法，用于用户设备，所述方法包括：用户设备向服务器上报位姿信息和运动信息，服务器根据用户设备的能力信息和带宽情况向用户设备发送重新压缩的虚拟现实图像数据，用户设备对所述重新压缩的虚拟现实图像数据进行解码后进行显示；其中，所述服务器根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围；服务器将包含所述绝对角度范围的部分传输指示发送给采集设备；用于指示采集设备根据接收的部分传输指示，将全景RGB中的部分数据和与全景RGB中的部分数据对应的点云数据上传到服务器，服务器将接收到采集设备上传的数据重新压缩后发送给用户设备；其中，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围包括，步骤一，计算下一传输时段所需数据的角度信息：，其中，为用户设备在当前传输时段的平均角速度信息,当时为顺时针方向的角速度信息，当时为逆时针方向的角速度信息，为用户设备在当前传输时段的平均加速度信息，为用户设备下一传输时段的时长，其中为用户从多个预设传输时段时长中选择的并预存在服务器中的本次业务的传输时段时长数值；步骤二，确定绝对角度R的取值范围：,其中，为用户设备在水平方向上的位姿角度，当用户设备朝向正北时，所述用户设备在水平方向上的位姿角度取值为0，为所述用户设备的视角范围，所述用户设备在建立业务连接将自身设备的所述视角范围上报给所述服务器，由所述服务器进行预存；其中，所述采集设备接收所述部分传输指示，获取其中的绝对角度范围，结合自身位置和角度信息，确定需要传输数据的部分摄像头，以及所述部分摄像头采集数据角度范围对应的激光雷达数据的采集角度，保存并传输所述部分摄像头的全景RGB数据和对应角度的激光雷达采集的点云数据。其中，用户设备基于动传感器和定位模块获取位姿信息和运动信息，所述动传感器包括3D加速度传感器、陀螺仪、地磁传感器。本发明还提出了一种虚拟现实图像数据传输系统，由采集设备，以及服务器，以及用户设备组成。本发明还提出了一种虚拟现实图像数据传输芯片，用于执行计算机可读存储介质上的程序实现上述采集设备的功能，或者用于执行计算机可读存储介质上的程序实现上述服务器的功能，或者用于执行计算机可读存储介质上的程序实现上述用户设备的功能。与现有技术相比，通过本发明的方法使得采集设备可以根据用户设备的运动信息和位姿信息确定需要上传的数据量，并根据用户设备的能力和网络情况重新压缩数据，尽量减少虚拟图像数据传输的数据量，减小传输带宽，使得用户在接收和显示虚拟图像时的卡顿情况得到改善，提高了用户体验。附图说明通过参考附图阅读下文的详细描述，本公开示例性实施方式的上述以及其他目的、特征和优点将变得易于理解。在附图中，以示例性而非限制性的方式示出了本公开的若干实施方式，并且相同或对应的标号表示相同或对应的部分，其中：图1是示出根据本发明实施例的一种虚拟现实图像数据传输方法；图2是示出根据本发明实施例的一种虚拟现实图像数据传输系统。具体实施方式为了使本发明的目的、技术方案和优点更加清楚，下面将结合附图对本发明作进一步地详细描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其它实施例，都属于本发明保护的范围。在本发明实施例中使用的术语是仅仅出于描述特定实施例的目的，而非旨在限制本发明。在本发明实施例和所附权利要求书中所使用的单数形式的“一种”、“所述”和“该”也旨在包括多数形式，除非上下文清楚地表示其他含义，“多种”一般包含至少两种。应当理解，本文中使用的术语“和/或”仅仅是一种描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。另外，本文中字符“/”，一般表示前后关联对象是一种“或”的关系。取决于语境，如在此所使用的词语“如果”、“若”可以被解释成为“在……时”或“当……时”或“响应于确定”或“响应于检测”。类似地，取决于语境，短语“如果确定”或“如果检测”可以被解释成为“当确定时”或“响应于确定”或“当检测时”或“响应于检测”。还需要说明的是，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的商品或者装置不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种商品或者装置所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的商品或者装置中还存在另外的相同要素。下面结合附图详细说明本发明的可选实施例。实施例一、如图1所示，一种虚拟现实图像数据传输方法，用于采集设备，所述方法包括：实时采集全景RGB数据和与全景RGB数据对应的点云数据，根据接收的部分传输指示，将全景RGB中的部分数据和与全景RGB中的部分数据对应的点云数据上传到服务器；在采集设备中，同时通过摄像头获取全景RGB数据和点云数据，经过服务器的处理后可以将对应的点云和RGB点位对应起来，例如通过尺寸不变换特征进行匹配等方式，服务器再将匹配好的数据发送给用户设备，这样在VR用户设备上显示可以同时呈现RGB信息和深度信息，形成虚拟现实场景的图像，可以帮助检测人员准确和真实的获取数字孪生工业场景中的实际情况，做出准确的判断。其中，所述部分传输指示由服务器发送给采集设备，服务器接收用户设备的位姿信息和运动信息，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围，服务器将包含所述绝对角度范围的部分传输指示发送给采集设备；其中，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围包括，步骤一，计算下一传输时段所需数据的角度信息：，其中，为用户设备在当前传输时段的平均角速度信息,当时为顺时针方向的角速度信息，当时为逆时针方向的角速度信息，为用户设备在当前传输时段的平均加速度信息，为用户设备下一传输时段的时长，其中为用户从多个预设传输时段时长中选择的并预存在服务器中的本次业务的传输时段时长数值；步骤二，确定绝对角度R的取值范围：,其中，为用户设备在水平方向上的位姿角度，当用户设备朝向正北时，所述用户设备在水平方向上的位姿角度取值为0，为所述用户设备的视角范围，所述用户设备在建立业务连接将自身设备的所述视角范围上报给所述服务器，由所述服务器进行预存；位姿信息包括水平方向上的角度信息，和仰角信息，本发明中只需要根据水平方向上的位姿信息来确定角度范围即可。不同的用户设备的视角范围不同，从90度到110度都比较常规，也有其他视角范围的，所以在传输业务初始建立时，用户设备将自身设备的视角范围上传给服务器，服务器对该数据进行存储，便于之后确定传输角度范围。其中，所述采集设备接收所述部分传输指示，获取其中的绝对角度范围，结合自身位置和角度信息，确定需要传输数据的部分摄像头，以及所述部分摄像头采集数据角度范围对应的激光雷达数据的采集角度，保存并传输所述部分摄像头的全景RGB数据和对应角度的激光雷达采集的点云数据。一种可选的实施例中，所述采集设备包括6个摄像头，所述6个摄像头安装角度间隔为60度，每个摄像头朝向反延伸线可以汇聚于同一点上；一种可选的实施例中，所述采集设备上安装有360度扫描的激光雷达用于探测，实时采集点云数据。一种可选的实施例中，所述采集设备获取绝对角度范围后，确定需要传输数据的摄像头最少个数，再根据当前每个摄像头对应的绝对角度范围，来确定需要保存传输数据的具体摄像头；当所述采集设备确定的需要保存传输数据的具体摄像头个数大于所述最小个数时，调整所述采集设备的角度重新确定需要保存传输数据的具体摄像头。举例说明，采集设备上的6个摄像头的角度分别对应0-59,60-119,120-179，180-239,240-299,300 -359,即以60度划分整个360范围，默认情况下，正北方向一般设置成0度方向，角度数值顺时针递增，如果采集设备获得的绝对角度范围为50-189度，绝对角度范围的0度是对应到正北向的，角度数值顺时针递增，绝对角度范围为140度，140/60=2.33,采集设备确定需要最少三个摄像头即可采集到140度范围，但是假设当前采集设备位于默认方向上，即采集设备自身的0度位置对应于正北向的时候，需要调用0-59,60-119,120-179，180-239四个摄像头才可以获得50-189度的数据，此时可以将采集设备顺时针转动10度，使得通过三个摄像头的采集数据即可完成对应角度范围的数据采集。通过本发明的方法使得采集设备可以根据用户设备的运动信息和位姿信息确定需要上传的数据量，并根据用户设备的能力和网络情况重新压缩数据，尽量减少虚拟图像数据传输的数据量，减小传输带宽，使得用户在接收和显示虚拟图像时的卡顿情况得到改善，提高了用户体验。实施例二、如图1所示，本发明提出的一种虚拟现实图像数据传输方法，用于服务器，所述方法包括：服务器接收用户设备上报的位姿信息和运动信息，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围；服务器将包含所述绝对角度范围的部分传输指示发送给采集设备；用于指示采集设备根据接收的部分传输指示，将全景RGB中的部分数据和与全景RGB中的部分数据对应的点云数据上传到服务器，服务器将接收到采集设备上传的数据进行点位匹配和重新压缩后发送给用户设备；其中，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围包括，步骤一，计算下一传输时段所需数据的角度信息：，其中，为用户设备在当前传输时段的平均角速度信息,当时为顺时针方向的角速度信息，当时为逆时针方向的角速度信息，为用户设备在当前传输时段的平均加速度信息，为用户设备下一传输时段的时长，其中为用户从多个预设传输时段时长中选择的并预存在服务器中的本次业务的传输时段时长数值；步骤二，确定绝对角度R的取值范围：,其中，为用户设备在水平方向上的位姿角度，当用户设备朝向正北时，所述用户设备在水平方向上的位姿角度取值为0，为所述用户设备的视角范围，所述用户设备在建立业务连接将自身设备的所述视角范围上报给所述服务器，由所述服务器进行预存；其中，所述采集设备接收所述部分传输指示，获取其中的绝对角度范围，结合自身位置和角度信息，确定需要传输数据的部分摄像头，以及所述部分摄像头采集数据角度范围对应的激光雷达数据的采集角度，保存并传输所述部分摄像头的全景RGB数据和对应角度的激光雷达采集的点云数据。服务器根据角速度变化，可以预测用户在接下来的一个传输时间段可能需要的数据角度范围，因为一个传输时间段时间较短，而且在工业检测场景下，检测人员通常不会进行大幅度扭头、转动，突然转头等操作，一般会缓慢运动使得观察结果更加准确，且在佩戴VR设备的情况下，大幅度切换图像也会造成眩晕等不适，在场景视野比较开阔的情况下，检测人员一般也不会大幅度左右运动等动作，减少自己的不适，基于这些应用和设备特点，使得服务器对数据传输的角度预测也是相对可靠的。一种可选的实施例中，服务器根据网络带宽情况和用户设备的处理能力，将采集设备上传的虚拟现实图像信息重新压缩后再发送给用户设备。服务器对上传的RGB图像点位和点云图进行匹配可以采用尺度不变换特征进行特征点提取后，匹配点线结构进行对应特征点匹配。例如，当带宽情况不太理想时，服务器对上传的RGB图像点位和点云图进行匹配后，再传输给用户设备进行的压缩时，可以将数据量压缩得更小，减小网络情况不佳的影响。并且压缩数据时需要考虑用户设备的能力情况，向用于设备传输等于或低于其能力处理上限的数据包，避免造成用户设备的图像卡顿、延迟高、发烫等情况。通过本发明的方法使得采集设备可以根据用户设备的运动信息和位姿信息确定需要上传的数据量，并根据用户设备的能力和网络情况重新压缩数据，尽量减少虚拟图像数据传输的数据量，减小传输带宽，使得用户在接收和显示虚拟图像时的卡顿情况得到改善，提高了用户体验。实施例三、如图1所示，本发明提出的一种虚拟现实图像数据传输方法，用于用户设备，所述方法包括：用户设备向服务器上报位姿信息和运动信息，服务器根据用户设备的能力信息和带宽情况向用户设备发送重新压缩的虚拟现实图像数据，用户设备对所述重新压缩的虚拟现实图像数据进行解码后进行显示；其中，所述服务器根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围；服务器将包含所述绝对角度范围的部分传输指示发送给采集设备；用于指示采集设备根据接收的部分传输指示，将全景RGB中的部分数据和与全景RGB中的部分数据对应的点云数据上传到服务器，服务器将接收到采集设备上传的数据重新压缩后发送给用户设备；其中，根据运动信息计算在下一传输时段所需数据的角度范围，以及根据用户设备的位姿数据确定绝对角度范围包括，步骤一，计算下一传输时段所需数据的角度信息：，其中，为用户设备在当前传输时段的平均角速度信息,当时为顺时针方向的角速度信息，当时为逆时针方向的角速度信息，为用户设备在当前传输时段的平均加速度信息，为用户设备下一传输时段的时长，其中为用户从多个预设传输时段时长中选择的并预存在服务器中的本次业务的传输时段时长数值；步骤二，确定绝对角度R的取值范围：,其中，为用户设备在水平方向上的位姿角度，当用户设备朝向正北时，所述用户设备在水平方向上的位姿角度取值为0，为所述用户设备的视角范围，所述用户设备在建立业务连接将自身设备的所述视角范围上报给所述服务器，由所述服务器进行预存；其中，所述采集设备接收所述部分传输指示，获取其中的绝对角度范围，结合自身位置和角度信息，确定需要传输数据的部分摄像头，以及所述部分摄像头采集数据角度范围对应的激光雷达数据的采集角度，保存并传输所述部分摄像头的全景RGB数据和对应角度的激光雷达采集的点云数据。一种可选的实施例中，用户设备基于动传感器和定位模块获取位姿信息和运动信息，所述动传感器包括3D加速度传感器、陀螺仪、地磁传感器。一种可选的实施例中，用户设备可以是VR设备，或者XR设备。通过本发明的方法使得采集设备可以根据用户设备的运动信息和位姿信息确定需要上传的数据量，并根据用户设备的能力和网络情况重新压缩数据，尽量减少虚拟图像数据传输的数据量，减小传输带宽，使得用户在接收和显示虚拟图像时的卡顿情况得到改善，提高了用户体验。实施例四、如图2所示，本发明提出的一种虚拟现实图像数据传输系统，由采集设备，以及服务器，以及用户设备组成。由服务器根据用户设备的运动信息和位姿信息计算获得绝对角度信息，将指令发送给采集设备，指示采集设备进行对应的采集数据保存和上传，再重新压缩后转发给用户设备。实施例五、本发明还提出了一种虚拟现实图像数据传输芯片，用于执行计算机可读存储介质上的程序实现上述采集设备的功能，或者用于执行计算机可读存储介质上的程序实现上述服务器的功能，或者用于执行计算机可读存储介质上的程序实现上述用户设备的功能。所述芯片可以是处理器芯片、DSP芯片、FPGA芯片、AD/DA芯片或者是其他可用于数据处理的芯片，也包括配合数据处理的存储器芯片。处理器执行存储介质上的指令或者数据可以实现的各类功能，需要说明的是，计算机可读介质可以是计算机可读信号介质或者计算机可读存储介质或者是上述两者的任意组合。计算机可读存储介质例如可以是——但不限于——电、磁、光、电磁、红外线、或半导体的系统、装置或器件，或者任意以上的组合。计算机可读存储介质的更具体的例子可以包括但不限于：具有一个或多个导线的电连接、便携式计算机磁盘、硬盘、随机访问存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑磁盘只读存储器、光存储器件、磁存储器件、或者上述的任意合适的组合。在本公开中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用。而在本公开中，计算机可读信号介质可以包括在基带中或者作为载波一部分传播的数据信号，其中承载了计算机可读的程序代码。这种传播的数据信号可以采用多种形式，包括但不限于电磁信号、光信号或上述的任意合适的组合。计算机可读信号介质还可以是计算机可读存储介质以外的任何计算机可读介质，该计算机可读信号介质可以发送、传播或者传输用于由指令执行系统、装置或者器件使用或者与其结合使用的程序。计算机可读介质上包含的程序代码可以用任何适当的介质传输，包括但不限于：电线、光缆、RF等等，或者上述的任意合适的组合。上述计算机可读介质可以是上述电子设备中所包含的；也可以是单独存在，而未装配入该电子设备中。可以以一种或多种程序设计语言或其组合来编写用于执行本公开的操作的计算机程序代码，上述程序设计语言包括面向对象的程序设计语言—诸如Java、Smalltalk、C++，还包括常规的过程式程序设计语言—诸如“C”语言或类似的程序设计语言。程序代码可以完全地在用户计算机上执行、部分地在用户计算机上执行、作为一个独立的软件包执行、部分在用户计算机上部分在远程计算机上执行、或者完全在远程计算机或服务器上执行。在涉及远程计算机的情形中，远程计算机可以通过任意种类的网络——包括局域网或广域网—连接到用户计算机，或者，可以连接到外部计算机。附图中的流程图和框图，图示了按照本公开各种实施例的系统、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段、或代码的一部分，该模块、程序段、或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个接连地表示的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行规定的功能或操作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。描述于本公开实施例中所涉及到的单元可以通过软件的方式实现，也可以通过硬件的方式来实现。其中，单元的名称在某种情况下并不构成对该单元本身的限定。以上介绍了本发明的较佳实施方式，旨在使得本发明的精神更加清楚和便于理解，并不是为了限制本发明，凡在本发明的精神和原则之内，所做的修改、替换、改进，均应包含在本发明所附的权利要求概括的保护范围之内。
