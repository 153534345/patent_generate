标题title
电子设备及电量计复位方法
摘要abst
本申请实施例提供一种电子设备及电量计复位方法，应用于电子技术领域。该电子设备包括连接于电池与电量计之间的通路中的开关电路，当处理器检测到电量计处于异常状态时，处理器先向开关电路发送第一控制信号，控制电池与电量计之间的通路断开，以对电量计进行下电，处理器在间隔预设时长后再次向开关电路发送第二控制信号，控制电池与电量计之间的通路导通，以对电量计进行重新上电。因此，通过处理器自动识别电量计是否处于异常状态，以及当电量计处于异常状态时，通过开关电路对出现异常状态的电量计进行复位，从而减少了不必要的报障和维修动作，降低了维修处理给用户造成的不便，提高用户的使用体验，且降低了维修成本。
权利要求书clms
1.一种电子设备，其特征在于，包括处理器、电池、开关电路和电量计，所述处理器分别与所述开关电路和所述电量计连接，所述开关电路还连接于所述电池与所述电量计之间的通路中；所述处理器，用于检测所述电量计是否处于异常状态，以及当检测到所述电量计处于异常状态时，向所述开关电路发送复位控制信号；所述复位控制信号包括第一控制信号以及间隔预设时长后的第二控制信号；所述开关电路，用于在所述第一控制信号的作用下，控制所述电池与所述电量计之间的通路断开，以对所述电量计进行下电；以及在所述第二控制信号的作用下，控制所述电池与所述电量计之间的通路导通，以对所述电量计进行重新上电。2.根据权利要求1所述的电子设备，其特征在于，所述电量计包括第一寄存器；所述处理器，具体用于读取所述第一寄存器中存储的所述电量计的型号信息；当所述型号信息读取错误时，确定所述电量计处于异常状态。3.根据权利要求2所述的电子设备，其特征在于，所述电量计还包括第二寄存器和第三寄存器；所述处理器，具体用于当所述型号信息读取正确时，继续读取所述第二寄存器中存储的电池的满充容量，以及所述第三寄存器中存储的电池的剩余电量；当本次读取的满充容量与上次读取的满充容量不一致，和/或，本次读取的剩余电量与上次读取的剩余电量之间的第一电量变化量满足第一预设条件时，确定所述电量计处于异常状态。4.根据权利要求3所述的电子设备，其特征在于，所述第一预设条件包括：在所述电池处于充电状态下，所述第一电量变化量大于或等于第一电量跳变阈值，所述第一电量跳变阈值大于0；或者，在所述电池处于放电状态下，所述第一电量变化量的绝对值大于或等于第二电量跳变阈值，所述第二电量跳变阈值大于0。5.根据权利要求4所述的电子设备，其特征在于，所述处理器，具体用于每间隔预设检测周期，检测所述电量计是否处于异常状态；其中，在所述电池处于充电状态下，所述预设检测周期与所述第一电量跳变阈值呈正相关；在所述电池处于放电状态下，所述预设检测周期与所述第二电量跳变阈值呈正相关。6.根据权利要求1所述的电子设备，其特征在于，所述开关电路包括第一开关模块和第二开关模块；所述第一开关模块，分别与所述处理器、所述第二开关模块和接地端连接；所述第二开关模块，分别与所述电池和所述电量计连接。7.根据权利要求6所述的电子设备，其特征在于，所述第一开关模块包括第一开关管、第一限流电阻和第一上拉电阻；所述第一限流电阻的第一端与所述处理器连接，所述第一限流电阻的第二端与所述第一开关管的控制端连接；所述第一开关管的第一端与所述第二开关模块连接，所述第一开关管的第二端与所述接地端连接；所述第一上拉电阻的第一端与所述电池连接，所述第一上拉电阻的第二端与所述第一限流电阻的第一端连接。8.根据权利要求6所述的电子设备，其特征在于，所述第一开关模块包括第二开关管、第三开关管、第二限流电阻、第三限流电阻、第一下拉电阻和第二上拉电阻；所述第二限流电阻的第一端与所述处理器连接，所述第二限流电阻的第二端与所述第二开关管的控制端连接；所述第二开关管的第一端与所述第三限流电阻的第一端连接，所述第二开关管的第二端与所述接地端连接；所述第一下拉电阻的第一端与所述第二限流电阻的第一端连接，所述第一下拉电阻的第二端与所述接地端连接；所述第三限流电阻的第二端与所述第三开关管的控制端连接；所述第三开关管的第一端与所述第二开关模块连接，所述第三开关管的第二端与所述接地端连接；所述第二上拉电阻的第一端与所述电池连接，所述第二上拉电阻的第二端与所述第三限流电阻的第一端连接。9.根据权利要求7或8所述的电子设备，其特征在于，所述第二开关模块包括第四开关管和第三上拉电阻；所述第四开关管的控制端与所述第一开关模块连接，所述第四开关管的第一端与所述电池连接，所述第四开关管的第二端与所述电量计连接；所述第三上拉电阻的第一端与所述电池连接，所述第三上拉电阻的第二端与所述第四开关管的控制端连接。10.根据权利要求6所述的电子设备，其特征在于，所述第一开关模块包括第五开关管、第四限流电阻和第二下拉电阻；所述第四限流电阻的第一端与所述处理器连接，所述第四限流电阻的第二端与所述第五开关管的控制端连接；所述第五开关管的第一端与高电平信号端或者所述电池连接，所述第五开关管的第二端与所述第二开关模块连接；所述第二下拉电阻的第一端与所述第四限流电阻的第一端连接，所述第二下拉电阻的第二端与所述接地端连接。11.根据权利要求10所述的电子设备，其特征在于，所述第二开关模块包括第六开关管和第三下拉电阻；所述第六开关管的控制端与所述第一开关模块连接，所述第六开关管的第一端与所述电池连接，所述第六开关管的第二端与所述电量计连接；所述第三下拉电阻的第一端与所述第六开关管的控制端连接，所述第三下拉电阻的第二端与所述接地端连接。12.根据权利要求1所述的电子设备，其特征在于，所述电量计，用于在重新上电后采集所述电池的剩余电量，并将上电后采集到的剩余电量存储到所述电量计的第三寄存器中；所述处理器，还用于读取所述第三寄存器中存储的所述电量计上电后采集的剩余电量；以及当所述电量计上电后采集的剩余电量，与所述电量计下电前采集的剩余电量之间的第二电量变化量满足第二预设条件时，根据所述电量计上电后采集的剩余电量以及所述电量计下电前采集的剩余电量，生成多个待显示电量值，使得所述电子设备以预设时间间隔依次显示每个所述待显示电量值；其中，在所述电池处于充电状态下，每个所述待显示电量值小于或等于所述电量计上电后采集的剩余电量，且每个所述待显示电量值大于所述电量计下电前采集的剩余电量；显示的各个所述待显示电量值依次升高；在所述电池处于放电状态下，每个所述待显示电量值大于或等于所述电量计上电后采集的剩余电量，且每个所述待显示电量值小于所述电量计下电前采集的剩余电量；显示的各个所述待显示电量值依次降低。13.根据权利要求12所述的电子设备，其特征在于，所述第二预设条件包括：在所述电池处于充电状态下，所述第二电量变化量大于第三电量跳变阈值，所述第三电量跳变阈值大于或等于0；或者，在所述电池处于放电状态下，所述第二电量变化量的绝对值大于第四电量跳变阈值，且所述电量计上电后采集的剩余电量小于所述电量计下电前采集的剩余电量，所述第四电量跳变阈值大于或等于0。14.一种电量计复位方法，其特征在于，应用于电子设备，所述电子设备包括处理器、电池、开关电路和电量计，所述处理器分别与所述开关电路和所述电量计连接，所述开关电路还连接于所述电池与所述电量计之间的通路中；所述方法包括：所述处理器检测所述电量计是否处于异常状态；当检测到所述电量计处于异常状态时，所述处理器向所述开关电路发送第一控制信号；所述开关电路在所述第一控制信号的作用下，控制所述电池与所述电量计之间的通路断开，以对所述电量计进行下电；所述处理器在间隔预设时长后向所述开关电路发送第二控制信号；所述开关电路在所述第二控制信号的作用下，控制所述电池与所述电量计之间的通路导通，以对所述电量计进行重新上电。15.根据权利要求14所述的方法，其特征在于，所述电量计包括第一寄存器；所述处理器检测所述电量计是否处于异常状态，包括：所述处理器读取所述第一寄存器中存储的所述电量计的型号信息；当所述型号信息读取错误时，所述处理器确定所述电量计处于异常状态。16.根据权利要求15所述的方法，其特征在于，所述电量计还包括第二寄存器和第三寄存器；在所述处理器读取所述第一寄存器中存储的所述电量计的型号信息之后，还包括：当所述型号信息读取正确时，所述处理器继续读取所述第二寄存器中存储的电池的满充容量，以及所述第三寄存器中存储的电池的剩余电量；当本次读取的满充容量与上次读取的满充容量不一致，和/或，本次读取的剩余电量与上次读取的剩余电量之间的第一电量变化量满足第一预设条件时，所述处理器确定所述电量计处于异常状态。17.根据权利要求16所述的方法，其特征在于，所述第一预设条件包括：在所述电池处于充电状态下，所述第一电量变化量大于或等于第一电量跳变阈值，所述第一电量跳变阈值大于0；或者，在所述电池处于放电状态下，所述第一电量变化量的绝对值大于或等于第二电量跳变阈值，所述第二电量跳变阈值大于0。18.根据权利要求17所述的方法，其特征在于，所述处理器检测所述电量计是否处于异常状态，包括：所述处理器每间隔预设检测周期，检测所述电量计是否处于异常状态；其中，在所述电池处于充电状态下，所述预设检测周期与所述第一电量跳变阈值呈正相关；在所述电池处于放电状态下，所述预设检测周期与所述第二电量跳变阈值呈正相关。19.根据权利要求14所述的方法，其特征在于，在所述控制所述电池与所述电量计之间的通路导通，以对所述电量计进行重新上电之后，还包括：所述电量计在重新上电后，采集所述电池的剩余电量；所述电量计将上电后采集到的剩余电量存储到所述电量计的第三寄存器中；所述处理器读取所述第三寄存器中存储的所述电量计上电后采集的剩余电量；当所述电量计上电后采集的剩余电量，与所述电量计下电前采集的剩余电量之间的第二电量变化量满足第二预设条件时，所述处理器根据所述电量计上电后采集的剩余电量以及所述电量计下电前采集的剩余电量，生成多个待显示电量值，使得所述电子设备以预设时间间隔依次显示每个所述待显示电量值；其中，在所述电池处于充电状态下，每个所述待显示电量值小于或等于所述电量计上电后采集的剩余电量，且每个所述待显示电量值大于所述电量计下电前采集的剩余电量；显示的各个所述待显示电量值依次升高；在所述电池处于放电状态下，每个所述待显示电量值大于或等于所述电量计上电后采集的剩余电量，且每个所述待显示电量值小于所述电量计下电前采集的剩余电量；显示的各个所述待显示电量值依次降低。20.根据权利要求19所述的方法，其特征在于，所述第二预设条件包括：在所述电池处于充电状态下，所述第二电量变化量大于第三电量跳变阈值，所述第三电量跳变阈值大于或等于0；或者，在所述电池处于放电状态下，所述第二电量变化量的绝对值大于第四电量跳变阈值，且所述电量计上电后采集的剩余电量小于所述电量计下电前采集的剩余电量，所述第四电量跳变阈值大于或等于0。
说明书desc
技术领域本申请涉及电子技术领域，尤其涉及一种电子设备及电量计复位方法。背景技术随着电子技术的不断发展，手机、平板电脑等电子设备的使用也越来越普遍。在电子设备内部可设置有可充电电池以及电量计，基于电量计对电池的剩余电量进行监测，使得用户及时了解电池的剩余电量，以便在电池的剩余电量耗尽之前及时为电池进行充电。在电子设备的使用过程中，电量计可能出现异常状态，使得用户会感知到电子设备的剩余电量出现卡死、跳变、归零，甚至电子设备无法开机等异常现象。当用户感知到这些异常现象时，可以去维修网点对电子设备进行维修处理，来对出现异常状态的电量计进行复位。但是，这种通过维修处理对电量计进行复位的方式，会给用户带来不便，以及增加了维修成本等问题。发明内容本申请实施例提供一种电子设备及电量计复位方法，通过处理器和开关电路对出现异常状态的电量计进行复位，从而减少了不必要的报障和维修动作，降低了维修处理给用户造成的不便，且降低了维修成本。第一方面，本申请实施例提出一种电子设备，包括处理器、电池、开关电路和电量计，处理器分别与开关电路和电量计连接，开关电路还连接于电池与电量计之间的通路中；处理器，用于检测电量计是否处于异常状态，以及当检测到电量计处于异常状态时，向开关电路发送复位控制信号；复位控制信号包括第一控制信号以及间隔预设时长后的第二控制信号；开关电路，用于在第一控制信号的作用下，控制电池与电量计之间的通路断开，以对电量计进行下电；以及在第二控制信号的作用下，控制电池与电量计之间的通路导通，以对电量计进行重新上电。这样，通过处理器自动识别电量计是否处于异常状态，以及当电量计处于异常状态时，通过开关电路对出现异常状态的电量计进行复位，从而减少了不必要的报障和维修动作，降低了维修处理给用户造成的不便，提高用户的使用体验，且降低了维修成本。在一种可能的实现方式中，电量计包括第一寄存器；处理器，具体用于读取第一寄存器中存储的电量计的型号信息；当型号信息读取错误时，确定电量计处于异常状态。这样，当电量计与处理器之间连接的I2C总线受到干扰时，会导致电量计不再响应处理器发送的命令，即电量计的型号信息读取错误时，从而确定电量计处于异常状态，因此，这种通过读取寄存器内存储的数据的方式来确定寄存器是否处于异常状态，其判定方式较为简单。在一种可能的实现方式中，电量计还包括第二寄存器和第三寄存器；处理器，具体用于当型号信息读取正确时，继续读取第二寄存器中存储的电池的满充容量，以及第三寄存器中存储的电池的剩余电量；当本次读取的满充容量与上次读取的满充容量不一致，和/或，本次读取的剩余电量与上次读取的剩余电量之间的第一电量变化量满足第一预设条件时，确定电量计处于异常状态。这样，当本次读取的电池的满充容量与上次读取的电池的满充容量不一致，和/或，本次读取的电池的剩余电量与上次读取的电池的剩余电量之间的第一电量变化量满足第一预设条件时，说明电量计内部的寄存器发生错乱或者电量跳变，即确定电量计处于异常状态，因此，这种通过读取寄存器内存储的数据的方式来确定寄存器是否处于异常状态，其判定方式较为简单。在一种可能的实现方式中，第一预设条件包括：在电池处于充电状态下，第一电量变化量大于或等于第一电量跳变阈值，第一电量跳变阈值大于0；或者，在电池处于放电状态下，第一电量变化量的绝对值大于或等于第二电量跳变阈值，第二电量跳变阈值大于0。这样，通过区分充电和放电两种不同场景，来确定电量计是否处于异常状态，使得电量计的异常判定方式更加准确。在一种可能的实现方式中，处理器，具体用于每间隔预设检测周期，检测电量计是否处于异常状态；其中，在电池处于充电状态下，预设检测周期与第一电量跳变阈值呈正相关；在电池处于放电状态下，预设检测周期与第二电量跳变阈值呈正相关。这样，通过周期性地检测电量计是否处于异常状态，在电量计在出现异常状态时可通过处理器及时发现，从而及时实现对电量计的复位。在一种可能的实现方式中，开关电路包括第一开关模块和第二开关模块；第一开关模块，分别与处理器、第二开关模块和接地端连接；第二开关模块，分别与电池和电量计连接。这样，可通过第一开关模块控制第二开关模块的导通或截止，进而通过第二开关模块控制电池和电量计之间的通路的导通或断开，以实现对电量计进行复位。在一种可能的实现方式中，第一开关模块包括第一开关管、第一限流电阻和第一上拉电阻；第一限流电阻的第一端与处理器连接，第一限流电阻的第二端与第一开关管的控制端连接；第一开关管的第一端与第二开关模块连接，第一开关管的第二端与接地端连接；第一上拉电阻的第一端与电池连接，第一上拉电阻的第二端与第一限流电阻的第一端连接。这样，该第一开关模块的电路结构简单，从而降低了开关电路的制作成本。在一种可能的实现方式中，第一开关模块包括第二开关管、第三开关管、第二限流电阻、第三限流电阻、第一下拉电阻和第二上拉电阻；第二限流电阻的第一端与处理器连接，第二限流电阻的第二端与第二开关管的控制端连接；第二开关管的第一端与第三限流电阻的第一端连接，第二开关管的第二端与接地端连接；第一下拉电阻的第一端与第二限流电阻的第一端连接，第一下拉电阻的第二端与接地端连接；第三限流电阻的第二端与第三开关管的控制端连接；第三开关管的第一端与第二开关模块连接，第三开关管的第二端与接地端连接；第二上拉电阻的第一端与电池连接，第二上拉电阻的第二端与第三限流电阻的第一端连接。这样，在电子设备处于关机状态下，第一开关模块也比较容易地控制第二开关模块一直处于导通状态，从而进一步使得电池可以对电量计进行供电。在一种可能的实现方式中，第二开关模块包括第四开关管和第三上拉电阻；第四开关管的控制端与第一开关模块连接，第四开关管的第一端与电池连接，第四开关管的第二端与电量计连接；第三上拉电阻的第一端与电池连接，第三上拉电阻的第二端与第四开关管的控制端连接。在一种可能的实现方式中，第一开关模块包括第五开关管、第四限流电阻和第二下拉电阻；第四限流电阻的第一端与处理器连接，第四限流电阻的第二端与第五开关管的控制端连接；第五开关管的第一端与高电平信号端或者电池连接，第五开关管的第二端与第二开关模块连接；第二下拉电阻的第一端与第四限流电阻的第一端连接，第二下拉电阻的第二端与接地端连接。这样，该第一开关模块的电路结构简单，并且，在电子设备处于关机状态下，第一开关模块也比较容易地控制第二开关模块一直处于导通状态，从而进一步使得电池可以对电量计进行供电。在一种可能的实现方式中，第二开关模块包括第六开关管和第三下拉电阻；第六开关管的控制端与第一开关模块连接，第六开关管的第一端与电池连接，第六开关管的第二端与电量计连接；第三下拉电阻的第一端与第六开关管的控制端连接，第三下拉电阻的第二端与接地端连接。这样，可以减轻第六开关管在处于导通状态时的漏电问题。在一种可能的实现方式中，电量计，用于在重新上电后采集电池的剩余电量，并将上电后采集到的剩余电量存储到电量计的第三寄存器中；处理器，还用于读取第三寄存器中存储的电量计上电后采集的剩余电量；以及当电量计上电后采集的剩余电量，与电量计下电前采集的剩余电量之间的第二电量变化量满足第二预设条件时，根据电量计上电后采集的剩余电量以及电量计下电前采集的剩余电量，生成多个待显示电量值，使得电子设备以预设时间间隔依次显示每个待显示电量值；其中，在电池处于充电状态下，每个待显示电量值小于或等于电量计上电后采集的剩余电量，且每个待显示电量值大于电量计下电前采集的剩余电量，显示的各个待显示电量值依次升高；在电池处于放电状态下，每个待显示电量值大于或等于电量计上电后采集的剩余电量，且每个待显示电量值小于电量计下电前采集的剩余电量，显示的各个待显示电量值依次降低。这样，通过对用户界面显示的电量值进行平滑校准，可实现用户对电量计的异常状态无感知。在一种可能的实现方式中，第二预设条件包括：在电池处于充电状态下，第二电量变化量大于第三电量跳变阈值，第三电量跳变阈值大于或等于0；或者，在电池处于放电状态下，第二电量变化量的绝对值大于第四电量跳变阈值，且电量计上电后采集的剩余电量小于电量计下电前采集的剩余电量，第四电量跳变阈值大于或等于0。第二方面，本申请实施例提出一种电量计复位方法，应用于电子设备，电子设备包括处理器、电池、开关电路和电量计，处理器分别与开关电路和电量计连接，开关电路还连接于电池与电量计之间的通路中；该方法包括：处理器检测电量计是否处于异常状态；当检测到电量计处于异常状态时，处理器向开关电路发送第一控制信号；开关电路在第一控制信号的作用下，控制电池与电量计之间的通路断开，以对电量计进行下电；处理器在间隔预设时长后向开关电路发送第二控制信号；开关电路在第二控制信号的作用下，控制电池与电量计之间的通路导通，以对电量计进行重新上电。在一种可能的实现方式中，电量计包括第一寄存器；处理器检测电量计是否处于异常状态，包括：处理器读取第一寄存器中存储的电量计的型号信息；当型号信息读取错误时，处理器确定电量计处于异常状态。在一种可能的实现方式中，电量计还包括第二寄存器和第三寄存器；在处理器读取第一寄存器中存储的电量计的型号信息之后，还包括：当型号信息读取正确时，处理器继续读取第二寄存器中存储的电池的满充容量，以及第三寄存器中存储的电池的剩余电量；当本次读取的满充容量与上次读取的满充容量不一致，和/或，本次读取的剩余电量与上次读取的剩余电量之间的第一电量变化量满足第一预设条件时，处理器确定电量计处于异常状态。在一种可能的实现方式中，第一预设条件包括：在电池处于充电状态下，第一电量变化量大于或等于第一电量跳变阈值，第一电量跳变阈值大于0；或者，在电池处于放电状态下，第一电量变化量的绝对值大于或等于第二电量跳变阈值，第二电量跳变阈值大于0。在一种可能的实现方式中，处理器检测电量计是否处于异常状态，包括：处理器每间隔预设检测周期，检测电量计是否处于异常状态；其中，在电池处于充电状态下，预设检测周期与第一电量跳变阈值呈正相关；在电池处于放电状态下，预设检测周期与第二电量跳变阈值呈正相关。在一种可能的实现方式中，在控制电池与电量计之间的通路导通，以对电量计进行重新上电之后，还包括：电量计在重新上电后，采集电池的剩余电量；电量计将上电后采集到的剩余电量存储到电量计的第三寄存器中；处理器读取第三寄存器中存储的电量计上电后采集的剩余电量；当电量计上电后采集的剩余电量，与电量计下电前采集的剩余电量之间的第二电量变化量满足第二预设条件时，处理器根据电量计上电后采集的剩余电量以及电量计下电前采集的剩余电量，生成多个待显示电量值，使得电子设备以预设时间间隔依次显示每个待显示电量值；其中，在电池处于充电状态下，每个待显示电量值小于或等于电量计上电后采集的剩余电量，且每个待显示电量值大于电量计下电前采集的剩余电量，显示的各个待显示电量值依次升高；在电池处于放电状态下，每个待显示电量值大于或等于电量计上电后采集的剩余电量，且每个待显示电量值小于电量计下电前采集的剩余电量，显示的各个待显示电量值依次降低。在一种可能的实现方式中，第二预设条件包括：在电池处于充电状态下，第二电量变化量大于第三电量跳变阈值，第三电量跳变阈值大于或等于0；或者，在电池处于放电状态下，第二电量变化量的绝对值大于第四电量跳变阈值，且电量计上电后采集的剩余电量小于电量计下电前采集的剩余电量，第四电量跳变阈值大于或等于0。第二方面各可能的实现方式，效果与第一方面以及第一方面的可能的设计中的效果类似，在此不再赘述。附图说明图1为相关技术提供的电子设备的结构示意图；图2为本申请实施例提供的电子设备的硬件系统结构示意图；图3为本申请实施例提供的电子设备的局部结构示意图；图4为本申请实施例提供的第一种开关电路的电路图；图5为本申请实施例提供的第二种开关电路的电路图；图6为本申请实施例提供的第三种开关电路的电路图；图7为本申请实施例提供的第四种开关电路的电路图；图8为本申请实施例提供的电子设备的软件系统结构示意图；图9为本申请提供的一种电量计复位方法的流程图。具体实施方式为了便于清楚描述本申请实施例的技术方案，在本申请的实施例中，采用了“第一”、“第二”等字样对功能和作用基本相同的相同项或相似项进行区分。例如，第一芯片和第二芯片仅仅是为了区分不同的芯片，并不对其先后顺序进行限定。本领域技术人员可以理解“第一”、“第二”等字样并不对数量和执行次序进行限定，并且“第一”、“第二”等字样也并不限定一定不同。需要说明的是，本申请实施例中，“示例性的”或者“例如”等词用于表示作例子、例证或说明。本申请中被描述为“示例性的”或者“例如”的任何实施例或设计方案不应被解释为比其他实施例或设计方案更优选或更具优势。确切而言，使用“示例性的”或者“例如”等词旨在以具体方式呈现相关概念。本申请实施例中，“至少一个”是指一个或者多个，“多个”是指两个或两个以上。“和/或”，描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B的情况，其中A，B可以是单数或者复数。字符“/”一般表示前后关联对象是一种“或”的关系。“以下至少一项”或其类似表达，是指的这些项中的任意组合，包括单项或复数项的任意组合。例如，a，b，或c中的至少一项，可以表示：a，b，c，a-b，a-c，b-c，或a-b-c，其中a，b，c可以是单个，也可以是多个。随着电子技术的不断发展，手机、平板电脑等电子设备的使用也越来越普遍。在电子设备内部可设置有电池，如锂电池等，通过电池对电子设备中的负载器件进行供电，使得电子设备可正常使用。随着电子设备的使用，电子设备的剩余电量会逐渐降低，因此，需要在电子设备中设置电量计，基于电量计对电池的剩余电量进行监测，使得用户及时了解电池的剩余电量，以便在电池的剩余电量耗尽之前及时为电池进行充电。电量计是根据法拉第定律，用电极上发生反应的物质的量，可以精确计算出测量电路中所通过电量的装置，其也可称为库仑计。电量计可通过采样到的电池的电压以及流过电池的总电流，然后根据各种不同算法可以计算出电池的剩余百分比电量，SOC指的是电池的百分比荷电状态，即电池的当前容量与满充容量的百分比，以下将SOC简称为剩余电量。为了实现上述的电池的剩余电量的检测过程，如图1所示，在相关技术中，可在电子设备中设置电池、处理器、电源管理模块以及电量计等器件。处理器可以为中央处理器，其是电子设备系统的运算和控制核心，是信息处理、程序运行的最终执行单元。其中，电量计直接挂载到电池下，即电量计直接与电池连接，则电池输出的供电电压Vbat可直接对电量计进行供电，使得电量计可正常工作。另外，电池输出的供电电压Vbat还可以提供给电源管理模块，电源管理模块可以将供电电压Vbat转换为系统电压Vsys，电源管理模块输出该系统电压Vsys对处理器以及其他负载器件进行供电。但是，在电子设备的使用过程中，电量计可能出现异常状态，使得用户会感知到电子设备的剩余电量出现卡死、跳变、归零，甚至电子设备无法开机等异常现象。剩余电量出现卡死的异常现象指的是：电子设备在充电状态或放电状态下，电子设备上显示的剩余电量一直保持不变。剩余电量出现跳变的异常现象指的是：电子设备上显示的剩余电量在短时间内突然发生较大的变化，如1s内电子设备上显示的剩余电量直接从60%变为65%。电子设备出现归零的异常现象指的是：电量计因出现异常而导致其采集到的剩余电量为0，且使得电子设备显示的剩余电量也为0。这种情况下，会触发电子设备关机，在电子设备关机后，若用户触发开机键开机后也无法正常开机。在相关技术中，当用户感知到电子设备的剩余电量出现卡死、跳变、归零，甚至电子设备无法开机等异常现象时，可以去维修网点让维修人员重新拆装电池等维修处理方式，来对出现异常状态的电量计进行复位。但是，上述这种通过维修处理对电量计进行复位的方式，会给用户带来不便，以及增加了维修成本等问题。基于此，本申请实施例提供了一种电子设备及电量计复位方法，通过在电子设备中增设开关电路，将开关电路连接于电池与电量计之间的通路中，当处理器检测到电量计处于异常状态时，处理器先向开关电路发送第一控制信号，控制电池与电量计之间的通路断开，以对电量计进行下电，处理器在间隔预设时长后再次向开关电路发送第二控制信号，控制电池与电量计之间的通路导通，以对电量计进行重新上电。因此，通过处理器自动识别电量计是否处于异常状态，以及当电量计处于异常状态时，通过开关电路对出现异常状态的电量计进行复位，从而减少了不必要的报障和维修动作，降低了维修处理给用户造成的不便，提高用户的使用体验，且降低了维修成本。本申请实施例提供的电子设备可以是手机、平板电脑、可穿戴设备、车载设备、增强现实设备、虚拟现实设备、笔记本电脑、超级移动个人计算机、上网本、个人数字助理等具有电量计的电子设备。本申请实施例对电子设备所采用的具体技术和具体设备形态不做限定。为了能够更好地理解本申请实施例，下面对本申请实施例的电子设备的结构进行介绍。示例性的，图2为本申请实施例提供的一种电子设备100的结构示意图。电子设备100可以包括处理器110，外部存储器接口120，内部存储器121，通用串行总线接口130，充电管理模块140，电源管理模块141，电池142，第一天线，第二天线，移动通信模块150，无线通信模块160，音频模块170，扬声器170A，受话器170B，麦克风170C，耳机接口170D，传感器模块180，按键190，马达191，指示器192，摄像头193，显示屏194，以及用户标识模块卡接口195等。其中传感器模块180可以包括压力传感器，陀螺仪传感器，气压传感器，磁传感器，加速度传感器，距离传感器，接近光传感器，指纹传感器，温度传感器，触摸传感器，环境光传感器，骨传导传感器等。可以理解的是，本申请实施例示意的结构并不构成对电子设备100的具体限定。在本申请另一些实施例中，电子设备100可以包括比图示更多或更少的部件，或者组合某些部件，或者拆分某些部件，或者不同的部件布置。图示的部件可以以硬件，软件或软件和硬件的组合实现。在一些实施例中，电子设备100还包括电量计143和开关电路144。处理器110可以包括一个或多个处理单元，例如：处理器110可以包括中央处理器，应用处理器，调制解调处理器，图形处理器，图像信号处理器，控制器，视频编解码器，数字信号处理器，基带处理器，和/或神经网络处理器等。其中，不同的处理单元可以是独立的器件，也可以集成在一个或多个处理器中。控制器可以根据指令操作码和时序信号，产生操作控制信号，完成取指令和执行指令的控制。处理器110中还可以设置存储器，用于存储指令和数据。在一些实施例中，处理器110中的存储器为高速缓冲存储器。该存储器可以保存处理器110刚用过或循环使用的指令或数据。如果处理器110需要再次使用该指令或数据，可从存储器中调用。避免了重复存取，减少了处理器110的等待时间，因而提高了系统的效率。在一些实施例中，处理器110可以包括一个或多个接口。接口可以包括集成电路接口，集成电路内置音频接口，脉冲编码调制接口，通用异步收发传输器接口，移动产业处理器接口，通用输入输出接口，用户标识模块接口，和/或USB接口等。USB接口130是符合USB标准规范的接口，具体可以是Mini USB接口，Micro USB接口，USB Type C接口等。USB接口130可以用于连接充电器为电子设备100充电，也可以用于电子设备100与外围设备之间传输数据。也可以用于连接耳机，通过耳机播放音频。该接口还可以用于连接其他电子设备，例如AR设备等。充电管理模块140用于从充电器接收充电输入。其中，充电器可以是无线充电器，也可以是有线充电器。在一些有线充电的实施例中，充电管理模块140可以通过USB接口130接收有线充电器的充电输入。在一些无线充电的实施例中，充电管理模块140可以通过电子设备100的无线充电线圈接收无线充电输入。充电管理模块140为电池142充电的同时，还可以通过电源管理模块141为电子设备100供电。电源管理模块141用于连接电池142，充电管理模块140以及处理器110。电源管理模块141接收电池142和/或充电管理模块140的输入，为处理器110，内部存储器121，显示屏194，摄像头193，和无线通信模块160等供电。在其他一些实施例中，电源管理模块141也可以设置于处理器110中。在另一些实施例中，电源管理模块141和充电管理模块140也可以设置于同一个器件中。电量计143用于采集电池142的剩余电量。并且，电量计143与处理器110连接，使得处理器110可检测电量计143是否处于异常状态。开关电路144用于与处理器110连接，且开关电路144还连接于电池142与电量计143之间的通路中。处理器110用于在检测到电量计143处于异常状态时，通过控制开关电路144以控制电池142与电量计143之间的通路的导通或断开，实现对电量计143进行复位。电子设备100的无线通信功能可以通过第一天线，第二天线，移动通信模块150，无线通信模块160，调制解调处理器以及基带处理器等实现。电子设备100通过GPU，显示屏194，以及应用处理器等实现显示功能。GPU为图像处理的微处理器，连接显示屏194和应用处理器。GPU用于执行数学和几何计算，用于图形渲染。处理器110可包括一个或多个GPU，其执行程序指令以生成或改变显示信息。显示屏194用于显示图像、显示视频和接收滑动操作等。显示屏194包括显示面板。显示面板可以采用液晶显示屏，有机发光二极管，有源矩阵有机发光二极体或主动矩阵有机发光二极体，柔性发光二极管，Miniled，MicroLed，Micro-oLed，量子点发光二极管等。在一些实施例中，电子设备100可以包括1个或多个显示屏194。电子设备100可以通过ISP，摄像头193，视频编解码器，GPU，显示屏194以及应用处理器等实现拍摄功能。外部存储器接口120可以用于连接外部存储卡，例如Micro SD卡，实现扩展电子设备100的存储能力。外部存储卡通过外部存储器接口120与处理器110通信，实现数据存储功能。例如将音乐，视频等文件保存在外部存储卡中。内部存储器121可以用于存储计算机可执行程序代码，可执行程序代码包括指令。内部存储器121可以包括存储程序区和存储数据区。其中，存储程序区可存储操作系统，至少一个功能所需的应用程序等。存储数据区可存储电子设备100使用过程中所创建的数据等。此外，内部存储器121可以包括高速随机存取存储器，还可以包括非易失性存储器，例如至少一个磁盘存储器件，闪存器件，通用闪存存储器等。处理器110通过运行存储在内部存储器121的指令，和/或存储在设置于处理器中的存储器的指令，执行电子设备100的各种功能应用以及数据处理。电子设备100可以通过音频模块170，扬声器170A，受话器170B，麦克风170C，耳机接口170D，以及应用处理器等实现音频功能。例如音乐播放，录音等。按键190包括开机键，音量键等。按键190可以是机械按键。也可以是触摸式按键。电子设备100可以接收按键输入，产生与电子设备100的用户设置以及功能控制有关的键信号输入。马达191可以产生振动提示。马达191可以用于来电振动提示，也可以用于触摸振动反馈。例如，作用于不同应用程序的触摸操作，可以对应不同的振动反馈效果。作用于显示屏194不同区域的触摸操作，马达191也可对应不同的振动反馈效果。不同的应用场景也可以对应不同的振动反馈效果。指示器192可以是指示灯，可以用于指示充电状态，电量变化，也可以用于指示消息，未接来电，通知等。SIM卡接口195用于连接SIM卡。下面以具体地实施例对本申请的技术方案以及本申请的技术方案如何解决上述技术问题进行详细说明。下面这几个具体的实施例可以独立实现，也可以相互结合，对于相同或相似的概念或过程可能在某些实施例中不再赘述。示例性的，图3为本申请实施例提供的电子设备的局部结构示意图。为了更清楚地体现本申请实施例提供的电子设备与如图1所示的相关技术中的电子设备的区别，图3所示的电子设备仅示出了图2所示的电子设备中，与电量计复位操作相关的器件。参照图3所示，电子设备包括处理器110、电池142、开关电路144和电量计143，处理器110分别与开关电路144和电量计143连接，开关电路144还连接于电池142与电量计143之间的通路中。其中，电量计143可通过I2C总线与处理器110的I2C接口连接；开关电路144实际上是与电池142的正极连接，电池142的正极可输出供电电压Vbat。此外，该电子设备还包括电源管理模块141，电源管理模块141分别与电池142和处理器110连接。电源管理模块141可接收电池输入的供电电压Vbat，并将供电电压Vbat转换为系统电压Vsys，电源管理模块141输出该系统电压Vsys对处理器110以及其他负载器件进行供电。在一些实施例中，处理器110，用于检测电量计143是否处于异常状态，以及当检测到电量计143处于异常状态时，向开关电路144发送复位控制信号，复位控制信号包括第一控制信号以及间隔预设时长后的第二控制信号；开关电路144，用于在第一控制信号的作用下，控制电池142与电量计143之间的通路断开，以对电量计143进行下电；以及在第二控制信号的作用下，控制电池142与电量计143之间的通路导通，以对电量计143进行重新上电。在实际使用过程中，以下两种情况会使得电子设备100中的电量计143出现异常状态：一种情况是电量计143与处理器110之间连接的I2C总线受到某些干扰时，会导致电量计143不再响应处理器110发送的命令；另一种情况是在某些场景下因电池142的正极输出的供电电压Vbat快速跌落，导致电量计143出现异常，从而使得电量计143内部的寄存器中存储的数据出现错乱，例如，在维修电子设备的过程中，若在将电池142与主板在通过板对板连接器连接时，电池142的安装操作不当，可能会导致电池142的正极与接地端GND之间发生短路，从而使得电池142的正极输出的供电电压Vbat快速跌落，或者，当电子设备100中的一些大功耗负载瞬时抽载时，其也会导致电池142的正极输出的供电电压Vbat快速跌落。电量计可以包括几个重要的寄存器，如dev_id寄存器、SOC寄存器、满充容量寄存器、循环次数寄存器以及健康状态寄存器等。其中，dev_id寄存器也可称为第一寄存器，其存储的是电量计143的型号信息，dev_id寄存器存储的电量计143的型号信息为只读状态，且该电量计143的型号信息为已知的固定值。FCC寄存器也可称为第二寄存器，其存储的是电池142的满充容量，对于同一电子设备而言，电池142的满充容量一般为固定值。SOC寄存器也可称为第三寄存器，其存储的是电池142的剩余电量。循环次数寄存器存储的是电池142的充放电循环次数。SOH寄存器存储的是电池142的健康状态，电池142的健康状态可通过电池142当前的容量与出厂容量的百分比表示，若电池142的健康状态低于预设阈值时，表示该电池142已无法正常工作，这种情况下需要更换电池142。在一些实施例中，处理器110可通过以下检测流程检测电量计143是否处于异常状态。首先，处理器110通过I2C接口读取电量计143中的dev_id寄存器存储的电量计143的型号信息；当电量计143的型号信息读取错误时，如电量计143的型号信息读取失败，或者，电量计143向处理器110返回否定应答信号时，说明I2C总线受到干扰，而使得电量计143处于异常状态，此时，需要触发对电量计143的复位操作。而当电量计143的型号信息读取正确时，处理器110可以继续读取FCC寄存器中存储的电池142的满充容量，以及SOC寄存器中存储的电池142的剩余电量；并且，处理器110会读取随机存取存储器保存的电池142的满充容量以及电池142的剩余电量。RAM保存的电池142的满充容量是处理器110上次从FCC寄存器中读取的电池142的满充容量，并将其保存在RAM中的；RAM中保存的电池142的剩余电量是处理器110上次从SOC寄存器中读取的电池142的剩余电量，并将其保存在RAM中的。接着，处理器110将本次从FCC寄存器中读取的电池142的满充容量，与上次从FCC寄存器中读取的电池142的满充容量进行对比，以及将本次从SOC寄存器中读取的电池142的剩余电量，与上次从SOC寄存器中读取的电池142的剩余电量进行对比。当本次读取的电池142的满充容量与上次读取的电池142的满充容量不一致，和/或，本次读取的电池142的剩余电量与上次读取的电池142的剩余电量之间的第一电量变化量满足第一预设条件时，说明电量计143内部的寄存器发生错乱或者电量跳变，即确定电量计143处于异常状态，此时，需要触发对电量计143的复位操作。而当本次读取的电池142的满充容量与上次读取的电池142的满充容量一致，且本次读取的电池142的剩余电量与上次读取的电池142的剩余电量之间的第一电量变化量不满足第一预设条件时，说明电量计143处于正常状态，则处理器110会将本次读取的电池142的剩余电量写入RAM中，以替换RAM之前保存的上次读取的电池142的剩余电量。至此，本次的检测流程结束，等待执行下一次的检测流程。在电量计143处于正常状态时，FCC寄存器充存储的电池142的满充容量为固定值。因此，当处理器110本次从FCC寄存器中读取的电池142的满充容量，与上次从FCC寄存器中读取的电池142的满充容量不一致，则说明电量计143内部的FCC寄存器发生错乱。需要说明的是，当本次的检测流程为首次检测流程时，则RAM中未保存有处理器110上次从FCC寄存器中读取的电池142的满充容量，RAM中也未保存有处理器110上次从SOC寄存器中读取的电池142的剩余电量。这种情况下，处理器110无需将本次读取的电池142的满充容量与上次读取的电池142的满充容量进行对比，以及无需将本次读取的电池142的剩余电量与上次读取的电池142的剩余电量进行对比，处理器110直接将本次从FCC寄存器中读取的电池142的满充容量，以及本次从SOC寄存器中读取的电池142的剩余电量，写入到RAM中以进行保存即可。另外，由于RAM中保存的数据在断电时会丢失所有保存的数据，因此，在电子设备100关机前，处理器110可以从RAM中读取电池142的满充容量以及电池142的剩余电量等数据，并将其写入到flash中。在电子设备100开机后，处理器110再次从flash中读取这些数据并将其回写到RAM中，从而避免在电子设备100关机过程中，丢失电池142的满充容量以及电池142的剩余电量等数据。在一种可选的实施方式中，第一预设条件包括：在电池142处于充电状态下，第一电量变化量大于或等于第一电量跳变阈值，第一电量跳变阈值大于0；或者，在电池142处于放电状态下，第一电量变化量的绝对值大于或等于第二电量跳变阈值，第二电量跳变阈值大于0。其中，第一电量变化量指的是本次读取的电池142的剩余电量与上次读取的电池142的剩余电量之间的电量差，即第一电量变化量等于本次读取的电池142的剩余电量减去上次读取的电池142的剩余电量。也就是说，在采用充电器为电子设备100中的电池142进行充电的场景下，当本次读取的电池142的剩余电量与上次读取的电池142的剩余电量之间的第一电量变化量，大于或等于第一电量跳变阈值时，确定第一电量变化量满足第一预设条件；而当本次读取的电池142的剩余电量与上次读取的电池142的剩余电量之间的第一电量变化量小于第一电量跳变阈值时，确定第一电量变化量不满足第一预设条件。在电池142处于充电场景下，电池142的剩余电量会逐渐上升，使得计算得到的第一电量变化量为正数。并且，当第一电量变化量大于或等于第一电量跳变阈值时，确定电池142上升的电量，除了是因为电池142充电引起的以外，还包括一定程度的电量跳变，这种情况下可确定电量计143处于异常状态；而当第一电量变化量小于第一电量跳变阈值时，确定电池142上升的电量仅仅是电池142充电导致的，这种情况下可确定电量计143处于正常状态。相应的，在采用电池142为电子设备100中的负载进行供电的场景下，即电池142处于放电状态下，当本次读取的电池142的剩余电量与上次读取的电池142的剩余电量之间的第一电量变化量的绝对值，大于或等于第二电量跳变阈值时，确定第一电量变化量满足第一预设条件；而当本次读取的电池142的剩余电量与上次读取的电池142的剩余电量之间的第一电量变化量的绝对值，小于第二电量跳变阈值时，确定第一电量变化量不满足第一预设条件。在电池142处于放电状态下，电池142的剩余电量会逐渐下降，使得计算得到的第一电量变化量为负数。并且，当第一电量变化量的绝对值大于或等于第二电量跳变阈值时，确定电池142下降的电量，除了是因为电池142放电引起的以外，还包括一定程度的电量跳变，这种情况下可确定电量计143处于异常状态；而当第一电量变化量的绝对值小于第一电量跳变阈值时，确定电池142下降的电量仅仅是电池142放电导致的，这种情况下可确定电量计143处于正常状态。其中，第一电量跳变阈值和第二电量跳变阈值可根据经验值进行设定；并且，第一电量跳变阈值和第二电量跳变阈值可以相等，也可以不相等，本申请实施例对此不作限定。示例性的，一些电子设备100可支持快充协议，其会使得电池142在充电场景下的电量上升速率，大于电池142在放电场景下的电量下降速度，因此，也可以将第一电量跳变阈值设置成大于第二电量跳变阈值。在一种可选的实施方式中，处理器110，具体用于每间隔预设检测周期，检测一次电量计143是否处于异常状态；其中，在电池142处于充电状态下，预设检测周期与第一电量跳变阈值呈正相关；在电池142处于放电状态下，预设检测周期与第二电量跳变阈值呈正相关。在电子设备100的使用过程中，处理器110可以根据预设检测周期，循环检测电量计143是否处于异常状态，处理器110在相邻两次检测电量计143是否处于异常状态的时间，间隔该预设检测周期。并且，在电池142处于充电状态下，预设检测周期与第一电量跳变阈值呈正相关。当预设检测周期越长时，在相邻两次的电量计143的异常状态检测过程中，电池142的剩余电量上升的幅度越大，使得第一电量变化量也越大，因此，选取的第一电量跳变阈值也越大。当预设检测周期越短时，在相邻两次的电量计143的异常状态检测过程中，电池142的剩余电量上升的幅度越小，使得第一电量变化量也越小，因此，选取的第一电量跳变阈值也越小。例如，预设检测周期可以为30s，则第一电量跳变阈值可以为2%；或者，预设检测周期可以为20分钟，则第一电量跳变阈值可以为50%。相应的，在电池142处于放电状态下，预设检测周期与第二电量跳变阈值呈正相关。当预设检测周期越长时，第二电量跳变阈值越大；当预设检测周期越短时，第二电量跳变阈值越小。当然，可以理解的是，处理器110也可以不采用预设检测周期，来循环检测电量计143是否处于异常状态。在一些场景中，当需要采用处理器110检测电量计143是否处于异常状态时，可触发处理器110按照上述的检测流程来检测电量计143是否处于异常状态。例如，当用户向电子设备100输入针对电量计143的检测指令时，处理器110可根据该检测指令检测电量计143是否处于异常状态。处理器110在采用上述的检测流程检测出电量计143处于异常状态的情况下，处理器110可以执行对电量计143的复位操作。在采用处理器110实现对电量计143执行复位操作的过程中，需要在电池142与电量计143之间的通路中增加一个开关电路144，处理器110可通过控制开关电路144，实现对电量计143的复位操作。在电子设备100中的电量计143处于正常状态，或者电子设备100处于关机状态时，开关电路144默认为导通状态，使得电池142与电量计143之间的通路导通，则电池142可以对电量计143进行供电，使得电量计143可正常工作。当电子设备100中的电量计143处于异常状态时，处理器110可控制开关电路144断开电池142与电量计143之间的通路，对电量计143进行下电，然后，处理器110再次控制开关电路144导通电池142与电量计143之间的通路，对电量计143进行重新上电，从而实现对电量计143的复位操作。具体的，处理器110在检测到电量计143处于异常状态时，处理器110先向开关电路144发送第一控制信号，开关电路144在第一控制信号的作用下，控制电池142与电量计143之间的通路断开，使得电池142不再对电量计143进行供电，即实现对电量计143进行下电。处理器110在发送第一控制信号之后再间隔预设时长，处理器110会再次向开关电路144发送第二控制信号，开关电路144在第二控制信号的作用下，重新控制电池142与电量计143之间的通路导通，使得电池142再次对电量计143进行供电，即实现对电量计143进行重新上电。从而基于上述方式实现对电量计143的复位。为了方便描述，将第一控制信号以及间隔预设时长后的第二控制信号合起来称为复位控制信号。其中，预设时长的具体数值可根据经验值进行设定，例如，该预设时长可以为10ms或20ms等，预设时长的具体数值本申请实施例对此不作限定。下面结合图4至图7这四种不同的开关电路144，说明处理器110如何通过控制开关电路144，实现对电量计143的复位操作。在实际产品中，开关电路144可以位于电子设备100的主板上。可按照开关电路144中包括的各个器件的功能以及连接关系等，将图4至图7所示的每个开关电路144均划分为第一开关模块1441和第二开关模块1442。其中，第一开关模块1441，分别与处理器110、第二开关模块1442和接地端GND连接，其用于在处理器110发送的复位控制信号的作用下，控制第二开关模块1442的导通或截止；第二开关模块1442，分别与电池142和电量计143连接，其用于在第一开关模块1441的作用下，控制电池142和电量计143之间的通路的导通或断开，以实现对电量计143进行复位。针对第一种可选的开关电路144，如图4所示，第一开关模块1441包括第一开关管Q1、第一限流电阻R1和第一上拉电阻R2。第一限流电阻R1的第一端与处理器110连接，第一限流电阻R1的第二端与第一开关管Q1的控制端连接；第一开关管Q1的第一端与第二开关模块1442连接，第一开关管Q1的第二端与接地端GND连接；第一上拉电阻R2的第一端与电池142连接，第一上拉电阻R2的第二端与第一限流电阻R1的第一端连接。如图4所示，第二开关模块1442包括第四开关管Q4和第三上拉电阻R7。第四开关管Q4的控制端与第一开关模块1441连接，具体的，第四开关管Q4的控制端是与第一开关模块1441中的第一开关管Q1的第一端连接的，第四开关管Q4的第一端与电池142连接，第四开关管Q4的第二端与电量计143连接；第三上拉电阻R7的第一端与电池142连接，第三上拉电阻R7的第二端与第四开关管Q4的控制端连接。其中，第一开关管Q1可以为NPN型三极管，第一开关管Q1的控制端指的是第一开关管Q1的基极，第一开关管Q1的第一端指的是第一开关管Q1的集电极，第一开关管Q1的第二端指的是第一开关管Q1的发射极。第四开关管Q4可以为P型金属氧化物半导体晶体管，第四开关管Q4的控制端指的是第四开关管Q4的栅极，第四开关管Q4的第一端指的是第四开关管Q4的源极，第四开关管Q4的第二端指的是第四开关管Q4的漏极。第一限流电阻R1用于对第一开关管Q1起保护作用，其可以降低提供给第一开关管Q1的基极的电流，从而降低第一开关管Q1的基极被大电流烧毁的可能性。第一上拉电阻R2是为了在电子设备100处于关机状态，处理器110不再提供控制信号的情况下，通过电池142使得第一开关管Q1的控制端为高电平，进而使得第一开关管Q1和第四开关管Q4均处于导通状态，则电池142可以继续为电量计143进行供电。第三上拉电阻R7是为了在开关电路144的工作过程中，将第四开关管Q4的控制端上拉至供电电压Vbat。下面以第一开关管Q1为NPN型三极管，第四开关管Q4为P型MOS管为例，说明处理器110通过控制开关电路144，实现对电量计143的复位操作的具体过程。在处理器110在检测到电量计143处于异常状态时，处理器110先向开关电路144中的第一开关管Q1的控制端提供第一控制信号，第一控制信号为低电平信号，使得第一开关管Q1处于截止状态，则在第三上拉电阻R7的作用下，使得第四开关管Q4的控制端为高电平，进而使得第四开关管Q4也处于截止状态，则电池142与电量计143之间的通路断开，使得电池142不再对电量计143进行供电，即实现对电量计143进行下电。处理器110在发送第一控制信号之后再间隔预设时长，处理器110会再次向开关电路144中的第一开关管Q1的控制端提供第二控制信号，第二控制信号为高电平信号，使得第一开关管Q1处于导通状态，则第四开关管Q4的控制端为低电平，进而使得第四开关管Q4处于导通状态，则电池142与电量计143之间的通路导通，使得电池142再次对电量计143进行供电，即实现对电量计143进行重新上电。图4所示的开关电路144，其电路结构简单通用，且第一开关管Q1和第四开关管Q4均可采用电池142输出的供电电压Vbat进行驱动。需要说明的是，在另一些实施例中，上述的第一开关管Q1也可以替换为PNP型三极管，上述的第四开关管Q4也可以替换成N型MOS管。针对第二种可选的开关电路144，如图5所示，第一开关模块1441包括第二开关管Q2、第三开关管Q3、第二限流电阻R3、第三限流电阻R4、第一下拉电阻R5和第二上拉电阻R6。第二限流电阻R3的第一端与处理器110连接，第二限流电阻R3的第二端与第二开关管Q2的控制端连接；第二开关管Q2的第一端与第三限流电阻R4的第一端连接，第二开关管Q2的第二端与接地端GND连接；第一下拉电阻R5的第一端与第二限流电阻R3的第一端连接，第一下拉电阻R5的第二端与接地端GND连接；第三限流电阻R4的第二端与第三开关管Q3的控制端连接；第三开关管Q3的第一端与第二开关模块1442连接，第三开关管Q3的第二端与接地端GND连接；第二上拉电阻R6的第一端与电池142连接，第二上拉电阻R6的第二端与第三限流电阻R4的第一端。如图5所示，第二开关模块1442包括第四开关管Q4和第三上拉电阻R7。第四开关管Q4的控制端与第一开关模块1441连接，具体的，第四开关管Q4的控制端是与第一开关模块1441中的第三开关管Q3的第一端连接的，第四开关管Q4的第一端与电池142连接，第四开关管Q4的第二端与电量计143连接；第三上拉电阻R7的第一端与电池142连接，第三上拉电阻R7的第二端与第四开关管Q4的控制端连接。其中，第二开关管Q2可以为NPN型三极管，第二开关管Q2的控制端指的是第二开关管Q2的基极，第二开关管Q2的第一端指的是第二开关管Q2的集电极，第二开关管Q2的第二端指的是第二开关管Q2的发射极。第三开关管Q3也可以为NPN型三极管，第三开关管Q3的控制端指的是第三开关管Q3的基极，第三开关管Q3的第一端指的是第三开关管Q3的集电极，第三开关管Q3的第二端指的是第三开关管Q3的的发射极。第二限流电阻R3用于对第二开关管Q2起保护作用，其可以降低第二开关管Q2的基极被大电流烧毁的可能性。第三限流电阻R4用于对第三开关管Q3起保护作用，其可以降低第三开关管Q3的基极被大电流烧毁的可能性。第一下拉电阻R5是为了在电子设备100处于关机状态，处理器110不再提供控制信号的情况下，通过接地端GND使得第二开关管Q2的控制端为低电平，进而使得第二开关管Q2处于截止状态，而第三开关管Q3和第四开关管Q4均处于导通状态，则电池142可以继续为电量计143进行供电。第二上拉电阻R6是为了在开关电路144的工作过程中，将第三开关管Q3的控制端上拉至供电电压Vbat。下面以第二开关管Q2和第三开关管Q3均为NPN型三极管，第四开关管Q4为P型MOS管为例，说明处理器110通过控制开关电路144，实现对电量计143的复位操作的具体过程。在处理器110在检测到电量计143处于异常状态时，处理器110先向开关电路144中的第二开关管Q2的控制端提供第一控制信号，第一控制信号为高电平信号，使得第二开关管Q2处于导通状态，则第三开关管Q3的控制端为低电平，使得第三开关管Q3处于截止状态。在第三上拉电阻R7的作用下，使得第四开关管Q4的控制端为高电平，进而使得第四开关管Q4处于截止状态，则电池142与电量计143之间的通路断开，使得电池142不再对电量计143进行供电，即实现对电量计143进行下电。处理器110在发送第一控制信号之后再间隔预设时长，处理器110会再次向开关电路144中的第二开关管Q2的控制端提供第二控制信号，第二控制信号为低电平信号，使得第二开关管Q2处于截止状态，则在第二上拉电阻R6的作用下，使得第三开关管Q3的控制端为高电平，进而使得第三开关管Q3处于导通状态，则第四开关管Q4的控制端为低电平，进而使得第四开关管Q4处于导通状态，则电池142与电量计143之间的通路导通，使得电池142再次对电量计143进行供电，即实现对电量计143进行重新上电。需要说明的是，图5所示的开关电路144中的第二开关模块1442，与图4所示的开关电路144中的第二开关模块1442相同，并且，图5所示的开关电路144中的第一开关模块1441，与图4所示的开关电路144中的第一开关模块1441有所不同。图5所示的开关电路144，其可以在电子设备100处于关机状态下，也可以很容易地实现第四开关管Q4一直处于导通状态。需要说明的是，在另一些实施例中，上述的第二开关管Q2和第三开关管Q3也可以均替换为PNP型三极管，上述的第四开关管Q4也可以替换成N型MOS管。针对第三种可选的开关电路144，如图6所示，第一开关模块1441包括第五开关管Q5、第四限流电阻R8和第二下拉电阻R9。第四限流电阻R8的第一端与处理器110连接，第四限流电阻R8的第二端与第五开关管Q5的控制端连接；第五开关管Q5的第一端与高电平信号端V0连接，第五开关管Q5的第二端与第二开关模块1442连接；第二下拉电阻R9的第一端与第四限流电阻R8的第一端连接，第二下拉电阻R9的第二端与接地端GND连接。如图6所示，第二开关模块1442包括第六开关管Q6和第三下拉电阻R10。第六开关管Q6的控制端与第一开关模块1441连接，具体的，第六开关管Q6的控制端是与第一开关模块1441中的第五开关管Q5的第二端连接的，第六开关管Q6的第一端与电池142连接，第六开关管Q6的第二端与电量计143连接；第三下拉电阻R10的第一端与第六开关管Q6的控制端连接，第三下拉电阻R10的第二端与接地端GND连接。其中，第五开关管Q5可以为NPN型三极管，第五开关管Q5的控制端指的是第五开关管Q5的基极，第五开关管Q5的第一端指的是第五开关管Q5的集电极，第五开关管Q5的第二端指的是第五开关管Q5的发射极。第六开关管Q6可以为P型MOS管，第六开关管Q6的控制端指的是第六开关管Q6的栅极，第六开关管Q6的第一端指的是第六开关管Q6的源极，第六开关管Q6的第二端指的是第六开关管Q6的漏极。第四限流电阻R8用于对第五开关管Q5起保护作用，其可以降低第五开关管Q5的基极被大电流烧毁的可能性。第二下拉电阻R9是为了在电子设备100处于关机状态，处理器110不再提供控制信号的情况下，通过接地端GND使得第五开关管Q5的控制端为低电平，进而使得第五开关管Q5处于截止状态，而第六开关管Q6处于导通状态，则电池142可以继续为电量计143进行供电。第三下拉电阻R10是为了在开关电路144的工作过程中，将第六开关管Q6的控制端下拉至接地端GND的电压。第五开关管Q5的第一端连接的高电平信号端V0，可以向第五开关管Q5的第一端提供高电平信号，该高电平信号的电压可以为5V。高电平信号端V0与电池142为两个不同的电压信号端。下面以第五开关管Q5为NPN型三极管，第六开关管Q6为P型MOS管为例，说明处理器110通过控制开关电路144，实现对电量计143的复位操作的具体过程。在处理器110在检测到电量计143处于异常状态时，处理器110先向开关电路144中的第五开关管Q5的控制端提供第一控制信号，第一控制信号为高电平信号，使得第五开关管Q5处于导通状态，则第六开关管Q6的控制端为高电平，进而使得第六开关管Q6处于截止状态，则电池142与电量计143之间的通路断开，使得电池142不再对电量计143进行供电，即实现对电量计143进行下电。处理器110在发送第一控制信号之后再间隔预设时长，处理器110会再次向开关电路144中的第五开关管Q5的控制端提供第二控制信号，第二控制信号为低电平信号，使得第五开关管Q5处于截止状态，则在第三下拉电阻R10的作用下，使得第六开关管Q6的控制端为低电平，进而使得第六开关管Q6处于导通状态，则电池142与电量计143之间的通路导通，使得电池142再次对电量计143进行供电，即实现对电量计143进行重新上电。图6所示的开关电路144，其电路结构简单通用，也可以减轻第六开关管Q6在处于导通状态时的漏电问题；并且，在电子设备100处于关机状态下，也可以很容易地实现第六开关管Q6一直处于导通状态。需要说明的是，在另一些实施例中，上述的第五开关管Q5也可以替换为PNP型三极管，上述的第六开关管Q6也可以替换成N型MOS管。针对第四种可选的开关电路144，如图7所示，第一开关模块1441包括第五开关管Q5、第四限流电阻R8和第二下拉电阻R9，第二开关模块1442包括第六开关管Q6和第三下拉电阻R10。图7所示的开关电路144与图6所示的开关电路的不同之处在于，图7所示的开关电路144中，第五开关管Q5的第一端与电池142连接，因此，无需额外设置高电平信号端V0向第五开关管Q5的第一端提供高电平信号，而图6所示的开关电路144中，第五开关管Q5的第一端是与高电平信号端V0连接，因此，需要额外设置高电平信号端V0向第五开关管Q5的第一端提供高电平信号。图7所示的开关电路144中的其余各个器件的连接关系可参照图6对应的描述，且图7所示的开关电路144对电量计143进行复位操作的具体过程，可参照图6所示的开关电路144对电量计143进行复位操作的具体过程，为避免重复，在此不再赘述。图7所示的开关电路144，其电路结构简单通用，第五开关管Q5和第六开关管Q6均可采用电池142输出的供电电压Vbat进行驱动；也可以减轻第六开关管Q6在处于导通状态时的漏电问题；并且，在电子设备100处于关机状态下，也可以很容易地实现第六开关管Q6一直处于导通状态。需要说明的是，针对图7所示的开关电路144，由于第五开关管Q5导通时，第六开关管Q6的栅极电压实际上是电池142的供电电压Vbat减去第五开关管Q5的导通压降，因此，可选取VGS导通电压阈值小于-0.3V的晶体管作为第六开关管Q6。综上，通过处理器110自动识别电量计143是否处于异常状态，以及当电量计143处于异常状态时，通过开关电路144对出现异常状态的电量计143进行复位，即实现对电量计143进行异常状态的恢复，从而减少了不必要的报障和维修动作，降低了维修处理给用户造成的不便，提高用户的使用体验，且降低了维修成本。处理器110在通过控制上述图4至图7所示的开关电路144，对电量计143进行复位操作之后，电量计143还可进行初始化操作，并根据实际情况对电子设备100上显示的电池142的电量值进行平滑校准，平滑校准的具体过程可参照下面的描述。电量计143进行初始化操作实际上指的是电量计143可以在重新上电后采集电池142的剩余电量，并将上电后采集到的剩余电量存储到电量计143的SOC寄存器中。另外，电量计143在下电后，其内部寄存器中存储的部分数据会丢失，如循环次数寄存器中存储的电池142的充放电循环次数，以及SOH寄存器存储的是电池142的健康状态等数据会丢失。因此，在电量计143下电前，可以将充放电循环次数以及健康状态等数据保存到RAM中，并且，在电量计143重新上电后，处理器110可以从RAM中读取充放电循环次数以及健康状态等数据，并将其回写到电量计143相应的寄存器中。电量计143在将上电后采集到的电池142的剩余电量，存储到电量计143的SOC寄存器中之后，处理器110可以读取SOC寄存器中存储的电量计143上电后采集的电池142的剩余电量；并且，处理器110还可以读取RAM保存的电量计143下电前采集的电池142的剩余电量。接着，处理器110将电量计143上电后采集的电池142的剩余电量，与电量计143下电前采集的电池142的剩余电量进行对比。当电量计143上电后采集的电池142的剩余电量，与电量计143下电前采集的电池142的剩余电量之间的第二电量变化量满足第二预设条件时，处理器110可以对电子设备100上准备显示的电池142的电量值进行平滑校准，即处理器110可根据电量计143上电后采集的电池142的剩余电量，以及电量计143下电前采集的电池142的剩余电量，生成多个待显示电量值。相应的，处理器110还可将电量计143上电后采集的电池142的剩余电量写入到RAM中。最后，处理器110以预设时间间隔依次将各个待显示电量值上报至上层软件，使得电子设备100在相应的用户界面以预设时间间隔依次显示每个待显示电量值，则用户可以在用户界面看到平滑校准后的待显示电量值。而当电量计143上电后采集的电池142的剩余电量，与电量计143下电前采集的电池142的剩余电量之间的第二电量变化量不满足第二预设条件时，处理器110无需对电子设备100上准备显示的电池142的电量值进行平滑校准。至此，本次电量计143的异常状态检测流程以及复位流程结束，等待执行下一次的异常状态检测流程以及复位流程。处理器110通过对电子设备100上显示的电池142的电量值进行平滑校准，使得电子设备100上显示的电池142的电量值不会发生较大的跳变，从而避免用户因为显示的电池142的电量值发生较大的跳变，而误认为电子设备100发生故障。因此，处理器110通过对用户界面显示的电量值进行平滑校准，可实现用户对电量计143的异常状态无感知。在一种场景中，在电池142处于充电状态下，每个待显示电量值小于或等于电量计143上电后采集的剩余电量，且每个待显示电量值大于电量计143下电前采集的剩余电量；显示的各个待显示电量值依次升高。例如，在电池142处于充电状态下，电量计143上电后采集的电池142的剩余电量为65%，而电量计143下电前采集的电池142的剩余电量为60%，因此，处理器110可生成多个待显示电量值，其分别为61%、62%、63%、64%以及65%。以预设时间间隔为1s为例，处理器110每间隔1s将一个待显示电量值上报至上层软件，使得电子设备100在用户界面每间隔1s显示上报的一个待显示电量值，即用户界面依次显示的各个待显示电量值分别为61%、62%、63%、64%以及65%。在另一种场景中，在电池142处于放电状态下，每个待显示电量值大于或等于电量计143上电后采集的剩余电量，且每个待显示电量值小于电量计143下电前采集的剩余电量；显示的各个待显示电量值依次降低。例如，在电池142处于充电状态下，电量计143上电后采集的电池142的剩余电量为60%，而电量计143下电前采集的电池142的剩余电量为65%，因此，处理器110可生成多个待显示电量值，其分别为64%、63%、62%、61%以及60%。以预设时间间隔为1s为例，处理器110每间隔1s将一个待显示电量值上报至上层软件，使得电子设备100在用户界面每间隔1s显示上报的一个待显示电量值，即用户界面依次显示的各个待显示电量值分别为64%、63%、62%、61%以及60%。在一种可选的实施方式中，第二预设条件包括：在电池142处于充电状态下，第二电量变化量大于第三电量跳变阈值，第三电量跳变阈值大于或等于0；或者，在电池142处于放电状态下，第二电量变化量的绝对值大于第四电量跳变阈值，且电量计143上电后采集的剩余电量小于电量计143下电前采集的剩余电量，第四电量跳变阈值大于或等于0。其中，第二电量变化量指的是电量计143上电后采集的电池142的剩余电量，与电量计143下电前采集的电池142的剩余电量之间的电量差，即第二电量变化量等于电量计143上电后采集的电池142的剩余电量，减去电量计143下电前采集的电池142的剩余电量。也就是说，在电池142处于充电状态下，当电量计143上电后采集的电池142的剩余电量，与电量计143下电前采集的电池142的剩余电量之间的第二电量变化量大于第三电量跳变阈值时，确定第二电量变化量满足第二预设条件。而当电量计143上电后采集的电池142的剩余电量，与电量计143下电前采集的电池142的剩余电量之间的第二电量变化量小于或等于第三电量跳变阈值时，确定第二电量变化量不满足第二预设条件。以第三电量跳变阈值等于0为例，当电量计143上电后采集的电池142的剩余电量，与电量计143下电前采集的电池142的剩余电量之间的第二电量变化量大于0时，即电量计143上电后采集的电池142的剩余电量大于电量计143下电前采集的电池142的剩余电量，确定第二电量变化量满足第二预设条件，则处理器110需要对电子设备100上显示的电池142的电量值进行平滑校准。而当电量计143上电后采集的电池142的剩余电量等于电量计143下电前采集的电池142的剩余电量时，处理器110无需进行平滑校准，至此，本次电量计143的异常状态检测流程以及复位流程结束，等待执行下一次的异常状态检测流程以及复位流程等。在某些场景中，在电池142处于充电状态下，也有可能存在电量计143上电后采集的电池142的剩余电量，小于电量计143下电前采集的电池142的剩余电量的情况，这种情况下，电子设备100上显示的电池142的剩余电量保持不变，等待处理器110再次从电量计143的SOC寄存器中读取到的电池142的剩余电量，等于处理器110从RAM中读取到的电池142的剩余电量时，再执行下一次的异常状态检测流程以及复位流程等。相应的，在电池142处于放电状态下，当电量计143上电后采集的电池142的剩余电量，与电量计143下电前采集的电池142的剩余电量之间的第二电量变化量的绝对值大于第四电量跳变阈值，且电量计143上电后采集的剩余电量小于电量计143下电前采集的剩余电量时，确定第二电量变化量满足第二预设条件时。否则，确定第二电量变化量不满足第二预设条件。以第四电量跳变阈值等于0为例，当电量计143上电后采集的剩余电量小于电量计143下电前采集的剩余电量时，确定第二电量变化量满足第二预设条件，则处理器110需要对电子设备100上显示的电池142的电量值进行平滑校准。而当电量计143上电后采集的电池142的剩余电量等于电量计143下电前采集的电池142的剩余电量时，处理器110无需进行平滑校准，至此，本次电量计143的异常状态检测流程以及复位流程结束，等待执行下一次的异常状态检测流程以及复位流程等。在某些场景中，在电池142处于放电状态下，也有可能存在电量计143上电后采集的电池142的剩余电量，大于电量计143下电前采集的电池142的剩余电量的情况，这种情况下，电子设备100上显示的电池142的剩余电量保持不变，等待处理器110再次从电量计143的SOC寄存器中读取到的电池142的剩余电量，等于处理器110从RAM中读取到的电池142的剩余电量时，再执行下一次的异常状态检测流程以及复位流程等。需要说明的是，上述的第三电量跳变阈值和第四电量跳变阈值也可以不局限为0，第三电量跳变阈值和第四电量跳变阈值可根据实际情况进行设定，如第三电量跳变阈值和第四电量跳变阈值也可以均为0.1%；并且，第三电量跳变阈值和第四电量跳变阈值可以相等，也可以不相等，本申请实施例对此不作限定。综上，本申请实施例可以对电量计143的异常状态进行自动探测，以及在电量计143处于异常状态时，通过开关电路144对出现异常状态的电量计143进行复位，以及在电量计143复位后对用户界面显示的电量值的平滑校准。因此，本申请实施例可以通过处理器110和开关电路144实现对电量计143的异常状态进行恢复，且有效改善了电子设备100上显示的电池142的电量值的跳变，从而减少了不必要的报障和维修动作。示例性的，图8为本申请实施例提供的电子设备100的软件系统结构示意图。电子设备100的软件系统可以采用分层架构，事件驱动架构，微核架构，微服务架构，或云架构等。本申请实施例以分层架构的Android系统为例，示例性说明电子设备100的软件结构。分层架构将软件分成若干个层，每一层都有清晰的角色和分工。层与层之间通过软件接口通信。在一些实施例中，将电子设备100分为四层，从上至下分别为应用层，应用程序框架层，内核层以及硬件层。应用层可以包括一系列应用程序包。如图8所示，应用程序包可以包括电话、邮箱、日历、相机等应用程序。应用程序框架层为应用层的应用程序提供应用编程接口和编程框架。应用程序框架层包括一些预先定义的函数。如图8所示，应用程序框架层可以包括输入系统、通知管理器、资源管理器、视图系统以及电量管理服务等。输入系统用于管理输入设备的程序。例如，输入系统可以确定鼠标点击操作、键盘输入操作和触摸滑动等输入操作。通知管理器使应用程序可以在状态栏中显示通知信息，可以用于传达告知类型的消息，可以短暂停留后自动消失，无需用户交互。比如通知管理器被用于告知下载完成，消息提醒等。通知管理器还可以是以图表或者滚动条文本形式出现在系统顶部状态栏的通知，例如后台运行的应用程序的通知，还可以是以对话窗口形式出现在屏幕上的通知。例如在状态栏提示文本信息，发出提示音，电子设备振动，指示灯闪烁等。资源管理器为应用程序提供各种资源，比如本地化字符串，图标，图片，布局文件，视频文件等等。视图系统包括可视控件，例如显示文字的控件，显示图片的控件等。视图系统可用于构建应用程序。显示界面可以由一个或多个视图组成的。例如，包括短信通知图标的显示界面，可以包括显示文字的视图以及显示图片的视图。电量管理服务用于接收CPU驱动上报的待显示电量值，并将待显示电量值进行广播，应用层可扫描得到该待显示电量值。应用层根据扫描得到的待显示电量值，将用户界面显示的电量值更新为该待显示电量值。内核层是硬件和软件之间的层，用于驱动硬件工作。内核层至少包含显示驱动、蓝牙驱动、无线保真驱动、相机驱动、传感器驱动以及CPU驱动等。如图8所示，硬件层包括：显示屏、蓝牙、WIFI、相机、传感器、电池、电量计、CPU等硬件设备。可以理解的是，硬件层中的一个硬件设备可以与上述内核层中的一个硬件驱动相对应。示例性的，上述内核层中的CPU驱动和硬件层中的CPU对应，内核层中的CPU驱动可以驱动硬件层中的CPU，执行对电量计143的异常状态的检测操作，以及对用户界面显示的电量值进行平滑校准等操作。可以理解的是，图8所示的电子设备100的软件架构中，处理器110是以CPU为例进行说明的，本申请实施例中的处理器110还可以是除CPU以外的其他处理器。本申请实施例中，可以通过软件以及硬件的组合来实现，电量计复位方法所涉及的各个步骤。具体的，处理器驱动可通过驱动处理器110执行以下操作：检测电量计143是否处于异常状态，以及在检测到143处于异常状态的情况下，向开关电路144发送复位控制信号，以对电量计143进行复位操作，以及在电量计143重新上电后成生成多个平滑校准后的待显示电量值。处理器驱动在计算得到多个待显示电量值之后，处理器驱动可以将待显示电量值上报给应用程序框架层中的电量管理服务，电量管理服务将待显示电量值进行广播，应用层可扫描得到该待显示电量值。应用层根据扫描得到的待显示电量值，将用户界面显示的电量值更新为该待显示电量值。基于图3所示的电子设备100的结构示意图，下面描述本申请实施例提供的电量计复位方法。图9为本申请提供的一种电量计复位方法的流程图，该方法可以应用于上述的电子设备100中，该方法具体可以包括如下步骤：步骤901，处理器读取dev_id寄存器中存储的电量计的型号信息。步骤902，处理器确定型号信息是否读取正确。在本申请实施例中，处理器110可通过I2C接口读取电量计143中的dev_id寄存器存储的电量计143的型号信息，并确定电量计143的型号信息是否读取正确。当电量计143的型号信息读取错误时，处理器110处理器确定电量计143处于异常状态，则执行下面的步骤905；当电量计143的型号信息读取正确时，则执行下面的步骤903。步骤903，当型号信息读取正确时，处理器继续读取FCC寄存器中存储的电池的满充容量，以及SOC寄存器中存储的电池的剩余电量。步骤904，处理器确定是否同时符合以下两个条件：本次读取的满充容量与上次读取的满充容量一致，以及本次读取的剩余电量与上次读取的剩余电量之间的第一电量变化量不满足第一预设条件。处理器110可以将本次从FCC寄存器中读取的电池142的满充容量，与上次从FCC寄存器中读取的电池142的满充容量进行对比，以及将本次从SOC寄存器中读取的电池142的剩余电量，与上次从SOC寄存器中读取的电池142的剩余电量进行对比。当本次读取的电池142的满充容量与上次读取的电池142的满充容量不一致，和/或，本次读取的电池142的剩余电量与上次读取的电池142的剩余电量之间的第一电量变化量满足第一预设条件时，说明电量计143内部的寄存器发生错乱或者电量跳变，即确定电量计143处于异常状态，则执行下面的步骤905。而当本次读取的电池142的满充容量与上次读取的电池142的满充容量一致，且本次读取的电池142的剩余电量与上次读取的电池142的剩余电量之间的第一电量变化量不满足第一预设条件时，说明电量计143处于正常状态，则本次的检测流程结束，等待执行下一次的检测流程。示例性的，处理器110可以每间隔预设检测周期，检测一次电量计143是否处于异常状态。因此，当步骤904判断出本次读取的电池142的满充容量与上次读取的电池142的满充容量一致，且本次读取的电池142的剩余电量与上次读取的电池142的剩余电量之间的第一电量变化量不满足第一预设条件时，处理器110可间隔预设检测周期，再次执行步骤901。其中，第一预设条件包括：在电池142处于充电状态下，第一电量变化量大于或等于第一电量跳变阈值，第一电量跳变阈值大于0；或者，在电池142处于放电状态下，第一电量变化量的绝对值大于或等于第二电量跳变阈值，第二电量跳变阈值大于0。因此，按照上述的步骤901至步骤904，处理器110可检测出电量计143是否处于异常状态。步骤905，处理器向开关电路发送复位控制信号，以通过开关电路对电量计进行复位。其中，复位控制信号包括第一控制信号以及间隔预设时长后的第二控制信号。具体的，处理器110在检测到电量计143处于异常状态时，处理器110先向开关电路144发送第一控制信号，开关电路144在第一控制信号的作用下，控制电池142与电量计143之间的通路断开，使得电池142不再对电量计143进行供电，即实现对电量计143进行下电。处理器110在发送第一控制信号之后再间隔预设时长，处理器110会再次向开关电路144发送第二控制信号，开关电路144在第二控制信号的作用下，重新控制电池142与电量计143之间的通路导通，使得电池142再次对电量计143进行供电，即实现对电量计143进行重新上电。因此，处理器110通过控制开关电路144，对电量计143进行下电后再次进行重新上电，以实现对电量计143的复位操作。步骤906，电量计在重新上电后，采集电池的剩余电量。步骤907，处理器确定电量计上电后采集的剩余电量，与电量计下电前采集的剩余电量之间的第二电量变化量是否满足第二预设条件。电量计143在重新上电后可以采集电池142的剩余电量，并将上电后采集到的剩余电量存储到电量计143的SOC寄存器中。处理器110可以读取SOC寄存器中存储的电量计143上电后采集的电池142的剩余电量，并且，处理器110还可以读取RAM保存的电量计143下电前采集的电池142的剩余电量。处理器110将电量计143上电后采集的电池142的剩余电量，与电量计143下电前采集的电池142的剩余电量进行对比。当电量计143上电后采集的剩余电量与电量计143下电前采集的剩余电量满足第二预设条件时，执行下面的步骤908；而当电量计143上电后采集的剩余电量与电量计143下电前采集的剩余电量不满足第二预设条件时，处理器110无需对用户界面显示的电量值进行平滑校准，本次电量计143的异常状态检测流程以及复位流程结束，等待执行下一次的异常状态检测流程以及复位流程等。示例性的，处理器110可以每间隔预设检测周期，检测一次电量计143是否处于异常状态。因此，当步骤907判断出电量计143上电后采集的剩余电量与电量计143下电前采集的剩余电量不满足第二预设条件时，处理器110可间隔预设检测周期，再次执行步骤901。其中，第二预设条件包括：在电池142处于充电状态下，第二电量变化量大于第三电量跳变阈值，第三电量跳变阈值大于或等于0；或者，在电池142处于放电状态下，第二电量变化量的绝对值大于第四电量跳变阈值，且电量计143上电后采集的剩余电量小于电量计143下电前采集的剩余电量，第四电量跳变阈值大于或等于0。步骤908，处理器根据电量计上电后采集的剩余电量以及电量计下电前采集的剩余电量，生成多个待显示电量值。当电量计143上电后采集的电池142的剩余电量，与电量计143下电前采集的电池142的剩余电量之间的第二电量变化量满足第二预设条件时，处理器110可以对电子设备100上准备显示的电池142的电量值进行平滑校准，即处理器110可根据电量计143上电后采集的电池142的剩余电量，以及电量计143下电前采集的电池142的剩余电量，生成多个待显示电量值。处理器110在通过平滑校准生成多个待显示电量值之后，处理器110可以以预设时间间隔依次将各个待显示电量值上报至上层软件。处理器110将待显示电量值上报至上层软件的过程，可参照图8对应的描述中，将待显示电量值上报给电量管理服务，再通过电量管理服务将待显示电量值进行广播，应用层可扫描得到该待显示电量值的过程。因此，按照上述方式，可使得电子设备100在相应的用户界面以预设时间间隔依次显示每个待显示电量值，则用户可以在用户界面看到显示的待显示电量值。其中，在电池142处于充电状态下，每个待显示电量值小于或等于电量计143上电后采集的剩余电量，且每个待显示电量值大于电量计143下电前采集的剩余电量；显示的各个待显示电量值依次升高。在电池142处于放电状态下，每个待显示电量值大于或等于电量计143上电后采集的剩余电量，且每个待显示电量值小于电量计143下电前采集的剩余电量；显示的各个待显示电量值依次降低。示例性的，处理器110可以每间隔预设检测周期，检测一次电量计143是否处于异常状态。因此，当步骤908生成多个待显示电量值之后，处理器110可间隔预设检测周期，再次执行步骤901。因此，本申请实施例可以对电量计143的异常状态进行自动探测，以及在电量计143处于异常状态时，通过开关电路144对出现异常状态的电量计143进行复位，以及在电量计143复位后对用户界面显示的电量值的平滑校准。因此，本申请实施例可以通过处理器110和开关电路144实现对电量计143的异常状态进行恢复，且有效改善了电子设备100上显示的电池142的待显示电量值的跳变，从而减少了不必要的报障和维修动作。本申请实施例还提供一种计算机可读存储介质，其存储有计算机指令，当计算机指令在计算机上运行时，使得计算机指令执行上述的电量计复位方法。上述实施例中描述的方法可以全部或部分地通过软件、硬件、固件或者其任意组合来实现。如果在软件中实现，则功能可以作为一个或多个指令或代码存储在计算机可读介质上或者在计算机可读介质上传输。计算机可读介质可以包括计算机存储介质和通信介质，还可以包括任何可以将计算机程序从一个地方传送到另一个地方的介质。存储介质可以是可由计算机访问的任何目标介质。一种可能的实现方式中，计算机可读介质可以包括RAM，ROM，只读光盘或其它光盘存储器，磁盘存储器或其它磁存储设备，或目标于承载的任何其它介质或以指令或数据结构的形式存储所需的程序代码，并且可由计算机访问。而且，任何连接被适当地称为计算机可读介质。例如，如果使用同轴电缆，光纤电缆，双绞线，数字用户线或无线技术从网站，服务器或其它远程源传输软件，则同轴电缆，光纤电缆，双绞线，DSL或诸如红外，无线电和微波之类的无线技术包括在介质的定义中。如本文所使用的磁盘和光盘包括光盘，激光盘，光盘，数字通用光盘，软盘和蓝光盘，其中磁盘通常以磁性方式再现数据，而光盘利用激光光学地再现数据。上述的组合也应包括在计算机可读介质的范围内。本申请实施例是参照根据本申请实施例的方法、设备、和计算机程序产品的流程图和／或方框图来描述的。应理解可由计算机程序指令实现流程图和／或方框图中的每一流程和／或方框、以及流程图和／或方框图中的流程和／或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理单元以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理单元执行的指令产生用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的装置。以上的具体实施方式，对本申请的目的、技术方案和有益效果进行了进一步详细说明，所应理解的是，以上仅为本申请的具体实施方式而已，并不用于限定本申请的保护范围，凡在本申请的技术方案的基础之上，所做的任何修改、等同替换、改进等，均应包括在本申请的保护范围之内。
