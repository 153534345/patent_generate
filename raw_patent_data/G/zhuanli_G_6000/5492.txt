标题title
一种准直光三维空间自动调向装置及方法
摘要abst
本发明涉及一种准直光三维空间自动调向装置及方法，设置三维空间测定模型；随机取一组待测三维空间点，计算每个三维空间点和下一个待测三维空间点的差异值，构建差异模型；检验，符合则基于差异模型校正准直光，完成自动调向，否则增加待测三维空间点个数，重复构建差异模型；装置包括准直光输出端及配合的自转平台、翻转台和平移台，自动调向后输出准直光。本发明通过准直光三维空间自动调向方法构建模型，获取在一定的出射距离上不同转向方案的直径损耗和光强度损耗的差异模型，实际应用中通过获取当前转向方案，综合直径损耗和光强度损耗进行调优计算，获得最佳输出直径和光强度，进而达到准直光输出的一致性，降低光损耗而导致的输出不稳定。
权利要求书clms
1.一种准直光三维空间自动调向方法，其特征在于：所述方法包括以下步骤：步骤1：初始化当前准直光，获取初始数据；步骤2：基于当前准直光，设置三维空间测定模型；步骤3：随机获取一组待测三维空间点；步骤4：取第一个待测三维空间点，构建平面，并获取出射点到当前待测三维空间点的光线信息；步骤5：获取下一个待测三维空间点，基于当前三维空间点和下一个待测三维空间点构建新的平面，获取新的光线信息并计算差异值E；步骤6：若还存在待测三维空间点，则返回步骤5，否则进行下一步；步骤7：保存当前组待测三维空间点的所有差异值，构建差异模型；步骤8：取新的一组待测三维空间点进行检验，以差异模型对准直光进行处理，若光线信息符合差异模型，则基于差异模型对准直光进行校正，完成自动调向，否则增加待测三维空间点的个数，重复步骤4。2.根据权利要求1所述的一种准直光三维空间自动调向方法，其特征在于：所述步骤1中，初始化准直光包括将准直光设置为N束分光的集合，对输出的分光进行校直。3.根据权利要求2所述的一种准直光三维空间自动调向方法，其特征在于：所述初始数据为初始化后输出的M束分光、对应的光斑直径L0及光强度Q0；M＜N。4.根据权利要求1所述的一种准直光三维空间自动调向方法，其特征在于：所述步骤2中，三维空间测定模型为球体，以准直光的出射点为球心；所有的待测三维空间点为球体表面的点。5.根据权利要求3所述的一种准直光三维空间自动调向方法，其特征在于：所述步骤4中，将所有的待测三维空间点进行排序，构建准直光调向方案，所述方案为相邻两点间的调向路径；取第一个待测三维空间点，取相切于此点的平面，获取出射点到当前待测三维空间点的光线信息，并与初始数据进行比较，获得光斑直径L1和光强度Q1，记录当前准直光输出的直径损耗δL1和光强度损耗δQ1。6.根据权利要求5所述的一种准直光三维空间自动调向方法，其特征在于：所述步骤5中包括以下步骤：步骤5.1：获取下一个待测三维空间点，基于当前三维空间点和下一个待测三维空间点构建新的平面，此平面相切于下一个待测三维空间点；设置光斑直径目标值Ld和光强度目标值Qd；步骤5.2：获取下一个待测三维空间点处最新的光斑直径Li与光强度Qi，计算下一个待测三维空间点处准直光输出的直径损耗δLi和光强度损耗δQi，i为2开始的正整数；步骤5.3：获取当前的光路与基准光路的夹角。7.根据权利要求6所述的一种准直光三维空间自动调向方法，其特征在于：所述步骤7中，基于步骤5.3的夹角，分别对直径损耗和光强度损耗建立差异模型E1和E2，基于差异模型匹配光束的增加和减少，并对应光束的数量变化调整光强度。8.根据权利要求7所述的一种准直光三维空间自动调向方法，其特征在于：所述步骤7中，设置二次调优函数，令J=LTGL+QTPQ，G和P为预设的调整矩阵；优化J，求得L和Q的最优值。9.根据权利要求1所述的一种准直光三维空间自动调向方法，其特征在于：所有组所述待测三维空间点构建的准直光向量拟合为球体。10.一种准直光三维空间自动调向装置，其特征在于：所述装置包括准直光输出端，配合所述准直光输出端设有六轴转动机构；所述装置采用权利要求1~9之一所述的准直光三维空间自动调向方法实现自动调向后的准直光输出。
说明书desc
技术领域本发明涉及测量；测试的技术领域，特别涉及一种准直光三维空间自动调向装置及方法。背景技术准直光是在小光束发散角之后没有显着改变的光束，一般来说为激光束，其特点是在某种传播距离之后不会发生光束半径的较大变化，这使得其可以被更便利地应用于立体产品的处理，如切割、焊接、熔覆。事实上，在准直光输出的过程中本身是存在一定的光能损耗及由于出射不稳定而造成的出光不均等问题的，特别将体现在准直光调向过程中，为了对抗这些光能损耗，需要进行一系列的输出调整。现有技术中，将大量的研究工作放在准直光的基座上，通过增加基座的精密度和稳定度来实现准直光出射过程中的稳定性、减少因为光路抖动或转向而导致的光能损耗、出光不均，但事实上，即使无限提升机械的精密度，其本身都存在或将出现机械磨损、轻微卡顿等问题，基于此，除了对准直光的基座进行机械精密度提升外，更应当考虑从光路本身对准直光的输出进行校正。发明内容本发明解决了现有技术中存在的问题，提供了一种准直光三维空间自动调向装置及方法。本发明所采用的技术方案是，一种准直光三维空间自动调向方法，所述方法包括以下步骤：步骤1：初始化当前准直光，获取初始数据；步骤2：基于当前准直光，设置三维空间测定模型；步骤3：随机获取一组待测三维空间点；步骤4：取第一个待测三维空间点，构建平面，并获取出射点到当前待测三维空间点的光线信息；步骤5：获取下一个待测三维空间点，基于当前三维空间点和下一个待测三维空间点构建新的平面，获取新的光线信息并计算差异值E；步骤6：若还存在待测三维空间点，则返回步骤5，否则进行下一步；步骤7：保存当前组待测三维空间点的所有差异值，构建差异模型；步骤8：取新的一组待测三维空间点进行检验，以差异模型对准直光进行处理，若光线信息符合差异模型，则基于差异模型对准直光进行校正，完成自动调向，否则增加待测三维空间点的个数，重复步骤4。优选地，所述步骤1中，初始化准直光包括将准直光设置为N束分光的集合，对输出的分光进行校直。优选地，所述初始数据为初始化后输出的M束分光、对应的光斑直径L0及光强度Q0；M＜N。优选地，所述步骤2中，三维空间测定模型为球体，以准直光的出射点为球心；所有的待测三维空间点为球体表面的点。优选地，所述步骤4中，将所有的待测三维空间点进行排序，构建准直光调向方案，所述方案为相邻两点间的调向路径；取第一个待测三维空间点，取相切于此点的平面，获取出射点到当前待测三维空间点的光线信息，并与初始数据进行比较，获得光斑直径L1和光强度Q1，记录当前准直光输出的直径损耗δL1和光强度损耗δQ1。优选地，所述步骤5中包括以下步骤：步骤5.1：获取下一个待测三维空间点，基于当前三维空间点和下一个待测三维空间点构建新的平面，此平面相切于下一个待测三维空间点；设置光斑直径目标值Ld和光强度目标值Qd；步骤5.2：获取下一个待测三维空间点处最新的光斑直径Li与光强度Qi，计算下一个待测三维空间点处准直光输出的直径损耗δLi和光强度损耗δQi，i为2开始的正整数；步骤5.3：获取当前的光路与基准光路的夹角。优选地，所述步骤7中，基于步骤5.3的夹角，分别对直径损耗和光强度损耗建立差异模型E1和E2，基于差异模型匹配光束的增加和减少，并对应光束的数量变化调整光强度。优选地，所述步骤7中，设置二次调优函数，令J=LTGL+QTPQ，G和P为预设的调整矩阵；优化J，求得L和Q的最优值。优选地，所有组所述待测三维空间点构建的准直光向量拟合为球体。一种准直光三维空间自动调向装置，所述装置包括准直光输出端，配合所述准直光输出端设有六轴转动机构；所述装置采用所述的准直光三维空间自动调向方法实现自动调向后的准直光输出。本发明涉及一种准直光三维空间自动调向装置及方法，初始化当前准直光后获取初始数据，设置三维空间测定模型；随机获取一组待测三维空间点，取第一个待测三维空间点，构建平面，并获取出射点到当前待测三维空间点的光线信息，获取下一个待测三维空间点，基于当前三维空间点和下一个待测三维空间点构建新的平面，获取新的光线信息并计算差异值E，重复直至处理完所有待测三维空间点，基于所有差异值构建差异模型；取新的一组待测三维空间点进行检验，以差异模型对准直光进行处理，光线信息符合差异模型，则基于差异模型对准直光进行校正，完成自动调向，否则增加待测三维空间点的个数，重复构建差异模型；装置包括准直光输出端，配合准直光输出端设有自转平台、翻转台和平移台；装置采用所述方法实现自动调向后的准直光输出。本发明的有益效果在于，通过准直光三维空间自动调向方法构建模型，获取在一定的出射距离上不同转向方案的直径损耗和光强度损耗的差异模型，使得在实际应用中，通过获取当前转向方案，综合直径损耗和光强度损耗进行调优计算，获得最佳输出直径和光强度，进而达到准直光输出的一致性，降低光损耗而导致的输出不稳定。附图说明图1为本发明的方法流程图；图2为本发明的三维空间测定模型示意图，其中心实心点为准直光出射端，A和B分别为待测三维空间点，箭头为准直光出射方向；图3为本发明中装置的示意图，其端部为准直光输出端。具体实施方式下面结合实施例对本发明做进一步的详细描述，但本发明的保护范围并不限于此。如图1所示，本发明涉及一种准直光三维空间自动调向方法，在一定三维空间的前提下，获取不同的准直光调向数据并匹配对应的准直光数据，进而对在一定三维空间中所有的调向动作进行光强度调节，使得输出的准直光直径损耗和光强度损耗最小。实施例1所述方法包括以下步骤：步骤1：初始化当前准直光，获取初始数据；步骤2：基于当前准直光，设置三维空间测定模型；步骤3：随机获取一组待测三维空间点；步骤4：取第一个待测三维空间点，构建平面，并获取出射点到当前待测三维空间点的光线信息；步骤5：获取下一个待测三维空间点，基于当前三维空间点和下一个待测三维空间点构建新的平面，获取新的光线信息并计算差异值E；步骤6：若还存在待测三维空间点，则返回步骤5，否则进行下一步；步骤7：保存当前组待测三维空间点的所有差异值，构建差异模型；步骤8：取新的一组待测三维空间点进行检验，以差异模型对准直光进行处理，若光线信息符合差异模型，则基于差异模型对准直光进行校正，完成自动调向，否则增加待测三维空间点的个数，重复步骤4。本实施例中，初始化当前准直光，即出射光，获取初始数据，此初始数据与准直光相关，一般关联到光斑直径和光强度，基于此设置三维空间测定模型，即限定工作半径，在一定范围内的校准才是有效的。本实施例中，随机获取的一组待测三维空间点用于构建校准模型，基于此，应当在条件允许的前提下选择尽可能多的待测三维空间点，其应当覆盖多个光路向量，在此过程中可以对待测三维空间点进行清洗，删除重复的光路向量对应的其中一个待测三维空间点。本实施例中，通过逐个获取待测三维空间点并构建平面，可以获取上一个点，包括出射点和测试用的三维空间点，到当前待测三维空间点的光线信息，并通过光线信息逐次计算差异值E，基于所有差异值构建差异模型，此差异模型事实上包含每个光路向量所对应的直径损耗和光强度损耗；在此基础上，取新的一组待测三维空间点进行检验，以差异模型对准直光进行处理，基于每个光路向量检查直径损耗和光强度损耗，若符合则基于差异模型对准直光进行校正，即可以完成自动调向，否则增加待测三维空间点的个数，重复步骤校准。实施例2在实施例1的基础上，所述步骤1中，初始化准直光包括将准直光设置为N束分光的集合，对输出的分光进行校直。所述初始数据为初始化后输出的M束分光、对应的光斑直径L0及光强度Q0；M＜N。本实施例中，为了更准确地对准直光的调向进行校准，将准直光设置为N束分光的集合，N的数量可以基于实际的需求进行调整；而在初始输出状态下，仅取用其中的M束分光，确保其后在校正的过程中可以对光束进行增、减。实施例3如图2所示，在实施例1的基础上，所述步骤2中，三维空间测定模型为球体，以准直光的出射点为球心；所有的待测三维空间点为球体表面的点。实施例4如图2所示，在实施例1的基础上，所述步骤4中，将所有的待测三维空间点进行排序，构建准直光调向方案，所述方案为相邻两点间的调向路径；取第一个待测三维空间点，取相切于此点的平面，获取出射点到当前待测三维空间点的光线信息，并与初始数据进行比较，获得光斑直径L1和光强度Q1，记录当前准直光输出的直径损耗δL1和光强度损耗δQ1。所述步骤5中包括以下步骤：步骤5.1：获取下一个待测三维空间点，基于当前三维空间点和下一个待测三维空间点构建新的平面，此平面相切于下一个待测三维空间点；设置光斑直径目标值Ld和光强度目标值Qd；步骤5.2：获取下一个待测三维空间点处最新的光斑直径Li与光强度Qi，计算下一个待测三维空间点处准直光输出的直径损耗δLi和光强度损耗δQi，i为2开始的正整数；步骤5.3：获取当前的光路与基准光路的夹角。所述步骤7中，基于步骤5.3的夹角，分别对直径损耗和光强度损耗建立差异模型E1和E2，基于差异模型匹配光束的增加和减少，并对应光束的数量变化调整光强度。所述步骤7中，设置二次调优函数，令J=LTGL+QTPQ，G和P为预设的调整矩阵；优化J，求得L和Q的最优值。本实施例中，将所有的待测三维空间点进行排序，构建准直光调向方案，所述方案为相邻两点间的调向路径；在此过程中，事实上被列入校准的是光路向量，举例来说，取50个待测三维空间点并按序排列，从准直光的出射点开始，后续的50个光路向量应当是不同的，如果有任一光路向量与在先的光路向量相同，则可以删除当前光路向量的其中一个待测三维空间点。本实施例中，对第一个待测三维空间点，取相切于此点的平面，可以得到自出射点到当前待测三维空间点的光线信息，获得光斑直径L1和光强度Q1，并与初始数据，即光斑直径L0及光强度Q0进行比较，记录当前准直光输出的直径损耗δL1和光强度损耗δQ1，δL1= L1-L0，δQ1= Q1- Q0。本实施例中，获取下一个待测三维空间点，基于当前三维空间点和下一个待测三维空间点构建新的平面，平面相切于下一个待测三维空间点，此时事实上对应了新的光路向量；首先预设光斑直径目标值Ld和光强度目标值Qd，获取下一个待测三维空间点处最新的光斑直径Li与光强度Qi后，计算下一个待测三维空间点处准直光输出的直径损耗和光强度损耗，方法同上；获取当前的光路与基准光路的夹角，即前后两次光路向量的夹角，基于夹角可以分别对直径损耗和光强度损耗建立差异模型E1和E2，基于差异模型匹配光束的增加和减少，并对应光束的数量变化调整光强度；也就是说，当从第一个光路向量向第二个光路向量调节的过程中，通过差异模型E1和E2获取实际可能产生的直径损耗和光强度损耗，基于此进行直径和光强度的增减校正，使得准直光始终保持在较稳定的水平；其中，直径的校正可以通过增减光束来实现，而光强度的校正是在直径校正的基础上进一步执行的。本实施例中，可以进一步设置二次调优函数，令J=LTGL+QTPQ，G和P为预设的调整矩阵，具体来说，以为误差权重矩阵，其中k为三维空间点个数，为控制量权重矩阵，M为控制量的个数，优化J，求得L和Q的最优值，此最优值应当选择为确保直径L的调节，同时Q值的调节最少。实施例5在实施例1的基础上，所有组所述待测三维空间点构建的准直光向量拟合为球体。本实施例中，当数据截取的足够多时，最终所有组所述待测三维空间点构建的准直光向量可以拟合为球体。如图3所示，本发明还涉及一种准直光三维空间自动调向装置，所述装置包括准直光输出端，配合所述准直光输出端设有六轴转动机构；所述装置采用所述的准直光三维空间自动调向方法实现自动调向后的准直光输出。本实施例中，通过方法的校准，配合六轴转动机构实现准直光三维空间自动调向，具体来说，以六轴转动机构可以完成准直光出射绕X、Y、Z轴的转动。本领域内的技术人员应明白，本发明的实施例可提供为方法、系统、或计算机程序产品。因此，本发明可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本发明是参照根据本发明实施例的方法、设备、和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。尽管已描述了本发明的优选实施例，但本领域内的技术人员一旦得知了基本创造性概念，则可对这些实施例作出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本发明范围的所有变更和修改。显然，本领域的技术人员可以对本发明进行各种改动和变型而不脱离本发明的精神和范围。这样，倘若本发明的这些修改和变型属于本发明权利要求及其等同技术的范围之内，则本发明也意图包含这些改动和变型在内。
