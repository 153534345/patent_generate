标题title
基于电化学老化机理和数据驱动的储能锂电池SOH估算方法
摘要abst
本发明提供一种基于电化学老化机理和数据驱动的储能锂电池SOH估算方法。方法包括：采集锂电池在老化循环下的运行数据并预处理，获得电压、电流数据；建立单粒子模型并在不同老化循环下采用LDW‑PSO算法辨识正负极固相最大锂离子浓度；建立不同循环的IC、DV曲线，并提取曲线中的特征参数以量化LLI及LAM；将正负极固相最大锂离子浓度、LLI及LAM集合作为输入，电池SOH作为输出，建立BP模型；选择电池的部分循环及全部循环的集合分别作为两个BP模型的输入，实现该电池剩下循环以及同款电池所有循环下的SOH估算。该方法能够实现适用于工程数据的电池SOH估算，便于在全寿命周期下对锂电池进行健康管理。
权利要求书clms
1.一种基于电化学老化机理和数据驱动的储能锂电池SOH估算方法，其特征在于，所述方法包括：S1：采集锂电池在老化循环下的运行数据，对所述运行数据进行预处理，获得满足后续计算需求的电压、电流数据；S2：对电池本体建立单粒子模型，并在不同老化循环下采用线性递减权重粒子群优化算法辨识正负极固相最大锂离子浓度；S3：对不同循环次数的锂电池建立对应的IC曲线和DV曲线，并分别提取所述IC曲线和所述DV曲线中的特征参数，以量化活性锂离子损失以及活性材料损失；S4：将所述正负极固相最大锂离子浓度、所述量化活性锂离子损失以及所述活性材料损失的集合作为输入，电池SOH作为输出，建立反向传播神经网络模型；S5：选择电池的部分循环及全部循环的所述正负极固相最大锂离子浓度、所述量化活性锂离子损失以及所述活性材料损失集合分别作为两个所述反向传播神经网络模型的输入，分别实现电池剩下循环的SOH估算和同款电池所有循环下的SOH估算。2.根据权利要求1所述的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法，其特征在于，所述S1包括：对不同循环次数的锂电池，以预设的采样频率获取锂电池在预设工况中的容量Q和电压V。3.根据权利要求1所述的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法，其特征在于，所述S2包括：S21：对电池伪二维电化学模型进行简化；S22：完成单粒子模型的建立后，在不同老化循环过程中采用LDW-PSO算法对所述单粒子模型中的正负极固相最大锂离子浓度进行辨识。4.根据权利要求3所述的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法，其特征在于，所述S21所采用的计算公式为：其中，Ut为电池端电压，Ei为开路电势，cs,surf,i为固相表面锂离子浓度，R为普适气体常数，T为实验温度，F为法拉第常数，RSEI,i为欧姆内阻，ji为固相粒子表面锂离子孔壁通量，Ri为粒子半径，εi为材料孔隙率，εf,i为填充物质体积分数，li为极板厚度，A为极板有效面积，I为输入电流，ki为平均电极反应速率常数，cs,max,i为固相最大锂离子浓度，ce为液相锂离子浓度，i代表正极或负极。5.根据权利要求3所述的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法，其特征在于，所述S22中的LDW-PSO算法包括：S221：初始化粒子群的速度和位置；S222：计算每个粒子的适应度；S223：对某个粒子而言，若在此次迭代中该粒子的位置达到了该粒子的历史最优位置，则令该位置为个体最优值，否则不改变个体最优值；S224：对某个粒子而言，若在此次迭代中该粒子的位置达到了粒子群的历史最优位置，则令该位置为群体最优值，否则不改变群体最优值；S225：更新粒子位置和速度；S226：判断是否达到最大迭代次数，若是则停止算法，若否则回到S221。6.根据权利要求3所述的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法，其特征在于，所述S22中的LDW-PSO算法的计算公式为：其中，r1和r2为0到1中的随机数，c1和c2为学习因子，k为迭代次数，kiter为最大迭代次数，pbest为个体最优值，gbest为群体最优值，w为权重因子，wmax为最大权重因子，wmin为最小权重因子。7.根据权利要求1所述的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法，其特征在于，所述S3中的所述特征参数包括IC曲线中左侧峰值处dQ/dV值以及DV曲线中最右侧的容量值。8.根据权利要求7所述的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法，其特征在于，所述S3包括：S31：以容量增量△Q与电压阶跃△V的比值△Q/△V代替容量对电压的微分dQ/dV，以电压阶跃△V与容量增量△Q的比值△V/△Q代替电压对容量的微分dV/dQ；S32：对数据进行平滑和插值优化处理，绘制不同老化循环次数的dQ/dV-V曲线和dV/dQ-Q曲线，分别为IC曲线和DV曲线；S33：分别提取锂电池不同老化状态的IC曲线和DV曲线的特征参数，比较锂电池不同老化循环时的特征参数变化；S34：利用获取得到的特征参数进行不同老化循环下的所述量化活性锂离子损失以及所述活性材料损失的量化。9.根据权利要求8所述的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法，其特征在于，所述S32所采用的计算公式为：其中，是IC曲线中的左侧峰值，是IC曲线中的左侧峰值的初始值，QDV是DV曲线中最右侧的容量值，QDV,1是DV曲线中最右侧容量值的初始值。10.根据权利要求1所述的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法，其特征在于，所述S4包括：S41：设置所述反向传播神经网络模型的结构设计为输入层有4个节点，分别对应所述正负极固相最大锂离子浓度、所述量化活性锂离子损失以及所述活性材料损失的序列，激活函数为双极性Sigmoid函数，隐藏层节点数设置为5，激活函数为线性激活函数，输出层为电池SOH，最大迭代次数为100次，学习速率为0.01，目标误差为10-5，学习规则为Levenberg-Marquardt算法；S42：设置neth＝W1x+b1，其中，neth为输入层的线性项，x为输入层向量W1为对应权重矩阵，size为5×4，b1为对应偏置；S43：设置h＝tansig，其中，h为隐藏层节点向量，tanSig为激活函数；S44：设置neto＝W2h+b2，其中，neto为隐藏层的线性项，h为隐藏层向量，W2为对应权重矩阵，size为1×5，b2为对应偏置；S45：达到模型结束条件时停止训练。
说明书desc
技术领域本发明涉及锂电池技术领域，具体而言，涉及一种基于电化学老化机理和数据驱动的储能锂电池SOH估算方法。背景技术锂电池具备能量密度高、零排放、性价比高、无记忆效应、重量轻和携带方便等突出优点。目前，磷酸铁锂电池被广泛应用在电网储能领域，在实际中准确估算电池SOH是锂电池使用过程中的重点和难度技术，这关系着电池的健康安全、使用效率与产品更迭。现有锂电池SOH的估算方法包括数据驱动的方法、基于物理模型的方法以及基于混合模型的方法。第一种方法具有很强的适应性和适用性，但该方法不仅需要大量实验数据进行复杂训练，而且由于其省略了一些物理建模步骤以及输入常为无物理意义的特征参数，因此算法输出的可解释性差，验证成本较高。第二种方法分为基于等效电路模型的方法和基于电化学模型的方法，前者计算简单但精度较低，后者精度高但计算复杂。现有文献种，第三种方法考虑到了电池的外特性和内部电化学特性，但是理论基础和实践基础较少，计算难度较大。发明内容本发明的目的包括提供了一种基于电化学老化机理和数据驱动的储能锂电池SOH估算方法，其能够实现适用于工程数据的储能锂电池SOH精确估算，便于在老化过程中对锂电池进行合理的健康管理和安全布控。本发明的实施例可以这样实现：本发明提供一种基于电化学老化机理和数据驱动的储能锂电池SOH估算方法，方法包括：S1：采集锂电池在老化循环下的运行数据，对运行数据进行预处理，获得满足后续计算需求的电压、电流数据；S2：对电池本体建立单粒子模型，并在不同老化循环下采用线性递减权重粒子群优化算法辨识正负极固相最大锂离子浓度；S3：对不同循环次数的锂电池建立对应的IC曲线和DV曲线，并分别提取IC曲线和DV曲线中的特征参数，以量化活性锂离子损失以及活性材料损失；S4：将正负极固相最大锂离子浓度、量化活性锂离子损失以及活性材料损失的集合作为输入，电池SOH作为输出，建立反向传播神经网络模型；S5：选择电池的部分循环及全部循环的正负极固相最大锂离子浓度、量化活性锂离子损失以及活性材料损失集合分别作为两个反向传播神经网络模型的输入，分别实现电池剩下循环的SOH估算和同款电池所有循环下的SOH估算。在可选的实施方式中，S1包括：对不同循环次数的锂电池，以预设的采样频率获取锂电池在预设工况中的容量Q和电压V。在可选的实施方式中，S2包括：S21：对电池伪二维电化学模型进行简化；S22：完成单粒子模型的建立后，在不同老化循环过程中采用LDW-PSO算法对单粒子模型中的正负极固相最大锂离子浓度进行辨识。在可选的实施方式中，S21所采用的计算公式为：其中，Ut为电池端电压，Ei为开路电势，cs,surf,i为固相表面锂离子浓度，R为普适气体常数，T为实验温度，F为法拉第常数，RSEI,i为欧姆内阻，ji为固相粒子表面锂离子孔壁通量，Ri为粒子半径，εi为材料孔隙率，εf,i为填充物质体积分数，li为极板厚度，A为极板有效面积，I为输入电流，ki为平均电极反应速率常数，cs,max,i为固相最大锂离子浓度，ce为液相锂离子浓度，i代表正极或负极。在可选的实施方式中，S22中的LDW-PSO算法包括：S221：初始化粒子群的速度和位置；S222：计算每个粒子的适应度；S223：对某个粒子而言，若在此次迭代中该粒子的位置达到了该粒子的历史最优位置，则令该位置为个体最优值，否则不改变个体最优值；S224：对某个粒子而言，若在此次迭代中该粒子的位置达到了粒子群的历史最优位置，则令该位置为群体最优值，否则不改变群体最优值；S225：更新粒子位置和速度；S226：判断是否达到最大迭代次数，若是则停止算法，若否则回到S221。在可选的实施方式中，S22中的LDW-PSO算法的计算公式为：其中，r1和r2为0到1中的随机数，c1和c2为学习因子，k为迭代次数，kiter为最大迭代次数，pbest为个体最优值，gbest为群体最优值，w为权重因子，wmax为最大权重因子，wmin为最小权重因子。在可选的实施方式中，S3中的特征参数包括IC曲线中左侧峰值处dQ/dV值以及DV曲线中最右侧的容量值。在可选的实施方式中，S3包括：S31：以容量增量△Q与电压阶跃△V的比值△Q/△V代替容量对电压的微分dQ/dV，以电压阶跃△V与容量增量△Q的比值△V/△Q代替电压对容量的微分dV/dQ；S32：对数据进行平滑和插值优化处理，绘制不同老化循环次数的dQ/dV-V曲线和dV/dQ-Q曲线，分别为IC曲线和DV曲线；S33：分别提取锂电池不同老化状态的IC曲线和DV曲线的特征参数，比较锂电池不同老化循环时的特征参数变化；S34：利用获取得到的特征参数进行不同老化循环下的量化活性锂离子损失以及活性材料损失的量化。在可选的实施方式中，S32所采用的计算公式为：其中，是IC曲线中的左侧峰值，是IC曲线中的左侧峰值的初始值，QDV是DV曲线中最右侧的容量值，QDV,1是DV曲线中最右侧容量值的初始值。在可选的实施方式中，S4包括：S41：设置反向传播神经网络模型的结构设计为输入层有4个节点，分别对应正负极固相最大锂离子浓度、量化活性锂离子损失以及活性材料损失的序列，激活函数为双极性Sigmoid函数，隐藏层节点数设置为5，激活函数为线性激活函数，输出层为电池SOH，最大迭代次数为100次，学习速率为0.01，目标误差为10-5，学习规则为Levenberg-Marquardt算法；S42：设置neth＝W1x+b1，其中，neth为输入层的线性项，x为输入层向量W1为对应权重矩阵，size为5×4，b1为对应偏置；S43：设置h＝tansig，其中，h为隐藏层节点向量，tanSig为激活函数；S44：设置neto＝W2h+b2，其中，neto为隐藏层的线性项，h为隐藏层向量，W2为对应权重矩阵，size为1×5，b2为对应偏置；S45：达到模型结束条件时停止训练。本发明实施例提供的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法的有益效果包括：在大型储能电站中，随着锂电池系统持续运行，老化循环数据增多，通过常规方法估算电池SOH精度较低，本实施例提供的方法在单粒子模型的基础上采用LDW-PSO算法辨识正负极固相最大锂离子浓度，并建立IC曲线和DV曲线以分别提取曲线中的特征参数来量化LLI和LAM，通过将正负极固相最大锂离子浓度、LLI及LAM作为BP神经网络模型的输入，电池SOH作为输出，最后通过训练好的BP模型估算电池SOH，通过观测电池系统前中后期SOH的不同，分析电池衰减情况以及可能产生的原因，为运行维护提供支撑。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本发明的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1是本发明实施例提供的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法的流程图；图2是电池老化循环工况电流及电压示意图；图3是S22的细节流程图；图4时正负极固相最大锂离子浓度辨识框图；图5是多次循环下IC曲线和DV曲线示意图；图6是基于正负极固相最大锂离子浓度、LLI和LAM的BP神经网络示意图；图7是该实验电池的部分SOH估算结果图及误差图；图8是同款电池的SOH估算结果图及误差图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本发明实施例的组件可以以各种不同的配置来布置和设计。因此，以下对在附图中提供的本发明的实施例的详细描述并非旨在限制要求保护的本发明的范围，而是仅仅表示本发明的选定实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。应注意到：相似的标号和字母在下面的附图中表示类似项，因此，一旦某一项在一个附图中被定义，则在随后的附图中不需要对其进行进一步定义和解释。此外，若出现术语“第一”、“第二”等仅用于区分描述，而不能理解为指示或暗示相对重要性。需要说明的是，在不冲突的情况下，本发明的实施例中的特征可以相互结合。本实施例采用用户侧储能电站，其应用场景为用户侧需求响应，具体选择用户侧储能电站中使用的某个磷酸铁锂电池。IC和DV方法中提到的ΔV为0.1V，LDW-PSO算法中提到的kiter为500，wmax为0.9，wmin为0.4，c1和c2为2，粒子群数量为20。舱内安装空调系统，运行期间设定环境温度为25℃。每循环10次进行一次小倍率放电试验，并记录试验数据及老化数据，一共进行多次循环。请参阅图1，本实施例提供的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法包括以下具体步骤：S1：采集锂电池在老化循环下的运行数据，对运行数据进行预处理，获得满足后续计算需求的电压、电流数据。具体的，在S1中的预处理包括对不同循环次数的锂电池，以预设的采样频率获取锂电池在预设工况过程中的充电容量Q和电压V。预处理所用的方法包括剔除异常值、填补遗漏值、平滑滤波中的一种或多种。其中，剔除异常值所用的方法包括阈值设定法、重复冗余数据删除等；填补遗漏值所用的方法包括回归、固定值填补等；平滑滤波所用方法包括最小二乘滤波、三次样条插值等。请参阅图2，对用户侧储能电站某电池在多次老化循环进行提取，图2展示某一次老化循环时的电压和电流曲线，可见在实际工程应用场景中，放电倍率不稳定且无规律。因此，研究不同激励工况对储能锂电池的老化影响是很有必要的。S2：对电池本体建立单粒子模型，并在不同老化循环下采用线性递减权重粒子群优化算法辨识正负极固相最大锂离子浓度。具体的，S2所对应的细节流程如下：S21：对电池伪二维电化学模型进行简化，即只考虑电池基本工作过程、固相扩散、反应极化以及欧姆极化建立单粒子模型，其中，S21所采用的计算公式为：其中，Ut为电池端电压，Ei为开路电势，cs，surf，i为固相表面锂离子浓度，R为普适气体常数，T为实验温度，F为法拉第常数，RSEI，i为欧姆内阻，ji为固相粒子表面锂离子孔壁通量，Ri为粒子半径，εi为材料孔隙率，εf，i为填充物质体积分数，li为极板厚度，A为极板有效面积，I为输入电流，ki为平均电极反应速率常数，cs，max，i为固相最大锂离子浓度，ce为液相锂离子浓度，i代表正极或负极。S22：完成单粒子模型的建立后，在不同老化循环过程中采用LDW-PSO算法对该模型中的正负极固相最大锂离子浓度进行辨识，其中，S22中所描述辨识方法的主要目的为：使真实电池端电压与单粒子模型端电压的误差达到最小值，S22所描述的LDW-PSO算法的计算公式为：其中，r1和r2为0到1中的随机数，c1和c2为学习因子，k为迭代次数，kiter为最大迭代次数，pbest为个体最优值，gbest为群体最优值，w为权重因子，wmax为最大权重因子，wmin为最小权重因子。请参阅图3，S22所描述的LDW-PSO算法包括：S221：初始化粒子群的速度和位置；S222：计算每个粒子的适应度；S223：对某个粒子而言，若在此次迭代中该粒子的位置达到了该粒子的历史最优位置，则令该位置为个体最优值，否则不改变个体最优值；S224：对某个粒子而言，若在此次迭代中该粒子的位置达到了粒子群的历史最优位置，则令该位置为群体最优值，否则不改变群体最优值；S225：更新粒子位置和速度；S226：判断是否达到最大迭代次数，若是则停止算法，若否则回到S221。S3：对不同循环次数的锂电池建立对应的IC曲线和DV曲线，并分别提取IC曲线和DV曲线中的特征参数，以量化活性锂离子损失以及活性材料损失。具体的，特征参数包括IC曲线中左侧峰值处dQ/dV值以及DV曲线中最右侧的容量值，S3所对应的细节流程如下：S31：以容量增量△Q与电压阶跃△V的比值△Q/△V代替容量对电压的微分dQ/dV，以电压阶跃△V与容量增量△Q的比值△V/△Q代替电压对容量的微分dV/dQ；S32：对数据进行平滑和插值优化处理，绘制不同老化循环次数的dQ/dV-V曲线和dV/dQ-Q曲线，分别为IC曲线和DV曲线，其中，S32所采用的计算公式为：其中，是IC曲线中的左侧峰值，是IC曲线中的左侧峰值的初始值，QDV是DV曲线中最右侧的容量值，QDV，1是DV曲线中最右侧容量值的初始值。S33：分别提取锂电池不同老化状态的IC曲线和DV曲线的特征参数，比较锂电池不同老化循环时的特征参数变化；S34：利用获取得到的特征参数进行不同老化循环下的LLI及LAM量化。S4：将正负极固相最大锂离子浓度、LLI及LAM的集合作为输入，电池SOH作为输出，建立反向传播神经网络模型；具体的，S4所对应的细节流程如下：S41：设置BP神经网络模型的结构设计为输入层有4个节点，分别对应正负极固相最大锂离子浓度、LAM及LLI的序列，激活函数为双极性Sigmoid函数，隐藏层节点数设置为5，激活函数为线性激活函数，输出层为电池SOH，最大迭代次数为100次，学习速率为0.01，目标误差为10-5，学习规则为Levenberg-Marquardt算法；S42：设置neth＝W1x+b1，其中，neth为输入层的线性项，x为输入层向量W1为对应权重矩阵，size为5×4，b1为对应偏置；S43：设置h＝tansig，其中，h为隐藏层节点向量，tanSig为激活函数；S44：设置neto＝W2h+b2，其中，neto为隐藏层的线性项，h为隐藏层向量，W2为对应权重矩阵，size为1×5，b2为对应偏置；S45：达到模型结束条件时停止训练。S5：选择电池的部分循环及全部循环的正负极固相最大锂离子浓度、LLI及LAM集合分别作为两个BP神经网络模型的输入，分别实现电池剩下循环的SOH估算和同款电池所有循环下的SOH估算。请参阅图4，在单粒子模型中采用LDW-PSO算法辨识正负极固相最大锂离子浓度的框图如图4所示，图中，θ为正负极固相最大锂离子浓度，J为目标函数，Ii为i时刻的电流，Vi为i时刻的实际端电压，f为i时刻的单粒子模型模拟端电压。请参阅图5，对S3的不同老化循环次数下IC曲线和DV曲线如图5所示，图中，IC曲线中左侧峰值处dQ/dV值以及DV曲线中最右侧的容量值等特征参数能分别用来计算锂电池在老化过程中的LAM和LLI。请参阅图6，本实施例中选择正负极固相最大锂离子浓度、LAM、LLI序列作为BP模型的输入层，隐藏层包含5个神经元，输出层为电池SOH，BP神经网络的示意图如图6所示。请参阅表1，表1是本实施例中BP神经网络模型的部分输入值。表1请参阅图7，随机选择该锂电池部分循环的正负极固相最大锂离子浓度、LLI及LAM集合作为BP神经网络模型的输入，对应的SOH作为BP模型的输出进行训练，在训练完成后输入剩余老化循环下的相应输入值以获取此时的SOH，该实验电池的部分SOH估算结果图及误差图如图7所示。请参阅图8，选择该锂电池全部老化循环的正负极固相最大锂离子浓度、LLI及LAM集合作为BP神经网络模型的输入，对应的SOH作为BP模型的输出进行训练，在训练完成后输入同款电池对应老化循环下的相应输入值以获取此电池的SOH，同款电池的SOH估算结果图及误差图如图8所示。从图7和图8可看出，基于电化学老化机理和数据驱动的储能锂电池SOH估算方法能较精准地估算电池SOH。本实施例提供的基于电化学老化机理和数据驱动的储能锂电池SOH估算方法的有益效果包括：1)针对大型储能电站，本方法能量化电池各种运行时期的LAM及LLI老化模式，为分析电池前中后期的老化原因和预测异常衰减电池提供支撑；2)仅需采集电压和电流的原始数据，无需使用SOC等二次计算数据，即可实现IC曲线和DV曲线的特征提取；3)IC曲线和DV曲线量化老化模式时不需要对电池进行破坏性试验，增强了电池系统的经济性和通用性。4)通过将老化过程中正负极固相最大锂离子浓度、LLI及LAM序列作为BP神经网络的输入来进行模型训练，加快了网络的训练速度并增强了算法的鲁棒性、准确性和可解释性。以上所述，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到的变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以所述权利要求的保护范围为准。
