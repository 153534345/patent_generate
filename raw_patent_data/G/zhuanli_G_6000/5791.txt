标题title
一种边界层高度的反演方法及装置
摘要abst
本发明提供一种边界层高度的反演方法及装置，在搜索地图中确定起始路径单元的坐标，利用高斯滤波卷积函数和起始路径单元的坐标进行卷积运算，确定出中心路径单元和目标路径单元，将目标路径单元中权重分配值最大的非障碍物路径单元作为基准路径单元，确定基准路径单元对应的时刻为反演时刻，基准路径单元对应的距离库编号与距离分辨率的乘积，作为反演时刻的边界层高度。在本方案中，基于卷积运算模拟得到边界层高度变化范围所对应的非障碍路径单元，确定权重分配值最大的非障碍物路径单元对应的距离库编号，将距离库编号与距离分辨率的乘积作为边界层高度，以实现避免小波尺度选择不确定性和反演边界层高度剧烈跳变导致的结果不准确问题的目的。
权利要求书clms
1.一种边界层高度的反演方法，其特征在于，包括：由预先建立的搜索地图中确定开始进行边界层高度反演的目标时刻，所述搜索地图预先基于历史距离校正信号构建，所述搜索地图的横轴表示n个预设间隔的时刻，纵轴表示k个距离库编号，所述搜索地图中包含n×k个路径单元，各个路径单元分别对应一个不同的距离库，各个距离库由所述历史距离校正信号按照相同的距离分辨率划分而成，每一路径单元中存储有对应距离库的噪声比、对应距离库的垂直速度值和所述历史距离校正信号，n和k为正整数；基于所述目标时刻、所述历史距离校正信号和小波协方差变换法，在搜索地图中确定起始路径单元和所述起始路径单元的坐标；利用高斯滤波卷积函数和所述起始路径单元的坐标进行卷积运算，基于卷积运算的结果从各个路径单元中，确定出中心路径单元以及多个目标路径单元；将对应距离库的噪声比大于阈值的目标路径单元，设置为非障碍路径单元；基于各个非障碍物路径单元到所述中心路径单元的距离，为各个非障碍物路径单元设置权重，基于分配值公式和相应的权重计算各个非障碍物路径单元对应的权重分配值，将权重分配值最大的非障碍物路径单元作为基准路径单元；确定所述基准路径单元对应的时刻为反演时刻，并确定所述基准路径单元对应的距离库编号，将所述距离库编号与所述距离分辨率的乘积，作为所述反演时刻的边界层高度。2.根据权利要求1所述的方法，其特征在于，所述基于所述目标时刻、所述历史距离校正信号和小波协方差变换法，在搜索地图中确定起始路径单元和所述起始路径单元的坐标，包括：基于所述目标时刻和所述历史距离校正信号进行小波协方差变换，得到协方差函数；其中，所述协方差函数为：，R代表高度，b为小波变换的平滑中心位置对应的距离库编号，a为小波变换的尺度因子，Rt代表所述历史距离校正信号的顶部高度，Rb代表历史距离校正信号的底部高度，X为所述历史距离校正信号的廓线，/＞为Harr函数；利用所述协方差函数和所述目标时刻对应的各个路径单元的坐标，计算得到所述目标时刻对应的各个路径单元的协方差函数值；将协方差函数值最大的路径单元作为起始路径单元，并确定所述起始路径单元在所述搜索地图中的坐标。3.根据权利要求1所述的方法，其特征在于，所述利用高斯滤波卷积函数和所述起始路径单元的坐标进行卷积运算，基于卷积运算的结果从各个路径单元中，确定出中心路径单元以及多个目标路径单元，包括：在所述搜索地图中以所述起始路径单元的坐标为中心，选取预设个相邻的路径单元作为卷积窗口；基于所述卷积窗口中路径单元存储的垂直速度值，以及高斯滤波卷积函数进行卷积运算，得到对应所述目标时刻的边界层高度的垂直变化速度；确定所述目标时刻与所述目标时刻的上一时刻或下一时刻的时间间隔；计算所述时间间隔与所述垂直变化速度的乘积，得到垂直移动距离；将所述垂直移动距离除以所述距离分辨率，得到所述垂直移动距离内的距离库数量；以所述起始路径单元的纵坐标与所述距离库数量的和值为纵坐标，从所述目标时刻的上一时刻或下一时刻对应的各个路径单元中，确定出中心路径单元；基于所述中心路径单元的坐标、所述垂直移动距离内的距离库数量和预设的最小搜索深度，得到目标纵坐标范围；所述目标纵坐标范围为：Hc-bt-bmin至Hc+bt+bmin，其中，HC为搜索深度中心的纵坐标，bt为垂直移动距离内的距离库数量，bmin为预设的最小搜索深度；将横坐标为所述目标时刻的上一时刻或下一时刻，并且纵坐标在所述目标纵坐标范围内的路径单元作为目标路径单元。4.根据权利要求1所述的方法，其特征在于，所述基于各个非障碍物路径单元到所述中心路径单元的距离，为各个非障碍物路径单元设置权重，基于分配值公式和相应的权重计算各个非障碍物路径单元对应的权重分配值，将权重分配值最大的非障碍物路径单元作为基准路径单元，包括：利用小波协方差变换法，得到各个非障碍物路径单元的协方差函数值；计算得到在所述搜索地图中各个非障碍物路径单元到所述中心路径单元的距离；利用高斯函数，以及各个非障碍物路径单元到所述中心路径单元的距离，计算得到各个非障碍物路径单元的权重；利用分配值公式、各个非障碍物路径单元的协方差函数值和权重，计算得到各个非障碍物路径单元的权重分配值；所述分配值公式为：F=D×W，其中，F为权重分配值，i为距离库编号，D为权重，W为协方差函数值；将权重分配值最大的非障碍物路径单元作为基准路径单元。5.根据权利要求1至4任一所述的方法，其特征在于，还包括：确定一个日出后边界层高度呈现线性上升趋势且无云影响的基准时刻；基于所述基准时刻以及预设的时间间隔选取预设个验证时刻；利用小波协方差变换法，计算各个验证时刻对应的边界层高度；在各个验证时刻对应的边界层高度中选取中位数作为检验高度；反演得到所述验证时刻的边界层高度；当反演得到的所述验证时刻的边界层高度与所述检验高度的差值在预设范围内时，确定反演得到的所述反演时刻的边界层高度准确。6.一种边界层高度的反演装置，其特征在于，包括：确定单元，用于由预先建立的搜索地图中确定开始进行边界层高度反演的目标时刻，所述搜索地图预先基于历史距离校正信号构建，所述搜索地图的横轴表示n个预设间隔的时刻，纵轴表示k个距离库编号，所述搜索地图中包含n×k个路径单元，各个路径单元分别对应一个不同的距离库，各个距离库由所述历史距离校正信号按照相同的距离分辨率划分而成，每一路径单元中存储有对应距离库的噪声比、对应距离库的垂直速度值和所述历史距离校正信号，n和k为正整数；变换单元，用于基于所述目标时刻、所述历史距离校正信号和小波协方差变换法，在搜索地图中确定起始路径单元和所述起始路径单元的坐标；卷积单元，用于利用高斯滤波卷积函数和所述起始路径单元的坐标进行卷积运算，基于卷积运算的结果从所述目标时刻对应的各个路径单元中，确定出中心路径单元以及多个目标路径单元；将对应距离库的噪声比大于阈值的目标路径单元，设置为非障碍路径单元；分配单元，用于基于各个非障碍物路径单元到所述中心路径单元的距离，为各个非障碍物路径单元设置权重，基于分配值公式和相应的权重计算各个非障碍物路径单元对应的权重分配值，将权重分配值最大的非障碍物路径单元作为基准路径单元；计算单元，用于确定所述基准路径单元对应的时刻为反演时刻，并确定所述基准路径单元对应的距离库编号，将所述距离库编号与所述距离分辨率的乘积，作为所述反演时刻的边界层高度。7.根据权利要求6所述的装置，其特征在于，所述变换单元，包括：变换子单元，用于基于所述目标时刻和所述历史距离校正信号进行小波协方差变换，得到协方差函数；其中，所述协方差函数为：，R代表高度，b为小波变换的平滑中心位置对应的距离库编号，a为小波变换的尺度因子，Rt代表所述历史距离校正信号的顶部高度，Rb代表历史距离校正信号的底部高度，X为所述历史距离校正信号的廓线，/＞为Harr函数；第一计算子单元，用于利用所述协方差函数和所述目标时刻对应的各个路径单元的坐标，计算得到所述目标时刻对应的各个路径单元的协方差函数值；确定子单元，用于将协方差函数值最大的路径单元作为起始路径单元，并确定所述起始路径单元在所述搜索地图中的坐标。8.根据权利要求6所述的装置，其特征在于，所述卷积单元，包括：选取子单元，用于在所述搜索地图中以所述起始路径单元的坐标为中心，选取预设个相邻的路径单元作为卷积窗口；卷积子单元，用于基于所述卷积窗口中路径单元存储的垂直速度值，以及高斯滤波卷积函数进行卷积运算，得到对应所述目标时刻的边界层高度的垂直变化速度；第二计算子单元，用于确定所述目标时刻与所述目标时刻的上一时刻或下一时刻的时间间隔；计算所述时间间隔与所述垂直变化速度的乘积，得到垂直移动距离；将所述垂直移动距离除以所述距离分辨率，得到所述垂直移动距离内的距离库数量；以所述起始路径单元的纵坐标与所述距离库数量的和值为纵坐标，从所述目标时刻的上一时刻或下一时刻对应的各个路径单元中，确定出中心路径单元；基于所述中心路径单元的坐标、所述垂直移动距离内的距离库数量和预设的最小搜索深度，得到目标纵坐标范围；所述目标纵坐标范围为：Hc-bt-bmin至Hc+bt+bmin，其中，HC为搜索深度中心的纵坐标，bt为垂直移动距离内的距离库数量，bmin为预设的最小搜索深度；将横坐标为所述目标时刻的上一时刻或下一时刻，并且纵坐标在所述目标纵坐标范围内的路径单元作为目标路径单元。9.根据权利要求6所述的装置，其特征在于，所述分配单元，具体用于：利用小波协方差变换法，得到各个非障碍物路径单元的协方差函数值；计算得到在所述搜索地图中各个非障碍物路径单元到所述中心路径单元的距离；利用高斯函数，以及各个非障碍物路径单元到所述中心路径单元的距离，计算得到各个非障碍物路径单元的权重；利用分配值公式、各个非障碍物路径单元的协方差函数值和权重，计算得到各个非障碍物路径单元的权重分配值；所述分配值公式为：F=D×W，其中，F为权重分配值，i为距离库编号，D为权重，W为协方差函数值；将权重分配值最大的非障碍物路径单元作为基准路径单元。10.根据权利要求6至9任一所述的装置，其特征在于，还包括：验证单元，用于确定一个日出后边界层高度呈现线性上升趋势且无云影响的基准时刻；基于所述基准时刻以及预设的时间间隔选取预设个验证时刻；利用小波协方差变换法，计算各个验证时刻对应的边界层高度；在各个验证时刻对应的边界层高度中选取中位数作为检验高度；反演得到所述验证时刻的边界层高度；当反演得到的所述验证时刻的边界层高度与所述检验高度的差值在预设范围内时，确定反演得到的所述反演时刻的边界层高度准确。
说明书desc
技术领域本发明涉及大气探测技术领域，具体涉及一种边界层高度的反演方法及装置。背景技术大气边界层位于对流层的底部，是直接受地球表面影响且与地表有直接作用的气层，大气边界层高度是一个垂直方向上的重要气象变量，影响着污染物的纵向扩散程度，在各类气象模型中广泛被应用，研究大气边界层高度对于监测各地的空气污染状况，以及因地适宜的制定污染控制政策等具有重要的辅助作用。传统的小波变换方法是通过空间上激光雷达大气后向散射信号梯度廓线的突变位置，从而确认边界层高度。由于小波尺度选择不确定性和反演边界层高度剧烈跳变，导致结果不准确，因此，如何避免小波尺度选择不确定性和反演边界层高度剧烈跳变导致的结果不准确问题，是目前急需解决的问题。发明内容有鉴于此，本发明实施例提供一种边界层高度的反演方法及装置，以实现避免小波尺度选择不确定性和反演边界层高度剧烈跳变导致的结果不准确问题的目的。为实现上述目的，本发明实施例提供如下技术方案：本发明实施例第一方面公开了一种边界层高度的反演方法，包括：由预先建立的搜索地图中确定开始进行边界层高度反演的目标时刻，所述搜索地图预先基于历史距离校正信号构建，所述搜索地图的横轴表示n个预设间隔的时刻，纵轴表示k个距离库编号，所述搜索地图中包含n×k个路径单元，各个路径单元分别对应一个不同的距离库，各个距离库由所述历史距离校正信号按照相同的距离分辨率划分而成，每一路径单元中存储有对应距离库的噪声比、对应距离库的垂直速度值和所述历史距离校正信号，n和k为正整数；基于所述目标时刻、所述历史距离校正信号和小波协方差变换法，在搜索地图中确定起始路径单元和所述起始路径单元的坐标；利用高斯滤波卷积函数和所述起始路径单元的坐标进行卷积运算，基于卷积运算的结果从各个路径单元中，确定出中心路径单元以及多个目标路径单元；将对应距离库的噪声比大于阈值的目标路径单元，设置为非障碍路径单元；基于各个非障碍物路径单元到所述中心路径单元的距离，为各个非障碍物路径单元设置权重，基于分配值公式和相应的权重计算各个非障碍物路径单元对应的权重分配值，将权重分配值最大的非障碍物路径单元作为基准路径单元；确定所述基准路径单元对应的时刻为反演时刻，并确定所述基准路径单元对应的距离库编号，将所述距离库编号与所述距离分辨率的乘积，作为所述反演时刻的边界层高度。优选的，所述基于所述目标时刻、所述历史距离校正信号和小波协方差变换法，在搜索地图中确定起始路径单元和所述起始路径单元的坐标，包括：基于所述目标时刻和所述历史距离校正信号进行小波协方差变换，得到协方差函数；其中，所述协方差函数为：，R代表高度，b为小波变换的平滑中心位置对应的距离库编号，a为小波变换的尺度因子，Rt代表所述历史距离校正信号的顶部高度，Rb代表历史距离校正信号的底部高度，X为所述历史距离校正信号的廓线，/＞为Harr函数；利用所述协方差函数和所述目标时刻对应的各个路径单元的坐标，计算得到所述目标时刻对应的各个路径单元的协方差函数值；将协方差函数值最大的路径单元作为起始路径单元，并确定所述起始路径单元在所述搜索地图中的坐标。优选的，所述利用高斯滤波卷积函数和所述起始路径单元的坐标进行卷积运算，基于卷积运算的结果从各个路径单元中，确定出中心路径单元以及多个目标路径单元，包括：在所述搜索地图中以所述起始路径单元的坐标为中心，选取预设个相邻的路径单元作为卷积窗口；基于所述卷积窗口中路径单元存储的垂直速度值，以及高斯滤波卷积函数进行卷积运算，得到对应所述目标时刻的边界层高度的垂直变化速度；确定所述目标时刻与所述目标时刻的上一时刻或下一时刻的时间间隔；计算所述时间间隔与所述垂直变化速度的乘积，得到垂直移动距离；将所述垂直移动距离除以所述距离分辨率，得到所述垂直移动距离内的距离库数量；以所述起始路径单元的纵坐标与所述距离库数量的和值为纵坐标，从所述目标时刻的上一时刻或下一时刻对应的各个路径单元中，确定出中心路径单元；基于所述中心路径单元的坐标、所述垂直移动距离内的距离库数量和预设的最小搜索深度，得到目标纵坐标范围；所述目标纵坐标范围为：Hc-bt-bmin至Hc+bt+bmin，其中，HC为搜索深度中心的纵坐标，bt为垂直移动距离内的距离库数量，bmin为预设的最小搜索深度；将横坐标为所述目标时刻的上一时刻或下一时刻，并且纵坐标在所述目标纵坐标范围内的路径单元作为目标路径单元。优选的，所述基于各个非障碍物路径单元到所述中心路径单元的距离，为各个非障碍物路径单元设置权重，基于分配值公式和相应的权重计算各个非障碍物路径单元对应的权重分配值，将权重分配值最大的非障碍物路径单元作为基准路径单元，包括：利用小波协方差变换法，得到各个非障碍物路径单元的协方差函数值；计算得到在所述搜索地图中各个非障碍物路径单元到所述中心路径单元的距离；利用高斯函数，以及各个非障碍物路径单元到所述中心路径单元的距离，计算得到各个非障碍物路径单元的权重；利用分配值公式、各个非障碍物路径单元的协方差函数值和权重，计算得到各个非障碍物路径单元的权重分配值；所述分配值公式为：F=D×W，其中，F为权重分配值，i为距离库编号，D为权重，W为协方差函数值；将权重分配值最大的非障碍物路径单元作为基准路径单元。优选的，还包括：确定一个日出后边界层高度呈现线性上升趋势且无云影响的基准时刻；基于所述基准时刻以及预设的时间间隔选取预设个验证时刻；利用小波协方差变换法，计算各个验证时刻对应的边界层高度；在各个验证时刻对应的边界层高度中选取中位数作为检验高度；反演得到所述验证时刻的边界层高度；当反演得到的所述验证时刻的边界层高度与所述检验高度的差值在预设范围内时，确定反演得到的所述反演时刻的边界层高度准确。本发明实施例第二方面公开了一种边界层高度的反演装置，包括：确定单元，用于由预先建立的搜索地图中确定开始进行边界层高度反演的目标时刻，所述搜索地图预先基于历史距离校正信号构建，所述搜索地图的横轴表示n个预设间隔的时刻，纵轴表示k个距离库编号，所述搜索地图中包含n×k个路径单元，各个路径单元分别对应一个不同的距离库，各个距离库由所述历史距离校正信号按照相同的距离分辨率划分而成，每一路径单元中存储有对应距离库的噪声比、对应距离库的垂直速度值和所述历史距离校正信号，n和k为正整数；变换单元，用于基于所述目标时刻、所述历史距离校正信号和小波协方差变换法，在搜索地图中确定起始路径单元和所述起始路径单元的坐标；卷积单元，用于利用高斯滤波卷积函数和所述起始路径单元的坐标进行卷积运算，基于卷积运算的结果从所述目标时刻对应的各个路径单元中，确定出中心路径单元以及多个目标路径单元；将对应距离库的噪声比大于阈值的目标路径单元，设置为非障碍路径单元；分配单元，用于基于各个非障碍物路径单元到所述中心路径单元的距离，为各个非障碍物路径单元设置权重，基于分配值公式和相应的权重计算各个非障碍物路径单元对应的权重分配值，将权重分配值最大的非障碍物路径单元作为基准路径单元；计算单元，用于确定所述基准路径单元对应的时刻为反演时刻，并确定所述基准路径单元对应的距离库编号，将所述距离库编号与所述距离分辨率的乘积，作为所述反演时刻的边界层高度。优选的，所述变换单元，包括：变换子单元，用于基于所述目标时刻和所述历史距离校正信号进行小波协方差变换，得到协方差函数；其中，所述协方差函数为：，R代表高度，b为小波变换的平滑中心位置对应的距离库编号，a为小波变换的尺度因子，Rt代表所述历史距离校正信号的顶部高度，Rb代表历史距离校正信号的底部高度，X为所述历史距离校正信号的廓线，/＞为Harr函数；第一计算子单元，用于利用所述协方差函数和所述目标时刻对应的各个路径单元的坐标，计算得到所述目标时刻对应的各个路径单元的协方差函数值；确定子单元，用于将协方差函数值最大的路径单元作为起始路径单元，并确定所述起始路径单元在所述搜索地图中的坐标。优选的，所述卷积单元，包括：选取子单元，用于在所述搜索地图中以所述起始路径单元的坐标为中心，选取预设个相邻的路径单元作为卷积窗口；卷积子单元，用于基于所述卷积窗口中路径单元存储的垂直速度值，以及高斯滤波卷积函数进行卷积运算，得到对应所述目标时刻的边界层高度的垂直变化速度；第二计算子单元，用于确定所述目标时刻与所述目标时刻的上一时刻或下一时刻的时间间隔；计算所述时间间隔与所述垂直变化速度的乘积，得到垂直移动距离；将所述垂直移动距离除以所述距离分辨率，得到所述垂直移动距离内的距离库数量；以所述起始路径单元的纵坐标与所述距离库数量的和值为纵坐标，从所述目标时刻的上一时刻或下一时刻对应的各个路径单元中，确定出中心路径单元；基于所述中心路径单元的坐标、所述垂直移动距离内的距离库数量和预设的最小搜索深度，得到目标纵坐标范围；所述目标纵坐标范围为：Hc-bt-bmin至Hc+bt+bmin，其中，HC为搜索深度中心的纵坐标，bt为垂直移动距离内的距离库数量，bmin为预设的最小搜索深度；将横坐标为所述目标时刻的上一时刻或下一时刻，并且纵坐标在所述目标纵坐标范围内的路径单元作为目标路径单元。优选的，所述分配单元，具体用于：利用小波协方差变换法，得到各个非障碍物路径单元的协方差函数值；计算得到在所述搜索地图中各个非障碍物路径单元到所述中心路径单元的距离；利用高斯函数，以及各个非障碍物路径单元到所述中心路径单元的距离，计算得到各个非障碍物路径单元的权重；利用分配值公式、各个非障碍物路径单元的协方差函数值和权重，计算得到各个非障碍物路径单元的权重分配值；所述分配值公式为：F=D×W，其中，F为权重分配值，i为距离库编号，D为权重，W为协方差函数值；将权重分配值最大的非障碍物路径单元作为基准路径单元。优选的，还包括：验证单元，用于确定一个日出后边界层高度呈现线性上升趋势且无云影响的基准时刻；基于所述基准时刻以及预设的时间间隔选取预设个验证时刻；利用小波协方差变换法，计算各个验证时刻对应的边界层高度；在各个验证时刻对应的边界层高度中选取中位数作为检验高度；反演得到所述验证时刻的边界层高度；当反演得到的所述验证时刻的边界层高度与所述检验高度的差值在预设范围内时，确定反演得到的所述反演时刻的边界层高度准确。基于上述本发明实施例提供的一种边界层高度的反演方法及装置，由预先建立的搜索地图中确定开始进行边界层高度反演的目标时刻，所述搜索地图预先基于历史距离校正信号构建，所述搜索地图的横轴表示n个预设间隔的时刻，纵轴表示k个距离库编号，所述搜索地图中包含n×k个路径单元，各个路径单元分别对应一个不同的距离库，各个距离库由所述历史距离校正信号按照相同的距离分辨率划分而成，每一路径单元中存储有对应距离库的噪声比、对应距离库的垂直速度值和所述历史距离校正信号，n和k为正整数；基于所述目标时刻、所述历史距离校正信号和小波协方差变换法，在搜索地图中确定起始路径单元和所述起始路径单元的坐标；利用高斯滤波卷积函数和所述起始路径单元的坐标进行卷积运算，基于卷积运算的结果从各个路径单元中，确定出中心路径单元以及多个目标路径单元；将对应距离库的噪声比大于阈值的目标路径单元，设置为非障碍路径单元；基于各个非障碍物路径单元到所述中心路径单元的距离，为各个非障碍物路径单元设置权重，基于分配值公式和相应的权重计算各个非障碍物路径单元对应的权重分配值，将权重分配值最大的非障碍物路径单元作为基准路径单元；确定所述基准路径单元对应的时刻为反演时刻，并确定所述基准路径单元对应的距离库编号，将所述距离库编号与所述距离分辨率的乘积，作为所述反演时刻的边界层高度。在本方案中，在包含多个路径单元的搜索地图中确定目标时刻和起始路径单元的坐标，基于起始路径单元的坐标进行卷积运算，模拟得到边界层高度所对应的非障碍路径单元，并为非障碍路径单元分配权重，并确定权重分配值最大的非障碍物路径单元对应的距离库编号，将距离库编号与距离分辨率的乘积，作为边界层高度，以实现避免小波尺度选择不确定性和反演边界层高度剧烈跳变导致的结果不准确问题的目的。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据提供的附图获得其他的附图。图1为本发明实施例公开的一种边界层高度的反演方法的流程图；图2为本发明实施例公开的一种搜索地图的示例图；图3为本发明实施例公开的一种卷积窗口的示意图；图4为本发明实施例公开的一种目标路径单元分布示意图；图5为本发明实施例公开的一种障碍物路径单元的示意图；图6为本发明实施例公开的一种反演各个时刻边界层高度的示意图；图7为本发明实施例公开的一种边界层高度反演结果示意图；图8为本发明实施例公开的一种边界层高度反演结果的验证方法的流程图；图9为本发明实施例公开的一种边界层高度的反演装置的结构图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本申请中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。由背景技术可知，在边界层高度反演过程中，如何避免小波尺度选择不确定性和反演边界层高度剧烈跳变导致的结果不准确问题，是目前急需解决的问题。因此，本发明实施例公开了一种边界层高度的反演方法及装置，在本方案中，在包含多个路径单元的搜索地图中确定目标时刻和起始路径单元的坐标，基于起始路径单元的坐标进行卷积运算，模拟得到边界层高度所对应的非障碍路径单元，并为非障碍路径单元分配权重，并确定权重分配值最大的非障碍物路径单元对应的距离库编号，将距离库编号与距离分辨率的乘积，作为边界层高度，以实现避免小波尺度选择不确定性和反演边界层高度剧烈跳变导致的结果不准确问题的目的。如图1所示，为本发明实施例公开的一种边界层高度的反演方法的流程图，该方法主要包括以下步骤：步骤S101：由预先建立的搜索地图中确定开始进行边界层高度反演的目标时刻。在步骤S101中，搜索地图预先基于历史距离校正信号构建，其中，历史距离校正信号通过相干测风激光雷达采集得到。如图2所示，为本发明实施例公开的一种搜索地图的示例图。具体的，搜索地图的横轴表示n个预设间隔的时刻，纵轴表示k个距离库编号，搜索地图中包含n×k个路径单元，n和k为正整数。其中，各个路径单元分别对应一个不同的距离库，各个距离库是基于历史距离校正信号按照相同的距离分辨率划分而成的。需要说明的是，距离库为雷达回波信号处理中沿射线方向按距离分成的小的距离单元。在一实施例中，读取相干测风激光雷达采集的历史文件，得到历史距离校正信号、以及各个距离库对应的噪声比和各个距离库对应的垂直速度值。在具体实现中，由于划分而成的各个距离库，其距离分辨率存在差异，需对其距离分辨率归一化处理，例如，第1至100个距离库的距离分辨率为30m，第101至150个距离库的距离分辨率为60m，其余剩下的距离库的距离分辨率为150m，将各个距离库的距离分辨率归一化为30m。在本发明实施例中，优选的距离分辨率为30m，最小边界层高度阈值设置为240m，对应的距离库编号为240/30=8，最小边界层高度阈值设置为4000m，对应的距离库编号为4000/30=133，即不会利用搜索地图中距离库编号大于133或小于8的部分的路径单元，进行边界层高度的反演。需要说明的是，每一路径单元中存储有对应距离库的噪声比、对应距离库的垂直速度值和历史距离校正信号。在步骤S101的具体实现过程中，由预先建立的搜索地图包含的n个时刻中确定待进行边界层高度反演的目标时刻。步骤S102：基于目标时刻、历史距离校正信号和小波协方差变换法，在搜索地图中确定起始路径单元和起始路径单元的坐标。在步骤S102具体实现的过程中，基于目标时刻对所述历史距离校正信号的廓线X进行小波协方差变换，得到协方差函数。其中，协方差函数为：公式中，R代表高度，b为小波变换的平滑中心位置对应的距离库编号，a为小波变换的尺度因子，Rt代表历史距离校正信号的顶部高度，Rb代表历史距离校正信号的底部高度，X为所述历史距离校正信号的廓线，为Harr函数。具体的，利用公式和目标时刻对应的各个路径单元的纵坐标，即各个路径单元对应的距离库编号，计算目标时刻对应的各个路径单元的协方差函数值。将协方差函数值最大的路径单元作为起始路径单元，并确定起始路径单元在搜索地图中的坐标。具体的，如图2所示，图中颜色加深并标记为T的路径单元为起始路径单元，其坐标为。其中，t4为目标时刻，b4为起始路径单元对应的距离库编号。需要说明的是，起始路径单元对应的距离库编号与距离分辨率的乘积，即为目标时刻的边界层高度。步骤S103：利用高斯滤波卷积函数和起始路径单元的坐标进行卷积运算，基于卷积运算的结果从目标时刻对应的各个路径单元中，确定出中心路径单元以及多个目标路径单元。在步骤S103中，高斯滤波卷积函数为：其中，代表搜索地图中的坐标，σ代表标准差。在步骤S103具体实现的过程中，在搜索地图中以起始路径单元的坐标为中心，选取预设个相邻的路径单元作为卷积窗口。优选的，选取的卷积窗口的大小为3×3。如图3所示，为本发明实施例公开的一种卷积窗口的示意图。其中，V代表路径单元中存储的垂直速度值，b代表距离库编号，t为代表时刻，k为序号，V为起始路径中存储的垂直速度值，为起始路径单元的坐标。需要说明的是，公式中标准差σ的计算规则为：当计算目标时刻的下一时刻的边界层高度时，使用3×3对卷积窗口中右侧两列垂直速度值计算标准差，如图3的左侧分图所示。当计算目标时刻的上一时刻的边界层高度时，使用3×3对应的卷积窗口中左侧两列垂直速度值计算标准差，如图3的右侧分图所示。基于卷积窗口中路径单元存储的垂直速度值，以及公式进行卷积运算，得到对应目标时刻的边界层高度的垂直变化速度。具体的，公式中对于大小为×的卷积窗口，高斯核中位置处垂直速度值的计算公式为：基于公式和公式，得到垂直变化速度的计算公式：其中，Vel为垂直变化速度，代表搜索地图中的坐标。确定目标时刻与目标时刻的上一时刻或下一时刻的时间间隔，基于垂直变化速度和时间间隔，从各个路径单元中，确定出中心路径单元以及多个目标路径单元。如图4所示，为本发明实施例公开的一种目标路径单元分布示意图。其中，起始路径单元左侧虚线矩形框为目标时刻的上一时刻对应的目标路径单元，起始路径单元右侧虚线矩形框为目标时刻的下一时刻对应的目标路径单元。具体的，计算时间间隔与垂直变化速度的乘积，得到垂直移动距离，将垂直移动距离除以距离分辨率，得到垂直移动距离内的距离库数量。以起始路径单元的纵坐标与距离库数量的和值为纵坐标，从所述目标时刻的上一时刻或下一时刻对应的各个路径单元中，确定出纵坐标为前述和值的中心路径单元。基于中心路径单元的坐标、垂直移动距离内的距离库数量和预设的最小搜索深度，得到目标纵坐标范围。具体的，目标纵坐标范围为：Hc-bt-bmin至Hc+bt+bmin，其中，HC为搜索深度中心的纵坐标，即中心路径单元的纵坐标，bt为垂直移动距离内的距离库数量，bmin为预设的最小搜索深度，即本发明实施例中规定的最小边界层高度阈值对应距离库编号8。将横坐标为目标时刻的上一时刻或下一时刻，并且纵坐标在所述目标纵坐标范围内的路径单元作为目标路径单元。各个目标路径单元在搜索地图中占据的范围，即边界层高度的搜索深度范围，在本申请中用H表示。考虑当垂直风速过小时，搜索深度范围也小甚至为0个距离库，本申请规定最小搜索深度范围为8个距离库，考虑垂直移动速度和经历的时间确认边界层高度的移动深度。步骤S104：将对应距离库的噪声比大于阈值的目标路径单元，设置为非障碍路径单元。在步骤S104中，各个目标路径单元中存储有其对应距离库的噪声比。在步骤S104具体实现的过程中，将噪声比为nan值或小于阈值的路径单元作为障碍物路径单元，并在搜索地图中用B进行标识，将噪声比不为nan值且大于阈值的路径单元作为非障碍物路径单元。其中，障碍物单元不参与后续的计算以及边界层高度到达路径单元的判断。优选的噪声比阈值设为-19dB。如图5所示，为本发明实施例公开的一种障碍物路径单元的示意图。其中，搜索地图中深色的路径单元为障碍物单元，并且在搜索地图中用B进行标识，其余路径单元为非障碍物路径单元。步骤S105：基于各个非障碍物路径单元到中心路径单元的距离，为各个非障碍物路径单元设置权重。在步骤S105具体实现的过程中，利用小波协方差变换法，得到各个非障碍物路径单元的协方差函数值。其中，利用公式、历史距离校正信号和各个非障碍物路径单元在搜索地图中的坐标，计算得到各个非障碍物路径单元的协方差函数值。需要说明的是，本发明使用小波协方差变换作为基准判别依据，能大幅度减少基准判断依据的计算量，基准判别依据可以替换为阈值法、梯度法、标准差法等。计算得到在搜索地图中各个非障碍物路径单元到中心路径单元的距离。利用高斯函数，以及各个非障碍物路径单元到中心路径单元的距离，计算得到各个非障碍物路径单元的权重。具体的，高斯函数为：D为权重，HR为搜索半径，i为搜索深度范围H内各个非障碍物路径单元对应的距离库编号，d为搜索深度中心Hc到搜索深度范围内的各个非障碍物路径单元的距离。步骤S106：基于分配值公式和相应的权重计算各个非障碍物路径单元对应的权重分配值，将权重分配值最大的非障碍物路径单元作为基准路径单元。在步骤S106中，分配值公式为：F=D×W其中，F为权重分配值，D为步骤S105中的权重，W为步骤S105具体实现中的基准判别依据计算的判别值，即各个非障碍物路径单元的协方差函数值，i为搜索深度范围H内各个非障碍物路径单元对应的距离库编号。在步骤S106具体实现的过程中，基于分配值公式和相应的权重计算各个非障碍物路径单元对应的权重分配值，将权重分配值中的最大值对应的距离库编号it作为边界层高度所到达的路径单元，即基准路径单元，该路径畅通。例如，图5中坐标为和的路径单元为基准路径单元。步骤S107：确定基准路径单元对应的时刻为反演时刻，并确定基准路径单元对应的距离库编号，将距离库编号与距离分辨率的乘积，作为反演时刻的边界层高度。在步骤S107中，距离分辨率为30m。例如，图5中的t3和t6为基准路径单元对应的时刻，即为反演时刻，b3即为基准路径单元对应的距离库编号。具体的，反演时刻t3和t6对应的边界层高度均为30m×b3。在一实施例中，预设待反演的时段t0至tn，其中，搜索地图中的各个时刻包含t0至tn，本申请中的目标时刻t为t0至tn中的时刻，即t0≦t≦tn。如图6所示，为本发明实施例公开的一种反演各个时刻边界层高度的示意图。其中，虚线连线表示边界层高度，连接经过的各个路径单元为边界层高度达到的路径单元，即上述实施例中提及的基准路径单元。具体的，以目标时刻为起始，在t0至tn时刻区间内分别向前和向后遍历数据，并重复步骤S103至步骤S107，最终计算出t0至tn中各个时刻对应的边界层高度值。基于上述本发明实施例公开的一种便捷层高度的反演方法，如图7所示，为本发明实施例公开的一种边界层高度反演结果示意图。其中，该边界层高度反演结果对应的反演时段为0时至24时，对应于上述本发明实施例中的待反演的时段t0至tn。基于上述本发明实施例公开的一种边界层高度的反演方法，在搜索地图中确定起始路径单元和起始路径单元的坐标，利用高斯滤波卷积函数和起始路径单元的坐标进行卷积运算，基于卷积运算的结果从各个路径单元中，确定出中心路径单元以及多个目标路径单元，并设置非障碍路径单元，为各个非障碍物路径单元设置权重，计算各个非障碍物路径单元对应的权重分配值，将权重分配值最大的非障碍物路径单元作为基准路径单元，确定基准路径单元对应的时刻为反演时刻，并确定基准路径单元对应的距离库编号，将距离库编号与距离分辨率的乘积，作为反演时刻的边界层高度。在本方案中，基于起始路径单元的坐标进行卷积运算，模拟得到边界层高度变化范围所对应的非障碍路径单元，并为非障碍路径单元分配权重，并确定权重分配值最大的非障碍物路径单元对应的距离库编号，将距离库编号与距离分辨率的乘积，作为边界层高度，以实现避免小波尺度选择不确定性和反演边界层高度剧烈跳变导致的结果不准确问题的目的。基于上述本发明实施例公开的一种边界层高度的反演方法，如图8所示，为本发明实施例公开的一种边界层高度反演结果的验证方法的流程图。本发明实施例公开的一种边界层高度反演结果的验证方法是对图1对应实施例反演得到的边界层高度的验证，该方法主要包括以下步骤：步骤S801：确定一个日出后边界层高度呈现线性上升趋势且无云影响的基准时刻。在步骤S801中，日出后随着太阳辐射的增强，下垫面开始加热，热通量增加，边界层得以发展，边界层高度的变化表现为有很好的线性趋势，因此，确定一个日出后边界层高度呈现线性上升趋势且无云影响的基准时刻。需要说明的是，基准时刻不等于图1对应实施例中待反演的时段t0至tn中的任一时刻。步骤S802：基于基准时刻以及预设的时间间隔选取预设个验证时刻。在步骤S802具体实现过程中，在基准时刻相邻的10分钟内，以1分钟为间隔选取10个验证时刻。步骤S803：利用小波协方差变换法，计算各个验证时刻对应的边界层高度。在步骤S803具体实现过程中，还可以利用阈值法、梯度法和标准差法计算各个验证时刻对应的边界层高度。步骤S804：在各个验证时刻对应的边界层高度中选取中位数作为检验高度。在步骤S804具体实现过程中，去除10个验证时刻对应的边界层高度中的最大值和最小值，将剩下边界层高度的中位数作为最终检验高度。步骤S805：反演得到验证时刻的边界层高度。在步骤S805具体实现过程中，通过图1对应实施例公开的边界层高度反演方法对验证时刻的边界层高度进行反演，得到验证时刻的边界层高度。例如，将验证时刻在搜索地图中的上一时刻作为目标时刻，返回执行步骤S102，以得到验证时刻的边界层高度。步骤S806：当反演得到的验证时刻的边界层高度与检验高度的差值在预设范围内时，确定反演得到的反演时刻的边界层高度准确。在步骤S806中，由于本文中原始数据的最小距离分辨率为30m，最大距离分辨率为150m，为了避免单个距离库的分辨率带来的结果影响，选取210m的高度作为有效性判别依据，即当反演得到的验证时刻的边界层高度与检验高度的差值小于210m时，认为图1对应实施例反演出的边界层高度准确。基于上述本发明实施例公开的一种边界层高度反演结果的验证方法，选取预设个验证时刻，利用小波协方差变换法，计算各个验证时刻对应的边界层高度，在各个验证时刻对应的边界层高度中选取中位数作为检验高度，反演得到验证时刻的边界层高度，当反演得到的验证时刻的边界层高度与检验高度的差值在预设范围内时，确定反演得到的反演时刻的边界层高度准确，在本方案中，通过小波协方差变换法计算得到验证时刻的边界层高度，然后反演得到验证时刻的边界层高度，当反演得到的验证时刻的边界层高度与检验高度的差值在预设范围内时，确定反演得到的反演时刻的边界层高度准确，以实现对反演结果进行正确性校验的目的。与上述本发明实施例公开的一种边界层高度的反演方法相对应，如图9所示，为本发明实施例公开的一种边界层高度的反演装置的结构图，该装置包括：确定单元901、变换单元902、卷积单元903、分配单元904和计算单元905。其中，确定单元901，用于由预先建立的搜索地图中确定开始进行边界层高度反演的目标时刻。需要说明的是，搜索地图预先基于历史距离校正信号构建，搜索地图的横轴表示n个预设间隔的时刻，纵轴表示k个距离库编号，搜索地图中包含n×k个路径单元，各个路径单元分别对应一个不同的距离库，各个距离库由历史距离校正信号按照相同的距离分辨率划分而成，每一路径单元中存储有对应距离库的噪声比、对应距离库的垂直速度值和历史距离校正信号，n和k为正整数。变换单元902，用于基于目标时刻、历史距离校正信号和小波协方差变换法，在搜索地图中确定起始路径单元和起始路径单元的坐标。在一实施例中，变换单元902，包括：变换子单元，用于基于目标时刻和历史距离校正信号进行小波协方差变换，得到协方差函数。其中，协方差函数为上述本发明实施例中的公式。第一计算子单元，用于利用协方差函数和目标时刻对应的各个路径单元的坐标，计算得到目标时刻对应的各个路径单元的协方差函数值。确定子单元，用于将协方差函数值最大的路径单元作为起始路径单元，并确定起始路径单元在搜索地图中的坐标。卷积单元903，用于利用高斯滤波卷积函数和起始路径单元的坐标进行卷积运算，基于卷积运算的结果从目标时刻对应的各个路径单元中，确定出中心路径单元以及多个目标路径单元，将对应距离库的噪声比大于阈值的目标路径单元，设置为非障碍路径单元。在一实施例中，卷积单元903，包括：选取子单元，用于在搜索地图中以起始路径单元的坐标为中心，选取预设个相邻的路径单元作为卷积窗口。卷积子单元，用于基于卷积窗口中路径单元存储的垂直速度值，以及高斯滤波卷积函数进行卷积运算，得到对应目标时刻的边界层高度的垂直变化速度。第二计算子单元，用于确定目标时刻与目标时刻的上一时刻或下一时刻的时间间隔，计算时间间隔与垂直变化速度的乘积，得到垂直移动距离，将垂直移动距离除以距离分辨率，得到垂直移动距离内的距离库数量，以起始路径单元的纵坐标与距离库数量的和值为纵坐标，从目标时刻的上一时刻或下一时刻对应的各个路径单元中，确定出中心路径单元，基于中心路径单元的坐标、垂直移动距离内的距离库数量和预设的最小搜索深度，得到目标纵坐标范围，目标纵坐标范围为：Hc-bt-bmin至Hc+bt+bmin。其中，HC为搜索深度中心的纵坐标，bt为垂直移动距离内的距离库数量，bmin为预设的最小搜索深度。将横坐标为目标时刻的上一时刻或下一时刻，并且纵坐标在目标纵坐标范围内的路径单元作为目标路径单元。分配单元904，用于基于各个非障碍物路径单元到中心路径单元的距离，为各个非障碍物路径单元设置权重，基于分配值公式和相应的权重计算各个非障碍物路径单元对应的权重分配值，将权重分配值最大的非障碍物路径单元作为基准路径单元。具体的，分配单元904具体用于：利用小波协方差变换法，得到各个非障碍物路径单元的协方差函数值，计算得到在搜索地图中各个非障碍物路径单元到中心路径单元的距离，利用高斯函数，以及各个非障碍物路径单元到中心路径单元的距离，计算得到各个非障碍物路径单元的权重，利用分配值公式、各个非障碍物路径单元的协方差函数值和权重，计算得到各个非障碍物路径单元的权重分配值。计算单元905，用于确定基准路径单元对应的时刻为反演时刻，并确定基准路径单元对应的距离库编号，将距离库编号与距离分辨率的乘积，作为反演时刻的边界层高度。在一实施例中，该分界层高度反演装置还包括：验证单元，用于确定一个日出后边界层高度呈现线性上升趋势且无云影响的基准时刻，基于基准时刻以及预设的时间间隔选取预设个验证时刻，利用小波协方差变换法，计算各个验证时刻对应的边界层高度，在各个验证时刻对应的边界层高度中选取中位数作为检验高度，反演得到验证时刻的边界层高度，当反演得到的验证时刻的边界层高度与检验高度的差值在预设范围内时，确定反演得到的反演时刻的边界层高度准确。本发明实施例中提及的公式在上述实施例均有解释说明，请参见，这里不再赘述。基于上述本发明实施例公开的一种边界层高度的反演装置，在搜索地图中确定起始路径单元和起始路径单元的坐标，利用高斯滤波卷积函数和起始路径单元的坐标进行卷积运算，基于卷积运算的结果从各个路径单元中，确定出中心路径单元以及多个目标路径单元，并设置非障碍路径单元，为各个非障碍物路径单元设置权重，计算各个非障碍物路径单元对应的权重分配值，将权重分配值最大的非障碍物路径单元作为基准路径单元，确定基准路径单元对应的时刻为反演时刻，并确定基准路径单元对应的距离库编号，将距离库编号与距离分辨率的乘积，作为反演时刻的边界层高度。在本方案中，基于起始路径单元的坐标进行卷积运算，模拟得到边界层高度变化范围所对应的非障碍路径单元，并为非障碍路径单元分配权重，并确定权重分配值最大的非障碍物路径单元对应的距离库编号，将距离库编号与距离分辨率的乘积，作为边界层高度，以实现避免小波尺度选择不确定性和反演边界层高度剧烈跳变导致的结果不准确问题的目的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于系统或系统实施例而言，由于其基本相似于方法实施例，所以描述得比较简单，相关之处参见方法实施例的部分说明即可。以上所描述的系统及系统实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。专业人员还可以进一步意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、计算机软件或者二者的结合来实现，为了清楚地说明硬件和软件的可互换性，在上述说明中已经按照功能一般性地描述了各示例的组成及步骤。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本发明的范围。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本发明。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本发明的精神或范围的情况下，在其它实施例中实现。因此，本发明将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
