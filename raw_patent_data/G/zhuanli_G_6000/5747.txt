标题title
兼容多型号热电偶的温度采样电路及其驱动方法
摘要abst
本发明涉及一种兼容多型号热电偶的温度采样电路及其驱动方法，第一基准电压源和电阻R3是接入PT100热电阻时的基准电压和分压电阻，第二基准电压源、电阻R1和电阻R4是接入PT1000热电阻时的基准电压和分压电阻，三极管Q1和电阻R2组成切换基准电压和分压电阻的第一部分，电压跟随器及其后端电路组成切换基准电压和分压电阻的第二部分，电阻R7、电阻R8和三极管Q3组成热电阻分压值处理电路的第一部分，电压放大器为热电阻分压值处理电路的第二部分，采样电压由电压放大器输入单片机。根据接入的热电阻型号不同自动切换基准电压和分压电阻，从而兼容接入多个型号的热电阻，提高了温度采样的灵活性。
权利要求书clms
1.一种兼容多型号热电偶的温度采样电路，其特征在于，包括：第一基准电压源、第二基准电压源、第一端与所述第一基准电压源连接的电阻R3、第一端与所述第一基准电压源连接的电阻R2、基极与所述电阻R2的第二端连接的三极管Q1、第一端与所述三极管Q1的集电极连接的电阻R1、第一端与所述三极管Q1的发射极连接的电阻R4；第一端与所述电阻R4的第二端连接的电阻R7、电压输入端与所述电阻R7的第二端连接的电压放大器、第一端与所述电阻R7的第二端连接的电阻R8、集电极与所述电阻R8的第二端连接的三极管Q3；电压输入端与所述电阻R4的第二端连接的电压跟随器、基极与所述电压跟随器的电压输出端连接的三极管Q2、第一端与所述三极管Q2的集电极连接的电阻R5、线圈第一端与所述三极管Q2的集电极连接的继电器K1；其中，所述三极管Q3的基极与所述电压跟随器的电压输出端连接，所述电阻R7的第一端与所述电阻R4的第二端的连接后被构造为热电阻正极连接端，所述三极管Q3的发射极接地，所述三极管Q3的发射极被构造为热电阻负极连接端；所述电压放大器的电压输出端接单片机的信号输入端，所述继电器K1的线圈第二端接地，所述继电器K1的第一触点开关端与所述电阻R3的第二端连接，所述继电器K1的第二触点开关端与所述热电阻正极连接端连接，所述第一触点开关端与第二触点开关端为同一开关的两个连接端；所述电阻R1的第二端与所述第二基准电压源连接，所述电阻R1的第一端与所述继电器K1的第四触点开关端连接，所述继电器K1的第三触点开关端接地，所述第四触点开关端与所述第三触点开关端为同一开关的两个连接端；所述电阻R5的第二端与所述第一基准电压源连接，所述三极管Q2的发射极接地；所述电阻R1与所述电阻R4的阻值之和为所述电阻R3的阻值的10倍，所述第二基准电压源的电压为所述第一基准电压源的电压的3倍。2.根据权利要求1所述的温度采样电路，其特征在于，所述第一基准电压源的电压满足：在-30℃时，若所述热电阻正极连接端与所述热电阻负极连接端接入PT1000热电阻，则所述三极管Q2的发射极导通，且在150℃时，若所述热电阻正极连接端与所述热电阻负极连接端接入PT100热电阻，则所述三极管Q2的发射极截止。3.根据权利要求1所述的温度采样电路，其特征在于，所述温度采样电路包括：第一保护电阻R6，所述电压跟随器的电压输出端与所述三极管Q3的基极连接后，通过所述第一保护电阻R6与所述三极管Q2的基极连接。4.根据权利要求1所述的温度采样电路，其特征在于，所述三极管Q2与所述三极管Q3为相同型号的三极管。5.根据权利要求1所述的温度采样电路，其特征在于，所述电阻R7的阻值为所述电阻R8的阻值的两倍。6.根据权利要求1-4中任意一项所述的温度采样电路，其特征在于，所述温度采样电路包括：第二保护电阻R9，所述三极管Q3的基极通过所述第二保护电阻R9与所述电压跟随器的电压输出端连接。7.一种兼容多型号热电偶的温度采样电路的驱动方法，其特征在于，用于驱动权利要求1-6中任一项所述的兼容多型号热电偶的温度采样电路，所述方法包括：当接入PT1000热电阻时，三极管Q2的发射结导通，三极管Q1的发射结导通，电流经电阻R2到达第一基准电压源V1，电阻R1、电阻R4和接入的PT1000热电阻对第二基准电压源V2进行分压，热电阻分压值的第一路从电压跟随器进入三极管Q2，保证第二基准电压源V2作为基准电压，热电阻分压值的第二路从电阻R9到达三极管Q3的基极，三极管Q3的发射结导通，三极管Q3的发射结导通时，热电阻分压值的第三路被电阻R7和电阻R8分压，电压放大器对输入的电压进行放大处理后输送到单片机；当接入PT100热电阻时，将所述第二基准电压源V2作为基准电压，三极管Q2的发射结截止，第一基准电压源V1通过电阻R5进入继电器K1的线圈，使继电器K1吸合，第一触点开关端与第二触点开关端导通，第三触点开关端与第四触点开关端导通，三极管Q1截止，第二基准电压源V2、电阻R1以及电阻R4将从采样电路中被断开，第一基准电压源V1以及电阻R3将被接入到采样电路中，电阻R3和接入的PT100热电阻对第一基准电压源V1进行分压，热电阻分压值的第一路通过电压跟随器进入三极管Q2的基极，三极管Q2的发射结截止，继电器K1处于吸合状态，热电阻分压值的第二路将进入三极管Q3的基极，三极管Q3的发射结截止，热电阻分压值的第三路将通过电阻R7到达电压放大器，而不会被电阻R8分压，电压放大器对输入的电压进行放大处理后输送到单片机。
说明书desc
技术领域本发明涉及电力电子技术领域，其中尤其涉及一种兼容多型号热电偶的温度采样电路及其驱动方法。背景技术对于在-30℃到150℃范围内的温度采样，常常通过单板外接PT100热电阻或PT1000热电阻，再根据基准电压和分压电阻，对热电阻进行分压，将分压值进行放大后送入单片机中，由单片机进行计算，得到热电阻阻值与单片机采样电压之间的线性对应关系，再根据该线性对应关系，根据采样电压匹配得到采样温度值。然而，基准电压和分压电阻值均是固定值，一个温度采样电路只能对一种热电阻进行采样，不能同时兼容PT100和PT1000两种热电阻进行温度采样，如下图1中，在不同的电子设备中，需要根据配置PT100或者PT1000热电阻进行电路选择，因而可能需要预留两个单片机的AD采样口，导致温度采样不够灵活。发明内容为克服相关技术中存在的问题，本发明提供一种兼容多型号热电偶的温度采样电路及其驱动方法。本发明实施例的第一方面，提供一种兼容多型号热电偶的温度采样电路，包括：第一基准电压源、第二基准电压源、第一端与所述第一基准电压源连接的电阻R3、第一端与所述第一基准电压源连接的电阻R2、基极与所述电阻R2的第二端连接的三极管Q1、第一端与所述三极管Q1的集电极连接的电阻R1、第一端与所述三极管Q1的发射极连接的电阻R4；第一端与所述电阻R4的第二端连接的电阻R7、电压输入端与所述电阻R7的第二端连接的电压放大器、第一端与所述电阻R7的第二端连接的电阻R8、集电极与所述电阻R8的第二端连接的三极管Q3；电压输入端与所述电阻R4的第二端连接的电压跟随器、基极与所述电压跟随器的电压输出端连接的三极管Q2、第一端与所述三极管Q2的集电极连接的电阻R5、线圈第一端与所述三极管Q2的集电极连接的继电器K1；其中，三极管Q3的基极与所述电压跟随器的电压输出端连接，所述电阻R7的第一端与所述电阻R4的第二端的连接后被构造为热电阻正极连接端，所述三极管Q3的发射极接地，所述三极管Q3的发射极被构造为热电阻负极连接端；所述电压放大器的电压输出端接单片机的信号输入端，所述继电器K1的线圈第二端接地，所述继电器K1的第一触点开关端与所述电阻R3的第二端连接，所述继电器K1的第二触点开关端与所述热电阻正极连接端连接，所述第一触点开关端与第二触点开关端为同一开关的两个连接端；所述电阻R1的第二端与所述第二基准电压源连接，所述电阻R1的第一端与所述继电器K1的第四触点开关端连接，所述继电器K1的第三触点开关端接地，所述第四触点开关端与所述第三触点开关端为同一开关的两个连接端；所述电阻R5的第二端与所述第一基准电压源连接，所述三极管Q2的发射极接地；所述电阻R1与所述电阻R4的阻值之和为所述电阻R3的阻值的10倍，所述第二基准电压源的电压为所述第一基准电压源的电压的3倍。在一个优选的实施例中，所述第一基准电压源的电压满足：在-30℃时，若所述热电阻正极连接端与所述热电阻负极连接端接入PT1000热电阻，则所述三极管Q2的发射极导通，且在150℃时，若所述热电阻正极连接端与所述热电阻负极连接端接入PT100热电阻，则所述三极管Q2的发射极截止。在一个优选的实施例中，所述温度采样电路包括：第一保护电阻R6，所述电压跟随器的电压输出端与所述三极管Q3的基极连接后，通过所述第一保护电阻R6与所述三极管Q2的基极连接。在一个优选的实施例中，所述三极管Q2与所述三极管Q3为相同型号的三极管。在一个优选的实施例中，所述电阻R7的阻值为所述电阻R8的阻值的两倍。在一个优选的实施例中，所述温度采样电路包括：第二保护电阻R9，所述三极管Q3的基极通过所述第二保护电阻R9与所述电压跟随器的电压输出端连接。本发明实施例的第二方面，提供一种兼容多型号热电偶的温度采样电路的驱动方法，用于驱动第一方面中任一项所述的兼容多型号热电偶的温度采样电路，所述方法包括：当接入PT1000热电阻时，三极管Q2的发射结导通，三极管Q1的发射结导通，电流经电阻R2到达第一基准电压源V1，电阻R1、电阻R4和接入的PT1000热电阻对第二基准电压源V2进行分压，热电阻分压值的第一路从电压跟随器进入三极管Q2，保证第二基准电压源V2作为基准电压，热电阻分压值的第二路从电阻R9到达三极管Q3的基极，三极管Q3的发射结导通，三极管Q3的发射结导通时，热电阻分压值的第三路被电阻R7和电阻R8分压，电压放大器对输入的电压进行放大处理后输送到单片机；当接入PT100热电阻时，将所述第二基准电压源V2作为基准电压，三极管Q2的发射结截止，第一基准电压源V1通过电阻R5进入继电器K1的线圈，使继电器K1吸合，第一触点开关端与第二触点开关端导通，第三触点开关端与第四触点开关端导通，三极管Q1截止，第二基准电压源V2、电阻R1以及电阻R4将从采样电路中被断开，第一基准电压源V1以及电阻R3将被接入到采样电路中，电阻R3和接入的PT100热电阻对第一基准电压源V1进行分压，热电阻分压值的第一路通过电压跟随器进入三极管Q2的基极，三极管Q2的发射结截止，继电器K1处于吸合状态，热电阻分压值的第二路将进入三极管Q3的基极，三极管Q3的发射结截止，热电阻分压值的第三路将通过电阻R7到达电压放大器，而不会被电阻R8分压，电压放大器对输入的电压进行放大处理后输送到单片机。本发明的实施例提供的技术方案可以包括以下有益效果：。上述技术方案第一基准电压源和电阻R3是接入PT100热电阻时的基准电压和分压电阻，第二基准电压源、电阻R1和电阻R4是接入PT1000热电阻时的基准电压和分压电阻，三极管Q1和电阻R2组成切换基准电压和分压电阻的第一部分，电压跟随器及其后端电路组成切换基准电压和分压电阻的第二部分，电阻R7、电阻R8和三极管Q3组成热电阻分压值处理电路的第一部分，电压放大器为热电阻分压值处理电路的第二部分，采样电压由电压放大器输入单片机。根据接入的热电阻型号不同自动切换基准电压和分压电阻，从而兼容接入多个型号的热电阻，提高了温度采样的灵活性。应当理解的是，以上的一般描述和后文的细节描述仅是示例性和解释性的，并不能限制本发明。附图说明此处的附图被并入说明书中并构成本说明书的一部分，示出了符合本发明的实施例，并与说明书一起用于解释本发明的原理。图1是根据一示例性实施例示出的一种兼容多型号热电偶的温度采样电路的电路图。图2是根据一示例性实施例示出的一种兼容多型号热电偶的温度采样电路的驱动方法的流程图。具体实施方式这里将详细地对示例性实施例进行说明，其示例表示在附图中。下面的描述涉及附图时，除非另有表示，不同附图中的相同数字表示相同或相似的要素。以下示例性实施例中所描述的实施方式并不代表与本发明相一致的所有实施方式。相反，它们仅是与如所附权利要求书中所详述的、本发明的一些方面相一致的装置和方法的例子。图1是根据一示例性实施例示出的一种兼容多型号热电偶的温度采样电路的电路图，如图1所示，所述兼容多型号热电偶的温度采样电路，包括：第一基准电压源V1、第二基准电压源V2、第一端与所述第一基准电压源V1连接的电阻R3、第一端与所述第一基准电压源V1连接的电阻R2、基极与所述电阻R2的第二端连接的三极管Q1、第一端与所述三极管Q1的集电极连接的电阻R1、第一端与所述三极管Q1的发射极连接的电阻R4；第一端与所述电阻R4的第二端连接的电阻R7、电压输入端与所述电阻R7的第二端连接的电压放大器、第一端与所述电阻R7的第二端连接的电阻R8、集电极与所述电阻R8的第二端连接的三极管Q3；电压输入端与所述电阻R4的第二端连接的电压跟随器、基极与所述电压跟随器的电压输出端连接的三极管Q2、第一端与所述三极管Q2的集电极连接的电阻R5、线圈第一端与所述三极管Q2的集电极连接的继电器K1；其中，所述三极管Q3的基极与所述电压跟随器的电压输出端连接，所述电阻R7的第一端与所述电阻R4的第二端的连接后被构造为热电阻正极连接端T1+，所述三极管Q3的发射极接地，所述三极管Q3的发射极被构造为热电阻负极连接端T1-；所述电压放大器的电压输出端接单片机的信号输入端，所述继电器K1的线圈第二端接地，所述继电器K1的第一触点开关端与所述电阻R3的第二端连接，所述继电器K1的第二触点开关端与所述热电阻正极连接端T1+连接，所述第一触点开关端与第二触点开关端为同一开关的两个连接端；所述电阻R1的第二端与所述第二基准电压源V2连接，所述电阻R1的第一端与所述继电器K1的第四触点开关端连接，所述继电器K1的第三触点开关端接地，所述第四触点开关端与所述第三触点开关端为同一开关的两个连接端；所述电阻R5的第二端与所述第一基准电压源V1连接，所述三极管Q2的发射极接地；所述电阻R1与所述电阻R4的阻值之和为所述电阻R3的阻值的10倍，所述第二基准电压源V2的电压为所述第一基准电压源V1的电压的3倍。其中，继电器K1为HF49FD-005-1H1。上述技术方案第一基准电压源和电阻R3是接入PT100热电阻时的基准电压和分压电阻，第二基准电压源、电阻R1和电阻R4是接入PT1000热电阻时的基准电压和分压电阻，三极管Q1和电阻R2组成切换基准电压和分压电阻的第一部分，电压跟随器及其后端电路组成切换基准电压和分压电阻的第二部分，电阻R7、电阻R8和三极管Q3组成热电阻分压值处理电路的第一部分，电压放大器为热电阻分压值处理电路的第二部分，采样电压由电压放大器输入单片机。根据接入的热电阻型号不同自动切换基准电压和分压电阻，从而兼容接入多个型号的热电阻，提高了温度采样的灵活性。在一个优选的实施例中，所述第一基准电压源V1的电压满足：在-30℃时，若所述热电阻正极连接端T1+与所述热电阻负极连接端T1-接入PT1000热电阻，则所述三极管Q2的发射极导通，且在150℃时，若所述热电阻正极连接端T1+与所述热电阻负极连接端T1-接入PT100热电阻，则所述三极管Q2的发射极截止。在一个优选的实施例中，所述温度采样电路包括：第一保护电阻R6，所述电压跟随器的电压输出端与所述三极管Q3的基极连接后，通过所述第一保护电阻R6与所述三极管Q2的基极连接。在一个优选的实施例中，所述三极管Q2与所述三极管Q3为相同型号的三极管。在一个优选的实施例中，所述电阻R7的阻值为所述电阻R8的阻值的两倍。在一个优选的实施例中，所述温度采样电路包括：第二保护电阻R9，所述三极管Q3的基极通过所述第二保护电阻R9与所述电压跟随器的电压输出端连接。本发明实施例还提供一种兼容多型号热电偶的温度采样电路的驱动方法，用于驱动前述实施例中任一项所述的兼容多型号热电偶的温度采样电路，参见图2所示，所述方法包括：S11、当接入PT1000热电阻时，三极管Q2的发射结导通，三极管Q1的发射结导通。S12、电流经电阻R2到达第一基准电压源V1，电阻R1、电阻R4和接入的PT1000热电阻对第二基准电压源V2进行分压，热电阻分压值的第一路从电压跟随器进入三极管Q2，保证第二基准电压源V2作为基准电压。S13、热电阻分压值的第二路从电阻R9到达三极管Q3的基极，三极管Q3的发射结导通，三极管Q3的发射结导通时，热电阻分压值的第三路被电阻R7和电阻R8分压，电压放大器对输入的电压进行放大处理后输送到单片机。S14、当接入PT100热电阻时，将所述第二基准电压源V2作为基准电压，三极管Q2的发射结截止，第一基准电压源V1通过电阻R5进入继电器K1的线圈，使继电器K1吸合，第一触点开关端与第二触点开关端导通，第三触点开关端与第四触点开关端导通。S15、三极管Q1截止，第二基准电压源V2、电阻R1以及电阻R4将从采样电路中被断开，第一基准电压源V1以及电阻R3将被接入到采样电路中，电阻R3和接入的PT100热电阻对第一基准电压源V1进行分压。S16、热电阻分压值的第一路通过电压跟随器进入三极管Q2的基极，三极管Q2的发射结截止，继电器K1处于吸合状态。S17、热电阻分压值的第二路将进入三极管Q3的基极，三极管Q3的发射结截止，热电阻分压值的第三路将通过电阻R7到达电压放大器，而不会被电阻R8分压，电压放大器对输入的电压进行放大处理后输送到单片机。下面通过一实施例对本申请的驱动方法中接入PT1000热电阻和接入PT100热电阻的切换过程进行解释，首先，在-30℃到150℃的情况下，相同温度下PT1000的阻值接近PT100阻值的10倍关系，将电阻R1和电阻R4的阻值设定为电阻R3的10倍。且设定第二基准电压源V2等于第一基准电压源V1*3，在相同温度下，当分别接入PT100和PT1000时，PT1000的分压值将是PT100的3倍，调整第一基准电压源V1的值，使-30℃时PT1000的分压值足以使三极管Q2发射结导通，150℃时PT100的分压值不能使三极管Q2发射结导通，三极管Q3与三极管Q2使用同一型号的三极管，并且保证第一基准电压源V1可以使继电器K1吸合。进一步地，当没有外接热电阻时，T1+值为高电平第二基准电压源V2，第二基准电压源V2通过电压跟随器到达三极管Q2的1脚，使三极管Q2发射结导通，电阻R6作为保护电阻保护电路，三极管Q2导通3脚接GND， 电阻R5作为保护电阻保护电路，双刀单掷继电器K1断开，电阻R3将不会接入采样端口。进一步地，当接入PT1000热电阻时，即使在-30℃下，最小的热电阻分压值也能保证三极管Q2发射结处于导通状态，所以电阻R3依然不会接入采样电路，因为第二基准电压源V2值为第一基准电压源V1的3倍，三极管Q1的发射结将导通，电流会流经电阻R2到达第一基准电压源V1，所以电阻R2在这里起到保护作用，要承担一定功率。电阻R1，电阻R4和接入的PT1000对第二基准电压源V2进行分压，热电阻分压值第一路从电压跟随器进入三极管Q2保证第二基准电压源V2继续作为基准电压使用，热电阻分压值第二路从电阻R9到达三极管Q3的1脚，因为三极管Q3与三极管Q2使用同一型号的三极管，所以最小的PT1000分压值也会使三极管Q3的发射结导通，三极管Q3导通3脚接地，电阻R9作为保护电阻保护电路。T1+的热电阻分压值在三极管Q3的3脚接地时，热电阻分压值的第三路将会被电阻R7，电阻R8分压，因为电阻R7的阻值为电阻R8两倍，所以T1+ AD将会变为T1+的三分之一。T1+ AD再通过电压放大器进行适当处理，使-30℃~150℃情况下，进入单片机采样口的T1 AD值范围尽可能宽，可以提高温度采样值的精准度。当外接热电阻切换为PT100时，基准电压为第二基准电压源V2，因为相同温度下PT100的电阻值接近PT1000的十分之一，所以即使是最大的PT100分压值通过第二基准电压源V2和电阻R1，电阻R4分压，也不能使三极管Q2的发射结导通，第一基准电压源V1通过电阻R5进入继电器K1的1脚，将会使继电器吸合，电路节点A2接到GND，电路节点A1接到T1+。三极管Q1的2脚被接到GND，三极管Q1将不会被导通，第二基准电压源V2，电阻R1，电阻R4将从采样电路中被断开，A1接到T1+，第一基准电压源V1，电阻R3将被接入到采样电路中，就实现了从分压PT1000到分压PT100的切换。PT100接入电路时，电阻R3和PT100对第一基准电压源V1进行分压，热电阻分压值的第一路通过电压跟随器进入三极管Q2的1脚，因为最大的PT100热电阻分压值也不能使三极管Q2的发射结导通，继电器K1依然处于吸合状态，所以第二基准电压源V2不会接入采样电路。热电阻分压值的第二路将通过电阻R9进入三极管Q3的1脚，因为三极管Q3与三极管Q2型号相同，所以三极管Q3的发射结也不会导通。热电阻分压值的第三路将通过电阻R7到达T1+ AD，而不会被电阻R8分压。T1+ AD将通过电压放大器进行适当处理，使-30℃~150℃情况下，进入单片机采样口的T1 AD值范围尽可能宽，可以提高温度采样值的精准度。如果再将PT100切换为PT1000，因为相同温度下PT1000电阻值约等于PT100电阻值的10倍，所以即使是最小的PT1000热电阻和电阻R3对第一基准电压源V1进行分压，也会通过电压跟随器到达三极管Q2的1脚使三极管Q2的发射结导通，导致三极管Q2的3脚接GND，使继电器K1断开连接，将第二基准电压源V2，电阻R1，电阻R4接入采样电路，第一基准电压源V1，电阻R3从采样电路断开，因此，就实现了PT100和PT1000采样电路之间的自动切换。因为第二基准电压源V2等于第一基准电压源V1*3，电阻R1与电阻R4的阻值等于电阻R3的阻值的10倍，相同温度下，PT1000热电阻的电阻值约等于PT100热电阻的电阻值的10倍，所以相同温度下接入PT1000时的T1+是接入PT100时的3倍。接入PT1000时的T1+会被电阻R7，电阻R8分压为三分之一到达T1+ AD，而接入PT100时的T1+不会被分压，而是直接到达T1+ AD，所以两种情况下，相同温度下的T1+ AD值接近相同，T1+ AD再通过电压放大器到达T1 AD，进入单片机采样口，因此就在硬件上实现了一套采样电路对两种热电阻进行采样，并且保证同样的单片机口电压值对应相同的温度值，经过计算，此种方法对于温度采样的精度可以做到+/-1℃。本领域技术人员在考虑说明书及实践本发明后，将容易想到本发明的其它实施方案。本申请旨在涵盖本发明的任何变型、用途或者适应性变化，这些变型、用途或者适应性变化遵循本发明的一般性原理并包括本发明未发明的本技术领域中的公知常识或惯用技术手段。说明书和实施例仅被视为示例性的，本发明的真正范围和精神由下面的权利要求指出。应当理解的是，本发明并不局限于上面已经描述并在附图中示出的精确结构，并且可以在不脱离其范围进行各种修改和改变。本发明的范围仅由所附的权利要求来限制。
