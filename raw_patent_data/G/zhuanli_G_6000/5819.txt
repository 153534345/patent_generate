标题title
参考电压电路
摘要abst
一种参考电压电路，利用比较器比较参考电压和电容的电压而输出比较信号，控制器根据比较信号确认参考电压以及漏电流的状况。若电容的电压下降过快，控制器决定开关元件的切换频率，以有效维持电容的电压。
权利要求书clms
1.一种参考电压电路，其特征在于，包括：带差参考电路；开关元件；电容，所述电容的第一端通过所述开关元件电连接所述带差参考电路；以及控制器，用以输出具有切换频率的切换信号以控制所述开关元件；其中所述控制器于第一模式下，控制所述开关元件以所述切换频率周期性切换于导通和关断之间，使所述带差参考电路以所述切换频率周期性对所述电容进行充电，且所述电容的第一端的电压作为所述参考电压电路的输出电压；其中所述控制器于第二模式下，控制所述开关元件关断，使得所述电容的第一端的电压下降，所述控制器根据所述电容的第一端的电压的下降速度决定所述切换频率。2.如权利要求1所述的参考电压电路，其特征在于，更包含比较器，具备正端及负端，所述正端耦接所述带差参考电路，所述负端耦接所述电容的第一端，其中所述比较器是在所述第二模式下启动，而所述电容的第一端的电压下降是触发所述比较器输出比较信号至所述控制器，所述控制器根据收到所述比较信号的时间来判断所述电容的第一端的电压的下降速度。3.如权利要求2所述的参考电压电路，其特征在于，所述控制器包括计数器，所述计数器在所述比较器的所述负端的电压下降期间进行计数以产生计数值，且所述计数器于接收到所述比较信号时停止计数，所述控制器根据所述计数值决定所述切换频率。4.如权利要求3所述的参考电压电路，其特征在于，于所述第二模式下，所述控制器判断所述计数值小于临界值，所述控制器提高所述切换频率。5.如权利要求3所述的参考电压电路，其特征在于，于所述第二模式下，所述控制器判断所述计数值大于临界值，所述控制器降低所述切换频率。6.如权利要求1所述的参考电压电路，其特征在于，于所述第一模式下，当所述控制器使所述开关元件导通，所述带差参考电路对所述电容充电使所述电容的第一端的电压达到所述带差参考电路输出的电压。7.如权利要求2所述的参考电压电路，其特征在于，于所述第一模式下所述比较器不启动。8.如权利要求2所述的参考电压电路，其特征在于，所述控制器定期地进入所述第二模式。9.如权利要求2所述的参考电压电路，其特征在于，所述控制器根据触发事件而进入所述第二模式。
说明书desc
技术领域本发明关于一种利用比较器、开关元件以及电容来确认参考电压及漏电流状况的参考电压电路。背景技术如今，微处理器的应用相当广泛，例如人机界面或工业电脑，参考电压的数值为微处理器运作的关键，如何设计提供参考电压的参考电压电路逐渐重要。现存的参考电压电路往往将参考电压储存于电容中，并搭配开关元件的设计更新电容的电压，但电容有漏电流的状况，开关元件往往以预定频率进行导通/不导通，导致参考电压的准确性下降。综观前所述，本发明的发明者思索并设计一种参考电压电路，以期针对现有技术的缺失加以改善，进而增进产业上的实施利用。发明内容有鉴于上述已知的问题，本发明的目的在于提供一种参考电压电路，用以解决现有技术中所面临的问题。基于上述目的，本发明提供一种参考电压电路，其包括带差参考电路、电容、开关元件以及控制器。电容的第一端通过开关元件电连接带差参考电路。控制器用以输出具有切换频率的切换信号以控制开关元件。其中，控制器于第一模式下，控制开关元件以切换频率周期性切换于导通和关断之间，使带差参考电路以切换频率周期性对电容进行充电，且电容的第一端的电压作为参考电压电路的输出电压；控制器于第二模式下，控制开关元件关断，使得电容的第一端的电压下降，控制器根据电容的第一端的电压的下降速度决定切换频率。在本发明的实施例中，参考电压电路更包含比较器，具备正端及负端，正端耦接带差参考电路，负端耦接电容的第一端，其中比较器是在第二模式下启动，而电容的第一端的电压下降触发比较器输出比较信号至控制器，控制器根据收到比较信号的时间来判断电容的第一端的电压的下降速度。在本发明的实施例中，控制器包括计数器，计数器在比较器的负端的电压下降期间进行计数以产生计数值，且计数器于接收到比较信号时停止计数，控制器根据计数值决定切换频率。在本发明的实施例中，控制器于第二模式下，控制器判断计数值小于一临界值，控制器提高切换频率。在本发明的实施例中，控制器于第二模式下，控制器判断计数值大于一临界值，控制器降低切换频率。在本发明的实施例中，控制器于第一模式下，当控制器使开关元件导通，带差参考电路对电容充电使电容的第一端的电压达到带差参考电路输出的电压。在本发明的实施例中，于第一模式下，比较器不启动。在本发明的实施例中，控制器定期地进入第二模式。在本发明的实施例中，控制器根据触发事件而进入第二模式。承上所述，本发明的参考电压电路，于电容电压的下降期间，适当地调整开关元件的切换频率，以有效维持参考电压电路的输出电压。附图说明图1为本发明的参考电压电路的实施例的方块图。图2为本发明的参考电压电路的实施例的电路图。图3为已知参考电压电路的电路图。图4A为本发明的参考电压电路的实施例，于第一模式的开关元件导通的操作示意图。图4B为本发明的参考电压电路的实施例，于第一模式的开关元件不导通的操作示意图。图5为本发明的参考电压电路的实施例的信号波形图。图6为本发明的参考电压电路的另一实施例的电路图。附图标号10:带差参考电路20:储存电路30、104:比较器40、50:控制器41:计数器42:启动器100:带差参考电压电路102:偏压电路产生器106:控制逻辑C:电容CS、CS1:比较信号CV:临界值CP1:第一电容CP2:第二电容EN1、EN2:启动信号SW:开关元件SW1:第一开关SW2:第二开关SS:切换信号Vref:参考电压VC:储存电压具体实施方式本发明的优点、特征以及达到的技术方法将参照例示性实施例及所附图式进行更详细地描述而更容易理解，且本发明可以不同形式来实现，故不应被理解仅限于此处所陈述的实施例，相反地，对本领域技术人员而言，所提供的实施例将使本揭露更加透彻与全面且完整地传达本发明的范畴，且本发明将仅为所附加的权利要求范围所定义。应当理解的是，尽管术语“第一”、“第二”等在本发明中可用于描述各种元件、部件、区域、层及/或部分，但是这些元件、部件、区域、层及/或部分不应受这些术语的限制。这些术语仅用于将一个元件、部件、区域、层及/或部分与另一个元件、部件、区域、层及/或部分区分开。因此，下文讨论的“第一元件”、“第一部件”、“第一区域”、“第一层”及/或“第一部分”可以被称为“第二元件”、“第二部件”、“第二区域”、“第二层”及/或“第二部分”，而不悖离本发明的精神和教示。另外，术语“包括”及/或“包含”指所述特征、区域、整体、步骤、操作、元件及/或部件的存在，但不排除一个或多个其他特征、区域、整体、步骤、操作、元件、部件及/或其组合的存在或添加。除非另有定义，本发明所使用的所有术语具有与本发明所属技术领域的普通技术人员通常理解的相同含义。将进一步理解的是，诸如在通常使用的字典中定义的那些术语应当被解释为具有与它们在相关技术和本发明的上下文中的含义一致的定义，并且将不被解释为理想化或过度正式的意义，除非本文中明确地这样定义。请参阅图1，其为本发明的参考电压电路的实施例的方块图。如图1所示，本发明的参考电压电路的实施例，其包括带差参考电路10、比较器30、储存电路20以及控制器40，储存电路20包括电容C和开关元件SW。控制器40中的启动器42分别发送启动信号EN1及EN2至带差参考电路10及比较器30，启动带差参考电路10及比较器30运作。启动信号EN1和EN2的周期和峰值电压彼此可为相异、相同或是部分重迭，即是，参考电压电路10及比较器30的工作期间可为彼此相异、相同或是部分重迭；另，控制器40也连接储存电路20以输出切换信号SS至开关元件SW，使开关元件SW根据切换信号SS的切换频率导通和关断。带差参考电路10连接储存电路20和比较器30，带差参考电路10发出参考电压Vref至储存电路20及比较器30，对电容C进行充电；比较器30可比较参考电压Vref和电容C的储存电压Vc。电容C的储存电压Vc系参考电压电路的输出电压，提出给其他电路使用。本发明的参考电压电路具有第一模式以及第二模式，下文将详细说明带差参考电路10、比较器30、储存电路20以及控制器40的电路架构，以及在第一模式与第二模式下的作动。于一实施例中，启动信号EN1及EN2的频率相异，带差参考电路10和比较器30的作动时间点相异。于另一实施例中，启动信号EN1及EN2的起时时间点相异而频率相同，同样地，带差参考电路10和比较器30的作动时间点相异。请参阅图2，其为本发明的参考电压电路的实施例的电路图。如图2所示，举例来说，储存电路20包括开关元件SW及电容C，控制器40连接于开关元件SW和比较器30之间，控制器40可于第一模式或第二模式的操作，其余元件的配置则如图1所示。于第一模式下，控制器40发出切换信号SS至开关元件SW，开关元件SW根据切换信号SS的切换频率进行不断导通和关断；当开关元件SW导通时，电容C进行充电直到其储存电压Vc与参考电压电路10输出的参考电压Vref一样，而当开关元件SW关断时，电容C停止充电。因为电容C存在漏电流，所以即使开关元件SW关断，电容C的储存电压Vc仍会逐渐下降；为了不影响使用储存电压Vc的其他电路，开关元件SW并会定期导通对电容C充电，使储存电压Vc能大致上维持在参考电压Vref。电容C的漏电流大小会随着操作环境而变化，例如环境温度越高，则漏电流越大，储存电压Vc的下降速度越快，则开关元件SW需要更频繁地导通对电容C充电，以使储存电压Vc能大致上维持在参考电压Vref；反之，环境温度越低，则漏电流越小，储存电压Vc的下降速度越慢，如果可以降低导通开关元件SW对电容C充电的频率，则可以降低参考电压电路的功耗。因此需要一校正机制来决定切换信号SS的切换频率。当控制器40进入第二模式，控制器40可先控制开关元件SW导通，使储存电压Vc上升至参考电压Vref；接着控制器40可先控制开关元件SW关断，使得参考电压Vref下降，而控制器40可根据参考电压Vref的下降速度来决定切换信号SS的切换频率。在一实施例中，可用比较器30来实现上述机制。比较器30的正端和负端分别接收参考电压Vref和储存电压Vc，比较器30可根据参考电压Vref和储存电压Vc来输出比较信号CS至控制器40；例如，储存电压Vc持续下降直到比较器30的正端和负端之间电压差大于比较器30的偏移电压时，比较器30输出比较信号CS，而控制器40可根据收到比较信号CS的时间来判断电容C的储存电压Vc的下降速度，并根据下降速度来决定切换信号SS的切换频率。在一实施例中，控制器40可使用计数器41来判断电容C的储存电压Vc的下降速度。例如，在第二模式下，当控制器40控制开关元件SW关断，则计数器41可开始计数直到比较器30输出的比较信号CS产生变化，则计数器41停止计数，则计数器41的计数值可代表储存电压Vc下降幅度超过比较器30的偏移电压所需的时间，当计数值越大，表示储存电压Vc下降速度较慢，而计数值越小，表示储存电压Vc下降速度较快；因此，控制器40可根据计数值和临界值CV调整切换频率。在一实施例中，而临界值CV可以是预设值或是上一次量得的计数值。应注意的是，上述计数器41开始计数的时间点仅为举例，非为限制本发明。在一实施例中，计数器41可基于切换信号SS或是另一额外的时钟信号进行计数。开关元件SW可例如为p型或n型晶体管，晶体管可包括薄膜晶体管、底栅极式晶体管、顶栅极式晶体管、立体式的晶体管，当然也可为其他合适的晶体管，并未局限于本发明所列举的范围；控制器40可由微处理器及其对应的处理电路组成，当然其也可为其他优选的处理器，而未局限于本发明所列举的范围。需说明的是，第一模式为本发明的参考电压电路的正常运作模式，第二模式为本发明的参考电压电路的校正模式。控制器40比较计数值和临界值CV，若计数值小于临界值CV，漏电流较大，控制器40提高切换信号SS的切换频率，加快开关元件SW的切换，将储存电压Vc大致上维持在参考电压Vref，降低漏电流的影响。若计数值大于临界值CV，表示漏电流较小，则控制器40可降低切换信号SS的切换频率，减少开关元件SW的切换，进一步降低参考电压电路的功耗。请参阅图3，其为已知参考电压电路的电路图。如图3所示，已知参考电压电路，其包括带差参考电压电路100、偏压电路产生器102、第一电容CP1、第二电容CP2、第一开关SW1、第二开关SW2、比较器104及控制逻辑106。带差参考电压电路100连接于第一开关SW1及第二开关SW2，并连接偏压电路产生器102和控制逻辑106。第一开关SW1连接比较器104的负端，第二开关SW2连接比较器104的正端。第一电容CP1的第一端连接于第一开关SW1和比较器104的负端之间，其第二端连接于接地端GND。第二电容CP2的第一端连接于第二开关SW2和比较器104的正端之间，其第二端连接于及接地端GND，且第二电容CP2的电容值大于第一电容CP1的电容值。控制逻辑106连接于比较器104和带差参考电压电路100之间，并连接第一开关SW1和第二开关SW2，控制逻辑106控制第一开关SW1和第二开关SW2的导通和关断。偏压电路产生器102提供偏压电流IREF至带差参考电压电路100以使其运作，带差参考电压电路100输出带差参考电压。当控制逻辑106使第一开关SW1和第二开关SW2导通时，带差参考电压提供给第一电容CP1和第二电容CP2充电；当第一开关SW1和第二开关SW2关断时，带差参考电压电路100进行休眠，节省功耗。详细而言，当第一电容CP1和第二电容CP2刚开始充电时，第一电容CP1和第二电容CP2上的电压并未明显上升，第一电容CP1和第二电容CP2视同断路，此时，比较器104的正端和负端的电压相同。第一电容CP1和第二电容CP2充电完成，第一电容CP1和第二电容CP2上的电压存在电压差，比较器104输出根据电压差和预设值的状况输出比较信号CS1。通过第一开关SW1和第二开关SW2不断导通和关断，使第一电容CP1和第二电容CP2完成充电，由于第一电容CP1和第二电容CP2的电容值相异，第一电容CP1和第二电容CP2上的电压相异。当第一电容CP1和第二电容CP2上的电压的差小于预设值，比较器104输出比较信号CS1至控制逻辑106，使参考电压电路进入省电模式；当第一电容CP1和第二电容CP2上的电压的差大于预设值，比较器104输出比较信号CS1至控制逻辑106，使参考电压电路进入主动模式。通过前述机制，达到省电效果。然而，第一开关SW1和第二开关SW2的切换频率影响第一电容CP1和第二电容CP2上的电压，第一开关SW1和第二开关SW2的切换频率为固定，因此，已知参考电压电路未能根据电路的实际状况相应调整，省电效果着实有限。本发明的参考电压电路和已知参考电压电路相比之下，本发明的参考电压电路能根据电路的实际状况调整开关元件SW的频率，使电容C更容易完成充电程序，本发明的电路配置与已知参考电压电路相比更为简单，降低制造成本，提高省电效果。请参阅图4A及图4B，其为本发明的参考电压电路于第一模式的开关元件导通及不导通的操作示意图。如图4A所示，并搭配图1和图2，控制器40于第一模式下发出切换信号SS使开关元件SW导通，电容C开始充电。如图4B所示，并搭配图1和图2，控制器40于第一模式下发出切换信号SS使开关元件SW关断，减少带差参考电路10的功耗。根据切换信号SS，开关元件SW不断导通和关断，使电容C的储存电压Vc维持在和参考电压Vref一样的电压，储存电压Vc则能供应至其他电子元件而使其运作正常。在一实施例中，在第一模式，比较器30可不启动，借此降低参考电压电路的功耗；但是此仅为举例，而非为限制本发明。请参考图5，其为本发明的参考电压电路的信号波形图。如图5所示，并搭配图1和图2。于第二模式下，控制器40先控制开关元件SW导通，电容C开始充电，直到电容C的储存电压Vc达到参考电压Vref，控制器40就控制开关元件SW关断，并启动计数器41开始计数。开关元件SW关断期间，因为漏电流，储存电压Vc会逐渐下降；经过时间T，比较器30的正端和负端之间电压差大于比较器30的偏移电压时，比较器30就会输出比较信号CS，而触发计数器41停止计数。当控制器40判断计数器41的计数值小于临界值CV，表示时间T较短而漏电流较大，因此控制器40增加切换频率；因此在第一模式下，开关元件SW根据提高的切换频率的切换信号SS来加快导通和关断的作动程序。反之，当控制器40判断计数值大于临界值CV，表示时间T较长而漏电流较小，因此控制器40降低切换频率，开关元件SW根据降低的切换频率后的切换信号SS放慢导通和关断的作动程序。在一实施例中，控制器40可定期地进入第二模式；例如控制器40于每个校正时间会进入第二模式，判断是否需要调整切换信号SS的切换频率。在一实施例中，控制器40可根据电容C的储存电压Vc的下降速度调整上述校正时间；例如，当控制器40判断电容C的储存电压Vc的下降速度变快，则可缩短校正时间；当控制器40判断电容C的储存电压Vc的下降速度变慢，则可增加校正时间。在一实施例中，控制器40可根据触发事件而进入第二模式，例如，当本发明的参考电压电路所在的系统中温度量测元件量测到系统温度大于预设高温度或低于预设低温度时，温度量测元件可发出触发信号或是中断信号至控制器40，使控制器40进入第二模式来调整切换信号SS的切换频率。在一实施例中，当比较器30的偏移电压是可调整的，则控制器40可根据电容C的储存电压Vc的下降速度调整比较器30的偏移电压；例如，当控制器40判断电容C的储存电压Vc的下降速度变快，则可缩小比较器30的偏移电压；当控制器40判断电容C的储存电压Vc的下降速度变慢，则可增加比较器30的偏移电压。举例来说，当临界值CV设定为10而计数器41产生的计数值为8，则控制器40判断计数值小于临界值CV而拉高切换频率；若计数器41产生的计数值为20，则控制器40判断计数值大于临界值CV而降低切换频率。请参阅图6，其为本发明的参考电压电路的另一实施例的方块图。此实施例与图1的实施例的差异之处在于此实施例的控制器50并未使用临界值CV，而是直接将计数器41的计数值转换成切换频率。例如，当计数器41的计数频率为1Hz，则当比较器30输出的比较信号CS产生变化时计数器41的计数值为10，则控制器50以0.1Hz的切换频率来控制开关元件SW；亦即，此实施例的控制器50可将计数器41的计数值转换成用于控制开关元件SW的切换周期，例如，控制器50可将计数器41计数到此计数值所需的时间直接做为切换周期、或是将计数器41计数到此计数值所需的时间以一预设比例转换成切换周期、或是使用查表法根据一预设对应表将计数器41计数到此计数值所需的时间转换成切换周期。以上所述仅为举例性，而非为限制性者。任何未脱离本发明的精神与范畴，而对其进行的等效修改或变更，均应包含于前附的权利要求范围中。
