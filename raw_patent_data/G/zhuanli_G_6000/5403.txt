标题title
应用于高速ADC输入缓冲器的自适应电流产生电路及方法
摘要abst
本发明提供一种应用于高速ADC输入缓冲器的自适应电流产生电路及方法，所述自适应电流产生电路包括反相器驱动链、分频器、频率检测器、低通滤波器、静态比较器组及可控电流镜；本发明先后依次通过反相器驱动链的转换、分频器的分频、频率检测器的频率检测及低通滤波器的转换，将输入缓冲器的输入模拟信号转换为直流形式的鉴频电压，再通过静态比较器组的多次比较，得到N位数字码，最后通过N位数字码来控制可控电流镜，可控电流镜在N位数字码的控制下为输入缓冲器提供大小可调的输入电流，输入电流的大小与输入模拟信号的频率大小正相关，这不仅可以有效避免过大输入电流造成的功耗浪费，还可以避免过大输入电流或过小输入电流造成的性能恶化。
权利要求书clms
1.一种应用于高速ADC输入缓冲器的自适应电流产生电路，其特征在于，包括：反相器驱动链，采集所述输入缓冲器的输入模拟信号，并将所述输入模拟信号转换为第一时钟信号；分频器，接收所述第一时钟信号，对所述第一时钟信号进行分频处理，得到第二时钟信号；频率检测器，接收参考时钟信号和所述第二时钟信号，对所述第二时钟信号进行频率检测，得到鉴频输出信号；低通滤波器，接收所述鉴频输出信号，将所述鉴频输出信号转换为直流形式的鉴频电压；静态比较器组，接收所述鉴频电压和N个不同大小的参考电压，将所述鉴频电压与N个所述参考电压分别进行比较，得到N位数字码；可控电流镜，接收N位所述数字码，在N位所述数字码的控制下为所述输入缓冲器提供大小可调的输入电流；其中，N为大于等于2的整数。2.根据权利要求1所述的应用于高速ADC输入缓冲器的自适应电流产生电路，其特征在于，所述反相器驱动链包括：第一反相单元，接所述输入模拟信号的一端，进行连续M次反相，得到并输出所述第一时钟信号；第二反相单元，接所述输入模拟信号的另一端，进行一次反相，悬空不输出；其中，M为大于等于2的整数。3.根据权利要求2所述的应用于高速ADC输入缓冲器的自适应电流产生电路，其特征在于，所述第一反相单元包括M个依次级联的CMOS反相器，所述第二反相单元包括一个CMOS反相器。4.根据权利要求3所述的应用于高速ADC输入缓冲器的自适应电流产生电路，其特征在于，在所述第一反相单元中，M个依次级联的所述CMOS反相器中的NMOS管的宽长比以S为公比呈等比数列分布，M个依次级联的所述CMOS反相器中的PMOS管的宽长比以S为公比呈等比数列分布，其中，S为大于等于2的整数。5.根据权利要求4所述的应用于高速ADC输入缓冲器的自适应电流产生电路，其特征在于，所述分频器包括L个依次级联的D触发器，第i个所述D触发器的正向输出端接第i+1个所述D触发器的时钟端，第j个所述D触发器的反向输出端接第j个所述D触发器的输入端，第一个所述D触发器的时钟端接所述第一时钟信号，第L个所述D触发器的正向输出端输出所述第二时钟信号，其中，L为大于等于2的整数，i为1～L-1的整数，j为1～L的整数。6.根据权利要求5所述的应用于高速ADC输入缓冲器的自适应电流产生电路，其特征在于，所述第二时钟信号的频率小于等于所述参考时钟信号频率的一半。7.根据权利要求6所述的应用于高速ADC输入缓冲器的自适应电流产生电路，其特征在于，所述频率检测器包括第一反相器、第二反相器、第三反相器、延时反相器链、或非门、第一与非门、第二与非门、第三与非门、第四与非门及RS触发器，所述第一反相器的输入端接所述参考时钟信号，所述第一反相器的输出端接所述第一与非门的第一输入端，所述第一与非门的输出端接所述异或门的第一输入端，所述异或门的输出端经依次串接的所述第二反相器、所述延时反相器链、所述第三反相器后接所述第一与非门的第二输入端，所述第二与非门的第一输入端接所述第二时钟信号，所述第二与非门的输出端接所述RS触发器的直接置位端，所述第二与非门的输出端还接所述第三与非门的第一输入端和所述第四与非门的第一输入端，所述RS触发器的直接复位端接所述第一与非门的第二输入端，所述RS触发器的正向输出端接所述第三与非门的第二输入端，所述第三与非门的输出端接所述异或门的第二输入端，所述RS触发器的正向输出端还接所述第四与非门的第二输入端，所述第四与非门的输出端接所述第二与非门的第二输入端，所述第四与非门的输出端输出所述鉴频输出信号。8.根据权利要求7所述的应用于高速ADC输入缓冲器的自适应电流产生电路，其特征在于，所述静态比较器组包括N个并行设置的比较器，N个所述比较器的同相输入端分别接所述鉴频电压，N个所述比较器的反相输入端与N个所述参考电压一一对应连接，每个所述比较器的输出端输出一位数字码。9.根据权利要求8所述的应用于高速ADC输入缓冲器的自适应电流产生电路，其特征在于，所述可控电流镜包括：第一电流镜单元，产生第一电流并对所述第一电流进行镜像输出，得到第二电流；第二电流镜单元，包括N条并行设置的电流镜支路，每条所述电流镜支路分别对所述第二电流进行镜像，N条所述电流镜支路与N位所述数字码一一对应连接，所述数字码控制所述电流镜支路的通断状态，N条所述电流镜支路的输出电流汇成所述输入电流。10.一种应用于高速ADC输入缓冲器的自适应电流产生方法，其特征在于，根据所述输入缓冲器的输入模拟信号的频率自动调节所述输入缓冲器的输入电流，所述应用于高速ADC输入缓冲器的自适应电流的产生方法包括：采集所述输入模拟信号，并将所述输入模拟信号转换为第一时钟信号；对所述第一时钟信号进行分频处理，得到第二时钟信号；对所述第二时钟信号进行频率检测，得到鉴频输出信号；将所述鉴频输出信号转换为直流形式的鉴频电压；将所述鉴频电压与N个不同大小的参考电压分别进行比较，得到N位数字码；在N位所述数字码的控制下，通过可控电流镜为所述输入缓冲器提供大小可调的输入电流；其中，N为大于等于2的整数。
说明书desc
技术领域本发明涉及集成电路技术领域，特别是涉及一种应用于高速ADC输入缓冲器的自适应电流产生电路及方法。背景技术超高速ADC常常采用输入缓冲器对输入的模拟信号进行处理再输出到ADC的内部核心电路，用于抑制封装寄生的电容电感对ADC性能的影响并增强输入信号的驱动能力，使输入信号可以更好的被采样电路采样。其中，输入缓冲器的基本结构通常为源跟随器，这使得输入缓冲器的性能和它的电流大小密切相关。当输入信号的频率较低时，输入缓冲器的电流可以比较小就能达到较好的动态性能；当输入信号的频率较高时，输入缓冲器的电流就必须很大才能将满足性能要求。而传统的输入缓冲器一般直接采用很大的电流来当作输入缓冲器的电流，这样在输入信号频率较低的情况下会造成功耗的浪费，并且动态性能相较于小电流还会因为静态工作点的偏移而导致下降。有些输入缓冲器采用手动修调的方式来避免这个问题，即用户根据输入信号的频率自行调节电流大小，但这又会增加使用难度，不便于用户使用，影响实用性。因此，目前亟需一种输入缓冲器输入电流的自适应调节技术方案。发明内容鉴于以上所述现有技术的缺点，本发明的目的在于提供一种应用于高速ADC输入缓冲器的自适应电流产生技术方案，根据输入缓冲器的输入模拟信号的频率自动调节输入缓冲器的输入电流，以避免过大输入电流带来的功耗浪费、过大输入电流或过小输入电流带来的性能恶化。为实现上述目的及其他相关目的，本发明提供的技术方案如下。一种应用于高速ADC输入缓冲器的自适应电流产生电路，包括：反相器驱动链，采集所述输入缓冲器的输入模拟信号，并将所述输入模拟信号转换为第一时钟信号；分频器，接收所述第一时钟信号，对所述第一时钟信号进行分频处理，得到第二时钟信号；频率检测器，接收参考时钟信号和所述第二时钟信号，对所述第二时钟信号进行频率检测，得到鉴频输出信号；低通滤波器，接收所述鉴频输出信号，将所述鉴频输出信号转换为直流形式的鉴频电压；静态比较器组，接收所述鉴频电压和N个不同大小的参考电压，将所述鉴频电压与N个所述参考电压分别进行比较，得到N位数字码；可控电流镜，接收N位所述数字码，在N位所述数字码的控制下为所述输入缓冲器提供大小可调的输入电流；其中，N为大于等于2的整数。可选地，所述反相器驱动链包括：第一反相单元，接所述输入模拟信号的一端，进行连续M次反相，得到并输出所述第一时钟信号；第二反相单元，接所述输入模拟信号的另一端，进行一次反相，悬空不输出；其中，M为大于等于2的整数。可选地，所述第一反相单元包括M个依次级联的CMOS反相器，所述第二反相单元包括一个CMOS反相器。可选地，在所述第一反相单元中，M个依次级联的所述CMOS反相器中的NMOS管的宽长比以S为公比呈等比数列分布，M个依次级联的所述CMOS反相器中的PMOS管的宽长比以S为公比呈等比数列分布，其中，S为大于等于2的整数。可选地，所述分频器包括L个依次级联的D触发器，第i个所述D触发器的正向输出端接第i+1个所述D触发器的时钟端，第j个所述D触发器的反向输出端接第j个所述D触发器的输入端，第一个所述D触发器的时钟端接所述第一时钟信号，第L个所述D触发器的正向输出端输出所述第二时钟信号，其中，L为大于等于2的整数，i为1～L-1的整数，j为1～L的整数。可选地，所述第二时钟信号的频率小于等于所述参考时钟信号频率的一半。可选地，所述频率检测器包括第一反相器、第二反相器、第三反相器、延时反相器链、或非门、第一与非门、第二与非门、第三与非门、第四与非门及RS触发器，所述第一反相器的输入端接所述参考时钟信号，所述第一反相器的输出端接所述第一与非门的第一输入端，所述第一与非门的输出端接所述异或门的第一输入端，所述异或门的输出端经依次串接的所述第二反相器、所述延时反相器链、所述第三反相器后接所述第一与非门的第二输入端，所述第二与非门的第一输入端接所述第二时钟信号，所述第二与非门的输出端接所述RS触发器的直接置位端，所述第二与非门的输出端还接所述第三与非门的第一输入端和所述第四与非门的第一输入端，所述RS触发器的直接复位端接所述第一与非门的第二输入端，所述RS触发器的正向输出端接所述第三与非门的第二输入端，所述第三与非门的输出端接所述异或门的第二输入端，所述RS触发器的正向输出端还接所述第四与非门的第二输入端，所述第四与非门的输出端接所述第二与非门的第二输入端，所述第四与非门的输出端输出所述鉴频输出信号。可选地，所述静态比较器组包括N个并行设置的比较器，N个所述比较器的同相输入端分别接所述鉴频电压，N个所述比较器的反相输入端与N个所述参考电压一一对应连接，每个所述比较器的输出端输出一位数字码。可选地，所述可控电流镜包括：第一电流镜单元，产生第一电流并对所述第一电流进行镜像输出，得到第二电流；第二电流镜单元，包括N条并行设置的电流镜支路，每条所述电流镜支路分别对所述第二电流进行镜像，N条所述电流镜支路与N位所述数字码一一对应连接，所述数字码控制所述电流镜支路的通断状态，N条所述电流镜支路的输出电流汇成所述输入电流。一种应用于高速ADC输入缓冲器的自适应电流产生方法，根据所述输入缓冲器的输入模拟信号的频率自动调节所述输入缓冲器的输入电流，所述应用于高速ADC输入缓冲器的自适应电流的产生方法包括：采集所述输入模拟信号，并将所述输入模拟信号转换为第一时钟信号；对所述第一时钟信号进行分频处理，得到第二时钟信号；对所述第二时钟信号进行频率检测，得到鉴频输出信号；将所述鉴频输出信号转换为直流形式的鉴频电压；将所述鉴频电压与N个不同大小的参考电压分别进行比较，得到N位数字码；在N位所述数字码的控制下，通过可控电流镜为所述输入缓冲器提供大小可调的输入电流；其中，N为大于等于2的整数。如上所述，本发明的应用于高速ADC输入缓冲器的自适应电流产生电路及方法，至少具有以下有益效果：本发明先后依次通过反相器驱动链的转换、分频器的分频、频率检测器的频率检测及低通滤波器的转换，将输入缓冲器的输入模拟信号转换为与输入模拟信号的频率正相关且呈直流形式的鉴频电压，再通过静态比较器组的多次并行比较，得到N位数字码，最后通过N位数字码来控制可控电流镜，可控电流镜在N位数字码的控制下为输入缓冲器提供大小可调的输入电流，输入电流的大小与输入模拟信号的频率大小正相关，即本发明根据输入缓冲器的输入模拟信号的频率大小自适应地调节输入缓冲器的输入电流，这不仅可以有效避免过大输入电流造成的功耗浪费，还可以避免过大输入电流或过小输入电流造成的性能恶化。附图说明图1显示为源跟随器的基本电路图。图2显示为本发明中应用于高速ADC输入缓冲器的自适应电流产生电路的电路图。图3显示为图2中反相器驱动链的电路图。图4显示为图2中分频器的电路图。图5显示为图2中频率检测器的电路图。图6显示为传统普通边沿触发式鉴频鉴相器的电路图。图7显示为图2中静态比较器组的电路图。图8显示为图2中可控电流镜的电路图。图9显示为本发明一实施例中在不同频率输入模拟信号下采用不同输入电流方案的输入缓冲器输出信号有效位数仿真结果示意图。图10显示为本发明一实施例中在不同频率输入模拟信号下采用不同输入电流方案的输入缓冲器输出信号无杂散动态范围仿真结果示意图。具体实施方式以下通过特定的具体实例说明本发明的实施方式，本领域技术人员可由本说明书所揭露的内容轻易地了解本发明的其他优点与功效。本发明还可以通过另外不同的具体实施方式加以实施或应用，本说明书中的各项细节也可以基于不同观点与应用，在没有背离本发明的精神下进行各种修饰或改变。请参阅图1至图10。需要说明的是，本实施例中所提供的图示仅以示意方式说明本发明的基本构想，遂图式中仅显示与本发明中有关的组件而非按照实际实施时的组件数目、形状及尺寸绘制，其实际实施时各组件的型态、数量及比例可为一种随意的改变，且其组件布局型态也可能更为复杂。本说明书所附图式所绘示的结构、比例、大小等，均仅用以配合说明书所揭示的内容，以供熟悉此技术的人士了解与阅读，并非用以限定本发明可实施的限定条件，故不具技术上的实质意义，任何结构的修饰、比例关系的改变或大小的调整，在不影响本发明所能产生的功效及所能达成的目的下，均应仍落在本发明所揭示的技术内容得能涵盖的范围内。如前述在背景技术中所述的，发明人研究发现：近年来，不论是军用市场和民用市场，对于超高速ADC的需求都非常庞大，而输入缓冲器由于其增强驱动能力、抑制封装寄生的功能，被广泛的应用到超高速ADC中，来对输入信号进行预处理；输入缓冲器通常采用源跟随器来作为其基本结构，源跟随器基本电路如图1所示，它由两个NMOS管构成，分别为源跟随器管N1和电流镜管N2，N1的源极和N2的漏极相接，同时相接的该点也作为输出端VOUT，N1的漏极接到电源VDD上，N2的源极接地，N1的栅极接输入模拟信号VIN，N2的栅极接输入电流源信号IIN；该结构具有很高的输入阻抗和较低的输出阻抗，同时由于电流源信号IIN可以调节的比较大，使得输出端VOUT点具有很强的驱动能力，便于驱动采样电路，提高采样电路的性能。但是，由源跟随器作为基本结构的输入缓冲器有一个缺点，就是对于不同频率的输入信号，输入缓冲器的电流所需值不同。对于低频输入信号，输入缓冲器只需要较低的电流就能正常工作。但是对于很高的输入频率，输入缓冲器就必须给很大的电流来保证其性能。而传统的输入缓冲器一般直接给一个很大的电流来保证高频输入信号下的性能，这样做的后果是当输入信号为低频信号时，过大的电流会浪费许多功耗，并且性能相较于小电流还会因为静态工作点受到大电流的影响而有不同程度的下降。此外，有些输入缓冲器采用手动修调的方式来避免这个问题，即用户根据输入信号的频率自行调节电流大小，但这又会增加使用难度，不便于用户使用，影响实用性。基于此，本发明提出一种应用于高速ADC输入缓冲器的自适应电流产生技术方案，根据输入缓冲器的输入模拟信号的频率大小自适应地调节输入缓冲器的输入电流，具体地：先将输入缓冲器的输入模拟信号转换为与输入模拟信号的频率正相关且呈直流形式的鉴频电压，再通过鉴频电压与多个不同大小参考电压的比较，得到多为数字码，最后利用多为数字码来控制可控电流镜，通过可控电流镜为输入缓冲器提供大小可调的输入电流，且输入电流的大小与输入模拟信号的频率大小正相关，以实现自适应调节。首先，如图2所示，本发明提出一种应用于高速ADC输入缓冲器的自适应电流产生电路，其包括：反相器驱动链，采集输入缓冲器的输入模拟信号VIN，并将输入模拟信号VIN转换为第一时钟信号CLK1；分频器，接收第一时钟信号CLK1，对第一时钟信号CLK1进行分频处理，得到第二时钟信号CLK2；频率检测器，接收参考时钟信号CLKR和第二时钟信号CLK2，对第二时钟信号CLK2进行频率检测，得到鉴频输出信号CLK3；低通滤波器，接收鉴频输出信号CLK3，将鉴频输出信号CLK3转换为直流形式的鉴频电压V1；静态比较器组，接收鉴频电压V1和N个不同大小的参考电压VC1～VCN，将鉴频电压V1与N个参考电压VC1～VCN分别进行比较，得到N位数字码D1～DN；可控电流镜，接收N位数字码D1～DN，在N位数字码D1～DN的控制下为输入缓冲器提供大小可调的输入电流IIN；其中，N为大于等于2的整数。详细地，如图3所示，反相器驱动链包括：第一反相单元，接输入模拟信号VIN的一端VIN+，进行连续M次反相，得到并输出第一时钟信号CLK1；第二反相单元，接输入模拟信号VIN的另一端VIN-，进行一次反相，悬空不输出；其中，M为大于等于2的整数，输入模拟信号VIN为差分信号，两端分别为VIN+与VIN-。更详细地，如图3所示，反相器驱动链由第一反相单元和第二反相单元两部分构成，第一反相单元包括M个依次级联的CMOS反相器，接输入模拟信号VIN的一端VIN+，它的功能是将模拟输入信号VIN通过反相器链变为易于处理的第一时钟信号CLK1，同时保留其频率信息；第二反相单元仅包括一个CMOS反相器，接输入模拟信号VIN的另一端VIN-，它经过一级反相器后，直接不需要接入后级的反相器，输出直接悬空即可，因为它的目的只是匹配模拟双端输入信号的负载，保证输入模拟信号VIN的两端VIN+与VIN-的负载是一样的，保持匹配，这样才能够最大程度保证双端输入信号之间的一致性，避免不一致引起的性能下降。更详细地，如图3所示，在第一反相单元中，组成反相器链的反相器由不同宽长比的NMOS管和PMOS管组成，第一个CMOS反相器中PMOS管P1的宽长比和NMOS管N1的宽长比分别记为和这个尺寸通常较小，其目的是为了减小第一个CMOS反相器的输入寄生电容，保证第一个CMOS反相器不会过多影响输入模拟信号VIN的驱动能力而降低ADC的性能；而输入模拟信号VIN的一端VIN+，它经过第一个CMOS反相器后，就会继续经过后续第二个CMOS反相器、第三个CMOS反相器，……，直到第M个CMOS反相器，进行连续M次反相，得到并输出第一时钟信号CLK1，M的数目不做限定，一般为4或5以达到较为合适的驱动能力。同时，在第一反相单元中，除第一个CMOS反相器之外，后续CMOS反相器的宽长比会等比例增大以增强输出信号的驱动能力，即M个依次级联的CMOS反相器中的PMOS管的宽长比以S为公比呈等比数列分布，M个依次级联的CMOS反相器中的NMOS管的宽长比以S为公比呈等比数列分布，其中，S为大于等于2的整数。在本发明的一可选实施例中，S的取值为2，即第一反相单元中第二个CMOS反相器的PMOS管P2和NMOS管N2的宽长比分别为和第一反相单元中第三个CMOS反相器的PMOS管P3和NMOS管N3的宽长比分别为和第一反相单元中第M个CMOS反相器的PMOS管PM和NMOS管NM的宽长比分别为和详细地，如图4所示，分频器包括L个依次级联的D触发器，第i个D触发器的正向输出端Q接第i+1个D触发器的时钟端，第j个D触发器的反向输出端QN接第j个D触发器的输入端Din，第一个D触发器的时钟端接第一时钟信号CLK1，第L个D触发器的正向输出端Q输出第二时钟信号CLK2，其中，L为大于等于2的整数，i为1～L-1的整数，j为1～L的整数。其中，分频器由L个D触发器级联，数目L由所需分频大小决定。第一时钟信号CLK1从第一个D触发器的时钟端输入，正向输出端Q接到下一个D触发器的时钟端，反向输出端QN接到当前触发器的输入端Din，以此类推直到最后一个D触发器，最后一个D触发器的正向输出就是输出信号，即分频后的第二时钟信号CLK2。更详细地，如图4所示，分频器由级联的D触发器构成，它的功能是对较高频率的第一时钟信号CLK1进行分频，得到较低频率的第二时钟信号CLK2。由于分频器是由级联的D触发器构成的，它内部的D触发器数量L决定了分频的程度，而分频的程度取决于输入模拟信号VIN的最大频率和频率检测器中参考时钟信号CLKR的频率。因为频率检测器的参考时钟信号CLKR频率往往都是比较小的，而待检测的时钟信号频率要低于参考时钟信号CLKR的一半，频率检测器才能够正常工作，因此，分频器需要把转化后的第一时钟信号CLK1分频到参考时钟信号CLKR频率的一半及以下，即第二时钟信号CLK2的频率小于等于参考时钟信号CLKR频率的一半，以保证后续电路的正常工作。详细地，如图5所示，频率检测器由逻辑门电路组成，它的功能是检测输入的第二时钟信号CLK2的频率并输出一个占空比随输入信号频率变化的信号，实现频率的检测。它的输入信号为分频器提供的第二时钟信号CLK2和外部时钟电路提供的参考时钟信号CLKR；它的输出信号为鉴频输出信号CLK3，该信号的占空比与第二时钟信号CLK2的频率相关。详细地，如图5所示，频率检测器包括第一反相器T1、第二反相器T2、第三反相器T3、延时反相器链、或非门U1、第一与非门U2、第二与非门U3、第三与非门U4、第四与非门U5及RS触发器RS1，第一反相器T1的输入端接参考时钟信号CLKR，第一反相器T1的输出端接第一与非门U2的第一输入端，第一与非门U2的输出端接异或门U1的第一输入端，异或门U1的输出端经依次串接的第二反相器T2、延时反相器链、第三反相器T3后接第一与非门U2的第二输入端，第二与非门U3的第一输入端接第二时钟信号CLK2，第二与非门U3的输出端接RS触发器RS1的直接置位端，第二与非门U3的输出端还接第三与非门U4的第一输入端和第四与非门U5的第一输入端，RS触发器RS1的直接复位端接第一与非门U2的第二输入端，RS触发器RS1的正向输出端接第三与非门U4的第二输入端，第三与非门U4的输出端接异或门U1的第二输入端，RS触发器RS1的正向输出端还接第四与非门U5的第二输入端，第四与非门U5的输出端接第二与非门U3的第二输入端，第四与非门U5的输出端输出鉴频输出信号CLK3。更详细地，如图5所示的频率检测器由如图6所示的传统普通边沿触发式鉴频鉴相器改进得到，它同样由逻辑门电路构成，触发器采用RS触发器，通过延时反相器链来增加RESET信号的延时，这个反相器链既可以是固定数目的反相器链，也可以是可调的，它的目的是抑制鉴频鉴相器的死区现象。如图6所示，该传统结构输出的信号为UP信号和DOWN信号，UP信号和DOWN信号共同反映了待检测的第二时钟信号CLK2和参考时钟信号CLKR的频率差别和相位差别，实现鉴频鉴相功能。这对于需要精确控制信号相位和频率的锁相环，是很有必要的，但是在本发明中，仅仅只需要判断分频后的第二时钟信号CLK2和参考时钟信号CLKR的频率关系，并且该分频后的第二时钟信号CLK2可以保证其频率低于参考时钟信号CLKR的一半，因此，图6所示的传统普通边沿触发式鉴频鉴相器就不是很适用于本发明。因此，为了解决传统普通边沿触发式鉴频鉴相器的不适用问题，本发明提出了一种频率检测器电路，它的电路图如图5所示。如图5-图6所示，本发明的频率检测器和传统普通边沿触发式鉴频鉴相器不同的地方在于：1)、将参考时钟信号CLKR和UP信号作为输入的第五与非门U6改成仅由参考时钟信号CLKR作为输入的第一反相器T1；2)、去掉了UP输出端以及产生UP信号的第六与非门U7、第七与非门U8；3)、去掉RS触发器RS2，将原本输出到SR触发器结构RS2的两个输入信号改为由参考时钟信号CLKR作为输入的第一反相器T1的输出以及RESET信号输出到第一与非门U2。更详细地，如图5所示的频率检测器可以输出不同占空比的鉴频输出信号CLK3，且鉴频输出信号CLK3的占空比随着输入的第二时钟信号CLK2的频率变化，这个变化为单调的，即输入的第二时钟信号CLK2的频率越大，鉴频输出信号CLK3的占空比越大或者越小，以此来实现频率检测的功能。详细地，低通滤波器可以由模拟低通滤波器构成，它的输入信号是频率检测器输出的鉴频输出信号CLK3，它的输出信号是鉴频电压V1。它的功能是将占空比不等的鉴频输出信号CLK3转化为直流电压信号，即鉴频电压V1，鉴频电压V1的电压大小与鉴频输出信号CLK3的占空比正相关，即鉴频输出信号CLK3的占空比越大，鉴频电压V1越大。它可以由一阶或者高阶滤波器构成，采用阶数越高的滤波器，输出的鉴频电压V1的信号抖动越小。详细地，如图7所示，静态比较器组包括N个并行设置的比较器，比较器的个数N由电流调节的分辨率决定，如果需要更精细的电流调节，则可以增大比较器的个数N；N个比较器的同相输入端分别接鉴频电压V1，N个比较器的反相输入端与N个参考电压VC1～VCN一一对应连接，每个比较器的输出端输出一位数字码，比较器k的输出端输出数字码Dk，k为1～N的整数。更详细地，如图7所示，静态比较器组由静态比较器构成，静态比较器的数目取决于参考电压的个数，参考电压VC1～VCN的大小通常从小到大或者从大到小排列，通过将鉴频电压V1和不同大小的参考电压VC1～VCN分别进行比较，可以得到不同的比较结果，该结果为一个N位的数字码，该数字码的0或者1的数量决定了鉴频电压V1在哪一个电压范围内，以此作为依据来进行后续输入电流的调节。为了抑制前面低通滤波器输出的鉴频电压V1的抖动，比较器可以设计成迟滞比较器，来避免抖动对比较结果产生的影响。详细地，如图8所示，可控电流镜主要基于普通的共源共栅电流镜结构以及控制开关，控制开关根据静态比较器组的比较结果来控制输出电流的大小，从而实现不同大小的电流输出，即为输入缓冲器提供不同大小的输入电流IIN。更详细地，在本发明的一可选实施例中，如图8所示，可控电流镜包括：第一电流镜单元，产生第一电流I1并对第一电流I1进行镜像输出，得到第二电流I2；第二电流镜单元，包括N条并行设置的电流镜支路，每条电流镜支路分别对第二电流I2进行镜像，N条电流镜支路与N位数字码D1～DN一一对应连接，数字码Dk控制对应电流镜支路的通断状态，N条电流镜支路的输出电流汇成第三电流I3，第三电流I3即为输入缓冲器的输入电流IIN。其中，如图8所示，第一电流镜单元包括电阻R1、NMOS管N1及NMOS管N2，NMOS管N1与NMOS管N2构成共源共栅的电流镜，电源VDD经依次串联的电阻R1及NMOS管N1后到地GND，构成电流回路，产生第一电流I1，NMOS管N1与NMOS管N2构成的电流镜对第一电流I1进行镜像输出，在NMOS管N2的漏极得到第二电流I2；第二电流镜单元包括N条并行设置的电流镜支路，PMOS管P00及PMOS管P01构成第一条电流镜支路，且该电流镜支路的输出受PMOS管P001的控制，而PMOS管P001的栅极接数字码D1，PMOS管P00及PMOS管P02构成第二条电流镜支路，且该电流镜支路的输出受PMOS管P002的控制，而PMOS管P002的栅极接数字码D2，以此类推，…，PMOS管P00及PMOS管P0N构成第N条电流镜支路，且该电流镜支路的输出受PMOS管P00N的控制，而PMOS管P00N的栅极接数字码DN，数字码Dk控制对应电流镜支路的通断状态，N条电流镜支路的输出电流汇成输入缓冲器的输入电流IIN。需要说明的是，一位数字码还可以同时控制两条及两条以上的电流镜支路的通断状态，以简化电路结构；第二电流镜单元中N条并行设置的电流镜支路的电流镜像放大倍数可以视情况调整，如可以等比例增加或者减小，以进一步简化电路结构，在此不再叙述。在本发明的一可选实施例中，为了验证上述应用于高速ADC输入缓冲器的自适应电流产生电路的技术效果，在28nm CMOS工艺下，对一个高速ADC输入缓冲器采用上述应用于高速ADC输入缓冲器的自适应电流产生电路。该高速ADC输入缓冲器的输入模拟信号VIN的频率带宽为4G。根据上述指标确定反相器驱动链中第一反相单元的CMOS反相器数量为5，分频器中D触发器数量为3，即8分频，这样分频后的时钟信号频率最大值为500MHz，因此选定参考时钟信号CLKR的频率为1G，以保证其频率至少是分频后的第二时钟信号CLK2的频率的两倍。同时调节反相器的数量使得分频后的第二时钟信号CLK2的频率越小，频率检测器输出信号的占空比越小。低通滤波器采用1阶RC低通滤波器即可，截止频率为1MHz。静态比较器组中的比较器个数为3个，对应的3个参考电压分别为790mV、880mV和940mV，对应的频率为800MHz、1.5GHz、2.5GHz。这样输出的比较器的比较结果就会有四种情况000、001、011、111，分别对应四种输入电流的大小，四种输入电流的大小分别为400μA、600μA、1.2mA、1.5mA。当输入模拟信号VIN的频率低于800MHz时，使用400μA的电流源电流作为输入缓冲器的输入电流；当输入模拟信号VIN的频率在800MHz～1.5GHz之间时，使用600μA的电流源电流作为输入缓冲器的输入电流；当输入模拟信号VIN的频率在1.5GHz～2.5GHz之间时，使用1.2mA的电流源电流作为输入缓冲器的输入电流；当输入模拟信号VIN的频率在2.5GHz以上时，使用1.5mA的电流源电流作为输入缓冲器的输入电流。构建上述电路并进行仿真，为了进行对比，还增加了使用固定1.2mA电流的输入缓冲器以及使用固定1.5mA电流的输入缓冲器。具体仿真结果如图9和图10所示，可以很明显的发现，相比于采用固定电流的电流源，采用本发明的自适应电流产生电路，在各个频率下都能取得不错的性能，输入缓冲器的输出信号的有效位数和无杂散动态范围都较高，在输入模拟信号VIN的频率低于800MHz时，输入缓冲器的输出信号的各种性能指标提升尤其明显。因此，本发明的自适应电流产生电路，可以在较低频的输入模拟信号VIN下，使用较小的输入电流实现较低的功耗和较好的性能，同时整个电流调节是自动的，不需要使用者外部进行修调，便于用户使用。此外，基于与上述应用于高速ADC输入缓冲器的自适应电流产生电路相同的设计构思，本发明还提出一种应用于高速ADC输入缓冲器的自适应电流产生方法，根据输入缓冲器的输入模拟信号的频率自动调节输入缓冲器的输入电流，所述应用于高速ADC输入缓冲器的自适应电流的产生方法包括步骤：S1、采集输入模拟信号，并将输入模拟信号转换为第一时钟信号；S2、对第一时钟信号进行分频处理，得到第二时钟信号；S3、对第二时钟信号进行频率检测，得到鉴频输出信号；S4、将鉴频输出信号转换为直流形式的鉴频电压；S5、将鉴频电压与N个不同大小的参考电压分别进行比较，得到N位数字码；S6、在N位数字码的控制下，通过可控电流镜为输入缓冲器提供大小可调的输入电流；其中，N为大于等于2的整数，步骤S1～S6的具体实现过程可类比参照上述应用于高速ADC输入缓冲器的自适应电流产生电路的工作原理，在此不再叙述。综上所述，在本发明所提供的应用于高速ADC输入缓冲器的自适应电流产生电路及方法中，先后依次通过反相器驱动链的转换、分频器的分频、频率检测器的频率检测及低通滤波器的转换，将输入缓冲器的输入模拟信号转换为与输入模拟信号的频率正相关且呈直流形式的鉴频电压，再通过静态比较器组的多次并行比较，得到N位数字码，最后通过N位数字码来控制可控电流镜，可控电流镜在N位数字码的控制下为输入缓冲器提供大小可调的输入电流，输入电流的大小与输入模拟信号的频率大小正相关，即本发明根据输入缓冲器的输入模拟信号的频率大小自适应地调节输入缓冲器的输入电流，这不仅可以有效避免过大输入电流造成的功耗浪费，还可以避免过大输入电流或过小输入电流造成的性能恶化。上述实施例仅例示性说明本发明的原理及其功效，而非用于限制本发明。任何熟悉此技术的人士皆可在不违背本发明的精神及范畴下，对上述实施例进行修饰或改变。因此，举凡所属技术领域中具有通常知识者在未脱离本发明所揭示的精神与技术思想下所完成的一切等效修饰或改变，仍应由本发明的权利要求所涵盖。
