标题title
一种电子墨水屏的刷新控制方法、存储介质及设备
摘要abst
本发明公开了一种电子墨水屏的刷新控制方法、存储介质及设备，将电子墨水屏的显示区域划分为网格状，每次电子墨水屏的界面内容刷新之后，获取内容发生变化的网格块的数量，并计算内容发生变化的网格块在网格块总数量中的占比值；对内容发生变化的网格块进行GU刷新，并根据获得的占比值更新全局刷新计数值；每一次更新后的全局刷新计数值相对于更新前的全局刷新计数值呈不变或递增；当所述全局刷新计数值大于或等于预设的全局刷新阈值时，触发电子墨水屏的全局刷新，全局刷新后，全局刷新计数值恢复到初始值。利用本发明可以对墨水屏的显示区域进行分区刷新控制，有针对性地进行GC全屏刷新与GU普通刷新的结合，减少残影与闪屏，提高用户体验。
权利要求书clms
1.一种电子墨水屏的刷新控制方法，其特征在于，具体过程为：S1、将电子墨水屏的显示区域划分为M行N列的网格状，每个网格块呈矩形；S2、获取各个网格块的坐标数据并保存；S3、每次电子墨水屏的界面内容刷新之后，根据每个网格块的坐标数据，对每个网格块中本次刷新后的内容与上一次刷新后的内容进行对比，获取内容发生变化的网格块的数量，并计算内容发生变化的网格块在网格块总数量中的占比值；S4、对内容发生变化的网格块进行GU刷新，并根据步骤S3获得的占比值更新全局刷新计数值；每一次更新后的全局刷新计数值相对于更新前的全局刷新计数值呈不变或递增；S5、当所述全局刷新计数值大于或等于预设的全局刷新阈值时，触发电子墨水屏的全局刷新，全局刷新后，全局刷新计数值恢复到初始值。2.根据权利要求1所述的方法，其特征在于，针对每个网格块的GU刷新次数分别进行单独计数，若某个网格块的GU刷新次数超过预设的刷新阈值时，触发该网格块进行GC模式的刷新。3.根据权利要求1所述的方法，其特征在于，步骤S4中，全局刷新计数值的更新过程为：不同的占比值区间映射不同的计数步长，当步骤S3计算得到的占比值落入某一个占比值区间时，当前的全局刷新计数值加上该占比值区间所映射的计数步长，获得最新的全局刷新计数值。4.根据权利要求1所述的方法，其特征在于，步骤S4中，全局刷新计数值的更新过程为：按照预设的呈正相关的线性增加方式计算最新的全局刷新计数值。5.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质内存储有计算机程序，所述计算机程序被处理器执行时实现权利要求1-4任一所述的方法。6.一种具有电子墨水屏的电子设备，其特征在于，包括处理器和存储器，所述存储器用于存储计算机程序；所述处理器用于执行所述计算机程序时，实现权利要求1-4任一所述的方法。
说明书desc
技术领域本发明涉及墨水屏技术领域，具体涉及一种电子墨水屏的刷新控制方法、、存储介质及设备。背景技术电子墨水屏，是一种革新信息显示的技术，可以使屏幕显示出纸张一般的效果。残影是其一直以来难以克服的难点。多次的刷屏，经常会导致电子墨水屏上存在之前显示过的图案的轮廓，从而造成比较差的阅读体验。其原因在于，电子墨水屏的单个点的显示内容会受到相邻点的干扰，因而只刷新两帧图像之间有区别的部分而不影响未变化的部分是做不到的，这样导致的结果就是黑色的墨水黑色程度不相同，白色的墨水有的没有完全白下去，这样就会出现残影。目前在电子墨水屏幕的手持设备中普遍采用的方式是GC全屏刷新与GU普通刷新结合，比如，每用GU普通刷新模式翻固定页数后进行一次GC全屏刷新以消除残影，以获得显示效果与切换效果的一个综合平衡。但这种GC全屏刷新与GU普通刷新结合的策略仅仅只能针对全屏阅读。另外有一些简单的根据刷屏面积直接决定本次用GC全屏刷新或GU普通刷新的机制，其通用性也不够强。在电子墨水屏越来越面临丰富应用的场合，如何在复杂的屏幕内容刷新动作下结合GC全屏刷新与GU普通刷新的策略就成了重要的一点。因此需要一种电子墨水屏的刷新控制方案，能够合理地控制GC全屏刷新与GU普通刷新，提高适用性。发明内容针对现有技术的不足，本发明旨在提供一种电子墨水屏的刷新控制方法、存储介质及设备。为了实现上述目的，本发明采用如下技术方案：一种电子墨水屏的刷新控制方法，具体过程为：S1、将电子墨水屏的显示区域划分为M行N列的网格状，每个网格块呈矩形；S2、获取各个网格块的坐标数据并保存；S3、每次电子墨水屏的界面内容刷新之后，根据每个网格块的坐标数据，对每个网格块中本次刷新后的内容与上一次刷新后的内容进行对比，获取内容发生变化的网格块的数量，并计算内容发生变化的网格块在网格块总数量中的占比值；S4、对内容发生变化的网格块进行GU刷新，并根据步骤S3获得的占比值更新全局刷新计数值；每一次更新后的全局刷新计数值相对于更新前的全局刷新计数值呈不变或递增；S5、当所述全局刷新计数值大于或等于预设的全局刷新阈值时，触发电子墨水屏的全局刷新，全局刷新后，全局刷新计数值恢复到初始值。进一步地，针对每个网格块的GU刷新次数分别进行单独计数，若某个网格块的GU刷新次数超过预设的刷新阈值时，触发该网格块进行GC模式的刷新。进一步地，步骤S4中，全局刷新计数值的更新过程为：不同的占比值区间映射不同的计数步长，当步骤S3计算得到的占比值落入某一个占比值区间时，当前的全局刷新计数值加上该占比值区间所映射的计数步长，获得最新的全局刷新计数值。进一步地，步骤S4中，全局刷新计数值的更新过程为：按照预设的呈正相关的线性增加方式计算最新的全局刷新计数值。本发明还提供一种计算机可读存储介质，所述计算机可读存储介质内存储有计算机程序，所述计算机程序被处理器执行时实现上述方法。本发明还提供一种具有电子墨水屏的电子设备，包括处理器和存储器，所述存储器用于存储计算机程序；所述处理器用于执行所述计算机程序时，实现上述方法。本发明的有益效果在于：利用本发明可以对墨水屏的显示区域进行分区刷新控制，有针对性地进行GC全屏刷新与GU普通刷新的结合，减少残影与闪屏，提高用户体验。具体实施方式以下将对本发明作进一步的描述，需要说明的是，本实施例以本技术方案为前提，给出了详细的实施方式和具体的操作过程，但本发明的保护范围并不限于本实施例。本实施例提供一种电子墨水屏的刷新控制方法，具体过程为：S1、将电子墨水屏的显示区域划分为M行N列的网格状，每个网格块呈矩形；需要说明的是，M、N为大于1的正整数。M、N的具体值可以是默认值，也可以由用户自定义设置。另外，如果M及N值太小，则网格划分很少，各个网格块获取到的内容变化误差较大，而M、N值越大，刷新效果越精准，但功耗可能相对较大。因此可以通过预设M、N的最大阈值和最小阈值，禁止用户设置的M及N值超过最大阈值和最小阈值。S2、获取各个网格块的坐标数据并保存。具体地，获取每个网格块的左上角坐标作为对应的坐标数据。S3、每次电子墨水屏的界面内容刷新之后，根据每个网格块的坐标数据，对每个网格块中本次刷新后的内容与上一次刷新后的内容进行对比，获取内容发生变化的网格块的数量，并计算内容发生变化的网格块在网格块总数量中的占比值；S4、对内容发生变化的网格块进行GU刷新，并根据步骤S3获得的占比值更新全局刷新计数值；每一次更新后的全局刷新计数值相对于更新前的全局刷新计数值呈不变或递增。在本实施例中，作为一种计算方式，不同的占比值区间映射不同的计数步长，当步骤S3计算得到的占比值落入某一个占比值区间时，当前的全局刷新计数值加上该占比值区间所映射的计数步长，获得最新的全局刷新计数值。作为另外一种计算方式，也可以按照预设的呈正相关的线性增加方式计算最新的全局刷新计数值。S5、当所述全局刷新计数值大于或等于预设的全局刷新阈值时，触发电子墨水屏的全局刷新，全局刷新后，全局刷新计数值恢复到初始值在本实施例中，针对每个网格块的GU刷新次数分别进行单独计数，若某个网格块的GU刷新次数超过预设的刷新阈值时，触发该网格块进行GC模式的刷新。对于本领域的技术人员来说，可以根据以上的技术方案和构思，给出各种相应的改变和变形，而所有的这些改变和变形，都应该包括在本发明权利要求的保护范围之内。
