标题title
激光往复扫描系统及其方法
摘要abst
本发明公开一种激光往复扫描系统，包括可执行往复移动操作的扫描设备，扫描设备包括运动控制板卡，运动控制板卡控制测试移动台在平面内作S型往复移动，运动控制板卡对各目标位置所对应的位移偏量进行分析，并根据目标位置获取该目标位置对应的预设位置，当测试移动台移动至光栅尺上任意一预设位置时，镜头控制器控制激光镜头进行扫描。本发明通过运动控制板卡对预设位置、扫描前端区域以及扫描后端区域进行位移补偿分析，可避免扫描获取的点云数据所恢复图像存在的错影问题，在缩短扫描时间的同时，能够提高扫描图形的精确度，实现扫描的点云数据恢复后的测试形貌与待测目标的形貌间的真实性还原。
权利要求书clms
1.一种激光往复扫描系统，其特征在于，包括可执行往复移动操作的扫描设备，所述扫描设备包括运动控制板卡、镜头控制器和测试移动台；所述运动控制板卡分别与测试移动台、光栅尺读数头、镜头控制器进行通信连接；所述镜头控制器与与待测目标处于相对运动的激光镜头连接，用于触发激光镜头对即将移动至目标位置处的待测目标进行扫描；所述光栅尺读数头读取光栅尺的位置，并反馈至运动控制板卡；所述运动控制板卡控制测试移动台在平面内作S型往复移动，所述运动控制板卡对各目标位置所对应的位移偏量进行分析，并根据目标位置获取该目标位置对应的预设位置，当测试移动台移动至光栅尺上任意一预设位置时，镜头控制器控制激光镜头进行扫描。2.如权利要求1所述的激光往复扫描系统，其特征在于，所述扫描设备包括上操作台以及与上操作台处于相对移动状态下的移动测试台。3.如权利要求2所述的激光往复扫描系统，其特征在于，所述扫描设备包括可移动上操作平台，所述可移动上操作平台为测试移动台，所述测试移动台下方固定安装有激光镜头，在XY平面内作往复移动的激光镜头对处于静止状态下的下操作平台上的待测目标进行往复扫描。4.如权利要求2所述的激光往复扫描系统，其特征在于，所述扫描设备包括可移动下操作平台，可移动下操作平台为测试移动台，所述测试移动台上放置有待测目标，静止安装在上操作平台的激光镜头对在XY平面内作往复移动的待测目标进行扫描。5.如权利要求2所述的激光往复扫描系统，其特征在于，所述运动控制板卡对各目标位置所对应的位移偏量进行分析，获得各目标位置对应的预设位置，所述预设位置为运动控制板卡触发激光控制器开始进行扫描的位置信息。6.一种激光往复扫描方法，应用于权利要求1-5任一项所述的激光往复扫描系统，包括步骤：所述运动控制板卡控制测试移动台进行移动，并实时获取测试移动台位置；所述运动控制板卡根据电机转速、扫描间距以及采样频率对各目标位置进行位移偏量补偿计算；所述运动控制板卡判断当前测试移动台位置是否到达各目标位置经位移偏量补偿后的预设位置处，若达到，则运动控制板卡发送控制指令至镜头控制器，镜头控制器触发激光镜头对待测目标进行扫描。7.如权利要求6所述的激光往复扫描方法，其特征在于，各目标位置所对应的位移偏量计算公式为：，为转速转换比例系数，即电机转速与螺母前进位移的转换比例系数，为速比损耗比例系数，取值0.012，为速比，为与丝杠连接的电机转速，为以往数据中采样获取的平均位移偏量，为扫描间距，f为扫描频率。8.如权利要求6所述的激光往复扫描方法，其特征在于，任意一目标位置与该目标位置相对应的预设位置间的位移偏量补偿方法，包括以下步骤：步骤1、提取待测目标在单一方向上的所有目标位置；步骤2、测试移动台移动至任意一目标位置时，运动控制板卡触发镜头控制器发出激光扫描控制指令至激光镜头；步骤3、获取各目标位置下触发的扫描控制指令所扫描的该待测目标在各目标位置下所对应的实际位置；步骤4、将各目标位置下所对应的实际扫描位置分别与对应的各目标位置进行对比，得到各目标位置所对应的位移偏量，各目标位置所对应的位置偏移量等于各目标位置下的实际扫描位置与对应的目标位置间的差值的绝对值；步骤5、对各目标位置所对应的位移偏量求平均，得到平均位移偏量；步骤6、根据步骤5中的平均位移偏量对待测目标下的所有目标位置进行位移偏量补偿。9.如权利要求7或8所述的激光往复扫描方法，其特征在于，所述运动控制板卡控制测试移动台进行扫描前端区域和扫描后端区域的位置补偿，补偿后的扫描区域所对应的扫描长度为，L为需扫描的区域的长度，R为待测目标最长边对应的长度，为位移偏移量补偿系数，取值1.1-1.2之间，x为扫描前端区域或扫描后端区域的位移补偿量，扫描前端和扫描后端区域的位置补偿量相等。10.如权利要求9所述的激光往复扫描方法，其特征在于，扫描前端区域和扫描后端区域中扫描速度处于缓冲状态下的位移补偿量的计算公式：，根据以上公式，可推到出扫描前端区域和扫描后端区域的位移补偿量x。
说明书desc
技术领域本发明属于激光扫描技术领域，具体涉及到应用于彩色共聚焦扫描仪上的激光往复扫描法及其方法。背景技术彩色共聚焦扫描仪的原理是通过激光发出的点光源，对测试运动平台的待测物体进行逐点扫描，扫描以点成线，以线成面，系统记录各扫描点X轴与Y轴的坐标位置以及对应坐标点激光的测量高度值以及光强信息值，通过系统算法将记录的点云数据恢复成测试形貌，在计算机上呈现3D形貌。在系统中通过算法，可对形貌进行图像及轮廓分析。彩色共聚焦扫描仪精度高，测试运动台扫描范围大，它具有比普通显微镜更高的分辨率。现有激光对待测目标常采用单向扫描方式，存在检测效率低，测试时间长等问题，而采用S型往复扫描方式，如图1所示，因测试运动台的移动，导致激光镜头采集位置与实际需测量的目标位置发生偏差，使得待测目标的扫描图形发生错影，影响图形扫描的精确性。发明内容本发明公开了一种激光往复扫描系统，解决了现有扫描技术中存在的实际扫描位置与目标位置存在偏差，导致扫描获取的图像发生严重错影等。本发明在其一个应用方面中提供了一种激光往复扫描系统，包括可执行往复移动操作的扫描设备，扫描设备包括运动控制板卡、镜头控制器和测试移动台；运动控制板卡分别与测试移动台、光栅尺读数头、镜头控制器进行通信连接；镜头控制器与与待测目标处于相对运动的激光镜头连接，用于触发激光镜头对即将移动至目标位置处的待测目标进行扫描；光栅尺读数头读取光栅尺的位置，并反馈至运动控制板卡；运动控制板卡控制测试移动台在平面内作S型往复移动，运动控制板卡对各目标位置所对应的位移偏量进行分析，并根据目标位置获取该目标位置对应的预设位置，当测试移动台移动至光栅尺上任意一预设位置时，镜头控制器控制激光镜头进行扫描。优选地，所述扫描设备包括上操作台以及与上操作台处于相对移动状态下的移动测试台。优选地，所述扫描设备包括可移动上操作平台，所述可移动上操作平台为测试移动台，测试移动台下方固定安装有激光镜头，在XY平面内作往复移动的激光镜头对处于静止状态下的下操作平台上的待测目标进行往复扫描。优选地，所述所述扫描设备包括可移动下操作平台，可移动下操作平台为测试移动台，测试移动台上放置有待测目标，静止安装在上操作平台的激光镜头对在XY平面内作往复移动的待测目标进行扫描。优选地，所述运动控制板卡对各目标位置所对应的位移偏量进行分析，获得各目标位置对应的预设位置，所述预设位置为运动控制板卡触发激光控制器开始进行扫描的位置信息。优选地，一种激光往复扫描方法，包括步骤：运动控制板卡控制测试移动台进行移动，并实时获取测试移动台位置；运动控制板卡根据电机转速、扫描间距以及采样频率对各目标位置进行位移偏量补偿计算；运动控制板卡判断当前测试移动台位置是否到达各目标位置经位移偏量补偿后的预设位置处，若达到，则运动控制板卡发送控制指令至镜头控制器，镜头控制器触发激光镜头对待测目标进行扫描。优选地，各目标位置所对应的位移偏量计算公式为：，为转速转换比例系数，即电机转速与螺母前进位移的转换比例系数，为速比损耗比例系数，取值0.012，为速比，为与丝杠连接的电机转速，为以往数据中采样获取的平均位移偏量，为扫描间距，f为扫描频率。优选地，任意一目标位置与该目标位置相对应的预设位置间的位移偏量补偿方法，包括以下步骤：步骤1、提取待测目标在单一方向上的所有目标位置；步骤2、测试移动台移动至任意一目标位置时，运动控制板卡触发镜头控制器发出激光扫描控制指令至激光镜头；步骤3、获取各目标位置下触发的扫描控制指令所扫描的该待测目标在各目标位置下所对应的实际位置；步骤4、将各目标位置下所对应的实际扫描位置分别与对应的各目标位置进行对比，得到各目标位置所对应的位移偏量，各目标位置所对应的位置偏移量等于各目标位置下的实际扫描位置与对应的目标位置间的差值的绝对值；步骤5、对各目标位置所对应的位移偏量求平均，得到平均位移偏量；步骤6、根据步骤5中的平均位移偏量对待测目标下的所有目标位置进行位移偏量补偿。优选地，所述运动控制板卡控制测试移动台进行扫描前端区域和扫描后端区域的位置补偿，补偿后的扫描区域所对应的扫描长度为，L为需扫描的区域的长度，R为待测目标最长边对应的长度，为位移偏移量补偿系数，取值1.1-1.2之间，x为扫描前端区域或扫描后端区域的位移补偿量，扫描前端和扫描后端区域的位置补偿量相等。优选地，扫描前端区域和扫描后端区域中扫描速度处于缓冲状态下的位移补偿量的计算公式：，根据以上公式，可推到出扫描前端区域和扫描后端区域的位移补偿量x。优选地，一种存储介质，非暂时性地存储计算机可读指令，当所述计算机可读指令由计算机执行时可以执行激光往复扫描方法。有益效果：本发明提供的激光扫描技术，通过运动控制板卡触发激光控制器对待测目标进行S型往复扫描操作，相比单向扫描缩短一半的扫描时长，并通过运动控制板卡对目标位置和预设位置间的位置偏量进行补偿分析，能够精准地控制激光实际扫描的位置与目标位置相一致，提高扫描图形的数据的精确度，为后期形貌展示提供可靠的数据。本发明通过对扫描方向的前端区域和后端区域进行位置偏移补偿，以获得待测目标在扫描过程中的最小扫描长度，在提高扫描效率的同时能够保证待测目标上的扫描间距相等，提高扫描图形的精确度，实现扫描的点云数据恢复后的测试形貌与待测目标的形貌间的真实性还原。附图说明图1为未进行位移偏量补偿前的扫描图像；图2为待测目标沿X轴作为扫描方向的扫描路径的示意图；图3为待测目标沿Y轴作为扫描方向的扫描路径的示意图;图4为一实施例的位移偏量计算的示意图；图5为扫描前端区域和扫描后端区域的示意图；图6为进行位移偏量补偿前的扫描图像；图7为测试移动台的结构示意图。具体实施方式为使本公开实施例的目的、技术方案和优点更加清楚，下面将结合本公开实施例的附图，对本公开实施例的技术方案进行清楚、完整地描述。显然，所描述的实施例是本公开的一部分实施例，而不是全部的实施例。基于所描述的本公开的实施例，本领域普通技术人员在无需创造性劳动的前提下所获得的所有其他实施例，都属于本公开保护的范围。除非另外定义，本公开使用的技术术语或者科学术语应当为本公开所属领域内具有一般技能的人士所理解的通常意义。本公开中使用的“第一”、“第二”以及类似的词语并不表示任何顺序、数量或者重要性，而只是用来区分不同的组成部分。同样，“一个”、“一”或者“该”等类似词语也不表示数量限制，而是表示存在至少一个。“包括”或者“包含”等类似的词语意指出现该词前面的元件或者物件涵盖出现在该词后面列举的元件或者物件及其等同，而不排除其他元件或者物件。“连接”或者“相连”等类似的词语并非限定于物理的或者机械的连接，而是可以包括电性的连接，不管是直接的还是间接的。彩色共聚焦扫描仪的原理是通过激光发出的点光源，对测试运动平台的待测物体进行逐点扫描，扫描以点成线，以线成面，系统记录各扫描点X轴与Y轴的坐标位置以及对应坐标点激光的测量高度值以及光强信息值，通过软件算法将记录的点云数据恢复成测试形貌，在计算机上呈现3D形貌。在系统中通过软件算法，可对形貌进行图像及轮廓分析。彩色共聚焦扫描仪精度高，测试运动台扫描范围大，它具有比普通显微镜更高的分辨率。发明人注意到，在彩色激光进行扫描时，通过设置电机转速、扫描间距、采样频率，可控制单一方向上扫描范围，现有的扫描方式是通过对待测目标进行单向扫描限定，由于控制测试运动台的控制器触发激光镜头的镜头控制器对待测目标进行扫描的过程中，存在时间差，导致扫描效果出现错影等问题。在设置采样频率的时候，考虑到若采样频率参数设置过大，会造成扫描点数据丢失，无法实现等间距扫描采样，若采样频率参数设置过小，会造成扫描效率低的问题。另外，可通过控制扫描间距调节相邻两次扫描位置的相对位置，以满足不同的待测目标形状、尺寸以及扫描精度的要求，但是发明人发现在对待测目标进行激光扫描时，采用S型往复扫描相比单向扫描节约一半的扫描时间，在节约扫描时间的同时，会引发另一严重的问题，即扫描处的待测目标发生错影的程度远大于单向扫描发生错影的程度，严重影响激光扫描处数据的精确度，无法满足待测目标的尺寸要求。待测目标可为形状规则、形状不规则的物体，具体：正方形、长方形、三角形等其他形状。在激光扫描设备包括测试移动台，待测目标放置在移动测试台，激光镜头安装在上操作台。本发明公开至少一实施例提供一种激光往复扫描系统，该扫描系统包括可执行往复移动操作的扫描设备，扫描设备包括运动控制板卡；运动控制板卡分别与测试移动台、光栅尺读数头、镜头控制器进行通信连接，运动控制板卡控制测试移动台在平面内作S型往复移动；镜头控制器与与待测目标处于相对运动的激光镜头连接，用于触发激光镜头对移动至目标位置处的待测目标进行扫描；光栅尺读数头读取光栅尺的位置，并反馈至运动控制板卡，当测试移动台移动至光栅尺上任意一预设位置时，镜头控制器控制激光镜头进行扫描；任意一预设位置与该预设位置所对应的目标位置间的位移偏量通过运动控制板进行补偿分析获得。其中，测试移动台和激光镜头安装在扫描设备上。其中，将待测目标上需进行激光扫描高度的位置作为目标位置。本公开一些实施例中提供沿测试移动台移动方向上的相邻的两预设位置间的间距相等，且等于相邻的两目标位置间的间距，该间距为设定的扫描间距，扫描间距最小取0.1um，且任意一目标位置均有与之相对应的预设位置，任意一目标位置与该目标位置相对应的预设位置间存在位移偏量。各目标位置对应的位移偏量按理为，v表示为测试移动台沿测试方向上的移动速度，v=d*f，d为单次扫描间距，f为采样频率，为以光栅尺读数头反馈位置信息开始计时到激光镜头完成扫描所需的延迟时间。具体时间t=t1+t2+t3；t1为光栅尺读数头从读取位置信息到发送至运动控制板卡所需的时间；t2为运动控制板卡从接收光栅尺读数头反馈的位置信息到运动控制板卡发送扫描控制指令至镜头控制器所需的时间；T3为镜头控制器从接收运动控制板卡发送的扫描控制指令到激光镜头完成扫描所需的时间。由于扫描的精确度要求，从光栅尺读数头反馈位置信息开始计时到激光镜头完成扫描所需的延迟时间无法精准地获取，需借助某一电机转速下实际扫描过程中扫描图形的位移偏移程度以及扫描间距、扫描频率对光栅尺上需扫描的各目标位置所对应的补偿前的预设位置进行补偿计算。本公开一些实施例公开了一种位移偏量的计算公式，以满足不同电机转速下的位移偏量数值的计算，具体位移偏量计算公式：，为转速转换比例系数，即电机转速与螺母前进位移的转换比例系数，为速比损耗比例系数，取值0.012，为速比，为与丝杠连接的电机转速，为以往数据中采样获取的平均位移偏量，为扫描间距，f为扫描频率。因此，本公开一些实施例还提供任意一目标位置与该目标位置相对应的预设位置间的位移偏量补偿，即沿测试移动台移动方向的相反方向进行位移偏移量计算，此处激光采用S型往复扫描，规定测试移动台进行奇次数扫描时，沿扫描方向上的各目标位置对应的x坐标等间距增大，当测试移动台进行偶次数扫描时，沿扫描方向上的各目标位置对应的x坐标等间距减小，此处的等间距为相邻两次扫描的距离差。本公开一些实施例还提供了判断待测目标的长宽尺寸，筛选出待测目标边长最长的一待测目标方向作为扫描长度方向，可缩短测试移动台的扫描时间，如图2和3所示。任意一目标位置与该目标位置相对应的预设位置间的位移偏量补偿方法，包括以下步骤：步骤1、提取待测目标在单一方向上的所有目标位置；步骤2、测试移动台移动至任意一目标位置时，运动控制板卡触发镜头控制器发出激光扫描控制指令至激光镜头；步骤3、获取各目标位置下触发的扫描控制指令所扫描的该待测目标在各目标位置下所对应的实际位置；步骤4、将各目标位置下所对应的实际扫描位置分别与对应的各目标位置进行对比，得到各目标位置所对应的位移偏量，各目标位置所对应的位置偏移量等于各目标位置下的实际扫描位置与对应的目标位置间的差值的绝对值；步骤5、对各目标位置所对应的位移偏量求平均，得到平均位移偏量；步骤6、根据步骤5中的平均位移偏量对待测目标下的所有目标位置进行位移偏量补偿，以准确获得各目标位置所对应的预设位置，各目标位置与该目标位置对应的预设位置间是相互映射的，以保证激光镜头每次对待测目标表面扫描的位置间距相同，提高了后期待测目标形貌还原的真实性。另外，如图4所示，在一些实施例中，给出另一种计算任意一目标位置与该目标位置相对应的预设位置间的位移偏量补偿方法。可筛选初次扫描获取的待测目标边线所在的位置与待测目标放置在测试移动台上的实际位置间的相对位移，并将该相对位移作为位移偏量，通过对待测目标预设的预测目标位置进行位移偏量补偿。例如，具体补偿方法，当测试移动台进行奇次数扫描时，各目标位置经位置偏移补偿后的预设位置为目标位置的X坐标数值减去位移偏量数值，即为该目标位置所对应的预设位置的位置坐标，当测试移动台进行偶次数扫描时，各目标位置经位置偏移补偿后的预设位置为目标位置的X坐标数值加上位移偏量数值，即为该目标位置所对应的预设位置的位置坐标，在根据目标位置获取该目标位置对应的预设位置时，目标位置与该目标位置相对应的预设位置间的Y坐标不变。在这种模式下，本公开一些实施例在对待测目标进行扫描前，运动控制板卡控制测试移动台进行扫描前端区域和扫描后端区域的位置补偿，以保证测试移动台进行调转方向的过程中，存在测试移动台相对于激光镜头出现加速和减速的情况，若不进行扫描前端区域和扫描后端区域的位置补偿，会造成采样频率下激光探头扫描至待测目标上的扫描间距不均匀，保证测试移动台处于匀速状态下时，激光探头进行待测目标的扫描，但是若扫描前端区域和扫描后端区域间的位置补偿过大，会增加扫描时长，降低扫描效率。如图5所示，图5记载了扫描速度处于缓冲状态下的测试移动台在扫描前端区域和扫描后端区域的位移补偿所展示的示意图。扫描前端区域和扫描后端区域中扫描速度处于缓冲状态下的位移补偿计算公式：；根据上述公式可推到出扫描前端区域和扫描后端区域所对应的位移补偿量x，为了保证激光镜头扫描待测目标时的速度处于匀速状态，需满足扫描前端区域和扫描后端区域的位置偏移数值大于位移补偿量x，考虑到扫描过程中的耗时情况以及扫描精度，对位置偏移数值进一步进行限定。进而待测目标在扫描过程中设置的扫描长度为：，L为需扫描的区域的长度，R为待测目标最长边对应的长度，为位移偏移量补偿系数，取值1.1-1.2之间，位移偏移量补偿系数处于1.1-1.2之间时，扫描效率最高，x为扫描前端区域或扫描后端区域的位移补偿量,如图6为进行位移补偿后的扫描图形。如图7所示，本公开至少一实施例中的测试移动台包括第一电机3、第二电机4、第一丝杠5、第二丝杠6、第一螺母7、第二螺母8和移动平台9，第一电机3通过联轴器与第一丝杠5连接，第二电机4通过联轴器与第二丝杠6连接，第一丝杠5与第一螺母7采用螺纹配合，第二丝杠6与第二螺母8采用螺纹配合，第一螺母7和第二螺8母分别与移动平台的相邻侧面连接。移动平台9包括上移动平台1和下移动平台2，上移动平台1和下移动平台2间滑动配合，上移动平台1与第一螺母7固定连接，下移动平台2与第二螺母8固定连接。当与下移动平台2相连接的第二丝杠转动带动上移动平台以及与上移动平台1相连接的第一螺母7、第一丝杠5和第一电机3同步进行移动。本发明公开的一实施例中包括两组光栅读数设备，每组光栅读数设备均包含一光栅尺和一光栅尺读数头，一组光栅读数设备测量待测目标长度方向，另一组光栅读数设备测量待测目标宽度方向，对待测目标进行扫描时，以待测目标长度方向作为扫描前进方向。在一些实施例中，扫描设备的上操作平台为测试移动台，激光镜头安装在测试移动台上，用于控制激光镜头在xy平面内的移动，对处于静止状态下的下操作平台上的待测目标进行S型往复扫描。在另一些实施例中，扫描设备的下操作平台为测试移动台，待测目标放置在测试移动台上，用于控制待测目标在水平面内的移动，激光镜头安装在处于静止状态的扫描设备的上操作平台上。本公开至少一实施例提供一种激光往复扫描方法，该扫描方法包括：运动控制板卡控制测试移动台进行移动，并实时获取测试移动台位置；运动控制板卡根据电机转速、扫描间距以及采样频率对各目标位置进行位移偏量补偿计算；运动控制板卡判断当前测试移动台位置是否到达各目标位置经位移偏量补偿后的预设位置处，若达到，则运动控制板卡发送控制指令至镜头控制器，镜头控制器触发激光镜头对待测目标进行扫描。本公开至少一实施例提供在对待测目标进行扫描时，不对待测目标所在区域的扫描前端区域和扫描后端区域进行扫描目标位置的位移偏量补偿。本公开至少一实施例提供在对待测目标进行扫描时，对待测目标所在区域的扫描前端区域和扫描后端区域中扫描速度处于缓冲状态下的位移补偿，在此不做具体的阐述，在上文中已具体描述。本公开至少一实施例提供一种存储介质，非暂时性地存储计算机可读指令，当所述计算机可读指令由计算机执行时可以执行激光往复扫描方法以上所述实施例仅表达了本发明的几种实施方式，其描述较为具体和详细， 但并不能因此而理解为对本发明专利范围的限制。应当指出的是，对于本领域 的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干变形和 改进，这些都属于本发明的保护范围。因此，本发明专利的保护范围应以所附 权利要求为准。
