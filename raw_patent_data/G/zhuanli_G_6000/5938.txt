标题title
基于Boosting-Unet分割网络的医学影像分割方法
摘要abst
本发明提供了基于Boosting‑Unet分割网络的医学影像分割方法，该方法通过将总分割网络的训练划分为m个子分割网络的训练，训练第k个子分割网络时，继承了第k‑1个子分割网络的卷积核参数，这样大大减少了每一次训练的卷积核参数数量，提高网络的学习能力和噪声、影像模糊的抵抗力，另外设置多个子分割网络提高了网络的效率，又实现对影像数据特征深度地提取，对影像数据的精细分割，以此提高总分割网络对影像数据特征的学习能力，增强对噪声扰动信息的鲁棒性，进一步提高图像分割的性能。
权利要求书clms
1.基于Boosting-Unet分割网络的医学影像分割方法，其特征在于，包括以下步骤：S1：获取目标医学影像数据集，对该数据集作预处理，并将数据集分为训练集和验证集；S2：根据步骤S1所述数据集规模规划总分割网络层数，构建单层分割网络，利用单层分割网络构建总分割网络；S3：将步骤S2所得到的总分割网络划分为个子分割网络，利用训练集对个子分割网络进行训练；S4：将验证集的原始医学影像输入步骤S3所得到的训练好的总分割网络中，输出标注分割的影像数据结果，对比选择最优的总分割网络。2.根据权利要求1所述的基于Boosting-Unet分割网络的医学影像分割方法，其特征在于，所述步骤S1中，所述对目标医学影像数据集作预处理，包括Ⅰ：对医学影像数据进行截断和归一化，具体使用以下公式：其中为目标医学影像数据集中的单张医学影像数据，为该单张医学影像数据中的最小值， 为该单张医学影像数据中的最大值，为该单张医学影像数据经截断和归一化后重新生成的医学影像数据；目标医学影像数据集由原始医学影像和其对应的已标注分割的医学影像构成。3.根据权利要求1所述的基于Boosting-Unet分割网络的医学影像分割方法，其特征在于，所述步骤S2中，单层分割网络即总分割网络的第层，其中，单层分割网络由编码块和解码块组成，编码块对输入的影像数据进行特征数据提取，解码块输出标注分割的影像数据，利用单层分割网络构建总分割网络，其中输入的影像数据输入到第1层的编码块，第1层到第n层的编码块按输出—输入依次单向串联在一起，构成编码路径，第n层的编码块的输出单向连接到该层的解码块的输入，第n层到第1层的解码块按输出—输入依次单向串联在一起，构成解码路径，最后第1层的解码块输出标注分割的医学影像数据，另外同层的编码块会跳跃连接到解码块。4.根据权利要求3所述的基于Boosting-Unet分割网络的医学影像分割方法，其特征在于，所述总分割网络的第i层，其中，构建该层的编码块包括以下步骤：Ⅰ：确定所需卷积核个数，初始化卷积核，选择激活函数和池化操作，具体包括如下操作：选择两个卷积核，其中单个卷积核参数为3×3×3，即高度为3，宽度为3，通道数为3的三维矩阵数据，并以随机小数矩阵的形式对卷积核参数进行初始化；单个卷积核层数设置为n×32，其中n代表属于处于总分割网络第n层，移动步长设置为一个像素步长，并采用输出影像数据大小不变的零填充；激活函数选择Relu函数，池化操作选择核为2×2的最大池化；Ⅱ：建立输入影像数据的特征提取流程。5.根据权利要求4所述的基于Boosting-Unet分割网络的医学影像分割方法，其特征在于，所述步骤Ⅱ中输入影像数据的特征提取流程具体包括以下步骤：①将该层输入的影像数据与单个卷积核进行卷积操作，提取特征数据；②对所提取的特征数据使用Relu函数进行非线性函数拟合激活；③激活后利用最大池化缩小特征数据大小；根据卷积核数量重复上述流程。6.根据权利要求3所述的基于Boosting-Unet分割网络的医学影像分割方法，其特征在于，所述总分割网络的第层，构建该层的解码块包括以下步骤：Ⅰ：确定所需卷积核个数，初始化卷积核，选择上采样方法和激活函数，具体包括如下操作：选择四个卷积核，其中两个卷积核参数为3×3×3，即高度为3，宽度为3，通道数为3的三维矩阵数据，并以随机小数矩阵的形式对卷积核参数进行初始化；两个卷积核参数为1×1×1，即高度为1，宽度1，通道数为1，并以随机小数矩阵的形式对卷积核参数进行初始化；两个3×3×3卷积核层数设置为n×32，其中代表属于处于总分割网络第n层，两个1×1×1卷积核层数设置为2；移动步长均设置为一个像素步长，并采用输出影像数据大小不变的零填充；上采样方法选择三线性差值，激活函数选择Sigmoid函数；Ⅱ：建立输入编码后特征数据的处理流程。7.根据权利要求6所述的基于Boosting-Unet分割网络的医学影像分割方法，其特征在于，所述步骤Ⅱ中输入编码后特征数据的处理流程具体包括以下步骤：①通过跳跃连接与同级层编码块所提取的特征数据进行拼接，得到2倍原通道数数据的特征数据；②将该层输入的影像数据与单个3×3×3卷积核和单个1×1×1卷积核进行连续卷积操作，提取新的特征数据；③对所提取的特征数据使用Sigmoid函数进行非线性函数拟合激活；④使用三线性插值对特征数据进行上采样：将编码块所提取特征的三维数据矩阵扩大一倍，先使用单线性插值计算填充矩阵边缘数据，再选择任一维度方向利用单线性插值计算填充矩阵内部数据；根据同种卷积核数量重复上述流程。8.根据权利要求3所述的基于Boosting-Unet分割网络的医学影像分割方法，其特征在于，所述总分割网络的第层，其中，构建该层的解码块具体包括以下步骤：Ⅰ：确定所需卷积核个数，初始化卷积核，选择上采样方法和激活函数，具体包括如下操作：选择两个卷积核，其中单个卷积核参数为3×3×3，即高度为3，宽度为3，通道数为3的三维矩阵数据，并以随机小数矩阵的形式对卷积核参数进行初始化；单个卷积核层数设置为n×32，其中n代表属于处于总分割网络第n层，移动步长设置为一个像素步长，并采用输出影像数据大小不变的零填充；上采样方法选择三线性差值，激活函数选择Relu函数；Ⅱ：建立输入编码后特征数据的处理流程。9.根据权利要求8所述的基于Boosting-Unet分割网络的医学影像分割方法，其特征在于，所述步骤Ⅱ中输入编码后特征数据的处理流程具体包括以下步骤：①通过跳跃连接与同级层编码块所提取的特征数据进行拼接，得到2倍原通道数数据的特征数据；②将该层输入的影像数据与单个卷积核进行卷积操作，提取新的特征数据；③对所提取的特征数据使用Relu函数进行非线性函数拟合激活；④使用三线性插值对特征数据进行上采样：将编码块所提取特征的三维数据矩阵扩大一倍，先使用单线性插值计算填充矩阵边缘数据，再选择任一维度方向利用单线性插值计算填充矩阵内部数据。10.根据权利要求9所述的基于Boosting-Unet分割网络的医学影像分割方法，其特征在于，所述步骤S3中，所述将总分割网络划分为m个子分割网络，具体包括两种方式，一是将第i层分割网络直接作为第k个子分割网络，其中，，二是组合第i层至第j层分割网络串联组合作为第k个子分割网络，其中，；所述对总分割网络进行训练包括对第1到m个子分割网络进行顺序训练，由于子分割网络的训练均需按照特定路径将原始影像数据的输入到第层的编码块，最后由第1层的解码块输出标注分割的影像数据，因此第k个子分割网络需将第1到k个子分割网络组合一起训练，具体包括以下步骤：Ⅰ：训练第k-1个子分割网络；Ⅱ：将训练好的第k-1个子分割网络的卷积核参数进行固定；Ⅲ：训练第k个子分割网络，直至所有子分割网络训练完成；其中训练第k个子分割网络的具体过程如下：训练好的前k-1个子分割网络的卷积核参数已固定，将训练集的原始医学影像数据输入到第1层分割网络的编码块中，完成分割网络的编码块—解码块路径后，最终由第1层分割网络的解码块输出标注分割的影像数据，将输出结果与已知的标注分割影像数据计算损失函数值，利用计算结果通过梯度回传算法优化第k个子分割网络卷积核参数；将上述过程不断迭代直至损失函数相关结果达到最优，并将此时的卷积核参数作为第k个子分割网络的最优卷积核参数。
说明书desc
技术领域本发明涉及医学影像分割领域，具体涉及基于Boosting-Unet分割网络的医学影像分割方法。背景技术医学影像分割在临床诊断和治疗过程中有非常重要的作用，例如：在对病人医学影像胰腺癌位置的确定，胰腺与胰腺癌边缘位置的划分等过程中，均需要实现相关胰腺与胰腺癌精确的识别分割。大量的医学影像需要医生花费大量的时间和精力进行阅片分析，且裸眼对CT、MRI分析和判断获得的信息是十分有限和不确定的。在医学成像中，由于相关器官组织易呈现边界模糊、与周围的组织器官对比度低等特点，极易造成定位困难。目前，胰腺与胰腺癌的CT影像分割都是通过现有公开胰腺和胰腺癌的CT影像数据，现实生活中拿到的胰腺CT影像，胰腺是呈现条状的小器官，藏在腹膜后，胰腺边界模糊很难被发现，所以如果使用公开数据和单一的神经网络模型，很容易造成胰腺癌边界识别不准确和胰腺癌分割精度低。在传统的医学影像分割中，主要以通过寻找影像本身的边缘信息特征来完成分割和将原始设定的边界向真实的影像边界逼近从而实现分割。深度学习作为机器学习算法的延伸，在医学影像分割中也取得显著的效果。基于深度学习医疗影像分割主要使用基于全卷积神经网络，如：FCN、SegNet、Deeplab等。深度学习中常用到U-Net算法，其通过跳跃连接将低维和高维特征融合，达到更好的分割效果。当前的医学影像分割算法大多以U-Net为基础，但由于医学影像存在数据不平衡、训练样本间差异性大等问题，导致在精确率和召回率之间难以平衡、特征提取不充分、计算资源和模型参数冗余、分割效果不明显等，所以对医学影像进行更加准确地分割仍然是亟待解决的难题。现有技术中公开了医学影像分割模型训练方法、医学影像分割方法及装置的专利，该方法包括，在获取先验医学影像，获得先验医学影像数据集，根据先验医学影像数据集建立神经网络，以训练神经网络分割模型；进一步地，在神经网络分割模型的解码层中加入注意力机制，获得医学影像分割模型。基于此，通过医学影像分割模型对医学影像进行分割，降低医护工作的负担以利于提高医护工作的效率。然而该发明方法采用的是传统的U-Net算法，未结合AdaBoost中的思想，该过程会因为整个网络统一训练导致参数过多而降低网络的学习能力，精度也能更进一步提高。发明内容本发明提供基于Boosting-Unet分割网络的医学影像分割方法，解决因训练参数过多而对噪声、影像模糊的抵抗力低的问题。为了达到上述技术效果，本发明的技术方案如下：基于Boosting-Unet分割网络的医学影像分割方法，包括以下步骤：S1：获取目标医学影像数据集，对该数据集作预处理，并将数据集分为训练集和验证集；S2：根据步骤S1所述数据集规模规划总分割网络层数，构建单层分割网络，利用单层分割网络构建总分割网络；S3：将步骤S2所得到的总分割网络划分为个子分割网络，利用训练集对个子分割网络进行训练；S4：将验证集的原始医学影像输入步骤S3所得到的训练好的总分割网络中，输出标注分割的影像数据结果，对比选择最优的总分割网络。本发明方法将原始医学影像数据集分为训练集和验证集，训练集用于对所构建的总分割网络进行训练以得到最优网络参数，而验证集则是对于所训练好的总分割网络进行结果检验，通过将总分割网络的训练划分为个子分割网络的训练，从而达到减少单次训练的训练参数，提高网络的学习能力和噪声、影像模糊的抵抗力，另外设置多个子分割网络也可以提高对原始医学影像进行标注分割的精准性。进一步地，所述步骤S1中，所述对目标医学影像数据集作预处理，包括Ⅰ：对医学影像数据进行截断和归一化，具体使用以下公式：其中为目标医学影像数据集中的单张医学影像数据，为该单张医学影像数据中的最小值，，为该单张医学影像数据经截断和归一化后重新生成的医学影像数据；目标医学影像数据集由原始医学影像和其对应的已标注分割的医学影像构成。通过对医学影像数据进行截断和归一化，可降低数据数值区间缩小，使医学影像数据范围统一，更精细化。进一步地，所述步骤S2中，单层分割网络即总分割网络的第层，其中，单层分割网络由编码块和解码块组成，编码块对输入的影像数据进行特征数据提取，解码块输出标注分割的影像数据，利用单层分割网络构建总分割网络，其中输入的影像数据输入到第层的编码块，第层到第层的编码块按输出—输入依次单向串联在一起，构成编码路径，第层的编码块的输出单向连接到该层的解码块的输入，第层到第层的解码块按输出—输入依次单向串联在一起，构成解码路径，最后第层的解码块输出标注分割的医学影像数据，另外同层的编码块会跳跃连接到解码块。总分割网络的影像数据处理流向如下：将影像数据输入到第层的编码块开始编码生成一个新的特征图像，接下来将该特征图像数据作为下一层第层的编码块的输入，不断地往下一层传递，直至第层的编码块处理完成后，将第层的编码块输出的特征图像数据输入到同层的解码块进行解码，将输出的特征图像数据输入到上一层第层的解码块进行解码，不断地往上一层传递，直至第层的编码块处理完成后最终特征图像数据的输出。影像数据通过分割网络一层层的编码块，越深入所得到的影像特征深度越大，所需突出的影像特征有着更大的视野域，而通过分割网络一层层的解码块得到的更大尺寸的影像特征图的边缘，是缺少信息的，毕竟每一次最大池化提取特征的同时，也必然会损失一些边缘特征，而失去的特征并不能从上采样找回，因此通过同层的编码块与解码块的跳跃连接，来实现边缘特征的一个找回。进一步地，所述总分割网络的第层，其中，构建该层的编码块包括以下步骤：Ⅰ：确定所需卷积核个数，初始化卷积核，选择激活函数和池化操作，具体包括如下操作：选择两个卷积核，其中单个卷积核参数为，即高度为，宽度为，通道数为的三维矩阵数据，并以随机小数矩阵的形式对卷积核参数进行初始化；单个卷积核层数设置为，其中代表属于处于总分割网络第层，移动步长设置为一个像素步长，并采用输出影像数据大小不变的零填充；激活函数选择Relu函数，池化操作选择核为的最大池化；Ⅱ：建立输入影像数据的特征提取流程。卷积核的卷积就是一个参与运算的三维数据矩阵，对应位置相乘再相加，卷积核参数为随机初始化，后续会在训练过程中不断更新至最优；Relu函数其实是一个取最大值的函数，它会将一部分影像数据的输出置0，形成网络的稀疏性，计算简单、效率提高，减少了参数的相互依存关系，缓解过拟合问题的发生，实际收敛速度较快；池化操作可保留影像数据主要特征的同时减少参数和计算量，也可缓解过拟合问题的发生。进一步地，所述步骤Ⅱ中输入影像数据的特征提取流程具体包括以下步骤：①将该层输入的影像数据与单个卷积核进行卷积操作，提取特征数据；②对所提取的特征数据使用Relu函数进行非线性函数拟合激活；③激活后利用最大池化缩小特征数据大小；根据卷积核数量重复上述流程。影像数据经过该处理过程后可将重要特征提取出来，并通过Relu函数使分割网络具有非线性平滑能力，使分割网络具备自主学习能力，最大池化操作可保留影像数据主要特征的同时减少参数和计算量，也可缓解过拟合问题的发生进一步地，所述总分割网络的第层，构建该层的解码块包括以下步骤：Ⅰ：确定所需卷积核个数，初始化卷积核，选择上采样方法和激活函数，具体包括如下操作：选择四个卷积核，其中两个卷积核参数为，即高度为，宽度为，通道数为的三维矩阵数据，并以随机小数矩阵的形式对卷积核参数进行初始化；两个卷积核参数为，即高度为，宽度，通道数为，并以随机小数矩阵的形式对卷积核参数进行初始化；两个卷积核层数设置为，其中代表属于处于总分割网络第层，两个卷积核层数设置为；移动步长均设置为一个像素步长，并采用输出影像数据大小不变的零填充；上采样方法选择三线性差值，激活函数选择函数；Ⅱ：建立输入编码后特征数据的处理流程。卷积核用于影像特征的提取，卷积核用于对输出的影像特征数据通道全连接，函数相较于Relu函数，它全程可导，表达区间是到，或到，常用于结果输出层，因为第层的解码块为总分割网络的最终分割结果输出，所以使用的是函数；上采用使用三线性插值不会涉及过多的参数，有效降低计算复杂度；跳跃拼接是采用对特征数据进行通道维度上拼接的形式，实现对同层级编码块和解码快上相同分辨率特征数据的特征融合，从而弥补在特征抽取过程丢失的位置细节信息。进一步地，所述步骤Ⅱ中输入编码后特征数据的处理流程具体包括以下步骤：①通过跳跃连接与同级层编码块所提取的特征数据进行拼接，得到2倍原通道数数据的特征数据；②将该层输入的影像数据与单个卷积核和单个卷积核进行连续卷积操作，提取新的特征数据；③对所提取的特征数据使用函数进行非线性函数拟合激活。④使用三线性插值对特征数据进行上采样：将编码块所提取特征的三维数据矩阵扩大一倍，先使用单线性插值计算填充矩阵边缘数据，再选择任一维度方向利用单线性插值计算填充矩阵内部数据。根据同种卷积核数量重复上述流程。总分割网络的第层的解码块所输出的分割特征图像数据为最终的输出。进一步地，所述总分割网络的第层，其中，构建该层的解码块具体包括以下步骤：Ⅰ：确定所需卷积核个数，初始化卷积核，选择上采样方法和激活函数，具体包括如下操作：选择两个卷积核，其中单个卷积核参数为，即高度为，宽度为，通道数为的三维矩阵数据，并以随机小数矩阵的形式对卷积核参数进行初始化；单个卷积核层数设置为，其中代表属于处于总分割网络第层，移动步长设置为一个像素步长，并采用输出影像数据大小不变的零填充；上采样方法选择三线性差值，激活函数选择Relu函数；Ⅱ：建立输入编码后特征数据的处理流程。函数虽然适合设置在结果输出层，但是由于它两端饱和，在传播过程中容易丢弃信息，因而传播过程的激活函数更多选择Relu函数，相比于函数，Relu函数为分段线性性质，其求导为分段线性，更适合优化过程的学习，再者它实际收敛速度比函数快很多，更符合生物学神经激活机制，适合本发明的分割网络，最后采用函数，进行激活时为指数运算，计算量大，而使用Relu函数，可以减少计算量。进一步地，所述步骤Ⅱ中输入编码后特征数据的处理流程具体包括以下步骤：①通过跳跃连接与同级层编码块所提取的特征数据进行拼接，得到2倍原通道数数据的特征数据；②将该层输入的影像数据与单个卷积核进行卷积操作，提取新的特征数据；③对所提取的特征数据使用Relu函数进行非线性函数拟合激活。④使用三线性插值对特征数据进行上采样：将编码块所提取特征的三维数据矩阵扩大一倍，先使用单线性插值计算填充矩阵边缘数据，再选择任一维度方向利用单线性插值计算填充矩阵内部数据。总分割网络的第层的解码块所输出的分割特征图像数据为中间传播的输出。进一步地，所述步骤S3中，所述将总分割网络划分为个子分割网络，具体包括两种方式，一是将第层分割网络直接作为第个子分割网络，其中，，二是组合第层至第层分割网络串联组合作为第个子分割网络，其中，；所述对总分割网络进行训练包括对第到个子分割网络进行顺序训练，由于子分割网络的训练均需按照特定路径将原始影像数据的输入到第层的编码块，最后由第层的解码块输出标注分割的影像数据，因此第个子分割网络需将第到个子分割网络组合一起训练，具体包括以下步骤：Ⅰ：训练第个子分割网络；Ⅱ：将训练好的第个子分割网络的卷积核参数进行固定；Ⅲ：训练第个子分割网络，直至所有子分割网络训练完成。其中训练第个子分割网络的具体过程如下：训练好的前个子分割网络的卷积核参数已固定，将训练集的原始医学影像数据输入到第层分割网络的编码块中，完成分割网络的编码块—解码块路径后，最终由第层分割网络的解码块输出标注分割的影像数据，将输出结果与已知的标注分割影像数据计算损失函数值，利用计算结果通过梯度回传算法优化第个子分割网络卷积核参数；将上述过程不断迭代直至损失函数相关结果达到最优，并将此时的卷积核参数作为第个子分割网络的最优卷积核参数。用户可以根据精度需求，将总分割网络按照单层分割网络或者多个连续单层分割网络的串联组合划分为若干个子分割网络，提高对原始医学影像进行标注分割的精准性。训练第个子分割网络时，继承了第个子分割网络的卷积核参数，虽然子分割网络的训练均需按照特定路径将原始影像数据的输入到第层的编码块，最后由第层的解码块输出标注分割的影像数据，会经过前个子分割网络，但是前个子分割网络卷积核参数的固定，实际上只需训练第个子分割网络的卷积核参数，这样大大减少了每一次训练的卷积核参数数量，提高了网络的效率，又实现对影像数据特征深度地提取，对影像数据的精细分割，以此提高总分割网络对影像数据特征的学习能力，增强对噪声扰动信息的鲁棒性，进一步提高图像分割的性能。与现有技术相比，本发明技术方案的有益效果是：本发明提供了基于Boosting-Unet分割网络的医学影像分割方法，该方法通过将总分割网络的训练划分为个子分割网络的训练，训练第个子分割网络时，继承了第个子分割网络的卷积核参数，这样大大减少了每一次训练的卷积核参数数量，提高网络的学习能力和噪声、影像模糊的抵抗力，另外设置多个子分割网络提高了网络的效率，又实现对影像数据特征深度地提取，对影像数据的精细分割，以此提高总分割网络对影像数据特征的学习能力，增强对噪声扰动信息的鲁棒性，进一步提高图像分割的性能。附图说明图1为基于Boosting-Unet分割网络的医学影像分割方法的总分割网络的结构图；图2为基于Boosting-Unet分割网络的医学影像分割方法的流程图；图3为含有层单层分割网络、层数为的第个子分割网络和层数为的第个子分割网络的总分割网络的结构图；图4为含有层单层分割网络、层数为的第个子分割网络和层数为的第个子分割网络的总分割网络的结构图；图5为含有层单层分割网络、层数为的第个子分割网络和层数为的第个子分割网络的总分割网络的结构图。具体实施方式附图仅用于示例性说明，不能理解为对本专利的限制；对于本领域技术人员来说，附图中某些公知说明可能省略是可以理解的。下面结合附图和实施例对本发明的技术方案做进一步的说明。实施例1：本实例所用的数据集来自某医院提供的胰腺癌相关CT切片影像数据集,其中该CT切片影像数据集，包括动脉期与门静脉期两个时期的CT切片影像数据，总共包含69个病例的CT切片影像，共有27184个CT切片影像，共占用48GB空间，本实例利用所构建的，层总分割网络，如图3所示，实现对CT切片影像中胰腺及其胰腺癌的分割，具体包括以下步骤：S1：获取CT切片影像数据集，对CT切片影像数据集进行截断和归一化：按照CT切片影像数据灰度区间，假设原始影像数据中的某个像素值，经过截断后该像素值为，然后在进行归一化处理后该像素值为，对所有CT切片影像数据进行相同的操作，将处理后的CT切片影像数据作为输入，另外还需备份一份CT切片影像数据作为标注分割的CT切片影像数据；将CT切片影像数据其对应的标注分割的CT切片影像数据集划分为训练集和验证集。S2：构建含有层单层分割网络的总分割网络，该总分割网络包含编码路径和解码路径，编码路径包含3层编码块，用于特征数据提取的编码路径结构为：，，，，逐层提取CT切片影像数据相关的特征数据；解码路径包含3层解码块，解码路径结构为：，，通过编码路径得到的特征数据，进行解码，得到分割掩码图。S3：将总分割网络的前两层作为第个子分割网络，最后一层最为第个子分割网络；将训练集的CT切片影像数据输入总分割网络中，对第个子分割网络进行训练，经过第个子分割网络的三层编码路径提取特征数据，再由三层解码路径输出分割掩码图；利用训练集的已标注分割的CT切片影像数据，利用Dice损失函数计算出第个子分割网络损失值，以及Dice系数，其中计算公式为：根据损失值，通过梯度回传算法更新分割网络参数，直至第个子分割网络Dice系数达到稳定数值时，视为训练完成，将第个子分割网络的卷积核参数固定，继续训练第2个子分割网络，通过整体的输出后生成分割掩码图，再利用相同的已标注分割的CT切片影像数据，计算总分割网络的损失值，通过梯度回传算法更新第2个子分割网络参数，直至总分割网络Dice系数达到稳定数值时，视为训练完成。S4：将验证集的CT切片影像数据输入训练好的总分割网络中，输出分割掩码图，与验证集的已标注分割的CT切片影像数据作对比验证，可通过重复上述过程多次选择最优的3层总分割网络。实施例2：本实例所用的数据集与实施例1相同，本实例利用所构建的的层总分割网络，如图4所示，实现对CT切片影像中胰腺及其胰腺癌的分割，具体包括以下步骤：S1：获取CT切片影像数据集，对CT切片影像数据集进行截断和归一化：按照CT切片影像数据灰度区间，假设原始影像数据中的某个像素值，经过截断后该像素值为，然后在进行归一化处理后该像素值为，对所有CT切片影像数据进行相同的操作，将处理后的CT切片影像数据作为输入，另外还需备份一份CT切片影像数据作为标注分割的CT切片影像数据；将CT切片影像数据其对应的标注分割的CT切片影像数据集划分为训练集和验证集。S2：构建含有层单层分割网络的总分割网络，该总分割网络包含编码路径和解码路径，编码路径包含4层编码块，用于特征数据提取的编码路径结构为：，，，，，逐层提取CT切片影像数据相关的特征数据；解码路径包含4层解码块，解码路径结构为：，，，通过编码路径得到的特征数据，进行解码，得到分割掩码图。S3：将总分割网络的前三层作为第个子分割网络，最后一层最为第个子分割网络；将训练集的CT切片影像数据输入总分割网络中，对第个子分割网络进行训练，经过第个子分割网络的三层编码路径提取特征数据，再由三层解码路径输出分割掩码图；利用训练集的已标注分割的CT切片影像数据，利用Dice损失函数计算出第个子分割网络损失值，以及Dice系数，其中计算公式为：根据损失值，通过梯度回传算法更新分割网络参数，直至第个子分割网络Dice系数达到稳定数值时，视为训练完成，将第个子分割网络的卷积核参数固定，继续训练第2个子分割网络，通过整体的输出后生成分割掩码图，再利用相同的已标注分割的CT切片影像数据，计算总分割网络的损失值，通过梯度回传算法更新第2个子分割网络参数，直至总分割网络Dice系数达到稳定数值时，视为训练完成。S4：将验证集的CT切片影像数据输入训练好的总分割网络中，输出分割掩码图，与验证集的已标注分割的CT切片影像数据作对比验证，可通过重复上述过程多次选择最优的层总分割网络。实施例3：本实例所用的数据集与实施例1相同，本实例利用所构建的层总分割网络，如图5所示，实现对CT切片影像中胰腺及其胰腺癌的分割，具体包括以下步骤：S1：获取CT切片影像数据集，对CT切片影像数据集进行截断和归一化：按照CT切片影像数据灰度区间，假设原始影像数据中的某个像素值，经过截断后该像素值为，然后在进行归一化处理后该像素值为，对所有CT切片影像数据进行相同的操作，将处理后的CT切片影像数据作为输入，另外还需备份一份CT切片影像数据作为标注分割的CT切片影像数据；将CT切片影像数据其对应的标注分割的CT切片影像数据集划分为训练集和验证集。S2：构建含有层单层分割网络的总分割网络，该总分割网络包含编码路径和解码路径，编码路径包含5层编码块，用于特征数据提取的编码路径结构为：，，，，，，逐层提取CT切片影像数据相关的特征数据；解码路径包含5层解码块，解码路径结构为：，，，，Con表示来自编码路径同层级相同维数的特征数据；表示两个核大小为，步长为，层数为的卷积；表示两个核大小为，步长为，层数为的卷积；表示引入的激活函数]通过编码路径得到的特征数据，进行解码，得到分割掩码图。S3：将总分割网络的前四层作为第个子分割网络，最后一层最为第个子分割网络；将训练集的CT切片影像数据输入总分割网络中，对第个子分割网络进行训练，经过第个子分割网络的三层编码路径提取特征数据，再由三层解码路径输出分割掩码图；利用训练集的已标注分割的CT切片影像数据，利用Dice损失函数计算出第个子分割网络损失值，以及Dice系数，其中计算公式为：根据损失值，通过梯度回传算法更新分割网络参数，直至第个子分割网络Dice系数达到稳定数值时，视为训练完成，将第个子分割网络的卷积核参数固定，继续训练第2个子分割网络，通过整体的输出后生成分割掩码图，再利用相同的已标注分割的CT切片影像数据，计算总分割网络的损失值，通过梯度回传算法更新第2个子分割网络参数，直至总分割网络Dice系数达到稳定数值时，视为训练完成。S4：将验证集的CT切片影像数据输入训练好的总分割网络中，输出分割掩码图，与验证集的已标注分割的CT切片影像数据作对比验证，可通过重复上述过程多次选择最优的层总分割网络。对比实施例1、2、3的总分割网络最终训练的Dice系数，最优的总分割网络为4层的总分割网络，其中前三层作为第个子分割网络，最后一层最为第个子分割网络。显然，本发明的上述实施例仅仅是为清楚地说明本发明所作的举例，而并非是对本发明的实施方式的限定。对于所属领域的普通技术人员来说，在上述说明的基础上还可以做出其它不同形式的变化或变动。这里无需也无法对所有的实施方式予以穷举。凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明权利要求的保护范围之内。
