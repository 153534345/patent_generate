标题title
一种建立换电站动力电池健康状态评估模型的方法
摘要abst
本发明涉及一种建立换电站动力电池健康状态评估模型的方法，包括步骤：数据收集；进行数据预处理；使用安时法来计算设定时间间隔内电池容量的消耗量，计算电池电量百分比变化量，计算当前充满电量下的电池容量；评估电池的健康状态SOH，根据电池健康状态分布，用线性函数建立健康状态估计模型。本发明的有益效果是：本发明克服了现有技术中难以适应换电站的实际使用场景、总结出电池参数的变化规律耗时长、建立的电量机理模型不准确的缺陷；本发明采用的缺失数据插值处理方法，对插补变量的均值的估计是无偏的，同时插补值的稳定性比较强，这样就可以减小估计量方差，增强对缺失值的插补效果。
权利要求书clms
1.一种建立换电站动力电池健康状态评估模型的方法，其特征在于，包括以下步骤：步骤1、数据收集：换电站与车辆建立通讯，当车辆进入换电站时，换电站获取车辆BMS系统的数据，直至数据条数达到n条；步骤2、进行数据预处理：对步骤1收集的车辆BMS系统数据中的行驶片段进行划分；对行驶片段划分好的数据中的缺失值进行插值处理，从插值处理好的数据中剔除离群点数据；步骤3、使用安时法来计算设定时间间隔内电池容量的消耗量，计算电池电量百分比变化量，计算当前充满电量下的电池容量；评估电池的健康状态SOH，根据电池健康状态分布，用线性函数建立健康状态估计模型。2.根据权利要求1所述建立换电站动力电池健康状态评估模型的方法，其特征在于：步骤1中换电站获取的车辆BMS系统中的数据包括采集时间、行驶里程、车速、高压电池电流、电池荷电状态、电池总电压、单体最高温度和单体最低温度。3.根据权利要求2所述建立换电站动力电池健康状态评估模型的方法，其特征在于，步骤2具体包括如下步骤：步骤2.1、对行驶片段进行划分；步骤2.2、对行驶片段划分好的数据中的缺失值进行插值处理；步骤2.3、计算相异距离，统计历史正常数据相异距离的均值，判断相异距离是否超出均值，从插值处理好的数据中剔除相异距离超出均值的离群点数据，得到预处理后的数据；上式中，为两条数据之间的相异距离；取值为1至；若大于设定的阈值，则删除。4.根据权利要求3所述建立换电站动力电池健康状态评估模型的方法，其特征在于，步骤2.1至步骤2.2具体包括如下步骤：步骤2.1.1、判断当前车速是否为0；若车速为0，则删除掉当前车速对应的BMS系统的数据；继续对剩余BMS系统的数据进行区分，去除掉剩余BMS系统的数据中高压电池电流小于0的部分，剩下的数据为行驶数据；步骤2.1.2、设定片段划分时间将行驶数据按时间排序，记录第一条数据时间，并将其作为起始点；计算第二条数据时间与第一条数据时间的时间差；判断是否不超过设定的片段划分时间，若是，则计算第三条数据时间与第一条数据时间的时间差，判断是否不超过设定的片段划分时间，以此类推，直至第i条数据时间与第一条数据时间的时间差超过设定的片段划分时间；将至时间段对应的数据作为一个片段，记录为分割点；步骤2.1.3、以时刻对应的BMS系统的数据作为新的起始点，重复执行步骤2.1.1至步骤2.1.2，直至所有的BMS系统的数据均进行过时间差判断，最终得到多个分割点，将BMS系统的数据按照分割点进行分割，得到行驶片段划分好的数据；步骤2.2.1、对行驶片段划分好的数据按时间顺序进行排列；对于换电站获取车辆BMS系统的n条数据，每条数据包含8个数值，其中，，...，；对于数据,表示中的第个数据，表示采集时间，表示行驶里程，表示车速，表示高压电池电流，表示电池荷电状态、表示电池总电压、单体最高温度，表示单体最低温度；步骤2.2.2、对缺失值进行插值处理：若其中某一个数据缺失，1＜，则取两个数的均值来替换；若缺失数据为和，则取两个数的均值来替换，取和两个数的均值来替换；得到插值处理好的数据。5.根据权利要求4所述建立换电站动力电池健康状态评估模型的方法，其特征在于，步骤3具体包括以下步骤：步骤3.1、计算电池当前容量：利用安时法计算出一段时间内电池容量的消耗量:上式中，为高压电池电流；将这段时间内的变化百分比表示为：上式中，表示该段时间内电池电量的变化百分比，表示这段时间初始时刻的，表示这段时间结束时刻的，表示这段时间初始时刻对应的电池放电容量，表示这段时间结束时刻对应的电池放电容量；为当前充满电量下的电池容量；根据推导出当前充满电量下的电池容量：计算电池荷电状态SOC:上式中，为电池剩余容量，为放电的容量；步骤3.2、评估电池的健康状态SOH：上式中，代表电池出厂额定容量；步骤3.3、根据步骤3.1计算出每个划分的行驶片段的，再进一步根据步骤3.2计算出行驶片段的电池健康状态SOH值，根据电池健康状态分布，用线性函数建立健康状态估计模型；线性函数为：上式中，表示电池健康度，和表示电池健康状态估计模型中的待识别参数；使用最小二乘法获得最佳拟合直线，确定和的值。
说明书desc
技术领域本发明属于换电站电池健康领域，尤其涉及一种建立换电站动力电池健康状态评估模型的方法。背景技术以往燃油汽车在长时间航行后燃油耗尽时，只需要几分钟时间就可以加满油续航；而新能源汽车充电时间一般以小时为单位，充电时间较长，这极大的影响了出行的体验；随着新能源汽车的不断推广应用，换电站也应运而生，电动汽车将车驶入换电站中，仅需要几分钟就可以将电池换好继续行驶，换电站的建立能够解决电动汽车的续航问题。不同车辆的电池处于不同的健康状态，换电站中对不同车辆电池的主要处理方式有：1）对电池的充电管理和健康管理，以达到充电效率最优；2）查看电池是否到了服务年限。目前估算电池健康状态的方法有：直接放电法、内阻法、机理模型法和数据驱动模型法等。直接放电法是目前公认可靠的方法，其使用负载来评估电池的健康状态SOH，但对于车用动力电池，直接放电法是一种应用条件严格的离线测试，难以适应换电站的实际使用场景。对于机理模型法，首先机理模型的建立需要大量实验数据才能总结出电池相关参数的变化规律，耗时较长，且复杂的电化学系统导致难以建立准确的机理模型，因此其应用也受到了很大的限制。数据驱动模型法利用人工神经网络、粒子滤波、支持向量机或模糊逻辑处理大量电池工作数据，来建立健康状况评估模型，用健康状况评估模型估计电池SOH，且通过增加样本数据和学习频率，可以有效地提高模型的准确率，因此受到越来越多的重视。发明内容本发明的目的是克服现有技术中的不足，提供一种建立换电站动力电池健康状态评估模型的方法。这种建立换电站动力电池健康状态评估模型的方法，包括以下步骤：步骤1、数据收集：换电站与车辆建立通讯，当车辆进入换电站时，换电站获取车辆BMS系统的数据，直至数据条数达到n条；步骤2、进行数据预处理：对步骤1收集的车辆BMS系统数据中的行驶片段进行划分；对行驶片段划分好的数据中的缺失值进行插值处理，从插值处理好的数据中剔除离群点数据；步骤3、使用安时法来计算设定时间间隔内电池容量的消耗量，计算电池电量百分比变化量，计算当前充满电量下的电池容量；评估电池的健康状态SOH，根据电池健康状态分布，用线性函数建立健康状态估计模型。作为优选，步骤1中换电站获取的车辆BMS系统中的数据包括采集时间、行驶里程、车速、高压电池电流、电池荷电状态、电池总电压、单体最高温度和单体最低温度。作为优选，步骤2具体包括如下步骤：步骤2.1、对行驶片段进行划分；步骤2.2、对行驶片段划分好的数据中的缺失值进行插值处理；步骤2.3、计算相异距离，统计历史正常数据相异距离的均值，判断相异距离是否超出均值，从插值处理好的数据中剔除相异距离超出均值的离群点数据，得到预处理后的数据；上式中，为两条数据之间的相异距离；取值为1至；若大于设定的阈值，则删除。作为优选，步骤2.1至步骤2.2具体包括如下步骤：步骤2.1.1、判断当前车速是否为0；若车速为0，则删除掉当前车速对应的BMS系统的数据；继续对剩余BMS系统的数据进行区分，去除掉剩余BMS系统的数据中高压电池电流小于0的部分，剩下的数据为行驶数据；步骤2.1.2、设定片段划分时间将行驶数据按时间排序，记录第一条数据时间，并将其作为起始点；计算第二条数据时间与第一条数据时间的时间差；判断是否不超过设定的片段划分时间，若是，则计算第三条数据时间与第一条数据时间的时间差，判断是否不超过设定的片段划分时间，以此类推，直至第i条数据时间与第一条数据时间的时间差超过设定的片段划分时间；将至时间段对应的数据作为一个片段，记录为分割点；步骤2.1.3、以时刻对应的BMS系统的数据作为新的起始点，重复执行步骤2.1.1至步骤2.1.2，直至所有的BMS系统的数据均进行过时间差判断，最终得到多个分割点，将BMS系统的数据按照分割点进行分割，得到行驶片段划分好的数据；步骤2.2.1、对行驶片段划分好的数据按时间顺序进行排列；对于换电站获取车辆BMS系统的n条数据，每条数据包含8个数值，其中，，...，；对于数据,表示中的第个数据，表示采集时间，表示行驶里程，表示车速，表示高压电池电流，表示电池荷电状态、表示电池总电压、单体最高温度，表示单体最低温度；步骤2.2.2、对缺失值进行插值处理：若其中某一个数据缺失，1＜，则取两个数的均值来替换；若缺失数据为和，则取两个数的均值来替换，取和两个数的均值来替换；得到插值处理好的数据。作为优选，步骤3具体包括以下步骤：步骤3.1、计算电池当前容量：利用安时法计算出一段时间内电池容量的消耗量:上式中，为高压电池电流；将这段时间内的变化百分比表示为：上式中，表示该段时间内电池电量的变化百分比，表示这段时间初始时刻的，表示这段时间结束时刻的，表示这段时间初始时刻对应的电池放电容量，表示这段时间结束时刻对应的电池放电容量；为当前充满电量下的电池容量；根据推导出当前充满电量下的电池容量：计算电池荷电状态SOC:上式中，为电池剩余容量，为放电的容量；步骤3.2、评估电池的健康状态SOH：上式中，代表电池出厂额定容量；步骤3.3、根据步骤3.1计算出每个划分的行驶片段的，再进一步根据步骤3.2计算出行驶片段的电池健康状态SOH值，根据电池健康状态分布，用线性函数建立健康状态估计模型；线性函数为：上式中，表示电池健康度，和表示电池健康状态估计模型中的待识别参数；使用最小二乘法获得最佳拟合直线，确定和的值。本发明的有益效果是：相比于现有技术，本发明主要针对新能源汽车换电站电池，对行驶片段进行划分、对缺失数据进行插值处理，然后剔除异常数据，使用安时法来计算对应的电池容量值，根据健康状态分布，用线性函数建立电池健康状态估计模型；本发明克服了现有技术中难以适应换电站的实际使用场景、总结出电池参数的变化规律耗时长、建立的电量机理模型不准确的缺陷。本发明采用的缺失数据插值处理方法，对插补变量的均值的估计是无偏的，同时插补值的稳定性比较强，这样就可以减小估计量方差，增强对缺失值的插补效果。附图说明图1为本发明对于电池健康状态评估的流程图；图2为本发明的数据预处理流程图；图3为本发明对于实车数据的处理流程图；图4为本发明对于行驶片段划分的具体流程图；图5为本发明对于异常数据的处理流程图；图6为本发明的电池健康度模型建立流程图。具体实施方式下面结合实施例对本发明做进一步描述。下述实施例的说明只是用于帮助理解本发明。应当指出，对于本技术领域的普通人员来说，在不脱离本发明原理的前提下，还可以对本发明进行若干修饰，这些改进和修饰也落入本发明权利要求的保护范围内。作为一种实施例，一种如图1所示建立换电站动力电池健康状态评估模型的方法，具体包括以下步骤：步骤1、数据收集：换电站与车辆建立通讯联系，当车辆进入换电站时，换电站获取车辆BMS系统的数据，直至数据条数达到n条，将获取的数据用于构建电池健康状态评估模型；换电站获取的车辆BMS系统中的数据包括采集时间、行驶里程、车速、高压电池电流、电池荷电状态、电池总电压、单体最高温度和单体最低温度；步骤2、如图2所示，进行数据预处理：对步骤1收集的车辆BMS系统数据中的行驶片段进行划分；对行驶片段划分好的数据中的缺失值进行插值处理，从插值处理好的数据中剔除离群点数据；步骤2.1、如图3和图4所示，对行驶片段进行划分：步骤2.1.1、判断当前车速是否为0；若车速为0，则这部分车辆BMS系统中的数据为静止数据，即车辆处于停车或充电状态，删除掉当前车速对应的BMS系统的数据；又由于在行驶过程中会出现制动能量回收充电过程，因此继续对剩余BMS系统的数据进行区分，去除掉剩余BMS系统的数据中高压电池电流小于0的部分，剩下的数据为行驶数据，即放电数据；步骤2.1.2、设定片段划分时间为10分钟，将行驶数据按时间排序，记录第一条数据时间，并将其作为起始点；计算第二条数据时间与第一条数据时间的时间差；判断是否不超过设定的片段划分时间，若是，则计算第三条数据时间与第一条数据时间的时间差，判断是否不超过设定的片段划分时间，以此类推，直至第i条数据时间与第一条数据时间的时间差超过设定的片段划分时间；将至时间段对应的数据作为一个片段，记录为分割点；步骤2.1.3、以时刻对应的BMS系统的数据作为新的起始点，重复执行步骤2.1.1至步骤2.1.2，直至所有的BMS系统的数据均进行过时间差判断，最终得到多个分割点，将BMS系统的数据按照分割点进行分割，得到行驶片段划分好的数据；步骤2.2、对行驶片段划分好的数据中的缺失值进行插值处理，直接删除存在缺失问题的数据会影响分析结果的客观性和正确性；均值插补是单一插补类中的一种，它在插补过程中只产生一个缺失值的替代值，利用这种方法对缺失值进行插补，对插补变量的均值的估计是无偏的，同时插补值的稳定性比较强，这样就可以减小估计量方差，增强对缺失值的插补效果；步骤2.2.1、对行驶片段划分好的数据按时间顺序进行排列；对于换电站获取车辆BMS系统的n条数据，每条数据包含8个数值，其中，，...，；对于数据,表示中的第个数据，表示采集时间，表示行驶里程，表示车速，表示高压电池电流，表示电池荷电状态、表示电池总电压、单体最高温度，表示单体最低温度；步骤2.2.2、对缺失值进行插值处理：若其中某一个数据缺失，1＜，则取两个数的均值来替换；若缺失数据为和，则取两个数的均值来替换，取和两个数的均值来替换；得到插值处理好的数据；步骤2.3、由于设备的问题和外界条件的变化，不可避免地会出现一些离群点数据的异常情况，因此需要对这些数据进行剔除；在车辆行驶过程中，BMS所记录的数据应该彼此接近，因此通过距离的方法可以识别一些异常点；如图5所示，计算相异距离，统计历史正常数据相异距离的均值，判断相异距离是否超出均值，从插值处理好的数据中剔除相异距离超出均值的离群点数据，得到预处理后的数据；上式中，为两条数据之间的相异距离；取值为1至；若大于专家设定的阈值，则删除；步骤3、如图6所示，建立健康状态估计模型：使用安时法来计算设定时间间隔内电池容量的消耗量，计算电池电量百分比变化量，计算当前充满电量下的电池容量，安时法使用放电电流对放电时间的积分来计算电池容量；对每一个放电片段，分别使用安时法来计算其对应的电池容量值；评估电池的健康状态SOH，根据电池健康状态分布，用线性函数建立健康状态估计模型；步骤3.1、计算电池当前容量：利用安时法计算出一段较短时间内电池容量的消耗量:上式中，为高压电池电流；将这段较短时间内的变化百分比表示为：上式中，表示该段时间内电池电量的变化百分比，表示这段时间初始时刻的，表示这段时间结束时刻的，表示这段时间初始时刻对应的电池放电容量，表示这段时间结束时刻对应的电池放电容量；为当前充满电量下的电池容量；根据推导出当前充满电量下的电池容量：在一段较短的时间间隔内，电池荷电状态SOC指的是蓄电池放电后剩余容量与全荷电容量的百分比，计算电池荷电状态SOC:上式中，为电池剩余容量，为放电的容量；步骤3.2、评估电池的健康状态SOH：上式中，代表电池出厂额定容量，电池的额定容量是已知的，因此只要计算当前充满电量下的电池容量，就可以得到电池健康状态SOH；步骤3.3、根据步骤3.1计算出每个划分的行驶片段的，再进一步根据步骤3.2计算出行驶片段的电池健康状态SOH值，根据电池健康状态分布，用线性函数建立健康状态估计模型；线性函数为：上式中，表示电池健康度，和表示电池健康状态估计模型中的待识别参数；使用最小二乘法获得最佳拟合直线，确定和的值。
