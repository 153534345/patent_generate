标题title
一种结核性脑膜脑炎重建系统、方法及存储器
摘要abst
本发明提供了一种结核性脑膜脑炎重建系统，包括：一病灶检测子系统；所述病灶检测子系统用于检测医学图像中的病灶；一多切片双阈值检测子系统；所述多切片双阈值检测子系统用于双阈值对所述病灶检测子系统检测出来的病灶进行检测；具体的，所述双阈值包括第一阈值、第二阈值，其中第一阈值高于第二阈值；对检测出的病灶的置信度大于或等于第二阈值，小于第一阈值的切片图像进行第二次检测；一影像重建子系统；所述影像重建子系统使用所述多切片双阈值检测子系统获取的检测目标进行病灶的三维重建。
权利要求书clms
1.一种结核性脑膜脑炎重建系统，其特征在于：包括：一病灶检测子系统；所述病灶检测子系统用于检测医学图像中的病灶；一多切片双阈值检测子系统；所述多切片双阈值检测子系统用于双阈值对所述病灶检测子系统检测出来的病灶进行检测；具体的，所述双阈值包括第一阈值、第二阈值，其中第一阈值高于第二阈值；对检测出的病灶的置信度大于或等于第二阈值，小于第一阈值的切片图像进行第二次检测，所述第二次检测为：检测前后切片相邻位置上是否存在置信度大于等于第一阈值的病灶，存在则保存当前检测目标，不存在则进行去除；或/和检测前后切片相邻位置上是否同时存在置信度小于第一阈值大于等于第二阈值的病灶，存在则保存当前检测目标，不存在则进行去除；一影像重建子系统；所述影像重建子系统使用所述多切片双阈值检测子系统获取的检测目标进行病灶的三维重建。2.根据权利要求1所述的系统，其特征在于，所述系统还包括一医学图像预处理子系统；所述医学图像预处理子系统用于将医学图像进行格式转换为第二格式图像。3.根据权利要求1所述的系统，其特征在于：所述病灶检测子系统使用SWTED检测模型来检测图像切片中的病灶，所述SWTED模型包括一Swin Transformers Encoder模块，用于提取关键特征，一Transformer Decoder模型，用于通过提取的关键特征生成候选框，一特征图构成模型，用于利用所述Swin Transformers Encoder模块提取的关键特征以及所述候选框构成特征图并通过缩放统一特征图尺寸，一全连接层，用于对所述特征图进行边界框以及类别的预测；一掩码分割层，用于对所述特征图进行待分割对象轮廓的预测。4.根据权利要求1所述的系统，其特征在于：多切片双阈值检测子系统对检测的病灶的置信度大于等于第一阈值的病灶进行保存；小于第二阈值的病灶直接去除。5.根据权利要求3所述的系统，其特征在于：所述Swin Transformer中的编码器和解码器的多头自注意力计算公式如-所示,公式中Q、K、V来源于输入特征本身，是根据输入特征生成的向量，是一组可学习的权重矩阵，是相应的分量，用于融合由多个头部产生的结果，是一个可学习的参数，是比例因子，。6.根据权利要求5所述的系统，其特征在于：所述swin Transformer中的编码器和解码器的为FPN结构。7.根据权利要求 1所述的系统，其特征在于：影像重建子系统还包括如下模块：空间坐标系建立模块，用于建立空间坐标系0XYZ，根据矢状面、冠状面和横断面切片的所在位置，将存在病灶的切片的四个顶点映射在三维坐标信息中；病灶轮廓的三维坐标信息获取模块，用于从检测出存在病灶的切片中，提取病灶轮廓的三维坐标信息；病灶轮廓映射模块，用于将所有切片的病灶轮廓映射到同一个空间坐标系中；曲面重构模块，用于基于平行截面轮廓构建曲面实体算法进行曲面重构；切片病灶轮廓信息关系匹配模块，用于对相邻切片上的病灶轮廓信息进行关系匹配；若为“一对一”关系，执行第一计算模块；若为“一对多”关系，执行第二计算模块；若为“多对多”关系，执行第三计算模块；第一计算模块，用于“一对一”关系既用来通过蒙皮法创建曲面，还用来填补任意形状的平面闭合曲线围成的区域：首先计算闭合区域的质心，并在质心处创建一点圆，然后利用点圆和闭合曲线创建蒙皮平面或直纹平面来填充闭合区域；第二计算模块，用于构造“一对多”关系的包络面；利用凸包点信息，计算包络面的裁剪区间，并裁剪；计算填充区域边界线，利用Coons曲面片填充裁剪后的包络面；第三计算模块，用于构造“多对多”关系的包络面，抽取包络面的中间带曲面，抽取中间带的两条边界线，两条边界线和原“多对多”关系转换成两个“一对多”关系，再执行第一计算模块；三维立体表示模块、用于在当前空间坐标系下得到重构后的病灶曲面实体，重现病灶在三维空间的立体表示。8.一种结核性脑膜脑炎重建方法，其应用于如权利要求1-7中任一项所述的结核性脑膜脑炎重建系统，其特征在于：包括如下步骤：步骤1、获取当前病人所有剖面的图像切片N张；步骤2、统计不同剖面的切片的数量，记为矢状面N1张、冠状面N2张、横断面N3张，其中N=N1+N2+N3；步骤3、通过病灶检测子系统对N1、N2、N3的切片依次进行病灶检测；步骤4、利用多切片双阈值检测子系统对病灶检测子系统识别到的病灶进行筛选；步骤5、将矢状面、冠状面、横断面中存在病灶的切片张数记为L1、L2、L3；步骤6、建立空间坐标系0XYZ，根据矢状面、冠状面和横断面切片的所在位置，将存在病灶的切片的四个顶点映射在三维坐标信息中；步骤7、从检测出存在病灶的切片中，提取病灶轮廓的三维坐标信息；步骤8、将所有切片的病灶轮廓映射到同一个空间坐标系中；步骤9、基于平行截面轮廓构建曲面实体算法进行曲面重构；步骤10、相邻切片上的病灶轮廓信息进行关系匹配；若为“一对一”关系，执行步骤11；若为“一对多”关系，执行步骤12；若为“多对多”关系，执行步骤13；步骤11、“一对一”关系既用来通过蒙皮法创建曲面，还用来填补任意形状的平面闭合曲线围成的区域：首先计算闭合区域的质心，并在质心处创建一点圆，然后利用点圆和闭合曲线创建蒙皮平面或直纹平面来填充闭合区域；步骤12、构造“一对多”关系的包络面；利用凸包点信息，计算包络面的裁剪区间，并裁剪；计算填充区域边界线，利用Coons曲面片填充裁剪后的包络面；步骤13、构造“多对多”关系的包络面，抽取包络面的中间带曲面，抽取中间带的两条边界线，两条边界线和原“多对多”关系转换成两个“一对多”关系，再执行步骤11；步骤14、在当前空间坐标系下得到重构后的病灶曲面实体，重现病灶在三维空间的立体表示。9.根据权利要求8所述的方法，所述步骤1具体为：通过所述医学图像预处理子系统，将DCM格式的医学图像转换为第二格式的图像，得到当前病人所有剖面的图像切片N张。10.一种非易失性存储器，所述存储器上存储有指令，所述指令被处理器执行时，用于实现如权利要求8-9中任一项所述的一种结核性脑膜脑炎重建方法。
说明书desc
技术领域本发明涉及医学图像技术领域，具体来说，涉及一种结核性脑膜脑炎重建系统、方法及存储器。背景技术在结核性脑膜脑炎的影像诊断过程中，需要通过观察头部的各个剖面MRI图像，在不同剖面对应位置上同时定位到病灶才能进行诊断。这种诊断方式不仅效率低，诊断的错误率也比较高。由于病灶在图像上的表现与血管非常相似，因此无法通过单剖面MRI图像完成诊断，必须要观察病人头部的横断面、矢状面和冠状面MRI图像，查看对应位置上是否存在病灶，并以此作为判断依据进行诊断。正是因为这种诊断方式，在某个剖面MRI图像上发现可疑病灶的时候，就必须在其他剖面的对应位置上进行查看，这就导致诊断效率低、错误率偏高。发明内容针对相关技术中的上述技术问题，本发明提出一种结核性脑膜脑炎重建系统，包括：一病灶检测子系统；所述病灶检测子系统用于检测医学图像中的病灶；一多切片双阈值检测子系统；所述多切片双阈值检测子系统用于双阈值对所述病灶检测子系统检测出来的病灶进行检测；具体的，所述双阈值包括第一阈值、第二阈值，其中第一阈值高于第二阈值；对检测出的病灶的置信度大于或等于第二阈值，小于第一阈值的切片图像进行第二次检测，所述第二次检测为：检测前后切片相邻位置上是否存在置信度大于等于第一阈值的病灶，存在则保存当前检测目标，不存在则进行去除；或/和检测前后切片相邻位置上是否同时存在置信度小于第一阈值大于等于第二阈值的病灶，存在则保存当前检测目标，不存在则进行去除；一影像重建子系统；所述影像重建子系统使用所述多切片双阈值检测子系统获取的检测目标进行病灶的三维重建。具体的，所述系统还包括一医学图像预处理子系统；所述医学图像预处理子系统用于将医学图像进行格式转换为第二格式图像。具体的，所述病灶检测子系统使用SWTED检测模型来检测图像切片中的病灶，所述SWTED模型包括一Swin Transformers Encoder模块，用于提取关键特征，一TransformerDecoder模型，用于通过提取的关键特征生成候选框，一特征图构成模型，用于利用所述Swin Transformers Encoder模块提取的关键特征以及所述候选框构成特征图并通过缩放统一特征图尺寸，一全连接层，用于对所述特征图进行边界框以及类别的预测；一掩码分割层，用于对所述特征图进行待分割对象轮廓的预测。具体的，多切片双阈值检测子系统对检测的病灶的置信度大于等于第一阈值的病灶进行保存；小于第二阈值的病灶直接去除。具体的，所述Swin Transformer中的编码器和解码器的多头自注意力计算公式如-所示,公式中Q、K、V来源于输入特征本身，是根据输入特征生成的向量，是一组可学习的权重矩阵，是相应的分量，用于融合由多个头部产生的结果，是一个可学习的参数，是比例因子。。具体的，所述swin Transformer中的编码器和解码器的为FPN结构。具体的，所述影像重建子系统还包括如下模块：空间坐标系建立模块，用于建立空间坐标系0XYZ，根据矢状面、冠状面和横断面切片的所在位置，将存在病灶的切片的四个顶点映射在三维坐标信息中；病灶轮廓的三维坐标信息获取模块，用于从检测出存在病灶的切片中，提取病灶轮廓的三维坐标信息；病灶轮廓映射模块，用于将所有切片的病灶轮廓映射到同一个空间坐标系中；曲面重构模块，用于基于平行截面轮廓构建曲面实体算法进行曲面重构；切片病灶轮廓信息关系匹配模块，用于对相邻切片上的病灶轮廓信息进行关系匹配；若为“一对一”关系，执行第一计算模块；若为“一对多”关系，执行第二计算模块；若为“多对多”关系，执行第三计算模块；第一计算模块，用于“一对一”关系既用来通过蒙皮法创建曲面，还用来填补任意形状的平面闭合曲线围成的区域：首先计算闭合区域的质心，并在质心处创建一点圆，然后利用点圆和闭合曲线创建蒙皮平面或直纹平面来填充闭合区域；第二计算模块，用于构造“一对多”关系的包络面；利用凸包点信息，计算包络面的裁剪区间，并裁剪；计算填充区域边界线，利用Coons曲面片填充裁剪后的包络面；第三计算模块，用于构造“多对多”关系的包络面，抽取包络面的中间带曲面，抽取中间带的两条边界线，两条边界线和原“多对多”关系转换成两个“一对多”关系，再执行第一计算模块；三维立体表示模块、用于在当前空间坐标系下得到重构后的病灶曲面实体，重现病灶在三维空间的立体表示。第二方面，本发明的另一个实施例公开了一种结核性脑膜脑炎重建方法，其应用于如上所述的结核性脑膜脑炎重建系统，包括如下步骤：步骤1、获取当前病人所有剖面的图像切片N张；步骤2、统计不同剖面的切片的数量，记为矢状面N1张、冠状面N2张、横断面N3张，其中 N=N1+N2+N3；步骤3、通过病灶检测子系统对N1、N2、N3的切片依次进行病灶检测；步骤4、利用多切片双阈值检测子系统对病灶检测子系统识别到的病灶进行筛选；步骤5、将矢状面、冠状面、横断面中存在病灶的切片张数记为L1、L2、L3；步骤6、建立空间坐标系0XYZ，根据矢状面、冠状面和横断面切片的所在位置，将存在病灶的切片的四个顶点映射在三维坐标信息中；步骤7、从检测出存在病灶的切片中，提取病灶轮廓的三维坐标信息；步骤8、将所有切片的病灶轮廓映射到同一个空间坐标系中；步骤9、基于平行截面轮廓构建曲面实体算法进行曲面重构；步骤10、相邻切片上的病灶轮廓信息进行关系匹配；若为“一对一”关系，执行步骤11；若为“一对多”关系，执行步骤12；若为“多对多”关系，执行步骤13；步骤11、“一对一”关系既用来通过蒙皮法创建曲面，还用来填补任意形状的平面闭合曲线围成的区域：首先计算闭合区域的质心，并在质心处创建一点圆，然后利用点圆和闭合曲线创建蒙皮平面或直纹平面来填充闭合区域；步骤12、构造“一对多”关系的包络面；利用凸包点信息，计算包络面的裁剪区间，并裁剪；计算填充区域边界线，利用Coons曲面片填充裁剪后的包络面；步骤13、构造“多对多”关系的包络面，抽取包络面的中间带曲面，抽取中间带的两条边界线，两条边界线和原“多对多”关系转换成两个“一对多”关系，再执行步骤11；步骤14、在当前空间坐标系下得到重构后的病灶曲面实体，重现病灶在三维空间的立体表示。具体的，所述步骤1具体为：通过所述医学图像预处理子系统，将DCM格式的医学图像转换为第二格式的图像，得到当前病人所有剖面的图像切片N张。第三方面，本发明的另一个实施例公开了一种非易失性存储器，所述存储器上存储有指令，所述指令被处理器执行时，用于实现上述的一种结核性脑膜脑炎重建方法。本发明使用多切片双阈值检测机制，降低了单阈值检测所带来的误检和漏检错误；进一步的，使用Transformer架构组成的编码器和解码器替代了传统RCNN模型的特征提取网络和候选框生成网络，基于编码器和解码器构造了全新的FPN结构，构建了SWTED检测模型，提升了检测效率和准确率；重现结核性脑膜脑炎病灶在三维空间的立体表示；可以协助对结核性脑膜脑炎进行高效、准确诊断。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明实施例提供的一种结核性脑膜脑炎重建系统示意图；图2是本发明实施例提供的SWTED模型示意图；图3是本发明实施例提供的Swin Transformer编码器和解码器示意图；图4是本发明实施例提供的多切片双阈值检测示意图；图5是本发明实施例提供的一种结核性脑膜脑炎重建方法流程图；图6是本发明实施例提供的一种结核性脑膜脑炎重建设备示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员所获得的所有其他实施例，都属于本发明保护的范围。实施例一参考图1，本实施例提供了一种结核性脑膜脑炎重建系统，其包括：一医学图像预处理子系统；所述医学图像预处理子系统用于将医学图像进行格式转换为第二格式图像；其中第二格式图像可以是PNG、JPG等图像格式。医学图像文件后缀通常为DCM，为了后续方便处理图像，本实施例需要将所有图像切片转换成无损的PNG图像格式。具体的，可以包括以下步骤：步骤1、通过python的pydicom库的dcmread方法获取dcm文件信息，再利用pixel_array方法来获取像素矩阵；步骤2、将像素矩阵的值设置在0到255之间；步骤3、对像素矩阵进行类型转换，从uint16转换到uint8；步骤4、利用Pillow库的save方法将像素矩阵保存为PNG图像；步骤5、重复步骤2、3、4，得到所有切片图像；一病灶检测子系统；所述病灶检测子系统用于检测医学图像中的病灶；在整个重建过程中，本实施例只针对病灶部分的重建，重现病灶在头部三维空间的立体表示，因此需要对病灶进行检测。具体的，本实施例的病灶是结核性脑膜脑炎。在本实施例的另一个实施方式中，所述病灶检测子系统使用SWTED检测模型来检测图像切片中的病灶，所述SWTED模型包括一Swin Transformers Encoder模块，用于提取关键特征，一Transformer Decoder模型，用于通过提取的关键特征生成候选框，一特征图构成模型，用于利用所述Swin Transformers Encoder模块提取的关键特征以及所述候选框构成特征图并通过缩放统一特征图尺寸，一全连接层，用于对所述特征图进行边界框以及类别的预测；一掩码分割层，用于对所述特征图进行待分割对象轮廓的预测。具体的，可以包括以下步骤：步骤1、构建了SWTED检测模型；模型的整体结构如图2所示；该模型工作流程为Swin Transformers Encoder部分提取关键特征,TransformerDecoder部分通过提取的关键特征生成候选框，然后利用Encoder部分提取的特征以及候选框构成特征图并通过缩放统一特征图尺寸。特征图分别通过全连接层预测边界框以及类别从而提升预测精细度，利用掩码分割能够更容易预测待分割对象轮廓；具体的，Swin Transformer中的编码器和解码器整体结构如图3所示。其中多头自注意力计算公式如-所示,公式中Q、K、V来源于输入特征本身，是根据输入特征生成的向量，是一组可学习的权重矩阵，是相应的分量，用于融合由多个头部产生的结果，是一个可学习的参数，是比例因子。本实施例的SWTED检测模型：1）用移动窗口的Transformer架构代替卷积网络作为模型的特征提取编码器。Transformer架构的优点在于拥有全局注意力，能提取特征空间中的长距离相关性，提升了模型的特征提取能力；2）用Transformer架构构成的解码器代替区域建议网络进行候选框的生成。Transformer架构的自注意力机制对目标检测是非常友好的，因为通过Transformer得到的特征向量数量和特征图空间像素个数是一样的，同时位置也是一一对应的，而图像中两个像素点本身就可以构建出一个候选框；3）对编码器和解码器构造FPN结构对输入图像进行缩放、数据增强和标准化等预处理操作；训练解码器，使用大型数据集预训练模型初始化编码器权重，端到端训练解码器，用于生成候选框；对候选框的回归参数、分类结果和掩码分割进行预测和损失计算；一多切片双阈值检测子系统；所述多切片双阈值检测子系统用于双阈值对所述病灶检测子系统检测出来的病灶进行检测；具体的，所述双阈值包括第一阈值、第二阈值，其中第一阈值高于第二阈值；对检测出的病灶大于或等于第二阈值，小于第一阈值的切片图像进行第二次检测，所述第二次检测为：检测前后切片相邻位置上是否存在置信度大于等于第一阈值的病灶，存在则保存当前检测目标，不存在则进行去除；或/和检测前后切片相邻位置上是否同时存在置信度小于第一阈值大于等于第二阈值的病灶，存在则保存当前检测目标，不存在则进行去除；由于模型在对病灶进行检测的时候是在单个切片上进行的，因此检测阈值的设定对结果的影响是非常大的，过高的阈值设定会导致漏检，过低的阈值设定会导致误检。为了避免这种单切片固定阈值检测所带来的影响，根据病灶在切片上的连续性，本实施例提出了多切片双阈值检测机制。具体的，可以包括以下步骤：步骤1、设定第一阈值和第二阈值两种检测阈值；步骤2、对切片图像依次进行病灶检测；步骤3、对检测目标的置信度进行判断，大于等于第一阈值的病灶进行保存；小于第二阈值的病灶直接去除；小于第一阈值大于等于第二阈值的病灶执行步骤4和步骤5；步骤4、检测前后切片相邻位置上是否存在置信度大于等于第一阈值的病灶，存在则保存当前检测目标，不存在则进行去除；步骤5、检测前后切片相邻位置上是否同时存在置信度小于第一阈值大于等于第二阈值的病灶，存在则保存当前检测目标，不存在则进行去除；实际情况如图4所示，这里设置0.8为第一阈值，0.5为第二阈值：本实施例的第一阈值为0.8，第二阈值为0.5，第一阈值高于第二阈值。其存在如下4种情况：情况一：检测的切片病灶的置信度为0.85，其大于第一阈值0.8，保存；情况二：检测的切片病灶的置信度为0.4，其大于第二阈值0.5，去除；情况三：检测的切片病灶的置信度为0.7，其小于第一阈值0.8大于第二阈值0.5，但后切片相邻区域的病灶的置信度为0.85，大于第一阈值0.8，保存；情况四：检测的切片病灶的置信度为0.7，其小于第一阈值0.8大于第二阈值0.5，但后切片相邻区域的病灶的置信度为0.65，大于第二阈值0.5，并且前切片相邻区域的病灶的置信度为0.6，大于第二阈值0.5，保存。一影像重建子系统；所述影像重建子系统使用所述多切片双阈值检测子系统获取的检测目标进行病灶的三维重建；具体的影像重建子系统还包括如下模块：空间坐标系建立模块，用于建立空间坐标系0XYZ，根据矢状面、冠状面和横断面切片的所在位置，将存在病灶的切片的四个顶点映射在三维坐标信息中；病灶轮廓的三维坐标信息获取模块，用于从检测出存在病灶的切片中，提取病灶轮廓的三维坐标信息；病灶轮廓映射模块，用于将所有切片的病灶轮廓映射到同一个空间坐标系中；曲面重构模块，用于基于平行截面轮廓构建曲面实体算法进行曲面重构；切片病灶轮廓信息关系匹配模块，用于对相邻切片上的病灶轮廓信息进行关系匹配；若为“一对一”关系，执行第一计算模块；若为“一对多”关系，执行第二计算模块；若为“多对多”关系，执行第三计算模块；第一计算模块，用于“一对一”关系既可以用来通过蒙皮法创建曲面，还可以用来填补任意形状的平面闭合曲线围成的区域：首先计算闭合区域的质心，并在质心处创建一点圆，然后利用点圆和闭合曲线创建蒙皮平面或直纹平面来填充闭合区域；第二计算模块，用于构造“一对多”关系的包络面；利用凸包点信息，计算包络面的裁剪区间，并裁剪；计算填充区域边界线，利用Coons曲面片填充裁剪后的包络面；第三计算模块，用于构造“多对多”关系的包络面，抽取包络面的中间带曲面，抽取中间带的两条边界线，两条边界线和原“多对多”关系转换成两个“一对多”关系，再执行第一计算模块；三维立体表示模块、用于在当前空间坐标系下得到重构后的病灶曲面实体，重现病灶在三维空间的立体表示。由于脑部影像切片中存在大量无用的信息，为了帮助医生对结核性脑膜脑炎进行高效、准确诊断，因此本实施例主要是针对病灶进行重建。对病人影像切片进行检测和重建，检测和重建的流程如图5所示，具体的包括以下步骤；步骤1、通过DICOM医学图像预处理子系统，得到当前病人所有剖面的图像切片N张。步骤2、统计不同剖面的切片的数量，记为矢状面N1张、冠状面N2张、横断面N3张，存在关系N=N1+N2+N3；步骤3、通过病灶检测子系统对N1、N2、N3的切片依次进行病灶检测；步骤4、利用多切片双阈值检测子系统对病灶检测子系统识别到的病灶进行筛选；步骤5、将矢状面、冠状面、横断面中存在病灶的切片张数记为L1、L2、L3；步骤6、建立空间坐标系0XYZ，根据矢状面、冠状面和横断面切片的所在位置，将存在病灶的切片的四个顶点映射在三维坐标信息中；步骤7、从检测出存在病灶的切片中，提取病灶轮廓的三维坐标信息；步骤8、将所有切片的病灶轮廓映射到同一个空间坐标系中；步骤9、基于平行截面轮廓构建曲面实体算法进行曲面重构；步骤10、相邻切片上的病灶轮廓信息进行关系匹配；若为“一对一”关系，执行步骤11；若为“一对多”关系，执行步骤12；若为“多对多”关系，执行步骤13；步骤11、“一对一”关系既可以用来通过蒙皮法创建曲面，还可以用来填补任意形状的平面闭合曲线围成的区域：首先计算闭合区域的质心，并在质心处创建一点圆，然后利用点圆和闭合曲线创建蒙皮平面或直纹平面来填充闭合区域；步骤12、构造“一对多”关系的包络面。利用凸包点信息，计算包络面的裁剪区间，并裁剪。计算填充区域边界线，利用Coons曲面片填充裁剪后的包络面；步骤13、构造“多对多”关系的包络面，抽取包络面的中间带曲面，抽取中间带的两条边界线，两条边界线和原“多对多”关系转换成两个“一对多”关系，再执行步骤11；步骤14、在当前空间坐标系下得到重构后的病灶曲面实体，重现病灶在三维空间的立体表示。本实施例使用多切片双阈值检测机制，降低了单阈值检测所带来的误检和漏检错误；进一步的，使用Transformer架构组成的编码器和解码器替代了传统RCNN模型的特征提取网络和候选框生成网络，基于编码器和解码器构造了全新的FPN结构，构建了SWTED检测模型，提升了检测效率和准确率；重现结核性脑膜脑炎病灶在三维空间的立体表示；可以协助对结核性脑膜脑炎进行高效、准确诊断。实施例二参考图5，本实施例提供了一种结核性脑膜脑炎重建方法，其包括如下步骤：步骤1、获取当前病人所有剖面的图像切片N张；通过DICOM医学图像预处理子系统，得到当前病人所有剖面的图像切片N张。步骤2、统计不同剖面的切片的数量，记为矢状面N1张、冠状面N2张、横断面N3张，其中 N=N1+N2+N3；步骤3、通过病灶检测子系统对N1、N2、N3的切片依次进行病灶检测；步骤4、利用多切片双阈值检测子系统对病灶检测子系统识别到的病灶进行筛选；步骤5、将矢状面、冠状面、横断面中存在病灶的切片张数记为L1、L2、L3；步骤6、建立空间坐标系0XYZ，根据矢状面、冠状面和横断面切片的所在位置，将存在病灶的切片的四个顶点映射在三维坐标信息中；步骤7、从检测出存在病灶的切片中，提取病灶轮廓的三维坐标信息；步骤8、将所有切片的病灶轮廓映射到同一个空间坐标系中；步骤9、基于平行截面轮廓构建曲面实体算法进行曲面重构；步骤10、相邻切片上的病灶轮廓信息进行关系匹配；若为“一对一”关系，执行步骤11；若为“一对多”关系，执行步骤12；若为“多对多”关系，执行步骤13；步骤11、“一对一”关系既可以用来通过蒙皮法创建曲面，还可以用来填补任意形状的平面闭合曲线围成的区域：首先计算闭合区域的质心，并在质心处创建一点圆，然后利用点圆和闭合曲线创建蒙皮平面或直纹平面来填充闭合区域；步骤12、构造“一对多”关系的包络面；利用凸包点信息，计算包络面的裁剪区间，并裁剪；计算填充区域边界线，利用Coons曲面片填充裁剪后的包络面；步骤13、构造“多对多”关系的包络面，抽取包络面的中间带曲面，抽取中间带的两条边界线，两条边界线和原“多对多”关系转换成两个“一对多”关系，再执行步骤11；步骤14、在当前空间坐标系下得到重构后的病灶曲面实体，重现病灶在三维空间的立体表示。本实施例使用多切片双阈值检测机制，降低了单阈值检测所带来的误检和漏检错误；进一步的，使用Transformer架构组成的编码器和解码器替代了传统RCNN模型的特征提取网络和候选框生成网络，基于编码器和解码器构造了全新的FPN结构，构建了SWTED检测模型，提升了检测效率和准确率；重现结核性脑膜脑炎病灶在三维空间的立体表示；可以协助对结核性脑膜脑炎进行高效、准确诊断。实施例三参考图6，图6是本实施例的一种结核性脑膜脑炎重建设备的结构示意图。该实施例的结核性脑膜脑炎重建设备20包括处理器21、存储器22以及存储在所述存储器22中并可在所述处理器21上运行的计算机程序。所述处理器21执行所述计算机程序时实现上述方法实施例中的步骤。或者，所述处理器21执行所述计算机程序时实现上述各装置实施例中各模块/单元的功能。示例性的，所述计算机程序可以被分割成一个或多个模块/单元，所述一个或者多个模块/单元被存储在所述存储器22中，并由所述处理器21执行，以完成本发明。所述一个或多个模块/单元可以是能够完成特定功能的一系列计算机程序指令段，该指令段用于描述所述计算机程序在所述结核性脑膜脑炎重建设备20中的执行过程。例如，所述计算机程序可以被分割成实施例一中的各个子系统,各字系统具体功能请参考上述实施例所述的装置的工作过程，在此不再赘述。所述一种结核性脑膜脑炎重建设备20可包括，但不仅限于，处理器21、存储器22。本领域技术人员可以理解，所述示意图仅仅是一种结核性脑膜脑炎重建设备20的示例，并不构成对一种结核性脑膜脑炎重建20的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件，例如所述一种结核性脑膜脑炎重建20还可以包括输入输出设备、网络接入设备、总线等。所述处理器21可以是中央处理单元，还可以是其他通用处理器、数字信号处理器 、专用集成电路、现成可编程门阵列  或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等，所述处理器21是所述一种结核性脑膜脑炎重建设备20的控制中心，利用各种接口和线路连接整个一种结核性脑膜脑炎重建设备20的各个部分。所述存储器22可用于存储所述计算机程序和/或模块，所述处理器21通过运行或执行存储在所述存储器22内的计算机程序和/或模块，以及调用存储在存储器22内的数据，实现所述一种结核性脑膜脑炎重建设备20的各种功能。所述存储器22可主要包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需的应用程序等；存储数据区可存储根据手机的使用所创建的数据等。此外，存储器22可以包括高速随机存取存储器，还可以包括非易失性存储器，例如硬盘、内存、插接式硬盘，智能存储卡，安全数字卡，闪存卡、至少一个磁盘存储器件、闪存器件、或其他易失性固态存储器件。其中，所述一种结核性脑膜脑炎重建设备20集成的模块/单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明实现上述实施例方法中的全部或部分流程，也可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一计算机可读存储介质中，该计算机程序在被处理器21执行时，可实现上述各个方法实施例的步骤。其中，所述计算机程序包括计算机程序代码，所述计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。所述计算机可读介质可以包括：能够携带所述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。需要说明的是，所述计算机可读介质包含的内容可以根据司法管辖区内立法和专利实践的要求进行适当的增减，例如在某些司法管辖区，根据立法和专利实践，计算机可读介质不包括电载波信号和电信信号。需说明的是，以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。另外，本发明提供的装置实施例附图中，模块之间的连接关系表示它们之间具有通信连接，具体可以实现为一条或多条通信总线或信号线。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
