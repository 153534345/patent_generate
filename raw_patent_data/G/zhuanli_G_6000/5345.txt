标题title
路径规划方法、装置、车辆及存储介质
摘要abst
本公开涉及自动驾驶领域，涉及一种路径规划方法、装置、车辆及存储介质，该方法包括在确定车辆进入目标车道后，获取所述目标车道的车道中心线上的多个预先设置的路径点；获取每个所述路径点在所述车道中心线上的位置信息；根据所述位置信息，确定每个所述路径点对应的目标偏离距离，所述目标偏离距离用于表征所述车辆在行驶至所述路径点时偏离所述车道中心线的距离；根据所述路径点对应的目标偏离距离进行路径规划。
权利要求书clms
1.一种路径规划方法，其特征在于，所述方法包括：在确定车辆进入目标车道后，获取所述目标车道的车道中心线上的多个预先设置的路径点；获取每个所述路径点在所述车道中心线上的位置信息；根据所述位置信息，确定每个所述路径点对应的目标偏离距离，所述目标偏离距离用于表征所述车辆在行驶至所述路径点时偏离所述车道中心线的距离；根据所述路径点对应的目标偏离距离进行路径规划。2.根据权利要求1所述的方法，其特征在于，所述根据所述位置信息，确定每个所述路径点对应的目标偏离距离包括：针对每个所述路径点，根据所述路径点的位置信息确定所述路径点对应的偏离权重，所述偏离权重用于表征所述车辆在行驶至所述路径点的偏离程度；从多个最大偏离距离中确定待定偏离距离；根据所述偏离权重和所述待定偏离距离，确定所述路径点对应的目标偏离距离。3.根据权利要求2所述的方法，其特征在于，所述根据所述路径点的位置信息确定所述路径点对应的偏离权重包括：获取所述车辆从起始路径点行驶至所述路径点的行驶距离；根据所述行驶距离确定所述路径点对应的偏离权重。4.根据权利要求2所述的方法，其特征在于，所述从多个最大偏离距离中确定待定偏离距离包括：在确定所述目标车道上存在障碍物的情况下，获取所述目标车道的车道边界；获取所述障碍物距离所述车道边界的边界距离；根据所述边界距离中的最大距离和第一预设偏离比例，确定所述待定偏离距离。5.根据权利要求2所述的方法，其特征在于，所述从多个最大偏离距离中确定待定偏离距离包括：在确定所述目标车道上不存在障碍物的情况下，根据所述目标车道的车道距离与第二预设偏离比例，确定所述待定偏离距离。6.根据权利要求1至5中任一项所述的方法，其特征在于，所述根据所述路径点对应的目标偏离距离进行路径规划包括：根据所述多个路径点对应的目标偏离距离，确定多个规划路径点；根据多个所述规划路径点确定规划路径的路径曲线，以进行路径规划。7.一种路径规划装置，其特征在于，包括：第一获取模块，被配置为在确定车辆进入目标车道后，获取所述目标车道的车道中心线上的多个预先设置的路径点；第二获取模块，被配置为获取每个所述路径点在所述车道中心线上的位置信息；确定模块，被配置为根据所述位置信息，确定每个所述路径点对应的目标偏离距离，所述目标偏离距离用于表征所述车辆在行驶至所述路径点时偏离所述车道中心线的距离；路径规划模块，被配置为根据所述路径点对应的目标偏离距离进行路径规划。8.一种车辆，其特征在于，包括：处理器；用于存储处理器可执行指令的存储器；其中，所述处理器被配置为：实现权利要求1-6中任一项所述方法的步骤。9.一种计算机可读存储介质，其上存储有计算机程序指令，其特征在于，该程序指令被处理器执行时实现权利要求1-6中任一项所述方法的步骤。
说明书desc
技术领域本公开涉及自动驾驶技术领域，尤其涉及一种路径规划方法、装置、车辆及存储介质。背景技术在车辆的自动驾驶路径规划过程中，通常以高精地图中车道中心线作为参考路径，车辆的规划路径也会尽可能的贴近车道中心线。但是在自身车辆进入调头的路径规划场景时，调头的所有车辆均以车道中心线为参考路径，那么自身车辆在进弯和出弯过程中会容易与车道中的相邻车流剐蹭，造成事故。发明内容为克服相关技术中存在的问题，本公开提供一种路径规划方法、装置、车辆及存储介质。根据本公开实施例的第一方面，提供一种路径规划方法，所述方法包括：在确定车辆进入目标车道后，获取所述目标车道的车道中心线上的多个预先设置的路径点；获取每个所述路径点在所述车道中心线上的位置信息；根据所述位置信息，确定每个所述路径点对应的目标偏离距离，所述目标偏离距离用于表征所述车辆在行驶至所述路径点时偏离所述车道中心线的距离；根据所述路径点对应的目标偏离距离进行路径规划。可选地，所述根据所述位置信息，确定每个所述路径点对应的目标偏离距离包括：针对每个所述路径点，根据所述路径点的位置信息确定所述路径点对应的偏离权重，所述偏离权重用于表征所述车辆在行驶至所述路径点的偏离程度；从多个最大偏离距离中确定待定偏离距离；根据所述偏离权重和所述待定偏离距离，确定所述路径点对应的目标偏离距离。可选地，所述根据所述路径点的位置信息确定所述路径点对应的偏离权重包括：获取所述车辆从起始路径点行驶至所述路径点的行驶距离；根据所述行驶距离确定所述路径点对应的偏离权重。可选地，所述从多个最大偏离距离中确定待定偏离距离包括：在确定所述目标车道上存在障碍物的情况下，获取所述目标车道的车道边界；获取所述障碍物距离所述车道边界的边界距离；根据所述边界距离中的最大距离和第一预设偏离比例，确定所述待定偏离距离。可选地，所述从多个最大偏离距离中确定待定偏离距离包括：在确定所述目标车道上不存在障碍物的情况下，根据所述目标车道的车道距离与第二预设偏离比例，确定所述待定偏离距离。可选地，所述根据所述路径点对应的目标偏离距离进行路径规划包括：根据所述多个路径点对应的目标偏离距离，确定多个规划路径点；根据多个所述规划路径点确定规划路径的路径曲线，以进行路径规划。根据本公开实施例的第二方面，提供一种路径规划装置，包括：第一获取模块，被配置为在确定车辆进入目标车道后，获取所述目标车道的车道中心线上的多个预先设置的路径点；第二获取模块，被配置为获取每个所述路径点在所述车道中心线上的位置信息；确定模块，被配置为根据所述位置信息，确定每个所述路径点对应的目标偏离距离，所述目标偏离距离用于表征所述车辆在行驶至所述路径点时偏离所述车道中心线的距离；路径规划模块，被配置为根据所述路径点对应的目标偏离距离进行路径规划。可选地，所述确定模块包括：第一确定子模块，被配置为针对每个所述路径点，根据所述路径点的位置信息确定所述路径点对应的偏离权重，所述偏离权重用于表征所述车辆在行驶至所述路径点的偏离程度；可选地，所述第一确定子模块，被配置为获取所述车辆从起始路径点行驶至所述路径点的行驶距离；根据所述行驶距离确定所述路径点对应的偏离权重。第二确定子模块，被配置为从多个最大偏离距离中确定待定偏离距离；可选地，所述第二确定子模块，被配置为在确定所述目标车道上存在障碍物的情况下，获取所述目标车道的车道边界；获取所述障碍物距离所述车道边界的边界距离；根据所述边界距离中的最大距离和第一预设偏离比例，确定所述待定偏离距离。可选地，所述第二确定子模块，被配置为在确定所述目标车道上不存在障碍物的情况下，根据所述目标车道的车道距离与第二预设偏离比例，确定所述待定偏离距离。第三确定子模块，被配置为根据所述偏离权重和所述待定偏离距离，确定所述路径点对应的目标偏离距离。可选地，所述路径规划模块被配置为根据所述多个路径点对应的目标偏离距离，确定多个规划路径点；根据多个所述规划路径点确定规划路径的路径曲线，以进行路径规划。根据本公开实施例的第三方面，提供一种车辆，包括：处理器；用于存储处理器可执行指令的存储器；其中，所述处理器被配置为：实现本公开第一方面所提供的路径规划方法的步骤。根据本公开实施例的第四方面，提供一种计算机可读存储介质，其上存储有计算机程序指令，该程序指令被处理器执行时实现本公开第一方面所提供的路径规划方法的步骤。本公开的实施例提供的技术方案可以包括以下有益效果：在确定车辆进入目标车道后，通过获取所述目标车道的车道中心线上的多个预先设置的路径点；获取每个所述路径点在所述车道中心线上的位置信息；根据所述位置信息，确定每个所述路径点对应的目标偏离距离，所述目标偏离距离用于表征所述车辆在行驶至所述路径点时偏离所述车道中心线的距离；根据所述路径点对应的目标偏离距离进行路径规划。这样，通过根据车辆在行驶至每个路径点时偏离所述车道中心线的距离，可以确定出多个所述路径点对应的目标偏离距离，然后根据目标偏离距离进行路径规划，使得车辆在目标车道上行驶的过程中，进弯和出弯时偏离车道中心线，从而远离目标车道中的相邻车流，防止自身车辆和目标车道中的相邻车流的车辆出现剐蹭事故，提高车辆按规划路径行驶的安全性。应当理解的是，以上的一般描述和后文的细节描述仅是示例性和解释性的，并不能限制本公开。附图说明此处的附图被并入说明书中并构成本说明书的一部分，示出了符合本公开的实施例，并与说明书一起用于解释本公开的原理。图1是根据一示例性实施例示出的一种路径规划方法的流程图。图2是根据一示例性实施例示出的一种车辆进入目标车道的示意图。图3是根据一示例性实施例示出的另一种路径规划方法的流程图。图4是根据一示例性实施例示出的一种路径规划装置的框图。图5是根据图4所示实施例示出的一种确定模块的框图。图6是根据一示例性实施例示出的一种车辆的功能框图示意图。具体实施方式这里将详细地对示例性实施例进行说明，其示例表示在附图中。下面的描述涉及附图时，除非另有表示，不同附图中的相同数字表示相同或相似的要素。以下示例性实施例中所描述的实施方式并不代表与本公开相一致的所有实施方式。相反，它们仅是与如所附权利要求书中所详述的、本公开的一些方面相一致的装置和方法的例子。需要说明的是，本申请中所有获取信号、信息或数据的动作都是在遵照所在地国家相应的数据保护法规政策的前提下，并获得由相应装置所有者给予授权的情况下进行的。在详细介绍本公开的具体实施方式之前，首先对本公开的应用场景进行说明。目前，在车辆的自动驾驶过程中，需要对车辆行驶的道路进行路径规划，输出车辆待行驶的行驶轨迹，在通常情况下，以高精地图中目标车道的车道中心线作为参考路径来进行路径规划，但是在针对有调头控制的路径规划场景中，由于调头的所有车辆均以车道中心线为参考路径，那么自身车辆在同样选择车道中心线作为参考路径的情况下，在进弯和出弯过程中会容易与车道中的相邻车流剐蹭，造成事故，影响车辆按规划路径行驶的安全。为了克服以上相关技术中存在的技术问题，本公开提供了一种路径规划方法、装置、车辆及存储介质，通过根据车辆在行驶至每个路径点时偏离该车道中心线的距离，可以确定出多个该路径点对应的目标偏离距离，然后根据目标偏离距离进行路径规划，使得车辆在目标车道上行驶的过程中，进弯和出弯时偏离车道中心线，从而远离目标车道中的相邻车流，防止自身车辆和目标车道中的相邻车流的车辆出现剐蹭事故，提高车辆按规划路径行驶的安全性。下面结合具体实施例对本公开进行说明。图1是根据一示例性实施例示出的一种路径规划方法的流程图，如图1所示，该方法可以包括：在步骤S101中，在确定车辆进入目标车道后，获取该目标车道的车道中心线上的多个预先设置的路径点。其中，该车道中心线上的多个预先设置的路径点可以通过车辆内置的当前区域的高精度地图来获取。在一些实施例中，根据预先获取的高精度地图，在确定该车辆与该目标车道的路口的距离在预设距离范围内时，可以获取该车辆在该目标车道中的位置信息，并根据该位置信息，通过高精度地图确定该车辆的位置与该目标车道的路口位置的距离，在该距离位于预设距离范围内，且该车辆的行驶方向与该目标车道的车道方向相同的情况下，确定该车辆进入该目标车道。例如，如图2所示，该车辆A距离该目标车道的路口的距离值为a，预设距离范围值为b，在a＜b，且该车辆的行驶方向与该目标车道的道路方向相同的情况下，可以确定该车辆进入该目标车道。在步骤S102中，获取每个该路径点在该车道中心线上的位置信息。示例地，可以根据车道中心线的切线向量t和法线向量n来建立预设坐标系，该预设坐标系用于描述车辆相对于道路的位置，根据该车道中心线在该预设坐标系中的位置关系，可以确定基于该预设坐标系的每个该路径点在该车道中心线上的位置信息。例如，该预设坐标系可以采用Frenet坐标系，本文对此不作限定。在步骤S103中，根据该位置信息，确定每个该路径点对应的目标偏离距离。其中，该目标偏离距离用于表征该车辆在行驶至该路径点时偏离该车道中心线的距离。在本步骤中，在确定每个该路径点在该车道中心线上的位置信息之后，可以根据每个该路径点在目标车道的车道中心线上的位置，通过确定的偏离权重来确定该车辆在行驶至该路径点时的偏离程度，该偏离程度可以通过该车辆在行驶至该路径点时偏离该车道中心线的距离来表示。在一些实施例中，首先可以针对每个该路径点，根据该路径点的位置信息确定该路径点对应的偏离权重。在本步骤中，可以先获取该车辆从起始路径点行驶至该路径点的行驶距离，然后根据该行驶距离确定该路径点对应的偏离权重。示例地，在多个预先设置的路径点是等距离设置在该目标车道的车道中心线上的情况下，可以根据任一个路径点与和它相邻的一个路径点之间的距离，以及该车辆从起始路径点行驶至该路径点所经过的路径点数量，来确定该车辆从起始路径点行驶至该路径点的行驶距离，然后将该行驶距离在该车道中心线的总长度中所占的比重作为偏离权重函数的输入，来确定该车辆行驶至该路径点处的偏离权重。或者，在多个预先设置的路径点是非等距离设置在该目标车道的车道中心线上的情况下，可以将每个路径点与和它相邻的一个路径点之间的距离相加，得到该车辆从起始路径点行驶至该路径点的总的行驶距离，然后将该行驶距离在该车道中心线的总长度中所占的比重作为偏离权重函数的输入，来确定该车辆行驶至该路径点处的偏离权重。需要说明的是，在该路径点为车道中心线上的起始路径点的情况下，可以将该车辆的行驶距离视为0，从而确定该车辆在起始路径点处不存在偏离权重。例如，在多个预先设置的路径点是等距离设置在该目标车道的车道中心线上的情况下，多个预先设置的相邻路径点之间的距离为ΔS，该车辆从起始路径点行驶至第i个路径点时所经过的路径点数量为i，该车道中心线的总长度可以表示为S，该偏离权重函数可以通过正弦函数来表示，例如，该偏离权重可以通过以下公式来表示：；其中，i为大于或者等于1的正整数；为圆周率，即圆的周长与直径的比值。以及，在多个预先设置的路径点是不等距离设置在该目标车道的车道中心线上的情况下，相邻路径点之间的距离分别为，该车辆从起始路径点行驶至第i个路径点时所经过的行驶距离可以表示为，该偏离权重函数可以通过正弦函数来表示，例如，该偏离权重可以通过以下公式来表示：；其中，i为大于或者等于1的正整数；为圆周率，即圆的周长与直径的比值。其次，从多个最大偏离距离中确定待定偏离距离。在本步骤中，该最大偏离距离可以指该车辆在目标车道中行驶时，距离车道中心线能够偏离的最大距离，一种可能的实现方式中，在确定该目标车道上存在障碍物的情况下，可以首先获取该目标车道的车道边界，然后再获取该障碍物距离该车道边界的边界距离，该目标车道的车道边界可以指该目标车道的两侧边界线，然后根据该障碍物距离该目标车道两侧的边界线的垂直距离，确定该障碍物距离该车道边界的边界距离，该边界距离包括该障碍物的左侧距离该目标车道的左侧的边界线的第一边界距离，该障碍物的右侧距离该目标车道的右侧的边界线的第二边界距离，再根据该边界距离中的最大距离和第一预设偏离比例，确定该待定偏离距离，其中，第一预设偏离比例可以根据经验值设置为1/4。另一种可能的实现方式中，在确定该目标车道上不存在障碍物的情况下，根据该目标车道的车道距离与第二预设偏离比例，确定该待定偏离距离。然后，根据该偏离权重和该待定偏离距离，确定该路径点对应的目标偏离距离。在本步骤中，在确定该偏离权重和该待定偏离距离之后，可以根据该偏离权重和该待定偏离距离的乘积来确定该路径点对应的目标偏离距离，该目标偏离距离用于表示该车辆在行驶至该路径点时，该车辆对应的偏离距离。在步骤S104中，根据该路径点对应的目标偏离距离进行路径规划。在本步骤中，首先可以根据该多个路径点对应的目标偏离距离，确定多个规划路径点。示例地，可以根据每个路径点对应的目标偏离距离，将该路径点的位置信息按照该目标偏离距离进行调整，得到新的位置信息，并将该新的位置信息作为该路径点对应的规划路径点。例如，在该车道中心线上的一个路径点的位置信息可以根据frenet坐标系，表示为，s为沿着该路径点处该车道中心线的切线的距离，d为沿着该路径点处该车道中心线的法线的距离，在确定该路径点处的目标偏离距离为Δd1的情况下，可以确定与该路径点对应的规划路径点的位置信息表示为，进而确定每个该路径点对应的规划路径点的位置信息。然后，根据多个该规划路径点确定规划路径的路径曲线，以进行路径规划。在本步骤中，可以首先根据多个该路径点对应的规划路径点的位置信息，计算得到多个初始控制点，然后再基于目标函数和多个约束条件的约束，来调整初始控制点，以确定得到多个目标控制点，然后再根据多个目标控制点来确定规划路径的路径曲线。其中，该目标函数可以提供以下公式确定：，；其中，为目标函数，为目标车道的车道中心线上的任一路径点，为该路径点对应的目标偏离距离，为该路径点对应的偏离权重，为该路径点对应的待定偏离距离，其中，目标函数中的为与多个规划路径点组成的路径的的距离最小代价，为道路居S中代价，为路径二阶平滑性代价，为路径三阶平滑性代价；分别表示各项代价的权重系数，在不同的自动驾驶场景中，设置的数值不同，例如在平滑性要求较高的场景中，就会设置的较高，又如在与规划路径点重合度要求较高的场景下，可以将设置较高，从而提升不同场景下的路径优化效果。在本步骤中，根据多个该规划路径点确定规划路径的路径曲线的方式与现有技术相同，在此不再赘述。采用上述方法，在确定车辆进入目标车道后，通过获取该目标车道的车道中心线上的多个预先设置的路径点；获取每个该路径点在该车道中心线上的位置信息；根据该位置信息，确定每个该路径点对应的目标偏离距离，该目标偏离距离用于表征该车辆在行驶至该路径点时偏离该车道中心线的距离；根据该路径点对应的目标偏离距离进行路径规划。这样，通过根据车辆在行驶至每个路径点时偏离该车道中心线的距离，可以确定出多个该路径点对应的目标偏离，然后根据目标偏离进行路径规划，使得车辆在目标车道上行驶的过程中，进弯和出弯时偏离车道中心线，从而远离目标车道中的相邻车流，防止自身车辆和目标车道中的相邻车流的车辆出现剐蹭事故，提高车辆按规划路径行驶的安全性。图3是根据一示例性实施例示出的另一种路径规划方法的流程图，如图3所示，该方法可以包括：在步骤S301中，在确定车辆进入目标车道后，获取该目标车道的车道中心线上的多个预先设置的路径点。在一些实施例中，在确定车辆进入目标车道后，可以通过车辆内置的当前区域的高精度地图来获取目标车道的车道中心线，然后在该车道中心线上预先设置多个路径点。在步骤S302中，获取每个该路径点在该车道中心线上的位置信息。示例地，可以根据车道中心线的切线向量t和法线向量n来建立预设坐标系，该预设坐标系用于描述汽车相对于道路的位置，根据该车道中心线在该预设坐标系中的位置关系，可以确定基于该预设坐标系的每个该路径点在该车道中心线上的位置信息。在步骤S303中，获取该车辆从起始路径点行驶至该路径点的行驶距离。示例地，在多个预先设置的路径点是等距离设置在该目标车道的车道中心线上的情况下，可以根据任一个路径点与和它相邻的一个路径点之间的距离，以及该车辆从起始路径点行驶至该路径点所经过的路径点数量，来确定该车辆从起始路径点行驶至该路径点的行驶距离；或者，在多个预先设置的路径点是非等距离设置在该目标车道的车道中心线上的情况下，可以根据该车辆从起始路径点依次行驶至该路径点的所有距离为总的行驶距离。在步骤S304中，根据该行驶距离确定该路径点对应的偏离权重，其中，该偏离权重用于表征该车辆在行驶至该路径点的偏离程度。其中，可以计算该车辆从起始路径点行驶至该路径点的行驶距离在该车道中心线的总长度中所占的比重，然后将所占的比重作为偏离权重函数的输入，来确定该车辆从起始路径点行驶至该路径点处的偏离权重。需要说明的是，在该路径点为车道中心线上的起始路径点的情况下，可以将该车辆的行驶距离视为0，从而确定该车辆在起始路径点处不存在偏离权重。在确定该目标车道上存在障碍物的情况下，执行步骤S305-S306来从多个最大偏离距离中确定待定偏离距离，在确定该目标车道上不存在障碍物的情况下，执行步骤S307来从多个最大偏离距离中确定待定偏离距离；在步骤S305中，获取该目标车道的车道边界以及获取该障碍物距离该车道边界的边界距离。示例地，可以首先获取该目标车道的车道边界，然后再获取该障碍物距离该车道边界的边界距离，该目标车道的车道边界可以指该目标车道的两侧边界线，然后根据该障碍物距离该目标车道两侧的边界线的垂直距离，确定该障碍物距离该车道边界的边界距离。在步骤S306中，根据该边界距离中的最大距离和第一预设偏离比例，确定该待定偏离距离。示例地，该边界距离包括该障碍物的左侧距离该目标车道的左侧的边界线的第一边界距离，该障碍物的右侧距离该目标车道的右侧的边界线的第二边界距离，从第一边界距离和第二边界距离中确定最大距离，再根据该边界距离中的最大距离和第一预设偏离比例，确定该待定偏离距离，其中，第一预设偏离比例可以根据经验值设置为1/4。在步骤S307中，根据该目标车道的车道距离与第二预设偏离比例，确定该待定偏离距离。其中，第二预设偏离比例可以根据经验值设置为1/4或是其他经验值。在确定待定偏离距离之后，执行步骤S308；在步骤S308中，根据该偏离权重和该待定偏离距离，确定该路径点对应的目标偏离距离。其中，在确定该偏离权重和该待定偏离距离之后，可以根据该偏离权重和该待定偏离距离的乘积来确定该路径点对应的目标偏离距离，该目标偏离距离用于表示该车辆在行驶至该路径点时，该车辆对应的偏离距离。在步骤S309中，根据该路径点对应的目标偏离距离进行路径规划。在本步骤中，可以首先根据该多个路径点对应的目标偏离距离，确定多个规划路径点，然后根据多个该规划路径点确定规划路径的路径曲线，以进行路径规划。其中，根据多个该规划路径点确定规划路径的路径曲线的方式与现有技术相同，在此不再赘述。采用上述方案，通过根据该目标车道上是否存在障碍物，来从多个最大偏离距离中确定待定偏离距离，然后根据该偏离权重确定该路径点对应的目标偏离距离来进行路径规划，这样可以在目标车道上存在障碍物的情况下，能够选择不同的规划路径点，从而远离目标车道上障碍物，防止自身车辆与障碍物发生事故。图4是根据一示例性实施例示出的一种路径规划装置的框图。参照图4，该装置包括第一获取模块401，第二获取模块402、确定模块403和路径规划模块404。该第一获取模块401，被配置为在确定车辆进入目标车道后，获取该目标车道的车道中心线上的多个预先设置的路径点；该第二获取模块402，被配置为获取每个该路径点在该车道中心线上的位置信息；该确定模块403，被配置为根据该位置信息，确定每个该路径点对应的目标偏离距离，该目标偏离距离用于表征该车辆在行驶至该路径点时偏离该车道中心线的距离；该路径规划模块404，被配置为根据该路径点对应的目标偏离距离进行路径规划。图5是根据图4所示实施例示出的一种确定模块的框图。参照图5，该确定模块403包括：第一确定子模块4031，被配置为针对每个该路径点，根据该路径点的位置信息确定该路径点对应的偏离权重，该偏离权重用于表征该车辆在行驶至该路径点的偏离程度；可选地，该第一确定子模块4031，被配置为获取该车辆从起始路径点行驶至该路径点的行驶距离；根据该行驶距离确定该路径点对应的偏离权重。第二确定子模块4032，被配置为从多个最大偏离距离中确定待定偏离距离；可选地，该第二确定子模块4032，被配置为在确定该目标车道上存在障碍物的情况下，获取该目标车道的车道边界；获取该障碍物距离该车道边界的边界距离；根据该边界距离中的最大距离和第一预设偏离比例，确定该待定偏离距离。可选地，该第二确定子模块4032，被配置为在确定该目标车道上不存在障碍物的情况下，根据该目标车道的车道距离与第二预设偏离比例，确定该待定偏离距离。第三确定子模块4033，被配置为根据该偏离权重和该待定偏离距离，确定该路径点对应的目标偏离距离。可选地，该路径规划模块404被配置为根据该多个路径点对应的目标偏离距离，确定多个规划路径点；根据多个该规划路径点确定规划路径的路径曲线，以进行路径规划。关于上述实施例中的装置，其中各个模块执行操作的具体方式已经在有关该方法的实施例中进行了详细描述，此处将不做详细阐述说明。采用上述方案，通过根据车辆在行驶至每个路径点时偏离该车道中心线的距离，可以确定出多个该路径点对应的目标偏离，然后根据目标偏离进行路径规划，使得车辆在目标车道上行驶的过程中，进弯和出弯时偏离车道中心线，从而远离目标车道中的相邻车流，防止自身车辆和目标车道中的相邻车流的车辆出现剐蹭事故，提高车辆按规划路径行驶的安全性。本公开还提供一种计算机可读存储介质，其上存储有计算机程序指令，该程序指令被处理器执行时实现本公开提供的路径规划方法的步骤。参阅图6，图6是一示例性实施例示出的一种车辆600的功能框图示意图。车辆600可以被配置为完全或部分自动驾驶模式。例如，车辆600可以通过感知系统620获取其周围的环境信息，并基于对周边环境信息的分析得到自动驾驶策略以实现完全自动驾驶，或者将分析结果呈现给用户以实现部分自动驾驶。车辆600可包括各种子系统，例如，信息娱乐系统610、感知系统620、决策控制系统630、驱动系统640以及计算平台650。可选的，车辆600可包括更多或更少的子系统，并且每个子系统都可包括多个部件。另外，车辆600的每个子系统和部件可以通过有线或者无线的方式实现互连。在一些实施例中，信息娱乐系统610可以包括通信系统611，娱乐系统612以及导航系统613。通信系统611可以包括无线通信系统，无线通信系统可以直接地或者经由通信网络来与一个或多个设备无线通信。例如，无线通信系统可使用3G蜂窝通信，例如CDMA、EVD0、GSM/GPRS，或者4G蜂窝通信，例如LTE。或者5G蜂窝通信。无线通信系统可利用WiFi与无线局域网通信。在一些实施例中，无线通信系统可利用红外链路、蓝牙或ZigBee与设备直接通信。其他无线协议，例如各种车辆通信系统，例如，无线通信系统可包括一个或多个专用短程通信设备，这些设备可包括车辆和/或路边台站之间的公共和/或私有数据通信。娱乐系统612可以包括显示设备，麦克风和音响，用户可以基于娱乐系统在车内收听广播，播放音乐；或者将手机和车辆联通，在显示设备上实现手机的投屏，显示设备可以为触控式，用户可以通过触摸屏幕进行操作。在一些情况下，可以通过麦克风获取用户的语音信号，并依据对用户的语音信号的分析实现用户对车辆600的某些控制，例如调节车内温度等。在另一些情况下，可以通过音响向用户播放音乐。导航系统613可以包括由地图供应商所提供的地图服务，从而为车辆600提供行驶路线的导航，导航系统613可以和车辆的全球定位系统621、惯性测量单元622配合使用。地图供应商所提供的地图服务可以为二维地图，也可以是高精地图。感知系统620可包括感测关于车辆600周边的环境的信息的若干种传感器。例如，感知系统620可包括全球定位系统621、惯性测量单元622、激光雷达623、毫米波雷达624、超声雷达625以及摄像装置626。感知系统620还可包括被监视车辆600的内部系统的传感器。来自这些传感器中的一个或多个的传感器数据可用于检测对象及其相应特性。这种检测和识别是车辆600的安全操作的关键功能。全球定位系统621用于估计车辆600的地理位置。惯性测量单元622用于基于惯性加速度来感测车辆600的位姿变化。在一些实施例中，惯性测量单元622可以是加速度计和陀螺仪的组合。激光雷达623利用激光来感测车辆600所位于的环境中的物体。在一些实施例中，激光雷达623可包括一个或多个激光源、激光扫描器以及一个或多个检测器，以及其他系统组件。毫米波雷达624利用无线电信号来感测车辆600的周边环境内的物体。在一些实施例中，除了感测物体以外，毫米波雷达624还可用于感测物体的速度和/或前进方向。超声雷达625可以利用超声波信号来感测车辆600周围的物体。摄像装置626用于捕捉车辆600的周边环境的图像信息。摄像装置626可以包括单目相机、双目相机、结构光相机以及全景相机等，摄像装置626获取的图像信息可以包括静态图像，也可以包括视频流信息。决策控制系统630包括基于感知系统620所获取的信息进行分析决策的计算系统631，决策控制系统630还包括对车辆600的动力系统进行控制的整车控制器632，以及用于控制车辆600的转向系统633、油门634和制动系统635。计算系统631可以操作来处理和分析由感知系统620所获取的各种信息以便识别车辆600周边环境中的目标、物体和/或特征。目标可以包括行人或者动物，物体和/或特征可包括交通信号、道路边界和障碍物。计算系统631可使用物体识别算法、运动中恢复结构算法、视频跟踪等技术。在一些实施例中，计算系统631可以用于为环境绘制地图、跟踪物体、估计物体的速度等等。计算系统631可以将所获取的各种信息进行分析并得出对车辆的控制策略。整车控制器632可以用于对车辆的动力电池和引擎641进行协调控制，以提升车辆600的动力性能。转向系统633可操作来调整车辆600的前进方向。例如在一个实施例中可以为方向盘系统。油门634用于控制引擎641的操作速度并进而控制车辆600的速度。制动系统635用于控制车辆600减速。制动系统635可使用摩擦力来减慢车轮644。在一些实施例中，制动系统635可将车轮644的动能转换为电流。制动系统635也可采取其他形式来减慢车轮644转速从而控制车辆600的速度。驱动系统640可包括为车辆600提供动力运动的组件。在一个实施例中，驱动系统640可包括引擎641、能量源642、传动系统643和车轮644。引擎641可以是内燃机、电动机、空气压缩引擎或其他类型的引擎组合，例如汽油发动机和电动机组成的混动引擎，内燃引擎和空气压缩引擎组成的混动引擎。引擎641将能量源642转换成机械能量。能量源642的示例包括汽油、柴油、其他基于石油的燃料、丙烷、其他基于压缩气体的燃料、乙醇、太阳能电池板、电池和其他电力来源。能量源642也可以为车辆600的其他系统提供能量。传动系统643可以将来自引擎641的机械动力传送到车轮644。传动系统643可包括变速箱、差速器和驱动轴。在一个实施例中，传动系统643还可以包括其他器件，比如离合器。其中，驱动轴可包括可耦合到一个或多个车轮644的一个或多个轴。车辆600的部分或所有功能受计算平台650控制。计算平台650可包括至少一个处理器651，处理器651可以执行存储在例如存储器652这样的非暂态计算机可读介质中的指令653。在一些实施例中，计算平台650还可以是采用分布式方式控制车辆600的个体组件或子系统的多个计算设备。处理器651可以是任何常规的处理器，诸如商业可获得的CPU。可替换地，处理器651还可以包括诸如图像处理器，现场可编程门阵列、片上系统、专用集成芯片或它们的组合。尽管图6功能性地图示了处理器、存储器、和在相同块中的计算机的其它元件，但是本领域的普通技术人员应该理解该处理器、计算机、或存储器实际上可以包括可以或者可以不存储在相同的物理外壳内的多个处理器、计算机、或存储器。例如，存储器可以是硬盘驱动器或位于不同于计算机的外壳内的其它存储介质。因此，对处理器或计算机的引用将被理解为包括对可以或者可以不并行操作的处理器或计算机或存储器的集合的引用。不同于使用单一的处理器来执行此处所描述的步骤，诸如转向组件和减速组件的一些组件每个都可以具有其自己的处理器，处理器只执行与特定于组件的功能相关的计算。在本公开实施方式中，处理器651可以执行上述的路径规划方法。在此处所描述的各个方面中，处理器651可以位于远离该车辆并且与该车辆进行无线通信。在其它方面中，此处所描述的过程中的一些在布置于车辆内的处理器上执行而其它则由远程处理器执行，包括采取执行单一操纵的必要步骤。在一些实施例中，存储器652可包含指令653，指令653可被处理器651执行来执行车辆600的各种功能。存储器652也可包含额外的指令，包括向信息娱乐系统610、感知系统620、决策控制系统630、驱动系统640中的一个或多个发送数据、从其接收数据、与其交互和/或对其进行控制的指令。除了指令653以外，存储器652还可存储数据，例如道路地图、路线信息，车辆的位置、方向、速度以及其它这样的车辆数据，以及其他信息。这种信息可在车辆600在自主、半自主和/或手动模式中操作期间被车辆600和计算平台650使用。计算平台650可基于从各种子系统接收的输入来控制车辆600的功能。例如，计算平台650可利用来自决策控制系统630的输入以便控制转向系统633来避免由感知系统620检测到的障碍物。在一些实施例中，计算平台650可操作来对车辆600及其子系统的许多方面提供控制。可选地，上述这些组件中的一个或多个可与车辆600分开安装或关联。例如，存储器652可以部分或完全地与车辆600分开存在。上述组件可以按有线和/或无线方式来通信地耦合在一起。可选地，上述组件只是一个示例，实际应用中，上述各个模块中的组件有可能根据实际需要增添或者删除，图6不应理解为对本公开实施例的限制。在道路行进的自动驾驶汽车，如上面的车辆600，可以识别其周围环境内的物体以确定对当前速度的调整。物体可以是其它车辆、交通控制设备、或者其它类型的物体。在一些示例中，可以独立地考虑每个识别的物体，并且基于物体的各自的特性，诸如它的当前速度、加速度、与车辆的间距等，可以用来确定自动驾驶汽车所要调整的速度。可选地，车辆600或者与车辆600相关联的感知和计算设备可以基于所识别的物体的特性和周围环境的状态来预测识别的物体的行为。可选地，每一个所识别的物体都依赖于彼此的行为，因此还可以将所识别的所有物体全部一起考虑来预测单个识别的物体的行为。车辆600能够基于预测的识别的物体的行为来调整它的速度。换句话说，自动驾驶汽车能够基于所预测的物体的行为来确定车辆将需要调整到何种稳定状态。在这个过程中，也可以考虑其它因素来确定车辆600的速度，诸如，车辆600在行驶的道路中的横向位置、道路的曲率、静态和动态物体的接近度等等。除了提供调整自动驾驶汽车的速度的指令之外，计算设备还可以提供修改车辆600的转向角的指令，以使得自动驾驶汽车遵循给定的轨迹和/或维持与自动驾驶汽车附近的物体的安全横向和纵向距离。上述车辆600可以为各种类型的行驶工具，例如，轿车、卡车、摩托车、公共汽车、船、飞机、直升飞机、娱乐车、火车等等，本公开实施例不做特别的限定。在另一示例性实施例中，还提供一种计算机程序产品，该计算机程序产品包含能够由可编程的装置执行的计算机程序，该计算机程序具有当由该可编程的装置执行时用于执行上述的路径规划方法的代码部分。本领域技术人员在考虑说明书及实践本公开后，将容易想到本公开的其它实施方案。本申请旨在涵盖本公开的任何变型、用途或者适应性变化，这些变型、用途或者适应性变化遵循本公开的一般性原理并包括本公开未公开的本技术领域中的公知常识或惯用技术手段。说明书和实施例仅被视为示例性的，本公开的真正范围和精神由下面的权利要求指出。应当理解的是，本公开并不局限于上面已经描述并在附图中示出的精确结构，并且可以在不脱离其范围进行各种修改和改变。本公开的范围仅由所附的权利要求来限制。
