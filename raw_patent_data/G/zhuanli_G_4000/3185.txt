标题title
一种基于故障树的故障诊断方法
摘要abst
本发明提供一种基于故障树的故障诊断方法，本发明通过故障树的分析方法对设备控制单元数据进行分析获得多设备故障原因，通过对设备运转视频数据进行设备故障原因分析修正通过故障树获得的多故障原因的排序；先通过设备运转视频数据对操作失误零部件进行排查，再通过拆解方式对设备进行零部件故障排查，获得设备故障原因；最后通过增强现实的方式进行维修指导；本发明提高了设备故障排查的准确性，提高了设备故障排查的效率。
权利要求书clms
1.一种基于故障树的故障诊断方法，其特征在于，包括如下步骤：S1.采集设备运转数据，所述设备运转数据包括设备运转视频数据、设备运转音频数据、设备控制单元数据；S2.针对设备运转数据，采用故障树算法进行设备故障定位；S3.针对步骤S2中的故障定位，获得零部件集合，在设备运转数据中的设备运转视频数据中查找所述定位出的零部件以及定位出的零部件的关联部件的操作视频段；S4.判断步骤S3中所述操作视频段中的操作是否正确，如不正确，则根据操作视频段获得误操作零部件，并根据误操作零部件确定故障原因；如正确，则执行步骤S5；S5.对设备进行拆解，根据步骤S3中获得的零部件集合进行故障排查，并根据排查结果确定故障原因；S6.根据步骤S4或步骤S5中确定的故障原因对设备进行维修指导。2.根据权利要求1所述的基于故障树的诊断方法，其特征在于，所述步骤S2针对设备运转数据，采用故障树算法进行设备故障定位之前，在步骤S1采集设备运转数据之后，还包括：S11.根据数据清洗模型对步骤S1中所述的设备运转数据进行数据清洗；所述数据清洗模型包括重复数据清洗模型、错误数据清洗模型、不完整数据清洗模型；所述进行数据清洗的数据包括设备运转数据中的设备控制单元数据、设备网络控制系统数据、设备环境数据；S12.针对当前待清洗数据，当不存在匹配的数据清洗模型时，系统自动向用户进行提示；S13.用户根据当前待清洗数据，手动新建针对当前待清洗数据的数据清洗模型，并将新建的数据清洗模型加入数据清洗模型库中。3.根据权利要求2所述的基于故障树的诊断方法，其特征在于，所述步骤S2针对设备运转数据，采用故障树算法进行设备故障定位，具体包括：S21.获取步骤S11中经过数据清洗后的设备控制单元数据，根据上述设备控制单元数据获得设备运转情况；所述设备运转情况包括设备运转正常、设备运转异常；当设备运转情况为设备运转异常时，执行步骤S22；当设备运转情况为设备运转正常时，重复步骤S21；S22.根据设备控制单元数据获得设备故障结果，以及当前时刻；S23.获取步骤S1中设备运转数据中的设备运转视频数据中所述当前时刻至当前时刻之前固定时间段内的设备运转视频数据；S24.根据步骤S23中固定时间段内的设备运转视频数据，查找设备故障结果；S25.将步骤S22和步骤S24中的设备故障结果取合集，形成设备故障结果集，并在设备故障结果集中去除重复设备故障结果；S26.根据步骤S25中的设备故障结果集中的每项设备故障结果输入至故障树中，以获得每项设备故障结果对应的多个设备故障原因和各设备故障原因的排序结果；所述设备故障结果对应故障树的根节点，所述设备故障原对应包括故障树的叶节点至根节点的故障路径。4.根据权利要求3所述的故障树的诊断方法，其特征在于，所述步骤S21具体包括：S211.预先构建设备数字孪生模型；S212.在设备数字孪生模型中模拟进行设备的仿真运转；S213.将设备控制单元数据与步骤S212中设备数字孪生模型中的设备控制单元数据进行对比，当设备控制单元数据中的一项或多项参数的误差率超过预设阈值时，提示设备运转异常。5.根据权利要求4所述的故障树的诊断方法，其特征在于，所述步骤S213具体包括：参数的误差率的计算方式为，设备控制单元数据中的一项参数减去设备数字孪生模型中的设备控制单元数据中的对应参数，将差值取绝对值，将绝对值后的数据除以设备数字孪生模型中的设备控制单元数据中的对应参数，获得该项参数的误差率。6.根据权利要求4所述的故障树的诊断方法，其特征在于，所述步骤S22具体包括：当设备控制单元数据中的一项或多项参数超过预设阈值时，确定该一项或多项参数所对应的故障结果；所述故障结果为设备故障描述文字或代码，所述设备故障描述文字或代码对应故障树的根节点。7.根据权利要求6所述的故障树的诊断方法，其特征在于，所述步骤S24具体包括：S241.根据固定时间段内的设备运转视频数据，根据视频帧差比较的方法，查找设备运转视频中发生异常的部位；S242.根据所述发生异常的部位，系统自动匹配设备故障结果；所述故障结果为设备故障描述文字或代码，所述设备故障描述文字或代码对应故障树的根节点。
说明书desc
技术领域：本发明涉及设备故障诊断领域，特别涉及一种故障树的故障诊断方法。背景技术：目前，随着数字化、智能化技术的发展，制造业的相关设备也越来越智能化。当前，越来越多的智能化设备功能增多，零部件越来越复杂，一个小的零部件出现问题时，设备将出现一定的故障结果和表现。设备发生故障的因素繁多，对设备的故障诊断，需要大量的专家经验和人力、物力。智能诊断方法是运用大量本领域专家的经验知识和一定的推理方法求解复杂问题的一种人工智能计算机方法，减少大量的人力和物力，迅速准确地确定故障的部位和原因。因此，如何快速、准确地对设备故障进行定位和诊断，为近年来集中研究的热门课题。基于此，本文提出一种基于故障树的故障诊断方法，以解决上述问题。发明内容：针对上述问题，本文提出了一种基于故障树的故障诊断方法。该方法包括如下步骤：S1.采集设备运转数据，所述设备运转数据包括设备运转视频数据、设备运转音频数据、设备控制单元数据；S2.针对设备运转数据，采用故障树算法进行设备故障定位；S3.针对步骤S2中的故障定位，获得零部件集合，在设备运转数据中的设备运转视频数据中查找所述定位出的零部件以及定位出的零部件的关联部件的操作视频段；S4.判断步骤S3中所述操作视频段中的操作是否正确，如不正确，则根据操作视频段获得误操作零部件，并根据误操作零部件确定故障原因；如正确，则执行步骤S5；S5.对设备进行拆解，根据步骤S3中获得的零部件集合进行故障排查，并根据排查结果确定故障原因；S6.根据步骤S4或步骤S5中确定的故障原因对设备进行维修指导。所述步骤S2针对设备运转数据，采用故障树算法进行设备故障定位之前，在步骤S1采集设备运转数据之后，还包括：S11.根据数据清洗模型对步骤S1中所述的设备运转数据进行数据清洗；所述数据清洗模型包括重复数据清洗模型、错误数据清洗模型、不完整数据清洗模型；所述进行数据清洗的数据包括设备运转数据中的设备控制单元数据、设备网络控制系统数据、设备环境数据；S12.针对当前待清洗数据，当不存在匹配的数据清洗模型时，系统自动向用户进行提示；S13.用户根据当前待清洗数据，手动新建针对当前待清洗数据的数据清洗模型，并将新建的数据清洗模型加入数据清洗模型库中。所述步骤S2针对设备运转数据，采用故障树算法进行设备故障定位，具体包括：S21.获取步骤S11中经过数据清洗后的设备控制单元数据，根据上述设备控制单元数据获得设备运转情况；所述设备运转情况包括设备运转正常、设备运转异常；当设备运转情况为设备运转异常时，执行步骤S22；当设备运转情况为设备运转正常时，重复步骤S21；S22.根据设备控制单元数据获得设备故障结果，以及当前时刻；S23.获取步骤S1中设备运转数据中的设备运转视频数据中所述当前时刻至当前时刻之前固定时间段内的设备运转视频数据；S24.根据步骤S23中固定时间段内的设备运转视频数据，查找设备故障结果；S25.将步骤S22和步骤S24中的设备故障结果取合集，形成设备故障结果集，并在设备故障结果集中去除重复设备故障结果；S26.根据步骤S25中的设备故障结果集中的每项设备故障结果输入至故障树中，以获得每项设备故障结果对应的多个设备故障原因和各设备故障原因的排序结果；所述设备故障结果对应故障树的根节点，所述设备故障原对应包括故障树的叶节点至根节点的故障路径。所述步骤S21具体包括：S211.预先构建设备数字孪生模型；S212.在设备数字孪生模型中模拟进行设备的仿真运转；S213.将设备控制单元数据与步骤S212中设备数字孪生模型中的设备控制单元数据进行对比，当设备控制单元数据中的一项或多项参数的误差率超过预设阈值时，提示设备运转异常。所述步骤S213具体包括：参数的误差率的计算方式为，设备控制单元数据中的一项参数减去设备数字孪生模型中的设备控制单元数据中的对应参数，将差值取绝对值，将绝对值后的数据除以设备数字孪生模型中的设备控制单元数据中的对应参数，获得该项参数的误差率。所述步骤S22具体包括：当设备控制单元数据中的一项或多项参数超过预设阈值时，确定该一项或多项参数所对应的故障结果；所述故障结果为设备故障描述文字或代码，所述设备故障描述文字或代码对应故障树的根节点。所述步骤S24具体包括：S241.根据固定时间段内的设备运转视频数据，根据视频帧差比较的方法，查找设备运转视频中发生异常的部位；S242.根据所述发生异常的部位，系统自动匹配设备故障结果；所述故障结果为设备故障描述文字或代码，所述设备故障描述文字或代码对应故障树的根节点。所述步骤S2针对设备运转数据，采用故障树算法进行设备故障定位，还包括：S27.获取步骤S1中获取的设备运转音频数据，将设备运转音频数据输入至预先构建的神经网络模型中进行分类；S28.根据神经网络模型获得分类结果，所述分类结果为设备故障原因；所述设备故障原因对应故障树中的叶节点至根节点的故障路径；S29.根据步骤S28中获取的设备故障原因对步骤S26中的设备故障原因的排序结果进行重排序，获得故障原因的排序结果集合。所述步骤S29具体包括：如步骤S26中的设备故障原因中包括步骤S28中获取的设备故障原因，将该设备故障原因调整为按照从高至低顺序排序的第一位；如步骤S26中的设备故障原因中不包括步骤S28中获取的设备故障原因，将步骤S28中获取的设备故障原因加入至步骤S26中的设备故障原因排序列表中，并排列在从高至低顺序的第二位。所述步骤S3针对步骤S2中的故障定位，获得零部件集合，在设备运转数据中的设备运转视频数据中查找所述定位出的零部件以及定位出的零部件的关联部件的操作视频段，具体包括：S31.根据步骤S29获得的设备故障原因的排序结果集合，确定各设备故障原因包括的故障树的叶节点至根节点的故障路径中叶节点所对应的零部件；S32.获取步骤S31中叶节点所对应的零部件以及该零部件的关联零部件、步骤S31中所述故障路径中除叶节点和根节点的所有节点所对应的零部件，将上述零部件取合集，形成所述零部件集合；S33.在所述设备运转视频数据中识别并跟踪步骤S32中零部件集合的所有零部件的操作视频片段，获得操作视频段。所述步骤S4判断步骤S3中所述操作视频段中的操作是否正确，具体包括：采用人工的方式判断操作视频段中的操作是否正确；所述操作视频段中的操作为员工对设备的操作动作。所述步骤S4还包括：S41.在操作视频段中的操作不正确时，系统根据用户判断出的误操作的零部件，在步骤S29中获得的故障原因的排序结果集合中自动筛选出与误操作的零部件关联的故障原因；S42.采用人工的方式在步骤S41中筛选出的故障原因中选择一个或多个故障原因，作为故障原因。所述步骤S5还包括：对设备进行拆解，根据步骤S3中获得的零部件集合进行人工故障排查，并根据排查结果确定故障原因。所述步骤S6根据步骤S4或步骤S5中确定的故障原因对设备进行维修指导，具体包括：S61.根据确定的设备故障原因获取故障树的叶节点至根节点的故障路径；S62.按照步骤S61确定的故障路径，自动匹配维修指导模型；S63.根据步骤S62中获得的维修指导模型，利用增强现实技术，在用户佩戴的头盔中显示维修指导模型中的维修指导步骤，所述维修指导步骤与步骤S61确定的故障路径相匹配。本发明的有益效果如下：1.本发明针对设备运转数据，采用故障树的方法进行故障原因路径分析，并同时采用设备运转音频数据对故障原因进行分析，并采用音频数据分析出的故障原因对采用故障树方法分析出的故障原因进行重排序，提高了故障分析的准确性；2.本发明在获取设备故障结果过程中，将设备运转视频数据中的固定时间段的视频数据进行分析，得到设备故障结果的补充，提高了设备故障结果的获取的准确性，避免在设备出现故障后，如停机后，对故障结果判断的失误。3.本发明通过在设备运转视频中查找误操作零部件视频片段，方便用户对设备故障进行初步定位；如在视频片段中未找到误操作动作，则拆解设备进行设备故障定位。本方法提高了设备故障排查的准确性，提高了系统整体运行效率。4.本发明在维修指导阶段，设置维修指导步骤与确定的故障路径相匹配，使得维修指导步骤更加适配设备发生的故障，提高了维修指导的准确性。上述说明，仅是本发明技术方案的概述，为了能够更清楚了解本发明技术手段，可依照说明书的内容予以实施，并且为了让本发明的上述说明和其它目的、特征及优点能够更明显易懂，特举较佳实施例，详细说明如下。附图说明通过阅读下文优选实施方式的详细描述，各种其他的优点和益处对于本领域普通技术人员将变得清楚明了。附图仅用于示出优选实施方式的目的，而并不认为是对本发明的限制。而且在整个附图中，用相同的参考符号表示相同的部件。在附图中：图1为一种基于故障树的故障诊断方法的流程图。具体实施方式下面将参照附图更详细地描述本公开的示例性实施方式。虽然附图中显示了本公开的示例性实施方式，然而应当理解，可以以各种形式实现本公开而不应被这里阐述的实施方式所限制。相反，提供这些实施方式是为了能够更透彻地理解本公开，并且能够将本公开的范围完整的传达给本领域的技术人员。在本发明的描述中，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”、“固定”等术语应做广义理解，例如，可以是连接，也可以是可拆卸连接，或成一体；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通或两个元件的相互作用关系。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本发明中的具体含义。本文提出了一种基于故障树的故障诊断方法。该方法包括如下步骤：S1.采集设备运转数据，所述设备运转数据包括设备运转视频数据、设备运转音频数据、设备控制单元数据；所述步骤S之前，在步骤S1采集设备运转数据之后，还包括：S11.根据数据清洗模型对步骤S1中所述的设备运转数据进行数据清洗；所述数据清洗模型包括重复数据清洗模型、错误数据清洗模型、不完整数据清洗模型；所述进行数据清洗的数据包括设备运转数据中的设备控制单元数据、设备网络控制系统数据、设备环境数据；S12.针对当前待清洗数据，当不存在匹配的数据清洗模型时，系统自动向用户进行提示；S13.用户根据当前待清洗数据，手动新建针对当前待清洗数据的数据清洗模型，并将新建的数据清洗模型加入数据清洗模型库中。S2.针对设备运转数据，采用故障树算法进行设备故障定位；S21.获取步骤S11中经过数据清洗后的设备控制单元数据，根据上述设备控制单元数据获得设备运转情况；所述设备运转情况包括设备运转正常、设备运转异常；当设备运转情况为设备运转异常时，执行步骤S22；当设备运转情况为设备运转正常时，重复步骤S21；所述步骤S21具体包括：S211.预先构建设备数字孪生模型；S212.在设备数字孪生模型中模拟进行设备的仿真运转；S213.将设备控制单元数据与步骤S212中设备数字孪生模型中的设备控制单元数据进行对比，当设备控制单元数据中的一项或多项参数的误差率超过预设阈值时，提示设备运转异常。所述步骤S213具体包括：参数的误差率的计算方式为，设备控制单元数据中的一项参数减去设备数字孪生模型中的设备控制单元数据中的对应参数，将差值取绝对值，将绝对值后的数据除以设备数字孪生模型中的设备控制单元数据中的对应参数，获得该项参数的误差率。S22.根据设备控制单元数据获得设备故障结果，以及当前时刻；所述步骤S22具体包括：当设备控制单元数据中的一项或多项参数超过预设阈值时，确定该一项或多项参数所对应的故障结果；所述故障结果为设备故障描述文字或代码，所述设备故障描述文字或代码对应故障树的根节点。S23.获取步骤S1中设备运转数据中的设备运转视频数据中所述当前时刻至当前时刻之前固定时间段内的设备运转视频数据；S24.根据步骤S23中固定时间段内的设备运转视频数据，查找设备故障结果；所述步骤S24具体包括：S241.根据固定时间段内的设备运转视频数据，根据视频帧差比较的方法，查找设备运转视频中发生异常的部位；S242.根据所述发生异常的部位，系统自动匹配设备故障结果；所述故障结果为设备故障描述文字或代码，所述设备故障描述文字或代码对应故障树的根节点。S25.将步骤S22和步骤S24中的设备故障结果取合集，形成设备故障结果集，并在设备故障结果集中去除重复设备故障结果；S26.根据步骤S25中的设备故障结果集中的每项设备故障结果输入至故障树中，以获得每项设备故障结果对应的多个设备故障原因和各设备故障原因的排序结果；所述设备故障结果对应故障树的根节点，所述设备故障原对应包括故障树的叶节点至根节点的故障路径。所述步骤S2针对设备运转数据，采用故障树算法进行设备故障定位，还包括：S27.获取步骤S1中获取的设备运转音频数据，将设备运转音频数据输入至预先构建的神经网络模型中进行分类；S28.根据神经网络模型获得分类结果，所述分类结果为设备故障原因；所述设备故障原因对应故障树中的叶节点至根节点的故障路径；S29.根据步骤S28中获取的设备故障原因对步骤S26中的设备故障原因的排序结果进行重排序，获得故障原因的排序结果集合。所述步骤S29具体包括：如步骤S26中的设备故障原因中包括步骤S28中获取的设备故障原因，将该设备故障原因调整为按照从高至低顺序排序的第一位；如步骤S26中的设备故障原因中不包括步骤S28中获取的设备故障原因，将步骤S28中获取的设备故障原因加入至步骤S26中的设备故障原因排序列表中，并排列在从高至低顺序的第二位。S3.针对步骤S2中的故障定位，获得零部件集合，在设备运转数据中的设备运转视频数据中查找所述定位出的零部件以及定位出的零部件的关联部件的操作视频段；所述步骤S3针对步骤S2中的故障定位，获得零部件集合，在设备运转数据中的设备运转视频数据中查找所述定位出的零部件以及定位出的零部件的关联部件的操作视频段，具体包括：S31.根据步骤S29获得的设备故障原因的排序结果集合，确定各设备故障原因包括的故障树的叶节点至根节点的故障路径中叶节点所对应的零部件；S32.获取步骤S31中叶节点所对应的零部件以及该零部件的关联零部件、步骤S31中所述故障路径中除叶节点和根节点的所有节点所对应的零部件，将上述零部件取合集，形成所述零部件集合；S33.在所述设备运转视频数据中识别并跟踪步骤S32中零部件集合的所有零部件的操作视频片段，获得操作视频段。S4.判断步骤S3中所述操作视频段中的操作是否正确，如不正确，则根据操作视频段获得误操作零部件，并根据误操作零部件确定故障原因；如正确，则执行步骤S5；所述步骤S4还包括：S41.在操作视频段中的操作不正确时，系统根据用户判断出的误操作的零部件，在步骤S29中获得的故障原因的排序结果集合中自动筛选出与误操作的零部件关联的故障原因；S42.采用人工的方式在步骤S41中筛选出的故障原因中选择一个或多个故障原因，作为故障原因。S5.对设备进行拆解，根据步骤S3中获得的零部件集合进行故障排查，并根据排查结果确定故障原因；所述步骤S5还包括：对设备进行拆解，根据步骤S3中获得的零部件集合进行人工故障排查，并根据排查结果确定故障原因。S6.根据步骤S4或步骤S5中确定的故障原因对设备进行维修指导。所述步骤S6根据步骤S4或步骤S5中确定的故障原因对设备进行维修指导，具体包括：S61.根据确定的设备故障原因获取故障树的叶节点至根节点的故障路径；S62.按照步骤S61确定的故障路径，自动匹配维修指导模型；S63.根据步骤S62中获得的维修指导模型，利用增强现实技术，在用户佩戴的头盔中显示维修指导模型中的维修指导步骤，所述维修指导步骤与步骤S61确定的故障路径相匹配。本发明的有益效果如下：1.本发明针对设备运转数据，采用故障树的方法进行故障原因路径分析，并同时采用设备运转音频数据对故障原因进行分析，并采用音频数据分析出的故障原因对采用故障树方法分析出的故障原因进行重排序，提高了故障分析的准确性；2.本发明在获取设备故障结果过程中，将设备运转视频数据中的固定时间段的视频数据进行分析，得到设备故障结果的补充，提高了设备故障结果的获取的准确性，避免在设备出现故障后，如停机后，对故障结果判断的失误。3.本发明通过在设备运转视频中查找误操作零部件视频片段，方便用户对设备故障进行初步定位；如在视频片段中未找到误操作动作，则拆解设备进行设备故障定位。本方法提高了设备故障排查的准确性，提高了系统整体运行效率。4.本发明在维修指导阶段，设置维修指导步骤与确定的故障路径相匹配，使得维修指导步骤更加适配设备发生的故障，提高了维修指导的准确性。以上所述，仅为本发明较佳的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到的变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以所述权利要求的保护范围为准。
