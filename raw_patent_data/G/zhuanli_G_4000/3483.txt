标题title
一种通过移相控制的芯片初始化数据测试方法
摘要abst
本发明公开了一种通过移相控制的芯片初始化数据测试方法，属于测试技术领域。包括：通过仿真软件得到若干组移相控制数据；将若干组移相控制数据以遍历方式写入芯片寄存器，每写入一组，对芯片测试一次，保存每组移相控制数据的s2p测试数据；读取所有s2p测试数据，根据增益和角度画出极坐标圆图，找到极坐标圆图的最大内切圆；在内切圆上的数据中，从0°开始以5.625°步进取与64态角度差值最小的64个数据作为控制芯片的64态对应码值，写入芯片寄存器，输出控制芯片的最佳初始化数据。本方法既避免了测试无用范围，又使得测试范围相对比较大，得到的初始化数据更可靠，极大地提高了测试效率。
权利要求书clms
1.一种通过移相控制的芯片初始化数据测试方法，其特征在于，包括如下步骤：步骤S1、通过仿真软件得到若干组用于芯片初始化数据测试的移相控制数据；步骤S2、将这若干组移相控制数据以遍历方式写入芯片寄存器，每写入一组，对芯片测试一次；并保存每组移相控制数据下的s2p测试数据；步骤S3、读取保存的所有s2p测试数据，提取其中相同频点的数据并根据增益和角度画出极坐标圆图，找到该极坐标圆图的最大内切圆；步骤S4、将所得内切圆的角度从0°开始以5.626°为步进切割为64态角度，在内切圆上的数据中，从0°开始以5.625°步进取与64态角度差值最小的64个数据作为控制芯片的64态对应码值；步骤S5、将这64态对应码值写入芯片寄存器，输出控制芯片的最佳初始化数据。2.根据权利要求1所述的一种通过移相控制的芯片初始化数据测试方法，其特征在于，每组s2p测试数据包括在不同频点测试下的0~360°范围内以5.625°为步进的64态幅值。3.根据权利要求1所述的一种通过移相控制的芯片初始化数据测试方法，其特征在于，每组移相控制数据包含四个自然数。4.根据权利要求3所述的一种通过移相控制的芯片初始化数据测试方法，其特征在于，步骤S2中，将每组移相控制数据的四个自然数，根据每组移相控制数据对应的移相角度，分别写入寄存器不同地址的不同位中。5.根据权利要求3所述的一种通过移相控制的芯片初始化数据测试方法，其特征在于，步骤S2中，为实现自动化测试，将每组移相控制数据统一选择某一个移相角度下对应的三个寄存器地址进行写入。6.根据权利要求5所述的一种通过移相控制的芯片初始化数据测试方法，其特征在于，在选定的第一地址的不同位中随机填入第一个数和第二个数，在选定的第二地址的不同位中随机填入第二个数和第三个数，在选定的第三地址的不同位中随机填入第三个数和第四个数。7.根据权利要求1所述的一种通过移相控制的芯片初始化数据测试方法，其特征在于，在以5.625°步进在内切圆上取点时，若某一角度与圆的交点上没有点，此时取圆上距离该交点最近的点作为该角度的对应码值。8.根据权利要求1所述的一种通过移相控制的芯片初始化数据测试方法，其特征在于，在每组移相控制数据写入寄存器之后，在开始测试之前对芯片进行load操作。
说明书desc
技术领域本发明涉及芯片测试领域，具体涉及一种通过移相控制的芯片初始化数据测试方法。背景技术自研CMOS芯片的初始化数据是否为最佳决定了在芯片测试过程中各类测试数据的准确度与可信度。在现有的测试方法中，最佳初始化数据的测试往往是在现有的初始化数据上进行小幅度改动，或者修改所有寄存器上的数据在固定范围内变动。这两种方法，前一种方法测试范围窄，得到的数据说服力不够；后一种方法由于缺乏数据改动的方向，且寄存器数量较多。如果数据变化范围太大，则耗时耗力，不可取；数据变化范围太小，同样得到的数据说服力与可信度不高。鉴于此，亟待提供一种通过移相控制的芯片初始化数据测试方法。发明内容本发明旨在解决现有技术中自研CMOS芯片在测试过程中有关于初始化数据选取的问题，提出一种通过移相控制的芯片初始化数据测试方法，该方法通过对移相控制的芯片寄存器下发不同的合适数据达到控制目的，以求得最优的初始化数据来控制芯片。为了实现上述发明目的，本发明的技术方案如下：一种通过移相控制的芯片初始化数据测试方法，包括如下步骤：步骤S1、通过仿真软件得到若干组用于芯片初始化数据测试的移相控制数据；步骤S2、将这若干组移相控制数据以遍历方式写入芯片寄存器，每写入一组，对芯片测试一次；并保存每组移相控制数据下的s2p测试数据；步骤S3、读取保存的所有s2p测试数据，提取其中相同频点的数据并根据增益和角度画出极坐标圆图，找到该极坐标圆图的最大内切圆；步骤S4、将所述内切圆的角度从0°开始以5.626°为步进切割为64态角度，在内切圆上的数据中，从0°开始以5.625°步进取与64态角度差值最小的64个数据作为控制芯片的64态对应码值；步骤S5、将这64态对应码值写入芯片寄存器，输出控制芯片的最佳初始化数据。进一步的，每组移相控制数据包含四个自然数。进一步的，步骤S2中，为实现自动化测试，将每组移相控制数据统一选择某一个移相角度下对应的三个寄存器地址进行写入。进一步的，在选定的第一地址的不同位中随机填入第一个数和第二个数，在选定的第二地址的不同位中随机填入第二个数和第三个数，在选定的第三地址的不同位中随机填入第三个数和第四个数。进一步的，在以5.625°步进在内切圆上取点时，若某一角度与圆的交点上没有点，此时取圆上距离该交点最近的点作为该角度的对应码值。进一步的，在每组移相控制数据写入寄存器之后，在开始测试之前对芯片进行load操作。综上所述，本发明具有以下优点：本方法首先遍历不同的移相控制状态，然后通过最佳增益值，得到控制芯片的64态对应码值，写入芯片寄存器后，得到控制芯片的最佳初始化数据。本方法相较于现有方法，无需现有的初始化数据便可以测试，且测试范围合理。既避免了测试无用范围，又使得测试范围相对比较大，得到的初始化数据更可靠，更可信，极大地提高了测试效率。附图说明图1为最佳增益内切圆示意图；图2为本发明的测试方法流程图。具体实施方式为了更清楚地说明本发明，下面结合优选实施例和附图对本发明做进一步的说明。本领域技术人员应当理解，下面所具体描述的内容是说明性的而非限制性的，不应以此限制本发明的保护范围。本发明的说明书和权利要求书及上述附图中的属于“第一”、“第二”等是用于区别不同的对象，而不是用于描述特定顺序。此外，术语“ 包括”和“ 具有”以及它们任何变形，意图在于覆盖不排他的包含。例如包含了一系列步骤或单元的过程、方法、系统、产品或设备没有限定于已列出的步骤或单元，而是可选地还包括没有列出的步骤或单元，或可选地还包括对于这些过程、方法或设备固有的其他步骤或单元。本实施例提供了一种通过移相控制的芯片初始化数据测试方法，适用于测试自研CMOS芯片的初始化数据。本方法的本质是对移相控制的芯片寄存器下发不同的合适数据以达到控制目的，求得最优的初始化数据来控制芯片，下面对控制方法进行详解，参照说明书附图2。步骤一、通过仿真软件得到若干组用于芯片初始化数据测试的移相控制数据，每组数据对应一个移相状态。从理论上说，用于测试的移相控制数据越多，得到的结果越可信，但海量的移相控制数据也会造成测试时间的延长，本实施例中，采用advance designsystem 2020仿真软件得到的66039组移相控制数据进行测试。部分移相控制数据如下表1所示，每组移相控制数据包含四个自然数。表1 通过仿真软件得到的移相控制数据步骤二、将这66039组移相控制数据以遍历方式写入芯片寄存器地址，每写入一组数据，对芯片测试一次。具体的，将每组移相控制数据的四个数，根据每组数据对应的移相角度，分别写入寄存器不同地址的不同位中。例如表2中的第一行所示，第一组数据0000对应0移相角度，将这四个数0、0、0、0又分别拆分成5个位，写入寄存器的0地址、1地址和128地址中，其中，第一个数0写入0地址的3-7位，第二个数0写入0地址的0-2位与1地址的6-7位，第三个数0写入1地址的1-5位，第四个数0写入1地址的0位和128地址的4-7位。表2 部分芯片寄存器地址写入方式第二组数据0001对应5.625移相角度，将这四个数0、0、0、1分别拆成5位，写入芯片寄存器的2地址、3地址和128地址中。其中第一个数0写入2地址的3-7位，第二个数0写入2地址的0-2位与1地址的6-7位，第三个数0写入3地址的1-5位，第四个数1写入3地址的0位和128地址的0-3位。……以此类推，直至写完所有移相角度下的移相控制数据。上述每组移相控制数据的写入方式仅作为示例说明，不代表每组数据的唯一写入方式。在实际操作过程中，若按照如表2所示的方式，不仅需要写入不同地址，而且需要写入不同位，复杂的步骤使得此方法难以实现自动化测试。因此本方法中，每组移相控制数据统一选择某一个移相角度下的三个寄存器地址进行写入，每写入一组数据，对芯片测试一次。例如，本申请在开单通道测试以后，选择0移相角度，按照如表2所示的第一行的写入方式，将每组移相控制数据写入寄存器的0地址、1地址和128地址。芯片上的load焊盘给高电平能将移相的PSR寄存器内存的码值使能，所以每写入一组移相控制数据后，在开启测试之前，都必须进行load操作。步骤三、保存每组移相控制数据下的s2p测试数据，每组s2p测试数据包括在不同频点测试下的0~360°范围内以5.625为步进的64态幅值。步骤四、读取保存的所有s2p测试数据，提取其中相同频点的数据并根据增益和角度画出极坐标圆图，在满足64态的增益变化尽可能小的条件下，找到该极坐标圆图的最大内切圆。本步骤中，将得到的66039组s2p测试数据中相同频点的数据提取出来，根据增益和角度画出极坐标圆图，然后找增益最大值，四个最大增益值组成一个圆，该圆的直径代表增益值。将圆的增益值内缩，直至该圆恰好被这66039组数据淹没，即为内切圆。如图1所示，由数据点构成的类矩形图案是遍历的66039组数据，图中所示的圆即为最佳增益的内切圆。步骤五、在内切圆与66039组数据的重合部分内，以从0°开始以5.625°步进取与各步进角度值差值最小的64个数据作为控制芯片的64态对应码值。在以5.625°步进在内切圆上取点时，某一角度与内切圆的交点上可能没有点，此时取圆上距离该交点最近的点作为该角度的对应码值。步骤六、将这64态对应码值写入芯片寄存器，输出控制芯片的最佳初始化数据。芯片初始化时配置64态移相码查找表，该64态移相码查找表是一个固定长度的可变量，其内容可根据使用需求随时更换。本申请中，各通道的PSR寄存器相当于指向64态移相码查找表的指针，数据填入范围为0~63，将360°按5.625°步进分成了64个移相态分别对应了PSR寄存器的0~63数值，通过修改对应通道PSR寄存器的值达到指针指向不同移相角度的功能。虽然结合附图对本发明的具体实施方式进行了详细地描述，但不应理解为对本专利的保护范围的限定。在权利要求书所描述的范围内，本领域技术人员不经创造性劳动即可做出的各种修改和变形仍属本专利的保护范围。以上所述，仅是本发明的较佳实施例，并非对本发明做任何形式上的限制，凡是依据本发明的技术实质对以上实施例所作的任何简单修改、等同变化，均落入本发明的保护范围之内。
