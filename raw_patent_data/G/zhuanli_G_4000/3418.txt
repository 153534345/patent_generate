标题title
基于图像数据的试题实时批阅方法及系统
摘要abst
本发明涉及图像处理技术领域，具体涉及一种基于图像数据的试题实时批阅方法及系统。该方法首先获取答题卡扫描图中的扫描区域中的字体笔画、角点和连通域；对角点进行分析确定字体笔画的笔画宽度；根据笔画宽度对角点进行筛选，得到连笔角点；根据连笔角点和笔画宽度得到扫描区域对应的字体拥挤度；确定字体连通域和连笔连通域，结合字体连通域的连笔密集度和连笔连通域的数量确定连笔指标；根据字体拥挤度和连笔指标确定特征半径，进而对字体笔画和标准答案进行特征匹配，得到批阅结果。本发明改善了关键点检测的效果，进而提高了扫描区域中字体笔画和标准答案匹配的精度。
权利要求书clms
1.一种基于图像数据的试题实时批阅方法，其特征在于，该方法包括以下步骤：获取答题卡扫描图中的扫描区域、扫描区域中的字体笔画、角点和连通域；对角点之间的距离进行分析，确定字体笔画的笔画宽度；根据笔画宽度对角点进行筛选，得到连笔角点；根据所述连笔角点和笔画宽度得到扫描区域对应的字体拥挤度；根据连通域内像素点的数量对连通域进行分类，得到字体连通域和连笔连通域；根据字体连通域在不同方向上的转动惯量得到连笔密集度；结合连笔密集度和连笔连通域的数量确定连笔指标；根据字体拥挤度和连笔指标确定特征半径；基于特征半径，对字体笔画和标准答案进行特征匹配，得到批阅结果。2.根据权利要求1所述的基于图像数据的试题实时批阅方法，其特征在于，所述对角点之间的距离进行分析，确定字体笔画的笔画宽度，包括：获取两条相交的字体笔画中方向与竖直方向最为相近的字体笔画作为纵向笔画；将相交区域的任意一个角点作为第一目标角点，将相交区域的除第一目标角点外其他角点作为临近角点，连接第一目标角点和临近角点得到第一连线，将与水平向右的方向的夹角最小的第一连线对应的角点作为第一横向角点，计算第一目标角点与第一横向角点的距离作为第一宽度；将除第一横向角点外与第一目标角点距离最近的临近角点，作为纵向角点；连接纵向角点与临近角点得到第二连线，将与水平向右的方向的夹角最小的第二连线对应的角点作为第二横向角点；计算纵向角点与第二横向角点的距离作为第二宽度，将第一宽度和第二宽度的均值作为纵向笔画的笔画宽度。3.根据权利要求1所述的基于图像数据的试题实时批阅方法，其特征在于，所述根据笔画宽度对角点进行筛选，得到连笔角点，包括：对于相交的两条字体笔画，将相交的两条字体笔画的笔画宽度的差异作为筛选差值；将筛选差值大于预设第一阈值的相交的两条字体笔画的相交区域，作为字体区域；将字体区域的角点作为连笔角点。4.根据权利要求1所述的基于图像数据的试题实时批阅方法，其特征在于，所述根据所述连笔角点和笔画宽度得到扫描区域对应的字体拥挤度，包括：将所有连笔角点对应的字体笔画的笔画宽度的均值，作为宽度均值；将所述宽度均值和连笔角点的数量的乘积作为扫描区域对应的字体拥挤度。5.根据权利要求1所述的基于图像数据的试题实时批阅方法，其特征在于，所述根据连通域内像素点的数量对连通域进行分类，得到字体连通域和连笔连通域，包括：将连通域内像素点的数量大于预设第二阈值的连通域作为字体连通域；将连通域内像素点的数量小于或等于预设第二阈值的连通域作为连笔连通域。6.根据权利要求1所述的基于图像数据的试题实时批阅方法，其特征在于，所述根据字体连通域在不同方向上的转动惯量得到连笔密集度，包括：当字体连通域在水平方向上的转动惯量小于或等于垂直方向上的转动惯量时，将水平方向上的转动惯量和垂直方向上的转动惯量的比值的绝对值作为字体连通域的连笔密集度；当字体连通域在水平方向上的转动惯量大于垂直方向上的转动惯量时，将垂直方向上的转动惯量和水平方向上的转动惯量的比值的绝对值作为字体连通域的连笔密集度。7.根据权利要求1所述的基于图像数据的试题实时批阅方法，其特征在于，所述结合连笔密集度和连笔连通域的数量确定连笔指标，包括：计算所有字体连通域的连笔密集度的均值作为密集度均值；将密集度均值和连笔连通域的数量的乘积进行正相关映射，得到对应的连笔指标。8.根据权利要求1所述的基于图像数据的试题实时批阅方法，其特征在于，所述根据字体拥挤度和连笔指标确定特征半径，包括：将字体拥挤度和连笔指标的乘积作为调节半径；将调节半径和预设第三阈值的和值作为真数的自然对数函数值作为初始半径；将初始半径和预设第四阈值的和值作为特征半径。9.根据权利要求1所述的基于图像数据的试题实时批阅方法，其特征在于，所述基于特征半径，对字体笔画和标准答案进行特征匹配，得到批阅结果，包括：基于特征半径获取扫描区域中字体笔画的关键点，作为字体关键点；将字体关键点和答案卡上的标准答案的关键点进行匹配，得到匹配对；将匹配对的数量占比作为匹配度，当匹配度大于或等于预设匹配阈值，扫描区域对应的题目正确；当匹配度小于预设匹配阈值，扫描区域对应的题目错误。10.一种基于图像数据的试题实时批阅系统，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1~9任意一项所述基于图像数据的试题实时批阅方法的步骤。
说明书desc
技术领域本发明涉及图像处理技术领域，具体涉及一种基于图像数据的试题实时批阅方法及系统。背景技术传统填空试题批阅需要大量的人力资源和时间，由于人工的不确定性因素，容易在试题批阅过程中发生误判等情况。近年来，随着计算机视觉技术的发展，图像匹配技术得到了广泛的关注与研究，在试题批阅过程中发挥了极大的作用，减少了阅卷人的工作负担，提高了批阅的效率。但是由于考生的书写不规范行为导致了匹配结果不太理想的问题，从而会影响了试题批阅效果的准确率。目前，常见的试题实时批阅的方法为对图像进行纠偏、降噪和缩放处理，然后将处理后的答题卡中的考生答案与标准答案进行匹配。但由于考生在答题时书写的字体有自己的风格，有的连笔较多，有的字体比较潦草，就会导致直接将考生答案与标准答案匹配存在较大误差，进而会出现试题误判的情况。发明内容为了解决将考生答案与标准答案匹配存在较大误差，会出现试题误判的技术问题，本发明的目的在于提供基于图像数据的试题实时批阅方法及系统，所采用的技术方案具体如下：第一方面，本发明一个实施例提供了一种基于图像数据的试题实时批阅方法，该方法包括以下步骤：获取答题卡扫描图中的扫描区域、扫描区域中的字体笔画、角点和连通域；对角点之间的距离进行分析，确定字体笔画的笔画宽度；根据笔画宽度对角点进行筛选，得到连笔角点；根据所述连笔角点和笔画宽度得到扫描区域对应的字体拥挤度；根据连通域内像素点的数量对连通域进行分类，得到字体连通域和连笔连通域；根据字体连通域在不同方向上的转动惯量得到连笔密集度；结合连笔密集度和连笔连通域的数量确定连笔指标；根据字体拥挤度和连笔指标确定特征半径；基于特征半径，对字体笔画和标准答案进行特征匹配，得到批阅结果。优选的，所述对角点之间的距离进行分析，确定字体笔画的笔画宽度，包括：获取两条相交的字体笔画中方向与竖直方向最为相近的字体笔画作为纵向笔画；将相交区域的任意一个角点作为第一目标角点，将相交区域的除第一目标角点外其他角点作为临近角点，连接第一目标角点和临近角点得到第一连线，将与水平向右的方向的夹角最小的第一连线对应的角点作为第一横向角点，计算第一目标角点与第一横向角点的距离作为第一宽度；将除第一横向角点外与第一目标角点距离最近的临近角点，作为纵向角点；连接纵向角点与临近角点得到第二连线，将与水平向右的方向的夹角最小的第二连线对应的角点作为第二横向角点；计算纵向角点与第二横向角点的距离作为第二宽度，将第一宽度和第二宽度的均值作为纵向笔画的笔画宽度。优选的，所述根据笔画宽度对角点进行筛选，得到连笔角点，包括：对于相交的两条字体笔画，将相交的两条字体笔画的笔画宽度的差异作为筛选差值；将筛选差值大于预设第一阈值的相交的两条字体笔画的相交区域，作为字体区域；将字体区域的角点作为连笔角点。优选的，所述根据所述连笔角点和笔画宽度得到扫描区域对应的字体拥挤度，包括：将所有连笔角点对应的字体笔画的笔画宽度的均值，作为宽度均值；将所述宽度均值和连笔角点的数量的乘积作为扫描区域对应的字体拥挤度。优选的，所述根据连通域内像素点的数量对连通域进行分类，得到字体连通域和连笔连通域，包括：将连通域内像素点的数量大于预设第二阈值的连通域作为字体连通域；将连通域内像素点的数量小于或等于预设第二阈值的连通域作为连笔连通域。优选的，所述根据字体连通域在不同方向上的转动惯量得到连笔密集度，包括：当字体连通域在水平方向上的转动惯量小于或等于垂直方向上的转动惯量时，将水平方向上的转动惯量和垂直方向上的转动惯量的比值的绝对值作为字体连通域的连笔密集度；当字体连通域在水平方向上的转动惯量大于垂直方向上的转动惯量时，将垂直方向上的转动惯量和水平方向上的转动惯量的比值的绝对值作为字体连通域的连笔密集度。优选的，所述结合连笔密集度和连笔连通域的数量确定连笔指标，包括：计算所有字体连通域的连笔密集度的均值作为密集度均值；将密集度均值和连笔连通域的数量的乘积进行正相关映射，得到对应的连笔指标。优选的，所述根据字体拥挤度和连笔指标确定特征半径，包括：将字体拥挤度和连笔指标的乘积作为调节半径；将调节半径和预设第三阈值的和值作为真数的自然对数函数值作为初始半径；将初始半径和预设第四阈值的和值作为特征半径。优选的，所述基于特征半径，对字体笔画和标准答案进行特征匹配，得到批阅结果，包括：基于特征半径获取扫描区域中字体笔画的关键点，作为字体关键点；将字体关键点和答案卡上的标准答案的关键点进行匹配，得到匹配对；将匹配对的数量占比作为匹配度，当匹配度大于或等于预设匹配阈值，扫描区域对应的题目正确；当匹配度小于预设匹配阈值，扫描区域对应的题目错误。第二方面，本发明一个实施例提供了一种基于图像数据的试题实时批阅系统，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述基于图像数据的试题实时批阅方法。本发明实施例至少具有如下有益效果：该方法在获取答题卡扫描图中的扫描区域中的字体笔画、角点和连通域之后，对角点进行分析，确定字体笔画的笔画宽度，由于连笔笔画的笔画宽度通常较窄，而正常字体笔画的笔画宽度通常差异较小，故先获取字体笔画的笔画宽度，以便于后续对连笔笔画和正常字体笔画的区分；根据笔画宽度对角点进行筛选，得到连笔角点；根据连笔角点和笔画宽度得到扫描区域对应的字体拥挤度，通过对扫描区域中字体进行分析，构建对应的反映考生书写字体的特征指标，该字体拥挤度也即为调节自适应的特征半径的一个特征指标；获取字体连通域和连笔连通域，计算字体连通域的连笔密集度，并结合连笔密集度和连笔连通域的数量确定连笔指标，该连笔指标作为调节自适应的特征半径的另一个特征指标，该连笔指标反映了扫描区域的字体笔画的连笔程度，该连笔指标越大，则对应的连笔的情况出现大的概率越大；根据字体拥挤度和连笔指标确定特征半径，基于特征半径对字体笔画和标准答案进行特征匹配，得到批阅结果，从而避免因为字体过于潦草而降低关键点的检测精度问题，改善了关键点检测的效果，提高了匹配的精度。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例所提供的基于图像数据的试题实时批阅方法的方法流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的基于图像数据的试题实时批阅方法及系统，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。本发明实施例提供了基于图像数据的试题实时批阅方法及系统的具体实施方法，该方法适用于填空试题批阅场景。该场景下在答题卡上每道填空题都有各自对应的扫描区域。为了解决将考生答案与标准答案匹配存在较大误差，会出现试题误判的技术问题。本发明对答题卡扫描图中的扫描区域的字体笔画和笔画宽度进行分析，获取考生的字体拥挤度和连笔指标，进而得到自适应的特征半径，基于特征半径对字体笔画和标准答案进行特征匹配，得到最终的批阅结果。下面结合附图具体的说明本发明所提供的基于图像数据的试题实时批阅方法及系统的具体方案。请参阅图1，其示出了本发明一个实施例提供的基于图像数据的试题实时批阅方法的方法流程图，该方法包括以下步骤：步骤S100，获取答题卡扫描图中的扫描区域、扫描区域中的字体笔画、角点和连通域。通过扫描仪获取答题卡的答题卡扫描图，本发明采用佳能DR-G2090扫描仪，实施者可根据实际情况选取其他品牌型号的扫描仪。由于扫描仪本身具有图像处理功能，例如主动阈值、移除背景、歪斜矫正等功能，因此不需要对扫描仪获取的答题卡扫描图进行预处理。在对答题卡进行扫描时，提前设置填空题的扫描区域，并对答题卡扫描图中的扫描区域进行二值化处理。获取二值化处理后扫描区域中的字体笔画、角点和连通域。在扫描区域中，由于人为的书写习惯导致字体不够规范，影响对字体特征点的提取，在通过FAST算法提取扫描区域中文字上的特征点，遍历像素点时，针对字体内笔画连笔和两个字之间连笔的情况，构建特征指标，改变像素点邻域的大小。在单个字内，连笔情况通常出现在两顺序笔画之间，即前一笔画的末端和后一笔画的前端，通常情况下，连笔部分的笔画相比字体中正常的笔画更细，且由于连笔部分本身并没有笔画，因此出现连笔的部分视觉上更拥挤，会出现连笔和笔画的交点。通过harris角点检测识别出扫描区域中的角点，并对角点进行标记。并通过canny算子识别出扫描区域中的边缘，并对每个角点对应的两条边缘进行对应标记，例如对检测出的角点a，若角点a有两条对应的边缘线，则对边缘线进行标记，分别标记为边缘线、。当扫描区域的大小正常时，例如当扫描区域没有进行放大时，每条字体笔画均为一条边缘线，获取扫描区域中的边缘线作为字体笔画。当扫描区域放大时，例如当扫描区域放大20倍的时候，每条字体笔画至少对应两条边缘线，例如竖直的字体笔画，字体笔画具有一定的宽度，则纵向构成字体笔画的为左右两条边缘线。由此，得到扫描区域中的字体笔画和角点。需要说明的是，在后续步骤中边缘或者边缘线均为每条字体笔画所对应的至少两条边缘线，而扫描区域没有放大时得到的字体笔画，仍称为字体笔画。通过连通成分分析遍历放大预设倍数后的扫描区域，获取扫描区域中的连通域。在本发明实施例中预设倍数的取值为20，在其他实施例中可以调整该预设倍数的取值，例如当实施者需要对扫描区域更精准的分析的时候，可以将预设倍数调整的更大。步骤S200，对角点之间的距离进行分析，确定字体笔画的笔画宽度；根据笔画宽度对角点进行筛选，得到连笔角点；根据所述连笔角点和笔画宽度得到扫描区域对应的字体拥挤度。对于相交的字体笔画，相交区域对应至少四个角点；获取两条相交的字体笔画中方向与竖直方向最为相近的字体笔画作为纵向笔画；将两条相交的字体笔画中相交区域的任意一个角点作为目标角点，将相交区域的除目标角点外其他角点作为第一临近角点，连接目标角点和第一临近角点得到第一连线，将与水平向右的方向的夹角最小的第一连线对应的角点作为第一横向角点，计算目标角点与第一横向角点的距离作为第一宽度；将目标角点与除第一横向角点外距离最近的第一临近角点，作为纵向角点；连接纵向角点与第一临近角点得到第二连线，将与水平向右的方向的夹角最小的第二连线对应的角点作为第二横向角点；计算纵向角点与第二横向角点的距离作为第二宽度，将第一宽度和第二宽度的均值作为纵向笔画的笔画宽度。获取两条相交的字体笔画中方向与水平方向最为相近的字体笔画作为横向笔画；将两条相交的字体笔画中相交区域的任意一个角点作为第二目标角点，将相交区域的除第二目标角点外其他角点作为第二临近角点，连接第二目标角点和第二临近角点得到第三连线，将与竖直向上的方向的夹角最小的第三连线对应的角点作为第一纵向角点，计算第二目标角点与第一纵向角点的距离作为第三宽度；将第二目标角点与除第一纵向角点外距离最近的第二临近角点，作为横向角点；连接横向角点与第二临近角点得到第四连线，将与竖直向上的方向的夹角最小的第四连线对应的角点作为第二纵向角点；计算横向角点与第二纵向角点的距离作为第四宽度，将第三宽度和第四宽度的均值作为横向笔画的笔画宽度。若两条字体笔画均为正常字体的笔画，而并非连笔时，则两条字体笔画的笔画宽度的差异相对较小，若两条字体笔画中一条为正常字体的笔画，而另一条为因书写不规范而产生的连笔时，由于连笔通常下笔会较轻，则对应的连笔的笔画宽度会相对较窄，故对应的两条字体笔画的宽度的差异会相对较大。故进一步的，根据笔画宽度对角点进行筛选，得到连笔角点，具体的：对于相交的两条字体笔画，将相交的两条字体笔画的笔画宽度的差异作为筛选差值，也即为将相交的两条字体笔画的笔画宽度的差值绝对值作为筛选差值；将筛选差值大于预设第一阈值的相交的两条字体笔画的相交区域，作为字体区域；将字体区域的角点作为连笔角点。在本发明实施例中预设第一阈值的取值为5，在其他实施例中实施者可根据实际情况调整该取值。相交的两条字体笔画之间笔画宽度差异越大，则相交的字体笔画中出现连笔的可能性越大；相交的两条字体笔画之间笔画宽度差异越小，则相交的字体笔画中出现连笔的可能性越小。统计相交的两条字体笔画对应的连笔角点的数量。通过相交的两条字体笔画之间的笔画宽度差异以及连笔角点的数量得到字体拥挤度，也即为根据连笔角点和笔画宽度得到扫描区域对应的字体拥挤度，具体的：将所有连笔角点对应的字体笔画的笔画宽度的均值，作为宽度均值；将所述宽度均值和连笔角点的数量的乘积作为扫描区域对应的字体拥挤度。该字体拥挤度的计算公式为：其中，为字体拥挤度；为连笔角点的数量；为所有连笔角点对应的字体笔画的笔画宽度的均值。其中，对应的连笔角点的数量越多，则反映连笔出现的次数越多，出现连笔情况的可能性越大，字体越拥挤，对应的字体拥挤度越大；反之，对应的连笔角点的数量越少，则反映连笔出现的次数越少，出现连笔情况的可能性越小，字体越不拥挤，对应的字体拥挤度越小。步骤S300，根据连通域内像素点的数量对连通域进行分类，得到字体连通域和连笔连通域；根据字体连通域在不同方向上的转动惯量得到连笔密集度；结合连笔密集度和连笔连通域的数量确定连笔指标。通过连通成分分析遍历答题卡扫描图中的扫描区域中的像素点，构建连笔密集度。字体中的连笔出现的越多，则通过连通成分分析得到的连通域中，连通的像素点的数量较小或区域边缘轮廓不规则的区域也就越多。由于连笔时下笔的力度较轻正常字体的笔画之间的连笔可能会出现未与两个正常字体的笔画相连，会出现断触类连笔的情况，相对而言连笔所对应的连通域中的像素点数量会较少。故进一步的，获取扫描区域中的连通域之后，根据连通域内像素点的数量对连通域进行分类，得到字体连通域和连笔连通域，具体的：将连通域内像素点的数量大于预设第二阈值的连通域作为字体连通域；将连通域内像素点的数量小于或等于预设第二阈值的连通域作为连笔连通域。在本发明实施例中预设第二阈值的取值为5，在其他实施例中实施者可根据实际情况调整该取值。根据字体连通域在不同方向上的转动惯量得到连笔密集度，具体的：对于字体连通域，获取各字体连通域的重心坐标，根据重心坐标求得字体连通域在x方向和y方向上的转动惯量，也即为根据重心坐标求得字体连通域在水平方向和垂直方向上的转动惯量，也即为字体连通域的轮廓上的点在x方向和在y方向上的二阶中心矩。记字体连通域在x方向上的转动惯量为，记字体连通域在y方向上的转动惯量为，其中，转动惯量反映了在x方向上字体连通域的轮廓坐标和重心坐标的偏离程度；转动惯量反映了在y方向上字体连通域的轮廓坐标和重心坐标的偏离程度。当字体连通域在水平方向上的转动惯量小于或等于垂直方向上的转动惯量时，将水平方向上的转动惯量和垂直方向上的转动惯量的比值的绝对值作为字体连通域的连笔密集度；当字体连通域在水平方向上的转动惯量大于垂直方向上的转动惯量时，将垂直方向上的转动惯量和水平方向上的转动惯量的比值的绝对值作为字体连通域的连笔密集度。该字体连通域的连笔密集度的计算公式为：其中，D为字体连通域的连笔密集度；为字体连通域在水平方向上的转动惯量；为字体连通域在垂直方向上的转动惯量；为取绝对值符号。当字体连通域的轮廓越接近于圆时，也即字体连通域的轮廓越规则时，字体连通域的轮廓在水平方向和垂直方向的偏离程度越接近，则连笔密集度的值越接近于1。当字体连通域的轮廓越不规则，轮廓在水平方向和垂直方向的偏离程度差异越大，则连笔密集度的值越小于1。每个字体连通域均对应一个连笔密集度。针对汉字书写的特点，当汉字书写较为规范时，通常笔画为横平竖直，单个正常笔画会在水平方向或垂直方向拥有较大的运动惯量，连笔密集度D越小于1；而当汉字书写较为不规范时，连笔部分较多，所获得的连通域在水平方向和垂直方向的运动惯量相差较小，连笔密集度越接近1。在得到连笔密集度之后，结合连笔密集度和连笔连通域的数量确定连笔指标，具体的：计算所有字体连通域的连笔密集度的均值作为密集度均值。将密集度均值和连笔连通域的数量的乘积进行正相关映射，得到对应的连笔指标。该连笔指标的计算公式为：其中，为连笔指标；为自然常数；为连笔连通域的数量；为密集度均值。在本发明实施例中通过以自然常数为底数，以密集度均值和连笔连通域的数量的乘积为指数的指数函数，对密集度均值和连笔连通域的数量的乘积进行正相关映射，得到对应的连笔指标。连笔连通域的数量越大，则断触类连笔出现的可能性越大，连笔连通域的数量和连笔指标呈正比关系，故对应的连笔指标越大；密集度均值为连笔密集度的均值，反映的是字体的连笔情况，故密集度均值越大，则笔画间连笔情况出现的可能性越大，故对应的连笔指标越大。反之，连笔连通域的数量越小，则断触类连笔出现的可能性越小，连笔连通域的数量和连笔指标呈正比关系，故对应的连笔指标越小；密集度均值为连笔密集度的均值，反映的是字体的连笔情况，故密集度均值越小，则笔画间连笔情况出现的可能性越小，故对应的连笔指标越小，密集度均值和连笔指标也呈正比关系。步骤S400，根据字体拥挤度和连笔指标确定特征半径；基于特征半径，对字体笔画和标准答案进行特征匹配，得到批阅结果。根据字体拥挤度和连笔指标确定特征半径，具体的：将字体拥挤度和连笔指标的乘积作为调节半径。将调节半径和预设第三阈值的和值作为真数的自然对数函数值作为初始半径，将初始半径和预设第四阈值的和值作为特征半径。在本发明实施例中预设第三阈值的取值为１，预设第四阈值的取值为３，在其他实施例中可由实施者根据实际情况调整预设第三阈值和预设第四阈值。该特征半径的计算公式为：其中，为特征半径；为字体拥挤度；为连笔指标；ln为自然对数函数；1为预设第三阈值；3为预设第四阈值；为调节半径；为初始半径。当字体拥挤度越大，则对应的反映字体的连笔情况更加严重；当连笔指标越大时，连笔出现的可能性就更大，故将字体拥挤度和连笔指标的乘积得到的调节半径作为反映字体结构复杂度的指标，该字体拥挤度和连笔指标越大，则对应的字体的连笔情况越严重，出现的次数越多，则字体更加潦草，字体的内部结构更加复杂，故反映字体结构复杂度的调节半径越大，也即字体拥挤度和连笔指标的乘积越大。当字体拥挤度和连笔指标的乘积越大时，则字体内部结构越复杂，在像素点邻域内进行特征点分析时，应扩大邻域的半径，考虑更大范围内的像素点特征，从而使得特征点选取的结果更准确。故字体拥挤度和连笔指标均与特征半径呈正比关系。进一步的，基于特征半径，对字体笔画和标准答案进行特征匹配，得到批阅结果，具体的：基于特征半径获取扫描区域中字体笔画的关键点，作为字体关键点；将字体关键点和答案卡上对应区域的标准答案的关键点进行匹配，得到匹配对；将匹配对的数量占比作为匹配度。需要说明的是匹配对的数量占比，即为匹配对的数量和扫描区域中的关键点的数量的比值。当匹配度大于或等于预设匹配阈值时，扫描区域对应的题目正确；当匹配度小于预设匹配阈值时，扫描区域对应的题目错误。在本发明实施例中预设匹配阈值的取值为0.9，在其他实施例中实施者可根据实际情况调整该取值。当匹配度越大时，则答题卡对应的答案与标准答案越匹配，在本发明实施例中预设匹配阈值为0.9时为了避免出现缺少笔画或者是因连笔造成的部分关键点与答题卡上的标准字体关键点没有匹配，而实际上考生的答案是正确的情况出现。故设定当匹配度大于预设匹配阈值时，认为扫描区域的答案与标准答案匹配，则对应的题目批阅结果为正确。本发明针对拥有固定答案的填空题批阅的方法进行改进，根据考生的书写习惯，分析字体中连笔情况，根据连笔的程度构造连笔指标和字体拥挤度这两个特征指标，通过特征指标改进ORB图像匹配中选取像素点的邻域大小，也即自适应得到特征半径，从而避免因为字体过于潦草而降低关键点的检测精度问题，改善了关键点检测的效果，提高了匹配的精度。综上所述，本发明涉及图像处理技术领域。该方法获取答题卡扫描图中的扫描区域、扫描区域中的字体笔画、角点和连通域；对角点之间的距离进行分析，确定字体笔画的笔画宽度；根据笔画宽度对角点进行筛选，得到连笔角点；根据连笔角点和笔画宽度得到扫描区域对应的字体拥挤度；根据连通域内像素点的数量对连通域进行分类，得到字体连通域和连笔连通域；根据字体连通域在水平方向和垂直方向上的转动惯量得到连笔密集度；结合连笔密集度和连笔连通域的数量确定连笔指标；根据字体拥挤度和连笔指标确定特征半径；基于特征半径，对字体笔画和标准答案进行特征匹配，得到批阅结果，从而避免因为字体过于潦草而降低关键点的检测精度问题，改善了关键点检测的效果，提高了匹配的精度。本发明实施例还提出了一种基于图像数据的试题实时批阅系统，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述方法的步骤。由于基于图像数据的试题实时批阅方法在上述给出了详细描述，不再赘述。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。
