标题title
一种商品防盗检测方法、装置、设备及存储介质
摘要abst
本申请提供了一种商品防盗检测方法、装置、设备及存储介质，根据出货订单比对动态柜的商品库存；若出货订单与商品库存不匹配，则调取与出货订单对应的交易视频；通过商品库存或交易视频确定实际交易商品；根据实际交易商品和出货订单生成候补订单；将候补订单发送给对应的用户，在预设时长内未接收到用户的支付信息，则基于交易视频判断是否存在非友好行为；根据历史被标记记录判断是否将用户列入黑名单。通过本申请方案的实施，当出货订单与商品库存不匹配时，查询对应的交易视频，根据实际交易商品和出货订单生成候补订单，将候补订单发送给用户，若用户拒绝支付候补订单，则根据用户非友好行为次数将用户列入黑名单，防止用户再次盗窃。
权利要求书clms
1.一种商品防盗检测方法，其特征在于，包括：获取出货订单；根据所述出货订单比对动态柜的商品库存；若所述出货订单与所述商品库存不匹配，则调取与每笔出货订单对应的交易视频；通过所述商品库存或所述交易视频确定实际交易商品；其中，所述实际交易商品包括：所述交易视频中已识别出的正确商品、未识别出的商品以及识别错误的商品；根据所述实际交易商品和所述出货订单生成候补订单；将所述候补订单发送给对应的用户，并提醒所述用户支付；在预设时长内未接收到所述用户的支付信息，则基于所述交易视频判断所述用户是否存在非友好行为；当所述用户存在非友好行为时，标记所述用户；根据所述用户的历史被标记记录判断是否将所述用户列入黑名单。2.根据权利要求1所述的商品防盗检测方法，其特征在于，所述获取出货订单的步骤，包括：获取单次交易对应的出货订单；或，获取预设盘点周期内的所有出货订单。3.根据权利要求1所述的商品防盗检测方法，其特征在于，所述基于所述交易视频判断所述用户是否存在非友好行为的步骤，包括：在所述交易视频中，基于用户的伸手动作，在用户将手拿出动态柜之后，若未检测出用户手中存在商品，则确定所述用户存在非友好行为；若检测出用户手中存在商品，则确定所述动态柜存在识别错误。4.根据权利要求1所述的商品防盗检测方法，其特征在于，所述若所述出货订单与所述商品库存不匹配，则调取与所述出货订单对应的交易视频的步骤之后，还包括：在所述交易视频中，确定摄像头的有效拍摄范围；若所述有效拍摄范围低于预设范围时，则确定所述用户存在非友好行为；若所述有效拍摄范围不低于预设范围时，则确定所述动态柜存在识别错误。5.根据权利要求3或4所述的商品防盗检测方法，其特征在于，所述根据所述用户的历史记录判断是否将所述用户列入黑名单的步骤，包括：查询所述用户对应的非好友行为次数；若在所述预设时长内所述用户支付所述候补订单，则消除与所述候补订单对应的非友好行为的次数记录；当所述非好友行为次数超过预设阈值时，将所述用户列入黑名单。6.根据权利要求1所述的商品防盗检测方法，其特征在于，还包括：当所述用户遮挡摄像头拿取商品时，提示所述用户；若所述用户的遮挡时长超过预设遮挡时长，则将对应的出货订单设置为风险订单；其中，所述风险订单为可能出现异常的出货订单；在调取与每笔出货订单对应的交易视频时，优先显示所述风险订单。7.根据权利要求1所述的商品防盗检测方法，其特征在于，还包括：对所述动态柜的柜门进行监测；当监测到所述柜门开启，且所述动态柜未授予用户开门权限时，确定所述动态柜处于被盗窃状态；根据所述被盗窃状态发送警告提示，并将所述被盗窃状态发送至后台服务器。8.一种商品防盗检测装置，其特征在于，包括：获取模块，用于获取出货订单；比对模块，用于根据所述出货订单比对动态柜的商品库存；调用模块，用于若所述出货订单与所述商品库存不匹配，则调用与每笔出货订单对应的交易视频；确定模块，用于通过所述商品库存或所述交易视频确定实际交易商品；其中，所述实际交易商品包括：所述交易视频中已识别出的正确商品、未识别出的商品以及识别错误的商品；生成模块，用于根据所述实际交易商品和所述出货订单生成候补订单；发送模块，用于将候补订单发送给对应的用户，并提醒所述用户支付；第一判断模块，用于在预设时长内未接收到所述用户的支付信息，则基于所述交易视频判断所述用户是否存在非友好行为；标记模块，用于当所述用户存在非友好行为时，标记所述用户；第二判断模块，用于根据所述用户的历史被标记记录判断是否将所述用户列入黑名单。9.一种电子设备，其特征在于，包括存储器及处理器，其中：所述处理器用于执行存储在所述存储器上的计算机程序；所述处理器执行所述计算机程序时，实现权利要求1至7中任意一项所述方法中的步骤。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时，实现权利要求1至7中的任意一项所述方法中的步骤。
说明书desc
技术领域本申请涉及智能售货机领域，尤其涉及一种商品防盗检测方法、装置、设备及存储介质。背景技术自动售货机，英文名，是一种能根据投入的钱币自动付货的机器。自动售货机是商业自动化的常用设备，它不受时间、地点的限制，能节省人力、方便交易。是一种全新的商业零售形式，又被称为24小时营业的微型超市。传统的智能售货机通过监控摄像头判断客户拿出了什么商品，但是由于智能售货机一般处于无人看管状态，因此总会有一些不友好的客户试图通过遮挡拿出的商品或者遮挡摄像头，以逃避支付金额，给商家造成严重损失。发明内容本申请实施例提供了一种商品防盗检测方法、装置、设备及存储介质，至少能够解决相关技中因用户的非友好行为造成商家财产损失的问题。本申请实施例第一方面提供了一种商品防盗检测方法，包括：获取出货订单；根据所述出货订单比对动态柜的商品库存；若所述出货订单与所述商品库存不匹配，则调取与每笔出货订单对应的交易视频；通过所述商品库存或所述交易视频确定实际交易商品；其中，所述实际交易商品包括：所述交易视频中已识别出的正确商品、未识别出的商品以及识别错误的商品；根据所述实际交易商品和所述出货订单生成候补订单；将所述候补订单发送给对应的用户，并提醒所述用户支付。在预设时长内未接收到所述用户的支付信息，则基于所述交易视频判断所述用户是否存在非友好行为；当所述用户存在非友好行为时，标记所述用户；根据所述用户的历史被标记记录判断是否将所述用户列入黑名单。可选的，所述获取出货订单的步骤，包括：获取单次交易对应的出货订单；或，获取预设盘点周期内的所有出货订单。可选的，所述基于所述交易视频判断所述用户是否存在非友好行为的步骤之后，还包括：在所述交易视频中，基于用户的伸手动作，在用户将手拿出动态柜之后，若未检测出用户手中存在商品，则确定所述用户存在非友好行为；若检测出用户手中存在商品，则确定所述动态柜存在识别错误。所述基于所述交易视频判断所述用户是否存在非友好行为的步骤之后，还包括：在所述交易视频中，确定摄像头的有效拍摄范围；若所述有效拍摄范围低于预设范围时，则确定所述用户存在非友好行为；若所述有效拍摄范围不低于预设范围时，则确定所述动态柜存在识别错误。可选的，所述根据所述用户的历史记录判断是否将所述用户列入黑名单的步骤之后，还包括：查询所述用户对应的非好友行为次数；若在所述预设时长内所述用户支付所述候补订单，则消除与所述候补订单对应的非友好行为的次数记录；当所述非好友行为次数超过预设阈值时，将所述用户列入黑名单。可选的，该商品防盗检测方法还包括：当所述用户遮挡摄像头拿取商品时，提示所述用户移开遮挡物；若所述用户的遮挡时长超过预设遮挡时长，则将对应的出货订单设置为风险订单；在调取与每笔出货订单对应的交易视频时，优先显示实时风险订单。可选的，该商品防盗检测方法还包括：对所述动态柜的柜门进行监测；当监测到所述柜门开启，且所述动态柜未授予用户开门权限时，确定所述动态柜处于被盗窃状态；根据所述被盗窃状态发送警告语音，并将所述被盗窃状态 发送至后台服务器。本申请实施例第二方面提供了一种商品防盗检测装置，包括：获取模块，用于获取出货订单；比对模块，用于根据所述出货订单比对动态柜的商品库存；调用模块，用于若所述出货订单与所述商品库存不匹配，则调用与每笔出货订单对应的交易视频；确定模块，用于通过所述商品库存或所述交易视频确定实际交易商品；其中，所述实际交易商品包括：所述交易视频中已识别出的正确商品、未识别出的商品以及识别错误的商品；生成模块，用于根据所述实际交易商品和所述出货订单生成候补订单；发送模块，用于将候补订单发送给对应的用户，并提醒所述用户支付；第一判断模块，用于在预设时长内未接收到所述用户的支付信息，则基于所述交易视频判断所述用户是否存在非友好行为；标记模块，用于当所述用户存在非友好行为时，标记所述用户；第二判断模块，用于根据所述用户的历史被标记记录判断是否将所述用户列入黑名单。本申请实施例第三方面提供了一种电子设备，其特征在于，包括存储器及处理器，其中，所述处理器用于执行存储在所述存储器上的计算机程序，所述处理器执行所述计算机程序时上述本申请实施例第一方面提供的商品防盗检测方法中的各步骤。本申请实施例第四方面提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时，实现上述本申请实施例第一方面提供的商品防盗检测方法中的各步骤。由上可见，根据本申请方案所提供的商品防盗检测方法、装置、设备及存储介质，获取出货订单；根据所述出货订单比对动态柜的商品库存；若所述出货订单与所述商品库存不匹配，则调取与每笔出货订单对应的交易视频；通过所述商品库存或所述交易视频确定实际交易商品；其中，所述实际交易商品包括：所述交易视频中已识别出的正确商品、未识别出的商品以及识别错误的商品；根据所述实际交易商品和所述出货订单生成候补订单；将所述候补订单发送给对应的用户，并提醒所述用户支付。在预设时长内未接收到所述用户的支付信息，则基于所述交易视频判断所述用户是否存在非友好行为；当所述用户存在非友好行为时，标记所述用户；根据所述用户的历史被标记记录判断是否将所述用户列入黑名单。通过本申请方案的实施，当出货订单与商品库存不匹配时，查询对应的交易视频，根据实际交易商品和出货订单生成候补订单，将候补订单发送给用户，若用户拒绝支付候补订单，则根据用户非友好行为次数将用户列入黑名单，防止用户再次盗窃。附图说明图1为本申请实施例提供的商品防盗检测方法的基本流程示意图；图2为本申请实施例提供的商品防盗检测方法的示例性流程示意图；图3为本申请实施例提供的商品防盗检测方法的另一示例性流程示意图；图4为本申请实施例提供的商品防盗检测装置的程序模块示意图；图5为本申请实施例提供的电子设备的结构示意图。具体实施方式为使得本申请的发明目的、特征、优点能够更加的明显和易懂，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而非全部实施例。基于本申请中的实施例，本领域技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。为了解决相关技术中因用户的非友好行为造成商家财产损失的问题，本申请实施例提供了一种商品防盗检测方法，如图1为本实施例提供的商品防盗检测方法的基本流程图，该商品防盗检测方法包括以下的步骤：步骤110、获取出货订单；步骤120、根据出货订单比对动态柜的商品库存。具体的，动态柜是智能售货机中的一种，包括但不限于立式售货柜以及箱式售货柜。在实际应用中，当出现货道卡货、商品识别错误等情况会导致系统记录的库存与商品实际库存存在误差，可通过盘点库存的功能来修正库存。盘点完成后会生成盘点记录，及时了解货损情况。在本实施例中，比对商品库存可以理解为对商品库存进行盘点，首先要获取动态柜的出货订单，然后根据出货订单上的出货信息对动态柜的商品库存进行逐一比对。例如，在一次补货之后，动态柜中的商品库存是100件商品，每生成一笔出货订单，商品库存就会减少与出货订单中对应的商品数量，正常情况下，出货订单中出货的商品数量与商品库存的剩余数量的总和为100件，若不是100件，则说明出货订单出现异常，因此根据出货订单盘点动态柜的商品库存能够准确的查找出是否存在异常的交易。在本实施例一种可选的实施方式中，获取出货订单的步骤，包括：获取单次交易对应的出货订单；或，获取预设盘点周期内的所有出货订单。具体的，商户可在动态柜管理系统中选择盘点方式，例如，每生成一个出货订单就对动态柜的商品库存盘点一次，或者，在预设周期内对动态柜的商品库存进行盘点，具体可按照商户的意愿而定。若选择每生成一笔出货订单就对动态柜的商品库存盘点一次的盘点方式，当动态柜生成出货订单时，管理系统会实时根据出货订单盘点商品库存，并将盘点记录推送给商户的移动终端，此方式针对每一次商品出货情况，比对商品库存对应于出货订单的前后差别，从而确定出货订单是否为正常订单，保证每一笔出货订单得到及时准确的校验。若选择在预设周期内对动态柜的商品库存进行盘点，则结算预设周期内所有出货订单的商品种类、数量以及金额，并与商品库存进行比对，提高盘点效率。步骤130、若出货订单与商品库存不匹配，则调取与每笔出货订单对应的交易视频。具体的，在将出货订单所包含的商品与商品库存中剩余商品进行盘点时，若出货订单的商品数量与商品库存中剩余商品数量不匹配，则确定出货订单发生异常，那么就需要在管理系统中调出与每笔出货订单对应的交易视频，其中，交易视频也可以在每笔出货订单的详情界面进行查看。针对不同的盘点方式，例如，当每生成一笔出货订单，动态柜都会对商品库存进行盘点时，在出现盘点结果不匹配的情况时，只需要调取该出货订单的视频即可；当在预设周期内对动态柜的商品库存进行盘点时，则需要将预设周期内所有出货订单的交易视频都调取出来进行逐一审查。步骤140、通过商品库存或交易视频确定实际交易商品；步骤150、根据实际交易商品和出货订单生成候补订单。具体的，实际交易商品包括已识别出的正确商品、交易视频中未识别出的商品以及识别错误的商品；在本实施例中，在获取到交易视频之后，可以通过动态柜的售后服务的人工审核，也可以商户自己观看交易视频，从交易视频中确定由于用户的遮挡导致摄像头未识别出的商品，或算法识别错误的商品。可以理解的是，当采用每生成一笔出货订单，动态柜都会对商品库存进行盘点时，只需要将出货订单与商品库存进行比对就能确定实际交易商品；而采用在预设周期内对动态柜的商品库存进行盘点时，就将所有出货订单与商品库存进行盘点时，就需要对交易视频进行审核。在确定出货订单的异常原因之后，对出货订单进行修改，例如，当确定是用户故意遮挡摄像头或掩藏商品时，点击出货订单的修改选项，在原商品信息的基础上添加用户掩藏的商品的商品信息，并将添加的商品的金额作为候补订单的待支付金额；或者，当确定是算法识别错误时，在出货订单的对应位置将商品信息修改为正确的商品信息，并计算出货订单的原支付金额与实际支付金额的差值，生成新的待支付金额，保证候补订单信息完整，防止与用户产生不必要的纠纷。步骤160、将候补订单发送给对应的用户，并提醒用户支付。具体的，在本实施例中，根据出货订单上显示的支付平台用户ID，将候补订单以及实际支付金额，基于相应的支付平台发送给用户，并通过人工客服或者发短信的方式提醒用户对候补订单进行支付。步骤170、在预设时间内未接收到用户的支付信息，则基于交易视频判断用户是否存在非友好行为；步骤180、当用户存在非友好行为时，标记用户；步骤190、根据用户的历史被标记记录判断是否将用户列入黑名单。具体的，历史被标记记录包括用户历史被标记的非友好行为。在本实施例中，当用户在预设时间内未支付候补订单时，再次根据交易视频判断用户在购物时是否存在明显的非友好行为，例如掩藏商品或遮挡摄像头，若存在则标记用户的非友好行为，并根据该标记记录用户的非友好行为次数，再根据用户总共的非友好行为次数判断是否将用户列入黑名单。可选的，在本实施例一种可选的实施方式中，若出货订单与商品库存不匹配，则调取与出货订单对应的交易视频的步骤之后，还包括：在交易视频中，基于用户的伸手动作，在用户将手拿出动态柜之后，若未检测出用户手中存在商品，则确定用户存在非友好行为；若检测出用户手中存在商品，则确定动态柜存在识别错误。具体的，可以理解的是，当出货订单出现异常时，在获取到相应的交易视频之后，可将交易视频移交至人工审核，通过人工查找出货订单异常的原因。常见的，在本实施例中，出货订单异常的情况大致分为两种，包括动态柜自身原因和外部原因，自身原因可以理解为由于商品太过相似或者商品识别算法不够全面，导致即使拍摄到用户手中的商品也无法准确的识别出商品信息，使得生成的出货订单错误；而外部原因在于用户在购买商品时的非友好行为，例如，用户在取出商品时，将一些较小的商品藏在手心里或者袖子里，使摄像头无法识别到被隐藏的商品，同样会造成动态柜生成错误的订单。因此，在进一步的对交易视频进行审核时，基于用户将手伸进动态柜的动作，触发用户正在购物的判定，在用户将手拿出动态柜时，基于图像识别算法将集中识别用户手部范围内是否存在商品，若经过再次识别依旧识别不出用户手中存在商品，那么在出货订单与商品库存不匹配的前提下，则可认定用户存在非友好行为；反之，则可认为是动态柜在进行第一次识别时的识别错误。可选的，常见的非友好行为还可能是用户在购物时故意遮挡摄像头，导致摄像头无法识别出商品。因此，在对商品库存进行盘点时，在出货订单与商品库存不匹配的交易视频中，确定摄像头的有效拍摄范围，即摄像头能够拍摄到有效画面的范围，若有效拍摄范围低于预设范围时，则确定用户存在非友好行为；若有效拍摄范围不低于预设范围时，则确定动态柜存在识别错误。例如，将摄像头比作一整个拍摄画面的话，预设范围可以是四分之三个摄像头的拍摄画面都能正常拍摄到用户拿出商品的动作，若实际有效拍摄范围只有二分之一个摄像头的拍摄画面，则确定用户遮挡摄像头，导致摄像头无法准确识别出商品。反之，在有效拍摄范围不低于预设范围时，则确定是动态柜自身的识别错误。可选的，在判断用户是否遮挡摄像头时，如果摄像头镜面本身就存在污垢或拍摄功能出现问题，有可能会影响对用户购物行为的判断。因此，在动态柜处于待机状态时，实时检测摄像头是否能正常工作，拍摄画面是否在正常，保证对用户拿出商品进行识别的准确性。可选的，确定用户存在非友好行为的步骤之后，还包括：查询用户对应的非好友行为次数；若在预设时长内用户支付候补订单，则消除与候补订单对应的非友好行为的次数记录；当非好友行为次数超过预设阈值时，将用户列入黑名单。具体的，在本实施例中，在确定交易视频中存在非友好行为时，商户可以选择点击该交易视频对应的跳转链接或直接进入会员中心的拉黑管理界面，该界面显示内容包括出货订单的交易视频，订单的商品信息，订单的用户信息，商户可以通过搜索用户名称或手机号码或支付平台用户ID查找用户对于的非友好次数以及拉黑状态。可以理解的是，当用户仅出现一次非友好行为时，可以认为是用户第一次使用智能售货机，不了解动态柜的使用方式，从而操作不当导致系统认为用户存在非友好行为，当在规定的时间内用户支付了候补订单，则可以消除与候补订单对应的非友好记录。但是，若同一用户连续出现两次、三次，甚至更多的非友好次数，那么可以直接认定用户故意通过非友好行为偷盗动态柜中的商品，因此当同一用户的非好友行为次数超过预设恶意行为阈值时，将用户列入黑名单，当用户再次扫描或刷脸开门时，禁止用户获取开门权限。在用户被列入黑名单之后，根据扫码时提供的用户信用信息，扣除用户相应的信誉分，扣除的具体数值可以将用户的信誉分减少至任何需要信誉分进行授权的设备的预设阈值之下，使用户无法再通过信誉分进行任何消费行为，例如，扫码解锁共享单车、扫码借用充电宝等。若用户想要恢复信誉分，则必须对风险订单进行支付并申请解除黑名单，以此追回运营商的损失。具体的，在本实施例中，商户选择将候补订单信息通过售后服务的方式发送至用户终端之后，提示用户在规定的时间范围内对候补订单上进行支付，规定时间有运营商自己设定，当超过规定时间后，若用户还未对风险订单进行支付，则直接将用户的身份信息列入黑名单，禁止该用户扫描动态柜上的二维码进行购物，防止逃单的情况过多导致运营商亏损。基于上述申请的实施例方案，获取出货订单；根据出货订单比对动态柜的商品库存；若出货订单与商品库存不匹配，则调取与每笔出货订单对应的交易视频；通过商品库存或交易视频确定实际交易商品；根据实际交易商品和出货订单生成候补订单；将候补订单发送给对应的用户，并提醒用户支付。在预设时长内未接收到用户的支付信息，则基于交易视频判断用户是否存在非友好行为；当用户存在非友好行为时，标记用户；根据用户的历史被标记记录判断是否将用户列入黑名单。通过本申请方案的实施，当出货订单与商品库存不匹配时，查询对应的交易视频，根据实际交易商品和出货订单生成候补订单，将候补订单发送给用户，若用户拒绝支付候补订单，则根据用户非友好行为次数将用户列入黑名单，防止用户再次盗窃。如图2为本实施例提供的商品防盗检测方法的示例性流程示意图，具体包括如下步骤：步骤210、当用户遮挡摄像头拿取商品时，提示用户移开遮挡物；步骤220、若用户的遮挡时长超过预设遮挡时长，则将对应的出货订单设置为风险订单；步骤230、在调取与每笔出货订单对应的交易视频时，优先显示风险订单。具体的，风险订单为可能出现异常的出货订单，在实际应用中，动态柜中用于识别商品的摄像头一般位于靠近柜门的内壁左右两侧，因此，用户在不熟悉动态柜中设备部署的前提下，伸手取出商品时误将摄像头挡住也是有可能的，更有甚的，在拿取放在更里面的商品时，一手撑着柜壁，一手伸进去拿商品，此时两个摄像头都被遮蔽了。在本实施例中，当用户遮挡摄像头拿取商品时，通过语音提醒或者响铃的方式提示用户移开手臂或者遮挡物。如果用户是选取商品时不小心的遮挡住了摄像头，那么在听到突然的语音提示或者响铃之后，会根据提示挪开手臂，也不会再遮挡摄像头了。如果用户是故意遮挡摄像头，通过语音或者响铃的提示方式也会对用户产生警示作用，吓退用户的下一步行动。若用户并不受提示音的影响，当遮挡时间超过预设的遮挡时长时，将对应的出货订单设置为风险订单，并将风险订单发送至商户的管理系统上，或者在对商品库存进行盘点时，将风险订单优先显示，在人工审核时优先查看。可选的，对用户遮挡摄像头的监测除了摄像头无法监测实际画面之后，还可以在对应的两个摄像头之间设置红外感应装置，在正常拍摄情况下，两个摄像头可以互相接收到对方发送的红外线，当其中一个或者两个摄像头被遮挡时，红外线被阻断，摄像头的红外感应装置无法感应到另一摄像头的红外线，因此同样可以判断摄像头被遮挡，提高动态柜在夜间的准确性。如图3为本实施例提供的商品防盗检测方法的另一示例性流程示意图，具体包括如下步骤：步骤310、对动态柜的柜门进行监测；步骤320、当监测到柜门开启，且动态柜未授予用户开门权限时，确定动态柜处于被盗窃状态；步骤330、根据被盗窃状态发送警告提示，并将被盗窃状态发送至后台服务器。具体的，动态柜的柜门包括但不限于单开门、双开门、卷帘门以及横向推拉式门。在实际应用中，由于市面上大部分智能开门柜使用塑料材质门体，在整体强度上不如铝合金等金属材质，因而抗扭曲能力一般。在特定环境下，如客人不通过正常购买途径开门，而是强行拉门，在门体变形产生的空隙中伸手拿取柜体中货物，会导致货物丢失，对客户造成损失。在本实施例中，以常见的单开门或双开门为例，在动态柜上边框或下边框各安装两个摄像头，用于拍摄动态柜边框与柜门之间的缝隙，两个摄像头的拍摄范围互相交叉，然后在动态柜靠近柜门的左右两侧内侧柜壁上安装长条灯带，通过安装在柜体左上角的摄像头保持拍摄，利用监控摄像头自身算法“动态侦测”功能中的“检测亮条”算法，正常关门时，摄像头检测不到灯带亮条，当柜门打开或者产生缝隙时，左侧摄像头可以拍摄到右侧灯带的亮光，右侧摄像头可以拍摄到左侧灯带的亮光。在摄像头监测到灯带的亮光时，检测动态柜是否授予用户开门权限，可以理解的是，未授予用户开门权限可以认定为用户没有通过扫码或刷脸，此时如果摄像头通过门缝检测到柜体内部长条灯带发出的光，且动态柜未授予用户开门权限，那么可以确定动态柜处于被盗窃状态，并外部发出警告提示，其中，警告提示方式包括但不限于语音提示，阻止盗窃者的进一步行动或吓退盗窃者。图4为本申请实施例提供的一种商品防盗检测装置，该商品防盗检测装置可用于实现前述实施例中的商品防盗检测方法。如图4所示，该商品防盗检测装置主要包括：获取模块10，用于获取出货订单；比对模块20，用于根据出货订单比对动态柜的商品库存；调用模块30，用于若出货订单与商品库存不匹配，则调用与每笔出货订单对应的交易视频；确定模块40，用于通过商品库存或交易视频确定实际交易商品；其中，实际交易商品包括：交易视频中已识别出的正确商品、未识别出的商品以及识别错误的商品；生成模块50，用于根据实际交易商品和出货订单生成候补订单；发送模块60，用于将候补订单发送给对应的用户，并提醒用户支付；第一判断模块70，用于在预设时长内未接收到用户的支付信息，则基于交易视频判断用户是否存在非友好行为；标记模块80，用于当用户存在非友好行为时，标记用户；第二判断模块90，用于根据用户的历史被标记记录判断是否将用户列入黑名单。在本申请一种可选的实施方式中，获取模块具体用于：获取单次交易对应的出货订单；或，获取预设盘点周期内的所有出货订单。在本实施例一种可选的实施方式中，第一判断模块具体用于：在出货订单与商品库存不匹配的交易视频中，基于用户的伸手动作，在用户将手拿出动态柜之后，若未检测出用户手中存在商品，则确定用户存在非友好行为；若检测出用户手中存在商品，则确定动态柜存在识别错误。在本实施例一种可选的实施方式中，第一判断模块具体用于：在出货订单与商品库存不匹配的交易视频中，确定摄像头的有效拍摄范围；若有效拍摄范围低于预设范围时，则确定用户存在非友好行为；若有效拍摄范围不低于预设范围时，则确定动态柜存在识别错误。进一步的，在本实施例一种可选的实施方式中，第二判断模块具体用于查询用户对应的非好友行为次数；若在预设时长内用户支付候补订单，则消除与候补订单对应的非友好行为的次数记录；当非好友行为次数超过预设恶意行为阈值时，将用户列入黑名单。在本实施例一种可选的实施方式中，该商品防盗检测装置还包括：提示模块、设置模块、显示模块。提示模块用于：当用户遮挡摄像头拿取商品时，通过语音提醒的方式提示用户移开遮挡物。设置模块用于：若用户的遮挡时长超过预设遮挡时长，则将对应的出货订单设置为风险订单；其中，风险订单为异常的出货订单。显示模块用于：在调取与每笔出货订单对应的交易视频时，在显示界面上弹出风险订单。在本实施例一种可选的实施方式中，该商品防盗检测装置还包括：监测模块。监测模块用于：对动态柜的柜门进行监测。确定模块还用于：当监测到柜门开启，且动态柜未授予用户开门权限时，确定动态柜处于被盗窃状态。发送模块还用于：根据被盗窃状态发送警告提示，并将被盗窃状态发送至后台服务器。根据本申请方案所提供的商品防盗检测装置，获取出货订单；根据出货订单比对动态柜的商品库存；若出货订单与商品库存不匹配，则调取与每笔出货订单对应的交易视频；通过商品库存或交易视频确定实际交易商品；根据实际交易商品和出货订单生成候补订单；将候补订单发送给对应的用户，并提醒用户支付。在预设时长内未接收到用户的支付信息，则基于交易视频判断用户是否存在非友好行为；当用户存在非友好行为时，标记用户；根据用户的历史被标记记录判断是否将用户列入黑名单。通过本申请方案的实施，当出货订单与商品库存不匹配时，查询对应的交易视频，根据实际交易商品和出货订单生成候补订单，将候补订单发送给用户，若用户拒绝支付候补订单，则根据用户非友好行为次数将用户列入黑名单，防止用户再次盗窃。图5为本申请实施例提供的一种电子设备。该电子设备可用于实现前述实施例中的商品防盗检测方法，主要包括：存储器501、处理器502及存储在存储器501上并可在处理器502上运行的计算机程序503，存储器501和处理器502通过通信连接。处理器502执行该计算机程序503时，实现前述实施例中的商品防盗检测方法。其中，处理器的数量可以是一个或多个。存储器501可以是高速随机存取记忆体存储器，也可为非不稳定的存储器，例如磁盘存储器。存储器501用于存储可执行程序代码，处理器502与存储器501耦合。进一步的，本申请实施例还提供了一种计算机可读存储介质，该计算机可读存储介质可以是设置于上述各实施例中的电子设备中，该计算机可读存储介质可以是前述图5所示实施例中的存储器。该计算机可读存储介质上存储有计算机程序，该程序被处理器执行时实现前述实施例中的商品防盗检测方法。进一步的，该计算机可存储介质还可以是U盘、移动硬盘、只读存储器、RAM、磁碟或者光盘等各种可以存储程序代码的介质。在本申请所提供的几个实施例中，应该理解到，所揭露的装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，模块的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个模块或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或模块的间接耦合或通信连接，可以是电性，机械或其它的形式。作为分离部件说明的模块可以是或者也可以不是物理上分开的，作为模块显示的部件可以是或者也可以不是物理模块，即可以位于一个地方，或者也可以分布到多个网络模块上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能模块可以集成在一个处理模块中，也可以是各个模块单独物理存在，也可以两个或两个以上模块集成在一个模块中。上述集成的模块既可以采用硬件的形式实现，也可以采用软件功能模块的形式实现。集成的模块如果以软件功能模块的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个可读存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例方法的全部或部分步骤。而前述的可读存储介质包括：U盘、移动硬盘、ROM、RAM、磁碟或者光盘等各种可以存储程序代码的介质。需要说明的是，对于前述的各方法实施例，为了简便描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本申请并不受所描述的动作顺序的限制，因为依据本申请，某些步骤可以采用其它顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于优选实施例，所涉及的动作和模块并不一定都是本申请所必须的。在上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述的部分，可以参见其它实施例的相关描述。以上为对本申请所提供的商品防盗检测方法、装置、设备及存储介质的描述，对于本领域的技术人员，依据本申请实施例的思想，在具体实施方式及应用范围上均会有改变之处，综上，本说明书内容不应理解为对本申请的限制。
