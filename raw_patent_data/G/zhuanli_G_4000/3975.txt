标题title
一种车辆匹配的方法及装置、电子设备、存储介质
摘要abst
本发明实施例提供了一种车辆匹配的方法及装置、电子设备、存储介质，涉及车辆技术领域，包括：获取第一摄像头和第二摄像头采集的车辆轨迹；针对第一摄像头采集的第一车辆轨迹，确定车辆离开第一摄像头视野的离开时间点和离开坐标点，并针对第二摄像头采集的第二车辆轨迹，确定车辆驶入第二摄像头视野的驶入时间点和驶入坐标点；根据离开时间点和驶入时间点，确定时间相关信息，并根据离开坐标点和驶入坐标点，确定空间相关信息；根据第一车辆特征和第二车辆特征，确定特征相关信息；结合时间相关信息、空间相关信息，以及特征相关信息，生成是否匹配同一车辆的判断结果，实现了结合双摄像头的时间、空间规则以及车辆特征来进行车辆匹配。
权利要求书clms
1.一种车辆匹配的方法，其特征在于，所述方法包括：获取第一摄像头和第二摄像头采集的多个车辆轨迹；针对所述第一摄像头采集的第一车辆轨迹，确定车辆离开所述第一摄像头视野的离开时间点和离开坐标点，并针对所述第二摄像头采集的第二车辆轨迹，确定车辆驶入所述第二摄像头视野的驶入时间点和驶入坐标点；根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，并根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息；针对所述第一摄像头采集的第一车辆轨迹，确定第一车辆特征，并针对所述第二摄像头采集的第二车辆轨迹，确定第二车辆特征；根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息；结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果。2.根据权利要求1所述的方法，其特征在于，所述获取第一摄像头和第二摄像头采集的多个车辆轨迹，包括：获取所述第一摄像头和所述第二摄像头采集的视频流，并对所述视频流进行车辆检测和跟踪，得到多个车辆轨迹。3.根据权利要求1或2所述的方法，其特征在于，在所述获取第一摄像头和第二摄像头采集的多个车辆轨迹之后，还包括：获取针对所述第一摄像头和所述第二摄像头设置的车道范围；根据所述车道范围，对所述第一摄像头和所述第二摄像头采集的多个车辆轨迹进行更新，以保留在所述车道范围内的车辆轨迹。4.根据权利要求1所述的方法，其特征在于，所述根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，包括：根据所述离开时间点和所述驶入时间点，确定时间差；获取预设的时间差范围，并根据所述时间差和所述时间差范围，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息。5.根据权利要求4所述的方法，其特征在于，所述根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息，包括：确定所述第一摄像头视野内的离开区域范围，并生成所述离开坐标点是否位于所述离开区域范围内的判断结果；确定所述第二摄像头视野内的驶入区域范围，并生成所述驶入坐标点是否位于所述驶入区域范围内的判断结果；根据所述离开坐标点是否位于所述离开区域范围内的判断结果和所述驶入坐标点是否位于所述驶入区域范围内的判断结果，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息。6.根据权利要求5所述的方法，其特征在于，还包括：根据所述时间相关信息和所述空间相关信息，生成时空相关矩阵。7.根据权利要求6所述的方法，其特征在于，所述时空相关矩阵存储所述第一摄像头和所述第二摄像头采集的多个车辆轨迹之间的时间相关信息和空间相关信息。8.根据权利要求7所述的方法，其特征在于，在所述时间相关信息表征所述时间差位于所述时间差范围内、所述空间相关信息表征所述离开坐标点位于所述离开区域范围内且所述驶入坐标点位于所述驶入区域范围内的情况下，所述时空相关矩阵中的取值为1。9.根据权利要求6所述的方法，其特征在于，所述时空相关矩阵为对称矩阵。10.根据权利要求6至9任一项所述的方法，其特征在于，所述特征相关信息包括特征相似度矩阵，所述根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息，包括：计算所述第一车辆特征和所述第二车辆特征的特征相似度矩阵。11.根据权利要求6所述的方法，其特征在于，所述结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果，包括：根据所述时空相关矩阵和所述特征相似度矩阵，生成最终相似度矩阵；根据所述最终相似度，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果。12.根据权利要求11所述的方法，其特征在于，所述根据所述时空相关矩阵和所述特征相似度矩阵，生成最终相似度矩阵，包括：对所述时空相关矩阵和所述特征相似度矩阵点乘，生成最终相似度矩阵。13.一种车辆匹配的装置，其特征在于，所述装置包括：车辆轨迹获取模块，用于获取第一摄像头和第二摄像头采集的多个车辆轨迹；时间点和坐标点确定模块，用于针对所述第一摄像头采集的第一车辆轨迹，确定车辆离开所述第一摄像头视野的离开时间点和离开坐标点，并针对所述第二摄像头采集的第二车辆轨迹，确定车辆驶入所述第二摄像头视野的驶入时间点和驶入坐标点；时间相关和空间相关信息确定模块，用于根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，并根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息；车辆特征确定模块，用于针对所述第一摄像头采集的第一车辆轨迹，确定第一车辆特征，并针对所述第二摄像头采集的第二车辆轨迹，确定第二车辆特征；特征相关信息确定模块，用于根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息；判断结果生成模块，用于结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果。14.一种电子设备，其特征在于，包括处理器、存储器及存储在所述存储器上并能够在所述处理器上运行的计算机程序，所述计算机程序被所述处理器执行时实现如权利要求1至12中任一项所述的车辆匹配的方法。15.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储计算机程序，所述计算机程序被处理器执行时实现如权利要求1至12中任一项所述的车辆匹配的方法。
说明书desc
技术领域本发明涉及车辆技术领域，特别是涉及一种车辆匹配的方法及装置、电子设备、存储介质。背景技术在传统的车辆多摄像头多跟踪的场景中，一般流程为：检测、跟踪、ReID特征提取、特征匹配，且在匹配的过程中，极大依赖ReID模型提取特征进行车辆匹配，以确定是否为同一辆车，而这种匹配精度低、效果差，导致车辆匹配过程中匹配错误，车辆匹配的正确率低。发明内容鉴于上述问题，提出了以便提供克服上述问题或者至少部分地解决上述问题的一种车辆匹配的方法及装置、电子设备、存储介质，包括：一种车辆匹配的方法，所述方法包括：获取第一摄像头和第二摄像头采集的多个车辆轨迹；针对所述第一摄像头采集的第一车辆轨迹，确定车辆离开所述第一摄像头视野的离开时间点和离开坐标点，并针对所述第二摄像头采集的第二车辆轨迹，确定车辆驶入所述第二摄像头视野的驶入时间点和驶入坐标点；根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，并根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息；针对所述第一摄像头采集的第一车辆轨迹，确定第一车辆特征，并针对所述第二摄像头采集的第二车辆轨迹，确定第二车辆特征；根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息；结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果。可选地，所述获取第一摄像头和第二摄像头采集的多个车辆轨迹，包括：获取所述第一摄像头和所述第二摄像头采集的视频流，并对所述视频流进行车辆检测和跟踪，得到多个车辆轨迹。可选地，在所述获取第一摄像头和第二摄像头采集的多个车辆轨迹之后，还包括：获取针对所述第一摄像头和所述第二摄像头设置的车道范围；根据所述车道范围，对所述第一摄像头和所述第二摄像头采集的多个车辆轨迹进行更新，以保留在所述车道范围内的车辆轨迹。可选地，所述根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，包括：根据所述离开时间点和所述驶入时间点，确定时间差；获取预设的时间差范围，并根据所述时间差和所述时间差范围，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息。可选地，所述根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息，包括：确定所述第一摄像头视野内的离开区域范围，并生成所述离开坐标点是否位于所述离开区域范围内的判断结果；确定所述第二摄像头视野内的驶入区域范围，并生成所述驶入坐标点是否位于所述驶入区域范围内的判断结果；根据所述离开坐标点是否位于所述离开区域范围内的判断结果和所述驶入坐标点是否位于所述驶入区域范围内的判断结果，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息。可选地，还包括：根据所述时间相关信息和所述空间相关信息，生成时空相关矩阵。可选地，所述时空相关矩阵存储所述第一摄像头和所述第二摄像头采集的多个车辆轨迹之间的时间相关信息和空间相关信息。可选地，在所述时间相关信息表征所述时间差位于所述时间差范围内、所述空间相关信息表征所述离开坐标点位于所述离开区域范围内且所述驶入坐标点位于所述驶入区域范围内的情况下，所述时空相关矩阵中的取值为1。可选地，所述时空相关矩阵为对称矩阵。可选地，所述特征相关信息包括特征相似度矩阵，所述根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息，包括：计算所述第一车辆特征和所述第二车辆特征的特征相似度矩阵。可选地，所述结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果，包括：根据所述时空相关矩阵和所述特征相似度矩阵，生成最终相似度矩阵；根据所述最终相似度，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果。可选地，所述根据所述时空相关矩阵和所述特征相似度矩阵，生成最终相似度矩阵，包括：对所述时空相关矩阵和所述特征相似度矩阵点乘，生成最终相似度矩阵。一种车辆匹配的装置，所述装置包括：车辆轨迹获取模块，用于获取第一摄像头和第二摄像头采集的多个车辆轨迹；时间点和坐标点确定模块，用于针对所述第一摄像头采集的第一车辆轨迹，确定车辆离开所述第一摄像头视野的离开时间点和离开坐标点，并针对所述第二摄像头采集的第二车辆轨迹，确定车辆驶入所述第二摄像头视野的驶入时间点和驶入坐标点；时间相关和空间相关信息确定模块，用于根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，并根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息；车辆特征确定模块，用于针对所述第一摄像头采集的第一车辆轨迹，确定第一车辆特征，并针对所述第二摄像头采集的第二车辆轨迹，确定第二车辆特征；特征相关信息确定模块，用于根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息；判断结果生成模块，用于结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果。一种电子设备，包括处理器、存储器及存储在所述存储器上并能够在所述处理器上运行的计算机程序，所述计算机程序被所述处理器执行时实现如上所述的车辆匹配的方法。一种计算机可读存储介质，所述计算机可读存储介质上存储计算机程序，所述计算机程序被处理器执行时实现如上所述的车辆匹配的方法。本发明实施例具有以下优点：在本发明实施例中，通过获取第一摄像头和第二摄像头采集的多个车辆轨迹；针对所述第一摄像头采集的第一车辆轨迹，确定车辆离开所述第一摄像头视野的离开时间点和离开坐标点，并针对所述第二摄像头采集的第二车辆轨迹，确定车辆驶入所述第二摄像头视野的驶入时间点和驶入坐标点；根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，并根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息；针对所述第一摄像头采集的第一车辆轨迹，确定第一车辆特征，并针对所述第二摄像头采集的第二车辆轨迹，确定第二车辆特征；根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息；结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果，实现了结合双摄像头的时间、空间规则以及车辆特征来进行车辆匹配，提升了匹配的精度和效果，进而提升了车辆匹配的正确率。附图说明为了更清楚地说明本发明的技术方案，下面将对本发明的描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1a是本发明一实施例提供的一种双摄像头下车辆匹配的示意图；图1b是本发明一实施例提供的另一种双摄像头下车辆匹配的示意图；图1c是本发明一实施例提供的一种多摄像头下车辆匹配的示意图；图2是本发明一实施例提供的一种车辆匹配的方法的步骤流程图；图3是本发明一实施例提供的另一种车辆匹配的方法的步骤流程图；图4是本发明一实施例提供的另一种车辆匹配的方法的步骤流程图；图5是本发明一实施例提供的一种车辆匹配的装置的结构框图。具体实施方式为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在车辆多摄像头多跟踪的场景中，由于摄像头多种多样，具备不同的分辨率和配置于不同的物理环境下，如光照、极端天气、摄像头高低位置造成的视角不同等原因，都极大地影响ReID特征的提取，造成匹配精度差，从而影响匹配效果。而且，在不同摄像头下，相似的车辆颜色、车型等也会造成匹配过程中匹配错误，从而影响匹配效果。针对目前多摄像头匹配存在的匹配精度过低问题，结合双摄像头时空规则的方式，有效减少匹配域，提升在双摄像头下ReID特征匹配精度，并从两两拓展到多摄像头匹配，从而最终提升多摄像头多车辆匹配精度，解决多摄像头多车辆追踪下匹配精度低、效果差的问题。以双摄像头为基础，在保证双摄像头精度的情况下进行泛化多摄像头，保证了泛化的精度可控。一方面，优先根据针对摄像头设定的车道区域信息，有效利用同向车道信息，减少了轨迹匹配候选集，减少了运算数量。另一个方面，基于时空规则限定，根据时间规则和进入、离开区域规则，得到时空相关矩阵，可以极大地减少错误匹配，仅在物理意义限定的情况下进行有限范围匹配约束，极大地提高了匹配正确率。在双摄像头的场景下，如图1a，通过输入双摄像头采集的视频流，对视频流进行车辆检测、跟踪，并进行基于采集的视频流进行车辆ReID特征提取，然后构建时空相关矩阵及Reid特征相似度矩阵，基于时空相关矩阵及Reid特征相似度矩阵，进行串联双摄像头下的车辆匹配，输入匹配结果。具体的，如图1b，通过输入在时刻t下车辆轨迹坐标及ReID特征信息，结合坐标和车道信息，进行车道规则筛选车辆。一方面，根据时空规则，构建时刻t下时空相关矩阵Srule_matrix，另一方面，根据ReID特征，构建时刻t下余弦相似度矩阵Sreid_matrix，然后对两矩阵进行点乘，构建时刻t最终相似度矩阵S，根据相似度矩阵S，层次聚类得到串联双摄像头匹配结果。在多摄像头的场景下，如图1c，在对物理串联双摄像头车辆匹配的基础上，物理串联摄像头两两拓展匹配，得到时刻t所有双摄像头匹配结果，进而可以得到时刻t多摄像头车辆匹配汇总结果。以下进行进一步说明：参照图2，示出了本发明一实施例提供的一种车辆匹配的方法的步骤流程图，具体可以包括如下步骤：步骤201，获取第一摄像头和第二摄像头采集的多个车辆轨迹。其中，第一摄像头和第二摄像头可以为物理上串联的摄像头，在第一摄像头和第二摄像头的空间分布上，车辆先驶入第一摄像头的视野内，然后驶出第一摄像头的视野并驶入第二摄像头的视野内。在实际应用中，摄像头可以拍摄到多台车辆，则每个摄像头可以采集多台车辆的车辆轨迹，即多个车辆轨迹。针对一辆车而言，第一摄像头可以采集一个车辆轨迹，第二摄像头可以采集一个车辆轨迹。其中，车辆轨迹可以由多个坐标点组合而成。在本发明一实施例中，所述获取第一摄像头和第二摄像头采集的多个车辆轨迹，包括：获取所述第一摄像头和所述第二摄像头采集的视频流，并对所述视频流进行车辆检测和跟踪，得到多个车辆轨迹。在具体实现中，可以获取第一摄像头采集的视频流，并获取第二摄像头采集的视频流，然后可以分别对视频流进行车辆检测和跟踪，得到车辆轨迹。例如，设定双摄像头A、B，摄像头A、B在地理位置和时间上呈现“先后进出”顺序，即车辆先从摄像头A所在位置进入行驶，离开后进入摄像头B所在位置继续行驶，匹配摄像头A、B中车辆信息。在实际应用中，使用通用车辆检测和跟踪算法，得到不同摄像头下所有车辆跟踪轨迹TA、TB，使用符号 tAi、tBj表示对应摄像头A、B下单车辆i、j的轨迹，其车辆i、j可能是同一车辆。在本发明一实施例中，在所述获取第一摄像头和第二摄像头采集的多个车辆轨迹之后，还包括：获取针对所述第一摄像头和所述第二摄像头设置的车道范围；根据所述车道范围，对所述第一摄像头和所述第二摄像头采集的多个车辆轨迹进行更新，以保留在所述车道范围内的车辆轨迹。其中，车道范围可以由用户选定，其可以包括由多个坐标点组成的区域范围，通过车道范围，对车辆轨迹进行筛选，保留在车道范围内的车辆轨迹。例如，确定摄像头A、B分别对应的车道范围SA、SB，其中：SA=,…]SB=,…]其中，x,y表示坐标信息，上述区域分别由不同摄像头下人工设定实际车道范围点集标识，其点集构成一个封闭检测区域。更新TA和TB中轨迹点，仅保留摄像头A、B下车道范围内的轨迹信息。TA= {tAi|tAi轨迹点在SA范围内，tAi∈TA}TB= {tBj|tBj轨迹点在SB范围内，tBj∈TB}根据不同摄像头下选定的车道范围，确定需要匹配的车辆轨迹，减少无用车道不相干车辆干扰，降低运算量、加快实时检测的速度。步骤202，针对所述第一摄像头采集的第一车辆轨迹，确定车辆离开所述第一摄像头视野的离开时间点和离开坐标点，并针对所述第二摄像头采集的第二车辆轨迹，确定车辆驶入所述第二摄像头视野的驶入时间点和驶入坐标点。由于车辆是先驶入第一摄像头视野，然后离开第一摄像头视野并驶入第二摄像头的视野，则对于第一摄像头采集的第一车辆轨迹，可以确定车辆离开所述第一摄像头视野的离开时间点和离开坐标点，其中，离开坐标点可以为离开第一摄像头视野时所处的坐标点。当然，第一摄像头和第二摄像头的位置分布可以是相近的，两者的视野可以是存在重叠的。对于第二摄像头采集的第二车辆轨迹，由于其是从第一摄像头驶出后驶入，则可以确定车辆驶入所述第二摄像头视野的驶入时间点和驶入坐标点，其中驶入坐标点可以为驶入第二摄像头视野时的所处的坐标点。步骤203，根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，并根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息。对于任一两个第一车辆轨迹和第二车辆轨迹，需要分析其是否为同一车辆的车辆轨迹，而对于同一车辆的车辆轨迹，其在时间上和空间上具有相关性，则可以根据离开时间点和驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，即两个轨迹在时间上是否为连续的。而且，可以根据离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息，即两个轨迹在空间上是否为连续的。在本发明一实施例中，所述根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，包括：根据所述离开时间点和所述驶入时间点，确定时间差；获取预设的时间差范围，并根据所述时间差和所述时间差范围，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息。其中，时间差范围可以为根据当前道路上车辆的平均行驶速度确定。在具体实现中，可以计算离开时间点和驶入时间点之间的时间差，然后可以判断时间差是否位于时间差范围内，根据判断结果，确定第一车辆轨迹和所述第二车辆轨迹的时间相关信息，如时间差位于时间差范围内，则两个轨迹之间存在时间相关性，又如时间差不位于时间差范围内，则两个轨迹之间不存在时间相关性。在本发明一实施例中，所述根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息，包括：确定所述第一摄像头视野内的离开区域范围，并生成所述离开坐标点是否位于所述离开区域范围内的判断结果；确定所述第二摄像头视野内的驶入区域范围，并生成所述驶入坐标点是否位于所述驶入区域范围内的判断结果；根据所述离开坐标点是否位于所述离开区域范围内的判断结果和所述驶入坐标点是否位于所述驶入区域范围内的判断结果，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息。在具体实现中，根据第一摄像头和第二摄像头的空间分布，可以确定确定所述第一摄像头视野内的离开区域范围和第二摄像头视野内的驶入区域范围，离开区域范围和驶入区域范围可以是空间上连续的。在获得离开坐标点和驶入坐标点后，可以判断离开坐标点是否位于所述离开区域范围内，并可以判断驶入坐标点是否需位于驶入区域范围内。如果离开坐标点位于离开区域范围内，且驶入坐标点位于驶入区域范围内，则可以判定两个轨迹之间存在空间相关性，否则，则不存在空间相关性。在本发明一实施例中，还包括：根据所述时间相关信息和所述空间相关信息，生成时空相关矩阵。在本发明一实施例中，所述时空相关矩阵存储所述第一摄像头和所述第二摄像头采集的多个车辆轨迹之间的时间相关信息和空间相关信息，其可以用于表征任意两个车辆轨迹之间的时空相关性。例如，第一摄像头采集到10个车辆轨迹，第二摄像头也采集到10个车辆轨迹，则可以生成10*10的矩阵，矩阵的值为根据相应的两个轨迹之间的时间相关信息和空间相关信息确定。在本发明一实施例中，在时间相关信息表征所述时间差位于所述时间差范围内、所述空间相关信息表征所述离开坐标点位于所述离开区域范围内且所述驶入坐标点位于所述驶入区域范围内的情况下，即两个轨迹之间存在时间相关性和空间相关性，时空相关矩阵中的取值为1，反之，则表征两个轨迹之间不存在时间相关性和空间相关性，时空相关矩阵中的取值为0。在本发明一实施例中，所述时空相关矩阵为对称矩阵。例如，设定时间差范围Time_V=，用于标识摄像头A下车辆轨迹i离开时间点timei,out、摄像头B车辆轨迹j驶入时间点timej,in之间的时间差范围。设定空间区域范围RegionA、RegionB，其中，RegionA设定范围为车辆i从摄像头A的离开区域范围，以ti,out标识车辆i轨迹刚离开摄像头A时坐标点，RegionB为车辆j从B摄像头出现区域范围，以tj,in标识车辆j刚出现在B摄像头时坐标点。时空相关矩阵Srule_matrix，初始化为全0矩阵，计算公式如下：Srule_matrix= {Si，j=1 ，Sj，i=1Iftime1＜=timej,in-timei,out＜=time2;And ti,out在RegionA范围内;And tj,in在RegionB范围内}计算得到时空相关矩阵，只有符合规则的车辆才会进行的特征匹配。步骤204，针对所述第一摄像头采集的第一车辆轨迹，确定第一车辆特征，并针对所述第二摄像头采集的第二车辆轨迹，确定第二车辆特征。其中，第一车辆特征和第二车辆特征可以包括车辆的尺寸、颜色、车型等，其可以为经由重识别技术提取的重识别特征。步骤205，根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息。在本发明一实施例中，所述特征相关信息包括特征相似度矩阵，所述根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息，包括：计算所述第一车辆特征和所述第二车辆特征的特征相似度矩阵。例如，使用余弦相似度计算ReID特征相似度矩阵Sreid_matrix。步骤206，结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果。在本发明一实施例中，所述结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果，包括：根据所述时空相关矩阵和所述特征相似度矩阵，生成最终相似度矩阵；根据所述最终相似度，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果。在本发明一实施例中，所述根据所述时空相关矩阵和所述特征相似度矩阵，生成最终相似度矩阵，包括：对所述时空相关矩阵和所述特征相似度矩阵点乘，生成最终相似度矩阵。例如，将时空相关矩阵Srule_matrix与特征相似度矩阵Sreid_matrix进行点乘得到最终距离矩阵，即最终相似度矩阵S：S = Sreid_matrix* Srule_matrix根据最终相似度矩阵S进行层次聚类，得到摄像头A、B下的车辆匹配结果，使得在双摄像头下同一辆车轨迹被匹配，然后两两依次拓展至物理顺序相互连接的多摄像头匹配，从而形成串联的多摄像头多车辆轨迹追踪。在部署有物理顺序相互连接的多个摄像头的场景下，对于其中任意两个物理顺序相邻连接的摄像头，可以作为上文中第一摄像头和第二摄像头，其中车辆是否匹配的判断结果可以采用如上文所述的方法确定。在获得双摄像头中车辆轨迹是否匹配的判断结果后，可以在该双摄像头的基础上，依次确定其他物理顺序相互连接的双摄像头中车辆轨迹是否匹配的判断结果，进而生成对物理顺序相互连接的全部摄像头中车辆轨迹是否匹配的判断结果，实现两两依次拓展至物理顺序相互连接的多摄像头匹配，形成串联的多摄像头多车辆轨迹追踪。在本发明实施例中，通过获取第一摄像头和第二摄像头采集的多个车辆轨迹；针对所述第一摄像头采集的第一车辆轨迹，确定车辆离开所述第一摄像头视野的离开时间点和离开坐标点，并针对所述第二摄像头采集的第二车辆轨迹，确定车辆驶入所述第二摄像头视野的驶入时间点和驶入坐标点；根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，并根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息；针对所述第一摄像头采集的第一车辆轨迹，确定第一车辆特征，并针对所述第二摄像头采集的第二车辆轨迹，确定第二车辆特征；根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息；结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果，实现了结合双摄像头的时间、空间规则以及车辆特征来进行车辆匹配，提升了匹配的精度和效果，进而提升了车辆匹配的正确率。参照图3，示出了本发明一实施例提供的另一种车辆匹配的方法的步骤流程图，具体可以包括如下步骤：步骤301，获取所述第一摄像头和所述第二摄像头采集的视频流，并对所述视频流进行车辆检测和跟踪，得到多个车辆轨迹。步骤302，获取针对所述第一摄像头和所述第二摄像头设置的车道范围，并根据所述车道范围，对所述第一摄像头和所述第二摄像头采集的多个车辆轨迹进行更新，以保留在所述车道范围内的车辆轨迹。步骤303，针对所述第一摄像头采集的第一车辆轨迹，确定车辆离开所述第一摄像头视野的离开时间点和离开坐标点，并针对所述第二摄像头采集的第二车辆轨迹，确定车辆驶入所述第二摄像头视野的驶入时间点和驶入坐标点。步骤304，根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，并根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息。步骤305，针对所述第一摄像头采集的第一车辆轨迹，确定第一车辆特征，并针对所述第二摄像头采集的第二车辆轨迹，确定第二车辆特征。步骤306，根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息。步骤307，结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果。参照图4，示出了本发明一实施例提供的另一种车辆匹配的方法的步骤流程图，具体可以包括如下步骤：步骤401，获取第一摄像头和第二摄像头采集的多个车辆轨迹。步骤402，针对所述第一摄像头采集的第一车辆轨迹，确定车辆离开所述第一摄像头视野的离开时间点和离开坐标点，并针对所述第二摄像头采集的第二车辆轨迹，确定车辆驶入所述第二摄像头视野的驶入时间点和驶入坐标点。步骤403，根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，并根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息。步骤404，根据所述时间相关信息和所述空间相关信息，生成时空相关矩阵。步骤405，针对所述第一摄像头采集的第一车辆轨迹，确定第一车辆特征，并针对所述第二摄像头采集的第二车辆轨迹，确定第二车辆特征。步骤406，计算所述第一车辆特征和所述第二车辆特征的特征相似度矩阵。步骤407，根据所述时空相关矩阵和所述特征相似度矩阵，生成最终相似度矩阵，并根据所述最终相似度，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果。需要说明的是，对于方法实施例，为了简单描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本发明实施例并不受所描述的动作顺序的限制，因为依据本发明实施例，某些步骤可以采用其他顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于优选实施例，所涉及的动作并不一定是本发明实施例所必须的。参照图5，示出了本发明一实施例提供的一种车辆匹配的装置的结构示意图，具体可以包括如下模块：车辆轨迹获取模块501，用于获取第一摄像头和第二摄像头采集的多个车辆轨迹；时间点和坐标点确定模块502，用于针对所述第一摄像头采集的第一车辆轨迹，确定车辆离开所述第一摄像头视野的离开时间点和离开坐标点，并针对所述第二摄像头采集的第二车辆轨迹，确定车辆驶入所述第二摄像头视野的驶入时间点和驶入坐标点；时间相关和空间相关信息确定模块503，用于根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，并根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息；车辆特征确定模块504，用于针对所述第一摄像头采集的第一车辆轨迹，确定第一车辆特征，并针对所述第二摄像头采集的第二车辆轨迹，确定第二车辆特征；特征相关信息确定模块505，用于根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息；判断结果生成模块506，用于结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果。在本发明一实施例中，所述获取第一摄像头和第二摄像头采集的多个车辆轨迹，包括：获取所述第一摄像头和所述第二摄像头采集的视频流，并对所述视频流进行车辆检测和跟踪，得到多个车辆轨迹。在本发明一实施例中，在所述获取第一摄像头和第二摄像头采集的多个车辆轨迹之后，还包括：获取针对所述第一摄像头和所述第二摄像头设置的车道范围；根据所述车道范围，对所述第一摄像头和所述第二摄像头采集的多个车辆轨迹进行更新，以保留在所述车道范围内的车辆轨迹。在本发明一实施例中，所述根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，包括：根据所述离开时间点和所述驶入时间点，确定时间差；获取预设的时间差范围，并根据所述时间差和所述时间差范围，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息。在本发明一实施例中，所述根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息，包括：确定所述第一摄像头视野内的离开区域范围，并生成所述离开坐标点是否位于所述离开区域范围内的判断结果；确定所述第二摄像头视野内的驶入区域范围，并生成所述驶入坐标点是否位于所述驶入区域范围内的判断结果；根据所述离开坐标点是否位于所述离开区域范围内的判断结果和所述驶入坐标点是否位于所述驶入区域范围内的判断结果，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息。在本发明一实施例中，还包括：根据所述时间相关信息和所述空间相关信息，生成时空相关矩阵。在本发明一实施例中，所述时空相关矩阵存储所述第一摄像头和所述第二摄像头采集的多个车辆轨迹之间的时间相关信息和空间相关信息。在本发明一实施例中，在所述时间相关信息表征所述所述时间差位于所述时间差范围内、所述空间相关信息表征所述离开坐标点位于所述离开区域范围内且所述驶入坐标点位于所述驶入区域范围内的情况下，所述时空相关矩阵中的取值为1。在本发明一实施例中，所述时空相关矩阵为对称矩阵。在本发明一实施例中，所述特征相关信息包括特征相似度矩阵，所述根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息，包括：计算所述第一车辆特征和所述第二车辆特征的特征相似度矩阵。在本发明一实施例中，所述结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果，包括：根据所述时空相关矩阵和所述特征相似度矩阵，生成最终相似度矩阵；根据所述最终相似度，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果。在本发明一实施例中，所述根据所述时空相关矩阵和所述特征相似度矩阵，生成最终相似度矩阵，包括：对所述时空相关矩阵和所述特征相似度矩阵点乘，生成最终相似度矩阵。在本发明实施例中，通过获取第一摄像头和第二摄像头采集的多个车辆轨迹；针对所述第一摄像头采集的第一车辆轨迹，确定车辆离开所述第一摄像头视野的离开时间点和离开坐标点，并针对所述第二摄像头采集的第二车辆轨迹，确定车辆驶入所述第二摄像头视野的驶入时间点和驶入坐标点；根据所述离开时间点和所述驶入时间点，确定所述第一车辆轨迹和所述第二车辆轨迹的时间相关信息，并根据所述离开坐标点和所述驶入坐标点，确定所述第一车辆轨迹和所述第二车辆轨迹的空间相关信息；针对所述第一摄像头采集的第一车辆轨迹，确定第一车辆特征，并针对所述第二摄像头采集的第二车辆轨迹，确定第二车辆特征；根据所述第一车辆特征和所述第二车辆特征，确定特征相关信息；结合所述时间相关信息、所述空间相关信息，以及所述特征相关信息，生成所述第一车辆轨迹和所述第二车辆轨迹是否匹配同一车辆的判断结果，实现了结合双摄像头的时间、空间规则以及车辆特征来进行车辆匹配，提升了匹配的精度和效果，进而提升了车辆匹配的正确率。本发明一实施例还提供了一种电子设备，可以包括处理器、存储器及存储在存储器上并能够在处理器上运行的计算机程序，计算机程序被处理器执行时实现如上车辆匹配的方法。本发明一实施例还提供了一种计算机可读存储介质，计算机可读存储介质上存储计算机程序，计算机程序被处理器执行时实现如上车辆匹配的方法。对于装置实施例而言，由于其与方法实施例基本相似，所以描述的比较简单，相关之处参见方法实施例的部分说明即可。本说明书中的各个实施例均采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似的部分互相参见即可。本领域内的技术人员应明白，本发明实施例可提供为方法、装置、或计算机程序产品。因此，本发明实施例可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明实施例可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本发明实施例是参照根据本发明实施例的方法、终端设备、和计算机程序产品的流程图和／或方框图来描述的。应理解可由计算机程序指令实现流程图和／或方框图中的每一流程和／或方框、以及流程图和／或方框图中的流程和／或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理终端设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理终端设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理终端设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理终端设备上，使得在计算机或其他可编程终端设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程终端设备上执行的指令提供用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的步骤。尽管已描述了本发明实施例的优选实施例，但本领域内的技术人员一旦得知了基本创造性概念，则可对这些实施例做出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本发明实施例范围的所有变更和修改。最后，还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者终端设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者终端设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括上述要素的过程、方法、物品或者终端设备中还存在另外的相同要素。以上对所提供的一种车辆匹配的方法及装置、电子设备、存储介质，进行了详细介绍，本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处，综上，本说明书内容不应理解为对本发明的限制。
