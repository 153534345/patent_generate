标题title
一种基于图像处理的高效率晶圆预扫描方法
摘要abst
本申请公开了一种基于图像处理的高效率晶圆预扫描方法，涉及半导体技术领域，该基于图像处理的高效率晶圆预扫描方法确定晶圆的覆盖范围以及晶圆中的初始基准芯片的坐标信息以及芯片尺寸后，以初始基准芯片的坐标信息为基准，按照芯片尺寸将晶圆的覆盖范围划分为棋盘格结构，以框定各个芯片区域，然后从覆盖初始基准芯片的扫描视块开始，沿着预定扫描路径依次获取各个扫描视块内的局部图像并进行图像处理，更新得到各个扫描视块内所有芯片区域的坐标信息，直至得到扫描地图后与晶圆Map图进行匹配合并得到预扫描地图。该方法在冗余扫描的情况下，无需通过坐标比对的方法来实现剔除，在保证扫描完整性的基础上减少了计算量，提高了预扫描的效率。
权利要求书clms
1.一种基于图像处理的高效率晶圆预扫描方法，其特征在于，所述基于图像处理的高效率晶圆预扫描方法包括：确定晶圆的覆盖范围以及所述晶圆中的初始基准芯片的坐标信息以及芯片尺寸，所述坐标信息包括行列坐标以及在绝对坐标系中的机械绝对坐标；以所述初始基准芯片的坐标信息为基准，按照所述芯片尺寸将所述晶圆的覆盖范围划分为棋盘格结构，所述棋盘格结构包括若干个按照行列结构排布的芯片区域，每个芯片区域的尺寸均为所述芯片尺寸；从覆盖所述初始基准芯片的扫描视块开始，沿着预定扫描路径依次获取各个扫描视块内的局部图像并进行图像处理，相邻两个扫描视块覆盖至少一颗相同的芯片；根据每个扫描视块内的局部图像基于所述扫描视块内已经确定的芯片区域的坐标信息，更新得到所述扫描视块内所有芯片区域的坐标信息；直至扫描完成整个晶圆得到扫描地图，所述扫描地图包括各个芯片区域的坐标信息；将所述扫描地图与所述晶圆的晶圆Map图进行匹配合并得到预扫描地图。2.根据权利要求1所述的基于图像处理的高效率晶圆预扫描方法，其特征在于，得到每个扫描视块内所有芯片区域的坐标信息的方法包括：根据所述扫描视块内的局部图像基于所述扫描视块内已经确定的芯片区域的坐标信息，按序依次得到下一个待归属的坐标信息；通过点在多边形内的判断算法确定所述待归属的坐标信息在所述扫描视块内所属的芯片区域，得到所述芯片区域的坐标信息；重复执行所述根据所述扫描视块内的局部图像基于所述扫描视块内已经确定的芯片区域的坐标信息的步骤，直至更新确定得到所述扫描视块内所有芯片区域的坐标信息。3.根据权利要求1所述的基于图像处理的高效率晶圆预扫描方法，其特征在于，得到每个扫描视块内所有芯片区域的坐标信息的方法还包括：根据所述扫描视块内的局部图像基于所述扫描视块内已经确定的芯片区域的坐标信息，依次得到所述扫描视块内所有待归属的坐标信息；按照所述扫描视块内已经确定的所有M*N个坐标信息之间的坐标相对关系，将所述M*N个坐标信息按照M行、N列的结构进行排列，每个扫描视块覆盖M行、N列的芯片区域；将按照坐标相对关系排列的所述M*N个坐标信息整体对应到所述扫描视块覆盖的M*N个芯片区域，确定任意第m行、第n列的坐标信息属于所述扫描视块中第m行、第n列的芯片区域，得到所述扫描视块中所有芯片区域的坐标信息；其中，M、N、m、n均为参数且为整数，1≤m≤M，1≤n≤N。4.根据权利要求2或3所述的基于图像处理的高效率晶圆预扫描方法，其特征在于，按序依次得到一个扫描视块内任意第i个待归属的坐标信息包括：对所述扫描视块内的局部图像进行图像识别，基于所述第i个待归属的坐标信息的参考坐标的机械绝对坐标识别得到所述第i个待归属的坐标信息中的机械绝对坐标/＞；其中，所述第i个待归属的坐标信息的参考坐标是所述扫描视块内已经确定得到的其中一个坐标信息；计算得到所述第i个待归属的坐标信息中的行列坐标为；其中，第i个待归属的坐标信息的参考坐标的行列坐标为，所述绝对坐标系的x方向沿着晶圆的行方向，所述绝对坐标系的y方向沿着所述晶圆的列方向，所述芯片尺寸包括单颗芯片的宽度w和高度h，所述晶圆中所有芯片的宽度方向均沿着x方向、高度方向均沿着y方向，/＞表示对/＞取整，/＞表示对取整，i为参数且为整数。5.根据权利要求4所述的基于图像处理的高效率晶圆预扫描方法，其特征在于，确定所述第i个待归属的坐标信息的方法还包括：基于所述扫描视块内按序依次确定得到的第个坐标信息的机械绝对坐标和行列坐标/＞，计算得到第i个候选行列坐标为，其中，/＞是基于/＞确定得到的第i个候选机械绝对坐标；当/＞与/＞之间的取整误差小于第一误差阈值，且/＞与/＞之间的取整误差小于第二误差阈值时，以计算得到的第i个候选机械绝对坐标/＞作为所述第i个待归属的坐标信息中的机械绝对坐标/＞，以计算得到第i个候选行列坐标为作为所述第i个待归属的坐标信息中的行列坐标/＞，当前的第/＞个坐标信息形成为所述第i个待归属的坐标信息的参考坐标；否则，令并重新基于第/＞个坐标信息的机械绝对坐标和行列坐标计算第i个候选行列坐标和第i个候选机械绝对坐标，直至得到所述第i个待归属的坐标信息，或者，直至第/＞个坐标信息为所述扫描视块的初始参考坐标；其中，i为起始值为1的参数且为整数，p为起始值为1的参数且为整数，第0个坐标信息表示所述扫描视块的初始参考坐标，第一个扫描视块的初始参考坐标是所述初始基准芯片的坐标信息，第二个扫描视块开始的扫描视块的初始参考坐标是其中一个已经确定坐标信息的芯片区域的坐标信息。6.根据权利要求5所述的基于图像处理的高效率晶圆预扫描方法，其特征在于，对于第二个扫描视块开始的任意一个扫描视块：当所述扫描视块中仅有一个芯片区域已经确定坐标信息时，将已经确定的坐标信息作为所述扫描视块的初始参考坐标；当所述扫描视块中有多个芯片区域已经确定坐标信息时，将已经确定坐标信息的芯片区域中，与当前扫描位置距离最近的一个芯片区域的坐标信息作为所述扫描视块的初始参考坐标。7.根据权利要求1所述的基于图像处理的高效率晶圆预扫描方法，其特征在于，所述基于图像处理的高效率晶圆预扫描方法还包括：确定所述晶圆中的第一颗标定芯片在绝对坐标系中的机械绝对坐标；从所述第一颗标定芯片开始，获取同时覆盖第j颗标定芯片和第j+1颗标定芯片的局部图像并进行图像处理，基于第j颗标定芯片的机械绝对坐标确定得到第j+1颗标定芯片在绝对坐标系中的机械绝对坐标，j为起始值为1的参数且为整数，第j颗标定芯片和第j+1颗标定芯片位于所述晶圆的同一行；令j=j+1，沿着所述晶圆的行方向移动并再次执行所述获取同时覆盖第j颗标定芯片和第j+1颗标定芯片的局部图像并进行图像处理的步骤，直至确定得到最后一颗标定芯片在绝对坐标系中的机械绝对坐标，最后一颗标定芯片与第一颗标定芯片之间间隔的芯片数量达到芯片数量阈值；确定所述第一颗标定芯片的机械绝对坐标至所述最后一颗标定芯片的机械绝对坐标形成的连线与所述绝对坐标系的x方向之间的偏转夹角；按照所述偏转夹角旋转调整所述晶圆，直至所述偏转夹角小于夹角阈值。8.根据权利要求7所述的基于图像处理的高效率晶圆预扫描方法，其特征在于，按照所述偏转夹角旋转调整所述晶圆的方法包括：保持所述晶圆的圆心位置不变，周向旋转的角度值并重新执行所述确定所述晶圆中的第一颗标定芯片在绝对坐标系中的机械绝对坐标的步骤，/＞是小于1的比例值。9.根据权利要求1所述的基于图像处理的高效率晶圆预扫描方法，其特征在于，所述晶圆中的每颗芯片的表面都具有唯一的芯片标识；所述将所述扫描地图与所述晶圆的晶圆Map图进行匹配合并得到预扫描地图，包括：利用OCR文字识别技术识别确定对齐芯片的芯片标识，并确定所述对齐芯片在所述扫描地图中对应的芯片区域的坐标信息；在所述晶圆Map图中通过OCR文字识别技术识别并搜索所述对齐芯片的芯片标识，确定所述对齐芯片在所述晶圆Map图中的行列坐标；根据所述对齐芯片在所述扫描地图中的行列坐标以及所述对齐芯片在所述晶圆Map图中的行列坐标的偏移关系，将所述扫描地图与所述晶圆Map图匹配对齐；将匹配对齐后的所述扫描地图与所述晶圆Map图进行合并得到所述预扫描地图，所述预扫描地图中包括每颗芯片在所述晶圆Map图中的行列坐标和芯片等级、以及在对齐后的所述扫描地图中对应位置处的芯片区域的机械绝对坐标。10.根据权利要求9所述的基于图像处理的高效率晶圆预扫描方法，其特征在于，每颗芯片的芯片标识中包含数字，且位于同一行的连续各颗芯片的芯片标识中的数字连续，确定所述对齐芯片的方法包括：任选一颗芯片作为候选芯片，利用OCR文字识别技术识别确定所述候选芯片的芯片标识；利用OCR文字识别技术分别识别确定与所述候选芯片位于同一行且依次连续排列的若干颗芯片的芯片标识；当识别到所述候选芯片及其同一行依次连续排列的各颗芯片的芯片标识中的数字连续时，以所述候选芯片作为所述对齐芯片，否则重新执行所述任选一颗芯片作为候选芯片的步骤。
说明书desc
技术领域本申请涉及半导体技术领域，尤其是一种基于图像处理的高效率晶圆预扫描方法。背景技术晶圆上按阵列结构排布有大量的芯片，每一颗芯片都有各自的芯片等级，在芯片的生产过程中，需要根据晶圆Map图来对不同芯片等级的芯片进行分选。晶圆Map图记载了各颗芯片在晶圆中的行列坐标以及对应的芯片等级，当需要挑选出特定芯片等级的芯片时，根据具有该芯片等级的芯片的行列坐标以及芯片间的行列间距即可定位到该芯片并实现分选。但是随着晶圆规模的扩大以及芯片的尺寸的变小，晶圆上的芯片在扩膜后，由于局部受力不均，会导致晶圆上同一行的芯片在水平方向上存在偏差，同理同一列的芯片在竖直方向上也存在偏差，芯片在行列方向上并不完全严格对齐，因此直接根据晶圆Map图来实现芯片分选的准确性较低。为了提高芯片分选的准确性，现有一些做法会首先对晶圆进行预扫描得到扫描地图，扫描地图包括晶圆中各颗芯片的行列坐标以及机械绝对坐标，人工将扫描地图和晶圆Map图中同一颗芯片对应起来，即可将扫描地图与晶圆Map图进行匹配合并得到预扫描地图，预扫描地图包括每颗芯片的行列坐标、机械绝对坐标和芯片等级。在后续分选阶段根据预扫描地图结合各颗芯片的机械绝对坐标来实现分选可以有效提高准确性。目前对晶圆的预扫描主要通过视块扫描和拼接结合的方法来实现，也即每次扫描确定一个扫描视块内的芯片的行列坐标和机械绝对坐标，按照预设的路径移动预定步长扫描下一个扫描视块内的芯片的行列坐标和机械绝对坐标，相邻两次扫描的扫描视块内有一定量的芯片存在重复，这样可以有效避免漏扫描，保证扫描地图的完整性。但是由于冗余扫描的机制，在扫描确定每个扫描视块内的每颗芯片的行列坐标和机械绝对坐标后，都要将扫描得到的坐标信息与扫描地图中已有的坐标信息进行比对，从而判断两组坐标信息是否属于同一颗芯片。若确定扫描地图中还未有该芯片的坐标信息，则将其添加到扫描地图中，若确定扫描地图中已经有该芯片的坐标信息，则需要进行去重，保证每颗芯片在扫描地图都只有一组坐标信息。上述过程中，在比对两组坐标信息时，需要计算两组坐标信息之间的欧式距离，由于晶圆中包含的芯片的数量非常多，因此上述比对过程的计算量非常大，导致晶圆的预扫描过程耗时较长、效率较低且对算力需求较高。发明内容本申请人针对上述问题及技术需求，提出了一种基于图像处理的高效率晶圆预扫描方法，本申请的技术方案如下：一种基于图像处理的高效率晶圆预扫描方法，其特征在于，基于图像处理的高效率晶圆预扫描方法包括：确定晶圆的覆盖范围以及晶圆中的初始基准芯片的坐标信息以及芯片尺寸，坐标信息包括行列坐标以及在绝对坐标系中的机械绝对坐标；以初始基准芯片的坐标信息为基准，按照芯片尺寸将晶圆的覆盖范围划分为棋盘格结构，棋盘格结构包括若干个按照行列结构排布的芯片区域，每个芯片区域的尺寸均为芯片尺寸；从覆盖初始基准芯片的扫描视块开始，沿着预定扫描路径依次获取各个扫描视块内的局部图像并进行图像处理，相邻两个扫描视块覆盖至少一颗相同的芯片；根据每个扫描视块内的局部图像基于扫描视块内已经确定的芯片区域的坐标信息，更新得到扫描视块内所有芯片区域的坐标信息；直至扫描完成整个晶圆得到扫描地图，扫描地图包括各个芯片区域的坐标信息；将扫描地图与晶圆的晶圆Map图进行匹配合并得到预扫描地图。本申请的有益技术效果是：本申请公开了一种基于图像处理的高效率晶圆预扫描方法，该基于图像处理的高效率晶圆预扫描方法首先以初始基准芯片的坐标信息为基准，按照芯片尺寸将晶圆的覆盖范围划分为棋盘格结构，先框定各个芯片区域，然后通过视块扫描的方法，利用图像处理技术确定棋盘格区域中各个芯片区域的坐标信息，因此在冗余扫描的情况下，无需通过坐标比对的方法来实现剔除，减少了计算量，提高了预扫描的效率。本申请公开的基于图像处理的高效率晶圆预扫描方法，在利用图像处理技术确定待归属的坐标信息后，通过点在多边形内的判断算法即可将其归属到相应的芯片区域，或者预先按坐标相对关系进行排列后可以统一对应到芯片区域，从而将各个坐标信息归属到相应的芯片区域，无论采用哪种实现方式，都非常简单高效。本申请公开的基于图像处理的高效率晶圆预扫描方法在确定每个扫描视块内依次确定待归属的坐标信息时，不再固定以唯一的参考坐标来计算，而是根据计算过程动态调整使用的参考坐标，使得计算准确性更高。而且本申请通过动态调整参考坐标，也可以一定程度上弥补和修正计算行列坐标过程中可能产生的取整误差，提高计算结果的准确性。本申请公开的基于图像处理的高效率晶圆预扫描方法在得到扫描结果后，利用OCR文字识别技术自动在扫描结果和晶圆Map图中定位同一个对齐芯片实现自动化对齐，避免了人工标定对齐芯片带来的人为误差和效率低的问题。另外通过连续识别多颗芯片的芯片标识来保证对齐芯片的芯片标识的准确性，可以减小误差从而提高准确率。本申请公开的基于图像处理的高效率晶圆预扫描方法在预扫描之前，首先对晶圆的行方向与绝对坐标系的x方向进行对齐，在对齐过程中，由第一颗标定芯片开始逐次确定多颗标定芯片直至确定得到距离较远的最后一颗标定芯片的机械绝对坐标，保证了最后一颗标定芯片的机械绝对坐标的准确性，而且使用距离较远的第一颗标定芯片和最后一颗标定芯片来确定偏转角度，准确性更高。在调整晶圆角度时通过多次调整的方法进行，更为准确。附图说明图1是本申请一个实施例的基于图像处理的高效率晶圆预扫描方法的方法流程图。图2是本申请一个实施例中基于初始基准芯片的坐标信息以及芯片尺寸，将晶圆的覆盖范围划分为棋盘格结构的示意图。图3是本申请一个实施例中相邻两个扫描视块中重复的芯片区域的示意图。图4是本申请一个实施例中确定任意一个扫描视块内所有待归属的坐标信息的方法流程图。图5是本申请一个实施例中将得到的待归属的坐标信息对应到相邻的芯片区域的一种方法的方法流程图。图6是本申请一个实施例中将得到的待归属的坐标信息对应到相邻的芯片区域的另一种方法的方法流程图。图7是本申请一个实施例中将晶圆的行方向与绝对坐标系中的x方向进行对齐的方法流程图。图8是本申请一个实施例中晶圆的行方向与绝对坐标系中的x方向之间的偏转夹角的示意图。具体实施方式下面结合附图对本申请的具体实施方式做进一步说明。本申请公开了一种基于图像处理的高效率晶圆预扫描方法，请参考图1所示的流程图，该方法包括如下步骤：步骤1，确定晶圆的覆盖范围以及晶圆中的初始基准芯片的坐标信息以及芯片尺寸。晶圆呈圆形，晶圆中包含按阵列结构排布的若干颗芯片，所有芯片的规格均相等，且所有芯片的宽度方向均朝着同一方向排列、所有芯片的高度方向均朝着同一方向排列，从而形成二维阵列结构。本申请定义沿着芯片的宽度方向为晶圆的行方向、沿着芯片的高度方向为晶圆的列方向。在传统方法中，当固定好晶圆的位置后，即开始利用驱动电机带动相机依次移动并按视块进行扫描。而本申请在此之前，首先利用相机确定晶圆的覆盖范围，包括：控制相机进行变倍变焦，使得相机的视场范围覆盖整个晶圆并拍摄全局图像，对全局图像进行图像处理，识别出晶圆的覆盖范围，包括：识别晶圆的中心点以及半径，确定晶圆的覆盖范围。在确定晶圆的覆盖范围后，确定初始基准芯片的坐标信息，本申请中每组坐标信息包括行列坐标以及在绝对坐标系中的机械绝对坐标，行列坐标用于指示在晶圆中所在的行和列，一般可以取初始基准芯片的行列坐标为，表示初始基准芯片位于第0行以及第0列。绝对坐标系是预先建立的二维坐标系，晶圆的行方向沿着绝对坐标系的x方向，晶圆的列方向沿着绝对坐标系的y方向，一般可以晶圆的中心作为绝对坐标系的原点，或者原点选在其他位置，初始基准芯片的机械绝对坐标是预先指定好的。控制相机进行变倍变焦，使得相机的视场范围为预先设定的扫描视块的规格，控制相机定位到初始基准芯片处，拍摄图像并进行图像处理，识别该初始基准芯片的芯片尺寸，芯片尺寸包括初始基准芯片的宽度w和高度h，由于晶圆中所有芯片的芯片尺寸均相同，因此可以确定晶圆中单颗芯片的宽度为w、高度为h。步骤2，以初始基准芯片的坐标信息为基准，按照芯片尺寸将晶圆的覆盖范围划分为棋盘格结构。首先确定该初始基准芯片对应的芯片区域的宽度为w、高度为h、芯片区域的中心为该初始基准芯片的机械绝对坐标。在划分确定该初始基准芯片对应的芯片区域后，即可以初始基准芯片的芯片区域为参照，在晶圆的外接矩形范围内划分规则的棋盘格结构，在晶圆的外接矩形范围内划分得到的棋盘格结构包括若干个排列形成二维结构的区域，每个区域的尺寸均符合芯片尺寸。然后将未与晶圆的覆盖范围有交集的区域剔除，保留其余的区域，即得到晶圆的覆盖范围内划分得到的棋盘格结构，对晶圆的覆盖范围划分得到的棋盘格结构包括若干个按照行列结构排布的芯片区域，每个芯片区域的尺寸均为芯片尺寸。比如在图2中，在确定初始基准芯片A的坐标信息后，根据初始基准芯片的机械绝对坐标以宽度为w、高度为h的尺寸划分得到初始基准芯片A的芯片区域，然后基于该芯片区域对整个外接矩形范围进行划分，最终保留确定晶圆的覆盖范围内的芯片区域如阴影部分所示。步骤3，从覆盖初始基准芯片的扫描视块开始，沿着预定扫描路径依次获取各个扫描视块内的局部图像并进行图像处理，相邻两个扫描视块覆盖至少一颗相同的芯片。根据每个扫描视块内的局部图像基于扫描视块内已经确定的芯片区域的坐标信息，更新得到扫描视块内所有芯片区域的坐标信息。直至扫描完成整个晶圆得到扫描地图，扫描地图包括各个芯片区域的坐标信息；另外，在传统方法中，对晶圆进行预扫描时，一般选择晶圆第一行、第一列的芯片作为初始基准芯片，然后从上至下按照之字形路径逐行逐列依次遍历整个晶圆。但是在实际实现时，由于晶圆尺寸较大而芯片尺寸较小，晶圆上芯片数量众多，较难准确的定位到第一行、第一列的芯片，容易导致遗漏前几行或前几列的芯片。而在本申请的方法中，可以选择晶圆的任一位置处的芯片作为初始基准芯片，如图2所示，以任一中间位置处的芯片作为初始基准芯片A。则沿着预定扫描路径扫描整个晶圆的方法包括：从初始基准芯片开始，分别沿着第一扫描路径和第二扫描路径扫描，第一扫描路径包括从初始基准芯片开始沿着绝对坐标系的x方向正方向以及y方向负方向逐行逐列扫描，第二扫描路径包括从初始基准芯片开始沿着绝对坐标系的x方向负方向以及y方向正方向逐行逐列扫描，从而可以扫描整个晶圆。步骤4，将扫描地图与晶圆的晶圆Map图进行匹配合并得到预扫描地图，得到的预扫描地图包含晶圆中每颗芯片在晶圆Map图中的行列坐标、芯片等级以及在扫描地图中得到的机械绝对坐标。本申请提供的基于图像处理的高效率晶圆预扫描方法首先划分确定晶圆中每个芯片所在的芯片区域，然后通过视块扫描的方法确定坐标信息并归属给相应的芯片区域，从而无需每次都进行大量的坐标比对计算，可以减少计算量，提高预扫描效率。在上述步骤3中，对于每个扫描视块，更新得到该扫描视块内所有芯片区域的坐标信息的方法包括如下过程：请参考图3所示的示意图，相机在从初始基准芯片开始沿着预定扫描路径移动的过程中，每到达一个扫描位置都会拍摄当前扫描位置处的扫描视块内的局部图像，每个扫描视块覆盖M行N列的芯片，M和N均为参数且为整数，比如常见的，每个扫描视块覆盖3*3的芯片或者覆盖5*5的芯片或者覆盖7*7的芯片。图3示出了相机在图2中的初始基准芯片A处的覆盖5*5的芯片的扫描视块的局部示意图。每一个扫描视块所覆盖的多个芯片中，至少包括一颗芯片的坐标信息是已知，第一个扫描视块覆盖初始基准芯片而初始基准芯片的坐标是已知的，又由于扫描视块之间存在重复的芯片，因此从第二个扫描视块开始，每个扫描视块内也会存在在先已经确定坐标信息的芯片。在更新得到一个扫描视块内的所有芯片区域的坐标信息时，首先确定该扫描视块内的初始参考坐标：当该扫描视块中仅有一个芯片区域已经确定坐标信息时，将已经确定的坐标信息作为扫描视块的初始参考坐标，比如对于第一个扫描视块中，仅有初始基准芯片对应的芯片区域已经确定了坐标信息，因此第一个扫描视块的初始参考坐标即为初始基准芯片对应的芯片区域的坐标信息。而当扫描视块中有多个芯片区域已经确定坐标信息时，将已经确定坐标信息的芯片区域中，与当前扫描位置距离最近的一个芯片区域的坐标信息作为扫描视块的初始参考坐标。从第二个扫描视块开始，每个扫描视块中可能仅有一个已经确定坐标信息的芯片区域，也可能有多个已经确定坐标信息的芯片区域，则相应采用上述任一种方法来确定各个扫描视块中的初始参考坐标，无论是哪种情况，第二个扫描视块开始的扫描视块的初始参考坐标是其中一个已经确定坐标信息的芯片区域的坐标信息。比如在图3中，通过第一个扫描视块确定所有5*5个芯片区域的坐标信息后，从初始基准芯片A沿着行方向移动到当前扫描位置Z处，在当前扫描位置Z处的扫描视块覆盖的5*5颗芯片中，有5颗芯片与第一个扫描视块内的芯片重复，因此当前扫描位置Z处的扫描视块中有5个已经确定坐标信息的芯片区域，分别为图3中的芯片区域B、芯片区域C、芯片区域D、芯片区域E、芯片区域F，则从中选取与当前扫描位置Z距离最近的芯片区域D的坐标信息作为该第二个扫描视块的初始参考坐标，后续的扫描视块也类似确认。在确定了一个扫描视块的初始参考坐标后，即可以初始参考坐标为基准来确定该扫描视块内其他芯片区域的坐标信息。在一个实施例中，仅确定该扫描视块内尚未确定坐标信息的芯片区域的坐标信息，而不再重复确定已经得到坐标信息的芯片区域。比如在上述图3中，仅确认第二个扫描视块内其余20个芯片区域的坐标信息，而不再确认已经得到坐标信息的5个芯片区域的坐标信息。但是为了提高得到的坐标信息的准确性，在另一个实施例中，除了保留一个扫描视块内的初始参考坐标之外，重新确定该扫描视块内其余所有芯片区域的坐标信息。也即在上述图3中，保留芯片区域D的坐标信息，并确定其余所有24个芯片区域的坐标信息，包括已经有坐标信息的芯片区域B、芯片区域C、芯片区域E、芯片区域F，都需要重新更新确定新的坐标信息。该实施例提供的方法可以在视块扫描过程中不断修正各个芯片区域的坐标信息，以保证整个扫描过程的准确性。在确定一个扫描视块的初始参考坐标之后，基于该初始参考坐标按序依次确定该扫描视块内各个待归属的坐标信息。按序依次得到一个扫描视块内任意第i个待归属的坐标信息的方法包括：对该扫描视块内的局部图像进行图像识别，基于第i个待归属的坐标信息的参考坐标的机械绝对坐标识别得到第i个待归属的坐标信息中的机械绝对坐标，通过图像处理方法即能识别得到，本申请对此不再赘述。其中，第i个待归属的坐标信息的参考坐标是扫描视块内已经确定的其中一个坐标信息，i为起始值为1的参数且为整数。然后计算得到第i个待归属的坐标信息中的行列坐标为/＞。其中，第i个待归属的坐标信息的参考坐标的行列坐标为，/＞表示对/＞取整，/＞表示对/＞取整。在传统方法中，一个扫描视块内的所有芯片坐标都基于同一个参考坐标得到，比如以图3所示的实例中的第一个扫描视块为例，传统方法中第一个扫描视块内的其余24个芯片的芯片坐标都基于初始基准芯片A计算得到，但是由于计算行列坐标时涉及到取整操作，当取整之前的结构靠近区间两端时，取整前后的误差较小，而当取整之前的结果靠近区间中心时，取整前后的误差会较大。比如当计算得到的为1.95时，取整为2，取整前后的误差较小。而当计算得到的/＞为1.52时，取整为2，取整前后的误差较大。因此仅以单一的参考坐标来得到其他所有芯片坐标的传统方法容易产生较大的误差，因此在本申请的一个实施例中，并不固定以扫描视块的初始参考坐标来计算各个待归属的坐标信息，而是不断动态调整所使用的参考坐标，以保证计算结果的准确性。则确定一个扫描视块内其他芯片区域的坐标信息的方法包括如下内容，如图4所示，首先初始化参数i=1，并以该扫描视块的初始参考坐标作为第0个坐标信息，确定任意第i个待归属的坐标信息的方法包括：初始化参数p=1，且参数p为整数，基于扫描视块内按序依次确定得到的第个坐标信息的机械绝对坐标/＞和行列坐标/＞，计算得到第i个候选行列坐标为/＞，其中，/＞是基于确定得到的第i个候选机械绝对坐标。当与/＞之间的第一取整误差小于第一误差阈值，且/＞与/＞之间的第二取整误差小于第二误差阈值时。以此时计算得到的第i个候选机械绝对坐标/＞作为第i个待归属的坐标信息中的机械绝对坐标/＞，以计算得到第i个候选行列坐标为作为第i个待归属的坐标信息中的行列坐标。则当前的第/＞个坐标信息形成为第i个待归属的坐标信息的参考坐标。否则，令并重新基于第/＞个芯片区域的机械绝对坐标和行列坐标计算第i个候选行列坐标和第i个候选机械绝对坐标，直至得到第i个待归属的坐标信息，或者，直至第/＞个坐标信息为扫描视块的初始参考坐标时，同样将计算得到的第i个候选机械绝对坐标作为第i个待归属的坐标信息中的机械绝对坐标，将计算得到第i个候选行列坐标为作为第i个待归属的坐标信息中的行列坐标。得到第i个待归属的坐标信息后，令i=i+1，并再次重复执行步骤~步骤，直至确定得到扫描视块内所有待归属的坐标信息。比如以第一个扫描视块为例，第一个待归属的坐标信息以初始基准芯片A的坐标信息作为参考坐标，得到第一个待归属的坐标信息。在确定第二个待归属的坐标信息时，首先基于第一个待归属的坐标信息计算得到候选机械绝对坐标和候选行列坐标，若取整误差满足要求，则以第一个待归属的坐标信息作为第二个待归属的坐标信息的参考坐标，计算到第二个待归属的坐标信息；若取整误差不满足要求，则重新以初始基准芯片的坐标信息作为第二个待归属的坐标信息的参考坐标重新计算，依次类推。按照上述实施例提供的方法可以识别计算得到各个待归属的坐标信息，但是仍然不知道每一个待归属的坐标信息都属于哪个芯片区域，因此需要将各个待归属的坐标信息归属到该扫描视块内的各个芯片区域，本申请提供两种的实现方法：第一种实现方法中，每得到一个待归属的坐标信息就确定其所属的芯片区域，请参考图5所示的流程图，包括：按照上述实施例提供的方法根据扫描视块内的局部图像基于扫描视块内已经确定的芯片区域的坐标信息，按序依次得到下一个待归属的坐标信息。通过点在多边形内的判断算法确定待归属的坐标信息在扫描视块内所属的芯片区域，得到芯片区域的坐标信息，确定的待归属的坐标信息为点，芯片区域为多边形，因此通过判断点是否在多边形内部的方法就能确定待归属的坐标信息在哪个芯片区域内，从而确定其所属的芯片区域，使用的点在多边形内的判断算法包括射线法、向量叉乘法、重心坐标法和面积法中的任意一种。重复执行根据扫描视块内的局部图像基于扫描视块内已经确定的芯片区域的坐标信息的步骤，直至更新确定得到扫描视块内所有芯片区域的坐标信息。则比如在图3中，基于初始基准芯片A的坐标信息首先确定得到第一个待归属的坐标信息，然后利用本实施例提供的方法确定该第一个待归属的坐标信息属于芯片区域G。然后基于初始基准芯片A的坐标信息和芯片区域G的坐标信息，确定得到下一个待归属的坐标信息，然后确定该第二个待归属的坐标信息属于芯片区域H。然后基于初始基准芯片A、芯片区域G和芯片区域H的坐标信息得到第三个待归属的坐标信息，然后确定该第二个待归属的坐标信息属于芯片区域B，以此类推，直至得到所有芯片区域的坐标信息。第二种实现方法中，得到所有待归属的坐标信息后，统一确定各个待归属的坐标信息所属的芯片区域，请参考图6所示的流程图，包括：按照上述实施例提供的方法根据扫描视块内的局部图像基于扫描视块内已经确定的芯片区域的坐标信息，依次得到扫描视块内所有待归属的坐标信息。结合确定得到的所有待归属的坐标信息以及扫描视块的初始参考坐标，共可以得到M*N个坐标信息，按照扫描视块内已经确定的所有M*N个坐标信息之间的坐标相对关系，将M*N个坐标信息按照M行、N列的结构进行排列，每个扫描视块覆盖M行、N列的芯片区域。将按照坐标相对关系排列的M*N个坐标信息整体对应到扫描视块覆盖的M*N个芯片区域，确定任意第m行、第n列的坐标信息属于扫描视块中第m行、第n列的芯片区域，得到扫描视块中所有芯片区域的坐标信息。其中，M、N、m、n均为参数且为整数，1≤m≤M，1≤n≤N。比如假设一个扫描视块覆盖3*3个芯片，扫描视块内共确定得到一个初始参考坐标的行列坐标为，其他按序依次确定的8个待归属的坐标信息的行列坐标分别为、、、、、以及、，则根据所有9个坐标信息之间的坐标相对关系排列形成3行、3列的结构如下表所示，由此可以确定行列坐标为的待归属的坐标信息属于扫描视块内的第一行、第一列的芯片区域，行列坐标为的待归属的坐标信息属于扫描视块内的第一行、第二列的芯片区域，其他以此类推，由此可以统一得到扫描视块内所有芯片区域的坐标信息。不管采用上述哪种方法，在更新确定扫描视块内各个芯片区域的坐标信息时，一个芯片区域内可能还未有坐标信息，则直接将确定得到的坐标信息对应归属到该芯片区域即可。或者一个芯片区域内已经有坐标信息，则一种方法是直接利用更新确定得到的坐标信息替换已有的坐标信息，比如在图3中，在第二个扫描视块中确定得到芯片区域B的坐标信息后，直接替换掉在第一个扫描视块中确定的芯片区域B的坐标信息。或者另一种方法是将更新确定得到的坐标信息和已有的坐标信息的平均值作为更新后的坐标信息。在本申请中，晶圆的行方向沿着绝对坐标系的x方向，晶圆的列方向沿着绝对坐标系的y方向，相机沿着绝对坐标系的x方向和y方向来移动，因此在视块扫描之前，首先还要调整晶圆的姿态，使得晶圆的行方向和列方向分别沿着绝对坐标系的x方向和y方向。则在一个实施例中，在确定晶圆的覆盖范围以及晶圆中的初始基准芯片的坐标信息以及芯片尺寸之前，还包括对晶圆姿态进行校准的过程，请参考图7所示的流程图和图8的示意图：确定晶圆中的第一颗标定芯片在绝对坐标系中的机械绝对坐标，第一颗标定芯片可以选晶圆中的任意一个芯片，一般选择晶圆的沿着行方向的端点处的芯片。从第一颗标定芯片开始，获取同时覆盖第j颗标定芯片和第j+1颗标定芯片的局部图像并进行图像处理，基于第j颗标定芯片/＞的机械绝对坐标确定得到第j+1颗标定芯片/＞在绝对坐标系中的机械绝对坐标，j为起始值为1的参数且为整数，第j颗标定芯片和第j+1颗标定芯片位于晶圆的同一行。令j=j+1，沿着晶圆的行方向移动并再次执行获取同时覆盖第j颗标定芯片和第j+1颗标定芯片的局部图像并进行图像处理的步骤，直至确定得到最后一颗标定芯片在绝对坐标系中的机械绝对坐标。最后一颗标定芯片/＞与第一颗标定芯片/＞之间间隔的芯片数量达到芯片数量阈值，该芯片数量阈值为预设值，表示该最后一颗标定芯片/＞与第一颗标定芯片/＞距离较远，一般位于晶圆的沿着行方向的两端处。确定第一颗标定芯片的机械绝对坐标至最后一颗标定芯片/＞的机械绝对坐标形成的连线与绝对坐标系的x方向之间的偏转夹角/＞。按照偏转夹角旋转调整晶圆，直至偏转夹角小于夹角阈值。在该步骤中，可以直接保持晶圆的圆心位置不变，周向旋转该偏转夹角/＞来调整晶圆，但是这种调整的准确性是较差。因此在另一个实施例中，采用多次调整的方法来完成，也即保持晶圆的圆心位置不变，周向旋转/＞的角度值，/＞是小于1的比例值，比如一般取80%。然后重新执行确定晶圆中的第一颗标定芯片在绝对坐标系中的机械绝对坐标的步骤，重新确定新的偏转角度再次调整，直至偏转角度小于夹角阈值。在得到扫描地图后，需要将扫描地图与晶圆Map图进行匹配合并得到预扫描地图，传统的做法是人为确定同一颗芯片在扫描地图和晶圆Map图上的位置，但这种做法需要依赖人工操作，不仅效率低，准确性也难以保证。在本申请的一个实施例中，晶圆中的每颗芯片的表面都具有唯一的芯片标识，则将扫描地图与晶圆的晶圆Map图进行匹配合并得到预扫描地图的方法包括：利用OCR文字识别技术识别确定对齐芯片的芯片标识，并确定该对齐芯片在扫描地图中对应的芯片区域的坐标信息。在晶圆Map图中通过OCR文字识别技术识别并搜索对齐芯片的芯片标识，确定对齐芯片在晶圆Map图中的行列坐标。根据对齐芯片在扫描地图中的行列坐标以及对齐芯片在晶圆Map图中的行列坐标的偏移关系，将扫描地图与晶圆Map图匹配对齐。将匹配对齐后的扫描地图与晶圆Map图进行合并得到预扫描地图，预扫描地图中包括每颗芯片在晶圆Map图中的行列坐标和芯片等级、以及在对齐后的扫描地图中对应位置处的芯片区域的机械绝对坐标。在上述过程中，若利用OCR文字识别技术识别的对齐芯片的芯片标识存在错误，则会直接导致匹配合并错误，因此在另一个实施例中，还包括如下步骤来保证对齐芯片的芯片标识准确：任选一颗芯片作为候选芯片，利用OCR文字识别技术识别确定候选芯片的芯片标识。若该候选芯片未识别到准确的芯片标识，则重新选取一颗候选芯片。利用OCR文字识别技术分别识别确定与候选芯片位于同一行且依次连续排列的若干颗芯片的芯片标识。一般情况下，晶圆上的芯片的芯片标识具有一定的规律，每颗芯片的芯片标识中包含数字，通常还包括字母序列。位于不同行的芯片标识使用不同的字母序列来表示，位于同一行的芯片标识使用相同的字母序列结合不同的数字来表示，且位于同一行的连续各颗芯片的芯片标识中的数字连续。因此当识别到候选芯片及其同一行依次连续排列的各颗芯片的芯片标识中的数字连续时，确定对候选芯片的芯片标识识别正确，则以候选芯片作为对齐芯片，识别得到的候选芯片的芯片标识即为对齐芯片的芯片标识。否则重新执行任选一颗芯片作为候选芯片的步骤，直至确定得到对齐芯片。以上所述的仅是本申请的优选实施方式，本申请不限于以上实施例。可以理解，本领域技术人员在不脱离本申请的精神和构思的前提下直接导出或联想到的其他改进和变化，均应认为包含在本申请的保护范围之内。
