标题title
一种基于图像的旋转编码器精度检测方法
摘要abst
本发明属于旋转编码器精度检测技术领域，涉及一种基于图像的旋转编码器精度检测方法，该方法如下：将精度校准转盘与旋转编码器同轴安装固定，精度校准转盘的圆柱面上沿周向分布具有设定宽度的黑条；将相机对准精度校准转盘，拍摄精度校准转盘和旋转编码器旋转设定角度前后的图像，并根据黑条宽度投影尺寸的变化推算旋转编码器实际旋转角度；根据旋转编码器实际旋转角度与旋转编码器自身旋转角度读数间的差值判断旋转编码器精度是否满足要求。本发明可以实现任意角度的旋转角度测量，检测成本低，通用性好，大幅提高了旋转编码器精度的检测效率。
权利要求书clms
1.一种基于图像的旋转编码器精度检测方法，其特征在于该方法如下：将精度校准转盘与旋转编码器同轴安装固定，精度校准转盘的圆柱面上沿周向分布具有设定宽度的黑条；将相机对准精度校准转盘，拍摄精度校准转盘和旋转编码器旋转设定角度前后的图像，并根据黑条宽度投影尺寸的变化推算旋转编码器实际旋转角度；根据旋转编码器实际旋转角度与旋转编码器自身旋转角度读数间的差值判断旋转编码器精度是否满足要求。2.根据权利要求1所述的基于图像的旋转编码器精度检测方法，其特征在于对精度校准转盘和旋转编码器进行多次设定角度的旋转，每旋转一次根据黑条宽度投影尺寸的变化推算旋转编码器实际旋转角度，从而得到多个旋转编码器实际旋转角度与旋转编码器自身旋转角度读数间的差值；选取所有差值中的极大值与设定误差阈值进行对比，当选取的极大值小于设定误差阈值时，认定该旋转编码器满足精度要求，否则认定为该旋转编码器精度无法满足实际精度要求。3.根据权利要求1所述的基于图像的旋转编码器精度检测方法，其特征在于所述的旋转编码器和精度校准转盘固定于支撑基座上；标准尺寸参考板设置在支撑基座上靠近相机的一侧并且其标尺平行于黑条宽度方向。4.根据权利要求1所述的基于图像的旋转编码器精度检测方法，其特征在于针对顺时针旋转前后均在第四象限的任一黑条，所述的旋转编码器实际旋转角度推算方法如下：根据式、式分别计算黑条宽度所对应的中心角α和黑条宽度中心角所对应的弦长L2；其中，R为精度校准转盘半径尺寸，L1为黑条宽度；设初始时该黑条边缘与X轴夹角为γ，通过式获得黑条在Y轴上的初始投影长度L3：当旋转编码器带动精度校准转盘一起旋转设定角度后，通过式、获得旋转编码器的实际旋转角度β：其中L4为该黑条在Y轴上的最终投影长度。5.根据权利要求1所述的基于图像的旋转编码器精度检测方法，其特征在于针对顺时针旋转前后分别在第一象限、第四象限的任一黑条，所述的旋转编码器实际旋转角度推算方法如下：根据式、式分别计算黑条宽度所对应的中心角α和黑条宽度中心角所对应的弦长L2；其中，R为精度校准转盘半径尺寸，L1为黑条宽度；设该黑条边缘与X轴夹角为γ，通过获得式黑条在Y轴上的初始投影长度L3：当旋转编码器带动精度校准转盘一起旋转设定角度后，通过式、式获得旋转编码器的实际旋转角度β：其中L4为该黑条在Y轴上的最终投影长度。6.根据权利要求1所述的基于图像的旋转编码器精度检测方法，其特征在于针对顺时针旋转前后均在第一象限的任一黑条，所述的旋转编码器实际旋转角度推算方法如下：根据式、式分别计算黑条宽度所对应的中心角α和黑条宽度中心角所对应的弦长L2；其中，R为精度校准转盘半径尺寸，L1为黑条宽度；设该黑条边缘与X轴夹角为γ，通过获得式黑条在Y轴上的初始投影长度L3：当旋转编码器带动精度校准转盘旋转设定角度后，通过式、获得旋转编码器的实际旋转角度β：其中L4为该黑条在Y轴上的最终投影长度。7.根据权利要求1所述的基于图像的旋转编码器精度检测方法，其特征在于所述精度校准转盘沿周向均布等宽黑条，每个黑条上带有与序号对应的标记；针对序号为i的黑条；相机拍摄初始状态下的精度校准转盘的图像，并计算该黑条在相机像面上的初始投影宽度Li3，记录旋转编码器在初始状态下的角度数值；旋转编码器转过设定角度后，重新拍摄精度校准转盘图像，并计算序号为i的黑条此时在像面上的最终投影宽度Li4，记录旋转编码器自身所测旋转角度；设旋转后仍在相机视场范围内的对应序号黑条数量为m，旋转前后均在第一象限的黑条数量为m1，旋转前后分别在第一象限、第四象限的黑条数量为m2，旋转前后均在第四象限的黑条数量为m3，通过式计算旋转编码器实际旋转角度β；式中，L2为黑条宽度中心角所对应的弦长；进行多次重复测量，得到多个实际旋转角度与旋转编码器自身所测旋转角度间的差值，从中选出极大值并将其与设定误差阈值进行对比，当极大值小于设定误差阈值时，认定该旋转编码器满足精度要求，否则可认定为该旋转编码器精度无法满足实际精度要求。
说明书desc
技术领域本发明属于旋转编码器精度检测技术领域，具体为一种基于图像的旋转编码器精度检测方法。背景技术旋转编码器在现代控制应用中被广泛应用于旋转轴角的角度测量。随着旋转编码器的测量精度不断提高，对其测量精度的检测提出了更高要求。目前，在旋转编码器的研制生产过程中，均需进行多次的精度检测，常用的精度检测方法包括金属多面体棱镜检测方法、高精度编码器检测方法等。在中国专利公报公开的“光电编码器角度误差自动检测系统及系统误差修正方法”中，检测系统利用金属多面棱体和自准直仪对永磁同步电机旋转误差标定，修正测量结果中的系统误差，以提高对被测光电编码器角度误差的检测精度，该方法无法实现任意角度检测，且检测精度依赖于金属多面体棱镜的面数。在中国专利公报公开的“设备中磁性编码器精度检测方法及电子设备”中，通过测量满足预设精度的第二磁性编码器旋转前后的角度变化，并与第一磁性编码器旋转前后的角度变化进行对比，进而判定第一磁性编码器是否满足精度指标；该设备依赖于高精度编码器，设备成本高，通用性弱。发明内容本发明要解决的技术问题是提供一种基于图像的旋转编码器精度检测方法，该方法可以实现任意角度的旋转角度测量，能大幅提高旋转编码器精度的检测效率。为了解决上述技术问题，本发明的基于图像的旋转编码器精度检测方法如下：将精度校准转盘与旋转编码器同轴安装固定，精度校准转盘的圆柱面上沿周向分布具有设定宽度的黑条；将相机对准精度校准转盘，拍摄精度校准转盘和旋转编码器旋转设定角度前后的图像，并根据黑条宽度投影尺寸的变化推算旋转编码器实际旋转角度；根据旋转编码器实际旋转角度与旋转编码器自身旋转角度读数间的差值判断旋转编码器精度是否满足要求。进一步，对精度校准转盘和旋转编码器进行多次设定角度的旋转，每旋转一次根据黑条宽度投影尺寸的变化推算旋转编码器实际旋转角度，从而得到多个旋转编码器实际旋转角度与旋转编码器自身旋转角度读数间的差值；选取所有差值中的极大值与设定误差阈值进行对比，当选取的极大值小于设定误差阈值时，认定该旋转编码器满足精度要求，否则认定为该旋转编码器精度无法满足实际精度要求。进一步，所述的旋转编码器和精度校准转盘固定于支撑基座上；标准尺寸参考板设置在支撑基座上靠近相机的一侧并且其标尺平行于黑条宽度方向。针对顺时针旋转前后均在第四象限的任一黑条，所述的旋转编码器实际旋转角度推算方法如下：根据式、式分别计算黑条宽度所对应的中心角α和黑条宽度中心角所对应的弦长L2；其中，R为精度校准转盘半径尺寸，L1为黑条宽度；设初始时该黑条边缘与X轴夹角为γ，通过式获得黑条在Y轴上的初始投影长度L3：当旋转编码器带动精度校准转盘一起旋转设定角度后，通过式、获得旋转编码器的实际旋转角度β：其中L4为该黑条在Y轴上的最终投影长度。针对顺时针旋转前后分别在第一象限、第四象限的任一黑条，所述的旋转编码器实际旋转角度推算方法如下：根据式、式分别计算黑条宽度所对应的中心角α和黑条宽度中心角所对应的弦长L2；其中，R为精度校准转盘半径尺寸，L1为黑条宽度；设该黑条边缘与X轴夹角为γ，通过获得式黑条在Y轴上的初始投影长度L3：当旋转编码器带动精度校准转盘一起旋转设定角度后，通过式、式获得旋转编码器的实际旋转角度β：其中L4为该黑条在Y轴上的最终投影长度。针对顺时针旋转前后均在第一象限的任一黑条，所述的旋转编码器实际旋转角度推算方法如下：根据式、式分别计算黑条宽度所对应的中心角α和黑条宽度中心角所对应的弦长L2；其中，R为精度校准转盘半径尺寸，L1为黑条宽度；设该黑条边缘与X轴夹角为γ，通过获得式黑条在Y轴上的初始投影长度L3：当旋转编码器带动精度校准转盘旋转设定角度后，通过式、获得旋转编码器的实际旋转角度β：其中L4为该黑条在Y轴上的最终投影长度。所述精度校准转盘沿周向均布等宽黑条，每个黑条上带有与序号对应的标记；针对序号为i的黑条；相机拍摄初始状态下的精度校准转盘的图像，并计算该黑条在相机像面上的初始投影宽度Li3，记录旋转编码器在初始状态下的角度数值；旋转编码器转过设定角度后，重新拍摄精度校准转盘图像，并计算序号为i的黑条此时在像面上的最终投影宽度Li4，记录旋转编码器自身所测旋转角度；设旋转后仍在相机视场范围内的对应序号黑条数量为m，旋转前后均在第一象限的黑条数量为m1，旋转前后分别在第一象限、第四象限的黑条数量为m2，旋转前后均在第四象限的黑条数量为m3，通过式计算旋转编码器实际旋转角度β；式中，L2为黑条宽度中心角所对应的弦长；进行多次重复测量，得到多个实际旋转角度与旋转编码器自身所测旋转角度间的差值，从中选出极大值并将其与设定误差阈值进行对比，当极大值小于设定误差阈值时，认定该旋转编码器满足精度要求，否则可认定为该旋转编码器精度无法满足实际精度要求。本发明的优点在于：与现有金属多面体棱镜及高精度编码器精度检测方法相比，本精度检测方法可以实现任意角度的旋转角度测量，检测成本低，通用性好，且可通过软件实现对旋转角度的自动检测，大幅提高了旋转编码器精度的检测效率。附图说明图1为本发明的旋转编码器精度检测方法整体布局示意图；图2为状态1下旋转编码器精度检测原理示意图；图3为状态2下旋转编码器精度检测原理示意图；图4为状态3下旋转编码器精度检测原理示意图；图中：1为旋转编码器；2为支撑基座；3为相机；4为标准尺寸参考板；5为精度校准转盘；6为连接套。具体实施方式在本发明专利的描述中，需要理解的是，术语“上”、“下”、“前”、“后”、“左”、“右”、“顶”、“底”、“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明专利和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明专利的限制。下面将结合本发明专利实施例中的附图，对本发明专利实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明专利一部分实施例，而不是全部的实施例。如图1所示，实现本发明的基于图像的旋转编码器精度检测方法所需的装置包括待测精度的旋转编码器1、支撑基座2、相机3、标准尺寸参考板4、精度校准转盘5以及连接套6。所述的旋转编码器1与精度校准转盘5通过轴及连接套6固定连接，并安装固定于支撑基座2上；精度校准转盘5的圆柱面上沿周向分布具有设定宽度的黑条；标准尺寸参考板4设置在支撑基座2上靠近相机3的一侧并且其标尺平行于黑条宽度方向；以相机视轴与标准尺寸参考板4相互垂直为基准，确定相机3与标准尺寸参考板4的相对位置。由于旋转编码器中心与相机像面之间的距离不是固定的，黑条的宽度在相机成像之后是像素点，其长度仍然需要一个基准才能知道具体的数值，因此标准尺寸参考板4可以为相机3提供黑条实际宽度参考。相机3用于观测精度校准转盘5旋转前后黑条宽度投影尺寸的变化，进而推算旋转编码器实际旋转角度，计算实际旋转角度与旋转编码器自身旋转角度读数间的差值。通过多次重复试验，取多个差值的极大值并将其与设定误差阈值进行对比，进而判断旋转编码器精度是否满足实际要求。实施例1：设精度校准转盘半径尺寸为R，其上黑条宽度为L1。则黑条宽度所对应的中心角α可通过式获得：黑条宽度中心角所对应的弦长L2可通过式获得：如图2所示，针对顺时针旋转前后均在第四象限的任一黑条，假设初始时该黑条边缘与X轴夹角为γ，黑条在Y轴上的初始投影长度L3可通过式获得：当旋转编码器1通过轴及连接套6带动精度校准转盘5一起旋转设定角度后，该黑条在Y轴上的最终投影长度L4可通过式获得：则精度校准转盘的转动角度β可通过式计算获得：与如图3所示，针对顺时针旋转前后分别在第一象限、第四象限的任一黑条，假设该黑条边缘与X轴夹角为γ，则黑条在Y轴上的初始投影长度L3可通过式获得：当旋转编码器1通过轴及连接套6带动精度校准转盘5一起旋转设定角度后，该黑条在Y轴上的最终投影长度L4可通过式获得：则精度校准转盘5的转动角度β可通过式计算获得：如图4所示，针对顺时针旋转前后均在第一象限的任一黑条，该黑条边缘与X轴夹角为γ，黑条在Y轴上的初始投影长度L3可通过式获得。当旋转编码器带动精度校准转盘旋转一定角度β后，该黑条在Y轴上的最终投影长度L4可通过式获得：则精度校准转盘的转动角度β可通过式计算获得：计算获得旋转编码器实际旋转角度时，同步获取旋转编码器自身测得的旋转角度，计算两者的差值。进行多次重复测量，得到多个实际旋转角度与旋转编码器自身所测旋转角度间的差值，从中选出极大值并将其与设定误差阈值进行对比，当极大值在可接受范围内时，认定该旋转编码器满足精度要求，否则可认定为该旋转编码器精度无法满足实际精度要求。实施例2：本实施例以精度校准转盘沿周向分布等宽黑条数量12为例进行说明。设等宽黑条对应序号为i，每个黑条上带有与序号对应的标记，例如黑条序号为3，则黑条上设置3个白点或3个白条。针对序号为i的黑条，相机3拍摄当前初始状态下的精度校准转盘5的图像，并计算序号为i的黑条在相机像面上的初始投影宽度Li3，记录旋转编码器在初始状态下的角度数值。旋转编码器转过设定角度后，重新拍摄精度校准转盘图像，并计算序号为i的黑条此时在像面上的最终投影宽度Li4，记录旋转编码器自身所测旋转角度。假设旋转后仍在相机视场范围内的对应序号黑条数量为m，旋转前后均在第一象限的黑条数量为m1，旋转前后分别在第一象限、第四象限的黑条数量为m2，旋转前后均在第四象限的黑条数量为m3，则可通过式对实际编码器旋转角度进行计算；进行多次重复测量，得到多个实际旋转角度与旋转编码器自身所测旋转角度间的差值，从中选出极大值并将其与设定误差阈值进行对比，当极大值小于设定误差阈值时，认定该旋转编码器满足精度要求，否则可认定为该旋转编码器精度无法满足实际精度要求。所述的序号为i的黑条旋转前后的位置也分为三种情况，顺时针旋转前后均在第四象限、分别在第一象限和第四象限的任一黑条、均在第一象限，其初始投影宽度Li3和最终投影宽度Li4计算方法与实施例1中相同。本发明不限于上述实施例，旋转编码器和精度校准转盘也可以在逆时针旋转一定角度后推算旋转编码器实际旋转角度，从而判断旋转编码器是否满足精度要求。
