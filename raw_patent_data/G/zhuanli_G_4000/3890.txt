标题title
基于电网GIS地图的电力线路沿布方法及存储介质
摘要abst
本发明公开了一种基于电网GIS地图的电力线路沿布方法及存储介质，方法包括：在电网GIS地图中选取起点电网设备和终点电网设备；根据所述起点电网设备和终点电网设备以及所述电网GIS地图中的道路和预设的需避让地理要素，生成至少一条的布线路径；在各布线路径中确定最优布线路径；若所述最优布线路径的预设范围内存在预设的可吸附地理要素，则根据距离最近的可吸附地理要素，调整所述最优布线路径，得到线路沿布结果。本发明可解决线路沿布效率低、容易出错、复用性不高的问题。
权利要求书clms
1.一种基于电网GIS地图的电力线路沿布方法，其特征在于，包括：在电网GIS地图中选取起点电网设备和终点电网设备；根据所述起点电网设备和终点电网设备以及所述电网GIS地图中的道路和预设的需避让地理要素，生成至少一条的布线路径；在各布线路径中确定最优布线路径；若所述最优布线路径的预设范围内存在预设的可吸附地理要素，则根据距离最近的可吸附地理要素，调整所述最优布线路径，得到线路沿布结果。2.根据权利要求1所述的基于电网GIS地图的电力线路沿布方法，其特征在于，所述根据所述起点电网设备和终点电网设备以及所述电网GIS地图中的道路和预设的需避让地理要素，生成至少一条的布线路径，包括：直线连接所述起点电网设备和终点电网设备，得到初始路径，并根据预设的安全距离，确定初始路径区域；若所述初始路径区域与预设的需避让地理要素相交，则获取所述初始路径区域中与预设的需避让地理要素相交的路径段，并调整所述路径段，调整后的所述路径段沿着与所述路径段相交的需避让地理要素的边界线进行布线，且调整后的路径段与需避让地理要素不相交；根据所述初始路径以及调整后的所述路径段，生成至少一条的布线路径；若所述起点电网设备和终点电网设备均位于道路上，则通过交通道路拓扑分析，生成至少一条的布线路径。3.根据权利要求2所述的基于电网GIS地图的电力线路沿布方法，其特征在于，所述根据所述起点电网设备和终点电网设备以及所述电网GIS地图中的道路和预设的需避让地理要素，生成至少一条的布线路径，还包括：若所述起点电网设备和终点电网设备与距离其最近的道路的距离小于预设的第一距离阈值，则将道路上与所述起点电网设备距离最近的点作为起点道路点，将道路上与所述终点电网设备距离最近的点作为终点道路点，生成所述起点电网设备与起点道路点之间的第一路径以及所述终点道路点与终点电网设备之间的第三路径，并通过交通道路拓扑分析，生成至少一条的所述起点道路点与终点道路点之间的第二路径；根据所述第一路径、第三路径和预设的安全距离，确定第一路径区域和第三路径区域；若所述第一路径区域与预设的需避让地理要素相交，则获取所述第一路径区域中与预设的需避让地理要素相交的第一路径段，并调整所述第一路径段；若所述第三路径区域与预设的需避让地理要素相交，则获取所述第三路径区域中与预设的需避让地理要素相交的第三路径段，并调整所述第三路径段；根据所述第一路径、第二路径和第三路径以及调整后的第一路径段和第三路径段，生成至少一条的布线路径。4.根据权利要求1所述的基于电网GIS地图的电力线路沿布方法，其特征在于，所述在各布线路径中确定最优布线路径具体为：分别根据各布线路径的长度，计算各布线路径的距离评分；分别根据各布线路径中的弯折次数，计算各布线路径的弯折评分；分别根据各布线路径经过的地理要素对应的埋设难度，计算各布线路径的埋设评分；对同一布线路径的距离评分、弯折评分和埋设评分进行加权计算，得到所述同一布线路径的总评分；将总评分最小的布线路径作为最优布线路径。5.根据权利要求4所述的基于电网GIS地图的电力线路沿布方法，其特征在于，所述分别根据各布线路径的长度，计算各布线路径的距离评分具体为：根据第一公式计算一布线路径的距离评分，所述第一公式为距离评分＝×100，其中，Li为所述一布线路径的长度，Lmax为各布线路径的长度中的最大值。6.根据权利要求4所述的基于电网GIS地图的电力线路沿布方法，其特征在于，所述分别根据各布线路径中的弯折次数，计算各布线路径的弯折评分具体为：分别统计各布线路径中弯折角度大于预设角度的弯折次数；根据第二公式计算一布线路径的弯折评分，所述第二公式为弯折评分＝×100，其中，Wi为所述一布线路径的弯折次数，Wmax为各布线路径的弯折次数中的最大值。7.根据权利要求4所述的基于电网GIS地图的电力线路沿布方法，其特征在于，所述分别根据各布线路径经过的地理要素对应的埋设难度，计算各布线路径的埋设评分具体为：将一布线路径经过的各地理要素对应的埋设难度评分进行加权求和，得到所述一布线路径的埋设评分，其中，一地理要素对应的埋设难度评分的权值为所述一布线路径中经过所述一地理要素的路径长度占所述一布线路径的总路径长度的比例。8.根据权利要求1所述的基于电网GIS地图的电力线路沿布方法，其特征在于，所述若所述最优布线路径的预设范围内存在预设的可吸附地理要素，则根据距离最近的可吸附地理要素，调整所述最优布线路径，得到线路沿布结果具体为：根据预设的步长，在所述最优布线路径上确定路径点，得到路径点集合；遍历所述路径点集合，依序获取一路径点作为当前路径点；判断以当前路径点为中心点，以预设的第二距离阈值为半径的范围内是否存在预设的可吸附地理要素；若存在，则将与当前路径点距离最近的可吸附地理要素作为当前路径点对应的最近可吸附地理要素，并根据所述对应的最近可吸附地理要素上与当前路径点距离最近的点的位置，更新当前路径点的位置；若当前路径点不为所述路径点集合中的第一个路径点，则判断当前路径点对应的最近可吸附地理要素与上一个路径点对应的最近可吸附地理要素是否为同一地理要素；若是，则沿着所述同一地理要素的边界线，生成当前路径点与上一个路径点之间的连线；若否，则直线连接当前路径点及其上一个路径点，生成当前路径点与上一个路径点之间的连线；当遍历完所述路径点集合后，得到线路沿布结果。9.根据权利要求1所述的基于电网GIS地图的电力线路沿布方法，其特征在于，所述若所述最优布线路径的预设范围内存在预设的可吸附地理要素，则根据距离最近的可吸附地理要素，调整所述最优布线路径，得到线路沿布结果之后，进一步包括：对所述线路沿布结果进行微调整，所述微调整包括第一微调整操作、第二微调整操作和第三微调整操作中的至少一种；所述第一微调整操作为对所述线路沿布结果中的一路径点的位置进行调整；所述第二微调整操作为删除所述线路沿布结果中的一路径点及与所述一路径点相连的连线，并连接与所述一路径点相邻的两个路径点，生成所述相邻的两个路径点之间的连线；所述第三微调整操作为根据预设的新增电缆段方向，在所述线路沿布结果中的一路径点上新增电缆段。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述程序被处理器执行时实现如权利要求1-9任一项所述的方法。
说明书desc
技术领域本发明涉及电力线路规划技术领域，尤其涉及一种基于电网GIS地图的电力线路沿布方法及存储介质。背景技术传统电力线路沿布方法通常为手工绘制，由规划人员人为判断线路是否经过风景区、保护区、河流、铁路等要素并进行避让，根据地图上道路走向人为捕捉道路等信息进行线路绘制。而面对日益复杂、规模庞大的配电网，人工绘图的方法显然已经无法适应智能电网发展的需要，存在着工作量大、工作繁琐、效率较低、出错率高、线路非最优线路等问题。发明内容本发明所要解决的技术问题是：提供一种基于电网GIS地图的电力线路沿布方法及存储介质，可实现电力线路的自动沿布，提高电网规划工作的效率。为了解决上述技术问题，本发明采用的技术方案为：一种基于电网GIS地图的电力线路沿布方法，包括：在电网GIS地图中选取起点电网设备和终点电网设备；根据所述起点电网设备和终点电网设备以及所述电网GIS地图中的道路和预设的需避让地理要素，生成至少一条的布线路径；在各布线路径中确定最优布线路径；若所述最优布线路径的预设范围内存在预设的可吸附地理要素，则根据距离最近的可吸附地理要素，调整所述最优布线路径，得到线路沿布结果。本发明还提出一种计算机可读存储介质，其上存储有计算机程序，所述程序被处理器执行时实现如上所述的方法。本发明的有益效果在于：通过选取线路的起点和终点，并考虑地图中的道路与预先设定的需要避让的地理要素，生成多条布线路径；再从多条布线路径中选取出一条最优布线路径，进一步对最优布线路径进行调整，使其尽可能地沿着预先设定的可吸附地理要素进行布线，从而在后续的线路施工时，节约布线成本。本发明可实现线路自动沿布，提高了电网规划工作的效率，且降低了人工错误率以及工作成本。附图说明图1为本发明的基于电网GIS地图的电力线路沿布方法的流程图；图2为本发明实施例一的自定义避让规则设定示意图；图3为本发明实施例一的吸附规则设定示意图；图4为本发明实施例一的方法流程图；图5为本发明实施例一的初始路径示意图；图6为本发明实施例一的布线路径示意图；图7为本发明实施例一的线路沿布结果示意图。具体实施方式为详细说明本发明的技术内容、所实现目的及效果，以下结合实施方式并配合附图详予说明。请参阅图1，一种基于电网GIS地图的电力线路沿布方法，包括：在电网GIS地图中选取起点电网设备和终点电网设备；根据所述起点电网设备和终点电网设备以及所述电网GIS地图中的道路和预设的需避让地理要素，生成至少一条的布线路径；在各布线路径中确定最优布线路径；若所述最优布线路径的预设范围内存在预设的可吸附地理要素，则根据距离最近的可吸附地理要素，调整所述最优布线路径，得到线路沿布结果。从上述描述可知，本发明的有益效果在于：可解决线路沿布效率低、容易出错、复用性不高的问题。进一步地，所述根据所述起点电网设备和终点电网设备以及所述电网GIS地图中的道路和预设的需避让地理要素，生成至少一条的布线路径，包括：直线连接所述起点电网设备和终点电网设备，得到初始路径，并根据预设的安全距离，确定初始路径区域；若所述初始路径区域与预设的需避让地理要素相交，则获取所述初始路径区域中与预设的需避让地理要素相交的路径段，并调整所述路径段，调整后的所述路径段沿着与所述路径段相交的需避让地理要素的边界线进行布线，且调整后的路径段与需避让地理要素不相交；根据所述初始路径以及调整后的所述路径段，生成至少一条的布线路径；若所述起点电网设备和终点电网设备均位于道路上，则通过交通道路拓扑分析，生成至少一条的布线路径进一步地，所述根据所述起点电网设备和终点电网设备以及所述电网GIS地图中的道路和预设的需避让地理要素，生成至少一条的布线路径，还包括：若所述起点电网设备和终点电网设备与距离其最近的道路的距离小于预设的第一距离阈值，则将道路上与所述起点电网设备距离最近的点作为起点道路点，将道路上与所述终点电网设备距离最近的点作为终点道路点，生成所述起点电网设备与起点道路点之间的第一路径以及所述终点道路点与终点电网设备之间的第三路径，并通过交通道路拓扑分析，生成至少一条的所述起点道路点与终点道路点之间的第二路径；根据所述第一路径、第三路径和预设的安全距离，确定第一路径区域和第三路径区域；若所述第一路径区域与预设的需避让地理要素相交，则获取所述第一路径区域中与预设的需避让地理要素相交的第一路径段，并调整所述第一路径段；若所述第三路径区域与预设的需避让地理要素相交，则获取所述第三路径区域中与预设的需避让地理要素相交的第三路径段，并调整所述第三路径段；根据所述第一路径、第二路径和第三路径以及调整后的第一路径段和第三路径段，生成至少一条的布线路径。由上述描述可知，通过对避让需避让地理要素、不避让需避让地理要素、沿着道路布线等多种不同的情况进行组合，尽可能多地生成布线路径，为后续选取最优布线路径提供基础。进一步地，所述在各布线路径中确定最优布线路径具体为：分别根据各布线路径的长度，计算各布线路径的距离评分；分别根据各布线路径中的弯折次数，计算各布线路径的弯折评分；分别根据各布线路径经过的地理要素对应的埋设难度，计算各布线路径的埋设评分；对同一布线路径的距离评分、弯折评分和埋设评分进行加权计算，得到所述同一布线路径的总评分；将总评分最小的布线路径作为最优布线路径。由上述描述可知，依据布线路径的长度、弯折次数和所经过的地理要素的埋设难度来对布线路径进行综合评分，再依据评分选取最优的布线路径。进一步地，所述分别根据各布线路径的长度，计算各布线路径的距离评分具体为：根据第一公式计算一布线路径的距离评分，所述第一公式为距离评分＝×100，其中，Li为所述一布线路径的长度，Lmax为各布线路径的长度中的最大值。进一步地，所述分别根据各布线路径中的弯折次数，计算各布线路径的弯折评分具体为：分别统计各布线路径中弯折角度大于预设角度的弯折次数；根据第二公式计算一布线路径的弯折评分，所述第二公式为弯折评分＝×100，其中，Wi为所述一布线路径的弯折次数，Wmax为各布线路径的弯折次数中的最大值。进一步地，所述分别根据各布线路径经过的地理要素对应的埋设难度，计算各布线路径的埋设评分具体为：将一布线路径经过的各地理要素对应的埋设难度评分进行加权求和，得到所述一布线路径的埋设评分，其中，一地理要素对应的埋设难度评分的权值为所述一布线路径中经过所述一地理要素的路径长度占所述一布线路径的总路径长度的比例。进一步地，所述若所述最优布线路径的预设范围内存在预设的可吸附地理要素，则根据距离最近的可吸附地理要素，调整所述最优布线路径，得到线路沿布结果具体为：根据预设的步长，在所述最优布线路径上确定路径点，得到路径点集合；遍历所述路径点集合，依序获取一路径点作为当前路径点；判断以当前路径点为中心点，以预设的第二距离阈值为半径的范围内是否存在预设的可吸附地理要素；若存在，则将与当前路径点距离最近的可吸附地理要素作为当前路径点对应的最近可吸附地理要素，并根据所述对应的最近可吸附地理要素上与当前路径点距离最近的点的位置，更新当前路径点的位置；若当前路径点不为所述路径点集合中的第一个路径点，则判断当前路径点对应的最近可吸附地理要素与上一个路径点对应的最近可吸附地理要素是否为同一地理要素；若是，则沿着所述同一地理要素的边界线，生成当前路径点与上一个路径点之间的连线；若否，则直线连接当前路径点及其上一个路径点，生成当前路径点与上一个路径点之间的连线；当遍历完所述路径点集合后，得到线路沿布结果。由上述描述可知，通过将最优布线路径吸附到距离其最近的可吸附地理要素上，使其尽可能地沿这些可吸附地理要素布线，在后续实际的线路施工布设时，可节约施工成本。进一步地，所述若所述最优布线路径的预设范围内存在预设的可吸附地理要素，则根据距离最近的可吸附地理要素，调整所述最优布线路径，得到线路沿布结果之后，进一步包括：对所述线路沿布结果进行微调整，所述微调整包括第一微调整操作、第二微调整操作和第三微调整操作中的至少一种；所述第一微调整操作为对所述线路沿布结果中的一路径点的位置进行调整；所述第二微调整操作为删除所述线路沿布结果中的一路径点及与所述一路径点相连的连线，并连接与所述一路径点相邻的两个路径点，生成所述相邻的两个路径点之间的连线；所述第三微调整操作为根据预设的新增电缆段方向，在所述线路沿布结果中的一路径点上新增电缆段。由上述描述可知，通过对线路沿布结果进行微调，使其满足用户的需求，灵活性高。本发明还提出一种计算机可读存储介质，其上存储有计算机程序，所述程序被处理器执行时实现如上所述的方法。实施例一请参照图1-7，本发明的实施例一为：一种基于电网GIS地图的电力线路沿布方法，通过自动分析规划规则来进行线路沿布。其中，规划规则是指线路绘制过程中需要考虑的各种影响因素。可以根据需要在规则定义功能上定义常见的避让规则、遵循规则，并支持智能定义，通过参数配置达到修改规则细节的要求。通过规则的定义，使用规则来指导线路绘制，通过程序自动分析、应用规则，可提高线路沿布的效率。在该方法之前，先预设自动延布规则，自动延布规则包括基本既定规则与自定义规则。这些规则制定的依据为地图地理要素与电网电缆设备埋设规则。其中，地图地理要素为地图上最基本的地理内容，是具有位置、分布特点和相互关系的地理实体，是普通地图上的基本要素，包括自然要素和社会经济要素，自然要素包括水体、地貌、土质和植被等，社会经济要素包括居民地、交通网、政治行政界线、工农业设施和文化遗迹等。电网电缆设备埋设规则为埋设地点不能涉水、不能为强腐蚀环境、不能为山体等埋设成本超高的地段等。本实施例中，基本既定规则包括基本避让规则和布线规则。基本避让规则：避让基本避让点，基本避让点包括地理图上所有的水体以及不适合沿布的地貌，还包括居民地和基础交通网布线规则：电网电缆设备分段布线。进一步地，还提供用户自定义规则功能，可通过该功能实现规则的自定义。该功能可提供参数变更来修改自定义规则细节。本实施例中，自定义规则包括自定义避让规则和吸附规则。自定义避让规则：避让自定义避让点，自定义避让点可包括体育场、公园、保护区、旅游景区等。在具体应用中，可提供自定义避让点供用户选取，如图2所示，用户在创建规则的时候根据需要，设置规则的类型，每个规则里里包含的详细信息都可根据现场需求自行定义。吸附规则：线路自动沿布时，可以吸附在某些地图地理要素上，方便线缆进行规整布线，可吸附地理要素可包括道路、水体沿线、山体沿线、铁路等。在具体应用中，如图3所示，用户可设置距离阈值，当线路与可吸附的地图地理要素之间的距离不超过该距离阈值时，线路可吸附到该可吸附的地图地理要素上。如图4所示，所述方法包括如下步骤：S1：在电网GIS地图上选取起点电网设备和终点电网设备。S2：根据所述起点电网设备和终点电网设备以及所述电网GIS地图中的道路和预设的需避让地理要素，生成至少一条的布线路径。具体地，首先，直线连接所述起点电网设备和终点电网设备，得到初始路径，并根据预设的安全距离，确定初始路径区域。即获取起点电网设备和终点电网设备的地理坐标，然后直线连接两点，将连接得到的线段作为初始路径，并且根据起点电网设备和终点电网设备的地理坐标，可计算得到初始路径的线段方程，再根据预设的安全距离，得到初始路径区域，初始路径区域的中心线即为初始路径，而根据初始路径的线路方程和安全距离，可计算得到初始路径区域的坐标范围。若初始路径区域与预设的需避让地理要素相交，则获取所述初始路径区域中与预设的需避让地理要素相交的路径段，并调整所述路径段，调整后的所述路径段沿着与所述路径段相交的需避让地理要素的边界线进行布线，且调整后的路径段与需避让地理要素不相交。也就是说，若初始路径经过了需要避让的地理要素，则会绕开这些需要避让的地理要素，而绕开的时候，由于绕开的方向不同，可产生不同的调整后的路径段。例如，假设初始路径经过一个湖，则可以从这个湖的两侧绕开，此时可产生两个不同的调整后的路径段。其中，预设的需避让地理要素包括上述预先设定的基本避让点和自定义避让点。最后，根据初始路径以及调整后的路径段，生成至少一条的布线路径。生成的布线路径中也包括初始路径。进一步地，如果起点电网设备和终点电网设备均位于道路上，还可以利用电网GIS地图中的交通道路拓扑分析功能，生成至少一条的布线路径，即在这种情况下生成的布线路径是沿着道路布线的。也就是说，如果起点电网设备和终点电网设备均位于道路上，则生成的布线路径包括基于初始路径生成的布线路径，也包括基于道路生成的布线路径。如果起点电网设备和终点电网设备不位于道路上，但位于道路附近，即起点电网设备和终点电网设备与距离其最近的道路的距离小于预设的第一距离阈值，此时，将道路上与起点电网设备距离最近的点作为起点道路点，将道路上与终点电网设备距离最近的点作为终点道路点，然后分别生成起点电网设备与起点道路点之间的第一路径、起点道路点与终点道路点之间的第二路径、终点道路点与终点电网设备之间的第三路径。其中，第二路径也是利用电网GIS地图中的交通道路拓扑分析功能生成的，此时可生成至少一条的第二路径。第一路径和第三路径可以为直线，并且，当第一路径或第三路径有经过需避让地理要素时，则也需调整其中与需避让地理要素相交的路径段。具体地，根据第一路径、第三路径和预设的安全距离，确定第一路径区域和第三路径区域；若第一路径区域与预设的需避让地理要素相交，则获取第一路径区域中与预设的需避让地理要素相交的第一路径段，并调整第一路径段，调整后的第一路径段沿着与第一路径段相交的需避让地理要素的边界线进行布线，且调整后的第一路径段与需避让地理要素不相交。同理，若第三路径区域与预设的需避让地理要素相交，则获取第三路径区域中与预设的需避让地理要素相交的第三路径段，并调整第三路径段。最后，根据第一路径、第二路径和第三路径以及调整后的第一路径段和第三路径段，生成至少一条的布线路径。即对多种不同的情况进行组合，生成多条布线路径。S3：在各布线路径中确定最优布线路径。本实施例中，获取到多条布线路径后，根据距离因子、弯折因子和埋设因子来计算出最优布线路径。具体地，本步骤包括如下步骤：S301：分别根据各布线路径的长度，计算各布线路径的距离评分。本实施例中，以布线路径的长度作为距离评分的评分依据，将长度最长的布线路径的距离评分设为100，其他布线路径根据其长度与最长的长度的比例来计算其距离评分，具体计算公式为：第一公式：距离评分＝×100其中，Li为布线路径的长度，Lmax为各布线路径的长度中的最大值。S302：分别根据各布线路径中的弯折次数，计算各布线路径的弯折评分。首先，分别统计各布线路径中弯折角度大于预设角度的弯折次数，本实施例中，预设角度为30°，即弯折角度大于30°的弯折视为1次弯折。然后以布线路径中的弯折次数作为弯折评分的评分依据，将弯折次数最多的布线路径的弯折评分设为100，其他布线路径根据其弯折次数与最大弯折次数的比例来计算其弯折评分，具体计算公式为：第二公式：弯折评分＝×100其中，Wi为布线路径的弯折次数，Wmax为各布线路径的弯折次数中的最大值。S303：分别根据各布线路径经过的地理要素对应的埋设难度，计算各布线路径的埋设评分。本实施例中，以布线路径所经过的地理要素埋设难度作为埋设评分的评分依据。如果一条布线路径经过多种不同埋设难度的地理要素，则分段计算评分，再根据每段的长度与总长度的比例，计算整条布线路径的埋设评分。即将一布线路径经过的各地理要素对应的埋设难度评分进行加权求和，得到所述一布线路径的埋设评分，其中，一地理要素对应的埋设难度评分的权值为所述一布线路径中经过所述一地理要素的路径长度占所述一布线路径的总路径长度的比例。本实施例中，常见的地理要素对应的埋设难度及埋设难度评分如表1所示。表1：例如，假设一条布线路径，其四分之一的长度经过了道路，二分之一的长度经过了其他地理要素，四分之一的长度经过了水体，则其埋设评分＝0.25×20+0.5×60+0.25×100＝60。S304：分别对各布线路径的距离评分、弯折评分和埋设评分进行加权计算，得到各布线路径的总评分。即对同一布线路径的距离评分、弯折评分和埋设评分进行加权计算，得到所述同一布线路径的总评分。本实施例中，距离评分、弯折评分和埋设评分的权值分别为0.6、0.2、0.2，即总评分计算公式为：总评分＝0.6×距离评分+0.2×弯折评分+0.2×埋设评分。S305：将总评分最小的布线路径作为最优布线路径。S4：根据所述最优布线路径的预设范围内距离最近的可吸附地理要素，调整所述最优布线路径，得到线路沿布结果。即将最优布线路径吸附到距离其最近的可吸附地理要素上，使其尽可能地沿这些可吸附地理要素布线。其中，可吸附地理要素可包括道路、河流等。具体地，本步骤包括如下步骤：S401：根据预设的步长，在所述最优布线路径上确定路径点，得到路径点集合；即在最优布线路径上等距取多个点，作为路径点，取点的距离根据精细度要求而定，本实施例中，步长为1公里。路径点集合中包括最优布线路径的起点和终点。S402：从路径点集合中获取第i个路径点作为当前路径点，i的初始值为1。S403：判断以当前路径点为中心点，以预设的第二距离阈值为半径的范围内是否存在预设的可吸附地理要素，若存在，则执行步骤S404，若不存在，则保持当前路径点的位置不变，然后执行步骤S408。本实施例中，第二距离阈值为100米。S404：将与当前路径点距离最近的可吸附地理要素作为当前路径点对应的最近可吸附地理要素，并根据所述对应的最近可吸附地理要素上与当前路径点距离最近的点的位置，更新当前路径点的位置。即将当前路径点的位置变更为距离其最近的可吸附地理要素上距离其最近的点。S405：判断当前路径点对应的最近可吸附地理要素与上一个路径点对应的最近可吸附地理要素是否为同一地理要素，若是，则执行步骤S406，若否，则执行步骤S407。进一步地，若当前路径点为路径点集合中的第一个路径点，则直接执行步骤S409。S406：沿着所述同一地理要素的边界线，生成当前路径点与上一个路径点之间的连线。然后执行步骤S408。S407：直线连接当前路径点及其上一个路径点，生成当前路径点与上一个路径点之间的连线。然后执行步骤S408。S408：判断是否遍历完路径点集合，即i＝N是否成立，N为路径点集合中的路径点总个数，若是，则可得到线路沿布结果，若否，则执行步骤S409。S409：获取下一个路径点，即令i＝i+1，然后执行步骤S401。如图5-7所示，假设一条初始路径为图5所示，其中间一段经过湖泊，避让该湖泊后生成的其中一条布线路径如图6所示，该条布线路径吸附道路后如图7所示。S5：对所述线路沿布结果进行微调整。即用户可在地图上查看线路自动沿布结果，并对线路沿布结果进行微调整，调整到用户需要的结果。本实施例中，微调整包括下述微调整操作中的至少一种。对所述线路沿布结果中的一路径点的位置进行调整；即可以选取中间电缆段节点，对节点位置进行调整。删除所述线路沿布结果中的一路径点及与所述一路径点相连的连线，并连接与所述一路径点相邻的两个路径点，生成所述相邻的两个路径点之间的连线；即选取中间电缆段节点，进行删除，删除过后相邻的节点会自动连线。根据预设的新增电缆段方向，在所述线路沿布结果中的一路径点上新增电缆段；即选取中间电缆段节点，选择新增电缆段方向，实现在节点处新增新的电缆段。本实施例可解决针对电网线路在规划时，在地图上画线操作不便捷，导致线路规划效率低的问题。通过将规划规则进行细化，转换成具体的逻辑规则，在线路生成过程中应用这些规则，实现线路自动沿布的功能。在实际的电网线路规划过程中，规划人员绘制完电网设备后，选择自动沿布操作，系统将自动根据预制的规则，实现线路走向的自动生成，降低了规划成本，提高了工作效率，避免了传统人工绘图面临的问题。实施例二本实施例是对应上述实施例的一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现如上述的基于电网GIS地图的电力线路沿布方法实施例中的各个过程，且能达到相同的技术效果，为避免重复，这里不再赘述。综上所述，本发明提供的一种基于电网GIS地图的电力线路沿布方法及存储介质，可解决针对电网线路在规划时，在地图上画线操作不便捷，导致线路规划效率低的问题。通过将规划规则进行细化，转换成具体的逻辑规则，在线路生成过程中应用这些规则，实现线路自动沿布的功能。本发明可实现线路自动沿布，提高了电网规划工作的效率，且降低了人工错误率以及工作成本。以上所述仅为本发明的实施例，并非因此限制本发明的专利范围，凡是利用本发明说明书及附图内容所作的等同变换，或直接或间接运用在相关的技术领域，均同理包括在本发明的专利保护范围内。
