标题title
近视眼底改变评估方法、装置和电子设备
摘要abst
本申请提出一种近视眼底改变评估方法、装置和电子设备，能够获取分布有豹纹斑的眼底图像在设定的光波波段下对应的单通道图像；其中，不同光波波段对应的单通道图像，表示眼底在不同深度下的眼底结构图像。然后确定豹纹斑在单通道图像中的分布情况，将豹纹斑在单通道图像中的分布情况，确定为豹纹斑在单通道图像对应的深度下的分布情况。如此设置，能够确定眼底不同深度下的豹纹斑分布，实现辅助确定眼底结构改变或眼底损伤程度的目的。
权利要求书clms
1.一种近视眼底改变评估方法，其特征在于，包括：获取眼底图像在设定的光波波段下对应的单通道图像；其中，不同光波波段对应的单通道图像，表示眼底在不同深度下的眼底结构图像；所述眼底图像中分布有豹纹斑；确定所述豹纹斑在所述单通道图像中的分布情况，将所述豹纹斑在所述单通道图像中的分布情况，确定为所述豹纹斑在所述单通道图像对应的深度下的分布情况。2.根据权利要求1所述的方法，其特征在于，所述确定所述豹纹斑在所述单通道图像中的分布情况，包括：确定所述单通道图像中各检测区域的豹纹斑特征指数；其中，所述单通道图像中包括多个检测区域，所述检测区域至少包括一个像素面积；所述豹纹斑特征指数包括豹纹斑面积、豹纹斑密度、豹纹斑占比和豹纹斑形态参数中的至少一种；根据所述单通道图像中各检测区域的豹纹斑特征指数，确定所述单通道图像的豹纹斑特征图。3.根据权利要求2所述的方法，其特征在于，所述确定所述单通道图像中各检测区域的豹纹斑特征指数，包括：确定所述单通道图像中豹纹斑的分布区域；根据所述单通道图像中豹纹斑的分布区域，计算各检测区域中豹纹斑的面积与所述检测区域的面积的面积比值，作为各检测区域的豹纹斑密度；和/或，计算各检测区域中豹纹斑的面积与所述单通道图像中豹纹斑的面积的面积比值，作为各检测区域的豹纹斑占比。4.根据权利要求2所述的方法，其特征在于，所述根据所述单通道图像中各检测区域的豹纹斑特征指数，确定所述单通道图像的豹纹斑特征图，包括：以所述单通道图像中的各检测区域的豹纹斑特征指数为基础生成所述单通道图像对应的可视化图像，确定所述可视化图像为所述单通道图像的豹纹斑特征图；所述可视化图像包括热力图和/或灰度图。5.根据权利要求4所述的方法，其特征在于，还包括：确定所述单通道图像中萎缩斑所在的区域；在所述可视化图像中对所述萎缩斑所在的区域进行特殊化处理。6.根据权利要求2所述的方法，其特征在于，所述确定所述单通道图像中各检测区域的豹纹斑特征指数之前，还包括：若检测到所述检测区域中存在目标检测区域且所述目标检测区域面积大于预设阈值，则对所述检测区域内的目标检测区域进行填充处理；所述目标检测区域中的图像为非眼底部分对应的图像。7.根据权利要求6所述的方法，其特征在于，所述对所述检测区域内的目标检测区域进行填充处理，包括：以所述单通道图像中眼底区域的边界为对称轴，将所述单通道图像的眼底区域进行镜像处理，得到镜像眼底；将所述镜像眼底中覆盖所述目标检测区域的部分，填充至所述目标检测区域；和/或，对所述检测区域中的眼底部分进行放大，以使检测区域的眼底部分能够填充所述目标检测区域。8.根据权利要求1所述的方法，其特征在于，还包括：根据所述单通道图像对应的深度和所述豹纹斑在所述单通道图像对应的深度下的分布情况，生成三维可视化图像；所述三维可视化图像包括三维豹纹斑分布图。9.一种近视眼底改变评估装置，其特征在于，包括：获取模块，用于获取眼底图像在设定的光波波段下对应的单通道图像；其中，不同光波波段对应的单通道图像，表示眼底在不同深度下的眼底结构图像；所述眼底图像中分布有豹纹斑；确定模块，用于确定所述豹纹斑在所述单通道图像中的分布情况，将所述豹纹斑在所述单通道图像中的分布情况，确定为所述豹纹斑在所述单通道图像对应的深度下的分布情况。10.一种电子设备，其特征在于，包括：存储器和处理器；其中，所述存储器用于存储程序；所述处理器，用于通过运行所述存储器中的程序，实现如权利要求1至8中任意一项所述的方法。
说明书desc
技术领域本申请涉及图像处理技术领域，尤其涉及一种近视眼底改变评估方法、装置和电子设备。背景技术眼底豹纹斑常见于近视眼患者，如果不能及时干预治疗，豹纹斑眼底最终可能会发展成眼底病理性改变，或诱发黄斑病变，严重影响患者的视力。医护人员可以通过了解豹纹斑在不同眼底深度的分布情况，能够确定患者眼底结构改变程度和眼底损伤程度，进而制定针对性的治疗方式。现有技术中，尚无评估豹纹斑在不同深度的分布的手段或工具，不仅不利于医护人员及患者及时精细了解眼底结构改变或病变的情况及其进展，而且可能会导致一些患者错过最佳干预时机，从而给患者视力带来不可逆损伤乃至失明。因此，如何确定不同深度下豹纹斑的分布情况，是本领域技术人员亟待解决的技术问题。发明内容有鉴于此，本申请提出一种近视眼底改变评估方法、装置和电子设备，该方法能够确定不同深度下豹纹斑的分布，从而辅助医生精细了解近视眼底改变及其进展，有利于提升大家对豹纹斑及近视眼底改变的认识，实现更好的、更全面的了解近视状况和进展的目的，有利于近视全面精准防控及对应的精准防控体系的建立，从而及时发现近视可能导致的病理性眼底改变，及时干预。本申请提出的技术方案具体如下：第一方面，本申请提供了一种近视眼底改变评估方法，包括：获取眼底图像在设定的光波波段下对应的单通道图像；其中，不同光波波段对应的单通道图像，表示所述眼底在不同深度下的眼底结构图像；所述眼底图像中分布有豹纹斑；确定所述豹纹斑在所述单通道图像中的分布情况，将所述豹纹斑在所述单通道图像中的分布情况，确定为所述豹纹斑在所述单通道图像对应的深度下的分布情况。第二方面，本申请提供了一种近视眼底改变评估装置，包括：获取模块，用于获取眼底图像在设定的光波波段下对应的单通道图像；其中，不同光波波段对应的单通道图像，表示所述眼底在不同深度下的眼底结构图像；所述眼底图像中分布有豹纹斑；确定模块，用于确定所述豹纹斑在所述单通道图像中的分布情况，将所述豹纹斑在所述单通道图像中的分布情况，确定为所述豹纹斑在所述单通道图像对应的深度下的分布情况。第三方面，本申请提供了一种电子设备，包括：存储器和处理器；其中，所述存储器用于存储程序；所述处理器，用于通过运行所述存储器中的程序，实现以上任意一项所述的方法。本申请提出的近视眼底改变评估方法，获取分布有豹纹斑的眼底图像在设定的光波波段下对应的单通道图像；其中，不同光波波段对应的单通道图像，表示眼底在不同深度下的眼底结构图像。然后确定豹纹斑在单通道图像中的分布情况，将豹纹斑在单通道图像中的分布情况，确定为豹纹斑在单通道图像对应的深度下的分布情况。如此设置，能够确定不同深度下豹纹斑的分布，更加精细多维的了解眼底豹纹斑的分布情况，提升了不同深度下豹纹斑分布情况评估的准确性，使患者能够精细了解眼底改变或病变情况及进展，有利于近视全面精准防控及对应的精准防控体系的建立，从而及时发现患者可能的病理性改变，及时干预，预防视力损害和失明。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本申请的实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据提供的附图获得其他的附图。图1是本申请实施例提供的一种近视眼底改变评估方法的流程示意图。图2是本申请实施例提供的R通道的单通道图像的示意图。图3是本申请实施例提供的G通道的单通道图像的示意图。图4是本申请实施例提供的B通道的单通道图像的示意图。图5是本申请实施例提供的另一种近视眼底改变评估方法的流程示意图。图6是本申请实施例提供的一种近视眼底改变评估装置的结构示意图。图7是本申请实施例提供的一种电子设备的结构示意图。具体实施方式本申请实施例技术方案适用于检测豹纹斑在眼底不同深度下的分布情况的应用场景，采用本申请实施例技术方案，能够确定不同眼底深度下豹纹斑的分布，实现辅助确定眼底结构改变和眼底损伤程度的目的。示例性的，本申请实施例技术方案可应用于硬件处理器等硬件设备，或包装成软件程序被运行，当硬件处理器执行本申请实施例技术方案的处理过程，或上述软件程序被运行时，可以实现不同眼底深度下豹纹斑分布情况的检测。本申请实施例只对本申请技术方案的具体处理过程进行示例性介绍，并不对本申请技术方案的具体执行形式进行限定，任意形式的可以执行本申请技术方案处理过程的技术实现形式，都可以被本申请实施例所采用。下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整的描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。本申请实施例提出一种近视眼底改变评估方法，该方法可以由电子设备执行，该电子设备可以是任意的具有数据及指令处理功能的设备，例如可以是计算机、智能终端、服务器等。参见图1所示，该方法包括：S101、获取眼底图像在设定的光波波段下对应的单通道图像。眼底是眼球后部组织的统称，包括视盘、黄斑、血管等结构，通过眼底照相机对眼底进行拍照所获取的图像叫做眼底图像。通过眼底图像，医生能够看清眼底的组织结构，分析是否存在异常，最后根据筛查与诊断结果给出具体的治疗方案。其中，待处理眼底图像可以为45°眼底图像，也可以为60°眼底图像或者广角眼底图像或其他视场角的眼底图像，甚至其他模态的眼底图像，眼底图像可以以视盘为中心拍摄，也可以以黄斑中心为中心拍摄或其他眼位的图像，本实施例不做限定。本申请的实施例中，先获取眼底图像，并且可以在获取到眼底图像后，对眼底图像进行预处理操作，以便于在后续的步骤中，能够更加准确地确定眼底特征。预处理操作包括感兴趣区域提取操作、去噪处理操作、归一化处理操作和增强处理操作中的至少一种。感兴趣区域提取即提取眼底图像中的有效区域，去除背景等无效区域，减少非眼底区域的干扰。可以首先将彩色的眼底图像进行通道分离，其中背景区域在红色通道呈现暗色，利用阈值分割方法对红色通道图像进行分割，利用暗色区域的平均灰度值以及暗色区域的面积占比来获得ROI候选区域，之后利用图像的形态学特征和位置特征对ROI候选区域进行筛选，获得最终的ROI区域。去噪处理操作是为了减少拍摄和相机成像过程中噪声干扰，通过低通滤波法实现，将图像从空间域转为频率域，去除低频部分，从而达到去燥的目的。归一化处理操作通过均值校准，将每一幅图像的颜色、亮度、尺寸都调整到统一的范围，从而降低图像间的差异性，减少亮度和颜色的偏差。归一化处理操作包括其中亮度归一化和尺寸归一化。其中亮度归一化是将颜色空间转换至LAB空间，通过对LAB空间进行均值校准后，再转回RGB空间，从而实现亮度归一化。尺寸归一化是将图像进行尺寸归一化至384×384。增强处理操作是在ROI区域内，使用限制对比度的自适应直方图均衡算法对图像进行增强处理，该算法将图像分成不同小块，在各小块上进行灰度限制的增强处理，并在相邻小块之间做灰度插值，以消除小块边界之间的灰度差异。示例性的，可以先进行去噪处理操作，得到去噪后的眼底图像，然后对去噪后的眼底图像进行归一化处理操作，得到归一化后的眼底图像，然后对归一化后的眼底图像进行增强处理操作，得到增强后的眼底图像。也可以只对眼底图像进行去噪处理操作，或者归一化处理操作，或者增强处理操作，即以上几种预处理操作可以根据实际需求进行选择，本申请不做具体限定。进一步地，在对眼底图像的预处理完成后，可以获取眼底图像在设定的光波波段下，对应的单通道图像。其中，不同波段的光波能够辐射的深度不同，因此，在对眼底进行拍照时，不同波段光波成的像，对应眼底在不同深度下的眼底结构图像。例如，波长为630-780nm左右的光为红光，其能够辐射到的眼底深度为700um左右，波长为630-780nm左右的光波对应眼底在700um左右深度的眼底结构图像。又例如，波长为500-570nm左右的光为绿光，其能够辐射到的眼底深度为500um左右，波长为500-570nm左右的光波对应眼底在500um左右深度的眼底结构图像。又例如，波长为420-470nm左右的光为蓝光，其能够辐射到的眼底深度为300um左右，波长为420-470nm左右的光波对应眼底在300um左右深度的眼底结构图像。一些实施例中，眼底图像可以包括RGB三通道彩色图像，也包括两通道伪彩图像，以及大于三通道的多光谱图像。可以按照深度要求设定匹配的光波波段，获取眼底图像在该设定的光波波段下的单通道图像。在一个具体的实施例中，眼底图像为RGB三通道彩色图像，获取眼底图像中R通道的单通道图像作为眼底深度为700um左右时的眼底结构图像，如图2所示；获取眼底图像中G通道的单通道图像作为眼底深度为500um左右时的眼底结构图像，如图3所示；获取眼底图像中B通道的单通道图像作为眼底深度为300um左右时的眼底结构图像，如图4所示。视网膜色素上皮层色素减少，脉络膜萎缩，其小血管网消失，脉络膜大血管可以透见，眼底显现出红褐色相间的粗大条纹状，临床上称之为豹纹斑。正常人眼底是没有豹纹斑的，豹纹斑常见于近视人群眼底。在一个具体的实施例中，可以先检测眼底图像中是否存在豹纹斑，如果检测到眼底图像中不存在豹纹斑，则不需要确定豹纹斑在不同眼底深度的分布情况。如果检测到眼底图像中存在豹纹斑，则进一步确定豹纹斑在不同眼底深度的分布情况，以便于根据豹纹斑在眼底不同深度的分布情况，确定眼底的损伤情况以及眼底结构精细改变情况。示例性的，可以由医护人员通过经验检测眼底图像中是否存在豹纹斑，还可以通过训练分类模型检测眼底图像中是否存在豹纹斑，本实施例不做限定，本申请的实施例中的眼底图像中，为分布有豹纹斑的眼底图像。S102、确定豹纹斑在单通道图像中的分布情况，将豹纹斑在单通道图像中的分布情况，确定为豹纹斑在单通道图像对应的深度下的分布情况。基于上述步骤中获取的眼底图像在设定的光波波段下对应的单通道图像，确定豹纹斑在单通道图像中的分布情况。从而帮助医生更好地观察近视患者眼底改变的情况，精细的了解其进展，更好开展近视随诊和防控，及时预防近视引发的眼底病理性改变导致的视力损害。具体的，可以针对每个单通道图像分割提取豹纹斑特征，确定豹纹斑区域的位置。一些实施例中，可以通过训练豹纹斑特征提取模型，确定单通道图像中豹纹斑的位置。示例性的，可以获取多种光波波段对应的单通道图像作为训练样本，标注训练样本中豹纹斑区域的位置作为训练标签。在训练过程中，将训练样本输入到豹纹斑特征提取模型中，得到豹纹斑特征提取模型输出的预测结果，比对豹纹斑特征提取模型输出的预测结果和训练标签，确定豹纹斑特征提取模型的损失值，以减小豹纹斑特征提取模型的损失值为目标，对豹纹斑特征提取模型的参数进行调整，然后重复上述训练过程，直至豹纹斑特征提取模型的损失值小于设定值。其中，该设定值可以根据实际情况进行设置，本实施例不做限定。豹纹斑特征提取模型可以采用卷积神经网络模型作为基础模型，本实施例不做限定。豹纹斑特征提取模型训练完成后，可以将各个单通道图像均分别输入到豹纹斑特征提取模型中，得到豹纹斑特征提取模型输出的各个单通道图像中豹纹斑的位置。确定单通道图像中豹纹斑的位置后，可以确定豹纹斑在单通道图像中的分布情况。一些实施例中，可以在确定豹纹斑的位置后，在单通道图像中将豹纹斑的位置标示出来并输出，例如，利用框线标注豹纹斑的边界位置，或者采用设定的颜色填充豹纹斑的区域，以展示豹纹斑在单通道图像中的分布情况。其中，豹纹斑在单通道图像中的分布情况，确定为豹纹斑在单通道图像对应的深度下的分布情况。例如，若眼底图像为RGB三通道彩色图像，获取眼底图像中R通道的单通道图像，确定R通道的单通道图像中豹纹斑的分布情况为眼底深度在700um左右时的豹纹斑的分布情况。获取眼底图像中G通道的单通道图像，确定G通道的单通道图像中豹纹斑的分布情况为眼底深度在500um左右时的豹纹斑的分布情况。获取眼底图像中B通道的单通道图像，确定B通道的单通道图像中豹纹斑的分布情况为眼底深度在300um左右时的豹纹斑的分布情况。一些实施例中，在确定设定的光波波段对应的单通道图像中豹纹斑的分布情况后，还可以通过插值法，确定设定的光波波段之间的光波波段对应的单通道图像中，豹纹斑的分布情况。可以每隔预设波段值进行一次插值，利用插值法确定插值得到的光波波段对应的豹纹斑的分布情况。预设波段值可以根据实际情况进行设置，本实施例不做限定。示例性的，若预设波段值为50nm，则可以每隔50nm进行一次插值，比如500nm到700nm之前每隔50nm进行一次光波波段的插值，利用插值法计算插值得到的光波波段对应的单通道图像中豹纹斑的分布情况。在一个具体的实施例中，若医生或者患者想要了解在某一个或者多个特定的眼底深度下豹纹斑的分布情况，可以确定该特定深度对应的光波波段，以便于获取眼底图像在该光波波段下对应的单通道图像，确定豹纹斑在该单通道图像中的分布情况，作为该特定深度下豹纹斑的分布情况。在另一个具体的实施例中，可以按照设定的通道分割标准，获取设定的光波波段对应的单通道图像，并确定豹纹斑在设定的各光波波段对应的单通道图像中的分布情况。患者或者医生根据深度需求，从设定的各光波波段对应的单通道图像中，选择了解所需深度对应的单通道眼底图像中，豹纹斑的分布情况即可。例如，患者或者医生若需要了解眼底在700um处的豹纹斑分布，则需要根据R通道的单通道图像确定。以上实施例中，能够获取分布有豹纹斑的眼底图像在设定的光波波段下对应的单通道图像；其中，不同光波波段对应的单通道图像，表示眼底在不同深度下的眼底结构图像。然后确定豹纹斑在单通道图像中的分布情况，将豹纹斑在单通道图像中的分布情况，确定为豹纹斑在单通道图像对应的深度下的分布情况。如此设置，能够确定不同深度下豹纹斑的分布，解决在评估不同深度下豹纹斑的分布时受限于医护人员的个人的主观经验的问题。而且，采用本申请的实施例中的技术方案，不必再利用昂贵的测量设备，例如光学相干断层扫描设备，测量脉络膜厚度，进而推算豹纹斑的深度。本申请实施例的技术方案，在基层容易普及，有利于广大人群普筛。作为一种可选的实现方式，在本申请另一实施例中公开了，以上实施例的步骤确定豹纹斑在单通道图像中的分布情况，具体可以包括如下步骤：确定单通道图像中各检测区域的豹纹斑特征指数；根据单通道图像中各检测区域的豹纹斑特征指数，确定单通道图像的豹纹斑特征图。其中，单通道图像中包括多个检测区域，检测区域至少包括一个像素面积。也就是说，检测区域的大小为一个像素面积或者多个像素面积，可以根据实际情况进行设置，本实施例不做限定。豹纹斑特征指数包括豹纹斑面积、豹纹斑密度、豹纹斑占比和豹纹斑形态参数中的至少一种。也就是说，可以计算单通道图像中各检测区域的豹纹斑面积、豹纹斑密度、豹纹斑占比和豹纹斑形态参数中的至少一种参数，作为单通道图像中各检测区域的豹纹斑特征指数，以便于以单通道图像中各检测区域的豹纹斑特征指数为基础，确定单通道图像的豹纹斑特征图。其中，任一检测区域的豹纹斑密度，指的是该检测区域中豹纹斑的面积与该检测区域的面积比值；任一检测区域的豹纹斑占比指的是该检测区中豹纹斑的面积与单通道图像中所有豹纹斑总面积的比值。豹纹斑形态参数指的是根据豹纹斑在图像中表现出的形态确定的参数，豹纹斑在图像中表现出的形态包括豹纹斑的形状、弯曲度、面积、密度、宽度、分形维数、紧密度、交叉程度、分叉程度中的至少一种，在一些实施例中，豹纹斑形态参数与形状、弯曲度、面积、密度、宽度、分形维数、紧密度、交叉程度、分叉程度成正比，也就是说，豹纹斑的形状、弯曲度、面积、密度、宽度、分形维数、紧密度、交叉程度、分叉程度越高，豹纹斑形态参数越大。其中，豹纹斑的紧密度根据区域轮廓线长度，和区域内的实际面积确定。本领域技术人员可根据实际应用灵活调整豹纹斑形态参数的参考特征。可以预先训练豹纹斑形态提取模型，以便于将单通道图像输入到豹纹斑形态提取模型中，以使豹纹斑形态提取模型输出的豹纹斑的形状、弯曲度、面积、密度、宽度、分形维数、紧密度、交叉程度、分叉程度中的至少一种。然后根据豹纹斑的形状、弯曲度、面积、密度、宽度、分形维数、紧密度、交叉程度、分叉程度中的至少一种确定豹纹斑形态参数。示例性地，可以获取大量的单通道图像作为训练样本，标记各单通道图像中豹纹斑的形状、弯曲度、面积、密度、宽度、分形维数、紧密度、交叉程度、分叉程度中的至少一种作为训练标签。豹纹斑形态提取模型的训练过程与以上实施例的豹纹斑特征提取模型的训练过程相同，豹纹斑形态提取模型的具体训练过程参照以上实施例的记载即可，此处不做赘述。豹纹斑形态提取模型可以采用卷积神经网络模型作为基础模型，本实施例不做限定。一些实施例中，豹纹斑形态参数是根据豹纹斑的面积、密度、宽度、分形维数、紧密度确定的。可以将单通道图像输入到豹纹斑形态提取模型中，以使豹纹斑形态提取模型输出的豹纹斑的面积、密度、宽度、分形维数、紧密度，根据豹纹斑的面积、密度、宽度、分形维数、紧密度的组合，作为豹纹斑形态参数。可以根据以上实施例中确定的单通道图像中豹纹斑的位置，确定每个检测区域中的豹纹斑特征指数，进而得到单通道图像的豹纹斑特征图，以便于基于单通道图像的豹纹斑特征图，显示该单通道图像对应的深度下，豹纹斑的分布情况。以上实施例中，能够通过豹纹斑特征图的形式展示豹纹斑在单通道图像中的分布情况，如此展示能够把单通道图像中的豹纹斑的分布量化，更加直观易理解。进一步的，通过计算量化眼底图像中的豹纹斑特征指数，可以映射眼轴、屈光度等眼生物学参数，为后续医生临床诊断、手术、验光师验配等提供参考依据。作为一种可选的实现方式，在本申请另一实施例中公开了，以上实施例的步骤确定单通道图像中各检测区域的豹纹斑特征指数，具体可以包括如下步骤：确定单通道图像中豹纹斑的分布区域；根据单通道图像中豹纹斑的分布区域，计算各检测区域中豹纹斑的面积与检测区域的面积的面积比值，作为各检测区域的豹纹斑密度；和/或，计算各检测区域中豹纹斑的面积与单通道图像中豹纹斑的面积的面积比值，作为各检测区域的豹纹斑占比。具体的，可以先确定单通道图像中豹纹斑分布区域的具体位置，而确定单通道图像中豹纹斑分布区域的具体位置的方式可以参照以上实施例的记载，此处不做赘述。进一步的，若要计算各检测区域的豹纹斑密度，则需要计算检测区域中豹纹斑的面积与检测区域面积的比值；若要计算各检测区域的豹纹斑占比，则需要计算检测区域中豹纹斑的面积与ROI区域中所有豹纹斑面积的比值。以上实施例中，能够确定各检测区域的豹纹斑密度，和/或，各检测区域的豹纹斑占比，以使相关人员能够进一步了解在单通道图像中豹纹斑的分布情况，以便于确定在不同眼底深度下的豹纹斑分布情况。在一个具体的实施例中，病患或者医护人员会根据需求，查看不同位置的豹纹斑特征指数。因此，本申请的实施例中，可以确定所需查看的位置为检测区域，计算单通道图像在所需查看位置处的豹纹斑特征指数。可以根据查看需求，从各单通道图像中确定豹纹斑特征指数的计算范围，即选取豹纹斑特征指数的计算窗口，窗口形状、大小可根据临床需要灵活选择，例如可以是3×3的方形，也可以是直径为5的圆形等。一些实施例中，窗口大小根据视盘直径设置，通常窗口大小为1PD-2PD之间。进一步地，可以计算单通道图像在上述窗口对应的位置的豹纹斑特征指数并输出。单通道图像在上述窗口对应的位置的豹纹斑特征指数，包括豹纹斑面积、豹纹斑密度、豹纹斑占比以及豹纹斑形态等参数中的至少一种或组合。若要查看豹纹斑面积，则输出窗口中豹纹斑面积即可，若要查看豹纹斑密度，则需要计算窗口中豹纹斑的面积与窗口面积的比值并输出，若要查看豹纹斑占比，则需要计算窗口中豹纹斑的面积与ROI区域中所有豹纹斑面积的比值并输出。在一个具体的实施例中，可以滑动上述窗口，计算各个窗口即计算各个检测区域的豹纹斑特征指数，并将各个检测区域的豹纹斑特征指数显示于该检测区域处，直至检测区域能够遍历整个单通道眼底图像。例如，若单通道图像是一个1000*1000像素构成的圆形区域，检测区域为3×3像素构成的方形区域，那么这个方形区域中的数字就是豹纹斑特征指数对应的数值。示例性地，眼底图像的ROI区域为圆形区域，当检测区域覆盖圆形区域的边界时，检测区域中可能会包含一部分ROI区域外的非眼底部分，导致豹纹斑特征指数计算不准确。在另一些实施方式中，眼底图像的ROI区域也可以为多边形、不规则形状等均可。为了解决上述问题，本申请的实施例中，若检测到检测区域中存在目标检测区域，且目标检测区域大于预设阈值，则在以上实施例的步骤确定单通道图像中各检测区域的豹纹斑特征指数之前，执行如下步骤：对检测区域内的目标检测区域进行填充处理；其中，目标检测区域中的图像为非眼底部分对应的图像。具体的，目标检测区域中的图像为非眼底部分对应的图像，可以对目标检测区域进行填充处理以调整目标检测区域的豹纹斑特征指数的实际数值。示例性的，预设阈值可以为检测区域面积的0-50%。例如，若预设阈值为10%，当目标检测区域的面积为检测区域面积的20%时，此时需要对目标检测区域进行填充处理。基于上述方式，当检测区域覆盖圆形区域的边界时，能够对该检测区域进行填充处理，以提高豹纹斑特征指数的计算精度。在一个具体的实施例中，以上实施例的步骤对检测区域内的目标检测区域进行填充处理，具体可以包括如下步骤：以单通道图像中眼底区域的边界为对称轴，将单通道图像的眼底区域进行镜像处理，得到镜像眼底；将镜像眼底中覆盖目标检测区域的部分，填充至目标检测区域；和/或，对目标检测区域中的眼底部分进行放大，以使目标检测区域的眼底部分填充目标检测区域。一些实施例中，可以以ROI区域的边界为对称轴，也就是以眼底区域的边界为对称轴，将单通道图像进行镜像处理，得到镜像眼底。将镜像眼底中覆盖目标检测区域的非眼底的部分，直接填充至检测区域中相应的目标检测区域部分，得到新的检测区域，在新的检测区域的基础上，计算该检测区域以及其他检测区域中的豹纹斑特征指数。一些实施例中，还可以对检测区域的眼底部分进行放大，也就是对检测区域中非目标检测区域的部分进行放大，以使目标检测区域的眼底部分填充整个目标检测区域，得到新的检测区域，在新的检测区域的基础上，计算该检测区域以及其他检测区域中豹纹斑的密度。基于上述方式，当检测区域覆盖圆形区域的边界时，能够对该检测区域进行调整，以提高豹纹斑特征指数的计算精度。同理应用上述方式能够适应任意形状的ROI区域边界的计算，即使ROI区域为不规则形状时，应用本申请的填充处理仍能保证ROI区域边缘的豹纹斑特征指数准确。作为一种可选的实现方式，在本申请另一实施例中公开了，以上实施例的步骤根据单通道图像中各检测区域的豹纹斑特征指数，确定单通道图像的豹纹斑特征图，具体可以包括如下步骤：以单通道图像中的各检测区域的豹纹斑特征指数为基础生成单通道图像对应的可视化图像，确定可视化图像为单通道图像的豹纹斑特征图。具体的，本实施例中可以以单通道图像中的各检测区域的豹纹斑特征指数为基础生成参数，生成各种可视化图像，确定可视化图像为单通道图像的豹纹斑特征图，以使相关人员能够根据可视化图像直观的了解豹纹斑在不同深度的分布情况，一些实施例中，可视化图像包括热力图和/或灰度图。具体的，可以将单通道图像中的各检测区域的豹纹斑特征指数作为灰度值，将得到的灰度图作为单通道图像的豹纹斑特征图。其中，豹纹斑特征指数越大的检测区域，在灰度图中显示的颜色越深，没有豹纹斑的地方豹纹斑特征指数为零，在灰度图中显示为白色。基于灰度图，相关人员可以更加清晰、直观地确定目标眼底深度下，豹纹斑的分布情况和密集程度。具体的，可以将单通道图像中的各检测区域的豹纹斑特征指数作为热力值映射到热力图的颜色空间，将得到的热力图作为单通道图像的豹纹斑特征图。需要说明的是，在热力图中，蓝紫色代表豹纹斑特征指数小，对应豹纹斑面积、豹纹斑密度即豹纹斑占比越小，绿色代表豹纹斑特征指数中等，红色代表豹纹斑特征指数高，对应豹纹斑面积、豹纹斑密度即豹纹斑占比越高。热力图使得豹纹斑密度更加直观可视化。基于热力图，相关人员可以更加清晰、直观地确定目标眼底深度下，豹纹斑的分布情况和密集程度。作为一种可选的实现方式，在本申请另一实施例中公开了，以上实施例的近视眼底改变评估方法，具体可以包括如下步骤：确定单通道图像中萎缩斑所在的区域；在可视化图像中对萎缩斑所在的区域进行特殊化处理。眼底病变的原理为先出现豹纹斑，豹纹斑严重到一定程度后豹纹斑消失开始出现萎缩斑。出现萎缩斑时，眼底损伤的严重程度大于出现豹纹斑时的眼底损伤程度。具体的，本实施例中，可以针对每个单通道图像分割提取萎缩斑特征，确定萎缩斑区域的位置。一些实施例中，可以通过训练萎缩斑特征提取模型，用于确定单通道图像中萎缩斑的位置。示例性的，可以获取多种光波波段对应的单通道图像作为训练样本，标注训练样本中萎缩斑区域的位置作为训练标签。萎缩斑特征提取模型的训练过程与以上实施例的豹纹斑特征提取模型的训练过程相同，萎缩斑特征提取模型的具体训练过程参照以上实施例的记载即可，此处不做赘述。萎缩斑特征提取模型可以采用卷积神经网络模型作为基础模型，本实施例不做限定。萎缩斑特征提取模型训练完成后，可以将各个单通道图像均分别输入到萎缩斑特征提取模型中，得到萎缩斑特征提取模型输出的各个单通道图像中萎缩斑的位置。根据同一单通道图像确定的萎缩斑位置和可视化图像，确定该可视化图像中萎缩斑所在的区域，在该可视化图像中萎缩斑所在的区域中标注出萎缩斑的位置。其中，为了能够凸显萎缩斑的位置，可以对萎缩斑所在的区域进行特殊化处理。对萎缩斑所在的区域进行特殊化处理指的是采用与可视化图像中未出现过的标注方式标注出萎缩斑的位置。例如，若可视化图像为热力图，对萎缩斑所在的区域进行特殊化处理可以是以设定颜色标注萎缩斑所在的区域，其中，设定颜色为热力图中未出现的颜色。为了表示出出现萎缩斑时，眼底损伤的严重程度大于出现豹纹斑时的眼底损伤程度，可以设置设定颜色为比热力图中原有红色更深的红色。以上实施例中，基于可视化图像，相关人员可以更加清晰、直观的确定目标眼底深度下，豹纹斑的分布情况和密集程度，同时还能够确定眼底结够改变或眼底损伤的严重程度，便于增强对豹纹斑及近视眼底改变的认识，实现更好的、更全面的了解近视状况和进展的目的，有利于近视全面精准防控及对应的精准防控体系的建立，及时发现眼底病理性改变导致视力损害。作为一种可选的实现方式，在本申请另一实施例中公开了，以上实施例的近视眼底改变评估方法，具体可以包括如下步骤：根据单通道图像对应的深度和豹纹斑在单通道图像对应的深度下的分布情况，生成等高线豹纹斑分布图。本步骤中，可以基于以上实施例的步骤确定的各单通道图像中豹纹斑区域的位置，确定各单通道图像中豹纹斑区域边缘框线。基于各单通道图像中豹纹斑区域边缘框线，以及各单通道图像对应的深度，生成等高线豹纹斑分布图。等高线豹纹斑分布图中，能够清晰地指示豹纹斑区域边缘框线，以及豹纹斑区域边缘框线对应的眼底深度。以上实施例中，通过生成等高线豹纹斑分布图，能够更加直观地展示在不同深度下豹纹斑区域的分布情况，便于提升大家对豹纹斑及近视眼底改变的认识，实现更好的、更全面的了解近视状况和进展的目的，有利于近视全面精准防控及对应的精准防控体系的建立。作为一种可选的实现方式，如图5所示，在本申请另一实施例中公开了，以上实施例的近视眼底改变评估方法，具体可以包括如下步骤：S501、获取眼底图像在设定的光波波段下对应的单通道图像。S502、确定豹纹斑在单通道图像中的分布情况，将豹纹斑在单通道图像中的分布情况，确定为豹纹斑在单通道图像对应的深度下的分布情况。其中，上述步骤S501-S502与以上实施例的步骤S101-S102相同，本领域的技术人员参照以上实施例的记载即可，此处不做赘述。S503、根据单通道图像对应的深度和豹纹斑在单通道图像对应的深度下的分布情况，生成三维可视化图像。可以根据以上实施例确定的豹纹斑在各单通道图像中的分布情况，以及，各单通道图像对应的眼底深度，生成三维可视化图像，其中，三维可视化图像包括三维豹纹斑分布图。其中，三维豹纹斑分布图包括三维豹纹斑密度分布图、三维豹纹斑占比分布图等。一些实施例中，可以利用3dslicer等软件根据豹纹斑在各单通道图像中的密度，以及，各单通道图像对应的眼底深度，生成三维豹纹斑密度分布图；利用3dslicer等软件根据豹纹斑在各单通道图像中的占比，以及，各单通道图像对应的眼底深度，生成三维豹纹斑占比分布图，本实施例不做限定。需要说明的是，三维可视化图像中，豹纹斑密度或者豹纹斑占比越大的区域，对应豹纹斑在眼底中的深度越大，该区域对应的三维图像更凹陷。进一步地，可以在生成三维可视化图像时，采用不同的颜色展示不同深度对应的豹纹斑密度或者不同深度对应的豹纹斑占比，例如蓝紫色代表豹纹斑密度或者豹纹斑占比低，绿色代表豹纹斑密度或者豹纹斑占比中等，红色代表豹纹斑密度或者豹纹斑占比高等。此外，可根据需求选取不同通道密度图进行彩色叠加显示，或生成伪彩图像，也可查看各位置切面的密度分布等，本实施例不做限定。以上实施例生成的三维可视化图像进行了更加清晰的眼底结构解释，便于医务人员根据三维可视化图像进行诊断，辅助临床决策。其作为临床诊断的依据，能够减少误诊，同时能够辅助缺乏基础医学知识的人们了解眼底病变结构和眼底结构改变，提高对近视进展进程的认识，从而有利于近视防控的完善。与上述近视眼底改变评估方法相对应的，本申请实施例还公开了一种近视眼底改变评估装置，参见图6所示，该装置包括：获取模块100，用于获取眼底图像在设定的光波波段下对应的单通道图像；其中，不同光波波段对应的单通道图像，表示眼底在不同深度下的眼底结构图像；眼底图像中分布有豹纹斑；确定模块110，用于确定豹纹斑在单通道图像中的分布情况，将豹纹斑在单通道图像中的分布情况，确定为豹纹斑在单通道图像对应的深度下的分布情况。作为一种可选的实现方式，在本申请另一实施例中公开了，以上实施例的确定模块110，在确定豹纹斑在单通道图像中的分布情况时，具体用于：确定单通道图像中各检测区域的豹纹斑特征指数；其中，单通道图像中包括多个检测区域，检测区域至少包括一个像素面积；豹纹斑特征指数包括豹纹斑面积、豹纹斑密度、豹纹斑占比和豹纹斑形态参数中的至少一种；根据单通道图像中各检测区域的豹纹斑特征指数，确定单通道图像的豹纹斑特征图。作为一种可选的实现方式，在本申请另一实施例中公开了，以上实施例的确定模块110，在确定单通道图像中各检测区域的豹纹斑特征指数时，具体用于：确定单通道图像中豹纹斑的分布区域；根据单通道图像中豹纹斑的分布区域，计算各检测区域中豹纹斑的面积与检测区域的面积的面积比值，作为各检测区域的豹纹斑密度；和/或，计算各检测区域中豹纹斑的面积与单通道图像中豹纹斑的面积的面积比值，作为各检测区域的豹纹斑占比。作为一种可选的实现方式，在本申请另一实施例中公开了，以上实施例的确定模块110，在根据单通道图像中各检测区域的豹纹斑特征指数，确定单通道图像的豹纹斑特征图时，具体用于：以单通道图像中的各检测区域的豹纹斑特征指数为基础生成单通道图像对应的可视化图像，确定可视化图像为单通道图像的豹纹斑特征图；可视化图像包括热力图和/或灰度图。作为一种可选的实现方式，在本申请另一实施例中公开了，以上实施例的近视眼底改变评估装置，还包括：萎缩斑区域确定模块，用于确定单通道图像中萎缩斑所在的区域；在可视化图像中对萎缩斑所在的区域进行特殊化处理。作为一种可选的实现方式，在本申请另一实施例中公开了，以上实施例的近视眼底改变评估装置，还包括：填充模块，用于若检测到检测区域中存在目标检测区域且目标检测区域面积大于预设阈值，则对检测区域内的目标检测区域进行填充处理；目标检测区域中的图像为非眼底部分对应的图像。作为一种可选的实现方式，在本申请另一实施例中公开了，以上实施例填充模块，在对检测区域内的目标检测区域进行填充处理时，具体用于：以单通道图像中眼底区域的边界为对称轴，将单通道图像的眼底区域进行镜像处理，得到镜像眼底；将镜像眼底中覆盖目标检测区域的部分，填充至目标检测区域；和/或，对检测区域中的眼底部分进行放大，以使检测区域的眼底部分填充目标检测区域。作为一种可选的实现方式，在本申请另一实施例中公开了，以上实施例的近视眼底改变评估装置，还包括：生成模块，用于根据单通道图像对应的深度和豹纹斑在单通道图像对应的深度下的分布情况，生成三维可视化图像；三维可视化图像包括三维豹纹斑分布图。具体地，上述的近视眼底改变评估装置的各个单元的具体工作内容，请参见上述方法实施例的内容，此处不再赘述。本申请实施例还提出一种控制装置，该控制装置包括处理器和接口电路，该控制装置中的处理器通过该控制装置的接口电路与输入输出组件连接。该输入输出组件，具体是指能够使用户输入信息以及输出信息给用户的硬件组件，例如可以是麦克风、键盘、手写板，触控屏、显示器、音响、打印机等。上述的接口电路可以是任意的能够实现数据通信功能的接口电路，例如可以是USB接口电路、Type-C接口电路、串口电路、PCIE电路等。该控制装置中的处理器是具有信号处理能力的电路，能够执行上述实施例中所介绍的任意一种近视眼底改变评估方法。当该控制装置应用于具有人机交互功能的设备时，该控制装置的输入输出组件可以是设备上输入组件和输出组件，例如麦克风、键盘、手写板，触控屏、显示器、音频播放器等，同时，该控制装置的处理器可以是设备自带的CPU或GPU等，该控制装置的接口电路可以是该设备的信息输入组件与CPU或GPU等处理器之间的接口电路。与上述近视眼底改变评估方法相对应的，本申请实施例还公开了一种电子设备，参见图7所示，该电子设备包括：存储器200和处理器210；其中，存储器200与处理器210连接，用于存储程序；处理器210，用于通过运行存储器200中存储的程序，实现上述任一实施例公开的近视眼底改变评估方法。具体地，上述电子设备还可以包括：总线、通信接口220、输入设备230和输出设备240。处理器210、存储器200、通信接口220、输入设备230和输出设备240通过总线相互连接。其中：总线可包括一通路，在计算机系统各个部件之间传送信息。处理器210可以是通用处理器，例如通用中央处理器、微处理器等，也可以是特定应用集成电路，或一个或多个用于控制本申请方案程序执行的集成电路。还可以是数字信号处理器、专用集成电路、现成可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。处理器210可包括主处理器，还可包括基带芯片、调制解调器等。存储器200中保存有执行本申请技术方案的程序，还可以保存有操作系统和其他关键业务。具体地，程序可以包括程序代码，程序代码包括计算机操作指令。更具体的，存储器200可以包括只读存储器、可存储静态信息和指令的其他类型的静态存储设备、随机存取存储器、可存储信息和指令的其他类型的动态存储设备、磁盘存储器、flash等等。输入设备230可包括接收用户输入的数据和信息的装置，例如键盘、鼠标、摄像头、扫描仪、光笔、语音输入装置、触摸屏、计步器或重力感应器等。输出设备240可包括允许输出信息给用户的装置，例如显示屏、打印机、扬声器等。通信接口220可包括使用任何收发器一类的装置，以便与其他设备或通信网络通信，如以太网，无线接入网，无线局域网等。处理器210执行存储器200中所存放的程序，以及调用其他设备，可用于实现本申请上述实施例所提供的近视眼底改变评估方法的各个步骤。除了上述方法和设备以外，本申请的实施例还可以是计算机程序产品，其包括计算机程序指令，计算机程序指令在被处理器运行时使得处理器执行上述实施例所提供的近视眼底改变评估方法的各个步骤。计算机程序产品可以以一种或多种程序设计语言的任意组合来编写用于执行本申请实施例操作的程序代码，程序设计语言包括面向对象的程序设计语言，诸如Java、C++等，还包括常规的过程式程序设计语言，诸如“C”语言或类似的程序设计语言。程序代码可以完全地在用户计算设备上执行、部分地在用户设备上执行、作为一个独立的软件包执行、部分在用户计算设备上部分在远程计算设备上执行，或者完全在远程计算设备或服务器上执行。此外，本申请的实施例还可以是计算机可读存储介质，其上存储有计算机程序指令，计算机程序指令在被处理器运行时使得处理器执行上述实施例所提供的近视眼底改变评估方法的各个步骤。所述计算机可读存储介质可以采用一个或多个可读介质的任意组合。可读介质可以是可读信号介质或者可读存储介质。可读存储介质例如可以包括但不限于电、磁、光、电磁、红外线，或半导体的系统、装置或器件，或者任意以上的组合。可读存储介质的更具体的例子包括：具有一个或多个导线的电连接、便携式盘、硬盘、随机存取存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑盘只读存储器、光存储器件、磁存储器件，或者上述的任意合适的组合。对于前述的各方法实施例，为了简单描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本申请并不受所描述的动作顺序的限制，因为依据本申请，某些步骤可以采用其他顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于优选实施例，所涉及的动作和模块并不一定是本申请所必需的。需要说明的是，本说明书中的各个实施例均采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似的部分互相参见即可。对于装置类实施例而言，由于其与方法实施例基本相似，所以描述得比较简单，相关之处参见方法实施例的部分说明即可。本申请各实施例方法中的步骤可以根据实际需要进行顺序调整、合并和删减，各实施例中记载的技术特征可以进行替换或者组合。本申请各实施例中装置及终端中的模块和子模块可以根据实际需要进行合并、划分和删减。本申请所提供的几个实施例中，应该理解到，所揭露的终端，装置和方法，可以通过其他的方式实现。例如，以上所描述的终端实施例仅仅是示意性的，例如，模块或子模块的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个子模块或模块可以结合或者可以集成到另一个模块，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或模块的间接耦合或通信连接，可以是电性，机械或其他的形式。作为分离部件说明的模块或子模块可以是或者也可以不是物理上分开的，作为模块或子模块的部件可以是或者也可以不是物理模块或子模块，即可以位于一个地方，或者也可以分布到多个网络模块或子模块上。可以根据实际的需要选择其中的部分或者全部模块或子模块来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能模块或子模块可以集成在一个处理模块中，也可以是各个模块或子模块单独物理存在，也可以两个或两个以上模块或子模块集成在一个模块中。上述集成的模块或子模块既可以采用硬件的形式实现，也可以采用软件功能模块或子模块的形式实现。专业人员还可以进一步意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、计算机软件或者二者的结合来实现，为了清楚地说明硬件和软件的可互换性，在上述说明中已经按照功能一般性地描述了各示例的组成及步骤。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。结合本文中所公开的实施例描述的方法或算法的步骤可以直接用硬件、处理器执行的软件单元，或者二者的结合来实施。软件单元可以置于随机存储器、内存、只读存储器、电可编程ROM、电可擦除可编程ROM、寄存器、硬盘、可移动磁盘、CD-ROM、或技术领域内所公知的任意其他形式的存储介质中。最后，还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”“包含”或者其任何其他变体意在涵盖非排他性地包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本申请。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本申请的精神或范围的情况下，在其他实施例中实现。因此，本申请将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
