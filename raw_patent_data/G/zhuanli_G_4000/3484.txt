标题title
合页角度的检测方法及相关设备
摘要abst
本申请公开了一种合页角度的检测方法及相关设备，涉及折叠屏技术领域，目的在于准确的计算出合页角度。具体方案应用于可折叠的电子设备，可折叠的电子设备的折叠屏包括第一屏和第二屏，第一屏对应的机体设置有第一陀螺仪传感器和磁传感器，第二屏对应的机体设置有第二陀螺仪传感器和磁铁，磁传感器用于检测磁铁的磁场强度，具体方案为：根据获取到的磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，使用融合算法计算出电子设备的合页角度。由于磁传感器的数据可以弥补使用第一陀螺仪传感器以及第二陀螺仪传感器的数据计算过程中的累积误差，且融合算法的准确度不受公共轴是否垂直于水平面的影响，因此可实现准确计算合页角度。
权利要求书clms
1.一种合页角度的检测方法，其特征在于，应用于可折叠的电子设备，所述可折叠的电子设备的折叠屏包括第一屏和第二屏，所述第一屏对应的机体设置有第一陀螺仪传感器和磁传感器，所述第二屏对应的机体设置有第二陀螺仪传感器和磁铁，所述磁传感器用于检测所述磁铁的磁场强度，所述合页角度的检测方法包括：获取所述磁传感器、所述第一陀螺仪传感器以及所述第二陀螺仪传感器的数据；根据获取到的所述磁传感器、所述第一陀螺仪传感器以及所述第二陀螺仪传感器的数据，使用融合算法计算出所述电子设备的合页角度；所述根据获取到的所述磁传感器、所述第一陀螺仪传感器以及所述第二陀螺仪传感器的数据，使用融合算法计算出所述电子设备的合页角度，包括：根据所述磁传感器采集的磁力数据，确定与所述磁力数据对应的合页角度；根据所述磁力数据对应的合页角度、第一陀螺仪传感器采集的绕公共轴的角速度以及第二陀螺仪传感器采集的绕所述公共轴的角速度，使用融合算法计算出所述电子设备的合页角度。2.一种合页角度的检测方法，其特征在于，应用于可折叠的电子设备，所述可折叠的电子设备的折叠屏包括第一屏和第二屏，所述第一屏对应的机体设置有第一陀螺仪传感器、磁传感器以及第一加速度传感器，所述第二屏对应的机体设置有第二陀螺仪传感器、磁铁以及第二加速度传感器，所述磁传感器用于检测所述磁铁的磁场强度，所述合页角度的检测方法包括：根据所述电子设备的运动状态、以及公共轴与水平面的相对位置，确定出目标算法；其中，所述目标算法，至少包括：融合算法、或者加速度传感器算法；其中所述公共轴为所述折叠屏的折叠边所在的轴线；若确定出的目标算法为所述融合算法，则获取所述磁传感器、所述第一陀螺仪传感器以及所述第二陀螺仪传感器的数据；根据获取到的所述磁传感器、所述第一陀螺仪传感器以及所述第二陀螺仪传感器的数据，使用融合算法计算出所述电子设备的合页角度；所述根据获取到的所述磁传感器、所述第一陀螺仪传感器以及所述第二陀螺仪传感器的数据，使用融合算法计算出所述电子设备的合页角度，包括：根据所述磁传感器采集的磁力数据，确定与所述磁力数据对应的合页角度；根据所述磁力数据对应的合页角度、第一陀螺仪传感器采集的绕公共轴的角速度以及第二陀螺仪传感器采集的绕所述公共轴的角速度，使用融合算法计算出所述电子设备的合页角度。3.根据权利要求2所述的合页角度的检测方法，其特征在于，所述电子设备的运动状态包括：处于静止状态或不处于静止状态；所述公共轴与水平面的相对位置包括：公共轴垂直于水平面或者公共轴不垂直于水平面。4.根据权利要求3所述的合页角度的检测方法，其特征在于，所述电子设备的运动状态的确定方法，包括：若所述电子设备的加速度向量的模长与重力加速度之间的差值小于或等于第一预设值，则确定出所述电子设备的运动状态为静止状态；若所述加速度向量的模长与重力加速度之间的差值大于所述第一预设值，则确定出所述电子设备的运动状态为不处于静止状态。5.根据权利要求3或4所述的合页角度的检测方法，其特征在于，所述公共轴与水平面的相对位置的确定方法，包括：若加速度向量在公共轴上的分量与重力加速度之间的差值小于或等于第一预设值，则确定出所述公共轴垂直于水平面；若所述加速度向量在公共轴上的分量与重力加速度之间的差值大于所述第一预设值，则确定出所述公共轴不垂直于水平面。6.根据权利要求3至5中任一所述的合页角度的检测方法，其特征在于，所述根据所述电子设备的运动状态、以及公共轴与水平面的相对位置，确定出目标算法，包括：若所述电子设备处于静止状态、且公共轴不垂直于水平面，则将加速度传感器算法确定为目标算法；若所述电子设备不处于静止状态，则将所述目标算法确定为融合算法；若所述电子设备处于静止状态、且公共轴垂直于水平面，则将所述目标算法确定为融合算法。7.根据权利要求2至6任一所述的合页角度的检测方法，其特征在于，若确定出的目标算法为所述融合算法，且确定出合页角度发生变化，则获取所述磁传感器、所述第一陀螺仪传感器以及所述第二陀螺仪传感器的数据。8.根据权利要求7所述的合页角度的检测方法，其特征在于，所述确定出合页角度发生变化，包括：若角速度差与零之间的差值大于第二预设值，则确定出合页角度发生变化；其中，所述角速度差为第一陀螺仪传感器绕公共轴的角速度与第二陀螺仪传感器绕所述公共轴的角速度之间的差值。9.根据权利要求2至8任一所述的合页角度的检测方法，其特征在于，还包括：若确定出的目标算法为加速度算法，则使用加速度算法计算所述电子设备的合页角度。10.根据权利要求9所述的合页角度的检测方法，其特征在于，所述使用加速度算法计算所述电子设备的合页角度，包括：根据加速度向量在第一屏坐标系的x1o1z1平面的投影向量，以及加速度向量在第二屏坐标系的x2o2z2平面的投影向量，使用加速度传感器算法计算得到所述电子设备的合页角度；其中，所述加速度向量在第一屏坐标系的x1o1z1平面的投影向量由第一加速度传感器采集得到；所述加速度向量在第二屏坐标系的x2o2z2平面的投影向量由第二加速度传感器采集得到。11.根据权利要求1至10中任一所述的合页角度的检测方法，其特征在于，所述获取所述磁传感器、所述第一陀螺仪传感器以及所述第二陀螺仪传感器的数据，包括：若确定出所述折叠屏不处于闭合状态，则获取所述磁传感器、所述第一陀螺仪传感器以及所述第二陀螺仪传感器的数据。12.根据权利要求11所述的合页角度的检测方法，其特征在于，所述确定出所述折叠屏不处于闭合状态，包括：根据磁力数据，确定出折叠屏不处于闭合状态。13.根据权利要求12所述的合页角度的检测方法，其特征在于，所述根据磁力数据，确定出折叠屏不处于闭合状态，包括：若磁力数据小于或等于第一预设磁力值，则确定出折叠屏不处于闭合状态。14.根据权利要求1至13任一所述的合页角度的检测方法，其特征在于，还包括：若确定出所述折叠屏处于闭合状态，则控制所述电子设备中的传感器不处于工作状态。15.根据权利要求1或2所述的合页角度的检测方法，其特征在于，所述根据所述磁力数据对应的合页角度、第一陀螺仪传感器采集的绕公共轴的角速度以及第二陀螺仪传感器采集的绕所述公共轴的角速度，使用融合算法计算出所述电子设备的合页角度，包括：根据过程协方差、关键参数测量误差、采样周期、所述磁力数据对应的合页角度、第一陀螺仪传感器采集的绕公共轴的角速度以及第二陀螺仪传感器采集的绕所述公共轴的角速度，使用融合算法计算出所述电子设备的合页角度；其中，所述融合算法基于卡尔曼滤波构造。16.根据权利要求15所述的合页角度的检测方法，其特征在于，所述根据过程协方差、关键参数测量误差、采样周期、所述磁力数据对应的合页角度、第一陀螺仪传感器采集的绕公共轴的角速度以及第二陀螺仪传感器采集的绕所述公共轴的角速度，使用融合算法计算出所述电子设备的合页角度，包括：基于卡尔曼滤波算法，根据初始输入的合页角度、角速度差、以及采样周期，计算得到预估的合页角度；并根据初始输入的先验估计协方差和过程协方差，计算得到预估的先验估计协方差；其中，所述角速度差为第一陀螺仪传感器绕公共轴的角速度与第二陀螺仪传感器绕所述公共轴的角速度之间的差值；根据所述预估的先验估计协方差和关键参数测量误差，计算得到协方差；根据所述预估的合页角度、所述协方差、以及角度差值，计算得到更新后的合页角度；并根据所述协方差和所述预估的先验估计协方差，计算得到更新后的先验估计协方差；其中，所述角度差值为：所述磁力数据对应的合页角度和所述预估的合页角度之间的差值；将所述更新后的合页角度作为新的初始输入的合页角度、并将所述更新后的先验估计协方差作为新的初始输入的先验估计协方差，返回至所述基于卡尔曼滤波算法，根据初始输入的合页角度、角速度差、以及采样周期，计算得到预估的合页角度；并根据初始输入的先验估计协方差和过程协方差，计算得到预估的先验估计协方差的步骤，直至返回的次数达到N次为止，根据所述预估的合页角度确定出所述电子设备的合页角度；N为正整数。17.一种可折叠的电子设备，其特征在于，包括：折叠屏，所述折叠屏包括第一屏和第二屏；所述第一屏对应的机体设置有第一陀螺仪传感器和磁传感器，所述第二屏对应的机体设置有第二陀螺仪传感器和磁铁，所述磁传感器用于检测所述磁铁的磁场强度；一个或多个处理器；存储器，其上存储有程序；当所述程序被所述一个或多个处理器执行时，使得所述可折叠的电子设备执行如权利要求1至16中任意一项所述的合页角度的检测方法。
说明书desc
本申请为申请日为2021年11月19日，申请号为202111398158.5，发明创造名称为“合页角度的检测方法及相关设备”的分案申请。技术领域本申请涉及折叠屏技术领域，尤其涉及一种合页角度的检测方法及相关设备。背景技术随着折叠屏技术逐渐成熟，市面上的折叠屏手机也越来越多。为了提高用户使用折叠屏手机时的体验，许多开发人员开发了与折叠屏技术相关联的一系列功能。例如，设计了折叠屏手机展开后自适应大屏显示播放视频的功能等等。然而，在实现这一系列功能的过程中，往往需要获取到当前折叠屏手机的合页角度，以确定出当前折叠屏手机的姿态。因此，现有的折叠屏手机具有获取准确的合页角度的需求。发明内容本申请提供了一种合页角度的检测方法及相关设备，目的在于准确计算合页角度。为了实现上述目的，本申请提供了以下技术方案：第一方面，本申请公开了一种合页角度的检测方法，应用于可折叠的电子设备，该可折叠的电子设备的折叠屏包括第一屏和第二屏，第一屏对应的机体设置有第一陀螺仪传感器和磁传感器，第二屏对应的机体设置有第二陀螺仪传感器和磁铁，磁传感器用于检测磁铁的磁场强度，该合页角度的检测方法包括：获取磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，然后根据获取到的磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，使用融合算法计算出电子设备的合页角度。本申请实施例中，根据获取到的磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，使用融合算法计算出电子设备的合页角度，由于磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据在计算合页角度时的精度不受电子设备的公共轴是否垂直于水平面的影响，且磁传感器数据可以弥补第一陀螺仪传感器和第二陀螺仪传感器的数据在计算合页角度时累计的误差，进而能够实现准确计算出电子设备的合页角度。在一种可能的实现方式中，使用加速度算法计算电子设备的合页角度，包括：根据加速度向量在第一屏坐标系的x1o1z1平面的投影向量，以及加速度向量在第二屏坐标系的x2o2z2平面的投影向量，使用加速度传感器算法计算得到电子设备的合页角度。其中，加速度向量在第一屏坐标系的x1o1z1平面的投影向量由第一加速度传感器采集得到，加速度向量在第二屏坐标系的x2o2z2平面的投影向量由第二加速度传感器采集得到。在另一种可能的实现方式中，根据获取到的磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，使用融合算法计算出电子设备的合页角度，包括：根据磁传感器采集的磁力数据，确定与磁力数据对应的合页角度，然后根据磁力数据对应的合页角度、第一陀螺仪传感器采集的绕公共轴的角速度以及第二陀螺仪传感器采集的绕公共轴的角速度，使用融合算法计算出电子设备的合页角度。在另一种可能的实现方式中，根据磁力数据对应的合页角度、第一陀螺仪传感器采集的绕公共轴的角速度以及第二陀螺仪传感器采集的绕公共轴的角速度，使用融合算法计算出电子设备的合页角度，包括：根据过程协方差、关键参数测量误差、采样周期、磁力数据对应的合页角度、第一陀螺仪传感器采集的绕公共轴的角速度以及第二陀螺仪传感器采集的绕公共轴的角速度，使用融合算法计算出电子设备的合页角度。其中，融合算法基于卡尔曼滤波构造。在另一种可能的实现方式中，获取磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，包括：若确定出折叠屏不处于闭合状态，则获取磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据。在另一种可能的实现方式中，确定出折叠屏不处于闭合状态，包括：根据磁力数据，确定出折叠屏不处于闭合状态。在另一种可能的实现方式中，根据磁力数据，确定出折叠屏不处于闭合状态，包括：若磁力数据小于或等于第一预设磁力值，则确定出折叠屏不处于闭合状态。在另一种可能的实现方式中，还包括：若确定出折叠屏处于闭合状态，则控制电子设备中的传感器不处于工作状态。第二方面，本申请公开了一种合页角度的检测方法，应用于可折叠的电子设备，该可折叠的电子设备的折叠屏包括第一屏和第二屏，第一屏对应的机体设置有第一陀螺仪传感器、磁传感器以及第一加速度传感器，第二屏对应的机体设置有第二陀螺仪传感器、磁铁以及第二加速度传感器，磁传感器用于检测磁铁的磁场强度，合页角度的检测方法包括：根据电子设备的运动状态、以及公共轴与水平面的相对位置，确定出目标算法。其中，目标算法，至少包括：融合算法、或者加速度传感器算法，公共轴为折叠屏的折叠边所在的轴线。若确定出的目标算法为融合算法，则获取磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，然后根据获取到的磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，使用融合算法计算出电子设备的合页角度。本申请实施例中，当且仅当电子设备的运动状态、以及公共轴与水平面的相对位置所确定出的更适合使用的、精确度最高的算法为融合算法时，再根据获取到的磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，使用融合算法计算出电子设备的合页角度，以提高使用融合算法计算合页角度的准确度。在一种可能的实现方式中，确定电子设备的运动状态，包括：若电子设备的加速度向量的模长与重力加速度之间的差值小于或等于第一预设值，则确定出电子设备的运动状态为静止状态，若加速度向量的模长与重力加速度之间的差值大于第一预设值，则确定出电子设备的运动状态为不处于静止状态。在另一种可能的实现方式中，确定电子设备的运动状态，包括：若电子设备的加速度向量的模长与重力加速度之间的差值小于或等于第一预设值，则确定出电子设备的运动状态为静止状态，若加速度向量的模长与重力加速度之间的差值大于第一预设值，则确定出电子设备的运动状态为不处于静止状态。在另一种可能的实现方式中，确定公共轴与水平面的相对位置，包括：若加速度向量在公共轴上的分量与重力加速度之间的差值小于或等于第一预设值，则确定出公共轴垂直于水平面，若加速度向量在公共轴上的分量与重力加速度之间的差值大于第一预设值，则确定出公共轴不垂直于水平面。在另一种可能的实现方式中，根据电子设备的运动状态、以及公共轴与水平面的相对位置，确定出目标算法，包括：若电子设备处于静止状态、且公共轴不垂直于水平面，则将加速度传感器算法确定为目标算法，若电子设备不处于静止状态，则将目标算法确定为融合算法，若电子设备处于静止状态、且公共轴垂直于水平面，则将目标算法确定为融合算法。在另一种可能的实现方式中，若确定出的目标算法为融合算法，且确定出合页角度发生变化，则获取磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据。在另一种可能的实现方式中，确定出合页角度发生变化，包括：若角速度差与零之间的差值大于第二预设值，则确定出合页角度发生变化。其中，角速度差为第一陀螺仪传感器绕公共轴的角速度与第二陀螺仪传感器绕公共轴的角速度之间的差值。在另一种可能的实现方式中，还包括：若确定出的目标算法为加速度算法，则使用加速度算法计算电子设备的合页角度。在另一种可能的实现方式中，使用加速度算法计算电子设备的合页角度，包括：根据加速度向量在第一屏坐标系的x1o1z1平面的投影向量，以及加速度向量在第二屏坐标系的x2o2z2平面的投影向量，使用加速度传感器算法计算得到电子设备的合页角度。其中，加速度向量在第一屏坐标系的x1o1z1平面的投影向量由第一加速度传感器采集得到，加速度向量在第二屏坐标系的x2o2z2平面的投影向量由第二加速度传感器采集得到。在另一种可能的实现方式中，根据获取到的磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，使用融合算法计算出电子设备的合页角度，包括：根据磁传感器采集的磁力数据，确定与磁力数据对应的合页角度，然后根据磁力数据对应的合页角度、第一陀螺仪传感器采集的绕公共轴的角速度以及第二陀螺仪传感器采集的绕公共轴的角速度，使用融合算法计算出电子设备的合页角度。在另一种可能的实现方式中，根据所述磁力数据对应的合页角度、第一陀螺仪传感器采集的绕公共轴的角速度以及第二陀螺仪传感器采集的绕公共轴的角速度，使用融合算法计算出电子设备的合页角度，包括：根据过程协方差、关键参数测量误差、采样周期、磁力数据对应的合页角度、第一陀螺仪传感器采集的绕公共轴的角速度以及第二陀螺仪传感器采集的绕公共轴的角速度，使用融合算法计算出电子设备的合页角度。其中，融合算法基于卡尔曼滤波构造。在另一种可能的实现方式中，获取磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，包括：若确定出折叠屏不处于闭合状态，则获取磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据。在另一种可能的实现方式中，确定出所述折叠屏不处于闭合状态，包括：根据磁力数据，确定出折叠屏不处于闭合状态。在另一种可能的实现方式中，根据磁力数据，确定出折叠屏不处于闭合状态，包括：若磁力数据小于或等于第一预设磁力值，则确定出折叠屏不处于闭合状态。在另一种可能的实现方式中，还包括：若确定出折叠屏处于闭合状态，则控制电子设备中的传感器不处于工作状态。附图说明图1a为本申请实施例公开的折叠屏手机在展开及折叠过程中的变化示意图；图1b为本申请实施例公开的折叠屏手机在播放视频的过程中进行展开以及折叠过程中的视频界面变化示意图；图1c为本申请实施例公开的不同算法下的合页角度变化示意图；图2a为本申请实施例公开的可折叠的电子设备的硬件结构示意图；图2b为本申请实施例公开的折叠屏手机的硬件布局示意图；图3为本申请实施例公开的可折叠的电子设备的软件框架示意图；图4a为本申请实施例公开的两个平面之间的夹角示意图；图4b为本申请实施例公开的展开过程中磁传感器检测到的磁力变化示意图；图5a为本申请实施例公开的合页角度的检测方法的流程示意图一；图5b为本申请实施例公开的展开过程中磁传感器检测到的磁力变化示意图；图6a为本申请实施例公开的合页角度的检测方法的流程示意图二；图6b为本申请实施例公开的折叠屏手机检测合页角度的场景图一；图6c为本申请实施例公开的折叠屏手机检测合页角度的场景图二；图6d为本申请实施例公开的折叠屏手机检测合页角度的场景图三；图6e为本申请实施例公开的折叠屏手机检测合页角度的场景图四。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述。以下实施例中所使用的术语只是为了描述特定实施例的目的，而并非旨在作为对本申请的限制。如在本申请的说明书和所附权利要求书中所使用的那样，单数表达形式“一个”、“一种”、“所述”、“上述”、“该”和“这一”旨在也包括例如“一个或多个”这种表达形式，除非其上下文中明确地有相反指示。还应当理解，在本申请实施例中，“一个或多个”是指一个、两个或两个以上；“和/或”，描述关联对象的关联关系，表示可以存在三种关系；例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B的情况，其中A、B可以是单数或者复数。字符“/”一般表示前后关联对象是一种“或”的关系。在本说明书中描述的参考“一个实施例”或“一些实施例”等意味着在本申请的一个或多个实施例中包括结合该实施例描述的特定特征、结构或特点。由此，在本说明书中的不同之处出现的语句“在一个实施例中”、“在一些实施例中”、“在其他一些实施例中”、“在另外一些实施例中”等不是必然都参考相同的实施例，而是意味着“一个或多个但不是所有的实施例”，除非是以其他方式另外特别强调。术语“包括”、“包含”、“具有”及它们的变形都意味着“包括但不限于”，除非是以其他方式另外特别强调。本申请实施例涉及的多个，是指大于或等于两个。需要说明的是，在本申请实施例的描述中，“第一”、“第二”等词汇，仅用于区分描述的目的，而不能理解为指示或暗示相对重要性，也不能理解为指示或暗示顺序。为了便于理解，这里介绍下本申请实施例涉及的相关技术原理：随着折叠屏技术逐渐成熟，市面上的折叠屏手机也越来越多。如图1a所示，折叠屏手机的折叠屏包括：第一屏和第二屏。折叠屏按照折叠边折叠，形成第一屏和第二屏。折叠边所在的虚拟轴线为公共轴。第一屏可以包括第一屏的内屏和外屏，第二屏也可以包括第二屏的内屏和外屏。其中，内屏指的是折叠屏处于折叠状态时，位于内部的屏，外屏反之，是闭合状态时位于外部的屏。第一屏和第二屏之间的夹角为折叠屏手机的合页角度α。折叠屏手机包括：第一屏对应的机体和第二屏对应的机体。第一机体和第二机体之间通过连接轴相连。折叠屏手机的形态可以根据用户的需要而改变。例如，当用户想要方便携带时，则可以将折叠屏手机进行折叠，折叠过程可以从图1a示出的折叠方向按照展开状态、支架状态、折叠状态的顺序变化手机形态。当用户想要大屏观看视频时，则可以将折叠屏手机展开。如图1a所示，可以将折叠屏手机进行展开，展开过程折叠屏手机可以按照图1a示出的折叠状态、支架状态、展开状态的顺序变化手机形态。为了提高用户使用折叠屏手机的体验，许多开发人员开发了与折叠屏相关联的一系列功能。例如，设计了展开后自适应放大显示内容，且折叠后自适应缩小显示内容的功能。举例说明，如图1b所示，折叠屏手机由图1b的展开为时，播放视频的界面自适应放大，且播放任务仍然继续，当由图1b的折叠为时，播放视频的界面自适应缩小，且播放任务仍然继续。具体的，与折叠屏相关联的一系列功能还有很多，本申请不再一一赘述。而在执行一系列与折叠屏相关联的功能的过程中，通常需要获取到折叠屏手机的合页角度。例如，随着折叠屏手机的展开或折叠，播放视频的界面需自适应调整显示尺寸。因此，折叠屏手机具有获取准确的合页角度的需求。其中，折叠屏手机的合页角度指的是折叠屏手机的折叠夹角。例如图1a中示出的合页角度为α。目前，计算合页角度的算法主要有采用加速度传感器计算合页角度的算法算法)，以及采用陀螺仪传感器计算合页角度的算法算法)。然而，当折叠屏手机的公共轴与水平面垂直时，加速度向量在第一屏坐标系的x1o1z1平面、以及加速度向量在第二屏坐标系的x2o2z2平面均没有分量，无法通过加速度向量来计算出合页角度，因此只能使用Gyro算法进行合页角度计算。其中，第一屏坐标系的y1轴与第二屏坐标系的y2轴均与公共轴平行或重合，因此x1o1z1平面和x2o2z2为同一个平面。但Gyro算法随着使用Gyro算法的时间的增加，陀螺仪传感器所采集到的角速度误差也会不断积累，导致计算出的合页角度误差会越来越大。举例说明，如图1c所示，图1c为采用ACC算法和Gyro算法检测合页角度的角度变化图。具体的，将合页角度为67度的折叠屏手机的运动状态从静止到晃动，最终回归静止。由图1c可以看出，相较于图1c中的示出的ACC算法所计算的合页角度，图1c中的所示出侧Gyro算法下，随着时间的增加，测量出的角度逐渐偏离真实值67度。由此可以看出，使用Gyro算法计算合页角度时，准确度较低。因此为了能够获取准确的合页角度的需求，本申请实施例提出的一种合页角度的检测方法，该方法除了可以应用于折叠屏手机中，还可以应用于平板电脑，笔记本电脑，超级移动个人计算机，手持计算机，上网本等可折叠的电子设备中，即本申请实施例中可以计算任意的可折叠的电子设备的合页角度。如图2a所示，可折叠的电子设备200，可以包括：处理器210，智能传感集线器210A，传感器模块220，第一陀螺仪传感器220A，第一加速度传感器220B，第二陀螺仪传感器220C，第二加速度传感器220D，磁传感器220E，磁传感器220E，折叠屏230，音频模块240，以及磁铁240A。其中，第一陀螺仪传感器220A、第一加速度传感器220B、以及磁传感器220E可以设置于如图1a示出的第一机体内，第二陀螺仪传感器220C、第二加速度传感器220D、以及磁铁240A可以设置于如图1a示出的第二机体内。可以理解的是，本实施例示意的结构并不构成对可折叠的电子设备的具体限定。在另一些实施例中，可折叠的电子设备可以包括比图示更多或更少的部件，或者组合某些部件，或者拆分某些部件，或者不同的部件布置。图示的部件可以以硬件，软件或软件和硬件的组合实现。处理器210可以包括一个或多个处理单元，例如：处理器210可以包括应用处理器，调制解调处理器，图形处理器，图像信号处理器，控制器，视频编解码器，数字信号处理器，基带处理器，和/或神经网络处理器等。其中，不同的处理单元可以是独立的器件，也可以集成在一个或多个处理器中。处理器210中还可以包括智能传感集线器210A，用于连接并处理来自各种传感器设备的数据。例如，在本申请实施例中，智能传感集线器210A还可以连接并处理第一陀螺仪传感器220A、第二陀螺仪传感器220C、以及磁传感器220E的数据，根据传感器的数据执行下述图5a示出的合页角度的检测方法，具体执行过程可参见下述图5a的合页角度的检测方法的描述，此处不再赘述。在另一些实施例中，智能传感集线器210A连接并处理第一陀螺仪传感器220A、第一加速度传感器220B、第二陀螺仪传感器220C、第二加速度传感器220D、以及磁传感器220E的数据，根据传感器的数据执行下述图6a示出的合页角度的检测方法，具体执行过程可参见下述图6a的合页角度的检测方法的描述，此处不再赘述。折叠屏230用于显示图像，视频等。折叠屏230可以理解为是一种可折叠的柔性屏幕。折叠屏230包括显示面板。显示面板可以采用液晶显示屏，有机发光二极管，有源矩阵有机发光二极体或主动矩阵有机发光二极体，柔性发光二极管，Miniled，MicroLed，Micro-oled，量子点发光二极管等。折叠屏230，包括，第一屏230A和第二屏230B。折叠屏230可沿着折叠边进行展开或者折叠，形成第一屏230A和第二屏230B。第一屏230A和第二屏230B的相关描述可以参考图1a中的第一屏和第二屏。第一陀螺仪传感器220A可以用于确定电子设备的运动姿态。例如，可以通过第一陀螺仪传感器220A确定第一屏围绕第一屏的三个轴的角速度。在本申请实施例中，第一陀螺仪传感器220A可以用于确定出第一屏围绕第一屏坐标系的y1轴的角速度。第一陀螺仪传感器220A也可以用于拍摄防抖。第二陀螺仪传感器220C也可以用于确定电子设备的运动姿态。在本申请实施例中，可以通过第二陀螺仪传感器220C确定第二屏围绕第二屏的三个轴的角速度。在本申请实施例中，第二陀螺仪传感器220C可以用于确定出第二屏围绕第二屏的y2轴的角速度。第二陀螺仪传感器220C也可以用于拍摄防抖。第一加速度传感器220B可检测第一屏在各个方向上加速度的大小。当电子设备静止时可检测出重力的大小及方向。还可以用于识别电子设备姿态，应用于横竖屏切换，计步器等应用。第二加速度传感器220D可检测第二屏在各个方向上加速度的大小。当电子设备静止时可检测出重力的大小及方向。还可以用于识别电子设备姿态，应用于横竖屏切换，计步器等应用。磁传感器220E用于检测磁铁240A的磁场强度，得到磁力数据。在本申请实施例中，磁传感器220E设置于第一屏对应的机体中。在本申请实施例中，智能传感集线器210A可通过磁传感器220E检测到的磁力数据，检测出折叠屏的合页角度。磁传感器220E可以感应0到180度之间的磁场强度变化，磁传感器220E的分辨率可以根据应用场景的要求而定，例如可以是小于10度。在一些实施例中，磁传感器220E可以是霍尔传感器。具体的，智能传感集线器210A对磁传感器220E所检测到的磁力数据的处理过程，可参考本申请图5a示出的合页角度的检测方法中的步骤S501至步骤S503的相关部分，以及图6a示出的步骤S601至步骤S603的相关部分，此处不再赘述。磁铁240A用于产生磁场。在本申请实施例中，磁铁240A设置于第二屏对应的机体中。在一些实施例中，由于扬声器中具有磁铁，因此磁铁240A也可以是扬声器。扬声器也称“喇叭”，用于将音频电信号转换为声音信号。电子设备可以通过扬声器收听音乐，或收听免提通话。磁铁240A可以让磁传感器220E检测到磁力，随着折叠屏开合状态的变化，磁传感器220E与磁铁240A之间的距离相应发生变化，磁传感器220E检测到的磁铁240A的磁场强度也会发生变化，进而磁传感器220E采集到的磁力数据也会随之发生变化，进而智能传感集线器210A可通过磁传感器220E检测到的磁力数据，检测出折叠屏的合页角度。举例说明，在一些实施例中，若图2a示出的可折叠的设备为折叠屏手机时，折叠屏手机内部的硬件布局可以如图2b所示。第一陀螺仪传感器220A、第一加速度传感器220B、以及磁传感器220E设置于第一屏对应的机体内，第二陀螺仪传感器220C、第二加速度传感器220D、以及磁铁240A设置于第二屏对应的机体内。第一陀螺仪传感器220A和第二陀螺仪传感器220C平行放置，第一加速度传感器220B和第二加速度传感器220D平行放置，以使得第一屏坐标系下的y1轴能够与第二屏坐标系下的y2轴平行。磁铁240A和磁传感器220E之间的距离可以设定为2cm，具体根据应用场景对精度的要求而定。由于磁传感器220E容易被外界磁场干扰，可以不将磁传感器220E放到第一屏的边缘位置。需要说明的是，在另一些实施例中，例如执行图4b示出的合页角度的检测方法时，折叠屏手机内部的硬件也可以不包括第一加速度传感器220B和第二加速度传感器220D。另外，在上述部件之上，运行有操作系统。例如iOS操作系统，Android开源操作系统，Windows操作系统等。在该操作系统上可以安装运行应用程序。可折叠的电子设备200的操作系统可以采用分层架构，事件驱动架构，微核架构，微服务架构，或云架构。本申请实施例以分层架构的Android系统为例，示例性说明可折叠的电子设备的软件结构。图3是本申请实施例的可折叠的电子设备的软件结构框图。分层架构将软件分成若干个层，每一层都有清晰的角色和分工。层与层之间通过软件接口通信。在一些实施例中，将Android系统分为四层，从上至下分别为应用程序层，应用程序框架层，安卓运行时和系统库，以及内核层。应用程序层可以包括一系列应用程序包。如图3所示，应用程序包可以包括相机，图库，日历，通话，地图，导航，WLAN，蓝牙，音乐，视频，短信息等应用程序。应用程序框架层为应用程序层的应用程序提供应用编程接口和编程框架。应用程序框架层包括一些预先定义的函数。如图3所示，应用程序框架层可以包括窗口管理器，内容提供器，视图系统，电话管理器，资源管理器，通知管理器等。窗口管理器用于管理窗口程序。窗口管理器可以获取显示屏大小，判断是否有状态栏，锁定屏幕，截取屏幕等。内容提供器用来存放和获取数据，并使这些数据可以被应用程序访问。所述数据可以包括视频，图像，音频，拨打和接听的电话，浏览历史和书签，电话簿等。视图系统包括可视控件，例如显示文字的控件，显示图片的控件等。视图系统可用于构建应用程序。显示界面可以由一个或多个视图组成的。例如，包括短信通知图标的显示界面，可以包括显示文字的视图以及显示图片的视图。电话管理器用于提供电子设备的通信功能。例如通话状态的管理。资源管理器为应用程序提供各种资源，比如本地化字符串，图标，图片，布局文件，视频文件等等。通知管理器使应用程序可以在状态栏中显示通知信息，可以用于传达告知类型的消息，可以短暂停留后自动消失，无需用户交互。比如通知管理器被用于告知下载完成，消息提醒等。通知管理器还可以是以图表或者滚动条文本形式出现在系统顶部状态栏的通知，例如后台运行的应用程序的通知，还可以是以对话窗口形式出现在屏幕上的通知。AndroidRuntime包括核心库和虚拟机。Android runtime负责安卓系统的调度和管理。核心库包含两部分：一部分是java语言需要调用的功能函数，另一部分是安卓的核心库。应用程序层和应用程序框架层运行在虚拟机中。虚拟机将应用程序层和应用程序框架层的java文件执行为二进制文件。虚拟机用于执行对象生命周期的管理，堆栈管理，线程管理，安全和异常的管理，以及垃圾回收等功能。系统库可以包括多个功能模块。例如：表面管理器，媒体库，三维图形处理库，2D图形引擎，角度算法模块以及闭合检测算法模块等。在本申请实施例中，角度算法模块和闭合检测算法模块用于配合执行图5a或者图6a示出的合页角度的检测方法，具体可参见图5a以及图6a示出的合页角度的检测方法的相关内容。表面管理器用于对显示子系统进行管理，并且为多个应用程序提供了2D和3D图层的融合。媒体库支持多种常用的音频，视频格式回放和录制，以及静态图像文件等。媒体库可以支持多种音视频编码格式，例如:MPEG4，H.264，MP3，AAC，AMR，JPG，PNG等。三维图形处理库用于实现三维图形绘图，图像渲染，合成，和图层处理等。2D图形引擎是2D绘图的绘图引擎。内核层是硬件和软件之间的层。内核层至少包含显示驱动，摄像头驱动，音频驱动，传感器驱动。需要说明的是，本申请实施例虽然以Android系统为例进行说明，但是其基本原理同样适用于基于iOS、鸿蒙或Windows等操作系统的电子设备。为了便于理解，这里介绍下本申请实施例涉及的相关技术原理：第一屏坐标系和第二屏坐标系。如图2b所示，第一屏坐标系x1y1z1下的x1轴和y1轴分别平行或重合于第一屏的长和宽，而z1轴则垂直于第一屏所在的平面。第一屏坐标系所选择的原点o1除了可以在如图2b所示的位置，也可以选择第一屏上的其他位置作为原点。而第二屏坐标系x2y2z2也与第一屏坐标系的建立方式类似，此处不再赘述。当第一屏坐标系和第二屏坐标系选择的原点重合时，y1轴和y2轴也重合，为可折叠电子设备的折叠边所在的虚拟轴线。采用加速度传感器计算合页角度的算法，简称加速度传感器算法。ACC算法通过加速度传感器采集到的加速度数据计算出合页角度。加速度数据具体可以是加速度向量的坐标。具体的，使用ACC算法计算合页角度的原理为：如图4a所示，求取可折叠的电子设备的合页角度α，可以转换为求取第一屏所在平面的法向量和第二屏所在平面的法向量之间的夹角θ。静止状态下，可折叠的电子设备只受重力，而重力向量相当于地球坐标系的Z轴，重力向量在手机坐标系的坐标，相当于是地球坐标系相对于手机坐标系的相对坐标，因此可以将求取第一屏和第二屏之间的合页角度的问题，转换为求取重力向量在第一屏坐标系以及重力向量在第二屏坐标系下的夹角。具体的，静止状态下，第一加速度传感器采集到的第一屏坐标系x1y1z1下的加速度向量为，第二加速度传感器采集到的第二屏坐标系x2y2z2下的加速度向量为，因此，将A1，B1，C1，A2，B2，C2代入至公式一中，计算得到取第一屏π1的法向量和第二屏的法向量/＞之间的夹角θ。其中，第一加速度传感器的工作原理可参见图2a中的第一加速度传感器220B的描述，第二加速度传感器的工作原理可参见图2a中的第一加速度传感器220D的描述。公式一为：其中，合页角度α等于180-θ。又由于第一屏坐标系和第二屏坐标系的y轴是平行的，因此公式一可以转换为公式二，即把第一加速度传感器采集到的加速度向量在第一屏坐标系的x1o1z1平面的投影向量，以及第二加速度传感器采集到的加速度向量在第二屏坐标系的x2o2z2平面的投影向量代入至公式二中，计算得到合页角度。公式二为其中，合页角度α等于180-θ。ACC算法除了可以是公式一、公式二这样的算法形式，还可以有其他的具体算法形式，此处不做限制。由公式二可以看出，当重力加速度向量与公共轴平行或者重合时，第一加速度传感器采集到的加速度向量在第一屏坐标系的x1o1z1平面的投影向量，以及第二加速度传感器采集到的加速度向量在第二屏坐标系的x2o2z2平面的投影向量就会为0，因此，无法计算出合页角度。采用陀螺仪传感器计算合页角度的算法，简称陀螺仪传感器算法。Gyro算法即通过陀螺仪传感器采集到的角速度计算出合页角度的算法。具体的，如图2b可以看出，第一屏坐标系和第二屏坐标系的y轴平行或者重合，而只有沿y轴的旋转才会影响合页角度的大小。因此在使用角速度计算合页角度时，可以只对y轴的分量进行积分。具体的，针对每一个采样周期，将第一陀螺仪传感器在该采样周期内采集到的绕y1轴旋转的角速度Gyroy1，以及第二陀螺仪传感器在该采样周期内采集到的绕y2轴旋转的角速度Gyroy2，以及上一个采样周期计算出的合页角度a代入至公式三中，计算得到当前的合页角度α。其中，第一陀螺仪传感器的工作原理可参见图2a中的第一陀螺仪传感器220A的描述，第二陀螺仪传感器的工作原理可参见图2a中的第二陀螺仪传感器220C的描述。公式三为：α＝a+×delatT。其中，delatT为采样周期的值。Gyro算法除了可以是公式三这样的算法形式，还可以有其他的具体算法形式，此处不做限制。通过磁传感器检测到的磁力数据确定出与磁力数据对应的合页角度hAngle。磁力向量的模长与合页角度呈负相关关系。具体的，如图4b所示，当图2a的电子设备的折叠屏230被折叠为第一屏230A和第二屏230B时，磁铁240A内部的磁铁发出的磁感线会穿过磁传感器220E，进而使得磁传感器220E采集到磁力向量的模长。当折叠屏手机按照、、的顺序展开时，第一屏230A和第二屏230B之间的合页角度在逐渐增大，由图4b中的、、可以看出，随着合页角度的增大，穿过磁传感器220E的磁感线就越来越少，磁传感器220E检测到的磁力向量的模长就会越小。举例说明，如表一所示，磁传感器220E感应到磁力向量的模长为3500时，对应检测到的合页角度是5度，磁力向量的模长为3200时，对应的合页角度为15度，磁力向量的模长为500时，对应的合页角度为180度。因此，通过磁传感器检测到的磁力数据确定出与磁力数据对应的合页角度hAngle时，只需读取磁传感器220E所检测到的磁力数据，即可通过查找表一，确定出对应的合页角度。表一：磁传感器感应到磁力向量的模长对应的合页角度35005320015…………500180需要说明的是，表一仅仅是磁传感器感应到磁力向量的模长与合页角度之间的其中一种对应关系表，若磁传感器220E与磁铁240A之间的距离不同，摆放的位置不同等，所得到的磁力向量的模长与合页角度之间的对应关系表也会有所不同。具体可根据实际场景检测，确定出磁传感器检测到的磁力数据与合页角度的关系。还需要说明的是，在磁力数据与合页角度的关系表中的分辨率可以任意设定。当分辨率为10度时，即每改变10度的合页角度，就确定一个对应的磁力数据。分辨率越高，通过磁力数据确定出的合页角度越接近真实值，具体可依据实际场景需求来设定分辨率。采用陀螺仪传感器和磁传感器计算合页角度的融合算法，简称陀螺仪传感器和磁传感器的融合算法，即Gyro+Hall融合算法，在本申请实施例中也可以进一步简称为融合算法。融合算法为通过陀螺仪传感器采集到的角速度数据、以及由磁传感器采集到的磁力数据所确定出的合页角度，融合计算出合页角度的算法。其中，可以用于融合角速度和hAngle的融合算法有很多，例如可以使用互补滤波、或者卡尔曼滤波等融合角速度和hAngle，计算出合页角度，本申请实施例中对于融合角速度和hAngle的具体算法，不做限制。基于卡尔曼滤波所构造的Gyro+Hall融合算法模型为：预估过程：eAngle＝eAngle+delatT×P＝P+Q；测量计算过程：K＝P/；eAngle＝eAngle+K×；P＝×P。其中，Gyroy1是第一陀螺仪传感器在某一个采样周期内采集到的绕y1轴旋转的角速度，Gyroy2是第二陀螺仪传感器在该采样周期内采集到的绕y2轴旋转的角速度。delatT为采样周期的值。eAngle为合页角度算法模型所估算出的合页角度，初始输入到模型中的eAngle可以随意假设，例如可以使用最近一次计算出的合页角度作为eAngle，也可以将eAngle的值设置为0，eAngle的值在融合算法模型内部反复迭代运算后会趋于一个固定值。P为先验估计协方差，初始输入到模型中的P可以是个介于0到1之间的不为0的数，具体可任意设定，例如初始时候可以设定为1。Q为过程协方差，相当于是基于卡尔曼滤波所构造的Gyro+Hall融合算法模型内部的系统误差，是个预先根据经验预先调试设定好的固定值，例如可以为0.000001。R为关键参数测量误差，相当于是采用加速度传感器计算合页角度的算法本身所具有的误差，也是个根据经验预先调试设定好的固定值，例如可以为1.2。K是协方差，属于模型内部运算过程中产生的参数，不需要外部输入到模型中。hAngle是通过磁传感器所采集到的磁力数据所确定出的合页角度，具体得到hAngle的过程可以参考前述中提及的磁传感器检测到的磁力数据与合页角度的关系。在基于卡尔曼滤波所构造的Gyro+Hall融合算法模型中，预先设定好Q和R的值，且假设一个任意的eAngle和P输入到模型中，即可通过预估计算过程的公式，预估出一个新的eAngle和P。然后通过测量计算过程中的公式可以更新eAngle和P。再将测量计算过程中更新出的eAngle和P在迭代到预估计算过程中的公式内，反复迭代多次后，即可输出一个较为准确的合页角度eAngle。基于卡尔曼滤波所构造的Gyro+Hall融合算法模型具有计算简单、效率高、收敛快的优点，且可以适用于任意的场景，无论电子设备是否静止，公共轴是否垂直于水平面，都能够精准的计算出合页角度。此外，还具有能够滤掉高频、低频的干扰，不依赖精确的初始合页角度的优点等等。Gyro+Hall融合算法中，以陀螺仪传感器所计算出的合页角度算法为主，融合通过磁传感器所确定出的合页角度hAngle，计算出一个准确的合页角度。可折叠的电子设备无论公共轴是否垂直于水平面，是否处于静止状态，都不影响通过磁传感器确定出合页角度hAngle的过程，也不影响采集到的陀螺仪传感器的数据，因此在任意场景下，都能够通过Gyro+Hall融合算法，实现通过hAngle弥补Gyro算法的误差，以得到更为准确的合页角度。下面将具体结合图5a和图6a，阐述本申请实施例所提出的合页角度的检测方法。实施例一参阅图5a，图5a为本申请实施例提出的一种合页角度的检测方法，应用于本申请实施例提出的可折叠的电子设备中，具体包括以下步骤：S501、闭合检测算法模块根据磁力数据，确定折叠屏是否处于闭合状态。其中，磁力数据通过电子设备中的磁传感器采集得到，磁力数据与折叠屏的合页角度之间存在对应关系。通过磁传感器采集到的磁力数据，即可确定出一个对应的合页角度，进而再根据合页角度，确定出折叠屏是否处于闭合状态。闭合状态指的是折叠屏的合页角度接近于零的状态，非闭合状态则是合页角度大于零的状态，也可以认为是折叠屏打开的状态。如图1a所示，当如图1a中的所示，折叠屏完全展开时，形成折叠屏的展开状态，即不处于闭合状态，将折叠屏按照所示的折叠方向折叠之后，如图1a中的所示，折叠屏的折叠角度α大于零，折叠屏形成支架状态时，同样也是一种折叠屏打开的状态，即也不处于闭合状态。而如图1a中的所示，合页角度α几乎为零时，第一屏和第二屏相重合，此时则为闭合状态。在一些实施例中，磁力数据可以为磁力向量的模长。闭合检测算法模块通过磁力向量的模长与合页角度之间的对应关系，确定出当前的合页角度，进而可以根据确定出的合页角度，确定出折叠屏是否处于闭合状态。其中，通过磁力数据确定出合页角度的过程，可参考前述提及的通过磁传感器检测到的磁力数据确定出与磁力数据对应的合页角度hAngle的相关内容，此处不再赘述。在一些实施例中，当确定出的合页角度大于或等于第一预设角度值时，即磁力向量的模长小于或等于第一预设磁力值时，确定出折叠屏不处于闭合状态。例如，如图5b所示，第二预设角度可以设定为10度，而对应的第二预设磁力值为1930。即当磁力向量的模长小于或等于1930时，说明合页角度大于或等于10度，确定出折叠屏不处于闭合状态。在一些实施例中，当确定出的合页角度小于或等于第二预设角度值时，即磁力向量的模长大于或等于第二预设磁力值时，确定出折叠屏为闭合状态。例如图5b所示，可以将第一预设角度值设定为5度，对应的第一预设磁力值为2800，即当磁力向量的模长大于或等于2800时，说明合页角度小于或等于5度，确定出折叠屏为闭合状态。其中，第一预设角度值和第二预设角度值可以相等，也可以不相等。进而第一预设磁力值和第二预设磁力值也可以相等，也可以不相等。其中，若步骤S501确定出折叠屏不处于闭合状态，则需要角度算法模块启动进行折叠屏的合页角度的检测，因此需要执行步骤S502，而如果步骤S501确定出折叠屏是处于闭合状态，就说明不需要检测折叠屏的合页角度，因此需执行步骤S503。需要说明的是，步骤S501是一个实时执行或者周期性执行的步骤，步骤S501可以是每次确定出折叠屏是否处于闭合状态后，都执行步骤S502或S503，也可以是仅在确定出的折叠屏的状态发生变更时，再执行步骤S502或步骤S503。S502、闭合检测算法模块通知角度算法模块启动。角度算法模块启动，指的是角度算法模块启动检测折叠屏的合页角度。当折叠屏处于不处于闭合状态时，证明可能需要打开折叠屏实现一些功能，，而这些功能需要检测折叠屏当前的姿态，即需要知道折叠屏的合页角度，因此需要角度算法模块启动检测合页角度。在一些实施例中，闭合检测算法模块通知角度算法模块启动的方式有很多，例如可以是通过发送启动指令的方式通知角度算法模块。又例如，也可以是发送启动请求的方式通知角度算法模块。具体通知角度算法模块的方式不做限制。角度算法模块响应闭合检测算法模块的启动通知，启动检测合页角度，开始执行步骤步骤S504。在一些实施例中，启动检测合页角度的准备过程可以是：创建用于执行合页角度检测的线程，以及控制启动合页角度检测过程中所需要用到的传感器启动工作。例如，可以是控制图2a示出的第一陀螺仪传感器220A、第二陀螺仪传感器220C、以及磁传感器220E启动工作。S503、闭合检测算法通知角度算法模块关闭。角度算法模块关闭，指的是角度算法模块停止检测折叠屏的合页角度。当折叠屏处于闭合状态时，证明当前不需要执行任何需要用到合页角度的功能，因此可以通知角度算法模块关闭，以节省功耗，提高运行效率。在一些实施例中，闭合检测算法模块通知角度算法模块关闭的方式有很多，例如可以是通过发送关闭指令的方式通知角度算法模块。又例如，也可以是发送关闭请求的方式通知角度算法模块。具体通知角度算法模块的方式不做限制。角度算法模块响应闭合检测算法模块的关闭通知，停止检测合页角度。在一些实施例中，关闭检测合页角度的过程可以是：结束合页角度检测的线程，以及控制启动合页角度检测过程中所需要用到的传感器停止工作，即传感器停止采集数据。例如，可以是控制图2a示出的第一陀螺仪传感器220A、第二陀螺仪传感器220C、以及磁传感器220E。由于折叠屏处于闭合状态时，角度算法模块不工作，合页角度检测过程中所需要用到的传感器也不工作，停止了合页角度检测，因此降低了功耗，提高了运行效率。S504、角度算法模块获取磁传感器采集的磁力数据、第一陀螺仪传感器采集到的绕公共轴的角速度、以及第二陀螺仪传感器采集的绕公共轴的角速度。由于闭合检测算法模块通知角度算法模块启动，因此角度算法模块开始执行合页角度的检测过程，而电子设备内的各个传感器也开始启动工作。具体的，以检测某一个时刻的合页角度的过程为例：电子设备内的磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器向角度算法模块上报各自采集到的数据，进而使得角度算法模块从上报的数据中，获取到磁传感器采集的磁力数据、第一陀螺仪传感器采集到的绕公共轴的角速度、以及第二陀螺仪传感器采集的绕公共轴的角速度。其中，磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器上报数据的过程、上报的具体内容以及上报方式，可以参考安卓或者IOS等操作系统的规定，本申请实施例在此不做限定。在一些实施例中，磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的功能介绍可参考图2a示出的相关内容，而磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器在电子设备内的布局，可以参考图2b，此处不再赘述。S505、角度算法模块根据磁力数据，确定出与磁力数据对应的合页角度。其中，磁传感器通过检测磁铁的磁场强度，得到磁力数据，该磁力数据能够反映磁铁的磁力强度。在一些实施例中，磁力数据与合页角度之间的对应关系可以存储在电子设备内部，电子设备的角度算法模块获取到磁传感器采集的磁力数据之后，通过磁力数据与合页角度之间的对应关系，可确定出与磁力数据对应的合页角度。其中，磁力数据与合页角度之间的对应关系可以以表格的形式存储，例如前述提及的表一，也可以是其他的形式存储，本申请实施例不作限制。具体的，根据磁传感器采集到的磁力数据，确定出与磁力数据对应的合页角度的过程和原理，可参考前述提及的：通过磁传感器检测到的磁力数据确定出与磁力数据对应的合页角度hAngle的相关内容，此处不再赘述。在一些实施例中，磁传感器为图2a示出的磁传感器220E，磁铁为图2a示出的磁铁240A，磁传感器220E与磁铁240A在电子设备中的布局可参考图2b示出的相关内容，磁传感器220E和磁铁240A的工作原理可参考图2a示出的相关内容，此处不再赘述。需要说明的是，步骤S505中确定出的与磁力数据对应的合页角度，并不作为最终角度算法模块检测出的电子设备的合页角度，该与磁力数据对应的合页角度还需在步骤S506中使用融合算法进行计算处理。S506、根据第一陀螺仪传感器采集到的绕公共轴的角速度、第二陀螺仪传感器采集的绕公共轴的角速度、以及与磁力数据对应的合页角度，使用Gyro+Hall融合算法计算出电子设备的合页角度。在一些实施例中，Gyro+Hall融合算法可以是卡尔曼滤波算法，具体的，可以根据预先设定好的过程协方差Q、预先设定好的关键参数测量误差R、第一陀螺仪传感器采集到的绕公共轴的角速度、第二陀螺仪传感器采集的绕公共轴的角速度、采样周期以及与磁力数据对应的合页角度，使用基于卡尔曼滤波所构造的Gyro+Hall融合算法模型，计算得到电子设备的合页角度。示例性的，将预先设定好的过程协方差Q、预先设定好的关键参数测量误差R、第一陀螺仪传感器采集到的绕公共轴的角速度、第二陀螺仪传感器采集的绕公共轴的角速度、以及与磁力数据对应的合页角度输入到基于卡尔曼滤波所构造的Gyro+Hall融合算法模型中，反复迭代N次，即可输出电子设备的合页角度eAngle，作为角度算法模块当前检测到的合页角度。其中，N的值可以根据经验进行设定，例如根据经验确定出N为150次时，所输出的eAngle与真实的合页角度之间的误差较小，即可以将N设定为150。在另一些实施例中，也可以使用其他类型的Gyro+Hall融合算法，融合第一陀螺仪传感器采集到的绕公共轴的角速度、第二陀螺仪传感器采集的绕公共轴的角速度、以及与磁力数据对应的合页角度，计算出电子设备的合页角度。具体的，使用Gyro+Hall融合算法计算出电子设备的合页角度的过程和原理，可参考前述对采用陀螺仪传感器和磁传感器计算合页角度的融合算法的介绍，此处不再赘述。需要说明的是，步骤S504至步骤S506仅仅是计算一次合页角度的过程。在一些实施例中，可以按照预设的检测周期，周期性的执行步骤S504至步骤S506，即周期性的计算电子设备的合页角度，以不断将最新计算出的合页角度提供至电子设备中需要使用到合页角度的功能模块中。还需要说明的是，在另一些实施例中，也可以不执行步骤S501至步骤S503，即角度算法模块也可以一直处于启动状态，即一直检测合页角度。由前述对图5a的步骤S504至步骤S506可知，角度算法模块计算合页角度的过程主要通过获取磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，然后根据获取到的磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，使用融合算法计算出电子设备的合页角度。而步骤S504至步骤S506是通过获取到的磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，使用融合算法计算出电子设备的合页角度一种具体实施方式，在另一些实施例中，使用获取到的磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，通过融合算法计算出合页角度的具体过程可以与步骤S504至步骤S506不同。本申请实施例中，由于Gyro+Hall融合算法能够融合磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，可以弥补只使用了第一陀螺仪传感器以及第二陀螺仪传感器的数据的Gyro算法存在的累积误差，因此根据获取到的磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据，使用融合算法计算出的电子设备的合页角度更为准确。且根据磁传感器、第一陀螺仪传感器以及第二陀螺仪传感器的数据使用融合算法计算合页角度时，准确度并不受水平轴是否垂直于水平面的影响，可以适用于在任意场景下进行合页角度的计算。实施例二参阅图6a，图6a为本申请实施例提出的一种合页角度的检测方法，应用于本申请实施例提出的可折叠的电子设备中，具体包括以下步骤：S601、闭合检测算法模块根据磁力数据，确定折叠屏是否处于闭合状态。其中，若步骤S601确定出折叠屏不处于闭合状态，则需要角度算法模块启动进行折叠屏的合页角度的检测，因此需要执行步骤S602，而如果步骤S601确定出折叠屏是处于闭合状态，就说明不需要检测折叠屏的合页角度，因此需执行步骤S603。步骤S601的执行原理和过程可参考前述步骤S501的相关描述，此处不再赘述。S602、闭合检测算法模块通知角度算法模块启动。步骤S602的执行原理和过程可参考前述步骤S502的相关描述，此处不再赘述。S603、闭合检测算法通知角度算法模块关闭。步骤S603的执行原理和过程可参考前述步骤S503的相关描述，此处不再赘述。S604、角度算法模块判断是否处于静止状态。角度算法模块开始检测折叠屏手机的合页角度时，需要先判断当前折叠屏手机的运动状态，以选择出合适的角度算法来计算合页角度。其中，本申请实施例中的静止状态可以理解为是一种相对静止状态，在静止状态下，折叠屏手机相当于只受到重力。由前述图1c的可以看出，当在静止状态时，使用ACC算法可以准确计算出合页角度，因此当角度算法模块判断出处于静止状态时，则说明在ACC算法和融合算法中，可以优先使用在静止状态下计算精度较高的ACC算法来计算合页角度。由图1c中的可以看出，ACC算法在晃动的时候，不能够准确的计算出合页角度，当角度算法模块不处于静止状态，则说明应该优先使用在非静止状态下，精确度更高的融合算法，来就算合页角度。需要说明的是，静止状态下，使用ACC算法计算合页角度会更为准确的原因是：通过前述对Gyro算法的介绍可知，Gyro算法需要通过上一个采样周期计算出的合页角度a计算出当前的合页角度。因此，若使用到Gyro算法计算合页角度，就需要初始的合页角度十分精确，而且随着时间的增加陀螺仪传感器所采集的角速度的误差积累下来会越来越大，而通过前述对融合算法的介绍又可知，融合算法可以通过在Gyro算法中融合磁力数据所确定出的合页角度hAngle，弥补Gyro算法的误差，提高了准确度。但在静止情况下，使用ACC算法计算合页角度时，不会存在累积误差，尤其是在静止状态时，只受重力加速度影响，通过ACC算法所计算出的合页角度准确度是比较高的，因此静止状态下，可以优先使用ACC算法。而在不静止的状态下，ACC算法精度低，融合算法精度又优于Gyro算法，因此可以优先使用融合算法计算合页角度。然而，在静止状态下是否需要使用ACC算法去计算合页角度，仍需要进一步的判断，因此若判断出处于静止状态，则执行S605。同样的，非静止状态下，是否需要使用融合算法去计算合页角度，仍需要进一步判断，因此若判断出不处于静止状态，则执行步骤S606。S605、角度算法模块判断公共轴是否垂直于水平面。其中，公共轴如图2b所示，为折叠边所在的轴，也可以理解为是第一屏坐标系x1y1z1下的y1轴或者第二屏坐标系x2y2z2下的y2轴。水平面指的是地球坐标系下的水平面。当步骤S604确定出处于静止状态之后，则说明当前可以优先选择ACC算法，但ACC算法在公共轴不垂直于水平面时才可准确计算出合页角度，因此需要进一步判断公共轴是否垂直于水平面。当公共轴垂直于水平面时，且步骤S604还判断出了电子设备处于静止状态时，执行步骤S607。当公共轴不垂直于水平面，且步骤604还判断出了折叠屏手机处于静止状态时，则执行步骤S608。在一些实施例中，执行步骤S605的方式可以是：根据加速度在公共轴上的分量来判断公共轴是否垂直于水平面。具体的，通过加速度传感器获取加速度向量在公共轴上的分量，例如可通过图2a中的第一加速度传感器220B或者第二加速度传感器220D。若加速度向量在公共轴上的分量接近于9.8，则判断出公共轴垂直于水平面。在一些实施例中，如果加速度向量在公共轴上的分量与重力加速度之间的差值小于或等于第一预设值，则确定出公共轴垂直于水平面。如果加速度向量在公共轴上的分量与重力加速度之间的差值大于第一预设值，则确定出公共轴不垂直于水平面。其中，第一预设值可以是一个接近于0的数，重力加速度的值为9.8。当加速度向量在公共轴上的分量与重力加速度之间的差值小于或等于第一预设值时，则认为加速度向量在公共轴上的分量接近于重力加速度9.8，判断出公共轴垂直于水平面。由于步骤S604已判断出处于静止状态，仅受重力，因此当重力加速度的值全部都在公共轴上时，就说明重力的方向与公共轴重合，公共轴垂直于水平面。相反的，当加速度向量在公共轴上的分量与重力加速度之间的差值大于第一预设值时，就认为加速度向量在公共轴上的分量不接近于重力加速度，就判断出了公共轴不垂直于水平面。S606、角度算法模块判断合页角度是否发生变化。当角度算法模块判断出合页角度没有发生变化，且步骤S604又确定出当前不处于静止状态，则执行步骤S609，即不重新计算合页角度。虽然不处于静止状态时可以优先使用融合算法计算出准确的合页角度，但因为当前合页角度没有发生变化，因此可以不进行合页角度的计算，可以直接拿上一次计算出的合页角度作为当前检测出的电子设备的合页角度。当角度算法模块判断出合页角度发生了变化，则执行步骤S610，使用融合算法来计算合页角度。在一些实施例中，执行步骤S606的一种实施方式为：角度算法模块根据陀螺仪传感器采集的角速度确定合页角度是否发生变化。具体的，由于能够引起合页角度发生变化的，是y轴的角速度的改变。因此，在一些实施例中，角度算法模块可以获取第一陀螺仪传感器采集到的绕y1轴旋转的角速度Gyroy1，以及获取第二陀螺仪传感器采集到的绕y2轴旋转的角速度Gyroy2。当Gyroy2与Gyroy1的差值等于零，即Gyroy2与Gyroy1的差值与零之间的差值小于或等于第二预设值时，则说明合页角度没有发生变化。其中，第二预设值可以是接近于零的值。反之，当Gyroy1与Gyroy2的差值不等于零，即Gyroy2与Gyroy1的差值与零之间的差值大于第二预设值时，则说明合页角度发生了变化。S607、角度算法模块使用融合算法计算电子设备的合页角度。虽然步骤S604判断出了电子设备处于静止状态，可以优先选择使用ACC算法，但是步骤S605判断出了公共轴垂直于水平面，不适用于使用ACC算法，因此可以选择使用融合算法去计算电子设备的合页角度。而融合算法计算电子设备的合页角度的过程可以参考前述图5a中的步骤S504至步骤S506的相关内容，前述的步骤S504至步骤S506中描述了使用融合算法计算合页角度的过程，此处不再赘述。由前述描述可知，在角度算法模块确定出电子设备处于静止状态且公共轴垂直于水平面时，可以选择使用融合算法计算电子设备的合页角度，或者不重新计算合页角度。举例说明，如图6b所示的场景，用户将折叠屏手机的公共轴垂直于水平面放置，并浏览折叠屏手机。在用户浏览折叠屏手机的过程中，折叠屏手机处于静止状态，此时折叠屏手机内部在使用融合算法计算合页角度，或者不重新计算合页角度。在另一些实施例中，角度算法模块在确定出电子设备处于静止状态，且公共轴不垂直于水平面时，也可以不重新计算合页角度，即可以使用角度算法模块最后一次计算出的合页角度作为当前的合页角度。具体的，电子设备处于静止状态时，电子设备的合页角度是没有发生变化的，因此也可以不计算合页角度。S608、角度算法模块使用ACC算法计算电子设备的合页角度。在一些实施例中，当确定出电子设备处于静止状态，且公共轴不垂直于水平面后，说明当前可以优先使用ACC算法计算合页角度。由前述图1c的相关描述可知，静止状态下使用ACC算法计算合页角度的准确度较高，且当前的公共轴不垂直于水平面，第一加速度传感器可以采集到加速度向量在第一屏坐标系的x1o1z1平面的投影，第二加速度传感器也可以采集到加速度向量在第二屏坐标系的x2o2z2平面的投影，因此满足了使用ACC算法的条件。举例说明，如图6c示出的场景中，折叠屏手机被用户静止放置在桌面上，且公共轴与水平面不垂直，此时折叠屏手机在使用ACC算法计算合页角度。在一些实施例中，角度算法模块获取第一加速度传感器采集到的加速度向量，以及第二加速度传感器采集到的加速度向量，代入至前述提及的公式一中，计算得到cosθ，确定出θ，进而通过合页角度α等于180减去θ，计算出合页角度。在另一些实施例中，由于第一屏坐标系和第二屏坐标系的y轴相同，因此角度算法模块还可以是获取第一加速度传感器采集到的加速度向量在x1o1z1平面的投影，以及第二加速度传感器采集到的加速度向量在x2o2z2平面的投影，代入至前述提及到的公式二中，计算得到cosθ，确定出θ，进而通过合页角度α等于180减去θ，计算出合页角度。具体的，ACC算法的技术原理可参考前述对ACC算法的相关介绍，此处不再赘述。且第一加速度传感器和第二加速度传感器的介绍可参考图2a示出的相关部分，此处也不再赘述。第一加速度传感器和第二加速度传感器在电子设备内部的布局也可参考图2b，此处不再赘述。在静止状态下，虽然合页角度没有发生改变，但仍然可以使用ACC算法计算出准确度较高的合页角度，在之前所得到的合页角度存在误差时，即可通过使用ACC算法计算出准确的合页角度，校正之前计算过程中的误差。S609、角度算法模块不重新计算合页角度。通过前述的判断是否处于静止状态以及判断公共轴是否垂直于水平面，可确定出当不处于静止状态，可以优先使用融合算法计算合页角度，但由于步骤S606不需要重新计算折叠屏的合页角度，可以直接使用上一次计算出的合页角度，即当前该次检测合页角度的过程不再计算当前的合页角度，而是使用最近一次计算出的合页角度作为当前检测出的合页角度。举例说明，如图6d所示，用户在行走过程中拿着折叠屏手机观看，此时折叠屏手机的折叠边不垂直于水平面，虽然折叠屏手机不处于静止状态，但是用户并未改变折叠屏手机的形态，即没有改变合页角度，因此图6d示出的场景下，折叠屏手机不重新计算合页角度。S610、角度算法模块使用融合算法计算电子设备的合页角度。通过前述的判断是否处于静止状态以及判断公共轴是否垂直于水平面，可确定出当前在不处于静止状态时，适用的算法为融合算法，且又通过前述的判断合页角度是否发生变化确定出当前的合页角度发生了改变，因此，需要使用融合算法去计算合页角度。举例说明，如图6e所示，用户在行走过程中正在打开折叠屏手机，此时折叠屏手机不处于静止状态，且合页角度发生了改变，因此折叠屏手机使用融合算法计算合页角度。需要说明的是，在确定出电子设备不处于静止状态时，可以使用融合算法的原因为：由前述图1c可知，在不处于静止状态时，使用ACC算法计算合页角度并不准确，而Gyro算法随着时间的推移，误差会不断累积，也不适用于计算合页角度。而由前述对融合算法的相关描述可知，融合算法通过磁力数据所确定出的合页角度hAngle，能够弥补Gyro算法的误差，因此使用Gyro+Hall融合算法计算出电子设备的合页角度时，可以得到更为准确的合页角度。具体的，融合算法计算电子设备的合页角度的过程可以参考前述图5a中的步骤S504至步骤S506的相关内容，前述的步骤S504至步骤S506中描述了使用融合算法计算合页角度的过程，此处不再赘述。需要说明的是，步骤S604至步骤S610仅仅是计算一次合页角度的过程。在一些实施例中，可以按照预设的检测周期，周期性的执行步骤S604至步骤S610，即周期性的计算电子设备的合页角度，以不断将最新计算出的合页角度提供至电子设备中需要使用到合页角度的功能模块中。还需要说明的是，在另一些实施例中，也可以不执行步骤S601至步骤S603，即角度算法模块也可以一直处于启动状态，即一直检测合页角度。由前述步骤S604至步骤S610可知，本申请实施例中，角度算法模块通过步骤S604来确定当前的运动状态，通过步骤S605来确定折叠屏的公共轴与水平面的相对位置关系，进而可根据当前的运动状态以及公共轴与水平面的相对位置关系，从ACC算法和融合算法中确定出目标算法，以提高检测合页角度的准确性。具体的，当处于静止状态、且公共轴不垂直于水平面时，使用ACC算法作为目标算法，计算合页角度。当处于静止状态、且公共轴垂直于水平面时，使用融合算法作为目标算法，计算合页角度。当不处于静止状态时，则可以使用融合算法作为目标算法，计算合页角度。而由步骤S606至步骤S610可知，在一些实施例中，当不处于静止状态时，还可以仅在合页角度发生变化时，再使用融合算法作为目标算法，计算合页角度。如果合页角度没有发生变化，则可以不计算合页角度，以节省运算所带来的功耗，提高效率。本申请实施例中，根据当前的运动状态以及公共轴与水平面的相对位置关系，确定出目标算法，当确定的目标算法为融合算法时，则使用融合算法计算合页角度，以使得融合算法在适用的场景下使用，以提高检测合页角度的准确性。
