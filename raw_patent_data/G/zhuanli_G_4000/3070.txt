标题title
智能网联公交车通行效率综合评价方法与系统
摘要abst
本发明公开了智能网联公交车通行效率综合评价方法及系统，方法包括以下步骤：获取智网联公交车通行效率综合评价所需的原始数据；根据获取的原始数据，获取固定线路上连续信号交叉口上下游关联关系与空间距离关联关系；从原始数据中提取轨迹数据，筛选出有效轨迹数据；从原始数据中获取红绿灯状态数据；根据获取的固定线路上连续信号交叉口上下游关联关系与空间距离关联关系、有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价策略。本申请通过时空数据筛选与路网充分结合，提出公交车运行效率综合评价方法，准确地衡量了公交车通行效率，可以支持公交车信号优先、公交车速引导应用效果评价。
权利要求书clms
1.一种智能网联公交车通行效率综合评价方法，其特征在于，包括以下步骤：获取智网联公交车通行效率综合评价所需的原始数据；根据获取的原始数据，获取固定线路上连续信号交叉口上下游关联关系与空间距离关联关系；从原始数据中提取轨迹数据，筛选出有效轨迹数据；从原始数据中提取红绿灯数据，根据有效轨迹数据中的时间范围，从提取的红绿灯数据中筛选出与有效轨迹数据对应的有效时间范围内的红绿灯数据，根据有效时间范围内的红绿灯数据，获取红绿灯状态数据；根据获取的固定线路上连续信号交叉口上下游关联关系与空间距离关联关系、有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价策略。2.如权利要求1所述的智能网联公交车通行效率综合评价方法，其特征在于，所述获取智网联公交车通行效率综合评价所需的原始数据中的原始数据包括公交车轨迹数据、公交线路表、红绿灯数据和地图数据。3.如权利要求1所述的智能网联公交车通行效率综合评价方法，其特征在于，所述根据获取的固定线路上连续信号交叉口上下游关联关系与空间距离关联关系、有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价策略步骤，具体包括以下步骤：根据获取的有效轨迹数据、公交车旅行距离、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价指标，评价指标包括公交车运行时空轨迹图、公交车旅行时间、公交车旅行距离、公交车延误时间和公交车停车次数。4.如权利要求3所述的所述的智能网联公交车通行效率综合评价方法，其特征在于，所述根据获取的有效轨迹数据、公交车旅行距离、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价指标，评价指标包括公交车运行时空轨迹图、公交车旅行时间、公交车旅行距离、公交车延误时间和公交车停车次数步骤，具体包括以下步骤：根据获取的有效轨迹数据和红绿灯状态数据，获取公交车轨迹数据与红绿灯状态数据绘制时间-空间图；根据获取的有效轨迹数据，获取公交车旅行时间；根据获取的有效轨迹数据，获取公交车旅行距离；根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯延误时间；根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取总延误时间；根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯停车次数；根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取总停车次数。5.如权利要求4所述的所述的智能网联公交车通行效率综合评价方法，其特征在于，所述根据获取的有效轨迹数据，获取公交车旅行距离步骤，具体包括以下步骤：判定公交车运行起讫路口；获取公交车运行上下游路口关联；获取公交车运行空间距离关联；基于判定的公交车运行起讫路口、公交车运行上下游路口关联、公交车运行空间距离关联，根据有效轨迹数据，获取公交车旅行距离。6.如权利要求4所述的所述的智能网联公交车通行效率综合评价方法，其特征在于，所述根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯延误时间步骤，具体包括以下步骤：筛选出预设范围内的停车轨迹数据；筛选出预设范围内公交车所在进口道的红绿灯相位状态数据；根据筛选出的预设范围内的停车轨迹数据和预设范围内公交车所在进口道的红绿灯相位状态数据，计算获取红灯延误时间。7.如权利要求4所述的所述的智能网联公交车通行效率综合评价方法，其特征在于，所述根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取总延误时间步骤，具体包括以下步骤：获取路口理想通行时间；根据获取的有效轨迹数据，获取路口实际通行时间；根据获取的路口理想通行时间和路口实际通行时间，获取总延误时间。8.如权利要求4所述的所述的智能网联公交车通行效率综合评价方法，其特征在于，所述根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯停车次数步骤，具体包括以下步骤：根据有效时间范围内的红绿灯数据以及红绿灯状态数据，以预设时间段内的连续停车作为一次停车，获取公交车位于路口预设范围内由于红灯引起的停车次数作为红灯停车次数。9.如权利要求4所述的所述的智能网联公交车通行效率综合评价方法，其特征在于，所述根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取总停车次数步骤，具体包括以下步骤：根据有效时间范围内的红绿灯数据以及红绿灯状态数据，以预设时间段内的连续停车作为一次停车，获取公交车在进口道的停车次数作为总停车次数。10.一种智能网联公交车通行效率综合评价系统，其特征在于，包括：原始数据获取模块，用于获取智网联公交车通行效率综合评价所需的原始数据；关联关系获取模块，与所述原始数据获取模块通信连接，根据获取的原始数据，获取固定线路上连续信号交叉口上下游关联关系与空间距离关联关系；轨迹数据获取模块，与所述原始数据获取模块通信连接，用于从原始数据中提取轨迹数据，筛选出有效轨迹数据；红绿灯数据获取模块，与所述原始数据获取模块通信连接，用于从原始数据中提取红绿灯数据，根据有效轨迹数据中的时间范围，从提取的红绿灯数据中筛选出与有效轨迹数据对应的有效时间范围内的红绿灯数据，根据有效时间范围内的红绿灯数据，获取红绿灯状态数据；评价策略获取模块，与所述轨迹数据获取模块和所述红绿灯数据获取模块通信连接，用于根据获取的固定线路上连续信号交叉口上下游关联关系与空间距离关联关系、有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价策略。
说明书desc
技术领域本发明涉及智能网联、公交车通行效率评估技术领域，具体是涉及一种智能网联公交车通行效率综合评价方法与系统。背景技术公交车作为城市公共交通的重要载体，具有集约、高效、环保的优点。随着城市汽车保有量爆炸式增长，导致城市交通拥堵现象频发，严重影响了公交车运行效率，综合评估公交车在城市路网的通行效率，改善公交车出行服务水平意义重大。公交车通行效率评价系统涉及到评价数据、数据处理、评价指标等方面。评价数据方面，现有的公交车通行效率评价系统采用公交车GPS轨迹、刷卡、到站、车内监控等数据，实现对公交车运行监控、载客率、准点率、行程时间为代表的线路整体运行状态分析，由于频率低、精度低、缺乏详细时空信息等原因，无法支持公交路网实时运营详细状态分析，无法满足公交车精细化管控、路口公交车优先、公交车实时车速诱导的需求。数据处理方法方面，现有的处理方法主要基于上述公交线路运营与监管数据，采用时空映射方法，获取线路上各站点的到站时空位置数据，在不借助红绿灯、地图等道路动静态基础数据的前提下，采用数值分析方法计算到站时间、到站延误、线路行程、线路准点等。评价指标方面，主要采用上述的公交线路及站点运行情况作为关键评价指标，这些指虽然可以充分衡量公交车运营的整体效率，帮助优化公交线路。然而这些指标并没有与路网充分结合，无法全面衡量公交车通行效率，缺乏对信号灯路口的公交车通行评价。为了全面综合衡量公交线路运行效率，需要从线路整体与线路组成两个方面展开综合评价。发明内容本发明的目的是为了克服上述背景技术的不足，提供一种智能网联公交车通行效率综合评价方法与系统。第一方面，本申请提供了一种智能网联公交车通行效率综合评价方法，包括以下步骤：获取智网联公交车通行效率综合评价所需的原始数据；根据获取的原始数据，获取固定线路上连续信号交叉口上下游关联关系与空间距离关联关系；从原始数据中提取轨迹数据，筛选出有效轨迹数据；从原始数据中提取红绿灯数据，根据有效轨迹数据中的时间范围，从提取的红绿灯数据中筛选出与有效轨迹数据对应的有效时间范围内的红绿灯数据，根据有效时间范围内的红绿灯数据，获取红绿灯状态数据；根据获取的固定线路上连续信号交叉口上下游关联关系与空间距离关联关系、有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价策略。根据第一方面，在第一方面的第一种可能的实现方式中，所述获取智网联公交车通行效率综合评价所需的原始数据中的原始数据包括公交车轨迹数据、公交线路表、红绿灯数据和地图数据。根据第一方面，在第一方面的第二种可能的实现方式中，所述根据获取的固定线路上连续信号交叉口上下游关联关系与空间距离关联关系、有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价策略步骤，具体包括以下步骤：根据获取的有效轨迹数据、公交车旅行距离、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价指标，评价指标包括公交车运行时空轨迹图、公交车旅行时间、公交车旅行距离、公交车延误时间和公交车停车次数。根据第一方面的第二种可能的实现方式，在第一方面的第三种可能的实现方式中，所述根据获取的有效轨迹数据、公交车旅行距离、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价指标，评价指标包括公交车运行时空轨迹图、公交车旅行时间、公交车旅行距离、公交车延误时间和公交车停车次数步骤，具体包括以下步骤：根据获取的有效轨迹数据和红绿灯状态数据，获取公交车轨迹数据与红绿灯状态数据绘制时间-空间图；根据获取的有效轨迹数据，获取公交车旅行时间；根据获取的有效轨迹数据，获取公交车旅行距离；根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯延误时间；根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取总延误时间；根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯停车次数；根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取总停车次数。根据第一方面的第三种可能的实现方式，在第一方面的第四种可能的实现方式中，所述根据获取的有效轨迹数据，获取公交车旅行距离步骤，具体包括以下步骤：判定公交车运行起讫路口；获取公交车运行上下游路口关联；获取公交车运行空间距离关联；基于判定的公交车运行起讫路口、公交车运行上下游路口关联、公交车运行空间距离关联，根据有效轨迹数据，获取公交车旅行距离。根据第一方面的第三种可能的实现方式，在第一方面的第五种可能的实现方式中，所述根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯延误时间步骤，具体包括以下步骤：筛选出预设范围内的停车轨迹数据；筛选出预设范围内公交车所在进口道的红绿灯相位状态数据；根据筛选出的预设范围内的停车轨迹数据和预设范围内公交车所在进口道的红绿灯相位状态数据，计算获取红灯延误时间。根据第一方面的第三种可能的实现方式，在第一方面的第六种可能的实现方式中，所述根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取总延误时间步骤，还包括以下步骤：获取路口理想通行时间；根据获取的有效轨迹数据，获取路口实际通行时间；根据获取的路口理想通行时间和路口实际通行时间，获取总延误时间。根据第一方面的第三种可能的实现方式，在第一方面的第七种可能的实现方式中，所述根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯停车次数、步骤，还包括以下步骤：根据有效时间范围内的红绿灯数据以及红绿灯状态数据，以预设时间段内的连续停车作为一次停车，获取公交车位于路口预设范围内由于红灯引起的停车次数作为红灯停车次数。根据第一方面的第三种可能的实现方式，在第一方面的第八种可能的实现方式中，所述根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取总停车次数步骤，还包括以下步骤：根据有效时间范围内的红绿灯数据以及红绿灯状态数据，以预设时间段内的连续停车作为一次停车，获取公交车在进口道的停车次数作为总停车次数。第二方面，本申请提供了一种智能网联公交车通行效率综合评价系统，其特征在于，包括：原始数据获取模块，用于获取智网联公交车通行效率综合评价所需的原始数据；关联关系获取模块，与所述原始数据获取模块通信连接，根据获取的原始数据，获取固定线路上连续信号交叉口上下游关联关系与空间距离关联关系；轨迹数据获取模块，与所述原始数据获取模块通信连接，用于从原始数据中提取轨迹数据，筛选出有效轨迹数据；红绿灯数据获取模块，与所述原始数据获取模块通信连接，用于从原始数据中提取红绿灯数据，根据有效轨迹数据中的时间范围，从提取的红绿灯数据中筛选出与有效轨迹数据对应的有效时间范围内的红绿灯数据，根据有效时间范围内的红绿灯数据，获取红绿灯状态数据；评价策略获取模块，与所述轨迹数据获取模块和所述红绿灯数据获取模块通信连接，用于根据获取的固定线路上连续信号交叉口上下游关联关系与空间距离关联关系、有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价策略。与现有技术相比，本发明的优点如下：本申请提供的智能网联公交车通行效率综合评价方法，基于智能网联环境下的公交车轨迹数据和红绿灯数据，通过时空数据筛选，与路网充分结合，提出公交车运行效率综合评价方法，以实现准确地衡量了公交车通行效率，可以支持公交车信号优先、公交车速引导应用效果评价。附图说明图1是本申请提供的智能网联公交车通行效率综合评价方法的方法流程图；图2是本申请提供智能网联公交车通行效率综合评价方法的智能网联公交车通行效率综合评价方法的方法逻辑框图；图3是本申请提供智能网联公交车通行效率综合评价方法的固定线路公交车通过连续路口示意图；图4是本申请提供智能网联公交车通行效率综合评价方法的时空轨迹图；图5是本申请提供智能网联公交车通行效率综合评价方法的Link匹配示意图；图6是本申请提供智能网联公交车通行效率综合评价方法的公交车旅行距离计算示意图；图7是本申请提供智能网联公交车通行效率综合评价方法的红灯延误时间计算流程图。具体实施方式现在将详细参照本发明的具体实施例，在附图中例示了本发明的例子。尽管将结合具体实施例描述本发明，但将理解，不是想要将本发明限于所述的实施例。相反，想要覆盖由所附权利要求限定的在本发明的精神和范围内包括的变更、修改和等价物。应注意，这里描述的方法步骤都可以由任何功能块或功能布置来实现，且任何功能块或功能布置可被实现为物理实体或逻辑实体、或者两者的组合。为了使本领域技术人员更好地理解本发明，下面结合附图和具体实施方式对本发明作进一步详细说明。注意：接下来要介绍的示例仅是一个具体的例子，而不作为限制本发明的实施例必须为如下具体的步骤、数值、条件、数据、顺序等等。本领域技术人员可以通过阅读本说明书来运用本发明的构思来构造本说明书中未提到的更多实施例。第一方面，请参考图1-2，本申请提供了一种智能网联公交车通行效率综合评价方法，包括以下步骤：步骤S1、获取智网联公交车通行效率综合评价所需的原始数据；步骤S2、根据获取的原始数据，获取固定线路上连续信号交叉口上下游关联关系与空间距离关联关系；步骤S3、从原始数据中提取轨迹数据，筛选出有效轨迹数据；步骤S4、从原始数据中提取红绿灯数据，根据有效轨迹数据中的时间范围，从提取的红绿灯数据中筛选出与有效轨迹数据对应的有效时间范围内的红绿灯数据，根据有效时间范围内的红绿灯数据，获取红绿灯状态数据；步骤S5、根据获取的固定线路上连续信号交叉口上下游关联关系与空间距离关联关系、有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价策略。本申请提供的智能网联公交车通行效率综合评价方法，基于智能网联环境下的公交车轨迹数据和红绿灯数据，通过时空数据筛选，与路网充分结合，建立数据筛选处理和数据评价为一体的智能网联公交车运行效率综合评价方法，以准确衡量了公交车通行效率，可以支持公交车信号优先、公交车速引导应用效果评价。在一实施例中，所述步骤S1、获取智网联公交车通行效率综合评价所需的原始数据中的原始数据包括包括公交车轨迹数据、公交线路表、红绿灯数据和地图数据，其中，公交车轨迹数据是由智能网联公交车搭载的高精度定位模块在公交车行驶过程中生成的连续时空位置信息，包括时间戳、经纬度、航向角、速度等信息组成。并附带公交车运行日期、线路号信息存储；公交线路表中包含所有公交车固定股线路通过的连续信号灯路口信息；红绿灯数据包含信号灯信号红绿灯动态配时信息，包括路口编号、相位编号、相位灯色、倒计时等数据；地图数据包括公交车运行路网高精度地图信息，包括路口编号、路口进口道编号和进口道参考点经纬度等数据。在一实施例中，所述步骤S2、根据获取的原始数据，获取固定线路上连续信号交叉口上下游关联关系与空间距离关联关系，具体包括以下步骤：步骤S21、从获取的原始数据中提取固定线路；步骤S22、判定公交车运行起讫路口；步骤S23、获取公交车运行上下游路口关联；步骤S24、获取公交车运行空间距离关联。在一实施例中，为了方便对原始数据进行数据处理，所述步骤S21、从获取的原始数据中提取固定线路，具体包括以下步骤：构建公交线路与连续通信路口数矩阵，具体实现为：假设在运营公交车共有条固定公交线路，所有线路中连续通过的最后信号灯路口数为/＞，构建/＞的公交线路与连续通行路口数矩阵/＞，矩阵行向量/＞表示第/＞条线路通过的所有连续信号灯路口，用公式表示为，其中，表示第/＞条线路中第/＞个信号灯路口编号。若通过的连续路口数只有/＞个，且/＞，则令/＞，通过输入线路编号/＞，即可提取得到固定线路对应的连续信号灯路口向量/＞。在一实施例中，公交车按照固定线路连续往返运行，每次运行的起讫路口相反。因此需要在固定线路的基础上判定起讫路口，得到单次行驶通过的连续路口通行序列，所述步骤S22、判定公交车运行起讫路口，具体实现为：如图3所示，设任意路口的位置为/＞，公交车任意时刻/＞的位置为/＞。基于高斯平面欧式距离计算初始时刻/＞，公交车分别到/＞与/＞路口的地球表面距离/＞与/＞。由于公交线路起讫路口距离较大，可以通过比较与/＞的大小确定每次运行时的起点路口/＞与终点路口/＞。满足以下判定条件，在一实施例中，所述步骤S23、获取公交车运行上下游路口关联，具体实现为：根据固定线路获取，满足：其中表示单次通行通过的连续路口序列向量。若/＞，则每次运行通过的连续路口向量/＞，此时路口/＞的下游路口/＞；若/＞，则/＞，此时路口/＞的下游路口/＞。以便于根据上下游路口关联以及当前公交车所在位置确定驶向的下游路口。在一实施例中，所述步骤S24、获取公交车运行空间距离关联，具体实现为：根据向量的路口顺序从MAP消息集内提取每个路口进口道地图数据，包括进口道下游路口编号与进口道参考点数据，共同组成路口属性矩阵，其中，表示路口/＞进口道向量集合；/＞表示路口/＞的任意第/＞个进口道，包括该进口道下游路口编号/＞、通向下游路口/＞对应的红绿灯信号相位/＞、该进口道任意参考点/＞。以为例，计算路口/＞到起点路口/＞的距离。按顺序循环提取/＞进口道向量/＞，若满足/＞，则/＞为从路口/＞出发，经过路口/＞驶向路口/＞的道路。那么/＞与/＞的空间欧式距离/＞为：其中，表示参考点/＞的经纬度。同理，任意路口与下游路口的空间距离均可及求得，进而求解得到任意路口到起点路口的空间距离，以实现求解公交车单次通行通过的连续路口到公交车起点的距离。在一实施例中，所述步骤S3、从原始数据中提取轨迹数据，筛选出有效轨迹数据，具体包括以下步骤：步骤S31、根据公交车运行日期和公交车运行线路号，从原始数据的数据库中提取待处理公交车轨迹数据，架设公交线路路任意时刻的公交车轨迹数据为，任意一天内所有的公交车轨迹数据为/＞步骤S32、从提取的公交车轨迹数据中筛选出有效轨迹数据，提取的公交车轨迹书中包括车辆出入起始站点与终止站点轨迹数据，驶入路网过程中记录的轨迹数据为无效轨迹数据，因此，需要剔除这些公交车不在路网运行的无效轨迹数据，具体实现为：首先提取通行起点路口经纬度数据，从/＞时刻开始，计算任意时刻/＞公交车与起点路口的距离/＞,当满足进入起点路口有效轨迹范围的阈值距离100米时，即当时，记录时刻/＞。然后提取通行终点路口经纬度数据/＞，从时刻开始，计算任意时刻/＞公交车与终点路口的距离/＞,当时，继续基于公式计算任意时刻/＞公交车与终点路口的距离/＞，当/＞时，记录此时时刻/＞。则时间范围/＞内的轨迹数据即为有效轨迹数据。在一实施例中，所述步骤S4、从原始数据中提取红绿灯数据，根据有效轨迹数据中的时间范围，从提取的红绿灯数据中筛选出与有效轨迹数据对应的有效时间范围内的红绿灯数据，根据有效时间范围内的红绿灯数据，获取红绿灯状态数据，具体包括以下步骤：步骤S41、根据公交车运行日期、公交车运行线路号对应的路口编号从原始数据的数据库中提取待处理的红绿灯数据，假设固定公交线路上连续路口/＞在一天内的红绿灯状态向量矩阵与任意路口/＞在某天的红绿灯状态数据按时间序列的向量为，/＞；步骤S42、根据有效路径轨迹数据中的时间范围，从提取的所有路口红绿灯数据中筛选得到与轨迹数据对应的有效时间范围内的红绿灯数据，具体实现为：假设根据有效轨迹数据的时间范围，则筛选出对应时间范围内的红绿灯数据为/＞。从而实现基于时空数据筛选、时空信息匹配与关联方法、处理得到与公交车固定线路完全匹配、按时间序列的时空轨迹与红绿灯相位状态数据，作为准确衡量公交车通行效率综合评价方法的数据评价基础。在一实施例中，所述步骤S5、根据获取的固定线路上连续信号交叉口上下游关联关系与空间距离关联关系、有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价策略步骤，具体包括以下步骤：根据获取的固定线路上连续信号交叉口上下游关联关系与空间距离关联关系、有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价指标，评价指标包括公交车运行时空轨迹图、公交车旅行时间、公交车旅行距离、公交车延误时间和公交车停车次数，通过公交车旅行时间、公交车旅行距离、公交车延误时间和公交车停车次数表征公交车运行效率，并结合可视化的时空轨迹图，实现公交车运行效率综合评价。在一实施例中，所述根据获取的有效轨迹数据、公交车旅行距离、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价指标，评价指标包括公交车运行时空轨迹图、公交车旅行时间、公交车旅行距离、公交车延误时间和公交车停车次数步骤，具体包括以下步骤：步骤S51、根据获取的有效轨迹数据和红绿灯状态数据，获取公交车轨迹数据与红绿灯状态数据绘制时间-空间图；步骤S52、根据获取的有效轨迹数据，获取公交车旅行时间；步骤S53、根据获取的有效轨迹数据，获取公交车旅行距离；步骤S541、根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯延误时间；步骤S542、根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取总延误时间；步骤S543、根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯停车次数；步骤S544、根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取总停车次数。通过采用线路旅行时间、线路总延误时间指标综合表征公交车旅行宏观运行效率，通过路段旅行时间、路口延误时间指标综合表征公交车微观运行效率，结合可视化的时空轨迹图，实现宏观与微观维度下的公交车运行效率综合评价，并创新性提出了红灯延误时间评价指标，以更实现准确地衡量了公交车在信号灯路口的通行效率，可以支持公交车信号优先、公交车速引导应用效果评价。在一实施例中，所述步骤S51、根据获取的有效轨迹数据和红绿灯状态数据，获取公交车轨迹数据与红绿灯状态数据绘制时间-空间图，具体实现为以时间为横坐标、以公交车距离起始站点距离为纵坐标绘制时间-空间图，如图4所示，用于可视化表达每次通行的累计旅行行程、公交车路口通行状态、固定线路连续路口红绿灯相位状态变化与时间的变化关系。在一实施例中，所述步骤S52、根据获取的有效轨迹数据，获取公交车旅行时间，当满足公交车与起点路口之间的距离达到距离阈值时，判定公交车进入到路网范围内，开始计时，记录此时的时刻，则公交车运行的旅行时间为/＞，公交车有效运行时间范围为/＞。在一实施例中，所述步骤S534、基于判定的公交车运行起讫路口、公交车运行上下游路口关联、公交车运行空间距离关联，根据有效轨迹数据，获取公交车旅行距离，具体包括以下步骤：步骤S5341、确定公交车所在路口的进口道编号；步骤S5342、计算获取任意时刻公交车沿道路到当前路口的距离；步骤S5343、基于判定的公交车运行起讫路口、公交车运行上下游路口关联、公交车运行空间距离关联，根据有效轨迹数据以及确定的公交车所在路口的进口道编号、计算获取的任意时刻公交车沿道路到当前路口的距离，获取公交车旅行距离。在一实施例中，所述步骤S5341、确定公交车所在路口的进口道编号，具体实现为：基于三角投影地图匹配算法，以连续轨迹点与为输入，计算得到公交车所在路口进口道投影点/＞及进口道编号/＞作为Link匹配结果，如图5所示。在一实施例中，所述步骤S5342、计算获取任意时刻公交车沿道路到当前路口的距离，具体实现为：由于存在定位偏差，并且地图参考点具备一定稀疏性，公交车到路口的距离并不能完全采用参考点累计距离。本专利基于Link匹配的投影点，结合道路参考点数据计算到路口的距离，作为任意时刻公交车沿道路到当前路口的距离。如上图所示，通过Link匹配的进口道编号包含四个参考点/＞，投影点/＞位于参考点/＞与/＞中间，那么该轨迹点到路口的距离DTC可以表示为/＞，其中/＞可以基于/＞三个点组成的三角形求解。套用公式求解/＞。在一实施例中，所述步骤S5343、基于判定的公交车运行起讫路口、公交车运行上下游路口关联、公交车运行空间距离关联，根据有效轨迹数据以及确定的公交车所在路口的进口道编号、计算获取的任意时刻公交车沿道路到当前路口的距离，获取公交车旅行距离，具体实现为：如图6所示，从有效路径起点开始到任意时刻公交车所在位置为止，沿道路通行的累积里程。里程计算分为公交车在任意相邻路口进口道路的旅行距离公交车在路口冲突区域的旅行距离/＞两部分。如图6所示，公交车旅行距离，在一实施例中，所述根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯延误时间，具体包括以下步骤：筛选出预设范围内的停车轨迹数据；筛选出预设范围内公交车所在进口道的红绿灯相位状态数据；根据筛选出的预设范围内的停车轨迹数据和预设范围内公交车所在进口道的红绿灯相位状态数据，计算获取红灯延误时间。在一实施例中，所述根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取总延误时间步骤，还包括以下步骤：获取路口理想通行时间；根据获取的有效轨迹数据，获取路口实际通行时间；根据获取的路口理想通行时间和路口实际通行时间，获取总延误时间。在一实施例中，所述根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯停车次数步骤，还包括以下步骤：根据有效时间范围内的红绿灯数据以及红绿灯状态数据，以预设时间段内的连续停车作为一次停车，获取公交车位于路口预设范围内由于红灯引起的停车次数作为红灯停车次数。在一实施例中，所述根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取总停车次数步骤，还包括以下步骤：根据有效时间范围内的红绿灯数据以及红绿灯状态数据，以预设时间段内的连续停车作为一次停车，获取公交车在进口道的停车次数作为总停车次数。在一实施例中，步骤S541- S544根据获取的有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取红灯延误时间、红灯停车次数、总延误时间和总停车次数，具体实现为：将公交车路径有效轨迹按路口节点打断，得到公交车位于任意路口进口道/＞的轨迹数据/＞，式中/＞表示公交车位于路口/＞的初始时刻。筛选100米范围内的停车轨迹数据；/＞筛选100米范围内公交车所在进口道的红绿灯相位状态数据；红灯期间停车的轨迹数据，根据红灯期间停车的轨迹数据计算停车时长作为红灯延误，在一实施例中，如图7所示，所述根据红灯期间停车的轨迹数据计算停车时长作为红灯延误时间步骤，具体包括以下步骤：获取时间范围内存在的信号周期数量；当时间范围内存在的信号周期数量为一个时，计算一个周期内红灯时间范围，筛选红灯时间范围内的轨迹数据，从筛选出的红灯时间范围内的轨迹数据中判定红灯时间范围内停车时长，获取红灯延误时间；当时间范围内存在的信号周期数量为多个时，计算跨周期红灯持续时间，获取红灯延误时间。路口总延误时间计算过程如下：假设路口道路设计理想通行速度为/＞，那么理想通行时间/＞为：则路口总延误时间。带入公式、，总延误/＞可表示为：停车次数包括红灯停车次数与总停车次数。以一段时间内的连续停车作为一次停车，红灯停车次数表示公交车位于路口范围100米内时由于红灯引起的停车次数，总停车次数表示公交车在进口道的停车次数。红灯停车次数为：总停车次数为：第二方面，基于同一发明构思，本申请提供了一种智能网联公交车通行效率综合评价系统，包括原始数据获取模块、关联关系获取模块、轨迹数据获取模块、红绿灯数据获取模块和评价策略获取模块，原始数据获取模块用于获取智网联公交车通行效率综合评价所需的原始数据；根据获取的原始数据，获取固定线路上连续信号交叉口上下游关联关系与空间距离关联关系；关联关系获取模块与所述原始数据获取模块通信连接，根据获取的原始数据，获取固定线路上连续信号交叉口上下游关联关系与空间距离关联关系；轨迹数据获取模块与所述原始数据获取模块通信连接，用于从原始数据中提取轨迹数据，筛选出有效轨迹数据；红绿灯数据获取模块与所述原始数据获取模块通信连接，用于从原始数据中提取红绿灯数据，根据有效轨迹数据中的时间范围，从提取的红绿灯数据中筛选出与有效轨迹数据对应的有效时间范围内的红绿灯数据，根据有效时间范围内的红绿灯数据，获取红绿灯状态数据；评价策略获取模块与所述关联关系获取模块、所述轨迹数据获取模块和所述红绿灯数据获取模块通信连接，用于根据获取的固定线路上连续信号交叉口上下游关联关系与空间距离关联关系、有效轨迹数据、有效时间范围内的红绿灯数据以及红绿灯状态数据，获取智网联公交车通行效率综合评价策略。本请提供了一种智能网联公交车通行效率综合评价系统，充分发挥智能网联环境下公交车轨迹数据、红绿灯状态数据与路网地图数据的实时同步可获取性优势，设计了一套完整的智能网联公交车运行效率综合评价系统架构；系统各个模块具备独立异步处理的能力，数据处理流程中不同数据源耦合度相对较低；采用时空关联与匹配的数据处理方法，计算过程简单、计算效率高，可适用于大规模数据同时处理；同时从宏观、微观两个角度设计了公交车运行效率综合评价指标，可以实现可视化及指标定量展示，区别与现有公交车运行效率对线路、站点运营的评价，本专利可对信号灯路口通行效率展开评价。基于同一发明构思，本申请实施例还提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现上述方法的所有方法步骤或部分方法步骤。本发明实现上述方法中的全部或部分流程，也可以通过计算机程序来指令相关的硬件来完成，计算机程序可存储于一计算机可读存储介质中，该计算机程序在被处理器执行时，可实现上述各个方法实施例的步骤。其中，计算机程序包括计算机程序代码，计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。计算机可读介质可以包括：能够携带计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。需要说明的是，计算机可读介质包含的内容可以根据司法管辖区内立法和专利实践的要求进行适当的增减，例如在某些司法管辖区，根据立法和专利实践，计算机可读介质不包括电载波信号和电信信号。基于同一发明构思，本申请实施例还提供一种电子设备，包括存储器和处理器，存储器上储存有在处理器上运行的计算机程序，处理器执行计算机程序时实现上述方法中的所有方法步骤或部分方法步骤。所称处理器可以是中央处理单元，还可以是其他通用处理器、数字信号处理器、专用集成电路、现成可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等，处理器是计算机装置的控制中心，利用各种接口和线路连接整个计算机装置的各个部分。存储器可用于存储计算机程序和/或模块，处理器通过运行或执行存储在存储器内的计算机程序和/或模块，以及调用存储在存储器内的数据，实现计算机装置的各种功能。存储器可主要包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需的应用程序；存储数据区可存储根据手机的使用所创建的数据。此外，存储器可以包括高速随机存取存储器，还可以包括非易失性存储器，例如硬盘、内存、插接式硬盘，智能存储卡，安全数字卡，闪存卡、至少一个磁盘存储器件、闪存器件、或其他易失性固态存储器件。本领域内的技术人员应明白，本发明的实施例可提供为方法、系统、服务器或计算机程序产品。因此，本发明可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本发明是参照根据本发明实施例的方法、设备、服务器和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。显然，本领域的技术人员可以对本发明进行各种改动和变型而不脱离本发明的精神和范围。这样，倘若本发明的这些修改和变型属于本发明权利要求及其等同技术的范围之内，则本发明也意图包含这些改动和变型在内。
