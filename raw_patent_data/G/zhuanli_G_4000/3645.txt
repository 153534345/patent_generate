标题title
通风系统控制箱的状态检测方法、装置及存储介质
摘要abst
本发明属于通风系统控制箱的运维技术领域，公开了一种通风系统控制箱的状态检测方法、装置及存储介质，本发明采用巡检机器人+机器学习的方式来进行通风系统控制箱的状态检测，实现了无人化操作，减小了工作人员进出危险环境的安全风险，提高了巡检质量，降低了人工成本；同时，检测准确率、检测全面性以及可靠性高，并能够在发现控制箱故障时进行及时上报，避免了传统人工巡检容易出现漏检以及无法及时上报故障的问题，实现了通风系统控制箱工作状态的实时监测，保障了管廊内的通风状况，适用于在管廊巡检领域的大规模应用与推广。
权利要求书clms
1.一种通风系统控制箱的状态检测方法，其特征在于，包括：获取目标通风系统控制箱的工作图像，其中，所述工作图像中包含有所述目标通风系统控制箱上所有的工作信号灯，且所述工作图像是由巡检机器人采集得到的；获取控制箱状态检测模型，其中，所述控制箱状态检测模型是以海量样本通风系统控制箱的样本工作图像以及每个样本工作图像的状态标签为输入，每个样本通风系统控制箱的工作状态检测结果为输出而训练得到的，任一样本通风系统控制箱的工作状态检测结果包括该任一样本通风系统控制箱上各个工作信号灯的指示状态，且所述控制箱状态检测模型为训练后的加权双向特征金字塔网络；将所述工作图像输入至所述控制箱状态检测模型中进行状态检测处理，得到所述目标通风系统控制箱的工作状态检测结果。2.根据权利1所述的方法，其特征在于，在获取目标通风系统控制箱的工作图像前，所述方法还包括：获取海量样本通风系统控制箱的原始工作图像，并对海量原始工作图像进行图像清洗，以剔除海量原始工作图像中的模糊图像和光线缺陷图像，得到预处理原始工作图像集，其中，任一样本通风系统控制箱的原始工作图像包含该任一样本通风系统控制箱上所有的工作信号灯；依据所述预处理原始工作图像集中每张预处理原始工作图像对应的样本通风系统控制箱上各个工作信号灯的指示状态，对每张预处理原始工作图像进行标签标注，得到每张预处理原始工作图像的状态标签；对每张预处理原始工作图像进行数据增强处理，得到样本工作图像集；利用样本工作图像集和样本工作图像集中每张样本工作图像的状态标签，组成训练集；以所述训练集为输入，每张样本工作图像对应的样本通风系统控制箱的工作状态检测结果为输出，训练加权双向特征金字塔网络，以在训练完成后，将训练后的加权双向特征金字塔网络，作为所述控制箱状态检测模型。3.根据权利要求2所述的方法，其特征在于，对海量原始工作图像进行图像清洗，以剔除海量原始工作图像中的模糊图像和光线缺陷图像，得到预处理原始工作图像集，包括：对于海量原始工作图像中的第i张原始工作图像，对所述第i张原始工作图像进行快速傅里叶变换，得到所述第i张原始工作图像中的频谱信息；基于第i张原始工作图像中的频谱信息，判断所述第i张原始工作图像是否为模糊图像；若是，则删除所述第i张原始工作图像；将i自加1，并重新对所述第i张原始工作图像进行快速傅里叶变换，直至i等于n时，得到预选工作图像集，其中，i的初始值为1，且n为原始工作图像的总数量；对于所述预选工作图像集中的第k张预选工作图像，计算所述第k张预选工作图像的通道灰度值，并基于所述第k张预选工作图像的通道灰度值，判断所述第k张预选工作图像是否为光线缺陷图像；若是，则从所述预选工作图像集中删除所述第k张预选工作图像；将k自加1，并重新计算所述第k张预选工作图像的通道灰度值，直至k等于m时，得到所述预处理原始工作图像集，其中，k的初始值为1，且m为预选工作图像的总数量。4.根据权利要求3所述的方法，其特征在于，计算所述第k张预选工作图像的通道灰度值，并基于所述第k张预选工作图像的通道灰度值，判断所述第k张预选工作图像是否为光线缺陷图像，包括：利用灰度世界算法，计算出所述第k张预选工作图像中每个颜色通道的灰度均值，以利用每个颜色通道的灰度均值，组成所述第k张预选工作图像的通道灰度值，其中，所述颜色通道为红色通道、蓝色通道和绿色通道；计算所述通道灰度值中三个灰度均值对应的中位数，以将所述中位数作为灰度阈值；若所述通道灰度值中的各个灰度均值均偏离所述灰度阈值，则判定所述第k张预选工作图像为光线缺陷图像。5.根据权利要求2所述的方法，其特征在于，对每张预处理原始工作图像进行数据增强处理，得到样本工作图像集，包括：对每张预处理原始工作图像分别进行图像变换处理，以在图像变换处理后，得到变换工作图像集，其中，所述图像变换处理包括随机镜像处理、平移处理、色调调整处理、透明度调整处理、降噪处理以及仿射变换处理；对于所述变换工作图像集中的每张变换工作图像，按照第一预设比例对每张变换工作图像进行裁剪处理，得到裁剪后的变换工作图像；对每张裁剪后的变换工作图像进行像素填充处理，得到若干像素填充工作图像；对变换工作图像集中的各张变换工作图像进行拼接处理，得到若干拼接工作图像；利用若干像素填充工作图像和若干拼接工作图像，组成所述样本工作图像集。6.根据权利要求5所述的方法，其特征在于，对变换工作图像集中的各张变换工作图像进行拼接处理，得到若干拼接工作图像，包括：从所述变换工作图像集中选取x张变换工作图像，并将x张变换工作图像中的任一张变换工作图像作为载体图像，其中，x为大于1的正整数；将目标图像按照第二预设比例进行裁剪处理，得到裁剪目标图像，其中，所述目标图像为从x张变换工作图像中删除所述载体图像后所剩余的变换工作图像；将所述裁剪目标图像拼接至所述载体图像，得到x张变换工作图像对应的拼接工作图像；从所述变换工作图像集中删除所述x张变换工作图像，得到处理后的变换工作图像集；将所述变换工作图像集更新为处理后的变换工作图像集，并重新从所述变换工作图像集中选取x张变换工作图像，直至满足拼接结束条件时为止，以便在满足拼接结束条件时，得到若干拼接工作图像。7.根据权利要求1所述的方法，其特征在于，所述控制箱状态检测模型的部署形式为Python WebAPI，其中，获取控制箱状态检测模型，包括：利用Python WebAPI接口，调用所述控制箱状态检测模型；相应的，在得到所述目标通风系统控制箱的工作状态检测结果后，所述方法还包括：将所述工作状态检测结果存储至服务器和/或发送至监控端，以便所述监控端在接收到所述工作状态检测结果后，将所述工作状态检测结果进行可视化展示。8.一种通风系统控制箱的状态检测装置，其特征在于，包括：图像获取单元，用于获取目标通风系统控制箱的工作图像，其中，所述工作图像中包含有所述目标通风系统控制箱上所有的工作信号灯，且所述工作图像是由巡检机器人采集得到的；模型调用单元，用于获取控制箱状态检测模型，其中，所述控制箱状态检测模型是以海量样本通风系统控制箱的样本工作图像以及每个样本工作图像的状态标签为输入，每个样本通风系统控制箱的工作状态检测结果为输出而训练得到的，任一样本通风系统控制箱的工作状态检测结果包括该任一样本通风系统控制箱上各个工作信号灯的指示状态，且所述控制箱状态检测模型为训练后的加权双向特征金字塔网络；状态检测单元，用于将所述工作图像输入至所述控制箱状态检测模型中进行状态检测处理，得到所述目标通风系统控制箱的工作状态检测结果。9.一种通风系统控制箱的状态检测装置，其特征在于，包括：依次通信相连的存储器、处理器和收发器，其中，所述存储器用于存储计算机程序，所述收发器用于收发消息，所述处理器用于读取所述计算机程序，执行如权利要求1～7任意一项所述的通风系统控制箱的状态检测方法。10.一种存储介质，其特征在于，所述存储介质上存储有指令，当所述指令在计算机上运行时，执行如权利要求1～7任意一项所述的通风系统控制箱的状态检测方法。
说明书desc
技术领域本发明属于通风系统控制箱的运维技术领域，具体涉及一种通风系统控制箱的状态检测方法、装置及存储介质。背景技术城市综合管廊需要利用通风系统来及时排出管廊内的有害气体，从而保证管廊内通风状况良好，以避免安全事故的发生；目前，针对城市综合管廊内通风系统控制箱的巡检，大多是采用巡检人员到点巡检，其存在以下不足：人工成本高，效率慢，且人工巡检存在一定的安全隐患；容易出现巡检遗漏，且无法实时监控管廊内的通风状况，从而导致通风系统故障无法及时上报，以及产生的有害气体无法及时排出，造成一定的安全隐患；基于此，如何提供一种效率高、巡检可靠性强，以及能够实时检测通风系统故障的通风系统控制箱的状态检测方法，已成为一个亟待解决的问题。发明内容本发明的目的是提供一种通风系统控制箱的状态检测方法、装置及存储介质，用以解决现有技术中所存在的成本高、效率慢、无法及时上报通风系统故障以及存在一定安全隐患的问题。为了实现上述目的，本发明采用以下技术方案：第一方面，提供了一种通风系统控制箱的状态检测方法，包括：获取目标通风系统控制箱的工作图像，其中，所述工作图像中包含有所述目标通风系统控制箱上所有的工作信号灯，且所述工作图像是由巡检机器人采集得到的；获取控制箱状态检测模型，其中，所述控制箱状态检测模型是以海量样本通风系统控制箱的样本工作图像以及每个样本工作图像的状态标签为输入，每个样本通风系统控制箱的工作状态检测结果为输出而训练得到的，任一样本通风系统控制箱的工作状态检测结果包括该任一样本通风系统控制箱上各个工作信号灯的指示状态，且所述控制箱状态检测模型为训练后的加权双向特征金字塔网络；将所述工作图像输入至所述控制箱状态检测模型中进行状态检测处理，得到所述目标通风系统控制箱的工作状态检测结果。基于上述公开的内容，本发明构建有控制箱状态检测模型，且预先采用海量样本通风系统控制箱的样本工作图像以及每个样本工作图像的状态标签来训练该模型；如此，本发明相当于采用机器学习的方式，实现了通风系统控制箱的状态检测；因此，在实际应用时，先通过巡检机器人来采集目标通风系统控制箱的工作图像；而后，将该工作图像输入至前述控制箱状态检测模型，即可得目标通风系统控制箱的工作状态检测结果；由此通过前述设计，本发明采用巡检机器人+机器学习的方式来进行通风系统控制箱的状态检测，实现了无人化操作，减小了工作人员进出危险环境的安全风险，提高了巡检质量，降低了人工成本；同时，检测准确率、检测全面性以及可靠性高，并能够在发现控制箱故障时进行及时上报，避免了传统人工巡检容易出现漏检以及无法及时上报故障的问题，实现了通风系统控制箱工作状态的实时监测，保障了管廊内的通风状况，适用于在管廊巡检领域的大规模应用与推广。在一个可能的设计中，在获取目标通风系统控制箱的工作图像前，所述方法还包括：获取海量样本通风系统控制箱的原始工作图像，并对海量原始工作图像进行图像清洗，以剔除海量原始工作图像中的模糊图像和光线缺陷图像，得到预处理原始工作图像集，其中，任一样本通风系统控制箱的原始工作图像包含该任一样本通风系统控制箱上所有的工作信号灯；依据所述预处理原始工作图像集中每张预处理原始工作图像对应的样本通风系统控制箱上各个工作信号灯的指示状态，对每张预处理原始工作图像进行标签标注，得到每张预处理原始工作图像的状态标签；对每张预处理原始工作图像进行数据增强处理，得到样本工作图像集；利用样本工作图像集和样本工作图像集中每张样本工作图像的状态标签，组成训练集；以所述训练集为输入，每张样本工作图像对应的样本通风系统控制箱的工作状态检测结果为输出，训练加权双向特征金字塔网络，以在训练完成后，将训练后的加权双向特征金字塔网络，作为所述控制箱状态检测模型。在一个可能的设计中，对海量原始工作图像进行图像清洗，以剔除海量原始工作图像中的模糊图像和光线缺陷图像，得到预处理原始工作图像集，包括：对于海量原始工作图像中的第i张原始工作图像，对所述第i张原始工作图像进行快速傅里叶变换，得到所述第i张原始工作图像中的频谱信息；基于第i张原始工作图像中的频谱信息，判断所述第i张原始工作图像是否为模糊图像；若是，则删除所述第i张原始工作图像；将i自加1，并重新对所述第i张原始工作图像进行快速傅里叶变换，直至i等于n时，得到预选工作图像集，其中，i的初始值为1，且n为原始工作图像的总数量；对于所述预选工作图像集中的第k张预选工作图像，计算所述第k张预选工作图像的通道灰度值，并基于所述第k张预选工作图像的通道灰度值，判断所述第k张预选工作图像是否为光线缺陷图像；若是，则从所述预选工作图像集中删除所述第k张预选工作图像；将k自加1，并重新计算所述第k张预选工作图像的通道灰度值，直至k等于m时，得到所述预处理原始工作图像集，其中，k的初始值为1，且m为预选工作图像的总数量。在一个可能的设计中，计算所述第k张预选工作图像的通道灰度值，并基于所述第k张预选工作图像的通道灰度值，判断所述第k张预选工作图像是否为光线缺陷图像，包括：利用灰度世界算法，计算出所述第k张预选工作图像中每个颜色通道的灰度均值，以利用每个颜色通道的灰度均值，组成所述第k张预选工作图像的通道灰度值，其中，所述颜色通道为红色通道、蓝色通道和绿色通道；计算所述通道灰度值中三个灰度均值对应的中位数，以将所述中位数作为灰度阈值；若所述通道灰度值中的各个灰度均值均偏离所述灰度阈值，则判定所述第k张预选工作图像为光线缺陷图像。在一个可能的设计中，对每张预处理原始工作图像进行数据增强处理，得到样本工作图像集，包括：对每张预处理原始工作图像分别进行图像变换处理，以在图像变换处理后，得到变换工作图像集，其中，所述图像变换处理包括随机镜像处理、平移处理、色调调整处理、透明度调整处理、降噪处理以及仿射变换处理；对于所述变换工作图像集中的每张变换工作图像，按照第一预设比例对每张变换工作图像进行裁剪处理，得到裁剪后的变换工作图像；对每张裁剪后的变换工作图像进行像素填充处理，得到若干像素填充工作图像；对变换工作图像集中的各张变换工作图像进行拼接处理，得到若干拼接工作图像；利用若干像素填充工作图像和若干拼接工作图像，组成所述样本工作图像集。在一个可能的设计中，对变换工作图像集中的各张变换工作图像进行拼接处理，得到若干拼接工作图像，包括：从所述变换工作图像集中选取x张变换工作图像，并将x张变换工作图像中的任一张变换工作图像作为载体图像，其中，x为大于1的正整数；将目标图像按照第二预设比例进行裁剪处理，得到裁剪目标图像，其中，所述目标图像为从x张变换工作图像中删除所述载体图像后所剩余的变换工作图像；将所述裁剪目标图像拼接至所述载体图像，得到x张变换工作图像对应的拼接工作图像；从所述变换工作图像集中删除所述x张变换工作图像，得到处理后的变换工作图像集；将所述变换工作图像集更新为处理后的变换工作图像集，并重新从所述变换工作图像集中选取x张变换工作图像，直至满足拼接结束条件时为止，以便在满足拼接结束条件时，得到若干拼接工作图像。在一个可能的设计中，所述控制箱状态检测模型的部署形式为Python WebAPI，其中，获取控制箱状态检测模型，包括：利用Python WebAPI接口，调用所述控制箱状态检测模型；相应的，在得到所述目标通风系统控制箱的工作状态检测结果后，所述方法还包括：将所述工作状态检测结果存储至服务器和/或发送至监控端，以便所述监控端在接收到所述工作状态检测结果后，将所述工作状态检测结果进行可视化展示。第二方面，提供了一种通风系统控制箱的状态检测装置，包括：图像获取单元，用于获取目标通风系统控制箱的工作图像，其中，所述工作图像中包含有所述目标通风系统控制箱上所有的工作信号灯，且所述工作图像是由巡检机器人采集得到的；模型调用单元，用于获取控制箱状态检测模型，其中，所述控制箱状态检测模型是以海量样本通风系统控制箱的样本工作图像以及每个样本工作图像的状态标签为输入，每个样本通风系统控制箱的工作状态检测结果为输出而训练得到的，任一样本通风系统控制箱的工作状态检测结果包括该任一样本通风系统控制箱上各个工作信号灯的指示状态，且所述控制箱状态检测模型为训练后的加权双向特征金字塔网络；状态检测单元，用于将所述工作图像输入至所述控制箱状态检测模型中进行状态检测处理，得到所述目标通风系统控制箱的工作状态检测结果。第三方面，提供了另一种通风系统控制箱的状态检测装置，以装置为电子设备为例，包括依次通信相连的存储器、处理器和收发器，其中，所述存储器用于存储计算机程序，所述收发器用于收发消息，所述处理器用于读取所述计算机程序，执行如第一方面或第一方面中任意一种可能设计的所述通风系统控制箱的状态检测方法。第四方面，提供了一种存储介质，存储介质上存储有指令，当所述指令在计算机上运行时，执行如第一方面或第一方面中任意一种可能设计的所述通风系统控制箱的状态检测方法。第五方面，提供了一种包含指令的计算机程序产品，当指令在计算机上运行时，使计算机执行如第一方面或第一方面中任意一种可能设计的所述通风系统控制箱的状态检测方法。有益效果：本发明采用巡检机器人+机器学习的方式来进行通风系统控制箱的状态检测，实现了无人化操作，减小了工作人员进出危险环境的安全风险，提高了巡检质量，降低了人工成本；同时，检测准确率、检测全面性以及可靠性高，并能够在发现控制箱故障时进行及时上报，避免了传统人工巡检容易出现漏检以及无法及时上报故障的问题，实现了通风系统控制箱工作状态的实时监测，保障了管廊内的通风状况，适用于在管廊巡检领域的大规模应用与推广。附图说明图1为本发明实施例提供的通风系统控制箱的状态检测方法的步骤流程示意图；图2为本发明实施例提供的通风系统控制箱的状态检测装置的结构示意图；图3为本发明实施例提供的电子设备的结构示意图。具体实施方式为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将结合附图和实施例或现有技术的描述对本发明作简单地介绍，显而易见地，下面关于附图结构的描述仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。在此需要说明的是，对于这些实施例方式的说明用于帮助理解本发明，但并不构成对本发明的限定。应当理解，尽管本文可能使用术语第一、第二等等来描述各种单元，但是这些单元不应当受到这些术语的限制。这些术语仅用于区分一个单元和另一个单元。例如可以将第一单元称作第二单元,并且类似地可以将第二单元称作第一单元，同时不脱离本发明的示例实施例的范围。应当理解，对于本文中可能出现的术语“和/或”，其仅仅是一种描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，单独存在B，同时存在A和B三种情况；对于本文中可能出现的术语“/和”，其是描述另一种关联对象关系，表示可以存在两种关系，例如，A/和B，可以表示：单独存在A，单独存在A和B两种情况；另外，对于本文中可能出现的字符“/”，一般表示前后关联对象是一种“或”关系。实施例：参见图1所示，本实施例所提供的通风系统控制箱的状态检测方法，能够实现无人化巡检，不仅减小了工作人员的巡检风险，还可全面、准确的完成管廊内各通风系统控制箱的状态检测，能够实现通风系统控制箱状态的实时监测以及故障的及时上报，保障了管廊内的通风状况良好，适用于在管廊巡检领域的大规模应用与推广；在本实施例中，举例该方法可以但不限于在服务器侧运行，可以理解的，前述执行主体并不构成对本申请实施例的限定，相应的，本方法的运行步骤可以但不限于如下述步骤S1～S3所示。S1.获取目标通风系统控制箱的工作图像，其中，所述工作图像中包含有所述目标通风系统控制箱上所有的工作信号灯，且所述工作图像是由巡检机器人采集得到的；在本实施例中，可以但不限于在城市管廊中部署巡检机器人，由巡检机器人按照预定路线进行城市管廊内各个目标通风系统控制箱的巡检；具体的，由巡检机器人进行城市管廊内各个目标通风系统控制箱的拍照，从而得到各个目标通风系统控制箱的工作图像；可选的，巡检机器人拍照的方法为：巡检机器人移动到一目标通风系统控制箱上方后静止，延长伸缩杆到该目标通风系统控制箱的水平位置，摄像头对准该目标通风系统控制箱，并自动聚焦，从而拍摄得到工作图像。另外，目标通风系统控制箱的工作图像包含有该目标通风系统控制箱上所有的工作信号灯；如此，即可通过识别工作信号灯的指示状态，来确定出该目标通风系统控制箱的工作状态。在本实施例中，是采用训练后的神经网络，来进行工作图像中工作信号灯的状态识别，从而得到目标通风系统控制箱的工作状态检测结果；具体的，模型获取过程如下述步骤S2所示。S2.获取控制箱状态检测模型，其中，所述控制箱状态检测模型是以海量样本通风系统控制箱的样本工作图像以及每个样本工作图像的状态标签为输入，每个样本通风系统控制箱的工作状态检测结果为输出而训练得到的，任一样本通风系统控制箱的工作状态检测结果包括该任一样本通风系统控制箱上各个工作信号灯的指示状态，且所述控制箱状态检测模型为训练后的加权双向特征金字塔网络；在具体应用时，则是用前述海量样本工作图像和每个样本工作图像的状态标签，来训练加权双向特征金字塔网络，从而得到前述控制箱状态检测模型；在本实施例中，使用加权双向特征金字塔网络作为控制箱状态检测模型的网络架构，可在模型精确度以及运算速度上优于其余神经网络，从而提高检测准确性以及速度。可选的，下述提供加权双向特征金字塔网络的其中一种训练过程，如下述步骤S01～S05所示。S01.获取海量样本通风系统控制箱的原始工作图像，并对海量原始工作图像进行图像清洗，以剔除海量原始工作图像中的模糊图像和光线缺陷图像，得到预处理原始工作图像集，其中，任一样本通风系统控制箱的原始工作图像包含该任一样本通风系统控制箱上所有的工作信号灯；在本实施例中，举例可以但不限于采用图片爬虫方式，来在线采集若干样本通风系统的工作图像，以及实地采集城市管廊内包含有管廊背景的样本通风系统控制箱的工作图像，从而利用前述采集的两类图像，组成海量样本通风系统控制箱的原始工作图像。在本实施例中，进行图像清洗，可去除原始工作图像中的模糊图像和光线缺陷图像，从而避免前述图像对训练的干扰，进而提高模型训练的可靠性；当然，在进行图像清洗前，可以手动去除不符合管廊场景的原始工作图像。可选的，举例图像清洗过程可以但不限于如下述步骤S01a～S01g所示。S01a.对于海量原始工作图像中的第i张原始工作图像，对所述第i张原始工作图像进行快速傅里叶变换，得到所述第i张原始工作图像中的频谱信息；在本实施例中，第i张原始工作图像的频谱信息主要包括有第i张原始工作图像的高频分量和低频分量；而后，基于第i张原始工作图像的高频分量，即可判断出该第i张原始工作图像是否为模糊图像；其中，判断过程如下述步骤S01b所示。S01b.基于第i张原始工作图像中的频谱信息，判断所述第i张原始工作图像是否为模糊图像；在本实施例中，若第i张原始工作图像中含有预设比例的高频分量，则说明该i张原始工作图像为模糊图像，需要执行下述步骤S01c进行删除，反之，则不是模糊图像，可予以保留；当然，该占比可根据实际使用而预设，在此不作具体限定。S01c.若是，则删除所述第i张原始工作图像。在完成第i张原始工作图像是否为模糊图像的判断后，即可以前述步骤S01a～S01c所公开的方法，来进行其余原始工作图像的模糊判断，其中，循环判断过程如下述步骤S01d所示。S01d.将i自加1，并重新对所述第i张原始工作图像进行快速傅里叶变换，直至i等于n时，得到预选工作图像集，其中，i的初始值为1，且n为原始工作图像的总数量；在本实施例中，不断重复前述步骤S01a～S01c，即可去除海量原始工作图像中的模糊图像，得到预选工作图像集；而后，则可进行预选工作图像集中光线缺陷图像的去除，如下述步骤S01e所示。S01e.对于所述预选工作图像集中的第k张预选工作图像，计算所述第k张预选工作图像的通道灰度值，并基于所述第k张预选工作图像的通道灰度值，判断所述第k张预选工作图像是否为光线缺陷图像；在具体应用时，举例光线缺陷图像为光线过亮或过暗的预选工作图像；具体的，是通过预选工作图像的通道灰度值来判定的，其过程如下述步骤所示。第一步：利用灰度世界算法，计算出所述第k张预选工作图像中每个颜色通道的灰度均值，以利用每个颜色通道的灰度均值，组成所述第k张预选工作图像的通道灰度值，其中，所述颜色通道为红色通道、蓝色通道和绿色通道。第二步：计算所述通道灰度值中三个灰度均值对应的中位数，以将所述中位数作为灰度阈值；在本实施例中，可以但不限于将三个灰度均值按照从小至大的顺序进行排序，从而得到三个灰度均值的中位数；当然，也可将三个灰度均值按照从大至小的顺序进行排序，来得到三个灰度均值的中位数；在得到三个灰度均值对应的中位数后，即可基于中位数，来判断第k个预选工作图像是否为光线缺陷图像；其中，判断过程如下述第三步所示。第三步：若所述通道灰度值中的各个灰度均值均偏离所述灰度阈值，则判定所述第k张预选工作图像为光线缺陷图像；在具体实施时，可设置一个偏移范围，若各个灰度值与灰度阈值之间的差值，不属于前述偏移范围，则可判定第k张预选工作图像为光线缺陷图像，需要从预选工作图像集中删除；反之，若差值处于偏移范围内，则需要予以保留，然后进行下一张预选工作图像是否为光线缺陷图像的判断，可选的，删除过程以及循环判断过程如下述步骤S01f和步骤S01g所示。S01f.若是，则从所述预选工作图像集中删除所述第k张预选工作图像。S01g.将k自加1，并重新计算所述第k张预选工作图像的通道灰度值，直至k等于m时，得到所述预处理原始工作图像集，其中，k的初始值为1，且m为预选工作图像的总数量。由此通过前述步骤S01a～S01g，即可完成原始工作图像中模糊图像以及光线缺陷图像的去除，从而避免前述模糊图像和光线缺陷图像对模型训练的干扰。在完成模糊图像以及光线缺陷图像的去除后，则可进行图像的标注处理，以得到各张预处理原始工作图像的状态标签；具体的，标签标注过程可以但不限于如下述步骤S02所示。S02.依据所述预处理原始工作图像集中每张预处理原始工作图像对应的样本通风系统控制箱上各个工作信号灯的指示状态，对每张预处理原始工作图像进行标签标注，得到每张预处理原始工作图像的状态标签；在本实施例中，对于任一预处理原始工作图像，可根据任一预处理原始工作图像对应样本通风系统控制箱上各个工作信号灯的状态，来完成该任一预处理原始工作图像的标签标注；具体的，主要有5种状态标签，分别为通风系统控制箱电源关闭状态,通风系统控制箱电源打开状态,通风系统控制箱隔绝状态,通风系统控制箱清洁状态,以及通风系统控制箱滤毒状态；如此，按照前述原理，即可完成每张预处理原始工作图像的标签标注。在得到每张预处理原始工作图像的状态标签后，还需对预处理原始工作图像进行数据增强处理，以提高模型的泛化能力，如下述步骤S03所示。S03.对每张预处理原始工作图像进行数据增强处理，得到样本工作图像集；在本实施例中，举例数据增强处理主要包括对单张图像的变换处理，以及变换后图像的裁剪和拼接处理；具体的，前述数据增强处理过程可以但不限于如下述步骤S03a～S03e所示。S03a.对每张预处理原始工作图像分别进行图像变换处理，以在图像变换处理后，得到变换工作图像集，其中，所述图像变换处理包括随机镜像处理、平移处理、色调调整处理、透明度调整处理、降噪处理以及仿射变换处理；在本实施例中，前述图像变换处理中的各项处理过程无先后顺序，且过程包括平移、缩放、旋转、翻转和错切，如此，将单张图片变为多张图片，可提升模型的泛化性。在完成各张预处理原始工作图像的变换处理后，则可分别进行裁剪处理和拼接处理，其中，裁剪处理可以但不限于如下述步骤S03b和步骤S03c所示。S03b.对于所述变换工作图像集中的每张变换工作图像，按照第一预设比例对每张变换工作图像进行裁剪处理，得到裁剪后变换工作图像；在本实施例中，第一预设比例可以但不限于20％、40％或60％等，即对于任一变换工作图像，按照整张图像20％、40％或60％的比例，进行裁剪，得到该任一变换工作图像对应的裁剪后的变换工作图像；当然，其余各变换工作图像的裁剪过程与前述举例相同，于此不再赘述；另外，第一预设比例可根据实际使用而具体设定，在此不限定于前述举例。在得到各变换工作图像对应的裁剪后的图像后，则可进行像素填充处理，如下述步骤S03c所示。S03c.对每张裁剪后的变换工作图像进行像素填充处理，得到若干像素填充工作图像；在具体应用时，可以但不限于在裁剪后的变换工作图像的裁剪区域中，填充255像素值；如，假设变换工作图像A裁剪了20％的区域，那么，则是将20％的区域从变换工作图像中抠除，而后，即可在该20％区域内填充255像素值；如此，基于前述操作，则可减少模型对某些局部特征的过拟合，提高模型对遮挡和噪声的鲁棒性；另外，在本实施例中，由于变换工作图像是预处理原始工作图像经图像变换处理所得到的，因此，其对应的状态标签与原本的预处理原始工作图像一致，并未发生变化。在完成变换工作图像的裁剪处理后，则可进行其对应的拼接处理，如下述步骤S03d所示。S03d.对变换工作图像集中的各张变换工作图像进行拼接处理，得到若干拼接工作图像；在本实施例中，举例拼接处理过程可以但不限于如下步骤S03d1～S03d5所示。S03d1.从所述变换工作图像集中选取x张变换工作图像，并将x张变换工作图像中的任一张变换工作图像作为载体图像，其中，x为大于1的正整数；在本实施例中，举例x可以但不限于为9，即从变换工作图集中选取9张变换工作图像，然后将9张变换工作图像中的任一张，作为载体图像，而后，将其余8张进行裁剪处理，最后，再拼接到该载体图像上；可选的，前述过程可以但不限于如下述步骤S03d2和步骤S03d3所示。S03d2.将目标图像按照第二预设比例进行裁剪处理，得到裁剪目标图像，其中，所述目标图像为从x张变换工作图像中删除所述载体图像后所剩余的变换工作图像；在本实施例中，目标图像的裁剪处理，其处理过程与前述步骤S03b相同，其原理不再赘述。S03d3.将所述裁剪目标图像拼接至所述载体图像，得到x张变换工作图像对应的拼接工作图像；如此，将前述8张经过裁剪后的目标图像，拼接到载体图像后，则可得到一拼接工作图像；而后，从变换工作图像集中删除前述9张变换工作图像，并以相同方法，来重新提取9张变换工作图像，以进行拼接处理，以此不断循环，即可得到若干拼接工作图像；具体的，循环过程如下述步骤S03d4和步骤S03d5所示。S03d4.从所述变换工作图像集中删除所述x张变换工作图像，得到处理后的变换工作图像集。S03d5.将所述变换工作图像集更新为处理后的变换工作图像集，并重新从所述变换工作图像集中选取x张变换工作图像，直至满足拼接结束条件时为止，以便在满足拼接结束条件时，得到若干拼接工作图像；在本实施例中，举例拼接结束条件为：将变换工作图像集中所有变换工作图像全部选取完毕，且若最后一次循环过程中，变换工作图像集中的图像数量为h，其小于x，那么，则直接提取h张图像，并采用前述相同方法，来进行图像拼接；另外，在本实施例中，任一拼接工作图像的状态标签，则是根据前述目标图像对应预处理原始工作图像的状态标签得到的；如，该任一拼接工作图像的状态标签，是从目标图像的状态标签中，按照第二预设比例进行组合得到的。如此，利用前述步骤S03d1～S03d5，完成变换工作图像的拼接处理后，联合前述经过裁剪并像素填充后的图像，即可组成样本工作图像集，如下述步骤S03e所示。S03e.利用若干像素填充工作图像和若干拼接工作图像，组成所述样本工作图像集；在本实施例中，得到样本工作图像集后，结合前述每张样本工作图像的状态标签，即可组成训练集，而后，基于该训练集，即可进行加权双向特征金字塔网络的训练，如下述步骤S04和步骤S05所示。S04.利用样本工作图像集和样本工作图像集中每张样本工作图像的状态标签，组成训练集。S05.以所述训练集为输入，每张样本工作图像对应的样本通风系统控制箱的工作状态检测结果为输出，训练加权双向特征金字塔网络，以在训练完成后，将训练后的加权双向特征金字塔网络，作为所述控制箱状态检测模型；在具体应用时，举例模型的训练轮数可以但不限于设置为400次，且模型的bachsize为8；同时，举例训练后的加权双向特征金字塔网络，可以但不限于导出为ONNX模型，以便进行模型的部署。另外，在本实施例中，举例所述控制箱状态检测模型的部署形式可以但不限于为Python WebAPI，且部署位置为局域网中的服务器；如此，在获取模型时，即可利用PythonWebAPI接口，调用所述控制箱状态检测模型，以便进行目标通风系统控制箱的状态检测，其中，检测过程如下述步骤S3所示。S3.将所述工作图像输入至所述控制箱状态检测模型中进行状态检测处理，得到所述目标通风系统控制箱的工作状态检测结果；在本实施例中，控制箱状态检测模型则可检测出工作图像中各个工作信号灯的指示状态，从而根据各个工作信号灯的指示状态，来确定出目标通风系统控制箱的工作状态，如工作状态检测结果可以为：通风系统控制箱电源关闭状态,通风系统控制箱电源打开状态,通风系统控制箱隔绝状态,通风系统控制箱清洁状态,或通风系统控制箱滤毒状态；另外，在得到工作状态检测结果后，还可将所述工作状态检测结果存储至服务器和/或发送至监控端，以便所述监控端在接收到所述工作状态检测结果后，将所述工作状态检测结果进行可视化展示；如此，即可便于工作人员及时掌握目标通风系统控制箱的工作状态，并在故障时，及时采取维护措施。由此通过前述步骤S1～S3所详细描述的通风系统控制箱的状态检测方法，本发明能够实现无人化巡检，不仅减小了工作人员的巡检风险，还可全面、准确的完成管廊内各通风系统控制箱的状态检测，能够实现通风系统控制箱状态的实时监测以及故障的及时上报，保障了管廊内的通风状况良好，适用于在管廊巡检领域的大规模应用与推广。如图2所示，本实施例第二方面提供了一种实现实施例第一方面中所述的通风系统控制箱的状态检测方法的硬件装置，包括：图像获取单元，用于获取目标通风系统控制箱的工作图像，其中，所述工作图像中包含有所述目标通风系统控制箱上所有的工作信号灯，且所述工作图像是由巡检机器人采集得到的。模型调用单元，用于获取控制箱状态检测模型，其中，所述控制箱状态检测模型是以海量样本通风系统控制箱的样本工作图像以及每个样本工作图像的状态标签为输入，每个样本通风系统控制箱的工作状态检测结果为输出而训练得到的，任一样本通风系统控制箱的工作状态检测结果包括该任一样本通风系统控制箱上各个工作信号灯的指示状态，且所述控制箱状态检测模型为训练后的加权双向特征金字塔网络。状态检测单元，用于将所述工作图像输入至所述控制箱状态检测模型中进行状态检测处理，得到所述目标通风系统控制箱的工作状态检测结果。本实施例提供的装置的工作过程、工作细节和技术效果，可以参见实施例第一方面，于此不再赘述。如图3所示，本实施例第三方面提供了另一种通风系统控制箱的状态检测装置，以装置为电子设备为例，包括：依次通信相连的存储器、处理器和收发器，其中，所述存储器用于存储计算机程序，所述收发器用于收发消息，所述处理器用于读取所述计算机程序，执行如实施例第一方面所述的通风系统控制箱的状态检测方法。具体举例的，所述存储器可以但不限于包括随机存取存储器、只读存储器、闪存、先进先出存储器和/或先进后出存储器等等；具体地，处理器可以包括一个或多个处理核心，比如4核心处理器、8核心处理器等。处理器可以采用DSP、FPGA、PLA中的至少一种硬件形式来实现，同时，处理器也可以包括主处理器和协处理器，主处理器是用于对在唤醒状态下的数据进行处理的处理器，也称CPU；协处理器是用于对在待机状态下的数据进行处理的低功耗处理器。在一些实施例中，处理器可以在集成有GPU，GPU用于负责显示屏所需要显示的内容的渲染和绘制，例如，所述处理器可以不限于采用型号为STM32F105系列的微处理器、精简指令集计算机微处理器、X86等架构处理器或集成嵌入式神经网络处理器的处理器；所述收发器可以但不限于为无线保真无线收发器、蓝牙无线收发器、通用分组无线服务技术无线收发器、紫蜂协议无线收发器、3G收发器、4G收发器和/或5G收发器等。此外，所述装置还可以但不限于包括有电源模块、显示屏和其它必要的部件。本实施例提供的电子设备的工作过程、工作细节和技术效果，可以参见实施例第一方面，于此不再赘述。本实施例第四方面提供了一种存储包含有实施例第一方面所述的通风系统控制箱的状态检测方法的指令的存储介质，即所述存储介质上存储有指令，当所述指令在计算机上运行时，执行如实施例第一方面所述的通风系统控制箱的状态检测方法。其中，所述存储介质是指存储数据的载体，可以但不限于包括软盘、光盘、硬盘、闪存、优盘和/或记忆棒等，所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。本实施例提供的存储介质的工作过程、工作细节和技术效果，可以参见实施例第一方面，于此不再赘述。本实施例第五方面提供了一种包含指令的计算机程序产品，当所述指令在计算机上运行时，使所述计算机执行如实施例第一方面所述的通风系统控制箱的状态检测方法，其中，所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。最后应说明的是：以上所述仅为本发明的优选实施例而已，并不用于限制本发明的保护范围。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
