标题title
一种三维动画控制方法、装置、设备及存储介质
摘要abst
本发明公开了一种三维动画控制方法、装置、设备及存储介质，所述方法包括：获取目标三维动画需求；将所述目标三维动画需求拆分为若干个子流程；其中，每个子流程与至少一个其他子流程具有关联关系；解析每个子流程，获得每个子流程包含的模型控制逻辑；根据每个子流程的关联关系，生成目标动画的模型控制逻辑列表；基于所述模型控制逻辑列表，控制对应模型执行动画动作，以获得目标三维动画。本发明通过将目标三维动画需求拆分为若干个子流程，并为每个子流程分配对应的模型控制逻辑，以此实现目标三维动画中每个模型的动画动作控制，进而生成目标三维动画，解决了目前三维动画生成效率不高、修改便利性不好以及人工工作量大的技术问题。
权利要求书clms
1.一种三维动画控制方法，其特征在于，所述方法包括以下步骤：获取目标三维动画需求；将所述目标三维动画需求拆分为若干个子流程；其中，每个子流程与至少一个其他子流程具有关联关系；解析每个子流程，获得每个子流程包含的模型控制逻辑；根据每个子流程的关联关系，生成目标动画的模型控制逻辑列表；基于所述模型控制逻辑列表，控制对应模型执行动画动作，以获得目标三维动画。2.如权利要求1所述的三维动画控制方法，其特征在于，每个所述子流程与至少一个其他子流程具有的关联关系包括前后关联关系和/或父子关联关系。3.如权利要求2所述的三维动画控制方法，其特征在于，将所述目标三维动画需求拆分为若干个子流程步骤，具体包括：将目标三维动画需求拆分为若干个具有前后关联关系的子流程和具有父子关联关系的子流程；重复执行上述拆分动作，直至每个子流程为最小单位流程。4.如权利要求3所述的三维动画控制方法，其特征在于，解析每个子流程，获得每个子流程包含的模型控制逻辑步骤，具体包括：解析每个子流程包含的目标动画动作；调用模型库，匹配每个目标动画动作对应的模型控制逻辑并进行汇总，获得每个子流程包含的模型控制逻辑。5.如权利要求4所述的三维动画控制方法，其特征在于，根据每个子流程的关联关系，生成目标动画的模型控制逻辑列表步骤，具体包括：根据每个子流程的前后关联关系和父子关联关系，获得若干个按前后排序的最小单位流程；基于若干个按前后排序的最小单位流程对应的模型控制逻辑，生成目标动画的模型控制逻辑列表。6.如权利要求5所述的三维动画控制方法，其特征在于，生成目标动画的模型控制逻辑列表步骤之后，所述方法还包括：提取目标三维动画需求中的若干条附加显示信息；其中，每条附加显示信息配置有对应的显示触发条件；基于所述附加显示信息，在附加显示库中匹配每条附加显示信息的显示控制逻辑，生成目标动画的显示控制逻辑列表。7.如权利要求6所述的三维动画控制方法，其特征在于，基于所述模型控制逻辑列表，控制对应模型执行动画动作，以获得目标三维动画步骤，具体包括：基于所述模型控制逻辑列表中若干个按前后排序的最小单位流程对应的模型控制逻辑，控制对应模型执行动画动作；基于所述显示控制逻辑列表中若干条附加显示信息对应的显示控制逻辑，监控对应模型执行的动画动作，在动画动作满足显示触发条件时执行对应的附加显示动作；根据动画动作和附加显示动作，生成目标三维动画。8.一种三维动画控制装置，其特征在于，所述三维动画控制装置包括：获取模块，用于获取目标三维动画需求；拆分模块，用于将所述目标三维动画需求拆分为若干个子流程；其中，每个子流程与至少一个其他子流程具有关联关系；解析模块，用于解析每个子流程，获得每个子流程包含的模型控制逻辑；生成模块，用于根据每个子流程的关联关系，生成目标动画的模型控制逻辑列表；控制模块，用于基于所述模型控制逻辑列表，控制对应模型执行动画动作，以获得目标三维动画。9.一种三维动画控制设备，其特征在于，所述三维动画控制设备包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的三维动画控制程序，所述三维动画控制程序被所述处理器执行时实现如权利要求1至7中任一项所述的三维动画控制方法的步骤。10.一种存储介质，其特征在于，所述存储介质上存储有三维动画控制程序，所述三维动画控制程序被处理器执行时实现如权利要求1至7中任一项所述的三维动画控制方法的步骤。
说明书desc
技术领域本发明涉及三维动画控制技术领域，尤其涉及到一种三维动画控制方法、装置、设备及存储介质。背景技术三维动画技术模拟真实物体的方式使其成为一个有用的工具。由于其精确性、真实性和 可操作性，被广泛应用于医学、教育、军事、娱乐等诸多领域。在影视广告制作方面，这项新技术能够给人耳目一新的感觉，因此受到了众多客户的欢迎。三维动画可以用于广告和电影电视剧的特效制作、特技、广告产品展示、片头飞字等等。现有三维动画制作通常基于关键帧控制场景中的三维物体实现，基于关键帧控制场景中三维物体动画的制作流程包括导入或创建模型、设置基本变换关键帧、创建形状变化、应用变形器、添加约束系统、使用自定义属性、调整动画曲线、预览和微调动画、层次动画、缓存和优化以及导出动画数据。通过这些步骤，可以实现各种复杂的三维物体动画效果，满足不同的创意需求。通俗的说，在一个时间轴上针对虚拟环境中的所有物体设置某个时间点的属性信息，通过时间轴变化控制物体属性变化实现动画控制。然而，这样的三维动画生成方法具有如下缺点：缺点一：基于关键帧的方法无法实现动画资源在动画序列以下的资源复用。缺点二：该方法与场景中的位置，其他物体属性等具有强相关性，需要大量人工的制作。缺点三：不便于修改，每一个物体的动画关键帧变化都会引起其他物体的动画帧的调整。因此，如何提高三维动画生成效率，提升三维动画修改便利性，降低人工工作量，是一个亟需解决的技术问题。上述内容仅用于辅助理解本发明的技术方案，并不代表承认上述内容是现有技术。发明内容本发明的主要目的在于提供一种三维动画控制方法、装置、设备及存储介质，旨在解决目前三维动画生成效率不高、修改便利性不好以及人工工作量大的技术问题。为实现上述目的，本发明提供一种三维动画控制方法，所述方法包括以下步骤：获取目标三维动画需求；将所述目标三维动画需求拆分为若干个子流程；其中，每个子流程与至少一个其他子流程具有关联关系；解析每个子流程，获得每个子流程包含的模型控制逻辑；根据每个子流程的关联关系，生成目标动画的模型控制逻辑列表；基于所述模型控制逻辑列表，控制对应模型执行动画动作，以获得目标三维动画。可选的，每个所述子流程与至少一个其他子流程具有的关联关系包括前后关联关系和/或父子关联关系。可选的，将所述目标三维动画需求拆分为若干个子流程步骤，具体包括：将目标三维动画需求拆分为若干个具有前后关联关系的子流程和具有父子关联关系的子流程；重复执行上述拆分动作，直至每个子流程为最小单位流程。可选的，解析每个子流程，获得每个子流程包含的模型控制逻辑步骤，具体包括：解析每个子流程包含的目标动画动作；调用模型库，匹配每个目标动画动作对应的模型控制逻辑并进行汇总，获得每个子流程包含的模型控制逻辑。可选的，根据每个子流程的关联关系，生成目标动画的模型控制逻辑列表步骤，具体包括：根据每个子流程的前后关联关系和父子关联关系，获得若干个按前后排序的最小单位流程；基于若干个按前后排序的最小单位流程对应的模型控制逻辑，生成目标动画的模型控制逻辑列表。可选的，生成目标动画的模型控制逻辑列表步骤之后，所述方法还包括：提取目标三维动画需求中的若干条附加显示信息；其中，每条附加显示信息配置有对应的显示触发条件；基于所述附加显示信息，在附加显示库中匹配每条附加显示信息的显示控制逻辑，生成目标动画的显示控制逻辑列表。可选的，基于所述模型控制逻辑列表，控制对应模型执行动画动作，以获得目标三维动画步骤，具体包括：基于所述模型控制逻辑列表中若干个按前后排序的最小单位流程对应的模型控制逻辑，控制对应模型执行动画动作；基于所述显示控制逻辑列表中若干条附加显示信息对应的显示控制逻辑，监控对应模型执行的动画动作，在动画动作满足显示触发条件时执行对应的附加显示动作；根据动画动作和附加显示动作，生成目标三维动画。此外，为了实现上述目的，本发明还提供了一种三维动画控制装置，所述三维动画控制装置包括：获取模块，用于获取目标三维动画需求；拆分模块，用于将所述目标三维动画需求拆分为若干个子流程；其中，每个子流程与至少一个其他子流程具有关联关系；解析模块，用于解析每个子流程，获得每个子流程包含的模型控制逻辑；生成模块，用于根据每个子流程的关联关系，生成目标动画的模型控制逻辑列表；控制模块，用于基于所述模型控制逻辑列表，控制对应模型执行动画动作，以获得目标三维动画。此外，为了实现上述目的，本发明还提供了一种三维动画控制设备，所述设备包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的三维动画控制程序，所述三维动画控制程序被所述处理器执行时实现上述的三维动画控制方法的步骤。此外，为了实现上述目的，本发明还提供了一种存储介质，所述存储介质上存储有三维动画控制程序，所述三维动画控制程序被处理器执行时实现上述的三维动画控制方法的步骤。基于上述技术方案，本发明可以产生如下技术效果：本发明实施例提出的一种三维动画控制方法、装置、设备及存储介质，所述方法包括：获取目标三维动画需求；将所述目标三维动画需求拆分为若干个子流程；其中，每个子流程与至少一个其他子流程具有关联关系；解析每个子流程，获得每个子流程包含的模型控制逻辑；根据每个子流程的关联关系，生成目标动画的模型控制逻辑列表；基于所述模型控制逻辑列表，控制对应模型执行动画动作，以获得目标三维动画。本发明通过将目标三维动画需求拆分为若干个子流程，并为每个子流程分配对应的模型控制逻辑，以此实现目标三维动画中每个模型的动画动作控制，进而生成目标三维动画，通过拆解三维动画需求的方式，解决目前三维动画生成效率不高、修改便利性不好以及人工工作量大的技术问题。附图说明图1为本发明实施例方案涉及的硬件运行环境的装置结构示意图；图2为本发明三维动画控制方法的实施例的流程示意图；图3为本发明实施例中一种三维动画控制装置的结构框图。本发明目的的实现、功能特点及优点将结合实施例，参照附图做进一步说明。具体实施方式应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。如图1所示，图1是本发明实施例方案涉及的硬件运行环境的装置结构示意图。如图1所示，该装置可以包括：处理器1001，例如CPU，通信总线1002，用户接口1003，网络接口1004，存储器1005。其中，通信总线1002用于实现这些组件之间的连接通信。用户接口1003可以包括显示屏、输入单元比如键盘，可选的用户接口1003还可以包括标准的有线接口、无线接口。网络接口1004可选的可以包括标准的有线接口、无线接口。存储器1005可以是高速RAM存储器，也可以是稳定的存储器，例如磁盘存储器。存储器1005可选的还可以是独立于前述处理器1001的存储装置。本领域技术人员可以理解，图1中示出的装置的结构并不构成对装置的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件布置。如图1所示，作为一种计算机存储介质的存储器1005中可以包括操作系统、网络通信模块、用户接口模块以及三维动画控制程序。在图1所示的终端中，网络接口1004主要用于连接后台服务器，与后台服务器进行数据通信；用户接口1003主要用于连接客户端，与客户端进行数据通信；而处理器1001可以用于调用存储器1005中存储的三维动画控制程序，并执行以下操作：获取目标三维动画需求；将所述目标三维动画需求拆分为若干个子流程；其中，每个子流程与至少一个其他子流程具有关联关系；解析每个子流程，获得每个子流程包含的模型控制逻辑；根据每个子流程的关联关系，生成目标动画的模型控制逻辑列表；基于所述模型控制逻辑列表，控制对应模型执行动画动作，以获得目标三维动画。本发明应用于装置的具体实施例与下述应用三维动画控制方法的各实施例基本相同，在此不作赘述。需要说明的是，现有基于关键帧控制场景中三维物体动画详细制作流程：导入或创建模型：首先需要一个三维模型，可以是导入的现成模型，也可以使用建模工具在软件中创建。确保模型的拓扑结构和细节符合动画需求。设置基本变换关键帧：选择物体并进入动画编辑模式。在时间轴上选择一个时间点，然后设置物体的位置、旋转和缩放关键帧。通过在不同时间点设置关键帧，可以实现物体在场景中的运动、旋转和缩放效果。在两个关键帧之间，软件会自动计算中间帧，实现平滑过渡。创建形状变化：为物体创建形状键或混合形状。这通常包括基础形状和目标形状。在目标形状中调整顶点位置，以达到期望的变形效果。在时间轴上设置形状键或混合形状的关键帧，实现物体形状随时间的变化。应用变形器：为物体添加变形器，如弯曲、扭曲、拉伸等。在时间轴上设置变形器的关键帧，以控制其在不同时间点的影响程度。调整变形器的参数，实现期望的动画效果。添加约束系统：设置物体之间的约束关系，如父子关系、位置跟踪、旋转跟踪等。在时间轴上设置约束关键帧，实现约束随时间的变化。这可以帮助实现物体之间的互动和更复杂的动画效果。使用自定义属性：为物体添加自定义属性，如整数、浮点数、颜色等。在时间轴上设置自定义属性的关键帧，实现属性随时间的变化。自定义属性可以与其他系统相互驱动，实现更丰富的动画效果。调整动画曲线：在设置关键帧之后，可以进一步调整动画曲线，以更好地控制物体的运动。动画曲线用于描述属性随时间的变化，可以通过修改曲线的形状和切线来实现不同的运动效果。预览和微调动画：在完成基本动画之后，预览动画以检查运动的流畅性和正确性。在预览过程中，观察动画是否符合预期，以及是否存在不自然的运动或突变。如有需要，对关键帧、动画曲线、形状变化等进行微调，以优化动画效果。层次动画：为了实现更复杂的动画效果，可以使用层次动画。层次动画是将不同的动画效果分层叠加，以实现更丰富的表现。例如，可以在一个层上设置物体的基本运动，然后在另一个层上添加细节动作，如震动或弹跳。通过组合不同层的动画，可以实现更复杂且更具控制性的效果。缓存和优化：在完成动画制作之后，可以对动画进行缓存和优化。缓存可以提高动画预览和播放的速度，特别是对于复杂的场景和高级效果。优化动画可能涉及减少关键帧数量、调整动画曲线、合并层次动画等，以提高性能并简化动画。基于关键帧的三维动画生成方法无法实现动画资源在动画序列以下的资源复用，且该方法与场景中的位置，其他物体属性等具有强相关性，需要大量人工的制作。同时，该方法不便于修改，每一个物体的动画关键帧变化都会引起其他物体的动画帧的调整。因此，本发明实施例提供了一种三维动画控制方法，参照图2，图2为本发明三维动画控制方法的实施例的流程示意图。本实施例中，所述三维动画控制方法包括以下步骤：步骤S100，获取目标三维动画需求；步骤S200，将所述目标三维动画需求拆分为若干个子流程；其中，每个子流程与至少一个其他子流程具有关联关系；步骤S300，解析每个子流程，获得每个子流程包含的模型控制逻辑；步骤S400，根据每个子流程的关联关系，生成目标动画的模型控制逻辑列表；步骤S500，基于所述模型控制逻辑列表，控制对应模型执行动画动作，以获得目标三维动画。在优选的实施例中，每个所述子流程与至少一个其他子流程具有的关联关系包括前后关联关系和/或父子关联关系。在此基础上，将所述目标三维动画需求拆分为若干个子流程步骤，具体包括：将目标三维动画需求拆分为若干个具有前后关联关系的子流程和具有父子关联关系的子流程；重复执行上述拆分动作，直至每个子流程为最小单位流程。需要说明的是，获取的目标三维动画需求可以为文字信息或语音信息，该文字信息或语音信息记载了用户想要生成的三维动画动作。而在将目标三维动画需求拆分为子流程时，可采用现有的自然语言处理工具，将文字信息或语音信息中的整个动作流程进行提取，并拆分为一个个子流程，在本实施例中，拆分后的若干个子流程可以通过流程图的形式呈现。在本实施例中，拆分后的子流程包括具有前后关联关系的子流程和具有父子关联关系的子流程。即整个动作流程先拆分为若干个具有前后逻辑关系的子流程，再对每个子流程进行拆分，获得该子流程中具有前后逻辑关系的子流程，如此往复，直至获得的子流程为不可拆分的最小单位流程。在优选的实施例中，解析每个子流程，获得每个子流程包含的模型控制逻辑步骤，具体包括：解析每个子流程包含的目标动画动作；调用模型库，匹配每个目标动画动作对应的模型控制逻辑并进行汇总，获得每个子流程包含的模型控制逻辑。需要说明的是，在此之前，还需要先建立模型库，该模型库包含此次三维动画控制的所有物体模型，以及执行不同子流程对应动作的模型控制逻辑。通过调用该模型库中的物体模型，实现对目标三维动画中每个子流程对应模型的动画动作控制。在优选的实施例中，根据每个子流程的关联关系，生成目标动画的模型控制逻辑列表步骤，具体包括：根据每个子流程的前后关联关系和父子关联关系，获得若干个按前后排序的最小单位流程；基于若干个按前后排序的最小单位流程对应的模型控制逻辑，生成目标动画的模型控制逻辑列表。在另一实施例中，生成目标动画的模型控制逻辑列表步骤之后，所述方法还包括：提取目标三维动画需求中的若干条附加显示信息；其中，每条附加显示信息配置有对应的显示触发条件；基于所述附加显示信息，在附加显示库中匹配每条附加显示信息的显示控制逻辑，生成目标动画的显示控制逻辑列表。需要说明的是，在目标三维动画中除了模型的动画动作，通常还包括UI显示或特效显示等附加显示动作。因此，在生成目标动画的模型控制逻辑列表之后，还需要提取目标三维动画需求中的附加显示信息，用于在模型执行对应动画动作时，同时执行附加显示动作。在此基础上，基于所述模型控制逻辑列表，控制对应模型执行动画动作，以获得目标三维动画步骤，具体包括：基于所述模型控制逻辑列表中若干个按前后排序的最小单位流程对应的模型控制逻辑，控制对应模型执行动画动作；基于所述显示控制逻辑列表中若干条附加显示信息对应的显示控制逻辑，监控对应模型执行的动画动作，在动画动作满足显示触发条件时执行对应的附加显示动作；根据动画动作和附加显示动作，生成目标三维动画。需要说明的是，附加显示信息配置的显示触发条件为模型执行的动画动作，在模型执行对应的动画动作时，相应的附加显示动作执行，以实现模型动作与附加显示动作的共同执行。在本实施例中，提供了一种三维动画控制方法，通过将目标三维动画需求拆分为若干个子流程，并为每个子流程分配对应的模型控制逻辑，以此实现目标三维动画中每个模型的动画动作控制，进而生成目标三维动画。通过拆解三维动画需求的方式，解决目前三维动画生成效率不高、修改便利性不好以及人工工作量大的技术问题。由此，本方法优先构建了专业模型库，在同一类三维动画的驱动中，专业模型库有着极高的重复利用率，能够达到一次构建，多次复用的目的。本方法依赖于流程图进行逻辑驱动，其底层是可编码的模型脚本功能，支持程序化的数据读取与实时计算，能够实现与场景关系的解耦，通过设定不用的依赖项物体，能够快速在不同三维场景，不同需求的动画中实现流程的复用。本方法使用流程图的方式控制动画，能够快速地修改、增加、删减部分流程，通过设定流程的触发关系能够很好地实现流程间的衔接控制，每一次修改只会影响修改的部分流程，无需改动其他子流程。参照图3，图3为本发明三维动画控制装置实施例的结构框图。如图3所示，本发明实施例提出的三维动画控制装置包括：获取模块10，用于获取目标三维动画需求；拆分模块20，用于将所述目标三维动画需求拆分为若干个子流程；其中，每个子流程与至少一个其他子流程具有关联关系；解析模块30，用于解析每个子流程，获得每个子流程包含的模型控制逻辑；生成模块40，用于根据每个子流程的关联关系，生成目标动画的模型控制逻辑列表；控制模块50，用于基于所述模型控制逻辑列表，控制对应模型执行动画动作，以获得目标三维动画。本发明三维动画控制装置的其他实施例或具体实现方式可参照上述各方法实施例，此处不再赘述。此外，本发明还提出一种三维动画控制设备，其特征在于，所述三维动画控制设备包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的三维动画控制程序，其中：所述三维动画控制程序被所述处理器执行时实现本发明各个实施例所述的三维动画控制方法。本申请三维动画控制设备的具体实施方式与上述三维动画控制方法各实施例基本相同，在此不再赘述。此外，本发明还提出一种可读存储介质，所述可读存储介质包括计算机可读存储介质，其上存储有三维动画控制程序。所述可读存储介质可以是图1的终端中的存储器1005，也可以是如ROM/RAM、磁碟、光盘中的至少一种，所述可读存储介质包括若干指令用以使得一台具有处理器的三维动画控制设备执行本发明各个实施例所述的三维动画控制方法。本申请可读存储介质中三维动画控制程序的具体实施方式与上述三维动画控制方法各实施例基本相同，在此不再赘述。可以理解的是，在本说明书的描述中，参考术语“一实施例”、“另一实施例”、“其他实施例”、或“第一实施例～第N实施例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。需要说明的是，在本文中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者系统不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者系统所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括该要素的过程、方法、物品或者系统中还存在另外的相同要素。上述本发明实施例序号仅仅为了描述，不代表实施例的优劣。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到上述实施例方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在如上所述的一个存储介质中，包括若干指令用以使得一台终端设备执行本发明各个实施例所述的方法。以上仅为本发明的优选实施例，并非因此限制本发明的专利范围，凡是利用本发明说明书及附图内容所作的等效结构或等效流程变换，或直接或间接运用在其他相关的技术领域，均同理包括在本发明的专利保护范围内。
