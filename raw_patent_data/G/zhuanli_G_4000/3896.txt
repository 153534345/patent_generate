标题title
一种基于知识图谱的呼气流量数据处理系统
摘要abst
本发明涉及数据处理技术领域，提出了一种基于知识图谱的呼气流量数据处理系统，包括：采集用户的年龄数据及呼气流量数据，得到原始呼气数据序列；获取若干呼气短时数据序列，获取每个短时段的呼气急促系数，根据相邻时刻呼气流量数据的差异获取每个时刻的呼气流速，根据呼气流速及呼气急促系数获取每个短时段的呼气剧变系数；根据每个短时段的呼气剧变系数获取呼气特征序列，转换得到呼气特征图像，聚类获取第一类别及第二类别，得到呼气特征指数；根据用户的年龄数据、呼气流量数据中的最大峰值以及呼气特征指数，组成三元组并构建知识图谱，分析用户的呼气状态。本发明旨在通过呼气流量数据的时间关联性来提高呼气状态分析的准确性。
权利要求书clms
1.一种基于知识图谱的呼气流量数据处理系统，其特征在于，该系统包括：呼气流量数据采集模块，获取用户的年龄数据及呼气流量数据，根据呼气流量数据得到原始呼气数据序列；呼气流量数据处理模块：通过预设短时段对原始呼气数据序列进行划分，得到若干呼气短时数据序列，根据呼气短时数据序列中的呼气流量数据，获取每个短时段的呼气急促系数，根据相邻时刻呼气流量数据的差异获取每个时刻的呼气流速，根据呼气流速及呼气急促系数获取每个短时段的呼气剧变系数；将所有短时段的呼气剧变系数按照时序关系排列得到呼气特征序列，根据呼气特征序列获取呼气特征图像，根据呼气短时数据序列与原始呼气数据序列以及呼气特征图像获取窗口大小，通过窗口分割呼气特征图像得到若干呼气特征窗口，根据每个呼气特征窗口中像素点的坐标信息与灰度值获取像素点间的聚类参考距离，根据聚类参考距离对每个呼气特征窗口中的像素点进行聚类，得到每个呼气特征窗口中的第一类别及第二类别；将所有呼气特征窗口中所有第一类别包含的像素点数量总和记为第一像素量，将所有呼气特征窗口中所有第二类别包含的像素点数量总和记为第二像素量，将第一像素量与第二像素量的比值作为用户的呼气特征指数；知识图谱构建检索模块，根据用户的年龄数据、呼气流量数据中的最大峰值以及呼气特征指数，组成呼气状态三元组并构建知识图谱，根据知识图谱检索分析用户的呼气状态。2.根据权利要求1所述的一种基于知识图谱的呼气流量数据处理系统，其特征在于，所述获取每个短时段的呼气急促系数，包括的具体方法为：其中，表示第/＞个短时段的呼气急促系数，/＞表示第/＞个短时段的呼气短时数据序列中发生跳变的数据点数量，/＞表示呼气短时数据序列中的元素数量，/＞表示第/＞个短时段的呼气短时数据序列中的最大值，/＞表示第/＞个短时段的呼气短时数据序列中的最小值。3.根据权利要求1所述的一种基于知识图谱的呼气流量数据处理系统，其特征在于，所述根据相邻时刻呼气流量数据的差异获取每个时刻的呼气流速，包括的具体方法为：其中，表示原始呼气数据序列中第/＞个时刻的呼气流速，/＞表示第/＞个时刻的呼气流量数据，/＞表示第/＞个时刻的呼气流量数据，/＞表示原始呼气数据序列中相邻时刻的时间间隔。4.根据权利要求1所述的一种基于知识图谱的呼气流量数据处理系统，其特征在于，所述根据呼气流速及呼气急促系数获取每个短时段的呼气剧变系数，包括的具体方法为：其中，表示第/＞个短时段的呼气剧变系数，/＞表示第/＞个短时段的呼气急促系数，/＞表示呼气短时数据序列中的元素数量，/＞表示第/＞个短时段中第/＞个时刻的呼气流速，/＞表示第/＞个短时段中第/＞个时刻的呼气流速。5.根据权利要求1所述的一种基于知识图谱的呼气流量数据处理系统，其特征在于，所述根据呼气短时数据序列与原始呼气数据序列以及呼气特征图像获取窗口大小，包括的具体方法为：其中，表示窗口一条边的尺寸，/＞表示呼气短时数据序列中的元素数量，/＞表示原始呼气数据序列中的元素数量，/＞表示呼气特征图像的尺寸，/＞表示向下取整。6.根据权利要求1所述的一种基于知识图谱的呼气流量数据处理系统，其特征在于，所述根据每个呼气特征窗口中像素点的坐标信息与灰度值获取像素点间的聚类参考距离，包括的具体方法为：其中，表示呼气特征窗口中任意的/＞点与/＞点的聚类参考距离，/＞表示/＞点的坐标信息，/＞表示/＞点的坐标信息，/＞表示/＞点与/＞点的欧式距离，/＞表示/＞点的灰度值，表示/＞点的灰度值。/＞
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及一种基于知识图谱的呼气流量数据处理系统。背景技术呼气流量数据是一种时间序列数据，通过对呼气流量数据的计算和处理可以对用户当前的呼气状态进行评估；呼气流量数据处理通常有两种方法，一种为传统大型医疗仪器，这种大型医疗仪器价格昂贵、灵活度差，同时需要相关专业技术人员对该仪器进行操作才能获取用户的呼气状态；而另一种为便携式呼气流量数据采集仪器，但这种仪器只能采集的用户当前的呼气流量数据，无法对这些数据进行有效的分析；因此需要一种可以采集用户的呼气流量数据，并快速处理得到用户的呼气状态的系统。参考专利CN108186018B中使用傅里叶变换对当前用户的呼气流量数据进行曲线拟合，由于不同状态下的呼气流量数据点的分布特征具有较强的随机性特点，拟合的曲线容易与原始数据点发生偏离，从而导致对当前用户的呼气状态判断出现偏差；而呼气流量数据是根据时间进行变化的，该方案中忽略了呼气流量数据之间的时间关联性特点，导致对呼气流量数据处理的可靠性较差。发明内容本发明提供一种基于知识图谱的呼气流量数据处理系统，以解决现有的由于呼气流量数据随机性较强而导致呼气状态分析准确性较差的问题，所采用的技术方案具体如下：本发明一个实施例提供了一种基于知识图谱的呼气流量数据处理系统，该系统包括：呼气流量数据采集模块，获取用户的年龄数据及呼气流量数据，根据呼气流量数据得到原始呼气数据序列；呼气流量数据处理模块：通过预设短时段对原始呼气数据序列进行划分，得到若干呼气短时数据序列，根据呼气短时数据序列中的呼气流量数据，获取每个短时段的呼气急促系数，根据相邻时刻呼气流量数据的差异获取每个时刻的呼气流速，根据呼气流速及呼气急促系数获取每个短时段的呼气剧变系数；将所有短时段的呼气剧变系数按照时序关系排列得到呼气特征序列，根据呼气特征序列获取呼气特征图像，根据呼气短时数据序列与原始呼气数据序列以及呼气特征图像获取窗口大小，通过窗口分割呼气特征图像得到若干呼气特征窗口，根据每个呼气特征窗口中像素点的坐标信息与灰度值获取像素点间的聚类参考距离，根据聚类参考距离对每个呼气特征窗口中的像素点进行聚类，得到每个呼气特征窗口中的第一类别及第二类别；将所有呼气特征窗口中所有第一类别包含的像素点数量总和记为第一像素量，将所有呼气特征窗口中所有第二类别包含的像素点数量总和记为第二像素量，将第一像素量与第二像素量的比值作为用户的呼气特征指数；知识图谱构建检索模块，根据用户的年龄数据、呼气流量数据中的最大峰值以及呼气特征指数，组成呼气状态三元组并构建知识图谱，根据知识图谱检索分析用户的呼气状态。可选的，所述获取每个短时段的呼气急促系数，包括的具体方法为：其中，表示第个短时段的呼气急促系数，表示第个短时段的呼气短时数据序列中发生跳变的数据点数量，表示呼气短时数据序列中的元素数量，表示第个短时段的呼气短时数据序列中的最大值，表示第个短时段的呼气短时数据序列中的最小值。可选的，所述根据相邻时刻呼气流量数据的差异获取每个时刻的呼气流速，包括的具体方法为：其中，表示原始呼气数据序列中第个时刻的呼气流速，表示第个时刻的呼气流量数据，表示第个时刻的呼气流量数据，表示原始呼气数据序列中相邻时刻的时间间隔。可选的，所述根据呼气流速及呼气急促系数获取每个短时段的呼气剧变系数，包括的具体方法为：其中，表示第个短时段的呼气剧变系数，表示第个短时段的呼气急促系数，表示呼气短时数据序列中的元素数量，表示第个短时段中第个时刻的呼气流速，表示第个短时段中第个时刻的呼气流速。可选的，所述根据呼气短时数据序列与原始呼气数据序列以及呼气特征图像获取窗口大小，包括的具体方法为：其中，表示窗口一条边的尺寸，表示呼气短时数据序列中的元素数量，表示原始呼气数据序列中的元素数量，表示呼气特征图像的尺寸，表示向下取整。可选的，所述根据每个呼气特征窗口中像素点的坐标信息与灰度值获取像素点间的聚类参考距离，包括的具体方法为：其中，表示呼气特征窗口中任意的点与点的聚类参考距离，表示点的坐标信息，表示点的坐标信息，表示点与点的欧式距离，表示点的灰度值，表示点的灰度值。本发明的有益效果是：本发明通过对用户的原始呼气数据序列进行短时段的划分，通过短时段内的呼气流量数据变化以及每个时刻的呼气流速，量化得到每个短时段的呼气剧变系数，使得呼气剧变系数可以大致反映每个短时段的呼气状态；通过呼气剧变系数组成呼气特征序列，并利用格拉姆角场转换得到呼气特征图像，更多的考虑了不同时刻的呼气流量数据之间的时间关联性带来的呼气状态判断影响；通过对呼气特征图像进行窗口分割及聚类，避免了数据点离散分布对于聚类结果的影响，使得聚类得到的呼气剧烈变化部分与呼气较为稳定部分的量化更准确，进而提高呼气特征指数的准确性和可信度，使得基于知识图谱来进行用户的呼气状态检索分析的结果更加准确。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明一个实施例所提供的一种基于知识图谱的呼气流量数据处理系统结构框图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。请参阅图1，其示出了本发明一个实施例所提供的一种基于知识图谱的呼气流量数据处理系统结构框图，该系统包括：呼气流量数据采集模块S101，采集用户的年龄数据及呼气流量数据，并得到原始呼气数据序列。本实施例的目的是对用户的呼气流量数据进行处理，进而分析得到用户的呼气健康状态，因此本实施例首先采集用户的呼气流量数据；通过传感器对用户的呼气流量数据进行采集，由于正常的呼气状态会维持数秒，为了获取用户的呼气流量数据，本实施例使用传感器间隔10ms进行一次采样，假设呼气状态持续秒，则此时根据呼气状态采集得到的用户呼气流量数据总量为，即共有个呼气流量数据；同时，本实施例为了对用户的呼气健康状态更加准确的进行量化，需要采集用户的年龄数据，以此来避免不同年龄段呼气状态的差异导致用户的呼气健康状态判断不准确。进一步的，由于正常的呼气状态会维持数秒，因此需要保证采集到的呼气流量数据总量足够大，本实施例对于呼气流量数据总量小于100的进行剔除，并重新进行采样，获取到用户的若干呼气流量数据，并将呼气流量数据按照采集时序组成数据序列，记为用户的原始呼气数据序列。至此，获取到了用户的原始呼气数据序列以及年龄数据。呼气流量数据处理模块S102：根据原始呼气数据序列获取若干呼气短时数据序列，根据呼气短时数据序列获取每个短时段的呼气急促系数，根据相邻时刻呼气流量数据的差异获取每个时刻的呼气流速，根据呼气流速及呼气急促系数获取每个短时段的呼气剧变系数。需要说明的是，由于健康状态下的用户在呼气时短时间内的呼气流量数据差异较小，即呼气流量数据较为稳定，因此可以利用短时间内用户的呼气流量数据来量化用户在该短时段内是否呼气较为急促，即用户每个时刻的呼气急促系数。具体的，本实施例取预设短时段为50ms对原始呼气数据序列进行划分，即从第一个呼气流量数据开始，每5个呼气流量数据划分为一个呼气短时数据序列；需要说明的是，若原始呼气数据序列最后不满足5个呼气流量数据来组成一个呼气短时数据序列，本实施例采用二次线性插值的方法使得最后一个呼气短时数据序列的元素数量足够；由于每个呼气短时数据序列都对应一个短时段，则对于第个短时段的呼气急促系数的具体计算方法为：其中，表示第个短时段的呼气短时数据序列中发生跳变的数据点数量，其中跳变的数据点通过对呼气短时数据序列进行贝叶斯变点检测得到，贝叶斯变点检测为公知技术，本实施例不再赘述；表示呼气短时数据序列中的元素数量，表示第个短时段的呼气短时数据序列中的最大值，表示第个短时段的呼气短时数据序列中的最小值；通过跳变点数量与呼气短时数据序列中元素数量比值，以及呼气短时数据序列中最大最小值的差异来量化呼气急促系数；比值越大，呼气短时数据序列中发生跳变的数据点越多，短时段内的呼气流量数据越不稳定，该短时段内的呼气状态越急促；最大最小值的差异越大，该短时段内的呼气流量数据波动程度越大，呼气状态可能越急促；按照上述方法获取原始呼气数据序列中每个短时段的呼气急促系数。进一步需要说明的是，呼气流量数据的数值仅能表现每个时刻的呼气流量，而不具备与相邻时刻共同反映每个时刻的呼气流量变化，因此需要通过相邻时刻的呼气流量数据来获取每个时刻的呼气流速。具体的，对于原始呼气数据序列中的第个时刻，其呼气流速的具体计算方法为：其中，表示第个时刻的呼气流量数据，表示第个时刻的呼气流量数据，表示原始呼气数据序列中相邻时刻的时间间隔，本实施例中采样间隔为10ms，则；通过相邻时刻呼气流量数据的数值差异来获取每个时刻的呼气流速，差异越大则表明该时刻呼气流量数据发生了较大变化，呼气可能越急促；而差异越小则表明该时刻呼气流量数据变化较小，呼气越平稳。进一步的，根据每个短时段的呼气急促系数，以及短时段内每个时刻的呼气流速，获取每个短时段的呼气剧变系数，以第个短时段为例，获取其呼气剧变系数的具体计算方法为：其中，表示第个短时段的呼气急促系数，表示呼气短时数据序列中的元素数量，表示第个短时段中第个时刻的呼气流速，表示第个短时段中第个时刻的呼气流速；通过呼气急促系数以及呼气短时数据序列中相邻时刻呼气流速的差异来量化得到该时段的呼气剧变系数，呼气急促系数越大，用户短时段内的呼气状态越不稳定，相应的呼气剧变系数应越大；相邻时刻的呼气流速差异越大，短时段内的呼气流量数据变化越迅速，呼气流量数据波动程度大的同时波动频率也较大，呼气流量数据表现的越剧烈变化，呼气剧变系数越大；按照上述方法获取每个短时段的呼气剧变系数；需要说明的是，对于原始呼气数据序列中的最后一个呼气流量数据，如果其所属的呼气短时数据序列在获取时没有利用二次线性插值填补序列，则在计算该呼气流量数据的呼气流速时采用二次线性插值进行计算；若其所属的呼气短时数据序列在获取时通过二次线性插值填补了序列，则在呼气急促系数、呼气流速以及呼气剧变系数时，仅对原始呼气数据序列中的数据进行计算，二次线性插值填补的数据不参与计算。至此，获取到了每个短时段的呼气剧变系数，用以反映每个短时段内呼气流量数据的剧烈变化程度，可以表征每个短时段内的呼气状态。根据每个短时段的呼气剧变系数获取呼气特征序列，转换得到呼气特征图像，根据呼气特征图像通过聚类获取第一类别及第二类别，进而得到原始呼气数据序列的呼气特征指数。需要说明的是，获取到每个短时段的呼气剧变系数后，按照时序关系排列呼气剧变系数得到呼气特征序列，并利用格拉姆角场转换得到呼气特征图像，呼气特征图像中每个像素点表述了呼气特征序列中不同时刻下呼气剧变系数之间的相关关系，像素点的灰度值越大，说明对应两个时刻下计算得到的呼气剧变系数相关程度越大；当某个时刻状态下用户发生较为急促的呼气异常，该时刻前后几个时刻对应的呼气数据也会存在一定的异常变化；通过转化得到的呼气特征图像相较于一维的呼气特征序列可以较好的反映这种不同时刻下由于呼气流量数据的时间关联性导致的变化关系。具体的，将所有短时段的呼气剧变系数按照时序关系排列得到呼气特征序列，使用格拉姆角场将呼气特征序列转换为呼气特征图像；其中格拉姆角场通过类格拉姆矩阵计算不同时间状态下序列之间的相关性，从而将对应的呼气特征序列转换为对应的呼气特征图像，格拉姆角场的具体计算过程为公知技术，本实施例不再赘述；根据格拉姆角场转换计算的特点，得到的呼气特征图像在水平与竖直方向上尺寸相等，即呼气特征图像为正方形图像；此时，呼气特征图像中不同像素点灰度值的大小与呼气剧变系数的大小呈现一定的关系，若某个短时段的呼气数据出现急促异常，即呼气剧变系数较大，此时经过格拉姆角场计算后得到的对应像素点位置处，也会在数值上呈现异常，表现为该像素点的灰度值会较大，与正常呼气状态的数据呈现一定的差异；通过格拉姆角场对呼气特征序列转换为呼气特征图像，使得对于用户的不同时段的呼气剧变系数可以结合相邻几个时刻的呼气剧变系数进行分析，更多的考虑到了呼气流量数据之间的时间关联性，使得对于用户的呼吸状态分析结果更加准确。进一步需要说明的是，由于不同时刻的呼气流量数据具有较强的随机性特点，在计算得到的呼气特征序列中起伏变化具有不确定性的特点，从而获取得到的呼气特征图像中像素点的分布状态具有一定的不确定性，且数据点分布离散的特点；因此可以通过聚类算法对呼气特征图像中的不同类像素点进行分析计算，使得呼气剧变系数相近的短时段可以聚为一类来进行呼气状态的量化；同时为了降低数据点分布离散对于聚类结果的影响，本实施例通过设置窗口来分割呼气特征图像进行聚类分析。具体的，首先使用大小的窗口对呼气特征图像进行分割，其中，表示呼气短时数据序列中的元素数量，表示原始呼气数据序列中的元素数量，表示呼气特征图像的尺寸，即呼气特征图像一条边包含的像素点数量，表示向下取整；通过呼气短时数据序列在原始呼气数据序列中元素数量的占比来获取窗口大小；通过获取到的窗口大小对呼气特征图像进行分割，得到若干呼气特征窗口；需要说明的是，呼气特征图像在通过窗口进行分割时，同样采用二次线性插值对像素点不足的窗口进行填补。进一步的，对每个呼气特征窗口进行聚类，通过K-means方法对呼气特征窗口中的像素点进行聚类，K值设置为2，在呼气特征窗口中随机选取像素点作为初始聚类中心，像素点间的聚类参考距离的具体计算方法为：其中，表示呼气特征窗口中任意的点与点的聚类参考距离，表示点的坐标信息，表示点的坐标信息，表示点与点的欧式距离，表示点的灰度值，表示点的灰度值；通过呼气特征窗口内像素点坐标之间的欧式距离，以及灰度值距离来量化聚类参考距离进行聚类，像素点的欧式距离越小，在窗口内越接近，呼气状态相近的可能性越大，越可能聚为一类；灰度值距离越小，避免了呼气特征窗口内数据点离散分布对于聚类结果的影响，使得灰度值相近但欧式距离较远的像素点也可能聚为一类，提高了聚类结果的准确性与可信度。进一步的，根据所述K值、聚类参考距离及初始聚类中心，对每个呼气特征窗口进行K-means聚类，每个呼气特征窗口都分别得到了两个类别；对任意一个呼气特征窗口中的两个类别分别计算类别内像素点的灰度均值，将灰度均值最大的一类记为呼气特征窗口中的第一类别，将灰度均值最小的一类记为呼气特征窗口中的第二类别；按照上述方法获取每个呼气特征窗口中的第一类别与第二类别，将所有呼气特征窗口中所有第一类别包含的像素点数量总和记为第一像素量，将所有呼气特征窗口中所有第二类别包含的像素点数量总和记为第二像素量，将第一像素量与第二像素量的比值作为原始呼气数据序列的呼气特征指数，即用户的呼气特征指数，表示为；此时，由于呼气剧变系数较大的短时段对应在呼气特征图像中的像素点，其灰度值较大，因此第一类别反映的是呼气状态剧烈变化的部分，第二类别反映的是呼气状态较为平稳的部分，通过两者数量总和的比值来量化用户的呼气状态。至此，获取到了用户的呼气特征指数，用以反映用户采集到的呼气流量数据中的呼气状态，通过窗口分割及灰度值距离对于聚类算法的优化，降低了数据点离散分布对于聚类结果的影响，同时更多考虑了呼气流量数据之间时间关联性对呼气状态判断的影响。知识图谱构建检索模块S103，根据用户的年龄数据、呼气流量数据中的最大峰值以及呼气特征指数，组成呼气状态三元组并构建知识图谱，根据知识图谱检索分析用户的呼气状态。需要说明的是，通过模块S102已经对用户的原始呼气数据序列分析得到了用户的呼气特征指数，通过结合用户的年龄数据以及呼气流量数据最大峰值，可以对各年龄段各生理状态下的用户评估判断当前的健康状态，其中年龄数据即用于各年龄段，呼气流量数据最大峰值用于确定用户本身的生理状态，例如肺活量大的用户呼气流量数据最大峰值就会越大；通过三种指标组成三元组并对医院大量人群构建知识图谱，进而可以根据知识图谱来分析用户的呼气状态。具体的，提取原始呼气数据序列中的最大峰值，即所有呼气流量数据中的最大值，表示为，根据用户的年龄数据、呼气特征指数以及呼气流量数据的最大峰值组成呼气状态三元组，用来表征用户的当前呼气状态，呼气状态三元组表示为；采集医院大量人群的呼气流量数据以及年龄数据，并通过上述方法表征每个人的呼气状态三元组，根据医院大量人群的呼气状态三元组进行知识图谱的构建，将知识图谱作为标准库中的数据；其中知识图谱构建为现有技术，本实施例不再赘述。进一步的，将用户的呼气状态三元组在构建出的知识图谱中进行检索，输出即得到了用户当前的呼气状态。至此，通过用户的呼气状态三元组与构建出的知识图谱，完成了对于用户呼气流量数据的处理及呼气状态分析，通过结合年龄数据及呼气流量数据最大峰值使得对于用户的呼气状态分析更准确，更加准确结合用户的年龄阶段和生理状态进行呼气状态分析。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
