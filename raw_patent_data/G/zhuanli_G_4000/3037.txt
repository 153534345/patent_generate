标题title
一种四相位信号交叉口的流向冲突判别和配时优化方法
摘要abst
本发明公开了一种四相位信号交叉口的流向冲突判别和配时优化方法，包括：1、对四相位信号交叉口的航拍视频中每一帧图像上的交叉口区域进行栅格化处理；2、利用yolo算法和deepsort算法对车辆轨迹数据进行提取；3、利用车辆识别框与栅格的关系判断栅格内每辆车的冲突发生情况；4、判断交叉口内各车辆流向的冲突常发性区域；5、对所判定的常发性冲突进行优化。本发明能根据车辆轨迹数据判断出交叉口内各流向的冲突常发性区域，从而能对四相位交叉口的冲突进行针对性地优化，使车辆通行既安全又顺畅、高效。
权利要求书clms
1.一种四相位信号交叉口的流向冲突判别和配时优化方法，其特征在于，是按如下步骤进行：步骤一：对四相位信号交叉口的航拍视频中每一帧图像上的交叉口区域进行栅格化处理，得到每一帧图像上的若干个边长为w的栅格，其中，所述交叉口区域是指交叉口四条停车线的延长线与交叉口边缘线的相交区域，所述四相位交叉口是指相位1为南北方向直行相位、相位2为南北方向左转相位、相位3为东西方向直行相位、相位4为东西方向左转相位的十字形交叉口；步骤二：利用Yolo算法与deepsort算法对航拍视频中所有车辆进行识别与轨迹跟踪，得到所有车辆的轨迹数据，所述轨迹数据包括：各个车辆的识别框、由识别框的几何中心连接而成的轨迹长度、车辆流向以及车速；步骤三：根据各个车辆的识别框，计算第j帧图像上每辆车占据不同栅格的面积，从而得到所有帧上车辆占据各个栅格的面积，将所有帧上任意第n辆车持续多帧占据某个栅格i的面积与w2之比均大于等于比例阈值q的时间记为tn；根据车辆流向，将持续多帧占据某个栅格i的第n辆车的行驶方向记为nx,y，其中，x表示车辆进口道的方向，且x属于{E,W,S,N}，分别表示东、西、南、北，y表示车辆的行驶转向，且y属于{H,L,R}，分别表示直行、左转、右转；若行驶方向nx,y为北进口道右转nN,R、东进口道右转nE,R、西进口道右转nW,R、南进口道右转nS,R，则执行步骤3.1；否则，执行步骤3.2；步骤3.1：若tn大于第一冲突阈值则表示第n辆车在栅格i发生冲突，且冲突类型为右转车辆与慢性交通的冲突，否则，表示第n辆车在栅格i不发生冲突，并结束流程；其中，vb为所设定的右转车辆平均车速；步骤3.2：若tn大于第二冲突阈值则表示第n辆车在栅格i发生冲突，且冲突类型为直行车与左转车的冲突；否则，表示第n辆车在栅格i不发生冲突，并结束流程；其中，vo为所设定的左转车辆平均车速，且to＜tb；步骤四：获取栅格i上所有发生冲突的车辆数，并统计同一行驶方向上冲突车辆的数量Xx,y，若进口道方向的直行车辆数Xx,H＞h，则表示栅格i为车辆进口道的方向上的直行车辆冲突常发性区域，若进口道方向的左转车辆数Xx,L＞l，则表示栅格i为车辆进口道的方向上的左转车辆冲突常发性区域，若进口道方向的右转车辆数Xx,R＞r，则表示栅格i为车辆进口道的方向上的右转车辆与慢行交通冲突常发性区域，其中，h、l、r分别为直行车辆、左转车辆和右转车辆的冲突发生次数下限值；步骤五：以相位1是绿灯开始至相位1的红灯结束为一个信号周期，在第k个信号周期下对交叉口区域中对相位1切换至相位2的过程中直行车辆与左转车辆的冲突常发性区域进行信号配时优化：步骤5.1：利用式计算相位1切换至相位2过程中南、北直行车辆驶离交叉口所需要的清空时间式中，为第k个信号周期下相位1的车道停车线分别与自身方向的直行冲突区域的几何中心距离的平均值，/＞为第k个信号周期下南、北向直行尾车车辆长度的平均值，/＞为第k个信号周期下南、北向直行尾车分别通过自身方向车道停车线的速度平均值；步骤5.2：利用式计算第k个信号周期下相位2的南、北向左转车辆从停车线驶至冲突区域几何中心的进入时间式中，为第k个信号周期下的南、北向左转头车启动损失时间的平均值，/＞为第k个信号周期下的南、北向左转头车启动加速度的平均值，/＞为第k个信号周期下的南、北向左转头车由停车线分别与自身方向左转冲突区域几何中心距离的平均值；步骤5.3：利用式计算第k个信号周期下车辆间的安全间隔时间式中，为第k个信号周期下所设交叉口车辆间的安全距离；步骤5.4：利用式计算第k个信号周期下相位1切换至相位2后调整的绿灯间隔时间步骤5.5：计算所有信号周期下相位1切换至相位2后调整的绿灯间隔时间并取平均值作为相位1切换至相位2的最优绿灯间隔时间t1,2，用最优绿灯间隔时间t1,2更新相位1切换至相位2的原有绿灯间隔时间；步骤5.6：按照步骤5.1至步骤5.5的过程计算其余相位间切换后调整的绿灯间隔时间并更新原有绿灯间隔时间；步骤六：增设右转专用相位，使得各流向进入交叉口的右转机动车与左转机动车共用一个相位，即左转信号灯绿灯放行，各方向进口道右转车辆均能通行，从而实现对交叉口内右转车辆冲突常发性区域进的优化以消除冲突。2.一种电子设备，包括存储器以及处理器，其特征在于，所述存储器用于存储支持处理器执行权利要求1所述流向冲突判别和配时优化方法的程序，所述处理器被配置为用于执行所述存储器中存储的程序。3.一种计算机可读存储介质，计算机可读存储介质上存储有计算机程序，其特征在于，所述计算机程序被处理器运行时执行权利要求1所述流向冲突判别和配时优化方法的步骤。
说明书desc
技术领域本发明涉及交通安全技术领域，具体是一种四相位信号交叉口的流向冲突判别和配时优化方法。背景技术交叉口作为路网中的关键节点，其通行状况往往影响着相接道路乃至周边区域路网的安全状况及服务水平。但随着城市机动车、非机动车保有量不断增加，在诸多城市中心城区高峰时段，交叉口各种流向的交通需求愈加复杂。虽然交叉口通过常规的信号相位划分，解决了机动车主要流向之间的冲突问题，但实际运行中仍然存在一些机动车与机动车、机动车与非机动车之间直接或者间接的流向冲突，严重影响交叉口交通效率与通行安全。而现今车路协同环境下的车流冲突及碰撞研究方法中，多将车辆视为质点或圆模型，均未考虑车辆尺寸大小，进行车辆冲突识别时误差较大，从而增加了车辆碰撞的风险。发明内容本发明是为了解决上述现有技术存在的不足之处，提出一种四相位信号交叉口的流向冲突判别和配时优化方法，以期能根据车辆轨迹数据判断出交叉口内各流向的冲突常发性区域，从而能对四相位交叉口的冲突进行针对性地优化，使车辆通行既安全又顺畅、高效。本发明为达到上述发明目的，采用如下技术方案：本发明一种四相位信号交叉口的流向冲突判别和配时优化方法的特点在于，是按如下步骤进行：步骤一：对四相位信号交叉口的航拍视频中每一帧图像上的交叉口区域进行栅格化处理，得到每一帧图像上的若干个边长为w的栅格，其中，所述交叉口区域是指交叉口四条停车线的延长线与交叉口边缘线的相交区域，所述四相位交叉口是指相位1为南北方向直行相位、相位2为南北方向左转相位、相位3为东西方向直行相位、相位4为东西方向左转相位的十字形交叉口；步骤二：利用Yolo算法与deepsort算法对航拍视频中所有车辆进行识别与轨迹跟踪，得到所有车辆的轨迹数据，所述轨迹数据包括：各个车辆的识别框、由识别框的几何中心连接而成的轨迹长度、车辆流向以及车速；步骤三：根据各个车辆的识别框，计算第j帧图像上每辆车占据不同栅格的面积，从而得到所有帧上车辆占据各个栅格的面积，将所有帧上任意第n辆车持续多帧占据某个栅格i的面积与w2之比均大于等于比例阈值q的时间记为tn；根据车辆流向，将持续多帧占据某个栅格i的第n辆车的行驶方向记为nx,y，其中，x表示车辆进口道的方向，且x属于{E,W,S,N}，分别表示东、西、南、北，y表示车辆的行驶转向，且y属于{H,L,R}，分别表示直行、左转、右转；若行驶方向nx,y为北进口道右转nN,R、东进口道右转nE,R、西进口道右转nW,R、南进口道右转nS,R，则执行步骤3.1；否则，执行步骤3.2；步骤3.1：若tn大于第一冲突阈值则表示第n辆车在栅格i发生冲突，且冲突类型为右转车辆与慢性交通的冲突，否则，表示第n辆车在栅格i不发生冲突，并结束流程；其中，vb为所设定的右转车辆平均车速；步骤3.2：若tn大于第二冲突阈值则表示第n辆车在栅格i发生冲突，且冲突类型为直行车与左转车的冲突；否则，表示第n辆车在栅格i不发生冲突，并结束流程；其中，vo为所设定的左转车辆平均车速，且to＜tb；步骤四：获取栅格i上所有发生冲突的车辆数，并统计同一行驶方向上冲突车辆的数量Xx,y，若进口道方向的直行车辆数Xx,H＞h，则表示栅格i为车辆进口道的方向上的直行车辆冲突常发性区域，若进口道方向的左转车辆数Xx,L＞l，则表示栅格i为车辆进口道的方向上的左转车辆冲突常发性区域，若进口道方向的右转车辆数Xx,R＞r，则表示栅格i为车辆进口道的方向上的右转车辆与慢行交通冲突常发性区域，其中，h、l、r分别为直行车辆、左转车辆和右转车辆的冲突发生次数下限值；步骤五：以相位1是绿灯开始至相位1的红灯结束为一个信号周期，在第k个信号周期下对交叉口区域中对相位1切换至相位2的过程中直行车辆与左转车辆的冲突常发性区域进行信号配时优化：步骤5.1：利用式计算相位1切换至相位2过程中南、北直行车辆驶离交叉口所需要的清空时间式中，为第k个信号周期下相位1的车道停车线分别与自身方向的直行冲突区域的几何中心距离的平均值，/＞为第k个信号周期下南、北向直行尾车车辆长度的平均值，/＞为第k个信号周期下南、北向直行尾车分别通过自身方向车道停车线的速度平均值；步骤5.2：利用式计算第k个信号周期下相位2的南、北向左转车辆从停车线驶至冲突区域几何中心的进入时间式中，为第k个信号周期下的南、北向左转头车启动损失时间的平均值，为第k个信号周期下的南、北向左转头车启动加速度的平均值，/＞为第k个信号周期下的南、北向左转头车由停车线分别与自身方向左转冲突区域几何中心距离的平均值；步骤5.3：利用式计算第k个信号周期下车辆间的安全间隔时间式中，为第k个信号周期下所设交叉口车辆间的安全距离；步骤5.4：利用式计算第k个信号周期下相位1切换至相位2后调整的绿灯间隔时间步骤5.5：计算所有信号周期下相位1切换至相位2后调整的绿灯间隔时间并取平均值作为相位1切换至相位2的最优绿灯间隔时间t1,2，用最优绿灯间隔时间t1,2更新相位1切换至相位2的原有绿灯间隔时间；步骤5.6：按照步骤5.1至步骤5.5的过程计算其余相位间切换后调整的绿灯间隔时间并更新原有绿灯间隔时间；步骤六：增设右转专用相位，使得各流向进入交叉口的右转机动车与左转机动车共用一个相位，即左转信号灯绿灯放行，各方向进口道右转车辆均能通行，从而实现对交叉口内右转车辆冲突常发性区域进的优化以消除冲突。本发明一种电子设备，包括存储器以及处理器的特点在于，所述存储器用于存储支持处理器执行所述流向冲突判别和配时优化方法的程序，所述处理器被配置为用于执行所述存储器中存储的程序。本发明一种计算机可读存储介质，计算机可读存储介质上存储有计算机程序的特点在于，所述计算机程序被处理器运行时执行所述流向冲突判别和配时优化方法的步骤。与现有技术相比，本发明的有益效果在于：本发明在信号交叉口基础上，根据交叉口航拍视频得到交叉口的轨迹数据，对交叉口栅格化，通过设置比例阈值和冲突阈值分析栅格内每辆车的冲突发生情况，充分考虑到车辆尺寸的大小，减小了车辆冲突识别的误差；获得每个栅格内冲突在时间和空间上的累计，并根据冲突发生情况，通过设置与数量相关指标以确定交叉口内不同流向车辆各自的冲突常发性区域；针对所得到的冲突常发性区域进行配时优化，对直行车辆与左转车辆的冲突常发性区域的配时优化从绿灯间隔时间优化方面进行考量，使得相位切换过程中车辆可以安全有效的避免交叉口内的冲突，右转车辆冲突常发性区域的配时优化考虑右转专用信号相位的设置，使得右转车辆可以有效的避免了与慢行交通之间的冲突。本发明从时间与空间的角度充分考虑，提高了交叉口的安全性，也提升了城市道路通行效率。附图说明图1为本发明的执行步骤流程框图；图2为本发明栅格化交叉口内部示意图；图3为本发明四相位信号交叉口相位图；图4为本发明右转专用相位设置后的信号交叉口相位图。具体实施方式本实施例中，如图1所示，一种四相位信号交叉口的流向冲突判别和配时优化方法包：步骤一：对四相位信号交叉口的航拍视频中每一帧图像上的交叉口区域进行栅格化处理，结果如图2所示，得到每一帧图像上的若干个边长为3.5米的栅格，其中，所述交叉口区域是指交叉口四条停车线的延长线与交叉口边缘线的相交区域，所述四相位交叉口如图3所示，是指相位1为南北方向直行相位、相位2为南北方向左转相位、相位3为东西方向直行相位、相位4为东西方向左转相位的十字形交叉口；步骤二：利用Yolo算法与deepsort算法对航拍视频中所有车辆进行识别与轨迹跟踪，得到所有车辆的轨迹数据，所述轨迹数据包括：各个车辆的识别框、由识别框的几何中心连接而成的轨迹长度、车辆流向以及车速；步骤三：根据各个车辆的识别框，计算第j帧图像上每辆车占据不同栅格的面积，从而得到所有帧上车辆占据各个栅格的面积，将所有帧上任意第n辆车持续多帧占据某个栅格i的面积与12.25m2之比均大于等于比例阈值0.7的时间记为tn；根据车辆流向，将持续多帧占据某个栅格i的第n辆车的行驶方向记为nx,y，其中，x表示车辆进口道的方向，且x属于{E,W,S,N}，分别表示东、西、南、北，y表示车辆的行驶转向，且y属于{H,L,R}，分别表示直行、左转、右转；若行驶方向nx,y为北进口道右转nN,R、东进口道右转nE,R、西进口道右转nW,R、南进口道右转nS,R，执行步骤3.1；否则，执行步骤3.2；步骤3.1：若tn大于第一冲突阈值则表示第n辆车在栅格i发生冲突，且冲突类型为右转车辆与慢性交通的冲突，否则，表示第n辆车在栅格i不发生冲突，并结束流程；其中，vb为所设定的右转车辆平均车速；步骤3.2：若tn大于第二冲突阈值则表示第n辆车在栅格i发生冲突，且冲突类型为直行车与左转车的冲突；否则，表示第n辆车在栅格i不发生冲突，并结束流程；其中，vo为所设定的左转车辆平均车速，且to＜tb；具体实施中，第n辆车占据第i个栅格面积与12.25m2比开始大于比例阈值0.7那一帧记为Din帧，结束到达0.7的那一帧记为Pin帧,时间与/＞为Din帧与Pin帧中间时刻差值的绝对值；步骤四：获取栅格i上所有发生冲突的车辆数，并统计同一行驶方向上冲突车辆的数量Xx,y，若进口道方向的直行车辆数Xx,H＞5，则表示栅格i为车辆进口道的方向上的直行车辆冲突常发性区域，若进口道方向的左转车辆数Xx,L＞3，则表示栅格i为车辆进口道的方向上的左转车辆冲突常发性区域，若进口道方向的右转车辆数Xx,R＞2，则表示栅格i为车辆进口道的方向上的右转车辆与慢行交通冲突常发性区域；步骤五：以相位1是绿灯开始至相位1的红灯结束为一个信号周期，在第k个信号周期下对交叉口区域中对相位1切换至相位2的过程中直行车辆与左转车辆的冲突常发性区域进行信号配时优化：步骤5.1：利用式计算相位1切换至相位2过程中南、北直行车辆驶离交叉口所需要的清空时间式中，为第k个信号周期下相位1的车道停车线分别与自身方向的直行冲突区域的几何中心距离的平均值，/＞为第k个信号周期下南、北向直行尾车车辆长度的平均值，/＞为第k个信号周期下南、北向直行尾车分别通过自身方向车道停车线的速度平均值；步骤5.2：利用式计算第k个信号周期下相位2的南、北向左转车辆从停车线驶至冲突区域几何中心的进入时间式中，为第k个信号周期下的南、北向左转头车启动损失时间的平均值，为第k个信号周期下的南、北向左转头车启动加速度的平均值，/＞为第k个信号周期下的南、北向左转头车由停车线分别与自身方向左转冲突区域几何中心距离的平均值；步骤5.3：利用式计算第k个信号周期下车辆间的安全间隔时间式中，为第k个信号周期下所设交叉口车辆间的安全距离；步骤5.4：利用式计算第k个信号周期下相位1切换至相位2后调整的绿灯间隔时间步骤5.5：计算所有信号周期下相位1切换至相位2后调整的绿灯间隔时间并取平均值作为相位1切换至相位2的最优绿灯间隔时间t1,2，用最优绿灯间隔时间t1,2更新相位1切换至相位2的原有绿灯间隔时间；步骤5.6：按照步骤5.1至步骤5.5的过程计算其余相位间切换后调整的绿灯间隔时间并更新原有绿灯间隔时间；步骤六：增设右转专用相位，使得各流向进入交叉口的右转机动车与左转机动车共用一个相位，即左转信号灯绿灯放行，各方向进口道右转车辆均能通行，从而实现对交叉口内右转车辆冲突常发性区域进的优化以消除冲突。设置后信号交叉口的相位调整，如图4所示，为相位1南北方向直行，相位2南北方向左转、各方向右转，相位3东西方向直行，相位4东西方向左、各方向右转。本实施例中，一种电子设备，包括存储器以及处理器，该存储器用于存储支持处理器执行上述方法的程序，该处理器被配置为用于执行该存储器中存储的程序。本实施例中，一种计算机可读存储介质，是在计算机可读存储介质上存储有计算机程序，该计算机程序被处理器运行时执行上述方法的步骤。
