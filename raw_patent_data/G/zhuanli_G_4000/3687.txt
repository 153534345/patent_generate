标题title
一种障碍物检测方法、装置和电子设备、存储介质
摘要abst
本申请公开了一种障碍物检测方法、装置和电子设备、存储介质。本申请的方法包括：获取当前帧激光点云的RB检测目标和AI检测目标；对当前帧的RB检测目标和AI检测目标进行目标跟踪，根据每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果，对当前帧的每个RB检测目标与当前帧的每个AI检测目标进行目标匹配与目标融合，得到当前帧每个融合目标的目标融合结果；获取每个融合目标的历史帧全量检测结果，根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果。本申请的技术方案可以提高点云障碍物检测的准确性和鲁棒性。
权利要求书clms
1.一种障碍物检测方法，其特征在于，所述方法包括：获取当前帧激光点云的目标检测结果，所述目标检测结果包括基于规则检测算法的RB检测目标和基于人工智能算法的AI检测目标；对当前帧的RB检测目标和AI检测目标进行目标跟踪，得到当前帧的每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果；根据每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果，对当前帧的每个RB检测目标与当前帧的每个AI检测目标进行目标匹配与目标融合，得到当前帧每个融合目标的目标融合结果；获取每个融合目标的历史帧全量检测结果，根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果。2.如权利要求1所述的障碍物检测方法，其特征在于，所述根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果，包括：根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的历史目标类型；获取目标类型与目标尺寸的对应关系；根据每个融合目标对应的历史目标类型和目标类型与目标尺寸的对应关系，对每个融合目标进行目标类型稳定性检测，得到每个融合目标当前帧的稳定态目标类型。3.如权利要求2所述的障碍物检测方法，其特征在于，所述历史帧全量检测结果包括每个检测目标的各种稳定态历史目标类型和每个检测目标的各种检测态历史目标类型及各种检测态历史目标类型的置信度，所述根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的历史目标类型，包括：根据每个检测目标的各种检测态历史目标类型及各种检测态历史目标类型的置信度，获取每个融合目标对应的每种检测态历史目标类型的置信度均值；以及根据每个检测目标的各种稳定态历史目标类型，获取每个融合目标对应的每种稳定态历史目标类型的出现次数；根据每个融合目标对应的每种检测态历史目标类型的置信度均值，获得每个融合目标对应的第一种目标类型；根据每个融合目标对应的每种稳定态历史目标类型的出现次数，获得每个融合目标对应的第二种目标类型。4.如权利要求3所述的障碍物检测方法，其特征在于，所述根据每个融合目标对应的历史目标类型和目标类型与目标尺寸的对应关系，对每个融合目标进行目标类型稳定性检测，得到每个融合目标当前帧的稳定态目标类型，包括：确定每个融合目标对应的第一种目标类型和第二种目标类型是否相同；当每个融合目标对应的第一种目标类型和第二种目标类型相同时，根据目标类型与目标尺寸的对应关系获取每个融合目标的第一种目标类型对应的目标尺寸和该融合目标当前帧的融合目标类型对应的目标尺寸；若两者的目标尺寸符合一致性条件，则将第一种目标类型作为该融合目标当前帧的稳定态目标类型。5.如权利要求1所述的障碍物检测方法，其特征在于，所述根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果，包括：确定每个融合目标的当前帧速度是否小于高速阈值；当小于高速阈值时，根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的稳定态历史航向角，根据每个融合目标对应的稳定态历史航向角对该融合目标进行航向角稳定性检测，得到该融合目标当前帧的稳定态航向角。6.如权利要求5所述的障碍物检测方法，其特征在于，所述当小于高速阈值时，根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的稳定态历史航向角，根据每个融合目标对应的稳定态历史航向角对该融合目标进行航向角稳定性检测，得到该融合目标当前帧的稳定态航向角，包括：从每个融合目标对应的稳定态历史航向角中获取与每个稳定态历史航向角的角度偏差最小的基准航向角；根据所述基准航向角从每个融合目标的稳定态历史航向角中获取与所述基准航向角的角度偏差小于角度偏差阈值的候选历史航向角；根据每个融合目标对应的候选历史航向角与稳定态历史航向角确定该融合目标是否满足航向角优化条件；当满足航向角优化条件时，根据每个融合目标的候选历史航向角获得该融合目标当前帧的稳定态航向角。7.如权利要求6所述的障碍物检测方法，其特征在于，所述根据每个融合目标对应的候选历史航向角与稳定态历史航向角确定该融合目标是否满足航向角优化条件，包括：确定每个融合目标对应的候选历史航向角总数是否大于该融合目标的稳定态历史航向角总数的一半；若大于，则满足航向角优化条件，否则不满足航向角优化条件；所述当满足航向角优化条件时，根据每个融合目标的候选历史航向角获得该融合目标当前帧的稳定态航向角，包括：过滤掉所述候选历史航向角中差值最大的两个候选历史航向角；将过滤后的候选历史航向角的均值作为该融合目标当前帧的稳定态航向角。8.如权利要求1所述的障碍物检测方法，其特征在于，所述根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果，包括：根据每个融合目标的当前帧目标融合结果和当前帧的连续N个历史帧的全量检测结果，获取该融合目标在连续N+1帧中的持续状态、速度变化和位置偏移；根据该融合目标在连续N+1帧中的持续状态、速度变化和位置偏移确定该融合目标是否处于静止状态；若处于静止状态，则将当前帧的第N个历史帧的稳定态位置作为当前帧的稳定态位置。9.一种障碍物检测装置，其特征在于，所述装置包括：目标检测单元，用于获取当前帧激光点云的目标检测结果，所述目标检测结果包括基于规则检测算法的RB检测目标和基于人工智能算法的AI检测目标；目标跟踪单元，用于对当前帧的RB检测目标和AI检测目标进行目标跟踪，得到当前帧的每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果；匹配融合单元，用于根据每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果，对当前帧的每个RB检测目标与当前帧的每个AI检测目标进行目标匹配与目标融合，得到当前帧每个融合目标的目标融合结果；稳定检测单元，用于获取每个融合目标的历史帧全量检测结果，根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果。10.一种电子设备，包括：处理器；以及被安排成存储计算机可执行指令的存储器，所述可执行指令在被执行时使所述处理器执行如权利要求1~8任一项所述的障碍物检测方法。11.一种计算机可读存储介质，所述计算机可读存储介质存储一个或多个程序，所述一个或多个程序当被包括多个应用程序的电子设备执行时，使得所述电子设备执行权利要求1~8任一项所述的障碍物检测方法。
说明书desc
技术领域本申请涉及自动驾驶技术领域，尤其涉及一种障碍物检测方法、装置和电子设备、存储介质。背景技术激光雷达作为自动驾驶领域最主要的传感器可以有效获取交通环境中障碍物的三维信息，利用三维点云进行目标识别可以获取目标的轮廓、位置、速度、运动轨迹等重要信息。但是，由于目前点云感知算法的技术局限导致目标检测结果与目标真实情况具有一定误差，例如在目标类型、航向角、速度、位置等方面都存在不同程度的偏差，需要利用后处理算法对目标检测结果进行优化处理。发明内容基于现有技术中存在的上述问题，本申请实施例提供了一种障碍物检测方法、装置和电子设备、存储介质，以对点云检测结果进行后处理，提高目标检测的准确性和鲁棒性。本申请实施例采用下述技术方案：第一方面，本申请实施例提供一种障碍物检测方法，所述方法包括：获取当前帧激光点云的目标检测结果，所述目标检测结果包括基于规则检测算法的RB检测目标和基于人工智能算法的AI检测目标；对当前帧的RB检测目标和AI检测目标进行目标跟踪，得到当前帧的每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果；根据每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果，对当前帧的每个RB检测目标与当前帧的每个AI检测目标进行目标匹配与目标融合，得到当前帧每个融合目标的目标融合结果；获取每个融合目标的历史帧全量检测结果，根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果。可选地，所述根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果，包括：根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的历史目标类型；获取目标类型与目标尺寸的对应关系；根据每个融合目标对应的历史目标类型和目标类型与目标尺寸的对应关系，对每个融合目标进行目标类型稳定性检测，得到每个融合目标当前帧的稳定态目标类型。可选地，所述历史帧全量检测结果包括每个检测目标的各种稳定态历史目标类型和每个检测目标的各种检测态历史目标类型及各种检测态历史目标类型的置信度，所述根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的历史目标类型，包括：根据每个检测目标的各种检测态历史目标类型及各种检测态历史目标类型的置信度，获取每个融合目标对应的每种检测态历史目标类型的置信度均值；以及根据每个检测目标的各种稳定态历史目标类型，获取每个融合目标对应的每种稳定态历史目标类型的出现次数；根据每个融合目标对应的每种检测态历史目标类型的置信度均值，获得每个融合目标对应的第一种目标类型；根据每个融合目标对应的每种稳定态历史目标类型的出现次数，获得每个融合目标对应的第二种目标类型。可选地，所述根据每个融合目标对应的历史目标类型和目标类型与目标尺寸的对应关系，对每个融合目标进行目标类型稳定性检测，得到每个融合目标当前帧的稳定态目标类型，包括：确定每个融合目标对应的第一种目标类型和第二种目标类型是否相同；当每个融合目标对应的第一种目标类型和第二种目标类型相同时，根据目标类型与目标尺寸的对应关系获取每个融合目标的第一种目标类型对应的目标尺寸和该融合目标当前帧的融合目标类型对应的目标尺寸；若两者的目标尺寸符合一致性条件，则将第一种目标类型作为该融合目标当前帧的稳定态目标类型。所述根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果，包括：确定每个融合目标的当前帧速度是否小于高速阈值；当小于高速阈值时，根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的稳定态历史航向角，根据每个融合目标对应的稳定态历史航向角对该融合目标进行航向角稳定性检测，得到该融合目标当前帧的稳定态航向角。可选地，所述当小于高速阈值时，根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的稳定态历史航向角，根据每个融合目标对应的稳定态历史航向角对该融合目标进行航向角稳定性检测，得到该融合目标当前帧的稳定态航向角，包括：从每个融合目标对应的稳定态历史航向角中获取与每个稳定态历史航向角的角度偏差最小的基准航向角；根据所述基准航向角从每个融合目标的稳定态历史航向角中获取与所述基准航向角的角度偏差小于角度偏差阈值的候选历史航向角；根据每个融合目标对应的候选历史航向角与稳定态历史航向角确定该融合目标是否满足航向角优化条件；当满足航向角优化条件时，根据每个融合目标的候选历史航向角获得该融合目标当前帧的稳定态航向角。可选地，所述根据每个融合目标对应的候选历史航向角与稳定态历史航向角确定该融合目标是否满足航向角优化条件，包括：确定每个融合目标对应的候选历史航向角总数是否大于该融合目标的稳定态历史航向角总数的一半；若大于，则满足航向角优化条件，否则不满足航向角优化条件；所述当满足航向角优化条件时，根据每个融合目标的候选历史航向角获得该融合目标当前帧的稳定态航向角，包括：过滤掉所述候选历史航向角中差值最大的两个候选历史航向角；将过滤后的候选历史航向角的均值作为该融合目标当前帧的稳定态航向角。可选地，所述根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果，包括：根据每个融合目标的当前帧目标融合结果和当前帧的连续N个历史帧的全量检测结果，获取该融合目标在连续N+1帧中的持续状态、速度变化和位置偏移；根据该融合目标在连续N+1帧中的持续状态、速度变化和位置偏移确定该融合目标是否处于静止状态；若处于静止状态，则将当前帧的第N个历史帧的稳定态位置作为当前帧的稳定态位置。第二方面，本申请实施例还提供一种障碍物检测装置，所述装置包括：目标检测单元，用于获取当前帧激光点云的目标检测结果，所述目标检测结果包括基于规则检测算法的RB检测目标和基于人工智能算法的AI检测目标；目标跟踪单元，用于对当前帧的RB检测目标和AI检测目标进行目标跟踪，得到当前帧的每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果；匹配融合单元，用于根据每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果，对当前帧的每个RB检测目标与当前帧的每个AI检测目标进行目标匹配与目标融合，得到当前帧每个融合目标的目标融合结果；稳定检测单元，用于获取每个融合目标的历史帧全量检测结果，根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果。第三方面，本申请实施例还提供一种电子设备，包括：处理器；以及被安排成存储计算机可执行指令的存储器，所述可执行指令在被执行时使所述处理器执行障碍物检测方法。第四方面，本申请实施例还提供一种计算机可读存储介质，所述计算机可读存储介质存储一个或多个程序，所述一个或多个程序当被包括多个应用程序的电子设备执行时，使得所述电子设备执行障碍物检测方法。本申请实施例采用的上述至少一个技术方案能够达到以下有益效果：本申请实施例先获取激光点云的RB检测目标和AI检测目标；然后对每个RB检测目标和每个的AI检测目标进行跟踪，根据跟踪结果对RB检测目标与AI检测目标进行目标匹配与目标融合，得到每个融合目标的目标融合结果；最后获取融合目标的历史帧全量检测结果，根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果对当前帧的目标融合结果进行稳定性检测，能够得到每个融合目标的当前帧稳定态检测结果。本申请实施例对检测目标进行目标跟踪，能够在一定程度上避免目标漏检与误检问题，提高目标融合的准确性；以及以跟踪结果为数据基础进行目标级融合，能够得到每个融合目标完整的目标检测信息；且结合历史帧全量检测结果和当前帧的目标融合结果对每个融合目标进行稳定性检测，能够得到每个融合目标的当前帧稳定态检测结果，提高激光点云障碍物的检测精度和鲁棒性。附图说明此处所说明的附图用来提供对本申请的进一步理解，构成本申请的一部分，本申请的示意性实施例及其说明用于解释本申请，并不构成对本申请的不当限定。在附图中：图1为本申请实施例中示出的一种障碍物检测方法流程图；图2为本申请实施例中示出的一种检测障碍物的整体流程示意图；图3为本申请实施例中示出的一种目标类型稳定检测流程示意图；图4为本申请实施例中示出的一种航向角稳定检测流程示意图；图5为本申请实施例中示出的一种位置稳定检测流程示意图；图6为本申请实施例中示出的一种障碍物检测装置的结构示意图；图7为本申请实施例中一种电子设备的结构示意图。具体实施方式为使本申请的目的、技术方案和优点更加清楚，下面将结合本申请具体实施例及相应的附图对本申请技术方案进行清楚、完整地描述。显然，所描述的实施例仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。以下结合附图，详细说明本申请各实施例提供的技术方案。本申请实施例提供的障碍物检测方法的执行主体可以是路侧设备、路侧服务器或者云控平台；也可以是感知系统或集成该系统的规划/控制系统，如辅助驾驶系统或自动驾驶系统等。此外，本申请实施例的障碍物检测方法的执行主体也可以是软件或硬件。请参考图1，图1以执行主体是自动驾驶系统为例，对本申请实施例提供的一种障碍物检测方法进行介绍。如图1所示，本申请实施例提供的一种障碍物检测方法可以包括以下步骤S110至步骤S140：步骤S110，获取当前帧激光点云的目标检测结果，所述目标检测结果包括基于规则检测算法的RB检测目标和基于人工智能算法的AI检测目标。交通参与者在位姿发生明显变化时或者目标物体在遮挡时发生明显分布变化时，可能导致目标检测结果的不稳定。基于该问题，本申请实施例一方面基于规则算法对激光点云进行检测，规则是与应用场景相关的，例如在自动驾驶场景下，可以对激光点云进行栅格化处理，对栅格化进行地面检测，剔除地面点云获取非地面的高架点云。对非地面的高架点云采用漫水填充法进行聚类并对聚类后的各簇点云进行凹凸包以及边界框拟合，得到当前帧激光点云的每个障碍物的RB检测目标，RB检测目标包括目标尺寸和目标位置，目标位置即为中心坐标。另一方面本申请实施例还基于人工智能算法对激光点云中的目标障碍物进行检测。人工智能算法是数据驱动型算法，人工智能算法的目标检测能力依赖于训练数据及标注，本申请实施例对标注的障碍物目标进行神经网络训练，生成神经网络的参数，依据神经网络参数学习激光点云中的障碍物目标，得到当前帧激光点云中每个障碍物的AI检测目标，AI检测目标包括目标类型及置信度、目标尺寸、目标位置等。需要说明的是，本申请实施例可以对车载激光雷达感知的激光点云进行检测，也可以对路侧激光雷达感知的激光点云进行检测。步骤S120，对当前帧的RB检测目标和AI检测目标进行目标跟踪，得到当前帧的每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果。采用跟踪算法可以改善因目标遮挡或体积较小导致的目标漏检、误检问题，恢复目标正确的检测框，从而让目标之间的结果更可靠。本申请实施例通过对目标进行跟踪，可以得到目标跟踪后更加准确的目标尺寸、目标位置、速度、航向角等信息。步骤S130，根据每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果，对当前帧的每个RB检测目标与当前帧的每个AI检测目标进行目标匹配与目标融合，得到当前帧每个融合目标的目标融合结果。基于RB检测目标和AI检测目标的跟踪结果为数据基础，可以准确地得到RB检测目标和AI检测目标是否为同一障碍物目标，对属于同一障碍物的RB检测目标和AI检测目标进行目标融合，得到更加全面的目标融合结果，例如目标融合结果包括目标类型及置信度、目标尺寸、目标位置、速度和航向角等信息。步骤S140，获取每个融合目标的历史帧全量检测结果，根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果。研究发现，基于规则检测算法存在障碍物轮廓大小、位置不稳定的问题，基于人工智能算法存在类型、速度、航向角不稳定的问题，特别是静止目标，存在显著的目标检测结果不稳定的问题。因此，通过前述步骤得到的目标融合结果在目标类型、航向角、位置等方面可能存在不稳定问题。针对该问题，本申请实施例获取每个融合目标的历史帧全量检测结果，历史帧全量检测结果包括历史帧的检测态结果和稳定态结果，检测态结果是指在目标检测阶段基于目标检测算法、在目标跟踪阶段基于跟踪算法和在目标融合阶段基于融合算法得到的各个阶段的检测结果，稳定态结果是指对目标融合结果进行稳定性检测后得到的最终结果。其中稳定态结果例如包括历史目标类型、历史航向角、历史位置、历史速度等，结合每个融合目标的历史帧全量检测结果和当前帧目标融合结果对每个融合目标进行稳定性检测，得到当前帧的稳定态检测结果。在得到当前帧的稳定态检测结果时，还可以将当前帧的稳定态检测结果和当前帧的检测态结果进行保存，得到当前帧的全量检测结果以作为下一帧激光点云的历史帧全量检测结果。如图1所示的障碍物检测方法可知，本实施例先获取激光点云的RB检测目标和AI检测目标；然后对每个RB检测目标和每个的AI检测目标进行跟踪，根据跟踪结果对RB检测目标与AI检测目标进行目标匹配与目标融合，得到每个融合目标的目标融合结果；最后获取融合目标的历史帧全量检测结果，根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果对当前帧的目标融合结果进行稳定性检测，能够得到每个融合目标的当前帧稳定态检测结果。本实施例对检测目标进行跟踪，能够在一定程度上避免目标漏检与误检问题，提高目标融合的准确性；以及以跟踪结果为数据基础进行目标级融合，能够得到每个融合目标完整的目标检测信息；且结合历史帧全量检测结果和当前帧的目标融合结果对每个融合目标进行稳定性检测，能够得到每个融合目标当前帧的稳定态检测结果，提高激光点云障碍物的检测精度和鲁棒性。图2为本申请实施例中示出的一种检测障碍物的整体流程示意图，如图2所示，在本申请的一些实施例中，在获取当前帧激光点云时，可以对当前帧激光点云进行预处理，包括但不限于点云稠密化、点云拼接等预处理。例如对不同激光雷达在同一时间采集的点云进行坐标系转换，将转换到同一坐标系中的点云进行拼接，得到全景点云数据。又例如，对于激光雷达在预设时间段内采集到的多帧点云进行点云稠密处理，得到稠密化后的当前帧激光点云。然后基于规则检测算法对当前帧激光点云进行目标检测，得到第一目标检测列表，第一目标检测列表中记录每个RB检测目标的目标尺寸和中心坐标等信息。以及基于人工智能算法对当前帧激光点云进行目标检测，得到第二目标检测列表，第二目标检测列表中记录每个AI检测目标的目标类型及置信度、目标尺寸、中心坐标等信息。接着在本申请的一些实施例中，对当前帧的RB检测目标和AI检测目标进行目标跟踪，得到当前帧的每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果，包括：将当前帧的RB检测目标和AI检测目标转换到同一坐标系中，采用匈牙利帧间匹配算法对RB检测目标进行帧间匹配，采用卡尔曼跟踪算法对RB检测目标进行帧内跟踪，得到每个RB检测目标的跟踪结果；同样的，采用匈牙利帧间匹配算法对AI检测目标进行帧间匹配，采用卡尔曼跟踪算法对AI检测目标进行帧内跟踪，得到每个AI检测目标的跟踪结果。这里跟踪结果包括每个目标的目标ID及相应的目标尺寸、目标位置、速度和航向角等跟踪信息。应该理解的是，在实际应用中，也可以采用其他目标跟踪算法进行帧间目标跟踪，例如采用贪心算法，本实施例对此不予限定。在得到每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果之后，可以根据每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果，对当前帧的每个RB检测目标与当前帧的每个AI检测目标进行目标匹配与目标融合，得到第三目标检测列表，第三目标检测列表中记录当前帧每个融合目标的目标融合结果，目标融合结果包括目标ID、目标类型及置信度、目标尺寸、目标位置、航向角、速度。例如，根据跟踪结果中的目标尺寸进行目标匹配，例如获取RB检测目标与AI检测目标的面积交并比，若大于交并比阈值，则两个目标为相互匹配的目标，可以对相互匹配的两个目标进行目标融合。当然，本领域技术人员也可以采用其他匹配策略进行对目标进行匹配处理。本申请实施例可以根据每种目标检测信息对应的融合策略对目标进行融合，例如目标尺寸、目标速度、目标位置等信息可以进行加权融合，目标类型、航向角可以以AI检测目标的跟踪结果为准。当然，本领域技术人员也可以采用其他融合策略，本申请不予限定。本申请实施例在完成目标级融合之后，还对融合目标进行稳定性检测，其中稳定性检测包括三个部分，分别是目标类型、航向角和目标位置，下面分别介绍每种稳定性检测的具体过程。第一，目标类型稳定性检测。在进行目标类型稳定性检测时，先根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的历史目标类型；然后获取目标类型与目标尺寸的对应关系；最后根据每个融合目标对应的历史目标类型和目标类型与目标尺寸的对应关系，对每个融合目标进行目标类型稳定性检测，得到每个融合目标当前帧的稳定目标类型。例如确定每个融合目标对应的历史目标类型的目标尺寸与该融合目标的融合目标类型的目标尺寸是否满足一致性条件，若满足则将每个融合目标对应的历史目标类型作为该融合目标当前帧的稳定态目标类型，否则将每个融合目标的融合目标类型作为该融合目标当前帧的稳定态目标类型。在本申请的一些实施例中，所述历史帧全量检测结果包括每个检测目标的各种稳定态历史目标类型和每个检测目标的各种检测态历史目标类型及各种检测态历史目标类型的置信度。其中，检测态历史目标类型是指基于人工智能算法检测出的每个AI检测目标对应的所有类型及其置信度，稳定态历史目标类型是指检测态历史目标类型经过目标类型稳定性检测后得到的最终目标类型。相应的，根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的历史目标类型，包括：根据每个检测目标的各种检测态历史目标类型及各种检测态历史目标类型的置信度，获取每个融合目标对应的每种检测态历史目标类型的置信度均值；以及根据每个检测目标的各种稳定态历史目标类型，获取每个融合目标对应的每种稳定态历史目标类型的出现次数；根据每个融合目标对应的每种检测态历史目标类型的置信度均值，获得每个融合目标对应的第一种目标类型；根据每个融合目标对应的每种稳定态历史目标类型的出现次数，获得每个融合目标对应的第二种目标类型。通过本实施例可以得到当前帧的融合目标对应的两种可能历史目标类型。如此，根据每个融合目标对应的历史目标类型和目标类型与目标尺寸的对应关系，对每个融合目标进行目标类型稳定性检测，得到每个融合目标当前帧的稳定态目标类型，包括：确定每个融合目标对应的第一种目标类型和第二种目标类型是否相同；当每个融合目标对应的第一种目标类型和第二种目标类型相同时，根据目标类型与目标尺寸的对应关系获取每个融合目标的第一种目标类型对应的目标尺寸和该融合目标当前帧的融合目标类型对应的目标尺寸；若两者的目标尺寸符合一致性条件，则将第一种目标类型作为该融合目标当前帧的稳定态目标类型。举例来说，如图3所示，将每个检测目标的各种稳定态历史目标类型和每个检测目标的各种检测态历史目标类型及各种检测态历史目标类型的置信度构建为目标类型历史信息表，以目标ID为关键字段遍历目标类型历史信息表，获得每个融合目标对应的置信度表和出现频次表，所述置信度表中记录在每个历史帧中该融合目标对应的每种检测态历史目标类型及置信度，所述出现频次表中记录该融合目标的每种稳定态历史目标类型在所有历史帧中的出现次数。假设在置信度表中融合目标A对应三种检测态历史目标类型，第一种检测态历史目标类型的置信度均值为75%，第二种检测态历史目标类型的置信度均值为45%，第三种检测态历史目标类型的置信度均值为10%，那么融合目标A对应的第一种目标类型为第一种检测态历史目标类型。假设在出现频次表中融合目标A的第一种稳定态历史目标类型出现N次，第二种稳定态历史目标类型出现N-5次，第三种稳定态历史目标类型出现N-10次，那么融合目标A对应的第二种目标类型为第一种稳定态历史目标类型。这样，若融合目标A的第一种目标类型和第二种目标类型不相同，此时直接将融合目标A当前帧的融合目标类型作为当前帧的稳定态目标类型；若融合目标A的第一种目标类型和第二种目标类型相同，则需要进一步判断融合目标A的第一种目标类型对应的目标尺寸和融合目标A当前帧的融合目标类型对应的目标尺寸的尺寸差值是否小于预设值，若小于预设值，则两者的目标尺寸符合一致性条件，否则两者的目标尺寸不符合一致性条件。符合一致性条件时，将第一种目标类型作为该融合目标A当前帧的稳定态目标类型，不符合一致性条件时，将融合目标A当前帧的融合目标类型作为当前帧的稳定态目标类型。通过本申请的目标类型稳定性检测方法能够解决目标类型的跳变问题，获得准确度更高、稳定性更强的目标类型检测结果。第二，航向角稳定性检测。在进行航向角的稳定性检测时，先获得每个融合目标的当前帧速度，如图4所示，确定每个融合目标的当前帧速度是否小于高速阈值，高速阈值可以根据经验设定，也可以根据统计试验获得；当小于高速阈值时，根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的稳定态历史航向角，根据每个融合目标对应的稳定态历史航向角对该融合目标进行航向角稳定性检测，得到该融合目标当前帧的稳定态航向角。当不小于高速阈值时，根据当前帧速度获得当前帧的稳定态航向角。本实施例先基于速度判断是否需要进行航向角稳定性检测，由于在目标跟踪阶段，通常是基于速度计算航向角，该计算方法的精度与目标的运动速度相关，目标的运动运动速度越快，航向角的计算精度越高。因此，通过设置合理的高速阈值，在当前帧速度小于该高速阈值时，说明通过目标跟踪算法所得到的速度值并不可靠，此时需要对速度进行稳定性检测。在申请的一些实施例中，如图4所示，当小于高速阈值时，根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的稳定态历史航向角，根据每个融合目标对应的稳定态历史航向角对该融合目标进行航向角稳定性检测，得到该融合目标当前帧的稳定态航向角，包括：从每个融合目标对应的稳定态历史航向角中获取与每个稳定态历史航向角的角度偏差最小的基准航向角；根据所述基准航向角从每个融合目标的稳定态历史航向角中获取与所述基准航向角的角度偏差小于角度偏差阈值的候选历史航向角；根据每个融合目标对应的候选历史航向角与稳定态历史航向角确定该融合目标是否满足航向角优化条件；当满足航向角优化条件时，根据每个融合目标的候选历史航向角获得该融合目标当前帧的稳定态航向角。其中，通过下述步骤获取基准航向角：获取每个融合目标的每个稳定态历史航向角与该融合目标的其他稳定态历史航向角的角度偏差小于预设值的数量，将数量最多的稳定态历史航向角作为基准航向角。举例来说，假设融合目标A共有10个稳定态历史航向角，分别为稳定态历史航向角yaw1、yaw2、yaw3、yaw4、yaw5、yaw6、yaw7、yaw8、yaw9和yaw10。稳定态历史航向角yaw1与其他9个稳定态历史航向角的角度偏差都小于或等于45°；稳定态历史航向角yaw2与其他5个稳定态历史航向角的角度偏差都小于或等于45°，与剩余的4个稳定态历史航向角的角度偏差大于45°；如此可以得到融合目标A的每个稳定态历史航向角与其他稳定态历史航向角之间的偏差情况。如果稳定态历史航向角yaw1与其他稳定态历史航向角的角度偏差小于或等于45°的数量最多，那么稳定态历史航向角yaw1为基准航向角。需要说明的是，在基准航向角和候选历史航向角的角度偏差计算过程中，应先判断两个稳定态历史航向角的方向是否一致，例如每个稳定态历史航向角通过向量进行表示，若两个稳定态历史航向角的向量积大于或等于0，则说明两个历史航向角的方向一致，此时可以直接计算两个稳定态历史航向角的差值，将差值作为角度偏差；若两个稳定态历史航向的向量积小于0，则说明两个稳定态历史航向角的方向不一致，此时先计算两个稳定态历史航向角的绝对值，将绝对值的和作为角度偏差。在本实例的一些可能实现方案中，根据每个融合目标对应的候选历史航向角与稳定态历史航向角确定该融合目标是否满足航向角优化条件，包括：确定每个融合目标对应的候选历史航向角总数是否大于该融合目标的稳定态历史航向角总数的一半；若大于，则满足航向角优化条件，否则不满足航向角优化条件，在不满足航向角优化条件时，则将该融合目标的目标融合结果中的航向角作为当前帧的稳定态航向角。当满足航向角优化条件时，根据每个融合目标的候选历史航向角获得该融合目标当前帧的稳定航向角，包括：过滤掉所述候选历史航向角中差值最大的两个候选历史航向角；将过滤后的候选历史航向角的均值作为该融合目标当前帧的稳定态航向角。通过本申请的航向角稳定性检测方法能够解决航向不连续问题，获得更加顺滑的方向检测结果。第二，位置稳定性检测。在进行位置稳定性检测时，根据每个融合目标的当前帧目标融合结果和当前帧的连续N个历史帧的全量检测结果，获取该融合目标在连续N+1帧中的持续状态、速度变化和位置偏移；根据该融合目标在连续N+1帧中的持续状态、速度变化和位置偏移确定该融合目标是否处于静止状态；若处于静止状态，则将当前帧的第N个历史帧的稳定态位置作为当前帧的稳定态位置。此外，在本申请的其他实施例中，当确定融合目标处于静止状态时，还可以将当前帧速度设置为零。融合目标在连续N+1帧中的持续状态可以通过目标ID进行判断，若融合目标A在连续N+1帧中都出现，则说明融合目标A在连续N+1帧中属于持续状态，若融合目标A在连续N+1帧中的某一帧或多帧中没有出现，则说明书融合目标A在连续N+1帧中属于闪现状态。融合目标在连续N+1帧中的速度变化可以通过融合目标在每一帧的速度进行判断，融合目标在连续N+1帧中的位置偏移可以通过融合目标在每一帧的目标位置进行判断。如图5所示，获取当前帧t以及当前帧的上一帧t-1和上两帧t-2的目标ID、目标速度和目标位置，根据目标ID判断某个融合目标是否出现在这三帧中，若出现在这三帧中，且在三帧中的速度都小于预设速度值、任两帧的位置偏差小于预设偏差值，则判断该融合目标满足静止条件，将当前帧的上两帧的位置作为该融合目标当前帧的稳定位置。通过本申请的位置稳定性检测方法能够解决在障碍物静止不动时，由于遮挡导致目标位置在小范围来回跳变的问题。基于本申请的上述实施例，通过对检测目标进行后融合处理，并结合历史帧全量检测结果对融合目标的目标类型、航向角和位置进行稳定性检测，能够得到精度更好、稳定性更好的检测结果。本申请实施例还提供了一种障碍物检测装置600，如图6所示，提供了本申请实施例中一种障碍物检测装置的结构示意图，所述装置600包括：目标检测单元610、跟踪预测单元620、匹配融合单元630和稳定检测单元640，其中：目标检测单元610，用于获取当前帧激光点云的目标检测结果，所述目标检测结果包括基于规则检测算法的RB检测目标和基于人工智能算法的AI检测目标；目标跟踪单元620，用于对当前帧的RB检测目标和AI检测目标进行目标跟踪，得到当前帧的每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果；匹配融合单元630，用于根据每个RB检测目标的跟踪结果和每个AI检测目标的跟踪结果，对当前帧的每个RB检测目标与当前帧的每个AI检测目标进行目标匹配与目标融合，得到当前帧每个融合目标的目标融合结果；稳定检测单元640，用于获取每个融合目标的历史帧全量检测结果，根据每个融合目标的历史帧全量检测结果和当前帧的目标融合结果，得到每个融合目标的当前帧稳定态检测结果。在本申请的一个实施例中，所述稳定检测单元640包括目标类型稳定检测模块；目标类型稳定检测模块，用于根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的历史目标类型；获取目标类型与目标尺寸的对应关系；根据每个融合目标对应的历史目标类型和目标类型与目标尺寸的对应关系，对每个融合目标进行目标类型稳定性检测，得到每个融合目标当前帧的稳定态目标类型。在本申请的一个实施例中，所述历史帧全量检测结果包括每个检测目标的各种稳定态历史目标类型和每个检测目标的各种检测态历史目标类型及各种检测态历史目标类型的置信度，目标类型稳定检测模块，用于根据每个检测目标的各种检测态历史目标类型及各种检测态历史目标类型的置信度，获取每个融合目标对应的每种检测态历史目标类型的置信度均值；以及根据每个检测目标的各种稳定态历史目标类型，获取每个融合目标对应的每种稳定态历史目标类型的出现次数；根据每个融合目标对应的每种检测态历史目标类型的置信度均值，获得每个融合目标对应的第一种目标类型；根据每个融合目标对应的每种稳定态历史目标类型的出现次数，获得每个融合目标对应的第二种目标类型。在本申请的一个实施例中，目标类型稳定检测模块，用于确定每个融合目标对应的第一种目标类型和第二种目标类型是否相同；当每个融合目标对应的第一种目标类型和第二种目标类型相同时，根据目标类型与目标尺寸的对应关系获取每个融合目标的第一种目标类型对应的目标尺寸和该融合目标当前帧的融合目标类型对应的目标尺寸；若两者的目标尺寸符合一致性条件，则将第一种目标类型作为该融合目标当前帧的稳定态目标类型。在本申请的一个实施例中，所述历史帧检测结果包括历史航向角，所述稳定检测单元640包括航向角稳定检测模块；航向角稳定检测模块，用于确定每个融合目标的当前帧速度是否小于高速阈值；当小于高速阈值时，根据每个融合目标的历史帧全量检测结果获得每个融合目标对应的稳定态历史航向角，根据每个融合目标对应的稳定态历史航向角对该融合目标进行航向角稳定性检测，得到该融合目标当前帧的稳定态航向角。在本申请的一个实施例中，航向角稳定检测模块，用于从每个融合目标对应的稳定态历史航向角中获取与每个稳定态历史航向角的角度偏差最小的基准航向角；根据所述基准航向角从每个融合目标的稳定态历史航向角中获取与所述基准航向角的角度偏差小于角度偏差阈值的候选历史航向角；根据每个融合目标对应的候选历史航向角与稳定态历史航向角确定该融合目标是否满足航向角优化条件；当满足航向角优化条件时，根据每个融合目标的候选历史航向角获得该融合目标当前帧的稳定态航向角。在本申请的一个实施例中，航向角稳定检测模块，用于确定每个融合目标对应的候选历史航向角总数是否大于该融合目标的稳定态历史航向角总数的一半；若大于，则满足航向角优化条件，否则不满足航向角优化条件；过滤掉所述候选历史航向角中差值最大的两个候选历史航向角；将过滤后的候选历史航向角的均值作为该融合目标当前帧的稳定态航向角。在本申请的一个实施例中，所述稳定检测单元640包括位置稳定检测模块；位置稳定检测模块，用于根据每个融合目标的当前帧目标融合结果和当前帧的连续N个历史帧的全量检测结果，获取该融合目标在连续N+1帧中的持续状态、速度变化和位置偏移；根据该融合目标在连续N+1帧中的持续状态、速度变化和位置偏移确定该融合目标是否处于静止状态；若处于静止状态，则将当前帧的第N个历史帧的稳定态位置作为当前帧的稳定态位置。能够理解，上述障碍物检测装置，能够实现前述实施例中提供的障碍物检测方法的各个步骤，关于障碍物检测方法的相关阐释均适用于障碍物检测装置，此处不再赘述。图7是本申请的一个实施例电子设备的结构示意图。请参考图7，在硬件层面，该电子设备包括处理器和存储器，可选地还包括内部总线、网络接口。其中，存储器可能包含内存，例如高速随机存取存储器，也可能还包括非易失性存储器，例如至少1个磁盘存储器等。当然，该电子设备还可能包括其他业务所需要的硬件。处理器、网络接口和存储器可以通过内部总线相互连接，该内部总线可以是ISA总线或EISA、输入/输出接口、网络接口和内存。内存可能包括计算机可读介质中的非永久性存储器，随机存取存储器  和/或非易失性内存等形式，如只读存储器  或闪存。内存是计算机可读介质的示例。计算机可读介质包括永久性和非永久性、可移动和非可移动媒体可以由任何方法或技术来实现信息存储。信息可以是计算机可读指令、数据结构、程序的模块或其他数据。计算机的存储介质的例子包括，但不限于相变内存 、静态随机存取存储器 、动态随机存取存储器 、其他类型的随机存取存储器 、只读存储器 、电可擦除可编程只读存储器 、快闪记忆体或其他内存技术、只读光盘只读存储器、数字多功能光盘  或其他光学存储、磁盒式磁带，磁带磁磁盘存储或其他磁性存储设备或任何其他非传输介质，可用于存储可以被计算设备访问的信息。按照本文中的界定，计算机可读介质不包括暂存电脑可读媒体 ，如调制的数据信号和载波。还需要说明的是，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、商品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、商品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、商品或者设备中还存在另外的相同要素。本领域技术人员应明白，本申请的实施例可提供为方法、系统或计算机程序产品。因此，本申请可采用完全硬件实施例、完全软件实施例或结合软件和硬件方面的实施例的形式。而且，本申请可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。以上所述仅为本申请的实施例而已，并不用于限制本申请。对于本领域技术人员来说，本申请可以有各种更改和变化。凡在本申请的精神和原理之内所作的任何修改、等同替换、改进等，均应包含在本申请的权利要求范围之内。
