标题title
一种基于铜合金加工成品的缺陷追溯分析方法
摘要abst
本发明公开了一种基于铜合金加工成品的缺陷追溯分析方法，涉及铜合金加工检测技术领域，包括：从历史图像数据库中获取若干合格的铜合金加工成品的表面图像，从若干合格的铜合金加工成品的表面图像中提取比对参照图；获取加工完成后的待检测的铜合金加工成品的表面图像，将待检测的铜合金加工成品的表面图像与比对参照图进行比对；本发明通过对合格的产品的图像进行特征提取，便于对后续的铜合金产品进行比对分析，同时对每道加工环节进行溯源比对分析，能够找到出现问题的加工环节，以解决现有的技术中对铜合金进行加工过程中缺少缺陷溯源分析的方法，导致对于加工环节的检修不够精准，检修效率较低的问题。
权利要求书clms
1.一种基于铜合金加工成品的缺陷追溯分析方法，其特征在于，包括：从历史图像数据库中获取若干合格的铜合金加工成品的表面图像，从若干合格的铜合金加工成品的表面图像中提取比对参照图；获取加工完成后的待检测的铜合金加工成品的表面图像，将待检测的铜合金加工成品的表面图像与比对参照图进行比对，得到存在表面缺陷的铜合金加工成品；对存在表面缺陷的铜合金加工成品进行溯源检测；获取铜合金加工过程中的若干加工环节，将每一个加工环节加工后的铜合金加工半成品的图像进行保存；根据加工环节由前至后对铜合金加工半成品的图像进行排序，按照排序顺序由后至前依次进行图像比对分析，获取缺陷产生环节。2.根据权利要求1所述的一种基于铜合金加工成品的缺陷追溯分析方法，其特征在于，从历史图像数据库中获取若干合格的铜合金加工成品的表面图像，从若干合格的铜合金加工成品的表面图像中提取比对参照图包括：从历史图像数据库中获取第一比对数量的合格的铜合金加工成品的表面图像，将合格的铜合金加工成品的表面图像设定为合格成品参照图像；将合格成品参照图像进行灰度化处理，将进行灰度化处理后的合格成品参照图像设定为合格成品参照灰度图；对合格成品参照灰度图进行轮廓区域提取，每两个轮廓区域的边界像素点的灰度差值均大于第一灰度阈值；将合格成品参照灰度图按照轮廓区域的面积由大到小进行排序，将合格成品参照灰度图的轮廓区域的数量设定为特征参照数量；求取第一比对数量的合格成品参照灰度图的特征参照数量的平均值，设定为特征比对数，将每一个合格成品参照灰度图的轮廓区域的排序的序号小于等于特征比对数的轮廓区域进行保留；提取每一个合格成品参照灰度图中排序的序号为第一位的轮廓区域作为比对区域，将提取后的若干比对区域进行重合，选取重合面积最大比对区域对应的合格成品参照灰度图作为比对参照图。3.根据权利要求2所述的一种基于铜合金加工成品的缺陷追溯分析方法，其特征在于，获取加工完成后的待检测的铜合金加工成品的表面图像，将待检测的铜合金加工成品的表面图像与比对参照图进行比对，得到存在表面缺陷的铜合金加工成品包括缺陷比对方法，缺陷比对方法包括：将待检测的铜合金加工成品的表面图像进行灰度化处理，得到待检测灰度图；将待检测灰度图按照比对参照图中的若干轮廓区域的划分方式进行划分，得到待检测灰度图的若干检测区域；获取检测区域内的每个像素点的灰度值，设定为检测灰度，求取若干检测灰度的方差，得到检测区域的灰度波动值，当灰度波动值大于第一灰度波动阈值时，标记为检测区域内部缺陷；获取比对参照图的轮廓区域内的每个像素点的灰度值，设定为轮廓灰度，求取若干轮廓灰度的平均值，设定为轮廓灰度参照值，求取若干检测灰度的平均值，设定为检测灰度参照值，求取排序的序号相同的轮廓区域和检测区域的轮廓灰度参照值与检测灰度参照值的差值，设定为灰度比对差值，当灰度比对差值大于第一灰度比对阈值时，标记为检测区域整体缺陷。4.根据权利要求3所述的一种基于铜合金加工成品的缺陷追溯分析方法，其特征在于，获取加工完成后的待检测的铜合金加工成品的表面图像，将待检测的铜合金加工成品的表面图像与比对参照图进行比对，得到存在表面缺陷的铜合金加工成品包括：统计待检测灰度图中存在检测区域内部缺陷和检测区域整体缺陷的检测区域的数量，设定为表面缺陷数量；将表面缺陷数量与特征比对数进行相比，得到缺陷比值，当缺陷比值大于等于第一比对阈值时，输出待检测的铜合金加工成品存在表面缺陷。5.根据权利要求4所述的一种基于铜合金加工成品的缺陷追溯分析方法，其特征在于，根据加工环节由前至后对铜合金加工半成品的图像进行排序，按照排序顺序由后至前依次进行图像比对分析，获取缺陷产生环节包括：根据缺陷比对方法对加工环节的铜合金加工半成品的图像进行图像比对分析；当图像比对分析结果中存在检测区域内部缺陷或检测区域整体缺陷表面缺陷时，继续对上一个排序的铜合金加工半成品的图像进行图像比对分析，当图像比对分析结果中不存在检测区域内部缺陷和检测区域整体缺陷时，将不存在检测区域内部缺陷和检测区域整体缺陷的铜合金加工半成品的图像对应的加工环节的下一个加工环节作为缺陷产生环节。6.根据权利要求5所述的一种基于铜合金加工成品的缺陷追溯分析方法，其特征在于，对存在表面缺陷的铜合金加工成品进行溯源检测还包括：每获取第一缺陷数量的存在表面缺陷的铜合金加工成品时，统计每个加工环节被标记为缺陷产生环节的次数，设定为缺陷标记次数；根据缺陷标记次数由大到小进行排序，得到缺陷标记排序顺序；再次进行溯源检测时，按照缺陷标记排序顺序对加工环节的铜合金加工半成品的图像进行图像比对分析。7.根据权利要求6所述的一种基于铜合金加工成品的缺陷追溯分析方法，其特征在于，对存在表面缺陷的铜合金加工成品进行溯源检测还包括：每获取第二缺陷数量的存在表面缺陷的铜合金加工成品时，统计铜合金加工成品的生产总数，设定为成品总数量；将第二缺陷数量除以成品总数量得到缺陷率，当缺陷率小于等于第一缺陷比例阈值时，输出正常缺陷比例信号；当缺陷率大于第一缺陷比例阈值时，输出溯源查看信号；当输出溯源查看信号时，按照缺陷标记排序顺序对加工环节进行检修查看。
说明书desc
技术领域本发明涉及铜合金加工检测技术领域，具体为一种基于铜合金加工成品的缺陷追溯分析方法。背景技术铜合金以纯铜为基体加入一种或几种其他元素所构成的合金。纯铜呈紫红色，又称紫铜。常用的铜合金分为黄铜、青铜、白铜3大类；由于对铜合金的性能质量、外部尺寸精度和表面质量等方面要求愈来愈苛刻，在对铜合金进行加工后，对于其加工成品需要进行质量检测，在铜合金的板材加工过程中，轧制是生产铜及铜合金板材和带材的基本方法，根据钢坯供应方式的不同，铜合金带材的生产可分为铸锭轧制法、铸锭锻轧轧制法和铸造挤压轧制法。在得到铜合金的半成品之后，对铜合金板材进行加工时，通常会有很多个加工环节，包括下料、冲孔铣加工、折边、焊接以及打磨等环节，在每个加工环节中，由于加工的误差以及台面的不整洁，导致产品与粉尘或碎屑产生摩擦，造成划痕等缺陷，现有的检测技术中，通常都是在铜合金加工之后对产品的缺陷进行统一检测，但是这种检测方式很难找到具体是哪个加工环节造成的产品缺陷问题，因此需要一种基于铜合金加工成品的缺陷追溯分析方法来解决上述问题。发明内容本发明旨在至少在一定程度上解决现有技术中的技术问题之一，通过对合格的产品的图像进行特征提取，便于对后续的铜合金产品进行比对分析，同时对每道加工环节进行溯源比对分析，能够找到出现问题的加工环节，以解决现有的技术中对铜合金进行加工过程中缺少缺陷溯源分析的方法，导致对于加工环节的检修不够精准，检修效率较低的问题。为实现上述目的，本发明提供一种基于铜合金加工成品的缺陷追溯分析方法，包括：从历史图像数据库中获取若干合格的铜合金加工成品的表面图像，从若干合格的铜合金加工成品的表面图像中提取比对参照图；获取加工完成后的待检测的铜合金加工成品的表面图像，将待检测的铜合金加工成品的表面图像与比对参照图进行比对，得到存在表面缺陷的铜合金加工成品；对存在表面缺陷的铜合金加工成品进行溯源检测；获取铜合金加工过程中的若干加工环节，将每一个加工环节加工后的铜合金加工半成品的图像进行保存；根据加工环节由前至后对铜合金加工半成品的图像进行排序，按照排序顺序由后至前依次进行图像比对分析，获取缺陷产生环节。进一步地，从历史图像数据库中获取若干合格的铜合金加工成品的表面图像，从若干合格的铜合金加工成品的表面图像中提取比对参照图包括：从历史图像数据库中获取第一比对数量的合格的铜合金加工成品的表面图像，将合格的铜合金加工成品的表面图像设定为合格成品参照图像；将合格成品参照图像进行灰度化处理，将进行灰度化处理后的合格成品参照图像设定为合格成品参照灰度图；对合格成品参照灰度图进行轮廓区域提取，每两个轮廓区域的边界像素点的灰度差值均大于第一灰度阈值；将合格成品参照灰度图按照轮廓区域的面积由大到小进行排序，将合格成品参照灰度图的轮廓区域的数量设定为特征参照数量；求取第一比对数量的合格成品参照灰度图的特征参照数量的平均值，设定为特征比对数，将每一个合格成品参照灰度图的轮廓区域的排序的序号小于等于特征比对数的轮廓区域进行保留；提取每一个合格成品参照灰度图中排序的序号为第一位的轮廓区域作为比对区域，将提取后的若干比对区域进行重合，选取重合面积最大比对区域对应的合格成品参照灰度图作为比对参照图。进一步地，获取加工完成后的待检测的铜合金加工成品的表面图像，将待检测的铜合金加工成品的表面图像与比对参照图进行比对，得到存在表面缺陷的铜合金加工成品包括缺陷比对方法，缺陷比对方法包括：将待检测的铜合金加工成品的表面图像进行灰度化处理，得到待检测灰度图；将待检测灰度图按照比对参照图中的若干轮廓区域的划分方式进行划分，得到待检测灰度图的若干检测区域；获取检测区域内的每个像素点的灰度值，设定为检测灰度，求取若干检测灰度的方差，得到检测区域的灰度波动值，当灰度波动值大于第一灰度波动阈值时，标记为检测区域内部缺陷；获取比对参照图的轮廓区域内的每个像素点的灰度值，设定为轮廓灰度，求取若干轮廓灰度的平均值，设定为轮廓灰度参照值，求取若干检测灰度的平均值，设定为检测灰度参照值，求取排序的序号相同的轮廓区域和检测区域的轮廓灰度参照值与检测灰度参照值的差值，设定为灰度比对差值，当灰度比对差值大于第一灰度比对阈值时，标记为检测区域整体缺陷。进一步地，获取加工完成后的待检测的铜合金加工成品的表面图像，将待检测的铜合金加工成品的表面图像与比对参照图进行比对，得到存在表面缺陷的铜合金加工成品包括：统计待检测灰度图中存在检测区域内部缺陷和检测区域整体缺陷的检测区域的数量，设定为表面缺陷数量；将表面缺陷数量与特征比对数进行相比，得到缺陷比值，当缺陷比值大于等于第一比对阈值时，输出待检测的铜合金加工成品存在表面缺陷。进一步地，根据加工环节由前至后对铜合金加工半成品的图像进行排序，按照排序顺序由后至前依次进行图像比对分析，获取缺陷产生环节包括：根据缺陷比对方法对加工环节的铜合金加工半成品的图像进行图像比对分析；当图像比对分析结果中存在检测区域内部缺陷或检测区域整体缺陷表面缺陷时，继续对上一个排序的铜合金加工半成品的图像进行图像比对分析，当图像比对分析结果中不存在检测区域内部缺陷和检测区域整体缺陷时，将不存在检测区域内部缺陷和检测区域整体缺陷的铜合金加工半成品的图像对应的加工环节的下一个加工环节作为缺陷产生环节。进一步地，对存在表面缺陷的铜合金加工成品进行溯源检测还包括：每获取第一缺陷数量的存在表面缺陷的铜合金加工成品时，统计每个加工环节被标记为缺陷产生环节的次数，设定为缺陷标记次数；根据缺陷标记次数由大到小进行排序，得到缺陷标记排序顺序；再次进行溯源检测时，按照缺陷标记排序顺序对加工环节的铜合金加工半成品的图像进行图像比对分析。进一步地，对存在表面缺陷的铜合金加工成品进行溯源检测还包括：每获取第二缺陷数量的存在表面缺陷的铜合金加工成品时，统计铜合金加工成品的生产总数，设定为成品总数量；将第二缺陷数量除以成品总数量得到缺陷率，当缺陷率小于等于第一缺陷比例阈值时，输出正常缺陷比例信号；当缺陷率大于第一缺陷比例阈值时，输出溯源查看信号；当输出溯源查看信号时，按照缺陷标记排序顺序对加工环节进行检修查看。本发明的有益效果：本发明通过从历史图像数据库中获取若干合格的铜合金加工成品的表面图像，从若干合格的铜合金加工成品的表面图像中提取比对参照图，通过对历史图像数据库中的合格的铜合金加工成品的表面图像进行深度学习，能够得到用于比对的比对参照图，从而提高了比对的可靠性；然后获取加工完成后的待检测的铜合金加工成品的表面图像，将待检测的铜合金加工成品的表面图像与比对参照图进行比对，得到存在表面缺陷的铜合金加工成品，通过与比对参照图进行比对，能够准确且快速地获取存在表面缺陷的铜合金加工成品。本发明通过对存在表面缺陷的铜合金加工成品进行溯源检测，获取铜合金加工过程中的若干加工环节，将每一个加工环节加工后的铜合金加工半成品的图像进行保存，根据加工环节由前至后对铜合金加工半成品的图像进行排序，按照排序顺序由后至前依次进行图像比对分析，获取缺陷产生环节，该设计能够对造成产品缺陷的加工环节进行查找，提高产品生产线的检修精准度和检修效率。本申请的其他特征和优点将在随后的说明书阐述，并且，部分地从说明书中变得显而易见，或者通过实施本申请了解。本申请的目的和其他优点可通过在所写的说明书、权利要求书以及附图中所特别指出的结构来实现和获得。附图说明图1为本发明的方法的步骤流程图；图2为本发明的待检测灰度图中存在检测区域内部缺陷的示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。请参阅图1所示，本发明提供一种基于铜合金加工成品的缺陷追溯分析方法，通过对合格的产品的图像进行特征提取，便于对后续的铜合金产品进行比对分析，同时对每道加工环节进行溯源比对分析，能够找到出现问题的加工环节；本发明的基于铜合金加工成品的缺陷追溯分析方法主要用于对铜合金加工成品的表面缺陷进行溯源分析，例如在冲孔铣加工后进行折边的两个生产环节中，冲孔铣加工产生的碎屑如果没有及时清理，在传输至折边的加工环节中，很容易出现碎屑将产品表面划伤的问题；具体地，基于铜合金加工成品的缺陷追溯分析方法包括如下步骤：步骤S10，从历史图像数据库中获取若干合格的铜合金加工成品的表面图像，从若干合格的铜合金加工成品的表面图像中提取比对参照图；步骤S10还包括如下子步骤：步骤S1011，从历史图像数据库中获取第一比对数量的合格的铜合金加工成品的表面图像，将合格的铜合金加工成品的表面图像设定为合格成品参照图像，在进行图像比对过程中，通过对存储合格的铜合金加工成品的表面图像进行深度学习，能够提取用于比对的特征，从而有助于提高比对的准确度和比对效率；步骤S1012，将合格成品参照图像进行灰度化处理，将进行灰度化处理后的合格成品参照图像设定为合格成品参照灰度图；步骤S1013，对合格成品参照灰度图进行轮廓区域提取，每两个轮廓区域的边界像素点的灰度差值均大于第一灰度阈值，第一灰度阈值设置为20，在一个标准化的生产流程中，所生产出来的合格的成品对应生成的灰度图像之间的差异不会太大，因此第一比对数量区间设置为5到10，第一比对数量不需要太多即可实现比对的精准度；步骤S1014，将合格成品参照灰度图按照轮廓区域的面积由大到小进行排序，将合格成品参照灰度图的轮廓区域的数量设定为特征参照数量；步骤S1015，求取第一比对数量的合格成品参照灰度图的特征参照数量的平均值，设定为特征比对数，将每一个合格成品参照灰度图的轮廓区域的排序的序号小于等于特征比对数的轮廓区域进行保留，通过求取特征比对数能够保证最终保留的轮廓区域具备可比对性，一些极端的面积较小的轮廓区域不具备比对价值，可以进行剔除处理；步骤S1016，提取每一个合格成品参照灰度图中排序的序号为第一位的轮廓区域作为比对区域，将提取后的若干比对区域进行重合，选取重合面积最大比对区域对应的合格成品参照灰度图作为比对参照图，比对参照图能够代表合格的铜合金加工成品的质量的图片，一对一的比对既能够保证比对的准确度，同时极大地提高了比对的效率。请参阅图2所示，步骤S20，获取加工完成后的待检测的铜合金加工成品的表面图像，将待检测的铜合金加工成品的表面图像与比对参照图进行比对，得到存在表面缺陷的铜合金加工成品；步骤S20还包括缺陷比对方法，缺陷比对方法包括如下步骤：步骤S2011，将待检测的铜合金加工成品的表面图像进行灰度化处理，得到待检测灰度图；步骤S2012，将待检测灰度图按照比对参照图中的若干轮廓区域的划分方式进行划分，得到待检测灰度图的若干检测区域；步骤S2013，获取检测区域内的每个像素点的灰度值，设定为检测灰度，求取若干检测灰度的方差，得到检测区域的灰度波动值，当灰度波动值大于第一灰度波动阈值时，标记为检测区域内部缺陷，第一灰度波动阈值设定为5；步骤S2014，获取比对参照图的轮廓区域内的每个像素点的灰度值，设定为轮廓灰度，求取若干轮廓灰度的平均值，设定为轮廓灰度参照值，求取若干检测灰度的平均值，设定为检测灰度参照值，求取排序的序号相同的轮廓区域和检测区域的轮廓灰度参照值与检测灰度参照值的差值，设定为灰度比对差值，当灰度比对差值大于第一灰度比对阈值时，标记为检测区域整体缺陷，第一灰度比对阈值设置为20，当相互比对的检测区域和轮廓区域的灰度均值的差值大于20时，该检测区域的比对差异较大；步骤S20还包括如下子步骤：步骤S2021，统计待检测灰度图中存在检测区域内部缺陷和检测区域整体缺陷的检测区域的数量，设定为表面缺陷数量；步骤S2022，将表面缺陷数量与特征比对数进行相比，得到缺陷比值，当缺陷比值大于等于第一比对阈值时，输出待检测的铜合金加工成品存在表面缺陷，具体实施过程中，第一比对阈值设置为10%，例如在特征比对数为20的情况中，得到的表面缺陷数量大于等于2，则输出待检测的铜合金加工成品存在表面缺陷；步骤S30，对存在表面缺陷的铜合金加工成品进行溯源检测；步骤S301，获取铜合金加工过程中的若干加工环节，将每一个加工环节加工后的铜合金加工半成品的图像进行保存；步骤S302，根据加工环节由前至后对铜合金加工半成品的图像进行排序，按照排序顺序由后至前依次进行图像比对分析，获取缺陷产生环节，由加工环节的排序由后至前依次进行图像比对分析的必要性在于，只要通过此顺序进行图像比对时，比对结果为存在表面缺陷，则需要查看上一加工环节是否对铜合金产品造成了损伤；步骤S302还包括如下步骤：步骤S3021，根据缺陷比对方法对加工环节的铜合金加工半成品的图像进行图像比对分析；步骤S3022，当图像比对分析结果中存在检测区域内部缺陷或检测区域整体缺陷表面缺陷时，继续对上一个排序的铜合金加工半成品的图像进行图像比对分析，当图像比对分析结果中不存在检测区域内部缺陷和检测区域整体缺陷时，将不存在检测区域内部缺陷和检测区域整体缺陷的铜合金加工半成品的图像对应的加工环节的下一个加工环节作为缺陷产生环节，两个相邻的加工环节，上一个加工环节的产品不存在缺陷，下一个加工环节输出的产品存在缺陷，则将下一个加工环节作为缺陷产生环节。步骤S30还包括如下步骤：步骤S3031，每获取第一缺陷数量的存在表面缺陷的铜合金加工成品时，统计每个加工环节被标记为缺陷产生环节的次数，设定为缺陷标记次数；步骤S3032，根据缺陷标记次数由大到小进行排序，得到缺陷标记排序顺序；步骤S3033，再次进行溯源检测时，按照缺陷标记排序顺序对加工环节的铜合金加工半成品的图像进行图像比对分析，在步骤S3031到步骤S3033中，通过对每个加工环节被标记为缺陷生产环节的次数进行分析，能够在下一次进行缺陷溯源检测时，优先对标记为缺陷生产环节的次数最多的生产环节进行比对，从而提高了溯源检测的精准度和效率，具体实施时，第一缺陷数量根据生产过程进行累加设定，第一缺陷数量设置为10，生产过程中产生10个存在表面缺陷的铜合金加工成品时，重复一次步骤S3031到步骤S3033。步骤S30还包括如下步骤：步骤S3041，每获取第二缺陷数量的存在表面缺陷的铜合金加工成品时，统计铜合金加工成品的生产总数，设定为成品总数量，第二缺陷数量设定为100，第二缺陷数量的设定用于提醒维修人员对整个生产流程的生产环节进行检修；步骤S3042，将第二缺陷数量除以成品总数量得到缺陷率，当缺陷率小于等于第一缺陷比例阈值时，输出正常缺陷比例信号；当缺陷率大于第一缺陷比例阈值时，输出溯源查看信号，具体实施时，第一缺陷比例阈值设置为3%，例如生产总数为10000，第二缺陷数量为100，则缺陷率为1%，此时不需要进行检修查看，输出正常缺陷比例信号，当生产总数为1000，第二缺陷数量为100，则缺陷率为10%，此时输出溯源查看信号，缺陷率较高，需要派维修人员按照缺陷标记排序顺序对加工环节进行检修查看；步骤S3043，当输出溯源查看信号时，按照缺陷标记排序顺序对加工环节进行检修查看，在维修查看时，可以根据被标记为缺陷生产环节的次数较多的生产环节进行检修，从而提高检修的精准度和检修效率。本领域内的技术人员应明白，本发明的实施例可提供为方法、系统或计算机程序产品。因此，本发明可采用完全硬件实施例、完全软件实施例或结合软件和硬件方面的实施例的形式。而且，本发明可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。其中，存储介质可以由任何类型的易失性或非易失性存储设备或者它们的组合实现，如静态随机存取存储器，电可擦除可编程只读存储器，可擦除可编程只读存储器，可编程只读存储器，只读存储器，磁存储器，快闪存储器，磁盘或光盘。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能。在本申请所提供的实施例中，应该理解到，所揭露装置和方法，可以通过其他的方式实现。以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，又例如，多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些通信接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其他的形式。
