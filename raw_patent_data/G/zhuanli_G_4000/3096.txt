标题title
一种油田铁钻工自动定位接箍高度及精度处理的方法
摘要abst
本发明公开了一种油田铁钻工自动定位接箍高度及精度处理的方法，利用无线技术，提取钻杆反射接收信号的相位变化，经过相位的提取进行距离测量，确定与钻杆的距离，通过建模、分析钻杆直径的变化，从而锁定母扣或公扣的边缘和边界，实现铁钻工自动识别接箍高度。本发明提出了一种全新的油田铁钻工自动定位接箍高度的方法，通过采用毫米波雷达测量钻杆直径，识别钻杆直径变化，从而定位接箍高度。
权利要求书clms
1.一种油田铁钻工自动定位接箍高度的方法，其特征在于：利用无线技术，提取钻杆反射接收信号的相位变化，经过相位的提取进行距离测量，确定与钻杆的距离，通过建模、分析钻杆直径的变化，从而锁定母扣或公扣的边缘和边界，实现铁钻工自动识别接箍高度。2.根据权利要求1所述的一种油田铁钻工自动定位接箍高度的方法，其特征在于：具体操作步骤如下：步骤一：测量毫米波雷达中心与主背钳中心水平线高度L2，并利用铁钻工控制器设置好不同规格钻杆尺寸的对照表及L2，其中对照表的内容包括钻杆直径H1、接口直径H2、接口长度L1；步骤二：铁钻工钳口下降到最低，钳中心到达井口/鼠洞的中心位置时，铁钻工控制器触发毫米波雷达和雷达控制器按照一定的周期发射信号Tx和接收信号Rx；步骤三：经过雷达处理器进行检测、提取、细化分析、变换、综合处理，计算出当前钻杆直径△S；步骤四：将△S值实时传递给铁钻工控制器，记为△S1，△S1与设置好的对照表的钻杆直径H1进行匹配，匹配误差在铁钻工控制器中设定的阀值K内，匹配到合适的钻杆规格；步骤五：铁钻工控制器发送上升指令，随着钳口上升, △S在变化，当△S值等于H2值时，△S误差在允许阀值K内时，记录当前△S值为△S2,并发送减速指令;步骤六：计算得出理想接箍高度L，L=△S2 +L1+L2，如此铁钻工只需要再上升L1+L2高度即可到达理想接箍位置。3.一种毫米波雷达的精度处理方法，其特征在于：该方法应用于权利要求2所述的一种油田铁钻工自动定位接箍高度的方法，使用毫米波理论基础的MSC模型，通过MSC模块、RDE提取、细化分析、变换、综合处理这5个模块进行控制计算处理，具体步骤包括：A、利用MSC特性，采用多天线，多频率，多方位布置，采用MSC的统一提取算法消除背景干扰波；B、采用调频连续波频率信号进行距离测量；C、采用混频器消除接收信号中的载波；D、RDE模块利用生成的啁啾群提供的多个IQ信号，改进低信噪比的距离提取过程；E、细化分析的AOA估算及方向感知；F、变换及综合处理。4.根据权利要求3所述的毫米波雷达的精度处理方法，其特征在于：采用调频连续波频率信号进行距离测量，发射信号Tx与接收信号Rx之间的频率差表示信号传播时间，可用于确定物体距离，天线与物体的时变距离用R表示，发射和接收信号可表示为：；；其中，是发射信号，/＞ 是接收信号，exp是指数，/＞是复数，/＞ 是圆周率，t是时间，/＞是路径损耗，/＞和K分别为FMCW信号的起始频率和啁啾斜率，/＞是距离，/＞为光速。5.根据权利要求3所述的毫米波雷达的精度处理方法，其特征在于：采用混频器消除接收信号中的载波，得到拍频信号为：。6.根据权利要求3所述的毫米波雷达的精度处理方法，其特征在于：RDE模块从每个检测到的中提取所需的信号，对/＞在一个啁啾范围内的样本进行提取运算，利用生成的啁啾群提供的多个IQ信号，改进低信噪比的距离提取过程，进行信号分离，得物体距离库反射信号/＞为：；其中，是物体距离库反射信号,/＞是物体至雷达距离，/＞为距离分辨范围内的位移。7.根据权利要求3所述的毫米波雷达的精度处理方法，其特征在于：对每个天线的AOA进行估计，假设第N个天线的传播距离与第1个Rx天线的传播距离之差为,,不同Rx天线上AOA的到达波不平行，设/＞为第N个Rx的位置，/＞为物体的位置，可以计算/＞为/＞,取/＞，/＞，求解/＞优化如下：；其中，o是物体的位置，是o在本式中取得最小值，/＞为第N个Rx的位置, /＞第N个天线的传播距离与第1个Rx天线的传播距离之差；根据MRx天线与/＞的几何关系，计算出MRx天线的AOA，通过直接估计钻杆反射的AOA与IQ域的旋转角度，对测量进行细化。/＞
说明书desc
技术领域本发明涉及石油钻井设备自动化技术领域，具体为一种油田铁钻工自动定位接箍高度及精度处理的方法。背景技术在石油钻修井作业过程中，钻杆需要不断的连接或断开，以达到延长钻杆长度或更换钻杆/钻头，钻杆连接或断开占据了石油钻修井总过程80%以上的时间，而作为先进的钻杆/钻具，上扣/卸扣工具的铁钻工，需要在作业流程中全天待命工作。钻杆在钻修井过程中需要通过铁钻工不断的连接或断开一组组管柱，受吊装系统停留位置的不确定性或钻杆长度差异的影响，造成钻杆每次连接/断开对中高度位置不同。作为使用最为频繁，操作步骤最为复杂的井口设备之一，现阶段仍需人工操作定位井口/鼠洞，人工指挥调节高度对中，才能进行下一步动作，对于高强度的钻修井作业工人来说，不仅长期位于高风险区域作业，而且由于长时间作业人员机械式工作的疲劳，任何环节的操作或指挥出现失误，都很容易造成人员或设备的损伤，极大增加了作业的危险系数，而且还降低了生产效率，因此，铁钻工自动定位钻杆接箍高度功能成为实现铁钻工全自动的重点。CN112627750A公开了名称为一种铁钻工自动定位钻杆接箍高度系统，该系统包括嵌入式控制器，嵌入式控制器分别与工业相机、相机视觉光源、HMI客户端、铁钻工控制器信号连接，铁钻工控制器还与HMI客户端通讯连接；铁钻工控制器的信号输入端同时与铁钻工的伸缩臂位移传感器、钳头高度传感器连接，铁钻工控制器的信号输出端与升降调节油缸控制连接。CN109488230A公开了名称为一种铁钻工管柱识别及接箍端面定位装置和方法，装置结构为所述的位移传感部件由位移传感器和磁环组成，所述的安装组合体由前盖、两块盖板、两块侧板和后盖组装而成，位移传感器安装在后盖上，磁环安装于滑动组合体的套管后端上，且滑动组合体的套管穿过前盖安装孔，弹簧安装在前盖和后盖之间，且套管和位移传感器的测杆均插入弹簧内。位移传感器测杆感应磁环的位置从而确定滑动组合体相对安装组合体之间的位移变化，本发明装置使用时，安装组合体安装于铁钻工钳体底部，装置随铁钻工钳口向工位定位位置伸出，达到管柱识别目的，装置在随铁钻工伸出与升降的过程中，达到了管柱识别和接箍端面定位的目的。在钻杆的母扣和公扣端的边缘和边界，因为管被污垢、土壤和矿物质覆盖遮挡的情况下，以及相机受到环境光干扰时，相机图像数据有时被证明是不可靠的，当自动摄像系统无法确保铁钻工正确对准时，钻井操作员被迫让钻机人员对铁钻工位置进行目视检查。通过滑动装置检测钻杆接箍位置产生的位移变化，母扣和公扣端的边缘和边界位移变化区间≥5mm，当管被污垢、土壤和矿物质覆盖的情况下，由于变化区间微小，很容易导致检测失效。随着无线传感技术的迅速发展，近年利用无线信号和射频信号进行测距。物体是无线信号的物理反射器，不同材质，不同形状，都会影响反射信号的传播，通过对反射信号的测量和分析，可以得到不同材质和距离的反射特性，经过变换和综合处理可得到与物体之间的参考距离，普通波形波长较长，其精度往往受到限制，钻杆的外观直径通常在15MM以内，无法实现。因此，针对上述问题提出一种油田铁钻工自动定位接箍高度及精度处理的方法。发明内容本发明的目的在于提供一种油田铁钻工自动定位接箍高度的方法，包括以下步骤：步骤一：测量毫米波雷达中心与主背钳中心水平线高度L2，并利用铁钻工控制器设置好不同规格钻杆尺寸的对照表及L2，该表包括钻杆直径H1、接口直径H2、接口长度L1；步骤二：铁钻工钳口下降到最低，钳中心到达井口/鼠洞的中心位置时，铁钻工控制器触发毫米波雷达和雷达控制器按照一定的周期发射信号Tx和接收信号Rx；步骤三：使用毫米波理论基础的MSC模型，通过MSC模块、RDE提取、细化分析、变换、综合处理这5个模块进行控制计算处理，具体步骤包括：A、利用MSC特性，采用多天线，多频率，多方位布置，采用MSC的统一提取算法消除背景干扰波；B、采用调频连续波频率信号进行距离测量，发射信号Tx与接收信号Rx之间的频率差表示信号传播时间，可用于确定物体距离，天线与物体的时变距离用R表示，发射和接收信号可表示为：其中，是发射信号，/＞ 是接收信号，exp是指数，/＞是复数，/＞ 是圆周率，t是时间，/＞是路径损耗，/＞和K分别为FMCW信号的起始频率和啁啾斜率，/＞是距离，为光速；C、采用混频器消除接收信号中的载波，得到拍频信号为：；D、RDE模块利用生成的啁啾群提供的多个IQ信号，RDE模块从每个检测到的中提取所需的信号，对/＞在一个啁啾范围内的样本进行提取运算，利用生成的啁啾群提供的多个IQ信号，改进低信噪比的距离提取过程，进行信号分离，得物体距离库反射信号为：；其中，是物体距离库反射信号,/＞是物体至雷达距离，/＞为距离分辨范围内的位移；/＞E、对每个天线的AOA进行估计，假设第N个天线的传播距离与第1个Rx天线的传播距离之差为,/＞,不同Rx天线上AOA的到达波不平行，设为第N个Rx的位置，/＞为物体的位置，可以计算/＞为,取/＞，/＞，求解/＞优化如下：；其中，o是物体的位置，是o在本式中取得最小值，/＞为第N个Rx的位置,第N个天线的传播距离与第1个Rx天线的传播距离之差；根据MRx天线与/＞的几何关系，计算出MRx天线的AOA，通过直接估计钻杆反射的AOA与IQ域的旋转角度，对测量进行细化，并进行方向感知；F、变换及综合处理，计算出当前钻杆直径△S；步骤四：将△S值实时传递给铁钻工控制器，记为△S1，△S1与设置好的对照表H1进行匹配，匹配误差在控制器中设定的阀值K内，匹配到合适的钻杆规格；步骤五：铁钻工控制器发送上升指令，随着钳口上升, △S在变化，当△S值等于H2值时，△S误差在允许阀值K内时，记录当前△S值为△S2,并发送减速指令;步骤六：计算得出理想接箍高度L，L=△S2 +L1+L2，如此铁钻工只需要再上升L1+L2高度即可到达理想接箍位置。与现有技术相比，本发明的有益效果如下：1、本发明提出了一种全新的油田铁钻工自动定位接箍高度的方法，通过采用毫米波雷达测量钻杆直径，识别钻杆直径变化，从而定位接箍高度。2、本发明采用毫米波雷达，具有价格优势显著，抗干扰能力强，精确度高的优点。3、本发明提出了一种全新的毫米波雷达精度处理方法，通过MSC模块、RDE提取、细化分析、变换、综合处理5个模块进行控制计算处理，利用MSC模块的特性，通过多天线、多频率及多方向排布，利用算法，消除了背景干扰波，通过RED提取算法，利用生成的啁啾群提供的多个IQ信号，改进低信噪比的距离提取过程，适用于低信噪比条件下微小位移的RED提取。附图说明图 1 是本发明的测量方法的示意图一；图 2 是本发明的测量方法的示意图二；图 3 是本发明的测量方法的示意图三；图 4 是本发明的精度处理方法的流程图；图 5 是本发明采用MSC的统一提取算法消除背景干扰波的示意图；图 6 是图5的放大图；图 7 是本发明的RDE模块提取信号过程中的不同阶段波形变化的示意图；图 8 是本发明的RDE提取算法的运行步骤示意图；图 9 是本发明的钻杆直径的合成和翻译的示意图。图中的附图标记及名称如下：1、铁钻工控制器；2、雷达控制处理器；3、毫米波雷达。具体实施方式如图1、图2所示，钻杆最显著的特征是母扣/公扣接箍位置的直径H2，与钻杆自身直径H1，存在明显的直径变化，且钻杆直径H1、接口直径H2、接口长度L1，不同规格的钻杆，标准值也不同，只需要提前设置好对照表，即可以认为是定量。首先，如附图3所示，安装好毫米波雷达3，可以得知定量毫米波雷达中心与主背钳中心水平线高度L2；铁钻工控制器1提前设置好不同规格钻杆尺寸的对照表及L2，铁钻工钳口下降到最低位置，钳中心到达井口/鼠洞位置中心位置时，铁钻工控制器1触发毫米波雷达3和雷达控制处理器2按照一定的周期发射信号Tx和接收信号Rx；经过雷达控制处理器2进行检测、提取、细化分析、变换、综合处理，计算出当前钻杆直径△S；雷达控制处理器2将△S值实时传递给铁钻工控制器1，记为△S1，△S1与设置好的对照表H1进行匹配，匹配误差在控制器中设定的阀值K内，匹配到合适的钻杆规格；然后，铁钻工控制器1发送上升指令，随着钳口上升, △S在变化，当△S值等于H2值时，△S误差在允许阀值K内时，记录当前△S值为△S2,并铁钻工控制器1发送减速指令；最后，计算得出理想接箍高度L，L=△S2 +L1+L2,，如此铁钻工只需要再上升L1+L2高度即可到达理想接箍位置；铁钻工控制器1控制钳口到达接箍L位置停止，执行下一步。如附图4所示，毫米波雷达精度处理流程如下：无线技术测量位移是提取目标反射的接收信号的相位变化：其中是波长，相位变化/＞起到稳定的作用，并准确指示传播距离变化/＞。由公式可知，越小，可显示距离变化越小，故选择毫米波来测量钻杆直径的微小变化。本申请使用毫米波雷达，并使用毫米波理论基础的MSC模型，通过5个模块进行控制计算处理，分别为MSC模块、RDE提取、细化分析、变换、综合处理。如图5、图6所述，通过MSC多频特性，生成不同起始频率的啁啾群，提供多个观测值，通过MSC多天线特性，改变天线的方向，从而可以接收来自多角度的反射Rx信号，然后采用MSC的统一提取算法消除背景干扰波；毫米波雷达3采用调频连续波频率信号进行距离测量，发射信号Tx与接收信号Rx之间的频率差表示信号传播时间，可用于确定物体距离，天线与物体的时变距离用R表示，发射和接收信号可表示为：；；/＞其中，是发射信号，/＞ 是接收信号，exp是指数，/＞是复数，/＞ 是圆周率，t是时间，/＞是路径损耗，/＞和K分别为FMCW信号的起始频率和啁啾斜率，/＞是距离，为光速；采用混频器消除接收信号中的载波，得到拍频信号为：；如附图7中所示, RDE模块从每个检测到的中提取所需的信号，对/＞在一个啁啾范围内的样本进行提取运算，利用生成的啁啾群提供的多个IQ信号，改进低信噪比的距离提取过程，进行信号分离，得物体距离库反射信号/＞为：；其中，是物体距离库反射信号,/＞是物体至雷达距离，/＞为距离分辨范围内的位移；如附图8所示，RDE提取算法的运行步骤为：、首先通过基本波形圆拟合步骤估计每个啁啾信号的背景反射,设,表示L个啁啾的IQ样本，对每N个啁啾样本中的L个啁啾均分别进行拟合优化，以获得一个半径为/＞和中心为/＞的圆，使每个样本到圆的几何距离之和最小；其中，是拟合圆中心，/＞是拟合圆半径，/＞是/＞和/＞在本式中取得最小值，是第/＞个啁啾至第n个啁啾IQ样本；、然后巩固波形圆拟合步骤对每个啁啾信号产生拟合约束，进而改进了步骤，同时对内圆进行求解，图8显示了两种情况，每个啁啾信号不一定落在它上面：I、需要平移的情况，半径拟合不恰当会使某个啁啾的IQ样本落在圈内O1或圆外；II、需要缩放的情况，啁啾信号强度的强弱会使其IQ样本落在本征圆的其他同心圆02上，因此，通过适当的平移和缩放每个啁啾的IQ样本，可以最终得到一个完美的大弧；首先，消除每个啁啾信号的背景反射，对于第l个啁啾的IQ样本 ,消元法是通过减去啁啾信号的中心坐标来完成，其次，对于每个啁啾信号，推导其平移方向/＞作为从坐标原点到平均采样点的矢量的单位向量/＞。同时求解内禀圆的半径 /＞，以及平移因子,缩放通过最小化平均几何距离,得到因子/＞ 每个样本的内圆:其中， 是内禀圆半径，/＞是平移因子，/＞因子，/＞是/＞在本式中取得最小值，/＞是平移方向；、前两步迭代运行，提取一个啁啾，与最终平移序列/＞的相序是, 直接获得完美的大圆弧。；其中，表示第/＞个啁啾至第n个啁啾振动信号的对比差，/＞是破解，/＞是啁啾的起始频率，/＞第/＞个啁啾至第n个啁啾直径；通过所有啁啾群的结果汇总，可以得到最终的测量值；如附图7中为细化分析阶段，对每个天线的AOA进行估计，通过直接估计钻杆反射的AOA与IQ域的旋转角度，并对测量进行细化，可得到如图中7的变换阶段的距离；估计AOA的基本模型如图5、图6所示，假设第N个天线的传播距离与第1个Rx天线的传播距离之差为,/＞,不同Rx天线上AOA的到达波不平行，设为第N个Rx的位置，/＞为物体的位置，可以计算/＞为,取/＞，/＞，求解/＞优化如下：其中，o是物体的位置，是o在本式中取得最小值，/＞为第N个Rx的位置,第N个天线的传播距离与第1个Rx天线的传播距离之差；然后，根据MRx天线与/＞的几何关系，计算出MRx天线的AOA，其中MRx为第M个天线的传播距离。最后，通过数据综合，翻译可以得到如图9的钻杆直径△S。下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本发明的描述中，需要说明的是，术语“上”、“下”、“内”、“外”“前端”、“后端”、“两端”、“一端”、“另一端”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性。在本发明的描述中，需要说明的是，除非另有明确的规定和限定，术语“安装”、“设置有”、“连接”等，应做广义理解，例如“连接”，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通。对于本领域的普通技术人员而言，可以具体情况理解上述术语在本发明中的具体含义。
