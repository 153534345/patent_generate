标题title
一种集群服务器的配置系统
摘要abst
本发明涉及服务器部署技术领域且提供了一种集群服务器的配置系统，包括：目标服务器标识列表、处理器和存储有计算机程序的存储器，当计算机程序被处理器执行时，实现以下步骤：获取目标服务器标识列表对应的第一历史启动时长列表；获取目标服务器标识列表对应的第二历史启动时长列表；获取第一中间启动时长；获取第二中间启动时长；根据第一中间启动时长和第二中间启动时长获取目标服务器完成部署后启动的配置时长。可知，本发明，能够自动化的调整服务器的资源配置，根据服务器的资源配置以及历史部署耗时确定目标服务器完成部署后启动的配置时长，能够获取最合理的配置时长，避免造成资源浪费且有利于提高系统的运行效率。
权利要求书clms
1.一种集群服务器的配置系统，其特征在于，所述系统包括：目标服务器标识列表A={A1，A2，……Ai，……，Am}、处理器和存储有计算机程序的存储器，其中，Ai为第i个目标服务器标识，i=1，2……m，m为目标服务器数量，当所述计算机程序被所述处理器执行时，实现以下步骤：S100、获取A对应的第一历史启动时长列表B={B1，B2，……，Bi，……，Bm}，Bi={Bi1，Bi2，……，Bij，……，Bin}，Bij为Ai对应的第j个第一历史启动时长，j=1，2……n，n为第一历史启动时长数量，其中，第一历史启动时长为目标服务器在第一历史时间片内完成部署后启动的时长；S200、获取A对应的第二历史启动时长列表C={C1，C2，……，Ci，……，Cm}，Ci={Ci1，Ci2，……，Cir，……，Cis}，Cir为Ai对应的第r个第二历史启动时长，r=1，2……s，s为第二历史启动时长数量，其中，第二历史启动时长为目标服务器在第二历史时间片内完成部署后启动的时长；S300、根据B，获取B对应的第一中间启动时长D，其中，D符合如下条件：D=∑mi=1-max-min)/)/m，其中，max为获取最大值的函数，min为获取最小值的函数；S400、根据C，获取C对应的第二中间启动时长E，其中，E符合如下条件：E=∑mi=1-max-min)/)/m；S500、当|D-E|≥T0时，确定E为目标服务器完成部署后启动的配置时长T，T0为预设时间差；S600、当|D-E|＜T0时，确定D为目标服务器完成部署后启动的配置时长T。2.根据权利要求1所述的集群服务器的配置系统，其特征在于，在S100步骤中包括如下步骤：S101、获取A对应的第一关键启动时长列表F={F1，F2，……，Fi，……，Fm}，Fi={Fi1，Fi2，……，Fij，……，Fin}，Fij为第一历史时间片内Ai对应的第j个第一关键启动时长，其中，第一关键启动时长为目标服务器完成部署后启动的基础用时；S103、获取A对应的第二关键启动时长列表G={G1，G2，……，Gi，……，Gm}，Gi={Gi1，Gi2，……，Gij，……，Gin}，Gij为第一历史时间片内Ai对应的第j个第二关键启动时长，其中，第二关键启动时长为目标服务器完成部署后启动的最低耗时；S105、获取G对应的第一预设权重列表H={H1，H2，……，Hi，……，Hm}，Hi={Hi1，Hi2，……，Hij，……，Hin}，Hij为Gij对应的第一预设权重，其中，第一预设权重为能够使目标服务器完成部署后的启动耗时达到最低耗时的权重；S107、根据Fij、Gij和Hij获取Bij，其中，Bij符合如下条件：Bij=Fij+//Hij)，Rij为Ai对应的第j个第二预设权重，第二预设权重为用于根据目标服务器的服务器资源配置调整第一历史启动时长的权重。3.根据权利要求2所述的集群服务器的配置系统，其特征在于，具体地，在S107步骤之前包括如下步骤进行服务器资源配置：S1、获取A对应预设资源配置列表U={U1，U2，……，Ui，……，Um}，Ui={Ui1，Ui2，Ui3}，Ui1为Ai对应的预设CPU数据处理量，Ui2为Ai对应的预设GPU数据处理量，Ui3为Ai对应的预设内存数据处理量；S2、获取A对应的第一中间资源配置列表V={V1，V2，……，Vi，……，Vm}，Vi={Vi1，Vi2，Vi3}，Vi1为Ai对应的第一中间CPU数据处理量，Vi2为Ai对应的第一中间GPU数据处理量，Vi3为Ai对应的第一中间内存数据处理量，其中，第一中间CPU数据处理量为目标服务器运行所需的实际CPU数据处理量，第一中间GPU数据处理量为目标服务器运行所需的实际GPU数据处理量，第一中间内存数据处理量为目标服务器运行所需的实际内存数据处理量；S3、根据U和V，获取A对应的第一资源占比列表Z={Z1，Z2，……，Zi，……，Zm}，Zi为Ai对应的第一资源占比，其中，Zi符合如下条件：Zi=+α2+α3)/，其中，α1为用于调整资源占比的第一预设资源占比权重，α2为用于调整资源占比的第二预设资源占比权重，α3为用于调整资源占比的第三预设资源占比权重；S4、根据Z，获取第二资源占比ZY，ZY符合如下条件：ZY=Σmi=1/m；S5、当Zi≥ZY时，确定Ui1为Ai对应的目标CPU数据处理量，Ui2为Ai对应的目标GPU数据处理量，Ui3为Ai对应的目标内存数据处理量；S6、当Zi＜ZY时，根据Ui，确定Ai对应的目标CPU数据处理量、目标GPU数据处理量和目标内存数据处理量。4.根据权利要求3所述的集群服务器的配置系统，其特征在于，在S6步骤中包括如下步骤：S61、根据Ui，获取Ai对应的第二中间资源配置列表SJi={SJi1，SJi2，SJi3}，SJi1为Ai对应的第二中间CPU数据处理量，SJi2为Ai对应的第二中间GPU数据处理量，SJi3为Ai对应的第二中间内存数据处理量，其中，SJi1、SJi2、SJi3符合如下条件：SJi1=α1××Ui1/，其中，β为用于调整数据处理量的预设权重；SJi2=α2××Ui2/；SJi3=α3××Ui3/；S63、获取Ai对应的第一运行标识，第一运行标识为目标服务器的服务器资源配置为第二中间资源配置时，生成的表征目标服务器是否能成功运行的标识；S65、当第一运行标识为标识“0”且β2＞0.01时，令β=β+β2，并执行S61步骤，其中，β2为预设权重的预设调整阈值；S67、当第一运行标识为标识“0”且β2≤0.01时，确定SJi1为Ai对应的目标CPU数据处理量，SJi2为Ai对应的目标GPU数据处理量，SJi3为Ai对应的目标内存数据处理量；S69、当第一运行标识为标识“1”时，令β=β-β2，β2=β2/2，并执行S61步骤。5.根据权利要求1所述的集群服务器的配置系统，其特征在于，在S600步骤之后还包括如下步骤：S700、获取Ai对应的部署安装包标识Li；S800、根据Li对应的部署安装包对Ai对应的目标服务器进行部署，获取Ai对应的中间服务器Pi；S900、获取Pi的启动时长Qi；S1000、获取Pi对应的反馈字符串Wi；S1100、当Qi＞T或Wi不为NULL时，确定Ai对应的目标服务器为Ai对应的中间服务器。6.根据权利要求1所述的集群服务器的配置系统，其特征在于，所述第一历史时间片的结束时间点为当前时间点t0。7.根据权利要求6所述的集群服务器的配置系统，其特征在于，所述第一历史时间片的起始时间点为t1，其中，t1=t0-Δt，Δt为预设的第一历史时间片长度。8.根据权利要求7所述的集群服务器的配置系统，其特征在于，Δt的取值范围为。9.根据权利要求6所述的集群服务器的配置系统，其特征在于，所述第二历史时间片的结束时间点为t0。10.根据权利要求1所述的集群服务器的配置系统，其特征在于，所述第二历史时间片的起始时间为t2，t2为目标服务器首次完成部署的时间点。
说明书desc
技术领域本发明涉及服务器部署技术领域，特别是涉及一种集群服务器的配置系统。背景技术随着互联网的快速发展，一个服务往往对应若干个服务器，对大规模的集群服务器进行准确快速的部署是非常有必要的，现有的集群服务器的部署方法大多为通过人工部署一些脚本来进行部署或人工解析，生成配置文件，将配置文件与待配置的服务器一一对应，对配置文件进行分析，生成部署任务，进一步地按照设置好的部署时长对服务器进行部署。但上述方法也存在以下技术问题：对服务器进行部署的过程中，只能根据人工设置好的时长对服务器进行部署，无法自动化的调整服务器的资源配置，也无法自动化的根据历史部署耗时以及服务器的资源配置获取最合理的部署耗时，容易造成资源浪费且降低了系统的运行效率。发明内容针对上述技术问题，本发明采用的技术方案为：一种集群服务器的配置系统，包括：目标服务器标识列表A={A1，A2，……Ai，……，Am}、处理器和存储有计算机程序的存储器，其中，Ai为第i个目标服务器标识，i=1，2……m，m为目标服务器数量，当计算机程序被处理器执行时，实现以下步骤：S100、获取A对应的第一历史启动时长列表B={B1，B2，……，Bi，……，Bm}，Bi={Bi1，Bi2，……，Bij，……，Bin}，Bij为Ai对应的第j个第一历史启动时长，j=1，2……n，n为第一历史启动时长数量，其中，第一历史启动时长为目标服务器在第一历史时间片内完成部署后启动的时长。S200、获取A对应的第二历史启动时长列表C={C1，C2，……，Ci，……，Cm}，Ci={Ci1，Ci2，……，Cir，……，Cis}，Cir为Ai对应的第r个第二历史启动时长，r=1，2……s，s为第二历史启动时长数量，其中，第二历史启动时长为目标服务器在第二历史时间片内完成部署后启动的时长。S300、根据B，获取B对应的第一中间启动时长D，其中，D符合如下条件：D=∑mi=1-max-min)/)/m，其中，max为获取最大值的函数，min为获取最小值的函数。S400、根据C，获取C对应的第二中间启动时长E，其中，E符合如下条件：E=∑mi=1-max-min)/)/m。S500、当|D-E|≥T0时，确定E为目标服务器完成部署后启动的配置时长T，T0为预设时间差。S600、当|D-E|＜T0时，确定D为目标服务器完成部署后启动的配置时长T。本发明至少具有以下有益效果：本发明提供了一种集群服务器的配置系统，包括：目标服务器标识列表、处理器和存储有计算机程序的存储器，当计算机程序被处理器执行时，实现以下步骤：获取目标服务器标识列表对应的第一历史启动时长列表；获取目标服务器标识列表对应的第二历史启动时长列表；获取第一中间启动时长；获取第二中间启动时长；根据第一中间启动时长和第二中间启动时长获取目标服务器完成部署后启动的配置时长。可知，本发明能够自动化的调整服务器的资源配置，根据服务器的资源配置以及历史部署耗时获取第一历史启动时长列表和第二历史启动时长列表，进一步地，获取第一中间启动时长和第二中间启动时长，对第一中间启动时长和第二中间启动时长进行对比确定目标服务器完成部署后启动的配置时长，能够获取最合理的配置时长，避免造成资源浪费且有利于提高系统的运行效率。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例提供的一种集群服务器的配置系统执行计算机程序的流程图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本发明的实施例提供了一种集群服务器的配置系统，包括：目标服务器标识列表A={A1，A2，……，Ai，……，Am}、处理器和存储有计算机程序的存储器，其中，Ai为第i个目标服务器标识，i=1，2……m，m为目标服务器数量，目标服务器标识为目标服务器的唯一身份标识，当计算机程序被处理器执行时，实现以下步骤，如图1所示：S100、获取A对应的第一历史启动时长列表B={B1，B2，……，Bi，……，Bm}，Bi={Bi1，Bi2，……，Bij，……，Bin}，Bij为Ai对应的第j个第一历史启动时长，j=1，2……n，n为第一历史启动时长数量，其中，第一历史启动时长为目标服务器在第一历史时间片内完成部署后启动的时长。具体地，第一历史时间片的结束时间点为当前时间点t0。进一步地，第一历史时间片的起始时间点为t1，其中，t1=t0-Δt，Δt为预设的第一历史时间片长度。进一步地，Δt的取值范围为，本领域技术人员知晓，本领域技术人员根据实际需求设置第一历史时间片长度。进一步地，第一历史时间片长度单位为：天。具体地，在S100步骤中包括如下步骤：S101、获取A对应的第一关键启动时长列表F={F1，F2，……，Fi，……，Fm}，Fi={Fi1，Fi2，……，Fij，……，Fin}，Fij为第一历史时间片内Ai对应的第j个第一关键启动时长，其中，第一关键启动时长为目标服务器完成部署后启动的基础用时，本领域技术人员知晓，现有技术中，任一获取服务器完成部署后启动的基础用时的方法，均属于本发明的保护范围。具体地，第一关键启动时长的单位为：毫秒。S103、获取A对应的第二关键启动时长列表G={G1，G2，……，Gi，……，Gm}，Gi={Gi1，Gi2，……，Gij，……，Gin}，Gij为第一历史时间片内Ai对应的第j个第二关键启动时长，其中，第二关键启动时长为目标服务器完成部署后启动的最低耗时，本领域技术人员知晓，现有技术中，任一获取服务器完成部署后启动的最低耗时的方法，均属于本发明的保护范围，在此不再赘述。具体地，第二关键启动时长的单位为：毫秒。S105、获取G对应的第一预设权重列表H={H1，H2，……，Hi，……，Hm}，Hi={Hi1，Hi2，……，Hij，……，Hin}，Hij为Gij对应的第一预设权重，其中，第一预设权重为能够使目标服务器完成部署后的启动耗时达到最低耗时的权重，本领域技术人员知晓，第一预设权重由本领域技术人员根据实际需求设置。具体地，第一预设权重的单位为：豪核。S107、根据Fij、Gij和Hij获取Bij，其中，Bij符合如下条件：Bij=Fij+//Hij)，Rij为Ai对应的第j个第二预设权重，第二预设权重为用于根据目标服务器的服务器资源配置调整第一历史启动时长的权重，本领域技术人员知晓，第二预设权重由本领域技术人员根据实际需求设置。具体地，第二预设权重的单位为：豪核。上述，根据第一历史时间片内的第一关键启动时长、第二关键启动时长、第一预设权重能够获取到较为精准的第一历史启动时长列表，进一步地，获取第一中间启动时长，对第一中间启动时长和第二中间启动时长进行对比确定目标服务器完成部署后启动的配置时长，能够获取最合理的配置时长，避免造成资源浪费且有利于提高系统的运行效率。具体地，在S107步骤之前包括如下步骤进行服务器资源配置：S1、获取A对应预设资源配置列表U={U1，U2，……，Ui，……，Um}，Ui={Ui1，Ui2，Ui3}，Ui1为Ai对应的预设CPU数据处理量，Ui2为Ai对应的预设GPU数据处理量，Ui3为Ai对应的预设内存数据处理量，其中，本领域技术人员知晓，预设CPU数据处理量、预设GPU数据处理量和预设内存数据处理量由本领域技术人员根据实际需求设置。S2、获取A对应的第一中间资源配置列表V={V1，V2，……，Vi，……，Vm}，Vi={Vi1，Vi2，Vi3}，Vi1为Ai对应的第一中间CPU数据处理量，Vi2为Ai对应的第一中间GPU数据处理量，Vi3为Ai对应的第一中间内存数据处理量，其中，第一中间CPU数据处理量为目标服务器运行所需的实际CPU数据处理量，第一中间GPU数据处理量为目标服务器运行所需的实际GPU数据处理量，第一中间内存数据处理量为目标服务器运行所需的实际内存数据处理量，本领域技术人员知晓，现有技术中任一获取服务器运行所需的CPU数据处理量、GPU数据处理量和内存数据处理量的方法，均属于本发明的保护范围，在此不再赘述。S3、根据U和V，获取A对应的第一资源占比列表Z={Z1，Z2，……，Zi，……，Zm}，Zi为Ai对应的第一资源占比，其中，Zi符合如下条件：Zi=+α2+α3)/，其中，α1为用于调整资源占比的第一预设资源占比权重，α2为用于调整资源占比的第二预设资源占比权重，α3为用于调整资源占比的第三预设资源占比权重，本领域技术人员知晓，第一预设资源占比权重、第二预设资源占比权重和第三预设资源占比权重由本领域技术人员根据实际需求设置。S4、根据Z，获取第二资源占比ZY，ZY符合如下条件：ZY=Σmi=1/m。S5、当Zi≥ZY时，确定Ui1为Ai对应的目标CPU数据处理量，Ui2为Ai对应的目标GPU数据处理量，Ui3为Ai对应的目标内存数据处理量。S6、当Zi＜ZY时，根据Ui，确定Ai对应的目标CPU数据处理量、目标GPU数据处理量和目标内存数据处理量。具体地，在S6步骤中包括如下步骤：S61、根据Ui，获取Ai对应的第二中间资源配置列表SJi={SJi1，SJi2，SJi3}，SJi1为Ai对应的第二中间CPU数据处理量，SJi2为Ai对应的第二中间GPU数据处理量，SJi3为Ai对应的第二中间内存数据处理量，其中，SJi1、SJi2、SJi3符合如下条件：SJi1=α1××Ui1/，其中，β为用于调整数据处理量的预设权重，本领域技术人员知晓，用于调整数据处理量的预设权重由本领域技术人员根据实际需求设置；SJi2=α2××Ui2/；SJi3=α3××Ui3/。S63、获取Ai对应的第一运行标识，第一运行标识为目标服务器的服务器资源配置为第二中间资源配置时，生成的表征目标服务器是否能成功运行的标识。S65、当第一运行标识为标识“0”且β2＞0.01时，令β=β+β2，并执行S61步骤，其中，β2为预设权重的预设调整阈值，本领域技术人员知晓，本领域技术人员根据实际需求设置预设调整阈值。具体地，标识“0”表征为：运行成功。S67、当第一运行标识为标识“0”且β2≤0.01时，确定SJi1为Ai对应的目标CPU数据处理量，SJi2为Ai对应的目标GPU数据处理量，SJi3为Ai对应的目标内存数据处理量。S69、当第一运行标识为标识“1”时，令β=β-β2，β2=β2/2，并执行S61步骤。具体地，标识“1”表征为：运行失败。上述，通过预设预设资源配置列表和第一中间资源配置列表，获取第一资源占比列表，根据第一资源占比列表自动化的调整服务器的资源配置，资源配置能够影响服务器的部署耗时，从而根据服务器的资源配置以及历史部署耗时获取第一历史启动时长列表和第二历史启动时长列表，进一步地，获取第一中间启动时长和第二中间启动时长，对第一中间启动时长和第二中间启动时长进行对比确定目标服务器完成部署后启动的配置时长，能够获取最合理的配置时长，避免造成资源浪费且有利于提高系统的运行效率。S200、获取A对应的第二历史启动时长列表C={C1，C2，……，Ci，……，Cm}，Ci={Ci1，Ci2，……，Cir，……，Cis}，Cir为Ai对应的第r个第二历史启动时长，r=1，2……s，s为第二历史启动时长数量，其中，第二历史启动时长为目标服务器在第二历史时间片内完成部署后启动的时长，其中，本领域技术人员知晓，获取第二历史启动时长的方法参照获取第一历史启动时长的方法，在此不再赘述。具体地，第二历史时间片的结束时间点为t0。进一步地，第二历史时间片的起始时间为t2，t2为目标服务器首次完成部署的时间点。S300、根据B，获取B对应的第一中间启动时长D，其中，D符合如下条件：D=∑mi=1-max-min)/)/m，其中，max为获取最大值的函数，min为获取最小值的函数。S400、根据C，获取C对应的第二中间启动时长E，其中，E符合如下条件：E=∑mi=1-max-min)/)/m。S500、当|D-E|≥T0时，确定E为目标服务器完成部署后启动的配置时长T，T0为预设时间差，其中，本领域技术人员知晓，本领域技术人员根据实际需求设置预设时间差。S600、当|D-E|＜T0时，确定D为目标服务器完成部署后启动的配置时长T。上述，自动化的调整服务器的资源配置，根据服务器的资源配置以及历史部署耗时获取第一历史启动时长列表和第二历史启动时长列表，进一步地，获取第一中间启动时长和第二中间启动时长，对第一中间启动时长和第二中间启动时长进行对比确定目标服务器完成部署后启动的配置时长，能够获取最合理的配置时长，避免造成资源浪费且有利于提高系统的运行效率。本发明还提供了另一实施例。具体地，在S600步骤之后包括如下步骤：S700、获取Ai对应的部署安装包标识Li。具体地，部署安装包标识为部署安装包的唯一身份标识。具体地，在S700步骤中包括如下步骤获取部署安装包：S701、获取目标字符串，目标字符串可以理解为：代码，其中，本领域技术人员知晓，本领域技术人员根据实际需求设置目标字符串。S702、获取目标服务器对应的第一CPU架构类型和第二CPU架构类型，本领域技术人员知晓，现有技术中任一能够获取CPU架构类型的方法，均属于本发明的保护范围，在此不再赘述。具体地，第一CPU架构类型对应的CPU架构为ARM架构。具体地，第二CPU架构类型对应的CPU架构为X86架构。S703、根据目标字符串获取第一架构类型安装包，第一架构类型安装包可以理解为ARM版本的安装包，其中，本领域技术人员知晓，现有技术中任一对代码进行编译生成安装包的方法均属于本发明的保护范围，在此不再赘述。S704、根据目标字符串获取第二架构类型安装包，第二架构类型安装包可以理解为X86版本的安装包，其中，本领域技术人员知晓，获取第二架构类型安装包的方法参照获取第一架构类型安装包的方法，在此不再赘述。S705、当Ai的CPU架构为第一CPU架构类型对应的CPU架构时，确定第一架构类型安装包为Li对应的部署安装包。S706、当Ai的CPU架构为第二CPU架构类型对应的CPU架构时，确定第二架构类型安装包为Li对应的部署安装包。上述，根据目标服务器对应的CPU架构确定目标服务器对应的部署安装包，根据部署安装包对目标服务器进行部署，能够准确快速的完成服务器部署，有利于提高系统的运行效率。S800、根据Li对应的部署安装包对Ai对应的目标服务器进行部署，获取Ai对应的中间服务器Pi。S900、获取Pi的启动时长Qi。S1000、获取Pi对应的反馈字符串Wi，反馈字符串可以理解为：服务器启动后生成的报错信息。S1100、当Qi＞T或Wi不为NULL时，确定Ai对应的目标服务器为Ai对应的中间服务器。上述，当服务器启动的时长不小于目标服务器完成部署后启动的配置时长或服目标服务器启动后发生报错时，说明部署出现了错误，此时，将目标服务器的状态恢复到未部署前的状态，能够避免服务器不能正常运行。本发明提供了一种集群服务器的配置系统，包括：目标服务器标识列表、处理器和存储有计算机程序的存储器，当计算机程序被处理器执行时，实现以下步骤：获取目标服务器标识列表对应的第一历史启动时长列表；获取目标服务器标识列表对应的第二历史启动时长列表；获取第一中间启动时长；获取第二中间启动时长；根据第一中间启动时长和第二中间启动时长获取目标服务器完成部署后启动的配置时长。可知，本发明，能够自动化的调整服务器的资源配置，根据服务器的资源配置以及历史部署耗时获取第一历史启动时长列表和第二历史启动时长列表，进一步地，获取第一中间启动时长和第二中间启动时长，对第一中间启动时长和第二中间启动时长进行对比确定目标服务器完成部署后启动的配置时长，能够获取最合理的配置时长，避免造成资源浪费且有利于提高系统的运行效率。虽然已经通过示例对本发明的一些特定实施例进行了详细说明，但是本领域的技术人员应该理解，以上示例仅是为了进行说明，而不是为了限制本发明的范围。本领域的技术人员还应理解，可以对实施例进行多种修改而不脱离本发明的范围和精神。本发明开的范围由所附权利要求来限定。
