标题title
分布式光伏出力预测方法、装置、电子设备和介质
摘要abst
本发明公开了一种分布式光伏出力预测方法、装置、电子设备和介质。所述方法包括：将第一输入张量输入至检测模型中的编码器，通过编码器中的十字交叉注意力网络基于时间维度和数据维度对特征进行处理，和将第二输入张量输入至检测模型中的解码器，通过解码器中的十字交叉注意力网络基于时间维度和数据维度对特征进行处理，使得预测模型可以从时间维度和数据维度进行光伏出力预测。采用本方法能够通过十字交叉注意力模块同时从时间维度和数据维度对特征进行学习和融合，提高了预测模型的预测精度。
权利要求书clms
1.一种分布式光伏出力预测方法，其特征在于，所述方法包括：获取第一气象数据和第二气象数据，并对所述第一气象数据和所述第二气象数据进行预处理，获得第一输入张量和第二输入张量；其中，所述第一气象数据表征在目标时间前的第一时间范围内的历史气象数据，所述第二气象数据表征在目标时间的预测气象数据；将所述第一输入张量输入至检测模型中的编码器，经由所述编码器中的卷积神经网络对所述第一输入张量进行特征提取，获得第一特征向量，并通过所述编码器中的十字交叉注意力网络基于时间维度和数据维度对所述第一特征向量进行处理，获得第二特征向量；将所述第二输入张量输入至所述检测模型中的解码器，经由所述解码器中的卷积神经网络对所述第二输入张量进行特征提取，获得第三特征向量，并通过所述解码器中的十字交叉注意力网络基于时间维度和数据维度对所述第二特征向量和所述第三特征向量进行处理，获得第四特征向量；通过所述检测模型中的全连接层对所述第四特征向量进行处理，输出分布式光伏出力预测结果。2.根据权利要求1所述的分布式光伏出力预测方法，其特征在于，对所述第一气象数据和所述第二气象数据进行预处理，获得第一输入张量和第二输入张量，包括：对所述第一气象数据进行预处理，获得所述第一输入张量，并对所述第二气象数据进行预处理，获得第三输入张量；根据所述第一输入张量中的至少部分以及所述第三输入张量确定所述第二输入张量。3.根据权利要求1所述的分布式光伏出力预测方法，其特征在于，所述第一气象数据和所述第二气象数据分别包括类型变量和第一数值变量，其中，对所述第一气象数据和所述第二气象数据进行预处理，包括：通过嵌入操作将所述类型变量转换为第二数值变量；将所述第一数值变量和所述第二数值变量进行拼接处理，以组装成相应的输入张量。4.根据权利要求3所述的分布式光伏出力预测方法，其特征在于，应用于多用户的分布式光伏系统时，所述方法还包括：确定用户标识，并对所述用户标识进行嵌入操作，以便将所述用户标识加入所述第一输入张量和所述第二输入张量。5.根据权利要求1-4中任一项所述的分布式光伏出力预测方法，其特征在于，所述十字交叉注意力网络基于时间维度和数据维度对输入的特征向量进行处理的步骤包括：对输入的特征向量进行降维处理，得到第一特征图、第二特征图和第三特征图；根据所述第一特征图中每个元素的目标位置，在所述第二特征图中提取对应的第五特征向量，并计算所述第一特征图中每个元素与对应的第五特征向量的相似度，再进行归一化指数函数权重计算，得到所述第一特征图中每个元素对应的权重向量；其中，所述第五特征向量的形状为十字交叉形状；根据所述第一特征图中每个元素的目标位置，在所述第三特征图中提取对应的第六特征向量，并将所述第一特征图中每个元素对应的第六特征向量与对应的权重向量相乘，得到加权特征向量；其中，所述第六特征向量的形状为十字交叉形状；将所述第一特征图中每个元素对应的加权特征向量与输入的特征向量进行残差相加。6.根据权利要求5所述的分布式光伏出力预测方法，其特征在于，采用1×1卷积矩阵对输入的特征向量进行降维处理。7.根据权利要求5所述的分布式光伏出力预测方法，其特征在于，根据所述第一特征图中每个元素的目标位置，在所述第二特征图中提取对应的第五特征向量，包括：将位于所述第二特征图中所述目标位置所在的行和列上的多个元素确定为所述第五特征向量；其中，行与列交叉位置处对应的元素仅取一次；根据所述第一特征图中每个元素的目标位置，在所述第三特征图中提取对应的第六特征向量，包括：将位于所述第三特征图中所述目标位置所在的行和列上的多个元素确定为所述第六特征向量；其中，行与列交叉位置处对应的元素仅取一次。8.一种分布式光伏出力预测装置，其特征在于，包括：第一处理模块，用于获取第一气象数据和第二气象数据，并对所述第一气象数据和所述第二气象数据进行预处理，获得第一输入张量和第二输入张量；其中，所述第一气象数据表征在目标时间前的第一时间范围内的历史气象数据，所述第二气象数据表征在目标时间的预测气象数据；第二处理模块，用于将所述第一输入张量输入至检测模型中的编码器，经由所述编码器中的卷积神经网络对所述第一输入张量进行特征提取，获得第一特征向量，并通过所述编码器中的十字交叉注意力网络基于时间维度和数据维度对所述第一特征向量进行处理，获得第二特征向量；第三处理模块，用于将所述第二输入张量输入至所述检测模型中的解码器，经由所述解码器中的卷积神经网络对所述第二输入张量进行特征提取，获得第三特征向量，并通过所述解码器中的十字交叉注意力网络基于时间维度和数据维度对所述第二特征向量和所述第三特征向量进行处理，获得第四特征向量；第四处理模块，用于通过所述检测模型中的全连接层对所述第四特征向量进行处理，输出分布式光伏出力预测结果。9.根据权利要求8所述的分布式光伏出力预测装置，其特征在于，所述第一气象数据和所述第二气象数据分别包括类型变量和第一数值变量，其中，所述第一处理模块在对所述第一气象数据和所述第二气象数据进行预处理时，用于：通过嵌入操作将所述类型变量转换为第二数值变量；将所述第一数值变量和所述第二数值变量进行拼接处理，以组装成相应的输入张量。10.根据权利要求8-9中任一项所述的分布式光伏出力预测装置，其特征在于，所述第二处理模块和所述第三处理模块在十字交叉注意力网络基于时间维度和数据维度对输入的特征向量进行处理时，用于：对输入的特征向量进行降维处理，得到第一特征图、第二特征图和第三特征图；根据所述第一特征图中每个元素的目标位置，在所述第二特征图中提取对应的第五特征向量，并计算所述第一特征图中每个元素与对应的第五特征向量的相似度，再进行归一化指数函数权重计算，得到所述第一特征图中每个元素对应的权重向量；其中，所述第五特征向量的形状为十字交叉形状；根据所述第一特征图中每个元素的目标位置，在所述第三特征图中提取对应的第六特征向量，并将所述第一特征图中每个元素对应的第六特征向量与对应的权重向量相乘，得到加权特征向量；其中，所述第六特征向量的形状为十字交叉形状；将所述第一特征图中每个元素对应的加权特征向量与输入的特征向量进行残差相加。11.根据权利要求10所述的分布式光伏出力预测装置，其特征在于，所述第二处理模块在根据所述第一特征图中每个元素的目标位置，在所述第二特征图中提取对应的第五特征向量时，用于：将位于所述第二特征图中所述目标位置所在的行和列上的多个元素确定为所述第五特征向量；其中，行与列交叉位置处对应的元素仅取一次；所述第三处理模块在根据所述第一特征图中每个元素的目标位置，在所述第三特征图中提取对应的第六特征向量时，用于：将位于所述第三特征图中所述目标位置所在的行和列上的多个元素确定为所述第六特征向量；其中，行与列交叉位置处对应的元素仅取一次。12.一种电子设备，包括存储器和处理器，所述存储器存储有计算机程序，其特征在于，所述处理器执行所述计算机程序时实现以下步骤：获取第一气象数据和第二气象数据，并对所述第一气象数据和所述第二气象数据进行预处理，获得第一输入张量和第二输入张量；其中，所述第一气象数据表征在目标时间前的第一时间范围内的历史气象数据，所述第二气象数据表征在目标时间的预测气象数据；将所述第一输入张量输入至检测模型中的编码器，经由所述编码器中的卷积神经网络对所述第一输入张量进行特征提取，获得第一特征向量，并通过所述编码器中的十字交叉注意力网络基于时间维度和数据维度对所述第一特征向量进行处理，获得第二特征向量；将所述第二输入张量输入至所述检测模型中的解码器，经由所述解码器中的卷积神经网络对所述第二输入张量进行特征提取，获得第三特征向量，并通过所述解码器中的十字交叉注意力网络基于时间维度和数据维度对所述第二特征向量和所述第三特征向量进行处理，获得第四特征向量；通过所述检测模型中的全连接层对所述第四特征向量进行处理，输出分布式光伏出力预测结果。13.根据权利要求12所述的电子设备，其特征在于，所述第一气象数据和所述第二气象数据分别包括类型变量和第一数值变量，所述处理器执行所述计算机程序时还实现以下步骤：通过嵌入操作将所述类型变量转换为第二数值变量；将所述第一数值变量和所述第二数值变量进行拼接处理，以组装成相应的输入张量。14.根据权利要求12-13中任一项所述的电子设备，其特征在于，所述处理器执行所述计算机程序时还实现以下步骤：对输入的特征向量进行降维处理，得到第一特征图、第二特征图和第三特征图；根据所述第一特征图中每个元素的目标位置，在所述第二特征图中提取对应的第五特征向量，并计算所述第一特征图中每个元素与对应的第五特征向量的相似度，再进行归一化指数函数权重计算，得到所述第一特征图中每个元素对应的权重向量；其中，所述第五特征向量的形状为十字交叉形状；根据所述第一特征图中每个元素的目标位置，在所述第三特征图中提取对应的第六特征向量，并将所述第一特征图中每个元素对应的第六特征向量与对应的权重向量相乘，得到加权特征向量；其中，所述第六特征向量的形状为十字交叉形状；将所述第一特征图中每个元素对应的加权特征向量与输入的特征向量进行残差相加。15.根据权利要求14中任一项所述的电子设备，其特征在于，所述处理器执行所述计算机程序时还实现以下步骤：将位于所述第二特征图中所述目标位置所在的行和列上的多个元素确定为所述第五特征向量；其中，行与列交叉位置处对应的元素仅取一次；将位于所述第三特征图中所述目标位置所在的行和列上的多个元素确定为所述第六特征向量；其中，行与列交叉位置处对应的元素仅取一次。16.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现以下步骤：获取第一气象数据和第二气象数据，并对所述第一气象数据和所述第二气象数据进行预处理，获得第一输入张量和第二输入张量；其中，所述第一气象数据表征在目标时间前的第一时间范围内的历史气象数据，所述第二气象数据表征在目标时间的预测气象数据；将所述第一输入张量输入至检测模型中的编码器，经由所述编码器中的卷积神经网络对所述第一输入张量进行特征提取，获得第一特征向量，并通过所述编码器中的十字交叉注意力网络基于时间维度和数据维度对所述第一特征向量进行处理，获得第二特征向量；将所述第二输入张量输入至所述检测模型中的解码器，经由所述解码器中的卷积神经网络对所述第二输入张量进行特征提取，获得第三特征向量，并通过所述解码器中的十字交叉注意力网络基于时间维度和数据维度对所述第二特征向量和所述第三特征向量进行处理，获得第四特征向量；通过所述检测模型中的全连接层对所述第四特征向量进行处理，输出分布式光伏出力预测结果。17.根据权利要求16所述的计算机可读存储介质，其特征在于，所述第一气象数据和所述第二气象数据分别包括类型变量和第一数值变量，所述处理器执行所述计算机程序时还实现以下步骤：通过嵌入操作将所述类型变量转换为第二数值变量；将所述第一数值变量和所述第二数值变量进行拼接处理，以组装成相应的输入张量。18.根据权利要求16-17中任一项所述的计算机可读存储介质，其特征在于，所述处理器执行所述计算机程序时还实现以下步骤：对输入的特征向量进行降维处理，得到第一特征图、第二特征图和第三特征图；根据所述第一特征图中每个元素的目标位置，在所述第二特征图中提取对应的第五特征向量，并计算所述第一特征图中每个元素与对应的第五特征向量的相似度，再进行归一化指数函数权重计算，得到所述第一特征图中每个元素对应的权重向量；其中，所述第五特征向量的形状为十字交叉形状；根据所述第一特征图中每个元素的目标位置，在所述第三特征图中提取对应的第六特征向量，并将所述第一特征图中每个元素对应的第六特征向量与对应的权重向量相乘，得到加权特征向量；其中，所述第六特征向量的形状为十字交叉形状；将所述第一特征图中每个元素对应的加权特征向量与输入的特征向量进行残差相加。19.根据权利要求18中任一项所述的计算机可读存储介质，其特征在于，所述处理器执行所述计算机程序时还实现以下步骤：将位于所述第二特征图中所述目标位置所在的行和列上的多个元素确定为所述第五特征向量；其中，行与列交叉位置处对应的元素仅取一次；将位于所述第三特征图中所述目标位置所在的行和列上的多个元素确定为所述第六特征向量；其中，行与列交叉位置处对应的元素仅取一次。
说明书desc
技术领域本发明涉及光伏发电技术领域，特别是涉及一种分布式光伏出力预测方法、装置、电子设备和介质。背景技术相关技术中，通常采用传统的机器学习方法，或者基于深度学习的分布式光伏出力预测的方法，输出分布式光伏出力的预测值，但这两种方法对特征的提取有限，导致模型学习任务中无法有效的对数据进行充分学习，导致模型的预测精度降低。发明内容本发明旨在至少在一定程度上解决相关技术中的技术问题之一。为此，本发明的一个目的在于提出一种具有能够从时间维度和数据维度进行特征提取和融合，提高模型预测精度的一种分布式光伏出力预测方法、装置、电子设备和介质。根据本发明实施例的分布式光伏出力预测方法，包括以下步骤：获取第一气象数据和第二气象数据，并对第一气象数据和第二气象数据进行预处理，获得第一输入张量和第二输入张量；其中，第一气象数据表征在目标时间前的第一时间范围内的历史气象数据，第二气象数据表征在目标时间的预测气象数据；将第一输入张量输入至检测模型中的编码器，经由编码器中的卷积神经网络对第一输入张量进行特征提取，获得第一特征向量，并通过编码器中的十字交叉注意力网络基于时间维度和数据维度对第一特征向量进行处理，获得第二特征向量；将第二输入张量输入至检测模型中的解码器，经由解码器中的卷积神经网络对第二输入张量进行特征提取，获得第三特征向量，并通过解码器中的十字交叉注意力网络基于时间维度和数据维度对第二特征向量和第三特征向量进行处理，获得第四特征向量；通过检测模型中的全连接层对第四特征向量进行处理，输出分布式光伏出力预测结果。根据本发明实施例的分布式光伏出力预测装置，包括：第一处理模块，用于获取第一气象数据和第二气象数据，并对第一气象数据和第二气象数据进行预处理，获得第一输入张量和第二输入张量；其中，第一气象数据表征在目标时间前的第一时间范围内的历史气象数据，第二气象数据表征在目标时间的预测气象数据；第二处理模块，用于将第一输入张量输入至检测模型中的编码器，经由编码器中的卷积神经网络对第一输入张量进行特征提取，获得第一特征向量，并通过编码器中的十字交叉注意力网络基于时间维度和数据维度对第一特征向量进行处理，获得第二特征向量；第三处理模块，用于将第二输入张量输入至检测模型中的解码器，经由解码器中的卷积神经网络对第二输入张量进行特征提取，获得第三特征向量，并通过解码器中的十字交叉注意力网络基于时间维度和数据维度对第二特征向量和第三特征向量进行处理，获得第四特征向量；第四处理模块，用于通过检测模型中的全连接层对第四特征向量进行处理，输出分布式光伏出力预测结果。一种电子设备，包括存储器和处理器，存储器存储有计算机程序，处理器执行计算机程序时实现以下步骤：获取第一气象数据和第二气象数据，并对第一气象数据和第二气象数据进行预处理，获得第一输入张量和第二输入张量；其中，第一气象数据表征在目标时间前的第一时间范围内的历史气象数据，第二气象数据表征在目标时间的预测气象数据；将第一输入张量输入至检测模型中的编码器，经由编码器中的卷积神经网络对第一输入张量进行特征提取，获得第一特征向量，并通过编码器中的十字交叉注意力网络基于时间维度和数据维度对第一特征向量进行处理，获得第二特征向量；将第二输入张量输入至检测模型中的解码器，经由解码器中的卷积神经网络对第二输入张量进行特征提取，获得第三特征向量，并通过解码器中的十字交叉注意力网络基于时间维度和数据维度对第二特征向量和第三特征向量进行处理，获得第四特征向量；通过检测模型中的全连接层对第四特征向量进行处理，输出分布式光伏出力预测结果。一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现以下步骤：获取第一气象数据和第二气象数据，并对第一气象数据和第二气象数据进行预处理，获得第一输入张量和第二输入张量；其中，第一气象数据表征在目标时间前的第一时间范围内的历史气象数据，第二气象数据表征在目标时间的预测气象数据；将第一输入张量输入至检测模型中的编码器，经由编码器中的卷积神经网络对第一输入张量进行特征提取，获得第一特征向量，并通过编码器中的十字交叉注意力网络基于时间维度和数据维度对第一特征向量进行处理，获得第二特征向量；将第二输入张量输入至检测模型中的解码器，经由解码器中的卷积神经网络对第二输入张量进行特征提取，获得第三特征向量，并通过解码器中的十字交叉注意力网络基于时间维度和数据维度对第二特征向量和第三特征向量进行处理，获得第四特征向量；通过检测模型中的全连接层对第四特征向量进行处理，输出分布式光伏出力预测结果。上述分布式光伏出力预测方法、装置、电子设备和介质，通过十字交叉注意力网络从时间维度和数据维度进行特征提取和特征融合，能够有效地对未来不同时间分辨率下的分布式光伏出力进行预测，从而提升模型对分布式光伏出力预测的效率和精度。本发明附加的方面和优点将在下面的描述中部分给出，部分将从下面的描述中变得明显，或通过本发明的实践了解到。附图说明图1为一个实施例中分布式光伏出力预测方法应用的模型框架；图2为一个实施例中分布式光伏出力预测方法的流程示意图；图3为又一个实施例中分布式光伏出力预测方法的流程示意图；图4为又一个实施例中分布式光伏出力预测方法的流程示意图；图5为一个实施例中十字交叉注意力网络的结构示意图；图6为一个实施例中分布式光伏出力预测方法的流程示意图；图7为一个实施例中第一特征图和第二特征图中目标位置的示意图；图8为一个实施例中第一特征图和第三特征图中目标位置的示意图；图9为一个实施例中分布式光伏出力预测装置的结构框图。具体实施方式下面详细描述本发明的实施例，所述实施例的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施例是示例性的，旨在用于解释本发明，而不能理解为对本发明的限制。本申请提供的分布式光伏出力预测方法可应用于图1所示的模型框架中，其中，主要包括编码器和解码器。解码器和编码器中均包含卷积神经网络和十字交叉注意力网络，卷积神经网络能够对输入的张量从时间维度和数据维度进行特征提取，十字交叉注意力网络能够从时间维度和数据维度对提取的特征进行融合和学习，再通过全连接层输出预测结果。以下对本申请实施例的技术方案的实现细节进行详细描述。在一个实施例中，如图2所示，提供了一种分布式光伏出力预测方法，以该方法应用于图1所示的模型框架为例进行说明，该分布式光伏出力预测方法可包括以下步骤：步骤S201，获取第一气象数据和第二气象数据，并对第一气象数据和第二气象数据进行预处理，获得第一输入张量和第二输入张量。在分布式光伏出力预测中，光伏发电和气象条件非常相关，但在实际场景中，分布式光伏发电的影响因素众多，同时存在随机性的影响，例如房屋或者物体的遮挡、未知的变化等，导致在实际应用中，预测模型的精度较低，因此，在进行分布式光伏出力预测的过程中，需要充分利用历史发电功率以及特征数据，另外还需要输入未来的预测气象数据。这里，根据数据的时间范围将数据划分为两部分，其中，将在目标时间前的第一时间范围内的历史气象数据确定为第一气象数据，需要说明的是，这里的历史气象数据包括了历史的实况气象数据和历史发电功率，例如将目标时间前十天的气象数据和发电功率确定为第一气象数据，将目标时间的预测气象数据确定为第二气象数据。需要说明的是，目标时间是指预测未来的处理曲线的时间范围，也就是模型预测的是目标时间对应的光伏出力。在实际应用中，获取的第一气象数据和第二气象数据往往是杂乱的，可能会存在数据的格式不相同、数据类型不相同等情况，基于此，需要对第一气象数据和第二气象数据进行预处理，有利于提高后续对数据的处理效率。在对第一气象数据和第二气象数据进行预处理之后，从第一气象数据和第二气象数据中获得第一输入张量和第二输入张量。参见图1所示，模型的输入包括两部分，分别为编码器的输入和解码器的输入，其中，第一输入张量Xen为编码器的输入，第二输入张量Xde为解码器的输入。在一个实施例中，如图3所示，对第一气象数据和第二气象数据进行预处理，获得第一输入张量和第二输入张量，包括：步骤S301，对第一气象数据进行预处理，获得第一输入张量，并对第二气象数据进行预处理，获得第三输入张量。步骤S302，根据第一输入张量中的至少部分以及第三输入张量确定第二输入张量。在实际应用中，第一输入张量Xen和第二输入张量Xde的构成不相同。在一种可行的方式中，第一输入张量Xen是对第一气象数据进行预处理后生成的，也就是编码器的输入为在目标时间前的第一时间范围内的历史数据，第二输入张量Xde是第一输入张量中的部分和第三输入张量生成的，其中，第一输入张量中的部分为在目标时间前的第二时间范围内对应的张量，第三输入张量是经过对第二气象数据进行预处理后生成的，也就是编码器的输入为预测气象数据和第二时间范围内的历史数据。可以理解的，由于第一输入张量Xen和第二输入张量Xde的构成不相同，第一输入张量Xen和第二输入张量Xde的数据大小是不相同的，其中，第一输入张量Xen的大小为，第二输入张量Xde的大小为，N为样本个数，C为每个周期下的点数或频率，比如分布式光伏用户日采集点数为96，Len为编码器输入的序列长度，den为编码器输入的变量个数，Lde为解码器输入的序列长度，dde为解码器输入的变量个数，在实际应用中，den和dde的值不一定相同。在一个实施例中，如图4所示，对第一气象数据和第二气象数据进行预处理，包括：步骤S401，通过嵌入操作将类型变量转换为第二数值变量。这里，从数据类型上对第一气象数据和第二气象数据进行分类，可以将第一气象数据和第二气象数据分为类型变量和数值变量，也就是第一气象数据和第二气象数据分别包括类型变量和数值变量。数据的数值变量可以包含温度、湿度、太阳辐照度等，数据的类型变量可以包括天气。在本实施例中，为了对数值变量进行区分，这里用第一数值变量代替第一气象数据和第二气象数据中原本含有的数值变量。通过嵌入操作将分类变量转换为对应的第二数值变量，将分类变量数值化，使得分类变量能够被模型进行处理和学习。步骤S402，将第一数值变量和第二数值变量进行拼接处理，以组装成相应的输入张量。这里，拼接处理用于拼接多个数值变量，其中，在拼接过程中并不会改变现有的变量，会生成完成拼接后的处理结果，从而组装成相应的输入张量。具体地，对第一气象数据中的分类变量进行嵌入处理，得到第二数值变量，将第一气象数据中的第一数值变量和第二数值变量进行拼接处理，将完成拼接后的处理结果确定为第一输入张量。对第二气象数据中的分类变量进行嵌入处理，得到第二数值变量，将第一气象数据中的第一数值变量和第二数值变量进行拼接处理，将完成拼接后的处理结果确定为第三输入张量，再将第一输入张量中属于在目标时间前第二范围的部分和第三输入张量组成第二输入张量。通过上述步骤S401和S402对第一气象数据和第二气象数据进行预处理，能够解决光伏预测输入数据不统一的问题，实现对不同类型数据输入的统一。在一个实施例中，模型可以实现多用户的分布式光伏出力预测，在这种情况下，需要确定用户标识，其中，这里的用户标识可以为需要进行光伏出力预测的用户的用户标识，再对用户标识进行嵌入操作，使得用户标识能够并入第一输入张量和第二输入张量，从而可以将预测结果和用户进行关联。步骤S202，将第一输入张量输入至检测模型中的编码器，经由编码器中的卷积神经网络对第一输入张量进行特征提取，获得第一特征向量，并通过编码器的十字交叉注意力网络基于时间维度和数据维度对第一特征向量进行处理，获得第二特征向量。在编码器部分，首先将第一输入张量Xen输入到检测模型中的编码器，经过编码器中的卷积神经网络对第一输入张量Xen进行特征提取，获得第一特征向量He1，其中，卷积神经网络是从数据维度和时间维度这两个维度对第一输入Xen进行特征提取，He1的大小为。再将第一特征向量He1输入到十字交叉注意力网络中，十字交叉注意力网络能够同时从时间维度和数据维度对特征进行融合和学习，获得第二特征向量Eout1，第二特征向量Eout1的大小为，其中，第二特征向量Eout1是编码器的输出。在实际应用中，卷积神经网络的主干网络不作限制，可以根据数据的情况，选取不同的主干网络。在实际应用中，从数据维度对第一输入张量Xen进行特征提取，可以全面提取分布式光伏出力的各个影响因素的特征，从而可以有效提升预测模型的预测精度。需要说明的是，卷积网络是对某个维度的特征进行提取，提取到的特征是属于一个维度的特征，也就是第一特征向量He1分别包含了从数据维度提取的特征和从时间维度提取的特征，但是在第一特征向量He1中并没有将时间维度提取的特征和数据维度提取的特征进行关联，而十字交叉注意力网络能够将特征进行融合和学习，也就是第二特征向量Eout1时间维度和数据维度关联起来，从而可以同时基于时间维度和数据维度进行光伏出力预测。步骤S203，将第二输入张量输入至检测模型中的解码器，经由解码器中的卷积神经网络对第二输入张量进行特征提取，获得第三特征向量，并通过解码器中的十字交叉注意力网络基于时间维度和数据维度对第二特征向量和第三特征向量进行处理，获得第四特征向量。在解码器部分，首先将第二输入张量Xde输入至检测模型中的解码器，经过编码器中的卷积神经网络对第二输入张量Xde进行特征提取，获得第三特征向量Hd1，其中，卷积神经网络是从数据维度和时间维度这两个维度对第二输入张量Xde进行特征提取，Hd1的大小为。与编码器的十字交叉注意力网络不同的是，解码器的十字交叉注意力网络的输入是第二特征向量Eout1和第三特征向量Hd1。将第三特征向量Hd1和编码器输出的Eout1进行拼接处理，将拼接完成的处理结果作为编码器的十字交叉注意力网络的输入，十字交叉注意力网络能够同时从时间维度和数据维度对特征进行融合和学习，获得第四特征向量Eout2，其中，第四特征向量Eout2为解码器的输出。在实际应用中，从数据维度对第二输入张量Xde进行特征提取，可以全面提取分布式光伏出力的各个影响因素的特征，从而可以有效提升预测模型的预测精度。需要说明的是，卷积网络是对某个维度的特征进行提取，提取到的特征是属于一个维度的特征，也就是第三特征向量Hd1分别包含了从数据维度提取的特征和从时间维度提取的特征，但是在第三特征向量Hd1中并没有将时间维度提取的特征和数据维度提取的特征进行关联，而十字交叉注意力网络能够将特征进行融合和学习，也就是第四特征向量Eout2将时间维度和数据维度关联起来，从而可以同时基于时间维度和数据维度进行光伏出力预测。可以理解的，在进行分布式光伏出力预测中，光伏出力是受到不同的外在因素影响的，导致预测模型的预测精度较低，因此，在预测的过程中，需要充分利用历史发电功率和气象数据，提取外在的影响分布式光伏出力的特征，从而提升预测模型的预测精度，需要说明的是，这里提取外在的影响分布式光伏出力的特征实质上是从数据维度对数据的特征进行提取。同时，分布式光伏出力具有一定的周期性，比如连续几天的天气相似，则得到相似的光伏出力曲线。而且，每天同一时刻的光伏出力值极有可能相同或相近，因此从时间和数据两个维度上进行特征提取，再将提取到的特征用于模型预测可以提升预测模型的精度。预测模型在预测未来时间段的出力曲线时，需要输入未来时间段的气象预报数据，但是气象预报数据存在一定的误差，因此，历史的实况气象数据是非常重要的一部分数据，如果对历史的实况气象数据进行充分的特征提取，可以对未来时间段的气象数据起到修正的作用，从而可以实现预测模型的精度提升。同时，气象数据在时间上也存在关联，前一段时间的天气对未来的天气会产生不同的影响，因此在时间维度上进行特征的提取，在一定程度上可以解决未来时间段的气象预报数据不准确性。因此，在分布式光伏出力预测的过程中，不仅是与预测时间点的气象数据有关，同时和历史的气象数据或历史的处理曲线有关，而在一般分布式光伏出力预测方法中，采用传统的机器学习方法，以回归的方式进行光伏出力预测，但是该方式依赖于输入的特征，而特征是通过人工的方法提取得到的，因此特征提取的方式非常主观，难以提取到有效的特征，导致预测模型的预测精度较低。另外，在人工特征提取的过程中，对历史数据序列的特征难以进行有效的提取，比如无法有效的对预测时间点前96点的温度值的特征进行提取，导致在预测模型的学习任务中，无法有效地对历史数据序列进行充分学习，降低预测模型的预测精度。最后，通过人工特征提取的方式，无法从时间和数据两个维度进行特征提取，因此直接导致预测模型对某些特征学习不充分，降低了预测模型的预测精度。而对于基于深度学习的分布式光伏出力预测的方法，基本上都是序列预测的方法，主要考虑对历史数据序列进行特征提取，并未同时对时间和数据维度上进行特征的提取，同样也导致预测模型的精度降低。而在本实施例的步骤S202和步骤S203中的十字交叉注意力网络能够同时考虑到时间维度和数据维度两个方向的特征提取和融合，从而提高预测模型的预测精度，同时还避免了人工进行特征提取的过程。如图5所示，图5示出了十字交叉注意力网络的结构示意图，在图5中分别对十字交叉注意力网络的输入数据进行5个处理步骤，其中，图5中的、、、、分别对应一个处理步骤。下面结合图6所示的十字交叉注意力网络基于时间维度和数据维度对输入的特征向量进行处理的流程图进行说明。如图6所示，十字交叉注意力网络基于时间维度和数据维度对输入的特征向量进行处理的流程包括：步骤S601，对输入的特征向量进行降维处理，得到第一特征图、第二特征图和第三特征图。这里，对应于图5中的降维处理，具体地，将三维张量H进行降维处理，将高位数据转化为低维数据，得到第一特征图Q、第二特征图K和第三特征图V。在一个实施例中，采用1×1的卷积核对三维张量H进行降维处理，其中，1×1的卷积核可以增加网络的非线性能力，提高网络的表达能力。步骤S602，根据第一特征图中每个元素的目标位置，在第二特征图中提取对应的第五特征向量，并计算第一特征图中每个元素与对应的第五特征向量的相似度，再进行归一化指数函数权重计算，得到第一特征图中每个元素对应的权重向量。这里，对应的是图5中的相似度计算和的处理。第一特征图Q中的每个元素对应的是一个通道维向量C＇，下面以十字交叉注意力网络对第一特征图Q中的一个元素的处理进行说明。假设第一特征图Q中的元素Qu对应目标位置u，其中，这里的目标位置u实质上为元素Qu在第一特征图Q中的位置。根据元素Qu对应的目标位置u，在第二特征图K中提取对应的第五特征向量，在实际应用中，第五特征向量/＞的形状为十字交叉形状，其中，目标位置u在第五特征向量/＞的十字的中心位置。下面对在第二特征图K中提取对应的第五特征向量进行详细说明。参照图7所示，元素Qu在第一特征图Q中的位置为目标位置u，对应的位置用坐标表示为，也就是元素Qu在第一特征图Q中的第二行第二列的交叉位置，在第二特征图K中首先找到同样的目标位置u，也就是第二特征图K的第二行第二列的交叉位置，将第二特征图K中目标位置u所在的一行和一列上的多个元素提取为第五特征向量，其中，目标位置u所在的一行和一列的交叉位置上的元素仅取一次，也就是在目标位置u的元素仅取一次，共取得H+W-1个向量。在获取第五特征向量之后，计算第五特征向量/＞和元素Qu之间的相似度，在实际应用中，可以通过多种方式计算两个向量之间的相似度，再对第五特征向量和元素Qu之间的相似度进行归一化指数函数权重计算，得到元素Qu对应的权重向量Au。步骤S603，根据第一特征图中每个元素的目标位置，在第三特征图中提取对应的第六特征向量，并将第一特征图中每个元素对应的第六特征向量与对应的权重向量相乘，得到加权特征向量。这里，对应的是图5中的聚合处理。同样以十字交叉注意力网络对第一特征图Q中的一个元素的处理进行说明。假设第一特征图Q中的元素Qu对应目标位置u，其中，这里的目标位置u实质上为元素Qu在第一特征图Q中的位置。根据元素Qu对应的目标位置u，在第三特征图V中提取对应的第六特征向量Vu，在实际应用中，第六特征向量的形状Vu与第五特征向量的形状一样，均为十字交叉形状，其中，目标位置u在第六特征向量Vu的十字的中心位置。下面对在第三特征图V中提取对应的第六特征向量Vu进行详细说明。参照图8所示，元素Qu在第一特征图Q中的位置为目标位置u，对应的位置用坐标表示为，也就是元素Qu位于第一特征图Q中的第二行第二列的交叉位置，在第三特征图V中首先找到同样的目标位置u，也就是第三特征图V的第二行第二列的交叉位置，将第三特征图V中目标位置u所在的一行行和一列上的多个元素提取为第六特征向量Vu，其中，目标位置u所在的一行和一列的交叉位置上的元素仅取一次，也就是在目标位置u的元素仅取一次，共取得H+W-1个向量。将第六特征向量Vu和元素Qu对应的权重向量Au相乘，得到加权后的特征向量Vu＇。在实际应用中第一特征图Q中存在多个元素，对第一特征图Q中的所有元素均进行上述步骤S602和步骤S603的处理，得到每个位置对应的加权后的特征向量。步骤S604，将第一特征图中每个元素对应的加权特征向量与输入的特征向量进行残差相加。这里，对应的是图5中的残差相加。具体地，在确定第一特征图中每个元素对应的加权特征向量之后，将第一特征向量中每个元素对应的加权特征向量与输入的特征向量H进行残差相加，其中，十字交叉注意力网络的输出H＇=CCAttention+H，从而得到十字交叉注意力网络的输出H＇。步骤S204，通过检测模型中的全连接层对第四特征向量进行处理，输出分布式光伏出力预测结果。在解码器输出之后，通过检测模型中的全连接层来输出分布式光伏出力预测结果，其中，输入到全连接层的第四特征向量Eout2能够将特征从时间维度和数据维度关联起来，从而在全连接层预测的过程中可以同时考虑到时间维度和数据维度，实现高精度的分布式光伏出力预测。在实际应用中，检测模型除了能够保证高精度的预测之外，检测模型还能够基于深度网络实现端到端的预测，对于序列预测问题能够快速进行推理，例如，利用检测模型预测未来3天的分布式光伏出力，可以通过一次输入即可输出未来3天的分布式光伏出力曲线，不需要重复输入多次数据。另外，还可以就多用户构建同一个预测模型，利用一个预测模型实现每个用户的分布式光伏出力预测，例如，以台区为对象构建预测模型，利用构建的预测模型实现台区下所有用户的分布式光伏出力预测。在利用预测模型进行分布式光伏出力预测之前，还需要对模型进行训练。在训练阶段中，需要构建训练数据集D={Xen，Xde；Y}，其中，Xen为编码器的输入数据，Xde为解码器的输入数据，Y为对应的光伏出力图曲线，将训练数据集输入到模型中，并通过自适应矩估计优化器和均方误差损失函数对模型进行训练，最终可以训练得到预测模型。在上述分布式光伏出力预测方法中，对输入预测模型的数据进行处理，实现对不同类型数据的统一，通过卷积神经网络对数据的特征进行提取，可以从时间维度和数据维度提取数据的特征，再通过十字交叉注意力网络实现特征的自动提取和融合，从时间和数据两个维度上同时进行特征的学习，能够提升预测模型的学习能力和预测精度。在一个实施例中，提供一种分布式光伏出力预测装置，参考图9所示，该分布式光伏出力预测装置900可包括：第一处理模块901、第二处理模块902、第三处理模块903和第四处理模块904。其中，第一处理模块901用于获取第一气象数据和第二气象数据，并对第一气象数据和第二气象数据进行预处理，获得第一输入张量和第二输入张量；其中，第一气象数据表征在目标时间前的第一时间范围内的历史气象数据，第二气象数据表征在目标时间的预测气象数据；第二处理模块902用于将第一输入张量输入至检测模型中的编码器，经由编码器中的卷积神经网络对第一输入张量进行特征提取，获得第一特征向量，并通过编码器中的十字交叉注意力网络基于时间维度和数据维度对第一特征向量进行处理，获得第二特征向量；第三处理模块903用于将第二输入张量输入至检测模型中的解码器，经由解码器中的卷积神经网络对第二输入张量进行特征提取，获得第三特征向量，并通过解码器中的十字交叉注意力网络基于时间维度和数据维度对第二特征向量和第三特征向量进行处理，获得第四特征向量；第四处理模块904用于通过检测模型中的全连接层对第四特征向量进行处理，输出分布式光伏出力预测结果。进一步地，第一处理模块901具体用于，对第一气象数据进行预处理，获得第一输入张量，并对第二气象数据进行预处理，获得第三输入张量；根据第一输入张量中的至少部分以及第三输入张量确定第二输入张量。进一步地，第一气象数据和第二气象数据分别包括类型变量和第一数值变量，第一处理模块901具体用于，通过嵌入操作将类型变量转换为第二数值变量；将第一数值变量和第二数值变量进行拼接处理，以组装成相应的输入张量。进一步地，第一处理模块901还用于，确定用户标识，并对用户标识进行嵌入操作，以便将用户标识加入第一输入张量和第二输入张量。进一步地，第二处理模块902和第三处理模块903具体用于，对输入的特征向量进行降维处理，得到第一特征图、第二特征图和第三特征图；根据第一特征图中每个元素的目标位置，在第二特征图中提取对应的第五特征向量，并计算第一特征图中每个元素与对应的第五特征向量的相似度，再进行归一化指数函数权重计算，得到第一特征图中每个元素对应的权重向量；其中，第五特征向量的形状为十字交叉形状；根据第一特征图中每个元素的目标位置，在第三特征图中提取对应的第六特征向量，并将第一特征图中每个元素对应的第六特征向量与对应的权重向量相乘，得到加权特征向量；其中，第六特征向量的形状为十字交叉形状；将第一特征图中每个元素对应的加权特征向量与输入的特征向量进行残差相加。进一步地，采用1×1卷积矩阵对输入的特征向量进行降维处理。进一步地，第二处理模块902具体用于，将位于第二特征图中目标位置所在的行和列上的多个元素确定为第五特征向量；其中，行与列交叉位置处对应的元素仅取一次；第三处理模块903具体用于，将位于第三特征图中目标位置所在的行和列上的多个元素确定为第六特征向量；其中，行与列交叉位置处对应的元素仅取一次。关于分布式光伏出力预测装置的具体限定可以参见上文中对于分布式光伏出力预测方法的限定，在此不再赘述。上述分布式光伏出力预测装置中的各个模块可全部或部分通过软件、硬件及其他组合来实现。上述各模块可以硬件行驶内嵌于或独立于计算机设备中的处理器中，也可以以软件行驶存储于计算机设备中的存储器中，以便于处理器调用执行以上各个模块对应的操作。在一个实施例中，提供了一种电子设备，包括存储器和处理器，存储器存储有计算机程序，处理器执行计算机程序时实现一种分布式光伏出力预测方法。在一个实施例中，提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时以实现一种分布式光伏出力预测方法。需要说明的是，在流程图中表示或在此以其他方式描述的逻辑和/或步骤，例如，可以被认为是用于实现逻辑功能的可执行指令的定序列表，可以具体实现在任何计算机可读介质中，以供指令执行系统、装置或设备使用，或结合这些指令执行系统、装置或设备而使用。就本说明书而言，"计算机可读介质"可以是任何可以包含、存储、通信、传播或传输程序以供指令执行系统、装置或设备或结合这些指令执行系统、装置或设备而使用的装置。计算机可读介质的更具体的示例包括以下：具有一个或多个布线的电连接部，便携式计算机盘盒，随机存取存储器，只读存储器，可擦除可编辑只读存储器，光纤装置，以及便携式光盘只读存储器。另外，计算机可读介质甚至可以是可在其上打印所述程序的纸或其他合适的介质，因为可以例如通过对纸或其他介质进行光学扫描，接着进行编辑、解译或必要时以其他合适方式进行处理来以电子方式获得所述程序，然后将其存储在计算机存储器中。应当理解，本发明的各部分可以用硬件、软件、固件或它们的组合来实现。在上述实施方式中，多个步骤或方法可以用存储在存储器中且由合适的指令执行系统执行的软件或固件来实现。例如，如果用硬件来实现，和在另一实施方式中一样，可用本领域公知的下列技术中的任一项或他们的组合来实现：具有用于对数据信号实现逻辑功能的逻辑门电路的离散逻辑电路，具有合适的组合逻辑门电路的专用集成电路，可编程门阵列，现场可编程门阵列等。在本说明书的描述中，参考术语“一个实施例”、“一些实施例”、“示例”、“具体示例”、或“一些示例“等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括至少一个该特征。在本发明的描述中，“多个”的含义是至少两个，例如两个，三个等，除非另有明确具体的限定。尽管上面已经示出和描述了本发明的实施例，可以理解的是，上述实施例是示例性的，不能理解为对本发明的限制，本领域的普通技术人员在本发明的范围内可以对上述实施例进行变化、修改、替换和变型。
