标题title
无线电磁波引导的远程手术系统
摘要abst
本发明涉及医疗技术领域，尤其为无线电磁波引导的远程手术系统，包括：图像采集模块：用于采集手术侧手术图像并上传至操作侧；指令采集模块：用于采集操作侧手术指令；图像分析模块：用于根据接收的手术指令对采集的手术图像进行分析获取手术位置；手术定位模块：用于通过发射无线电磁波对各手术位置进行定位；位置修正模块：用于对定位的手术位置根据图像分析模块分析的手术位置进行比对修正；指令生成模块：用于根据定位的手术位置生成手术设备的执行指令；设备执行模块：用于控制手术设备执行指令生成模块上传的指令。本发明能够通过发射无线电磁波对不同深度的手术位置以及手术工具的位置进行定位和引导，提升远程手术的效率成功率。
权利要求书clms
1.无线电磁波引导的远程手术系统，其特征在于：包括：图像采集模块：用于采集手术侧手术图像并上传至操作侧；指令采集模块：用于采集操作侧手术指令；图像分析模块：用于根据接收的手术指令对采集的手术图像进行分析获取手术位置；手术定位模块：用于通过发射无线电磁波对各手术位置进行定位；位置修正模块：用于对定位的手术位置根据图像分析模块分析的手术位置进行比对修正；指令生成模块：用于根据定位的手术位置生成手术设备的执行指令；设备执行模块：用于控制手术设备执行指令生成模块上传的指令。2.根据权利要求1所述的无线电磁波引导的远程手术系统，其特征在于：所述图像采集模块通过多个摄像头采集手术侧图像信息，并对手术侧图像信息进行融合上传至操作侧显示屏进行融合显示。3.根据权利要求1所述的无线电磁波引导的远程手术系统，其特征在于：所述图像分析模块基于预先上传的手术方案分析获得各手术位置。4.根据权利要求3所述的无线电磁波引导的远程手术系统，其特征在于：所述手术定位模块中，通过手术工具中的加速度传感器和磁传感器采集手术工具当前位置坐标。5.根据权利要求4所述的无线电磁波引导的远程手术系统，其特征在于：所述手术工具的定位步骤如下：；；；；其中，、/＞、/＞分别为测点的倾角、方位角和工具面角，/＞、/＞、/＞为加速度传感器所在轴的3个分量测量值，/＞、/＞、/＞为地磁场的3个分量测量值，/＞为重力加速度值；所述手术工具移动过程中，将相邻测点的姿态值的平均值作为手术工具的姿态值计算直线段，设第个测点坐标/＞，其计算如下：；；；其中，表示第/＞个测点的倾角，/＞表示第/＞个测点的方位角，/＞表示第/＞个测点的倾角，/＞表示第/＞个测点的方位角，/＞为第/＞个测点和第/＞个测点之间的距离，/＞为主设计方位角。6.根据权利要求4所述的无线电磁波引导的远程手术系统，其特征在于：所述手术定位模块中，通过发射无线电磁波对图像分析模块中获取的各手术位置进行定位。7.根据权利要求6所述的无线电磁波引导的远程手术系统，其特征在于：所述定位过程中，通过三边定位算法对手术位置进行初步定位，并通过卡尔曼滤波算法对手术位置进行手术位置的定位优化。8.根据权利要求7所述的无线电磁波引导的远程手术系统，其特征在于：所述手术定位模块中的手术位置定位步骤如下：通过四点空间定位算法进行手术位置定位：；其中，为手术位置坐标，/＞，/＞，/＞，/＞分别为四个无线电磁波发射器的位置坐标，/＞、/＞、/＞、/＞分别为手术位置坐标距离四个无线电磁波发射器的距离；计算获得手术位置坐标，其中：；、/＞分别为坐标简化矩阵：；；通过卡尔曼滤波算法进行定位调整，设随机线性离散的手术位置定位系统中的当前位置状态向量，系统过程随机噪声/＞，系统状态转移矩阵/＞，噪声输入矩阵/＞，系统观测值/＞，观测矩阵/＞，观测噪声/＞，则状态方差和观测方程为：；；其中，表示上一位置状态向量；系统过程噪声方差正定，观测噪声方差/＞非负定，卡尔曼滤波估计过程如下：；其中，为位置状态一步预测值，/＞为上一位置状态估计值；；其中，为当前位置状态估计值；/＞为滤波增益矩阵；；/＞其中，为一步预测误差方差阵；右上角/＞表示转置矩阵；；；其中，为当前估计误差方差阵；变换得到：；通过上式得到调整后的手术位置状态估计值。9.根据权利要求8所述的无线电磁波引导的远程手术系统，其特征在于：所述位置修正模块对手术定位模块中定位的各手术位置进行定位修正，并根据各手术位置的手术顺序依次记录和上传至指令生成端。10.根据权利要求9所述的无线电磁波引导的远程手术系统，其特征在于：所述指令生成模块根据所述手术工具的定位坐标、各手术位置的定位坐标以及手术顺序生成手术设备的执行指令。
说明书desc
技术领域本发明涉及医疗技术领域，尤其是无线电磁波引导的远程手术系统。背景技术远程手术是通过计算机技术、遥感、遥测、遥控技术为依托，大医院或专科医疗中心的专家，对医疗条件较差的医院中的患者进行远距离手术指导，从而保证手术的顺利完成。传统通过术前目测，凭医生的经验和术中触觉进行判断的方法不能很好的适用于远程手术中，且即使术前参照检查数据，也可能由于记忆模糊、图像误差或视觉误差等原因，无法在术中准确定位，目前在执行远程手术时，一般通过拍摄到的二维图像来展示手术状况。但是，由于远程手术涉及针对患者血管的手术操作，而人体血管通路较为复杂，仅仅根据拍摄到的图像难以直观地掌握当前患者的状况以及手术器械的具体位置，进而影响手术效果，严重时可能会导致医疗事故。故本发明提出无线电磁波引导的远程手术系统，能够通过发射无线电磁波对不同深度的手术位置以及手术工具的位置进行定位和引导，提升远程手术的成功率。发明内容本发明的目的是通过提出无线电磁波引导的远程手术系统，以解决上述背景技术中提出的缺陷。本发明采用的技术方案如下：提供无线电磁波引导的远程手术系统，包括：图像采集模块：用于采集手术侧手术图像并上传至操作侧；指令采集模块：用于采集操作侧手术指令；图像分析模块：用于根据接收的手术指令对采集的手术图像进行分析获取手术位置；手术定位模块：用于通过发射无线电磁波对各手术位置进行定位；位置修正模块：用于对定位的手术位置根据图像分析模块分析的手术位置进行比对修正；指令生成模块：用于根据定位的手术位置生成手术设备的执行指令；设备执行模块：用于控制手术设备执行指令生成模块上传的指令。作为本发明的一种优选技术方案：所述图像采集模块通过多个摄像头采集手术侧图像信息，并对手术侧图像信息进行融合上传至操作侧显示屏进行融合显示。作为本发明的一种优选技术方案：所述图像分析模块基于预先上传的手术方案分析获得各手术位置。作为本发明的一种优选技术方案：所述手术定位模块中，通过手术工具中的加速度传感器和磁传感器采集手术工具当前位置坐标。作为本发明的一种优选技术方案：所述手术工具的定位步骤如下：；；；；其中，、/＞、/＞分别为测点的倾角、方位角和工具面角，/＞、/＞、/＞为加速度传感器所在轴的3个分量测量值，/＞、/＞、/＞为地磁场的3个分量测量值，/＞为重力加速度值；所述手术工具移动过程中，将相邻测点的姿态值的平均值作为手术工具的姿态值计算直线段，设第个测点坐标/＞，其计算如下：；；；其中，表示第/＞个测点的倾角，/＞表示第/＞个测点的方位角，/＞表示第/＞个测点的倾角，/＞表示第/＞个测点的方位角，/＞为第/＞个测点和第/＞个测点之间的距离，/＞为主设计方位角。作为本发明的一种优选技术方案：所述手术定位模块中，通过发射无线电磁波对图像分析模块中获取的各手术位置进行定位。作为本发明的一种优选技术方案：所述定位过程中，通过三边定位算法对手术位置进行初步定位，并通过卡尔曼滤波算法对手术位置进行手术位置的定位优化。作为本发明的一种优选技术方案：所述手术定位模块中的手术位置定位步骤如下：通过四点空间定位算法进行手术位置定位：；其中，为手术位置坐标，/＞，/＞，/＞，/＞分别为四个无线电磁波发射器的位置坐标，/＞、/＞、/＞、/＞分别为手术位置坐标距离四个无线电磁波发射器的距离；计算获得手术位置坐标，其中：；、/＞分别为坐标简化矩阵：/＞；；通过卡尔曼滤波算法进行定位调整，设随机线性离散的手术位置定位系统中的当前位置状态向量，系统过程随机噪声/＞，系统状态转移矩阵/＞，噪声输入矩阵/＞，系统观测值/＞，观测矩阵/＞，观测噪声，则状态方差和观测方程为：；；其中，表示上一位置状态向量；系统过程噪声方差正定，观测噪声方差/＞非负定，卡尔曼滤波估计过程如下：；其中，为位置状态一步预测值，/＞为上一位置状态估计值；；其中，为当前位置状态估计值；/＞为滤波增益矩阵；；其中，为一步预测误差方差阵；右上角/＞表示转置矩阵；；；其中，为当前估计误差方差阵；变换得到：；通过上式得到调整后的手术位置状态估计值。作为本发明的一种优选技术方案：所述位置修正模块对手术定位模块中定位的各手术位置进行定位修正，并根据各手术位置的手术顺序依次记录和上传至指令生成端。作为本发明的一种优选技术方案：所述指令生成模块根据所述手术工具的定位坐标、各手术位置的定位坐标以及手术顺序生成手术设备的执行指令。本发明提供的无线电磁波引导的远程手术系统，与现有技术相比，其有益效果有：本发明能够通过发射无线电磁波对不同深度的手术位置进行定位以及手术工具的位置和引导，并通过卡尔曼滤波算法提升定位精准度，按照手术顺序对手术位置进行引导，提升远程手术的效率成功率。附图说明图1为本发明优选实施例的系统框图。图中各个标记的意义为：100、图像采集模块；200、指令采集模块；300、图像分析模块；400、手术定位模块；500、位置修正模块；600、指令生成模块；700、设备执行模块。具体实施方式需要说明的是，在不冲突的情况下，本实施例中的实施例及实施例中的特征可以相互组合，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。参照图1，本发明优选实施例提供了无线电磁波引导的远程手术系统，包括：图像采集模块100：用于采集手术侧手术图像并上传至操作侧；指令采集模块200：用于采集操作侧手术指令；图像分析模块300：用于根据接收的手术指令对采集的手术图像进行分析获取手术位置；手术定位模块400：用于通过发射无线电磁波对各手术位置进行定位；位置修正模块500：用于对定位的手术位置根据图像分析模块300分析的手术位置进行比对修正；指令生成模块600：用于根据定位的手术位置生成手术设备的执行指令；设备执行模块700：用于控制手术设备执行指令生成模块600上传的指令。所述图像采集模块100通过多个摄像头采集手术侧图像信息，并对手术侧图像信息进行融合上传至操作侧显示屏进行融合显示。所述图像分析模块300基于预先上传的手术方案分析获得各手术位置。所述手术定位模块400中，通过手术工具中的加速度传感器和磁传感器采集手术工具当前位置坐标。所述手术工具的定位步骤如下：；；；；其中，、/＞、/＞分别为测点的倾角、方位角和工具面角，/＞、/＞、/＞为加速度传感器所在轴的3个分量测量值，/＞、/＞、/＞为地磁场的3个分量测量值，/＞为重力加速度值；所述手术工具移动过程中，将相邻测点的姿态值的平均值作为手术工具的姿态值计算直线段，设第个测点坐标/＞，其计算如下：/＞；；；其中，表示第/＞个测点的倾角，/＞表示第/＞个测点的方位角，/＞表示第/＞个测点的倾角，/＞表示第/＞个测点的方位角，/＞为第/＞个测点和第/＞个测点之间的距离，/＞为主设计方位角。在本实施例中，由于加速度传感器和磁传感器实时测量值可能存在噪声和误差，因此需要对测量值进行滤波和校准，以确保计算的准确性和可靠性。本实施例采用卡尔曼滤波技术为例：1、预测状态：；2、预测协方差：；3、计算卡尔曼增益：；4、更新状态：；5、更新协方差：；其中，加速度传感器和磁传感器实时测量值表示为向量：,将测量值表示为状态变量/＞，测量噪声表示为/＞，状态转移矩阵表示为/＞，状态噪声表示为/＞，测量矩阵表示为/＞,卡尔曼增益表示为/＞。状态变量/＞为：；其中，状态转移矩阵A描述的是手术工具姿态状态从一个时刻转移到下一个时刻的关系，其形式可以表示为：；其中，表示两次状态更新之间的时间间隔。测量矩阵H描述的是手术工具姿态状态与加速度传感器和磁传感器的测量值之间的关系，其形式可以表示为：；其中，、/＞、/＞分别表示手术工具姿态状态中的倾角、方位角和工具面角。所述手术定位模块400中，通过发射无线电磁波对图像分析模块300中获取的各手术位置进行定位。所述定位过程中，通过三边定位算法对手术位置进行初步定位，并通过卡尔曼滤波算法对手术位置进行手术位置的定位优化。所述手术定位模块400中的手术位置定位步骤如下：通过四点空间定位算法进行手术位置定位：；其中，为手术位置坐标，/＞，/＞，/＞，/＞分别为四个无线电磁波发射器的位置坐标，/＞、/＞、/＞、/＞分别为手术位置坐标距离四个无线电磁波发射器的距离；计算获得手术位置坐标，其中：；、/＞分别为坐标简化矩阵：；；通过卡尔曼滤波算法进行定位调整，设随机线性离散的手术位置定位系统中的当前位置状态向量，系统过程随机噪声/＞，系统状态转移矩阵/＞，噪声输入矩阵/＞，系统观测值/＞，观测矩阵/＞，观测噪声，则状态方差和观测方程为：；；其中，表示上一位置状态向量；系统过程噪声方差正定，观测噪声方差/＞非负定，卡尔曼滤波估计过程如下：；其中，为位置状态一步预测值，/＞为上一位置状态估计值；；/＞其中，为当前位置状态估计值；/＞为滤波增益矩阵；；其中，为一步预测误差方差阵；右上角/＞表示转置矩阵；；；其中，为当前估计误差方差阵；变换得到：；通过上式得到调整后的手术位置状态估计值。所述位置修正模块500对手术定位模块400中定位的各手术位置进行定位修正，并根据各手术位置的手术顺序依次记录和上传至指令生成端。所述指令生成模块600根据所述手术工具的定位坐标、各手术位置的定位坐标以及手术顺序生成手术设备的执行指令。本实施例中，远程手术进行之前，医生协商获得手术治疗方案，图像采集模块100采集手术侧病人手术部位图像，指令采集模块200可根据手术治疗方案生成预设的手术指令供医生选择，或根据操作侧医生发出的指令生成手术指令。当图像分析模块300接收到操作侧传递的手术指令时，如将手术刀从手术部位表面的定位位置一移动至定位位置二，对采集的手术图像进行分析获得手术图像中的定位位置一和定位位置二，并上传至手术定位模块400，手术定位模块400中通过发射无线电磁波对手术位置进行定位，无线电磁波通过调整发射波长对手术侧手术部位的表面或是内部均可进行引导定位。手术定位模块400分别对各种手术工具、定位位置一、定位位置二进行定位，其中，以目前需要用到的手术刀为例，手术刀中设置有加速度传感器和磁传感器，对于可能处于移动状态的手术刀进行定位：；；；；其中，、/＞、/＞分别为测点的倾角、方位角和工具面角，/＞、/＞、/＞为加速度传感器所在轴的3个分量测量值，/＞、/＞、/＞为地磁场的3个分量测量值，/＞为重力加速度值；手术工具移动过程中，将相邻测点的姿态值的平均值作为手术工具的姿态值计算直线段，设手术刀共有5个测点，则第2个测点坐标如下：/＞；；；其中，表示第/＞个测点的倾角，/＞表示第/＞个测点的方位角，/＞表示第/＞个测点的倾角，/＞表示第/＞个测点的方位角，/＞为第/＞个测点和第/＞个测点之间的距离，/＞为主设计方位角。再通过四点定位法对手术位置一和手术位置二进行定位：；；其中，为手术位置一的坐标，/＞为手术位置二的坐标，/＞，，/＞，/＞分别为四个发射器位置坐标，/＞、/＞、/＞、/＞分别为手术位置一的坐标距离四个无线电磁波发射器的距离，/＞、/＞、/＞、/＞分别为手术位置二的坐标距离四个无线电磁波发射器的距离；算获得手术位置一的坐标和手术位置二坐标/＞，其中：；；A、B、C、D分别为坐标简化矩阵：；；；/＞；通过卡尔曼滤波算法进行定位调整，通过系统的初始值和/＞，根据第k时刻的观测值/＞，通过递推的方式推断出第k时刻的位置状态估计值/＞，获得调整后的定位位置一和定位位置二。基于上述定位算法对定位位置一和定位位置二分别进行定位，并与图像分析模块300分析的位置坐标进行比对修正，若存在定位偏差，则通过手术定位模块400重新进行定位，直至达到最小定位精度。定位完成后，指令生成模块600根据手术工具位置和定位位置一和定位位置二生成手术工具的执行指令，如将手术刀旋转30°后垂直向下移动10厘米至手术表面，再按照手术刀方向移动2厘米，设备执行模块700接收执行指令，控制手术刀按照上述的执行指令控制手术刀进行手术操作。对于本领域技术人员而言，显然本发明不限于上述示范性实施例的细节，而且在不背离本发明的精神或基本特征的情况下，能够以其他的具体形式实现本发明。因此，无论从哪一点来看，均应将实施例看作是示范性的，而且是非限制性的，本发明的范围由所附权利要求而不是上述说明限定，因此旨在将落在权利要求的等同要件的含义和范围内的所有变化囊括在本发明内。不应将权利要求中的任何附图标记视为限制所涉及的权利要求。此外，应当理解，虽然本说明书按照实施方式加以描述，但并非每个实施方式仅包含一个独立的技术方案，说明书的这种叙述方式仅仅是为清楚起见，本领域技术人员应当将说明书作为一个整体，各实施例中的技术方案也可以经适当组合，形成本领域技术人员可以理解的其他实施方式。
