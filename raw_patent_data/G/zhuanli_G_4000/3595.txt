标题title
一种主症兼症识别方法、系统及设备
摘要abst
本发明提供一种主症兼症识别方法、系统及设备。所述方法包括：获取目标信息，包括患者的症状及基本信息、中药处方中的各种中药；对基本信息下的每个症状与各种中药的直接因果效应进行求和以得到总值，判断该总值是否大于相应阈值，若是，判断相应症状为主症，若否，判断相应症状为疑似兼症；确定基本信息下的每个疑似兼症与各种中药的似然比之中的最大者，判断所述最大者是否大于相应阈值，若否，判断相应疑似兼症为兼症。所述系统包括对应实现上述各步骤的各个功能模块。所述设备：处理器执行存储器中保存的计算机程序时实现所述方法。根据本发明能够解决现有对于中药处方能够解决的症状和不能够解决的症状的识别环节耗时长，效率低的问题。
权利要求书clms
1.一种主症兼症识别方法，其特征在于，包括：获取目标信息，所述目标信息包括患者的症状、患者的基本信息以及中药处方所包含的各种中药；对所述基本信息下的每个症状与所述各种中药的直接因果效应进行求和以得到直接因果效应总值，并判断所述直接因果效应总值是否大于预定的直接因果效应总值阈值，若是，判断相应的症状为主症，若否，判断相应的症状为疑似兼症；确定所述基本信息下的每个疑似兼症与所述各种中药的似然比之中的最大者，并判断所述最大者是否大于预定的似然比阈值，若否，判断相应的疑似兼症为兼症。2.根据权利要求1所述的主症兼症识别方法，其特征在于，还包括：基于确定的所有主症获取主症序列，并输出所述主症序列，在所述主症序列中，各个主症按照所对应直接因果效应总值由大到小的顺序排列。3.根据权利要求1所述的主症兼症识别方法，其特征在于，还包括：基于确定的所有兼症获取兼症序列，并输出所述兼症序列，在所述兼症序列中，各个兼症按照所对应直接因果效应总值由小到大的顺序排列。4.根据权利要求1所述的主症兼症识别方法，其特征在于，所述直接因果效应和所述似然比均基于因果关系模型获取，所述因果关系模型的构建方法包括：获取预定体量的医案数据，每个医案数据均包括患者的症状、患者的基本信息以及中药处方所包含的各种中药；根据获取的所有医案数据获取不同基本信息下的各个症状与各种中药之间的因果关系图；根据获取的不同基本信息下的因果关系图、各个症状的出现概率以及各种中药的出现概率对机器学习模型进行训练，得到用于获取不同基本信息下的每个症状与每种中药的直接因果效应以及每个症状与每种中药的似然比的因果关系模型。5.根据权利要求4所述的主症兼症识别方法，其特征在于，所述医案数据满足以下条件：所述患者的症状包括患者的主诉症状和关联症状，主诉症状的数量不大于N1，每个主诉症状均具有关联症状，各个主诉症状的关联症状的平均数量不小于N1，主诉症状与关联症状的总数不大于N2；所述患者的症状包括客观诊断信息；所述中药处方至多包含N3种中药，每种中药的剂量均不超标。6.根据权利要求5所述的主症兼症识别方法，其特征在于，N1＝3；和/或，N2＝25；和/或，N3＝18；和/或，所述客观诊断信息所涉及的项目包括舌、面、脉、二便、饮食、睡眠和精神，若任一主诉症状与妇科相关，所述客观诊断信息还包括妇科客观信息。7.根据权利要求4所述的主症兼症识别方法，其特征在于，所述因果关系图包括由症状指向中药的因果路径、由症状指向症状的因果路径以及中药指向中药的因果路径。8.根据权利要求7所述的主症兼症识别方法，其特征在于，所述因果关系模型的构建方法还包括：对所述因果关系模型获取的每个症状与每种中药的直接因果效应进行异常检测，若检测出异常的直接因果效应，对所述因果关系图进行相应的修正，所述修正包括添加新的因果路径和删除不合理的因果路径；基于修正后的因果关系图以及相应基本信息下的各个症状的出现概率、各种中药的出现概率对所述因果关系模型进行修正，直至所述因果关系模型获取的每个症状与每种中药的直接因果效应均通过异常检测。9.一种主症兼症识别系统，其特征在于，包括：目标信息获取模块，用于获取目标信息，所述目标信息包括患者的症状、患者的基本信息以及中药处方所包含的各种中药；第一识别模块，用于对所述基本信息下的每个症状与所述各种中药的直接因果效应进行求和以得到直接因果效应总值，并判断所述直接因果效应总值是否大于预定的直接因果效应总值阈值，若是，判断相应的症状为主症，若否，判断相应的症状为疑似兼症；第二识别模块，用于确定所述基本信息下的每个疑似兼症与所述各种中药的似然比之中的最大者，并判断所述最大者是否大于预定的似然比阈值，若否，判断相应的疑似兼症为兼症。10.一种主症兼症识别设备，其特征在于，包括处理器和存储器，所述处理器执行所述存储器中保存的计算机程序时实现如权利要求1-8任一项所述的主症兼症识别方法。
说明书desc
技术领域本发明属于机器学习与中药方剂分析领域，更具体地，涉及一种主症兼症识别方法、系统及设备。背景技术在传统中医诊疗过程中，医生根据患者的描述，也就是临床上所谓的“主诉”，并结合自身知识确定患者的主要症状，即主症。在确定了患者的主症之后，医生接下来围绕主症向外辐射相关症状，并经过思辨，开具出能够解决患者主症及其相关症状的中药处方。然而，实际临床情况是十分复杂的，患者的症状往往多种多样，其中很多症状与医生所确定的主症之间并没有足够强度的因果关系，此时以主症为主要证据所开具的中药处方无法同时解决这类症状。基于上述背景，当医生为患者开具中药处方之后，医生还需要识别该中药处方能够解决的症状和不能够解决的症状，进而主要实现以下两个目的：一、如有必要，在现有中药处方的基础上进行中药加减操作，以解决现有中药处方所不能够解决的症状中的一个或多个；二、将现有中药处方能够解决的症状和不能够解决的症状对患者进行告知，以达到诊疗透明化以及提升患者诊疗体验的目的。然而，目前上述中药处方能够解决的症状和不能够解决的症状的识别环节完全依赖于医生根据自身知识来人工实现，由此导致该识别环节的耗时较长，效率较低。发明内容有鉴于此，本发明提供一种主症兼症识别方法、系统及设备。根据本发明的第一方面，提供一种主症兼症识别方法，该方法包括以下步骤：获取目标信息，所述目标信息包括患者的症状、患者的基本信息以及中药处方所包含的各种中药；对所述基本信息下的每个症状与所述各种中药的直接因果效应进行求和以得到直接因果效应总值，并判断所述直接因果效应总值是否大于预定的直接因果效应总值阈值，若是，判断相应的症状为主症，若否，判断相应的症状为疑似兼症；确定所述基本信息下的每个疑似兼症与所述各种中药的似然比之中的最大者，并判断所述最大者是否大于预定的似然比阈值，若否，判断相应的疑似兼症为兼症。作为可选的是，所述主症兼症识别方法还包括：基于确定的所有主症获取主症序列，并输出所述主症序列，在所述主症序列中，各个主症按照所对应直接因果效应总值由大到小的顺序排列。作为可选的是，所述主症兼症识别方法还包括：基于确定的所有兼症获取兼症序列，并输出所述兼症序列，在所述兼症序列中，各个兼症按照所对应直接因果效应总值由小到大的顺序排列。作为可选的是，所述直接因果效应和所述似然比均基于因果关系模型获取，所述因果关系模型的构建方法包括：获取预定体量的医案数据，每个医案数据均包括患者的症状、患者的基本信息以及中药处方所包含的各种中药；根据获取的所有医案数据获取不同基本信息下的各个症状与各种中药之间的因果关系图；根据获取的不同基本信息下的因果关系图、各个症状的出现概率以及各种中药的出现概率对机器学习模型进行训练，得到用于获取不同基本信息下的每个症状与每种中药的直接因果效应以及每个症状与每种中药的似然比的因果关系模型。作为可选的是，所述医案数据满足以下条件：所述患者的症状包括患者的主诉症状和关联症状，主诉症状的数量不大于N1，每个主诉症状均具有关联症状，各个主诉症状的关联症状的平均数量不小于N1，主诉症状与关联症状的总数不大于N2；所述患者的症状包括客观诊断信息；所述中药处方至多包含N3种中药，每种中药的剂量均不超标。作为可选的是，N1＝3；和/或，N2＝25；和/或，N3＝18；和/或，所述客观诊断信息所涉及的项目包括舌、面、脉、二便、饮食、睡眠和精神，若任一主诉症状与妇科相关，所述客观诊断信息还包括妇科客观信息。作为可选的是，所述因果关系图包括由症状指向中药的因果路径、由症状指向症状的因果路径以及中药指向中药的因果路径。作为可选的是，所述因果关系模型的构建方法还包括：对所述因果关系模型获取的每个症状与每种中药的直接因果效应进行异常检测，若检测出异常的直接因果效应，对所述因果关系图进行相应的修正，所述修正包括添加新的因果路径和删除不合理的因果路径；基于修正后的因果关系图以及相应基本信息下的各个症状的出现概率、各种中药的出现概率对所述因果关系模型进行修正，直至所述因果关系模型获取的每个症状与每种中药的直接因果效应均通过异常检测。根据本发明的第二方面，提供一种主症兼症识别系统，该系统包括以下功能模块：目标信息获取模块，用于获取目标信息，所述目标信息包括患者的症状、患者的基本信息以及中药处方所包含的各种中药；第一识别模块，用于对所述基本信息下的每个症状与所述各种中药的直接因果效应进行求和以得到直接因果效应总值，并判断所述直接因果效应总值是否大于预定的直接因果效应总值阈值，若是，判断相应的症状为主症，若否，判断相应的症状为疑似兼症；第二识别模块，用于确定所述基本信息下的每个疑似兼症与所述各种中药的似然比之中的最大者，并判断所述最大者是否大于预定的似然比阈值，若否，判断相应的疑似兼症为兼症。根据本发明的第三方面，提供一种主症兼症识别设备，该设备包括处理器和存储器，所述处理器执行所述存储器中保存的计算机程序时实现上述任一种主症兼症识别方法。本发明的有益效果在于：本发明的主症兼症识别方法，首先，获取目标信息，所述目标信息包括患者的症状、患者的基本信息以及中药处方所包含的各种中药；其次，对所述基本信息下的每个症状与所述各种中药的直接因果效应进行求和以得到直接因果效应总值，并判断所述直接因果效应总值是否大于预定的直接因果效应总值阈值，若是，判断相应的症状为主症，若否，判断相应的症状为疑似兼症；最后，确定所述基本信息下的每个疑似兼症与所述各种中药的似然比之中的最大者，并判断所述最大者是否大于预定的似然比阈值，若否，判断相应的疑似兼症为兼症。本发明的主症兼症识别方法在获取目标信息的基础上，基于直接因果效应总值对每个症状与中药处方所对应的中药组合的相关性进行量化，进而判断相应症状是中药处方所能够治疗的主症还是待进一步判断的疑似兼症；而后基于似然比对目标疑似兼症与中药处方中的每种中药的相关性进行量化，并基于获取到的目标疑似兼症与中药处方中的每种中药的似然比之中的最大者判断目标疑似兼症是否为中药处方无法覆盖治疗的兼症。由此可知，采用本发明的主症兼症识别方法，能够自动化且准确地识别出中药处方能够治疗的主症和中药处方无法覆盖治疗的兼症，从而在现有对于中药处方能够解决的症状和不能够解决的症状的识别环节中为医生提供参考，进而有效地减少主症兼症识别环节的耗时，提高主症兼症识别环节的效率。本发明的主症兼症识别系统和主症兼症识别设备与上述主症兼症识别方法属于一个总的发明构思，至少具有与上述主症兼症识别方法相同的有益效果，其有益效果在此不再赘述。本发明的其他特征和优点将在随后具体实施方式部分予以详细说明。附图说明本发明可以通过参考下文中结合附图所做出的描述而得到更好的理解，其中在所有附图中使用了相同或相似的附图标记来表示相同或者相似的部件。图1示出了根据本发明的实施例的主症兼症识别方法的实现流程图；图2示出了根据本发明的实施例的一个初始因果关系图；图3示出了根据本发明的实施例的另一个初始因果关系图；图4示出了根据本发明的实施例的主症兼症识别系统的结构框图。具体实施方式为了使所属技术领域的技术人员能够更充分地理解本发明的技术方案，在下文中将结合附图对本发明的示例性的实施方式进行更为全面且详细的描述。显然地，以下描述的本发明的一个或者多个实施方式仅仅是能够实现本发明的技术方案的具体方式中的一种或者多种，并非穷举。应当理解的是，可以采用属于一个总的发明构思的其他方式来实现本发明的技术方案，而不应当被示例性描述的实施方式所限制。基于本发明的一个或多个实施方式，本领域的普通技术人员在没有做出创造性劳动的前提下所获得的所有其他实施方式，都应当属于本发明保护的范围。实施例：图1示出了本发明实施例的主症兼症识别方法的实现流程图。参照图1，本发明实施例的主症兼症识别方法包括以下步骤：步骤S100、获取目标信息，所述目标信息包括患者的症状、患者的基本信息以及中药处方所包含的各种中药；步骤S200、对所述基本信息下的每个症状与所述各种中药的直接因果效应进行求和以得到直接因果效应总值，并判断所述直接因果效应总值是否大于预定的直接因果效应总值阈值，若是，判断相应的症状为主症，若否，判断相应的症状为疑似兼症；步骤S300、确定所述基本信息下的每个疑似兼症与所述各种中药的似然比之中的最大者，并判断所述最大者是否大于预定的似然比阈值，若否，判断相应的疑似兼症为兼症。具体地，本发明实施例中，患者的基本信息包括性别和年龄段。在步骤S200中，直接因果效应总值为相应性别与年龄段组合限定下的目标症状与中药处方中的各种中药的直接因果效应之和。在步骤S300中，似然比为相应性别与年龄段组合限定下的目标症状与相应中药的似然比。进一步地，本发明实施例的主症兼症识别方法还包括以下步骤：步骤S400、基于确定的所有主症获取主症序列，并输出所述主症序列，在所述主症序列中，各个主症按照所对应直接因果效应总值由大到小的顺序排列；步骤S500、基于确定的所有兼症获取兼症序列，并输出所述兼症序列，在所述兼症序列中，各个兼症按照所对应直接因果效应总值由小到大的顺序排列。具体地，本发明实施例中，一方面，在确定中药处方能够治疗的各个主症之后，按照与中药处方对应的中药组合的相关性由高到低的顺序输出各个主症的信息，以使患者更直观地了解中药处方的对症信息。另一方面，在确定中药处方无法治疗的各个兼症之后，按照与中药处方对应的中药组合的相关性由低到高的顺序输出各个兼症的信息。再进一步地，本发明实施例的步骤S300中，若所述最大者大于预定的似然比阈值，则判断相应的疑似兼症为主症关联症状；本发明实施例的主症兼症识别方法还包括以下步骤：步骤S600、基于确定的所有主症关联症状获取主症关联症状序列，并输出所述主症关联症状序列，在所述主症关联症状序列中，各个主症关联症状按照所对应直接因果效应总值由大到小的顺序排列。再进一步地，在本发明实施例的步骤S200中，所述直接因果效应和所述似然比均基于因果关系模型获取，所述因果关系模型的构建方法包括：获取预定体量的医案数据，每个医案数据均包括患者的症状、患者的基本信息以及中药处方所包含的各种中药；根据获取的所有医案数据获取不同基本信息下的各个症状与各种中药之间的因果关系图；根据获取的不同基本信息下的因果关系图、各个症状的出现概率以及各种中药的出现概率对机器学习模型进行训练，得到用于获取不同基本信息下的每个症状与每种中药的直接因果效应以及每个症状与每种中药的似然比的因果关系模型。具体地，本发明实施例中，所述获取预定体量的医案数据具体为：在预获取的第一体量的医案数据中筛选出符合条件的第二体量的医案数据，其中，筛选出的医案数据需满足以下条件：所述患者的症状包括患者的主诉症状和关联症状，主诉症状的数量不大于N1，每个主诉症状均具有关联症状，各个主诉症状的关联症状的平均数量不小于N1，主诉症状与关联症状的总数不大于N2；所述患者的症状包括客观诊断信息；所述中药处方至多包含N3种中药，每种中药的剂量均不超标。其中，N1＝3，N2＝25，N3＝18，所述客观诊断信息所涉及的项目包括舌、面、脉、二便、饮食、睡眠和精神，若任一主诉症状与妇科相关，所述客观诊断信息还包括月经和白带等妇科客观信息。在判断每种中药的剂量是否超标时，参考《中华人民共和国药典》。具体地，本发明实施例中，将筛选出的第二体量的医案数据按照不同的性别与年龄段组合划分为相应数量的医案数据集，即按照所属基本信息对所有医案数据进行划分。在获取每个基本信息下的医案数据集后，基于每个基本信息下的医案数据集获取每个基本信息下的因果关系图、各个症状的出现概率以及各种中药的出现概率。其中，所述因果关系图包括由症状指向中药的因果路径、由症状指向症状的因果路径以及中药指向中药的因果路径，所述因果关系图包括相应医案数据中出现过的每个症状和每种中药，其中，每个症状和每种中药均不重复出现。具体地，本发明实施例中，将筛选出的第二体量的医案数据按照不同的性别与年龄段组合划分为8个医案数据集。其中，性别包括男性和女性，年龄段包括少年期、青年期、中年期以及老年期，即性别与年龄段共有8种不同的组合。由于因果关系图的获取需要以足够大的基础医案数据为前提，本发明实施例将医案数据集的数据量下限设置为第三体量。在实际对第二体量的医案数据进行划分的过程中，若发现任一医案数据集的数据量小于第三体量，则不再根据不同的性别与年龄段组合对第二体量的医案数据进行划分，而是整体基于第二体量的医案数据获取因果关系图。相应地，对于基于该因果关系图训练获取的因果关系模型，当该因果关系模型被应用于获取每个症状与各种中药的直接因果效应以及每个疑似兼症与各种中药的似然比时，不再考虑患者的基本信息。再进一步地，本发明实施例中，所述因果关系模型的构建方法还包括：对所述因果关系模型获取的每个症状与每种中药的直接因果效应进行异常检测，若检测出异常的直接因果效应，对所述因果关系图进行相应的修正，所述修正包括添加新的因果路径和删除不合理的因果路径；基于修正后的因果关系图以及相应基本信息下的各个症状的出现概率、各种中药的出现概率对所述因果关系模型进行修正，直至所述因果关系模型获取的每个症状与每种中药的直接因果效应均通过异常检测。具体地，图2示出了本发明实施例的一个初始因果关系图。参照图2，该因果关系图包含三个节点，即咳嗽、声音嘶哑和百部。其中，咳嗽和声音嘶哑均为症状，百部为中药。a为咳嗽指向声音嘶哑的因果路径，b为咳嗽指向百部的因果路径，c为声音嘶哑指向百部的因果路径。通过计算获得百部在所有医案数据中的出现概率P＝1.014％，当声音嘶哑存在时百部的出现概率P＝2.17％，由于声音嘶哑对百部的出现概率的提升幅度为/1.014＝114％，则大概率认为声音嘶哑和百部具有相关性，提升系数为1.156％。而实际上，百部与声音嘶哑之间并不存在因果关系，声音嘶哑并不会使得百部的出现概率得到提升。基于图2示出的因果关系图可知，声音嘶哑与百部之间形成关系主要是由于咳嗽这个混杂因子的存在。在对该初始因果关系图进行修正后，计算得到声音嘶哑对百部的提升系数为0.1717％，说明声音嘶哑与百部的直接因果效应并不强，与实际情况相符。图3示出了本发明实施例的另一个初始因果关系图。参照图3，该因果关系图包含三个节点，即无汗、麻黄和桂枝。其中，无汗为症状，麻黄和桂枝均为中药。d为无汗指向麻黄的因果路径，e为麻黄指向桂枝的因果路径，f为无汗指向桂枝的因果路径。通过计算获得桂枝在所有医案数据中的出现概率P＝38.84％，当无汗存在时桂枝的出现概率P＝48.59％，由于无汗对桂枝的出现概率的提升幅度为/38.84＝25％，则大概率认为无汗和桂枝具有相关性，提升系数为48.59％-38.84％＝9.75％。而实际上，中医认为自汗与桂枝较为相关，无汗与桂枝并没有太高的关联性。无汗与桂枝的表面上的高关联性主要是由于无汗的存在使得麻黄的出现概率得到提升，而麻黄的存在又会使得桂枝的出现概率得到提升。也就是说，无汗对桂枝的总体因果效应主要是无汗通过中介因子麻黄对桂枝形成的间接因果效应，无汗对桂枝的直接因果效应并不会太高。在对该初始因果关系图进行修正后，计算得到无汗对桂枝的直接因果效应为0.255％，说明无汗与桂枝的直接因果效应并不强，与实际情况相符。具体地，本发明实施例中，直接因果效应为保持其他中介物恒定后剩余的效应。例如，图2中的因果路径b就是咳嗽指向百部的直接因果关系，转换为概率的语言就是如果其他所有条件不变时，咳嗽对百部的出现概率的提升量。利用机器学习模型对因果关系图中的因果路径进行遍历，估计所有因果路径的效应，以获取症状与中药的直接因果效应。具体地，本发明实施例中，采用似然比表示单一症状与单一中药的相关性，似然比的具体公式如下：上式中，a表示中药，b表示症状，rela表示中药a与症状b之间的相关性，p表示中药a的出现概率，p表示在症状b存在的情况下中药a的出现概率。具体地，本发明实施例中，对于直接因果效应的异常检测基于大数据挖掘系统实现，对于因果关系图的修正基于专家系统实现。相应地，在本发明实施例提出的主症兼症识别方法的基础上，本发明实施例还提出了一种主症兼症识别系统。图4示出了本发明实施例的主症兼症识别系统的结构框图。参照图4，本发明实施例的主症兼症识别系统包括以下功能模块：目标信息获取模块，用于获取目标信息，所述目标信息包括患者的症状、患者的基本信息以及中药处方所包含的各种中药；第一识别模块，用于对所述基本信息下的每个症状与所述各种中药的直接因果效应进行求和以得到直接因果效应总值，并判断所述直接因果效应总值是否大于预定的直接因果效应总值阈值，若是，判断相应的症状为主症，若否，判断相应的症状为疑似兼症；第二识别模块，用于确定所述基本信息下的每个疑似兼症与所述各种中药的似然比之中的最大者，并判断所述最大者是否大于预定的似然比阈值，若否，判断相应的疑似兼症为兼症。相应地，在本发明实施例提出的主症兼症识别方法的基础上，本发明实施例还提出了一种主症兼症识别设备，该设备包括处理器和存储器，所述处理器执行所述存储器中保存的计算机程序时实现本发明实施例提出的主症兼症识别方法。虽然以上对本发明的一个或者多个实施方式进行了描述，但是本领域的普通技术人员应当知晓，本发明能够在不偏离其主旨与范围的基础上通过任意的其他的形式得以实施。因此，以上描述的实施方式属于示意性的而非限制性的，在不脱离如所附各权利要求所定义的本发明精神及范围的情况下，对于本技术领域的普通技术人员而言许多修改和替换均具有显而易见性。
