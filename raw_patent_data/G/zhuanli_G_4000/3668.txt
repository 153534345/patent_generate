标题title
虚拟形象生成方法、装置、电子设备以及存储介质
摘要abst
本公开提供了虚拟形象生成方法、装置、电子设备以及存储介质，涉及人工智能技术领域，尤其涉及计算机视觉、增强现实、虚拟现实、深度学习等技术领域，可应用于元宇宙、虚拟数字人等场景。具体实现方案为：根据初始服饰状态信息和骨骼状态信息，得到深度特征图，初始服饰状态信息与初始图像序列相对应，骨骼状态信息与目标图像序列相对应；对深度特征图进行卷积回归，得到与目标图像序列相对应的目标服饰状态信息；以及根据目标服饰状态信息和骨骼状态信息，生成虚拟形象。
权利要求书clms
1.一种虚拟形象生成方法，包括：根据初始服饰状态信息和骨骼状态信息，得到深度特征图，所述初始服饰状态信息与初始图像序列相对应，所述骨骼状态信息与目标图像序列相对应；对所述深度特征图进行卷积回归，得到与所述目标图像序列相对应的目标服饰状态信息；以及根据所述目标服饰状态信息和所述骨骼状态信息，生成虚拟形象。2.根据权利要求1所述的方法，其中，所述初始服饰状态信息包括初始服饰几何形变信息和初始服饰顶点移动速度信息；所述根据初始服饰状态信息和骨骼状态信息，得到深度特征图包括：根据基准服饰几何形变信息和所述初始服饰几何形变信息，确定初始服饰几何偏差信息；根据所述初始服饰几何偏差信息、所述初始服饰顶点移动速度信息和所述骨骼状态信息，得到身体部位与虚拟服饰之间的接触状态信息；以及根据所述初始服饰几何偏差信息、所述初始服饰顶点移动速度信息和所述接触状态信息，得到所述深度特征图。3.根据权利要求1或2所述的方法，其中，所述深度特征图包括初始服饰几何偏差特征、初始服饰顶点移动速度特征和接触状态特征；所述对所述深度特征图进行卷积回归，得到与所述目标图像序列相对应的目标服饰状态信息包括：根据所述初始服饰几何偏差特征、所述初始服饰顶点移动速度特征和所述接触状态特征，得到所述目标图像序列的位移偏移量信息，所述位移偏移量信息表征目标服饰几何形变信息相对于基准服饰几何形变信息的几何形变偏移量，所述目标服饰几何形变信息与所述目标图像序列相对应；以及根据所述位移偏移量信息，确定所述目标服饰状态信息。4.根据权利要求3所述的方法，其中，所述根据所述位移偏移量信息，确定所述目标服饰状态信息包括：根据所述基准服饰几何形变信息，确定基准服饰多边形面片几何信息；以及根据所述基准服饰多边形面片几何信息和所述位移偏移量信息，确定所述目标服饰运动状态信息。5.根据权利要求1-4中任一项所述的方法，还包括：获取与所述初始图像序列相对应的初始骨骼状态信息；以及对所述初始骨骼状态信息进行渲染，得到所述初始服饰状态信息。6.根据权利要求5所述的方法，其中，所述初始骨骼状态信息包括多帧初始骨骼状态信息；所述对所述初始骨骼状态信息进行渲染，得到所述初始服饰状态信息包括：利用动态物理引擎，对所述初始骨骼状态信息进行渲染，得到与所述初始骨骼状态信息相对应的初始服饰几何形变信息；根据多帧初始服饰几何形变信息，确定与所述多帧初始服饰几何形变信息相对应的初始服饰顶点移动速度信息；以及根据所述初始服饰几何形变信息和所述初始服饰顶点移动速度信息，确定所述初始服饰状态信息。7.根据权利要求1-6中任一项所述的方法，还包括：获取针对运动对象的M帧目标图像；从所述M帧图像中获取第m帧至第m+i帧目标图像，作为所述初始图像序列；以及从所述M帧图像中获取第m+i+1帧目标图像，作为所述目标图像序列，M为正整数，i为整数，m+i+1大于1且小于等于M。8.根据权利要求1-7中任一项所述的方法，其中，所述骨骼状态信息包括：身体部位以及与所述身体部位相对应的虚拟服饰多边形面片之间的关联关系以及骨骼点位置信息。9.一种虚拟形象生成装置，包括：第一获得模块，用于根据初始服饰状态信息和骨骼状态信息，得到深度特征图，所述初始服饰状态信息与初始图像序列相对应，所述骨骼状态信息与目标图像序列相对应；第二获得模块，用于对所述深度特征图进行卷积回归，得到与所述目标图像序列相对应的目标服饰状态信息；以及生成模块，用于根据所述目标服饰状态信息和所述骨骼状态信息，生成虚拟形象。10.根据权利要求9所述的装置，其中，所述初始服饰状态信息包括初始服饰几何形变信息和初始服饰顶点移动速度信息；所述第一获得模块包括：第一确定单元，用于根据基准服饰几何形变信息和所述初始服饰几何形变信息，确定初始服饰几何偏差信息；第一获得单元，用于根据所述初始服饰几何偏差信息、所述初始服饰顶点移动速度信息和所述骨骼状态信息，得到身体部位与虚拟服饰之间的接触状态信息；以及第二获得单元，用于根据所述初始服饰几何偏差信息、所述初始服饰顶点移动速度信息和所述接触状态信息，得到所述深度特征图。11.根据权利要求9或10所述的装置，其中，所述深度特征图包括初始服饰几何偏差特征、初始服饰顶点移动速度特征和接触状态特征；所述第二获得模块包括：第三获得单元，用于根据所述初始服饰几何偏差特征、所述初始服饰顶点移动速度特征和所述接触状态特征，得到所述目标图像序列的位移偏移量信息，所述位移偏移量信息表征目标服饰几何形变信息相对于基准服饰几何形变信息的几何形变偏移量，所述目标服饰几何形变信息与所述目标图像序列相对应；以及第二确定单元，用于根据所述位移偏移量信息，确定所述目标服饰状态信息。12.根据权利要求11所述的装置，其中，所述第二确定单元包括：第一确定子单元，用于根据所述基准服饰几何形变信息，确定基准服饰多边形面片几何信息；以及第二确定子单元，用于根据所述基准服饰多边形面片几何信息和所述位移偏移量信息，确定所述目标服饰运动状态信息。13.根据权利要求9-12中任一项所述的装置，还包括：第一获取模块，用于获取与所述初始图像序列相对应的初始骨骼状态信息；以及第三获得模块，用于对所述初始骨骼状态信息进行渲染，得到所述初始服饰状态信息。14.根据权利要求13所述的装置，其中，所述初始骨骼状态信息包括多帧初始骨骼状态信息；所述第三获得模块包括：渲染单元，用于利用动态物理引擎，对所述初始骨骼状态信息进行渲染，得到与所述初始骨骼状态信息相对应的初始服饰几何形变信息；第三确定单元，用于根据多帧初始服饰几何形变信息，确定与所述多帧初始服饰几何形变信息相对应的初始服饰顶点移动速度信息；以及第四确定单元，用于根据所述初始服饰几何形变信息和所述初始服饰顶点移动速度信息，确定所述初始服饰状态信息。15.根据权利要求9-14中任一项所述的装置，还包括：第二获取模块，用于获取针对运动对象的M帧目标图像；第一定义模块，用于从所述M帧图像中获取第m帧至第m+i帧目标图像，作为所述初始图像序列；以及第二定义模块，用于从所述M帧图像中获取第m+i+1帧目标图像，作为所述目标图像序列，M为正整数，i为整数，m+i+1大于1且小于等于M。16.根据权利要求9-15中任一项所述的装置，其中，所述骨骼状态信息包括：身体部位以及与所述身体部位相对应的虚拟服饰多边形面片之间的关联关系以及骨骼点位置信息。17.一种电子设备，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-8中任一项所述的方法。18.一种存储有计算机指令的非瞬时计算机可读存储介质，其中，所述计算机指令用于使所述计算机执行根据权利要求1-8中任一项所述的方法。19.一种计算机程序产品，包括计算机程序，所述计算机程序存储于可读存储介质和电子设备其中至少之一上，所述计算机程序在被处理器执行时实现根据权利要求1-8中任一项所述的方法。
说明书desc
技术领域本公开涉及人工智能技术领域，尤其涉及计算机视觉、增强现实、虚拟现实、深度学习等技术领域，可应用于元宇宙、虚拟数字人等场景，具体地，涉及一种虚拟形象生成方法、装置、电子设备以及存储介质。背景技术虚拟数字人是创建元宇宙虚拟世界的关键元素之一。根据数字人的业务需求不同，数字人可分为2维、3维、卡通、写实、超写实等。在实际场景中，需要针对虚拟数字人构建适配业务需求的虚拟形象。发明内容本公开提供了一种虚拟形象生成方法、装置、电子设备以及存储介质。根据本公开的一方面，提供了一种虚拟形象生成方法，包括：根据初始服饰状态信息和骨骼状态信息，得到深度特征图，所述初始服饰状态信息与初始图像序列相对应，所述骨骼状态信息与目标图像序列相对应；对所述深度特征图进行卷积回归，得到与所述目标图像序列相对应的目标服饰状态信息；以及根据所述目标服饰状态信息和所述骨骼状态信息，生成虚拟形象。根据本公开的另一方面，提供了一种虚拟形象生成装置，包括：第一获得模块，用于根据初始服饰状态信息和骨骼状态信息，得到深度特征图，所述初始服饰状态信息与初始图像序列相对应，所述骨骼状态信息与目标图像序列相对应；第二获得模块，用于对所述深度特征图进行卷积回归，得到与所述目标图像序列相对应的目标服饰状态信息；以及生成模块，用于根据所述目标服饰状态信息和所述骨骼状态信息，生成虚拟形象。根据本公开的另一方面，提供了一种电子设备，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行本公开的虚拟形象生成方法。根据本公开的另一方面，提供了一种存储有计算机指令的非瞬时计算机可读存储介质，其中，所述计算机指令用于使所述计算机执行本公开的虚拟形象生成方法。根据本公开的另一方面，提供了一种计算机程序产品，包括计算机程序，所述计算机程序存储于可读存储介质和电子设备其中至少之一上，所述计算机程序在被处理器执行时实现本公开的虚拟形象生成方法。应当理解，本部分所描述的内容并非旨在标识本公开的实施例的关键或重要特征，也不用于限制本公开的范围。本公开的其它特征将通过以下的说明书而变得容易理解。附图说明附图用于更好地理解本方案，不构成对本公开的限定。其中：图1示意性示出了根据本公开实施例的可以应用虚拟形象生成方法及装置的示例性系统架构；图2示意性示出了根据本公开实施例的虚拟形象生成方法的流程图；图3示意性示出了根据本公开实施例的基于神经网络模型生成虚拟形象的示意图；图4示意性示出了根据本公开实施例的虚拟形象生成装置的框图；以及图5示出了可以用来实施本公开的实施例的示例电子设备的示意性框图。具体实施方式以下结合附图对本公开的示范性实施例做出说明，其中包括本公开实施例的各种细节以助于理解，应当将它们认为仅仅是示范性的。因此，本领域普通技术人员应当认识到，可以对这里描述的实施例做出各种改变和修改，而不会背离本公开的范围和精神。同样，为了清楚和简明，以下的描述中省略了对公知功能和结构的描述。在本公开的技术方案中，所涉及的用户个人信息的收集、存储、使用、加工、传输、提供、公开和应用等处理，均符合相关法律法规的规定，采取了必要保密措施，且不违背公序良俗。在本公开的技术方案中，在获取或采集用户个人信息之前，均获取了用户的授权或同意。在设计高质量虚拟数字人的虚拟形象时，需要专业的动画师对虚拟形象及其服饰进行几何建模、权重绑定估计等进行专业优化设计，以构建适配业务需求的基本资产生成驱动。例如，由于在渲染运动状态的数字人的动态服饰驱动时，有动态写实逼真需求，需要对数字人几何材质、骨骼权重等进行细粒度建模优化，并需要依赖专业设计人员，根据业务需求进行迭代优化设计。发明人在实现本公开构思的过程中发现，上述渲染动态服饰驱动的方式，需要由专业设计人员依赖专业软件进行操作，操作成本高。需要对动态服饰进行多次处理优化，计算成本高。只适用于特定IP数字人，扩展性弱。图1示意性示出了根据本公开实施例的可以应用虚拟形象生成方法及装置的示例性系统架构。需要注意的是，图1所示仅为可以应用本公开实施例的系统架构的示例，以帮助本领域技术人员理解本公开的技术内容，但并不意味着本公开实施例不可以用于其他设备、系统、环境或场景。例如，在另一实施例中，可以应用虚拟形象生成方法及装置的示例性系统架构可以包括终端设备，但终端设备可以无需与服务器进行交互，即可实现本公开实施例提供的虚拟形象生成方法及装置。如图1所示，根据该实施例的系统架构100可以包括第一终端设备101、第二终端设备102、第三终端设备103，网络104和服务器105。网络104用以在第一终端设备101、第二终端设备102、第三终端设备103和服务器105之间提供通信链路的介质。网络104可以包括各种连接类型，例如有线和/或无线通信链路等等。用户可以使用第一终端设备101、第二终端设备102、第三终端设备103通过网络104与服务器105交互，以接收或发送消息等。第一终端设备101、第二终端设备102、第三终端设备103上可以安装有各种通讯客户端应用，例如知识阅读类应用、网页浏览器应用、搜索类应用、即时通信工具、邮箱客户端和/或社交平台软件等。第一终端设备101、第二终端设备102、第三终端设备103可以是具有显示屏并且支持网页浏览的各种电子设备，包括但不限于智能手机、平板电脑、膝上型便携计算机和台式计算机等等。服务器105可以是提供各种服务的服务器，例如对用户利用第一终端设备101、第二终端设备102、第三终端设备103所浏览的内容提供支持的后台管理服务器。后台管理服务器可以对接收到的用户请求等数据进行分析等处理，并将处理结果反馈给终端设备。服务器可以是云服务器，又称为云计算服务器或云主机，是云计算服务体系中的一项主机产品，以解决了传统物理主机与VPS服务中，存在的管理难度大，业务扩展性弱的缺陷。服务器也可以为分布式系统的服务器，或者是结合了区块链的服务器。需要说明的是，本公开实施例所提供的虚拟形象生成方法一般可以由第一终端设备101、第二终端设备102或第三终端设备103执行。相应地，本公开实施例所提供的内容处理装置也可以设置于第一终端设备101、第二终端设备102或第三终端设备103中。或者，本公开实施例所提供的虚拟形象生成方法一般也可以由服务器105执行。相应地，本公开实施例所提供的虚拟形象生成装置一般可以设置于服务器105中。本公开实施例所提供的虚拟形象生成方法也可以由不同于服务器105且能够与第一终端设备101、第二终端设备102、第三终端设备103和/或服务器105通信的服务器或服务器集群执行。相应地，本公开实施例所提供的虚拟形象生成装置也可以设置于不同于服务器105且能够与第一终端设备101、第二终端设备102、第三终端设备103和/或服务器105通信的服务器或服务器集群中。例如，在需要生成虚拟形象时，第一终端设备101、第二终端设备102、第三终端设备103可以获取与初始图像序列相对应的初始服饰状态信息以及与目标图像序列相对应的骨骼状态信息，然后将获取的初始服饰状态信息和骨骼状态信息发送给服务器105，由服务器105根据初始服饰状态信息和骨骼状态信息，得到深度特征图，对深度特征图进行卷积回归，得到与目标图像序列相对应的目标服饰状态信息，并根据目标服饰状态信息和骨骼状态信息，生成虚拟形象。或者由能够与第一终端设备101、第二终端设备102、第三终端设备103和/或服务器105通信的服务器或服务器集群对初始服饰状态信息和骨骼状态信息进行分析，并实现生成虚拟形象。应该理解，图1中的终端设备、网络和服务器的数目仅仅是示意性的。根据实现需要，可以具有任意数目的终端设备、网络和服务器。图2示意性示出了根据本公开实施例的虚拟形象生成方法的流程图。如图2所示，该方法包括操作S210～S230。在操作S210，根据初始服饰状态信息和骨骼状态信息，得到深度特征图，初始服饰状态信息与初始图像序列相对应，骨骼状态信息与目标图像序列相对应。在操作S220，对深度特征图进行卷积回归，得到与目标图像序列相对应的目标服饰状态信息。在操作S230，根据目标服饰状态信息和骨骼状态信息，生成虚拟形象。根据本公开的实施例，初始图像序列和目标图像序列均可以表征一帧或多帧针对运动对象的图像序列或视频帧序列。初始图像序列和目标图像序列可以表征不同时段的图像序列。运动对象可以包括穿戴有服饰的运动对象，该服饰可以表征为虚拟形象中的虚拟服饰。运动对象也可以包括未穿戴服饰的运动对象。在该种情况下，可以为图像序列中的运动对象配置虚拟服饰。虚拟服饰可以包括但不限于虚拟服装、虚拟饰品等其中至少之一。虚拟服装例如可以包括但不限于衣服、裤子、鞋子、帽子等其中至少之一。虚拟饰品例如可以包括但不限于耳环、发饰、项链、手链及其他挂饰等其中至少之一。关于虚拟服饰的限定可不限于此。根据本公开的实施例，初始服饰状态信息可以包括初始服饰几何形变信息和初始服饰顶点移动速度信息等，且可不限于此。初始服饰几何形变信息可以使用虚拟服饰多边形面片的几何信息进行表征，几何信息可以包括多边形面片的边信息、面积信息、位置信息、相邻多边形面片之间的关联关系以及虚拟服饰多边形面片的法向信息等其中至少之一，且可不限于此。法向信息可以表征为虚拟服饰多边形面片的法向方向信息。初始服饰顶点移动速度信息可以包括服饰顶点的速度、加速度等信息。根据本公开的实施例，初始服饰状态信息可以通过计算确定。例如可以首先根据虚拟服饰在图片中的展现形式，获取虚拟服饰多边形面片的几何信息。然后，可以基于业务需求，对服饰多边形面片的几何信息进行按比例扩大、缩小并结合预设计算规则计算得到初始服饰状态信息。初始服饰状态信息也可以由用户自定义设置确定。例如，用户可以根据业务需求，自定义设置服饰多边形面片的几何信息，以及速度、加速度等信息。根据本公开的实施例，骨骼状态信息可以包括身体部位以及与身体部位相对应的虚拟服饰多边形面片之间的关联关系，以及骨骼点位置信息等，且可不限于此。关联关系可以使用绑定权重来表示，绑定权重可用于表征身体部位的运动对虚拟服饰多边形面片的驱动程度。一个身体部位可以与多个虚拟服饰多边形面片具有关联关系，并可以对应多个不同的权重值，以表征该身体部位对多个虚拟服饰多边形面片的不同的驱动程度。在身体部位与虚拟服饰多边形面片之间不存在关联关系的情况下，可以表征该身体部位的运动不会驱动虚拟服饰多边形面片的几何信息发生改变。根据目标图像序列中运动对象的姿态，可以确定骨骼点位置信息。骨骼点位置信息可以表征为相对于基准骨骼点的位移偏移量信息，也可以表征为在世界坐标系或预设坐标系中的位置信息等。根据本公开的实施例，在获得初始图像序列和目标图像序列之后，可以对初始图像序列和目标图像序列进行预处理，得到仅包括运动对象的预处理初始图像序列和预处理目标图像序列。然后，可以构建编码器，对包含初始服饰状态信息的预处理初始图像序列和包含骨骼状态信息的预处理目标图像序列进行编码处理，得到图像空间的高维特征向量。之后，可以结合解码操作，将图像空间的高维特征向量解码成UV空间的深度特征图。深度特征图可以包括服饰状态特征和骨骼状态特征。UV空间的深度特征图可以简化图像空间的几何、光照等复杂的属性信息，以简化运动问题。根据本公开的实施例，在对深度特征图进行卷积回归的操作中，可以使用各类卷积神经网络，对深度特征图进行回归计算。卷积回归的结果可以包括与目标服饰状态信息相关的特征。目标服饰状态信息可以包括目标服饰几何形变信息、目标服饰几何偏差信息等，且可不限于此。目标服饰几何偏差信息可以表征相对于基准服饰几何形变的位移偏移量。卷积神经网络例如可以包括如下中的至少之一：LeNet、AlexNet、VGGNet、InceptionNet和ResNet等，且可不限于此。根据本公开的实施例，根据目标服饰状态信息，可以确定虚拟服饰在目标图像序列中的目标服饰几何形变信息。针对目标图像序列中每个图像的骨骼状态信息，配置该图像的目标服饰几何形变信息，可以得到该图像的穿戴有虚拟服饰的虚拟形象，且虚拟形象的姿态可以与该图像中运动对象的运动姿态相匹配。基于该方式，可以得到目标图像序列的运动状态的虚拟形象，该虚拟形象的运动状态与目标图像序列中运动对象的运动状态相匹配，且该虚拟形象所穿戴的虚拟服饰可以随着该虚拟形象运动的驱动实现平滑的动态变化。需要说明的是，在目标图像序列中的一帧或多帧图像已获得目标服饰状态信息的情况下，可以将该一帧或多帧图像确定为新的初始图像序列，将该一帧或多帧图像已获得的目标服饰状态信息确定为新的初始服饰状态信息。基于新的初始服饰状态信息以及未获得目标服饰状态信息的目标图像序列的骨骼状态信息，可以结合前述方式，继续对未获得目标服饰状态信息的目标图像序列的服饰状态信息进行预测。通过本公开的上述实施例，由于可以基于特征提取和卷积回归的操作确定目标服饰状态信息，可以减少在基于传统物理引擎，通过计算服饰每个顶点的重力加速度、服饰张力等物理属性，得到目标服饰状态信息的过程中的计算量、算力成本及硬件成本。此外，基于特征提取和卷积回归的方式确定目标服饰状态信息的方法，具有更广泛的适用场景。在该方法的实现过程中，还可以持续学习特征参数间的映射关系，相较于基于物理引擎计算的方法，具有较高的收敛速度，可实现更优化的计算性能，可有效提高计算速率及确定的目标服饰状态信息的精度。下面结合具体实施例，对图2所示的方法做进一步说明。根据本公开的实施例，初始图像序列和目标图像序列也可以表征相同时段且时间上连续的图像序列。确定初始图像序列和目标图像序列的方法可以包括：获取针对运动对象的M帧目标图像。从M帧图像中获取第m帧至第m+i帧目标图像，作为初始图像序列。从M帧图像中获取第m+i+1帧目标图像，作为目标图像序列。M为正整数，i为整数，m+i+1大于1且小于等于M。根据本公开的实施例，根据要获取的初始服饰状态信息的信息类别，如速度、加速度等类别的信息，i的取值可以为1或2。在该种情况下，1可以将连续两帧目标图像确定为初始图像序列，并将该连续两帧目标图像的下一帧目标图像确定为目标图像序列。也可以将连续三帧目标图像确定为初始图像序列，并将该连续三帧目标图像的下一帧目标图像确定为目标图像序列。根据本公开的实施例，在将第m帧至第m+i帧目标图像确定为初始图像序列的情况下，也可以将第m+i+1帧至第M帧目标图像确定为目标图像序列。在该种情况下，目标图像序列也可以表征初始图像序列之后的所有剩余目标图像构成的图像序列。根据本公开的实施例，在根据前述方法确定确定第m+i+1帧目标图像的目标服饰状态信息，且m+i+2小于等于M的情况下，可以将第m+1帧至第m+i+1帧目标图像确定为初始图像序列，将第m+i+2帧或第m+i+2帧至第M帧目标图像确定为目标图像序列。然后，可以根据第m+1帧至第m+i+1帧目标图像的服饰状态信息，以及第m+i+2帧目标图像的骨骼状态信息，得到深度特征图，并对深度特征图进行卷积回归，得到与第m+i+2帧目标图像的目标服饰状态信息。通过循环该过程，可以得到第m+i+1帧至第M帧目标图像的目标服饰状态信息。需要说明的是，在获得M帧目标图像之后，可以在执行第一次特征提取和卷积回归过程中，仅将M帧目标图像的第1帧至第1+i帧目标图像确定为初始目标序列，例如可以仅将第1至2帧目标图像或第1至3帧目标图像确定为初始图像序列，剩余目标图像均作为目标图像序列。然后，基于前述方式动态变换初始图像序列和目标图像序列。通过本公开的上述实施例，可以结合时序相关性特征，确定每帧目标图像的目标服饰状态信息，由此得到的目标服饰状态信息可以具有更高的精度，并可构建更加平滑的虚拟形象运动姿态。根据本公开的实施例，在确定初始图像序列之后，也可以根据初始图像序列中运动对象的姿态信息，得到初始服饰状态信息。该方法例如可以包括：获取与初始图像序列相对应的初始骨骼状态信息。对初始骨骼状态信息进行渲染，得到初始服饰状态信息。根据本公开的实施例，可以根据初始图像序列中运动对象的姿态信息，确定初始图像序列中运动对象的初始骨骼点位置信息。根据多帧骨骼点位置信息，可以得到初始图像序列中运动对象的对象移动速度信息、对象移动加速度信息等。根据骨骼点位置信息、对象移动速度信息、对象移动加速度信息、虚拟对象的对象属性信息以及虚拟服饰的服饰属性信息等，可以确定虚拟对象的身体部位以及与身体部位相对应的虚拟服饰多边形面片之间的绑定权重。根据初始骨骼点位置信息和绑定权重，可以确定初始骨骼状态信息。服饰属性信息可以包括服饰张力、服饰重力等信息。例如对象为人，对象属性信息可以表征人的身高、肩宽、腿长等信息，且可不限于此。需要说明的是，在对象为人的情况下，本实施例中的对象属性信息并不是针对某一特定人员的属性信息，并不能反映出某一特定人员的个人信息。本实施例中的对象属性信息可以来自于公开数据集，或者对象属性信息的获取是经过了相应用户的授权。本实施例中的方法的执行主体可以通过各种公开、合法合规的方式获取针对运动对象的目标图像，例如可以是从公开数据集处获取的，或者是经过了用户的授权从用户处获取的。根据本公开的实施例，在确定初始骨骼状态信息之后，可以由设计师根据初始骨骼状态信息，进行服饰渲染，以得到穿戴有虚拟服饰的运动对象。然后，可以根据运动对象穿戴的虚拟服饰，得到初始服饰状态信息。通过本公开的上述实施例，由于根据初始骨骼状态信息可以确定初始服饰状态信息，可以仅需针对运动对象采集一次图像序列，即可确定多种虚拟服饰的初始服饰状态信息，从而可确定多种虚拟服饰的目标服饰状态信息，生成的虚拟形象在穿戴各类虚拟服饰时均能实现虚拟服饰随虚拟形象的运动平滑变化，可有效扩宽应用场景。根据本公开的实施例，初始骨骼状态信息可以包括多帧初始骨骼状态信息。对初始骨骼状态信息进行渲染，得到初始服饰状态信息可以包括：利用动态物理引擎，对初始骨骼状态信息进行渲染，得到与初始骨骼状态信息相对应的初始服饰几何形变信息。根据多帧初始服饰几何形变信息，确定与多帧初始服饰几何形变信息相对应的初始服饰顶点移动速度信息。根据初始服饰几何形变信息和初始服饰顶点移动速度信息，确定初始服饰状态信息。根据本公开的实施例，在确定初始骨骼状态信息之后，也可以将初始骨骼状态信息输入动态物理引擎，并将选定的虚拟服饰及服饰属性信息输入动态物理引擎，由动态物理引擎执行针对初始骨骼状态信息的服饰渲染操作，以得到穿戴有虚拟服饰的运动对象。然后，可以根据运动对象穿戴的虚拟服饰，得到初始服饰几何形变信息。根据本公开的实施例，在基于动态物理引擎的渲染操作，确定多帧初始骨骼状态信息的多帧初始服饰几何形变信息之后，例如，可以根据两帧初始服饰几何形变信息，得到服饰顶点移动速度信息。例如，还可以根据三帧初始服饰几何形变信息，得到服饰顶点移动加速度信息。根据服饰顶点移动速度信息和服饰顶点移动加速度信息其中至少之一，可以得到初始服饰顶点移动速度信息。然后，可以根据初始服饰几何形变信息和初始服饰顶点移动速度信息，得到初始服饰状态信息。通过本公开的上述实施例，结合动态物理引擎进行服饰渲染，可以提高渲染精度，从而提高确定的初始服饰几何形变信息以及初始服饰顶点移动速度信息的精度，得到精确度更高的初始服饰状态信息，使得生成的虚拟形象更加真实和自然。此外，基于动态物理引擎进行服饰渲染，相较于设计师渲染的方法，有效降低了人工成本，并可提高渲染效率。根据本公开的实施例，在获得初始服饰状态信息和骨骼状态信息之后，可以执行上述操作S210。上述操作S210可以包括：根据基准服饰几何形变信息和初始服饰几何形变信息，确定初始服饰几何偏差信息。根据初始服饰几何偏差信息、初始服饰顶点移动速度信息和骨骼运动状态信息，得到身体部位与虚拟服饰之间的接触状态信息。根据初始服饰几何偏差信息、初始服饰顶点移动速度信息和接触状态信息，得到深度特征图。根据本公开的实施例，基准服饰几何形变信息可以表征虚拟服饰穿戴在保持自然站姿的运动对象身上时的几何信息。基准服饰几何形变信息也可以表征同类型服饰的基准几何形变信息。例如，可以采集多个同类型服饰的几何形变信息，然后通过对该多个同类型服饰的几何形变信息求平均值的方式确定基准信息。初始服饰几何偏差信息可以表征初始服饰多边形面片位置信息相对于基准服饰多边形面片位置信息的位移偏移量。根据本公开的实施例，上述确定初始服饰几何偏差信息、得到接触状态信息以及得到深度特征图的过程均可以基于编码器完成。通过将包含初始服饰状态信息的初始图像序列和包含骨骼状态信息的目标图像序列输入编码器，例如可以得到包括初始服饰几何偏差信息、初始服饰顶点移动速度信息和接触状态信息的深度特征图。根据本公开的实施例，编码器中可以包括基准服饰几何形变特征。在将初始服饰状态信息和骨骼状态信息输入编码器之后，编码器可以对初始服饰状态信息进行特征提取，得到初始服饰几何形变特征，并根据基准服饰几何形变特征和初始服饰几何形变特征，得到初始服饰几何偏差特征。编码器通过对初始服饰状态信息进行特征提取，还可以得到初始服饰顶点移动速度特征。在该过程中，编码器还可以对骨骼状态信息进行特征提取，得到包括绑定权重、骨骼点位置信息等的骨骼状态特征，并可根据初始服饰几何偏差特征、初始服饰顶点移动速度特征和骨骼状态特征，得到表征身体部位与虚拟服饰之间的接触状态的接触状态特征。深度特征图中可以包括初始服饰几何偏差特征、初始服饰顶点移动速度特征和接触状态特征等特征。根据本公开的实施例，编码器中可以包括碰撞检测模型和二分类模型。在编码器中，可以结合碰撞检测算法，对初始服饰几何偏差特征、初始服饰顶点移动速度特征和骨骼状态特征进行计算，计算结果可以包括虚拟服饰多边形面片和身体部位之间的距离向量。在得到该距离向量之后，可以结合编码器中的二分类模型，确定虚拟服饰多边形面片和身体部位之间为有接触状态或无接触状态。例如，可以预定义一预设阈值，在计算得到的距离向量表征的数值大于该预设阈值的情况下，可以确定与该距离向量相对应的虚拟服饰多边形面片和身体部位之间为无接触状态。在计算得到的距离向量表征的数值效于或等于该预设阈值的情况下，可以确定与该距离向量相对应的虚拟服饰多边形面片和身体部位之间为有接触状态。通过该方式，可以基于编码器的处理，得到接触状态信息。通过本公开的上述实施例，可以将计算每帧虚拟服饰每个顶点的物理属性的过程转换为特征提取以及对提取到的深度特征图进行计算的过程，特征提取的方式相较于传统基于物理量进行计算的方式，具有较小的计算量，可降低算力成本、硬件成本，提高计算效率。根据本公开的实施例，上述操作S220可以包括：根据初始服饰几何偏差特征、初始服饰顶点移动速度特征和接触状态特征，得到目标图像序列的位移偏移量信息，位移偏移量信息表征目标服饰几何形变信息相对于基准服饰几何形变信息的几何形变偏移量，目标服饰几何形变信息与目标图像序列相对应。根据位移偏移量信息，确定目标服饰状态信息。根据本公开的实施例，目标服饰几何形变信息可以表征目标图像序列中的运动对象驱动的虚拟服饰几何形变信息。目标服饰几何形变信息可以使用虚拟服饰多边形面片的几何信息进行表征。位移偏移量信息也可以表征目标服饰多边形面片几何信息相对于基准服饰多边形面片几何信息的偏移量。位移偏移量信息也可以表征目标服饰多边形面片位置信息相对于基准服饰多边形面片位置信息的位移偏移量。根据本公开的实施例，可以基于多层感知机网络，对深度特征图中的初始服饰几何偏差特征、初始服饰顶点移动速度特征和接触状态特征进行回归计算，回归结果可以为上述位移偏移量信息。根据本公开的实施例，在得到位移偏移量信息之后，可以将位移偏移量信息确定为目标服饰状态信息。在此基础上，可以根据目标服饰状态信息、基准服饰状态信息和骨骼状态信息，生成虚拟形象。在该过程中，可以首先根据基准服饰状态信息以及由位移偏移量信息确定的目标服饰状态信息，确定虚拟服饰的目标服饰几何形变信息。然后，根据目标服饰几何形变信息和骨骼状态信息，生成穿戴有虚拟服饰的虚拟形象。通过本公开的上述实施例，可以将计算每帧虚拟服饰每个顶点的物理属性的过程转换为对提取到的深度特征图进行卷积回归计算的过程，卷积回归计算的方式相较于传统基于物理量进行计算的方式，具有较小的计算IB228546量，可降低算力成本、硬件成本，提高计算效率。根据本公开的实施例，根据位移偏移量信息，确定目标服饰状态信息可以包括：根据基准服饰几何形变信息，确定基准服饰多边形面片几何信息。根据基准服饰多边形面片几何信息和位移偏移量信息，确定目标服饰运动状态信息。根据本公开的实施例，基准服饰多边形面片几何信息可以包括上述基准服饰多边形面片位置信息。在得到位移偏移量信息之后，可以根据基准多边形面片几何信息和位移偏移量信息，确定目标服饰多边形面片位置信息或目标服饰多边形面片几何信息，并可以根据目标服饰多边形面片位置信息或目标服饰多边形面片几何信息，确定目标服饰运动状态信息。在本实施例的基础上，可以根据目标服饰状态信息和骨骼状态信息，生成虚拟形象。在该过程中，可以首先根据由目标服饰多边形面片位置信息或目标服饰多边形面片几何信息确定的目标服饰状态信息，确定虚拟服饰的目标服饰几何形变信息。然后，根据目标服饰几何形变信息和骨骼状态信息，生成穿戴有虚拟服饰的虚拟形象。通过本公开的上述实施例，可以结合基准服饰几何形变信息，确定目标图像序列的目标服饰几何形变信息，从而可以快速确定下一轮次初始图像序列的初始服饰状态信息，可进一步提高计算效率，并可实时确定目标图像序列的虚拟形象。图3示意性示出了根据本公开实施例的基于神经网络模型生成虚拟形象的示意图。如图3所示，针对运动对象可以采集到图像序列310，图像序列310中可以包括第一图像311、第二图像312、第三图像313、第四图像314、第五图像315、第六图像316。第一图像311、第二图像312、第三图像313中可以包括初始服饰状态信息，可用于构成初始图像序列。第四图像314、第五图像315、第六图像316中可以包括骨骼状态信息，可用于构成目标图像序列。神经网络模型320例如可以使用Transformer来实现，可以包括编码器321和多层感知机323。根据本公开的实施例，参见图3所示，通过将包括初始服饰状态信息和骨骼状态信息的图像序列310输入编码器321，可以得到包括初始服饰几何偏差特征、初始服饰顶点移动速度特征以及表征身体部位与虚拟服饰多边形面片之间的接触状态的接触状态特征的深度特征图。通过结合多层感知机323进行卷积回归计算，可以得到第四图像314、第五图像315、第六图像316的目标服饰状态信息324。根据本公开的实施例，参见图3所示，根据目标服饰状态信息324可以得到虚拟服饰的目标服饰几何形变信息330。本实施例中可以使用图像形式的第一服饰几何形变334、第二服饰几何形变335、第三服饰几何形变336直观的表示目标服饰几何形变信息330。第一服饰几何形变334可以表征第四图像314的目标服饰几何形变信息。第二服饰几何形变335可以表征第五图像315的目标服饰几何形变信息.第三服饰几何形变336可以表征第六图像316的目标服饰几何形变信息。根据本公开的实施例，在获得目标服饰几何形变信息之后，参见图3所示，可以根据目标服饰状态信息324和相对应的骨骼状态信息，生成虚拟形象序列340。例如，可以根据第一服饰几何形变334和第四图像314的骨骼状态信息，生成第一虚拟形象344。可以根据第二服饰几何形变335和第五图像315的骨骼状态信息，生成第二虚拟形象345。可以根据第三服饰几何形变336和第六图像316中的骨骼状态信息，生成第三虚拟形象346。根据本公开的实施例，图3所示的神经网络模型320可以基于如下方法训练得到：结合动态物理引擎，如各类虚拟形象仿真软件，获得样本图像序列的真实服饰状态信息和骨骼状态信息。根据部分样本图像的真实服饰状态信息和其余样本图像的骨骼状态信息，经由神经网络模型中编码器和多层感知机的处理，得到其余部分样本图像的预测服饰状态信息。利用真实服饰状态信息和预测服饰状态信息对神经网络模型进行训练，可以得到经训练的神经网络模型320。需要说明的是，图3仅是虚拟形象生成方法的一种示例性实施例，在实际操作过程中，可以将针对运动对象的时序图像分为包括初始服饰状态信息的初始图像序列以及需要预测运动驱动服饰时的虚拟服饰几何形变信息的目标图像序列。然后，将时序图像输入神经网络模型320，由神经网络模型320进行处理，并实现虚拟形象所穿戴的虚拟服饰可以随着该虚拟形象运动的驱动实现平滑的动态变化。根据本公开的实施例，在神经网络模型训练好之后，可以采用例如paddle-lite的推理引擎对训练好的神经网络模型进行处理，以实现模型的迁移和适配。训练好的神经网络模型可以部署于移动端中，进而在移动端基于神经网络模型，生成动态的虚拟形象。通过本公开的上述实施例，由于可以基于特征提取和卷积回归的操作确定目标服饰状态信息，可以减少在基于传统物理引擎，通过计算服饰每个顶点的重力加速度、服饰张力等物理属性，得到目标服饰状态信息的过程中的计算量、算力成本及硬件成本。此外，本方案具有较强的可扩展性，能够适配到具有虚拟形象生成需求的任一移动端中。图4示意性示出了根据本公开实施例的虚拟形象生成装置的框图。如图4所示，虚拟形象生成装置400包括第一获得模块410、第二获得模块420和生成模块430。第一获得模块410，用于根据初始服饰状态信息和骨骼状态信息，得到深度特征图，初始服饰状态信息与初始图像序列相对应，骨骼状态信息与目标图像序列相对应。第二获得模块420，用于对深度特征图进行卷积回归，得到与目标图像序列相对应的目标服饰状态信息。生成模块430，用于根据目标服饰状态信息和骨骼状态信息，生成虚拟形象。根据本公开的实施例，初始服饰状态信息包括初始服饰几何形变信息和初始服饰顶点移动速度信息。第一获得模块包括第一确定单元、第一获得单元和第二获得单元。第一确定单元，用于根据基准服饰几何形变信息和初始服饰几何形变信息，确定初始服饰几何偏差信息。第一获得单元，用于根据初始服饰几何偏差信息、初始服饰顶点移动速度信息和骨骼状态信息，得到身体部位与虚拟服饰之间的接触状态信息。第二获得单元，用于根据初始服饰几何偏差信息、初始服饰顶点移动速度信息和接触状态信息，得到深度特征图。根据本公开的实施例，深度特征图包括初始服饰几何偏差特征、初始服饰顶点移动速度特征和接触状态特征。第二获得模块包括第三获得单元和第二确定单元。第三获得单元，用于根据初始服饰几何偏差特征、初始服饰顶点移动速度特征和接触状态特征，得到目标图像序列的位移偏移量信息，位移偏移量信息表征目标服饰几何形变信息相对于基准服饰几何形变信息的几何形变偏移量，目标服饰几何形变信息与目标图像序列相对应。第二确定单元，用于根据位移偏移量信息，确定目标服饰状态信息。根据本公开的实施例，第二确定单元包括第一确定子单元和第二确定子单元。第一确定子单元，用于根据基准服饰几何形变信息，确定基准服饰多边形面片几何信息。第二确定子单元，用于根据基准服饰多边形面片几何信息和位移偏移量信息，确定目标服饰运动状态信息。根据本公开的实施例，虚拟形象生成装置还包括第一获取模块和第三获得模块。第一获取模块，用于获取与初始图像序列相对应的初始骨骼状态信息。第三获得模块，用于对初始骨骼状态信息进行渲染，得到初始服饰状态信息。根据本公开的实施例，初始骨骼状态信息包括多帧初始骨骼状态信息。第三获得模块包括渲染单元、第三确定单元和第四确定单元。渲染单元，用于利用动态物理引擎，对初始骨骼状态信息进行渲染，得到与初始骨骼状态信息相对应的初始服饰几何形变信息。第三确定单元，用于根据多帧初始服饰几何形变信息，确定与多帧初始服饰几何形变信息相对应的初始服饰顶点移动速度信息。第四确定单元，用于根据初始服饰几何形变信息和初始服饰顶点移动速度信息，确定初始服饰状态信息。根据本公开的实施例，虚拟形象生成装置还包括第二获取模块、第一定义模块和第二定义模块。第二获取模块，用于获取针对运动对象的M帧目标图像。第一定义模块，用于从M帧图像中获取第m帧至第m+i帧目标图像，作为初始图像序列。第二定义模块，用于从M帧图像中获取第m+i+1帧目标图像，作为目标图像序列，M为正整数，i为整数，m+i+1大于1且小于等于M。根据本公开的实施例，骨骼状态信息包括：身体部位以及与身体部位相对应的虚拟服饰多边形面片之间的关联关系以及骨骼点位置信息。根据本公开的实施例，本公开还提供了一种电子设备、一种可读存储介质和一种计算机程序产品。根据本公开的实施例，一种电子设备，包括：至少一个处理器；以及与至少一个处理器通信连接的存储器；其中，存储器存储有可被至少一个处理器执行的指令，指令被至少一个处理器执行，以使至少一个处理器能够执行本公开的虚拟形象生成方法。根据本公开的实施例，一种存储有计算机指令的非瞬时计算机可读存储介质，其中，计算机指令用于使计算机执行本公开的虚拟形象生成方法。根据本公开的实施例，一种计算机程序产品，包括计算机程序，计算机程序存储于可读存储介质和电子设备其中至少之一上，计算机程序在被处理器执行时实现本公开的虚拟形象生成方法。图5示出了可以用来实施本公开的实施例的示例电子设备500的示意性框图。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本公开的实现。如图5所示，设备500包括计算单元501，其可以根据存储在只读存储器502中的计算机程序或者从存储单元508加载到随机访问存储器503中的计算机程序，来执行各种适当的动作和处理。在RAM 503中，还可存储设备500操作所需的各种程序和数据。计算单元501、ROM 502以及RAM 503通过总线504彼此相连。输入/输出接口505也连接至总线504。设备500中的多个部件连接至I/O接口505，包括：输入单元506，例如键盘、鼠标等；输出单元507，例如各种类型的显示器、扬声器等；存储单元508，例如磁盘、光盘等；以及通信单元509，例如网卡、调制解调器、无线通信收发机等。通信单元509允许设备500通过诸如因特网的计算机网络和/或各种电信网络与其他设备交换信息/数据。计算单元501可以是各种具有处理和计算能力的通用和/或专用处理组件。计算单元501的一些示例包括但不限于中央处理单元、图形处理单元、各种专用的人工智能计算芯片、各种运行机器学习模型算法的计算单元、数字信号处理器、以及任何适当的处理器、控制器、微控制器等。计算单元501执行上文所描述的各个方法和处理，例如虚拟形象生成方法。例如，在一些实施例中，虚拟形象生成方法可被实现为计算机软件程序，其被有形地包含于机器可读介质，例如存储单元508。在一些实施例中，计算机程序的部分或者全部可以经由ROM 502和/或通信单元509而被载入和/或安装到设备500上。当计算机程序加载到RAM 503并由计算单元501执行时，可以执行上文描述的虚拟形象生成方法的一个或多个步骤。备选地，在其他实施例中，计算单元501可以通过其他任何适当的方式而被配置为执行虚拟形象生成方法。本文中以上描述的系统和技术的各种实施方式可以在数字电子电路系统、集成电路系统、场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、复杂可编程逻辑设备、计算机硬件、固件、软件、和/或它们的组合中实现。这些各种实施方式可以包括：实施在一个或者多个计算机程序中，该一个或者多个计算机程序可在包括至少一个可编程处理器的可编程系统上执行和/或解释，该可编程处理器可以是专用或者通用可编程处理器，可以从存储系统、至少一个输入装置、和至少一个输出装置接收数据和指令，并且将数据和指令传输至该存储系统、该至少一个输入装置、和该至少一个输出装置。用于实施本公开的方法的程序代码可以采用一个或多个编程语言的任何组合来编写。这些程序代码可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器或控制器，使得程序代码当由处理器或控制器执行时使流程图和/或框图中所规定的功能/操作被实施。程序代码可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本公开的上下文中，机器可读介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的程序。机器可读介质可以是机器可读信号介质或机器可读储存介质。机器可读介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。为了提供与用户的交互，可以在计算机上实施此处描述的系统和技术，该计算机具有：用于向用户显示信息的显示装置或者LCD监视器)；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给计算机。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网和互联网。计算机系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。服务器可以是云服务器，也可以是分布式系统的服务器，或者是结合了区块链的服务器。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本发公开中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本公开公开的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本公开保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本公开的精神和原则之内所作的修改、等同替换和改进等，均应包含在本公开保护范围之内。
