标题title
一种显示驱动方法和显示驱动芯片
摘要abst
本申请涉及一种显示驱动方法和显示驱动芯片，属于LED显示领域，解决现有技术中LED显示屏效果不好的问题。该显示驱动方法包括：确认显示区域中的第一时间点t1，t0&lt;t1&lt;t2，t0、t2分别表示所述显示区域的开始时间、结束时间；将PWM波均衡分配至所述第一时间点t1的两侧；或，将PWM波沿第一时间点t1分配至所述第一时间点t1的一侧，若该侧可分配区域宽度小于所述PWM波宽度，则将超出所述可分配区域宽度的PWM波部分沿第一时间点t1分配至所述第一时间点t1的另一侧；基于所述PWM波输出恒定电流。本申请的驱动方法可以显著提升显示效果。
权利要求书clms
1.一种显示驱动方法，其特征在于，包括：确认显示区域中的第一时间点t1，t0＜t1＜t2，t0、t2分别表示所述显示区域的开始时间、结束时间；将PWM波均衡分配至所述第一时间点t1的两侧；或，将PWM波沿第一时间点t1分配至所述第一时间点t1的一侧，若该侧可分配区域宽度小于所述PWM波宽度，则将超出所述可分配区域宽度的PWM波部分沿第一时间点t1分配至所述第一时间点t1的另一侧；基于所述PWM波输出恒定电流。2.根据权利要求1所述的一种显示驱动方法，其特征在于，将PWM波均衡分配至所述第一时间点t1的两侧，包括：所述第一时间点t1的两侧分配的PWM波宽度对应的灰度值大小分别为M、N，M=Q0*A+Y，N=Q0*，其中，A、B为X/2的整数部分、余数部分，X、Y为Q/Q0的整数部分、余数部分，Q为灰度数据的灰度值，Q0为第一阈值。3.根据权利要求1所述的一种显示驱动方法，其特征在于，将所述PWM波均衡分配至所述第一时间点t1的两侧，包括：所述第一时间点t1的两侧分配的PWM波宽度对应的灰度值大小分别为M、N，N=M+B；其中，M、B分别为Q/2的整数部分和余数部分，Q为灰度数据的灰度值。4.根据权利要求1所述的一种显示驱动方法，其特征在于，t1=/2。5.根据权利要求1所述的一种显示驱动方法，其特征在于，所述PWM波包括展宽部分。6.根据权利要求1所述的一种显示驱动方法，其特征在于，所述显示驱动方法还包括：在所述显示区域分配的灰度值不为0时，在所述显示区域外分时将列线预充电到对应电位；在所述显示区域分配的灰度值为0时，在显示单元内将所述列线预充电到对应电位；其中，显示单元指代灰度数据在一个显示子帧内的最小显示分组，所述显示区域包括于所述显示单元。7.根据权利要求1-6任一项所述的一种显示驱动方法，其特征在于，所述第一时间点t1根据显示效果配置。8.一种显示驱动芯片，其特征在于，包括：存储电路，用于配置显示区域中的第一时间点t1，t0＜t1＜t2，其中，t0、t2分别表示所述显示区域的开始时间、结束时间；PWM波产生电路，被配置为：将所述PWM波均衡分配至所述第一时间点t1的两侧；或，将PWM波沿第一时间点t1分配至所述第一时间点t1的一侧，若该侧可分配区域宽度小于所述PWM波宽度，则将超出所述可分配区域宽度的PWM波部分沿第一时间点t1分配至所述第一时间点t1的另一侧；通道电流输出模块，基于所述PWM波输出恒定电流。9.根据权利要求8所述的一种显示驱动芯片，其特征在于，所述第一时间点t1的两侧分配的PWM波宽度对应的灰度值大小分别为M、N，M=Q0*A+Y，N=Q0*，其中，A、B为X/2的整数部分、余数部分，X、Y为Q/Q0的整数部分、余数部分，Q为灰度数据的灰度值，Q0为第一阈值。10.根据权利要求8所述的一种显示驱动芯片，其特征在于，所述第一时间点t1的两侧分配的PWM波宽度对应的灰度值大小分别为M、N，N=M+B；其中，M、B分别为Q/2的整数部分和余数部分，Q为灰度数据的灰度值。
说明书desc
技术领域本申请涉及LED显示领域，具体涉及一种LED显示驱动方法和显示驱动芯片。背景技术现有技术中，通常将一帧图像分为多个显示子帧，一个显示子帧又分为多个显示分组。逐个显示分组、逐个子帧地进行显示，从而完成整个图像的显示。对于一个显示分组中，显示数据被分配到显示区域，一般是从显示区域的起始位置开始从前往后分配，或者从显示区域的结束位置从后往前开始分配。然而，由于在显示区域前面涉及到预充电、而显示区域的后面又涉及到消影问题，若直接从显示区域起始时间或结束时间开始分配显示数据，即恒流源导通的时间靠近显示区域前面或后面，这势必将影响到前面预充电和消影过程，导致显示效果差。上述问题成为亟需解决的问题。发明内容本申请的目的在于克服现有技术的不足，提供一种显示驱动方法和显示驱动芯片，以显著提升LED显示效果。本申请第一方面提供一种显示驱动方法，该显示驱动方法包括：确认显示区域中的第一时间点t1，t0＜t1＜t2，t0、t2分别表示所述显示区域的开始时间、结束时间；将PWM波均衡分配至所述第一时间点t1的两侧；或，将PWM波沿第一时间点t1分配至所述第一时间点t1的一侧，若该侧可分配区域宽度小于所述PWM波宽度，则将超出所述可分配区域宽度的PWM波部分沿第一时间点t1分配至所述第一时间点t1的另一侧；基于所述PWM波输出恒定电流。本申请通过在显示区域的中间位置，开始生长PWM波，以尽量降低对预充电以及消影的影响，提升显示效果。可选地，将PWM波均衡分配至所述第一时间点t1的两侧，包括：所述第一时间点t1的两侧分配的PWM波宽度对应的灰度值大小分别为M、N，M=Q0*A+Y，N=Q0*，其中，A、B为X/2的整数部分、余数部分，X、Y为Q/Q0的整数部分、余数部分，Q为灰度数据的灰度值，Q0为第一阈值。可选地，将所述PWM波均衡分配至所述第一时间点t1的两侧，包括：所述第一时间点t1的两侧分配的PWM波宽度对应的灰度值大小分别为M、N，N=M+B；其中，M、B分别为Q/2的整数部分和余数部分，Q为灰度数据的灰度值。可选地，t1=/2。可选地，所述PWM波包括展宽部分，所述展宽部分位于所述PWM波的前面或后面。可选地，显示驱动方法还包括：在所述显示区域分配的灰度值不为0时，在所述显示区域外分时将列线预充电到对应电位；在所述显示区域分配的灰度值为0时，在显示单元内分时将所述列线预充电到对应电位；其中，显示单元指代显示数据在一个子帧内的最小显示分组，所述显示区域包括于所述显示单元。可选地，所述第一时间点t1根据显示效果可配置。本申请另一方面提供了一种显示驱动芯片。其包括：存储电路，用于配置显示区域中的第一时间点t1，t0＜t1＜t2,其中，t0、t2分别表示所述显示区域的开始时间、结束时间；PWM波产生电路，被配置为：将所述PWM波均衡分配至所述第一时间点t1的两侧；或，将PWM波沿第一时间点t1分配至所述第一时间点t1的一侧，若该侧可分配区域宽度小于所述PWM波宽度，则将超出所述可分配区域宽度的PWM波部分沿第一时间点t1分配至所述第一时间点t1的另一侧；通道电流输出模块，基于所述PWM波输出恒定电流。可选地，所述第一时间点t1的两侧分配的PWM波宽度对应的灰度值大小分别为M、N，M=Q0*A+Y，N=Q0*，其中，A、B为X/2的整数部分、余数部分，X、Y为Q/Q0的整数部分、余数部分，Q为灰度数据的灰度值，Q0为第一阈值。可选地，所述第一时间点t1的两侧分配的PWM波宽度对应的灰度值大小分别为M、N，N=M+B；其中，M、B分别为Q/2的整数部分和余数部分，Q为灰度数据的灰度值。可选地，所述PWM波包括展宽部分，所述展宽部分位于所述PWM波的前面或后面。可选地，该显示驱动芯片，还包括：预充电电路，在所述显示区域分配的灰度值不为0时，在所述显示区域外分时将列线预充电到对应电位；在所述显示区域分配的灰度值为0时，在显示单元内分时将所述列线预充电到对应电位；其中，显示单元指代灰度数据在一个子帧内的最小显示分组，所述显示区域包括于所述显示单元。可选地，所述第一时间点t1根据显示效果可配置。本申请的有益效果是：和现有技术相比，本申请提供了一种显示驱动方法和显示驱动芯片，其通过合理地分配显示数据位置，可以尽量降低对前面预充电和后面消影的影响，提升显示效果。附图说明图1是现有技术提供的PWM波生长方式；图2是本发明提供的灰度数据显示的原理图；图3是本发明一实施例的PWM波生长方式；图4是本发明另一实施例的PWM波生长方式；图5是本发明一实施例的显示驱动芯片。具体实施方式下面结合具体实施例进一步详细描述本申请的技术方案，但本申请的保护范围不局限于以下所述。图1示出了现有技术的PWM波生长方式。设显示区域的开始时间、结束时间分别为t0、t2，PWM波的起始时间是t3，结束时间是t4。现有技术往往沿着显示区域的开始时间t0向后生长PWM波或者沿着显示区域的结束时间t2向前生长PWM波。图2提供了灰度数据显示的原理图。一个完整的显示帧被划分为多个子帧，一个完整的子帧包括多个显示分组。本申请所谓显示单元，指代灰度数据在一个显示子帧内的最小显示分组，所述显示区域为包括于所述显示单元内的部分，用于分配灰度数据或PWM波。一般而言，在显示区域前存在预充电以消除第一行偏暗，在显示区域后存在消影操作。若采用图1所示的PWM生长方式，所生长的PWM波要不靠近显示区域前方区域，要不就靠近显示区域后方区域，这势必将影响显示效果。图2提供了灰度数据显示的原理图。一个完整的显示帧被划分为多个子帧，一个完整的子帧包括多个显示分组。本申请所谓显示单元，指代灰度数据在一个显示子帧内的最小显示分组，所述显示区域为包括于所述显示单元内的部分，用于分配灰度数据或PWM波。一般而言，在显示区域前存在预充电以消除第一行偏暗，在显示区域后存在消影操作。若采用图1所示的PWM生长方式，所生长的PWM波要不靠近显示区域前方区域，要不就靠近显示区域后方区域，这势必将影响显示效果。为了解决上述问题，本申请一方面提供一种显示驱动方法，具体可为LED显示屏的显示驱动方法。该方法包括：确认显示区域中的第一时间点t1，t0＜t1＜t2，t0、t2分别表示所述显示区域的开始时间、结束时间；将PWM波均衡分配至所述第一时间点t1的两侧；或，将PWM波沿第一时间点t1分配至所述第一时间点t1的一侧，若该侧可分配区域宽度小于所述PWM波宽度，则将超出所述可分配区域宽度的PWM波部分沿第一时间点t1分配至所述第一时间点t1的另一侧；基于所述PWM波输出恒定电流。本申请的显示区域，指代用于分配显示数据的区域，分配了显示数据的区域认为是实际显示区域，其中，PWM波的宽度与灰度数据的大小对应，二者均反应了灯珠的点亮时长。如图1、3所示所示，显示区域的开始时间和结束时间分别为t0、t2，可分配显示数据的区域宽度为t2-t0，而高电平部分即为实际显示区域，即实际分配了灰度数据或PWM波的部分。需要了解，驱动芯片根据PWM波控制灯珠是否点亮，例如在上述高电平阶段控制输出恒定电流，从而点亮灯珠，在低电平阶段停止输出恒定电流，灯珠熄灭。高电平的宽度表征灯珠点亮时长。如前所述，现有技术中，如图1所示，若PWM波从显示区域的开始时间t0开始从前往后生长或者从结束时间t2开始从后往前生长，则势必要不对前面的预充电有影响，要不对消影有影响，从而影响低灰显示效果。基于此，本申请提出从中间往两边生长的方法。即寻找t0-t2之间的合适时间点t1，从t1开始生长PWM波。本申请提供两种从t1开始生长的方式，请参见图3-图4。需要说明，本申请的分配到显示区域中的PWM波是连续的一段，如图1、3、4所示，其起始时间、结束时间分别用t3、t4表示，则，t3＜=t1＜=t4。而PWM宽度表征了灰度数据的大小，其用于确定LED灯珠的点亮时长。图3示出了随着灰度数据变化，如何沿着第一时间点t1往两侧均衡生长PWM波的方式。所谓均衡生长，指代t1两侧分配的PWM波的宽度对应的灰度值大小相差不大，例如在允许阈值范围内，如相差Q0，一种实施方式中，灰度值为整数，Q0为整数；在此情况下，可以是，灰度值为1时，分配到一侧，灰度值为2时，则两侧各分配1，灰度值为3时，一侧分配1一侧分配2，灰度值为4时，两侧各分配2。此时Q0=1。当然，Q0还可以是其它值，例如大于1的任意数，或，大于或等于2的整数。图4展示了另一种随着灰度数据变化，如何往t1两侧分配PWM波。在灰度值较小时，可以将PWM沿着t1往其一侧生长，此时，如图4所示，t0=＜t3＜t1，t4=t1；若灰度数据足够大，如图4所示，t1一侧可分配灰度数据的宽度仅能分配的灰度值大小为4，则灰度数据除分配到之前所述的一侧并占满该侧以外，未分配的灰度数据则沿着t1往另一侧生长，结果是，如图4所示，t3=t0，t1＜t4＜=t2。以PWM为t3至t4之间的高电平为例，即，t1一侧全部分配了灰度数据，t1另一侧沿t1开始分配灰度数据。对于第二种方式，即在灰度数据的灰度值较小时，则直接将其分配到t1的一侧，若灰度数据较大时，此时该侧可分配灰度数据的宽度不够，则除了分配部分灰度数据将该侧占满以外，余下未能分配的灰度数据则沿着t1向另一侧分配。一种可能的实施方式中，将PWM波均衡分配至所述第一时间点t1的两侧，此时：第一时间点t1的两侧分配的PWM波宽度对应的灰度值大小分别为M、N，M=Q0*A+Y，N=Q0*，其中，A、B为X/2的整数部分、余数部分，X、Y为Q/Q0的整数部分、余数部分，Q为灰度数据的灰度值，Q0为第一阈值。即，t1两侧的PWM宽度对应的灰度值大小M和N相差不超过Q0。以Q0=2为例，若Q=1、2，则灰度数据全部分配到t1左侧；若Q=3、4，则一侧分配2，另一侧分配1、2；若Q=5、6，则一侧分配2，另一侧分配3、4；若Q=7、8，则一侧分配4，另一侧分配3、4，……。一种可能的实施方式中，将所述PWM波均衡分配至所述第一时间点t1的两侧时，所述第一时间点t1的两侧分配的PWM波宽度对应的灰度值大小分别为M、N，N=M+B；其中，M、B分别为Q/2的整数部分和余数部分，Q为灰度数据的灰度值。如图3所示，灰度数据尽量平均分配到t1两侧。例如，若Q=1，则分配到t1的一侧，若Q=2，则t1的两侧各为1，若Q=3，则一侧为1，一侧为2，若Q=4，则一侧为2，一侧为2，以此类推。一个优选的实施方式中，t1=/2。即第一时间点t1位于显示区域的正中间。可以理解，此时，对于前面预充电和消影的影响进行了折中，最大可能提升显示效果。一个优选的实施方式中，所述PWM波包括展宽部分。假设原始的灰度数据是Q，展宽部分的宽度对应的灰度数据是ADD，则实际显示时，PWM波的宽度对应的总灰度数据是Q+ADD。ADD部分在不同的场景下有不同的用途。一些场景下，其用于和Q组成一个精度更高的灰度数据。例如，实际要显示的灰度数据是3.2T，T指代时钟周期，现有技术中由于硬件限制，仅能显示3T。为了获得精确的3.2T，需要对3T的PWM进行展宽，得到3.2T的PWM波。另一些场景下，需要对低灰数据进行低灰补偿，此时，需要对原始的灰度数据进行补偿，从而得到展宽后的PWM波。不管何种场景，按照上述提出的方式进行生长的PWM波可以是这种展宽后的PWM波。一种实施方式中，前述显示驱动方法还包括：在所述显示区域分配的灰度值不为0时，在所述显示区域外分时将列线预充电到对应电位；在所述显示区域分配的灰度值为0时，在显示单元内分时将所述列线预充电到对应电位；其中，显示单元指代灰度数据在一个子帧内的最小显示分组，所述显示区域包括于所述显示单元。也就是说，在一个显示单元内，若其显示区域分配的灰度值不为0，即LED灯珠会点亮，则换行后，在显示区域之前进行预充电，将列线充电到预定电位。在显示区域结束时间之后，换行前，对列线预充电，以进行消影。在显示区域之内，预充电电路处于关闭状态；在显示区域之外，预充电电路对列线预充电是分时进行的，且各个时段对应有将列线充电至的目标电位。例如，time1开始，预充电电路将列线充电至V1，从time2开始，预充电电路将列线充电至V2，从time3开始，预充电电路关闭，从time4开始，预充电电路将列线充电至V3。当然，预充电过程并不一定如上所述，还可以包括更少或更多个充电阶段。若显示区域分配的灰度值大小为0，表明LED灯珠不会点亮，此时，对列线进行预充电的操作可以根据显示效果位于整个显示单元内。而在显示单元内，同样是分时将列线充电至各个预定的目标电位。而灰度值为0或不为0时，各个阶段对应的目标电位均可根据显示效果来调节。一种可选的实施方式中，第一时间点t1根据显示效果可配置。本申请第二方面提供一种显示驱动芯片，其可执行前述第一方面的显示驱动方法。如图5所示，该显示驱动芯片包括：存储电路，用于配置显示区域中的第一时间点t1，t0＜t1＜t2,其中，t0、t2分别表示所述显示区域的开始时间、结束时间；PWM波产生电路，被配置为：将所述PWM波均衡分配至所述第一时间点t1的两侧；或，将PWM波沿第一时间点t1分配至所述第一时间点t1的一侧，若该侧可分配区域宽度小于所述PWM波宽度，则将超出所述可分配区域宽度的PWM波部分沿第一时间点t1分配至所述第一时间点t1的另一侧；通道电流输出模块，基于所述PWM波输出恒定电流。其中，存储电路可选择为寄存器。一种实施方式中，可以根据显示效果调节t1，以及随着灰度数据增大，如何将PWM波沿着t1进行生长。PWM波产生电路，用于根据灰度数据产生PWM波，且PWM波的位置按照前述两种方式进行生长，即在t1两侧均衡生长，或者在灰度数据的灰度值较小时，在t1一侧生长，较大时除长满该侧以外，余下部分再在另一侧生长。通道电流输出模块可以根据PWM波输出恒定的电流，用于点亮LED灯珠。一些实施方式中，将所述PWM波均衡分配至所述第一时间点t1的两侧时，所述第一时间点t1的两侧分配的PWM波宽度对应的灰度值大小分别为M、N，M=Q0*A+Y，N=Q0*，其中，A、B为X/2的整数部分、余数部分，X、Y为Q/Q0的整数部分、余数部分，Q为灰度数据的灰度值，Q0为第一阈值。一些实施方式中，将所述PWM波均衡分配至所述第一时间点t1的两侧时，所述第一时间点t1的两侧分配的PWM波宽度对应的灰度值大小分别为M、N，N=M+B；其中，M、B分别为Q/2的整数部分和余数部分，Q为灰度数据的灰度值。一些实施方式中，所述PWM波包括展宽部分。关于展宽部分的描述如前所述，在此不进行赘述。一些实施方式中，显示驱动芯片还包括：预充电电路，在所述显示区域分配的灰度值不为0时，在所述显示区域外分时将列线预充电至对应电位；在所述显示区域分配的灰度值为0时，在显示单元内分时将列线预充电到对应电位；其中，显示单元指代灰度数据在一个子帧内的最小显示分组，所述显示区域包括于所述显示单元。本申请所述的分时将列线预充电到对应电位，指代在不同时间点，预充电电路开始依次将列线预充电到预先设置的对应目标电位。例如，time1开始，预充电电路将列线充电至V1，从time2开始，预充电电路将列线充电至V2，从time3开始，预充电电路将列线充电至V3。一些实施方式中，所述第一时间点t1根据显示效果可配置。一个优选的实施方式中，t1=/2。即第一时间点位于显示区域的正中间。可以理解，此时，对于预充电和消影的影响进行了折中，最大可能提升显示效果。以上所述仅是本申请的优选实施方式，应当理解本申请并非局限于本文所披露的形式，不应看作是对其他实施例的排除，而可用于各种其他组合、修改和环境，并能够在本文所述构想范围内，通过上述教导或相关领域的技术或知识进行改动。而本领域人员所进行的改动和变化不脱离本申请的精神和范围，则都应在本申请所附权利要求的保护范围内。
