标题title
激光打标系统的标定方法
摘要abst
本发明涉及一种激光打标系统的标定方法，包括：将标定板水平放置在激光可作用的打标区域；激光打标系统在标定板表面区域上进行激光打标，得到半径为的圆、线段以及线段；相机获取打标完成后的标定板表面的图像；计算所述图像中的圆在图像坐标系下的半径、圆心坐标和纵向分辨率；计算线段在图像坐标系下的归一化方向向量和线段在图像坐标系下的归一化方向向量；根据得到的振镜坐标系下的参数，以及得到的图像坐标系下的参数、、、、，计算得到图像坐标系与振镜坐标系的变换参数。本申请能够简化相机图像坐标系与激光振镜坐标系之间的变换关系，成本低，精度高，不受相机畸变影响，且操作简单。
权利要求书clms
1.一种激光打标系统的标定方法，其特征在于，该方法包括如下步骤：S1，将标定板水平放置在激光可作用的打标区域；S2，激光打标系统在标定板表面区域上进行激光打标，得到半径为的圆、线段/＞以及线段/＞；S3，相机获取打标完成后的标定板表面的图像；S4，计算所述步骤S3的图像中的圆在图像坐标系下的半径、圆心坐标/＞和纵向分辨率/＞；S5，计算所述步骤S2中线段在图像坐标系下的归一化方向向量/＞和线段/＞在图像坐标系下的归一化方向向量/＞；S6，根据所述步骤S2得到的振镜坐标系下的参数，以及所述步骤S4和步骤S5中得到的图像坐标系下的参数/＞、/＞、/＞、/＞、/＞，计算得到图像坐标系与振镜坐标系的变换参数/＞。2.如权利要求1所述的方法，其特征在于：所述标定板为平坦光滑且在激光作用下能留下清晰刻印的任意物件。3.如权利要求2所述的方法，其特征在于，所述的步骤S2包括：步骤S2-1、以振镜坐标系的原点为圆心，打标出一个半径为的圆；步骤S2-2、在振镜坐标系下，以点和点/＞为端点打标出第一条线段/＞；步骤S2-3、在振镜坐标系下，以点和点/＞为端点打标出第二条线段。4.如权利要求3所述的方法，其特征在于，所述的步骤S4包括：图像中的圆在图像坐标系下的半径是指圆半径的长度在图像上所占的像素个数；图像中的圆在图像坐标系下圆心坐标/＞是指圆的圆心在图像上的像素坐标。5.如权利要求4所述的方法，其特征在于，所述的步骤S4还包括：步骤S4-1、对图像进行Canny边缘检测；步骤S4-2、对边缘图像的每一个非零点，计算x和y方向的Sobel一阶导数，得到该非零点的梯度；步骤S4-3、遍历边缘图像的每一个非零点，计算其梯度方向的直线；步骤S4-4、计算所有直线的交点坐标，并初始化累加器，当坐标/＞出现交点时，令累加器/＞；步骤S4-5、寻找累加值最大的累加器，则坐标/＞即为圆心坐标；步骤S4-6、对边缘图像的每一个非零点，计算与圆心坐标/＞的距离/＞，并初始化累加器/＞和距离集合/＞，当时，令累加器/＞，同时把/＞添加到集合/＞中；步骤S4-7、寻找累加值最大的累加器，则/＞，其中/＞表示求集合/＞中所有元素的平均值。6.如权利要求5所述的方法，其特征在于，所述的步骤S5包括：步骤S5-1、对图像进行Canny边缘检测；步骤S5-2、初始化累加器的累加值均为0，同时初始化点集合均为空集，其中/＞为图像的对角线的像素个数；步骤S5-3、遍历边缘图像的每一个非零点，对于所有/＞，计算；步骤S5-4、寻找累加值最大的累加器，然后计算点集/＞中的所有点与点/＞的距离，并找到距离最大的点/＞，计算得到/＞：；步骤S5-5、寻找累加值第二大的累加器，然后计算点集/＞中的所有点与点/＞的距离，并找到距离最大的点/＞，计算得到/＞：。7.如权利要求6所述的方法，其特征在于，所述的步骤S5-3包括：当时，令累加器/＞，同时令/＞加入点集/＞中。8.如权利要求7所述的方法，其特征在于，所述的步骤S6包括：所述变换参数建立了图像坐标系与振镜坐标系的变换关系，图像坐标系上的任意点/＞均可通过变换参数/＞计算得到其对应的振镜坐标系下的坐标，计算方法为：。
说明书desc
技术领域本发明涉及光机电一体化技术领域，尤其涉及一种激光打标系统的标定方法。背景技术激光打标技术是一门综合了机电数控、光电子和计算机等技术为一体的光机电一体化加工技术，其利用高能量密度激光的热效应对工件表面进行局部烧蚀，使表面材料汽化或者发生颜色变化进而留下永久性的标记。激光打标已在汽车制造，医疗仪器制造，产品包装，手机制造，电子元件制造等众多领域得到了大量的应用。相对于其他标刻技术，其有着速度快，无需接触，损伤小，视觉效果丰富等特点。机器视觉是一门涉及人工智能、神经生物学、计算机科学、图像处理、模式识别等诸多领域的交叉学科，是实现生产过程自动化的关键技术之一。利用相机成像然后通过对所采集到的图像进行处理以满足实际应用需要。目前的机器视觉已经能够适应于各种恶劣的工业环境，对高速运行的工业流水线也有快速的反应和很高精准度。因此，把机器视觉与激光打标系统相结合，由工业相机代替人力完成视觉定位、目标检测和轮廓提取，在节省人力的同时还能够避免工人因为长久工作而造成的一些误操作，在提高工作效率的前提下还能够减少出错率。这个系统在应用上的优势给它未来的发展提供了广阔的前景。由于机器视觉系统处理的图像是基于图像坐标系的，而激光打标系统的打标坐标是基于振镜坐标系的，因此实现机器视觉引导激光打标系统的关键之一就是建立图像坐标系与振镜坐标系的变换关系，该过程称为系统标定，通过标定得到变换关系，从而计算出图像上任意一点在振镜坐标系下对应的坐标。目前的由机器视觉引导的激光打标系统的标定方法中，常见的方法均采用3*3的透射变换矩阵来表示图像坐标系与振镜坐标系之间的变换关系，该透射变换矩阵的求解过程复杂，一些方法需要借助标准的标定工具，所述标准的标定工具通常价格高昂，且流程操作复杂，提高了成本；另一些方法则需要使用激光刻下复杂的图案，增加了计算机对图像识别的要求，提高了复杂度，同时由于相机畸变而无法保证标定精度。发明内容有鉴于此，有必要提供一种激光打标系统的标定方法，其能够简化相机图像坐标系与激光振镜坐标系之间的变换关系，从而获得一种成本低、精度高、不受相机畸变影响、且操作简单的标定方法。本发明提供一种激光打标系统的标定方法，该方法包括如下步骤：S1，将标定板水平放置在激光可作用的打标区域；S2，激光打标系统在标定板表面区域上进行激光打标，得到半径为的圆、线段以及线段/＞；S3，相机获取打标完成后的标定板表面的图像；S4，计算所述步骤S3的图像中的圆在图像坐标系下的半径、圆心坐标/＞和纵向分辨率/＞；S5，计算所述步骤S2中线段在图像坐标系下的归一化方向向量/＞和线段/＞在图像坐标系下的归一化方向向量/＞；S6，根据所述步骤S2得到的振镜坐标系下的参数，以及所述步骤S4和步骤S5中得到的图像坐标系下的参数/＞、/＞、/＞、/＞、/＞，计算得到图像坐标系与振镜坐标系的变换参数/＞。具体地，所述标定板为平坦光滑且在激光作用下能留下清晰刻印的任意物件。具体地，所述的步骤S2包括：步骤S2-1、以振镜坐标系的原点为圆心，打标出一个半径为的圆；步骤S2-2、在振镜坐标系下，以点和点/＞为端点打标出第一条线段；步骤S2-3、在振镜坐标系下，以点和点/＞为端点打标出第二条线段/＞。具体地，所述的步骤S4包括：图像中的圆在图像坐标系下的半径是指圆半径的长度在图像上所占的像素个数；图像中的圆在图像坐标系下圆心坐标/＞是指圆的圆心在图像上的像素坐标。具体地，所述的步骤S4还包括：步骤S4-1、对图像进行Canny边缘检测；步骤S4-2、对边缘图像的每一个非零点，计算x和y方向的Sobel一阶导数，得到该非零点的梯度；步骤S4-3、遍历边缘图像的每一个非零点，计算其梯度方向的直线；步骤S4-4、计算所有直线的交点坐标，并初始化累加器，当坐标/＞出现交点时，令累加器/＞；步骤S4-5、寻找累加值最大的累加器，则坐标/＞即为圆心坐标/＞；步骤S4-6、对边缘图像的每一个非零点，计算与圆心坐标/＞的距离/＞，并初始化累加器/＞和距离集合，当/＞时，令累加器/＞，同时把/＞添加到集合/＞中；步骤S4-7、寻找累加值最大的累加器，则/＞，其中表示求集合/＞中所有元素的平均值。具体地，所述的步骤S5包括：步骤S5-1、对图像进行Canny边缘检测；步骤S5-2、初始化累加器的累加值均为0，同时初始化点集合均为空集，其中/＞为图像的对角线的像素个数；步骤S5-3、遍历边缘图像的每一个非零点，对于所有/＞，计算/＞；步骤S5-4、寻找累加值最大的累加器，然后计算点集/＞中的所有点与点/＞的距离，并找到距离最大的点/＞，计算得到/＞：；步骤S5-5、寻找累加值第二大的累加器，然后计算点集/＞中的所有点与点/＞的距离，并找到距离最大的点/＞，计算得到/＞：。具体地，所述的步骤S5-3包括：当时，令累加器/＞，同时令/＞加入点集/＞中。具体地，所述的步骤S6包括：所述变换参数建立了图像坐标系与振镜坐标系的变换关系，图像坐标系上的任意点/＞均可通过变换参数/＞计算得到其对应的振镜坐标系下的坐标/＞，计算方法为：。本申请只需借助一张相纸即可完成标定，具有低成本的有益效果；标定过程中只需要激光打标系统在标定板上打标出非常简单的图案，降低了标定工作量；同时由于图案简单，能够很容易地被计算机准确地识别，其中圆心、半径以及直线的识别均对相机畸变不敏感，因而保证了标定的精度。附图说明图1为本发明激光打标系统的标定方法的流程图；图2为本发明实施例提供的由一个圆和非对称十字线组成的标定图案在振镜坐标系下的示意图；图3为本发明实施例提供的被激光刻下标定图案并标注了图像坐标系的图像示意图。具体实施方式下面结合附图及具体实施例对本发明作进一步详细的说明。请参阅图1，是本发明激光打标系统的标定方法较佳实施例的作业流程图。步骤S1，把一块平坦光滑且在激光作用下能留下清晰刻印的任意物件水平放置在激光可作用的打标区域。步骤S2，激光打标系统在标定板表面区域上进行激光打标，得到半径为的圆、线段/＞以及线段/＞。具体包括：步骤S2-1、以振镜坐标系的原点为圆心，打标出一个半径为的圆。步骤S2-2、在振镜坐标系下，以点和点/＞为端点打标出第一条线段。步骤S2-3、在振镜坐标系下，以点和点/＞为端点打标出第二条线段/＞。步骤S3，相机获取打标完成后的标定板表面的图像。步骤S4，计算所述步骤S3的图像中的圆在图像坐标系下的半径、圆心坐标和纵向分辨率/＞。请参考图3，图像中的圆在图像坐标系下的半径是指圆半径的长度在图像上所占的像素个数，图像中的圆在图像坐标系下圆心坐标/＞是指圆的圆心在图像上的像素坐标；对于横向分辨率为/＞、纵向分辨率为/＞的图像，/＞和/＞的计算方法为：步骤S4-1、对图像进行Canny边缘检测。步骤S4-2、对边缘图像的每一个非零点，计算x和y方向的Sobel一阶导数，得到该非零点的梯度。步骤S4-3、遍历边缘图像的每一个非零点，计算其梯度方向的直线。步骤S4-4、计算所有直线的交点坐标，并初始化累加器，当坐标/＞出现交点时，令累加器/＞；步骤S4-5、寻找累加值最大的累加器，则坐标/＞即为圆心坐标/＞；步骤S4-6、对边缘图像的每一个非零点，计算与圆心坐标/＞的距离/＞，并初始化累加器/＞和距离集合，当/＞时，令累加器/＞，同时把/＞添加到集合/＞中；步骤S4-7、寻找累加值最大的累加器，则/＞，其中表示求集合/＞中所有元素的平均值。步骤S5，计算所述步骤S2中线段在图像坐标系下的归一化方向向量/＞和线段/＞在图像坐标系下的归一化方向向量/＞。具体包括：步骤S5-1、对图像进行Canny边缘检测。步骤S5-2、初始化累加器的累加值均为0，同时初始化点集合均为空集，其中/＞为图像的对角线的像素个数。步骤S5-3、遍历边缘图像的每一个非零点，对于所有/＞，计算/＞，当/＞时，令累加器/＞，同时令/＞加入点集/＞中。步骤S5-4、寻找累加值最大的累加器，然后计算点集/＞中的所有点与点/＞的距离，并找到距离最大的点/＞，计算得到/＞：步骤S5-5、寻找累加值第二大的累加器，然后计算点集/＞中的所有点与点/＞的距离，并找到距离最大的点/＞，计算得到/＞：步骤S6，根据所述步骤S2得到的振镜坐标系下的参数，以及所述步骤S4和步骤S5中得到的图像坐标系下的参数/＞、/＞、/＞、/＞、/＞，计算得到图像坐标系与振镜坐标系的变换参数/＞：所述变换参数建立了图像坐标系与振镜坐标系的变换关系，图像坐标系上的任意点/＞均可通过变换参数/＞计算得到其对应的振镜坐标系下的坐标/＞，计算方法为：。本申请仅用4个参数即可以表示图像坐标系与振镜坐标系的变换关系，代替了3*3的透射变换矩阵，处理过程简单快速，简化了相机图像坐标系与激光振镜坐标系之间的变换关系。本申请无需计算透射变换矩阵，透射变换矩阵的计算需要多个对应的特征点进而需要激光刻出复杂的标定图案，不仅增加了标定流程的工作量，还增加了计算机识别图像的难度，影响标定精度，而本申请简化标定图案即可计算出用于表示图像坐标系与振镜坐标系的变换关系的4个参数，且标定图案很容易被计算机所识别，降低了标定工作量，提高了标定精度。本申请的标定图案仅由一个圆和两条直线组成，不受相机畸变影响，提高了标定精度。而计算透射变换矩阵需要识别图像上多个特征点的图像坐标，所述图像坐标对相机畸变非常敏感，导致标定精度下降，一些方法虽然采取了措施对畸变进行矫正，但同时引入了大量额外的操作，大大增加了标定流程的工作量。本申请能够简化相机图像坐标系与激光振镜坐标系之间的变换关系，并简化标定图案，成本低，精度高，不受相机畸变影响，且操作简单。虽然本发明参照当前的较佳实施方式进行了描述，但本领域的技术人员应能理解，上述较佳实施方式仅用来说明本发明，并非用来限定本发明的保护范围，任何在本发明的精神和原则范围之内，所做的任何修饰、等效替换、改进等，均应包含在本发明的权利保护范围之内。
