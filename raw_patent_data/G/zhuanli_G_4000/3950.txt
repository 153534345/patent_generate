标题title
一种无人机的光流定位方法、装置及无人机
摘要abst
本发明公开一种无人机的光流定位方法、装置及无人机，其中，方法利用简单的计算方式对无人机基于目标周期的初始位移数据、初始姿态数据和初始高度数据进行预处理，以便精准计算无人机基于目标周期的第一坐标轴光流速度、第二坐标轴光流速度、第一坐标轴飞行速度、第二坐标轴飞行速度，最终实现快速对无人机当期位置的高精准定位，无需进行复杂参数调试以及参数匹配。
权利要求书clms
1.一种无人机的光流定位方法，其特征在于，包括如下步骤：实时采集无人机基于目标周期的初始位移数据、初始姿态数据和初始高度数据；基于目标周期的初始位移数据、初始姿态数据和初始高度数据，对无人机因姿态运动产生的位移偏移量进行补偿得到在目标周期内的当前位移数据；基于预设限幅高度范围，对所述初始高度数据进行预处理；基于所述目标周期内的当前位移数据，计算第一坐标轴光流速度和第二坐标轴光流速度；基于所述目标周期内的当前位移数据、所述第一坐标轴光流速度和第二坐标轴光流速度，计算第一坐标轴飞行速度和第二坐标轴飞行速度；基于所述第一坐标轴飞行速度、所述第二坐标轴飞行速度、目标周期的上一周期的无人机所处位置，计算无人机当前位置；基于所述无人机当前位置，对所述无人机进行光流定位。2.根据权利要求1所述的无人机的光流定位方法，其特征在于，基于目标周期的初始位移数据、初始姿态数据和初始高度数据，对无人机因姿态运动产生的位移偏移量进行补偿得到在目标周期内的当前位移数据，包括：通过如下公式计算无人机基于目标周期的目标位移数据，并将上一周期的目标位移数据更新为目标周期的目标位移数据；；为目标周期的第一坐标轴目标位移数据， 为目标周期的第二坐标轴目标位移数据，为第一滤波系数，为上一周期的第一坐标轴目标位移数据，为上一周期的第二坐标轴目标位移数据，为目标周期的第一坐标轴初始位移数据，为目标周期的第二坐标轴初始位移数据；通过如下公式计算无人机基于目标周期的目标姿态数据；；其中， 为目标周期的第一坐标轴目标姿态数据，为目标周期的第二坐标轴目标姿态数据，为目标周期的初始姿态数据中的无人机俯仰角度，为目标周期的初始姿态数据中的无人机滚动角度，为上一周期的初始姿态数据中的无人机俯仰角度，为上一周期的初始姿态数据中的无人机滚动角度；通过如下公式对无人机因姿态运动产生的位移偏移量进行补偿；；其中，为目标周期的第一坐标轴当前位移数据，为目标周期的第二坐标轴当前位移数据。3.根据权利要求1所述的无人机的光流定位方法，其特征在于，基于预设限幅高度范围，对所述初始高度数据进行预处理，通过如下公式执行：；其中，为预处理后的目标高度数据，为所述预设限幅高度范围。4.根据权利要求1所述的无人机的光流定位方法，其特征在于，基于所述目标周期内的当前位移数据，计算第一坐标轴光流速度和第二坐标轴光流速度，包括：通过如下公式对所述目标周期内的当前位移数据进行解算；；其中，为目标周期的第一坐标轴光流速度，为目标周期的第二坐标轴光流速度，为所述目标周期；通过如下公式对所述目标周期内的当前位移数据进行一阶滤波，并将上一周期内的当前位移数据更新为目标周期的当前位移数据；；其中，为第二滤波系数，为上一周期的第一坐标轴光流速度，为上一周期的第二坐标轴光流速度。5.根据权利要求1所述的无人机的光流定位方法，其特征在于，基于所述目标周期内的当前位移数据、所述第一坐标轴光流速度和第二坐标轴光流速度，计算第一坐标轴飞行速度和第二坐标轴飞行速度，包括：通过如下公式计算基于目标周期的无人机当前加速度；；其中，为目标周期的第一坐标轴当前加速度，为目标周期的第二坐标轴当前加速度，为无人机坐标系下的坐标转换矩阵，为第一坐标轴预设加速度，为第二坐标轴预设加速度，为第三坐标轴预设加速度；通过如下公式计算所述第一坐标轴飞行速度、所述第二坐标轴飞行速度，并将上一周期的第一坐标轴飞行速度更新为目标周期的第一坐标轴飞行速度，将所述第二坐标轴飞行速度更新为目标周期的第二坐标轴飞行速度；；；其中，为第一预设坐标参数，为第三滤波系数，为第二预设坐标参数，为上一周期的第一坐标轴飞行速度，为上一周期的第二坐标轴飞行速度，为目标周期的第一坐标轴飞行速度，为目标周期的第二坐标轴飞行速度。6.根据权利要求1所述的无人机的光流定位方法，其特征在于，基于所述第一坐标轴飞行速度、所述第二坐标轴飞行速度和目标周期的上一周期的无人机所处位置，计算无人机当前位置，通过如下公式执行：；其中，为第一坐标轴当前坐标，为第二坐标轴当前坐标，为上一周期的第一坐标轴当前坐标，为第二周期的第二坐标轴当前坐标。7.一种无人机的光流定位装置，其特征在于，包括如下模块：数据采集模块，用于实时采集无人机基于目标周期的初始位移数据、初始姿态数据和初始高度数据；数据补偿模块，用于基于目标周期的初始位移数据、初始姿态数据和初始高度数据，对无人机因姿态运动产生的位移偏移量进行补偿得到在目标周期内的当前位移数据；高度处理模块，用于基于预设限幅高度范围，对所述初始高度数据进行预处理；光流速度计算模块，用于基于所述目标周期内的当前位移数据，计算第一坐标轴光流速度和第二坐标轴光流速度；飞行速度计算模块，用于基于所述目标周期内的当前位移数据、所述第一坐标轴光流速度和第二坐标轴光流速度，计算第一坐标轴飞行速度和第二坐标轴飞行速度；位置计算模块，用于基于所述第一坐标轴飞行速度、所述第二坐标轴飞行速度、目标周期的上一周期的无人机所处位置，计算无人机当前位置；光流定位模块，用于基于所述无人机当前位置，对所述无人机进行光流定位。8.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机指令，所述计算机指令用于使所述计算机执行权利要求1至6中任一项所述的无人机的光流定位方法。9.一种无人机，其特征在于，包括：存储器、处理器、光流传感器、高度传感器和姿态传感器，所述存储器、所述处理器、所述光流传感器、所述高度传感器和所述姿态传感器之间互相通信连接，所述存储器中存储有计算机指令，所述处理器通过执行所述计算机指令，从而执行权利要求1至6中任一项所述的无人机的光流定位方法。
说明书desc
技术领域本发明涉及无人机定位技术领域，具体涉及一种无人机的光流定位方法、装置及无人机。背景技术光流定位是一种常用、成本低的无人机自主定位方法。在无GPS信号的情况下，在无人机底部安装光流传感器实时采集图像数据，并通过光流算法计算间隔两帧图像的位移，实现自主定位。近年来，随着科学技术的日益发展，无人机已被广泛应用于军事领域和民用领域中，如在室外环境中用于空中预警、低空摄影，室内环境中用于情报侦查、搜索救援等。然而，无人机能否实时感知自身的位置信息和速度信息对于其实现自主飞行至关重要。通过无人机进行高精度光流定位的实现过程中，需要去除高度、姿态运动以及自旋运动的影响，然后与惯性测量的加计信息进行数据融合。传统方法在去除高度、姿态运动等影响时，需要通过大量的试验进行参数调试，获得匹配的延迟、补偿参数，且在应用时均采用较为复杂的EKF滤波算法才能获得较高精度的定位。因此，传统无人机光流高精度定位方法存在参数调试与解算较为复杂。发明内容因此，本发明要解决的技术问题在于克服现有技术中的无人机光流高精度定位方法存在参数调试与解算较为复杂的问题，从而提供一种光流定位方法、装置及无人机。根据第一方面，本发明实施例提供一种无人机的光流定位方法，包括如下步骤：实时采集无人机基于目标周期的初始位移数据、初始姿态数据和初始高度数据；基于目标周期的初始位移数据、初始姿态数据和初始高度数据，对无人机因姿态运动产生的位移偏移量进行补偿得到在目标周期内的当前位移数据；基于预设限幅高度范围，对所述初始高度数据进行预处理；基于所述目标周期内的当前位移数据，计算第一坐标轴光流速度和第二坐标轴光流速度；基于所述目标周期内的当前位移数据、所述第一坐标轴光流速度和第二坐标轴光流速度，计算第一坐标轴飞行速度和第二坐标轴飞行速度；基于所述第一坐标轴飞行速度、所述第二坐标轴飞行速度、目标周期的上一周期的无人机所处位置，计算无人机当前位置；基于所述无人机当前位置，对所述无人机进行光流定位。在一种具体的实施方式中，基于目标周期的初始位移数据、初始姿态数据和初始高度数据，对无人机因姿态运动产生的位移偏移量进行补偿得到在目标周期内的当前位移数据，包括：通过如下公式计算无人机基于目标周期的目标位移数据，并将上一周期的目标位移数据更新为目标周期的目标位移数据；；为目标周期的第一坐标轴目标位移数据， 为目标周期的第二坐标轴目标位移数据，为第一滤波系数，为上一周期的第一坐标轴目标位移数据，为上一周期的第二坐标轴目标位移数据，为目标周期的第一坐标轴初始位移数据，为目标周期的第二坐标轴初始位移数据；通过如下公式计算无人机基于目标周期的目标姿态数据；；其中， 为目标周期的第一坐标轴目标姿态数据，为目标周期的第二坐标轴目标姿态数据，为目标周期的初始姿态数据中的无人机俯仰角度，为目标周期的初始姿态数据中的无人机滚动角度，为上一周期的初始姿态数据中的无人机俯仰角度，为上一周期的初始姿态数据中的无人机滚动角度；通过如下公式对无人机因姿态运动产生的位移偏移量进行补偿；；其中，为目标周期的第一坐标轴当前位移数据，为目标周期的第二坐标轴当前位移数据。在一种具体的实施方式中，基于预设限幅高度范围，对所述初始高度数据进行预处理，通过如下公式执行：；其中，为预处理后的目标高度数据，为所述预设限幅高度范围。在一种具体的实施方式中，基于所述目标周期内的当前位移数据，计算第一坐标轴光流速度和第二坐标轴光流速度，包括：通过如下公式对所述目标周期内的当前位移数据进行解算；；其中，为目标周期的第一坐标轴光流速度，为目标周期的第二坐标轴光流速度，为所述目标周期；通过如下公式对所述目标周期内的当前位移数据进行一阶滤波，并将上一周期内的当前位移数据更新为目标周期的当前位移数据；；其中，为第二滤波系数，为上一周期的第一坐标轴光流速度，为上一周期的第二坐标轴光流速度。在一种具体的实施方式中，基于所述目标周期内的当前位移数据、所述第一坐标轴光流速度和第二坐标轴光流速度，计算第一坐标轴飞行速度和第二坐标轴飞行速度，包括：通过如下公式计算基于目标周期的无人机当前加速度；；其中，为目标周期的第一坐标轴当前加速度，为目标周期的第二坐标轴当前加速度，为无人机坐标系下的坐标转换矩阵，为第一坐标轴预设加速度，为第二坐标轴预设加速度，为第三坐标轴预设加速度；通过如下公式计算所述第一坐标轴飞行速度、所述第二坐标轴飞行速度，并将上一周期的第一坐标轴飞行速度更新为目标周期的第一坐标轴飞行速度，将所述第二坐标轴飞行速度更新为目标周期的第二坐标轴飞行速度；；；其中，为第一预设坐标参数，为第三滤波系数，为第二预设坐标参数，为上一周期的第一坐标轴飞行速度，为上一周期的第二坐标轴飞行速度，为目标周期的第一坐标轴飞行速度，为目标周期的第二坐标轴飞行速度。在一种具体的实施方式中，基于所述第一坐标轴飞行速度、所述第二坐标轴飞行速度和目标周期的上一周期的无人机所处位置，计算无人机当前位置，通过如下公式执行：；其中，为第一坐标轴当前坐标，为第二坐标轴当前坐标，为上一周期的第一坐标轴当前坐标，为第二周期的第二坐标轴当前坐标。根据第二方面，本发明实施例还提供一种无人机的光流定位装置，包括如下模块：数据采集模块，用于实时采集无人机基于目标周期的初始位移数据、初始姿态数据和初始高度数据；数据补偿模块，用于基于目标周期的初始位移数据、初始姿态数据和初始高度数据，对无人机因姿态运动产生的位移偏移量进行补偿得到在目标周期内的当前位移数据；高度处理模块，用于基于预设限幅高度范围，对所述初始高度数据进行预处理；光流速度计算模块，用于基于所述目标周期内的当前位移数据，计算第一坐标轴光流速度和第二坐标轴光流速度；飞行速度计算模块，用于基于所述目标周期内的当前位移数据、所述第一坐标轴光流速度和第二坐标轴光流速度，计算第一坐标轴飞行速度和第二坐标轴飞行速度；位置计算模块，用于基于所述第一坐标轴飞行速度、所述第二坐标轴飞行速度、目标周期的上一周期的无人机所处位置，计算无人机当前位置；光流定位模块，用于基于所述无人机当前位置，对所述无人机进行光流定位。根据第三方面，本发明实施例还提供一种计算机可读存储介质，所述计算机可读存储介质存储有计算机指令，所述计算机指令用于使所述计算机执行第一方面或第一方面任一实施方式中所述的无人机的光流定位方法。根据第四方面，本发明实施例还提供一种无人机，包括：存储器、处理器、光流传感器、高度传感器和姿态传感器，所述存储器、所述处理器、所述光流传感器、所述高度传感器和所述姿态传感器之间互相通信连接，所述存储器中存储有计算机指令，所述处理器通过执行所述计算机指令，从而执行第一方面或第一方面任一实施方式中所述的无人机的光流定位方法。本发明技术方案，具有如下优点：本发明公开一种无人机的光流定位方法、装置及无人机，其中，方法利用简单的计算方式对无人机基于目标周期的初始位移数据、初始姿态数据和初始高度数据进行预处理，以便精准计算无人机基于目标周期的第一坐标轴光流速度、第二坐标轴光流速度、第一坐标轴飞行速度、第二坐标轴飞行速度，最终实现快速对无人机当期位置的高精准定位，无需进行复杂参数调试以及参数匹配。附图说明为了更清楚地说明本发明具体实施方式或现有技术中的技术方案，下面将对具体实施方式或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施方式，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例中无人机的光流定位方法的一个具体示例的流程图；图2为本发明实施例中无人机的光流定位方法的另一个具体示例的流程图；图3为本发明实施例中无人机的光流定位方法的另一个具体示例的流程图；图4为本发明实施例中无人机的光流定位方法的另一个具体示例的流程图；图5为本发明实施例中无人机的光流定位装置的一个具体示例的结构框图；图6为本发明实施例中无人机的硬件结构示意图。具体实施方式下面将结合附图对本发明的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本发明的描述中，需要说明的是，术语“中心”、“上”、“下”、“左”、“右”、“竖直”、“水平”、“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。此外，术语“第一”、“第二”、“第三”仅用于描述目的，而不能理解为指示或暗示相对重要性。在本发明的描述中，需要说明的是，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，还可以是两个元件内部的连通，可以是无线连接，也可以是有线连接。对于本领域的普通技术人员而言，可以具体情况理解上述术语在本发明中的具体含义。此外，下面所描述的本发明不同实施方式中所涉及的技术特征只要彼此之间未构成冲突就可以相互结合。本发明实施例提供一种无人机的光流定位方法，如图1所示，包括如下步骤：步骤S11：实时采集无人机基于目标周期的初始位移数据、初始姿态数据和初始高度数据。例如：目标周期可以用表示；目标周期的初始位移数据可以通过无人机上的光流传感器实时检测，目标周期的初始姿态数据可以通过无人机上的姿态传感器实时检测，目标周期的初始高度数据可以通过无人机上的高度传感器实时检测。其中，目标周期的初始位移数据包括第一坐标轴初始位移位数据，目标周期的第二坐标轴初始位移数据；目标周期的初始姿态数据包括无人机滚动角度，目标周期的初始姿态数据中的无人机俯仰角度。步骤S12：基于目标周期的初始位移数据、初始姿态数据和初始高度数据，对无人机因姿态运动产生的位移偏移量进行补偿得到在目标周期内的当前位移数据。对无人机因姿态运动产生的位移偏移量进行补偿，有利于对无人机当前位置进行精准定位。在一种具体的实施方式中，如图2所示，上述步骤S12，基于目标周期的初始位移数据、初始姿态数据和初始高度数据，对无人机因姿态运动产生的位移偏移量进行补偿得到在目标周期内的当前位移数据，包括：步骤S21：通过如下公式计算无人机基于目标周期的目标位移数据，并将上一周期的目标位移数据更新为目标周期的目标位移数据。； 为目标周期的第一坐标轴目标位移数据， 为目标周期的第二坐标轴目标位移数据，为第一滤波系数，为上一周期的第一坐标轴目标位移数据，为上一周期的第二坐标轴目标位移数据，为目标周期的第一坐标轴初始位移数据，为目标周期的第二坐标轴初始位移数据。上述公式为图2步骤S21中的第一预设公式。上述步骤S21，相当于将目标周期的初始位移数据进行一阶滤波得到目标位移数据，而上一周期的目标位移数据是基于其上一周期的初始位移数据按照上述公式的方式重新代入参数计算得到，进而完成对上一周期的初始位移数据的一阶滤波。将上一周期的目标位移数据更新为目标周期的目标位移数据，便于对目标周期的下一周期的初始位移数据进行一阶滤波。将上一周期的目标位移数据更新为目标周期的目标位移数据，通过如下公式表达：； 步骤S22：通过如下公式计算无人机基于目标周期的目标姿态数据。； 其中， 为目标周期的第一坐标轴目标姿态数据，为目标周期的第二坐标轴目标姿态数据，为目标周期的初始姿态数据中的无人机俯仰角度，为目标周期的初始姿态数据中的无人机滚动角度，为上一周期的初始姿态数据中的无人机俯仰角度，为上一周期的初始姿态数据中的无人机滚动角度。上述公式为图2步骤S22中的第二预设公式。步骤S23：通过如下公式对无人机因姿态运动产生的位移偏移量进行补偿。； 其中，为目标周期的第一坐标轴当前位移数据，为目标周期的第二坐标轴当前位移数据。上述公式为图2步骤S23中的第三预设公式。本发明实施例中的无人机的光流定位方法，通过执行上述步骤S21-步骤S23，无需调试大量的试验参数，也无需使用复杂的滤波算法即可实现对无人机因姿态运动产生的位移偏移量进行补偿，最终有利于精准定位无人机的当前位置。步骤S13：基于预设限幅高度范围，对初始高度数据进行预处理。预设限幅高度范围为，上述步骤S13，基于预设限幅高度范围，对初始高度数据进行预处理，通过如下公式执行：； 其中，为预处理后的目标高度数据，为上述中的预设限幅高度范围。在一具体示例中，例如：优选预设限幅高度范围，则代入上述公式为为如下公式；； 通过上述公式，可以将高度传感器检测无人机的高度限幅在0.1m~1.5m之间，进而简化高度限幅的复杂性，无需调试参数即可实现高度限幅。步骤S14：基于目标周期内的当前位移数据，计算第一坐标轴光流速度和第二坐标轴光流速度。例如：第一坐标轴光流速度为，第二坐标轴光流速度为，目标周期的第一坐标轴当前加速度为，目标周期的第二坐标轴当前加速度为。在一种具体的实施方式中，如图3所示，上述步骤S14，基于目标周期内的当前位移数据，计算第一坐标轴光流速度和第二坐标轴光流速度，包括：步骤S31：通过如下公式对目标周期内的当前位移数据进行解算。； 其中，为目标周期的第一坐标轴光流速度，为目标周期的第二坐标轴光流速度，为目标周期；上述公式，相当于将姿态运动产生的位移偏移量进行补偿得到的目标周期的当前位移数据进行速度解算。上述公式为图3步骤S31中的第四预设公式。步骤S32：通过如下公式对目标周期内的当前位移数据进行一阶滤波，并将上一周期内的当前位移数据更新为目标周期的当前位移数据。； 其中，为第二滤波系数，为上一周期的第一坐标轴光流速度，为上一周期的第二坐标轴光流速度。上述公式为图3步骤S32中的第五预设公式。上一周期的第一坐标轴光流速度 与上一周期的第二坐标轴光流速度 是基于上一周期的上一周期的当前位移数据通过上述公式重新代入参数计算得到。通过如下公式表达将上一周期内的当前位移数据更新为目标周期的当前位移数据；； 将上一周期的当前位移数据更新为目标周期的当前位移数据，以便对目标周期的下一周期的当前位移数据进行一阶滤波。通过上述步骤S31-步骤S32，对目标周期内的当前位移数据进行一阶滤波后计算第一坐标轴光流速度和第二坐标轴光流速度，有利于精准定位无人机的当前位置。步骤S15：基于目标周期内的当前位移数据、第一坐标轴光流速度和第二坐标轴光流速度，计算第一坐标轴飞行速度和第二坐标轴飞行速度。例如：目标周期的第一坐标轴飞行速度为，目标周期的第二坐标轴飞行速度为。在一种具体的实施方式中，如图4所示，上述步骤S15，基于目标周期内的当前位移数据、第一坐标轴光流速度和第二坐标轴光流速度，计算第一坐标轴飞行速度和第二坐标轴飞行速度，包括：步骤S41：通过如下公式计算基于目标周期的无人机当前加速度。； 其中，为目标周期的第一坐标轴当前加速度，为目标周期的第二坐标轴当前加速度，为无人机坐标系下的坐标转换矩阵，为第一坐标轴预设加速度，为第二坐标轴预设加速度，为第三坐标轴预设加速度。上述公式为图4步骤S41中的第六预设公式。步骤S42：通过如下公式计算第一坐标轴飞行速度、第二坐标轴飞行速度，并将上一周期的第一坐标轴飞行速度更新为目标周期的第一坐标轴飞行速度，将第二坐标轴飞行速度更新为目标周期的第二坐标轴飞行速度。； ； 其中，为第一预设坐标参数，为第三滤波系数，为第二预设坐标参数，为上一周期的第一坐标轴飞行速度，为上一周期的第二坐标轴飞行速度，为目标周期的第一坐标轴飞行速度，为目标周期的第二坐标轴飞行速度。上述公式为图4步骤S42中的第七预设公式，上述公式为图4步骤S42中的第八预设公式。上一周期的第一坐标轴飞行速度是基于其上一周期的第一坐标轴飞行速度通过上述公式，重新代入参数计算得到，将上一周期的第一坐标轴飞行速度更新为目标周期的第一坐标轴飞行速度，便于计算下一周期的第一坐标轴飞行速度。同理，上一周期的第二坐标轴飞行速度通过公式，重新代入参数计算得到，将上一周期的第二坐标轴飞行速度更新为目标周期的第二坐标轴飞行速度，便于计算下一周期的第二坐标轴飞行速度。将上一周期的第一坐标轴飞行速度更新为目标周期的第一坐标轴飞行速度，将第二坐标轴飞行速度更新为目标周期的第二坐标轴飞行速度通过如下公式表达：； 上述步骤S42，相当于将目标周期的第一坐标轴飞行速度和第二坐标轴飞行速度进行二阶滤波。通过上述步骤S41-步骤S42，有利于高精度精准定位无人机的当前位置。步骤S16：基于第一坐标轴飞行速度、第二坐标轴飞行速度、目标周期的上一周期的无人机所处位置，计算无人机当前位置。在一种具体的实施方式中，上述步骤S16，基于第一坐标轴飞行速度、第二坐标轴飞行速度和目标周期的上一周期的无人机所处位置，计算无人机当前位置，通过如下公式执行：； 其中，为第一坐标轴当前坐标，为第二坐标轴当前坐标，为上一周期的第一坐标轴当前坐标，为第二周期的第二坐标轴当前坐标。步骤S17：基于无人机当前位置，对无人机进行光流定位。基于无人机当前位置，即可快速精准定位到无人机当前所处位置。本发明实施例中的无人机的光流定位方法，利用简单的计算方式对无人机基于目标周期的初始位移数据、初始姿态数据和初始高度数据进行预处理，以便精准计算无人机基于目标周期的第一坐标轴光流速度、第二坐标轴光流速度、第一坐标轴飞行速度、第二坐标轴飞行速度，最终实现快速对无人机当期位置的高精准定位，无需进行复杂参数调试以及参数匹配。基于相同构思，本发明实施例还提供一种无人机的光流定位装置，如图5所示，包括如下模块：数据采集模块51，用于实时采集无人机基于目标周期的初始位移数据、初始姿态数据和初始高度数据。数据补偿模块52，用于基于目标周期的初始位移数据、初始姿态数据和初始高度数据，对无人机因姿态运动产生的位移偏移量进行补偿得到在目标周期内的当前位移数据。高度处理模块53，用于基于预设限幅高度范围，对初始高度数据进行预处理。光流速度计算模块54，用于基于目标周期内的当前位移数据，计算第一坐标轴光流速度和第二坐标轴光流速度。飞行速度计算模块55，用于基于目标周期内的当前位移数据、第一坐标轴光流速度和第二坐标轴光流速度，计算第一坐标轴飞行速度和第二坐标轴飞行速度。位置计算模块56，用于基于第一坐标轴飞行速度、第二坐标轴飞行速度、目标周期的上一周期的无人机所处位置，计算无人机当前位置。光流定位模块57，用于基于无人机当前位置，对无人机进行光流定位。本发明实施例中的无人机的光流定位装置，利用简单的计算方式对无人机基于目标周期的初始位移数据、初始姿态数据和初始高度数据进行预处理，以便精准计算无人机基于目标周期的第一坐标轴光流速度、第二坐标轴光流速度、第一坐标轴飞行速度、第二坐标轴飞行速度，最终实现快速对无人机当期位置的高精准定位，无需进行复杂参数调试以及参数匹配。本发明实施例还提供了一种无人机，如图6所示，该无人机可以包括处理器61、存储器62、光流传感器63、高度传感器64和姿态传感器65，其中处理器61、存储器62、光流传感器63、高度传感器64和姿态传感器65可以通过总线或者其他方式连接，图6中以通过总线连接为例。处理器61可以为中央处理器。处理器61还可以为其他通用处理器、数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等芯片，或者上述各类芯片的组合。存储器62作为一种非暂态计算机可读存储介质，可用于存储非暂态软件程序、非暂态计算机可执行程序以及模块。处理器61通过运行存储在存储器62中的非暂态软件程序、指令以及模块，从而执行处理器的各种功能应用以及数据处理，即实现上述实施例中的无人机的光流定位方法。存储器62可以包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需要的应用程序；存储数据区可存储处理器61所创建的数据等。此外，存储器62可以包括高速随机存取存储器，还可以包括非暂态存储器，例如至少一个磁盘存储器件、闪存器件、或其他非暂态固态存储器件。在一些实施例中，存储器62可选包括相对于处理器61远程设置的存储器，这些远程存储器可以通过网络连接至处理器61。上述网络的实例包括但不限于电网、互联网、企业内部网、局域网、移动通信网及其组合。所述一个或者多个模块存储在所述存储器62中，当被所述处理器61执行时，执行附图所示实施例中的无人机的光流定位方法。上述计算机设备具体细节可以对应参阅附图所示的实施例中对应的相关描述和效果进行理解，此处不再赘述。本领域技术人员可以理解，实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的程序可存储于一计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，所述存储介质可为磁碟、光盘、只读存储记忆体、随机存储记忆体、快闪存储器、硬盘或固态硬盘（Solid-State Drive，SSD)等；所述存储介质还可以包括上述种类的存储器的组合。显然，上述实施例仅仅是为清楚地说明所作的举例，而并非对实施方式的限定。对于所属领域的普通技术人员来说，在上述说明的基础上还可以做出其它不同形式的变化或变动。这里无需也无法对所有的实施方式予以穷举。而由此所引伸出的显而易见的变化或变动仍处于本发明创造的保护范围之中。
