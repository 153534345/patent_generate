标题title
分组递归式的管线组合实体构建方法、系统、介质及设备
摘要abst
本发明属于测绘技术领域，提供了分组递归式的管线组合实体构建方法、系统、介质及设备，针对利用专业空间分析软件提供的网络分析功能进行连通性计算的不足，提供的技术方案为：采用分组递归式的方法，通过对管线数据和管点数据自身属性的检索和计算，识别出所有互相连通的管点与管线；基于所有互相连通的管点与管线的连通关系构建管线组合地理实体；可以根据连通分析结果构建管线组合实体，不要求管线数据具有准确的流向信息，满足新型基础测绘背景下数据语义化分析需求。
权利要求书clms
1.分组递归式的管线组合实体构建方法，其特征在于，包括如下步骤：获取管线数据和管点数据；采用分组递归式的方法，通过对管线数据和管点数据自身属性的检索和计算，识别出所有互相连通的管点与管线；基于所有互相连通的管点与管线的连通关系构建管线组合地理实体。2.如权利要求1所述的分组递归式的管线组合实体构建方法，其特征在于，所述管线数据和管点数据直接使用管线探测生成。3.如权利要求1所述的分组递归式的管线组合实体构建方法，其特征在于，所述采用分组递归式的方法，通过对管线数据和管点数据自身属性的检索和计算，识别出所有互相连通的管点与管线，包括如下步骤：为管线数据和管点数据添加分组编号字段；根据规则递归计算管线的分组编号值；其中，相互连通的管点与管线分组编号值相同，不连通的管点与管线的分组编号值不相同；将管线数据按照分组编号值进行分组，获取分组中所有管线的起点点号与终点点号集合；在管点数据中查询点号位于所有管线的起点点号与终点点号集合中的管点，将这类管点的分组编号值设置为与对应管线相同；将分组编号值相同的管点与管线实体构建组合实体。4.如权利要求3所述的分组递归式的管线组合实体构建方法，其特征在于，所述根据规则递归计算管线的分组编号值，具体包括：步骤一：从管线数据中任意取出一条分组编号为空的记录，将该管线的分组编号设为i，第一次调用该步骤时，i=1，后续每调用一次，i值增加1，并获取该管线的起点点号与终点点号；步骤二：从剩余的分组编号为空的记录中，查找起点点号或终点点号等于上述管线的起点点号和终点点号的所有管线，将这类管线的分组编号值设置为与上述管线相同，并同时获取这类管线的所有起点点号与终点点号；步骤三：将步骤二查询出的管线起点点号与终点点号作为输入条件，递归调用步骤二；步骤四：若查询结果不为空，则递归调用步骤二，前一次调用的结果，作为下一次调用的输入条件；若查询结果为空，则调用步骤一；若步骤一中没有分组编号为空的记录，则调用步骤五；步骤五：将管线数据按照分组编号值进行分组，获取分组中所有管线的起点点号与终点点号集合，在管点数据中查询点号位于该集合中的管点，将这类管点的分组编号值也设置为与对应管线相同。5.如权利要求4所述的分组递归式的管线组合实体构建方法，其特征在于， 构建管线组合地理实体后，根据组合实体的空间范围与管线类型计算空间身份编码，并将组合关系记录在关系表中。6.分组递归式的管线组合实体构建系统，其特征在于，包括：数据获取模块，其被配置为：获取管线数据和管点数据；递归调用模块，其被配置为：采用分组递归式的方法，通过对管线数据和管点数据自身属性的检索和计算，识别出所有互相连通的管点与管线；实体构建模块，其被配置为：基于所有互相连通的管点与管线的连通关系构建管线组合地理实体。7.如权利要求6所述的分组递归式的管线组合实体构建系统，其特征在于，在递归调用模块中，所述采用分组递归式的方法，通过对管线数据和管点数据自身属性的检索和计算，识别出所有互相连通的管点与管线，包括如下步骤：为管线数据和管点数据添加分组编号字段；根据规则递归计算管线的分组编号值；其中，相互连通的管点与管线分组编号值相同，不连通的管点与管线的分组编号值不相同；将管线数据按照分组编号值进行分组，获取分组中所有管线的起点点号与终点点号集合；在管点数据中查询点号位于所有管线的起点点号与终点点号集合中的管点，将这类管点的分组编号值设置为与对应管线相同；将分组编号值相同的管点与管线实体构建组合实体。8.如权利要求7所述的分组递归式的管线组合实体构建系统，其特征在于，在递归调用模块中，所述根据规则递归计算管线的分组编号值，具体包括：步骤一：从管线数据中任意取出一条分组编号为空的记录，将该管线的分组编号设为i，第一次调用该步骤时，i=1，后续每调用一次，i值增加1，并获取该管线的起点点号与终点点号；步骤二：从剩余的分组编号为空的记录中，查找起点点号或终点点号等于上述管线的起点点号和终点点号的所有管线，将这类管线的分组编号值设置为与上述管线相同，并同时获取这类管线的所有起点点号与终点点号；步骤三：将步骤二查询出的管线起点点号与终点点号作为输入条件，递归调用步骤二；步骤四：若查询结果不为空，则递归调用步骤二，前一次调用的结果，作为下一次调用的输入条件；若查询结果为空，则调用步骤一；若步骤一中没有分组编号为空的记录，则调用步骤五；步骤五：将管线数据按照分组编号值进行分组，获取分组中所有管线的起点点号与终点点号集合，在管点数据中查询点号位于该集合中的管点，将这类管点的分组编号值也设置为与对应管线相同。9.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，该程序被处理器执行时实现了如权利要求1-5任一项所述的分组递归式的管线组合实体构建方法中的步骤。10.一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求1-5中任一项所述的分组递归式的管线组合实体构建方法中的步骤。
说明书desc
技术领域本发明属于测绘技术领域，尤其涉及分组递归式的管线组合实体构建方法、系统、介质及设备。背景技术本部分的陈述仅仅是提供了与本发明相关的背景技术信息，不必然构成在先技术。管线是重要的城市基础设施，随着城市建设的步伐加快，各类地下管线的分布愈发复杂，而管网连通性的可靠构建是进行业务化应用与管理维护的前提。目前常用的连通分析是首先将管线数据处理成网络数据集，利用专业空间分析软件提供的网络分析功能进行连通性计算，这种方式一是需要依靠专业软件，价格昂贵，二是对数据质量要求高，需要依据预设条件对数据进行大量的数据建模工作，耗时长、容错性不高，导致分析结果不完整或分析失败。现有的基于属性构建管线连通关系算法需具备“管线具有确定的流向信息”这一前提，但经对实际管线探测数据分析可知，天然气、热力等类型管线往往并不探测流向信息，这类管线属性中的起点点号与终点点号仅表示管线的两个端点，并非严格意义上的流入点与流出点，导致现有分析算法不具备普适性。另外，管线数据是新型基础测绘背景下重要的地理实体数据类型，连通关系是重要的管线语义关系类型，依托连通关系构建管线组合实体是目前亟需解决的技术难题。而由于新型基础测绘目前正处于试点探索阶段，尚未有成熟的基于连通关系的管线组合实体构建方案。发明内容为了解决上述背景技术中存在的至少一项技术问题，本发明提供分组递归式的管线组合实体构建方法、系统、介质及设备，其无需专业的空间分析软件，无需获取管线数据准确的流向信息，仅仅通过对管点与管线数据自身属性的检索与计算，即可识别出所有相互连通的管点与管线，并依托连通关系将其构建为组合地理实体。为了实现上述目的，本发明采用如下技术方案：本发明的第一个方面提供分组递归式的管线组合实体构建方法，包括如下步骤：获取管线数据和管点数据；采用分组递归式的方法，通过对管线数据和管点数据自身属性的检索和计算，识别出所有互相连通的管点与管线；基于所有互相连通的管点与管线的连通关系构建管线组合地理实体。进一步地，所述管线数据和管点数据直接使用管线探测生成。进一步地，所述采用分组递归式的方法，通过对管线数据和管点数据自身属性的检索和计算，识别出所有互相连通的管点与管线，包括如下步骤：为管线数据和管点数据添加分组编号字段；根据规则递归计算管线的分组编号值；其中，相互连通的管点与管线分组编号值相同，不连通的管点与管线的分组编号值不相同；将管线数据按照分组编号值进行分组，获取分组中所有管线的起点点号与终点点号集合；在管点数据中查询点号位于所有管线的起点点号与终点点号集合中的管点，将这类管点的分组编号值设置为与对应管线相同；将分组编号值相同的管点与管线实体构建组合实体。进一步地，所述根据规则递归计算管线的分组编号值，具体包括：步骤一：从管线数据中任意取出一条分组编号为空的记录，将该管线的分组编号设为i，第一次调用该步骤时，i=1，后续每调用一次，i值增加1，并获取该管线的起点点号与终点点号；步骤二：从剩余的分组编号为空的记录中，查找起点点号或终点点号等于上述管线的起点点号和终点点号的所有管线，将这类管线的分组编号值设置为与上述管线相同，并同时获取这类管线的所有起点点号与终点点号；步骤三：将步骤二查询出的管线起点点号与终点点号作为输入条件，递归调用步骤二；步骤四：若查询结果不为空，则递归调用步骤二，前一次调用的结果，作为下一次调用的输入条件；若查询结果为空，则调用步骤一；若步骤一中没有分组编号为空的记录，则调用步骤五；步骤五：将管线数据按照分组编号值进行分组，获取分组中所有管线的起点点号与终点点号集合，在管点数据中查询点号位于该集合中的管点，将这类管点的分组编号值也设置为与对应管线相同。进一步地，构建管线组合地理实体后，根据组合实体的空间范围与管线类型计算空间身份编码，并将组合关系记录在关系表中。本发明的第二个方面提供分组递归式的管线组合实体构建系统，包括：数据获取模块，其被配置为：获取管线数据和管点数据；递归调用模块，其被配置为：采用分组递归式的方法，通过对管线数据和管点数据自身属性的检索和计算，识别出所有互相连通的管点与管线；实体构建模块，其被配置为：基于所有互相连通的管点与管线的连通关系构建管线组合地理实体。进一步地，在递归调用模块中，所述采用分组递归式的方法，通过对管线数据和管点数据自身属性的检索和计算，识别出所有互相连通的管点与管线，包括如下步骤：为管线数据和管点数据添加分组编号字段；根据规则递归计算管线的分组编号值；其中，相互连通的管点与管线分组编号值相同，不连通的管点与管线的分组编号值不相同；将管线数据按照分组编号值进行分组，获取分组中所有管线的起点点号与终点点号集合；在管点数据中查询点号位于所有管线的起点点号与终点点号集合中的管点，将这类管点的分组编号值设置为与对应管线相同；将分组编号值相同的管点与管线实体构建组合实体。进一步地，在递归调用模块中，所述根据规则递归计算管线的分组编号值，具体包括：步骤一：从管线数据中任意取出一条分组编号为空的记录，将该管线的分组编号设为i，第一次调用该步骤时，i=1，后续每调用一次，i值增加1，并获取该管线的起点点号与终点点号；步骤二：从剩余的分组编号为空的记录中，查找起点点号或终点点号等于上述管线的起点点号和终点点号的所有管线，将这类管线的分组编号值设置为与上述管线相同，并同时获取这类管线的所有起点点号与终点点号；步骤三：将步骤二查询出的管线起点点号与终点点号作为输入条件，递归调用步骤二；步骤四：若查询结果不为空，则递归调用步骤二，前一次调用的结果，作为下一次调用的输入条件；若查询结果为空，则调用步骤一；若步骤一中没有分组编号为空的记录，则调用步骤五；步骤五：将管线数据按照分组编号值进行分组，获取分组中所有管线的起点点号与终点点号集合，在管点数据中查询点号位于该集合中的管点，将这类管点的分组编号值也设置为与对应管线相同。本发明的第三个方面提供一种计算机可读存储介质。一种计算机可读存储介质，其上存储有计算机程序，该程序被处理器执行时实现第一方面所述的分组递归式的管线组合实体构建方法中的步骤。本发明的第四个方面提供一种电子设备。一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现第一方面所述的分组递归式的管线组合实体构建方法中的步骤。与现有技术相比，本发明的有益效果是：1、本发明设计了分组递归式的管线组合实体构建方法，无需专业的空间分析软件，无需基于管线数据准确的流向信息进行连通性分析，仅仅通过对管点与管线数据自身属性的检索与计算，即可识别出所有相互连通的管点与管线，具有普适性，并依托连通关系将其构建为组合地理实体，大幅降低成本费用；2、本发明通过可以直接使用管线探测生成的管点与管线数据，不需要数据预处理工作，减少工艺流程；3、本发明可以根据连通分析结果构建管线组合实体，满足新型基础测绘背景下数据语义化分析需求。附图说明构成本发明的一部分的说明书附图用来提供对本发明的进一步理解，本发明的示意性实施例及其说明用于解释本发明，并不构成对本发明的不当限定。图1是本发明实施例一提供的分组递归式的管线组合实体构建方法流程示意图；图2是本发明实施例二提供的分组递归式的管线组合实体构建系统框图。具体实施方式下面结合附图与实施例对本发明作进一步说明。应该指出，以下详细说明都是例示性的，旨在对本发明提供进一步的说明。除非另有指明，本文使用的所有技术和科学术语具有与本发明所属技术领域的普通技术人员通常理解的相同含义。需要注意的是，这里所使用的术语仅是为了描述具体实施方式，而非意图限制根据本发明的示例性实施方式。如在这里所使用的，除非上下文另外明确指出，否则单数形式也意图包括复数形式，此外，还应当理解的是，当在本说明书中使用术语“包含”和/或“包括”时，其指明存在特征、步骤、操作、器件、组件和/或它们的组合。正如背景技术中提及的技术缺陷现有技术利用专业空间分析软件提供的网络分析功能进行连通性计算，这种方式一是需要依靠专业软件，价格昂贵，二是对数据质量要求高，需要依据预设条件对数据进行大量的数据建模工作，耗时长、容错性不高，导致分析结果不完整或分析失败。本发明针对该技术问题提出了分组递归式的管线组合实体构建方法、系统、介质及设备，通过直接使用管线探测生成的管点与管线数据，无需基于管线数据准确的流向信息进行连通性分析，无需采购专业的空间分析软件，仅仅通过对管点与管线数据自身属性的检索与计算，即可识别出所有相互连通的管点与管线，可以根据连通分析结果构建管线组合实体，满足新型基础测绘背景下数据语义化分析需求。实施例一本实施例提供分组递归式的管线组合实体构建方法，其在获取管线数据和管点数据基础上，仅仅通过对管点与管线数据自身属性的检索与计算，即可识别出所有相互连通的管点与管线，并依托连通关系将其构建为组合地理实体。所述管线组合实体构建方法具体包括如下步骤：步骤一：获取管线数据和管点数据；本实施例中，所述管线数据和管点数据通过直接使用管线探测生成。其技术优势在于，不需要数据预处理工作，减少工艺流程，提高构建效率。步骤二：为管线数据和管点数据添加分组编号字段；步骤二中，所述为管线数据和管点数据添加分组编号字段的原则是：相互连通的管点与管线分组编号值相同，不连通的管点与管线的分组编号值不相同。步骤三：从管线数据中任意取出一条分组编号为空的记录，将该管线的分组编号设为i，并获取该管线的起点点号与终点点号；步骤四：从剩余的分组编号为空的记录中，查找起点点号或终点点号等于上述管线的起点点号和终点点号的所有管线，将这类管线的分组编号值设置为与上述管线相同，并同时获取这类管线的所有起点点号与终点点号；步骤五：将步骤四查询出的管线起点点号与终点点号作为输入条件，递归调用步骤四；步骤六：若查询结果不为空，则递归调用步骤四，前一次调用的结果，作为下一次调用的输入条件；若查询结果为空，则调用步骤三；若步骤三中没有分组编号为空的记录，则调用步骤七；步骤七：将管线数据按照分组编号值进行分组，获取分组中所有管线的起点点号与终点点号集合，在管点数据中查询点号位于该集合中的管点，将这类管点的分组编号值也设置为与对应管线相同；步骤八：将分组编号值相同的管点与管线实体构建组合实体，根据组合实体的空间范围与管线类型计算空间身份编码，并将组合关系记录在关系表中。上述技术方案的优势在于，仅仅通过对管点与管线数据自身属性的检索与计算，即可识别出所有相互连通的管点与管线，具有普适性，并依托连通关系将其构建为组合地理实体，大幅降低成本费用；同时可以根据连通分析结果构建管线组合实体，满足新型基础测绘背景下数据语义化分析需求。实施例二本实施例提供分组递归式的管线组合实体构建系统，包括：数据获取模块，其被配置为：获取管线数据和管点数据；递归调用模块，其被配置为：采用分组递归式的方法，通过对管线数据和管点数据自身属性的检索和计算，识别出所有互相连通的管点与管线；实体构建模块，其被配置为：基于所有互相连通的管点与管线的连通关系构建管线组合地理实体；根据管线组合地理实体的空间范围与管线类型计算空间身份编码。其中，在递归调用模块中，所述采用分组递归式的方法，通过对管线数据和管点数据自身属性的检索和计算，识别出所有互相连通的管点与管线，包括如下步骤：为管线数据和管点数据添加分组编号字段；根据规则递归计算管线的分组编号值；其中，相互连通的管点与管线分组编号值相同，不连通的管点与管线的分组编号值不相同；将管线数据按照分组编号值进行分组，获取分组中所有管线的起点点号与终点点号集合；在管点数据中查询点号位于所有管线的起点点号与终点点号集合中的管点，将这类管点的分组编号值设置为与对应管线相同；将分组编号值相同的管点与管线实体构建组合实体。其中，在递归调用模块中，所述根据规则递归计算管线的分组编号值，具体包括：步骤一：从管线数据中任意取出一条分组编号为空的记录，将该管线的分组编号设为i，第一次调用该步骤时，i=1，后续每调用一次，i值增加1，并获取该管线的起点点号与终点点号；步骤二：从剩余的分组编号为空的记录中，查找起点点号或终点点号等于上述管线的起点点号和终点点号的所有管线，将这类管线的分组编号值设置为与上述管线相同，并同时获取这类管线的所有起点点号与终点点号；步骤三：将步骤二查询出的管线起点点号与终点点号作为输入条件，递归调用步骤二；步骤四：若查询结果不为空，则递归调用步骤二，前一次调用的结果，作为下一次调用的输入条件；若查询结果为空，则调用步骤一；若步骤一中没有分组编号为空的记录，则调用步骤五；步骤五：将管线数据按照分组编号值进行分组，获取分组中所有管线的起点点号与终点点号集合，在管点数据中查询点号位于该集合中的管点，将这类管点的分组编号值也设置为与对应管线相同。上述方案的技术优势在于，无需专业的空间分析软件，仅仅通过对管点与管线数据自身属性的检索与计算，即可识别出所有相互连通的管点与管线，具有普适性，并依托连通关系将其构建为组合地理实体，大幅降低成本费用。实施例三本实施例提供了一种计算机可读存储介质，其上存储有计算机程序，该程序被处理器执行时实现如上述所述的分组递归式的管线组合实体构建方法中的步骤。实施例四本实施例提供了一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现如上述所述的分组递归式的管线组合实体构建方法中的步骤。以上所述仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
