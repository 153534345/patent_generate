标题title
融合表面网格模型和深度学习的城市光伏潜力计算方法
摘要abst
本发明公开了一种融合表面网格模型和深度学习的城市光伏潜力计算方法，根据城市建筑物的倾斜摄影测量影像构建表面网格模型，处理速度快且能够提高太阳辐射计算的精度，由于表面网格模型中三角形面片之间的空间关系明显，深度神经网络模型可以更好地学习和捕捉三角形面片之间的相互关系，再结合从气候区数据、天气数据提取的特征，能够准确地预测每个三角形面片的太阳辐射量，实现目标城市内所有建筑物的太阳辐射值的计算从而获得城市光伏利用潜力。计算效率高、准确性高。
权利要求书clms
1.融合表面网格模型和深度学习的城市光伏潜力计算方法，其特征在于，所述方法包括：获取目标城市建筑物的倾斜摄影测量影像；基于所述倾斜摄影测量影像，根据三角法构建目标城市建筑物的表面网格模型；根据所述表面网格模型获得所述目标城市每个街区的气候区数据；获取天气数据；将所述表面网格模型的模型数据、所述天气数据和所述气候区数据输入预先训练好的深度神经网络模型，获得每个三角形面片的太阳辐射强度，所述三角形面片用于组成建筑物的表面网格模型；根据所有三角形面片的太阳辐射强度，获得目标城市内所有建筑物的太阳辐射值；根据所述太阳辐射值，获得城市光伏利用潜力。2.如权利要求1所述的融合表面网格模型和深度学习的城市光伏潜力计算方法，其特征在于，基于经验模型针对不同时刻生成目标城市建筑物太阳辐射场景的数据集作为训练深度神经网络模型的样本数据，根据样本数据训练所述深度神经网络模型，包括：计算样本数据对应时刻的太阳位置，获得太阳高度角和太阳方位角；计算太阳光辐射能量在不同波长下的分布，获得太阳光谱信息；根据大气条件计算大气光传输的系数；计算太阳光从空气到介质表面的反射率；根据所述太阳高度角和所述太阳方位角、所述太阳光谱信息、所述大气光传输的系数、所述反射率计算各个三角形面片的年太阳辐射值；将所述样本数据和所述年太阳辐射值输入所述深度神经网络模型以训练所述深度神经网络模型。3.如权利要求2所述的融合表面网格模型和深度学习的城市光伏潜力计算方法，其特征在于，所述计算样本数据对应时刻的太阳位置，获得太阳高度角和太阳方位角，包括：根据样本数据对应时刻的天数，计算黄道坐标系中太阳的平黄经和平黄纬；将所述平黄经和平黄纬转换为赤道坐标系中的赤经和赤纬；将所述赤经和赤纬转换为所述太阳高度角和所述太阳方位角。4.如权利要求1所述的融合表面网格模型和深度学习的城市光伏潜力计算方法，其特征在于，所述根据所述表面网格模型获得所述目标城市每个街区的气候区数据，包括：将所述表面网格模型输入预先训练好的随机森林分类器，获得所述目标城市每个街区的类别，根据各个街区的类别获得所述目标城市每个街区的气候区数据。5.如权利要求4所述的融合表面网格模型和深度学习的城市光伏潜力计算方法，其特征在于，训练所述随机森林分类器，包括：根据城市中的道路，将所述目标城市划分为若干个街区；根据所述表面网格模型的附加属性信息获得每个街区的形态数据；根据所述形态数据和气候区的分类标准，获得所述街区的类别；根据所述类别标注训练样本，将标注后的训练样本输入所述随机森林分类器进行训练。6.融合表面网格模型和深度学习的城市光伏潜力计算系统，其特征在于，所述系统包括：影像获取模块，用于获取目标城市建筑物的倾斜摄影测量影像；表面网格模型模块，用于基于所述倾斜摄影测量影像，根据三角法构建目标城市建筑物的表面网格模型；气候区数据模块，用于根据所述表面网格模型获得所述目标城市每个街区的气候区数据；天气数据模块，用于获取天气数据；太阳辐射强度模块，用于将所述表面网格模型的模型数据、所述天气数据和所述气候区数据输入预先训练好的深度神经网络模型，获得每个三角形面片的太阳辐射强度，所述三角形面片用于组成建筑物的表面网格模型；太阳辐射值模块，用于根据所有三角形面片的太阳辐射强度，获得目标城市内所有建筑物的太阳辐射值；光伏利用潜力模块，用于根据所述太阳辐射值，获得城市光伏利用潜力。7.如权利要求6所述的融合表面网格模型和深度学习的城市光伏潜力计算系统，其特征在于，还包括训练模块，所述训练模块用于将基于经验模型针对不同时刻生成的目标城市建筑物太阳辐射场景的数据集作为训练深度神经网络模型的样本数据，并根据样本数据训练所述深度神经网络模型，所述训练模块包括：计算样本数据对应时刻的太阳位置，获得太阳高度角和太阳方位角；计算太阳光辐射能量在不同波长下的分布，获得太阳光谱信息；根据大气条件计算大气光传输的系数；计算太阳光从空气到介质表面的反射率；根据所述太阳高度角和所述太阳方位角、所述太阳光谱信息、所述大气光传输的系数、所述反射率计算各个三角形面片的年太阳辐射值；将所述样本数据和所述年太阳辐射值输入所述深度神经网络模型以训练所述深度神经网络模型。8.如权利要求6所述的融合表面网格模型和深度学习的城市光伏潜力计算系统，其特征在于，还包括随机森林分类器，所述随机森林分类器用于根据输入的表面网格模型获得所述目标城市每个街区的类别并根据街区的类别获得所述目标城市每个街区的气候区数据。9.智能终端，其特征在于，所述智能终端包括存储器、处理器以及存储在所述存储器上并可在所述处理器上运行的融合表面网格模型和深度学习的城市光伏潜力计算程序，所述融合表面网格模型和深度学习的城市光伏潜力计算程序被所述处理器执行时实现如权利要求1-5任意一项所述融合表面网格模型和深度学习的城市光伏潜力计算方法的步骤。10.计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储有融合表面网格模型和深度学习的城市光伏潜力计算程序，所述融合表面网格模型和深度学习的城市光伏潜力计算程序被处理器执行时实现如权利要求1-5任意一项所述融合表面网格模型和深度学习的城市光伏潜力计算方法的步骤。
说明书desc
技术领域本发明涉及光伏发电技术领域，尤其涉及的是一种融合表面网格模型和深度学习的城市光伏潜力计算方法及系统。背景技术城市是一个复杂的环境，高层建筑越来越多，太阳辐射分布非常不均匀，尤其是建筑表面的动态阴影对太阳能利用影响很大，量化建筑表面可用的太阳辐射量，评估城市建筑上分布式光伏能源的发电潜力，对城市提高能源效率，优化能源结构有着重要的作用。准确快速地获取建筑表面太阳辐射值对于计算城市光伏利用潜力至关重要。传统上，辐射量测算的方式是采用总辐射传感器获取，但由于真实的城市街区屋面难以大规模安装传感器，同时实地测量的方法耗时耗力，难以大规模开展；而基于物理的仿真模型计算建筑表面的太阳辐射，计算量大，受到其复杂模型开发和工程条件的约束，计算效率低，且仿真模型难以准确反映实际建筑，计算结果不够准确。因此，现有技术有待改进和提高。发明内容本发明的主要目的在于提供一种融合表面网格模型和深度学习的城市光伏潜力计算方法、系统、智能终端及存储介质，能够解决目前计算城市光伏利用潜力时计算效率低、计算结果不够准确的问题。为了实现上述目的，本发明第一方面提供一种融合表面网格模型和深度学习的城市光伏潜力计算方法，所述方法包括：获取目标城市建筑物的倾斜摄影测量影像；基于所述倾斜摄影测量影像，根据三角法构建目标城市建筑物的表面网格模型；根据所述表面网格模型获得所述目标城市每个街区的气候区数据；获取天气数据；将所述表面网格模型的模型数据、所述天气数据和所述气候区数据输入预先训练好的深度神经网络模型，获得每个三角形面片的太阳辐射强度，所述三角形面片用于组成建筑物的表面网格模型；根据所有三角形面片的太阳辐射强度，获得目标城市内所有建筑物的太阳辐射值；根据所述太阳辐射值，获得城市光伏利用潜力。可选的，基于经验模型针对不同时刻生成目标城市建筑物太阳辐射场景的数据集作为训练深度神经网络模型的样本数据，根据样本数据训练所述深度神经网络模型，包括：计算样本数据对应时刻的太阳位置，获得太阳高度角和太阳方位角；计算太阳光辐射能量在不同波长下的分布，获得太阳光谱信息；根据大气条件计算大气光传输的系数；计算太阳光从空气到介质表面的反射率；根据所述太阳高度角和所述太阳方位角、所述太阳光谱信息、所述大气光传输的系数、所述反射率计算各个三角形面片的年太阳辐射值；将所述样本数据和所述年太阳辐射值输入所述深度神经网络模型以训练所述深度神经网络模型。可选的，所述计算样本数据对应时刻的太阳位置，获得太阳高度角和太阳方位角，包括：根据样本数据对应时刻的天数，计算黄道坐标系中太阳的平黄经和平黄纬；将所述平黄经和平黄纬转换为赤道坐标系中的赤经和赤纬；将所述赤经和赤纬转换为所述太阳高度角和所述太阳方位角。可选的，所述根据所述表面网格模型获得所述目标城市每个街区的气候区数据，包括：将所述表面网格模型输入预先训练好的随机森林分类器，获得所述目标城市每个街区的类别，根据各个街区的类别获得所述目标城市每个街区的气候区数据。可选的，训练所述随机森林分类器，包括：根据城市中的道路，将所述目标城市划分为若干个街区；根据所述表面网格模型的附加属性信息获得每个街区的形态数据；根据所述形态数据和气候区的分类标准，获得所述街区的类别；根据所述类别标注训练样本，将标注后的训练样本输入所述随机森林分类器进行训练。本发明第二方面提供融合表面网格模型和深度学习的城市光伏潜力计算系统，其中，上述系统包括：影像获取模块，用于获取目标城市建筑物的倾斜摄影测量影像；表面网格模型模块，用于基于所述倾斜摄影测量影像，根据三角法构建目标城市建筑物的表面网格模型；气候区数据模块，用于根据所述表面网格模型获得所述目标城市每个街区的气候区数据；天气数据模块，用于获取天气数据；太阳辐射强度模块，用于将所述表面网格模型的模型数据、所述天气数据和所述气候区数据输入预先训练好的深度神经网络模型，获得每个三角形面片的太阳辐射强度，所述三角形面片用于组成建筑物的表面网格模型；太阳辐射值模块，用于根据所有三角形面片的太阳辐射强度，获得目标城市内所有建筑物的太阳辐射值；光伏利用潜力模块，用于根据所述太阳辐射值，获得城市光伏利用潜力。可选的，还包括训练模块，所述训练模块用于将基于经验模型针对不同时刻生成的目标城市建筑物太阳辐射场景的数据集作为训练深度神经网络模型的样本数据，并根据样本数据训练所述深度神经网络模型，所述训练模块包括：计算样本数据对应时刻的太阳位置，获得太阳高度角和太阳方位角；计算太阳光辐射能量在不同波长下的分布，获得太阳光谱信息；根据大气条件计算大气光传输的系数；计算太阳光从空气到介质表面的反射率；根据所述太阳高度角和所述太阳方位角、所述太阳光谱信息、所述大气光传输的系数、所述反射率计算各个三角形面片的年太阳辐射值；将所述样本数据和所述年太阳辐射值输入所述深度神经网络模型以训练所述深度神经网络模型。可选的，还包括随机森林分类器，所述随机森林分类器用于根据输入的表面网格模型获得所述目标城市每个街区的类别并根据各个街区的类别获得所述目标城市每个街区的气候区数据。本发明第三方面提供一种智能终端，上述智能终端包括存储器、处理器以及存储在上述存储器上并可在上述处理器上运行的融合表面网格模型和深度学习的城市光伏潜力计算程序，上述融合表面网格模型和深度学习的城市光伏潜力计算程序被上述处理器执行时实现任意一项上述融合表面网格模型和深度学习的城市光伏潜力计算方法的步骤。本发明第四方面提供一种计算机可读存储介质，上述计算机可读存储介质上存储有融合表面网格模型和深度学习的城市光伏潜力计算程序，上述融合表面网格模型和深度学习的城市光伏潜力计算程序被处理器执行时实现任意一项上述融合表面网格模型和深度学习的城市光伏潜力计算方法的步骤。由上可见，与现有技术相比，本发明根据城市建筑物的倾斜摄影测量影像构建表面网格模型，处理速度快且能够提高太阳辐射计算的精度，由于表面网格模型中三角形面片之间的空间关系明显，深度神经网络模型可以更好地学习和捕捉三角形面片之间的相互关系，再结合从气候区数据、天气数据提取的特征，能够准确、快速地预测每个三角形面片的太阳辐射量，计算目标城市内所有建筑物的太阳辐射值，获得城市光伏利用潜力。计算效率高、计算结果准确。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其它的附图。图1是本发明实施例提供的融合表面网格模型和深度学习的城市光伏潜力计算方法流程示意图；图2是图1实施例中训练随机森林分类器流程示意图；图3是图1实施例中深度神经网络模型的架构示意图；图4是图1实施例中训练深度神经网络模型流程示意图；图5是本发明实施例提供的融合表面网格模型和深度学习的城市光伏潜力计算系统的结构示意图；图6是本发明实施例提供的一种智能终端的内部结构原理框图。具体实施方式以下描述中，为了说明而不是为了限定，提出了诸如特定系统结构、技术之类的具体细节，以便透彻理解本发明实施例。然而，本领域的技术人员应当清楚，在没有这些具体细节的其它实施例中也可以实现本发明。在其它情况下，省略对众所周知的系统、装置、电路以及方法的详细说明，以免不必要的细节妨碍本发明的描述。应当理解，当在本说明书和所附权利要求书中使用时，术语“包括”指示所描述特征、整体、步骤、操作、元素和/或组件的存在，但并不排除一个或多个其它特征、整体、步骤、操作、元素、组件和/或其集合的存在或添加。还应当理解，在本发明说明书中所使用的术语仅仅是出于描述特定实施例的目的而并不意在限制本发明。如在本发明说明书和所附权利要求书中所使用的那样，除非上下文清楚地指明其它情况，否则单数形式的“一”、“一个”及“该”意在包括复数形式。还应当进一步理解，在本发明说明书和所附权利要求书中使用的术语“和/或”是指相关联列出的项中的一个或多个的任何组合以及所有可能组合，并且包括这些组合。如在本说明书和所附权利要求书中所使用的那样，术语“如果”可以依据上下文被解释为“当…时”或“一旦”或“响应于确定”或“响应于检测到”。类似的，短语“如果确定”或“如果检测到”可以依据上下文被解释为意指“一旦确定”或“响应于确定”或“一旦检测到”或“响应于检测到”。下面结合本发明实施例的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明的一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其它实施例，都属于本发明保护的范围。在下面的描述中阐述了很多具体细节以便于充分理解本发明，但是本发明还可以采用其它不同于在此描述的其它方式来实施，本领域技术人员可以在不违背本发明内涵的情况下做类似推广，因此本发明不受下面公开的具体实施例的限制。现有的仿真模型计算建筑物表面的太阳辐射，计算量大，速度慢。难以实现城市规模的光伏利用潜力的计算。为了解决现有技术的问题，本发明提供了一种融合表面网格模型和深度学习的城市光伏潜力计算方法，根据城市建筑物构建高精度表面网格模型，提高太阳辐射计算的精度，且表面网格模型中三角形面片之间的空间关系明显，深度学习算法可以更好地学习和捕捉三角形面片之间的相互关系，从而更好地预测每个三角形面片的太阳辐射量。因此，将表面网格模型与深度神经网络模型相结合，可以实现建筑物太阳辐射量的自动预测和计算，极大地提高了计算效率和准确性，能够高效快速地获得城市光伏利用潜力。示例性方法本发明实施例提供一种融合表面网格模型和深度学习的城市光伏潜力计算方法，可以部署在各种移动终端、PC端等电子设备上。具体的，如图1所示，本实施例包括如下步骤：步骤S100：获取目标城市建筑物的倾斜摄影测量影像。步骤S200：基于上述倾斜摄影测量影像，根据三角法构建目标城市建筑物的表面网格模型。具体地，建筑物是指与评估光伏利用潜力相关的各种目标建筑。表面网格模型也称为Mesh模型，一般用来表示静态的物体，例如建筑、雕塑等。通常为一组相互链接的三角形、四边形或其他多边形构成的顶点集合。本实施例中的表面网格模型为三角形网格，每个三角形都有三个顶点，各顶点都有可能和其他三角形共享，两个顶点之间的连接为边，每个三角形有三条边，每个三角形对应一个三角形面片，可以用顶点或边列表表示三角形面片。每个顶点都有一个坐标位置，每个三角形面片有一个法向量。由于Mesh模型较为简单，其文件大小相对较小，相比仿真模型，对Mesh模型进行处理效率更高。需要说明的是，本发明的表面网格模型形状不限，也可以为四边形或其他多边形的表面网格模型。表面网格模型的建立过程为：首先利用现有的摄影测量方法对目标城市的建筑物进行倾斜摄影测量，如使用无人机进行拍摄，然后利用图像处理和计算机视觉等技术构建建筑物的表面网格模型。本实施例采用三角化等方法对拍摄的影像进行处理，生成建筑物的表面网格模型，其由一系列三角形面片组成。每个三角形面片至少包括如下数据：顶点坐标、法向量以及属性信息。属性信息包括建筑物表面的几何属性和材质属性等。其中，顶点三维坐标通常表示相应建筑物表面的位置，用于确定每个三角形面片的几何属性；三维法向量用于表示每个三角形面片表面的朝向，以便计算该表面在不同太阳高度角和太阳方位角下的接收辐射量；材质属性包括反射率R、散射率S和吸收率A等反映建筑物表面材质的光学参数，用于计算建筑物表面在不同太阳高度角和太阳方位角下的反射和吸收辐射量。除上述信息外，Mesh模型还包括附加属性信息，如三角形面片的编号、三角形面片的邻居信息、面积、高度等，根据这些附加属性信息可以计算建筑物表面的几何形态和位置关系。步骤S300：根据表面网格模型获得目标城市每个街区的气候区数据。具体地，由于街区内各建筑物的遮挡情况、周围环境、地表覆盖等不同，形成不同气候区，不同的气候区对应于不同的气候区数据。气候区数据包括：天空开阔度、街道宽高比、建筑占地比率、不透水层占地比率、透水层占地比率、平均高度、地形粗糙登记、表面传导率、地表反射率以及人为热通量等若干种指标，气候区数据包括的具体指标可以根据实际场景按需选择。通常，不同气候区的日照时数不同，太阳辐射也不同。构建表面网格模型后，可以从表面网格模型中提取每个街区内建筑物的特征，根据这些特征判定每个街区所属的类别并获得相应的气候区数据。本实施例通过将表面网格模型输入预先训练好的随机森林分类器，获得目标城市每个街区的类别并根据街区的类别查找到街区的气候区数据。如图2所示，训练随机森林分类器的步骤包括：步骤S310：根据城市中的道路，将目标城市划分为若干个街区。具体地，城市中的道路可以看作是连接各个街区的走廊，因此可以使用国道、省道、高速公路等重要道路将目标城市划分为若干个街区，可以划分为连续的街区，也可以为非连续的街区。步骤S320：根据表面网格模型的附加属性信息获得每个街区的形态数据。具体地，对表面网格模型的附加属性信息进行处理，获得需要的街区形态数据。本实施例根据表面网格模型的附加属性信息计算每个街区的所有建筑物的平均高度、高度标准差、变异系数、极差、容积率、数量密度、平均体积、楼层面积占比共八个形态数据。步骤S330：根据形态数据和气候区的分类标准，获得街区的类别。具体地，气候区的分类标准为建筑气候区划标准，该标准根据年平均气温、年相对湿度，年太阳总辐射照度，季风气候等将建筑群划分为不同的气候区。根据上述八个形态数据和气候区的分类标准，将街区分为12类，包括高层高密度高波动型、高层高密度低波动型、多层高密度高波动型、多层高密度低波动型、低层高密度高波动型、低层高密度低波动型、高层低密度高波动型、高层低密度低波动型、多层低密度高波动型、多层低密度低波动型、低层低密度高波动型和低层低密度低波动型。获得街区的类别后，根据预先设定的街区类别与气候区数据的对应关系，就可以获得各街区类别对应的气候区数据。通过根据形态数据和气候区的分类标准对街区进行细致的分类，能够较好地把握不同气候区内建筑太阳辐射的特征，提高计算精度。步骤S340：根据上述类别标注训练样本，将标注后的训练样本输入随机森林分类器进行训练。具体地，在目标城市的所有街区中选择一定比例的训练样本，并根据步骤S320、S330获得训练样本所在街区的类别，用该类别对训练样本进行标注，然后将带有标注的训练样本输入随机森林分类器以对随机森林分类器进行训练。训练好随机森林分类器后，就可以对目标城市内的所有街区进行分类，根据分类结果查询分类对应的气候区数据。具体表达式为：Xm＝{Xm,i,j|i＝1,2…Nm,j＝1,2,…8，其中m为街区类别，i为街区序号，Nm为第m类街区包含的街区数，例如：第一类街区包含5个街区，第二类街区包含8个街区等，j为形态数据。步骤S400：获取天气数据。具体地，天气数据是指与太阳辐射相关的数据，天气数据中最重要的是太阳高度角和太阳方位角，用于确定太阳位置来计算建筑物的太阳辐射值。天气数据还可以包括：云量比、干球温度、露点温度等。步骤S500：将表面网格模型的模型数据、天气数据和气候区数据输入预先训练好的深度神经网络模型，获得每个三角形面片的太阳辐射强度，上述三角形面片用于组成建筑物的表面网格模型。步骤S600：根据所有三角形面片的太阳辐射强度，获得目标城市内所有建筑物的太阳辐射值。具体地，深度神经网络模型能够根据输入的表面网格模型的模型数据、天气数据和气候区数据，预测出每个三角形面片的太阳辐射强度。然后枚举目标城市的表面网格模型中所有的三角形面片，累计每个三角形面片的太阳辐射强度，获得目标城市内所有建筑物的太阳辐射值。本实施例的深度神经网络模型由3个主层组成：一个输入层、若干隐藏层和输出层，隐藏层的数量定义了架构的深度。基于12个街区分类，共生成12个结构和权重因子不同的深度神经网络子模型，深度神经网络模型的架构如图3所示。具体表达式为：式中m代表气候区类型，hi-1指第i层隐藏层第hi个神经元，/＞指第i层隐藏层神经元个数，w为权重参数，/＞为第i+1层隐藏层第hi个神经元的输出值。输出层神经元Z定义为式中n指最后一层隐藏层，hn指最后隐藏层第hn个神经元，/＞指最后一个隐藏层神经元个数，/＞第m类最后一个隐藏层第hn个神经元权重，/＞为最后一层隐藏层第/＞个神经元的输出值。最终计算目标城市的总年太阳辐射值为/＞将数据输入深度神经网络模型进行预测时，输入数据须和深度神经网络模型的训练数据具有相同的数据格式和数据范围，以保证预测结果的准确性。输入数据包括目标城市内所有建筑物表面的三角形面片的坐标信息、法向量信息，三角形面片的光学参数、街区气候区中心位置、太阳高度角、太阳方位角、云量比、干球温度和湿球温度以及气候区数据。由于每个深度神经网络子模型的结构和权重因子由每个分类中的气候区数据决定，因此深度神经网络子模型对特征输入数据集具有自适应性，与固定架构的单一深度神经网络模型相比，具有较好的通用性，可以提高整体预测性能。步骤S700：根据太阳辐射值，获得城市光伏利用潜力。具体地，可以直接根据太阳辐射值的大小评估城市光伏利用潜力的高低，也可以累计一年的太阳辐射值作为年太阳辐射值，根据年太阳辐射值来评估城市光伏利用潜力的高低。由上所述，本实施例通过使用Mesh模型对建筑物表面进行高精度建模，进而提高太阳辐射计算的精度，且Mesh模型中三角形面片之间的空间关系明显，深度学习算法可以更好地学习和捕捉三角形面片之间的相互关系，从而更好地预测每个三角形面片的太阳辐射量。因此，使用Mesh模型结合深度学习模型可以实现建筑物太阳辐射量的自动预测和计算从而计算城市光伏利用潜力，极大地提高了计算效率和准确性，也减轻了人工负担。并且由于Mesh模型是一种通用的三维建模方法，同时深度学习算法也具有很强的可拓展性，因此可拓展性高、可实现广泛的应用。我国城市具有高密度的特点，城市建筑比较密集，不同的城市用地建设类型，对太阳能开发和利用的潜力是不同的。虽然机器学习、深度学习方法有望实现高效率地计算建筑物表面太阳辐射计算。然而现有的深度学习模型使用特定的建筑案例来训练数据驱动模型，这些训练数据通常是有偏差的，会导致模型较差的泛化性，太阳辐射值计算不准确。因此，训练数据应该覆盖每个主要参数的所有可能范围，并能反映建筑的太阳辐射模式。针对训练神经网络模型的问题，本实施例依据表面网格模型中三角形面片的位置，将基于经验模型生成的一个涵盖部分建筑物太阳辐射场景的海量数据集作为训练深度神经网络模型的样本数据，并且由于不同时刻的日照时间也不同，相应地，样本数据为针对不同时刻生成的数据。如图4所示，训练深度神经网络模型具体步骤包括：步骤S510：计算样本数据对应时刻的太阳位置，获得太阳高度角和太阳方位角。具体地，根据样本数据对应时刻的天数，计算黄道坐标系中太阳的平黄经和平黄纬，然后将平黄经和平黄纬转换为赤道坐标系中的赤经和赤纬，再将赤经和赤纬转换为太阳高度角和太阳方位角。由于太阳高度角和太阳方位角与太阳辐射值紧密关联，因此，计算出太阳高度角和太阳方位角后还保存至样本数据以输入深度神经网络模型。计算黄道坐标系中太阳的平黄经和平黄纬，具体表达式为：GMST＝280.46+0.9856474*d，L＝280.46+0.9856474*d+1.915*sin+0.02*sin，B＝0。其中，d为从格林尼治标准时间的当日0时起到样本数据对应时刻的天数，GMST为格林尼治平恒星时。将平黄经和平黄纬转换为赤道坐标系中的赤经和赤纬，具体公式为：ε＝23.439-0.0000004*d，sinδ＝sin*cos+cos*sin*sin，cosδcosα＝cos*cos，cosδsinα＝-sin*sin+cos*cos*sin，δ＝asin，α＝atan2。其中，δ为赤经，α为赤纬。将赤经和赤纬转换为本地坐标系中的太阳高度角和太阳方位角，具体公式为：H＝LST-α，alt＝asin*sin+cos*cos*cos)，az＝atan2*sin,sin*cos-cos*sin*cos)，其中，LST是目标城市所在地的本地恒星时，lat是观测点的纬度。步骤S520：计算太阳光辐射能量在不同波长下的分布，获得太阳光谱信息；具体地，太阳光的辐射能量在不同波长下的分布可以使用Planck定律来计算，具体计算公式为：其中，h是普朗克常数，c是光速，k是玻尔兹曼常数，T是太阳表面温度，λ是波长。步骤S530：根据大气条件计算大气光传输的系数；具体地，大气光传输可以使用MODTRAN或LOWTRAN等模型来计算，这些模型包含了大气吸收和散射的物理模型，并可以根据大气条件来计算大气光传输的系数。步骤S540：计算太阳光从空气到介质表面的反射率。具体地，地表反射的计算可以使用Fresnel公式来计算，该公式描述了光线从空气到介质表面的反射率，具体公式为：r＝/)2，其中，n1和n2分别是空气和介质的折射率，θ1和θ2分别是入射角和反射角。步骤S550：根据太阳高度角和太阳方位角、太阳光谱信息、大气光传输的系数、反射率计算每个三角形面片的年太阳辐射值。具体地，首先计算每个三角形面片的年太阳入射辐照度，计算方法为：其中，Sn为第n个月平均日照时长，dni指第n个月第i天日射量，指第i天第j小时太阳高度角，Bni,j指第i天第j小时太阳辐射水平投影，/＞指第i天第j小时太阳方位角，Dni,j指第i天第j小时太阳辐射线面投影。上述平均日照时长和日射量可由气象参数计算求得，即其中a为云层量，b∈，c为干点温度，d为露点温度。日射量dni＝a**0.5*lsc*cos，其中a为常数，Tmax为当日最高温，Tmin为当日最低温，lsc指太阳常数，θ指太阳高度角。然后计算每个三角形面片的年太阳辐射值，计算方法为：L＝Q*其中，L为点处的年太阳辐射值，Q为年太阳入射辐照度，R、A、S分别指点处材质的反射率、吸收率和散射率。步骤S560：将样本数据和年太阳辐射值输入深度神经网络模型以训练深度神经网络模型。具体地，深度神经网络模型根据输入的样本数据，获得预测值，年太阳辐射值为期望值，训练深度神经网络模型的目的是通过调整权重因子组使得深度神经网络模型计算的街区年太阳辐射值与步骤S550计算的年太阳辐射值Em之间的平均绝对百分比误差MAPE最小，/＞深度神经网络模型的输入数据包含的项目内容如下表所示：训练深度神经网络模型时，上述输入数据需要经过适当的处理和特征提取，转化为数值型的向量作为模型的输入。在一个示例中，将Mesh模型参数和天气参数进行合并，形成一个输入特征向量，气候区参数作为模型的辅助输入。深度神经网络模型输出一个标量值来表示一个三角形面片的太阳辐射强度。由上所述，通过提取不同的街区特征进行分类，以反映不同模型太阳辐射模式，利用传统经验模型迭代参数计算替代传统传感器采集数据节省人力物力，计算涵盖不同气候区的建筑表面太阳辐射结果，替代传统经验模型从而节省计算资源和时间。并且训练后的深度神经网络模型具有自适应、有效、准确和鲁棒的优势。示例性系统如图5所示，对应于上述融合表面网格模型和深度学习的城市光伏潜力计算方法，本发明实施例还提供融合表面网格模型和深度学习的城市光伏潜力计算系统，上述系统包括：影像获取模块600，用于获取目标城市建筑物的倾斜摄影测量影像；表面网格模型模块610，用于基于所述倾斜摄影测量影像，根据三角法构建目标城市建筑物的表面网格模型；气候区数据模块620，用于根据所述表面网格模型获得所述目标城市每个街区的气候区数据；天气数据模块630，用于获取天气数据，所述天气数据至少包括太阳高度角和太阳方位角；太阳辐射强度模块640，用于将所述表面网格模型的模型数据、所述天气数据和所述气候区数据输入预先训练好的深度神经网络模型，获得每个三角形面片的太阳辐射强度，所述三角形面片用于组成建筑物的表面网格模型；太阳辐射值模块650，用于根据所有三角形面片的太阳辐射强度，获得目标城市内所有建筑物的太阳辐射值；光伏利用潜力模块660，用于根据所述太阳辐射值，获得城市光伏利用潜力。可选的，还包括训练模块，所述训练模块用于将基于经验模型针对不同时刻生成的目标城市建筑物太阳辐射场景的数据集作为训练深度神经网络模型的样本数据，并根据样本数据训练所述深度神经网络模型，所述训练模块包括：计算样本数据对应时刻的太阳位置，获得太阳高度角和太阳方位角；计算太阳光辐射能量在不同波长下的分布，获得太阳光谱信息；根据大气条件计算大气光传输的系数；计算太阳光从空气到介质表面的反射率；根据所述太阳高度角和所述太阳方位角、所述太阳光谱信息、所述大气光传输的系数、所述反射率计算各个三角形面片的年太阳辐射值；将所述样本数据和所述年太阳辐射值输入所述深度神经网络模型以训练所述深度神经网络模型。可选的，还包括随机森林分类器，所述随机森林分类器用于根据输入的表面网格模型获得所述目标城市每个街区的类别并根据各个街区的类别获得所述目标城市每个街区的气候区数据。具体的，本实施例中，上述融合表面网格模型和深度学习的城市光伏潜力计算系统的各模块的具体功能可以参照上述融合表面网格模型和深度学习的城市光伏潜力计算方法中的对应描述，在此不再赘述。基于上述实施例，本发明还提供了一种智能终端，其原理框图可以如图6所示。上述智能终端包括通过系统总线连接的处理器、存储器、网络接口以及显示屏。其中，该智能终端的处理器用于提供计算和控制能力。该智能终端的存储器包括非易失性存储介质、内存储器。该非易失性存储介质存储有操作系统和融合表面网格模型和深度学习的城市光伏潜力计算程序。该内存储器为非易失性存储介质中的操作系统和融合表面网格模型和深度学习的城市光伏潜力计算程序的运行提供环境。该智能终端的网络接口用于与外部的终端通过网络连接通信。该融合表面网格模型和深度学习的城市光伏潜力计算程序被处理器执行时实现上述任意一种融合表面网格模型和深度学习的城市光伏潜力计算方法的步骤。该智能终端的显示屏可以是液晶显示屏或者电子墨水显示屏。本领域技术人员可以理解，图6中示出的原理框图，仅仅是与本发明方案相关的部分结构的框图，并不构成对本发明方案所应用于其上的智能终端的限定，具体的智能终端可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。在一个实施例中，提供了一种智能终端，上述智能终端包括存储器、处理器以及存储在上述存储器上并可在上述处理器上运行的融合表面网格模型和深度学习的城市光伏潜力计算程序，上述融合表面网格模型和深度学习的城市光伏潜力计算程序被上述处理器执行时进行以下操作指令：获取目标城市建筑物的倾斜摄影测量影像；基于所述倾斜摄影测量影像，根据三角法构建目标城市建筑物的表面网格模型；根据所述表面网格模型获得所述目标城市每个街区的气候区数据；获取天气数据；将所述表面网格模型的模型数据、所述天气数据和所述气候区数据输入预先训练好的深度神经网络模型，获得每个三角形面片的太阳辐射强度，所述三角形面片用于组成建筑物的表面网格模型；根据所有三角形面片的太阳辐射强度，获得目标城市内所有建筑物的太阳辐射值；根据所述太阳辐射值，获得城市光伏利用潜力。可选的，基于经验模型针对不同时刻生成目标城市建筑物太阳辐射场景的数据集作为训练深度神经网络模型的样本数据，根据样本数据训练所述深度神经网络模型，包括：计算样本数据对应时刻的太阳位置，获得太阳高度角和太阳方位角；计算太阳光辐射能量在不同波长下的分布，获得太阳光谱信息；根据大气条件计算大气光传输的系数；计算太阳光从空气到介质表面的反射率；根据所述太阳高度角和所述太阳方位角、所述太阳光谱信息、所述大气光传输的系数、所述反射率计算各个三角形面片的年太阳辐射值；将所述样本数据和所述年太阳辐射值输入所述深度神经网络模型以训练所述深度神经网络模型。可选的，所述计算样本数据对应时刻的太阳位置，获得太阳高度角和太阳方位角，包括：根据样本数据对应时刻的天数，计算黄道坐标系中太阳的平黄经和平黄纬；将所述平黄经和平黄纬转换为赤道坐标系中的赤经和赤纬；将所述赤经和赤纬转换为所述太阳高度角和所述太阳方位角。可选的，所述根据所述表面网格模型获得所述目标城市每个街区的气候区数据，包括：将所述表面网格模型输入预先训练好的随机森林分类器，获得所述目标城市每个街区的类别，根据各个街区的类别获得所述目标城市每个街区的气候区数据。可选的，训练所述随机森林分类器，包括：根据城市中的道路，将所述目标城市划分为若干个街区；根据所述表面网格模型的附加属性信息获得每个街区的形态数据；根据所述形态数据和气候区的分类标准，获得所述街区的类别；根据所述类别标注训练样本，将标注后的训练样本输入所述随机森林分类器进行训练。本发明实施例还提供一种计算机可读存储介质，上述计算机可读存储介质上存储有融合表面网格模型和深度学习的城市光伏潜力计算程序，上述融合表面网格模型和深度学习的城市光伏潜力计算程序被处理器执行时实现本发明实施例提供的任意一种融合表面网格模型和深度学习的城市光伏潜力计算方法的步骤。应理解，上述实施例中各步骤的序号大小并不意味着执行顺序的先后，各过程的执行顺序应以其功能和内在逻辑确定，而不应对本发明实施例的实施过程构成任何限定。所属领域的技术人员可以清楚地了解到，为了描述的方便和简洁，仅以上述各功能单元、模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能单元、模块完成，即将上述装置的内部结构划分成不同的功能单元或模块，以完成以上描述的全部或者部分功能。实施例中的各功能单元、模块可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中，上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。另外，各功能单元、模块的具体名称也只是为了便于相互区分，并不用于限制本发明的保护范围。上述系统中单元、模块的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。在上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述或记载的部分，可以参见其它实施例的相关描述。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各实例的单元及算法步骤，能够以电子硬件、或者计算机软件和电子硬件的结合来实现。这些功能究竟是以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同法来实现所描述的功能，但是这种实现不应认为超出本发明的范围。在本发明所提供的实施例中，应该理解到，所揭露的装置/终端设备和方法，可以通过其它的方式实现。例如，以上所描述的装置/终端设备实施例仅仅是示意性的，例如，上述模块或单元的划分，仅仅为一种逻辑功能划分，实际实现时可以由另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。上述集成的模块/单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读存储介质中。基于这样的理解，本发明实现上述实施例方法中的全部或部分流程，也可以通过计算机程序来指令相关的硬件来完成，上述计算机程序可存储于一计算机可读存储介质中，该计算机程序在被处理器执行时，可实现上述各个方法实施例的步骤。其中，上述计算机程序包括计算机程序代码，上述计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。上述计算机可读介质可以包括：能够携带上述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。需要说明的是，上述计算机可读存储介质包含的内容可以根据司法管辖区内立法和专利实践的要求进行适当的增减。以上所述实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解；其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不是相应技术方案的本质脱离本发明各实施例技术方案的精神和范围，均应包含在本发明的保护范围之内。
