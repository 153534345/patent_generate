标题title
基于递归二分法的锂电池极片边缘位置检测方法及装置
摘要abst
本发明涉及基于递归二分法的锂电池极片边缘位置检测方法及装置，其中，检测方法包括：获取锂电池极片的间歇涂布图像；对间歇涂布图像进行灰度化处理，得到灰度化图像；基于递归二分法，结合对灰度化图像内边缘信息的分析，获取目标图像；对目标图像进行图像处理，确定边缘位置，完成针对锂电池极片边缘位置的检测。基于递归二分法，结合对灰度化图像内边缘信息的分析，对目标图像进行图像处理，能够有效降低运算量，提高涂布边缘检测效率；直接输出边缘位置节省内存空间；只检测出所需要的边缘，不对缺陷边缘检测，抗干扰能力强。
权利要求书clms
1.一种基于递归二分法的锂电池极片边缘位置检测方法，其特征在于，包括如下步骤：S1、获取锂电池极片的间歇涂布图像；S2、对间歇涂布图像进行灰度化处理，得到灰度化图像；S3、基于递归二分法，结合对灰度化图像内边缘信息的分析，获取目标图像；S4、对目标图像进行图像处理，确定边缘位置，完成针对锂电池极片边缘位置的检测。2.根据权利要求1所述的一种基于递归二分法的锂电池极片边缘位置检测方法，其特征在于，所述边缘信息为边缘数量；所述S3、基于递归二分法，结合对灰度化图像内边缘信息的分析，获取目标图像，具体包括如下步骤：S31、预设边缘数量的阈值；S32、获取灰度化图像内的边缘数量；S33、将灰度化图像内的边缘数量与边缘数量的阈值进行比较：若边缘数量小于边缘数量的阈值时，确定该灰度化图像内无锂电池极片边缘；若边缘数量等于边缘数量的阈值时，确定该灰度化图像为目标图像；若边缘数量大于边缘数量的阈值时，对该灰度化图像进行划分，直至所在划分图像内的边缘数量等于边缘数量的阈值，并确定该划分图像为目标图像。3.根据权利要求2所述的一种基于递归二分法的锂电池极片边缘位置检测方法，其特征在于，所述S32、获取灰度化图像内的边缘数量，具体包括如下步骤：S321、依据涂布方向，将灰度化图像划分为多行；S322、分析每行的像素均值，确定该行所属区域类型为灰色区域或白色区域；S323、根据每行所属区域类型以及区域高度，获取灰度化图像内的边缘数量。4.根据权利要求3所述的一种基于递归二分法的锂电池极片边缘位置检测方法，其特征在于，S321、依据涂布方向，将灰度化图像划分为多行，具体包括如下步骤：沿涂布垂线的方向，对灰度化图像划行，首行行号为t0，尾行行号为b0，中间行行号为m0，其中，m0=/2；S322、分析每行的像素均值，确定该行所属区域类型为灰色区域或白色区域，具体包括如下步骤：若某一行像素均值小于临界像素值，确定该行所属区域为灰色区域；若某一行像素均值大于等于临界像素值，确定该行所属区域为白色区域。5.根据权利要求4所述的一种基于递归二分法的锂电池极片边缘位置检测方法，其特征在于，取电池极片涂布绝缘区域宽度与电池极片留白区域宽度中的较小值为第一高度阈值，取电池极片涂布绝缘区域宽度与电池极片留白区域宽度的和为第二高度阈值；S323、根据每行所属区域类型以及区域高度，获取灰度化图像内的边缘数量，具体包括：若首行与尾行为相同的区域类型，且首行与尾行之间的高度小于第一高度阈值，确定灰度化图像内的边缘数量小于边缘数量的阈值；若首行与尾行为不同的区域类型，且首行与尾行之间的高度小于第二高度阈值，确定灰度化图像内的边缘数量等于边缘数量的阈值；否则，确定灰度化图像内的边缘数量大于边缘数量的阈值。6.根据权利要求5所述的一种基于递归二分法的锂电池极片边缘位置检测方法，其特征在于，步骤S33中对该灰度化图像进行划分，直至所在划分图像内的边缘数量等于边缘数量的阈值，具体包括如下步骤：S331：以中间行为界，将灰度化图像划分为上区域和下区域，其中，上区域的首行行号为t1，且t1=t0，尾行行号为b1，且b1=m0，中间行行号为m1，其中，m1=/2；下区域的首行行号为t2，且t2=m0，尾行行号为b2，且b2=b0，中间行行号为m2，其中，m2=/2；S332：分别对上区域和下区域重复步骤S323的处理；S333：基于递归方式，重复步骤S331-S332的处理，直至所在划分图像内的边缘数量等于边缘数量的阈值。7.根据权利要求4所述的一种基于递归二分法的锂电池极片边缘位置检测方法，其特征在于，S4、对目标图像进行图像处理，确定边缘位置，包括：S41、确定图像处理的二分法划分的最小范围，即界限值为R行；S42、根据目标图像的首行与尾行之间的行数，判断是否需要对目标图像进行二分：若目标图像的首行与尾行之间的行数大于等于R行时，进行二分，迭代目标图像，直到首行与尾行之间的行数小于R行，确定为最终的检测图像，若目标图像的首行与尾行之间的行数小于R行时，不进行二分，确定为最终的检测图像；S43、对检测图像的所有行进行像素差值的求方差计算，以方差最大的行为边缘所在的位置，输出该行的行号。8.根据权利要求7所述的一种基于递归二分法的锂电池极片边缘位置检测方法，其特征在于，步骤S42中若目标图像的首行与尾行之间的行数大于等于R行时，进行二分，迭代目标图像，直到首行与尾行之间的行数小于R行，具体包括：基于首行与中间行的所属区域类型的判断，进行二分处理：记录首行行号T，尾行行号B，则其中间行行号M=/2；获取首行T的像素均值ET、尾行B的像素均值EB和中间行M的像素均值EM；计算首行T的像素均值ET与中间行M的像素均值EM差值的绝对值，记为absTM，计算中间行M的像素均值EM与尾行B的像素均值EB差值的绝对值，记为absMB：若absTM大于absMB，则首行和中间行的所属区域类别不同，边缘在首行T和中间行M之间，将首行保持为首行，将中间行作为新的尾行，此时，令首行行号T=T，新尾行行号B新=M；若absTM小于absMB，则首行和中间行的所属区域类别相同，边缘在中间行M和尾行B之间，将中间行作为新的首行，尾行保持为尾行，此时，令新首行行号T新=M，尾行行号B=B；循环二分的过程，迭代目标图像，直到首行与尾行之间的行数小于R行。9.根据权利要求8所述的一种基于递归二分法的锂电池极片边缘位置检测方法，其特征在于，S43、对检测图像的所有行进行像素差值的求方差计算，以方差最大的行为边缘所在的位置，输出该行的行号，具体包括如下步骤：遍历检测图像中自行号T到行号B-1的所有B-T行；计算行号i 的像素数组与行号i+1的像素数组的差值，其中i=T, T+1,...，B-2，得到的差值数组记为diff_i；分别计算每个差值数组的方差，记为var_i，确定最大的方差值所对应的行号；若var_k值最大，则行号k就是边缘所在的位置，输出行号k。10.一种基于递归二分法的锂电池极片边缘位置检测装置，其特征在于，采用如权利要求1-9所述基于递归二分法的锂电池极片边缘位置检测方法，包括，图像获取模块，用于获取锂电池极片间歇涂布图像；图像处理模块，对间歇涂布图像进行灰度化处理，基于递归二分法，结合对灰度化图像内边缘信息的分析，获取目标图像；边缘检测模块，对目标图像进行图像处理，确定边缘位置，完成针对锂电池极片边缘位置的检测。
说明书desc
技术领域本发明涉及图像检测技术领域，更具体地，涉及基于递归二分法的锂电池极片边缘位置检测方法及装置。背景技术锂电池是一类由锂金属或锂合金为正/负极材料、使用非水电解质溶液的电池。随着技术的发展，现在锂电池已经成为了主流电池，在数码产品、电动汽车等高新技术领域广泛使用。锂电池的生产中需要对锂电池极片进行间歇涂布，锂电池极片间歇涂布工艺至少有两大要求：①间歇涂布的边缘应该是一条水平直线；②极片留白区域的宽度和涂布区域的宽度都应该是固定值。由于涂布技术以及操作误差的影响，间歇涂布的边缘存在不是直线、涂布宽度产生波动的情况，通常需要采集锂电池极片的图像，将图像中极片的间歇涂布边缘检测出来以进行判断，常见的有边缘呈现不规则的锯齿状曲线、倾斜边缘等，因此需要将曲线边缘提取成直线，再获取位置，或者在曲线所在的行号范围内选择最具有代表性的一个行号，作为边缘的位置；极片留白区域的宽度和涂布区域的宽度值会在固定值附近上下波动，而且波动幅度较小，由此，需要对极片的间歇涂布图像的涂布边缘进行检测，及时发现涂布过程中存在的问题。目前常用的边缘检测的方法包括Canny边缘检测算子、Laplacian算子、Sobel算子、Prewitt算子、Roberts算子等。其中，Canny边缘检测算子使用高斯滤波器进行模糊处理，然后计算图像梯度，在非极大值抑制和双阈值化等过程中进一步筛选边缘，该算法对噪声具有很好的鲁棒性，能够准确地定位边缘，并且速度最快，受到广泛应用。Laplacian算子是一种基于二阶导数的边缘检测算子，可以检测出图像中所有的边缘，该算子对噪声比较敏感，因此需要进行平滑处理后再使用。Sobel算子是一种基于梯度的边缘检测算子，通过计算图像在水平和竖直方向上的梯度来检测边缘，Sobel算子可以检测出较粗的边缘，同时具有抗噪声能力较强的特点。Prewitt算子是一种基于梯度的边缘检测算子，和Sobel算子类似，通过计算图像在水平和竖直方向上的梯度来检测边缘，Prewitt算子可以检测出较细的边缘，但对噪声比较敏感。Roberts算子是一种基于差分的边缘检测算子，通过计算图像中相邻像素的差值来检测边缘，Roberts算子对噪声比较敏感，因此需要进行平滑处理后再使用。上述现有的边缘检测算法，都是基于卷积神经网络的思想，能够检测出图像中达到梯度阈值的所有边界，但是运算量很大，检测速度缓慢。但由于涂布过程中会存在涂布缺陷，如不期望出现的涂布区域、折痕区域、胶印区域等，采集锂电池极片的图像时上述涂布缺陷均会被采集，现有边缘检测方法难以识别上述缺陷，影响判断结果，例如，关于进行边缘检测的专利文献CN111047615A、CN113689448A和CN111626236A。专利文献CN111047615A公开了一种基于图像的直线检测方法、装置以及电子设备，该方法首先从待检测图像的各个像素点中确定多个边缘点，然后对它们进行拟合，得到多条初始直线段，最后对多条初始直线段合并，获取待检测图像中的直线。该方法相比常见的边缘检测方法，速度有较大提升，然而，该方法无法避免缺陷的干扰。专利文献CN 113689448 A公开了一种基于FPGA的Sobel+Ewma边缘检测系统及方法，该方法通过调用Sobel+Ewma模块实现卷积模板的生成；然后使用Sobel+Ewma模块对数据缓存模块的图像做边缘检测处理，数据存储模块用以接收处理好的图像数据并保存。该方法可以方便地应用于FPGA对图像边缘的实时检测，但是由于方法基于Sobel卷积核卷积，在检测速度上没有较大的进步，检测比较缓慢。专利文献CN 111626236 A公开了一种快速的椭圆目标检测方法，该方法对预处理后的原始图像进行2个方向的Hough投票，通过获取两个方向的最大投票值、投票距离均值和投票距离宽度，来计算椭圆目标的长轴和短轴，进一步计算椭圆目标的中心和方向，实现椭圆目标检测。该方法只在两个方向投票，极大提高了运算效率，但是只限于提取图像中的椭圆目标，并不适用于锂电池极片间歇涂布边缘的检测。可见，现有边缘检测方法中至少存在以下问题，其一会将涂布缺陷的边缘误判为极片涂布的边缘，影响判断结果，其二检测的运算量很大，导致检测速度缓慢，并且需要新的内存空间存放边缘图像，再计算每个边缘的位置，要求内存空间大；对此，需要将极片间歇涂布中的缺陷边缘排除，进而提高极片间歇涂布边缘检测的准确性；另外，还需降低运算量，提高涂布边缘检测的效率，降低内存空间需求。发明内容有鉴于此，本发明提供了一种基于递归二分法的锂电池极片边缘位置检测方法，达到节省内存空间、提高涂布边缘检测的效率和准确性的目的。具体为一种基于递归二分法的锂电池极片边缘位置检测方法，包括如下步骤：S1、获取锂电池极片的间歇涂布图像；S2、对间歇涂布图像进行灰度化处理，得到灰度化图像；S3、基于递归二分法，结合对灰度化图像内边缘信息的分析，获取目标图像；S4、对目标图像进行图像处理，确定边缘位置，完成针对锂电池极片边缘位置的检测。进一步地，所述边缘信息为边缘数量；所述S3、基于递归二分法，结合对灰度化图像内边缘信息的分析，获取目标图像，具体包括如下步骤：S31、预设边缘数量的阈值；S32、获取灰度化图像内的边缘数量；S33、将灰度化图像内的边缘数量与边缘数量的阈值进行比较：若边缘数量小于边缘数量的阈值时，确定该灰度化图像内无锂电池极片边缘；若边缘数量等于边缘数量的阈值时，确定该灰度化图像为目标图像；若边缘数量大于边缘数量的阈值时，对该灰度化图像进行划分，直至所在划分图像内的边缘数量等于边缘数量的阈值，并确定该划分图像为目标图像。进一步的，所述S32、获取灰度化图像内的边缘数量，具体包括如下步骤：S321、依据涂布方向，将灰度化图像划分为多行；S322、分析每行的像素均值，确定该行所属区域类型为灰色区域或白色区域；S323、根据每行所属区域类型以及区域高度，获取灰度化图像内的边缘数量。进一步的，S321、依据涂布方向，将灰度化图像划分为多行，具体包括如下步骤：沿涂布垂线的方向，对灰度化图像划行，首行行号为t0，尾行行号为b0，中间行行号为m0，其中，m0=/2；S322、分析每行的像素均值，确定该行所属区域类型为灰色区域或白色区域，具体包括如下步骤：若某一行像素均值小于临界像素值，确定该行所属区域为灰色区域；若某一行像素均值大于等于临界像素值，确定该行所属区域为白色区域。进一步的，取电池极片涂布绝缘区域宽度与电池极片留白区域宽度中的较小值为第一高度阈值，取电池极片涂布绝缘区域宽度与电池极片留白区域宽度的和为第二高度阈值；S323、根据每行所属区域类型以及区域高度，获取灰度化图像内的边缘数量，具体包括：若首行与尾行为相同的区域类型，且首行与尾行之间的高度小于第一高度阈值，确定灰度化图像内的边缘数量小于边缘数量的阈值；若首行与尾行为不同的区域类型，且首行与尾行之间的高度小于第二高度阈值，确定灰度化图像内的边缘数量等于边缘数量的阈值；否则，确定灰度化图像内的边缘数量大于边缘数量的阈值。进一步的，步骤S33中对该灰度化图像进行划分，直至所在划分图像内的边缘数量等于边缘数量的阈值，具体包括如下步骤：S331：以中间行为界，将灰度化图像划分为上区域和下区域，其中，上区域的首行行号为t1，且t1=t0，尾行行号为b1，且b1=m0，中间行行号为m1，其中，m1=/2；下区域的首行行号为t2，且t2=m0，尾行行号为b2，且b2=b0，中间行行号为m2，其中，m2=/2；S332：分别对上区域和下区域重复步骤S323的处理；S333：基于递归方式，重复步骤S331-S332的处理，直至所在划分图像内的边缘数量等于边缘数量的阈值。进一步地，S4、对目标图像进行图像处理，确定边缘位置，包括：S41、确定图像处理的二分法划分的最小范围，即界限值为R行；S42、根据目标图像的首行与尾行之间的行数，判断是否需要对目标图像进行二分：若目标图像的首行与尾行之间的行数大于等于R行时，进行二分，迭代目标图像，直到首行与尾行之间的行数小于R行，确定为最终的检测图像，若目标图像的首行与尾行之间的行数小于R行时，不进行二分，确定为最终的检测图像；S43、对检测图像的所有行进行像素差值的求方差计算，以方差最大的行为边缘所在的位置，输出该行的行号。进一步地，步骤S42中若目标图像的首行与尾行之间的行数大于等于R行时，进行二分，迭代目标图像，直到首行与尾行之间的行数小于R行，具体包括：基于首行与中间行的所属区域类型的判断，进行二分处理：记录首行行号T，尾行行号B，则其中间行行号M=/2；获取首行T的像素均值ET、尾行B的像素均值EB和中间行M的像素均值EM；计算首行T的像素均值ET与中间行M的像素均值EM差值的绝对值，记为absTM，计算中间行M的像素均值EM与尾行B的像素均值EB差值的绝对值，记为absMB：若absTM大于absMB，则首行和中间行的所属区域类别不同，边缘在首行T和中间行M之间，将首行保持为首行，将中间行作为新的尾行，此时，令首行行号T=T，新尾行行号B新=M；若absTM小于absMB，则首行和中间行的所属区域类别相同，边缘在中间行M和尾行B之间，将中间行作为新的首行，尾行保持为尾行，此时，令新首行行号T新=M，尾行行号B=B；循环二分的过程，迭代目标图像，直到首行与尾行之间的行数小于R行。进一步地，S43、对检测图像的所有行进行像素差值的求方差计算，以方差最大的行为边缘所在的位置，输出该行的行号，具体包括如下步骤：遍历检测图像中自行号T到行号B-1的所有B-T行；计算行号i 的像素数组与行号i+1的像素数组的差值，其中i=T, T+1,...，B-2，得到的差值数组记为diff_i；分别计算每个差值数组的方差，记为var_i，确定最大的方差值所对应的行号；若var_k值最大，则行号k就是边缘所在的位置，输出行号k。本发明还提供一种基于递归二分法的锂电池极片边缘位置检测装置，采用上述基于递归二分法的锂电池极片边缘位置检测方法，包括，图像获取模块，用于获取锂电池极片间歇涂布图像；图像处理模块，对间歇涂布图像进行灰度化处理，基于递归二分法，结合对灰度化图像内边缘信息的分析，获取目标图像；边缘检测模块，对目标图像进行图像处理，确定边缘位置，完成针对锂电池极片边缘位置的检测。与现有技术相比，本发明至少具有以下有益效果：1.节省内存空间。在查找边缘的过程中本算法可以直接算出边界位置，而其他边缘检测算法需要开辟新的内存空间存放边缘图像，再计算每个边界的位置，对于只需要输出边缘所在位置的情况，可以节省更多的内存空间。2.检测边缘的速度快。基于递归二分法，通过对图像边缘数量的检测，缩小边缘的查找范围，确定目标图像，再对该目标图像进行处理，并且在目标图像上采用常规二分法确定边缘位置。相对于现有的边缘检测算法，能够有效降低运算量，提高涂布边缘检测的效率；在输出边缘图像的情况下，使用本算法进行锂电池极片间歇涂布边缘检测所用的时间是其他边缘检测算法的几十到几百分之一；在只输出边缘位置的情况下，本算法所用时间是其他算法的几百到几万分之一；大大节省了检测时间，提升了检测效率。3.检测边缘的位置更准确。本算法使用的像素均值进行判断，缺陷在计算均值的过程中会被稀释掉，因此只有真正的间歇涂布边缘被检出，缺陷的存在不会影响检测结果，本算法可以只检测出所需要的边缘而不检出缺陷的边缘，抗干扰能力强，而其他算法会同时检测出一些缺陷的边缘，后续计算目标位置时会造成误差；其次，在直线边缘有一些倾斜或者边缘呈现不规则的锯齿状曲线的情况下，本算法是通过取方差最大的行作为边缘，得到的边缘位置更居中。本发明的其它特征和优点将在随后的说明书中阐述，并且，部分地从说明书中变得显而易见，或者通过实施本发明而了解。本发明的目的和其他优点可通过在说明书、权利要求书以及附图中所指出的结构来实现和获得。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1示出了本发明提供的锂电池极片间歇涂布一实施例的图像。图2示出了本发明提供的锂电池极片涂布边缘锯齿状曲线一实施例的示例。图3示出了本发明提供的锂电池极片边缘位置检测方法一实施例的流程图。图4示出了本发明提供的锂电池极片边缘位置检测方法一实施例获取目标图像的流程图。图5示出了本发明提供的锂电池极片边缘位置检测方法一实施例获取边缘数量的流程图。图6示出了本发明提供的锂电池极片边缘位置检测方法一实施例图像处理的流程图。图7示出了本发明提供的锂电池极片边缘位置检测装置一实施例的结构示意图。图8示出了本发明一实施例提供的20000行*3000列锂电池极片间歇涂布原始图像。图9示出了本发明一实施例提供的1000行*1024列锂电池极片间歇涂布原始图像。图10示出了本发明一实施例提供的20000行*3000列锂电池极片6种边缘检测算法得到的部分间歇涂布边缘图像，其中A为原图像，B到G所表示的图像依次是：B为本文算法、C为Canny算法、D为Sobel算法、E为Prewitt算法、F为Roberts算法、G为Laplacian算法。图11示出了本发明一实施例提供的1000行*1024列锂电池极片6种边缘检测算法得到的部分间歇涂布边缘图像，其中A为原图像，B到G所表示的图像依次是：B为本文算法、C为Canny算法、D为Sobel算法、E为Prewitt算法、F为Roberts算法、G为Laplacian算法。图12示出了本发明一实施例提供的20000行*3000列锂电池极片有缺陷的情况下6种边缘检测算法得到的部分间歇涂布边缘图像，其中A为原图像，B到G所表示的图像依次是：B为本文算法、C为Canny算法、D为Sobel算法、E为Prewitt算法、F为Roberts算法、G为Laplacian算法。附图标记说明：1、留白区域；2、涂布绝缘区域；3、图像获取模块；4、图像处理模块；5、边缘检测模块。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地说明，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。如图1所示，本发明一实施例提供的锂电池极片间歇涂布图像，留白区域1和涂布绝缘区域2交替排布，极片上的留白区域1为白色区域，极片上的涂布绝缘区域2为灰色区域。在进行极片的涂布时，理论上锂电池极片间歇涂布边缘应该是水平直线，然而受涂布技术影响，边缘容易呈现不规则的锯齿状曲线，如图2所示，图2中还示出了锯齿状曲线的放大图。因此，需要将曲线边缘提取成直线，再获取位置，或者在曲线所在的行号范围内选择最具有代表性的一个行号，作为边缘的位置输出。在实际检测中，获取的锂电池极片的间歇涂布图像内的边缘数量存在多种情况，最少为0条，最多则数量无法预计，需要充分考虑可能出现的所有情况。对此，为了达到节省内存空间、提高涂布边缘检测的效率和准确性的目的，提出了本发明的基于递归二分法的锂电池极片边缘位置检测方法。如图3所示，图3示出了本发明一实施例提供的锂电池极片边缘位置检测方法的流程示意图。锂电池极片边缘位置检测方法包括如下步骤：S1、获取锂电池极片的间歇涂布图像；S2、对间歇涂布图像进行灰度化处理，得到灰度化图像；S3、基于递归二分法，结合对灰度化图像内边缘信息的分析，获取目标图像；S4、对目标图像进行图像处理，确定边缘位置，完成针对锂电池极片边缘位置的检测。进一步地，所述边缘信息为边缘数量，如图4所示，S3、基于对灰度化图像内边缘信息的分析，获取目标图像，具体包括如下步骤：S31、预设边缘数量的阈值；S32、获取灰度化图像内的边缘数量；S33、将灰度化图像内的边缘数量与边缘数量的阈值进行比较：若边缘数量小于边缘数量的阈值时，确定该灰度化图像内无锂电池极片边缘；若边缘数量等于边缘数量的阈值时，确定该灰度化图像为目标图像；若边缘数量大于边缘数量的阈值时，对该灰度化图像进行划分，直至所在划分图像内的边缘数量等于边缘数量的阈值，并确定该划分图像为目标图像。边缘数量为整数，最少为0条，最多则数量无法预计。S31中预设边缘数量的阈值设为1。若灰度化图像内边缘数量小于边缘数量的阈值时，边缘数量只能为0，可以直接确认该灰度化图像内无边缘，无需进行边缘位置的检测；若边缘数量等于边缘数量的阈值时，表明边缘数量为1，确定该灰度化图像为目标图像；若边缘数量大于边缘数量的阈值时，表明边缘数量大于1，需要对该灰度化图像进行再次划分，直至所在划分图像内的边缘数量等于边缘数量的阈值1，并确定该划分图像为目标图像。如图5所示，S32、获取灰度化图像内的边缘数量，具体包括如下步骤：S321、依据涂布方向，将灰度化图像划分为多行；S322、分析每行的像素均值，确定该行所属区域类型为灰色区域或白色区域；S323、根据每行所属区域类型以及区域高度，获取灰度化图像内的边缘数量。其中，步骤S321、依据边缘方向，将灰度化图像划分为多行，具体为：沿涂布垂线的方向，对灰度化图像划行，首行行号为t0，尾行行号为b0，中间行行号为m0，其中，m0=/2；在此，不限定灰度化图像划行的具体行数，后续的处理可以依照行号进行。步骤S322、分析每行的像素均值，确定该行所属区域类型为灰色区域或白色区域，具体包括如下步骤：若某一行像素均值小于临界像素值，确定该行所属区域为灰色区域；若某一行像素均值大于等于临界像素值，确定该行所属区域为白色区域。进一步地，取电池极片涂布绝缘区域宽度与电池极片留白区域宽度中的较小值为第一高度阈值，取电池极片涂布绝缘区域宽度与电池极片留白区域宽度的和为第二高度阈值。作为一种较优的实施方式，设置图片区域内灰色区域和白色区域的临界像素值为P，若某一行像素均值小于P，则这一行为灰色区域，否则这一行为白色区域。电池极片留白区域为白色区域，所述留白区域的理论宽度为m行，电池极片涂布绝缘区域为灰色区域，所述涂布绝缘区域的理论宽度为n行，留白区域的实际宽度和涂布绝缘区域的实际宽度分别在理论宽度上波动±delta行；两条边缘之间的高度为min行，将min行作为第一高度阈值；三条边缘中外侧两条边缘之间的高度为行，将行作为第二高度阈值。步骤S323、根据每行所属区域类型以及区域高度，获取灰度化图像内的边缘数量，具体包括：若首行与尾行为相同的区域类型，且首行与尾行之间的高度小于第一高度阈值，确定灰度化图像内的边缘数量小于边缘数量的阈值；若首行与尾行为不同的区域类型，且首行与尾行之间的高度小于第二高度阈值，确定灰度化图像内的边缘数量等于边缘数量的阈值；否则，确定灰度化图像内的边缘数量大于边缘数量的阈值。如果首行和尾行图像都属于灰色区域或者都属于白色区域，那么图片区域内边缘的可能数量为0,2,4,6...条；如果首行和尾行图像属于不同的颜色区域，那么图片区域内边缘的可能数量为1,3,5,7...条。作为一种较优的实施方式，步骤S323中，若首行与尾行为相同的区域类型，均为白色区域或灰色区域，且首行与尾行之间的高度小于第一高度阈值min，则该灰度化图像内的边缘数量为0，即小于边缘数量的阈值1；若首行与尾行为不同的区域类型，且首行与尾行之间的行数之差小于第二高度阈值，则该灰度化图像内的边缘数量为1，即等于边缘数量的阈值1；若不属于以上两种情况，则该灰度化图像内的边缘数量大于1，即大于边缘数量的阈值1。其中，步骤S33中，对该灰度化图像进行划分，直至所在划分图像内的边缘数量等于边缘数量的阈值，具体包括如下步骤：S331：以中间行为界，将灰度化图像划分为上区域和下区域，其中，上区域的首行行号为t1，且t1=t0，尾行行号为b1，且b1=m0，中间行行号为m1，其中，m1=/2；下区域的首行行号为t2，且t2=m0，尾行行号为b2，且b2=b0，中间行行号为m2，其中，m2=/2；S332：分别对上区域和下区域重复步骤S323的处理；S333：基于递归方式，重复步骤S331-S332的处理，直至所在划分图像内的边缘数量等于边缘数量的阈值。如图6所示，步骤S4、对目标图像进行图像处理，确定边缘位置，包括：S41、确定图像处理的二分法划分的最小范围，即界限值为R行；S42、根据目标图像的首行与尾行之间的行数，判断是否需要对目标图像进行二分：若目标图像的首行与尾行之间的行数大于等于R行时，进行二分，迭代目标图像，直到首行与尾行之间的行数小于R行，确定为最终的检测图像，若目标图像的首行与尾行之间的行数小于R行时，不进行二分，确定为最终的检测图像；S43、对检测图像的所有行进行像素差值的求方差计算，以方差最大的行为边缘所在的位置，输出该行的行号。进一步地，步骤S42中若目标图像的首行与尾行之间的行数大于等于R行时，进行二分，迭代目标图像，直到首行与尾行之间的行数小于R行，具体包括：基于首行与中间行的所属区域类型的判断，进行二分处理：记录首行行号T，尾行行号B，则其中间行行号M=/2；获取首行T的像素均值ET、尾行B的像素均值EB和中间行M的像素均值的像素均值EM；计算首行T的像素均值ET与中间行M的像素均值EM差值的绝对值，记为absTM，计算中间行M的像素均值EM与尾行B的像素均值EB差值的绝对值，记为absMB：若absTM大于absMB，则首行和中间行的所属区域类别不同，边缘在首行T和中间行M之间，将首行保持为首行，将中间行作为新的尾行，此时，令首行行号T=T，新尾行行号B新=M；如果absTM小于absMB，则首行和中间行的所属区域类别相同，边缘在中间行M和尾行B之间，将中间行作为新的首行，尾行保持为尾行，此时，令新首行行号T新=M，尾行行号B=B；循环二分的过程，迭代目标图像，直到首行与尾行之间的行数小于R行。进一步地，步骤S43、对检测图像的所有行进行像素差值的求方差计算，以方差最大的行为边缘所在的位置，输出该行的行号，具体包括如下步骤：遍历检测图像中自行号T到行号B-1的所有B-T行；计算行号i 的像素数组与行号i+1的像素数组的差值，其中i=T, T+1, ... B-2，得到的差值数组记为diff_i；分别计算每个差值数组的方差，记为var_i，确定最大的方差值所对应的行号；若var_k值最大，则行号k就是边缘所在的位置，输出行号k。在一实施例中，基于上述基于递归二分法的锂电池极片边缘位置检测方法，本发明还提供一种基于递归二分法的锂电池极片边缘位置检测装置，如图7所示，所述装置包括，图像获取模块3，用于获取锂电池极片间歇涂布图像；图像处理模块4，对间歇涂布图像进行灰度化处理，基于递归二分法，结合对灰度化图像内边缘信息的分析，获取目标图像；边缘检测模块5，对目标图像进行图像处理，确定边缘位置，完成针对锂电池极片边缘位置的检测。在一实施例中，基于上述基于递归二分法的锂电池极片边缘位置检测方法，本发明还提供一种基于递归二分法的锂电池极片边缘位置检测设备，所述设备包括，存储器；以及耦接至所述存储器的处理器，所述处理器被配置为基于存储在所述存储器中的指令，执行上述基于递归二分法的锂电池极片边缘位置检测方法。本发明所提出的检测算法，在查找边缘的过程中本算法可以直接算出边界位置，而其他边缘检测算法需要开辟新的内存空间存放边缘图像，再计算每个边界的位置；对于只需要输出边缘所在行号的情况，可以节省更多的内存空间。基于递归二分法，通过对图像边缘数量的检测，缩小边缘的查找范围，确定图片区域内的边缘数量为阈值的情况下再对该图片进行处理，并且图片处理采用常规二分法确定边缘位置，相对于现有的边缘检测算法，能够有效降低运算量，提高涂布边缘检测的效率。使用整行图像的像素均值进行判断，可以只检测出所需要的边缘而不检出缺陷的边缘，抗干扰能力强，而其他算法会同时检测出一些缺陷的边缘，后续计算目标位置时会造成误差；其次，在直线边缘有一些倾斜或者边缘呈现不规则的锯齿状曲线的情况下，本算法是通过取方差最大的行作为边缘，得到的边缘位置更居中。为了验证本发明算法的速度和准确性，选择了两组锂电池极片间歇涂布图像，两组图像均选取9张图片进行比对，一组为20000行*3000列图像，如图8所示，图中9张图片编号从左至右依次为第0、1、2、3、4、5、6、7、8张；一组为1000行*1024列图像，如图9所示，图中9张图片编号从左至右依次为第0、1、2、3、4、5、6、7、8张，需要说明的是，图9中第1张图片的图像全部为白色区域。采用本发明提出的基于递归二分法的锂电池极片边缘位置检测方法，分别对两组图像检测极片间歇涂布边缘检测并输出结果。此外，作为对照，对每一组图像分别使用Canny边缘检测算子、Sobel算子、Prewitt算子、Roberts算子和Laplacian算子5种常用算法进行边缘检测并输出结果。20000行*3000列图像使用本发明的方法以及5种常规算法进行间歇涂布边缘位置检测，输出结果为边缘位置所需要的时间如表1所示，输出结果为边缘图像所需要的时间如表2所示，得到的边缘图像如图10所示，图10中，A为原图像，B到G所表示的图像依次是：B为本文算法、C为Canny算法、D为Sobel算法、E为Prewitt算法、F为Roberts算法、G为Laplacian算法。表1 不同算法对20000行*3000列图像进行边缘检测所需的时间输出结果：边缘位置单位：毫秒表2 不同算法对20000行*3000列图像进行边缘检测所需的时间输出结果：边缘图像单位：毫秒1000行*1024列图像使用本发明的方法以及5种常用算法进行间歇涂布边缘位置检测，输出结果为边缘位置所需要的时间如表3所示，输出结果为边缘图像所需要的时间如表4所示，得到的边缘图像如图11所示，图11中A为原图像，B到G所表示的图像依次是：B为本文算法、C为Canny算法、D为Sobel算法、E为Prewitt算法、F为Roberts算法、G为Laplacian算法。表3 不同算法对1000行*1024列图像进行边缘检测所需的时间输出结果：边缘位置单位：纳秒表4 不同算法对1000行*1024列图像进行边缘检测所需的时间输出结果：边缘图像单位：纳秒从表1-4和图10-图11中的对比可以看出，本发明采用的基于递归二分法的边缘位置检测方法检测速度远远优于其他5种常用的边缘检测算法。进行20000行*3000列图像的检测时，本发明算法相比于其他算法所用的时间相差几十到几百倍；进行1000行*1024列图像的检测时，本发明算法相比于其他算法所用的时间相差几十到几万倍，尤其在没有间歇涂布边缘的极片图像中输出结果为边缘位置时，本发明算法的检测时间只有2ns左右。此外，对于需要输出边缘图像而不需要打印边缘位置的情况，由于需要新建一个空白图像用来存放边缘，用本发明算法进行边缘检测并输出边缘图像的速度比进行边缘检测并打印边缘位置的速度降低了，但是输出边缘图像的情况下，本文算法的速度也远远大于其他5种算法。其次，本文算法在速度上有很大提升的同时，也保证了准确度。6种边缘检测算法得到的边缘图像如图10和图11所示，在间歇涂布边缘图像没有缺陷的情况下，所有的算法都可以检测出极片的间歇涂布边缘，没有误检和漏检的情况。然而，在另一实施例中，如图12所示，20000行*3000列锂电池极片有缺陷的情况下6种边缘检测算法得到的部分间歇涂布边缘图像，图12中A为原图像，B到G所表示的图像依次是：B为本文算法、C为Canny算法、D为Sobel算法、E为Prewitt算法、F为Roberts算法、G为Laplacian算法。当图像中有折痕、胶印等缺陷时，Canny、Sobel、Prewitt、Roberts和Laplacian边缘检测算法由于是使用面积较小的卷积核进行卷积，会将缺陷的边缘同时检出，干扰了真正的极片间歇涂布边缘的提取；而本算法使用的是整行图像的像素均值进行判断，缺陷在计算均值的过程中会被稀释掉，因此只有真正的间歇涂布边缘被检出，缺陷的存在不会影响检测结果。可见，本算法相比其他的边缘检测算法的另一优点是抗干扰能力强，有避开缺陷边缘、只输出极片间歇涂布边缘的能力，能够有效避免误检的出现。本领域的技术人员应明白，本发明公开的实施例可提供为方法、装置、或计算机程序产品。因此，本发明可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明可采用在一个或多个其中包含有计算机可用程序代码的计算机可用非瞬时性存储介质上实施的计算机程序产品的形式。可能以许多方式来实现本发明的方法和系统。例如，可通过软件、硬件、固件或者软件、硬件、固件的任何组合来实现本公开的方法和系统。用于方法的步骤的上述顺序仅是为了进行说明，本发明的方法的步骤不限于以上具体描述的顺序，除非以其它方式特别说明。此外，在一些实施例中，还可将本发明实施为记录在记录介质中的程序，这些程序包括用于实现根据本公开的方法的机器可读指令。因而，本发明还覆盖存储用于执行根据本发明的方法的程序的记录介质。本发明的描述是为了示例和描述起见而给出的，而并不是无遗漏的或者将本发明限于所公开的形式。很多修改和变化对于本领域的普通技术人员而言是显然的。选择和描述实施例是为了更好说明本发明的原理和实际应用，并且使本领域的普通技术人员能够理解本发明从而设计适于特定用途的带有各种修改的各种实施例。
