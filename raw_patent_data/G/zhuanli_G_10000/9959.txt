标题title
一种停车巡检方法、装置、移动巡逻设备及巡检系统
摘要abst
本申请实施例提供了一种停车巡检方法、装置、移动巡逻设备及巡检系统，该方法应用于移动巡逻设备，包括：响应于在巡检图像上检测出目标车辆，计算目标车辆的位置信息，其中，巡检图像是图像采集设备对路面车辆进行拍摄得到，图像采集设备搭载在移动巡逻设备上；基于目标车辆的位置信息，在停车位集合中确定至少一个备选停车位；基于目标车辆分别与至少一个备选停车位的距离，确定与目标车辆匹配的目标停车位。本方案不仅可以解决停车巡检效率低的问题，还可以适用于各种类型的停车位，适用范围更广。
权利要求书clms
1.一种停车巡检方法，其特征在于，应用于移动巡逻设备，所述方法包括：响应于在巡检图像上检测出目标车辆，计算所述目标车辆的位置信息，其中，所述巡检图像是图像采集设备对路面车辆进行拍摄得到，所述图像采集设备搭载在所述移动巡逻设备上；基于所述目标车辆的位置信息，在停车位集合中确定至少一个备选停车位；基于所述目标车辆分别与所述至少一个备选停车位的距离，确定与所述目标车辆匹配的目标停车位。2.根据权利要求1所述的方法，其特征在于，所述基于所述目标车辆的位置信息，在停车位集合中确定至少一个备选停车位，包括：将所述目标车辆的位置信息作为目标点，在预设结构数据中进行最临近搜索，确定至少一个备选停车位；其中，所述预设结构数据是基于所述停车位集合中各停车位的位置信息，按照预设数据结构形式对各停车位的位置信息进行组织而得到。3.根据权利要求2所述的方法，其特征在于，所述停车位集合中各停车位的位置信息包括各停车位的预设几何坐标，所述预设结构数据包括基于各停车位的预设几何坐标，按照N叉树结构进行构建得到的数据，N为大于1的整数。4.根据权利要求1所述的方法，其特征在于，如果所述目标车辆的数量为多个，则所述基于所述目标车辆分别与所述至少一个备选停车位的距离，确定与所述目标车辆匹配的目标停车位，包括：将各个目标车辆分别与各个备选停车位进行组合，得到多组组合关系，其中，每组组合关系中的不同目标车辆对应不同的备选停车位；基于每组组合关系中各个目标车辆和与之对应的备选停车位的距离之和，确定目标组合关系，并将所述目标组合关系中每个目标车辆对应的备选停车位，确定为每个目标车辆匹配的目标停车位。5.根据权利要求4所述的方法，其特征在于，所述将各个目标车辆分别与各个备选停车位进行组合，得到多组组合关系，包括：基于每个目标车辆和所述停车位集合中与之对应的备选停车位的距离、以及第一距离阈值，对目标车辆进行筛选，将筛选后的各个目标车辆分别与各个备选停车位进行组合，得到多组组合关系；或者对所述至少一个备选停车位进行去重处理，将各个目标车辆分别与去重处理后的各个备选停车位进行组合，得到多组组合关系；或者基于每个目标车辆和所述停车位集合中与之对应的备选停车位的距离、以及第一距离阈值，对目标车辆进行筛选，并对所述至少一个备选停车位进行去重处理，将筛选后的各个目标车辆分别与去重处理后的各个备选停车位进行组合，得到多组组合关系。6.根据权利要求1所述的方法，其特征在于，所述计算所述目标车辆的位置信息，包括：确定所述目标车辆与所述移动巡逻设备的相对位置信息；根据所述移动巡逻设备的当前位置信息和所述相对位置信息，计算所述目标车辆的位置信息。7.根据权利要求1所述的方法，其特征在于，所述计算所述目标车辆的位置信息，包括：基于多帧巡检图像上目标特征点的图像坐标、以及所述图像采集设备在各巡检图像的采集时刻的位置信息，确定对应各个采集时刻的观测直线；其中，所述多帧巡检图像中均出现被检测出的目标车辆，所述目标特征点用于表示所述多帧巡检图像上的同一目标车辆，所述观测直线用于确定目标车辆的位置信息；基于各个采集时刻的观测直线之间的相交关系，确定多个观测点，并从所述多个观测点中确定有效观测点；基于有效观测点的位置信息，确定所述目标车辆的位置信息。8.根据权利要求1所述的方法，其特征在于，所述方法还包括：检测所述目标车辆的车牌信息；在所述基于所述目标车辆分别与所述至少一个备选停车位的距离，确定与所述目标车辆匹配的目标停车位之后，所述方法还包括：将所述目标车辆的车牌信息和所述目标停车位进行关联，并上报至接收设备。9.根据权利要求1所述的方法，其特征在于，所述基于所述目标车辆的位置信息，在停车位集合中确定至少一个备选停车位，包括：如果在多帧巡检图像上检测出所述目标车辆，则根据所述目标车辆的位置信息的变化，确定所述目标车辆的运动状态，其中，所述运动状态为静止或运动；如果所述目标车辆的运动状态为静止，则基于所述目标车辆的位置信息，在停车位集合中确定至少一个备选停车位。10.根据权利要求1所述的方法，其特征在于，所述方法还包括：如果基于在前帧巡检图像上检测出的目标车辆的位置信息，确定不存在与所述在前帧巡检图像上的第一停车位的位置信息匹配的目标车辆，且当前帧巡检图像上未出现所述第一停车位，则确定所述第一停车位为空车位。11.一种停车巡检装置，其特征在于，配置于移动巡逻设备，所述装置包括：计算模块，用于响应于在巡检图像上检测出目标车辆，计算所述目标车辆的位置信息，其中，所述巡检图像是图像采集设备对路面车辆进行拍摄得到，所述图像采集设备搭载在所述移动巡逻设备上；备选停车位确定模块，用于基于所述目标车辆的位置信息，在停车位集合中确定至少一个备选停车位；目标停车位确定模块，用于基于所述目标车辆分别与所述至少一个备选停车位的距离，确定与所述目标车辆匹配的目标停车位。12.根据权利要求11所述的装置，其特征在于；所述计算模块，具体用于确定所述目标车辆与所述移动巡逻设备的相对位置信息；根据所述移动巡逻设备的当前位置信息和所述相对位置信息，计算所述目标车辆的位置信息；或者，所述计算模块，具体用于：基于多帧巡检图像上目标特征点的图像坐标、以及所述图像采集设备在各巡检图像的采集时刻的位置信息，确定对应各个采集时刻的观测直线；其中，所述多帧巡检图像中均出现被检测出的目标车辆，所述目标特征点用于表示所述多帧巡检图像上的同一目标车辆，所述观测直线用于确定目标车辆的位置信息；基于各个采集时刻的观测直线之间的相交关系，确定多个观测点，并从所述多个观测点中确定有效观测点；基于有效观测点的位置信息，确定所述目标车辆的位置信息；所述备选停车位确定模块包括：搜索子模块，用于将所述目标车辆的位置信息作为目标点，在预设结构数据中进行最临近搜索，确定至少一个备选停车位；其中，所述预设结构数据是基于所述停车位集合中各停车位的位置信息，按照预设数据结构形式对各停车位的位置信息进行组织而得到；所述停车位集合中各停车位的位置信息包括各停车位的预设几何坐标，所述预设结构数据包括基于各停车位的预设几何坐标，按照N叉树结构进行构建得到的数据，N为大于1的整数；或者，所述备选停车位确定模块包括：状态判断子模块，用于如果在多帧巡检图像上检测出所述目标车辆，则根据所述目标车辆的位置信息的变化，确定所述目标车辆的运动状态，其中，所述运动状态为静止或运动；确定子模块，用于如果所述目标车辆的运动状态为静止，则基于所述目标车辆的位置信息，在停车位集合中确定至少一个备选停车位；所述目标停车位确定模块包括：组合子模块，用于在所述目标车辆的数量为多个的情况下，将各个目标车辆分别与各个备选停车位进行组合，得到多组组合关系，其中，每组组合关系中的不同目标车辆对应不同的备选停车位；分配子模块，用于基于每组组合关系中各个目标车辆和与之对应的备选停车位的距离之和，确定目标组合关系，并将所述目标组合关系中每个目标车辆对应的备选停车位，确定为每个目标车辆匹配的目标停车位；所述组合子模块具体用于：基于每个目标车辆和所述停车位集合中与之对应的备选停车位的距离、以及第一距离阈值，对目标车辆进行筛选，将筛选后的各个目标车辆分别与各个备选停车位进行组合，得到多组组合关系；或者，所述组合子模块具体用于：对所述至少一个备选停车位进行去重处理，将各个目标车辆分别与去重处理后的各个备选停车位进行组合，得到多组组合关系；或者，所述组合子模块具体用于：基于每个目标车辆和所述停车位集合中与之对应的备选停车位的距离、以及第一距离阈值，对目标车辆进行筛选，并对所述至少一个备选停车位进行去重处理，将筛选后的各个目标车辆分别与去重处理后的各个备选停车位进行组合，得到多组组合关系；所述装置还包括：车牌检测模块，用于检测目标车辆的车牌信息；关联上报模块，用于将所述目标车辆的车牌信息和所述目标停车位进行关联，并上报至接收设备；空车位确定模块，用于如果基于在前帧巡检图像上检测出的目标车辆的位置信息，确定不存在与所述在前帧巡检图像上的第一停车位的位置信息匹配的目标车辆，且当前帧巡检图像上未出现所述第一停车位，则确定所述第一停车位为空车位。13.一种移动巡逻设备，其特征在于，所述移动巡逻设备包括处理器和存储器，其中，所述存储器，用于存放计算机程序；所述处理器，用于执行所述存储器上所存放的程序时，实现权利要求1-10任一项所述的方法。14.一种巡检系统，其特征在于，所述巡检系统包括移动巡逻设备和多个传感器，所述多个传感器中至少包括图像采集设备，所述多个传感器搭载在所述移动巡逻设备上，其中，所述图像采集设备，用于对路面车辆进行拍摄，得到巡检图像；所述移动巡逻设备，用于响应于在所述巡检图像上检测出目标车辆，计算所述目标车辆的位置信息；基于所述目标车辆的位置信息，在停车位集合中确定至少一个备选停车位；基于所述目标车辆分别与所述至少一个备选停车位的距离，确定与所述目标车辆匹配的目标停车位。
说明书desc
技术领域本申请涉及智能交通技术领域，特别是涉及一种停车巡检方法、装置、移动巡逻设备及巡检系统。背景技术随着车辆保有量的不断上升，对停车位的需求日益增加，停车压力不断增大。为了规范停车秩序，更好地对停车行为进行管理，有必要对路侧或开放区域的车位停车情况进行巡检。在一些停车巡检方案中，巡逻设备获取到车辆的位置信息后，直接基于车辆位置与停车位位置数据库的匹配，确定车辆所在的停车位，当停车位位置数据库中的数据量较大时，直接进行位置匹配的效率非常低，进而影响停车巡检效率。发明内容为了解决上述技术问题或者至少部分地解决上述技术问题，本申请实施例提供一种停车巡检方法、装置、移动巡逻设备及巡检系统，以提高停车巡检效率。第一方面，本申请实施例提供一种停车巡检方法，应用于移动巡逻设备，所述方法包括：响应于在巡检图像上检测出目标车辆，计算所述目标车辆的位置信息，其中，所述巡检图像是图像采集设备对路面车辆进行拍摄得到，所述图像采集设备搭载在所述移动巡逻设备上；基于所述目标车辆的位置信息，在停车位集合中确定至少一个备选停车位；基于所述目标车辆分别与所述至少一个备选停车位的距离，确定与所述目标车辆匹配的目标停车位。第二方面，本申请实施例提供一种停车巡检装置，配置于移动巡逻设备，所述装置包括：计算模块，用于响应于在巡检图像上检测出目标车辆，计算所述目标车辆的位置信息，其中，所述巡检图像是图像采集设备对路面车辆进行拍摄得到，所述图像采集设备搭载在所述移动巡逻设备上；备选停车位确定模块，用于基于所述目标车辆的位置信息，在停车位集合中确定至少一个备选停车位；目标停车位确定模块，用于基于所述目标车辆分别与所述至少一个备选停车位的距离，确定与所述目标车辆匹配的目标停车位。第三方面，本申请实施例提供一种移动巡逻设备，所述移动巡逻设备包括处理器和存储器，其中，所述存储器，用于存放计算机程序；所述处理器，用于执行所述存储器上所存放的程序时，实现本申请实施例提供的任一所述的停车巡检方法。第四方面，本申请实施例提供一种巡检系统，所述巡检系统包括移动巡逻设备和多个传感器，所述多个传感器中至少包括图像采集设备，所述多个传感器搭载在所述移动巡逻设备上，其中，所述图像采集设备，用于对路面车辆进行拍摄，得到巡检图像；所述移动巡逻设备，用于响应于在所述巡检图像上检测出目标车辆，计算所述目标车辆的位置信息；基于所述目标车辆的位置信息，在停车位集合中确定至少一个备选停车位；基于所述目标车辆分别与所述至少一个备选停车位的距离，确定与所述目标车辆匹配的目标停车位。本申请实施例提供的技术方案至少具有如下优点：在本申请实施例中，通过基于目标车辆的位置信息先筛选出备选停车位，再计算目标车辆与备选停车位的距离，以确定与目标车辆匹配的目标停车位，与现有技术中直接遍历停车位位置数据库进行匹配计算的方式相比，对位置匹配范围进行了有效缩减，减少了位置匹配的计算量，提高了匹配效率，进而提高了停车巡检效率，同时提高了关于停车取证的效率；而且，本方案无需预存移动巡逻设备所处的巡检区域与各停车位的对应关系，移动巡逻设备也无需按照预设的巡逻路线进行巡检，基于目标车辆的位置信息，可同时对多个目标车辆的位置信息与停车位集合中各停车位的位置信息进行距离关联，从而确定各停车位的停车情况，有助于进一步提高巡检效率，并且本方案适用于各种类型的停车位场景，包括但不限于垂直车位、斜向车位、水平车位等，即本方案的适用范围更广。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的实施例。图1为本申请实施例提供的停车巡检方法的一种流程示意图；图2为本申请实施例提供的一种融合定位方式示意图；图3为本申请实施例提供的停车巡检方法的一种具体流程示意图；图4为本申请实施例提供的停车巡检方法的另一种具体流程示意图；图5为本申请实施例提供的三角测量法的一种示意图；图6为本申请实施例提供的三角测量法的另一种示意图；图7为本申请实施例提供的停车巡检方法的再一种具体流程示意图；图8为本申请实施例提供的一种应用于横向车位的巡检场景的示意图；图9为本申请实施例提供的一种应用于斜向车位的巡检场景的示意图；图10为本申请实施例提供的一种应用于纵向车位的巡检场景的示意图；图11为本申请实施例提供的一种停车巡检装置的结构示意图；图12为本申请实施例提供的一种移动巡逻设备的结构示意图；图13为本申请实施例提供的一种巡检系统的结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员基于本申请所获得的所有其他实施例，都属于本申请保护的范围。以下方法实施例中的各个步骤按照合乎逻辑的顺序执行即可，步骤标号或者对各步骤进行介绍的先后顺序，并不对各步骤的执行顺序构成限定。图1为本申请实施例提供的停车巡检方法的一种流程示意图，该方法应用于移动巡逻设备，并可以由配置于移动巡逻设备的停车巡检装置执行，该装置可以采用软件和/或硬件实现。本申请实施例提供的停车巡检方法可以应用于地上停车场景，也可以应用于地下停车场景，本申请实施例对此不作具体限定。如图1所示，本申请实施例提供的停车巡检方法可以包括如下步骤：S110：响应于在巡检图像上检测出目标车辆，计算目标车辆的位置信息，其中，巡检图像是图像采集设备对路面车辆进行拍摄得到，图像采集设备搭载在移动巡逻设备上。举例来说，移动巡逻设备可以包括但不限于巡逻车、巡逻机器人、移动摄像头等任意具有停车巡检功能的可移动设备，一种情况下，可以通过获取搭载在移动巡逻设备上的图像采集设备采集的感知范围内的巡检图像，利用预设的车辆检测算法，检测该巡检图像中是否有车辆，若有，则将该车辆视为目标车辆，如无，则可以继续检测下一帧巡检图像。其中，图像采集设备可以为单目摄像头、双目摄像头等可以采集图像的设备。路面车辆可以包括停在地上路面的车辆，也可以包括停在地下路面的车辆。移动巡逻设备上搭载的图像采集设备的数量、以及安装位置，本申请实施例均不作具体限定，可以根据需求在移动巡逻设备上部署图像采集设备。以移动巡逻设备为巡逻车为例，可以在巡逻车的车头和车尾处部署至少两个图像采集设备，在巡检过程中，可以同时用于采集巡检图像。一种实施方式中，可以利用预先获取的多个不同车辆的图像样本，训练预设的神经网络模型，使完成训练的神经网络模型能够自动识别图像中是否存在车辆，完成训练的神经网络模型即可以作为一种预设的车辆检测算法。这种实施方式下，利用预设的车辆检测算法，可以端到端地对输入的巡检图像进行检测，得到该巡检图像中是否有车辆的检测结果。另一种实施方式中，也可以对预先获取的多个不同车辆的图像样本进行车辆特征提取，通过分析提取到的车辆特征，建立车辆特征匹配算法，作为一种预设的车辆检测算法。这种实施方式下，可以利用该预设的车辆检测算法对巡检图像中的图像特征与车辆特征进行特征匹配，若匹配成功，则确定该巡检图像中有车辆，若匹配失败，则确定巡检图像上不存在车辆。一种情况下，示例性地，可以将特征匹配成功的条件设定为：特征匹配结果的置信度大于第一预设阈值，该阈值的取值可以视情况而定。可以理解的，在巡检图像上检测到的车辆数量不定，所以，目标车辆的数量可以是一个，也可以是多个。针对一帧巡检图像上检测出多辆目标车辆的情况，本申请实施例可以实现同时检测多辆车的停车情况，从而可以进一步提高巡检效率、以及停车取证效率。一种实施方式中，如果检测到有车辆出现，则获取移动巡逻设备的当前位置信息；利用预设的目标测距技术，确定目标车辆与移动巡逻设备的相对位置信息；根据移动巡逻设备的当前位置信息和该相对位置信息，计算目标车辆的位置信息。在本申请实施例中，移动巡逻设备的当前位置信息可以根据选取的坐标系类型的不同，采用不同的表示方式，例如移动巡逻设备的当前位置信息可以采用其经纬度信息表示。一种实施方式中，可以在移动巡逻设备上搭载多个传感器，传感器的类型不限，比如，RTK差分检测设备、IMU、激光雷达、摄像头等，通过获取该多个传感器分别实时采集的移动巡逻设备的检测数据；将各传感器采集的移动巡逻设备的检测数据进行融合，得到移动巡逻设备的当前位置信息。在现有技术中，往往只单一依赖RTK差分检测设备来获取移动巡逻设备的当前位置信息，RTK差分检测设备的定位数据频率低，进而限制了移动巡逻设备的巡逻速度，且其对环境的适应性较差，定位精度较低，本方案通过利用多个传感器分别实时采集的移动巡逻设备的检测数据并对该检测数据进行融合，可以提高定位精度及鲁棒性。举例来说，第一种情况下，如果该多个传感器中包括惯性测量单元IMU和实时动态差分RTK检测设备，则将各传感器采集的移动巡逻设备的检测数据进行融合，包括：将惯性测量单元IMU和实时动态差分RTK检测设备采集的移动巡逻设备的检测数据进行融合；第二种情况下，如果该多个传感器中包括惯性测量单元IMU、实时动态差分RTK检测设备和激光雷达，则将各传感器采集的移动巡逻设备的检测数据进行融合，包括：将惯性测量单元IMU、实时动态差分RTK检测设备和激光雷达采集的移动巡逻设备的检测数据进行融合；第三种情况下，如果多个传感器中包括惯性测量单元IMU、实时动态差分RTK检测设备和图像采集设备，则将各传感器采集的移动巡逻设备的检测数据进行融合，包括：将惯性测量单元IMU和实时动态差分RTK检测设备采集的移动巡逻设备的检测数据、以及图像采集设备采集的巡检图像进行融合。其中，检测数据是用于确定移动巡逻设备位置的相关数据，具体数据内容与测距使用的传感器类型有关，例如可以是移动巡逻设备运动的加速度、角速度等。以第一种情况举例来说，参考图2所示，通过惯性测量单元IMU获取移动巡逻设备运动的加速度、角速度，根据获取到的移动巡逻设备运动的加速度、角速度，可以利用惯性导航解算方法计算得到移动巡逻设备的状态量先验估计，其中，惯性导航解算算法是根据加速度计和陀螺仪的数据来实时计算车辆的速度、位置和姿态等，具体实现原理可以参考现有实现原理；通过实时动态差分RTK检测设备获取移动巡逻设备的速度、位置，作为第一观测量，利用预设的融合算法，融合移动巡逻设备的状态量先验估计与第一观测量，得到移动巡逻设备的状态量后验估计；根据移动巡逻设备的状态量后验估计，确定移动巡逻设备的当前位置信息。可选地，参考图2所示的虚线框部分，还可以利用图像采集设备连续拍摄得到的巡检图像中的图像特征构建视觉里程计，进而利用该视觉里程计分析得到移动巡逻设备的速度估计值、位置估计值作为第二观测量，或者利用激光雷达和高精度地图信息进行雷达点云定位，得到激光雷达定位结果作为第二观测量；将第二观测量输入预设的融合算法中；利用预设的融合算法，融合移动巡逻设备的状态量先验估计、第一观测量与第二观测量，得到移动巡逻设备的状态量后验估计；根据移动巡逻设备的状态量后验估计，确定移动巡逻设备的当前位置信息。其中，一种情况下，预设的融合算法可以包括但不限于扩展卡尔曼滤波算法等。上述关于移动巡逻设备的当前位置信息的确定方式，仅为示例，不应理解为对本申请实施例的具体限定。在本申请实施例中，用于确定目标车辆与移动巡逻设备的相对位置信息的目标测距技术可以包括但不限于单目测距、双目测距、相机/激光雷达测距等测距技术。例如，将相机/激光雷达测距技术作为预设的目标测距技术，可以理解的，移动巡逻设备上搭载的多个传感器至少包括图像采集设备和激光雷达，确定目标车辆与移动巡逻设备的相对位置信息的步骤，可以包括：基于雷达坐标系与图像坐标系之间的变换关系，对激光雷达的点云数据进行坐标变换，得到变换数据，即变换数据为激光点云数据变换至图像坐标系下对应的数据；基于巡检图像上用于标识目标车辆位置的第一区域，确定处于第一区域内的变换数据，其中，在巡检图像上检测出目标车辆后，可以使用预设几何框将目标车辆框选，该预设几何框对应的图像区域即可以为第一区域，也即第一区域可以用于表征目标车辆在巡检图像上的位置区域，当激光点云数据变换至图像坐标系后，利用处于第一区域内的变换数据便可以确定目标车辆在激光点云中对应的位置区域；对第一区域内的变换数据进行聚类，得到用于确定目标车辆位置的第二区域，该第二区域可以理解为在图像坐标下用于标识车辆位置的更为精确的区域；基于处于第二区域的变换数据，确定目标车辆与移动巡逻设备的相对位置信息。示例性地，可以利用图像坐标系和移动巡逻设备的设备坐标系之间的变换关系，得到处于第二区域的变换数据在移动巡逻设备的设备坐标系下对应的坐标数据，基于该坐标数据、以及移动巡逻设备在其设备坐标下的位置坐标，确定目标车辆和移动巡逻设备的相对位置信息；或者，可以首先确定处于第二区域的变换数据对应的激光点云数据，然后利用雷达坐标系和移动巡逻设备的设备坐标系之间的变换关系，确定第二区域对应的激光点云数据在移动巡逻设备的设备坐标系下对应的坐标数据，基于该坐标数据、以及移动巡逻设备在其设备坐标下的位置坐标，确定目标车辆和移动巡逻设备的相对位置信息。其中，移动巡逻设备的设备坐标系可以是指基于移动巡逻设备所处水平面建立的平面坐标系。进一步地，基于处于第二区域的变换数据，确定目标车辆与移动巡逻设备的相对位置信息，可以包括：根据处于第二区域内的变换数据计算第二区域的几何中心坐标，确定该几何中心坐标相对移动巡逻设备的方位角和距离，作为目标车辆与移动巡逻设备的相对位置信息。示例性地，移动巡逻设备的当前位置信息包括经纬度信息，此时，可以利用高斯投影，计算得到移动巡逻设备的当前经纬度信息在基于移动巡逻设备所处水平面建立的平面坐标系上的投影坐标；将第二区域在前述平面坐标系上的几何中心坐标作为目标车辆的位置，基于第二区域在前述平面坐标系上的几何中心坐标和移动巡逻设备的投影坐标，计算目标车辆相对移动巡逻设备的方位角和距离，然后基于该方位角、距离、以及移动巡逻设备的投影坐标，计算目标车辆在基于移动巡逻设备所处水平面建立的平面坐标系下的坐标位置，最后可以利用高斯投影反算公式，计算目标车辆在该平面坐标系下的坐标位置对应的经纬度信息，作为目标车辆的位置信息。在实际实施过程中，可以根据地图中各停车位的位置信息所属的坐标系类型，决定是否需要进行高斯投影反算转换，以得到用于表示目标车辆位置信息的经纬度信息，比如，如果停车位集合中各停车位的位置信息、以及移动巡逻设备的当前位置信息均是使用经纬度信息表示，则可以通过高斯投影反算转换，得到目标车辆的经纬度信息，否则，可以不执行高斯投影反算转换。在一种可选实施方式中，计算目标车辆的位置信息的实施方式，可以包括：基于多帧巡检图像上目标特征点的图像坐标、以及图像采集设备在各巡检图像的采集时刻的位置信息，确定对应各个采集时刻的观测直线；其中，多帧巡检图像中均出现被检测出的目标车辆，目标特征点用于表示多帧巡检图像上的同一目标车辆，例如目标特征点可以是与目标车辆的几何中心点、车头、车尾对应的特征点等，观测直线用于确定目标车辆的位置信息；基于各个采集时刻的观测直线之间的相交关系，确定多个观测点，并从多个观测点中确定有效观测点；基于有效观测点的位置信息，确定目标车辆的位置信息，例如通过有效观测点的位置信息的均值计算，得到目标车辆的位置信息。其中，多帧巡检图像可以包括当前帧巡检图像以及在当前帧巡检图像之前拍摄的在前帧巡检图像，或者可以至少包括在当前帧巡检图像之前拍摄的多帧在前帧巡检图像。图像采集设备的位置信息可以基于自身定位确定，也可以基于移动巡逻设备的位置信息来确定。在一种可选实施方式中，可以基于各帧巡检图像上目标特征点的图像坐标、以及图像采集设备本身的相机坐标系与图像坐标系之间的变换关系，可以计算得到目标特征点在相机坐标系下、且在各巡检图像的采集时刻的第一方向向量；基于相机相对表示图像采集设备的位置时选用的坐标系的外参，以及目标特征点在各巡检图像的采集时刻的第一方向向量，得到目标特征点在表示图像采集设备的位置时选用的坐标系下、且在各巡检图像的采集时刻的第二方向向量；基于目标特征点在各巡检图像的采集时刻的第二方向向量，以及图像采集设备在各巡检图像的采集时刻的位置信息，可以确定对应各个采集时刻的观测直线。目标特征点的位置信息用于表征图像采集设备感知的目标车辆的位置信息，理想状态下，针对同一目标车辆，多条观测直线相交于一点，该点位置即目标车辆的位置，由于感知噪声的存在，多条观测直线的交点会存在偏差，通过观测点的筛选，例如去除异常观测点或者与其他观测点距离较远的点，得到有效观测点，有助于提高目标车辆的位置信息的确定准确性。S120：基于目标车辆的位置信息，在停车位集合中确定至少一个备选停车位。一种实施方式中，基于目标车辆的位置信息，在停车位集合中确定至少一个备选停车位的步骤，包括：如果在多帧巡检图像上检测出目标车辆，则根据目标车辆的位置信息的变化，确定目标车辆的运动状态，其中，该运动状态可以为静止或运动，多帧巡检图像包括当前帧巡检图像以及在当前帧巡检图像之前拍摄的在前帧巡检图像，即本申请实施例中可以对巡检图像上检测出的车辆的运动状态进行跟踪；如果目标车辆的运动状态为静止，则基于目标车辆的位置信息，在停车位集合中确定至少一个备选停车位。由于运动的车辆没有停车意图，以此可以实现仅对有停车行为的车辆进行检测，减少不必要的计算量。停车位集合可以包括特定区域内的所有停车位，特定区域可以按照城市内的区域划分进行确定，也可以按照停车位管理需求进行划分；停车位集合还可以根据移动巡逻设备的位置信息，进行更新，即可以基于移动巡逻设备的位置信息确定预设区域范围内的停车位作为停车位集合，本申请实施例对此不作具体限定。停车位集合中各个停车位的位置信息可以利用高精度地图信息进行预先获取并存储，停车位的位置信息可以包括停车位上特定位置的坐标，例如停车位的四个角点的世界坐标、或者停车位的几何中心的世界坐标等。此外，还可以利用高精度地图信息获取停车位集合中各停车位的车位名称、车位ID等信息。一种实施方式中，可以利用预设临近匹配算法，基于目标车辆的位置信息，在停车位集合中确定至少一个备选停车位，其中，预设临近匹配算法用于实现筛选备选停车位，本申请实施例对其具体内容不作具体限定，例如预设临近匹配算法可以包括但不限于K最近邻匹配算法、KD-tree with BBF算法等任意可用的算法。当然，也可以基于目标车辆的位置信息，在停车位集合中停车位的位置分布区域中确定备选位置分布区域，将处于备选位置分布区域中的停车位确定为至少一个备选停车位。例如可以将目标车辆的位置作为几何中心，在停车位集合中停车位的位置分布区域中按照预设距离选定一个几何区域，作为备选位置分布区域)，从而实现有效缩减确定目标停车位过程中的位置匹配范围。通过利用高精度地图信息对停车位的位置信息进行批量获取与存储，并基于目标车辆的位置信息，对目标车辆的位置信息与停车位集合中各停车位的位置信息进行距离匹配，从而确定备选停车位，省去了现有技术中需要对移动巡逻设备所处的巡检区域与各停车位的对应关系进行预处理的过程，巡检效率更高。进一步举例来说，可以将目标车辆的位置信息作为目标点，在预设结构数据中进行最临近搜索，确定至少一个备选停车位，如果目标车辆的数量为多个，可以确定每辆目标车辆对应的备选停车位。其中，针对每个停车位集合，预设结构数据可以是预先构建好的，比如可以是基于停车位集合中各停车位的位置信息，按照预设数据结构形式对各停车位的位置信息进行组织而得到，预设数据结构形式可以包括但不限于数组、链表、K维树。随着停车位集合中包括的停车位的变化，预设结构数据的内容随之变化。通过构建预设结构数据，将停车位的位置信息进行结构化处理，以用于最临近搜索，有助于提高备选停车位的筛选效率。一种情况下，停车位集合中各停车位的位置信息包括各停车位的预设几何坐标，该预设几何坐标例如可以包括但不限于停车位的几何中心坐标，该几何中心坐标可以是利用高精度地图信息直接获取，也可以是基于停车位的四个角点坐标计算得到；预设结构数据可以是基于停车位集合中各停车位的预设几何坐标，按照N叉树结构进行构建得到的数据，其中，N为大于1的整数，具体取值可以根据计算需求而定，例如N叉树可以包括但不限于常用的二叉树或者八叉树等，预设结构数据例如可以包括但不限于K维树，即每个节点均为K维点的二叉树或者八叉树。示例性地，可以根据读取高精度地图信息获得的停车位集合中各个停车位的四个角点的世界坐标，计算所有停车位在世界坐标下的几何中心坐标，作为所有停车位的位置信息；将所有停车位的位置信息作为所有停车位的特征集合A，构建一个集合A的KD-tree结构数据，作为预设结构数据；以目标车辆的世界位置坐标作为目标点B，在预设结构数据中进行最临近搜索，找出其中与目标点B的距离最近的点A_j，则点A_j对应的停车位j就是距离该目标车辆B最近的停车位，即将点A_j对应的停车位j确定为目标车辆B的备选停车位。此外，如果从巡检图像上检测出的目标车辆的数量为多个，例如目标车辆的数量为n_1，还可以每个目标车辆的世界位置坐标作为目标点，在预设结构数据中进行最临近搜索，找出与每个目标点的距离小于或等于第二距离阈值的预设数量的停车位，作为其对应的备选停车位，最终可以确定多个备选停车位，例如针对每个目标点，如果找出与该目标点的距离最近的两个停车位作为其对应的备选停车位，则最终可以得到2*n_1个备选停车位。S130：基于目标车辆分别与至少一个备选停车位的距离，确定与目标车辆匹配的目标停车位。示例性地，如果从巡检图像上检测出的目标车辆的数量为1个或者多个，则基于目标车辆分别与至少一个备选停车位的距离，确定与目标车辆匹配的目标停车位，可以包括：基于目标车辆的位置信息、以及备选停车位的位置信息，计算目标车辆和备选停车位之间的距离，将距离小于或等于第三距离阈值时对应的备选停车位作为与目标车辆匹配的目标停车位，即认为此时目标车辆停在该匹配的目标停车位内，目标车辆已在目标停车位内发生停车事件，相应的，针对与目标车辆的距离大于第三距离阈值的备选停车位，即认为目标车辆未停在这些备选停车位内。并且，针对备选停车位中均不存在与目标车辆匹配的停车位时，可以认为该目标车辆可能出现违章停车事件，如出现目标车辆已停车但未停入停车位的停车区域内的违停现象。将出现违章停车时对应的巡检图像和车辆进行上报，可以为违章停车提供取证信息，完善路面停车取证系统。示例性地，如果从巡检图像上检测出的目标车辆的数量为多个，则基于目标车辆分别与至少一个备选停车位的距离，确定与目标车辆匹配的目标停车位，可以包括：将各个目标车辆分别与各个备选停车位进行组合，得到多组组合关系，其中，每组组合关系中的不同目标车辆对应不同的备选停车位；基于每组组合关系中各个目标车辆和与之对应的备选停车位的距离之和，确定目标组合关系，并将目标组合关系中每个目标车辆对应的备选停车位，确定为每个目标车辆匹配的目标停车位。例如，可以将各个组合关系中，距离之和小于或等于第四距离阈值时对应的组合关系，确定为目标组合关系。现有技术中是基于移动巡逻设备所处的当前巡检区域与停车位的对应关系、以及摄像头的拍摄方向来推断与目标车辆匹配的目标停车位，可以理解的，这种方案下，一次只能输出一个目标车辆的匹配结果，且对于停车位的类型、以及移动巡逻设备的巡逻路线均有限制，而应用本申请实施例的方案，基于目标车辆的位置信息与停车位集合中各停车位的位置信息，可以同时为多个目标车辆匹配目标停车位，停车巡检效率更高，且不会受停车位的类型、以及移动巡逻设备的巡逻路线的影响。进一步地，在本申请实施例中，将各个目标车辆分别与各个备选停车位进行组合，得到多组组合关系，包括：基于每个目标车辆和停车位集合中与之对应的备选停车位的距离、以及第一距离阈值，对目标车辆进行筛选，将筛选后的各个目标车辆分别与各个备选停车位进行组合，得到多组组合关系；例如，如果目标车辆和停车位集合中与之对应的各个备选停车位的距离均大于第一距离阈值，则认为目标车辆不会停在这些备选停车位内，即当前停车位集合中不存在与该目标车辆匹配的目标停车位，或者目标车辆属于巡检过程中误入图像采集设备的感知范围，或者目标车辆属于不需要确定匹配的停车位的情况，需要将该目标车辆进行剔除，减少不必要的计算量，如果目标车辆和停车位集合中与之对应的至少一个备选停车位的距离小于或等于第一距离阈值，则认为目标车辆可能会停在这些备选停车位内，无需剔除该目标车辆；或者对至少一个备选停车位进行去重处理，将各个目标车辆分别与去重处理后的各个备选停车位进行组合，得到多组组合关系。具体地，可以基于备选停车位的位置信息、车位名称、或者车位ID等信息进行去重处理。由于各个目标车辆的备选停车位是分别确定，在确定多组组合关系之前，又是将各个目标车辆的备选停车位一并进行考虑与组合，因而其中可能存在重复的备选停车位，通过对备选停车位进行去重处理，同样可以减少不必要的计算量；或者基于每个目标车辆和停车位集合中与之对应的备选停车位的距离、以及第一距离阈值，对目标车辆进行筛选，并对至少一个备选停车位进行去重处理，将筛选后的各个目标车辆分别与去重处理后的各个备选停车位进行组合，得到多组组合关系。从而，进一步减少不必要的计算量。即在本申请实施例中，可以先根据同一坐标系下各备选停车位的位置信息及各目标车辆的位置信息，计算每个目标车辆和停车位集合中与之对应的备选停车位的距离，基于该距离、以及第一距离阈值，筛选出与备选停车位的距离小于或等于第一距离阈值的目标车辆，也就是将未停在备选停车位的停车区域内的目标车辆进行剔除；和/或，可以对得到的至少一个备选停车位进行去重处理，例如可以根据读取高精度地图信息获得的各个备选停车位的车位名称，对具有相同车位名称的备选停车位进行去重处理，然后执行多组组合关系的确定操作。以此，减少停车巡检过程中不必要的计算量，提高计算效率，从而提高停车巡检效率、以及停车取证效率。假设经过目标车辆筛选后最终进行组合的目标车辆的数量为n_2，经过停车位去重处理后可能停有车辆的备选停车位数量为m，以针对每个目标车辆确定2个备选停车位为例，则m的取值范围为n_2≤m≤2*n_2。这种情况下，可以根据这m个备选停车位在世界坐标下的几何中心坐标，以及各目标车辆在世界坐标下的几何中心坐标，参考如下公式，计算各备选停车位与各目标车辆之间的距离Li,j：一种实施方式中，可以基于各备选停车位与各目标车辆之间的距离Li,j，构建一个代价矩阵，根据代价矩阵可以更清楚地确定组合关系并得到各组合关系对应的代价值，以便利用预设的搜索算法，搜索出代价值最小的组合关系作为目标组合关系，并将目标组合关系中每个目标车辆对应的备选停车位，确定为每个目标车辆匹配的目标停车位。其中，代价值可以理解为一组组合关系中各个目标车辆和与之对应的备选停车位的距离之和，参考如下公式所示，代价值可表示为：其中，n_2表示每种组合关系中目标车辆的数量，Li,j即表示每种组合关系中的目标车辆i和与之对应的备选停车位j的距离。举例来说，预设的搜索算法可以为KM算法、匈牙利匹配算法、暴力搜索算法等算法。一种情况下，可以从可能停有车辆的m个备选停车位中，依次或随机选取n_2个备选停车位与n_2个目标车辆进行一一组合，配成多组组合关系，也即可以基于排列组合的思想得到多组组合关系，最终得到的组合关系的数量可以表示为相应地，可以得到个代价值。举例来说，当m＝3，n_2＝2，可将对应的代价矩阵构建如下表1所示：表1：代价矩阵pos_parking1pos_parking2pos_parking3pos_target1L1,1L1,2L1,3pos_target2L2,1L2,2L2,3这种情况下，共可以配成6组组合关系，其对应的6个代价值有、、、、、，假设这6个代价值中的最小值为cost3，则可将其对应的组合关系确定为目标组合关系，即，可将备选停车位pos_parking1确定为目标车辆pos_target1匹配的目标停车位、将备选停车位pos_parking3确定为目标车辆pos_target2匹配的目标停车位。需要说明的是，本申请实施例中提及的第一距离阈值、第二距离阈值、第三距离阈值、第四距离阈值，不带有任何顺序性限定，仅用于区分不同情况下使用的距离阈值。一种实施方式中，在巡检图像上检测目标车辆的过程中，该停车巡检方法还可以包括：检测目标车辆的车牌信息，以便用于上报、转发、存储、广播等。需要说明的是，车辆的检测和车牌信息的检测，可以同时执行，也可以不同时执行，本申请实施例不作具体限定，且两者的检测顺序无固定限制。此外，上报时机可以包括：在预设时间后上报，或者，在确定与目标车辆匹配的目标停车位未出现在新的巡检图像上的情况下，进行上报。上报的关联信息可以作为路面停车的取证信息，从而完善路面停车取证系统。举例来说，在基于目标车辆分别与至少一个备选停车位的距离，确定与目标车辆匹配的目标停车位之后，可以将目标车辆的车牌信息和目标停车位进行关联，并上报至接收设备，该接收设备可以包括但不限于服务器、终端等任意的管控设备；或者，也可以根据实时获取的巡检图像，利用预设的停车位检测算法跟踪检测S130中确定的目标停车位，直至当前巡检图像中未检测出该目标停车位时，即认为目标停车位当前不出现在图像采集设备的感知范围，认为目标车辆在当前时刻之前停在该目标停车位对应的停车区域内，将目标车辆的车牌信息和目标停车位进行关联，并上报至接收设备，以减少误报的情况，提高停车巡检结果的准确性。此外，关于确定与目标车辆匹配的目标停车位未出现在新的巡检图像上，还可以通过比对不同采集时间内图像采集设备感知范围内的停车位信息来确定。例如，基于移动巡逻设备在t1时刻的位置信息、图像采集设备的感知范围，可以计算t1时刻下出现在图像采集设备感知范围内的停车位；然后随着移动巡逻设备的移动，基于移动巡逻设备在t2时刻的位置信息、图像采集设备的感知范围，可以计算t2时刻下出现在图像采集设备感知范围内的停车位；最后通过比对t1时刻和t2时刻下图像采集设备感知范围内的停车位信息，确定随着移动巡逻设备的移动，消失在图像采集设备感知范围内的停车位。再举一例，如果在执行S130的过程中出现S120中确定的备选停车位中不存在与目标车辆匹配的目标停车位，则判定该目标车辆可能出现违章停车事件，例如发生停车框外停车的违停现象，这种情况下，可以将目标车辆的车牌信息和违章停车事件进行关联，并上报至接收设备，以方便管理人员对违章停车现象进行管理。一种实施方式中，如果基于在前帧巡检图像上检测出的目标车辆的位置信息，确定不存在与在前帧巡检图像上的第一停车位的位置信息匹配的目标车辆，且当前帧巡检图像上未出现第一停车位，则确定第一停车位为空车位。也即在本申请实施例中，在停车巡检过程中，可以将在采集当前帧巡检图像之前采集的图像进行缓存，将缓存的巡检图像上第一停车位是否存在匹配的目标车辆的确定结果，作为第一停车位消失在图像采集设备感知范围内时，确定第一停车位是否为空车位的判断依据；当第一停车位处于图像采集设备的感知范围内时，可以基于巡检图像上是否检测出目标车辆来实时判断第一停车位内是否停入车辆，而不会直接给出第一停车位为空车位的判断结果，通过前述操作，可以提高空车位的判断准确性。同时可知，在本申请实施例中，针对每帧巡检图像，会对出现在该巡检图像上的停车位信息进行存储，以便于确认图像采集设备的感知范围内消失的停车位。一种情况下，在确定第一停车位为空车位之后，可以将显示有第一停车位的在前帧巡检图像与第一停车位对应的空车位事件进行关联，并上报至接收设备，以供管理人员查看、复核或纠错，为管理人员的管理工作提供便利。应用本方法实施例，通过基于目标车辆的位置信息先筛选出备选停车位，再计算目标车辆与备选停车位的距离，以确定与目标车辆匹配的目标停车位，与现有技术中直接遍历停车位位置数据库进行匹配计算的方式相比，对位置匹配范围进行了有效缩减，减少了位置匹配的计算量，提高了匹配效率，进而提高了停车巡检效率，同时提高了关于停车取证的效率；而且，本方案无需预存移动巡逻设备所处的巡检区域与各停车位的对应关系，移动巡逻设备也无需按照预设的巡逻路线进行巡检，基于目标车辆的位置信息，可同时对多个目标车辆的位置信息与停车位集合中各停车位的位置信息进行距离关联，从而确定各停车位的停车情况，有助于进一步提高巡检效率，并且，本方案适用于各种类型的停车位，适用范围更广。参考图3所示，介绍一种停车巡检方法的具体实施方式，用于对本申请实施例进行示例性说明，以下实施例中未详细解释的内容，可以参考上述实施例中的解释，该方法应用于移动巡逻设备，包括：S201：读取预设区域的高精地图中所有停车位的车位信息；其中，预设区域可以根据巡检需求确定；S202：基于读取的车位信息，计算所有停车位在全局坐标系下的几何中心坐标，并基于所有停车位在全局坐标系下的几何中心坐标，构建一个KD-tree数据结构；其中，该全局坐标系，例如可以是世界坐标系。S203：利用多传感器融合定位技术，确定移动巡逻设备的当前位置信息；移动巡逻设备的当前位置信息可以包括但不限于移动巡逻设备在世界坐标系下的位置信息；S204：检测移动巡逻设备上图像采集设备的感知范围内是否有车辆，若有，则执行S205，若无，则继续检测；S205：将该车辆作为目标车辆，检测是否检出目标车辆的车牌，若检出，则执行S206；若未检出，则返回执行S204；S206：获取图像坐标系下目标车辆的目标检出框；该目标检出框对应的图像区域即用于标识目标车辆位置的第一区域；S207：将移动巡逻设备上激光雷达采集的激光雷达点云数据，由激光雷达坐标系转换到图像坐标系下，得到变换数据；即该变换数据为原激光点云数据在图像坐标系下对应的数据。S208：在图像坐标系下，对处于目标检出框中的变换数据进行聚类，得到用于确定目标车辆位置的第二区域；在考虑三维坐标的情况下，该第二区域可以通过增加一个高度维度的数据，转换为用于表示目标车辆位置的三维空间区域；S209：基于处于第二区域的变换数据，计算目标车辆与移动巡逻设备的相对位置信息；S210：根据目标车辆与移动巡逻设备的相对位置信息、以及移动巡逻设备的当前位置信息，计算目标车辆的全局位置信息；目标车辆的全局位置信息可以包括但不限于目标车辆在世界坐标系下的几何中心坐标；S211：根据目标车辆的全局位置信息，对构建的KD-tree数据结构进行最临近搜索，得到目标车辆的备选停车位；S212：将不在停车区域内的目标车辆和重复的备选停车位进行剔除；S213：对剩余目标车辆及剩余备选停车位进行匹配，确定与目标车辆匹配的目标停车位；S214：关联目标停车位的信息与目标车辆的车牌信息，作为检测结果，并上传该检测结果；返回执行S203。关于上述各个步骤的具体实现以及相关解释内容可以参考上面图1所示的方法实施例，在此不做赘述。应用本方法实施例，通过基于目标车辆的位置信息先筛选出备选停车位，再计算目标车辆与备选停车位的距离，以确定与目标车辆匹配的目标停车位，与现有技术中直接遍历停车位位置数据库进行匹配计算的方式相比，对位置匹配范围进行了有效缩减，减少了位置匹配的计算量，提高了匹配效率，进而提高了停车巡检效率；而且，本方案无需预存移动巡逻设备所处的巡检区域与各停车位的对应关系，移动巡逻设备也无需按照预设的巡逻路线进行巡检，基于目标车辆的位置信息，可同时对多个目标车辆的位置信息与停车位集合中各停车位的位置信息进行距离关联，从而确定各停车位的停车情况，有助于进一步提高巡检效率，并且，本方案适用于各种类型的停车位，适用范围更广。参考图4所示，介绍停车巡检方法的另一种具体实施方式，用于对本公开实施例进行示例性说明，该方法应用于移动巡逻设备，包括：S301：读取预设区域的高精地图中所有停车位的车位信息；S302：基于读取的车位信息，计算所有停车位在全局坐标系下的几何中心坐标，并基于所有停车位在全局坐标系下的几何中心坐标，构建一个KD-tree数据结构；S303：实时获取搭载在移动巡逻设备上的图像采集设备采集的巡检图像，检测感知范围内的车辆作为目标车辆，并检测该目标车辆的车牌信息；S304：实时计算各帧巡检图像中目标车辆的图像位置信息；例如，在各帧巡检图像中，将目标车辆相对图像边缘的距离，作为其图像位置信息；S305：利用多传感器融合定位技术，确定移动巡逻设备的当前位置信息；S306：利用三角测量法，计算目标车辆的位置信息；S307：根据目标车辆的位置信息，对构建的KD-tree数据结构进行最临近搜索，得到目标车辆的备选停车位；S308：将不在停车区域内的目标车辆和重复的备选停车位进行剔除；S309：对剩余目标车辆及剩余备选停车位进行匹配，确定与目标车辆匹配的目标停车位；S310：关联目标停车位的信息与目标车辆的车牌信息，作为检测结果，并上传该检测结果；返回执行S303。具体参考图5所示，其中，点O1表示本实施例中移动巡逻设备上搭载的图像采集设备的光心在k1时刻所处的位置；点O2表示该图像采集设备的光心在k2时刻所处的位置；点p1表示目标特征点在该图像采集设备于k1时刻拍摄的图像中的位置；点p2表示目标特征点在该图像采集设备于k2时刻拍摄的图像中的位置；点P表示直线O1p1与直线O2p2的交点，该交点即可视为用于表示目标车辆在实际三维场景中的位置的观测点；t表示移动巡逻设备上搭载的图像采集设备的光心从k1时刻至k2时刻所经历的空间移动。也就是可以基于移动巡逻设备上搭载的图像采集设备的光心在两个不同时刻所处的位置、以及该图像采集设备于这两个不同时刻拍摄到的目标车辆的成像位置，确定两条观测直线；计算这两条观测直线的交点的位置信息，作为目标车辆的实际位置信息。而在实际应用中，由于噪声的存在，两条观测直线可能无法刚好相交于一点，因此，需要降低噪声对求解观测点的位置信息的影响，提高对目标车辆的定位精度。举例来说，可以采取以下步骤来求解观测点的位置信息：连续跟踪用于表示目标车辆的目标特征点在不同时刻下采集的巡检图像中的图像坐标及目标特征点在相机坐标系下的方向向量，并记录图像采集设备在不同采集时刻的位置信息；在同一坐标系下，结合目标特征点在各个采集时刻下的巡检图像中的图像坐标及方向向量、以及图像采集设备在不同采集时刻的位置信息，确定对应各个采集时刻的观测直线方程；基于确定的观测直线方程建立第一方程组，该第一方程组中包括目标车辆的待求解位置参数；求解该第一方程组的最小二乘解，作为观测点的位置信息。进一步举例来说，参考图6所示，假设移动巡逻设备上搭载的图像采集设备在k时刻拍摄的图像中，用于表示目标车辆的目标特征点在图像坐标系下的位置为；基于目标特征点在图像坐标系下的位置、以及图像采集设备本身的相机坐标系与图像坐标系之间的变换关系，可计算得到目标特征点在相机坐标系下的方向向量为将图像采集设备在全局坐标系下的不同采集时刻的位置表示为Pos:，相机相对全局坐标系的外参表示为R，由此可以计算出目标特征点在全局坐标系下的方向向量根据Pos:与可确定一条全局坐标系下的观测直线方程L_k：Akxk+Bkyk＝Ck，其中，Ak、Bk和Ck分别表示不同的方程参数，表示不同观测直线方程表示的观测直线在全局坐标系的x轴上的截距，表示不同观测直线方程表示的观测直线在全局坐标系的y轴上的截距，表示不同观测直线方程表示的观测直线相对于全局坐标系的斜率，Ak、Bk和Ck的取值可以根据具体计算情况而定，可以理解的，连续跟踪同一目标特征点n次，可以得到n条观测直线方程。假设观测点的位置信息为基于n条观测直线方程整理可得第一方程组如下公式所示：通过求解以上公式所示的第一方程组的最小二乘解，即可得到观测点的位置信息需要说明的是，图像采集设备的位置信息和移动巡逻设备的位置信息具有关联关系，两者的位置信息可以基于彼此的位置信息而相互得到，即基于图像采集设备和移动巡逻设备之间预先确定的位置转换关系，可以将图像采集设备的位置信息作为已知信息，得到移动巡逻设备的位置信息，或者可以将移动巡逻设备的位置信息作为已知信息，得到图像采集设备的位置信息，因此，上述公式中的Pos:也可以表示移动巡逻设备的位置信息。进一步地，由于计算过程中可能出现异常观测数据，且由这些观测数据建立的观测直线方程会进一步影响最终求解第一方程组的最小二乘解的计算结果，因此，需要降低异常观测数据对计算结果的干扰，提高对目标车辆的定位精度。举例来说，假设移动巡逻设备上搭载的图像采集设备连续拍摄了d帧巡检图像，且这d帧巡检图像中均包括用于表示同一目标车辆的同一目标特征点f，基于这d帧巡检图像可以确定d条观测直线，可以从这d条观测直线中任选取n条观测直线，基于选取的n条观测直线对应的直线方程建立一个第一方程组，可以理解的，一共可以有种选择方式，也就是可以建立m个第一方程组。求解这m个第一方程组，可以得到m个观测点的位置信息。进一步地，可以先对这m个观测点进行离群点剔除，举例来说，可以对m个观测点中的每个观测点的邻域进行统计分析，计算出该观测点到其各个临近点的临近平均距离；将临近平均距离不在预设范围内的观测点作为离群点进行剔除，其中，预设范围可以根据所有观测点对应的临近平均距离的均值和方差确定。剔除离群点后，将剩余观测点作为有效观测点，然后基于各有效观测点的位置信息，确定目标车辆的实际位置信息，例如可以通过对各有效观测点的位置信息求取坐标均值，作为目标特征点的实际位置信息，即目标车辆的实际位置信息。以此，降低异常观测点对计算结果的干扰，提高对目标车辆的定位精度。即在本申请实施例中，计算目标车辆的位置信息的实施方式，可以包括：基于多帧巡检图像上目标特征点的图像坐标、以及图像采集设备在各巡检图像的采集时刻的位置信息，确定对应各个采集时刻的观测直线；其中，多帧巡检图像中均出现被检测出的目标车辆，目标特征点用于表示多帧巡检图像上的同一目标车辆；基于各个采集时刻的观测直线之间的相交关系，确定多个观测点，并从多个观测点中确定有效观测点；基于有效观测点的位置信息，确定目标车辆的位置信息，从而提高目标车辆的位置信息的确定准确性。关于图4所示实施例的其它步骤的具体实现以及相关解释内容可以参考上面图1所示的方法实施例，在此不做赘述。应用本方法实施例，不仅对位置匹配范围进行了有效缩减，减少了位置匹配的计算量，提高了匹配效率，进而提高了停车巡检效率，而且本方案可以同时对多个目标车辆进行停车位匹配，有助于进一步提升停车巡检效率，同时可以适用于各种类型的停车位，适用范围更广。参考图7所示，再介绍一种停车巡检方法的具体实施方式，用于对本申请实施例进行示例性说明，该方法应用于移动巡逻设备，包括：S501：响应于在t1时刻的巡检图像上检测出目标车辆，根据移动巡逻设备在t1时刻的位置信息，计算目标车辆在t1时刻的位置信息；S502：缓存巡检图像，并基于目标车辆在t1时刻的位置信息，确定是否存在与缓存的巡检图像上的第一停车位的位置信息匹配的目标车辆；确定是否存在与缓存的巡检图像上的第一停车位的位置信息匹配的目标车辆，也即等同于确定与目标车辆匹配的目标停车位。如果不存在，则缓存的巡检图像上第一停车位存在为空车位的可能性，如果存在，则缓存的巡检图像上第一停车位存在不是空车位的可能性；S503：在经过预设时间后，确定在t2时刻的巡检图像上是否出现第一停车位；如果否，即认为第一停车位消失在图像采集设备的感知范围内，则执行操作S504或者操作S505；如果是，则执行操作S506；S504：如果存在与在前缓存的巡检图像上的第一停车位的位置信息匹配的目标车辆，则将目标车辆的车牌信息和第一停车位进行关联，并上报至接收设备；S505：如果不存在与在前缓存的巡检图像上的第一停车位的位置信息匹配的目标车辆，则将第一停车位为空车位的检测结果上报至接收设备；S506：基于t2时刻的巡检图像上目标车辆的位置信息，确定是否存在与t2时刻的巡检图像上的停车位的位置信息匹配的目标车辆。即等同于继续执行确定与目标车辆匹配的停车位的操作。应用本方法实施例，在检测到的停车位从图像采集设备的感知范围内消失后再对检测到的该车位的停车情况进行上报，可以减少误报的情况，提高停车巡检结果的准确性。参考图8、图9、图10所示，分别为本方法实施例应用于横向车位的巡检场景的示意图、应用于斜向车位的巡检场景的示意图和应用于纵向车位的巡检场景的示意图。如图8、图9、图10所示的实施例，移动巡逻设备上搭载有多个传感器，利用预设的目标测距技术与多传感器融合定位技术，通过确定目标车辆与移动巡逻设备的相对位置信息，计算出目标车辆的位置信息，并对目标车辆的位置信息与各停车位的位置信息进行匹配，即可确定各停车位的停车情况，可见，本方案适用于各种类型的停车位，适用范围更广。与图1方法实施例相对应，参考图11所示，本申请实施例还提供了一种停车巡检装置，该装置应用于移动巡逻设备，包括：计算模块1001、备选停车位确定模块1002、目标停车位确定模块1003，其中，计算模块1001，用于响应于在巡检图像上检测出目标车辆，计算目标车辆的位置信息，其中，巡检图像是图像采集设备对路面车辆进行拍摄得到，图像采集设备搭载在移动巡逻设备上。一种实施方式中，计算模块1001具体用于：确定目标车辆与移动巡逻设备的相对位置信息；根据移动巡逻设备的当前位置信息和相对位置信息，计算目标车辆的位置信息。另一种实施方式中，计算模块1001具体用于：基于多帧巡检图像上目标特征点的图像坐标、以及图像采集设备在各巡检图像的采集时刻的位置信息，确定对应各个采集时刻的观测直线；其中，多帧巡检图像中均出现被检测出的目标车辆，目标特征点用于表示多帧巡检图像上的同一目标车辆，观测直线用于确定目标车辆的位置信息；基于各个采集时刻的观测直线之间的相交关系，确定多个观测点，并从多个观测点中确定有效观测点；基于有效观测点的位置信息，确定目标车辆的位置信息。一种情况下，移动巡逻设备上搭载多个传感器，该多个传感器中包括激光雷达。这种情况下，计算模块1001具体用于基于雷达坐标系与图像坐标系之间的变换关系，对激光雷达的点云数据进行坐标变换，得到变换数据；基于巡检图像上用于标识目标车辆位置的第一区域，确定处于第一区域内的变换数据；对第一区域内的变换数据进行聚类，得到用于确定目标车辆位置的第二区域；基于处于第二区域的变换数据，确定目标车辆与移动巡逻设备的相对位置信息，根据移动巡逻设备的当前位置信息和相对位置信息，计算目标车辆的位置信息。备选停车位确定模块1002，用于基于目标车辆的位置信息，在停车位集合中确定至少一个备选停车位。一种实施方式中，备选停车位确定模块1002可以包括：搜索子模块，用于将目标车辆的位置信息作为目标点，在预设结构数据中进行最临近搜索，确定至少一个备选停车位；其中，预设结构数据是基于停车位集合中各停车位的位置信息，按照预设数据结构形式对各停车位的位置信息进行组织而得到。一种情况下，停车位集合中各停车位的位置信息包括各停车位的预设几何坐标，预设结构数据包括基于各停车位的预设几何坐标，按照N叉树结构进行构建得到的数据，N为大于1的整数。一种实施方式中，备选停车位确定模块1002可以包括：状态判断子模块，用于：如果在多帧巡检图像上检测出目标车辆，则根据目标车辆的位置信息的变化，确定目标车辆的运动状态，其中，该运动状态为静止或运动；确定子模块，用于如果目标车辆的运动状态为静止，则基于目标车辆的位置信息，在停车位集合中确定至少一个备选停车位。目标停车位确定模块1003，用于基于目标车辆分别与至少一个备选停车位的距离，确定与目标车辆匹配的目标停车位。一种实施方式中，目标停车位确定模块1003可以包括：组合子模块，用于在目标车辆的数量为多个的情况下，将各个目标车辆分别与各个备选停车位进行组合，得到多组组合关系，其中，每组组合关系中的不同目标车辆对应不同的备选停车位；分配子模块，用于基于每组组合关系中各个目标车辆和与之对应的备选停车位的距离之和，确定目标组合关系，并将目标组合关系中每个目标车辆对应的备选停车位，确定为每个目标车辆匹配的目标停车位。一种情况下，组合子模块具体用于：基于每个目标车辆和停车位集合中与之对应的备选停车位的距离、以及第一距离阈值，对目标车辆进行筛选，将筛选后的各个目标车辆分别与各个备选停车位进行组合，得到多组组合关系；或者，组合子模块具体用于：对至少一个备选停车位进行去重处理，将各个目标车辆分别与去重处理后的各个备选停车位进行组合，得到多组组合关系；或者，组合子模块具体用于：基于每个目标车辆和停车位集合中与之对应的备选停车位的距离、以及第一距离阈值，对目标车辆进行筛选，并对至少一个备选停车位进行去重处理，将筛选后的各个目标车辆分别与去重处理后的各个备选停车位进行组合，得到多组组合关系。一种实施方式中，本申请实施例提供的停车巡检装置还包括：车牌检测模块，用于检测目标车辆的车牌信息。一种情况下，该装置还包括：关联上报模块，用于将目标车辆的车牌信息和目标停车位进行关联，并上报至接收设备。一种实施方式中，本申请实施例提供的停车巡检装置还包括：空车位确定模块，用于基于在前帧巡检图像上检测出的目标车辆的位置信息，确定不存在与在前帧巡检图像上的第一停车位的位置信息匹配的目标车辆，且当前帧巡检图像上未出现第一停车位时，确定第一停车位为空车位。关于执行上述各个步骤的具体实现以及相关解释内容可以参考上面方法实施例中的描述，在此不做赘述。应用本申请实施例提供的装置，通过基于目标车辆的位置信息先筛选出备选停车位，再计算目标车辆与备选停车位的距离，以确定与目标车辆匹配的目标停车位，与现有技术中直接遍历停车位位置数据库进行匹配计算的方式相比，对位置匹配范围进行了有效缩减，减少了位置匹配的计算量，提高了匹配效率，进而提高了停车巡检效率；而且，本方案无需预存移动巡逻设备所处的巡检区域与各停车位的对应关系，移动巡逻设备也无需按照预设的巡逻路线进行巡检，基于目标车辆的位置信息，可同时对多个目标车辆的位置信息与停车位集合中各停车位的位置信息进行距离关联，从而确定各停车位的停车情况，有助于进一步提高巡检效率，并且，本方案适用于各种类型的停车位场景，包括但不限于垂直车位、斜向车位、水平车位等，即本方案的适用范围更广。本申请实施例还提供了一种移动巡逻设备，如图12所示，该移动巡逻设备包括处理器1101和存储器1102，其中，存储器1102，用于存放计算机程序；处理器1101，用于执行存储器1102上所存放的程序时，实现本申请实施例提供的任意停车巡检方法。关于移动巡逻设备的其他组成部件，例如用于驱动设备行进的驱动部件等，可以参考现有技术实现，本申请实施例不作具体限定。应用本申请实施例提供的移动巡逻设备，不仅对位置匹配范围进行了有效缩减，减少了位置匹配的计算量，提高了匹配效率，进而提高了停车巡检效率，同时提高了关于停车取证的效率，而且本方案适用于各种类型的停车位，适用范围更广。上述存储器可以包括RAM，也可以包括NVM，例如至少一个磁盘存储器。可选地，存储器还可以是至少一个位于远离上述处理器的存储装置。上述处理器可以是通用处理器，包括CPU、NP等；还可以是DSP、ASIC、FPGA或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。另外，本申请实施例提供了一种存储介质，该存储介质内存储有计算机程序，计算机程序被处理器执行时实现本申请实施例提供的任意停车巡检方法。本申请实施例的又一实施例中，还提供了一种包含指令的计算机程序产品，当其在计算机上运行时，使得计算机执行本申请实施例提供的任意停车巡检方法。在上述实施例中，可以全部或部分地通过软件、硬件、固件或者其任意组合来实现。当使用软件实现时，可以全部或部分地以计算机程序产品的形式实现。所述计算机程序产品包括一个或多个计算机指令。在计算机上加载和执行所述计算机程序指令时，全部或部分地产生按照本发明实施例所述的流程或功能。所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。所述计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，所述计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线)或无线方式向另一个网站站点、计算机、服务器或数据中心进行传输。所述计算机可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集成的服务器、数据中心等数据存储设备。所述可用介质可以是磁性介质、光介质)、或者半导体介质)等。参考图13所示，在本申请提供的又一实施例中，还提供了一种巡检系统，该巡检系统包括多个传感器1201和移动巡逻设备1202，多个传感器1201中至少包括图像采集设备，多个传感器1201搭载在移动巡逻设备1202上，其中，图像采集设备，用于对路面车辆进行拍摄，得到巡检图像；移动巡逻设备1202，用于响应于在巡检图像上检测出目标车辆，计算目标车辆的位置信息；利用预设临近匹配算法，基于目标车辆的位置信息，在停车位集合中确定至少一个备选停车位；基于目标车辆分别与至少一个备选停车位的距离，确定与目标车辆匹配的目标停车位。一种实施方式中，多个传感器1201中还包括激光雷达；移动巡逻设备1202，具体用于：基于雷达坐标系与图像坐标系之间的变换关系，对激光雷达的点云数据进行坐标变换，得到变换数据；基于巡检图像上用于标识目标车辆位置的第一区域，确定处于第一区域内的变换数据；对第一区域内的变换数据进行聚类，得到用于确定所述目标车辆位置的第二区域；基于处于第二区域的变换数据，确定目标车辆与移动巡逻设备的相对位置信息。关于执行上述各个步骤的具体实现以及相关解释内容可以参考上述方法方法实施例，在此不做赘述。并且，应当理解，移动巡逻设备1202还可以执行上述方法实施例中各个可选方案。在本申请实施例中，通过基于目标车辆的位置信息先筛选出备选停车位，再计算目标车辆与备选停车位的距离，以确定与目标车辆匹配的目标停车位，与现有技术中直接遍历停车位位置数据库进行匹配计算的方式相比，对位置匹配范围进行了有效缩减，减少了位置匹配的计算量，提高了匹配效率，进而提高了停车巡检效率；而且，本方案无需预存移动巡逻设备所处的巡检区域与各停车位的对应关系，移动巡逻设备也无需按照预设的巡逻路线进行巡检，基于目标车辆的位置信息，可同时对多个目标车辆的位置信息与停车位集合中各停车位的位置信息进行距离关联，从而确定各停车位的停车情况，有助于进一步提高巡检效率，并且，本方案适用于各种类型的停车位场景，包括但不限于垂直车位、斜向车位、水平车位等，即本方案的适用范围更广。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包括，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本说明书中的各个实施例均采用相关的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于装置、移动巡逻设备及巡检系统而言，由于其基本相似于方法实施例，所以描述的比较简单，相关之处参见上述方法实施例的部分说明即可。以上所述仅为本申请的较佳实施例，并非用于限定本申请的保护范围。凡在本申请的精神和原则之内所作的任何修改、等同替换、改进等，均包括在本申请的保护范围内。
