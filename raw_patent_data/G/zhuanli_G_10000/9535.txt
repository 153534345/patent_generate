标题title
一种APP化能源控制器桌面管理方法、系统和存储介质
摘要abst
本发明公开了一种APP化能源控制器桌面管理方法、系统和存储介质，本发明采用分布式APP管理模式，桌面管理APP作为主控APP，其他应用APP作为从属APP，各APP之间采用基于MQTT消息通讯机制，梳理了桌面管理APP启动管理、控制权管理、冻结界面管理、轮显管理、状态栏管理等多个流程。采用本发明，提升了能源控制器桌面管理效率，增强了人机交互的友好性、互动性，符合功能调试和现场维护的可视化需求。
权利要求书clms
1.一种APP化能源控制器桌面管理方法，其特征在于：采用分布式APP管理模式，桌面管理APP作为主控APP，其他应用APP作为从属APP，具体包括以下步骤：S1：桌面管理APP进入启动流程；S2：桌面管理APP进入控制权管理流程，包括对中间显示区及按键监听的控制权管理；S3：桌面管理APP进入冻结界面管理流程，包括对弹窗信息冻结的流程；S4：桌面管理APP进入轮显管理流程；S5：桌面管理APP进入状态栏管理流程，包括对顶层状态栏和底层状态栏的管理。2.根据权利要求1所述的一种APP化能源控制器桌面管理方法，其特征在于：所述主控APP与从属APP之间通过MQTT进行消息通讯。3.根据权利要求1所述的一种APP化能源控制器桌面管理方法，其特征在于：所述S1的启动流程具体包括以下步骤：S1.1：进行日志初始化，同时创建另一线程进行消息初始化，进入消息收发处理逻辑；S1.2：对按键进行初始化；S1.3：对液晶显示屏进行初始化；S1.4：向系统管理器APP注册；S1.5：注册成功后，向系统APP循环请求已注册APP信息；S1.6：收到系统管理器APP和模组管理器APP都已注册成功信息且满足一定时间后，进入桌面管理APP显示主界面。4.根据权利要求1所述的一种APP化能源控制器桌面管理方法，其特征在于：所述S2中控制权管理流程具体包括以下步骤：S2.1：程序启动后，中间显示区控制权以及按键监听控制权在桌面管理APP；S2.2：选中对应应用APP图标按下确认键后，中间显示区控制权以及按键监听控制权交由激活APP所有；S2.3：当前激活APP按下返回键退出后，中间显示区控制权以及按键监听控制权回归桌面管理APP所有；S2.4：轮显状态下中间显示区控制权归轮显APP所有，按键监听控制权归桌面管理APP所有。5.根据权利要求1所述的一种APP化能源控制器桌面管理方法，其特征在于：所述S3中冻结界面的管理具体包括以下步骤：S3.1：桌面管理APP接收到弹出信息提示框消息时，点亮液晶背光，并在中间显示区的中央区域根据传递的显示时长显示提示框内容；S3.2：任意按键按下后返回桌面主界面。6.根据权利要求4所述的一种APP化能源控制器桌面管理方法，其特征在于：所述S3.1中提示框的显示时长由传递的消息参数决定，显示时长为零，表明需要一直显示；显示时长非零，该值就是提示框需要显示的时间，时间到返回桌面主界面。7.根据权利要求1所述的一种APP化能源控制器桌面管理方法，其特征在于：所述S4中轮显管理流程具体包括有以下步骤：S4.1：液晶显示屏持续一定时间无按键时进入轮显模式，桌面管理APP依次循环向各系统在线APP发送轮显通知；S4.2：任意一个在线APP收到轮显通知后显示轮显界面；S4.3：显示轮显界面的在线APP显示完相应的轮显屏数后，向桌面管理APP发送APP退出轮显消息；S4.4：重复上述步骤，直至有按键按下或收到退出并返回桌面消息。8.根据权利要求1所述的一种APP化能源控制器桌面管理方法，其特征在于：所述S5中对状态栏的管理流程采用单线程触发式控制，顶层状态栏除时间标签外，信号强度、信息点号等信息均从其他APP发送的刷新工具栏消息中提取数值并显示对应的图标；底层状态栏显示的字符串及时长信息由其他APP发送的刷新状态栏消息中提取，具体的管理流程包括有以下步骤：S5.1：液晶显示区正常显示；S5.2：桌面管理APP检测是否收到刷新工具栏信息，是，则显示工具栏内容；否，则液晶显示区依旧正常显示；S5.3：桌面管理APP检测是否收到刷新状态栏信息，是，则显示状态栏内容；否，则液晶显示区依旧正常显示；S5.4：桌面管理APP检测状态栏显示时间是否到达，是，则清除状态栏内容；否，则依旧显示状态栏内容。9.一种APP化能源控制器桌面管理系统，其特征在于：所述系统包括网络接口、存储器和处理器，其中：所述网络接口，用于在与其他外部网元之间进行收发信息过程中，实现信号的接收和发送；所述存储器，用于存储能够在所述处理器上运行的计算机程序指令；所述处理器，用于在运行所述计算机程序指令时，执行权利要求1-8中任一项所述的一种APP化能源控制器桌面管理方法的步骤。10.一种计算机存储介质，其特征在于：所述计算机存储介质存储有一种APP化能源控制器桌面管理方法，所述一种APP化能源控制器桌面管理方法被至少一个处理器执行时实现权利要求1-8中任一项所述的一种APP化能源控制器桌面管理方法的步骤。
说明书desc
技术领域本发明涉及能源控制器领域，特别涉及一种APP化能源控制器桌面管理方法、系统和存储介质。背景技术2021年1月15日，经中国智能量测产业技术创新战略联盟专家委员会评审，联盟标委会审议，由智能终端工作组组织编制的《能源控制器技术规范》等11项联盟标准正式发布。其中，能源控制器型式规范规定了桌面显示区的划分和图标样例，能源控制器软件及接口技术规范第3部分：APP功能及接口规范规定了各APP交互消息接口定义。中国智能量测产业技术创新战略联盟发布的标准只是对能源控制器的液晶显示区域、图标、各APP交互消息接口进行了定义，并未对能源控制器桌面管理方法及液晶显示涉及到的桌面管理APP启动管理、桌面管理APP控制权管理、桌面管理APP冻结界面管理、桌面管理APP轮显管理、桌面管理APP状态栏管理等多个流程做明确说明，本申请为这些问题提供了一种解决方案。发明内容发明目的：本发明的目的是提供一种APP化能源控制器桌面管理方法、系统和存储介质，对能源控制器桌面管理方法及液晶显示涉及到的桌面管理APP的管理流程进行了梳理。技术方案：本发明所述的一种APP化能源控制器桌面管理方法，其特征在于：采用分布式APP管理模式，桌面管理APP作为主控APP，其他应用APP作为从属APP，具体包括以下步骤：S1：桌面管理APP进入启动流程；S2：桌面管理APP进入控制权管理流程，包括对中间显示区及按键监听的控制权管理；S3：桌面管理APP进入冻结界面管理流程，包括对弹窗信息冻结的流程；S4：桌面管理APP进入轮显管理流程；S5：桌面管理APP进入状态栏管理流程，包括对顶层状态栏和底层状态栏的管理。作为优选，所述S1的启动流程具体包括以下步骤：S1.1：进行日志初始化，同时创建另一线程进行消息初始化，进入消息收发处理逻辑；S1.2：对按键进行初始化；S1.3：对液晶显示屏进行初始化；S1.4：向系统管理器APP注册；S1.5：注册成功后，向系统APP循环请求已注册APP信息；S1.6：收到系统管理器APP和模组管理器APP都已注册成功信息且满足一定时间后，进入桌面管理APP显示主界面。作为优选，所述主控APP与从属APP之间通过MQTT进行消息通讯。作为优选，所述S2中控制权管理流程具体包括以下步骤：S2.1：程序启动后，中间显示区控制权以及按键监听控制权在桌面管理APP；S2.2：选中对应应用APP图标按下确认键后，中间显示区控制权以及按键监听控制权交由激活APP所有；S2.3：当前激活APP按下返回键退出后，中间显示区控制权以及按键监听控制权回归桌面管理APP所有；S2.4：轮显状态下中间显示区控制权归轮显APP所有，按键监听控制权归桌面管理APP所有。作为优选，所述S3中冻结界面的管理具体包括以下步骤：S3.1：桌面管理APP接收到弹出信息提示框消息时，点亮液晶背光，并在中间显示区的中央区域根据传递的显示时长显示提示框内容；S3.2：任意按键按下后返回桌面主界面。作为优选，所述S3.1中提示框的显示时长由传递的消息参数决定，显示时长为零，表明需要一直显示；显示时长非零，该值就是提示框需要显示的时间，时间到返回桌面主界面。作为优选，所述S4中轮显管理流程具体包括有以下步骤：S4.1：液晶显示屏持续一定时间无按键时进入轮显模式，桌面管理APP依次循环向各系统在线APP发送轮显通知；S4.2：任意一个在线APP收到轮显通知后显示轮显界面；S4.3：显示轮显界面的在线APP显示完相应的轮显屏数后，向桌面管理APP发送APP退出轮显消息；S4.4：重复上述步骤，直至有按键按下或收到退出并返回桌面消息。作为优选，所述S5中对状态栏的管理流程采用单线程触发式控制，顶层状态栏除时间标签外，信号强度、信息点号等信息均从其他APP发送的刷新工具栏消息中提取数值并显示对应的图标；底层状态栏显示的字符串及时长信息由其他APP发送的刷新状态栏消息中提取，具体的管理流程包括有以下步骤：S5.1：液晶显示区正常显示；S5.2：桌面管理APP检测是否收到刷新工具栏信息，是，则显示工具栏内容；否，则液晶显示区依旧正常显示；S5.3：桌面管理APP检测是否收到刷新状态栏信息，是，则显示状态栏内容；否，则液晶显示区依旧正常显示；S5.4：桌面管理APP检测状态栏显示时间是否到达，是，则清除状态栏内容；否，则依旧显示状态栏内容。有益效果：、不再采用传统的多级菜单控制方法，增强了人机交互的友好性、互动性；、采用流程化的方式通过桌面管理APP作为主控APP，其他应用APP作为从属APP管理，两者之间通过MQTT消息通讯，梳理完成桌面管理APP启动、桌面管理APP控制权管理、桌面管理APP冻结界面管理、桌面管理APP轮显管理和桌面管理APP状态栏管理的流程，使程序运行流程化，从而将一个较复杂的程序系统任务分解为多个易于控制和处理的流程，便于开发和维护。附图说明图1是本发明中桌面管理APP启动流程图；图2是本发明中桌面管理APP控制权管理流程图；图3是本发明中桌面管理APP冻结界面管理流程图；图4是本发明中桌面管理APP轮显管理流程图；图5是本发明中桌面管理APP状态栏管理流程图。具体实施方式下面将结合本申请实施例中的附图1-5，对本申请实施例中的技术方案进行清楚、完整地描述。本发明采用分布式APP管理模式，桌面管理APP作为主控APP，其他应用APP作为从属APP，主控APP与从属APP之间通过MQTT进行消息通讯，具体包括以下步骤：S1：桌面管理APP进入启动流程：S1.1：执行日志初始化，同时创建另一线程进行消息初始化，进入消息收发处理逻辑；S1.2：按键初始化；S1.3：LCD初始化；S1.4：向系统管理器发送注册消息，在本实施例中通过消息接口IID和IOP传输信息，消息接口标识由四字节组成，十六进制编码表示，发送注册消息时消息接口IID和IOP的接口标识分别为：IID＝0x0001,IOP＝0x0010；S1.5：判断收到消息是否注册成功，是，执行S1.6，否，返回S1.4重新向系统管理器发送注册消息；S1.6：向系统管理器发送查询已注册APP消息，此时消息接口IID和IOP的接口标识分别为：IID＝0x0001,IOP＝0x0012；S1.7：收到已注册APP中系统管理器APP和模组管理器APP注册成功的消息后，初始化结束并开启液晶显示，否，返回S1.6重新向系统管理器发送查询已注册APP消息；S2：桌面管理APP进入控制权管理流程，包括对中间显示区及按键监听的控制权管理：S2.1：程序启动后，中间显示区控制权在桌面管理APP；S2.2：判断是否选中APP激活，是，中间显示区控制权在激活APP；否，返回S2.1；S2.3：判断是否按下返回键，是，中间显示区控制权返回桌面管理APP；否，中间显示区控制权仍在激活APP；S2.4：判断1分钟是否无按键按下，是，进入轮显，中间显示区控制权在轮显APP，按键监听控制权在桌面管理APP；否，中间显示区及按键监听的控制权仍在当前APP；S2.5：检测轮显状态下是否有按键按下，是，中间显示区及按键监听的控制权返回桌面管理；否，中间显示区控制权在轮显APP，按键监听控制权在桌面管理APP；S3：桌面管理APP进入冻结界面管理流程，包括对弹窗信息冻结的流程：S3.1：液晶正常显示主界面；S3.2：检测是否有弹窗信息，是，冻结当前界面，否，返回S3.1；S3.3：显示弹窗内容；S3.4：检测弹窗时间是否非0，是，执行S3.5；否，返回S3.3；S3.5：检测弹窗显示时间是否到，是，返回S3.1；否，返回S3.3；S4：桌面管理APP进入轮显管理流程，具体包括以下步骤：S4.1：检测按键是否持续1分钟无按下，是，启动轮显，否，返回主流程；S4.2：向下一APP发送轮显通知，此时消息接口IID和IOP的接口标识分别为：IID＝0x0007，IOP＝0x0001；S4.3：对应APP进行轮显；S4.4：检测是否无按键操作，是，执行S4.5，否，返回主流程。S4.5：检测APP轮显屏数是否结束，是，执行4.6，否，继续执行S4.3；S4.6：APP退出轮显，执行S4.2；S5：桌面管理APP进入状态栏管理流程，包括对顶层状态栏和底层状态栏的管理，其中对状态栏的管理流程采用单线程触发式控制，顶层状态栏除时间标签外，信号强度、信息点号等信息均从其他APP发送的刷新工具栏消息中提取数值并显示对应的图标；底层状态栏显示的字符串及时长信息由其他APP发送的刷新状态栏消息中提取，具体的管理流程包括有以下步骤：S5.1：液晶显示区正常显示；S5.2：桌面管理APP检测是否收到刷新工具栏信息，是，则显示工具栏内容；否，则液晶显示区依旧正常显示；S5.3：桌面管理APP检测是否收到刷新状态栏信息，是，则显示状态栏内容；否，则液晶显示区依旧正常显示；S5.4：桌面管理APP检测状态栏显示时间是否到达，是，则清除状态栏内容；否，则依旧显示状态栏内容。本实施例还提供了一种APP化能源控制器桌面管理系统，包括有网络接口、存储器和处理器，其中网络接口，用于在与其他外部网元之间进行收发信息过程中，实现信号的接收和发送；存储器，用于存储能够在所述处理器上运行的计算机程序指令；处理器，用于在运行所述计算机程序指令时，执行上述APP化能源控制器桌面管理方法的步骤。本实施例还提供了一种计算机存储介质，该计算机存储介质存储有计算机程序，在处理器执行所述计算机程序时可实现以上所描述的方法。所述计算机可读介质可以被认为是有形的且非暂时性的。非暂时性有形计算机可读介质的非限制性示例包括非易失性存储器电路、易失性存储器电路、磁存储介质和光存储介质等。计算机程序包括存储在至少一个非暂时性有形计算机可读介质上的处理器可执行指令。计算机程序还可以包括或依赖于存储的数据。计算机程序可以包括与专用计算机的硬件交互的基本输入/输出系统、与专用计算机的特定设备交互的设备驱动程序、一个或多个操作系统、用户应用程序、后台服务、后台应用程序等。本领域内的技术人员应明白，本申请的实施例可提供为方法、系统、或计算机程序产品。因此，本申请可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本申请可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本申请是参照根据本申请实施例的方法、设备、和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。最后应当说明的是：所描述的实施例仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。
