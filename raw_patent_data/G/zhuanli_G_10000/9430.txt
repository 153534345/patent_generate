标题title
一种避免读卡器读卡与检测冲突的方法、系统及介质
摘要abst
本发明公开了一种避免读卡器读卡与检测冲突的方法、系统及介质，所述方法包括以下步骤：判断标志文件是否存在，若不存在，则创建所述标志文件并执行预先硬件检测操作，所述标志文件包括第一标志、第二标志；设置第一间隔时间、第二间隔时间和基准暂停次数；当满足所述第二间隔时间时，判断所述第二标志，得到第一判断结果，根据所述第一判断结果执行暂停检测操作或者执行读卡器检测操作；当接收到读卡器读卡指令时，判断所述第一标志，得到第二判断结果，根据所述第二判断结果执行读卡操作或者执行第一告警提示操作；通过上述方式，本发明能够实现避免自助终端的读卡器读卡和读卡器检测的冲突，提升自助终端设备的稳定性，增强用户体验。
权利要求书clms
1.一种避免读卡器读卡与检测冲突的方法，其特征在于，包括以下步骤：应用初始化：判断标志文件是否存在，若不存在，则创建所述标志文件并执行预先硬件检测操作，所述标志文件包括第一标志、第二标志；设置第一间隔时间、第二间隔时间和基准暂停次数；响应于读卡器检测过程：当满足所述第二间隔时间时，判断所述第二标志，得到第一判断结果，根据所述第一判断结果执行暂停检测操作或者执行读卡器检测操作；响应于读卡器读卡过程：当接收到读卡器读卡指令时，判断所述第一标志，得到第二判断结果，根据所述第二判断结果执行读卡操作或者执行第一告警提示操作。2.根据权利要求1所述的避免读卡器读卡与检测冲突的方法，其特征在于：所述第一标志包括第一状态和第二状态，所述第二标志包括第三状态和第四状态，所述判断标志文件是否存在的步骤进一步包括：若存在，则执行所述读卡器检测过程或所述读卡器读卡过程。3.根据权利要求2所述的避免读卡器读卡与检测冲突的方法，其特征在于：所述创建所述标志文件并执行预先硬件检测操作的步骤进一步包括：设置所述第二标志为所述第三状态，执行所述预先硬件检测操作，获取预先硬件检测结果，根据所述预先硬件检测结果执行第一标志设置操作。4.根据权利要求3所述的避免读卡器读卡与检测冲突的方法，其特征在于：所述根据所述预先硬件检测结果执行第一标志设置操作的步骤进一步包括：若所述预先硬件检测结果是正常，则设置所述第一标志为第一状态；若所述预先硬件检测结果是异常，则设置所述第一标志为第二状态。5.根据权利要求3所述的避免读卡器读卡与检测冲突的方法，其特征在于：所述判断所述第二标志，得到第一判断结果，根据所述第一判断结果执行暂停检测操作或者执行读卡器检测操作的步骤进一步包括：若所述第二标志是所述第三状态，则执行所述读卡器检测操作；若所述第二标志是所述第四状态，则执行所述暂停检测操作。6.根据权利要求5所述的避免读卡器读卡与检测冲突的方法，其特征在于：所述执行暂停检测操作的步骤进一步包括：暂停次数加一并记录，当满足所述第二间隔时间时，将所述暂停次数与所述基准暂停次数进行比较：若所述暂停次数等于所述基准暂停次数，则停止执行所述读卡器检测操作；若所述暂停次数小于所述基准暂停次数，则执行所述响应于读卡器检测过程。7.根据权利要求2所述的避免读卡器读卡与检测冲突的方法，其特征在于：所述判断所述第一标志，得到第二判断结果，根据所述第二判断结果执行读卡操作或者执行第一告警提示操作的步骤进一步包括：若所述第一标志是所述第一状态，则执行所述读卡操作；若所述第一标志是所述第二状态，则执行所述第一告警提示操作。8.根据权利要求7所述的避免读卡器读卡与检测冲突的方法，其特征在于：所述执行读卡操作的步骤进一步包括：当读卡器读卡时，修改所述第二标志为所述第四状态；当读卡器读卡完成后，修改所述第二标志为所述第三状态。9.一种避免读卡器读卡与检测冲突的系统，其特征在于，包括：应用初始化模块、硬件检测模块和读卡模块；所述应用初始化模块用于判断标志文件是否存在，若不存在，则创建所述标志文件并执行预先硬件检测操作，所述标志文件包括第一标志、第二标志；设置第一间隔时间、第二间隔时间和基准暂停次数；所述硬件检测模块用于根据所述第二间隔时间，判断所述第二标志，得到第一判断结果，根据所述第一判断结果执行暂停检测操作或者执行读卡器检测操作；所述读卡模块用于根据读卡器读卡指令，判断所述第一标志，得到第二判断结果，根据所述第二判断结果执行读卡操作或者执行第一告警提示操作。10.一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，其特征在于，所述计算机程序被处理器执行时，实现权利要求1-8任一项所述的一种避免读卡器读卡与检测冲突的方法步骤。
说明书desc
技术领域本发明涉及硬件检测技术领域，特别是涉及一种避免读卡器读卡与检测冲突的方法、系统及介质。背景技术银医项目的自助终端在日常使用时，硬件随着使用时间的变化或者因一些不可预知的原因出现故障。自助终端上的电动读卡器使用更为频繁，出现故障的概率较其他组件更大，为了不影响自助终端的使用，现有的解决方案是通过内置检测程序每间隔一段时间对电动读卡器的硬件状态进行检测。但是因为用户对自助终端的操作时间无法预知，所以会出现用户使用自助终端的电动读卡器的同时，内置检测程序对电动读卡器进行硬件状态检测，此时会发生程序卡死，报硬件故障等问题，降低了自助终端设备的稳定性，降低了用户的体验。发明内容本发明主要解决的是自助终端内置检测程序进行硬件状态检测与用户使用自助终端冲突的问题。为解决上述问题，本发明采用的一个技术方案是：提供一种避免读卡器读卡与检测冲突的方法，包括以下步骤：应用初始化：判断标志文件是否存在，若不存在，则创建所述标志文件并执行预先硬件检测操作，所述标志文件包括第一标志、第二标志；设置第一间隔时间、第二间隔时间和基准暂停次数；响应于读卡器检测过程：当满足所述第二间隔时间时，判断所述第二标志，得到第一判断结果，根据所述第一判断结果执行暂停检测操作或者执行读卡器检测操作；响应于读卡器读卡过程：当接收到读卡器读卡指令时，判断所述第一标志，得到第二判断结果，根据所述第二判断结果执行读卡操作或者执行第一告警提示操作。进一步，所述第一标志包括第一状态和第二状态，所述第二标志包括第三状态和第四状态，所述判断标志文件是否存在的步骤进一步包括：若存在，则执行所述读卡器检测过程或所述读卡器读卡过程。进一步，所述创建所述标志文件并执行预先硬件检测操作的步骤进一步包括：设置所述第二标志为所述第三状态，执行所述预先硬件检测操作，获取预先硬件检测结果，根据所述预先硬件检测结果执行第一标志设置操作。进一步，所述根据所述预先硬件检测结果执行第一标志设置操作的步骤进一步包括：若所述预先硬件检测结果是正常，则设置所述第一标志为第一状态；若所述预先硬件检测结果是异常，则设置所述第一标志为第二状态。进一步，所述判断所述第二标志，得到第一判断结果，根据所述第一判断结果执行暂停检测操作或者执行读卡器检测操作的步骤进一步包括：若所述第二标志是所述第三状态，则执行所述读卡器检测操作；若所述第二标志是所述第四状态，则执行所述暂停检测操作。进一步，所述执行暂停检测操作的步骤进一步包括：暂停次数加一并记录，当满足所述第二间隔时间时，将所述暂停次数与所述基准暂停次数进行比较：若所述暂停次数等于所述基准暂停次数，则停止执行所述读卡器检测操作；若所述暂停次数小于所述基准暂停次数，则执行所述响应于读卡器检测过程。进一步，所述判断所述第一标志，得到第二判断结果，根据所述第二判断结果执行读卡操作或者执行第一告警提示操作的步骤进一步包括：若所述第一标志是所述第一状态，则执行所述读卡操作；若所述第一标志是所述第二状态，则执行所述第一告警提示操作。进一步，所述执行读卡操作的步骤进一步包括：当读卡器读卡时，修改所述第二标志为所述第四状态；当读卡器读卡完成后，修改所述第二标志为所述第三状态。一种避免读卡器读卡与检测冲突的系统，其特征在于，包括：应用初始化模块、硬件检测模块和读卡模块；所述应用初始化模块用于判断标志文件是否存在，若不存在，则创建所述标志文件并执行预先硬件检测操作，所述标志文件包括第一标志、第二标志；设置第一间隔时间、第二间隔时间和基准暂停次数；所述硬件检测模块用于根据所述第二间隔时间，判断所述第二标志，得到第一判断结果，根据所述第一判断结果执行暂停检测操作或者执行读卡器检测操作；所述读卡模块用于根据读卡器读卡指令，判断所述第一标志，得到第二判断结果，根据所述第二判断结果执行读卡操作或者执行第一告警提示操作。本发明还提供一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序被处理器执行时，实现所述的一种避免读卡器读卡与检测冲突的方法的步骤。本发明的有益效果是：1、本发明所述的避免读卡器读卡与检测冲突的方法，可以实现避免自助终端进行硬件状态检测与用户使用自助终端的冲突；2、本发明所述的避免读卡器读卡与检测冲突的系统，可以实现提升自助终端设备的稳定性；3、本发明所述的避免读卡器读卡与检测冲突的介质，可以实现提升用户的体验。附图说明为了更清楚地说明本发明具体实施方式或现有技术中的技术方案，下面将对具体实施方式或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施方式，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明实施例1所述的避免读卡器读卡与检测冲突的方法的流程图；图2是本发明实施例2所述的避免读卡器读卡与检测冲突的系统的示意图。具体实施方式下面将结合附图对本发明的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本发明的描述中，需要说明的是，除非另有明确的规定和限定，术语“连接”等术语应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，还可以是两个元件内部的连通，可以是无线连接，也可以是有线连接。对于本领域的普通技术人员而言，可以具体情况理解上述术语在本发明中的具体含义。在本发明的描述中，需要说明的是，除非另有明确的规定和限定，“状态标志”、“状态”、“间隔时间”、“硬件”、“基准”、“检测”、“正常”、“异常”、“告警提示”、“读卡”、“检测”等术语应做广义理解。对于本领域的普通技术人员而言，可以具体情况理解上述术语在本发明中的具体含义。此外，术语“第一”、“第二”、“第三”和“第四”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”、“第三”和“第四”的特征可以明示或者隐含地包括至少一个该特征。需要说明的是，在本发明的描述中，XML是可扩展标记语言。实施例1本发明实施例提供一种避免读卡器读卡与检测冲突的方法，请参阅图1，包括以下步骤：S100、应用初始化：初始化硬件检测应用，应用去目标目录中查找是否存在约定的标志文件，需要说明的是，目标目录是硬件检测应用和自助终端系统共同约定的任意一个目录，其不在本发明保护的范围内，故不再详细赘述，为了更清楚地解释本发明，设定标志文件为XML文件，但是这并不代表本发明所保护的范围仅限于XML文件。XML文件中配置有第一标志和第二标志：第一标志记录的是电动读卡器硬件状态标志，其设有第一状态和第二状态两个值，第一状态代表电动读卡器硬件状态正常，第二状态代表电动读卡器硬件状态异常；第二标志记录的是电动读卡器使用状态标志，其设有第三状态和第四状态两个值，第三状态代表电动读卡器当前处于空闲状态，第四状态代表电动读卡器当前处于忙碌状态。若XML文件不在目标目录中，则应用创建XML文件，在新建的XML文件中配置电动读卡器使用状态标志，并将其状态值设为空闲状态；应用执行初始化硬件检测操作，检测当前自助终端的电动读卡器硬件状态：若初始化硬件检测结果为正常，则将XML文件中设置电动读卡器硬件状态标志的状态值设为正常状态；若初始化硬件检测结果为异常，则将XML文件中设置电动读卡器硬件状态标志的状态值设为异常状态；若XML文件存在目标目录中，则进入S200硬件检测步骤。应用设置第二间隔时间的值，为了更清楚地解释本发明，设定第二间隔时间为60分钟，但是这并不代表本发明保护的第二间隔时间仅限于60分钟。S200、读卡器检测：应用获取设置的第一间隔时间和基准暂停次数，为了更清楚地解释本发明，设定第一间隔时间为5秒钟，设定基准暂停次数为5次，但是这并不代表本发明保护的第一间隔时间仅限于5秒中，基准暂停次数仅限于5次。第二间隔时间设置完成后，应用启动运行，当应用运行了60分钟后，自动开启硬件检测功能，读取目标目录中的标志文件，获取电动读卡器使用状态标志并判断其状态值：若电动读卡器使用状态标志的状态值为忙碌状态，则暂停检测，记录暂停次数加一，判断暂停次数是否达到5次：若暂停次数未到5次，则执行暂停操作，暂停5秒钟后，应用再次去读取目标目录中的XML文件，获取电动读卡器使用状态标志并判断：若电动读卡器使用状态标志的当前状态值变为空闲状态，则执行硬件检测操作，获取硬件检测结果；若电动读卡器使用状态标志的当前状态值仍为忙碌状态，则再次暂停检测，并记录暂停次数加一，判断暂停次数是否达到5次，重复上述步骤，直到电动读卡器使用状态标志的状态值变为空闲状态后开始执行硬件检测操作或者暂停次数达到5次，停止此次硬件检测；若暂停次数达到5次，则停止此次硬件检测，应用关闭硬件检测功能，重新开始计时；若电动读卡器使用状态标志的状态值为空闲状态，执行硬件检测操作，获取硬件检测结果。判断硬件检测结果：若硬件检测结果为正常，则将XML文件中设置电动读卡器硬件状态标志的状态值设为正常状态；若硬件检测结果为异常，则将XML文件中设置电动读卡器硬件状态标志的状态值设为异常状态。S300、读卡器读卡：自助终端设备的程序调用电动读卡器的相关读卡函数之前，程序先读取目标目录中的XML文件，获取电动读卡器硬件状态标志的状态值并判断：若电动读卡器硬件状态标志的状态值为正常状态，则程序调用相关读卡函数，并将XML文件中电动读卡器使用状态标志的状态值设为忙碌状态，电动读卡器完成读卡操作后，将XML文件中电动读卡器使用状态标志的状态值设为空闲状态；若电动读卡器硬件状态标志的状态值为异常状态，则执行第一告警提示操作，即自助终端弹屏提醒用户当前自助终端读卡设备故障，请到其它终端或者人工窗口办理业务。实施例2本发明实施例还提供一种避免读卡器读卡与检测冲突的系统，请参阅图2，包括：应用初始化模块、硬件检测模块和读卡模块；应用初始化模块用于判断标志文件是否存在，若不存在，则创建标志文件并执行预先硬件检测操作，标志文件包括第一标志、第二标志；设置第一间隔时间、第二间隔时间和基准暂停次数；具体地，应用初始化模块初始化硬件检测应用，去目标目录中查找是否存在约定的标志文件，需要说明的是，目标目录是硬件检测应用和自助终端系统共同约定的任意一个目录，其不在本发明保护的范围内，故不再详细赘述，为了更清楚地解释本发明，设定标志文件为XML文件，但是这并不代表本发明所保护的范围仅限于XML文件。XML文件中配置有第一标志和第二标志：第一标志记录的是电动读卡器硬件状态标志，其设有第一状态和第二状态两个值，第一状态代表电动读卡器硬件状态正常，第二状态代表电动读卡器硬件状态异常；第二标志记录的是电动读卡器使用状态标志，其设有第三状态和第四状态两个值，第三状态代表电动读卡器当前处于空闲状态，第四状态代表电动读卡器当前处于忙碌状态。若XML文件不在目标目录中，则应用创建XML文件，在新建的XML文件中配置电动读卡器使用状态标志，并将其状态值设为空闲状态；应用执行初始化硬件检测操作，检测当前自助终端的电动读卡器硬件状态：若检测结果为正常，则将XML文件中设置电动读卡器硬件状态标志的状态值设为正常状态；若检测结果为异常，则将XML文件中设置电动读卡器硬件状态标志的状态值设为异常状态；若XML文件存在目标目录中，则跳转至硬件检测模块。应用初始化模块设置第二间隔时间的值，为了更清楚地解释本发明，设定第二间隔时间为60分钟，但是这并不代表本发明保护的第二间隔时间仅限于60分钟。硬件检测模块用于根据第二间隔时间，判断第二标志，得到第一判断结果，根据第一判断结果执行暂停检测操作或者执行读卡器检测操作；具体地，硬件检测模块获取第一间隔时间和基准暂停次数，为了更清楚地解释本发明，设定第一间隔时间为5秒钟，设定基准暂停次数为5次，但是这并不代表本发明保护的第一间隔时间仅限于5秒中，基准暂停次数仅限于5次。第二间隔时间设置完成后，应用启动运行，当应用运行了60分钟后，自动开启硬件检测功能，读取目标目录中的标志文件，获取电动读卡器使用状态标志并判断其状态值：若电动读卡器使用状态标志的状态值为忙碌状态，则暂停检测，记录暂停次数加一，判断暂停次数是否达到5次：若暂停次数未到5次，则执行暂停操作，暂停5秒钟后，应用再次去读取目标目录中的XML文件，获取电动读卡器使用状态标志并判断：若电动读卡器使用状态标志的当前状态值变为空闲状态，则执行硬件检测操作，获取硬件检测结果；若电动读卡器使用状态标志的当前状态值仍为忙碌状态，则再次暂停检测，并记录暂停次数加一，判断暂停次数是否达到5次，重复上述步骤，直到电动读卡器使用状态标志的状态值变为空闲状态后开始执行硬件检测操作或者暂停次数达到5次，停止此次硬件检测；若暂停次数达到5次，则停止此次硬件检测，应用关闭硬件检测功能，重新开始计时；若电动读卡器使用状态标志的状态值为空闲状态，执行硬件检测操作，获取硬件检测结果。判断硬件检测结果：若硬件检测结果为正常，则将XML文件中设置电动读卡器硬件状态标志的状态值设为正常状态；若硬件检测结果为异常，则将XML文件中设置电动读卡器硬件状态标志的状态值设为异常状态。读卡模块用于根据所述第二间隔时间，判断所述第二标志，得到第一判断结果，根据所述第一判断结果执行暂停检测操作或者执行读卡器检测操作；具体地，自助终端设备的程序调用电动读卡器的相关读卡函数之前，启动读卡器模块先读取目标目录中的XML文件，获取电动读卡器硬件状态标志的状态值并判断：若电动读卡器硬件状态标志的状态值为正常状态，则程序调用相关读卡函数，并将XML文件中电动读卡器使用状态标志的状态值设为忙碌状态，电动读卡器完成读卡操作后，将XML文件中电动读卡器使用状态标志的状态值设为空闲状态；若电动读卡器硬件状态标志的状态值为异常状态，则执行第一告警提示操作，即自助终端弹屏提醒用户当前自助终端读卡设备故障，请到其它终端或者人工窗口办理业务。实施例3本实施例3具有一种计算机可读存储介质，所述存储介质用于储存将上述实施例1所述的避免读卡器读卡与检测冲突的方法实现所用的计算机软件指令，其包含用于避免读卡器读卡与检测冲突的方法所设置的程序；具体地，该可执行程序可以内置于避免读卡器读卡与检测冲突的系统100中，这样，避免读卡器读卡与检测冲突的系统100就可以通过执行内置的可执行程序实现所述实施例1的避免读卡器读卡与检测冲突的方法。上述本发明实施例公开实施例序号仅仅为了描述，不代表实施例的优劣。本领域普通技术人员可以理解实现上述实施例的全部或部分步骤可以通过硬件来完成，也可以通过程序来指令相关的硬件完成的程序可以存储于一种计算机可读存储介质中，上述提到的存储介质可以是只读存储器，磁盘或光盘等。以上所述仅为本发明的实施例，并非因此限制本发明的专利范围，凡是利用本发明说明书及附图内容所作的等效结构或等效流程变换，或直接或间接运用在其他相关的技术领域，均同理包括在本发明的专利保护范围内。
