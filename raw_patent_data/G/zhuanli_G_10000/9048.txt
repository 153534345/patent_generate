标题title
一种数字身份验证系统、方法、电子设备及存储介质
摘要abst
本申请涉及区块链技术领域，尤其涉及一种数字身份验证系统、方法、电子设备及存储介质。本申请中的数字身份验证系统包括区块链网络端、持有者端、发行者端和验证者端，其中，区块链网络端部署有用于数据存储和权限管理的多个区块链智能合约，通过持有者端、发行者端、验证者端分别与区块链网络端中部署的不同区块链智能合约的交互，不仅可以有效保证各类数据存储有效、数据存储分离，还可以实现对各类角色的权限进行校验，进而提升区块链网络的安全性和信任度。
权利要求书clms
1.一种数字身份验证系统，其特征在于，所述数字身份验证系统包括区块链网络端、持有者端、发行者端和验证者端，所述区块链网络端部署有用于数据存储和权限管理的多个区块链智能合约；其中：所述持有者端，用于向所述区块链网络端注册DID数据，以获取DID文档，并向所述发行者端发送可验证声明的获取请求；所述发行者端，用于向所述区块链网络端注册DID数据使所述发行者端的用户成为发行者，并在接收到所述持有者端发送的所述获取请求后，向所述持有者端发行可验证声明；所述验证者端，用于在接收到所述持有者端发送的服务请求后，通过调用所述区块链网络端的区块链智能合约对所述持有者端的用户身份、所述发行者端的用户身份和所述发行者端的用户签名进行验证，并在验证通过后，为所述持有者端的用户提供与所述服务请求匹配的目标服务。2.根据权利要求1所述的数字身份验证系统，其特征在于，所述区块链网络端包括数据合约模块、权限合约模块、角色合约模块和控制合约模块；其中，所述数据合约模块，用于存储和管理DID数据、DID文档、发行者数据、凭证主题数据；所述权限合约模块，用于管理各类目标角色的调用权限，所述目标角色包括发行者和合约管理员；所述角色合约模块，用于管理各类所述目标角色的角色数据；控制合约模块，用于调用所述数据合约模块，以提供相应的代理服务。3.根据权利要求2所述的数字身份验证系统，其特征在于，所述区块链网络端用于根据以下步骤部署各个区块链智能合约：在目标区块链网络上部署所述角色合约模块中的角色合约，并设置初始化的目标角色，得到所述角色合约的合约地址；在所述目标区块链网络上部署所述权限合约模块中的权限控制合约和调用控制合约，并将所述目标角色设置在所述权限控制合约和所述调用控制合约中；在所述目标区块链网络上部署所述数据合约模块中的DID数据合约、发行者合约和凭证主题合约，得到所述DID数据合约、所述发行者合约和所述凭证主题合约的合约地址；在所述目标区块链网络上部署所述控制合约模块中的DID代理合约、发行者代理合约、凭证主题代理合约和签名代理合约，得到所述DID代理合约、所述发行者代理合约、所述凭证主题代理合约和所述签名代理合约的合约地址。4.根据权利要求3所述的数字身份验证系统，其特征在于，所述区块链网络端还用于根据以下步骤对所述控制合约模块中的区块链智能合约进行升级：当检测到目标业务发生变更时，重新在目标区块链网络上部署所述控制合约模块中的区块链智能合约，得到所述控制合约模块中的区块链智能合约的合约地址；将更新后的所述控制合约模块中的区块链智能合约的合约地址写入所述权限合约模块中的所述调用控制合约中。5.根据权利要求2所述的数字身份验证系统，其特征在于，所述持有者端用于根据以下步骤存储DID数据：调用所述控制合约模块中的DID代理合约，以通过所述DID代理合约判断所述持有者端的用户是否重复注册；若否，调用所述数据合约模块中的DID数据合约，并通过所述权限合约模块中的调用控制合约判断所述DID代理合约的合约地址与第一指定调用合约的合约地址是否一致；若是，从所述数据合约模块中的DID数据合约中获取并存储所述持有者端的用户的DID数据。6.根据权利要求2所述的数字身份验证系统，其特征在于，所述发行者端用于根据以下步骤新增凭证主题数据：调用所述控制合约模块中的凭证主题代理合约，以通过所述凭证主题代理合约判断所述发行者端的用户的凭证主题是否重复注册；若否，调用所述数据合约模块中的凭证主题合约，并通过所述权限合约模块中的调用控制合约判断所述凭证主题合约与第二指定调用合约是否一致，以及通过所述权限合约模块中的权限控制合约判断所述发行者端的用户是否有权限添加凭证主题数据；若审核通过，则新增和保存所述发行者端的用户的凭证主题数据。7.根据权利要求2所述的数字身份验证系统，其特征在于，所述发行者端用于根据以下步骤注册身份：调用所述控制合约模块中的发行者代理合约，以通过所述发行者代理合约判断所述发行者端的用户的身份是否重复校验；若否，校验所述发行者端的用户的签名数据；若校验通过，则调用所述数据合约模块中的发行者合约，并通过所述权限合约模块中的调用控制合约判断所述发行者合约与第三指定调用合约是否一致，以及通过所述权限合约模块中的权限控制合约判断所述发行者端的用户是否有权限添加发行者数据；若审核通过，则注册和保存发行者数据。8.根据权利要求2所述的数字身份验证系统，其特征在于，所述发行者端用于根据以下步骤发行可验证声明：调用所述控制合约模块中的DID代理合约，以通过所述DID代理合约转发所述获取请求至所述数据合约模块中的DID数据合约，以便所述DID数据合约判断发送所述获取请求的用户的DID数据是否存在；若存在，向发送所述获取请求的持有者端发行可验证声明。9.根据权利要求2所述的数字身份验证系统，其特征在于，所述验证者端用于根据以下步骤验证可验证声明：调用所述控制合约模块中的DID代理合约，通过所述DID代理合约将所述服务请求转发至所述数据合约模块中的DID数据合约，以通过所述DID数据合约判断发送所述服务请求的用户的DID数据是否存在；若存在，调用所述控制合约模块中的发行者代理合约，通过所述发行者代理合约将所述服务请求转发至所述数据合约模块中的发行者合约，以通过所述发行者合约判断提供给发送所述服务请求的用户的可验证声明的发行者是否注册、是否有权限发行可验证声明；若所述可验证声明的发行者有注册、有权限发行可验证声明，则确定发送所述服务请求的用户的可验证声明通过审核。10.一种数字身份验证方法，其特征在于，应用于权利要求1至9中任一项所述的数字身份验证系统中的区块链网络端，所述数字身份验证方法包括：在接收到持有者端针对DID数据的注册请求后，为所述持有者端的用户分配DID数据和DID文档；在接收到发行者端针对DID数据的注册请求后，使所述发行者端的用户成为发行者，以供所述发行者端在接收到所述持有者端发送的针对可验证声明获取请求后，为所述持有者端提供可验证声明；在接收到验证者端发送的针对所述持有者端的身份的验证请求后，调用区块链智能合约对所述持有者端的用户身份、所述发行者端的用户身份和所述发行者端的用户签名进行验证，以便所述验证者端在验证通过后为所述持有者端的用户提供与所述服务请求匹配的目标服务。11.一种电子设备，其特征在于，包括：处理器、存储器和总线，所述存储器存储有所述处理器可执行的机器可读指令，当电子设备运行时，所述处理器与所述存储器之间通过所述总线进行通信，所述机器可读指令被所述处理器运行时执行如权利要求10所述的数字身份验证方法的步骤。12.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储有计算机程序，所述计算机程序被处理器运行时执行如权利要求10所述的数字身份验证方法的步骤。
说明书desc
技术领域本申请涉及区块链技术领域，尤其涉及一种数字身份验证系统、方法、电子设备及存储介质。背景技术区块链是一个信息技术领域的术语。从本质上讲，它是一个共享数据库，存储于其中的数据或信息，具有“不可伪造”“全程留痕”“可以追溯”、“公开透明”、“集体维护”等特征。基于这些特征，区块链技术奠定了坚实的“信任”基础，创造了可靠的“合作”机制，具有广阔的运用前景。由于区块链技术提供了无需中心化机构即可管理信任的根源的方法，所以区块链技术可以应用于身份管理系统和可验证声明系统中。但是，区块链分布式身份架构尚不完善，基于去中心化的数字身份验证技术都处于摸索和起步阶段，系统定义、链上数据存储和各类角色的权限控制均不完善，因此实际上并不存在一套完整的实现去中心化身的数字身份验证系统。发明内容有鉴于此，本申请实施例至少提供一种数字身份验证系统、方法、电子设备及存储介质，不仅可以有效保证各类数据存储有效、数据存储分离，还可以实现对各类角色的权限进行校验，进而提升区块链网络的安全性和信任度。本申请主要包括以下几个方面：第一方面，本申请实施例提供一种数字身份验证系统，所述数字身份验证系统包括区块链网络端、持有者端、发行者端和验证者端，所述区块链网络端部署有用于数据存储和权限管理的多个区块链智能合约；其中：所述持有者端，用于向所述区块链网络端注册DID数据，以获取DID文档，并向所述发行者端发送可验证声明的获取请求；所述发行者端，用于向所述区块链网络端注册DID数据使所述发行者端的用户成为发行者，并在接收到所述持有者端发送的所述获取请求后，向所述持有者端发行可验证声明；所述验证者端，用于在接收到所述持有者端发送的服务请求后，通过调用所述区块链网络端的区块链智能合约对所述持有者端的用户身份、所述发行者端的用户身份和所述发行者端的用户签名进行验证，并在验证通过后，为所述持有者端的用户提供与所述服务请求匹配的目标服务。在一种可能的实施方式中，所述区块链网络端包括数据合约模块、权限合约模块、角色合约模块和控制合约模块；其中，所述数据合约模块，用于存储和管理DID数据、DID文档、发行者数据、凭证主题数据；所述权限合约模块，用于管理各类目标角色的调用权限，所述目标角色包括发行者和合约管理员；所述角色合约模块，用于管理各类所述目标角色的角色数据；控制合约模块，用于调用所述数据合约模块，以提供相应的代理服务。在一种可能的实施方式中，所述区块链网络端用于根据以下步骤部署各个区块链智能合约：在目标区块链网络上部署所述角色合约模块中的角色合约，并设置初始化的目标角色，得到所述角色合约的合约地址；在所述目标区块链网络上部署所述权限合约模块中的权限控制合约和调用控制合约，并将所述目标角色设置在所述权限控制合约和所述调用控制合约中；在所述目标区块链网络上部署所述数据合约模块中的DID数据合约、发行者合约和凭证主题合约，得到所述DID数据合约、所述发行者合约和所述凭证主题合约的合约地址；在所述目标区块链网络上部署所述控制合约模块中的DID代理合约、发行者代理合约、凭证主题代理合约和签名代理合约，得到所述DID代理合约、所述发行者代理合约、所述凭证主题代理合约和所述签名代理合约的合约地址。在一种可能的实施方式中，所述区块链网络端还用于根据以下步骤对所述控制合约模块中的区块链智能合约进行升级：当检测到目标业务发生变更时，重新在目标区块链网络上部署所述控制合约模块中的区块链智能合约，得到所述控制合约模块中的区块链智能合约的合约地址；将更新后的所述控制合约模块中的区块链智能合约的合约地址写入所述权限合约模块中的所述调用控制合约中。在一种可能的实施方式中，所述持有者端用于根据以下步骤存储DID数据：调用所述控制合约模块中的DID代理合约，以通过所述DID代理合约判断所述持有者端的用户是否重复注册；若否，调用所述数据合约模块中的DID数据合约，并通过所述权限合约模块中的调用控制合约判断所述DID代理合约的合约地址与第一指定调用合约的合约地址是否一致；若是，从所述数据合约模块中的DID数据合约中获取并存储所述持有者端的用户的DID数据。在一种可能的实施方式中，所述发行者端用于根据以下步骤新增凭证主题数据：调用所述控制合约模块中的凭证主题代理合约，以通过所述凭证主题代理合约判断所述发行者端的用户的凭证主题是否重复注册；若否，调用所述数据合约模块中的凭证主题合约，并通过所述权限合约模块中的调用控制合约判断所述凭证主题合约与第二指定调用合约是否一致，以及通过所述权限合约模块中的权限控制合约判断所述发行者端的用户是否有权限添加凭证主题数据；若审核通过，则新增和保存所述发行者端的用户的凭证主题数据。在一种可能的实施方式中，所述发行者端用于根据以下步骤注册身份：调用所述控制合约模块中的发行者代理合约，以通过所述发行者代理合约判断所述发行者端的用户的身份是否重复校验；若否，校验所述发行者端的用户的签名数据；若校验通过，则调用所述数据合约模块中的发行者合约，并通过所述权限合约模块中的调用控制合约判断所述发行者合约与第三指定调用合约是否一致，以及通过所述权限合约模块中的权限控制合约判断所述发行者端的用户是否有权限添加发行者数据；若审核通过，则注册和保存发行者数据。在一种可能的实施方式中，所述发行者端用于根据以下步骤发行可验证声明：调用所述控制合约模块中的DID代理合约，以通过所述DID代理合约转发所述获取请求至所述数据合约模块中的DID数据合约，以便所述DID数据合约判断发送所述获取请求的用户的DID数据是否存在；若存在，向发送所述获取请求的持有者端发行可验证声明。在一种可能的实施方式中，所述验证者端用于根据以下步骤验证可验证声明：调用所述控制合约模块中的DID代理合约，通过所述DID代理合约将所述服务请求转发至所述数据合约模块中的DID数据合约，以通过所述DID数据合约判断发送所述服务请求的用户的DID数据是否存在；若存在，调用所述控制合约模块中的发行者代理合约，通过所述发行者代理合约将所述服务请求转发至所述数据合约模块中的发行者合约，以通过所述发行者合约判断提供给发送所述服务请求的用户的可验证声明的发行者是否注册、是否有权限发行可验证声明；若所述可验证声明的发行者有注册、有权限发行可验证声明，则确定发送所述服务请求的用户的可验证声明通过审核。第二方面，本申请实施例还提供一种数字身份验证方法，应用于数字身份验证系统中的区块链网络端，所述数字身份验证方法包括：在接收到持有者端针对DID数据的注册请求后，为所述持有者端的用户分配DID数据和DID文档；在接收到发行者端针对DID数据的注册请求后，使所述发行者端的用户成为发行者，以供所述发行者端在接收到所述持有者端发送的针对可验证声明获取请求后，为所述持有者端提供可验证声明；在接收到验证者端发送的针对所述持有者端的身份的验证请求后，调用区块链智能合约对所述持有者端的用户身份、所述发行者端的用户身份和所述发行者端的用户签名进行验证，以便所述验证者端在验证通过后为所述持有者端的用户提供与所述服务请求匹配的目标服务。第三方面，本申请实施例还提供一种电子设备，包括：处理器、存储器和总线，所述存储器存储有所述处理器可执行的机器可读指令，当电子设备运行时，所述处理器与所述存储器之间通过所述总线进行通信，所述机器可读指令被所述处理器运行时执行上述第一方面或第一方面中任一种可能的实施方式中所述的数字身份验证方法的步骤。第四方面，本申请实施例还提供了一种计算机可读存储介质，所述计算机可读存储介质上存储有计算机程序，所述计算机程序被处理器运行时执行上述第一方面或第一方面中任一种可能的实施方式中所述的数字身份验证方法的步骤。本申请实施例提供的数字身份验证系统、方法、电子设备及存储介质，通过持有者端、发行者端、验证者端分别与区块链网络端中部署的不同区块链智能合约的交互，与现有技术中没有明确对存储的合约进行定义，合约架构也没有通用和统一的模型相比，本申请不仅可以有效保证各类数据存储有效、数据存储分离，还可以实现对各类角色的权限进行校验，进而提升区块链网络的安全性和信任度。进一步，本申请实施例提供的数字身份验证系统中的区块链网络端包括数据合约模块、权限合约模块、角色合约模块和控制合约模块；其中，数据合约模块用于存储和管理DID数据、DID文档、发行者数据、凭证主题数据；权限合约模块用于管理各类目标角色的调用权限，目标角色包括发行者和合约管理员；角色合约模块用于管理各类目标角色的角色数据；控制合约模块用于调用数据合约模块，以提供相应的代理服务。这样，可以有效保证DID数据、发行者数据、凭证主题数据存储有效，且数据存储分离，可以对各类角色的权限进行校验，提升区块链服务的安全性。为使本申请的上述目的、特征和优点能更明显易懂，下文特举较佳实施例，并配合所附附图，作详细说明如下。附图说明为了更清楚地说明本申请实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本申请的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1示出了本申请实施例所提供的一种数字身份验证系统的结构示意图；图2示出了本申请实施例所提供的区块链网络端的结构示意图；图3示出了本申请实施例所提供的一种数字身份验证方法的流程图；图4示出了本申请实施例所提供的一种电子设备的结构示意图。主要元件符号说明：图中：100-数字身份验证系统；110-区块链网络端；111-数据合约模块；112-权限合约模块；113-角色合约模块；114-控制合约模块；120-持有者端；130-发行者端；140-验证者端；400-电子设备；410-处理器；420-存储器；430-总线。具体实施方式为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，应当理解，本申请中的附图仅起到说明和描述的目的，并不用于限定本申请的保护范围。另外，应当理解，示意性的附图并未按实物比例绘制。本申请中使用的流程图示出了根据本申请的一些实施例实现的操作。应当理解，流程图的操作可以不按顺序实现，没有逻辑的上下文关系的步骤可以反转顺序或者同时实施。此外，本领域技术人员在本申请内容的指引下，可以向流程图添加一个或多个其他操作，也可以从流程图中移除一个或多个操作。另外，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本申请实施例的组件可以以各种不同的配置来布置和设计。因此，以下对在附图中提供的本申请的实施例的详细描述并非旨在限制要求保护的本申请的范围，而是仅仅表示本申请的选定实施例。基于本申请的实施例，本领域技术人员在没有做出创造性劳动的前提下所获得的全部其他实施例，都属于本申请保护的范围。为了使得本领域技术人员能够使用本申请内容，结合特定应用场景“区块链网络的应用”，给出以下实施方式，对于本领域技术人员来说，在不脱离本申请的精神和范围的情况下，可以将这里定义的一般原理应用于其他实施例和应用场景。本申请实施例下述方法、系统、电子设备或计算机可读存储介质可以应用于任何需要进行DID数据存储及权限管理的场景，本申请实施例并不对具体的应用场景作限制，任何使用本申请实施例提供的数字身份验证方法及系统的方案均在本申请保护范围内。值得注意的是，在本申请提出之前，现有方案中区块链分布式身份架构尚不完善，基于去中心化的数字身份验证技术都处于摸索和起步阶段，系统定义、链上数据存储和各类角色的权限控制均不完善，因此实际上并不存在一套完整的实现去中心化身的数字身份验证系统。针对上述问题，本申请实施例中的数字身份验证系统包括区块链网络端、持有者端、发行者端和验证者端，其中，区块链网络端部署有用于数据存储和权限管理的多个区块链智能合约，通过持有者端、发行者端、验证者端分别与区块链网络端中部署的不同区块链智能合约的交互，不仅可以有效保证各类数据存储有效、数据存储分离，还可以实现对各类角色的权限进行校验，进而提升区块链网络的安全性和信任度。需要说明的是，分布式数字身份不止是人，包括组织，甚至未来也包括物品。这些人或者组织、物品不简单依靠于原先中心化权威机构，无法被拿走或者删除，而且是终身携带的身份。分布式身份标识是由字符串组成的标识符，用来代表一个数字身份，是一种去中心化的可验证的数字标识符，不需要中央注册机构就可以实现全球唯一性，具有分布式、自主可控、跨链复用等特点。通常，一个实体可以拥有多个身份，每个身份被分配唯一的DID值，以及与之关联的非对称密钥。DID具体解析为DID文档，DID Document包括DID的唯一标识码，公钥列表和公钥的详细信息，以及DID持有者的其他属性描述。可验证声明提供了一种规范来描述实体所具有的某些属性，实现基于证据的信任。DID持有者，可以通过可验证声明，向其他实体证明自己的某些属性是可信的。同时，结合数字签名和零知识证明等密码学技术，可以使得声明更加安全可信，并进一步保障用户隐私不被侵犯。为便于对本申请进行理解，下面结合具体实施例对本申请提供的技术方案进行详细说明。图1为本申请实施例所提供的一种数字身份验证系统100的结构示意图。如图1所示，本申请实施例提供的数字身份验证系统100包括区块链网络端110、持有者端120、发行者端130和验证者端140，所述区块链网络端110部署有用于数据存储和权限管理的多个区块链智能合约；其中：所述持有者端120，用于向所述区块链网络端110注册DID数据，以获取DID文档，并向所述发行者端130发送可验证声明的获取请求；所述发行者端130，用于向所述区块链网络端110注册DID数据使所述发行者端130的用户成为发行者，并在接收到所述持有者端120发送的所述获取请求后，向所述持有者端120发行可验证声明；所述验证者端140，用于在接收到所述持有者端120发送的服务请求后，通过调用所述区块链网络端110的区块链智能合约对所述持有者端120的用户身份、所述发行者端130的用户身份和所述发行者端130的用户签名进行验证，并在验证通过后，为所述持有者端120的用户提供与所述服务请求匹配的目标服务。在具体实施中，数字身份验证系统100包括区块链网络端110、持有者端120、发行者端130和验证者端140，其中，事先在区块链网络端110部署有多个区块链智能合约，不同区块链智能合约的用途不同，这里涉及的区块链智能合约主要是用于数据存储和权限管理的，比如，对DID数据、发行者数据、凭证主题数据的存储，对各类目标角色的权限管理，通过持有者端120、发行者端130、验证者端140分别与区块链网络端110中部署的不同区块链智能合约的交互，可以有效保证各类数据存储有效、数据存储分离、实现对各类角色的权限进行校验，进而提升区块链网络的安全性和信任度。需要说明的是，在数字身份验证VC架构中，有以下几种参与者：发行者，拥有用户数据并能开具VC的实体，如政府、银行、大学等机构和组织，发行者可以吊销持有者的VC。这里，发行者可分为根发行者、一级发行者、普通发行者的三级角色架构来设计发行者的注册及凭证授权，当然，也可以设置成其他级别的角色架构，不限于三级角色架构。持有者，持有者即用户，用户向发行者请求、收到、持有VC的实体，向验证者出示VC，开具的VC可以自我保存，方便以后再次使用。持有者可以将一个或多个VC转让给其他人，持有者可以将一个或多个VC呈现给验证者。持有者可以删除自己的VC。验证者，接受持有者的VC并进行验证，由此可以提供给出示VC的持有者某种类型的服务。标识符注册机构，维护DIDs的数据库，如某条区块链、分布式账本，对于本申请为区块链网络，之所以需有标识符注册机构，是因为验证者要验证持有者出具的VC，验证颁发VC的发行者的DID等。下面对数字身份验证系统100的工作流程进行阐述，包括以下步骤：1)持有者端120向区块链网络端110申请对DID数据进行注册，注册完毕后，会根据DID数据生成DID文档，该持有者端120的用户的DID数据和DID文档会保存在区块链网络中；发行者端130向区块链网络端110申请对DID数据进行注册，注册完毕后，会根据DID数据生成DID文档，该发行者端130的用户的DID数据和DID文档会保存在区块链网络中，发行者端130的用户成为发行者，发行者有权限为持有者发行VC；2)持有者端120向发行者端130发送针对自身DID数据的VC的获取请求；3)发行者端130在收到获取请求后，查询区块链网络中是否注册有该持有者端120的用户的DID数据，以验证该持有者端120的用户身份的合法性和有效性，并在验证通过后，向该持有者端120发送该持有者的用户的DID数据的VC；4)持有者端120的用户持有自身的DID数据和VC向验证者端140发送服务请求；5)验证者端140在收到服务请求后，通过区块链网络对持有者端120的用户身份、给与该持有者端120发行VC的发行者端130的用户身份和该发行者端130的用户签名进行验证，并在验证通过后，为该持有者端120的用户提供与服务请求匹配的目标服务。这里，持有者可以为个人、发行者可以为公安机构、验证者可以为购物网站。区块链智能合约是一种旨在以信息化方式传播、验证或执行合同的计算机协议。智能合约允许在没有第三方的情况下进行可信交易，这些交易可追踪且不可逆转。现有DID、VC模型技术的存储，可存储在如区块链、分布式数据库等介质上，若在区块链存储，如何存储的合约定义，合约架构没有通用和统一的模型，属于业界比较新的未成熟技术。对于此，本申请设计了基于DID数据存储及权限管理合约架构，即四层分层机构，图2示出了本申请实施例所提供的区块链网络端110的结构示意图，其中，区块链网络端110包括数据合约模块111、权限合约模块112、角色合约模块113和控制合约模块114；其中，所述数据合约模块111，用于存储和管理DID数据、DID文档、发行者数据、凭证主题数据；所述权限合约模块112，用于管理各类目标角色的调用权限，所述目标角色包括发行者和合约管理员；所述角色合约模块113，用于管理各类所述目标角色的角色数据；控制合约模块114，用于调用所述数据合约模块111，以提供相应的代理服务。在具体实施中，可以通过区块链网络端110中的数据合约模块111、权限合约模块112、角色合约模块113和控制合约模块114，来管理和存储DID、发行者、凭证主题的数据及权限功能。这里，通过区块链网络端110中的4层架构，使得各层次职责分明，DID数据、发行者数据、配置主题数据可有效存储和权限控制。通过控制合约模块114可以保证合约业务逻辑架构可不断升级；通过数据合约模块111保证DID数据、发行者数据、配置主题数据存储有效及各不同类型数据存储分离；通过权限合约模块112保证各类角色的权限校验，以及合约地址的管理；通过角色合约模块113保证发行者角色、合约管理员角色的管理。进一步地，所述区块链网络端110用于根据以下步骤部署各个区块链智能合约：在目标区块链网络上部署所述角色合约模块113中的角色合约，并设置初始化的目标角色，得到所述角色合约的合约地址；在所述目标区块链网络上部署所述权限合约模块112中的权限控制合约和调用控制合约，并将所述目标角色设置在所述权限控制合约和所述调用控制合约中；在所述目标区块链网络上部署所述数据合约模块111中的DID数据合约、发行者合约和凭证主题合约，得到所述DID数据合约、所述发行者合约和所述凭证主题合约的合约地址；在所述目标区块链网络上部署所述控制合约模块114中的DID代理合约、发行者代理合约、凭证主题代理合约和签名代理合约，得到所述DID代理合约、所述发行者代理合约、所述凭证主题代理合约和所述签名代理合约的合约地址。这里，控制合约模块114中部署有DID代理合约、发行者代理合约、凭证主题代理合约和签名代理合约，控制合约模块114提供对外提供接口，对数据做逻辑业务处理，并调用下层数据合约模块111，控制合约可不断升级。控制合约模块114主要包括上层业务的判断、签名核验。DID代理合约为DID数据合约的代理层，功能主要包括注册DID、获取DID详情、获取DID版本，如注册DID：进行业务判断，调用DID数据合约进行创建。发行者合约为发行者合约的代理层，功能主要包括发行者新增、变更、查询，如发行者新增进行业务判断，校验签名，调用发行者合约进行注册。凭证主题代理合约为凭证主题合约的代理层，功能主要包括凭证主题的新增、变更、查询，如凭证主题的新增，首先进行业务判断，然后调用凭证主题合约进行创建。签名代理合约用于签名校验，由于发行者的新增需要通过联盟、组织、机构的授权，故这里需要进行签名校验。DID代理合约、发行者代理合约、凭证主题代理合约和签名代理合约由于业务的变更可重新部署，可通过调用控制合约升级，步骤包括重新部署代理合约，得到新的地址，通过管理员角色账号调用控制合约的update方法，指定新的代理地址，完成升级。这里，数据合约模块111中部署有DID数据合约、发行者合约和凭证主题合约，每个合约均持有权限控制子合约及调用控制子合约；数据合约模块111专注于数据结构的定义、数据内容的存储和数据读写的直接接口。其中，权限控制子合约用于控制发行者数据和凭证主题数据的发行者变更、凭证主题变更权限校验；调用控制子合约用于DID数据合约、发行者数据合约、凭证主题合约指定合约地址调用方是否有权限调用。DID数据合约核心功能用于DID注册及DID文档保存，包括注册DID、获取DID详情、获取DID版本等，如注册DID：通过调用控制合约判断调用合约是否是指定的DID代理合约地址，保存DID数据。发行者合约发行者数据合约，包括对发行者新增、修改、变更。如注册发行者，通过调用控制合约判断调用合约是否是指定的发行者合约，通过权限控制合约判断调用用户是否可添加发行者，审核通过后，保存发行者信息，通过调用角色合约保存发行者地址。凭证主题合约用于凭证主题的新增、变更，如凭证主题新增：通过调用控制合约判断调用合约是否是指定的凭证主题代理合约，通过权限控制合约判调用用户是否可添加凭证主题，审核通过后，保存凭证主题。这里，权限合约模块112中部署有权限控制合约和调用控制合约，权限合约模块112可以管理各类角色的调用权限，管理数据合约模块111及控制合约模块114的合约地址，控制合约的调用权限。权限控制合约用于发行者权限的定义及权限的校验，核心方法权限检测法)：输入参数区块链地址、权限类型，权限类型包括变更普通发行者、变更一级发行者、变更根发行者、变更一级主题凭证、变更普通主题凭证，分别在数据合约-发行者合约进行发行者变更时调用，和凭证主题合约进行凭证变更时调用。权限定义：根发行者可新增一级发行者、一级凭证主题；一级发行者可新增普通发行者、普通凭证主题。权限检测法的调用过程为通过调用角色合约判断addr是什么角色，再根据角色类判断是否有当前权限类的权限，来确定是否有某个操作的权限。调用控制合约用于存储控制合约及数据合约地址、校验控制合约调用数据合约权限。由于本架构中控制合约层的合约可在一定时候进行动态升级，故调用控制合约需要控制谁有权限升级合约，以及哪个控制合约可调用数据合约。调用控制合约中部署数据合约地址、变更控制合约地址必须由角色合约中的合约管理员操作；控制控制合约模块114调用数据合约权限，数据合约需要持有调用控制合约用于保存的调用控制合约地址是否存在判断，若存在则当前调用控制合约可调用数据合约。其中，数据合约模块111不可升级，保存的DID、发行者、配置主题的底层数据；控制合约模块114可升级，由于业务变更等原因进行重新部署，重新指定新的合约可调用数据合约。核心方法一register、update：注册控制合约/数据合约，修改控制合约，输入参数：合约名称，合约地址，其中，操作步骤包括判断当前操作员是否是合约管理员，存储并更新合约名称对应的合约地址；核心方法二lookup，输入合约名称，获取指定合约名称的合约地址，如：DID代理合约调用DID数据合约时通过调用lookup方法，获取指定的DID代理合约地址可调用DID数据合约。这里，角色合约模块113中部署有角色合约，角色合约模块113可以对所有角色进行管理，包括发行者和合约管理员，其中，合约管理员可自行添加合约管理，用于控制合约部署升级。一示例中，根发行者可注册身份凭证主题、注册公安机构发行者，并授权公安机构发行身份VC；公安机构可为一般DID发行身份VC身份凭证即为身份证的证明。根发行者可注册大学认证配置主题、注册教育局发行者，并授权教育局可发行大学授权认证VC；教育局可注册大学学位认证配置主题、注册大学发行者等大学，并授权大学可发行大学学位认证VC；大学可为一般DID发行大学学位VC。一示例中，若发行者为三级角色架构，根发行者可以执行的操作：管理一级凭证主题、注册授权一级发行者。一级发行者可以执行的操作：管理普通凭证主题、注册授权普通发行者、具备发行指定一级凭证。普通发行者可以执行的操作：具备发行指定普通凭证。需要说明的是，角色合约的核心功能包括新增角色和删除角色。新增角色包括但不限于新增根发行者、一级发行者、合约管理员，具体操作是输入参数为地址、角色编号来实现对角色的新增，其中，根发行者、一级发行者可被数据合约中的发行者合约新增时调用添加；合约管理员可以直接通过角色合约自行添加；删除角色的具体操作是输入参数为地址、角色编号来实现对角色的删除，其中，删除跟发行者、一级发行者可被数据合约中的发行者合约发行者注销时调用删除，合约管理员可以直接通过角色合约自行删除。进一步地，所述区块链网络端110还用于根据以下步骤对所述控制合约模块114中的区块链智能合约进行升级：当检测到目标业务发生变更时，重新在目标区块链网络上部署所述控制合约模块114中的区块链智能合约，得到所述控制合约模块114中的区块链智能合约的合约地址；将更新后的所述控制合约模块114中的区块链智能合约的合约地址写入所述权限合约模块112中的所述调用控制合约中。在具体实施中，若用户实际业务发生变更时，可升级控制合约模块114，具体地，用户重新部署DID代理合约、发行者代理合约、凭证主题代理合约以及签名代理合约，并得到各个合约的地址，进而，合约管理员将新的控制合约模块114中合约的合约地址写入到调用控制合约，至此，调用控制合约可控制只有新的控制合约模块114中的合约才能调用数据合约模块111中的合约。进一步地，所述持有者端120用于根据以下步骤存储DID数据：调用所述控制合约模块114中的DID代理合约，以通过所述DID代理合约判断所述持有者端120的用户是否重复注册；若否，调用所述数据合约模块111中的DID数据合约，并通过所述权限合约模块112中的调用控制合约判断所述DID代理合约的合约地址与第一指定调用合约的合约地址是否一致；若是，从所述数据合约模块111中的DID数据合约中获取并存储所述持有者端120的用户的DID数据。在具体实施中，持有者端120的用户通过调用DID代理合约可以获取并存储DID数据，其中，持有者端120的用户存储DID数据之外，还存储DID文档、创建时间、DID方法、DID公钥等数据，具体地，持有端用户调用DID代理合约，通过DID代理合约进行用户是否重复注册的简单判断，之后调用DID数据合约，通过调用控制合约判断该DID代理合约的地址是否与第一指定调用合约的地址一致，若一致，获取并存储DID文档。进一步地，所述发行者端130用于根据以下步骤新增凭证主题数据：调用所述控制合约模块114中的凭证主题代理合约，以通过所述凭证主题代理合约判断所述发行者端130的用户的凭证主题是否重复注册；若否，调用所述数据合约模块111中的凭证主题合约，并通过所述权限合约模块112中的调用控制合约判断所述凭证主题合约与第二指定调用合约是否一致，以及通过所述权限合约模块112中的权限控制合约判断所述发行者端130的用户是否有权限添加凭证主题数据；若审核通过，则新增和保存所述发行者端130的用户的凭证主题数据。在具体实施中，发行者端130的用户可以通过调用凭证主题代理合约新增凭证主题，其中，凭证主题新增内容包括凭证主题名称、凭证类型、凭证格式等信息，具体地，调用凭证主题代理合约，通过凭证主题代理合约判断凭证主题是否重复注册，调用凭证主题合约，通过调用控制合约判断被调用的该凭证主题代理合约是否为制定的凭证主题代理合约，若是，通过权限控制合约判断调用用户是否可添加凭证主题，审核通过后，保存凭证主题。这里，若发行者为三级角色架构，根发行者可注册一级发行者的一级凭证主题，一级发行者可注册普通发行者的普通凭证主题。需要说明的是，根发行者可创建身份VC凭证主题，凭证主题合约通过调用权限控制合约，使用权限检测法，通过调用角色数据合约判断用户是不是根发行者，若是根发行者，则可创建身份VC凭证主题，凭证主题合约保存身份VC凭证详情。进一步地，所述发行者端130用于根据以下步骤注册身份：调用所述控制合约模块114中的发行者代理合约，以通过所述发行者代理合约判断所述发行者端130的用户的身份是否重复校验；若否，校验所述发行者端130的用户的签名数据；若校验通过，则调用所述数据合约模块111中的发行者合约，并通过所述权限合约模块112中的调用控制合约判断所述发行者合约与第三指定调用合约是否一致，以及通过所述权限合约模块112中的权限控制合约判断所述发行者端130的用户是否有权限添加发行者数据；若审核通过，则注册和保存发行者数据。在具体实施中，发行者通过调用发行者合约进行身份注册，其中，发行者注册内容包括发行者DID、发行者需要发现的凭证主题、发行者的签名信息，具体地，调用发行者合约，进行发行者是否重复校验，判断凭证主题是否已经新增等简单业务逻辑，通过签名代理合约校验签名，调用发行者合约进行注册，继续调用发行者合约，通过调用控制合约判断被调用的发行者代理合约是否为指定的发行者合约，若是，通过权限控制合约判断调用用户是否可添加发行者，审核通过后，保存发行者信息，并通过调用角色合约保存发行者地址。这里，若发行者为三级角色架构，根发行者可添加一级发行者，根发行者可注册一级发行者、一级发行者可注册普通发行者。需要说明的是，根发行者可创建身份发行者，发行者合约通过调用权限控制合约，在调用权限检测方法，通过调用角色合约判断用户是不是根发行者，若是根发行者，则可创建身份发行者；发行者合约保存身份发行者详情，通过调用角色合约保存身份发行者地址。进一步地，所述发行者端130用于根据以下步骤发行可验证声明：调用所述控制合约模块114中的DID代理合约，以通过所述DID代理合约转发所述获取请求至所述数据合约模块111中的DID数据合约，以便所述DID数据合约判断发送所述获取请求的用户的DID数据是否存在；若存在，向发送所述获取请求的持有者端120发行可验证声明。在具体实施中，发行者可以发行VC，具体地，发行者发行VC，首先判断用户DID是否存在，若存在，调用DID代理合约，DID代理合约转发请求到DID数据合约，DID数据合约判断用户DID是否存在，返回结果，若用户DID有效，发行者可根据实际情况发行VC。进一步地，所述验证者端140用于根据以下步骤验证可验证声明：调用所述控制合约模块114中的DID代理合约，通过所述DID代理合约将所述服务请求转发至所述数据合约模块111中的DID数据合约，以通过所述DID数据合约判断发送所述服务请求的用户的DID数据是否存在；若存在，调用所述控制合约模块114中的发行者代理合约，通过所述发行者代理合约将所述服务请求转发至所述数据合约模块111中的发行者合约，以通过所述发行者合约判断提供给发送所述服务请求的用户的可验证声明的发行者是否注册、是否有权限发行可验证声明；若所述可验证声明的发行者有注册、有权限发行可验证声明，则确定发送所述服务请求的用户的可验证声明通过审核。在具体实施中，验证者端140可以验证持有者端120的用户VC，具体地，验证者端140在验证VC时，首先需要验证用户DID和发行者是否有效，需要调用DID代理合约和发行者代理合约，通过调用DID代理合约转发请求到DID数据合约，通过DID数据合约判断DID是否存在，若存在返回结果；通过调用发行者代理合约，将转发请求到发行者合约，发行者合约判断发行者是否注册、是否有权限发行当前凭证主题；若持有者端120的用户的DID和发行者DID均有效，验证者端140的用户可以根据实际请求验证VC。在本申请实施例中，中的数字身份验证系统包括区块链网络端、持有者端、发行者端和验证者端，其中，区块链网络端部署有用于数据存储和权限管理的多个区块链智能合约，通过持有者端、发行者端、验证者端分别与区块链网络端中部署的不同区块链智能合约的交互，不仅可以有效保证各类数据存储有效、数据存储分离，还可以实现对各类角色的权限进行校验，进而提升区块链网络的安全性和信任度。基于同一申请构思，本申请实施例中还提供了与上述实施例提供的数字身份验证系统对应的数字身份验证方法，由于本申请实施例中的方法解决问题的原理与本申请上述实施例的数字身份验证系统相似，因此方法的实施可以参见系统的实施，重复之处不再赘述。图3示出了本申请实施例所提供的一种数字身份验证方法的流程图；一种数字身份验证方法，应用于数字身份验证系统中的区块链网络端，所述数字身份验证方法包括以下步骤：S301：在接收到持有者端针对DID数据的注册请求后，为所述持有者端的用户分配DID数据和DID文档；S302：在接收到发行者端针对DID数据的注册请求后，使所述发行者端的用户成为发行者，以供所述发行者端在接收到所述持有者端发送的针对可验证声明获取请求后，为所述持有者端提供可验证声明；S303：在接收到验证者端发送的针对所述持有者端的身份的验证请求后，调用区块链智能合约对所述持有者端的用户身份、所述发行者端的用户身份和所述发行者端的用户签名进行验证，以便所述验证者端在验证通过后为所述持有者端的用户提供与所述服务请求匹配的目标服务。在一种可能的实施方式中，所述区块链网络端包括数据合约模块、权限合约模块、角色合约模块和控制合约模块；其中，所述数据合约模块，用于存储和管理DID数据、DID文档、发行者数据、凭证主题数据；所述权限合约模块，用于管理各类目标角色的调用权限，所述目标角色包括发行者和合约管理员；所述角色合约模块，用于管理各类所述目标角色的角色数据；控制合约模块，用于调用所述数据合约模块，以提供相应的代理服务。在一种可能的实施方式中，根据以下步骤部署各个区块链智能合约：在目标区块链网络上部署所述角色合约模块中的角色合约，并设置初始化的目标角色，得到所述角色合约的合约地址；在所述目标区块链网络上部署所述权限合约模块中的权限控制合约和调用控制合约，并将所述目标角色设置在所述权限控制合约和所述调用控制合约中；在所述目标区块链网络上部署所述数据合约模块中的DID数据合约、发行者合约和凭证主题合约，得到所述DID数据合约、所述发行者合约和所述凭证主题合约的合约地址；在所述目标区块链网络上部署所述控制合约模块中的DID代理合约、发行者代理合约、凭证主题代理合约和签名代理合约，得到所述DID代理合约、所述发行者代理合约、所述凭证主题代理合约和所述签名代理合约的合约地址。在一种可能的实施方式中，根据以下步骤对所述控制合约模块中的区块链智能合约进行升级：当检测到目标业务发生变更时，重新在目标区块链网络上部署所述控制合约模块中的区块链智能合约，得到所述控制合约模块中的区块链智能合约的合约地址；将更新后的所述控制合约模块中的区块链智能合约的合约地址写入所述权限合约模块中的所述调用控制合约中。在一种可能的实施方式中，根据以下步骤存储DID数据；接收所述持有者端针对所述控制合约模块中的DID代理合约的调用请求，判断所述持有者端的用户是否重复注册；若否，调用所述数据合约模块中的DID数据合约，判断所述DID代理合约的合约地址与第一指定调用合约的合约地址是否一致；若是，从所述数据合约模块中的DID数据合约中获取并存储所述持有者端的用户的DID数据。在一种可能的实施方式中，根据以下步骤新增凭证主题数据：接收所述发行者端针对所述控制合约模块中的凭证主题代理合约的调用请求，判断所述发行者端的用户的凭证主题是否重复注册；若否，调用所述数据合约模块中的凭证主题合约，并判断所述凭证主题合约与第二指定调用合约是否一致，以及通过所述权限合约模块中的权限控制合约判断所述发行者端的用户是否有权限添加凭证主题数据；若审核通过，则新增和保存所述发行者端的用户的凭证主题数据。在一种可能的实施方式中，根据以下步骤注册身份：接收所述发行者端针对所述控制合约模块中的发行者代理合约的调用请求，判断所述发行者端的用户的身份是否重复校验；若否，校验所述发行者端的用户的签名数据；若校验通过，则调用所述数据合约模块中的发行者合约，并通过所述权限合约模块中的调用控制合约判断所述发行者合约与第三指定调用合约是否一致，以及通过所述权限合约模块中的权限控制合约判断所述发行者端的用户是否有权限添加发行者数据；若审核通过，则注册和保存发行者数据。在一种可能的实施方式中，根据以下步骤发行可验证声明：接收所述发行者端针对所述控制合约模块中的DID代理合约的调用请求，通过所述DID代理合约转发所述获取请求至所述数据合约模块中的DID数据合约，判断发送所述获取请求的用户的DID数据是否存在；若存在，以供所述发行者端向发送所述获取请求的持有者端发行可验证声明。在一种可能的实施方式中，根据以下步骤验证可验证声明：接收所述验证者端针对所述控制合约模块中的DID代理合约的调用请求，通过所述DID代理合约将所述服务请求转发至所述数据合约模块中的DID数据合约，通过所述DID数据合约判断发送所述服务请求的用户的DID数据是否存在；若存在，调用所述控制合约模块中的发行者代理合约，通过所述发行者代理合约将所述服务请求转发至所述数据合约模块中的发行者合约，以通过所述发行者合约判断提供给发送所述服务请求的用户的可验证声明的发行者是否注册、是否有权限发行可验证声明；若所述可验证声明的发行者有注册、有权限发行可验证声明，则确定发送所述服务请求的用户的可验证声明通过审核。在本申请实施例中，通过持有者端、发行者端、验证者端分别与区块链网络端中部署的不同区块链智能合约的交互，不仅可以有效保证各类数据存储有效、数据存储分离，还可以实现对各类角色的权限进行校验，进而提升区块链网络的安全性和信任度。基于同一申请构思，参见图4所示，为本申请实施例提供的一种电子设备400的结构示意图，包括：处理器410、存储器420和总线430，所述存储器420存储有所述处理器410可执行的机器可读指令，当电子设备400运行时，所述处理器410与所述存储器420之间通过所述总线430进行通信，所述机器可读指令被所述处理器410运行时执行如上述实施例中任一所述的数字身份验证方法的步骤。具体地，所述机器可读指令被所述处理器410执行时可以执行如下处理：在接收到持有者端针对DID数据的注册请求后，为所述持有者端的用户分配DID数据和DID文档；在接收到发行者端针对DID数据的注册请求后，使所述发行者端的用户成为发行者，以供所述发行者端在接收到所述持有者端发送的针对可验证声明获取请求后，为所述持有者端提供可验证声明；在接收到验证者端发送的针对所述持有者端的身份的验证请求后，调用区块链智能合约对所述持有者端的用户身份、所述发行者端的用户身份和所述发行者端的用户签名进行验证，以便所述验证者端在验证通过后为所述持有者端的用户提供与所述服务请求匹配的目标服务。本申请实施例中，通过持有者端、发行者端、验证者端分别与区块链网络端中部署的不同区块链智能合约的交互，不仅可以有效保证各类数据存储有效、数据存储分离，还可以实现对各类角色的权限进行校验，进而提升区块链网络的安全性和信任度。基于同一申请构思，本申请实施例还提供了一种计算机可读存储介质，所述计算机可读存储介质上存储有计算机程序，所述计算机程序被处理器运行时执行上述实施例提供的数字身份验证方法的步骤。具体地，所述存储介质能够为通用的存储介质，如移动磁盘、硬盘等，所述存储介质上的计算机程序被运行时，能够执行上述数字身份验证方法，通过持有者端、发行者端、验证者端分别与区块链网络端中部署的不同区块链智能合约的交互，不仅可以有效保证各类数据存储有效、数据存储分离，还可以实现对各类角色的权限进行校验，进而提升区块链网络的安全性和信任度。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的系统和装置的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。在本申请所提供的几个实施例中，应所述理解到，所揭露的系统、装置和方法，可以通过其它的方式实现。以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，又例如，多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些通信接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。所述功能如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个处理器可执行的非易失的计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者所述技术方案的部分可以以软件产品的形式体现出来，所述计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以权利要求的保护范围为准。
