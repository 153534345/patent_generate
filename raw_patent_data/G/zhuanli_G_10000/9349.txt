标题title
跨子网交互方法及装置
摘要abst
本说明书提供一种跨子网交互方法及装置。所述方法应用于第一节点设备，第一节点设备上部署有区块链主网中的主网节点，且第一节点设备上维护有区块链主网中各主网节点分别所处的节点设备之间的网络拓扑结构；其中，部署有区块链子网中的子网节点的节点设备上还部署有主网节点；该方法包括：获取由第一区块链子网中的源子网节点向第二区块链子网中的目标子网节点发送的跨链消息；在确定第一节点设备并非目标子网节点所处的目标节点设备的情况下，在网络拓扑结构中确定第一节点设备与目标节点设备之间的转发路径，并将跨链消息转发至转发路径上作为下一跳的第二节点设备；在确定第一节点设备为目标节点设备的情况下，将跨链消息转发至目标子网节点。
权利要求书clms
1.一种跨子网交互方法，应用于第一节点设备，第一节点设备上部署有区块链主网中的主网节点，且第一节点设备上维护有所述区块链主网中各主网节点分别所处的节点设备之间的网络拓扑结构；其中，部署有区块链子网中的子网节点的节点设备上还部署有主网节点；所述方法包括：获取由第一区块链子网中的源子网节点向第二区块链子网中的目标子网节点发送的跨链消息；在确定第一节点设备并非所述目标子网节点所处的目标节点设备的情况下，在所述网络拓扑结构中确定第一节点设备与所述目标节点设备之间的转发路径，并将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备；在确定第一节点设备为所述目标节点设备的情况下，将所述跨链消息转发至所述目标子网节点。2.根据权利要求1所述的方法，所述网络拓扑结构是基于所述区块链主网中各主网节点之间的网络连接关系而生成。3.根据权利要求2所述的方法，所述网络连接关系包括：所述区块链主网中的共识主网节点之间建立的共识链路，以及共识主网节点与非共识主网节点之间建立的同步链路。4.根据权利要求1所述的方法，所述获取由第一区块链子网中的源子网节点向第二区块链子网中的目标子网节点发送的跨链消息，包括：在所述源子网节点部署于第一节点设备的情况下，获取所述源子网节点生成的所述跨链消息；在所述源子网节点未部署于第一节点设备的情况下，获取其他节点设备转发的所述跨链消息。5.根据权利要求1所述的方法，所述跨链消息中包含所述目标子网节点的身份信息，所述方法还包括：通过将第一节点设备在本地部署的各区块链节点对应的身份信息与所述目标子网节点的身份信息进行比较，确定第一节点设备是否为所述目标节点设备。6.根据权利要求5所述的方法，所述身份信息包括以下至少一项：所述目标子网节点的节点标识、所述目标子网节点的公钥、第二区块链子网的网络标识。7.根据权利要求1所述的方法，所述转发路径由第一节点设备基于最短路径算法或最短时延算法所确定。8.根据权利要求1所述的方法，所述将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备，包括：通过第一节点设备上的主网节点与第二节点设备上的主网节点之间建立的网络链路，将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备。9.根据权利要求8所述的方法，所述网络链路在第一节点设备上运行的通讯插件与第二节点设备上运行的通讯插件之间建立；其中，同一节点设备上的主网节点与子网节点共享该节点设备上运行的通讯插件。10.根据权利要求1所述的方法，所述在所述网络拓扑结构中确定第一节点设备与所述目标节点设备之间的转发路径，包括：在本地基于所述网络拓扑结构计算第一节点设备与所述目标节点设备之间的转发路径；或者，将所述跨链消息中包含的转发路径确定为第一节点设备与所述目标节点设备之间的转发路径，其中，所述跨链消息中包含的转发路径由所述源子网节点所处的节点设备所计算得到。11.根据权利要求10所述的方法，还包括：在所述跨链消息中包含转发路径的情况下，第一节点设备基于所述跨链消息中包含的转发路径确定作为下一跳的第二节点设备是否可达；在确定第二节点设备可达的情况下，将所述跨链消息转发至第二节点设备；在确定第二节点设备不可达的情况下，基于第一节点设备上维护的所述网络拓扑结构重新计算第一节点设备与所述目标节点设备之间的转发路径。12.根据权利要求1所述的方法，所述跨链消息由所述源子网节点采用对称加密、非对称加密或数字信封的方式进行加密。13.根据权利要求1所述的方法，所述跨链消息为所述源子网节点向所述目标子网节点发送的请求消息；或者，所述跨链消息为所述源子网节点响应于来自所述目标子网节点的请求消息返回的应答消息。14.一种跨子网交互装置，应用于第一节点设备，第一节点设备上部署有区块链主网中的主网节点，且第一节点设备上维护有所述区块链主网中各主网节点分别所处的节点设备之间的网络拓扑结构；其中，部署有区块链子网中子网节点的节点设备上还部署有主网节点；所述装置包括：获取消息单元，用于获取由第一区块链子网中的源子网节点向第二区块链子网中的目标子网节点发送的跨链消息；转发路径单元，用于在确定第一节点设备并非所述目标子网节点所处的目标节点设备的情况下，在所述网络拓扑结构中确定第一节点设备与所述目标节点设备之间的转发路径，并将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备；转发节点单元，用于在确定第一节点设备为所述目标节点设备的情况下，将所述跨链消息转发至所述目标子网节点。15.一种电子设备，包括：处理器；用于存储处理器可执行指令的存储器；其中，所述处理器通过运行所述可执行指令以实现如权利要求1-13中任一项所述的方法。16.一种计算机可读存储介质，其上存储有计算机指令，该指令被处理器执行时实现如权利要求1-13中任一项所述方法的步骤。
说明书desc
技术领域本说明书一个或多个实施例涉及区块链技术领域，尤其涉及一种跨子网交互方法及装置。背景技术区块链技术构建在传输网络之上。区块链网络中的节点利用链式数据结构来验证与存储数据，并采用分布式节点共识算法来生成和更新数据。在一些区块链网络中，部分节点有时存在实现小范围交易的需求，以避免其他节点获得这些交易及其相关数据。因此可以在区块链主网的基础上进一步建立区块链子网。然而，由于不同区块链子网之间相互隔离，不存在直接相连的网络链路，但各区块链子网之间又存在信息共享与数据交互的需求，因此，如何使相互隔离的区块链子网之间能够进行数据交互是在该场景下亟待解决的问题。发明内容有鉴于此，本说明书一个或多个实施例提供一种跨子网交互方法、装置、电子设备及存储介质。为实现上述目的，本说明书一个或多个实施例提供技术方案如下：根据本说明书一个或多个实施例的第一方面，提出了一种跨子网交互方法，应用于第一节点设备，第一节点设备上部署有区块链主网中的主网节点，且第一节点设备上维护有所述区块链主网中各主网节点分别所处的节点设备之间的网络拓扑结构；其中，部署有区块链子网中的子网节点的节点设备上还部署有主网节点；所述方法包括：获取由第一区块链子网中的源子网节点向第二区块链子网中的目标子网节点发送的跨链消息；在确定第一节点设备并非所述目标子网节点所处的目标节点设备的情况下，在所述网络拓扑结构中确定第一节点设备与所述目标节点设备之间的转发路径，并将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备；在确定第一节点设备为所述目标节点设备的情况下，将所述跨链消息转发至所述目标子网节点。根据本说明书一个或多个实施例的第二方面，提出了一种跨子网交互装置，应用于第一节点设备，第一节点设备上部署有区块链主网中的主网节点，且第一节点设备上维护有所述区块链主网中各主网节点分别所处的节点设备之间的网络拓扑结构；其中，部署有区块链子网中子网节点的节点设备上还部署有主网节点；所述装置包括：获取消息单元，用于获取由第一区块链子网中的源子网节点向第二区块链子网中的目标子网节点发送的跨链消息；转发路径单元，用于在确定第一节点设备并非所述目标子网节点所处的目标节点设备的情况下，在所述网络拓扑结构中确定第一节点设备与所述目标节点设备之间的转发路径，并将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备；转发节点单元，用于在确定第一节点设备为所述目标节点设备的情况下，将所述跨链消息转发至所述目标子网节点。根据本说明书一个或多个实施例的第三方面，提出了一种电子设备，包括：处理器；用于存储处理器可执行指令的存储器；其中，所述处理器通过运行所述可执行指令以实现如第一方面中任一项所述的方法。根据本说明书一个或多个实施例的第四方面，提出了一种计算机可读存储介质，其上存储有计算机指令，该指令被处理器执行时实现如第一方面中任一项所述方法的步骤。附图说明图1是一示例性实施例提供的一种创建智能合约的示意图。图2是一示例性实施例提供的一种调用智能合约的示意图。图3是一示例性实施例提供的一种创建和调用智能合约的示意图。图4是一示例性实施例提供的一种基于区块链主网组建区块链子网的示意图。图5是一示例性实施例提供的一种跨链交互的应用场景图。图6是一示例性实施例提供的一种跨子网交互的应用场景图。图7是一示例性实施例提供的一种跨子网交互方法的流程图。图8是一示例性实施例提供的一种设备的结构示意图。图9是一示例性实施例提供的一种跨子网交互装置的框图。具体实施方式这里将详细地对示例性实施例进行说明，其示例表示在附图中。下面的描述涉及附图时，除非另有表示，不同附图中的相同数字表示相同或相似的要素。以下示例性实施例中所描述的实施方式并不代表与本说明书一个或多个实施例相一致的所有实施方式。相反，它们仅是与如所附权利要求书中所详述的、本说明书一个或多个实施例的一些方面相一致的装置和方法的例子。需要说明的是：在其他实施例中并不一定按照本说明书示出和描述的顺序来执行相应方法的步骤。在一些其他实施例中，其方法所包括的步骤可以比本说明书所描述的更多或更少。此外，本说明书中所描述的单个步骤，在其他实施例中可能被分解为多个步骤进行描述；而本说明书中所描述的多个步骤，在其他实施例中也可能被合并为单个步骤进行描述。区块链一般被划分为三种类型：公有链，私有链和联盟链。此外，还有多种类型的结合，比如私有链+联盟链、联盟链+公有链等不同组合形式。其中去中心化程度最高的是公有链。公有链以比特币、以太坊为代表，加入公有链的参与者可以读取链上的数据记录、参与交易以及竞争新区块的记账权等。而且，各参与者可自由加入以及退出网络，并进行相关操作。私有链则相反，该网络的写入权限由某个组织或者机构控制，数据读取权限受组织规定。简单来说，私有链可以为一个弱中心化系统，参与节点具有严格限制且少。这种类型的区块链更适合于特定机构内部使用。联盟链则是介于公有链以及私有链之间的区块链，可实现“部分去中心化”。联盟链中各个节点通常有与之相对应的实体机构或者组织；参与者通过授权加入网络并组成利益相关联盟，共同维护区块链运行。不论是公有链、私有链还是联盟链，都可能提供智能合约的功能。区块链上的智能合约是在区块链系统上可以被交易触发执行的合约。智能合约可以通过代码的形式定义。以以太坊为例，支持用户在以太坊网络中创建并调用一些复杂的逻辑，这是以太坊区别于比特币区块链技术的最大挑战。以太坊作为一个可编程区块链的核心是以太坊虚拟机，每个以太坊节点都可以运行EVM。EVM是一个图灵完备的虚拟机，这意味着可以通过它实现各种复杂的逻辑。用户在以太坊中发布和调用智能合约就是在EVM上运行的。实际上，虚拟机直接运行的是虚拟机代码。部署在区块链上的智能合约可以是字节码的形式。例如图1所示，Bob将一个包含创建智能合约信息的交易发送到以太坊网络后，节点1的EVM可以执行这个交易并生成对应的合约实例。图1中的“0x6f8ae93…”代表了这个合约的地址，交易的data字段保存的可以是字节码，交易的to字段为空。节点间通过共识机制达成一致后，这个合约成功创建，并且可以在后续过程中被调用。合约创建后，区块链上出现一个与该智能合约对应的合约账户，并拥有一个特定的地址，合约代码将保存在该合约账户中。智能合约的行为由合约代码控制。换句话说，智能合约使得区块链上产生包含合约代码和账户存储的虚拟账户。如图2所示，仍以以太坊为例，Bob将一个用于调用智能合约的交易发送到以太坊网络后，某一节点的EVM可以执行这个交易并生成对应的合约实例。图2中交易的from字段是交易发起方的账户的地址，to字段中的“0x6f8ae93…”代表了被调用的智能合约的地址，value字段在以太坊中是以太币的值，交易的data字段保存的调用智能合约的方法和参数。调用智能合约后，balance的值可能改变。后续，某个客户端可以通过某一区块链节点查看balance的当前值。智能合约以规定的方式在区块链网络中每个节点独立的执行，所有执行记录和数据都保存在区块链上，所以当交易完成后，区块链上就保存了无法篡改、不会丢失的交易凭证。创建智能合约和调用智能合约的示意图如图3所示。以太坊中要创建一个智能合约，需要经过编写智能合约、编译成字节码、部署到区块链等过程。以太坊中调用智能合约，是发起一笔指向智能合约地址的交易，智能合约代码分布式的运行在以太坊网络中每个节点的虚拟机中。需要说明的是，除了可以由用户创建智能合约，也可以在创世块中由系统设置智能合约。这类合约一般称为创世合约。一般的，创世合约中可以设置一些区块链网络的数据结构、参数、属性和方法。此外，具有系统管理员权限的账户可以创建系统级的合约，或者修改系统级的合约。另外除了以太坊中的EVM外，不同的区块链网络还可能采用各种的虚拟机，这里并不限定。区块链网络中的节点在执行调用智能合约的交易后，会生成相应的收据，以用于记录与执行该智能合约相关的信息。这样，可以通过查询交易的收据来获得合约执行结果的相关信息。合约执行结果可以表现为收据中的事件。消息机制可以通过收据中的事件实现消息传递，以触发区块链节点执行相应的处理。事件的结构譬如可以为：Event：......在上述示例中，事件的数量可以为一个或多个；其中，每个事件分别包括主题和数据等字段。区块链节点可以通过监听事件的topic，从而在监听到预定义的topic的情况下，执行预设处理，或者从相应事件的data字段读取相关内容，以及可以基于读取的内容执行预设处理。上述的事件机制中，相当于在监听方处存在具有监听功能的客户端，譬如该客户端上运行了用于实现监听功能的SDK等，由该客户端对区块链节点产生的事件进行监听，而区块链节点只需要正常生成收据即可。除了上述的事件机制之外，还可以通过其他方式实现交易信息的透出。例如，可以通过在区块链节点运行的区块链平台代码中嵌入监听代码，使得该监听代码可以监听区块链交易的交易内容、智能合约的合约状态、合约产生的收据等其中的一种或多种数据，并将监听到的数据发送至预定义的监听方。由于监听代码部署于区块链平台代码中，而非监听方的客户端处，因而相比于事件机制而言，这种基于监听代码的实现方式相对更加的主动。其中，上述的监听代码可以由区块链平台的开发人员在开发过程中加入区块链平台代码，也可以由监听方基于自身的需求而嵌入，本说明书并不对此进行限制。区块链技术区别于传统技术的去中心化特点之一，就是在各个节点上进行记账，或者称为分布式记账，而不是传统的集中式记账。区块链系统要成为一个难以攻破的、公开的、不可篡改数据记录的去中心化诚实可信系统，需要在尽可能短的时间内做到分布式数据记录的安全、明确及不可逆。不同类型的区块链网络中，为了在各个记录账本的节点中保持账本的一致，通常采用共识算法来保证，即前述提到的共识机制。例如，区块链节点之间可以实现区块粒度的共识机制，比如在节点产生一个区块后，如果产生的这个区块得到其它节点的认可，其它节点记录相同的区块。再例如，区块链节点之间可以实现交易粒度的共识机制，比如在节点获取一笔区块链交易后，如果这笔区块链交易得到其他节点的认可，认可该区块链交易的各个节点可以分别将该区块链交易添加至自身维护的最新区块中，并且最终能够确保各个节点产生相同的最新区块。共识机制是区块链节点就区块信息达成全网一致共识的机制，可以保证最新区块被准确添加至区块链。当前主流的共识机制包括：工作量证明、股权证明、委任权益证明、实用拜占庭容错算法，HoneyBadgerBFT算法等。由于区块链网络的去中心化特性，使得区块链网络中的所有区块链节点均会维护相同的区块数据，无法满足部分节点的特殊需求。以联盟链为例，所有联盟成员可以组成一区块链网络，所有联盟成员在该区块链网络中分别存在对应的区块链节点，并可以通过对应的区块链节点获得该区块链网络上发生的所有交易和相关数据。但在一些情况下，可能存在部分联盟成员希望完成一些具有保密需求的交易，这些联盟成员既希望这些交易能够在区块链上存证或借助于区块链技术的其他优势，又能够避免其他联盟成员查看到这些交易和相关数据。虽然这些联盟成员可以额外组建一新的区块链网络，其建立方式与上述包含所有联盟成员的区块链网络类似，但是从头开始建立一条新的区块链网络需要消耗大量的资源，且无论是该区块链网络的建立过程或是建成后的配置过程都非常耗时。联盟成员之间的需求往往是临时的或者具有一定的时效性，使得新建的区块链网络很快就会由于需求消失而失去存在的意义，从而进一步增加了上述区块链网络的建链成本。而联盟成员之间的需求经常会变化，而每一需求所对应的联盟成员也往往不同，因而每当联盟成员发生变化时就可能需要组建一新的区块链网络，从而造成资源和时间的大量浪费。为此，可以将已组建的区块链网络作为区块链主网，并在该区块链主网的基础上组建区块链子网。那么，在诸如上述的联盟链场景下，联盟成员可以在已经参与区块链主网的情况下，基于自身需求而在区块链主网的基础上组建所需的区块链子网。由于区块链子网是在区块链主网的基础上所建立，使得区块链子网的组建过程相比于完全独立地组建一条区块链网络，所消耗的资源和所需的耗时等都极大地降低，灵活性极高。基于区块链主网快捷组建区块链子网的过程如下：区块链主网中的各区块链节点分别获取组建区块链子网的交易，所述交易包含所述区块链子网的配置信息，所述配置信息包括参与组建所述区块链子网的节点成员的身份信息，所述区块链主网中的各区块链节点分别执行所述交易以透出所述配置信息，当所述配置信息包含第一区块链节点对应的节点成员的身份信息时，部署第一区块链节点的节点设备基于所述包含所述配置信息的创世块启动属于所述区块链子网的第二区块链节点。组建区块链子网的交易可由区块链主网的管理员发起，即仅允许管理员在区块链主网的基础上组建区块链子网，而避免将区块链子网的组建权限开放给普通用户，以防止由此导致的安全性问题。在一些情况下，也可以允许区块链主网的普通用户发起上述组建区块链子网的交易，以满足普通用户的组网需求，使得普通用户能够在管理员不便于发起交易的情况下依然能够快捷地组建区块链子网。以图4所示为例，区块链主网为subnet0，该subnet0包含的区块链节点为nodeA、nodeB、nodeC、nodeD和nodeE等。假定nodeA、nodeB、nodeC 和nodeD希望组建一区块链子网：如果nodeA为管理员且仅允许管理员发起组建区块链子网的交易，那么可由nodeA向subnet0发起上述组建区块链子网的交易；如果nodeE为管理员且仅允许管理员发起组建区块链子网的交易，那么nodeA~nodeD需要向nodeE进行请求，使得nodeE向subnet0发起上述组建区块链子网的交易；如果nodeE为管理员但允许普通用户发起组建区块链子网的交易，那么nodeA~nodeE均可以向subnet0发起上述组建区块链子网的交易。当然，不论是管理员或者普通用户，发起组建区块链子网的交易的区块链节点并不一定参与所组建的区块链子网，比如虽然最终由nodeA、nodeB、nodeC 和nodeD组建区块链子网，但可由nodeE向subnet0发起上述组建区块链子网的交易，而并不一定由nodeA~nodeD来发起该组建区块链子网的交易。在区块链主网的基础上组建区块链子网时，容易理解的是，会使得该区块链子网与区块链主网之间存在逻辑上的层次关系。比如在图4所示的subnet0上组建区块链子网subnet1时，可以认为subnet0处于第一层、subnet1处于第二层，subnet0为subnet1的父网，subnet1为subnet0的子网。并且区块链子网也可以组建对应的区块链子网，例如可以在图4中subnet1的基础上进一步组建另一区块链子网subnet3，此时可以认为subnet处于第三层，subnet1为subnet3对应的父网，subnet3为subnet1的子网，而subnet3则为subnet0的孙子网，同样的，subnet3仍然可以在其基础上新的组建区块链子网，使得各区块链网络之间构成这种多层次树形结构，而在本说明书中，任一区块链网络是由其对应的父网所管理，也即由组建该任一区块链网络的区块链网络所管理，因此在如图4这种由以区块链主网为根结点、各个区块链子网分别为其他结点的区块链网络树形系统中，任一结点代表的区块链子网由其父结点对应的区块链网络所管理，而作为特例，区块链主网为底层区块链网络时，区块链主网由区块链主网自身进行管理。本说明书中的区块链主网可以为底层区块链网络，底层区块链网络是指并非在其他区块链网络的基础上组建的区块链子网，因此除该区块链主网以外不存在其他区块链网络能够对区块链主网进行管理，比如图4中的subnet0可以认为属于底层区块链网络类型的区块链主网，subnet0管理subnet0自身，当然，区块链主网也可以为其他区块链网络的子网，本说明书对此不作任何限制。上述区块链网络树形系统通过父结点管理对应子结点的方式，实现了逐层管理，降低了区块链主网的管理压力，同时避免向下层网络暴露上层网络的子网信息，从而实现各级网络的隐秘管理。上述组建区块链子网的交易在被发送至区块链主网后，由区块链主网内的共识节点进行共识，并在通过共识后由各主网节点执行该交易，以完成区块链子网的组建。共识过程取决于所采用的共识机制，譬如上文所述的任一共识机制，本说明书并不对此进行限制。通过在上述组建区块链子网的交易中包含配置信息，该配置信息可以用于对所组建的区块链子网进行配置，使得组建的区块链子网符合组网需求。例如，通过在配置信息中包含节点成员的身份信息，可以指定组建的区块链子网包含哪些区块链节点。节点成员的身份信息可以包括节点的公钥，或者采用节点ID等其他能够表征节点身份的信息，本说明书并不对此进行限制。以公钥为例，每个区块链节点都存在对应的一组或多组公私钥对，由区块链节点持有私钥而公钥被公开且唯一对应于该私钥，因而可以通过公钥来表征相应区块链节点的身份。因此，对于希望作为区块链子网的节点成员的区块链节点，可以将这些区块链节点的公钥添加至上述组建区块链子网的交易中，以作为上述节点成员的身份信息。上述的公私钥对可以用于签名验证的过程。例如，在采用有签名的共识算法中，譬如subnet1上述的nodeA1采用自身维护的私钥对消息进行签名后，将经过签名的消息在subnet1中广播，而nodeB1、nodeC1和nodeD1可以用nodeA1的公钥对收到的消息进行签名验证，以确认自身收到的消息确实来自nodeA1且没有经过篡改。第一主网节点可以为区块链主网上属于配置信息所指示的节点成员的区块链节点。在组建区块链子网时，并非由第一主网节点直接参与组建区块链子网、成为其节点成员，而是需要由用于部署该第一主网节点的节点设备生成第一子网节点，并由第一子网节点成为区块链子网中的节点成员。第一主网节点和第一子网节点对应于同一个区块链成员，比如在联盟链场景下对应于同一联盟链成员，但第一主网节点属于区块链主网、第一子网节点属于区块链子网，使得该区块链成员可以分别参与到区块链主网和区块链子网的交易中；并且，由于区块链主网和区块链子网属于相互独立的两个区块链网络，使得第一主网节点生成的区块与第一子网节点生成的区块分别存入所述节点设备上的不同存储，实现了第一主网节点与第一子网节点分别使用的存储之间的相互隔离，因而区块链子网所产生的数据仅会在区块链子网的节点成员之间同步，使得仅参与了区块链主网的区块链成员无法获得区块链子网上产生的数据，实现了区块链主网与区块链子网之间的数据隔离，满足了部分区块链成员之间的交易需求。可见，第一主网节点和第一子网节点是在逻辑上划分出来的区块链节点，而从物理设备的角度来说，相当于上述部署了第一主网节点和第一子网节点的节点设备同时参与了区块链主网和区块链子网。由于区块链主网与区块链子网之间相互独立，使得这两个区块链网络的身份体系也相互独立，因而即便第一主网节点和第一子网节点可以采用完全相同的公钥，仍然应当将两者视为不同的区块链节点。譬如在图4中，subnet0中的nodeA相当于第一主网节点，而部署该nodeA的节点设备生成了属于subnet1的nodeA1，该nodeA1相当于第一子网节点。可见，由于身份体系相互独立，所以即便第一子网节点所采用的公钥区别于第一主网节点，也不影响本说明书方案的实施。当然，区块链子网的节点成员并不一定只是区块链主网的部分节点成员。在一些情况下，区块链子网的节点成员可以与区块链主网的节点成员完全一致，此时所有的区块链成员都可以获得区块链主网和区块链子网上的数据，但是区块链主网与区块链子网所产生的数据依然可以相互隔离，比如可以通过在区块链主网上实现一类业务、在区块链子网上实现另一类业务，从而可以使得这两类业务分别产生的业务数据之间相互隔离。除了上述的节点成员的身份信息之外，配置信息还可以包括下述至少之一：所述区块链子网的网络标识、所述区块链子网的管理员的身份信息、针对区块链平台代码的属性配置等，本说明书并不对此进行限制。网络标识用于唯一表征该区块链子网，因而该区块链子网的网络标识应当区别于区块链主网和该区块链主网上组建的其他区块链子网。区块链子网的管理员的身份信息，譬如可以为作为管理员的节点成员的公钥；其中，区块链主网与区块链子网的管理员可以相同，也可以不同。通过区块链主网来组建区块链子网的优势之一，就是由于生成第一子网节点的节点设备上已经部署了第一主网节点，因而可以将第一主网节点所使用的区块链平台代码复用在第一子网节点上，免去了区块链平台代码的重复部署，极大地提高了区块链子网的组建效率。那么，如果配置信息中未包含针对区块链平台代码的属性配置，第一子网节点可以复用第一主网节点上采用的属性配置；如果配置信息中包含了针对区块链平台代码的属性配置，第一子网节点可以采用该属性配置，使得第一子网节点所采用的属性配置不受限于第一主网节点的属性配置、与第一主网节点无关。针对区块链平台代码的属性配置可以包括下述至少之一：代码版本号、是否需要共识、共识算法类型、区块大小等，本说明书并不对此进行限制。组建区块链子网的交易包括调用合约的交易。该交易中可以指明被调用的智能合约的地址、调用的方法和传入的参数。例如，调用的合约可以为前述的创世合约或系统合约，调用的方法可以为组建区块链子网的方法，传入的参数可以包括上述的配置信息。在一实施例中，该交易可以包含如下信息：from：Administratorto：Subnetmethod：AddSubnetstring：genesis其中，from字段为该交易的发起方的信息，譬如Administrator表明该发起方为管理员；to字段为被调用的智能合约的地址，譬如该智能合约可以为Subnet合约，则to字段具体为该Subnet合约的地址；method字段为调用的方法，譬如在Subnet合约中用于组建区块链子网的方法可以为AddSubnet，而string为AddSubnet方法中的参数，上述示例中通过genesis表征该参数的取值，该genesis具体为前述的配置信息。以Subnet0上的节点nodeA~nodeE执行调用Subnet合约中AddSubnet方法的交易为例。在交易通过共识后，nodeA~nodeE分别执行AddSubnet方法并传入配置信息，得到相应的执行结果。合约的执行结果可以包括所述配置信息，该执行结果可以处于前文所述的收据中，该收据中可以包含与执行AddSubnet方法相关的event，即组网事件。组网事件的topic可以包含预定义的组网事件标识，以区别于其他的事件。譬如在与执行AddSubnet方法相关的event中，topic的内容为关键词subnet，且该关键词区别于其他方法所产生event中的topic。那么，nodeA~nodeE通过监听生成的收据中各个event所含的topic，可以在监听到包含关键词subnet的topic的情况下，确定监听到与执行AddSubnet方法相关的event，即组网事件。例如，收据中的event如下：Event：......那么，nodeA~nodeE在监听到第1条event时，由于所含topic的内容为other，确定该event与AddSubnet方法无关；以及，nodeA~nodeE在监听到第2条event时，由于所含topic的内容为subnet，确定该event与AddSubnet方法相关，并进而读取该event对应的data字段，该data字段包含上述的配置信息。以配置信息包括区块链子网的节点成员的公钥为例，data字段的内容例如可以包括：{subnet1；nodeA的公钥，nodeA的IP、nodeA的端口号…；nodeB的公钥，nodeB的IP、nodeB的端口号…；nodeC的公钥，nodeC的IP、nodeC的端口号…；nodeD的公钥，nodeD的IP、nodeD的端口号…；}其中，subnet1为希望创建的区块链子网的网络标识。区块链主网中的各个区块链节点可以记录该区块链主网上已创建的所有区块链子网的网络标识，或者与这些区块链子网相关的其他信息，这些信息譬如可以维护在上述的Subnet合约中，具体可以对应于该Subnet合约所含的一个或多个合约状态的取值。那么，nodeA~nodeE可以根据记录的已创建的所有区块链子网的网络标识，确定上述的subnet1是否已经存在；如果不存在，说明subnet1是当前需要创建的新区块链子网，如果存在则说明subnet1已经存在。除了采用希望创建的新的区块链子网的网络标识之外，还可以采用预定义的新建网络标识，该新建网络标识表明相应的组网事件用于组建新的区块链子网。例如，可以将上述的subnet1替换为newsubnet，该newsubnet为预定义的新建网络标识，nodeA~nodeE在识别到data字段包含newsubnet时，即可确定包含该newsubnet的event为组网事件，需要创建新的区块链子网。除了网络标识subnet1之外，上述data字段中还包含各个节点成员的身份信息等内容。部署第一主网节点的节点设备可以监听生成的收据，并在监听到所述组网事件且所述组网事件的内容表明第一主网节点属于所述节点成员的情况下，由部署第一主网节点的节点设备获取所述组网事件包含的配置信息或创世块。例如，nodeA~nodeE在确定subnet1是需要新组建的区块链子网的情况下，会进一步识别data字段中包含的节点成员的身份信息，以确定自身的处理方式。比如，nodeA~nodeD会发现在data字段包含自身的公钥、IP地址和端口号等身份信息，假定nodeA~nodeD分别部署在节点设备1~4上，以nodeA和节点设备1为例： nodeA会触发节点设备1，使得节点设备1基于上述的消息机制从data字段获得配置信息并生成包含该配置信息的创世块，且节点设备1会在本地部署nodeA1，进而由nodeA1加载生成的创世块，从而形成为subnet1中的1个节点成员；类似地，nodeB会触发节点设备2生成nodeB1、nodeC会触发节点设备3生成nodeC1、nodeD会触发节点设备4生成nodeD1。以及，nodeE会发现data字段包含的身份信息与自身均不匹配，假定nodeE部署在节点设备5上，那么该节点设备5不会根据data字段中的配置信息生成创世块，也不会生成subnet1中的节点。如前所述，第一主网节点与第一子网节点并不一定采用相同的身份信息。因此，在上述实施例中，data字段中可以包含预先为nodeA1~nodeD1生成的身份信息，且区别于nodeA~nodeD的身份信息。仍以nodeA和节点设备1为例：节点设备1如果在data字段中发现了nodeA1的身份信息，可以生成创世块、部署nodeA1，并由nodeA1加载该创世块，或者，nodeA如果在data字段中发现了nodeA1的身份信息，那么nodeA会触发节点设备1生成创世块、部署nodeA1，并由nodeA1加载该创世块；nodeB~nodeD的处理方式类似，此处不再一一赘述。除了配置信息之外，合约的执行结果可以包括创世块。换言之，除了可以在data字段中包含配置信息，还可以直接在执行合约调用的过程中生成包含配置信息的创世块，从而将创世块包含于data字段中，那么对于上述的nodeA~nodeD而言，相应的节点设备1~4可以通过消息机制直接从data字段获得创世块，而无需自行生成，可以提升对nodeA1~nodeD1的部署效率。在本说明书中，组建区块链子网的交易可以并非是调用智能合约的交易，使得不支持智能合约的区块链网络也可以实现本说明书的技术方案，从而在区块链主网的基础上快捷地创建出区块链子网。例如，可以预先定义一组网交易类型标识，当交易包含该组网交易类型标识时，就表明该交易用于组建新的区块链子网，即该交易为组建区块链子网的交易。区块链平台代码可以包含相关的用于组件区块链子网的处理逻辑，使得运行该区块链平台代码的第一主网节点在执行交易时，如果发现该交易中包含上述的组网交易类型标识，且第一主网节点属于该交易中的配置信息所指示的节点成员，可以基于上述处理逻辑来触发部署第一主网节点的节点设备生成包含该配置信息的创世块并启动第一子网节点，由第一子网节点加载该创世块，以形成为区块链子网中的区块链节点。节点设备通过在该进程中创建一个运行区块链平台代码的实例，实现在该节点设备上部署一区块链节点。对于第一主网节点而言，由节点设备在上述进程中创建第一实例，并由该第一实例运行区块链平台代码而形成。类似地，对于第一子网节点而言，由节点设备在上述进程中创建区别于第一实例的第二实例，并由该第二实例运行区块链平台代码而形成。例如，节点设备可以首先在进程中创建第一实例，以形成区块链主网中的第一区块链节点；而当该节点设备对应的节点成员希望参与组建区块链子网时，可以在上述进程中创建第二实例，该第二实例区别于上述的第一实例，并由该第二实例形成区块链子网中的第二区块链节点。当第一实例与第二实例位于同一进程时，由于不涉及跨进程交互，可以降低对第一子网节点的部署难度、提高部署效率。当然，第二实例也可能与第一实例分别处于节点设备上的不同进程中，本说明书并不对此进行限制；例如，节点设备可以在第一进程中创建第一实例，以形成区块链主网中的第一区块链节点；而当该节点设备对应的节点成员希望参与组建区块链子网时，可以启动区别于第一进程的第二进程，并在该第二进程中创建第二实例，该第二实例区别于上述的第一实例，进而由该第二实例形成区块链子网中的第二区块链节点。事实上，本说明书实施例中涉及的任一节点设备上部署的各区块链节点均为运行在所述任一节点设备上的不同的区块链实例，任一节点设备上部署的各区块链节点生成的区块分别存入所述任一节点设备上的不同存储，且任一节点设备部署的各区块链节点分别使用的存储之间相互隔离。通过上述方式，可以在区块链主网上创建出区块链子网。以图4为例，subnet0原本包含nodeA~nodeE，而在subnet0的基础上可以组建出subnet1，该subnet1包含nodeA1~nodeD1，且nodeA与nodeA1、nodeB与nodeB1、nodeC与nodeC1、nodeD与nodeD1分别部署在同一节点设备上。类似地，还可以在subnet0上组建出subnet2或更多的区块链子网，其中subnet2包含nodeA2、nodeB2、nodeC2和nodeE2，且nodeA与nodeA1、nodeA2，nodeB与nodeB1、nodeB2，nodeC与nodeC1，nodeD与nodeD1，nodeE与nodeE2分别部署在同一节点设备上。以及，可以将subnet1、subnet2等作为区块链主网，并在此基础上进一步组建出区块链子网，例如在subnet1的基础上组建出区块链子网subnet3，其过程与subnet1或subnet2的组建相似，仅仅是将区块链主网替换为区块链子网subnet1，此处不再赘述，最后得到subnet3包含nodeA3、nodeB3和nodeC3，使得且nodeA与nodeA1、nodeA2、nodeA3，nodeB与nodeB1、nodeB2、nodeB3，nodeC与nodeC1、nodeC2、nodeC3分别部署在同一节点设备上。首先结合图4和图5对本说明书的跨链交互的方案进行简要说明，以用于解释各区块链子网之间是如何在彼此之间没有直接的网络连接通路的情况下，通过区块链主网实现的跨链交互。如图4所示，在区块链主网subnet0的基础上创建有区块链子网subnet1和区块链子网subnet2，而图5所示的即为subnet1和subnet2基于subnet0实现跨链交互的应用场景图。如图5所示，节点设备4上同时部署有属于subnet0的nodeD和属于subnet1的nodeD1，nodeD和 nodeD1具体为节点设备4在本地部署的虚拟机中运行预先部署的区块链平台代码所形成的区块链节点实例，而nodeD作为区块链节点在运行过程中的相关数据保存在nodeD对应的数据库中，nodeD1作为另一区块链节点在运行过程中的相关数据则保存在nodeD1对应的数据库中。类似的，节点设备5上同时部署有属于subnet0的nodeE和属于subnet2的nodeE2，其他的节点设备也分别同时部署有多个区块链节点，例如图5中未展示的节点设备1就同时部署有属于不同区块链网络的nodeA与nodeA1、nodeA2、nodeA3共四个区块链节点，这里不再赘述。另外，任一节点设备中可以部署有区块链共识代码，节点设备可以运行该共识代码以在本地形成共识组件实例；以及，节点设备中还可以部署有以插件形式管理的P2P组件代码，节点设备可以运行该P2P组件代码以在本地形成P2P组件实例，也即P2P插件，例如图5中节点设备4和节点设备5就均在本地运行有P2P插件，该P2P插件可以被同一节点设备上的不同区块链节点所共享使用，例如节点设备4中nodeD与nodeD1可以调用节点设备4上运行的同一个P2P插件，以共享其功能和数据。节点设备中还部署有区块链业务代码，节点设备可以运行该区块链业务代码以在本地形成业务实例，其中，任一节点设备中可以实现至少一个业务实例，如用于实现数据读/写功能的存储实例、用于实现隐私计算等计算功能的计算实例、用于实现数据加密功能的加密实例等，不再赘述。以源区块链网络subnet1中的源节点nodeD1向目的区块链网络subnet2中的目的节点nodeE2发送跨链消息为例，来说明本说明书中任一区块链子网中的任一区块链节点与另一区块链网络中的另一区块链节点之间完成跨链交互的过程。由于本说明书所述的跨链交互方法应用于区块链主网管理下的两个区块链子网，因此源区块链网络中各源节点和目的区块链网络中的各目的节点所处的节点设备上均分别部署有区块链主网中的主网节点，subnet1中nodeD1所属的节点设备4上还部署有主网节点nodeD，subnet2中nodeE2所属的节点设备5上还部署有主网节点nodeE，虽然subnet1和subnet2之间不存在直接的网络连接链路，但由于节点设备4上部署的nodeD和节点设备5上部署的nodeE之间已经预先建立有形成subnet0时所实现的网络连接链路，该网络连接链路可以使节点设备4与节点设备5进行相互通讯，具体而言，形成subnet0时所实现的网络连接链路即为subnet0中各共识节点之间建立的用于共识交易的共识链路，因此，nodeD1可以通过nodeD与nodeE之间建立的网络连接链路，从而将跨链消息发送至从节点设备4发送至节点设备5。在本说明书实施例中，同一节点设备上的主网节点和子网节点共享该节点设备上运行的区块链通讯插件，例如前述的P2P插件，而上述形成subnet0时所实现的网络连接链路具体是通过nodeD和nodeE分别采用节点设备4和节点设备5上的P2P插件所建立，由于节点设备上的P2P插件可以被该节点设备上各个区块链节点所共享，因此subnet1中的nodeD1可以通过调用节点设备4本地运行的P2P插件，借助形成subnet0时所实现的节点设备4与节点设备5之间基于P2P插件的网络连接，建立与 nodeE2所属节点设备5上运行的P2P插件之间的网络连接，由此将跨链消息发送至节点设备5，从而进一步实现与nodeE2之间的网络通讯，使得源区块链网络与目的区块链网络之间无需建立新的网络连接链路，而是通过底层区块链主网预先建立的网络连接链路，实现源区块链网络中源节点与目的区块链网络中目的节点之间的网络通讯。subnet1中的各节点在实现业务功能的过程中可能需要使用subnet2中各节点保存的数据，从而subnet1可以向subnet2请求获取该数据，在通过本公开所述的跨链交互方案获取数据的过程中，其中nodeD1和nodeD部署在节点设备4中，nodeE2和nodeE部署在节点设备5中，而其余区块链节点则分别部署在其他节点设备中。如subnet1可以向subnet2发送跨链请求，以期获取subnet2的节点数据库中保存的特定合约中特定字段的合约状态。可以理解的是，“subnet1向subnet2发送跨链请求”即为“subnet1中的子网节点向subnet2中的子网节点发送跨链请求”。具体的， subnet1中的任一节点可以在跨链请求中封装目的区块链网络subnet2的网络标识，通过调用节点设备本地部署且与subnet0中主网节点共享的P2P插件，将所述跨链请求通过subnet0的网络连接链路广播至部署有主网节点的各节点设备上运行的P2P插件。在一实施例中，若subnet1中的nodeA1通过节点设备1上的P2P插件发出跨链请求，那么其他部署有主网节点的节点设备2~5均将收到该跨链请求，例如，节点设备5上的P2P插件在接收到该跨链请求后，将根据所述跨链请求携带的所述网络标识判断节点设备5本地是否部署有该网络标识对应区块链网络中的区块链节点，显然，节点设备5上部署有subnet2中的nodeE2，因此，节点设备5上的P2P插件将基于该网络标识，进一步将跨链请求转发至nodeE2，而节点设备4上的P2P插件在接收到该跨链请求后，同样会基于其所携带的网络标识进行转发，但由于节点设备4本地并未部署有subnet2中的区块链节点，因此，节点设备4将不会保留该跨链请求，而是进一步将该跨链请求转发至其他部署有主网节点的节点设备。另外，subnet1中的任一节点除了可以在跨链请求中封装网络标识外，还可以在跨链请求中封装目的区块链网络中任意节点的身份信息，如节点ID、节点公钥，从而可以在调用P2P插件实现跨链传输跨链请求的过程中，不需要以广播的形式发送给各主网节点所属的节点设备，而是直接使得P2P插件以点对点通讯的方式发送给所述跨领请求中携带的各节点身份信息所指定的节点设备，例如，subnet1中的nodeD1可以在跨链请求中封装nodeE2的身份信息并调用节点设备4本地运行的P2P插件，使P2P插件可以根据该nodeE2的身份信息，将该跨链请求以单播形式发送至同时部署有subnet2中的nodeE2以及subnet0中的nodeE的节点设备5，节点设备5上的P2P插件在接收到该跨链请求后，除了可以通过跨链请求携带的网络标识将该跨链请求转发至nodeE2，也可以直接通过跨链请求携带的nodeE2的身份信息，将跨链请求转发至nodeE2。以上过程描述的是源区块链网络通过区块链主网中各主网节点之间建立的网络连接链路向目的区块链网络发送跨链请求的过程，类似的，目的区块链网络也可以通过类似的方式实现向源区块链网络的消息传输，例如将上述源节点发送的区块请求对应的跨链数据返回给源区块链网络，由此通过形成的源区块链网络与目的区块链网络之间的双向通讯信道，实现源区块链网络中源节点与目的区块链网络中目的节点之间的网络通讯。图5仅是结合图4以区块链子网subnet1和subnet2为例进行的示例性说明。实际上，图4中的各个区块链网络之间均可以实现跨链交互，本说明书对于跨链交互的区块链网络之间的关系并不进行限制。例如，上述区块链主网subnet0和区块链子网subnet1之间、区块链主网subnet0和区块链子网subnet3之间、区块链子网subnet2和subnet3之间等，均可以实现跨链交互，具体过程不再赘述。上述跨链交互方案的实现依赖于区块链主网所建立的网络连接链路，具体而言是通过各主网节点之间建立的共识链路，但在实际场景中，并不是所有的主网节点均为共识节点，而是会存在一些不参与交易共识只参与区块同步的非共识节点，而对于非共识节点而言其并未与其他所有主网节点之间均预先建立有网络链路，因此对于这种非共识节点所在的节点设备，其上部署的子网节点将无法正常地基于上述依赖区块链主网所建立的共识链路的跨链交互方案来实现跨子网交互的过程，如图6所示，图6是一示例性实施例提供的一种跨子网交互的应用场景图，该场景是在图4所示场景的基础上，假设区块链主网subnet0只有部分主网节点nodeA、nodeB和nodeD为共识节点，对于共识节点而言，它们之间建立有两两相连的共识链路，但对于subnet0上的非共识节点nodeC或nodeE而言，由于其无需参与共识过程，因此只需要与任一个共识节点建立用于同步区块的同步链路即可，例如nodeC与nodeA之间建立有同步链路，nodeE与nodeB之间建立有同步链路，但nodeC却没有与nodeB、nodeD和nodeE之间直接相连的网络链路，同理nodeE也没有与nodeA、nodeC和nodeD之间直接相连的网络链路，这意味着假设nodeC所在节点设备3上同时部署的属于subnet1的nodeC1希望向nodeE所在节点设备5上同时部署的属于subnet2的nodeE2发送跨链消息，则将由于nodeC和nodeE之间预先并未建立有网络链路导致跨链消息发送失败，无法实现基于区块链主网建立的网络连接链路实现跨子网交互。由此可见，前述基于区块链主网的跨子网交互实现方案仅能在各主网节点之间均存在网络链路的情况下才能够实现，而没有完全考虑主网上的非共识节点，这意味着在主网节点中既包含共识节点又包含非共识节点的情况下，可能导致跨链消息的不可达。为解决这一问题，本说明书提出一种跨子网交互方法，通过获取由第一区块链子网中的源子网节点向第二区块链子网中的目标子网节点发送的跨链消息，在确定第一节点设备并非所述目标子网节点所处的目标节点设备的情况下，在所述网络拓扑结构中确定第一节点设备与所述目标节点设备之间的转发路径，并将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备，或者，在确定第一节点设备为所述目标节点设备的情况下，将所述跨链消息转发至所述目标子网节点。本方案应用于部署有主网节点的各节点设备，通过在各节点设备分别维护各节点设备的网络拓扑结构，使得即使第一节点设备本地不存在与目标子网节点所在的目标节点设备直接相连的网络链路，也可以通过重路由转发的形式先将跨链消息传递给其他节点设备，然后再由其他节点设备逐步传递至目标节点设备，从而节点设备上无论是否预先通过区块链主网与目标节点设备建立有网络链路，均能够在目标节点设备在物理链路上具有可达性的情况下将跨链消息转发至目标节点设备，以保证区块链子网之间跨链交互业务的正常运作，并且能够克服主网节点中既包含共识节点又包含非共识节点的情况下可能导致跨链消息的不可达的问题。下面结合图7对本说明书的跨子网交互方法进行详细说明。请参见图7，图7是一示例性实施例提供的一种跨子网交互方法的流程图。如图7所示，该方法应用于第一节点设备，第一节点设备上部署有区块链主网中的主网节点，且第一节点设备上维护有所述区块链主网中各主网节点分别所处的节点设备之间的网络拓扑结构；其中，部署有区块链子网中的子网节点的节点设备上还部署有主网节点；所述方法可以包括以下步骤：步骤702，获取由第一区块链子网中的源子网节点向第二区块链子网中的目标子网节点发送的跨链消息。在本说明书实例中，所述获取由第一区块链子网中的源子网节点向第二区块链子网中的目标子网节点发送的跨链消息，包括：在所述源子网节点部署于第一节点设备的情况下，获取所述源子网节点生成的所述跨链消息；在所述源子网节点未部署于第一节点设备的情况下，获取其他节点设备转发的所述跨链消息。本说明书实施例涉及的第一节点设备具体是指部署有主网节点的节点设备，而第一节点设备可以包括发起跨链消息的源子网节点所处的源节点设备，此时由于所述源子网节点部署于第一节点设备，因此可以直接从所述源子网节点处获取所述跨链消息；或者第一节点设备也可以包括作为跨链消息中转站的节点设备或者作为跨链消息目的地的目标节点设备，此时由于所述源子网节点未部署于第一节点设备，因此第一节点设备是通过接收从其他节点设备转发过来所述跨链消息从而获取的所述跨链消息。由于第一节点设备部署有主网节点，因此第一节点设备可以通过查询区块链主网中各主网节点的网络连接关系生成部署有主网节点的各节点设备之间的网络拓扑结构，并且由于区块链主网管理有各区块链子网的子网信息，这其中就包括任一区块链子网中各节点成员的身份信息、所在节点设备等，因此，第一节点设备所维护的网络拓扑结构中，除了包含有各节点设备之间的网络连接关系，还包含有各节点设备上所部署的子网节点的情况，即网络拓扑结构包含以区块链主网与各区块链子网所构成的区块链系统的整体网络结构，该网络拓扑结构可以图形形式所表示，例如从图7所示的整体网络结构中，就可以分辨出用于表征部署有主网节点的各节点设备上所部署的子网节点的情况，以及有各主网节点的网络连接关系所锚定的各节点设备之间的网络链路情况，因此可以将图7所示的subnet0~3各区块链节点的分布情况和连接关系视为一种用于表示上述网络拓扑结构的表现形式，又例如也可以通过矩阵或表格的形式来表示上述网络拓扑结构，这里不做任何限制。在本说明书实施例中，上述网络拓扑结构是基于所述区块链主网中各主网节点之间的网络连接关系而生成，而上述网络连接关系包括：所述区块链主网中的共识主网节点之间建立的共识链路，以及共识主网节点与非共识主网节点之间建立的同步链路。以图7为例，区块链主网中subnet0中的主网节点A~E分别部署在节点设备1~5上，而任一节点设备可以通过本地部署的主网节点查询区块链主网上有关各主网节点的共识类型，例如节点设备1可以通过subnet0部署的系统合约的合约状态获知subnet0中的nodeA、nodeB和nodeD为共识节点，而nodeC为非共识节点且其所锚定的同步节点为nodeA，即nodeC只会从nodeA上同步区块而本身不参与交易共识、区块打包等过程，nodeE也为非共识节点且其所锚定的同步节点为nodeB，通过获取上述信息，节点设备1可以建立起区块链主网中各主网节点之间的网路连接关系，如图7所示的subnet0中各节点的网络连接关系，其中nodeA、nodeB和nodeD之间建立有两两相连的共识链路，而nodeC仅与nodeA通过同步链路相连，nodeE则仅与nodeB通过同步链路相连，而由于主网节点部署在节点设备上，因此在各主网节点之间的网路连接关系确定后，所述区块链主网中各主网节点分别所处的节点设备之间的网络拓扑结构也因此确定，并且由于节点设备1还可以通过subnet0部署的子网管理合约的合约状态查找得到任一区块链子网中各节点成员所处的节点设备，因此节点设备1通过各主网节点的网络连接关系所生成的各节点设备的网络拓扑结构中还包含各节点设备本地所部署的子网节点的情况，即所述网络拓扑结构中还包含各区块链子网中子网节点在节点设备上的分布情况。步骤704，在确定第一节点设备并非所述目标子网节点所处的目标节点设备的情况下，在所述网络拓扑结构中确定第一节点设备与所述目标节点设备之间的转发路径，并将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备。在本说明书实施例中，所述跨链消息中包含所述目标子网节点的身份信息，所述方法还包括：通过将第一节点设备在本地部署的各区块链节点对应的身份信息与所述目标子网节点的身份信息进行比较，确定第一节点设备是否为所述目标节点设备。由于跨链消息中包含目的子网节点的身份信息而各节点设备本地又维护有本地部署的各区块链节点对应的身份信息，因此第一节点设备可以通过将第一节点设备在本地部署的各区块链节点对应的身份信息与所述目标子网节点的身份信息进行比较，在本地部署有对应的身份信息与跨链消息中包含的身份信息相同的区块链节点的情况下，则可以判断该第一节点设备为目标节点设备并将所述跨链消息转发至所述区块链节点，而在本地部署的各区块链节点的身份信息与跨链消息中包含的身份信息均不相同的情况下，则可以判断该第一节点设备并非所述目标节点设备，因此需要进一步确定转发路径并对所述跨链消息进行转发。具体而言，跨链消息所携带的身份信息可以包括以下至少一项：所述目标子网节点的节点标识、所述目标子网节点的公钥、第二区块链子网的网络标识。由于第一节点设备维护的所述网络拓扑结构包含各节点设备之间的网路链路连接关系，因此第一节点设备可以在确定所述网络拓扑结构中自身对应的第一节点设备与目标节点设备的相对网络位置关系并确保可达性的情况下，生成第一节点设备与所述目标节点设备之间的转发路径。以图7中subnet1中的nodeD1向subnet2中的nodeE2发送跨链消息且第一节点设备为nodeD1和nodeD所处的节点设备4为例，来说明本说明书生成转发路径并基于路径进行转发的过程。由于节点设备4上部署有源子网节点nodeD1，因此可以直接从nodeD1上获取跨链消息并从该跨链消息中读取得到该跨链消息所携带的目的子网节点对应的身份信息为nodeE2对应的公钥，显然节点设备4上未部署有nodeE2因此并未维护有nodeE2对应的公钥，于是节点设备4需要基于所述网络拓扑结构确定节点设备4至nodeE2所处的节点设备5之间的转发路径，显然根据网络拓扑结构可以发现从节点设备4与节点设备5之间并不存在直接相连的网络链路，并且在不考虑环路和原路返回的转发路径中，节点设备4与节点设备5之间的转发路径至少包括两条：其一，是节点设备4→节点设备1→节点设备2→节点设备5；其二，是节点设备4→节点设备2→节点设备5，节点设备4可以任选其中一条作为最终确定的转发路径，或者，也可以基于最短路径算法或最短时延算法确定所述转发路径，其中在基于最短路径算法确定转发路径时，默认节点设备与节点设备之间直接相连的网络链路的距离是相等的，由此可以确定出的转发路径一定是所有可达的转发路径中途径节点设备数量最少的，在本实施例中，节点设备4所确定的最短的转发路径为节点设备4→节点设备2→节点设备5，因此，可以进一步确定该转发路径中作为下一跳的第二节点设备为节点设备2，于是将所述跨链消息转发至节点设备2。如前所述，所述转发路径可以由第一节点设备基于最短路径算法或最短时延算法所确定。在基于最短路径算法确定转发路径的情况下，可以使跨链数据经过最少的跳数转发至目标节点设备，因此能够优化转发效率，并减少网络为转发跨链消息而产生的系统负荷，另外，本说明书实施例所涉及的最短路径算法可以包括Floyed、Dijkstra等，本说明书对此并不做任何限制。而在基于最短时延算法确定转发路径的情况下，可以使跨链数据经过最短的时间转发至目标节点设备，因此能够保证跨链交互的及时性，提高用户体验。在本说明书实施例中，所述将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备，包括：通过第一节点设备上的主网节点与第二节点设备上的主网节点之间建立的网络链路，将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备。具体而言，所述网络链路在第一节点设备上运行的通讯插件与第二节点设备上运行的通讯插件之间建立，该通讯插件例如为前述的P2P插件；其中，同一节点设备上的主网节点与子网节点共享该节点设备上运行的通讯插件。如前述的跨链交互方案中所介绍的，可以通过区块链主网中各主网节点所建立的网络连接链路，从而使得第二区块链子网与第一区块链子网之间无需建立新的网络连接链路，而是通过底层区块链主网预先建立的网络连接链路，实现源区块链网络中源节点与目的区块链网络中目的节点之间的网络通讯。步骤706，在确定第一节点设备为所述目标节点设备的情况下，将所述跨链消息转发至所述目标子网节点。以图7中subnet1中的nodeD1向subnet2中的nodeE2发送跨链消息且第一节点设备为nodeE2和nodeE所处的节点设备5为例，来说明本说明书将跨链消息转发至目标子网节点的过程。由于节点设备5上部署有nodeE2，因此节点设备5在从其他节点设备上获取跨链消息后，通过该跨链消息中读取得到的nodeE2对应的公钥同样维护在节点设备5本地，于是节点设备5将所述跨链消息转发本地已经部署的nodeE2，至此完成跨子网交互的全流程。可选的，所述在所述网络拓扑结构中确定第一节点设备与所述目标节点设备之间的转发路径，包括：在本地基于所述网络拓扑结构计算第一节点设备与所述目标节点设备之间的转发路径；或者，将所述跨链消息中包含的转发路径确定为第一节点设备与所述目标节点设备之间的转发路径，其中，所述跨链消息中包含的转发路径由所述源子网节点所处的节点设备所计算得到。在一实施例中，第一节点设备在确定转发路径时，可以在本地通过即时演算的方式基于所述网络拓扑结构计算得到第一节点设备与所述目标节点设备之间的转发路径，从而保证在网络拓扑结构突然发生结构性变化的情况下，依然可以通过当前最新的网络拓扑结构即时演算出符合当前网路拓扑结构的转发路径，从而通过维持一条动态变化的转发路径，来确保跨链消息的可达性。在另一实施例中，第一节点设备在确定转发路径时，也可以直接通过读取跨链消息中包含的由上游节点设备所确定的转发路径来确定所述转发路径，例如，跨链消息中包含的转发路径由所述源子网节点所处的节点设备所计算得到，因此，跨链消息途径的各个节点设备在进行转发时，无需重复计算转发路径就能够基于所述跨链消息中携带的转发路径确定下一跳节点设备并完成转发，从而避免重复计算转发路径，节约计算资源。进一步的，所述方法还包括：在所述跨链消息中包含转发路径的情况下，第一节点设备基于所述跨链消息中包含的转发路径确定作为下一跳的第二节点设备是否可达；在确定第二节点设备可达的情况下，将所述跨链消息转发至第二节点设备；在确定第二节点设备不可达的情况下，基于第一节点设备上维护的所述网络拓扑结构重新计算第一节点设备与所述目标节点设备之间的转发路径。由于在直接通过读取跨链消息中包含的转发路径来确定所述转发路径的实施例中，除源子网节点所处的节点设备以外的各节点设备在接收到所述跨链消息后，不会重新计算转发路径，而是将跨链消息中包含的跨链路径确定为第一节点设备与所述目标节点设备之间的转发路径，因此相当于各节点设备所维持的转发路径是固定不变的，而对于一些网络拓扑结构可能发生变化的场景，例如区块链主网中各主网节点的共识类型发生变化从而影响主网节点之间的网络连接关系的情况下，很可能导致原先存在的某些网络链路失效而原先不存在的某些网络链路被建立起来，此时如果依然采用直接从跨链消息中确定转发路径的该方案显然会有导致跨链消息转发失败的风险，因此在本说明书实施例中，在第一节点设备读取到所述跨链消息中包含转发路径的情况下，首先会检测基于所述跨链消息中包含的转发路径所确定的作为下一跳的第二节点设备是否可达，并在由此确定得到的第二节点设备可达的情况下才会将跨链消息进一步转发，而在由此确定得到的第二节点设备不可达的情况下，则说明网络拓扑结构在跨链消息转发期间已经发生了结构性变化，导致原先确定的转发路径中第一节点设备与第二节点设备之间的网络链路已失效，此时可以基于第一节点设备上维护的最新的网络拓扑结构重新计算第一节点设备与所述目标节点设备之间的转发路径，从而保证在重新计算得到的转发路径下，新确定的作为下一跳的第三节点设备具有可达性，从而第一节点设备可以将跨链消息转发至第三节点设备。本说明书实施例通过将即时演算方式确定所述转发路径的实施例与直接读取跨链消息中包含的转发路径来确定所述转发路径的实施例进行了有机结合，既能够预防网络拓扑结构变化所带来的不良影响，也尽可能地节约计算资源。可选的，所述跨链消息由所述源子网节点采用对称加密、非对称加密或数字信封的方式进行加密。在本说明书实施例中，可以将跨链消息通过各类加密方式实现加密传输，以防止跨链消息在传播过程中被窃取或篡改，以数字信封的加密方式为例，所述跨链消息包括由所述源子网节点采用对称密钥对待传输的消息内容加密得到的消息内容密文、以及采用所述目标子网节点的节点公钥对所述对称密钥加密得到的对称密钥密文，使所述目标子网节点在接收到所述跨链消息后，通过自身的节点私钥对所述跨链消息中的所述对称密钥密文进行解密、并通过解密得到的所述对称密钥对所述跨链消息中的消息内容密文进行解密以获取所述消息内容。可选的，所述跨链消息为所述源子网节点向所述目标子网节点发送的请求消息；或者，所述跨链消息为所述源子网节点响应于来自所述目标子网节点的请求消息返回的应答消息。即虽然本说明书只详细论述了第一区块链子网中的源节点向第二区块链子网中的目标子网节点发送跨链消息的过程，但实际上本说明书所涉及的跨子网交互方案是支持双向通讯的，即第二区块链子网中的目标子网节点在接收到作为请求消息的跨链消息后，也可以相应于该请求消息从而向第一区块链子网中的源子网节点返回作为该请求消息的应答消息，以实现跨子网请求数据、跨子网合约调用等较为复杂的跨子网交互业务。可选的，所述区块链主网维护有所述源区块链子网中各子网节点的节点身份信息，所述跨链消息包含用于表征所述源子网节点的节点身份的身份证明信息；所述方法还包括：所述目标子网节点向所述区块链主网查询所述源子网节点的节点身份信息以对所述身份证明信息进行校验，并在校验通过的情况下确定所述跨链消息有效。例如，源子网节点的身份证明信息包含所述源子网节点基于自身的节点私钥生成的签名，所述目标子网节点向所述区块链主网查询所述源子网节点的节点公钥，并采用所述节点公钥对所述签名进行验签，并在眼前通过的情况下确定所述跨链消息有效。在一实施例中，当所述区块链主网中主网节点与所述区块链主网所管理的区块链子网中的子网节点部署于同一节点设备时，该节点设备上的主网节点和子网节点共享该节点设备上运行的区块链插件，因此，目的子网节点可以通过与自身所处节点设备上部署的主网节点共享的区块链插件，读取该主网节点维护的所述源子网节点的节点身份信息。在另一实施例中，所述区块链主网上部署有子网管理合约，所述子网管理合约用于维护基于所述区块链主网组建的各个区块链子网中子网节点的节点身份信息，此时目标子网节点可以读取所述子网管理合约维护的所述源子网节点的节点身份信息从而获取源子网节点的节点设备信息。本说明书实施例通过在跨链消息中加入源子网节点的身份证明信息以及在目标子网节点接收到跨链消息后执行身份验证操作的方式，加强了跨子网交互的安全性。图8是一示例性实施例提供的一种设备的结构示意图。请参考图8，在硬件层面，该设备包括处理器802、内部总线804、网络接口806、内存808以及非易失性存储器810，当然还可能包括其他业务所需要的硬件。本说明书一个或多个实施例可以基于软件方式来实现，比如由处理器802从非易失性存储器810中读取对应的计算机程序到内存808中然后运行。当然，除了软件实现方式之外，本说明书一个或多个实施例并不排除其他实现方式，比如逻辑器件抑或软硬件结合的方式等等，也就是说以下处理流程的执行主体并不限定于各个逻辑单元，也可以是硬件或逻辑器件。图9是一示例性实施例提供的一种跨子网交互装置的框图。请参考图9，该装置可以应用于如图8所示的设备中，以实现本说明书的技术方案。其中，该装置应用于第一节点设备，第一节点设备上部署有区块链主网中的主网节点，且第一节点设备上维护有所述区块链主网中各主网节点分别所处的节点设备之间的网络拓扑结构；其中，部署有区块链子网中的子网节点的节点设备上还部署有主网节点；所述装置包括：获取消息单元901，获取由第一区块链子网中的源子网节点向第二区块链子网中的目标子网节点发送的跨链消息。转发路径单元902，在确定第一节点设备并非所述目标子网节点所处的目标节点设备的情况下，在所述网络拓扑结构中确定第一节点设备与所述目标节点设备之间的转发路径，并将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备。转发节点单元903，在确定第一节点设备为所述目标节点设备的情况下，将所述跨链消息转发至所述目标子网节点。可选的，所述网络拓扑结构是基于所述区块链主网中各主网节点之间的网络连接关系而生成。可选的，所述网络连接关系包括：所述区块链主网中的共识主网节点之间建立的共识链路，以及共识主网节点与非共识主网节点之间建立的同步链路。可选的，所述获取消息单元901具体用于：在所述源子网节点部署于第一节点设备的情况下，获取所述源子网节点生成的所述跨链消息；在所述源子网节点未部署于第一节点设备的情况下，获取其他节点设备转发的所述跨链消息。可选的，所述跨链消息中包含所述目标子网节点的身份信息，所述装置还包括：身份确定单元904，用于通过将第一节点设备在本地部署的各区块链节点对应的身份信息与所述目标子网节点的身份信息进行比较，确定第一节点设备是否为所述目标节点设备。可选的，所述身份信息包括以下至少一项：所述目标子网节点的节点标识、所述目标子网节点的公钥、第二区块链子网的网络标识。可选的，所述转发路径由第一节点设备基于最短路径算法或最短时延算法所确定。可选的，所述将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备，包括：通过第一节点设备上的主网节点与第二节点设备上的主网节点之间建立的网络链路，将所述跨链消息转发至所述转发路径上作为下一跳的第二节点设备。可选的，所述网络链路在第一节点设备上运行的通讯插件与第二节点设备上运行的通讯插件之间建立；其中，同一节点设备上的主网节点与子网节点共享该节点设备上运行的通讯插件。可选的，所述转发路径单元902具体用于：在本地基于所述网络拓扑结构计算第一节点设备与所述目标节点设备之间的转发路径；或者，将所述跨链消息中包含的转发路径确定为第一节点设备与所述目标节点设备之间的转发路径，其中，所述跨链消息中包含的转发路径由所述源子网节点所处的节点设备所计算得到。可选的，还包括：路径重算单元905，用于在所述跨链消息中包含转发路径的情况下，第一节点设备基于所述跨链消息中包含的转发路径确定作为下一跳的第二节点设备是否可达；在确定第二节点设备可达的情况下，将所述跨链消息转发至第二节点设备；在确定第二节点设备不可达的情况下，基于第一节点设备上维护的所述网络拓扑结构重新计算第一节点设备与所述目标节点设备之间的转发路径。可选的，所述跨链消息由所述源子网节点采用对称加密、非对称加密或数字信封的方式进行加密。可选的，所述跨链消息为所述源子网节点向所述目标子网节点发送的请求消息；或者，所述跨链消息为所述源子网节点响应于来自所述目标子网节点的请求消息返回的应答消息。上述实施例阐明的系统、装置、模块或单元，具体可以由计算机芯片或实体实现，或者由具有某种功能的产品来实现。一种典型的实现设备为计算机，计算机的具体形式可以是个人计算机、膝上型计算机、蜂窝电话、相机电话、智能电话、个人数字助理、媒体播放器、导航设备、电子邮件收发设备、游戏控制台、平板计算机、可穿戴设备或者这些设备中的任意几种设备的组合。在一个典型的配置中，计算机包括一个或多个处理器 、输入/输出接口、网络接口和内存。内存可能包括计算机可读介质中的非永久性存储器，随机存取存储器  和/或非易失性内存等形式，如只读存储器  或闪存。内存是计算机可读介质的示例。计算机可读介质包括永久性和非永久性、可移动和非可移动媒体可以由任何方法或技术来实现信息存储。信息可以是计算机可读指令、数据结构、程序的模块或其他数据。计算机的存储介质的例子包括，但不限于相变内存 、静态随机存取存储器 、动态随机存取存储器 、其他类型的随机存取存储器 、只读存储器 、电可擦除可编程只读存储器 、快闪记忆体或其他内存技术、只读光盘只读存储器、数字多功能光盘  或其他光学存储、磁盒式磁带、磁盘存储、量子存储器、基于石墨烯的存储介质或其他磁性存储设备或任何其他非传输介质，可用于存储可以被计算设备访问的信息。按照本文中的界定，计算机可读介质不包括暂存电脑可读媒体，如调制的数据信号和载波。还需要说明的是，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、商品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、商品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、商品或者设备中还存在另外的相同要素。上述对本说明书特定实施例进行了描述。其它实施例在所附权利要求书的范围内。在一些情况下，在权利要求书中记载的动作或步骤可以按照不同于实施例中的顺序来执行并且仍然可以实现期望的结果。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。在本说明书一个或多个实施例使用的术语是仅仅出于描述特定实施例的目的，而非旨在限制本说明书一个或多个实施例。在本说明书一个或多个实施例和所附权利要求书中所使用的单数形式的“一种”、“所述”和“该”也旨在包括多数形式，除非上下文清楚地表示其他含义。还应当理解，本文中使用的术语“和/或”是指并包含一个或多个相关联的列出项目的任何或所有可能组合。应当理解，尽管在本说明书一个或多个实施例可能采用术语第一、第二、第三等来描述各种信息，但这些信息不应限于这些术语。这些术语仅用来将同一类型的信息彼此区分开。例如，在不脱离本说明书一个或多个实施例范围的情况下，第一信息也可以被称为第二信息，类似地，第二信息也可以被称为第一信息。取决于语境，如在此所使用的词语“如果”可以被解释成为“在……时”或“当……时”或“响应于确定”。以上所述仅为本说明书一个或多个实施例的较佳实施例而已，并不用以限制本说明书一个或多个实施例，凡在本说明书一个或多个实施例的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本说明书一个或多个实施例保护的范围之内。
