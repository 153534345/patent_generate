标题title
相同设备上虚拟调整时长的综合调度算法
摘要abst
对于使用动态关键路径法在相同设备上调度时，仅考虑工序间的约束关系和路径长度，忽略了设备空闲时间，影响调度结果的问题，提出了相同设备上虚拟调整时长的综合调度算法。该算法首先采用动态关键路径法确定计划调度工序，然后通过提出的虚拟调整时长策略，当相同设备空闲时间大于计划调度工序的加工时间的二分之一且虚拟调整时长小于该设备上空闲时间段紧后工序的加工时长的二分之一时，插入该工序，已安排的相关工序进行后移操作。
权利要求书clms
1.一种相同设备上虚拟调整时长的综合调度方法，其特征是：在动态关键路径方法的基础上采用提出的虚拟调整时长策略调度工序；方法是根据动态关键路径法确定计划调度工序，该工序在相同设备上从可调度时间点开始往后寻找设备空闲，当设备空闲时间大于该调度工序的加工时间的二分之一且虚拟调整时长小于已安排在该设备上加工的下一道工序的加工时间的二分之一时，插入该工序，已安排的相关工序进行后移操作。2.根据权利要求1所述的相同设备上虚拟调整时长的综合调度算法，其特征是：所述的虚拟调整时长，是指当设备空闲时，用插入可调度工序的结束时间减去已安排在该设备上加工的下一道工序的开始时间即为虚拟调整时长，当虚拟调整时长为负值时，表示设备空闲足够大，可直接插入；当虚拟调整时长为正值，表示设备空闲时间小，在插入可调度工序时，在该设备上加工的下一道工序需要后移。3.根据权利要求1或2所述的相同设备上虚拟调整时长的综合调度算法，其特征是：所述的设备集：因为本文解决相同设备问题，所以对某些工序的加工可以在不同的设备上完成，所以对工序建立设备集，每个工序对应一个设备集，一个工序的设备集中至少有一个设备，存在工序的设备集中是两个或者多个设备。4.根据权利要求1或2或3所述的相同设备上虚拟调整时长的综合调度算法，其特征是：所述的计划开始时间：一个工序的所有紧前工序的加工结束时间的最大值；在计划开始时间处，若设备空闲，该工序可以开始加工，此时开始加工时间等于计划开始时间；否则，开始加工时间不等于计划开始时间，往后寻找设备空闲。5.根据权利要求1或2或3或4所述的相同设备上虚拟调整时长的综合调度算法，其特征是：所述的调度方法的具体实施步骤如下：步骤1：输入设备数和产品各工序信息，没有紧前工序的工序或者紧前工序全部加工完成的工序称为可调度工序，所有可调度工序组成可调度工序集；步骤2：计算可调度工序集中所有工序的路径长度，选出路径长度最长的工序，并将该工序从可调度工序集删除；步骤3：遍历该工序所有紧前工序的结束时间，选取最大的结束时间作为该工序的计划开始时间；步骤4：设置参数i=1；步骤5：在该工序的设备集中选择第i个开始时间大于或等于该工序计划开始时间的空闲时间段；步骤6：判断空闲时间段的长度能否完全加工该工序，若能，把该工序插入到已调度工序集中该空闲时间段的紧后工序之前，该空闲时间段的开始时间为该工序的开始时间，空闲时间段所在设备为该工序的加工设备，转到步骤11，反之，判断空闲时间段长度是否大于该工序加工时间的二分之一并且虚拟调整时长是否小于该空闲时间段紧后工序的加工时间的二分之一，如果条件不满足，i++，转到步骤5，反之，转到步骤7；步骤7：在该空闲时间段插入该工序，把该工序插入到已调度工序集中该空闲时间段的紧后工序之前，该空闲时间段的开始时间为该工序的开始时间，空闲时间段所在设备为该工序的加工设备；步骤8：遍历已调度工序集，对已调度工序集中该空闲时间段的紧后工序之后调度的工序包括该紧后工序依次放入待更新工序集；步骤9：判断待更新工序集中的第一个工序的开始时间是否小于其紧前工序的结束时间，若小于，将该工序的开始时间更新为其紧前工序的结束时间，判断该工序的开始时间是否小于同设备紧前工序的结束时间，若小于，将该工序的开始时间更新为同设备紧前工序的结束时间；步骤10：从待更新工序集中删除该工序，判断待更新工序集是否为空，若是，则转到步骤11，否则转到步骤9；步骤11：更新可调度工序集；步骤12：判断可调度工序集是否为空，若为空，转到步骤13，反之转到步骤2；步骤13：输出甘特图，结束。
说明书desc
技术领域本发明涉及相同设备上虚拟调整时长的综合调度算法。背景技术相同设备：其中某两台或者多台设备的功能相同，即在这两个或多个设备上加工的工序可以选择其功能相同的任何一台设备上加工。对于使用动态关键路径法在相同设备上调度时，仅考虑工序间的约束关系和路径长度，忽略了设备空闲时间，影响调度结果的问题，提出了相同设备上虚拟调整工序时长的综合调度算法。发明内容本发明的目的是为了解决动态关键路径在相同设备上进行调度时，仅考虑工序间的约束关系和路径长度，忽略了设备空闲时间，影响调度结果的问题，提出了相同设备上虚拟调整工序时长的综合调度算法：在使用动态关键路径的基础上，在调度每个工序时，通过提出的虚拟调整时长策略，当相同设备空闲时间大于要调度的工序的加工时间的二分之一且虚拟调整时长小于已安排在该设备上加工的下一道工序的加工时间的二分之一时，插入该工序，已安排的相关工序进行后移操作，以达到减少设备的空闲时间的目的，从而缩短产品的加工总时间。上述的目的通过以下的技术方案实现：相同设备上虚拟调整时长的综合调度算法，首先采用动态关键路径法进行调度，然后通过提出的虚拟调整时长策略，当相同设备空闲时间大于要调度的工序的加工时间的二分之一且虚拟调整时长小于已安排在该设备上加工的下一道工序的加工时间的二分之一时，插入该工序，已安排的相关工序进行后移操作。所述的相同设备上虚拟调整时长的综合调度算法，所述的综合调度方法具体实施步骤如下：步骤1：输入设备数和产品各工序信息，没有紧前工序的工序或者紧前工序全部加工完成的工序称为可调度工序，所有可调度工序组成可调度工序集；步骤2：计算可调度工序集中所有工序的路径长度，选出路径长度最长的工序，并将该工序从可调度工序集删除；步骤3：遍历该工序所有紧前工序的结束时间，选取最大的结束时间作为该工序的计划开始时间；步骤4：设置参数i=1；步骤5：在该工序的设备集中选择第i个开始时间大于或等于该工序计划开始时间的空闲时间段；步骤6：判断空闲时间段的长度能否完全加工该工序，若能，把该工序插入到已调度工序集中该空闲时间段的紧后工序之前，该空闲时间段的开始时间为该工序的开始时间，空闲时间段所在设备为该工序的加工设备，转到步骤11，反之，判断空闲时间段长度是否大于该工序加工时间的二分之一并且虚拟调整时长是否小于该空闲时间段紧后工序的加工时间的二分之一，如果条件不满足，i++，转到步骤5，反之，转到步骤7；步骤7：在该空闲时间段插入该工序，把该工序插入到已调度工序集中该空闲时间段的紧后工序之前，该空闲时间段的开始时间为该工序的开始时间，空闲时间段所在设备为该工序的加工设备；步骤8：遍历已调度工序集，对已调度工序集中该空闲时间段的紧后工序之后调度的工序包括该紧后工序依次放入待更新工序集；步骤9：判断待更新工序集中的第一个工序的开始时间是否小于其紧前工序的结束时间，若小于，将该工序的开始时间更新为其紧前工序的结束时间，判断该工序的开始时间是否小于同设备紧前工序的结束时间，若小于，将该工序的开始时间更新为同设备紧前工序的结束时间；步骤10：从待更新工序集中删除该工序，判断待更新工序集是否为空，若是，则转到步骤11，否则转到步骤9；步骤11：更新可调度工序集；步骤12：判断可调度工序集是否为空，若为空，转到步骤13，反之转到步骤2；步骤13：输出甘特图，结束。所述的虚拟调整时长，是指当设备空闲时，用插入可调度工序的结束时间减去已安排在该设备上加工的下一道工序的开始时间即为虚拟调整时长，当虚拟调整时长为负值时，表示设备空闲足够大，可直接插入；当虚拟调整时长为正值，表示设备空闲时间小，在插入可调度工序时，在该设备上加工的下一道工序需要后移。所述的设备集：因为本文解决相同设备问题，所以对某些工序的加工可以在不同的设备上完成，所以对工序建立设备集，每个工序对应一个设备集，一个工序的设备集中至少有一个设备，存在工序的设备集中是两个或者多个设备。所述的计划开始时间：一个工序的所有紧前工序的加工结束时间的最大值。在计划开始时间处，若设备空闲，该工序可以开始加工，此时开始加工时间等于计划开始时间。否则，开始加工时间不等于计划开始时间，往后寻找设备空闲。有益效果：1. 本发明考虑了设备空闲时间段的长短对可调度工序插入的问题，以往的调度算法中动态关键路径算法在相同设备上进行调度时，仅考虑工序间的约束关系和路径长度，忽略了设备空闲时间，影响调度结果的问题，根据动态关键路径法确定调度工序的初始调度顺序，然后通过提出的虚拟调整时长策略，在相同设备上从可调度时间点开始往后寻找设备空闲，当设备空闲时间大于要调度的工序的加工时间的二分之一且虚拟调整时长小于已安排在该设备上加工的下一道工序的加工时间的二分之一时，插入该工序，已安排的相关工序进行后移操作。本发明首次提出虚拟调整时长策略，能够对设备空闲时间段的长短进行判断并考虑插入工序，虽然导致该设备上的后续工序进行后移，但是整体上会加快产品的加工进程，缩短设备的空闲时间，达到了产品的总加工时间缩短的效果。附图说明：附图1是本发明的算法流程图。附图2是本发明的虚拟调整策略流程图。附图3是本发明中的后移调整流程图。附图4是一个产品的工艺树。附图5是使用动态关键路径对附图4所示工艺树的调度结果甘特图。附图6是使用本发明对附图4所示工艺树的调度结果甘特图。具体实施方式：实施例1：一种相同设备上虚拟调整时长的综合调度算法，首先采用动态关键路径法进行调度，然后通过提出的虚拟调整时长策略，当相同设备空闲时间大于要调度的工序的加工时间的二分之一且虚拟调整时长小于已安排在该设备上加工的下一道工序的加工时间的二分之一时，插入该工序，已安排的相关工序进行后移操作。实施例2：所述的相同设备上虚拟调整时长的综合调度算法，具体实施步骤如下：步骤1：输入设备数和产品各工序信息，没有紧前工序的工序或者紧前工序全部加工完成的工序称为可调度工序，所有可调度工序组成可调度工序集；步骤2：计算可调度工序集中所有工序的路径长度，选出路径长度最长的工序，并将该工序从可调度工序集删除；步骤3：遍历该工序所有紧前工序的结束时间，选取最大的结束时间作为该工序的计划开始时间；步骤4：设置参数i=1；步骤5：在该工序的设备集中选择第i个开始时间大于或等于该工序计划开始时间的空闲时间段；步骤6：判断空闲时间段的长度能否完全加工该工序，若能，把该工序插入到已调度工序集中该空闲时间段的紧后工序之前，该空闲时间段的开始时间为该工序的开始时间，空闲时间段所在设备为该工序的加工设备，转到步骤11，反之，判断空闲时间段长度是否大于该工序加工时间的二分之一并且虚拟调整时长是否小于该空闲时间段紧后工序的加工时间的二分之一，如果条件不满足，i++，转到步骤5，反之，转到步骤7；步骤7：在该空闲时间段插入该工序，把该工序插入到已调度工序集中该空闲时间段的紧后工序之前，该空闲时间段的开始时间为该工序的开始时间，空闲时间段所在设备为该工序的加工设备；步骤8：遍历已调度工序集，对已调度工序集中该空闲时间段的紧后工序之后调度的工序包括该紧后工序依次放入待更新工序集；步骤9：判断待更新工序集中的第一个工序的开始时间是否小于其紧前工序的结束时间，若小于，将该工序的开始时间更新为其紧前工序的结束时间，判断该工序的开始时间是否小于同设备紧前工序的结束时间，若小于，将该工序的开始时间更新为同设备紧前工序的结束时间；步骤10：从待更新工序集中删除该工序，判断待更新工序集是否为空，若是，则转到步骤11，否则转到步骤9；步骤11：更新可调度工序集；步骤12：判断可调度工序集是否为空，若为空，转到步骤13，反之转到步骤2；步骤13：输出甘特图，结束。实施例3：所述的虚拟调整时长，是指当设备空闲时，用插入可调度工序的结束时间减去已安排在该设备上加工的下一道工序的开始时间即为虚拟调整时长，当虚拟调整时长为负值时，表示设备空闲足够大，可直接插入；当虚拟调整时长为正值，表示设备空闲时间小，在插入可调度工序时，在该设备上加工的下一道工序需要后移。所述的设备集：因为本文解决相同设备问题，所以对某些工序的加工可以在不同的设备上完成，所以对工序建立设备集，每个工序对应一个设备集，一个工序的设备集中至少有一个设备，存在工序的设备集中是两个或者多个设备。所述的计划开始时间：一个工序的所有紧前工序的加工结束时间的最大值。在计划开始时间处，若设备空闲，该工序可以开始加工，此时开始加工时间等于计划开始时间。否则，开始加工时间不等于计划开始时间，往后寻找设备空闲。所述的虚拟调整时长策略是指当设备空闲时，空闲时间大于要调度的工序的加工时间的二分之一且虚拟调整时长小于已安排在该设备上加工的下一道工序的加工时间的二分之一时，插入该工序。实施例4：上述的相同设备上虚拟调整时长的综合调度算法，如附图4所示，即为一个复杂产品A的加工工艺树图例，图中共有16道工序，3台加工设备，每道工序可在不同设备上加工，每道工序加工信息不同，矩形框内符号含义为：产品工序名/加工设备/加工时间。以下将结合附图4中的工艺树图例来对本方法的具体执行流程进行说明。实施例5：上述的相同设备上虚拟调整时长的综合调度算法，下面将用本调度方法对附图4中的工艺树图例执行调度。方法具体操作步骤如下：首先，确定可调度工序集为{A12、A13、A9、A14、A6、A15}，计算所有可调度工序集中工序的路径长度，得到最长的路径长度为18，对应的工序为A13从可调度工序集中删除A13；A13的计划开始时间为0时刻；而0时刻M2设备空闲，且足够A13加工，所以安排A13在M2设备的0时刻加工，把A13放到已调度工序集中；更新可调度工序集{A12、A9、A14、A6、A15}；可调度工序集不为空；再计算可调度工序集中工序的路径长度并选出最长的，循环进行，直到安排工序A6时，在M1设备的空闲时间段的紧后工序A10，判断此时设备的空闲时间段为3，大于工序A6的加工时长的二分之一且虚拟调整时长为1比该设备上影响该空闲的已安排工序A10的加工时长的二分之一也就是2要小，所以可以安排A6在工序A10之前加工，此时A6插入已调度工序集中A10之前；对已调度工序集中工序A10及之后的所有工序依次加入到待更新工序集中，待更新工序集为{A10、A9、A11、A8、A5}；对待更新工序集中的第一个工序即A10的开始时间进行判断是否小于其所有紧前工序的结束时间的最大值，A10的紧前工序A14的结束时间为８，不小于；再判断A10的开始时间是否小于同设备紧前工序A６的结束时间９，小于则更新A10的开始时间为９，在待更新工序集中删除A10；待更新工序集｛A9、A11、A8、A5}不为空，所以再取待更新工序集中的第一个工序A９，循环进行直到待更新工序集为空；更新可调度工序集，判断可调度工序集是否为空，不为空，找路径长度最长的进行确定开始加工时间和设备，循环进行，直到可调度工序集为空。按照本文所提算法进行调度所得到的工序调度顺序为A13、A14、A15、A12、A6、A10、A9、A11、A8、A5、A7、A4、A2、A3、A1、A0。最后使用本文算法进行调度该实例的甘特图如附图6所示，总的加工时长为24。实施例6：上述的相同设备上虚拟调整时长的综合调度算法，实例对比：由于本发明提出的相同设备上虚拟调整时长的综合调度算法，之前有使用关键路径法进行调度，在以往所提算法中，动态关键路径法比关键路径算法更优，所以本发明与动态关键路径法在相同设备上的调度进行对比。附图5即为动态关键路径法调度附图4所示的产品A的调度甘特图，与附图6对比可以才看出，产品A的总加工用时减少了2个工时，较充分的利用了设备的空闲时间，取得了较好的调度结果。因此，本方法在一定程度上解决了动态关键路径在相同设备上进行综合调度产生的问题。
