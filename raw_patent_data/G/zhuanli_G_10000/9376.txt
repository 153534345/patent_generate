标题title
一种基于多目标进化随机森林特征选择的关键质量特性识别方法
摘要abst
本发明公开了一种基于多目标进化随机森林特征选择的关键特征识别方法，步骤如下：先通过车间数字化检测来获取生产过程中的多元质量特性数据信息，形成产品质量特性数据集；再利用Relief F算法对参与分类的质量特性进行初选，将初选后的数据集划分为两部分：产品质量特性训练数据集与产品质量特性测试数据集；然后将训练数据集输入多目标优化随机森林特征选择算法，得到关键质量特性集；最后利用测试数据集对得到的关键质量特性集进行验证。本发明考虑了多元质量特性对产品最终质量的复杂影响，准确分析产品中关键质量特性，为关键质量特性识别提供借鉴，为质量控制提供支撑，提高对产品质量预测能力。
权利要求书clms
1.一种基于多目标进化随机森林特征选择的关键质量特性识别方法，其特征在于，包括以下步骤：步骤1：通过车间数字化检测来获取生产过程中的多元质量特性数据信息，包含若干过程参数、产品尺寸参数和产品等级分类等质量特性，这些质量特性是影响产品整体质量水平的重要因素，从而形成产品质量特性数据集；步骤2：利用Relief F算法对参与分类的质量特性进行初选，得出质量特性的算法权重，剔除类间距离小于类内距离的质量特性，将初选后的数据集划分为两部分：产品质量特性训练数据集与产品质量特性测试数据集；步骤3：将训练数据集输入多目标进化随机森林特征选择算法，建立多个相对应算法目标，生成初始种群，设置迭代种群代数，得到优势关键质量特性集；步骤4：利用测试数据集对得到的关键质量特性集进行验证和评估。2.根据权力要求1所述的一种基于多目标进化随机森林特征选择的关键质量特性识别方法，其特征在于：步骤1中所述“产品质量特性数据集”是指对同一研究对象而言，具有一定数量的质量特性、一定数量的样本和每个样本明确分类的数据集。3.如权力要求1所述的一种基于多目标进化随机森林特征选择的关键质量特性识别方法，其特征在于：步骤2所述的“Relief F”算法为Relief算法的扩展，具体过程为：在某类样本中抽取一个体E，分别在同类和异类样本中寻找k个最邻近样本，构成同类临近样本集F和异类临近样本集T，再以E与F和G中样本各特征平均差异的差值定义特征权重W。4.如权力要求1所述的一种基于多目标进化随机森林特征选择的关键质量特性识别方法，其特征在于：步骤2所述训练集和测试集是采用k折交叉验证法产生，其中将数据按样本量平均分为k部分，取k-1部分为训练集，1部分为测试集。5.如权力要求1所述的一种基于多目标进化随机森林特征选择的关键质量特性识别方法，其特征在于：步骤3所述“多目标进化随机森林特征选择算法”中由两部分组成，一是多目标进化算法，选取NSGAⅡ算法，利用Matlab软件实现；二是随机森林分类器，利用Python实现，整体算法实现过程由Matlab和Python交互实现。6.如权力要求1所述的一种基于多目标进化随机森林特征选择的关键质量特性识别方法，其特征在于：步骤3所述“多目标进化随机森林特征选择算法”算法种群个体为被选择的质量特性集合s，目标函数由生产实际要求给出，包括但不限于：MinF={f1,f2,f3},f1为分类错误率,f2为Relief F算法下s的权重和的倒数，f3为特征子集大小。7.如权力要求1所述的一种基于多目标进化随机森林特征选择的关键质量特性识别方法，其特征在于：步骤3中所述“将训练数据集输入多目标进化随机森林特征选择算法”中训练集将被分为内部训练集和内部测试集，内部训练集用于训练随机森林模型分类器，内部测试集用来评估算法生成的被选择的质量特性集合s的部分目标函数值。8.一种基于多目标进化随机森林特征选择的关键质量特性识别方法，其特征在于：步骤4所述验证和评估方法，采取上述k折交叉验证方法，共k种测试数据集，共进行k次验证，取k次验证的各目标平均值。
说明书desc
技术领域本发明提供一种基于多目标进化随机森林特征选择的关键质量特性识别方法，属于质量管理领域。背景技术在如今现代化的工业生产中，产品生产过程中会产生海量的过程数据和质量特性数据，其中有生产环境数据、产品特性数据、装配特性数据和客户需求特性数据等等。其中一些质量特性对产品的质量有十分重要的影响，有些却对其影响甚微，因此，识别与产品质量密切相关的关键质量特性对产品的持续性改进、产品的质量预测以及产品的质量控制具有十分重要的意义。传统的关键质量特性识别方法包括关键特性展开和质量功能展开，关键特性展开方法对产品整体逐层分解，对产品从产品特性、部件特性、零件特性、工艺特性等方面逐层展开，之后应用定性、定量的分析方法，从中识别关键质量特性。质量功能展开方法体现了客户需求导向，关注客户最关注的部分质量特性，但是单纯依据客户需求容易忽略潜在的关键质量特性。复杂产品包含大量零部件级质量特性，质量特性间影响关系复杂，传统定性、定量方法难以确定各质量特性的相互影响和关键程度。本发明在多目标优化算法和机器学习模型结合的基础上，利用工业生产中的质量特性数据，给出了关键质量特性的识别方法。用于生产过程中的产品持续性改进，提高产品质量控制及产品质量预测等能力。发明内容发明目的本发明的目的是提供一种基于多目标进化随机森林特征选择的关键质量特性识别方法，以解决目前传统定性定量方法难以识别和确定关键质量特性的问题。技术方案本发明为解决上述问题提供了一种基于多目标进化随机森林特征选择的关键质量特性识别方法，如附图1所示，该方法包括以下步骤：步骤1：通过车间数字化检测来获取生产过程中的多元质量特性数据信息，包含若干过程参数、产品尺寸参数和产品等级分类等质量特性，这些质量特性是影响产品整体质量水平的重要因素，从而形成产品质量特性数据集；步骤2：利用Relief F算法对参与分类的质量特性进行初选，将初选后的数据集划分为两部分：产品质量特性训练数据集与产品质量特性测试数据集；步骤3：将训练数据集分为内部训练集和内部测试集，内部训练集用于训练随机森林模型分类器，内部测试集用来评估算法生成的被选择的质量特性集合s的部分目标函数值。然后输入多目标进化随机森林特征选择算法，建立多个相对应算法目标，生成初始种群，设置迭代种群代数，得到优势关键质量特性集；步骤4：利用测试数据集和关键质量特性集训练后的随机森林分类器对得到的关键质量特性集进行验证和评估。其中，在步骤1中所述“产品质量特性数据集”，其构成如附图2所示，是指是指对同一研究对象而言，具有一定数量的质量特性、一定数量的样本和每个样本明确分类的数据集。其中，在步骤2中所述“Relief F算法对参与分类的质量特性进行初选”，具体算法流程如附图3所示，具体方法如下：2-1：在某类样本中抽取一个体E，分别在同类和异类样本中寻找k个最邻近样本，构成同类临近样本集F和异类临近样本集G；2-2：再以E与F和G中样本各特征平均差异的差值定义特征权重W。对于任意特征m，完成n次抽样的特征权重Wm计算式为：式中：c表示异类样本的样本类别；E表示个体E特征 m 的值；Fj表示第j个最邻近同类样本特征m的值；p 表示异类样本类别为c的概率；class表示个体E的类别；P)表示样本类别与E相同的概率；Gj表示第j个最邻近c类样本特征m的值；特征权重越大，说明该特征使得样本的类间距离大，类内距离小，对类别识别作用大；2-3：剔除类间距离小于类内距离的质量特性，将初选后的数据集划分为两部分：产品质量特性训练数据集与产品质量特性测试数据集，所述训练集和测试集是采用k折交叉验证法产生，其中将数据按样本量平均分为k部分，取k-1部分为训练集，1部分为测试集。其中，在步骤3中所述“多目标进化随机森林特征选择算法”算法流程如图4所示。算法流程由两部分组成，一是多目标进化算法，选取NSGAⅡ算法，利用Matlab软件实现。二是随机森林分类器，利用Python实现。整体算法实现过程由Matlab和Python交互实现。其中，在步骤3中所述“多目标进化随机森林特征选择算法”算法中，多目标进化算法，选取NSGAⅡ算法，其种群中的个体基因编码方式采用二进制编码方法，令解s的编码为C，则C=为1×N的向量。N为总质量特性数量，每个元素ci∈{0,1}代表第i个特征有没有被选择，若是为‘1’则被选择，为‘0’则没被选择。每个编码对应一个解，也就是一个质量特性子集。其中，在步骤3中所述“多目标进化随机森林特征选择算法”算法中，其种群中遗传方式为二进制锦标赛选择，每次从父代群体中选择两个个体，对比两个个体，更优者加入子代群体。其中，在步骤3中所述“多目标进化随机森林特征选择算法”算法中，其种群中个体之间的交叉方法选用单点交叉方法，个体C1=，C2=以交叉概率pc进行交叉操作生成两个新个体：C1=，C2=。其中，在步骤3中所述“多目标进化随机森林特征选择算法”算法中，其种群中个体的变异方式选用多点变异方法，个体C=每个基因以变异概率pm进行变异操作生成新个体：若原位为‘0’则变异为‘1’，原位为‘1’，则变异为‘0’。其中，在步骤3中所述“多目标进化随机森林特征选择算法”算法中，多目标进化算法选取NSGAⅡ算法，其算法目标由实际生产要求设置，包括但不限于Min F={f1,f2,f3}，f1 为分类错误率,f2为Relief F算法下s的权重和的倒数,f3为质量特性子集大小。其中，在步骤3中所述“多目标进化随机森林特征选择算法”算法中，其种群中个体的非支配排序依据为：对于最小化多目标优化问题，对于n个目标分量 fi,，任意给定两个决策变量Xa ,Xb，如果有以下两个条件成立，则称Xa支配Xb：对于任意i∈1,2,…,n，都有fi≤fi成立；存在i∈1,2,…,n，使得fi≤fi成立；如果对于一个决策变量，不存在其他决策变量能够支配他，那么就称该决策变量为非支配解，在一组解中，非支配解Pareto等级定义为1，将非支配解从解的集合中删除，剩下解的Pareto等级定义为2，依次类推，可以得到该解集合中所有解的Pareto等级，Pareto等级排序如图5所示。其中，在步骤3中所述“多目标进化随机森林特征选择算法”算法中，其种群中同一非支配等级个体的拥挤度排序依据为：拥挤度表示在种群中给定点的周围个体的密度，用id表示，直观上用个体i周围包含个体i但不包含其余个体的最大长方形的长来表示，如附图6所示。其中，步骤3具体方法如下：3-1：初始化种群，随机产生种群Pt，Pt中每个个体都是一些被选择的质量特性的集合s；3-2：对种群Pt进行遗传、交叉和变异得到种群Pt’；3-3：利用算法设置的目标函数对种群Rt=Pt +Pt’每个个体进行适应度评价，每个个体都会获得目标值{f1,f2,f3}；3-4：利用快速非支配排序方法对Rt每个个体进行非支配等级排序；3-5：选择当前非支配等级最小的个体入选种群Pt+1，直至Pt+1种群无法容纳下一等级为止；3-6：利用拥挤距离分配方法对下一非支配等级个体进行拥挤距离排序；3-7：选择拥挤距离最大的个体入选种群Pt+1，直至补全种群Pt+1；3-8：重复步骤3-2至3-7，直到达到算法终止条件。输出算法终止后的种群个体，解码后就是识别出的关键质量特性集合；具体的，步骤3-3中，所述“适应度评价”，具体步骤为：3-3-1：将R中每个个体解码为对应的质量特性集合；3-3-2：解码后对应的质量特性集合，质量特性的数量为适应度函数f3的值；3-3-3：解码后对应的质量特性集合，对应Relief F算法下s的权重和的倒数为函数f2的值；3-3-4：抽取内部训练集相对应的质量特性数据集分别对随机森林分类器进行训练；3-3-5：抽取内部测试集相对应的质量特性数据集分别对训练后的随机森林分类器验证预测精度，得出适应度函数f1的值。其中，在步骤4中所述“利用测试数据集对得到的关键质量特性集进行验证和评估”中具体验证方法为抽取测试集相对应的质量特性数据集分别对训练后的随机森林分类器验证预测精度，同样采用k折交叉验证方法。附图说明图1是本发明所述方法的流程框图。图2是产品质量特性数据集的结构图。图3是Relief F算法流程图。图4是多目标进化随机森林特征选择算法流程图。图5是非支配排序后Pareto等级排序图。图6是拥挤度排序依据原理图。图7是多目标进化随机森林特征选择算法的种群进化方式图。具体实施方式本发明提供了一种基于多目标进化随机森林特征选择的关键质量特性识别方法，下面将结合附图对发明做进一步详细说明。步骤1通过车间数字化检测来获取生产过程中的多元质量特性数据信息，包含若干过程参数、产品尺寸参数和产品等级分类等质量特性，这些质量特性是影响产品整体质量水平的重要因素，从而形成产品质量特性数据集。其中“产品质量特性数据集”，其构成如附图2所示，是指是指对同一研究对象而言，具有一定数量的质量特性、一定数量的样本和每个样本明确分类的数据集。步骤2利用Relief F算法对参与分类的质量特性进行初选，将初选后的数据集划分为两部分：产品质量特性训练数据集与产品质量特性测试数据集。其中所述“Relief F算法对参与分类的质量特性进行初选”，具体算法流程如附图3所示，具体方法如下：2-1：在某类样本中抽取一个体E，分别在同类和异类样本中寻找k个最邻近样本，构成同类临近样本集F和异类临近样本集G；2-2：再以E与F和G中样本各特征平均差异的差值定义特征权重W。对于任意特征m，完成n次抽样的特征权重Wm计算式为：式中：c表示异类样本的样本类别；E表示个体E特征 m 的值；Fj表示第j个最邻近同类样本特征m的值；p 表示异类样本类别为c的概率；class表示个体E的类别；P)表示样本类别与E相同的概率；Gj表示第j个最邻近c类样本特征m的值；特征权重越大，说明该特征使得样本的类间距离大，类内距离小，对类别识别作用大；2-3：剔除类间距离小于类内距离的质量特性，将初选后的数据集划分为两部分：产品质量特性训练数据集与产品质量特性测试数据集，所述训练集和测试集是采用k折交叉验证法产生，其中将数据按样本量平均分为k部分，取k-1部分为训练集，1部分为测试集。步骤3将训练数据集分为内部训练集和内部测试集，内部训练集用于训练随机森林模型分类器，内部测试集用来评估算法生成的被选择的质量特性集合s的部分目标函数值。然后输入多目标进化随机森林特征选择算法，建立多个相对应算法目标，生成初始种群，设置迭代种群代数，得到优势关键质量特性集。“多目标进化随机森林特征选择算法”算法流程如附图4所示。算法流程由两部分组成，一是多目标进化算法，选取NSGAⅡ算法，利用Matlab软件实现。二是随机森林分类器，利用Python实现。整体算法实现过程由Matlab和Python交互实现。步骤3具体方法如下：3-1：初始化种群，随机产生种群Pt，Pt中每个个体都是一些被选择的质量特性的集合s。种群中的个体基因编码方式采用二进制编码方法，令解s的编码为C，则C=为1×N的向量。N为总质量特性数量，每个元素ci∈{0,1}代表第i个特征有没有被选择，若是为‘1’则被选择，为‘0’则没被选择。每个编码对应一个解，也就是一个质量特性子集；3-2：对种群Pt进行遗传、交叉和变异得到种群Pt。具体步骤如下：3-2-1：其种群中遗传方式为二进制锦标赛选择，每次从父代群体中选择两个个体，对比两个个体，更优者加入子代群体；3-2-2：种群中个体之间的交叉方法选用单点交叉方法，个体C1=，C2=以交叉概率pc进行交叉操作生成两个新个体：C1=，C2=；3-2-3：种群中个体的变异方式选用多点变异方法，个体C=每个基因以变异概率pm进行变异操作生成新个体：若原位为‘0’则变异为‘1’，原位为‘1’，则变异为‘0’；3-3：利用算法设置的目标函数对种群Rt=Pt +Pt’其算法目标由实际生产要求设置，包括但不限于Min F={f1,f2,f3}，f1 为分类错误率,f2为Relief F算法下s的权重和的倒数,f3为质量特性子集大小，对每个个体进行适应度评价，每个个体都会获得目标值{f1,f2,f3}，具体步骤为：3-3-1：将R中每个个体解码为对应的质量特性集合；3-3-2：解码后对应的质量特性集合，质量特性的数量为适应度函数f3的值；3-3-3：解码后对应的质量特性集合，对应Relief F算法下s的权重和的倒数为函数f2的值；3-3-4：抽取内部训练集相对应的质量特性数据集分别对随机森林分类器进行训练；3-3-5：抽取内部测试集相对应的质量特性数据集分别对训练后的随机森林分类器验证预测精度，得出适应度函数f1的值；3-4：利用快速非支配排序方法对Rt每个个体进行非支配等级排序，具体步骤如下：种群中个体的非支配排序依据为：对于最小化多目标优化问题，对于n个目标分量fi,，任意给定两个决策变量Xa ,Xb，如果有以下两个条件成立，则称Xa支配Xb：1，对于任意i∈1,2,…,n，都有fi≤fi成立；2，存在i∈1,2,…,n，使得fi≤fi成立；如果对于一个决策变量，不存在其他决策变量能够支配他，那么就称该决策变量为非支配解，在一组解中，非支配解Pareto等级定义为1，将非支配解从解的集合中删除，剩下解的Pareto等级定义为2，依次类推，可以得到该解集合中所有解的Pareto等级，Pareto等级排序如图5所示；3-5：选择当前非支配等级最小的个体入选种群Pt+1，直至Pt+1种群无法容纳下一等级为止；3-6：利用拥挤距离分配方法对下一非支配等级个体进行拥挤距离排序，具体方法为：种群中同一非支配等级个体的拥挤度排序依据为：拥挤度表示在种群中给定点的周围个体的密度，用id表示，直观上用个体i周围包含个体i但不包含其余个体的最大长方形的长来表示，如图6所示；3-7：选择拥挤距离最大的个体入选种群Pt+1，直至补全种群Pt+1。如图7所示为种群的进化过程，包括步骤3-4至3-7；3-8：重复步骤3-2至3-7，直到达到算法终止条件。输出算法终止后的种群个体，解码后就是识别出的关键质量特性集合。步骤4利用测试数据集和关键质量特性集训练后的随机森林分类器对得到的关键质量特性集进行验证和评估，具体验证方法为抽取测试集相对应的质量特性数据集分别对训练后的随机森林分类器验证预测精度，同样采用k折交叉验证方法。最后需要说明的是，以上实施方式仅用以说明发明的技术方案而非限制，尽管申请人对本发明进行了详细说明，本领域的普通技术人员应当理解，那些对本发明的技术方案进行修改或者等同替换，而不脱离本发明技术方案的宗旨和范围，均应涵盖在本发明的权利要求范围当中。
