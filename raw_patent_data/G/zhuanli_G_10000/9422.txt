标题title
车道线位置确定方法、装置、车载终端及存储介质
摘要abst
本申请公开了一种车道线位置确定方法、装置、车载终端及存储介质，属于自动驾驶技术领域。本申请通过IMU前N个时刻的俯仰角得到俯仰角补偿值，用所得到的俯仰角补偿值对IMU的标定俯仰角进行补偿，得到目标俯仰角，用该目标俯仰角代替拍摄装置的俯仰角，在IMU的坐标系下进行车道线位置的确定。在获取该目标俯仰角的过程中，考虑了IMU前N个时刻的俯仰角，由于这些俯仰角能够体现车辆在一段时间内的行驶状态，且并不依赖拍摄装置收集的图像，因此，该目标俯仰角的准确性高于基于图像获取的拍摄装置的俯仰角，基于该目标俯仰角来获取车道线的位置，能够提高对车道线位置确定的准确性。
权利要求书clms
1.一种车道线位置确定方法，其特征在于，由车辆上配置的车载终端执行，所述车辆还配置有惯性测量单元IMU，所述IMU与所述车载终端连接，所述方法包括：响应于检测到所述IMU当前时刻的俯仰角符合第一条件，基于所述IMU前N个时刻的N个俯仰角与所述IMU当前时刻的俯仰角，获取俯仰角补偿值，N为大于0的整数；基于所述俯仰角补偿值，对所述IMU的标定俯仰角进行补偿，得到目标俯仰角；基于所述目标俯仰角与拍摄装置所采集的图像，获取当前时刻车道线的位置；其中，所述第一条件为所述IMU的俯仰角发生超过目标区间的波动。2.根据权利要求1所述的方法，其特征在于，所述响应于检测到所述IMU当前时刻的俯仰角符合第一条件，基于所述IMU前N个时刻的N个俯仰角与所述IMU当前时刻的俯仰角，获取俯仰角补偿值包括：获取所述IMU前N个时刻的N个俯仰角，从所述IMU的N个俯仰角中，确定多个第一俯仰角，所述第一俯仰角为不符合第一条件的俯仰角；基于所述多个第一俯仰角，获取第一统计数据和第二统计数据，所述第一统计数据为所述多个第一俯仰角的平均值，所述第二统计数据为所述多个第一俯仰角的方差；响应于检测到所述IMU当前时刻的俯仰角符合第一条件，将所述第一统计数据与所述IMU当前时刻的俯仰角的差值，作为所述俯仰角补偿值。3.根据权利要求2所述的方法，其特征在于，所述从所述IMU的N个俯仰角中，确定多个不符合第一条件的俯仰角之前，所述方法还包括：在初始化过程中，为N赋初始值，所述初始值为所述车辆在行驶目标距离的过程中所获取的所述IMU的俯仰角的数量；基于N的所述初始值，获取所述IMU前第一数量时刻的第一数量的俯仰角；响应于所述车辆的累计行驶距离大于第一阈值，且，所述第一数量大于第二阈值，且，所述IMU第一数量的俯仰角的方差小于第三阈值，将所述初始值作为N，完成初始化过程。4.根据权利要求3所述的方法，其特征在于，所述方法还包括：在所述车辆行驶目标距离的过程中，获取从当前时刻到开始进行初始化的时刻之间所述IMU的M个俯仰角，M为大于0且小于或等于N的整数；响应于所述IMU的M个俯仰角的方差大于初始化方差，清空所述IMU的M个俯仰角，将所述车辆的累计行驶距离置零，重新进行初始化。5.根据权利要求1所述的方法，其特征在于，所述方法还包括：响应于所述IMU前N个时刻的N个俯仰角满足第二条件，清空所述IMU前N个时刻的N个俯仰角，将所述车辆的累计行驶距离和N置零，重新进行初始化。6.根据权利要求5所述的方法，其特征在于，所述第二条件包括下述任一项：所述IMU的N个俯仰角中，所述第一俯仰角的数量小于第四阈值；所述IMU的N个俯仰角中，所述第一俯仰角的数量小于第二俯仰角的数量，所述第二俯仰角为符合第一条件的俯仰角；所述IMU的N个俯仰角对应的有效累计距离小于第五阈值，所述有效累计距离为所述IMU的N个俯仰角中，多个第一俯仰角对应的行驶距离的总和，任一第一俯仰角对应的行驶距离为：所述第一俯仰角对应时刻与上一时刻之间，所述车辆行驶的距离。7.根据权利要求1所述的方法，其特征在于，所述基于所述目标俯仰角与拍摄装置所采集的图像，获取当前时刻车道线的位置包括：基于第一转化矩阵，获取当前时刻所述图像中多个像素点的第一坐标；基于第二转化矩阵、所述图像中多个像素点的第一坐标和所述目标俯仰角，获取当前时刻所述图像中多个像素点的第二坐标；基于所述多个像素点的第二坐标和所述多个像素点的类别，获取当前时刻车道线的位置。8.根据权利要求1所述的方法，其特征在于，所述第一条件为：所述IMU的俯仰角不属于目标区间，且，所述IMU的俯仰角与所述IMU的俯仰角对应时刻的上一时刻IMU的俯仰角的差值的绝对值小于第六阈值；其中，对于任一时刻，所述目标区间基于所述时刻所获取的IMU的N个俯仰角中，多个第一俯仰角对应的第一统计数据和第二统计数据获得，所述目标区间的下限为所述时刻第一统计数据与目标倍数的所述时刻第二统计数据相减的数值，所述目标区间的上限为所述时刻第一统计数据与目标倍数的所述时刻第二统计数据相加的数值。9.一种车道线位置确定装置，其特征在于，所述装置包括：获取模块，用于响应于检测到所述IMU当前时刻的俯仰角符合第一条件，基于所述IMU前N个时刻的N个俯仰角与所述IMU当前时刻的俯仰角，获取俯仰角补偿值，N为大于0的整数；补偿模块，用于基于所述俯仰角补偿值，对所述IMU的标定俯仰角进行补偿，得到目标俯仰角；所述获取模块，用于基于所述目标俯仰角与拍摄装置所采集的图像，获取当前时刻车道线的位置；其中，所述第一条件为所述IMU的俯仰角发生超过目标区间的波动。10.一种车载终端，其特征在于，所述车载终端包括一个或多个处理器和一个或多个存储器，所述一个或多个存储器中存储有至少一条计算机程序，所述至少一条计算机程序由所述一个或多个处理器加载并执行，以实现如权利要求1至权利要求8任一项所述车道线位置确定方法。11.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质中存储有至少一条计算机程序，所述至少一条计算机程序由处理器加载并执行，以实现如权利要求1至权利要求8任一项所述车道线位置确定方法。
说明书desc
技术领域本申请涉及自动驾驶技术领域，特别涉及一种车道线位置确定方法、装置、车载终端及存储介质。背景技术在车辆的自动驾驶系统中，往往会通过车辆中的传感器与地面之间的俯仰角，来估计路面上车道线位置，从而进行精确的路线规划。然而，在车辆行驶过程中，往往会因为车辆振动使传感器的俯仰角发生变化，导致所估计的车道线位置不准确，因此需要实时对传感器的俯仰角进行估计，以保证准确的对路面像素点的位置进行估计。目前，车道线位置估计的方法为：检测相机拍摄图像中的消失点，基于消失点在图像中的位置获取相机的俯仰角，基于相机的俯仰角和相机拍摄的图像估计车道线的位置。上述技术中，消失点检测的准确性会受到当前相机所拍摄的图像的影响，若当前的图像中不包括两条平行的车道线，则所检测出的消失点准确性很低，使得基于消失点所获取的相机俯仰角的准确性低，从而导致对车道线位置估计的准确性差。发明内容本申请实施例提供了一种车道线位置确定方法方法、装置、设备及存储介质，由车载终端执行，该方法能够准确地进行车道线位置的确定。该技术方案如下：一方面，提供了一种车道线位置确定方法，该方法包括：响应于检测到该IMU当前时刻的俯仰角符合第一条件，基于该IMU前N个时刻的N个俯仰角与该IMU当前时刻的俯仰角，获取俯仰角补偿值，N为大于0的整数；基于该俯仰角补偿值，对该IMU的标定俯仰角进行补偿，得到目标俯仰角；基于该目标俯仰角与拍摄装置所采集的图像，获取当前时刻车道线的位置；其中，该第一条件为该IMU的俯仰角发生超过目标区间的波动。在一些实施例中，该响应于检测到该IMU当前时刻的俯仰角符合第一条件，基于该IMU前N个时刻的N个俯仰角与该IMU当前时刻的俯仰角，获取俯仰角补偿值包括：获取该IMU前N个时刻的N个俯仰角，从该IMU的N个俯仰角中，确定多个第一俯仰角，该第一俯仰角为不符合第一条件的俯仰角；基于该多个第一俯仰角，获取第一统计数据和第二统计数据，该第一统计数据为该多个第一俯仰角的平均值，该第二统计数据为该多个第一俯仰角的方差；响应于检测到该IMU当前时刻的俯仰角符合第一条件，将该第一统计数据与该IMU当前时刻的俯仰角的差值，作为该俯仰角补偿值。在一些实施例中，该从该IMU的N个俯仰角中，确定多个不符合第一条件的俯仰角之前，该方法还包括：在初始化过程中，为N赋初始值，该初始值为该车辆在行驶目标距离的过程中所获取的该IMU的俯仰角的数量；基于N的该初始值，获取该IMU前第一数量时刻的第一数量的俯仰角；响应于该车辆的累计行驶距离大于第一阈值，且，该第一数量大于第二阈值，且，该IMU第一数量的俯仰角的方差小于第三阈值，将该初始值作为N，完成初始化过程。在一些实施例中，该方法还包括：该车辆在行驶目标距离的过程中，获取从当前时刻到开始进行初始化的时刻之间该IMU的M个俯仰角，M为大于0且小于或等于N的整数；响应于该IMU的M个俯仰角的方差大于初始化方差，清空该IMU的M个俯仰角，将该车辆的累计行驶距离置零，重新进行初始化。在一些实施例中，该方法还包括：响应于该IMU前N个时刻的N个俯仰角满足第二条件，清空该IMU前N个时刻的N个俯仰角，将该车辆的累计行驶距离和N置零，重新进行初始化。在一些实施例中，该第二条件包括下述任一项：该IMU的N个俯仰角中，该第一俯仰角的数量小于第四阈值；该IMU的N个俯仰角中，该第一俯仰角的数量小于第二俯仰角的数量，该第二俯仰角为符合第一条件的俯仰角；该IMU的N个俯仰角对应的有效累计距离小于第五阈值，该有效累计距离为该IMU的N个俯仰角中，多个第一俯仰角对应的行驶距离的总和，任一第一俯仰角对应的行驶距离为：该第一俯仰角对应时刻与上一时刻之间，该车辆行驶的距离。在一些实施例中，该基于该目标俯仰角与拍摄装置所采集的图像，获取当前时刻车道线的位置包括：基于第一转化矩阵，获取当前时刻该图像中多个像素点的第一坐标；基于第二转化矩阵、该图像中多个像素点的第一坐标和该目标俯仰角，获取当前时刻该图像中多个像素点的第二坐标；基于该多个像素点的第二坐标和该多个像素点的类别，获取当前时刻车道线的位置。在一些实施例中，该第一条件为：该IMU的俯仰角不属于目标区间，且，该IMU的俯仰角与该IMU的俯仰角对应时刻的上一时刻IMU的俯仰角的差值的绝对值小于第六阈值；其中，对于任一时刻，该目标区间基于该时刻所获取的IMU的N个俯仰角中，多个第一俯仰角对应的第一统计数据和第二统计数据获得，该目标区间的下限为该时刻第一统计数据与目标倍数的该时刻第二统计数据相减的数值，该目标区间的上限为该时刻第一统计数据与目标倍数的该时刻第二统计数据相加的数值。一方面，提供了一种车道线位置确定装置，该装置包括：获取模块，用于响应于检测到该IMU当前时刻的俯仰角符合第一条件，基于该IMU前N个时刻的N个俯仰角与该IMU当前时刻的俯仰角，获取俯仰角补偿值，N为大于0的整数；补偿模块，用于基于该俯仰角补偿值，对该IMU的标定俯仰角进行补偿，得到目标俯仰角；该获取模块，用于基于该目标俯仰角与拍摄装置所采集的图像，获取当前时刻车道线的位置；其中，该第一条件为该IMU的俯仰角发生超过目标区间的波动。在一些实施例中，该获取模块，用于获取该IMU前N个时刻的N个俯仰角，从该IMU的N个俯仰角中，确定多个第一俯仰角，该第一俯仰角为不符合第一条件的俯仰角；基于该多个第一俯仰角，获取第一统计数据和第二统计数据，该第一统计数据为该多个第一俯仰角的平均值，该第二统计数据为该多个第一俯仰角的方差；响应于检测到该IMU当前时刻的俯仰角符合第一条件，将该第一统计数据与该IMU当前时刻的俯仰角的差值，作为该俯仰角补偿值。在一些实施例中，该装置还包括：初始化模块，用于在初始化过程中，为N赋初始值，该初始值为该车辆在行驶目标距离的过程中所获取的该IMU的俯仰角的数量；基于N的该初始值，获取该IMU前第一数量时刻的第一数量的俯仰角；响应于该车辆的累计行驶距离大于第一阈值，且，该第一数量大于第二阈值，且，该IMU第一数量的俯仰角的方差小于第三阈值，将该初始值作为N，完成初始化过程。在一些实施例中，该初始化模块，用于在该车辆行驶目标距离的过程中，获取从当前时刻到开始进行初始化的时刻之间该IMU的M个俯仰角，M为大于0且小于或等于N的整数；响应于该IMU的M个俯仰角的方差大于初始化方差，清空该IMU的M个俯仰角，将该车辆的累计行驶距离置零，重新进行初始化。在一些实施例中，该初始化模块，用于响应于该IMU前N个时刻的N个俯仰角满足第二条件，清空该IMU前N个时刻的N个俯仰角，将该车辆的累计行驶距离和N置零，重新进行初始化。在一些实施例中，该第二条件包括下述任一项：该IMU的N个俯仰角中，该第一俯仰角的数量小于第四阈值；该IMU的N个俯仰角中，该第一俯仰角的数量小于第二俯仰角的数量，该第二俯仰角为符合第一条件的俯仰角；该IMU的N个俯仰角对应的有效累计距离小于第五阈值，该有效累计距离为该IMU的N个俯仰角中，多个第一俯仰角对应的行驶距离的总和，任一第一俯仰角对应的行驶距离为：该第一俯仰角对应时刻与上一时刻之间，该车辆行驶的距离。在一些实施例中，该获取模块，用于基于第一转化矩阵，获取当前时刻该图像中多个像素点的第一坐标；基于第二转化矩阵、该图像中多个像素点的第一坐标和该目标俯仰角，获取当前时刻该图像中多个像素点的第二坐标；基于该多个像素点的第二坐标和该多个像素点的类别，获取当前时刻车道线的位置。在一些实施例中，该第一条件为：该IMU的俯仰角不属于目标区间，且，该IMU的俯仰角与该IMU的俯仰角对应时刻的上一时刻IMU的俯仰角的差值的绝对值小于第六阈值；其中，对于任一时刻，该目标区间基于该时刻所获取的IMU的N个俯仰角中，多个第一俯仰角对应的第一统计数据和第二统计数据获得，该目标区间的下限为该时刻第一统计数据与目标倍数的该时刻第二统计数据相减的数值，该目标区间的上限为该时刻第一统计数据与目标倍数的该时刻第二统计数据相加的数值。一方面，提供了一种车载终端，该车载终端包括一个或多个处理器和一个或多个存储器，该一个或多个存储器中存储有至少一条程序代码，该程序代码由该一个或多个处理器加载并执行，以实现该车道线位置确定方法所执行的操作。一方面，提供了一种计算机可读存储介质，该计算机可读存储介质中存储有至少一条计算机程序，该至少一条计算机程序由处理器加载并执行以实现该车道线位置确定方法所执行的操作。一方面，提供了一种计算机程序产品，该计算机程序产品包括至少一条计算机程序，该至少一条计算机程序存储在计算机可读存储介质中。车载终端的处理器从计算机可读存储介质读取该至少一条计算机程序，处理器执行该至少一条计算机程序，使得该车载终端实现该车道线位置确定方法所执行的操作。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本申请实施例提供的一种车道线位置确定方法的实施环境示意图；图2是本申请实施例提供的一种车道线位置确定方法的流程图；图3是本申请实施例提供的一种车道线位置确定方法的流程图；图4是本申请实施例提供的一种IMU的俯仰角的统计图；图5是本申请实施例提供的一种俯仰角补偿值的补偿效果示意图；图6是本申请实施例提供的一种针孔相机模型的示意图；图7是本申请实施例提供的一种IMU坐标系的示意图；图8是本申请实施例提供的一种IMU坐标系的示意图；图9是本申请实施例提供的一种车道线位置确定方法的结果图；图10是本申请实施例提供的一种车道线位置确定方法的结果对比图；图11是本申请实施例提供的一种车道线位置确定装置的结构示意图；图12是本申请实施例提供的一种车载终端的结构示意图。具体实施方式为使本申请的目的、技术方案和优点更加清楚，下面将结合附图对本申请实施方式作进一步地详细描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。本申请中术语“第一”“第二”等字样用于对作用和功能基本相同的相同项或相似项进行区分，应理解，“第一”、“第二”、“第n”之间不具有逻辑或时序上的依赖关系，也不对数量和执行顺序进行限定。图1是本申请实施例提供的一种车道线位置确定方法的实施环境示意图，参见图1，该实施环境包括：车载终端101和服务器102。车载终端101可以与车辆中的传感器进行通信，车辆中的传感器包括拍摄装置和IMU，该拍摄装置可以是单目相机、双目相机、摄像机或者其他拍摄装置，本实施例对此不作限定。该拍摄装置用于在车辆行驶的过程中收集路面环境的图像，并向车载终端101发送所收集的图像，IMU用于在车辆行驶过程中，测量车辆的姿态、行驶方向和加速度，车辆的姿态包括车辆的俯仰角、偏航角和横滚角，其中，车辆的俯仰角即为IMU与地面之间的俯仰角，IMU向车载终端101发送所测量的俯仰角。车载终端基于所接收的俯仰角对IMU的标定俯仰角进行补偿，并基于补偿后的俯仰角和所接收到图像进行车道线位置的确定。在一些实施例中，车载终端101通过有线或无线的方式与服务器102进行通信，本实施例对此不作限定。车载终端101将接收到的图像和俯仰角存储在车载终端的存储装置中，或者，车载终端101将接收到的图像和俯仰角发送给服务器102，由服务器102对接收到的图像进行存储。可选地，车载终端101将基于接收到的图像和俯仰角得到的车道线位置也发送给服务器102，由服务器102将车道线位置与接收到的图像和俯仰角对应存储。车载终端101可以泛指多个车载终端中的一个，本实施例仅以车载终端101来举例说明。本领域技术人员可以知晓，上述车载终端的数量可以更多或更少。比如上述车载终端可以仅为几个，或者上述车载终端为几十个或几百个，或者更多数量，本申请实施例对车载终端的数量和设备类型不加以限定。服务器102可以为一台服务器、多台服务器、云计算平台和虚拟化中心中的至少一种。服务器102接收车载终端101发送的图像和俯仰角，进而对接收到的图像和俯仰角进行存储。可选地，服务器102接收车载终端101发送的基于图像和俯仰角得到的车道线位置，进而将车道线位置与接收到的图像和俯仰角对应存储。可选地，上述服务器的数量可以更多或更少，本申请实施例对此不作限定。当然，服务器102还可以包括其他功能服务器，以便提供更全面且多样化的服务。基于图1所示的实施环境，图2是本申请实施例提供的一种车道线位置确定方法的流程图。该方法由车辆上配置的车载终端执行，该车辆还配置有惯性测量单元，该IMU与车载终端连接。在一种可能实现方式中，如图2所示，该实施例包括以下步骤。201、车载终端响应于检测到该IMU当前时刻的俯仰角符合第一条件，基于该IMU前N个时刻的N个俯仰角与该IMU当前时刻的俯仰角，获取俯仰角补偿值，N为大于0的整数。其中，IMU的俯仰角由IMU测量得到，该第一条件为IMU的俯仰角发生超过目标区间的波动。202、车载终端基于该俯仰角补偿值，对IMU的标定俯仰角进行补偿，得到目标俯仰角。其中，IMU的标定俯仰角是指：该IMU安装在车辆上时与地面的夹角，该标定俯仰角通过实验测量得到，作为内置参数存储在车载终端中。由于车辆在行驶过程中会受路面环境影响而发生震动，从而导致IMU与地面之间的俯仰角发生变化，因此需要对该IMU的标定俯仰角进行补偿。203、车载终端基于该目标俯仰角与拍摄装置所采集的图像，获取当前时刻车道线的位置。本申请实施例提供的技术方案，通过IMU前N个时刻的俯仰角得到俯仰角补偿值，用所得到的俯仰角补偿值对IMU的标定俯仰角进行补偿，得到目标俯仰角，用该目标俯仰角代替拍摄装置的俯仰角，在IMU的坐标系下进行车道线位置的确定。在获取该目标俯仰角的过程中，考虑了IMU前N个时刻的俯仰角，由于这些俯仰角能够体现车辆在一段时间内的行驶状态，且并不依赖拍摄装置收集的图像，因此，该目标俯仰角的准确性高于基于图像获取的拍摄装置的俯仰角，基于该目标俯仰角来获取车道线的位置，能够提高对车道线位置确定的准确性。上述实施例仅是对本申请实施例的简要介绍，以下结合图3，对本申请实施例提供的方案进行进一步阐述。图3是本申请实施例提供的一种车道线位置确定方法的流程图，该方法由车辆上配置的车载终端执行，参见图3，在一种可能实现方式中，该实施例包括以下步骤。301、车载终端进行初始化。在初始化过程中，车载终端为N赋初始值，该初始值为车辆在行驶目标距离的过程中所获取的IMU的俯仰角的数量，基于N的初始值，获取IMU的前第一数量时刻的第一数量的俯仰角。响应于车辆的累计行驶距离大于第一阈值，且，该第一数量大于第二阈值，且，IMU的第一数量的俯仰角的方差小于第三阈值，车载终端将该初始值作为N，完成初始化过程。在一些实施例中，上述条件表示为：num＞a&amp;&amp;cumulative_distance＞b&amp;&amp;sigma_pitch＞c，其中，num表示第一数量，cumulative_distance表示车辆行驶的累计距离，sigma_pitch表示IMU的第一数量俯仰角的方差。通过该初始化过程，能够保证后续所获取的俯仰角补偿值的准确性，从而对确定车道线位置起到了良好的指导作用。需要说明的是，车载终端为N赋初始值后，若所获取的IMU第一数量的俯仰角和该车辆行驶的累计距离不符合上述条件，则车载终端清空当前所获取的俯仰角，重新为N进行赋值，基于N的赋值继续进行初始化过程。在一些实施例中，上述初始化过程还包括：在车辆行驶目标距离的过程中，车载终端获取从当前时刻到开始进行初始化的时刻之间的IMU的M个俯仰角，M为大于0且小于或等于N的整数。响应于IMU的M个俯仰角的方差大于初始化方差，车载终端清空IMU的M个俯仰角，将车辆的累计行驶距离置零，重新进行初始化。其中，该初始化方差为预先设定的方差阈值，用于在初始化过程中检测所获取的IMU的俯仰角的有效性，记作initialized_sigma_threshold。通过判断该IMU的M个俯仰角的方差是否大于初始化方差，能够保证在车辆行驶目标距离过程中，所获取的俯仰角的有效性，使车载终端能够进行正确的初始化。302、车载终端获取IMU的俯仰角和拍摄装置采集的图像，该图像用于后续进行车道线位置的确定。在一些实施例中，以该拍摄装置是相机为例进行说明，在任一时刻，车载终端获取该时刻相机所采集的图像和IMU测量的IMU的俯仰角，并将该时刻获取的IMU的俯仰角、图像和对应的时间戳进行存储，该时间戳用于表示获取IMU的俯仰角和图像的时间，车载终端能够基于该时间戳，获取任一时刻的IMU的俯仰角和图像，从而实现在任一时刻对车道线位置进行确定。303、车载终端响应于检测到IMU当前时刻的俯仰角符合第一条件，基于IMU前N个时刻的N个俯仰角与IMU当前时刻的俯仰角，获取俯仰角补偿值。在一些实施例中，车载终端获取IMU前N个时刻的N个俯仰角，从该IMU的N个俯仰角中，确定多个第一俯仰角，该第一俯仰角为不符合第一条件的俯仰角，基于多个第一俯仰角，获取第一统计数据和第二统计数据，该第一统计数据为多个第一俯仰角的平均值，记作mean，该第二统计数据为多个第一俯仰角的方差，记作sigma。响应于车载终端检测到IMU当前时刻的俯仰角符合第一条件，将第一统计数据与IMU当前时刻的俯仰角的差值，作为俯仰角补偿值，记作compensation_pitch＝mean-current_pitch。其中，该第一条件为IMU的俯仰角发生超过目标区间的波动，对于任一时刻，该目标区间基于该时刻所获取的IMU的N个俯仰角中，多个第一俯仰角对应的第一统计数据和第二统计数据获得，该目标区间的下限为该时刻第一统计数据与目标倍数的该时刻第二统计数据相减的数值，该目标区间的上限为该时刻第一统计数据与目标倍数的该时刻第二统计数据相加的数值，可选地，该目标倍数为3，以当前时刻为例进行说明，该目标区间的下限为mean-3×sigma，该目标区间的上限为mean+3×sigma，该目标区间记作。该第一条件为：IMU的俯仰角不属于目标区间，且，IMU的俯仰角与该IMU的俯仰角对应时刻的上一时刻IMU的俯仰角的差值的绝对值小于第六阈值。需要说明的是，车载终端会记录IMU当前时刻的俯仰角是否符合第一条件，具体地，车载终端将IMU当前时刻的俯仰角、时间戳和对应的标签进行存储，该标签用于表示IMU的俯仰角是否符合第一条件，例如，若IMU的俯仰角符合第一条件，则该IMU的俯仰角对应的标签为1，若IMU的俯仰角不符合第一条件，则该IMU的俯仰角对应的标签为0。车载终端从该IMU的N个俯仰角中，确定多个第一俯仰角时，基于该IMU的N个俯仰角对应的标签，确定多个标签为0的IMU的俯仰角作为该多个第一俯仰角，不需要基于该第一条件进行重新判断。在一些实施例中，本步骤303还包括：响应于该IMU前N个时刻的N个俯仰角满足第二条件，清空IMU前N个时刻的N个俯仰角，将该车辆的累计行驶距离和N置零，重新进行初始化。其中，该第二条件包括下述任一项：该IMU的N个俯仰角中，第一俯仰角的数量小于第四阈值；该IMU的N个俯仰角中，第一俯仰角的数量小于第二俯仰角的数量，该第二俯仰角为符合第一条件的俯仰角；该IMU的N个俯仰角对应的有效累计距离小于第五阈值，有效累计距离为该IMU的N个俯仰角中多个第一俯仰角对应的行驶距离的总和，任一第一俯仰角对应的行驶距离为：该第一俯仰角对应时刻与上一时刻之间，该车辆行驶的距离。在一些实施例中，上述第二条件记作：num＜d||num＜num||valid_cumulative_dist＜f。其中，num用于表示第一俯仰角的数量，num用于表示第二俯仰角的数量，valid_cumulative_dist用于表示有效累计距离。通过该第二条件，能够及时判断车辆行驶环境中是否有不合理的路面起伏，使车辆行驶在起伏较大的路面上时，车载终端重新进行初始化，保证所获取的IMU的N个俯仰角的有效性，使获取的俯仰角补偿值的准确性更高，对后续进行车道线位置的确定起到了良好的指导作用。图4是本申请实施例提供的一种IMU的俯仰角的统计图，如图4所示，图中展示了一段时间内车载终端所获取到的IMU的俯仰角，图中方框圈出的部分表示方框内IMU的俯仰角所对应的俯仰角补偿值。图5是本申请实施例提供的一种俯仰角补偿值的补偿效果示意图，图中展示了在一段时间内，用所获取的俯仰角补偿值补偿对应时刻所获取的IMU的俯仰角的效果，从图中可以看出，经过补偿后的IMU的俯仰角的分布变得更加规律。由此可以看出，基于本方案所获得的俯仰角补偿值准确性高，能够对确定车道线位置起到良好的指导作用。304、车载终端基于俯仰角补偿值，对IMU的标定俯仰角进行补偿，得到目标俯仰角。在一些实施例中，车载终端将该俯仰角补偿值与IMU的标定俯仰角相加，得到目标俯仰角，该IMU的标定俯仰角记作α。305、车载终端基于目标俯仰角与拍摄装置所采集的图像，获取当前时刻车道线的位置。在一些实施例中，本步骤305由以下步骤305A至步骤305C实现：305A、车载终端基于第一转化矩阵，获取当前时刻图像中多个像素点的第一坐标。其中，当前时刻图像所属的坐标系称为像素坐标系，拍摄装置所属的坐标系为相机坐标系，该多个像素点的第一坐标为该多个像素点在相机坐标系下的坐标，该第一转化矩阵为像素坐标系与相机坐标系之间的转化矩阵。对于任一像素点，如图6所示，车载终端基于当前时刻图像获取该像素点的像素坐标，根据经典的针孔相机模型，将该像素点的像素坐标转化为相机坐标，得到当前时刻该像素点的第一坐标，如公式所示，其中，u、v分别表示该像素点在像素坐标系中x轴、y轴上的坐标，Xc、Yc、Zc分别表示该像素点在相机坐标系中x轴、y轴、z轴上的坐标，也即是，该像素点的第一坐标，u0、v0分别表示拍摄装置的光心在像素坐标系中x轴、y轴的坐标，fx、fy表示拍摄装置的焦距f的像素坐标中x轴和y轴上的分量。305B、车载终端基于第二转化矩阵、多个像素点的第一坐标和目标俯仰角，获取当前时刻图像中多个像素点的第二坐标。其中，IMU所属的坐标系称为IMU坐标系，该多个像素点的第二坐标为该多个像素点在IMU坐标系下的坐标，该第二转化矩阵为IMU坐标系与相机坐标系之间的转化矩阵。对于任一像素点，在理想情况下，如图7所示，认为IMU与地面的平面假设有效，平面假设指认为IUM与地面是平行的，车载终端能够直接基于该第二转化矩阵得到该像素的第二坐标，但由于IMU安装在车辆上时会与地面产生夹角，该夹角即是该IMU的标定俯仰角，如图8所示，车载终端计算该像素点的第二坐标时，基于IMU的标定俯仰角对坐标进行相应的变化，则依然认为平面假设有效。然而，车辆行驶过程中由于车辆震动，会使得该平面假设失效，因此需要基于车辆的行驶情况对该标定俯仰角进行补偿。综上所述，获取当前时刻该像素点的第二坐标的方式如公式所示，其中，T表示第二转化矩阵，R表示目标俯仰角对应的旋转矩阵，该旋转矩阵为与IMU平行的平面到真实地平面的旋转矩阵，Ximu、Yimu、Zimu分别表示该像素点在IMU坐标系中x轴、y轴、z轴上的坐标，也即是，该像素点的第二坐标。基于上述公式，能够进行如下推导：令则可以得到令可以得到公式，X＝A-1b基于公式能够得到向量X，基于X能够得到该像素点在IMU坐标系中x轴的坐标Ximu和y轴的坐标Yimu，根据IMU距离地面的高度himu和目标俯仰角，能够得到该像素点在IMU坐标系中z轴的坐标Zimu。305C、车载终端基于多个像素点的第二坐标和多个像素点的类别，获取当前时刻车道线的位置。在一些实施例中，本步骤305C包括以下3个过程：过程1：获取像素点类别。车载终端将当前时刻图像输入语义分割模型，通过模型对该图像进行特征提取，并基于提取到的特征进行相应的语义分类过程，进而得到当前时刻图像中多个像素点的语义标注信息，该语义标注信息用于表示像素点的类别，如天空、草丛、车道线等，可选地，该语义分割模型为卷积神经网络。过程2：像素点聚类。车载终端基于该多个像素点的类别，从该多个像素点中确定多个车道线像素点，并基于该多个车道线像素点的第二坐标，对该多个车道线像素点进行聚类。可选地，该聚类的方式为：基于该多个车道线像素点的第二坐标，计算任意两个车道线像素点之间的距离，将距离小于距离阈值的多个车道线像素点作为一个类别。过程3：获取车道线位置。通过对多个车道线像素点进行聚类，将该多个车道线像素点分为至少一个类别，每个类别的车道线像素点能够表示一条车道线，任一车道线中的像素点的第二坐标能够表示该车道线当前时刻的位置。图9是本申请实施例提供的一种车道线位置确定方法的结果图，如图9所示，图中展示了拍摄装置采集的图像和基于本方法所得到的车道线的位置，从图中可以看出，本发明所提出的方法能够有效的进行车道线位置的确定。图10是本申请实施例提供的一种车道线位置确定方法的结果对比图，如图10所示，图中展示了不使用本方法所得到的车道线位置结果和使用本方法所得到的车道线位置结果，从图中可以看出，基于本方法所得到的车道线平行程度更好，车道线的位置更加准确，因此本方案能够有效的解决由于车辆震动而导致的平面假设失效问题，从而准确的对车道线位置进行确定。本申请实施例提供的技术方案，通过IMU前N个时刻的俯仰角得到俯仰角补偿值，用所得到的俯仰角补偿值对IMU的标定俯仰角进行补偿，得到目标俯仰角，用该目标俯仰角代替拍摄装置的俯仰角，在IMU的坐标系下进行车道线位置的确定。在获取该目标俯仰角的过程中，考虑了IMU前N个时刻的俯仰角，由于这些俯仰角能够体现车辆在一段时间内的行驶状态，且并不依赖拍摄装置收集的图像，因此，该目标俯仰角的准确性高于基于图像获取的拍摄装置的俯仰角，基于该目标俯仰角来获取车道线的位置，能够提高对车道线位置确定的准确性。图11是本申请实施例提供的一种车道线位置确定装置的结构示意图，参见图11，该装置包括：获取模块1101，用于响应于检测到该IMU当前时刻的俯仰角符合第一条件，基于该IMU前N个时刻的N个俯仰角与该IMU当前时刻的俯仰角，获取俯仰角补偿值，N为大于0的整数；补偿模块1102，用于基于该俯仰角补偿值，对该IMU的标定俯仰角进行补偿，得到目标俯仰角；该获取模块1101，用于基于该目标俯仰角与拍摄装置所采集的图像，获取当前时刻车道线的位置；其中，该第一条件为该IMU的俯仰角发生超过目标区间的波动。在一些实施例中，该获取模块1101，用于获取该IMU前N个时刻的N个俯仰角，从该IMU的N个俯仰角中，确定多个第一俯仰角，该第一俯仰角为不符合第一条件的俯仰角；基于该多个第一俯仰角，获取第一统计数据和第二统计数据，该第一统计数据为该多个第一俯仰角的平均值，该第二统计数据为该多个第一俯仰角的方差；响应于检测到该IMU当前时刻的俯仰角符合第一条件，将该第一统计数据与该IMU当前时刻的俯仰角的差值，作为该俯仰角补偿值。在一些实施例中，该装置还包括：初始化模块，用于在初始化过程中，为N赋初始值，该初始值为该车辆在行驶目标距离的过程中所获取的该IMU的俯仰角的数量；基于N的该初始值，获取该IMU前第一数量时刻的第一数量的俯仰角；响应于该车辆的累计行驶距离大于第一阈值，且，该第一数量大于第二阈值，且，该IMU第一数量的俯仰角的方差小于第三阈值，将该初始值作为N，完成初始化过程。在一些实施例中，该初始化模块，用于在该车辆行驶目标距离的过程中，获取从当前时刻到开始进行初始化的时刻之间该IMU的M个俯仰角，M为大于0且小于或等于N的整数；响应于该IMU的M个俯仰角的方差大于初始化方差，清空该IMU的M个俯仰角，将该车辆的累计行驶距离置零，重新进行初始化。在一些实施例中，该初始化模块，用于响应于该IMU前N个时刻的N个俯仰角满足第二条件，清空该IMU前N个时刻的N个俯仰角，将该车辆的累计行驶距离和N置零，重新进行初始化。在一些实施例中，该第二条件包括下述任一项：该IMU的N个俯仰角中，该第一俯仰角的数量小于第四阈值；该IMU的N个俯仰角中，该第一俯仰角的数量小于第二俯仰角的数量，该第二俯仰角为符合第一条件的俯仰角；该IMU的N个俯仰角对应的有效累计距离小于第五阈值，该有效累计距离为该IMU的N个俯仰角中，多个第一俯仰角对应的行驶距离的总和，任一第一俯仰角对应的行驶距离为：该第一俯仰角对应时刻与上一时刻之间，该车辆行驶的距离。在一些实施例中，该获取模块1101，用于基于第一转化矩阵，获取当前时刻该图像中多个像素点的第一坐标；基于第二转化矩阵、该图像中多个像素点的第一坐标和该目标俯仰角，获取当前时刻该图像中多个像素点的第二坐标；基于该多个像素点的第二坐标和该多个像素点的类别，获取当前时刻车道线的位置。在一些实施例中，该第一条件为：该IMU的俯仰角不属于目标区间，且，该IMU的俯仰角与该IMU的俯仰角对应时刻的上一时刻IMU的俯仰角的差值的绝对值小于第六阈值；其中，对于任一时刻，该目标区间基于该时刻所获取的IMU的N个俯仰角中，多个第一俯仰角对应的第一统计数据和第二统计数据获得，该目标区间的下限为该时刻第一统计数据与目标倍数的该时刻第二统计数据相减的数值，该目标区间的上限为该时刻第一统计数据与目标倍数的该时刻第二统计数据相加的数值。图12是本申请实施例提供的一种车载终端的结构示意图。车载终端1200还可能被称为用户设备、便携式车载终端、膝上型车载终端、台式车载终端等其他名称。通常，车载终端1200包括有：一个或多个处理器1201和一个或多个存储器1202。处理器1201可以包括一个或多个处理核心，比如4核心处理器、8核心处理器等。处理器1201可以采用数字信号处理、现场可编程门阵列、可编程逻辑阵列中的至少一种硬件形式来实现。处理器1201也可以包括主处理器和协处理器，主处理器是用于对在唤醒状态下的数据进行处理的处理器，也称中央处理器；协处理器是用于对在待机状态下的数据进行处理的低功耗处理器。在一些实施例中，处理器1201可以在集成有图像处理器，GPU用于负责显示屏所需要显示的内容的渲染和绘制。一些实施例中，处理器1201还可以包括人工智能处理器，该AI处理器用于处理有关机器学习的计算操作。存储器1202可以包括一个或多个计算机可读存储介质，该计算机可读存储介质可以是非暂态的。存储器1202还可包括高速随机存取存储器，以及非易失性存储器，比如一个或多个磁盘存储设备、闪存存储设备。在一些实施例中，存储器1202中的非暂态的计算机可读存储介质用于存储至少一条程序代码，该至少一条程序代码用于被处理器1201所执行以实现本申请中方法实施例提供的车道线位置确定方法。在一些实施例中，车载终端1200还可选包括有：外围设备接口1203和至少一个外围设备。处理器1201、存储器1202和外围设备接口1203之间可以通过总线或信号线相连。各个外围设备可以通过总线、信号线或电路板与外围设备接口1203相连。具体地，外围设备包括：射频电路1204、显示屏1205、音频电路1206、定位组件1207和电源1208中的至少一种。外围设备接口1203可被用于将输入/输出相关的至少一个外围设备连接到处理器1201和存储器1202。在一些实施例中，处理器1201、存储器1202和外围设备接口1203被集成在同一芯片或电路板上；在一些其他实施例中，处理器1201、存储器1202和外围设备接口1203中的任意一个或两个可以在单独的芯片或电路板上实现，本实施例对此不加以限定。射频电路1204用于接收和发射射频信号，也称电磁信号。射频电路1204通过电磁信号与通信网络以及其他通信设备进行通信。射频电路1204将电信号转换为电磁信号进行发送，或者，将接收到的电磁信号转换为电信号。可选地，射频电路1204包括：天线系统、RF收发器、一个或多个放大器、调谐器、振荡器、数字信号处理器、编解码芯片组、用户身份模块卡等等。射频电路1204可以通过至少一种无线通信协议来与其它车载终端进行通信。该无线通信协议包括但不限于：城域网、各代移动通信网络、无线局域网和/或无线保真网络。在一些实施例中，射频电路1204还可以包括近距离无线通信有关的电路，本申请对此不加以限定。显示屏1205用于显示用户界面。该UI可以包括图形、文本、图标、视频及其它们的任意组合。当显示屏1205是触摸显示屏时，显示屏1205还具有采集在显示屏1205的表面或表面上方的触摸信号的能力。该触摸信号可以作为控制信号输入至处理器1201进行处理。此时，显示屏1205还可以用于提供虚拟按钮和/或虚拟键盘，也称软按钮和/或软键盘。在一些实施例中，显示屏1205可以为一个，设置车载终端1200的前面板；在另一些实施例中，显示屏1205可以为至少两个，分别设置在车载终端1200的不同表面或呈折叠设计；在一些实施例中，显示屏1205可以是柔性显示屏，设置在车载终端1200的弯曲表面上或折叠面上。甚至，显示屏1205还可以设置成非矩形的不规则图形，也即异形屏。显示屏1205可以采用液晶显示屏、有机发光二极管等材质制备。音频电路1206可以包括麦克风和扬声器。麦克风用于采集用户及环境的声波，并将声波转换为电信号输入至处理器1201进行处理，或者输入至射频电路1204以实现语音通信。出于立体声采集或降噪的目的，麦克风可以为多个，分别设置在车载终端1200的不同部位。麦克风还可以是阵列麦克风或全向采集型麦克风。扬声器则用于将来自处理器1201或射频电路1204的电信号转换为声波。扬声器可以是传统的薄膜扬声器，也可以是压电陶瓷扬声器。当扬声器是压电陶瓷扬声器时，不仅可以将电信号转换为人类可听见的声波，也可以将电信号转换为人类听不见的声波以进行测距等用途。在一些实施例中，音频电路1206还可以包括耳机插孔。定位组件1207用于定位车载终端1200的当前地理位置，以实现导航或基于位置的服务。定位组件1207可以是基于美国的全球定位系统、中国的北斗系统、俄罗斯的格雷纳斯系统或欧盟的伽利略系统的定位组件。电源1208用于为车载终端1200中的各个组件进行供电。电源1208可以是交流电、直流电、一次性电池或可充电电池。当电源1208包括可充电电池时，该可充电电池可以支持有线充电或无线充电。该可充电电池还可以用于支持快充技术。在一些实施例中，车载终端1200还包括有一个或多个传感器1209。该一个或多个传感器1209包括但不限于：压力传感器1210、指纹传感器1211、光学传感器1212以及接近传感器1213。压力传感器1210可以设置在车载终端显示屏1205的下层，由处理器1201根据用户对显示屏1205的压力操作，实现对UI界面上的可操作性控件进行控制。可操作性控件包括按钮控件、滚动条控件、图标控件、菜单控件中的至少一种。指纹传感器1211用于采集用户的指纹，由处理器1201根据指纹传感器1211采集到的指纹识别用户的身份，或者，由指纹传感器1211根据采集到的指纹识别用户的身份。在识别出用户的身份为可信身份时，由处理器1201授权该用户执行相关的敏感操作，该敏感操作包括解锁屏幕、查看加密信息、下载软件、支付及更改设置等。光学传感器1212用于采集环境光强度。在一个实施例中，处理器1201可以根据光学传感器1212采集的环境光强度，控制显示屏1205的显示亮度。具体地，当环境光强度较高时，调高显示屏1205的显示亮度；当环境光强度较低时，调低显示屏1205的显示亮度。接近传感器1213，也称距离传感器，通常设置在车载终端1200的前面板。接近传感器1213用于采集用户与车载终端1200的正面之间的距离。在一个实施例中，当接近传感器1213检测到用户与车载终端1200的正面之间的距离逐渐变小时，由处理器1201控制显示屏1205从亮屏状态切换为息屏状态；当接近传感器1213检测到用户与车载终端1200的正面之间的距离逐渐变大时，由处理器1201控制显示屏1205从息屏状态切换为亮屏状态。本领域技术人员可以理解，图12中示出的结构并不构成对车载终端1200的限定，可以包括比图示更多或更少的组件，或者组合某些组件，或者采用不同的组件布置。在示例性实施例中，还提供了一种计算机可读存储介质，例如包括至少一条程序代码的存储器，上述至少一条程序代码可由处理器执行以完成上述实施例中的车道线位置确定方法。例如，该计算机可读存储介质可以是只读存储器、随机存取存储器、只读光盘、磁带、软盘和光数据存储设备等。在示例性实施例中，还提供了一种计算机程序产品，该计算机程序产品包括至少一条计算机程序，该至少一条计算机程序存储在计算机可读存储介质中。计算机设备的处理器从计算机可读存储介质读取该至少一条计算机程序，处理器执行该至少一条计算机程序，使得该计算机设备执行上述车道线位置确定方法所执行的操作。本领域普通技术人员可以理解实现上述实施例的全部或部分步骤可以通过硬件来完成，也可以通过程序来指令相关的硬件完成，该程序可以存储于一种计算机可读存储介质中，上述提到的存储介质可以是只读存储器，磁盘或光盘等。上述仅为本申请的可选实施例，并不用以限制本申请，凡在本申请的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。
