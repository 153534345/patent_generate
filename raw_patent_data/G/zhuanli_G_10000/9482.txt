标题title
基于单元设备构造项目图纸的方法、装置及存储介质
摘要abst
本发明涉及电气绘图的技术领域，具体涉及一种基于单元设备构造项目图纸的方法、装置及存储介质。创建新项目；确定项目的基本信息和图纸信息；选择项目类型，指定项目模板；确定项目部件品牌；确定项目功能组；添加区域；添加区域的电柜；添加区域的PLC站；添加区域的单元设备；根据添加的单元设备的参数，从单元设备配置文件中解析出对应的图形宏名称和图形宏地址；将对应的图形宏插入至项目，生成单元设备图纸；逐项添加其余单元设备，得到完整项目图纸。通过属性取值来为单元设备的可选配置添加电气原理图，根据单元设备的XML文件解析出单元设备的页宏和窗口宏地址，实现标准化的页宏和窗口宏在指定页面中的自动插入，减少了手工绘图的工作量。
权利要求书clms
1.一种基于单元设备构造项目图纸的方法，其特征在于：包括创建新项目；确定所述项目的基本信息和图纸信息；选择项目类型，指定项目模板；确定项目部件品牌；确定项目功能组；添加区域；添加区域的电柜；添加区域的PLC站；添加区域的单元设备；根据添加的单元设备的参数，从所述单元设备配置文件中解析出所述单元设备对应的图形宏名称和图形宏地址；根据所述图形宏名称和图形宏地址将对应的图形宏插入至项目，生成单元设备图纸；逐项添加其余单元设备，得到由若干单元设备图纸组成的完整项目图纸。2.根据权利要求1所述的基于单元设备构造项目图纸的方法，其特征在于，所述创建新项目前，还包括：在宏项目中设计单元设备的标准页宏和窗口宏；在所述页宏和窗口宏中通过占位符的值集定义不同参数对应的不同部件；将各部件对应的页宏和/或窗口宏生成到指定的路径文件夹下。3.根据权利要求1所述的基于单元设备构造项目图纸的方法，其特征在于：一个所述项目包含若干个可实现一个或一种功能的单元设备，所述单元设备包含若干个部件，所述部件通过可配置的属性参数关联至不同的页宏或窗口宏。4.根据权利要求1所述的基于单元设备构造项目图纸的方法，其特征在于，所述图形宏采用逐页添加的方式插入至项目中，其包括：逐页添加页宏电路；根据解析出的页宏地址，调用对应的页宏电路，插入至图纸当前页。5.根据权利要求4所述的基于单元设备构造项目图纸的方法，其特征在于：当所述页宏中含有窗口宏时，根据解析出的窗口宏地址调用对应的窗口宏电路，并插入至所述页宏电路中。6.根据权利要求4所述的基于单元设备构造项目图纸的方法，其特征在于：当待添加的当前页含有占位符时，在UI界面输出可配置的单元设备属性，所述可配置的单元设备属性用于供用户选定属性，以及进行所述属性的属性值分配。7.根据权利要求5所述的基于单元设备构造项目图纸的方法，其特征在于，所述页宏电路、窗口宏电路均为包含电气符号和图形的预制电路。8.一种基于单元设备构造项目图纸的系统，其特征在于，包括：项目配置输入模块，用于创建新项目；确定所述项目的基本信息和图纸信息；选择项目类型，指定项目模板；确定项目部件品牌；确定项目功能组；添加区域；添加区域的电柜；添加区域的PLC站；添加区域的单元设备；解析模块，用于根据添加的单元设备的参数，从所述单元设备配置文件中解析出所述单元设备对应的图形宏名称和图形宏地址；图纸生成模块，用于根据所述图形宏名称和图形宏地址将对应的图形宏插入至项目，生成单元设备图纸；以及逐项添加其余单元设备，得到由若干单元设备图纸组成的完整项目图纸。9.一种基于单元设备构造项目图纸的装置/终端设备，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1至7任一项所述方法的步骤。10.一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至7任一项所述方法的步骤。
说明书desc
技术领域本发明涉及电气绘图的技术领域，具体涉及一种基于单元设备构造项目图纸的方法、装置及存储介质。背景技术在电气绘图领域中，设计人员在制作设备原理图时，会将特定相同的图形绘制成图形宏，这样进行具体设计时，同样的原理图插入相应的图形宏即可，不需要重复绘制相同的图形，这样大大提高了绘图效率和质量。但仍需设计人员手动插入图形，当设备系统庞大时，对应的需要绘制的图形和插入的图形宏也会变得非常多。在需要多名设计人协作设计时，电气原理图的坐标就不一样，最终的原理图样式就不统一。这不仅给设计人带来了繁重的制作工作，也给校对人和审核人带来巨大的工作。因此，如何实现图纸的快速自动出图，是需要解决的难题。发明内容本发明的目的就是针对现有技术的缺陷，提供一种基于单元设备构造项目图纸的方法、装置及存储介质，基于单元设备将项目参数化，实现宏电路自动插入，实现图纸的快速自动出图。本发明一种基于单元设备构造项目图纸的方法，其技术方案为：包括创建新项目；确定所述项目的基本信息和图纸信息；选择项目类型，指定项目模板；确定项目部件品牌；确定项目功能组；添加区域；添加区域的电柜；添加区域的PLC站；添加区域的单元设备；根据添加的单元设备的参数，从所述单元设备配置文件中解析出所述单元设备对应的图形宏名称和图形宏地址；根据所述图形宏名称和图形宏地址将对应的图形宏插入至项目，生成单元设备图纸；逐项添加其余单元设备，得到由若干单元设备图纸组成的完整项目图纸。较为优选的，所述创建新项目前，还包括：在宏项目中设计单元设备的标准页宏和窗口宏；在所述页宏和窗口宏中通过占位符的值集定义不同参数对应的不同部件；将各部件对应的页宏和/或窗口宏生成到指定的路径文件夹下。较为优选的，一个所述项目包含若干个可实现一个或一种功能的单元设备，所述单元设备包含若干个部件，所述部件通过可配置的属性参数关联至不同的页宏或窗口宏。较为优选的，所述图形宏采用逐页添加的方式插入至项目中，其包括：逐页添加页宏电路；根据解析出的页宏地址，调用对应的页宏电路，插入至图纸当前页。较为优选的，当所述页宏中含有窗口宏时，根据解析出的窗口宏地址调用对应的窗口宏电路，并插入至所述页宏电路中。较为优选的，当待添加的当前页含有占位符时，在UI界面输出可配置的单元设备属性，所述可配置的单元设备属性用于供用户选定属性，以及进行所述属性的属性值分配。较为优选的，所述页宏电路、窗口宏电路均为包含电气符号和图形的预制电路。本方案还提供一种基于单元设备构造项目图纸的系统，其技术方案为，包括：项目配置输入模块，用于创建新项目；确定所述项目的基本信息和图纸信息；选择项目类型，指定项目模板；确定项目部件品牌；确定项目功能组；添加区域；添加区域的电柜；添加区域的PLC站；添加区域的单元设备；解析模块，用于根据添加的单元设备的参数，从所述单元设备配置文件中解析出所述单元设备对应的图形宏名称和图形宏地址；图纸生成模块，用于根据所述图形宏名称和图形宏地址将对应的图形宏插入至项目，生成单元设备图纸；以及逐项添加其余单元设备，得到由若干单元设备图纸组成的完整项目图纸。本方案还提供一种基于单元设备构造项目图纸的装置/终端设备，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现上述方法的步骤。本方案还提供一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现上述方法的步骤。本发明的有益效果为：利用模块化结构化标准化将设备分解为单元设备，利用XML技术将图形宏组合起来构成单元设备的电气原理图。根据不同单元设备电气原理图结构特点，将各种图形宏和单元设备的属性参数联系起来，通过属性取值来为单元设备的可选配置添加电气原理图，并选择对应的材料部件。根据单元设备的XML文件解析出单元设备的页宏和窗口宏地址，实现标准化的页宏和窗口宏在指定页面中的自动插入，减少了手工绘图的工作量。设计人员不用考虑不同标准细节的实现，同时，无需针对每个项目重复设计基本电路，既提高了出图效率，又保证了出图质量。附图说明图1为本发明基于单元设备构造项目图纸的流程示意图；图2为本发明基于单元设备的参数生成图纸的流程示意图；图3为本发明项目图纸的组成示意图；图4为单元设备于参数、部件和图形宏的配置示意图；图5为单元设备配置文件与图形宏、单元设备图纸的映射关系示意图；图6为单元设备的属性参数与单元设备配置文件的映射关系示意图；图7为单元设备配置文件示意图；图8为文件夹下的各个图形宏示意图；图9为项目配置软件中的属性定义；图10为项目配置软件中的图形宏组合逻辑。具体实施方式为了使本申请所要解决的技术问题、技术方案及有益效果更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。需要说明的是，当元件被称为“固定于”或“设置于”另一个元件，它可以直接在另一个元件上或者间接在该另一个元件上。当一个元件被称为是“连接于”另一个元件，它可以是直接连接到另一个元件或间接连接至该另一个元件上。需要理解的是，术语“长度”、“宽度”、“上”、“下”、“前”、“后”、“左”、“右”、“竖直”、“水平”、“顶”、“底”“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本申请和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本申请的限制。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括一个或者更多个该特征。在本申请的描述中，“多个”的含义是两个或两个以上，除非另有明确具体的限定。本方案以物理上的可动作的机械设备为对象，把实现某一个功能的设备定义为单元设备，单元设备可以是功能单一的设备，譬如一个电磁阀，也可以是一个功能复杂的设备，譬如一个升降机，这些单元设备的电气图纸都是由若干个基本的电路宏组合而成，本方案的方法就是采用可扩展标记语言定义一个单元设备的电气图形的组合，用多种多个单元设备组合起来构造一个项目。项目是多种文档和数据的集合，包含页、部件、符号、表格和图框。创建一个新项目，须指定一个模板，模板包含项目的设置，项目数据，设备的类型。项目类型分工艺类设备和输送类设备。在项目配置UI软件中创建项目，设置项目类型参数，设置部件品牌，设置功能组，设置区域，设置PLC站，添加单元设备，设置单元设备参数，生成一个项目文件XML，在图纸生成插件中导入项目文件，图纸生成软件解析项目文件，创建项目图纸。实施例一如图1-2所示，基于单元设备构造项目图纸的流程如下：在项目配置软件中创建新项目；确定所述项目的基本信息和图纸信息；选择项目类型，指定项目模板；确定项目部件品牌；确定项目功能组；确定项目中部件的安装位置；添加区域；添加区域的电柜；添加区域的PLC站；添加区域的单元设备；导出项目文件；在图纸生成插件中导入项目文件，生成项目图纸。其中，导入项目文件，生成项目图纸包括：根据添加的单元设备的参数，从单元设备配置文件中解析出单元设备对应的图形宏名称和图形宏地址；根据图形宏名称和图形宏地址将对应的图形宏插入至项目，生成单元设备图纸；逐项添加其余单元设备，得到由若干单元设备图纸组成的完整项目图纸。项目文件中包含有图纸信息、模板信息、部件品牌替换信息、项目功能组、安装位置、区域信息、电柜信息、PLC站信息和添加的每个单元设备的xml代码。将图形宏插入至项目采用逐页添加的方式，其包括逐页添加页宏电路；根据解析出的页宏地址，调用对应的页宏电路，插入至图纸当前页；当所述页宏中含有窗口宏时，根据解析出的窗口宏地址调用对应的窗口宏电路，并插入至所述页宏电路中。而添加区域的单元设备时，还需要在UI界面中对显示的属性进行参数配置，参数配置好后，会存储至单元设备配置文件的每个属性的Value节点里，根据各属性占位符的值集，可以从指定路径中映射出对应的页宏或窗口宏。单元设备配置文件未预先配置的文件，其配置时，包括：在宏项目中设计单元设备的标准页宏和窗口宏，在宏中通过占位符的值集来定义不同参数对应的不同部件，将页宏，窗口宏生成到指定的路径文件夹下。编辑单元设备的逻辑属性，编辑单元设备的图形宏组合逻辑，即在XML编写过程中，先定义属性，再定义图形宏组合。图形宏引用来自指定的路径文件夹下。后续在项目配置软件中添加单元设备XML文件，XML文件中的设备属性逻辑在软件中进行选择，在项目图纸生成过程中软件会解析出单元设备的属性逻辑配置，调用对应的页宏/窗口宏，可组合生成完整的单元设备图纸。如图3所示，本方案基于模块设计的思想，抽象出单元设备，一个项目的电路由很多单元设备构成，由若干页宏/窗口宏构成单元设备，由若干单元设备最终构成一套项目图纸。如图4所示，单元设备是图纸的基本对象，含有不同的部件，通过对单元设备的属性进行设值，选择不同规格的部件。给每个单元设备设置不同的参数，可以切换不同的部件参数，让单元设备具备参数化属性。如图5所示，抽象的单元设备通过可扩展标记语言来描述。可扩展标记语言，Extensible Markup Language，是用于标记能被计算机所处理的各类信息的结构性语言，是处理分布式结构信息的有效工具。满足XML语法规范定义的单元设备，通过自定义标记来组织单元设备的各种页宏/窗口宏，通过属性来选择可选的窗口宏，选择功率，等其它可配置逻辑属性。将实际的机械设备电气原理图转换为用XML描述的逻辑组合，软件根据XML选择页宏/窗口宏生成该机械设备的电气原理图。本方案中，单元设备配置文件的编写过程如下：第一步编写UI界面的显示，用以可视化单元设备和编辑设备。第二部编写XML调用宏组，组建单元设备。所有XML节点都是成对出现的，描述的内容都是在Root节点下，Root根节点包含若干个ValueList和UnitDevice节点。一个UnitDevice包含一个Properties节点和多个DTIndex节点。ValueList用来定义参数值的集合，以Id属性为唯一标识来索引，集合的值以Val进行标识，实际的值填写在Val节点里，如＜Val＞37KW＜/Val＞。UnitDevice用来定义单元设备，所有的配置以单元设备为核心，包括定义了UI界面的显示、参数值、引用的宏组或者页宏和窗口宏，还有PLC和分线盒的定义。一个UnitDevice节点下，包含一个＜Properties＞节点和多个＜DTIndex＞节点。UI的property设置中，每个Property节点都有一个Value属性，本处不需要设定，留给程序记录用户的实际输入。如图6所示，不同类型的单元设备的框架是一致的，用XML的自定义标记节点来实现框架的转换与定义。如图7所示，单元设备配置文件通过解析，可以得到该单元设备的图形宏名称、图形宏的地址，根据图形宏名称和图形宏地址可以获取对应的图形宏。如图8所示，在一个文件夹下，会存在多个图形宏，通过图形宏地址能定位至该文件夹，而通过图形宏的名称可以从该文件夹的若干个图形宏中获取对应的图形宏。应理解，上述实施例中各步骤的序号的大小并不意味着执行顺序的先后，各过程的执行顺序应以其功能和内在逻辑确定，而不应对本申请实施例的实施过程构成任何限定。所属领域的技术人员可以清楚地了解到，为了描述的方便和简洁，仅以上述各功能单元、模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能单元、模块完成，即将所述装置的内部结构划分成不同的功能单元或模块，以完成以上描述的全部或者部分功能。实施例中的各功能单元、模块可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中，上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。另外，各功能单元、模块的具体名称也只是为了便于相互区分，并不用于限制本申请的保护范围。上述系统中单元、模块的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。在上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述或记载的部分，可以参见其它实施例的相关描述。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。在本申请所提供的实施例中，应该理解到，所揭露的装置/终端设备和方法，可以通过其它的方式实现。例如，以上所描述的装置/终端设备实施例仅仅是示意性的，例如，所述模块或单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通讯连接可以是通过一些接口，装置或单元的间接耦合或通讯连接，可以是电性，机械或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。所述集成的模块/单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请实现上述实施例方法中的全部或部分流程，也可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一计算机可读存储介质中，该计算机程序在被处理器执行时，可实现上述各个方法实施例的步骤。。其中，所述计算机程序包括计算机程序代码，所述计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。所述计算机可读介质可以包括：能够携带所述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。需要说明的是，所述计算机可读介质包含的内容可以根据司法管辖区内立法和专利实践的要求进行适当的增减，例如在某些司法管辖区，根据立法和专利实践，计算机可读介质不包括电载波信号和电信信号。以上所述实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围，均应包含在本申请的保护范围之内。
