标题title
一种考虑飞机非刚性以及极化电流因素的航空磁补偿方法
摘要abst
本发明公开了一种考虑飞机非刚性以及极化电流因素的航空磁补偿方法。本发明的方法包括：建立经典的磁补偿T‑L模型，建立飞机平台干扰磁场模型，建立三分量磁通门磁力仪误差模型的磁补偿模型，得到极化电流产生的干扰磁场，对地磁场进行补偿，建立光泵磁力仪方向误差，建立最终的飞机平台磁干扰模型，使用总体最小二乘方法求解出磁补偿系数向量，将求解出的磁补偿系数向量补偿系数，用于飞机平台的实时补偿；本发明将原先的18项T‑L模型扩展到50项甚至更多，解决三了轴磁通门磁力仪误差问题和飞机在非刚性情况下和极化电流产生的干扰磁场的数学模型问题；本发明大大地提高了航磁补偿的精度，减小了飞机平台本身产生的磁场对探测目标信号磁场的干扰。
权利要求书clms
1.一种考虑飞机非刚性以及极化电流因素的航空磁补偿方法，其特征在于，所述航空磁补偿方法包括以下步骤：1)建立经典的磁补偿T-L模型：以飞机平台建立坐标系，建立经典的磁补偿T-L模型，得到飞机平台产生的干扰磁场BTL：其中，ai为飞机永久干扰磁场的补偿系数，bi，j为飞机感应干扰磁场的补偿系数，ci，j为飞机涡流干扰磁场的补偿系数，ui和uj为飞机平台坐标系与地磁场的方向余弦u的分量，i＝1，2，3，j＝1,2,3，在飞机平台坐标系下分别为x、y和z轴，把它们展开写为u1＝cosX，u2＝cosY，u3＝cosZ，其中X、Y和Z分别为飞机平台坐标系x、y和z轴与地磁场的夹角，cosX、cosY和cosZ表达式分别如下：其中，B1、B2和B3分别为在t时刻三分量磁通门磁力仪测量的沿飞机平台坐标系x、y和z轴的地磁场测量值；2)建立飞机平台干扰磁场模型：经典的T-L模型是在飞机平台为刚体这个基本假设条件建立的，但是飞机在转弯和做机动动作的时候，方向舵、升降舵和副翼这些活动部件发生了状态变化，机翼发生了弯曲，因此飞机在做机动动作的时候不能看成是一个理想刚体，当飞机在做侧滚、俯仰和偏航机动动作时，飞机的结构状况采用运动状态参数来描述，飞机平台坐标系下地磁场的方向余弦u能够描述整体的飞机姿态，但是不能描述具体的各个活动部件的状态；a)以飞机平台坐标系下地磁场的方向余弦的微分反映活动部件的运动状态，把式中的补偿系数写成u和的泛函：b)将补偿系数以近似的线性化表示为：c)建立飞机平台干扰磁场模型，得到修改补偿系数之后飞机平台产生的干扰磁场Bcoe：其中，di,j,k为飞机主体感应磁场与活动部件永久磁场的耦合的补偿系数，gi,j,k为感应磁场与活动部件涡流磁场的耦合的补偿系数；3)建立三分量磁通门磁力仪误差模型的磁补偿模型：三分量磁通门磁力仪存在非正交性和零漂问题，地磁场的真实值为：其中，为磁通门磁力仪测量的沿飞机平台坐标系x、y和z轴的地磁场真实值，为修正矩阵，该矩阵是未知的，用来修正磁通门存在的非正交性问题，为误差向量，也是未知的向量，用来修正三分量磁通门磁力仪存在的零漂问题；将式写成简洁形式为：因此在飞机平台坐标系下，修正后的飞机平台坐标系下地磁场的方向余弦表示为：其中，σ为时间缓变误差函数，将代入式，且整理后得到包括修正磁通门数据建立的磁补偿模型，得到修正磁通门数据后飞机平台产生的干扰磁场Bcal：其中，a′i为修正后的永久磁场的补偿系数，b′i,j为修正后的感应磁场的补偿系数，c′i,j为修正后的涡流磁场的补偿系数，hi为由磁通门零漂和非正交性导致的磁干扰的补偿系数，β是随时间变化的一次函数；由于飞机的运动姿态也是随时间变化的，因此对式中的修正后的永久磁场的补偿系数a′i、修正后的感应磁场的补偿系数b′i,j和修正后的涡流磁场的补偿系数c′i,j进行与式形式一致的线性展开，再与式合并之后得到通过校准磁通门数据和改变补偿系数形式而建立的飞机干扰磁场模型，得到通过校准磁通门数据和改变补偿系数形式之后飞机平台产生的干扰磁场Binterference：其中，hi为由磁通门零漂和非正交性导致的磁干扰的补偿系数；4)得到极化电流产生的干扰磁场：在环境场中，不仅有磁场还有电场，经典的磁补偿T-L模型里并未考虑到环境电场产生的极化电流因素，因此忽略了极化电流产生的一部分干扰磁场；海洋上空的环境电场Eenv为垂直指向海面的，则E0为环境电场的大小，e为环境电场方向；为由整体的飞机姿态组合成的矩阵，整体的飞机姿态以飞机平台坐标系下地磁场的方向余弦u表示，因此把写成关于u的函数，于是把e用u来表示：e＝e)；环境电场Eenv使飞机的金属机壳产生正比于的极化电流，这个极化电流产生的干扰磁场Bele表示为：其中，为环境电场方向e的微分，为环境电场方向的微分的j分量，j＝1,2,3，表达为：其中，αj为常数项系数，βj,k为一次项系数，γj,k,l为二次项系数，Mi,j为极化电流产生的干扰磁场系数，将该表达式与极化电流产生的干扰磁场结合，得到极化电流产生的干扰磁场Bele：其中，σi,k为极化电流磁场干扰的补偿系数，τi,k,l为飞机感应磁场与极化电流磁场的耦合的干扰磁场的补偿系数；5)对地磁场进行补偿：采用国际地磁参考场IGRF，用IGRF模型算出地磁场值后，再用光泵磁力仪测量的磁场值减去地磁场值，得到补偿掉地磁场后的剩余干扰磁场值；6)建立光泵磁力仪的方向误差：在实际实验中，会用到光泵磁力仪测量的总磁场，光泵磁力仪测量的总磁场都存在方向误差磁场，因此分别建立单光系或多光系光泵磁力仪的方向误差Bh；7)建立最终的飞机平台磁干扰模型：将光泵磁力仪的方向误差加入到通过校准磁通门数据、改变补偿系数形式和增加极化电流磁场而建立的飞机干扰磁场模型中，建立最终的飞机平台磁干扰模型，得到最终的飞机干扰磁场Bf：Bf＝Binterference+Bele+Bh上式简化为：Bf＝A*N 其中，A为飞机平台坐标系下地磁场的方向余弦组成的基函数矩阵，N为待求的磁补偿系数向量；8)使用总体最小二乘方法求解出磁补偿系数向量；9)将求解出的磁补偿系数向量，用于飞机平台的实时补偿。2.如权利要求1所述的航空磁补偿方法，其特征在于，在步骤6)中，建立单光系光泵磁力仪的方向误差，包括以下步骤：单光系光泵磁力仪采用铯光泵磁力仪，铯光泵磁力仪在转动时，内部光轴与地磁场之间的夹角发生了改变，因此把方向误差写成关于飞机平台坐标系下地磁场的方向余弦u的函数，经过泰勒函数展开得到的方向误差Bh表达式为：Bh＝k1*u1+k2*u2+k3*u3+k4*u12+k5*u22+k6*u32+k7*u1*u2+k8*u1*u3+k9*u2*u3其中，k1,k2,k3,k4,k5,k6,k7,k8,k9为9个待求解的方向误差系数。3.如权利要求1所述的航空磁补偿方法，其特征在于，在步骤6)中，建立多光系光泵磁力仪的方向误差，包括以下步骤：多光系光泵磁力仪的方向误差Bh表达式为：其中，zi为方向误差系数，n为光泵原子气室个数，n＝3，分别沿着x,y,z轴方向；每个气室上的交变磁场线圈方向与光传播方向垂直，分别沿着y轴、x轴和x轴方向，hi为与方向误差有关的方向余弦，表达式为：其中，ηi是原子气室安装方向与地磁场的夹角，ηi＝X或Y或Z，εi是原子气室上加的交变磁场方向与地磁场的夹角，εi＝X或Y或Z。4.如权利要求1所述的航空磁补偿方法，其特征在于，在步骤8)中，使用总体最小二乘方法求解出磁补偿系数向量，包括以下步骤：a)A和b分别为不可观测的无误差基函数数据矩阵和无误差飞机干扰磁场数据向量，实际观测的基函数数据矩阵A0和飞机干扰磁场数据向量b0分别为：A0＝A+ΔA，b0＝b+Δb其中，ΔA和Δb分别为误差数据矩阵和误差数据向量；根据式得到飞机干扰数据向量和基函数数据矩阵的关系为：A*N＝b，N为待求的磁补偿系数向量，则若存在误差，该式的形式为：即N＝b+Δb，等价为q＝0；式中，增广数据矩阵B＝和增广校正矩阵D＝均为m×维矩阵，q为总体最小二乘的解向量，而为×1向量，k为无误差基函数数据矩阵A的列数，m为无误差基函数数据矩阵A的行数；b)计算增广数据矩阵B的奇异值分解并存储右奇异矩阵V；c)确定增广数据矩阵B的有效秩p；d)总体最小二乘的解向量中，N为由p个线性独立的未知参数组成的列向量，因此总体最小二乘的求解就变成了k+1-p个总体最小二乘问题的求解：Bjq＝0,j＝1,2...,k+1-p，Bj为B的第j列到第p+j列组成的子矩阵；e)根据最小二乘原理,总体最小二乘解等价于使代价函数极小化，代价函数f定义为：其中其中，uj为增广数据矩阵B左奇异矩阵第i行第j列上的元素，为右奇异矩阵V第i行第j列上的元素；δj为增广数据矩阵B的奇异值；f)定义则代价函数f写成f＝qTSq的形式，经过整理得到：g)代价函数f的极小变化量是f对q求导并令导数等于0，求得Sq＝λe1，λ为常数表示误能量，e1为单位向量，e1＝T；h)求S的逆矩阵S-；i)对上式Sq＝λe1求解，求得总体最小二乘的解向量q，因为则磁补偿系数向量N＝T最优最小二乘近似解为：其中，S-为S的逆矩阵，xtls为磁补偿系数向量N的第i个元素。5.如权利要求1所述的航空磁补偿方法，其特征在于，进一步，在飞机进行校准飞行前，在飞机上安装光泵磁力仪、三分量磁通门磁力仪、高度计和GPS；光泵磁力仪用来测量的总磁场，三分量磁通门磁力仪实时测量沿飞机平台坐标系x、y和z轴的地磁场测量值，高度计用来测量飞机飞行的高度，GPS用来测量飞机所处位置的经度和纬度。
说明书desc
技术领域本发明涉及航空磁补偿技术，具体涉及一种考虑飞机非刚性以及极化电流因素的航空磁补偿方法。背景技术航空磁补偿技术是为了补偿掉飞机平台产生的干扰磁场，有利于目标信号的检测。经典的T-L模型由三部分组成：恒定磁场、感应磁场和涡流磁场，通过分析每种磁场产生的原因来建立数学模型，即托尔斯·劳森方程。1961年，Leach在文章《Aeromagneticcompensation as a linear regression problem》里表示补偿系数的大小与飞机本身的结构和磁力仪的安放位置有关系，所以如果使用同一架飞机并且磁力仪放置位置不变化，补偿系数也不会发生变化。同时Leach在论文《Automatic aeromagnetic compensation》中写出了系数的求解方案，通过飞机在规定航向上做俯仰、偏航、侧滚机动性工作来得到测量数据，由此求解出补偿系数。2016年，韩琦团队在《An aeromagnetic compensationcoefficient-estimating method robust to geomagnetic gradient》一文中建立了地磁梯度模型，补偿掉了环境磁场的一部分干扰。另外，他们团队发表的文章《A modifiedTolley-Lawson model robust to the errors of the three-axis strapdownmagnetometer》中指出三轴磁通门由于存在零偏性、非正交性、测量噪声等误差会导致数据存在误差，并对磁通门进行了修正。此外，郭弘老师团队发表了关于多光系光泵磁力仪的方向误差校正的模型的专利；在胡凯的硕士论文里提到了关于单光系光泵方向误差的处理方法。目前仍然使用广泛的是T-L模型，但是T-L模型建立的条件是飞机是刚性结构，在飞行过程中不会发生形变，且三轴磁通门磁力仪是正交的，没有零飘，飞机飞行区域的环境磁场是固定的，而且没有考虑到环境电场产生的极化电流因素。但是实际上这些条件在真实环境中是发生变化的，因此建立一个更精确的飞机平台磁干扰补偿模型是有重要意义的。发明内容本发明提出了一种考虑飞机非刚性以及极化电流因素的航空磁补偿方法，用以解决三轴磁通门磁力仪误差问题和飞机在非刚性情况下和极化电流产生的干扰磁场的数学问题。本发明的考虑飞机非刚性以及极化电流因素的航空磁补偿方法，包括以下步骤：1)建立经典的磁补偿T-L模型：以飞机平台建立坐标系，建立经典的磁补偿T-L模型，得到飞机平台产生的干扰磁场BTL：其中，ai为飞机永久干扰磁场的补偿系数，bi，j为飞机感应干扰磁场的补偿系数，ci，j为飞机涡流干扰磁场的补偿系数，ui和uj为飞机平台坐标系与地磁场的方向余弦u的分量，i＝1，2，3，j＝1，2，3，在飞机平台坐标系下分别为x、y和z轴，把它们展开写为u1＝cos X，u2＝cos Y，u3＝cos Z，其中X、Y和Z分别为飞机平台坐标系x、y和z轴与地磁场的夹角，cos X、cos Y和cos Z表达式分别如下：其中，B1、B2和B3分别为在t时刻三分量磁通门磁力仪测量的沿飞机平台坐标系x、y和z轴的地磁场测量值；2)建立飞机平台干扰磁场模型：经典的T-L模型是在飞机平台为刚体这个基本假设条件建立的，但是飞机在转弯和做机动动作的时候，方向舵、升降舵和副翼这些活动部件发生了状态变化，机翼发生了弯曲，因此飞机在做机动动作的时候不能看成是一个理想刚体，当飞机在做侧滚、俯仰和偏航机动动作时，飞机的结构状况采用运动状态参数来描述，飞机平台坐标系下地磁场的方向余弦u能够描述整体的飞机姿态，但是不能描述具体的各个活动部件的状态；a)以飞机平台坐标系下地磁场的方向余弦的微分反映活动部件的运动状态，把式中的补偿系数写成u和的泛函：b)将补偿系数以近似的线性化表示为：c)建立飞机平台干扰磁场模型，得到修改补偿系数之后飞机平台产生的干扰磁场Bcoe：其中，di，j，k为飞机主体感应磁场与活动部件永久磁场的耦合的补偿系数，gi，j，k为感应磁场与活动部件涡流磁场的耦合的补偿系数；3)建立三分量磁通门磁力仪误差模型的磁补偿模型：三分量磁通门磁力仪存在非正交性和零漂问题，地磁场的真实值为：其中，为磁通门磁力仪测量的沿飞机平台坐标系x、y和z轴的地磁场真实值，为修正矩阵，该矩阵是未知的，用来修正磁通门存在的非正交性问题，为误差向量，也是未知的向量，用来修正三分量磁通门磁力仪存在的零漂问题；将式写成简洁形式为：因此在飞机平台坐标系下，修正后的飞机平台坐标系下地磁场的方向余弦表示为：其中，σ为时间缓变误差函数，将代入式，且整理后得到包括修正磁通门数据建立的磁补偿模型，得到修正磁通门数据后飞机平台产生的干扰磁场Bcal：其中，a′i为修正后的永久磁场的补偿系数，b′i，j为修正后的感应磁场的补偿系数，c′i，j为修正后的涡流磁场的补偿系数，hi为由磁通门零漂和非正交性导致的磁干扰的补偿系数，β是随时间变化的一次函数；由于飞机的运动姿态也是随时间变化的，因此对式中的补偿系数a′i、b′i，j和c′i，j进行与式形式一致的线性展开，再与式合并之后得到通过校准磁通门数据和改变补偿系数形式而建立的飞机干扰磁场模型，得到通过校准磁通门数据和改变补偿系数形式之后飞机平台产生的干扰磁场Binterference：其中，hi为由磁通门零漂和非正交性导致的磁干扰的补偿系数；4)得到极化电流产生的干扰磁场：在环境场中，不仅有磁场还有电场，经典的磁补偿T-L模型里并未考虑到环境电场产生的极化电流因素，因此忽略了极化电流产生的一部分干扰磁场；海洋上空的环境电场Eenv为垂直指向海面的，则E0为环境电场的大小，e为环境电场方向；为由整体的飞机姿态组合成的矩阵，整体的飞机姿态以飞机平台坐标系下地磁场的方向余弦u表示，因此把写成关于u的函数，于是把e用u来表示：e＝e)；环境电场Eenv使飞机的金属机壳产生正比于的极化电流，这个极化电流产生的干扰磁场Bele表示为：其中，为环境电场方向e的微分，为环境电场方向的微分的第j分量，表达为：其中，αj为常数项系数，βj，k为一次项系数，γj，k，l为二次项系数，Mi，j为极化电流产生的干扰磁场系数，将该表达式与极化电流产生的干扰磁场结合，得到极化电流产生的干扰磁场Bele：其中，σi，k为极化电流磁场干扰的补偿系数，τi，k，l为飞机感应磁场与极化电流磁场的耦合的干扰磁场的补偿系数；5)对地磁场进行补偿：采用国际地磁参考场，用IGRF模型算出地磁场值后，再用光泵磁力仪测量的磁场值减去地磁场值，得到补偿掉地磁场后的剩余干扰磁场值；6)建立光泵磁力仪的方向误差：在实际实验中，会用到光泵磁力仪测量的总磁场，光泵磁力仪测量的总磁场都存在方向误差磁场，因此分别建立单光系或多光系光泵磁力仪的方向误差Bh；7)建立最终的飞机平台磁干扰模型：将光泵磁力仪的方向误差加入到通过校准磁通门数据、改变补偿系数形式和增加极化电流磁场而建立的飞机干扰磁场模型中，建立最终的飞机平台磁干扰模型，得到最终的飞机干扰磁场Bf：Bf＝Binterference+Bele+Bh上式简化为：Bf＝A*N其中，A为飞机平台坐标系下地磁场的方向余弦组成的基函数矩阵，是ui和的组合，N为待求的磁补偿系数向量；8)使用总体最小二乘方法求解出磁补偿系数向量；9)将求解出的磁补偿系数向量，用于飞机平台的实时补偿。其中，在步骤6)中，建立单光系光泵磁力仪的方向误差，包括以下步骤：对于单光系光泵磁力仪，主要用到的是铯光泵磁力仪，铯光泵磁力仪在转动时，其内部光轴与地磁场之间的夹角发生了改变，因此把方向误差写成关于飞机平台坐标系下地磁场的方向余弦u的函数，经过泰勒函数展开得到的方向误差Bh表达式为：Bh＝k1*u1+k2*u2+k3*u3+k4*u12+k5*u22+k6*u32+k7*u1*u2+k8*u1*u3+k9*u2*u3其中，k1，k2，k3，k4，k5，k6，k7，k8，k9为9个待求解的方向误差系数。在步骤6)中，建立多光系光泵磁力仪的方向误差，包括以下步骤：多光系光泵磁力仪的方向误差Bh表达式为：其中，zi为方向误差系数，n为光泵原子气室个数，n＝3，分别沿着x，y，z轴方向；每个气室上的交变磁场线圈方向与光传播方向垂直，分别沿着y轴、x轴和x轴方向，hi为与方向误差有关的方向余弦，表达式为：其中，ηi为原子气室安装方向与地磁场的夹角，ηi＝X或Y或Z，εi为原子气室上加的交变磁场方向与地磁场的夹角，εi＝X或Y或Z。在步骤8)中，使用总体最小二乘方法求解出磁补偿系数向量，包括以下步骤：a)A和b分别为不可观测的无误差基函数数据矩阵和无误差飞机干扰磁场数据向量，实际观测的基函数数据矩阵A0和飞机干扰磁场数据向量b0分别为：A0＝A+ΔA，b0＝b+Δb其中，ΔA和Δb分别为误差数据矩阵和误差数据向量；根据式得到飞机干扰数据向量和基函数数据矩阵的关系为：A*N＝b，N为待求的磁补偿系数向量，则若存在误差，该式的形式为：即N＝b+Δb，等价为q＝0；式中，增广数掘矩阵B＝和增广校正矩阵D＝均为m×维矩阵，q为总体最小二乘的解向量，而为×1向量，k为无误差基函数数掘矩阵A的列数，m为无误差基函数数掘矩阵A的行数；b)计算增广数掘矩阵B的奇异值分解并存储右奇异矩阵V；c)确定增广数掘矩阵B的有效秩p；d)总体最小二乘的解向量中，N为由p个线性独立的未知参数组成的列向量，因此总体最小二乘的求解就变成了k+1-p个总体最小二乘问题的求解：Bjq＝0，j＝1，2...，k+1-p，Bj为B的第j列到第p+j列组成的子矩阵；e)根掘最小二乘原理，总体最小二乘解等价于求得解向量q使代价函数极小化，代价函数f定义为：其中其中，uj为增广数掘矩阵B左奇异矩阵第i行第j列上的元素，为右奇异矩阵V第i行第j列上的元素；δj为增广数掘矩阵B的奇异值；f)定义则代价函数f写成f＝qTSq的形式，经过整理得到：g)代价函数f的极小变化量是f对q求导并令其导数等于0，求得Sq＝λe1，λ为常数表示误能量，e1为单位向量，e1＝T；h)求S的逆矩阵S-；i)对上式Sq＝λe1求解，求得总体最小二乘的解向量q，因为则磁补偿系数向量N＝T最优最小二乘近似解为：其中，S-为S的逆矩阵，xtls为磁补偿系数向量N的第i个元素。进一步，在飞机进行校准飞行前，在飞机上安装光泵磁力仪、三分量磁通门磁力仪、高度计和GPS；光泵磁力仪用来测量的总磁场，三分量磁通门磁力仪实时测量沿飞机平台坐标系x、y和z轴的地磁场测量值，高度计用来测量飞机飞行的高度，GPS用来测量飞机所处位置的经度和纬度。本发明的优点：本发明将原先的18项T-L模型扩展到50项甚至更多，解决三了轴磁通门磁力仪误差问题和飞机在非刚性情况下和极化电流产生的干扰磁场的数学模型问题；本发明大大地提高了航磁补偿的精度，减小了飞机平台本身产生的磁场对探测目标信号磁场的干扰。附图说明图1为本发明的考虑飞机非刚性以及极化电流因素的航空磁补偿方法的一个实施例的飞机飞行示意图；图2为本发明的考虑飞机非刚性以及极化电流因素的航空磁补偿方法的流程图。具体实施方式下面结合附图，通过具体实施例，进一步阐述本发明。在飞机进行校准飞行前，在飞机上安装光泵磁力仪、三分量磁通门磁力仪、高度计和GPS；光泵磁力仪用来测量的总磁场，三分量磁通门磁力仪实时测量沿飞机平台坐标系x、y和z轴的地磁场测量值，高度计用来测量飞机飞行的高度，GPS用来测量飞机所处位置的经度和纬度。本实施例的考虑飞机非刚性以及极化电流因素的航空磁补偿方法，包括以下步骤：1)建立经典的磁补偿T-L模型：飞机在飞行过程中进行三种机动动作，俯仰、侧滚、偏航，每个机动动作四组，分为东西南北四个航向，如图1所示；以飞机平台建立坐标系，建立经典的磁补偿T-L模型，得到飞机平台产生的干扰磁场BTL：其中，ai为飞机永久干扰磁场的补偿系数，bi，j为飞机感应干扰磁场的补偿系数，ci，j为飞机涡流干扰磁场的补偿系数，ui和uj为飞机平台坐标系与地磁场的方向余弦u的分量，i＝1，2，3，j＝1，2，3，在飞机平台坐标系下分别为x、y和z轴，把它们展开写为u1＝cos X，u2＝cos Y，u3＝cos Z，其中X、Y和Z分别为飞机平台坐标系x、y和z轴与地磁场的夹角，cos X、cos Y和cos Z表达式分别如下：其中，B1、B2和B3分别为在t时刻三分量磁通门磁力仪测量的沿飞机平台坐标系x、y和z轴的地磁场测量值；2)建立飞机平台干扰磁场模型：经典的T-L模型是在飞机平台为刚体这个基本假设条件建立的，但是飞机在转弯和做机动动作的时候，方向舵、升降舵和副翼这些活动部件发生了状态变化，机翼发生了弯曲，因此飞机在做机动动作的时候不能看成是一个理想刚体，当飞机在做侧滚、俯仰、偏航机动动作时，飞机的结构状况采用运动状态参数来描述，飞机平台坐标系下地磁场的方向余弦u能够描述整体的飞机姿态，但是不能描述具体的各个活动部件的状态；d)以方向余弦的微分反映活动部件的运动状态，把式中的补偿系数写成u和的泛函：e)将补偿系数以近似的线性化表示为：f)建立飞机平台干扰磁场模型，得到修改补偿系数之后飞机平台产生的干扰磁场Bcoe：di，j，k为飞机主体感应磁场与活动部件永久磁场的耦合的补偿系数，gi，j，k为感应磁场与活动部件涡流磁场的耦合的补偿系数；3)建立三分量磁通门磁力仪误差模型的磁补偿模型：三分量磁通门磁力仪存在非正交性和零漂问题，地磁场的真实值为：其中，为磁通门磁力仪测量的沿飞机平台坐标系x、y和z轴的地磁场真实值，为修正矩阵，该矩阵是未知的，用来修正磁通门存在的非正交性问题，为误差向量，也是未知的向量，用来修正三分量磁通门磁力仪存在的零漂问题；将式写成简洁形式为：因此在飞机平台坐标系下，修正后的地磁场的方向余弦表示为：其中，σ为时间缓变误差函数，将代入式，且整理后得到包括修正磁通门数据建立的磁补偿模型，得到修正磁通门数据后飞机平台产生的干扰磁场Bcal：其中，a′i为修正后的永久磁场的补偿系数，b′i，j为修正后的感应磁场的补偿系数，c′i，j为修正后的涡流磁场的补偿系数，hi为由磁通门零漂和非正交性导致的磁干扰的补偿系数，β是随时间变化的一次函数；由于飞机的运动姿态也是随时间变化的，因此对式中的补偿系数a′i、b′i，j和c′i，j进行与式形式一致的线性展开，再与式合并之后得到通过校准磁通门数据和改变补偿系数形式而建立的飞机干扰磁场模型，得到通过校准磁通门数据和改变补偿系数形式之后飞机平台产生的干扰磁场Binterference：其中，hi为由磁通门零漂和非正交性导致的磁干扰的补偿系数；4)极化电流产生的干扰磁场：在环境场中，不仅有磁场还有电场，经典的磁补偿T-L模型里并未考虑到环境电场产生的极化电流因素，因此忽略了极化电流产生的一部分干扰磁场；海洋上空的环境电场Eenv为垂直指向海面的，则E0为环境电场的大小，e为环境电场方向；为由整体的飞机姿态组合成的矩阵，整体的飞机姿态以方向余弦u表示，因此把写成关于u的函数，于是把e用u来表示：e＝e)；环境电场Eenv使飞机的金属机壳产生正比于的极化电流，这个极化电流产生的干扰磁场Bele表示为：其中，为环境电场方向e的微分，为环境电场方向的微分的第j分量，表达为：其中，αj为常数项系数，βj，k为一次项系数，γj，k，l为二次项系数，Mi，j为极化电流产生的干扰磁场系数，将该表达式与极化电流产生的干扰磁场结合，得到极化电流产生的干扰磁场Bele如下：其中，σi，k为极化电流磁场干扰的补偿系数，τi，k，l为飞机感应磁场与极化电流磁场的耦合的干扰磁场的补偿系数；5)对地磁场进行补偿：采用国际地磁参考场，用IGRF模型算出地磁场值后，再用光泵测量值减去地磁场值，得到补偿后的地磁场值；6)建立光泵磁力仪的方向误差：在实际实验中，会用到光泵磁力仪测量的总磁场，光泵磁力仪测量的总磁场都存在方向误差磁场，导致求解系数会不准确，因此分别建立单光系或多光系光泵磁力仪的方向误差Bh；建立单光系光泵磁力仪的方向误差，包括以下步骤：于单光系光泵磁力仪，主要用到的是铯光泵磁力仪，铯光泵磁力仪在转动时，其内部光轴与地磁场之间的夹角发生了改变，因此可把方向误差写成关于方向余弦u的函数，经过泰勒函数展开得到的方向误差Bh表达式为：Bh＝k1*u1+k2*u2+k3*u3+k4*u12+k5*u22+k6*u32+k7*u1*u2+k8*u1*u3+k9*u2*u3其中，k1，k2，k3，k4，k5，k6，k7，k8，k9为9个待求解的方向误差系数；多光系光泵磁力仪的方向误差Bh表达式为：其中，zi为方向误差系数，n为光泵原子气室个数，n＝3，分别沿着x，y，z轴方向；每个气室上的交变磁场线圈方向与光传播方向垂直，分别沿着y轴、x轴和x轴方向，hi为与方向误差有关的方向余弦，表达式为：其中，ηi为原子气室安装方向与地磁场的夹角，ηi＝X或Y或Z，εi为原子气室上加的交变磁场方向与地磁场的夹角，εi＝X或Y或Z；7)建立最终的飞机平台磁干扰模型：将光泵磁力仪的方向误差加入到通过校准磁通门数据、改变补偿系数形式和增加极化电流磁场而建立的飞机干扰磁场模型中，建立最终的飞机平台磁干扰模型，得到最终的飞机干扰磁场Bf：Bf＝Binterference+Bele+Bh；上式简化为：Bf＝A*N 其中，A为方向余弦组成的基函数矩阵，N为待求的磁补偿系数向量；8)使用总体最小二乘方法求解出磁补偿系数向量：a)A和b分别为不可观测的无误差基函数数据矩阵和无误差飞机干扰磁场数据向量，实际观测的基函数数据矩阵A0和飞机干扰磁场数据向量b0分别为：A0＝A+ΔA，b0＝b+Δb其中，ΔA和Δb分别为误差数据矩阵和误差数据向量；根据式得到飞机干扰数据向量和基函数数据矩阵的关系为：A*N＝b，N为待求的磁补偿系数，则若存在误差，该式的形式为：即N＝b+Δb，等价为q＝0；式中，增广数据矩阵B＝和增广校正矩阵D＝均为m×维矩阵，q为总体最小二乘的解向量为×1，k为无误差基函数数据矩阵A的列数，m为无误差基函数数据矩阵A的行数；b)计算增广数据矩阵B的奇异值分解并存储右奇异矩阵V；c)确定增广数据矩阵B的有效秩p；d)总体最小二乘的解向量中，N为由p个线性独立的未知参数组成的列向量，因此总体最小二乘的求解就变成了k+1-p个总体最小二乘问题的求解：Bjq＝0，j＝1，2...，k+1-p，Bj为B的第j列到第p+j列组成的子矩阵；e)根据最小二乘原理，总体最小二乘解等价于使代价函数极小化，代价函数f定义为：其中其中，uj为增广数据矩阵B左奇异矩阵第i行第j列上的元素，为右奇异矩阵V第i行第j列上的元素；δj为增广数据矩阵B的奇异值；f)定义则代价函数f写成f＝qTSq的形式，经过整理得到：g)代价函数f的极小变化量是f对q求导并令其导数等于0，求得Sq＝λe1，λ为常数表示误能量，e1为单位向量，e1＝T；h)求S的逆矩阵S-；i)对上式Sq＝λe1求解，求得总体最小二乘的解向量q，因为则磁补偿系数向量N＝T最优最小二乘近似解为：其中，S-为S的逆矩阵，xtls为磁补偿系数向量N的第i个元素。；9)将求解出的补偿系数，用于飞机平台的实时补偿。最后需要注意的是，公布实施例的目的在于帮助进一步理解本发明，但是本领域的技术人员可以理解：在不脱离本发明及所附的权利要求的精神和范围内，各种替换和修改都是可能的。因此，本发明不应局限于实施例所公开的内容，本发明要求保护的范围以权利要求书界定的范围为准。
