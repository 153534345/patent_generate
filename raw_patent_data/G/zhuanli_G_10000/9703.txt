标题title
星载激光通信终端及其功耗控制方法
摘要abst
本公开提供了一种星载激光通信终端。本公开还提供了一种星载激光通信终端的功耗控制方法。该星载激光通信终端包括：可编程片上系统处理器、随机存储器、闪存模块和数据存储模块；所述可编程片上系统处理器包括可编程系统PS和可编程逻辑PL，所述闪存模块中存储有应用程序，且所述闪存模块的不同地址区域内固化有第一FPGA比特流和第二FPGA比特流，所述可编程逻辑PL可加载所述第一FPGA比特流或所述第二FPGA比特流，所述可编程逻辑PL加载所述第一FPGA比特流，所述星载激光通信终端处于数据存储模式，所述可编程逻辑PL加载所述第二FPGA比特流，所述星载激光通信终端处于高速数据传输模式。本公开的技术方案能够实现对FPGA的功耗管理控制。
权利要求书clms
1.一种星载激光通信终端，其特征在于，包括：可编程片上系统处理器、随机存储器、闪存模块和数据存储模块；所述可编程片上系统处理器包括可编程系统PS和可编程逻辑PL，所述闪存模块中存储有应用程序，且所述闪存模块的不同地址区域内固化有第一FPGA比特流和第二FPGA比特流，所述可编程逻辑PL可加载所述第一FPGA比特流或所述第二FPGA比特流，所述可编程逻辑PL加载所述第一FPGA比特流，所述星载激光通信终端处于数据存储模式，所述可编程逻辑PL加载所述第二FPGA比特流，所述星载激光通信终端处于高速数据传输模式。2.根据权利要求1所述的星载激光通信终端，其特征在于，所述第一FPGA比特流支持随机存储器、闪存、看门狗、数据存储、与卫星平台间的通信、与科学实验载荷间的通信和温控功能；所述第二FPGA比特流支持随机存储器、闪存、看门狗、数据存储、与卫星平台间的通信、与科学实验载荷间的通信、激光通信和温控功能。3.根据权利要求1所述的星载激光通信终端，其特征在于，所述数据存储模块为SATA存储器。4.一种星载激光通信终端的功耗控制方法，适用于如权利要求1～3任一项所述的星载激光通信终端，其特征在于，所述星载激光通信终端的功耗控制方法包括：将第一FPGA比特流和第二FPGA比特流分别固化在闪存模块中的不同地址区域内；所述星载激光通信终端上电，将所述第一FPGA比特流加载到可编程逻辑PL，启动数据存储模式；以及根据进入高速数据传输模式的指令，卸载所述可编程逻辑PL中的所述第一FPGA比特流，加载所述第二FPGA比特流，启动高速数据传输模式。5.根据权利要求4所述的星载激光通信终端的功耗控制方法，其特征在于，启动数据存储模式的步骤包括：所述星载激光通信终端上电；所述可编程系统PS在随机存储器中运行闪存模块中存储的bootloader；所述bootloader引导，将所述第一FPGA比特流加载到所述可编程逻辑PL；所述bootloader引导，将所述闪存模块中存储的应用程序加载到所述可编程系统PS中；所述可编程系统PS加载启动应用程序，与卫星平台建立通信，启动数据存储模式；所述应用程序接收科学实验载荷发送的数据，并存储至存储模块。6.根据权利要求5所述的星载激光通信终端的功耗控制方法，其特征在于，启动高速数据传输模式的步骤包括：所述应用程序接收卫星平台转发的进入高速数据传输模式的指令；根据进入高速数据传输模式的指令，所述应用程序控制卸载所述可编程逻辑PL中的所述第一FPGA比特流，加载所述第二FPGA比特流；所述应用程序初始化进行高速激光通信所需的全部接口及功能模块，开始运行激光通信功能，启动高速数据传输模式。7.根据权利要求6所述的星载激光通信终端，其特征在于，所述应用程序运行第一代码分支，适应所述第一FPGA比特流，所述应用程序运行第二代码分支，适应所述第二FPGA比特流。8.根据权利要求6所述的星载激光通信终端的功耗控制方法，其特征在于，还包括：激光通信结束后，根据进入数据存储模式的指令，所述应用程序控制卸载所述可编程逻辑PL中的所述第二FPGA比特流，加载所述第一FPGA比特流，启动数据存储模式。9.根据权利要求8所述的星载激光通信终端的功耗控制方法，其特征在于，地面通过进入数据存储模式的指令告知所述应用程序，结束激光通信；或者，所述应用程序通过判断存储的数据已发送完，自动结束激光通信，并生成进入数据存储模式的指令。10.根据权利要求5所述的星载激光通信终端的功耗控制方法，其特征在于，还包括：在数据存储模式下，所述应用程序通过断电指令控制部分硬件断电。
说明书desc
技术领域本公开涉及一种星载激光通信终端及其功耗控制方法。背景技术星载激光通信终端一般由卫星平台提供能源，但是卫星平台的能源是有限的，因此对卫星平台上各个单机、组件的功耗要求极其严格，因此，如何对星载激光通信终端进行有效的功耗优化设计是亟需解决的问题。目前，对于星载激光通信终端低功耗的研究主要集中在硬件层面，大多通过工作模式区分，控制不同的硬件加断电，来实现功耗管理，即在低功耗的数据存储模式下，关闭无需工作的传感器、收发芯片、放大器等硬件组件；切换到高功耗的高速数据传输模式时，再将相应的硬件组件加电。随着嵌入式软件技术的日益发展和星上信息处理能力的不断提升，硬件功能软件化已成为当前航天技术重要的发展趋势。大规模FPGA得到了广泛应用，许多硬件功能已逐渐由FPGA实现。FPGA多使用外部FLASH存储FPGA编程比特流，初始化时将bit文件加载。而一旦加载成功，许多逻辑功能即开始运行，FPGA功耗显著增加。而FPGA实现的许多功能，在低功耗的数据存储模式下并不需要实现。因此，亟需一种基于FPGA的功耗管理控制方法。发明内容为了解决上述技术问题中的至少一个，本公开提供了一种星载激光通信终端及其功耗控制方法。所述星载激光通信终端包括：可编程片上系统处理器、随机存储器、闪存模块和数据存储模块；所述可编程片上系统处理器包括可编程系统PS和可编程逻辑PL，所述闪存模块中存储有应用程序，且所述闪存模块的不同地址区域内固化有第一FPGA比特流和第二FPGA比特流，所述可编程逻辑PL可加载所述第一FPGA比特流或所述第二FPGA比特流，所述可编程逻辑PL加载所述第一FPGA比特流，所述星载激光通信终端处于数据存储模式，所述可编程逻辑PL加载所述第二FPGA比特流，所述星载激光通信终端处于高速数据传输模式。可选地，所述第一FPGA比特流支持随机存储器、闪存、看门狗、数据存储、与卫星平台间的通信、与科学实验载荷间的通信和温控功能；所述第二FPGA比特流支持随机存储器、闪存、看门狗、数据存储、与卫星平台间的通信、与科学实验载荷间的通信、激光通信和温控功能。可选地，所述数据存储模块为SATA存储器。所述星载激光通信终端的功耗控制方法适用于以上任一项所述的星载激光通信终端，所述星载激光通信终端的功耗控制方法包括：步骤S100、将第一FPGA比特流和第二FPGA比特流分别固化在闪存模块中的不同地址区域内；步骤S200、所述星载激光通信终端上电，将所述第一FPGA比特流加载到可编程逻辑PL，启动数据存储模式；步骤S300、根据进入高速数据传输模式的指令，卸载所述可编程逻辑PL中的所述第一FPGA比特流，加载所述第二FPGA比特流，启动高速数据传输模式。可选地，步骤S200具体包括：子步骤S201、所述星载激光通信终端上电；子步骤S202、所述可编程系统PS在随机存储器中运行闪存模块中存储的bootloader；子步骤S203、所述bootloader引导，将所述第一FPGA比特流加载到所述可编程逻辑PL；子步骤S204、所述bootloader引导，将所述闪存模块中存储的应用程序加载到所述可编程系统PS中；子步骤S205、所述可编程系统PS加载启动应用程序，与卫星平台建立通信，启动数据存储模式；子步骤S206、所述应用程序接收科学实验载荷发送的数据，并存储至存储模块。可选地，步骤S300具体包括：子步骤S301、所述应用程序接收卫星平台转发的进入高速数据传输模式的指令；子步骤S302、根据进入高速数据传输模式的指令，所述应用程序控制卸载所述可编程逻辑PL中的所述第一FPGA比特流，加载所述第二FPGA比特流；子步骤S303、所述应用程序初始化进行高速激光通信所需的全部接口及功能模块，开始运行激光通信功能，启动高速数据传输模式。可选地，所述应用程序运行第一代码分支，适应所述第一FPGA比特流，所述应用程序运行第二代码分支，适应所述第二FPGA比特流。可选地，所述星载激光通信终端的功耗控制方法还包括：步骤S400、激光通信结束后，根据进入数据存储模式的指令，所述应用程序控制卸载所述可编程逻辑PL中的所述第二FPGA比特流，加载所述第一FPGA比特流，启动数据存储模式。可选地，步骤S400中，地面通过进入数据存储模式的指令告知所述应用程序，结束激光通信；或者，所述应用程序通过判断存储的数据已发送完，自动结束激光通信，并生成进入数据存储模式的指令。可选地，所述星载激光通信终端的功耗控制方法还包括：在数据存储模式下，所述应用程序通过断电指令控制部分硬件断电。本公开提供一种星载激光通信终端及星载激光通信终端的功耗控制方法，该星载激光通信终端包括：可编程片上系统处理器、随机存储器、闪存模块和数据存储模块；可编程片上系统处理器包括可编程系统PS和可编程逻辑PL，闪存模块中存储有应用程序，且闪存模块的不同地址区域内固化有第一FPGA比特流和第二FPGA比特流，可编程逻辑PL可加载第一FPGA比特流或第二FPGA比特流，可编程逻辑PL加载第一FPGA比特流，星载激光通信终端处于数据存储模式，可编程逻辑PL加载第二FPGA比特流，星载激光通信终端处于高速数据传输模式。因此，通过可编程逻辑PL加载第一FPGA比特流或第二FPGA比特流，即可实现星载激光通信终端的工作模式的切换，进而实现对功耗的管理控制。附图说明附图示出了本公开的示例性实施方式，并与其说明一起用于解释本公开的原理，其中包括了这些附图以提供对本公开的进一步理解，并且附图包括在本说明书中并构成本说明书的一部分。图1是根据本公开的一个实施方式的星载激光通信终端的模块图；图2是根据本公开的一个实施方式的星载激光通信终端的功耗控制方法的流程图一；图3是根据本公开的一个实施方式的星载激光通信终端的功耗控制方法的步骤S200的流程图；图4是根据本公开的一个实施方式的星载激光通信终端的功耗控制方法的步骤S300的流程图；图5是根据本公开的一个实施方式的星载激光通信终端的功耗控制方法的流程图二。附图标记说明：1000-可编程片上系统处理器；2000-随机存储器；3000-闪存模块；4000-数据存储模块。具体实施方式下面结合附图和实施方式对本公开作进一步的详细说明。可以理解的是，此处所描述的具体实施方式仅用于解释相关内容，而非对本公开的限定。另外还需要说明的是，为了便于描述，附图中仅示出了与本公开相关的部分。需要说明的是，在不冲突的情况下，本公开中的实施方式及实施方式中的特征可以相互组合。下面将参考附图并结合实施方式来详细说明本公开的技术方案。除非另有说明，否则示出的示例性实施方式/实施例将被理解为提供可以在实践中实施本公开的技术构思的一些方式的各种细节的示例性特征。因此，除非另有说明，否则在不脱离本公开的技术构思的情况下，各种实施方式/实施例的特征可以另外地组合、分离、互换和/或重新布置。此外，在附图中，为了清楚和/或描述性的目的，可以夸大部件的尺寸和相对尺寸。当可以不同地实施示例性实施例时，可以以不同于所描述的顺序来执行具体的工艺顺序。例如，可以基本同时执行或者以与所描述的顺序相反的顺序执行两个连续描述的工艺。此外，同样的附图标记可以表示同样的部件。当一个部件被称作“在”另一部件“上”或“之上”、“连接到”或“结合到”另一部件时，该部件可以直接在所述另一部件上、直接连接到或直接结合到所述另一部件，或者可以存在中间部件。然而，当部件被称作“直接在”另一部件“上”、“直接连接到”或“直接结合到”另一部件时，不存在中间部件。为此，术语“连接”可以指物理连接、电气连接等，并且具有或不具有中间部件。本文使用的术语是为了描述具体实施例的目的，而不意图是限制性的。如这里所使用的，除非上下文另外清楚地指出，否则单数形式“一个”和“所述”也意图包括复数形式。此外，当在本说明书中使用术语“包含”和/或“包括”以及它们的变型时，说明存在所陈述的特征、整体、步骤、操作、部件、组件和/或它们的组，但不排除存在或附加一个或更多个其它特征、整体、步骤、操作、部件、组件和/或它们的组。还要注意的是，如这里使用的，术语“基本上”、“大约”和其它类似的术语被用作近似术语而不用作程度术语，如此，它们被用来解释本领域普通技术人员将认识到的测量值、计算值和/或提供的值的固有偏差。本公开提供一种星载激光通信终端，具体地，如图1所示，图1是根据本公开的一个实施方式的星载激光通信终端的模块图，该星载激光通信终端包括：可编程片上系统处理器1000、随机存储器2000、闪存模块3000和数据存储模块4000；可编程片上系统处理器1000包括可编程系统PS和可编程逻辑PL，闪存模块3000中存储有应用程序，且闪存模块3000的不同地址区域内固化有第一FPGA比特流和第二FPGA比特流，可编程逻辑PL可加载第一FPGA比特流或第二FPGA比特流，可编程逻辑PL加载第一FPGA比特流，星载激光通信终端处于数据存储模式，可编程逻辑PL加载第二FPGA比特流，星载激光通信终端处于高速数据传输模式。其中，可编程片上系统处理器，即SOPC，基于FPGA解决方案的SOC片上系统设计技术，它将处理器、l/O口、存储器以及需要的功能模块集成到一片FPGA内，构成一个可编程的片上系统。随机存储器可选择为双倍速率同步动态随机存储器，英文全称为DDR SDRAM。可编程系统PS可以通过ARM处理器实现。可编程逻辑PL可以是ARM中的FPGA部分。在FPGA开发过程中，可以将第一FPGA比特流和第二FPGA比特流分成两个工程分别进行开发。第一FPGA比特流和第二FPGA比特流可以通过FLASH烧写的方式固化于闪存模块3000的不同地址区域内。星载激光通信终端的主要工作模式分为两种：一种是数据存储模式，此时星载激光通信终端接收科学实验载荷传输的大量数据，并进行存储；另一种是高速数据传输模式，此时星载激光通信终端会和目标地面站或卫星建立激光通信链路，以较高的速率传输内部存储的数据。高速数据传输模式下，星载激光通信终端会消耗大量的能源。本公开提供的星载激光通信终端，大部分时间可编程逻辑PL加载第一FPGA比特流后，星载激光通信终端保持工作在数据存储模式，消耗能源较少，进行激光通信前，通过可编程逻辑PL加载第二FPGA比特流，使星载激光通信终端工作在高速数据传输模式，也就是说，通过可编程逻辑PL加载第一FPGA比特流或第二FPGA比特流，即可实现星载激光通信终端的工作模式的切换，进而实现对功耗的管理控制。本公开提供的第一FPGA比特流仅包括支持星载激光通信终端进行低功耗状态运行的必须功能，例如包括：与卫星平台通信的基本通信接口、温控接口、数据存储接口等。第二FPGA比特流既包括支持星载激光通信终端进行低功耗状态运行的必须功能，还包括激光通信的功能。可选地，本公开提供的第一FPGA比特流支持随机存储器、闪存、看门狗、数据存储、与卫星平台间的通信、与科学实验载荷间的通信和温控功能；本公开提供的第二FPGA比特流支持随机存储器、闪存、看门狗、数据存储、与卫星平台间的通信、与科学实验载荷间的通信、激光通信和温控功能。以上功能可以通过硬件电路结合第一FPGA比特流或第二FPGA比特流实现。二者具体功能对比如下表一所示：表一功能第二FPGA比特流第一FPGA比特流双倍速率同步动态随机存储器具备具备闪存具备具备看门狗具备具备数据存储具备具备与卫星平台间的通信接口具备具备与科学实验载荷间的通信接口具备具备激光通信具备无温控具备具备可选地，本公开提供的数据存储模块4000为SATA存储器。此外，本公开还提供一种星载激光通信终端的功耗控制方法，具体地，如图2所示，图2是根据本公开的一个实施方式的星载激光通信终端的功耗控制方法的流程图一，适用于以上任一项的星载激光通信终端，该星载激光通信终端的功耗控制方法包括：步骤S100、将第一FPGA比特流和第二FPGA比特流分别固化在闪存模块中的不同地址区域内。在FPGA开发过程中，可以将第一FPGA比特流和第二FPGA比特流分成两个工程分别进行开发。第一FPGA比特流和第二FPGA比特流可以通过FLASH烧写的方式固化于闪存模块3000的不同地址区域内。步骤S200、星载激光通信终端上电，将第一FPGA比特流加载到可编程逻辑PL，启动数据存储模式。在数据存储模式下，星载激光通信终端可进行温控等基本功能，在需要接收数据时，应用程序接收科学实验载荷发送的数据，并存储至存储模块即可。可选地，如图3所示，图3是根据本公开的一个实施方式的星载激光通信终端的功耗控制方法的步骤S200的流程图，本公开中步骤S200具体包括：子步骤S201、星载激光通信终端上电；子步骤S202、可编程系统PS在随机存储器中运行闪存模块中存储的bootloader；子步骤S203、bootloader引导，将第一FPGA比特流加载到可编程逻辑PL；子步骤S204、bootloader引导，将闪存模块中存储的应用程序加载到可编程系统PS中；子步骤S205、可编程系统PS加载启动应用程序，与卫星平台建立通信，启动数据存储模式；子步骤S206、应用程序接收科学实验载荷发送的数据，并存储至存储模块。步骤S300、根据进入高速数据传输模式的指令，卸载可编程逻辑PL中的第一FPGA比特流，加载第二FPGA比特流，启动高速数据传输模式。可选地，如图4所示，图4是根据本公开的一个实施方式的星载激光通信终端的功耗控制方法的步骤S300的流程图，本公开中步骤S300具体包括：子步骤S301、应用程序接收卫星平台转发的进入高速数据传输模式的指令；子步骤S302、根据进入高速数据传输模式的指令，应用程序控制卸载可编程逻辑PL中的第一FPGA比特流，加载第二FPGA比特流；子步骤S303、应用程序初始化进行高速激光通信所需的全部接口及功能模块，开始运行激光通信功能，启动高速数据传输模式。子步骤S303中可以通过应用程序中的功耗管理模块初始化进行高速激光通信所需的全部接口及功能模块。可选地，在步骤S200和步骤S300中，应用程序运行第一代码分支，适应第一FPGA比特流，应用程序运行第二代码分支，适应第二FPGA比特流。可选地，如图5所示，图5是根据本公开的一个实施方式的星载激光通信终端的功耗控制方法的流程图二，本公开中星载激光通信终端的功耗控制方法还包括：步骤S400、激光通信结束后，根据进入数据存储模式的指令，应用程序控制卸载可编程逻辑PL中的第二FPGA比特流，加载第一FPGA比特流，启动数据存储模式。可选地，本公开中步骤S400中，地面通过进入数据存储模式的指令告知应用程序，结束激光通信；或者，应用程序通过判断存储的数据已发送完，自动结束激光通信，并生成进入数据存储模式的指令。可选地，本公开中星载激光通信终端的功耗控制方法还包括：在数据存储模式下，应用程序通过断电指令控制部分硬件断电，如关闭无需工作的传感器、收发芯片、放大器等硬件组件。也就相当于，星载激光通信终端采用分层的功耗管理策略，第一层为通过星载激光通信终端的功耗控制方法进行FPGA功耗控制，第二层为通过硬件断电的方式进行硬件功耗控制，FPGA功耗控制与硬件功耗控制共同实现功耗管理控制，最大限度的降低卫星平台的能源压力。当需要进入高功耗的高速数据传输模式时，再将相应的硬件加电。流程图中或在此以其他方式描述的任何过程或方法描述可以被理解为，表示包括一个或更多个用于实现特定逻辑功能或过程的步骤的可执行指令的代码的模块、片段或部分，并且本公开的优选实施方式的范围包括另外的实现，其中可以不按所示出或讨论的顺序，包括根据所涉及的功能按基本同时的方式或按相反的顺序，来执行功能，这应被本公开的实施方式所属技术领域的技术人员所理解。处理器执行上文所描述的各个方法和处理。例如，本公开中的方法实施方式可以被实现为软件程序，其被有形地包含于机器可读介质，例如存储器。在一些实施方式中，软件程序的部分或者全部可以经由存储器和/或通信接口而被载入和/或安装。当软件程序加载到存储器并由处理器执行时，可以执行上文描述的方法中的一个或多个步骤。备选地，在其他实施方式中，处理器可以通过其他任何适当的方式而被配置为执行上述方法之一。在流程图中表示或在此以其他方式描述的逻辑和/或步骤，可以具体实现在任何可读存储介质中，以供指令执行系统、装置或设备使用，或结合这些指令执行系统、装置或设备而使用。应当理解，本公开的各部分可以用硬件、软件或它们的组合来实现。在上述实施方式中，多个步骤或方法可以用存储在存储器中且由合适的指令执行系统执行的软件来实现。例如，如果用硬件来实现，和在另一实施方式中一样，可用本领域公知的下列技术中的任一项或他们的组合来实现：具有用于对数据信号实现逻辑功能的逻辑门电路的离散逻辑电路，具有合适的组合逻辑门电路的专用集成电路，可编程门阵列，现场可编程门阵列等。本技术领域的普通技术人员可以理解实现上述实施方式方法的全部或部分步骤是可以通过程序来指令相关的硬件完成，的程序可以存储于一种可读存储介质中，该程序在执行时，包括方法实施方式的步骤之一或其组合。此外，在本公开各个实施方式中的各功能单元可以集成在一个处理模块中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个模块中。上述集成的模块既可以采用硬件的形式实现，也可以采用软件功能模块的形式实现。集成的模块如果以软件功能模块的形式实现并作为独立的产品销售或使用时，也可以存储在一个可读存储介质中。存储介质可以是只读存储器，磁盘或光盘等。在本说明书的描述中，参考术语“一个实施方式/方式”、“一些实施方式/方式”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施方式/方式或示例描述的具体特征、结构、材料或者特点包含于本申请的至少一个实施方式/方式或示例中。在本说明书中，对上述术语的示意性表述不必须的是相同的实施方式/方式或示例。而且，描述的具体特征、结构、材料或者特点可以在任一个或多个实施方式/方式或示例中以合适的方式结合。此外，在不相互矛盾的情况下，本领域的技术人员可以将本说明书中描述的不同实施方式/方式或示例以及不同实施方式/方式或示例的特征进行结合和组合。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括至少一个该特征。在本申请的描述中，“多个”的含义是至少两个，例如两个，三个等，除非另有明确具体的限定。本领域的技术人员应当理解，上述实施方式仅仅是为了清楚地说明本公开，而并非是对本公开的范围进行限定。对于所属领域的技术人员而言，在上述公开的基础上还可以做出其它变化或变型，并且这些变化或变型仍处于本公开的范围内。
