标题title
图像处理的方法及装置
摘要abst
本申请实施例提供一种图像处理的方法及装置，涉及自动驾驶技术领域，具体包括：可以根据行驶环境中的、标注有车辆目标部件的第一二维图像，以及目标部件的三维模型，目标部件在车辆中的使用规则，构建目标部件在第一状态时的第二二维图像和语义信息的关联关系。即本申请实施例中，不需要人工采集和标注大量的图像，而是结合目标部件的三维模型，和行驶环境中的车辆二维图像，就可以基于图像处理，得到目标部件在第一状态时的第二二维图像和语义信息的关联关系，效率和灵活性都有较大提高。
权利要求书clms
1.一种图像处理的方法，其特征在于，所述方法包括：获取车辆在行驶环境中的第一二维图像；所述第一二维图像中标注有所述车辆的目标部件；获取所述目标部件的三维模型，以及所述目标部件在第一状态下所述车辆的语义信息；利用所述第一二维图像、所述目标部件的三维模型、以及所述目标部件在所述车辆中的使用规则，生成所述目标部件处于所述第一状态时所述车辆对应的第二二维图像；建立所述第二二维图像与所述语义信息的关联关系。2.根据权利要求1所述的方法，其特征在于，所述目标部件为运动部件；所述利用所述第一二维图像、所述目标部件的三维模型、以及所述目标部件在所述车辆中的使用规则，生成所述目标部件处于所述第一状态时所述车辆对应的第二二维图像，包括：利用所述目标部件的三维模型渲染得到所述目标部件的深度图；利用所述目标部件的深度图和所述第一二维图像恢复所述目标部件的三维点云数据；利用所述三维点云数据和所述运动部件在车辆使用中的运动规则，平移或旋转所述目标部件，生成所述目标部件处于所述第一状态时所述车辆对应的目标三维图像；利用所述目标三维图像映射得到所述第二二维图像。3.根据权利要求2所述的方法，其特征在于，所述运动部件包括：车门、引擎盖和后备箱。4.根据权利要求2所述的方法，其特征在于，若所述第二二维图像中存在所述第一二维图像中不可见的目标区域，所述方法还包括：获取所述第一二维图像的环境贴图；利用所述环境贴图对所述目标区域进行渲染，以及将渲染后的目标区域与所述第二二维图像融合。5.根据权利要求1所述的方法，其特征在于，所述目标部件为亮灯部件；所述利用所述第一二维图像、所述目标部件的三维模型、以及所述目标部件在所述车辆中的使用规则，生成所述目标部件处于所述第一状态时所述车辆对应的第二二维图像，包括：利用所述目标部件的三维模型进行二维投影，得到所述目标部件在所述第一二维图像中的投影区域；利用所述亮灯部件在车辆使用中的亮灯规则，编辑所述投影区域的颜色，生成所述车辆对应的第二二维图像。6.根据权利要求5所述的方法，其特征在于，所述亮灯部件包括：车辆的车灯。7.根据权利要求1-6任一项所述的方法，其特征在于，还包括：填补所述第二二维图像的空洞区域；对填补后的二维图像进行平滑滤波。8.根据权利要求1-6任一项所述的方法，其特征在于，所述目标部件在第一状态下所述车辆的语义信息包括下述一种或多种：车门在打开状态下车辆的语义信息为：车内人员要下车；后备箱在打开状态下车辆的语义信息为：车内人员要取货或装货；引擎盖在打开状态下车辆的语义信息为：车辆出现故障；车辆左边车灯在亮黄色状态下车辆的语义信息为：车辆左转；车辆右边车灯在亮黄色状态下车辆的语义信息为：车辆右转。9.一种图像处理的装置，其特征在于，包括：第一获取模块，用于获取车辆在行驶环境中的第一二维图像；所述第一二维图像中标注有所述车辆的目标部件；第二获取模块，用于获取所述目标部件的三维模型，以及所述目标部件在第一状态下所述车辆的语义信息；生成模块，用于利用所述第一二维图像、所述目标部件的三维模型、以及所述目标部件在所述车辆中的使用规则，生成所述目标部件处于所述第一状态时所述车辆对应的第二二维图像；建立模块，用于建立所述第二二维图像与所述语义信息的关联关系。10.根据权利要求9所述的装置，其特征在于，所述目标部件为运动部件；所述生成模块具体用于：利用所述目标部件的三维模型渲染得到所述目标部件的深度图；利用所述目标部件的深度图和所述第一二维图像恢复所述目标部件的三维点云数据；利用所述三维点云数据和所述运动部件在车辆使用中的运动规则，平移或旋转所述目标部件，生成所述目标部件处于所述第一状态时所述车辆对应的目标三维图像；利用所述目标三维图像映射得到所述第二二维图像。11.根据权利要求10所述的装置，其特征在于，所述运动部件包括：车门、引擎盖和后备箱。12.根据权利要求10所述的装置，其特征在于，若所述第二二维图像中存在所述第一二维图像中不可见的目标区域，所述生成模块还用于：获取所述第一二维图像的环境贴图；利用所述环境贴图对所述目标区域进行渲染，以及将渲染后的目标区域与所述第二二维图像融合。13.根据权利要求9所述的装置，其特征在于，所述目标部件为亮灯部件；所述生成模块具体用于：利用所述目标部件的三维模型进行二维投影，得到所述目标部件在所述第一二维图像中的投影区域；利用所述亮灯部件在车辆使用中的亮灯规则，编辑所述投影区域的颜色，生成所述车辆对应的第二二维图像。14.根据权利要求13所述的装置，其特征在于，所述亮灯部件包括：车辆的车灯。15.根据权利要求9-14任一项所述的装置，其特征在于，还包括：优化模块，用于填补所述第二二维图像的空洞区域；对填补后的二维图像进行平滑滤波。16.根据权利要求9-14任一项所述的装置，其特征在于，所述目标部件在第一状态下所述车辆的语义信息包括下述一种或多种：车门在打开状态下车辆的语义信息为：车内人员要下车；后备箱在打开状态下车辆的语义信息为：车内人员要取货或装货；引擎盖在打开状态下车辆的语义信息为：车辆出现故障；车辆左边车灯在亮黄色状态下车辆的语义信息为：车辆左转；车辆右边车灯在亮黄色状态下车辆的语义信息为：车辆右转。17.一种电子设备，其特征在于，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行如权利要求1-8任一项所述的方法的指令。18.一种存储有计算机指令的非瞬时计算机可读存储介质，其特征在于，计算机指令用于使所述计算机执行如权利要求1-8任一项所述的方法。
说明书desc
技术领域本申请涉及图像处理的自动驾驶技术领域，尤其涉及一种图像处理的方法及装置。背景技术在自动驾驶领域中，环境感知是比较重要的部分。例如，在路径规划时，需要感知周围车辆的状态进行适应的路径规划。周围车辆的状态例如可以包括：转弯、长时间停车、短时间停车等。现有技术中，为了识别周围车辆的状态，通常需要采集大量的车辆状态图像，并进行样本标注等，得到用于识别车辆状态的图像模板。但是，采集图像以及进行人工标注的成本高、效率低，且不够灵活。发明内容本申请实施例提供一种图像处理的方法及装置，以解决现有技术中采集图像以及进行人工标注的成本高、效率低的技术问题。本申请实施例第一方面提供一种图像处理的方法，包括：获取车辆在行驶环境中的第一二维图像；所述第一二维图像中标注有所述车辆的目标部件；获取所述目标部件的三维模型，以及所述目标部件在第一状态下所述车辆的语义信息；利用所述第一二维图像、所述目标部件的三维模型、以及所述目标部件在所述车辆中的使用规则，生成所述目标部件处于所述第一状态时所述车辆对应的第二二维图像；建立所述第二二维图像与所述语义信息的关联关系。本申请实施例中，不需要人工采集和标注大量的图像，而是结合目标部件的三维模型，和行驶环境中的车辆二维图像，就可以基于图像处理，得到目标部件在第一状态时的第二二维图像和语义信息的关联关系，效率和灵活性都有较大提高。可选的，所述目标部件为运动部件；所述利用所述第一二维图像、所述目标部件的三维模型、以及所述目标部件在所述车辆中的使用规则，生成所述目标部件处于所述第一状态时所述车辆对应的第二二维图像，包括：利用所述目标部件的三维模型渲染得到所述目标部件的深度图；利用所述目标部件的深度图和所述第一二维图像恢复所述目标部件的三维点云数据；利用所述三维点云数据和所述运动部件在车辆使用中的运动规则，平移或旋转所述目标部件，生成所述目标部件处于所述第一状态时所述车辆对应的目标三维图像；利用所述目标三维图像映射得到所述第二二维图像。可选的，所述运动部件包括：车门、引擎盖和后备箱。可选的，若所述第二二维图像中存在所述第一二维图像中不可见的目标区域，所述方法还包括：获取所述第一二维图像的环境贴图；利用所述环境贴图对所述目标区域进行渲染，以及将渲染后的目标区域与所述第二二维图像融合。可选的，所述目标部件为亮灯部件；所述利用所述第一二维图像、所述目标部件的三维模型、以及所述目标部件在所述车辆中的使用规则，生成所述目标部件处于所述第一状态时所述车辆对应的第二二维图像，包括：利用所述目标部件的三维模型进行二维投影，得到所述目标部件在所述第一二维图像中的投影区域；利用所述亮灯部件在车辆使用中的亮灯规则，编辑所述投影区域的颜色，生成所述车辆对应的第二二维图像。可选的，所述亮灯部件包括：车辆的车灯。可选的，还包括：填补所述第二二维图像的空洞区域；对填补后的二维图像进行平滑滤波。从而得到第二二维图像的效果较佳，在利用第二二维图像识别语义信息时较准确。可选的，所述目标部件在第一状态下所述车辆的语义信息包括下述一种或多种：车门在打开状态下车辆的语义信息为：车内人员要下车；后备箱在打开状态下车辆的语义信息为：车内人员要取货或装货；引擎盖在打开状态下车辆的语义信息为：车辆出现故障；车辆左边车灯在亮黄色状态下车辆的语义信息为：车辆左转；车辆右边车灯在亮黄色状态下车辆的语义信息为：车辆右转。本申请实施例第二方面提供一种图像处理的装置，包括：第一获取模块，用于获取车辆在行驶环境中的第一二维图像；所述第一二维图像中标注有所述车辆的目标部件；第二获取模块，用于获取所述目标部件的三维模型，以及所述目标部件在第一状态下所述车辆的语义信息；生成模块，用于利用所述第一二维图像、所述目标部件的三维模型、以及所述目标部件在所述车辆中的使用规则，生成所述目标部件处于所述第一状态时所述车辆对应的第二二维图像；建立模块，用于建立所述第二二维图像与所述语义信息的关联关系。可选的，所述目标部件为运动部件；所述生成模块具体用于：利用所述目标部件的三维模型渲染得到所述目标部件的深度图；利用所述目标部件的深度图和所述第一二维图像恢复所述目标部件的三维点云数据；利用所述三维点云数据和所述运动部件在车辆使用中的运动规则，平移或旋转所述目标部件，生成所述目标部件处于所述第一状态时所述车辆对应的目标三维图像；利用所述目标三维图像映射得到所述第二二维图像。可选的，所述运动部件包括：车门、引擎盖和后备箱。可选的，若所述第二二维图像中存在所述第一二维图像中不可见的目标区域，所述生成模块还用于：获取所述第一二维图像的环境贴图；利用所述环境贴图对所述目标区域进行渲染，以及将渲染后的目标区域与所述第二二维图像融合。可选的，所述目标部件为亮灯部件；所述生成模块具体用于：利用所述目标部件的三维模型进行二维投影，得到所述目标部件在所述第一二维图像中的投影区域；利用所述亮灯部件在车辆使用中的亮灯规则，编辑所述投影区域的颜色，生成所述车辆对应的第二二维图像。可选的，所述亮灯部件包括：车辆的车灯。可选的，还包括：优化模块，用于填补所述第二二维图像的空洞区域；对填补后的二维图像进行平滑滤波。可选的，所述目标部件在第一状态下所述车辆的语义信息包括下述一种或多种：车门在打开状态下车辆的语义信息为：车内人员要下车；后备箱在打开状态下车辆的语义信息为：车内人员要取货或装货；引擎盖在打开状态下车辆的语义信息为：车辆出现故障；车辆左边车灯在亮黄色状态下车辆的语义信息为：车辆左转；车辆右边车灯在亮黄色状态下车辆的语义信息为：车辆右转。本申请实施例第三方面提供一种电子设备，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行如前述第一方面任一项所述的方法。本申请实施例第四方面提供一种存储有计算机指令的非瞬时计算机可读存储介质，所述计算机指令用于使所述计算机执行如前述第一方面中任一项所述的方法。综上所述，本申请实施例相对于现有技术的有益效果：本申请实施例中提供了一种图像处理的方法及装置，可以根据行驶环境中的、标注有车辆目标部件的第一二维图像，以及目标部件的三维模型，目标部件在车辆中的使用规则，构建目标部件在第一状态时的第二二维图像和语义信息的关联关系。即本申请实施例中，不需要人工采集和标注大量的图像，而是结合目标部件的三维模型，和行驶环境中的车辆二维图像，就可以基于图像处理，得到目标部件在第一状态时的第二二维图像和语义信息的关联关系，效率和灵活性都有较大提高。附图说明图1为本申请实施例提供的图像处理的方法的流程示意图；图2为本申请实施例提供的生成第二二维图像的示意图；图3为本申请实施例提供的图像处理装置的结构示意图；图4是用来实现本申请实施例的图像处理的方法的电子设备的框图。具体实施方式以下结合附图对本申请的示范性实施例做出说明，其中包括本申请实施例的各种细节以助于理解，应当将它们认为仅仅是示范性的。因此，本领域普通技术人员应当认识到，可以对这里描述的实施例做出各种改变和修改，而不会背离本申请的范围和精神。同样，为了清楚和简明，以下的描述中省略了对公知功能和结构的描述。在不冲突的情况下，下述的实施例及实施例中的特征可以相互组合。本申请实施例的图像的处理方法可以应用于具有图像处理能力的设备，例如可以是终端或服务器，终端可以包括：手机、平板电脑、笔记本电脑、或者台式电脑等电子设备。本申请实施例对应用的具体设备不作具体限定。本申请实施例所描述的行驶环境可以为车辆行驶的真实环境，而不是类似于游戏通的虚拟场景。本申请实施例所描述的目标部件的三维模型可以是计算机辅助设计模型等，在三维模型中，可以包括目标部件的深度信息等。本申请实施例的目标部件可以是车辆中的在不同状态能够反映不同车辆的语义信息的部件。本申请实施例所描述的车辆的语义信息可以是反映车辆状态的信息。示例性的，目标部件可以包括：车门、后备箱、引擎盖或车灯等，车门在打开状态下车辆的语义信息为：车内人员要下车；后备箱在打开状态下车辆的语义信息为：车内人员要取货或装货；引擎盖在打开状态下车辆的语义信息为：车辆出现故障；车辆左边车灯在亮黄色状态下车辆的语义信息为：车辆左转；车辆右边车灯在亮黄色状态下车辆的语义信息为：车辆右转，等。本申请实施例所描述的目标部件在车辆中的使用规则，可以只在车辆中使用目标部件时需要遵循的使用规则。例如，车辆中的车门可以是绕一条轴线转动等。如图1所示，图1为本申请实施例提供的图像处理的方法的流程示意图。该方法具体可以包括：S101：获取车辆在行驶环境中的第一二维图像；所述第一二维图像中标注有所述车辆的目标部件。本申请实施例中，可以在车辆的行驶环境中拍摄包得到含车辆的二维图像，并在图像中标注车辆的目标部件。标注目标部件时，可以采用六自由度位姿或其他任意可能的方式标注。需要说明的是，虽然在游戏或图形制作等场景中，可能存在利用车辆模型等得到车辆在各种状态下的图像，但是，因为游戏或图形制作的环境与实际的行驶环境相差较大，如果用在游戏或图形制作环境中得到图像作为实际驾驶中的车辆语义信息识别，会导致识别不准确，或无法识别。因此，本申请实施例中，获取车辆在行驶环境中的二维图像，则后续基于行驶环境的第一二维图像得到第二二维图像时，第二二维图像是符合行驶环境的，利用该第二二维图像识别车辆的语义信息时，能得到较准确的识别结果。S102：获取所述目标部件的三维模型，以及所述目标部件在第一状态下所述车辆的语义信息。本申请实施例中，目标部件的三维模型以及目标部件在第一状态下所述车辆的语义信息，均可以从本地或网络中获取，本申请实施例对此不作具体限定。具体应用中，目标部件的数量可以为一个，也可以为多个。可以根据车辆的型号等，获取车辆的三维模型，车辆的三维模型中包括了目标部件的三维模型。或者，也可以分别获取各目标部件的三维模型。S103：利用所述第一二维图像、所述目标部件的三维模型、以及所述目标部件在所述车辆中的使用规则，生成所述目标部件处于所述第一状态时所述车辆对应的第二二维图像。本申请实施例中，目标部件在车辆中可以包括多种状态，例如，目标部件为车门时，车门的状态可以包括打开状态或关闭状态；目标部件为后备箱时，后备箱的状态可以包括打开状态或关闭状态；目标部件为引擎盖时，后备箱的状态可以包括打开状态或关闭状态；目标部件为车灯时，车灯的状态可以包括左边车灯在亮黄色状态，或右边车灯在亮黄色状态；等。目标部件的在不同状态可以对应于不同的车辆的语义信息，因此第一状态可以结合目标部件本身可能存在的状态具体确定，本申请实施例对第一状态不作限定。利用目标部件的三维模型可以得到目标部件的完整结构，在第一二维图像中，车辆中的目标部件可能处于A状态，根据目标部件在车辆中的使用规则将目标部件进行旋转、平移等，对于目标部件进行旋转、平移等操作后可能新增的结构，可以结合目标部件的三维模型进行补全，进而可以合成目标部件在任意不同于A状态时的第二二维图像。具体应用中，可以采用任意方式利用第一二维图像、目标部件的三维模型、以及目标部件在车辆中的使用规则，生成目标部件处于第一状态时车辆对应的第二二维图像，本申请实施例对此不作具体限定。S104：建立所述第二二维图像与所述语义信息的关联关系。本申请实施例中，在得到第二二维图像后，可以建立第二二维图像与对应的语义信息的关联关系。例如，可以将第二二维图像和对应的语义信息关联存储。则后续，在自动驾驶场景中，如果自动驾驶车辆拍摄周围车辆的图片时，可以将周围车辆的图片与第二二维图像进行匹配，得到周围车辆的语义信息，进而执行实行的自动驾驶策略。可选的，第二二维图像在合成中可能存在空洞区域等，使得第二二维图像的效果不佳，可能导致在利用第二二维图像识别语义信息时不准确，因此，还可以进一步填补所述第二二维图像的空洞区域；对填补后的二维图像进行平滑滤波。示例性的，可以将第一二维图像和第二二维图像中的目标部件中的内容进行差值计算等，将差值较大的区域认为空洞区域，结合目标部件在第一二维图像中的内容进行填充，并可以采用双边滤波等滤波算法对图形进行平滑滤波，得到效果较好的第二二维图像。综上所述，本申请实施例中提供了一种图像处理的方法及装置，可以根据行驶环境中的、标注有车辆目标部件的第一二维图像，以及目标部件的三维模型，目标部件在车辆中的使用规则，构建目标部件在第一状态时的第二二维图像和语义信息的关联关系。即本申请实施例中，不需要人工采集和标注大量的图像，而是结合目标部件的三维模型，和行驶环境中的车辆二维图像，就可以基于图像处理，得到目标部件在第一状态时的第二二维图像和语义信息的关联关系，效率和灵活性都有较大提高。可选的，所述目标部件为运动部件；S103的所述利用所述第一二维图像、所述目标部件的三维模型、以及所述目标部件在所述车辆中的使用规则，生成所述目标部件处于所述第一状态时所述车辆对应的第二二维图像，包括：利用所述目标部件的三维模型渲染得到所述目标部件的深度图；利用所述目标部件的深度图和所述第一二维图像恢复所述目标部件的三维点云数据；利用所述三维点云数据和所述运动部件在车辆使用中的运动规则，平移或旋转所述目标部件，生成所述目标部件处于所述第一状态时所述车辆对应的目标三维图像；利用所述目标三维图像映射得到所述第二二维图像。本申请实施例中，所述运动部件可以包括：车门、引擎盖和后备箱。对于运动部件，可以分为可见区域和不可见区域，可见区域可以为在第一二维图像中能够显示的部分，不可见区域可以为在第一二维图像中不能显示的部分。例如，若目标部件为车门，在第一二维图像中，车门为关闭状态，则车门关闭时在车辆外部可见的为可见区域，在车辆外部不可见的为不可见区域。对于可见区域，可以利用目标部件的三维模型渲染得到目标部件的深度图，以及利用目标部件的深度图和第一二维图像恢复目标部件的三维点云数据，进而利用三维点云数据和运动部件在车辆使用中的运动规则，平移或旋转目标部件，生成目标部件处于第一状态时车辆对应的目标三维图像。例如，第一二维图像中，车辆的车门、引擎盖等都处于关闭状态，则可以基于上述步骤生成开门处于打开状态或引擎盖处于打开状态等的车辆三维图像。进而可以利用相机成像原理，将目标三维图像映射到二维图像上，得到第二二维图像。对于不可见区域，则可以根据目标部件的三维模型进行补充，得到不可见区域的图像。可选的，若所述第二二维图像中存在所述第一二维图像中不可见的目标区域，所述方法还包括：获取所述第一二维图像的环境贴图；利用所述环境贴图对所述目标区域进行渲染，以及将渲染后的目标区域与所述第二二维图像融合。因为不可见的目标区域是根据目标部件的三维模型补充得到的，因此可能与环境融合度较差，导致第二二维图像的图像效果较差。本申请实施例中，可以获取第一二维图像的环境贴图；利用环境贴图对目标区域进行渲染，以及将渲染后的目标区域与第二二维图像融合，使得不可见的目标区域与第一二维图像的行驶环境相融合，得到较准确的第二二维图像。可选的，所述目标部件为亮灯部件；S103的所述利用所述第一二维图像、所述目标部件的三维模型、以及所述目标部件在所述车辆中的使用规则，生成所述目标部件处于所述第一状态时所述车辆对应的第二二维图像，包括：利用所述目标部件的三维模型进行二维投影，得到所述目标部件在所述第一二维图像中的投影区域；利用所述亮灯部件在车辆使用中的亮灯规则，编辑所述投影区域的颜色，生成所述车辆对应的第二二维图像。本申请实施例中，亮灯部件可以为车辆的车灯。对于亮灯部件，可以直接由目标部件的三维模型在第一二维图像中进行二维投影，获得第一二维图像中的对应区域，然后根据车辆的语义信息将该区域进行颜色编辑，例如，语义信息为左转时，左前灯编辑为黄色；语义信息为停车时，两个尾灯编辑为红色；语义信息为危险报警时，两个尾灯编辑为黄色；等。示例性的，图2示出了一种得到第二二维图像的示意图。如图2所示，可以将行驶环境中拍摄的、标注有六自由度位姿的目标部件的二维图像，以及目标部件的CAD三维模型作为输入，输出车辆在车门打开和后备箱打开时的二维图像。其中，对车门和后备箱的可见区域，可以利用车门和后备箱的三维模型渲染得到车门和后备箱的深度图，以及利用车门和后备箱的深度图和输入的二维图像恢复车门和后备箱的三维点云数据，实现部件重建，之后利用三维点云数据和车门和后备箱在车辆使用中的运动规则，平移或旋转车门和后备箱，生成车门和后备箱的三维图像，进一步将三维图像投影为二维图像，并对投影得到的二维图像优化处理。对于车门和后备箱的不可见区域，可以进行环境贴图和三维部件渲染。本申请实施例中，不需要人工采集和标注大量的图像，而是结合目标部件的三维模型，和行驶环境中的车辆二维图像，就可以基于图像处理，得到目标部件在第一状态时的第二二维图像和语义信息的关联关系，效率和灵活性都有较大提高，成本也较低。图3为本申请提供的图像处理的装置一实施例的结构示意图。如图3所示，本实施例提供的图像处理的装置包括：第一获取模块31，用于获取车辆在行驶环境中的第一二维图像；所述第一二维图像中标注有所述车辆的目标部件；第二获取模块32，用于获取所述目标部件的三维模型，以及所述目标部件在第一状态下所述车辆的语义信息；生成模块33，用于利用所述第一二维图像、所述目标部件的三维模型、以及所述目标部件在所述车辆中的使用规则，生成所述目标部件处于所述第一状态时所述车辆对应的第二二维图像；建立模块34，用于建立所述第二二维图像与所述语义信息的关联关系。可选的，所述目标部件为运动部件；所述生成模块具体用于：利用所述目标部件的三维模型渲染得到所述目标部件的深度图；利用所述目标部件的深度图和所述第一二维图像恢复所述目标部件的三维点云数据；利用所述三维点云数据和所述运动部件在车辆使用中的运动规则，平移或旋转所述目标部件，生成所述目标部件处于所述第一状态时所述车辆对应的目标三维图像；利用所述目标三维图像映射得到所述第二二维图像。可选的，所述运动部件包括：车门、引擎盖和后备箱。可选的，若所述第二二维图像中存在所述第一二维图像中不可见的目标区域，所述生成模块还用于：获取所述第一二维图像的环境贴图；利用所述环境贴图对所述目标区域进行渲染，以及将渲染后的目标区域与所述第二二维图像融合。可选的，所述目标部件为亮灯部件；所述生成模块具体用于：利用所述目标部件的三维模型进行二维投影，得到所述目标部件在所述第一二维图像中的投影区域；利用所述亮灯部件在车辆使用中的亮灯规则，编辑所述投影区域的颜色，生成所述车辆对应的第二二维图像。可选的，所述亮灯部件包括：车辆的车灯。可选的，还包括：优化模块，用于填补所述第二二维图像的空洞区域；对填补后的二维图像进行平滑滤波。可选的，所述目标部件在第一状态下所述车辆的语义信息包括下述一种或多种：车门在打开状态下车辆的语义信息为：车内人员要下车；后备箱在打开状态下车辆的语义信息为：车内人员要取货或装货；引擎盖在打开状态下车辆的语义信息为：车辆出现故障；车辆左边车灯在亮黄色状态下车辆的语义信息为：车辆左转；车辆右边车灯在亮黄色状态下车辆的语义信息为：车辆右转。本申请实施例中提供了一种图像处理的方法及装置，可以根据行驶环境中的、标注有车辆目标部件的第一二维图像，以及目标部件的三维模型，目标部件在车辆中的使用规则，构建目标部件在第一状态时的第二二维图像和语义信息的关联关系。即本申请实施例中，不需要人工采集和标注大量的图像，而是结合目标部件的三维模型，和行驶环境中的车辆二维图像，就可以基于图像处理，得到目标部件在第一状态时的第二二维图像和语义信息的关联关系，效率和灵活性都有较大提高。本申请各实施例提供的图像处理的装置可用于执行如前述各对应的实施例所示的方法，其实现方式与原理相同，不再赘述。根据本申请的实施例，本申请还提供了一种电子设备和一种可读存储介质。如图4所示，是根据本申请实施例的图像处理的方法的电子设备的框图。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本申请的实现。如图4所示，该电子设备包括：一个或多个处理器401、存储器402，以及用于连接各部件的接口，包括高速接口和低速接口。各个部件利用不同的总线互相连接，并且可以被安装在公共主板上或者根据需要以其它方式安装。处理器可以对在电子设备内执行的指令进行处理，包括存储在存储器中或者存储器上以在外部输入/输出装置上显示GUI的图形信息的指令。在其它实施方式中，若需要，可以将多个处理器和/或多条总线与多个存储器和多个存储器一起使用。同样，可以连接多个电子设备，各个设备提供部分必要的操作。图4中以一个处理器401为例。存储器402即为本申请所提供的非瞬时计算机可读存储介质。其中，所述存储器存储有可由至少一个处理器执行的指令，以使所述至少一个处理器执行本申请所提供的图像处理的方法。本申请的非瞬时计算机可读存储介质存储计算机指令，该计算机指令用于使计算机执行本申请所提供的图像处理的方法。存储器402作为一种非瞬时计算机可读存储介质，可用于存储非瞬时软件程序、非瞬时计算机可执行程序以及模块，如本申请实施例中的图像处理的方法对应的程序指令/模块。处理器401通过运行存储在存储器402中的非瞬时软件程序、指令以及模块，从而执行服务器的各种功能应用以及数据处理，即实现上述方法实施例中的图像处理的方法。存储器402可以包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需要的应用程序；存储数据区可存储根据图像处理的电子设备的使用所创建的数据等。此外，存储器402可以包括高速随机存取存储器，还可以包括非瞬时存储器，例如至少一个磁盘存储器件、闪存器件、或其他非瞬时固态存储器件。在一些实施例中，存储器402可选包括相对于处理器401远程设置的存储器，这些远程存储器可以通过网络连接至图像处理的电子设备。上述网络的实例包括但不限于互联网、企业内部网、局域网、移动通信网及其组合。图像处理的方法的电子设备还可以包括：输入装置403和输出装置404。处理器401、存储器402、输入装置403和输出装置404可以通过总线或者其他方式连接，图4中以通过总线连接为例。输入装置403可接收输入的数字或字符信息，以及产生与图像处理的电子设备的用户设置以及功能控制有关的键信号输入，例如触摸屏、小键盘、鼠标、轨迹板、触摸板、指示杆、一个或者多个鼠标按钮、轨迹球、操纵杆等输入装置。输出装置404可以包括显示设备、辅助照明装置和触觉反馈装置等。该显示设备可以包括但不限于，液晶显示器、发光二极管显示器和等离子体显示器。在一些实施方式中，显示设备可以是触摸屏。此处描述的系统和技术的各种实施方式可以在数字电子电路系统、集成电路系统、专用ASIC、计算机硬件、固件、软件、和/或它们的组合中实现。这些各种实施方式可以包括：实施在一个或者多个计算机程序中，该一个或者多个计算机程序可在包括至少一个可编程处理器的可编程系统上执行和/或解释，该可编程处理器可以是专用或者通用可编程处理器，可以从存储系统、至少一个输入装置、和至少一个输出装置接收数据和指令，并且将数据和指令传输至该存储系统、该至少一个输入装置、和该至少一个输出装置。这些计算程序包括可编程处理器的机器指令，并且可以利用高级过程和/或面向对象的编程语言、和/或汇编/机器语言来实施这些计算程序。如本文使用的，术语“机器可读介质”和“计算机可读介质”指的是用于将机器指令和/或数据提供给可编程处理器的任何计算机程序产品、设备、和/或装置)，包括，接收作为机器可读信号的机器指令的机器可读介质。术语“机器可读信号”指的是用于将机器指令和/或数据提供给可编程处理器的任何信号。为了提供与用户的交互，可以在计算机上实施此处描述的系统和技术，该计算机具有：用于向用户显示信息的显示装置或者LCD监视器)；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给计算机。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网和互联网。计算机系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。根据本申请实施例的技术方案，可以根据行驶环境中的、标注有车辆目标部件的第一二维图像，以及目标部件的三维模型，目标部件在车辆中的使用规则，构建目标部件在第一状态时的第二二维图像和语义信息的关联关系。即本申请实施例中，不需要人工采集和标注大量的图像，而是结合目标部件的三维模型，和行驶环境中的车辆二维图像，就可以基于图像处理，得到目标部件在第一状态时的第二二维图像和语义信息的关联关系，效率和灵活性都有较大提高。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本申请中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本申请公开的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本申请保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本申请的精神和原则之内所作的修改、等同替换和改进等，均应包含在本申请保护范围之内。
