标题title
基于时间卷积网络的细粒度光伏负荷预测方法
摘要abst
本发明涉及一种基于时间卷积网络的细粒度光伏负荷预测方法，属于智能电网技术领域。步骤如下：收集天气原始数据，对每个原始天气数据根据光伏现场采集的太阳辐射综合数据赋予浮点值，进行编码处理，其它原始数据为浮点数表示的不作处理，得到最终的天气特征数据。设定原始负荷数据的采集频率和阈值，并通过比较采集频率和阈值设定功率窗长。前端为输入层，经过残差块以及Flatten层，再经过全连接层，最后得出预测结果，即为时间卷积网络。输入构建的时间卷积网络中，得到预测结果。预测效果较好，基于卷积网络可以并行化计算，大大提高了训练速度。
权利要求书clms
1.一种基于时间卷积网络的细粒度光伏负荷预测方法，其特征在于：包括如下步骤：步骤1：收集天气原始数据，对每个天气原始数据根据光伏现场采集的太阳辐射综合数据赋予浮点值，代表该天气下的太阳能辐射情况，对不同情况进行编码处理，其它原始数据为浮点数表示的不作处理，得到最终的天气特征数据；步骤2：功率窗长window_size的选定：设定原始负荷数据的采集频率和阈值，并通过比较采集频率和阈值设定功率窗长window_size；步骤3：时间卷积网络搭建：前端为输入层，经过若干个残差块以及Flatten层，再经过若干个全连接层，最后得出预测结果，即为时间卷积网络；步骤4：负荷预测：取T时刻，将T-1-window_size至T-1区间的负荷序列和T时刻的天气特征输入步骤3中构建的时间卷积网络中，得到预测结果。2.根据权利要求1所述的基于时间卷积网络的细粒度光伏负荷预测方法，其特征在于：步骤1中所述天气特征的构造的具体步骤为：步骤1.1：爬取天气预报数据，包括天气、气温、风向风速、气压、湿度和降水概率；步骤1.2：将步骤1.1得到的天气预报数据中的复合天气特征拆分为天气1和天气2；步骤1.3：将步骤1.2中拆分的天气信息构造为一个集合{Wi}，对每一个Wi，赋予一个浮点数值Vi，其中Vi根据人为经验和光伏现场传感器采集的太阳辐射程度综合判断给定，晴=v1，多云=v2，小雨=v3，小雪=v4，阵雨=v5，阴=v6，雨夹雪=v7，中雨=v8，中雪=v9，大雨=v10，v1＞v2＞v3＞v4＞v5＞v6＞v7＞v8＞v9＞v10；步骤1.4：将风向原始数据以字符串格式进行编码，得到最终的天气特征数据。3.根据权利要求1所述的基于时间卷积网络的细粒度光伏负荷预测方法，其特征在于：步骤2功率窗长window_size的选定的具体步骤为：步骤2.1：设定原始负荷数据一天的采集频率为N个时间点；步骤2.2：设定用功率窗长window_size内的点数来预测下一个点的天气特征，设阈值th1，若步骤2.1中的N大于th1，则使得window_size=N，若N小于th1，则window_size=th1。4.根据权利要求1所述的基于时间卷积网络的细粒度光伏负荷预测方法，其特征在于：步骤3中经历的残差块为3个，经历的全连接层为3个，每个所述残差块内包括一维时间卷积、Dropout层、一维时间卷积和Dropout层按顺序排列，其中一维时间卷积中的卷积核数量为k，卷积核大小为kernel_size，步长为stride。5.根据权利要求1所述的基于时间卷积网络的细粒度光伏负荷预测方法，其特征在于：步骤3中全连接层中第一层有神经元，第二层有神经元，第三层为1个神经元。
说明书desc
技术领域本发明涉及一种基于时间卷积网络的细粒度光伏负荷预测方法，属于智能电网技术领域。背景技术由于电能难以大量存储以及电力需求时刻变化等特点，要求系统发电应与负荷的变化实现动态平衡。提高负荷预测准确率有利于提高光伏发电设备的利用率和经济调度的有效性。电力负荷数据具有时序性和非线性的特点，围绕其特点，国内外一般对短期电力负荷预测的模型研究分为两类，一类是时间序列分析方法，例如回归分析法、指数平滑模型法、卡尔曼滤波法、自回归积分滑动平均模型等，基本思想是从随机时间序列的过去负荷值及现在负荷值来预测未来负荷值，它的优点在于考虑了数据的时序性关系，缺点是对非线性关系数据的预测能力有限。第二类是机器学习分析方法，如随机森林，支持向量机等。这类算法问题在于缺少对时序数据时间相关性的考虑，需要人为添加时间特征来保证预测的结果。目前长短时记忆网络由于兼顾数据的时序性和非线性关系，被逐渐应用在负荷预测领域。但LSTM算法由于原理特性，导致其不能进行并行计算，训练速度很慢，非常消耗计算资源。采用时间卷积网络TCN进行光伏负荷的短时预测，不仅预测效果较好，而且，基于卷积网络可以并行化计算，大大提高了训练速度。在大数据的背景下，可以高效的训练模型。发明内容发明目的：针对上述现有存在的问题和不足，本发明的目的是提供一种基于时间卷积网络的细粒度光伏负荷预测方法，采用时间卷积网络TCN进行光伏负荷的短时预测，不仅预测效果较好，而且，基于卷积网络可以并行化计算，大大提高了训练速度。在大数据的背景下，可以高效的训练模型。技术方案：为实现上述发明目的，本发明采用以下技术方案：一种基于时间卷积网络的细粒度光伏负荷预测方法，包括如下步骤：步骤1：收集天气原始数据，对每个天气原始数据根据光伏现场采集的太阳辐射综合数据赋予浮点值，代表该天气下的太阳能辐射情况，对不同情况进行编码处理，其它原始数据为浮点数表示的不作处理，得到最终的天气特征数据；步骤2：功率窗长window_size的选定：设定原始负荷数据的采集频率和阈值，并通过比较采集频率和阈值设定功率窗长window_size；步骤3：时间卷积网络搭建：前端为输入层，经过若干个残差块以及Flatten层，再经过若干个全连接层，最后得出预测结果，即为时间卷积网络；步骤4：负荷预测：取T时刻，将T-1-window_size至T-1区间的负荷序列和T时刻的天气特征输入步骤3中构建的时间卷积网络中，得到预测结果。进一步的，步骤1中所述天气特征的构造的具体步骤为：步骤1.1：爬取天气预报数据，包括天气、气温、风向风速、气压、湿度和降水概率；步骤1.2：将步骤1.1得到的天气预报数据中的复合天气特征拆分为天气1和天气2；步骤1.3：将步骤1.2中拆分的天气信息构造为一个集合{Wi}，对每一个Wi，赋予一个浮点数值Vi，其中Vi根据人为经验和光伏现场传感器采集的太阳辐射程度综合判断给定，晴=v1，多云=v2，小雨=v3，小雪=v4，阵雨=v5，阴=v6，雨夹雪=v7，中雨=v8，中雪=v9，大雨=v10，v1＞v2＞v3＞v4＞v5＞v6＞v7＞v8＞v9＞v10；步骤1.4：将风向原始数据以字符串格式进行编码，得到最终的天气特征数据。进一步的，步骤2功率窗长window_size的选定的具体步骤为：步骤2.1：设定原始负荷数据一天的采集频率为N个时间点；步骤2.2：设定用功率窗长window_size内的点数来预测下一个点的天气特征，设阈值th1，若步骤2.1中的N大于th1，则使得window_size=N，若N小于th1，则window_size=th1。进一步的，步骤3中经历的残差块为3个，经历的全连接层为3个，每个所述残差块内包括一维时间卷积、Dropout层、一维时间卷积和Dropout层按顺序排列，其中一维时间卷积中的卷积核数量为k，卷积核大小为kernel_size，步长为stride。进一步的，步骤3中全连接层中第一层有神经元，第二层有神经元，第三层为1个神经元。有益效果：与现有技术相比，本发明具有以下优点：这是一种新式的基于时间卷积网络的细粒度光伏负荷预测方法，通过对天气特征进行特殊处理，表征太阳辐射值，对光伏负荷预测结果有较好提升。通过时间卷积网络TCN进行模型构建，不仅可以兼顾数据的时序性和非线性关系，并且这一网络有着能并行处理灵活和占内存较小等优越性。附图说明图1是本发明的TCN神经网络进行光伏负荷预测的步骤；图2是本发明的TCN网络模型输入数据结构；图3是本发明的TCN模型结构图；图4是本发明的实施例的天气原始数据；图5是本发明的实施例的原始数据处理后示意图；图6是本发明的实施例的预测结果图；图7是本发明的实施例得出的预测细粒度光伏负荷数据。具体实施方式下面结合附图和具体实施例，进一步阐明本发明，应理解这些实施例仅用于说明本发明而不用于限制本发明的范围，在阅读了本发明之后，本领域技术人员对本发明的各种等价形式的修改均落于本申请所附权利要求所限定的范围。实施例步骤如图1所示，一种基于时间卷积网络的细粒度光伏负荷预测方法，取地区A如图4所示的2020年6月2日0时至23时45分的数据，来预测3日的0时细粒度光伏负荷值。进行如图2所示的步骤，其中气温、风力、风速、气压、湿度均为具体数值，代入模型中即可，天气为阴转中雨，为两个天气，拆分为天气1和天气2，weather1为阴，weather2为中雨，将天气数据处理后得到如图5所示的数据，2日共采集96个功率点，即N为96，96个功率点与3日0时的天气特征拼接后用于3日0时功率点的预测。取的N可以由具体情况来具体定，N越大可以使得最终结果更准确，因为之前选取的样点多，更有利于后续的预测。如图3所示，构建时间卷积网络。本实施例中时间卷积网络中，输入层之后，共3个残差块，每个残差块内含四层：一维时间卷积：卷积核数量为k，其中k为32，卷积核大小为kernel_size，kernel_size为3，步长stride1为1。Dropout层一维时间卷积：Dropout层。再通过Flatten层，接着经过256个神经元的全连接层，64个神经元的全连接层以及1个神经元的全连接层，即为通过这个时间卷积网络。本实施例中，通过3个上述的时间卷积网络，即可通过2日的96个点的细粒度光伏负荷，得到如图6-7所示的预测数据，由于采集精度的问题，实际得到3日的0时细粒度光伏负荷预测结果为0，没有发电。本方法可以通过天气特征表征太阳辐射值，增强后续光伏负荷预测的准确性，使得最终光伏负荷预测结果更有可信度。使用时间卷积网络TCN进行模型构建，不仅可以兼顾数据的时序性和非线性关系，且能并行处理，更为灵活，占内存较小。
