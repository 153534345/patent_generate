标题title
一种航线规划方法、装置及机载激光雷达的飞行设备
摘要abst
本申请公开一种航线规划方法、装置及机载激光雷达的飞行设备。获得多边形测区的高程极大值点集合和高程极小值点集合。根据高程极大值点集合中的点对应的高程极大值、高程极小值点集合中的点对应的高程极小值和机载激光雷达的飞行设备的最大爬升角，获得非推荐航线角度列表。列表非空时，根据参考航线角度和非推荐航线角度列表规划机载激光雷达的飞行设备对多边形测区的航线，参考航线角度为依据预设约束条件为多边形测区规划的航线对应的航线角度，预设约束条件为总航程最短。根据参考航线角度和非推荐航线角度列表规划机载激光雷达的飞行设备对多边形测区的航线，可使航线规避非推荐的航线角度，提升飞行设备的安全性，保证激光雷达的数据质量。
权利要求书clms
1.一种航线规划方法，其特征在于，包括：获得多边形测区的高程极大值点集合和高程极小值点集合；根据所述高程极大值点集合中的点对应的高程极大值、所述高程极小值点集合中的点对应的高程极小值和机载激光雷达的飞行设备的最大爬升角，获得非推荐航线角度列表；所述非推荐航线角度列表中包含自然数个非推荐的航线角度；当所述非推荐航线角度列表非空时，根据参考航线角度和所述非推荐航线角度列表规划机载激光雷达的飞行设备对所述多边形测区的航线；所述参考航线角度为依据预设约束条件为所述多边形测区规划的航线对应的航线角度；所述预设约束条件为总航程最短。2.根据权利要求1所述的航线规划方法，其特征在于，所述获得多边形测区的高程极大值点集合和高程极小值点集合，具体包括：获得所述多边形测区的外接矩形区域对应的高程数据集合；所述高程数据集合包含所述外接矩形区域中每个栅格点的高程值；根据所述高程数据集合获得每个栅格点的梯度；对于每个栅格点，根据其梯度和其相邻的四个栅格点的梯度确定出其为局部高程极大值点、局部高程极小值点或者既不是局部高程极大值点也不是局部高程极小值点；将局部高程极大值点加入到所述高程极大值点集合中，将局部高程极小值点加入到所述高程极小值点集合中。3.根据权利要求1所述的航线规划方法，其特征在于，所述根据所述高程极大值点集合中的点对应的高程极大值、所述高程极小值点集合中的点对应的高程极小值和机载激光雷达的飞行设备的最大爬升角，获得非推荐航线角度列表，具体包括：对于所述高程极大值点集合中的每一个点，计算其与所述高程极小值点集合中的所有点分别组合时的坡度角；所述坡度角为依据组合的两个点中一个点对应的高程极大值和另一个点对应的高程极小值获得；将大于所述最大爬升角的所述坡度角对应的航线角度加入到所述非推荐航线角度列表中。4.根据权利要求1所述的航线规划方法，其特征在于，还包括：当所述非推荐航线角度列表为空时，依据预设约束条件规划所述机载激光雷达的飞行设备对所述多边形测区的航线。5.根据权利要求1所述的航线规划方法，其特征在于，所述根据参考航线角度和所述非推荐航线角度列表规划机载激光雷达的飞行设备对所述多边形测区的航线，具体包括：设定角度增量和所述角度增量的增加次数；根据所述参考航线角度、所述角度增量和所述增加次数获得当前航线角度；将所述当前航线角度与所述非推荐航线角度列表中的每一个非推荐的航线角度进行比较，得到角度偏差绝对值；根据所述角度偏差绝对值规划所述机载激光雷达的飞行设备对所述多边形测区的航线。6.根据权利要求5所述的航线规划方法，其特征在于，所述根据所述角度偏差绝对值规划所述机载激光雷达的飞行设备对所述多边形测区的航线，具体包括：当所述当前航线角度与所述非推荐航线角度列表中的任意一个非推荐的航线角度的所述角度偏差绝对值小于所述角度增量，则对所述增加次数加1；所述增加次数的初始值为0；当所述当前航线角度与所述非推荐航线角度列表中的所有非推荐的航线角度的所述角度偏差绝对值均大于或等于所述角度增量，则根据所述当前航线角度规划所述机载激光雷达的飞行设备对所述多边形测区的航线。7.根据权利要求6所述的航线规划方法，其特征在于，所述根据所述当前航线角度规划所述机载激光雷达的飞行设备对所述多边形测区的航线，具体包括：设定安全因子；所述安全因子大于0，且所述安全因子小于1；获得所述安全因子与所述最大爬升角的第一乘积；获得以所述当前航线角度形成的航线在所述多边形测区的投影轮廓线的最大坡度角；将所述最大坡度角与所述第一乘积进行比较，当确定所述最大坡度角小于所述第一乘积，则以所述当前航线角度规划所述机载激光雷达的飞行设备对所述多边形测区的航线；当确定所述最大坡度角大于或等于所述第一乘积，则对所述增加次数加1。8.根据权利要求7所述的航线规划方法，其特征在于，所述根据所述参考航线角度、所述角度增量和所述增加次数获得当前航线角度，具体包括：获得所述角度增量和所述增加次数的第二乘积；将所述参考航线角度与所述第二乘积之和作为所述当前航线角度；在所述对所述增加次数加1之前，所述方法还包括：判断所述第二乘积与360°的角度偏差绝对值是否小于所述角度增量，如果否，则执行所述对所述增加次数加1；如果是，则确定规划所述机载激光雷达的飞行设备对所述多边形测区的航线失败。9.根据权利要求8所述的航线规划方法，其特征在于，在所述确定规划所述机载激光雷达的飞行设备对所述多边形测区的航线失败之后，所述方法还包括：提高所述安全因子。10.根据权利要求2所述的规划方法，其特征在于，还包括：对所述外接矩形区域的四边分别以预设外扩距离进行外扩，得到外扩矩形区域；所述获得所述多边形测区的外接矩形区域对应的高程数据集合，具体包括：获得所述外扩矩形区域对应的高程数据集合。11.一种航线规划装置，其特征在于，包括：高程极值点集合获取模块、非推荐航线角度列表获取模块和航线规划模块；所述高程极值点集合获取模块，用于获得多边形测区的高程极大值点集合和高程极小值点集合；所述非推荐航线角度列表获取模块，用于根据所述高程极大值点集合中的点对应的高程极大值、所述高程极小值点集合中的点对应的高程极小值和机载激光雷达的飞行设备的最大爬升角，获得非推荐航线角度列表；所述非推荐航线角度列表中包含x个非推荐的航线角度，所述x为自然数；当所述非推荐航线角度列表非空时，所述航线规划模块，用于根据参考航线角度和所述非推荐航线角度列表规划机载激光雷达的飞行设备对所述多边形测区的航线；所述参考航线角度为依据预设约束条件为所述多边形测区规划的航线对应的航线角度；所述预设约束条件为总航程最短。12.根据权利要求11所述的航线规划装置，其特征在于，所述高程极值点集合获取模块，具体包括：高程数据集合获取单元，用于获得所述多边形测区的外接矩形区域对应的高程数据集合；所述高程数据集合包含所述外接矩形区域中每个栅格点的高程值；栅格点梯度获取单元，用于根据所述高程数据集合获得每个栅格点的梯度；局部高程极值点确定单元，用于对于每个栅格点，根据其梯度和其相邻的四个栅格点的梯度确定出其为局部高程极大值点、局部高程极小值点或者既不是局部高程极大值点也不是局部高程极小值点；高程极大值点集合获取单元，用于将局部高程极大值点加入到所述高程极大值点集合中；高程极小值点集合获取单元，用于将局部高程极小值点加入到所述高程极小值点集合中。13.根据权利要求11所述的航线规划装置，其特征在于，所述非推荐航线角度列表获取模块，具体包括：坡度角计算单元，用于对于所述高程极大值点集合中的每一个点，计算其与所述高程极小值点集合中的所有点分别组合时的坡度角；所述坡度角为依据组合的两个点中一个点对应的高程极大值和另一个点对应的高程极小值获得；航线角度添加单元，用于将大于所述最大爬升角的所述坡度角对应的航线角度加入到所述非推荐航线角度列表中。14.根据权利要求11所述的航线规划装置，其特征在于，当所述非推荐航线角度列表为空时，所述航线规划模块，用于依据预设约束条件规划所述机载激光雷达的飞行设备对所述多边形测区的航线。15.根据权利要求11所述的航线规划装置，其特征在于，所述航线规划模块，具体包括：第一设置单元，用于设定角度增量和所述角度增量的增加次数；当前航线角度获取单元，用于根据所述参考航线角度、所述角度增量和所述增加次数获得当前航线角度；第一角度比较单元，用于将所述当前航线角度与所述非推荐航线角度列表中的每一个非推荐的航线角度进行比较，得到角度偏差绝对值；航线规划单元，用于根据所述角度偏差绝对值规划所述机载激光雷达的飞行设备对所述多边形测区的航线。16.根据权利要求15所述的航线规划装置，其特征在于，所述航线规划单元，具体包括：第一执行单元，用于当所述当前航线角度与所述非推荐航线角度列表中的任意一个非推荐的航线角度的所述角度偏差绝对值小于所述角度增量，则对所述增加次数加1；所述增加次数的初始值为0；第二执行单元，用于当所述当前航线角度与所述非推荐航线角度列表中的所有非推荐的航线角度的所述角度偏差绝对值均大于或等于所述角度增量，则根据所述当前航线角度规划所述机载激光雷达的飞行设备对所述多边形测区的航线。17.根据权利要求16所述的航线规划装置，其特征在于，所述第二执行单元，具体包括：第二设置单元，用于设定安全因子；所述安全因子大于0，且所述安全因子小于1；第一计算单元，用于获得所述安全因子与所述最大爬升角的第一乘积；最大坡度角获取单元，用于获得以所述当前航线角度形成的航线在所述多边形测区的投影轮廓线的最大坡度角；第二角度比较单元，用于将所述最大坡度角与所述第一乘积进行比较；第三执行单元，用于当确定所述最大坡度角小于所述第一乘积，则以所述当前航线角度规划所述机载激光雷达的飞行设备对所述多边形测区的航线；第四执行单元，用于当确定所述最大坡度角大于或等于所述第一乘积，则对所述增加次数加1。18.根据权利要求17所述的航线规划装置，其特征在于，所述当前航线角度获取单元，具体包括：第二计算单元，用于获得所述角度增量和所述增加次数的第二乘积；第三计算单元，用于将所述参考航线角度与所述第二乘积之和作为所述当前航线角度；在所述第四执行单元对所述增加次数加1之前，以及在所述第一执行单元对所述增加次数加1之前，所述装置还包括：第三角度比较单元，用于判断所述第二乘积与360°的角度偏差绝对值是否小于所述角度增量，如果否，则所述第四执行单元执行所述对所述增加次数加1或者所述第一执行单元执行所述对所述增加次数加1；如果是，则航线规划结果确定单元用于确定规划所述机载激光雷达的飞行设备对所述多边形测区的航线失败。19.根据权利要求18所述的航线规划装置，其特征在于，在所述航线规划结果确定单元确定规划所述机载激光雷达的飞行设备对所述多边形测区的航线失败之后，所述第二设置单元还用于：提高所述安全因子。20.根据权利要求12所述的航线规划装置，其特征在于，还包括：区域外扩模块，用于对所述外接矩形区域的四边分别以预设外扩距离进行外扩，得到外扩矩形区域；所述高程数据集合获取单元，具体用于：获得所述外扩矩形区域对应的高程数据集合。21.机载激光雷达的飞行设备，其特征在于，包括：控制器、处理器和存储器；所述控制器和所述存储器均与所述处理器通信连接；所述存储器用于存储计算机程序；所述处理器用于根据所述计算机程序执行如权利要求1-10任一项所述的航线规划方法；所述控制器用于从所述处理器获得规划出的所述机载激光雷达的飞行设备对所述多边形测区的航线；根据所述航线控制飞行。
说明书desc
技术领域本申请涉及通信技术领域，特别是涉及一种航线规划方法、装置及机载激光雷达的飞行设备。背景技术近年来，随着激光雷达技术和无人机技术的快速发展，无人机载激光雷达系统的在各个领域的应用越来越广泛。例如测绘、农业植保、林业调查和电力巡检等。由于固定翼无人机飞行速度快，留空时间长，因此，固定翼无人机载激光雷达的作业效率非常高，深受测绘行业用户的追捧。激光雷达由于其激光点穿透性强，可以获取多次回波数据等优点，尤其适用于林业调查和地形测绘等。传统的测绘应用通常是选择多边形测区，然后规程成等间距的航线，由于激光雷达的特殊性，无人机与地面的相对航高要保持固定，也就是无人机的航线为仿地飞行航线。在地面高程有变化的情况下，无人机需要实时调整自身与地面的相对航高，在飞行过程中经常需要爬升或降高。在某些山地或峡谷地形，地面高程变化往往比较剧烈，航线上某些路段的地面坡度角可能大于或接近飞机的最大爬升角度，可能会造成无法正常仿地，甚至造成飞机撞山等危险，给用户带来巨大损失。现有的航线规划方法通常是基于总航程最短原则。当用户指定了多边形测区之后，以测区的控制点坐标作为输入，使用主元分析的方法，找到测区外接椭圆的长轴方向，以此方向作为航线角度进行航线规划。如图1所示，A、B、C、D、E、F、G是多边形测区的控制点。方向矢量ρ为多边形的主轴方向。这种方法得到的航线总里程最短，优点就是节省航时和无人机的电源或者燃料。但是通过研究发现，以航程最短作为约束条件进行仿地飞行航线规划，很可能在某个航段上会遇到地面坡度角大于或者接近飞机的最大爬升角。以固定翼无人机为例，其最大爬升角通常不大于10度。当地面坡度角大于飞机的最大爬升角时，会造成无法正常进行仿地飞行。也就是说，飞机在某些航段与地面的相对高度会小于给定高度，无人机与地面的相对航高无法保持固定，这样会导致激光雷达的数据质量降低，例如点云密度不均匀等。在某些特殊情况下，如果飞机与地面的距离过近，可能会触发飞机的某些保护机制，例如返航等，但是由于地形限制，飞机的返航航线可能会触发撞山危险，从而给用户造成巨大损失。发明内容基于上述问题，本申请提供了一种航线规划方法、装置及机载激光雷达的飞行设备，以提升机载激光雷达的飞行设备的安全性，提升激光雷达的数据质量。本申请实施例公开了如下技术方案：本申请第一方面提供了一种航线规划方法，包括：获得多边形测区的高程极大值点集合和高程极小值点集合；根据所述高程极大值点集合中的点对应的高程极大值、所述高程极小值点集合中的点对应的高程极小值和机载激光雷达的飞行设备的最大爬升角，获得非推荐航线角度列表；所述非推荐航线角度列表中包含自然数个非推荐的航线角度；当所述非推荐航线角度列表非空时，根据参考航线角度和所述非推荐航线角度列表规划机载激光雷达的飞行设备对所述多边形测区的航线；所述参考航线角度为依据预设约束条件为所述多边形测区规划的航线对应的航线角度；所述预设约束条件为总航程最短。可选地，所述获得多边形测区的高程极大值点集合和高程极小值点集合，具体包括：获得所述多边形测区的外接矩形区域对应的高程数据集合；所述高程数据集合包含所述外接矩形区域中每个栅格点的高程值；根据所述高程数据集合获得每个栅格点的梯度；对于每个栅格点，根据其梯度和其相邻的四个栅格点的梯度确定出其为局部高程极大值点、局部高程极小值点或者既不是局部高程极大值点也不是局部高程极小值点；将局部高程极大值点加入到所述高程极大值点集合中，将局部高程极小值点加入到所述高程极小值点集合中。可选地，所述根据所述高程极大值点集合中的点对应的高程极大值、所述高程极小值点集合中的点对应的高程极小值和机载激光雷达的飞行设备的最大爬升角，获得非推荐航线角度列表，具体包括：对于所述高程极大值点集合中的每一个点，计算其与所述高程极小值点集合中的所有点分别组合时的坡度角；所述坡度角为依据组合的两个点中一个点对应的高程极大值和另一个点对应的高程极小值获得；将大于所述最大爬升角的所述坡度角对应的航线角度加入到所述非推荐航线角度列表中。可选地，方法还包括：当所述非推荐航线角度列表为空时，依据预设约束条件规划所述机载激光雷达的飞行设备对所述多边形测区的航线。可选地，所述根据参考航线角度和所述非推荐航线角度列表规划机载激光雷达的飞行设备对所述多边形测区的航线，具体包括：设定角度增量和所述角度增量的增加次数；根据所述参考航线角度、所述角度增量和所述增加次数获得当前航线角度；将所述当前航线角度与所述非推荐航线角度列表中的每一个非推荐的航线角度进行比较，得到角度偏差绝对值；根据所述角度偏差绝对值规划所述机载激光雷达的飞行设备对所述多边形测区的航线。可选地，所述根据所述角度偏差绝对值规划所述机载激光雷达的飞行设备对所述多边形测区的航线，具体包括：当所述当前航线角度与所述非推荐航线角度列表中的任意一个非推荐的航线角度的所述角度偏差绝对值小于所述角度增量，则对所述增加次数加1；所述增加次数的初始值为0；当所述当前航线角度与所述非推荐航线角度列表中的所有非推荐的航线角度的所述角度偏差绝对值均大于或等于所述角度增量，则根据所述当前航线角度规划所述机载激光雷达的飞行设备对所述多边形测区的航线。可选地，所述根据所述当前航线角度规划所述机载激光雷达的飞行设备对所述多边形测区的航线，具体包括：设定安全因子；所述安全因子大于0，且所述安全因子小于1；获得所述安全因子与所述最大爬升角的第一乘积；获得以所述当前航线角度形成的航线在所述多边形测区的投影轮廓线的最大坡度角；将所述最大坡度角与所述第一乘积进行比较，当确定所述最大坡度角小于所述第一乘积，则以所述当前航线角度规划所述机载激光雷达的飞行设备对所述多边形测区的航线；当确定所述最大坡度角大于或等于所述第一乘积，则对所述增加次数加1。可选地，所述根据所述参考航线角度、所述角度增量和所述增加次数获得当前航线角度，具体包括：获得所述角度增量和所述增加次数的第二乘积；将所述参考航线角度与所述第二乘积之和作为所述当前航线角度；在所述对所述增加次数加1之前，所述方法还包括：判断所述第二乘积与360°的角度偏差绝对值是否小于所述角度增量，如果否，则执行所述对所述增加次数加1；如果是，则确定规划所述机载激光雷达的飞行设备对所述多边形测区的航线失败。可选地，在所述确定规划所述机载激光雷达的飞行设备对所述多边形测区的航线失败之后，所述方法还包括：提高所述安全因子。可选地，方法还包括：对所述外接矩形区域的四边分别以预设外扩距离进行外扩，得到外扩矩形区域；所述获得所述多边形测区的外接矩形区域对应的高程数据集合，具体包括：获得所述外扩矩形区域对应的高程数据集合。本申请第二方面提供了一种航线规划装置，包括：高程极值点集合获取模块、非推荐航线角度列表获取模块和航线规划模块；所述高程极值点集合获取模块，用于获得多边形测区的高程极大值点集合和高程极小值点集合；所述非推荐航线角度列表获取模块，用于根据所述高程极大值点集合中的点对应的高程极大值、所述高程极小值点集合中的点对应的高程极小值和机载激光雷达的飞行设备的最大爬升角，获得非推荐航线角度列表；所述非推荐航线角度列表中包含x个非推荐的航线角度，所述x为自然数；当所述非推荐航线角度列表非空时，所述航线规划模块，用于根据参考航线角度和所述非推荐航线角度列表规划机载激光雷达的飞行设备对所述多边形测区的航线；所述参考航线角度为依据预设约束条件为所述多边形测区规划的航线对应的航线角度；所述预设约束条件为总航程最短。可选地，所述高程极值点集合获取模块，具体包括：高程数据集合获取单元，用于获得所述多边形测区的外接矩形区域对应的高程数据集合；所述高程数据集合包含所述外接矩形区域中每个栅格点的高程值；栅格点梯度获取单元，用于根据所述高程数据集合获得每个栅格点的梯度；局部高程极值点确定单元，用于对于每个栅格点，根据其梯度和其相邻的四个栅格点的梯度确定出其为局部高程极大值点、局部高程极小值点或者既不是局部高程极大值点也不是局部高程极小值点；高程极大值点集合获取单元，用于将局部高程极大值点加入到所述高程极大值点集合中；高程极小值点集合获取单元，用于将局部高程极小值点加入到所述高程极小值点集合中。可选地，所述非推荐航线角度列表获取模块，具体包括：坡度角计算单元，用于对于所述高程极大值点集合中的每一个点，计算其与所述高程极小值点集合中的所有点分别组合时的坡度角；所述坡度角为依据组合的两个点中一个点对应的高程极大值和另一个点对应的高程极小值获得；航线角度添加单元，用于将大于所述最大爬升角的所述坡度角对应的航线角度加入到所述非推荐航线角度列表中。可选地，当所述非推荐航线角度列表为空时，所述航线规划模块，用于依据预设约束条件规划所述机载激光雷达的飞行设备对所述多边形测区的航线。可选地，所述航线规划模块，具体包括：第一设置单元，用于设定角度增量和所述角度增量的增加次数；当前航线角度获取单元，用于根据所述参考航线角度、所述角度增量和所述增加次数获得当前航线角度；第一角度比较单元，用于将所述当前航线角度与所述非推荐航线角度列表中的每一个非推荐的航线角度进行比较，得到角度偏差绝对值；航线规划单元，用于根据所述角度偏差绝对值规划所述机载激光雷达的飞行设备对所述多边形测区的航线。可选地，所述航线规划单元，具体包括：第一执行单元，用于当所述当前航线角度与所述非推荐航线角度列表中的任意一个非推荐的航线角度的所述角度偏差绝对值小于所述角度增量，则对所述增加次数加1；所述增加次数的初始值为0；第二执行单元，用于当所述当前航线角度与所述非推荐航线角度列表中的所有非推荐的航线角度的所述角度偏差绝对值均大于或等于所述角度增量，则根据所述当前航线角度规划所述机载激光雷达的飞行设备对所述多边形测区的航线。可选地，所述第二执行单元，具体包括：第二设置单元，用于设定安全因子；所述安全因子大于0，且所述安全因子小于1；第一计算单元，用于获得所述安全因子与所述最大爬升角的第一乘积；最大坡度角获取单元，用于获得以所述当前航线角度形成的航线在所述多边形测区的投影轮廓线的最大坡度角；第二角度比较单元，用于将所述最大坡度角与所述第一乘积进行比较；第三执行单元，用于当确定所述最大坡度角小于所述第一乘积，则以所述当前航线角度规划所述机载激光雷达的飞行设备对所述多边形测区的航线；第四执行单元，用于当确定所述最大坡度角大于或等于所述第一乘积，则对所述增加次数加1。可选地，所述当前航线角度获取单元，具体包括：第二计算单元，用于获得所述角度增量和所述增加次数的第二乘积；第三计算单元，用于将所述参考航线角度与所述第二乘积之和作为所述当前航线角度；在所述第四执行单元对所述增加次数加1之前，以及在所述第一执行单元对所述增加次数加1之前，所述装置还包括：第三角度比较单元，用于判断所述第二乘积与360°的角度偏差绝对值是否小于所述角度增量，如果否，则所述第四执行单元执行所述对所述增加次数加1或者所述第一执行单元执行所述对所述增加次数加1；如果是，则航线规划结果确定单元用于确定规划所述机载激光雷达的飞行设备对所述多边形测区的航线失败。可选地，在所述航线规划结果确定单元确定规划所述机载激光雷达的飞行设备对所述多边形测区的航线失败之后，所述第二设置单元还用于：提高所述安全因子。可选地，装置还包括：区域外扩模块，用于对所述外接矩形区域的四边分别以预设外扩距离进行外扩，得到外扩矩形区域；所述高程数据集合获取单元，具体用于：获得所述外扩矩形区域对应的高程数据集合。本申请第三方面提供了一种机载激光雷达的飞行设备，包括：控制器、处理器和存储器；所述控制器和所述存储器均与所述处理器通信连接；所述存储器用于存储计算机程序；所述处理器用于根据所述计算机程序执行如第一方面提供的航线规划方法；所述控制器用于从所述处理器获得规划出的所述机载激光雷达的飞行设备对所述多边形测区的航线；根据所述航线控制飞行。相较于现有技术，本申请具有以下有益效果：在本申请技术方案中，首先，获得多边形测区的高程极大值点集合和高程极小值点集合。其次，根据高程极大值点集合中的点对应的高程极大值、高程极小值点集合中的点对应的高程极小值和机载激光雷达的飞行设备的最大爬升角，获得非推荐航线角度列表。其中，非推荐航线角度列表中包含自然数个非推荐的航线角度。当非推荐航线角度列表非空时，根据参考航线角度和非推荐航线角度列表规划机载激光雷达的飞行设备对多边形测区的航线，参考航线角度为依据预设约束条件为多边形测区规划的航线对应的航线角度，预设约束条件为总航程最短。在本申请提供的技术方案中，根据参考航线角度和非推荐航线角度列表规划机载激光雷达的飞行设备对多边形测区的航线，可以使规划的航线规避非推荐的航线角度，提升机载激光雷达的飞行设备的安全性，保证激光雷达的数据质量。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为一种基于总航程最短原则规划的航线示意图；图2为一种坡度角及飞机爬升角的示意图；图3为本申请实施例提供的一种航线规划方法的流程图；图4为本申请实施例提供的获得多边形测区的高程极大值点集合和高程极小值点集合的流程图；图5为本申请实施例提供的一种根据多边形测区获得的外接矩形区域和外扩矩形区域示意图；图6为本申请实施例提供的一种地面高程极值点示意图；图7为本申请实施例提供的一种获得非推荐航线角度列表的流程图；图8为本申请实施例提供的坡度角示意图；图9为本申请实施例提供的另一种航线规划方法的流程图；图10为本申请实施例提供的一种根据当前航线角度规划机载激光雷达的飞行设备对多边形测区的航线的流程图；图11为本申请实施例提供的又一种航线规划方法的流程图；图12为本申请实施例提供的一种航线规划装置的结构示意图；图13为本申请实施例提供的一种高程极值点集合获取模块的结构示意图；图14为本申请实施例提供的一种非推荐航线角度列表获取模块的结构示意图；图15为本申请实施例提供的一种航线规划模块的结构示意图。具体实施方式正如前文描述，目前对机载激光雷达的飞行设备进行航线规划时，往往忽视了飞行设备的最大爬升角较小的问题。在一些地面高程变化幅度较大的区域，飞行设备无法正常仿地。一方面影响了数据的质量，另一方面作业安全性较低。基于此问题，发明人经过研究，提供了一种航线规划方法、装置及机载激光雷达的飞行设备，根据参考航线角度和非推荐航线角度列表规划机载激光雷达的飞行设备对多边形测区的航线，可以使规划的航线规避非推荐的航线角度，提升机载激光雷达的飞行设备的安全性，保证激光雷达的数据质量。为了使本技术领域的人员更好地理解本申请方案，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。方法实施例参见图3，该图为本申请实施例提供的一种航线规划方法的流程图。如图3所示，航线规划方法包括：步骤301：获得多边形测区的高程极大值点集合和高程极小值点集。多边形测区是指包含三个或三个以上控制点，并由各控制点和相邻控制点之间的连线形成的待测区域。本步骤中，多边形测区是待测的三维区域在俯视角度上观察得到的二维测区。以图1为例，阴影区域为多边形测区，控制点包括A点、B点、C点、D点、E点、F点和G点。其中，相邻两个控制点之间以直线连接。在一种可能的实现方式中，步骤301具体包括以下步骤301a~301d，可参见图4所示的流程图。步骤301a：获得多边形测区的外接矩形区域对应的高程数据集合。由于多边形测区的形状通常是不规则的，为了获得高程数据集合，以及便利后续的运算和处理，可以在步骤301a中首先获得多边形测区的外接矩形。根据二维的多边形区域获得外接矩形属于比较成熟的技术，因此此处对于获得外接矩形的实现过程不做赘述。图5中虚线区域即为多边形测区的外接矩形。在一种可能的实现方式中，为了处理好航线的转弯，实现对多边形测区的全面覆盖，还可以进一步在外接矩形区域的基础上进行外扩。例如，对所述外接矩形区域的四边分别以预设外扩距离进行外扩，得到外扩矩形区域。图5中，矩形OPQR为对虚线所示的外接矩形区域的四边以预设外扩距离L进行外扩后得到的外扩矩形区域。预设外扩距离L可以依据实际需求进行设定，此处不对L的具体数值作出限定。对于上述操作获得的外接矩形区域或者外扩矩形区域，由于均是二维的区域，因此，可以将外接矩形区域或者外扩矩形区域划分为若干沿着行列排布的栅格。栅格的划分尺寸可以按照实际需求确定。每个栅格对应外接矩形区域或者外扩矩形区域中的一小块区域，实际应用中在规划航线之前可以预先通过地理测绘数据、先验信息等获得外接矩形区域或者外扩矩形区域中每一处的高程值。为了便利后续的运算处理、简化数据量，可以将一个栅格视为以栅格数据表征的矩形区域中的一个点。因此在后续描述中将栅格称为栅格点。栅格点的高程值可以是栅格的中心点的高程值，也可以是栅格对应的区域中所有点的高程值的平均值。从而获得了高程数据集合I。如果外接矩形区域未进行外扩，则高程数据集合I包含外接矩形区域中每个栅格点的高程值。如果外接矩形区域进行了外扩，则高程数据集合I包含外扩矩形区域中每个栅格点的高程值。高程数据集合I的存储格式与普通图像数据一致，高程数据集合I中的高程值以栅格数据为索引。步骤301b：根据高程数据集合获得每个栅格点的梯度。每一个栅格点的梯度G的计算公式如下：G=dx+dy公式公式中，x和y分别是外接矩形区域或外扩矩形区域中栅格的排布方向，栅格沿着x方向和y方向排布。i是x方向排布的栅格的序数，j是y方向排布的栅格的序数。公式中，dx和dy分别表示如下：dx=I-I公式dy=I-I公式步骤301c：对于每个栅格点，根据其梯度和其相邻的四个栅格点的梯度确定出其为局部高程极大值点、局部高程极小值点或者既不是局部高程极大值点也不是局部高程极小值点。对于栅格点，其相邻的四个栅格点的梯度分别表示为：G，G，G和G。步骤301c在具体实现时，作为一种可能的实现方式，可以首先搜索所有梯度值为0的栅格点，然后再根据周围四个点的梯度判断是否为极值点。例如，如果G＜0并且G＞0，并且G＜0并且G＞0，则确定该栅格点为局部高程极小值点。而如果G＞0并且G＜0，并且G＞0并且G＜0，则确定该栅格点为局部高程极大值点。如果不符合上述两种情况中的任意一种情况，则栅格点既不是局部高程极大值点，也不是局部高程极小值点。步骤301d：将局部高程极大值点加入到高程极大值点集合中，将局部高程极小值点加入到高程极小值点集合中。假设通过执行以上步骤301c确定出局部高程极大值点分别为P1、P2…PM，局部高程极小值点分别为V1、V2…VN。则可以将P1、P2…PM加入到高程极大值点集合P{P1、P2…PM}，将V1、V2…VN加入到高程极小值点集合V{V1、V2…VN}。图6为本申请实施例提供的一种地面高程极值点示意图。在图6中示意的P1~P4为局部高程极大值点，V1~V4为局部高程极小值点。通过以上步骤301a~301d，获得了高程极大值点集合P和高程极小值点集合V。在后续步骤302中，具体依据高程极大值点集合P和高程极小值点集合V来获得非推荐航线角度列表。步骤302：根据高程极大值点集合中的点对应的高程极大值、高程极小值点集合中的点对应的高程极小值和机载激光雷达的飞行设备的最大爬升角，获得非推荐航线角度列表。本申请实施例中，步骤302的执行目的是确定出一些不推荐的航线角度，从而在规划航线时规避这些不推荐的航线角度以实现更加安全的航行探测，获得质量更优的数据。上文提到，如果地面坡度角可能大于或接近飞机的最大爬升角度，可能会造成无法正常仿地，甚至造成飞机撞山等危险，给用户带来巨大损失。因此，可以结合机载激光雷达的飞行设备的最大爬升角获得非推荐航线角度列表。在一种可能的实现方式中，步骤302具体包括以下步骤302a~302b，可参见图7所示的流程图。步骤302a：对于高程极大值点集合中的每一个点，计算其与高程极小值点集合中的所有点分别组合时的坡度角。在上述步骤301中，获得了高程极大值点集合P{P1、P2…PM}和高程极小值点集合V{V1、V2…VN}。以集合P中任意一个局部高程极大值点P1为例，即是将P1分别与集合V中的各个点连线，根据连线获得航线角度。在图6中，即是根据P1和V1的连线获得P1与V1组合时的航线角度，根据P1和V2的连线获得P1与V2组合时的航线角度，根据P1和V3的连线获得P1与V3组合时的航线角度，根据P1和V4的连线获得P1与V4组合时的航线角度。集合P中其他的局部高程极大值点与集合V中各个航线角度求取方式以此类推。航线角度以矩形中的一个固定的方向为基准。例如可以以水平方向x作为基准，则P2与V3组合时的航线角度A23如图6所示。前面介绍了航线角度的获取方式。下面介绍坡度角的获取方式。坡度角为依据组合的两个点中一个点对应的高程极大值和另一个点对应的高程极小值获得的。以P2与V3组合为例，P2的高程值为高程极大值，V3的高程为高程极小值。根据P2和V3在二维平面中的位置，以及P2和V3各自的高程值，可以得到三维空间中的两个点，根据该两个点的连线与水平面，可以得到连线与水平面的夹角度数，该夹角即为步骤302a求得的坡度角。图8示意了两个坡度角。图8中Pi为高程极大值点集合P中的一个局部高程极大值点，Vk和Vj均为高程极小值点集合V中的局部高程极小值点。根据Pi的高程值和Vk的高程值可以获得连线与水平面所夹的坡度角αik，根据Pi的高程值和Vj的高程值可以获得连线与水平面所夹的坡度角αij。显然，坡度角αij大于坡度角αik。步骤302b：将大于最大爬升角的坡度角对应的航线角度加入到非推荐航线角度列表中。由于坡度角是依据集合P和V中两个点获得的，航线角度也是依据集合P和V中的两个点获得的，因此坡度角与航线角度具有对应关系。例如坡度角对应于航线角度A23。本申请实施例中，为了获得非推荐航线角度列表，可以将根据集合P和V获得的每个航线角度对应的坡度角与机载激光雷达的飞行设备的最大爬升角进行比较。一旦有某一航线角度对应的坡度角是大于上述最大爬升角的，则表示沿这一航线角度规划航线，容易使飞行设备无法正常进行仿地飞行。因此将这一类型的航线角度加入到非推荐航线角度列表Vinvalid中。通过步骤302a~302b形成的非推荐航线角度列表Vinvalid中可能包括一个或多个非推荐的航线角度，也可能该列表Vinvalid为空，即以集合P和V获得的所有航线角度对应的坡度角均不大于飞行设备的最大爬升角。步骤303：当非推荐航线角度列表非空时，根据参考航线角度和非推荐航线角度列表规划机载激光雷达的飞行设备对多边形测区的航线。当非推荐航线角度列表Vinvalid非空时，表示：以多边形测区的高程极大值点集合P和高程极小值点集合V获得的各个航线角度中，存在某些航线角度不适合规划航线。具体地，非推荐航线角度列表Vinvalid中包含的非推荐的航线角度均不适合于规划航线，因此需要规避这些航线角度。参考航线角度为依据预设约束条件为多边形测区规划的航线对应的航线角度；预设约束条件为总航程最短。也就是说，参考航线角度是依据总航程最短的原则而为该多边形测区规划出的航线对应的航线角度。依据总航程最短原则规划航线是本领域较为成熟的技术，在多边形测区已知的条件下，参考航线角度也是本领域可以依照成熟技术手段获得的，因此此处对于获得参考航线角度的实现过程不做赘述。在非推荐航线角度列表Vinvalid非空时，如果参考航线角度与非推荐航线角度列表Vinvalid中的某个角度接近或等同，则表示依照参考航线角度来规划航线也是不安全的，需要另外确定出列表Vinvalid及参考航线角度以外的航线角度。而在非推荐航线角度列表Vinvalid非空时，如果参考航线角度与非推荐航线角度列表Vinvalid中的各个角度的角度偏差均比较大，且对应的最大坡度角也小于飞行设备的最大爬升角，则表示参考航线角度是较为安全的，可以以参考航线角度来规划航线。以上即为本申请实施例提供的航线规划方法。该方法中首先获得多边形测区的高程极大值点集合和高程极小值点集合；其后根据所述高程极大值点集合中的点对应的高程极大值、所述高程极小值点集合中的点对应的高程极小值和机载激光雷达的飞行设备的最大爬升角，获得非推荐航线角度列表；所述非推荐航线角度列表中包含自然数个非推荐的航线角度。最后，当所述非推荐航线角度列表非空时，根据参考航线角度和所述非推荐航线角度列表规划机载激光雷达的飞行设备对所述多边形测区的航线；所述参考航线角度为依据预设约束条件为所述多边形测区规划的航线对应的航线角度；所述预设约束条件为总航程最短。在本申请提供的技术方案中，根据参考航线角度和非推荐航线角度列表规划机载激光雷达的飞行设备对多边形测区的航线，可以使规划的航线规避非推荐的航线角度，提升机载激光雷达的飞行设备的安全性，保证激光雷达的数据质量。需要说明的是，以上描述的集合、列表等均指可以包含0个、一个或多个元素的范畴，其中集合可以置换为列表或者其他形式，列表可以置换为集合或其他形式。本实施例中仅以集合或列表进行说明，不作为对包含元素的范畴的具体形态的限制。在前述实施例提供的航线规划方法的基础上，本申请还进一步提供了航线规划的进一步实现方案。需要说明的是，在后续介绍的方法实施例为图3所示的实施例的一种可能的实现方式，不作为对图3所示的方法具体实现方式的限制。参见图9，该图为本申请实施例提供的另一种航线规划方法的流程图。如图9所示，步骤901：获得多边形测区的高程极大值点集合和高程极小值点集。步骤902：根据高程极大值点集合中的点对应的高程极大值、高程极小值点集合中的点对应的高程极小值和机载激光雷达的飞行设备的最大爬升角，获得非推荐航线角度列表。上述步骤901~902的实现方式与前述实施例中步骤301~302的实现方式基本相同。相关描述可以参照前述实施例，此处不加赘述。步骤903：判断非推荐航线角度列表是否为空，如果是，则执行步骤904；如果否，则执行步骤905~910。步骤904：当非推荐航线角度列表为空时，依据预设约束条件规划机载激光雷达的飞行设备对多边形测区的航线。当非推荐航线角度列表为空时，表示即便依据局部高程极大值点和局部高程极小值点来形成航线角度并规划航线，也不会导致坡度角超出最大爬升角。因此，可以直接根据总航程最短原则规划出多边形测区的航线。由于依据总航程最短原则规划航线属于比较成熟的技术，因此，对于本步骤的具体实现过程不做限制。在上面的步骤904描述了非推荐航线角度列表Vinvalid为空时的航线规划方式。下面结合后续步骤描述非推荐航线角度列表Vinvalid非空时的一种具体的航线规划方式。步骤905：当非推荐航线角度列表非空时，设定角度增量和角度增量的增加次数。设定角度增量dA和角度增量dA的增加次数t。作为示例，dA=5°，t初始值为0。需要说明的是，角度增量dA可以根据实际需求进行选取，例如，为了提升安全性，可以设置较大的角度增量dA。此处对于角度增量dA的数值大小不做限制。步骤906：根据参考航线角度、角度增量和增加次数获得当前航线角度。当前航线角度的计算公式如下：At = AF0+t*dA公式公式中，dA表示角度增量，t表示角度增量的增加次数，AF0表示参考航线角度，At表示当前航线角度。由公式可知，获得角度增量dA和增加次数t的第二乘积t*dA；将参考航线角度AF0与第二乘积t*dA之和作为所述当前航线角度At。根据公式可知，当t=0时，当前航线角度At等于参考航线角度AF0。步骤907：将当前航线角度与非推荐航线角度列表中的每一个非推荐的航线角度进行比较，得到角度偏差绝对值。将当前航线角度At与非推荐航线角度列表Vinvalid中的每一个非推荐的航线角度进行比较，目的是确定当前航线角度At是否与列表Vinvalid中的任意一个非推荐的航线角度接近。在一种可能的实现方式中，可以将列表Vinvalid中的每一个非推荐的航线角度与当前航线角度At做减法运算，将得到的差值取绝对值，则得到角度偏差绝对值。可以理解的是，如果非推荐航线角度列表Vinvalid中包含w个非推荐的航线角度，w为正整数，则执行本步骤后得到w个角度偏差绝对值。其中，w个角度偏差绝对值中可能存在部分重复的角度偏差绝对值。其后，即可根据角度偏差绝对值规划机载激光雷达的飞行设备对多边形测区的航线。可以理解的是，如果角度偏差绝对值较小，则表示当前航线角度At与非推荐航线角度列表Vinvalid中的某一个非推荐的航线角度较为接近，因此以当前航线角度At来规划航线，安全性是比较差的。需要通过变化当前航线角度来重新比较。而如果角度偏差绝对值较大，则表示以当前航线角度At来规划航线，安全性能是相对较高的，具体安全性能还需要进一步结合坡度角与飞行设备的最大爬升角的相对大小进行判断。以下结合步骤908~910进行描述得到角度偏差绝对值之后执行的航线规划操作。步骤908：判断当前航线角度是否与非推荐航线角度列表中的任意一个非推荐的航线角度的角度偏差绝对值小于角度增量，如果是，则执行步骤909；如果否，则执行步骤910。如果当前航线角度At是否与非推荐航线角度列表Vinvalid中的任意一个非推荐的航线角度的角度偏差绝对值小于角度增量，则表示当前航线角度At与至少一个不推荐的航线角度过于接近。如果当前航线角度At并未与非推荐航线角度列表Vinvalid中的任意一个非推荐的航线角度的角度偏差绝对值小于角度增量，则表示当前航线角度At与非推荐航线角度列表Vinvalid中的所有非推荐的航线角度的角度偏差绝对值均大于或等于角度增量。即从航线角度的维度上来看，当前航线角度At是相对安全的。步骤909：当前航线角度与非推荐航线角度列表中的任意一个非推荐的航线角度的角度偏差绝对值小于角度增量，则对增加次数加1，进入步骤906。即，取t=t+1。对于当前航线角度At的计算公式可以参照公式。可以理解的是，当对角度增量dA的增加次数t加1时，当前航线角度At相对于t增加前，增大了角度dA。通过将增加次数t的加1，实现了在二维平面内以dA为角度增量对当前航线角度At的轮询和流程的迭代。步骤910：当前航线角度与非推荐航线角度列表中的所有非推荐的航线角度的角度偏差绝对值均大于或等于角度增量，则根据当前航线角度规划机载激光雷达的飞行设备对多边形测区的航线。如果当前航线角度At与非推荐航线角度列表Vinvalid中的所有非推荐的航线角度的角度偏差绝对值均大于或等于角度增量，表示从航线角度的维度上，当前航线角度At是较为安全的。但是存在一种可能的情况是：以当前航线角度At规划航线对应的坡度角相比于机载激光雷达的飞行设备的最大爬升角，较为接近或者更大。此时，规划出的航线仍然是比较危险的。下面结合步骤910a-910f介绍一种根据当前航线角度At规划机载激光雷达的飞行设备对多边形测区的航线的可能实现方式。图10展示了步骤910的一种实现方式流程。如图10所示，根据当前航线角度At规划机载激光雷达的飞行设备对多边形测区的航线具体可以包括：步骤910a：设定安全因子。安全因子是在坡度角维度上的安全因子。安全因子越大，安全系数越小，依据该安全因子规划的航线的安全性越低。反之，如果安全因子越小，则安全系数越大，表示依据该安全因子规划的航线的安全性越高。安全因子具体为大于0，且小于1的数值。步骤910b：获得安全因子与最大爬升角的第一乘积。第一乘积表示为δ*γ，其中，δ为步骤910a描述的安全因子，γ表示机载飞行设备的最大爬升角。最大爬升角γ如图2所示。步骤910c：获得以当前航线角度形成的航线在多边形测区的投影轮廓线的最大坡度角。根据确定的航线角度来规划航线属于比较成熟的技术。本步骤中，当前航线角度At形成的航线不一定作为最终规划的航线，此处以当前航线角度At形成航线的目的只是用于确定出最大坡度角。具体是否选用当前航线角度At规划出的航线还需要根据后续的比较结果来确定。形成航线后，在多边形测区的三维空间中，以航线向俯视方向做透镜，可以形成一条投影轮廓线。在投影轮廓线已知的条件下，可以通过成熟的计算方式获得最大坡度角。该最大坡度角αk是投影轮廓线上斜率最为陡峭的切线与水平面形成的锐角夹角。最大坡度角αk的获取方式可以参照图2所示的坡度角α。步骤910d：将最大坡度角与第一乘积进行比较，判断最大坡度角是否小于第一乘积，如果是，则执行步骤910e；如果否，则执行步骤910f。αk＜δ*γ，表示以当前航线角度At规划航线，在坡度角的维度上也是较为安全的。而αk≥δ*γ，表示以当前航线角度At规划航线，在坡度角维度上安全性是不足的，很容易超出飞行设备的爬升能力，导致无法仿地飞行，数据采集质量差。步骤910e：当确定最大坡度角小于第一乘积，则以当前航线角度规划机载激光雷达的飞行设备对多边形测区的航线。步骤910f：当确定最大坡度角大于或等于第一乘积，则对增加次数加1，进入步骤906。即，取t=t+1。对于当前航线角度At的计算公式可以参照公式。通过将增加次数t的加1，实现了在二维平面内以dA为角度增量对当前航线角度At的轮询和上述流程的迭代。在以上实施例描述的航线规划方法中，步骤909和步骤910f均描述了对t加1的操作。其中，步骤909是指在航线角度的维度上，当前航线角度At不满足安全性要求，因此需要变更At。步骤910f则是在坡度角的维度上，当前航线角度At不满足安全性要求，因此需要变更At。通过两个维度衡量安全性，使得以最终确定的航线角度规划出的航线满足上述两个维度的安全性要求。进而，进一步地提升机载激光雷达的飞行设备的安全性，提升激光雷达的数据质量。此方案规划出的航线在测绘、农业植保、林业调查和电力巡检等领域飞行设备机载激光雷达作业时具有重要的效用。当t=0时，如果当前航线角度AF0既满足了航线角度方面的安全性要求，并且也满足了坡度角方面的安全性要求，则最终规划的航线就是依据参考航线角度AF0规划的航线。也就是说，最终采用的航线与依据预设约束条件规划的航线一致。在上述实施例中，还可以设置迭代的截止条件。结合公式可以理解的是，如果第二乘积t*dA与360°的角度偏差绝对值与角度增量dA接近时，表示在而二维平面内对于当前航线角度已经以dA为间隔基本轮询了一周。此时，没有必要再去对dA的增加次数t再加1，航线规划失败。因此在每次执行步骤909和步骤910f之前，均可执行以下操作，以确认是否有必要继续对增加次数t加1：步骤000：判断第二乘积与360°的角度偏差绝对值是否小于所述角度增量，如果否，则执行步骤909和/或910f；如果是，则执行步骤001。步骤001：确定规划所述机载激光雷达的飞行设备对所述多边形测区的航线失败。规划失败，表示以前述实施例获得的每个当前航线角度均安全性不足。因此，在无法规划出满足安全性要求的航线前提下，不应当控制飞行设备机载激光雷达在多边形测区的上空航行探测。导致规划航线失败的原因可能是：多边形测区的三维地形过于陡峭，也可能是因为安全因子设置的过低。因此，在步骤001之后，还可以执行以下操作，以提升航线规划成功的几率。步骤002：提高安全因子，进入步骤910b。例如，可以将安全因子从0.5提升到0.8。结合上文描述，当安全因子上调时，规划出的航线的安全系数也相应地下调了。但是通过在合理范围内提高安全因子，使安全因子不超过1，可以始终保证用于规划航线的当前航线角度对应的最大坡度角始终小于飞行设备的最大爬升角。图11为一种包含了上述步骤910a~910f以及步骤000~002的航线规划方法流程图。结合图11有利于更加便捷地理解上述实施例执行过程中的多种可能的实现结果。 基于前述实施例提供的航线规划方法，相应地，本申请还提供一种航线规划装置。以下结合实施例和附图描述该装置的具体实现。装置实施例参见图12，该图为本申请实施例提供的一种航线规划装置的结构示意图。如图12所示，航线规划装置120包括：高程极值点集合获取模块1201、非推荐航线角度列表获取模块1202和航线规划模块1203；高程极值点集合获取模块1201，用于获得多边形测区的高程极大值点集合和高程极小值点集合；非推荐航线角度列表获取模块1202，用于根据高程极大值点集合中的点对应的高程极大值、高程极小值点集合中的点对应的高程极小值和机载激光雷达的飞行设备的最大爬升角，获得非推荐航线角度列表；非推荐航线角度列表中包含x个非推荐的航线角度，x为自然数；当非推荐航线角度列表非空时，航线规划模块1203，用于根据参考航线角度和非推荐航线角度列表规划机载激光雷达的飞行设备对多边形测区的航线；参考航线角度为依据预设约束条件为多边形测区规划的航线对应的航线角度；预设约束条件为总航程最短。在本申请提供的技术方案中，根据参考航线角度和非推荐航线角度列表规划机载激光雷达的飞行设备对多边形测区的航线，可以使规划的航线规避非推荐的航线角度，提升机载激光雷达的飞行设备的安全性，保证激光雷达的数据质量。作为一种可选的实现方式，如图13，高程极值点集合获取模块1201，具体包括：高程数据集合获取单元12011，用于获得多边形测区的外接矩形区域对应的高程数据集合；高程数据集合包含外接矩形区域中每个栅格点的高程值；栅格点梯度获取单元12012，用于根据高程数据集合获得每个栅格点的梯度；局部高程极值点确定单元12013，用于对于每个栅格点，根据其梯度和其相邻的四个栅格点的梯度确定出其为局部高程极大值点、局部高程极小值点或者既不是局部高程极大值点也不是局部高程极小值点；高程极大值点集合获取单元12014，用于将局部高程极大值点加入到高程极大值点集合中；高程极小值点集合获取单元12015，用于将局部高程极小值点加入到高程极小值点集合中。作为一种可选的实现方式，如图14，非推荐航线角度列表获取模块1202，具体包括：坡度角计算单元12021，用于对于高程极大值点集合中的每一个点，计算其与高程极小值点集合中的所有点分别组合时的坡度角；坡度角为依据组合的两个点中一个点对应的高程极大值和另一个点对应的高程极小值获得；航线角度添加单元12022，用于将大于最大爬升角的坡度角对应的航线角度加入到非推荐航线角度列表中。作为一种可选的实现方式，当非推荐航线角度列表为空时，航线规划模块1203，用于依据预设约束条件规划机载激光雷达的飞行设备对多边形测区的航线。作为一种可选的实现方式，如图15，航线规划模块1203，具体包括：第一设置单元12031，用于设定角度增量和角度增量的增加次数；当前航线角度获取单元12032，用于根据参考航线角度、角度增量和增加次数获得当前航线角度；第一角度比较单元12033，用于将当前航线角度与非推荐航线角度列表中的每一个非推荐的航线角度进行比较，得到角度偏差绝对值；航线规划单元12034，用于根据角度偏差绝对值规划机载激光雷达的飞行设备对多边形测区的航线。作为一种可选的实现方式，航线规划单元12034，具体包括：第一执行单元，用于当当前航线角度与非推荐航线角度列表中的任意一个非推荐的航线角度的角度偏差绝对值小于角度增量，则对增加次数加1；增加次数的初始值为0；第二执行单元，用于当当前航线角度与非推荐航线角度列表中的所有非推荐的航线角度的角度偏差绝对值均大于或等于角度增量，则根据当前航线角度规划机载激光雷达的飞行设备对多边形测区的航线。作为一种可选的实现方式，前述的第二执行单元，具体包括：第二设置单元，用于设定安全因子；安全因子大于0，且安全因子小于1；第一计算单元，用于获得安全因子与最大爬升角的第一乘积；最大坡度角获取单元，用于获得以当前航线角度形成的航线在多边形测区的投影轮廓线的最大坡度角；第二角度比较单元，用于将最大坡度角与第一乘积进行比较；第三执行单元，用于当确定最大坡度角小于第一乘积，则以当前航线角度规划机载激光雷达的飞行设备对多边形测区的航线；第四执行单元，用于当确定最大坡度角大于或等于第一乘积，则对增加次数加1。通过航线角度和坡度角两个维度衡量安全性，使得以最终确定的航线角度规划出的航线满足上述两个维度的安全性要求。进而，进一步地提升机载激光雷达的飞行设备的安全性，提升激光雷达的数据质量。此方案规划出的航线在测绘、农业植保、林业调查和电力巡检等领域飞行设备机载激光雷达作业时具有重要的效用。作为一种可选的实现方式，当前航线角度获取单元12032，具体包括：第二计算单元，用于获得角度增量和增加次数的第二乘积；第三计算单元，用于将参考航线角度与第二乘积之和作为当前航线角度；在第四执行单元对增加次数加1之前，以及在第一执行单元对增加次数加1之前，航线规划装置还包括：第三角度比较单元，用于判断第二乘积与360°的角度偏差绝对值是否小于角度增量，如果否，则第四执行单元执行对增加次数加1或者第一执行单元执行对增加次数加1；如果是，则航线规划结果确定单元用于确定规划机载激光雷达的飞行设备对多边形测区的航线失败。可选地，在航线规划结果确定单元确定规划机载激光雷达的飞行设备对多边形测区的航线失败之后，第二设置单元还用于：提高安全因子。可选地，航线规划装置还包括：区域外扩模块，用于对外接矩形区域的四边分别以预设外扩距离进行外扩，得到外扩矩形区域；高程数据集合获取单元，具体用于：获得外扩矩形区域对应的高程数据集合。通过区域外扩模块对外接矩形区域的四边的外扩，可以便利于处理好航线的转弯。基于前述实施例提供的航线规划方法和航线规划装置，相应地，本申请还提供一种机载激光雷达的飞行设备。下面结合实施例对此设备的实现方式进行描述。设备实施例本申请实施例提供的机载激光雷达的飞行设备包括：控制器、处理器和存储器；控制器和存储器均与处理器通信连接；其中，存储器用于存储计算机程序；处理器用于根据计算机程序执行如方法实施例介绍的航线规划方法中的一个或多个步骤；控制器用于从处理器获得规划出的机载激光雷达的飞行设备对多边形测区的航线；以及根据航线控制飞行设备飞行。在本申请提供的技术方案中，根据参考航线角度和非推荐航线角度列表规划机载激光雷达的飞行设备对多边形测区的航线，可以使规划的航线规避非推荐的航线角度，提升机载激光雷达的飞行设备的安全性，保证激光雷达的数据质量。以上所述，仅为本申请的一种具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到的变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应该以权利要求的保护范围为准。
