标题title
一种智能电表的停电统计方法
摘要abst
本发明涉及一种智能电表的停电统计方法，步骤1、在电力采集系统中存储与当前统计时刻最接近的智能电表下电时间；步骤2、在电力采集系统中检索出上电时间≥统计开始时间和下电时间≤统计结束时间条件所对应的下电和上电记录；步骤3、在步骤2中检索出的下电和上电记录中，剔除掉不属于统计时间段的时间；步骤4、检索出当前统计时刻智能电表状态为停电状态且智能电表的下电时间在统计结束时间之前的记录，并将这些记录的下电结束时间置为统计结束时间，步骤5、对上述检索出的记录在统计时间段中的停电时间进行统计，得到每个智能电表的停电时间。上述方法中能对跨统计时间段内的停电情况进行统计，简化了统计过程，且能将数据差值降到最小。
权利要求书clms
1.一种智能电表的停电统计方法，其特征在于：包括以下步骤：步骤1、在电力采集系统中存储与当前统计时刻最接近的智能电表下电时间，如果该下电时间与当前统计时刻之间有上电事件发生时，则将上电时间也存储在电力采集系统中；步骤2、设定统计时间段中的统计开始时间和统计结束时间，并在电力采集系统中检索出上电时间≥统计开始时间和下电时间≤统计结束时间条件所对应的下电和上电记录；步骤3、在步骤2中检索出的下电和上电记录中，剔除掉不属于统计时间段的时间；步骤4、检索出当前统计时刻智能电表状态为停电状态且智能电表的下电时间在统计结束时间之前的记录，并将这些记录的下电结束时间置为统计结束时间，统计开始时间分为两个部分：一、下电时间≤统计开始时间，则将满足该条件的智能电表下电时间置为统计开始时间；二、下电时间＞统计开始时间，则满足该条件的智能电表下电时间保持不变；步骤5、对上述检索出的记录在统计时间段中的停电时间进行统计，得到每个智能电表的停电时间。2.根据权利要求1所述的智能电表的停电统计方法，其特征在于：在电力采集系统中开辟缓存空间，并将智能电表的下电时间和上电时间存储在缓存空间中。3.根据权利要求2所述的智能电表的停电统计方法，其特征在于：所述步骤1中电力采集系统每次在收到下电事件时，将下电事件发生的时间以及停电状态更新到存储空间中，且同步更新到采集系统的数据库中。4.根据权利要求2所述的智能电表的停电统计方法，其特征在于：所述采集系统在每次收到上电时间时，并判断缓存空间中是否有下电时间，如有，则对下电时间和上电时间的先后顺序进行判断，符合配对情况的，则转入到步骤2中。5.根据权利要求4所述的智能电表的停电统计方法，其特征在于：当所述上电时间＞下电时间，则符合配对情况；反之当上电时间＜下电时间，则不符合配对情况。6.根据权利要求1所述的智能电表的停电统计方法，其特征在于：所述智能电表根据下电时间、上电时间和统计时间段进行分析会有六种记录：其中，下电时间和上电时间符合配对情况的记录包括四种：②下电时间在统计时间段内、上电时间在统计时间段内；②下电时间在统计时间段内，上电时间在统计时间段外；⑦下电时间在统计时间段外，上电时间在统计时间段内；⑧下电时间在统计时间段外，上电时间在统计时间段外；下电时间和上电时间不符合配对情况，即：即智能电表下电之后直到当前统计时刻为止还没有上电事件产生的记录包括两种：⑨下电时间在统计时间段外，没有上电时间；⑥下电时间在统计时间段内，没有上电时间。7.根据权利要求1所述的智能电表的停电统计方法，其特征在于：所述步骤3中的剔除方法为：当下电时间＜统计开始时间，则将满足该条件的智能电表下电时间置为统计开始时间；当上电时间＞统计结束时间，则将满足该条件的智能电表上电时间置为统计结束时间。8.根据权利要求1所述的智能电表的停电统计方法，其特征在于：所述智能电表与电力采集系统之间通讯连接，用于电力采集系统获取智能电表的停电时间。9.根据权利要求8所述的智能电表的停电统计方法，其特征在于：所述智能电表与电力采集系统之间通过无线方式进行通讯连接。10.根据权利要求1～9任一项所述的智能电表的停电统计方法，其特征在于：所述电力采集系统为主站。
说明书desc
技术领域本发明涉及智能电表领域，特别涉及一种智能电表的停电统计方法。背景技术在智能电表大力推广的今天，国内的智能电表市场已逐步饱和，系统的解决方案由国家电网公司统一制定标准化设计，解决了很多集成的问题，通过对电力设备、电力系统的统一标准要求，来满足业务的需求。但是在广大的海外市场，面对的是不同等级的电力信息化国家和市场，通信基础设备没有国内完善，电网建设大部分都比国内要落后，通信基础环境也较国内落后很多，尤其是不发达国家，情况更差。在电网建设不足、通信环境不能满足电力信息传输的情况下，对于用户供电、停电的信息是很难实时掌握的，无法实时掌握一个地区的实时停、供电信息，电力公司就寄希望于力采集系统能够通过对上下电事件进行分析来获取这个地区的每月供电情况，但是由于信息网络的不畅通，导致信息的收集滞后，统计信息难以保障准确和有效。再者，电表推送上来的事件，上电、下电事件都是独立的，需要对时间段内的上下电事件进行分析，但这会造成较多的数据缺失，导致总停电时间计算不准确，会丢失掉不在此时间段内发生的上下电事件、或下电已发生还未上电的情况，都不能准确计算。如果每次统计针对所有事件进行就会浪费大量的计算空间和速度，导致效率很低。根据对下电、上电事件发生的时间与统计的时间进行分析会有六种情况，如图1所示，其中下电、上电能够匹配的情况有四种：①下电时间在统计时间段内、上电时间在统计时间段内；②下电时间在统计时间段内，上电时间在统计时间段外；③下电时间在统计时间段外，上电时间在统计时间段内；④下电时间在统计时间段外，上电时间在统计时间段外；除以上四种能够配对之外还存另外两种无法配成对的，即下电之后直到统计时间为止还没有上电事件产生的，也是一种常规情况，有如下两种：⑤下电时间在统计时间段外，没有上电时间；⑥下电时间在统计时间段内，没有上电时间；现有的方案包括：现有方案1：只对于统计时间段内的事件进行分析计算，将会丢失③、④、⑤这三种情况，此方案的缺点是：统计时间段越短差错率越高，统计时间段越长差错率月低，因为一般不会出现超过一个月的停电情况，而超过一天的却很多。现有方案2：在方案1的基础上，减少差错率，一般会多取一部分时间的数据，即扩大统计范围，意欲将③、④、⑤这三种情况涵盖进来，这种会有效减少差错，但是不能完全，多取的不一定能全部涵盖。因此这种方案的缺点是：虽有效降低了方案1的差错，但是确消耗了程序的计算资源，将计算范围扩大，导致将会处理更多的数据，在算法上还需要对无效数据进行过滤，因此停电时间计算算法的复杂性也较高。综上所述，方案1的统计差错率较高，统计信息不完整；方案2，统计差错率较方案1有所提高，但没有彻底解决，且统计时性能较差；方案1和2都存在统计时有大量的计算，压力较集中，存在性能瓶颈。因此需要对现有的方案进一步改进。发明内容本发明所要解决的技术问题是针对上述现有技术提供一种计算复杂度更小且计算更加准确的智能电表的停电统计方法。本发明解决上述技术问题所采用的技术方案为：一种智能电表的停电统计方法，其特征在于：包括以下步骤：步骤1、在电力采集系统中存储与当前统计时刻最接近的智能电表下电时间，如果该下电时间与当前统计时刻之间有上电事件发生时，则将上电时间也存储在电力采集系统中；步骤2、设定统计时间段中的统计开始时间和统计结束时间，并在电力采集系统中检索出上电时间≥统计开始时间和下电时间≤统计结束时间条件所对应的下电和上电记录；步骤3、在步骤2中检索出的下电和上电记录中，剔除掉不属于统计时间段的时间；步骤4、检索出当前统计时刻智能电表状态为停电状态且智能电表的下电时间在统计结束时间之前的记录，并将这些记录的下电结束时间置为统计结束时间，统计开始时间分为两个部分：一、下电时间≤统计开始时间，则将满足该条件的智能电表下电时间置为统计开始时间；二、下电时间＞统计开始时间，则满足该条件的智能电表下电时间保持不变；步骤5、对上述检索出的记录在统计时间段中的停电时间进行统计，得到每个智能电表的停电时间。作为改进，在电力采集系统中开辟缓存空间，并将智能电表的下电时间和上电时间存储在缓存空间中。为了防止数据丢失，影响计算准确性，所述步骤1中电力采集系统每次在收到下电事件时，将下电事件发生的时间以及停电状态更新到存储空间中，且同步更新到采集系统的数据库中。为了避免出现异常情况，所述采集系统在每次收到上电时间时，并判断缓存空间中是否有下电时间，如有，则对下电时间和上电时间的先后顺序进行判断，符合配对情况的，则转入到步骤2中。具体的，当所述上电时间＞下电时间，则符合配对情况；反之当上电时间＜下电时间，则不符合配对情况。本方案中，所述智能电表根据下电时间、上电时间和统计时间段进行分析会有六种记录：其中，下电时间和上电时间符合配对情况的记录包括四种：①下电时间在统计时间段内、上电时间在统计时间段内；②下电时间在统计时间段内，上电时间在统计时间段外；③下电时间在统计时间段外，上电时间在统计时间段内；④下电时间在统计时间段外，上电时间在统计时间段外；下电时间和上电时间不符合配对情况，即：即智能电表下电之后直到当前统计时刻为止还没有上电事件产生的记录包括两种：⑤下电时间在统计时间段外，没有上电时间；⑥下电时间在统计时间段内，没有上电时间。优选的，所述步骤3中的剔除方法为：当下电时间＜统计开始时间，则将满足该条件的智能电表下电时间置为统计开始时间；当上电时间＞统计结束时间，则将满足该条件的智能电表上电时间置为统计结束时间。进一步的，所述智能电表与电力采集系统之间通讯连接，用于电力采集系统获取智能电表的停电时间。具体的，所述智能电表与电力采集系统之间通过无线方式进行通讯连接。优选的，所述电力采集系统为主站。与现有技术相比，本发明的优点在于：通过记录最新的停上电信息，每次接收到事件后就计算单次的停电情况，便于后续对统计时段的信息汇总，因此通过实时计算每个智能电表的停电时间，从而将计算压力分摊，降低了计算复杂度，另外，上述方法中能对跨统计时间段内的停电情况进行统计，简化了统计过程，且能将数据差值降到最小，能够根据统计时间段内的结果将真实的停电情况反映出来，更适合使用。附图说明图1为现有智能电表下电时间、上电时间与统计时间段之间的关系示意图；图2为本发明实施例中智能电表的停电统计方法的流程图。具体实施方式以下结合附图实施例对本发明作进一步详细描述。如图1所示，智能电表根据下电时间、上电时间和统计时间段进行分析会有六种记录：其中，下电时间和上电时间符合配对情况的记录包括四种：①下电时间在统计时间段内、上电时间在统计时间段内；②下电时间在统计时间段内，上电时间在统计时间段外；③下电时间在统计时间段外，上电时间在统计时间段内；④下电时间在统计时间段外，上电时间在统计时间段外；下电时间和上电时间不符合配对情况，即：即智能电表下电之后直到当前统计时刻为止还没有上电事件产生的记录包括两种：⑤下电时间在统计时间段外，没有上电时间；⑥下电时间在统计时间段内，没有上电时间。为了在同一个统计时间段中对满足上述6种情况的记录进行准确统计，如图2所示，本实施例中的智能电表的停电统计方法包括以下步骤：步骤1、在电力采集系统中存储与当前统计时刻最接近的智能电表下电时间，如果该下电时间与当前统计时刻之间有上电事件发生时，则将上电时间也存储在电力采集系统中；步骤2、设定统计时间段中的统计开始时间和统计结束时间，并在电力采集系统中检索出上电时间≥统计开始时间和下电时间≤统计结束时间条件所对应的下电和上电记录；步骤3、在步骤2中检索出的下电和上电记录中，剔除掉不属于统计时间段的时间；具体的剔除方法为：当下电时间＜统计开始时间，则将满足该条件的智能电表下电时间置为统计开始时间；当上电时间＞统计结束时间，则将满足该条件的智能电表上电时间置为统计结束时间；步骤4、检索出当前统计时刻智能电表状态为停电状态且智能电表的下电时间在统计结束时间之前的记录，并将这些记录的下电结束时间置为统计结束时间，统计开始时间分为两个部分：一、下电时间≤统计开始时间，则将满足该条件的智能电表下电时间置为统计开始时间；二、下电时间＞统计开始时间，则满足该条件的智能电表下电时间保持不变；步骤5、对上述检索出的记录在统计时间段中的停电时间进行统计，得到每个智能电表的停电时间。本实施例中，为了便于数据的存储，在电力采集系统中开辟缓存空间，并将智能电表的下电时间和上电时间存储在缓存空间中。电力采集系统每次在收到下电事件时，将下电事件发生的时间以及停电状态更新到存储空间中，且同步更新到采集系统的数据库中；采集系统在每次收到上电时间时，并判断缓存空间中是否有下电时间，如有，则对下电时间和上电时间的先后顺序进行判断，符合配对情况的，则转入到步骤2中。其中，当上电时间＞下电时间，则符合配对情况；反之当上电时间＜下电时间，则不符合配对情况。另外，智能电表与电力采集系统之间通讯连接，用于电力采集系统获取智能电表的停电时间。本实施例中，智能电表与电力采集系统之间通过无线方式进行通讯连接。优选的，电力采集系统为主站。通过上述步骤2中的方法能检索出图1中的①、②、③、④这四种情况，但只有第①种的上电时间和下电时间均在统计时间段内，这种情况下无需任何操作即可将上电时间与下电时间之间的差值作为统计时间段内的停电时间；对于②、③、④这三种情况，则需要根据步骤3中的方法剔除掉不属于统计时间段的时间，针对第②种情况，则需要将上电时间置为统计结束时间；针对第③种情况，则需要将下电时间置为统计开始时间；针对第④种情况，则需要同时将下电时间置为统计开始时间，上电时间置为统计结束时间；即可将更改后的上电时间与下电时间之间的差值作为统计时间段内的停电时间。通过上述步骤4中的方法能检索出图1中的⑤、⑥这两种情况，针对第⑤种情况，需要将下电时间置为统计开始时间，并将下电结束时间置为统计结束时间；针对第⑥种情况，下电时间保持不变，将下电结束时间置为统计结束时间；即可将下电结束时间与下电时间之间的差值作为统计时间段内的停电时间。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明技术原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本发明的保护范围。
