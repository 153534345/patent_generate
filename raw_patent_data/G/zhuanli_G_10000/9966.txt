标题title
一种集成电路引脚检测方法、装置、终端及存储介质
摘要abst
本申请公开了一种集成电路引脚检测方法、装置、终端及存储介质。本申请提供的集成电路引脚检测方法，对于训练集的合格样本与不合格样本采用不同的缺陷二值图处理方式，得到由两类缺陷二值图构成的缺陷图训练集，并利用该缺陷图训练接构建缺陷识别模型得到待测IC图像的待测缺陷二值图，结合获取的待测IC图像和IC引脚评估模型确定待测IC图像的引脚检测结果。解决了现有技术IC焊点检测只注重合格样本作为训练样本，忽略了不合格样本导致的检测准确度差的技术问题。
权利要求书clms
1.一种集成电路引脚检测方法，其特征在于，包括：获取IC图像训练集与训练好的统计模型，其中，所述IC图像训练集包含有合格样本与不合格样本，所述统计模型包含有M个预先训练好的统计模板；根据所述统计模型，通过第一统计模板集与所述合格样本的对比检测，得到第一缺陷二值图，所述第一统计模板集为通过聚类方式，按照各个所述统计模板的距离值，从M个所述统计模板中抽取出的n个统计模板作为所述第一统计模板集；根据所述统计模型，通过第二统计模板集与所述不合格样本的对比检测，得到第二缺陷二值图，所述第二统计模板集为通过随机抽取方式，从M个所述统计模板中抽取出的n个统计模板作为所述第二统计模板集；根据所述第一缺陷二值图和所述第二缺陷二值图，构建缺陷图训练集；根据所述缺陷图训练接构建缺陷识别模型；获取待测IC图像；将所述待测IC图像以及所述待测IC图像的分类属性信息输入到所述缺陷识别模型，以通过所述缺陷识别模型的运算，得到所述待测IC图像的待测缺陷二值图，其中，所述分类属性信息具体为：初步识别合格或初步识别不合格；将所述待测缺陷二值图输入至IC引脚评估模型，以根据所述IC引脚评估模型输出的结果，确定所述待测IC图像的引脚检测结果。2.根据权利要求1所述的一种集成电路引脚检测方法，其特征在于，每个所述合格样本的对比检测次数与每个所述不合格样本的对比检测次数的比值等于所述合格样本与所述不合格样本的数量比值。3.根据权利要求1所述的一种集成电路引脚检测方法，其特征在于，所述IC引脚评估模型的目标函数为：式中，λ1，λ2为两个范数约束的权重，X为由所述待测缺陷二值图组成的矩阵，y为由所述待测IC图像的分类属性信息组成的矩阵，W为像素点的权重向量。4.根据权利要求1所述的一种集成电路引脚检测方法，其特征在于，所述统计模型具体为ViBe统计模型。5.一种集成电路引脚检测装置，其特征在于，包括：训练集获取单元，用于获取IC图像训练集与训练好的统计模型，其中，所述IC图像训练集包含有合格样本与不合格样本，所述统计模型包含有M个预先训练好的统计模板；第一对比检测单元，用于根据所述统计模型，通过第一统计模板集与所述合格样本的对比检测，得到第一缺陷二值图，所述第一统计模板集为通过聚类方式，按照各个所述统计模板的距离值，从M个所述统计模板中抽取出的n个统计模板作为所述第一统计模板集；第二对比检测单元，用于根据所述统计模型，通过第二统计模板集与所述不合格样本的对比检测，得到第二缺陷二值图，所述第二统计模板集为通过随机抽取方式，从M个所述统计模板中抽取出的n个统计模板作为所述第二统计模板集；缺陷图训练集构建单元，用于根据所述第一缺陷二值图和所述第二缺陷二值图，构建缺陷图训练集；缺陷识别模型构建单元，用于根据所述缺陷图训练接构建缺陷识别模型；待测图像获取单元，用于获取待测IC图像；缺陷识别模型处理单元，用于将所述待测IC图像以及所述待测IC图像的分类属性信息输入到所述缺陷识别模型，以通过所述缺陷识别模型的运算，得到所述待测IC图像的待测缺陷二值图，其中，所述分类属性信息具体为：初步识别合格或初步识别不合格；IC引脚评估模型处理单元，用于将所述待测缺陷二值图输入至IC引脚评估模型，以根据所述IC引脚评估模型输出的结果，确定所述待测IC图像的引脚检测结果。6.根据权利要求5所述的一种集成电路引脚检测装置，其特征在于，每个所述合格样本的对比检测次数与每个所述不合格样本的对比检测次数的比值等于所述合格样本与所述不合格样本的数量比值。7.根据权利要求5所述的一种集成电路引脚检测装置，其特征在于，所述IC引脚评估模型的目标函数为：式中，λ1，λ2为两个范数约束的权重，X为由所述待测缺陷二值图组成的矩阵，y为由所述待测IC图像的分类属性信息组成的矩阵，W为像素点的权重向量。8.根据权利要求5所述的一种集成电路引脚检测装置，其特征在于，所述统计模型具体为ViBe统计模型。9.一种集成电路引脚检测终端，其特征在于，包括：存储器和处理器；所述存储器用于存储程序代码，所述程序代码与如权利要求1至4任意一项所述的集成电路引脚检测方法相对应；所述处理器用于执行所述程序代码。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质中保存有与如权利要求1至4任意一项所述的集成电路引脚检测方法相对应的程序代码。
说明书desc
技术领域本申请涉及机器视觉技术领域，尤其涉及一种集成电路引脚检测方法、装置、终端及存储介质。背景技术IC引脚是连接PCB与IC的桥梁。IC引脚焊点的质量直接影响了电子设备的寿命和可靠性。随着集成电路的快速发展，IC的尺寸越来越小，IC引脚也越来越密集，使得传统人工检测变得困难，效率低下。随着工业自动化发展，越来越多的缺陷检测系统应用在生产线的质量检测中。其中，AOI系统被广泛应用于产品表面缺陷检测，用于检测产品的表面缺陷。针对不同的产品以及其生产环境，需要对AOI系统的检测方法进行调整。目前，AOI系统上很少针对IC焊点缺陷的算法。由于IC焊点的尺寸小和不合格样本过少的情况，使得传统的图像处理和机器学习方法只使用合格样本作为训练样本。统计模型的建立以及阈值都是基于合格样本确定。因此，这些方法忽略了不合格样本，导致了现有技术IC焊点检测存在检测准确度差的技术问题。发明内容本申请提供了一种集成电路引脚检测方法、装置、终端及存储介质，用于解决现有技术IC焊点检测存在检测准确度差的技术问题。有鉴于此，本申请第一方面提供了一种集成电路引脚检测方法，包括：获取IC图像训练集与训练好的统计模型，其中，所述IC图像训练集包含有合格样本与不合格样本，所述统计模型包含有M个预先训练好的统计模板；根据所述统计模型，通过第一统计模板集与所述合格样本的对比检测，得到第一缺陷二值图，所述第一统计模板集为通过聚类方式，按照各个所述统计模板的距离值，从M个所述统计模板中抽取出的n个统计模板作为所述第一统计模板集；根据所述统计模型，通过第二统计模板集与所述不合格样本的对比检测，得到第二缺陷二值图，所述第二统计模板集为通过随机抽取方式，从M个所述统计模板中抽取出的n个统计模板作为所述第二统计模板集；根据所述第一缺陷二值图和所述第二缺陷二值图，构建缺陷图训练集；根据所述缺陷图训练接构建缺陷识别模型；获取待测IC图像；将所述待测IC图像以及所述待测IC图像的分类属性信息输入到所述缺陷识别模型，以通过所述缺陷识别模型的运算，得到所述待测IC图像的待测缺陷二值图，其中，所述分类属性信息具体为：初步识别合格或初步识别不合格；将所述待测缺陷二值图输入至IC引脚评估模型，以根据所述IC引脚评估模型输出的结果，确定所述待测IC图像的引脚检测结果。优选地，每个所述合格样本的对比检测次数与每个所述不合格样本的对比检测次数的比值等于所述合格样本与所述不合格样本的数量比值。优选地，所述IC引脚评估模型的目标函数为：式中，λ1，λ2为两个范数约束的权重，X为由所述待测缺陷二值图组成的矩阵，y为由所述待测IC图像的分类属性信息组成的矩阵，W为像素点的权重向量。优选地，所述统计模型具体为ViBe统计模型。本申请第二方面提供了一种集成电路引脚检测装置，包括：训练集获取单元，用于获取IC图像训练集与训练好的统计模型，其中，所述IC图像训练集包含有合格样本与不合格样本，所述统计模型包含有M个预先训练好的统计模板；第一对比检测单元，用于根据所述统计模型，通过第一统计模板集与所述合格样本的对比检测，得到第一缺陷二值图，所述第一统计模板集为通过聚类方式，按照各个所述统计模板的距离值，从M个所述统计模板中抽取出的n个统计模板作为所述第一统计模板集；第二对比检测单元，用于根据所述统计模型，通过第二统计模板集与所述不合格样本的对比检测，得到第二缺陷二值图，所述第二统计模板集为通过随机抽取方式，从M个所述统计模板中抽取出的n个统计模板作为所述第二统计模板集；缺陷图训练集构建单元，用于根据所述第一缺陷二值图和所述第二缺陷二值图，构建缺陷图训练集；缺陷识别模型构建单元，用于根据所述缺陷图训练接构建缺陷识别模型；待测图像获取单元，用于获取待测IC图像；缺陷识别模型处理单元，用于将所述待测IC图像以及所述待测IC图像的分类属性信息输入到所述缺陷识别模型，以通过所述缺陷识别模型的运算，得到所述待测IC图像的待测缺陷二值图，其中，所述分类属性信息具体为：初步识别合格或初步识别不合格；IC引脚评估模型处理单元，用于将所述待测缺陷二值图输入至IC引脚评估模型，以根据所述IC引脚评估模型输出的结果，确定所述待测IC图像的引脚检测结果。优选地，每个所述合格样本的对比检测次数与每个所述不合格样本的对比检测次数的比值等于所述合格样本与所述不合格样本的数量比值。优选地，所述IC引脚评估模型的目标函数为：式中，λ1，λ2为两个范数约束的权重，X为由所述待测缺陷二值图组成的矩阵，y为由所述待测IC图像的分类属性信息组成的矩阵，W为像素点的权重向量。优选地，所述统计模型具体为ViBe统计模型。本申请第三方面提供了一种集成电路引脚检测终端，包括：存储器和处理器；所述存储器用于存储程序代码，所述程序代码与如本申请第一方面提供的集成电路引脚检测方法相对应；所述处理器用于执行所述程序代码。本申请第四方面提供了一种计算机可读存储介质，所述计算机可读存储介质中保存有与如本申请第一方面提供的集成电路引脚检测方法相对应的程序代码。从以上技术方案可以看出，本申请具有以下优点：本申请提供的集成电路引脚检测方法，对于训练集的合格样本与不合格样本采用不同的缺陷二值图处理方式，得到由两类缺陷二值图构成的缺陷图训练集，并利用该缺陷图训练接构建缺陷识别模型得到待测IC图像的待测缺陷二值图，结合获取的待测IC图像和IC引脚评估模型确定待测IC图像的引脚检测结果。解决了现有技术IC焊点检测只注重合格样本作为训练样本，忽略了不合格样本导致的检测准确度差的技术问题。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其它的附图。图1为本申请提供的一种集成电路引脚检测方法的一个实施例的流程示意图。图2为本申请提供的一种集成电路引脚检测装置的一个实施例的结构示意图。具体实施方式传统的图像处理和机器学习方法在训练时，都是先对合格样本进行建模，得到合格样本的统计模型，然后将模型与其他样本进行对比，得到一个二值图。根据训练样本中的二值图，确定出每个像素点的权重，然后通过评估模型计算出缺陷的阈值。检测时，通过与合格样本的统计模型对比，得出缺陷图，然后经过评估模型计算出评分，与缺陷阈值对比，以此来判断样本的质量是否合格。但由于忽略了不合格样本，导致了现有技术IC焊点检测存在检测准确度差的技术问题。本申请实施例提供了一种集成电路引脚检测方法、装置、终端及存储介质，用于解决现有技术IC焊点检测存在检测准确度差的技术问题。为使得本申请的发明目的、特征、优点能够更加的明显和易懂，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，下面所描述的实施例仅仅是本申请一部分实施例，而非全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其它实施例，都属于本申请保护的范围。请参阅图1，本申请第一个实施例提供了一种集成电路引脚检测方法，包括：步骤101、获取IC图像训练集与训练好的统计模型，其中，IC图像训练集包含有合格样本与不合格样本，统计模型包含有M个预先训练好的统计模板。需要说明的是，首先获取IC图像训练集与预先训练好的统计模型，统计模型具体为ViBe统计模型。其中，统计模型训练的方式为：首先，根据第一个输入合格样本，根据样本对模型进行初始化。然后，根据后续输入的样本，持续更新模型。最后，得到由包含了多个模板的统计模型。具体的初始化步骤和模型更新步骤可以参照以下示例：a.初始化统计模型。从一个用于训练的合格样本中，提取出M个大小与合格样本意义的模板。每个模板的像素都是从这个合格样本中对应位置的像素或者其邻居像素中随机选取的。b.模型更新。当输入的合格样本中的某个像素匹配足够多的模板时，被认为是合格像素。这时，随机选择该像素，来更新一个模板中对应位置的像素或者其邻居像素点。若被认为时不合格像素，则从不匹配的模板中随机挑选一个，更新对应位置的像素。步骤102、根据统计模型，通过第一统计模板集与合格样本的对比检测，得到第一缺陷二值图，第一统计模板集为通过聚类方式，按照各个统计模板的距离值，从M个统计模板中抽取出的n个统计模板作为第一统计模板集。步骤103、根据统计模型，通过第二统计模板集与不合格样本的对比检测，得到第二缺陷二值图，第二统计模板集为通过随机抽取方式，从M个统计模板中抽取出的n个统计模板作为第二统计模板集。需要说明的是，针对上述的IC图像训练集中包含的两种样本：合格样本和不合格样本，本申请实施例对合格样本与不合格样本采用不同的方法进行检测，具体包括：对于合格样本的检测，对训练好的统计模板采用聚类的方法，找出最相近的n个模板，具体做法可以参考：对模板中像素求平均值，确定出中心统计模板Tcenter。然后求出每个统计模板到中心模板的欧几里得距离，从而找出最近的n个统计模板。即第一统计模板集，利用第一统计模板集中的统计模板与合格样本对比，得出相应的缺陷二值图，即第一缺陷二值图。对于不合格样本的检测，随机从M个已经训练好的模板中选取n个模板，即第二统计模板集，利用第二统计模板集中的统计模板与不合格样本对比，得出缺陷二值图，即第二缺陷二值图。更具体地，每个合格样本的对比检测次数与每个不合格样本的对比检测次数的比值等于合格样本与不合格样本的数量比值。对每一个不合格的训练样本多次检测，得出多个缺陷二值图。为了使得不合格样本与合格样本得到的潜在缺陷图数量相近，每个合格样本的对比检测次数与每个不合格样本的对比检测次数的比值等于合格样本与不合格样本的数量比值，通过此方式增加不合格样本的数据量，从而获得更优的缺陷图训练集。上述步骤103中提及的模板集通常是多个，是通过随机抽取的方式，形成多个模板集。一个不合格经过多个随机的模板集检测，得到对应的多个二值缺陷图。这样达到数据增广的目的对于合格和不合格的样本采用不同的模板以此得到平衡缺陷图训练集。对一个不合格样本采用随机模板检测策略，可以得到多个潜在缺陷图，以此达到数据增广目的。同时，通过这种数据增广策略后，训练集中，合格的二值缺陷图和不合格的二值缺陷图才能平衡。避免了原本的训练集中不合格样本是远远少于合格样本，进而由于不平衡的训练集而导致训练出来的评估模型较差的问题。步骤104、根据第一缺陷二值图和第二缺陷二值图，构建缺陷图训练集。步骤105、根据缺陷图训练接构建缺陷识别模型。需要说明的是，根据据上述的第一缺陷二值图和第二缺陷二值图，构建改进的缺陷图训练集，并用该缺陷图训练接构建缺陷识别模型。步骤106、获取待测IC图像。步骤107、将待测IC图像以及待测IC图像的分类属性信息输入到缺陷识别模型，以通过缺陷识别模型的运算，得到待测IC图像的待测缺陷二值图，其中，分类属性信息具体为：初步识别合格或初步识别不合格。步骤108、将待测缺陷二值图输入至IC引脚评估模型，以根据IC引脚评估模型输出的结果，确定待测IC图像的引脚检测结果。需要说明的是，根据步骤101至步骤105构建的缺陷识别模型，对获取到的待测IC图像进行处理，从而获得待测缺陷二值图，将待测缺陷二值图输入至IC引脚评估模型，以根据IC引脚评估模型输出的结果，确定待测IC图像的引脚检测结果。另外，获得待测缺陷二值图之后，通过评估模型来评估IC样本的质量。一般的评估模型都是采用像素加权和求出一个评估指标，通过这个指标来判断IC样本是否合格。而本申请提供的是基于弹性网络的最小二乘模型，如下所示：式中，λ1，λ2为两个范数约束的权重，X为由待测缺陷二值图组成的矩阵，每一行是一个训练图像转换成的向量，y为由待测IC图像的分类属性信息组成的矩阵，矩阵中的1代表不合格，0代表合格，W为像素点的权重向量。弹性网络有效的结合了L1范数和L2范数的优点，既能有效的选取特征，又能提高鲁棒性。求解出的W向量为最优值。将像素权重问题转化成优化的问题，能够得到更优的权重。本申请实施例提供的集成电路引脚检测方法，对于训练集的合格样本与不合格样本采用不同的缺陷二值图处理方式，得到由两类缺陷二值图构成的缺陷图训练集，并利用该缺陷图训练接构建缺陷识别模型得到待测IC图像的待测缺陷二值图，结合获取的待测IC图像和IC引脚评估模型确定待测IC图像的引脚检测结果。解决了现有技术IC焊点检测只注重合格样本作为训练样本，忽略了不合格样本导致的检测准确度差的技术问题。以上为本申请提供的一种集成电路引脚检测方法的一个实施例的详细说明，下面为本申请提供的一种集成电路引脚检测装置的一个实施例的详细说明。请参阅图2，本申请第二个实施例提供了一种集成电路引脚检测装置，包括：训练集获取单元201，用于获取IC图像训练集与训练好的统计模型，其中，IC图像训练集包含有合格样本与不合格样本，统计模型包含有M个预先训练好的统计模板；第一对比检测单元202，用于根据统计模型，通过第一统计模板集与合格样本的对比检测，得到第一缺陷二值图，第一统计模板集为通过聚类方式，按照各个统计模板的距离值，从M个统计模板中抽取出的n个统计模板作为第一统计模板集；第二对比检测单元203，用于根据统计模型，通过第二统计模板集与不合格样本的对比检测，得到第二缺陷二值图，第二统计模板集为通过随机抽取方式，从M个统计模板中抽取出的n个统计模板作为第二统计模板集；缺陷图训练集构建单元204，用于根据第一缺陷二值图和第二缺陷二值图，构建缺陷图训练集；缺陷识别模型构建单元205，用于根据缺陷图训练接构建缺陷识别模型；待测图像获取单元206，用于获取待测IC图像；缺陷识别模型处理单元207，用于将待测IC图像以及待测IC图像的分类属性信息输入到缺陷识别模型，以通过缺陷识别模型的运算，得到待测IC图像的待测缺陷二值图，其中，分类属性信息具体为：初步识别合格或初步识别不合格；IC引脚评估模型处理单元208，用于将待测缺陷二值图输入至IC引脚评估模型，以根据IC引脚评估模型输出的结果，确定待测IC图像的引脚检测结果。进一步地，每个合格样本的对比检测次数与每个不合格样本的对比检测次数的比值等于合格样本与不合格样本的数量比值。进一步地，IC引脚评估模型的目标函数为：式中，λ1，λ2为两个范数约束的权重，X为由待测缺陷二值图组成的矩阵，y为由待测IC图像的分类属性信息组成的矩阵，W为像素点的权重向量。进一步地，统计模型具体为ViBe统计模型。以上为本申请提供的一种集成电路引脚检测装置的一个实施例的详细说明，下面为本申请提供的一种集成电路引脚检测终端的一个实施例以及一种计算机可读存储介质的一个实施例的详细说明。本申请第三个实施例提供了一种集成电路引脚检测终端，包括：存储器和处理器；所述存储器用于存储程序代码，所述程序代码与如本申请第一个实施例提供的集成电路引脚检测方法相对应；所述处理器用于执行所述程序代码，以实现本申请第一个实施例提供的集成电路引脚检测方法。本申请第四个实施例提供了一种计算机可读存储介质，所述计算机可读存储介质中保存有与如本申请第一个实施例提供的集成电路引脚检测方法相对应的程序代码。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的系统，装置和单元的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。在本申请所提供的几个实施例中，应该理解到，所揭露的系统，装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。本申请的说明书及上述附图中的术语“第一”、“第二”、“第三”、“第四”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本申请的实施例，例如能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本发明各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。所述集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上所述，以上实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围。
