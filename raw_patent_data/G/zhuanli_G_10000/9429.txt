标题title
图像融合方法
摘要abst
本发明实施例提出图像融合方法。方法包括：获取可见光图像及与其配准的红外光图像；获取可见光图像中的第一亮度信息及红外光图像中的第二亮度信息；获取第一亮度信息的第一低频分量和第一高频分量、及第二亮度信息的第二低频分量和第二高频分量；利用第一低频分量与第二低频分量之间的残差数据补偿第二低频分量，得到第三低频分量；利用融合权重矩阵对第一低频分量和第三低频分量进行加权融合，得到融合低频分量；利用融合低频分量、第一高频分量和第二高频分量得到融合亮度信息；根据融合亮度信息和可见光图像的颜色信息，得到融合图像。本发明实施例在保证颜色真实性的基础上，提升了融合图像的信噪比和细节显示效果。
权利要求书clms
1.一种图像融合方法，其特征在于，所述图像融合方法包括：获取可见光图像、以及与所述可见光图像配准的红外光图像；获取所述可见光图像中的第一亮度信息、以及所述红外光图像中的第二亮度信息；基于预先设定的滤波参数，获取所述第一亮度信息的第一低频分量和第一高频分量、以及所述第二亮度信息的第二低频分量和第二高频分量，其中，所述滤波参数根据所述可见光图像和所述红外光图像的成像场景的照度水平确定；利用所述第一低频分量与所述第二低频分量之间的残差数据补偿所述第二低频分量，得到第三低频分量；利用所述第一低频分量和所述第三低频分量的差值确定融合权重矩阵；利用所述融合权重矩阵对所述第一低频分量和所述第三低频分量进行加权融合，得到融合低频分量，其中，所述融合权重矩阵中的各融合权重因子产生使所述融合低频分量相比于所述第二亮度信息更接近所述第一亮度信息的融合趋势；利用所述融合低频分量、以及所述第一高频分量和所述第二高频分量得到融合亮度信息；根据所述融合亮度信息和所述可见光图像的颜色信息，得到所述融合图像。2.根据权利要求1所述的图像融合方法，其特征在于，所述第一低频分量和所述第二低频分量均为在所述可见光图像和所述红外光图像的原始尺度下获得的低频分量，所述第一高频分量和所述第二高频分量均包括在大于所述原始尺度的多个不同尺度下获得的高频分量。3.根据权利要求2所述的图像融合方法，其特征在于，所述第一低频分量和所述第一高频分量是利用金字塔多尺度分解法从所述可见光图像中得到的，所述第二低频分量和所述第二高频分量是利用所述金字塔多尺度分解法从所述红外光图像中得到的。4.根据权利要求1所述的图像融合方法，其特征在于，利用所述第一低频分量与所述第二低频分量之间的残差数据补偿所述第二低频分量，得到第三低频分量，包括：确定所述第一低频分量与所述第二低频分量之间的所述残差数据；利用预先设定的空域滤波算子、与所述第一低频分量关联的第一值域滤波算子、与所述第二低频分量关联的第二值域滤波算子、以及与所述残差数据关联的第三值域滤波算子，对所述残差数据进行滤波处理；将滤波处理后的所述残差数据与所述第二低频分量融合，得到所述第三低频分量。5.根据权利要求4所述的图像融合方法，其特征在于，确定所述第一低频分量与所述第二低频分量之间的所述残差数据，包括：其中，为像素点的坐标，RDbase为像素点的所述残差数据，VSbase为像素点的所述第一低频分量，IRbase为像素点的所述第二低频分量，k和M为预设系数。6.根据权利要求4所述的图像融合方法，其特征在于，利用预先设定的空域滤波算子、与所述第一低频分量关联的第一值域滤波算子、与所述第二低频分量关联的第二值域滤波算子、以及与所述残差数据关联的第三值域滤波算子，对所述残差数据进行滤波处理，包括：H＝Hp*HRD*HVS*HIR，其中：其中，RDbaseflt为像素点的滤波后的残差数据，为像素点的邻域Ω中的像素点，H为像素点的滤波算子，Hp为像素点的所述空域滤波算子，HRD为像素点的所述第三值域滤波算子，HVS为像素点的所述第一值域滤波算子，HIR为像素点的所述第二值域滤波算子，RDbase为像素点的所述残差数据，RDbase为像素点的所述残差数据，VSbase为像素点的所述第一低频分量，VSbase为像素点的所述第一低频分量，IRbase为像素点的所述第二低频分量，IRbase为像素点的所述第二低频分量，w1、w2、w3、w4、σ1、σ2、σ3、σ4为预设参数。7.根据权利要求4所述的图像融合方法，其特征在于，将滤波处理后的所述残差数据与所述第二低频分量融合，得到所述第三低频分量，包括：Nbase＝IRbase+k*RDbaseflt-M其中，Nbase为像素点的所述第三低频分量，IRbase为像素点的所述第二低频分量，RDbaseflt为像素点的滤波后的所述残差数据，k和M为预设系数。8.根据权利要求1所述的图像融合方法，其特征在于，利用所述第一低频分量和所述第三低频分量的差值确定融合权重矩阵，包括：其中，detla＝VSbase-Nbasefs)＝CLIP)ratio,smin,smax)w_mix为像素点的融合权重因子，VSbase为像素点的所述第一低频分量，Nbase为像素点的所述第三低频分量，fs)为系数映射函数，α和ratio为预设指数系数，smin、smax分别为预设最小值限值、最大值限值，A和B为预设系数。9.根据权利要求8所述的图像融合方法，其特征在于，利用所述融合权重矩阵对所述第一低频分量和所述第三低频分量进行加权融合，得到融合低频分量，包括：Megbase＝)*VSbase+w_mix*Nbase其中，Megbase为像素点的所述融合低频分量。10.根据权利要求2所述的图像融合方法，其特征在于，利用所述融合低频分量、以及所述第一高频分量和所述第二高频分量得到融合亮度信息，包括：以所述原始尺度重构所述第一高频分量和所述第二高频分量，分别得到关联所述第一高频分量的第三高频分量、以及关联所述第二高频分量的第四高频分量；将所述第三高频分量和所述第四高频分量融合，得到所述融合高频分量；将所述融合低频分量与所述融合高频分量叠加，得到所述融合亮度信息。
说明书desc
技术领域本发明涉及图像处理技术领域，尤其涉及图像融合方法。背景技术目前，在图像处理领域中有许多图像融合的方案，多数是利用单摄像头分光结构或者双摄像头结构来获取不同谱段的信息，基本以可见光图像和非可见光图像为主，然后结合两者的优势进行图像融合，从而得到更好的图像效果。尽管各个方案的融合算法迥异，但想要达到的最终目的确是一致的，即提升低照度下的图像效果，体现在信噪比、颜色、细节轮廓等多个方面。但是物体对于不同光谱的反射和吸收特性不同，因此同一物体在可见光图像和红外图像里的亮度及纹理表现可能差异很大，尤其是在低照度环境下。对于监控领域而言，在合理的补光条件下，往往非可见光图像的信噪比和景物的纹理较优，但非可见光图像不具备真实颜色信息，因此选用过多红外信息容易导致颜色失真、纹理表现不自然等现象。因此，如何在提升信噪比和细节的同时下，保证颜色的真实性和整体画面的自然度是图像融合算法的主要难点之一。发明内容本发明实施例提出图像融合方法，以使得融合图像既具备颜色真实性，又提高信噪比和细节显示效果。本发明实施例的技术方案是这样实现的：一种图像融合方法，该方法包括：获取可见光图像、以及与所述可见光图像配准的红外光图像；获取所述可见光图像中的第一亮度信息、以及所述红外光图像中的第二亮度信息；基于预先设定的滤波参数，获取所述第一亮度信息的第一低频分量和第一高频分量、以及所述第二亮度信息的第二低频分量和第二高频分量，其中，所述滤波参数根据所述可见光图像和所述红外光图像的成像场景的照度水平确定；利用所述第一低频分量与所述第二低频分量之间的残差数据补偿所述第二低频分量，得到第三低频分量；利用所述第一低频分量和所述第三低频分量的差值确定融合权重矩阵；利用所述融合权重矩阵对所述第一低频分量和所述第三低频分量进行加权融合，得到融合低频分量，其中，所述融合权重矩阵中的各融合权重因子产生使所述融合低频分量相比于所述第二亮度信息更接近所述第一亮度信息的融合趋势；利用所述融合低频分量、以及所述第一高频分量和所述第二高频分量得到融合亮度信息；根据所述融合亮度信息和所述可见光图像的颜色信息，得到所述融合图像。所述第一低频分量和所述第二低频分量均为在所述可见光图像和所述红外光图像的原始尺度下获得的低频分量，所述第一高频分量和所述第二高频分量均包括在大于所述原始尺度的多个不同尺度下获得的高频分量。所述第一低频分量和所述第一高频分量是利用金字塔多尺度分解法从所述可见光图像中得到的，所述第二低频分量和所述第二高频分量是利用所述金字塔多尺度分解法从所述红外光图像中得到的。利用所述第一低频分量与所述第二低频分量之间的残差数据补偿所述第二低频分量，得到第三低频分量，包括：确定所述第一低频分量与所述第二低频分量之间的所述残差数据；利用预先设定的空域滤波算子、与所述第一低频分量关联的第一值域滤波算子、与所述第二低频分量关联的第二值域滤波算子、以及与所述残差数据关联的第三值域滤波算子，对所述残差数据进行滤波处理；将滤波处理后的所述残差数据与所述第二低频分量融合，得到所述第三低频分量。确定所述第一低频分量与所述第二低频分量之间的所述残差数据，包括：其中，为图像中的像素点的坐标，RDbase为像素点的所述残差数据，VSbase为像素点的所述第一低频分量，IRbase为像素点的所述第二低频分量，k和M为预设系数。利用预先设定的空域滤波算子、与所述第一低频分量关联的第一值域滤波算子、与所述第二低频分量关联的第二值域滤波算子、以及与所述残差数据关联的第三值域滤波算子，对所述残差数据进行滤波处理，包括：H＝Hp*HRD*HVS*HIR，其中：其中，RDbaseflt为像素点的滤波后的残差数据，为像素点的邻域Ω中的像素点，H为像素点的滤波算子，Hp为像素点的所述空域滤波算子，HRD为像素点的所述第三值域滤波算子，HVS为像素点的所述第一值域滤波算子，HIR为像素点的所述第二值域滤波算子，RDbase为像素点的所述残差数据，RDbase为像素点的所述残差数据，VSbase为像素点的所述第一低频分量，VSbase为像素点的所述第一低频分量，IRbase为像素点的所述第二低频分量，IRbase为像素点的所述第二低频分量，w1、w2、w3、w4、σ1、σ2、σ3、σ4为预设参数。将滤波处理后的所述残差数据与所述第二低频分量融合，得到所述第三低频分量，包括：Nbase＝IRbase+k*RDbaseflt-M其中，Nbase为像素点的所述第三低频分量，IRbase为像素点的所述第二低频分量，RDbaseflt为像素点的滤波后的所述残差数据，k和M为预设系数。利用所述第一低频分量和所述第三低频分量的差值确定融合权重矩阵，包括：其中，detla＝VSbase-Nbasefs)＝CLIP)ratio,smin,smax)w_mix为像素点的融合权重因子，VSbase为像素点的所述第一低频分量，Nbase为像素点的所述第三低频分量，fs)为系数映射函数，α和ratio为预设指数系数，smin、smax分别为预设最小值限值、最大值限值，A和B为预设系数。利用所述融合权重矩阵对所述第一低频分量和所述第三低频分量进行加权融合，得到融合低频分量，包括：Megbase＝)*VSbase+w_mix*Nbase其中，Megbase为像素点的所述融合低频分量。利用所述融合低频分量、以及所述第一高频分量和所述第二高频分量得到融合亮度信息，包括：以所述原始尺度重构所述第一高频分量和所述第二高频分量，分别得到关联所述第一高频分量的第三高频分量、以及关联所述第二高频分量的第四高频分量；将所述第三高频分量和所述第四高频分量融合，得到所述融合高频分量；将所述融合低频分量与所述融合高频分量叠加，得到所述融合亮度信息。本发明实施例中，通过获取可见光图像和红外光图像的亮度信息的第一、二低频分量和第一、二高频分量，并利用第一、二低频分量之间的残差数据补偿第二低频分量，得到第三低频分量，接着将第一、三低频分量进行加权融合，得到融合低频分量，该融合低频分量在基础亮度上接近可见光图像的亮度信息；然后将融合低频分量和第一、二高频分量进行融合，得到融合亮度信息，该融合亮度信息与可见光图像的亮度信息非常接近，再与可见光图像的颜色信息进行融合，从而使得融合图像既具备颜色真实性，又提高了信噪比和细节显示效果。附图说明图1为本发明一实施例提供的图像融合方法流程图；图2为本发明另一实施例提供的图像融合方法流程图；图3为本发明又一实施例提供的图像融合方法流程图。具体实施方式下面结合附图及具体实施例对本发明再作进一步详细的说明。图1为本发明一实施例提供的图像融合方法流程图，其具体步骤如下：步骤101：获取可见光图像、以及与可见光图像配准的红外光图像。步骤102：获取可见光图像中的第一亮度信息、以及红外光图像中的第二亮度信息。步骤103：基于预先设定的滤波参数，获取第一亮度信息的第一低频分量和第一高频分量、以及第二亮度信息的第二低频分量和第二高频分量，其中，滤波参数根据可见光图像和红外光图像的成像场景的照度水平确定。步骤104：利用第一低频分量与第二低频分量之间的残差数据补偿第二低频分量，得到第三低频分量。步骤105：利用第一低频分量和第三低频分量的差值确定融合权重矩阵。步骤106：利用融合权重矩阵对第一低频分量和第三低频分量进行加权融合，得到融合低频分量，其中，融合权重矩阵中的各融合权重因子产生使融合低频分量相比于第二亮度信息更接近第一亮度信息的融合趋势。步骤107：利用融合低频分量、以及第一高频分量和第二高频分量得到融合亮度信息。步骤108：根据融合亮度信息和可见光图像的颜色信息，得到融合图像。上述实施例中，通过获取可见光图像和红外光图像的亮度信息的第一、二低频分量和第一、二高频分量，并利用第一、二低频分量之间的残差数据补偿第二低频分量，得到第三低频分量，接着将第一、三低频分量进行加权融合，得到融合低频分量，该融合低频分量在基础亮度上接近可见光图像的亮度信息；然后将融合低频分量和第一、二高频分量进行融合，得到融合亮度融合信息，该亮度融合亮度信息与可见光图像的亮度信息非常接近，再与可见光图像的颜色信息进行融合，从而使得融合图像既具备颜色真实性，又提高了信噪比和细节显示效果。图2为本发明另一实施例提供的图像融合方法流程图，其具体步骤如下：步骤201：获取可见光图像、以及与可见光图像配准的红外光图像。步骤202：获取可见光图像中的第一亮度信息、以及红外光图像中的第二亮度信息。步骤203：基于预先设定的滤波参数，获取第一亮度信息的第一低频分量和第一高频分量、以及第二亮度信息的第二低频分量和第二高频分量，其中，滤波参数根据可见光图像和红外光图像的成像场景的照度水平确定。其中，第一低频分量和第二低频分量均为在可见光图像和红外光图像的原始尺度下获得的低频分量，第一高频分量和第二高频分量均包括在大于原始尺度的多个不同尺度下获得的高频分量。一可选实施例中，第一低频分量和第一高频分量是利用金字塔多尺度分解法从可见光图像中得到的，第二低频分量和第二高频分量是利用相同的金字塔多尺度分解法从红外光图像中得到的。步骤204：利用第一低频分量与第二低频分量之间的残差数据补偿第二低频分量，得到第三低频分量。一可选实施例中，本步骤具体包括：确定第一低频分量与第二低频分量之间的残差数据；利用预先设定的空域滤波算子、与第一低频分量关联的第一值域滤波算子、与第二低频分量关联的第二值域滤波算子、以及与残差数据关联的第三值域滤波算子，对残差数据进行滤波处理；将滤波处理后的残差数据与第二低频分量融合，得到第三低频分量。步骤205：利用第一低频分量和第三低频分量的差值确定融合权重矩阵。一可选实施例中，本步骤具体包括：其中，detla＝VSbase-Nbasefs)＝CLIP)ratio,smin,smax)w_mix为像素点的融合权重因子，VSbase为像素点的第一低频分量，Nbase为像素点的第三低频分量，fs)为系数映射函数，α和ratio为预设指数系数，smin、smax分别为预设最小值限值、最大值限值，A和B为预设系数。步骤206：利用融合权重矩阵对第一低频分量和第三低频分量进行加权融合，得到融合低频分量，其中，融合权重矩阵中的各融合权重因子产生使融合低频分量相比于第二亮度信息更接近第一亮度信息的融合趋势。一可选实施例中，本步骤具体包括：Megbase＝)*VSbase+w_mix*Nbase其中，Megbase为像素点的融合低频分量。步骤207：以原始尺度重构第一高频分量和第二高频分量，分别得到关联第一高频分量的第三高频分量、以及关联第二高频分量的第四高频分量；将第三高频分量和第四高频分量融合，得到融合高频分量；将融合低频分量与融合高频分量叠加，得到融合亮度信息。步骤208：根据融合亮度信息和可见光图像的颜色信息，得到融合图像。上述实施例中，通过获取可见光图像和红外光图像在大于原始尺度的多个不同尺度下的第一、二高频分量，以及原始尺度下的第一、二低频分量，并以原始尺度重构第一高频分量和第二高频分量，分别得到关联第一高频分量的第三高频分量、以及关联第二高频分量的第四高频分量，再将第三高频分量和第四高频分量融合，得到融合高频分量，然后将融合低频分量与融合高频分量叠加，得到融合亮度信息，从而使得融合亮度信息更加接近可见光图像的亮度信息，从而进一步提升了融合图像的显示效果。图3为本发明又一实施例提供的图像融合方法流程图，其具体步骤如下：步骤301：同时采用可见光传感器和红外光传感器采集同一区域的图像，分别得到可见光图像和红外光图像；采用配准算法将两幅图像对应的像素点进行匹配，得到配准后的可见光图像和红外光图像。步骤302：从可见光图像中分离出第一亮度信息和颜色信息，从红外光图像中分离出第二亮度信息。若图像为YUV格式，则Y分量即为亮度信息，U、V分量即为颜色信息。若图像为RGB格式，则先将图像转换为YUV格式。步骤303：基于预先设定的低通滤波参数，采用金字塔多尺度分解法，分别获取可见光图像的第一亮度信息在原始尺度下的第一低频分量、红外光图像的第二亮度信息在原始尺度下的第二低频分量，以及，可见光图像的第一亮度信息在大于原始尺度的多个不同尺度下的第一高频分量、红外光图像的第二亮度信息在大于原始尺度的多个不同尺度下的第二高频分量。本步骤中，首先将只包含原始亮度信息的图像作为最底层图像G0，利用预设的低通滤波算法对其进行滤波，然后对滤波后的图像进行下采样，得到上一层的图像G1，重复上面的滤波和下采样操作，反复迭代多次，便得到一个金字塔形的多层图像。自下而上每一层的像素数都不断减少，变得越来越粗糙。其中，滤波算法可采用高斯滤波，窗口为5*5，均值为0，标准差为2，下采样尺度可为1/2，金字塔层数可为3层。对于除第0层图像G0外的每一层图像Gm，先对Gm进行上采样再进行低通滤波，就得到下一层的低频图像，该低频图像中的每个像素点对应一个低频分量；每一层的原始图像Gm减去该层的低频图像，就得到该层的高频图像，该高频图像中的每个像素点对应一个高频分量。步骤304：根据第一低频分量和第二低频分量，计算残差数据。可选地，其中，为像素点的坐标，RDbase为像素点的残差数据，VSbase为像素点的第一低频分量，IRbase为像素点的第二低频分量，k和M为预设系数，1≤k≤4，较佳地，k＝2，M为像素值位宽最大值，例如位宽为8bit时，M为255，k和M的作用是将RDbase的值域范围映射至低频分量的值域范围内。步骤305：根据残差数据的空域滤波算子、与第一低频分量关联的第一值域滤波算子、与第二低频分量关联的第二值域滤波算子、以及与残差数据关联的第三值域滤波算子，计算残差数据的滤波算子。本步骤具体包括：H＝Hp*HRD*HVS*HIR，其中：为像素点的邻域Ω中的像素点，假设邻域半径为r，则m的取值范围为i-r＜m＜i+r，n的取值范围为j-r＜n＜j+r；H为像素点的残差数据的滤波算子，Hp为像素点的残差数据的空域滤波算子，HRD为与像素点的残差数据关联的第三值域滤波算子，HVS为与像素点的第一低频分量关联的第一值域滤波算子，HIR为与像素点的第二低频分量关联的第二值域滤波算子，RDbase为像素点的残差数据，RDbase为像素点的残差数据，VSbase为像素点的第一低频分量，VSbase为像素点的第一低频分量，IRbase为像素点的第二低频分量，IRbase为像素点的第二低频分量，w1、w2、w3、w4、σ1、σ2、σ3、σ4为预设参数，0≤w1、w2、w3、w4≤5，1≤σ1、σ2、σ3、σ4≤255，较佳地，w1＝w4＝2，w2＝w3＝1。步骤306：根据残差数据的滤波算子，对残差数据进行加权滤波。本步骤具体包括：其中，RDbaseflt为像素点的滤波后的残差数据。步骤307：将滤波后的残差数据与第二低频分量进行融合，得到第三低频分量。可选地，本步骤具体包括：Nbase＝IRbase+k*RDbaseflt-M其中，Nbase为像素点的第三低频分量，IRbase为像素点的第二低频分量，RDbaseflt为像素点的滤波后的残差数据，k和M为预设系数，1≤k≤4，较佳地，k＝2，M为像素值位宽最大值，例如位宽为8bit时，M为255。步骤308：根据第三低频分量和第一低频分量的差值计算融合权重矩阵，根据融合权重矩阵对第三低频分量和第一低频分量进行加权计算，得到融合低频分量。可选地，本步骤中，根据第三低频分量和第一低频分量的差值计算融合权重矩阵包括：其中，detla＝VSbase-Nbasefs)＝CLIP)ratio,smin,smax)w_mix为像素点的融合权重因子，一幅低频图像中的所有像素点的融合权重因子构成了融合权重矩阵，VSbase为像素点的第一低频分量，Nbase为像素点的第三低频分量，fs)为系数映射函数，α和ratio为预设指数系数，一般地，1≤α≤20，较佳地，α＝5，0≤ratio≤255，smin、smax分别为预设最小值限值、最大值限值，0≤smin、smax≤512，且，smax＞smin，A和B为预设系数，0≤A+B≤255，较佳地，A＝255。根据融合权重矩阵对第三低频分量和第一低频分量进行加权计算，得到融合低频分量包括：Megbase＝)*VSbase+w_mix*Nbase其中，Megbase为像素点的融合低频分量。步骤309：以原始尺度重构多尺度的第一高频分量和所多尺度的第二高频分量，分别得到关联第一高频分量的第三高频分量、以及关联第二高频分量的第四高频分量；将第三高频分量和第四高频分量融合，得到融合高频分量。对每一层的可见光图像的第一亮度信息的高频图像即第一高频分量和红外光图像的第二亮度信息的高频图像即第二高频分量进行融合，当对所有层的可见光图像的第一亮度信息的高频图像和红外光图像的第二亮度信息的高频图像都融合完成后；再从最上层融合图像开始，对该层融合图像先进行上采样再进行滤波后叠加到下一层的融合图像上，直到叠加到第一层融合图像上后，再进行上采样和滤波，得到原尺度的融合高频图像即融合高频分量。本步骤中，对每一层的可见光图像的第一亮度信息的高频图像即第一高频分量和红外光图像的第二亮度信息的高频图像即第二高频分量进行融合，具体的融合方法并不进行限定，例如：可采用加权融合，也可以根据梯度、强度等方面来选择合适的高频信息。步骤310：将融合低频分量和融合高频分量叠加，得到融合亮度信息。步骤311：根据融合亮度信息和可见光图像的颜色信息，得到融合图像。上述实施例的有益技术效果如下：一、通过获取可见光图像和红外光图像的亮度信息的第一、二低频分量和第一、二高频分量，并利用第一、二低频分量之间的残差数据补偿第二低频分量，得到第三低频分量，接着将第一、三低频分量进行加权融合，得到融合低频分量，该融合低频分量在基础亮度上接近可见光图像的亮度信息；然后将融合低频分量和第一、二高频分量进行融合，得到融合亮度融合信息，该亮度融合亮度信息与可见光图像的亮度信息非常接近，再与可见光图像的颜色信息进行融合，从而使得融合图像既具备颜色真实性，又提高了信噪比和细节显示效果；二、通过获取可见光图像和红外光图像在大于原始尺度的多个不同尺度下的第一、二高频分量，并以原始尺度重构第一高频分量和第二高频分量后再进行融合，得到融合高频分量，然后将融合低频分量与融合高频分量叠加，得到融合亮度信息，从而使得融合亮度信息更加接近可见光图像的亮度信息，从而进一步提升了融合图像的显示效果；三、通过残差数据的空域滤波算子、与第一低频分量关联的第一值域滤波算子、与第二低频分量关联的第二值域滤波算子、以及与残差数据关联的第三值域滤波算子，联合计算残差数据的滤波算子对残差数据计算滤波，使得残差数据滤除了大量噪声的同时，又保留了可见光与非可见光低频信息中各自的优势内容，从而保证了最终的融合图像的显示效果；四、融合权重矩阵考虑了亮度差异和基础亮度值，亮度差异越大，选取可见光低频信息越多，同时随基础亮度增大，权重变化越大，从而使得融合亮度信息进一步接近可见光图像的亮度信息，从而进一步提升了融合图像的显示效果。本发明实施例还提供一种电子设备，该电子设备包括处理器，该处理器用于执行如步骤101～108，或者步骤201～208，或者步骤301～311所述的方法。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本发明保护的范围之内。
