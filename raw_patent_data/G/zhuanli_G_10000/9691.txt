标题title
基于改进型RRT*算法的水下机器人三维全局路径规划方法
摘要abst
本发明公开了一种基于改进型RRT*算法的水下机器人三维全局路径规划方法，包括如下步骤：对得到的全局水下环境信息进行预处理；采用离散正态分布的采样策略，进行随机树采样，把目标点的位置设置为正态分布的均值，采样概率为正态分布的概率密度函数；遍历随机树上的节点，采用基本RRT算法获取到新节点；采用基于三角不等式的几何修剪算法进行节点筛选，完成路径规划。本发明利用采样点服从正态分布的空间采样偏置策略来代替RRT*算法中的全局均匀随机采样，用来提高算法的收敛速度，引入了基于三角不等式的几何修剪算法，用来减少随机树扩展过程中的节点数和路径长度以及增加路径的平滑度。
权利要求书clms
1.基于改进型RRT*算法的水下机器人三维全局路径规划方法，其特征在于，包括如下步骤：S1：对得到的全局水下环境信息进行预处理；S2：采用离散正态分布的采样策略，进行随机树采样，把目标点的位置设置为正态分布的均值，采样概率为正态分布的概率密度函数；S3：遍历随机树上的节点，采用基本RRT算法获取到新节点qnew；S4：采用基于三角不等式的几何修剪算法进行节点筛选，完成路径规划。2.根据权利要求1所述的基于改进型RRT*算法的水下机器人三维全局路径规划方法，其特征在于，所述步骤S1中对全局水下环境信息进行栅格化的预处理，具体的处理方法为：用不同颜色的rgb信息来区分障碍物和无障碍物区域。3.根据权利要求1所述的基于改进型RRT*算法的水下机器人三维全局路径规划方法，其特征在于，所述步骤S2中的采样函数f的数学表达式如下，算法中采用其的离散形式来实现采样点服从正态分布的空间采样：其中，σ1，σ2分别为x，y方向上的随机变量分布的标准差，μ1，μ2分别为x，y方向上的随机变量分布的均值。4.根据权利要求1所述的基于改进型RRT*算法的水下机器人三维全局路径规划方法，其特征在于，所述步骤S3具体为：遍历随机树上的节点，找出与随机采样点qsample欧式距离最小的点qnearest，从节点qnearest向采样点qsample方向扩展固定步长得到新节点qnew。5.根据权利要求1所述的基于改进型RRT*算法的水下机器人三维全局路径规划方法，其特征在于，所述步骤S4具体为：在qnew附近以定义的范围内在搜索树找出其附近节点的集合qnear及qnear父节点qparent的集合，去除qnear中的节点，保留qparent中的节点；直接把qparent中的节点与qnew连接起来，如果新节点qnew与目标点的欧式距离小于目标阈值，则完成路径规划，否则回到步骤S2。
说明书desc
技术领域本发明属于水下机器人领域，涉及水下机器人的路径规划技术，具体涉及一种基于改进型RRT*算法的水下机器人三维全局路径规划方法。背景技术自主式水下机器人由于可以代替人员进行海底搜索、调查、识别和打捞作业，所以在商业和军事上有着越来越广泛的应用。路径规划技术是自主式水下机器人的关键技术之一。虽然现有的全局路径规划方法比如比较常用的Dijkstra算法、A*算法、蚁群优化算法、飞蛾火焰优化算法、遗传算法等可以对水下机器人的全局路径规划出一条无障碍的路径，但是这些算法实现路径规划时计算的复杂度和所需的运行时间会通过增加问题的维数空间或自由度而呈指数增长，应用效果都不是很理想。所以，需要一个新的技术方案来解决上述问题。发明内容发明目的：为了克服现有技术中存在的不足，提供一种基于改进型RRT*算法的水下机器人三维全局路径规划方法，其不用离散化构型区间，计算的复杂度不会随着维数空间或自由度而呈指数增长，解决了现有的自主式水下航行器路径规划方法在进行路径规划时算法复杂度高、计算时间长、规划出的路径过于曲折，对水下机器人来说缺乏安全性和可行性的问题。技术方案：为实现上述目的，本发明提供一种基于改进型RRT*算法的水下机器人三维全局路径规划方法，包括如下步骤：S1：对得到的全局水下环境信息进行预处理；S2：采用离散正态分布的采样策略，进行随机树采样，把目标点的位置设置为正态分布的均值，采样概率为正态分布的概率密度函数；S3：遍历随机树上的节点，采用基本RRT算法获取到新节点qnew；S4：采用基于三角不等式的几何修剪算法进行节点筛选，完成路径规划。进一步地，所述步骤S1中对全局水下环境信息进行栅格化的预处理，具体的处理方法为：用不同颜色的rgb信息来区分障碍物和无障碍物区域。进一步地，所述步骤S2中采用如下二维概率密度函数表示正态分布的离散形式：其中，σ1，σ2分别为x，y方向上的随机变量分布的标准差，μ1，μ2分别为x，y 方向上的随机变量分布的均值。进一步地，所述步骤S3具体为：遍历随机树上的节点，找出与随机采样点qsample欧式距离最小的点qnearest，从节点qnearest向采样点qsample方向扩展固定步长得到新节点qnew。进一步地，所述步骤S4具体为：在qnew附近以定义的范围内在搜索树找出其附近节点的集合qnear及qnear父节点qparent的集合，去除qnear中的节点，保留qparent中的节点；直接把qparent中的节点与qnew连接起来，如果新节点qnew与目标点的欧式距离小于目标阈值，则完成路径规划，否则回到步骤S2。有益效果：本发明与现有技术相比，基于现有的快速搜索树算法提出了改进算法，将改进后的RRT*算法应用于水下机器人三维全局路径规划，其把采用服从正态分布空间偏置采样策略的N-RRT*算法与基于三角不等式的几何修剪算法的T-RRT*算法相结合，改进算法运用栅格法处理有地形障碍物和漂浮障碍物的水下三维环境，根据正态分布的空间采样策略选取采样点，会加快算法的收敛速度；在原算法的基础上加入基于三角不等式的几何修剪算法，会减少随机树扩展过程中使用的节点数，使得改进后的算法规划时间短、路径长度更短、转折节点更少、规划出的路线更加平滑，对水下机器人来说更加具有安全性和可行性；解决了现有的自主式水下航行器路径规划方法在进行路径规划时算法复杂度高、计算时间长、规划出的路径过于曲折，对水下机器人来说缺乏安全性和可行性的问题。附图说明图1为二维正态分布图像；图2为RRT算法路径扩展方式的示意图；图3为RRT*算法路径扩展方式的示意图；图4为T-RRT*重新选择父节点和路径重连示意图。具体实施方式下面结合附图和具体实施例，进一步阐明本发明，应理解这些实施例仅用于说明本发明而不用于限制本发明的范围，在阅读了本发明之后，本领域技术人员对本发明的各种等价形式的修改均落于本申请所附权利要求所限定的范围。本发明提供一种基于改进型RRT*算法的水下机器人三维全局路径规划方法，包括如下步骤：S1：对得到的全局水下环境信息进行栅格化的预处理，具体的处理方法为：用不同颜色的rgb信息来区分障碍物和无障碍物区域，这样算法根据rgb颜色信息的不同直接判断算法在规划过程中会否会发生避碰，不用反复计算当前位置与障碍物的距离。S2：采用离散正态分布的采样策略，进行随机树采样，把目标点的位置设置为正态分布的均值，采样概率为正态分布的概率密度函数：RRT*在随机树采样过程中使用的是四周均匀采样策略，这虽然避免了局部极小值的出现，但是却使算法的运算速度低于RRT算法，并且无目标的搜索策略会让算法的收敛速度的非常慢。为了提高算法的收敛率，使随机树快速朝着目标点的方向进行扩展。本实施例提出 N-RRT*，改进后的算法用目标偏置正态分布抽样代替全局随机抽样。正态分布采样保证了在无障碍区域进行快速的目标偏置搜索，而标准差则引导随机树搜索到无障碍区域去寻找可能的路径。因为用到了栅格法对环境进行建模，所以用到的正态分布的二维概率密度函数：的离散形式，其中σ1，σ2分别为x，y方向上的随机变量分布的标准差，μ1，μ2分别为 x，y方向上的随机变量分布的均值。由于均值决定了分布的中心，标准差决定了分布的范围，所以一开始就把均值设置为目标点，目标点与起始点的大致范围设为标准差，这样RRT*的全局均匀随机采样就变为了采样点服从以目标点为中心，目标点与起始点的大致范围为标准差的二维正态分布采样，本文又在算法中设置只保留采样点符合正态分布左半部分的点，这样随机树可以按照正态分布的采样策略快速的朝向目标点扩展；本实施例中图1是二维正态分布概率密度函数图像，根据图1可见，空间里的点以均值为中心呈现正态分布，且数据的分布区间由标准差决定，说明通过设置正态分布函数的均值，标准差可以决定数据的分布情况。所以本文在算法中利用matlab中的二维正态概率密度的离散函数对空间里的点进行采样，使采的离散点服从以目标点为均值，目标点与起始点的大致范围设为标准差的正态分布，代替了RRT* 算法在空间中采的点服从均匀分布的采样策略，从而使算法具有目标偏置性，加快算法的收敛速度。S3：遍历随机树上的节点，采用基本RRT算法获取到新节点qnew，具体的方法为：遍历随机树上的节点，找出与随机采样点qsample欧式距离最小的点qnearest，从节点qnearest向采样点qsample方向扩展固定步长得到新节点qnew。S4：采用基于三角不等式的几何修剪算法进行节点筛选，完成路径规划。本实施例中步骤S4具体为：在qnew附近以定义的范围内在搜索树找出其附近节点的集合qnear及qnear父节点qparent的集合，去除qnear中的节点，保留qparent中的节点；直接把qparent中的节点与qnew连接起来，如果新节点qnew与目标点的欧式距离小于目标阈值，则完成路径规划，否则回到步骤S2。为了便于理解，这里对步骤S4进行分析说明：RRT*算法在RRT算法的基础上引入代价函数来优化规划出的路径，经过逐次迭代来改善之前的路径，从而得到一条最优或准优的路径。与RRT不同的是RRT*在扩展新节点时分别计算最近邻点集合中的所有点到新顶点的距离加上新顶点到起始点的距离作为路径代价，选择出一条最短路径，而RRT是直接由起始点到最邻近点再到新顶点进行扩展，不考虑路径代价。但是不管是RRT*还是RRT，规划出的都是由直线段连接而成的路径，在转折点处不光滑，既使总的路径长度过长，造成水下机器人的能耗过多，而且规划出的路径不符合水下机器人在实际航行中的运动约束要求，缺少可行性和安全性。基于三角不等式的几何修剪算法包括两个部分，一个是对父节点重新选择，另一个就是路径重连。T-RRT*在RRT*的基础上进行路径代价的改进。计算路径代价时不仅考虑新节点qnew邻近点集合qnear中的点还把邻近点qnear的父节点qparent也考虑其中，由三角不等式的规则三角形任意两边之和大于第三边可知：|qparent-qnear|+|qnew-qnear|＞|qparent-qnew|，当三个点在同一直线上时：|qparent-qnear|+|qnew-qnear|＝|qparent-qnew|所以为了减小随机树扩展过程中的路径代价，本发明提供的T-RRT*算法把随机树扩展过程中形成的节点qnear全部去除，只保留其的父节点qparent，这样形成的路径长度短。这就是对节点的重新选择。重新选择父节点后极大的减少了算法的节点，减小了内存空间，加快了算法的收敛速度。T-RRT*的第二部分就是对路径的重新连接。T-RRT*在连接qparent到qnew的路径时也会把父节点以上的父辈节点都考虑在里面，这使得qnear在T-RRT*算法中共享父节点的趋势比在RRT*中更强。RRT*算法在搜索时只是把qnew连接到qnear集合其中的一个点上，而T-RRT*算法是搜索qnear以及从起点到qnear的所有父辈节点，这样形成一个比RRT*更好的直线路径。具体地说就是T-RRT*在连接路径时，由于|qparent-qnear|+|qnew-qnear|＞ ＝|qparent-qnew|恒成立，所以算法跳过qnear，由qstart到qnear的父节点qparent，然后直接连接 qnew，这样路径代价由原来的|qparent-qnear|+|qnew-qnear|变成现在的|qparent-qnew|，实现对随机树分支的修剪和路径长度的缩短。所以经过基于三角不等式的几何修剪以后，算法形成的最终路径分支少，路径平滑，路径长度短，既满足水下机器人在实际航行的动态约束又加快了收敛速度，降低能源了的消耗。本实施例中为了更好的体现RRT算法和RRT*算法在路径扩展上的区别，引用图2和图3进行对比，如图2所示，RRT算法是找出离随机采样点qrand最近的节点作为新节点qnew的父节点，如图3所示，RRT*为达到算法的渐进最优性，引入路径代价的概念，其是在qnew附近的邻域qnear内寻找从起始点qinit到qnear集合里的点再到qnew的最小路径代价，并把路径代价最小时对应的qnear里的点作为qnew的父节点。本实施例中为了更加清楚的表述T-RRT*的父节点重新选择和路径重连两部分，提供图4，其中，图4为父节点重新选择的示意图，图4为路径重连示意图。参照图4，T-RRT*算法对新节点qnew的父节点重新进行选择，舍弃qnear集合中的点，保留其父节点，qparent集合中的点直接与新节点相连。在进行路径重连时不仅考虑qnear的父节点qparent，而且考虑从起点开始qnear所有的父辈节点，这样使qnear集合内的节点共享一个父节点。这样极大地减少搜索树的分支，形成的路径直接用直线连接，毫无曲折。参照图4，qnear中的点共享qparent集合中的一个父节点，红色实线就是算法在这次迭代中父节点与新节点直接相连形成的路径。基于上述方案，本实施例中分析对比NT-RRT*算法、RRT*算法、RRT、RRT-Connect算法理论方法的不同。主要从包括概率完备性、渐进最优性、树扩展算法来描述各个算法的不同，从而体现出NT-RRT*算法的优势。表1总结了RRT，RRT*，NT-RRT*和 RRT-Connect的理论方法。表1算法理论方法Table 1 Algorithm theory method概率完备性是指如果时间没有限制，那么算法按照一定的要求经过多次迭代寻找到一条路径的概率为100％，NT-RRT*以及RRT*、RRT-Connect都没有改变算法基于增量方法来构造搜索的本质，所以他们都具有概率完备性。渐进最优性是指当迭代次数接近无穷大时，找到最优解的概率接近1即当算法的迭代次数没有限制时，算法规划出的路径接近最优。RRT*和NT-RRT*通过引入父程序和重新布线的程序来实现其渐进最优性，而RRT和RRT-Connect只是依靠最邻近点向新节点扩展，虽然能找到一条安全无障碍的路径，但是不能保证找到的路径是最优的。NT-RRT*算法在随机树扩展时加入基于三角不等式的几何修剪算法，重新选择了父节点和对路径重连，在RRT*算法的基础上对扩展方式上进行了改进。本实施例还提供一种基于改进型RRT*算法的水下机器人三维全局路径规划系统，该系统包括网络接口、存储器和处理器；其中，网络接口，用于在与其他外部网元之间进行收发信息过程中，实现信号的接收和发送；存储器，用于存储能够在所述处理器上运行的计算机程序指令；处理器，用于在运行计算机程序指令时，执行上述共识方法的步骤。本实施例还提供一种计算机存储介质，该计算机存储介质存储有计算机程序，在处理器执行所述计算机程序时可实现以上所描述的方法。所述计算机可读介质可以被认为是有形的且非暂时性的。非暂时性有形计算机可读介质的非限制性示例包括非易失性存储器电路、易失性存储器电路、磁存储介质 和光存储介质等。计算机程序包括存储在至少一个非暂时性有形计算机可读介质上的处理器可执行指令。计算机程序还可以包括或依赖于存储的数据。计算机程序可以包括与专用计算机的硬件交互的基本输入/输出系统、与专用计算机的特定设备交互的设备驱动程序、一个或多个操作系统、用户应用程序、后台服务、后台应用程序等。本领域内的技术人员应明白，本申请的实施例可提供为方法、系统、或计算机程序产品。因此，本申请可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本申请可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本申请是参照根据本申请实施例的方法、设备、和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。
