标题title
半导体装置、使用了它的车载用显示系统、电子设备
摘要abst
视频输入接口310接收视频数据400。OSD电路330在应叠加视频数据400上的OSD对象402的目标区域404中绘制中间层406，在中间层406之上叠加OSD对象402。
权利要求书clms
1.一种半导体装置，其特征在于，包括：视频输入接口，接收视频数据；以及OSD电路，在应叠加所述视频数据上的OSD对象的目标区域中，绘制中间层，在所述中间层之上叠加OSD对象。2.根据权利要求1所述的半导体装置，其特征在于，所述OSD电路通过α混合绘制所述中间层。3.根据权利要求2所述的半导体装置，其特征在于，所述OSD电路包括α值生成部，其生成所述目标区域内的α值的分布。4.根据权利要求3所述的半导体装置，其特征在于，所述目标区域包含：非模糊区域，位于所述目标区域的中央，α值固定；以及模糊区域，包围所述非模糊区域，越接近外周α值越小。5.根据权利要求4所述的半导体装置，其特征在于，所述α值生成部生成位于所述模糊区域的一个角的基准区域的α值的分布，根据所述基准区域的α值的分布，生成所述模糊区域的其余三个角的α值。6.根据权利要求4或5的所述的半导体装置，其特征在于，所述模糊区域的α值的分布为高斯分布。7.根据权利要求3至6的任一项所述的半导体装置，其特征在于，所述α值生成部通过将列数据和行数据相乘，以规定数进行除算，生成所述目标区域内的至少一部分α值的分布。8.根据权利要求7所述的半导体装置，其特征在于，所述规定数为2k，所述除算为k位的移位，其中k≧2。9.根据权利要求1至8的任一项所述的半导体装置，其特征在于，在所述半导体装置的设置时，从外部供给所述OSD对象。10.根据权利要求9所述的半导体装置，其特征在于，所述中间层的颜色附带于对应的所述OSD对象地被供给至所述半导体装置。11.根据权利要求10所述的半导体装置，其特征在于，所述中间层的颜色被埋设在位于所述OSD对象的位图数据的余白部分的特定像素。12.根据权利要求1至8的任一项所述的半导体装置，其特征在于，对于所述中间层的颜色，所述OSD电路根据被叠加在其上的所述OSD对象来进行选择。13.根据权利要求1至12的任一项所述的半导体装置，其特征在于，该半导体装置是时序控制器。14.根据权利要求1至12的任一项所述的半导体装置，其特征在于，该半导体装置是具备时序控制器和源极驱动器的功能的单片驱动器。15.根据权利要求1至12的任一项所述的半导体装置，其特征在于，该半导体装置是具有M输入、N输出的电桥电路，其中M≧1、N≧1。16.一种车载用显示系统，其特征在于，具备权利要求1至15的任一项所述的半导体装置。17.一种电子设备，其特征在于，具备权利要求1至15的任一项所述的半导体装置。
说明书desc
技术领域本发明涉及具有数字视频信号的接口的半导体装置。背景技术图1是图像显示系统的框图。图像显示系统100R包括：液晶面板或有机EL面板等的显示面板102、栅极驱动器104、源极驱动器106、图形控制器110及时序控制器200R。图形控制器110生成应在显示面板102显示的图像数据。该图像数据所包含的像素数据以串行方式被传送给时序控制器200R。时序控制器200R接收图像数据，生成各种控制/同步信号。栅极驱动器104与来自时序控制器200R的信号同步地依次选择显示面板102的扫描线LS。另外，RGB数据被供给至源极驱动器106。时序控制器200R包括接收电路202、发送电路204、逻辑电路210。接收电路202从图形控制器110以串行方式接收图像数据。在外设的ROM111中，存储有显示面板102的ID、分辨率或刷新率等。逻辑电路210根据接收电路202接收的图像数据，生成控制/同步信号。发送电路204将控制信号或图像数据输出给栅极驱动器104和源极驱动器106。对于时序控制器200R，存在要求显示与接收电路202接收的图像数据不同的、预先确定的文字、图形、图标等的OSD功能的情况。因此，逻辑电路210包括OSD电路212。以下，将文字、图形、图表等总称为OSD对象。ROM111中存储有一些OSD对象的位图数据。时序控制器200R从ROM111读取与在图像数据之外被输入的控制信号相应的OSD对象的位图数据，使其在显示面板102中显示。专利文献1：日本特开平6-317782号公报专利文献2：日本特开2002-169524号公报发明内容图2的是示出OSD对象的一个示例的图，图2的是示出将OSD对象叠加在图像数据的状态的图。如图2的所示，由于OSD对象的颜色或亮度与作为其基底的图像数据的颜色或亮度的关系，OSD对象的视觉辨认性有时会显著降低。为了解决该问题，有时对时序控制器安装视觉辨认性判定功能。视觉辨认性判定功能是将OSD对象与背景的颜色或亮度的差值与阈值相比较，判定OSD对象的视觉辨认性的功能。将判定结果通知给图形控制器110，视觉辨认性低时需要在图形控制器110侧进行应对。本发明是鉴于相关课题而提出的，其一方案的例示性的目的之一在于改善OSD的视觉辨认性。本发明的一方案涉及具有图像传送功能的半导体装置。半导体装置包括：视频输入接口，接收视频数据；以及OSD电路，在应叠加视频数据上的OSD对象的目标区域中，描绘中间层，在中间层之上叠加OSD对象。另外，使以上构成要素任意组合而成的发明、或使本发明的表现在方法、装置等之间变换所得的发明作为本发明的方案也是有效的。根据本发明的一方案，能够改善OSD的视觉辨认性。附图说明图1是图像显示系统的框图。图2的是示出OSD对象的一个示例的图，图2的是示出将OSD对象叠加在图像数据的状态的图。图3是具备实施方式的半导体装置的图像显示系统的框图。图4的～是说明图3的半导体装置进行的图像数据的生成的图。图5的、是示出插入中间层的情况和没有插入中间层的情况的图像的图。图6是示出OSD电路的结构例的框图。图7是说明α值数据的生成的图。图8是示出基准区域的α值的分布的一个示例的图。图9的、是示出α值生成部的结构例的电路图。图10是示出埋设分色的OSD对象的位图数据的图。图11的～是示出半导体装置的具体应用的图。图12的～是说明实施方式的车载用显示装置的图。图13是示出电子设备的立体图。具体实施方式本说明书所公开的一实施方式涉及半导体装置。半导体装置包括：视频输入接口，接收视频数据；以及OSD电路，在视频数据上应叠加OSD对象的目标区域中，绘制中间层，在中间层之上叠加OSD对象。通过对半导体装置的OSD电路安装插入中间层的功能，从而可以隐蔽背景，可以提高OSD对象的视觉辨认性。OSD电路可以通过α混合绘制中间层。OSD电路可以包含生成目标区域内的α值的分布的α值生成部。α值的分布可以是越向外周透明度越高。也可以是，目标区域包含：非模糊区域，位于目标区域的中央，α值固定；以及模糊区域，包围非模糊区域，越接近外周α值越小。此时，通过将非模糊区域的尺寸设定为可变，从而能够应对不同尺寸的OSD对象。也可以是，α值生成部生成位于模糊区域的一个角的基准区域的α值的分布，根据基准区域的α值的分布，生成模糊区域的其余三个角的α值。由此能够减少运算量。也可以是，α值生成部将列数据和行数据相乘，通过以规定数进行除算，生成α值的分布。由此，仅保持列数据和行数据即可，从而相比于保持目标区域内的所有像素的α值，可以降低存储器的容量。也可以是，规定数为2k，除算为位移位。由此，可以简化通过硬件的安装。α值的分布可以上下对称且左右对称。由此，如果仅再生一部分，则可以通过翻转或旋转而生成其余的部分。α值的分布也可以是高斯分布。由此，可以将中间层融合在背景中。中间层的颜色可以根据被叠加在其上的OSD对象而适当选择。由此，可以针对每个OSD对象设定适当的中间层的颜色。也可以是，在半导体装置的设置时，从外部供给OSD对象。OSD对象中可以附带其所被叠加的中间层的颜色。中间层的颜色可以被埋设在位于OSD对象的位图数据的余白部分的特定像素中。以下，基于优选实施方式，参照附图对本发明进行说明。对于各附图所示的相同或同等的构成要素、部件、处理标注相同的附图标记，并适当省略重复的说明。另外，实施方式是例示而非限定发明的内容，并非实施方式中所记载的全部特征及其组合都是发明的本质特征。在本说明书中，所谓“部件A和部件B连接的状态”，除了部件A和部件B物理性地直接连接的情况以外，还包括部件A和部件B经由不会对它们的电连接状态造成实质性影响的或者不妨碍通过它们的结合所实现的功能或效果的其他部件而间接连接的情况。同样地，所谓“部件C被设置在部件A和部件B之间的状态”，除了部件A和部件C、或部件B和部件C直接连接的情况以外，还包括经由不会对它们的电连接状态造成实质性影响的或者不妨碍通过它们的结合所实现的功能或效果的其他部件而间接连接的情况。图3是具备实施方式的半导体装置300的图像显示系统100的框图。图像显示系统100包括半导体装置300、显示面板102、图形控制器110、主处理器120。图形控制器110是GPU等，生成视频数据400。图形控制器110包括遵循HDMI标准或DisplayPort标准或DVI标准的发送器，经由视频传送线130与半导体装置300连接。以串行方式将包含视频数据400的数字视频信号S1传送给半导体装置300。主处理器120总体地控制图像显示系统100。主处理器120和半导体装置300经由与视频传送线130不同系统的控制线132而连接。对于控制线132，可以使用I2C接口或SPI。图形控制器110和主处理器120也可以被统合。半导体装置300包括视频输入接口310、控制输入接口320、OSD电路330。视频输入接口310接收来自图形控制器110的数字视频信号S2。控制输入接口320从主处理器120接收与OSD相关的控制数据S2。例如控制数据S2包含指示OSD对象402的显示的显示指令S3。OSD电路330从未图示的存储器载入与显示指令S3对应的OSD对象402的数据。OSD对象的数据可以以压缩的形式存储在存储器中，此时，OSD电路330解码OSD对象。OSD电路330在应叠加视频数据400上的OSD对象402的目标区域404中，绘制中间层406。然后，在中间层406之上叠加OSD对象402。叠加了OSD对象402的图像数据408被发送给未图示的驱动器，最终显示在显示面板102中。以上为图像显示系统100的构成。接着说明图像显示系统100的动作。图4的～是说明图3的半导体装置300进行的图像数据408的生成的图。图4的中示出视频数据400、OSD对象402、中间层406。中间层406可以是单色，将中间层406的颜色称为分色。优选地，分色选择OSD对象402的视觉辨认性高的颜色。图4的示出在视频数据400的目标区域404绘制了中间层406的图像401。图4的示出在图4的图像401上叠加了OSD对象402的图像408。以上为图像显示系统100的动作。接着，说明其效果。图5的、分别示出插入了中间层406的情况和没有插入中间层406的情况的图像。从这些图像的比较中可以明确，通过插入中间层406，可以特别提高OSD对象402的视觉辨认性。通过将在视频数据400和OSD对象402之间插入中间层406的功能安装在半导体装置300，从而视觉辨认性升高，因此可以减少图形控制器110的处理。本发明作为图3的框图或电路图来理解，或者也及于根据上述说明而导出的各种装置、方法，并不局限于特定的结构。下面，为了辅助对发明的本质或工作的理解，或为了明确它们，而不是为了缩小本发明的范围，说明更具体的构成例或实施例。图6是示出OSD电路330的结构例的框图。OSD电路330为了将中间层406自然地融合在视频数据400中，通过α混合将中间层406绘制在视频数据400之上。OSD电路330包括存储器332、编码器334、解码器336、分色合成部340、OSD合成部350。存储器332存储记述OSD对象402的数据。也可以是，在半导体装置300启动时的设置期间，从主处理器向半导体装置300的控制输入接口320发送多个OSD对象402的位图数据S4。此时，可以针对OSD对象402各者，以对应的分色和组合，发送给半导体装置300。编码器334将接收的OSD对象的位图数据S4以规定的形式压缩，将压缩数据S5存储在存储器332中。压缩形式没有特别的限定，但例如可以使用游程长度压缩等。OSD对象的分色的信息S6与压缩数据S5建立对应地存储在存储器332中。分色信息S6也可以被埋设在压缩数据S5中。在设置结束后的通常动作时，控制输入接口320接收OSD对象的显示指令S3时，解码器336从存储器332读取显示指令S3指定的OSD对象的压缩数据S5，进行解码。解码后的位图数据S7被供给至OSD合成部350。分色合成部340在视频数据400的目标区域404中绘制中间层406。分色合成部340包含α值生成部342和α混合部344。α值生成部342生成目标区域404内的α值的分布S8。α混合部344根据α值数据S8，用分色S6对视频数据400的目标区域404内进行着色。OSD合成部350接收分色合成部340的输出数据S9。该输出数据S9对应于图4的的图像401。OSD合成部350合成由解码器336解码的OSD对象的位图数据S7，以及分色合成部340的输出图像S9。以上为OSD电路330的结构例。若将目标区域内的α值的分布作为位图数据保存在存储器中，需要较大的存储容量。因此，α值生成部342也可以构成为通过运算处理生成α值数据S8。图7是说明α值数据S8的生成的图。图7中以灰度示出α值。目标区域404包含α值根据位置而变化的模糊区域420，以及α值固定的非模糊区域422。α值为8比特的情况下，非模糊区域422内的α值可以是与不透明对应的最大值。矩形的非模糊区域422被配置在目标区域404的中央，其周围以模糊区域420围住。此外，模糊区域420在其外周部，可以包含α值为0即为透明的区域。模糊区域420被划分为8个区域420A～420H。区域420B和420G的一对为上下对称，区域420D和420E的一对为左右对称。另外，四角的区域420A、420C、420F、420H以任一个为基准，呈左右对称及/或上下对称。例如将左上的区域420A作为基准区域。在区域420B和区域420G中，相同y坐标具有相同α值，换言之，y方向的α值的分布是共同的，朝向相反。同样地，在区域420D和区域420E中，相同x坐标具有相同α值，换言之，x方向的α值的分布是共通的，朝向相反。基准区域420A的α值的分布是根据y方向分布与x方向分布通过运算而生成的。其他三个角的区域420C、420F、420H的分布可以通过将基准区域420A的分布进行翻转或旋转来生成。即，为了生成α值数据S8，仅保持模糊区域的y方向分布Dy和x方向分布Dx即可，从而可以大幅削减存储容量。若使y方向分布Dy与x方向分布Dx相同，即设定为Dx＝Dy，则可以进一步削减存储容量。接着，针对基准区域420A的分布的生成进行说明。图8是示出基准区域420A的α值的分布的一个示例的图。图8中，省略α值为0的范围。图8的α值的分布是基于高斯滤波器的。在此，将基准区域420A的右下作为坐标轴的原点。此外，滤波器的特性并不限定于高斯，也可以使用三角函数或其他的滤波器。将x方向分布Dx的第i个要素标记为Dx、将y方向分布Dy的第j个要素标记为Dy。在该例中，0≦i≦29、0≦j≦29，各要素及α值为8位。通过式表示任意坐标的α值α。α＝Dx×Dy/256…将Dx，Dy及α值的位数设定为k时，其最大值为2k－1，得到一般化的式。α＝Dx×Dy/2k…若将Dx设定为行数据、将Dy设定为列数据，则α值生成部342通过将列数据Dx与行数据Dy相乘，通过规定数2k进行除算，生成α值的分布。如上所述，Dx和Dy是相同的，将其记录为D，得到式。α＝D×D/2k…图9的、是示出α值生成部342的结构例的电路图。在图9的中，存储器360x、360y保持一维的x方向分布Dx、y方向分布Dy。乘法器362将x方向分布Dx的第i个要素Dx和y方向分布Dy的第j个要素Dy相乘。基于规定数2k的除算是k位的移位，从而可以通过位移位器364实现，可以抑制电路面积的增加。图9的是设定为Dx＝Dy的情况，存储容量被削减。返回图7。有时使用尺寸不同的多个OSD对象。将对象的宽度设定为Wc，将高度设定为Hc。另外，将非模糊区域422的宽度设定为Wnb，将高度设定为Hnb。将α值的一维的分布Dx的长度设定为Lx，将Dy的长度设定为Ly。另外，将目标区域404的外周部的α值为零的范围的宽度设定为WZERO，将高度设定为HZERO。此时，下述式成立。Wc＝Wnb+2×Hc＝Hnb+2×因此，将Wnb、WZERO作为参数，可以应对宽度不同的尺寸的OSD对象。同样地，将Hnb、HZERO作为参数，可以应对宽度不同的尺寸的OSD对象。此外，也可以准备多个长度Lx、Ly不同的一维数据Dx、Dy，针对OSD对象的各尺寸，分别选择适当的一维数据。针对分色的指定进行说明。多数OSD对象在外周部具有余白。因此，也可以将指定分色的像素埋设在OSD对象的余白中。图10是示出埋设了分色的OSD对象的位图数据的图。例如，在OSD对象的位图数据的快速位，配置有分色的像素。通过这样的方式，显示系统的设计者在设计OSD对象时，考虑OSD对象的颜色，能够以视觉辨认性升高的方式规定分色。并且，半导体装置300在显示OSD对象时，通过参照OSD对象的位图的特定像素，可以得到分色。参照图6。如上所述，在半导体装置300的设置时，从主处理器120向半导体装置300供给OSD对象的位图数据S4。此时的OSD对象的位图数据S4如图10所示包含分色的像素。而且，图6的编码器334压缩包含分色的像素的全部位图数据S4。此时，分色的信息S6被埋设在压缩数据S5中。显示OSD对象时，解码器336解码压缩数据S5，参照快速像素，可以取得分色。该分色的信息被供给至α混合部344。从解码器336供给至OSD合成部350的位图数据S7在快速位包含分色的像素。因此，OSD合成部350在绘制OSD对象时，将快速位除外地进行绘制。接着，说明半导体装置300的应用。图11的～是示出半导体装置300的具体的应用的图。在图11的中，半导体装置300为时序控制器200。时序控制器200接收来自图形控制器110的数字视频信号S2，控制栅极驱动器104和源极驱动器106。在图11的中，半导体装置300为电桥芯片150。电桥芯片150被设置在图形控制器110和时序控制器200之间，作为图形控制器110的输出接口与时序控制器的输入接口的桥接。在图11的中，半导体装置300为电桥芯片160。电桥芯片160将来自图形控制器110的视频信号分支给多个系统。电桥芯片160也可以向多个系统分配与所输入的视频信号相同的视频信号。或者，电桥芯片160也可以将所输入的视频信号分割成多个区域，分配给多个系统。在图11的中，半导体装置300是单片驱动器170。单片驱动器170具有时序控制器的功能和显示器驱动器的功能。图11的～的图像显示系统可以使用在以车载用显示器或医疗用显示器、电视、PC用显示器为代表的各种显示装置中。或者，图像显示系统也可以内置于笔记本电脑或平板终端、智能手机、数码相机或数码摄像机等电子设备中。图12的是示出实施方式的车载用显示装置600的图。车载用显示装置600被埋设在驾驶舱正面的控制台602中，从车辆侧的处理器，接收包含速度计604、表示引擎的转速的转速计606、燃料的余量608、混合动力汽车或电动汽车的情况下电池的余量等的数字视频信号S1，将其进行显示)。以往，如图12的所示的、表示某种异常或电池耗尽的显示灯或警告灯在显示面板之外使用独立的LED进行显示。在显示面板上不显示警告灯的理由如下。即，半导体装置300和图形控制器110之间通过差动串行接口连接，从系统起动开始到时序控制器200和图形控制器110之间的串行接口的连接建立为止的过程中，不能进行图像数据的传送，从而不能在显示面板102显示图像。或者，一旦连接建立后，若由于噪声等的影响而切断连接，则到再次建立连接为止的过程中，不能在显示面板102上显示图像。除此之外，电缆脱落、发生断线的情况，串行接口或图形控制器110的局部故障的情况也是同样的。将像这样无法显示图像的状态称为“显示不能状态”。由于包含应通知到驱动器的重要信息，因而要求警告灯即使在显示不能状态下也能够点亮。出于相关状况，警告灯需要设置在显示面板的外部。对此，可以利用实施方式的时序控制器200或半导体装置300的其他方案，通过OSD功能在显示面板上显示警告灯。这是因为在OSD的显示中，不需要差分串行接口的通信。由此，不需要LED或其驱动电路，因此可以降低成本。另外由于可以使用I2C等的ECU的标准功能，能够进一步降低成本。另外，在车载用显示装置600中，若发生无法显示视频数据S1的状况，则显示面板102变黑，给驾驶带来妨碍。因此，也可以准备数字或字母等作为OSD对象。如图12的所示，在行驶中发生了某些异常、速度计604或转速计606不能显示的情况下，利用OSD功能，可以实时显示车速信息610或引擎的转速的信息612，能够提高安全性。或者，当汽车的点火开关接通时，车载用显示装置600起动时，到能够显示视频数据S1为止的过程中，能够利用OSD功能显示“PLEASE WAIT...”或当前时刻等的字符串。作为半导体装置300的一方案的时序控制器200还能够用于医疗用显示装置。在诊察、治疗或手术中，医疗用显示装置显示医生或护士需要的信息。在医疗用显示装置中，即使在无法显示视频数据S1的状况中，也能够利用OSD功能显示重要的信息。图13是示出电子设备500的立体图。图13的电子设备500可以是便携式计算机或平板终端、智能手机、手掌游戏机、音频播放器等。电子设备500包括被内置于壳体502的图形控制器110、显示面板102、栅极驱动器104、源极驱动器106。在时序控制器200和图形控制器110之间，可以设置包含差动传送器、传送路径及差动接收器的传送装置112。以上，基于实施方式对本发明进行了说明。本领域技术人员应当理解：该实施方式是例示，在所述各构成要素或各处理过程的组合中可能会存在各种变形例，这些变形例也属于本发明的范围。以下，对这些变形例进行说明。在实施方式中，通过运算生成基准区域420A的α值的分布，但并不限定于此。例如也可以在半导体装置300的设计阶段预先生成α值的分布，非易失性地存储在存储器中。在实施方式中，也可以是分色合成部340动态选择分色。例如分色合成部340保持记述OSD对象的颜色和分色的对应关系的表格或公式。而且，获取指示显示的OSD对象的颜色，可以决定与其对应的分色。在实施方式中，在半导体装置300的设置时，从外部将OSD对象载入到半导体装置300的结构，但并不限定于此。也可以是，在半导体装置300的内部，设置半导体装置300能够直接访问的非易失性存储器，在非易失性存储器中保持OSD对象。此时，不需要设置时的OSD对象的载入。基于实施方式，使用具体的语句对本发明进行了说明，但实施方式仅表示本发明的原理和应用，对于实施方式，在不脱离权利要求书所规定的本发明的思想的范围内，认可许多变形例及配置的变更。本发明可以利用在数字视频信号的接口中。100 图像显示系统102 显示面板104 栅极驱动器106 源极驱动器110 图形控制器120 主处理器130 视频传送线132 控制线140 非易失性存储器300 半导体装置310 视频输入接口320 控制输入接口330 OSD电路332 存储器334 编码器336 解码器340 分色合成部342 α值生成部344 α混合部350 OSD合成部400 视频数据402 OSD对象404 目标区域406 中间层408 图像数据500 电子设备600 车载用显示装置。
