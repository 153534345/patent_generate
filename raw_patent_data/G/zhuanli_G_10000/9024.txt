标题title
一种车辆监控方法和监控系统
摘要abst
本发明实施例公开了一种车辆监控方法和车辆监控系统。该车辆监控方法包括：计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，并计算滤光偏振角度，所述天空图像中的偏振光由所述天空图像对应的天空区域散射太阳光所形成；根据所述滤光偏振角度，滤除所述监控场景中所述偏振角度对应的偏振光；对监控场景成像，形成监控图像。本发明实施例解决了现有的监控系统无法消除车辆车窗反射的问题，实现了对车辆车窗反射光线的有效滤除，可对车辆内部进行有效成像，从而可以对车辆外部及内部情况的监控，保证对车辆的全面监控。
权利要求书clms
1.一种车辆监控方法，其特征在于，包括：计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，并计算滤光偏振角度，所述天空图像中的偏振光由所述天空图像对应的天空区域散射太阳光所形成；根据所述滤光偏振角度，滤除所述监控场景中所述偏振角度对应的偏振光；对监控场景成像，形成监控图像。2.根据权利要求1所述的车辆监控方法，其特征在于，计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，包括：确定太阳光的入射角度；确定天空图像对应的天空区域形成的散射光的入射角度；计算天空图像对应的天空区域散射太阳光形成的偏振光的偏振角度，确定天空图像中偏振光的偏振角度。3.根据权利要求2所述的车辆监控方法，其特征在于，确定太阳光的入射角度，包括：获取当前时间；获取车辆监控系统所处的地理位置；根据预先建立的时间参量和地理位置参量与太阳光入射角度的映射关系，确定太阳光的入射角度。4.根据权利要求2所述的车辆监控方法，其特征在于，确定天空图像对应的天空区域形成的散射光的入射角度，包括：确定车辆车窗的俯仰角；确定车辆车窗的方向角；确定车辆监控系统中摄像机相对车辆车窗的位置；根据车辆车窗的俯仰角和方向角以及车辆监控系统中摄像机相对车辆车窗的位置，确定天空图像对应的天空区域形成的散射光的入射角度。5.根据权利要求2所述的车辆监控方法，其特征在于，确定天空图像对应的天空区域形成的散射光的入射角度，包括：确定车辆车窗的俯仰角；确定车辆车窗的方向角；根据车辆车窗的俯仰角和方向角，确定车窗正对的天空区域形成的散射光的入射角度；以车窗正对的天空区域形成的散射光的入射角度，近似为天空图像对应的天空区域形成的散射光的入射角度。6.根据权利要求4或5所述的车辆监控方法，其特征在于，获取车辆车窗的俯仰角，包括：获取车辆的图像；根据车辆的图像识别车辆的款型；根据预先建立的车辆款型与车窗俯仰角的映射关系，确定车窗的俯仰角。7.根据权利要求4或5所述的车辆监控方法，其特征在于，获取车辆车窗的方向角，包括：获取车辆所处道路的朝向，确定车辆的朝向；根据车辆的朝向确定车辆车窗的方位角。8.根据权利要求1所述的车辆监控方法，其特征在于，所述滤光偏振角度与天空图像中的偏振光的所述偏振角度垂直。9.一种车辆监控系统，其特征在于，包括：滤光偏振角度计算系统，用于计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，并计算滤光偏振角度，所述天空图像中的偏振光由所述天空图像对应的天空区域散射太阳光所形成；偏振滤光系统，用于根据所述滤光偏振角度，滤除所述监控场景中所述偏振角度对应的偏振光；成像系统，用于对监控场景成像，形成监控图像。10.根据权利要求9所述的车辆监控系统，其特征在于，所述偏振滤光系统包括偏振片和驱动电机，所述驱动电机根据所述滤光偏振角度计算系统计算的滤光偏振角度，驱动偏振片以使所述偏振片的透过轴调节至所述滤光偏振角度。
说明书desc
技术领域本发明实施例涉及视频监控技术，尤其涉及一种车辆监控方法和监控系统。背景技术现有对包括道路在内的一些场景的视频监控一般需要对车辆进行监控，在对车辆监控时，车窗会反射较强的光线，而且，根据车窗的倾斜角度，车窗反射的图像通常为天空图像，即该天空图像对应的天空区域提供的光线，经车窗反射后入射至监控系统的摄像机中，导致车辆内部的情况无法获得。目前，消除车窗反射的监控方案主要包括两类：1、双光路摄像机系统；2、短波红外摄像机系统。其中，双光路摄像机系统的基本原理为通过分光器件将镜头采集得到的光进行分波长分离，通过图像传感器分别采集可见光与红外光信息，可见光信息提供图像的色彩信息，红外光信息提供图像的轮廓信息。其中，由于红外光在车窗表面一般不容易反射，可直接透射过车窗，再通过图像融合算法，实现车窗反射消除及车内环境的采集。短波红外系统的基本原理则为通过红外激光补光，利用相机采集红外信息实现消除车窗反射，透车窗拍摄的目的。然而，双光路摄像机系统需要设置两套图像传感器，造成了监控系统中摄像机光学结构的复杂度，提高了成本。而短波红外系统只能实现黑白图像的获取，不能获得彩色图像。发明内容本发明提供一种车辆监控方法和监控系统，以有效减少车窗反射产生的影响，简化车辆监控系统的光学结构。第一方面，本发明实施例提供了一种车辆监控方法，包括：计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，并计算滤光偏振角度，所述天空图像中的偏振光由所述天空图像对应的天空区域散射太阳光所形成；根据所述滤光偏振角度，滤除所述监控场景中所述偏振角度对应的偏振光；对监控场景成像，形成监控图像。可选地，计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，包括：确定太阳光的入射角度；确定天空图像对应的天空区域形成的散射光的入射角度；计算天空图像对应的天空区域散射太阳光形成的偏振光的偏振角度，确定天空图像中偏振光的偏振角度。可选地，确定太阳光的入射角度，包括：获取当前时间；获取车辆监控系统所处的地理位置；根据预先建立的时间参量和地理位置参量与太阳光入射角度的映射关系，确定太阳光的入射角度。可选地，确定天空图像对应的天空区域形成的散射光的入射角度，包括：确定车辆车窗的俯仰角；确定车辆车窗的方向角；确定车辆监控系统中摄像机相对车辆车窗的位置；根据车辆车窗的俯仰角和方向角以及车辆监控系统中摄像机相对车辆车窗的位置，确定天空图像对应的天空区域形成的散射光的入射角度。可选地，确定天空图像对应的天空区域形成的散射光的入射角度，包括：确定车辆车窗的俯仰角；确定车辆车窗的方向角；根据车辆车窗的俯仰角和方向角，确定车窗正对的天空区域形成的散射光的入射角度；以车窗正对的天空区域形成的散射光的入射角度，近似为天空图像对应的天空区域形成的散射光的入射角度。可选地，获取车辆车窗的俯仰角，包括：获取车辆的图像；根据车辆的图像识别车辆的款型；根据预先建立的车辆款型与车窗俯仰角的映射关系，确定车窗的俯仰角。可选地，获取车辆车窗的方向角，包括：获取车辆所处道路的朝向，确定车辆的朝向；根据车辆的朝向确定车辆车窗的方位角。可选地，所述滤光偏振角度与天空图像中的偏振光的所述偏振角度垂直。第二方面，本发明实施例还提供了一种车辆监控系统，包括：滤光偏振角度计算系统，用于计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，并计算滤光偏振角度，所述天空图像中的偏振光由所述天空图像对应的天空区域散射太阳光所形成；偏振滤光系统，用于根据所述滤光偏振角度，滤除所述监控场景中所述偏振角度对应的偏振光；成像系统，用于对监控场景成像，形成监控图像。可选地，所述偏振滤光系统包括偏振片和驱动电机，所述驱动电机根据所述滤光偏振角度计算系统计算的滤光偏振角度，驱动偏振片以使所述偏振片的透过轴调节至所述滤光偏振角度。本发明实施例提供的车辆监控方法和监控系统，通过计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，并计算滤光偏振角度，然后根据滤光偏振角度，滤除监控场景中该偏振角度对应的偏振光，最后对监控场景成像，形成监控图像，可以有效且清晰地获取包括车辆在内的监控图像。本发明实施例解决了现有的监控系统无法消除车辆车窗反射的问题，实现了对车辆车窗反射光线的有效滤除，可对车辆内部进行有效成像，从而可以对车辆外部及内部情况的监控，保证对车辆的全面监控。附图说明图1是本发明实施例提供的一种车辆监控方法的流程图；图2是本发明实施例提供自然光散射偏振示意图；图3是本发明实施例提供的天空图像中偏振光偏振角度的计算模型图；图4是本发明实施例提供的天空观测方向高度角的计算模型图；图5是本发明实施例提供的一种车辆监控系统的结构示意图；图6是本发明实施例提供的一种偏振滤光系统的结构示意图；图7是本发明实施例提供的一种滤光偏振角度计算系统的结构示意图。具体实施方式下面结合附图和实施例对本发明作进一步的详细说明。可以理解的是，此处所描述的具体实施例仅仅用于解释本发明，而非对本发明的限定。另外还需要说明的是，为了便于描述，附图中仅示出了与本发明相关的部分而非全部结构。图1是本发明实施例提供的一种车辆监控方法的流程图，参考图1，该车辆监控方法包括：S110、计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，并计算滤光偏振角度，天空图像中的偏振光由天空图像对应的天空区域散射太阳光所形成；图2是本发明实施例提供自然光散射偏振示意图，参考图2，首先，可以理解的是，一束自然光经散射后，会形成向各个方向传播的散射光。根据天空的瑞利散射原理，经车辆车窗反射的天空图像对应的天空区域会对太阳光进行散射，而太阳光在某处天空区域形成的散射光为线偏光。该线偏光入射至车辆车窗上时，会通过反射进入监控系统的摄像机中，从而形成天空图像。通过计算获得该天空图像中的线偏光的主要偏振方向，可以通过光学手段，将该方向线偏光进行滤光，即通过在获得天空图像中偏振光的偏振角度后，可以进一步计算获得滤光的偏振角度。为了保证滤光效果，可选地，滤光偏振角度与天空图像中的偏振光的偏振角度垂直。S120、根据滤光偏振角度，滤除监控场景中偏振角度对应的偏振光；在上述步骤中获得滤光偏振角度后，以该滤光偏振角度作为透光轴设置偏振片，可以实现该滤光偏振角度的透光，从而过滤掉天空图像中的偏振光，可以实现对车窗上形成的天空图像的有效减弱。S130、对监控场景成像，形成监控图像。在过滤掉天空图像中的偏振光后，监控场景中剩余的光线会在进入车辆监控系统的摄像机中形成监控图像。并且，监控场景中剩余的光线由于包括经车辆车窗透射的光线，因此，可以通过该部分透射的光线，有效地对车内的场景进行成像，从而方便获知车辆内部的情况，实现车辆监控的效果。需要说明的是，在滤除天空图像中的偏振光时，会同时将场景光线中偏振方向一致的其他光线同时滤除，监控图像则由场景中其他偏振方向的光线形成。本发明实施例提供的车辆监控方法，通过计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，并计算滤光偏振角度，然后根据滤光偏振角度，滤除监控场景中该偏振角度对应的偏振光，最后对监控场景成像，形成监控图像，可以有效且清晰地获取包括车辆在内的监控图像。本发明实施例解决了现有的监控系统无法消除车辆车窗反射的问题，实现了对车辆车窗反射光线的有效滤除，可对车辆内部进行有效成像，从而可以对车辆外部及内部情况的监控，保证对车辆的全面监控。具体地，根据瑞利散射定律，在车辆监控的应用场景下，车辆车窗反射的天空图像中的偏振光的偏振方向，与太阳光的入射方向和该偏振光的传播方向均垂直。基于此原理，本发明实施例还提供了监控场景中车辆车窗反射的天空图像中偏振光的偏振角度的具体计算方法。在上述实施例提供的监控方法的基础上，步骤S110、计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，具体包括：S111、确定太阳光的入射角度；由于车辆车窗反射的天空图像中的偏振光的偏振方向，与太阳光的入射方向和该偏振光的传播方向均垂直，因此，首先需确定太阳光的入射角度，太阳光的入射角度可以由太阳高度角和太阳方位角两个参量进行表示。S112、确定天空图像对应的天空区域形成的散射光的入射角度；同时，车窗反射的天空图像对应的天空区域，在太阳光入射后形成散射光，其中部分散射光入射至车辆车窗并反射至车辆监控系统中的摄像机中，通过确定天空图像对应的天空区域形成的散射光的入射角度，即可知该散射光的传播方向。S113、计算天空图像对应的天空区域散射太阳光形成的偏振光的偏振角度，确定天空图像中偏振光的偏振角度。以上，在获得太阳光的入射角度以及天空区域形成的散射光的传播方向后，可以利用天空区域的散射光的偏振角度分别与太阳光的入射角度和该散射光的传播方向的垂直关系计算获得。图3是本发明实施例提供的天空图像中偏振光偏振角度的计算模型图，下面以图3所示的计算模型，对车窗上形成的天空图像中偏振光的计算原理进行详细介绍。首先，如图3所示，设定C点表示车辆车窗，以C点为原点建立第一坐标系。其中，X轴为经线方向，Y轴为纬线方向，Z轴则为垂直地平面的方向，F表示车窗反射的天空图像对应的天空区域，而方向向量表示太阳光的入射光线。根据图2所示的偏振散射原理可知，当太阳光入射至天空区域F点时，会产生瑞利散射，沿方向向量传播的散射光为偏振光，且该偏振光的偏振角度同时与和垂直，从而可以计算获得天空图像中偏振光的偏振角度。具体地，如图3所示，可知太阳高度角为βs，太阳方位角为αs。从而可知方向向量可表示为。同理，当确定天空观测方向的高度角β和方位角α，即可知天空区域F的散射光的方向向量为。最后，利用向量叉乘可获得由天空区域F点向车窗C点入射的偏振光的偏振方向即：综上，此处通过计算可获得偏振光的偏振方向在对车辆车窗中的偏振光进行滤光时，根据偏振方向为方向的偏振光进行滤光即可。本发明实施例对如上提供的计算偏振光的偏振角度的过程中，太阳光入射角度以及车窗反射的天空图像对应的天空区域的位置的计算，也提供了具体的测算方法。其中，步骤S111、确定太阳光的入射角度，具体包括：S1111、获取当前时间；S1112、获取车辆监控系统所处的地理位置；S1113、根据预先建立的时间参量和地理位置参量与太阳光入射角度的映射关系，确定太阳光的入射角度。其中，由于太阳光在某处的入射角度同时与时间和地理位置相关，因此，可将太阳光的入射角度与当前时间t、当前地理位置建立数据库，即建立太阳光入射角度和当前时间、经纬度的映射关系F＝，通过当前时间和车辆监控系统所处的地理位置的确定，即可通过映射关系确定太阳光的入射角度。具体地，利用时钟系统可确定当前时间t，利用全球定位系统可确定当前车辆监控系统的经纬度，因此可确定当地当前太阳高度角βs与太阳方位角αs。如上所述，太阳光的入射角度可以根据地理的自然规律获得，而对于车窗反射的天空图像对应的天空区域的散射光的方向向量，则需要确定当前道路方向与经线的夹角和车窗相对于当地的倾斜角度，还需要确定该车辆监控系统中摄像机的位置，利用光的反射原理，从而确定天空区域的散射光的方向向量。具体地，本发明实施例中，步骤S112、确定天空图像对应的天空区域形成的散射光的入射角度，可包括：S1121、确定车辆车窗的俯仰角；S1122、确定车辆车窗的方向角；S1123、确定车辆监控系统中摄像机相对车辆车窗的位置；S1124、根据车辆车窗的俯仰角和方向角以及车辆监控系统中摄像机相对车辆车窗的位置，确定天空图像对应的天空区域形成的散射光的入射角度。其中，车辆车窗的俯仰角和方向角实质表示了车辆车窗垂线的方向，根据车辆车窗的垂线方向，再由车辆监控系统中摄像机的相对位置，即可由光的反射原理即反射角等于入射角，来计算获得来自天空区域的散射光的入射角度，再根据公式，来计算获得天空区域的散射光的偏振角度。考虑到车辆监控系统中摄像机相对车辆车窗的位置需要同时确定摄像机的位置和车辆的位置，其中包括摄像机与车辆的方位、相对高度和相对距离，因此需要对车辆和摄像机的位置进行准确的立体定位。而由于监控场景成像端中的摄像机具有一定的景深，成像是对一定距离的场景可以清晰成像，即摄像机实质上是对一定距离的图像进行清晰成像，而并非只能对特定位置的车辆进行图像采集。而且，由于车辆一般为行驶状态，其位置难以精确定位，故而确定摄像机的位置和车辆的位置无法精确获得。为了简化计算过程，可以在确定天空图像对应的天空区域形成的散射光的入射角度时进行合理地近似。基于此，本发明实施例还提供了一种确定天空图像对应的天空区域形成的散射光的入射角度的方法，具体包括：S1121、确定车辆车窗的俯仰角；S1122、确定车辆车窗的方向角；S2123、根据车辆车窗的俯仰角和方向角，确定车窗正对的天空区域形成的散射光的入射角度；S2124、以车窗正对的天空区域形成的散射光的入射角度，近似为天空图像对应的天空区域形成的散射光的入射角度。其中，车窗反射的天空区域可由网络摄像机获得，具体可根据IPC位置、车窗俯仰角度以及车窗与IPC的相对位置获得。图4是本发明实施例提供的天空观测方向高度角的计算模型图，参考图4所示，车窗反射的天空区域形成的散射光的入射角度可通过车窗的俯仰角θ和当前车辆行驶方向与经线的夹角α确定。一般地，道路交通中IPC距离地面高度为6米，常用拍摄距离为23米，因此可知IPC拍摄方向与地面的夹角b约为12.26°。根据车窗反射天空观测方向高度角计算模型，可根据车窗角俯仰角θ，IPC拍摄方向与地面的夹角b计算得到天空观测方向的高度角为β＝2θ+b；方位角α可由当前道路车辆行驶方向与经线的夹角获得，从而可以进一步根据公式，来计算获得天空区域的散射光的偏振角度。继续参考图3，由于偏振角为入射光偏振方向与入射光坐标系的夹角，因此，以F点为原点，以为Zi轴，建立入射光坐标系。通过将由第一坐标系转换至入射光坐标系，即可获得入射光偏振方向与入射光坐标系的横坐标Xi的夹角，即可确定天空区域F点偏振光的偏振角度。根据坐标转换原理，坐标转换矩阵Ti可表示为，因此入射光坐标系下的偏振方向FEi为因此可获得偏振方向与入射光坐标Xi轴的夹角，即当前入射光偏振角度γ为：在设置偏振片时，需要将偏振片的透过轴设置与Xi轴夹角为°，即可实现滤光。进一步地，步骤S1121、获取车辆的俯仰角，可通过以下步骤实现：S11211、获取车辆的图像；S11212、根据车辆的图像识别车辆的款型；S11213、根据预先建立的车辆款型与车窗俯仰角的映射关系，确定车窗的俯仰角。其中，固定车型的车窗倾斜角度固定，在根据车窗的俯仰角和车辆款型的对应关系建立数据库后，可以获得车辆款型与车窗俯仰角的映射关系。通过图像识别，可以确定车辆的款型，进而可以确定车窗俯仰角。车辆的款型主要可根据图像识别车辆的轮廓、标识等来获得，本领域技术人员可采用相关的技术实现，此处不做过多叙述。需要说明的是，此处的图像识别过程可以利用该车辆监控系统的摄像机预先进行车辆图像的成像，以进行车辆款型的识别。同样地，对于车辆车窗的方向角的获取，本发明实施例也提供了一种方法。具体地，步骤S1122、获取车辆车窗的方向角，包括：S11221、获取车辆所处道路的朝向，确定车辆的朝向；S11222、根据车辆的朝向确定车辆车窗的方位角。其中，车辆监控系统中可在道路的两侧各设置一个摄像机，利用两个摄像机的定位，来获得该车辆监控系统所监控的场景中车辆所在道路的朝向，例如可以将两个摄像机设置为关于道路对称，显然，该两个摄像机连线的中垂线的方向则为道路的朝向，从而可以确定车辆的朝向。显然，车辆的朝向则代表了车辆车窗的朝向，也即可以确定车窗的方位角。本发明实施例还提供了一种车辆监控系统，图5是本发明实施例提供的一种车辆监控系统的结构示意图，参考图5，该车辆监控系统包括滤光偏振角度计算系统10，用于计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，并计算滤光偏振角度，天空图像中的偏振光由天空图像对应的天空区域散射太阳光所形成；偏振滤光系统20，用于根据滤光偏振角度，滤除监控场景中偏振角度对应的偏振光；成像系统30，用于对监控场景成像，形成监控图像。本发明实施例提供的车辆监控系统，通过设置滤光偏振角度计算系统、偏振滤光系统和成像系统，利用滤光偏振角度计算系统计算监控场景中车辆车窗反射的天空图像中偏振光的偏振角度，并计算滤光偏振角度，然后利用偏振滤光系统根据滤光偏振角度，滤除监控场景中该偏振角度对应的偏振光，最后利用成像系统对监控场景成像，形成监控图像，可以有效且清晰地获取包括车辆在内的监控图像。本发明实施例解决了现有的监控系统无法消除车辆车窗反射的问题，实现了对车辆车窗反射光线的有效滤除，可对车辆内部进行有效成像，从而可以对车辆外部及内部情况的监控，保证对车辆的全面监控。为了保证滤光效果，可选地，滤光偏振角度与天空图像中的偏振光的偏振角度垂直。图6是本发明实施例提供的一种偏振滤光系统的结构示意图，参考图5和图6，上述实施例提供的车辆监控系统中，偏振滤光系统20可包括偏振片21和驱动电机22，驱动电机22根据滤光偏振角度计算系统10计算的滤光偏振角度，驱动偏振片21以使偏振片21的透过轴1调节至滤光偏振角度。其中，偏振片21可设置在成像系统30中透镜和图像传感器之间，用以在图像传感器成像之前，将天空图像中的偏振光滤除。图7是本发明实施例提供的一种滤光偏振角度计算系统的结构示意图，参考图7，进一步地，滤光偏振角度计算系统10可包括太阳光入射角度确定模块11、散射光入射角度确定模块12和偏振光偏振角度计算模块13；太阳光入射角度确定模块11用于确定太阳光的入射角度；散射光入射角度确定模块12用于确定天空图像对应的天空区域形成的散射光的入射角度；偏振光偏振角度计算模块13用于计算天空图像对应的天空区域散射太阳光形成的偏振光的偏振角度，确定天空图像中偏振光的偏振角度。具体地，太阳光入射角度确定模块11可包括时钟系统和全球定位系统，时钟系统用于获取当前时间，全球定位系统用于获取车辆监控系统所处的地理位置，太阳光入射角度确定模块11则可根据预先建立的时间参量和地理位置参量与太阳光入射角度的映射关系，确定太阳光的入射角度。散射光入射角度确定模块12可包括车辆识别系统和全球定位系统，其中，车辆识别系统用于确定车辆车窗的俯仰角，全球定位系统则用于确定车辆车窗的方向角。散射光入射角度确定模块12可通过车辆车窗的俯仰角和方向角等，来确定天空图像对应天空区域形成的散射光的入射角度。进而偏振光偏振角度计算模块13可以利用天空图像对应的天空区域形成的散射光的偏振方向，与太阳光的入射方向以及散射光的传播方向均垂直，从而计算该散射光的偏振角度，即确定天空图像中偏振光的偏振角度。注意，上述仅为本发明的较佳实施例及所运用技术原理。本领域技术人员会理解，本发明不限于这里所述的特定实施例，对本领域技术人员来说能够进行各种明显的变化、重新调整、相互结合和替代而不会脱离本发明的保护范围。因此，虽然通过以上实施例对本发明进行了较为详细的说明，但是本发明不仅仅限于以上实施例，在不脱离本发明构思的情况下，还可以包括更多其他等效实施例，而本发明的范围由所附的权利要求范围决定。
