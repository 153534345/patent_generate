标题title
一种数字集成电路众工艺角延时预测方法
摘要abst
本发明公开了一种数字集成电路众工艺角延时预测方法，能够应用于众工艺角下的时序签核问题中。在特征工程方面，通过膨胀卷积神经网络对邻近工艺角下的路径延时关系进行抽取，并通过双向长短期记忆模型学习得到路径拓扑信息，最后，采用多门控混合专家网络模型输出得到多个工艺角下路径延时的预测结果。与传统机器学习方法相比，本发明通过更为有效的特征工程处理，能够在较低的仿真开销情况下，取得更高精度的预测效果，对于数字集成电路的众工艺角下时序签核具有重要意义。
权利要求书clms
1.一种数字集成电路众工艺角延时预测方法，其特征在于：所述众工艺角指的是对电路进行时序分析和验证时所采用的工艺、电压和温度工作条件的组合；所述方法包括以下步骤：S1：通过时序分析工具获取指定电路的时序报表，从中提取路径拓扑信息，包括门单元种类、门单元尺寸与对应负载电容序列，并将此路径转化为晶体管级网表，修改该网表中的工艺、电压和温度参数，通过晶体管级仿真工具仿真得到该路径在对应工艺角下的延时信息；S2：将S1步骤中通过晶体管级仿真工具HSPICE仿真得到路径在各个工艺角下的延时信息作为膨胀卷积神经网络Dilated CNN模型的输入，该神经网络经过训练后能够将邻近温度电压组合下的延时相互关联并学习延时之间关系，从而得到更为有效的路径延时特征表达；S3：将S1步骤中提取得到的路径拓扑信息，包含门单元种类、门单元尺寸与对应负载电容序列，作为双向长短期记忆神经网络BLSTM的输入，该神经网络经过训练后能够对路径的拓扑信息进行建模，建立起路径拓扑结构与路径延时之间的联系；S4：将S2步骤中膨胀卷积神经网络Dilated CNN模型的输出和S3步骤中双向长短期记忆神经网络BLSTM的输出进行合并后作为多门控混合专家网络MMoE的输入，该模型经过训练后，能够建立起高电压下路径延时信息和拓扑信息同低电压下多个温度点的路径延时之间的关系，实现同时对低电压下多个温度点路径延时的预测。2.根据权利要求1所述的数字集成电路众工艺角延时预测方法，其特征在于：所述步骤S1具体包括以下步骤：S11：通过时序分析工具对电路进行时序分析得到时序报表，时序报表中包含有电路中的部分路径的信息，包括路径的延时，路径中每一级单元的单元类型，单元尺寸和对应负载电容；随后提取路径结构，并抽取每条路径中的拓扑信息，包含门单元种类、门单元尺寸与对应负载电容序列；S22：通过时序分析工具将将路径转化为晶体管级网表，最后用晶体管级仿真工具仿真得到路径延时信息，修改该网表中的工艺、电压和温度参数，通过晶体管级仿真工具仿真得到该路径在对应工艺角下的延时信息，提取路径延时结果用于后续步骤中的模型训练与推理中。3.根据权利要求1所述的数字集成电路众工艺角延时预测方法，其特征在于：所述步骤S2中，假设输入延时数据所在电压为Vi，样本个数为Ns，电路仿真时的温度种类数为Nf，输入样本维度可以表示为；接着改变输入层的维度为以满足卷积神经网络的输入格式需要，输入层维度中的1表示目前的输入电路所采用的工艺是相同的；之后把维度变换后的输入层接入到N层串行连接的卷积层，其中N＞＝2；对于其中第n层卷积层，Fn代表的是第n层卷积层中的滤波器个数，即第n层卷积层输出的最后一维维度，Kn与Sn分别代表的是第n层卷积层中卷积核尺寸与步长，Dn则是第n层卷积层的膨胀系数，第n层卷积层的输出维度中的Hn的计算公式如下：之后，卷积层的输出连接展开层作为输入，通过将卷积层输出张量的第二与第三个维度进行展开合并来实现数据降维；经若干层全连接层进行维度变换后，输入到输出层中，其中，第m层全连接层中的神经元个数为Qm个；最后，输出层的输出特征即为最终的膨胀卷积神经网络抽取出的特征，特征数量定义为Qo，抽取得到的最终的延时特征将与S3步骤的输出特征合并作为S4步骤中多门控混合专家网络MMoE的输入。4.根据权利要求1所述的数字集成电路众工艺角延时预测方法，其特征在于：所述步骤S3中，路径拓扑信息包含有门单元种类、门单元尺寸与对应负载电容序列，对于门单元种类和门单元尺寸这两种类别型序列特征，首先通过填充处理解决其序列长度不一致问题，然后将填充后的序列输入到嵌入层中，通过网络学习得到元素的向量表征，负载电容则经过分箱后采用填充操作补齐到统一长度，并采用嵌入层学习向量表达，接着将上述经嵌入层学习后得到的表达进行向量拼接，最后拼接完的向量输入到双向长短期记忆神经网络BLSTM中进行训练。5.根据权利要求4所述的数字集成电路众工艺角延时预测方法，其特征在于：所述门单元种类和门单元尺寸这两种类别型序列，这两种类别变量组成的序列采用相似的预处理手段；首先对于序列做从字符串到整型数字的映射，之后，对路径的整型值向量进行填充到统一长度，且填充值为0；对于负载电容组成的连续数值序列，采用分桶的方法首先将连续数值分桶到不同标识中，再把每个桶映射成整形数；其中分桶公式bin如下：bin＝round％v+1 其中round函数代表取整函数，x为负载电容序列中的元素，u代表对元素的放大倍数，也即保留的小数点后的位数，数值为10的整数倍，v则是分桶的数目；该分桶策略将负载电容映射到1至v之中，经过映射后负载电容之间依旧保持着数据的相对大小关系；之后，采用双向长短期记忆神经网络BLSTM抽取路径拓扑特征，先将数据处理成为网络所需输入形式，然后输入到网络中进行训练：首先，输入数据经过嵌入层处理后，数据维度为Ns×sl×emb，其中，Ns为样本数量，即输入路径数；sl为填充后序列输入长度，在这里被统一填充到同一长度，也就是最长输入路径的级数，emb代表嵌入层的神经元个数，即序列中元素被表示为向量时的向量维度；随后，将嵌入层的输出作为双向长短期记忆神经网络BLSTM的输入，由于双向长短期记忆神经网络BLSTM对序列进行双向的学习，hid在数值上等于两倍的隐藏层神经元个数；最后，在双向长短期记忆神经网络BLSTM之后连接池化层，对序列输出的第二个维度进行降维，输出向量的维度为Ns×ho；经过池化层降维的向量输出将会和S2步骤的输出进行合并作为S4中的多门控混合专家网络MMoE的输入。6.根据权利要求1所述的数字集成电路众工艺角延时预测方法，其特征在于：所述步骤S4中的多门控混合专家网络MMoE，其中的专家层能够对不同的任务分别进行学习，门控函数经过网络学习后能够对不同专家赋予不同的权重；假设任务数为K个，则第k个子任务的输出yk由下式决定，其中x为多门控混合专家网络MMoE的输入，hk为顶层塔函数，fk为共享底层操作函数，gk表示门控函数,Wgk是模型中可学习的权重矩阵参数，该权重矩阵的维度为；其中，n和d分别是专家网络的个数和输入特征的维度，即特征个数，softmax函数为归一化指数函数；。7.根据权利要求6所述的数字集成电路众工艺角延时预测方法，其特征在于：所述多门控混合专家网络MMoE，在该模型的网络结构中，输入特征为双向长短期记忆神经网络BLSTM提取的路径拓扑特征与邻近工艺、电压和温度组合下的路径延时特征，首先，exp个专家层会分别对输入特征进行学习，这些专家层的模型参数是互不共享；其中专家层与塔层的神经元个数分别记作he与ht；随后，t个门控函数会根据t个温度下的真实标签与预测值的损失函数对每个专家的权重进行调整，最终的输出由所有专家层的输出进行加权相加便得到，即为某一电压下t个温度点的路径延时预测值结果。
说明书desc
技术领域本发明涉及一种集成电路众工艺角时序签核问题下的延时预测技术,属于EDA技术领域。背景技术随着集成电路工艺不断进步以及芯片应用场景持续增多，设计者往往需要考虑芯片的各种可能的复杂工作场景，这对于集成电路设计与验证提出了很高的要求。为此，在集成电路设计流程中，为了确保芯片在各种条件下都能够正常工作，通常需要在多种工艺、电压、温度的组合条件下对芯片进行时序分析和验证。然而，对多种工艺、电压和温度组合条件下的电路进行仿真来获取电路中路径的延时值所花费的时间代价高昂，严重延长了芯片的设计周期。传统的动态电压频率调整技术难以满足在低电压下的时序验证要求。此外，代工厂商提供的单元库仅包含标称电压附近，缺少低电压下的单元库，因此无法满足宽电压下时序验证的条件。在先进工艺下，集成电路设计时通常需要对多种工艺、电压和温度组合下路径延时的变化与波动进行分析，原因有以下几点。首先，路径延时与工艺、电压和温度组合的变化关系在先进工艺下并非简单线性关系，二者变化关系复杂且敏感，因此在进行时序分析时不能简单认为路径延时值随着工艺、电压、温度条件单调变化，因此在对电路进行时序验证和分析时，需要考虑不同的工艺、电压和温度组合。第二，从关键路径角度分析，在某个固定的工艺、电压和温度组合条件下，通过额定仿真和波动仿真得到的关键路径并不相同，说明用某“极值”工艺、电压和温度组合条件来真正代表关键路径的延时值会不可避免的带来误差。第三，由于制造前的波动性与不确定性的存在，以及不断提出的新时序概念进一步增加了工艺、电压和温度组合条件，导致众工艺角问题不断凸显。然而，如果想要减小芯片发生故障的风险，就必须要对成千上万个工艺、电压和温度组合条件进行仿真，使芯片能够真正稳定地工作在实际工业环境中，但是这会带来巨大的时间成本，进而延长芯片的整个设计周期。但是，如果对在部分工艺角下对电路进行仿真，那么芯片工作时发生故障的风险是存在的，而这往往会导致比较严重的工业故障。所以众工艺角问题在实际生产中必须在速度与精度之中进行折衷，而无法完美的兼顾。因此建立一套适用于众工艺角问题的时序处理框架显得尤为重要。目前机器学习被广泛应用于延时预测领域中。但是对于众工艺角下的延时预测问题，目前已有的机器学习方法没有能够取到很好的预测效果。原因有以下两点，首先，传统机器学习方法常用矩阵格式作为数据输入，无法对序列结构数据进行建模，因此存在路径拓扑信息抽取难度大的问题。而电路中的路径本身属于序列特征的一种，其路径结构对于对应路径延时有着重要影响。目前多数相关已有研究主要利用连续值特征进行建模，并没有能够通过对序列信息进行建模，从而利用路径拓扑信息来提高路径延时预测的精确性。因此如何利用模型直接学习延时与路径拓扑特征的关系是延时预测领域中一个重要的问题。最后，传统机器学习方法对于邻近工艺、电压和温度组合下的延时关系关注程度不够，不可避免地存在信息损失。延时预测问题作为一个回归问题，模型输入特征有很大一部分是已知的邻近工艺、电压和温度组合下的延时特征。在跨电压域延时预测问题中，特征电压域延时往往是某些电压下的若干温度点的延时，不同温度与电压下的延时值可以组成一个网格延时数据，延时值与邻近的工艺、电压和温度组合下的延时值都有邻近关系。但是传统的机器学习模型无法直接处理这样的网格数据，常见机器学习模型如线性回归，随机森林等均需将网格数据展开成一维向量进行建模，这种处理方式无疑会导致信息损失，模型的精度有限。因此，如何对网格延时数据进行建模，从而捕捉到邻近工艺、电压和温度组合延时关系是延时预测另一个亟需解决的问题。发明内容技术问题：本发明的目的是提供一种数字集成电路众工艺角延时预测方法，能够对电路路径延时进行更为精确的预测，并且减小仿真带来的开销。技术方案：本发明的一种数字集成电路众工艺角延时预测方法，所述众工艺角指的是对电路进行时序分析和验证时所采用的工艺、电压和温度工作条件的组合；所述方法包括以下步骤：S1：通过时序分析工具获取指定电路的时序报表，从中提取路径拓扑信息，包括门单元种类、门单元尺寸与对应负载电容序列，并将此路径转化为晶体管级网表，修改该网表中的工艺、电压和温度参数，通过晶体管级仿真工具仿真得到该路径在对应工艺角下的延时信息；S2：将S1步骤中通过晶体管级仿真工具HSPICE仿真得到路径在各个工艺角下的延时信息作为膨胀卷积神经网络Dilated CNN模型的输入，该神经网络经过训练后能够将邻近温度电压组合下的延时相互关联并学习延时之间关系，从而得到更为有效的路径延时特征表达；S3：将S1步骤中提取得到的路径拓扑信息，包含门单元种类、门单元尺寸与对应负载电容序列，作为双向长短期记忆神经网络的输入，该神经网络经过训练后能够对路径的拓扑信息进行建模，建立起路径拓扑结构与路径延时之间的联系；S4：将S2步骤中膨胀卷积神经网络Dilated CNN模型的输出和S3步骤中双向长短期记忆神经网络BLSTM的输出进行合并后作为多门控混合专家网络MMoE的输入，该模型经过训练后，能够建立起高电压下路径延时信息和拓扑信息同低电压下多个温度点的路径延时之间的关系，实现同时对低电压下多个温度点路径延时的预测。其中：所述步骤S1具体包括以下步骤：S11：通过时序分析工具对电路进行时序分析得到时序报表，时序报表中包含有电路中的部分路径的信息，包括路径的延时，路径中每一级单元的单元类型，单元尺寸和对应负载电容；随后提取路径结构，并抽取每条路径中的拓扑信息，包含门单元种类、门单元尺寸与对应负载电容序列；S22：通过时序分析工具将将路径转化为晶体管级网表，最后用晶体管级仿真工具仿真得到路径延时信息，修改该网表中的工艺、电压和温度参数，通过晶体管级仿真工具HSPICE仿真得到该路径在对应工艺角下的延时信息，提取路径延时结果用于后续步骤中的模型训练与推理中。所述步骤S2中，假设输入延时数据所在电压为Vi，样本个数为Ns，电路仿真时的温度种类数为Nf，输入样本维度可以表示为；接着改变输入层的维度为以满足卷积神经网络的输入格式需要，输入层维度中的1表示目前的输入电路所采用的工艺是相同的；之后把维度变换后的输入层接入到N层串行连接的卷积层，其中N＞＝2；对于其中第n层卷积层，Fn代表的是第n层卷积层中的滤波器个数，即第n层卷积层输出的最后一维维度，Kn与Sn分别代表的是第n层卷积层中卷积核尺寸与步长，Dn则是第n层卷积层的膨胀系数，第n层卷积层的输出维度中的Hn的计算公式如下：之后，卷积层的输出连接展开层作为输入，通过将卷积层输出张量的第二与第三个维度进行展开合并来实现数据降维；经若干层全连接层进行维度变换后，输入到输出层中，其中，第m层全连接层中的神经元个数为Qm个；最后，输出层的输出特征即为最终的膨胀卷积神经网络抽取出的特征，特征数量定义为Qo，抽取得到的最终的延时特征将与S3步骤的输出特征合并作为S4步骤中多门控混合专家网络的输入。所述步骤S3中，路径拓扑信息包含有门单元种类、门单元尺寸与对应负载电容序列，对于门单元种类和门单元尺寸这两种类别型序列特征，首先通过填充处理解决其序列长度不一致问题，然后将填充后的序列输入到嵌入层中，通过网络学习得到元素的向量表征，负载电容则经过分箱后采用填充操作补齐到统一长度，并采用嵌入层学习向量表达，接着将上述经嵌入层学习后得到的表达进行向量拼接，最后拼接完的向量输入到双向长短期记忆神经网络BLSTM中进行训练。所述门单元种类和门单元尺寸这两种类别型序列，这两种类别变量组成的序列采用相似的预处理手段；首先对于序列做从字符串到整型数字的映射，之后，对路径的整型值向量进行填充到统一长度，且填充值为0；对于负载电容组成的连续数值序列，采用分桶的方法首先将连续数值分桶到不同标识中，再把每个桶映射成整形数；其中分桶公式bin如下：bin＝round％v+1 其中round函数代表取整函数，x为负载电容序列中的元素，u代表对元素的放大倍数，也即保留的小数点后的位数，数值为10的整数倍，v则是分桶的数目；该分桶策略将负载电容映射到1至v之中，经过映射后负载电容之间依旧保持着数据的相对大小关系；之后，采用双向长短期记忆神经网络BLSTM抽取路径拓扑特征，先将数据处理成为网络所需输入形式，然后输入到网络中进行训练：首先，输入数据经过嵌入层处理后，数据维度为Ns×sl×emb，其中，Ns为样本数量，即输入路径数；sl为填充后序列输入长度，在这里被统一填充到同一长度，也就是最长输入路径的级数，emb代表嵌入层的神经元个数，即序列中元素被表示为向量时的向量维度；随后，将嵌入层的输出作为双向长短期记忆神经网络的输入，由于双向长短期记忆神经网络BLSTM对序列进行双向的学习，hid在数值上等于两倍的隐藏层神经元个数；最后，在双向长短期记忆神经网络之后连接池化层，对序列输出的第二个维度进行降维，输出向量的维度为Ns×ho；经过池化层降维的向量输出将会和S2步骤的输出进行合并作为S4中的多门控混合专家网络的输入。所述步骤S4中的多门控混合专家网络，其中的专家层能够对不同的任务分别进行学习，门控函数经过网络学习后能够对不同专家赋予不同的权重；假设任务数为K个，则第k个子任务的输出yk由下式决定，其中x为多门控混合专家网络的输入，hk为顶层塔函数，fk为共享底层操作函数，gk表示门控函数,Wgk是模型中可学习的权重矩阵参数，该权重矩阵的维度为；其中，n和d分别是专家网络的个数和输入特征的维度，即特征个数，softmax函数为归一化指数函数；所述多门控混合专家网络，在该模型的网络结构中，输入特征为双向长短期记忆神经网络提取的路径拓扑特征与邻近工艺，电压和温度组合下的路径延时特征，首先，exp个专家层会分别对输入特征进行学习，这些专家层的模型参数是互不共享；其中专家层与塔层的神经元个数分别记作he与ht；随后，t个门控函数会根据t个温度下的真实标签与预测值的损失函数对每个专家的权重进行调整，最终的输出由所有专家层的输出进行加权相加便得到，即为某一电压下t个温度点的路径延时预测值结果。有益效果：本发明公开了一种数字集成电路众工艺角延时预测方法，可以应用于众工艺角下的时序签核问题中。在特征工程方面，通过膨胀卷积神经网络对邻近工艺角下的路径延时关系进行抽取，并通过双向长短期记忆模型学习得到路径拓扑信息，最后，采用多门控混合专家网络模型得到多个工艺角下路径延时的预测结果。与传统机器学习方法相比，本发明通过更为有效的特征工程处理，能够在较低的仿真开销情况下，取得更高精度的预测效果，对于数字集成电路的众工艺角下时序签核具有重要意义。附图说明图1为本发明数字集成电路众工艺角延时预测框架示意图；图2为膨胀卷积神经网络模型结构示意图；图3为序列特征预处理过程示意图；图4为双向长短期记忆神经网络模型结构示意图；图5为双向长短期记忆神经网络抽取特征示意图图6为多门控混合专家网络模型结构示意图。具体实施方式下面结合具体实施方式对本发明的技术方案作进一步的介绍。本发明具体实施方案公开了一种数字集成电路众工艺角延时预测方法，所述的众工艺角指的是对电路进行时序分析和验证时所采用的工艺、电压和温度等工作条件的组合；例如电路仿真电压点选用0.5V，0.6V，0.7V，0.8V，0.9V，1.0V，1.1V。仿真温度点选取为-25℃，0℃，25℃，75℃，125℃，工艺为TT，共构成35个工艺角。所述方法包括以下步骤：S1：通过时序分析工具获取指定电路的时序报表，从中提取路径拓扑信息，包括门单元种类，门单元尺寸与对应负载电容序列，并将此路径转化为晶体管级网表，修改该网表中的工艺、电压和温度参数，通过晶体管级仿真工具仿真得到该路径在对应工艺角下的延时信息。例如：首先，通过抽库工具得到0.5V，0.6V，0.7V，0.8V，0.9V，1.0V，1.1V共7个电压点，-25℃，0℃，25℃，75℃，125℃共5个温度点下，工艺为TT时的35个单元库。通过时序分析工具仿真得到上述35个工艺角下的指定电路的路径拓扑信息，包括门单元种类，门单元尺寸与对应负载电容序列。然后将此路径转化为晶体管级网表，修改该网表中的工艺、电压和温度参数，通过晶体管级仿真工具仿真得到该路径在上述35个工艺角下的路径延时信息。S2：将S1步骤中通过晶体管级仿真工具仿真得到的电路在各个工艺角下的路径延时信息作为膨胀卷积神经网络模型的输入，该神经网络通过训练后能够将邻近温度电压组合下的延时相互关联并学习这些延时之间关系，从而得到更为有效的路径延时特征表达。例如：将待预测电路在TT工艺下，0.9V，1.0V，1.1V下3个电压点，-25℃，0℃，25℃，75℃，125℃下5个温度点的共15个工艺角组合下的路径延时值构成膨胀卷积神经网络模型的输入矩阵，其维度为，其中10000为待预测电路的路径总数，15为电压和温度组合数，1为所选用的工艺，即为TT工艺。模型的输出矩阵包含邻近工艺角组合延时关系，其维度为，其中10000为待预测电路的路径总数，128为膨胀卷积神经网络模型输出层的神经元个数，也就是最终的膨胀卷积神经网络抽取出的特征数量。S3：将S1步骤中获取得到的路径拓扑信息，包含门单元种类，门单元尺寸与对应负载电容序列，作为双向长短期记忆神经网络的输入，该神经网络经过训练后能够对路径的拓扑信息进行建模，建立起路径拓扑结构与路径延时之间的联系。例如：首先将待预测电路的路径门单元类型序列和门单元尺寸序列进行字符到整型数的一一映射，之后对序列进行填充，填充后的长度为待预测电路最长路径长度，填充值为0。将路径电容序列进行分桶，再将每个桶内的电容值映射为整型数，同样将路径电容序列填充至统一长度，即电路最长路径级数。最终得到的输入矩阵为，其中10000为待预测电路路径数，3为序列种类数，包含门单元种类，门单元尺寸与对应负载电容序列共3种，40为待预测电路中最长路径级数，即为填充后序列长度。模型的输出矩阵包含路径拓扑信息，其维度为其中10000为待预测电路的路径总数，128为BLSTM模型输出层的神经元个数，也就是最终的BLSTM抽取出的路径拓扑特征数量。S4：将S2步骤中膨胀卷积神经网络模型的输出和S3步骤中双向长短期记忆神经网络的输出进行合并后作为多门控混合专家网络的输入，该模型经过训练后，能够建立起高电压下路径延时信息和拓扑信息同低电压下多个温度点的路径延时之间的关系，实现同时对低电压下多个温度点路径延时的预测。例如：将S2步骤中膨胀卷积神经网络模型的输出和S3步骤中双向长短期记忆神经网络的输出进行合并后作为多门控混合专家网络的输入，该输入矩阵的维度为，门控函数和塔层的个数均为5，专家层的个数设置为8，输出矩阵维度为，即可同时得到0.5V电压下，5个温度点的10000条路径延时预测值。步骤S1具体包括以下步骤：S11：首先，通过抽库工具得到0.5V，0.6V，0.7V，0.8V，0.9V，1.0V，1.1V共7个电压点，-25℃，0℃，25℃，75℃，125℃共5个温度点下，工艺为TT时的35个单元库。设置时序仿真工具运行模式为建立时间时序违规，对电路进行时序分析得到对应的时序报表。时序报表中包含有电路中的部分路径的信息，包括路径的延时，路径中每一级单元的单元类型，单元尺寸和对应负载电容等。随后提取出路径结构，并抽取每条路径中的拓扑信息，包含门单元种类，门单元尺寸与对应负载电容序列。S22：通过时序分析工具将将路径转化为晶体管级网表，最后用晶体管级仿真工具仿真得到路径延时信息，修改该网表中的工艺、电压和温度参数，通过晶体管级仿真工具仿真得到该路径在对应工艺角下的延时信息，提取路径延时结果用于后续步骤中的模型训练与推理中。步骤S2中，假设输入延时数据所在电压为0.9V，1.0V，1.1V，路径数为10000条，电路仿真时的温度种类数为-25℃，0℃，25℃，75℃，125℃共5个温度点，输入样本维度可以表示为。接着改变输入层的维度为以满足卷积神经网络的输入格式需要，输入层维度中的1表示目前的输入电路所采用的工艺为TT。之后把改变维度的输入层接入到8层串行连接的卷积层中。对于每一层卷积层，每层卷积层的滤波器个数设为128个，同时也是卷积层输出层的最后一维维度。卷积核尺寸为4，步长为1。第n层卷积层的膨胀系数为32。之后，卷积层的输出连接展开层作为输入,通过将卷积层输出张量的第二与第三个维度进行展开合并来实现数据降维。经若干层全连接层进行维度变换后，输入到输出层中，其中，每个隐藏层神经元个数均为256个。最后，输出层的输出特征即为最终的膨胀卷积神经网络抽取出的特征，特征数量设为128。抽取得到的最终的延时特征将与S3步骤的输出特征合并作为S4步骤中多门控混合专家网络的输入。步骤S3中，路径拓扑特征包含有门单元种类，门单元尺寸与对应负载电容序列。对于门单元种类和门单元尺寸这两种类别型序列特征，首先通过填充处理解决其序列长度不一致问题，然后将填充后的序列输入到嵌入层中，通过网络学习得到元素的向量表征，负载电容则经过分箱后采用填充操作补齐到统一长度，并采用嵌入层学习向量表达，接着将上述经嵌入层学习后得到的表达进行向量拼接，最后拼接完的向量输入到双向长短期记忆神经网络中进行训练。对于如门单元类型序列、门单元尺寸序列这两种类别变量组成的序列，预处理手段相似。首先对于序列做从字符串到整型数字的变换，之后，对路径的整型值向量进行填补或者截断到统一长度，本小节中采用填补操作且填充值为0，填充后的序列长度为40，即为待预测电路中最长路径级数。对于负载电容组成的连续数值序列，采用分桶的方法首先将连续数值分桶到不同标识中，再把每个桶映射成整形数。其中分桶公式bin如下：bin＝round％v+1 其中round函数代表取整函数，x为负载电容序列中的元素，u代表对元素的放大倍数，也即保留的小数点后的位数，数值为10的整数倍，v则是分桶的数目。该分桶策略可以将负载电容映射到1至v之中，可以看出经过映射后负载电容依旧保持着数据的相对大小关系。之后，采用双向长短期记忆模型神经网络BLSTM抽取路径拓扑特征，先将数据处理成为网络所需输入形式，然后输入到网络中进行训练：首先，输入数据经过嵌入层处理后，数据维度为10000×40×128，其中，10000为样本数量，即输入路径数。40为填充后序列输入长度，即为路径的级数，在这里被统一填充到统一长度，也就是最长输入路径的级数。128代表嵌入层的神经元个数，即序列中元素被表示为向量时的向量维度。随后，将嵌入层的输出作为双向长短期记忆模型神经网络BLSTM的输入，由于双向长短期记忆模型神经网络BLSTM对序列进行双向的学习，hid在数值上等于两倍的隐藏层神经元个数，即为256。最后，在双向LSTM网络之后采用池化层，对序列输出的第二个维度进行降维，降维后的输出向量的维度为10000×128，经过池化层降维的向量输出将会和S2步骤的输出进行合并作为S4中的多门控混合专家网络的输入。步骤S4中，多门控混合专家网络中的专家层能够对不同的任务分别进行学习，门控函数经过网络学习后能够对不同专家赋予不同的权重。此处任务数K为5个，分别为0.5V电压，-25℃，0℃，25℃，75℃，125℃共5个温度点下的路径延时预测任务，则第k个子任务的输出yk由下式决定，其中x为多门控混合专家网络的输入，其维度为，hk为顶层塔函数，fk为共享底层操作函数，gk表示门控函数,Wgk是模型中可学习的权重矩阵参数，该权重矩阵的维度为。其中8是专家网络的个数，256代表输入特征的维度，即S2步骤和S3步骤输出特征合并后的特征个数，softmax函数为归一化指数函数。多门控混合专家网络的网络结构中，输入特征为双向长短期记忆神经网络提取的路径拓扑特征与邻近工艺角组合下的路径延时特征，首先，8个专家层会分别对输入特征进行学习，这些专家层的模型参数是互不共享。其中专家层与塔层的神经元个数均为256。随后，5个门控函数会根据5个温度下的真实标签与预测值的损失函数进行不断调优控制每个专家的权重，之后将8个专家层的输出加权相加便得到了最终输出，其维度为即为0.5V电压，-25℃，0℃，25℃，75℃，125℃共5个温度点下的10000条路径的延时预测结果。
