标题title
安全通信方法、装置及系统
摘要abst
本发明提供了一种安全通信方法、装置及系统，该方法包括：需要登录银行内网系统时，获取用户登录信息并向代理服务器发送握手信息；代理服务器返回VPN身份标识，客户端接收到身份标识后生成客户端随机数。获取U盾中存储的量子密钥和密钥票据；基于量子密钥及客户端随机数生成加密随机数；将加密随机数及密钥票据发送给代理服务器。代理服务器根据密钥票据获取量子密钥，对加密随机数进行解密，解密成功则返回握手认证成功消息；客户端则发送用户登录信息至银行内网系统；银行内网系统根据该用户登录信息进行身份认证；认证通过则向客户端发送身份认证成功消息，客户端登录银行内网系统。应用该方法，可以保证登录银行内网系统的安全性。
权利要求书clms
1.一种安全通信方法，其特征在于，所述方法应用于客户端，所述方法包括：当用户需要登录银行内网系统时，获取所述用户已注册的用于登录所述银行内网系统的用户登录信息，并向预先设置的代理服务器发送握手消息；当接收到所述代理服务器基于所述握手消息反馈的VPN身份标识时，生成与所述代理服务器进行握手认证的客户端随机数；获取已连接的U盾中存储的量子密钥和密钥票据，并基于所述客户端随机数及所述量子密钥，生成加密随机数；将所述加密随机数及所述密钥票据发送至所述代理服务器，触发所述代理服务器基于所述加密随机数及所述密钥票据，对所述客户端进行握手认证；当接收到所述代理服务器发送的握手认证成功消息时，经由所述代理服务器向所述银行内网系统发送所述用户登录信息，触发所述远程服务器对所述用户进行身份认证；当接收到所述银行内网系统经由所述代理服务器反馈的身份认证成功消息时，登录所述远程服务器。2.根据权利要求1所述的方法，其特征在于，所述基于所述客户端随机数及所述量子密钥，生成加密随机数，包括：应用预先设置的摘要算法，对所述客户端随机数进行摘要计算，获得摘要随机数；应用所述量子密钥，对所述摘要随机数进行加密，获得加密随机数。3.根据权利要求1所述的方法，其特征在于，所述经由所述代理服务器向所述银行内网系统发送所述用户登录信息，包括：构建所述客户端与所述代理服务器的连接通道；经由所述连接通道向所述代理服务器发送所述用户登录信息，使得所述代理服务器将所述用户登录信息转发至所述银行内网系统。4.根据权利要求3所述的方法，其特征在于，还包括：应用所述量子密钥对所述用户登录信息进行加密，获得已加密的用户登录信息；将所述已加密的用户登录信息经由所述连接通道发送至所述代理服务器。5.一种安全通信装置，其特征在于，所述装置应用于客户端，所述装置包括：第一发送单元，用于当用户需要登录银行内网系统时，获取所述用户已注册的用于登录所述银行内网系统的用户登录信息，并向预先设置的代理服务器发送握手消息；第一生成单元，用于当接收到所述代理服务器基于所述握手消息反馈的VPN身份标识时，生成与所述代理服务器进行握手认证的客户端随机数；第二生成单元，用于获取已连接的U盾中存储的量子密钥和密钥票据，并基于所述客户端随机数及所述量子密钥，生成加密随机数；第二发送单元，用于将所述加密随机数及所述密钥票据发送至所述代理服务器，触发所述代理服务器基于所述加密随机数及所述密钥票据，对所述客户端进行握手认证；第三发送单元，用于当接收到所述代理服务器发送的握手认证成功消息时，经由所述代理服务器向所述银行内网系统发送所述用户登录信息，触发所述远程服务器对所述用户进行身份认证；登录单元，用于当接收到所述银行内网系统经由所述代理服务器反馈的身份认证成功消息时，登录所述远程服务器。6.一种安全通信方法，其特征在于，所述方法应用于代理服务器，所述方法包括：当接收到客户端方的握手消息时，向所述客户端发送已存储的VPN身份标识；所述VPN身份标识用于标识所述代理服务器在量子认证体系的VPN身份；当接收到所述客户端在接收到所述VPN身份标识后，发送的加密随机数及密钥票据时，获取所述密钥票据对应的量子密钥；应用所述量子密钥对所述加密随机数进行解密，并判断是否解密成功；若解密成功，则向所述客户端发送握手认证成功消息；当接收到所述客户端发送的用于登录银行内网系统的用户登录信息时，将所述用户登录信息发送至所述银行内网系统，并在接收到所述银行内网系统发送的身份认证成功消息时，将所述身份认证成功消息转发至所述客户端，完成与所述客户端的通信过程。7.根据权利要求6所述的方法，其特征在于，所述获取所述密钥票据对应的量子密钥，包括：向预先设置的量子密钥服务中心发送所述携带所述密钥票据的密钥请求；当接收到所述量子密钥服务中心基于的所述密钥请求反馈的票据信息时，获取所述票据信息中包含的所述密钥票据对应的量子密钥。8.根据权利要求7所述的方法，其特征在于，所述将所述用户登录信息发送至所述银行内网系统，包括：检验所述用户登录信息是否已加密；若所述用户登录信息已加密，则应用所述量子密钥对所述用户登录信息进行解密，获得已解密的用户登录信息；基于预先设置的Radius协议，将所述已解密的用户登录信息发送至所述银行内网系统。9.一种安全通信装置，其特征在于，所述装置应用于代理服务器，所述装置包括：第四发送单元，用于当接收到客户端方的握手消息时，向所述客户端发送已存储的VPN身份标识；所述VPN身份标识用于标识所述代理服务器在量子认证体系的VPN身份；获取单元，用于当接收到所述客户端在接收到所述VPN身份标识后，发送的加密随机数及密钥票据时，获取所述密钥票据对应的量子密钥；解密单元，用于应用所述量子密钥对所述加密随机数进行解密，并判断是否解密成功；第五发送单元，用于若解密成功，则向所述客户端发送握手认证成功消息；转发单元，用于当接收到所述客户端发送的用于登录银行内网系统的用户登录信息时，将所述用户登录信息发送至所述银行内网系统，并在接收到所述银行内网系统发送的身份认证成功消息时，将所述身份认证成功消息转发至所述客户端，完成与所述客户端的通信过程。10.一种安全通信系统，其特征在于，包括：客户端、代理服务器、U盾、银行内网系统及量子密钥服务中心；所述客户端，用于当用户需要登录所述银行内网系统时，与所述代理服务器进行通信，并执行如权利要求1～4任意一项所述的安全通信方法；所述代理服务器，用于当所述用户需要经由所述客户端登录所述银行内网系统时，与所述客户端进行安全通信，并执行如权利要求6～8任意一项所述的安全通信方法；所述U盾，用于存储量子密钥及量子密钥对应的密钥票据，并在所述客户端与所述代理服务器进行安全通信时，向所述客户端提供所述量子密钥及量子密钥对应的票据；所述银行内网系统，用于接收所述客户端经由所述代理服务器发送的用户登录信息，并基于所述用户登录信息对所述用户进行身份认证；在通过对所述用户的身份认证后，经由所述代理服务器向所述客户端发送身份认证成功消息；所述量子密钥服务中心，用于接收代理服务器发送的密钥请求，并解析所述密钥请求获得密钥票据；获取密钥票据对应的量子密钥，并将所述量子密钥嵌入票据信息中发送至所述代理服务器。
说明书desc
技术领域本发明涉及通信技术领域，特别是涉及一种安全通信方法、装置及系统。背景技术随着计算机网络技术的快速发展，网络信息的安全性保障直接影响用户个人的隐私和财产安全。当金融行业中，当运维人员需要对银行内网系统进行VPN远程登录进行远程的运维操控时，需要应用客户端通过互联网到达银行内网系统的防火墙访问银行内网系统。由于现有技术中运维人员应用的是VPN远程登录，在需要进行远程运维时，只限于应急的时候临时开通接入内网系统的权限。即使在开通接入内网系统权限的过程中进行运维操作，客户端在登录以及操作过程中，也会存在被监听风险，无法保证通信过程中的安全性。发明内容有鉴于此，本发明提供一种安全通信方法，通过该方法，可以保证用户在需要访问银行内网系统时，有效对用户进行安全认证。一种安全通信方法，包括：当用户需要登录银行内网系统时，获取所述用户已注册的用于登录所述银行内网系统的用户登录信息，并向预先设置的代理服务器发送握手消息；当接收到所述代理服务器基于所述握手消息反馈的VPN身份标识时，生成与所述代理服务器进行握手认证的客户端随机数；获取已连接的U盾中存储的量子密钥和密钥票据，并基于所述客户端随机数及所述量子密钥，生成加密随机数；将所述加密随机数及所述密钥票据发送至所述代理服务器，触发所述代理服务器基于所述加密随机数及所述密钥票据，对所述客户端进行握手认证；当接收到所述代理服务器发送的握手认证成功消息时，经由所述代理服务器向所述银行内网系统发送所述用户登录信息，触发所述远程服务器对所述用户进行身份认证；当接收到所述银行内网系统经由所述代理服务器反馈的身份认证成功消息时，登录所述远程服务器。上述的方法，可选的，所述基于所述客户端随机数及所述量子密钥，生成加密随机数，包括：应用预先设置的摘要算法，对所述客户端随机数进行摘要计算，获得摘要随机数；应用所述量子密钥，对所述摘要随机数进行加密，获得加密随机数。上述的方法，可选的，所述经由所述代理服务器向所述银行内网系统发送所述用户登录信息，包括：构建所述客户端与所述代理服务器的连接通道；经由所述连接通道向所述代理服务器发送所述用户登录信息，使得所述代理服务器将所述用户登录信息转发至所述银行内网系统。上述的方法，可选的，还包括：应用所述量子密钥对所述用户登录信息进行加密，获得已加密的用户登录信息；将所述已加密的用户登录信息经由所述连接通道发送至所述代理服务器。一种安全通信装置，所述装置应用于客户端，所述装置包括：第一发送单元，用于当用户需要登录银行内网系统时，获取所述用户已注册的用于登录所述银行内网系统的用户登录信息，并向预先设置的代理服务器发送握手消息；第一生成单元，用于当接收到所述代理服务器基于所述握手消息反馈的VPN身份标识时，生成与所述代理服务器进行握手认证的客户端随机数；第二生成单元，用于获取已连接的U盾中存储的量子密钥和密钥票据，并基于所述客户端随机数及所述量子密钥，生成加密随机数；第二发送单元，用于将所述加密随机数及所述密钥票据发送至所述代理服务器，触发所述代理服务器基于所述加密随机数及所述密钥票据，对所述客户端进行握手认证；第三发送单元，用于当接收到所述代理服务器发送的握手认证成功消息时，经由所述代理服务器向所述银行内网系统发送所述用户登录信息，触发所述远程服务器对所述用户进行身份认证；登录单元，用于当接收到所述银行内网系统经由所述代理服务器反馈的身份认证成功消息时，登录所述远程服务器。一种安全通信方法，所述方法应用于代理服务器，所述方法包括：当接收到客户端方的握手消息时，向所述客户端发送已存储的VPN身份标识；所述VPN身份标识用于标识所述代理服务器在量子认证体系的VPN身份；当接收到所述客户端在接收到所述VPN身份标识后，发送的加密随机数及密钥票据时，获取所述密钥票据对应的量子密钥；应用所述量子密钥对所述加密随机数进行解密，并判断是否解密成功；若解密成功，则向所述客户端发送握手认证成功消息；当接收到所述客户端发送的用于登录银行内网系统的用户登录信息时，将所述用户登录信息发送至所述银行内网系统，并在接收到所述银行内网系统发送的身份认证成功消息时，将所述身份认证成功消息转发至所述客户端，完成与所述客户端的通信过程。上述的方法，可选的，所述获取所述密钥票据对应的量子密钥，包括：向预先设置的量子密钥服务中心发送所述携带所述密钥票据的密钥请求；当接收到所述量子密钥服务中心基于的所述密钥请求反馈的票据信息时，获取所述票据信息中包含的所述密钥票据对应的量子密钥。上述的方法，可选的，所述将所述用户登录信息发送至所述银行内网系统，包括：检验所述用户登录信息是否已加密；若所述用户登录信息已加密，则应用所述量子密钥对所述用户登录信息进行解密，获得已解密的用户登录信息；基于预先设置的Radius协议，将所述已解密的用户登录信息发送至所述银行内网系统。一种安全通信装置，所述装置应用于代理服务器，所述装置包括：第四发送单元，用于当接收到客户端方的握手消息时，向所述客户端发送已存储的VPN身份标识；所述VPN身份标识用于标识所述代理服务器在量子认证体系的VPN身份；获取单元，用于当接收到所述客户端在接收到所述VPN身份标识后，发送的加密随机数及密钥票据时，获取所述密钥票据对应的量子密钥；解密单元，用于应用所述量子密钥对所述加密随机数进行解密，并判断是否解密成功；第五发送单元，用于若解密成功，则向所述客户端发送握手认证成功消息；转发单元，用于当接收到所述客户端发送的用于登录银行内网系统的用户登录信息时，将所述用户登录信息发送至所述银行内网系统，并在接收到所述银行内网系统发送的身份认证成功消息时，将所述身份认证成功消息转发至所述客户端，完成与所述客户端的通信过程。一种安全通信系统，包括：客户端、代理服务器、U盾、银行内网系统及量子密钥服务中心；所述客户端，用于当用户需要登录所述银行内网系统时，与所述代理服务器进行通信，并执行上述应用于客户端的安全通信方法；所述代理服务器，用于当所述用户需要经由所述客户端登录所述银行内网系统时，与所述客户端进行安全通信，并执行上述应用于代理服务器的安全通信方法；所述U盾，用于存储量子密钥及量子密钥对应的密钥票据，并在所述客户端与所述代理服务器进行安全通信时，向所述客户端提供所述量子密钥及量子密钥对应的票据；所述银行内网系统，用于接收所述客户端经由所述代理服务器发送的用户登录信息，并基于所述用户登录信息对所述用户进行身份认证；在通过对所述用户的身份认证后，经由所述代理服务器向所述客户端发送身份认证成功消息；所述量子密钥服务中心，用于接收代理服务器发送的密钥请求，并解析所述密钥请求获得密钥票据；获取密钥票据对应的量子密钥，并将所述量子密钥嵌入票据信息中发送至所述代理服务器。与现有技术相比，本发明包括以下优点：本发明提供了一种安全通信方法，包括：当需要登录银行内网系统时，获取用户登录信息，并向代理服务器发送握手信息；代理服务器根据该握手消息返回VPN身份标识，客户端在接收到该身份标识后生成客户端随机数，获取U盾中存储的量子密钥和密钥票据；并基于量子密钥及客户端随机数，生成加密随机数；将加密随机数及密钥票据发送给代理服务器。代理服务器根据密钥票据获取量子密钥对加密随机数进行解密，解密成功则返回握手认证成功消息；客户端接到消息后经由代理服务器发送用户登录信息至银行内网系统；银行内网系统根据该用户登录信息进行身份认证；认证通过经由代理服务器向客户端发送身份认证成功消息，客户端根据该消息登录银行内网系统。应用本发明提供的方法，可以保证登录银行内网系统的安全性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据提供的附图获得其他的附图。图1为本发明实施例提供的一种安全通信方法的方法流程图；图2为本发明实施例提供的一种安全通信装置的装置结构图；图3为本发明实施例提供的一种安全通信方法的又一方法流程图；图4为本发明实施例提供的一种安全通信方法的方法示意图；图5为本发明实施例提供的一种安全通信装置的又一装置结构图；图6为本发明实施例提供的一种安全通信系统的系统结构图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本申请中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本发明可用于众多通用或专用的计算装置环境或配置中。例如：个人计算机、服务器计算机、手持设备或便携式设备、平板型设备、多处理器装置、包括以上任何装置或设备的分布式计算环境等等。在一方面，本发明实施例提供了一种安全通信方法，该方法可以应用在客户端中，所述方法的方法流程图如图1所示，具体包括：S101：当用户需要登录银行内网系统时，获取所述用户已注册的用于登录所述银行内网系统的用户登录信息，并向预先设置的代理服务器发送握手消息。在本发明实施例中，客户端实际为SSL VPN客户端。该用户登录信息中包含用户登录银行内网系统的账号和密码等，用户在登录银行内网系统前已提交远程运维申请，通过该申请获取远程登录银行内网系统的账号和密码。代理服务器实际为SSL VPN服务器。S102：当接收到所述代理服务器基于所述握手消息反馈的VPN身份标识时，生成与所述代理服务器进行握手认证的客户端随机数。在本发明实施例中，VPN身份标识为量子密钥应用设备QKUD ID，其用于表明在量子认证体系种标明代理服务器的身份，客户端在确定代理服务器的身份后，生成客户端随机数，通过随机数与代理服务器进行通信。S103：获取已连接的U盾中存储的量子密钥和密钥票据，并基于所述客户端随机数及所述量子密钥，生成加密随机数。在本发明实施例中，该U盾可以是U盾或移动硬盘等。用户在需要登录银行内网系统前，先登录预先设置的量子密钥充注机，通过该量子密钥充注机向该U盾充注量子密钥以及密钥票据。其中，充注密钥的过程中，该量子密钥充注机通过量子通道连接量子密钥服务中心，获取量子密钥服务中心实时生成的量子密钥。通过量子密钥对客户端生成的客户端随机数进行加密，获得加密随机数。若加密随机数在传输过程中被篡改，则服务器无法对其进行解密。需要说明的是，该量子密钥为对称密钥，其加密密钥以及解密密钥为同一个密钥。S104：将所述加密随机数及所述密钥票据发送至所述代理服务器，触发所述代理服务器基于所述加密随机数及所述密钥票据，对所述客户端进行握手认证。在本发明实施例中，密钥票据为该量子密钥的密钥标识信息，代理服务器可通过该密钥票据确定该加密随机数所使用的量子密钥，并通过该量子密钥对该加密随机数进行解密。当代理服务器成功对加密随机数进行解密，则表征代理服务器与该客户端握手成功，代理服务器向客户端发送握手认证成功消息。S105：当接收到所述代理服务器发送的握手认证成功消息时，经由所述代理服务器向所述银行内网系统发送所述用户登录信息，触发所述远程服务器对所述用户进行身份认证。在本发明实施例中，当客户端接收到该握手认证成功消息时，需要银行内网系统对用户信息进行进一步的认证，因此可以通过该代理服务器向银行内网系统发送用户登录信息。S106：当接收到所述银行内网系统经由所述代理服务器反馈的身份认证成功消息时，登录所述远程服务器。在本发明实施例中，当银行内网系统成功验证用户登录信息中的账号和密码等信息后，通过代理服务器反馈身份认证成功消息，客户端根据该身份认证成功消息，直接接入银行内网系统。本发明实施例提供的安全通信方法中，用户通过客户端需要远程登录银行内网系统时，获取用户已在该银行内网系统注册的用户登录信息，并向代理服务器发送握手消息。当接收到代理服务器发送的VPN身份标识时，确定代理服务器在量子认证体系中标识的VPN身份，并生成客户端随机数，开始与代理服务器进行握手认证。用户在登录客户端时，将U盾插入客户端，当需要进行握手认证时，客户端读取U盾中已存储的量子密钥以及该量子密钥的密钥票据，该密钥票据为该量子密钥的索引。通过量子密钥实现对客户端随机的加密，获得机密随机数。将该加密随机数以及密钥票据发送给代理服务器，代理服务器通过该密钥票据索引得到量子密钥，以通过量子密钥对加密随机数进行解密，解密成功，代理服务器向客户端发送握手认证成功消息。客户端在结束到握手认证成功消息后，通过代理服务器向该银行内网系统发送用户登录信息，由银行内网系统对该用户进行进一步的身份认证。当银行内网系统成功认证，则该用户可以通过客户端接入银行内网系统。基于上述实施例提供的方法，该方法可以应用于计算机请求登录银行内网系统的实施场景中，具体的：当用户需要经过计算机登录银行的内网系统时，在计算机上插入U盾，该U盾已在量子密钥充注机充注量子密钥以及量子密钥对应的密钥票据。用户在计算机上输入登录银行内网系统的账户以及密码等用户登录信息，计算机根据用户请求确定用户需要登录银行内网系统，获取用户输入的用户登录信息，并向SSL VPN服务器发送握手消息。SSL VPN服务器向计算机反馈QKUD ID，该QKUD ID用于标识SSL VPN服务器在量子体系中的VPN身份。客户端在接收到QKUD ID后，生成随机数，并连接用户已插入在计算内的U盾，从U盾中获取量子密钥和密钥票据，应用量子密钥对随机数进行加密，并将加密随机数及密钥票据发送给SSL VPN服务器。SSL VPN服务器以该密钥票据作为量子密钥票据的索引获取量子密钥对该加密随机数进行解密，解密成功后向计算机发送握手认证成功消息；计算机在接收到握手认证成功消息后，向SSL VPN服务器发送用户登录信息，SSL VPN服务器将该用户登录信息发送至银行内网系统，银行内网系统根据该用户登录信息对用户进行身份认证，认证成功后，用户可以经由计算机登录银行内网系统。应用本发明实施例提供的方法，在接入银行内网系统预先与代理服务器基于量子密钥进行安全通信，再由银行内网系统进行进一步的身份认证，进一步保证登录银行内网系统的安全性。本发明实施例提供的方法中，基于上述S103的内容，所述基于所述客户端随机数及所述量子密钥，生成加密随机数，具体可以包括：应用预先设置的摘要算法，对所述客户端随机数进行摘要计算，获得摘要随机数；应用所述量子密钥，对所述摘要随机数进行加密，获得加密随机数。本发明实施例提供的安全通信方法中，该摘要算法可以是SM3，应用摘要算法将客户端随机数转换成固定长度的数据，转换后的客户端随机数为摘要随机数，应用量子密钥对该摘要随机数进行加密，获得加密随机数。可以理解的是，客户端对客户端随机数进行摘要并加密后，代理服务器通过密钥票据获得量子密钥对加密随机数进行解密后，获得该摘要随机数，应用反摘要算法获得该客户端随机数。代理服务器可以通过该客户端随机数与客户端进行后续通信的验证。应用本发明实施例提供的方法，通过摘要算法和量子密钥对客户端随机数进行消息摘要和加密，保证客户端随机数在传输时的安全性。本发明实施例提供的方法中，基于上述S105的内容，所述经由所述代理服务器向所述银行内网系统发送所述用户登录信息，具体可以包括：构建所述客户端与所述代理服务器的连接通道；经由所述连接通道向所述代理服务器发送所述用户登录信息，使得所述代理服务器将所述用户登录信息转发至所述银行内网系统。在本发明实施例中，在实现客户端与代理服务器之间的握手认证后，确定客户端与代理服务器之间能够进行安全通信，并构建客户端与代理服务器之间的连接通道，通过该连接通过可以安全将用户登录信息传输至代理服务器。本发明实施例提供的方法中，在连接通道后，经由该连接通道向代理服务器发送用户登录信息的过程具体还可以包括：应用所述量子密钥对所述用户登录信息进行加密，获得已加密的用户登录信息；将所述已加密的用户登录信息经由所述连接通道发送至所述代理服务器。可以理解的是，客户端与代理服务器握手认证成功后，可以将该量子密钥作为客户端与代理服务器进行当前通信过程中预定的密钥，在通信时，客户端可以应用该量子密钥对需要传输至代理服务器的信息进行加密。因此，在需要经过代理服务器向银行内网系统发送用户登录信息时，可以先对用户登录信息进行加密后再进行发送，代理服务器在接收到已加密的用户登录信息后，应用量子密钥对其进行解密后再将该用户登录信息发送至银行内网系统。上述各个实施例的具体实施过程及其衍生方式，均在本发明的保护范围之内。与图1所述的方法相对应，本发明实施例还提供了一种安全通信装置，用于对图1中方法的具体实现，本发明实施例提供的安全通信装置应用于客户端中，其结构示意图如图2所示，具体包括：第一发送单元201，用于当用户需要登录银行内网系统时，获取所述用户已注册的用于登录所述银行内网系统的用户登录信息，并向预先设置的代理服务器发送握手消息；第一生成单元202，用于当接收到所述代理服务器基于所述握手消息反馈的VPN身份标识时，生成与所述代理服务器进行握手认证的客户端随机数；第二生成单元203，用于获取已连接的U盾中存储的量子密钥和密钥票据，并基于所述客户端随机数及所述量子密钥，生成加密随机数；第二发送单元204，用于将所述加密随机数及所述密钥票据发送至所述代理服务器，触发所述代理服务器基于所述加密随机数及所述密钥票据，对所述客户端进行握手认证；第三发送单元205，用于当接收到所述代理服务器发送的握手认证成功消息时，经由所述代理服务器向所述银行内网系统发送所述用户登录信息，触发所述远程服务器对所述用户进行身份认证；登录单元206，用于当接收到所述银行内网系统经由所述代理服务器反馈的身份认证成功消息时，登录所述远程服务器。本发明实施例提供的安全通信装置中，用户通过客户端需要远程登录银行内网系统时，获取用户已在该银行内网系统注册的用户登录信息，并向代理服务器发送握手消息。当接收到代理服务器发送的VPN身份标识时，确定代理服务器在量子认证体系中标识的VPN身份，并生成客户端随机数，开始与代理服务器进行握手认证。用户在登录客户端时，将U盾插入客户端，当需要进行握手认证时，客户端读取U盾中已存储的量子密钥以及该量子密钥的密钥票据，该密钥票据为该量子密钥的索引。通过量子密钥实现对客户端随机的加密，获得机密随机数。将该加密随机数以及密钥票据发送给代理服务器，代理服务器通过该密钥票据索引得到量子密钥，以通过量子密钥对加密随机数进行解密，解密成功，代理服务器向客户端发送握手认证成功消息。客户端在结束到握手认证成功消息后，通过代理服务器向该银行内网系统发送用户登录信息，由银行内网系统对该用户进行进一步的身份认证。当银行内网系统成功认证，则该用户可以通过客户端接入银行内网系统。应用本发明实施例提供的装置，在接入银行内网系统预先与代理服务器基于量子密钥进行安全通信，再由银行内网系统进行进一步的身份认证，进一步保证登录银行内网系统的安全性。在另一方面，本发明实施例提供了一种安全通信方法，该方法可以应用在代理服务器中，所述方法的方法流程图如图3所示，具体包括：S301：当接收到客户端方的握手消息时，向所述客户端发送已存储的VPN身份标识。其中，所述VPN身份标识用于标识所述代理服务器在量子认证体系的VPN身份。在本发明实施例中，与上述S101相对应的，客户端在需要登录银行内网系统时，向代理服务器发送握手消息，代理服务器在接收到握手消息后，向客户端发送VPN身份标识，以向客户端标明代理服务器的身份。S302：当接收到所述客户端在接收到所述VPN身份标识后，发送的加密随机数及密钥票据时，获取所述密钥票据对应的量子密钥。在本发明实施例中，客户端在接收到VPN身份标识后，生成客户端随机数，并对随机数进行加密，将加密随机数及密钥票据发送给代理服务器。代理服务器在接收到密钥票据以及加密随机数后，以密钥票据为索引，获取对加密随机数进行解密的量子密钥。S303：应用所述量子密钥对所述加密随机数进行解密，并判断是否解密成功。在本发明实施例中，应用代理服务器获得的量子密钥对加密随机数进行加密，若能解密成功，则表征加密随机数在发送过程中并未被篡改；反之则证明加密随机数在发送过程中可能已经被篡改。S304：若解密成功，则向所述客户端发送握手认证成功消息。在本发明实施例中，若成功解密，则表征客户端与代理服务器之间能够进行安全通信。S305：当接收到所述客户端发送的用于登录银行内网系统的用户登录信息时，将所述用户登录信息发送至所述银行内网系统，并在接收到所述银行内网系统发送的身份认证成功消息时，将所述身份认证成功消息转发至所述客户端，完成与所述客户端的通信过程。在本发明实施例中，在确保客户端与代理服务器能够安全通信后，由代理服务器接收客户端发送的用户登录信息，以保证用户登录信息在传输过程的安全性，再由代理服务器向银行内网系统转发该用户登录信息，银行内网系统根据该用户登录信息对该用户成功进行身份认证后，代理服务器将身份认证成功消息转发给客户端。可以理解的是，本发明的客户端与代理服务器在进行通信的过程中，需要先进行握手认证，由客户端向代理服务器发出握手认证，代理服务器则对握手认证消息进行响应并反馈其身份标识，使得客户端确认代理服务器的身份，并生成加密随机数，将加密随机数以及密钥票据发送给代理服务器。代理服务器则以密钥票据作为索引获取对加密随机数进行解密的量子密钥。验证该量子密钥是否能够对该加密随机数进行解密，若可以，则表征客户端与代理服务器可以进行安全通信，代理服务器则向客户端反馈握手认证成功消息，使得该客户端向代理服务器发送用户登录信息，进行第二次认证。代理服务器将该用户登录信息转发给银行内网系统，银行内网系统对客户端的用户进行身份认证，认证成功，则该代理服务器将该银行内网系统发送的身份认证成功消息发送给客户端，该身份认证成功消息表征第二次的认证已成功。客户端可直接登录该银行内网系统执行运维操作。应用本发明实施例提供的方法，代理服务器与客户端之间通过量子密钥的方式进行握手认证，保证两者之间通行的安全性。本发明实施例提供的方法中，基于上述S102的内容，所述获取所述密钥票据对应的量子密钥，具体可以包括：向预先设置的量子密钥服务中心发送所述携带所述密钥票据的密钥请求；当接收到所述量子密钥服务中心基于的所述密钥请求反馈的票据信息时，获取所述票据信息中包含的所述密钥票据对应的量子密钥。可以理解的是，量子密钥服务中心用于产生并管理量子密钥，每个量子密钥均有其对应的密钥票据，当代理服务器需要获取指定的密钥时，可将密钥票据作为索引，请求量子密钥服务中心查找对加密随机数进行解密的量子米亚。量子密钥服务中心根据代理客户端的请求查找到密钥票据对应的量子密钥后，将该量子密钥嵌入票据信息返回给代理服务器，代理服务器则可以从该票据信息中获取该密钥票据对应的量子密钥。本发明中，通过量子服务中心获得量子密钥，进行一步保证客户端与代理服务器之间进行通信的可靠性。在本发明实施例提供的方法中，成功与客户端进行握手认证后，需要进入对客户端的下一步认证，即接收客户端发送的用户登录信息，通过由银行内网系统通过用户登录信息对客户端的用户进行身份认证。具体的，该用户登录信息由代理服务器进行转发至银行内网系统，具体转发过程可以包括：检验所述用户登录信息是否已加密；若所述用户登录信息已加密，则应用所述量子密钥对所述用户登录信息进行解密，获得已解密的用户登录信息；基于预先设置的Radius协议，将所述已解密的用户登录信息发送至所述银行内网系统。可以理解的是，客户端在向代理服务器发送用户登录信息时，可以对该用户登录信息进行加密，若客户端已经对该用户登录信息进行加密，则该代理服务器所接收到的用户登录信息为该客户端发送的已加密的用户登录信息。由于客户端与代理服务器前期已经进行握手认证，并确定两者之间的交互密钥为该量子密钥，因此，代理服务器在确定用户登录信息已加密后，应用该量子密钥对该用户登录信息进行解密，以将已解密的用户登录信息发送给银行内网系统。本发明实施例提供的方法，客户端在向代理服务器时可以将用户登录信息进行加密传输，以保证信息传输过程的安全性。基于上述实施例S101～S106以及S301～S305的过程，参考图4，本发明实施例提供的安全通信的具体过程可以包括：1、客户端获取用户的用户登录信息，向代理服务器发送握手消息；2、代理服务器基于该握手消息，向客户端发送VPN身份标识；3、客户端在接收到VPN身份标识后，生成客户端随机数；4、客户端获取U盾中存储的量子密钥和密钥票据；5、客户端应用SM3摘要算法对客户端进行摘要计算，获得摘要随机数，并应用量子密钥对摘要随机数进行加密，获得加密随机数；6、客户端将加密随机数及密钥票据发送至代理服务器；7、代理服务器基于密钥票据向量子密钥服务中心发送密钥请求；8、量子密钥服务中心返回密钥票据对应的量子密钥；9、代理服务器应用量子密钥对加密随机数进行解密，并在成功解密后返回握手认证成功消息；10、客户端在接收到握手认证成功消息后，向代理服务器发送用户登录信息；11、代理服务器转发用户登录信息至银行内网系统；12、银行内网系统根据用户登录信息对客户端的用户进行身份认证，并在通过身份认证后向代理服务器发送身份认证成功消息；13、代理服务器转发身份认证成功消息至客户端；14、客户端根据该身份认证成功消息登录银行内网系统。基于上述实施例提供的方法，用户需要进行远程登录银行内网系统时，经过量子密钥加密的形式与代理服务器进行安全认证，保障客户端与代理服务器之间的安全通信，再进一步由银行内网系统对用户身份进行认证，通过银行内网系统授予用户登录的权利，进一步保证用户登录银行内网系统的安全性。与图3所述的方法相对应，本发明实施例还提供了一种安全通信装置，用于对图3中方法的具体实现，本发明实施例提供的安全通信装置应用于代理服务器中，其结构示意图如图5所示，具体包括：第四发送单元501，用于当接收到客户端方的握手消息时，向所述客户端发送已存储的VPN身份标识；所述VPN身份标识用于标识所述代理服务器在量子认证体系的VPN身份；获取单元502，用于当接收到所述客户端在接收到所述VPN身份标识后，发送的加密随机数及密钥票据时，获取所述密钥票据对应的量子密钥；解密单元503，用于应用所述量子密钥对所述加密随机数进行解密，并判断是否解密成功；第五发送单元504，用于若解密成功，则向所述客户端发送握手认证成功消息；转发单元505，用于当接收到所述客户端发送的用于登录银行内网系统的用户登录信息时，将所述用户登录信息发送至所述银行内网系统，并在接收到所述银行内网系统发送的身份认证成功消息时，将所述身份认证成功消息转发至所述客户端，完成与所述客户端的通信过程。本发明提供的装置中，客户端与代理服务器在进行通信的过程中，需要先进行握手认证，由客户端向代理服务器发出握手认证，代理服务器则对握手认证消息进行响应并反馈其身份标识，使得客户端确认代理服务器的身份，并生成加密随机数，将加密随机数以及密钥票据发送给代理服务器。代理服务器则以密钥票据作为索引获取对加密随机数进行解密的量子密钥。验证该量子密钥是否能够对该加密随机数进行解密，若可以，则表征客户端与代理服务器可以进行安全通信，代理服务器则向客户端反馈握手认证成功消息，使得该客户端向代理服务器发送用户登录信息，进行第二次认证。代理服务器将该用户登录信息转发给银行内网系统，银行内网系统对客户端的用户进行身份认证，认证成功，则该代理服务器将该银行内网系统发送的身份认证成功消息发送给客户端，该身份认证成功消息表征第二次的认证已成功。客户端可直接登录该银行内网系统执行运维操作。应用本发明实施例提供的装置，代理服务器与客户端之间通过量子密钥的方式进行握手认证，保证两者之间通行的安全性。以上本发明实施例公开的安全通信装置中各个单元的具体工作过程，可参见本发明上述实施例公开的安全通信方法中的对应内容，这里不再进行赘述。参考图6，本发明提供了一种安全通信系统，该系统包括：客户端601、代理服务器602、U盾603、银行内网系统604及量子密钥服务中心605；所述客户端601，用于当用户需要登录所述银行内网系统604时，与所述代理服务器602进行通信，并执行下述应用于客户端601的安全通信方法：当用户需要登录银行内网系统时，获取所述用户已注册的用于登录所述银行内网系统的用户登录信息，并向预先设置的代理服务器发送握手消息；当接收到所述代理服务器基于所述握手消息反馈的VPN身份标识时，生成与所述代理服务器进行握手认证的客户端随机数；获取已连接的U盾中存储的量子密钥和密钥票据，并基于所述客户端随机数及所述量子密钥，生成加密随机数；将所述加密随机数及所述密钥票据发送至所述代理服务器，触发所述代理服务器基于所述加密随机数及所述密钥票据，对所述客户端进行握手认证；当接收到所述代理服务器发送的握手认证成功消息时，经由所述代理服务器向所述银行内网系统发送所述用户登录信息，触发所述远程服务器对所述用户进行身份认证；当接收到所述银行内网系统经由所述代理服务器反馈的身份认证成功消息时，登录所述远程服务器。上述的方法，可选的，所述基于所述客户端随机数及所述量子密钥，生成加密随机数，包括：应用预先设置的摘要算法，对所述客户端随机数进行摘要计算，获得摘要随机数；应用所述量子密钥，对所述摘要随机数进行加密，获得加密随机数。上述的方法，可选的，所述经由所述代理服务器向所述银行内网系统发送所述用户登录信息，包括：构建所述客户端与所述代理服务器的连接通道；经由所述连接通道向所述代理服务器发送所述用户登录信息，使得所述代理服务器将所述用户登录信息转发至所述银行内网系统。上述的方法，可选的，还包括：应用所述量子密钥对所述用户登录信息进行加密，获得已加密的用户登录信息；将所述已加密的用户登录信息经由所述连接通道发送至所述代理服务器。所述代理服务器602，用于当所述用户需要经由所述客户端601登录所述银行内网系统604时，与所述客户端601进行安全通信，并执行下述应用于所述代理服务器602的安全通信方法：当接收到客户端方的握手消息时，向所述客户端发送已存储的VPN身份标识；所述VPN身份标识用于标识所述代理服务器在量子认证体系的VPN身份；当接收到所述客户端在接收到所述VPN身份标识后，发送的加密随机数及密钥票据时，获取所述密钥票据对应的量子密钥；应用所述量子密钥对所述加密随机数进行解密，并判断是否解密成功；若解密成功，则向所述客户端发送握手认证成功消息；当接收到所述客户端发送的用于登录银行内网系统的用户登录信息时，将所述用户登录信息发送至所述银行内网系统，并在接收到所述银行内网系统发送的身份认证成功消息时，将所述身份认证成功消息转发至所述客户端，完成与所述客户端的通信过程。上述的方法，可选的，所述获取所述密钥票据对应的量子密钥，包括：向预先设置的量子密钥服务中心发送所述携带所述密钥票据的密钥请求；当接收到所述量子密钥服务中心基于的所述密钥请求反馈的票据信息时，获取所述票据信息中包含的所述密钥票据对应的量子密钥。上述的方法，可选的，所述将所述用户登录信息发送至所述银行内网系统，包括：检验所述用户登录信息是否已加密；若所述用户登录信息已加密，则应用所述量子密钥对所述用户登录信息进行解密，获得已解密的用户登录信息；基于预先设置的Radius协议，将所述已解密的用户登录信息发送至所述银行内网系统。所述U盾603，用于存储量子密钥及量子密钥对应的密钥票据，并在所述客户端601与所述代理服务器602进行安全通信时，向所述客户端601提供所述量子密钥及量子密钥对应的票据；所述银行内网系统604，用于接收所述客户端601经由所述代理服务器602发送的用户登录信息，并基于所述用户登录信息对所述用户进行身份认证；在通过对所述用户的身份认证后，经由所述代理服务器602向所述客户端602发送身份认证成功消息；所述量子密钥服务中心605，用于接收代理服务器602发送的密钥请求，并解析所述密钥请求获得密钥票据；获取密钥票据对应的量子密钥，并将所述量子密钥嵌入票据信息中发送至所述代理服务器602。本发明实施例提供的安全通信系统中，在用户需要登录银行内网系统604时，需要经过两次认证，第一次认证是客户端601与代理服务器602进行的握手认证。在握手认证过程中应用量子密钥实现客户端601与代理服务器602之间的安全通信，在进行握手认证之前，U盾603在量子密钥充注机上充注量子密钥及其对应的密钥票据，用户在需要登录内网604时，在客户端601上插入U盾603。客户端601在获取用户登录信息并向代理服务器602发送握手消息后，接收代理服务器602发送的VPN身份标识，客户端601根据该VPN身份标识确认代理服务器的身份，并生成客户端随机数。对客户端随机数进行摘要计算后，应用量子密钥进行加密，获得加密随机数。客户端601将加密随机数及密钥票据发给代理服务器602，代理服务器602通过密钥票据从量子密钥服务中心605获取量子密钥对加密随机数进行解密。解密成功后，代理服务器602向客户端601发送握手认证成功消息。客户端601在接收到该消息后，进入第二次认证过程，客户端601向代理服务器602发送用户登录信息，由代理服务器602代为转发至银行内网系统604；银行内网系统604根据该用户登录信息对用户进行身份认证，并在认证成功后，向代理服务器602发送身份认证成功消息，代理服务器602将该身份认证成功消息转发给客户端601，客户端601根据该消息成功登录银行内网系统604。应用本发明实施例提供的系统，在需要登录银行内网系统时，需要应用量子密钥进行握手认证后，再对用户进行身份认证，保证客户端登录银行内网系统的安全性。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于系统或系统实施例而言，由于其基本相似于方法实施例，所以描述得比较简单，相关之处参见方法实施例的部分说明即可。以上所描述的系统及系统实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。专业人员还可以进一步意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、计算机软件或者二者的结合来实现。为了清楚地说明硬件和软件的可互换性，在上述说明中已经按照功能一般性地描述了各示例的组成及步骤。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本发明的范围。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本发明。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本发明的精神或范围的情况下，在其它实施例中实现。因此，本发明将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
