标题title
一种基于无信号灯路口的自主路口管理系统及方法
摘要abst
本申请提供一种基于无信号灯路口的自主路口管理系统及方法，利用设置在无信号灯路口的各个方向的道路处的感知单元构成驾驶接管区域，对驶入其中的车辆进行管理，彻底接管车辆的行驶控制权限，以便为这些受控车辆规划行车轨迹，随后下发至各受控车辆予以闭环跟踪执行。中心处理设备对驶入驾驶接管区域的车辆进行批次划分，并控制同一批次的各个车辆在第一阶段内保持当前车道内直线前行，在第二阶段内协同驶过无信号灯路口，在第三阶段内保持匀速直线运行。通过将车辆进行批次划分，以便控制每个批次内的多个车辆进行协同运行，这样可以考虑到同一批次的多个车辆的协同作用，可以兼顾计算速度和通行效率。
权利要求书clms
1.一种基于无信号灯路口的自主路口管理系统，其特征在于，包括：多个感知单元，每个感知单元按照设定距离范围分别设置在无信号灯路口的各个方向的道路处，用于感知经该感知单元驶向所述无信号灯路口或驶离所述无信号灯路口的车辆，其中，以所述无信号灯路口为中心、各个方向的感知单元为边界构成的区域为驾驶接管区域，每个道路方向的所述感知单元与所述无信号灯路口之间均设有协同边界线，以所述无信号灯路口为中心、各个方向的协同边界线为边界构成的区域为车辆协同区域；中心处理设备，分别与每个感知单元通信连接，用于接管驶入所述驾驶接管区域的车辆的行驶控制权限，以及，归还驶出所述驾驶接管区域的车辆的行驶控制权限，其中，被接管行驶控制权限的车辆为受控车辆，被归还行驶控制权限的车辆为自控车辆，车辆驶入所述驾驶接管区域到驶出所述驾驶接管区域的过程包括第一阶段、第二阶段和第三阶段，所述第一阶段表示车辆从来向的感知单元驶向来向的协同边界线，所述第二阶段表示车辆从来向的协同边界线经所述无信号灯路口后驶向去向的协同边界线，所述第三阶段表示车辆从去向的协同边界线驶向去向的感知单元，来向表示车辆未通过所述无信号灯路口时所在的道路方向，去向表示车辆通过所述无信号灯路口后所在的道路方向；所述中心处理设备，还用于对驶入所述驾驶接管区域的车辆进行批次划分，并控制同一批次的各个车辆在所述第一阶段内保持当前车道内直线前行，在所述第二阶段内协同驶过所述无信号灯路口，在所述第三阶段内保持匀速直线运行，其中，同一批次的位于同一道路方向的多个车辆在所述第一阶段内保持相对位置固定。2.根据权利要求1所述的基于无信号灯路口的自主路口管理系统，其特征在于，所述中心处理设备，还用于：接收任一所述感知单元发送的第一感知信息，其中，所述第一感知信息为该感知单元感知到车辆驶入所述驾驶接管区域时生成，所述第一感知信息包含被感知车辆的唯一编号；根据所述第一感知信息，接管该唯一编号对应的车辆的行驶控制权限；在当前未分批次的受控车辆数量达到设定数量时，将此设定数量的受控车辆划分为第N批次，N为正整数。3.根据权利要求2所述的基于无信号灯路口的自主路口管理系统，其特征在于，在所述中心处理设备接管唯一编号对应的车辆的行驶控制权限后，还用于：将最新驶入所述驾驶接管区域的受控车辆的车速调节至与前一车辆的车速一致。4.根据权利要求3所述的基于无信号灯路口的自主路口管理系统，其特征在于，所述中心处理设备，还用于：获取第N批次的各个车辆的相对位置关系，并基于所述相对位置关系预测第N批次的各个车辆在t0时刻组成的编队构型，其中，t0时刻为第N批次中的头车到达第二阶段的起点位置的时刻；基于第N批次的各个车辆在t0时刻的编队构型，生成第N批次的各个车辆在第二阶段内的协同行驶轨迹，其中，第N批次的各个车辆基于所述协同行驶轨迹运行抵达第二阶段的终点位置时，每个车辆的速度均为设定速度，且第N批次的尾车抵达第二阶段的终点位置的时刻为t0+tstage2。5.根据权利要求4所述的基于无信号灯路口的自主路口管理系统，其特征在于，所述中心处理设备，还用于：调用数据库中记录的仍位于所述驾驶接管区域的第N-1，N-2，…，1批次的车辆的行车轨迹；并基于第N-1，N-2，…，1批次的车辆的行车轨迹，以及第N批次的各个车辆在t0时刻的编队构型，确定出第N批次的头车到达第二阶段的起点位置的时刻t0；基于时刻t0，第N-1，N-2，…，1批次的车辆的行车轨迹，以及第N批次的各个车辆在t0时刻的编队构型，确定出第N批次的各个车辆在所述第一阶段内的行车轨迹，其中，在所述第一阶段内，第N批次的各个车辆的速度保持同步调节。6.根据权利要求5所述的基于无信号灯路口的自主路口管理系统，其特征在于，所述中心处理设备，还用于：基于设定的匀速直线行驶规则，以及第N批次的各个车辆基于所述协同行驶轨迹运行抵达第二阶段的终点位置的时刻，确定出第N批次的各个车辆在所述第三阶段内的行车轨迹。7.根据权利要求6所述的基于无信号灯路口的自主路口管理系统，其特征在于，所述中心处理设备，还用于：按次序整合第N批次的各个车辆在第一阶段的行车轨迹、第二阶段的协同行驶轨迹和第三阶段的行车轨迹，得到第N批次的各个车辆的受控行车轨迹；将第N批次的各个车辆的受控行车轨迹存储在数据库中。8.根据权利要求2所述的基于无信号灯路口的自主路口管理系统，其特征在于，所述中心处理设备，还用于：接收任一所述感知单元发送的第二感知信息，其中，所述第二感知信息为该感知单元感知到车辆驶出所述驾驶接管区域时生成，所述第二感知信息包含被感知车辆的唯一编号；根据所述第二感知信息，归还该唯一编号对应的车辆的行驶控制权限；判断当前是否存在待消除批次，其中，所述待消除批次表示该批次的各个车辆的行驶控制权限均已归还；若存在，消除该待消除批次的批次编号，并将当前所有剩余批次的编号各减一。9.根据权利要求4所述的基于无信号灯路口的自主路口管理系统，其特征在于，所述设定数量为5～15，tstage2为10～20s。10.一种基于无信号灯路口的自主路口管理方法，其特征在于，应用于权利要求1～9中任一项所述的基于无信号灯路口的自主路口管理系统中的中心处理设备，所述方法包括：接管驶入所述驾驶接管区域的车辆的行驶控制权限，以及，归还驶出所述驾驶接管区域的车辆的行驶控制权限；对驶入所述驾驶接管区域的车辆进行批次划分，并控制同一批次的各个车辆在所述第一阶段内保持当前车道内直线前行，在所述第二阶段内协同驶过所述无信号灯路口，在所述第三阶段内保持匀速直线运行。
说明书desc
技术领域本申请涉及智能驾驶及控制技术领域，具体而言，涉及一种基于无信号灯路口的自主路口管理系统及方法。背景技术对于自主路口管理，学术界关心这种管理系统的软件部分，即如何设计高质量的算法，使得各个即将驶入路口的车辆能够被分配高质量的行车轨迹，甚至各车辆之间能够体现协同协作的意味，以最小阻塞、延迟代价快速通过路口。现存AIM主流方法分为两类：基于预约的AIM方法和基于规划的AIM方法。前者的核心思路是为各即将驶入路口的车辆分配优先级，按照先来先得的策略将更早抵达的车辆分配更高优先级，逐一规划行车轨迹，而低优先级车辆必须躲避高优先级车辆的轨迹。基于预约的方法计算快速，因为多车协同轨迹规划任务被分解为每次仅对单一车辆规划轨迹。但该类方法的求解质量较低，这是因为低优先级车辆只能躲避高优先级车辆的既定轨迹，二者无法相互配合，只能是低优先级车辆让行、迎合高优先级车辆的既定行驶行为，而高优先级车辆在规划其自身轨迹时根本就没有考虑低优先级车辆——因此多车之间配合的意味较弱，导致协同效果差，最终使得AIM方案的质量不高。而后者则是通过构建一个集中式的最优控制问题，一次性地同时获得所有车辆的协同运动轨迹。这类方法的求解质量高，因为多车轨迹是同时计算出来的，相互之间可以体现协作的意味。与此同时，这个集中式最优控制问题的维度较高，导致求解此问题非常困难，一般计算一次需要数千秒钟，往往需要借助超级计算机才能完成计算任务，难以进行实用推广。综上，基于预约的AIM方法求解速度快但求解质量差，而基于规划的AIM方法求解缓慢但质量高，因此，目前的AIM方法，其效果不尽人意。发明内容本申请实施例的目的在于提供一种基于无信号灯路口的自主路口管理系统及方法，以在保证AIM方法运行效率的同时保证管理效果。为了实现上述目的，本申请的实施例通过如下方式实现：第一方面，本申请实施例提供一种基于无信号灯路口的自主路口管理系统，包括：多个感知单元，每个感知单元按照设定距离范围分别设置在无信号灯路口的各个方向的道路处，用于感知经该感知单元驶向所述无信号灯路口或驶离所述无信号灯路口的车辆，其中，以所述无信号灯路口为中心、各个方向的感知单元为边界构成的区域为驾驶接管区域，每个道路方向的所述感知单元与所述无信号灯路口之间均设有协同边界线，以所述无信号灯路口为中心、各个方向的协同边界线为边界构成的区域为车辆协同区域；中心处理设备，分别与每个感知单元通信连接，用于接管驶入所述驾驶接管区域的车辆的行驶控制权限，以及，归还驶出所述驾驶接管区域的车辆的行驶控制权限，其中，被接管行驶控制权限的车辆为受控车辆，被归还行驶控制权限的车辆为自控车辆，车辆驶入所述驾驶接管区域到驶出所述驾驶接管区域的过程包括第一阶段、第二阶段和第三阶段，所述第一阶段表示车辆从来向的感知单元驶向来向的协同边界线，所述第二阶段表示车辆从来向的协同边界线经所述无信号灯路口后驶向去向的协同边界线，所述第三阶段表示车辆从去向的协同边界线驶向去向的感知单元，来向表示车辆未通过所述无信号灯路口时所在的道路方向，去向表示车辆通过所述无信号灯路口后所在的道路方向；所述中心处理设备，还用于对驶入所述驾驶接管区域的车辆进行批次划分，并控制同一批次的各个车辆在所述第一阶段内保持当前车道内直线前行，在所述第二阶段内协同驶过所述无信号灯路口，在所述第三阶段内保持匀速直线运行，其中，同一批次的位于同一道路方向的多个车辆在所述第一阶段内保持相对位置固定。在本申请实施例中，基于无信号灯路口的自主路口管理系统，利用设置在无信号灯路口的各个方向的道路处的感知单元构成驾驶接管区域，对驶入其中的车辆进行管理，彻底接管车辆的行驶控制权限，以便为这些受控车辆规划行车轨迹，随后下发至各受控车辆予以闭环跟踪执行。每个道路方向的感知单元与无信号灯路口之间均设有协同边界线，以无信号灯路口为中心、各个方向的协同边界线为边界构成车辆协同区域。以此作为规划行车轨迹的基础：车辆驶入驾驶接管区域到驶出驾驶接管区域的过程包括第一阶段、第二阶段和第三阶段。由此，中心处理设备对驶入驾驶接管区域的车辆进行批次划分，并控制同一批次的各个车辆在第一阶段内保持当前车道内直线前行，在第二阶段内协同驶过无信号灯路口，在第三阶段内保持匀速直线运行。通过将车辆进行批次划分，以便控制每个批次内的多个车辆进行协同运行，这样可以考虑到同一批次的多个车辆的协同作用，利于提升通行效率。并且，车辆的批次划分可以人为设定，可以很好地考虑到求解质量和求解速度之间的平衡，兼顾计算速度和通行效率。而车辆在第一阶段内保持当前车道内直线前行，同一批次的位于同一道路方向的多个车辆在第一阶段内保持相对位置固定，这样可以避免同一批次的同一道路方向的车辆之间的相对运动趋势，从而避免碰撞，并且，同一批次的车辆在第三阶段内保持匀速直线运行，同样可以避免发生碰撞。结合第一方面，在第一方面的第一种可能的实现方式中，所述中心处理设备，还用于：接收任一所述感知单元发送的第一感知信息，其中，所述第一感知信息为该感知单元感知到车辆驶入所述驾驶接管区域时生成，所述第一感知信息包含被感知车辆的唯一编号；根据所述第一感知信息，接管该唯一编号对应的车辆的行驶控制权限；在当前未分批次的受控车辆数量达到设定数量时，将此设定数量的受控车辆划分为第N批次，N为正整数。在该实现方式中，中心处理设备可以接收任一感知单元发送的第一感知信息，并接管该唯一编号对应的车辆的行驶控制权限；在当前未分批次的受控车辆数量达到设定数量时，将此设定数量的受控车辆划分为第N批次，N为正整数。这样可以根据实际情况划分车辆的批次，相当于凑够设定数量的未划分批次的受控车辆即进行批次划分，从而能够考虑到道路的实际通行条件设定相应的数量，以更好地平衡通行效率和计算速度之间的平衡。结合第一方面的第一种可能的实现方式，在第一方面的第二种可能的实现方式中，在所述中心处理设备接管唯一编号对应的车辆的行驶控制权限后，还用于：将最新驶入所述驾驶接管区域的受控车辆的车速调节至与前一车辆的车速一致。在该实现方式中，这样的方式能够保持受控车辆在第一阶段内的车速一致，从而同步加减速，简单可靠地实现对同一批次的车辆的速度控制，使得同一批次的同一道路方向的受控车辆之间的相对位置保持一致，不仅能够避免在第一阶段内发生碰撞，还能够预测同一批次的受控车辆的编队构型，有利于进行车辆轨迹的规划。结合第一方面的第二种可能的实现方式，在第一方面的第三种可能的实现方式中，所述中心处理设备，还用于：获取第N批次的各个车辆的相对位置关系，并基于所述相对位置关系预测第N批次的各个车辆在t0时刻组成的编队构型，其中，t0时刻为第N批次中的头车到达第二阶段的起点位置的时刻；基于第N批次的各个车辆在t0时刻的编队构型，生成第N批次的各个车辆在第二阶段内的协同行驶轨迹，其中，第N批次的各个车辆基于所述协同行驶轨迹运行抵达第二阶段的终点位置时，每个车辆的速度均为设定速度，且第N批次的尾车抵达第二阶段的终点位置的时刻为t0+tstage2。在该实现方式中，利用这样的方式规划第N批次的各个车辆在第二阶段内的协同行驶轨迹，可以保证规划的协同行驶轨迹的可靠性和可操作性，并且第N批次的各个车辆运行抵达第二阶段的终点位置时的车速均为设定速度，有利于第三阶段的行车轨迹的规划，并且预留了合理的通行时间，保证第N批次的所有车辆抵达第二阶段的终点位置的时刻为t0+tstage2，即整体通行时长为tstage2，保证了第N批次的所有车辆在第二阶段的通行时长，不仅能够有效保证通行效率，还能够作为批次之间的间隔时长的依据，避免不同批次之间的车辆的碰撞，保证通行安全和通行效率。结合第一方面的第三种可能的实现方式，在第一方面的第四种可能的实现方式中，所述中心处理设备，还用于：调用数据库中记录的仍位于所述驾驶接管区域的第N-1，N-2，…，1批次的车辆的行车轨迹；并基于第N-1，N-2，…，1批次的车辆的行车轨迹，以及第N批次的各个车辆在t0时刻的编队构型，确定出第N批次的头车到达第二阶段的起点位置的时刻t0；基于时刻t0，第N-1，N-2，…，1批次的车辆的行车轨迹，以及第N批次的各个车辆在t0时刻的编队构型，确定出第N批次的各个车辆在所述第一阶段内的行车轨迹，其中，在所述第一阶段内，第N批次的各个车辆的速度保持同步调节。在该实现方式中，利用这样的方式进行第N批次的各个车辆在第一阶段内的行车轨迹的规划，可以考虑到当前仍位于驾驶接管区域的第N-1，N-2，…，1批次的车辆的行车轨迹，批次的数据越小，优先级越高，因此第N批次需要规避第N-1，N-2，…，1批次的车辆，避免不同批次间的车辆的碰撞。结合第一方面的第四种可能的实现方式，在第一方面的第五种可能的实现方式中，所述中心处理设备，还用于：基于设定的匀速直线行驶规则，以及第N批次的各个车辆基于所述协同行驶轨迹运行抵达第二阶段的终点位置的时刻，确定出第N批次的各个车辆在所述第三阶段内的行车轨迹。在该实现方式中，利用这样的方式规划第N批次的各个车辆在第三阶段内的行车轨迹，可以简单可靠地避免车辆的碰撞问题，还能够极大地节约计算时间，从而降低对中心处理设备的要求。结合第一方面的第五种可能的实现方式，在第一方面的第六种可能的实现方式中，所述中心处理设备，还用于：按次序整合第N批次的各个车辆在第一阶段的行车轨迹、第二阶段的协同行驶轨迹和第三阶段的行车轨迹，得到第N批次的各个车辆的受控行车轨迹；将第N批次的各个车辆的受控行车轨迹存储在数据库中。在该实现方式中，按次序整合第N批次的各个车辆在第一阶段的行车轨迹、第二阶段的协同行驶轨迹和第三阶段的行车轨迹，得到第N批次的各个车辆的受控行车轨迹，可以作为第N批次的各个车辆在驾驶接管区域内的行车依据，以控制第N批次的车辆的运行。将其存储在数据库中，可以作为后续批次的规避参照，避免后续批次的车辆与第N批次的车辆碰撞，保证第N批次的车辆能够按照受控行车轨迹的进行通行。结合第一方面的第一种可能的实现方式，在第一方面的第七种可能的实现方式中，所述中心处理设备，还用于：接收任一所述感知单元发送的第二感知信息，其中，所述第二感知信息为该感知单元感知到车辆驶出所述驾驶接管区域时生成，所述第二感知信息包含被感知车辆的唯一编号；根据所述第二感知信息，归还该唯一编号对应的车辆的行驶控制权限；判断当前是否存在待消除批次，其中，所述待消除批次表示该批次的各个车辆的行驶控制权限均已归还；若存在，消除该待消除批次的批次编号，并将当前所有剩余批次的编号各减一。在该实现方式中，在感知单元感知到车辆驶出驾驶接管区域后，可以归还该唯一编号对应的车辆的行驶控制权限，而在某一批次的所有车辆均驶出驾驶接管区域后，中心处理设备还可以消除该待消除批次的批次编号，并将当前所有剩余批次的编号各减一。这样可以及时清理已经通过驾驶接管区域的批次的车辆的受控行车轨迹，因为已经不再影响驾驶接管区域内的其他车辆的运行，可以减少计算量。结合第一方面的第三种可能的实现方式，在第一方面的第八种可能的实现方式中，所述设定数量为5～15，tstage2为10～20s。在该实现方式中，设定数量为5～15，可以有效保证计算速度，降低对中心处理设备的性能要求，同时，也能够很好地考虑到多车协同，从而保证车辆的通行效率。而tstage2为10～20s，可以很好地根据设定数量的多少，保证同一批次的所有车辆在10～20s内能够完全通过第二阶段。第二方面，本申请实施例提供一种基于无信号灯路口的自主路口管理方法，应用于第一方面或第一方面的可能的实现方式中任一项所述的基于无信号灯路口的自主路口管理系统中的中心处理设备，所述方法包括：接管驶入所述驾驶接管区域的车辆的行驶控制权限，以及，归还驶出所述驾驶接管区域的车辆的行驶控制权限；对驶入所述驾驶接管区域的车辆进行批次划分，并控制同一批次的各个车辆在所述第一阶段内保持当前车道内直线前行，在所述第二阶段内协同驶过所述无信号灯路口，在所述第三阶段内保持匀速直线运行。为使本申请的上述目的、特征和优点能更明显易懂，下文特举较佳实施例，并配合所附附图，作详细说明如下。附图说明为了更清楚地说明本申请实施例的技术方案，下面将对本申请实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本申请的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1为本申请实施例提供的一种基于无信号灯路口的自主路口管理系统的示意图。图2为在无信号灯路口附近设置协同边界线的示意图。图3为将受控车辆划分批次的示意图。图4为无信号灯平面十字交叉路口场景示意图。图5为无信号灯路口的通行场景中A1、A2、A3类车辆的可通行区域的示意图。图6为无信号灯路口的通行场景中各车辆终止时刻所在区域的示意图。图7为二自由度车辆运动学模型的示意图。图标：100-基于无信号灯路口的自主路口管理系统；110-感知单元；120-中心处理设备。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行描述。请参阅图1，图1为本申请实施例提供的一种基于无信号灯路口的自主路口管理系统100的示意图。在本实施例中，基于无信号灯路口的自主路口管理系统100可以包括中心处理设备120和多个感知单元110。每个感知单元110可以按照设定距离范围分别设置在无信号灯路口的各个方向的道路处。由于实际情况中的无信号灯路口设计差异，并且其各个方向的道路也可能存在一些区别，导致直线距离不同，因此，各个道路方向设置的感知单元110与无信号灯路口之间的距离也可能存在差异，以实际路程相当为宜，此处不作限定。为了便于理解，本方案中以十字路口为例，各个感知单元110设置在无信号灯路口的各个方向的道路处，且每个感知单元110与无信号灯路口的距离一致。请参阅图2，图2为在无信号灯路口附近设置协同边界线的示意图。在每个道路方向的感知单元110与无信号灯路口之间均设有协同边界线，以划分一个更小范围的车辆协同通过路口的协同区域。需要注意的是，协同边界线可以设置相应的车辆感知单元110进行感知，也可以不设置，此处不作限定，以实际需要为准。为了便于理解，此处先对本方案将涉及的一些概念进行介绍：驾驶接管区域，表示以无信号灯路口为中心、各个道路方向设置的感知单元110为边界构成的区域。车辆协同区域，表示以无信号灯路口为中心、各个道路方向的协同边界线为边界构成的区域。车辆驶入驾驶接管区域到驶出驾驶接管区域的过程包括第一阶段、第二阶段和第三阶段：第一阶段，表示车辆从来向的感知单元110驶向来向的协同边界线。第二阶段，表示车辆从来向的协同边界线经无信号灯路口后驶向去向的协同边界线。第三阶段，表示车辆从去向的协同边界线驶向去向的感知单元110。来向，表示车辆未通过无信号灯路口时所在的道路方向。去向，表示车辆通过无信号灯路口后所在的道路方向。在本实施例中，中心处理设备120分别与每个感知单元110通信连接。中心处理设备120可以是终端设备或者服务器，用于接管驶入驾驶接管区域的车辆的行驶控制权限，以及，归还驶出驾驶接管区域的车辆的行驶控制权限，其中，被接管行驶控制权限的车辆为受控车辆，被归还行驶控制权限的车辆为自控车辆。对于驶入驾驶接管区域的车辆，中心处理设备120需要全面接管该车辆的行驶控制权限，控制车辆在驾驶接管区域内的运行。中心处理设备120对驶入其中的车辆进行管理，彻底接管车辆的行驶控制权限，以便为这些受控车辆规划行车轨迹，随后下发至各受控车辆予以闭环跟踪执行。为了尽可能保证车辆在驾驶接管区域的通行效率和减少轨迹规划所需的计算时间，中心处理设备120可以对驶入驾驶接管区域的车辆进行批次划分，并控制同一批次的各个车辆在第一阶段内保持当前车道内直线前行，在第二阶段内协同驶过无信号灯路口，在第三阶段内保持匀速直线运行，其中，同一批次的位于同一道路方向的多个车辆在第一阶段内保持相对位置固定。需要说明的是，此处的同一批次的各个车辆，行驶速度同步，从而保证行驶次序不变，且预计抵达第二阶段的起始位置时所需的时间也是同步减少的。通过将车辆进行批次划分，以便控制每个批次内的多个车辆进行协同运行，这样可以考虑到同一批次的多个车辆的协同作用，利于提升通行效率。并且，车辆的批次划分可以人为设定，可以很好地考虑到求解质量和求解速度之间的平衡，兼顾计算速度和通行效率。而车辆在第一阶段内保持当前车道内直线前行，同一批次的位于同一道路方向的多个车辆在第一阶段内保持相对位置固定，这样可以避免同一批次的同一道路方向的车辆之间的相对运动趋势，从而避免碰撞，并且，同一批次的车辆在第三阶段内保持匀速直线运行，同样可以避免发生碰撞。示例性的，在任一感知单元110感知到车辆驶入驾驶接管区域时，可以生成相应的第一感知信息，并将第一感知信息发送给中心处理设备120。而中心处理设备120可以接收该感知单元110发送的第一感知信息，并根据第一感知信息，接管该唯一编号对应的车辆的行驶控制权限。而后，中心处理设备120可以将最新驶入驾驶接管区域的受控车辆的车速调节至与前一车辆的车速一致。这样能够保持受控车辆在第一阶段内的车速一致，从而同步加减速，简单可靠地实现对同一批次的车辆的速度控制，使得同一批次的同一道路方向的受控车辆之间的相对位置保持一致，不仅能够避免在第一阶段内发生碰撞，还能够预测同一批次的受控车辆的编队构型，有利于进行车辆轨迹的规划。当然，在其他一些可能的情况下，也可以专门设置缓冲区域，以便欲进入驾驶接管区域的车辆将车速调节至一个定值，这样可以使得进入驾驶接管区域的车辆的速度一致，也能够避免车辆在第一阶段内发生碰撞。在当前未分批次的受控车辆数量达到设定数量NV时，中心处理设备120可以将此设定数量NV的受控车辆划分为第N批次，N为正整数。此处的设定数量NV，表示一个批次内车辆的数量，可以根据实际需要进行设置。基于目前的中心处理设备120的条件，设定数量NV以5～15为佳。此处的批次划分过程，可以理解为：将所有车辆按照距离路口中心点的远近划分为一系列批次。如图3所示，同一环内的车辆属于同一批次。需要注意的是，同一批次的车辆可能分别位于四条道路上，即同一批次车辆不一定在空间上全部都是相隔很近的。同一批次内的各车辆距离路口中心点的直线距离一般是相差不多的，所以在图3中示例性地将批次绘制成了环形，这只是一种示意性的概念，不应视为对本申请的限定。这样可以根据实际情况划分车辆的批次，相当于凑够设定数量的未划分批次的受控车辆即进行批次划分，从而能够考虑到道路的实际通行条件设定相应的数量，以更好地平衡通行效率和计算速度之间的平衡。而设定数量NV为5～15，可以有效保证计算速度，降低对中心处理设备120的性能要求，同时，也能够很好地考虑到多车协同，从而保证车辆的通行效率。对驶入驾驶接管区域的车辆进行批次划分后，中心处理设备120需要对同一批次的各个车辆进行行车轨迹的规划，以便控制同一批次的车辆通过驾驶接管区域。为了便于说明，本实施例中将以第N批次的各个车辆的行车轨迹的确定方式为例进行说明，但不应视为对本申请的限定。在本实施例中，对第N批次的各个车辆的行车轨迹的规划，可以分解为分别对第一阶段、第二阶段和第三阶段的轨迹规划，但规划顺序上，应当为第二阶段——第一阶段——第三阶段，或者第二阶段——第三阶段——第一阶段。对于第二阶段的行车轨迹的规划：首先，中心处理设备120可以获取第N批次的各个车辆的相对位置关系，并基于相对位置关系预测第N批次的各个车辆在t0时刻组成的编队构型，其中，t0时刻为第N批次中的头车到达第二阶段的起点位置的时刻。此处，各个车辆的相对位置关系，包含了位于每个道路方向的车辆的相对位置关系。然后，中心处理设备120可以基于第N批次的各个车辆在t0时刻的编队构型，生成第N批次的各个车辆在第二阶段内的协同行驶轨迹。虽然各批次的车辆的第二阶段的开始时刻是各不相同的，并且在此之前无法确定当前批次的车辆在哪一确定时刻开始第二阶段。但由于第二阶段会持续一段固定时间，且在第二阶段的起始时刻t0，此时第N批次的车辆的编队构型是已知的，那可以利用协同轨迹规划技术直接规划当前批次的车辆在第二阶段的协同行驶轨迹。利用这样的方式规划第N批次的各个车辆在第二阶段内的协同行驶轨迹，可以保证规划的协同行驶轨迹的可靠性和可操作性，并且第N批次的各个车辆运行抵达第二阶段的终点位置时的车速均为设定速度，有利于第三阶段的行车轨迹的规划，并且预留了合理的通行时间，保证第N批次的所有车辆抵达第二阶段的终点位置的时刻为t0+tstage2，即整体通行时长为tstage2，保证了第N批次的所有车辆在第二阶段的通行时长，不仅能够有效保证通行效率，还能够作为批次之间的间隔时长的依据，避免不同批次之间的车辆的碰撞，保证通行安全和通行效率。在本实施例中，基于实际经验，tstage2可以选为10～20s，这样可以确保同一批次的所有车辆在10～20s内能够完全通过第二阶段。为了便于理解，以下将对利用协同轨迹规划技术规划当前批次的车辆在第二阶段的协同行驶轨迹的具体方式进行介绍：为方便叙述，如图4所示，建立一个平面坐标系XOY，不妨以平面十字交叉路口场景中相互垂直的两条道路的中心线为X轴、Y轴，以中心线交点为原点O来构建坐标系。将十字路口周围街区放置在坐标系的四个象限中充当矩形障碍物，即可实现基本的场景布置。设路口场景中的单方向路宽一律为Lroad_width，街区长度一律为Lstreet_length，据此可以唯一确定各矩形障碍物所在位置。在路口场景中，每一辆汽车并不同时与全部四块街区存在碰撞机会，这是因为各车辆按照驶入路口的方向及通行意图可进一步限制其可通行区域，而至多只有一个街区矩形在其可通行区域内。以下将详细阐述可通行区域的概念。如图4所示，车辆可从东南西北4个方向驶入路口，而从每个方向驶入路口的车辆可以按照左转、直行、右转这3种方式驶出路口，因此所有试图通过路口的车辆可按照以上行为特征分为12类，可以将包含相应类别车辆编号的指标集依次定义为A1、A2、A3、B1、B2、B3、C1、C2、C3、D1、D2、以及D3，显然任何一辆汽车属于且仅属于上述12个集合中的一个，任取两个子集合的交集为空，而所有12个子集合的并集是{1,...,NV}。首先考虑自西向东驶入无信号灯路口的情况，在图4中它们对应着A1、A2、A3类别的车辆。假设第二阶段对应的时域是t∈，。这三类车辆的可行驶区域如图5所示。以A3为例，首先要求这一类别中的汽车始终保持在直线y＝0的下方、直线x＝0的左侧区域内，由于该区域存在矩形Block4，因此A3类车辆额外需要躲避Block4行驶，从两条直线围成的半封闭区域去掉Block4占据的区域即对应着A3类车辆的可通行区域。属于A2类别的车辆需要始终保持在直线y＝0下方与直线y＝-Lroad_width上方的带状区域内行驶。A1类车辆的可通行区域设置方式与A3类似，但是可以额外将对向道路空间也作为A1可行驶区域一部分，这与现有交通法规有所区别。允许左转车辆利用对向道路是本节所建模型的重要特色，其目的是使左转车辆更充分地利用道路空间，提高总体通行效率。总结起来，A1、A2、A3类别车辆的可通行区域可分别定义为：其中，Aix,Bix,Cix,Dix分别指编队中的第i辆车在t时刻时车辆的矩形轮廓四个顶点的横坐标；类似地，Aiy,Biy,Ciy,Diy分别指第i辆车在t时刻时车辆的矩形轮廓四个顶点的纵坐标；VehicleOutOfPolygon是指用于描述两个凸多边形Γ与Υ之间不发生碰撞的碰撞躲避约束条件。其余9类车辆的可通行区域可采用相同的方法确定，此处不再赘述。当各车辆在相应可通行区域内运动的整个过程中，要求凡是可通行区域重叠的车辆类别相互之间不发生碰撞，且各类别内部各车辆不发生碰撞。为书写简单，可以将i车与j车在时刻t的碰撞躲避约束条件临时记为VehicleOutOfVehicle，则完备的碰撞躲避约束条件可写为：VehicleOutOfVehicle,i∈A1,j∈A2∪A3∪B1∪B2∪B3∪C1∪C2∪C3∪D1∪D2∪D3；VehicleOutOfVehicle,i∈A2,j∈A3∪B1∪B2∪B3∪C1∪D1∪D2；VehicleOutOfVehicle,i∈A3,j∈B1∪C1∪D1D2；VehicleOutOfVehicle,i∈B1,j∈B2∪B3∪C1∪C2∪C3∪D1∪D2∪D3；VehicleOutOfVehicle,i∈B2,j∈B3∪C1∪C2∪C3∪D1；VehicleOutOfVehicle,i∈B3,j∈C1∪D1；VehicleOutOfVehicle,i∈C1,j∈C2∪C3∪D1∪D2∪D3；VehicleOutOfVehicle,i∈C2,j∈C3∪D1∪D2∪D3；VehicleOutOfVehicle,i∈C3,j∈D1；VehicleOutOfVehicle,i∈D1,j∈D2∪D3；VehicleOutOfVehicle,i∈D2,j∈D3； 以及，上式作用于整个第二阶段的时域t∈之上。从公式中可以发现，左转车辆的可通行区域与非左转车辆的可通行区域全部存在重叠，因此左转车辆是造成协同规划问题困难的重要原因之一。公式和公式中的VehicleOutOfVehicle的具体含义是：VehicleOutOfPolygonBiCiDi,AjBjCjDj).在路口通行动态过程的起始时刻t＝t0，各车辆的运动状态可以结合当时由感知模块获得的客观事实而确定。在工程实践中可将路口周围特定区域设置为缓冲区，并要求各车辆在缓冲区域内完成自身运动状态的调整，最终使得各车辆在起始时刻t＝t0沿其当前所在路段的方向以相同的速率平稳匀速行驶，即＝,i∈{1,...,NV}； θi＝0,i∈A1∪A2∪A3； θi＝π/2,i∈B1∪B2∪B3； θi＝π,i∈C1∪C2∪C3； θi＝-π/2,i∈D1∪D2∪D3. 其中vstd＞0是预设的各车辆平稳匀速行驶的共同速度标准值，代表第i辆车的起始位置坐标。在第二阶段的终止时刻t0+tstage2，各车辆应平稳匀速地沿目标道路方向行驶。结合图6标记的各类车辆的目标道路区域，可通过以下条件来限制各车辆在终止时刻的运动状态。为了叙述简便，可以约定tf＝t0+tstage2。＝,i∈{1,...,NV}； θi＝θi+π/2,i∈A1∪B1∪C1∪D1； θi＝θi,i∈A2∪B2∪C2∪D2； θi＝θi-π/2,i∈A3∪B3∪C3∪D3. 其中，公式反映了“平稳匀速”行驶的要求，公式～反映了对于各车辆在终止时刻的位置限制，公式～是终止时刻角度限制。还需要一些约束条件来描述车辆的运动能力，可以采用经典的自行车模型对其进行描述：如图7所示，2自由度模型将车辆的两只前轮及两只后轮分别向车体纵轴方向合并为虚拟单轮，通过确定虚拟前轮的转动角速度以及虚拟后轮的线加速度变量，可以间接确定车辆的前轮转角、行驶速度等，进而实现车辆运动。两只虚拟单轮的存在使得车辆从形态上与类似于自行车，因此2自由度模型也称作自行车模型。对于车辆i，根据自行车模型，车辆i在惯性坐标系XOY中的运动过程受到以下微分方程组的限制：其中,yi)代表车辆i的后轮轴中点坐标；vi及ai分别代表沿车体纵轴方向的速度及加速度，以使车辆前进的方向为正方向；φi为车辆前轮偏转角，以左转方向为正方向；ωi为前轮偏转角速度；θi则代表车辆在坐标系中的姿态角，即从坐标系X轴正方向到车体纵轴正方向的旋转角度，以逆时针转向为正方向。此外，图7中还定义了车辆i的四个几何尺寸相关参数：Lw代表前后轮轴距，Lf代表车辆前悬距离，Lr代表后悬距离，Lb代表车宽。最优控制问题除包括上述环境限制约束条件、边值约束、车辆运动学约束之外，还包括一个代价函数，它用于反映对于通行效率、舒适性能、安全性能的寻优诉求。其中舒适性能指标J舒适需要各状态变量变化幅度和速率较小，安全性能指标J安全则要求各车辆之间适当远离。通行效率J通行效率要求各车辆尽量在其目标车道方向上行驶得远，即：为了使得各车辆尽早、尽快完成路口通行任务，直观上似乎应设置J通行效率＝tf，但本方案中选择公式的原因在于，J通行效率＝tf只能够“激励”最慢达成终止时刻约束的那一辆车尽快完成任务，却无法有效地鼓励本应能够提早达成终止时刻约束的诸多车辆继续前进。使用J通行效率＝tf作为代价函数进行优化求解的最直接影响是导致相当数目车辆选择直到t＝tf时刻才“愿意”去达成终止时刻约束条件，这是因为它们即便提前达成终止时刻约束条件也不会在代价函数J通行效率＝tf中有任何反映。因此，公式能够有效激励所有车辆尽快向远处行驶，从而真正提升通行效率。还可以根据需要设定权重系数，得到：J＝w1·J通行效率+w2·J舒适+w3·J安全, 其中w1,w2,w3＞0均为权重系数。由此，可以将上述约束+代价函数组合起来，即构成一个完整描述一个批次车辆在无信号灯十字交叉路口通行协同轨迹规划任务的完整数学命题，显然这是一个最优控制问题。在将路口场景中多车协同轨迹规划任务描述为一个最优控制问题之后，可以对其进行数值求解——这是因为解析求解方法无法应对如此复杂的问题。因此需要将最优控制问题沿着自变量离散化为一个非线性规划问题，随后采用梯度优化算法对其求解即完成轨迹规划任务。由此，可以实现对第N批次的各个车辆在第二阶段内的行车轨迹的规划，得到协同行驶轨迹。在得到第N批次的各个车辆在第二阶段内的协同行驶轨迹后，只需确定时刻t0即可基本完成AIM对当前批次车辆的管理工作。即，中心处理设备120可以进一步确定出第N批次的各个车辆在第一阶段和第三阶段的行车轨迹。由于确定出第N批次的各个车辆在第一阶段和第三阶段的行车轨迹的具体方式非常简单方便，且所需的计算时间也很少。示例性的，针对第N批次的各个车辆在第一阶段内的行车轨迹的确定，中心处理设备120可以利用基于预约的AIM方法为其预约尽早驶入路口的时刻t0，此种技术已经较为成熟，此处简单介绍：中心处理设备120可以调用数据库中记录的仍位于驾驶接管区域的第N-1，N-2，…，1批次的车辆的行车轨迹；并基于第N-1，N-2，…，1批次的车辆的行车轨迹，以及第N批次的各个车辆在t0时刻的编队构型，确定出第N批次的头车到达第二阶段的起点位置的时刻t0；基于时刻t0，第N-1，N-2，…，1批次的车辆的行车轨迹，以及第N批次的各个车辆在t0时刻的编队构型，确定出第N批次的各个车辆在第一阶段内的行车轨迹，其中，在第一阶段内，第N批次的各个车辆的速度保持同步调节。对于第N批次的各个车辆在第一阶段保持在当前车道前向行驶，各车辆步调统一地加速/减速，以确保第N批次内的头车在t0时刻抵达协同边界线，利用成熟的ADAS技术行驶即可。利用这样的方式进行第N批次的各个车辆在第一阶段内的行车轨迹的规划，可以考虑到当前仍位于驾驶接管区域的第N-1，N-2，…，1批次的车辆的行车轨迹，批次的数据越小，优先级越高，因此第N批次需要规避第N-1，N-2，…，1批次的车辆，避免不同批次间的车辆的碰撞。对于第N批次的各个车辆在第三阶段的行车轨迹的确定，中心处理设备120可以设定第N批次的各个车辆在第三阶段内匀速直线行驶，且行驶速度均为设定速度vstd。由此，中心处理设备120可以基于设定的匀速直线行驶规则，以及第N批次的各个车辆基于协同行驶轨迹运行抵达第二阶段的终点位置的时刻，确定出第N批次的各个车辆在第三阶段内的行车轨迹。利用这样的方式规划第N批次的各个车辆在第三阶段内的行车轨迹，可以简单可靠地避免车辆的碰撞问题，还能够极大地节约计算时间，从而降低对中心处理设备120的要求。确定出第N批次的各个车辆在第二阶段、第一阶段和第三阶段内的行车轨迹后，中心处理设备120可以按次序整合第N批次的各个车辆在第一阶段的行车轨迹、第二阶段的协同行驶轨迹和第三阶段的行车轨迹，得到第N批次的各个车辆的受控行车轨迹，并将第N批次的各个车辆的受控行车轨迹存储在数据库中。这样可以将第N批次的各个车辆的受控行车轨迹作为后续批次的规避参照，避免后续批次的车辆与第N批次的车辆碰撞，保证第N批次的车辆能够按照受控行车轨迹的进行通行。示例性的，在任一感知单元110感知到受控车辆驶出驾驶接管区域时，可以生成相应的第二感知信息，并将第二感知信息发送给中心处理设备120。而中心处理设备120可以接收该感知单元110发送的第二感知信息，并根据第二感知信息，归还该唯一编号对应的车辆的行驶控制权限。以及，中心处理设备120还可以判断当前是否存在待消除批次，其中，待消除批次表示该批次的各个车辆的行驶控制权限均已归还。若存在，消除该待消除批次的批次编号，并将当前所有剩余批次的编号各减一。将当前所有剩余批次的编号各减一，表示将剩余批次的优先级提升。这样可以及时清理已经通过驾驶接管区域的批次的车辆的受控行车轨迹，因为已经不再影响驾驶接管区域内的其他车辆的运行，可以减少计算量。基于同一发明构思，本申请实施例中还提供一种基于无信号灯路口的自主路口管理方法，应用于本实施例中的基于无信号灯路口的自主路口管理系统100中的中心处理设备120，通过接管驶入驾驶接管区域的车辆的行驶控制权限，以及，归还驶出驾驶接管区域的车辆的行驶控制权限；并对驶入驾驶接管区域的车辆进行批次划分，并控制同一批次的各个车辆在第一阶段内保持当前车道内直线前行，在第二阶段内协同驶过所述无信号灯路口，在第三阶段内保持匀速直线运行。由于前文中对中心处理设备120的功能已经做了全面的介绍，此处的方法部分也是应用于中心处理设备120的，参阅前文即可，此处不再赘述，但不应视为对本申请的限定。为了验证基于无信号灯路口的自主路口管理系统100的效果，发明人设计了相应的仿真实验：在无穷远处给定2000辆车，从各个方向驶入无信号灯路口。通过统计通行效率指标来评估基于无信号灯路口的自主路口管理系统100的质量，通过基于无信号灯路口的自主路口管理系统100的处理耗时来判断本方案的实时性。此处所提到的通行效率是指这2000辆车之中最早的那一辆车驶入路口的时刻t1与最晚车辆驶出路口的时刻t2之间的差值。请参阅表1，表1给出了每一批次车辆个数为NV条件下的通行效率以及求解耗时的对比数据，且以下结果均是在普通家用计算机上面得到的。表1由表1的数据可知，NV较小的时候，本方案的效果类似于基于预约的AIM算法，此时通行效率比较差，因为车辆之间的协同效果几乎没有。在NV较大的时候，本方案的效果类似于基于规划的AIM方法，因此其通行质量显著提升，接近100％。与此同时，由于批次内部车辆规模较大，第二阶段内各个车辆的协同行驶过程所需要消耗的计算时间也相应增加，但这一计算耗时的增加较之此前的动辄数千秒钟有重大突破。因此，本方案兼顾了求解质量与求解耗时，在未来计算机CPU越来越好之后，将能够处理越来越大规模的批次，因此在计算时效性有保障的前提下能够继续稳步提升求解质量。综上所述，本申请实施例提供一种基于无信号灯路口的自主路口管理系统100及方法，利用设置在无信号灯路口的各个方向的道路处的感知单元110构成驾驶接管区域，对驶入其中的车辆进行管理，彻底接管车辆的行驶控制权限，以便为这些受控车辆规划行车轨迹，随后下发至各受控车辆予以闭环跟踪执行。每个道路方向的感知单元110与无信号灯路口之间均设有协同边界线，以无信号灯路口为中心、各个方向的协同边界线为边界构成车辆协同区域。以此作为规划行车轨迹的基础：车辆驶入驾驶接管区域到驶出驾驶接管区域的过程包括第一阶段、第二阶段和第三阶段。由此，中心处理设备120对驶入驾驶接管区域的车辆进行批次划分，并控制同一批次的各个车辆在第一阶段内保持当前车道内直线前行，在第二阶段内协同驶过无信号灯路口，在第三阶段内保持匀速直线运行。通过将车辆进行批次划分，以便控制每个批次内的多个车辆进行协同运行，这样可以考虑到同一批次的多个车辆的协同作用，利于提升通行效率。并且，车辆的批次划分可以人为设定，可以很好地考虑到求解质量和求解速度之间的平衡，兼顾计算速度和通行效率。而车辆在第一阶段内保持当前车道内直线前行，同一批次的位于同一道路方向的多个车辆在第一阶段内保持相对位置固定，这样可以避免同一批次的同一道路方向的车辆之间的相对运动趋势，从而避免碰撞，并且，同一批次的车辆在第三阶段内保持匀速直线运行，同样可以避免发生碰撞。在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。以上所述仅为本申请的实施例而已，并不用于限制本申请的保护范围，对于本领域的技术人员来说，本申请可以有各种更改和变化。凡在本申请的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。
