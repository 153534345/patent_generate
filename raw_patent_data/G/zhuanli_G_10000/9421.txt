标题title
基于控制线的地层构造起伏表征处理方法及系统
摘要abst
基于控制线的地层构造起伏表征处理方法及系统，根据目标地层线的节点生成地层控制线；构建地层控制线和地层线的关联关系，获得地层控制线对应的地层线集合；在指定的地层控制线上添加初始控制点，遍历剩余地层控制线并在与初始控制点横坐标相同位置添加附属控制点；遍历地层线和砂体线，构建地层控制线上的控制点和地层线节点的关联关系，确定并记录每个地层控制点和地层线集合中的每条地层线对应的节点；构建控制点、地层线节点和地层控制线三级编辑机制进行地层构造起伏形态表征。本发明提供从局部到整体的解决思路，实现地层微调、局部趋势调整、整体趋势调整等多级快速调整方案，且砂体形态得到很高的约束和保持，能够准确的进行油藏分析。
权利要求书clms
1.基于控制线的地层构造起伏表征处理方法，其特征在于，包括以下步骤：确定目标地层线，根据所述目标地层线的节点生成地层控制线，所述地层控制线的节点包括可移动节点和井节点；构建所述地层控制线和地层线的关联关系，获得地层控制线对应的地层线集合；在指定的地层控制线上添加初始控制点，遍历剩余地层控制线并在与初始控制点横坐标相同位置添加附属控制点；遍历地层线并在与初始控制点横坐标相同位置添加地层线节点；遍历砂体线，判断与初始控制点横坐标相同位置的纵向射线与当前砂体线是否相交，如果相交，则在砂体线上添加交点；构建地层控制线上的控制点和地层线节点的关联关系，确定并记录每个地层控制点和所述地层线集合中的每条地层线对应的节点；构建控制点、地层线节点和地层控制线三级编辑机制，通过所述三级编辑机制进行地层构造起伏形态表征。2.根据权利要求1所述的基于控制线的地层构造起伏表征处理方法，其特征在于，步骤中，所述井节点是所述地层控制线和井对象的相交点，限制所述井节点的位置移动和删除；所述可移动节点允许操作、编辑及删除。3.根据权利要求1所述的基于控制线的地层构造起伏表征处理方法，其特征在于，步骤中，当只存在一条地层控制线时，则通过一条地层控制线控制所有地层线；当存在至少两条地层控制线时，将地层线加入到距离较近的地层控制线的地层线集合中。4.根据权利要求1所述的基于控制线的地层构造起伏表征处理方法，其特征在于，步骤中，限制砂体线上所添加交点的删除。5.根据权利要求1所述的基于控制线的地层构造起伏表征处理方法，其特征在于，通过选中并纵向移动所述地层线节点，更新地层空间，重新计算砂体位置；通过选中并纵向移动地层控制线的控制点，更新地层控制点和地层线集合中的地层线对应节点位置，然后更新地层空间，重新计算砂体位置。6.根据权利要求1所述的基于控制线的地层构造起伏表征处理方法，其特征在于，将每个控制点纵向绘制并外延超地层顶底范围，形成操纵线。7.根据权利要求1所述的基于控制线的地层构造起伏表征处理方法，其特征在于，当删除指定的地层控制点时，将地层线集合中的地层线与被删除控制点对应的地层线节点也进行删除；同时，删除砂体线中与被删除控制点横坐标相同的节点。8.基于控制线的地层构造起伏表征处理系统，采用权利要求1至7任一项所述的基于控制线的地层构造起伏表征处理方法，其特征在于，包括：地层控制线生成模块，用于确定目标地层线，根据所述目标地层线的节点生成地层控制线，所述地层控制线的节点包括可移动节点和井节点；线关联处理模块，用于构建所述地层控制线和地层线的关联关系，获得地层控制线对应的地层线集合；节点处理模块，用于在指定的地层控制线上添加初始控制点，遍历剩余地层控制线并在与初始控制点横坐标相同位置添加附属控制点；节点处理模块还用于遍历地层线并在与初始控制点横坐标相同位置添加地层线节点；节点处理模块还用于遍历砂体线，判断与初始控制点横坐标相同位置的纵向射线与当前砂体线是否相交，如果相交，则在砂体线上添加交点；点关联处理模块，用于构建地层控制线上的控制点和地层线节点的关联关系，确定并记录每个地层控制点和所述地层线集合中的每条地层线对应的节点；起伏形态表征模块，用于构建控制点、地层线节点和地层控制线三级编辑机制，通过所述三级编辑机制进行地层构造起伏形态表征。9.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质中存储用于基于控制线的地层构造起伏表征处理方法的程序代码，所述程序代码包括用于执行权利要求1至7任一项的基于控制线的地层构造起伏表征处理方法的指令。10.一种电子设备，所述电子设备包括处理器，所述处理器与存储介质耦合，其特征在于，当所述处理器执行存储介质中的指令时，使得所述电子设备执行权利要求1至7任一项的基于控制线的地层构造起伏表征处理方法。
说明书desc
技术领域本发明涉及油藏分析技术领域，具体涉及一种基于控制线的地层构造起伏表征处理方法及系统。背景技术油藏是指油在单一圈闭中具有同一压力系统的基本聚集，根据油藏成因的不同把油藏分为三类：构造油藏、地层油藏和岩性油藏，其中，构造油藏由构造变形或断裂形成的构造圈闭中的油气聚集；在地层不整合遮挡圈闭和地层超覆圈闭中聚集油气形成的油气藏被称为地层油气藏；油聚集在由于沉积条件的改变导致储集层岩性发生横向变化而形成的岩性尖灭和砂岩透镜体圈闭中，称为岩性油藏。目前，油藏剖面图作为地质研究工作中重要并常见的图件，通过油藏剖面图可以了解油藏在纵向上的变化起伏形态，包括砂层、油层、隔层分布特征、油水关系、物性特征等。现阶段，人们通过编辑地层线来表征剖面的构造起伏和微幅构造，并对砂体进行约束处理，但是传统方案需要很大的工作量，分析效率低，同时无法使砂体形态得到约束和保持，难以进行准确的油藏分析。亟需一种新的地层构造起伏表征处理方案。发明内容为此，本发明提供一种基于控制线的地层构造起伏表征处理方法及系统，实现地层微调、局部趋势调整、整体趋势调整等多级方案，解决传统方案工作量，分析效率低，无法使砂体形态得到约束和保持，难以进行准确的油藏分析问题。为了实现上述目的，本发明提供如下技术方案：第一方面，提供一种基于控制线的地层构造起伏表征处理方法，包括以下步骤：确定目标地层线，根据所述目标地层线的节点生成地层控制线，所述地层控制线的节点包括可移动节点和井节点；构建所述地层控制线和地层线的关联关系，获得地层控制线对应的地层线集合；在指定的地层控制线上添加初始控制点，遍历剩余地层控制线并在与初始控制点横坐标相同位置添加附属控制点；遍历地层线并在与初始控制点横坐标相同位置添加地层线节点；遍历砂体线，判断与初始控制点横坐标相同位置的纵向射线与当前砂体线是否相交，如果相交，则在砂体线上添加交点；构建地层控制线上的控制点和地层线节点的关联关系，确定并记录每个地层控制点和所述地层线集合中的每条地层线对应的节点；构建控制点、地层线节点和地层控制线三级编辑机制，通过所述三级编辑机制进行地层构造起伏形态表征。作为基于控制线的地层构造起伏表征处理方法的优选方案，步骤中，所述井节点是所述地层控制线和井对象的相交点，限制所述井节点的位置移动和删除；所述可移动节点允许操作、编辑及删除。作为基于控制线的地层构造起伏表征处理方法的优选方案，步骤中，当只存在一条地层控制线时，则通过一条地层控制线控制所有地层线；当存在至少两条地层控制线时，将地层线加入到距离较近的地层控制线的地层线集合中。作为基于控制线的地层构造起伏表征处理方法的优选方案，步骤中，限制砂体线上所添加交点的删除。作为基于控制线的地层构造起伏表征处理方法的优选方案，通过选中并纵向移动所述地层线节点，更新地层空间，重新计算砂体位置；通过选中并纵向移动地层控制线的控制点，更新地层控制点和地层线集合中的地层线对应节点位置，然后更新地层空间，重新计算砂体位置。作为基于控制线的地层构造起伏表征处理方法的优选方案，将每个控制点纵向绘制并外延超地层顶底范围，形成操纵线。作为基于控制线的地层构造起伏表征处理方法的优选方案，当删除指定的地层控制点时，将地层线集合中的地层线与被删除控制点对应的地层线节点也进行删除；同时，删除砂体线中与被删除控制点横坐标相同的节点。第二方面，提供基于控制线的地层构造起伏表征处理系统，采用第一方面或其任意可能实现方式的基于控制线的地层构造起伏表征处理方法，包括：地层控制线生成模块，用于确定目标地层线，根据所述目标地层线的节点生成地层控制线，所述地层控制线的节点包括可移动节点和井节点；线关联处理模块，用于构建所述地层控制线和地层线的关联关系，获得地层控制线对应的地层线集合；节点处理模块，用于在指定的地层控制线上添加初始控制点，遍历剩余地层控制线并在与初始控制点横坐标相同位置添加附属控制点；节点处理模块还用于遍历地层线并在与初始控制点横坐标相同位置添加地层线节点；节点处理模块还用于遍历砂体线，判断与初始控制点横坐标相同位置的纵向射线与当前砂体线是否相交，如果相交，则在砂体线上添加交点；点关联处理模块，用于构建地层控制线上的控制点和地层线节点的关联关系，确定并记录每个地层控制点和所述地层线集合中的每条地层线对应的节点；起伏形态表征模块，用于构建控制点、地层线节点和地层控制线三级编辑机制，通过所述三级编辑机制进行地层构造起伏形态表征。第三方面，提供一种计算机可读存储介质，所述计算机可读存储介质中存储用于基于控制线的地层构造起伏表征处理方法的程序代码，所述程序代码包括用于执行第一方面或其任意可能实现方式的基于控制线的地层构造起伏表征处理方法的指令。第四方面，提供一种电子设备，所述电子设备包括处理器，所述处理器与存储介质耦合，当所述处理器执行存储介质中的指令时，使得所述电子设备执行第一方面或其任意可能实现方式的基于控制线的地层构造起伏表征处理方法。本发明具有如下优点：通过确定目标地层线，根据目标地层线的节点生成地层控制线，地层控制线的节点包括可移动节点和井节点；构建地层控制线和地层线的关联关系，获得地层控制线对应的地层线集合；在指定的地层控制线上添加初始控制点，遍历剩余地层控制线并在与初始控制点横坐标相同位置添加附属控制点；遍历地层线并在与初始控制点横坐标相同位置添加地层线节点；遍历砂体线，判断与初始控制点横坐标相同位置的纵向射线与当前砂体线是否相交，如果相交，则在砂体线上添加交点；构建地层控制线上的控制点和地层线节点的关联关系，确定并记录每个地层控制点和地层线集合中的每条地层线对应的节点；构建控制点、地层线节点和地层控制线三级编辑机制，通过三级编辑机制进行地层构造起伏形态表征。本发明提供从局部到整体的解决思路，实现地层微调、局部趋势调整、整体趋势调整等多级快速调整方案，方便快捷，有效提高了编辑效率，且砂体形态得到了很高的约束和保持，能够准确的进行油藏分析。附图说明为了更清楚地说明本发明的实施方式或现有技术中的技术方案，下面将对实施方式或现有技术描述中所需要使用的附图作简单地介绍。显而易见地，下面描述中的附图仅仅是示例性的，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据提供的附图引伸获得其它的实施附图。本说明书所绘示的结构、比例、大小等，均仅用以配合说明书所揭示的内容，以供熟悉此技术的人士了解与阅读，并非用以限定本发明可实施的限定条件，故不具技术上的实质意义，任何结构的修饰、比例关系的改变或大小的调整，在不影响本发明所能产生的功效及所能达成的目的下，均应仍落在本发明所揭示的技术内容能涵盖的范围内。图1为本发明实施例1中提供的基于控制线的地层构造起伏表征处理方法流程示意图；图2为本发明实施例1中提供的创建地层控制线示意图；图3为本发明实施例1中提供的一条控制线情况下的地层控制线和地层的关联关系；图4为本发明实施例1中提供的两条控制线情况下的地层控制线和地层的关联关系；图5为本发明实施例1中提供的控制线添加控制点示意图；图6为本发明实施例1中提供的地层线上添加控制点示意图；图7为本发明实施例1中提供的砂体顶线和砂体底线添加控制点示意图；图8为本发明实施例1中提供的地层节点编辑示意图；图9为本发明实施例1中提供的控制线节点编辑示意图；图10为本发明实施例1中提供的操纵线示意图；图11为本发明实施例1中提供的操纵线编辑示意图；图12为本发明实施例2中提供的基于控制线的地层构造起伏表征处理系统示意图。具体实施方式以下由特定的具体实施例说明本发明的实施方式，熟悉此技术的人士可由本说明书所揭露的内容轻易地了解本发明的其他优点及功效，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例1参见图1，本发明实施例1提供一种基于控制线的地层构造起伏表征处理方法，包括以下步骤：T1、确定目标地层线，根据所述目标地层线的节点生成地层控制线，所述地层控制线的节点包括可移动节点和井节点；T2、构建所述地层控制线和地层线的关联关系，获得地层控制线对应的地层线集合；T3、在指定的地层控制线上添加初始控制点，遍历剩余地层控制线并在与初始控制点横坐标相同位置添加附属控制点；遍历地层线并在与初始控制点横坐标相同位置添加地层线节点；遍历砂体线，判断与初始控制点横坐标相同位置的纵向射线与当前砂体线是否相交，如果相交，则在砂体线上添加交点；T4、构建地层控制线上的控制点和地层线节点的关联关系，确定并记录每个地层控制点和所述地层线集合中的每条地层线对应的节点；T5、构建控制点、地层线节点和地层控制线三级编辑机制，通过所述三级编辑机制进行地层构造起伏形态表征。本实施例中，步骤T1中，所述井节点是所述地层控制线和井对象的相交点，限制所述井节点的位置移动和删除；所述可移动节点允许操作、编辑及删除。参见图2，具体的，在剖面图中，选中目标地层线，根据目标地层线的节点复制生成地层控制线。同时，地层控制线节点划分成两类，一类是可移动节点CP，一类是井节点WP。井节点WP是地层控制线和井对象的相交点，表征地层在井上位置，所以不能移动位置，不能删除。可移动节点CP是可操作，可编辑，可删除的地层控制点。初创的地层控制线有两个可移动节点CP，也就是地层控制线延出的两个端点，因为其位置可移动，所以设置为可移动节点。本实施例中，步骤T2中，当只存在一条地层控制线时，则通过一条地层控制线控制所有地层线；当存在至少两条地层控制线时，将地层线加入到距离较近的地层控制线的地层线集合中。具体的，通过建立地层控制线和地层线的关联关系，也就是确定每条地层控制线控制的地层线范围，进而确定对应的地层区域。参见图3，如果只有一条地层控制线，则剖面图中所有地层线都受其控制。参见图4，如果存在多条地层控制线，则计算每条地层线s和哪条地层控制线的距离最小，则把加入到对应的地层控制线的地层线集合中U。本实施例中，步骤T3中，限制砂体线上所添加交点的删除。参见图5，,在某一条地层控制线上可以双击添加一个可移动节点CP作为控制点，则遍历其他所有地层控制线，在X坐标相同位置同样添加可移动节点CP作为控制点。参见图6，遍历所有地层线，在X坐标相同位置同样添加地层线节点。参见图7，同理，遍历所有砂体线，计算X坐标纵向射线与当前砂体是否相交，如果相交，则在砂体线上添加交点。此交点对地层控制砂体形态至关重要，不允许手动删除。本实施例中，通过选中并纵向移动所述地层线节点，更新地层空间，重新计算砂体位置；通过选中并纵向移动地层控制线的控制点，更新地层控制点和地层线集合中的地层线对应节点位置，然后更新地层空间，重新计算砂体位置。具体的，建立地层控制线上的控制点和地层线节点的关联关系，确定并记录每个地层控制点CP和地层线集合U中的每条地层线对应的节点U。参见图8，选中并移动地层线节点，约定为只能纵向移动。更新地层空间，重新计算砂体位置。参见图9，选中并移动地层控制线可移动节点CP，约定为只能纵向移动。位移为ΔY，更新U每个节点位置，使U每个节点的位移也为ΔY，然后更新地层空间，重新计算砂体位置。本实施例中，将每个控制点纵向绘制并外延超地层顶底范围，形成操纵线。所有地层控制线的可移动节点CP个数应该相等，且对应点序的X坐标都是相同的。把每个可移动节点CP作为控制点纵向绘制并外延超地层顶底范围，形成操纵线。操纵线的目的在于：选中并移动操纵线，位移为可横纵向移动，但不能超越两侧节点范围，相当于移动每个地层控制线对应的可移动节点CP，然后更新U每个节点位置，使U每个节点的位移也为。进而更新地层空间，重新计算砂体位置。具体的，移动地层控制点的左右耳朵点，位移为，更新U每个节点的左右耳朵点位置，使U每个节点左右耳朵点的位移也为，更新地层空间，重新计算砂体位置。选中并移动地层线节点的左右耳朵点，位移为，更新地层空间，重新计算砂体位置。本实施例中，当删除指定的地层控制点时，将地层线集合中的地层线与被删除控制点对应的地层线节点也进行删除；同时，删除砂体线中与被删除控制点横坐标相同的节点。具体的，如果删除选中的地层控制点，坐标为Coord，则地层线集合U中的每条地层线删除地层控制点对应的节点。同时，删除砂体线中坐标X的节点。综上所述，本发明在剖面图中，选中目标地层线，根据目标地层线的节点复制生成地层控制线。同时，地层控制线节点划分成两类，一类是可移动节点CP，一类是井节点WP。井节点WP是地层控制线和井对象的相交点，表征地层在井上位置，所以不能移动位置，不能删除。可移动节点CP是可操作，可编辑，可删除的地层控制点。初创的地层控制线有两个可移动节点CP，也就是地层控制线延出的两个端点，因为其位置可移动，所以设置为可移动节点。通过建立地层控制线和地层线的关联关系，也就是确定每条地层控制线控制的地层线范围，进而确定对应的地层区域，如果只有一条地层控制线，则剖面图中所有地层线都受其控制。如果存在多条地层控制线，则计算每条地层线s和哪条地层控制线的距离最小，则把加入到对应的地层控制线的地层线集合中U。在某一条地层控制线上可以双击添加一个可移动节点CP作为控制点，则遍历其他所有地层控制线，在X坐标相同位置同样添加可移动节点CP作为控制点。遍历所有地层线，在X坐标相同位置同样添加地层线节点。参见图7，同理，遍历所有砂体线，计算X坐标纵向射线与当前砂体是否相交，如果相交，则在砂体线上添加交点。此交点对地层控制砂体形态至关重要，不允许手动删除。选中并移动地层控制线可移动节点CP，约定为只能纵向移动。位移为ΔY，更新U每个节点位置，使U每个节点的位移也为ΔY，然后更新地层空间，重新计算砂体位置。所有地层控制线的可移动节点CP个数应该相等，且对应点序的X坐标都是相同的。把每个可移动节点CP作为控制点纵向绘制并外延超地层顶底范围，形成操纵线。操纵线的目的在于：选中并移动操纵线，位移为可横纵向移动，但不能超越两侧节点范围，相当于移动每个地层控制线对应的可移动节点CP，然后更新U每个节点位置，使U每个节点的位移也为。进而更新地层空间，重新计算砂体位置。当移动地层控制点的左右耳朵点，位移为，更新U每个节点的左右耳朵点位置，使U每个节点左右耳朵点的位移也为，更新地层空间，重新计算砂体位置。选中并移动地层线节点的左右耳朵点，位移为，更新地层空间，重新计算砂体位置。如果删除选中的地层控制点，坐标为Coord，则地层线集合U中的每条地层线删除地层控制点对应的节点。同时，删除砂体线中坐标X的节点。本发明提供了从局部到整体的解决思路，通过编辑控制线节点，可快速调整地层形态；通过编辑操纵线，可快速调整整个剖面的地层形态；地层形态变化后，地层空间约束的砂体形态也发生改变，并得到了有效的控制，方便快捷，有效提高了编辑效率，且砂体形态得到了很高的约束和保持，能够准确的进行油藏分析。实施例2参见图12，本发明实施例2提供一种基于控制线的地层构造起伏表征处理系统，采用实施例1或其任意可能实现方式的基于控制线的地层构造起伏表征处理方法，包括：地层控制线生成模块1，用于确定目标地层线，根据所述目标地层线的节点生成地层控制线，所述地层控制线的节点包括可移动节点和井节点；线关联处理模块2，用于构建所述地层控制线和地层线的关联关系，获得地层控制线对应的地层线集合；节点处理模块3，用于在指定的地层控制线上添加初始控制点，遍历剩余地层控制线并在与初始控制点横坐标相同位置添加附属控制点；节点处理模块3还用于遍历地层线并在与初始控制点横坐标相同位置添加地层线节点；节点处理模块3还用于遍历砂体线，判断与初始控制点横坐标相同位置的纵向射线与当前砂体线是否相交，如果相交，则在砂体线上添加交点；点关联处理模块4，用于构建地层控制线上的控制点和地层线节点的关联关系，确定并记录每个地层控制点和所述地层线集合中的每条地层线对应的节点；起伏形态表征模块5，用于构建控制点、地层线节点和地层控制线三级编辑机制，通过所述三级编辑机制进行地层构造起伏形态表征。需要说明的是，上述装置各模块/单元之间的信息交互、执行过程等内容，由于与本申请实施例1中的方法实施例基于同一构思，其带来的技术效果与本申请方法实施例相同，具体内容可参见本申请前述所示的方法实施例中的叙述，此处不再赘述。实施例3本发明实施例3提供一种计算机可读存储介质，所述计算机可读存储介质中存储用于基于控制线的地层构造起伏表征处理方法的程序代码，所述程序代码包括用于执行实施例1或其任意可能实现方式的基于控制线的地层构造起伏表征处理方法的指令。计算机可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集成的服务器、数据中心等数据存储设备。所述可用介质可以是磁性介质，、光介质、或者半导体介质)等。实施例4本发明实施例4提供一种电子设备，所述电子设备包括处理器，所述处理器与存储介质耦合，当所述处理器执行存储介质中的指令时，使得所述电子设备执行实施例1或其任意可能实现方式的基于控制线的地层构造起伏表征处理方法。具体的，处理器可以通过硬件来实现也可以通过软件来实现，当通过硬件实现时，该处理器可以是逻辑电路、集成电路等；当通过软件来实现时，该处理器可以是一个通用处理器，通过读取存储器中存储的软件代码来实现，该存储器可以集成在处理器中，可以位于所述处理器之外，独立存在。在上述实施例中，可以全部或部分地通过软件、硬件、固件或者其任意组合来实现。当使用软件实现时，可以全部或部分地以计算机程序产品的形式实现。所述计算机程序产品包括一个或多个计算机指令。在计算机上加载和执行所述计算机程序指令时，全部或部分地产生按照本发明实施例所述的流程或功能。所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。所述计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，所述计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线)或无线方式向另一个网站站点、计算机、服务器或数据中心进行传输。显然，本领域的技术人员应该明白，上述的本发明的各模块或各步骤可以用通用的计算装置来实现，它们可以集中在单个的计算装置上，或者分布在多个计算装置所组成的网络上，可选地，它们可以用计算装置可执行的程序代码来实现，从而，可以将它们存储在存储装置中由计算装置来执行，并且在某些情况下，可以以不同于此处的顺序执行所示出或描述的步骤，或者将它们分别制作成各个集成电路模块，或者将它们中的多个模块或步骤制作成单个集成电路模块来实现。这样，本发明不限制于任何特定的硬件和软件结合。虽然，上文中已经用一般性说明及具体实施例对本发明作了详尽的描述，但在本发明基础上，可以对之作一些修改或改进，这对本领域技术人员而言是显而易见的。因此，在不偏离本发明精神的基础上所做的这些修改或改进，均属于本发明要求保护的范围。
