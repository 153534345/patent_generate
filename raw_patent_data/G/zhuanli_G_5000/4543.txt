标题title
一种面向大型社区的交通智能管理方法
摘要abst
本发明公开了一种面向大型社区的交通智能管理方法，所述大型社区内的道路每隔预设第一距离安装有分别朝向不同交通方向的摄像机，摄像机在监测到交通事件时，作为消息源摄像机，首先查询自身是否已经建立事件组播组，如果已经建立，则向事件组播组发送交通事件信息，否则申请一个组播组地址，向与自身朝向相同的上游邻居摄像机发送通知消息。其他摄像机在接收到通知消息后，判断是否加入组播组中，消息源摄像机在接收到确认消息后将发送确认消息的摄像机加入自己维护的事件组播组摄像机列表。接收到交通事件信息的摄像机将交通事件信息通知给自己覆盖范围内的车辆，进行导航优化。本发明实现了社区临时占道事件实时通知，提高了导航及时性。
权利要求书clms
1.一种面向大型社区的交通智能管理方法，其特征在于，所述大型社区内的道路每隔预设第一距离安装有分别朝向不同交通方向的第一摄像机以及针对潮汐车道的第二摄像机，所述第二摄像机随着潮汐时间改变朝向，所述面向大型社区的交通智能管理方法，包括：所述第一摄像机、第二摄像机获取上下游邻居摄像机的摄像机信息；任意摄像机在监测到交通事件时，作为消息源摄像机，首先查询自身是否已经建立事件组播组，如果已经建立，则向事件组播组发送交通事件信息，否则申请一个组播组地址，向与自身朝向相同的上游邻居摄像机发送通知消息；任意摄像机在接收到通知消息后，计算与消息源摄像机的距离，如果超出预设的第二距离，则不作处理，否则回复消息进行确认后加入组播组，并继续向与自身朝向相同的上游邻居摄像机发送通知消息；消息源摄像机在接收到确认消息后将发送确认消息的摄像机加入自己维护的事件组播组摄像机列表；接收到交通事件信息的摄像机将交通事件信息通知给自己覆盖范围内的用户导航设备，接收到交通事件信息的用户导航设备规划导航路线避开出现交通事件的位置。2.根据权利要求1所述的面向大型社区的交通智能管理方法，其特征在于，所述摄像机在接收到通知消息后，还执行如下操作：通过自己保存的下游邻居摄像机ID和IP地址信息，核对消息来源的合法性，如果消息来源与自身保存的一致则判断合法，在合法的情况下才发送确认消息并加入组播组，否则丢弃通知消息。3.根据权利要求1所述的面向大型社区的交通智能管理方法，其特征在于，所述第二摄像机在感知到自身的朝向发生变更后，发送变更消息通知其他摄像机自己的朝向发生变更，其他摄像机在接收到第二摄像机发送的变更消息后，更新自己维护的事件组播组摄像机列表。4.根据权利要求3所述的面向大型社区的交通智能管理方法，其特征在于，所述其他摄像机在接收到第二摄像机发送的变更消息后，更新自己维护的事件组播组摄像机列表，包括：若第二摄像机在自己维护的事件组播组摄像机列表中，则删除所述第二摄像机；若第二摄像机不在自己维护的事件组播组摄像机列表中，则查看所述第二摄像机的朝向以及与自己的距离，若朝向相同且在第二距离范围内，则将所述第二摄像机加入自己维护的事件组播组摄像机列表中。5.根据权利要求3所述的面向大型社区的交通智能管理方法，其特征在于，所述第一摄像机和第二摄像机设置有各自的编号，各自的编号沿着道路依次递增，所述其他摄像机在接收到第二摄像机发送的变更消息后，更新自己维护的事件组播组摄像机列表，包括：若第二摄像机在自己维护的事件组播组摄像机列表中，则删除所述第二摄像机；若第二摄像机不在自己维护的事件组播组摄像机列表中，则查看所述第二摄像机的朝向和编号，若朝向相同且其编号在自身维护的事件组播组摄像机列表中的摄像机编号之间，则将所述第二摄像机加入自己维护的事件组播组摄像机列表中。6.根据权利要求1所述的面向大型社区的交通智能管理方法，其特征在于，所述接收到交通事件信息的用户导航设备规划导航路线避开出现交通事件的位置，包括：判断事件发生位置是否在自己导航路线经过的范围，若否，则忽略该消息，若是，则根据事件类型进行导航优化；其中，若事件类型为短时间无法消除的事件，且事件位置距离较近，则在导航显示中将事件所在位置从推荐路线中删除，但若事件位置距离较远，则暂时不必将事件所在位置从推荐路线中删除，待距离接近到一定阈值后，再从推荐路线中删除，仅给予提示；若事件类型为快速消除的类型，则将事件所在位置标记为特殊颜色，由用户决定是否避开该位置。
说明书desc
技术领域本申请属于智能社区管理技术领域，尤其涉及一种面向大型社区的交通智能管理方法。背景技术在开放式的大型社区，智能社区管理有利于实现规模化收益，但运营管理也会更加复杂。为了便于大型社区的用户方便快捷的到达目标地点，智能社区如果能提供事件通知服务，通过与用户导航APP交互，优化用户的行动路径，将能够大大提高用户的用户体验。传统方案中APP的导航功能依赖于导航服务商提供的信息，事件实时性不足，比如社区某个道路正在搬家，导致临时性阻塞，依赖导航服务商提供的信息来进行导航引导就无法进行提前规避。同时，对于社区内车辆的通行来说，为了提高通行效率，应提供车道级服务，尤其在相关车道因为垃圾清理、事故发生、搬家搬运等原因造成临时性占道时，需要提前通知车主变道。此外，大型社区的交通流量不小，为了提高不同时段的通行效率，潮汐车道是提高车辆通行效率的可选方案。面对上述大型社区的复杂交通状况，目前尚没有针对性的解决方案来进行交通引导。发明内容本申请的目的是提供一种面向大型社区的交通智能管理方法，以克服大型社区内复杂交通状况带来的交通不便问题，并提高社区的品质。为了实现上述目的，本申请技术方案如下：一种面向大型社区的交通智能管理方法，所述大型社区内的道路每隔预设第一距离安装有分别朝向不同交通方向的第一摄像机以及针对潮汐车道的第二摄像机，所述第二摄像机随着潮汐时间改变朝向，所述面向大型社区的交通智能管理方法，包括：所述第一摄像机、第二摄像机获取上下游邻居摄像机的摄像机信息；任意摄像机在监测到交通事件时，作为消息源摄像机，首先查询自身是否已经建立事件组播组，如果已经建立，则向事件组播组发送交通事件信息，否则申请一个组播组地址，向与自身朝向相同的上游邻居摄像机发送通知消息；任意摄像机在接收到通知消息后，计算与消息源摄像机的距离，如果超出预设的第二距离，则不作处理，否则回复消息进行确认后加入组播组，并继续向与自身朝向相同的上游邻居摄像机发送通知消息；消息源摄像机在接收到确认消息后将发送确认消息的摄像机加入自己维护的事件组播组摄像机列表；接收到交通事件信息的摄像机将交通事件信息通知给自己覆盖范围内的用户导航设备，接收到交通事件信息的用户导航设备规划导航路线避开出现交通事件的位置。进一步的，所述摄像机在接收到通知消息后，还执行如下操作：通过自己保存的下游邻居摄像机ID和IP地址信息，核对消息来源的合法性，如果消息来源与自身保存的一致则判断合法，在合法的情况下才发送确认消息并加入组播组，否则丢弃通知消息。进一步的，所述第二摄像机在感知到自身的朝向发生变更后，发送变更消息通知其他摄像机自己的朝向发生变更，其他摄像机在接收到第二摄像机发送的变更消息后，更新自己维护的事件组播组摄像机列表。进一步的，所述其他摄像机在接收到第二摄像机发送的变更消息后，更新自己维护的事件组播组摄像机列表，包括：若第二摄像机在自己维护的事件组播组摄像机列表中，则删除所述第二摄像机；若第二摄像机不在自己维护的事件组播组摄像机列表中，则查看所述第二摄像机的朝向以及与自己的距离，若朝向相同且在第二距离范围内，则将所述第二摄像机加入自己维护的事件组播组摄像机列表中。进一步的，所述第一摄像机和第二摄像机设置有各自的编号，各自的编号沿着道路依次递增，所述其他摄像机在接收到第二摄像机发送的变更消息后，更新自己维护的事件组播组摄像机列表，包括：若第二摄像机在自己维护的事件组播组摄像机列表中，则删除所述第二摄像机；若第二摄像机不在自己维护的事件组播组摄像机列表中，则查看所述第二摄像机的朝向和编号，若朝向相同且其编号在自身维护的事件组播组摄像机列表中的摄像机编号之间，则将所述第二摄像机加入自己维护的事件组播组摄像机列表中。进一步的，所述接收到交通事件信息的用户导航设备规划导航路线避开出现交通事件的位置，包括：判断事件发生位置是否在自己导航路线经过的范围，若否，则忽略该消息，若是，则根据事件类型进行导航优化；其中，若事件类型为短时间无法消除的事件，且事件位置距离较近，则在导航显示中将事件所在位置从推荐路线中删除，但若事件位置距离较远，则暂时不必将事件所在位置从推荐路线中删除，待距离接近到一定阈值后，再从推荐路线中删除，仅给予提示；若事件类型为快速消除的类型，则将事件所在位置标记为特殊颜色，由用户决定是否避开该位置。本申请提出了一种面向大型社区的交通智能管理方法，采用多摄像机单播和组播协同的定向组播方法，将交通信息定向传播给同向摄像机。摄像机向经过的用户导航设备快速连接并发送车道级交通状态信息，用户导航设备自主识别事件的地点和类型，根据事件地点和类型进行导航优化，实现社区临时占道事件实时通知，对于车辆来说提前通知，提高了导航及时性。附图说明图1为本申请面向大型社区的交通智能管理方法流程示意图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅用以解释本申请，并不用于限定本申请。本方案提供一种社区智能管理方式，由社区摄像机与用户导航设备交互，及时将信息通告给用户导航设备，便于用户导航设备优化行走路径或开车行驶路径。对于走路方式的用户，社区摄像机通过识别用户人脸，将道路事件信息发送给用户导航设备，优化用户到达商铺的行走路径。对于开车的用户，用户向管理平台上报车牌号码，社区的摄像机可以通过识别车牌号，协助优化用户的行车路径。本申请技术方案提供了针对用户行人和车辆的局部区域增强智能导航，同时支持面向潮汐车道的多摄像机协同管理方法。总体思路是通过路侧监控摄像机实时获取各个车道的临时占道事件，对于行走的用户，用户在用户导航设备上提交商铺名称作为目的地址。管理平台根据用户ID调取用户人脸照片，发送给社区内所有摄像机。摄像机通过比对人脸，发现是想去商铺的用户，则及时通过5G等无线技术与用户导航设备通信，向该用户导航设备通告道路事件，协助优化行走导航路径。对于开车的用户，用户在用户导航设备上提交车牌以及目的商铺，摄像机通过车牌识别，发现该用户的车辆，则通过5G等无线技术与用户导航设备通信，通告道路事件。需要说明的是，本申请用户导航设备，可以是安装有APP的用户手机，用来进行信息的交互并进行导航。也可以是用户车辆上的车载设备，本申请不限于具体的终端类型，以下不再赘述。以下以车辆的导航作为具体的实施例进行说明，同时对行人的导航同样适用。用户导航设备支持5G专网等无线技术接入，并可以根据接收到的交通信息自主更改导航信息。路测监控摄像机将临时占道事件通过组播定向通知给事件发生车道的上游路侧摄像机，由这些上游的路侧摄像机以5G专网的方式通知给经过该摄像机的用户导航设备；用户导航设备收到信息，将占道事件发生的位置和车道信息绘制在导航地图上，同时优化导航路线，例如，正常前向车道共有3个车道，当收到前方的中间车道有事故，则用户导航设备建议的前向车道只出现左右两个车道，从而引导车辆避开事故车道，加快通行。对于潮汐车道，该车道上的摄像机支持在约定时间180度转动朝向，使得摄像机的朝向永远迎着车流。在一个实施例中，如图1所示，提供了一种面向大型社区的交通智能管理方法，所述大型社区内的道路每隔预设第一距离安装有分别朝向不同交通方向的第一摄像机以及针对潮汐车道的第二摄像机，所述第二摄像机随着潮汐时间改变朝向，所述面向大型社区的交通智能管理方法，包括：所述第一摄像机、第二摄像机获取上游邻居摄像机的摄像机信息；任意摄像机在监测到交通事件时，作为消息源摄像机，首先查询自身是否已经建立事件组播组，如果已经建立，则向事件组播组发送交通事件信息，否则申请一个组播组地址，向与自身朝向相同的上游邻居摄像机发送通知消息；任意摄像机在接收到通知消息后，计算与消息源摄像机的距离，如果超出预设的第二距离，则不作处理，否则回复消息进行确认后加入组播组，并继续向与自身朝向相同的上游邻居摄像机发送通知消息；消息源摄像机在接收到确认消息后将发送确认消息的摄像机加入自己维护的事件组播组摄像机列表；接收到交通事件信息的摄像机将交通事件信息通知给自己覆盖范围内的用户导航设备，接收到交通事件信息的用户导航设备规划导航路线避开出现交通事件的位置。具体的，社区内道路每隔一定距离通过龙门架等方式安装摄像机，摄像机可以识别一定距离范围之内的临时占道事件、交通状态等信息，所有的摄像机通过网络互通，每个摄像机拥有一个ID编号。由于摄像机对交通占道事件检测的有效距离有限，因此每个摄像机仅能识别一定距离范围之内的临时占道事件和交通状态，且每个摄像机都朝向逆着交通流向的方向。本实施例每个龙门架上会至少安装3个摄像机，其中2个摄像机固定朝向，逆着车流或人流，即朝向车道的来车或来人方向。在以下的描述中，以车辆为例，对于行人同样适用。一般道路有两个方向的来车，因此设置至少两个摄像机分别朝向不同的方向。在车道数目多的情况下，还可以为每个车道设置一个摄像机，这里不再赘述。另一个摄像机针对潮汐车道，在约定时刻会180度更换朝向，但永远逆着车流。摄像机识别到自己所辖区段内发生的临时占道事故或拥堵等交通事件时，自身作为消息源摄像机。通过与上游摄像机的协同，将临时占道事件发生的地理位置信息、车道号等信息通知给车流上游的那些摄像机。收到通知消息的摄像机将消息通知给经过自己附近的车载导航仪，以便这些车辆提前做好变道等准备，从而提供一定的区域性导航服务。为了保证通知消息投射精确性，消息源摄像机应该将所辖路段的临时占道点信息定向通知给车流逆方向的一定距离范围之内的上游摄像机，由上游摄像机通知给附近的车载导航仪。本实施例通过定向组播来实现，每个摄像机均有独立的ID，且每个摄像机仅负责单向的交通状态监控。因此，区域管理平台向每个摄像机下发其上下游邻居摄像机ID、邻居摄像机的朝向和IP地址信息，以及定向通知的传播半径。设置传播半径的原因是，向过于远的摄像机发送消息，会产生无意义的干扰。例如，当某路段的摄像机A发现自己视野范围内的第2个车道出现临时占道事件，若摄像机A是第一次检测到交通事件信息，则向管理平台申请一个新的组播组地址。管理平台为摄像机A选择一个未分配出去的组播组地址，例如226.10.10.10，回复给摄像机A。摄像机A寻找朝向与自己相同的上游邻居摄像机，假如邻居摄像机B对着自己，与自己朝向不同，而邻居摄像机C朝向与自己相同，则摄像机A向摄像机C发送车道的临时占道通知信息，内含车道号、地理位置信息和临时占道类型以及消息源摄像机ID等，以及组播组地址226.10.10.10，报文的目的地址为摄像机C的单播IP地址。摄像机C收到来自摄像机A的消息，摄像机C计算自己的地理位置与消息源摄像机的地理位置的距离差是否在预设的传播半径之内，如果是，则摄像机C向消息源摄像机，即摄像机A单播发送确认消息，并在后续的时间里，摄像机C周期性的发送关于组播组226.10.10.10的IGMP加入消息，加入该组播组。摄像机C还参照摄像机A查找逆着车流的朝向与自己相同的上游邻居摄像机，假设找到的上游邻居摄像机为摄像机E，则向摄像机E发送车道事故信息，内含车道号、地理位置信息和交通事件类型以及消息源摄像机ID等，以及组播组地址226.10.10.10，报文的目的地址为摄像机E的单播IP地址。然后，摄像机E向消息源摄像机，即摄像机A单播发送确认消息，后续，摄像机E周期性的发送关于组播组226.10.10.10的IGMP加入消息。摄像机E继续寻找合适的上游邻居摄像机，以此类推。摄像机A收到确认消息后，生成一个与该组播组对应的事件组播组摄像机列表，将摄像机C、E加入自己维护的事件组播组摄像机列表，列表中的摄像机按照ID编号次序排列。需要说明的是，为了防止非法的用户攻击，本申请管理平台还向每个摄像机下发其上下游邻居摄像机ID、邻居摄像机的朝向和IP地址信息，以及定向通知的传播半径。从而，接收到通知消息的摄像机，还通过自己保存的来自管理平台的下游邻居摄像机ID和IP地址信息，核对消息来源的合法性，如果消息来源与自身保存的一致则判断合法，在合法的情况下才发送确认消息并加入组播组，否则丢弃通知消息。本申请当摄像机A再次发现临时占道等交通事件时，不再寻找上游邻居摄像机，而是向组播组226.10.10.10发送组播消息即可，上次找到的上游摄像机均可以收到该消息。相对于单播的接力方式，组播传播的时延会小很多，免去了接力摄像机的分析判断时间。接收到通知消息的摄像机，位于消息源摄像机的上游，即来车方向。从而将交通事件信息通知给自己覆盖范围内的车辆，以便接收到交通事件信息的车辆避开出现交通事件的车道。例如，上游摄像机C、E、G等收到来自摄像机A的临时占道事件消息后，通过专网5G向经过的用户导航设备快速连接并发送车道级交通状态信息。此消息不发送给任何基站，避免基站转发消息。由于5G的单跳传递范围仅300米左右，因此信息传送不会太广，保证仅发送给附近经过的用户导航设备。用户导航设备收到消息后，根据消息中事件点所在的地理位置、车道号、临时占道事件类型，自主对导航信息进行优化处理。所述接收到交通事件信息的用户导航设备规划导航路线避开出现交通事件的位置，包括：判断事件发生位置是否在自己导航路线经过的范围，若否，则忽略该消息，若是，则根据事件类型进行导航优化；其中，若事件类型为短时间无法消除的事件，且事件位置距离较近，则在导航显示中将事件所在位置从推荐路线中删除，但若事件位置距离较远，则暂时不必将事件所在位置从推荐路线中删除，待距离接近到一定阈值后，再从推荐路线中删除，仅给予提示；若事件类型为快速消除的类型，则将事件所在位置标记为特殊颜色，由用户决定是否避开该车道。具体的，首先判断事件点是否在自己导航路线经过的范围，若否，则忽略该消息。若是，则根据事件类型进行导航优化，若事件类型是搬家搬运等短时间无法消除的事故，且事件点距离较近，则在导航显示中将第2车道从推荐车道中删除，但若事件点距离较远，则暂时不必将第2车道从推荐车道中删除，待距离接近到一定阈值，再从推荐车道中删除，仅给予提示。若事件类型为垃圾清运等可以快速消除的类型，则可以在导航显示中将第2车道标记为特殊颜色，由驾驶员决定是否避开该车道。在一个具体的实施例中，所述第二摄像机在感知到自身的朝向发生变更后，发送变更消息通知其他摄像机自己的朝向发生变更，其他摄像机在接收到第二摄像机发送的变更消息后，更新自己维护的事件组播组摄像机列表。显然，每个摄像机均可能加入多个组播组，每个组播组对应一个消息源摄像机，每个消息源摄像机也会拥有一个对应的组播组地址。当潮汐车道上的摄像机Z在车道变向的时刻更改了朝向，该摄像机内置的北斗和电子罗盘会感知到自身方向的改变，则立刻以广播的方式向全网公告自己的朝向更改行为，消息内含：当前的朝向、自身的ID和地理信息、上下游邻居摄像机ID、之前加入的组播组列表等信息。并不再向这些组播组发送周期性的IGMP加入消息。其他摄像机收到该摄像机的朝向更改行为的变更消息后，更新自己维护的事件组播组摄像机列表。在一个具体的实施例中，若第二摄像机在自己维护的事件组播组摄像机列表中，则删除所述第二摄像机；若第二摄像机不在自己维护的事件组播组摄像机列表中，则查看所述第二摄像机的朝向以及与自己的距离，若朝向相同且在第二距离范围内，则将所述第二摄像机加入自己维护的事件组播组摄像机列表中。具体的，判断该摄像机ID是否在自己维护的事件组播组摄像机列表中，若是，则直接删除该ID。如果在自己的事件组播组摄像机列表中，则说明原来朝向与自己相同，现在更改朝向了，所以监测的道路方向不同，可以从列表中删除。而如果不再自己的列表中，则在收到变更消息后，查看其朝向与自己是否相同，如果不同则不用理会。如果相同，则进一步计算与该第二摄像机的距离，如果在传播半径内，则发送消息给摄像机Z，通知其周期性的加入自己用于发送消息的组播组，并将该摄像机的ID插入到自己维护的事件组播组摄像机列表中，后续在监测到交通事件后，使得该第二摄像机能够收到组播消息。在另一个具体的实施例中，所述第一摄像机和第二摄像机设置有各自的编号，各自的编号沿着道路依次递增，所述其他摄像机在接收到第二摄像机发送的变更消息后，更新自己维护的事件组播组摄像机列表，包括：若第二摄像机在自己维护的事件组播组摄像机列表中，则删除所述第二摄像机；若第二摄像机不在自己维护的事件组播组摄像机列表中，则查看所述第二摄像机的朝向和编号，若朝向相同且其编号在自身维护的事件组播组摄像机列表中的摄像机编号之间，则将所述第二摄像机加入自己维护的事件组播组摄像机列表中。具体的，本实施例摄像机的编号依次编号，这样相邻的摄像机编号连续，从而可以根据编号判断是否在自己的传播半径内。同样的，先判断该摄像机ID是否在自己维护的事件组播组摄像机列表中，若是，则直接删除该ID。如果在自己的事件组播组摄像机列表中，则说明原来朝向与自己相同，现在更改朝向了，所以监测的道路方向不同，可以从列表中删除。而如果不再自己的列表中，则在收到变更消息后，查看其朝向与自己是否相同，如果不同则不用理会。如果相同，则判断该摄像机是否介于自己保存的事件组播组摄像机列表中的两个ID之间，如果是则表明在传播半径内，则发送消息给摄像机Z，通知其周期性的加入自己用于发送消息的组播组，并将该摄像机的ID插入到自己维护的事件组播组摄像机列表中，后续在监测到交通事件后，使得该第二摄像机能够收到组播消息。本申请技术方案，潮汐车道摄像机调向时的快速组播重组，摄像机发现临时占道事件，采用多摄像机单播和组播协同的定向组播方法，将交通信息定向传播给同向摄像机。用户导航设备自主识别事件的地点和类型，根据事件地点和类型进行导航优化。用户导航设备快速接受交通事件的局部增强导航方法，摄像机通过专网5G，向经过的用户导航设备快速连接并发送车道级交通状态信息。实现社区临时占道事件实时通知，对于车辆来说提前通知，提高了导航及时性。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请专利的保护范围应以所附权利要求为准。
