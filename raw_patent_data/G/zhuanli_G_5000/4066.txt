标题title
一种基于全寿命周期的径流预报模型评价方法
摘要abst
本发明涉及一种基于全寿命周期的径流预报模型评价方法，该方法通过建立包括数据综合质量指标P1、预报因子综合质量指标P2、样本代表性指标P3、模型泛化性指标P4和结果综合质量指标P5的指标评价体系，能够对径流预报模型的模型综合性能、预报流程等进行全面评价，便于了解掌握径流预报模型在预报过程中薄弱环节以进行改进，从而提高径流预报模型的应用效果。
权利要求书clms
1.一种基于全寿命周期的径流预报模型评价方法，其特征在于：包括，S1，获取历史径流数据，确定预报因子并对预报因子进行筛选，构建用于径流预报模型的样本总体；S2，将样本总体划分为训练集和测试集，采用训练集对径流预报模型进行训练，再由测试集进行预测；S3，建立径流预报模型评价指标体系，包括数据综合质量指标P1、预报因子综合质量指标P2、样本代表性指标P3、模型泛化性指标P4和结果综合质量指标P5；S4，通过模型泛化性指标P4和结果综合质量指标P5对径流预报模型综合性能进行评估；S5，通过数据综合质量指标P1、预报因子综合质量指标P2、样本代表性指标P3、模型泛化性指标P4和结果综合质量指标P5对径流预报流程的综合效果进行评估。2.根据权利要求1所述的基于全寿命周期的径流预报模型评价方法，其特征在于：所述数据综合质量指标P1由下式计算：P1＝1-/2其中W表示历史径流数据缺省率，Qa表示历史径流数据异常率，W、Qa的计算方式如下：其中n为流域内观测站点总数，Ai为站点i的缺失数据量，Bi为站点i的理论数据量，C i为站点i的异常数据量，Di为站点i的实际数据量。3.根据权利要求2所述的基于全寿命周期的径流预报模型评价方法，其特征在于：所述预报因子综合质量指标P2由下式计算：P2＝/2其中Qq表示预报因子质量指标，Qs表示预报因子数量指标，Qq、Qs的计算方式如下：其中|raj|表示第j个预报因子与径流预测目标序列之间的相关系数的绝对值，N表示特征数量即预报因子数量，M表示和径流预测目标序列相关系数绝对值最大的前M个预报因子数量，表示前M个预报因子中第ja个预报因子与径流预测目标序列之间的相关系数的绝对值。4.根据权利要求3所述的基于全寿命周期的径流预报模型评价方法，其特征在于：所述样本代表性指标P3由下式计算：P3＝1-/2其中，Rmean表示样本均值偏移率，Rstd表示样本标准差偏移率，Rmean、Rstd由下式计算，其中μ表示总体输出变量的均值，表示样本输出变量的均值，σ表示总体输出变量的标准差，σy表示样本输出变量的标准差。5.根据权利要求4所述的基于全寿命周期的径流预报模型评价方法，其特征在于：所述模型泛化性指标P4综合考虑了模型测试集与训练集的相对均方根误差和拟合优度因素，同时兼顾样本数量和样本的预报因子数量，具体计算方式如下：其中GPRMSE表示均方根泛化率指标，表示拟合优度泛化率指标；GPRMSE由下式计算：其中，RMSEtest表示模型测试集均方根误差，RMSEtrain表示模型训练集均方根误差，RMSEtest、RMSEtrain由RMSE计算公式对模型测试集和模型训练集进行计算得到，RMSE计算公式如下：其中Qk表示计算序列中第k个实测值，表示通过径流预报模型计算得出的第k个模拟值，H’为计算序列长度，如果GPRMSE＞1则令其为1；由下式计算：其中，其中，表示模型训练集的拟合优度，表示模型测试集的拟合优度，表示校正后的表示校正后的l1、l2分别表示训练集和测试集样本数量，N表示特征数量即预报因子数量；由拟合优度R2计算公式对模型测试集和模型训练集进行计算得到，R2计算公式如下：其中，Qk表示计算序列第k个实测值，为通过径流预报模型计算得出的第k个模拟值，表示计算序列实测值的均值，H’为计算序列长度。6.根据权利要求5所述的基于全寿命周期的径流预报模型评价方法，其特征在于：所述结果综合质量指标P5由下式计算：其中rb为模拟序列与径流预测目标序列的相关系数值，μo和σo分别为径流预测目标序列实测值的均值和标准差，μm和σm分别为模拟序列的均值和标准差。7.根据权利要求6所述的基于全寿命周期的径流预报模型评价方法，其特征在于：所述S4中对径流预报模型综合性能进行评估，具体包括：S41，计算模型欧式距离Dm：S42，对模型欧式距离进行归一化处理得出模型综合性能指标NDm，并通过NDm的值是否接近1来判断径流预报模型的综合性能，NDm的计算方式具体为：8.根据权利要求6所述的基于全寿命周期的径流预报模型评价方法，其特征在于：所述S5中对径流预报流程的综合效果进行评估，具体包括：S51，计算预报流程欧式距离DF：S52，对预报流程欧式距离进行归一化处理得出预报流程综合效果指标NDF，并通过NDF的值是否接近1来判断预报流程的综合效果，NDF的计算方式具体为：9.根据权利要求2所述的基于全寿命周期的径流预报模型评价方法，其特征在于：所述数据异常率计算过程中判断数据为异常数据的方式为：利用箱型图方式给定一个置信区间，置信区间上下限值记为Zup和Zdown，下四分位数为Z1，上四分位为数Z3，置信区间的上下限值计算方式如下：Zup＝Z3+1.5，Zdown＝Z1-1.5，处于箱体的上边界Zup和下边界Zdown之外的数据，视为统计上的异常数据。
说明书desc
技术领域本发明涉及水文预报技术领域，尤其涉及一种基于全寿命周期的径流预报模型评价方法。背景技术径流预报是应用水文学的一个重要组成部分，它是建立在掌握客观水文规律的基础上，预见未来径流变化的一门应用科学技术，是水资源调度、水利防汛和抗旱科学实施的重要依据。径流预报往往依赖于径流预报模型，并且随着水文数据爆发性的增长，越来越多的基于大数据构建的径流预报模型在生产中逐步应用，比如线性回归、梯度提升回归、支撑向量回归等等。而径流预报模型的准确性将直接影响着管理者优化调度的决策，进而关乎人们的生命财产安全。因此如何评价径流预报模型的综合性能显得至关重要，一个科学全面的评价标准，对预测的全流程以及不同预测模型的筛选和修正起着关键作用。现有技术中使用较多的是采用均方根误差、纳什效率系数等方法进行评价，但是这些方法对径流预报模型的评价往往侧重于某一方面，对径流预报模型的评价不够全面。发明内容本发明所要解决的技术问题是提供一种基于全寿命周期的径流预报模型评价方法，该方法能够对径流预报模型的整体性能进行全面评价，以便于提高径流预报模型的预测效果。本发明解决上述技术问题所采用的技术方案为：一种基于全寿命周期的径流预报模型评价方法，包括，S1，获取历史径流数据，确定预报因子并对预报因子进行筛选，构建用于径流预报模型的样本总体；S2，将样本总体划分为训练集和测试集，采用训练集对径流预报模型进行训练，再由测试集进行预测；S3，建立径流预报模型评价指标体系，包括数据综合质量指标P1、预报因子综合质量指标P2、样本代表性指标P3、模型泛化性指标P4和结果综合质量指标P5；S4，通过模型泛化性指标P4和结果综合质量指标P5对径流预报模型综合性能进行评估；S5，通过数据综合质量指标P1、预报因子综合质量指标P2、样本代表性指标P3、模型泛化性指标P4和结果综合质量指标P5对径流预报流程的综合效果进行评估。进一步的，所述数据综合质量指标P1由下式计算：P1＝1-/2其中W表示历史径流数据缺省率，Qa表示历史径流数据异常率，W、Qa的计算方式如下：其中n为流域内观测站点总数，Ai为站点i的缺失数据量，Bi为站点i的理论数据量，Ci为站点i的异常数据量，Di为站点i的实际数据量，当n＝1时上式表示单个站点的数据缺省率和数据异常率。进一步的，所述预报因子综合质量指标P2由下式计算：P2＝/2其中Qq表示预报因子质量指标，Qs表示预报因子数量指标，Qq、Qs的计算方式如下：Qq＝max{|ra1|,…,|raj|,…,|raN|}，其中|raj|表示第j个预报因子与径流预测目标序列之间的相关系数的绝对值，N表示特征数量即预报因子数量，M表示和径流预测目标序列相关系数绝对值最大的前M个预报因子数量，表示前M个预报因子中第ja个预报因子与径流预测目标序列之间的相关系数的绝对值。进一步的，所述样本代表性指标P3由下式计算：P3＝1-/2其中，Rmean表示样本均值偏移率，Rstd表示样本标准差偏移率，Rmean、Rstd由下式计算，其中μ表示总体输出变量的均值，表示样本输出变量的均值，σ表示总体输出变量的标准差，σy表示样本输出变量的标准差。进一步的，所述模型泛化性指标P4综合考虑了模型测试集与训练集的相对均方根误差和拟合优度因素，同时兼顾样本数量和样本的预报因子数量，具体计算方式如下：其中GPRMSE表示均方根泛化率指标，表示拟合优度泛化率指标；GPRMSE由下式计算：其中，RMSEtest表示模型测试集均方根误差，RMSEtrain表示模型训练集均方根误差，RMSEtest、RMSEtrain由RMSE计算公式对模型测试集和模型训练集进行计算得到，RMSE计算公式如下：其中Qk表示计算序列中第k个实测值，表示通过径流预报模型计算得出的第k个模拟值，H’为计算序列长度，如果GPRMSE＞1则令其为1；由下式计算：其中，其中，表示模型训练集的拟合优度，表示模型测试集的拟合优度，表示校正后的表示校正后的l1、l2分别表示训练集和测试集样本数量，N表示特征数量即预报因子数量；由拟合优度R2计算公式对模型测试集和模型训练集进行计算得到，R2计算公式如下：其中，Qk为计算序列第k个实测值，为通过径流预报模型计算得出的第k个模拟值，表示计算序列的实测值的均值，H’为计算序列长度。进一步的，所述结果综合质量指标P5由下式计算：其中rb为模拟序列与径流预测目标序列的相关系数值，μo和σo分别为径流预测目标序列实测值的均值和标准差，μm和σm分别为模拟序列的均值和标准差。进一步的，所述S4中对径流预报模型综合性能进行评估，具体包括：S41，计算模型欧式距离Dm：S42，对模型欧式距离进行归一化处理得出模型综合性能指标NDm，并通过NDm的值是否接近1来判断径流预报模型的综合性能，NDm的计算方式具体为：进一步的，所述S5中对径流预报流程的综合效果进行评估，具体包括：S51，计算预报流程欧式距离DF：S52，对预报流程欧式距离进行归一化处理得出预报流程综合效果指标NDF，并通过NDF的值是否接近1来判断预报流程的综合效果，NDF的计算方式具体为：进一步的，所述数据异常率计算过程中判断数据为异常数据的方式为：利用箱型图方式给定一个置信区间，置信区间上下限值记为Zup和Zdown，下四分位数为Z1，上四分位为数Z3，置信区间的上下限值计算方式如下：Zup＝Z3+1.5，Zdown＝Z1-1.5，处于箱体的上边界Zup和下边界Zdown之外的数据，视为统计上的异常数据。与现有技术相比，本发明的优点在于：通过建立径流预报模型全寿命周期的评价指标体系，能够对采用径流预报模型进行径流预报时的数据综合质量、样本完整性、预报因子的完整性以及径流预报模型的综合性能和预报流程的综合效果等预报的全寿命周期各个环节进行全面量化评价，便于了解掌握径流预报模型在预报过程中薄弱环节以进行改进，从而提高径流预报模型的应用效果。附图说明图1为某水文站的径流预报模型各评价指标雷达图。图2为某水文站三种径流预报模型的模型欧式距离示意图。图3为某水文站三种径流预报模型的模型综合性能指标对比示意图。图4为某水文站三种径流预报模型的预报流程欧式距离值对比示意图。图5为某水文站三种径流预报模型的预报流程综合效果指标对比示意图。图6为不同数据序列长度与结果综合质量关系雷达图。图7为不同预报因子数量与结果综合质量关系雷达图。图8为不同样本数量与与结果综合质量关系雷达图。图9为不同径流预报模型与结果综合质量关系雷达图。图10为箱型图。具体实施方式以下结合附图实施例对本发明作进一步详细描述，所述实施例的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施例是示例性的，旨在用于解释本发明，而不能理解为对本发明的限制。在本申请的描述中，需要说明的是，对于方位词，如有术语“中心”、“横向”、“纵向”、“长度”、“宽度”、“厚度”、“上”、“下”、“前”、“后”、“左”、“右”、“竖直”、“水平”、“顶”、“底”、“内”、“外”、“顺时针”、“逆时针”等指示方位和位置关系为基于附图所示的方位或位置关系，仅是为了便于叙述本申请和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定方位构造和操作，不能理解为限制本申请的具体保护范围。术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括一个或者更多个该特征。在本发明的描述中，“多个”的含义是两个或两个以上，除非另有明确具体的限定。本发明涉及一种基于全寿命周期的径流预报模型评价方法，该方法包括如下步骤：S1，获取历史径流数据，确定预报因子并对预报因子进行筛选，构建用于径流预报模型的样本总体；S2，将样本总体划分为训练集和测试集，采用训练集对径流预报模型进行训练，再由测试集进行预测；S3，建立径流预报模型评价指标体系，包括数据综合质量指标P1、预报因子综合质量指标P2、样本代表性指标P3、模型泛化性指标P4和结果综合质量指标P5；S4，通过模型泛化性指标P4和结果综合质量指标P5对径流预报模型综合性能进行评估；S5，通过数据综合质量指标P1、预报因子综合质量指标P2、样本代表性指标P3、模型泛化性指标P4和结果综合质量指标P5对径流预报流程的综合效果进行评估。具体而言，本实施例中，数据综合质量指标P1由下式计算：P1＝1-/2其中W表示历史径流数据缺省率，Qa表示历史径流数据异常率，W、Qa的计算方式如下：其中n为流域内观测站点总数，Ai为站点i的缺失数据量，Bi为站点i的理论数据量，Ci为站点i的异常数据量，Di为站点i的实际数据量，当n＝1时上式表示单个站点的数据缺省率和数据异常率的计算。需要说明的是，由P1的计算式可知，P1的值越接近1，说明数据综合质量越好。作为一种优选，在数据异常率计算过程中判断数据为异常数据的方式为：利用箱型图方式给定一个置信区间，置信区间上下限值记为Zup和Zdown，下四分位数为Z1，中位数为Z2，上四分位为数Z3，置信区间的上下限值计算方式如下：Zup＝Z3+1.5，Zdown＝Z1-1.5处于箱体的上边界Zup和下边界Zdown之外的数据，视为统计上的异常数据。箱型图的示意图如图10所示，由于箱型图属于现有技术，不在此详细展开叙述。在本实施例中，预报因子综合质量指标P2由下式计算：P2＝/2其中Qq表示预报因子质量指标，Qs表示预报因子数量指标，Qq、Qs的计算方式如下：Qq＝max{|ra1|,...,|raj|,...,|raN|}，其中|raj|表示第j个预报因子与径流预测目标序列之间的相关系数的绝对值，N表示特征数量即预报因子数量，M表示和径流预测目标序列相关系数绝对值最大的前M个预报因子数量，表示前M个预报因子中第ja个预报因子与径流预测目标序列之间的相关系数的绝对值。需要说明的是，P2的值越接近1，说明预报因子综合质量越好。相关系数可以采用皮尔逊相关系数公式进行计算，即：其中，X、Y分别表示预报因子、相应历史径流数据，即径流预测目标序列，j用于表示第j个预报因子，j＝1,2,3…,N，N为预报因子数量，k用于表示径流预测目标序列中第k个径流数据，H为径流预测目标序列长度。在本实施例中，样本代表性指标P3由下式计算：P3＝1-/2其中，Rmean表示样本均值偏移率，Rstd表示样本标准差偏移率，Rmean、Rstd由下式计算，其中μ表示总体输出变量的均值，即总体中径流数据的均值，表示样本输出变量的均值，即训练集中径流数据的均值，σ表示总体输出变量的标准差，即总体中径流数据的标准差，σy表示样本输出变量的标准差，即训练集中径流数据的标准差。如果P3的值越接近1，说明样本代表性越好。需要说明的是，在径流预报中，一个样本是X’-Y’对，这里X’表示通过筛选出来的多个预报因子，Y’是与预报因子对应的历史径流数据，即预测目标序列。预报因子筛选方法即采用前文所述方法筛选出与径流预测目标序列相关系数绝对值最大的前M个预报因子。在本实施例中，模型泛化性指标P4综合考虑了模型测试集与训练集的相对均方根误差和拟合优度因素，同时兼顾样本数量和样本的预报因子数量，具体计算方式如下：其中GPRMSE表示均方根泛化率指标，表示拟合优度泛化率指标；GPRMSE由下式计算：其中，RMSEtest表示模型测试集均方根误差，RMSEtrain表示模型训练集均方根误差，RMSEtest、RMSEtrain由RMSE计算公式对模型测试集和模型训练集进行计算得到，RMSE计算公式如下：其中Qk为计算序列中第k个实测值，表示通过径流预报模型计算得出的第k个模拟值，H’为计算序列长度，对训练集而言，计算序列长度即为训练集中样本数量，对测试集而言，计算序列长度即为测试集中样本数量，如果GPRMSE＞1则令其为1；由下式计算：其中，其中，表示模型训练集的拟合优度，表示模型测试集的拟合优度，即模拟值或者预测值序列与真实值之间的拟合程度，其值范围在0-1之间，越接近1表明模型预测值对实测值拟合程度越好，表示校正后的表示校正后的l1、l2分别表示训练集和测试集样本数量，N表示特征数量即预报因子数量；由拟合优度R2计算公式对模型测试集和模型训练集进行计算得到，R2计算公式如下：其中，Qk为计算序列第k个实测值，为通过径流预报模型计算得出的第k个模拟值，表示计算序列的实测值的均值，H’为计算序列长度。需要说明的是，P4的值越接近1，说明模型泛化性越好。在本实施例中，结果综合质量指标P5由下式计算：其中rb为模拟序列与径流预测目标序列的相关系数值，可以采用前文所述的皮尔逊相关系数公式计算，μo和σo分别为径流预测目标序列实测值的均值和标准差，μm和σm分别为模拟序列的均值和标准差。需要说明的是，P5的值越接近1，说明结果综合质量越好。在本实施例中，S4中对径流预报模型综合性能进行评估的方式为：S41，计算模型欧式距离Dm：S42，对模型欧式距离进行归一化处理得出模型综合性能指标NDm，并通过NDm的值是否接近1来判断径流预报模型的综合性能，NDm的计算方式具体为：如果NDm的值越接近1表示径流预报模型的综合性能越好，在实际应用过程中，通常设置一个NDm下限值，比如0.7、0.8等，如果通过径流预报模型计算得出的NDm值小于这个下限值时，证明模型参数不符合要求，需要进行修正。基于模型欧式距离的模型评价方法具有明确的物理意义，具有可解释性，并且方便可视化，但是与指标P1-P5相比有两点不规范的地方：一是取值范围不是0-1；二是并且不是结果值越大表示指标的效果越好，即和之前的指标相比大小趋势的一致性相反，因此对模型欧式距离进行归一化处理。进行归一化处理后的NDm的取值范围在0-1之间，且和之前的5个指标即P1-P5取值趋势保持一致性，即越接近1表示模型的综合性能越好，便于进行整体分析。在本实施例中，S5中对径流预报流程的综合效果进行评估的方式为：S51，计算预报流程欧式距离DF：S52，对预报流程欧式距离进行归一化处理得出预报流程综合效果指标NDF，并通过NDF的值是否接近1来判断预报流程的综合效果，NDF的计算方式具体为：如果NDF的值越接近1表示径流预报流程的综合效果越好，在实际应用过程中，通常设置一个NDF下限值，如果通过径流预报模型计算得出的NDF值小于这个下限值时，证明模型参数不符合要求，需要进行修正和优化。下面以某水文站的历史径流月尺度数据为例，采用线性回归、梯度提升回归、支撑向量回归三种径流预报模型进行模型训练和预测，并利用本发明建立的评价指标体系进行相应的评估。表1某水文站2012-2019月径流数据统计表日期径流Q日期径流Q日期径流Q日期径流Q201201286.48201401621.71201601347.29201801321.48201202261201402557.86201602315.93201802310201203300.9201403765.16201603375.1201803342.32201204492.772014041412.83201604863.93201804635.43201205566.812014051089.81201605840.19201805351.29201206847.772014061943.672016061688.67201806517.632012071419.422014072480.652016071513.062018071533.552012081953.552014082035.81201608689.682018082370.652012091119.732014092055.33201609986.8320180933802012101068.132014101145.972016101388.712018102255.81201211906.47201411955.072016111294.672018111342201212671.9201412445.94201612836.23201812848.23201301420.23201501362.68201701529.87201901515.74201302457.52201502360.36201702457.75201902445.46201303648.39201503383.29201703477.71201903483.972013041289.23201504703.63201704773.5201904503.872013051909.03201505819.52201705670.32201905518.8720130620082015061540.332017061057.6320190611602013074134.522015071950.482017071409.552019071387.842013086984.842015081003.612017082224.522019083220.652013095691.672015091360.57201709792.322019095181.332013102595.16201510972.52201710642.292019102155.162013111476.67201511755.33201711534.372019111112.57201312995.58201512404.19201712377.13201912740.13以上共有8年96个数据，根据数据综合质量指标公式可以计算出该站点的P1＝0.9375，当然，可以选取不同时间段的数据从而从数据层角度改变数据综合质量指标值。假设该站点的某月的径流数据为Q，选择该月过去12个月的月径流数据作为待选预报因子，即Q，Q，…，Q。换言之，用2012年1月至2012年12月的月径流数据作为预报因子，即作为径流预报模型输入来预测2013年1月的径流数据，用2012年2月至2013年1月的月径流数据作为模型输入来预测2013年2月的，以此类推。径流预测目标序列实测值即2013年1月至2019年12月的月径流数据时间序列。针对每个待预测的月径流数据，选择前5个相关系数绝对值最大的预报因子作为径流预报模型的输入预报因子，也即令前述的参数M的值为5，根据皮尔逊相关系数公式rXY可以计算出与径流预测目标序列相关系数最大的5个预报因子为Q、Q、Q、Q、Q。结合皮尔逊相关系数公式rXY和Qs、Qq的计算式，可以计算出预报因子综合质量指标P2的值为0.59193。由于皮尔逊相关系数公式属于现有技术，此处不对详细计算过程进行列示。然后根据输入输出的时间先后顺序构建X’-Y’样本对，并构建样本总体，根据已有数据总体包括96-12＝84个样本，如表2所示。表2输入输出样本对统计表然后将这84个样本按照一定比例随机分成训练集和测试集，比如70％作为训练集，30％用来测试。当然训练集和测试集可以调整为其它比例，通过改变训练集和测试集比例从而实现改变样本代表性指标值P3。在本实施例中，选择表2中序号为1、5、10、11、12、13、19、23、29、31、34、36、40、41、43、48、50、55、56、59、66、69、71、74、77、82的样本构建测试集，表2中剩余样本构建训练集，根据样本代表性指标值P3计算公式可以得出P3的值为0.9356，其中总体均值和标准差由表2中的84个样本计算得出，样本均值和标准差由训练集中的样本计算得出。采用上文中构建的训练集对径流预报模型进行训练，然后用构建的测试集进行预测。再根据模型泛化性指标P4和结果综合质量指标P5计算公式计算P4和P5的值。本实施例中，采用线性回归模型、支持向量回归模型、梯度提升回归模型三种径流预报模型分别进行计算，该三种径流预报模型属于现有技术，本申请中不对这三种模型的详细计算过程进行详细阐述和列示，仅在后文中对三种模型的原理作简要介绍。采用线性回归模型进行模型训练和预测，通过上文公式可计算出P4＝0.5，P5＝0.4917；采用支持向量回归模型进行模型训练和预测，可计算出P4＝0.7481，P5＝0.3091；采用梯度提升回归模型进行模型训练和预测，可计算出P4＝0.74326，P5＝0.2380。将计算得出的P1、P2、P3及三种模型对应的P4、P5的值绘制在半径为1的圆中，可以得到如附图1所示的雷达图。由附图1可知，在本实施例中，三种径流预报模型在模型泛化性方面支持向量回归模型和梯度提升回归模型相当，线性回归模型的泛化性相对较差；而结果综合质量方面线性回归模型最好，支持向量回归模型次之，梯度提升回归模型相对最差。通过雷达图可以非常直观地看出各种模型的泛化性及结果综合质量等方面的性能优劣。如果在对单一径流预报模型进行评价时，可以看各指标的值是否接近1，越接近1证明相应性能越好，在评价时，可以对各指标设置一个下限阈值，如果计算出的指标值大于对应阈值时，证明该指标代表的性能好，满足要求，如果低于对应阈值时，则需要进行相应优化。进行模型综合性能和预报流程综合效果评价时亦是如此。计算出各模型的模型泛化性指标P4和结果综合质量指标P5后，可以采用前文公式计算各模型的模型综合性能的欧式距离Dm和对应的径流预报模型综合性能指标NDm，以及预报流程欧式距离DF和对应的预报流程综合效果指标NDF。采用线性回归模型进行模型训练和预测，通过上文公式可计算出Dm＝0.7130，NDm＝0.4958，DF＝0.8264，NDF＝0.6304；采用支持向量回归模型进行模型训练和预测，可计算出Dm＝0.7354，NDm＝0.4800，DF＝0.8458，NDF＝0.6217；采用梯度提升回归模型进行模型训练和预测，可计算出Dm＝0.8041，NDm＝0.4314，DF＝0.9062，NDF＝0.5947。附图2至附图5分别示出了三种径流预报模型的模型欧式距离、模型综合性能指标、预报流程欧式距离、预报流程综合效果指标的对比示意图，通过图2至图5可以清楚直观地看出各径流预报模型的模型综合性能和预报流程综合效果的优劣，模型欧式距离、预报流程欧式距离越小表示相应性能越好，对应的，模型综合性能指标、流程综合效果指标的值越接近1证明相应性能越好，不在此赘述。需要说明的是，在实际应用过程中，可以根据实际需要选择M的值，M的值可以在1至12中选择，本实施例中M取值为5只是为了说明如何根据预报因子构建样本的一个示例而已，同样在选择预报因子时，也可以选择过去15个月、20个月等等多个月的径流数据作为预报因子，然后进行筛选，同时在实际预测中为了提高预测效果除了使用过去月径流数据作为预报因子，还可以引用过去的130项大气环流指标作为待筛选的预报因子等等。为证明指标的有效性，本实施例还采用控制变量法，在保持其他指标不变的前提下查看P1-P4各自与P5相关变化关系，并将结果可视化为雷达图。其中P1与P5的关系主要是控制数据序列长度，即在历史径流数据中选取不同长度序列的值并使用线性回归模型进行预测，可以得出如图6所示的雷达图，图中数据1的序列最长，数据2次之，数据3的序列最短，说明数据序列越长，结果综合质量指标相对越大，效果越好。其中P2与P5的关系主要是控制预报因子数量，即采用不同的预报因子数量并使用线性回归模型进行预测，可以得出如图7所示的雷达图，图中因子1的预报因子数量最多，因子2次之，因子3的预报因子数量最少，说明预报因子数量越多，预报因子的综合质量越好，结果综合质量指标相对越大，效果越好。其中P3与P5的关系主要是控制训练集和测试集的比例，并使用线性回归模型进行预测，可以得出如图8所示的雷达图，图中样本1中训练集所占比例最大，样本2次之，样本三中训练集所占比例最小，说明训练集所占比例越高，样本代表性越好，结果综合质量指标相对越大，效果越好。其中P4与P5的关系则是选用不同的预报模型进行，可以得出如图9所示的雷达图，如图可知，模型的泛化性越好，则结果综合质量指标相对越大，效果越好。但需要说明的是，虽然根据图7所示，模型泛化性与结果综合质量正相关，但并不是绝对的因果和绝对的正相关关系，只能说从统计学上大概率符合模型泛化性越好，结果综合质量越好。需要进一步说明的是，在得出图1过程中仅用到了5个历史径流数据作为预报因子，仅仅是一个简化的计算示例，径流预报模型在实际应用过程中需要考虑多种类、多数量的预报因子，因此在得出图7过程中用到了130项大气环流因子，该130项大气环流因子来自中国气象局发布的130项监测指数，包括88项大气环流指数、26项海温指数、16项其他指数，可从中国气象局国家气候中心网站公开获得，图7计算过程的预报因子数比图1用到的多很多，预报因子综合质量指标相对要好，与径流预报模型的实际应用场景更加接近，在此前提下，模型泛化性越好预测结果综合质量越高，而预报因子综合质量不好时则结果的确定性就越差，导致模型泛化性和结果综合质量的相关性不高；而且不同的径流预报模型，即使数据质量，预报因子，样本代表性一样，不同模型的模型泛化性和结果综合质量也不完全一样和正相关，如果是同一个模型，其他因素一样，模型泛化性越高则预报质量越高。这正是图1和图7存在差别的原因所在。从以上四种雷达图中可以P1-P4各指标在其他指标基本保存不变的情况下与结果综合指标指标P5基本上成正相关关系，证明了所提指标的有效性。下面对本实施例中采用的三种径流预报模型进行简要介绍。线性回归模型：多元线性回归是一种数理统计方法，在水文中长期预报中，由于影响因素的复杂性，一般情况下只考虑一个预报因子是不够的，必须筛选对预报对象影响比较显著的因子，即预报因子选择。预报因子是影响预报对象的前期因素，在多元回归方程中为自变量，因此对它的正确挑选是预报结果好坏的关键因素。一般而言，挑选预报因子需要注意如下几点：首先分析不同水文气象因子与预报对象之间的关联度大小；其次通过统计分析整理，同时考虑因子间共线性影响；最后选取与预报对象存在显著相关的气象因素作为预报因子。多元线性回归方程的构建步骤：若已经挑选k'个预报因子，要求通过回归分析，建立这些因子与预报对象y'的关系，其数学模型为：y'＝β0+β1X”1+...+βk'X”k’+ε式中，β0,β1,...,βk'为方程回归系数，亦称预报方程系数，y'为观测值，X”k’为实测预报因子对应值，ε为方程残差项。支持向量回归模型：支持向量机是一种快速可靠的分类算法，可以在数据量有限的情况下很好地完成任务。由于能够较为合理地解决高维度、小样本、非线性等问题，因此近年来也被广泛的应用到中长期径流预报中。而支持向量回归机是建立在SVM基础上的回归算法，具有坚实可靠的理论基础作为支撑。SVR在的计算原理在于，是在线性函数的两侧制造一个“间隔带”，称为容忍误差∈，这个误差由人为进行设定的一个经验值，所有在该间隔带中的数据样本都不计算损失，也就是只有支持向量才会对其函数模型产生影响，最后通过最小化总损失和最大化间隔来得出优化后的模型。SVR模型的基本思想是通过少数支持向量代表整个样本集，借助一个非线性映射将训练集映射到另一个高维特征的空间，达到将输入空间中非线性函数估计问题转换为高维特征空间中的线性函数估计的目的。基于粒子群算法的支持向量回归机中长期径流预报是目前应用比较多的方法之一。梯度提升回归：梯度提升回归GBR是一种从错误中进行学习的技术。它本质上来说，其实就是一种集思广益的思考方式，集成一堆较差的学习算法进行学习。但是，这种算法有两点需要注意：一是每个学习算法准确率都不高。但是它们集成起来可以获得很好的准确率；二是这些学习算法依次应用，也就是说每个学习算法都是在前一个学习算法的错误中学习，以此来提高准确度。当梯度提升用于预测连续值时，我们使用梯度提升来表示回归。这与使用线性回归不一样。GBR的B即指代Boosting，Boosting是一种机器学习算法。一般集成学习会通过重采样获得一定数量的样本，然后训练多个弱学习机器,从而得到一个强大得学习器。本申请通过建立径流预报模型全寿命周期的评价指标体系，在采用径流预报模型进行径流预报时，能够对选取的数据综合质量、样本完整性、预报因子的完整性以及径流预报模型的综合性能和预报流程的综合效果等预报的全寿命周期的各个环节进行全面量化评价，便于了解掌握径流预报模型在预报过程中薄弱环节以进行改进，从而提高径流预报模型的应用效果。尽管已经示出和描述了本发明的实施例，本领域技术人员可以理解：在不脱离本发明的原理和宗旨的情况下可以对这些实施例进行多种变化、修改、替换和变形，本发明的范围由权利要求及其等同物限定。
