标题title
一种音频播放方法及装置
摘要abst
本发明公开了一种音频播放方法及装置，方法包括：获得音频文件源；加载音频文件源对应的WebAudio资源和HTML Audio资源；基于至少部分加载完成的HTML Audio资源实现音频文件源的播放；在WebAudio资源加载完成后，由HTML Audio资源切换为WebAudio资源继续播放音频文件源。本申请方案在需要播放音频时会加载对应的WebAudio和HTML Audio两种资源，首先基于HTML Audio资源进行播放，避免或大大缩短了WebAudio资源完全加载后才播放的等待时长，同时切换到WebAudio资源播放后，又避免了HTML Audio资源播放结束时的留白时间。
权利要求书clms
1.一种音频播放方法，其特征在于，包括：获得音频文件源；加载所述音频文件源对应的WebAudio资源和HTML Audio资源；基于至少部分加载完成的HTML Audio资源实现所述音频文件源的播放；在所述WebAudio资源加载完成后，由HTML Audio资源切换为WebAudio资源继续播放所述音频文件源。2.根据权利要求1所述的音频播放方法，其特征在于，所述在所述WebAudio资源加载完成后，由HTML Audio资源切换为WebAudio资源继续播放所述音频文件源，包括：在所述WebAudio资源加载完成后，确定基于HTML Audio资源播放所述音频文件源的播放位置；从所述WebAudio资源中对应所述播放位置处开始播放所述音频文件源。3.根据权利要求1所述的音频播放方法，其特征在于，所述获得音频文件源，包括：获得至少两个音频文件源。4.根据权利要求3所述的音频播放方法，其特征在于，所述加载所述音频文件源对应的WebAudio资源和HTML Audio资源，包括：按照所述至少两个音频文件源的播放顺序，针对每一个音频文件源: 加载所述音频文件源对应的WebAudio资源和HTML Audio资源。5.根据权利要求1所述的音频播放方法，其特征在于，所述加载所述音频文件源对应的WebAudio资源和HTML Audio资源，包括：同时加载所述音频文件源对应的WebAudio资源和HTML Audio资源。6.根据权利要求1所述的音频播放方法，其特征在于，所述加载所述音频文件源对应的WebAudio资源和HTML Audio资源，包括：在第一时间点开始加载所述音频文件源对应的HTML Audio资源；在第二时间点开始加载所述音频文件源对应的WebAudio资源，所述第二时间点晚于所述第一时间点。7.根据权利要求1所述的音频播放方法，其特征在于，在所述WebAudio资源加载完成后，由HTML Audio资源切换为WebAudio资源继续播放所述音频文件源后，还包括：销毁已加载的所述音频文件源对应的HTML Audio资源。8.一种音频播放装置，其特征在于，包括：文件获取模块，用于获得音频文件源；资源加载模块，用于加载所述音频文件源对应的WebAudio资源和HTML Audio资源；音频播放模块，用于基于至少部分加载完成的HTML Audio资源实现所述音频文件源的播放；播放切换模块，用于在所述WebAudio资源加载完成后，由HTML Audio资源切换为WebAudio资源继续播放所述音频文件源。9.根据权利要求8所述的音频播放装置，其特征在于，所述播放切换模块包括：位置确定模块，用于在所述WebAudio资源加载完成后，确定基于HTML Audio资源播放所述音频文件源的播放位置；播放控制模块，用于从所述WebAudio资源中对应所述播放位置处开始播放所述音频文件源。10.根据权利要求8所述的音频播放装置，其特征在于，所述资源加载模块具体用于：同时加载所述音频文件源对应的WebAudio资源和HTML Audio资源。
说明书desc
技术领域本发明涉及多媒体技术，更具体的说，是涉及一种音频播放方法及装置。背景技术HTML Audio技术和WebAudio技术均能够实现HTML浏览器中的音频播放功能。然而当前存在的这两项技术，都不支持不同音频文件源之间的无缝切换播放；也即，两个音频文件源在切换播放的时候，中间会存在一定时间的无声区间，影响用户体验。如何尽量缩短或减小两个音频文件源在切换播放时的无声区间，是领域内技术人员亟待解决的问题。发明内容有鉴于此，本发明提供如下技术方案：一种音频播放方法，包括：获得音频文件源；加载所述音频文件源对应的WebAudio资源和HTML Audio资源；基于至少部分加载完成的HTML Audio资源实现所述音频文件源的播放；在所述WebAudio资源加载完成后，由HTML Audio资源切换为WebAudio资源继续播放所述音频文件源。可选地，所述在所述WebAudio资源加载完成后，由HTML Audio资源切换为WebAudio资源继续播放所述音频文件源，包括：在所述WebAudio资源加载完成后，确定基于HTML Audio资源播放所述音频文件源的播放位置；从所述WebAudio资源中对应所述播放位置处开始播放所述音频文件源。可选地，所述获得音频文件源，包括：获得至少两个音频文件源。可选地，所述加载所述音频文件源对应的WebAudio资源和HTML Audio资源，包括：按照所述至少两个音频文件源的播放顺序，针对每一个音频文件源: 加载所述音频文件源对应的WebAudio资源和HTML Audio资源。可选地，所述加载所述音频文件源对应的WebAudio资源和HTML Audio资源，包括：同时加载所述音频文件源对应的WebAudio资源和HTML Audio资源。可选地，所述加载所述音频文件源对应的WebAudio资源和HTML Audio资源，包括：在第一时间点开始加载所述音频文件源对应的HTML Audio资源；在第二时间点开始加载所述音频文件源对应的WebAudio资源，所述第二时间点晚于所述第一时间点。可选地，在所述WebAudio资源加载完成后，由HTML Audio资源切换为WebAudio资源继续播放所述音频文件源后，还包括：销毁已加载的所述音频文件源对应的HTML Audio资源。一种音频播放装置，包括：文件获取模块，用于获得音频文件源；资源加载模块，用于加载所述音频文件源对应的WebAudio资源和HTML Audio资源；音频播放模块，用于基于至少部分加载完成的HTML Audio资源实现所述音频文件源的播放；播放切换模块，用于在所述WebAudio资源加载完成后，由HTML Audio资源切换为WebAudio资源继续播放所述音频文件源。可选地，所述播放切换模块包括：位置确定模块，用于在所述WebAudio资源加载完成后，确定基于HTML Audio资源播放所述音频文件源的播放位置；播放控制模块，用于从所述WebAudio资源中对应所述播放位置处开始播放所述音频文件源。可选地，所述资源加载模块具体用于：同时加载所述音频文件源对应的WebAudio资源和HTML Audio资源。经由上述的技术方案可知，本发明实施例公开了一种音频播放方法及装置，方法包括：获得音频文件源；加载所述音频文件源对应的WebAudio资源和HTML Audio资源；基于至少部分加载完成的HTML Audio资源实现所述音频文件源的播放；在所述WebAudio资源加载完成后，由HTML Audio资源切换为WebAudio资源继续播放所述音频文件源。本申请方案在需要播放音频时会加载对应的WebAudio和HTML Audio两种资源，由于HTML Audio在接收到音频文件的部分数据时即可认为是加载完成，并开始播放，因此HTML Audio的加载完成时间比WebAudio要早，避免或大大缩短了WebAudio资源完全加载后才播放的等待时长，同时切换到WebAudio资源播放后，又避免了HTML Audio资源播放结束时的留白时间，因此在进行下一个音频的播放时，不会给用户带来明显的音频停顿或空白感，一定程度上实现了不同音频间的“无缝切换”。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据提供的附图获得其他的附图。图1为本发明实施例公开的一种音频播放方法的流程图；图2为本发明实施例公开的播放器播放流程示意图；图3为本发明实施例公开的音频文件源加载流程示意图；图4为本发明实施例公开的实现播放资源切换的流程图；图5为本发明实施例公开的WebAudio与HTML Audio的无缝播放切换流程示意图；图6为本发明实施例公开的一种音频播放装置的结构示意图；图7为本发明实施例公开的一种电子设备的结构示意图。具体实施方式为了引用和清楚起见，下文中使用的技术名词的说明、简写或缩写总结如下：HTML5：HTML5是构建Web内容的一种语言描述方式。HTML5是互联网的下一代标准，是构建以及呈现互联网内容的一种语言方式．被认为是互联网的核心技术之一。HTML Audio: HTML Audio是 HTML5 规范中的一项功能，该功能在浏览器中整合了音频输入、播放和合成，以及语音文本转换。WebAudio: W3C 开发的 Web Audio API 规范描述了一种用于在 Web 应用程序中处理和合成音频的高级 JavaScript API。HTML5规范中引入的HTML Audio支持网页进行简单的音频播放，但是无法支持更复杂的音频操作，WebAudio的出现解决了这些问题。下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本申请实施例可以应用于电子设备，本申请对该电子设备的产品形式不做限定，可以包括但并不局限于智能手机、平板电脑、可穿戴设备、个人计算机和/或非易失性内存等形式，如只读存储器或闪存，存储器包括至少一个存储芯片。在示例性实施例中，还提供了一种计算机可读存储介质，可直接加载到计算机的内部存储器，其中含有软件代码，该计算机程序经由计算机载入并执行后能够实现上述音频播放方法任一实施例所示步骤。在示例性实施例中，还提供一种计算机程序产品，可直接加载到计算机的内部存储器，其中含有软件代码，该计算机程序经由计算机载入并执行后能够实现上述所述的音频播放方法任一实施例所示步骤。进一步，本发明实施例提供了一种电子设备。图7为本发明实施例公开的一种电子设备的结构示意图。参见图7所示，电子设备包括至少一个处理器701、以及与处理器连接的至少一个存储器702、总线703；其中，处理器、存储器通过总线完成相互间的通信；处理器用于调用存储器中的程序指令，以执行上述的音频播放方法。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。对于实施例公开的装置而言，由于其与实施例公开的方法相对应，所以描述的比较简单，相关之处参见方法部分说明即可。还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。结合本文中所公开的实施例描述的方法或算法的步骤可以直接用硬件、处理器执行的软件模块，或者二者的结合来实施。软件模块可以置于随机存储器、内存、只读存储器、电可编程ROM、电可擦除可编程ROM、寄存器、硬盘、可移动磁盘、CD-ROM、或技术领域内所公知的任意其它形式的存储介质中。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本发明。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本发明的精神或范围的情况下，在其它实施例中实现。因此，本发明将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
