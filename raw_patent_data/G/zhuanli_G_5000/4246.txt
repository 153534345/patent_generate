标题title
基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法
摘要abst
本发明公开了一种基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法，包括：获取发动机气缸缸盖电压信号数据，建立时序数据集；对时序数据集进行编码，获得不同类型的二维特征图；将编码后的二维特征图打标签；对高斯原型网络中的嵌入网络进行改进，获得改进嵌入网络；获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型；依据训练好的改进高斯原型网络的发动机气门故障诊断模型对测试集进行测试。本发明将采集到的发动机各个气缸振动时产生的电压信号转换成二维特征图，保留了电压信号的时间相关性，避免了重要信息的丢失；进而本发明再通过改进了高斯原型网络中的嵌入网络，提高了模型的计算速度和对小样本下发动机气门故障诊断的识别率。
权利要求书clms
1.一种基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法，其特征在于，包括：Step1、获取发动机气缸缸盖电压信号数据，建立时序数据集；Step2、对时序数据集进行编码，获得不同类型的二维特征图；Step3、将编码后的二维特征图打标签；Step4、对高斯原型网络中的嵌入网络进行改进，获得改进嵌入网络；Step5、依据训练集训练基于改进高斯原型网络的发动机气门故障诊断模型，获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型；Step6、依据训练好的改进高斯原型网络的发动机气门故障诊断模型对测试集进行测试。2.根据权利要求1所述的基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法，其特征在于，所述获取发动机气缸电压信号数据，包括：在发动机四个气缸缸盖上均安装加速度传感器，获取发动机气缸缸盖电压信号数据；依据获取的发动机气缸缸盖电压信号数据建立时序数据集，将时序数据集分为训练集和测试集，同时将训练集分成训练支撑集和训练查询集，将测试集分成测试支撑集和测试查询集。3.根据权利要求1所述的基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法，其特征在于，所述对时序数据集进行编码，具体为：采用马尔可夫变迁场对时序数据集进行编码，获得不同类型的二维特征图。4.根据权利要求1所述的基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法，其特征在于，对编码后的二维特征图打标签，包括：将1号气缸标记为0、3号气缸标记为1、4号气缸标记为2、2号气缸标记为3，模型训练时随机提取训练集中的四个气缸故障特征图进行训练。5.根据权利要求4所述的基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法，其特征在于，所述1号气缸气门间隙正常，3号气缸进气门间隙偏小排气门间隙偏大，4号气缸进气门间隙偏小排气门间隙正常，2号气缸进气门间隙正常排气门间隙偏大；其中，偏小表示比正常值小0.2mm-0.3mm，偏大表示比正常值大0.2mm-0.3mm。6.根据权利要求1所述的基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法，其特征在于，所述改进嵌入网络包括：5个卷积模块、CBAM注意力机制模块；其中，5个卷积模块依次连接，第一个卷积模块、第二个卷积模块之间加入CBAM注意力机制模块；其中，第一卷积模块、第二卷积模块、第三卷积模块、第四卷积模块相同，均包括卷积层、批归一化层、Relu、最大池化层；第五卷积模块与前四个卷积模块构成相同，其不同之处在于：第五卷积模块卷积核的数量为前四个卷积模块中卷积核数量的2倍。7.根据权利要求1所述的基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法，其特征在于，所述依据训练集训练基于改进高斯原型网络的发动机气门故障诊断模型，获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型，包括：将训练支撑集和训练查询集送入改进嵌入网络，依据训练支撑集的输入获得对应的嵌入向量和矩阵原子，用于构建高斯原型；依据高斯原型和依据训练查询集获得对应的嵌入向量，获得高斯原型到查询集样本对应嵌入向量的距离；依据距离得到预测标签；通过预测标签、真实标签的对比采用交叉熵损失函数进行反向传播至改进嵌入网络，反复迭代，获得最优权重；依据最优权重，获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型。8.一种基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断系统，其特征在于，包括：用于获取发动机气缸缸盖电压信号数据，建立时序数据集的模块；用于对时序数据集进行编码，获得不同类型的二维特征图的模块；用于将编码后的二维特征图打标签的模块；用于对高斯原型网络中的嵌入网络进行改进，获得改进嵌入网络的模块；用于依据训练集训练基于改进高斯原型网络的发动机气门故障诊断模型，获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型的模块；用于依据训练好的改进高斯原型网络的发动机气门故障诊断模型对测试集进行测试的模块。
说明书desc
技术领域本发明涉及一种基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法，属于发动机故障诊断技术领域。背景技术柴油发动机具有热效率高、经济性能好、扭矩大等优点，广泛应用在交通业和大型工厂中，因此对其进行故障监测，以保证其经济可靠地运行具有十分重要的意义。在实际使用过程中，由于柴油机的配气机构磨损，经常会出现气门间隙异常故障，导致产生柴油机进气不足、燃烧不充分、动力不足等问题。目前通常使用缸盖电压信号来对柴油机气门间隙状况进行监测。由于柴油机机械部件众多、背景噪声强烈、工况复杂多变，因此其缸盖振动信号是一种典型的非平稳信号，人为选取对噪声和工况不敏感的故障特征十分困难。实际工况中，气门间隙微弱故障信号难以被发现，导致不能对故障信号及时采集及分析。同时，由于发动机电压一体性的原因，不同气缸缸盖的电压信号幅值重叠性较高，加深了对其进行故障分类的难度。发明内容本发明提供了一种基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法，通过将马尔可夫变迁场和改进高斯原型网络进行结合，并构建了基于改进高斯原型网络的发动机气门故障诊断模型，可以效的对输入的不同故障的特征图进行故障识别。本发明的技术方案是：一种基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法，包括：Step1、获取发动机气缸缸盖电压信号数据，建立时序数据集；Step2、对时序数据集进行编码，获得不同类型的二维特征图；Step3、将编码后的二维特征图打标签；Step4、对高斯原型网络中的嵌入网络进行改进，获得改进嵌入网络；Step5、依据训练集训练基于改进高斯原型网络的发动机气门故障诊断模型，获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型；Step6、依据训练好的改进高斯原型网络的发动机气门故障诊断模型对测试集进行测试。所述获取发动机气缸电压信号数据，包括：在发动机四个气缸缸盖上均安装加速度传感器，获取发动机气缸缸盖电压信号数据；依据获取的发动机气缸缸盖电压信号数据建立时序数据集，将时序数据集分为训练集和测试集，同时将训练集分成训练支撑集和训练查询集，将测试集分成测试支撑集和测试查询集。所述对时序数据集进行编码，具体为：采用马尔可夫变迁场对时序数据集进行编码，获得不同类型的二维特征图。对编码后的二维特征图打标签，包括：将1号气缸标记为0、3号气缸标记为1、4号气缸标记为2、2号气缸标记为3，模型训练时随机提取训练集中的四个气缸故障特征图进行训练。所述1号气缸气门间隙正常，3号气缸进气门间隙偏小排气门间隙偏大，4号气缸进气门间隙偏小排气门间隙正常，2号气缸进气门间隙正常排气门间隙偏大；其中，偏小表示比正常值小0.2mm-0.3mm，偏大表示比正常值大0.2mm-0.3mm。所述改进嵌入网络包括：5个卷积模块、CBAM注意力机制模块；其中，5个卷积模块依次连接，第一个卷积模块、第二个卷积模块之间加入CBAM注意力机制模块；其中，第一卷积模块、第二卷积模块、第三卷积模块、第四卷积模块相同，均包括卷积层、批归一化层、Relu、最大池化层；第五卷积模块与前四个卷积模块构成相同，其不同之处在于：第五卷积模块卷积核的数量为前四个卷积模块中卷积核数量的2倍。所述依据训练集训练基于改进高斯原型网络的发动机气门故障诊断模型，获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型，包括：将训练支撑集和训练查询集送入改进嵌入网络，依据训练支撑集的输入获得对应的嵌入向量和矩阵原子，用于构建高斯原型；依据高斯原型和依据训练查询集获得对应的嵌入向量，获得高斯原型到查询集样本对应嵌入向量的距离；依据距离得到预测标签；通过预测标签、真实标签的对比采用交叉熵损失函数进行反向传播至改进嵌入网络，反复迭代，获得最优权重；依据最优权重，获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型。根据本发明的另一方面，提供了一种基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断系统，包括：用于获取发动机气缸缸盖电压信号数据，建立时序数据集的模块；用于对时序数据集进行编码，获得不同类型的二维特征图的模块；用于将编码后的二维特征图打标签的模块；用于对高斯原型网络中的嵌入网络进行改进，获得改进嵌入网络的模块；用于依据训练集训练基于改进高斯原型网络的发动机气门故障诊断模型，获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型的模块；用于依据训练好的改进高斯原型网络的发动机气门故障诊断模型对测试集进行测试的模块。本发明的有益效果是：本发明将采集到的发动机各个气缸振动时产生的电压信号转换成二维特征图，保留了电压信号的时间相关性，避免了重要信息的丢失；进而本发明再通过改进了高斯原型网络中的嵌入网络，提高了模型的计算速度和对小样本下发动机气门故障诊断的识别率。附图说明图1为本发明的流程图；图2为对发动机缸盖电压信号进行马尔可夫变迁场编码后的特征图；图3为改进后的嵌入网络；图4为发动机试验平台现场图；图5为不同故障类型MTF二维特征图；其中，正常，进气偏小排气偏大，进气偏小排气正常，进气正常排气偏。具体实施方式下面结合附图和实施例，对发明做进一步的说明，但本发明的内容并不限于所述范围。实施例1：如图1-5所示，一种基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断方法，包括：Step1、获取发动机气缸缸盖电压信号数据，建立时序数据集；Step2、对时序数据集进行编码，获得不同类型的二维特征图；Step3、将编码后的二维特征图打标签；Step4、对高斯原型网络中的嵌入网络进行改进，获得改进嵌入网络；Step5、依据训练集训练基于改进高斯原型网络的发动机气门故障诊断模型，获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型；Step6、依据训练好的改进高斯原型网络的发动机气门故障诊断模型对测试集进行测试；将测试集特征图输入到改进高斯原型网络中进行测试并所得结果可视化为折线图。进一步地，所述获取发动机气缸电压信号数据，包括：在发动机四个气缸缸盖上均安装加速度传感器，获取发动机气缸缸盖电压信号数据；依据获取的发动机气缸缸盖电压信号数据建立时序数据集，将时序数据集分为训练集和测试集，同时将训练集分成训练支撑集和训练查询集，将测试集分成测试支撑集和测试查询集。进一步地，所述对时序数据集进行编码，具体为：采用马尔可夫变迁场对时序数据集进行编码，获得不同类型的二维特征图。如图2所示为发动机缸盖电压信号进行马尔可夫变迁场编码后的特征图示例。具体而言，时序数据集为时间序列X＝{x1,x2,…,xn}；其中xi表示i时刻的电压信号幅值，根据电压信号幅值大小将时间序列划分为Q个部分，同时电压信号数据xi会根据自身特点映射到不同的子空间内，生成大小为Q×Q的马尔可夫变迁矩阵，表达式：wij＝p{xt+1∈qj|xt∈qi}其中：xt为t时刻对应的电压信号幅值；qi为xi对应的子空间；wij为子空间qi转移到子空间qj的逼近概率；为了弥补马尔可夫变迁场对时间序列X以及步长ti不敏锐的缺点，同时考虑时间位置信息，将包含幅值轴的矩阵W拓展到包含时间轴的马尔可夫变迁场，保留了原始电压信号的时间相关性，表达式：mij＝p{wij|xi∈qi,xj∈qj}其中：mij为子空间qi转移到子空间qj的概率。进一步地，对编码后的二维特征图打标签，包括：将1号气缸标记为0、3号气缸标记为1、4号气缸标记为2、2号气缸标记为3，模型训练时随机提取训练集中的四个气缸故障特征图进行训练。进一步地，所述1号气缸气门间隙正常，3号气缸进气门间隙偏小排气门间隙偏大，4号气缸进气门间隙偏小排气门间隙正常，2号气缸进气门间隙正常排气门间隙偏大；其中，偏小表示比正常值小0.2mm-0.3mm，偏大表示比正常值大0.2mm-0.3mm。进一步地，所述1号气缸气门间隙正常，2号气缸进气门间隙偏小排气门间隙偏大，3号气缸进气门间隙偏小排气门间隙正常，4号气缸进气门间隙正常排气门间隙偏大。进一步地，如图3所示，所述改进嵌入网络，包括：5个卷积模块、CBAM注意力机制模块；其中，5个卷积模块依次连接，第一个卷积模块、第二个卷积模块之间加入CBAM注意力机制模块；其中，第一卷积模块、第二卷积模块、第三卷积模块、第四卷积模块相同，均包括卷积层、批归一化层、Relu、最大池化层；第五卷积模块与前四个卷积模块构成相同，其不同之处在于：第五卷积模块卷积核的数量为前四个卷积模块中卷积核数量的2倍，前四个卷积模块中卷积核数量相等，第五卷积模块卷积核的数量为第一个卷积模块中卷积核数据的2倍。在本发明的实施例中，前四个卷积模块中卷积核数量均为64。进一步地，所述依据训练集训练基于改进高斯原型网络的发动机气门故障诊断模型，获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型，包括：将训练支撑集和训练查询集送入改进嵌入网络，依据训练支撑集的输入获得对应的嵌入向量和矩阵原子，用于构建高斯原型；依据高斯原型和依据训练查询集获得对应的嵌入向量，获得高斯原型到查询集样本对应嵌入向量的距离；依据距离得到预测标签；通过预测标签、真实标签的对比采用交叉熵损失函数进行反向传播至改进嵌入网络，反复迭代，获得最优权重；依据最优权重，获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型。具体而言，将训练集特征图送入改进嵌入网络中进行处理，改进嵌入网络将其映射为嵌入空间中的多维高斯分布，该分布由均值向量x和高斯协方差矩阵∑-1所确定。通过嵌入函数所对应的映射关系，嵌入网络会输出一个嵌入向量和一个矩阵原子/＞即：其中，嵌入向量x对应高斯分布中的均值向量，其代表输入样本的特征，矩阵原子sraw用于构建高斯协方差矩阵∑-1，用于反映输入样本的置信度空间；WGPN为模型的可学习参数。通过嵌入网络输出的矩阵原子sraw来计算高斯协方差矩阵S＝∑-1，其中：S＝1+softplus函数softplus＝lg，其中softplus＞0保证了S＞1。改进高斯原型网络IGPN通过嵌入向量加权的方式生成各类别的高斯原型，实现对同类样本信息的选择性融合。由于高斯协方差矩阵由矩阵原子计算而来，能够反映样本的置信度空间，因此将S作为权值，对k个类别，其高斯原型ck为：其中，和/＞均对应支撑集中第k类目标的第i个样本。/＞和⊙分布表示逐元素相乘和相除。这种方式能够依据置信度空间内界定不同支撑集样本对模型识别的贡献度，从而缓解特征代表性不强的样本对模型识别的影响。通过计算得到的嵌入向量与各类别的高斯原型之间的马氏距离，来得到生成预测标签。对于第k个类别，高斯原型ck到第i个查询集样本对应嵌入向量xi的距离dki为：其中，协方差矩阵由支撑集中第k类目标所有样本嵌入向量对应的高斯协方差矩阵之和计算得到：其中，表示支撑集中第k类模板第i个样本所对应嵌入向量的高斯协方差矩阵。通过设置epoch值来调整模型迭代次数，迭代完成后将训练模型中的权重保存，并通过测试集来验证模型的识别率。本发明改进嵌入网络采用5个卷积模块、CBAM注意力机制模块；其中，第一卷积模块、第二卷积模块、第三卷积模块、第四卷积模块较比传统高斯原型网络中的卷积模块考虑了Relu、批归一化层来提升模型的训练速度和拟合能力，加入了不同卷积核大小的第五个卷积模块，同时加入了CBAM；基于上述改进，构建的改进高斯原型网络，提高了对二维特征图特征信息的提取能力，进而使得本发明方法识别准确率提升。为了验证本发明的有效性，进一步给出可选的具体实施过程如下：采用江苏联测机电科技股份有限公司提供的发动机气门故障试验数据验证GPN模型故障诊断的有效性。发动机试验平台如图4所示。发动机为排量3.2L的非道路发动机：潍柴国三WP3.2G61E316发动机，按照1号气缸、3号气缸、4号气缸、2号气缸的运行顺序，在联测科技JDC265测功机上测试，气门间隙大小是通过逐缸法人为调节得到的。在四个气缸的缸盖上分别安装KISTLER8774B加速度传感器，并使用NI9232来采集振动信号。发动机气门间隙数据如表1所示。表1将采集到缸盖振动信号通过MTF转化为具有时间关联的二维特征图，生成的特征图像素为64×64。4种故障类型的特征图分别为120张，将4种故障类型的一张特征图进行对比，如图5所示。传统方法对数据地预处理很少关注时间的相关性，MTF编码方式解决了这一问题，此方法可以更好的保留数据的原始信息，同时通过对比不同特征图之间相同位置的像素点可以看出其颜色和纹理有明显的差异，可以有效借助DCNN在该类图片上的识别能力，提高模型的识别率。本次训练过程采用Adam作为自适应优化器对参数进行优化，迭代次数设置为1000次，学习率为0.001，实验对四种故障类型进行分类识别，并对比同样本量下，不同支撑样本量对模型识别精度的影响，最后，将实验结果绘制表格并列出识别准确率的平均值、最大值和最小值，将改进嵌入网络后的CBAM-IGPN与CBAM-GPN、GPN、PN进行识别精度对比如表2所示。为了防止单次实验的偶然性，每组实验重复10次并计算平均值，即均值。可以看出在样本量较少的情况下，本发明CBAM-IGPN与CBAM-GPN、GPN、PN相比，平均识别精度都有明显的提升。但是测试准确率的最小值也可以反映出发动机振动信号特征图中存在着低质量的标签样本，从而导致识别精度降低。同时，通过对比相同样本数量下，增加支撑样本的数量可以显著提高模型对故障的识别率；其中，CBAM-IGPN为本发明方法、CBAM-GPN表示马尔可夫变迁场+传统高斯原型网络；GPN表示传统高斯原型网络；PN表示原型网络。表2CBAM-IGPN与CBAM-GPN、GPN、PN对比实施例2：一种基于马尔可夫变迁场和改进高斯原型网络的发动机气门故障诊断系统，包括：用于获取发动机气缸缸盖电压信号数据，建立时序数据集的模块；用于对时序数据集进行编码，获得不同类型的二维特征图的模块；用于将编码后的二维特征图打标签的模块；用于对高斯原型网络中的嵌入网络进行改进，获得改进嵌入网络的模块；用于依据训练集训练基于改进高斯原型网络的发动机气门故障诊断模型，获得训练好的基于改进高斯原型网络的发动机气门故障诊断模型的模块；用于依据训练好的改进高斯原型网络的发动机气门故障诊断模型对测试集进行测试的模块。上述本发明实施例序号仅仅为了描述，不代表实施例的优劣。在本发明的上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述的部分，可以参见其他实施例的相关描述。上面结合附图对本发明的具体实施方式作了详细说明，但是本发明并不限于上述实施方式，在本领域普通技术人员所具备的知识范围内，还可以在不脱离本发明宗旨的前提下做出各种变化。
