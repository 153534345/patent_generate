标题title
基于分光光谱的肿瘤细胞检测设备及其方法
摘要abst
公开了一种基于分光光谱的肿瘤细胞检测设备及其方法，其获取由分光光谱仪采集的待检测血液样本的分光光谱图；采用基于深度学习的人工智能技术，对所述分光光谱图进行特征编码以得到分类特征，进而使用分类器来确定所述分类特征所属的类概率标签，所述类概率标签包括待检测血液样本含有CTC细胞以及待检测血液样本不含有CTC细胞。这样，可以对待检测血液样本中是否含有肿瘤细胞进行准确判断，提高肿瘤细胞检测设备的准确性。
权利要求书clms
1.一种基于分光光谱的肿瘤细胞检测设备，其特征在于，包括：分光光谱图采集模块，用于获取由分光光谱仪采集的待检测血液样本的分光光谱图；分光模块，用于提取所述分光光谱图中各个单色光的曲线图；单光特征提取模块，用于将所述各个单色光的曲线图分别通过作为过滤器的卷积神经网络模型以得到多个单色光特征向量；局部关联特征提取模块，用于将所述多个单色光特征向量进行二维排列为特征矩阵后通过作为特征提取器的第一卷积神经网络以得到局部关联特征图；全局关联特征提取模块，用于将所述局部关联特征图通过非局部神经网络以得到全局关联特征图；特征融合模块，用于融合所述局部关联特征图和所述全局关联特征图以得到分类特征向量；以及检测结果生成模块，用于将所述分类特征图通过分类器以得到分类结果，所述分类结果用于表示待检测血液样本是否含有CTC细胞。2.根据权利要求1所述的基于分光光谱的肿瘤细胞检测设备，其特征在于，所述单光特征提取模块，进一步用于：使用所述作为过滤器的卷积神经网络模型的各层在层的正向传递中分别对输入数据进行：对所述输入数据进行卷积处理以得到卷积特征图；对所述卷积特征图进行基于特征矩阵的均值池化处理以得到池化特征图；以及对所述池化特征图进行非线性激活以得到激活特征图；其中，所述作为过滤器的卷积神经网络模型的最后一层的输出为所述多个单色光特征向量，所述作为过滤器的卷积神经网络模型的第一层的输入为所述各个单色光的曲线图。3.根据权利要求2所述的基于分光光谱的肿瘤细胞检测设备，其特征在于，所述局部关联特征提取模块，进一步用于：使用所述作为特征提取器的第一卷积神经网络的各层在层的正向传递中对输入数据分别进行卷积处理、均值池化处理和非线性激活处理以由所述作为特征提取器的第一卷积神经网络的最后一层的输出为所述局部关联特征图，其中，所述作为特征提取器的第一卷积神经网络的第一层的输入为所述特征矩阵。4.根据权利要求3所述的基于分光光谱的肿瘤细胞检测设备，其特征在于，所述全局关联特征提取模块，包括：卷积单元，用于将所述局部关联特征图输入所述非局部神经网络的第一点卷积层、第二点卷积层和第三点卷积层以得到第一特征图、第二特征图和第三特征图；中间融合单元，用于计算所述第一特征图和所述第二特征图的按位置加权和以得到中间融合特征图；归一化单元，用于将所述中间融合特征图输入Softmax函数以对所述中间融合特征图中各个位置的特征值进行归一化以得到归一化中间融合特征图；再融合单元，用于计算所述归一化中间融合特征图和所述第三特征图的按位置加权和以得到再融合特征图；高斯相似单元，用于将所述再融合特征图通过嵌入高斯相似性函数以计算所述再融合特征图中各个位置的特征值间的相似性以得到全局相似特征图；通道调整单元，用于将所述全局相似特征图通过所述非局部神经网络的第四点卷积层以调整所述全局相似特征图的通道数以得到通道调整全局相似特征图；以及按位置加权计算单元，用于计算所述通道调整全局相似特征图和所述局部关联特征图的按位置加权和以得到所述全局关联特征图。5.根据权利要求4所述的基于分光光谱的肿瘤细胞检测设备，其特征在于，所述特征融合模块，包括：级联单元，用于将所述局部关联特征图和所述全局关联特征图进行级联以得到融合特征图；特征图展开单元，用于将所述局部关联特征图和所述全局关联特征图展开为局部关联特征向量和全局关联特征向量；类节点的拓扑-类中心优化单元，用于对所述局部关联特征向量和所述全局关联特征向量进行类节点的拓扑-类中心优化以得到优化特征矩阵；以及融合优化单元，用于将所述融合特征图展开为融合特征向量后，将所述优化特征矩阵与所述融合特征向量进行矩阵相乘以得到所述分类特征向量。6.根据权利要求5所述的基于分光光谱的肿瘤细胞检测设备，其特征在于，所述特征图展开单元，用于将所述局部关联特征图和所述全局关联特征图按沿着行向量进行展开为所述局部关联特征向量和所述全局关联特征向量。7.根据权利要求6所述的基于分光光谱的肿瘤细胞检测设备，其特征在于，所述类节点的拓扑-类中心优化单元，进一步用于：以如下公式对所述局部关联特征向量和所述全局关联特征向量进行类节点的拓扑-类中心优化以得到优化特征矩阵；其中，所述公式为：其中，表示所述局部关联特征向量，表示所述全局关联特征向量，表示所述全局关联特征向量的转置向量，和分别表示矩阵或向量的Kronecker积和Hadamard积，为所述局部关联特征向量和所述全局关联特征向量之间的距离矩阵，且和均为列向量，表示矩阵的指数运算，所述矩阵的指数运算表示计算以所述数值为幂的自然指数函数值。8.根据权利要求7所述的基于分光光谱的肿瘤细胞检测设备，其特征在于，所述检测结果生成模块，包括：特征图展开单元，用于将所述分类特征图按照行向量或列向量展开为分类特征向量；全连接编码单元，用于使用所述分类器的多个全连接层对所述分类特征向量进行全连接编码以得到编码分类特征向量；以及分类单元，用于将所述编码分类特征向量通过所述分类器的Softmax分类函数以得到所述分类结果。9.一种基于分光光谱的肿瘤细胞检测方法，其特征在于，包括：获取由分光光谱仪采集的待检测血液样本的分光光谱图；提取所述分光光谱图中各个单色光的曲线图；将所述各个单色光的曲线图分别通过作为过滤器的卷积神经网络模型以得到多个单色光特征向量；将所述多个单色光特征向量进行二维排列为特征矩阵后通过作为特征提取器的第一卷积神经网络以得到局部关联特征图；将所述局部关联特征图通过非局部神经网络以得到全局关联特征图；融合所述局部关联特征图和所述全局关联特征图以得到分类特征向量；以及将所述分类特征图通过分类器以得到分类结果，所述分类结果用于表示待检测血液样本是否含有CTC细胞。10.根据权利要求9所述的基于分光光谱的肿瘤细胞检测方法，其特征在于，所述单光特征提取模块，进一步用于：使用所述作为过滤器的卷积神经网络模型的各层在层的正向传递中分别对输入数据进行：对所述输入数据进行卷积处理以得到卷积特征图；对所述卷积特征图进行基于特征矩阵的均值池化处理以得到池化特征图；以及对所述池化特征图进行非线性激活以得到激活特征图；其中，所述作为过滤器的卷积神经网络模型的最后一层的输出为所述多个单色光特征向量，所述作为过滤器的卷积神经网络模型的第一层的输入为所述各个单色光的曲线图。
说明书desc
技术领域本申请涉及智能化检测技术领域，且更为具体地，涉及一种基于分光光谱的肿瘤细胞检测设备及其方法。背景技术已知在实体癌患者中肿瘤细胞从原发肿瘤组织游离出并在血液中循环。迄今为止，已有大量报道称，通过从血液中分离、回收该血液中循环肿瘤细胞，能够掌握患者的预后、肿瘤的分子生物学特征以及治疗前后的肿瘤的性状变化。在显微镜下观察细胞，因此忽视在血液中仅存在极少量的CTC的可能性高。另外，作为其它检测方法，有时使用利用针对在CTC表面表达的特定标志蛋白的免疫反应的生物学方法。在该情况下，检测能力依赖于标志蛋白的表达，因此只能检测出表达标志蛋白的肿瘤细胞。另外还已知，由于肿瘤细胞群是不均匀的，因此标志蛋白表达量是不恒定的，检测能力不稳定。此外，在发生了EMT的肿瘤细胞中不表达标志蛋白、或者表达量少，因此难以检测出。此外，认为会发生对回收后的细胞进行培养时的存活率降低、DNA分析或蛋白质分析中的精度变差。因此，期待一种优化的肿瘤细胞检测设备。发明内容为了解决上述技术问题，提出了本申请。本申请的实施例提供了一种基于分光光谱的肿瘤细胞检测设备及其方法，其获取由分光光谱仪采集的待检测血液样本的分光光谱图；采用基于深度学习的人工智能技术，对所述分光光谱图进行特征编码以得到分类特征，进而使用分类器来确定所述分类特征所属的类概率标签，所述类概率标签包括待检测血液样本含有CTC细胞以及待检测血液样本不含有CTC细胞。这样，可以对待检测血液样本中是否含有肿瘤细胞进行准确判断，提高肿瘤细胞检测设备的准确性。根据本申请的一个方面，提供了一种基于分光光谱的肿瘤细胞检测设备，其包括：分光光谱图采集模块，用于获取由分光光谱仪采集的待检测血液样本的分光光谱图；分光模块，用于提取所述分光光谱图中各个单色光的曲线图；单光特征提取模块，用于将所述各个单色光的曲线图分别通过作为过滤器的卷积神经网络模型以得到多个单色光特征向量；局部关联特征提取模块，用于将所述多个单色光特征向量进行二维排列为特征矩阵后通过作为特征提取器的第一卷积神经网络以得到局部关联特征图；全局关联特征提取模块，用于将所述局部关联特征图通过非局部神经网络以得到全局关联特征图；特征融合模块，用于融合所述局部关联特征图和所述全局关联特征图以得到分类特征向量；以及检测结果生成模块，用于将所述分类特征图通过分类器以得到分类结果，所述分类结果用于表示待检测血液样本是否含有CTC细胞。在上述基于分光光谱的肿瘤细胞检测设备中，所述单光特征提取模块，进一步用于：使用所述作为过滤器的卷积神经网络模型的各层在层的正向传递中分别对输入数据进行：对所述输入数据进行卷积处理以得到卷积特征图； 对所述卷积特征图进行基于特征矩阵的均值池化处理以得到池化特征图；以及，对所述池化特征图进行非线性激活以得到激活特征图；其中，所述作为过滤器的卷积神经网络模型的最后一层的输出为所述多个单色光特征向量，所述作为过滤器的卷积神经网络模型的第一层的输入为所述各个单色光的曲线图。在上述基于分光光谱的肿瘤细胞检测设备中，所述局部关联特征提取模块，进一步用于：使用所述作为特征提取器的第一卷积神经网络的各层在层的正向传递中对输入数据分别进行卷积处理、均值池化处理和非线性激活处理以由所述作为特征提取器的第一卷积神经网络的最后一层的输出为所述局部关联特征图，其中，所述作为特征提取器的第一卷积神经网络的第一层的输入为所述特征矩阵。在上述基于分光光谱的肿瘤细胞检测设备中，所述全局关联特征提取模块，包括：卷积单元，用于将所述局部关联特征图输入所述非局部神经网络的第一点卷积层、第二点卷积层和第三点卷积层以得到第一特征图、第二特征图和第三特征图；中间融合单元，用于计算所述第一特征图和所述第二特征图的按位置加权和以得到中间融合特征图；归一化单元，用于将所述中间融合特征图输入Softmax函数以对所述中间融合特征图中各个位置的特征值进行归一化以得到归一化中间融合特征图；再融合单元，用于计算所述归一化中间融合特征图和所述第三特征图的按位置加权和以得到再融合特征图；高斯相似单元，用于将所述再融合特征图通过嵌入高斯相似性函数以计算所述再融合特征图中各个位置的特征值间的相似性以得到全局相似特征图；通道调整单元，用于将所述全局相似特征图通过所述非局部神经网络的第四点卷积层以调整所述全局相似特征图的通道数以得到通道调整全局相似特征图；以及，按位置加权计算单元，用于计算所述通道调整全局相似特征图和所述局部关联特征图的按位置加权和以得到所述全局关联特征图。在上述基于分光光谱的肿瘤细胞检测设备中，所述特征融合模块，包括：级联单元，用于将所述局部关联特征图和所述全局关联特征图进行级联以得到融合特征图；特征图展开单元，用于将所述局部关联特征图和所述全局关联特征图展开为局部关联特征向量和全局关联特征向量；类节点的拓扑-类中心优化单元，用于对所述局部关联特征向量和所述全局关联特征向量进行类节点的拓扑-类中心优化以得到优化特征矩阵；以及，融合优化单元，用于将所述融合特征图展开为融合特征向量后，将所述优化特征矩阵与所述融合特征向量进行矩阵相乘以得到所述分类特征向量。在上述基于分光光谱的肿瘤细胞检测设备中，所述特征图展开单元，用于将所述局部关联特征图和所述全局关联特征图按沿着行向量进行展开为所述局部关联特征向量和所述全局关联特征向量。在上述基于分光光谱的肿瘤细胞检测设备中，所述类节点的拓扑-类中心优化单元，进一步用于：以如下公式对所述局部关联特征向量和所述全局关联特征向量进行类节点的拓扑-类中心优化以得到优化特征矩阵；其中，所述公式为：其中，表示所述局部关联特征向量，表示所述全局关联特征向量，表示所述全局关联特征向量的转置向量，和分别表示矩阵或向量的Kronecker积和Hadamard积，为所述局部关联特征向量和所述全局关联特征向量之间的距离矩阵，且和均为列向量，表示矩阵的指数运算，所述矩阵的指数运算表示计算以所述数值为幂的自然指数函数值。在上述基于分光光谱的肿瘤细胞检测设备中，所述检测结果生成模块，包括：特征图展开单元，用于将所述分类特征图按照行向量或列向量展开为分类特征向量；全连接编码单元，用于使用所述分类器的多个全连接层对所述分类特征向量进行全连接编码以得到编码分类特征向量；以及，分类单元，用于将所述编码分类特征向量通过所述分类器的Softmax分类函数以得到所述分类结果。根据本申请的另一个方面，提供了一种基于分光光谱的肿瘤细胞检测方法，其包括：获取由分光光谱仪采集的待检测血液样本的分光光谱图；提取所述分光光谱图中各个单色光的曲线图；将所述各个单色光的曲线图分别通过作为过滤器的卷积神经网络模型以得到多个单色光特征向量；将所述多个单色光特征向量进行二维排列为特征矩阵后通过作为特征提取器的第一卷积神经网络以得到局部关联特征图；将所述局部关联特征图通过非局部神经网络以得到全局关联特征图；融合所述局部关联特征图和所述全局关联特征图以得到分类特征向量；以及将所述分类特征图通过分类器以得到分类结果，所述分类结果用于表示待检测血液样本是否含有CTC细胞。在上述基于分光光谱的肿瘤细胞检测方法中，使用所述作为过滤器的卷积神经网络模型的各层在层的正向传递中分别对输入数据进行：对所述输入数据进行卷积处理以得到卷积特征图；对所述卷积特征图进行基于特征矩阵的均值池化处理以得到池化特征图；以及，对所述池化特征图进行非线性激活以得到激活特征图；其中，所述作为过滤器的卷积神经网络模型的最后一层的输出为所述多个单色光特征向量，所述作为过滤器的卷积神经网络模型的第一层的输入为所述各个单色光的曲线图。与现有技术相比，本申请提供的基于分光光谱的肿瘤细胞检测设备及其方法，其获取由分光光谱仪采集的待检测血液样本的分光光谱图；采用基于深度学习的人工智能技术，对所述分光光谱图进行特征编码以得到分类特征，进而使用分类器来确定所述分类特征所属的类概率标签，所述类概率标签包括待检测血液样本含有CTC细胞以及待检测血液样本不含有CTC细胞。这样，可以对待检测血液样本中是否含有肿瘤细胞进行准确判断，提高肿瘤细胞检测设备的准确性。附图说明通过结合附图对本申请实施例进行更详细的描述，本申请的上述以及其他目的、特征和优势将变得更加明显。附图用来提供对本申请实施例的进一步理解，并且构成说明书的一部分，与本申请实施例一起用于解释本申请，并不构成对本申请的限制。在附图中，相同的参考标号通常代表相同部件或步骤。图1为根据本申请实施例的基于分光光谱的肿瘤细胞检测设备的应用场景图。图2为根据本申请实施例的基于分光光谱的肿瘤细胞检测设备的框图。图3为根据本申请实施例的基于分光光谱的肿瘤细胞检测设备中所述全局关联特征提取模块的框图。图4为根据本申请实施例的基于分光光谱的肿瘤细胞检测设备中所述特征融合模块的框图。图5为根据本申请实施例的基于分光光谱的肿瘤细胞检测设备中所述检测结果生成模块的框图。图6为根据本申请实施例的基于分光光谱的肿瘤细胞检测方法的流程图。图7为根据本申请实施例的基于分光光谱的肿瘤细胞检测方法的系统架构的示意图。具体实施方式下面，将参考附图详细地描述根据本申请的示例实施例。显然，所描述的实施例仅仅是本申请的一部分实施例，而不是本申请的全部实施例，应理解，本申请不受这里描述的示例实施例的限制。场景概述随着科技的发展，光谱仪器在各个领域都得到了广泛的应用。现有一些厂家在利用光谱仪器来进行肿瘤细胞检测，应可以理解，如果被检测对象中存在肿瘤细胞，则其在所采集的分光光谱图中会有所体现，但是，因肿瘤细胞在被检测对象，例如血液样本，中的含量极微，因此，在得到血液样本的分光光谱图后，很难基于所述分光光谱图得到待检测血液样本中是否含有肿瘤细胞的准确判断。近年来，深度学习以及神经网络已经广泛应用于计算机视觉、自然语言处理、文本信号处理等领域。此外，深度学习以及神经网络在图像分类、物体检测、语义分割、文本翻译等领域，也展现出了接近甚至超越人类的水平。深度学习以及神经网络的发展为血液样本中是否含有肿瘤细胞的判断提供了新的解决思路和方案。应可以理解，基于所述分光光谱图，对所述待检测血液样本中是否含有肿瘤细胞进行判断的问题，本质上可以转化为分类问题。也就是，对所述分光光谱图进行特征编码以得到分类特征，进而使用分类器来确定所述分类特征所属的类概率标签，所述类概率标签包括待检测血液样本含有CTC细胞以及待检测血液样本不含有CTC细胞。具体地，在本申请的技术方案中，首先获取由分光光谱仪采集的待检测血液样本的分光光谱图。然后，提取所述分光光谱图中各个单色光的曲线图以得到多个单色光曲线图。接着，将所述各个单色光的曲线图分别通过作为过滤器的卷积神经网络模型以得到多个单色光特征向量。也就是，将所述各个单色光的曲线图作为图像，并使用在图像特征提取邻域具有优异性能的卷积神经网络模型作为特征提取器对所述各个单色光的曲线图进行卷积核的局部空间域特征过滤以得到所述单色光特征向量。本领域普通技术人员应知晓，所述卷积神经网络模型所使用的卷积核具有可学习的神经网络参数，因此，通过特定的训练策略可使得所述卷积核能够捕捉所述单色光的曲线图中用于表示是否含有CTC细胞的高维隐含模式特征。考虑到所述待检测血液样本的分光光谱图包含多个单色光的曲线图，且所述多个单色光的曲线图间存在高维隐含模式特征，针对此特性，在本申请的技术方案中，将所述多个单色光特征向量进行二维排列为特征矩阵后通过作为特征提取器的第一卷积神经网络以得到局部关联特征图。也就是，将所述各个单色光的曲线图的高维特征表示在数据结构端进行特征聚合，并使用在局部特征提取领域具有优异性能表现的卷积神经网络模型对由所述多个单色光特征向量二维排列而得的特征矩阵进行深度卷积编码以捕捉不同单色光的曲线图在空间域的局部特征之间的高维隐含关联特征以得到所述局部关联特征图。但是，卷积是典型的局部操作，而由所述多个单色光特征向量二维排列而得的特征矩阵中各个要素除了存在局部模式关联外，还与邻域外其他的要素也存在关联。也就是，卷积神经网络模型虽然在局部特征提取方面具有优异的性能表现，但是受限于卷积编码的运算特性，其无法捕捉全局关联。基于此，在本申请的技术方案中，将所述局部关联特征图通过非局部神经网络以得到全局关联特征图。在得到所述局部关联特征图和所述全局关联特征图，融合所述局部关联特征图和所述全局关联特征图以得到分类特征表示，并将所述分类特征表示通过分类器以得到分类结果，所述分类结果用于表示待检测血液样本是否含有CTC细胞。也就是，在得到包含所述分光光谱图的高维特征表示后，使用所述分类器来确定所述分类特征表示所属的类概率标签，其中，所述类概率标签包括待检测血液样本含有CTC细胞，以及，待检测血液样本不含有CTC细胞。特别地，在本申请的技术方案中，在融合所述局部关联特征图和所述全局关联特征图以得到分类结果时，考虑到所述局部关联特征图聚焦于单色光图像通道语义的局部二维样本-语义关联，而所述全局关联特征图聚焦于局部关联特征的全局特征表达，因此所述局部关联特征图在分类概率表示上会偏移所述全局关联特征图的分类概率表示，也就是，所述局部关联特征图和所述全局关联特征图存在类中心偏移，从而影响融合所述局部关联特征图和所述全局关联特征图得到的融合特征图的分类结果的准确性。因此，优选地，首先将所述局部关联特征图和所述全局关联特征图展开为局部关联特征向量和全局关联特征向量，在对所述局部关联特征向量和所述全局关联特征向量进行类节点的拓扑-类中心优化，表示为：和分别表示矩阵的Kronecker积和Hadamard积，为特征向量和之间的距离矩阵，即，且和均为列向量。具体地，在分类器的二分类问题中，如果将所述局部关联特征向量和所述全局关联特征向量优化后的类节点表示为树形式，则所述局部关联特征向量和所述全局关联特征向量各自的类节点分布为基于根节点的子树，因此可以利用节点之间关联的图拓扑，来使得优化后的类节点的节点分布基于图拓扑而表现为以各自节点为中心的子图结构，从而表达以所述局部关联特征向量和所述全局关联特征向量各自的类节点为根的子树结构，以实现所述局部关联特征向量和所述全局关联特征向量的基于类节点-中心的拓扑式优化，从而消除所述局部关联特征向量和所述全局关联特征向量之间的类中心偏移。进而，将优化的特征矩阵与融合特征图展开后得到的融合特征向量，例如记为相乘，以将所述融合特征向量映射到消除类中心偏移的优化的特征空间内，再将所述融合特征向量通过分类器，就可以提升分类结果的准确性。基于此，本申请提供了一种基于分光光谱的肿瘤细胞检测设备，其包括：分光光谱图采集模块，用于获取由分光光谱仪采集的待检测血液样本的分光光谱图；分光模块，用于提取所述分光光谱图中各个单色光的曲线图；单光特征提取模块，用于将所述各个单色光的曲线图分别通过作为过滤器的卷积神经网络模型以得到多个单色光特征向量；局部关联特征提取模块，用于将所述多个单色光特征向量进行二维排列为特征矩阵后通过作为特征提取器的第一卷积神经网络以得到局部关联特征图；全局关联特征提取模块，用于将所述局部关联特征图通过非局部神经网络以得到全局关联特征图；特征融合模块，用于融合所述局部关联特征图和所述全局关联特征图以得到分类特征向量；以及，检测结果生成模块，用于将所述分类特征图通过分类器以得到分类结果，所述分类结果用于表示待检测血液样本是否含有CTC细胞。图1为根据本申请实施例的基于分光光谱的肿瘤细胞检测设备的应用场景图。如图1所示，在该应用场景中，首先，获取由分光光谱仪采集的待检测血液样本的分光光谱图然后，将获取的分光光谱图输入至部署有基于分光光谱的肿瘤细胞检测算法的服务器中，其中，所述服务器能够使用基于分光光谱的肿瘤细胞检测算法对所述分光光谱图进行处理，以生成用于表示待检测血液样本是否含有CTC细胞的分类结果。在介绍了本申请的基本原理之后，下面将参考附图来具体介绍本申请的各种非限制性实施例。示例性系统图2为根据本申请实施例的基于分光光谱的肿瘤细胞检测设备的框图。如图2所示，根据本申请实施例的基于分光光谱的肿瘤细胞检测设备100，包括：分光光谱图采集模块110，用于获取由分光光谱仪采集的待检测血液样本的分光光谱图；分光模块120，用于提取所述分光光谱图中各个单色光的曲线图；单光特征提取模块130，用于将所述各个单色光的曲线图分别通过作为过滤器的卷积神经网络模型以得到多个单色光特征向量；局部关联特征提取模块140，用于将所述多个单色光特征向量进行二维排列为特征矩阵后通过作为特征提取器的第一卷积神经网络以得到局部关联特征图；全局关联特征提取模块150，用于将所述局部关联特征图通过非局部神经网络以得到全局关联特征图；特征融合模块160，用于融合所述局部关联特征图和所述全局关联特征图以得到分类特征向量；以及，检测结果生成模块170，用于将所述分类特征图通过分类器以得到分类结果，所述分类结果用于表示待检测血液样本是否含有CTC细胞。具体地，在本申请实施例中，所述分光光谱图采集模块110和所述分光模块120，用于获取由分光光谱仪采集的待检测血液样本的分光光谱图；以及，用于提取所述分光光谱图中各个单色光的曲线图。随着科技的发展，光谱仪器在各个领域都得到了广泛的应用。现有一些厂家在利用光谱仪器来进行肿瘤细胞检测，应可以理解，如果被检测对象中存在肿瘤细胞，则其在所采集的分光光谱图中会有所体现，但是，因肿瘤细胞在被检测对象，例如血液样本，中的含量极微，因此，在得到血液样本的分光光谱图后，很难基于所述分光光谱图得到待检测血液样本中是否含有肿瘤细胞的准确判断。近年来，深度学习以及神经网络已经广泛应用于计算机视觉、自然语言处理、文本信号处理等领域。此外，深度学习以及神经网络在图像分类、物体检测、语义分割、文本翻译等领域，也展现出了接近甚至超越人类的水平。深度学习以及神经网络的发展为血液样本中是否含有肿瘤细胞的判断提供了新的解决思路和方案。应可以理解，基于所述分光光谱图，对所述待检测血液样本中是否含有肿瘤细胞进行判断的问题，本质上可以转化为分类问题。也就是，对所述分光光谱图进行特征编码以得到分类特征，进而使用分类器来确定所述分类特征所属的类概率标签，所述类概率标签包括待检测血液样本含有CTC细胞以及待检测血液样本不含有CTC细胞。具体地，在本申请的技术方案中，首先获取由分光光谱仪采集的待检测血液样本的分光光谱图。然后，提取所述分光光谱图中各个单色光的曲线图以得到多个单色光曲线图。具体地，在本申请实施例中，所述单光特征提取模块130，用于将所述各个单色光的曲线图分别通过作为过滤器的卷积神经网络模型以得到多个单色光特征向量。接着，将所述各个单色光的曲线图分别通过作为过滤器的卷积神经网络模型以得到多个单色光特征向量。也就是，将所述各个单色光的曲线图作为图像，并使用在图像特征提取邻域具有优异性能的卷积神经网络模型作为特征提取器对所述各个单色光的曲线图进行卷积核的局部空间域特征过滤以得到所述单色光特征向量。本领域普通技术人员应知晓，所述卷积神经网络模型所使用的卷积核具有可学习的神经网络参数，因此，通过特定的训练策略可使得所述卷积核能够捕捉所述单色光的曲线图中用于表示是否含有CTC细胞的高维隐含模式特征。其中，所述单光特征提取模块，进一步用于：使用所述作为过滤器的卷积神经网络模型的各层在层的正向传递中分别对输入数据进行：对所述输入数据进行卷积处理以得到卷积特征图；对所述卷积特征图进行基于特征矩阵的均值池化处理以得到池化特征图；以及，对所述池化特征图进行非线性激活以得到激活特征图；其中，所述作为过滤器的卷积神经网络模型的最后一层的输出为所述多个单色光特征向量，所述作为过滤器的卷积神经网络模型的第一层的输入为所述各个单色光的曲线图。具体地，在本申请实施例中，所述局部关联特征提取模块140，用于将所述多个单色光特征向量进行二维排列为特征矩阵后通过作为特征提取器的第一卷积神经网络以得到局部关联特征图。考虑到所述待检测血液样本的分光光谱图包含多个单色光的曲线图，且所述多个单色光的曲线图间存在高维隐含模式特征，针对此特性，在本申请的技术方案中，将所述多个单色光特征向量进行二维排列为特征矩阵后通过作为特征提取器的第一卷积神经网络以得到局部关联特征图。也就是，将所述各个单色光的曲线图的高维特征表示在数据结构端进行特征聚合，并使用在局部特征提取领域具有优异性能表现的卷积神经网络模型对由所述多个单色光特征向量二维排列而得的特征矩阵进行深度卷积编码以捕捉不同单色光的曲线图在空间域的局部特征之间的高维隐含关联特征以得到所述局部关联特征图。其中，所述局部关联特征提取模块，进一步用于：使用所述作为特征提取器的第一卷积神经网络的各层在层的正向传递中对输入数据分别进行卷积处理、均值池化处理和非线性激活处理以由所述作为特征提取器的第一卷积神经网络的最后一层的输出为所述局部关联特征图，其中，所述作为特征提取器的第一卷积神经网络的第一层的输入为所述特征矩阵。具体地，在本申请实施例中，所述全局关联特征提取模块150，用于将所述局部关联特征图通过非局部神经网络以得到全局关联特征图。但是，卷积是典型的局部操作，而由所述多个单色光特征向量二维排列而得的特征矩阵中各个要素除了存在局部模式关联外，还与邻域外其他的要素也存在关联。也就是，卷积神经网络模型虽然在局部特征提取方面具有优异的性能表现，但是受限于卷积编码的运算特性，其无法捕捉全局关联。基于此，在本申请的技术方案中，将所述局部关联特征图通过非局部神经网络以得到全局关联特征图。图3为根据本申请实施例的基于分光光谱的肿瘤细胞检测设备中所述全局关联特征提取模块的框图，如图3所示，所述全局关联特征提取模块，包括：卷积单元210，用于将所述局部关联特征图输入所述非局部神经网络的第一点卷积层、第二点卷积层和第三点卷积层以得到第一特征图、第二特征图和第三特征图；中间融合单元220，用于计算所述第一特征图和所述第二特征图的按位置加权和以得到中间融合特征图；归一化单元230，用于将所述中间融合特征图输入Softmax函数以对所述中间融合特征图中各个位置的特征值进行归一化以得到归一化中间融合特征图；再融合单元240，用于计算所述归一化中间融合特征图和所述第三特征图的按位置加权和以得到再融合特征图；高斯相似单元250，用于将所述再融合特征图通过嵌入高斯相似性函数以计算所述再融合特征图中各个位置的特征值间的相似性以得到全局相似特征图；通道调整单元260，用于将所述全局相似特征图通过所述非局部神经网络的第四点卷积层以调整所述全局相似特征图的通道数以得到通道调整全局相似特征图；以及，按位置加权计算单元270，用于计算所述通道调整全局相似特征图和所述局部关联特征图的按位置加权和以得到所述全局关联特征图。具体地，在本申请实施例中，所述特征融合模块160，用于融合所述局部关联特征图和所述全局关联特征图以得到分类特征向量。特别地，在本申请的技术方案中，在融合所述局部关联特征图和所述全局关联特征图以得到分类结果时，考虑到所述局部关联特征图聚焦于单色光图像通道语义的局部二维样本-语义关联，而所述全局关联特征图聚焦于局部关联特征的全局特征表达，因此所述局部关联特征图在分类概率表示上会偏移所述全局关联特征图的分类概率表示，也就是，所述局部关联特征图和所述全局关联特征图存在类中心偏移，从而影响融合所述局部关联特征图和所述全局关联特征图得到的融合特征图的分类结果的准确性。图4为根据本申请实施例的基于分光光谱的肿瘤细胞检测设备中所述特征融合模块的框图，如图4所示，所述特征融合模块，包括：级联单元310，用于将所述局部关联特征图和所述全局关联特征图进行级联以得到融合特征图；特征图展开单元320，用于将所述局部关联特征图和所述全局关联特征图展开为局部关联特征向量和全局关联特征向量；类节点的拓扑-类中心优化单元330，用于对所述局部关联特征向量和所述全局关联特征向量进行类节点的拓扑-类中心优化以得到优化特征矩阵；以及，融合优化单元340，用于将所述融合特征图展开为融合特征向量后，将所述优化特征矩阵与所述融合特征向量进行矩阵相乘以得到所述分类特征向量。其中，所述特征图展开单元，用于将所述局部关联特征图和所述全局关联特征图按沿着行向量进行展开为所述局部关联特征向量和所述全局关联特征向量。在本申请中，优选地，首先将所述局部关联特征图和所述全局关联特征图展开为局部关联特征向量和全局关联特征向量，在对所述局部关联特征向量和所述全局关联特征向量进行类节点的拓扑-类中心优化。也就是，所述类节点的拓扑-类中心优化单元，进一步用于：以如下公式对所述局部关联特征向量和所述全局关联特征向量进行类节点的拓扑-类中心优化以得到优化特征矩阵；其中，所述公式为：其中，表示所述局部关联特征向量，表示所述全局关联特征向量，表示所述全局关联特征向量的转置向量，和分别表示矩阵或向量的Kronecker积和Hadamard积，为所述局部关联特征向量和所述全局关联特征向量之间的距离矩阵，且和均为列向量，表示矩阵的指数运算，所述矩阵的指数运算表示计算以所述数值为幂的自然指数函数值。具体地，在分类器的二分类问题中，如果将所述局部关联特征向量和所述全局关联特征向量优化后的类节点表示为树形式，则所述局部关联特征向量和所述全局关联特征向量各自的类节点分布为基于根节点的子树，因此可以利用节点之间关联的图拓扑，来使得优化后的类节点的节点分布基于图拓扑而表现为以各自节点为中心的子图结构，从而表达以所述局部关联特征向量和所述全局关联特征向量各自的类节点为根的子树结构，以实现所述局部关联特征向量和所述全局关联特征向量的基于类节点-中心的拓扑式优化，从而消除所述局部关联特征向量和所述全局关联特征向量之间的类中心偏移。进而，将优化的特征矩阵与融合特征图展开后得到的融合特征向量，例如记为相乘，以将所述融合特征向量映射到消除类中心偏移的优化的特征空间内，再将所述融合特征向量通过分类器，就可以提升分类结果的准确性。具体地，在本申请实施例中，所述检测结果生成模块170，用于将所述分类特征图通过分类器以得到分类结果，所述分类结果用于表示待检测血液样本是否含有CTC细胞。在得到所述局部关联特征图和所述全局关联特征图，融合所述局部关联特征图和所述全局关联特征图以得到分类特征表示，并将所述分类特征表示通过分类器以得到分类结果，所述分类结果用于表示待检测血液样本是否含有CTC细胞。也就是，在得到包含所述分光光谱图的高维特征表示后，使用所述分类器来确定所述分类特征表示所属的类概率标签，其中，所述类概率标签包括待检测血液样本含有CTC细胞，以及，待检测血液样本不含有CTC细胞。图5为根据本申请实施例的基于分光光谱的肿瘤细胞检测设备中所述检测结果生成模块的框图，如图5所示，所述检测结果生成模块，包括：特征图展开单元410，用于将所述分类特征图按照行向量或列向量展开为分类特征向量；全连接编码单元420，用于使用所述分类器的多个全连接层对所述分类特征向量进行全连接编码以得到编码分类特征向量；以及，分类单元430，用于将所述编码分类特征向量通过所述分类器的Softmax分类函数以得到所述分类结果。使用所述分类器以如下公式对所述分类特征图进行处理以得到所述分类结果；其中，所述公式为：，其中，到为权重矩阵，到为偏置向量，为所述分类特征图投影为向量。综上，基于本申请实施例的基于分光光谱的肿瘤细胞检测设备100被阐明，其获取由分光光谱仪采集的待检测血液样本的分光光谱图；采用基于深度学习的人工智能技术，对所述分光光谱图进行特征编码以得到分类特征，进而使用分类器来确定所述分类特征所属的类概率标签，所述类概率标签包括待检测血液样本含有CTC细胞以及待检测血液样本不含有CTC细胞。这样，可以对待检测血液样本中是否含有肿瘤细胞进行准确判断，提高肿瘤细胞检测设备的准确性。示例性方法图6为根据本申请实施例的基于分光光谱的肿瘤细胞检测方法的流程图。如图6所示，根据本申请实施例的基于分光光谱的肿瘤细胞检测方法，其包括：S110，获取由分光光谱仪采集的待检测血液样本的分光光谱图；S120，提取所述分光光谱图中各个单色光的曲线图；S130，将所述各个单色光的曲线图分别通过作为过滤器的卷积神经网络模型以得到多个单色光特征向量；S140，将所述多个单色光特征向量进行二维排列为特征矩阵后通过作为特征提取器的第一卷积神经网络以得到局部关联特征图；S150，将所述局部关联特征图通过非局部神经网络以得到全局关联特征图；S160，融合所述局部关联特征图和所述全局关联特征图以得到分类特征向量；以及，S170，将所述分类特征图通过分类器以得到分类结果，所述分类结果用于表示待检测血液样本是否含有CTC细胞。图7为根据本申请实施例的基于分光光谱的肿瘤细胞检测方法的系统架构的示意图。如图7所示，在所述基于分光光谱的肿瘤细胞检测方法的系统架构中，首先，获取由分光光谱仪采集的待检测血液样本的分光光谱图；然后，提取所述分光光谱图中各个单色光的曲线图；接着，将所述各个单色光的曲线图分别通过作为过滤器的卷积神经网络模型以得到多个单色光特征向量；然后，将所述多个单色光特征向量进行二维排列为特征矩阵后通过作为特征提取器的第一卷积神经网络以得到局部关联特征图；接着，将所述局部关联特征图通过非局部神经网络以得到全局关联特征图；然后，融合所述局部关联特征图和所述全局关联特征图以得到分类特征向量；以及，最后，将所述分类特征图通过分类器以得到分类结果，所述分类结果用于表示待检测血液样本是否含有CTC细胞。在一个具体示例中，在上述基于分光光谱的肿瘤细胞检测方法中，所述将所述各个单色光的曲线图分别通过作为过滤器的卷积神经网络模型以得到多个单色光特征向量，进一步包括：使用所述作为过滤器的卷积神经网络模型的各层在层的正向传递中分别对输入数据进行：对所述输入数据进行卷积处理以得到卷积特征图；对所述卷积特征图进行基于特征矩阵的均值池化处理以得到池化特征图；以及，对所述池化特征图进行非线性激活以得到激活特征图；其中，所述作为过滤器的卷积神经网络模型的最后一层的输出为所述多个单色光特征向量，所述作为过滤器的卷积神经网络模型的第一层的输入为所述各个单色光的曲线图。在一个具体示例中，在上述基于分光光谱的肿瘤细胞检测方法中，所述将所述多个单色光特征向量进行二维排列为特征矩阵后通过作为特征提取器的第一卷积神经网络以得到局部关联特征图，进一步包括：使用所述作为特征提取器的第一卷积神经网络的各层在层的正向传递中对输入数据分别进行卷积处理、均值池化处理和非线性激活处理以由所述作为特征提取器的第一卷积神经网络的最后一层的输出为所述局部关联特征图，其中，所述作为特征提取器的第一卷积神经网络的第一层的输入为所述特征矩阵。在一个具体示例中，在上述基于分光光谱的肿瘤细胞检测方法中，所述将所述局部关联特征图通过非局部神经网络以得到全局关联特征图，包括：将所述局部关联特征图输入所述非局部神经网络的第一点卷积层、第二点卷积层和第三点卷积层以得到第一特征图、第二特征图和第三特征图；计算所述第一特征图和所述第二特征图的按位置加权和以得到中间融合特征图；将所述中间融合特征图输入Softmax函数以对所述中间融合特征图中各个位置的特征值进行归一化以得到归一化中间融合特征图；计算所述归一化中间融合特征图和所述第三特征图的按位置加权和以得到再融合特征图；将所述再融合特征图通过嵌入高斯相似性函数以计算所述再融合特征图中各个位置的特征值间的相似性以得到全局相似特征图；将所述全局相似特征图通过所述非局部神经网络的第四点卷积层以调整所述全局相似特征图的通道数以得到通道调整全局相似特征图；以及，计算所述通道调整全局相似特征图和所述局部关联特征图的按位置加权和以得到所述全局关联特征图。在一个具体示例中，在上述基于分光光谱的肿瘤细胞检测方法中，所述融合所述局部关联特征图和所述全局关联特征图以得到分类特征向量，包括：将所述局部关联特征图和所述全局关联特征图进行级联以得到融合特征图；将所述局部关联特征图和所述全局关联特征图展开为局部关联特征向量和全局关联特征向量；对所述局部关联特征向量和所述全局关联特征向量进行类节点的拓扑-类中心优化以得到优化特征矩阵；以及，将所述融合特征图展开为融合特征向量后，将所述优化特征矩阵与所述融合特征向量进行矩阵相乘以得到所述分类特征向量。在一个具体示例中，在上述基于分光光谱的肿瘤细胞检测方法中，所述将所述局部关联特征图和所述全局关联特征图展开为局部关联特征向量和全局关联特征向量，包括：将所述局部关联特征图和所述全局关联特征图按沿着行向量进行展开为所述局部关联特征向量和所述全局关联特征向量。在一个具体示例中，在上述基于分光光谱的肿瘤细胞检测方法中，所述对所述局部关联特征向量和所述全局关联特征向量进行类节点的拓扑-类中心优化以得到优化特征矩阵，进一步包括：以如下公式对所述局部关联特征向量和所述全局关联特征向量进行类节点的拓扑-类中心优化以得到优化特征矩阵；其中，所述公式为：其中，表示所述局部关联特征向量，表示所述全局关联特征向量，表示所述全局关联特征向量的转置向量，和分别表示矩阵或向量的Kronecker积和Hadamard积，为所述局部关联特征向量和所述全局关联特征向量之间的距离矩阵，且和均为列向量，表示矩阵的指数运算，所述矩阵的指数运算表示计算以所述数值为幂的自然指数函数值。在一个具体示例中，在上述基于分光光谱的肿瘤细胞检测方法中，所述将所述分类特征图通过分类器以得到分类结果，所述分类结果用于表示待检测血液样本是否含有CTC细胞，包括：将所述分类特征图按照行向量或列向量展开为分类特征向量；使用所述分类器的多个全连接层对所述分类特征向量进行全连接编码以得到编码分类特征向量；以及，将所述编码分类特征向量通过所述分类器的Softmax分类函数以得到所述分类结果。本领域技术人员可以理解，上述基于分光光谱的肿瘤细胞检测方法中的各个步骤的具体操作已经在上面参考图1到图5的基于分光光谱的肿瘤细胞检测设备的描述中得到了详细介绍，并因此，将省略其重复描述。以上结合具体实施例描述了本申请的基本原理，但是，需要指出的是，在本申请中提及的优点、优势、效果等仅是示例而非限制，不能认为这些优点、优势、效果等是本申请的各个实施例必须具备的。另外，上述公开的具体细节仅是为了示例的作用和便于理解的作用，而非限制，上述细节并不限制本申请为必须采用上述具体的细节来实现。本申请中涉及的器件、装置、设备、系统的方框图仅作为例示性的例子并且不意图要求或暗示必须按照方框图示出的方式进行连接、布置、配置。如本领域技术人员将认识到的，可以按任意方式连接、布置、配置这些器件、装置、设备、系统。诸如“包括”、“包含”、“具有”等等的词语是开放性词汇，指“包括但不限于”，且可与其互换使用。这里所使用的词汇“或”和“和”指词汇“和/或”，且可与其互换使用，除非上下文明确指示不是如此。这里所使用的词汇“诸如”指词组“诸如但不限于”，且可与其互换使用。还需要指出的是，在本申请的装置、设备和方法中，各部件或各步骤是可以分解和/或重新组合的。这些分解和/或重新组合应视为本申请的等效方案。提供所公开的方面的以上描述以使本领域的任何技术人员能够做出或者使用本申请。对这些方面的各种修改对于本领域技术人员而言是非常显而易见的，并且在此定义的一般原理可以应用于其他方面而不脱离本申请的范围。因此，本申请不意图被限制到在此示出的方面，而是按照与在此公开的原理和新颖的特征一致的最宽范围。为了例示和描述的目的已经给出了以上描述。此外，此描述不意图将本申请的实施例限制到在此公开的形式。尽管以上已经讨论了多个示例方面和实施例，但是本领域技术人员将认识到其某些变型、修改、改变、添加和子组合。
