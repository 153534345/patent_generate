标题title
基于神经网络的山地林草生命共同体损毁程度检测方法
摘要abst
本发明涉及图像处理技术领域，具体涉及基于神经网络的山地林草生命共同体损毁程度检测方法。该方法包括：基于山地生态区域的灰度图像构建初始灰度直方图，将灰度图像中的像素点划分为波谷像素点和波峰像素点；基于各波谷像素点对应的窗口内像素点的灰度值，确定各波谷像素点的细节信息丢失程度，基于各波峰像素点的预设邻域内波峰像素点的灰度值的种类数，确定各波峰像素点的灰度过增强程度，进而得到各像素点直方图均衡化后的影响程度；基于影响程度和初始灰度直方图中各灰度级上像素点的数量得到目标灰度直方图，对目标灰度直方图均衡化处理获得增强后的遥感图像，进而确定损毁程度。本发明提高了山地生态区域损毁程度的检测精度。
权利要求书clms
1.一种基于神经网络的山地林草生命共同体损毁程度检测方法，其特征在于，该方法包括以下步骤：获取待检测山地生态区域的灰度图像；基于所述灰度图像中各像素点的灰度值和各像素点的预设邻域内像素点的灰度值，获得各像素点对应的灰度特征指标；根据所述灰度图像构建初始灰度直方图，基于初始灰度直方图中各灰度级上像素点的数量，将所述灰度图像中的像素点划分为波谷像素点和波峰像素点；以各波谷像素点为窗口中心点，构建各波谷像素点对应的窗口，基于各波谷像素点对应的窗口内像素点的灰度值，确定各波谷像素点的细节信息丢失程度；基于各波峰像素点的预设邻域内波峰像素点的灰度值的种类数和初始灰度直方图，确定各波峰像素点的灰度过增强程度；基于各像素点的细节信息丢失程度或灰度过增强程度以及灰度特征指标，得到所述灰度图像中各像素点直方图均衡化后的影响程度；基于所述影响程度和初始灰度直方图中各灰度级上像素点的数量，得到目标灰度直方图；对目标灰度直方图进行直方图均衡化处理获得增强后的遥感图像；基于训练好的神经网络判断增强后的遥感图像中是否存在植被覆盖区域，若存在，则获取增强后的遥感图像中的植被覆盖区域，根据所述植被覆盖区域中的像素点，确定待检测山地生态区域的损毁程度。2.根据权利要求1所述的基于神经网络的山地林草生命共同体损毁程度检测方法，其特征在于，所述基于所述灰度图像中各像素点的灰度值和各像素点的预设邻域内像素点的灰度值，获得各像素点对应的灰度特征指标，包括：对于所述灰度图像中的任一像素点：计算该像素点与其预设邻域像素点的灰度差值的绝对值的均值，作为该像素点对应的灰度特征指标。3.根据权利要求1所述的基于神经网络的山地林草生命共同体损毁程度检测方法，其特征在于，所述基于初始灰度直方图中各灰度级上像素点的数量，将所述灰度图像中的像素点划分为波谷像素点和波峰像素点，包括：基于初始灰度直方图中各灰度级上像素点的数量，构建灰度级集合；计算所述灰度级集合中所有数据的均值，作为数量阈值；将所述灰度级集合中大于等于数量阈值的数据所对应的像素点作为波峰像素点，将所述灰度级集合中小于数量阈值的数据所对应的像素点作为波谷像素点。4.根据权利要求1所述的基于神经网络的山地林草生命共同体损毁程度检测方法，其特征在于，所述基于各波谷像素点对应的窗口内像素点的灰度值，确定各波谷像素点的细节信息丢失程度，包括：对于任一波谷像素点：若该波谷像素点对应的窗口内像素点的灰度值的种类数为1，则令该波谷像素点的细节信息丢失程度为0；若该波谷像素点对应的窗口内像素点的灰度值的种类数不为1，则根据该波谷像素点对应的窗口内所有像素点的灰度值，按照灰度值由小至大的顺序，构建该波谷像素点对应的灰度值序列；获取该波谷像素点对应的灰度值序列中与该波谷像素点的灰度值距离最近的灰度值，并记为该波谷像素点对应的特征灰度值；当该波谷像素点对应的特征灰度值的个数为1时，将该波谷像素点对应的特征灰度值作为该波谷像素点对应的目标灰度值；当该波谷像素点对应的特征灰度值的个数为2时，将该波谷像素点对应的特征灰度值中较大的特征灰度值作为该波谷像素点对应的目标灰度值；令初始灰度直方图上相邻两个灰度级之间的距离值为1，获取该波谷像素点的灰度值与该波谷像素点对应的目标灰度值之间的距离值；根据该波谷像素点的灰度值与其对应的目标灰度值之间的距离值、该波谷像素点的预设邻域内像素点的灰度值与该波谷像素点的灰度值不同的像素点的个数、该波谷像素点的灰度值变换为目标灰度值后其预设邻域内与该波谷像素点的目标灰度值不同的像素点的个数，确定该波谷像素点的细节信息丢失程度。5.根据权利要求4所述的基于神经网络的山地林草生命共同体损毁程度检测方法，其特征在于，确定该波谷像素点的细节信息丢失程度，包括：将该波谷像素点的预设邻域内像素点的灰度值与该波谷像素点的灰度值不同的像素点的个数记为第一特征数量，将该波谷像素点的灰度值变换为目标灰度值后其预设邻域内与该波谷像素点的目标灰度值不同的像素点的个数记为第二特征数量；将所述第一特征数量减去所述第二特征数量得到的差值记为细节信息量减少程度；计算该波谷像素点的灰度值与其对应的目标灰度值之间的距离值和所述细节信息量减少程度的比值，记为第一比值；以自然常数为底数，以负的所述第一比值为指数的指数函数的值作为该波谷像素点的细节信息丢失程度。6.根据权利要求1所述的基于神经网络的山地林草生命共同体损毁程度检测方法，其特征在于，所述基于各波峰像素点的预设邻域内波峰像素点的灰度值的种类数和初始灰度直方图，确定各波峰像素点的灰度过增强程度，包括：对于任一波峰像素点：以该波峰像素点为窗口中心点，构建该波峰像素点对应的窗口；统计该波峰像素点对应的窗口内所有波峰像素点的灰度值在初始灰度直方图上像素点的数量之和，并记为第一数量指标；计算该波峰像素点的预设邻域内波峰像素点的灰度值的种类数与初始灰度直方图中像素点数量最多的灰度级上像素点的数量的乘积，并记为第一乘积，将所述第一数量指标与所述第一乘积的比值作为该波峰像素点的灰度过增强程度。7.根据权利要求1所述的基于神经网络的山地林草生命共同体损毁程度检测方法，其特征在于，所述基于各像素点的细节信息丢失程度或灰度过增强程度以及灰度特征指标，得到所述灰度图像中各像素点直方图均衡化后的影响程度，包括：对于任一波谷像素点：计算该波谷像素点的细节信息丢失程度和该波谷像素点对应的灰度特征指标的乘积，作为该波谷像素点直方图均衡化后的影响程度；对于任一波峰像素点：计算该波峰像素点的灰度过增强程度和该波峰像素点对应的灰度特征指标的乘积，作为该波峰像素点直方图均衡化后的影响程度。8.根据权利要求3所述的基于神经网络的山地林草生命共同体损毁程度检测方法，其特征在于，基于所述影响程度和初始灰度直方图中各灰度级上像素点的数量，得到目标灰度直方图，包括：根据初始灰度直方图中各灰度级上像素点的数量、初始灰度直方图中各灰度级上所有像素点直方图均衡化后的影响程度的均值、灰度级集合中所有数据的均值，采用如下公式计算目标灰度直方图中第个灰度级上像素点的数量：，其中，为目标灰度直方图中第个灰度级上像素点的数量，为初始灰度直方图中第个灰度级上像素点的数量，为灰度级集合中所有数据的均值，为初始灰度直方图中第个灰度级上所有像素点直方图均衡化后的影响程度的均值，为向下取整，为取绝对值，为自然常数；根据目标灰度直方图中各灰度级上像素点的数量，得到目标灰度直方图。9.根据权利要求1所述的基于神经网络的山地林草生命共同体损毁程度检测方法，其特征在于，所述获取增强后的遥感图像中的植被覆盖区域，包括：将增强后的遥感图像输入到训练好的神经网络中，获得增强后的遥感图像对应的二值图像；基于所述二值图像获取增强后的遥感图像中的植被覆盖区域。10.根据权利要求9所述的基于神经网络的山地林草生命共同体损毁程度检测方法，其特征在于，根据所述植被覆盖区域中的像素点，确定待检测山地生态区域的损毁程度，包括：将相邻两年中后一年的待检测山地生态区域的遥感图像对应的二值图像减去前一年的待检测山地生态区域的遥感图像对应的二值图像，获得差值图像，所述二值图像中植被覆盖区域的像素点标记为1，其余区域的像素点标记为0；将所述差值图像中标记值为-1的像素点作为目标像素点，目标像素点构成的连通域为山地林草损毁区域；获取山地林草损毁区域的面积占比，基于所述面积占比得到待检测山地生态区域的损毁程度，所述面积占比与所述待检测山地生态区域的损毁程度呈正相关。
说明书desc
技术领域本发明涉及图像处理技术领域，具体涉及基于神经网络的山地林草生命共同体损毁程度检测方法。背景技术山地是我国国土的重要组成部分，山地质量制约林草的生存繁衍，林草的发育保持了山地水土，山地林草资源是一对生命共同体。但是矿产开发、开荒耕种、引水蓄水、城镇建设等工程建设等，对山地林草自然资源产生了严重破坏，造成景观破碎化、生物多样性降低、植被覆盖度下降、土地退化、山体破损、地貌水体景观损毁等。因此林草资源保护的重要问题迫切需要查清和治理，利用卫星遥感技术可以获取山地生态损毁区域的大量信息，进而分析山地林草生命共同体的损毁程度。然而在遥感图像的采集过程中，不可避免地会受到各种环境因素的影响，如大气退化效应等，导致图像局部对比度降低，影响后续的检测精度。常用的直方图均衡化算法基于图像中各灰度级上像素点的数量对灰度值进行变换，灰度直方图内像素点数量较多的波峰区域灰度值会产生较大的跳变，易造成图像过增强，而灰度直方图内像素点数量较少的波谷区域灰度值会产生归并，易造成图像细节缺失，进而使得山地生态区域的损毁程度的检测精度较低。发明内容为了解决现有方法对山地生态区域的损毁程度进行检测时存在的检测精度较低的问题，本发明的目的在于提供一种基于神经网络的山地林草生命共同体损毁程度检测方法，所采用的技术方案具体如下：本发明提供了基于神经网络的山地林草生命共同体损毁程度检测方法，该方法包括以下步骤：获取待检测山地生态区域的灰度图像；基于所述灰度图像中各像素点的灰度值和各像素点的预设邻域内像素点的灰度值，获得各像素点对应的灰度特征指标；根据所述灰度图像构建初始灰度直方图，基于初始灰度直方图中各灰度级上像素点的数量，将所述灰度图像中的像素点划分为波谷像素点和波峰像素点；以各波谷像素点为窗口中心点，构建各波谷像素点对应的窗口，基于各波谷像素点对应的窗口内像素点的灰度值，确定各波谷像素点的细节信息丢失程度；基于各波峰像素点的预设邻域内波峰像素点的灰度值的种类数和初始灰度直方图，确定各波峰像素点的灰度过增强程度；基于各像素点的细节信息丢失程度或灰度过增强程度以及灰度特征指标，得到所述灰度图像中各像素点直方图均衡化后的影响程度；基于所述影响程度和初始灰度直方图中各灰度级上像素点的数量，得到目标灰度直方图；对目标灰度直方图进行直方图均衡化处理获得增强后的遥感图像；基于训练好的神经网络判断增强后的遥感图像中是否存在植被覆盖区域，若存在，则获取增强后的遥感图像中的植被覆盖区域，根据所述植被覆盖区域中的像素点，确定待检测山地生态区域的损毁程度。优选的，所述基于所述灰度图像中各像素点的灰度值和各像素点的预设邻域内像素点的灰度值，获得各像素点对应的灰度特征指标，包括：对于所述灰度图像中的任一像素点：计算该像素点与其预设邻域像素点的灰度差值的绝对值的均值，作为该像素点对应的灰度特征指标。优选的，所述基于初始灰度直方图中各灰度级上像素点的数量，将所述灰度图像中的像素点划分为波谷像素点和波峰像素点，包括：基于初始灰度直方图中各灰度级上像素点的数量，构建灰度级集合；计算所述灰度级集合中所有数据的均值，作为数量阈值；将所述灰度级集合中大于等于数量阈值的数据所对应的像素点作为波峰像素点，将所述灰度级集合中小于数量阈值的数据所对应的像素点作为波谷像素点。优选的，所述基于各波谷像素点对应的窗口内像素点的灰度值，确定各波谷像素点的细节信息丢失程度，包括：对于任一波谷像素点：若该波谷像素点对应的窗口内像素点的灰度值的种类数为1，则令该波谷像素点的细节信息丢失程度为0；若该波谷像素点对应的窗口内像素点的灰度值的种类数不为1，则根据该波谷像素点对应的窗口内所有像素点的灰度值，按照灰度值由小至大的顺序，构建该波谷像素点对应的灰度值序列；获取该波谷像素点对应的灰度值序列中与该波谷像素点的灰度值距离最近的灰度值，并记为该波谷像素点对应的特征灰度值；当该波谷像素点对应的特征灰度值的个数为1时，将该波谷像素点对应的特征灰度值作为该波谷像素点对应的目标灰度值；当该波谷像素点对应的特征灰度值的个数为2时，将该波谷像素点对应的特征灰度值中较大的特征灰度值作为该波谷像素点对应的目标灰度值；令初始灰度直方图上相邻两个灰度级之间的距离值为1，获取该波谷像素点的灰度值与该波谷像素点对应的目标灰度值之间的距离值；根据该波谷像素点的灰度值与其对应的目标灰度值之间的距离值、该波谷像素点的预设邻域内像素点的灰度值与该波谷像素点的灰度值不同的像素点的个数、该波谷像素点的灰度值变换为目标灰度值后其预设邻域内与该波谷像素点的目标灰度值不同的像素点的个数，确定该波谷像素点的细节信息丢失程度。优选的，确定该波谷像素点的细节信息丢失程度，包括：将该波谷像素点的预设邻域内像素点的灰度值与该波谷像素点的灰度值不同的像素点的个数记为第一特征数量，将该波谷像素点的灰度值变换为目标灰度值后其预设邻域内与该波谷像素点的目标灰度值不同的像素点的个数记为第二特征数量；将所述第一特征数量减去所述第二特征数量得到的差值记为细节信息量减少程度；计算该波谷像素点的灰度值与其对应的目标灰度值之间的距离值和所述细节信息量减少程度的比值，记为第一比值；以自然常数为底数，以负的所述第一比值为指数的指数函数的值作为该波谷像素点的细节信息丢失程度。优选的，所述基于各波峰像素点的预设邻域内波峰像素点的灰度值的种类数和初始灰度直方图，确定各波峰像素点的灰度过增强程度，包括：对于任一波峰像素点：以该波峰像素点为窗口中心点，构建该波峰像素点对应的窗口；统计该波峰像素点对应的窗口内所有波峰像素点的灰度值在初始灰度直方图上像素点的数量之和，并记为第一数量指标；计算该波峰像素点的预设邻域内波峰像素点的灰度值的种类数与初始灰度直方图中像素点数量最多的灰度级上像素点的数量的乘积，并记为第一乘积，将所述第一数量指标与所述第一乘积的比值作为该波峰像素点的灰度过增强程度。优选的，所述基于各像素点的细节信息丢失程度或灰度过增强程度以及灰度特征指标，得到所述灰度图像中各像素点直方图均衡化后的影响程度，包括：对于任一波谷像素点：计算该波谷像素点的细节信息丢失程度和该波谷像素点对应的灰度特征指标的乘积，作为该波谷像素点直方图均衡化后的影响程度；对于任一波峰像素点：计算该波峰像素点的灰度过增强程度和该波峰像素点对应的灰度特征指标的乘积，作为该波峰像素点直方图均衡化后的影响程度。优选的，基于所述影响程度和初始灰度直方图中各灰度级上像素点的数量，得到目标灰度直方图，包括：根据初始灰度直方图中各灰度级上像素点的数量、初始灰度直方图中各灰度级上所有像素点直方图均衡化后的影响程度的均值、灰度级集合中所有数据的均值，采用如下公式计算目标灰度直方图中第个灰度级上像素点的数量：，其中，为目标灰度直方图中第个灰度级上像素点的数量，为初始灰度直方图中第个灰度级上像素点的数量，为灰度级集合中所有数据的均值，为初始灰度直方图中第个灰度级上所有像素点直方图均衡化后的影响程度的均值，为向下取整，为取绝对值，为自然常数；根据目标灰度直方图中各灰度级上像素点的数量，得到目标灰度直方图。优选的，所述获取增强后的遥感图像中的植被覆盖区域，包括：将增强后的遥感图像输入到训练好的神经网络中，获得增强后的遥感图像对应的二值图像；基于所述二值图像获取增强后的遥感图像中的植被覆盖区域。优选的，根据所述植被覆盖区域中的像素点，确定待检测山地生态区域的损毁程度，包括：将相邻两年中后一年的待检测山地生态区域的遥感图像对应的二值图像减去前一年的待检测山地生态区域的遥感图像对应的二值图像，获得差值图像，所述二值图像中植被覆盖区域的像素点标记为1，其余区域的像素点标记为0；将所述差值图像中标记值为-1的像素点作为目标像素点，目标像素点构成的连通域为山地林草损毁区域；获取山地林草损毁区域的面积占比，基于所述面积占比得到待检测山地生态区域的损毁程度，所述面积占比与所述待检测山地生态区域的损毁程度呈正相关。本发明至少具有如下有益效果：1、本发明获取了待检测山地生态区域的灰度图像，考虑到图像在采集的过程中易受到外界环境的影响，导致图像局部对比度降低，影响山地生态区域损毁程度的检测精度，因此将采用直方图均衡化算法对采集的图像进行增强，提高图像的对比度，本发明获取了待检测山地生态区域的灰度图像对应的灰度直方图，也即初始灰度直方图，考虑到传统的直方图均衡化算法基于图像中各灰度级上像素点的数量对灰度值进行变换，灰度直方图内像素点数量较多的波峰区域灰度值会产生较大的跳变，易造成图像过增强，而灰度直方图内像素点数量较少的波谷区域灰度值会产生归并，易造成图像细节缺失，进而使得山地生态区域的损毁程度的检测精度较低；本发明通过将初始灰度直方图变换为均匀分布的灰度直方图，提高直方图均衡化增强的效果，又考虑到直接利用各灰度级上像素点的数量与像素点的灰度值均匀分布时灰度级上像素点数量差异对初始灰度直方图进行变换，会导致灰度直方图的形状变化较大，故本发明利用灰度图像中各像素点直方图均衡化后的影响程度，即结合细节信息丢失程度和灰度过增强程度对初始灰度直方图变换进行校正，获得目标灰度直方图，进而使得最终的直方图均衡化结果能够较好的保持原始图像的直方图特性，即原始图像的明暗立体效果，在提高图像对比度的同时减少灰度级的丢失量，避免灰度级过增强，提高了图像的增强效果，能够有效地提高待检测山地生态区域损毁程度的检测精度。2、本发明在获取待检测山地生态区域的灰度图像中各像素点直方图均衡化后的影响程度时，基于像素点的特征将待检测山地生态区域的灰度图像中的像素点分为了两类，分别为波峰像素点和波谷像素点，波峰像素点的灰度级处于初始灰度直方图波峰区域，波谷像素点的灰度级处于初始灰度直方图波谷区域，由于在进行直方图均衡化处理时，灰度直方图内像素点数量较多的波峰区域灰度值会产生较大的跳变，易造成图像过增强，而灰度直方图内像素点数量较少的波谷区域灰度值会产生归并，易造成图像细节缺失，本发明分别计算了波谷像素点的细节信息丢失程度以及波峰像素点的灰度过增强程度，进而基于波谷像素点的细节信息丢失程度以及波峰像素点的灰度过增强程度获得了待检测山地生态区域的灰度图像中各像素点直方图均衡化后的影响程度，结合待检测山地生态区域的灰度图像中每个像素点的特征全面地对每个像素点进行了分析，能够使后续获取的目标灰度直方图分布的更为均匀，进而保证待检测山地生态区域的灰度图像的增强效果。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明提供的一种基于神经网络的山地林草生命共同体损毁程度检测方法的流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种基于神经网络的山地林草生命共同体损毁程度检测方法进行详细说明如下。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种基于神经网络的山地林草生命共同体损毁程度检测方法的具体方案。一种基于神经网络的山地林草生命共同体损毁程度检测方法实施例：本实施例提出了一种基于神经网络的山地林草生命共同体损毁程度检测方法，如图1所示，本实施例的一种基于神经网络的山地林草生命共同体损毁程度检测方法包括以下步骤：步骤S1，获取待检测山地生态区域的灰度图像。本实施例所针对的具体场景为：山地生态区域的遥感图像在采集过程中，不可避免的受到各种环境因素的影响，如大气退化效应等，会导致图像局部对比度降低，影响后续山地林草生命共同体损毁程度计算的可信度，本实施例对采集到的图像的灰度直方图进行变换，对变换后的灰度直方图进行直方图均衡化处理，获取增强后的高质量遥感图像，进而根据高质量遥感图像利用DNN神经网络获取精准的山地林草生命共同体损毁程度。本实施例首先获取待检测山地生态区域的灰度图像，然后对灰度图像内各像素点的邻域像素灰度特征进行统计，获取各像素点的灰度特征指标，再根据灰度直方图的形状特征对像素点进行分类，计算灰度直方图波峰区域像素点的过增强程度和波谷区域像素点的细节信息丢失程度，由此获取图像内各像素点直接进行直方图均衡化后的影响程度，进而结合图像灰度直方图的形状特征完成灰度直方图的变换，对变换后的灰度直方图进行直方图均衡化处理，获取增强后的高质量遥感图像，最后借助DNN神经网络获得待检测山地生态区域的损毁程度。首先利用卫星上的遥感仪器采集待检测山地生态区域的遥感图像，然后对待检测山地生态区域的遥感图像进行灰度化处理，将灰度化处理后的图像记为待检测山地生态区域的灰度图像，用于后续损毁程度的检测。图像的灰度化处理为现有技术，此处不再过多赘述。需要说明的是，本实施例在最后一步分析时，对相邻两年的遥感图像进行分析，本实施例中的图像均为每年中同一时期同一区域的图像，对于其它区域的图像均可采用本实施例提供的方法进行处理。步骤S2，基于所述灰度图像中各像素点的灰度值和各像素点的预设邻域内像素点的灰度值，获得各像素点对应的灰度特征指标；根据所述灰度图像构建初始灰度直方图，基于初始灰度直方图中各灰度级上像素点的数量，将所述灰度图像中的像素点划分为波谷像素点和波峰像素点；以各波谷像素点为窗口中心点，构建各波谷像素点对应的窗口，基于各波谷像素点对应的窗口内像素点的灰度值，确定各波谷像素点的细节信息丢失程度；基于各波峰像素点的预设邻域内波峰像素点的灰度值的种类数和初始灰度直方图，确定各波峰像素点的灰度过增强程度。统计待检测山地生态区域的灰度图像中像素点的灰度值，基于待检测山地生态区域的灰度图像中所有像素点的灰度值，构建对应的灰度直方图，记为初始灰度直方图。灰度直方图的构建过程为现有技术，此处不再过多赘述。当待检测山地生态区域的灰度图像对应的灰度直方图上存在非常陡峭的尖峰时，该区域的灰度级均衡化后灰度级会出现非常大的跳变，导致图像过增强，而对于波谷区域灰度级会产生归并，易造成图像细节缺失。因此本实施例根据初始灰度直方图的特征和待检测山地生态区域的灰度图像内各像素点的邻域像素灰度特征对初始灰度直方图进行变换，对变换后的灰度直方图进行直方图均衡化处理，用以保护图像细节和防止图像过增强。考虑到待检测山地生态区域的灰度图像内各像素点的清晰程度与其邻域内像素点的灰度差异相关，当某一像素点与其邻域内像素点的灰度差异越大时，说明该像素点的清晰程度越高。基于此，对于待检测山地生态区域的灰度图像中的任一像素点，计算该像素点与其预设邻域像素点的灰度差值的绝对值的均值，将该均值作为该像素点对应的灰度特征指标；本实施例中的预设邻域为八邻域，在具体应用中，实施者可根据具体情况进行设置；采用上述方法，在待检测山地生态区域的灰度图像中逐像素点遍历，获得待检测山地生态区域的灰度图像中各像素点对应的灰度特征指标，灰度特征指标的值越大，说明像素点越重要；基于待检测山地生态区域的灰度图像中各像素点对应的灰度特征指标，构建灰度特征指标集合，其中，为灰度特征指标集合，为待检测山地生态区域的灰度图像中像素点的数量，为待检测山地生态区域的灰度图像中第1个像素点对应的灰度特征指标，为待检测山地生态区域的灰度图像中第2个像素点对应的灰度特征指标，为待检测山地生态区域的灰度图像中第个像素点对应的灰度特征指标。统计初始灰度直方图中各灰度级上像素点的数量，基于初始灰度直方图中各灰度级上像素点的数量，构建灰度级集合，其中，为灰度级集合，为初始灰度直方图中灰度级的数量，为初始灰度直方图中第1个灰度级上像素点的数量，为初始灰度直方图中第2个灰度级上像素点的数量，为初始灰度直方图中第个灰度级上像素点的数量。基于灰度级集合中所有数据计算灰度级集合中数据的均值，将作为数量阈值，灰度级集合中大于等于数量阈值的数据所对应的像素灰度级处于初始灰度直方图波峰区域，将此类像素点作为波峰像素点，而灰度级集合中小于数量阈值的数据所对应的像素灰度级处于初始灰度直方图波谷区域，将此类像素点作为波谷像素点。对于任一波谷像素点：首先以该波谷像素点为窗口中心点，构建尺寸为的窗口，作为该波谷像素点对应的窗口，本实施例中的值为3，在具体应用中，实施者可根据具体情况进行设置；获取该波谷像素点对应的窗口内所有像素点的灰度值，然后按照灰度值由小至大的顺序，根据该波谷像素点对应的窗口内所有像素点的灰度值，构建该波谷像素点对应的灰度值序列，其中，为该波谷像素点对应的灰度值序列，为该波谷像素点对应的窗口内像素点灰度值的种类数，为该波谷像素点对应的窗口内像素点的第1种灰度值，为该波谷像素点对应的窗口内像素点的第2种灰度值，为该波谷像素点对应的窗口内像素点的第种灰度值。若的值为1，则说明该波谷像素点与其邻域内像素点的灰度值相同，直方图均衡化灰度级的归并不影响该波谷像素点的邻域内像素点的细节信息，因此本实施例令该波谷像素点的细节信息丢失程度为0；若的值不为1，根据直方图均衡化算法对灰度级进行归并的方式，令初始灰度直方图上相邻两个灰度级之间的距离值为1，获取该波谷像素点对应的灰度值序列中与该波谷像素点的灰度值距离最近的灰度值，并记为该波谷像素点对应的特征灰度值，当该波谷像素点对应的灰度值序列中与该波谷像素点的灰度值距离最近的灰度值有两个时，也即该波谷像素点对应的特征灰度值有两个时，根据直方图均衡化算法中灰度级由小至大依次分析的原则，获取初始灰度直方图中该波谷像素点的灰度值右侧该波谷像素点对应的特征灰度值，作为该波谷像素点对应的目标灰度值，也即将较大的特征灰度值作为了目标灰度值，同时获取该波谷像素点的灰度值与该波谷像素点对应的目标灰度值之间的距离值。直方图均衡化算法中会使得部分相邻灰度级归并，因此本实施例将该波谷像素点灰度值归并至最近的灰度值中，该波谷像素点的灰度值与其对应的目标灰度值之间的距离值越小，说明归并成功的概率越大。当该波谷像素点的灰度值与其预设邻域内灰度值不同的像素点的数量越多时，说明该波谷像素点的邻域内细节信息量越多，因此计算灰度值归并前后该波谷像素点的邻域内细节信息量减少程度，细节信息量减少程度越大，说明该波谷像素点的细节信息丢失的越多，该波谷像素点细节信息的丢失程度越大。基于此，本实施例根据该波谷像素点的灰度值与其对应的目标灰度值之间的距离值、该波谷像素点的预设邻域内像素点的灰度值与该波谷像素点的灰度值不同的像素点的个数、该波谷像素点的灰度值变换为目标灰度值后其预设邻域内与该波谷像素点的目标灰度值不同的像素点的个数，确定该波谷像素点的细节信息丢失程度；具体的，将该波谷像素点的预设邻域内像素点的灰度值与该波谷像素点的灰度值不同的像素点的个数记为第一特征数量，将该波谷像素点的灰度值变换为目标灰度值后其预设邻域内与该波谷像素点的目标灰度值不同的像素点的个数记为第二特征数量，将第一特征数量减去第二特征数量得到的差值记为细节信息量减少程度，计算该波谷像素点的灰度值与其对应的目标灰度值之间的距离值和细节信息量减少程度的比值，记为第一比值，以自然常数为底数，以负的第一比值为指数的指数函数的值作为该波谷像素点的细节信息丢失程度；该波谷像素点的细节信息丢失程度的具体表达式为：，其中，为该波谷像素点的细节信息丢失程度，为该波谷像素点的灰度值与其对应的目标灰度值之间的距离值，为该波谷像素点的预设邻域内像素点的灰度值与该波谷像素点的灰度值不同的像素点的个数，为将该波谷像素点的灰度值变换为目标灰度值后其预设邻域内与该波谷像素点的目标灰度值不同的像素点的个数，为自然常数。用于表征灰度值归并前后该波谷像素点的邻域内细节信息量减少程度，细节信息量减少程度越大，说明该波谷像素点的细节信息丢失的越多，该波谷像素点细节信息的丢失程度越大。该波谷像素点的灰度值与其对应的目标灰度值之间的距离值越小，说明归并成功的概率越大，该波谷像素点的细节信息丢失的可能性越大。采用上述方法，能够获得待检测山地生态区域的灰度图像中每个波谷像素点的细节信息丢失程度。对于任一波峰像素点：首先以该波峰像素点为窗口中心点，构建尺寸为的窗口，作为该波峰像素点对应的窗口；然后统计该波峰像素点对应的窗口内所有波峰像素点的灰度值在初始灰度直方图上像素点的数量之和，并记为第一数量指标，由直方图均衡化的原理可知当灰度级上的像素点数量越多时，说明对应灰度级的过增强程度越大，因此第一数量指标的值越大，说明该波峰像素点的灰度过增强程度越大；计算该波峰像素点的预设邻域内波峰像素点的灰度值的种类数与初始灰度直方图中像素点数量最多的灰度级上像素点的数量的乘积，并记为第一乘积，将第一数量指标与第一乘积的比值作为该波峰像素点的灰度过增强程度；该波峰像素点的灰度过增强程度的具体表达式为：，其中，为该波峰像素点的灰度过增强程度，为该波峰像素点对应的窗口内所有波峰像素点的灰度值在灰度直方图上像素点的数量之和，为初始灰度直方图中像素点数量最多的灰度级上像素点的数量，为该波峰像素点的预设邻域内波峰像素点的灰度值的种类数，表征第一数量指标，表征第一乘积。本实施例以作为分母，对该波峰像素点对应的窗口内所有波峰像素点的灰度值在灰度直方图上像素点的数量之和进行归一化处理；当该波峰像素点对应的窗口内所有波峰像素点的灰度值在初始灰度直方图上像素点的数量越多、该波峰像素点的预设邻域内波峰像素点的灰度值的种类越少时，该波峰像素点的灰度过增强程度越大；当该波峰像素点对应的窗口内所有波峰像素点的灰度值在灰度直方图上像素点的数量越少、该波峰像素点的预设邻域内波峰像素点的灰度值的种类越多时，该波峰像素点的灰度过增强程度越小。采用上述方法，能够获得待检测山地生态区域的灰度图像中每个波峰像素点的灰度过增强程度。步骤S3，基于各像素点的细节信息丢失程度或灰度过增强程度以及灰度特征指标，得到所述灰度图像中各像素点直方图均衡化后的影响程度；基于所述影响程度和初始灰度直方图中各灰度级上像素点的数量，得到目标灰度直方图；对目标灰度直方图进行直方图均衡化处理获得增强后的遥感图像。本实施例在上述步骤中获得了待检测山地生态区域的灰度图像中每个波谷像素点的细节信息丢失程度和每个波峰像素点的灰度过增强程度，也即待检测山地生态区域的灰度图像中每个像素点都有其对应的细节信息丢失程度或灰度过增强程度，接下来将计算待检测山地生态区域的灰度图像中各像素点直方图均衡化后的影响程度，考虑到细节信息丢失程度或灰度过增强程度越大，直接进行直方图均衡化后受到的影响越大，细节信息丢失程度和灰度过增强程度均与直方图均衡化后的影响程度呈正相关的关系，且当某一像素点对应的灰度特征指标越大时，说明该像素点越重要，直方图均衡化后该像素点受到的影响程度越大；基于此，对于任一波谷像素点，计算该波谷像素点的细节信息丢失程度和该波谷像素点对应的灰度特征指标的乘积，并作为该波谷像素点直方图均衡化后的影响程度；对于任一波峰像素点，计算该波峰像素点的灰度过增强程度和该波峰像素点对应的灰度特征指标的乘积，并作为该波峰像素点直方图均衡化后的影响程度；直方图均衡化后的影响程度的具体表达式为：，，其中，为待检测山地生态区域的灰度图像中第个波谷像素点直方图均衡化后的影响程度，为待检测山地生态区域的灰度图像中第个波峰像素点直方图均衡化后的影响程度，为待检测山地生态区域的灰度图像中第个波谷像素点对应的灰度特征指标，为待检测山地生态区域的灰度图像中第个波峰像素点对应的灰度特征指标，为待检测山地生态区域的灰度图像中第个波谷像素点的细节信息丢失程度，为待检测山地生态区域的灰度图像中第个波峰像素点的灰度过增强程度，为待检测山地生态区域的灰度图像中波谷像素点的数量，为待检测山地生态区域的灰度图像中波峰像素点的数量。本实施例以细节信息丢失程度或灰度过增强程度为权重对灰度特征指标进行加权，获取像素点直接进行直方图均衡化后的影响程度；当波谷像素点的细节信息丢失程度越大且对应的灰度特征指标越大时，说明其直接进行直方图均衡化的效果越差，直方图均衡化后的影响程度越大；当波峰像素点的灰度过增强程度越大且对应的灰度特征指标越大时，说明其直接进行直方图均衡化的效果越差，直方图均衡化后的影响程度越大。本实施例根据待检测山地生态区域的灰度图像中每个波谷像素点对应的灰度特征指标和细节信息丢失程度，获得每个波谷像素点直方图均衡化后的影响程度，根据待检测山地生态区域的灰度图像中每个波峰像素点对应的灰度特征指标和灰度过增强程度，获得每个波峰像素点直方图均衡化后的影响程度，也即获得了待检测山地生态区域的灰度图像中每个像素点直方图均衡化后的影响程度，为后续图像灰度直方图变换提供依据，防止重要的像素点被灰度级归并或者灰度过增强，提高图像的增强效果。根据直方图均衡化算法的原理可知图像对应的灰度直方图越平坦，直方图均衡效果越好，故在对待检测山地生态区域的灰度图像进行直方图均衡化处理之前，本实施例根据待检测山地生态区域的灰度图像中每个像素点直方图均衡化后的影响程度和初始灰度直方图的特征，对初始灰度直方图进行变换处理，使其接近均匀分布的灰度直方图。具体的，基于初始灰度直方图中各灰度级上的像素点直方图均衡化后的影响程度，计算初始灰度直方图中各灰度级上所有像素点直方图均衡化后的影响程度的均值，并构建影响程度均值的集合，其中，为影响程度均值的集合，为初始灰度直方图中灰度级的数量，为初始灰度直方图中第1个灰度级上所有像素点直方图均衡化后的影响程度的均值，为初始灰度直方图中第2个灰度级上所有像素点直方图均衡化后的影响程度的均值，为初始灰度直方图中第个灰度级上所有像素点直方图均衡化后的影响程度的均值。每个灰度级上所有像素点直方图均衡化后的影响程度的均值越大，说明直接进行均衡化的效果越差。若直接利用初始灰度直方图中各灰度级上像素点的数量与灰度级集合中所有数据的均值的差异进行灰度直方图变换，限制对比度自适应直方图均衡化，会导致灰度直方图的形状变化较大，因此本实施例利用各灰度级直接进行直方图均衡化后的影响程度进行校正，对影响程度大的灰度级，令其变换符合均匀分布，用以保护图像细节和防止图像过增强，而对影响程度小的灰度级，令其变换较小，用以保留灰度直方图的基本形状，使得直方图均衡化后能够较好的保持原始图像的直方图特性，即原始图像的明暗立体效果，在提高图像对比度的同时减少灰度级的丢失量和灰度级过增强，降低了图像的失真度，提高了图像的增强效果。基于此，根据初始灰度直方图中各灰度级上像素点的数量、各灰度级上所有像素点直方图均衡化后的影响程度的均值、灰度级集合中所有数据的均值，确定灰度直方图变换后各灰度级上像素点的数量，将变换后的灰度直方图记为目标灰度直方图，因此目标灰度直方图中各灰度级上像素点的数量为：，其中，为目标灰度直方图中第个灰度级上像素点的数量，为初始灰度直方图中第个灰度级上像素点的数量，为灰度级集合中所有数据的均值，为初始灰度直方图中第个灰度级上所有像素点直方图均衡化后的影响程度的均值，为向下取整，为取绝对值，为自然常数。灰度直方图在变换之前第个灰度级上像素点的数量与灰度级集合中所有数据的均值差异越大、第个灰度级上所有像素点直方图均衡化后的影响程度的均值越大，第个灰度级在进行直方图均衡化处理时，令变换后的灰度级上的像素点数量接近灰度级集合中所有数据的均值，也即越接近数量阈值；灰度直方图在变换之前第个灰度级上像素点的数量与灰度级集合中所有数据的均值差异越小、第个灰度级上所有像素点直方图均衡化后的影响程度的均值越小，第个灰度级在进行直方图均衡化处理时，令变换后的灰度级上的像素点数量接近灰度直方图在变换之前该灰度级上像素点的数量。本实施例提供的方法在保证变换后的灰度直方图均匀分布的基础上，保护了图像的细节信息，能够有效地防止图像过增强。采用上述方法，获得灰度直方图变换后每个灰度级上像素点的数量，也即获得了目标灰度直方图中每个灰度级上像素点的数量，然后对目标灰度直方图进行直方图均衡化处理，获得增强后的遥感图像，增强后的遥感图像为高质量的遥感图像，用于后续对待检测区域的山地林草生命共同体的损毁程度进行检测。步骤S4，基于训练好的神经网络判断增强后的遥感图像中是否存在植被覆盖区域，若存在，则获取增强后的遥感图像中的植被覆盖区域，根据所述植被覆盖区域中的像素点，确定待检测山地生态区域的损毁程度。采用本实施例提供的方法能够获得当年的高质量的增强后的遥感图像和前一年的高质量的增强后的遥感图像，需要说明的是，当年的高质量的增强后的遥感图像和前一年的高质量的增强后的遥感图像均为一年当中同一时期同一山地生态损毁区域的遥感图像。接下来本实施例将利用DNN语义分割的方式来判断每张增强后的遥感图像中是否存在植被覆盖区域，若存在，则获取增强后的遥感图像中的植被覆盖区域，用于后续对损毁程度的检测；若不存在，则说明待检测山地生态区域未被损毁，无需检测损毁程度。本实施例中使用的DNN网络的相关内容包括：DNN网络的数据集为增强后的山地生态损毁区域的遥感图像；DNN网络的任务是分类，需要将图像中的像素分为两类，因此训练集对应标签的标注过程为：单通道的语义标签，对应位置像素属于背景区域的标注为0，属于植被覆盖区域的标注为1，使用的loss函数为交叉熵损失函数。DNN网络的具体训练过程为现有技术，此处不再过多赘述。分别将当年的增强后的遥感图像和前一年的增强后的遥感图像输入到训练好的DNN网络中，标记植被覆盖区域的像素点为1，其余区域的像素点为0，获得当年的待检测山地生态区域的遥感图像对应的二值图像和前一年的待检测山地生态区域的遥感图像对应的二值图像；将当年的待检测山地生态区域的遥感图像对应的二值图像减去前一年的待检测山地生态区域的遥感图像对应的二值图像，获得差值图像，将差值图像中标记值为-1的像素点作为目标像素点，目标像素点构成的连通域为山地林草损毁区域，若不存在目标像素点，则说明山地林草未被摧毁，无需对损毁程度进行检测；山地林草损毁区域的面积占比越大，说明待检测山地生态区域被损毁的越严重，因此待检测山地生态区域的损毁程度的具体表达式为：，其中，为待检测山地生态区域的损毁程度，为差值图像中像素点的数量，为差值图像中目标像素点的数量。表征山地林草损毁区域的面积占比，当山地林草损毁区域的面积占比越大时，说明待检测山地生态区域被损毁的越严重，即待检测山地生态区域的损毁程度越大。至此，采用本实施例提供的方法获得待检测山地生态区域的损毁程度。本实施例获取了待检测山地生态区域的灰度图像，考虑到图像在采集的过程中易受到外界环境的影响，导致图像局部对比度降低，影响山地生态区域损毁程度的检测精度，因此将采用直方图均衡化算法对采集的图像进行增强，提高图像的对比度，本实施例获取了待检测山地生态区域的灰度图像对应的灰度直方图，也即初始灰度直方图，考虑到传统的直方图均衡化算法基于图像中各灰度级上像素点的数量对灰度值进行变换，灰度直方图内像素点数量较多的波峰区域灰度值会产生较大的跳变，易造成图像过增强，而灰度直方图内像素点数量较少的波谷区域灰度值会产生归并，易造成图像细节缺失，进而使得山地生态区域的损毁程度的检测精度较低；本实施例通过将初始灰度直方图变换为均匀分布的灰度直方图，提高直方图均衡化增强的效果，又考虑到直接利用各灰度级上像素点的数量与均匀分布时灰度级上像素点数量差异对初始灰度直方图进行变换，会导致灰度直方图的形状变化较大，故本实施例利用灰度图像中各像素点直方图均衡化后的影响程度，即结合细节信息丢失程度和灰度过增强程度对初始灰度直方图变换进行校正，获得目标灰度直方图，进而使得最终的直方图均衡化结果能够较好的保持原始图像的直方图特性，即原始图像的明暗立体效果，在提高图像对比度的同时减少灰度级的丢失量，避免灰度级过增强，提高了图像的增强效果，能够有效地提高待检测山地生态区域损毁程度的检测精度。本实施例在获取待检测山地生态区域的灰度图像中各像素点直方图均衡化后的影响程度时，基于像素点的特征将待检测山地生态区域的灰度图像中的像素点分为了两类，分别为波峰像素点和波谷像素点，波峰像素点的灰度级处于初始灰度直方图波峰区域，波谷像素点的灰度级处于初始灰度直方图波谷区域，由于在进行直方图均衡化处理时，灰度直方图内像素点数量较多的波峰区域灰度值会产生较大的跳变，易造成图像过增强，而灰度直方图内像素点数量较少的波谷区域灰度值会产生归并，易造成图像细节缺失，本实施例分别计算了波谷像素点的细节信息丢失程度以及波峰像素点的灰度过增强程度，进而基于波谷像素点的细节信息丢失程度以及波峰像素点的灰度过增强程度获得了待检测山地生态区域的灰度图像中各像素点直方图均衡化后的影响程度，结合待检测山地生态区域的灰度图像中每个像素点的特征全面地对每个像素点进行了分析，能够使后续获取的目标灰度直方图分布的更为均匀，进而保证待检测山地生态区域的灰度图像的增强效果。
