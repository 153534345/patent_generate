标题title
一种电动汽车对电网放电的测试方法
摘要abst
本发明提出了一种电动汽车对电网放电的测试方法，通过建立与动态测试节点的通信连接，从所述动态测试节点中确定可用测试节点，获取所述可用测试节点的位置和数量，通过监测节点监测电网的实时用电数据，根据所述各个子网区域的用电量变化数据确定用电量增长幅度大于预设的第二阈值的目标子网区域，将综合输出功率与所述目标子网区域的用电量增长幅度大致相等的可用测试节点配置为放电测试节点，向所述放电测试节点下发放电控制策略以使所述放电测试节点按所述放电控制策略配置的放电参数对电网进行放电，通过所述监测节点监测所述目标子网区域在不同放电控制策略下的稳定性数据，能够测试电动汽车对电网放电对电网运行参数的影响。
权利要求书clms
1.一种电动汽车对电网放电的测试方法，其特征在于，包括：建立与动态测试节点的通信连接；从所述动态测试节点中确定可用测试节点，所述可用测试节点为处于接入电网的状态且预测的可用反向充电时间大于预设的第一阈值的测试节点；获取所述可用测试节点的位置和数量；通过监测节点监测电网的实时用电数据，所述实时用电数据包括电网的各个子网区域的用电量变化数据；根据所述各个子网区域的用电量变化数据确定用电量增长幅度大于预设的第二阈值的目标子网区域；将综合输出功率与所述目标子网区域的用电量增长幅度大致相等的可用测试节点配置为放电测试节点；向所述放电测试节点下发放电控制策略以使所述放电测试节点按所述放电控制策略配置的放电参数对电网进行放电，所述放电参数包括放电开始时间、放电顺序、放电功率以及放电时长；通过所述监测节点监测所述目标子网区域在不同放电控制策略下的稳定性数据，所述稳定性数据至少包括所述目标子网区域的电压波动、电流波动以及频率偏移数据。2.根据权利要求1所述的电动汽车对电网放电的测试方法，其特征在于，从所述动态测试节点中确定可用测试节点的步骤具体包括：获取所述动态测试节点的历史充电数据，所述历史充电数据包括所述动态测试节点接入电网的时间T_STARTi以及离开电网的时间T_ENDi，其中i＝，n为所述动态测试节点的历史充电次数；根据所述动态测试节点的历史充电数据计算所述动态测试节点的平均在线时长：根据所述动态测试节点的平均在线时长计算所述动态测试节点的在线时长稳定性：获取所述动态测试节点从亏电到满电的最大充电时间T_CHARGE_MAX；计算所述动态测试节点的平均在线时长T_AVERAGE和所述最大充电时间T_CHARGE_MAX的差值：T_USABLE＝T_AVERAGE-T_CHARGE_MAX；获取所述放电控制策略中的最小放电时长T_DISCHARGE_MIN；当所述动态测试节点的在线时长稳定性S小于预设的第三阈值，且动态测试节点的平均在线时长T_AVERAGE大于预设的第四阈值时，将所述动态测试节点确定为可用测试节点。3.根据权利要求2所述的电动汽车对电网放电的测试方法，其特征在于，在获取所述动态测试节点的历史充电数据的步骤之后，还包括：配置计数变量COUNT_PEAK_TO_VALLEY＝0，所述计数变量COUNT_PEAK_TO_VALLEY用于记录所述动态测试节点跨峰谷周期的充电次数；遍历所述动态测试节点的历史充电数据；当所述动态测试节点的历史充电数据中T_STARTi落入用电峰期且T_ENDi落入谷期时，使所述计数变量：COUNT_PEAK_TO_VALLEY＝COUNT_PEAK_TO_VALLEY+1；计算跨峰谷周期的充电次数占比：当所述动态测试节点的跨峰谷周期的充电次数占比RATE_PEAK_TO_VALLEY小于预设的第五阈值时，将动态测试节点确定为不可用测试节点。4.根据权利要求2所述的电动汽车对电网放电的测试方法，其特征在于，从所述动态测试节点中确定可用测试节点的步骤具体包括：获取所述动态测试节点接入电网的时间T_START以及剩余电量SOC；当所述接入电网的时间T_START处于用电峰期且所述剩余电量SOC小于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，将所述动态测试节点确定为不可用测试节点；当所述接入电网的时间T_START处于用电峰期且所述剩余电量SOC大于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，根据所述动态测试节点的历史充电数据预测所述动态测试节点离开电网的时间T_END；根据所述动态测试节点接入电网的时间T_START和离开电网的时间T_END计算所述动态测试节点的在线时长：T_ONLINE＝T_END-T_START；当所述动态测试节点的在线时长T_ONLINE小于当前用电峰期的剩余时长时，将所述动态测试节点确定为不可用测试节点。5.根据权利要求4所述的电动汽车对电网放电的测试方法，其特征在于，在获取所述动态测试节点接入电网的时间T_START以及剩余电量SOC的步骤之后，还包括：当所述接入电网的时间T_START处于用电谷期且所述剩余电量SOC大于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，将所述动态测试节点确定为可用测试节点；当所述接入电网的时间T_START处于用电谷期且所述剩余电量SOC小于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，根据所述动态测试节点的历史充电数据预测所述动态测试节点离开电网的时间T_END；根据所述动态测试节点接入电网的时间T_START和离开电网的时间T_END计算所述动态测试节点的在线时长：T_ONLINE＝T_END-T_START；当所述动态测试节点的在线时长T_ONLINE小于当前用电谷期的剩余时长时，将所述动态测试节点确定为不可用测试节点。6.根据权利要求2所述的电动汽车对电网放电的测试方法，其特征在于，在从所述动态测试节点中确定可用测试节点的步骤之后，还包括：获取所述可用测试节点接入电网的时间T_START；根据所述可用测试节点的历史充电数据预测所述可用测试节点离开电网的时间T_END；根据所述可用测试节点接入电网的时间T_START和离开电网的时间T_END计算所述可用测试节点的在线时长：T_ONLINE＝T_END-T_START。7.根据权利要求6所述的电动汽车对电网放电的测试方法，其特征在于，从所述动态测试节点中确定可用测试节点的步骤之后，还包括：按子网区域对所述可用测试节点进行分组；对每个分组的可用测试节点计算两两之间的第一充电时间相似度：以及第二充电时间相似度：其中ia＝，ib＝，na和nb为两个可用测试节点的历史充电次数；计算充电时间相似度：将充电时间相似度高于预设的第六阈值的两个或两个以上的可用测试节点分为一个小组；将每个小组中的至少一个可用测试节点配置为备用测试节点。8.根据权利要求7所述的电动汽车对电网放电的测试方法，其特征在于，在向所述放电测试节点下发放电控制策略以使所述放电测试节点按所述放电控制策略配置的放电参数对电网进行放电的步骤之后，还包括：接收所述放电测试节点的断开请求；获取所述放电测试节点离开电网的时间T；当所述放电测试节点离开电网的时间T小于预测的所述放电测试节点离开电网的时间T_END时，判断是否存在与当前放电测试节点相对应的备用测试节点；判断为是时，将当前放电测试节点相对应的备用测试节点配置为放电测试节点。9.根据权利要求1所述的电动汽车对电网放电的测试方法，其特征在于，根据所述各个子网区域的用电量变化数据确定用电量增长幅度大于预设的第二阈值的目标子网区域的步骤具体包括：获取各个子网区域的的当前时段的平均用电量W_AVERAGEt以及上一时段的平均用电量W_AVERAGEt-1，所述当前时段和所述上一时段为按照预设时间长度进行划分的相邻时段；计算当前时段和上一时段的平均用电量之间的差值：ΔW＝W_AVERAGEt-W_AVERAGEt-1；判断当前时段和上一时段的平均用电量之间的差值ΔW_AVERAGE是否大于所述第二阈值；判断为是时，将所述子网区域确定为所述目标子网区域。10.根据权利要求9所述的电动汽车对电网放电的测试方法，其特征在于，将综合输出功率与所述目标子网区域的用电量增长幅度大致相等的可用测试节点配置为放电测试节点的步骤具体包括：确定上一时段的平均用电量W_AVERAGEt-1与当前时段的平均用电量W_AVERAGEt所属的第一用电量区间和第二用电量区间；计算所述第二用电量区间的上界TOPt与所述第一用电量区间的上界TOPt-1的差值：ΔW＝TOPt-TOPt-1；获取所述可用测试节点的放电功率Pk；根据用电量差值ΔW和所述可用测试节点的放电功率Pk确定切换为放电测试节点的数量。
说明书desc
技术领域本发明涉及电力技术领域，特别涉及一种电动汽车对电网放电的测试方法。背景技术电动汽车功率大、容量大、数量庞大且增长速度快，是一个庞大的分布式储能系统，使用电动汽车对电网实现削峰填谷具有极大的技术和经济意义。然而电动汽车自身是一个电能消耗单位，同时由于其具备较强的移动属性，因此其在时间上和空间上接入电网的随机性和无序性极强，在缺乏有效管理策略的情况下直接将庞大的电动汽车接入电网进行放电，将会导至电网产生供需失衡、损耗增加以及电压偏移等恶劣后果，因此在实施对电动汽车对电网的进行放电前，针对电动汽车对电网放电的实施方案对电网各项运行参数的影响情况进行测试是非常必要的。然而，由于电动汽车充放电的随机性和无序性在宏观层面和局部层面的表现具有非常大的差异，电动汽车对电网放电在的实验室中的小规模测试环境或仿真测试环境中的测试结果往往并不能体现其在整个电网上的真实情况，因此有必要提出一种能够测试电动汽车对电网放电的有效测试方法。发明内容本发明正是基于上述问题，提出了一种电动汽车对电网放电的测试方法，能够测试电动汽车对电网放电对电网运行参数的影响。有鉴于此，本发明提出了一种电动汽车对电网放电的测试方法，包括：建立与动态测试节点的通信连接；从所述动态测试节点中确定可用测试节点，所述可用测试节点为处于接入电网的状态且预测的可用反向充电时间大于预设的第一阈值的测试节点；获取所述可用测试节点的位置和数量；通过监测节点监测电网的实时用电数据，所述实时用电数据包括电网的各个子网区域的用电量变化数据；根据所述各个子网区域的用电量变化数据确定用电量增长幅度大于预设的第二阈值的目标子网区域；将综合输出功率与所述目标子网区域的用电量增长幅度大致相等的可用测试节点配置为放电测试节点；向所述放电测试节点下发放电控制策略以使所述放电测试节点按所述放电控制策略配置的放电参数对电网进行放电，所述放电参数包括放电开始时间、放电顺序、放电功率以及放电时长；通过所述监测节点监测所述目标子网区域在不同放电控制策略下的稳定性数据，所述稳定性数据至少包括所述目标子网区域的电压波动、电流波动以及频率偏移数据。进一步的，在上述的电动汽车对电网放电的测试方法中，从所述动态测试节点中确定可用测试节点的步骤具体包括：获取所述动态测试节点的历史充电数据，所述历史充电数据包括所述动态测试节点接入电网的时间T_STARTi以及离开电网的时间T_ENDi，其中i＝，n为所述动态测试节点的历史充电次数；根据所述动态测试节点的历史充电数据计算所述动态测试节点的平均在线时长：根据所述动态测试节点的平均在线时长计算所述动态测试节点的在线时长稳定性：获取所述动态测试节点从亏电到满电的最大充电时间T_CHARGE_MAX；计算所述动态测试节点的平均在线时长T_AVERAGE和所述最大充电时间T_CHARGE_MAX的差值：T_USABLE＝T_AVERAGE-T_CHARGE_MAX；获取所述放电控制策略中的最小放电时长T_DISCHARGE_MIN；当所述动态测试节点的在线时长稳定性S小于预设的第三阈值，且动态测试节点的平均在线时长T_AVERAGE大于预设的第四阈值时，将所述动态测试节点确定为可用测试节点。进一步的，在上述的电动汽车对电网放电的测试方法中，在获取所述动态测试节点的历史充电数据的步骤之后，还包括：配置计数变量COUNT_PEAK_TO_VALLEY＝0，所述计数变量COUNT_PEAK_TO_VALLEY用于记录所述动态测试节点跨峰谷周期的充电次数；遍历所述动态测试节点的历史充电数据；当所述动态测试节点的历史充电数据中T_STARTi落入用电峰期且T_ENDi落入谷期时，使所述计数变量：COUNT_PEAK_TO_VALLEY＝COUNT_PEAK_TO_VALLEY+1；计算跨峰谷周期的充电次数占比：当所述动态测试节点的跨峰谷周期的充电次数占比RATE_PEAK_TO_VALLEY小于预设的第五阈值时，将动态测试节点确定为不可用测试节点。进一步的，在上述的电动汽车对电网放电的测试方法中，从所述动态测试节点中确定可用测试节点的步骤具体包括：获取所述动态测试节点接入电网的时间T_START以及剩余电量SOC；当所述接入电网的时间T_START处于用电峰期且所述剩余电量SOC小于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，将所述动态测试节点确定为不可用测试节点；当所述接入电网的时间T_START处于用电峰期且所述剩余电量SOC大于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，根据所述动态测试节点的历史充电数据预测所述动态测试节点离开电网的时间T_END；根据所述动态测试节点接入电网的时间T_START和离开电网的时间T_END计算所述动态测试节点的在线时长：T_ONLINE＝T_END-T_START；当所述动态测试节点的在线时长T_ONLINE小于当前用电峰期的剩余时长时，将所述动态测试节点确定为不可用测试节点。进一步的，在上述的电动汽车对电网放电的测试方法中，在获取所述动态测试节点接入电网的时间T_START以及剩余电量SOC的步骤之后，还包括：当所述接入电网的时间T_START处于用电谷期且所述剩余电量SOC大于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，将所述动态测试节点确定为可用测试节点；当所述接入电网的时间T_START处于用电谷期且所述剩余电量SOC小于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，根据所述动态测试节点的历史充电数据预测所述动态测试节点离开电网的时间T_END；根据所述动态测试节点接入电网的时间T_START和离开电网的时间T_END计算所述动态测试节点的在线时长：T_ONLINE＝T_END-T_START；当所述动态测试节点的在线时长T_ONLINE小于当前用电谷期的剩余时长时，将所述动态测试节点确定为不可用测试节点。进一步的，在上述的电动汽车对电网放电的测试方法中，在从所述动态测试节点中确定可用测试节点的步骤之后，还包括：获取所述可用测试节点接入电网的时间T_START；根据所述可用测试节点的历史充电数据预测所述可用测试节点离开电网的时间T_END；根据所述可用测试节点接入电网的时间T_START和离开电网的时间T_END计算所述可用测试节点的在线时长：T_ONLINE＝T_END-T_START。进一步的，在上述的电动汽车对电网放电的测试方法中，从所述动态测试节点中确定可用测试节点的步骤之后，还包括：按子网区域对所述可用测试节点进行分组；对每个分组的可用测试节点计算两两之间的第一充电时间相似度：以及第二充电时间相似度：其中ia＝，ib＝，na和nb为两个可用测试节点的历史充电次数；计算充电时间相似度：将充电时间相似度高于预设的第六阈值的两个或两个以上的可用测试节点分为一个小组；将每个小组中的至少一个可用测试节点配置为备用测试节点。进一步的，在上述的电动汽车对电网放电的测试方法中，在向所述放电测试节点下发放电控制策略以使所述放电测试节点按所述放电控制策略配置的放电参数对电网进行放电的步骤之后，还包括：接收所述放电测试节点的断开请求；获取所述放电测试节点离开电网的时间T；当所述放电测试节点离开电网的时间T小于预测的所述放电测试节点离开电网的时间T_END时，判断是否存在与当前放电测试节点相对应的备用测试节点；判断为是时，将当前放电测试节点相对应的备用测试节点配置为放电测试节点。进一步的，在上述的电动汽车对电网放电的测试方法中，根据所述各个子网区域的用电量变化数据确定用电量增长幅度大于预设的第二阈值的目标子网区域的步骤具体包括：获取各个子网区域的的当前时段的平均用电量W_AVERAGEt以及上一时段的平均用电量W_AVERAGEt-1，所述当前时段和所述上一时段为按照预设时间长度进行划分的相邻时段；计算当前时段和上一时段的平均用电量之间的差值：ΔW＝W_AVERAGEt-W_AVERAGEt-1；判断当前时段和上一时段的平均用电量之间的差值ΔW_AVERAGE是否大于所述第二阈值；判断为是时，将所述子网区域确定为所述目标子网区域。进一步的，在上述的电动汽车对电网放电的测试方法中，将综合输出功率与所述目标子网区域的用电量增长幅度大致相等的可用测试节点配置为放电测试节点的步骤具体包括：确定上一时段的平均用电量W_AVERAGEt-1与当前时段的平均用电量W_AVERAGEt所属的第一用电量区间和第二用电量区间；计算所述第二用电量区间的上界TOPt与所述第一用电量区间的上界TOPt-1的差值：ΔW＝TOPt-TOPt-1；获取所述可用测试节点的放电功率Pk；根据用电量差值ΔW和所述可用测试节点的放电功率Pk确定切换为放电测试节点的数量。本发明提出了一种电动汽车对电网放电的测试方法，通过建立与动态测试节点的通信连接，从所述动态测试节点中确定可用测试节点，获取所述可用测试节点的位置和数量，通过监测节点监测电网的实时用电数据，根据所述各个子网区域的用电量变化数据确定用电量增长幅度大于预设的第二阈值的目标子网区域，将综合输出功率与所述目标子网区域的用电量增长幅度大致相等的可用测试节点配置为放电测试节点，向所述放电测试节点下发放电控制策略以使所述放电测试节点按所述放电控制策略配置的放电参数对电网进行放电，通过所述监测节点监测所述目标子网区域在不同放电控制策略下的稳定性数据，能够测试电动汽车对电网放电对电网运行参数的影响。附图说明图1是本发明一个实施例提供的一种电动汽车对电网放电的测试方法的流程图。具体实施方式为了能够更清楚地理解本发明的上述目的、特征和优点，下面结合附图和具体实施方式对本发明进行进一步的详细描述。需要说明的是，在不冲突的情况下，本申请的实施例及实施例中的特征可以相互组合。在下面的描述中阐述了很多具体细节以便于充分理解本发明，但是，本发明还可以采用其他不同于在此描述的方式来实施，因此，本发明的保护范围并不受下面公开的具体实施例的限制。在本发明的描述中，术语“多个”则指两个或两个以上，除非另有明确的限定，术语“上”、“下”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。术语“连接”、“安装”、“固定”等均应做广义理解，例如，“连接”可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是直接相连，也可以通过中间媒介间接相连。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本发明中的具体含义。此外，术语“第一”、“第二”等仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”等的特征可以明示或者隐含地包括一个或者更多个该特征。在本发明的描述中，除非另有说明，“多个”的含义是两个或两个以上。在本说明书的描述中，术语“一个实施例”、“一些实施方式”、“具体实施例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或实例。而且，描述的具体特征、结构、材料或特点可以在任何的一个或多个实施例或示例中以合适的方式结合。下面参照附图来描述根据本发明一些实施方式提供的一种电动汽车对电网放电的测试方法。如图1所示，本发明提出了一种电动汽车对电网放电的测试方法，包括：建立与动态测试节点的通信连接；从所述动态测试节点中确定可用测试节点，所述可用测试节点为处于接入电网的状态且预测的可用反向充电时间大于预设的第一阈值的测试节点；获取所述可用测试节点的位置和数量；通过监测节点监测电网的实时用电数据，所述实时用电数据包括电网的各个子网区域的用电量变化数据；根据所述各个子网区域的用电量变化数据确定用电量增长幅度大于预设的第二阈值的目标子网区域；将综合输出功率与所述目标子网区域的用电量增长幅度大致相等的可用测试节点配置为放电测试节点；向所述放电测试节点下发放电控制策略以使所述放电测试节点按所述放电控制策略配置的放电参数对电网进行放电，所述放电参数包括放电开始时间、放电顺序、放电功率以及放电时长；通过所述监测节点监测所述目标子网区域在不同放电控制策略下的稳定性数据，所述稳定性数据至少包括所述目标子网区域的电压波动、电流波动以及频率偏移数据。具体的，上述电动汽车对电网放电的测试方法应用于一种电动汽车对电网放电的测试系统中，所述系统包括云服务器、充电桩、动态测试节点以及监测节点。所述动态测试节点为参与对电网放电测试的电动汽车，在所述电动汽车的车机系统中具有参与对电网放电测试选项的开关，用户通过在车机系统上操作打开或关闭该测试选项，当用户打开了该测试选项的开关时，该电动汽车即为所述动态测试节点。所述动态测试节点通过线缆与所述充电桩连接以接入电网，同时所述动态测试节点通过线缆与所述充电桩建立通信连接，当所述动态测试节点通过线缆与所述充电桩连接，所述动态测试节点即从离开电网的状态变更为接入电网的状态。所述充电桩通过通信网络与所述云服务器连接，从而所述云服务器在所述动态测试节点通过线缆与所述充电桩连接时，所述云服务器可以建立与所述动态测试节点的通信连接。所述监测节点是安装在电网各个子网区域用于监测各个子网区域的电压、电流和/或频率等的专用或通过监测设备。在本发明的技术方案中，通过预测所述动态测试节点离开电网的时间来计算所述动态测试节点的可用反向充电时间，进而根据预测的可用反向充电时间来确定所述动态测试节点是否为可用测试节点。所述可用反向充电时间是结合所述动态测试节点接入电网的时间、离开电网的时间以及电网的峰谷周期确定的所述动态测试节点可以被所述云服务器控制以对电网进行放电的时间长度。由于电动汽车接入电网在时间上、位置上具有随机性和无序性，为了保障对电网放电能够有效实现削峰填谷的作用，同时不影响电动汽车的正常出行，并非所有打开了参与对电网放电的电动汽车都符合对电网放电的测试条件。在本发明的技术方案中，从所述动态测试节点中确定可用测试节点，以从这些可用测试节点中选择符合条件的节点，根据电网的用电状况来执行对电网放电测试，从而实现将随机、无序接入电网的电动汽车能够有计划的、有序的参与对电网的放电测试。在上述的电动汽车对电网放电的测试方法中，从所述动态测试节点中确定可用测试节点的步骤具体包括：获取所述动态测试节点的历史充电数据，所述历史充电数据包括所述动态测试节点接入电网的时间T_STARTi以及离开电网的时间T_ENDi，其中i＝，n为所述动态测试节点的历史充电次数；根据所述动态测试节点的历史充电数据计算所述动态测试节点的平均在线时长：根据所述动态测试节点的平均在线时长计算所述动态测试节点的在线时长稳定性：获取所述动态测试节点从亏电到满电的最大充电时间T_CHARGE_MAX；计算所述动态测试节点的平均在线时长T_AVERAGE和所述最大充电时间T_CHARGE_MAX的差值：T_USABLE＝T_AVERAGE-T_CHARGE_MAX；获取所述放电控制策略中的最小放电时长T_DISCHARGE_MIN；当所述动态测试节点的在线时长稳定性S小于预设的第三阈值，且动态测试节点的平均在线时长T_AVERAGE大于预设的第四阈值时，将所述动态测试节点确定为可用测试节点。在本发明的一些实施方式中，在将所述动态测试节点确定为可用测试节点的步骤之后，还包括：将所述可用测试节点的平均在线时长T_AVERAGE确定为所述可用反向充电时间。在本发明的另一些实施方式中，所述电动汽车对电网放电的测试方法还包括：为每一个动态测试节点构建反向充电时间预测模型；将所述动态测试节点的历史充电数据作为训练样本数据训练所述反向充电时间预测模型；在建立与动态测试节点的通信连接的步骤之后，使用所述反向充电时间预测模型预测所述动态测试节点的可用反向充电时间。在本发明的一些实施方式中，在获取所述动态测试节点的历史充电数据的步骤之后，还包括：配置计数变量COUNT_PEAK_TO_VALLEY＝0，所述计数变量COUNT_PEAK_TO_VALLEY用于记录所述动态测试节点跨峰谷周期的充电次数；遍历所述动态测试节点的历史充电数据；当所述动态测试节点的历史充电数据中T_STARTi落入用电峰期且T_ENDi落入谷期时，使所述计数变量：COUNT_PEAK_TO_VALLEY＝COUNT_PEAK_TO_VALLEY+1；计算跨峰谷周期的充电次数占比：当所述动态测试节点的跨峰谷周期的充电次数占比RATE_PEAK_TO_VALLEY小于预设的第五阈值时，将动态测试节点确定为不可用测试节点。在本发明的另一些实施方式中，所述动态测试节点的每一次充电数据中的T_STARTi和T_ENDi之间的时间段为所述动态测试节点的在线时间，在遍历所述动态测试节点的历史充电数据的步骤之后，还包括：获取所述动态测试节点从亏电到满电的最大充电时间T_CHARGE_MAX；计算所述动态测试节点的每一次在线时长T_ONLINEi＝T_ENDi-T_STARTi；当所述动态时间节点的任一次在线时间跨越了一次从峰期到谷期的界线，且所述在线时间的在线时长T_ONLINEi大于所述最大充电时间T_CHARGE_MAX时，使所述计数变量：COUNT_PEAK_TO_VALLEY＝COUNT_PEAK_TO_VALLEY+1。在上述的电动汽车对电网放电的测试方法中，从所述动态测试节点中确定可用测试节点的步骤具体包括：获取所述动态测试节点接入电网的时间T_START以及剩余电量SOC；当所述接入电网的时间T_START处于用电峰期且所述剩余电量SOC小于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，将所述动态测试节点确定为不可用测试节点；当所述接入电网的时间T_START处于用电峰期且所述剩余电量SOC大于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，根据所述动态测试节点的历史充电数据预测所述动态测试节点离开电网的时间T_END；根据所述动态测试节点接入电网的时间T_START和离开电网的时间T_END计算所述动态测试节点的在线时长：T_ONLINE＝T_END-T_START；当所述动态测试节点的在线时长T_ONLINE小于当前用电峰期的剩余时长时，将所述动态测试节点确定为不可用测试节点。具体的，在上述实施方式的技术方案中，针对不同电池容量的电动汽车分别配置对应的最小电放剩余电量DISCHARGE_SOCmin，当且仅当电动汽车的剩余电量大于所述最小放电剩余电量DISCHARGE_SOCmin时，云服务器才会执行控制该电动汽车对电网进行放电的动作，从而避够由于对电网放电导致电动汽车的预留充电时间不足，无法在预测的离开电网的时间前将电动汽车的电量充满，影响电动汽车的正常出行。优选的，所述最小电放剩余电量DISCHARGE_SOCmin大于所述动态测试节点的表显电量为100％对应的剩余电量最小值。在上述的电动汽车对电网放电的测试方法中，在获取所述动态测试节点接入电网的时间T_START以及剩余电量SOC的步骤之后，还包括：当所述接入电网的时间T_START处于用电谷期且所述剩余电量SOC大于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，将所述动态测试节点确定为可用测试节点；当所述接入电网的时间T_START处于用电谷期且所述剩余电量SOC小于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，根据所述动态测试节点的历史充电数据预测所述动态测试节点离开电网的时间T_END；根据所述动态测试节点接入电网的时间T_START和离开电网的时间T_END计算所述动态测试节点的在线时长：T_ONLINE＝T_END-T_START；当所述动态测试节点的在线时长T_ONLINE小于当前用电谷期的剩余时长时，将所述动态测试节点确定为不可用测试节点。在上述的电动汽车对电网放电的测试方法中，在从所述动态测试节点中确定可用测试节点的步骤之后，还包括：获取所述可用测试节点接入电网的时间T_START；根据所述可用测试节点的历史充电数据预测所述可用测试节点离开电网的时间T_END；根据所述可用测试节点接入电网的时间T_START和离开电网的时间T_END计算所述可用测试节点的在线时长：T_ONLINE＝T_END-T_START。在上述的电动汽车对电网放电的测试方法中，当所述接入电网的时间T_START处于用电谷期且所述剩余电量SOC大于预先配置的最小放电剩余电量DISCHARGE_SOCmin时，在将所述动态测试节点确定为可用测试节点的步骤之后，还包括：获取所述动态测试节点从亏电到满电的最大充电时间T_CHARGE_MAX；获取所述可用测试节点的在线时间涵盖的用电谷期时长T_COVER_VALLEY和用电峰期的时长T_COVER_PEAK；当涵盖的用电谷期时长T_COVER_VALLEY大于所述最大充电时间T_CHARGE_MAX时，所述可用反向充电时间：T_USABLE＝T_COVER_PEAK；当涵盖的用电谷期时长T_COVER_VALLEY小于所述最大充电时间T_CHARGE_MAX时，所述可用反向充电时间：T_USABLE＝T_COVER_PEAK-。在上述的电动汽车对电网放电的测试方法中，在从所述动态测试节点中确定可用测试节点的步骤之后，还包括：按子网区域对所述可用测试节点进行分组；对每个分组的可用测试节点计算两两之间的第一充电时间相似度：以及第二充电时间相似度：其中ia＝，ib＝，na和nb为两个可用测试节点的历史充电次数；计算充电时间相似度：将充电时间相似度高于预设的第六阈值的两个或两个以上的可用测试节点分为一个小组；将每个小组中的至少一个可用测试节点配置为备用测试节点。在本发明的一些实施方式中，所述第六阈值为固定阈值，当任一个小组中所包含的可用测试节点的数量大于或等于三个时，将其中特征参数相近的可用测试节点两两配对，并从配对的两个可用测试节点中选择其中一个作为另一个的备用测试节点，所述特征参数包括电池容量、剩余电量、汽车品牌、汽车型号等中的一个或多个。在本发明的另一些实施方式中，所述第六阈值为动态阈值，通过动态调节所述第六阈值使得每一个可用测试节点具有至少一个相对应的备用测试节点。在上述的电动汽车对电网放电的测试方法中，在向所述放电测试节点下发放电控制策略以使所述放电测试节点按所述放电控制策略配置的放电参数对电网进行放电的步骤之后，还包括：接收所述放电测试节点的断开请求；获取所述放电测试节点离开电网的时间T；当所述放电测试节点离开电网的时间T小于预测的所述放电测试节点离开电网的时间T_END时，判断是否存在与当前放电测试节点相对应的备用测试节点；判断为是时，将当前放电测试节点相对应的备用测试节点配置为放电测试节点。在上述的电动汽车对电网放电的测试方法中，根据所述各个子网区域的用电量变化数据确定用电量增长幅度大于预设的第二阈值的目标子网区域的步骤具体包括：获取各个子网区域的的当前时段的平均用电量W_AVERAGEt以及上一时段的平均用电量W_AVERAGEt-1，所述当前时段和所述上一时段为按照预设时间长度进行划分的相邻时段；计算当前时段和上一时段的平均用电量之间的差值：ΔW＝W_AVERAGEt-W_AVERAGEt-1；判断当前时段和上一时段的平均用电量之间的差值ΔW_AVERAGE是否大于所述第二阈值；判断为是时，将所述子网区域确定为所述目标子网区域。在上述的电动汽车对电网放电的测试方法中，将综合输出功率与所述目标子网区域的用电量增长幅度大致相等的可用测试节点配置为放电测试节点的步骤具体包括：确定上一时段的平均用电量W_AVERAGEt-1与当前时段的平均用电量W_AVERAGEt所属的第一用电量区间和第二用电量区间；计算所述第二用电量区间的上界TOPt与所述第一用电量区间的上界TOPt-1的差值：ΔW＝TOPt-TOPt-1；获取所述可用测试节点的放电功率Pk；根据用电量差值ΔW和所述可用测试节点的放电功率Pk确定切换为放电测试节点的数量。本发明提出了一种电动汽车对电网放电的测试方法，通过建立与动态测试节点的通信连接，从所述动态测试节点中确定可用测试节点，获取所述可用测试节点的位置和数量，通过监测节点监测电网的实时用电数据，根据所述各个子网区域的用电量变化数据确定用电量增长幅度大于预设的第二阈值的目标子网区域，将综合输出功率与所述目标子网区域的用电量增长幅度大致相等的可用测试节点配置为放电测试节点，向所述放电测试节点下发放电控制策略以使所述放电测试节点按所述放电控制策略配置的放电参数对电网进行放电，通过所述监测节点监测所述目标子网区域在不同放电控制策略下的稳定性数据，能够测试电动汽车对电网放电对电网运行参数的影响。应当说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。依照本发明的实施例如上文所述，这些实施例并没有详尽叙述所有的细节，也不限制该发明仅为所述的具体实施例。显然，根据以上描述，可作很多的修改和变化。本说明书选取并具体描述这些实施例，是为了更好地解释本发明的原理和实际应用，从而使所属技术领域技术人员能很好地利用本发明以及在本发明基础上的修改使用。本发明仅受权利要求书及其全部范围和等效物的限制。
