标题title
一种基于多核异构SoC车载系统数据储存系统及方法
摘要abst
一种基于多核异构SoC车载系统数据储存系统，包括：第一硬件域，其配置为运行轻量级操作系统；第二硬件域，其配置为运行重量级操作系统和预加载系统；硬盘，其存储有第一系统镜像文件、第二系统镜像文件和配置镜像文件；存储模块，在预加载阶段用于存储第一系统镜像文件、第二系统镜像文件和配置镜像文件；以及核间通信模块，其在第一硬件域和第二硬件域之间传输系统设置参数；在重量级操作系统启动后，第二硬件域向第一硬件域发送系统设置参数，以对轻量级操作系统进行参数设置，并实时更新存储于硬盘的配置镜像文件。本申请还提供一种多核异构SoC车载系统数据储存方法，可以不受现有技术的外设部件本身Flash大小的影响。
权利要求书clms
1.一种基于多核异构SoC车载系统数据储存系统，其特征在于，包括：第一硬件域，其配置为运行轻量级操作系统；与所述第一硬件域硬隔离的第二硬件域，其配置为运行重量级操作系统和预加载系统，所述轻量级操作系统的第一系统镜像文件小于所述重量级操作系统的第二系统镜像文件大于；硬盘，其与所述第二硬件域连接，事先存储有所述第一系统镜像文件所述第二系统镜像文件和配置镜像文件；存储模块，其与所述第一硬件域和所述第二硬件域连接，用于在预加载系统运行时的预加载阶段存储所述第一系统镜像文件、所述第二系统镜像文件和配置镜像文件；以及核间通信模块，其连接所述第一硬件域和所述第二硬件域，在所述第一硬件域与所述第二硬件域之间传输系统设置参数；在预加载阶段，所述第二硬件域将存储于所述硬盘的所述第一系统镜像文件、所述第二系统镜像文件和配置镜像文件存储到所述存储模块；所述轻量级操作系统基于所述第一系统镜像文件启动，所述第一硬件域将存储于所述存储模块的所述配置镜像文件挂接到所述轻量级操作系统；所述重量级操作系统基于所述第二系统镜像文件启动，所述第二硬件域将存储于所述硬盘的所述配置镜像文件挂接到所述重量级操作系统；在所述重量级操作系统启动后，所述第二硬件域通过核间通信模块向所述第一硬件域发送所述系统设置参数，以对所述轻量级操作系统进行参数设置，同时实时更新存储于所述硬盘的所述配置镜像文件。2.根据权利要求1所述的基于多核异构SoC车载系统数据储存系统，其特征在于，在打包所述配置镜像文件时，设立单独的分区。3.根据权利要求2所述的基于多核异构SoC车载系统数据储存系统，其特征在于，在打包所述配置镜像文件时，产生规定大小的FAT32格式的所述配置镜像文件。4.根据权利要求1所述的基于多核异构SoC车载系统数据储存系统，其特征在于，所述存储模块为所述第一硬件域的内存或所述多核异构SoC的共享内存。5.根据权利要求1至4中任一项所述的基于多核异构SoC车载系统数据储存系统，其特征在于，所述轻量级操作系统为FreeRtos。6.一种基于多核异构SoC车载系统数据储存方法，其特征在于，包括以下步骤：事先将轻量级操作系统的第一系统镜像文件、重量级操作系统的第二系统镜像文件和配置镜像文件存储于硬盘；在预加载阶段，由配置为运行所述重量级操作系统的第二硬件域将存储于所述硬盘的所述第一系统镜像文件、所述第二系统镜像文件和所述配置镜像文件存储到存储模块；所述轻量级操作系统基于存储于所述存储模块的所述第一系统镜像文件启动，并由配置为运行所述轻量级操作系统的第一硬件域将存储于所述存储模块的所述配置镜像文件挂接到所述轻量级操作系统；所述重量级操作系统基于存储于所述存储模块的所述第二系统镜像文件，并由所述第二硬件域将存储于所述硬盘的所述配置镜像文件挂接到所述重量级操作系统；在所述重量级操作系统启动后，所述第二硬件域通过核间通信向所述第一硬件域发送系统设置参数，以对所述轻量级操作系统进行参数设置，同时实时更新存储于所述硬盘的所述配置镜像文件。7.根据权利要求6所述的基于多核异构SoC车载系统数据储存方法，其特征在于，所述事先将轻量级操作系统的第一系统镜像文件、重量级操作系统的第二系统镜像文件和配置镜像文件存储于硬盘的步骤，包括以下步骤：在打包所述配置镜像文件时，设立单独的分区。8.根据权利要求6所述的基于多核异构SoC车载系统数据储存方法，其特征在于，所述事先将轻量级操作系统的第一系统镜像文件、重量级操作系统的第二系统镜像文件和配置镜像文件存储于硬盘的步骤，包括以下步骤：在打包所述配置镜像文件时，产生规定大小的FAT32格式的所述配置镜像文件。9.根据权利要求6至8中任一项所述的基于多核异构SoC车载系统数据储存方法，其特征在于，所述存储模块为所述第一硬件域的内存或所述多核异构SoC的共享内存。10.根据权利要求6所述的基于多核异构SoC车载系统数据储存方法，其特征在于，所述轻量级操作系统为FreeRtos。11.一种车规芯片，其特征在于，所述车规芯片，包括，权利要求1至5中任一项所述的基于多核异构SoC车载系统数据储系统。12.一种电子设备，其特征在于，所述电子设备，包括权利要求11所述的车规芯片。13.一种计算机可读存储介质，其特征在于，其上存储有计算机指令，当计算机指令运行时执行权利要求6至10中任一项所述的基于多核异构SoC车载系统数据储方法的步骤。
说明书desc
技术领域本申请涉及数据处理技术领域，特别是涉及一种基于多核异构SoC车载系统数据储存系统及方法。背景技术现有的车载系统都是单个系统级芯片完成某个模块的功能，例如中控、仪表、微控制单元等都是单独的芯片，相互配合完成智能座舱的功能，然后一些参数也是一般储存到微控制单元的Flash中。通过微控制单元储存数据会受到微控制单元自身Flash大小的限制大小）。发明内容为了解决现有技术存在的不足，本申请的目的在于提供一种基于多核异构SoC车载系统数据储存系统及方法，可以不受现有技术的外设部件本身Flash大小的影响。为实现上述目的，本申请提供的一种基于多核异构SoC车载系统数据储存系统及，包括，第一硬件域，其配置为运行轻量级操作系统；与所述第一硬件域硬隔离的第二硬件域，其配置为运行重量级操作系统和预加载系统，所述轻量级操作系统的第一系统镜像文件小于所述重量级操作系统的第二系统镜像文件大于；硬盘，其与所述第二硬件域连接，事先存储有所述第一系统镜像文件所述第二系统镜像文件和配置镜像文件；存储模块，其与所述第一硬件域和所述第二硬件域连接，用于在预加载系统运行时的预加载阶段存储所述第一系统镜像文件、所述第二系统镜像文件和配置镜像文件；以及核间通信模块，其连接所述第一硬件域和所述第二硬件域，在所述第一硬件域与所述第二硬件域之间传输系统设置参数；在预加载阶段，所述第二硬件域将存储于所述硬盘的所述第一系统镜像文件、所述第二系统镜像文件和配置镜像文件存储到所述存储模块；所述轻量级操作系统基于所述第一系统镜像文件启动，所述第一硬件域将存储于所述存储模块的所述配置镜像文件挂接到所述轻量级操作系统；所述重量级操作系统基于所述第二系统镜像文件启动，所述第二硬件域将存储于所述硬盘的所述配置镜像文件挂接到所述重量级操作系统；在所述重量级操作系统启动后，所述第二硬件域通过核间通信模块向所述第一硬件域发送所述系统设置参数，以对所述轻量级操作系统进行参数设置，同时实时更新存储于所述硬盘的所述配置镜像文件。进一步地，在打包所述配置镜像文件时，设立单独的分区。进一步地，在打包所述配置镜像文件时，产生规定大小的FAT32格式的所述配置镜像文件。进一步地，所述存储模块为所述第一硬件域的内存或所述多核异构SoC的共享内存。更进一步地，所述轻量级操作系统为FreeRtos。为实现上述目的，本申请还提供一种基于多核异构SoC车载系统数据储存方法，其包括以下步骤：事先将轻量级操作系统的第一系统镜像文件、重量级操作系统的第二系统镜像文件和配置镜像文件存储于硬盘；在预加载阶段，由配置为运行所述重量级操作系统的第二硬件域将存储于所述硬盘的所述第一系统镜像文件、所述第二系统镜像文件和所述配置镜像文件存储到存储模块；所述轻量级操作系统基于存储于所述存储模块的所述第一系统镜像文件启动，并由配置为运行所述轻量级操作系统的第一硬件域将存储于所述存储模块的所述配置镜像文件挂接到所述轻量级操作系统；所述重量级操作系统基于存储于所述存储模块的所述第二系统镜像文件，并由所述第二硬件域将存储于所述硬盘的所述配置镜像文件挂接到所述重量级操作系统；在所述重量级操作系统启动后，所述第二硬件域通过核间通信向所述第一硬件域发送系统设置参数，以对所述轻量级操作系统进行参数设置，同时实时更新存储于所述硬盘的所述配置镜像文件。进一步地，所述事先将轻量级操作系统的第一系统镜像文件、重量级操作系统的第二系统镜像文件和配置镜像文件存储于硬盘的步骤，包括以下步骤：在打包所述配置镜像文件时，设立单独的分区。进一步地，所述事先将轻量级操作系统的第一系统镜像文件、重量级操作系统的第二系统镜像文件和配置镜像文件存储于硬盘的步骤，包括以下步骤：在打包所述配置镜像文件时，产生规定大小的FAT32格式的所述配置镜像文件。进一步地，所述存储模块为所述第一硬件域的内存或所述多核异构SoC的共享内存。更进一步地，所述轻量级操作系统为FreeRtos。为实现上述目的，本申请还提供一种车规芯片，包括，如上所述的基于多核异构SoC车载系统数据储存系统。为实现上述目的，本申请提供的电子设备，包括如上所述的车规芯片。为实现上述目的，本申请提供的计算机可读存储介质，其上存储有计算机指令，当计算机指令运行时执行如上所述的基于多核异构SoC车载系统数据储存方法的步骤。本申请的基于多核异构SoC车载系统数据储存系统及方法，通过将轻量级操作系统的系统镜像文件、重量级操作系统的系统镜像文件和配置进行文件事先存储于硬盘，并在预加载阶段，将轻量级操作系统的系统镜像文件重量级操作系统的系统镜像文件和配置镜像文件存储到存储模块，供轻量级操作系统和重量级操作系统启动和挂接，由此可以不受现有技术的外设部件本身Flash大小的影响。本申请的其它特征和优点将在随后的说明书中阐述，并且，部分地从说明书中变得显而易见，或者通过实施本申请而了解。附图说明附图用来提供对本申请的进一步理解，并且构成说明书的一部分，并与本申请的实施例一起，用于解释本申请，并不构成对本申请的限制。在附图中：图1为根据本申请的基于多核异构SoC车载系统数据储存系统结构示意图；图2为根据本申请的基于多核异构SoC车载系统数据储存方法流程图；图3为根据本申请的基于多核异构SoC车载系统数据储存方法具体流程图。具体实施方式下面将参照附图更详细地描述本申请的实施例。虽然附图中显示了本申请的某些实施例，然而应当理解的是，本申请可以通过各种形式来实现，而且不应该被解释为限于这里阐述的实施例，相反提供这些实施例是为了更加透彻和完整地理解本申请。应当理解的是，本申请的附图及实施例仅用于示例性作用，并非用于限制本申请的保护范围。应当理解，本申请的方法实施方式中记载的各个步骤可以按照不同的顺序执行，和/或并行执行。此外，方法实施方式可以包括附加的步骤和/或省略执行示出的步骤。本申请的范围在此方面不受限制。本文使用的术语“包括”及其变形是开放性包括，即“包括但不限于”。术语“基于”是“至少部分地基于”。其他术语的相关定义将在下文描述中给出。需要注意，本申请中提及的“一个”、“多个”的修饰是示意性而非限制性的，本领域技术人员应当理解，除非在上下文另有明确指出，否则应该理解为“一个或多个”。“多个”应理解为两个或以上。下面，将参考附图详细地说明本申请的实施例。实施例1图1为根据本申请的基于多核异构SoC车载系统数据储存系统结构示意图，如图1所示，本申请的基于多核异构SoC车载系统数据储存系统，包括：多核异构的系统级芯片1和硬盘2。系统级芯片1包括：第一硬件域10，其配置为运行轻量级操作系统；第二硬件域20，其与第一硬件域10硬隔离，且配置为运行重量级操作系统和预加载系统；核间通信模块30，其连接第一硬件域10和第二硬件域20，用于在第一硬件域10与第二硬件域20之间传输系统设置参数；以及存储模块40，其与第一硬件域10和第二硬件域20连接，用于存储第一硬件域10的轻量级操作系统的系统镜像文件、第二硬件域20的重量级操作系统的系统镜像文件和配置镜像文件。其中，在由预加载系统启动后的预加载阶段，第二硬件域20将事先存储于后述的硬盘2的第一系统镜像文件、第二系统镜像文件和配置镜像文件存储于存储模块，供轻量级操作系统和重量级操作系统启动和挂接。硬盘2与第二硬件域20连接。在硬盘2中事先存储有适用于轻量级操作系统的第一系统镜像文件、适用于重量级操作系统的第二系统镜像文件和供轻量级操作系统及重量级操作系统挂接的配置镜像文件。在对配置镜像文件进行打包时，分别设立单独的分区，并且产生规定大小的FAT32格式的配置镜像文件，并将其存储于硬盘2。另外，配置镜像文件可以是轻量级操作系统所支持的其它文件格式的系统镜像文件。在预加载系统运行时的预加载阶段，将存储于硬盘2的第一系统镜像文件、第二系统镜像文件和配置镜像文件存储到存储模块40，供轻量级操作系统和重量级操作系统启动。存储模块40可以是第一硬件域10的DDR模块，也可以是系统级芯片1的共享内存，但不限于此。第一硬件域10的轻量级操作系统基于存储于存储模块40的第一系统镜像文件启动，并将存储于存储模块40的配置镜像文件挂接到轻量级操作系统中，以获取轻量级操作系统的配置参数。其中，由轻量级操作系统通过标准的读取接口读取存储模块40中与配置镜像文件对应的区域。第二硬件域20的重量级操作系统基于存储于存储模块40的第二系统镜像文件启动，并将存储于硬盘2的配置镜像文件挂接到重量级操作系统中，以获取重量级操作系统的配置参数。其中，由重量级操作系统通过标准的读取接口读取硬件2中与配置镜像文件对应的分区。在第二硬件域20的重量级操作系统启动后，第二硬件域20通过核间通信模块30将轻量级操作系统的系统设置参数实时传输到第一硬件域10，以对轻量级操作系统进行参数设置。同时，重量级操作系统通过标准的读取接口将配置参数实时存储至硬盘2中与配置镜像文件对应的分区中，既重量级操作系统同步进行对轻量级操作系统的参数设置和配置镜像文件的实时更新。在本实施例中，硬隔离是指，在一颗SoC上集成了多颗单独的芯片，每颗芯片可以运行不同的操作系统，通过硬件防火墙保证DDR、I/O、eMMC等资源的独享或共享使用，软件各自运行在硬隔离物理机上，互不影响。在本实施例中，重量级操作系统的系统镜像文件大于轻量级操作系统的系统镜像文件。在本实施例中，轻量级操作系统为FreeRtos，重量级操作系统为Android或Linux，但不限于此。在本实施例中，第二系统镜像文件可以轻量级操作系统的预加载阶段被传输至存储模块，也可以是在轻量级操作系统启动后且重量级操作系统的预加载阶段被传输至存储模块，但也不限于此。在本实施例中，对一个轻量级操作系统和一个重量级操作系统的示例进行了说明，但轻量级操作系统和重量级的操作系统的数量不限于此，均可以为多个。根据本实施例的基于多核异构SoC车载系统数据储存系统，通过将轻量级操作系统的系统镜像文件、重量级操作系统的系统镜像文件和配置进行文件事先存储于硬盘，并在预加载阶段，将轻量级操作系统的系统镜像文件重量级操作系统的系统镜像文件和配置镜像文件存储到存储模块，供轻量级操作系统和重量级操作系统启动和挂接，由此可以不受现有技术的外设部件本身Flash大小的影响；同时还可以避免多系统同时控制eMMC设备冲突的问题。根据本实施例的基于多核异构SoC车载系统数据储存系统，通过先启动轻量级操作系统，可以实现快速读取相应配置参数完成相应功能的作用。根据本实施例的基于多核异构SoC车载系统数据储存系统，重量级操作系统通过核间通信将设置参数实时传输到轻量级操作系统进行参数设置，同时，重量级操作系统通过标准的读取接口将配置参数实时存储至硬盘与配置镜像文件对应的分区中，可以实现储存实时同步。根据本实施例的基于多核异构SoC车载系统数据储存系统，通过在打包配置镜像文件时，分别设立单独的分区，并且产生规定大小的FAT32格式的重量级操作系统的系统镜像文件，可以保证数据的独立性和安全性。实施例2图2为根据本申请的基于多核异构SoC车载系统数据储存方法流程图，下面将参考图2，对本申请的基于多核异构SoC车载系统数据储存方法进行详细描述。实施例2的基于多核异构SoC车载系统数据储存方法适用于实施例1的基于多核异构SoC车载系统数据储存系统，因此省略系统的具体说明。本实施例的基于多核异构SoC车载系统数据储存方法包括如下步骤。在步骤110，事先将轻量级操作系统的系统镜像文件、重量级操作系统的系统镜像文件、和配置镜像文件存储于硬盘。如图3所示，步骤110包括以下步骤：在步骤111，在打包配置镜像文件时，分别设立单独的分区，并且产生规定大小的FAT32格式的配置镜像文件；在步骤112，将第一系统镜像文件第二系统镜像文件和配置镜像文件分别存储于硬盘的对应分区。在步骤120，在预加载系统运行时的预加载阶段，由第二硬件域将存储于硬盘的第一系统镜像文件第二系统镜像文件和配置镜像文件存储到存储模块。在步骤130，第一硬件域的轻量级操作系统基于第一系统镜像文件启动，并将存储于存储模块的配置镜像文件挂接到轻量级操作系统中，以获取轻量级操作系统的配置参数。如图3所示，步骤130包括以下步骤：在步骤131，第一硬件域的轻量级操作系统基于存储于存储模块的第一系统镜像文件启动；在步骤132，第一硬件域将存储于存储模块的配置镜像文件挂接到轻量级操作系统中，以获取轻量级操作系统的配置参数，其中，由轻量级操作系统通过标准的读取接口读取存储模块中与配置镜像文件对应的区域。在步骤140，第二硬件域的重量级操作系统基于第二系统镜像文件启动，并将存储于硬盘的配置镜像文件挂接到重量级操作系统中，以获取重量级操作系统的配置参数。如图3所示，步骤140包括以下步骤：在步骤141，第二硬件域的重量级操作系统基于存储于存储模块的第二系统镜像文件启动；在步骤142，第二硬件域将存储于硬盘的配置镜像文件挂接到重量级操作系统中，以获取重量级操作系统的配置参数，其中，由重量级操作系统通过标准的读取接口读取硬件中与配置镜像文件对应的分区。在步骤150，第二硬件域通过核间通信模块将轻量级操作系统的配置参数实时传输到第一硬件域，以对轻量级操作系统进行参数设置，并实时更新配置镜像文件。如图3所示，步骤150包括以下步骤：在步骤151，第二硬件域通过核间通信模块将轻量级操作系统的配置参数实时传输到第一硬件域，以对轻量级操作系统进行参数设置；在步骤152，第二硬件域通过标准的读取接口将上述配置参数实时存储至硬盘中与配置镜像文件对应的分区中。在轻量级操作系统和重量级操作系统再次启动时，反复执行上述步骤120至步骤150。根据本实施例的基于多核异构SoC车载系统数据储存方法，通过将轻量级操作系统的系统镜像文件、重量级操作系统的系统镜像文件和配置进行文件事先存储于硬盘，并在预加载阶段，将轻量级操作系统的系统镜像文件重量级操作系统的系统镜像文件和配置镜像文件存储到存储模块，供轻量级操作系统和重量级操作系统启动和挂接，由此可以不受现有技术的外设部件本身Flash大小的影响；同时还可以避免多系统同时控制eMMC设备冲突的问题。根据本实施例的基于多核异构SoC车载系统数据储存方法，通过先启动轻量级操作系统，可以实现快速读取相应配置参数完成相应功能的作用。根据本实施例的基于多核异构SoC车载系统数据储存方法，重量级操作系统通过核间通信将设置参数实时传输到轻量级操作系统进行参数设置，同时，重量级操作系统通过标准的读取接口将配置参数实时存储至硬盘与配置镜像文件对应的分区中，可以实现储存实时同步。根据本实施例的基于多核异构SoC车载系统数据储存方法，通过在打包配置镜像文件时，分别设立单独的分区，并且产生规定大小的FAT32格式的重量级操作系统的系统镜像文件，可以保证数据的独立性和安全性。实施例3本实施例中，还提供一种车规芯片，包括，上述实施例的基于多核异构SoC车载系统数据储存系统。实施例4本实施例中，还提供一种电子设备，包括上述实施例中的车规芯片。实施例5本实施例中，还提供一种计算机可读存储介质，其上存储有计算机指令，当计算机指令运行时执行上述实施例的基于多核异构SoC车载系统数据储存方法的步骤。本领域普通技术人员可以理解：以上所述仅为本申请的优选实施例而已，并不用于限制本申请，尽管参照前述实施例对本申请进行了详细的说明，对于本领域的技术人员来说，其依然可以对前述各实施例记载的技术方案进行修改，或者对其中部分技术特征进行等同替换。凡在本申请的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。
