标题title
一种人脸识别算法切换方法、装置及存储介质
摘要abst
本申请实施例涉及人脸识别领域，并提供一种人脸识别算法切换方法、装置及存储介质，该方法包括：当从第一人脸识别模型切换到第二人脸识别模型后，获取多个时间单位内所述第二人脸识别模型的第一指标数据、第三人脸识别模型的第二指标数据，所述第三人脸识别模型与所述第二人脸识别模型的人脸识别场景相同；获取所述第一指标数据的第一加权平均指标、所述第二指标数据的第二加权平均指标；以一个时间单位为比较单位，获取各时间单位内第一加权平均指标低于第二加权平均指标的实际次数；若所述实际次数高于预设次数，则将当前启用的所述第二人脸识别模型切换为所述第三人脸识别模型；基于所述第三人脸识别模型对获取的待识别图像与所述人脸特征库中的预设密文特征进行比对。本方案能够提高实际场景人脸识别的准确性。
权利要求书clms
1.一种人脸识别算法切换方法，应用于人脸识别系统中的第一节点，其特征在于，所述人脸识别系统包括基于全同态加密的预设人脸特征库，所述预设人脸特征库包括多个基于全同态加密的预设密文特征，所述第一节点中部署多个人脸识别模型；所述方法包括：当从第一人脸识别模型切换到第二人脸识别模型后，获取多个时间单位内所述第二人脸识别模型的第一指标数据、第三人脸识别模型的第二指标数据，所述第三人脸识别模型与所述第二人脸识别模型的人脸识别场景相同；获取所述第一指标数据的第一加权平均指标、所述第二指标数据的第二加权平均指标；以一个时间单位为比较单位，获取各时间单位内第一加权平均指标低于第二加权平均指标的实际次数；若所述实际次数高于预设次数，则将当前启用的所述第二人脸识别模型切换为所述第三人脸识别模型；基于所述第三人脸识别模型对获取的待识别图像与所述人脸特征库中的预设密文特征进行比对。2.根据权利要求1所述的方法，其特征在于，所述将当前启用的所述第二人脸识别模型切换为所述第三人脸识别模型时，所述方法还包括：获取将当前启用的所述第二人脸识别模型切换为所述第三人脸识别模型的切换起始时刻、切换结束时刻；获取第一待比对数据，所述第一待比对数据为所述人脸特征库中在所述第一时刻与所述第二时刻之间的预设密文特征；所述第一时刻提前于所述切换起始时刻，所述第二时刻滞后于所述切换结束时刻；基于所述第三人脸识别模型，将所述待识别图像和所述第一待比对数据进行比对，得到第三比对数据；获取第一比对数据、第二比对数据，其中，所述第一比对数据为在所述切换起始时刻之前启用所述第二人脸识别模型对待识别图像进行人脸识别的历史数据；所述第二比对数据为在所述切换结束时刻之后启用所述第二人脸识别模型对待识别图像进行人脸识别的历史数据；根据所述第一比对数据、所述第二比对数据以及所述第三比对数据，得到目标比对数据。3.根据权利要求2所述的方法，其特征在于，所述方法还包括：根据业务类型从所述多个人脸识别模型中确定第一候选集，所述第一候选集包括至少两个第一候选模型，所述第一候选模型为与所述业务类型匹配的人脸识别模型；获取各第一候选模型在第一历史时段内的加权指标；从所述第一候选集中确定第一目标人脸识别模型，所述第一目标人脸识别模型为加权指标高于预设指标的候选模型；将当前的第一人脸识别模型切换为所述第一目标人脸识别模型。4.根据权利要求2所述的方法，其特征在于，所述方法还包括：根据业务类型从所述多个人脸识别模型中确定第二候选集，所述第二候选集包括至少两个第二候选模型，所述第二候选模型为与所述业务类型匹配的人脸识别模型；根据协同过滤算法，从所述第二候选集中确定第二目标人脸识别模型，将当前的第一人脸识别模型切换为所述第二目标人脸识别模型。5.根据权利要求2所述的方法，其特征在于，所述方法还包括：对各所述人脸识别模型设置标签，所述标签用于标识人脸识别模型适配的识别对象。6.根据权利要求5所述的方法，其特征在于，所述第二人脸识别模型设置第一标签，所述第三人脸识别模型设置第二标签；所述从第一人脸识别模型切换到第二人脸识别模型之前，或者，所述将当前启用的所述第二人脸识别模型切换为所述第三人脸识别模型之前，所述方法还包括：确定所述第一标签与所述第二标签是否相同；若相同，则将当前启用的所述第二人脸识别模型切换为所述第三人脸识别模型；若不相同，则显示第一提示消息，所述第一提示消息用于提示所述第三人脸识别模型不支持对所述待识别图像中的目标对象的检测。7.根据权利要求5或6所述的方法，其特征在于，所述对各所述人脸识别模型设置标签之后，所述方法还包括：获取各所述人脸识别模型在第二历史时段内的历史业务指标；根据各所述人脸识别模型在第二历史时段内的历史业务指标，确定各所述人脸识别模型当前设置的标签是否与对应的历史业务指标匹配；若匹配度低于预设阈值，则显示第二提示消息，所述第二提示消息用于提示匹配度低于预设阈值的嫌疑人脸识别模型的标签存在异常。8.一种人脸识别装置，其特征在于，所述人脸识别装置包括：输入输出模块，用于当从第一人脸识别模型切换到第二人脸识别模型后，获取多个时间单位内所述第二人脸识别模型的第一指标数据、第三人脸识别模型的第二指标数据，所述第三人脸识别模型与所述第二人脸识别模型的人脸识别场景相同；所述处理模块，用于获取所述第一指标数据的第一加权平均指标、所述第二指标数据的第二加权平均指标；以一个时间单位为比较单位，获取各时间单位内第一加权平均指标低于第二加权平均指标的实际次数；若所述实际次数高于预设次数，则将当前启用的所述第二人脸识别模型切换为所述第三人脸识别模型；基于所述第三人脸识别模型对获取的待识别图像与所述人脸特征库中的预设密文特征进行比对。9.一种人脸识别装置，其特征在于，所述装置包括：至少一个处理器、存储器和收发器；其中，所述存储器用于存储计算机程序，所述处理器用于调用所述存储器中存储的计算机程序来执行如权利要求1-7中任一项所述的方法。10.一种计算机可读存储介质，其特征在于，其包括指令，当其在计算机上运行时，使得计算机执行如权利要求1-7中任一项由第一节点执行的方法。
说明书desc
技术领域本申请实施例涉及人脸识别技术领域，尤其涉及一种人脸识别算法切换方 法、装置及存储介质。背景技术多算法平台集成了多个类别或多个机构的智能算法，用户可根据自己的需 求场景在该平台上手动或自动的选择及切换适合当前场景的算法。多算法平台 的诞生带来了很多优势，如从原有的一个机构一套算法只能使用自身的算力， 实现了算法和算力之间的解耦，变成了不同机构间的所有算法可以只使用一套 算力，极大削减了用户在算力方面的成本；同时由于各机构的算法能力及版本 是不断变化的，从用户角度，可以避免需要不断购买不同机构及不同版本算法 的问题；一个多算法平台的集成算法越多可覆盖的用户面就越广。通常，多算法平台的设计，大致分以下几种：1.用户手动选择不同机构的 不同版本算法；2.在一定时段内按照时间或区间进行切换；3.配置不同的规则事 件，当发生某一事件时实时使用匹配的算法。本方法主要针对第二种在一定时 段内按照时间或区域进行切换的方式进行分析。例如，一个多算法的人脸比对 系统，假如A机构在白天的准确率较高，B和C机构的算法在夜间的准确率高， D机构的算法在雨天的准确率更高；或是算法A在车站多人流的场景算法识别度 高，算法B在医院戴口罩场景下召回率高。多算法人脸比对系统可根据用户所 使用的不同场景按照一定的规则进行智能的算法决策和算法切换。如从白天到 凌晨，系统可以自动的将A机构算法切换成B机构算法，此后的业务指标如相似度及准确率等都以B机构的算法展示。在对现有技术的研究和实践过程中，本申请实施例的发明人发现，多算法 平台中，如同一类别的算法切换后的人脸识别准确率不如切换之前选用的算法， 且存在多种算法切换时的规则调度及资源耗时问题。发明内容本申请实施例提供了一种人脸识别算法切换方法、装置及存储介质，能够 提高多种人脸识别算法切换过程中人脸识别结果的准确率，以及准确的切换为 用户想要使用的人脸识别算法及指标效果。第一方面，从第一节点角度介绍本申请实施例提供的一种人脸识别算法切 换方法，应用于人脸识别系统中的第一节点，所述人脸识别系统包括基于全同 态加密的预设人脸特征库，所述预设人脸特征库包括多个基于全同态加密的预 设密文特征，所述第一节点中部署多个人脸识别模型；所述方法包括：当从第一人脸识别模型切换到第二人脸识别模型后，获取多个时间单位内 所述第二人脸识别模型的第一指标数据、第三人脸识别模型的第二指标数据， 所述第三人脸识别模型与所述第二人脸识别模型的人脸识别场景相同；获取所述第一指标数据的第一加权平均指标、所述第二指标数据的第二加 权平均指标；以一个时间单位为比较单位，获取各时间单位内第一加权平均指标低于第 二加权平均指标的实际次数；若所述实际次数高于预设次数，则将当前启用的所述第二人脸识别模型切 换为所述第三人脸识别模型；基于所述第三人脸识别模型对获取的待识别图像与所述人脸特征库中的预 设密文特征进行比对。一种可能的设计中，所述将当前启用的所述第二人脸识别模型切换为所述 第三人脸识别模型之后，所述方法还包括：监测所述第三人脸识别模型的剩余有效时长；预测目标比对时长，所述目标比对时长是指基于所述第三人脸识别模型对 获取的待识别图像与所述人脸特征库中的预设密文特征进行比对的理论耗时；若所述目标比对时长大于所述剩余有效时长，则在目标时刻之前切换到第 四人脸识别模型；其中，所述第四人脸识别模型满足以下项中的一项：默认人脸识别模型；历史时段内启用的历史人脸识别模型；或者，与所述第二人脸识别模型的人脸识别场景相同，且剩余有效时长覆 盖剩余的理论耗时。一种可能的设计中，所述将当前启用的所述第二人脸识别模型切换为所述 第三人脸识别模型之前，所述方法还包括：监测所述第三人脸识别模型的剩余有效时长；预测目标比对时长，所述目标比对时长是指基于所述第三人脸识别模型对 获取的待识别图像与所述人脸特征库中的预设密文特征进行比对的理论耗时；若所述目标比对时长不大于所述剩余有效时长，则切换为所述第三人脸识 别模型。一种可能的设计中，所述将当前启用的所述第二人脸识别模型切换为所述 第三人脸识别模型之前，所述方法还包括：监测所述第三人脸识别模型的模型状态；若所述模型状态为失效状态，则选择与所述第二人脸识别模型的人脸识别 场景相同的第五人脸识别模型，并切换为所述第五人脸识别模型。第二方面，本申请实施例提供一种人脸识别装置，具有实现对应于上述第 一方面提供的人脸识别算法切换方法的功能。所述功能可以通过硬件实现，也 可以通过硬件执行相应的软件实现。硬件或软件包括一个或多个与上述功能相 对应的模块，所述模块可以是软件和/或硬件。一些实施方式中，所述人脸识别装置包括：输入输出模块，用于当从第一人脸识别模型切换到第二人脸识别模型后， 获取多个时间单位内所述第二人脸识别模型的第一指标数据、第三人脸识别模 型的第二指标数据，所述第三人脸识别模型与所述第二人脸识别模型的人脸识 别场景相同；所述处理模块，用于获取所述第一指标数据的第一加权平均指标、所述第 二指标数据的第二加权平均指标；以一个时间单位为比较单位，获取各时间单 位内第一加权平均指标低于第二加权平均指标的实际次数；若所述实际次数高 于预设次数，则将当前启用的所述第二人脸识别模型切换为所述第三人脸识别 模型；基于所述第三人脸识别模型对获取的待识别图像与所述人脸特征库中的 预设密文特征进行比对。第三方面，本申请实施例提供了一种计算机设备，其包括至少一个连接的 处理器、存储器和收发器，其中，所述存储器用于存储计算机程序，所述处理 器用于调用所述存储器中的计算机程序来执行上述第一方面、第一方面中的各 种可能的设计中提供的方法。本申请实施例又一方面提供了一种计算机可读存储介质，其包括指令，当 其在计算机上运行时，使得计算机执行上述第一方面、第一方面中的各种可能 的设计中的各种可能的设计中提供的方法。本申请实施例又一方面提供了一种计算机程序产品或计算机程序，该计算 机程序产品或计算机程序包括计算机指令，该计算机指令存储在计算机可读存 储介质中。计算机设备的处理器从计算机可读存储介质读取该计算机指令，处 理器执行该计算机指令，使得该计算机设备执行上述第一方面、第一方面中的 各种可能的设计中提供的方法。相较于现有技术，本申请实施例提供的方案中，在智慧安防、智慧城市、 智慧教育等场景中，在第一节点中部署多个人脸识别模型，基于当前从多个人 脸识别模型中确定的目标人脸识别模型对待识别图像进行特征提取后，即可直 接与目标人脸识别模型对应的目标人脸特征库进行匹配得到用于识别用户的目 标相似度密文。当从第一人脸识别模型切换到第二人脸识别模型后，获取多个 时间单位内所述第二人脸识别模型的第一指标数据、第三人脸识别模型的第二 指标数据，由于第三人脸识别模型与所述第二人脸识别模型的人脸识别场景相 同，且以一个时间单位为比较单位，获取各时间单位内第一加权平均指标低于 第二加权平均指标的实际次数，因此，当实际次数高于预设次数时，可以将当 前启用的所述第二人脸识别模型切换为所述第三人脸识别模型。通过该方式切 换的人脸识别场景既能够适配当前情形，又充分的参考前述第二、第三人脸识 别模型的指标数据，所以切换的第三人脸识别模型更加适配当前的人脸识别需 求，且无缝衔接的进行切换。进而，一方面中，一定程度上能够灵活调度更加 适配的人脸识别算法，在保证提高实际场景人脸识别的准确性的同时，还提升 人脸识别装置的鲁棒性；此外，由于能够选择适配的人脸识别算法，所以并不 需要专门为人脸识别装置配备全方位、适应所有或极多场景的人脸识别算法， 因此，一定程度上也能降低了对更多人脸识别算法的采购成本；另一方面中， 也能够更准确的获取在该切换期间、以及切换之后的指标数据。附图说明图1a为本申请实施例提供的一种人脸识别系统示意图；图1b为本申请实施例提供的一种人脸识别场景示意图；图2为本申请实施例中人脸识别算法切换方法的一种流程示意图；图3为本申请实施例中人脸识别算法切换方法的一种流程示意图；图4a为本申请实施例中人脸识别算法切换方法的另一种流程示意图；图4b为本申请实施例中获取第一待比对数据的一种场景示意图；图5为本申请实施例中人脸识别装置的一种结构示意图；图6为本申请实施例中实施人脸识别算法切换方法的实体设备的一种结构 示意图；图7为本申请实施例中实施人脸识别算法切换方法的服务器的一种结构示 意图；图8为本申请实施例中实施人脸识别算法切换方法的手机的一种结构示意 图。具体实施方式本申请实施例的说明书和权利要求书及上述附图中的术语“第一”、“第二” 等是用于区别类似的对象，而不必用于描述特 定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便 这里描述的实施例能够以除了在这里图示或描述的内容以外的顺序实施。此外， 术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如， 包含了一系列步骤或模块的过程、方法、系统、产品或设备不必限于清楚地列 出的那些步骤或模块，而是可包括没有清楚地列出的或对于这些过程、方法、 产品或设备固有的其它步骤或模块，本申请实施例中所出现的模块的划分，仅仅是一种逻辑上的划分，实际应用中实现时可以有另外的划分方式，例如多个 模块可以结合成或集成在另一个系统中，或一些特征可以忽略，或不执行，另 外，所显示的或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些 接口，模块之间的间接耦合或通信连接可以是电性或其他类似的形式，本申请 实施例中均不作限定。并且，作为分离部件说明的模块或子模块可以是也可以 不是物理上的分离，可以是也可以不是物理模块，或者可以分布到多个电路模 块中，可以根据实际的需要选择其中的部分或全部模块来实现本申请实施例方 案的目的。本申请实施例供了一种人脸识别算法切换方法、装置及存储介质，可用于 人脸识别，例如智慧安防、智慧监控或智慧教育场景时，人脸识别结果可以用 于确定用户身份信息。该方案可应用于第一节点可为服务器或服务终端，第二 节点可为服务器。本申请实施例以第一节点为服务器为例，当应用于服务终端 侧，可参考对第一节点为服务器的实施例，不作赘述。本申请实施例的方案可基于人工智能技术实现，具体来说涉及人工智能技 术中的计算机视觉技术领域和云技术中的云计算、云存储和数据库等领域，下 面将分别进行介绍。人工智能是利用数字计算机或者数字计算机控制 的机器模拟、延伸和扩展人的智能，感知环境、获取知识并使用知识获得最佳 结果的理论、方法、技术及应用系统。换句话说，人工智能是计算机科学的一 个综合技术，它企图了解智能的实质，并生产出一种新的能以人类智能相似的 方式做出反应的智能机器。人工智能也就是研究各种智能机器的设计原理与实 现方法，使机器具有感知、推理与决策的功能。人工智能技术是一门综合学科，涉及领域广泛，既有硬件层面的技术也有 软件层面的技术。人工智能基础技术一般包括如传感器、专用人工智能芯片、 云计算、分布式存储、大数据处理技术、操作/交互系统、机电一体化等技术。 人工智能软件技术主要包括计算机视觉技术、语音处理技术、自然语言处理技 术以及机器学习/深度学习等几大方向。计算机视觉技术计算机视觉是一门研究如何使机器 “看”的科学，更进一步的说，就是指用摄影机和电脑代替人眼对目标进行识别、 跟踪和测量等机器视觉，并进一步做图形处理，使电脑处理成为更适合人眼观 察或传送给仪器检测的图像。作为一个科学学科，计算机视觉研究相关的理论 和技术，试图建立能够从图像或者多维数据中获取信息的人工智能系统。计算 机视觉技术通常包括图像处理、图像识别、图像语义理解、图像检索、OCR、 视频处理、视频语义理解、视频内容/行为识别、三维物体重建、3D技术、虚 拟现实、增强现实、同步定位与地图构建等技术，还包括常见的人脸识别、指 纹识别等生物特征识别技术。云技术是指在广域网或局域网内将硬件、软件、网络 等系列资源统一起来，实现数据的计算、储存、处理和共享的一种托管技术。 云技术基于云计算商业模式应用的网络技术、信息技术、 整合技术、管理平台技术、应用技术等的总称，可以组成资源池，按需所用， 灵活便利。云计算技术将变成重要支撑。技术网络系统的后台服务需要大量的 计算、存储资源，如视频网站、图像类网站和更多的门户网站。伴随着互联网 行业的高度发展和应用，将来每个物品都有可能存在自己的识别标志，都需要 传输到后台系统进行逻辑处理，不同程度级别的数据将会分开处理，各类行业 数据皆需要强大的系统后盾支撑，只能通过云计算来实现。本申请实施例可通 过云技术对终端下发提示信息，发送目标会话的页面等，以及从终端获取会话 记录。云存储是在云计算概念上延伸和发展出来的一个新的概念， 分布式云存储系统是指通过集群应用、网格技术以及分 布存储文件系统等功能，将网络中大量各种不同类型的存储设备通过应用软件或应用接口集合起来协同工作，共同对外提供 数据存储和业务访问功能的一个存储系统。在本申请实施例中，可将网络配置、 配置实例、配置模型、转换模板、划分的网络区域等信息均保存在该数据库中， 便于服务器调取。目前，存储系统的存储方法为：创建逻辑卷，在创建逻辑卷时，就为每个 逻辑卷分配物理存储空间，该物理存储空间可能是某个存储设备或者某几个存 储设备的磁盘组成。客户端在某一逻辑卷上存储数据，也就是将数据存储在文 件系统上，文件系统将数据分成许多部分，每一部分是一个对象，对象不仅包 含数据而且还包含数据标识等额外的信息，文件系统将每个对 象分别写入该逻辑卷的物理存储空间，且文件系统会记录每个对象的存储位置 信息，从而当客户端请求访问数据时，文件系统能够根据每个对象的存储位置 信息让客户端对数据进行访问。存储系统为逻辑卷分配物理存储空间的过程，具体为：按照对存储于逻辑 卷的对象的容量估量 和独立冗余磁盘阵列的组别，预 先将物理存储空间划分成分条，一个逻辑卷可以理解为一个分条，从而为逻辑 卷分配了物理存储空间。数据库，简而言之可视为电子化的文件柜——存储电子文件的处 所，用户可以对文件中的数据进行新增、查询、更新、删除等操作。所谓“数据 库”是以一定方式储存在一起、能与多个用户共享、具有尽可能小的冗余度、与 应用程序彼此独立的数据集合。数据库管理系统是为 管理数据库而设计的电脑软件系统，一般具有存储、截取、安全保障、备份等 基础功能。数据库管理系统可以依据它所支持的数据库模型来作分类，例如关 系式、XML；或依据所支持 的计算机类型来作分类，例如服务器群集、移动电话；或依据所用查询语言来 作分类，例如SQL、XQuery；或 依据性能冲量重点来作分类，例如最大规模、最高运行速度；亦或其他的分类 方式。不论使用哪种分类方式，一些DBMS能够跨类别，例如，同时支持多种 查询语言。在本申请实施例中，可将人脸特征库存储在该数据库中，便于服务 器调取。其中，需要特别说明的是，本申请实施例涉及的服务终端，可以是指向服 务终端提供语音和/或数据连通性的设备，具有无线连接功能的手持式设备、或 连接到无线调制解调器的其他处理设备。例如移动电话 和具有移动终端的计算机，例如，可以是便携式、袖珍式、手持式、计算机内 置的或者车载的移动装置，它们与无线接入网交换语音和/或数据。例如，个人 通信业务电话、 无绳电话、会话发起协议话机、无线本地环路站、个人数字助理等设备。在服务终端进行人脸识别时，服务终端还需要从先基于人脸图像库获取人 脸特征库。具体来说，服务终端用于制作、保存、加密、更新人脸图像库。本申请实施例中，服务终端是先获取人脸图像库以及多个人脸识别模型的 特征提取器；基于所述多个人脸识别模型的特征提取器对所述人脸图像库分别 进行人脸特征提取，得到各人脸识别模型分别对应的初始人脸特征库；对各初始人脸特征库进行解密，得到各初始人脸特征库对应的候选人脸特 征库；对各候选人脸特征库分别进行全同态加密，得到人脸特征库；其中，所 述人脸特征库包括多个预设密文特征；将所述人脸特征库发送至所述第一节点。一些实施方式中，本申请实施例可应用于如图1a所示的一种人脸识别系统 1时，该人脸识别系统包括至少一个第一节点、至 少一个第二节点、至少一个图像采集装置。所述第 一节点与所述第二节点之间可以进行数据交互，所述图像采集装置与所述第一 节点可以进行数据交互。所述人脸识别系统，还可以包括第三服务器，所述第二节点与所述第三节点之间可以进行数据交 互，所述第一节点也与所述第三节点之间可以进行数据交互。第一节点与图像 采集装置可集中部署或分离式部署，本申请实施例不对此作限定，仅以分离式 部署为例。当基于上述图1a所述的人脸识别系统实现本申请实施例中的人脸识别算 法切换方法时，可参考如图1b所示的一种应用场景示意图。本申请实施例中，所述第一节点用于调用预设的人脸特征库执行人脸识别 算法切换方法，该第一节点可以是权威机构总服务器，或者是权威机构市一级 或县一级服务器，本申请实施例不对此作限定。所述第一节点当前启用的人脸识别模型为人脸识别模型2，选择适配当前 人脸识别场景的预设切换策略，从多个人脸识别模型中确定目标人脸识别模型，基于该选 中的预设切换策略从人脸识别模型2切换为人脸识别模型5。基于该人脸识别 模型5将目标人脸特征与目标人脸特征库中的各预设密文特征进行匹配，得到 目标相似度并输出。可选地，所述第一节点可以是诸如服务器、云服务器等终 端设备，本申请实施例对此不作限定。所述第一节点中可以安装应用程序的客 户端。其中，该应用程序是指任意能够为所述第一节点、所述第二节点及所述 图像采集装置之间提供交互平台的计算机程序。所述第二节点获取人脸图像库以及多个人脸识别模型的特征提取器；基于 所述多个人脸识别模型的特征提取器对所述人脸图像库分别进行人脸特征提 取，得到各人脸识别模型分别对应的初始人脸特征库；对各初始人脸特征库进 行解密，得到各初始人脸特征库对应的候选人脸特征库；对各候选人脸特征库 分别进行全同态加密，得到人脸特征库；其中，所述人脸特征库包括多个预设 密文特征；将所述人脸特征库发送至所述第一节点。可选地，所述第二节点可 以是诸如服务器、云服务器等终端设备，本申请实施例对此不作限定。其中，需要特别说明的是，本申请实施例涉及的服务器可以是独立的物理服务器，也可以是多个物理服务器构成的服务器集群或 者分布式系统，还可以是提供云服务、云数据库、云计算、云函数、云存储、 网络服务、云通信、中间件服务、域名服务、安全服务、CDN、以及大数据和 人工智能平台等基础云计算服务的云服务器。本申请实施例涉及的对抗样本生 成装置可以是智能手机、平板电脑、笔记本电脑、台式计算机、智能音箱、智 能手表、个人数字助理等，但并不局限于此。人脸识别装置以及服务器可以通过有线或无线通信方式进行直接或间接地连接，本申请实施例在此不做限制。多算法平台中，如同一类别的算法切换后的人脸识别准确率不如切换之前 选用的算法，且存在多种算法切换时的规则调度及资源耗时问题。对此，本申 请实施例主要提供以下技术方案：1、针对多种算法切换时带来的准确率低的问题，本申请实施例采用多种切 换策略，例如在多算法平台切换算法后，当从算法A自动切换到算法B的同时， 后台自动记录同类算法下的其他算法的结果，并按照一定的时间将结果进行统 计推送给用户。如当从算法A切换到B时，若B和C时同类算法，后台会同 时记录同类算法C的指标记录，在一日后或一月后，统计出使用算法C的指标 加权平均后高于使用算法B的，在前端向用户推送并展示相应的记录数据。2、针对算法在切换时，由于多种因素如网络及硬件资源等原因导致切换过 程中的部分数据还是之前的算法，没有得到更优的指标结果的问题，采用在算 法切换过程中记录切换事务的触发器状态及时间，即触达器状态发生变化时需 要记录算法切换的开始时间，算法切换结束后记录算法切换的完成时间。由“切 换结束时刻+t”减去“切换起始时刻-t”的整个过程中的数据，需要在算法切换结 束后重新使用算法B进行重新对比，使用此方法可以将算法切换过程中的遗留 的数据全部使用算法B重新跑模型，避免临界点之间的数据未采用切换后的算 法B。下面，将结合图2-图4对本申请实施例的技术方案进行示例性说明。参照图2，以下介绍本申请实施例所提供的一种人脸识别算法切换方法， 所述人脸识别系统包括基于全同态加密的预设人脸特征库，所述预设人脸特征 库包括多个基于全同态加密的预设密文特征，所述第一节点中部署多个人脸识 别模型。本申请实施例包括：201、当从第一人脸识别模型切换到第二人脸识别模型后，获取多个时间单 位内所述第二人脸识别模型的第一指标数据、第三人脸识别模型的第二指标数 据。其中，第一人脸识别模型为第一节点当前启用的人脸识别模型。所述第三人脸识别模型与所述第二人脸识别模型的人脸识别场景相同，例 如该第二人脸识别模型为适用于火车站场景中进行人脸识别的人脸识别模型， 那么为了保证切换后识别结果的准确性和识别场景的适配性，该第三人脸识别 模型也同样为适用于火车站场景中进行人脸识别的人脸识别模型。第一指标数据和第二指标数据均包括：a、平均相似度及准确率。b、平均响应时间。202、获取所述第一指标数据的第一加权平均指标、所述第二指标数据的第 二加权平均指标。其中，第一加权平均指标为对第一指标数据中的所有项的指标进行加权得 到的值。例如为平均相似度。第二加权平均指标为对第一指标数据中的所有项的指标进行加权得到的 值。例如为平均响应时间。203、以一个时间单位为比较单位，获取各时间单位内第一加权平均指标低 于第二加权平均指标的实际次数。其中，该时间单位可为微秒、秒、分钟、日、周、月等时间单位，本申请 实施例不对时间单位的划分粒度作限定。实际次数是指对每个比较单位内第一加权平均指标低于第二加权平均指标 的实际次数的一个计数统计。例如，以4个时间单位进行统计，在T1内，第一加权平均指标低于第二加权平均指标；在T2内， 第一加权平均指标低于第二加权平均指标；在T3内，第一加权平均指标高于 第二加权平均指标；在T4内，第一加权平均指标低于第二加权平均指标。可 见，总共有3次是第一加权平均指标低于第二加权平均指标。例如下表1：T1T2T3T4比较结果a＜ba＜ba＞ba＜b 表1上表1中，a为第一加权平均指标，b为第二加权平均指标。其中，4个时 间单位内共存在3次“a＜b”。204、若所述实际次数高于预设次数，则将当前启用的所述第二人脸识别模 型切换为所述第三人脸识别模型。205、基于所述第三人脸识别模型对获取的待识别图像与所述人脸特征库中 的预设密文特征进行比对。例如图3所示，在多算法平台切换算法后，当从算法A自动切换到算法B 的同时，后台自动记录同类算法下的其他算法的结果，并按照一定的时间将结 果进行统计推送给用户。如当从算法A切换到B时，若B和C时同类算法， 后台会同时记录同类算法C的指标记录，在一日后或一月后，统计出使用算法 C的指标加权平均后高于使用算法B的，在前台给用户推送并展示相应的记录 数据。此外针对同类事件，若同种算法的本次后台统计结果优于目前的切换算法， 推送给用户后用户选择了较优算法，对该较优算法进行计次；若后台推荐较优 算法计次数大于3次，后续若再发生同样事件，系统将自动选择最优算法。与现有技术相比，本申请实施例中，当从第一人脸识别模型切换到第二人 脸识别模型后，获取多个时间单位内所述第二人脸识别模型的第一指标数据、 第三人脸识别模型的第二指标数据，由于第三人脸识别模型与所述第二人脸识 别模型的人脸识别场景相同，且以一个时间单位为比较单位，获取各时间单位 内第一加权平均指标低于第二加权平均指标的实际次数，因此，当实际次数高 于预设次数时，可以将当前启用的所述第二人脸识别模型切换为所述第三人脸 识别模型。通过该方式切换的人脸识别场景既能够适配当前情形，又充分的参 考前述第二、第三人脸识别模型的指标数据，所以切换的第三人脸识别模型更 加适配当前的人脸识别需求，且无缝衔接的进行切换。进而，一方面中，一定 程度上能够灵活调度更加适配的人脸识别算法，可以最大化规避当前深度学习 的不鲁棒不可扩展性质，提高实际场景人脸识别的准确性；同时极大的降低了 用户采购成本；另一方面中，能够更准确的获取在该切换期间、以及切换之后 的指标数据。可选的，在本申请的一些实施例中，在多算法平台切换算法过程中，如从 算法A切换到算法B时，由于B所属厂商的硬件资源条件一般，或者网络延迟 等，可能导致在算法切换过程中的临界点导致在算法切换临界点的数据不能正确分类统计，很可能这部分 数据还是按照算法A进行指标分析。故当算法切换时，为避免机器资源及网络带宽等不确定因素所导致最终的 人脸识别识别结果准确度较低的问题，本申请实施例中，可在算法切换过程中 记录切换事务的触发器状态及时间，即触达器状态发生变化时需要记录算法切 换的开始时间，算法切换结束后记录算法切换的完成时间。获取由“结束时间+t” 减去“开始时间-t”的整个过程中的数据，在算法切换结束后重新使用算法B进 行重新对比。具体来说，将当前启用的所述第二人脸识别模型切换为所述第三 人脸识别模型时，如图4a所示，所述方法还包括下述步骤301-305：301、获取将当前启用的所述第二人脸识别模型切换为所述第三人脸识别模 型的切换起始时刻、切换结束时刻。302、获取第一待比对数据。其中，所述第一待比对数据为所述人脸特征库中在所述第一时刻与所述第 二时刻之间的预设密文特征；所述第一时刻提前于所述切换起始时刻，所述第 二时刻滞后于所述切换结束时刻。303、基于所述第三人脸识别模型，将所述待识别图像和所述第一待比对数 据进行比对，得到第三比对数据。304、获取第一比对数据、第二比对数据。其中，所述第一比对数据为在所述切换起始时刻之前启用所述第二人脸识 别模型对待识别图像进行人脸识别的历史数据；所述第二比对数据为在所述切 换结束时刻之后启用所述第二人脸识别模型对待识别图像进行人脸识别的历史 数据。305、根据所述第一比对数据、所述第二比对数据以及所述第三比对数据， 得到目标比对数据。一些实施方式中，切换起始时刻与第一时刻之差为第一时间间隔，切换结 束时刻与第二时刻之差为第二时间间隔，该第一时间间隔、第二时间间隔为预 设，可静态设置或动态设置，也可相同或不同；该第一时间间隔、第二时间间 隔也可基于经验值、业务需求、人脸识别精度等要求来设置，本申请实施例均 不对此作限定。举例来说，如图4b所示，由“结束时间+t”减去“开始时间-t”的整个过程中 的数据，需要在算法切换结束后重新使用算法B进行重新对比，使用此方法可 以将算法切换过程中的遗留的数据全部使用算法B重新跑人脸识别模型，避免 临界点之间的数据未采用切换后的算法问题。同时如果发现在算法切换时，切 换到算法B的过程时间总是长于切换到其他算法的时间，可以具体分析耗时的 原因进而提升。可见，本申请实施例中，由于考虑到切换延迟以及极短时间内算法对比的 速度，本申请实施例通过选取在第一时刻与第二时刻之间的预设密文特征作为 第一待比对数据，该第一待比对数据能够充分的覆盖切换起始时刻前后相邻时 段内参与比对的预设密文特征，以及切换结束时刻前后相邻时段内参与比对的 预设密文特征，且目标比对数据根据第一比对数据、所述第二比对数据以及所 述第三比对数据得到，因此，即便在从第二人脸识别模型切换为所述第三人脸 识别模型的过程中，因为切换延迟以及极短时间内算法对比的速度等原因可能 导致部分预设密文特征未能够基于第三人脸识别模型进行密文比对，本申请实 施例通过筛选或定位出用于重新比对的第一待比对数据后，可以将其与第一比 对数据、第二比对数据、第三比对数据进行比较，这样使得该时段的部分或全 部预设密文特征不会被遗漏于全局的人脸特征比对统计数据中，而是完成与待 识别图像的密文 比对过程。因此，采用本方案能够避免临界点之间的数据未采用切换后的算法 问题。另一些实施方式中，如果发现在算法切换时，切换到算法B的过程时间总 是长于切换到其他算法的时间，可以具体分析耗时的原因进而提升。可选的，在本申请的一些实施例中，在切换人脸识别模型之前，可能会遇 到算法规则冲突的问题，由此，本申请实施例可引入智能策略来实现自动切换 人脸识别模型的场景。例如，在第一节点中部署了A、B、C三种人脸识别模型， 其中该A、B、C三种人脸识别模型都是适用于侧脸识别的目标人脸识别模型，但是，第一节点可能无法决定切换为哪一种人脸识别模型，那么 本申请实施例为得到最优的人脸识别结果，可采用下述、、三种方 式来决策选择要切换的目标人脸识别模型：采用算法指标加权平均后最高的算法进行切换多算法平台在此前已有规律的基础上进行选择，如之前在一段时间内统计 过各算法的指标值，则采用算法指标加权平均后最高的算法进行切换。具体来 说，所述方法还包括：根据业务类型从所述多个人脸识别模型中确定第一候选集，所述第一候选 集包括至少两个第一候选模型，所述第一候选模型为与所述业务类型匹配的人 脸识别模型；获取各第一候选模型在第一历史时段内的加权指标；从所述第一候选集中确定第一目标人脸识别模型，所述第一目标人脸识别 模型为加权指标高于预设指标的候选模型；将当前的第一人脸识别模型切换为所述第一目标人脸识别模型。此外，针对同类事件，若同种算法的本次后台统计结果优于目前的切换算 法，推送给用户后用户选择了较优算法，对该较优算法进行计次；若后台推荐 较优算法计次数大于3次，后续若再发生同样事件，系统将自动选择最优算法。可见，通过基于各第一候选模型在第一历史时段内的加权指标，从所述第 一候选集中确定第一目标人脸识别模型，该第一目标人脸识别模型是经过第一 历史时段内的考验的，所以当其加权指标高于预设指标的情形下，能够使得选 中的第一目标人脸识别模型更加适配当前的人脸识别场景，且准确度更高。采用同类最新的算法如果之前没有过相似规律，则采用同类最新的算法，并在后台记录其他的 算法，即回到本方法主线；得到统计数据后推送给用户，并得出最优规律用于 下次抉择相似算法的场景。采用协同过滤推荐方式根据业务类型从所述多个人脸识别模型中确定第二候选集，所述第二候选 集包括至少两个第二候选模型，所述第二候选模型为与所述业务类型匹配的人 脸识别模型；根据协同过滤算法，从所述第二候选集中确定第二目标人脸识别模型，将 当前的第一人脸识别模型切换为所述第二目标人脸识别模型。通过上述、、三种方式，能够有效避免算法切换时有些算法冲 突后台无法选择而产生的异常，并有助于算法冲突时选择较优算法进行实时的 人脸识别。可选的，在本申请的一些实施例中，在算法使用过程中会有不同类型的算 法，如算法A支持人脸和人体识别，而算法C只支持人脸，不支持人体识别。对部署的多个人脸识别模型进行标签化管理在配置算法时，采取标签化管理，如算法A是适用于对人的识别而非适用 于对物体的识别，且A能支持的部位是人脸及人体，B是人的标签支持部位是 人脸；在该业务场景下需要人体算法，配置算法规则时前端会提示算法C不支 持人体无法切换。具体来说，对各所述人脸识别模型设置标签，所述标签用于 标识人脸识别模型适配的识别对象。一些实施方式中，所述第二人脸识别模型设置第一标签，所述第三人脸识 别模型设置第二标签；所述从第一人脸识别模型切换到第二人脸识别模型之前， 或者，所述将当前启用的所述第二人脸识别模型切换为所述第三人脸识别模型 之前，所述方法还包括：确定所述第一标签与所述第二标签是否相同；若相同，则将当前启用的所述第二人脸识别模型切换为所述第三人脸识别 模型；若不相同，则显示第一提示消息，所述第一提示消息用于提示所述第三人 脸识别模型不支持对所述待识别图像中的目标对象的检测。可见，兼容不同机构的算法类型不同的问题，避免算法标签出错导致业务 数据异常。监控业务指标及规则的异常并提示如果算法标签配置错误，本方法指出后台会监控业务指标及规则的异常， 检测结果推送给用户进行不同类算法的抉择。具体来说，在对各所述人脸识别 模型设置标签之后，所述方法还包括：获取各所述人脸识别模型在第二历史时段内的历史业务指标；根据各所述人脸识别模型在第二历史时段内的历史业务指标，确定各所述 人脸识别模型当前设置的标签是否与对应的历史业务指标匹配；若匹配度低于预设阈值，则显示第二提示消息，所述第二提示消息用于提 示匹配度低于预设阈值的嫌疑人脸识别模型的标签存在异常。可见，采用本方式，能够兼容不同机构的算法类型不同的问题，避免算法 标签出错导致业务数据异常。可选的，在本申请的一些实施例中，算法切换后，某些算法已失效，系统进行自动监测并主动切换为上次使用的算法或默认算法，此方 法不会造成业务数据及指标“断层”。算法有效期和切换时间的比较。基于当前使用的人脸识别模型的生命期动态切换新的人脸识别模型一些实施方式中，在将当前启用的所述第二人脸识别模型切换为所述第三 人脸识别模型之后，所述方法还包括：监测所述第三人脸识别模型的剩余有效时长；预测目标比对时长，所述目标比对时长是指基于所述第三人脸识别模型对 获取的待识别图像与所述人脸特征库中的预设密文特征进行比对的理论耗时；若所述目标比对时长大于所述剩余有效时长，则在目标时刻之前切换到第 四人脸识别模型；其中，所述第四人脸识别模型满足以下项中的一项：默认人脸识别模型；历史时段内启用的历史人脸识别模型；或者，与所述第二人脸识别模型的人脸识别场景相同，且剩余有效时长覆 盖剩余的理论耗时。可见，通过该方式，能够解决人脸识别装置中算法失效导致业务数据未被统计到的问题。预测待切换的人脸识别模型的生命期和理论耗时，共同确定是否动态 切换新的人脸识别模型一些实施方式中，在将当前启用的所述第二人脸识别模型切换为所述第三 人脸识别模型之前，所述方法还包括：监测所述第三人脸识别模型的剩余有效时长；预测目标比对时长，所述目标比对时长是指基于所述第三人脸识别模型对 获取的待识别图像与所述人脸特征库中的预设密文特征进行比对的理论耗时；若所述目标比对时长不大于所述剩余有效时长，则切换为所述第三人脸识 别模型。根据人脸识别模型的模型状态决策是否切换到新的人脸识别模型一些实施方式中，在将当前启用的所述第二人脸识别模型切换为所述第三 人脸识别模型之前，所述方法还包括：监测所述第三人脸识别模型的模型状态；若所述模型状态为失效状态，则选择与所述第二人脸识别模型的人脸识别 场景相同的第五人脸识别模型，并切换为所述第五人脸识别模型。可见，采用本方案能够解决算法失效导致业务数据未被统计到的问题。可选的，在本申请的一些实施例中，算法切换后，通过后台数据发现算力 的使用大量提升，针对某一算法的算力的使用值超过一定阈值后，平台进行报 警，由用户进行算法和算力的平衡抉择。具体来说，由于多算法平台采用分布式架构，各机构及各算法接入时均作 为单独的容器。可以计算各人脸识别模型在启用状态时的算力，该场景下的各 算力值＝各算法的占用率/总容器的资源。此案有该方式能够避免由于选择较优 算法而导致算力大量消耗的问题。图1至图4中任一项所对应的实施例中所提及的任一技术特征也同样适用 于本申请实施例中的图5-图8所对应的实施例，后续类似之处不再赘述。以上对本申请实施例中一种人脸识别算法切换方法进行说明，以下对执行 上述人脸图像处理方法的人脸识别装置分别进行介绍。参阅图5，图5为本申请实施例中人脸识别装置的一种结构示意图，其可 应用于智慧安防、智慧城市、智慧教育等场景。本申请实施例中的人脸识别装 置50能够实现对应于上述图1-图6任一所对应的实施例中由人脸识别装置50 所执行的人脸识别算法切换方法中的步骤。装置50实现的功能可以通过硬件实 现，也可以通过硬件执行相应的软件实现。硬件或软件包括一个或多个与上述 功能相对应的模块，所述模块可以是软件和/或硬件。所述人脸识别装置50可 包括输入输出模块501和处理模块502。所述输入输出模块501和处理模块502 的功能实现可参考图1-图4任一所对应的实施例中所执行的操作，此处不作赘述。一些实施方式中，该输入输出模块501可用于当从第一人脸识别模型切换 到第二人脸识别模型后，获取多个时间单位内所述第二人脸识别模型的第一指 标数据、第三人脸识别模型的第二指标数据，所述第三人脸识别模型与所述第 二人脸识别模型的人脸识别场景相同；所述处理模块502可用于获取所述第一指标数据的第一加权平均指标、所 述第二指标数据的第二加权平均指标；以一个时间单位为比较单位，获取各时 间单位内第一加权平均指标低于第二加权平均指标的实际次数；若所述实际次 数高于预设次数，则将当前启用的所述第二人脸识别模型切换为所述第三人脸 识别模型；基于所述第三人脸识别模型对获取的待识别图像与所述人脸特征库 中的预设密文特征进行比对。一些实施方式中，所述处理模块502将当前启用的所述第二人脸识别模型 切换为所述第三人脸识别模型时，还用于：获取将当前启用的所述第二人脸识别模型切换为所述第三人脸识别模型的 切换起始时刻、切换结束时刻；获取第一待比对数据，所述第一待比对数据为所述人脸特征库中在所述第 一时刻与所述第二时刻之间的预设密文特征；所述第一时刻提前于所述切换起 始时刻，所述第二时刻滞后于所述切换结束时刻；基于所述第三人脸识别模型，将所述待识别图像和所述第一待比对数据进 行比对，得到第三比对数据；通过所述输入输出模块501获取第一比对数据、第二比对数据，其中，所 述第一比对数据为在所述切换起始时刻之前启用所述第二人脸识别模型对待识 别图像进行人脸识别的历史数据；所述第二比对数据为在所述切换结束时刻之 后启用所述第二人脸识别模型对待识别图像进行人脸识别的历史数据；根据所述第一比对数据、所述第二比对数据以及所述第三比对数据，得到 目标比对数据。一些实施方式中，所述处理模块502还用于：根据业务类型从所述多个人脸识别模型中确定第一候选集，所述第一候选 集包括至少两个第一候选模型，所述第一候选模型为与所述业务类型匹配的人 脸识别模型；获取各第一候选模型在第一历史时段内的加权指标；从所述第一候选集中确定第一目标人脸识别模型，所述第一目标人脸识别 模型为加权指标高于预设指标的候选模型；将当前的第一人脸识别模型切换为所述第一目标人脸识别模型。一些实施方式中，所述处理模块502还用于：根据业务类型从所述多个人脸识别模型中确定第二候选集，所述第二候选 集包括至少两个第二候选模型，所述第二候选模型为与所述业务类型匹配的人 脸识别模型；根据协同过滤算法，从所述第二候选集中确定第二目标人脸识别模型，将 当前的第一人脸识别模型切换为所述第二目标人脸识别模型。一些实施方式中，所述处理模块502还用于：对各所述人脸识别模型设置标签，所述标签用于标识人脸识别模型适配的 识别对象。一些实施方式中，所述第二人脸识别模型设置第一标签，所述第三人脸识 别模型设置第二标签；所述处理模块502将第一人脸识别模型切换到第二人脸 识别模型之前，或者，所述将当前启用的所述第二人脸识别模型切换为所述第 三人脸识别模型之前，还用于：确定所述第一标签与所述第二标签是否相同；若相同，则将当前启用的所述第二人脸识别模型切换为所述第三人脸识别 模型；若不相同，则显示第一提示消息，所述第一提示消息用于提示所述第三人 脸识别模型不支持对所述待识别图像中的目标对象的检测。一些实施方式中，所述处理模块502对各所述人脸识别模型设置标签之后， 还用于：通过所述输入输出模块501获取各所述人脸识别模型在第二历史时段内的 历史业务指标；根据各所述人脸识别模型在第二历史时段内的历史业务指标，确定各所述 人脸识别模型当前设置的标签是否与对应的历史业务指标匹配；若匹配度低于预设阈值，则显示第二提示消息，所述第二提示消息用于提 示匹配度低于预设阈值的嫌疑人脸识别模型的标签存在异常。一些实施方式中，所述处理模块502将当前启用的所述第二人脸识别模型 切换为所述第三人脸识别模型之后，还用于：监测所述第三人脸识别模型的剩余有效时长；预测目标比对时长，所述目标比对时长是指基于所述第三人脸识别模型对 获取的待识别图像与所述人脸特征库中的预设密文特征进行比对的理论耗时；若所述目标比对时长大于所述剩余有效时长，则在目标时刻之前切换到第 四人脸识别模型；其中，所述第四人脸识别模型满足以下项中的一项：默认人脸识别模型；历史时段内启用的历史人脸识别模型；或者，与所述第二人脸识别模型的人脸识别场景相同，且剩余有效时长覆 盖剩余的理论耗时。一些实施方式中，所述处理模块502将当前启用的所述第二人脸识别模型 切换为所述第三人脸识别模型之前，还用于：监测所述第三人脸识别模型的剩余有效时长；预测目标比对时长，所述目标比对时长是指基于所述第三人脸识别模型对 获取的待识别图像与所述人脸特征库中的预设密文特征进行比对的理论耗时；若所述目标比对时长不大于所述剩余有效时长，则切换为所述第三人脸识 别模型。一些实施方式中，所述处理模块502将当前启用的所述第二人脸识别模型 切换为所述第三人脸识别模型之前，还用于：监测所述第三人脸识别模型的模型状态；若所述模型状态为失效状态，则选择与所述第二人脸识别模型的人脸识别 场景相同的第五人脸识别模型，并切换为所述第五人脸识别模型。可见，通过本方案，在智慧安防、智慧城市、智慧教育等场景中，在第一 节点中部署多个人脸识别模型，基于当前从多个人脸识别模型中确定的目标人 脸识别模型对待识别图像进行特征提取后，即可直接与目标人脸识别模型对应 的目标人脸特征库进行匹配得到用于识别用户的目标相似度密文。当从第一人 脸识别模型切换到第二人脸识别模型后，获取多个时间单位内所述第一人脸识 别模型的第一指标数据、第三人脸识别模型的第二指标数据，由于第三人脸识 别模型与所述第二人脸识别模型的人脸识别场景相同，且以一个时间单位为比 较单位，获取各时间单位内第一加权平均指标低于第二加权平均指标的实际次 数，因此，当实际次数高于预设次数时，可以将当前启用的所述第二人脸识别 模型切换为所述第三人脸识别模型。通过该方式切换的人脸识别场景既能够适 配当前情形，又充分的参考前述第一、第二人脸识别模型的指标数据，所以切 换的第三人脸识别模型更加适配当前的人脸识别需求，且无缝衔接的进行切换。 进而，一方面中，一定程度上能够灵活调度更加适配的人脸识别算法，可以最 大化规避当前深度学习的不鲁棒不可扩展性质，提高实际场景人脸识别的准确 性；同时极大的降低了用户采购成本；另一方面中，能够更准确的获取在该切 换期间、以及切换之后的指标数据。上面从模块化功能实体的角度对本申请实施例中的人脸识别装置进行了描 述，下面从硬件处理的角度分别对本申请实施例中的人脸识别装置进行描述。需要说明的是，在本申请实施例图5所示的实施例中的输入输出 模块501对应的实体设备可以为输入/输出单元、收发器、射频电路、 通信模块和输出接口等，处理模块502对应的实体设备可以为处理器。 图5所示的图像处理装置50可以具有如图6所示的结构，当图5所 示的图像处理装置50具有如图6所示的结构时，图6中的处理器和 收发器能够实现前述对应该图像处理装置50的装置实施例提供的输 入输出模块501和处理模块502相同或相似的功能，图6中的存储器 存储处理器执行上述人脸图像处理方法时需要调用的计算机程序。图5所示的人脸识别装置40可以具有如图6所示的结构，当图5所示的人 脸识别装置40具有如图6所示的结构时，图6中的处理器能够实现前述对应该 装置的装置实施例提供的所述第一处理模块和所述第二处理模块相同或相似的 功能，图6中的收发器能够实现前述对应该装置的装置实施例提供的所述第一 收发模块、所述第一处理模块相同或相似的功能实现前述对应该装置的装置实 施例提供的所述第一收发模块、所述第一处理模块、所述第二收发模块和所述 第二处理模块相同或相似的功能，图6中的存储器存储处理器执行上述人脸识 别的方法时需要调用的计算机程序。在本申请实施例图5所示的实施例中的所 述第一收发模块和所示第二收发模块所对应的实体设备可以为输入输出接口， 所述第一处理模块和所述第二处理模块对应的实体设备可以为处理器。本申请实施例还提供了另一种终端设备，如图7所示，为了便于说明，仅 示出了与本申请实施例相关的部分，具体技术细节未揭示的，请参照本申请实 施例方法部分。该终端设备可以为包括手机、平板电脑、个人数字助理、销售终端、车载电脑等任意终端设备，以终端为手机为例： 图7示出的是与本申请实施例提供的终端设备相关的手机的部分结构的框 图。参考图7，手机包括：射频 电路610、存储器620、输入单元630、显示单元640、传感器650、音频电路 660、无线保真模块670、处 理器680、以及电源690等部件。本领域技术人员可以理解，图7中示出的手 机结构并不构成对手机的限定，可以包括比图示更多或更少的部件，或者组合 某些部件，或者不同的部件布置。下面结合图7对手机的各个构成部件进行具体的介绍：RF电路610可用于收发信息或通话过程中，信号的接收和发送，特别地， 将基站的下行信息接收后，给处理器680处理；另外，将设计上行的数据发送 给基站。通常，RF电路610包括但不限于天线、至少一个放大器、收发信机、 耦合器、低噪声放大器、 双工器等。此外，RF电路610还可以通过无线通信与网络和其他设备通信。上 述无线通信可以使用任一通信标准或协议，包括但不限于全球移动通讯系统 、通用分组无线服务、 码分多址、宽 带码分多址、长期演进、 电子邮件、短消息服务 等。存储器620可用于存储软件程序以及模块，处理器680通过运行存储在存 储器620的软件程序以及模块，从而执行手机的各种功能应用以及数据处理。 存储器620可主要包括存储程序区和存储数据区，其中，存储程序区可存储操 作系统、至少一个功能所需的应用程序 等；存储数据区可存储根据手机的使用所创建的数据等。此外，存储器620可以包括高速随机存取存储器，还可以包括非易失 性存储器，例如至少一个磁盘存储器件、闪存器件、或其他易失性固态存储器 件。输入单元630可用于接收输入的数字或字符信息，以及产生与手机的用户 设置以及功能控制有关的键信号输入。具体地，输入单元630可包括触控面板 631以及其他输入设备632。触控面板631，也称为触摸屏，可收集用户在其上 或附近的触摸操作，并根据预先设定的程式驱动相应的 连接装置。可选的，触控面板631可包括触摸检测装置和触摸控制器两个部分。 其中，触摸检测装置检测用户的触摸方位，并检测触摸操作带来的信号，将信 号传送给触摸控制器；触摸控制器从触摸检测装置上接收触摸信息，并将它转换成触点坐标，再送给处理器680，并能接收处理器680发来的命令并加以执 行。此外，可以采用电阻式、电容式、红外线以及表面声波等多种类型实现触 控面板631。除了触控面板631，输入单元630还可以包括其他输入设备632。 具体地，其他输入设备632可以包括但不限于物理键盘、功能键、轨迹球、鼠标、操作杆等中的一种或多种。显示单元640可用于显示由用户输入的信息或提供给用户的信息以及手机 的各种菜单。显示单元640可包括显示面板641，可选的，可以采用液晶显示 器、有机发光二极管等形式来配置显示面 板641。进一步的，触控面板631可覆盖显示面板641，当触控面板631检测到 在其上或附近的触摸操作后，传送给处理器680以确定触摸事件的类型，随后 处理器680根据触摸事件的类型在显示面板641上提供相应的视觉输出。虽然 在图6中，触控面板631与显示面板641是作为两个独立的部件来实现手机的 输入和输入功能，但是在某些实施例中，可以将触控面板631与显示面板641 集成而实现手机的输入和输出功能。手机还可包括至少一种传感器650，比如光传感器、运动传感器以及其他 传感器。具体地，光传感器可包括环境光传感器及接近传感器，其中，环境光 传感器可根据环境光线的明暗来调节显示面板641的亮度，接近传感器可在手 机移动到耳边时，关闭显示面板641和/或背光。作为运动传感器的一种，加速 计传感器可检测各个方向上加速度的大小，静止时可检测出重 力的大小及方向，可用于识别手机姿态的应用、振动识别相关功能等；至于手机还可 配置的陀螺仪、气压计、湿度计、温度计、红外线传感器等其他传感器，在此 不再赘述。音频电路660、扬声器661，传声器662可提供用户与手机之间的音频接口。 音频电路660可将接收到的音频数据转换后的电信号，传输到扬声器661，由 扬声器661转换为声音信号输出；另一方面，传声器662将收集的声音信号转 换为电信号，由音频电路660接收后转换为音频数据，再将音频数据输出处理 器680处理后，经RF电路610以发送给比如另一手机，或者将音频数据输出 至存储器620以便进一步处理。Wi-Fi属于短距离无线传输技术，手机通过Wi-Fi模块670可以帮助用户收 发电子邮件、浏览网页和访问流式媒体等，它为用户提供了无线的宽带互联网 访问。虽然图6示出了W-iFi模块670，但是可以理解的是，其并不属于手机 的必须构成，完全可以根据需要在不改变申请的本质的范围内而省略。处理器680是手机的控制中心，利用各种接口和线路连接整个手机的各个 部分，通过运行或执行存储在存储器620内的软件程序和/或模块，以及调用存 储在存储器620内的数据，执行手机的各种功能和处理数据，从而对手机进行 整体监控。可选的，处理器680可包括一个或多个处理单元；优选的，处理器 680可集成应用处理器和调制解调处理器，其中，应用处理器主要处理操作系 统、用户界面和应用程序等，调制解调处理器主要处理无线通信。可以理解的 是，上述调制解调处理器也可以不集成到处理器680中。手机还包括给各个部件供电的电源690，电源可以通过电源管 理系统与处理器680逻辑相连，从而通过电源管理系统实现管理充电、放电、 以及功耗管理等功能。尽管未示出，手机还可以包括摄像头、蓝牙模块等，在此不再赘述。在本申请实施例中，该手机所包括的处理器680还具有控制执行以上由图 5所示的第一节点的方法流程。图8是本申请实施例提供的一种服务器结构示意图，该服务器720可因配 置或性能不同而产生比较大的差异，可以包括一个或一个以上中央处理器722和存储器732，一个或一个以上存储应用程序742或数据744的存 储介质730。其中，存储器732和存储介 质730可以是短暂存储或持久存储。存储在存储介质730的程序可以包括一个 或一个以上模块，每个模块可以包括对服务器中的一系列指令操 作。更进一步地，中央处理器722可以设置为与存储介质730通信，在服务器 720上执行存储介质730中的一系列指令操作。服务器720还可以包括一个或一个以上电源726，一个或一个以上有线或 无线网络接口750，一个或一个以上输入输出接口758，和/或，一个或一个以 上操作系统741，例如Windows Server，Mac OS X，Unix,Linux，FreeBSD等 等。上述实施例中由服务器所执行的步骤可以基于该图8所示的服务器720的 结构。例如上述实施例中由图5所示的第一节点所执行的步骤可以基于该图8 所示的服务器结构。例如，所述处理器7202通过调用存储器732中的指令，执 行以下操作：当从第一人脸识别模型切换到第二人脸识别模型后，通过所述输入输出接 口758获取多个时间单位内所述第一人脸识别模型的第一指标数据、第三人脸 识别模型的第二指标数据，所述第三人脸识别模型与所述第二人脸识别模型的 人脸识别场景相同；获取所述第一指标数据的第一加权平均指标、所述第二指标数据的第二加 权平均指标；以一个时间单位为比较单位，获取各时间单位内第一加权平均指 标低于第二加权平均指标的实际次数；若所述实际次数高于预设次数，则将当 前启用的所述第二人脸识别模型切换为所述第三人脸识别模型；基于所述第三 人脸识别模型对获取的待识别图像与所述人脸特征库中的预设密文特征进行比 对。在上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详 述的部分，可以参见其他实施例的相关描述。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述 的系统，装置和模块的具体工作过程，可以参考前述方法实施例中的对应过程， 在此不再赘述。在本申请实施例所提供的几个实施例中，应该理解到，所揭露的系统，装 置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是 示意性的，例如，所述模块的划分，仅仅为一种逻辑功能划分，实际实现时可 以有另外的划分方式，例如多个模块或组件可以结合或者可以集成到另一个系 统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦 合或直接耦合或通信连接可以是通过一些接口，装置或模块的间接耦合或通信 连接，可以是电性，机械或其它的形式。所述作为分离部件说明的模块可以是或者也可以不是物理上分开的，作为 模块显示的部件可以是或者也可以不是物理模块，即可以位于一个地方，或者 也可以分布到多个网络模块上。可以根据实际的需要选择其中的部分或者全部 模块来实现本实施例方案的目的。另外，在本申请实施例各个实施例中的各功能模块可以集成在一个处理模 块中，也可以是各个模块单独物理存在，也可以两个或两个以上模块集成在一 个模块中。上述集成的模块既可以采用硬件的形式实现，也可以采用软件功能 模块的形式实现。所述集成的模块如果以软件功能模块的形式实现并作为独立 的产品销售或使用时，可以存储在一个计算机可读取存储介质中。在上述实施例中，可以全部或部分地通过软件、硬件、固件或者其任意组 合来实现。当使用软件实现时，可以全部或部分地以计算机程序产品的形式实 现。所述计算机程序产品包括一个或多个计算机指令。在计算机上加载和执行 所述计算机计算机程序时，全部或部分地产生按照本申请实施例所述的流程或 功能。所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可 编程装置。所述计算机指令可以存储在计算机可读存储介质中，或者从一个计 算机可读存储介质向另一计算机可读存储介质传输，例如，所述计算机指令可 以从一个网站站点、计算机、服务器或数据中心通过有线)或无线方式向另一个网 站站点、计算机、服务器或数据中心进行传输。所述计算机可读存储介质可以 是计算机能够存储的任何可用介质或者是包含一个或多个可用介质集成的服务 器、数据中心等数据存储设备。所述可用介质可以是磁性介质，、光介质、或者半导体介质)等。以上对本申请实施例所提供的技术方案进行了详细介绍，本申请实施例中 应用了具体个例对本申请实施例的原理及实施方式进行了阐述，以上实施例的 说明只是用于帮助理解本申请实施例的方法及其核心思想；同时，对于本领域 的一般技术人员，依据本申请实施例的思想，在具体实施方式及应用范围上均 会有改变之处，综上所述，本说明书内容不应理解为对本申请实施例的限制。
