标题title
一种基于数字孪生的轮毂机加工尺寸误差修正方法
摘要abst
本发明公开了一种基于数字孪生的轮毂机加工尺寸误差修正方法，首先构建轮毂机加工数字孪生系统，实现生产状态实时监控和机床远程控制；其次，构建加工规则知识图谱普，实现误差修正加工经验知识的沉淀与标准化；然后，提出基于差分进化的尺寸误差修正模型，计算误差修正问题最优解。本发明涉及尺寸误差修正及数字孪生技术领域。该基于数字孪生的轮毂机加工尺寸误差修正方法，通过将本发明提出的基于数字孪生的轮毂机加工尺寸误差修正方法在某轮毂机加工产线实际应用，并根据生产活动中积累的数据进行实验验证，证明该方法有效提高了机加工尺寸误差修正精准度。
权利要求书clms
1.一种基于数字孪生的轮毂机加工尺寸误差修正方法，其特征在于：具体包括下述步骤：A1、机加工数字孪生系统总框架：参考数字孪生五维模型构建轮毂机加工数字孪生系统框架，其中包括物理实体、孪生模型、孪生数据、功能服务以及各部分之间的传输连接；A2、孪生模型构建：首先使用3dsMAX和SolidWorks构建虚拟设备模型并使用unity3D搭建孪生虚拟场景，然后使用有限状态机定义虚拟模型的行为模型并编写相应脚本；A3、传输通讯架构搭建：基于OPCUA协议建立实体设备和孪生模型之间的数据传输通讯基础，并使用MySQL搭建孪生数据库；A4、加工规则知识图谱构建：加工规则知识图谱明确加工刀具和尺寸特征之间的影响关系，用于指导误差修正的方案计算，其构建过程包括构建规则三元组和基于岭回归模型拟合关系系数；A5、基于差分进化的尺寸误差修正模型构建：首先根据尺寸误差修正问题建立数学模型，然后使用差分进化算法求解最优解，同时使用惩罚项处理模型约束，最后根据最优解生成修正方案。2.根据权利要求1所述的一种基于数字孪生的轮毂机加工尺寸误差修正方法，其特征在于：所述步骤A4中构建加工规则知识图谱模型包括以下步骤：T1、构建规则三元组：从文档中提取规则所涉及的刀具和尺寸特征信息，组成刀具实体节点和尺寸特征实体节点，依据机理知识，建立实体节点关系的规则链表格，根据规则链表格，构建规则三元组＜刀具C，影响，尺寸特征F＞；T2、岭回归模型拟合关系系数：使用岭回归模型计算规则三元组中刀具与尺寸特征之间的关系系数；T3、构建知识图谱：将步骤T1和步骤T2中得到的规则三元组和关系系数合并为加工规则知识图谱并存入数据库，并使用Neo4j进行图谱可视化工作。3.根据权利要求2所述的一种基于数字孪生的轮毂机加工尺寸误差修正方法，其特征在于：所述步骤T2中岭回归模型拟合关系系数的过程如下：第i个尺寸特征测量值yi的变化值Δyi由刀具调整值kj和对应的关系系数eji决定，其计算公式为：其中，h是调整涉及的刀具总数，kj表示第j把刀具的调整值，eji表示第j把刀具与第i个尺寸特征的关系系数，若尺寸特征yi相关的记录数据有m份，则构建方程组：其中kjt表示第j把刀具的在第t份记录数据中的调整值，由以上方程组构建线性回归模型为：y＝Kβ+ε；其中y＝T，β＝T，ε＝T表示均值为0的随机误差向量，在KTK可逆时，可得估计β＝-1KTy；在实际生产中，某组特殊刀具的调整需要保持一致，即存在多列kjt相同的情况导致KTK不可逆，为了解决上述多重共线性问题，通过如下岭回归估计求得系数：β＝-1KTy；其中，I是单位矩阵，λ为岭参数，通过交叉验证法确定。4.根据权利要求1所述的一种基于数字孪生的轮毂机加工尺寸误差修正方法，其特征在于：所述步骤A5中基于差分进化的尺寸误差修正模型构建步骤如下：E1、根据尺寸误差修正问题建立数学模型：求解误差修正方案属于单目标优化问题，即求解刀具调整值k向量，使尺寸特征的预期值在上限ui和下限li之间，同时使接近标准值ci，i＝1,2,…,n，问题已知为当前n个尺寸特征的初始测量值mi和刀具与各尺寸特征的关系系数eji；规划模型目标函数为：其中n是调整涉及的尺寸特征总数，ci表示第i个尺寸特征标准值，表示第i个尺寸特征预期值，其计算公式为：其中mi表示第i个尺寸特征初始测量值，h是调整涉及的刀具总数，kj表示第j把刀具的调整值，eji表示第j把刀具与第i个尺寸特征的关系系数，同时，根据产线实际情况，使调整的刀具数量尽量少，结合上述两个公式可得修正后的目标函数为：其中，a为常数值，依据实际情况赋值，预期尺寸特征需要限制在上下限之内，因此约束条件表示为：其中，li表示第i个尺寸特征下限，ui表示第i个尺寸特征上限；E2、差分进化算法求解；E3、使用惩罚项处理约束：当规划模型无解时，通过增加惩罚项将模型中的约束项转化到目标函数中，其具体做法为，将规划问题模型的目标函数改写为：其中f表示原目标函数，pi和qi分别表示原尺寸下限和尺寸上限约束条件，σ表示罚因子σi组成的向量，该式表示，将当前解超出约束的部分算入目标函数的计算中，从而将有约束问题转化为无约束问题；根据上式，构建带有惩罚项的规划模型，结合步骤E2中的公式得到新的目标函数式为：其中σi为罚因子，其取值代表约束对模型求解过程的影响程度，每个尺寸特征yi对应一个罚因子σi，σi越小，则该特征yi相关的约束对模型求解的影响越小。5.根据权利要求4所述的一种基于数字孪生的轮毂机加工尺寸误差修正方法，其特征在于：所述步骤E2中差分进化算法思想来源为遗传算法，是一种连续变量优化算法，用于求解多维空间中整体最优解。6.根据权利要求5所述的一种基于数字孪生的轮毂机加工尺寸误差修正方法，其特征在于：所述差分进化算法具体步骤如下：U1、使用实数编码方式初始化候选解种群；U2、对当前种群进行评估分析，包括记录其最优个体和利用线性尺度变换计算个体适应度；U3、判断是否满足停止条件，包括是否超过最大进化代数，进化停滞的种群是否超过上限，若满足则终止算法，并取最后一代的最优个体作为最优解输出；U4、对当前种群进行差分变异，使用DE/best/1策略得到变异个体，其中差分变异缩放因子取0.5；U5、将当前种群和变异个体合并，利用指数交叉法产生新的交叉个体；U6、在当前种群和迭代种群之间采用精英保留策略得到新一代种群；U7、进入下一轮进化，回到步骤U2。7.根据权利要求4所述的一种基于数字孪生的轮毂机加工尺寸误差修正方法，其特征在于：为了确定σi的取值，需要评估各个尺寸特征在误差修正中的重要程度，使用α∈的整数值代表尺寸特征的重要程度，当αi≠10时，令σi＝αi。当αi＝10时，代表该第i个尺寸特征为关键尺寸，令σi＝0且在新构建的规划模型中维持yi≥li和yi≤ui的约束条件。8.根据权利要求1所述的一种基于数字孪生的轮毂机加工尺寸误差修正方法，其特征在于：所述步骤A2中使用有限状态机定义虚拟加工设备模型的行为模型具体转换方式如下，其中Si表示模型状态，ei为触发事件，ai为响应动作：V1、系统开始运行时，加工设备初始状态为空闲待机状态S0；V2、当轮毂坯料到达指定加工位置时，触发e1，加工设备进入正常作业状态S1，开始进行铣削加工作业a1；V3、若加工顺利完成，触发e2，则加工设备进入加工完成状态S3，发送加工完成信号a2，以通知机器人进行取件操作，收到取件完成信号e3后，加工设备返回空闲等待状态S0，发送等待坯料信号a3；V4、若加工过程中出现异常情况，加工设备收到设备异常信号e4，则暂停加工，设备进入中断，并发送异常处理信号a4，通知服务端根据异常信息处理，此时加工设备进入阻塞等待状态S2；V5、若异常顺利处理，收到异常处理完毕信号e5，则继续加工，恢复中断前状态a5，加工设备恢复正常作业状态S1，否则，当异常无法处理，需要中断当前加工，则发送取件信号e2，并在取件完成收到信号e3后，加工设备进入空闲待机状态S0。
说明书desc
技术领域本发明涉及尺寸误差修正及数字孪生技术领域，具体为一种基于数字孪生的轮毂机加工尺寸误差修正方法。背景技术制造业向数字化、智能化方向快速发展。近年来，中国铝合金轮毂产销量已占全球60％以上，已成为铝合金轮毂制造大国，如何利用新一代信息技术加快从轮毂制造大国向制造强国转变成为关键。铝合金轮毂生产主要有熔炼、压铸、热处理、机加工和涂装等工序。当前，轮毂产线基本普及了数控机床、工业机器人等自动化设备。但是，一些关键工序仍然依赖人工方法，例如机加工尺寸误差修正方案的计算和下发，造成生产过程难以标准化且结果精准度较低。因此，如何提高机加工尺寸误差修正的标准化、智能化程度，成为实现轮毂产业智能制造的关键环节。数字孪生技术集成了多物理、多尺度、多学科属性，具有实时同步、忠实映射、高保真度特性，是实现信息物理融合的有效手段。数字孪生技术为构建数字化、智能化的产线提供了全新解决方案，已在工业领域得到了越来越多的关注。文章.计算机集成制造系统，2021，27：3391-3402.]针对数控机床高速高精加工过程中轮廓误差控制难问题，提出一种基于数字孪生的轮廓误差抑制方法，实现对时变运动控制参数下多轴进给系统的插补控制；文章.计算机工程与应用，2022，58：245-257.]结合数字孪生技术，提出一种基于多机器人运动控制的断路器柔性自动化车间装配方案，优化了断路器装配车间的产线结构和作业方法。数字孪生技术成为解决工业各个领域的实际问题可靠的途径之一。发明内容解决的技术问题针对现有技术的不足，本发明提供了一种基于数字孪生的轮毂机加工尺寸误差修正方法，该方法构建轮毂机加工数字孪生系统实现设备状态实时监控和远程控制；同时建立基于差分进化的尺寸误差修正模型，有效提高了机加工尺寸误差修正的精准度。技术方案为实现以上目的，本发明通过以下技术方案予以实现：一种基于数字孪生的轮毂机加工尺寸误差修正方法，具体包括下述步骤：A1、机加工数字孪生系统总框架：参考数字孪生五维模型构建轮毂机加工数字孪生系统框架，其中包括物理实体、孪生模型、孪生数据、功能服务以及各部分之间的传输连接；A2、孪生模型构建：首先使用3dsMAX和SolidWorks构建虚拟设备模型并使用unity3D搭建孪生虚拟场景，然后使用有限状态机定义虚拟模型的行为模型并编写相应脚本；A3、传输通讯架构搭建：基于OPCUA协议建立实体设备和孪生模型之间的数据传输通讯基础，并使用MySQL搭建孪生数据库；A4、加工规则知识图谱构建：加工规则知识图谱明确加工刀具和尺寸特征之间的影响关系，用于指导误差修正的方案计算，其构建过程包括构建规则三元组和基于岭回归模型拟合关系系数；A5、基于差分进化的尺寸误差修正模型构建：首先根据尺寸误差修正问题建立数学模型，然后使用差分进化算法求解最优解，同时使用惩罚项处理模型约束，最后根据最优解生成修正方案。优选的，所述步骤A4中构建加工规则知识图谱模型包括以下步骤：T1、构建规则三元组：从文档中提取规则所涉及的刀具和尺寸特征信息，组成刀具实体节点和尺寸特征实体节点，依据机理知识，建立实体节点关系的规则链表格，根据规则链表格，构建规则三元组＜刀具C，影响，尺寸特征F＞；T2、岭回归模型拟合关系系数：使用岭回归模型计算规则三元组中刀具与尺寸特征之间的关系系数；T3、构建知识图谱：将步骤T1和步骤T2中得到的规则三元组和关系系数合并为加工规则知识图谱并存入数据库，并使用Neo4j进行图谱可视化工作。优选的，所述步骤T2中岭回归模型拟合关系系数的过程如下：第i个尺寸特征测量值yi的变化值Δyi由刀具调整值kj和对应的关系系数 eji决定，其计算公式为：其中，h是调整涉及的刀具总数，kj表示第j把刀具的调整值，eji表示第j把刀具与第i个尺寸特征的关系系数，若尺寸特征yi相关的记录数据有m份，则构建方程组：其中kjt表示第j把刀具的在第t份记录数据中的调整值，由以上方程组构建线性回归模型为：y＝Kβ+ε；其中y＝T，β＝T，ε＝T表示均值为0的随机误差向量，在 KTK可逆时，可得估计β＝-1KTy；在实际生产中，某组特殊刀具的调整需要保持一致，即存在多列kjt相同的情况导致KTK不可逆，为了解决上述多重共线性问题，通过如下岭回归估计求得系数：β＝-1KTy；其中，I是单位矩阵，λ为岭参数，通过交叉验证法确定。优选的，所述步骤A5中基于差分进化的尺寸误差修正模型构建步骤如下：F1、根据尺寸误差修正问题建立数学模型：求解误差修正方案属于单目标优化问题，即求解刀具调整值k向量，使尺寸特征的预期值在上限ui和下限li之间，同时使接近标准值ci，i＝1，2，…，n，问题已知为当前n个尺寸特征的初始测量值mi和刀具与各尺寸特征的关系系数eji；规划模型目标函数为：其中n是调整涉及的尺寸特征总数，ci表示第i个尺寸特征标准值，表示第i个尺寸特征预期值，其计算公式为：其中mi表示第i个尺寸特征初始测量值，h是调整涉及的刀具总数，kj表示第j把刀具的调整值，eji表示第j把刀具与第i个尺寸特征的关系系数，同时，根据产线实际情况，使调整的刀具数量尽量少，结合上述两个公式可得修正后的目标函数为：其中，a为常数值，依据实际情况赋值，预期尺寸特征需要限制在上下限之内，因此约束条件表示为：其中，li表示第i个尺寸特征下限，ui表示第i个尺寸特征上限；E2、差分进化算法求解；E3、使用惩罚项处理约束：当规划模型无解时，通过增加惩罚项将模型中的约束项转化到目标函数中，达到减小模型约束进而增大解的可行域的目的。其具体做法为，将规划问题模型的目标函数改写为：其中f表示原目标函数，pi和qi分别表示原尺寸下限和尺寸上限约束条件，σ表示罚因子σi组成的向量，该式表示，将当前解超出约束的部分算入目标函数的计算中，从而将有约束问题转化为无约束问题；根据上式，构建带有惩罚项的规划模型，结合步骤E2中的公式得到新的目标函数式为：其中σi为罚因子，其取值代表约束对模型求解过程的影响程度，每个尺寸特征yi对应一个罚因子σi，σi越小，则该特征yi相关的约束对模型求解的影响越小。优选的，所述步骤E2中差分进化算法思想来源为遗传算法，是一种连续变量优化算法，用于求解多维空间中整体最优解。优选的，所述差分进化算法具体步骤如下：U1、使用实数编码方式初始化候选解种群；U2、对当前种群进行评估分析，包括记录其最优个体和利用线性尺度变换计算个体适应度；U3、判断是否满足停止条件，包括是否超过最大进化代数，进化停滞的种群是否超过上限，若满足则终止算法，并取最后一代的最优个体作为最优解输出；U4、对当前种群进行差分变异，使用DE/best/1策略得到变异个体，其中差分变异缩放因子取0.5；U5、将当前种群和变异个体合并，利用指数交叉法产生新的交叉个体；U6、在当前种群和迭代种群之间采用精英保留策略得到新一代种群；U7、进入下一轮进化，回到步骤U2。优选的，为了确定σi的取值，需要评估各个尺寸特征在误差修正中的重要程度，使用α∈的整数值代表尺寸特征的重要程度，当αi≠10时，令σi＝αi。当αi＝10时，代表该第i个尺寸特征为关键尺寸，令σi＝0且在新构建的规划模型中维持yi≥li和yi≤ui的约束条件。优选的，所述步骤A2中使用有限状态机定义虚拟加工设备模型的行为模型具体转换方式如下，其中Si表示模型状态，ei为触发事件，ai为响应动作：V1、系统开始运行时，加工设备初始状态为空闲待机状态S0；V2、当轮毂坯料到达指定加工位置时，触发e1，加工设备进入正常作业状态S1，开始进行铣削加工作业a1；V3、若加工顺利完成，触发e2，则加工设备进入加工完成状态S3，发送加工完成信号a2，以通知机器人进行取件操作，收到取件完成信号e3后，加工设备返回空闲等待状态S0，发送等待坯料信号a3；V4、若加工过程中出现异常情况，加工设备收到设备异常信号e4，则暂停加工，设备进入中断，并发送异常处理信号a4，通知服务端根据异常信息处理，此时加工设备进入阻塞等待状态S2；V5、若异常顺利处理，收到异常处理完毕信号e5，则继续加工，恢复中断前状态a5，加工设备恢复正常作业状态S1，否则，当异常无法处理，需要中断当前加工，则发送取件信号e2，并在取件完成收到信号e3后，加工设备进入空闲待机状态S0。有益效果本发明提供了一种基于数字孪生的轮毂机加工尺寸误差修正方法。与现有技术相比具备以下有益效果：、该基于数字孪生的轮毂机加工尺寸误差修正方法，首先构建轮毂机加工数字孪生系统，实现生产状态实时监控和机床远程控制；其次，构建加工规则知识图谱普，实现误差修正加工经验知识的沉淀与标准化；然后，提出基于差分进化的尺寸误差修正模型，计算误差修正问题最优解。通过某轮毂产线数据实际应用，证明该方法有效提高了机加工尺寸误差修正精准度。、该基于数字孪生的轮毂机加工尺寸误差修正方法，其与轮毂机加工产线传统的误差修正方法相比：构建轮毂机加工数字孪生系统，该系统可实现以虚映实和以虚控实，通过虚拟模型和生产设备的实时同步实现生产状态实时监控，通过系统通讯架构完成数据指令下发至生产设备实现远程控制，提升了生产效率；构建加工规则知识图谱，结合经验知识与历史数据构建加工规则三元组并拟合规则关系系数，进而构建出加工规则知识图谱，从而使原本企业无法有效掌握的误差修正加工规则相关的知识经验沉淀下来，一方面为规则知识的继续积累提供了标准化方法，另一方面，提升了企业的核心竞争力；提出基于差分进化的尺寸误差修正模型，通过数学分析将问题建模并使用基于差分进化的求解算法计算问题最优解，有效提升了误差修正问题的精准度。、该基于数字孪生的轮毂机加工尺寸误差修正方法，通过将本发明提出的基于数字孪生的轮毂机加工尺寸误差修正方法在某轮毂机加工产线实际应用，并根据生产活动中积累的数据进行实验验证，证明该方法有效提高了机加工尺寸误差修正精准度。附图说明图1是本发明轮毂机加工数字孪生系统框架图；图2是本发明加工设备行为模型图；图3是本发明数据连接通讯架构图；图4是本发明加工规则知识图谱构建过程图；图5是本发明基于差分进化的尺寸误差修正模型求解流程图；图6是本发明误差修正方法实例验证结果对比图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。请参阅图1-6，本发明实施例提供一种技术方案：一种基于数字孪生的轮毂机加工尺寸误差修正方法，具体包括下述步骤：A1：参考数字孪生五维模型构建轮毂机加工数字孪生系统框架如图1所示，其中包括物理实体、孪生模型、孪生数据、功能服务以及各部分之间的传输连接；其主要功能有两个方面，一方面实现对产线生产状态的实时采集监控，并将指令数据下发写入进而控制机床，达到以虚映实、以虚控实，从而提升产线效率；另一方面，根据产品尺寸误差实时计算修正最优解，实现以虚预实，从而提升产品尺寸精准度。A2：构建孪生模型构建，首先使用3dsMAX和SolidWorks构建虚拟设备模型并使用unity3D搭建孪生虚拟场景；然后使用有限状态机定义虚拟模型的行为模型并编写相应脚本。行为模型描述了物理设备在实际生产过程中的行为状态，本发明使用有限状态机构建孪生行为模型，描述各个孪生模型生命周期内所经历的有限状态序列，并定义响应外界事件，从而完成孪生模型映射物理实体的生产行为。加工设备行为模型如图2所示，其中Si表示模型状态，ei为触发事件，ai为响应动作，其状态转换过程如下：系统开始运行时，加工设备初始状态为空闲待机状态S0；当轮毂坯料到达指定加工位置时，触发e1，加工设备进入正常作业状态S1，开始进行铣削加工作业a1；若加工顺利完成，触发e2，则加工设备进入加工完成状态S3，发送加工完成信号a2，以通知机器人进行取件操作；收到取件完成信号e3后，加工设备返回空闲等待状态S0，发送等待坯料信号a3；若加工过程中出现异常情况，加工设备收到设备异常信号e4，则暂停加工，设备进入中断，并发送异常处理信号a4，通知服务端根据异常信息处理，此时加工设备进入阻塞等待状态S2；若异常顺利处理，收到异常处理完毕信号e5，则继续加工，恢复中断前状态a5，加工设备恢复正常作业状态S1；否则，当异常无法处理，需要中断当前加工，则发送取件信号e2，并在取件完成收到信号e3后，加工设备进入空闲待机状态S0；A3：搭建数据连接通讯架构，如图3所示。基于OPCUA协议建立实体设备和孪生模型之间的数据传输通讯基础，传感器等设备采集实时数据，上传至OPCUA服务器。OPCUA服务器包含若干个节点，节点与设备实时数据一一对应，并通过唯一地址访问。功能服务端通过点位地址表读取、写入和监听实体设备的实时数据。搭建MySQL数据库用于存储生产记录、检测数据和加工规则知识图谱数据。在连接接口中设置数据预处理模块，负责检查从OPCUA服务器读取数据的完整性并修正错误数据。预处理后的数据通过MySQL接口存入数据库，OPCUA服务器不与数据库直接通信；A4：构建加工规则知识图谱，其构建过程如图4所示。加工规则知识图谱明确了加工刀具和尺寸特征之间的影响关系，用于指导误差修正的方案计算，其构建过程如下；构建规则三元组：从文档中提取规则所涉及的刀具和尺寸特征信息，组成刀具实体节点和尺寸特征实体节点；依据机理知识，建立实体节点关系的规则链表格；根据规则链表格，构建规则三元组＜刀具C，影响，尺寸特征F＞；岭回归模型拟合关系系数：使用岭回归模型计算规则三元组中刀具与尺寸特征之间的关系系数，回归模型符号定义如表1所示。表1回归模型符号定义表Δyi由kj和对应的关系系数eji决定，其计算公式为：若尺寸特征yi相关的记录数据有m份，则可构建方程组：由以上方程组构建线性回归模型为：y＝Kβ+ε，其中y＝T，β＝T，ε＝T表示均值为0的随机误差向量，在KTK可逆时，可得估计β＝-1KTy。在实际生产中，某组特殊刀具的调整需要保持一致，即存在多列kjt相同的情况导致KTK不可逆。为了解决上述多重共线性问题，通过如下岭回归估计求得系数：β＝-1KTy，其中，I是单位矩阵，λ为岭参数，通过交叉验证法确定；构建岭回归模型拟合关系系数的具体步骤如下：步骤1取尺寸特征yi，整理检测数据，组成式刀具调整值矩阵K和尺寸特征变化值向量y，并据此构建模型方程组；步骤2根据规则三元组，将与尺寸特征yi无关的刀具kj对应项的系数ej置为0，以简化模型维数；步骤3搭建岭回归交叉验证模型，使用交叉验证法确定当前模型最优λ值；步骤4使用最优λ值，求得当前岭回归模型系数，所求即为与尺寸特征 yi相关的所有刀具的关系系数；步骤5取另一尺寸特征yi+1，返回步骤1，直至全部尺寸特征拟合完成。构建知识图谱：将和中得到的规则三元组和关系系数合并为加工规则知识图谱并存入数据库，并使用Neo4j进行图谱可视化工作。A5：构建基于差分进化的尺寸误差修正模型，模型求解流程如图5所示。首先根据尺寸误差修正问题建立数学模型，然后使用差分进化算法求解最优解，同时使用惩罚项处理模型约束，最后根据最优解生成修正方案。3-1)根据尺寸误差修正问题建立数学模型：求解误差修正方案属于单目标优化问题，即求解刀具调整值k向量，使尺寸特征的预期值在上限ui和下限li之间，同时使接近标准值ci，i＝1，2，…，n。问题已知为当前n个尺寸特征的初始测量值mi和刀具与各尺寸特征的关系系数eji。误差修正问题建模过程中所使用的参数符号定义如表2 所示。表2误差修正问题建模符号定义表规划模型目标函数为：其中的计算公式为：同时，根据产线实际情况，使调整的刀具数量尽量少，结合上述两个公式可得修正后的目标函数为：其中，a为常数值，依据实际情况赋值。预期尺寸特征需要限制在上下限之内，因此约束条件表示为：3-2)差分进化算法求解步骤：差分进化算法思想来源为遗传算法，是一种连续变量优化算法，用于求解多维空间中整体最优解。差分进化算法具体步骤如下：步骤1使用实数编码方式初始化候选解种群；步骤2对当前种群进行评估分析，包括记录其最优个体和利用线性尺度变换计算个体适应度；步骤3判断是否满足停止条件，包括是否超过最大进化代数，进化停滞的种群是否超过上限；若满足则终止算法，并取最后一代的最优个体作为最优解输出；步骤4对当前种群进行差分变异，使用DE/best/1策略得到变异个体，其中差分变异缩放因子取0.5；步骤5将当前种群和变异个体合并，利用指数交叉法产生新的交叉个体；步骤6在当前种群和迭代种群之间采用精英保留策略得到新一代种群；步骤7进入下一轮进化，回到步骤2。使用惩罚项处理约束：当规划模型无解时，通过增加惩罚项将模型中的约束项转化到目标函数中，达到减小模型约束进而增大解的可行域的目的。其具体做法为，将规划问题模型的目标函数改写为：其中f表示原目标函数，pi和qi分别表示原尺寸下限和尺寸上限约束条件，σ表示罚因子σi组成的向量。该式表示，将当前解超出约束的部分算入目标函数的计算中，从而将有约束问题转化为无约束问题。根据上式，可构建带有惩罚项的规划模型。结合中的公式得到新的目标函数式为：其中σi为罚因子，其取值可以代表约束对模型求解过程的影响程度。每个尺寸特征yi对应一个罚因子σi，σi越小，则该特征yi相关的约束对模型求解的影响越小。为了确定σi的取值，需要评估各个尺寸特征在误差修正中的重要程度。本文使用α∈的整数值代表尺寸特征的重要程度，当αi≠10时，令σi＝αi。当αi＝10时，代表该第i个尺寸特征为关键尺寸，令σi＝0且在新构建的规划模型中维持yi≥li和yi≤ui的约束条件。使用惩罚项处理约束的具体步骤如下：步骤1读取数据库中当前误差修正问题涉及的尺寸特征重要程度α；若未读取到或需要调整α则由人工输入并录入数据库；步骤2修改原规划问题模型，构建新的带有惩罚项的规划问题模型，并依据尺寸重要程度α确定罚因子σi；步骤3使用差分进化算法求解新的规划问题模型；步骤4若算法仍然无法求出可行解，则说明需要继续处理约束，回到步骤1；若求出一个可行解，则对该可行解进行评估，依据加工规则知识图谱，对使用该解进行误差修正后的各个尺寸特征进行预测；步骤5根据预测结果，由人工评估是否达标，若不达标则表示需要调整尺寸特征重要程度α继续求解，回到步骤1；若结果达标，则生成误差修正方案。本发明基于数字孪生的轮毂加加工尺寸误差修正方法的试验验证：1、数据描述实验数据集为某轮毂生产线实际生产中进行尺寸误差修正时的测量数据，包括使用传统人工方法积累的80条数据和使用本发明数字孪生系统后积累的 70条数据。每条数据由三部分组成：修正前样件各个尺寸特征的检测结果，当次修正对所有加工刀具的调整值以及修正后对样件的再次检测结果。数据按轮毂类型分类，每种轮毂类型所包含的尺寸特征不同。2、实验过程实验一 基于岭回归模型的关系系数拟合验证本文采用均方误差和R2作为评价回归模型的标准，MSE越接近于0，R2越接近1则代表模型拟合度越高。将实验数据按3∶1 的比例随机划分训练集和测试集，计算评价指标结果如表3所示。表3岭回归模型评价指标由表可知，岭回归模型在测试集和训练集上拟合的平均MSE为0.116，平均R2为0.9425，证明拟合的加工规则关系系数具有较高的准确度，能够为误差修正模型提供条件基础。实验二 误差修正方法实例验证在轮毂机加工生产中，误差修正效果通常使用实际测量值与标准值的差值评估，即差值越接近0则修正的精准度越高。Fc表示该差值之和，其计算公式为：其中n为当前评估轮毂的尺寸特征总数，mi表示第i个尺寸特征的实际测量值， ci表示第i个尺寸特征的标准值。根据该式分别计算使用人工方法和数字孪生系统进行误差修正后的Fc值，结果如图6所示。图6中纵轴表示误差修正后的 Fc值，其值越小即修正结果越接近标准值，代表误差修正的精准度越高。精准度提升量计算公式为：其中，FcM表示使用人工方法修正后的Fc值，FcDT表示数字孪生系统修正后的Fc值。由图6可知，使用数字孪生系统进行误差修正时，所有类型轮毂的修正后Fc值都更接近0，即尺寸修正精准度更高。人工方法修正后的Fc总平均值为5.997，数字孪生系统修正后的Fc总平均值为3.3798，由精准度提升量计算公式求得精准度提高了43.64％。因此，基于数字孪生的误差修正方法相较于传统的人工方法有用更高的修正精准度。同时本说明书中未作详细描述的内容均属于本领域技术人员公知的现有技术。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。尽管已经示出和描述了本发明的实施例，对于本领域的普通技术人员而言，可以理解在不脱离本发明的原理和精神的情况下可以对这些实施例进行多种变化、修改、替换和变型，本发明的范围由所附权利要求及其等同物限定。
