标题title
基于机器学习的逆变器零压降数据处理方法
摘要abst
本发明涉及逆变器技术领域，具体涉及一种基于机器学习的逆变器零压降数据处理方法，该方法包括：获取逆变器的交流侧电压互感器电路中的电流构成电流数据序列，根据电流数据序列中的极大值和极小值计算分组长度，并对电流数据序列进行分组得到电流数据矩阵；对电流数据矩阵进行奇异值分解得到多个子矩阵，计算两个子矩阵的关联程度，根据关联程度对子矩阵进行分组，对分组内的子矩阵进行处理得到对角元素序列；计算噪声评价值，将该值小于评价阈值的对角元素序列删除；再计算噪声程度，进而确定权重，根据权重对所有对角元素序列加权求和得到除噪电流序列，确定是否存在异常，并对异常数据进行处理。本发明能够去除噪声，使得电流检测精度更高。
权利要求书clms
1.一种基于机器学习的逆变器零压降数据处理方法，其特征在于，该方法包括以下步骤：获取设定时间段内逆变器的交流侧电压互感器电路中的电流，构成电流数据序列；将电流数据序列中所有极大值和极小值对应的位置序号构成极值位置序列；根据极值位置序列中相邻极大值之间的位置间隔和相邻极小值之间的位置间隔计算分组长度；利用分组长度对电流数据序列进行分组得到电流数据矩阵；对电流数据矩阵进行奇异值分解得到多个子矩阵，其中每个子矩阵对应一个奇异值；根据任意两个子矩阵的差值得到两个子矩阵的关联程度；将关联程度小于程度阈值的子矩阵分为一组，进而得到所有子矩阵的多个分组；利用反对角线均值化算法对多个分组进行处理得到多个对角元素序列，其中每个分组对应一个对角元素序列，对角元素序列中每个元素对应一个子矩阵的奇异值；根据各对角元素序列中元素对应的奇异值和序列长度得到噪声评价值，将噪声评价值小于评价阈值的序列删除；对于删除操作后剩余的对角元素序列，根据序列中元素的差值得到噪声程度；根据噪声程度确定权重，利用权重对所有对角元素序列进行加权求和得到除噪电流序列；根据除噪电流序列判断是否存在异常电流，利用零压降装置对异常电流进行处理。2.根据权利要求1所述的一种基于机器学习的逆变器零压降数据处理方法，其特征在于，所述分组长度的获取方法具体为：当极值位置序列中第一个极值和最后一个极值都为极大值或者都为极小值时，计算分组长度，用公式表示为：其中，表示分组长度，表示极值位置序列中第2c－1个元素的取值，表示极值位置序列中第2c+1个元素的取值，表示极值位置序列中第2c个元素的取值，表示极值位置序列中第2c+2个元素的取值，r表示极值位置序列中元素的总数量；当极值位置序列中第一个极值为极大值且最后一个极值为极小值，或者第一个极值为极小值且最后一个极值为极大值时，计算分组长度，用公式表示为：其中，表示分组长度，表示极值位置序列中第2c－1个元素的取值，表示极值位置序列中第2c+1个元素的取值，表示极值位置序列中第2c个元素的取值，表示极值位置序列中第2c+2个元素的取值，r表示极值位置序列中元素的总数量。3.根据权利要求1所述的一种基于机器学习的逆变器零压降数据处理方法，其特征在于，所述两个子矩阵的关联程度的获取方法具体为：其中，表示子矩阵h和子矩阵l的关联程度，表示子矩阵h的第i个元素的数值，表示子矩阵l的第i个元素的数值，H表示子矩阵的大小。4.根据权利要求1所述的一种基于机器学习的逆变器零压降数据处理方法，其特征在于，所述所有子矩阵的多个分组的获取方法具体为：将关联程度小于程度阈值的两个子矩阵分为一组，并计算该两个子矩阵的平均矩阵；获取平均矩阵和其他子矩阵的关联程度，将关联程度小于程度阈值的子矩阵记入该分组；计算平均矩阵与记入该分组的子矩阵新的平均矩阵，并将新的平均矩阵与其他子矩阵继续获取关联程度，且每记入一个子矩阵到分组中，就计算一次平均矩阵，直到遍历完所有子矩阵，得到一组矩阵；按照同样的方法得到多个分组。5.根据权利要求1所述的一种基于机器学习的逆变器零压降数据处理方法，其特征在于，所述噪声评价值的获取方法具体为：其中，表示对角元素序列m的噪声评价值，表示对角元素序列m对应的所有奇异值的均值，表示所有对角元素序列对应的奇异值均值中的最大值，表示对角元素序列m的长度，表示所有对角元素序列的长度中的最大值。6.根据权利要求1所述的一种基于机器学习的逆变器零压降数据处理方法，其特征在于，所述噪声程度的获取方法具体为：将对角元素序列中相邻两个元素的数值分别作差得到差值序列，根据差值序列中元素计算噪声程度，用公式表示为：其中，为对角元素序列n的噪声程度，表示对角元素序列n对应的差值序列中所有元素的均值，表示对角元素序列n对应的差值序列中最大的元素。7.根据权利要求1所述的一种基于机器学习的逆变器零压降数据处理方法，其特征在于，所述根据噪声程度确定权重具体为：当对角元素序列的噪声程度大于噪声阈值时，将该对角元素序列对应的权重设置为第一数值，当对角元素序列的噪声程度小于噪声阈值时，将所述噪声程度作为该对角元素序列对应的权重。
说明书desc
技术领域本发明涉及逆变器技术领域，具体涉及一种基于机器学习的逆变器零压降数据处理方法。背景技术随着电力体制的改革和深化发展，加强客户需求侧管理得到越来越多人的重视，因此对于大用户量的电能计算回路改造就显得更加重要。而大用户计量普查中发现许多问题，其中电能计量的综合误差主要是由于电压互感器的二次回路产生的，造成二次导线压降过大的原因是多方面的，在此，为了解决该问题，现有技术中常根据电流大小来判断压降是否过大，但是在采集电流时，会受到噪声干扰，此时根据电流判断压降是不准确的。发明内容为了解决上述技术问题，本发明的目的在于提供一种基于机器学习的逆变器零压降数据处理方法，所采用的技术方案具体如下：获取设定时间段内逆变器的交流侧电压互感器电路中的电流，构成电流数据序列；将电流数据序列中所有极大值和极小值对应的位置序号构成极值位置序列；根据极值位置序列中相邻极大值之间的位置间隔和相邻极小值之间的位置间隔计算分组长度；利用分组长度对电流数据序列进行分组得到电流数据矩阵；对电流数据矩阵进行奇异值分解得到多个子矩阵，其中每个子矩阵对应一个奇异值；根据任意两个子矩阵的差值得到两个子矩阵的关联程度；将关联程度小于程度阈值的子矩阵分为一组，进而得到所有子矩阵的多个分组；利用反对角线均值化算法对多个分组进行处理得到多个对角元素序列，其中每个分组对应一个对角元素序列，对角元素序列中每个元素对应一个子矩阵的奇异值；根据各对角元素序列中元素对应的奇异值和序列长度得到噪声评价值，将噪声评价值小于评价阈值的序列删除；对于删除操作后剩余的对角元素序列，根据序列中元素的差值得到噪声程度；根据噪声程度确定权重，利用权重对所有对角元素序列进行加权求和得到除噪电流序列；根据除噪电流序列判断是否存在异常电流，利用零压降装置对异常电流进行处理。优选地，所述分组长度的获取方法具体为：当极值位置序列中第一个极值和最后一个极值都为极大值或者都为极小值时，计算分组长度，用公式表示为：其中，表示分组长度，表示极值位置序列中第2c－1个元素的取值，表示极值位置序列中第2c+1个元素的取值，表示极值位置序列中第2c个元素的取值，表示极值位置序列中第2c+2个元素的取值，r表示极值位置序列中元素的总数量；当极值位置序列中第一个极值为极大值且最后一个极值为极小值，或者第一个极值为极小值且最后一个极值为极大值时，计算分组长度，用公式表示为：其中，表示分组长度，表示极值位置序列中第2c－1个元素的取值，表示极值位置序列中第2c+1个元素的取值，表示极值位置序列中第2c个元素的取值，表示极值位置序列中第2c+2个元素的取值，r表示极值位置序列中元素的总数量。优选地，所述两个子矩阵的关联程度的获取方法具体为：其中，表示子矩阵h和子矩阵l的关联程度，表示子矩阵h的第i个元素的数值，表示子矩阵l的第i个元素的数值，H表示子矩阵的大小。优选地，所述所有子矩阵的多个分组的获取方法具体为：将关联程度小于程度阈值的两个子矩阵分为一组，并计算该两个子矩阵的平均矩阵；获取平均矩阵和其他子矩阵的关联程度，将关联程度小于程度阈值的子矩阵记入该分组；计算平均矩阵与记入该分组的子矩阵新的平均矩阵，并将新的平均矩阵与其他子矩阵继续获取关联程度，且每记入一个子矩阵到分组中，就计算一次平均矩阵，直到遍历完所有子矩阵，得到一组矩阵；按照同样的方法得到多个分组。优选地，所述噪声评价值的获取方法具体为：其中，表示对角元素序列m的噪声评价值，表示对角元素序列m对应的所有奇异值的均值，表示所有对角元素序列对应的奇异值均值中的最大值，表示对角元素序列m的长度，表示所有对角元素序列的长度中的最大值。优选地，所述噪声程度的获取方法具体为：将对角元素序列中相邻两个元素的数值分别作差得到差值序列，根据差值序列中元素计算噪声程度，用公式表示为：其中，为对角元素序列n的噪声程度，表示对角元素序列n对应的差值序列中所有元素的均值，表示对角元素序列n对应的差值序列中最大的元素。优选地，所述根据噪声程度确定权重具体为：当对角元素序列的噪声程度大于噪声阈值时，将该对角元素序列对应的权重设置为第一数值，当对角元素序列的噪声程度小于噪声阈值时，将所述噪声程度作为该对角元素序列对应的权重。本发明实施例至少具有如下有益效果：本发明采用了零压降装置来解决二次回路压降过大的问题，由于压降过大会导致出现异常电流，因此对采集的电流进行异常检测即可。但是在采集过程中会出现噪声影响检测结果，因此本发明使用奇异谱分析方法来去除噪声，在使用奇异谱分析方法时，根据采集的电流数据序列中相邻极大值和相邻极小值之间的位置间隔计算分组长度，对序列进行分组得到电流数据矩阵，进而利用奇异值分解法进行处理；通过计算的关联程度对分解得到的子矩阵进行分组，在进行重构时自适应地设置权重。本发明的方法进行除噪的适应性和精度较高，进而使得电流检测精度更高，不会出现误检的情况，使得能够根据电流准确地判断压降。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1是本发明的一种基于机器学习的逆变器零压降数据处理方法的方法流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种基于机器学习的逆变器零压降数据处理方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构、或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种基于机器学习的逆变器零压降数据处理方法的具体方案。本发明所针对的具体场景为：逆变器的直流侧连接直流储能电源，用于将储能电源的直流电转换成交流电，逆变器的交流侧连接交流电设备，进行供电。交流侧设置有电压互感器，用于检测交流电压。在电路中使用逆变器将直流电能转换为交流电能，在逆变电路中，直流电压利用率会较低。直流电压利用率的定义是：直流电压利用率指的是逆变电路中输出线电压的基波幅值与输入电压的比值。直流电压利用率较高可以提高电机控制系统的输出能力，为了得到较好的直流电压利用率，首先采用SPWM调制，另其调制比为1。此时母线的电压利用率最大只有86.6%。为了达到更高的利用率，首先使用3次谐波注入后再进行SPWM调制，其调制比还为1，此时母线的电压利用率可以再上述基础上提高15.47%。这样就解决了直流电压利用率的问题，在这之后再采集电流。请参阅图1，其示出了本发明一个实施例提供的一种基于机器学习的逆变器零压降数据处理方法的方法流程图，该方法包括以下步骤：步骤一，获取设定时间段内逆变器的交流侧电压互感器电路中的电流，构成电流数据序列；将电流数据序列中所有极大值和极小值对应的位置序号构成极值位置序列；根据极值位置序列中相邻极大值之间的位置间隔和相邻极小值之间的位置间隔计算分组长度；利用分组长度对电流数据序列进行分组得到电流数据矩阵。首先，需要说明的是，零压降管理装置是根据广大电力用户的实际需求设计的零压降智能电量装置，由于存在电压互感器二次回路压降较大，电能计算不准确等情况，该装置的目的是消除压降，减少电能计算误差。而如果二次回路中压降较大，就会导致二次回路中电流较大，此时就可以测量电路中的电流，根据电流的情况判断是否出现二次回路压降较大的问题。使用电流互感器测量二次回路中的电流，由于电流互感器采集会受到窄带信号和白噪声信号的干扰，采集到的电流数据会存在噪声数据，因此本发明对其进行去噪。然后，获取设定时间段内电路中的电流，在本实施例中，采集5min内的电流数据构成电流数据序列。根据奇异谱分析算法的思想，首先需要将电流数据序列转换为矩阵的形式，故需要对电流数据序列进行合适的分组操作。具体地，将电流数据序列拟合成一条曲线，其中，曲线所在的坐标系内横轴为序列中各元素的位置序号，纵轴为序列中各元素的取值，即电流的大小。获取曲线的函数为，对该函数进行求导，使得其导函数为0，由此可以得到曲线的极值点。对于波动的曲线，必然存在极大值和极小值，若存在多个极值点则必然存在极大值点和极小值点，将得到的极值点的横坐标构成极值位置序列，记为，其中，表示第一个极值，r表示极值的总数量。由于相邻两个极大值之间必然存在一个极小值，同理，相邻两个极小值之间也存在一个极大值。对应电流数据序列，获取极值位置序列中各元素对应的电流大小。若第一个极值对应的电流数据小于第二个极值对应的电流数据，则第一个极值点为极小值点，第二个极值点为极大值点。若第一个极值对应的电流数据大于第二个极值对应的电流数据，则第一个极值点为极大值点，第二个极值点为极小值点。按照上述方法进行判断，能够获取极值位置序列中各元素对应的是极大值点还是极小值点。在本实施例中，后续利用奇异值分解法得到矩阵的特征值，为了更好地除去电流中的噪声数据，分组需要尽可能的同时包含极大值和极小值点。同时，无论是异常的电流数据还是噪声数据都会有极值的存在，需要获取合适的分组长度，使得噪声数据尽可能的不分在一个组内，避免对后续的处理不利。最后，根据极值位置序列中相邻极大值之间的位置间隔和相邻极小值之间的位置间隔计算分组长度，当极值位置序列中第一个极值和最后一个极值都为极大值或者都为极小值时，计算分组长度，用公式表示为：其中，表示分组长度，表示极值位置序列中第2c－1个元素的取值，即第2c－1个极值对应的位置序号，表示极值位置序列中第2c+1个元素的取值，表示极值位置序列中第2c个元素的取值，表示极值位置序列中第2c+2个元素的取值，r表示极值位置序列中元素的总数量，即极值位置序列中包含极值的总数量。当极值位置序列中第一个极值为极大值且最后一个极值为极小值，或者第一个极值为极小值且最后一个极值为极大值时，计算分组长度，用公式表示为：其中，表示分组长度，表示极值位置序列中第2c－1个元素的取值，表示极值位置序列中第2c+1个元素的取值，表示极值位置序列中第2c个元素的取值，表示极值位置序列中第2c+2个元素的取值，r表示极值位置序列中元素的总数量。需要说明的是，由于需要对电流数据序列进行分组，得到其对应的矩阵形式，则分组需要保证每组的数据长度相同，即不能够存在孤立未被分组的数据。而利用得到的分组长度对电流数据序列进行分组，电流数据序列不一定能够被均匀划分，即该序列长度不一定能够被分组长度整除。因此，需要调整分组长度的大小，使得电流数据序列能够被均匀划分。在本实施例中，通过逐渐增大分组长度的取值，直到电流数据序列的长度能够被分组长度整除时停止，得到对应的分组，构成电流数据矩阵。步骤二，对电流数据矩阵进行奇异值分解得到多个子矩阵，其中每个子矩阵对应一个奇异值；根据任意两个子矩阵的差值得到两个子矩阵的关联程度；将关联程度小于程度阈值的子矩阵分为一组，进而得到所有子矩阵的多个分组。首先，对电流数据矩阵进行奇异值分解得到多个子矩阵。其中，奇异值分解算法为公知算法，在本实施例中仅做简单的描述。分解公式为，U和V为单位正交矩阵，为矩阵V的转置矩阵，为电流数据矩阵特征值构成的对角矩阵，所述对角矩阵中各元素为电流数据矩阵的奇异值。具体地，对电流数据矩阵进行奇异值分解后用公式表示为：其中，X为电流数据矩阵，为矩阵U中的第k个元素，为矩阵V中的第k个元素，为矩阵中的第k个元素，o为电流数据矩阵X的秩的数量，也即电流数据矩阵X非零奇异值的数量，和分别为第1个子矩阵和第o个子矩阵。然后，计算两个子矩阵的关联程度，用公式表示为：其中，表示子矩阵h和子矩阵l的关联程度，关联程度可以表示两个矩阵之间的相关性程度。表示子矩阵h的第i个元素的数值，表示子矩阵l的第i个元素的数值，H表示子矩阵的大小。最后，将关联程度小于程度阈值的两个子矩阵分为一组，并计算该两个子矩阵的平均矩阵；获取平均矩阵和其他子矩阵的关联程度，将关联程度小于程度阈值的子矩阵记入该分组；计算平均矩阵与记入该分组的子矩阵新的平均矩阵，并将新的平均矩阵与其他子矩阵继续获取关联程度，且每记入一个子矩阵到分组中，就计算一次平均矩阵，直到遍历完所有子矩阵，得到一组矩阵；按照同样的方法得到多个分组。具体地，在本实施例中，程度阈值的取值为2，且实施者可根据实际情况进行设置程度阈值的取值。当关联程度小于程度阈值时，即时，将子矩阵h和子矩阵l分为一组，根据子矩阵h和子矩阵l元素的数值计算两个矩阵的平均矩阵。获取除子矩阵h和子矩阵l之外其他任意一个子矩阵p，计算平均矩阵和子矩阵p的关联程度，当关联程度小于程度阈值时，将子矩阵p记入包含子矩阵h和子矩阵l的分组中，并计算平均矩阵和子矩阵p的平均矩阵。继续计算其他任意一个子矩阵和平均矩阵的关联程度，将关联程度小于程度阈值的子矩阵记入该分组中，每将一个子矩阵记入该分组中，就对分组中的子矩阵进行求取平均矩阵，直到遍历完所有子矩阵，得到一组矩阵，按照同样的方法完成所有子矩阵的分组，得到多个分组。其中，一个分组中包含多个子矩阵，每个子矩阵对应一个奇异值。需要说明的是，当计算得到的关联程度大于程度阈值时，需选择其他子矩阵继续计算关联程度，直到得到的关联程度小于程度阈值时，才执行将子矩阵记入分组中的操作。步骤三，利用反对角线均值化算法对多个分组进行处理得到多个对角元素序列，其中每个分组对应一个对角元素序列，对角元素序列中每个元素对应一个子矩阵的奇异值；根据各对角元素序列中元素对应的奇异值和序列长度得到噪声评价值，将噪声评价值小于评价阈值的序列删除。具体地，获得多个分组后，使用反对角线均值化方法对每一组中的子矩阵进行处理得到一个序列，其中反对角线均值化方法为公知技术，在此仅做简单的叙述，即将一个分组内的所有子矩阵构成一个综合矩阵，将该综合矩阵的对角线根据公式求解，得到该分组的序列，进而获取每个分组的序列记为对角元素序列。需要说明的是，获取各个分组的对角元素序列中有部分序列属于噪声序列，在奇异谱分析算法中，是将奇异值非常小的数值所构成的序列作为噪声序列，在本发明的方法中不仅根据奇异值大小筛选数据，还根据序列的大小来筛选数据，而且也根据序列本身的属性来筛选数据是否存在噪声点。根据各对角元素序列中元素对应的奇异值和序列长度得到噪声评价值，用公式表示为：其中，表示对角元素序列m的噪声评价值，表示对角元素序列m对应的所有奇异值的均值，表示所有对角元素序列对应的奇异值均值中的最大值，表示对角元素序列m的长度，表示所有对角元素序列的长度中的最大值。由于可能为噪声点的序列对应的奇异值较小，长度较短的序列较为可能是包含噪声点的序列。故当噪声评价值小于评价阈值时，在本实施例中评价阈值的取值为0.1，即当时，认为该对角元素序列可能包含噪声点，并将该序列删除。其中，由于后续需要对各对角元素序列进行累加重构得到新的序列，故对序列的删除操作并不影响后续的操作。同时，评价阈值的取值实施者可根据实际情况进行设置。步骤四，对于删除操作后剩余的对角元素序列，根据序列中元素的差值得到噪声程度；根据噪声程度确定权重，利用权重对所有对角元素序列进行加权求和得到除噪电流序列；根据除噪电流序列判断是否存在异常电流，利用零压降装置对异常电流进行处理。具体地，对于删除操作后剩余的对角元素序列，可能还会有噪声点的存在，由于噪声点是孤立点，与其他数据有较大的差异，因此根据序列中元素的差值进行筛选。具体地，将对角元素序列中相邻两个元素的数值分别作差得到差值序列，具体地，对于一个对角元素序列，将该序列的第一个元素与第二个元素作差，将第二个元素与第三个元素作差，将第三个元素与第四个元素作差，以此类推，将得到的所有差值构成该对角元素序列对应的差值序列。根据差值序列中元素计算噪声程度，用公式表示为：其中，为对角元素序列n的噪声程度，表示对角元素序列n对应的差值序列中所有元素的均值，表示对角元素序列n对应的差值序列中最大的元素。噪声程度的取值越大，该对角元素序列存在噪声点的概率就越小。当对角元素序列的噪声程度大于噪声阈值时，将该对角元素序列对应的权重设置为第一数值，当对角元素序列的噪声程度小于噪声阈值时，将所述噪声程度作为该对角元素序列对应的权重。在本实施例中，噪声阈值的取值为0.8，第一数值的取值为1，实施者可以根据实际情况确定噪声阈值和第一数值的取值。具体地，当时，认为对角元素序列n完全不包含噪声点，则将对角元素序列n对应的权重设置为1，记为；当时，将对角元素序列的噪声程度作为其对应的权重，记为。由于电流存在异常数据时可能会导致噪声程度小于噪声阈值的情况出现，且要监控异常电流，因此给定这种情况的序列与噪声程度相等的权重。根据各对角元素序列对应的权重，对各序列进行加权求和，用公式表示为：其中，W为除噪电流序列，即W为除噪之后的电流序列，为对角元素序列n对应的权重，为对角元素序列n，N表示对角元素序列的数量。如果存在压降较大的情况，那么此时会存在较大的异常电流，由于压降和电流较大是针对于电路较长的电路才会出现的，因此在相同额定电压和功率的情况下，本实施例通过测量较短的电路中的电流得到正常的电流序列数据，将正常的电流序列数据与除噪电流序列进行比较，判断电流中是否存在异常电流。其中，实施者可根据实际情况选择合适的方法进行比较和判断。当检测到电流存在异常之后，由于本实施例是采集设定时间段内的电流数据，即当该设定时间段内电流出现异常数据时，零压降计量功能自动切除，原有的电压互感器提供的二次模拟电压信号表继续运行，不但保证计量精度，也保证装置安全的运行。使用定值补偿式补偿器在二次回路中接入一个定值的电压源，根据不通电路长度粗细来调节电压源，以抵消二次压降的影响。以上所述实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围，均应包含在本申请的保护范围之内。
