标题title
一种衍射光波导输出图像校正方法及系统
摘要abst
本发明提供一种衍射光波导输出图像校正方法及系统，方法包括：将衍射光波导的输入图像和衍射光波导输出图像的颜色值生成颜色值映射表，根据所述颜色值映射表对衍射光波导的输出图像进行校正，可大大减小衍射光波导输出图像的显示色差，使得衍射光波导输出图像更符合我们预期，实现了衍射光波导输出图像对应位置颜色的精准校正。
权利要求书clms
1.一种衍射光波导输出图像校正方法，其特征在于，包括如下步骤：将第一图像和第二图像的颜色值生成颜色值映射表；其中，第一图像为衍射光波导的输入图像，第二图像为所述衍射光波导的输出图像；根据所述颜色值映射表对衍射光波导的输出图像进行校正。2.根据权利要求1所述的衍射光波导输出图像校正方法，其特征在于，所述将第一图像和第二图像的颜色值生成颜色值映射表，具体包括：记录第一图像内部区域的颜色值；记录第二图像内部区域的颜色值；将第一图像和第二图像在内部区域的相同位置的颜色值进行对应设置，得到所述颜色值映射表。3.根据权利要求2所述的衍射光波导输出图像校正方法，其特征在于，所述记录第一图像内部区域的颜色值，具体包括：采用光机向衍射光波导输入图像的过程中，记录输入图像的每个输入像素点的位置以及像素点对应的颜色值。4.根据权利要求2所述的衍射光波导输出图像校正方法，其特征在于，所述记录第二图像内部区域的颜色值，具体包括：采集第二图像；提取所述第二图像内部区域每个输出像素点的颜色值；记录所述输出像素点的位置以及颜色值。5.根据权利要求2所述的衍射光波导输出图像校正方法，其特征在于，所述将第一图像和第二图像在内部区域的相同位置的颜色值进行对应设置，得到所述颜色值映射表，具体包括：将第一图像和第二图像在内部区域的相同像素点的颜色值进行对应设置，得到颜色值映射表。6.根据权利要求4所述的衍射光波导输出图像校正方法，其特征在于，在采集第二图像后，对第二图像进行边缘识别，提取关键区域。7.根据权利要求1所述的衍射光波导输出图像校正方法，其特征在于，所述根据所述颜色值映射表对衍射光波导的输出图像进行校正，具体包括：确定衍射光波导的输出图像的颜色值；根据确定的衍射光波导的输出图像的颜色值，在所述颜色值映射表查询衍射光波导输入图像的对应颜色值；基于所述衍射光波导输入图像的对应颜色值，得到校正的衍射光波导的输出图像。8.根据权利要求1-7任一项所述的光波导输出图像校正方法，其特征在于，所述第一图像包括多张纯色图像；不同纯色图像的RGB值不同。9.根据权利要求7所述的衍射光波导输出图像校正方法，其特征在于，还包括：对校正的衍射光波导的输出图像进行评价，具体包括：将校正前输出图像以及校正后输出图像分别划分为N份；基于划分的校正前输出图像，计算校正前输出图像的颜色值标准差；基于划分的校正后输出图像，计算校正后输出图像的颜色值标准差；根据校正前输出图像的颜色值标准差和校正后输出图像的颜色值标准差，计算校正后输出图像的颜色值标准差下降程度。10.根据权利要求7所述的衍射光波导输出图像校正方法，其特征在于，还包括：对校正的衍射光波导的输出图像进行评价，具体包括：将校正前输出图像以及校正后输出图像分别划分为N份；基于划分的校正前输出图像，将图像中的每个像素点的RGB值转化为颜色空间中的二维点，计算第一二维点群的最大距离；基于划分的校正后输出图像，将图像中的每个像素点的RGB值转化为颜色空间中的二维点，计算第二二维点群的最大距离；根据第一二维点群的最大距离和第二二维点群的最大距离，计算校正后输出图像的颜色值优化程度。11.根据权利要求1所述的衍射光波导输出图像校正方法，其特征在于，还包括：对所述校正方法进行评价，具体包括：将校正后输出图像划分为N份图像；基于划分的校正后输出图像，计算校正后输出图像的颜色值标准差；根据所述N份图像以及校正后输出图像的颜色值标准差，计算输出图像颜色贴合实际预期程度。12.根据权利要求11所述的衍射光波导输出图像校正方法，其特征在于，所述计算输出图像颜色贴合实际预期程度，具体通过如下公式实现：其中，M表示输出图像颜色贴合实际预期程度，δ表示颜色值标准差，α是预计调制的颜色值，N表示输出图像的图像划分个数，x表示某个划分图像的实际输出颜色值。13.一种衍射光波导输出图像校正系统，其特征在于，所述校正系统包括颜色值映射表生成单元和校正单元；所述颜色值映射表生成单元，用于将第一图像和第二图像的颜色值形成颜色值映射表；其中，第一图像为衍射光波导的输入图像，第二图像为所述衍射光波导的输出图像；所述校正单元，用于根据所述颜色值映射表对衍射光波导的输出图像进行校正。14.根据权利要求13所述的衍射光波导输出图像校正系统，其特征在于，所述颜色值映射表生成单元包括第一记录模块、第二记录模块以及处理模块；所述第一记录模块，用于记录第一图像内部区域的颜色值；所述第二记录模块，用于记录第二图像内部区域的颜色值；所述处理模块，用于将第一图像和第二图像在内部区域的相同位置的颜色值进行对应设置，得到颜色值映射表。
说明书desc
技术领域本发明属于图像处理技术领域，具体涉及一种衍射光波导输出图像校正方法及系统。背景技术增强现实技术是指通过某种技术手段为使用者在现实世界中提供额外的信息，这种技术把虚拟世界的图像和现实世界的场景有机的融合在一起，通过将计算得到的信息与真实世界进行深度整合，从而给使用者提供更丰富的信息和浸入式体验。增强现实技术可以通过很多硬件平台实现，其中最具有沉浸感的是可穿戴增强现实设备，即AR眼镜，这种方式的硬件形式是一个简单的眼镜，通过镜片表面的微结构将光线导入人眼，这种硬件实现方式最为便捷方便，是AR的主流技术。AR镜片的目的是把图像从微显示器上通过镜片引导入人眼，光波导方案是一种主流的技术方案，光波导包括波导基体、耦入光栅和耦出光栅，耦入光栅和耦出光栅设置在波导基体上，其基本原理如图1所示，光机1输出的光线被耦入光栅3耦合入波导基体2，在波导基体2中以全反射进行传播，每当遇到耦出光栅4时一部分光线被耦出，耦出光线进入人眼，从而能够看到与光机1输出相同的图像，与此同时人眼可以看到真实世界场景，两部分重叠就可以实现增强现实的功能。衍射光波导的主要任务是为使用者提供清晰、明亮的虚拟图像,并能叠加在真实外景上；其主要要求有视场大、出瞳大、图像清晰、体积小、重量轻等。为了实现彩色成像,光机一般会输出红、绿、蓝三种不同波长的光线，均通过光波导扩瞳并进入人眼成像。由于不同波长衍射效率不同，全反射后传播步长不同，并且传播过程会有能量衰减，这些问题使得光机向衍射光波导的投射图像经衍射光波导输出后会发生明显色差。发明内容为了克服现有技术的缺陷，本发明的主要目的在于提供一种使输出图像色彩均匀的衍射光波导输出图像校正方法及系统。本发明通过如下技术方案实现：本发明的衍射光波导输出图像校正方法，包括如下步骤：将第一图像和第二图像的颜色值生成颜色值映射表；其中，第一图像为衍射光波导的输入图像，第二图像为所述衍射光波导的输出图像；根据所述颜色值映射表对衍射光波导的输出图像进行校正。进一步的，所述将第一图像和第二图像的颜色值生成颜色值映射表，具体包括：记录第一图像内部区域的颜色值；记录第二图像内部区域的颜色值；将第一图像和第二图像在内部区域的相同位置的颜色值进行对应设置，得到颜色值映射表。进一步的，所述记录第一图像内部区域的颜色值，具体包括：采用光机向衍射光波导输入图像的过程中，记录输入图像的每个输入像素点的位置以及像素点对应的颜色值。进一步的，所述记录第二图像内部区域的颜色值，具体包括：采集第二图像；提取所述第二图像内部区域每个输出像素点的颜色值；记录所述输出像素点的位置以及颜色值。进一步的，所述将第一图像和第二图像在内部区域的相同位置的颜色值进行对应设置，得到颜色值映射表，具体包括：将第一图像和第二图像在内部区域的相同像素点的颜色值进行对应设置，得到颜色值映射表。进一步的，在采集第二图像后，对第二图像进行边缘识别，提取关键区域。进一步的，所述根据所述颜色值映射表对衍射光波导的输出图像进行校正，具体包括：确定衍射光波导的输出图像的颜色值；根据确定的衍射光波导的输出图像的颜色值，在所述颜色值映射表查询衍射光波导输入图像的对应颜色值；基于所述衍射光波导输入图像的对应颜色值，得到校正的衍射光波导的输出图像。进一步的，所述第一图像包括多张纯色图像；不同纯色图像的RGB值不同。进一步的，还包括：对校正的衍射光波导的输出图像进行评价，具体包括：将校正前输出图像以及校正后输出图像分别划分为N份；基于划分的校正前输出图像，计算校正前输出图像的颜色值标准差；基于划分的校正后输出图像，计算校正后输出图像的颜色值标准差；根据校正前输出图像的颜色值标准差和校正后输出图像的颜色值标准差，计算校正后输出图像的颜色值标准差下降程度。进一步的，还包括：对校正的衍射光波导的输出图像进行评价，具体包括：将校正前输出图像以及校正后输出图像分别划分为N份；基于划分的校正前输出图像，将图像中的每个像素点的RGB值转化为颜色空间中的二维点，计算第一二维点群的最大距离；基于划分的校正后输出图像，将图像中的每个像素点的RGB值转化为颜色空间中的二维点，计算第二二维点群的最大距离；根据第一二维点群的最大距离和第二二维点群的最大距离，计算校正后输出图像的颜色值优化程度。进一步的，还包括：对所述校正方法进行评价，具体包括：将校正后输出图像划分为N份图像；基于划分的校正后输出图像，计算校正后输出图像的颜色值标准差；根据所述N份图像以及校正后输出图像的颜色值标准差，计算输出图像颜色贴合实际预期程度。进一步的，所述计算输出图像颜色贴合实际预期程度，具体通过如下公式实现：其中，M表示输出图像颜色贴合实际预期程度，δ表示颜色值标准差，α是预计调制的颜色值，N表示输出图像的图像划分个数，x表示某个划分图像的实际输出颜色值。对应的，本发明还提供一种衍射光波导输出图像校正系统，所述校正系统包括颜色值映射表生成单元和校正单元；所述颜色值映射表生成单元，用于将第一图像和第二图像的颜色值形成颜色值映射表；其中，第一图像为衍射光波导的输入图像，第二图像为所述衍射光波导的输出图像；所述校正单元，用于根据所述颜色值映射表对衍射光波导的输出图像进行校正。进一步的，所述颜色值映射表生成单元包括第一记录模块、第二记录模块以及处理模块；所述第一记录模块，用于记录第一图像内部区域的颜色值；所述第二记录模块，用于记录第二图像内部区域的颜色值；所述处理模块，用于将第一图像和第二图像在内部区域的相同位置的颜色值进行对应设置，得到颜色值映射表。和现有技术比，本发明的技术方案具有如下有益效果：本发明提供一种衍射光波导输出图像校正方法，将衍射光波导的输入图像和衍射光波导输出图像的颜色值生成颜色值映射表，根据所述颜色值映射表对衍射光波导的输出图像进行校正，可大大减小衍射光波导输出图像的显示色差，使得衍射光波导输出图像更符合我们预期，实现了衍射光波导输出图像内对应位置颜色的精准校正。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为现有衍射光波导的传输原理示意图；图2为现有技术中，采用光机投射进入衍射光波导的图像；图3为现有技术中，图2的光机投射进入衍射光波导的图像经衍射光波导后人眼所观察到的图像；图4为本发明的衍射光波导输出图像校正方法的总体流程示意图；图5显示为未提取关键区域之前的采集图像；图6显示为提取关键区域之后的采集图像；图7表示为Canny算法中角度划分示意图；图8表示为Canny算法中非极大值抑制的示意图；图9为本发明方案中，采用光机投射进入衍射光波导的图像；图10为本发明方案中，图8的光机投射进入衍射光波导的图像经衍射光波导后人眼所观察到的图像；图11为颜色空间分布图。附图标记说明其中，1-光机，2-波导基体，3-耦入光栅，4-耦出光栅。具体实施方式下面将结合本发明的实施例，对本发明的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本文中，术语“第一”、“第二”和其它类似词语并不意在暗示任何顺序、数量和重要性，而是仅仅用于对不同的元件进行区分。在本文中，术语“一”、“一个”和其它类似词语并不意在表示只存在一个所述事物，而是表示有关描述仅仅针对所述事物中的一个，所述事物可能具有一个或多个。在本文中，术语“包含”、“包括”和其它类似词语意在表示逻辑上的相互关系，而不能视作表示空间结构上的关系。例如，“A包括B”意在表示在逻辑上B属于A，而不表示在空间上B位于A的内部。另外，术语“包含”、“包括”和其它类似词语的含义应视为开放性的，而非封闭性的。例如，“A包括B”意在表示B属于A，但是B不一定构成A的全部，A还可能包括C、D、E等其它元素。在本文中，术语“实施例”、“本实施例”、“优选实施例”、“一个实施例”并不表示有关描述仅仅适用于一个特定的实施例，而是表示这些描述还可能适用于另外一个或多个实施例中。本领域技术人员应理解，在本文中，任何针对某一个实施例所做的描述都可以与另外一个或多个实施例中的有关描述进行替代、组合、或者以其它方式结合，所述替代、组合、或者以其它方式结合所产生的新实施例是本领域技术人员能够容易想到的，属于本发明的保护范围。在本文的描述中，“多个”的含义是至少两个，例如两个，三个等，除非另有明确具体的限定。实现彩色成像时，现有衍射光波导所显示的颜色不均匀。例如，图2所示为光机投射进入衍射光波导的图像，是一张纯灰色图像，图3为图2的纯灰色图像经衍射光波导后人眼所观察到的图像，所以，虽然光机投影的是纯灰色图像，但人眼所观察到的不再是纯灰色图像，而存在非常明显的色差。本发明提供一种衍射光波导输出图像校正方法，解决现有衍射光波导彩色成像时具有明显色差的问题。本发明的衍射光波导输出图像校正方法，总体发明构思为：将光机输入衍射光波导的图像和经过衍射光波导后人眼观察的图像分别看作独立的数据集，衍射光波导的作用是将光机输入衍射光波导的图像变为人眼观察的图像，这种变化在输入恒定的情况下是固定的。将图像上相同位置的输入和输出做成一个映射表，即可完整表示衍射光波导对输入图片的作用，将该映射表称为LUT，当确定在某个位置输出的时候，去映射表查询即可得知所需输入的值。具体的，如图4所示，本发明的衍射光波导输出图像校正方法，包括如下步骤：S1将第一图像和第二图像的颜色值生成颜色值映射表。其中，第一图像为衍射光波导的输入图像，比如采用光机向衍射光波导投射的投影图像。第二图像为衍射光波导的输出图像，例如，光机向衍射光波导投射的投影图像经衍射光波导后的输出图像。第二图像可以采用图像记录设备进行采集，比如采用CCD相机进行采集。S2根据所述颜色值映射表对衍射光波导的输出图像进行校正。具体的，上述步骤S1具体包括：S11记录第一图像内部区域的颜色值。比如，采用光机向衍射光波导输入图像的过程中，记录输入图像的每个像素点位置以及像素点对应的颜色值。这里的记录方式可以采用矩阵的形式。其中，x表示像素点的横坐标，y表示像素点的纵坐标，R表示RGB中的R值，G表示RGB中的G值，B表示RGB中的B值。作为优选实施方式，为了颜色值映射表构建足够的映射集合，第一图像包括多张纯色图像，不同纯色图像的RGB值不同。进一步优选的，第一图像包括256张纯色图像，256张纯色图像的RGB值按0-255设置，比如第一张纯色图像的每个像素点的RBG的R值、G值以及B值均为0，第二张纯色图像的每个像素点的RBG的R值、G值以及B值均为1，…，第256张纯色图像的每个像素点的RBG的R值、G值以及B值均为255。作为优选实施方式，当第一图像包括多张RGB值不同的纯色图像时，可以将每张纯色图像按RBG值命名，并将每张纯色图像内部区域的颜色值按上述矩阵形式进行描述。需要说明的是，这里不限于采用光机向衍射光波导输入图像，本领域技术人员根据实际操作也可以采用其他实现相同功能的替换设备。S12提取第二图像内部区域的颜色值。具体包括，采集第二图像，这里可以采用图像记录设备采集第二图像，比如可以采用CCD相机进行采集第二图像。提取所述第二图像内部区域每个输出像素点的颜色值。记录所述每个输出像素点的位置以及颜色值，记录方式和第一图像的记录方式相同。即采用矩阵的形式，其中，x表示像素点的横坐标，y表示像素点的纵坐标，R表示RGB中的R值，G表示RGB中的G值，B表示RGB中的B值。作为优选的实施方式，在采集第二图像后，提取第二图像之前，对图像进行边缘识别，提取关键区域。例如，可以采用canny算法对采集图像进行边缘识别，并使用opencv提取关键区域，这里的关键区域即是从图像记录设备的采集图像中识别边缘并提取边缘内的区域，即上述的第二图像内部区域，而不包括其他区域。比如，图5显示为未提取关键区域之前的采集图像，图6显示为提取关键区域之后的采集图像。上述使得采集的第二图像的大小与角度尽可能与输入图像对应，以便后续将第二图像和第一图像做出精准的映射集合。Canny算法是一种综合在抗噪声干扰和精确定位之间寻求最佳折中方案的边缘检测方法,属于先平滑后求导的方法。根据x方向和y方向的卷积模板，可知，在3×3邻域中从底部一行像素值减去顶部一行的像素，得到x方向的偏导数；同样，从右边一列像素值减去左边一列的像素，得到y方向的偏导数。由此，可以得到该点梯度方向和幅值角度：其中，Q表示梯度方向，α表示幅值角度，是点坐标，Pow是求平方函数，gx和gy分别是图像在该点的x方向与y方向导数。对幅值图像进行非极大值抑制：首先将角度划分成四个方向范围：水平、±45°、垂直、±135°，均为双向设置，如图7所示。接着对3×3区域的四个基本边缘方向进行非极大值抑制：如图8所示，若中心点在沿其方向上邻域的梯度幅值最大，则保留；否则，抑制。由于采集图像可能会出现倾斜情况，从而使得在边缘识别之后，关键区域提取之前，还需将图像旋转至尽量水平区域，具体做法是将图像乘以旋转矩阵，旋转矩阵具体求取步骤如下：输入中心点坐标，旋转角度θ，缩放比例，给出变换矩阵T如下：变换矩阵T即为将采集图像设置为水平方向的旋转矩阵，其中旋转角度θ是识别图像边缘的时候，根据图像最小包围矩形倾斜角度计算出来的。这里需要说明的是，采用canny算法对图像进行边缘识别仅为本实施例的一种示例，本领域技术人员根据实际需要也可以采用别的算法进行边缘检测。并且，采集图像过程中尽可能保证衍射光波导与图像记录设备相对位置固定，才可以在提取关键区域的时候精准。因为衍射光波导的耦出光栅的耦出强度无法达到最大值，即无法采集到所有输出集合，因此在图像采集的时候，可以适当过曝。当第一图像包括多张RGB值不同的纯色图像时，对应的，第二图像会包括多张颜色不均匀显示的图像。可以将第二图像也按第一图像对应的RGB值进行命名，每张图像内部区域的颜色值按上述矩阵形式进行定义。S13将第一图像和第二图像在内部区域的相同位置的颜色值进行对应设置，得到颜色值映射表。具体的，将第一图像和第二图像在内部区域的相同像素点的颜色值进行对应设置，得到颜色值映射表。例如，当第一图像包括多张RGB值不同的纯色图像时，对应的，第二图像会包括多张显示图像。将每张第一图像内部区域的颜色值所形成的矩阵内部的矩阵值与每张和第一图像对应的第二图像内部区域的颜色值所形成的矩阵内部的矩阵值进行对应，进一步的，矩阵值的对应是矩阵值中横纵坐标相同点的对应。具体的，上述步骤S2具体包括：确定衍射光波导的输出图像的颜色值，即确定光机向衍射光波导输入图像经衍射光波导后输出图像每个像素点的颜色值。示例性的，这里确定衍射光波导的输出图像的颜色值可以根据用户需求确定，比如用户提供期望衍射光波导输出图像每个像素点的颜色值。根据确定的衍射光波导的输出图像的颜色值，在所述颜色值映射表查询衍射光波导输入图像的对应颜色值，具体的，基于上述确定的光机向衍射光波导输入图像经衍射光波导后输出图像每个像素点的颜色值，在颜色值映射表中去查询对应需要光机向衍射光波导输入图像每个像素点的颜色值。基于所述衍射光波导输入图像的对应颜色值，得到校正的衍射光波导的输出图像。即采用光机向衍射光波导投射输入图像，输入图像每个像素点的颜色值即上述在颜色值映射表中去查询的对应需要光机向衍射光波导输入图像每个像素点的颜色值，从而得到校正的衍射光波导的输出图像，即得到预期的衍射光波导的输出图像。比如，我们预期衍射光波导输出图像为如图2所示的纯灰色图像，则在颜色值映射表查询衍射光波导输入图像的对应颜色值，如图9所示，得到需要光机向衍射光波导输入图像，然后经衍射光波导后，得到如图10所示的衍射光波导的输出图像，所以，相较图3中衍射光波导输出图像，本实施例的衍射光波导输出图像更符合预期颜色。进一步优选的，本发明的衍射光波导输出图像校正方法，还包括：对校正的衍射光波导的输出图像进行评价，具体是对校正的衍射光波导的输出图像的图像均匀性进行评价。本实施例示例选取两种方式对校正的衍射光波导的输出图像的图像均匀性进行评价。评价方式一：使用标准差下降程度作为评价体系：将校正前输出图像以及校正后输出图像分别划分为N份。基于划分的校正前输出图像，计算校正前输出图像的颜色值标准差。基于划分的校正后输出图像，计算校正后输出图像的颜色值标准差。基于校正前输出图像的颜色值标准差和校正后输出图像的颜色值标准差，计算校正后输出图像的颜色值标准差下降程度。其中，颜色值标准差计算具体通过如下公式实现：其中，σ表示标准差，N表示数据总数，Xi表示N个数据中的第i个数据，表示N个数据的平均值。其中，颜色值标准差下降程度具体通过如下公式实现：其中，表示颜色值标准差下降程度，表示校正前输出图像的颜色值标准差，表示校正后输出图像的颜色值标准差。比如，本实施例将校正后的输出图像分成N份，分别提取每份的红色、绿色以及蓝色值，按照上述公式计算，得出红色、绿色以及蓝色的标准差数据，数据如下表1。将校正前的输出图像同样分为N份，分别提取每份的红色、绿色以及蓝色值，按照上述公式计算，得出红色、绿色以及蓝色的标准差数据，数据如下表1。根据校正后的输出图像的红色、绿色以及蓝色的标准差数据以及校正前的输出图像的红色、绿色以及蓝色的标准差数据，计算校正后输出图像的红色、绿色以及蓝色标准差下降程度，数据如下表2：通过上述表1和表2可以看出，本实施例的校正后输出图像的颜色值标准差相较校正前输出颜色值标准差小很多，并且对于红色，校正后输出图像相较校正前输出图像的标准差下降程度大于35%以上，对于绿色，校正后输出图像相较校正前输出图像的标准差下降程度大于79%以上，对于蓝色，校正后输出图像相较校正前输出图像的标准差下降程度大于59%以上。可见，通过本实施例的衍射光波导输出图像校正方法得到的输出图像，其图像均匀性更好。评价方式二：使用颜色空间坐标最大距离作为评价体系。将校正前输出图像以及校正后输出图像分别划分为N份。基于划分的校正前输出图像，将图像中的每个像素点的RGB值转化为颜色空间中的二维点，计算第一二维点群的最大距离。基于划分的校正后输出图像，将图像中的每个像素点的RGB值转化为颜色空间中的二维点，计算第二二维点群的最大距离。基于第一二维点群的最大距离和第二二维点群的最大距离，计算校正后输出图像的颜色值优化程度，具体通过如下公式计算得出：其中，K表示校正后输出图像的颜色值优化程度，D1表示第一二维点群的最大距离，D2表示第二二维点群的最大距离。具体的，可先将图像中的每个像素点的RGB的值通过转换矩阵转换为三维坐标x,y以及z的值，具体可通过如下公式-其中一个计算即可实现：然后将三维坐标x,y以及z的值转化为二维uv坐标的坐标值以及，得到如图10中的内部深色A区域，转化具体通过如下公式实现：再根据uv坐标的坐标值以及对应计算x,y以及z的值的最远距离，数据如下表3。将校正前的输出图像分成N份，同样进行上述操作，得到如图11中的内部浅色B区域，和如下表3中x,y以及z的值的最远距离。从表3中可以看出，校正后输出图像的xyz最远距离小于校正前输出图像的xyz最远距离，进一步根据上述公式计算校正后输出图像的颜色值优化程度K=32.38%。则对应的说明，校正后输出图像相较校正前输出图像的图像均匀性更好。进一步的，本发明还提供针对上述衍射光波导输出图像校正方法的评价方法，评价方法具体如下：将校正后输出图像划分为N份图像。基于划分的校正后输出图像，计算校正后输出图像的颜色值标准差。基于N份图像以及校正后输出图像的颜色值标准差，计算输出图像颜色贴合实际预期程度。其中，校正后输出图像的颜色值标准差采用上述公式进行计算，在此不再赘述。输出图像颜色贴合实际预期程度，具体通过如下公式计算：其中，M表示输出图像颜色贴合实际预期程度，M的值越小，表示输出图像颜色越贴合实际预期，是颜色值标准差，α是预计调制的颜色值，N表示输出图像的图像划分个数，x表示某个划分图像的实际输出颜色值。比如，本实施例将校正后的输出图像分成N份，分别提取每份的红色、绿色以及蓝色值，按照上述公式计算标准差，然后按照上述公式计算输出图像颜色贴合实际预期程度，得到数据如下表4。同样的，将校正前输出图像分成N份，分别提取每份的红色、绿色以及蓝色值，按照上述公式计算标准差，然后按照上述公式计算输出图像颜色贴合实际预期程度，得到数据如下表4。进一步的，对于校正后输出图像和校正前输出图像，计算输出图像贴合实际预期程度的提高率，具体通过如下公式计算：其中，P表示输出图像贴合实际预期程度的提高率，M1表示校正前输出图像贴合实际预期程度，M2表示校正后输出图像贴合实际预期程度。通过上述表4和表5可以看出，本实施例的衍射光波导输出图像校正方法具有良好的校正效果，即大大减小衍射光波导输出图像的色差，使得衍射光波导输出图像更符合我们预期。对应的，本发明还提供一种衍射光波导输出图像校正系统，校正系统包括颜色值映射表生成单元和校正单元。其中，颜色值映射表生成单元，用于将第一图像和第二图像的颜色值形成颜色值映射表；其中，第一图像为衍射光波导的输入图像，第二图像为所述衍射光波导的输出图像。其中，校正单元，用于根据上述颜色值映射表对衍射光波导的输出图像进行校正。进一步的，颜色值映射表生成单元包括第一记录模块、第二记录模块以及处理模块。其中，第一记录模块，用于记录第一图像内部区域的颜色值，具体的，在采用光机向衍射光波导输入图像的过程中，记录输入图像的每个输入像素点的位置以及像素点对应的颜色值。其中，第二记录模块，用于记录第二图像内部区域的颜色值。具体的，第二记录模块具体包括采集子模块、提取子模块以及记录子模块。其中，采集子模块，用于采集第二图像，比如可以采用CCD相机。其中，提取子模块，用于提取所述第二图像内部区域每个输出像素点的颜色值。其中，记录子模块，用于记录所述输出像素点的位置以及颜色值。其中，处理模块，用于将第一图像和第二图像在内部区域的相同位置的颜色值进行对应设置，得到颜色值映射表。具体的，将第一图像和第二图像在内部区域的相同像素点的颜色值进行对应设置，得到颜色值映射表。具体的，校正单元包括确定子模块、查询子模块以及校正子模块。其中，确定子模块，用于确定衍射光波导的输出图像的颜色值；其中，查询子模块，用于根据确定的衍射光波导的输出图像的颜色值，在颜色值映射表查询衍射光波导输入图像的对应颜色值；其中，校正子模块，用于基于所述衍射光波导输入图像的对应颜色值，得到校正的衍射光波导的输出图像，校正子模块可以采用衍射光波导。以上实施例仅用以说明本发明的技术方案而非对其限制，尽管参照上述实施例对本发明进行了详细的说明，所属领域的普通技术人员依然可以对本发明的具体实施方式进行修改或者等同替换，这些未脱离本发明精神和范围的任何修改或者等同替换，均在申请待批的本发明的权利要求保护范围之内。
