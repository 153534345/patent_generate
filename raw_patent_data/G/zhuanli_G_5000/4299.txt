标题title
基于轨迹分析的农机作业田地判别方法、装置及电子设备
摘要abst
本发明提供一种基于轨迹分析的农机作业田地判别方法、装置及电子设备，属于勘测技术领域，包括：根据农机在指定时间范围内的定位数据，按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，得到所述农机行驶的多个轨迹段；根据耕作最大间距和农田最小宽幅，确定每个所述轨迹段对应的一个或多个初判农田区域；根据各所述初判农田区域中包含的有效定位点所属的标记直线的方位角，从各所述初判农田区域中确定农机作业田地。其依赖的数据源少，对网络带宽的压力低，并且在设备工作环境恶劣，干扰偏多的情况有更稳定的表现，提高了农机作业田地判别的准确率。
权利要求书clms
1.一种基于轨迹分析的农机作业田地判别方法，其特征在于，包括：根据农机在指定时间范围内的定位数据，按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，得到所述农机行驶的多个轨迹段；根据耕作最大间距和农田最小宽幅，确定每个所述轨迹段对应的一个或多个初判农田区域；根据各所述初判农田区域中包含的有效定位点所属的标记直线的方位角，从各所述初判农田区域中确定农机作业田地。2.根据权利要求1所述的基于轨迹分析的农机作业田地判别方法，其特征在于，所述按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，包括：按照定位点的定位时间先后顺序，根据轨迹分段的约束条件，依次确定各有效定位点所属的轨迹段，并根据各有效定位点之间连线的方位角，依次确定各有效定位点所属的标记直线；其中，所述轨迹分段的约束条件包括同一轨迹段中有效定位点之间的机具类型约束条件、平均速度约束条件、时间间隔约束条件和位移约束条件。3.根据权利要求1或2所述的基于轨迹分析的农机作业田地判别方法，其特征在于，所述按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，包括：按照定位点的定位时间先后顺序，依次确定目标定位点，并根据所述目标定位点的瞬时速度与设定速度阈值之间的比较结果，确定所述目标定位点是否为有效定位点；在所述目标定位点为有效定位点的情况下，确定所述目标定位点所属的轨迹段以及所述目标定位点所属的标记直线。4.根据权利要求1所述的基于轨迹分析的农机作业田地判别方法，其特征在于，所述根据耕作最大间距和农田最小宽幅，确定每个所述轨迹段对应的一个或多个初判农田区域，包括：针对任一轨迹段，根据耕作最大间距，分别向所述轨迹段的两侧扩展，形成第一区域；根据农田最小宽幅，将所述第一区域向内收缩，得到的多边形集合作为所述轨迹段对应的初判农田区域。5.根据权利要求1或4所述的基于轨迹分析的农机作业田地判别方法，其特征在于，所述根据各所述初判农田区域中包含的有效定位点所属的标记直线的方位角，从各所述初判农田区域中确定农机作业田地，包括：针对任一轨迹段，按照所述农机进出所述轨迹段对应的初判农田区域的记录的先后顺序，依次判断所述轨迹段对应的各初判农田区域是否为农机作业田地；在当前初判农田区域包含的有效定位点所属的方位角同向或对向的标记直线数量大于或等于第一阈值的情况下，确定所述当前初判农田区域为农机作业田地。6.根据权利要求5所述的基于轨迹分析的农机作业田地判别方法，其特征在于，所述方法还包括：在当前初判农田区域包含的有效定位点所属的方位角同向或对向的标记直线数量小于第一阈值的情况下，判断所述当前初判农田区域与后一初判农田区域合并后的区域是否为农机作业田地；在所述合并后的区域包含的有效定位点所属的方位角同向或对向的标记直线数量大于或等于所述第一阈值的情况下，确定所述合并后的区域为农机作业田地；其中，所述当前初判农田区域与所述后一初判农田区域之间的记录间隔小于第二阈值。7.一种基于轨迹分析的农机作业田地判别装置，其特征在于，包括：分段模块，用于根据农机在指定时间范围内的定位数据，按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，得到所述农机行驶的多个轨迹段；初判模块，用于根据耕作最大间距和农田最小宽幅，确定每个所述轨迹段对应的一个或多个初判农田区域；确定模块，用于根据各所述初判农田区域中包含的有效定位点所属的标记直线的方位角，从各所述初判农田区域中确定农机作业田地。8.一种电子设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求1至6任一项所述基于轨迹分析的农机作业田地判别方法。9.一种非暂态计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至6任一项所述基于轨迹分析的农机作业田地判别方法。
说明书desc
技术领域本发明涉及勘测技术领域，尤其涉及一种基于轨迹分析的农机作业田地判别方法、装置及电子设备。背景技术目前的工作田地识别，主要有四种：一是依靠提前绘制好工作田地，然后统计车辆在指定田地区域内的轨迹，从而判别出作业的田地；二是通过作业车辆上的摄像头拍摄下工作时的图像信息，通过图像识别，判断车辆是否在田地内，是否在工作，并最终生成作业田地；三是通过轨迹的点线密度与车载设备提供的工作情况判别数据，来估计工作区域；四是工作中操作人员手动上报作业车辆是否工作，依据操作人员上报的工作轨迹，判别作业田地。对于以上四种模式，第一种要求提前绘制好工作田地，而对于地块划分细密零碎，小农场居多，田地划分变更多的情况下，提前绘制的工作量太大，并且难以保证其绘制的准确性。第二种包含图像的上传与识别，要求的网络带宽大，算力需求高，对于大批量的计算，成本太高；第三种则由于轨迹漂移，车载设备维护率低其上传的工作情况信息本身易误差，以及部分农田作业无法采集工作情况信息等问题通常有误判多误差大的问题，准确性往往较低；而第四种，则依赖于工作人员的人工判断，这一判断的准确度与可信性均存疑。发明内容针对现有技术存在的问题，本发明提供一种基于轨迹分析的农机作业田地判别方法、装置及电子设备。第一方面，本发明提供一种基于轨迹分析的农机作业田地判别方法，包括：根据农机在指定时间范围内的定位数据，按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，得到所述农机行驶的多个轨迹段；根据耕作最大间距和农田最小宽幅，确定每个所述轨迹段对应的一个或多个初判农田区域；根据各所述初判农田区域中包含的有效定位点所属的标记直线的方位角，从各所述初判农田区域中确定农机作业田地。可选地，所述按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，包括：按照定位点的定位时间先后顺序，根据轨迹分段的约束条件，依次确定各有效定位点所属的轨迹段，并根据各有效定位点之间连线的方位角，依次确定各有效定位点所属的标记直线；其中，所述轨迹分段的约束条件包括同一轨迹段中有效定位点之间的机具类型约束条件、平均速度约束条件、时间间隔约束条件和位移约束条件。可选地，所述按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，包括：按照定位点的定位时间先后顺序，依次确定目标定位点，并根据所述目标定位点的瞬时速度与设定速度阈值之间的比较结果，确定所述目标定位点是否为有效定位点；在所述目标定位点为有效定位点的情况下，确定所述目标定位点所属的轨迹段以及所述目标定位点所属的标记直线。可选地，所述根据耕作最大间距和农田最小宽幅，确定每个所述轨迹段对应的一个或多个初判农田区域，包括：针对任一轨迹段，根据耕作最大间距，分别向所述轨迹段的两侧扩展，形成第一区域；根据农田最小宽幅，将所述第一区域向内收缩，得到的多边形集合作为所述轨迹段对应的初判农田区域。可选地，所述根据各所述初判农田区域中包含的有效定位点所属的标记直线的方位角，从各所述初判农田区域中确定农机作业田地，包括：针对任一轨迹段，按照所述农机进出所述轨迹段对应的初判农田区域的记录的先后顺序，依次判断所述轨迹段对应的各初判农田区域是否为农机作业田地；在当前初判农田区域包含的有效定位点所属的方位角同向或对向的标记直线数量大于或等于第一阈值的情况下，确定所述当前初判农田区域为农机作业田地。可选地，所述方法还包括：在当前初判农田区域包含的有效定位点所属的方位角同向或对向的标记直线数量小于第一阈值的情况下，判断所述当前初判农田区域与后一初判农田区域合并后的区域是否为农机作业田地；在所述合并后的区域包含的有效定位点所属的方位角同向或对向的标记直线数量大于或等于所述第一阈值的情况下，确定所述合并后的区域为农机作业田地；其中，所述当前初判农田区域与所述后一初判农田区域之间的记录间隔小于第二阈值。第二方面，本发明还提供一种基于轨迹分析的农机作业田地判别装置，包括：分段模块，用于根据农机在指定时间范围内的定位数据，按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，得到所述农机行驶的多个轨迹段；初判模块，用于根据耕作最大间距和农田最小宽幅，确定每个所述轨迹段对应的一个或多个初判农田区域；确定模块，用于根据各所述初判农田区域中包含的有效定位点所属的标记直线的方位角，从各所述初判农田区域中确定农机作业田地。第三方面，本发明还提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现如上所述第一方面所述的基于轨迹分析的农机作业田地判别方法。第四方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现如上所述第一方面所述的基于轨迹分析的农机作业田地判别方法。本发明提供的基于轨迹分析的农机作业田地判别方法、装置及电子设备，通过按照农机定位点的定位时间先后顺序，确定出有效定位点所属的轨迹段和所属的标记直线，得到农机行驶的多个轨迹段，然后根据耕作最大间距和农田最小宽幅来确定每个轨迹段对应的一个或多个初判农田区域，再根据每个初判农田区域里的有效定位点所属的标记直线的方位角从初判农田区域确定出农机作业田地，其依赖的数据源少，对网络带宽的压力低，并且在设备工作环境恶劣，干扰偏多的情况有更稳定的表现，提高了农机作业田地判别的准确率。附图说明为了更清楚地说明本发明或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明提供的基于轨迹分析的农机作业田地判别方法的流程示意图；图2是本发明提供的轨迹段形成第一区域的示意图；图3是本发明提供的确定各有效定位点所属的轨迹段的流程示意图；图4是本发明提供的确定各有效定位点所属的标记直线的流程示意图；图5是本发明提供的基于轨迹分析的农机作业田地判别装置的结构示意图；图6是本发明提供的电子设备的结构示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚，下面将结合本发明中的附图，对本发明中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。图1为本发明提供的基于轨迹分析的农机作业田地判别方法的流程示意图，如图1所示，该方法包括以下步骤：步骤100、根据农机在指定时间范围内的定位数据，按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，得到农机行驶的多个轨迹段。步骤101、根据耕作最大间距和农田最小宽幅，确定每个轨迹段对应的一个或多个初判农田区域。步骤102、根据各初判农田区域中包含的有效定位点所属的标记直线的方位角，从各初判农田区域中确定农机作业田地。具体地，农机的定位数据可以是由安装在农机上的定位设备上传的，定位设备获取定位数据的时间间隔为预先设置的固定值，例如每2秒上传一次定位数据。定位数据可以包括定位点的经纬度坐标，定位点的定位时间，定位点对应的农机所用的机具类型和定位点对应的农机的瞬时速度。有效定位点表示该定位点对应的定位数据是可信的，可以通过对获取的定位数据进行筛选得到有效定位点。可以根据农机在指定时间范围内的定位数据，按照定位点的定位时间先后顺序，依次确定各有效定位点是否属于当前的轨迹段，在当前有效定位点不属于当前的轨迹段的情况下，可以在执行分段操作后，当前有效定位点进入下一个轨迹段。其中，每个轨迹段由属于该轨迹段的任意两个连续的有效定位点之间连成的线段构成。可以理解的是，在仅有一个有效定位点属于当前的轨迹段时，该有效定位点与下一个有效定位点构成的线段构成当前的轨迹段。可以根据农机在指定时间范围内的定位数据，按照定位点的定位时间先后顺序，依次确定各有效定位点是否属于当前的标记直线，在当前有效定位点不属于当前的标记直线的情况下，可以在执行分段操作后，当前有效定位点进入下一条标记直线。其中，每条标记直线根据属于该标记直线的有效定位点，通过最小二乘法计算得到。可以理解的是，在仅有一个有效定位点属于当前的标记直线时，该有效定位点与下一个有效定位点构成的直线即为当前的标记直线。每确定一个新的有效定位点属于当前的标记直线，当前的标记直线都会通过最小二乘法进行更新。当农机在指定时间范围内的定位数据都经过上述处理后，可以得到该农机行驶过程中的多个轨迹段。然后，根据耕作最大间距和农田最小宽幅，可以确定出每个轨迹段对应的一个或多个初判农田区域。可选地，可以针对任一轨迹段，根据耕作最大间距，分别向轨迹段的两侧扩展，形成第一区域，然后根据农田最小宽幅，将第一区域向内收缩，得到的多边形集合作为轨迹段对应的初判农田区域。具体地，任一轨迹段由一条或多条属于该轨迹段的任意两个连续的有效定位点之间连成的线段构成。可以将轨迹段中的每条线段，以垂直于该线段的方向，分别向两侧扩展指定宽度，该宽度被称为耕作最大间距，表示的是农机在实际作业时候的作业轨迹间的最大间隔距离。然后根据扩展后的区域得到第一区域。一种实施方式中，对于任意三个连续的点Pi-1，Pi和Pi+1，其坐标分别为Pi-1，Pi和Pi+1。Pi既属于线段Pi-1Pi上，也属于线段PiPi+1。对于Pi点以垂直于线段Pi-1Pi的方向扩展指定宽度的公式如下：其中，xi、xi-1分别为点Pi、Pi-1的横坐标；yi、yi-1分别为点Pi、Pi-1的纵坐标；m为指定宽度，即耕作最大间距。PiR是Pi点以向右侧垂直于线段Pi-1Pi的方向扩展指定宽度后得到的点的坐标；PiL是Pi点以向左侧垂直于线段Pi-1Pi的方向扩展指定宽度后得到的点的坐标。相类似地，可以推出每条线段扩展指定的宽度后得到的新点的坐标。点Pi-1，Pi和Pi+1可以分别得到新点Pi-1R、Pi-1L、PiR、PiL、PiR、PiL、Pi+1R和Pi+1L。若线段PiL-Pi-1L与线段Pi+1L-PiL相交于点PiL，则根据扩展后的区域得到的第一区域的左侧边界为Pi-1L-PiL-Pi+1L；右侧边界为Pi-1R-PiR-PiR-Pi+1R。若线段PiR-Pi-1R与线段Pi+1R-PiR相交于点PiR，则根据扩展后的区域得到的第一区域的右侧边界为Pi-1R-PiR-Pi+1R；左侧边界为Pi-1L-PiL-PiL-Pi+1L。例如，图2为本发明提供的轨迹段形成第一区域的示意图，如图2所示，该轨迹段由P1、P2、P3三个有效定位点中任意两个连续的点连成的线段构成，P1P2以垂直于该线段的方向，分别向两侧扩展耕作最大间距，得到点P1L、P2L1、P1R和P2R1；P2P3以垂直于该线段的方向，分别向两侧扩展耕作最大间距，得到点P2L2、P3L、P2R2和P3R。其中，点P2L1和点P2L2相交于P2L。则轨迹段P1P2P3根据耕作最大间距，向轨迹段的两侧扩展后形成的第一区域为P1L-P2L-P3L-P3R-P2R1-P2R2-P1R这些点构成的多边形区域。得到第一区域后，可以将第一区域的每条边以垂直于该边的方向向内收缩指定宽度，该指定宽度被称为农田最小宽幅，农田最小宽幅大于耕作最大间距。一种实施方式中，农田最小宽幅等于耕作最大间距与已知的最小田地宽度或常见道路宽度中的最大值之和。可以理解的是，将第一区域按照农田最小宽幅收缩后可以得到多边形集合，该多边形集合可以作为轨迹段对应的初判农田区域。其中，将第一区域的每条边收缩指定宽度的方式与将轨迹段中线段扩展指定宽度的方式类似，此处不再赘述。确定初判农田区域后，可以确定出每一初判农田区域中包含的有效定位点所属的标记直线，从而确定出该初判农田区域所包含的标记直线的方位角，根据初判农田区域所包含的标记直线的方位角，可以确定该初判农田区域是否是农机作业田地。例如，根据农机在作业田地中工作时的实际情况可以得到其轨迹近似直线的方位角，根据初判农田区域所包含的标记直线的方位角和实际情况中轨迹近似直线的方位角的比对情况，可以判定农机是否在该初判农田区域中工作，进而确定该初判农田区域是否是农机作业田地。本发明提供的基于轨迹分析的农机作业田地判别方法，通过按照农机定位点的定位时间先后顺序，确定出有效定位点所属的轨迹段和所属的标记直线，得到农机行驶的多个轨迹段，然后根据耕作最大间距和农田最小宽幅来确定每个轨迹段对应的一个或多个初判农田区域，再根据每个初判农田区域里的有效定位点所属的标记直线的方位角从初判农田区域确定出农机作业田地，其依赖的数据源少，对网络带宽的压力低，并且在设备工作环境恶劣，干扰偏多的情况有更稳定的表现，提高了农机作业田地判别的准确率。可选地，按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，包括：按照定位点的定位时间先后顺序，根据轨迹分段的约束条件，依次确定各有效定位点所属的轨迹段，并根据各有效定位点之间连线的方位角，依次确定各有效定位点所属的标记直线；其中，轨迹分段的约束条件包括同一轨迹段中有效定位点之间的机具类型约束条件、平均速度约束条件、时间间隔约束条件和位移约束条件。具体地，按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段时，可以根据轨迹分段的约束条件来确定各有效定位点是否属于当前的轨迹段。其中，轨迹分段的约束条件包括：同一轨迹段中有效定位点之间的机具类型约束条件。例如，在当前有效定位点对应的农机所用的机具类型与上一有效定位点对应的农机所用的机具类型不同的情况下，可以认为当前有效定位点不属于当前的轨迹段，然后执行分段操作，当前有效定位点进入下一个轨迹段。平均速度约束条件。例如，在当前有效定位点与上一有效定位点的平均速度大于预先设定的阈值的情况下，可以将当前有效定位点视作非工作定位点，继续判断下一有效定位点是否属于当前的轨迹段，或者，可以认为当前有效定位点不属于当前的轨迹段，然后执行分段操作，当前有效定位点进入下一个轨迹段。时间间隔约束条件。例如，在当前有效定位点与当前的轨迹段中的最后一个有效定位点之间的时间间隔大于预先设定的阈值的情况下，可以将当前有效定位点视作非工作定位点，继续判断下一有效定位点是否属于当前的轨迹段，或者，可以认为当前有效定位点不属于当前的轨迹段，然后执行分段操作，当前有效定位点进入下一个轨迹段。位移约束条件。例如，在当前有效定位点与当前的轨迹段中的最后一个有效定位点之间的位移距离大于预先设定的阈值的情况下，可以将当前有效定位点视作非工作定位点，继续判断下一有效定位点是否属于当前的轨迹段，或者，可以认为当前有效定位点不属于当前的轨迹段，然后执行分段操作，当前有效定位点进入下一个轨迹段。一种实施方式中，可以通过平均速度约束条件、时间间隔约束条件和位移约束条件依次判定当前有效定位点。在当前有效定位点与上一有效定位点的平均速度大于预先设定的阈值的情况下，可以将当前有效定位点视作非工作定位点，继续判断下一有效定位点是否属于当前的轨迹段；在当前有效定位点与上一有效定位点的平均速度小于或等于预先设定的阈值的情况下，判断是否存在非工作定位点。在不存在非工作定位点的情况下，判断当前有效定位点属于当前的轨迹段；在存在非工作定位点的情况下，可以继续判断当前有效定位点与当前的轨迹段中的最后一个有效定位点之间的时间间隔是否大于预先设定的阈值。在当前有效定位点与当前的轨迹段中的最后一个有效定位点之间的时间间隔小于或等于预先设定的阈值的情况下，可以认为之前存在的非工作定位点为偶发误差，将之前存在的非工作定位点及当前有效定位点判定为属于当前的轨迹段；在当前有效定位点与当前的轨迹段中的最后一个有效定位点之间的时间间隔大于预先设定的阈值的情况下，判断当前有效定位点与当前的轨迹段中的最后一个有效定位点之间的位移距离是否大于预先设定的阈值。在当前有效定位点与当前的轨迹段中的最后一个有效定位点之间的位移距离大于预先设定的阈值的情况下，认为当前有效定位点不属于当前的轨迹段，然后执行分段操作，当前有效定位点进入下一个轨迹段；在当前有效定位点与当前的轨迹段中的最后一个有效定位点之间的位移距离小于或等于预先设定的阈值的情况下，将当前有效定位点判定为属于当前的轨迹段。按照定位点的定位时间先后顺序，依次确定各有效定位点所属的标记直线时，可以根据各有效定位点之间连线的方位角来依次确定各有效定位点是否属于当前的标记直线。例如，在当前有效定位点和当前的标记直线的最后一个有效定位点构成的直线与当前的标记直线的方位角之差小于预先设置的阈值的情况下，可以认为当前有效定位点属于当前的标记直线。在当前有效定位点和当前的标记直线的最后一个有效定位点构成的直线与当前的标记直线的方位角之差大于或等于预先设置的阈值的情况下，可以认为当前有效定位点不属于当前的标记直线。可选地，按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，包括：按照定位点的定位时间先后顺序，依次确定目标定位点，并根据目标定位点的瞬时速度与设定速度阈值之间的比较结果，确定目标定位点是否为有效定位点；在目标定位点为有效定位点的情况下，确定目标定位点所属的轨迹段以及目标定位点所属的标记直线。具体地，可以先按照定位点的定位时间先后顺序，依次确定各目标定位点是否为有效定位点。在确定了该目标定位点为有效定位点的情况下，再确定该目标定位点所属的轨迹段以及该目标定位点所属的标记直线。其中，可以根据目标定位点对应的农机的瞬时速度和预先设定的速度阈值的比较结果来确定目标点是否为有效定位点。例如，将速度阈值预先设定为农机正常行驶时的最大瞬时速度，在目标定位点对应的农机的瞬时速度大于20km/h的情况下，认为该目标定位点对应的定位数据不可信，并继续确定下一目标定位点是否为有效定位点；在目标定位点对应的农机的瞬时速度小于或等于20km/h的情况下，认为该目标定位点对应的定位数据可信，并继续确定该目标定位点所属的轨迹段以及该目标定位点所属的标记直线。可选地，根据各初判农田区域中包含的有效定位点所属的标记直线的方位角，从各初判农田区域中确定农机作业田地，包括：针对任一轨迹段，按照农机进出轨迹段对应的初判农田区域的记录的先后顺序，依次判断轨迹段对应的各初判农田区域是否为农机作业田地；在当前初判农田区域包含的有效定位点所属的方位角同向或对向的标记直线数量大于或等于第一阈值的情况下，确定当前初判农田区域为农机作业田地。具体地，任一轨迹段可以对应一个或多个初判农田区域，该轨迹段会在各个初判农田区域内进出，且进出各个初判农田区域会存在先后顺序。可以根据农机进出轨迹段所对应的初判农田区域的记录的先后顺序，依次判断该轨迹段对应的各个初判农田区域是否为农机作业田地。可以根据当前初判农田区域所包含的有效定位点所属的方位角同向或对向的标记直线数量和第一阈值的比较结果，确定当前初判农田区域是否为农机作业田地。农机采用回耕法或梭形耕法时，根据农机实际在作业田地中工作的轨迹，可以得到多个定位点，利用最小二乘法可以得到多条这些定位点所属的标记直线，并且此时方位角同向或对向的标记直线数量较多。或者，农机不采用固定的耕作模式，但农机实际在作业田地中工作时，也会在作业田地中反复折返，根据农机实际在作业田地中工作的轨迹所得到的标记直线中，方位角同向或对向的标记直线数量也会比较多。因此，可以根据实际情况来设定第一阈值，然后通过当前初判农田区域所包含的有效定位点所属的方位角同向或对向的标记直线数量和第一阈值的比较结果，判定农机是否在当前初判农田区域工作，从而确定当前初判农田区域是否为农机作业田地。在当前初判农田区域所包含的有效定位点所属的方位角同向或对向的标记直线数量大于或等于第一阈值的情况下，判定农机在当前初判农田区域工作，从而确定当前初判农田区域为农机作业田地。可以理解的是，本发明提供的方法不要求农机按照特定轨迹工作，只需要农机在农机作业田地中作业时的轨迹呈现出一定的规律性就可以判别出农机作业田地。可选地，该方法还包括：在当前初判农田区域包含的有效定位点所属的方位角同向或对向的标记直线数量小于第一阈值的情况下，判断当前初判农田区域与后一初判农田区域合并后的区域是否为农机作业田地；在合并后的区域包含的有效定位点所属的方位角同向或对向的标记直线数量大于或等于第一阈值的情况下，确定合并后的区域为农机作业田地；其中，当前初判农田区域与后一初判农田区域之间的记录间隔小于第二阈值。具体地，在当前初判农田区域所包含的有效定位点所属的方位角同向或对向的标记直线数量小于第一阈值，并且当前初判农田区域的记录和后一初判农田区域的记录的间隔小于第二阈值的情况下，可以将当前初判农田区域和后一农田初判区域合并，然后判断合并后的区域是否为农机作业田地。其中，第二阈值可以根据实际情况设置。如果合并后的区域包含的有效定位点所属的方位角同向或对向的标记直线数量大于或等于第一阈值，则可以确定合并后的区域为农机作业田地。一种实施方式中，可以先将包含的有效定位点所属的方位角同向或对向的标记直线数量小于第一阈值的初判农田区域都标记为待合并区域，然后将连续且连续的待合并区域之间的记录间隔小于第二阈值的待合并区域合并，根据合并后的区域包含的有效定位点所属的方位角同向或对向的标记直线数量和第一阈值的比较结果，判断合并后的区域是否为农机作业田地。下面通过具体应用场景中的流程图对本发明提供的方法做进一步描述。图3为本发明提供的确定各有效定位点所属的轨迹段的流程示意图，如图3所示，PL表示按时序排列的、设备上传的定位数据列表，其包含定位点的经纬度，定位时间，农机当前所用机具类型，定位时的瞬时速度；Pc表示当前正在处理的点。LP表示上一个已被处理的点；LPoS表示当前分段中的最末尾点；SNP表示当前的连续非工作点列。从PL中尝试读取一个定位点Pc。首先，判断Pc的瞬时速度是否大于20km/h。若Pc的瞬时速度大于20km/h，则认为该定位点的数据不可信，不进行后续处理，直接尝试处理PL中的下一个点。若Pc的瞬时速度小于或等于20km/h，则判断是否存在LPoS。若LPoS不存在，则说明Pc即是当前段的第一个点，此时，将Pc记录为LP与LPoS后继续读取PL中的下一个点。若LPoS存在，则判断Pc与LP的机具类型是否相同。若Pc与LP的机具类型不同，则说明Pc与PL必然不属于同一段工作，则分段，将Pc记录为新段的第一个点，将Pc记录为LP与LPoS后，继续读取PL中的下一个点。若Pc与LP的机具类型相同，则判断LP与Pc之间的平均速度是否大于指定值。若LP与Pc之间的平均速度大于8km/h，则将当前点存入SNP，并将Pc记录为LP。若LP与Pc之间的平均速度小于或等于8km/h，则判断SNP是否为空。若SNP为空，则将Pc写入当前段后，将Pc记录为LP与LPoS后继续读取PL中的下一个点。若SNP不为空，则判断Pc与LPoS的时间间隔是否大于60秒。若Pc与LPoS的时间间隔小于或等于60秒，则认为SNP中的一系列点是偶发误差，将SNP中的点添加进当前段，将Pc写入当前段，并将Pc记录为LP与LPoS后继续读取PL中的下一个点。若Pc与LPoS的时间间隔大于60秒，则判断Pc与LPos的位移是否大于5m。若Pc与LPos的位移大于5m，则分段，将Pc记录为新段的第一个点，将Pc记录为LP与LPoS后继续读取PL中的下一个点。若Pc与LPos的位移小于或等于5m，则清空SNP，将Pc写入当前段后，将Pc记录为LP与LPoS后继续读取PL中的下一个点。图4为本发明提供的确定各有效定位点所属的标记直线的流程示意图，如图4所示，PL表示按时序排列的、设备上传的定位数据列表，其包含定位点的经纬度，定位时间，农机当前所用机具类型，定位时的瞬时速度；N表示当前直线的编号，位于同一直线的点，将被标记相同的直线编号；D表示当前直线的方位角，通过根据直线上所有点通过最小二乘法计算得到；方位角是以正北方向为0刻度，以顺时针方向为正方向的角度；Pe表示当前直线的目前最后一个点；Line表示当前直线目前参与D计算的点的集合；Pp表示暂存点，允许直线过程中发生一次“突变”；Dc表示Pe到Pc的方位角。首先，从PL中尝试读取一个定位点Pc。然后，判断Pe是否为空。若Pe为null，则不存在当前直线，将Pc设置为当前直线的第一个点，同时也是当前直线目前的最末尾点Pe，将Pc推入Line，尝试更新D，但当前直线只有一个点，无法得到D，D仍然为null，然后开始下一个点的处理。若Pe不为null，则判断D是否存在。若D不存在，则说明Pc是当前直线的第二个点，将Pc设为当前直线目前的最末尾点Pe，将Pc推入Line，尝试更新D，此时直线中只有两个点，这两点的方位角即为目前直线的D，然后开始下一个点的处理。若D存在，则计算Pe到Pc的方位角Dc，并与D比较。若Dc与D相差较小，则认为Pc属于当前直线，将Pc设为当前直线目前的末尾点Pe，将Pc推入Line，尝试更新D，然后开始下一个点的处理。若Dc与D相差较大，则判断是否已经存在一个暂存点Pp。若Pp不存在，则将Pc设置为Pp，然后开始下一个点的处理。若Pp存在，则以Pp和Pc构成一条新的直线，将Pp与Pc都标记为N，清空Pp，然后开始下一个点的处理。下面对本发明提供的农机作业田地判别装置进行描述，下文描述的农机作业田地判别装置与上文描述的农机作业田地判别方法可相互对应参照。图5为本发明提供的基于轨迹分析的农机作业田地判别装置的结构示意图，如图5所示，该装置包括：分段模块500，用于根据农机在指定时间范围内的定位数据，按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，得到农机行驶的多个轨迹段；其中，每个轨迹段包含多条标记直线段；初判模块510，用于根据每个轨迹段包含的标记直线段、耕作最大间距和农田最小宽幅，确定每个轨迹段对应的一个或多个初判农田区域；确定模块520，用于根据各初判农田区域中包含的标记直线段的方位角，从各初判农田区域中确定农机作业田地。可选地，按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，包括：按照定位点的定位时间先后顺序，根据轨迹分段的约束条件，依次确定各有效定位点所属的轨迹段，并根据各有效定位点之间连线的方位角，依次确定各有效定位点所属的标记直线；其中，轨迹分段的约束条件包括同一轨迹段中有效定位点之间的机具类型约束条件、平均速度约束条件、时间间隔约束条件和位移约束条件。可选地，按照定位点的定位时间先后顺序，依次确定各有效定位点所属的轨迹段以及各有效定位点所属的标记直线，包括：按照定位点的定位时间先后顺序，依次确定目标定位点，并根据目标定位点的瞬时速度与设定速度阈值之间的比较结果，确定目标定位点是否为有效定位点；在目标定位点为有效定位点的情况下，确定目标定位点所属的轨迹段以及目标定位点所属的标记直线。可选地，根据耕作最大间距和农田最小宽幅，确定每个轨迹段对应的一个或多个初判农田区域，包括：针对任一轨迹段，根据耕作最大间距，分别向轨迹段的两侧扩展，形成第一区域；根据农田最小宽幅，将第一区域向内收缩，得到的多边形集合作为轨迹段对应的初判农田区域。可选地，根据各初判农田区域中包含的有效定位点所属的标记直线的方位角，从各初判农田区域中确定农机作业田地，包括：针对任一轨迹段，按照农机进出轨迹段对应的初判农田区域的记录的先后顺序，依次判断轨迹段对应的各初判农田区域是否为农机作业田地；在当前初判农田区域包含的有效定位点所属的方位角同向或对向的标记直线数量大于或等于第一阈值的情况下，确定当前初判农田区域为农机作业田地。可选地，确定模块520还用于：在当前初判农田区域包含的有效定位点所属的方位角同向或对向的标记直线数量小于第一阈值的情况下，判断当前初判农田区域与后一初判农田区域合并后的区域是否为农机作业田地；在合并后的区域包含的有效定位点所属的方位角同向或对向的标记直线数量大于或等于第一阈值的情况下，确定合并后的区域为农机作业田地；其中，当前初判农田区域与后一初判农田区域之间的记录间隔小于第二阈值。在此需要说明的是，本发明提供的上述装置，能够实现上述方法实施例所实现的所有方法步骤，且能够达到相同的技术效果，在此不再对本实施例中与方法实施例相同的部分及有益效果进行具体赘述。图6为本发明提供的电子设备的结构示意图，如图6所示，该电子设备可以包括：处理器610、通信接口620、存储器630和通信总线640，其中，处理器610，通信接口620，存储器630通过通信总线640完成相互间的通信。处理器610可以调用存储器630中的逻辑指令，以执行上述各实施例提供的任一所述基于轨迹分析的农机作业田地判别方法。此外，上述的存储器630中的逻辑指令可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。在此需要说明的是，本发明提供的电子设备，能够实现上述方法实施例所实现的所有方法步骤，且能够达到相同的技术效果，在此不再对本实施例中与方法实施例相同的部分及有益效果进行具体赘述。另一方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现以执行上述各实施例提供的任一所述基于轨迹分析的农机作业田地判别方法。在此需要说明的是，本发明提供的非暂态计算机可读存储介质，能够实现上述方法实施例所实现的所有方法步骤，且能够达到相同的技术效果，在此不再对本实施例中与方法实施例相同的部分及有益效果进行具体赘述。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分所述的方法。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
