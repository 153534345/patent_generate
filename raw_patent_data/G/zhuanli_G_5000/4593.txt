标题title
一种IRIG-B码对时系统
摘要abst
本发明公开了一种IRIG‑B码对时系统，为应用提供毫秒和/或微秒报时，包括IRIG‑B码解码器,日期时间生成器，控制寄存器，对时驱动软件，误差生成器，自适应跟踪器，毫秒微秒生成器和应用接口器。本发明实现在传统IRIG‑B码报时的基础上，通过时间增量累加的方式产生分数维本地时间，从而实现毫秒、微秒报时。
权利要求书clms
1.一种IRIG-B码对时系统，其特征在于：包括IRIG-B码解码器，日期时间生成器，控制寄存器，对时驱动软件，误差生成器，自适应跟踪器，毫秒微秒生成器，应用接口器，为应用提供毫秒和/或微秒报时。2.根据权利要求1所述的IRIG-B码对时系统，其特征在于：所述IRIG-B码解码器用于对输入的IRIG-B信号进行窗口采样统计，按累计数值大的电平为该窗口电平值，以此实现对信号短时干扰的滤波整形。3.根据权利要求1所述的IRIG-B码对时系统，其特征在于：所述日期时间生成器用于处理闰年和/或闰秒，按BCD码生成时间数据。4.根据权利要求3所述的IRIG-B码对时系统，其特征在于：所述时间数据精确的秒，由年、月、日、时、分、秒组成。5.根据权利要求1所述的IRIG-B码对时系统，其特征在于：所述误差生成器用于生成误差μ，根据所述IRIG-B码解码器输出IRIG-B码帧头之时刻按计算所述误差μ；其中：μ:误差CLK：除所述对时驱动软件外的工作时钟；M：所述毫秒微秒生成器的当前数值，初值为0；S：所述毫秒微秒生成器的整秒计数值，由对时驱动软件根据CLK频率和M的位数设置。6.根据权利要求5所述的IRIG-B码对时系统，其特征在于：所述自适应跟踪器用于生成时间增量Z；在闭环控制时，按、计算；在开环控制时，直接输出积分环初值Y0；其中：I——比例积分调节积分系数，由对时驱动软件设置；P——比例积分调节比例系数，由对时驱动软件设置；Y——比例积分调节积分环当前值，初值Y0由对时驱动软件设置；Z——比例积分调节输出值，每CLK时间增量；t——时间。7.根据权利要求6所述的IRIG-B码对时系统，其特征在于：所述毫秒微秒生成器根据自适应跟踪器输出的时间增量Z，按产生分数维本地时间M，按BCD码生成毫秒和/或微秒；其中，MOD为取模运算。8.根据权利要求1所述的IRIG-B码对时系统，其特征在于：所述控制寄存器存储并输出所述对时驱动软件配置的控制信息。9.根据权利要求1所述的IRIG-B码对时系统，其特征在于：所述对时驱动软件通过本地总线配置、控制CPLD或FPGA内各模块的工作，并读时间给时间使用系统。10.根据权利要求9所述的IRIG-B码对时系统，其特征在于：所述对时驱动软件通过本地总线设置所述控制寄存器中的闰年、闰秒控制使能位。
说明书desc
技术领域本发明涉及授时技术领域，具体是一种IRIG-B码对时系统。背景技术在一些系统中的控制操作需要时钟同步，如电力行业中监控、继电保护等系统。这些系统中同步时钟一般是通过一个IRIG-B码对时装置获得的。IRIG-B码对时装置通过接收北斗/GPS授时信号而产生年、月、日、时、分和秒报时。随着时代的进步，一些系统控制有了更细时间粒度报时的需求，在传统IRIG-B码报时的基础上，增加毫秒、微秒报时具有重要的现实实用意义。发明内容本发明针对以上技术问题，提供一种IRIG-B码对时系统，所采取的技术方案如下：一种IRIG-B码对时系统，为应用提供毫秒和/或微秒报时，包括IRIG-B码解码器,日期时间生成器，控制寄存器，对时驱动软件，误差生成器，自适应跟踪器，毫秒微秒生成器和应用接口器。进一步地，所述IRIG-B码解码器用于对输入的IRIG-B信号进行窗口采样统计，按累计数值大的电平为该窗口电平值，以此实现对信号短时干扰的滤波整形。进一步地，所述日期时间生成器用于处理闰年、闰秒，按BCD码生成年、月、日、时、分和秒。进一步地，所述误差生成器用于生成误差μ，根据所述IRIG-B码解码器输出IRIG-B码帧头之时刻按计算所述误差μ；其中：μ:误差CLK：除所述对时驱动软件外的工作时钟；M：所述毫秒微秒生成器的当前数值，初值为0；S：所述毫秒微秒生成器的整秒计数值，由CLK频率和M的位数决定，由对时驱动软件设置。进一步地，所述自适应跟踪器用于生成时间增量Z；在闭环控制时，按、计算；在开环控制时，直接输出积分环初值Y0；其中：I——比例积分调节积分系数，由对时驱动软件设置；P——比例积分调节比例系数，由对时驱动软件设置；Y——比例积分调节积分环当前值，初值Y0由对时驱动软件设置；Z——比例积分调节输出值，每CLK时间增量；t——时间。进一步地，所述毫秒微秒生成器根据自适应跟踪器输出的时间增量Z，按产生分数维本地时间M，按BCD码生成毫秒微秒；其中，MOD为取模运算。进一步地，所述控制寄存器存储并输出所述对时驱动软件配置的控制信息。进一步地，所述对时驱动软件通过本地总线配置、控制CPLD/FPGA内各模块的工作，并读时间给时间使用系统。进一步地，所述对时驱动软件通过本地总线设置所述控制寄存器中的闰年、闰秒控制使能位。本发明实现在传统IRIG-B码报时的基础上，通过时间增量累加的方式产生分数维本地时间，进而实现毫秒、微秒报时。附图说明图1：本发明一种IRIG-B码对时系统框图。具体实施方式为使得本发明的发明目的、特征、优点能够更加的明显和易懂，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，下面所描述的实施例仅仅是本发明一部分实施例，而非全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其它实施例，都属于本发明保护的范围。一种IRIG-B码对时系统，包括八个模块，分别是：IRIG-B码解码器，日期时间生成器，控制寄存器，对时驱动软件，误差生成器，自适应跟踪器，毫秒微秒生成器和应用接口器。下面以CPLD/FPGA实现为例来描述本系统的具体实现方法，当然亦可以用cpu通过软件方式来实现。为叙述方便，定义如下变量。CLK——除对时驱动软件外的工作时钟；M——毫秒微秒生成器当前数值，初值为0；S——毫秒微秒生成器整秒计数值，由对时驱动软件根据CLK频率和M的位数设置；I——比例积分调节积分系数，由对时驱动软件设置；P——比例积分调节比例系数，由对时驱动软件设置；Y——比例积分调节积分环当前值，初值Y0由对时驱动软件设置；Z——比例积分调节输出值，每CLK时间增量；μ——误差；t——时间。其中MOD为取模运算。①.应用接口器通过局部总线与时间应用设备相连，通过它可以初始化整个CPLD/FPGA、配置控制寄存器、读取时间和状态信息。②.对时驱动软件是安装在时间应用设备上的，它通过应用接口器读/写整个cpld/fpga。按国家授时中心指令设置控制寄存器中的闰年、闰秒控制使能位，日期时间生成器按使能位的控制生成闰年、闰秒。③.控制寄存器存储并输出对时驱动软件配置的控制信息，比如：当前年初值、自适应跟踪器积分环初值Y0、比例积分调节积分系数I、比例积分调节比例系数P、开/闭环等控制信息。④.IRIG-B对时TTL电平信号由接收装置产生，这种接收装置接收来自北斗/GPS授时卫星信号并输出IRIG-B对时TTL电平信号，市面上有多种成熟产品供选用，此不赘述。⑤.IRIG-B码解码器对输入的IRIG-B对时TTL电平信号进行窗口采样统计，按累计数值大的电平信号为该窗口电平值，以此实现信号滤波整形，输出IRIG-B码帧头位置给误差生成器，并把解码后的年、月、日、时、分和秒的各域数值给日期时间生成器。⑥.日期时间生成器处理闰年、闰秒等，按BCD码生成年、月、日、时、分和秒，输出给应用接口器。⑦.误差生成器生成误差μ，根据IRIG-B码解码器输出IRIG-B码帧头之时刻按计算误差μ，该误差输出给自适应跟踪器。⑧.自适应跟踪器生成时间增量Z。在闭环控制时，按、计算；在开环控制时，直接输出积分环初值Y0。⑨.毫秒微秒生成器根据自适应跟踪器输出的时间增量Z，按产生分数维本地时间M，按BCD码生成毫秒微秒输出给应用接口器，M输出给误差生成器，从而完成实现毫秒、微秒报时。最后应说明的是：以上实施例仅用以说明本发明而并非限制本发明所描述的技术方案；因此，尽管本说明书参照上述的各个实施例对本发明已进行了详细的说明，但是，本领域的普通技术人员应当理解，仍然可以对本发明进行修改或等同替换；而一切不脱离本发明的精神和范围的技术方案及其改进，其均应涵盖在本发明的权利要求范围中。
