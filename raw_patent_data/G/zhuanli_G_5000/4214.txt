标题title
一种用于无线扫码设备的在线升级方法和装置
摘要abst
本发明涉及一种用于无线扫码设备的在线升级方法和装置，包括无线扫码设备启动时，无线扫码设备与远程服务器进行身份认证；远程服务器根据无线扫码设备的身份信息，确定无线扫码设备所属第一业务组；远程服务器将第一业务组中的更新文件队列中的文件编号所对应的更新文件发送至无线扫码设备。本发明实现了无线扫码设备与远程服务器间的数据安全，并且无线扫码设备只能接收到它所在区域组的相关数据，节省了无线扫码设备的存储空间，同时保障了业务数据的安全。
权利要求书clms
1.一种用于无线扫码设备的在线升级方法，其特征在于，所述方法包括：步骤S1：无线扫码设备启动时，所述无线扫码设备与远程服务器之间进行身份认证，当所述无线扫码设备通过身份认证执行步骤S2；所述步骤S2：所述远程服务器根据所述无线扫码设备的身份信息，确定所述无线扫码设备所属的第一业务组；步骤S3：所述远程服务器判断所述第一业务组是否存在，若所述第一业务组存在，执行步骤S4；所述步骤S4：所述远程服务器判断所述第一业务组的文件队列中的全部文件编号所对应的文件是否已经发送至所述无线扫码设备，若是执行步骤S5；所述步骤S5：所述远程服务器将所述无线扫码设备加入所述第一业务组，并为所述无线扫码设备建立待发送更新文件队列，将需要为所述无线扫码设备发送的所述更新文件的文件编号放入所述无线扫码设备的待发送更新文件队列；步骤S6：所述远程服务器按照所述无线扫码设备的待发送更新文件队列中的文件编号的顺序，在所述第一业务组中广播发送所述无线扫码设备的更新文件。2.根据权利要求1所述的用于无线扫码设备的在线升级方法，其特征在于，所述步骤S5中具体包括：当所述无线扫码设备加入所述第一业务组时，所述远程服务器获取所述第一业务组的文件队列中已完成发送的文件所对应的文件编号；根据所述文件队列中已完成发送的文件所对应的文件编号，为所述无线扫码设备建立所述待发送更新文件队列；根据所述第一业务组中未完成文件接收的其他无线扫码设备的待发送更新文件队列，得到所述无线扫码设备的待发送更新文件队列中的文件编号。3.根据权利要求2所述的用于无线扫码设备的在线升级方法，其特征在于，所述方法还包括，当所述步骤S3中所述远程服务器判断所述第一业务组不存在，则执行步骤S7；所述步骤S7：所述远程服务器建立所述第一业务组，并获取所述第一业务组内需要发送的全部文件的时间信息和优先级；按照所述文件的时间信息和优先级，确定所述文件的文件编号；基于所述文件编号为所述第一业务组建立文件队列；所述方法还包括，当所述步骤S4中所述远程服务器判断所述第一业务组的文件队列中的全部文件编号所对应的文件已经发送至所述无线扫码设备，则执行步骤S8；所述步骤S8：所述远程服务器建立第二业务组，并获取所述第二业务组内需要发送的全部文件的时间信息和优先级；按照所述文件的时间信息和优先级，确定所述文件的文件编号；基于所述文件编号为所述第二业务组建立文件队列。4.根据权利要求3所述的用于无线扫码设备的在线升级方法，其特征在于，所述步骤S5具体包括；获取所述第一业务组的文件队列中的所有文件编号，并将所述第一业务组的文件队列中的所有文件编号放入所述无线扫码设备的待发送更新队列中；当所述无线扫码设备加入所述第一业务组时，所述远程服务器获取所述第一业务组内其他所述无线扫码设备的待发送更新文件队列中未完成发送的更新文件所对应的文件编号；计算所述第一业务组内其他所述无线扫码设备的待发送更新文件队列中未完成发送的更新文件所对应的文件编号的并集，得到所有未完成发送的更新文件的文件编号；从所述无线扫码设备的待发送更新文件队列中删除与所述所有未完成发送的更新文件的文件编号中相同的文件编号。5.根据权利要求3所述的用于无线扫码设备的在线升级方法，其特征在于，所述按照所述文件的时间信息和优先级，确定所述文件的文件编号，具体包括：获取各所述文件在时间指数列表中的第一排序号，所述时间指数列表是根据各所述文件的时间先后顺序由高到低进行排序的列表；获取各所述文件在优先级列表中的第二排序号，所述优先级列表是根据所述文件的优先级指数由高到低的列表；所述第二排序号为n的第n个更新文件的所述第一排序号为m；当n＞m时，所述第二排序号为n的第n个更新文件的文件编号为n；当n＜m时，所述第二排序号为n的第n个更新文件的文件编号为m；当至少2个文件的文件编号相同时，比较各文件的第二排序号，将具有相同文件编号中第二排序号在前的文件作为在先文件，将具有相同文件编号中第二排序号在后的文件作为在后文件，调整各文件的文件编号，得到所述文件的文件编号。6.根据权利要求3所述的用于无线扫码设备的在线升级方法，其特征在于，所述步骤S1中具体包括：所述无线扫码设备向所述远程服务器发送建立安全连接的请求消息，所述请求消息中包括所述无线扫码设备生成的第一随机数；所述无线扫码设备接收所述远程服务器发送的公钥证书和第二随机数；所述无线扫码设备生成第三随机数，并利用所述公钥证书对所述第三随机数、所述无线扫码设备的区域编码和设备编码进行加密后，得到身份验证消息，并将所述身份验证消息发送至所述远程服务器；所述远程服务器利用所述公钥证书对所述身份验证消息进行解密后，利用所述区域编码和所述设备编码对所述无线扫码设备进行身份验证。7.一种用于无线扫码设备的在线升级装置，其特征在于，所述装置包括：身份验证模块，用于无线扫码设备启动时，所述无线扫码设备与远程服务器之间进行身份认证，当所述无线扫码设备通过身份认证执行确定业务组模块；所述确定业务组模块，用于所述远程服务器根据所述无线扫码设备的身份信息，确定所述无线扫码设备所属的第一业务组；第一判断模块，用于所述远程服务器判断所述第一业务组是否存在，若所述第一业务组存在，执行第二判断模块；所述第二判断模块，用于所述远程服务器判断所述第一业务组的文件队列中的全部文件编号所对应的文件是否已经发送至所述无线扫码设备，若是执行第一处理模块；所述第一处理模块，用于所述远程服务器将所述无线扫码设备加入所述第一业务组，并为所述无线扫码设备建立待发送更新文件队列，将需要为所述无线扫码设备发送的所述更新文件的文件编号放入所述无线扫码设备的待发送更新文件队列；发送模块，用于所述远程服务器按照所述无线扫码设备的待发送更新文件队列中的文件编号的顺序，在所述第一业务组中广播发送所述无线扫码设备的更新文件。8.根据权利要求7所述的用于无线扫码设备的在线升级装置，其特征在于，所述第一处理模块，具体用于当所述无线扫码设备加入所述第一业务组时，所述远程服务器获取所述第一业务组的文件队列中已完成发送的文件所对应的文件编号；根据所述文件队列中已完成发送的文件所对应的文件编号，为所述无线扫码设备建立所述待发送更新文件队列；根据所述第一业务组中未完成文件接收的其他无线扫码设备的待发送更新文件队列，得到所述无线扫码设备的待发送更新文件队列中的文件编号。9.根据权利要求8所述的用于无线扫码设备的在线升级装置，其特征在于，所述装置还包括第二处理模块，当所述第一判断模块中所述远程服务器判断所述第一业务组不存在，则执行所述第二处理模块；所述第二处理模块，用于所述远程服务器建立所述第一业务组，并获取所述第一业务组内需要发送的全部文件的时间信息和优先级；按照所述文件的时间信息和优先级，确定所述文件的文件编号；基于所述文件编号为所述第一业务组建立文件队列；所述装置还包括第三处理模块，当所述远程服务器判断所述第一业务组的文件队列中的全部文件编号所对应的文件已经发送至所述无线扫码设备，则执行所述第三处理模块；所述第三处理模块，用于所述远程服务器建立第二业务组，并获取所述第二业务组内需要发送的全部文件的时间信息和优先级；按照所述文件的时间信息和优先级，确定所述文件的文件编号；基于所述文件编号为所述第二业务组建立文件队列。10.根据权利要求9所述的用于无线扫码设备的在线升级装置，其特征在于，所述第一处理模块，具体用于获取所述第一业务组的文件队列中的所有文件编号，并将所述第一业务组的文件队列中的所有文件编号放入所述无线扫码设备的待发送更新队列中；当所述无线扫码设备加入所述第一业务组时，所述远程服务器获取所述第一业务组内其他所述无线扫码设备的待发送更新文件队列中未完成发送的更新文件所对应的文件编号；计算所述第一业务组内其他所述无线扫码设备的待发送更新文件队列中未完成发送的更新文件所对应的文件编号的并集，得到所有未完成发送的更新文件的文件编号；从所述无线扫码设备的待发送更新文件队列中删除与所述所有未完成发送的更新文件的文件编号中相同的文件编号。
说明书desc
技术领域本发明涉及计算机技术领域，尤其涉及一种用于无线扫码设备的在线升级方法和装置。背景技术随着科技的发展，社会的信息化水平不断提高，条形码和二维码的应用也开始愈加广泛。条码和二维码技术也因其准确可靠，数据输入速度快，经济便宜以及自由度大等优势开始被各大行业接受和使用。但是目前条形码和二维码的应用环境越来越复杂，扫码枪的常规连接传输方式已经无法满足现在医药、物流、零售仓储等大面积环境下的工作需求。无线扫码枪的出现，以及这些无线扫码枪在越来越多的各类区域的大量的应用，使得如何对这些扫码枪进行维护以及保证业务数据的安全成为目前亟需解决的技术问题。发明内容本发明所要解决的技术问题是针对现有技术的不足，提供一种用于无线扫码设备的在线升级方法和装置。本发明解决上述技术问题的技术方案如下：一种用于无线扫码设备的在线升级方法，所述方法包括：步骤S1：无线扫码设备启动时，所述无线扫码设备与远程服务器之间进行身份认证，当所述无线扫码设备通过身份认证执行步骤S2；所述步骤S2：所述远程服务器根据所述无线扫码设备的身份信息，确定所述无线扫码设备所属的第一业务组；步骤S3：所述远程服务器判断所述第一业务组是否存在，若所述第一业务组存在，执行步骤S4；所述步骤S4：所述远程服务器判断所述第一业务组的文件队列中的全部文件编号所对应的文件是否已经发送至所述无线扫码设备，若是执行步骤S5；所述步骤S5：所述远程服务器将所述无线扫码设备加入所述第一业务组，并为所述无线扫码设备建立待发送更新文件队列，将需要为所述无线扫码设备发送的所述更新文件的文件编号放入所述无线扫码设备的待发送更新文件队列；步骤S6：所述远程服务器按照所述无线扫码设备的待发送更新文件队列中的文件编号的顺序，在所述第一业务组中广播发送所述无线扫码设备的更新文件。在上述技术方案的基础上，本发明还可以做如下改进。进一步地，所述步骤S5中具体包括：当所述无线扫码设备加入所述第一业务组时，所述远程服务器获取所述第一业务组的文件队列中已完成发送的文件所对应的文件编号；根据所述文件队列中已完成发送的文件所对应的文件编号，为所述无线扫码设备建立所述待发送更新文件队列；根据所述第一业务组中未完成文件接收的其他无线扫码设备的待发送更新文件队列，得到所述无线扫码设备的待发送更新文件队列中的文件编号。进一步地，所述方法还包括，当所述步骤S3中所述远程服务器判断所述第一业务组不存在，则执行步骤S7；所述步骤S7：所述远程服务器建立所述第一业务组，并获取所述第一业务组内需要发送的全部文件的时间信息和优先级；按照所述文件的时间信息和优先级，确定所述文件的文件编号；基于所述文件编号为所述第一业务组建立文件队列；所述方法还包括，当所述步骤S4中所述远程服务器判断所述第一业务组的文件队列中的全部文件编号所对应的文件已经发送至所述无线扫码设备，则执行步骤S8；所述步骤S8：所述远程服务器建立第二业务组，并获取所述第二业务组内需要发送的全部文件的时间信息和优先级；按照所述文件的时间信息和优先级，确定所述文件的文件编号；基于所述文件编号为所述第二业务组建立文件队列。进一步地，所述步骤S5具体包括；获取所述第一业务组的文件队列中的所有文件编号，并将所述第一业务组的文件队列中的所有文件编号放入所述无线扫码设备的待发送更新队列中；当所述无线扫码设备加入所述第一业务组时，所述远程服务器获取所述第一业务组内其他所述无线扫码设备的待发送更新文件队列中未完成发送的更新文件所对应的文件编号；计算所述第一业务组内其他所述无线扫码设备的待发送更新文件队列中未完成发送的更新文件所对应的文件编号的并集，得到所有未完成发送的更新文件的文件编号；从所述无线扫码设备的待发送更新文件队列中删除与所述所有未完成发送的更新文件的文件编号中相同的文件编号。进一步地，所述按照所述文件的时间信息和优先级，确定所述文件的文件编号，具体包括：获取各所述文件在时间指数列表中的第一排序号，所述时间指数列表是根据各所述文件的时间先后顺序由高到低进行排序的列表；获取各所述文件在优先级列表中的第二排序号，所述优先级列表是根据所述文件的优先级指数由高到低的列表；所述第二排序号为n的第n个更新文件的所述第一排序号为m；当n＞m时，所述第二排序号为n的第n个更新文件的文件编号为n；当n＜m时，所述第二排序号为n的第n个更新文件的文件编号为m；当至少2个文件的文件编号相同时，比较各文件的第二排序号，将具有相同文件编号中第二排序号在前的文件作为在先文件，将具有相同文件编号中第二排序号在后的文件作为在后文件，调整各文件的文件编号，得到所述文件的文件编号。进一步地，所述步骤S1中具体包括：所述无线扫码设备向所述远程服务器发送建立安全连接的请求消息，所述请求消息中包括所述无线扫码设备生成的第一随机数；所述无线扫码设备接收所述远程服务器发送的公钥证书和第二随机数；所述无线扫码设备生成第三随机数，并利用所述公钥证书对所述第三随机数、所述无线扫码设备的区域编码和设备编码进行加密后，得到身份验证消息，并将所述身份验证消息发送至所述远程服务器；所述远程服务器利用所述公钥证书对所述身份验证消息进行解密后，利用所述区域编码和所述设备编码对所述无线扫码设备进行身份验证。本方法发明的有益效果是：提出了一种用于无线扫码设备的在线升级方法，包括无线扫码设备启动时，所述无线扫码设备与远程服务器之间进行身份认证，当所述无线扫码设备通过身份认证，所述远程服务器根据所述无线扫码设备的身份信息，确定所述无线扫码设备所属第一业务组；所述远程服务器判断所述第一业务组是否存在，若所述第一业务组存在，所述远程服务器判断所述第一业务组中的更新文件队列中的全部文件编号所对应的更新文件是否已经发送至所述无线扫码设备，所述远程服务器将所述无线扫码设备加入第二业务组，并为所述无线扫码设备建立待发送更新文件队列，将需要为所述无线扫码设备发送的所述更新文件的文件编号放入所述无线扫码设备的待发送更新文件队列，所述远程服务器按照所述无线扫码设备的待发送更新文件队列中的文件编号的顺序，在所述第二业务组中广播发送所述无线扫码设备的更新文件。本发明实现了无线扫码设备与远程服务器间的数据安全，实现了对无线扫码设备的在线升级管理，无线扫码设备只能接收到它所在组的相关数据，节省了无线扫码设备的存储空间，并保障了升级数据的安全。本发明解决上述技术问题的另一技术方案如下：身份验证模块，用于无线扫码设备启动时，所述无线扫码设备与远程服务器之间进行身份认证，当所述无线扫码设备通过身份认证执行确定业务组模块；所述确定业务组模块，用于所述远程服务器根据所述无线扫码设备的身份信息，确定所述无线扫码设备所属的第一业务组；第一判断模块，用于所述远程服务器判断所述第一业务组是否存在，若所述第一业务组存在，执行第二判断模块；所述第二判断模块，用于所述远程服务器判断所述第一业务组的文件队列中的全部文件编号所对应的文件是否已经发送至所述无线扫码设备，若是执行第一处理模块；所述第一处理模块，用于所述远程服务器将所述无线扫码设备加入所述第一业务组，并为所述无线扫码设备建立待发送更新文件队列，将需要为所述无线扫码设备发送的所述更新文件的文件编号放入所述无线扫码设备的待发送更新文件队列；发送模块，用于所述远程服务器按照所述无线扫码设备的待发送更新文件队列中的文件编号的顺序，在所述第一业务组中广播发送所述无线扫码设备的更新文件。进一步地，所述第一处理模块，具体用于当所述无线扫码设备加入所述第一业务组时，所述远程服务器获取所述第一业务组的文件队列中已完成发送的文件所对应的文件编号；根据所述文件队列中已完成发送的文件所对应的文件编号，为所述无线扫码设备建立所述待发送更新文件队列；根据所述第一业务组中未完成文件接收的其他无线扫码设备的待发送更新文件队列，得到所述无线扫码设备的待发送更新文件队列中的文件编号。进一步地，所述装置还包括第二处理模块，当所述第一判断模块中所述远程服务器判断所述第一业务组不存在，则执行所述第二处理模块；所述第二处理模块，用于所述远程服务器建立所述第一业务组，并获取所述第一业务组内需要发送的全部文件的时间信息和优先级；按照所述文件的时间信息和优先级，确定所述文件的文件编号；基于所述文件编号为所述第一业务组建立文件队列；所述装置还包括第三处理模块，当所述远程服务器判断所述第一业务组的文件队列中的全部文件编号所对应的文件已经发送至所述无线扫码设备，则执行所述第三处理模块；所述第三处理模块，用于所述远程服务器建立第二业务组，并获取所述第二业务组内需要发送的全部文件的时间信息和优先级；按照所述文件的时间信息和优先级，确定所述文件的文件编号；基于所述文件编号为所述第二业务组建立文件队列。进一步地，所述第一处理模块，具体用于获取所述第一业务组的文件队列中的所有文件编号，并将所述第一业务组的文件队列中的所有文件编号放入所述无线扫码设备的待发送更新队列中；当所述无线扫码设备加入所述第一业务组时，所述远程服务器获取所述第一业务组内其他所述无线扫码设备的待发送更新文件队列中未完成发送的更新文件所对应的文件编号；计算所述第一业务组内其他所述无线扫码设备的待发送更新文件队列中未完成发送的更新文件所对应的文件编号的并集，得到所有未完成发送的更新文件的文件编号；从所述无线扫码设备的待发送更新文件队列中删除与所述所有未完成发送的更新文件的文件编号中相同的文件编号。本发明附加的方面的优点将在下面的描述中部分给出，部分将从下面的描述中变得明显，或通过本发明实践了解到。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对本发明实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面所描述的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明的实施例所述的一种用于无线扫码设备的在线升级方法的流程示意图；图2为本发明的另一实施例所述的一种用于无线扫码设备的在线升级方法的流程示意图；图3为本发明的另一实施例所述的一种用于无线扫码设备的在线升级方法的流程示意图；图4为本发明的另一实施例所述的一种用于无线扫码设备的在线升级方法的流程示意图；图5为本发明的一种用于无线扫码设备的在线升级装置的模块示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明的一部分实施例，而不是全部实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都应属于本发明保护的范围。如图1-4所述，本发明实施例所述的一种用于无线扫码设备的在线升级方法，包括以下步骤：步骤101、无线扫码设备启动时，所述无线扫码设备与远程服务器之间进行身份认证，当所述无线扫码设备通过身份认证执行步骤102。步骤102：所述远程服务器根据所述无线扫码设备的身份信息，确定所述无线扫码设备所属的第一业务组。步骤103：所述远程服务器判断所述第一业务组是否存在，若所述第一业务组存在，执行步骤104。步骤104：所述远程服务器判断所述第一业务组的文件队列中的全部文件编号所对应的文件是否已经发送至所述无线扫码设备，若是执行步骤105。步骤105：所述远程服务器将所述无线扫码设备加入所述第一业务组，并为所述无线扫码设备建立待发送更新文件队列，将需要为所述无线扫码设备发送的所述更新文件的文件编号放入所述无线扫码设备的待发送更新文件队列。步骤106：所述远程服务器按照所述无线扫码设备的待发送更新文件队列中的文件编号的顺序，在所述第一业务组中广播发送所述无线扫码设备的更新文件。在本实施例中，无线扫码设备包括各类无线扫码装置，有无线扫码枪、无线扫码支付设备和以及各类无线扫码支付终端，本实施例中不具体指出是支付设备或是扫码装置，此外，无线扫码设备可以通过内部设置PSAM芯片或ESAM芯片，实现无线扫码设备和服务器之间的加密连接。目前，存在很多的大型连锁商超或是专卖店，无线扫码支付设备或是无线扫码装置大量广泛的应用于各个场所中，而各个扫码设备受限于硬件的限制以及安全限制，内部无法存储大量的数据，且大量的业务数据存储在无线扫码设备上也存在安全隐患，根据无线扫码设备的使用场景或是使用的地理区域，将无线扫码设备分置于不同的业务组中，各个组可以根据实际情况进行划分或是命名，这样对这些业务数据也是一种安全的保护，同时各个无线扫码设备可以及时下载所需的数据信息。通过手动设置无线扫码设备所属区域编号和设备编号，其中区域编号可以是北京地区、山东济南、山东威海等，也可以是化妆品区域、小食品区域和日用品区域。通过各个区域的区域编号将无线扫码设备物理隔离了，此外，区域编码也可以是无线扫码设备的型号，本申请不再赘述。进一步地，所述步骤105中具体包括：201、当所述无线扫码设备加入所述第一业务组时，所述远程服务器获取所述第一业务组的文件队列中已完成发送的文件所对应的文件编号。202、根据所述文件队列中已完成发送的文件所对应的文件编号，为所述无线扫码设备建立所述待发送更新文件队列。203、根据所述第一业务组中未完成文件接收的其他无线扫码设备的待发送更新文件队列，得到所述无线扫码设备的待发送更新文件队列中的文件编号。进一步地，还包括，当所述步骤103中所述远程服务器判断所述第一业务组不存在，则执行步骤107；107、所述远程服务器建立所述第一业务组，并获取所述第一业务组内需要发送的全部文件的时间信息和优先级；按照所述文件的时间信息和优先级，确定所述文件的文件编号；基于所述文件编号为所述第一业务组建立文件队列。当所述步骤104中所述远程服务器判断所述第一业务组的文件队列中的全部文件编号所对应的文件已经发送至所述无线扫码设备，则执行步骤108；108、所述远程服务器建立第二业务组，并获取所述第二业务组内需要发送的全部文件的时间信息和优先级；按照所述文件的时间信息和优先级，确定所述文件的文件编号；基于所述文件编号为所述第二业务组建立文件队列。进一步地，所述步骤105具体包括；301、获取所述第一业务组的文件队列中的所有文件编号，并将所述第一业务组的文件队列中的所有文件编号放入所述无线扫码设备的待发送更新队列中。302、当所述无线扫码设备加入所述第一业务组时，所述远程服务器获取所述第一业务组内其他所述无线扫码设备的待发送更新文件队列中未完成发送的更新文件所对应的文件编号。303、计算所述第一业务组内其他所述无线扫码设备的待发送更新文件队列中未完成发送的更新文件所对应的文件编号的并集，得到所有未完成发送的更新文件的文件编号。304、从所述无线扫码设备的待发送更新文件队列中删除与所述所有未完成发送的更新文件的文件编号中相同的文件编号。进一步地，步骤108中按照所述文件的时间信息和优先级，确定所述文件的文件编号，具体包括：401、获取各所述文件在时间指数列表中的第一排序号，所述时间指数列表是根据各所述文件的时间先后顺序由高到低进行排序的列表。402、获取各所述文件在优先级列表中的第二排序号，所述优先级列表是根据所述文件的优先级指数由高到低的列表。403、所述第二排序号为n的第n个更新文件的所述第一排序号为m，比较n和n的大小。404、当n＞m时，所述第二排序号为n的第n个更新文件的文件编号为n。406、当n＜m时，所述第二排序号为n的第n个更新文件的文件编号为m。405、当至少2个文件的文件编号相同时，比较各文件的第二排序号，将具有相同文件编号中第二排序号在前的文件作为在先文件，将具有相同文件编号中第二排序号在后的文件作为在后文件，调整各文件的文件编号，得到所述文件的文件编号。应理解，m和n都是正整数。应理解，分别按照时间指数和优先级对更新文件进行排序，得到两个排序队列，当优先级队列中的编号大于时间指数队列中的编号时，以优先级队列中的编号作为文件编号，否则以时间指数队列中的编号作为文件编号，最后以优先级编号作为排序优先级，调整所有更新文件的文件编号。进一步地，所述步骤101中具体包括：501、所述无线扫码设备向所述远程服务器发送建立安全连接的请求消息，所述请求消息中包括所述无线扫码设备生成的第一随机数。502、所述无线扫码设备接收所述远程服务器发送的公钥证书和第二随机数。503、所述无线扫码设备生成第三随机数，并利用所述公钥证书对所述第三随机数、所述无线扫码设备的区域编码和设备编码进行加密后，得到身份验证消息，并将所述身份验证消息发送至所述远程服务器。504、所述远程服务器利用所述公钥证书对所述身份验证消息进行解密后，利用所述区域编码和所述设备编码对所述无线扫码设备进行身份验证。基于本实施例所涉及的一种用于无线扫码设备的在线升级方法，包括无线扫码设备启动时，所述无线扫码设备与远程服务器之间进行身份认证，当所述无线扫码设备通过身份认证执行步骤S2；所述远程服务器根据所述无线扫码设备的身份信息，确定所述无线扫码设备所属第一业务组；所述远程服务器判断所述第一业务组是否存在，若所述第一业务组存在，执行步骤S4；步骤S4：所述远程服务器判断所述第一业务组中的更新文件队列中的全部文件编号所对应的更新文件是否已经发送至所述无线扫码设备，若否执行步骤S5；步骤S5：所述远程服务器将所述无线扫码设备加入第二业务组，并为所述无线扫码设备建立待发送更新文件队列，将需要为所述无线扫码设备发送的所述更新文件的文件编号放入所述无线扫码设备的待发送更新文件队列；步骤S6：所述远程服务器按照所述无线扫码设备的待发送更新文件队列中的文件编号的顺序，在所述第二业务组中广播发送所述远程服务器的更新文件。本发明实现了无线扫码设备与远程服务器间的数据安全，并且无线扫码设备只能接收到它所在区域组的相关数据，节省了无线扫码设备的存储空间，以及保障了业务数据的安全。如图5所示，一种用于无线扫码设备的在线升级装置，所述装置包括：身份验证模块，用于无线扫码设备启动时，所述无线扫码设备与远程服务器之间进行身份认证，当所述无线扫码设备通过身份认证执行确定业务组模块；所述确定业务组模块，用于所述远程服务器根据所述无线扫码设备的身份信息，确定所述无线扫码设备所属的第一业务组；第一判断模块，用于所述远程服务器判断所述第一业务组是否存在，若所述第一业务组存在，执行第二判断模块；所述第二判断模块，用于所述远程服务器判断所述第一业务组的文件队列中的全部文件编号所对应的文件是否已经发送至所述无线扫码设备，若是执行第一处理模块；所述第一处理模块，用于所述远程服务器将所述无线扫码设备加入所述第一业务组，并为所述无线扫码设备建立待发送更新文件队列，将需要为所述无线扫码设备发送的所述更新文件的文件编号放入所述无线扫码设备的待发送更新文件队列；发送模块，用于所述远程服务器按照所述无线扫码设备的待发送更新文件队列中的文件编号的顺序，在所述第一业务组中广播发送所述无线扫码设备的更新文件。进一步地，所述第一处理模块，具体用于当所述无线扫码设备加入所述第一业务组时，所述远程服务器获取所述第一业务组的文件队列中已完成发送的文件所对应的文件编号；根据所述文件队列中已完成发送的文件所对应的文件编号，为所述无线扫码设备建立所述待发送更新文件队列；根据所述第一业务组中未完成文件接收的其他无线扫码设备的待发送更新文件队列，得到所述无线扫码设备的待发送更新文件队列中的文件编号。进一步地，所述装置还包括第二处理模块，当所述第一判断模块中所述远程服务器判断所述第一业务组不存在，则执行所述第二处理模块；所述第二处理模块，用于所述远程服务器建立所述第一业务组，并获取所述第一业务组内需要发送的全部文件的时间信息和优先级；按照所述文件的时间信息和优先级，确定所述文件的文件编号；基于所述文件编号为所述第一业务组建立文件队列；所述装置还包括第三处理模块，当所述远程服务器判断所述第一业务组的文件队列中的全部文件编号所对应的文件已经发送至所述无线扫码设备，则执行所述第三处理模块；所述第三处理模块，用于所述远程服务器建立第二业务组，并获取所述第二业务组内需要发送的全部文件的时间信息和优先级；按照所述文件的时间信息和优先级，确定所述文件的文件编号；基于所述文件编号为所述第二业务组建立文件队列。进一步地，所述第一处理模块，具体用于获取所述第一业务组的文件队列中的所有文件编号，并将所述第一业务组的文件队列中的所有文件编号放入所述无线扫码设备的待发送更新队列中；当所述无线扫码设备加入所述第一业务组时，所述远程服务器获取所述第一业务组内其他所述无线扫码设备的待发送更新文件队列中未完成发送的更新文件所对应的文件编号；计算所述第一业务组内其他所述无线扫码设备的待发送更新文件队列中未完成发送的更新文件所对应的文件编号的并集，得到所有未完成发送的更新文件的文件编号；从所述无线扫码设备的待发送更新文件队列中删除与所述所有未完成发送的更新文件的文件编号中相同的文件编号。需要说明的是，在本文中，诸如“第一”和“第二”等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。可以理解的是，本文描述的这些实施例可以用硬件、软件、固件、中间件、微码或其组合来实现。对于硬件实现，处理单元可以实现在一个或多个专用集成电路、数字信号处理器、数字信号处理设备、可编程逻辑设备、现场可编程门阵列、通用处理器、控制器、微控制器、微处理器、用于执行本申请所述功能的其它电子单元或其组合中。对于软件实现，可通过执行本文所述功能的单元来实现本文所述的技术。软件代码可存储在存储器中并通过处理器执行。存储器可以在处理器中或在处理器外部实现。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本发明的范围。在本申请所提供的实施例中，应该理解到，所揭露的装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。以上所述实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围，均应包含在本发明的保护范围之内。以上，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到各种等效的修改或替换，这些修改或替换都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以权利要求的保护范围为准。
