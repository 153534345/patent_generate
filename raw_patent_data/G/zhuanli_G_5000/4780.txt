标题title
一种数据的存储控制方法及装置
摘要abst
本发明涉及数据存储技术领域，揭露了一种数据的存储控制方法及装置，包括：根据数据存储指令启动数据存储系统，其中数据存储系统由私有端、公有端及用户端组成，根从用户端中索引出待存储数据及待存储数据的加密结点数，基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集，根据所述切分数据集和待存储数据生成数据加密树，将数据加密树的根结点加密数据存储至用户端，叶子结点加密数据按照比例分别存储至私有端和公有端，内部结点加密数据按照比例分别存储至私有端和用户端，完成数据的存储控制。本发明主要目的在于解决对数据实现存储控制时面临大规模存储和安全性相矛盾的问题。
权利要求书clms
1.一种数据的存储控制方法，其特征在于，所述方法包括：接收用户端发起的数据存储指令，根据所述数据存储指令启动数据存储系统，其中数据存储系统由私有端、公有端及用户端组成，其中私有端、公有端各自存储有验证用户端合法性的密钥对；基于所述私有端、公有端各自的密钥对验证用户端的合法性，当合法性验证通过时，根据所述数据存储指令从用户端中索引出待存储数据；计算所述待存储数据的数据量，利用数据量确定待存储数据的加密结点数，并基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集；根据所述切分数据集和待存储数据生成数据加密树，其中，数据加密树由一个根结点和多个叶子结点组成，根结点对应根结点加密数据，由待存储数据生成，每个叶子结点和内部结点分别对应叶子结点加密数据和内部结点加密数据，均由切分数据集生成；将数据加密树的根结点加密数据存储至用户端，叶子结点加密数据按照比例分别存储至私有端和公有端，内部结点加密数据按照比例分别存储至私有端和用户端，完成数据的存储控制。2.如权利要求1所述的数据的存储控制方法，其特征在于，所述密钥对的存储过程包括：接收用户端加入至数据存储系统的申请指令，根据所述申请指令获取用户端的用户端属性，其中用户端属性包括用户端的用户名及用户密码、用户端IP地址、用户端端口值、用户端注册地、用户端运行许可信息；将所述用户端属性发送至数据存储系统的审核平台，当审核平台审核通过用户端的申请指令时，将用户端属性作为第一哈希算法的输入值执行哈希运算，得到用户端哈希值；接收用户端的手写用户名签名，其中所述手写用户名签名与用户端的用户名一致；将所述手写用户名签名第二哈希算法的输入值执行哈希运算，得到签名哈希值；获取数据存储系统中每个私有端的私有端属性，及每个公有端的的公有端属性，将每个私有端属性或公有端属性作为第一哈希算法的输入值执行哈希运算，分别得到私有端哈希值及公有端哈希值；按照用户端哈希值、私有端哈希值及签名哈希值的顺序生成私有端的密钥对，其中，私有端的密钥对包括私有公钥及私有私钥，私有公钥存储至私有端，私有私钥存储至用户端；按照用户端哈希值、公有端哈希值及签名哈希值的顺序生成公有端的密钥对，其中，公有端的密钥对包括公有公钥及公有私钥，公有公钥存储至公有端，公有私钥存储至用户端。3.如权利要求2所述的数据的存储控制方法，其特征在于，所述基于所述私有端、公有端各自的密钥对验证用户端的合法性，包括：生成用户端的合法验证指令，根据所述合法验证指令接收操作用户端的用户所输入的手写待验证签名；计算所述手写待验证签名与手写用户名签名的相似度值，若相似度值不高于指定相似阈值，则确定用户端为非法用户端；若相似度值高于指定相似阈值，获取用户端中存储的所有私钥集，其中私钥集由私有私钥和公有私钥组成；依次确定每个私有私钥与对应的私有端的私有公钥是否一致，及每个公有私钥与对应的公有端的公有公钥是否一致；直至所有的私有私钥与私有公钥，及公有私钥与公有公钥均一致，确定用户端具有合法性，验证通过。4.如权利要求3所述的数据的存储控制方法，其特征在于，所述利用数据量确定待存储数据的加密结点数，包括：接收设定的加密结点最高数与加密结点最低数；将所述数据量作为如下公式的入参，并结合加密结点最高数与加密结点最低数确定待存储数据的加密结点数：其中，Ai表示第i个用户端的待存储数据的加密结点数，Bytei表示第i个用户端的待存储数据的数据量，jmax表示加密结点最高数，jmin表示加密结点最低数。5.如权利要求4所述的数据的存储控制方法，其特征在于，所述基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集，包括：计算所述加密结点数是否为2的指数倍数，若加密结点数不为2的指数倍数，则增大加密结点数，直至加密结点数为2的指数倍数，确定加密结点数为指形结点数；计算指形结点数对2的指数值，同时按照待存储数据的数据结构的先后顺序，将待存储数据一切为2，得到2切分数据集，其中，2切分数据集中包括2组2切分数据；判断2切分数据集的切分次数是否等于指数值，若2切分数据集的切分次数不等于指数值，则重复切分步骤，即按照2切分数据集中每组2切分数据的数据结构的先后顺序，将2切分数据一切为2，得到4分切分数据集，其中，4切分数据集中包括4组4切分数据；直至2n切分数据集的切分次数n等于指数值，汇总2切分数据集、4切分数据、...、2n切分数据集得到切分数据集。6.如权利要求5所述的数据的存储控制方法，其特征在于，所述根据所述切分数据集和待存储数据生成数据加密树，包括：根据所述指形结点数生成空结点树，其中空结点树包括根结点、内部结点及叶子结点；根据预设的第一数据加密方法，对所述待存储数据执行加密并压缩，得到根结点加密数据，将根结点加密数据放入至根结点；将切分数据集中的2切分数据集、4切分数据、...、2n-1切分数据集按照第二数据加密方法执行加密并压缩，得到内部结点加密数据，并将内部结点加密数据分别放入至内部结点；将2n切分数据集按照第三数据加密方法执行加密并压缩，得到叶子结点加密数据，并将叶子结点加密数据分别放入至叶子结点；汇总包括根结点加密数据、内部结点加密数据及叶子结点加密数据的所有根结点、内部结点及叶子结点，得到所述数据加密树。7.如权利要求6所述的数据的存储控制方法，其特征在于，所述根据所述指形结点数生成空结点树，包括：生成根结点，其中根结点的数量为1；在根结点的下方分裂出2个内部结点，且2个内部结点分别位于根结点的左右，判断此时结点的分裂次数是否等于指形结点数，若此时分裂次数等于指形结点数，则将内部结点确定为叶子结点，由根结点及叶子结点组成空结点树，空结点树包括根结点及叶子结点；若此时分裂次数小于指形结点数，则在每个内部结点的下方继续分裂出2个内部结点，并判断此时分裂次数是否等于指形结点数，直至分裂次数等于指形结点数时，由根结点、内部结点及叶子结点组成空结点树，空结点树包括根结点、内部结点及叶子结点。8.如权利要求7所述的数据的存储控制方法，其特征在于，所述根据预设的第一数据加密方法，对所述待存储数据执行加密并压缩，得到根结点加密数据，包括：接收设定的最小压缩单元，其中最小压缩单元由数据头、随机标记符、结点标识符组成；确定所述数据头的最大可容纳量，根据所述最大可容纳量拆分待存储数据，得到多组数据头存储数据；生成与多组数据头存储数据相同数量的最小压缩单元，并依次将每组数据头存储数据存入至每个最小压缩单元；同时将每个最小压缩单元的结点标识符设置为20，并基于加密算法生成第一公钥和第一私钥；将第一公钥作为每个最小压缩单元的随机标记符，第一私钥存储于私有端后，对每个最小压缩单元执行压缩处理，得到根结点加密数据。9.如权利要求8所述的数据的存储控制方法，其特征在于，所述将切分数据集中的2切分数据集、4切分数据、...、2n-1切分数据集按照第二数据加密方法执行加密并压缩，得到内部结点加密数据，包括：按照每个内部结点在数据加密树的结构，将内部结点分为第一层内部结点、第二层内部结点、...、第n-1层内部结点；提取第一层内部结点的加密压缩算法，并根据第一层内部结点的加密压缩算法对2切分数据集执行加密压缩，得到2切分加密数据集；提取第二层内部结点、...、第n-1层内部结点的加密压缩算法，分别对4切分数据、...、n-2切分数据集执行加密压缩，得到4切分加密数据集、...、2n-1切分加密数据集；当完成对2切分数据集、4切分数据、...、2n-1切分数据集时，生成第二公钥和第二私钥，并将第二私钥存储于用户端，第二公钥存储至私有端后，汇总2切分加密数据集、...、2n-1切分加密数据集得到所述内部结点加密数据。10.如权利要求9所述的数据的存储控制方法，其特征在于，所述将2n切分数据集按照第三数据加密方法执行加密并压缩，得到叶子结点加密数据，包括：判断所述2n切分数据集中每个2n切分数据的数据量与所述最小压缩单元的数据头的最大可容纳量的大小关系；若每个2n切分数据的数据量均大于所述数据头的最大可容纳量，则对数据头的最大可容纳量执行扩容操作；直至每个2n切分数据的数据量均小于或等于所述数据头的最大可容纳量时，生成与2n切分数据集相同数量的最小压缩单元，并依次将每个2n切分数据存储至每个最小压缩单元；同时将每个最小压缩单元的结点标识符设置为2n，并基于加密算法生成第三公钥和第三私钥；将第三公钥作为每个最小压缩单元的随机标记符，并将第三私钥存储于私有端后，对每个最小压缩单元执行压缩处理，得到叶子结点加密数据。
说明书desc
技术领域本发明涉及一种数据的存储控制方法及装置，属于数据存储技术领域。背景技术目前伴随科技发展，目前各类跟行业、个人诉求息息相关的系统被相继开发，极大的提高了人民的生活便捷性，但伴随而来的是各类系统的数据量呈现井喷式增加，如何高效存储数据是当下急需解决的问题。常用的数据的存储控制方法主要依赖于用户端、私有端和公有端，即通过用户端、私有端和公有端的想好配合实现数据的存储与控制。其中，用户端直接面向用户与用户交互，私有端根据用户端所在企业、公司、科研机构等单位而构建的可提供数据高安全性的云端系统，公有端一般由第三方提供商提供，根据企业、公司、科研机构等单位需求，构建出一种可大规模存储但与其他单位存储资源共用的云端。相对来说，用户端对于数据的交流性和共享性较差，私有端更加安全，但不适合大规模存储，公有端虽然可实现大规模存储，但安全性较低。因此部分数据存储方法采取交叉存储的方法，即将数据分为重要数据和非重要数据，其中重要数据存储至私有端，非重要数据存储至公有端，这种方法实现了公有端和私有端的优势，但并非所有数据均可分为重要数据和非重要数据，此外，简单的数据拆分当发生数据泄露时，对于数据的溯源也极其困难，故当下数据存储控制依然面临大规模存储和安全性相矛盾的问题。发明内容本发明提供一种数据的存储控制方法、装置及计算机可读存储介质，其主要目的在于解决对数据实现存储控制时面临大规模存储和安全性相矛盾的问题。为实现上述目的，本发明提供的一种数据的存储控制方法，包括：接收用户端发起的数据存储指令，根据所述数据存储指令启动数据存储系统，其中数据存储系统由私有端、公有端及用户端组成，其中私有端、公有端各自存储有验证用户端合法性的密钥对；基于所述私有端、公有端各自的密钥对验证用户端的合法性，当合法性验证通过时，根据所述数据存储指令从用户端中索引出待存储数据；计算所述待存储数据的数据量，利用数据量确定待存储数据的加密结点数，并基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集；根据所述切分数据集和待存储数据生成数据加密树，其中，数据加密树由一个根结点和多个叶子结点组成，根结点对应根结点加密数据，由待存储数据生成，每个叶子结点和内部结点分别对应叶子结点加密数据和内部结点加密数据，均由切分数据集生成；将数据加密树的根结点加密数据存储至用户端，叶子结点加密数据按照比例分别存储至私有端和公有端，内部结点加密数据按照比例分别存储至私有端和用户端，完成数据的存储控制。可选地，所述密钥对的存储过程包括：接收用户端加入至数据存储系统的申请指令，根据所述申请指令获取用户端的用户端属性，其中用户端属性包括用户端的用户名及用户密码、用户端IP地址、用户端端口值、用户端注册地、用户端运行许可信息。将所述用户端属性发送至数据存储系统的审核平台，当审核平台审核通过用户端的申请指令时，将用户端属性作为第一哈希算法的输入值执行哈希运算，得到用户端哈希值；接收用户端的手写用户名签名，其中所述手写用户名签名与用户端的用户名一致；将所述手写用户名签名第二哈希算法的输入值执行哈希运算，得到签名哈希值；获取数据存储系统中每个私有端的私有端属性，及每个公有端的的公有端属性，将每个私有端属性或公有端属性作为第一哈希算法的输入值执行哈希运算，分别得到私有端哈希值及公有端哈希值；按照用户端哈希值、私有端哈希值及签名哈希值的顺序生成私有端的密钥对，其中，私有端的密钥对包括私有公钥及私有私钥，私有公钥存储至私有端，私有私钥存储至用户端；按照用户端哈希值、公有端哈希值及签名哈希值的顺序生成公有端的密钥对，其中，公有端的密钥对包括公有公钥及公有私钥，公有公钥存储至公有端，公有私钥存储至用户端。可选地，所述基于所述私有端、公有端各自的密钥对验证用户端的合法性，包括：生成用户端的合法验证指令，根据所述合法验证指令接收操作用户端的用户所输入的手写待验证签名；计算所述手写待验证签名与手写用户名签名的相似度值，若相似度值不高于指定相似阈值，则确定用户端为非法用户端；若相似度值高于指定相似阈值，获取用户端中存储的所有私钥集，其中私钥集由私有私钥和公有私钥组成；依次确定每个私有私钥与对应的私有端的私有公钥是否一致，及每个公有私钥与对应的公有端的公有公钥是否一致；直至所有的私有私钥与私有公钥，及公有私钥与公有公钥均一致，确定用户端具有合法性，验证通过。可选地，所述利用数据量确定待存储数据的加密结点数，包括：接收设定的加密结点最高数与加密结点最低数；将所述数据量作为如下公式的入参，并结合加密结点最高数与加密结点最低数确定待存储数据的加密结点数：其中，Ai表示第i个用户端的待存储数据的加密结点数，Bytei表示第i个用户端的待存储数据的数据量，jmax表示加密结点最高数，jmin表示加密结点最低数。可选地，所述基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集，包括：计算所述加密结点数是否为2的指数倍数，若加密结点数不为2的指数倍数，则增大加密结点数，直至加密结点数为2的指数倍数，确定加密结点数为指形结点数；计算指形结点数对2的指数值，同时按照待存储数据的数据结构的先后顺序，将待存储数据一切为2，得到2切分数据集，其中，2切分数据集中包括2组2切分数据；判断2切分数据集的数据量是否等于指数值，若2切分数据集的数据量不等于指数值，则重复切分步骤，即按照2切分数据集中每组2切分数据的数据结构的先后顺序，将2切分数据一切为2，得到4分切分数据集，其中，4切分数据集中包括4组4切分数据；直至2n切分数据集的切分次数n等于指数值，汇总2切分数据集、4切分数据、…、2n切分数据集得到切分数据集。可选地，所述根据所述切分数据集和待存储数据生成数据加密树，包括：根据所述指形结点数生成空结点树，其中空结点树包括根结点、内部结点及叶子结点；根据预设的第一数据加密方法，对所述待存储数据执行加密并压缩，得到根结点加密数据，将根结点加密数据放入至根结点；将切分数据集中的2切分数据集、4切分数据、…、2n-1切分数据集按照第二数据加密方法执行加密并压缩，得到内部结点加密数据，并将内部结点加密数据分别放入至内部结点；将2n切分数据集按照第三数据加密方法执行加密并压缩，得到叶子结点加密数据，并将叶子结点加密数据分别放入至叶子结点；汇总包括根结点加密数据、内部结点加密数据及叶子结点加密数据的所有根结点、内部结点及叶子结点，得到所述数据加密树。可选地，所述根据所述指形结点数生成空结点树，包括：生成根结点，其中根结点的数量为1；在根结点的下方分裂出2个内部结点，且2个内部结点分别位于根结点的左右，判断此时结点的分裂次数是否等于指形结点数，若此时分裂次数等于指形结点数，则将内部结点确定为叶子结点，由根结点及叶子结点组成空结点树，空结点树包括根结点及叶子结点；若此时分裂次数小于指形结点数，则在每个内部结点的下方继续分裂出2个内部结点，并判断此时分裂次数是否等于指形结点数，直至分裂次数等于指形结点数时，由根结点、内部结点及叶子结点组成空结点树，空结点树包括根结点、内部结点及叶子结点。可选地，所述根据预设的第一数据加密方法，对所述待存储数据执行加密并压缩，得到根结点加密数据，包括：接收设定的最小压缩单元，其中最小压缩单元由数据头、随机标记符、结点标识符组成；确定所述数据头的最大可容纳量，根据所述最大可容纳量拆分待存储数据，得到多组数据头存储数据；生成与多组数据头存储数据相同数量的最小压缩单元，并依次将每组数据头存储数据存入至每个最小压缩单元；同时将每个最小压缩单元的结点标识符设置为20，并基于加密算法生成第一公钥和第一私钥；将第一公钥作为每个最小压缩单元的随机标记符，第一私钥存储于私有端后，对每个最小压缩单元执行压缩处理，得到根结点加密数据。可选地，所述将切分数据集中的2切分数据集、4切分数据、…、2n-1切分数据集按照第二数据加密方法执行加密并压缩，得到内部结点加密数据，包括：按照每个内部结点在数据加密树的结构，将内部结点分为第一层内部结点、第二层内部结点、…、第n-1层内部结点；提取第一层内部结点的加密压缩算法，并根据第一层内部结点的加密压缩算法对2切分数据集执行加密压缩，得到2切分加密数据集；提取第二层内部结点、…、第n-1层内部结点的加密压缩算法，分别对4切分数据、…、n-2切分数据集执行加密压缩，得到4切分加密数据集、…、2n-1切分加密数据集；当完成对2切分数据集、4切分数据、…、2n-1切分数据集时，生成第二公钥和第二私钥，并将第二私钥存储于用户端，第二公钥存储至私有端后，汇总2切分加密数据集、…、2n-1切分加密数据集得到所述内部结点加密数据。可选地，所述将2n切分数据集按照第三数据加密方法执行加密并压缩，得到叶子结点加密数据，包括：判断所述2n切分数据集中每个2n切分数据的数据量与所述最小压缩单元的数据头的最大可容纳量的大小关系；若每个2n切分数据的数据量均大于所述数据头的最大可容纳量，则对数据头的最大可容纳量执行扩容操作；直至每个2n切分数据的数据量均小于或等于所述数据头的最大可容纳量时，生成与2n切分数据集相同数量的最小压缩单元，并依次将每个2n切分数据存储至每个最小压缩单元；同时将每个最小压缩单元的结点标识符设置为2n，并基于加密算法生成第三公钥和第三私钥；将第三公钥作为每个最小压缩单元的随机标记符，并将第三私钥存储于私有端后，对每个最小压缩单元执行压缩处理，得到叶子结点加密数据。为了解决上述问题，本发明还提供一种数据的存储控制装置，所述装置包括：用户端验证模块，用于接收用户端发起的数据存储指令，根据所述数据存储指令启动数据存储系统，其中数据存储系统由私有端、公有端及用户端组成，其中私有端、公有端各自存储有验证用户端合法性的密钥对，基于所述私有端、公有端各自的密钥对验证用户端的合法性，当合法性验证通过时，根据所述数据存储指令从用户端中索引出待存储数据；数据切分模块，用于计算所述待存储数据的数据量，利用数据量确定待存储数据的加密结点数，并基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集；数据加密树生成模块，用于根据所述切分数据集和待存储数据生成数据加密树，其中，数据加密树由一个根结点和多个叶子结点组成，根结点对应根结点加密数据，由待存储数据生成，每个叶子结点和内部结点分别对应叶子结点加密数据和内部结点加密数据，均由切分数据集生成；存储控制模块，用于将数据加密树的根结点加密数据存储至用户端，叶子结点加密数据按照比例分别存储至私有端和公有端，内部结点加密数据按照比例分别存储至私有端和用户端，完成数据的存储控制。为了解决上述问题，本发明还提供一种电子设备，所述电子设备包括：至少一个处理器；以及，与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以实现上述所述的数据的存储控制方法。为了解决上述问题，本发明还提供一种计算机可读存储介质，所述计算机可读存储介质中存储有至少一个指令，所述至少一个指令被电子设备中的处理器执行以实现上述所述的数据的存储控制方法。相比于背景技术所述问题，本发明实施例先接收用户端发起的数据存储指令，根据所述数据存储指令启动数据存储系统，其中数据存储系统由私有端、公有端及用户端组成，其中私有端、公有端各自存储有验证用户端合法性的密钥对，密钥对的主要作用在于验证用户端的合法性，从而提高对数据的存储控制的安全性，当合法性验证通过时，根据所述数据存储指令从用户端中索引出待存储数据，计算所述待存储数据的数据量，利用数据量确定待存储数据的加密结点数，并基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集，本发明实施例的主要目的在于不断反复的切分待存储数据，从而达到待存储数据的碎片化，这样即使部分切分数据泄露也不会造成重要的安全隐患，因此进一步地，根据所述切分数据集和待存储数据生成数据加密树，其中，数据加密树由一个根结点和多个叶子结点组成，根结点对应根结点加密数据，由待存储数据生成，每个叶子结点和内部结点分别对应叶子结点加密数据和内部结点加密数据，均由切分数据集生成，其中数据加密树的主要作用在于体现出对待存储数据的切分逻辑，最后，将数据加密树的根结点加密数据存储至用户端，叶子结点加密数据按照比例分别存储至私有端和公有端，内部结点加密数据按照比例分别存储至私有端和用户端，完成数据的存储控制，可见通过数据的碎片化，在保证数据安全性的前提下，可同时将数据存储至公有端和私有端，充分结合了公有端和私有端各自的优点，此外，本发明实施例所构建的数据加密树，相比于背景技术所述，将数据拆分为重要数据和非重要数据分别存储至私有端和公有端来说，解决了数据泄露时的溯源问题，因为数据加密树具有层层递进的逻辑关系，其中根结点对应根结点加密数据，每个叶子结点和内部结点分别对应叶子结点加密数据和内部结点加密数据，而每个叶子结点和内部结点均由根结点的数据生成，因此一旦发生数据丢失或泄露时，可高效快速的根据数据加密树追溯到丢失数据，安全性进一步提高。因此本发明提出的数据的存储控制方法、装置、电子设备及计算机可读存储介质，其主要目的在于解决对数据实现存储控制时面临大规模存储和安全性相矛盾的问题。附图说明图1为本发明一实施例提供的数据的存储控制方法的流程示意图；图2为本发明一实施例提供的数据的存储控制装置的功能模块图；图3为本发明一实施例提供的实现所述数据的存储控制方法的电子设备的结构示意图。本发明目的实现、功能特点及优点将结合实施例，参照附图做进一步说明。具体实施方式应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。本申请实施例提供一种数据的存储控制方法。所述数据的存储控制方法的执行主体包括但不限于服务端、终端等能够被配置为执行本申请实施例提供的该方法的电子设备中的至少一种。换言之，所述数据的存储控制方法可以由安装在终端设备或服务端设备的软件或硬件来执行。所述服务端包括但不限于：单台服务器、服务器集群、云端服务器或云端服务器集群等。实施例1：参照图1所示，为本发明一实施例提供的数据的存储控制方法的流程示意图。在本实施例中，所述数据的存储控制方法包括：S1、接收用户端发起的数据存储指令，根据所述数据存储指令启动数据存储系统，其中数据存储系统由私有端、公有端及用户端组成，其中私有端、公有端各自存储有验证用户端合法性的密钥对。本发明实施例中，数据存储系统一般包括多个用户端、多个私有端及多个公有端。其中用户端直接面向用户与用户直接交互，私有端是根据多个用户端所在的企业、公司、科研机构等单位而构建的可提供对数据高安全性的云端，相对来说，私有端更加安全，但不适合大规模存储。公有端一般由第三方提供商提供，根据企业、公司、科研机构等单位的需求，构建出一种可大规模存储但与其他单位存储资源共用的云端，即称为公有端。可理解的是，私有端隶属于多个用户端所在的单位，且由单位自行管理，安全性高但可维护性较差，公有端由可大规模存储，但由于资源共用且第三方维护，安全性较差。相比于传统数据存储方法来说，本发明实施例中为了克服私有端和公有端的缺点，结合公有端和私有端的优点，提出一种新的数据存储方法。新的数据存储方法首先在实现数据存储之前，需要验证用户端的合法性，由此在构建时数据存储系统，私有端、公有端各自存储有验证用户端合法性的密钥对，详细地，所述密钥对的存储过程包括：接收用户端加入至数据存储系统的申请指令，根据所述申请指令获取用户端的用户端属性，其中用户端属性包括用户端的用户名及用户密码、用户端IP地址、用户端端口值、用户端注册地、用户端运行许可信息。将所述用户端属性发送至数据存储系统的审核平台，当审核平台审核通过用户端的申请指令时，将用户端属性作为第一哈希算法的输入值执行哈希运算，得到用户端哈希值；接收用户端的手写用户名签名，其中所述手写用户名签名与用户端的用户名一致；将所述手写用户名签名第二哈希算法的输入值执行哈希运算，得到签名哈希值；获取数据存储系统中每个私有端的私有端属性，及每个公有端的的公有端属性，将每个私有端属性或公有端属性作为第一哈希算法的输入值执行哈希运算，分别得到私有端哈希值及公有端哈希值；按照用户端哈希值、私有端哈希值及签名哈希值的顺序生成私有端的密钥对，其中，私有端的密钥对包括私有公钥及私有私钥，私有公钥存储至私有端，私有私钥存储至用户端；按照用户端哈希值、公有端哈希值及签名哈希值的顺序生成公有端的密钥对，其中，公有端的密钥对包括公有公钥及公有私钥，公有公钥存储至公有端，公有私钥存储至用户端。示例性的，小张为某科研机构的新加入员工，现正在开展某项科研研究，在开展过程中产生了重要的科研文件，因此小张需要将科研文件存储至科研机构所指定的数据存储系统内，因此小张按照上述技术要求，根据自己用户端发起加入至数据存储系统的申请指令。进一步地，本发明实施例所述第一哈希算法一般情况下与第二哈希算法不同，其中第一哈希算法包括但不限于MD5、SHA-1、SHA-256等，第二哈希算法包括但不限于感知哈希算法、dHash等。S2、基于所述私有端、公有端各自的密钥对验证用户端的合法性，当验证通过时，根据所述数据存储指令从用户端中索引出待存储数据。可理解的是，用户端中存储有每个私有端及公有端的私钥，通过私钥和公钥的对应性即可验证用户端的合法性，详细地，所述基于所述私有端、公有端各自的密钥对验证用户端的合法性，包括：生成用户端的合法验证指令，根据所述合法验证指令接收操作用户端的用户所输入的手写待验证签名；计算所述手写待验证签名与手写用户名签名的相似度值，若相似度值不高于指定相似阈值，则确定用户端为非法用户端；若相似度值高于指定相似阈值，获取用户端中存储的所有私钥集，其中私钥集由私有私钥和公有私钥组成；依次确定每个私有私钥与对应的私有端的私有公钥是否一致，及每个公有私钥与对应的公有端的公有公钥是否一致；直至所有的私有私钥与私有公钥，及公有私钥与公有公钥均一致，确定用户端具有合法性，验证通过。示例性的，小张前期已根据自己用户端发起加入至数据存储系统的申请指令，且申请通过，表示小张的用户端已经隶属于数据存储系统。现在需上传科研文件，因此安装上述要求，先再一次手写一份手写待验证签名，然后并将自己所在的用户端所保存的私钥集依次与数据存储系统的私有端、公有端的公钥执行一致性判断，直至均满足要求后，确定小张所在的用户端为合法用户端。S3、计算所述待存储数据的数据量，利用数据量确定待存储数据的加密结点数，并基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集。需解释的是，本发明实施例为了提高数据存储的安全性，充分利用公有端和私有端的优点，先切分待存储数据然后构建出数据加密树，数据加密树反映出切分数据集的切分逻辑及加密逻辑，可有效根据数据加密树提高存储安全性。示例性的，小张需上传的科研文件共120M，则根据120M的科研文件确定加密结点数。详细地，所述利用数据量确定待存储数据的加密结点数，包括：接收设定的加密结点最高数与加密结点最低数；将所述数据量作为如下公式的入参，并结合加密结点最高数与加密结点最低数确定待存储数据的加密结点数：其中，Ai表示第i个用户端的待存储数据的加密结点数，Bytei表示第i个用户端的待存储数据的数据量，jmax表示加密结点最高数，jmin表示加密结点最低数。可理解的是，本发明实施例根据待存储数据的数据量可有效计算出待存储数据的加密结点数，从而为后续切分待存储数据做好准备。详细地，所述基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集，包括：计算所述加密结点数是否为2的指数倍数，若加密结点数不为2的指数倍数，则增大加密结点数，直至加密结点数为2的指数倍数，确定加密结点数为指形结点数；计算指形结点数对2的指数值，同时按照待存储数据的数据结构的先后顺序，将待存储数据一切为2，得到2切分数据集，其中，2切分数据集中包括2组2切分数据；判断2切分数据集的切分次数是否等于指数值，若2切分数据集的切分次数不等于指数值，则重复切分步骤，即按照2切分数据集中每组2切分数据的数据结构的先后顺序，将2切分数据一切为2，得到4分切分数据集，其中，4切分数据集中包括4组4切分数据；直至2n切分数据集的切分次数n等于指数值，汇总2切分数据集、4切分数据、…、2n切分数据集得到切分数据集。示例性的，假如小张需上传的科研文件的加密结点数为7，由于7并非是2的指数倍数，因此扩大加密结点数为8，8对2的指数为3，则8称为指形结点数，且表示共需要计算出2切分数据集、4切分数据、8切分数据集。进一步地，若科研文件包括由按照顺序排列的各种图片，则将一系列的科研图片按照中间为切分点一分为2，得到2切分数据集，其中每个2切分数据互不相同，但具有先后顺序，以此类推，每个2切分数据依然执行切分，从而得到4切分数据、8切分数据集。S4、根据所述切分数据集和待存储数据生成数据加密树，其中，数据加密树由一个根结点和多个叶子结点组成，根结点对应根结点加密数据，由待存储数据生成，每个叶子结点和内部结点分别对应叶子结点加密数据和内部结点加密数据，均由切分数据集生成。可以理解的是，本发明实施例进一步需构建数据加密树，从而根据数据加密树实现对待存储数据的存储。详细地，所述根据所述切分数据集和待存储数据生成数据加密树，包括：根据所述指形结点数生成空结点树，其中空结点树包括根结点、内部结点及叶子结点；根据预设的第一数据加密方法，对所述待存储数据执行加密并压缩，得到根结点加密数据，将根结点加密数据放入至根结点；将切分数据集中的2切分数据集、4切分数据、…、2n-1切分数据集按照第二数据加密方法执行加密并压缩，得到内部结点加密数据，并将内部结点加密数据分别放入至内部结点；将2n切分数据集按照第三数据加密方法执行加密并压缩，得到叶子结点加密数据，并将叶子结点加密数据分别放入至叶子结点；汇总包括根结点加密数据、内部结点加密数据及叶子结点加密数据的所有根结点、内部结点及叶子结点，得到所述数据加密树。示例性的，小张需上传科研文件，所确定的指形结点数为8，则生成与指形结点数8对应的空结点树，进而将科研文件按照第一数据加密方法执行加密压缩得到根结点加密数据，此外2切分数据集及4切分数据集作为内部结点加密数据，8切分数据集作为叶子结点加密数据，从而构建出数据加密树。进一步地，所述根据所述指形结点数生成空结点树，包括：生成根结点，其中根结点的数量为1；在根结点的下方分裂出2个内部结点，且2个内部结点分别位于根结点的左右，判断此时结点的分裂次数是否等于指形结点数，若此时分裂次数等于指形结点数，则将内部结点确定为叶子结点，由根结点及叶子结点组成空结点树，空结点树包括根结点及叶子结点；若此时分裂次数小于指形结点数，则在每个内部结点的下方继续分裂出2个内部结点，并判断此时分裂次数是否等于指形结点数，直至分裂次数等于指形结点数时，由根结点、内部结点及叶子结点组成空结点树，空结点树包括根结点、内部结点及叶子结点。示例性的，小张需上传的科研文件的指形结点数为8，则表示对应的空结点树结构为根结点为1、根结点到第一层内部结点为2、第一层内部结点到第二层内部结点为4、叶子结点为8。进一步地，所述根据预设的第一数据加密方法，对所述待存储数据执行加密并压缩，得到根结点加密数据，包括：接收设定的最小压缩单元，其中最小压缩单元由数据头、随机标记符、结点标识符组成；确定所述数据头的最大可容纳量，根据所述最大可容纳量拆分待存储数据，得到多组数据头存储数据；生成与多组数据头存储数据相同数量的最小压缩单元，并依次将每组数据头存储数据存入至每个最小压缩单元；同时将每个最小压缩单元的结点标识符设置为20，并基于加密算法生成第一公钥和第一私钥；将第一公钥作为每个最小压缩单元的随机标记符，第一私钥存储于私有端后，对每个最小压缩单元执行压缩处理，得到根结点加密数据。示例性的，小张的科研文件作为待存储数据，共有10M，而每个最小压缩单元的数据头的最大可容纳量为1M，则表明加密并压缩待存储数据需要先生成10组最小压缩单元，每组最小压缩单元的数据头包括1M的待存储数据，此外，为了区分最小压缩单元内所存储的数据来源是待存储数据，则设置结点标识符设置为20，表示最小压缩单元的数据与加密结点数的根结点对应。此外，加密算法包括但不限于AES、DES、Blowfish、CAST等。此外，所述将切分数据集中的2切分数据集、4切分数据、…、2n-1切分数据集按照第二数据加密方法执行加密并压缩，得到内部结点加密数据，包括：按照每个内部结点在数据加密树的结构，将内部结点分为第一层内部结点、第二层内部结点、…、第n-1层内部结点；提取第一层内部结点的加密压缩算法，并根据第一层内部结点的加密压缩算法对2切分数据集执行加密压缩，得到2切分加密数据集；提取第二层内部结点、…、第n-1层内部结点的加密压缩算法，分别对4切分数据、…、n-2切分数据集执行加密压缩，得到4切分加密数据集、…、2n-1切分加密数据集；当完成对2切分数据集、4切分数据、…、2n-1切分数据集时，生成第二公钥和第二私钥，并将第二私钥存储于用户端，第二公钥存储至私有端后，汇总2切分加密数据集、…、2n-1切分加密数据集得到所述内部结点加密数据。需解释的是，每层内部结点的加密压缩算法可相同也可不相同，且所使用的加密压缩算法均为已公开的技术内容，在此不再赘述。最后，所述将2n切分数据集按照第三数据加密方法执行加密并压缩，得到叶子结点加密数据，包括：判断所述2n切分数据集中每个2n切分数据的数据量与所述最小压缩单元的数据头的最大可容纳量的大小关系；若每个2n切分数据的数据量均大于所述数据头的最大可容纳量，则对数据头的最大可容纳量执行扩容操作；直至每个2n切分数据的数据量均小于或等于所述数据头的最大可容纳量时，生成与2n切分数据集相同数量的最小压缩单元，并依次将每个2n切分数据存储至每个最小压缩单元；同时将每个最小压缩单元的结点标识符设置为2n，并基于加密算法生成第三公钥和第三私钥；将第三公钥作为每个最小压缩单元的随机标记符，并将第三私钥存储于私有端后，对每个最小压缩单元执行压缩处理，得到叶子结点加密数据。可理解的是，根据上述操作可实现对待存储数据、2切分数据集、4切分数据、…、2n-1切分数据集、2n切分数据的加密压缩处理，从而得到对应的数据加密树。S5、将数据加密树的根结点加密数据存储至用户端，叶子结点加密数据按照比例分别存储至私有端和公有端，内部结点加密数据按照比例分别存储至私有端和用户端，完成数据的存储控制。本发明实施例中，因为数据加密树的根结点加密数据已经经过压缩处理，因此数据量相比于原来的待存储数据来说更小，且为了用户随时操作方法，将根结点加密数据存储至用户端。此外，内部结点加密数据按照比例分别存储至私有端和公有端的目的是防止因私有端或公有端被入侵而导致整个数据丢失，通过分开存储可有效避免上述问题，且为了提高数据存储的安全性，本发明实施例还将更细致的叶子结点加密数据同样按照比例存储至私有端和公有端。相比于背景技术所述问题，本发明实施例先接收用户端发起的数据存储指令，根据所述数据存储指令启动数据存储系统，其中数据存储系统由私有端、公有端及用户端组成，其中私有端、公有端各自存储有验证用户端合法性的密钥对，密钥对的主要作用在于验证用户端的合法性，从而提高对数据的存储控制的安全性，当合法性验证通过时，根据所述数据存储指令从用户端中索引出待存储数据，计算所述待存储数据的数据量，利用数据量确定待存储数据的加密结点数，并基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集，本发明实施例的主要目的在于不断反复的切分待存储数据，从而达到待存储数据的碎片化，这样即使部分切分数据泄露也不会造成重要的安全隐患，因此进一步地，根据所述切分数据集和待存储数据生成数据加密树，其中，数据加密树由一个根结点和多个叶子结点组成，根结点对应根结点加密数据，由待存储数据生成，每个叶子结点和内部结点分别对应叶子结点加密数据和内部结点加密数据，均由切分数据集生成，其中数据加密树的主要作用在于体现出对待存储数据的切分逻辑，最后，将数据加密树的根结点加密数据存储至用户端，叶子结点加密数据按照比例分别存储至私有端和公有端，内部结点加密数据按照比例分别存储至私有端和用户端，完成数据的存储控制，可见通过数据的碎片化，在保证数据安全性的前提下，可同时将数据存储至公有端和私有端，充分结合了公有端和私有端各自的优点，此外，本发明实施例所构建的数据加密树，相比于背景技术所述，将数据拆分为重要数据和非重要数据分别存储至私有端和公有端来说，解决了数据泄露时的溯源问题，因为数据加密树具有层层递进的逻辑关系，其中根结点对应根结点加密数据，每个叶子结点和内部结点分别对应叶子结点加密数据和内部结点加密数据，而每个叶子结点和内部结点均由根结点的数据生成，因此一旦发生数据丢失或泄露时，可高效快速的根据数据加密树追溯到丢失数据，安全性进一步提高。因此本发明提出的数据的存储控制方法、装置、电子设备及计算机可读存储介质，其主要目的在于解决对数据实现存储控制时面临大规模存储和安全性相矛盾的问题。实施例2：如图2所示，是本发明一实施例提供的数据的存储控制装置的功能模块图。本发明所述数据的存储控制装置100可以安装于电子设备中。根据实现的功能，所述数据的存储控制装置100可以包括用户端验证模块101、数据切分模块102、数据加密树生成模块103及存储控制模块104。本发明所述模块也可以称之为单元，是指一种能够被电子设备处理器所执行，并且能够完成固定功能的一系列计算机程序段，其存储在电子设备的存储器中。所述用户端验证模块101，用于接收用户端发起的数据存储指令，根据所述数据存储指令启动数据存储系统，其中数据存储系统由私有端、公有端及用户端组成，其中私有端、公有端各自存储有验证用户端合法性的密钥对，基于所述私有端、公有端各自的密钥对验证用户端的合法性，当合法性验证通过时，根据所述数据存储指令从用户端中索引出待存储数据；所述数据切分模块102，用于计算所述待存储数据的数据量，利用数据量确定待存储数据的加密结点数，并基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集；所述数据加密树生成模块103，用于根据所述切分数据集和待存储数据生成数据加密树，其中，数据加密树由一个根结点和多个叶子结点组成，根结点对应根结点加密数据，由待存储数据生成，每个叶子结点和内部结点分别对应叶子结点加密数据和内部结点加密数据，均由切分数据集生成；所述存储控制模块104，用于将数据加密树的根结点加密数据存储至用户端，叶子结点加密数据按照比例分别存储至私有端和公有端，内部结点加密数据按照比例分别存储至私有端和用户端，完成数据的存储控制。详细地，本发明实施例中所述数据的存储控制装置100中的所述各模块在使用时采用与上述的图1中所述的数据的存储控制方法一样的技术手段，并能够产生相同的技术效果，这里不再赘述。实施例3：如图3所示，是本发明一实施例提供的实现数据的存储控制方法的电子设备的结构示意图。所述电子设备1可以包括处理器10、存储器11、总线12和通信接口13，还可以包括存储在所述存储器11中并可在所述处理器10上运行的计算机程序，如数据的存储控制程序。其中，所述存储器11至少包括一种类型的可读存储介质，所述可读存储介质包括闪存、移动硬盘、多媒体卡、卡型存储器、磁性存储器、磁盘、光盘等。所述存储器11在一些实施例中可以是电子设备1的内部存储单元，例如该电子设备1的移动硬盘。所述存储器11在另一些实施例中也可以是电子设备1的外部存储设备，例如电子设备1上配备的插接式移动硬盘、智能存储卡、安全数字卡、闪存卡等。进一步地，所述存储器11还可以既包括电子设备1的内部存储单元也包括外部存储设备。所述存储器11不仅可以用于存储安装于电子设备1的应用软件及各类数据，例如数据的存储控制程序的代码等，还可以用于暂时地存储已经输出或者将要输出的数据。所述处理器10在一些实施例中可以由集成电路组成，例如可以由单个封装的集成电路所组成，也可以是由多个相同功能或不同功能封装的集成电路所组成，包括一个或者多个中央处理器、微处理器、数字处理芯片、图形处理器及各种控制芯片的组合等。所述处理器10是所述电子设备的控制核心，利用各种接口和线路连接整个电子设备的各个部件，通过运行或执行存储在所述存储器11内的程序或者模块，以及调用存储在所述存储器11内的数据，以执行电子设备1的各种功能和处理数据。所述总线可以是外设部件互连标准总线或扩展工业标准结构总线等。该总线可以分为地址总线、数据总线、控制总线等。所述总线被设置为实现所述存储器11以及至少一个处理器10等之间的连接通信。图3仅示出了具有部件的电子设备，本领域技术人员可以理解的是，图3示出的结构并不构成对所述电子设备1的限定，可以包括比图示更少或者更多的部件，或者组合某些部件，或者不同的部件布置。例如，尽管未示出，所述电子设备1还可以包括给各个部件供电的电源，优选地，电源可以通过电源管理装置与所述至少一个处理器10逻辑相连，从而通过电源管理装置实现充电管理、放电管理、以及功耗管理等功能。电源还可以包括一个或一个以上的直流或交流电源、再充电装置、电源故障检测电路、电源转换器或者逆变器、电源状态指示器等任意组件。所述电子设备1还可以包括多种传感器、蓝牙模块、Wi-Fi模块等，在此不再赘述。进一步地，所述电子设备1还可以包括网络接口，可选地，所述网络接口可以包括有线接口和/或无线接口，通常用于在该电子设备1与其他电子设备之间建立通信连接。可选地，该电子设备1还可以包括用户接口，用户接口可以是显示器、输入单元)，可选地，用户接口还可以是标准的有线接口、无线接口。可选地，在一些实施例中，显示器可以是LED显示器、液晶显示器、触控式液晶显示器以及OLED触摸器等。其中，显示器也可以适当的称为显示屏或显示单元，用于显示在电子设备1中处理的信息以及用于显示可视化的用户界面。应该了解，所述实施例仅为说明之用，在专利申请范围上并不受此结构的限制。所述电子设备1中的所述存储器11存储的数据的存储控制程序是多个指令的组合，在所述处理器10中运行时，可以实现：接收用户端发起的数据存储指令，根据所述数据存储指令启动数据存储系统，其中数据存储系统由私有端、公有端及用户端组成，其中私有端、公有端各自存储有验证用户端合法性的密钥对；基于所述私有端、公有端各自的密钥对验证用户端的合法性，当合法性验证通过时，根据所述数据存储指令从用户端中索引出待存储数据；计算所述待存储数据的数据量，利用数据量确定待存储数据的加密结点数，并基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集；根据所述切分数据集和待存储数据生成数据加密树，其中，数据加密树由一个根结点和多个叶子结点组成，根结点对应根结点加密数据，由待存储数据生成，每个叶子结点和内部结点分别对应叶子结点加密数据和内部结点加密数据，均由切分数据集生成；将数据加密树的根结点加密数据存储至用户端，叶子结点加密数据按照比例分别存储至私有端和公有端，内部结点加密数据按照比例分别存储至私有端和用户端，完成数据的存储控制。具体地，所述处理器10对上述指令的具体实现方法可参考图1至图2对应实施例中相关步骤的描述，在此不赘述。进一步地，所述电子设备1集成的模块/单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读存储介质中。所述计算机可读存储介质可以是易失性的，也可以是非易失性的。例如，所述计算机可读介质可以包括：能够携带所述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器。本发明还提供一种计算机可读存储介质，所述可读存储介质存储有计算机程序，所述计算机程序在被电子设备的处理器所执行时，可以实现：接收用户端发起的数据存储指令，根据所述数据存储指令启动数据存储系统，其中数据存储系统由私有端、公有端及用户端组成，其中私有端、公有端各自存储有验证用户端合法性的密钥对；基于所述私有端、公有端各自的密钥对验证用户端的合法性，当合法性验证通过时，根据所述数据存储指令从用户端中索引出待存储数据；计算所述待存储数据的数据量，利用数据量确定待存储数据的加密结点数，并基于加密结点数切分所述待存储数据，得到与待存储数据相同数量的切分数据集；根据所述切分数据集和待存储数据生成数据加密树，其中，数据加密树由一个根结点和多个叶子结点组成，根结点对应根结点加密数据，由待存储数据生成，每个叶子结点和内部结点分别对应叶子结点加密数据和内部结点加密数据，均由切分数据集生成；将数据加密树的根结点加密数据存储至用户端，叶子结点加密数据按照比例分别存储至私有端和公有端，内部结点加密数据按照比例分别存储至私有端和用户端，完成数据的存储控制。所述作为分离部件说明的模块可以是或者也可以不是物理上分开的，作为模块显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。另外，在本发明各个实施例中的各功能模块可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用硬件加软件功能模块的形式实现。对于本领域技术人员而言，显然本发明不限于上述示范性实施例的细节，而且在不背离本发明的精神或基本特征的情况下，能够以其他的具体形式实现本发明。最后应说明的是，以上实施例仅用以说明本发明的技术方案而非限制，尽管参照较佳实施例对本发明进行了详细说明，本领域的普通技术人员应当理解，可以对本发明的技术方案进行修改或等同替换，而不脱离本发明技术方案的精神和范围。
