标题title
一种基于三维目标检测的飞行汽车起飞着陆决策规划方法
摘要abst
本发明公开了一种基于三维目标检测的飞行汽车起飞着陆决策规划方法，基于部署在飞行汽车上的摄像头和激光雷达实现，该方法包括：根据实时采集的图像和三维点云数据建立动态三维地图；当飞行汽车为飞行状态，根据动态三维地图，分别建立斥力场和引力场形成实时变化的合力场，驱动飞行汽车进行动态着陆，当满足安全距离，控制飞行汽车着陆，决策规划结束；否则，控制飞行汽车上升，重新建立引力场；当飞行汽车为行驶状态，根据动态三维地图，分别建立斥力场和引力场形成实时变化的合力场，驱动飞行汽车起飞，决策规划结束。
权利要求书clms
1.一种基于三维目标检测的飞行汽车起飞着陆决策规划方法，基于部署在飞行汽车上的摄像头和激光雷达实现，所述方法包括：步骤1)根据实时采集的图像和三维点云数据对指定道路进行环境感知，建立动态三维地图；步骤2)当待决策规划的飞行汽车为飞行状态，转至步骤3)；当待决策规划的飞行汽车为行驶状态，转至步骤5)；步骤3)根据动态三维地图，结合飞行汽车数据和行驶在单行路的汽车情况，建立斥力场，选取行驶汽车后某点或地面上某点建立引力场；步骤4)由斥力场和引力场形成实时变化的合力场，驱动飞行汽车进行动态着陆，判断飞行汽车和目标位置间的距离是否满足安全距离，判断为是，控制飞行汽车着陆，并转至步骤7)；判断为否，控制飞行汽车上升，并转至步骤3)重新建立引力场；步骤5)根据动态三维地图，结合飞行汽车数据和行驶在单行路的汽车情况，建立斥力场，选取空中安全位置建立引力场；步骤6)由斥力场和引力场形成实时变化的合力场，驱动飞行汽车起飞，并转至步骤7)；步骤7)决策规划结束。2.根据权利要求1所述的基于三维目标检测的飞行汽车起飞着陆决策规划方法，其特征在于，所述步骤1)包括：步骤1-1)将采集的图像经卷积神经网络处理，经过图像金字塔特征提取，得到与初始图像大小相同的图像特征图；步骤1-2)将获取的三维点云和图像特征图经联合标定，得到在图像范围内的点云，并得到对应的图像特征；步骤1-3)将融合的点云图像数据按照点云的分布进行体素网格化，得到体素化数据；步骤1-4)对体素化数据进行筛选，去掉空的网格，将长宽高按秩序排列成一维，得到处理后的体素化数据，步骤1-5)将处理后的体素化数据输入数据编码网络，得到特征图；步骤1-6)将特征图通过单阶段的目标检测网络，得到指定道路三维目标的坐标及长宽高信息；步骤1-7)根据检测到的每个三维目标的坐标及长宽高信息，建立动态三维地图。3.根据权利要求2所述的基于三维目标检测的飞行汽车起飞着陆决策规划方法，其特征在于，所述步骤1-5)的数据编码网络包括：全连接层和VoxelNet；所述数据编码网络的处理包括：处理后的体素化数据包括若干个非空格子，每个格子包括若干个点，从每个格子提取出一个点表示这个格子，一个高度方向选出一个格子表示这个高度，得到L长、W宽的特征图大小，C为特征图特征数，通过升维扩充特征。4.根据权利要求1所述的基于三维目标检测的飞行汽车起飞着陆决策规划方法，其特征在于，所述步骤3)包括：步骤3-1)提取待决策规划飞行汽车的数据，经分析处理后建立斥力场；作用在飞行汽车上的斥力场Uri和斥力Fr满足下式：其中，kr表示正比例系数，X表示待决策规划的飞行汽车位置，Xi表示障碍物i的位置，ηi表示X与Xi之间的距离，ηi表示X与Xi之间的距离，η0，i表示第i个障碍物斥力场作用的最大距离；其中，N表示障碍物总数，Fri表示障碍物i的斥力，满足下式：其中，表示ηi梯度；步骤3-2)结合待决策规划飞行汽车的前后方车辆情况，建立引力场；作用在飞行汽车上的引力场Ua和引力Fa满足下式：其中，ρ表示引力正比例系数，Xg表示目标位置，η表示飞行汽车和目标位置的距离，表示η梯度。5.根据权利要求1所述的基于三维目标检测的飞行汽车起飞着陆决策规划方法，其特征在于，所述步骤4)判断飞行汽车和目标位置间的距离是否满足安全距离；包括：当前车和后车之间的距离大于等于安全距离时，满足安全距离，否则不满足安全距离。6.根据权利要求1所述的基于三维目标检测的飞行汽车起飞着陆决策规划方法，其特征在于，所述步骤5)包括：步骤5-1)提取行驶在单行路的汽车数据以及待决策规划的飞行汽车的飞行数据，经分析处理后建立斥力场；作用在飞行汽车上的斥力场Uri和斥力Fr满足下式：其中，kr表示正比例系数，X表示待决策规划的飞行汽车位置，Xi表示障碍物i的位置，ηi表示X与Xi之间的距离，ηi表示X与Xi之间的距离，η0，i表示第i个障碍物斥力场作用的最大距离；步骤5-2)选取空中安全位置建立引力场；作用在飞行汽车上的引力场Ua和引力Fa满足下式：其中，ρ表示引力正比例系数，Xg表示目标位置，η表示飞行汽车和目标位置的距离，表示η梯度。7.一种基于三维目标检测的飞行汽车起飞着陆决策规划系统，基于部署在飞行汽车上的摄像头和激光雷达实现，其特征在于，所述系统包括：动态三维地图构建模块、状态判断模块、飞行斥引力场建立模块、着陆控制模块、行驶斥引力场建立模块和起飞控制模块；所述动态三维地图构建模块，用于根据实时采集的图像和三维点云数据对指定道路进行环境感知，建立动态三维地图；所述状态判断模块，用于当待决策规划的飞行汽车为飞行状态，转至飞行斥引力场建立模块；当待决策规划的飞行汽车为行驶状态，转至行驶斥引力场建立模块；所述飞行斥引力场建立模块，用于根据动态三维地图，结合飞行汽车数据和行驶在单行路的汽车情况，建立斥力场，选取行驶汽车后某点或地面上某点建立引力场；所述着陆控制模块，用于由斥力场和引力场形成实时变化的合力场，驱动飞行汽车进行动态着陆，判断飞行汽车和目标位置间的距离是否满足安全距离，判断为是，控制飞行汽车着陆，决策规划结束；判断为否，控制飞行汽车上升，并转至飞行斥引力场建立模块重新建立引力场；所述行驶斥引力场建立模块，用于根据动态三维地图，结合飞行汽车数据和行驶在单行路的汽车情况，建立斥力场，选取空中安全位置建立引力场；所述起飞控制模块，用于由斥力场和引力场形成实时变化的合力场，驱动飞行汽车起飞，决策规划结束。
说明书desc
技术领域本发明属于自动驾驶技术领域，尤其涉及一种基于三维目标检测的飞行汽车起飞着陆决策规划方法。背景技术美国福特汽车创始人亨利·福特曾预言，飞机和汽车的结合体即将面世。随着城市交通拥堵日益严重，而以飞行汽车为代表的城市空中交通是新的解决方案。多家制造商将2025年前后定为重要的时间节点，飞行汽车将实现商业化。随之产生两个问题：1)如何在车水马龙的道路上，让具有初速度的飞行汽车从空中安全汇入车流中；2)如何让具有初速度的飞行汽车从车水马龙的地面安全的起飞。从空中汇入车流中的难度比从车流飞到空中难度大得多，起飞场是着陆场的简化形式。为了解决上述问题，需要解决两个问题环境感知和路径规划：普通的摄像头对于目标的检测只能分辨出目标类别，对于目标在三维空间的位置感知误差较大。激光雷达进行三维目标检测具有天然的距离优势，能够直接获取到各个点的位置信息，但其缺乏图像丰富的视觉信息。不同类型的传感器各有优劣，单一传感器无法实现精确高效的检测.为此，将具有互补特性的多种传感器融合以增强感知能力，图像和点云融合的三维目标检测方法既能弥补图像的深度不足也能弥补点云缺乏视觉信息的不足。目前的路径规划算法分为两大类，以A*算法为代表的全局路径规划的算法，和以人工势场法为例的局部避障算法。两种算法各有优劣，A*算法可以求得全局最优解从而避免无人机陷入局部最优解，但是A*算法需要提前获知整个地图的信息且算法随着地图的增大解算时间也会延长；而人工势场法可以快速针对障碍物位置信息做出响应，方法可靠性高，不依赖环境的先验信息和障碍物形状，不受障碍物的外形影响，但是会陷入局部最优；具体来说，人工势场法的基本原理，在飞行过程中生成虚拟的两个势力场：引力场、斥力场。然后，在两个势力场联合的作用下，根据各个势力场的模型不同产生不同的作用力，飞行汽车在这些力的作用下进行安全起飞、着陆。发明内容本发明的目的在于克服现有技术缺陷，提出了一种基于三维目标检测的飞行汽车起飞着陆决策规划方法。为了实现上述目的，本发明提出了一种基于三维目标检测的飞行汽车起飞着陆决策规划方法，基于部署在飞行汽车上的摄像头和激光雷达实现，所述方法包括：步骤1)根据实时采集的图像和三维点云数据对指定道路进行环境感知，建立动态三维地图；步骤2)当待决策规划的飞行汽车为飞行状态，转至步骤3)；当待决策规划的飞行汽车为行驶状态，转至步骤5)；步骤3)根据动态三维地图，结合飞行汽车数据和行驶在单行路的汽车情况，建立斥力场，选取行驶汽车后某点或地面上某点建立引力场；步骤4)由斥力场和引力场形成实时变化的合力场，驱动飞行汽车进行动态着陆，判断飞行汽车和目标位置间的距离是否满足安全距离，判断为是，控制飞行汽车着陆，并转至步骤7)；判断为否，控制飞行汽车上升，并转至步骤3)重新建立引力场；步骤5)根据动态三维地图，结合飞行汽车数据和行驶在单行路的汽车情况，建立斥力场，选取空中安全位置建立引力场；步骤6)由斥力场和引力场形成实时变化的合力场，驱动飞行汽车起飞，并转至步骤7)；步骤7)决策规划结束。作为上述方法的一种改进，所述步骤1)包括：步骤1-1)将采集的图像经卷积神经网络处理，经过图像金字塔特征提取，得到与初始图像大小相同的图像特征图；步骤1-2)将获取的三维点云和图像特征图经联合标定，得到在图像范围内的点云，并得到对应的图像特征；步骤1-3)将融合的点云图像数据按照点云的分布进行体素网格化，得到体素化数据；步骤1-4)对体素化数据进行筛选，去掉空的网格，将长宽高按秩序排列成一维，得到处理后的体素化数据，步骤1-5)将处理后的体素化数据输入数据编码网络，得到特征图；步骤1-6)将特征图通过单阶段的目标检测网络，得到指定道路三维目标的坐标及长宽高信息；步骤1-7)根据检测到的每个三维目标的坐标及长宽高信息，建立动态三维地图。作为上述方法的一种改进，所述步骤1-5)的数据编码网络包括：全连接层和VoxelNet；所述数据编码网络的处理包括：处理后的体素化数据包括若干个非空格子，每个格子包括若干个点，从每个格子提取出一个点表示这个格子，一个高度方向选出一个格子表示这个高度，得到L长、W宽的特征图大小，C为特征图特征数，通过升维扩充特征。作为上述方法的一种改进，所述步骤3)包括：步骤3-1)提取待决策规划飞行汽车的数据，经分析处理后建立斥力场；作用在飞行汽车上的斥力场Uri和斥力Fr满足下式：其中，kr表示正比例系数，X表示待决策规划的飞行汽车位置，Xi表示障碍物i的位置，ηi表示X与Xi之间的距离，ηi表示X与Xi之间的距离，η0，i表示第i个障碍物斥力场作用的最大距离；其中，N表示障碍物总数，Fri表示障碍物i的斥力，满足下式：其中，表示ηi梯度；步骤3-2)结合待决策规划飞行汽车的前后方车辆情况，建立引力场；作用在飞行汽车上的引力场Ua和引力Fa满足下式：其中，ρ表示引力正比例系数，Xg表示目标位置，η表示飞行汽车和目标位置的距离，表示η梯度。作为上述方法的一种改进，所述步骤4)判断飞行汽车和目标位置间的距离是否满足安全距离；包括：当前车和后车之间的距离大于等于安全距离时，满足安全距离，否则不满足安全距离。作为上述方法的一种改进，所述步骤5)包括：步骤5-1)提取行驶在单行路的汽车数据以及待决策规划的飞行汽车的飞行数据，经分析处理后建立斥力场；作用在飞行汽车上的斥力场Uri和斥力Fr满足下式：其中，kr表示正比例系数，X表示待决策规划的飞行汽车位置，Xi表示障碍物i的位置，ηi表示X与Xi之间的距离，ηi表示X与Xi之间的距离，η0，i表示第i个障碍物斥力场作用的最大距离；步骤5-2)选取空中安全位置建立引力场；作用在飞行汽车上的引力场Ua和引力Fa满足下式：其中，ρ表示引力正比例系数，Xg表示目标位置，η表示飞行汽车和目标位置的距离，表示η梯度。一种基于三维目标检测的飞行汽车起飞着陆决策规划系统，基于部署在飞行汽车上的摄像头和激光雷达实现，其特征在于，所述系统包括：动态三维地图构建模块、状态判断模块、飞行斥引力场建立模块、着陆控制模块、行驶斥引力场建立模块和起飞控制模块；所述动态三维地图构建模块，用于根据实时采集的图像和三维点云数据对指定道路进行环境感知，建立动态三维地图；所述状态判断模块，用于当待决策规划的飞行汽车为飞行状态，转至飞行斥引力场建立模块；当待决策规划的飞行汽车为行驶状态，转至行驶斥引力场建立模块；所述飞行斥引力场建立模块，用于根据动态三维地图，结合飞行汽车数据和行驶在单行路的汽车情况，建立斥力场，选取行驶汽车后某点或地面上某点建立引力场；所述着陆控制模块，用于由斥力场和引力场形成实时变化的合力场，驱动飞行汽车进行动态着陆，判断飞行汽车和目标位置间的距离是否满足安全距离，判断为是，控制飞行汽车着陆，决策规划结束；判断为否，控制飞行汽车上升，并转至飞行斥引力场建立模块重新建立引力场；所述行驶斥引力场建立模块，用于根据动态三维地图，结合飞行汽车数据和行驶在单行路的汽车情况，建立斥力场，选取空中安全位置建立引力场；所述起飞控制模块，用于由斥力场和引力场形成实时变化的合力场，驱动飞行汽车起飞，决策规划结束。与现有技术相比，本发明的优势在于：1、不同类型的传感器各有优劣，单一传感器无法实现精确高效的检测.本发明将具有互补特性的多种传感器融合以增强感知能力，图像和点云融合的三维目标检测方法既能弥补图像的深度不足也能弥补点云缺乏视觉信息的不足；2、根据图像和点云融合的三维目标检测方法提供的车辆坐标及车辆长宽高信息建立动态三维地图，空间中车辆的坐标及车辆长宽高信息实时体现在动态三维地图中；3、基于动态三维地图，建立引力场和斥力场，飞行汽车在实时变化的势场作用下进行着陆和起飞。附图说明图1是本发明基于三维目标检测的飞行汽车起飞着陆决策规划方法着陆控制决策流程图；图2本发明基于三维目标检测的飞行汽车起飞着陆决策规划方法起飞控制决策流程图。具体实施方式为解决上述问题，本发明提供一种基于三维目标检测的飞行汽车起飞着陆决策规划方法。利用三维目标检测的数据建立的动态三维地图，使飞行汽车在动态势场的作用下，让具有初速度的飞行汽车从空中安全汇入车流中，或者让具有初速度的飞行汽车从车流中进行起飞。下面结合附图和实施例对本发明的技术方案进行详细的说明。实施例1本发明的实施例1提出了一种基于三维目标检测的飞行汽车起飞着陆决策规划方法。通过相机和激光雷达获取道路信息后，使得飞行汽车在城市中安全的从空中汇入到机动车道中。基于三维目标检测动态着陆场的方法主要包括以下步骤，如图1所示，动态着陆场具体实施步骤如下：步骤1：摄像头采集的图像经卷积神经网络处理，经过图像金字塔提取得到与初始图像大小相同的图像特征图。图像表示长为w像素，宽为h像素，每个像素拥有RGB3个通道；图像特征图表示长为w像素，宽为h像素，每个像素拥有nc个通道；步骤2：激光雷达获取的三维点云经联合标定后的坐标变换矩阵，坐标变换到图像坐标系进行投影，每个在图像大小范围内的点云都获取对应像素点的特征，最终得到在图像范围内的点云，并且获取了对应的图像特征三维点云表示一帧获取到n个点云，每个点云有四个通道，其中为点云的三维坐标，r为点云的反射率；图像特征表示nr个在图像范围内的点，4+nc表示点云原有的4个特性再拼接上对应点的图像特征nc步骤3：将融合的点云图像数据按照点云的分布进行体素网格化，得到体素化数据；体素化后的数据表示长边L个格子，宽边W个格子，高度H个格子，每个格子内N个点云图像数据，每个数据4+nc个特征通道，并且N有最大限值，若格子内超过N个点，则根据点的xyz坐标，按照距离原点的距离进行升序排列，取前N个点。步骤4：对体素化数据进行筛选，去掉空的网格，将长宽高按秩序排列成一维，得到的体素化数据。筛选后的体素化数据。三维目标的表示目标的坐标其朝向与原点坐标系x轴的夹角ry，目标的长宽高，以及置信分数s。步骤7根据检测到汽车三维目标的，建立动态三维地图步骤8提取行驶在单行路的汽车的数据，对行驶在单行路的汽车数据进行分析处理后建立斥力势场。作用在飞行汽车上的斥力场和斥力：其中kr＞0,表示正比例系数，X表示飞行汽车位置，Xi表示障碍物i的位置，η0，i表示第i个障碍物斥力场作用的最大距离，表示梯度步骤9决策系统选取行驶汽车后某点或者地面上某点建立引力场作用在飞行汽车上的引力场和引力：其中，ρ＞0,表示引力正比例系数，X表示飞行汽车位置，Xg表示目标的位置，η表示飞行汽车和目标的距离。表示梯度步骤10引力场和斥力场形成实时变化的合力场，飞行汽车在实时变化的合力场的作用下进行动态着陆。步骤11若存在η＜安全距离，飞行汽车在引力场和斥力场的作用下上升到安全位置，返回步骤8重新进行引力场的建立。若η≥安全距离，飞行汽车在引力场和斥力场的作用下安全着陆。X1表示前车的位置，X2表示后车的位置，η表示前车和后车直接的距离。如图2所示，动态起飞场具体实施步骤如下：步骤1-7与着陆场一致；步骤8提取行驶在单行路的汽车和空中飞车的数据，对行驶在单行路的汽车和空中飞车数据进行分析处理后建立斥力势场。作用在飞行汽车上的斥力场和斥力：其中kr＞0，表示正比例系数，X表示飞行汽车位置，Xi表示障碍物i的位置，η0，i表示第i个障碍物斥力场作用的最大距离，表示梯度，需要说明，对于起飞和降落斥力场公式相同，但是kr取值不同。步骤9决策系统选取空中安全位置建立引力场；作用在飞行汽车上的引力场和引力：其中，ρ＞0,表示引力正比例系数，X表示飞行汽车位置，Xg表示目标的位置，η表示飞行汽车和目标的距离。表示梯度步骤10引力场和斥力场形成实时变化的合力场，飞行汽车在实时变化的合力场的作用下进行动态起飞。实施例2本发明的实施例2提出了一种基于三维目标检测的飞行汽车起飞着陆决策规划系统，基于部署在飞行汽车上的摄像头和激光雷达实现，所述系统包括：动态三维地图构建模块、状态判断模块、飞行斥引力场建立模块、着陆控制模块、行驶斥引力场建立模块和起飞控制模块；采用实施例1的方法实现，所述动态三维地图构建模块，用于根据实时采集的图像和三维点云数据对指定道路进行环境感知，建立动态三维地图；所述状态判断模块，用于当待决策规划的飞行汽车为飞行状态，转至飞行斥引力场建立模块；当待决策规划的飞行汽车为行驶状态，转至行驶斥引力场建立模块；所述飞行斥引力场建立模块，用于根据动态三维地图，结合飞行汽车数据和行驶在单行路的汽车情况，建立斥力场，选取行驶汽车后某点或地面上某点建立引力场；所述着陆控制模块，用于由斥力场和引力场形成实时变化的合力场，驱动飞行汽车进行动态着陆，判断飞行汽车和目标位置间的距离是否满足安全距离，判断为是，控制飞行汽车着陆，决策规划结束；判断为否，控制飞行汽车上升，并转至飞行斥引力场建立模块重新建立引力场；所述行驶斥引力场建立模块，用于根据动态三维地图，结合飞行汽车数据和行驶在单行路的汽车情况，建立斥力场，选取空中安全位置建立引力场；所述起飞控制模块，用于由斥力场和引力场形成实时变化的合力场，驱动飞行汽车起飞，决策规划结束最后所应说明的是，以上实施例仅用以说明本发明的技术方案而非限制。尽管参照实施例对本发明进行了详细说明，本领域的普通技术人员应当理解，对本发明的技术方案进行修改或者等同替换，都不脱离本发明技术方案的精神和范围，其均应涵盖在本发明的权利要求范围当中。
