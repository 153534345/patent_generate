标题title
一种折弯机的异常折弯精度监测系统
摘要abst
本发明涉及弯折机的加工处理技术领域，具体涉及一种折弯机的异常折弯精度监测系统，该系统包括图像采集单元；获取仅包含加工金属部件的目标图像；目标获取单元：对目标图像进行边缘检测得到边缘图像，检测边缘图像中的所有边缘直线，获取边缘直线中的目标边缘直线；优选检测单元：根据每个目标边缘直线的目标区域获取理想双边缘直线，获取理想双边缘直线中的优选边缘线；异常监测单元：基于优先边缘线的夹角计算折弯机的折弯精度，以检测折弯机的折弯精度异常。基于弯折加工金属部件的边缘特征计算折弯机的折弯精度，使得获取的精度信息更加精准，异常监测效果更好。
权利要求书clms
1.一种折弯机的异常折弯精度监测系统，其特征在于，该系统包括：图像采集单元，用于采集由折弯机折弯后的加工金属部件图像，以得到对应的灰度图像，对所述灰度图像进行语义分割，得到仅包含加工金属部件的目标图像；目标获取单元，用于对所述目标图像进行边缘检测，得到对应的边缘图像，检测边缘图像中的所有边缘直线，获取每个边缘直线的角度值以及边缘直线和图像中心点的距离，根据角度值和距离计算任意两个边缘直线之间的欧式距离，基于欧式距离利用K-mean算法进行聚类，通过改变K值，根据每个聚类簇中的元素差异获取每次聚类的聚类效果评价值，基于聚类效果评价值确认目标边缘直线，目标边缘直线是指根据边缘直线及其相邻边缘直线能够获取加工金属部件的弯折角度所对应的边缘直线；优选检测单元，用于利用区域生长得到每个目标边缘直线的目标区域，基于设定的灰度值阈值得到每个目标区域中的理想双边缘直线，计算理想双边缘直线中每条边缘直线的直线度；分别将理想双边缘直线中的每条边缘直线划分为多个强边缘和弱边缘，统计任意一条边缘直线中相邻强边缘和弱边缘之间的间隔数量，且计算每个间隔对应的强边缘和弱边缘的最近端点之间的欧式距离，得到平均欧式距离作为对应边缘直线的检测精度值；根据直线度和检测精度值计算对应理想双边缘直线的边缘检测效果值；由所述边缘检测效果值确认所有理想双边缘直线中的优选边缘线；异常监测单元，用于分别计算每条优选边缘线与其垂直的其他优选边缘线之间的夹角差值，根据夹角差值与预设角度之间的差异计算折弯机的折弯精度，当折弯精度大于精度阈值，确认折弯机的折弯精度存在异常。2.如权利要求1所述的一种折弯机的异常折弯精度监测系统，其特征在于，所述目标获取单元中所述聚类效果评价值的获取方法，包括：分别计算聚类簇中每个边缘直线与聚类中心对应边缘直线之间的欧式距离，得到第一欧式距离总和，将每个聚类簇的第一欧式距离总和相加得到当前聚类下的第一聚类评价值；分别计算每个聚类簇的聚类中心对应边缘直线与每个其他聚类簇的聚类中心对应边缘直线之间的欧式距离，得到第二欧式距离总和，将每个聚类簇的第二欧式距离总和相加得到当前聚类下的第二聚类评价值；根据每个聚类簇中的边缘直线得到边缘图像中对应的最小拟合矩阵区域，计算最小拟合矩阵区域中每个像素点的LBP值，得到对应的LBP区域，构建LBP区域的灰度共生矩阵得到熵和能量，获取熵与能量的乘积，根据以乘积为幂指数、常数e为底数得到的指数函数结果计算对应聚类簇的第三聚类评价值，获取当前聚类下的最大第三聚类评价值；根据每个像素点的梯度计算每个边缘直线的平均梯度，分别计算聚类簇中每个边缘直线与其他边缘直线的平均梯度的差值绝对值的总和，令聚类簇中每个边缘直线的差值绝对值的总和进行相加得到差值总和，将每个聚类簇的差值总和相加得到当前聚类下的第四聚类评价值；结合第一聚类评价值、第二聚类评价值、最大第三聚类评价值和第四聚类评价值获取当前聚类下的聚类效果评价值。3.如权利要求1所述的一种折弯机的异常折弯精度监测系统，其特征在于，所述目标获取单元中基于聚类效果评价值确认目标边缘直线的方法，包括：设置聚类效果评价阈值，当聚类效果评价值大于聚类效果评价阈值时，确认对应K值为K-mean算法的最优K值，进而将最优K值对应聚类下最大的第三聚类评价值的聚类簇中的边缘直线作为目标边缘直线。4.如权利要求1所述的一种折弯机的异常折弯精度监测系统，其特征在于，所述优选检测单元中计算理想双边缘直线中每条边缘直线的直线度的方法，包括：将当前边缘直线由中心点进行平均划分，将关于中心点对称的两个像素点作为一组像素点对，连接像素点对，获取其连线与水平方向之间的夹角，得到每组像素点对的夹角，根据组像素点对的夹角计算平均夹角，将每组像素点对的夹角与平均夹角之间的差值绝对值进行求和，得到差值绝对值累加值，将差值绝对值累加值的倒数作为当前边缘直线的直线度。5.如权利要求4所述的一种折弯机的异常折弯精度监测系统，其特征在于，所述优选检测单元还包括对直线度的优化，其优化方法为：计算当前边缘直线去除组像素点对后的第一直线度，利用第一直线度和当前边缘直线的像素点对的剩余组数计算当前边缘直线的优选长度；将优选长度大于优选长度阈值所对应的第一直线度作为当前边缘直线的有效直线度。6.如权利要求5所述的一种折弯机的异常折弯精度监测系统，其特征在于，所述优选检测单元中根据直线度和检测精度值计算对应理想双边缘直线的边缘检测效果值的方法，包括：边缘检测效果值的计算公式为：其中，为边缘检测效果值；为理想双边缘直线中边缘直线1的有效直线度；为理想双边缘直线中边缘直线2的有效直线度；为理想双边缘直线中边缘直线1与水平方向的夹角；为理想双边缘直线中边缘直线2与水平方向的夹角；|*|为绝对值符号；为理想双边缘直线中边缘直线1的检测精度值；为理想双边缘直线中边缘直线2的检测精度值；为极小值。7.如权利要求1所述的一种折弯机的异常折弯精度监测系统，其特征在于，所述异常监测单元中折弯精度的获取方法，包括：分别计算当前优选边缘线与其垂直的其他优选边缘线之间的夹角差值绝对值，并获取每个夹角差值绝对值与预设角度之间的差值绝对值，将差值绝对值进行累加得到当前优选边缘线的异常值；根据优选边缘线的异常值计算平均异常值，将平均异常值作为折弯机的折弯精度。
说明书desc
技术领域本发明涉及弯折机的加工处理技术领域，具体涉及一种折弯机的异常折弯精度监测系统。背景技术一定精准的折弯精度可以有效的提升板材加工的质量。在板材折弯的时候，具体的角度等需要满足相关的生产参数，否则可能会严重影响产品质量。在这种条件下，在基础要求上对折弯机的加工精度进行精准的把控，可以使得生产的产品质量更好。加工精度的优化对设备自身的利用有显著的影响。从可查现有资料中可以了解到，在折弯机的具体生产使用过程中，加工精度误差的出现与折弯机自身的零部件磨损等有明显的关系，故实时把控加工精度，可以有效的规避和预防零部件的磨损。由于加工精度的精细化程度，导致折弯机精度发生异常时，不能及时发现，进而可能导致后续生产的产品质量不合格，导致不必要的亏损，故亟需一种可以实时检测折弯机加工精度的监测系统。发明内容为了解决上述技术问题，本发明的目的在于提供一种折弯机的异常折弯精度监测系统，所采用的技术方案具体如下：图像采集单元，用于采集由折弯机折弯后的加工金属部件图像，以得到对应的灰度图像，对所述灰度图像进行语义分割，得到仅包含加工金属部件的目标图像；目标获取单元，用于对所述目标图像进行边缘检测，得到对应的边缘图像，检测边缘图像中的所有边缘直线，获取每个边缘直线的角度值以及边缘直线和图像中心点的距离，根据角度值和距离计算任意两个边缘直线之间的欧式距离，基于欧式距离利用K-mean算法进行聚类，通过改变K值，根据每个聚类簇中的元素差异获取每次聚类的聚类效果评价值，基于聚类效果评价值确认目标边缘直线，目标边缘直线是指根据边缘直线及其相邻边缘直线能够获取加工金属部件的弯折角度所对应的边缘直线；优选检测单元，用于利用区域生长得到每个目标边缘直线的目标区域，基于设定的灰度值阈值得到每个目标区域中的理想双边缘直线，计算理想双边缘直线中每条边缘直线的直线度；分别将理想双边缘直线中的每条边缘直线划分为多个强边缘和弱边缘，统计任意一条边缘直线中相邻强边缘和弱边缘之间的间隔数量，且计算每个间隔对应的强边缘和弱边缘的最近端点之间的欧式距离，得到平均欧式距离作为对应边缘直线的检测精度值；根据直线度和检测精度值计算对应理想双边缘直线的边缘检测效果值；由所述边缘检测效果值确认所有理想双边缘直线中的优选边缘线；异常监测单元，用于分别计算每条优选边缘线与其垂直的其他优选边缘线之间的夹角差值，根据夹角差值与预设角度之间的差异计算折弯机的折弯精度，当折弯精度大于精度阈值，确认折弯机的折弯精度存在异常。进一步的，所述目标获取单元中所述聚类效果评价值的获取方法，包括：分别计算聚类簇中每个边缘直线与聚类中心对应边缘直线之间的欧式距离，得到第一欧式距离总和，将每个聚类簇的第一欧式距离总和相加得到当前聚类下的第一聚类评价值；分别计算每个聚类簇的聚类中心对应边缘直线与每个其他聚类簇的聚类中心对应边缘直线之间的欧式距离，得到第二欧式距离总和，将每个聚类簇的第二欧式距离总和相加得到当前聚类下的第二聚类评价值；根据每个聚类簇中的边缘直线得到边缘图像中对应的最小拟合矩阵区域，计算最小拟合矩阵区域中每个像素点的LBP值，得到对应的LBP区域，构建LBP区域的灰度共生矩阵得到熵和能量，获取熵与能量的乘积，根据以乘积为幂指数、常数e为底数得到的指数函数结果计算对应聚类簇的第三聚类评价值，获取当前聚类下的最大第三聚类评价值；根据每个像素点的梯度计算每个边缘直线的平均梯度，分别计算聚类簇中每个边缘直线与其他边缘直线的平均梯度的差值绝对值的总和，令聚类簇中每个边缘直线的差值绝对值的总和进行相加得到差值总和，将每个聚类簇的差值总和相加得到当前聚类下的第四聚类评价值；结合第一聚类评价值、第二聚类评价值、最大第三聚类评价值和第四聚类评价值获取当前聚类下的聚类效果评价值。进一步的，所述目标获取单元中基于聚类效果评价值确认目标边缘直线的方法，包括：设置聚类效果评价阈值，当聚类效果评价值大于聚类效果评价阈值时，确认对应K值为K-mean算法的最优K值，进而将最优K值对应聚类下最大的第三聚类评价值的聚类簇中的边缘直线作为目标边缘直线。进一步的，所述优选检测单元中计算理想双边缘直线中每条边缘直线的直线度的方法，包括：将当前边缘直线由中心点进行平均划分，将关于中心点对称的两个像素点作为一组像素点对，连接像素点对，获取其连线与水平方向之间的夹角，得到每组像素点对的夹角，根据组像素点对的夹角计算平均夹角，将每组像素点对的夹角与平均夹角之间的差值绝对值进行求和，得到差值绝对值累加值，将差值绝对值累加值的倒数作为当前边缘直线的直线度。进一步的，所述优选检测单元还包括对直线度的优化，其优化方法为：计算当前边缘直线去除组像素点对后的第一直线度，利用第一直线度和当前边缘直线的像素点对的剩余组数计算当前边缘直线的优选长度；将优选长度大于优选长度阈值所对应的第一直线度作为当前边缘直线的有效直线度。进一步的，所述优选检测单元中根据直线度和检测精度值计算对应理想双边缘直线的边缘检测效果值的方法，包括：边缘检测效果值的计算公式为：其中，为边缘检测效果值；为理想双边缘直线中边缘直线1的有效直线度；为理想双边缘直线中边缘直线2的有效直线度；为理想双边缘直线中边缘直线1与水平方向的夹角；为理想双边缘直线中边缘直线2与水平方向的夹角；|*|为绝对值符号；为理想双边缘直线中边缘直线1的检测精度值；为理想双边缘直线中边缘直线2的检测精度值；为极小值。进一步的，所述异常监测单元中折弯精度的获取方法，包括：分别计算当前优选边缘线与其垂直的其他优选边缘线之间的夹角差值绝对值，并获取每个夹角差值绝对值与预设角度之间的差值绝对值，将差值绝对值进行累加得到当前优选边缘线的异常值；根据优选边缘线的异常值计算平均异常值，将平均异常值作为折弯机的折弯精度。本发明实施例至少具有如下有益效果：通过对图像中各个直线使用自适应变化K值的聚类算法进行聚类，结合聚类结果后各个类别内直线梯度信息及聚类簇形成区域纹理信息进行聚类效果评价，根据其聚类效果获取优选聚类次数，并在此聚类次数下，获取目标直线，可以大大减少环境中呈现出的直线的误检情况，有效提高了折弯机进行精度检测时数据的可靠性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例提供的一种折弯机的异常折弯精度监测系统的结构框图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种折弯机的异常折弯精度监测系统，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种折弯机的异常折弯精度监测系统的具体方案。本发明所针对的具体场景为：在进行折弯机精度检测时，使折弯机加工一个折弯90度的金属加工件，通过判断此金属加工件的折弯角度的精度，来确定折弯机的折弯精度。请参阅图1，其示出了本发明一个实施例提供的一种折弯机的异常折弯精度监测系统的结构框图，该系统包括：图像采集单元10，用于采集由折弯机折弯后的加工金属部件图像，以得到对应的灰度图像，对灰度图像进行语义分割，得到仅包含加工金属部件的目标图像。具体的，本方案通过检测使用折弯机进行折弯处理后的金属，通过获取图像计算其折弯角度与其标准折弯角度的差异，进而达到监测折弯机精度异常的目的。首先，将摄像机放置到折弯机旁边，拍摄完成折弯后的加工金属部件图像，将获取的加工金属部件图像使用灰度化、除噪等预处理操作，得到对应的灰度图像，其中，灰度化使用加权平均灰度法，除噪使用高斯滤波除噪方法进行，预处理操作技术均为现有公知技术，本发明不再赘述。使用语义分割网络，将灰度图像中的金属加工部件提取出来，以得到仅包含金属加工部件的目标图像，其中语义分割网络的训练过程为：语义分割网络使用ResNet神经网络；输入为灰度图像，输出为仅包含金属加工部件的目标图像；标签分为两种，金属加工部件和背景，标记方式为：金属加工部件标记为1，背景标记为0；语义分割网络所用的损失函数为交叉熵损失函数。ResNet神经网络是公知技术，本方案中不再详细赘述。目标获取单元20，用于对所述目标图像进行边缘检测，得到对应的边缘图像，检测边缘图像中的所有边缘直线，获取每个边缘直线的角度值以及边缘直线和图像中心点的距离，根据角度值和距离计算任意两个边缘直线之间的欧式距离，基于欧式距离利用K-mean算法进行聚类，通过改变K值，根据每个聚类簇中的元素差异获取每次聚类的聚类效果评价值，基于聚类效果评价值确认目标边缘直线，目标边缘直线是指根据边缘直线及其相邻边缘直线能够获取加工金属部件的弯折角度所对应的边缘直线。具体的，由于金属加工部件表面光滑，以及环境灯光的问题，使用工业相机获取的图像往往携带着大量无用但却能影响目标实现的因素，故需要将这些噪声边缘进行区分。首先使用canny算子对目标图像进行边缘检测，获取对应的边缘图像，然后使用霍夫直线检测将边缘图像中的所有边缘直线识别出来。其中canny算子边缘检测算法以及霍夫直线检测算法均为现有公知技术，本发明不做赘述。判断边缘直线是否为目标边缘直线，得到目标边缘直线，目标边缘直线是指根据边缘直线及其相邻边缘直线能够获取加工金属部件的弯折角度所对应的边缘直线。根据获取的边缘直线，对边缘图像中的所有边缘直线进行分析以确定边缘图像中边缘直线是否是本发明所需的目标边缘直线，其中根据折弯机及周围物品可知，在进行检测时，会检测到大量与被折弯金属面板不相关的边缘直线，由于若采集获取的边缘直线为板材边缘直线，那么由边缘直线包围获取的边缘直线包含板材纹理，而板材纹理特征是较为规律的，若由其它干扰直线误识为边缘直线，那么获取的该区域的纹理信息应会出现显著性变化，因此不仅可以根据边缘图像中各个边缘直线与图像中心的关系获取边缘图像中各个边缘直线为目标直线的可能性，还可以根据边缘图像中由所选边缘直线衍生所获取的最大矩形区域的纹理信息，以根据其纹理信息确定所求折弯机参考的边缘直线是否为目标边缘直线。由于本发明中使用折弯机对金属板材折弯的角度为90°，并且相机放置在折弯金属侧发方进行拍摄，故目标边缘直线应是水平或垂直的，故可根据此特征进行筛选：将获取的边缘直线按照在边缘图像中位置进行分析，其中记每个边缘直线为，其中g表示边缘直线与水平方向夹角的角度值或与垂直水平方向夹角的角度值中最小的一个值，d表示边缘直线在边缘图像中的位置与图像中心点的距离，然后根据每条边缘直线的计算任意两个边缘直线的欧式距离，基于欧式距离利用用K-means算法进行聚类，聚类目的是将边缘图像中的目标边缘直线聚类到一个类别中，进而对这一个类别里的边缘直线进行后续分析。本发明聚类使用K-means算法，其中K值未知，故本发明设计了一种自适应变化K值的聚类算法，即通过变换K值，获取每次聚类下的聚类效果评价值，根据聚类效果评价值获取最优K值，则聚类效果评价值的获取方法如下：分别计算聚类簇中每个边缘直线与聚类中心对应边缘直线之间的欧式距离，得到第一欧式距离总和，将每个聚类簇的第一欧式距离总和相加得到当前聚类下的第一聚类评价值，则第一聚类评价值的计算公式为：其中，为第j个聚类簇中第i个边缘直线与聚类中心对应边缘直线之间的欧式距离；为第j个聚类簇中的边缘直线的数量。各个聚类簇的类内差异越小，则说明聚类效果越好，对应第一聚类评价值越小。分别计算每个聚类簇的聚类中心对应边缘直线与每个其他聚类簇的聚类中心对应边缘直线之间的欧式距离，得到第二欧式距离总和，将每个聚类簇的第二欧式距离总和相加得到当前聚类下的第二聚类评价值，则第二聚类评价值的计算公式为：其中，为第n个聚类簇的聚类中心对应边缘直线与第m个聚类簇的聚类中心对应边缘直线之间的欧式距离。根据每个聚类簇中的边缘直线得到边缘图像中对应的最小拟合矩阵区域，计算最小拟合矩阵区域中每个像素点的LBP值，得到对应的LBP区域，构建LBP区域的灰度共生矩阵得到熵和能量，获取熵与能量的乘积，根据以乘积为幂指数、常数e为底数得到的指数函数结果计算对应聚类簇的第三聚类评价值，获取当前聚类下的最大第三聚类评价值，则第三聚类评价值的计算公式为：其中，为熵；为能量。当所求纹理越规律,即ASM越小，则说明对应纹理越好；ENT表示熵，熵值越大，图像越复杂，当所求b越大时，便可认为聚类效果越好。根据每个像素点的梯度计算每个边缘直线的平均梯度，分别计算聚类簇中每个边缘直线与其他边缘直线的平均梯度的差值绝对值的总和，令聚类簇中每个边缘直线的差值绝对值的总和进行相加得到差值总和，将每个聚类簇的差值总和相加得到当前聚类下的第四聚类评价值。具体的，考虑到若因为阴影等反射在折弯板材上，其阴影边缘易被误认为目标边缘直线，故本发明使用边缘直线在边缘图像中的梯度进行区分，根据这一特征获取第四聚类评价值，则第四聚类评价值的计算公式为：其中，p表示第j个聚类簇中元素的数量，表示第j个聚类簇中第i个边缘直线的平均梯度，表示第j个聚类簇中第b个边缘直线的平均梯度。若所求聚类结果中每个聚类簇内元素对应边缘直线的梯度值越相近，则所求z越大，说明聚类效果越好。结合第一聚类评价值、第二聚类评价值、最大第三聚类评价值和第四聚类评价值获取当前聚类下的聚类效果评价值。聚类效果评价值的计算公式为：其中，当所求类内元素差异越小，类间差异越大，获取聚类直线拟合矩形区域纹理越规律，获取的各个聚类簇中各个边缘梯度值越相近，即所求R越大，则说明聚类效果越好。设置聚类效果评价阈值为0.7，当聚类效果评价值大于聚类效果评价阈值时，确认对应K值为K-mean算法的最优K值，进而将最优K值对应聚类下最大的第三聚类评价值的聚类簇中的边缘直线作为目标边缘直线。优选检测单元30，用于利用区域生长得到每个目标边缘直线的目标区域，基于设定的灰度值阈值得到每个目标区域中的理想双边缘直线，计算理想双边缘直线中每条边缘直线的直线度；分别将理想双边缘直线中的每条边缘直线划分为多个强边缘和弱边缘，统计任意一条边缘直线中相邻强边缘和弱边缘之间的间隔数量，且计算每个间隔对应的强边缘和弱边缘的最近端点之间的欧式距离，得到平均欧式距离作为对应边缘直线的检测精度值；根据直线度和检测精度值计算对应理想双边缘直线的边缘检测效果值；由所述边缘检测效果值确认所有理想双边缘直线中的优选边缘线。具体的，为了使获取的精度更加准确，对获取目标边缘直线进行进一步分析。其中考虑到在金属加工部件过薄的情况下进行边缘检测时，可能将金属薄边两侧边缘检测为一条直线边缘，而这就可能导致获取的角度不是精准的角度，进而误判折弯机的精度，故通过对目标边缘直线分析获取优选边缘线，也即是金属加工部件的最优边缘线。将获取的目标边缘直线映射回灰度图像中，提取目标边缘直线上每个像素点的灰度值，以得到每条目标边缘直线的平均灰度值，基于平均灰度值，使用区域生长获取所有与目标边缘线的平均灰度值相近的其他像素点，以组成目标边缘直线的目标区域，生长方式为：将与目标边缘直线的平均灰度值之间的灰度差值小于灰度差值阈值的相邻像素点划分为同一区域。且本方案中灰度差值阈值为5。区域生长为现有公知技术，本方案中不再赘述。由于拍摄相机的精度问题，在拍摄过于单薄的金属加工件的底边时，获取的图像是模糊，进而导致其底边边缘的梯度值为从两侧向中间逐渐变大，使得检测时仅检测到一条边缘直线，但是根据这样的规律所获取的图像梯边缘显然不是本发明中所需要的边缘，因此基于每个目标边缘直线的目标区域，能够提取被一条边缘直线所遮挡的原本两个边缘直线，故本方案设计了一种抑制高阈值、选取低阈值的canny边缘检测算子，即仅选取在高低阈值之间的像素点作为边缘像素点，具体操作如下：首先，预设高阈值为a和低阈值为b，将其成为高低阈值，基于高低阈值获取目标区域中的理想双边缘直线，其中理想双边缘直线是指两条边缘直线。然后，分别将每条边缘直线由其中心点平均划分，以将关于中心点对称的像素点划分为一组，通过判断边缘直线上所有组的像素点对之间的连线所对应的角度的偏差大小，获取对应边缘直线的直线度，以一条边缘直线为例，获取其直线度的方法为：将该边缘直线由中心点进行平均划分，将关于中心点对称的两个像素点作为一组像素点对，连接像素点对，获取其连线与水平方向之间的夹角，得到每组像素点对的夹角，根据组像素点对的夹角计算平均夹角，将每组像素点对的夹角与平均夹角之间的差值绝对值进行求和，得到差值绝对值累加值，将差值绝对值累加值的倒数作为该边缘直线的直线度。由于在进行折弯的时候，在接近折角部分可能会产生一定弧度，可能会对计算直线的直线度产生影响，故需要自适应的选取直线两端长度以减少这种影响，因此基于边缘直线的直线长度对直线度进行优化，得到有效直线度，其优化公式为：其中，为边缘直线的优选长度；为去除的像素点对的组数；为边缘直线的原始像素点对的总组数；为去除组像素点对后所计算的直线度。越大时，Y越大，表示对应去掉的组数z就越好，此时就越能减少因为弯曲带来的直线度影响。设置优选长度阈值为0.5，当Y大于优选长度阈值时，确定其所对应的直线度为有效直线度。由此，能够得到每条目标边缘直线对应目标区域中所获取的理想双边缘直线的有效直线度。进一步的，在进行理想双边缘线的检测时，不仅要考虑检测获取的边缘直线的直线度，还需要考虑检测获取的边缘直线的连续性，由于算法中高低阈值的存在，可能会使得检测获取的边缘直线不连续，而canny算法会将这些不连续的边缘直线连接起来，形成最后的边缘直线；高低阈值的不同，高低阈值所获取的边缘直线之间的距离便会不同，而当其距离越大时，最终获取的边缘直线的真实性就越低，尤其在进行精度检测时，高低阈值检测获取的边缘直线之间的距离越大，越可能出现精度测量不准确的情况，因此需要合适的高低阈值保证使用此高低阈值获取的强弱边缘之间的距离尽可能的小，故基于高低阈值将理想双边缘直线中的每条边缘直线划分为多个子边缘线，且高阈值划分的子边缘线为强边缘、低阈值划分的为弱边缘，进而理想双边缘直线中每条边缘直线都被划分为多个强边缘和弱边缘。以理想双边缘直线中的一条边缘直线为例，统计相邻的强边缘和弱边缘之间的间隔数量，且计算每个间隔对应的强边缘和弱边缘的最近端点之间的欧式距离，得到平均欧式距离作为该边缘直线的检测精度值；同理计算理想双边缘直线中的另一个边缘直线的检测精度值。作为一个示例，检测精度值的计算公式为：其中，为理想双边缘直线中任意一条边缘直线对应相邻的强边缘和弱边缘之间的间隔数量；为第i个间隔对应的强边缘和弱边缘的最近端点之间的欧式距离。利用理想双边缘直线中每条边缘直线的有效直线度和检测精度值计算对应理想双边缘直线的边缘检测效果值，其边缘检测效果值的计算公式为：其中，为边缘检测效果值；c表示对目前区域进行理想双边缘直线检测后所获取的边缘直线的数量；为理想双边缘直线中边缘直线1的有效直线度；为理想双边缘直线中边缘直线2的有效直线度；为理想双边缘直线中边缘直线1与水平方向的夹角；为理想双边缘直线中边缘直线2与水平方向的夹角；|*|为绝对值符号；为理想双边缘直线中边缘直线1的检测精度值；为理想双边缘直线中边缘直线2的检测精度值；为极小值，经验值取1。当所求边缘检测获取理想双边缘直线的有效直线度越大，两直线的夹角越接近,即越小，则说明对应边缘检测效果越好，即F越大；高低阈值检测的强边缘和弱边缘之间的距离越小，检测精度值越小，说明对应边缘检测效果越好，即F越大。设置检测效果阈值ψ=0.7，当理想双边缘直线的边缘检测效果值大于检测效果阈值ψ时，确认对应理想双边缘直线对应的两条边缘直线为优选边缘线。异常监测单元40，用于分别计算每条优选边缘线与其垂直的其他优选边缘线之间的夹角差值，根据夹角差值与预设角度之间的差异计算折弯机的折弯精度，当折弯精度大于精度阈值，确认折弯机的折弯精度存在异常。具体的，利用优选检测单元30得到所有的优选边缘线，分别计算当前优选边缘线与其垂直的其他优选边缘线之间的夹角差值绝对值，并获取每个夹角差值绝对值与预设角度之间的差值绝对值，将差值绝对值进行累加得到当前优选边缘线的异常值；根据优选边缘线的异常值计算平均异常值，将平均异常值作为折弯机的折弯精度，设置精度阈值λ=1，当折弯精度大于精度阈值，确认折弯机的折弯精度存在异常。综上所述，本发明实施例提供了一种折弯机的异常折弯精度监测系统，该系统包括图像采集单元；获取仅包含加工金属部件的目标图像；目标获取单元：对目标图像进行边缘检测得到边缘图像，检测边缘图像中的所有边缘直线，获取边缘直线中的目标边缘直线；优选检测单元：根据每个目标边缘直线的目标区域获取理想双边缘直线，获取理想双边缘直线中的优选边缘线；异常监测单元：基于优先边缘线的夹角计算折弯机的折弯精度，以检测折弯机的折弯精度异常。基于弯折加工金属部件的边缘特征计算折弯机的折弯精度，使得获取的精度信息更加精准，异常监测效果更好。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。且上述对本说明书特定实施例进行了描述。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
