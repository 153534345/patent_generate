标题title
一种基于残差网络和2D特征表示的电梯大数据风险预警方法
摘要abst
本发明公开了一种基于残差网络和2D特征表示的电梯大数据风险预警方法，旨在克服现有技术中数据量大、模型容易过拟合和易产生梯度消失/爆炸等问题，它包括对数据预处理流程和困人预测流程，在困人预测流程中，系统将时间序列特征输入至分类模块，分类模型中的平均池化下采样对时间序列特征进行降维处理，分类模型中的两层全连接神经网络模型将降维处理后的时间序列特征维度转换为2，系统将维度为2的时间序列特征代入分类模型的softmax函数得到预测结果。
权利要求书clms
1. 一种基于残差网络和2D特征表示的电梯大数据风险预警方法，其特征在于，该方法包括以下步骤：步骤1：系统按照时间序列采集历史物联网电梯数据，将历史物联网电梯数据划分为密集特征和稀疏特征，对密集特征和稀疏特征进行归一化处理；步骤2：系统将归一化处理后的密集特征和稀疏特征带入皮尔逊相关系数公式计算得到特征与电梯故障事件之间的皮尔逊相关系数，判断特征与电梯故障事件之间的皮尔逊相关系数是否低于阈值α，若是则筛除密集特征和稀疏特征中的相应特征； 步骤3：系统通过Embedding层对筛除后的稀疏特征进行映射处理，映射后的稀疏特征与密集特征具有相同的维度，通过全连接神经网络模型对筛除后的密集特征进行特征提取，将映射后的稀疏特征和特征提取后密集特征进行拼接； 步骤4：系统将拼接后的特征按照时间序列输入至多头自注意力机制模型获得注意力结果；步骤5：系统将注意力结果输入至残差神经网络模型得到时间序列特征；步骤6：系统将时间序列特征输入至分类模块，分类模型中的平均池化下采样对时间序列特征进行降维处理，分类模型中的两层全连接神经网络模型将降维处理后的时间序列特征维度转换为二，系统将维度为二的时间序列特征代入分类模型的softmax函数得到预测结果，其中，预测结果电梯故障事件的预测发生概率和预测不发生概率；步骤7：系统获取实际结果，将预测结果和实际结果代入Focal Loss损失函数得到损失度，通过Adam优化器优化残差神经网络模型，使得损失度得以降低，并对训练次数加1，其中，真实结果包括电梯故障事件的实际发生概率和实际不发生概率；步骤8：系统判断训练次数是否小于100次，若是则迭代步骤3至步骤8。2.根据权利要求1所述的一种基于残差网络和2D特征表示的电梯大数据风险预警方法，其特征在于，所述步骤1，具体包括如下步骤：步骤11：系统获取原始数据，其中，原始数据包括电梯的位置信息、电梯的设备信息、电梯的困人/故障信息、电梯的时间天气信息；步骤12：系统对原始数据进行数据清洗得到按时间序列排列的历史物联网电梯数据。3.根据权利要求2所述的一种基于残差网络和2D特征表示的电梯大数据风险预警方法，其特征在于，所述步骤12，具体包括如下步骤：步骤121：系统将原始数据代入分段三次埃尔米特插值方法进行缺失补全；步骤122：系统对统一原始数据中的格式和内容错误的数据以及修改逻辑上错误的数据；步骤123：系统对原始数据进行关联性验证、数据运算、分类和统计产生按时间序列排列的历史物联网电梯数据，并存储至数据库中。4.根据权利要求1所述的一种基于残差网络和2D特征表示的电梯大数据风险预警方法，其特征在于，所述步骤4，具体包括：步骤41：系统将拼接后的特征按照时间序列输入多头注意力机制模块中线性层得到维度为的Query向量、维度为的Key向量以及维度为的Value向量，分别采用、和表示；步骤42：系统计算和特征中其他序列片段Kay值的点积，其点积结果用表示，其中，属于到；步骤43：系统将除以，将除以的结果代入如下Softmax函数得到注意力结果：，其中，表示Softmax激活函数，表示时间序列，表示Key向量的维度。5.根据权利要求1所述的一种基于残差网络和2D特征表示的电梯大数据风险预警方法，其特征在于，所述分类模型基于Sigmoid激活函数。6.根据权利要求1所述的一种基于残差网络和2D特征表示的电梯大数据风险预警方法，其特征在于，所述残差神经网络模型是一系列残差模块构成的网络，残差模块由直接映射和残差部分构成。7.根据权利要求1所述的一种基于残差网络和2D特征表示的电梯大数据风险预警方法，其特征在于，所述残差神经网络模型包括如下公式所示的一种残差模块：，其中，表示上一个残差模块的输出特征，表示残差部分，残差部分由两个或三个卷积操作构成，每个卷积操作中间使用批标准化处理防止残差神经网络模型过拟合，最后使用Relu激活函数引入非线性关系。8.根据权利要求7所述的一种基于残差网络和2D特征表示的电梯大数据风险预警方法，其特征在于，所述残差神经网络模型还包括如下公式所示的bottleneck的残差模块：，其中，表示1x1大小卷积操作。9.根据权利要求1所述的一种基于残差网络和2D特征表示的电梯大数据风险预警方法，其特征在于，所述残差神经网络的层数为9层，隐含神经元数量为28个，模型的学习率设置为1e-4。
说明书desc
技术领域本发明属于电梯故障预警技术，特指一种基于残差网络和2D特征表示的电梯大数据风险预警方法。背景技术随着我国经济的不断发展，各地区城市化的不断推进，电梯的需求不断增多，截止2020年底，我国电梯保有量达786.55万台左右，保有量世界第一。。目前我国电梯还存在着诸多问题，技术规范标准还在完善，目前的数据采集处理方式、存储装置和信息服务平台设计具有差异；维护单位技术参差不齐；受到人为破坏等不确定事件；电梯运行状况易受季节气候影响。因此很难设计一种广泛适用的方法对电梯故障和安全维护进行预测。自物联网被确立为国家重点发展战略技术以来，取得了长足的发展，在智能家居，智慧城市、工业生产、智能安防方面实现万物互联，成为了电梯故障预测及维护的重要媒介。残差网络的提出是计算机视觉史上具有里程碑意义的事件，ResNet分别在ILSVRC和COCO 2015等比赛获得了优异的成绩，刷新了CNN模型在ImageNet上的历史。同时，ResNet也是2016年CVPR的最佳论文的模型。传统时间序列模型常伴有一系列问题：1）时间序列过长时计算资源消耗量大：当时间序列过大时，LSTM网络的层数会加深，从而导致退化的现象，既随着网络层数和训练次数的增加，loss反而增大；2）模型容易出现过拟合的现象：既模型在训练集的效果表现优越，在测试集效果较差；3）容易产生梯度消失/爆炸的问题：梯度前向传播过程中，梯度值无限接近于0或无限大，导致模型无法找到最优解。发明内容为克服现有技术的不足及存在的问题，我们没有简单地聚合物联网历史数据以得到时间序列特征，而是将物联网电梯数据划分为密集特征和稀疏特征，并引入了一种时间自注意力机制去捕捉时间序列变换信息，以得到更具有帮助的特征表示，再通过残差神经网络方法将时间序列特征转换为二维图像特征，通过分类模块得到是否发生故障。本发明提供了一种基于残差网络和2D特征表示的电梯大数据风险预警方法，该方法包括以下步骤：步骤1：系统按照时间序列采集历史物联网电梯数据，按照时间序列顺序生成时间序列特征及是否发生故障标签，将历史物联网电梯数据划分为密集特征和稀疏特征，对密集特征和稀疏特征进行归一化处理；步骤2：系统将归一化处理后的密集特征和稀疏特征带入皮尔逊相关系数公式计算得到特征与电梯故障事件之间的皮尔逊相关系数，判断特征与电梯故障事件之间的皮尔逊相关系数是否低于阈值α，若是则筛除密集特征和稀疏特征中的相应特征；步骤3：系统通过Embedding层对筛除后的稀疏特征进行映射处理，映射后的稀疏特征与密集特征具有相同的维度，通过全连接神经网络模型对筛除后的密集特征进行特征提取，将映射后的稀疏特征和特征提取后密集特征进行拼接；步骤4：系统将拼接后的特征按照时间序列输入至多头自注意力机制模型获得注意力结果；步骤5：系统将注意力结果输入至残差神经网络模型得到时间序列特征；步骤6：系统将时间序列特征输入至分类模块，分类模型中的平均池化下采样对时间序列特征进行降维处理，分类模型中的两层全连接神经网络模型将降维处理后的时间序列特征维度转换为2，系统将维度为2的时间序列特征代入分类模型的softmax函数得到预测结果，其中，预测结果电梯故障事件的预测发生概率和预测不发生概率；步骤7：系统获取实际结果，将预测结果和实际结果代入Focal Loss损失函数得到损失度，通过Adam优化器优化残差神经网络模型，使得损失度得以降低，并对训练次数加1，其中，真实结果包括电梯故障事件的实际发生概率和实际不发生概率；步骤8：系统判断训练次数是否小于100次，若是则迭代步骤3至步骤8。作为优选，所述步骤1，具体包括如下步骤：步骤11：系统获取原始数据，其中，原始数据包括电梯的位置信息、电梯的设备信息、电梯的困人/故障信息、电梯的时间天气信息；步骤12：系统对原始数据进行数据清洗得到按时间序列排列的历史物联网电梯数据。作为优选，所述步骤12，具体包括如下步骤：步骤121：系统将原始数据代入分段三次埃尔米特插值方法进行缺失补全；步骤122：系统对统一原始数据中的格式和内容错误的数据以及修改逻辑上错误的数据；步骤123：系统对原始数据进行关联性验证、数据运算、分类和统计产生按时间序列排列的历史物联网电梯数据，并存储至数据库中。作为优选，所述步骤4，具体包括：步骤41：系统将拼接后的特征按照时间序列输入多头注意力机制模块中线性层得到维度为的Query向量、维度为的Key向量以及维度为的Value向量，分别采用、和表示；步骤42：系统计算和特征中其他序列片段Kay值的点积，其点积结果用表示，其中，属于到；步骤43：系统将除以，将除以的结果代入如下Softmax函数得到注意力结果：，其中，表示Softmax激活函数，表示时间序列，表示Key向量的维度，用于防止乘积过大。作为优选，所述分类模型基于Sigmoid激活函数。作为优选，所述残差神经网络模型是一系列残差模块构成的网络，残差模块由直接映射和残差部分构成。作为优选，所述残差神经网络模型包括如下公式所示的一种残差模块：，其中，表示上一个残差模块的输出特征，表示残差部分，残差部分由两个或三个卷积操作构成，每个卷积操作中间使用批标准化处理防止残差神经网络模型过拟合，最后使用Relu激活函数引入非线性关系。作为优选，所述残差神经网络模型还包括如下公式所示的bottleneck的残差模块：，其中，表示1x1大小卷积操作。作为优选，所述残差神经网络的层数为9层，隐含神经元数量为28个，模型的学习率设置为1e-4。本发明相比现有技术突出且有益的技术效果是：在本发明中，相比于现有技术，本方法能够提取时间序列上的物联网电梯数据并通过多头自注意力机制模型进行特征提取，增加与电梯故障时间成正相关的时间序列片段权重，减少与电梯故障时间成负相关的时间序列片段权重，以提升模型的召回率，进而保证了预警的准确性和有效性。此外，本发明将特征一维时间序列转变为二维图像序列，利用带有残差模块的神经网络模型用于特征提取，并通过平均池化下采样、全连接神经网络模型和softmax函数得到预测结果。在本发明中，该发明可以在电梯风险预警中有效学习历史物联网电梯数据中的高级特征。此外，在实测过程中，该方法在杭州市的物联网电梯的故障预测上表现优异，及时降低了物联网电梯的停梯率，及时能够排除物联网电梯的故障。在本发明中，针对背景技术中提到的第1个问题，由于传统的网络模型随着层数加深，特征的图像信息会逐渐减少，而本发明使用的残差神经网络模型可以通过short cut的方式保证了k+1层的网络一定比+k层包含更多的图像信息。针对背景技术中提到的第2个问题，本发明的残差神经网络模型使用平均池化下采样等正则化方法，有效减少了模型出现过拟合的问题。针对背景技术中提到的第3个问题，本发明使用的残差神经网络模型通过批标准化处理来避免梯度消失或梯度爆炸的问题。附图说明图1为本发明实施例提供的一种基于残差网络和2D特征表示的电梯大数据风险预警流程图；图2为本发明实施例提到的原始数据类别信息示意图；图3为本发明的原始数据包括的主要异常类型信息示意图；图4为本发明实施例提供的数据清洗流程示意图；图5为本发明实施例提供的电梯清单表的具体内容信息示意图；图6为本发明实施例提供的困人/故障记录表的具体内容信息示意图；图7为本发明实施例提供的天气气温表的具体内容信息示意图；图8为本发明实施例提供的电梯风险预警大数据模型系统结构图；图9为本发明实施例提供的一种基于残差网络和2D特征表示的电梯大数据风险预警方法中处理流程示意图；图10为本发明实施例提供的残差神经网络模型中的一种残差模块的示意图；图11为本发明实施例提供的残差神经网络模型中的另一种残差模块的示意图；图12为本发明实施例提供的自注意力机制模型的示意图；图13为Sigmoid激活函数图；图14为本发明实施例提供的本发明最终选择的残差神经网络模型参数示意图；图15为本发明实施例提供的系统的实测过程的预测结果示意图。具体实施方式为了便于本领域技术人员的理解，下面结合附图和具体实施例对本发明作进一步描述。如图1至图15所示，本实施例基于时间序列对历史物联网电梯数据进行特征提取及自注意力机制分析，进而用于物联网电梯故障困人预测评估。使用基于深度学习的时间序列预测算法来解决电梯风险预警问题，可以将方法分为数据预处理流程与困人预测流程。为了说明本发明所述的技术方案，下面结合附图和具体实施例作说明。如图1所示，为本发明实施例提供的一种基于残差网络和2D特征表示的电梯大数据风险预警流程图，本方法包括如下步骤：步骤1：系统按照时间序列采集历史物联网电梯数据，按照时间序列顺序生成时间序列特征及是否发生故障标签,即把特征按时间顺序排序，将历史物联网电梯数据划分为密集特征和稀疏特征，对密集特征和稀疏特征进行归一化处理；上述步骤中，物联网电梯指的是具有物联网功能的电梯，相较于传统的电梯，本发明的物联网电梯指的是在不改变电梯原有电气线路以及传感系统情况下，给电梯配置安装智能网关、智能传感器、智能摄像头等终端设备，通过上述的终端设备对电梯各种故障、运行和统计等数据进行采集并传送至基于残差网络的电梯风险预测系统，从而实现系统按照时间序列采集物联网电梯数据。历史物联网电梯数据可用x表示。物联网电梯数据由物联网设备采集的特征组成的集合包括温度，运行次数，安装时间等。其中，一些特征能够用one-hot表示的称为稀疏特征，如允许次数。一些特征能够用向量表示的称为密集特征，如温度。并且密集特征的特征是连续的，系统根据两者区别将物联网电梯数据划分为密集特征和稀疏特征并进行归一化处理，从而消除特征的量纲，以便于后续进行模型训练时找到最优解。稀疏特征为由能够用one-hot表示的特征集，密集特征为由能够用向量表示的特征集。步骤2：系统将归一化处理后的密集特征和稀疏特征带入皮尔逊相关系数公式计算得到特征与电梯故障事件之间的皮尔逊相关系数，判断特征与电梯故障事件之间的皮尔逊相关系数是否低于阈值α，若是则筛除密集特征和稀疏特征中的相应特征；上述步骤中，系统将密集特征和稀疏特征代入皮尔逊相关系数公式计算得到密集特征和稀疏特征之间的皮尔逊相关系数，判断皮尔逊相关系数是否低于阈值α，若否，则保留密集特征和稀疏特征中的相应特征，若是，则筛除密集特征和稀疏特征中的相应特征。通过皮尔逊相关系数对密集特征和稀疏特征进行特征筛选，排除了其中特征干扰的问题，减少了后续模型训练时的计算量以及提高了模型训练时的拟合效率。阈值α预先设置在系统中，若所得的皮尔逊相关系数低于阈值α时，则说明密集特征和稀疏特征中对应特征与电梯故障事件的发生没有显著关系或者毫无关系。若所得的皮尔逊相关系数不低于阈值α时，则说明密集特征和稀疏特征中对应特征与电梯故障事件的发生具有密切关系或者直接关系。步骤3：系统通过Embedding层对筛除后的稀疏特征进行映射处理，Embedding层即以onehot为输入、中间层节点为字向量维数的全连接层，能够对原始特征进行编码，便于后续处理。映射后的稀疏特征与密集特征具有相同的维Í度，通过全连接神经网络模型对筛除后的密集特征进行特征提取，将映射后的稀疏特征和特征提取后密集特征进行拼接；上述步骤中，Embedding层实质上是一种用于对稀疏特征进行降维处理的映射模型，致使映射后的稀疏特征与密集特征具有相同的维度，可以让映射后的稀疏特征中的特征和密集特征中的特征位于同一特征空间，从而便于后续对映射后的稀疏特征和密集特征进行统一处理，也提高了后续电梯预警的表达能力。系统通过全连接神经网络模型对密集特征进行特征提取，全连接神经网络模型指的是具有多层感知器的的网络，也就是多层神经元的网络。层与层之间需要包括一个非线性激活函数，具有一个对输入和输出都隐藏的层。系统再按照时间序列的顺序将映射后的系数特征和特征提取后密集特征进行拼接，拼接后的映射后的系数特征和特征提取后密集特征称为拼接后的特征。和现有的特征拼接相比本专利针对不同的特征类型分别进行上述处理，能够有效应用于不同的数据类型，实用性强。步骤4：系统将拼接后的特征按照时间序列输入至多头自注意力机制模型获得特征；上述步骤中，由于拼接后的特征由组成映射后的系数特征和特征提取后密集特征组成，因此采用多头自注意力模型进行处理，多头自注意力机制模型允许模型对拼接后的特征在不同位置之间进行注意力传递，以便于获得不同时间序列特征的上下文交互信息，如图11所示多头自注意力机制模型可以更好地理解拼接后的特征含义，多头自注意力机制模型更加关注于拼接后的特征中对电梯故障预警有帮助的特征。如图11为本发明实施例提供的多头自注意力机制模型的示意图。系统为了提取历史物联网电梯数据中不同时间序列的物联网电梯特征，按照时间序列使用自注意力机制模型对拼接后的特征进行特征提取，之后使用平均池化进行处理以达到特征聚合的目的。本发明受到自然语言处理中seq2seq任务的启发，可以将此视为一个seq2seq的过程，使用序列模型。本发明用到的自注意力机制模型以一组序列作为输入，利用自注意力机制模型的线性层映射出的Query向量和Key向量做点积运算后再与Value向量做加权求和，输出具有各个所有输入序列之间权重的一组向量序列。例如，系统将映射后的稀疏特征和特征提取后密集特征进行拼接后得到按照时间序列排序的特征，将该特征输入给多头注意力机制模块之后通过三个自注意力机制模型的线性层分别输出维度为的Query向量、Key向量，分别用和表示，以及维度为的Value向量，用表示，Query向量用来匹配Key向量，Value向量表示从输入特征中所提取的信息。接着，系统计算和特征中其他序列片段Kay值的点积，其点积结果用表示，其中，属于到。特征中其他序列片段指的是特征中除了、和对应序列片段。为防止数据过大导致后面使用Softmax激活函数计算之后的结果恒取0或1的问题，系统将除以，之后使用Softmax函数对除以的结果进行计算，Softmax激活函数可以引入非线性变换，以获得该特征中序列片段Value值的权重，最后与特征中当前片段的Value值进行点积运算，得到不同时间序列的注意力结果，注意力结果采用如下公式表示：，其中，表示Softmax激活函数，表示时间序列。步骤5：系统将特征输入至残差神经网络模型得到时间序列特征；上述步骤中，经过多头自注意力机制模型处理的特征视为二维时间序列图像，系统通过残差神经网络模型对特征进行特征提取得到时间序列特征。残差神经网络模型内部设置残差模块，残差模块利用跳跃连接实现特征跨层传播，解决了随着网络层数增加训练网络模型发生退化现象的问题。图13为本发明实施例提供的本发明最终选择的残差神经网络模型参数示意图。经过多组超参数与预测模型参数的测试，最终选择的模型参数如图13所示，残差神经网络模型的层数选为9层，隐含神经元数量为28个，使用Soft Label以及One Hot系数特征转换，模型的学习率设置为1e-4。残差网络使得模型的深度提高，减少因为模型结构太深导致的性能降低的情况。步骤6：系统将时间序列特征输入至分类模块，分类模型中的平均池化下采样对时间序列特征进行降维处理，分类模型中的两层全连接神经网络模型将降维处理后的时间序列特征维度转换为2，系统将维度为2的时间序列特征代入分类模型的softmax函数得到预测结果，其中，预测结果包括电梯故障事件的预测发生概率和预测不发生概率；步骤7：系统获取实际结果，将预测结果和实际结果代入Focal Loss损失函数得到损失度，通过Adam优化器优化分类模型，使得损失度得以降低，并对训练次数加1，其中，真实结果包括电梯故障事件的实际发生概率和实际不发生概率；上述步骤中，使用Focal Loss损失函数计算得到的损失度可以衡量电梯故障事件的预测发生概率和预测不发生概率与电梯故障事件的实际发生概率和实际不发生概率之间的差异，通过Adam优化器优化减少了分类模型中正样本和负样本不均衡带来预测准确性较低的问题，并有助于对分类模型中难分样本的分类并提高其权重。样本指的是在实际使用时物联网电梯数据根据本方法处理得到的预测结果，若预测结果和实际结果一致时，则称为正样本，若预测结果和实际结果不一致时，则称为负样本。步骤8：系统判断训练次数是否小于100次，若是则迭代步骤3至步骤8。上述步骤中，若训练次数不小于100次时，则系统可选用100次训练次数中损失度为最小值时的残差神经网络模型作为最终残差神经网络模型用于预测。在实际使用中，通过混淆矩阵计算得到该最终模型的召回率，召回率也叫查全率，用于表示实际为正样本中有多少被预测为正样本。所述步骤1，具体包括如下步骤：步骤11：系统获取原始数据，其中，原始数据包括电梯的位置信息、电梯的设备信息、电梯的困人/故障信息、电梯的时间天气信息；如图2所示，为本发明实施例提到的原始数据类别信息示意图。原始数据包括四种类型，分别为电梯的位置信息、电梯的设备信息、电梯的困人/故障信息、电梯的时间天气信息。对于不同的数据类型，可以采用的处理方式不同。电梯的位置信息包括电梯所在的区县、街道，以及电梯所在的场所类型等。电梯的位置信息之间存在一定的照应关系。若电梯的区县信息缺失，但记录有电梯的街道信息，则系统可以依照电梯街道信息补充对应的电梯区县信息，具体地，系统可以根据电梯的街道信息在预设的地址数据库中检索电梯的区县信息。但是电梯的位置信息的其他的缺失情况下，则系统不能补充电梯的位置信息。电梯的设备信息包括电梯的注册代码、设备型号、类型、使用状态、限速、限重、电梯楼层数、制造单位、制造日期、安装单位、安装日期、使用年限、维保单位、改造单位、改造日期和大修单位等。电梯的设备信息包含的子段较多，彼此之间的关系也相对多样。对于缺失电梯的安装日期，系统可以依据电梯的注册代码直接生成电梯的安装日期。系统可以从电梯的安装日期和当前日期推算得到电梯的使用年限。电梯的设备信息中单独缺损的其他信息，则系统不能相互推断得到相应单独缺损的其他信息。电梯的困人/故障信息包括困人/故障的具体日期、解救人数、救援到达时间、救援用时、施救单位、原因等。由于电梯的困人/故障信息在不同时期的记录标准可能存在不一致，所以导致不同时期的电梯的困人/故障信息不统一的问题，系统需要将不同记录标准下的电梯的困人/故障信息统一到一致的标准下。电梯的时间天气信息包括电梯所在地的天气代码、气温信息、季节信息、节假日信息等。电梯的时间天气信息可以依据互联网平台上的天气预报APP获取电梯所在地的历史天气、气温数据、季节信息。电梯的节假日信息则需要系统根据法定日历的数据具体生成。在本发明中，天气预报APP为“2345天气王”，电梯所在地为杭州。步骤12：系统对原始数据进行数据清洗得到按时间序列排列的历史物联网电梯数据；上述步骤中，数据清洗的作用是处理原始数据中的异常部分。图3为本发明的原始数据包括的主要异常类型信息。原始数据中主要的异常类型信息如图3所示，包括数据乱码、不同字段间的数据混杂、数据值异常和数据格式/标准不一致等。对于原始数据中不同的异常类型信息，采取的数据清洗方式不同。原始数据中的数据乱码表现为原始数据完全为乱码或者是乱码与正常数据交替出现，由于原始数据中的数据乱码难以被识别、读取。其中，乱码与正常数据交替出现的数据乱码仍可能包含正常部分，因此该原因的数据乱码可经由人工筛查后继续使用。完全为乱码的原始数据只能被系统舍弃，或留待至系统进行替换后更新为有效数据。乱码数据在各个字段均有分布。原始数据中不同字段间的数据混杂表现为当前字段出现其他字段的数据，一般来自于数据导出时的错误引起，此类原始数据中的异常部分可以经由人工核查并校正。原始数据中不同字段间的数据混杂在不同字段也均有分布。原始数据中数据值异常表现为文本、数值超出正常范围，一般来自于原始数据空缺引起，数据导出时系统自动补正数据值异常。系统将原始数据中的异常部分进行数据清洗完后，还可根据需要可以填补数据，或者将异常数据删除。如图4所示，为本发明实施例提供的数据清洗流程示意图。所述步骤12，具体包括：系统首先获取原始数据；步骤121：系统将原始数据代入分段三次埃尔米特插值公式进p行缺失补全，插值函数满足：,把此类插值多项式称为埃尔米特插值，该插值算法能够补充得到平滑的缺失值；上述步骤为系统对原始数据中的缺失值进行数据清洗。缺失补全采用了分段三次埃尔米特插值公式来实现在缺失值位置进行插值，避免高次插值可能出现的大幅度波动现象，以及获得更好的近似效果。步骤122：系统然后修改原始数据中的格式错误、内容错误和逻辑上错误的数据；上述步骤中，操作员可通过系统完成上述修改操作。但是需要注意的是，修改的数据需要进行备份，以避免修改错误导致数据丢失的问题。步骤123：系统接着对原始数据进行关联性验证、数据运算、分类和统计产生历史物联网电梯数据并存储至数据库；上述步骤中，由于原始数据的来源有繁多复杂，系统对繁多复杂原始数据进行关联性验证。例如，可采用皮尔逊相关系数法验证多个数据之间的关联性，以便于后续对原始数据进行分类和统计。系统再对原始数据进行数据运算、分类和统计，例如，系统可以根据数据疏密性将数据划分成密集特征和稀疏特征从而组成历史物联网电梯数据。图8为本发明实施例提供的电梯风险预警大数据模型系统结构图。系统总体可以划分为预处理模块和预测模块两个部分，预处理模块主要用于将原始数据清洗为有效、可用的物联网电梯数据，预测模块用于处理输入的物联网电梯数据，预测下一个周期的电梯故障事件的发生概率。电梯故障事件可以包括电梯困人事件、电梯停止运行事件、电梯门持续开关事件、电梯门不开事件、电梯异常事件中的至少一种。图9为本发明实施例提供的一种基于残差网络和2D特征表示的电梯大数据风险预警方法中处理流程示意图。如图9所示，该方法首先把历史物联网电梯数据根据特征性质划分为密集特征和稀疏特征。然后将密集特征和稀疏特征进行归一化操作，减少量纲对数据的影响。接着考虑到密集特征和稀疏特征中的特征可能与物联网电梯的故障事件发生没有显著关系或者毫无关系，系统利用皮尔逊相关系数公式寻找密集特征和稀疏特征中不同特征与发生电梯故障事件之间的皮尔逊相关系数，进而通过阈值α对密集特征和稀疏特征进行特征筛除，在减少没有显著关系或毫无关系的特征对预警结果影响的同时降低模型计算量。然后通过全连接神经网络模型对密集特征进行特征提取，通过Embedding层将稀疏特征映射至特征空间，使得密集特征和稀疏特征具有相同的维度，从而可将二者进行拼接。接着将拼接后的特征输入至多头自注意力机制模型获取能够关注不同时间序列和上下文关系的注意力特征。由于拼接后的特征可以视为2D的图像特征，系统利用残差神经网络模型进行2D特征表示提取得到时间序列特征。最后，系统通过基于Sigmoid激活函数的分类模型输出预测结果，Sigmoid激活函数如图12所示，可以引入非线性变换。由于分类模型得到的预测结果的正样本和负样本可能存在差距过大的问题，通过Focal Loss损失函数计算得到损失度，Adam优化器根据损失度对分类模型进行优化，增加少量正样本的loss值，减小大量负样本的loss值，达到减少正负样本数量差距过大带来的影响。使用训练完成的分类模型对待预测的物联网电梯进行预测、评估。在实际测试中，本发明以召回率作为评价指标，通过实测得到的召回率获得了较好的预测结果，表明本基于残差网络和2D特征表示的电梯大数据风险预警方法的预警的准确性和有效性。图10和图11为本发明实施例提供的残差神经网络模型中的残差模块的示意图。残差神经网络模型是由一系列残差模块构成的网络，而每一个残差模块由直接映射和残差部分构成，其具体结构如图10所示。可以表示为如下公式：，其中，表示上一个残差模块的输出特征，表示残差部分，残差部分由两个或三个卷积操作构成，每个卷积操作中间使用批标准化处理防止残差神经网络模型过拟合，最后使用Relu激活函数引入非线性关系。直接映射对应于图10的中的“+”，其将上一个残差模块的输出与当前残差模块的残差部分特征进行单位加操作。除了两层的残差模块，残差神经网络模型还有一种bottleneck的残差模块结构，其如图11所示。其残差部分的卷积核形状由1x1变为3x3，在变为1x1，形状如同瓶颈结构。当与形状不相似时，使用一个1x1大小的卷积核进行升维或降维，此外还可以通过zero-padding增加维度。其计算过程可以通过如下公式表示：，其中，表示1x1大小卷积操作。所述步骤4，具体包括：步骤41：系统将拼接后的特征按照时间序列输入多头注意力机制模块中线性层得到维度为的Query向量、维度为的Key向量以及维度为的Value向量，分别采用、和表示；步骤42：系统计算和特征中其他序列片段Kay值的点积，其点积结果用表示，其中，属于到；步骤43：系统将除以，将除以的结果代入如下Softmax函数得到注意力结果：，其中，表示Softmax激活函数，表示时间序列。图15为本发明实施例提供的系统的实测过程的预测结果示意图，实测对象为位于杭州市的物联网电梯。在平均预测数量维1500个的情况下，2022年1月至2022年4月的平均召回率为28.5%。考虑到没有用全量数据训练，而且原始数据有部分困人没有统计进去，因此对这部分数据进行修正，定义修正系数为1.5的情况下，2022年1月至2022年4月的平均修正有效率为42.7%。上述实施例仅为本发明的较佳实施例，并非依此限制本发明的保护范围，故：凡依本发明的结构、形状、原理所做的等效变化，均应涵盖于本发明的保护范围之内。
