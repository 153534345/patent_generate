标题title
基于共形映射的自由曲面恒力铣削轨迹规划方法及装置
摘要abst
本发明公开了一种基于共形映射的自由曲面恒力铣削轨迹规划方法及装置，其中，所述方法包括：获取待铣削自由曲面零件的三维网格模型及铣削刀具模型；将三维网格模型一一对应的映射为二维网格模型；对二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹；计算基于二维铣削加工轨迹加工二维网格模型时的第一材料去除率；利用第一材料去除率计算所述三维网格模型的第二材料去除率；判断第二材料去除率是否超过预设阈值；将二维铣削加工轨迹通过共形映射算法的逆映射方式映射到三维网格模型中，获得自由曲面零件的加工轨迹。在本发明实施例中，能够为自由曲面零件的铣削提供加工质量更好、计算效率更高的加工方法。
权利要求书clms
1.一种基于共形映射的自由曲面恒力铣削轨迹规划方法，其特征在于，所述方法包括：获取待铣削自由曲面零件的三维网格模型及铣削刀具模型；基于共形映射算法将所述三维网格模型一一对应的映射为二维网格模型；对所述二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹；计算基于所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率；基于所述三维网格模型与所述二维网格模型之间的形变系数利用所述第一材料去除率计算所述三维网格模型的第二材料去除率；判断所述第二材料去除率是否超过预设阈值；在第二材料去除率不超过预设阈值时，将所述二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹。2.根据权利要求1所述的自由曲面恒力铣削轨迹规划方法，其特征在于，所述方法还包括：在第二材料去除率超过预设阈值时，在所述二维网格模型中插入二维变半径摆线轨迹，获得二维网格模型上插入二维变半径摆线轨迹后的二维铣削加工轨迹；将二维网格模型上插入二维变半径摆线轨迹后的二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹。3.根据权利要求2所述的自由曲面恒力铣削轨迹规划方法，其特征在于，所述在所述二维网格模型中插入二维变半径摆线轨迹，包括：在所述第二材料去除率超过预设阈值的位置上提取相邻两个环形轨迹的平分线作为摆线轨迹的引导线；沿着所述引导线根据二维变半径摆线的数学模型生成二维变半径摆线轨迹；在所述二维网格模型中插入所述二维变半径摆线轨迹。4.根据权利要求3所述的自由曲面恒力铣削轨迹规划方法，其特征在于，所述二维变半径摆线的数学模型如下：所述摆线轨迹的瞬时中心从O1线性移动到O2，其中O1和O2为所述引导线上的两个点，其曲线距离为一个步距Sstep；当瞬时中心点移动到O时，对应的摆线轨迹上的点根据当前的摆线旋转角度θ∈计算获得，计算公式如下：在所述摆线轨迹进给的过程中，摆线的半径随着当前的旋转角度θ变化，并定义为RTR；当前角度对应的刀位点C在摆线曲线上，并且与瞬时中心点O的距离为RTR，因此刀位点计算过程如下：用R1和R2来分别表示中心点O1和O2的最大内切圆半径，则瞬时的摆线的半径RTR看作是R1至R2的线性插值，并且由旋转角度θ作为参数表示，有：5.根据权利要求1所述的自由曲面恒力铣削轨迹规划方法，其特征在于，所述基于共形映射算法将所述三维网格模型一一对应的映射为二维网格模型，包括：基于共形映射算法构造在三维网格模型与二维网格模型的映射中的三角网格变形能量函数；基于三角网格变形能量函数将三维网格模型映射为二维网格模型；其中，三角网格变形能量函数如下：其中，Nf表示三维网格模型映曲面的三角片数量；表示参数域中展平网格面的第i个三角片的第j个角度；表示预先计算出的自定义优化角度；表示每个展平网格的角度形变能力的权值。6.根据权利要求1所述的自由曲面恒力铣削轨迹规划方法，其特征在于，所述对所述二维网格模型的二维铣削加工轨迹的规划处理，获得二维铣削加工轨迹，包括：获得所述铣削刀具模型的加工参数，所述加工参数包括刀具半径、切削深度、残留高度及进给速度；基于所述加工参数利用平面零件的环切加工轨迹生成方法对所述二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹。7.根据权利要求1所述的自由曲面恒力铣削轨迹规划方法，其特征在于，所述计算基于所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率，包括：基于二维的几何运算方式计算利用所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率；其中，计算公式如下：MRR2＝Rt·α·Vfc·H；其中，MRR2表示第一材料去除率，Rt表示刀具半径；α表示刀具圆周与零件的切触角度；Vfc表示刀具上切削中点的进给速度；H表示轴向切削深度。8.根据权利要求1所述的自由曲面恒力铣削轨迹规划方法，其特征在于，所述利用所述第一材料去除率计算所述三维网格模型的第二材料去除率的计算过程如下：MRR3＝τMRR2；其中，MRR3表示第二材料去除率；MRR2表示第一材料去除率；τ表示预设比例，所述预设比例为所述三维网格模型与所述二维网格模型之间的形变系数。9.根据权利要求1所述的自由曲面恒力铣削轨迹规划方法，其特征在于，所述将所述二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹，包括：获得所述三维网格模型与所述二维网格模型之间一一对应的映射关系；基于所述映射关系获得二维网格模型上的加工轨迹点的二维位置在所述三维网格模型上对应的三维位置；基于二维网格模型上的加工轨迹点的二维位置在所述三维网格模型上对应的三维位置获得自由曲面零件的加工轨迹。10.一种基于共形映射的自由曲面恒力铣削轨迹规划装置，其特征在于，所述装置包括：获得模块：用于获取待铣削自由曲面零件的三维网格模型及铣削刀具模型；映射模块：用于基于共形映射算法将所述三维网格模型一一对应的映射为二维网格模型；规划模块：用于对所述二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹；第一计算模块：用于计算基于所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率；第二计算模块：用于基于所述三维网格模型与所述二维网格模型之间的形变系数利用所述第一材料去除率计算所述三维网格模型的第二材料去除率；判断模块：用于判断所述第二材料去除率是否超过预设阈值；逆映射模块：用于在第二材料去除率不超过预设阈值时，将所述二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹。
说明书desc
技术领域本发明涉及机械加工技术领域，尤其涉及一种基于共形映射的自由曲面恒力铣削轨迹规划方法及装置。背景技术随着自由曲面在各领域的应用日益广泛，人们对零件的表面形状精度、表面粗糙度以及亚表面损伤程度的要求不断提高。自由曲面零件广泛存在于航空航天、船舶、新能源等高端装备的核心零件中，如水轮机叶轮、大型风电装备叶片、储油罐壳体等，其制造水平是衡量国家工业发展水平和综合国力的重要标志。自由曲面铣削加工作为曲面精加工工序，对于自由曲面的表面质量和精度有着至关重要的影响。目前的自由曲面铣削加工轨迹没有考虑铣削过程中切削力的频繁变化的问题。尤其在复杂自由曲面铣削加工中，切削力容易产生剧烈的突变，轻则影响自由曲面表面加工质量以及产生加工变形误差，重则影响刀具和加工装备的寿命。有关研究表明，变半径摆线铣削轨迹能够很好地解决铣削力的突变问题。由于摆线的轨迹是连续的，加工过程中刀具接触角和径向深度变化平缓且可控，且不会受到加工区域形状改变的影响，能很好地保持材料去除率的稳定，进而保持铣削力稳定，能够提升加工表面质量以及提高刀具寿命。然而，由于变半径摆线铣削轨迹包含空切段，相对于传统的铣削轨迹，其走刀路径的总长度更长。对于切削力本来就稳定的位置，采用传统的铣削轨迹即可维持铣削力的稳定。因此，如何自适应地在切削力突变的位置插入变半径摆线铣削轨迹，使得整个铣削过程铣削力恒定在设定值以下，对加工效率和加工质量都有重要意义。准确的切削力预测往往需要大量的计算时间，难以实现快速的切削力预测，阻碍了恒力铣削轨迹规划的发展。许多研究者指出材料去除率与切削力具有密切相关性，可以作为切削力变化情况的直观的衡量指标，反映铣削过程中切削力的变化情况。如今，二维平面零件铣削中的材料去除率计算，由于几何运算简单，可以实现较为高效的铣削力预测。但是，三维自由曲面零件由于需要三维的布尔预算、有限元仿真等耗时较大的方法，计算效率远远达不到要求。发明内容本发明的目的在于克服现有技术的不足，本发明提供了一种基于共形映射的自由曲面恒力铣削轨迹规划方法及装置，能够为自由曲面零件的铣削提供加工质量更好、计算效率更高的加工方法。为了解决上述技术问题，本发明实施例提供了一种基于共形映射的自由曲面恒力铣削轨迹规划方法，所述方法包括：获取待铣削自由曲面零件的三维网格模型及铣削刀具模型；基于共形映射算法将所述三维网格模型一一对应的映射为二维网格模型；对所述二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹；计算基于所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率；基于所述三维网格模型与所述二维网格模型之间的形变系数利用所述第一材料去除率计算所述三维网格模型的第二材料去除率；判断所述第二材料去除率是否超过预设阈值；在第二材料去除率不超过预设阈值时，将所述二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹。可选的，所述方法还包括：在第二材料去除率超过预设阈值时，在所述二维网格模型中插入二维变半径摆线轨迹，获得二维网格模型上插入二维变半径摆线轨迹后的二维铣削加工轨迹；将二维网格模型上插入二维变半径摆线轨迹后的二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹。可选的，所述在所述二维网格模型中插入二维变半径摆线轨迹，包括：在所述第二材料去除率超过预设阈值的位置上提取相邻两个环形轨迹的平分线作为摆线轨迹的引导线；沿着所述引导线根据二维变半径摆线的数学模型生成二维变半径摆线轨迹；在所述二维网格模型中插入所述二维变半径摆线轨迹。可选的，所述二维变半径摆线的数学模型如下：所述摆线轨迹的瞬时中心从O1线性移动到O2，其中O1和O2为所述引导线上的两个点，其曲线距离为一个步距Sstep；当瞬时中心点移动到O时，对应的摆线轨迹上的点根据当前的摆线旋转角度θ∈计算获得，计算公式如下：在所述摆线轨迹进给的过程中，摆线的半径随着当前的旋转角度θ变化，并定义为RTR；当前角度对应的刀位点C在摆线曲线上，并且与瞬时中心点O的距离为RTR，因此刀位点计算过程如下：用R1和R2来分别表示中心点O1和O2的最大内切圆半径，则瞬时的摆线的半径RTR看作是R1至R2的线性插值，并且由旋转角度θ作为参数表示，有：可选的，所述基于共形映射算法将所述三维网格模型一一对应的映射为二维网格模型，包括：基于共形映射算法构造在三维网格模型与二维网格模型的映射中的三角网格变形能量函数；基于三角网格变形能量函数将三维网格模型映射为二维网格模型；其中，三角网格变形能量函数如下：其中，Nf表示三维网格模型映曲面的三角片数量；表示参数域中展平网格面的第i个三角片的第j个角度；表示预先计算出的自定义优化角度；表示每个展平网格的角度形变能力的权值。可选的，所述对所述二维网格模型的二维铣削加工轨迹的规划处理，获得二维铣削加工轨迹，包括：获得所述铣削刀具模型的加工参数，所述加工参数包括刀具半径、切削深度、残留高度及进给速度；基于所述加工参数利用平面零件的环切加工轨迹生成方法对所述二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹。可选的，所述计算基于所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率，包括：基于二维的几何运算方式计算利用所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率；其中，计算公式如下：MRR2＝Rt·α·Vfc·H；其中，MRR2表示第一材料去除率，Rt表示刀具半径；α表示刀具圆周与零件的切触角度；Vfc表示刀具上切削中点的进给速度；H表示轴向切削深度。可选的，所述利用所述第一材料去除率计算所述三维网格模型的第二材料去除率的计算过程如下：MRR3＝τMRR2；其中，MRR3表示第二材料去除率；MRR2表示第一材料去除率；τ表示预设比例，所述预设比例为所述三维网格模型与所述二维网格模型之间的形变系数。可选的，所述将所述二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹，包括：获得所述三维网格模型与所述二维网格模型之间一一对应的映射关系；基于所述映射关系获得二维网格模型上的加工轨迹点的二维位置在所述三维网格模型上对应的三维位置；基于二维网格模型上的加工轨迹点的二维位置在所述三维网格模型上对应的三维位置获得自由曲面零件的加工轨迹。另外，本发明实施例还提供了一种基于共形映射的自由曲面恒力铣削轨迹规划装置，所述装置包括：获得模块：用于获取待铣削自由曲面零件的三维网格模型及铣削刀具模型；映射模块：用于基于共形映射算法将所述三维网格模型一一对应的映射为二维网格模型；规划模块：用于对所述二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹；第一计算模块：用于计算基于所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率；第二计算模块：用于基于所述三维网格模型与所述二维网格模型之间的形变系数利用所述第一材料去除率计算所述三维网格模型的第二材料去除率；判断模块：用于判断所述第二材料去除率是否超过预设阈值；逆映射模块：用于在第二材料去除率不超过预设阈值时，将所述二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹。在本发明实施例中，通过共形映射算法，考虑变形系数的影响，建立三维自由曲面模型与二维平面模型在材料去除率以及铣削轨迹上的映射关系，进而在材料去除率超过设定值的位置，自适应地插入变半径摆线轨迹，从而获得自由曲面的恒力铣削轨迹；能大大提高三维自由曲面模型铣削过程中材料去除率的计算效率，并能准确识别铣削力突变的位置，进而进行恒力铣削轨迹规划；并且能够为自由曲面零件的铣削提供加工质量更好、计算效率更高的加工方法。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见的，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它的附图。图1是本发明实施例中的基于共形映射的自由曲面恒力铣削轨迹规划方法的流程示意图；图2是本发明实施例中的三维网格模型通过共形映射变为二维网格模型的示意图；图3是本发明实施例中的二维网格模型上铣削加工轨迹示意图；图4是本发明实施例中的二维网格模型上铣削加工过程材料去除率计算的示意图；图5是本发明实施例中的三维网格模型上铣削加工过程材料去除率预测情况的示意图；图6是本发明实施例中的二维网格模型上恒力铣削加工轨迹通过逆映射转换到三维网格模型上的示意图；图7是本发明实施例中的基于共形映射的自由曲面恒力铣削轨迹规划装置的结构组成示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其它实施例，都属于本发明保护的范围。实施例一请参阅图1，图1是本发明实施例中的基于共形映射的自由曲面恒力铣削轨迹规划方法的流程示意图。如图1所示，一种基于共形映射的自由曲面恒力铣削轨迹规划方法，所述方法包括：S11：获取待铣削自由曲面零件的三维网格模型及铣削刀具模型；在本发明具体实施例中，需要获得待铣削自由曲面零件的表面的三维网格模型，同时获得用于铣削加工的铣削刀具的铣削刀具模型，具体包括有铣削刀具类型、形状、尺寸等参数数据，主要用于后续材料去除率的计算等。S12：基于共形映射算法将所述三维网格模型一一对应的映射为二维网格模型；在本发明具体实施过程中，所述基于共形映射算法将所述三维网格模型一一对应的映射为二维网格模型，包括：基于共形映射算法构造在三维网格模型与二维网格模型的映射中的三角网格变形能量函数；基于三角网格变形能量函数将三维网格模型映射为二维网格模型；其中，三角网格变形能量函数如下：其中，Nf表示三维网格模型映曲面的三角片数量；表示参数域中展平网格面的第i个三角片的第j个角度；表示预先计算出的自定义优化角度；表示每个展平网格的角度形变能力的权值。具体的，共形映射是调和映射中调和能量最小的一种，调和映射指在黎曼流形中两个紧致流形M和N之间的一个映射；当调和能量最小时，两个流形形成共形映射；在三维网格与平面网格的共形映射中，可以保持网格的角度不变。因此通过共形映射算法构造在三维网格模型与二维网格模型的映射中的三角网格变形能量函数；并通过三角网格变形能量函数将三维网格模型映射为二维网格模型；其中，三角网格变形能量函数如下：其中，Nf表示三维网格模型映曲面的三角片数量；表示参数域中展平网格面的第i个三角片的第j个角度；表示预先计算出的自定义优化角度；表示每个展平网格的角度形变能力的权值。由此获得与三维网格模型对应的二维网格模型，具体过程如图2所示。S13：对所述二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹；在本发明具体实施过程中，所述对所述二维网格模型的二维铣削加工轨迹的规划处理，获得二维铣削加工轨迹，包括：获得所述铣削刀具模型的加工参数，所述加工参数包括刀具半径、切削深度、残留高度及进给速度；基于所述加工参数利用平面零件的环切加工轨迹生成方法对所述二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹。具体的，首先是得到铣削刀具模型的加工参数，该加工参数具体包括有刀具半径、切削深度、残留高度等加工参数；利用平面零件的环切加工轨迹生成方法，生成二维网格模型的环切加工轨迹，如图3所示，具体方法为对加工区域使用外轮廓向内偏置、同时内轮廓向外偏置的方法逐层构建环形的加工轨迹，并依次对每个环进行连接；即，通过加工参数利用平面零件的环切加工轨迹生成方法对二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹。S14：计算基于所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率；在本发明具体实施过程中，所述计算基于所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率，包括：基于二维的几何运算方式计算利用所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率；其中，计算公式如下：MRR2＝Rt·α·Vfc·H；其中，MRR2表示第一材料去除率，Ry表示刀具半径；α表示刀具圆周与零件的切触角度；Vfc表示刀具上切削中点的进给速度；H表示轴向切削深度。具体的，如图4所示，D为两相邻走刀轨迹之间的行距，H为轴向切削深度，Vf为进给速度，Vfc为刀具上切削中点的进给速度，Rt为刀具半径，α为刀具圆周与零件的切触角度，则二维网格模型的铣削加工轨迹的材料去除率可由以下公式估算：MRR2＝Rt·α·Vfc·H；其中，MRR2表示第一材料去除率，Ry表示刀具半径；α表示刀具圆周与零件的切触角度；Vfc表示刀具上切削中点的进给速度；H表示轴向切削深度。在具体的实施过程中，Vfc可以使用Vf近似代替以简化计算；由上述材料去除率的估算公式可知，在二维铣削加工的过程中一般会按照恒定的轴向切深和进给速度进行加工，当沿加工轨迹进行二网格模型的铣削时，材料去除率会随着刀具圆周与零件切触角度的不同而改变，且变化幅度较大，进而导致切削力也会发生变化，影响加工过程的稳定性。同样的，将二维铣削加工轨迹转换到三维铣削加工时，材料去除率也会发生变化。S15：基于所述三维网格模型与所述二维网格模型之间的形变系数利用所述第一材料去除率计算所述三维网格模型的第二材料去除率；在本发明具体实施过程中，所述利用所述第一材料去除率计算所述三维网格模型的第二材料去除率的计算过程如下：MRR3＝τMRR2；其中，MRR3表示第二材料去除率；MRR2表示第一材料去除率；τ表示预设比例，所述预设比例为所述三维网格模型与所述二维网格模型之间的形变系数。具体的，二维网格模型与三维网格模型之间的变形系数是指，二维网格模型与三维网格模型在对应的位置处，共形映射前后网格大小的比例；假设预设比例为τ，则三维网格模型的材料去除率为：MRR3＝τMRR2；其中，MRR3表示第二材料去除率；MRR2表示第一材料去除率；τ表示预设比例，所述预设比例为所述三维网格模型与所述二维网格模型之间的形变系数；如图5所示。S16：判断所述第二材料去除率是否超过预设阈值；在本发明具体实施过程中，通过判断第二材料去除率是否超过预设阈值来进行后续的步骤操作。S17：在第二材料去除率超过预设阈值时，在所述二维网格模型中插入二维变半径摆线轨迹，获得二维网格模型上插入二维变半径摆线轨迹后的二维铣削加工轨迹；在本发明具体实施过程中，所述在所述二维网格模型中插入二维变半径摆线轨迹，包括：在所述第二材料去除率超过预设阈值的位置上提取相邻两个环形轨迹的平分线作为摆线轨迹的引导线；沿着所述引导线根据二维变半径摆线的数学模型生成二维变半径摆线轨迹；在所述二维网格模型中插入所述二维变半径摆线轨迹。进一步的，所述二维变半径摆线的数学模型如下：所述摆线轨迹的瞬时中心从O1线性移动到O2，其中O1和O2为所述引导线上的两个点，其曲线距离为一个步距Sstep；当瞬时中心点移动到O时，对应的摆线轨迹上的点根据当前的摆线旋转角度θ∈计算获得，计算公式如下：在所述摆线轨迹进给的过程中，摆线的半径随着当前的旋转角度θ变化，并定义为RTR；当前角度对应的刀位点C在摆线曲线上，并且与瞬时中心点O的距离为RTR，因此刀位点计算过程如下：用R1和R2来分别表示中心点O1和O2的最大内切圆半径，则瞬时的摆线的半径RTR看作是R1至R2的线性插值，并且由旋转角度θ作为参数表示，有：具体的，在第二材料去除率超过预设阈值时，需要在材料去除率超过设定值的位置，提取相邻两个环形轨迹的平分线，作为摆线轨迹的引导线；沿着引导线，根据变半径摆线的数学模型，生成变半径摆线轨迹。变半径摆线的数学模型构建具体如下：摆线轨迹的瞬时中心点从O1线性移动到O2，O1和O2为引导线上的两个点，其曲线距离为一个步距Sstep。其中，摆线的步距是根据设定的恒定切削力计算得到。当瞬时中心点移动到O时，对应的摆线轨迹上的点可以根据当前的摆线旋转角度θ∈计算获得：在所述摆线轨迹进给的过程中，摆线的半径随着当前的旋转角度θ变化，并定义为RTR；当前角度对应的刀位点C在摆线曲线上，并且与瞬时中心点O的距离为RTR，因此刀位点计算过程如下：用R1和R2来分别表示中心点O1和O2的最大内切圆半径，则瞬时的摆线的半径RTR看作是R1至R2的线性插值，并且由旋转角度θ作为参数表示，有：如图6所示，为生成的二维网格模型上插入变半径摆线轨迹后的二维铣削加工轨迹。S18：在第二材料去除率不超过预设阈值时，将所述二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹。在本发明具体实施故操作，在第二材料去除率不超过预设阈值时，将二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹；或在第二材料去除率超过预设阈值时，通天上述的S17步骤获得二维网格模型上插入二维变半径摆线轨迹后的二维铣削加工轨迹；然后通过将二维网格模型上插入二维变半径摆线轨迹后的二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹；如图6所示，为通过共形映射算法的逆映射，获得的自由曲面零件的恒力铣削加工轨迹。在本发明实施例中，通过共形映射算法，考虑变形系数的影响，建立三维自由曲面模型与二维平面模型在材料去除率以及铣削轨迹上的映射关系，进而在材料去除率超过设定值的位置，自适应地插入变半径摆线轨迹，从而获得自由曲面的恒力铣削轨迹；能大大提高三维自由曲面模型铣削过程中材料去除率的计算效率，并能准确识别铣削力突变的位置，进而进行恒力铣削轨迹规划；并且能够为自由曲面零件的铣削提供加工质量更好、计算效率更高的加工方法。实施例二请参阅图7，图7是本发明实施例中的基于共形映射的自由曲面恒力铣削轨迹规划装置的结构组成示意图。如图7所示，一种基于共形映射的自由曲面恒力铣削轨迹规划装置，所述装置包括：获得模块21：用于获取待铣削自由曲面零件的三维网格模型及铣削刀具模型；在本发明具体实施例中，需要获得待铣削自由曲面零件的表面的三维网格模型，同时获得用于铣削加工的铣削刀具的铣削刀具模型，具体包括有铣削刀具类型、形状、尺寸等参数数据，主要用于后续材料去除率的计算等。映射模块22：用于基于共形映射算法将所述三维网格模型一一对应的映射为二维网格模型；在本发明具体实施过程中，所述基于共形映射算法将所述三维网格模型一一对应的映射为二维网格模型，包括：基于共形映射算法构造在三维网格模型与二维网格模型的映射中的三角网格变形能量函数；基于三角网格变形能量函数将三维网格模型映射为二维网格模型；其中，三角网格变形能量函数如下：其中，Nf表示三维网格模型映曲面的三角片数量；表示参数域中展平网格面的第i个三角片的第j个角度；表示预先计算出的自定义优化角度；表示每个展平网格的角度形变能力的权值。具体的，共形映射是调和映射中调和能量最小的一种，调和映射指在黎曼流形中两个紧致流形M和N之间的一个映射；当调和能量最小时，两个流形形成共形映射；在三维网格与平面网格的共形映射中，可以保持网格的角度不变。因此通过共形映射算法构造在三维网格模型与二维网格模型的映射中的三角网格变形能量函数；并通过三角网格变形能量函数将三维网格模型映射为二维网格模型；其中，三角网格变形能量函数如下：其中，Nf表示三维网格模型映曲面的三角片数量；表示参数域中展平网格面的第i个三角片的第j个角度；表示预先计算出的自定义优化角度；表示每个展平网格的角度形变能力的权值。由此获得与三维网格模型对应的二维网格模型，具体过程如图2所示。规划模块23：用于对所述二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹；在本发明具体实施过程中，所述对所述二维网格模型的二维铣削加工轨迹的规划处理，获得二维铣削加工轨迹，包括：获得所述铣削刀具模型的加工参数，所述加工参数包括刀具半径、切削深度、残留高度及进给速度；基于所述加工参数利用平面零件的环切加工轨迹生成方法对所述二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹。具体的，首先是得到铣削刀具模型的加工参数，该加工参数具体包括有刀具半径、切削深度、残留高度等加工参数；利用平面零件的环切加工轨迹生成方法，生成二维网格模型的环切加工轨迹，如图3所示，具体方法为对加工区域使用外轮廓向内偏置、同时内轮廓向外偏置的方法逐层构建环形的加工轨迹，并依次对每个环进行连接；即，通过加工参数利用平面零件的环切加工轨迹生成方法对二维网格模型的二维铣削加工轨迹进行规划处理，获得二维铣削加工轨迹。第一计算模块24：用于计算基于所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率；在本发明具体实施过程中，所述计算基于所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率，包括：基于二维的几何运算方式计算利用所述二维铣削加工轨迹加工所述二维网格模型时的第一材料去除率；其中，计算公式如下：MRR2＝Rt·α·Vfc·H；其中，MRR2表示第一材料去除率，Ry表示刀具半径；α表示刀具圆周与零件的切触角度；Vfc表示刀具上切削中点的进给速度；H表示轴向切削深度。具体的，如图4所示，D为两相邻走刀轨迹之间的行距，H为轴向切削深度，Vf为进给速度，Vfc为刀具上切削中点的进给速度，Rt为刀具半径，α为刀具圆周与零件的切触角度，则二维网格模型的铣削加工轨迹的材料去除率可由以下公式估算：MRR2＝Rt·α·Vfc·H；其中，MRR2表示第一材料去除率，Rt表示刀具半径；α表示刀具圆周与零件的切触角度；Vfc表示刀具上切削中点的进给速度；H表示轴向切削深度。在具体的实施过程中，Vfc可以使用Vf近似代替以简化计算；由上述材料去除率的估算公式可知，在二维铣削加工的过程中一般会按照恒定的轴向切深和进给速度进行加工，当沿加工轨迹进行二网格模型的铣削时，材料去除率会随着刀具圆周与零件切触角度的不同而改变，且变化幅度较大，进而导致切削力也会发生变化，影响加工过程的稳定性。同样的，将二维铣削加工轨迹转换到三维铣削加工时，材料去除率也会发生变化。第二计算模块25：用于基于所述三维网格模型与所述二维网格模型之间的形变系数利用所述第一材料去除率计算所述三维网格模型的第二材料去除率；在本发明具体实施过程中，所述利用所述第一材料去除率计算所述三维网格模型的第二材料去除率的计算过程如下：MRR3＝τMRR2；其中，MRR3表示第二材料去除率；MRR2表示第一材料去除率；τ表示预设比例，所述预设比例为所述三维网格模型与所述二维网格模型之间的形变系数。具体的，二维网格模型与三维网格模型之间的变形系数是指，二维网格模型与三维网格模型在对应的位置处，共形映射前后网格大小的比例；假设预设比例为τ，则三维网格模型的材料去除率为：MRR3＝τMRR2；其中，MRR3表示第二材料去除率；MRR2表示第一材料去除率；τ表示预设比例，所述预设比例为所述三维网格模型与所述二维网格模型之间的形变系数；如图5所示。判断模块26：用于判断所述第二材料去除率是否超过预设阈值；在本发明具体实施过程中，通过判断第二材料去除率是否超过预设阈值来进行后续的步骤操作。逆映射模块27：用于在第二材料去除率不超过预设阈值时，将所述二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹。在本发明具体实施故操作，在第二材料去除率不超过预设阈值时，将二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹；或在第二材料去除率超过预设阈值时，通天上述的S17步骤获得二维网格模型上插入二维变半径摆线轨迹后的二维铣削加工轨迹；然后通过将二维网格模型上插入二维变半径摆线轨迹后的二维铣削加工轨迹通过共形映射算法的逆映射方式映射到所述三维网格模型中，获得自由曲面零件的加工轨迹；如图6所示，为通过共形映射算法的逆映射，获得的自由曲面零件的恒力铣削加工轨迹。在第二材料去除率超过预设阈值时，在所述二维网格模型中插入二维变半径摆线轨迹，获得二维网格模型上插入二维变半径摆线轨迹后的二维铣削加工轨迹；即所述在所述二维网格模型中插入二维变半径摆线轨迹，包括：在所述第二材料去除率超过预设阈值的位置上提取相邻两个环形轨迹的平分线作为摆线轨迹的引导线；沿着所述引导线根据二维变半径摆线的数学模型生成二维变半径摆线轨迹；在所述二维网格模型中插入所述二维变半径摆线轨迹。进一步的，所述二维变半径摆线的数学模型如下：所述摆线轨迹的瞬时中心从O1线性移动到O2，其中O1和O2为所述引导线上的两个点，其曲线距离为一个步距Sstep；当瞬时中心点移动到O时，对应的摆线轨迹上的点根据当前的摆线旋转角度θ∈计算获得，计算公式如下：在所述摆线轨迹进给的过程中，摆线的半径随着当前的旋转角度θ变化，并定义为RTR；当前角度对应的刀位点C在摆线曲线上，并且与瞬时中心点O的距离为RTR，因此刀位点计算过程如下：用R1和R2来分别表示中心点O1和O2的最大内切圆半径，则瞬时的摆线的半径RTR看作是R1至R2的线性插值，并且由旋转角度θ作为参数表示，有：具体的，在第二材料去除率超过预设阈值时，需要在材料去除率超过设定值的位置，提取相邻两个环形轨迹的平分线，作为摆线轨迹的引导线；沿着引导线，根据变半径摆线的数学模型，生成变半径摆线轨迹。变半径摆线的数学模型构建具体如下：摆线轨迹的瞬时中心点从O1线性移动到O2，O1和O2为引导线上的两个点，其曲线距离为一个步距Sstep。其中，摆线的步距是根据设定的恒定切削力计算得到。当瞬时中心点移动到O时，对应的摆线轨迹上的点可以根据当前的摆线旋转角度θ∈计算获得：在所述摆线轨迹进给的过程中，摆线的半径随着当前的旋转角度θ变化，并定义为RTR；当前角度对应的刀位点C在摆线曲线上，并且与瞬时中心点O的距离为RTR，因此刀位点计算过程如下：用R1和R2来分别表示中心点O1和O2的最大内切圆半径，则瞬时的摆线的半径RTR看作是R1至R2的线性插值，并且由旋转角度θ作为参数表示，有：如图6所示，为生成的二维网格模型上插入变半径摆线轨迹后的二维铣削加工轨迹。在本发明实施例中，通过共形映射算法，考虑变形系数的影响，建立三维自由曲面模型与二维平面模型在材料去除率以及铣削轨迹上的映射关系，进而在材料去除率超过设定值的位置，自适应地插入变半径摆线轨迹，从而获得自由曲面的恒力铣削轨迹；能大大提高三维自由曲面模型铣削过程中材料去除率的计算效率，并能准确识别铣削力突变的位置，进而进行恒力铣削轨迹规划；并且能够为自由曲面零件的铣削提供加工质量更好、计算效率更高的加工方法。本领域普通技术人员可以理解上述实施例的各种方法中的全部或部分步骤是可以通过程序来指令相关的硬件来完成，该程序可以存储于一计算机可读存储介质中，存储介质可以包括：只读存储器、随机存取存储器、磁盘或光盘等。另外，以上对本发明实施例所提供的一种基于共形映射的自由曲面恒力铣削轨迹规划方法及装置进行了详细介绍，本文中应采用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处，综上所述，本说明书内容不应理解为对本发明的限制。
