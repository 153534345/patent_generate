标题title
测试模式复位电路、芯片
摘要abst
本发明公开了一种测试模式复位电路、芯片，复位电路用于芯片测试，复位电路包括：通道选择子电路，用于接收测试模式信号，并根据测试模式信号从多组预设通道中选通一组目标通道，以及通过目标通道传输相应的序列，记为目标序列；复位子电路，复位子电路与通道选择子电路连接，并用以连接测试模式控制电路，复位子电路用于根据目标序列生成复位信号，并将复位信号输出至测试模式控制电路，以通过控制测试模式控制电路使芯片进入目标测试模式。本发明省去芯片测试过程中测试模式切换时需要进行的上电复位过程，有效降低测试时间，提高了在制定测试计划时引脚复用的灵活度，提高了测试并行度，降低测试成本。
权利要求书clms
1.一种测试模式复位电路，其特征在于，用于芯片测试，所述复位电路包括：通道选择子电路，用于接收测试模式信号，并根据所述测试模式信号从多组预设通道中选通一组目标通道，以及通过所述目标通道传输相应的序列，记为目标序列；复位子电路，所述复位子电路与所述通道选择子电路连接，并用以连接测试模式控制电路，所述复位子电路用于根据所述目标序列生成复位信号，并将所述复位信号输出至所述测试模式控制电路，以通过控制所述测试模式控制电路使所述芯片进入目标测试模式。2.根据权利要求1所述的测试模式复位电路，其特征在于，每组所述预设通道包括时钟通道、模式选择通道和数据输入通道，所述时钟通道用于传输时钟序列，所述模式选择通道用于传输使能序列，所述数据输入通道用于传输密码序列。3.根据权利要求2所述的测试模式复位电路，其特征在于，所述复位子电路包括：密码移位使能单元和密码判断单元，所述密码移位使能单元分别与所述通道选择子电路和所述密码判断单元连接，所述密码判断单元还与所述通道选择子电路连接；所述密码移位使能单元，用于基于所述时钟通道传输的时钟序列接收所述模式选择通道传输的使能序列，并根据所述使能序列对所述密码判断单元进行使能控制；所述密码判断单元，用于在使能后基于所述时钟序列接收所述数据输入通道传输的密码序列，并根据所述密码序列生成所述复位信号。4.根据权利要求3所述的测试模式复位电路，其特征在于，所述密码移位使能单元具体用于：在所述使能序列的持续时间达到预设时长时，使能所述密码判断单元，并持续向所述密码移位使能单元输入所述使能序列，其中，所述预设时长包括多个时钟周期。5.根据权利要求4所述的测试模式复位电路，其特征在于，所述使能序列为高电平信号序列。6.根据权利要求3所述的测试模式复位电路，其特征在于，所述密码判断单元具体用于：判断所述密码序列和预设密码是否一致；若一致，则输出所述复位信号；否则，不输出所述复位信号。7.根据权利要求6所述的测试模式复位电路，其特征在于，所述复位信号为高电平信号。8.根据权利要求4所述的测试模式复位电路，其特征在于，所述预设时长包括N个时钟周期，N为大于等于10。9.根据权利要求8所述的测试模式复位电路，其特征在于，若所述测试模式信号对应的测试模式为扫描测试模式，则将所述芯片的scan_enable引脚取反后作为所述模式选择通道；若所述测试模式信号对应的测试模式为SRAM MBIST测试模式，则将所述芯片的invoke引脚取反后作为所述模式选择通道。10.一种芯片，其特征在于，所述芯片包括：测试模式控制电路和根据权利要求1-9中任一项所述的测试模式复位电路。
说明书desc
技术领域本发明涉及集成电路设计和测试领域，尤其涉及一种测试模式复位电路、芯片。背景技术在对集成电路进行可测性设计时，会将集成电路中控制测试模式的部分电路进行锁定保护以保证集成电路测试过程中的稳定性，防止集成电路在测试过程中误退出测试模式导致对集成电路测试失败。但是测试模式的锁定保护会让测试模式无法方便地切换到其他测试模式，所以测试模式的切换只能通过重新上电复位来实现。另外，集成电路的可测性设计中还会为了降低成本，尽量压缩测试时使用到的引脚数量，以提供测试并行度。如此需使得一些引脚具有多种功能复用的功能。这样进入某种测试模式后，用来给芯片提供测试模式切换序列的引脚被占用后，将无法进行测试模式切换，只能通过重新上电复位来实现测试模式切换。然而，上电复位在测试过程中会消耗掉比较多的测试时间，浪费测试成本。发明内容本发明旨在至少在一定程度上解决相关技术中的技术问题之一。为此，本发明的一个目的在于提出一种测试模式复位电路，适用于多种测试模式，在保证测试稳定性的前提下，实现芯片各种测试模式的安全热切换，提高了芯片的测试效率，降低了芯片的测试成本。本发明的第二个目的在于提出一种芯片。为达到上述目的，本发明第一方面实施例提出一种测试模式复位电路，用于芯片测试，所述复位电路包括：通道选择子电路，用于接收测试模式信号，并根据所述测试模式信号从多组预设通道中选通一组目标通道，以及通过所述目标通道传输相应的序列，记为目标序列；复位子电路，所述复位子电路与所述通道选择子电路连接，并用以连接测试模式控制电路，所述复位子电路用于根据所述目标序列生成复位信号，并将所述复位信号输出至所述测试模式控制电路，以通过控制所述测试模式控制电路使所述芯片进入目标测试模式。根据本发明实施例的测试模式复位电路，省去测试过程中测试模式切换时需要进行的上电复位过程，有效降低测试时间，提高了在制定测试计划时引脚复用的灵活度，提高了测试并行度，降低测试成本。另外，根据本发明上述实施例提出的测试模式复位电路还可以具有如下附加的技术特征：根据本发明的一个实施例，每组所述预设通道包括时钟通道、模式选择通道和数据输入通道，所述时钟通道用于传输时钟序列，所述模式选择通道用于传输使能序列，所述数据输入通道用于传输密码序列。根据本发明的一个实施例，所述复位子电路包括：密码移位使能单元和密码判断单元，所述密码移位使能单元分别与所述通道选择子电路和所述密码判断单元连接，所述密码判断单元还与所述通道选择子电路连接；所述密码移位使能单元，用于基于所述时钟通道传输的时钟序列接收所述模式选择通道传输的使能序列，并根据所述使能序列对所述密码判断单元进行使能控制；所述密码判断单元，用于在使能后基于所述时钟序列接收所述数据输入通道传输的密码序列，并根据所述密码序列生成所述复位信号。根据本发明的一个实施例，所述密码移位使能单元具体用于：在所述使能序列的持续时间达到预设时长时，使能所述密码判断单元，并持续向所述密码移位使能单元输入所述使能序列，其中，所述预设时长包括多个时钟周期。根据本发明的一个实施例，所述使能序列为高电平信号序列。根据本发明的一个实施例，所述密码判断单元具体用于：判断所述密码序列和预设密码是否一致；若一致，则输出所述复位信号；否则，不输出所述复位信号。根据本发明的一个实施例，所述复位信号为高电平信号。根据本发明的一个实施例，所述预设时长包括N个时钟周期，N为大于等于10。根据本发明的一个实施例，若所述测试模式信号对应的测试模式为扫描测试模式，则将所述芯片的scan_enable引脚取反后作为所述模式选择通道；若所述测试模式信号对应的测试模式为SRAM MBIST测试模式，则将所述芯片的invoke引脚取反后作为所述模式选择通道。为达到上述目的，本发明第二方面实施例提出了一种芯片，所述芯片包括：测试模式控制电路和根据本发明第一方面实施例提出的测试模式复位电路。附图说明图1是本发明实施例的测试模式复位电路的电路图；图2是本发明实施例的测试模式复位电路中各子电路、单元运行的波形图。标号说明：10、通道选择子电路；20、复位子电路；21、密码移位使能单元；22、密码判断单元；100、测试模式复位电路；200、测试模式控制电路。具体实施方式下面详细描述本发明的实施例，所述实施例的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施例是示例性的，旨在用于解释本发明，而不能理解为对本发明的限制。下面结合图1-图2以及具体的实施方式对本发明实施例的测试模式复位电路、芯片进行详细说明。本发明实施例的测试模式复位电路用于芯片测试。图1是本发明实施例的测试模式复位电路的电路图。如图1所示，测试模式复位电路100可包括：通道选择子电路10，用于接收测试模式信号，并根据测试模式信号从多组预设通道中选通一组目标通道，以及通过目标通道传输相应的序列，记为目标序列；复位子电路20，复位子电路20与通道选择子电路10连接，并用以连接测试模式控制电路200，复位子电路20用于根据目标序列生成复位信号，并将复位信号输出至测试模式控制电路200，以通过控制测试模式控制电路200使芯片进入目标测试模式。由于芯片中一些引脚存在多功能复用，以及芯片处于不同的测试模式，同一个引脚输入的序列进入芯片之后，会被IO选择电路选通到不同的内部通道中去，为使复位子电路20接收目标序列生成复位信号，本发明实施例利用通道选择子电路10根据芯片当前的测试模式信号，确定芯片在当前的测试模式下传输目标序列的通道，以通过目标通道将目标序列传输给复位子电路20。复位子电路20根据目标通道传输的目标序列生成复位信号，并将复位信号传输给芯片中测试模式控制电路200，使测试模式控制电路200进入复位状态，从而可以通过操控测试模式控制电路200使芯片进入下一测试模式，以实现芯片的安全热切换。需要说明的是，在不同的芯片测试模式下，复位子电路20的目标序列来自于不同的内部通道。本发明实施例的通道选择子电路10用以在芯片处于不同的测试模式下，选择不同的通道用来给复位子电路20送对应的序列。需要说明的是，每一测试模式都有自己的专用通道，这些通道是通过IO选择电路来跟引脚相连，IO选择电路如何选通由测试模式信号决定。在本发明的一个实施例中，每组预设通道可包括时钟通道CK、模式选择通道MS和数据输入通道DI，时钟通道CK用于传输时钟序列，模式选择通道MS用于传输使能序列，数据输入通道DI用于传输密码序列。在本发明的实施例中，复位子电路20工作时需要三个通道传输的序列。其中，三个通道分别为：时钟通道CK、模式选择通道MS和数据输入通道DI。用户通过模式选择通道MS向复位子电路20传输使能序列以及通过数据输入通道DI向复位子电路20传输密码序列都需要基于时钟通道CK传输的时钟序列，根据时钟周期发送比特位。如，一个时钟周期送一个比特位。在本发明的一个实施例中，如图1所示，复位子电路20可包括：密码移位使能单元21和密码判断单元22，密码移位使能单元21分别与通道选择子电路10和密码判断单元22连接，密码判断单元22还与通道选择子电路10连接；密码移位使能单元21，用于基于时钟通道传输的时钟序列接收模式选择通道传输的使能序列，并根据使能序列对密码判断单元22进行使能控制；密码判断单元22，用于在使能后基于时钟序列接收数据输入通道传输的密码序列，并根据密码序列生成复位信号。为保证测试稳定性的前提下实现测试模式切换，本发明实施例在切换芯片的测试模式时，先通过模式选择通道MS向密码移位使能单元21输入使能序列，使能密码判断单元22。只有使能密码判断单元22后，密码判断单元22才能基于时钟序列接收数据输入通道DI传输的密码序列生成复位信号。具体地，密码判断单元22对比密码序列和预设密码，确定密码序列与预设密码一致时生成复位信号，以控制测试模式控制电路200进入复位状态。在本发明的一个实施例中，密码移位使能单元21具体用于：在使能序列的持续时间达到预设时长时，使能密码判断单元22，并持续向密码移位使能单元21输入使能序列，其中，预设时长包括多个时钟周期。为保证测试稳定性的前提下实现测试模式切换，模式选择通道MS选用每个测试模式下在测试中不可能拉高预设时长一个引脚。并在向密码移位使能单元21输入的使能序列的持续时间达到预设时长，如10个时钟周期，密码移位使能单元21才能使能密码判断单元22。在使能密码判断单元22后，继续通过模式选择通道MS向持续向密码移位使能单元21输入使能序列，以使密码移位使能单元21持续使能密码判断单元22，直至通过数据输入通道DI输入的密码序列输入完毕，否则通过数据输入通道DI输入的密码序列将失效，从而进一步保证测试稳定性的前提下实现测试模式切换。在本发明的一个实施例中，使能序列为高电平信号序列。在本发明的一个实施例中，预设时长包括N个时钟周期，N为大于等于10。在本发明的一个实施例中，密码判断单元22具体用于：判断密码序列和预设密码是否一致；若一致，则输出复位信号；否则，不输出复位信号。具体地，密码判断单元22将接收到的密码序列与预设密码进行对比，判断密码序列与预设密码是否一致。若密码序列与预设密码一致，则输出复位信号。若密码序列与预设密码不一致，则不输出复位信号。需要说明的是，预设密码为预设的切换测试模式的密码。在本发明的一个实施例中，复位信号为高电平信号。作为一具体示例，切换芯片的测试模式时，通道选择子电路10根据测试模式信号选通目标通道后，用户通过模式选择通道MS输入高电平信号序列达到10个时钟周期以上后，即密码移位使能单元21被拉高10个时钟周期以上后，密码移位使能单元21使能密码判断单元22，用户再基于时钟通道CK的时钟周期，通过数据输入通道DI向密码判断单元22输入切换测试模式的密码序列，如32比特的密码序列。需要说明的是，在输入密码序列的过程中密码移位使能单元21需要持续被拉高，否则密码移位就会失效。当密码正确后，密码判断单元22会传出一个高电平有效的复位信号送给测试模式控制电路200，测试模式控制电路200会进入复位状态，这时芯片中由各种由测试模式控制电路200所控制的电路都进入了复位状态，用户可以通过操作测试模式控制电路200进入希望进入的测试模式，如此实现芯片的安全热切换。利用上述切换方式，可以保证芯片在正常测试中不会误触发进入密码移位使能状态，另外还可以保证用户主动进入密码移位使能状态时不会影响正常的测试，使芯片进入不预期的状态。在本发明的实施例中，密码移位使能单元21用来控制数据输入通道DI传入的密码是否有效。由于复位子电路20所用到的通道，都是跟对应测试模式的其他功能性引脚共用的，所以这些引脚在正常测试时都会动起来，会有很多复杂数据传入复位子电路20的通道。为了防止误触发测试模式复位，本发明实施例设置了密码移位使能单元21，只有当模式选择通道MS拉高，如10个时钟周期的高电平之后，密码移位使能单元21才会使能密码判断单元22。模式选择通道MS选用每个测试模式下在测试中不可能拉高预设时长的一个引脚。在本发明的实施例中，密码判断单元22用来判断在密码移位使能单元21使能的状态下，用户从数据输入通道DI传入的密码序列是否正确，如果正确，密码判断单元22就会将测试模式控制电路200复位信号拉高，并将其传入到测试模式控制电路200中将测试模式控制电路200复位。这时由测试模式控制电路200控制的电路也进入到了复位状态，用户就可以通过操作测试模式控制电路200进入希望进入的测试模式。在本发明实施例中，实际测试模式复位电路100中各信号运行的波形如图2所示，其中，shift_key_enable信号是密码移位使能信号，当模式选择通道MS拉高10个周期后此信号拉高。shift_key信号为密码存储信号，由数据输入通道DI移位进来，当shift_key满足预先设定的密码后，test_config_reset信号会置1将用于测试模式控制的寄存器组复位成0。在本发明的一个实施例中，若测试模式信号对应的测试模式为扫描测试模式，则将芯片的scan_enable引脚取反后作为模式选择通道；若测试模式信号对应的测试模式为SRAM MBIST测试模式，则将芯片的invoke引脚取反后作为模式选择通道。由于在常用的可测性设计中，因为扫描测试模式中芯片会进入无序的乱动状态，这可能会造成测试模式控制电路200受到影响从而误退出扫描测试模式，影响芯片测试的进行。所以一旦芯片进入扫描测试模式，会将测试模式控制电路200设计成锁定的状态，测试模式控制电路200乱动也不会影响芯片测试模式的稳定性。当扫描测试完成后，会通过掉电重新上电的方式将芯片初始化，再重新进入其他测试模式。本发明实施例在扫描测试模式下选用scan_enable引脚取反后作为模式选择通道MS，需要说明的是，扫描测试模式下scan_enable引脚不可能拉高预设时长。再利用上述本发明实施例切换芯片的测试模式的方式，实现芯片从扫描测试模式切换到其他模式，不需要再通过掉电重新上电的方式将芯片初始化，再重新进入其他测试模式。在本发明的实施例中，SRAM MBIST测试模式下选用invoke引脚取反后作为模式选择通道MS，需要说明的是，扫描测试模式下scan_enable引脚不可能拉高预设时长。采用本发明实施例的测试模式复位电路100，芯片在扫描测试模式下，可以在不重新上电复位的前提下退出扫描测试模式，以重新进入其他测试模式。其他测试模式下，芯片可以通过当前测试模式下的引脚对本发明所涉及的电路进行访问，以退出当前测试模式，进入默认模式，以重新进入希望进入的其他测试模式。任何测试模式下，本发明所涉及的电路都不会被误触发，从而保证测试模式的稳定。本发明实施例的测试模式复位电路，省去测试过程中测试模式切换时需要进行的上电复位过程，有效降低测试时间，提高了在制定测试计划时引脚复用的灵活度，提高了测试并行度，降低测试成本；本发明所涉及通道选择子电路10和复位子电路20均为纯数字逻辑设计，且硬件开销较小，易于在电路设计中实现。本发明还提供一种芯片。在该实施例中，芯片可包括：测试模式控制电路200和如上述的测试模式复位电路100。本发明实施例的芯片，利用上述测试模式复位电路100，在扫描测试模式下，可以在不重新上电复位的前提下退出扫描测试模式，以重新进入其他测试模式。其他测试模式下，芯片可以通过当前测试模式下的引脚对本发明所涉及的电路进行访问，以退出当前测试模式，进入默认模式，以重新进入希望进入的其他测试模式。任何测试模式下，本发明所涉及的电路都不会被误触发，从而保证测试模式的稳定。在本说明书的描述中，参考术语“一个实施例”、“一些实施例”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。在本发明中，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”、“固定”等术语应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或成一体；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通或两个元件的相互作用关系，除非另有明确的限定。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本发明中的具体含义。尽管上面已经示出和描述了本发明的实施例，可以理解的是，上述实施例是示例性的，不能理解为对本发明的限制，本领域的普通技术人员在本发明的范围内可以对上述实施例进行变化、修改、替换和变型。
