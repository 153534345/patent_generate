标题title
样品含量识别方法、装置和存储介质
摘要abst
本申请公开了一种样品含量识别方法、装置和存储介质，涉及光谱检测技术领域，所述方法包括：获取目标样品的近红外光谱；将近红外光谱分别输入至i个含量识别网络，通过每个含量识别网络识别目标样品中的目标物质的含量；i为大于1的整数；获取每个含量识别网络的识别结果所对应的分配系数；根据识别得到的i个含量以及获取得到的各个含量所对应的分配系数，确定目标样品中的目标物质的最终含量。解决了现有技术中含量识别准确率较低的问题，达到了用户无需选择识别模型，仅需将目标样品的近红外光谱输入至各个含量识别网络，进而根据各自的识别结果以及对应的分配系数即可确定得到最终识别结果，提高含量识别准确率的效果。
权利要求书clms
1.一种样品含量识别方法，其特征在于，所述方法包括：获取目标样品的近红外光谱；将所述近红外光谱分别输入至i个含量识别网络，通过每个含量识别网络识别所述目标样品中的目标物质的含量；所述i为大于1的整数；获取每个含量识别网络的识别结果所对应的分配系数；根据识别得到的i个含量以及获取得到的各个含量所对应的分配系数，确定所述目标样品中的目标物质的最终含量。2.根据权利要求1所述的方法，其特征在于，所述获取每个含量识别网络的识别结果所对应的分配系数，包括：计算所述近红外光谱与各个含量分段的中心光谱之间的距离；根据正态分布函数以及计算得到的各个距离，计算为每个含量识别网络的识别结果分配的原始系数；对计算得到的各个原始系数进行归一化处理，得到各个含量识别网络的识别结果所对应的分配系数。3.根据权利要求2所述的方法，其特征在于，所述根据正态分布函数以及计算得到的各个距离，计算为每个含量识别网络的识别结果分配的原始系数，包括：对于计算得到的每个距离d，所述原始系数w1为：其中，d为计算得到的近红外光谱到各含量分段的中心的距离，σ为高斯分布的标准差。4.根据权利要求2所述的方法，其特征在于，所述对计算得到的各个原始系数进行归一化处理，得到各个含量识别网络的识别结果所对应的分配系数，包括：其中，w’为最终确定得到的各个含量识别网络的识别结果的分配系数，w1为确定得到的原始系数。5.根据权利要求2至4任一所述的方法，其特征在于，所述将所述近红外光谱分别输入至i个含量识别网络之前，所述方法还包括：获取样本近红外光谱集，所述样本近红外光谱集包括各个含量的样本集；将所述样本近红外光谱集划分为i个样本集，每个样本集中的近红外光谱对应一个含量分段；根据预设外延比例对每个样本集向两侧进行外延；根据外延后的各个样本集训练各个含量分段对应的含量识别网络。6.根据权利要求1所述的方法，其特征在于，所述n个含量识别网络包含在含量识别模型中，所述含量识别模型为根据样本近红外光谱集训练得到的模型，所述样本近红外光谱集按照理化分段划分各类近红外光谱，所述获取每个含量识别网络的识别结果所对应的分配系数，包括：根据所述含量识别模型的识别结果、所述含量识别模型的SECV值以及各个含量识别网络的左右边界，获取所述分配系数。7.根据权利要求6所述的方法，其特征在于，所述根据所述含量识别模型的识别结果、所述含量识别模型的SECV值以及各个含量识别网络的左右边界，获取所述分配系数包括：对于每个含量分段对应的分配系数，计算所述含量识别模型的识别结果与所述含量分段的左边界和右边界的距离；根据计算得到的与左边界的距离以及所述SECV值计算第一系数；根据计算得到的与右边界的距离以及所述SECV值计算第二系数；根据所述第一系数和所述第二系数计算为所述含量分段分配的原始分配系数；对计算得到的各个原始分配系数进行归一化，得到所述分配系数。8.根据权利要求7所述的方法，其特征在于，所述第一系数w1为：所述第二系数w2为：其中，σ为所述含量识别模型的SECV值，d1为与左边界的距离，d2为与右边界的距离。9.一种样品含量识别装置，其特征在于，所述装置包括存储器和处理器，所述存储器中存储有至少一条程序指令，所述处理器通过加载并执行所述至少一条程序指令以实现如权利要求1至8任一所述的方法。10.一种计算机存储介质，其特征在于，所述计算机存储介质中存储有至少一条程序指令，所述至少一条程序指令被处理器加载并执行以实现如权利要求1至8任一所述的方法。
说明书desc
技术领域本发明涉及一种样品含量识别方法、装置和存储介质，属于光谱检测技术领域。背景技术目前，对于跨度广、多种类且多种类之间相联系的样本进行近红外建模时为保证准确率通常采用分别独立建模的方式。比如，对于不同灰分含量的面粉而言，不同灰分含量的面粉为不同等级，等级之间的差别较难从外观、形态方面进行区分。因此为提高灰分建模的准确性，不同灰度含量的面粉会分别建模。然而上述方案中，在拿到一个未知灰分的样品之后，如果事先无法细分其为哪个等级的样本时，会由于选择的模型错误而导致检测结果出现较大偏差。也即上述方案中样品的灰分含量识别准确率较低。发明内容本发明的目的在于提供一种样品含量识别方法、装置和存储介质，用于解决现有技术中存在的问题。为达到上述目的，本发明提供如下技术方案：根据第一方面，本发明实施例提供了一种样品含量识别方法，所述方法包括：获取目标样品的近红外光谱；将所述近红外光谱分别输入至i个含量识别网络，通过每个含量识别网络识别所述目标样品中的目标物质的含量；所述i为大于1的整数；获取每个含量识别网络的识别结果所对应的分配系数；根据识别得到的i个含量以及获取得到的各个含量所对应的分配系数，确定所述目标样品中的目标物质的最终含量。可选地，所述获取每个含量识别网络的识别结果所对应的分配系数，包括：计算所述近红外光谱与各个含量分段的中心光谱之间的距离；根据正太分布函数以及计算得到的各个距离，计算为每个含量识别网络的识别结果分配的原始系数；对计算得到的各个原始系数进行归一化处理，得到各个含量识别网络的识别结果所对应的分配系数。可选地，所述根据正太分布函数以及计算得到的各个距离，计算为每个含量识别网络的识别结果分配的原始系数，包括：对于计算得到的每个距离d，所述原始系数w1为：其中，d为计算得到的近红外光谱到各含量分段的中心的距离，σ为高斯分布的标准差。可选地，所述对计算得到的各个原始系数进行归一化处理，得到各个含量识别网络的识别结果所对应的分配系数，包括：其中，w’为最终确定得到的各个含量识别网络的识别结果的分配系数，w1为确定得到的原始系数。可选地，所述将所述近红外光谱分别输入至i个含量识别网络之前，所述方法还包括：获取样本近红外光谱集，所述样本近红外光谱集包括各个含量的样本集；将所述样本近红外光谱集划分为i个样本集，每个样本集中的近红外光谱对应一个含量分段；根据预设外延比例对每个样本集向两侧进行外延；根据外延后的各个样本集训练各个含量分段对应的含量识别网络。可选地，所述n个含量识别网络包含在含量识别模型中，所述含量识别模型为根据样本近红外光谱集训练得到的模型，所述样本近红外光谱集按照理化分段划分各类近红外光谱，所述获取每个含量识别网络的识别结果所对应的分配系数，包括：根据所述含量识别模型的识别结果、所述含量识别模型的SECV值以及各个含量识别网络的左右边界，获取所述分配系数。可选地，所述根据所述含量识别模型的识别结果、所述含量识别模型的SECV值以及各个含量识别网络的左右边界，获取所述分配系数包括：对于每个含量分段对应的分配系数，计算所述含量识别模型的识别结果与所述含量分段的左边界和右边界的距离；根据计算得到的与左边界的距离以及所述SECV值计算第一系数；根据计算得到的与右边界的距离以及所述SECV值计算第二系数；根据所述第一系数和所述第二系数计算为所述含量分配的原始分配系数；对计算得到的各个原始分配系数进行归一化，得到所述分配系数。可选地，所述第一系数w1为：所述第二系数w2为：其中，σ为所述含量识别模型的SECV值，d1为与左边界的距离，d2为与右边界的距离。第二方面，提供了一种样品含量识别装置，所述装置包括存储器和处理器，所述存储器中存储有至少一条程序指令，所述处理器通过加载并执行所述至少一条程序指令以实现如第一方面所述的方法。第三方面，提供了一种计算机存储介质，所述计算机存储介质中存储有至少一条程序指令，所述至少一条程序指令被处理器加载并执行以实现如第一方面所述的方法。通过获取目标样品的近红外光谱；将所述近红外光谱分别输入至i个含量识别网络，通过每个含量识别网络识别所述目标样品中的目标物质的含量；所述i为大于1的整数；获取每个含量识别网络的识别结果所对应的分配系数；根据识别得到的i个含量以及获取得到的各个含量所对应的分配系数，确定所述目标样品中的目标物质的最终含量。解决了现有技术中含量识别准确率较低的问题，达到了用户无需选择识别模型，仅需将目标样品的近红外光谱输入至各个含量识别网络，进而根据各自的识别结果以及对应的分配系数即可确定得到最终识别结果，提高含量识别准确率的效果。另外，本申请对各个样本集通过预设外延比例进行外延，弱化了相邻两个含量识别网络之间的差异，减小了误判导致的结果偏差，特别对于临界样本提高了含量识别的准确率。上述说明仅是本发明技术方案的概述，为了能够更清楚了解本发明的技术手段，并可依照说明书的内容予以实施，以下以本发明的较佳实施例并配合附图详细说明如后。附图说明图1为本发明一个实施例提供的样品含量识别方法的方法流程图。具体实施方式下面将结合附图对本发明的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本发明的描述中，需要说明的是，术语“中心”、“上”、“下”、“左”、“右”、“竖直”、“水平”、“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。此外，术语“第一”、“第二”、“第三”仅用于描述目的，而不能理解为指示或暗示相对重要性。在本发明的描述中，需要说明的是，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通。对于本领域的普通技术人员而言，可以具体情况理解上述术语在本发明中的具体含义。此外，下面所描述的本发明不同实施方式中所涉及的技术特征只要彼此之间未构成冲突就可以相互结合。请参考图1，其示出了本申请一种可能的实施例提供的样品含量识别方法的方法流程图，如图1所示，所述方法包括：步骤101，获取目标样品的近红外光谱；本申请所述的目标样品为可以获取近红外光谱的各种物品，比如，可以为水果、谷物、化工产品、饲料、面粉等等，本申请对其具体实现并不做限定。并且，本申请所述的近红外光谱可以为通过近红外技术采集到的各种光谱，实际实现时，可以通过近红外光谱仪获取目标样品的近红外光谱。步骤102，将所述近红外光谱分别输入至i个含量识别网络，通过每个含量识别网络识别所述目标样品中的目标物质的含量；所述i为大于1的整数；各个含量识别网络可以为预先训练得到的网络，且含量识别网络的个数由划分的含量分段的总数确定，比如，对于面粉而言，可以将灰分含量分成3个分段，则i为3。在第一种可能的实现方式中，本步骤包括：、获取样本近红外光谱集，所述样本近红外光谱集包括各个含量的样本集；样本近红外光谱集中包括各个含量的样品所对应的近红外光谱，并且实际实现时，各个含量的样品的近红外光谱的数量大于预设阈值。通常情况下，为了保证训练得到的含量识别网络的准确度，预设阈值通常可以为数值较大的值，比如，预设阈值可以为500、1000等等，对此并不做限定。、将所述样本近红外光谱集划分为i个样本集，每个样本集中的近红外光谱对应一个含量分段；可选地，可以通过K-means聚类方法对样本近红外光谱集中的光谱进行聚类。可选地，可以通过K-means聚类方法找到各个含量分段的中心点，根据样本近红外光谱集中的各个近红外光谱距离中心点的距离将各个近红外光谱划分至各个样本集中。实际实现时，此处聚类后，各个样本集中不存在重叠相互独立。、根据预设外延比例对每个样本集向两侧进行外延；预设外延比例可以为预先设置的值也可以为系统默认的值。在根据上述方法确定得到各个样本集之后，根据外延比例将各个样本集中的边缘样本同时划入至相邻的两个样本集中，进而形成样本集的交叠。、根据外延后的各个样本集训练各个含量分段对应的含量识别网络。此后，即可根据外延后的各个样本集训练各个含量对应的含量识别网络。可选地，在根据各个样本集训练含量识别网络时，可以对样本集中的各个红外样本进行波长选择、预处理、降维、定标，进而根据处理后的样本集中的各个红外样本训练含量识别网络。其中，可以通过留一法交叉验证进行波长选择，对此并不做限定。相应的，在本步骤中，即可将目标样品的近红外光谱分别输入至i个含量识别网络中，通过各个含量识别网络识别得到i个含量。在第二种可能的实现方式中，若按照理化分段划分样本近红外光谱集中的各类光谱，则可以按照样本近红外光谱集内的全部近红外光谱训练含量识别模型。含量识别模型中包括i个含量识别网络，每个含量识别网络对应一个理化含量范围。在训练得到含量识别模型之后，可以保留训练的SECV值。相应的，在本步骤中，即可将目标样品的近红外光谱输入至含量识别模型中，得到含量识别模型的识别结果。同时，可以得到含量识别模型中的各个含量识别网络的识别结果。步骤103，获取每个含量识别网络的识别结果所对应的分配系数；实际实现时，基于步骤102中的两种可能的实现方式，本步骤可以相应的包括以下两种可能的实现方式。在第一种可能的实现方式中，本步骤包括：第一，计算所述近红外光谱与各个含量分段的中心光谱之间的距离；对应于步骤102中的第一种可能的实现方式，本步骤可以计算目标样品的近红外光谱与各个含量分段的中心光谱之间的距离，也即在有i个含量时，本步骤可以计算得到i个距离。可选地，可以通过近红外光谱的吸光度之间的距离来表征光谱之间的距离，也即上述距离可以为：d＝sqrt其中，x1,x2,xn是预测光谱各波长的吸光度值，xm1,xm2,xmn是中心光谱各波长的吸光度值。第二，根据正太分布函数以及计算得到的各个距离，计算为每个含量识别网络的识别结果分配的原始系数；对于计算得到的每个距离d，所述原始系数w1为：其中，d为计算得到的近红外光谱到各含量分段的中心的距离，σ为高斯分布的标准差。第三，对计算得到的各个原始系数进行归一化处理，得到各个含量识别网络的识别结果所对应的分配系数。其中，w’为最终确定得到的各个含量识别网络的识别结果的分配系数，w1为确定得到的原始系数，i为分类数。至此，即可得到各个含量识别网络的识别结果的分配系数。也即在包括i个含量时，即可计算得到i个分配系数。在第二种可能的实现方式中，本步骤可以包括：根据所述含量识别模型的识别结果、所述含量识别模型的SECV值以及各个含量识别网络的左右边界，获取所述分配系数。具体的，本步骤包括：第一，对于每个含量分段对应的分配系数，计算所述含量识别模型的识别结果与所述含量分段的左边界和右边界的距离；若包括i个含量含量，则分别计算含量识别模型的识别结果与每个含量分段的左边界的距离以及与每个含量分段的右边界的距离。具体的：与左边界的距离为d1＝r-s1；与右边界的距离为d2＝s2-r。其中，r为各类的预测结果，s1为各含量分段的左边界，s2为各含量分段的右边界。第二，根据计算得到的与左边界的距离以及所述SECV值计算第一系数；所述第一系数w1为：其中，σ为所述含量识别模型的SECV值，d1为与左边界的距离。第三，根据计算得到的与右边界的距离以及所述SECV值计算第二系数；所述第二系数w2为：其中，σ为所述含量识别模型的SECV值，d2为与右边界的距离。第四，根据所述第一系数和所述第二系数计算为所述含量分配的原始分配系数；对于每个含量，该含量的原始分配系数为：w3＝w1-w2。第五，对计算得到的各个原始分配系数进行归一化，得到为各个含量分配的分配系数。步骤104，根据识别得到的i个含量以及获取得到的各个含量所对应的分配系数，确定所述目标样品中的目标物质的最终含量。具体的，本步骤包括：r＝r1*w1’+r2*w2’+…+ri*wi’。其中r1，r2,…,ri为光谱在各含量识别网络的识别结果，w1’,w2’,…,wi’为个子模型的分配系数，r为最终识别结果。至此，即可计算得到目标样品的最终识别结果，比如，得到待测面粉的灰分含量为1.6％。综上所述，通过获取目标样品的近红外光谱；将所述近红外光谱分别输入至i个含量识别网络，通过每个含量识别网络识别所述目标样品中的目标物质的含量；所述i为大于1的整数，且每个含量识别网络为根据不同含量的样本集训练得到的网络；获取每个含量识别网络的识别结果所对应的分配系数；根据识别得到的i个含量以及获取得到的各个含量所对应的分配系数，确定所述目标样品中的目标物质的最终含量。解决了现有技术中含量识别准确率较低的问题，达到了用户无需选择识别模型，仅需将目标样品的近红外光谱输入至各个含量识别网络，进而根据各自的识别结果以及对应的分配系数即可确定得到最终识别结果，提高含量识别准确率的效果。另外，本申请对各个样本集通过预设外延比例进行外延，弱化了相邻两个含量识别网络之间的差异，减小了误判导致的结果偏差，特别对于临界样本提高了含量识别的准确率。此外，本申请中用户无需选择识别模型，减少了操作复杂度以及人为操作导致的误差。本申请还提供了一种样品含量装置，所述装置包括存储器和处理器，所述存储器中存储有至少一条程序指令，所述处理器通过加载并执行所述至少一条程序指令以实现如上所述的方法。本申请还提供了一种计算机存储介质，所述计算机存储介质中存储有至少一条程序指令，所述至少一条程序指令被处理器加载并执行以实现如上所述的方法。以上所述实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本发明的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干变形和改进，这些都属于本发明的保护范围。因此，本发明专利的保护范围应以所附权利要求为准。
