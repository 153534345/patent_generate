标题title
一种钢丝绳芯输送带实时监控方法
摘要abst
本发明数据数据处理技术领域，具体涉及一种钢丝绳芯输送带实时监控方法。包括：根据各初始类别组中的两个类别对应的聚类中心之间的距离以及各初始类别组中的两个初始类别对应的特征方差和特征均值，得到各初始类别组对应的影响权重；根据各初始类别组对应的影响权重，对各初始类别组进行分类，得到各特征类别以及各特征类别中的各初始类别组；根据初始窗口的尺寸、聚类效果评估值以及特征占比，得到目标窗口；根据目标窗口，利用均值漂移聚类对所述当前帧X光图像上的各像素点进行再聚类，得到各目标类别，将各目标类别中的各像素点的目标亮度值记为对应目标类别的聚类中心的亮度值。本发明能可靠对钢丝绳芯输送带进行实时监控。
权利要求书clms
1.一种钢丝绳芯输送带实时监控方法，其特征在于，该方法包括如下步骤：利用X光检测装置获取钢丝绳芯输送带的当前帧X光图像以及当前帧X光图像上各像素点的亮度值；对所述当前帧X光图像上各像素点的亮度值进行归一化处理，记为所述当前帧X光图像上各像素点的目标亮度值；根据所述当前帧X光图像上各像素点的目标亮度值，利用均值漂移聚类对所述当前帧X光图像上的各像素点进行初始聚类，得到各初始类别、各初始类别中的各像素点的目标亮度值以及各初始类别的聚类中心；获取利用均值漂移聚类进行初始聚类时的窗口，记为初始窗口；计算各初始类别中的各像素点到对应聚类中心的距离，记为各初始类别中的各像素点的特征距离；根据各初始类别中的各像素点的特征距离，得到各初始类别中的各像素点的特征距离的方差和均值，记为各初始类别对应的特征方差和特征均值；根据初始类别数量，获取各初始类别组；所述初始类别组中包含两个不同的初始类别；计算各初始类别组中的两个初始类别对应的聚类中心之间的距离；根据各初始类别组中的两个类别对应的聚类中心之间的距离以及各初始类别组中的两个初始类别对应的特征方差和特征均值，得到各初始类别组对应的影响权重；根据各初始类别组对应的影响权重，对各初始类别组进行分类，得到各特征类别以及各特征类别中的各初始类别组；计算各特征类别中的各初始类别组的影响权重的均值；获取初始类别组的总数量；将最大均值对应的特征类别中的初始类别组的数量与初始类别组的总数量的比值记为特征占比；获取当前帧X光图像的前一帧X光图像聚类效果评估值；根据初始窗口的尺寸、聚类效果评估值以及特征占比，得到目标窗口；根据目标窗口，利用均值漂移聚类对所述当前帧X光图像上的各像素点进行再聚类，得到各目标类别、各目标类别中的各像素点以及各目标类别的聚类中心；将各目标类别中的各像素点的目标亮度值记为对应目标类别的聚类中心的亮度值。2.如权利要求1所述的一种钢丝绳芯输送带实时监控方法，其特征在于，所述各初始类别组中不存在两个相同的初始类别组；所述相同的初始类别组是指其中一个初始类别组中的两个初始类别与另外一个初始类别组中的两个初始类别相同。3.如权利要求1所述的一种钢丝绳芯输送带实时监控方法，其特征在于，所述初始窗口为3*3。4.如权利要求1所述的一种钢丝绳芯输送带实时监控方法，其特征在于，对于任一初始类别组，将该初始类别组中的两个初始类别分别记为第一初始类别和第二初始类别，根据如下公式得到该初始类别组对应的影响权重：其中，为该初始类别组对应的影响权重，为该初始类别组中的第一初始类别对应的特征方差，为该初始类别组中的第一初始类别对应的特征均值，为该初始类别组中的第二初始类别对应的特征方差，为该初始类别组中的第二初始类别对应的特征均值，为第一初始类别和第二初始类别对应的聚类中心之间的距离。5.如权利要求1所述的一种钢丝绳芯输送带实时监控方法，其特征在于，根据如下公式得到目标窗口：其中，为目标窗口的尺寸，为初始窗口的尺寸，为当前帧X光图像的前一帧X光图像聚类效果评估值，为特征占比。
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及一种钢丝绳芯输送带实时监控方法。背景技术钢丝绳芯输送带常用于重物传输，但是在长期使用过程中，钢丝绳芯输送带仍然可能会发生断裂，从而引发安全事故，并影响生产，而为了保证作业安全和钢丝绳芯输送带能够有效传输，需要对钢丝绳芯输送带进行实时监控，尽可能地使得在未发生撕裂时能够及时发现，因此对钢丝绳芯输送带进行实时监控至关重要。而在实时监控中会产生大量的图像数据，所以为了保证钢丝绳芯输送带的缺陷及时发现，所以需要对X光中的图像数据进行压缩，提高传输和计算效率，防止由于实时获取钢丝绳芯输送带时，数据出现累积，从而使得无法及时完成钢丝绳芯输送带的有效缺陷检测；而在常规的视频帧数据进行压缩时，视频帧的每张图像数据在压缩时，只是对数据量的一种有损压缩，在压缩时会导致部分数据丢失，丢失的数据中可能包含有一些有效的钢丝绳芯输送带的缺陷数据，导致无法及时完成对钢丝绳芯输送带缺陷及时发现。发明内容本发明提供一种钢丝绳芯输送带实时监控方法，用于解决现有方法不能及时发现钢丝绳芯输送带上的缺陷的问题，所采用的技术方案具体如下：本发明实施例提供了一种钢丝绳芯输送带实时监控方法包括以下步骤：利用X光检测装置获取钢丝绳芯输送带的当前帧X光图像以及当前帧X光图像上各像素点的亮度值；对所述当前帧X光图像上各像素点的亮度值进行归一化处理，记为所述当前帧X光图像上各像素点的目标亮度值；根据所述当前帧X光图像上各像素点的目标亮度值，利用均值漂移聚类对所述当前帧X光图像上的各像素点进行初始聚类，得到各初始类别、各初始类别中的各像素点的目标亮度值以及各初始类别的聚类中心；获取利用均值漂移聚类进行初始聚类时的窗口，记为初始窗口；计算各初始类别中的各像素点到对应聚类中心的距离，记为各初始类别中的各像素点的特征距离；根据各初始类别中的各像素点的特征距离，得到各初始类别中的各像素点的特征距离的方差和均值，记为各初始类别对应的特征方差和特征均值；根据初始类别数量，获取各初始类别组；所述初始类别组中包含两个不同的初始类别；计算各初始类别组中的两个初始类别对应的聚类中心之间的距离；根据各初始类别组中的两个类别对应的聚类中心之间的距离以及各初始类别组中的两个初始类别对应的特征方差和特征均值，得到各初始类别组对应的影响权重；根据各初始类别组对应的影响权重，对各初始类别组进行分类，得到各特征类别以及各特征类别中的各初始类别组；计算各特征类别中的各初始类别组的影响权重的均值；获取初始类别组的总数量；将最大均值对应的特征类别中的初始类别组的数量与初始类别组的总数量的比值记为特征占比；获取当前帧X光图像的前一帧X光图像聚类效果评估值；根据初始窗口的尺寸、聚类效果评估值以及特征占比，得到目标窗口；根据目标窗口，利用均值均值漂移聚类对所述当前帧X光图像上的各像素点进行再聚类，得到各目标类别、各目标类别中的各像素点以及各目标类别的聚类中心；将各目标类别中的各像素点的目标亮度值记为对应目标类别的聚类中心的亮度值。优选的，所述各初始类别组中不存在两个相同的初始类别组；所述相同的初始类别组是指其中一个初始类别组中的两个初始类别与另外一个初始类别组中的两个初始类别相同。优选的，所述初始窗口为3*3。优选的，对于任一初始类别组，将该初始类别组中的两个初始类别分别记为第一初始类别和第二初始类别，根据如下公式得到该初始类别组对应的影响权重：其中，为该初始类别组对应的影响权重，为该初始类别组中的第一初始类别对应的特征方差，为该初始类别组中的第一初始类别对应的特征均值，为该初始类别组中的第二初始类别对应的特征方差，为该初始类别组中的第二初始类别对应的特征均值，为第一初始类别和第二初始类别对应的聚类中心之间的距离。优选的，根据如下公式得到目标窗口：其中，为目标窗口的尺寸，为初始窗口的尺寸，为当前帧X光图像的前一帧X光图像聚类效果评估值，为特征占比。本发明通过对X光图像的聚类结果分析，得到当前X光图像聚类结果中的均值漂移窗口调整量，以使得在进行当前X光图像压缩时，能够保证压缩率和压缩质量，进而根据每次压缩传输时，聚类结果总体的变化差异，得到不断矫正的均值漂移窗口大小，实现自适应的窗口大小调整，得到稳定压缩率和压缩质量。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一种钢丝绳芯输送带实时监控方法的流程图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整的描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例，基于本发明实施例，本领域普通技术人员所获得的所有其它实施例，都属于本发明实施例保护的范围。除非另有定义，本文所使用的所有的技术和科学技术术语与属于本发明的技术人员通常理解的含义相同。本实施例提供了一种钢丝绳芯输送带实时监控方法，详细说明如下：如图1所示，该一种钢丝绳芯输送带实时监控方法，包括以下步骤：步骤S001，利用X光检测装置获取钢丝绳芯输送带的当前帧X光图像以及当前帧X光图像上各像素点的亮度值。本实施例选用工业X光实时检测设备获取钢丝绳芯输送带的当前帧X光图像以及当前帧X光图像上各像素点的亮度值；所述工业X光实时检测设备包括X光接收器，其中亮度值为通过X光接收器检测得到。步骤S002，获得各初始类别、各初始类别中的各像素点的目标亮度值以及各初始类别的聚类中心。由于在采集中粉尘或者光照的干扰，会使得最终的亮度值波动，导致成像效果不稳定，而为了进行数据压缩时，能够有效的保留X光图像特征，所以对当前帧X光图像中所有像素点的亮度值进行归一化，缩放值0到1之间，保留当前帧X光图像中所有像素点的亮度值相对关系，即对所述当前帧X光图像上各像素点的亮度值进行归一化处理，记为所述当前帧X光图像上各像素点的目标亮度值。由于均值漂移在进行数据分类时，可以将近似的数据归为一类，不近似的数据分为其他类别，进而可以在进行数据压缩的同时保留差异特征。所以根据当前帧X光图像上各像素点的亮度值的目标亮度值，利用均值漂移聚类对所述当前帧X光图像上的各像素点进行初始聚类，得到各初始类别、各初始类别中的各像素点的目标亮度值以及各初始类别的聚类中心；即将当前帧X光图像中所有像素点的目标亮度值存在较大差异的分为两类。步骤S003，获取初始窗口和获得记为各初始类别对应的特征方差和特征均值。在得到当前帧X光图像的均值漂移分类结果后，由于均值漂移结果在进行分类时，虽然会将近似的数据归为一类，不近似的数据分为其他类别，但是在聚类时不同均值漂移对应的窗口大小，所得的聚类结果也不同，如果均值漂移聚类时，其窗口越大，则聚类结果个数较少，每一类内的差异会更大，窗口越小，则聚类结果个数较多，每一类内的差异会更小。为了保证亮度的一些特征能够进行有效果保留，并且当前帧X光图像能被有效压缩。其中如果窗口过小，则每一个亮度值都会被分为一类，就是没有压缩，如果窗口过大，则所有亮度值都会被分为一类。获取利用均值漂移聚类进行初始聚类时的窗口，记为初始窗口，窗口大小设定为3*3的窗口大小；获取当前帧X光图像均值漂移聚类结果，其中如果当前类别内当前帧X光图像的像素点目标亮度值差异越大，则当前窗口可以适当缩小，其中如果当前类别内当前帧X光图像的像素点目标亮度值差异越小，则当前窗口可以适当放大。但是如果仅依据类内进行调整时，可能会将不同的类给合在一起或者同一个类分开，使得只从类内进行调整时，无法保证调整效果。并由于输送带的X光图像中，基本只由钢丝绳芯和橡胶两个部分，虽然会有其他干扰导致，但是由于不同位置的对X光的吸收量不同，使得不同位置的亮度值不同，即使是同一个绳芯或者同一块橡胶区域的X光吸收量也会存在差异，但大体是近似的。但是窗口大小决定了均值漂移分类时的精细程度。计算各初始类别中的各像素点到对应聚类中心的距离，记为各初始类别中的各像素点的特征距离；根据各初始类别中的各像素点的特征距离，得到各初始类别中的各像素点的特征距离的方差和均值，记为各初始类别对应的特征方差和特征均值。步骤S004，获取各初始类别组和获得各初始类别组中的两个初始类别对应的聚类中心之间的距离。根据初始类别数量，获取各初始类别组，所述初始类别组中包含两个不同的初始类别，所述各初始类别组中不存在两个相同的初始类别组；所述相同的初始类别组是指其中一个初始类别组中的两个初始类别与另外一个初始类别组中的两个初始类别相同；初始类别组的总数量为CK2，其中K为初始类别数量。并计算各初始类别组中的两个初始类别对应的聚类中心之间的距离。进而如果两个初始类别内的方差和均值都较小时，两个初始类别内对应的聚类中心之间的距离较大，则说明当分类效果较好，如果两个初始类别内方差和均值都较小时，对应的聚类中心之间的距离较小，则说明当前聚类结果分散，很可能是由于初始窗口分散造成。如果两个初始类别内方差和均值都较大时，对应的聚类中心之间的距离较小时，则表示初始窗口还是可能比较小，如果两个初始类别内方差和均值都较大时，对应的聚类中心之间的距离较大时，则表示初始窗口可能比较大。其中由于X光图像中，基本除了橡胶和钢丝绳芯就是输送带异常区域造成的其他X光的强度，而为了保留压缩时的亮度相对关系，所以在对初始窗口调整时，为使得异常区域造成的其他X光的强度能够保留，则对于聚类中心之间的距离较大且方差和均值都较小的类别进行保留，不能考虑类别内的个数，因为输送带异常区域可能面积不大。因此根据各初始类别组中的两个类别对应的聚类中心之间的距离以及各初始类别组中的两个初始类别对应的特征方差和特征均值，得到各初始类别组对应的影响权重；对于任一初始类别组，将该初始类别组中的两个初始类别分别记为第一初始类别和第二初始类别，根据如下公式得到该初始类别组对应的影响权重：其中，为该初始类别组对应的影响权重，为该初始类别组中的第一初始类别对应的特征方差，为该初始初始类别组中的第一初始类别对应的特征均值，为该初始类别组中的第二初始类别对应的特征方差，为该初始类别组中的第二初始类别对应的特征均值，为第一初始类别和第二初始类别对应的聚类中心之间的距离。其中，初始类别组中的两个初始类别对应的特征方差和特征均值都比较大时，表示具有一定亮度特征的被分为一类，在进行压缩时，会损失一定的亮度特征数据。两类之间的聚类中心对应亮度值的差值，比较大时，表示具有不同亮度特征关系的被分为两类，在进行压缩时，能够保留一定的亮度特征。而当初始类别组中的两个类别对应的聚类中心之间的距离以及初始类别组中的两个初始类别对应的特征方差和特征均值较为符合两个类别内的特征方差和特征均值都较小聚类中心之间的距离较大的特点时，则说明当分类效果较好，能够在损失一定的亮度特征数据后，仍旧保持一定的数据关系，进而窗口大小调整力度应当减小，所以对其做负相关映射。步骤S005，获得目标窗口。进而根据初始类别组对应的影响权重个数的占比，得到当前均值漂移聚类时窗口大小的调整值；在得到当前聚类结果中初始类别组对应的影响权重个数的占比曲线，为了使得通过调整窗口大小，达到能够在损失一定的亮度特征数据后，仍旧保持一定的数据关系。所以获取较大的占比B，B值越大，则对于总体而言调整量就小。因此根据各初始类别组对应的影响权重，通过k-means算法对各初始类别组进行二分类，得到各特征类别以及各特征类别中的各初始类别组。所以对所有初始类别组对应的影响权重个数的占比通过k-means算法进行二分类，计算各特征类别中的各初始类别组的影响权重的均值；获取初始类别组的总数量；将最大均值对应的特征类别中的初始类别组的数量与初始类别组的总数量的比值记为特征占比bz，获取当前帧X光图像的前一帧X光图像聚类效果评估值。根据初始窗口的尺寸、聚类效果评估值以及特征占比，得到目标窗口；即：其中，为目标窗口的尺寸，为初始窗口的尺寸，为3，为当前帧X光图像的前一帧X光图像聚类效果评估值。bz越大，则调整力度应当越小，所以用以1-bz,使得bz越小，1-bz越大，则调整力度应当越大。其中为对调整量的矫正量，为当前聚类结果后的整体聚类效果评估值，为第一张X光图像中通过调整后的进行二次均值聚类后所得整体压缩效果评估结果，用于调整第二张X光图像中的均值漂移窗口大小。这么做是因为输送带的X光图像是连续数据，并且要求实时性，不能一张图像处理过多，导致数据流传输带宽堵塞。本实施例中将当前帧X光图像的前一帧X光图像记为获取的第一张X光图像。则获取第一张X光图像聚类效果评估值的过程为：首先按照上述过程获取第一张X光图像的目标窗口，获取第一张X光图像的目标窗口所用的前一帧聚类效果评估值为0，然后第一张X光图像的目标窗口对第一张X光图像上的各像素点进行聚类的结果，得到第一张X光图像对应的各类别，并获取任意两个类别对应的影响权重，统计所述任意两个类别对应的影响权重的均值，记为第一张X光图像对应的综合影响权重；根据第一张X光图像对应的类别数量和第一张X光图像对应的综合影响权重，第一张X光图像聚类效果评估值；即其中，为第一张X光图像聚类效果评估值，为第一张X光图像对应的类别数量，T为第一张X光图像对应的综合影响权重。越大，则当前X光图像对应所有聚类结果中的总体对窗口大小影响越小，因为越大，越大，表示当分类效果较好，能够在损失一定的亮度特征数据后，仍旧保持一定的数据关系，当前次均值漂移聚类结果的压缩效果较好，进而窗口大小调整力度应当减小。其中d1为聚类个数，在保证聚类效果的同时，聚类个数d1的值越小，则聚类效果效率越高，并且类数越少，压缩率越高。所以对其做负相关映射，从而使得的值越大，表示当前次均值漂移聚类结果的压缩效果，则窗口大小调整力度应当减小。其中a为当前的一个超参数，实施者可根据具体实施场景进行调整。本方案设a=0.1。步骤S006，根据目标窗口，利用均值漂移聚类对所述当前帧X光图像上的各像素点进行再聚类，得到各目标类别、各目标类别中的各像素点以及各目标类别的聚类中心；将各目标类别中的各像素点的目标亮度值记为对应目标类别的聚类中心的亮度值.进而在第二张X光图像的窗口大小在调整时，参照第一张X光图像的窗口大小，通过不断地X光图像传输，得到稳定窗口大小，即可以得到稳定地均值漂移聚类结果。在得到X光图像的聚类结果后，将每一个聚类结果中地像素点的亮度值，都采用每一个聚类结果中心的亮度值进行替换，完成X光图像的压缩。对压缩后的X光图像进行掩膜提取，即每一个聚类结果都是对应多个掩膜图像，因为同亮度度类别在图像中可能多个图像块，获取每一个聚类结果都是对应多个掩膜图像的边缘像素点的坐标位置，和对应聚类结果中心的亮度值，作为压缩后的数据进行传输，用于钢丝绳芯输送带实时监控。本实施例通过对X光图像的聚类结果分析，得到当前X光图像聚类结果中的均值漂移窗口调整量，以使得在进行当前X光图像压缩时，能够保证压缩率和压缩质量，进而根据每次压缩传输时，聚类结果总体的变化差异，得到不断矫正的均值漂移窗口大小，实现自适应的窗口大小调整，得到稳定压缩率和压缩质量。以上所述实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围，均应包含在本申请的保护范围之内。
