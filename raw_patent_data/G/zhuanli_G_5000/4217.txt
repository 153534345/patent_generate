标题title
基于标注模型和标签模板筛选的语料标注方法及装置
摘要abst
本发明公开了一种基于标注模型和标签模板筛选的语料标注方法及装置，属于数据标注技术领域。本发明通过计算每个可选语料标注模型的概率分值Wj，并选定概率分值Wj最大的语料标注模型以及该模型对应的标签模板对待标注语料进行机器自动标注，提高了标注准确率。且每个模型的概率分值Wj是浮动变化而非固定的，考虑了模型动态更新以及同个模型对不同标注数据具有不同标注能力的情况，筛选语料标注模型的方法更具科学性，有利于提高语料标注的准确率。
权利要求书clms
1.一种基于标注模型和标签模板筛选的语料标注方法，其特征在于，包括步骤：S1，计算每个语料标注模型对历史项目标注的准确率Tw的值；S2，根据Tw计算每个所述语料标注模型的匹配概率分值Wj；S3，选择Wj值最大的所述语料标注模型并获取选定的所述语料标注模型对应的标签模板，然后对待标注语料进行机器自动标注。2.根据权利要求1所述的基于标注模型和标签模板筛选的语料标注方法，其特征在于，步骤S1中，Tw通过以下公式计算而得：公式中，n表示模型历史标注过的项目的数量；wi表示模型对历史第i个项目的标注准确率；w′表示模型对距离当前时间最近的一个项目的标注准确率；α表示参数。3.根据权利要求2所述的基于标注模型和标签模板筛选的语料标注方法，其特征在于，α＝0.3。4.根据权利要求1所述的基于标注模型和标签模板筛选的语料标注方法，其特征在于，步骤S2中，Wj通过以下公式计算而得：公式中，Wj表示第j个所述语料标注模型被选中的概率分值；表示第j个所述语料标注模型对历史项目的标注准确率；m表示可选择的所述语料标注模型的数量。5.根据权利要求1-4任意一项所述的基于标注模型和标签模板筛选的语料标注方法，其特征在于，训练所述语料标注模型的方法包括步骤：L1，将有标注数据输入给至少一个特征编码层，每个所述特征编码层将输出的目标文本特征矩阵输入给特征融合层；L2，所述特征融合层按照预设的特征融合策略对输入的各所述目标文本特征矩阵作特征融合后输出融合特征；L3，与对应的所述特征融合层连接的条件随机场层根据输入的所述融合特征预测输出所述有标注数据对应的实体词集合。6.根据权利要求5所述的基于标注模型和标签模板筛选的语料标注方法，其特征在于，所述特征编码层包括由BERT模型编码层和与所述BERT模型编码层连接的Bi-LSTM双向长短期记忆人工神经网络层组成的第一特征编码层、由所述BERT模型编码层和与所述BERT模型编码层连接的GRU线性门控单元层组成的第二特征编码层、由所述BERT模型编码层和与所述BERT模型编码层连接的IDCNN空洞卷积网络层组成的第三特征编码层。7.根据权利要求6所述的基于标注模型和标签模板筛选的语料标注方法，其特征在于，所述特征融合层融合输入的各所述目标文本特征矩阵的所述特征融合策略为：融合所述第一特征编码层和所述第二特征编码层分别输出的所述目标文本特征矩阵，得到第一融合特征；融合所述第一特征编码层和所述第三特征编码层分别输出的所述目标文本特征矩阵，得到第二融合特征；融合所述第二特征编码层和所述第三特征编码层分别输出的所述目标文本特征矩阵，得到第三融合特征；融合所述第一特征编码层、所述第二特征编码层和所述第三特征编码层分别输出的所述目标文本特征矩阵，得到第四融合特征。8.一种基于标注模型和标签模板筛选的语料标注装置，可实现如权利要求1-7任意一项所述的语料标注方法，其特征在于，所述语料标注装置包括：项目管理模块，用于对各语料标注模型历史标注过的语料标注项目进行管理；算法管理模块，连接所述项目管理模块，用于计算每个所述语料标注模型对历史项目标注的准确率Tw的值，并用于根据Tw计算每个所述语料标注模型的匹配概率分值Wj，并用于选定Wj值最大的所述语料标注模型并获取选定的所述语料标注模型对应的标签模板，然后对待标注语料进行机器自动标注；数据集管理模块，连接所述算法管理模块，用于上传待标注语料数据，并用于导出语料标注结果；数据可视化模块，分别连接所述项目管理模块、所述算法管理模块和所述数据集管理模块，用于可视化语料标注过程和语料标注结果。
说明书desc
技术领域本发明涉及数据标注技术领域，具体涉及一种基于标注模型和标签模板筛选的语料标注方法及装置。背景技术现有的语料标注方法通常有以下两种：一种以开源的标注工具软件，对文本、图像、视频帧等进行标注。标注时，首先把需要标注的语料数据集手动分配给各个标准员的本地计算机中，标注员打开标注工具软件导入分配的语料数据集然后手动进行标注，标注完成后将标注结果交由审核员审核，审核员以准确率、召回率等审核指标来表征标注质量。还有一种是定制化的语料标注。语料标注需求方明确标注需求后向服务商申请语料标注服务，服务商根据需求方的不同语料标注需求完成定制化的语料标注后，将标注结果交付给需求方。但上述两种语料标注方法存在以下问题：1、通过开源标注工具进行语料标注需要标注员全程人为参与，这种人为手动的标注方式操作繁琐，重复度高，在标注量较大时弊端非常明显；2、使用开源标注工具得到的语料标注结果的好坏由审核员人为进行评价，主观性较高，评价结果不够客观；3、定制化的语料标注方法可能采用模型自动标注的方式，但通常仅提供一种标注模型，机器没有自主选择权，即便存在多个可选择的标注模型，也没有一套合适的方法让机器从中识别出最佳模型进行语料标注。发明内容本发明以让机器选择最佳模型后自动进行语料标注为目的，提供了一种基于标注模型和标签模板筛选的语料标注方法及装置。为达此目的，本发明采用以下技术方案：提供一种基于标注模型和标签模板筛选的语料标注方法，包括步骤：S1，计算每个语料标注模型对历史项目标注的准确率Tw的值；S2，根据Tw计算每个所述语料标注模型的匹配概率分值Wj；S3，选择Wj值最大的所述语料标注模型并获取选定的所述语料标注模型对应的标签模板，然后对待标注语料进行机器自动标注。作为优选，步骤S1中，Tw通过以下公式计算而得：公式中，n表示模型历史标注过的项目的数量；wi表示模型对历史第i个项目的标注准确率；w′表示模型对距离当前时间最近的一个项目的标注准确率；α表示参数。作为优选，α＝0.3。作为优选，步骤S2中，Wj通过以下公式计算而得：公式中，Wj表示第j个所述语料标注模型被选中的概率分值；表示第j个所述语料标注模型对历史项目的标注准确率；m表示可选择的所述语料标注模型的数量。作为优选，训练所述语料标注模型的方法包括步骤：L1，将有标注数据输入给至少一个特征编码层，每个所述特征编码层将输出的目标文本特征矩阵输入给特征融合层；L2，所述特征融合层按照预设的特征融合策略对输入的各所述目标文本特征矩阵作特征融合后输出融合特征；L3，与对应的所述特征融合层连接的条件随机场层根据输入的所述融合特征预测输出所述有标注数据对应的实体词集合。作为优选，所述特征编码层包括由BERT模型编码层和与所述BERT模型编码层连接的Bi-LSTM双向长短期记忆人工神经网络层组成的第一特征编码层、由所述BERT模型编码层和与所述BERT模型编码层连接的GRU线性门控单元层组成的第二特征编码层、由所述BERT模型编码层和与所述BERT模型编码层连接的IDCNN空洞卷积网络层组成的第三特征编码层。作为优选，所述特征融合层融合输入的各所述目标文本特征矩阵的所述特征融合策略为：融合所述第一特征编码层和所述第二特征编码层分别输出的所述目标文本特征矩阵，得到第一融合特征；融合所述第一特征编码层和所述第三特征编码层分别输出的所述目标文本特征矩阵，得到第二融合特征；融合所述第二特征编码层和所述第三特征编码层分别输出的所述目标文本特征矩阵，得到第三融合特征；融合所述第一特征编码层、所述第二特征编码层和所述第三特征编码层分别输出的所述目标文本特征矩阵，得到第四融合特征。本发明还提供了一种基于标注模型和标签模板筛选的语料标注装置，该装置包括：项目管理模块，用于对各语料标注模型历史标注过的语料标注项目进行管理；算法管理模块，连接所述项目管理模块，用于计算每个所述语料标注模型对历史项目标注的准确率Tw的值，并用于根据Tw计算每个所述语料标注模型的匹配概率分值Wj，并用于选定Wj值最大的所述语料标注模型并获取选定的所述语料标注模型对应的标签模板，然后对待标注语料进行机器自动标注；数据集管理模块，连接所述算法管理模块，用于上传待标注语料数据，并用于导出语料标注结果；数据可视化模块，分别连接所述项目管理模块、所述算法管理模块和所述数据集管理模块，用于可视化语料标注过程和语料标注结果。本发明通过计算每个可选语料标注模型的概率分值Wj，并选定概率分值Wj最大的语料标注模型以及该模型对应的标签模板对待标注语料进行机器自动标注，提高了标注准确率。且每个模型的概率分值Wj是浮动变化而非固定的，考虑了模型动态更新以及同个模型对不同标注数据具有不同标注能力的情况，筛选语料标注模型的方法更具科学性，有利于提高语料标注的准确率。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对本发明实施例中所需要使用的附图作简单地介绍。显而易见地，下面所描述的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是标注平台进行语料标注的原理框图；图2是使用标注平台进行语料标注的流程图；图3是语料标注审核流程的示意图；图4是本发明一实施例提供的基于标注模型和标签模板筛选的语料标注方法的实现步骤图；图5是本发明一实施例提供的基于标注模型和标签模板筛选的语料标注装置的结构示意图；图6是使用精标后的数据对语料标注模型进行更新训练的流程示意图。具体实施方式下面结合附图并通过具体实施方式来进一步说明本发明的技术方案。其中，附图仅用于示例性说明，表示的仅是示意图，而非实物图，不能理解为对本专利的限制；为了更好地说明本发明的实施例，附图某些部件会有省略、放大或缩小，并不代表实际产品的尺寸；对本领域技术人员来说，附图中某些公知结构及其说明可能省略是可以理解的。本发明实施例的附图中相同或相似的标号对应相同或相似的部件；在本发明的描述中，需要理解的是，若出现术语“上”、“下”、“左”、“右”、“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此附图中描述位置关系的用语仅用于示例性说明，不能理解为对本专利的限制，对于本领域的普通技术人员而言，可以根据具体情况理解上述术语的具体含义。在本发明的描述中，除非另有明确的规定和限定，若出现术语“连接”等指示部件之间的连接关系，该术语应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或成一体；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个部件内部的连通或两个部件的相互作用关系。对于本领域的普通技术人员而言，可以具体情况理解上述术语在本发明中的具体含义。本发明实施例提供的基于标注模型和标签模板的语料标注方法包括如下几个技术部分：一、明确语料标注流程如图1所示，本发明提供的语料标注流程为：1、平台操作人员或者管理员通过应用程序将外部待标注的csv或zip格式的语料数据上传至文件服务器；2、平台操作人员或者管理员发送增、删、改指令给文件服务器，文件服务器根据接收到的指令提供语料标注的增、删、改功能并通过应用程序展示给操作人员或管理员，操作人员或管理员可在相应的功能页面上对语料标注进行增、删、改操作；3、完成标注后，文件服务器根据指令提供语料标注审核页面展示给审核人员，审核人员完成审核后存储语料标注审核结果；4、平台操作人员或管理员将标注结果或审核结果导出到本地。二、标注平台的使用操作人员或者管理员使用标注平台进行语料标注的流程如图2所示，包括以下几个步骤：上传数据集文件，通过平台提供的数据集管理模块新建数据集，将指定格式的语料数据文件上传到新建的数据集中，其中csv和excel格式适用于文本数据的上传，zip格式适用于多个文本数据合并后的合并文件上传及图像数据上传等。在平台提供的算法管理模块中添加预先设定的语料标注模型算法接口，并简要填写算法的相关描述和信息，并可上传该模型算法的释义文档，便于管理员、标注员以及算法工程师下载查看该算法的详细释义。添加模型指定的标签模板。创建自动标注或预标注的项目，并将创建的项目作为语料标注任务分配给对应的标注设备。根据自适应匹配规则为待进行语料标注的任务选定对应的语料标注模型和标签模板，然后机器进行自动化的语料标注。机器标注完成后，标注员介入标注流程，对机器标注或预标注后的数据进行精标和细标，并对模型的错误标注进行校正和修改。审核员介入标注流程，对机器标注和人工标注结果进行审核，同时由平台计算标注准确率和召回率，并判断是否通过预先设定的标注合格标准，如果通过，则将机器和人工标注结果展示给用户，否则打回给机器和标注员进行二次标注。步骤中，根据自适应匹配规则为待进行语料标注的任务选定对应的语料标注模型和标签模板的方法具体为：为每个语料标注模型设定默认的性能分值，所有模型的性能分值的和值为1。比如，若有5个模型可选，分别为a1、a2、a3、a4、a5，默认设定的性能分值为0.5、0.3、0.1、0.05、0.05，则a1、a2、a3、a4、a5初始被选中的概率分别为50％、30％、10％、5％、5％。模型预测值和真实值的双向反馈得到模型性能的相关指标，可以进一步对各个模型的分值进行调整。具体地，先获取每个模型对历史项目标注的准确率Tw的值，距离当前时间最近的一个项目的标注准确率记为w，则Tw通过以下公式计算而得：公式中，n表示模型历史标注过的项目的数量；wi表示模型对历史第i个项目的标注准确率；w′表示模型对距离当前时间最近的一个项目的标注准确率；α表示参数，α优选等于0.3，参数α是为了优化距离当前时间最近的一个项目的标注准确率在整体标注准确率的比率，可将占比在0.1-0.9范围内调整，考虑到标注人员的标注情况略有差异，为了减小此影响，根据实验数据总结，将α调整至0.3。由于步骤中，机器是根据模型被选中的概率来选择模型的，概率分值越高模型越容易被选中，因此得到Tw后，还需要计算每个模型被选中的概率分值，本发明通过以下公式来计算每个模型被选中的概率分值：公式中，Wj表示第j个语料标注模型被选中的概率分值；表示第j个语料标注模型对历史项目的标注准确率；m表示可选择的语料标注模型的数量。当为0时，表示平台为初始化状态，没有相关的历史标注准确率记录，则默认赋予每个可选的语料标注模型等同的概率分值。三、标注审核流程标注审核流程包括以下几个步骤：1)标注员在完成精标、细标后提交审核任务；2)审核员接收到审核任务后进行审核。审核员不仅需要有与标注员相当或更高的标注能力且需要具备是否需要对标注员的标注结果进行打回或通过的判断力，这决定了审核后的最终标注结果的准确性，并且能够进一步影响语料标注模型的训练效果。3)审核员在进入到审核页面后，抽取不低于总标注数量的30％的标注数据进行审核。4)机器通过召回率和准确率两个评价指标来评价审核结果或模型自动标注结果的好坏。综上，本发明提供的基于标注模型和标签模板筛选的语料标注方法，如图4所示，包括步骤：S1，计算每个语料标注模型对历史项目标注的准确率Tw的值；S2，根据Tw计算每个语料标注模型的匹配概率分值Wj；S3，选择Wj值最大的语料标注模型并获取选定的语料标注模型对应的标签模板，然后对待标注语料进行机器自动标注。为使得机器具备实现上述的基于标注模型和标签模板筛选的语料标注方法的功能，本发明提供了一种如图5所示的基于标注模型和标签模板筛选的语料标注装置，该装置包括：项目管理模块，用于对各语料标注模型历史标注过的语料标注项目进行管理；算法管理模块，连接项目管理模块，用于计算每个语料标注模型对历史项目标注的准确率Tw的值，并用于根据Tw计算每个语料标注模型的匹配概率分值Wj，并用于选定Wj值最大的语料标注模型并获取选定的语料标注模型对应的标签模板，然后对待标注语料进行机器自动标注；数据集管理模块，连接算法管理模块，用于上传待标注语料数据，并用于导出语料标注结果；数据可视化模块，分别连接项目管理模块、算法管理模块和数据集管理模块，用于可视化语料标注过程和语料标注结果。以下对本发明训练语料标注模型的方法进行具体说明：语料标注模型训练方法，通过弱监督学习的方式，先用有标注的训练数据对语料标注模型进行训练，再用无标注训练数据进行预测，对预测结果中置信度分值超过预设阈值的实体词进行标注，生成精标数据，扩充了有标注训练数据的数量，可有效防止模型训练过拟合，同时减少了人工标注无标注训练数据的成本。使用有标注的训练数据对目标语料标注模型进行初步训练，目标语料标注模型即需要进行训练的语料标注模型，在本申请中，可以根据任务的不同，训练多个目标语料标注模型，每个语料标注模型以BERT模型为基础，在BERT模型后添加不同的下游任务网络层，下游任务网络层又包括下游任务子层和条件随机场子层，如BERT+Bi-LSTM+CRF模型，其中，Bi-LSTM为下游任务子层，CRF为下游任务子层对应的条件随机场子层；BERT+GRU+CRF模型，其中，GRU为下游任务子层，CRF为下游任务子层对应的条件随机场子层；BERT+IDCNN+CRF模型，其中，IDCNN为下游任务子层，CRF为下游任务子层对应的条件随机场子层；还可以为BERT+CRF模型，。其中，CRF为条件随机场子层，该模型没有下游任务子层。假设目标文本为“武汉市长江大桥的总设计师是茅以升”，将该目标文本分别输入至少两个语料标注模型的编码层进行处理，获得每个语料标注模型的编码层输出的目标文本特征矩阵，其中，每个语料标注模型通过上述模型训练方法训练获得。将每个目标文本特征矩阵输入至条件随机场层进行处理，条件随机场层用于根据文本特征矩阵生成对应的实体词集合。具体候选实体词集合参见下表a：编码层或融合策略目标文本特征矩阵候选实体词集合BERT+Bi-LSTM第一目标文本特征矩阵F武汉，长江大桥，茅以升BERT+GRU第一目标文本特征矩阵G武汉市长，江大桥，茅以升BERT+IDCNN第一目标文本特征矩阵H长江大桥，茅以升第一融合策略1第二目标文本特征矩阵I武汉市长，茅以升第一融合策略2第二目标文本特征矩阵J武汉市，江大桥第一融合策略3第二目标文本特征矩阵K武汉，茅以升第一融合策略4第二目标文本特征矩阵L武汉市长江大桥，茅以升表a第一融合策略将每个语料标注模型的编码层输出的第一目标文本特征矩阵进行融合，获得至少一个第二目标文本特征矩阵。本实施例中，第一融合策略1为第一目标文本特征矩阵F和第一目标文本特征矩阵G进行融合，获得第二目标文本特征矩阵I；第一融合策略2为第一目标文本特征矩阵F和第一目标文本特征矩阵H进行融合，获得第二目标文本特征矩阵J；第一融合策略3为第一目标文本特征矩阵G和第一目标文本特征矩阵H进行融合，获得第二目标文本特征矩阵K；第一融合策略4为第一目标文本特征矩阵F、第一目标文本特征矩阵G和第一目标文本特征矩阵H进行融合，获得第二目标文本特征矩阵L。每个语料标注模型在训练完成后，还会在相应的验证集中验证语料标注模型的预测准确度，如有5条验证数据中，语料标注模型预测出的实体词正确了4条，则该语料标注模型的预测准确度为0.8。基于此，可以获知每个语料标注模型的预测准确度，为了更好的获取最终的实体词，还可以根据每个语料标注模型的准确度确定每个语料标注模型对应的第一目标文本特征矩阵的权重，比如A语料标注模型的预测准确度为0.8，A语料标注模型输出的第一目标文本特征矩阵的权重为0.8；B语料标注模型的预测准确度为0.9，则B语料标注模型输出的第一目标文本特征矩阵的权重为0.9，根据每个第一目标文本特征矩阵对应的权重将每个第一目标文本特征矩阵进行融合。将最终融合后的权重最高的两个候选实体词集合取并集，获得初始实体词集合，再根据预设的实体词表和筛选规则，将实体“茅以升-组织名”和“武汉-地名”过滤，最终获得目标文本“武汉市长江大桥的总设计师是茅以升”对应的实体词，其中，“武汉市长江大桥”和“茅以升”为实体词，“建筑名”和“人名”分别为每个实体词对应的类型。当训练得到的语料标注模型的性能不够理想时，还通过精标数据按照图6所示的模型更新方法对语料标注模型进行更新训练。综上，本发明具有以下有益效果：通过计算每个可选语料标注模型的概率分值Wj，并选定概率分值Wj最大的语料标注模型以及该模型对应的标签模板对待标注语料进行机器自动标注，提高了标注准确率。且每个模型的概率分值Wj是浮动变化而非固定的，考虑了模型动态更新以及同个模型对不同标注数据具有不同标注能力的情况，筛选语料标注模型的方法更具科学性，有利于提高语料标注的准确率。需要声明的是，上述具体实施方式仅仅为本发明的较佳实施例及所运用技术原理。本领域技术人员应该明白，还可以对本发明做各种修改、等同替换、变化等等。但是，这些变换只要未背离本发明的精神，都应在本发明的保护范围之内。另外，本申请说明书和权利要求书所使用的一些术语并不是限制，仅仅是为了便于描述。
