标题title
周期性结构的周期提取方法及晶圆缺陷检测方法
摘要abst
本发明提供了一种周期性结构的周期提取方法及晶圆缺陷检测方法，所述周期性结构的周期提取方法，包括：对待检测图像进行傅里叶变换，以获得所述待检测图像的频谱；对目标区域内的所述频谱进行寻峰，以获取所述周期对应的空间频率预估值；对所述待检测图像进行上采样的傅里叶变换，以获取所述周期对应的空间频率预估值附近的局域上采样频谱；对所述局域上采样频谱进行寻峰，以得到所述周期性结构的周期的精确值。在本发明所提供的周期性结构的周期提取方法中进行了两次寻峰，第一次寻峰是为了缩小筛选范围，避免得到错误的空间频率预估值；第二次寻峰是针对所述空间频率预估值附近的局域上采样频谱，以求得所述周期性结构的周期的精确值。
权利要求书clms
1.一种周期性结构的周期提取方法，其特征在于，包括：获取待检测图像，所述待检测图像具有周期性结构；对所述待检测图像进行傅里叶变换，以获得所述待检测图像的频谱；获取所述频谱中的目标区域，对所述目标区域内的所述频谱进行寻峰，以获取所述周期对应的空间频率预估值；对所述待检测图像进行上采样的傅里叶变换，以获取所述周期对应的空间频率预估值附近的局域上采样频谱；对所述局域上采样频谱进行寻峰，以得到所述周期性结构的周期的精确值。2.根据权利要求1所述的周期性结构的周期提取方法，其特征在于，在对所述待检测图像进行傅里叶变换，以获得所述待检测图像的频谱之前，包括：确定所述待检测图像所具有周期性的维度。3.根据权利要求2所述的周期性结构的周期提取方法，其特征在于，所述对所述待检测图像进行傅里叶变换，以获得所述待检测图像的频谱，包括：当所述待检测图像仅在一个方向上拥有周期性时，获取所述待检测图像在所述一个方向上的投影，对所述投影进行一维傅里叶变换，以获得所述待检测图像的频谱；当所述待检测图像在两个方向上均拥有周期性时，对所述待检测图像进行二维傅里叶变换，以获得所述待检测图像的频谱。4.根据权利要求3所述的周期性结构的周期提取方法，其特征在于，所述获取所述频谱中的目标区域，包括：当所述待检测图像仅在一个方向上拥有周期性时，预设所述一个方向的周期的最小值min及最大值max，以建立所述目标区域所述一个方向的周期的范围Rangeq，其中，Q为所述待检测图像于所述一个方向上的像素数。5.根据权利要求4所述的周期性结构的周期提取方法，其特征在于，所述对所述目标区域内的频谱进行寻峰，以获取所述周期对应的空间频率预估值，包括：在所述目标区域相应于所述一个方向的周期的范围Rangeq内的频谱进行寻峰，以获取所述一个方向的周期对应的空间频率预估值k0。6.根据权利要求5所述的周期性结构的周期提取方法，其特征在于，所述对所述待检测图像进行上采样的傅里叶变换，以获取所述周期对应的空间频率预估值附近的局域上采样频谱，包括：以所述一个方向的周期对应的空间频率预估值k0为基准预设第一上采样范围，k0∈，1≤k2-k0≤10，1≤k0-k1≤10；预设第一上采样因子t1，获取所述第一上采样范围内的频域坐标向量kk，kk＝k1,k1+Δk,k1+2Δk,…,k2，其中，Δk＝1/t1，t1为大于1的整数；基于所述频域坐标向量kk对所述待检测图像进行上采样的一维傅里叶变换，得到所述一个方向的周期对应的空间频率预估值k0附近的局域上采样频谱F，其中，f为所述待检测图像沿所述一个方向的信号函数，j为虚数符号。7.根据权利要求3所述的周期性结构的周期提取方法，其特征在于，所述获取所述频谱中的目标区域，包括：当所述待检测图像在两个方向上均拥有周期性时，预设所述两个方向中第一方向的周期的最小值min、最大值max以及第二方向的周期的最小值min、最大值max，以分别建立所述目标区域相应于所述第一方向的周期的范围Ranger、所述目标区域相应于所述第二方向的周期的范围Rangec，其中，M为所述待检测图像于所述第一方向上的像素数，N为所述待检测图像于所述第二方向上的像素数。8.根据权利要求7所述的周期性结构的周期提取方法，其特征在于，所述对所述目标区域内的所述频谱进行寻峰，以获取所述周期对应的空间频率预估值，包括：分别在所述第一方向、所述第二方向上，对所述目标区域内的所述频谱的求取平均值，以获取第一一维信号、第二一维信号；对所述第一一维信号进行寻峰，以获取所述第一方向的周期对应的空间频率预估值kr0；对所述第二一维信号进行寻峰，以获取所述第二方向的周期对应的空间频率预估值kc0。9.根据权利要求8所述的周期性结构的周期提取方法，其特征在于，所述对所述待检测图像进行上采样的傅里叶变换，以获取所述周期对应的空间频率预估值附近的局域上采样频谱，包括：以所述第一方向的周期对应的空间频率预估值kr0为基准预设第二上采样范围，kr0∈，1≤kr2-kr0≤10，1≤kr0-kr1≤10；以所述第二方向的周期对应的空间频率预估值kc0为基准预设第三上采样范围，kc0∈，1≤kc2-kc0≤10，1≤kc0-kc1≤10；预设第二上采样因子tr和第三上采样因子tc，获取所述第二上采样范围、所述第三上采样范围内的上采样频域坐标矩阵，所述坐标矩阵包括所述第一方向相应的相位转换矩阵Tr和所述第二方向相应的相位转换矩阵Tc，且Tr＝exp，Tr，s＝，Tr，f＝T，Tc＝exp，Tc，s＝T，Tc，f＝，其中，Tr，s为所述待检测图像空间域沿所述第一方向的向量，Tr，f为所述上采样频域相应于所述第一方向的向量，Tc，s为所述待检测图像空间域沿所述第二方向的向量，Tc，f为所述上采样频域相应于所述第二方向的向量，Δkr＝1/tr，Δkc＝1/tc，tr、tc均为大于1的整数；基于所述第一方向相应的相位转换矩阵Tr和所述第二方向相应的相位转换矩阵Tc对所述待检测图像进行上采样的二维傅里叶变换，得到所述第一方向的周期对应的空间频率预估值kr0、所述第二方向的周期对应的空间频率预估值kc0附近的局域上采样频谱Fus，其中，f为所述待检测图像沿所所述第一方向、所述第二方向的信号函数，j为虚数符号。10.一种晶圆缺陷检测方法，其特征在于，包括：通过如权利要求1-9中任一项所述的周期性结构的周期提取方法，获取待检测图像中周期性结构的周期；获取所述待检测图像中设定位置的样本目标图像，以及L个相邻目标图像，其中，所述L个相邻目标图像中的第M相邻目标图像与所述样本目标图像距离M个周期；所述L和所述M均为正整数，且所述L大于或等于所述M；获取所述L个相邻目标图像的中值图像，所述中值图像中的任意一点的像素值为所述L个相邻目标图像在相应位置下的像素值的中值；获取所述样本目标图像和所述中值图像的差分图像，以便于通过所述差分图像对待检测图像进行缺陷检测和缺陷分类。
说明书desc
技术领域本发明涉及晶圆缺陷检测技术领域，尤其涉及一种周期性结构的周期提取方法及晶圆缺陷检测方法。背景技术晶圆中某些区域存在大量的重复单元，有时候需要利用其较好的周期性进行晶圆的缺陷检测。进行缺陷检测前需要：基于晶圆图像中由周期性结构构成的阵列，计算所述周期性结构的周期；获取所述图像中的设定位置的图像、以及与所述设定位置相邻L个周期的图像，所述L为正整数；基于所述L个周期的图像生成中值图像；根据所述设定位置的图像和所述中值图像计算差分图像，并利用所述差分图像进行缺陷检测和缺陷分类。现有技术中主要通过两种方法进行周期性结构的周期提取：方法一是利用晶圆图像空间域的信息进行周期性结构的周期提取，具体为：由于晶圆图像中存在重复结构，只要定位出两个相隔一定周期的结构位置，并获得两者的间距，就可以获得相应的周期信息；获取结构的位置的方法包括采用基于强度或特征的图像匹配。方法二是利用晶圆图像频域的信息进行周期性结构的周期提取，在信号学中，通常使用周期图法进行周期检测；具体做法是：将某一信号序列进行傅里叶变换得到其频谱，取该频谱幅值的平方，并将该频谱幅值的平方除以信号序列的长度得到功率谱，该功率谱作为真实功率谱的离散估计，进而获得该信号序列的周期。可以将该方法推广到二维情况下，以分别获得晶圆图像在两个方向上的周期。在现有的两种进行周期性结构的周期提取方法中，分别存在以下不足：方法一存在的不足：1)需要手动指定需要定位的重复结构的大概位置，这不利于需要实时自动处理的场景；2)由于工艺差异，两个重复结构的定位本身容易出现一定的误差，该误差会影响最后得到的周期结果；3)如果为了减少定位误差的影响，可以对多个重复结构进行定位，并利用最小二乘法等方法获取周期，但这样计算量会很大。方法二存在的不足：1)将信号序列进行二维傅里叶变换之后，得到的频谱会出现众多峰值，其中强度最高的峰的位置未必对应实际周期，需要人工确认，同样不利于需要实时自动处理的场景；2)受限于傅里叶变换的分辨率，周期的分辨率也不高，一般难以满足使用需求。以一维为例，假设图像的某一个方向尺寸为N，则其快速傅里叶变换的长度也为N；则可以在其频谱中进行寻峰，假设峰位为k，则认为其周期为N/k；显然，实际上其真实周期对应的峰位应位于k-1到k+1之间，假设其分辨率R为该处左右侧分辨率的平均值，则其中，在不同信号长度时，k/N基本是成正比的，因此分辨率基本与k或N成反比，当k值较小时，分辨率也较差。本申请提供了一种周期性结构的周期提取方法及晶圆缺陷检测方法，以在较小的计算量下提高所得到的周期性结构的周期的精度。发明内容本申请提供了一种周期性结构的周期提取方法及晶圆缺陷检测方法，以提高所得到的周期性结构的周期的精度。第一方面，本发明提供一种周期性结构的周期提取方法，包括：获取待检测图像，所述待检测图像具有周期性结构；对所述待检测图像进行傅里叶变换，以获得所述待检测图像的频谱；获取所述频谱中的目标区域，对所述目标区域内的所述频谱进行寻峰，以获取所述周期对应的空间频率预估值；对所述待检测图像进行上采样的傅里叶变换，以获取所述周期对应的空间频率预估值附近的局域上采样频谱；对所述局域上采样频谱进行寻峰，以得到所述周期性结构的周期的精确值。其有益效果在于：本发明进行了两次寻峰，第一次寻峰通过限定目标区域的范围，是为了缩小寻峰的筛选范围，避免得到与所述周期不对应的空间频率预估值；第二次寻峰是针对所述空间频率预估值附近的局域上采样频谱，以求得所述周期性结构的周期的精确值。可选地，在对所述待检测图像进行傅里叶变换，以获得所述待检测图像的频谱之前，包括：确定所述待检测图像所具有周期性的维度。进一步可选地，所述对所述待检测图像进行傅里叶变换，以获得所述待检测图像的频谱，包括：当所述待检测图像仅在一个方向上拥有周期性时，获取所述待检测图像在所述一个方向上的投影，对所述投影进行一维傅里叶变换，以获得所述待检测图像的频谱；当所述待检测图像在两个方向上均拥有周期性时，对所述待检测图像进行二维傅里叶变换，以获得所述待检测图像的频谱。其有益效果在于：本申请所提出的方法适用于具有一个周期性方向的待检测图像，也适用于具有两个周期性方向的待检测图像。进一步可选地，所述获取所述频谱中的目标区域，包括：当所述待检测图像仅在一个方向上拥有周期性时，预设所述一个方向的周期的最小值min及最大值max，以建立所述目标区域所述一个方向的周期的范围Rangeq，其中，Q为所述待检测图像于所述一个方向上的像素数。其有益效果在于：本申请中所提到的所述目标区域是根据实际情况限定周期的最大值和最小值得到的，具体所述目标区域的大小没有固定限制。可选地，所述对所述目标区域内的频谱进行寻峰，以获取所述周期对应的空间频率预估值，包括：在所述目标区域相应于所述一个方向的周期的范围Rangeq内的频谱进行寻峰，以获取所述一个方向的周期对应的空间频率预估值k0。其有益效果在于：通过将寻峰范围限制在目标区域内，避免了得到错误的所述空间频率预估值k0。可选地，所述对所述待检测图像进行上采样的傅里叶变换，以获取所述周期对应的空间频率预估值附近的局域上采样频谱，包括：以所述一个方向的周期对应的空间频率预估值k0为基准预设第一上采样范围，k0∈，1≤k2-k0≤10，1≤k0-k1≤10；预设第一上采样因子t1，获取所述第一上采样范围内的频域坐标向量kk，kk＝k1,k1+Δk,k1+2Δk,…,k2，其中，Δk＝1/t1，t1为大于1的整数；基于所述频域坐标向量kk对所述待检测图像进行上采样的一维傅里叶变换，得到所述一个方向的周期对应的空间频率预估值k0附近的局域上采样频谱F，其中，f为所述待检测图像沿所述一个方向的信号函数，j为虚数符号。可选地，所述获取所述频谱中的目标区域，包括：当所述待检测图像在两个方向上均拥有周期性时，预设所述两个方向中第一方向的周期的最小值min、最大值max以及第二方向的周期的最小值min、最大值max，以分别建立所述目标区域相应于所述第一方向的周期的范围Ranger、所述目标区域相应于所述第二方向的周期的范围Rangec，其中，M为所述待检测图像于所述第一方向上的像素数，N为所述待检测图像于所述第二方向上的像素数。可选地，所述对所述目标区域内的所述频谱进行寻峰，以获取所述周期对应的空间频率预估值，包括：分别在所述第一方向、所述第二方向上，对所述目标区域内的所述频谱的求取平均值，以获取第一一维信号、第二一维信号；对所述第一一维信号进行寻峰，以获取所述第一方向的周期对应的空间频率预估值kr0；对所述第二一维信号进行寻峰，以获取所述第二方向的周期对应的空间频率预估值kc0。可选地，所述对所述待检测图像进行上采样的傅里叶变换，以获取所述周期对应的空间频率预估值附近的局域上采样频谱，包括：以所述第一方向的周期对应的空间频率预估值kr0为基准预设第二上采样范围，kr0∈，1≤kr2-kr0≤10，1≤kr0-kr1≤10；以所述第二方向的周期对应的空间频率预估值kc0为基准预设第三上采样范围，kc0∈，1≤kc2-kc0≤10，1≤kc0-kc1≤10；预设第二上采样因子tr和第三上采样因子tc，获取所述第二上采样范围、所述第三上采样范围内的上采样频域坐标矩阵，所述坐标矩阵包括所述第一方向相应的相位转换矩阵Tr和所述第二方向相应的相位转换矩阵Tc，且Tr＝exp，Tr，s＝，Tr，f＝T，Tc＝exp，Tc，s＝T，Tc，f＝，其中，Tr，s为所述待检测图像空间域沿所述第一方向的向量，Tr，f为所述上采样频域相应于所述第一方向的向量，Tc，s为所述待检测图像空间域沿所述第二方向的向量，Tc，f为所述上采样频域相应于所述第二方向的向量，Δkr＝1/tr，Δkc＝1/tc，tr、tc均为大于1的整数；基于所述第一方向相应的相位转换矩阵Tr和所述第二方向相应的相位转换矩阵Tc对所述待检测图像进行上采样的二维傅里叶变换，得到所述第一方向的周期对应的空间频率预估值kr0、所述第二方向的周期对应的空间频率预估值kc0附近的局域上采样频谱Fus，其中，f为所述待检测图像沿所所述第一方向、所述第二方向的信号函数，j为虚数符号。第二方面，本发明提供一种晶圆缺陷检测方法，包括：通过如第一方面中任一项所述的周期性结构的周期提取方法，获取待检测图像中周期性结构的周期；获取所述待检测图像中设定位置的样本目标图像，以及L个相邻目标图像，其中，所述L个相邻目标图像中的第M相邻目标图像与所述样本目标图像距离M个周期；所述L和所述M均为正整数，且所述L大于或等于所述M；获取所述L个相邻目标图像的中值图像，所述中值图像中的任意一点的像素值为所述L个相邻目标图像在相应位置下的像素值的中值；获取所述样本目标图像和所述中值图像的差分图像，以便于通过所述差分图像对待检测图像进行缺陷检测和缺陷分类。其有益效果在于：通过本申请所提供的晶圆缺陷检测方法对待检测图像进行检测，会得到比较准确的检测结果。附图说明图1为本发明提供的一种周期性结构的周期提取方法实施例流程图；图2为本发明提供的一种目标区域实施例的示意图；图3为本发明提供的一种待检测图像提取周期实施例示意图；图4为本发明提供的又一种待检测图像提取周期实施例示意图；图5为本发明提供的再一种待检测图像提取周期实施例示意图；图6为本发明提供的一种晶圆缺陷检测方法流程示意图。具体实施方式下面结合本申请实施例中的附图，对本申请实施例中的技术方案进行描述。其中，在本申请实施例的描述中，以下实施例中所使用的术语只是为了描述特定实施例的目的，而并非旨在作为对本申请的限制。如在本申请的说明书和所附权利要求书中所使用的那样，单数表达形式“一种”、“该”、“上述”、“该”和“这一”旨在也包括例如“一个或多个”这种表达形式，除非其上下文中明确地有相反指示。还应当理解，在本申请以下各实施例中，“至少一个”、“一个或多个”是指一个或两个以上。术语“和/或”，用于描述关联对象的关联关系，表示可以存在三种关系；例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B的情况，其中A、B可以是单数或者复数。字符“/”一般表示前后关联对象是一种“或”的关系。在本说明书中描述的参考“一个实施例”或“一些实施例”等意味着在本申请的一个或多个实施例中包括结合该实施例描述的特定特征、结构或特点。由此，在本说明书中的不同之处出现的语句“在一个实施例中”、“在一些实施例中”、“在其他一些实施例中”、“在另外一些实施例中”等不是必然都参考相同的实施例，而是意味着“一个或多个但不是所有的实施例”，除非是以其他方式另外特别强调。术语“包括”、“包含”、“具有”及它们的变形都意味着“包括但不限于”，除非是以其他方式另外特别强调。术语“连接”包括直接连接和间接连接，除非另外说明。“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。在本申请实施例中，“示例性地”或者“例如”等词用于表示作例子、例证或说明。本申请实施例中被描述为“示例性地”或者“例如”的任何实施例或设计方案不应被解释为比其它实施例或设计方案更优选或更具优势。确切而言，使用“示例性地”或者“例如”等词旨在以具体方式呈现相关概念。为了解决现有技术所涉及的问题，本申请提供了一种周期性结构的周期提取方法及晶圆缺陷检测方法，且本申请中所提到的所述待检测图像均可指代晶圆图像。本申请提供了一种周期性结构的周期提取方法，其流程如图1所示，包括：S101：获取待检测图像，所述待检测图像具有周期性结构；S102：对所述待检测图像进行傅里叶变换，以获得所述待检测图像的频谱；S103：获取所述频谱中的目标区域，对所述目标区域内的所述频谱进行寻峰，以获取所述周期对应的空间频率预估值；S104：对所述待检测图像进行上采样的傅里叶变换，以获取所述周期对应的空间频率预估值附近的局域上采样频谱；S105：对所述局域上采样频谱进行寻峰，以得到所述周期性结构的周期的精确值。在一些实施例中，在对所述待检测图像进行傅里叶变换，以获得所述待检测图像的频谱之前，包括：确定所述待检测图像所具有周期性的维度。所述确定所述待检测图像所具有周期性的维度即为判断所述待检测图像所具有周期性的方向的数目。在一些实施例中，所述对所述待检测图像进行傅里叶变换，以获得所述待检测图像的频谱，包括：当所述待检测图像仅在一个方向上拥有周期性时，获取所述待检测图像在所述一个方向上的投影，对所述投影进行一维傅里叶变换，以获得所述待检测图像的频谱；当所述待检测图像在两个方向上均拥有周期性时，对所述待检测图像进行二维傅里叶变换，以获得所述待检测图像的频谱。在一些实施例中，在获取所述频谱中的目标区域的过程中，需要排除零频区域和高频区域。零频区域中频谱的强度非常高，容易使得在频谱中寻峰时获得不对应于周期性结构的周期的频域坐标，同时，对应于周期性结构的周期的频域坐标也不落在高频区域。本申请通过限定所述待检测图像在具有周期性方向上的最大周期和最小周期来限定所述目标区域，也即消除了对寻峰有影响的频谱区域，具体是通过获取所述待检测图像在具有周期性方向上的行数或列数与最大周期和最小周期的商得到所述目标区域的范围，包括：当所述待检测图像仅在一个方向上拥有周期性时，预设所述一个方向的周期的最小值min及最大值max，以建立所述目标区域所述一个方向的周期的范围Rangeq，其中，Q为所述待检测图像于所述一个方向上的像素数。然后，在所述目标区域相应于所述一个方向的周期的范围Rangeq内的频谱进行寻峰，以获取所述一个方向的周期对应的空间频率预估值k0。接着，以所述一个方向的周期对应的空间频率预估值k0为基准预设第一上采样范围，k0∈，1≤k2-k0≤10，1≤k0-k1≤10；预设第一上采样因子t1，获取所述第一上采样范围内的频域坐标向量kk，kk＝k1,k1+Δk,k1+2Δk,…,k2，其中，Δk＝1/t1，t1为大于1的整数；基于所述频域坐标向量kk对所述待检测图像进行上采样的一维傅里叶变换，得到所述一个方向的周期对应的空间频率预估值k0附近的局域上采样频谱F，其中，f为所述待检测图像沿所述一个方向的信号函数，j为虚数符号。较为优选地，Rangeq＝。在又一些实施例中，所述获取所述频谱中的目标区域，包括：当所述待检测图像在两个方向上均拥有周期性时，预设所述两个方向中第一方向的周期的最小值min、最大值max以及第二方向的周期的最小值min、最大值max，以分别建立所述目标区域相应于所述第一方向的周期的范围Ranger、所述目标区域相应于所述第二方向的周期的范围Rangec，其中，M为所述待检测图像于所述第一方向上的像素数，N为所述待检测图像于所述第二方向上的像素数。然后，分别在所述第一方向、所述第二方向上，对所述目标区域内的所述频谱的求取平均值，以获取第一一维信号、第二一维信号；对所述第一一维信号进行寻峰，以获取所述第一方向的周期对应的空间频率预估值kr0；对所述第二一维信号进行寻峰，以获取所述第二方向的周期对应的空间频率预估值kc0。接着，以所述第一方向的周期对应的空间频率预估值kr0为基准预设第二上采样范围，kr0∈，1≤kr2-kr0≤10，1≤kr0-kr1≤10；以所述第二方向的周期对应的空间频率预估值kc0为基准预设第三上采样范围，kc0∈，1≤kc2-kc0≤10，1≤kc0-kc1≤10；预设第二上采样因子tr和第三上采样因子tc，获取所述第二上采样范围、所述第三上采样范围内的上采样频域坐标矩阵，所述坐标矩阵包括所述第一方向相应的相位转换矩阵Tr和所述第二方向相应的相位转换矩阵Tc，且Tr＝exp，Tr，s＝，Tr，f＝T，Tc＝exp，Tc，s＝T，Tc，f＝，其中，Tr，s为所述待检测图像空间域沿所述第一方向的向量，Tr，f为所述上采样频域相应于所述第一方向的向量，Tc，s为所述待检测图像空间域沿所述第二方向的向量，Tc，f为所述上采样频域相应于所述第二方向的向量，Δkr＝1/tr，Δkc＝1/tc，tr、tc均为大于1的整数；基于所述第一方向相应的相位转换矩阵Tr和所述第二方向相应的相位转换矩阵Tc对所述待检测图像进行上采样的二维傅里叶变换，得到所述第一方向的周期对应的空间频率预估值kr0、所述第二方向的周期对应的空间频率预估值kc0附近的局域上采样频谱Fus，其中，f为所述待检测图像沿所所述第一方向、所述第二方向的信号函数，j为虚数符号。较为优选地，Ranger＝，Rangec＝。所述待检测图像可以在图像行方向和/或列方向具有周期性，在上述实施例中，所提到的所述最大周期和所述最小周期以像素为单位，它们的取值可以根据经验值得到，例如，无论是图像行方向，还是列方向，其最小周期均取10像素，其最大周期均取200像素，那么对于在行方向和列方向均具有周期性、且行数为10000、列数为1000的待检测图像来说，目标区域中行方向的范围目标区域中列方向的范围所述最大周期和所述最小周期的取值根据实际应用情况设计，不以本实施例为限制。当所述待检测图像在图像行方向和列方向两个方向上均拥有周期性时，虽然，在上述实施例中设定了目标区域，但是实际需要的周期所对应的峰仍往往不是最强的峰，因此不能简单的寻找所述频谱中的最大值所对应的峰位。为了避免其他峰的影响，需要在所述待检测图像具有周期性的方向上分别求频谱的平均值，在上述实施例中，获取到所述目标区域之后，对所述频谱中的目标区域进行寻峰，以获取空间频率的操作，可以是：在所述待检测图像具有周期性的行方向和列方向上，分别获取所述待检测图像在所述目标区域内的频谱的平均值，以获取对应于所述行方向的一维信号、对应于所述列方向的一维信号，再对两个一维信号分别寻峰，基于峰位得出行方向的周期对应的空间频率预估值kr0、列方向的周期对应的空间频率预估值kc0。示例性地，如图2所示，图2中的为所述目标区域，且所述图2中的中的左上角的点对应实际需要求得的所述待检测图像的周期性结构的周期，图2中的和分别在具有周期性的行方向、列方向上获取的一维信号图，基于图2中的和中的第一个峰位可得到行方向的周期对应的空间频率预估值和列方向的周期对应的空间频率预估值。为了更加详细的介绍本申请提取周期的过程，在此进行举例说明。示例一：如图3所示，图3中的为两个方向均具有周期性的待检测图像，通过二维傅里叶变换获得该待检测图像的频谱，如图3中的所示；位于该频谱中央的十字线附近的区域为低频区域，容易影响寻峰的准确性获取目标区域并在其中进行寻峰，得到空间频率预估值；然后在该空间频率预估值附近进行上采样的傅里叶变换，得到局域上采样频谱，该局域上采样频谱如图3中的所示；在该局域上采样频谱上进行寻峰，可得到精确的周期。示例二，如图4所示，图4中的为两个方向均具有周期性的待检测图像，通过二维傅里叶变换获得该待检测图像的频谱，如图4中的所示；低频区域未出现明显的十字线，但仍容易影响寻峰的准确性，获取目标区域并在其中进行寻峰，得到4空间频率预估值；然后在该空间频率预估值附近进行上采样的傅里叶变换，得到局域上采样频谱，该局域上采样频谱如图4中的所示；在局域上采样频谱上进行寻峰，可得到精确的周期。示例三，如图5所示，图5中的为仅一个方向均具有周期性的待检测图像，首先通过一维傅里叶变换获得待检测图像的频谱，如图5中的所示；位于该频谱中央附近的区域为低频区域，容易影响寻峰的准确性，获取目标区域并在其中进行寻峰，得到空间频率预估值；然后在该空间频率预估值附近进行上采样的傅里叶变换，得到局域上采样频谱，该局域上采样频谱如图5中的所示；在该局域上采样频谱上进行寻峰，可得到精确周期。在上述具体示例中，获取所述周期对应的空间频率预估值后，通过获取所述预估值附近的局域上采样频谱，可以获取所述周期的精确值。本申请所提供的所述周期性结构的周期提取方法可以对待检测图像中的周期性结构进行自动、高效的周期检测，以获取较为精确的周期结果；本申请基于整张待检测图像的信息进行分析，可以有效降低仅根据部分信息进行计算而产生的误差；本申请仅对包含周期信息的局域频域坐标范围进行了上采样，有效避免了计算量随需求的周期分辨率上升而急剧提升的情况，从而提高了计算效率。基于上述实施例所提供的周期性结构的周期提取方法，本申请还提供一种晶圆缺陷检测方法，其流程如图6所示，包括：S601：通过如上述任一项实施例所述的周期性结构的周期提取方法，获取待检测图像中周期性结构的周期；S602：获取所述待检测图像中设定位置的样本目标图像，以及L个相邻目标图像，其中，所述L个相邻目标图像中的第M相邻目标图像与所述样本目标图像距离M个周期；所述L和所述M均为正整数，且所述L大于或等于所述M；S603：获取所述L个相邻目标图像的中值图像，所述中值图像中的任意一点的像素值为所述L个相邻目标图像在相应位置下的像素值的中值；S604：获取所述样本目标图像和所述中值图像的差分图像，以便于通过所述差分图像对待检测图像进行缺陷检测和缺陷分类。通过本申请所提供的晶圆缺陷检测方法对待检测图像进行检测，会得到比较准确的检测结果。以上所述，仅为本申请实施例的具体实施方式，但本申请实施例的保护范围并不局限于此，任何在本申请实施例揭露的技术范围内的变化或替换，都应涵盖在本申请实施例的保护范围之内。因此，本申请实施例的保护范围应以所述的权利要求的保护范围为准。
