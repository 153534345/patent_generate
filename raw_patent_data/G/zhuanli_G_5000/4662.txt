标题title
一种建立混凝智能监控联动系统的方法
摘要abst
本发明公开了一种建立混凝智能监控联动系统的方法，包括平流式沉淀池出水浊度预测模型的建立、平流式沉淀池混凝剂投加量推荐模型的建立及混凝智能监控联动系统的建立，平流式沉淀池出水浊度预测模型的建立用于对平流式沉淀池出水浊度的预判，平流式沉淀池混凝剂投加量推荐模型的建立用于混凝剂投加的精准控制，混凝智能监控联动系统的建立整合了平流式沉淀池出水浊度预测模型和平流式沉淀池混凝剂投加量推荐模型，在推荐的混凝剂投加量下预判沉后水浊度，并在浊度出现异常时反馈将出水浊度拉回期望值的混凝剂投加量。本发明在水质实时监控的基础上，达到混凝效果的精确控制、降低药耗、水质预警和智能联动的功能，使混凝沉淀工艺出水水质更稳定。
权利要求书clms
1.一种建立混凝智能监控联动系统的方法，其特征在于，包括：S1，建立平流式沉淀池出水浊度预测模型，用于对平流式沉淀池的出水浊度进行预判，包括：S11，采集时刻的混凝工艺结构化数据和时刻的矾花量化数据根据各数据采集点的采样时间差对采集的数据进行数据对齐处理；所述平流式沉淀池出水浊度预测模型根据时刻的混凝工艺结构化数据以及时刻的矾花量化数据预测水流到达沉淀池出水口处时刻的沉后水浊度S12，对平流式沉淀池出水浊度预测模型进行选型；S13，采用持续增量学习的方式对平流式沉淀池出水浊度预测模型进行持续训练；S2，建立平流式沉淀池混凝剂投加量推荐模型，用于根据沉后水浊度的期望值，智能反馈混凝剂投加量的推荐值，包括：S21，平流式沉淀池混凝剂投加量推荐模型根据沉淀池出水口处时刻的沉后水浊度的期望值以及时刻的混凝工艺结构化数据和矾花量化数据输出时刻的混凝剂投加量的推荐值；S21，对平流式沉淀池混凝剂投加量推荐模型进行选型；S23，采用持续增量学习的方式对平流式沉淀池混凝剂投加量推荐模型进行持续训练；S3，基于步骤S1的平流式沉淀池出水浊度预测模型和步骤S2的平流式沉淀池混凝剂投加量推荐模型，建立适用于自来水厂平流式沉淀池的混凝智能监控联动系统，所述混凝智能监控联动系统采用所述混凝剂投加量的推荐值，能够预测沉后水浊度，并在预测的沉后水浊度出现异常时反馈将出水浊度拉回期望值的混凝剂投加量；其中，Δt1为水流从混凝工艺结构化数据的采集点到矾花量化数据的采集点的采样时间差，Δt2为水流从矾花量化数据的采集点到沉后水数据的采集点的采样时间差；步骤S13和步骤S23中，采用所述持续增量学习的方式进行模型训练，均是使用基础数据集和最近数据集持续进行模型训练，训练后的最新模型作为后一天的生产模型，所述基础数据集包括日常生产范围内的正常数据和实验中收集的异常范围的数据，所述最近数据集包括最近NR天的历史数据。2.根据权利要求1所述的一种建立混凝智能监控联动系统的方法，其特征在于，所述平流式沉淀池出水浊度预测模型和所述平流式沉淀池混凝剂投加量推荐模型的训练数据均包括矾花量化数据和混凝工艺结构化数据，模型数据频率为每分钟一次；其中，矾花量化数据包括蓬松矾花、片状矾花和模糊矾花的矾花个数、分类置信度平均数、分类置信度中位数、矾花面积平均数和矾花面积中位数，混凝工艺结构化数据包括原水结构化数据和沉淀池结构化数据，原水结构化数据包括浊度、水温、pH值、氨氮、余氯、耗氧量和亚硝酸盐，沉淀池结构化数据包括沉淀池瞬间进水流量、沉淀池液位、加氯量和加矾量，其中，加矾量在平流式沉淀池出水浊度预测模型中为输入值，在平流式沉淀池混凝剂投加量推荐模型中为输出值。3.根据权利要求2所述的一种建立混凝智能监控联动系统的方法，其特征在于，所述矾花量化数据是通过摄像头图像采集获得的，所述混凝工艺结构化数据是通过在线仪表采集获得的。4.根据权利要求1所述的一种建立混凝智能监控联动系统的方法，其特征在于，步骤S11中，所述根据各数据采集点的采样时间差对采集的数据进行数据对齐处理，包括：沿水流流向，依次定义混凝工艺结构化数据的采集点为P0、对应水流流经P0处的时刻为矾花量化数据的采集点为P1、对应水流流经P1处的时刻为沉后水数据的采集点为P2、对应水流流经P2处的时刻为则其中，Δt1为水流从P0到P1的采样时间差，Δt2为水流从P1到P2的采样时间差；依据采样时间差Δt1和采样时间差Δt2决定数据的时间延迟。5.根据权利要求4所述的一种建立混凝智能监控联动系统的方法，其特征在于，水流从P0到P1的采样时间差Δt1取水流平均停留时间；水流从P1到P2的采样时间差Δt2是通过最小化水流流过的距离与平流式沉淀池长度的差值的绝对值进行计算的，具体包括如下步骤：A1，根据沉淀池的分钟进水量和分钟液位，计算当前分钟沉淀池水流速度，即当前分钟水流流动的距离：式中，vi表示第i分钟水流的速度，即当前分钟水流流动的距离，单位：米/分钟；Hi表示第i分钟平流式沉淀池的液位高度，单位：米；W表示平流式沉淀池宽度，单位：米；Pi表示第i分钟平流式沉淀池的进水量，单位：立方米/分钟；A2，根据每分钟频率的数据，在时间维度上积分求得P1到P2的时间，即水流流过的距离与平流式沉淀池长度的差值的绝对值达到最小化时，水流流动的时间N的取值：式中，L表示平流式沉淀池长度，单位：米；N＝Δt2，表示水流从P1流向P2的时间，单位：分钟；li表示第i分钟水流流过的距离，单位：米。6.根据权利要求1所述的一种建立混凝智能监控联动系统的方法，其特征在于，步骤S12中，所述对平流式沉淀池出水浊度预测模型进行选型，具体包括如下步骤：分别使用单模型算法以及集成模型算法对平流式沉淀池出水浊度预测模型进行训练，计算决定系数R2作为模型的得分，对模型的预测效果进行评价，得分越高代表模型性能越好，选择得分最高的模型作为平流式沉淀池出水浊度预测模型；其中，式中，分别表示第i个样本的预测值和真实值，M表示测试集样本个数，表示测试集真实值的平均值。7.根据权利要求6所述的一种建立混凝智能监控联动系统的方法，其特征在于，所述平流式沉淀池混凝剂投加量推荐模型采用的模型算法与所述平流式沉淀池出水浊度预测模型的模型算法相同。8.根据权利要求1所述的一种建立混凝智能监控联动系统的方法，其特征在于，步骤S13和步骤S23中，所述实验中收集的异常范围的数据，是在实验中通过改变混凝剂的投加量，使投加量在异常范围内而获取的，其中，所述改变混凝剂的投加量，包括低于日常投加量和高于日常投加量的情况，实验期间收集相应异常情况下的矾花量化数据和混凝工艺结构化数据。9.根据权利要求1所述的一种建立混凝智能监控联动系统的方法，其特征在于，步骤S13和步骤S23中，所述最近数据集所涉及的天数NR的确定方法包括：实验选取不同的最近天数参数NR，配合所建立的基础数据集，对不同天数参数NR下训练而得的平流式沉淀池出水浊度预测模型进行测试，并计算决定系数R2作为模型的测试得分，得分越高代表模型性能越好，选择得分最高的模型所对应的天数参数NR作为持续增量训练时使用的最合适的最近天数参数NR；其中，式中，分别表示第i个样本的预测值和真实值，M表示测试集样本个数，表示测试集真实值的平均值。10.根据权利要求9所述的一种建立混凝智能监控联动系统的方法，其特征在于，所述平流式沉淀池混凝剂投加量推荐模型和所述平流式沉淀池出水浊度预测模型所使用的不同天数参数NR保持一致。
说明书desc
技术领域本发明属于水处理技术领域，尤其涉及一种利用图像识别技术提取的矾花量化数据和混凝工艺涉及的结构化数据建立混凝智能监控联动系统的方法，适用于为水厂提供包括沉淀池出水浊度预警，混凝剂智能反馈投加功能的混凝工艺智能化控制，可以智能控制加药量、缩短出水浊度预警时间，提升水厂在反应沉淀环节的应急处置能力、避免混凝剂用量过高过低，实现混凝工艺环节的智能监控联动。背景技术混凝沉淀工艺是水厂常规处理工艺的重要组成部分，在去除悬浮颗粒物、胶体杂质，降低浊度的同时，还能去除附着在颗粒物表面的微生物、有机物等，减轻后续工艺的负担，是非常重要的前处理工艺之一。工艺通过混凝剂的投加与水中颗粒物反应形成颗粒状矾花，颗粒状矾花不断相互运动、碰撞、结合以及吸附原水杂质形成更大的矾花晶体，最后沉淀到沉淀池底部。因此，目前水厂工人判断混凝效果的好坏主要依靠沉淀池入口的矾花形态，以及沉淀池出水浊度。然而，混凝工艺的效果受原水水质，如原水浊度、pH、温度，工艺运行参数，如进水流量、混凝剂投加量等多种因素的影响。受限于混凝沉淀工艺较长的水力停留时间，在线仪表监测的沉淀池出水浊度存在滞后性的问题，无法及时反映原水水质或运行参数出现的突发问题，对异常水质的控制可能出现延迟。因此，需要一种可以预判沉淀池出水浊度的方法，提供水质异常的预警，缩短应急处置的时间。对于混凝剂投加而言，水厂日常主要根据进水流量比投加，工人也会凭借经验根据矾花形态和沉淀池出水浊度是否异常，相应调整混凝剂的投加量。因此，同样存在滞后性的问题，且很难做到混凝剂投加量的优化和精准控制。综上所述，需要一套结合人工经验逻辑，综合考虑代表矾花形态特征的矾花量化数据和代表原水水质、出水水质和工艺运行参数的混凝工艺结构化数据的混凝智能监控联动系统。系统提供混凝剂的推荐投加量，沉淀池出水浊度的预判，可以降低药耗成本，提升出水水质应急处置效率，一定程度上减少工艺运行对人工主观判断的依赖，指导水厂对混凝沉淀工艺更为客观和精细化的管理，实现工艺的智能化控制。发明内容本发明的目的在于提供一种通过矾花量化数据和混凝工艺结构化数据建立混凝智能监控联动系统的方法，以解决上述技术背景中提出的问题。为实现上述目的，本发明采用以下技术方案：一种建立混凝智能监控联动系统的方法，包括：S1，建立平流式沉淀池出水浊度预测模型，用于对平流式沉淀池的出水浊度进行预判，包括：S11，采集时刻的混凝工艺结构化数据和时刻的矾花量化数据根据各数据采集点的采样时间差对采集的数据进行数据对齐处理；所述平流式沉淀池出水浊度预测模型根据时刻的混凝工艺结构化数据以及时刻的矾花量化数据预测水流到达沉淀池出水口处时刻的沉后水浊度S12，对平流式沉淀池出水浊度预测模型进行选型；S13，采用持续增量学习的方式对平流式沉淀池出水浊度预测模型进行持续训练；S2，建立平流式沉淀池混凝剂投加量推荐模型，用于根据沉后水浊度的期望值，智能反馈混凝剂投加量的推荐值，包括：S21，平流式沉淀池混凝剂投加量推荐模型根据沉淀池出水口处时刻的沉后水浊度的期望值以及时刻的混凝工艺结构化数据和矾花量化数据输出时刻的混凝剂投加量的推荐值；S21，对平流式沉淀池混凝剂投加量推荐模型进行选型；S23，采用持续增量学习的方式对平流式沉淀池混凝剂投加量推荐模型进行持续训练；S3，基于步骤S1的平流式沉淀池出水浊度预测模型和步骤S2的平流式沉淀池混凝剂投加量推荐模型，建立适用于自来水厂平流式沉淀池的混凝智能监控联动系统，所述混凝智能监控联动系统采用所述混凝剂投加量的推荐值，能够预测沉后水浊度，并在预测的沉后水浊度出现异常时反馈将出水浊度拉回期望值的混凝剂投加量；其中，Δt1为水流从混凝工艺结构化数据的采集点到矾花量化数据的采集点的采样时间差，Δt2为水流从矾花量化数据的采集点到沉后水数据的采集点的采样时间差；步骤S13和步骤S23中，采用所述持续增量学习的方式进行模型训练，均是使用基础数据集和最近数据集持续进行模型训练，训练后的最新模型作为后一天的生产模型，所述基础数据集包括日常生产范围内的正常数据和实验中收集的异常范围的数据，所述最近数据集包括最近NR天的历史数据。优选地，所述平流式沉淀池出水浊度预测模型和所述平流式沉淀池混凝剂投加量推荐模型的训练数据均包括矾花量化数据和混凝工艺结构化数据，模型数据频率为每分钟一次；其中，矾花量化数据包括蓬松矾花、片状矾花和模糊矾花的矾花个数、分类置信度平均数、分类置信度中位数、矾花面积平均数和矾花面积中位数，混凝工艺结构化数据包括原水结构化数据和沉淀池结构化数据，原水结构化数据包括浊度、水温、pH值、氨氮、余氯、耗氧量和亚硝酸盐，沉淀池结构化数据包括沉淀池瞬间进水流量、沉淀池液位、加氯量和加矾量，其中，加矾量在平流式沉淀池出水浊度预测模型中为输入值，在平流式沉淀池混凝剂投加量推荐模型中为输出值。更优选地，所述矾花量化数据是通过摄像头图像采集获得的，所述混凝工艺结构化数据是通过在线仪表采集获得的。优选地，步骤S11中，所述根据各数据采集点的采样时间差对采集的数据进行数据对齐处理，包括：沿水流流向，依次定义混凝工艺结构化数据的采集点为P0、对应水流流经P0处的时刻为矾花量化数据的采集点为P1、对应水流流经P1处的时刻为沉后水数据的采集点为P2、对应水流流经P2处的时刻为则其中，Δt1为水流从P0到P1的采样时间差，Δt2为水流从P1到P2的采样时间差；依据采样时间差Δt1和采样时间差Δt2决定数据的时间延迟。更优选地，水流从P0到P1的采样时间差Δt1取水流平均停留时间；水流从P1到P2的采样时间差Δt2是通过最小化水流流过的距离与平流式沉淀池长度的差值的绝对值进行计算的，具体包括如下步骤：A1，根据沉淀池的分钟进水量和分钟液位，计算当前分钟沉淀池水流速度：式中，vi表示第i分钟水流的速度，即当前分钟水流流动的距离，单位：米/分钟；Hi表示第i分钟平流式沉淀池的液位高度，单位：米；W表示平流式沉淀池宽度，单位：米；Pi表示第i分钟平流式沉淀池的进水量，单位：立方米/分钟；A2，根据每分钟频率的数据，在时间维度上积分求得P1到P2的时间，即水流流过的距离与平流式沉淀池长度的差值的绝对值)达到最小化时，水流流动的时间N的取值：式中，L表示平流式沉淀池长度，单位：米；N＝Δt2，表示水流从P1流向P2的时间，单位：分钟；li表示第i分钟水流流过的距离，单位：米。优选地，步骤S12中，所述对平流式沉淀池出水浊度预测模型进行选型，具体包括如下步骤：分别使用单模型算法以及集成模型算法对平流式沉淀池出水浊度预测模型进行训练，计算决定系数R2作为模型的得分，对模型的预测效果进行评价，得分越高代表模型性能越好，选择得分最高的模型作为平流式沉淀池出水浊度预测模型；其中，式中，yi、分别表示第i个样本的预测值和真实值，M表示测试集样本个数，表示测试集真实值的平均值。更优选地，所述平流式沉淀池混凝剂投加量推荐模型采用的模型算法与所述平流式沉淀池出水浊度预测模型的模型算法相同。优选地，步骤S13和步骤S23中，所述实验中收集的异常范围的数据，是在实验中通过改变混凝剂的投加量，使投加量在异常范围内而获取的，其中，所述改变混凝剂的投加量，包括低于日常投加量和高于日常投加量的情况，实验期间收集相应异常情况下的矾花量化数据和混凝工艺结构化数据。优选地，步骤S13和步骤S23中，所述最近数据集所涉及的天数NR的确定方法包括：实验选取不同的最近天数参数NR，配合所建立的基础数据集，对不同天数参数NR下训练而得的平流式沉淀池出水浊度预测模型进行测试，并计算决定系数R2作为模型的测试得分，得分越高代表模型性能越好，选择得分最高的模型所对应的天数参数NR作为持续增量训练时应使用的最合适的最近天数参数NR；其中，式中，yi、分别表示第i个样本的预测值和真实值，M表示测试集样本个数，表示测试集真实值的平均值。更优选地，所述平流式沉淀池混凝剂投加量推荐模型和所述平流式沉淀池出水浊度预测模型所使用的不同天数参数NR保持一致。与现有技术相比，本发明的技术方案具有以下有益效果：本发明提出了一种利用图像识别技术提取的矾花量化数据和混凝工艺涉及的结构化数据建立混凝智能监控联动系统的方法，所述方法包括平流式沉淀池出水浊度预测模型的建立、平流式沉淀池混凝剂投加量推荐模型的建立以及混凝智能监控联动系统的建立，所述平流式沉淀池出水浊度预测模型的建立用于对平流式沉淀池出水浊度的预判，分为滞后时间定义和数据对齐、平流式沉淀池出水浊度预测模型的选型和持续增量学习三步，分别解决浊度预测水力停留时间较长的滞后性问题、最适合预测模型的选择问题以及数据漂移和数据不平衡的问题，所述持续增量学习分为基础数据集的建立、最近数据集的选择以及持续增量的训练三步，所述平流式沉淀池混凝剂投加量推荐模型的建立用于混凝剂投加的精准控制，所述混凝智能监控联动系统的建立整合了平流式沉淀池出水浊度预测模型和平流式沉淀池混凝剂投加量推荐模型，能够在推荐的混凝剂投加量下预判沉后水浊度，并在浊度出现异常时反馈将出水浊度拉回期望值的混凝剂投加量。本发明可以在水质实时监控的基础上，达到混凝效果的精确控制、降低药耗、水质预警和智能联动的功能，从混凝控制管理、应急能力提升、预警时间缩短着手，使混凝沉淀工艺出水水质更稳定，提升水厂管理水平。附图说明构成本申请的一部分附图用来提供对本申请的进一步理解，本申请的示意性实施例及其说明用于解释本申请，并不构成对本申请的不当限定。在附图中：图1是絮凝沉淀相关数据采集点位示意图；图2是支持向量机回归模型测试结果示意图；图3是决策树模型测试结果示意图；图4是基于支持向量机的Bagging测试结果示意图；图5是随机森林模型测试结果示意图；图6是平流式沉淀池出水浊度预测模型验证示意图；图7是平流式沉淀池混凝剂投加量推荐模型的验证示意图；图8是人工经验投加和模型推荐投加的验证示意图。具体实施方式为使本发明的目的、技术方案及效果更加清楚、明确，以下参照附图并举实例对本发明进一步详细说明。应当理解，此处所描述的具体实施例仅用以解释本发明，并不用于限定本发明。本申请公开了一种利用图像识别技术提取的矾花量化数据和混凝工艺涉及的结构化数据建立混凝智能监控联动系统的方法，具体包括如下步骤：1.平流式沉淀池出水浊度预测模型的建立平流式沉淀池出水浊度模型是混凝智能监控联动系统的一部分，其目的在于通过该模型对平流式沉淀池出水的浊度进行预判，避免由于沉淀池水力停留时间较长，出水浊度异常状况发现滞后的情况，达到缩短预警时间、提高应急处理效率的目的。平流式沉淀池出水浊度预测模型的建立综合考虑影响沉后水出水浊度的因素，包括反映矾花形态特征的矾花量化数据，以及反映原水水质和沉淀池运行参数的混凝工艺结构化数据，模型数据频率为每分钟一次。矾花量化数据是通过已有的图像识别技术将矾花分为蓬松矾花、片状矾花和模糊矾花三类，并分别提取三类矾花的矾花个数、分类置信度平均数、分类置信度中位数、矾花面积平均数和矾花面积中位数。具体地，矾花个数表示当前图像识别区域内某类检出矾花的个数；分类置信度平均数和分类置信度中位数表示检出矾花分类正确的概率的平均值和中位数，表征检出矾花为当前类别的置信度；矾花面积平均数和矾花面积中位数表示当前图像识别区域某类检出矾花的面积之和相对于该图像识别区域的面积比值，表征该识别区域该类矾花的密集程度。混凝工艺结构化数据通过在线仪表采集获得，包括原水结构化数据以及沉淀池结构化数据。其中，原水结构化数据包括浊度、水温、pH值、氨氮、余氯、耗氧量和亚硝酸盐；沉淀池结构化数据包括沉淀池瞬间进水流量、沉淀池液位、加氯量和加矾量。1)滞后时间定义和数据对齐在时间上，摄像头图像采集点和沉淀池出水口采样点相较于原水水质的采样点均有不同的滞后，在处理数据时，需要考虑时间滞后的因素，根据采集点时间差将数据对齐。具体图像数据和混凝工艺结构化数据的采集点位见图1，水流由原水数据采集点到摄像头图像采集点，再由摄像头图像采集点到沉后水数据采集点都需要一定时间。沉淀池入水口处水流速度较快，原水数据采集点到摄像头图像采集处的时间差Δt1取平均停留时间。摄像头图像采集点处的水流到达沉后水数据采集点的时间较长，在计算P1到P2的时间时，考虑水流速度随时间维度发生的变化，通过最小化水流流过的距离与平流式沉淀池长度的差值的绝对值进行计算。具体方法如下：i)根据沉淀池的分钟进水量和分钟液位，计算当前分钟沉淀池水流速度，见公式：其中，vi表示第i分钟水流的速度，即当前分钟水流流动的距离，单位：米/分钟；Hi表示第i分钟平流式沉淀池的液位高度，单位：米；W表示平流式沉淀池宽度，单位：米；Pi表示第i分钟平流式沉淀池进水量，单位：立方米/分钟。ii)根据每分钟频率的数据，在时间维度上积分求得P1到P2的时间，即水流流过的距离与平流式沉淀池长度的差值的绝对值)达到最小化时，水流流动的时间N的取值，见公式：其中，L表示平流式沉淀池长度，单位：米；N表示水流从摄像头图像采集点流向沉后水数据采集点的时间，单位：分钟；li表示第i分钟水流流过的距离，单位：米。具体滞后时间定义如下：平流式沉淀池出水浊度预测模型根据时刻的原水及沉淀池结构化数据和时刻的矾花视频图像识别和计算而得的矾花量化指标预测该水流到达沉淀池出水口处时刻的沉后水浊度即：已知输入：时刻的原水及沉淀池结构化数据时刻的矾花量化指标回归输出：时刻的沉后水浊度其中，原水及沉淀池结构化数据采集点P0对应水流流经该处时刻为矾花视频数据采集点P1对应水流流经该处时刻为沉后水数据采集点P2，对应水流流经该处时刻为。水流从原水采集点到视频数据采集点在处理矾花量化数据和混凝工艺结构化数据之前根据采集点时间差重新对齐。2)平流式沉淀池出水浊度预测模型的选型平流式沉淀池出水浊度预测模型使用分类模型，通过选取具有代表性的数据根据滞后时间定义对齐数据训练模型。选型比较单模型算法和集成模型算法的预测结果，计算决定系数R2作为模型的得分，见公式，对模型的预测效果进行评价，得分越高代表模型性能越好，预测模型选择得分最高的模型。其中，yi、分别表示第i个样本的预测值和真实值，M表示测试集样本个数，表示测试集真实值的平均值。3)持续增量学习在水厂原水净化的过程中，矾花量化数据和混凝工艺结构化数据受到多种因素影响，比如，仪器的误差、混凝剂不同批次的差异、不同条件形成成像误差等。因此，数据会随时间缓慢发生变迁，产生数据飘移，导致模型退化问题。此外，日常的矾花量化数据和混凝工艺结构化数据，集中分布在沉后水浊度处于正常范围的情况下，沉后水浊度处于异常范围的数据较少，导致数据不平衡问题，不利于模型对异常状态下沉后水浊度的预测。为缓解数据漂移引起的模型退化，以及数据不平衡的问题，采用持续增量学习的方式训练模型。即在训练模型时使用基础数据集和最近数据集，持续对模型进行训练，具体方法如下：i)基础数据集的建立由于日常生产中产生的数据均为沉后水浊度处于正常范围内的数据，为解决数据不平衡问题，需设计实验收集沉后水浊度处于异常范围的数据。实验通过改变混凝剂的投加量，使投加量在异常的范围内，包括低于日常投加量和高于日常投加量的情况，实验期间收集相应异常情况下的矾花量化数据和混凝工艺结构化数据。基础数据集包括日常生产范围内的数据以及实验异常范围的数据两部分。ii)最近数据集的选择持续增量学习除了需要对基础数据集的建立外，还需要确定最近数据集所涉及的天数NR。实验选取不同最近天数参数NR，配合所建立的基础数据集，对不同天数参数NR训练而得的模型进行测试，并根据模型测试的得分来确定持续增量训练时应使用的最适合的最近天数参数NR。2.平流式沉淀池混凝剂投加量推荐模型的建立平流式沉淀池混凝剂投加量推荐模型的目的是根据用户对沉淀池出水浊度的期望值，智能反馈推荐的混凝剂投加量，达到指导水厂混凝剂加药精细化管理，实现混凝工艺的智能监控联动的目的。混凝剂投加量推荐模型的建立综合考虑影响混凝剂投加量的因素，包括反映矾花形态特征的矾花量化数据，以及反映沉淀池出水水质、原水水质和沉淀池运行参数的混凝工艺结构化数据，模型数据频率为每分钟一次。矾花量化数据包括三类矾花的矾花个数、分类置信度平均数、分类置信度中位数、矾花面积平均数和矾花面积中位数。混凝工艺结构化数据包括沉淀池出水浊度，原水结构化数据，以及沉淀池结构化数据。1)模型时间定义与平流式沉淀池出水浊度预测模型不同，平流式沉淀池混凝剂投加量推荐模型给出时刻混凝剂投加量的推荐值，不考虑时间滞后。具体时间定义如下：平流式沉淀池混凝剂投加量推荐模型根据沉淀池出水口处时刻的沉后水浊度的期望值以及时刻的原水及沉淀池结构化数据和矾花视频图像量化指标给出时刻的混凝剂推荐投加量，即：已知输入：时刻的原水及沉淀池结构化数据和矾花量化指标用户期望的时刻的沉后水浊度值回归输出：时刻的混凝剂投加量。2)平流式沉淀池混凝剂投加量推荐模型的选型和持续增量学习平流式沉淀池混凝剂投加量推荐模型采用与平流式沉淀池出水浊度预测模型相同的模型算法。此外，同样为缓解数据漂移引起的模型退化，以及数据不平衡的问题，平流式沉淀池混凝剂投加量推荐模型依然采用持续增量学习的方式训练模型，即，每天使用基础数据集+最近数据集进行训练，训练后的最新模型作为下一天的生产模型。通过模型每天的更新训练，使模型可以持续从新的数据中获取新知识，解决模型退化问题，最近天数参数NR与沉淀池出水浊度预测模型保持一致。3.混凝智能监控联动系统的建立通过完成的平流式沉淀池出水浊度预测模型和平流式沉淀池混凝剂投加量推荐模型，形成适用于自来水厂平流式沉淀池的混凝智能监控联动系统。智能系统实现采用系统推荐的混凝剂投加量时，能够预判沉后水浊度。当预测的沉淀池出水浊度出现异常时，系统反馈将出水浊度拉回期望值的混凝剂投加量，达到异常情况预判和应急情况下混凝剂投加量联动调整的功能。实施例：下面结合具体实施例对本发明技术方案进行进一步说明。以某实际水厂平流式沉淀池为实施例：1)模型选型训练模型的数据使用2020年4月24日到4月27日每分钟一次的矾花量化数据和混凝工艺结构化数据：矾花量化数据包括三类矾花的矾花个数、分类置信度平均数、分类置信度中位数、矾花面积平均数和矾花面积中位数。混凝工艺结构化数据包括原水结构化数据和沉淀池结构化数据。其中，原水结构化数据包括：浊度、水温、pH值、氨氮、余氯、耗氧量和亚硝酸盐；沉淀池结构化数据包括：沉淀池瞬间进水流量、沉淀池液位、加氯量和加矾量。根据对平流式沉淀池出水浊度预测模型的滞后时间定义，对以上数据进行数据对齐处理。分别使用单模型算法以及集成模型算法训练模型，使用20个小时的数据作为测试集，对各模型的测试结果进行评分。支持向量回归和决策树模型的主要区别在于，支持向量回归模型属于高方差低偏置的强模型，虽然模型得分较高，但是预测结果不稳定比较发散，如图2所示；决策树回归模型属于高偏置低方差模型，虽然模型得分较低，但是预测结果比较稳定，收敛性比较强，如图3所示。但总体而言，决策树和支持向量回归两种单模型的测试结果分数较低。支持向量回归器本身为较强回归器，并且其基本模型建立和求解过程随机性较少，因此，模型集成对于支持向量机回归器的作用不是很大，集成模型分数未见提高。随机森林在单模型建立时随机性较强，通过建立多个决策树模型组合，模型预测精度有比较大的提高，随机森林依然保持决策树预测方差较小的特点，模型整体比较稳定。因此，本实施例选择随机森林模型作为平流式沉淀池出水浊度预测模型及混凝剂投加量推荐模型的回归模型。表1单模型和集成模型算法的测试结果得分2)持续增量学习i)基础数据集的建立由于日常生产中产生的数据多为沉后水浊度处于正常范围内的数据，为解决数据不平衡问题，收集沉后水浊度处于异常范围的数据，在考虑不影响水厂日常生产的前提下，采取两种实验设置收集沉后水不同季节的异常数据。第一种设置混凝剂投加量先降低后升高，具体地，在3小时内逐渐把混凝剂投加量降到日常平均投放量的0.6倍；再将混凝剂投加量提升到日常平均投放量的2倍，持续1.5小时；然后提升混凝剂投加量到日常平均投放量的2.5倍，持续1.5小时。第二种设置混凝剂投加量持续升高，具体地，把混凝剂投加量提升到日常平均投放量的3倍，持续1.5小时；再提升混凝剂投加量到日常平均投放量的3.5倍，持续1.5小时；然后提升混凝剂投加量到日常平均投放量的4倍，持续1.5小时。实验期间收集相应的矾花量化数据和混凝工艺结构化数据。基础数据集包括日常生产范围内的数据以及实验异常范围的数据两部分。其中，具体包含2021年2月、4月和8月不同季节期间异常实验所获得的异常范围数据以及期间部分的日常范围数据，最终获得基础训练集共36665条。ii)最近数据集的选择使用基础数据集和最近数据集训练模型，最近数据集采取不同最近天数NR，对不同最近天数参数NR下训练而得的模型进行测试，并根据模型测试的得分来确定最适合的NR。测试日期前NR天的最近数据集约为24×60×NR条。例如：假设2021年8月13日为测试日期，取最近数据集天数NR＝3，则最近数据集为2021年8月10日-2021年8月12日的数据，测试当天8月13日的数据作为训练模型的测试集，以每分钟一次的数据频率，共1440条数据。实验过程中，基础数据集分别加上最近的0天-11天数据进行训练，得分见表2。在基础数据集基础上加入最近NR天数据，发现在加入最近9天数据时模型得分达到最优，因此，本实施例采取基础数据集加最近9天的数据集作为模型的训练数据集，训练沉淀池出水浊度预测模型及混凝剂投加量推荐模型。表2最近数据集天数参数NR实验3)平流式沉淀池出水浊度预测模型的验证综合前文所述，平流式沉淀池出水浊度预测模型使用随机森林模型，矾花量化数据和混凝工艺结构化数据作为输入。矾花量化数据包括三类矾花的矾花个数、分类置信度平均数、分类置信度中位数、矾花面积平均数和矾花面积中位数。混凝工艺结构化数据包括原水结构化数据以及沉淀池结构化数据，原水结构化数据包括浊度、水温、pH值、氨氮、余氯、耗氧量和亚硝酸盐，沉淀池结构化数据包括沉淀池瞬间进水流量、沉淀池液位、加氯量和加矾量。数据根据对平流式沉淀池出水浊度预测模型的滞后时间定义将数据对齐。模型输出为滞后时刻的预测浊度。模型训练采取持续增量学习方式进行模型训练，对于特定测试日期的模型，使用基础数据集+最近9天数据集作为训练集，测试集为测试日期当天的数据。i)模型训练集基础数据集包含2021年2月、4月和8月不同季节期间异常实验所获得的异常范围数据以及期间部分的日常范围数据，共36665条；最近数据集包含测试日期前9天的数据，例如：假设2021年8月13日为测试日期，则2021年8月4日-2021年8月12日的数据为最近数据集。ii)模型测试集模型测试日期为2021年8月13日-2021年8月21日期间。每日测试当天的数据，共1440条数据，作为训练模型的测试集。iii)测试结果模型在2021年8月13日到2021年8月21日测试集的表现如图6所示。模型得分R2＝0.806，平均绝对百分比误差＝0.098，证明数据收敛性比较强，表示模型预测能力强。4)平流式沉淀池混凝剂投加量推荐模型的验证混凝剂投加量推荐模型使用随机森林模型，矾花量化数据和混凝工艺结构化数据作为输入。矾花量化数据包括三类矾花的矾花个数、分类置信度平均数、分类置信度中位数、矾花面积平均数和矾花面积中位数。混凝工艺结构化数据包括原水结构化数据以及沉淀池结构化数据，原水结构化数据包括浊度、水温、pH值、氨氮、余氯、耗氧量和亚硝酸盐，沉淀池结构化数据包括沉淀池瞬间进水流量、沉淀池液位和加氯量。模型输出为当前时刻的混凝剂推荐投加量。模型训练采取持续增量学习方式进行模型训练，对于特定测试日期的模型，使用基础数据集+最近9天数据集作为训练集，测试集为测试日期当天的数据。i)模型训练集基础数据集包含2021年2月、4月和8月不同季节期间异常实验所获得的异常范围数据以及期间部分的日常范围数据，共36665条；最近数据集包含测试日期前9天的数据，例如：假设2021年8月13日为测试日期，则2021年8月4日-2021年8月12日的数据为最近数据集。ii)模型测试集模型测试日期为2021年8月13日-2021年8月21日期间。每日测试当天的数据，共1440条数据，作为训练模型的测试集。iii)测试结果模型在2021年8月13日到2021年8月21日测试集的表现如图7所示。模型得分R2＝0.798，平均绝对百分比误差＝0.038，证明数据收敛性比较强，推荐值和真实值趋势趋同。5)混凝智能监控联动系统的验证通过完成的沉淀池出水浊度预测模型和混凝剂投加量推荐模型，形成适用于自来水厂平流式沉淀池的混凝智能监控联动系统。混凝智能监控联动系统实现在采用系统推荐的混凝剂投加量时，能够预判沉后水浊度。当预测的沉淀池出水浊度出现异常时，系统反馈将出水浊度拉回期望值的混凝剂投加量，达到异常情况预判和应急情况下混凝剂投加量联动调整的功能。混凝智能监控联动系统可以在水质实时监控的基础上，达到混凝效果的精确控制、水质预警和智能联动的功能，从混凝控制管理、应急能力提升、预警时间缩短着手，使混凝沉淀工艺出水水质更稳定，提升水厂管理水平。为验证混凝智能监控联动系统对实际水厂生产的实际效果，本实施例进行了在线运行的验证实验。当沉淀池出水浊度出现略高的情况时，针对沉淀池出水期望的浊度值，在水厂两格沉淀池上分别使用人工经验投加和智能推荐投加进行混凝剂投放，比较人工经验投加和混凝剂智能推荐投加下，沉淀池出水浊度达到浊度期望值的效果差异。具体地，当沉淀池出水浊度为2.31-2.41NTU时，假设需要采取措施，将沉淀池出水浊度降低到1.0NTU的期望值，进行人工经验投加和模型智能推荐投加的比较。结果如图8所示，智能推荐投加量的浊度曲线下降比人工经验投加的浊度曲线快，并且大部分情况下更靠近浊度的期望值，智能投加的沉淀池出水浊度曲线在15:45后基本稳定在浊度期望值1.0NTU附近，人工投加的沉淀池出水浊度曲线在接近17:00才达到1.0NTU附近，按模型智能推荐进行混凝剂投加，更快接近沉后水期望的浊度值。实验结束时刻智能投加的沉后水浊度为1.02NTU，人工经验投加的沉后水浊度为1.03NTU，均达到沉淀池出水的浊度期望值。实验期间，采用智能投加时平均混凝剂投加浓度为47.28mg/L，而采用人工投加时平均混凝剂投加量为50mg/L，按模型智能推荐进行混凝剂投放，投加量降低5.4％。以上对本发明的具体实施例进行了详细描述，但其只是作为范例，本发明并不限制于以上描述的具体实施例。对于本领域技术人员而言，任何对本发明进行的等同修改和替代也都在本发明的范畴之中。因此，在不脱离本发明的精神和范围下所作的均等变换和修改，都应涵盖在本发明的范围内。
