标题title
一种基于单脉冲响应的电池阻抗谱测试方法及介质
摘要abst
本发明提供一种基于单脉响应的电池阻抗谱测试方法，包括:标记静置时间超过设定时间的电池，并在该电池需要测量阻抗谱时进行短脉冲恒流放电；记录所述短脉冲恒流放电过程的电压和电流；利用所述电压和电流计算非线性模拟等效电路的参数数据；基于所述参数数据，获得所述非线性模拟等效电路的阻抗；基于所述阻抗，绘制阻抗谱。本发明采用了非线性元件作为电池等效电路元件，可以更好地拟合实际电池在时域和频域的表现；本发明仅是采用短恒流脉冲进行测量，因此采用电池储能系统中原有变换器，甚至电池均衡电路均可实现，无需额外增添设备。
权利要求书clms
1.一种基于单脉响应的电池阻抗谱测试方法，其特征在于，包括:标记静置时间超过设定时间的电池，并在该电池需要测量阻抗谱时进行短脉冲恒流放电；记录所述短脉冲恒流放电过程的电压和电流；利用所述电压和电流计算非线性模拟等效电路的参数数据；基于所述参数数据，获得所述非线性模拟等效电路的阻抗；基于所述阻抗，绘制阻抗谱。2.根据权利要求1所述的一种基于单脉响应的电池阻抗谱测试方法，其特征在于，所述标记静置时间超过设定时间的电池，并在该电池需要测量阻抗谱时进行短脉冲恒流放电，包括：设定时间为t1；当电池静置超过所述设定时间t1时进行标记；当标记的电池需要进行测量阻抗谱时进行短脉冲恒流放电；所述短脉冲恒电流放电的脉冲时间需超过锂电池内电荷传递和扩散的时间常数；所述短脉冲恒电流放电的恒流电流能够作为SOC被动均衡电流。3.根据权利要求2所述的一种基于单脉响应的电池阻抗谱测试方法，其特征在于，所述恒流电流选为I＝0.25C，C为电池放电倍率。4.根据权利要求2所述的一种基于单脉响应的电池阻抗谱测试方法，其特征在于，所述记录短脉冲恒流放电过程的电压和电流，包括：采集短脉冲恒流放电过程前和过程中的电压和电流；采集过程结束后设定时长的恢复时间内的电压和电流。5.根据权利要求4所述的一种基于单脉响应的电池阻抗谱测试方法，其特征在于，所述采集短脉冲恒流放电过程前和过程中的电压电流，包括：采集短脉冲恒流放电过程前N个时间点采样的电压并取其均值为V1；记录短脉冲恒流放电过程时的电压变化情况；记录短脉冲恒流放电过程结束后设定时间内的电压变化情况。6.根据权利要求5所述的一种基于单脉响应的电池阻抗谱测试方法，其特征在于，所述非线性模拟等效电路包括串联的第零电阻Rdc、第一并联回路和第二并联回路；所述第一并联回路包含第一电阻R1和第一常相位元件Q1；所述第二并联回路包含第二电阻R2和第二常相位元件Q2；其中，所述第一并联回路的时间常数为τ1，τ1＝R1×Q1，其中R1表示第一电阻R1的阻值和Q1表示第一常相位元件Q1的阻抗值；所述第二并联回路的时间常数为τ2，τ2＝R2×Q2，其中R2表示第二电阻R2的阻值和Q2表示第二常相位元件Q2的阻抗值；常相位元件Q1对应的分数阶指数为α1，常相位元件Q2对应的分数阶指数为α2。7.根据权利要求6所述的一种基于单脉响应的电池阻抗谱测试方法，其特征在于，所述利用电压和电流计算非线性模拟等效电路的参数数据，包括：基于恒流短脉冲过程开始时的电池电压为V2，获得非线性模拟等效电路的电池直流内阻Rdc，Rdc＝/I；将所述非线性模拟等效电路的电压恢复过程列为表达式：其中，为Mittag-Leffler函数,vp1,vp2表示电池经过短脉冲恒流放电过程之后常相位元件上存储的电压；根据电压恢复过程表达式以及采样得到的电压恢复过程实际电压，对参数进行最小二乘拟合，得到6个参数的参考值数据。8.根据权利要求7所述的一种基于单脉响应的电池阻抗谱测试方法，其特征在于，所述基于参数数据，获得所述非线性模拟等效电路的阻抗，包括：获得短脉冲恒流放电过程最终时刻对应电压变化：其中I为短脉冲放电电流，t2为短脉冲放电时间，这6个量均为已知量，解出R1，R2；根据时间常数定义式：τ1＝R1×Q1，τ2＝R2×Q2，解出Q1、Q2。9.根据权利要求8所述的一种基于单脉响应的电池阻抗谱测试方法，其特征在于，所述基于阻抗，绘制阻抗谱，包括：列出常相位元件Q1和Q2的阻抗表达式ZQ1，ZQ2为其中ω表示角频率，结合非线性模拟等效电路连接关系以及时间常数定义式，得到最终该电池的阻抗网络的最终表达式Zbat为：基于所述Zbat的表达式绘制出电池阻抗谱。10.一种计算机可读存储介质，其特征在于，所述存储介质中存储有至少一条指令、至少一段程序、代码集或指令集，所述至少一条指令、所述至少一段程序、所述代码集或指令集由处理器加载并执行：-权利要求1-9任一项所述的一种基于单脉响应的电池阻抗谱测试方法。
说明书desc
技术领域本发明涉及电池状态管理领域，具体涉及一种基于单脉冲响应的电池阻抗谱测试方法及介质。背景技术在电池领域现有状态估算技术中，主要是采用基于电池等效电路模型的状态估计方法。现有电池等效电路模型大多基于传统电路元件，如电阻，电容，电感。然而，采用这些器件组合获得的等效电路模型无法与利用电化学阻抗测试仪测试获得的电化学阻抗谱相互对应，其最主要原因在于，电池内实际电化学过程存在高度非线性，因此其对应等效的电学元件同样需要具有非线性，然而传统电路元件均为线性元件，无法实现这一目的。此外，现有技术对于在线阻抗谱测量仍存在较大难度，通常需要进行外加电路实现阻抗测量。在实际系统中，外加阻抗测试电路会额外增加系统成本。对已封装完成的电池组而言，外加阻抗测试电路还会导致模块体积的增大，导致固定设备等尺寸均需要重新设计，不具有可操作性。发明内容针对现有技术中的缺陷，本发明的目的是提供一种基于单脉冲响应的电池阻抗谱测试方法及介质。根据本发明的一个方面，提供一种基于单脉响应的电池阻抗谱测试方法，包括:标记静置时间超过设定时间的电池，并在该电池需要测量阻抗谱时进行短脉冲恒流放电；记录所述短脉冲恒流放电过程的电压和电流；利用所述电压和电流计算非线性模拟等效电路的参数数据；基于所述参数数据，获得所述非线性模拟等效电路的阻抗；基于所述阻抗，绘制阻抗谱。优选地，所述标记静置时间超过设定时间的电池，并在该电池需要测量阻抗谱时进行短脉冲恒流放电，包括：设定时间为t1；当电池静置超过所述设定时间t1时进行标记；当标记的电池需要进行测量阻抗谱时进行短脉冲恒流放电；所述短脉冲恒电流放电的脉冲时间需超过锂电池内电荷传递和扩散的时间常数；所述短脉冲恒电流放电的恒流电流能够作为SOC被动均衡电流。优选地，所述恒流电流选为I＝0.25C，C为电池放电倍率。优选地，所述记录短脉冲恒流放电过程的电压和电流，包括：采集短脉冲恒流放电过程前和过程中的电压和电流；采集过程结束后设定时长的恢复时间内的电压和电流。优选地，所述采集短脉冲恒流放电过程前和过程中的电压电流，包括：采集短脉冲恒流放电过程前N个时间点采样的电压并取其均值为V1；记录短脉冲恒流放电过程时的电压变化情况；记录短脉冲恒流放电过程结束后设定时间内的电压变化情况。优选地，所述非线性模拟等效电路包括串联的第零电阻Rdc、第一并联回路和第二并联回路；所述第一并联回路包含第一电阻R1和第一常相位元件Q1；所述第二并联回路包含第二电阻R2和第二常相位元件Q2；其中，所述第一并联回路的时间常数为τ1，τ1＝R1×Q1，其中R1表示第一电阻R1的阻值和Q1表示第一常相位元件Q1的阻抗值；所述第二并联回路的时间常数为τ2，τ2＝R2×Q2，其中R2表示第二电阻R2的阻值和Q2表示第二常相位元件Q2的阻抗值；常相位元件Q1对应的分数阶指数为α1，常相位元件Q2对应的分数阶指数为α2。优选地，所述利用电压和电流计算非线性模拟等效电路的参数数据，包括：基于恒流短脉冲过程开始时的电池电压为V2，获得非线性模拟等效电路的电池直流内阻Rdc，Rdc＝/I；将所述非线性模拟等效电路的电压恢复过程列为表达式：其中，为Mittag-Leffler函数,vp1,vp2表示电池经过短脉冲恒流放电过程之后常相位元件上存储的电压；根据电压恢复过程表达式以及采样得到的电压恢复过程实际电压，对参数进行最小二乘拟合，得到6个参数的参考值数据。优选地，所述基于参数数据，获得所述非线性模拟等效电路的阻抗，包括：获得短脉冲恒流放电过程最终时刻对应电压变化：其中I为短脉冲放电电流，t2为短脉冲放电时间，这6个量均为已知量，解出R1，R2；根据时间常数定义式：τ1＝R1×Q1，τ2＝R2×Q2，解出Q1、Q2。优选地，所述基于阻抗，绘制阻抗谱，包括：列出常相位元件Q1和Q2的阻抗表达式ZQ1，ZQ2为其中ω表示角频率，结合非线性模拟等效电路连接关系以及时间常数定义式，得到最终该电池的阻抗网络的最终表达式Zbat为：基于上述表达式绘制出电池阻抗谱。根据本发明的第二个方面，提供一种计算机可读存储介质，所述存储介质中存储有至少一条指令、至少一段程序、代码集或指令集，所述至少一条指令、所述至少一段程序、所述代码集或指令集由处理器加载并执行：任一项所述的一种基于单脉响应的电池阻抗谱测试方法。与现有技术相比，本发明具有如下的有益效果：本发明实施例中的一种基于单脉冲响应的电池阻抗谱测试方法，采用了非线性元件作为电池等效电路元件，可以更好地拟合实际电池在时域和频域的表现；本发明实施例中的一种基于单脉冲响应的电池阻抗谱测试方法，仅是采用短恒流脉冲进行测量，因此采用电池储能系统中原有变换器，甚至电池均衡电路均可实现，无需额外增添设备。附图说明通过阅读参照以下附图对非限制性实施例所作的详细描述，本发明的其它特征、目的和优点将会变得更明显：图1是本发明的一个较佳实施例的一种基于单脉冲响应的电池阻抗谱测试方法流程示意图；图2是本发明的一个较佳实施例的对应电池电压采集标记图；图3是本发明的一个较佳实施例的等效电路阻抗网络结构示意图。具体实施方式下面结合具体实施例对本发明进行详细说明。以下实施例将有助于本领域的技术人员进一步理解本发明，但不以任何形式限制本发明。应当指出的是，对本领域的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干变形和改进。这些都属于本发明的保护范围。本发明设计一种简单的方法，通过电池模块内部已有电路或原有电池系统外部变换器实现的阻抗谱测量方法，解决现有技术中存在的上述问题。基于此，本发明提供一个实施例，一种基于单脉响应的电池阻阻抗谱测试方法，包括:S1，标记静置时间超过设定时间的电池，并在该电池需要测量阻抗谱时进行短脉冲恒流放电；S2，记录进行短脉冲恒流放电全程的电压和电流；S3，利用S2中获得的电压和电流据计算非线性模拟电路的参数数据；S4，基于S3中获得的参数数据，求出所述非线性模拟电路的阻抗；S5，根据S4中获得阻抗，绘制阻抗谱。在本发明的优选实施例中，选用的非线性等效电路模型如图3，图中，“R”表示该等效阻抗网络包含以下三个部分：第零电阻Rdc、第一并联回路、第二并联回路；这三个部分直接串联；第一并联回路包含第一电阻R1和第一常相位元件Q1；第二并联回路包含第二电阻R2和第二常相位元件Q2。第一常相位元件Q1和第二常相位元件Q2表征了电池中的非线性充放电过程，相比传统电容能更好地表征电池充放电时的电压变化趋势，也能更好地拟合实际电池阻抗谱。其中，第一并联回路的时间常数为τ1，τ1＝R1×Q1，第二并联回路的时间常数为τ2，τ2＝R2×Q2；常相位元件Q1对应的分数阶指数为α1，常相位元件Q2对应的分数阶指数为α2。在本发明的一个实施例中实施S1。具体包括：S101判断电池静置时间是否超过设定时间t1，若超过t1，则可以认为电池内部基本达到电化学平衡状态，可以对该电池进行一次恒流短脉冲放电过程；S102对超过静置时间t1的的电池进行标记；S103判断是否需要测量阻抗谱；如需要，则进行恒流短脉冲放电过程。进一步的，t1设置为30分钟；进行恒流短脉冲过程，需要保证脉冲时间超过锂电池内电荷传递和扩散的时间常数，一般可选为扩散时间常数的1～2倍，本实施例中短脉冲时间设置为t2＝10秒；恒流短脉冲可以用作SOC被动均衡，用于对该电池组中SOC相对较高的电池进行放电，从而实现SOC均衡的效果，恒流电流可以选取一较小值，可选的，I＝0.25C。在电池管理系统中存在电池SOC均衡电路，该电路如果是通过将电池将能量直接消耗掉而实现SOC均衡的话，称为被动均衡；如果是将一个电池的能量输送到另一个电池内，则称为主动均衡。这里因为是直接对该电池放电，所以可以和电池管理系统SOC被动均衡电路共用，减少系统额外成本。在本发明的另一个实施例中，基于完成S1中进行的时间为t2，幅度为I的短脉冲恒流放电，执行S2。具体的，当电池静置时长超过设定时间t1后，该电池被标记，若需测量该电池电化学阻抗谱，则启恒流短脉冲过程，记录该电池恒流短脉冲过程前N个时间点采样的电压,取其均值记为V1，记录恒流短脉冲过程中的电压变化情况；记录恒流短脉冲过程结束后t3秒内的电压变化情况。值得说明的是，无论是过程前、过程中还是过程后电池管理系统，都是以一个固定时间间隔在采集电池电压、电流，过程中的采样点数目需要根据恒流放电的时间决定，放电过程后的采样点数目需要根据设定的回复时间时长决定。进一步的，N设置为10，t3设置为10s。如图2所示，为本实施例对应电池电压采集标记图。在本发明的一个优选实例中，基于S2采集的电压电流值，实施S3。在本实施例中，对放电结束后的电池电压做最小二乘拟合，解相关参数。具体为：记恒流短脉冲过程开始时测得的电池电压为V2，如附图2所示，根据所选的电池等效电路模型计算得到电池直流内阻Rdc，Rdc＝/I；由于电阻和常相位元件并联对应的电路时域微分方程为分数阶方程，在零输入表示为：其中Dα1为分数阶微分算子，因此其最终结果可以通过分数阶微分方程求得其解析解，不过最终得出的函数为广义指数函数Mittag-Leffler函数。由于在短脉冲电流结束后的恢复阶段内，根据优选的电池模型电压恢复过程可以写为以下表达式：其中，为Mittag-Leffler函数。根据电压恢复过程表达式以及采样得到的电压恢复过程实际电压，可以对以下参数进行最小二乘拟合，由此可以得到这6个参数的参考值。在一个较优实施例中，因为无论是过程前、过程中还是过程后电池管理系统，都是以一个固定时间间隔在采集电池电压、电流。因此在判断到马上开始采样的时候进行短脉冲放电以获得V2，以保证同步性。在本发明的另一个优选实施例中，基于S3中得到的这6个参数的参考值后，可以根据短脉冲恒流放电过程中的信息，推算出的参考值，具体方式如下：短脉冲恒流放电过程最终时刻对应电压变化应为：其中I为短脉冲放电电流，t2为短脉冲放电时间，由于这6个量均为已知量，因此可以从式中解出R1，R2.再根据时间常数定义式：τ1＝R1×Q1，τ2＝R2×Q2，即可解出Q1、Q2；在本发明的另一个实施例中，基于S4得到的R1，R2，Q1，Q2实施S5.由于常相位元件Q1和Q2的阻抗表达式ZQ1，ZQ2为：再结合电路连接关系以及时间常数定义式，可以得到最终该电池的阻抗网络的最终表达式Zbat为：阻抗谱是指不同频率下，某个网络的阻抗变化情况，所以是表示为一个阻抗关于角频率)的函数。由此可以绘制出电池阻抗谱。本实施例采用了非线性元件作为电池等效电路元件，可以更好地拟合实际电池在时域和频域的表现。其仅是采用短恒流脉冲进行测量，因此采用电池储能系统中原有变换器，甚至电池均衡电路均可实现，无需额外增添设备。基于相同的发明构思，在本发明的其他实施例中，还提供一种计算机可读存储介质，所述存储介质中存储有至少一条指令、至少一段程序、代码集或指令集，所述至少一条指令、所述至少一段程序、所述代码集或指令集由处理器加载并执行：任一项所述的一种基于单脉响应的电池阻抗谱测试方法。需要说明的是，本发明提供的所述方法中的步骤，可以利用所述系统中对应的模块、装置、单元等予以实现，本领域技术人员可以参照所述系统的技术方案实现所述方法的步骤流程，即，所述系统中的实施例可理解为实现所述方法的优选例，在此不予赘述。本领域技术人员知道，除了以纯计算机可读程序代码方式实现本发明提供的系统及其各个装置以外，完全可以通过将方法步骤进行逻辑编程来使得本发明提供的系统及其各个装置以逻辑门、开关、专用集成电路、可编程逻辑控制器以及嵌入式微控制器等的形式来实现相同功能。所以，本发明提供的系统及其各项装置可以被认为是一种硬件部件，而对其内包括的用于实现各种功能的装置也可以视为硬件部件内的结构；也可以将用于实现各种功能的装置视为既可以是实现方法的软件模块又可以是硬件部件内的结构。以上对本发明的具体实施例进行了描述。需要理解的是，本发明并不局限于上述特定实施方式，本领域技术人员可以在权利要求的范围内做出各种变形或修改，这并不影响本发明的实质内容。上述各优选特征在互不冲突的情况下，可以任意组合使用。
