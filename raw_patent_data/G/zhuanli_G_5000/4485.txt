标题title
一种高层住宅建筑施工图墙体中线快速提取方法
摘要abst
本发明提供了一种高层住宅建筑施工图墙体中线快速提取方法，包括：提取待测的施工图中的门窗层、墙体层和墙柱层；将墙柱层中的承重墙合并到墙体层中，并对墙体层进行预处理操作，得到墙体整理数据；对门窗层进行预处理操作，得到门窗整理数据；对墙体整理数据进行精细化重构，得到重构墙体面数据；根据重构墙体面数据进行中线提取，得到墙体中线；根据门窗整理数据获取过窗体边框的中心线；将墙体中线和过窗体边框的中心线进行格式转换，并将转换数据进行可视化显示。本发明能够满足实际生产需要，节省了单位的人工成本，提高了准确率。
权利要求书clms
1.一种高层住宅建筑施工图墙体中线快速提取方法，其特征在于，包括：提取待测的施工图中的门窗层、墙体层和墙柱层；将所述墙柱层中的承重墙合并到所述墙体层中，并对所述墙体层进行预处理操作，得到墙体整理数据；对所述门窗层进行预处理操作，得到门窗整理数据；对所述墙体整理数据进行精细化重构，得到重构墙体面数据；采用2D简单多边形直骨架法，根据所述重构墙体面数据进行中线提取，得到墙体中线；根据所述门窗整理数据获取过窗体边框的中心线；将所述墙体中线和所述过窗体边框的中心线进行格式转换，得到转换数据，并将所述转换数据导入至计算机辅助设计软件中进行可视化显示。2.根据权利要求1所述的高层住宅建筑施工图墙体中线快速提取方法，其特征在于，所述提取待测的施工图中的门窗层、墙体层和墙柱层，包括：获取所述施工图中的各个图层；将名称中含有门窗特征标识文字的所述图层确定为所述门窗层；所述门窗特征标识文字包括：windows，door和fire；将名称中含有墙体特征标识文字的所述图层确定为所述墙体层；所述墙体特征标识文字包括：wall；将名称中含有墙柱特征标识文字的所述图层确定为所述墙柱层；所述墙柱特征标识文字包括column。3.根据权利要求1所述的高层住宅建筑施工图墙体中线快速提取方法，其特征在于，所述对所述墙体层进行预处理操作，得到墙体整理数据，包括：获取所述墙体层中的墙体悬挂线的延长线；选取所述墙体悬挂线的延长线与墙柱的相交线，使墙线、墙线延长线、墙柱线构成封闭区域，得到封闭墙面；删除所述封闭墙面中由天井构成的错误墙面，并将多个所述封闭墙面进行联通融合；根据所述封闭墙面得到所述墙体整理数据。4.根据权利要求1所述的高层住宅建筑施工图墙体中线快速提取方法，其特征在于，所述对所述门窗层进行预处理操作，得到门窗整理数据，包括：对所述门窗层中的门窗聚合体进行打散，得到门窗的外边框；提取所述外边框中四个边的长度，并取所述四个边的长边的长度作为所述外边框的属性；根据所述属性和所述外边框得到所述门窗整理数据。5.根据权利要求1所述的高层住宅建筑施工图墙体中线快速提取方法，其特征在于，所述对所述墙体整理数据进行精细化重构，得到重构墙体面数据，包括：读取所述施工图中的每层楼的外边框左上角节点数据的小数部分，并将所述小数部分作为楼层的偏移量；删除所述墙体整理数据中的直线段上多余的假节点；根据所述偏移量对所述墙体整理数据中的节点整体偏移，并根据取整规则将节点的坐标值进行取整；判断所述节点的坐标值末尾数是否为0、1、2、8或9，若是，则将所述节点的坐标值更新为0，若否，则将所述节点的坐标值更新为5；根据更新后的节点的坐标值，重构墙体面图层数据。6.根据权利要求1所述的高层住宅建筑施工图墙体中线快速提取方法，其特征在于，所述采用2D简单多边形直骨架法，根据所述重构墙体面数据进行中线提取，得到墙体中线，包括：根据所述重构墙体面数据的中线线段的角度进行筛选，得到水平中线和垂直中线；所述水平中线和所述垂直中线筛选后的中线的线段长度值为整数，所述长度值的数值个位数为0或5；将所述水平中线和所述垂直中线未相互连接的悬挂线段进行延长；所述悬挂线段的目标延伸长度为所述悬挂线周围提取的倾斜中线长度的最大值；若悬挂线的实际延伸长度小于最大值，且所述实际延伸长度为整数，且个位值为0或5，则确定为有效延伸线段；采用邻域分析法，确定变墙部分中心线中间距200mm内平行的中心线对，延长线对，并取所述墙体层中垂直于所述中心线延长线对且与所述中心线延长线相交的短线，用于变墙中心线的连接。7.根据权利要求1所述的高层住宅建筑施工图墙体中线快速提取方法，其特征在于，所述根据所述门窗整理数据获取过窗体边框的中心线，包括：搜索所述门窗整理数据的门窗边框250mm内的悬挂中心线，延长中心线，其延伸长度为门窗边框属性长边的长度加501mm，只有过门窗边框的延长线才为有效延长线；对未搜索到悬挂中心线的门窗边框，搜索250mm内的中心线进行代替，线延长处理；所有中线连接，假节点消除后，筛选所述中心线的线节点坐标值个位数不为0或5的悬挂线且长度小于1000mm的短线进行删除。
说明书desc
技术领域本发明涉及室内设计技术领域，特别是涉及一种高层住宅建筑施工图墙体中线快速提取方法。背景技术近年来，随着经济快速发展，城市房屋价格的迅速攀升，这对房屋测量的准确性提出更高的挑战，也成为房屋业主门关注焦点。房产分层分户平面图的绘制与编辑是房产测绘与管理部门日常工作的主要任务之一。其中，房屋中线的提取是房屋建筑面积计算、公用面积分摊，相关房产属性信息录入的基础。现有技术中多根椐建筑施工蓝图采用人机交互的方式来绘制房产分层分户平面图，内业绘图工作量非常大，出错率较高。如何充分利用电子版设计图来绘制房产分层分户平面图，提高绘制房产分层分户平面图的效率和准确性是急需解决的问题。发明内容为了克服现有技术的不足，本发明的目的是提供一种高层住宅建筑施工图墙体中线快速提取方法。为实现上述目的，本发明提供了如下方案：一种高层住宅建筑施工图墙体中线快速提取方法，包括：提取待测的施工图中的门窗层、墙体层和墙柱层；将所述墙柱层中的承重墙合并到所述墙体层中，并对所述墙体层进行预处理操作，得到墙体整理数据；对所述门窗层进行预处理操作，得到门窗整理数据；对所述墙体整理数据进行精细化重构，得到重构墙体面数据；采用2D简单多边形直骨架法，根据所述重构墙体面数据进行中线提取，得到墙体中线；根据所述门窗整理数据获取过窗体边框的中心线；将所述墙体中线和所述过窗体边框的中心线进行格式转换，得到转换数据，并将所述转换数据导入至计算机辅助设计软件中进行可视化显示。优选地，所述提取待测的施工图中的门窗层、墙体层和墙柱层，包括：获取所述施工图中的各个图层；将名称中含有门窗特征标识文字的所述图层确定为所述门窗层；所述门窗特征标识文字包括：windows，door和fire；将名称中含有墙体特征标识文字的所述图层确定为所述墙体层；所述墙体特征标识文字包括：wall；将名称中含有墙柱特征标识文字的所述图层确定为所述墙柱层；所述墙柱特征标识文字包括column。优选地，所述对所述墙体层进行预处理操作，得到墙体整理数据，包括：获取所述墙体层中的墙体悬挂线的延长线；选取所述墙体悬挂线的延长线与墙柱的相交线，使墙线、墙线延长线、墙柱线构成封闭区域，得到封闭墙面；删除所述封闭墙面中由天井构成的错误墙面，并将多个所述封闭墙面进行联通融合；根据所述封闭墙面得到所述墙体整理数据。优选地，所述对所述门窗层进行预处理操作，得到门窗整理数据，包括：对所述门窗层中的门窗聚合体进行打散，得到门窗的外边框；提取所述外边框中四个边的长度，并取所述四个边的长边的长度作为所述外边框的属性；根据所述属性和所述外边框得到所述门窗整理数据。优选地，所述对所述墙体整理数据进行精细化重构，得到重构墙体面数据，包括：读取所述施工图中的每层楼的外边框左上角节点数据的小数部分，并将所述小数部分作为楼层的偏移量；删除所述墙体整理数据中的直线段上多余的假节点；根据所述偏移量对所述墙体整理数据中的节点整体偏移，并根据取整规则将节点的坐标值进行取整；判断所述节点的坐标值是否为0、1、2、8或9，若是，则将所述节点的坐标值更新为0，若否，则将所述节点的坐标值更新为5；根据更新后的节点的坐标值确定所述重构墙体面数据。优选地，所述采用2D简单多边形直骨架法，根据所述重构墙体面数据进行中线提取，得到墙体中线，包括：根据所述重构墙体面数据的中线线段的角度进行筛选，得到水平中线和垂直中线；所述水平中线和所述垂直中线筛选后的中线的线段长度值为整数，所述长度值的数值个位数为0或5；将所述水平中线和所述垂直中线未相互连接的悬挂线段进行延长；所述悬挂线段的目标延伸长度为所述悬挂线周围提取的倾斜中线长度的最大值；若悬挂线的实际延伸长度小于最大值，且所述实际延伸长度为整数，且个位值为0或5，则确定为有效延伸线段；采用邻域分析法，确定变墙部分中心线中间距200mm内平行的中心线延长线对，并取所述墙体层中垂直于所述中心线延长线对且与所述中心线延长线相交的短线，用于变墙中心线的连接。优选地，所述根据所述门窗整理数据获取过窗体边框的中心线，包括：搜索所述门窗整理数据的门窗边框250mm内的悬挂的中心线；对未搜索到悬挂中心线的门窗边框，搜索250mm内的中心线进行代替；所有中线连接，假节点消除后，筛选所述中心线的线节点坐标值个位数不为0或5的悬挂线且长度小于1000mm的短线进行删除。根据本发明提供的具体实施例，本发明公开了以下技术效果：本发明提供了一种高层住宅建筑施工图墙体中线快速提取方法，包括：提取待测的施工图中的门窗层、墙体层和墙柱层；将所述墙柱层中的承重墙合并到所述墙体层中，并对所述墙体层进行预处理操作，得到墙体整理数据；对所述门窗层进行预处理操作，得到门窗整理数据；对所述墙体整理数据进行精细化重构，得到重构墙体面数据；采用2D简单多边形直骨架法，根据所述重构墙体面数据进行中线提取，得到墙体中线；根据所述门窗整理数据获取过窗体边框的中心线；将所有提取中线连接，假节点消除，删除线节点坐标值个位数不为0或5的悬挂线后，进行数据格式转换，并将所述转换数据导入至计算机辅助设计软件中进行可视化显示。实现每层每户封闭的墙体中线的快速自动提取，且满足中线线段长度数值为整数，且数据个位数为0或5的精度要求。本发明针对高层建筑结构的施工图，实现了墙体中线的全自动提取，人工干预度少，速度快，精度高等特点，完全满足于分层分户图制作，房屋建筑面积量算的要求。经生产单位实践测算，提取中线的准确率在95以上，辅以人工的核对和修改，完全满足实际生产需要，节省了单位的人工成本，提高了准确率。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例提供的方法流程图；图2为本发明实施例提供的基于施工图提取的某层门窗、墙体和墙柱数据成果示意图；图3为本发明实施例提供的某层提取的房屋分层分户的中心线成果图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本文中提及“实施例”意味着，结合实施例描述的特定特征、结构或特性可以包含在本申请的至少一个实施例中。在说明书中的各个位置出现该短语并不一定均是指相同的实施例，也不是与其它实施例互斥的独立的或备选的实施例。本领域技术人员显式地和隐式地理解的是，本文所描述的实施例可以与其它实施例相结合。本申请的说明书和权利要求书及所述附图中的术语“第一”、“第二”、“第三”和“第四”等是用于区别不同对象，而不是用于描述特定顺序。此外，术语“包括”和“具有”以及它们任何变形，意图在于覆盖不排他的包含。例如包含了一系列步骤、过程、方法等没有限定于已列出的步骤，而是可选地还包括没有列出的步骤，或可选地还包括对于这些过程、方法、产品或设备固有的其它步骤元。本发明的目的是提供一种高层住宅建筑施工图墙体中线快速提取方法，能够满足实际生产需要，节省了单位的人工成本，提高了准确率。为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。图1为本发明实施例提供的方法流程图，如图1所示，本发明提供了一种高层住宅建筑施工图墙体中线快速提取方法，包括：步骤100：提取待测的施工图中的门窗层、墙体层和墙柱层；步骤200：将所述墙柱层中的承重墙合并到所述墙体层中，并对所述墙体层进行预处理操作，得到墙体整理数据；步骤300：对所述门窗层进行预处理操作，得到门窗整理数据；步骤400：对所述墙体整理数据进行精细化重构，得到重构墙体面数据；步骤500：采用2D简单多边形直骨架法，根据所述重构墙体面数据进行中线提取，得到墙体中线；步骤600：根据所述门窗整理数据获取过窗体边框的中心线；步骤700：将所述墙体中线和所述过窗体边框的中心线进行格式转换，得到转换数据，并将所述转换数据导入至计算机辅助设计软件中进行可视化显示。优选地，所述步骤100具体包括：获取所述施工图中的各个图层；将名称中含有门窗特征标识文字的所述图层确定为所述门窗层；所述门窗特征标识文字包括：windows，door和fire；将名称中含有墙体特征标识文字的所述图层确定为所述墙体层；所述墙体特征标识文字包括：wall；将名称中含有墙柱特征标识文字的所述图层确定为所述墙柱层；所述墙柱特征标识文字包括column。具体的，如图2所示，本实施例中基于施工图，构建数据转换器，分别提取门窗层，墙体和墙柱层。按照施工图设计标准，图层名中含有windows，door和fire等文字的提取为门窗层，含有wall的文字的提取为墙体层，含有column的，提取为墙柱层。优选地，所述步骤200具体包括：获取所述墙体层中的墙体悬挂线的延长线；选取所述墙体悬挂线的延长线与墙柱的相交线，使墙线、墙线延长线、墙柱线构成封闭区域，得到封闭墙面；删除所述封闭墙面中由天井构成的错误墙面，并将多个所述封闭墙面进行联通融合；根据所述封闭墙面得到所述墙体整理数据。具体的，本实施例中进行了第一次的数据整理，即墙体构面。首先构建数据转换器，将墙柱层中承重墙合并到墙体层中，由于墙柱的存在造成部分墙体不封闭，通过墙体悬挂线的延长线，选取与墙柱的相交线，使墙线，墙线延长线，墙柱线构成的封闭区域，线构面，最终形成封闭的墙面。并添加“井”字标识，删除由于天井构成的错误墙面。多个封闭小墙面融合一个联通的大墙面。优选地，所述步骤300具体包括：对所述门窗层中的门窗聚合体进行打散，得到门窗的外边框；提取所述外边框中四个边的长度，并取所述四个边的长边的长度作为所述外边框的属性；根据所述属性和所述外边框得到所述门窗整理数据。具体的，本实施例进行了第二次的数据处理，即提取门窗的外边框。首先构建数据转换器，打散门窗聚合体，生成要数外边框，构面，面融合，再生成外边框。提取边框的4个边的长度，取长边的长度做为外边框的属性。优选地，所述步骤400具体包括：读取所述施工图中的每层楼的外边框左上角节点数据的小数部分，并将所述小数部分作为楼层的偏移量；删除所述墙体整理数据中的直线段上多余的假节点；根据所述偏移量对所述墙体整理数据中的节点整体偏移，并根据取整规则将节点的坐标值进行取整；判断所述节点的坐标值是否为0、1、2、8或9，若是，则将所述节点的坐标值更新为0，若否，则将所述节点的坐标值更新为5；根据更新后的节点的坐标值确定所述重构墙体面数据。进一步地，本实施例中对墙体层数据进行平移、取整和合并重构。通过墙体层数据边框提取，融合，生成不同楼层的外边框数据。读取每层楼的外边框左上交节点数据的小数部分作为楼层的偏移量。自定义转换器，删除一条直线段上多余的假节点，保证一条直线上只保留首尾节点，相邻两条直线间夹角90度。通过墙体层数据的节点整体偏移，四舍五入，节点坐标值取整，节点重构墙体面，保证墙体层每个节点坐标都为整数值。由于每层的墙体施工图起始点坐标不同，采用逐层整体平移各层起始坐标的小数部分，墙体坐标点再经四舍五入处理后，保留整数部分。墙体层的线文件中，如果存在两根相邻直线相交夹角接近0度或180度左右时，则消除此假节点，合并成一根直线，一条直线上只保留首尾节点，最终重构墙体层面文件。经过处理后，构成墙体层的节点坐标值都是整数值，且相邻的两根直线夹角都为90度，没有冗余的坐标节点，此部分是保证墙体中线提取效果的基础。本实施例中还进一步对墙体层节点坐标末尾值0和5进行更新，重构墙体面文件。提取墙体层节点坐标，如果节点坐标的个位数为0、1、2、8、9时，更新坐标个位值为0；如果节点坐标的个位数为3、4、6、7时，更新坐标个位值为5。节点重构墙体层文件，保证墙体层面文件中，每个节点的坐标值都是0或5结尾，每条墙体线长度个位数是0或5。此部分是保证提取的墙体中心线长度个位数为0或5，节点坐标个位数为0或5的前提条件。优选地，所述步骤500具体包括：根据所述重构墙体面数据的中线线段的角度进行筛选，得到水平中线和垂直中线；所述水平中线和所述垂直中线筛选后的中线的线段长度值为整数，所述长度值的数值个位数为0或5；将所述水平中线和所述垂直中线未相互连接的悬挂线段进行延长；所述悬挂线段的目标延伸长度为所述悬挂线周围提取的倾斜中线长度的最大值；若悬挂线的实际延伸长度小于最大值，且所述实际延伸长度为整数，且个位值为0或5，则确定为有效延伸线段；采用邻域分析法，确定变墙部分中心线中间距200mm内平行的中心线延长线对，并取所述墙体层中垂直于所述中心线延长线对且与所述中心线延长线相交的短线，用于变墙中心线的连接。进一步地，本实施例还对墙体层中线进行了提取和连接。采用2D简单多边形直骨架法提取墙体中线，计算中线的角度，提取水平和竖直的墙体中线，悬挂线段筛选，悬挂线延伸长度取其周围斜线的最大值作为延伸长度，墙中线相交打断，如果悬挂线延伸的长度小于最大值，长度为整数且个位值为0或5，为有效延伸线段，线连接，删除其他不符合条件的延伸线段。对于墙厚发生变化的变墙中线的连接，通过邻域分析，找出相互平行且线间距离在200mm内的中心线延长线对，在墙体线图层中提取垂直于中心线延长线对且与线对相交的短线，用于变墙中心线的连接线段。中心线连接，去掉直线内的假节点，最终获取位于墙体内的连接完整的墙体中心线。优选地，所述步骤600具体包括：搜索所述门窗整理数据的门窗边框250mm内的悬挂中心线；对未搜索到悬挂中心线的门窗边框，搜索250mm内的中心线进行代替；筛选所述中心线的线节点坐标值个位数不为0或5的悬挂线且长度小于1000mm的短线进行删除。如图3所示，本实施例中最后一个步骤为过门窗层的中线连接。通过每个门窗的外边框邻域搜索250mm内的悬挂的中心线，悬挂线延伸，线延伸长度为边框属性中长边的长度加501mm。对于没有搜索到悬挂线的边框，提取边框周围250mm内的中心线，线延伸长度为边框属性中长边的长度加501mm。所有延长线只有过门窗边框的延长线才为有效延长线。所有中心线连接，假节点消除，筛选直线节点坐标值个位数不为0或5的悬挂线且长度小于1000mm的短线删除，其余悬挂线保留，查明悬挂原因是否为多提的线，还是有中心线漏提导致不封闭。将封闭的中心线和悬挂的中心线导成dxf格式，在cad中检验提取的外墙中心线效果。具体的，本实施例基于门窗边框，通过搜索250mm内的悬挂中心线。其次，对没有搜索到悬挂中心线的门窗边框，搜索250mm内的中心线代替。线延长长度为门窗属性中挂接的长度加501mm，且只有通过的门窗的中心线才为有效延伸。筛选线节点坐标值个位数不为0或5的悬挂线且长度小于1000mm的短线删除。经过处理后墙体中心线经过门窗部分自动闭合，所有封闭中心线满足长度为整数，个位数部分为0或5要求。对于保留的悬挂中心线，要对照原图分析原因，决定是否删除，保证心线提取的准确性，不能有遗漏现象。本发明的有益效果如下：本发明针对高层建筑结构的施工图，实现了墙体中线的全自动提取，人工干预度少，速度快，精度高等特点，完全满足于分层分户图制作，房屋建筑面积量算的要求。经生产单位实践测算，提取中线的准确率在95以上，辅以人工的核对和修改，完全满足实际生产需要，节省了单位的人工成本，提高了准确率。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处。综上所述，本说明书内容不应理解为对本发明的限制。
