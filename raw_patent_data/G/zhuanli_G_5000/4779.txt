标题title
一种面向大宗物流的运输终点校准方法及系统
摘要abst
本发明公开了一种面向大宗物流的运输终点校准方法，包括：基于运单时间信息，提取货车运单轨迹；消除轨迹中速度异常轨迹点，获取每个轨迹点的匹配道路；从驶离道路部分的轨迹点序列中获取速度为零的子序列中的停留点，聚类产生停留区域；将停留区域中的停留点对应的道路转出点，产生道路转出点簇，选取簇中心点位置获得停留区域对应的道路转出位置；根据道路转出位置合并停留区域，获得停留热点；提取各类特征并拼接获得多维特征向量对停留热点进行表征；利用停留热点的特征向量和标签训练分类模型，作为运输终点识别模型；将待识别的运输热点的特征向量输入构建的识别模型，获得各运单匹配的运输终点，并对终点进行更新。
权利要求书clms
1.一种面向大宗物流的运输终点校准方法，其特征在于，所述方法包含以下步骤：步骤S1、基于货车运单的开始时间和完成时间，提取货车在运单时间段内的轨迹点序列作为运单轨迹；步骤S2、消除轨迹中速度值大于速度阈值的轨迹点，并寻找获得每个轨迹点的匹配路段，无法匹配的视为驶离道路的部分；步骤S3、从步骤S2中驶离道路部分的轨迹点序列中提取速度值为0的子序列，将所述子序列中的第一个轨迹点作为停留点，将所有停留点聚类后产生停留点簇，作为停留区域；步骤S4、根据步骤S3中停留区域获得停留区域中的停留点对应的道路转出点，对所有道路转出点分组聚类产生道路转出点簇，选择道路转出点数量最多的簇中心点位置作为停留区域对应的道路转出位置；步骤S5、将步骤S4中道路转出位置对应的所有停留区域进行合并，获得停留热点；步骤S6、从停留热点及其对应的信息中提取访问行为特征和区域特征，对特征值进行拼接获得多维向量对停留热点进行表征；步骤S7、利用停留热点的特征向量和标签训练XGBoost分类模型，作为运输终点识别模型；步骤S8、基于运单轨迹提取与每个运单的运输终点匹配的候选停留热点集，将其对应的特征向量输入S7构建的运输终点识别模型，获得各运单匹配的运输终点，并对终点库中对应运输终点的位置与地址信息进行更新。2.如权利要求1所述的运输终点校准方法，其特征在于，步骤S1中，对每辆货车按照其执行不同运单的开始时间对运单进行排序；若前序运单与后续运单有时段交叠，则将前序运单的任务完成时间调整到后续运单任务开始之前。3.如权利要求1所述的运输终点校准方法，其特征在于，步骤S2中，所述轨迹中的轨迹点速度通过与前序轨迹点的距离和时间间隔计算获得；所述速度阈值设置为运输车辆的最高限速；将距离轨迹点距离阈值thrr范围内的候选道路作为隐马尔科夫模型的隐状态，将轨迹点与临近候选道路垂直映射点的距离作为状态测量，轨迹点的最佳匹配路段通过Viterbi算法寻找获得。4.如权利要求1所述的运输终点校准方法，其特征在于，步骤S3中，所述停留点的时间戳作为停留开始时间，并计算该轨迹点所在序列第一个点与最后一个点之间的时间间隔作为停留时长；所述停留点的聚类通过DBSCAN聚类方法进行；所述停留点簇为密度相连的停留点的最大集合。5.如权利要求4所述的运输终点校准方法，其特征在于，所述DBSCAN聚类方法首先随机选择一个停留点，搜索与所述停留点距离小于密度相连最小距离eps的其它停留点集，若停留点数量大于产生一个簇的最小停留点数minsample，则将该点建立一个簇，否则将该停留点标记为噪声；随后，遍历其他停留点，直到建立一个簇，并将直接密度可达的停留点合并到该簇中；迭代上述步骤直到所有的停留点均被聚类为簇或被标记为噪声点为止；至此，将每个停留点簇视为一个停留区域；所述直接密度可达的停留点是指与簇中任一停留点的距离小于eps。6.如权利要求1所述的运输终点校准方法，其特征在于，步骤S4中，提取停留区域的停留点所在运单轨迹中与最近邻路段匹配的最后一个轨迹点作为该停留点对应的道路转出点，并将该道路转出点指向后续轨迹点的朝向作为该道路转出点的方向；获取与每个停留区域中停留点对应的道路转出点集，随后采用Meanshift聚类方法对道路转出点进行聚类。7.如权利要求6所述的运输终点校准方法，其特征在于，所述Meanshift方法随机选择其中的一个道路转出点，并计算该道路转出点半径R内的其他道路转出点之间的向量距离的平均值，作为该道路转出点下一步的漂移方向和距离，循环上述漂移步骤直到漂移距离小于参数D，随后将上述遍历到的道路转出点归类为一个簇；提取道路转出点数量最多的簇的中心点的经纬度坐标作为道路转出位置，并计算该簇中所有道路转出点的平均方向得到道路转出位置的方向。8.如权利要求1所述的运输终点校准方法，其特征在于，步骤S5中，对于S4提取的道路转出位置集合，采用层次聚类方法进行聚类生成不同组，合并每组道路转出位置对应的停留区域获得停留热点；利用凸包算法获得停留热点的区域范围，计算其中心位置作为停留热点的位置；并统计每个停留热点中停留点集对应的运单号列表、停留时长列表以及停留开始时间列表予以保存。9.如权利要求1所述的运输终点校准方法，其特征在于，步骤S6进一步包括如下步骤：步骤6.1、停留时长分布特征提取：划分下述的时长区间：，,,……,}，并通过公式获得停留热点区域的面积；步骤6.8、将上述对应特征向量依次拼接形成一个多维的向量作为停留热点的特征表示。10.如权利要求1所述的运输终点校准方法，其特征在于，基于人工标注的停留热点样本集{h1,h2,……,hq}，利用S6所述方法将所有标注的停留热点样本表征为特征向量，并利用所述停留热点样本的特征向量及正负样本标签通过XGBoost模型迭代地学习M棵回归树，所述回归树表示为fk，1≤k≤M，所述回归树的构建过程如下：其中，L为第t次迭代时的目标函数，yi为第i个停留热点样本hi的真实标签，表示训练样本hi在第t-1次模型迭代时模型的预测值，ft表示停留热点样本hi在第t次模型迭代时模型的预测值；Γ是正则项，η和λ为正则项系数，T为叶子节点的数量，wj表示第j个叶子节点的输出值；通过对M棵回归树的输出分数求和获得停留热点hi的分数，即Scori＝f1+f2+…+fM，通过逻辑函数将其映射为概率值输出，以训练得到的模型作为最终的运输终点识别模型。11.如权利要求1所述的运输终点校准方法，其特征在于，对于每个待校准的运输终点，提取其对应的运单轨迹集，根据运单列表中包含运单集中的至少一个运单轨迹为条件搜索对应的停留热点构成候选集，并将其对应的特征向量输入由S7构建的运输终点识别模型，以模型输出概率值最大的停留热点作为与运单匹配的运输终点；随后，利用高德地图的逆地理编码服务API获取该运输终点的地址，据此完成对应原始终点的位置校准与地址的更新。12.一种实现如权利要求1-11之任一项所述运输终点校准方法的运输终点校准系统，其特征在于，所述运输终点校准系统包括：数据预处理模块、停留热点挖掘模块、终点库更新模块；所述数据预处理模块用于基于任务时段的运单轨迹截取，基于速度异常的轨迹点去噪，基于Viterbi算法的地图匹配；所述停留热点挖掘模块用于基于DBSCAN的停留点聚类、基于Meanshift的道路驶离位置识别、基于层次聚类的停留点簇合并；所述终点库更新模块用于基于行为-区域的特征集提取、基于XGBoost的运输终点建模、运输终点识别与校准。
说明书desc
技术领域本发明属于数据挖掘技术领域，涉及一种面向大宗物流的运输终点校准方法及系统。背景技术在大宗货运领域，大型制造企业的客户收货地点作为常用的运输终点存储于地址库中，服务于车辆调度、路径规划、运费结算等物流应用。然而，由于地址人为录入错误以及收货地点的变迁等原因，地址库中存在一些地址模糊甚至错误的运输终点，为大宗物流的运输环节带来了极大挑战。随着定位设备的普及，运输车辆持续产生的历史行驶轨迹与运单等数据，为运输终点的校准提供了数据基础。综上所述，为保证货运环节的高效运转，亟需设计基于运单轨迹的运输终点校准方法，及时对地址库错误的运输终点进行更新。随着快件业务的迅猛发展，快件交付地点的校准被广泛关注，它们主要通过快递人员在完成快件递送时标记的位置识别真实的交付地点完成校准。然而，大宗货运司机的延时返单的现象时有发生，即货运司机返单时的位置与实际的运输终点位置具有较大偏差，不能直接应用于大宗物流运输终点的校准。同时，由于大宗货运的“长距离运输”特性，货运司机通常会于运输旅程中在加油站、临时休息区等地点停留，这些停留热点与运输终点彼此紧邻，并且它们大小不一、甚至可能具有多个停留区域，这为大宗物流运输终点的准确定位和识别带来了挑战。发明内容为了解决现有技术存在的不足，本发明的目的是提供一种面向大宗物流的运输终点校准方法。本发明基于卡车通常于道路上相近的位置转向驶离并进入同一个停留热点这一观察，提出了基于道路转出位置的停留热点识别方法。首先，基于DBSCAN方法聚类停留点挖掘停留区域；采用Meanshift方法定位道路转出点密集位置，作为对应停留区域的道路转出位置；然后，通过层次聚类方法识别位置邻近的道路转出位置并合并对应的停留区域以获得停留热点；随后，为准确识别运输终点，本发明基于停留热点的行为特征以及区域特征，构建XGBoost运输终点识别模型；最后，运用该模型完成终点库的更新。进一步地，本发明的第一阶段首先对已有的运输数据进行预处理，匹配运单与原始轨迹获取运单轨迹集，并对运单轨迹进行去噪以及地图匹配等轨迹预处理步骤；本发明第二阶段为停留热点挖掘，采用DBSCAN聚类运单轨迹中的停留点识别停留区域，为准确识别到具有多个停留区域的停留热点，提出一个基于道路转出位置的停留区域合并策略，基于Meanshift方法聚类道路转出点提取停留区域的道路转出位置，随后，通过层次聚类方法对道路转出位置进行分组以合并对应的停留区域获得停留热点；本发明第三个阶段首先提取停留热点的行为特征集以及区域特征集，并基于XGBoost构建运输终点识别模型，最后利用该模型识别运输终点完成其位置校准和地址更新。为实现上述技术目的，本发明采取的技术方案为：本发明提出了一种面向大宗物流的运输终点校准方法，包含以下步骤：S1：运单轨迹提取，对每辆货车按照其执行不同运单的开始时间对运单进行排序，其中，对于与后续运输任务发生时段有交叠的部分前序运单，以前序运单的任务完成时间不得晚于后续运单的开始时间为条件对其任务完成时间进行调整；随后，基于运单的开始时间与完成时间提取对应车辆位于该时段内的轨迹点序列作为运单轨迹。S2：运单轨迹预处理，基于相邻轨迹点之间的距离以及时间间隔计算运单轨迹中每个轨迹点的速度，并将速度值大于给定速度阈值的轨迹点作为异常轨迹点予以消除。同时，将距离轨迹点一定距离阈值thrr范围内的候选道路作为隐马尔科夫模型的隐状态，将轨迹点与邻近道路垂直映射点的距离作为状态测量，并利用Viterbi算法寻找每个轨迹点的匹配路段。在此基础上，运单轨迹中无法匹配道路的轨迹点序列被视为驶离道路的部分。S3：停留区域挖掘，对于各条运单轨迹在S2步骤中提取获得的驶离道路的轨迹点序列，从驶离道路的轨迹点序列中提取其中速度值为零的所有轨迹点子序列，并将所有零速度轨迹点子序列中的第一个轨迹点作为停留点，即将零速度轨迹点子序列中的第一个轨迹点位置视为运输车辆的停留位置。随后，考虑到DBSCAN方法可以在有噪声的空间数据库中发现任意形状的聚类簇，适合于停留区域不规则的特性。因此，利用DBSCAN聚类方法对所有的停留点进行聚类，继而产生多个停留点密度较大的停留点簇，将每个停留点簇视为一个停留区域。S4：道路转出位置提取，基于卡车通常于道路上相近的位置转出驶入同一个停留热点这一观察，即卡车驶离道路的转出点彼此邻近，本发明基于道路转出位置识别属于同一个停留热点的多个停留区域。因此，对于S3获得的停留区域，将其中的各个停留点所在运单轨迹中与最邻近道路匹配的最后一个轨迹点作为该停留点对应的道路转出点；在此基础上，获取与每个停留区域对应的道路转出点集合；最后，考虑到Meanshift聚类方法可以准确定位到数据分布密度较密集的位置，利用Meanshift聚类方法对道路转出点进行分组产生多个道路转出点簇，选择其中道路转出点数量最多的簇中心点位置作为停留区域对应的道路转出位置。S5：停留区域合并，将与各道路转出位置对应的所有停留区域进行合并。对于S4提取的道路转出位置集合，采用层次聚类方法进行聚类生成不同组，合并每组道路转出位置对应的停留区域获得停留热点；对于每个停留热点，利用凸包算法获取包含对应停留热点中所有停留点的最小凸多边形，将其作为该停留热点的区域范围；同时，计算所有停留区域的中心位置，将其作为该停留热点的位置；随后，对于每个停留热点，统计其包含的停留区域集的停留时长列表、停留开始时间列表以及运单号列表等信息。S6：特征提取，基于S5获得的停留热点以及对应的停留时长列表、停留开始时间列表、运单号列表等信息，分别提取停留时长、访问时段、停留频次、货物类型等访问行为特征，以及邻近道路、附近的POI和停留区面积等区域特征，并依次将对应的特征值进行拼接形成一个多维的向量以表征每一个停留热点。提取停留时长、访问时段、停留频次、货物类型等访问行为特征组成行为特征集，邻近道路、附近的POI和停留区面积等区域特征组成区域特征集。S7：运输终点建模，提取运输终点集作为正样本，人工标注临时休息区、加油站、维修点等货运车辆时常访问的停留地点作为负样本，利用S6所述方法将所有样本表征为特征向量，最后利用这些停留热点样本的特征向量及其标签训练XGBoost分类模型，即构建一个包含多棵回归树的二分类模型；所述用于训练XGBoost分类模型的标签是表示正负样本的标签。S8：运输终点库更新，基于运单轨迹提取与每个运单的运输终点匹配的候选停留热点集，将其对应的特征向量输入S7构建的运输终点识别模型，以模型输出概率值最大的停留热点作为与各运单匹配的运输终点，随后，利用高德地图的逆地理编码服务接口获取对应位置的地址文本信息，据此对终点库中对应运输终点的位置与地址信息进行更新。为优化上述技术方案，各步骤中采取的具体措施还包括：上述的步骤S1具体包括：考虑到货运司机的延迟返单行为可能造成连续两个运单任务发生时段具有交叠的情况，本发明首先按照每辆货车执行不同运单的开始时间对运单进行排序；其次，提取其中任务发生时间段有交叠的运单序列，将前序运单的结束时间调整于其后续运单的开始时间之前；最后，根据每辆货车不同运单的开始时间和完成时间提取各运单对应的轨迹，即运单轨迹。上述的步骤S2具体包括：由于定位设备信号中断以及人为原因，采样得到的轨迹数据中可能会存在一些表现异常的点，即与前序轨迹点采样间隔正常但距离较远的轨迹点。这些表现异常的点也被称作噪声点，本发明中主要是速度异常的噪声轨迹点，将影响后续停留点的准确识别，进一步影响停留区域的精准定位。因此，本发明根据与前序轨迹点的距离和时间间隔计算每个轨迹点的速度，将速度大于阈值thrsp的轨迹点视为噪声点并予以消除，所述速度阈值设置为运输车辆的最高限速；同时，将距离轨迹点一定距离阈值thrr范围内的候选道路作为隐马尔科夫模型的隐状态，将轨迹点与临近候选道路垂直映射点的距离作为状态测量，并利用Viterbi算法寻找每个轨迹点的最佳匹配路段作为其对应的行驶路段。在此基础上，运单轨迹中无法匹配道路的轨迹点序列被视为驶离道路的轨迹点序列。上述的步骤S3具体包括：为避免由于等待红绿灯以及交通拥堵等情况产生的停留点对识别停留区域的影响，该步骤只关注未匹配的轨迹点序列。因此，对于各条运单轨迹在S2步骤中获得的驶离道路的轨迹点序列，对于其中连续的零速度轨迹点子序列，提取该子序列中的第一个轨迹点作为停留点，将该点的时间戳作为停留开始时间，并计算该轨迹点所在序列第一个点与最后一个点之间的时间间隔作为停留时长。并采用DBSCAN聚类方法对所有停留点进行聚类，DBSCAN方法首先随机选择一个停留点，搜索与该停留点距离小于eps的其它停留点集，若停留点数量大于minsample，则将该点建立一个簇，否则将该停留点标记为噪声；随后，遍历其他停留点，直到建立一个簇，并将直接密度可达的停留点合并到该簇中；迭代上述步骤直到所有的停留点均被聚类为簇或被标记为噪声点为止。至此，将每个停留点簇视为一个停留区域，所述的停留点簇为密度相连的停留点的最大集合，为避免将道路两侧的停留点聚类为同一个簇，根据最小道路的宽度设置聚类参数eps为5米、minsample为5。本发明中，聚类参数的设定主要根据聚类目的和实际的场景进行设置，本发明根据实际应用场景中路段的最小的宽度设置聚类半径eps为5米，即位于道路两侧的停留点的距离大于5米，则不会被聚类为一个停留点簇，而minsample主要根据经验进行设置。上述的步骤S4具体包括：基于S3获得的停留区域，提取其中停留点所在运单轨迹中与最近邻路段匹配的最后一个轨迹点作为该停留点对应的道路转出点，并将该道路转出点指向后续轨迹点的朝向作为该道路转出点的方向；在此基础上，获取与每个停留区域中停留点对应的道路转出点集，随后采用Meanshift聚类方法对道路转出点进行聚类。Meanshift方法随机选择其中的一个道路转出点，并计算该道路转出点给定半径R内的其他道路转出点之间的向量距离的平均值，作为该道路转出点下一步的漂移方向和距离，循环上述漂移步骤直到漂移距离小于给定参数D，随后将上述遍历到的道路转出点归类为一个簇。所述聚类参数R、D分别被经验设置为30米、10米。本发明中，根据实际的应用场景中道路转出点的分布进行经验地设置的，即认为，距离小于30米的道路转向点为一个道路转出位置。而10米作为聚类簇质心更新的收敛条件。最后，提取道路转出点数量最多的簇的中心点的经纬度坐标作为道路转出位置，并计算该簇中所有道路转出点的平均方向得到道路转出位置的方向。上述的步骤S5具体包括：对于S4提取的道路转出位置集合，采用层次聚类方法生成不同的转出位置组。具体地，首先将每个道路转出位置视为一个簇，将距离最小且方向差小于阈值thrdir的道路转出位置簇进行合并；其次，重新计算合并簇的平均位置和平均方向；上述步骤被迭代执行直至不存在距离小于距离阈值thrdis且方向差小于thrdir的簇为止；随后，将每组道路转出位置对应的停留区域进行合并获得停留热点；对于每个停留热点，利用凸包算法提取覆盖其所有停留点的最小凸多边形，将其作为停留热点的区域范围，计算其中心位置作为停留热点的位置。最后，分别统计每个停留热点中停留点集对应的运单号列表、停留时长列表以及停留开始时间列表等予以保存。上述的步骤S6具体包括：步骤6.1)停留时长分布特征提取：据观察，卡车在运输终点发生的停留行为通常耗时30至60分钟，在加油站停留耗时10至15分钟，而在休息区、维修点等停留热点停留耗时达数个小时。因此，本发明划分下述的时长区间：，访问时段分布特征提取：基于停留开始时间列表统计每个时段内的停留点数量占比，拼接形成对应停留热点关于24小时中每个小时停留点数量占比的该特征表示。步骤6.3)停留频次分布特征提取：将停留频次分布特征表示为一个向量，其中n表示所有运输车辆中在一个停留热点的历史最高停留频次，这里frei表示在一个停留热点中停留i次的运输任务数量占比，其值是根据对应的运单列表统计得到。步骤6.4)货物类型种类特征提取：根据运单列表统计对应停留热点涉及的货物类型数量表示该特征。步骤6.5)邻近道路级别特征提取：基于OSM开源地图提取距离停留热点最近的路段获取其道路级别，采用独热编码的方式表示该特征。步骤6.6)附近POI类别特征提取：据调研，在大宗物流领域，运输终点附近通常有大量工厂、公司；运输司机倾向于选择餐厅附近的空地停留休息方便用餐；而加油站、维修点等停留热点通常位于汽车维护类型的POI聚集区域中。因此，对于任一停留热点，本发明基于高德地图提供的POI查询接口获取其3000米范围内的工厂、公司、餐饮、汽车维护以及加油站等类型POI的数量，再计算不同类型POI的占比，继而对其进行拼接生成停留热点的该特征表示。步骤6.7)停留区域面积特征提取：基于S5步骤获得的停留热点的区域范围，将其对应的凸多边形表示为顶点序列{,,……,}，并通过公式获得停留热点区域的面积。步骤6.8)最终，将上述对应特征向量依次拼接形成一个多维的向量作为停留热点的特征表示。上述的步骤S7具体包括：通过人工标注的停留热点样本集{h1,h2,……,hq}，用于运输终点识别模型的训练。利用S6所述方法将所有标注的停留热点样本表征为特征向量，并利用这些停留热点样本的特征向量及其标签通过XGBoost模型迭代地学习M棵回归树)，构建过程如下：其中，L为第t次迭代时的目标函数，yi为第i个停留热点样本hi的真实标签，表示训练样本hi在第t-1次模型迭代时模型的预测值，ft表示停留热点样本hi在第t次模型迭代时模型的预测值；Γ是正则项，η和λ为正则项系数，T为叶子节点的数量，wj表示第j个叶子节点的输出值。随后，通过对M棵回归树的输出分数求和获得停留热点hi的分数，即Scori＝f1+f2+…+fM，通过逻辑函数将其映射为概率值输出。并以训练得到的模型作为最终的运输终点识别模型。上述的步骤S8具体包括：对于每个待校准的运输终点，提取其对应的运单轨迹集，根据运单列表中包含运单集中的至少一个运单轨迹为条件搜索对应的停留热点构成候选集，并将其对应的特征向量输入由S7构建的运输终点识别模型，以模型输出概率值最大的停留热点作为与运单匹配的运输终点。随后，利用高德地图的逆地理编码服务API获取该运输终点的地址，据此完成对应原始终点的位置校准与地址的更新。本发明还提出了一种实现上述运输终点校准方法的运输终点校准系统，所述运输终点校准系统包括：数据预处理模块、停留热点挖掘模块、终点库更新模块；所述数据预处理模块用于基于任务时段的运单轨迹截取，基于速度异常的轨迹点去噪，基于Viterbi算法的地图匹配；所述停留热点挖掘模块用于基于DBSCAN的停留点聚类、基于Meanshift的道路驶离位置识别、基于层次聚类的停留点簇合并；所述终点库更新模块用于基于行为-区域的特征集提取、基于XGBoost的运输终点建模、运输终点识别与校准。本发明具有以下有益效果：1、基于司机均由道路上相近的位置转出驶入停留热点的观察，本发明基于地图匹配获取运单轨迹中匹配道路的最后一个轨迹点作为道路转出点，并采用Meanshift聚类道路转出点以定位对应停留区域的道路转出位置，最后基于道路转向位置的层次聚类方法识别属于同一个停留热点的不同停留区域并进行合并，以识别大宗物流中大小不一，具有多个停留区域的运输终点。2、本发明结合停留区域的停留时长、访问时段、停留频次与货物类型等行为特征集，以及邻近路段、附近POI、停留区域面积的区域特征集，构建XGBoost二分类模型以识别运输终点进行校准，由于该方法不依赖于返单的地点，适用于大宗物流运输终点的校准。3、基于真实的大宗物流数据集，对比现有的快件物流的交付地点校准方法，应用本发明方法的平均校准绝对误差最小，相较于次优的方法提升了约90.86％；校准误差距离在3000m内的运输终点占比最高，相较于次优方法提升了约72.92％。附图说明图1是面向大宗物流的运输终点校准技术框架图。图2为本发明构建的运输终点识别模型的结构示意图，其由M棵回归树构成，对于待预测的停留热点hi，运输终点识别模型中每棵回归树将输出一个评分值，并将其进行加和获得最终的得分，这个得分通过逻辑函数映射为概率值作为该停留热点为运输终点类型的概率。图3是不同方法的停留热点识别结果对比图。具体实施方式结合以下具体实施例和附图，对本发明作进一步的详细说明。实施本发明的过程、条件、实验方法等，除以下专门提及的内容之外，均为本领域的普遍知识和公知常识，本发明没有特别限制内容。鉴于现有运输交付地点的校准方法仅根据快递人员确认货物送达位置判定、不适用于存在大量延时返单的大宗货运场景，为准确识别具有大小不一、彼此邻近特性的运输终点，本发明提出了基于道路转出位置的运输终点校准策略。首先，采用DBSCAN方法对停留点进行聚类挖掘停留区域；同时，对于通过地图匹配提取到的与停留点对应的多个道路转出点，运用Meanshift方法将其进行聚类以识别不同停留区域对应的道路转出位置；在此基础上，将属于同一道路转出位置的多个停留区予以合并获得停留热点。随后，对停留热点分别提取包括停留时长、访问时段、停留频次与货物类型等访问行为特征，以及邻近路段、附近POI、停留区域面积等区域特征，采用XGBoost方法构建二分类模型识别运输终点，并利用其对运输终点库进行更新。具体地，本发明公开了一种面向大宗物流的运输终点校准方法。如图1所示，该方法包括三个阶段。在数据预处理阶段，基于历史轨迹和运单获取运单轨迹集，基于轨迹点的速度识别异常轨迹点，并基于Viterbi地图匹配获取轨迹点的匹配路段；在停留热点挖掘部分，采用DBSCAN聚类停留点检测停留区，基于Meanshift方法聚类道路驶离点识别对应停留区的道路转出位置，在此基础上，通过层次聚类方法生成不同的道路转出位置组，并合并每组道路转出位置对应的停留区获得停留热点；在终点库更新阶段，提取停留热点的行为特征集以及区域特征集，基于XGBoost构建运输终点识别模型，最后，基于该模型从停留热点中识别运输终点并对原始终点进行位置校准和地址更新。如图1所示，本发明采用三阶段的运输终点校准框架，包括以下八个步骤：S1：运单轨迹提取，对每辆货车按照其执行不同运单的开始时间对运单进行排序，其中，对于与后续运输任务发生时段有交叠的部分运单，以任务完成时间不得晚于后续运单的开始时间为条件对其任务完成时间进行调整；随后，基于每辆货车不同运单的开始时间与完成时间提取各运单对应的轨迹，即运单轨迹。实施例中，步骤S1具体包括：考虑到货运司机的延迟返单行为可能造成连续两个运单任务发生时段具有交叠的情况，本发明首先按照每辆货车执行不同运单的开始时间对运单进行排序；其次，提取其中任务发生时间段有交叠的运单序列，将前序运单的结束时间调整于其后续运单的开始时间之前；最后，根据每辆货车不同运单的开始时间和完成时间提取各运单对应的轨迹，即运单轨迹。S2：运单轨迹预处理，对各运单轨迹计算每个轨迹点的速度，将与前序轨迹点采样时间间隔正常但距离较远的轨迹点作为速度异常轨迹点予以消除，即对速度值超过速度阈值的轨迹点予以消除。同时，利用Viterbi方法对运单轨迹进行地图匹配获取与路段匹配的以及未匹配的轨迹点集合。实施例中，步骤S2具体包括：由于定位设备信号中断以及人为原因，原始轨迹中存在一些异常点，表现为与前序点采样间隔正常而距离较远。为避免这些噪声点对识别停留点的影响，本发明基于与前序轨迹点的距离和时间间隔计算每个轨迹点的速度，将速度大于阈值thrsp的轨迹点视为噪声并予以消除；同时，基于Viterbi方法对运单轨迹进行地图匹配获取轨迹点的匹配路段，并标记其中的未匹配轨迹段。S3：停留区域挖掘，对于各条运单轨迹在S2步骤提取的未匹配轨迹点序列，提取其中的零速度轨迹点序列里的第一个点作为停留点，对于所有停留点采用DBSCAN方法进行聚类挖掘停留区域。实施例中，步骤S3具体包括：为避免由于等待红绿灯以及交通拥堵等情况产生的停留点对识别停留区域的影响，该步骤只关注未匹配的轨迹点序列。因此，对于各条运单轨迹在S2步骤的未匹配轨迹点序列，提取其中的连续零速度的轨迹点序列的第一个点作为停留点，将该点的时间戳作为停留开始时间，并计算该轨迹点序列的时间间隔作为停留时长。最后，采用DBSCAN聚类停留点挖掘停留区域，为避免将道路两侧的停留点聚类为一个簇，根据最小道路的宽度设置聚类参数eps为5米，minsample被设置为5。S4：道路转出位置提取，基于卡车通常于道路上相近的位置转出驶入同一个停留热点这一观察，即卡车驶离道路的转出点彼此邻近，本发明基于道路转出位置识别属于同一个停留热点的多个停留区域。因此，对于S3获得的停留区域，将其中的各个停留点所在运单轨迹中与最邻近道路匹配的最后一个轨迹点作为该停留点对应的道路转出点；在此基础上，获取与每个停留区域对应的道路转出点集合；最后，利用Meanshift方法对道路转出点进行聚类，将道路转出点比较密集的位置作为停留区域对应的道路转出位置。实施例中，步骤S4具体包括：基于S3获得的停留区域，提取其中停留点所在运单轨迹中与最近邻路段匹配的最后一个轨迹点作为该停留点对应的道路转出点；在此基础上，获取与每个停留区域中停留点对应的道路转出点集，随后采用Meanshift方法聚类对应的道路转出点，提取道路转出点数量最多的规模最大簇的中心点的经纬度作为道路转出位置，并计算该簇中的道路转出点的平均方向作为它的方向。S5：停留区域合并，将与各道路转出位置对应的所有停留区域进行合并。对于S4提取的道路转出位置集合，采用层次聚类方法进行聚类生成不同组，合并每组道路转出位置对应的停留区域获得停留热点；对于每个停留热点，利用凸包算法获取覆盖其所有停留区域的最小凸多边形，将其作为该停留热点覆盖的区域范围；同时，计算所有停留区域的中心位置，将其作为该停留热点的位置；随后，对于每个停留热点，统计其包含的停留区域集的停留时长列表、停留开始时间列表以及运单列表等信息。实施例中，步骤S5具体包括：对于S4提取的道路转出位置集合，采用层次聚类方法生成不同的转出位置组。具体地，首先将每个道路转出位置视为一个簇，将距离最小且方向差小于阈值thrdir的停留点簇进行合并；其次，重新计算合并簇的平均位置和平均方向；上述步骤被迭代执行直至不存在距离小于距离阈值thrdis且方向差小于thrdir的簇；随后，合并每组道路转出位置对应的停留区域获得停留热点；对于每个停留热点，利用凸包算法提取覆盖其所有停留点的最小凸多边形，将其作为停留热点的区域范围，计算其中心位置作为停留热点的位置。最后，分别统计每个停留热点中停留点集对应的运单号列表、停留时长列表以及停留开始时间列表予以保存。S6：特征提取，基于S5获得的停留热点信息，分别提取停留时长、访问时段、停留频次、货物类型等访问行为特征，以及包含邻近道路级别、附近的POI类型和停留区面积等区域特征，并对各个停留热点进行特征向量表示。实施例中，步骤S6具体包括：步骤6.1)停留时长分布特征提取：据观察，卡车在运输终点的停留时长主要分布于30至60分钟，加油站的停留时长分布于10至15分钟，而休息区、维修点等停留热点的停留时长通常达数个小时。因此，本发明划分下述的时长区间：，访问时段分布特征提取：基于停留开始时间列表统计每个时段内的停留点数量占比，拼接形成对应停留热点的该特征表示。步骤6.3)停留频次分布特征提取：将停留频次分布特征表示为一个向量，其中n表示所有运输车辆中在一个停留热点的历史最大停留频次，frei表示在一个停留热点中停留i次的运输任务数量占比，其值基于对应的运单列表统计获得。步骤6.4)货物类型种类特征提取：基于运单列表，统计对应停留热点涉及的货物类型数量表示该特征。步骤6.5)邻近道路级别特征提取：基于OSM地图提取距离停留热点最近的路段获取其道路级别，并采用独热编码的方式表示该特征。步骤6.6)附近POI类别特征提取：基于业务调研，在大宗物流领域，运输终点附近通常有大量工厂、公司；运输司机通常选择餐厅附近的空地停留休息方便用餐；而加油站、维修点等停留热点通常位于汽车维护相关类型的POI聚集区域。因此，该发明基于POI查询接口获取3000米范围内的工厂、公司、餐饮、汽车维护以及加油站等类型POI的数量，并计算其占比进行拼接形成对应停留热点的该特征表示。步骤6.7)停留区域面积特征提取：基于S5步骤获得的停留热点的区域范围，将其对应的凸多边形表示为顶点序列{,,……,}，并通过公式获得停留热点区域的面积值。最终，将上述对应特征向量依次拼接形成对应停留热点的特征表示。S7：运输终点建模，基于S6获得的停留热点的特征向量表示，提取运输终点集作为正样本，同时，人工标注临时休息区、加油站、维修点等货运车辆访问的停留地点作为负样本，利用XGBoost方法构建判别运输终点的二分类模型。实施例中，步骤S7具体包括：基于标注的训练样本集，通过XGBoost模型迭代地学习M棵回归树，此处M被设置为10)，如图2所示，构建过程如下：其中，L为第t次迭代时的目标函数，yi为第i个停留热点样本hi的真实标签，表示训练样本hi在第t-1次模型迭代时模型的预测值，ft表示停留热点样本hi在第t次模型迭代时模型的预测值；Γ是正则项，η和λ为正则项系数，T为叶子节点的数量，wj表示第j个叶子节点的输出值。随后，通过加和M棵回归树的输出分数获得一个停留热点hi的分数，即Scori＝f1+f2+…+fM，并通过逻辑函数将其映射为概率值进行输出。最后将训练完成的运输热点识别模型进行长期保留。S8：运输终点库更新,基于运单轨迹提取与每个运单的运输终点匹配的候选停留热点集，将其对应的特征向量输入S7构建的运输终点识别模型，以模型输出概率值最大的停留热点作为与各运单匹配的运输终点，随后，利用高德地图的逆地理编码API获取对应位置的地址，据此对终点库中对应运输终点的位置与地址进行更新。实施例中，步骤S8具体包括：对于每个待校准的原始终点，提取其对应的运单轨迹集，并基于运单列表中包含运单集中的至少一个运单轨迹为条件搜索对应的停留热点构成候选集，将其对应的特征向量输入S7构建的运输终点识别模型，以模型输出概率值最大的停留热点作为其匹配的运输终点。随后，利用高德地图的逆地理编码服务API获取该运输终点的地址，据此完成对应原始终点的位置校准与地址的更新。为验证本发明的有效性，选取真实的大宗物流数据识别停留热点，人工标注实际的停留热点区域，并分别将运输终点和其他停留热点的识别结果与基于传统聚类方法的识别结果进行对比；以检测区域与实际标注区域的交并比进行评价。对比结果如图3所示，使用本发明中停留热点识别方法均具有较高的IoU值，而对于运输终点的识别效果更为明显。随后，基于该部分数据进行运输终点校准，并将校准的结果与其他现有的交付地点校准方法结果进行对比；选取的现有的交付地点的方法包括DTInf、GeoCloud、U-Net，这些方法均依赖于快递员标记的货物交付位置，此处以货运司机返单时的位置作为标记的货物交付位置进行实施；选取的评价指标有MAE、P85、βk。校准对比结果如表1所示，使用本发明的终点校准具有最小的MAE和P85值，同时对于β500、β1000、β3000评价指标，均具有最大的百分占比。表1不同方法校准效果对比表综上所述，本发明基于道路驶离位置的停留热点识别策略，更精确地识别到具有多个停留区的停留热点，更适合于大宗物流运输终点具有多个卸货地的应用场景。同时，基于停留热点的行为特征集以及区域特征集构建XGBoost二分类模型以识别运输终点进行校准，不依赖于用户返单时标记的地点，相比现有的快件交付地点校准方法更适合于大宗货运领域。本发明的保护内容不局限于以上实施例。在不背离本发明构思的精神和范围下，本领域技术人员能够想到的变化和优点都被包括在本发明中，并且以所附的权利要求书为保护范围。
