标题title
一种晶圆裂缝检测方法、装置及存储介质
摘要abst
本发明公开了一种晶圆裂缝检测方法、装置及存储介质，属于晶圆检测技术领域。针对现有技术中在进行晶圆表面裂缝检测时，由于裂缝结构不连续等问题导致裂缝难以检测，本发明将晶圆表面图像通过滤波器进行卷积，对卷积后的晶圆表面图像二值化处理得到二值图像；将二值图像中所有保留的连通域拟合成线段；判断拟合线段的方向和预先设置的滤波器的方向差异，保留与滤波器方向相近的拟合线段；对保留的拟合线段进行聚类，保存属于同一类的拟合线段的端点坐标；计算每个类别中坐标点的最小外接矩形，通过最小外接矩形的长度和位置信息判断该类别是否为裂缝，从而通过滤波器增强裂缝结构及线段聚类，实现在复杂背景下的晶圆裂缝的检测和提取。
权利要求书clms
1.一种晶圆裂缝检测方法，包括如下步骤：输入晶圆表面图像；将晶圆表面图像通过滤波器进行卷积，对卷积后的晶圆表面图像二值化处理得到二值图像；将二值图像中所有保留的连通域拟合成线段；判断拟合线段的方向和预先设置的滤波器的方向差异，保留与滤波器方向相近的拟合线段；对保留的拟合线段进行聚类，保存属于同一类的拟合线段的端点坐标；计算每个类别中坐标点的最小外接矩形，通过最小外接矩形的长度和位置信息判断该类别是否为裂缝。2.根据权利要求1所述的一种晶圆裂缝检测方法，其特征在于，所述滤波器为Gabor滤波器，所述Gabor滤波器的表达式为：其中，GRe表示Gabor滤波器的实数部分，GIm表示Gabor滤波器的虚数部分，σ表示Gabor滤波器中高斯窗的标准差，λ表示Gabor滤波器的波长，γ表示Gabor滤波器横纵方向的长宽比，φ表示Gabor滤波器的相位，θ表示Gabor滤波器的方向，x、y表示Gabor滤波器的坐标，x＇、y＇表示Gabor滤波器方向为θ时对应的x、y坐标。3.根据权利要求2所述的一种晶圆裂缝检测方法，其特征在于，所述Gabor滤波器对晶圆表面图像进行卷积的计算公式为：其中，T表示卷积输出，表示当前卷积操作的中心坐标，g表示Gabor滤波器，表示Gabor滤波器的尺寸，a取值为floor，b取值为floor，floor表示数值向下取整，F表示输入晶圆表面图像。4.根据权利要求3所述的一种晶圆裂缝检测方法，其特征在于，通过统计卷积后晶圆表面图像像素值的均值和方差，计算阈值对晶圆表面图像进行二值化处理，所述阈值的表达式为：其中，μ表示晶圆表面图像像素值的均值，σ2表示晶圆表面图像像素值的方差，k表示人工设定的倍率。5.根据权利要求1所述的一种晶圆裂缝检测方法，其特征在于，通过目标模型ax+b-y=0将保留的连通域拟合成线段，所述连通域中的像素点坐标表示为，所述目标模型ax+b-y=0中参数的计算公式为：其中，i表示当前坐标序号，n表示像素点个数，i≤n，a、b表示求解参数。6.根据权利要求1所述的一种晶圆裂缝检测方法，其特征在于，通过所述拟合线段的角度和Gabor滤波器角度的差值，判断拟合线段的方向和预先设置的滤波器的方向差异。7.根据权利要求6所述的一种晶圆裂缝检测方法，其特征在于，所述保留的拟合线段表示为L{L1，L2，...，Ln}，拟合线段序号表示为i∈{1，2，...，n}和j∈{i+1，i+2，...，n-1}，对所有保留的拟合线段进行聚类，保存属于一类的拟合线段的端点坐标；属于一类的拟合线段的计算公式为：其中，CtgLj表示聚类类别序号，t表示人工设定的阈值，Distance表示两个拟合线段端点的最小欧式距离，p11，p12，p21，p22表示当前参与判断的两个拟合线段的四个端点，Penalty表示距离惩罚，d表示拟合线段端点到四个端点拟合成直线的垂直投影距离。8.根据权利要求7所述的一种晶圆裂缝检测方法，其特征在于，统计聚类结果，计算每个类别中距离晶圆表面图像最近的两个端点，通过位置信息判断裂缝是否贯通晶圆表面；根据是否贯通晶圆表面设定不同长度阈值，通过最小外接矩形的长度判断是否为裂缝。9.一种晶圆裂缝检测装置，其特征在于，包括：输入模块，输入待检测的晶圆表面图像；检测模块，将晶圆表面图像通过滤波器进行卷积，对卷积后的晶圆表面图像二值化处理得到二值图像，将二值图像中所有保留的连通域拟合成线段，判断拟合线段的方向和预先设置的滤波器的方向差异，保留与滤波器方向相近的拟合线段，对保留的拟合线段进行聚类，保存属于同一类的拟合线段的端点坐标，计算每个类别中坐标点的最小外接矩形，通过最小外接矩形的长度和位置信息判断该类别是否为裂缝；输出模块，输出检测结果图像。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时，实现如权利要求1-8中任一项所述的用于晶圆裂缝检测方法。
说明书desc
技术领域本发明涉及晶圆检测技术领域，更具体地说，涉及一种晶圆裂缝检测方法、装置及存储介质。背景技术晶圆是指硅半导体集成电路制作所用的硅晶片，由于其形状为圆形，故称为晶圆，在硅晶片上可加工制作成各种电路元件结构，而成为有特定电性功能的IC产品。在晶圆生产过程中，产品极易受外部环境的温度、杂质和物理作用力等影响受到损伤，从而导致功能性失效。晶圆质量的高低，直接影响生产，若晶圆上存在裂缝，将会严重影响晶圆的质量。因此，在对晶圆加工之前或者加工过程中，对晶圆是否存在裂缝进行检测非常有必要的。由于晶圆产量大并且表面复杂，需要快速、鲁棒的缺陷检测方法。当前比较常见的方法有分析海森矩阵的特征值及特征向量、支持向量机、深度学习等方法。对基于海森矩阵的方法来说，前提条件是构成裂缝的像素连续分布且和背景有明显差异；而支持向量机等衍生方法的操作复杂度较大，不适用于实时的工业检测需求；对深度学习方法来说，监督学习需要花费大量的人力和时间成本来准备训练数据，而非监督学习的方法检测效果难以达到要求。由此，需要一种晶圆裂缝的检测方法，操作步骤简单方便，检测精确度高，从而实现在复杂场景下对裂缝进行检测和提取。经检索，中国专利申请，公开号CN112735959B，公开日2022年3月18日，公开了晶圆检测方法及晶圆检测装置。该发明所述晶圆检测方法包括如下步骤：提供多个检测配方，且多个所述检测配方的检测精度互不相同；设定一预设规则，所述预设规则包括当前批次晶圆的批次信息、前若干批次晶圆的检测结果信息中的一种或两种的组合；根据所述预设规则从多个所述检测配方中选择一检测配方对所述当前批次晶圆进行检测。该方案虽然避免了采用固定检测配方易导致产品产出时间较长的问题，但是通过设置多个检测配方以及自定义的预设规则来进行检测，操作步骤繁琐，检测效率不高。发明内容1.要解决的技术问题针对现有技术中在进行晶圆表面裂缝检测时，存在裂缝结构不连续、裂缝与背景对比度低、背景存在随机纹理等问题从而影响晶圆检测，本发明提供了一种晶圆裂缝检测方法、装置及存储介质，通过Gabor滤波器增强裂缝结构，增加缺陷和背景的对比度，从而实现在复杂背景下晶圆裂缝的检测和提取。2.技术方案本发明的目的通过以下技术方案实现。一种晶圆裂缝检测方法，包括如下步骤：输入晶圆表面图像；将晶圆表面图像通过滤波器进行卷积，对卷积后的晶圆表面图像二值化处理得到二值图像；将二值图像中所有保留的连通域拟合成线段；判断拟合线段的方向和预先设置的滤波器的方向差异，保留与滤波器方向相近的拟合线段；对保留的拟合线段进行聚类，保存属于同一类的拟合线段的端点坐标；计算每个类别中坐标点的最小外接矩形，通过最小外接矩形的长度和位置信息判断该类别是否为裂缝。进一步地，所述滤波器为Gabor滤波器，所述Gabor滤波器的表达式为：其中，GRe表示Gabor滤波器的实数部分，GIm表示Gabor滤波器的虚数部分，σ表示Gabor滤波器中高斯窗的标准差，λ表示Gabor滤波器的波长，γ表示Gabor滤波器横纵方向的长宽比，φ表示Gabor滤波器的相位，θ表示Gabor滤波器的方向，x、y表示Gabor滤波器的坐标，x＇、y＇表示Gabor滤波器方向为θ时对应的x、y坐标。进一步地，所述Gabor滤波器对晶圆表面图像进行卷积的计算公式为：其中，T表示卷积输出，表示当前卷积操作的中心坐标，g表示Gabor滤波器，表示Gabor滤波器的尺寸，a取值为floor，b取值为floor，floor表示数值向下取整，F表示输入晶圆表面图像。进一步地，通过统计卷积后晶圆表面图像像素值的均值和方差，计算阈值对晶圆表面图像进行二值化处理，所述阈值的表达式为：其中，μ表示晶圆表面图像像素值的均值，σ2表示晶圆表面图像像素值的方差，k表示人工设定的倍率。进一步地，通过目标模型ax+b-y=0将保留的连通域拟合成线段，所述连通域中的像素点坐标表示为，所述目标模型ax+b-y=0中参数的计算公式为：其中，i表示当前坐标序号，n表示像素点个数，i≤n，a、b表示求解参数。进一步地，通过所述拟合线段的角度和Gabor滤波器角度的差值，判断拟合线段的方向和预先设置的滤波器的方向差异。进一步地，所述保留的拟合线段表示为L{L1，L2，...，Ln}，拟合线段序号表示为i∈{1，2，...，n}和j∈{i+1，i+2，...，n-1}，对所有保留的拟合线段进行聚类，保存属于一类的拟合线段的端点坐标；属于一类的拟合线段的计算公式为：其中，CtgLj表示聚类类别序号，t表示人工设定的阈值，Distance表示两个拟合线段端点的最小欧式距离，p11，p12，p21，p22表示当前参与判断的两个拟合线段的四个端点，Penalty表示距离惩罚，d表示拟合线段端点到四个端点拟合成直线的垂直投影距离。进一步地，统计聚类结果，计算每个类别中距离晶圆表面图像最近的两个端点，通过位置信息判断裂缝是否贯通晶圆表面；根据是否贯通晶圆表面设定不同长度阈值，通过最小外接矩形的长度判断是否为裂缝。一种晶圆裂缝检测装置，包括：输入模块，输入待检测的晶圆表面图像；检测模块，将晶圆表面图像通过滤波器进行卷积，对卷积后的晶圆表面图像二值化处理得到二值图像，将二值图像中所有保留的连通域拟合成线段，判断拟合线段的方向和预先设置的滤波器的方向差异，保留与滤波器方向相近的拟合线段，对保留的拟合线段进行聚类，保存属于同一类的拟合线段的端点坐标，计算每个类别中坐标点的最小外接矩形，通过最小外接矩形的长度和位置信息判断该类别是否为裂缝；输出模块，输出检测结果图像。一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时，实现所述的用于晶圆裂缝检测方法。3.有益效果相比于现有技术，本发明的优点在于：本发明的一种晶圆裂缝检测方法、装置及存储介质，通过Gabor滤波器增强晶圆的裂缝结构，增加裂缝和背景的对比度，可以实现在复杂背景下的晶圆裂缝的检测和提取，同时，通过聚类操作来连接离散的拟合线段，从而实现离散裂缝结构的检测。附图说明图1为本发明一种晶圆裂缝检测方法的流程示意图；图2为实施例中晶圆表面无裂缝的图像；图3为实施例中晶圆表面有裂缝的图像；图4为实施例中晶圆裂缝模型的图像；图5为实施例中噪音模型的图像；图6为实施例中检测晶圆表面裂缝步骤S1-S7的输出图像；图7为实施例中输入第一组晶圆表面裂缝图像进行检测提取裂缝图像；图8为实施例中输入第二组晶圆表面裂缝图像进行检测提取裂缝图像；图9为实施例中输入第三组晶圆表面裂缝图像进行检测提取裂缝图像。具体实施方式下面结合说明书附图和具体的实施例，对本发明作详细描述。实施例如图1-9所示，为本实施例提供的一种晶圆裂缝检测方法，输入晶圆表面图像，将晶圆表面图像通过滤波器进行卷积，对卷积后的晶圆表面图像二值化处理得到二值图像，将二值图像中所有保留的连通域拟合成线段，判断拟合线段的方向和预先设置的滤波器的方向差异，保留与滤波器方向相近的拟合线段，对保留的拟合线段进行聚类，保存属于同一类的拟合线段的端点坐标，计算每个类别中坐标点的最小外接矩形，通过最小外接矩形的长度和位置信息判断该类别是否为裂缝。如图2所示，为晶圆表面无裂缝的图像；如图3所示，为晶圆表面有裂缝的图像。具体到本实施例中，结合图1和图6，为所述的一种晶圆裂缝检测方法的步骤，如图6中S1所示，输入晶圆表面图像，所述晶圆表面图像是尺寸为m×n像素的灰度图。如图6中S2所示，预先设定滤波器的个数及方向。本实施例中，所述滤波器为Gabor滤波器，设置六个Gabor滤波器，同时，通过每个Gabor滤波器之间的角度间隔预先设定Gabor滤波器的方向，每个Gabor滤波器之间的角度间隔为30°，所述Gabor滤波器的六个方向分别为0°，30°，60°，90°，120°，150°，从而六个Gabor滤波器只负责检测一定的角度范围。所述Gabor滤波器的波长为6像素，尺寸为11x11像素。通过所述Gabor滤波器对晶圆表面图像进行卷积，如图6中S3所示，为经六个不同角度Gabor滤波器卷积后的晶圆表面图像，通过卷积操作提取晶圆表面图像的显著特征，从而可以提高晶圆裂缝的检测效率。需要说明的是，本实施例中，所述Gabor滤波器可以在不同尺度、不同方向上提取晶圆表面图像相关的特征；所述Gabor滤波器的表达式为：其中，GRe表示Gabor滤波器的实数部分，GIm表示Gabor滤波器的虚数部分，σ表示Gabor滤波器中高斯窗的标准差，λ表示Gabor滤波器的波长，γ表示Gabor滤波器横纵坐标的长宽比，φ表示Gabor滤波器的相位，θ表示Gabor滤波器的方向，x、y表示Gabor滤波器的坐标，x＇、y＇表示Gabor滤波器方向为θ时对应的x、y坐标。所述Gabor滤波器对晶圆表面图像进行卷积的计算公式为：其中，T表示卷积输出，表示当前卷积操作的中心坐标，g表示Gabor滤波器，表示Gabor滤波器的尺寸，a取值为floor，b取值为floor，floor表示数值向下取整，F表示输入晶圆表面图像。由此，通过Gabor滤波器卷积操作可以增强晶圆的裂缝结构，增加裂缝和背景的对比度，实现在复杂背景下晶圆裂缝的检测和提取。通过统计卷积后图像像素值的均值和方差，计算阈值对卷积后的晶圆表面图像进行二值化处理，如图6中S4所示，为二值化处理后得到的二值图像。所述均值μ通过计算图像像素值的平均值得到，所述方差σ2的计算公式为：其中，r表示图像像素点的个数，x表示图像像素值的平均值。所述阈值的表达式为：其中，k表示人工设定的倍率，k的取值范围在1~2之间，本实施例中，k取值为1.8。通过二值处理后得到二值图像，统计二值图像中所有连通域的像素坐标，并排除小面积连通域，从而排除噪声干扰。如图6中S5所示，对二值图像中保留的独立连通域通过最小二乘法拟合成直线，根据拟合出的直线和连通域外接矩形得到近似直线模型，线段由近似直线模型和连通域外接矩形拟合得到。本实施例中，将保留的连通域拟合成线段是因为晶圆裂缝是以线性结构出现的，拟合成线段从而有一个确定的模型来表达连通域的性质，通过线性模型近似表示连通域的形态特征，可以降低数据的维度，由此，拟合线段的目标模型为ax+b-y=0。需要说明的是，本实施例中，通过两个端点表示一个连通域中的所有像素，可以很好地保留裂缝的线性特征，所述连通域中的像素点坐标表示为，所述目标模型ax+b-y=0的参数的计算公式为：其中，i表示当前坐标序号，n表示像素点个数，i≤n，a、b表示求解参数。需要说明的是，晶圆的细微裂缝难以识别，由此需要增强线性结构来判断，通过判断拟合线段的角度和Gabor滤波器角度的差值，从而保留和Gabor滤波器方向相近的拟合线段，每个Gabor滤波器负责增强一定角度区间内的线性结构。本实施例中，若所述拟合线段的角度和Gabor滤波器角度的差值超过15°，则认为该拟合线段为噪音，剔除该拟合线段。这是由于六个Gabor滤波器只负责一定的角度范围。具体地，若有一个角度为10°的裂缝，则应该由设置角度为0°的Gabor滤波器负责检测，即使设置角度为30°的Gabor滤波器可以感应，但仍认为该裂缝为噪音。进一步地，如图6中S6所示，对保留的拟合线段进行聚类。所述保留的拟合线段表示为L{L1，L2，...，Ln}，拟合线段序号表示为i∈{1，2，...，n}和j∈{i+1，i+2，...，n-1}，对所有保留的拟合线段进行聚类，保存属于一类的拟合线段端点坐标。具体地，通过最小二乘法将线段Li，Lj的四个端点拟合成直线，接着通过判断两个拟合线段与拟合直线之间的相对位置进行聚类；属于一类的拟合线段的计算公式为：其中，CtgLj表示聚类类别序号，t表示人工设定的阈值，本实施例中，设定t为15，Distance表示两个拟合线段端点的最小欧式距离，p11，p12，p21，p22表示当前参与判断的两个拟合线段的四个端点，Penalty表示距离惩罚，d表示拟合线段端点到四个端点拟合成直线的垂直投影距离，如图4所示为晶圆裂缝模型，如图5所示为噪音模型。由上述公式可知，若两个拟合线段端点的最小欧式距离和距离惩罚的和小于人工设定的阈值，则这两个线段属于一类拟合线段，保存属于一类的拟合线段的端点坐标；若两个拟合线段端点的最小欧式距离和距离惩罚的和大于或等于人工设定的阈值，则这两个拟合线段不属于一类拟合线段，属于其他类别的拟合线段。由此，通过聚类操作来连接离散的拟合线段，可以实现离散裂缝结构的检测。进而，如图6中S7所示，统计聚类结果，进行长度验证，输出检测结果。人工设定长度阈值，通过每类中所有线段端点的最小外接矩形长度和位置判断是否为裂缝；通过计算每个类别中距离晶圆表面图像最近的两个端点，通过该位置信息判断裂缝是否贯通晶圆表面并进行长度判断。具体地，分别记录相同分类序号中的拟合线段端点，统计每个类别中离晶圆表面图像边界距离最近的点，通过判断点和晶圆表面图像边界的距离即计算当前类中最靠近晶圆表面图像边缘的两个端点，计算端点到距离最近的晶圆表面图像边缘的曼哈顿距离从而判断是否贯通晶圆表面；同时，根据每个类别中所有端点计算最小外接矩形，根据是否贯通设定不同长度阈值，通过最小外接矩形的长度判断该类别是否为裂缝，长裂缝很容易与噪声区分，因此可以直接通过长度判断，本实施例中，若超过人工设定的长度阈值就认为是裂缝，而短裂缝长度可能与噪声相似，因此需要通过长度和位置信息综合判断。由此，本实施例提供的一种晶圆裂缝检测方法，如图7-9所示，输入三组晶圆表面图像，如分别通过Gabor滤波器检测得到三组检测结果图像，提取三组晶圆裂缝图像。从而，本实施例提供的一种晶圆裂缝检测方法，通过Gabor滤波器增强晶圆的裂缝结构，增加裂缝和背景的对比度，可以实现在复杂背景下的晶圆裂缝检测和提取，同时，通过聚类操作来连接离散的拟合线段，从而实现离散裂缝结构的检测。本实施例还提供一种晶圆裂缝检测装置，包括：输入模块，输入待检测的晶圆表面图像；检测模块，将晶圆表面图像通过滤波器进行卷积，对卷积后的晶圆表面图像二值化处理得到二值图像，将二值图像中所有保留的连通域拟合成线段，判断拟合线段的方向和预先设置的滤波器的方向差异，保留与滤波器方向相近的拟合线段，对保留的拟合线段进行聚类，保存属于同一类的拟合线段的端点坐标，计算每个类别中坐标点的最小外接矩形，通过最小外接矩形的长度和位置信息判断该类别是否为裂缝；输出模块，输出检测结果图像。本实施例提供的一种晶圆裂缝检测装置能够实现所述晶圆裂缝检测方法的任一种方法，且一种晶圆裂缝检测装置的具体工作过程可参考所述晶圆裂缝检测方法实施例中的对应过程。本实施例所提供的方法和装置，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的；例如，某个模块的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的连接或通信连接可以是通过一些接口、装置或单元的间接耦合或通信连接，也可以是电性、机械或其它的形式的连接。本实施例还提供一种计算机可读存储介质。一种计算机可读存储介质，所述计算机可读存储介质上存储有计算机程序，所述计算机程序被处理器运行时执行本实施例中所述的一种晶圆裂缝检测方法。其中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用；计算机可读介质上包含的程序代码可以用任何适当的介质传输，包括但不限于无线、电线、光缆、RF等等，或者上述的任意合适的组合。以上示意性地对本发明创造及其实施方式进行了描述，该描述没有限制性，在不背离本发明的精神或者基本特征的情况下，能够以其他的具体形式实现本发明。附图中所示的也只是本发明创造的实施方式之一，实际的结构并不局限于此，权利要求中的任何附图标记不应限制所涉及的权利要求。所以，如果本领域的普通技术人员受其启示，在不脱离本创造宗旨的情况下，不经创造性的设计出与该技术方案相似的结构方式及实施例，均应属于本专利的保护范围。此外，“包括”一词不排除其他元件或步骤，在元件前的“一个”一词不排除包括“多个”该元件。产品权利要求中陈述的多个元件也可以由一个元件通过软件或者硬件来实现。第一，第二等词语用来表示名称，而并不表示任何特定的顺序。
