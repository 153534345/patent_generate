标题title
虚拟牙根生成方法、装置、计算机设备和存储介质
摘要abst
一种虚拟牙根生成方法、装置、计算机设备、存储介质和计算机程序产品，该方法包括：获取牙冠模型和牙根深度，并根据牙冠模型的颈缘点得到投影点；根据投影点和牙根深度得到牙根形状边缘线；根据牙根形状边缘线得到牙根曲面；根据牙根曲面生成虚拟牙根。该方法通过四个参数确定牙根形状边缘线，再通过投影点生成曲线簇、曲线簇生成牙根曲面的方式，能够得到精准度较高的虚拟牙根，极大地缩小了与真实牙根之间的差距。在矫治方案设计阶段，能够为医生提供具有牙冠和牙根的完成牙齿模型，使得在矫治方案设计过程中，精确地模拟牙冠和牙根的移动过程，提高矫治方案的可靠性和成功率。
权利要求书clms
1.一种虚拟牙根生成方法，其特征在于，所述方法包括：获取牙冠模型和牙根深度，并根据所述牙冠模型的颈缘点得到投影点；根据所述投影点和牙根深度得到牙根形状边缘线；根据所述牙根形状边缘线得到牙根曲面；根据所述牙根曲面生成虚拟牙根。2.根据权利要求1所述的虚拟牙根生成方法，其特征在于，所述根据所述牙冠模型的颈缘点得到投影点包括：提取所述牙冠模型的颈缘线，并采集所述颈缘线上的颈缘点；以牙冠指向牙根根尖的方向为牙根轴向，沿所述牙根轴向计算所述颈缘点的最低点；根据所述牙根轴向和所述最低点构建平面；将所述颈缘点投影到所述平面上得到投影点。3.根据权利要求2所述的虚拟牙根生成方法，其特征在于，所述根据所述投影点和牙根深度得到牙根形状边缘线包括：计算所述投影点的中心点；计算所述中心点与每个投影点的距离，并获取最远距离与最远点；根据所述最远点获取定位点，所述定位点在所述最远点指向中心点的方向上与所述最远点具有第一预设距离，在平行于所述牙根轴向的方向上与所述最远点具有第二预设距离；根据所述最远点获取第一切矢，根据所述定位点获取第二切矢；根据所述最远点、第一切矢、定位点以及第二切矢得到所述牙根形状边缘线。4.根据权利要求3所述的虚拟牙根生成方法，其特征在于，所述根据所述最远点获取第一切矢，根据所述定位点获取第二切矢包括：根据所述牙根轴向，以预设长度构造经过所述最远点的第一矢量；根据所述最远点指向所述中心点的方向，以所述预设长度构造经过所述定位点的第二矢量；所述第一切矢与所述第一矢量之间具有第一预设角度，所述第二切矢与所述第二矢量之间具有第二预设角度。5.根据权利要求2-4任一所述的虚拟牙根生成方法，其特征在于，所述根据所述牙根形状边缘线得到牙根曲面包括：根据所述牙根形状边缘线计算第一收缩系数和第二收缩系数；将每个投影点根据所述第一收缩系数和所述第二收缩系数进行收缩得到点集，对所述点集进行拟合得到曲线簇；根据所述曲线簇和所述牙根形状边缘线得到所述牙根曲面。6.根据权利要求5所述的虚拟牙根生成方法，其特征在于，所述根据所述牙根形状边缘线计算第一收缩系数和第二收缩系数包括：构造第一直线和第二直线，所述第一直线为所述中心点和所述最远点所在直线，所述第二直线为平行于所述牙根轴向且经过所述中心点的直线；对所述牙根形状边缘线进行采样点采样，并计算每个采样点到所述第一直线和所述第二直线的距离；所述第一收缩系数为采样点到所述第二直线的距离与所述最远距离的比值，所述第二收缩系数为采样点到所述第一直线的距离。7.根据权利要求6所述的虚拟牙根生成方法，其特征在于，所述根据所述牙根曲面生成虚拟牙根包括：将所述牙根曲面的一端与所述牙冠模型进行拼接，将所述牙根曲面的另一端进行补洞，得到所述虚拟牙根。8.一种虚拟牙根生成装置，其特征在于，包括：获取模块，用于获取牙冠模型和牙根深度，并根据所述牙冠模型的颈缘点得到投影点；第一计算模块，用于根据所述投影点和牙根深度得到牙根形状边缘线；第二计算模块，用于根据所述牙根形状边缘线得到牙根曲面；合成模块，用于根据所述牙根曲面生成虚拟牙根。9.一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至7中任一项所述的方法的步骤。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至7中任一项所述的方法的步骤。
说明书desc
技术领域本发明涉及口腔正畸技术领域，特别是涉及一种虚拟牙根的生成方法、装置、计算机设备、存储介质和计算机程序产品。背景技术牙颌畸形是一种口腔疾病，传统的牙颌畸形矫治方法多采用粘接在牙齿上的固定托槽矫治器，其缺点是钢丝外露，影响美观，且钢丝容易损伤口腔内粘膜，钢丝与牙齿的缝隙处清洁不便，容易滋生菌斑导致牙齿脱矿、变色。为了克服固定托槽矫治器的这些缺点，出现了无托槽隐形矫治器。隐形矫治器由安全的弹性透明高分子材料制成，可以由患者自行摘戴，口腔卫生可以正常维护。且使用隐形矫治器无需在患者的牙冠上粘接托槽、调节弓丝，使临床操作大大简化。在现有的隐形矫治器中，首先通过光学或CT扫描患者牙颌石膏模型或印模，或者直接口内扫描采集患者的当前牙颌状态图像，建立患者的牙颌数字化模型。接着由医生根据患者的原始牙齿状态人工地确定最终的牙齿矫治状态，然后借助计算机辅助设计手段，得到多个中间牙齿状态，从而制造一系列的隐形矫治器，每个隐形矫治器对应患者的不同矫正阶段。由此可见，获取患者的原始牙齿状态是设计矫治方案的必要条件。医生根据患者的原始牙齿状态，根据经验移动某些牙齿，从而达到矫治的目标牙列。但是，目前获取患者的原始牙齿状态仅能获得患者的牙冠数据，每个牙齿由外露的牙冠和埋入牙槽骨中的牙根组成，CT图像虽然能够获取牙根的图像，但CT图像为二维图像数据，无法直接得到患者的牙根三维模型。而口内扫描方式，只能获得患者牙冠的三维图像数据，而无法扫描到牙根。然而在临床，常会出现牙冠之间没有重叠或具有移动间隙，其牙根却可能出现贴靠甚至紧抵的情况，若移动牙冠、相邻牙根将会出现干涉的情况。现有技术中，通过计算机算法生成虚拟牙根来替代真实牙根，但是，通过其方法生成的虚拟牙根与真实牙根之间存在较大差距，导致矫治计划的准确性受到极大地影响。基于此，提出一种虚拟牙根生成方法、装置、计算机设备、计算机可读存储介质和计算机程序产品来解决上述问题。发明内容基于此，有必要针对上述技术问题，提供一种能够提高隐形矫治器生产效率和准确度的虚拟牙根生成方法、装置、计算机设备、计算机可读存储介质和计算机程序产品。第一方面，本申请提供了一种虚拟牙根生成方法，该方法包括：获取牙冠模型和牙根深度，并根据牙冠模型的颈缘点得到投影点；根据投影点和牙根深度得到牙根形状边缘线；根据牙根形状边缘线得到牙根曲面；根据牙根曲面生成虚拟牙根。在其中一个实施例中，根据牙冠模型的颈缘点得到投影点包括：提取牙冠模型的颈缘线，并采集颈缘线上的颈缘点；以牙冠指向牙根根尖的方向为牙根轴向，沿牙根轴向计算颈缘点的最低点；根据牙根轴向和最低点构建平面；将颈缘点投影到平面上得到投影点。在其中一个实施例中，根据投影点和牙根深度得到牙根形状边缘线包括：计算投影点的中心点；计算中心点与每个投影点的距离，并获取最远距离与最远点；根据最远点获取定位点，定位点在最远点指向中心点的方向上与最远点具有第一预设距离，在平行于牙根轴向的方向上与最远点具有第二预设距离；根据最远点获取第一切矢，根据定位点获取第二切矢；根据最远点、第一切矢、定位点以及第二切矢得到牙根形状边缘线；在其中一个实施例中，根据最远点获取第一切矢，根据定位点获取第二切矢包括：根据牙根轴向，以预设长度构造经过最远点的第一矢量；根据最远点指向中心点的方向，以预设长度构造经过定位点的第二矢量；第一切矢与第一矢量之间具有第一预设角度，第二切矢与第二矢量之间具有第二预设角度。在其中一个实施例中，根据牙根形状边缘线得到牙根曲面包括：根据牙根形状边缘线计算第一收缩系数和第二收缩系数；将每个投影点根据第一收缩系数和第二收缩系数进行收缩得到点集，对点集进行拟合得到曲线簇；根据曲线簇和牙根形状边缘线得到牙根曲面。在其中一个实施例中，根据牙根形状边缘线计算第一收缩系数和第二收缩系数包括：构造第一直线和第二直线，第一直线为中心点和最远点所在直线，第二直线为平行于牙根轴向且经过中心点的直线；对牙根形状边缘线进行采样点采样，并计算每个采样点到第一直线和第二直线的距离；第一收缩系数为采样点到第二直线的距离与最远距离的比值，第二收缩系数为采样点到第一直线的距离。在其中一个实施例中，根据牙根曲面生成虚拟牙根包括：将牙根曲面的一端与牙冠模型进行拼接，将牙根曲面的另一端进行补洞，得到虚拟牙根。第二方面，本申请还提供了一种虚拟牙根生成装置，该装置包括：获取模块，用于获取牙冠模型和牙根深度，并根据牙冠模型的颈缘点得到投影点；第一计算模块，用于根据投影点和牙根深度得到牙根形状边缘线；第二计算模块，用于根据牙根形状边缘线得到牙根曲面；合成模块，用于根据牙根曲面生成虚拟牙根。第三方面，本申请还提供了一种计算机设备，该计算机设备包括存储器和处理器，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时实现以下步骤：获取牙冠模型和牙根深度，并根据牙冠模型的颈缘点得到投影点；根据投影点和牙根深度得到牙根形状边缘线；根据牙根形状边缘线得到牙根曲面；根据牙根曲面生成虚拟牙根。第四方面，本申请还提供了一种计算机可读存储介质，该计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现以下步骤：获取牙冠模型和牙根深度，并根据牙冠模型的颈缘点得到投影点；根据投影点和牙根深度得到牙根形状边缘线；根据牙根形状边缘线得到牙根曲面；根据牙根曲面生成虚拟牙根。第五方面，本申请还提供了一种计算机程序产品，该计算机程序产品，包括计算机程序，该计算机程序被处理器执行时实现以下步骤：获取牙冠模型和牙根深度，并根据牙冠模型的颈缘点得到投影点；根据投影点和牙根深度得到牙根形状边缘线；根据牙根形状边缘线得到牙根曲面；根据牙根曲面生成虚拟牙根。上述虚拟牙根生成方法、装置、计算机设备、存储介质和计算机程序产品，先通过牙冠模型颈缘线上的颈缘点得到在平面上的投影点，结合牙根深度确定四个参数，然后计算生成牙根形状边缘线，即确定了牙根侧边的外轮廓线；再根据牙根形状边缘线进行采样并计算收缩系数，将投影点按照收缩系数进行收缩，能够得到一个点集，该点集中的点分布形成牙根的外周轮廓，将点进行拟合得到曲线簇，结合牙根形状边缘线能够得到牙根曲面，最后生成完整的虚拟牙根。通过四个参数确定牙根形状边缘线，再通过投影点生成曲线簇、曲线簇生成牙根曲面的方式，能够得到精准度较高的虚拟牙根，极大地缩小了与真实牙根之间的差距。在矫治方案设计阶段，能够为医生提供具有牙冠和牙根的完成牙齿模型，使得在矫治方案设计过程中，精确地模拟牙冠和牙根的移动过程，提高矫治方案的可靠性和成功率。附图说明图1为本发明一实施例中虚拟牙根生成方法的整体流程图；图2为本发明一实施例中虚拟牙根生成方法中牙冠模型以及颈缘点中最低点的示意图；图3为本发明一实施例中虚拟牙根生成方法中构建平面的示意图；图4为发明一实施例中虚拟牙根生成方法中颈缘点投影到平面上得到投影点的示意图；图5为发明一实施例中虚拟牙根生成方法中定位点的示意图；图6为发明一实施例中虚拟牙根生成方法中构造牙根形状边缘线的示意图；图7为发明一实施例中虚拟牙根生成方法中构造第一切矢、第二切矢的示意图。图8为发明一实施例中虚拟牙根生成方法中构造第一直线、第二直线的示意图；图9为发明一实施例中虚拟牙根生成方法中根据牙根形状边缘线对投影点进行收缩得到的待拟合点的示意图；图10为发明一实施例中虚拟牙根生成方法中牙根曲面的示意图；图11为发明一实施例中虚拟牙根生成方法中构造对牙根曲面顶部进行拼接的示意图；图12为发明一实施例中虚拟牙根生成方法中构造对牙根曲面底部进行补洞后得到的完整牙齿示意图。具体实施方式为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图对本发明的具体实施方式做详细的说明。在下面的描述中阐述了很多具体细节以便于充分理解本发明。但是本发明能够以很多不同于在此描述的其它方式来实施，本领域技术人员可以在不违背本发明内涵的情况下做类似改进，因此本发明不受下面公开的具体实施例的限制。在本发明的描述中，需要理解的是，术语“中心”、“纵向”、“横向”、“长度”、“宽度”、“厚度”、“上”、“下”、“前”、“后”、“左”、“右”、“竖直”、“水平”、“顶”、“底”、“内”、“外”、“顺时针”、“逆时针”、“轴向”、“径向”、“周向”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括至少一个该特征。在本发明的描述中，“多个”的含义是至少两个，例如两个，三个等，除非另有明确具体的限定。在本发明中，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”、“固定”等术语应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或成一体；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通或两个元件的相互作用关系，除非另有明确的限定。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本发明中的具体含义。在本发明中，除非另有明确的规定和限定，第一特征在第二特征“上”或“下”可以是第一和第二特征直接接触，或第一和第二特征通过中间媒介间接接触。而且，第一特征在第二特征“之上”、“上方”和“上面”可是第一特征在第二特征正上方或斜上方，或仅仅表示第一特征水平高度高于第二特征。第一特征在第二特征“之下”、“下方”和“下面”可以是第一特征在第二特征正下方或斜下方，或仅仅表示第一特征水平高度小于第二特征。需要说明的是，当元件被称为“固定于”或“设置于”另一个元件，它可以直接在另一个元件上或者也可以存在居中的元件。当一个元件被认为是“连接”另一个元件，它可以是直接连接到另一个元件或者可能同时存在居中元件。本文所使用的术语“垂直的”、“水平的”、“上”、“下”、“左”、“右”以及类似的表述只是为了说明的目的，并不表示是唯一的实施方式。参阅图1，图1示出了本发明一实施例中虚拟牙根生成方法的整体流程图，该方法包括步骤100至步骤400：S100、获取牙冠模型和牙根深度，并根据牙冠模型的颈缘点得到投影点。一颗完整的牙齿信息包括位于牙龈上方的牙冠、以及被包裹在牙龈内部的牙根。本实施例中，将牙根区域分为三个部分，第一部分是牙根曲面、第二部分是牙根曲面顶部与牙冠之间需要拼接的部位、第三部分是牙根曲面底部需要补洞的部位。即计算出牙根曲面后，对其进行拼接和补洞就可以得到一颗完整的牙齿，由此能够精确地模拟牙冠和牙根的移动过程，避免在移牙过程中出现牙根碰撞。具体地，牙冠数据可以通过口腔扫描仪直接从患者口腔中进行三维扫描，或者通过光学、CT扫描患者牙颌石膏模型或印模获得，然后对牙齿进行分割，随后进行邻接面修补，可以得到单颗牙齿的牙冠模型。投影点用于确定牙根曲面的边缘形状、顶部轮廓以及底部轮廓，从而得到完整的牙根。S200、根据投影点和牙根深度得到牙根形状边缘线。具体地，通过投影点确定第一参数、通过第一参数确定第二参数，再分别通过第一参数和第二参数确定第三参数和第四参数。结合四个参数影响并确定唯一的牙根形状边缘线，能够得到与牙冠匹配较好的牙根轮廓形状，使得最终生成的虚拟牙根能够更加地接近真实牙根。S300、根据牙根形状边缘线得到牙根曲面。具体地，曲面由若干条曲线组成，牙根形状边缘线仅仅是确定了其中一条曲线，通过牙根形状边缘线以及投影点来确定其他曲线，由此能够得到形状唯一确定的牙根曲面。S400、根据牙根曲面生成虚拟牙根。得到的牙根曲面只是牙根区域的一部分，对牙根曲面进一步进行拼接和补洞即可得到完整的虚拟牙根。通过该方法能够得到精准度较高的虚拟牙根，极大地缩小了与真实牙根之间的差距。在矫治方案设计阶段，能够为医生提供具有牙冠和牙根的完成牙齿模型，使得在矫治方案设计过程中，精确地模拟牙冠和牙根的移动过程，提高矫治方案的可靠性和成功率。参阅图2、图3和图4，S100获取牙冠模型和牙根深度，并根据牙冠模型的颈缘点得到投影点包括以下步骤：S101、提取牙冠模型的颈缘线，并采集颈缘线上的颈缘点。具体地，牙冠与牙根之间以牙颈为分界，这一分界为弧形曲线，该弧形曲线定义为颈缘线，数字模型中颈缘线是由离散有序的点列组成，这些点称为颈缘点。S102、以牙冠指向牙根根尖的方向为牙根轴向z，沿牙根轴向计算颈缘点的最低点PO。S103、根据牙根轴向z和最低点PO构建平面S。具体地，通过点法式构建平面S，构建方法：P0点坐标为，牙根轴向的法向量则根据点法式得到平面S方程：a+b+c＝0。S104、将颈缘点投影到平面S上得到投影点。投影点组成了牙根曲面顶部的轮廓形状。参阅图4、图5、图6和图7，S200根据投影点和牙根深度得到牙根形状边缘线包括以下步骤：S201、计算投影点的中心点O。具体地，通过均值算法计算出中心点O坐标：投影点坐标为、…，则中心点O坐标为牙根深度为该中心点O到牙根根尖的长度，牙根深度由用户指定，成年人的牙根深度在8-15mm。S202、计算中心点O与每个投影点的距离，并获取最远距离d1与最远点p1。具体地，可以采用欧式距离计算每个投影点到中心点O的距离，欧式距离计算公式为d＝sqrt2+2)。最远距离d1用于计算后面求取牙根曲面时所要用到的收缩系数，最远点p1用于作为计算牙根形状边缘线的第一参数。S203、根据最远点p1获取定位点p2，定位点p2在最远点p1指向中心点O的方向上与最远点p1具有第一预设距离L1，在平行于牙根轴向z的方向上与最远点p1具有第二预设距离L2。具体地，定位点p2与最远点p1之间的距离根据两个方向上的投影确定，由此可以确定定位点p2的位置。设定定位点p2与最远点p1的连线为L，那么第一预设距离L1是L在最远点p1与中心点O所在直线上的投影距离，第二预设距离L2是L在平行于牙根轴向z的直线上的投影距离。优选地，将最远点p1沿指向中心点O的方向平移第一预设距离L1，第一预设距离L1为最远距离d1的A倍。第一预设距离L1可以确定牙根曲面底部的宽度，即数值A越大，那么L1越靠近中心点，牙根曲面底部就越窄，数值A越小，那么L1越靠近最远点p1，牙根曲面底部就越宽，A为任意数值，本实施例中A为0.5。确定第一预设距离L1后，再沿指向牙根轴向的方向平移第二预设距离L2，第二预设距离L2为牙根深度的B倍。第二预设距离L2可以确定牙根曲面的长度，即数值B越大，牙根曲面的长度越长，数值B越小，牙根曲面的长度越小，B为任意数值，本实施例中B为0.67。根据最远点p1、第一预设距离L1和第二预设距离L2，可以得到定位点p2，定位点p2用于作为计算牙根形状边缘线的第二参数。S204、根据最远点p1获取第一切矢根据定位点p2获取第二切矢/＞第一切矢/＞第二切矢/＞具有方向和长度，第一切矢/＞经过最远点，第二切矢/＞经过定位点，第一切矢/＞作为计算牙根形状边缘线的第三参数，第二切矢/＞作为计算牙根形状边缘线的第四参数。S205、根据最远点p1、第一切矢定位点p2以及第二切矢/＞得到牙根形状边缘线。具体地，牙根形状边缘线通过计算Hermite曲线得到，Hermite曲线为给定两端点及两端点向量得到的三次曲线。本实施例中，牙根形状边缘线的两端点为最远点p1和定位点p2，两端点向量为第一切矢和第二切矢/＞通过最远点p1、定位点p2、第一切矢/＞以及第二切矢/＞就能够通过计算得到Hermite曲线，该曲线即为牙根形状边缘线，通过以上四个参数计算得到的牙根形状边缘线，能够模拟出精确度与真实牙根更贴近的虚拟牙根。在一些实施例中，S204根据最远点p1获取第一切矢根据定位点p2获取第二切矢包括以下步骤：S2041、根据牙根轴向z，以预设长度构造经过最远点p1的第一矢量方向确定、长度确实，即可以得到确定的矢量。具体地，第一矢量的方向是牙根轴向z，起始点为最远点p1，预设长度为定位点p2与最远点p1之间距离的C倍，C可以为0.2-1.0之间的任意数值，本实施例中，C为0.7。预设长度的改变会影响矢量的长度，从而会影响Hermite曲线的计算，最终会改变牙根形状边缘线的形状，操作人员可以根据模拟出的形状效果确定C的具体数值。S2042、根据最远点p1指向中心点O的方向，以预设长度构造经过定位点p2的第二矢量同第一矢量/＞的方法，C为0.4，根据方向和预设长度可以得到确定的第二矢量/＞第二矢量/＞的起始点为定位点p2。S2043、第一切矢与第一矢量/＞之间具有第一预设角度θ1，第二切矢/＞与第二矢量/＞之间具有第二预设角度θ2。具体地，通过第一预设角度θ1确定第一切矢的方向，通过第二预设角度θ2确定第二切矢/＞的方向，第一切矢/＞和第二切矢/＞的方向也会影响Hermite曲线的计算，第一预设角度θ1和第二预设角度θ2可以为0-60°之间任意的角度值，本实施例中，θ1、θ2均为45°，将第一矢量/＞顺时针移动第一预设角度45°可以得到第一切矢/＞将第二矢量/＞逆时针移动45°可以得到第二切矢/＞具体地，第一切矢/＞是Hermite曲线在最远点的切量，第二切矢/＞是Hermite曲线在定位点的切量。参阅图8、图9和图10，S300根据牙根形状边缘线得到牙根曲面包括以下步骤：S301、根据牙根形状边缘线计算第一收缩系数和第二收缩系数。牙根曲面顶部到底部呈现逐渐缩小的趋势，计算第一收缩系数和第二收缩系数用于确定牙根曲面从顶部到底部的收缩幅度，由此确定整个牙根曲面从顶部到底部的形状。S302、将每个投影点根据第一收缩系数和第二收缩系数进行收缩得到点集，对点集进行拟合得到曲线簇。具体地，点集是待拟合的网格点，对网格点的每一列进行插值得到若干个样条曲线。牙根形状边缘线仅仅确定了牙根曲面边缘线的形状，通过对每个投影点进行收缩能够得到整个牙根曲面的外圈轮廓，从而确定整个牙根曲面的形状。S303、根据曲线簇和牙根形状边缘线得到牙根曲面。对曲线簇和牙根形状边缘线插值可以能够得到形状确定的牙根曲面。在一些实施例中，S301根据牙根形状边缘线计算第一收缩系数和第二收缩系数包括以下步骤：S3011、构造第一直线P和第二直线Q，第一直线P为中心点O和最远点p1所在直线，第二直线Q为平行于牙根轴向z且经过中心点O的直线。S3012、对牙根形状边缘线进行采样点采样，并计算每个采样点到第一直线P和第二直线Q的距离。可以通过欧式距离计算每个采样点到第一直线P和第二直线Q的距离。S3013、第一收缩系数为采样点到第二直线的距离与最远距离的比值，第二收缩系数为采样点到第一直线的距离。参阅图11和图12，S400根据牙根曲面生成虚拟牙根包括：将牙根曲面的顶部与牙冠模型进行拼接，将牙根曲面的底部进行补洞，得到虚拟牙根。具体地，对牙根曲面进行网格化，网格化时顶部边界参数，例如0.0不采样，跨过一定步长，例如步长值/弧长后开始采样，留出拼接空间。将网格化后的牙根曲面顶部与牙冠模型进行拼接，对网格化后的牙根曲面底部进行补洞，可以采用基于薄板能量的方法对底部进行补洞，即得到完整的牙根区域。对生成的牙根区域进行光顺处理，可以采用Laplace的方式做光顺处理，最后就能够得到完整且相对准确的虚拟牙根模型，便于医师进行牙齿正畸计划设计。最后对整个实施过程进行描述：输入牙冠模型、牙根轴向z以及牙根深度，牙根深度为8mm；查找牙冠模型的颈缘点和颈缘线；沿牙根轴向z查找颈缘点中的低端最低点PO；以最低点PO以及牙根轴向z构建最低平面S；将颈缘点投影到最低平面S上，并计算投影点的均值坐标点作为中心点O；遍历投影点，采用欧式距离计算每一个投影点与中心点O的距离，并记录与中心点O最远距离的最远点P1，与最远点P1的距离记为最远距离d1；将最远点p1沿指向中心点O的方向平移最远距离的0.5倍，再沿指向牙根轴向的方向平移牙根深度的0.67倍，记录低端定位点p2；以牙根轴向z为方向、以0.7为长度构造最远点p1的第一切矢以最远点p1指向中心点O的方向为方向，以0.4的长度构造定位点p2的第二切矢/＞以最远点p1、第一切矢/＞定位点p2以及第二切矢/＞插值构造Hermite曲线，即得到牙根形状边缘线。构建经过中心点O和最远点p1的水平直线P，构建平行于牙根轴向z且经过中心点O的垂直直线Q；在Hermite曲线上均匀采样，计算采样点到水平直线P和垂直直线Q的距离，以采样点到垂直直线Q的距离与最远距离d1的比值作为第一收缩系数，以采样点到水平直线P的距离作为第二收缩系数；将所有投影点按照第一收缩系数和第二收缩系数进行采样，得到待拟合的网格点；对网格点的每一列进行插值得到一簇样条曲线；对该簇曲线插值得到蒙皮曲面，即得到牙根曲面；对牙根曲面进行拼接和补洞即可得到完整的牙根区域,补洞的深度略小于牙根深度的0.33倍。应该理解的是，虽然如上所述的各实施例所涉及的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，如上所述的各实施例所涉及的流程图中的至少一部分步骤可以包括多个步骤或者多个阶段，这些步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤中的步骤或者阶段的至少一部分轮流或者交替地执行。基于同样的发明构思，本申请实施例还提供一种用于实现上述所涉及的虚拟牙根生成方法的虚拟牙根生成装置。该装置所提供的解决问题的实现方案与上述方法中所记载的实现方案相似，故下面所提供的一个或多个虚拟牙根生成装置实施例中的具体限定可以参见上文中对于虚拟牙根生成方法的奠定，在此不在赘述。在一些实施例中，提供了一种虚拟牙根生成装置，包括获取模块、第一计算模块、第二计算模块以及合成模块，其中：获取模块，用于获取牙冠模型和牙根深度，并根据牙冠模型颈缘点得到投影点。第一计算模块，用于根据投影点和牙根深度得到牙根形状边缘线。第二计算模块，用于根据牙根形状边缘线得到牙根曲面。合成模块，用于根据牙根曲面生成虚拟牙根。在一些实施例中，获取模块根据获取牙冠模型和牙根深度，并根据牙冠模型颈缘点得到投影点，包括：提取牙冠模型的颈缘线，并采集颈缘线上的颈缘点；以牙冠指向牙根根尖的方向为牙根轴向，沿牙根轴向计算颈缘点的最低点；根据牙根轴向和最低点构建平面；将颈缘点投影到平面上得到投影点。在一些实施例中，第一计算模块根据投影点和牙根深度得到牙根形状边缘线，包括：计算投影点的中心点；计算中心点与每个投影点的距离，并获取最远距离与最远点；根据最远点获取定位点，定位点在最远点指向中心点的方向上与最远点具有第一预设距离，在平行于牙根轴向的方向上与最远点具有第二预设距离；根据最远点获取第一切矢，根据定位点获取第二切矢；根据最远点、第一切矢、定位点以及第二切矢得到牙根形状边缘线。在一些实施例中，第一计算模块根据最远点获取第一切矢，根据定位点获取第二切矢包括：根据牙根轴向，以预设长度构造经过最远点的第一矢量；根据最远点指向中心点的方向，以预设长度构造经过定位点的第二矢量；第一切矢与第一矢量之间具有第一预设角度，第二切矢与第二矢量之间具有第二预设角度。在一些实施例中，第二计算模块根据牙根形状边缘线得到牙根曲面，包括：根据牙根形状边缘线计算第一收缩系数和第二收缩系数；将每个投影点根据第一收缩系数和第二收缩系数进行收缩得到点集，对点集进行拟合得到曲线簇；根据曲线簇和牙根形状边缘线得到牙根曲面。在一些实施例中，第二计算模块根据牙根形状边缘线计算第一收缩系数和第二收缩系数包括：构造第一直线和第二直线，第一直线为中心点和最远点所在直线，第二直线为平行于牙根轴向且经过中心点的直线；对牙根形状边缘线进行采样点采样，并计算每个采样点到第一直线和第二直线的距离；第一收缩系数为采样点到第二直线的距离与最远距离的比值，第二收缩系数为采样点到第一直线的距离。在一些实施例中，合成模块根据牙根曲面生成虚拟牙根，包括：将牙根曲面的顶部与牙冠模型进行拼接，将牙根曲面的底部进行补洞，得到虚拟牙根。上述虚拟牙根生成装置中的各个模块可全部或部分通过软件、硬件及其组合来实现。上述各模块可以硬件形式内嵌于或独立于计算机设备中的处理器中，也可以以软件形式存储于计算机设备中的存储器中，以便于处理器调用执行以上各个模块对应的操作。在一个实施例中，提供了一种计算机设备，该计算机设备可以是服务器。该计算机设备包括处理器、存储器、输入/输出接口和通信接口。其中，处理器、存储器和输入/输出接口通过系统总线连接，通信接口通过输入/输出接口连接到系统总线。其中，该计算机设备的处理器用于提供计算和控制能力。该计算机设备的存储器包括非易失性存储介质和内存储器。该非易失性存储介质存储有操作系统、计算机程序和数据库。该内存储器为非易失性存储介质中的操作系统和计算机程序的运行提供环境。该计算机设备的数据库用于存储牙齿模型相关数据。该计算机设备的输入/输出接口用于处理器与外部设备之间交换信息。该计算机设备的通信接口用于与外部的终端通过网络连接通信。该计算机程序被处理器执行时以实现一种虚拟牙根生成方法。在一些实施例中，提供了一种计算机设备，包括存储器和处理器，存储器中存储有计算机程序，该处理器执行计算机程序时实现上述各方法实施例中的步骤。在一些实施例中，提供了一种计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现上述各方法实施例中的步骤。在一些实施例中，提供了一种计算机程度产品，包括计算机程序，该计算机程序被处理器执行时实现上述各方法实施例中的步骤。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一非易失性计算机可读取存储介质中，该计算机程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、数据库或其它介质的任何引用，均可包括非易失性和易失性存储器中的至少一种。非易失性存储器可包括只读存储器、磁带、软盘、闪存、光存储器、高密度嵌入式非易失性存储器、阻变存储器、磁变存储器、铁电存储器、相变存储器、石墨烯存储器等。易失性存储器可包括随机存取存储器或外部高速缓冲存储器等。作为说明而非局限，RAM可以是多种形式，比如静态随机存取存储器或动态随机存取存储器等。本申请所提供的各实施例中所涉及的数据库可包括关系型数据库和非关系型数据库中至少一种。非关系型数据库可包括基于区块链的分布式数据库等，不限于此。本申请所提供的各实施例中所涉及的处理器可为通用处理器、中央处理器、图形处理器、数字信号处理器、可编程逻辑器、基于量子计算的数据处理逻辑器等，不限于此。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对本申请专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请的保护范围应以所附权利要求为准。
