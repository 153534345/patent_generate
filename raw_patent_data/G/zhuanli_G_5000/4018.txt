标题title
一种基于混合灰狼粒子群算法的车辆路径规划方法
摘要abst
本发明公开了一种基于混合灰狼粒子群算法的车辆路径规划方法，包括以下步骤：S1确认配送中心、配送车辆数量、各个车辆的容量约束、总配送距离以及选择多个任务点；S2采用GWOPSO算法求解多目标带时间窗车辆路径规划，进而得到最终的规划路径以及车辆的分配情况。本发明采用多规则方式来初始化种群，保证了种群的多样性和分散性。采用多策略选择最优个体，能平衡种群的多样性和收敛性，使算法探索更多的区域。本发明融合了灰狼算法和粒子群算法两种算法的优点，粒子群算法能使算法快速收敛，灰狼算法能减少算法陷入局部最优的风险。
权利要求书clms
1.一种基于混合灰狼粒子群算法的车辆路径规划方法，其特征在于，包括以下步骤：S1确认配送中心、配送车辆数量、各个车辆的容量约束、总配送距离以及选择多个任务点；S2采用GWOPSO算法，即Grey Wolf Optimizer &amp; Particle Swarm Optimization算法求解多目标带时间窗车辆路径规划，进而得到最终的规划路径以及车辆的分配情况；所述GWOPSO算法包括以下步骤：S21设置算法参数，主要包括种群大小N、最大迭代次数Maxt、外部存档数目a、划分网格数量b；S22采用最短距离规则和最大满意度规则来实施种群的初始化，并对种群个体进行编码操作和计算目标函数值，然后将这些个体加入到外部存档中，最后刷新外部存档；S23采用多策略方式从外部存档中选出3个最优个体、/＞和/＞；S24采用灰狼算法或粒子群算法对种群中的所有个体进行更新，将更新后的个体并入外部存档中，并刷新外部存档；S25选择外部存档中最优的一些个体进行局部搜索，并将得到的新个体并入外部存档，然后刷新外部存档；S26如果算法的迭代次数小于最大迭代次数，则转到步骤S23进行循环运算；否则，转到步骤S27；S27随机从外部存档中选择一定比例的个体进行全局搜索，并将全局搜索得到的新个体并入外部存档，然后刷新外部存档；S28输出外部存档中三个最优个体对应的车辆路径规划方案。2.根据权利要求1所述的基于混合灰狼粒子群算法的车辆路径规划方法，其特征在于，所述最短距离规则为：当前车辆从配送中心出发，将满足当前车辆容量约束并能在规定时间窗口内服务的任务点记录下来，且最短距离服务原则为：选择距离最小的任务点作为下一个被服务的任务点，当当前车辆的剩余容量不满足下一个任务点的需求时，当前车辆将返回配送中心，配送中心将派遣新车辆，所述新车辆继续按照上述的最短距离服务原则对任务点进行服务，直到所有任务点被服务；所述最大满意度规则为：车辆从配送中心出发，将满足车辆容量约束并能在规定时间窗口内服务的任务点记录下来，且满意度最大服务原则为：选择满意度最大的任务点作为下一个被服务的任务点，当车辆的剩余容量不满足下一个任务点的需求时，车辆将返回配送中心，配送中心将派遣新车辆，继续按照上述的满意度最大服务原则对任务点进行服务，直到所有任务点被服务。3.根据权利要求1所述的基于混合灰狼粒子群算法的车辆路径规划方法，其特征在于，所述目标函数为：；/＞其中，CT表示车辆违反时间窗口的成本，CU表示车辆启用成本，CD表示车辆的运输成本，I表示任务点的数量，为第i个任务点用户的满意度，/＞为总成本，/＞为用户的总满意度。4.根据权利要求1所述的基于混合灰狼粒子群算法的车辆路径规划方法，其特征在于，所述刷新外部存档为取出外部存档中所有的个体，组成一个解集合，然后从这个解集合中按照解对应的目标函数值选取所有的非劣解组成非劣解集合，并根据非劣解集合中各个解的密度进行排序，密度小的解排在前面，最后选择排在非劣解集合前面的a个解保存到外部存档中。5.根据权利要求1所述的基于混合灰狼粒子群算法的车辆路径规划方法，其特征在于，所述步骤S23具体包括：S231利用网格技术对外部存档中的个体进行区域划分，将双目标形成的二维空间划分为多个网格，并计算每个个体的网格坐标；S232计算个体的拐点距离和加权分布距离；其中，拐点距离计算方法为：根据外部存档中的2个极端个体，确定一条直线，后计算外部存档每个个体距离该直线的距离；个体的加权分布距离计算公式如下：；其中，M为目标函数的个数，为个体/＞在第m维度上的目标函数值，/＞为同一网格中拐点距离最大的个体；S233采用距离最大策略或加权分布距离最大策略来选择最优个体，即：则从两个极端个体所在网格，分别选取网格中拐点距离值或加权分布距离值中最大的个体为最优个体和/＞，并选择外部存档中拐点距离值或加权分布距离值最大的个体为最优个体/＞。6.根据权利要求5所述的基于混合灰狼粒子群算法的车辆路径规划方法，其特征在于，步骤S24中，对种群中的所有个体进行更新包括：选择灰狼算法或粒子群算法更新种群中所有个体；采用的灰狼算法更新个体过程为：若当前迭代次数为t，则种群中的每个个体对应一头狼，设狼群的个数为种群数目N，每头狼的位置为，并指定/＞、/＞和/＞狼为步骤S23选择的3个最优个体/＞、/＞和/＞，它们的位置分别为/＞；计算第i头狼与狼的距离/＞、第i头狼与/＞狼的距离/＞和第i头狼与/＞狼的距离/＞，表示为：；然后计算第i头狼向、/＞和/＞狼移动的趋势项，分别记为/＞：；式中，，/＞和/＞为上的随机数，j=1,2,3；则第i头狼的位置更新为：；采用的粒子群算法更新个体公式如下：；；；其中，表示第i个个体第t次迭代时的速度，/＞和/＞为学习因子；t为当前迭代次数，Maxt为算法最大迭代次数，/＞为惯性系数，/＞选0.4，/＞选0.9；/＞、/＞和/＞为步骤S23选择的3个最优个体/＞、/＞和/＞的位置，/＞为第i个个体更新后的位置。7.根据权利要求6所述的基于混合灰狼粒子群算法的车辆路径规划方法，其特征在于，所述步骤S25具体包括：S251选择外部存档中最优的3个个体，对这些个体的编码进行映射，得到对应的车辆路径；S252对于最优个体对应的路径，先进行路径内部局部搜索操作，搜索次数为任务点数目，再进行路径间局部搜索操作，搜索次数为两条路径中最多的任务点数目，若局部搜索得到的路径优于原路径，则代替原路径；S252将局部搜索得到的个体并入外部存档，然后刷新外部存档。8.根据权利要求7所述的基于混合灰狼粒子群算法的车辆路径规划方法，其特征在于，所述路径内部局部搜索操作包括：1）选取1条路径R1，随机交换路径内2个任务点的位置；2）选取1条路径R1，随机选择2个任务点，将2个任务点间的路径进行逆转；3）选取1条路径R1，随机选择一个任务点，将其插入到其它任务点前；所述路径间局部搜索操作包括：4）选取2条路径R1和R2，分别在R1和R2中随机选择任务点和/＞，交换/＞和/＞；5）选取2条路径R1和R2，在R1中随机选择2个连续任务点和/＞，在R2中随机选择任务点/＞，将/＞和/＞插入到/＞前；6）选取2条路径R1和R2，在R1中随机选择2个连续任务点和/＞，在R2中随机选择2个连续任务点/＞和/＞，交换/＞、/＞和/＞、/＞；7）选取2条路径R1和R2，在R1中随机选择2个连续任务点和/＞，在R2中随机选择任务点/＞，交换/＞、/＞和/＞。9.一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现上述权利要求1-8任一项所述的方法。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，该计算机程序被处理器执行时实现上述权利要求1-8任一项所述的方法。
说明书desc
技术领域本发明属于路径规划技术领域，具体涉及一种基于混合灰狼粒子群算法的车辆路径规划方法。背景技术随着现代物流配送系统的建立和电子商务的快速发展，传统的车辆路径规划问题很难适应高效准时的配送要求。带时间窗的车辆路径规划与VRP相比，更符合现实的配送流程，但求解的过程也更加复杂。在实际生活的配送过程中，如果只考虑成本，可能会产生反效果，因此需要考虑客户满意度，若运输成本最小且对于客户满意度最高，则可以实现企业与客户的双赢，提高服务质量。智能启发式算法对于求解VRPTW问题有着一些优势，引起了不少专家学者的关注，比如遗传算法、粒子群算法和蚁群算法等。以上算法均对VRPTW的求解进行了一定程度的探究，但是遗传算法易早熟收敛，蚁群算法易陷入局部最优，粒子群算法不能直接应用于离散空间。目前尚没有哪种算法在求解VRPTW问题上存在绝对优势，因此寻找能有效求解该问题的智能算法仍有重要的现实意义。灰狼优化算法是Mirjalili等提出的元启发式算法，它源于对于灰狼种群制度的模仿。该算法原理简单、参数设置少和容易实现等特点，但不能用于离散空间且易陷入局部解。因此，如何让灰狼算法应用于离散空间并避免陷入局部解也是一个需要考虑的问题。发明内容本发明的目的在于克服现有方法的不足，提供一种基于混合灰狼粒子群算法的车辆路径规划方法，解决了双目标带时间窗的车辆路径规划中，运输总成本高和客户满意度不高的问题。技术方案：本发明提供一种基于混合灰狼粒子群算法的车辆路径规划方法，包括以下步骤：S1确认配送中心、配送车辆数量、各个车辆的容量约束、总配送距离以及选择多个任务点；S2采用GWOPSO算法求解多目标带时间窗车辆路径规划，进而得到最终的规划路径以及车辆的分配情况；所述GWOPSO算法包括以下步骤：S21设置算法参数，主要包括种群大小N、最大迭代次数Maxt、外部存档数目a、划分网格数量b；S22采用最短距离规则和最大满意度规则来实施种群的初始化，并对种群个体进行编码操作和计算目标函数值，然后将这些个体加入到外部存档中，最后刷新外部存档；S23采用多策略方式从外部存档中选出3个最优个体、/＞和/＞；/＞S24采用灰狼算法或粒子群算法对种群中的所有个体进行更新，将更新后的个体并入外部存档中，并刷新外部存档；S25选择外部存档中最优的一些个体进行局部搜索，并将得到的新个体并入外部存档，然后刷新外部存档；S26如果算法的迭代次数小于最大迭代次数，则转到步骤S23进行循环运算；否则，转到步骤S27；S27随机从外部存档中选择一定比例的个体进行全局搜索，并将全局搜索得到的新个体并入外部存档，然后刷新外部存档；S28输出外部存档中特定数目的最优个体对应的车辆路径规划方案。进一步的，包括：所述最短距离规则为：当前车辆从配送中心出发，将满足当前车辆容量约束并能在规定时间窗口内服务的任务点记录下来，且最短距离服务原则为：选择距离最小的任务点作为下一个被服务的任务点，当当前车辆的剩余容量不满足下一个任务点的需求时，当前车辆将返回配送中心，配送中心将派遣新车辆，所述新车辆继续按照上述的最短距离服务原则对任务点进行服务，直到所有任务点被服务。所述最大满意度规则为：车辆从配送中心出发，将满足车辆容量约束并能在规定时间窗口内服务的任务点记录下来，且满意度最大服务原则为：选择满意度最大的任务点作为下一个被服务的任务点，当车辆的剩余容量不满足下一个任务点的需求时，车辆将返回配送中心，配送中心将派遣新车辆，继续按照上述的满意度最大服务原则对任务点进行服务，直到所有任务点被服务。进一步的，包括：所述目标函数为：；其中，CT表示车辆违反时间窗口的成本，CU表示车辆启用成本，CD表示车辆的运输成本，I表示任务点的数量，为第i个任务点用户的满意度，/＞为总成本，/＞为用户的总满意度。进一步的，包括：所述刷新外部存档为取出外部存档中所有的个体，组成一个解集合，然后从这个解集合中按照解对应的目标函数值选取所有的非劣解组成非劣解集合，并根据非劣解集合中各个解的密度进行排序，密度小的解排在前面，最后选择排在非劣解集合前面的a个解保存到外部存档中。进一步的，包括：所述步骤S23具体包括：S231利用网格技术对外部存档中的个体进行区域划分，将双目标形成的二维空间划分为多个网格，并计算每个个体的网格坐标；S232计算个体的拐点距离和加权分布距离；其中，拐点距离计算方法为：根据外部存档中的2个极端个体，确定一条直线，后计算外部存档每个个体距离该直线的距离；个体的加权分布距离计算公式如下：；其中，M为目标函数的个数，为个体/＞在第m维度上的目标函数值；S233采用距离最大策略或加权分布距离最大策略来选择最优个体，即：则从两个极端个体所在网格，分别选取网格中拐点距离值或加权分布距离值中最大的个体为最优个体和/＞，并选择外部存档中拐点距离值或加权分布距离值最大的个体为最优个体/＞。进一步的，包括：步骤S24中，对种群中的所有个体进行更新包括：按一定概率选择灰狼算法或粒子群算法为来更新种群中所有个体。采用的灰狼算法更新个体过程为：若当前迭代次数为t，则种群中的每个个体对应一头狼，设狼群的个数为种群数目N，每头狼的位置为，并指定/＞、/＞和/＞狼为步骤S23选择的3个最优个体/＞、/＞和/＞，它们的位置分别为/＞；计算第i头狼与、/＞和/＞狼的距离：；然后计算第i头狼向、/＞和/＞狼移动的趋势项：；式中，，/＞和/＞为上的随机数，j=1,2,3；则第i头狼的位置更新为：；采用的粒子群算法更新个体公式如下：；；；其中，表示第i个个体第t次迭代时的速度，/＞和/＞为学习因子；t为当前迭代次数，Maxt为算法最大迭代次数，/＞为惯性系数，/＞选0.4，/＞选0.9；、/＞和/＞为步骤S23选择的3个最优个体/＞、/＞和/＞的位置，为第i个个体更新后的位置。进一步的，包括：所述步骤S25具体包括：S251选择外部存档中最优的3个个体，对这些个体的编码进行映射，得到对应的车辆路径；S252对于最优个体对应的路径，先进行路径内部局部搜索操作，搜索次数为任务点数目，再进行路径间局部搜索操作，搜索次数为两条路径中最多的任务点数目，若局部搜索得到的路径优于原路径，则代替原路径；S252将局部搜索得到的个体并入外部存档，然后刷新外部存档。进一步的，包括：所述路径内部局部搜索操作包括：1）选取1条路径R1，随机交换路径内2个任务点的位置；2）选取1条路径R1，随机选择2个任务点，将2个任务点间的路径进行逆转；3）选取1条路径R1，随机选择一个任务点，将其插入到其它任务点前；所述路径间局部搜索操作包括：4）选取2条路径R1和R2，分别在R1和R2中随机选择任务点和/＞，交换/＞和；/＞5）选取2条路径R1和R2，在R1中随机选择2个连续任务点和/＞，在R2中随机选择任务点/＞，将/＞和/＞插入到/＞前；6）选取2条路径R1和R2，在R1中随机选择2个连续任务点和/＞，在R2中随机选择2个连续任务点/＞和/＞，交换/＞、/＞和/＞、/＞；7）选取2条路径R1和R2，在R1中随机选择2个连续任务点和/＞，在R2中随机选择任务点/＞，交换/＞、/＞和/＞。另一方面，本发明还提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现上述方法。最后，本发明还提供一种计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现上述的方法。有益效果：1、本发明采用多规则方式来初始化种群，保证了种群的多样性和分散性。采用多策略选择最优个体，能平衡种群的多样性和收敛性，使算法探索更多的区域。2、本发明融合了灰狼算法和粒子群算法两种算法的优点，粒子群算法能使算法快速收敛，灰狼算法能减少算法陷入局部最优的风险。3、本发明采用局部搜索策略，充分利用不同的局部搜索操作，动态地选择合适的局部策略，可以有效地提高算法的局部探索能力，保证种群的探索深度，有利于获得最优解决方案。4、本发明采用全局策略对个体进行重新插入操作，使得个体变得更优，提高了算法的整体性能。通过对实例进行测试，结果表明本发明所提出的算法能够高效地解决双目标带时间窗路径规划问题。附图说明图1 本发明实施例所述的路径规划方法流程图；图2 本发明实施例所述的个体不同编码映射图；图3本发明实施例所述的加权分布距离最大策略选择实例图；图4 本发明实施例所述的任务点分布图。具体实施方式下面结合附图和具体实施方式对本发明作进一步的说明。本发明是一种基于混合灰狼粒子群算法求解双目标带时间窗车辆路径规划问题的方法，流程图如图1所示，具体包括以下步骤：步骤1：设置算法参数，主要包括种群大小N、最大迭代次数Maxt、外部存档数目a、划分网格数量b等。步骤2：采用最短距离规则和最大满意度规则来实施种群的初始化，并对种群个体进行编码操作和计算目标函数值，然后将这些个体加入到外部存档中，最后刷新外部存档。本步骤所提及的最短距离规则为：车辆从配送中心出发，将满足车辆容量约束并能在规定时间窗口内服务的任务点记录下来，选择距离最小的任务点作为下一个被服务的任务点，当车辆的剩余容量不满足下一个任务点的需求时，车辆将返回配送中心，配送中心将派遣新车辆，继续按照上述方法对任务点进行服务，直到所有任务点被服务。本步骤所提及的最大满意度规则为：车辆从配送中心出发，将满足车辆容量约束并能在规定时间窗口内服务的任务点记录下来，选择满意度最大的任务点作为下一个被服务的任务点，当车辆的剩余容量不满足下一个任务点的需求时，车辆将返回配送中心，配送中心将派遣新车辆，继续按照上述方法对任务点进行服务，直到所有任务点被服务。本步骤所提及的编码操作如图2所示，假设配送中心需要服务的任务点序号的序列TN=，根据最短距离规则或最大满意度规则初始化得到的3辆配送车辆的路径分别为：R1=,R2=,R3=，其中0为配送中心。映射R-1D可以将车辆路径映射为一维编码，即将所有车辆的路径去除配送中心，并按车辆序号顺序将路径的其它任务点合并成一维向量。R1、R1、R3通过映射R-1D后得到一维编码d1如下：；编码中，数字代表任务点序号，数字下标代表该任务点分配的车辆。具体为：需要访问的任务点是1~9，配送点为0，所有车辆从0出发还要回到0。采用最短距离规则或最大满意度规则，给3辆车安排需要访问任务点，得到它们要访问的任务点集，也就路径为R1、R1、R3。映射1D-R与映射R-1D相反，可以将一维编码映射为车辆路径。映射1D-2D可以将一维编码映射为二维编码，即将所有任务点按序号顺序排列，然后依序确定为每个任务点提供服务的车辆编号，以及该车辆执行该任务点的顺序号。一维编码d1通过映射1D-2D后得到二维编码d2如下：；在一维编码d1中，1号任务点对应，可确定服务该任务点的车辆编号为2，而2号车辆的路径为/＞，可确定该任务点在路径中的序号为4，因而二维编码的第1列为/＞。同理可以得到其它任务点对应的二维编码。映射2D-1D与映射1D-2D相反，可以将二维编码映射为一维编码。本步骤所提及的个体的目标函数包括：；其中，CT表示车辆违反时间窗口的成本，CU表示车辆启用成本，CD表示车辆的运输成本，I表示任务点的数量，为第i个任务点用户的满意度，/＞为总成本，/＞为用户的总满意度。CT为车辆违反时间窗口的成本，若车辆在时间区间到达任务点i，则没有惩罚成本，若早于或晚于服务时间，则会产生一定的惩罚成本。第i个任务点的惩罚成本CT的计算公式如下：；式中，I表示任务点的数量，K表示所使用的车辆数目，表示第k辆车到达任务点i的违反时间窗口的成本，/＞为早到等待成本，/＞为迟到惩罚成本，/＞表示第k辆车到达任务点i的时间。CU为车辆启用成本，计算公式如下：；式中，K表示启用车辆的数目，为第k辆车的启用成本。CD为车辆运输成本，计算公式如下：；式中，I表示任务点的数量，表示从任务点i到任务点j的距离，c为运输成本系数，/＞为判断系数，若车辆路径中存在从任务点i和任务点j的子路径，则/＞，否则为/＞。本步骤所提及的刷新外部存档是指：取出外部存档中所有的个体组成一个解集合，然后从这个解集合中按照解对应的目标函数值选取所有的非劣解组成非劣解集合，并根据非劣解集合中各个解的密度进行排序，密度小的解排在前面，最后选择排在非劣解集合前面的a个解保存到外部存档中。步骤3：采用多策略方式从外部存档中选出3个最优个体、/＞和/＞。具体步骤如下：步骤3-1：利用网格技术对外部存档中的个体进行区域划分，将双目标形成的二维空间划分为多个网格，并计算每个个体的网格坐标。首先，根据个体的目标函数值，可以得到个体第m个目标函数的最大值和最小值/＞。然后，根据最大值和最小值/＞以及需要划分的网格数量，可以确定网格的大小，计算公式如下：；其中，a为外部存档的数目，b为划分网格的数量，为个体x在第m维度上的目标函数值。最后，确定每个个体的网格坐标，公式如下所示：；式中，Int为取整函数，为个体在第m维度上的网格坐标。步骤3-2：计算个体的拐点距离和加权分布距离。本步骤所提及的IPD可以这样计算：首先，根据外部存档中的2个极端个体，确定一条直线，然后，计算外部存档每个个体距离该直线的距离。如图3所示，水平和垂直的虚线为网格的划分线，黑色圆点代表极端个体，其它圆点代表其它个体，以两个极端个体为端点确定一条直线，其它个体到这条直线的距离即为它们的IPD值。本步骤所提及的MDD可以这样计算：假设同一网格中拐点距离最大个体为，计算同一网格中其余个体与/＞之间距离的加权和。个体/＞的MDD计算公式如下：；式中，M为目标函数的个数，为个体/＞在第m维度上的目标函数值。步骤3-3：按一定概率选择拐点距离最大策略或加权分布距离最大策略/＞为当前个体选择策略CSP。本步骤所提及策略选择方式如下式:；式中，rand是内的随机数，t是当前迭代次数，Maxt为最大迭代次数。步骤3-4：如果CSP为，则从两个极端个体所在网格，分别选取网格中IPD值最大的个体为/＞和/＞，并选择外部存档中IPD值最大的个体，即中心个体或接近网格中央的个体作为/＞。如果CSP为/＞，则从两个极端个体所在网格，分别选取网格中MDD值最大的个体为/＞和/＞，并选择外部存档中MDD值最大的个体作为/＞。如图3所示，CSP为，b和c分别为从2个极端个体所在网格中选出的最大IPD值的个体，即为最优个体/＞和/＞，而a为外部存档中IPD值最大的个体，即为最优个体/＞。步骤4：采用GWOPSO对种群中的所有个体进行更新，将更新后的个体并入外部存档中，并刷新外部存档。具体步骤如下：步骤4-1：按一定概率选择灰狼算法或粒子群算法为当前用于更新个体的算法CSA。如果CSA为GWO，则转到步骤4-2；否则CSA为PSO，转到步骤4-3。本步骤使用下式选择CSA算法:；/＞其中，Fi表示个体的目标函数值向量，BF表示在算法迭代中获得的最佳目标函数值向量，rand为的随机数。步骤4-2：采用GWO更新种群中的所有个体。若当前迭代次数为t，则种群中的每个个体对应一头狼，设狼群的个数为种群数目N，每头狼的位置为，并指定/＞、/＞和/＞狼为步骤3选择的3个最优个体/＞、/＞和/＞；它们的位置分别为/＞；计算第i头狼与、/＞和/＞狼的距离：；然后计算第i头狼向、/＞和/＞狼移动的趋势项：；式中，，/＞和为上的随机数，j=1,2,3；则第i头狼的位置更新为：；步骤4-3：采用改进的PSO来更新种群中的所有个体。对于种群中每个个体，采用PSO进行更新，公式如下：；；；/＞其中，表示第i个个体第t次迭代时的速度，/＞和/＞为学习因子；t为当前迭代次数，Maxt为算法最大迭代次数，/＞为惯性系数，/＞选0.4，/＞选0.9；、/＞和/＞为步骤S23选择的3个最优个体/＞、/＞和/＞的位置，为第i个个体更新后的位置。这里在PSO中引入动态惯性系数来平衡算法的局部搜索和全局搜索能力，算法开始时，/＞采用较大值来扩大搜索范围，随着迭代次数t值的增大，逐步减小/＞来增强算法局部搜索能力。步骤4-4：将更新获得的所有个体并入外部存档，然后刷新外部存档。刷新外部存档过程参照步骤2。步骤5：选择外部存档中最优的3个个体进行局部搜索，并将得到的新个体并入外部存档，然后刷新外部存档。刷新外部存档过程参照步骤2。步骤5-1：选择外部存档中最优的3个个体，对这些个体的编码进行映射，得到对应的车辆路径。编码的映射操作参照步骤2。步骤5-2：对于最优个体对应的路径，先进行路径内部局部搜索操作，搜索次数为任务点数目。再进行路径间局部搜索操作，搜索次数为两条路径中最多的任务点数目。若局部搜索得到的路径优于原路径，则代替原路径。在本发明中，设计了7种不同的局部搜索操作，可以分为路径内部和路径间两类操作。具体如下：所述路径内部局部搜索操作包括：1）选取1条路径R1，随机交换路径内2个任务点的位置；2）选取1条路径R1，随机选择2个任务点，将2个任务点间的路径进行逆转；3）选取1条路径R1，随机选择一个任务点，将其插入到其它任务点前；所述路径间局部搜索操作包括：4）选取2条路径R1和R2，分别在R1和R2中随机选择任务点和/＞，交换/＞和；5）选取2条路径R1和R2，在R1中随机选择2个连续任务点和/＞，在R2中随机选择任务点/＞，将/＞和/＞插入到/＞前；6）选取2条路径R1和R2，在R1中随机选择2个连续任务点和/＞，在R2中随机选择2个连续任务点/＞和/＞，交换/＞、/＞和/＞、/＞；/＞7）选取2条路径R1和R2，在R1中随机选择2个连续任务点和/＞，在R2中随机选择任务点/＞，交换/＞、/＞和/＞。其中，四个点交换具体为： C1和C3交换，C2和C4交换， 三个点交换具体为: C1,C2换到R2的C3位置， C3换到R1的C1或C2位置，随机选择C1或C2。步骤5-3：将局部搜索得到的个体并入外部存档，然后刷新外部存档。刷新外部存档过程参照步骤2。步骤6：如果算法的迭代次数小于Maxt，则转到步骤3进行循环运算；否则，转到步骤7。步骤7：随机从外部存档中选择一定比例的个体进行全局搜索，并将全局搜索得到的新个体并入外部存档，然后刷新外部存档。步骤7-1：随机选择一个个体作为当前个体d1，从该个体中随机选出一个任务点，将其作为当前任务点i放入插入集合RIS中，并从个体编码中移除该任务点。步骤7-2：计算当前任务点i与个体d1其它任务点的相关性。相关性包括满意度相关性和距离相关性/＞，其计算公式如下：；式中，为任务点i到任务点j的距离，/＞为任务点i到任务点j的满意度，v为判断系数，若任务点i和任务点j在同一路径，则v=1，否则为0。/＞和/＞越大则表明2个任务点相关性越大。步骤7-3：随机选取和/＞最大的任务点，将其作为当前任务点i放入插入集合RIS中，并从个体d1中移除该任务点。如果未达到RIS的上限，则转到步骤7-2循环运行。步骤7-4：从RIS中依序取出任务点k，遍历个体d1尝试插入任务点k，找出满足时间窗约束和容量约束的插入点。计算在这些插入点插入k后引入的距离增量和满意度增量/＞，j为插入点序号。对任务点k在各个插入点引入的距离增量和满意度增量进行归一化处理。/＞步骤7-5：找出最大的插入点，将任务点k插入到该插入点中，从RIS中移除任务点k。步骤7-6：如果RIS不为空，转到步骤7-4循环运行。步骤7-7：如果选取做全局搜索的个体数量没有达到设定的比例，转到步骤7-1循环运行。步骤7-8：将全局搜索得到的新个体并入外部存档，然后刷新外部存档。刷新外部存档过程参照步骤2。步骤8：输出外部存档中特定数目的最优个体对应的车辆路径规划方案。为了验证所提出算法的性能，使用了GWOPSO算法来求解多目标带时间窗车辆路径规划问题的多个实例。实例分为2类，一类使用20个任务点数据集，另一类使用6种不同类型的Solomon数据集。在第1类实例中，任务点的分布如图4所示，本发明将GWOPSO算法与传统的灰狼算法、粒子群算法和混合蚁群算法进行了对比实验。将每种算法分别独立运行20次，得到的实验结果如表1和表2所示。实验表明，本发明的算法在第1类实例中，平均车辆总成本更小，顾客满意度更大。在第2类实例中，为了检验算法在不同场景中的适用性，将车辆数量VN和总距离TD作为目标，并选择Solomon数据集作为样本，选取100个任务点。本发明将GWOPSO算法与灰狼算法、混合蚁群算法和混合遗传算法进行了对比实验。将每种算法分别独立运行20次，得到的实验结果如表3所示。实验表明，在设定同样参数的情况下，本发明车辆的使用率更加平均，路径更短，进一步表明本发明提出的算法能有效地利用个体信息在不同的场景中实施高效的搜索。/＞综上所述，本发明提出的混合灰狼粒子群算法能有效求解双目标带时间窗车辆路径规划问题。另一方面，本发明提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现上述方法的步骤。最后，本发明提供一种计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现上述所述方法的步骤。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明技术原理的前提下，还可以做出若干改进和变形，这些改进和变形也应视为本发明的保护范围。
