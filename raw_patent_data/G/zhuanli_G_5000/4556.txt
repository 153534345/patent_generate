标题title
电子设备的投屏方法和电子设备
摘要abst
本申请实施例提供了一种电子设备的投屏方法和电子设备，该方法包括：接收用户投屏操作，电子设备通过系统镜像投屏的方式投屏至投屏设备；接收电子设备播放视频操作，获取电子设备的投屏信息，该投屏信息包括投屏设备的第一设备信息；根据第一设备信息，将电子设备与投屏设备之间的投屏方式由系统镜像投屏切换为DLNA投屏。该方法中，在电子设备播放视频时，若电子设备当前已处于系统镜像投屏的状态，则可以自动切换为DLNA投屏，从而减少画面黑边、卡顿、花屏及音画不同步等问题，所播放的视频画面清晰流畅，有效提升了投屏效果，且无需用户进行其他操作，也提高了用户的观看体验度。
权利要求书clms
1.一种电子设备的投屏方法，其特征在于，所述方法包括：接收用户投屏操作，所述电子设备通过系统镜像投屏的方式投屏至投屏设备；接收所述电子设备播放视频操作，获取所述电子设备的投屏信息，所述投屏信息包括所述投屏设备的第一设备信息，所述第一设备信息包括所述投屏设备的互联网协议IP地址、媒体存取控制Mac地址、通用唯一识别码uuid、设备标识以及设备名称中的至少一个；根据所述第一设备信息，将所述电子设备与所述投屏设备之间的投屏方式由系统镜像投屏切换为数字生活网络联盟DLNA投屏。2.根据权利要求1所述的方法，其特征在于，所述根据所述第一设备信息，将所述电子设备与所述投屏设备之间的投屏方式由系统镜像投屏切换为DLNA投屏，包括：通过DLNA协议搜索第一可用投屏设备，获取所述第一可用投屏设备的第二设备信息，其中，所述第一可用投屏设备为与所述电子设备处于同一个局域网、且支持DLNA投屏的设备，所述第二设备信息包括所述第一可用投屏设备的IP地址、Mac地址、uuid、设备标识以及设备名称中的至少一个；对所述第一设备信息和所述第二设备信息进行匹配，若所述第一设备信息与所述第二设备信息匹配成功，将所述电子设备通过DLNA投屏的方式投屏至所述投屏设备。3.根据权利要求2所述的方法，其特征在于，所述将所述电子设备通过DLNA投屏的方式投屏至所述投屏设备，包括：根据所述第一可用投屏设备的IP地址，将所述视频的视频地址发送至所述投屏设备，使所述投屏设备根据所述视频地址下载视频资源并进行播放。4.根据权利要求1-3任一项所述的方法，其特征在于，所述接收用户投屏操作，所述电子设备通过系统镜像投屏的方式投屏至投屏设备，包括：接收所述投屏操作；通过镜像协议搜索并展示第二可用投屏设备；接收对所述第二可用投屏设备的选择操作，确定所述投屏设备；根据所述第一设备信息，将所述电子设备显示界面的数据发送至所述投屏设备进行投屏显示。5.根据权利要求1-4任一项所述的方法，其特征在于，所述视频由安装在所述电子设备中的视频应用播放。6.根据权利要求5所述的方法，其特征在于，所述将所述电子设备与所述投屏设备之间的投屏方式由系统镜像投屏切换为DLNA投屏，包括：通过所述视频应用调用DLNA接口，将所述电子设备与所述投屏设备之间的投屏方式由系统镜像投屏切换为DLNA投屏。7.根据权利要求5所述的方法，其特征在于，所述投屏信息还包括所述电子设备的状态标识，所述状态标识用于指示所述电子设备是否处于系统镜像投屏的状态；所述接收所述电子设备播放视频操作，获取所述电子设备的投屏信息，包括：接收所述视频应用播放视频操作，从配置文件中获取所述状态标识、以及从数据库中获取所述第一设备信息；在所述根据所述第一设备信息，将所述电子设备与所述投屏设备之间的投屏方式由系统镜像投屏切换为DLNA投屏之前，所述方法还包括：通过所述状态标识确定所述电子设备处于系统镜像投屏的状态。8.根据权利要求7所述的方法，其特征在于，在所述电子设备通过系统镜像投屏的方式投屏至投屏设备之后，所述方法还包括：将所述电子设备处于系统镜像投屏的状态的状态标识存储至所述配置文件，以及将所述投屏设备的第一设备信息存储至所述数据库。9.一种电子设备，其特征在于，包括：一个或多个处理器；一个或多个存储器；安装有多个应用程序的模块；所述存储器存储有一个或多个程序，当所述一个或者多个程序被所述处理器执行时，使得所述电子设备执行如下步骤：接收用户投屏操作，所述电子设备通过系统镜像投屏的方式投屏至投屏设备；接收所述电子设备播放视频操作，获取所述电子设备的投屏信息，所述投屏信息包括所述投屏设备的第一设备信息，所述第一设备信息包括所述投屏设备的IP地址、Mac地址、uuid、设备标识以及设备名称中的至少一个；根据所述第一设备信息，将所述电子设备与所述投屏设备之间的投屏方式由系统镜像投屏切换为DLNA投屏。10.根据权利要求9所述的电子设备，其特征在于，当所述一个或者多个程序被所述处理器执行时，使得所述电子设备执行如下步骤：通过DLNA协议搜索第一可用投屏设备，获取所述第一可用投屏设备的第二设备信息，其中，所述第一可用投屏设备为与所述电子设备处于同一个局域网、且支持DLNA投屏的设备，所述第二设备信息包括所述第一可用投屏设备的IP地址、Mac地址、uuid、设备标识以及设备名称中的至少一个；对所述第一设备信息和所述第二设备信息进行匹配，若所述第一设备信息与所述第二设备信息匹配成功，将所述电子设备通过DLNA投屏的方式投屏至所述投屏设备。11.根据权利要求10所述的电子设备，其特征在于，当所述一个或者多个程序被所述处理器执行时，使得所述电子设备执行如下步骤：根据所述第一可用投屏设备的IP地址，将所述视频的视频地址发送至所述投屏设备，使所述投屏设备根据所述视频地址下载视频资源并进行播放。12.根据权利要求9-11任一项所述的电子设备，其特征在于，当所述一个或者多个程序被所述处理器执行时，使得所述电子设备执行如下步骤：接收所述投屏操作；通过镜像协议搜索并展示第二可用投屏设备；接收对所述第二可用投屏设备的选择操作，确定所述投屏设备；根据所述第一设备信息，将所述电子设备显示界面的数据发送至所述投屏设备进行投屏显示。13.根据权利要求9-12任一项所述的电子设备，其特征在于，所述视频由安装在所述电子设备中的视频应用播放。14.根据权利要求13所述的电子设备，其特征在于，当所述一个或者多个程序被所述处理器执行时，使得所述电子设备执行如下步骤：通过所述视频应用调用DLNA接口，将所述电子设备与所述投屏设备之间的投屏方式由系统镜像投屏切换为DLNA投屏。15.根据权利要求13所述的电子设备，其特征在于，所述投屏信息还包括所述电子设备的状态标识，所述状态标识用于指示所述电子设备是否处于系统镜像投屏的状态；当所述一个或者多个程序被所述处理器执行时，使得所述电子设备执行如下步骤：接收所述视频应用播放视频操作，从配置文件中获取所述状态标识、以及从数据库中获取所述第一设备信息；通过所述状态标识确定所述电子设备处于系统镜像投屏的状态。16.根据权利要求15所述的电子设备，其特征在于，当所述一个或者多个程序被所述处理器执行时，使得所述电子设备执行如下步骤：将所述电子设备处于系统镜像投屏的状态的状态标识存储至所述配置文件，以及将所述投屏设备的第一设备信息存储至所述数据库。17.根据权利要求9所述的电子设备，其特征在于，所述电子设备还包括：无线投屏模块，用于接收所述投屏操作；投屏能力中心模块，用于通过镜像协议搜索第二可用投屏设备；展示模块，用于展示所述第二可用投屏设备，并接收对所述第二可用投屏设备的选择操作，确定所述投屏设备；多屏交互模块，用于根据所述第一设备信息，将所述电子设备显示界面的数据发送至所述投屏设备进行投屏显示；多屏交互模块，还用于将所述电子设备处于系统镜像投屏的状态的状态标识存储至配置文件，无线投屏模块还用于将所述投屏设备的第一设备信息存储至数据库；视频应用，用于播放视频，并从所述配置文件中获取所述状态标识、以及从所述数据库中获取所述第一设备信息，通过所述状态标识确定所述电子设备处于系统镜像投屏的状态；投屏能力中心模块，还用于通过DLNA协议搜索第一可用投屏设备；多屏交互模块，还用于获取所述第一可用投屏设备的第二设备信息，对所述第一设备信息和所述第二设备信息进行匹配，若所述第一设备信息与所述第二设备信息匹配成功，根据所述第一可用投屏设备的IP地址，将所述视频的视频地址发送至所述投屏设备，使所述投屏设备根据所述视频地址下载视频资源并进行播放。18.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质中存储了计算机程序，当所述计算机程序被处理器执行时，使得所述处理器执行权利要求1至8中任一项所述的方法。
说明书desc
技术领域本申请涉及电子技术领域，具体涉及一种电子设备的投屏方法和电子设备。背景技术当前，较多的电子设备支持无线投屏技术，即将电子设备A的显示界面“实时”显示到另一个设备B的屏幕上，用户可通过设备B观看画面内容。当用户需要使用电子设备的无线投屏功能时，通常是先点击电子设备的系统下拉菜单中的“无线投屏”按钮，再从电子设备搜索到的可用设备列表中选择投屏设备，即可完成电子设备的无线投屏。此时，电子设备实现的是系统镜像投屏，即电子设备上显示什么界面，投屏设备也显示什么界面。然而，在系统镜像投屏的过程中，若电子设备当前播放的是视频，投屏设备的视频界面容易出现卡顿、花屏、黑边以及音画不同步等问题，投屏效果较差。发明内容本申请提供了一种电子设备的投屏方法和电子设备，能够在电子设备播放视频时，将与投屏设备之间的镜像投屏自动切换为数字生活网络联盟投屏，有效提升投屏效果。第一方面，本申请提供一种电子设备的投屏方法，该方法包括：接收用户投屏操作，电子设备通过系统镜像投屏的方式投屏至投屏设备；接收电子设备播放视频操作，获取电子设备的投屏信息，该投屏信息包括投屏设备的第一设备信息，第一设备信息包括投屏设备的互联网协议地址、媒体存取控制地址、通用唯一识别码、设备标识以及设备名称中的至少一个；根据第一设备信息，将电子设备与投屏设备之间的投屏方式由系统镜像投屏切换为DLNA投屏。其中，系统镜像投屏的过程即电子设备将显示界面的数据进行编解码后发送至投屏设备进行显示的过程，如果电子设备当前播放的是视频，则将视频流进行编解码后发给至投屏设备进行播放。DLNA投屏是为数字媒体和内容服务的技术，电子设备可将视频流的地址发送至投屏设备，由投屏设备根据该地址下载视频资源进行播放，由此实现对视频数据的实时投屏。在电子设备播放视频时，若电子设备当前已处于系统镜像投屏的状态，则可以自动切换为DLNA投屏，从而减少画面黑边、卡顿、花屏及音画不同步等问题，所播放的视频画面清晰流畅，有效提升了投屏效果，且无需用户进行其他操作，也提高了用户的观看体验度。可选地，上述电子设备所播放的视频可以通过视频应用进行在线播放，也可以通过视频播放器进行本地播放。在电子设备切换投屏方式之前，需要先获取所存储的投屏设备的设备信息，然后根据第一设备信息将电子设备DLNA投屏至投屏设备。可选地，此实现方式可以适用于电子设备与投屏设备处于同一个局域网的情况，通过镜像协议搜索到的投屏设备的IP地址与通过DLNA协议搜索到的投屏设备的IP地址相同。结合第一方面，在第一方面的有些实现方式中，上述根据第一设备信息，将电子设备与投屏设备之间的投屏方式由系统镜像投屏切换为DLNA投屏，包括：通过DLNA协议搜索第一可用投屏设备，获取第一可用投屏设备的第二设备信息，其中，第一可用投屏设备为与电子设备处于同一个局域网、且支持DLNA投屏的设备，第二设备信息包括第一可用投屏设备的IP地址、Mac地址、uuid、设备标识以及设备名称中的至少一个；对第一设备信息和第二设备信息进行匹配，若第一设备信息与第二设备信息匹配成功，将电子设备通过DLNA投屏的方式投屏至投屏设备。其中，因一些镜像协议搜索投屏设备是不需要通过局域网的，比如Miracast协议，因此对于同一个设备，通过镜像协议所搜索到的IP地址与通过DLNA协议搜索到的IP地址不同，这就需要将上述第一设备信息和第二设备信息进行匹配，若匹配成功说明是同一个设备，再将电子设备DLNA投屏至投屏设备。由此可进一步提高电子设备切换为DLNA投屏的成功率。结合第一方面，在第一方面的有些实现方式中，上述将电子设备通过DLNA投屏的方式投屏至投屏设备，包括：根据第一可用投屏设备的IP地址，将上述视频的视频地址发送至投屏设备，使投屏设备根据该视频地址下载视频资源并进行播放。此实现方式中，电子设备根据DLNA协议搜索到的可用投屏设备的IP地址投屏至投屏设备，以提高确定的DLNA投屏设备的准确率，进而提高由系统镜像投屏切换为DLNA投屏的成功率。结合第一方面，在第一方面的有些实现方式中，上述接收用户投屏操作，电子设备通过系统镜像投屏的方式投屏至投屏设备，包括：接收投屏操作；通过镜像协议搜索并展示第二可用投屏设备；接收对第二可用投屏设备的选择操作，确定上述投屏设备；根据第一设备信息，将电子设备显示界面的数据发送至投屏设备。其中，投屏操作可以为用户对系统下拉菜单中的“无线投屏”按钮的点击操作，也可以为对电子设备“设置”路径内的“无线投屏”按钮的点击操作。当电子设备只搜索到一个投屏设备时，可以直接将显示界面镜像投屏至该投屏设备；当搜索到多个投屏设备时，可以将可用设备列表展示给用户，供用户进行选择对应的设备，并将显示界面的数据发送至投屏设备进行显示。然后电子设备还可以将系统镜像投屏之后的投屏设备的设备信息进行进行记录，可供后续进行DLNA投屏时进行信息匹配，以提高切换至DLNA投屏的成功率。结合第一方面，在第一方面的有些实现方式中，上述视频由安装在电子设备中的视频应用播放。其中，在用户通过视频应用观看视频时，若电子设备与投屏设备之间的投屏方式由系统镜像投屏自动切换为DLNA投屏，可提升投屏效果，同时提高用户观看视频的体验度。结合第一方面，在第一方面的有些实现方式中，上述将电子设备与投屏设备之间的投屏方式由系统镜像投屏切换为DLNA投屏，包括：通过视频应用调用DLNA接口，将电子设备与投屏设备之间的投屏方式由系统镜像投屏切换为DLNA投屏。其中，电子设备的系统中可以为视频应用或其他应用提供DLNA接口，当电子设备已开启系统镜像投屏模式、且已获取到投屏设备的设备信息时，视频应用可调用该DLNA接口将电子设备DLNA投屏至投屏设备，提高用户观看视频的体验度，且用户可以在电子设备上进行其他操作，不影响投屏设备的视频播放。结合第一方面，在第一方面的有些实现方式中，上述投屏信息还包括电子设备的状态标识，该状态标识用于指示电子设备是否处于系统镜像投屏的状态；上述接收电子设备播放视频操作，获取电子设备的投屏信息，包括：接收视频应用播放视频操作，从配置文件中获取状态标识、以及从数据库中获取第一设备信息；在根据第一设备信息，将电子设备与投屏设备之间的投屏方式由系统镜像投屏切换为DLNA投屏之前，上述方法还包括：通过状态标识确定电子设备处于系统镜像投屏的状态。此实现方式中，在视频应用播放视频时，主动获取状态标识以进一步确定电子设备已处于系统镜像投屏的状态，以进一步提高切换至DLNA投屏的成功率。结合第一方面，在第一方面的有些实现方式中，上述在电子设备通过系统镜像投屏的方式投屏至投屏设备之后，上述方法还包括：将电子设备处于系统镜像投屏的状态的状态标识存储至配置文件，以及将投屏设备的第一设备信息存储至数据库。由此，可为后续的视频应用获取投屏信息提供数据基础。第二方面，本申请提供一种装置，该装置包含在电子设备中，该装置具有实现上述第一方面及上述第一方面的可能实现方式中电子设备行为的功能。功能可以通过硬件实现，也可以通过硬件执行相应的软件实现。硬件或软件包括一个或多个与上述功能相对应的模块或单元。例如，接收模块或单元、处理模块或单元等。第三方面，本申请提供一种电子设备，电子设备包括：处理器、存储器和接口；处理器、存储器和接口相互配合，使得电子设备执行第一方面的技术方案中任意一种方法。可选地，上述电子设备还可以包括无线投屏模块，用于接收投屏操作；投屏能力中心模块，用于通过镜像协议搜索第二可用投屏设备；展示模块，用于展示第二可用投屏设备，并接收对第二可用投屏设备的选择操作，确定投屏设备；多屏交互模块，用于根据第一设备信息，将电子设备显示界面的数据发送至投屏设备进行投屏显示；多屏交互模块，还用于将电子设备处于系统镜像投屏的状态的状态标识存储至配置文件，无线投屏模块还用于将投屏设备的第一设备信息存储至数据库；视频应用，用于播放视频，并从配置文件中获取状态标识、以及从数据库中获取第一设备信息，通过状态标识确定电子设备处于系统镜像投屏的状态；投屏能力中心模块，还用于通过DLNA协议搜索第一可用投屏设备；多屏交互模块，还用于获取第一可用投屏设备的第二设备信息，对第一设备信息和第二设备信息进行匹配，若第一设备信息与第二设备信息匹配成功，根据第一可用投屏设备的IP地址，将视频的视频地址发送至投屏设备，使投屏设备根据视频地址下载视频资源并进行播放。第四方面，本申请提供一种芯片，包括处理器。处理器用于读取并执行存储器中存储的计算机程序，以执行第一方面及其任意可能的实现方式中的方法。可选地，芯片还包括存储器，存储器与处理器通过电路或电线连接。进一步可选地，芯片还包括通信接口。第五方面，本申请提供一种计算机可读存储介质，计算机可读存储介质中存储了计算机程序，当计算机程序被处理器执行时，使得该处理器执行第一方面的技术方案中任意一种方法。第六方面，本申请提供一种计算机程序产品，计算机程序产品包括：计算机程序代码，当计算机程序代码在电子设备上运行时，使得该电子设备执行第一方面的技术方案中任意一种方法。附图说明图1中的图是本申请实施例提供的一例视频播放界面示意图；图1中的图是本申请实施例提供的一例系统下拉菜单界面示意图；图1中的图是本申请实施例提供的一例可用设备列表展示界面示意图；图1中的图是本申请实施例提供的一例电子设备和投屏设备展示效果对比示意图；图2中的图本申请实施例提供的另一例系统下拉菜单界面示意图；图2中的图是本申请实施例提供的另一例可用设备列表展示界面示意图；图2中的图是本申请实施例提供的另一例电子设备和投屏设备展示效果对比一示意图；图2中的图是本申请实施例提供的另一例电子设备和投屏设备展示效果对比二示意图；图3是本申请实施例提供的一例DLNA投屏时电子设备和投屏设备展示效果对比示意图；图4是本申请实施例提供的一例电子设备的结构示意图；图5是本申请实施例提供的电子设备的软件结构框图；图6是本申请实施例提供的一例电子设备的投屏方法的系统架构示意图；图7中的图是本申请实施例提供的另一例电子设备的投屏方法的系统架构示意图；图7中的图是本申请实施例提供的又一例电子设备的投屏方法的系统架构示意图；图8是本申请实施例提供的一例电子设备的投屏方法的流程示意图；图9中的图是本申请实施例提供的一例电子设备由镜像投屏切换为DLNA投屏的过程示意图；图9中的图是本申请实施例提供的另一例电子设备由镜像投屏切换为DLNA投屏的过程示意图；图10是本申请实施例提供的另一例电子设备的投屏方法的流程示意图；图11是本申请实施例提供的又一例电子设备的投屏方法的流程示意图；图12是本申请实施例提供的一例镜像投屏的设备信息与DLNA投屏的设备信息对比示意图；图13是本申请实施例提供的另一例镜像投屏的设备信息与DLNA投屏的设备信息对比示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行描述。其中，在本申请实施例的描述中，除非另有说明，“/”表示或的意思，例如，A/B可以表示A或B；本文中的“和/或”仅仅是一种描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。另外，在本申请实施例的描述中，“多个”是指两个或多于两个。以下，术语“第一”、“第二”、“第三”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”、“第三”的特征可以明示或者隐含地包括一个或者更多个该特征。目前，当用户想要使用电子设备的系统镜像投屏模式观看视频时，可通过以下方式将电子设备切换至镜像投屏模式：方式一：电子设备正在使用视频应用播放视频，即处于图1中的图所示的显示界面时，用户使用系统下拉菜单，电子设备可切换至图1中的图所示的显示界面，在该界面上，用户点击“无线投屏”按钮触发电子设备搜索并展示无线投屏的可用设备。在图1中的图所示的可用设备列表展示界面上，用户点击所选择的投屏设备后，电子设备和投屏设备上都可显示出电子设备的显示界面，效果对比示意图可参见图1中的图，即完成了镜像投屏过程。方式二：电子设备处于任意显示界面，如桌面界面，用户使用系统下拉菜单，电子设备可切换至图2中的图所示的显示界面，在该界面上，用户点击“无线投屏”按钮触发电子设备搜索并展示无线投屏的可用设备。在图2中的图所示的可用设备列表展示界面上，用户点击所选择的投屏设备后，电子设备和投屏设备上都可显示出电子设备的桌面界面，效果对比示意图可参见图2中的图，即完成了镜像投屏过程。然后，用户使用电子设备上的视频APP播放视频，投屏设备也会相应的展示出视频界面，电子设备和投屏设备的效果对比示意图可参见图2中的图。根据上述方式一和方式二可以看出，投屏设备与电子设备的显示界面一致，即当前实现的是镜像投屏，但此时投屏设备的两侧具有较多面积的黑边，即便电子设备切换为全屏播放，投屏设备两侧也会具有黑边；另外，播放视频过程中电子设备需要边下载视频数据边将自身的视频流进行编解码，然后呈现至投屏设备，因此还会出现卡顿、花屏及音画不同步的问题，导致投屏效果较差。有鉴于此，本申请实施例提供一种电子设备的投屏方法，可以应用于手机、平板电脑、可穿戴设备、车载设备、增强现实/虚拟现实设备、笔记本电脑、超级移动个人计算机、上网本、个人数字助理等具有镜像投屏功能的电子设备上，在电子设备使用镜像投屏模式播放视频时，可以将镜像投屏自动切换为DLNA投屏，此时电子设备与投屏设备的显示界面对比图可以参见图3所示，使得投屏设备全屏播放视频，且视频画面清晰流畅，有效提升了投屏效果，且无需用户进行其他操作，同时提高了用户的体验度。需要说明的是，本申请实施例中电子设备开启镜像投屏模式的方式可以为上述的方式一和方式二，且对电子设备的具体类型不做任何限制。示例性的，图4是本申请实施例提供的一例电子设备100的结构示意图。电子设备100可以包括处理器110，外部存储器接口120，内部存储器121，通用串行总线接口130，充电管理模块140，电源管理模块141，电池142，天线1，天线2，移动通信模块150，无线通信模块160，音频模块170，扬声器170A，受话器170B，麦克风170C，耳机接口170D，传感器模块180，按键190，马达191，指示器192，摄像头193，显示屏194，以及用户标识模块卡接口195等。其中传感器模块180可以包括压力传感器180A，陀螺仪传感器180B，气压传感器180C，磁传感器180D，加速度传感器180E，距离传感器180F，接近光传感器180G，指纹传感器180H，温度传感器180J，触摸传感器180K，环境光传感器180L，骨传导传感器180M等。可以理解的是，本申请实施例示意的结构并不构成对电子设备100的具体限定。在本申请另一些实施例中，电子设备100可以包括比图示更多或更少的部件，或者组合某些部件，或者拆分某些部件，或者不同的部件布置。图示的部件可以以硬件，软件或软件和硬件的组合实现。处理器110可以包括一个或多个处理单元，例如：处理器110可以包括应用处理器，调制解调处理器，图形处理器，图像信号处理器，控制器，存储器，视频编解码器，数字信号处理器，基带处理器，和/或神经网络处理器等。其中，不同的处理单元可以是独立的器件，也可以集成在一个或多个处理器中。其中，控制器可以是电子设备100的神经中枢和指挥中心。控制器可以根据指令操作码和时序信号，产生操作控制信号，完成取指令和执行指令的控制。处理器110中还可以设置存储器，用于存储指令和数据。在一些实施例中，处理器110中的存储器为高速缓冲存储器。该存储器可以保存处理器110刚用过或循环使用的指令或数据。如果处理器110需要再次使用该指令或数据，可从存储器中直接调用。避免了重复存取，减少了处理器110的等待时间，因而提高了系统的效率。在一些实施例中，处理器110可以包括一个或多个接口。接口可以包括集成电路接口，集成电路内置音频接口，脉冲编码调制接口，通用异步收发传输器接口，移动产业处理器接口，通用输入输出接口，用户标识模块接口，和/或通用串行总线接口等。I2C接口是一种双向同步串行总线，包括一根串行数据线和一根串行时钟线。在一些实施例中，处理器110可以包含多组I2C总线。处理器110可以通过不同的I2C总线接口分别耦合触摸传感器180K，充电器，闪光灯，摄像头193等。例如：处理器110可以通过I2C接口耦合触摸传感器180K，使处理器110与触摸传感器180K通过I2C总线接口通信，实现电子设备100的触摸功能。I2S接口可以用于音频通信。在一些实施例中，处理器110可以包含多组I2S总线。处理器110可以通过I2S总线与音频模块170耦合，实现处理器110与音频模块170之间的通信。在一些实施例中，音频模块170可以通过I2S接口向无线通信模块160传递音频信号，实现通过蓝牙耳机接听电话的功能。PCM接口也可以用于音频通信，将模拟信号抽样，量化和编码。在一些实施例中，音频模块170与无线通信模块160可以通过PCM总线接口耦合。在一些实施例中，音频模块170也可以通过PCM接口向无线通信模块160传递音频信号，实现通过蓝牙耳机接听电话的功能。I2S接口和PCM接口都可以用于音频通信。UART接口是一种通用串行数据总线，用于异步通信。该总线可以为双向通信总线。它将要传输的数据在串行通信与并行通信之间转换。在一些实施例中，UART接口通常被用于连接处理器110与无线通信模块160。例如：处理器110通过UART接口与无线通信模块160中的蓝牙模块通信，实现蓝牙功能。在一些实施例中，音频模块170可以通过UART接口向无线通信模块160传递音频信号，实现通过蓝牙耳机播放音乐的功能。MIPI接口可以被用于连接处理器110与显示屏194，摄像头193等外围器件。MIPI接口包括摄像头串行接口，显示屏串行接口等。在一些实施例中，处理器110和摄像头193通过CSI接口通信，实现电子设备100的拍摄功能。处理器110和显示屏194通过DSI接口通信，实现电子设备100的显示功能。GPIO接口可以通过软件配置。GPIO接口可以被配置为控制信号，也可被配置为数据信号。在一些实施例中，GPIO接口可以用于连接处理器110与摄像头193，显示屏194，无线通信模块160，音频模块170，传感器模块180等。GPIO接口还可以被配置为I2C接口，I2S接口，UART接口，MIPI接口等。USB接口130是符合USB标准规范的接口，具体可以是Mini USB接口，Micro USB接口，USB Type C接口等。USB接口130可以用于连接充电器为电子设备100充电，也可以用于电子设备100与外围设备之间传输数据。也可以用于连接耳机，通过耳机播放音频。该接口还可以用于连接其他电子设备，例如AR设备等。可以理解的是，本申请实施例示意的各模块间的接口连接关系，只是示意性说明，并不构成对电子设备100的结构限定。在本申请另一些实施例中，电子设备100也可以采用上述实施例中不同的接口连接方式，或多种接口连接方式的组合。充电管理模块140用于从充电器接收充电输入。其中，充电器可以是无线充电器，也可以是有线充电器。在一些有线充电的实施例中，充电管理模块140可以通过USB接口130接收有线充电器的充电输入。在一些无线充电的实施例中，充电管理模块140可以通过电子设备100的无线充电线圈接收无线充电输入。充电管理模块140为电池142充电的同时，还可以通过电源管理模块141为电子设备供电。电源管理模块141用于连接电池142，充电管理模块140与处理器110。电源管理模块141接收电池142和/或充电管理模块140的输入，为处理器110，内部存储器121，外部存储器，显示屏194，摄像头193，和无线通信模块160等供电。电源管理模块141还可以用于监测电池容量，电池循环次数，电池健康状态等参数。在其他一些实施例中，电源管理模块141也可以设置于处理器110中。在另一些实施例中，电源管理模块141和充电管理模块140也可以设置于同一个器件中。电子设备100的无线通信功能可以通过天线1，天线2，移动通信模块150，无线通信模块160，调制解调处理器以及基带处理器等实现。天线1和天线2用于发射和接收电磁波信号。图4中的天线1和天线2的结构仅为一种示例。电子设备100中的每个天线可用于覆盖单个或多个通信频带。不同的天线还可以复用，以提高天线的利用率。例如：可以将天线1复用为无线局域网的分集天线。在另外一些实施例中，天线可以和调谐开关结合使用。移动通信模块150可以提供应用在电子设备100上的包括2G/3G/4G/5G等无线通信的解决方案。移动通信模块150可以包括至少一个滤波器，开关，功率放大器，低噪声放大器等。移动通信模块150可以由天线1接收电磁波，并对接收的电磁波进行滤波，放大等处理，传送至调制解调处理器进行解调。移动通信模块150还可以对经调制解调处理器调制后的信号放大，经天线1转为电磁波辐射出去。在一些实施例中，移动通信模块150的至少部分功能模块可以被设置于处理器110中。在一些实施例中，移动通信模块150的至少部分功能模块可以与处理器110的至少部分模块被设置在同一个器件中。调制解调处理器可以包括调制器和解调器。其中，调制器用于将待发送的低频基带信号调制成中高频信号。解调器用于将接收的电磁波信号解调为低频基带信号。随后解调器将解调得到的低频基带信号传送至基带处理器处理。低频基带信号经基带处理器处理后，被传递给应用处理器。应用处理器通过音频设备输出声音信号，或通过显示屏194显示图像或视频。在一些实施例中，调制解调处理器可以是独立的器件。在另一些实施例中，调制解调处理器可以独立于处理器110，与移动通信模块150或其他功能模块设置在同一个器件中。无线通信模块160可以提供应用在电子设备100上的包括无线局域网网络)，蓝牙，全球导航卫星系统，调频，近距离无线通信技术，红外技术等无线通信的解决方案。无线通信模块160可以是集成至少一个通信处理模块的一个或多个器件。无线通信模块160经由天线2接收电磁波，将电磁波信号调频以及滤波处理，将处理后的信号发送到处理器110。无线通信模块160还可以从处理器110接收待发送的信号，对其进行调频，放大，经天线2转为电磁波辐射出去。在一些实施例中，电子设备100的天线1和移动通信模块150耦合，天线2和无线通信模块160耦合，使得电子设备100可以通过无线通信技术与网络以及其他设备通信。无线通信技术可以包括全球移动通讯系统，通用分组无线服务，码分多址接入，宽带码分多址，时分码分多址，长期演进，BT，GNSS，WLAN，NFC，FM，和/或IR技术等。GNSS可以包括全球卫星定位系统，全球导航卫星系统，北斗卫星导航系统，准天顶卫星系统和/或星基增强系统。电子设备100通过GPU，显示屏194，以及应用处理器等实现显示功能。GPU为图像处理的微处理器，连接显示屏194和应用处理器。GPU用于执行数学和几何计算，用于图形渲染。处理器110可包括一个或多个GPU，其执行程序指令以生成或改变显示信息。显示屏194用于显示图像，视频等。显示屏194包括显示面板。显示面板可以采用液晶显示屏，有机发光二极管，有源矩阵有机发光二极体或主动矩阵有机发光二极体，柔性发光二极管，Miniled，MicroLed，Micro-oLed，量子点发光二极管等。在一些实施例中，电子设备100可以包括1个或N个显示屏194，N为大于1的正整数。电子设备100可以通过ISP，摄像头193，视频编解码器，GPU，显示屏194以及应用处理器等实现拍摄功能。ISP用于处理摄像头193反馈的数据。例如，拍照时，打开快门，光线通过镜头被传递到摄像头感光元件上，光信号转换为电信号，摄像头感光元件将电信号传递给ISP处理，转化为肉眼可见的图像。ISP还可以对图像的噪点，亮度，肤色进行算法优化。ISP还可以对拍摄场景的曝光，色温等参数优化。在一些实施例中，ISP可以设置在摄像头193中。摄像头193用于捕获静态图像或视频。物体通过镜头生成光学图像投射到感光元件。感光元件可以是电荷耦合器件或互补金属氧化物半导体光电晶体管。感光元件把光信号转换成电信号，之后将电信号传递给ISP转换成数字图像信号。ISP将数字图像信号输出到DSP加工处理。DSP将数字图像信号转换成标准的RGB，YUV等格式的图像信号。在一些实施例中，电子设备100可以包括1个或N个摄像头193，N为大于1的正整数。数字信号处理器用于处理数字信号，除了可以处理数字图像信号，还可以处理其他数字信号。例如，当电子设备100在频点选择时，数字信号处理器用于对频点能量进行傅里叶变换等。视频编解码器用于对数字视频压缩或解压缩。电子设备100可以支持一种或多种视频编解码器。这样，电子设备100可以播放或录制多种编码格式的视频，例如：动态图像专家组1，MPEG2，MPEG3，MPEG4等。NPU为神经网络计算处理器，通过借鉴生物神经网络结构，例如借鉴人脑神经元之间传递模式，对输入信息快速处理，还可以不断的自学习。通过NPU可以实现电子设备100的智能认知等应用，例如：图像识别，人脸识别，语音识别，文本理解等。外部存储器接口120可以用于连接外部存储卡，例如Micro SD卡，实现扩展电子设备100的存储能力。外部存储卡通过外部存储器接口120与处理器110通信，实现数据存储功能。例如将音乐，视频等文件保存在外部存储卡中。内部存储器121可以用于存储计算机可执行程序代码，可执行程序代码包括指令。处理器110通过运行存储在内部存储器121的指令，从而执行电子设备100的各种功能应用以及数据处理。内部存储器121可以包括存储程序区和存储数据区。其中，存储程序区可存储操作系统，至少一个功能所需的应用程序等。存储数据区可存储电子设备100使用过程中所创建的数据等。此外，内部存储器121可以包括高速随机存取存储器，还可以包括非易失性存储器，例如至少一个磁盘存储器件，闪存器件，通用闪存存储器等。电子设备100可以通过音频模块170，扬声器170A，受话器170B，麦克风170C，耳机接口170D，以及应用处理器等实现音频功能。例如音乐播放，录音等。音频模块170用于将数字音频信息转换成模拟音频信号输出，也用于将模拟音频输入转换为数字音频信号。音频模块170还可以用于对音频信号编码和解码。在一些实施例中，音频模块170可以设置于处理器110中，或将音频模块170的部分功能模块设置于处理器110中。扬声器170A，也称“喇叭”，用于将音频电信号转换为声音信号。电子设备100可以通过扬声器170A收听音乐，或收听免提通话。受话器170B，也称“听筒”，用于将音频电信号转换成声音信号。当电子设备100接听电话或语音信息时，可以通过将受话器170B靠近人耳接听语音。麦克风170C，也称“话筒”，“传声器”，用于将声音信号转换为电信号。当拨打电话或发送语音信息时，用户可以通过人嘴靠近麦克风170C发声，将声音信号输入到麦克风170C。电子设备100可以设置至少一个麦克风170C。在另一些实施例中，电子设备100可以设置两个麦克风170C，除了采集声音信号，还可以实现降噪功能。在另一些实施例中，电子设备100还可以设置三个，四个或更多麦克风170C，实现采集声音信号，降噪，还可以识别声音来源，实现定向录音功能等。耳机接口170D用于连接有线耳机。耳机接口170D可以是USB接口130，也可以是3.5mm的开放移动电子设备平台标准接口，美国蜂窝电信工业协会标准接口。压力传感器180A用于感受压力信号，可以将压力信号转换成电信号。在一些实施例中，压力传感器180A可以设置于显示屏194。压力传感器180A的种类很多，如电阻式压力传感器，电感式压力传感器，电容式压力传感器等。电容式压力传感器可以是包括至少两个具有导电材料的平行板。当有力作用于压力传感器180A，电极之间的电容改变。电子设备100根据电容的变化确定压力的强度。当有触摸操作作用于显示屏194，电子设备100根据压力传感器180A检测触摸操作强度。电子设备100也可以根据压力传感器180A的检测信号计算触摸的位置。在一些实施例中，作用于相同触摸位置，但不同触摸操作强度的触摸操作，可以对应不同的操作指令。例如：当有触摸操作强度小于第一压力阈值的触摸操作作用于短消息应用图标时，执行查看短消息的指令。当有触摸操作强度大于或等于第一压力阈值的触摸操作作用于短消息应用图标时，执行新建短消息的指令。陀螺仪传感器180B可以用于确定电子设备100的运动姿态。在一些实施例中，可以通过陀螺仪传感器180B确定电子设备100围绕三个轴的角速度。陀螺仪传感器180B可以用于拍摄防抖。示例性的，当按下快门，陀螺仪传感器180B检测电子设备100抖动的角度，根据角度计算出镜头模组需要补偿的距离，让镜头通过反向运动抵消电子设备100的抖动，实现防抖。陀螺仪传感器180B还可以用于导航，体感游戏场景。气压传感器180C用于测量气压。在一些实施例中，电子设备100通过气压传感器180C测得的气压值计算海拔高度，辅助定位和导航。磁传感器180D包括霍尔传感器。电子设备100可以利用磁传感器180D检测翻盖皮套的开合。在一些实施例中，当电子设备100是翻盖机时，电子设备100可以根据磁传感器180D检测翻盖的开合。进而根据检测到的皮套的开合状态或翻盖的开合状态，设置翻盖自动解锁等特性。加速度传感器180E可检测电子设备100在各个方向上加速度的大小。当电子设备100静止时可检测出重力的大小及方向。还可以用于识别电子设备姿态，应用于横竖屏切换，计步器等应用。距离传感器180F，用于测量距离。电子设备100可以通过红外或激光测量距离。在一些实施例中，拍摄场景，电子设备100可以利用距离传感器180F测距以实现快速对焦。接近光传感器180G可以包括例如发光二极管和光检测器，例如光电二极管。发光二极管可以是红外发光二极管。电子设备100通过发光二极管向外发射红外光。电子设备100使用光电二极管检测来自附近物体的红外反射光。当检测到充分的反射光时，可以确定电子设备100附近有物体。当检测到不充分的反射光时，电子设备100可以确定电子设备100附近没有物体。电子设备100可以利用接近光传感器180G检测用户手持电子设备100贴近耳朵通话，以便自动熄灭屏幕达到省电的目的。接近光传感器180G也可用于皮套模式，口袋模式自动解锁与锁屏。环境光传感器180L用于感知环境光亮度。电子设备100可以根据感知的环境光亮度自适应调节显示屏194亮度。环境光传感器180L也可用于拍照时自动调节白平衡。环境光传感器180L还可以与接近光传感器180G配合，检测电子设备100是否在口袋里，以防误触。指纹传感器180H用于采集指纹。电子设备100可以利用采集的指纹特性实现指纹解锁，访问应用锁，指纹拍照，指纹接听来电等。温度传感器180J用于检测温度。在一些实施例中，电子设备100利用温度传感器180J检测的温度，执行温度处理策略。例如，当温度传感器180J上报的温度超过阈值，电子设备100执行降低位于温度传感器180J附近的处理器的性能，以便降低功耗实施热保护。在另一些实施例中，当温度低于另一阈值时，电子设备100对电池142加热，以避免低温导致电子设备100异常关机。在其他一些实施例中，当温度低于又一阈值时，电子设备100对电池142的输出电压执行升压，以避免低温导致的异常关机。触摸传感器180K，也称“触控面板”。触摸传感器180K可以设置于显示屏194，由触摸传感器180K与显示屏194组成触摸屏，也称“触控屏”。触摸传感器180K用于检测作用于其上或附近的触摸操作。触摸传感器可以将检测到的触摸操作传递给应用处理器，以确定触摸事件类型。可以通过显示屏194提供与触摸操作相关的视觉输出。在另一些实施例中，触摸传感器180K也可以设置于电子设备100的表面，与显示屏194所处的位置不同。骨传导传感器180M可以获取振动信号。在一些实施例中，骨传导传感器180M可以获取人体声部振动骨块的振动信号。骨传导传感器180M也可以接触人体脉搏，接收血压跳动信号。在一些实施例中，骨传导传感器180M也可以设置于耳机中，结合成骨传导耳机。音频模块170可以基于骨传导传感器180M获取的声部振动骨块的振动信号，解析出语音信号，实现语音功能。应用处理器可以基于骨传导传感器180M获取的血压跳动信号解析心率信息，实现心率检测功能。按键190包括开机键，音量键等。按键190可以是机械按键。也可以是触摸式按键。电子设备100可以接收按键输入，产生与电子设备100的用户设置以及功能控制有关的键信号输入。马达191可以产生振动提示。马达191可以用于来电振动提示，也可以用于触摸振动反馈。例如，作用于不同应用的触摸操作，可以对应不同的振动反馈效果。作用于显示屏194不同区域的触摸操作，马达191也可对应不同的振动反馈效果。不同的应用场景也可以对应不同的振动反馈效果。触摸振动反馈效果还可以支持自定义。指示器192可以是指示灯，可以用于指示充电状态，电量变化，也可以用于指示消息，未接来电，通知等。SIM卡接口195用于连接SIM卡。SIM卡可以通过插入SIM卡接口195，或从SIM卡接口195拔出，实现和电子设备100的接触和分离。电子设备100可以支持1个或N个SIM卡接口，N为大于1的正整数。SIM卡接口195可以支持Nano SIM卡，Micro SIM卡，SIM卡等。同一个SIM卡接口195可以同时插入多张卡。多张卡的类型可以相同，也可以不同。SIM卡接口195也可以兼容不同类型的SIM卡。SIM卡接口195也可以兼容外部存储卡。电子设备100通过SIM卡和网络交互，实现通话以及数据通信等功能。在一些实施例中，电子设备100采用eSIM，即：嵌入式SIM卡。eSIM卡可以嵌在电子设备100中，不能和电子设备100分离。电子设备100的软件系统可以采用分层架构，事件驱动架构，微核架构，微服务架构，或云架构。本申请实施例以分层架构的Android系统为例，示例性说明电子设备100的软件结构。图5是本申请实施例的电子设备100的软件结构框图。分层架构将软件分成若干个层，每一层都有清晰的角色和分工。层与层之间通过软件接口通信。在一些实施例中，将Android系统分为四层，从上至下分别为应用程序层，应用程序框架层，安卓运行时和系统库，以及内核层。应用程序层可以包括一系列应用程序包。如图5所示，应用程序包可以包括相机，图库，日历，通话，地图，导航，WLAN，蓝牙，音乐，视频，短信息等应用程序。应用程序框架层为应用程序层的应用程序提供应用编程接口和编程框架。应用程序框架层包括一些预先定义的函数。如图5所示，应用程序框架层可以包括窗口管理器，内容提供器，视图系统，电话管理器，资源管理器，通知管理器等。窗口管理器用于管理窗口程序。窗口管理器可以获取显示屏大小，判断是否有状态栏，锁定屏幕，截取屏幕等。内容提供器用来存放和获取数据，并使这些数据可以被应用程序访问。数据可以包括视频，图像，音频，拨打和接听的电话，浏览历史和书签，电话簿等。视图系统包括可视控件，例如显示文字的控件，显示图片的控件等。视图系统可用于构建应用程序。显示界面可以由一个或多个视图组成的。例如，包括短信通知图标的显示界面，可以包括显示文字的视图以及显示图片的视图。电话管理器用于提供电子设备100的通信功能。例如通话状态的管理。资源管理器为应用程序提供各种资源，比如本地化字符串，图标，图片，布局文件，视频文件等等。通知管理器使应用程序可以在状态栏中显示通知信息，可以用于传达告知类型的消息，可以短暂停留后自动消失，无需用户交互。比如通知管理器被用于告知下载完成，消息提醒等。通知管理器还可以是以图表或者滚动条文本形式出现在系统顶部状态栏的通知，例如后台运行的应用程序的通知，还可以是以对话窗口形式出现在屏幕上的通知。例如在状态栏提示文本信息，发出提示音，电子设备振动，指示灯闪烁等。Android runtime包括核心库和虚拟机。Android runtime负责安卓系统的调度和管理。核心库包含两部分：一部分是java语言需要调用的功能函数，另一部分是安卓的核心库。应用程序层和应用程序框架层运行在虚拟机中。虚拟机将应用程序层和应用程序框架层的java文件执行为二进制文件。虚拟机用于执行对象生命周期的管理，堆栈管理，线程管理，安全和异常的管理，以及垃圾回收等功能。系统库可以包括多个功能模块。例如：表面管理器，媒体库，三维图形处理库，2D图形引擎等。表面管理器用于对显示子系统进行管理，并且为多个应用程序提供了2D和3D图层的融合。媒体库支持多种常用的音频，视频格式回放和录制，以及静态图像文件等。媒体库可以支持多种音视频编码格式，例如:MPEG4，H.264，MP3，AAC，AMR，JPG，PNG等。三维图形处理库用于实现三维图形绘图，图像渲染，合成，和图层处理等。2D图形引擎是2D绘图的绘图引擎。内核层是硬件和软件之间的层。内核层至少包含显示驱动，摄像头驱动，音频驱动，传感器驱动。为了便于理解，本申请以下实施例将以具有图4和图5所示结构的电子设备为例，结合附图对本申请实施例提供的电子设备的投屏方法进行具体阐述。本申请实施例提供的电子设备的投屏方法可以应用于图6所示的系统架构中，下面结合图6介绍本申请实施例的处理流程。首先，SystemUI是以系统应用的形式运行在Android系统当中，上述图1中的图和图2中的图为SystemUI所实现功能中的一个快速设置功能。用户点击图1中的图或图2中的图中的“无线投屏”按钮后，电子设备可以将该点击指令发送至业务层的无线投屏模块。无线投屏模块通过投屏能力中心提供的镜像协议进行投屏设备搜索，例如通过Miracast协议搜索，然后调用应用程序框架层的无线视频显示管理器WiFiDisplay，并通过多屏交互框架确定连接Wifi对等网络投屏设备。在电子设备与投屏设备建立连接后，可以将显示界面的数据流推送至投屏设备进行显示，并将已开启镜像投屏的状态标识写入配置文件Settings中、以及建立连接的投屏设备的设备信息写入数据库SQLite中，以下简称为DB。可选地，该状态标识和设备信息也可以写入其他可存储的文件中，本申请实施例对存储方式不做限制。然后，若第三方视频APP正在播放视频，则该视频APP会通过系统提供的接口读取Settings中的状态标识和DB中的设备信息。当所读取的状态标识为已开启镜像投屏、且DB中包含已连接的设备信息时，该视频APP调用系统内部的DLNA接口，从镜像投屏转为DLNA投屏，并将DLNA投屏连接成功信息发送至无线投屏模块。可以理解，DB中的设备信息可以包括但不限于投屏设备的IP地址、Mac地址、uuid、设备标识以及设备名称等。通常，镜像投屏的视频数据为H264视频编码格式，DLNA投屏的视频数据为x264视频编码格式。其中，无线投屏模块通过镜像协议进行投屏设备搜索时，可根据当前支持投屏的设备的能力优先选择其对应的镜像协议，目前较流行的镜像协议包括Miracast协议、Cast+协议、AirPlay协议和Lelink协议等。具体地，Miracast是由Wi-Fi联盟于2012年所制定，以Wi-Fi直连为基础的无线显示标准，采用Miracast协议进行无线投屏的设备无需接入无线局域网，电子设备可通过该协议将视频或照片直接在投屏设备上播放而无需任何连接线，也不需要通过无线热点；在Miracast应用场景中，一台支持P2P的智能手机可直接连接上一台支持P2P的智能电视，智能手机便可以将自己的屏幕或者媒体资源传送给智能电视机显示或播放。Cast+协议可支持固定品牌A的电子设备进行无线投屏，在音视频数据传输过程中丢包率较低。AirPlay协议是基于wifi的无线显示标准，可应用在固定品牌B的电子设备和投屏设备之间，支持推送模式和镜像模式。采用Lelink协议进行无线投屏的设备需要接入同一个无线局域网。本申请实施例提供的电子设备的投屏方法还可以应用于图7所示的系统架构中，下面结合图7介绍本申请实施例的处理流程。首先，第三方视频APP正在播放视频时，用户点击图1中的图或图2中的图中的“无线投屏”按钮。然后若业务层的无线投屏模块监听到视频APP正在播放视频，则可通过投屏能力中心提供的镜像协议进行投屏设备搜索，例如通过Miracast协议搜索，此时投屏能力中心开启P2P或WALN的连接通道，并通过WifiP2PManager管理器建立与WiFi P2P投屏设备的通道，或者是建立与WiFi投屏设备的通道。在一种可实现的方式中，如图7中的图所示，建立通道之后，投屏能力中心并不向显示管理器DisplayManager推送数据流，但多屏交互框架仍将已开启镜像投屏的状态标识写入配置文件Settings中、以及建立连接的投屏设备的设备信息写入DB中。接下来，若第三方视频APP监听到电子设备已开启镜像投屏，则调用系统内部的DLNA接口进行DLNA投屏。在另一种可实现的方式中，如图7中的图所示，上述建立通道之后，投屏能力中心向DisplayManager推送数据流，但由DisplayManager将该数据流过滤掉，即不显示在投屏设备上。然后多屏交互框架将已开启镜像投屏的状态标识写入配置文件Settings中、以及建立连接的投屏设备的设备信息写入DB中。若第三方视频APP监听到电子设备已开启镜像投屏，则调用系统内部的DLNA接口进行DLNA投屏。综上所述，因镜像投屏时投屏设备存在上述的画面黑边等问题，本申请实施例在开启镜像投屏功能后，可以由视频APP调用内部DLNA接口，自动转为DLNA投屏。因在电子设备DLNA投屏时，可将所播放的音视频数据的地址)推送至投屏设备，则投屏设备自身可根据音视频数据的地址下载数据资源，进而实现全屏播放，由此可减少画面黑边、卡顿、花屏及音画不同步等问题，所播放的视频画面清晰流畅，有效提升了投屏效果，且无需用户进行其他操作，也提高了用户的体验度。另外，采用DLNA投屏模式，用户可以在电子设备上执行其他操作，不影响投屏设备正常播放视频。首先介绍上述图1中场景的实现过程，即电子设备先播放视频再打开镜像投屏的场景，结合上述图6所示的系统架构，图8是本申请实施例提供的一例电子设备的投屏方法的流程示意图，该方法包括：S201，接收电子设备播放视频操作，获取电子设备的状态标识。其中，当电子设备处于镜像投屏的状态时，状态标识可以为1，当电子设备未处于镜像投屏的状态时，状态标识可以为0。S202，通过状态标识确定电子设备未处于镜像投屏的状态，接收用户投屏操作，电子设备通过镜像投屏的方式投屏至投屏设备。具体地，在电子设备还未处于镜像投屏的状态时，若电子设备中的视频APP开始播放视频，则无法在投屏设备上进行投屏，此时需要用户打开镜像投屏的功能。当用户打开镜像投屏的功能后，电子设备可通过镜像协议搜索设备，当电子设备只搜索到一个投屏设备，可直接将显示界面镜像投屏至该投屏设备。当电子设备搜索到多个投屏设备，可以将可用设备列表展示给用户，如上述图1中的图所示的展示界面，然后在接收到用户的选择操作后，电子设备将显示界面镜像投屏至用户所选择的投屏设备。当电子设备搜索到的投屏设备为用户之前所选择过的投屏设备时，也可以直接将显示界面镜像投屏至该投屏设备。可以理解，在电子设备的显示界面镜像投屏至投屏设备后，电子设备可以记录已开启镜像投屏的状态标识以及建立连接的投屏设备的设备信息。S203，获取投屏设备的第一设备信息，根据第一设备信息，将电子设备与投屏设备之间的投屏方式由镜像投屏切换为DLNA投屏。具体地，在电子设备处于镜像投屏的状态后，视频APP可以获取投屏设备的设备信息，并调用内部DLNA接口，将电子设备与投屏设备之间的投屏方式由镜像投屏切换为DLNA投屏。其中，视频APP调用内部DLNA接口之前，电子设备需要通过DLNA协议搜索附近支持DLNA投屏的设备，当支持DLNA投屏的设备与上述镜像投屏的投屏设备为同一个时，视频APP可调用DLNA接口实现DLNA投屏。需要说明的是，采用DLNA协议进行无线投屏的设备需要接入同一个无线局域网。对于此过程，由上述图1描述的电子设备开启镜像投屏模式观看视频的方式可知，该方式是电子设备先播放视频再开启镜像投屏，对于这种方式下面介绍切换为DLNA投屏的过程：参见图9中的图，电子设备中的视频APP在播放视频过程中，若当前电子设备还未开启镜像投屏的功能，则视频APP会启动监听模块ContentObserver监听上述Settings中的数据。当监听到Settings中的状态标识为已开启镜像投屏时，即此时电子设备已镜像投屏至投屏设备，并且视频APP此时也在播放视频，则视频APP再从DB中获取已连接的投屏设备的设备信息，将电子设备与投屏设备之间的投屏方式由镜像投屏切换为DLNA投屏。另外，ContentObserver还可以监听电子设备与投屏设备之间是否断开了镜像投屏，比如电子设备断开镜像投屏后，视频APP监听到断开消息，调用内部DLNA接口断开DLNA投屏。上述电子设备的投屏方法，在电子设备播放视频时，若电子设备当前未处于系统镜像投屏的状态，则电子设备可以接收用户开启系统镜像投屏功能的操作，并将镜像投屏切换为DLNA投屏，从而减少画面黑边、卡顿、花屏及音画不同步等问题，所播放的视频画面清晰流畅，有效提升了投屏效果，且无需用户进行其他操作，也提高了用户的观看体验度。对于上述图1中的场景，还可以结合上述图7所示的系统架构进行实现，图10是本申请实施例提供的另一例电子设备的投屏方法的流程示意图，该方法包括：S301，接收电子设备播放视频操作，获取电子设备的状态标识。该S301的实现过程可以参见上述S201的过程，在此不再赘述。S302，通过状态标识确定电子设备未处于镜像投屏的状态，接收用户投屏操作，建立电子设备与投屏设备之间的通道连接。具体地，在电子设备还未处于镜像投屏的状态时，若电子设备中视频APP开始播放视频，则无法在投屏设备上进行投屏，此时需要用户打开镜像投屏的功能。当用户打开镜像投屏的功能后，电子设备可通过镜像协议搜索设备，并在搜索到投屏设备后建立与投屏设备之间的通道连接。在一种可实现的方式中，电子设备与投屏设备仅建立通道连接，不向投屏设备推送数据流；在另一种可实现的方式中，电子设备与投屏设备建立通道连接并向投屏设备推送数据流，但由投屏设备将此数据流进行过滤。也即是说，此实现方式中，投屏设备上并不显示电子设备镜像投屏的界面。可以理解，电子设备与投屏设备建立通道连接后，也可以记录已开启镜像投屏的状态标识以及建立连接的投屏设备的设备信息。S303，获取投屏设备的第一设备信息，根据第一设备信息，将电子设备通过DLNA投屏的方式投屏至投屏设备。具体地，视频APP可以监听电子设备是否处于镜像投屏的状态，在监听到已开启镜像投屏时，获取投屏设备的设备信息，并调用内部DLNA接口，因此时电子设备并未镜像投屏至投屏设备，则可将电子设备直接通过DLNA投屏的方式投屏至投屏设备，即此时在用户感观上没有镜像投屏向DLNA投屏切换的过程。上述电子设备的投屏方法，在电子设备播放视频时，若电子设备当前未处于系统镜像投屏的状态，则电子设备可以接收用户开启系统镜像投屏功能的操作，并直接采用DLNA投屏的方式投屏至投屏设备，从而减少画面黑边、卡顿、花屏及音画不同步等问题，所播放的视频画面清晰流畅，有效提升了投屏效果，且无需用户进行其他操作，也提高了用户的观看体验度。其次介绍上述图2中场景的实现过程，即电子设备先打开镜像投屏再播放视频的场景，结合上述图6所示的系统架构，图11是本申请实施例提供的又一例电子设备的投屏方法的流程示意图，该方法包括：S401，接收用户投屏操作，电子设备通过镜像投屏的方式投屏至投屏设备。其中，投屏操作可以为用户对上述图2中的图中的“无线投屏”按钮的点击操作，或者是对电子设备“设置”路径内的“无线投屏”按钮的点击操作。此步骤中的镜像投屏过程可以参见上述实施例的描述，在此不再赘述。S402，接收电子设备播放视频操作，获取电子设备的投屏信息，该投屏信息包括投屏设备的第一设备信息。S403，根据第一设备信息，将电子设备与投屏设备之间的投屏方式由镜像投屏切换为DLNA投屏。具体地，在电子设备镜像投屏至投屏设备后，可以将当前的投屏信息进行存储，若电子设备中安装的视频APP正在播放视频，则由该视频APP主动获取该投屏信息，并在电子设备处于镜像投屏的状态下由视频APP调用内部DLNA接口，将电子设备与投屏设备之间的投屏方式由镜像投屏切换为DLNA投屏。对于此过程，由上述图2描述的电子设备开启镜像投屏模式观看视频的方式可知，该方式是电子设备先开启镜像投屏再播放视频，对于这种方式下面介绍切换为DLNA投屏的过程：参见图9中的图，电子设备已处于镜像投屏模式中，当用户点开视频APP播放视频，则视频APP调用系统接口获取Settings和DB中的数据，若Settings中的状态标识为已开启镜像投屏、且DB中存在已连接的投屏设备的设备信息，则将电子设备与投屏设备之间的投屏方式由镜像投屏切换为DLNA投屏。该方式与上述图9中的图所述方式的不同之处在于，该方式不需要启动监听模块ContentObserver去主动监听系统镜像投屏的状态。上述电子设备的投屏方法，在电子设备播放视频时，若电子设备当前已处于系统镜像投屏的状态，则可以自动切换为DLNA投屏，从而减少画面黑边、卡顿、花屏及音画不同步等问题，所播放的视频画面清晰流畅，有效提升了投屏效果，且无需用户进行其他操作，也提高了用户的观看体验度。在实际场景中，在采用DLNA投屏将电子设备投屏至投屏设备，需确保电子设备通过DLNA协议确定的投屏设备与建立连接的投屏设备为同一个，才可成功切换为DLNA投屏。由上述描述可知，电子设备与投屏设备建立连接后，可以将投屏设备的设备信息记录在DB中，包括IP地址、Mac地址、uuid、设备标识和设备名称等，然后电子设备可以通过DLNA协议搜索支持DLNA投屏的可用投屏设备，并获取支持DLNA投屏的可用投屏设备的设备信息，将支持DLNA投屏的可用投屏设备的设备信息与DB中的设备信息进行比对，若比对成功则可以将镜像投屏切换为DLNA投屏。在一种可实现的方式中，记录在DB中的投屏设备的设备信息①包括IP地址，电子设备通过DLNA协议搜索到的可用投屏设备的设备信息②也包括IP地址。若上述电子设备通过镜像协议搜索投屏设备是需要通过同一个无线局域网，例如采用的是Lelink协议，又因通过DLNA协议搜索可用投屏设备也是需要通过同一个无线局域网，因此所得到的设备信息①的IP地址和设备信息②的IP地址相同，那么电子设备中的视频APP可直接从DB中获取设备信息①的IP地址，并DLNA投屏至该IP地址对应的投屏设备，完成了DLNA投屏的过程。可选地，在此实现方式中，因设备信息①的IP地址和设备信息②的IP地址相同，那么电子设备也可以不进行DLNA协议搜索，直接根据DB中设备信息①的IP地址进行DLNA投屏。在另一种可实现的方式中，记录在DB中的投屏设备的设备信息①可以包括IP地址、Mac地址、uuid和设备名称，电子设备通过DLNA协议搜索到的可用投屏设备的设备信息②可以包括IP地址、Mac地址、uuid和设备名称。若上述电子设备通过镜像协议搜索投屏设备是不需要通过同一个无线局域网，例如采用的是Miracast协议或者Cast+协议，而通过DLNA协议搜索可用投屏设备是需要通过同一个无线局域网，那么设备信息①的IP地址和设备信息②的IP地址不相同，则电子设备需要将设备信息②的IP地址写入DB以供视频APP查询。示例性地，若用户想要将手机投屏至客厅内的电视观看视频，此时手机和电视都连入了客厅内的WiFi，在进行镜像投屏时可通过Wifi P2P搜索，此时手机获取的电视的IP地址为192.168.49.1；在切换至DLNA投屏的过程中，需采用DLNA协议通过客厅内的WiFi无线网络搜索电视，此时手机获取的电视的IP地址为192.168.43.238，两个IP地址不同。可选地，通过DLNA协议搜索到的可用投屏设备的数量可以为一个或多个。示例性地，投屏设备的设备信息①和可用投屏设备的设备信息②可以如图12所示，通过比对发现，因uuid为设备唯一识别码，所以设备信息①和设备信息②中仅uuid信息是相同的，因此本申请实施例可以根据uuid进行关联。若通过DLNA协议搜索到的可用投屏设备的数量为一个，则电子设备将该设备信息②的uuid与设备信息①的uuid进行对比，若两个uuid相同，则可用投屏设备与投屏设备为同一个设备，也就是正在镜像投屏的投屏设备，电子设备可以将设备信息②的IP地址写入DB。随后视频APP可从DB中获取该IP地址，并DLNA投屏至该IP地址对应的投屏设备，完成了DLNA投屏的过程。若通过DLNA协议搜索到的可用投屏设备的数量为多个，则电子设备将可用投屏设备中与上述镜像投屏的投屏设备的uuid相同的设备作为目标投屏设备，并将该目标投屏设备的IP地址写入DB。随后视频APP可从DB中获取目标投屏设备的IP地址，并DLNA投屏至该IP地址对应的投屏设备，完成了至DLNA投屏的过程。可选地，在上述电子设备DLNA投屏至投屏设备之后，视频APP还可以将设备信息②存入白名单。在下次电子设备完成镜像投屏时，视频APP先将镜像投屏的投屏设备的设备信息与白名单中的设备信息进行比对，如果比对成功，则根据白名单中的IP地址DLNA投屏至该IP地址对应的设备；如果没有比对成功，则再通过DLNA协议进行搜索可用设备。由此可减少DLNA搜索的次数，提高投屏切换的效率。上述实现方式中，电子设备通过唯一标识码uuid进行投屏设备的关联，可提高所确定的DLNA投屏设备的准确性，以确保通过DLNA协议确定的投屏设备与镜像投屏的投屏设备为同一个，提高了DLNA投屏的成功率。在又一种可实现的方式中，记录在DB中的投屏设备的设备信息①可以包括IP地址、Mac地址、设备标识和设备名称，电子设备通过DLNA协议搜索到的可用投屏设备的设备信息②可以包括IP地址、Mac地址、设备标识和设备名称。也即是说，此场景中所获得的设备信息中没有uuid，其中的设备标识为用于标识投屏设备的其他信息，通过镜像协议搜索到的设备标识与通过DLNA协议搜索到的设备标识可能不一致。示例性地，投屏设备的设备信息①和可用投屏设备的设备信息②可以如图13所示，通过比对发现，设备信息①和设备信息②中仅设备名称信息是相同的，因此本申请实施例可以根据设备名称进行关联。若通过DLNA协议搜索到的可用投屏设备的数量为一个，则电子设备将该设备信息②的设备名称与设备信息①的设备名称进行对比，若两个设备名称相同，则可用投屏设备与投屏设备为同一个设备，也就是正在镜像投屏的投屏设备，电子设备可以将设备信息②的IP地址写入DB。随后视频APP可从DB中获取该IP地址，并DLNA投屏至该IP地址对应的投屏设备，完成了DLNA投屏的过程。若通过DLNA协议搜索到的可用投屏设备的数量为多个，则电子设备将可用投屏设备中与上述镜像投屏的投屏设备的设备名称相同的设备作为目标投屏设备，并将该目标投屏设备的IP地址写入DB。随后视频APP可从DB中获取目标投屏设备的IP地址，并DLNA投屏至该IP地址对应的投屏设备，完成了DLNA投屏的过程。若可用投屏设备中与投屏设备的设备名称相同的设备有多个，此时电子设备识别不了哪个设备与投屏设备为同一个设备，此时，电子设备可以通过显示界面输出这几个设备的设备列表，供用户根据自己的镜像投屏设备进行选择。上述实现方式中，在搜索到的投屏设备的设备信息中不包括uuid时，电子设备可通过设备名称进行关联，以适应不同场景的投屏切换过程。另外，在所搜索到的DLNA投屏设备的数量有多个时，还可以由用户进行选择确定，进一步提高了用户的观看体验度。在一种场景中，当用户想要使用电子设备的镜像投屏模式观看本地存储的视频时，电子设备也可采用上述方式进行DLNA投屏。其中，本地视频可以采用“图库”应用播放，也可以采用电子设备自带的播放器播放；当电子设备“图库”应用或播放器正在播放视频，且已开启镜像投屏模式，则将电子设备与投屏设备之间进行DLNA投屏，具体投屏过程可参见上述实施例的描述，在此不再赘述。需要说明的是，DLNA投屏仅支持固定格式的音视频数据，比如JPEG、PNG、GIF等格式的图像数据，AAC、MP3、WMA等格式的音频数据，MPEG-2、MPEG-4、AVC、WMV等格式的视频数据，电子设备在进行投屏切换之前，还可以对视频数据的格式进行判断，如果视频数据的格式符合条件则切换为DLNA投屏，如果不符合条件则不切换投屏方式。上文详细介绍了本申请实施例提供的电子设备的投屏方法的示例。可以理解的是，电子设备为了实现上述功能，其包含了执行各个功能相应的硬件和/或软件模块。本领域技术人员应该很容易意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，本申请能够以硬件或硬件和计算机软件的结合形式来实现。某个功能究竟以硬件还是计算机软件驱动硬件的方式来执行，取决于技术方案的特定应用和设计约束条件。本领域技术人员可以结合实施例对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。本申请实施例可以根据上述方法示例对电子设备进行功能模块的划分，例如，可以对应各个功能划分为各个功能模块，例如检测单元、处理单元、显示单元等，也可以将两个或两个以上的功能集成在一个模块中。上述集成的模块既可以采用硬件的形式实现，也可以采用软件功能模块的形式实现。需要说明的是，本申请实施例中对模块的划分是示意性的，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式。需要说明的是，上述方法实施例涉及的各步骤的所有相关内容均可以援引到对应功能模块的功能描述，在此不再赘述。本实施例提供的电子设备，用于执行上述电子设备的投屏方法，因此可以达到与上述实现方法相同的效果。在采用集成的单元的情况下，电子设备还可以包括处理模块、存储模块和通信模块。其中，处理模块可以用于对电子设备的动作进行控制管理。存储模块可以用于支持电子设备执行存储程序代码和数据等。通信模块，可以用于支持电子设备与其他设备的通信。其中，处理模块可以是处理器或控制器。其可以实现或执行结合本申请公开内容所描述的各种示例性的逻辑方框，模块和电路。处理器也可以是实现计算功能的组合，例如包含一个或多个微处理器组合，数字信号处理和微处理器的组合等等。存储模块可以是存储器。通信模块具体可以为射频电路、蓝牙芯片、Wi-Fi芯片等与其他电子设备交互的设备。在一个实施例中，当处理模块为处理器，存储模块为存储器时，本实施例所涉及的电子设备可以为具有图4所示结构的设备。本申请实施例还提供了一种计算机可读存储介质，计算机可读存储介质中存储了计算机程序，当计算机程序被处理器执行时，使得处理器执行上述任一实施例的电子设备的投屏方法。本申请实施例还提供了一种计算机程序产品，当该计算机程序产品在计算机上运行时，使得计算机执行上述相关步骤，以实现上述实施例中的电子设备的投屏方法。另外，本申请的实施例还提供一种装置，这个装置具体可以是芯片，组件或模块，该装置可包括相连的处理器和存储器；其中，存储器用于存储计算机执行指令，当装置运行时，处理器可执行存储器存储的计算机执行指令，以使芯片执行上述各方法实施例中的电子设备的投屏方法。其中，本实施例提供的电子设备、计算机可读存储介质、计算机程序产品或芯片均用于执行上文所提供的对应的方法，因此，其所能达到的有益效果可参考上文所提供的对应的方法中的有益效果，此处不再赘述。通过以上实施方式的描述，所属领域的技术人员可以了解到，为描述的方便和简洁，仅以上述各功能模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能模块完成，即将装置的内部结构划分成不同的功能模块，以完成以上描述的全部或者部分功能。在本申请所提供的几个实施例中，应该理解到，所揭露的装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，模块或单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个装置，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是一个物理单元或多个物理单元，即可以位于一个地方，或者也可以分布到多个不同地方。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个可读取存储介质中。基于这样的理解，本申请实施例的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该软件产品存储在一个存储介质中，包括若干指令用以使得一个设备或处理器执行本申请各个实施例方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上内容，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以权利要求的保护范围为准。
