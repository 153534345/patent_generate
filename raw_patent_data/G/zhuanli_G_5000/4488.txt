标题title
用于纺织生产的数据处理方法
摘要abst
本发明涉及数据处理技术领域，具体涉及一种用于纺织生产的数据处理方法。该方法以图像采集设备获取纺织品灰度图像，并获取灰度图像的数据，侧重点是对所获取的图像数据的处理方式进行改进，以灰度图像中每个像素点自身灰度值与周围灰度值的偏差情况确定每个像素点在聚类时的自适应距离权重以及属于灰度图像中前景图像的隶属度，以自适应距离权重完成所有像素点的聚类，以隶属度确定前景像素点和背景像素点后，将背景像素点所属的聚类簇的聚簇中心的灰度值完成背景像素点的归一化，最终按照不同压缩程度对前景、背景像素点进行压缩以完成灰度图像数据的压缩。该方法对包含有用信息程度不同的区域进行不同尺度压缩，提高了压缩率以及压缩效果。
权利要求书clms
1.一种用于纺织生产的数据处理方法，其特征在于，包括以下步骤：获取纺织品的灰度图像；根据灰度图像上每个像素点的灰度值以及该像素点所属行上各个像素点的灰度值，确定该像素点的偏移程度以及影响范围；根据像素点的偏移程度以及影响范围，确定该像素点属于灰度图像前景区域的隶属度；根据各个像素点属于灰度图像前景区域的隶属，确定灰度图像上的前景像素点以及背景像素点，根据各个像素点属于灰度图像前景区域的隶属，确定该像素点的自适应距离权重；根据每个像素点的自适应距离权重对表面图像进行聚类；根据背景像素点所属聚类簇的簇类中心点的灰度值对背景像素点进行均一化处理，通过对均一化处理的背景像素点进行较大程度的压缩而对前景像素点进行较小程度的压缩的方式，完成对灰度图像的压缩处理。2.根据权利要求1所述的用于纺织生产的数据处理方法，其特征在于，根据灰度图像上每个像素点的灰度值以及该像素点所属行上各个像素点的灰度值，确定该像素点的偏移程度的方法为：计算灰度图像上每个像素点所属行上各个像素点的灰度值的均值，以所述均值与所述每个像素点的灰度值，确定所述每个像素点的偏移程度。3.根据权利要求2所述的用于纺织生产的数据处理方法，其特征在于，所述偏移程度为：其中，表示第个像素点的偏移程度；为第i个像素点的灰度值；为第i个像素点所在行上所有像素点的平均灰度值；与分别为第i个像素点所在行上所有像素点的灰度值的最大值与最小值。4.根据权利要求1所述的用于纺织生产的数据处理方法，其特征在于，根据灰度图像上每个像素点的灰度值以及该像素点所属行上各个像素点的灰度值，确定该像素点的影响范围的方法为：计算灰度图像上每个像素点所属行上各个像素点的灰度值的标准差，以所述标准差确定所述每个像素点的影响范围。5.根据权利要求4所述的用于纺织生产的数据处理方法，其特征在于，所述影响范围为：其中，为第i个像素点在图像上的影响范围，为第i个像素点的偏移程度，为第i个像素点的灰度值，为第i个像素点所在行上所有像素点的灰度值的标准差，为以第i个像素点为中心，以为半径的范围，表示第i个像素点的邻域范围。6.根据权利要求1所述的用于纺织生产的数据处理方法，其特征在于，所述隶属度为：其中，为第i个像素点属于图像中前景区域的隶属度，为第i个像素点的偏移程度，为第i个像素点在图像上的影响范围。7.根据权利要求1所述的用于纺织生产的数据处理方法，其特征在于，所述根据各个像素点属于灰度图像前景区域的隶属，确定灰度图像上的前景像素点以及背景像素点的方法为：将隶属度大于隶属度阈值的像素点作为前景像素点，其余像素点作为背景像素点。8.根据权利要求1所述的用于纺织生产的数据处理方法，其特征在于，所述根据各个像素点属于灰度图像前景区域的隶属，确定该像素点的自适应距离权重的方法为：对所有像素点对应所得隶属度进行归一化处理：其中，表示归一化后的第i个像素点属于图像中前景区域的隶属度，为第i个像素点属于图像中前景区域的隶属度，与分别表示各个像素点属于图像中前景区域的隶属度中的最大值以及最小值；自适应距离权重为：其中，为第i个像素点的自适应距离权重，为预设的第i个像素点的基础权重，为归一化后的第i个像素点属于图像中前景区域的隶属度。9.根据权利要求1所述的用于纺织生产的数据处理方法，其特征在于，所述根据背景像素点所属聚类簇的簇类中心点的灰度值对背景像素点进行均一化处理，通过对均一化处理的背景像素点进行较大程度的压缩而对前景像素点进行较小程度的压缩的方式，完成对灰度图像的压缩处理的方法为：以背景像素点所属聚类簇的簇类中心点的灰度值，对所有背景像素点的灰度值进行均一化；采用游程压缩方法对前景像素点以及均一化后的背景像素点进行压缩，完成对灰度图像的压缩处理。
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及一种用于纺织生产的数据处理方法。背景技术纺织产品在生产后需要进行缺陷检测，现有高效检测方法通常是基于机器视觉技术的检测方法，该种检测过程在通过相关图像电子设备获取到纺织品表面的高清图像后，需要将图像数据发送给计算机进行处理分析，由于所获取的纺织品表面图像为高分辨率的高清图像，所以对应产生的图像数据很大，在传输给计算机的过程中需要压缩处理以提高传输效率。现有最常用的对图像数据进行压缩的方法为，利用K-means的聚类结果对图像进行压缩处理，但现有K-means的聚类过程采用的是固定的距离权重，该种固定的聚类权重会因纺织品表面图像中所存在的缺陷，而在缺陷位置产生聚类的局部最优解，导致聚类提前终止而对聚类结果产生影响，致使对图像数据的压缩处理不充分，压缩率降低。同时，现有的该种以固定的距离权重进行聚类的图像数据压缩方法，无法实现对包含更多有用信息的前景部位进行较小模糊处理而对包含更少有用信息的背景部位进行较大的模糊处理，从而无法使压缩后所得数据很好地表征纺织品表面缺陷与纹理，压缩效果较差。发明内容本发明提供了一种用于纺织生产的数据处理方法，用以解决现有技术对纺织品表面图像数据在传输过程中压缩率低且压缩效果较差的技术问题，所采用的技术方案具体如下：本发明的一种用于纺织生产的数据处理方法，包括以下步骤：获取纺织品的灰度图像；根据灰度图像上每个像素点的灰度值以及该像素点所属行上各个像素点的灰度值，确定该像素点的偏移程度以及影响范围；根据像素点的偏移程度以及影响范围，确定该像素点属于灰度图像前景区域的隶属度；根据各个像素点属于灰度图像前景区域的隶属，确定灰度图像上的前景像素点以及背景像素点，根据各个像素点属于灰度图像前景区域的隶属，确定该像素点的自适应距离权重；根据每个像素点的自适应距离权重对表面图像进行聚类；根据背景像素点所属聚类簇的簇类中心点的灰度值对背景像素点进行均一化处理，通过对均一化处理的背景像素点进行较大程度的压缩而对前景像素点进行较小程度的压缩的方式，完成对灰度图像的压缩处理。本发明的有益效果为：本发明该方法根据纺织品灰度图像上各个像素点自身灰度值与周围灰度值的偏差情况确定了每个像素点属于灰度图像前景区域的隶属度，也即确定了每个像素点属于需保留、以较小程度压缩的纺织品花纹图像与缺陷区域的像素点的隶属度，从而完成了灰度图像前景像素点和背景像素点的区分，以及每个像素点在聚类过程中的自适应距离权重，以自适应距离权重完成聚类后，将背景像素点所属聚类簇进行归一化处理，并分别对背景像素点所对应聚类簇以及前景像素点所对应的其它聚类簇，进行压缩程度不同的压缩处理，完成对灰度图像的自适应压缩，保留图像有用信息的同时更大程度对无用信息进行压缩，提高纺织品表面图像数据在传输过程中的压缩率以及压缩效果。进一步的，根据灰度图像上每个像素点的灰度值以及该像素点所属行上各个像素点的灰度值，确定该像素点的偏移程度的方法为：计算灰度图像上每个像素点所属行上各个像素点的灰度值的均值，以所述均值与所述每个像素点的灰度值，确定所述每个像素点的偏移程度。进一步的，所述偏移程度为：其中，表示第个像素点的偏移程度；为第i个像素点的灰度值；为第i个像素点所在行上所有像素点的平均灰度值；与分别为第i个像素点所在行上所有像素点的灰度值的最大值与最小值。进一步的，根据灰度图像上每个像素点的灰度值以及该像素点所属行上各个像素点的灰度值，确定该像素点的影响范围的方法为：计算灰度图像上每个像素点所属行上各个像素点的灰度值的标准差，以所述标准差确定所述每个像素点的影响范围。进一步的，所述影响范围为：其中，为第i个像素点在图像上的影响范围，为第i个像素点的偏移程度，为第i个像素点的灰度值，为第i个像素点所在行上所有像素点的灰度值的标准差，为以第i个像素点为中心，以为半径的范围，表示第i个像素点的邻域范围。进一步的，所述隶属度为：其中，为第i个像素点属于图像中前景区域的隶属度，为第i个像素点的偏移程度，为第i个像素点在图像上的影响范围。进一步的，所述根据各个像素点属于灰度图像前景区域的隶属，确定灰度图像上的前景像素点以及背景像素点的方法为：将隶属度大于隶属度阈值的像素点作为前景像素点，其余像素点作为背景像素点。进一步的，所述根据各个像素点属于灰度图像前景区域的隶属，确定该像素点的自适应距离权重的方法为：对所有像素点对应所得隶属度进行归一化处理：其中，表示归一化后的第i个像素点属于图像中前景区域的隶属度，为第i个像素点属于图像中前景区域的隶属度，与分别表示各个像素点属于图像中前景区域的隶属度中的最大值以及最小值；自适应距离权重为：其中，为第i个像素点的自适应距离权重，为预设的第i个像素点的基础权重，为归一化后的第i个像素点属于图像中前景区域的隶属度。进一步的，所述根据背景像素点所属聚类簇的簇类中心点的灰度值对背景像素点进行均一化处理，通过对均一化处理的背景像素点进行较大程度的压缩而对前景像素点进行较小程度的压缩的方式，完成对灰度图像的压缩处理的方法为：以背景像素点所属聚类簇的簇类中心点的灰度值，对所有背景像素点的灰度值进行均一化；采用游程压缩方法对前景像素点以及均一化后的背景像素点进行压缩，完成对灰度图像的压缩处理。附图说明图1是本发明该种用于纺织生产的数据处理方法的流程图。具体实施方式下面结合附图及实施例，对本发明的一种用于纺织生产的数据处理方法进行详细说明。方法实施例：本发明的一种用于纺织生产的数据处理方法实施例，其整体流程如图1所示，具体过程如下：步骤一，获取纺织品的灰度图像。本实施例采用相关的图像采集电子设备，如工业高清摄像机拍摄纺织品表面以获取纺织品表面图像，以所获取的纺织品表面图像的数据作为待压缩的图像数据。考虑到采用图像采集设备所获取的表面图像中，会因环境影响而产生噪声，所以本实施例在获取纺织品表面图像后，还包括采用中值滤波方法对其进行去噪处理，以过滤异常像素点的步骤。本实施例所采用的去噪方法仅为一种优选方法，在其它实施例中还可采用现有任意一种图像去噪处理方法。以及，在其它实施例中，还可不对所获取的纺织品表面图像进行去噪。步骤二，确定灰度图像中各个像素点属于图像前景区域的隶属度。对于纺织面料而言，纺织产生的面料图案和缺陷区域等灰度值发生较大变化的部位为需要进行保留的前景部位，较大面积颜色均匀的底色等为需要进行压缩的背景部位。对于前景部位，需要保留其所含有的信息，作为后续进行缺陷检测的依据，如果对前景部位进行压缩模糊处理，则压缩后图像整体有用信息损失较多；对于背景部位，则需要进行较大程度的压缩模糊处理，因其含有的信息不重要或不能表示图像的特征，进行模糊后损失的信息较少。因此，本实施例选择计算表面图像上各个像素点属于前景区域的隶属度，将像素点分为前景、背景两类，以便后续确定聚类过程中的自适应距离权重。本实施例中，计算表面图像上各个像素点属于前景区域的隶属度的过程具体为，首先通过像素点灰度值相较于其所在行灰度值的变化趋势确定像素点的偏移程度，然后计算像素点在图像上的影响范围，结合像素点的偏移程度以及影响范围，综合确定像素点属于前景区域的隶属度。具体过程为：1、通过像素点灰度值与该像素点所在行的灰度值，确定像素点的偏移程度。图像上不同颜色在不同位置上的不同分布，蕴含了图像的信息，随着图像上不同位置上颜色的变化或者说偏移表征了图像的信息，彩色图像所蕴含的信息，相较于白色图像显然更多，因为随着位置变化，彩色图像的颜色变化趋势显然相较于白色图像更明显。所以，本实施例通过图像上各个像素点灰度值的变化趋势来确定像素点的偏移程度。由于所采集的纺织品表面图像往往是长矩形图像，所以本实施例在图像行方向上观察灰度值的变化以完成变化趋势的判定。灰度图像上像素点的偏移程度为：其中，表示第个像素点的偏移程度；为第i个像素点的灰度值；为第i个像素点所在行上所有像素点的平均灰度值；与分别为第i个像素点所在行上所有像素点的灰度值的最大值与最小值。式中，表示了第i个像素点灰度值在其所属行的整体灰度值中所处位置，相较于第i个像素点所属行的平均灰度值的偏离程度，该偏离程度与第i个像素点的灰度值的乘积越大，则表示第i个像素点的灰度值相较于其所属行的灰度值发生了越大程度的偏移。通过计算像素点的偏移程度，对图像中的像素进行了标记，将图像由灰度值矩阵转化为偏移程度矩阵，减少了使用像素值判断的局限性，便于后续评估像素点的影响范围。2、确定像素点的影响范围。通过相机采集的图像，会根据相机预设的标定参数将现实尺寸转化为数字尺寸，一个现实疵点位置会对应至多个图像像素点，因此，根据像素点的偏移程度计算像素点在图像上的影响范围，以便能够充分表示出面料的疵点位置。像素点在图像上的影响范围为：其中，为第i个像素点在图像上的影响范围，为第i个像素点的偏移程度，为第i个像素点的灰度值，为第i个像素点所在行上所有像素点的灰度值的标准差，为以第i个像素点为中心，以为半径的范围，表示第i个像素点的邻域范围。通过计算像素点的影响范围，将像素点在图像上产生偏移从而对图像信息的影响范围进行了确定，避免影响范围不确定导致进行压缩处理的时候造成前景信息的丢失。3、根据像素点的偏移程度以及影响范围，确定像素点属于图像中前景区域的隶属度。通过本实施例所确定的像素点的偏移程度，便可确定高信息含量点所处的位置，而通过本实施例所确定的影响范围，便可确定具体的高信息含量范围区域，根据这两种参数，便可确定灰度图像中各个像素点属于图像中前景区域的隶属度：其中，为第i个像素点属于图像中前景区域的隶属度，为第i个像素点的偏移程度，为第i个像素点在图像上的影响范围。然后，对所有像素点对应所得隶属度进行归一化处理：其中，表示归一化后的第i个像素点属于图像中前景区域的隶属度，为第i个像素点属于图像中前景区域的隶属度，与分别表示各个像素点属于图像中前景区域的隶属度中的最大值以及最小值。为像素点的偏移程度与影响范围之积，即像素点偏移程度越大或影响范围越广，则该点含有的信息量越大，越需要在压缩中进行保留。为归一化操作，使数据落入合理区间，避免数据过于庞大造成计算结果不理想。通过像素点属于前景的隶属度的计算，便可对压缩过程中需要保留与需要压缩的像素点进行了区分，便于后续设计自适应权重方法。步骤三，根据每个像素点属于图像前景区域的隶属度确定前景像素点以及背景像素点，同时根据每个像素点属于图像前景区域的隶属度确定该像素点的自适应距离权重。为了实现对前背景像素点的区分，得到像素点的归一化隶属度后，设置隶属度阈值，本实施例优选隶属度阈值为0.7，隶属度阈值可根据压缩率要求以及纺织品缺陷检测精确度要求而定，压缩率要求越高，则隶属度阈值越高，纺织品缺陷检测精确度要求越高，则隶属度阈值越低，两者的平衡可根据经验确定。将隶属度的像素点标记为前景像素点，其余像素点标记为背景像素点。通过计算前背景程度，对像素进行了重要性不同的标记，后应根据像素点的不同前背景程度进行自适应权重方法的设计，便于在充分压缩背景点的同时保留下前景点的信息。本实施例在聚类过程中的自适应距离权重为：其中，为第i个像素点的自适应距离权重，为预设的第i个像素点的基础权重，为归一化后的第i个像素点属于图像中前景区域的隶属度。通过隶属度对基础权重进行加权，表明了根据像素点属于图像中前景区域的隶属度的不同对固定的距离权重进行了自适应的改变，从而避免了聚类过程中局部最优解导致聚类提前终止，降低图像的压缩率。步骤四，根据每个像素点的自适应距离权重对表面图像进行聚类。获取了自适应距离权重后，便可根据自适应距离权重对图像进行更好的聚类，获取聚类的结果。本实施例使用的K-means聚类相较于现有的K-means聚类仅在于所采用的距离权重不同，具体也即下述聚类过程中的步骤b，而聚类的其它过程与现有技术中的聚类则实质相同：a.从灰度图像的所有像素点中随机选择K个像素点作为初始质心；b.根据各个像素点的自适应距离权重计算各个像素点到每个质心的距离，将像素点划分到距离最近的质心所对应的簇中；c.计算每个簇内所有像素点的灰度值均值，并使用该灰度值均值更新簇的质心；d.重复步骤b与步骤c的操作以进行迭代，直到达到最大迭代次数或所有质心位置不再变化。至此，利用自适应距离权重完成了对灰度图像上所有像素点的聚类，得到了最终的聚类结果。步骤五，根据背景像素点所属聚类簇的簇类中心点的灰度值对背景像素点进行均一化处理，通过对均一化处理的背景像素点进行较大程度的压缩而对前景像素点进行较小程度的压缩的方式，完成对灰度图像的压缩处理。在获得聚类结果后，也就确定了背景像素点所属的聚类簇，以背景像素点所属聚类簇的簇类中心点的灰度值，对所有背景像素点的灰度值进行均一化，也即将背景像素点所属聚类簇的簇类中心点的灰度值作为所有背景像素点的灰度值。然后，根据前景像素点以及均一化后的背景像素点，对灰度图像进行压缩，压缩过程中对前景像素点与背景像素点的压缩程度不同，本实施例优选采用游程压缩方法完成对灰度图像的压缩，游程图像为现有技术，举例如下：灰度图像中某行各个像素点的灰度值为：，其中灰度值10、11、12以及13所对应的是背景像素点，其它灰度值对应的是前景像素点，背景像素点所在聚类簇的簇类中心的灰度值为10，那么对该行中背景像素点进行均一化后，该行各个像素点的灰度值变为：。然后，对背景像素点均一化后的该行像素点进行游程压缩：，游程压缩增加了图像的压缩率，同时保存了图像上的有用信息。以上所述实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的范围，均应包含在本申请的保护范围之内。
