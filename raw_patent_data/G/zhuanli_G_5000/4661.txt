标题title
一种电力设备故障快速定位方法
摘要abst
本发明涉及图像处理技术领域，具体涉及一种电力设备故障快速定位方法。方法包括：对电力设备的红外热图像进行超像素分割获得多个超像素块，基于各超像素块内像素点的平均灰度值获得各种子超像素块；基于各种子超像素块的平均灰度值和与各种子超像素块相邻的各超像素块的平均灰度值得到红外热图像中的各区域；采用形态学中的开运算和闭运算对各区域进行处理，获取各区域中目标子区域的边缘像素点，进而获得各区域中的目标子区域，对各区域中的目标子区域是否出现故障进行判断，进而获取故障区域的位置。本发明提高了电力设备故障检测结果的可信度。
权利要求书clms
1.一种电力设备故障快速定位方法，其特征在于，该方法包括以下步骤：获取电力设备的红外热图像；对所述红外热图像进行超像素分割获得不少于两个的超像素块，基于各超像素块内像素点的平均灰度值获得各种子超像素块；基于各种子超像素块内像素点的平均灰度值和与各种子超像素块相邻的各超像素块内像素点的平均灰度值对超像素块进行合并，得到所述红外热图像中的各区域；对于任一区域：采用形态学中的开运算和闭运算对该区域进行处理，基于该区域中灰度值最大的像素点以及该区域的中心点，得到该区域中的目标子区域的中心点；过所述目标子区域的中心点作所述目标子区域的中心点对应的预设条线段；基于各线段上像素点的灰度值，得到各线段上的目标子区域的疑似边缘像素点；基于各疑似边缘像素点的预设邻域内像素点的灰度值、各疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值和各疑似边缘像素点与其所在的线段上的相邻像素点的灰度差值，得到各线段上的目标子区域的边缘像素点；基于所述边缘像素点的预设邻域内的像素点，获得该区域中的目标子区域的边缘像素点；基于所述目标子区域的边缘像素点获得该区域中的目标子区域；基于各区域中的目标子区域内所有像素点的平均灰度值和各区域中除目标子区域外的所有像素点的平均灰度值，判断各区域中的目标子区域是否出现故障；若出现故障，则获取对应目标子区域的位置。2.根据权利要求1所述的一种电力设备故障快速定位方法，其特征在于，所述基于各超像素块内像素点的平均灰度值获得各种子超像素块，包括：对于电力设备的红外热图像中的任一超像素块：获取与该超像素块相邻的各超像素块，判断与该超像素块相邻的所有超像素块内像素点的平均灰度值是否均小于该超像素块内像素点的平均灰度值，若均小于，则判定该超像素块为种子超像素块。3.根据权利要求1所述的一种电力设备故障快速定位方法，其特征在于，所述基于各种子超像素块内像素点的平均灰度值和与各种子超像素块相邻的各超像素块内像素点的平均灰度值对超像素块进行合并，得到所述红外热图像中的各区域，包括：对于任意一个种子超像素块：将该种子超像素块作为第1个类别的种子超像素块，分别判断该种子超像素块的各相邻像素块内像素点的平均灰度值是否大于等于该种子超像素块内像素点的平均灰度值，若大于等于，则将对应的相邻超像素块对应的合并概率记为1，若小于，则将对应的相邻超像素块对应的合并概率记为0；将合并概率为1的邻域超像素块与该种子超像素块进行合并，并将合并概率为1的邻域超像素块作为第2个类别的种子超像素块，将合并概率为1的邻域超像素块作为新种子超像素块，继续判断新种子超像素块的各邻域超像素块是否与其合并，获取新种子超像素块，并作为第3个类别的种子超像素块，以此类推，直到新种子超像素块的所有邻域超像素块对应的合并概率都为0为止，获得多个图像块；将同时属于两个或两个以上的图像块内的超像素块记为第一超像素块；对于任意一个第一超像素块：若该第一超像素块在各图像块内对应的类别序号不同，则将该第一超像素块划分到类别序号最小时对应的图像块内；若该第一超像素块在各图像块内对应的类别序号相同，则对于该第一超像素块所在的任意一个图像块，该第一超像素块在该图像块内为第x个类别的种子超像素块，根据该图像块内的超像素块完成第次合并后所有像素点的平均灰度值和该图像块内的超像素块完成第次合并后所有像素点的平均灰度值，获得该第一超像素块在该图像块内对应的灰度均值的差异；根据该第一超像素块在各图像块内对应的灰度均值的差异获得该第一超像素块对应的图像块；对所有第一超像素块进行划分获得所述红外热图像中的各区域。4.根据权利要求1所述的一种电力设备故障快速定位方法，其特征在于，所述基于该区域中灰度值最大的像素点以及该区域的中心点，得到该区域中的目标子区域的中心点，包括：获取该区域中灰度值最大的像素点，若该区域中灰度值最大的像素点的数量为1，则将灰度值最大的像素点作为该区域中的目标子区域的中心点；若该区域中灰度值最大的像素点的数量大于1，则将该区域中距离该区域的中心点最近的灰度值最大的像素点作为该区域中的目标子区域的中心点。5.根据权利要求1所述的一种电力设备故障快速定位方法，其特征在于，预设条线段中的每条线段上的其中一个端点为所述目标子区域的中心点，另一个端点为该区域的边缘像素点；每条线段过所述目标子区域的中心点的预设邻域内的一个像素点。6.根据权利要求1所述的一种电力设备故障快速定位方法，其特征在于，所述基于各线段上像素点的灰度值，得到各线段上的目标子区域的疑似边缘像素点，包括：对于所述目标子区域的中心点对应的任意一条线段：按照线段上像素点与目标子区域的中心点由近到远的顺序，计算该线段上相邻两像素点的灰度差值，基于所述灰度差值构建该线段对应的灰度差值集合，所述灰度差值为距离目标子区域的中心点较近的像素点的灰度值减去距离目标子区域的中心点较远的像素点的灰度值；基于所述灰度差值集合中大于所述灰度差值集合中的所有元素的均值的元素，构建该线段对应的第一集合；将该线段对应的第一集合中各元素对应的两个像素点中的前一个像素点作为目标子区域的疑似边缘像素点。7.根据权利要求6所述的一种电力设备故障快速定位方法，其特征在于，基于各疑似边缘像素点的预设邻域内像素点的灰度值、各疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值和各疑似边缘像素点与其所在的线段上的相邻像素点的灰度差值，得到各线段上的目标子区域的边缘像素点，包括：对于所述目标子区域的中心点对应的任意一条线段：对于该线段上的第j个疑似边缘像素点，计算该疑似边缘像素点的预设邻域内所有像素点的灰度值的方差，记为该疑似边缘像素点对应的灰度方差；采用如下公式计算该疑似边缘像素点对应的可能性指标：其中，为第j个疑似边缘像素点对应的可能性指标，为第j个疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值，为第j个疑似边缘像素点对应的灰度方差，为该线段对应的第一集合中的第j个元素，m为第j个疑似边缘像素点所在的线段上目标子区域的疑似边缘像素点的数量；将该线段上可能性指标最大的疑似边缘像素点作为目标子区域的边缘像素点。8.根据权利要求1所述的一种电力设备故障快速定位方法，其特征在于，所述基于所述边缘像素点的预设邻域内的像素点，获得该区域中的目标子区域的边缘像素点，包括：对于该区域中的目标子区域的任意一个边缘像素点：将该边缘像素点标记为起始点，以该边缘像素点为中心点，构建预设大小的窗口作为该边缘像素点对应的窗口；计算该边缘像素点对应的窗口内像素点的平均灰度值，记为第一平均灰度值；将该边缘像素点对应的窗口内灰度值大于所述第一平均灰度值的像素点作为目标像素点；对于任一目标像素点：以该目标像素点为中心点，构建预设大小的窗口作为该目标像素点对应的窗口，若该目标像素点对应的窗口内含有灰度值小于所述第一平均灰度值的像素点，则判定该目标像素点为目标子区域的边缘像素点，获得目标子区域新的边缘像素点，将新的边缘像素点标记为新起始点，以此类推，继续选取新的边缘像素点，直到窗口内被选取的边缘像素点都被标记时为止，得到目标子区域的边缘像素点。9.根据权利要求1所述的一种电力设备故障快速定位方法，其特征在于，所述基于各区域中的目标子区域内所有像素点的平均灰度值和各区域中除目标子区域外的所有像素点的平均灰度值，判断各区域中的目标子区域是否出现故障，包括：对于电力设备的红外热图像中的任一区域：将该区域内目标子区域的所有像素点的平均灰度值记为第一灰度均值；将该区域内除目标子区域外的所有像素点的平均灰度值记为第二灰度均值，计算所述第一灰度均值与所述第二灰度均值的差值，记为第一差值；判断所述第一差值是否大于判断阈值，若大于，则判定该区域中的目标子区域出现故障；若小于等于，则判定该区域中的目标子区域未出现故障。
说明书desc
技术领域本发明涉及图像处理技术领域，具体涉及一种电力设备故障快速定位方法。背景技术随着社会经济的快速发展，电力系统规模不断扩大，人们对电力系统的安全性要求逐渐增强。由于电力系统是由大量的电力基础设备组成，故这些设备的运行是否正常、状态是否稳定，决定着电力系统是否能够安全供电，因此需要对电力设备的运行状态进行监测，进而判断电力设备是否出现异常。传统的电力设备运行状态检测和故障监测方式需要设备停电，进行定时试验检测，耗时耗力，浪费能源。电力设备的故障大多是由电力设备器件接触不良、连接松动、漏磁、泄漏电流等原因造成，且这些故障往往会使电力设备长时间处于异常发热状态，因此可以通过红外热成像技术，在不断电的情况下，对电力设备运行状态进行监测，实时对设备进行诊断和故障分析。然而红外热图像存在着局部细节对比度低、信噪比低、边缘模糊以及图像整体的视觉效果较差等问题，传统的图像分割方法会造成电力设备红外热图像中高温区域的分割精度较低、分割速度慢的问题，进而使得电力设备故障检测结果的可信度降低。因此如何提高电力设备故障检测结果的可信度是一个需要解决的问题。发明内容为了解决上述技术问题，本发明的目的在于提供一种电力设备故障快速定位方法，所采用的技术方案具体如下：本发明提供了一种电力设备故障快速定位方法，该方法包括以下步骤：获取电力设备的红外热图像；对所述红外热图像进行超像素分割获得不少于两个的超像素块，基于各超像素块内像素点的平均灰度值获得各种子超像素块；基于各种子超像素块内像素点的平均灰度值和与各种子超像素块相邻的各超像素块内像素点的平均灰度值对超像素块进行合并，得到所述红外热图像中的各区域；对于任一区域：采用形态学中的开运算和闭运算对该区域进行处理，基于该区域中灰度值最大的像素点以及该区域的中心点，得到该区域中的目标子区域的中心点；过所述目标子区域的中心点作所述目标子区域的中心点对应的预设条线段；基于各线段上像素点的灰度值，得到各线段上的目标子区域的疑似边缘像素点；基于各疑似边缘像素点的预设邻域内像素点的灰度值、各疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值和各疑似边缘像素点与其所在的线段上的相邻像素点的灰度差值，得到各线段上的目标子区域的边缘像素点；基于所述边缘像素点的预设邻域内的像素点，获得该区域中的目标子区域的边缘像素点；基于所述目标子区域的边缘像素点获得该区域中的目标子区域；基于各区域中的目标子区域内所有像素点的平均灰度值和各区域中除目标子区域外的所有像素点的平均灰度值，判断各区域中的目标子区域是否出现故障；若出现故障，则获取对应目标子区域的位置。优选的，所述基于各超像素块内像素点的平均灰度值获得各种子超像素块，包括：对于电力设备的红外热图像中的任一超像素块：获取与该超像素块相邻的各超像素块，判断与该超像素块相邻的所有超像素块内像素点的平均灰度值是否均小于该超像素块内像素点的平均灰度值，若均小于，则判定该超像素块为种子超像素块。优选的，所述基于各种子超像素块内像素点的平均灰度值和与各种子超像素块相邻的各超像素块内像素点的平均灰度值对超像素块进行合并，得到所述红外热图像中的各区域，包括：对于任意一个种子超像素块：将该种子超像素块作为第1个类别的种子超像素块，分别判断该种子超像素块的各相邻像素块内像素点的平均灰度值是否大于等于该种子超像素块内像素点的平均灰度值，若大于等于，则将对应的相邻超像素块对应的合并概率记为1，若小于，则将对应的相邻超像素块对应的合并概率记为0；将合并概率为1的邻域超像素块与该种子超像素块进行合并，并将合并概率为1的邻域超像素块作为第2个类别的种子超像素块，将合并概率为1的邻域超像素块作为新种子超像素块，继续判断新种子超像素块的各邻域超像素块是否与其合并，获取新种子超像素块，并作为第3个类别的种子超像素块，以此类推，直到新种子超像素块的所有邻域超像素块对应的合并概率都为0为止，获得多个图像块；将同时属于两个或两个以上的图像块内的超像素块记为第一超像素块；对于任意一个第一超像素块：若该第一超像素块在各图像块内对应的类别序号不同，则将该第一超像素块划分到类别序号最小时对应的图像块内；若该第一超像素块在各图像块内对应的类别序号相同，则对于该第一超像素块所在的任意一个图像块，该第一超像素块在该图像块内为第x个类别的种子超像素块，根据该图像块内的超像素块完成第次合并后所有像素点的平均灰度值和该图像块内的超像素块完成第次合并后所有像素点的平均灰度值，获得该第一超像素块在该图像块内对应的灰度均值的差异；根据该第一超像素块在各图像块内对应的灰度均值的差异获得该第一超像素块对应的图像块；对所有第一超像素块进行划分获得所述红外热图像中的各区域。优选的，所述基于该区域中灰度值最大的像素点以及该区域的中心点，得到该区域中的目标子区域的中心点，包括：获取该区域中灰度值最大的像素点，若该区域中灰度值最大的像素点的数量为1，则将灰度值最大的像素点作为该区域中的目标子区域的中心点；若该区域中灰度值最大的像素点的数量大于1，则将该区域中距离该区域的中心点最近的灰度值最大的像素点作为该区域中的目标子区域的中心点。优选的，预设条线段中的每条线段上的其中一个端点为所述目标子区域的中心点，另一个端点为该区域的边缘像素点；每条线段过所述目标子区域的中心点的预设邻域内的一个像素点。优选的，所述基于各线段上像素点的灰度值，得到各线段上的目标子区域的疑似边缘像素点，包括：对于所述目标子区域的中心点对应的任意一条线段：按照线段上像素点与目标子区域的中心点由近到远的顺序，计算该线段上相邻两像素点的灰度差值，基于所述灰度差值构建该线段对应的灰度差值集合，所述灰度差值为距离目标子区域的中心点较近的像素点的灰度值减去距离目标子区域的中心点较远的像素点的灰度值；基于所述灰度差值集合中大于所述灰度差值集合中的所有元素的均值的元素，构建该线段对应的第一集合；将该线段对应的第一集合中各元素对应的两个像素点中的前一个像素点作为目标子区域的疑似边缘像素点。优选的，基于各疑似边缘像素点的预设邻域内像素点的灰度值、各疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值和各疑似边缘像素点与其所在的线段上的相邻像素点的灰度差值，得到各线段上的目标子区域的边缘像素点，包括：对于所述目标子区域的中心点对应的任意一条线段：对于该线段上的第j个疑似边缘像素点，计算该疑似边缘像素点的预设邻域内所有像素点的灰度值的方差，记为该疑似边缘像素点对应的灰度方差；采用如下公式计算该疑似边缘像素点对应的可能性指标：其中，为第j个疑似边缘像素点对应的可能性指标，为第j个疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值，为第j个疑似边缘像素点对应的灰度方差，为该线段对应的第一集合中的第j个元素，m为第j个疑似边缘像素点所在的线段上目标子区域的疑似边缘像素点的数量；将该线段上可能性指标最大的疑似边缘像素点作为目标子区域的边缘像素点。优选的，所述基于所述边缘像素点的预设邻域内的像素点，获得该区域中的目标子区域的边缘像素点，包括：对于该区域中的目标子区域的任意一个边缘像素点：将该边缘像素点标记为起始点，以该边缘像素点为中心点，构建预设大小的窗口作为该边缘像素点对应的窗口；计算该边缘像素点对应的窗口内像素点的平均灰度值，记为第一平均灰度值；将该边缘像素点对应的窗口内灰度值大于所述第一平均灰度值的像素点作为目标像素点；对于任一目标像素点：以该目标像素点为中心点，构建预设大小的窗口作为该目标像素点对应的窗口，若该目标像素点对应的窗口内含有灰度值小于所述第一平均灰度值的像素点，则判定该目标像素点为目标子区域的边缘像素点，获得目标子区域新的边缘像素点，将新的边缘像素点标记为新起始点，以此类推，继续选取新的边缘像素点，直到窗口内被选取的边缘像素点都被标记时为止，得到目标子区域的边缘像素点。优选的，所述基于各区域中的目标子区域内所有像素点的平均灰度值和各区域中除目标子区域外的所有像素点的平均灰度值，判断各区域中的目标子区域是否出现故障，包括：对于电力设备的红外热图像中的任一区域：将该区域内目标子区域的所有像素点的平均灰度值记为第一灰度均值；将该区域内除目标子区域外的所有像素点的平均灰度值记为第二灰度均值，计算所述第一灰度均值与所述第二灰度均值的差值，记为第一差值；判断所述第一差值是否大于判断阈值，若大于，则判定该区域中的目标子区域出现故障；若小于等于，则判定该区域中的目标子区域未出现故障。本发明至少具有如下有益效果：1、本发明考虑到电力设备的故障大多情况下是由于电力设备器件接触不良、连接松动、漏磁、泄漏电流等原因造成的，且这些故障往往会使电力设备长时间处于异常发热状态，因此需要分割电力设备红外图像中的高温区域，进而判断高温区域是否为故障区域，因此本发明首先获取了电力设备的红外热图像，考虑到红外热图像存在局部细节对比度低、信噪比低、边缘模糊以及图像整体的视觉效果较差等问题，采用传统的图像分割方法会造成电力设备的红外热图像中高温区域的分割精度较低、分割速度慢的问题，进而使得电力设备的故障检测结果的可信度降低，因此本发明首先对电力设备的红外热图像进行初步分割，然后对初步分割得到的各超像素块进行合并处理，即将电力设备的红外热图像划分成了多个区域，每个区域中含有一个目标子区域，目标子区域即为高温区域，提高了电力设备的红外热图像的划分精度；基于各区域中的目标子区域内所有像素点的平均灰度值和各区域中除目标子区域外的所有像素点的平均灰度值，判断各区域中的目标子区域是否出现故障，进而获得出现故障的目标子区域的位置，提高了电力设备故障检测结果的可信度。2、本发明在对电力设备的红外热图像进行划分时，首先采用传统的超像素分割算法对所述红外热图像进行超像素分割获得多个超像素块，然后以超像素块作为电力设备的红外热图像的划分基础，将电力设备的红外热图像划分成了多个区域，提高了图像的划分效率。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明提供的一种电力设备故障快速定位方法的流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种电力设备故障快速定位方法进行详细说明如下。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种电力设备故障快速定位方法的具体方案。一种电力设备故障快速定位方法实施例：本实施例提出了一种电力设备故障快速定位方法，如图1所示，本实施例的一种电力设备故障快速定位方法包括以下步骤：步骤S1，获取电力设备的红外热图像。本实施例采集电力设备的红外热图像，电力设备的故障大多情况下是由于电力设备器件接触不良、连接松动、漏磁、泄漏电流等原因造成的，且这些故障往往会使电力设备长时间处于异常发热状态，因此需要分割电力设备红外图像中的高温区域，进而判断高温区域是否为故障区域，若为故障区域，则快速准确的定位出故障区域，进而及时对电力设备进行处理，提高电力系统的安全性。具体的，首先通过无人机搭载红外热成像仪巡游拍摄采集电力设备的红外热图像，利用移动通信基站将采集的运行中的电力设备红外热图像数据实时的传输至计算机上，即获得了电力设备的红外热图像，用于后续对电力设备的运行故障的检测。步骤S2，对所述红外热图像进行超像素分割获得不少于两个的超像素块，基于各超像素块内像素点的平均灰度值获得各种子超像素块；基于各种子超像素块内像素点的平均灰度值和与各种子超像素块相邻的各超像素块内像素点的平均灰度值对超像素块进行合并，得到所述红外热图像中的各区域。考虑到红外热图像存在对比度低、信噪比低、边缘模糊等问题，若采用现有的图像分割方法对电力设备的红外热图像进行图像分割，会存在电力设备的红外热图像中高温区域的分割不准确、分割速度慢等问题，本实施例首先利用超像素分割算法对电力设备的红外热图像进行初步分块处理，然后选取种子超像素块，设定各超像素块之间的合并规则，完成图像的分块处理，即将电力设备的红外热图像划分为了多个区域，使每个区域内只含有一个高温区域，进而利用数学形态学算法对各区域进行局部对比度增强，再根据高温区域边缘像素点的特征，获取高温区域的边缘像素点，快速准确的分割出高温区域。具体的，首先使用SLIC超像素分割算法对电力设备的红外热图像进行超像素分割，将电力设备的红外热图像分割成一系列位置相邻且颜色、亮度、纹理等特征相似的像素点组成的超像素块，即获得了多个超像素块。由于这些超像素块大多保留了进一步进行图像分割的有效信息且一般不会破坏图像中物体的边界信息，因此可根据各超像素块的灰度信息对图像中的像素块进行合并处理。对电力设备的红外热图像进行灰度化处理，获得电力设备的红外热图像中各像素点的灰度值；根据各超像素块内每个像素点的灰度值，计算各超像素块内像素点的平均灰度值，一个超像素块对应一个平均灰度值；考虑到电力设备的红外热图像中温度越高的区域的亮度越大，即高温区域的像素点的灰度值较大，而热量的传导是有方向性的，即高温区域向低温区域传导。基于此，对于电力设备的红外热图像中的任一超像素块：获取与该超像素块相邻的各超像素块，判断与该超像素块相邻的所有超像素块内像素点的平均灰度值是否均小于该超像素块内像素点的平均灰度值，若均小于，则判定该超像素块为种子超像素块；采用上述方法，能够得到电力设备的红外热图像中的多个种子超像素块。本实施例以超像素块为电力设备的红外热图像的划分基础能够有效的减少图像的数据量，提高图像的划分速度，图像划分后可以防止各高温区域之间复杂边缘的干扰，并且超像素块能够为后续的图像局部对比度增强提供数据支持。接下来以各种子超像素块为起始点进行超像素块合并操作，完成对电力设备的红外热图像的划分，使得划分完成后每个区域内只含有一个高温区域。对于任意一个种子超像素块：将该种子超像素块作为第1个类别的种子超像素块，分别判断该种子超像素块的各相邻像素块内像素点的平均灰度值是否大于等于该种子超像素块内像素点的平均灰度值，若大于等于，则将对应的相邻超像素块对应的合并概率记为1，若小于，则将对应的相邻超像素块对应的合并概率记为0；采用上述方法，获得该种子超像素块的每个相邻超像素块对应的合并概率。本实施例将合并概率为1的邻域超像素块与该种子超像素块进行合并，并将此类邻域超像素块作为第2个类别的种子超像素块，令此类邻域超像素块为新种子超像素块；同理，判断新种子超像素块的各邻域超像素块是否与其合并，获取新种子超像素块，并作为第3个类别的种子超像素块，继续进行上述合并操作，直到新种子超像素块的所有邻域超像素块都不符合条件为至。同理完成其它种子超像素块的合并操作，获得多个图像块，由此实现对电子设备的红外热图像的初步分块处理。由于电力设备的红外热图像中各高温区域之间热传导交汇处的超像素块可能会属于两个或两个以上的图像块内，即在上述合并过程中部分超像素块可能同时被划分到了多个图像块内，因此需要对此类超像素块进一步分析，将该类像素块记为第一超像素块，对于任意一个第一超像素块：该第一超像素块在各图像块内都对应一个类别，由于热传导时距离高温区域越远，热传导的效果越差，类别序号越小，说明该第一超像素块在进行划分时越先与对应的种子超像素块划分到了同一个图像块内，即该第一超像素块与初始获得的种子超像素块的距离越近；当距离相似时，相邻超像素块内的像素点的灰度差异越小，说明对应两个超像素块属于同一区域的可能性越大；因此若该第一超像素块在各图像块内对应的类别序号不同，例如该第一超像素块在第1个图像块内为第2个类别的种子超像素块，该第一超像素块在第2个图像块内为第3个类别的种子超像素块，则将该第一超像素块划分到类别序号最小时对应的图像块内；若该第一超像素块在各图像块内对应的类别序号相同，例如该第一超像素块在第1个图像块内和在第2个图像块内均为第2个类别的种子超像素块，则对于该第一超像素块所在的任一图像块，计算的值，记为该第一超像素块在该图像块内对应的灰度均值的差异，其中，为该第一超像素块在该图像块内对应的类别序号，为该图像块内的超像素块完成第次合并后所有像素点的平均灰度值，也即该第一超像素块在合并到该图像块内之前该图像块内所有已完成合并的超像素块中的像素点的平均灰度值，为该图像块内的超像素块完成第次合并后所有像素点的平均灰度值，也即该第一超像素块在合并到该图像块内时该图像块内所有已完成合并的超像素块中的像素点的平均灰度值；同理，获得该第一超像素块在各图像块内对应的灰度均值的差异，将该第一超像素块划分到的值最小时对应的图像块内。采用上述方法，能够对所有超像素块进行划分，每个超像素块仅位于一个连通域内，将最终划分完成后得到的每个连通域记为一个区域，即将电子设备的红外热图像划分为了多个区域，每个区域内只含有一个高温区域。步骤S3，对于任一区域：采用形态学中的开运算和闭运算对该区域进行处理，基于该区域中灰度值最大的像素点以及该区域的中心点，得到该区域中的目标子区域的中心点；过所述目标子区域的中心点作所述目标子区域的中心点对应的预设条线段；基于各线段上像素点的灰度值，得到各线段上的目标子区域的疑似边缘像素点；基于各疑似边缘像素点的预设邻域内像素点的灰度值、各疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值和各疑似边缘像素点与其所在的线段上的相邻像素点的灰度差值，得到各线段上的目标子区域的边缘像素点；基于所述边缘像素点的预设邻域内的像素点，获得该区域中的目标子区域的边缘像素点；基于所述目标子区域的边缘像素点获得该区域中的目标子区域。本实施例在步骤S2中将电力设备的红外热图像划分为了多个区域，且每个区域中只含有一个高温区域，接下来将对每个区域进行单独分析，分割出每个区域内的高温区域。红外热图像对比度低，分辨细节能力差，高温区域的边缘较为复杂、模糊，因此为了提高图像分割的准确性，需要对各区域进行局部对比度增强，提高高温区域边缘像素点的灰度梯度。对于电力设备的红外热图像中的任一区域：本实施例将采用形态学开运算和闭运算对该区域的进行处理，由于形态学开运算、闭运算中的膨胀和腐蚀操作分别为取结构元素内像素点的最大灰度值和像素点的最小灰度值替换结构元素中心像素点的灰度值，当结构元素尺寸过小时，结构元素内的像素灰度值差异较小，图像对比度增强效果较差；当结构元素尺寸过大时，会平滑掉高温区域，该区域的种子超像素块是高温区域中的一部分，因此获取该区域的种子超像素块的最大内接圆的半径值的向下取整值，以为半径构建圆形结构元素，然后以此结构元素对该区域进行形态学开运算，然后再进行闭运算，有效的提高该区域的对比度；需要说明的是，本实施例后续提到的灰度值均为形态学开运算和闭运算处理之后的灰度值；此时该区域内高温区域和非高温区域的像素点的灰度差异明显，因此获取该区域中灰度值最大的像素点，若该区域中灰度值最大的像素点的数量为1个，则将灰度值最大的像素点作为该区域中的目标子区域的中心点；若该区域中灰度值最大的像素点的数量大于1，则将该区域中距离该区域的中心点最近的灰度值最大的像素点作为该区域中的目标子区域的中心点；所述目标子区域为对应区域中的高温区域。以目标子区域的中心点为起始点，以该区域的边缘像素点为终止点，作目标子区域的中心点的预设邻域方向上线段，每条线段的其中一个端点为目标子区域的中心点，另一个端点为该区域的边缘像素点；每条线段过目标子区域的中心点的预设邻域内的一个像素点。本实施例的预设邻域为八邻域，即获得了该区域中的目标子区域的中心点对应的八条线段，这八条线段上各含有一个像素点为高温区域的边缘像素点，且高温区域的边缘像素点沿线段所在方向的灰度梯度较大，由于热传导时，传导距离越远，热量传导的有效性越差，且电力设备内部高温区域器件形状复杂多变，因此可能导致线段上沿线段所在方向存在多个较大的灰度梯度。基于此，对于该区域中的目标子区域的中心点对应的任意一条线段：该条线段上共有n个像素点，将目标子区域的中心点作为该线段上的第1个像素点，将该线段上与第1个像素点相邻的像素点作为该线段上的第2个像素点，以此类推，将该区域的边缘像素点作为该线段上的第n个像素点，按照线段上像素点与目标子区域的中心点由近到远的顺序，计算该线段上相邻两像素点的灰度差值，所述灰度差值为距离目标子区域的中心点较近的像素点的灰度值减去距离目标子区域的中心点较远的像素点的灰度值，获得该线段对应的灰度差值集合，其中，n为该线段上像素点的数量，为该线段上第1个像素点与第2个像素点的灰度差值，为该线段上第2个像素点与第3个像素点的灰度差值，为该线段上第n-1个像素点与第n个像素点的灰度差值；计算该线段对应的灰度差值集合中的所有元素的均值，获取该线段对应的灰度差值集合中大于的元素，并基于这些元素构建该线段对应的第一集合，其中，m为该线段对应的灰度差值集合中大于的元素的数量，为该线段对应的灰度差值集合中第1个大于的元素，为该线段对应的灰度差值集合中第2个大于的元素，为该线段对应的灰度差值集合中第m个大于的元素；将该线段对应的第一集合中各元素对应的两个像素点中的前一个像素点作为目标子区域的疑似边缘像素点，也即获得了该线段上目标子区域的m个疑似边缘像素点，其中，目标子区域为高温区域；对于该线段上目标子区域的任意一个疑似边缘像素点：根据该疑似边缘像素点的预设邻域内像素点的灰度值，计算该疑似边缘像素点的预设邻域内所有像素点的灰度值的方差，并将该方差记为该疑似边缘像素点对应的灰度方差；本实施例的预设邻域为8邻域，在具体应用中，实施者可根据具体情况进行设置；基于该线段上目标子区域的各疑似边缘像素点对应的灰度方差构建该线段对应的灰度方差集合，其中，为该线段上的第1个疑似边缘像素点对应的灰度方差，为该线段上的第2个疑似边缘像素点对应的灰度方差，为该线段上的第m个疑似边缘像素点对应的灰度方差。获取该区域内所有超像素块的边缘像素点，这些边缘像素点中会存在高温区域边缘像素点，但由于超像素分割时未经过对比度增强，图像边缘较模糊，因此一些边缘像素点的选取存在误差，但其与真正的边缘像素点距离较近；基于此，对于该线段上目标子区域的任意一个疑似边缘像素点：获取该疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值；采用上述方法，能够得到各疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值。该区域经过对比度增强后，高温像素点和非高温像素点的灰度差异变大。因此目标子区域的疑似边缘像素点的灰度值下降梯度越大，说明对应疑似边缘像素点为目标子区域的真正边缘像素点的概率越大；当疑似边缘像素点为真正的边缘像素点时，边缘像素点的预设邻域内会同时存在高温像素点和非高温像素点，两类像素点的数量差异不会太大，故预设邻域内像素点的灰度方差较大。基于此，对于该线段上的第j个疑似边缘像素点，其对应的可能性指标为：其中，为第j个疑似边缘像素点对应的可能性指标，为第j个疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值，为第j个疑似边缘像素点对应的灰度方差，为该线段对应的第一集合中的第j个元素，m为第j个疑似边缘像素点所在的线段上目标子区域的疑似边缘像素点的数量；表征第j个疑似边缘像素点对应的距离权值，第j个疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值越小，则第j个疑似边缘像素点对应的权值越大，第j个疑似边缘像素点目标子区域的边缘像素点的概率越大；当第j个疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值越小、第j个疑似边缘像素点的预设邻域内像素点的灰度方差越大、第j个疑似边缘像素点与其所在的线段上相邻像素点的灰度差异越大时，说明第j个疑似边缘像素点越可能为高温区域的边缘像素点，即第j个疑似边缘像素点对应的可能性指标越大；当第j个疑似边缘像素点与其所在的区域内所有超像素块的边缘像素点的距离的最小值越大、第j个疑似边缘像素点的预设邻域内像素点的灰度方差越小、第j个疑似边缘像素点与其所在的线段上相邻像素点的灰度差异越小时，说明第j个疑似边缘像素点越不可能为高温区域的边缘像素点，即第j个疑似边缘像素点对应的可能性指标越小。采用上述方法，能够得到该线段上的各疑似边缘像素点对应的可能性指标，可能性指标越大，说明对应像素点为目标子区域的边缘像素点的概率越大；将该线段上可能性指标最大的疑似边缘像素点作为目标子区域的边缘像素点。基于上述方法，能够获得每条线段上的一个目标子区域的边缘像素点，即共获得了目标子区域的八个边缘像素点。高温区域应为一个完整的连通域，因此以边缘点为中心像素点的预设邻域内一定含有高温像素点和非高温像素点，且两类像素点的数量差异不会太大。分别以这八个边缘像素点为中心像素点，构建的窗口，即获得了各边缘像素点对应的窗口，则窗口内的非中心像素点中一定含有目标子区域的边缘像素点。本实施例选取八个方向上的八个边缘像素点，能够有效的防止高温区域某一方向上存在较大的干扰，导致边缘像素点的选取不准确的问题出现，影响提高后续的识别精度。对于该区域中的目标子区域的任意一个边缘像素点：以该边缘像素点为目标子区域的边缘像素点的起始点，计算该边缘像素点对应的窗口内的像素点的平均灰度值C，将该边缘像素点对应的窗口内灰度值大于C的像素点作为目标像素点；对于任一目标像素点：以该目标像素点为中心点，构建的窗口，并作为该目标像素点对应的窗口，判断该目标像素点对应的窗口内是否含有灰度值小于C的像素点，若含有，则判定该目标像素点为目标子区域的边缘像素点；若不含有，则判定该目标像素点为目标子区域的非边缘像素点；由此获得了目标子区域新的边缘像素点，将新的边缘像素点标记为新起始点，重复上述过程，继续选取新的边缘像素点，对于窗口内已经被标记为起始点的边缘像素点不再进行分析，直到窗口内被选取的边缘像素点都为标记的起始点时为止。同理，采用上述方法，分别以其它七个目标子区域的边缘像素点为起始点完成目标子区域的边缘像素点的选取，基于目标子区域的所有边缘像素点获得该区域内的目标子区域。本实施例只需要对高温区域边缘部分的像素点进行分析便能够获得目标子区域的边缘像素点，极大的提高了目标子区域的分割效率。采用本实施例提供的方法，获得各区域内的目标子区域，需要说明的是，一个区域有且只有一个目标子区域，目标子区域即为其所在区域内的高温区域。步骤S4，基于各区域中的目标子区域内所有像素点的平均灰度值和各区域中除目标子区域外的所有像素点的平均灰度值，判断各区域中的目标子区域是否出现故障；若出现故障，则获取对应目标子区域的位置。在步骤S3中获得了电力设备的红外热图像中各区域中的目标子区域，目标子区域即为其所在区域内的高温区域，因此接下来将对目标子区域进行分析。获取K张电力设备的样本红外热图像，这些样本红外热图像均为电力设备出现故障时的红外热图像；本实施例中K的取值为100，在具体应用中，实施者可根据具体情况进行设置；采用本实施例提供的方法对这K张电力设备的样本红外热图像进行处理获得每张样本红外热图像中的各区域内的目标子区域，人工标记出含有故障的区域，计算每个含有故障的区域内目标子区域和非目标子区域的像素点的平均灰度值之差，取这组数据的均值D；再计算每个无故障的区域内的目标子区域和非目标子区域的像素点的平均灰度值之差，取这组数据的均值E；将作为判断阈值。作为其他实施方式，也可以人为设置判断阈值。对于电力设备的红外热图像中的任一区域：计算该区域内目标子区域的所有像素点的平均灰度值，记为第一灰度均值；同时计算该区域内除目标子区域之外的所有像素点的平均灰度值，记为第二灰度均值；判断第一灰度均值减去第二灰度均值得到的差值是否大于判断阈值，若大于，则判定该区域中的目标子区域为故障区域，记录此目标子区域在电力设备红外热图像中的位置，完成设备故障的快速定位；若小于等于，则判定该区域中的目标子区域为正常区域。采用上述方法，对电力设备的红外热图像中的各区域的目标子区域进行判断，获得故障区域的准确位置，实现了对电力设备故障的快速定位，能够及时对出现故障的电力设备进行处理，提高了电力系统的安全性。本实施例考虑到电力设备的故障大多情况下是由于电力设备器件接触不良、连接松动、漏磁、泄漏电流等原因造成的，且这些故障往往会使电力设备长时间处于异常发热状态，因此需要分割电力设备红外图像中的高温区域，进而判断高温区域是否为故障区域，因此本实施例首先获取了电力设备的红外热图像，考虑到红外热图像存在局部细节对比度低、信噪比低、边缘模糊以及图像整体的视觉效果较差等问题，采用传统的图像分割方法会造成电力设备的红外热图像中高温区域的分割精度较低、分割速度慢的问题，进而使得电力设备的故障检测结果的可信度降低，因此本实施例首先对电力设备的红外热图像进行初步分割，然后对初步分割得到的各超像素块进行合并处理，即将电力设备的红外热图像划分成了多个区域，每个区域中含有一个目标子区域，目标子区域即为高温区域，提高了电力设备的红外热图像的划分精度；基于各区域中的目标子区域内所有像素点的平均灰度值和各区域中除目标子区域外的所有像素点的平均灰度值，判断各区域中的目标子区域是否出现故障，进而获得出现故障的目标子区域的位置，提高了电力设备故障检测结果的可信度。本实施例在对电力设备的红外热图像进行划分时，首先采用传统的超像素分割算法对所述红外热图像进行超像素分割获得多个超像素块，然后以超像素块作为电力设备的红外热图像的划分基础，将电力设备的红外热图像划分成了多个区域，提高了图像的划分效率。需要说明的是：以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
