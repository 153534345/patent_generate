标题title
基于MES系统的物料数据管理方法及系统
摘要abst
本发明涉及数据处理技术领域，具体涉及基于MES系统的物料数据管理方法及系统。该方法首先获取物料数据，对物料数据聚类得到聚簇；计算聚簇的第一重要程度和第二重要程度；根据第一重要程度和第二重要程度得到最终重要程度；根据物料数据的获取时间、物料数据构建数量矩阵；平移数量矩阵得到平移加密矩阵；根据聚簇的最终重要程度获取加密时的所需聚簇，对聚簇和对应的所需聚簇进行编码得到编码序列和对应的作为编码矩阵；对编码矩阵上矩阵元素进行置换，得到加密窗口和密文数据链；根据平移加密矩阵和密文数据链对物料数据进行管理。本发明根据数据所表现的重要程度进行加密处理，在保证重要信息隐藏的同时减少加密运算量。
权利要求书clms
1.基于MES系统的物料数据管理方法，其特征在于，该方法包括以下步骤：获取物料数据，所述物料数据包括：物料名称和对应的物料数量；根据物料数据的获取时间对物料数据进行聚类，得到至少两个聚簇；根据聚簇内物料数据的数量、聚簇内各物料数据对应的物料数量的差异和聚簇内各物料数据的获取时间的差异得到聚簇的第一重要程度；根据聚簇与对应的临近聚簇内的物料数据的数量的差异、第一重要程度的差异和聚簇与对应的临近聚簇的相关系数得到聚簇的第二重要程度；根据所述第一重要程度和所述第二重要程度得到最终重要程度；对于任意聚簇，根据物料数据的获取时间、对应的物料名称和物料数量构建二维矩阵，作为数量矩阵；对数量矩阵进行平移，得到平移加密矩阵；对于任意聚簇，根据聚簇的最终重要程度获取加密时的所需聚簇，对聚簇和对应的所需聚簇进行编码得到编码序列，并将所述编码序列转换为二维矩阵，作为编码矩阵；对编码矩阵上滑动窗口内的矩阵元素进行置换，得到加密窗口和密文数据链；根据物料数据对应的所述平移加密矩阵和所述密文数据链对物料数据进行管理。2.根据权利要求1所述的基于MES系统的物料数据管理方法，其特征在于，所述第一重要程度的计算公式为：其中，为第i个聚簇的第一重要程度；为第i个聚簇内物料数据的数量；为所有聚簇内物料数据的最大数量；为第i个聚簇内第j个物料数据的获取时间；为第i个聚簇内第j-1个物料数据的获取时间；为第i个聚簇内第j个物料数据对应的物料数量；为第i个聚簇内第j-1个物料数据对应的物料数量。3.根据权利要求1所述的基于MES系统的物料数据管理方法，其特征在于，所述第二重要程度的计算公式为：其中，为第i个聚簇的第二重要程度；为第i个聚簇的第一重要程度；为聚簇对应的临近聚簇的数量；为第i个聚簇对应的第v个临近聚簇的第一重要程度；为第i个聚簇内物料数据的数量；为第i个聚簇对应的第v个临近聚簇内物料数据的数量；为自然常数；为第i个聚簇和第i个聚簇对应的第v个临近聚簇的相关系数。4.根据权利要求1所述的基于MES系统的物料数据管理方法，其特征在于，聚簇对应的临近聚簇为：按照获取时间将聚簇进行排序，得到聚簇序列；基于所述聚簇序列，选取任意聚簇作为目标聚簇，所述目标聚簇的后预设数量个聚簇作为目标聚簇的临近聚簇。5.根据权利要求1所述的基于MES系统的物料数据管理方法，其特征在于，所述相关系数的计算公式为：其中，为第i个聚簇和第i个聚簇对应的第v个临近聚簇的相关系数；为第i个聚簇和第i个聚簇对应的第v个临近聚簇之间相匹配的物料数据的数量；为第i个聚簇内第j个相匹配的物料数据的物料数量；为第i个聚簇内相匹配的物料数据的物料数量的均值；为第i个聚簇对应的第v个临近聚簇内第j个相匹配的物料数据的物料数量；为第i个聚簇对应的第v个临近聚簇内相匹配的物料数据的物料数量的均值；为第i个聚簇内相匹配的物料数据的物料数量的标准差；为第i个聚簇对应的第v个临近聚簇内相匹配的物料数据的物料数量的标准差。6.根据权利要求5所述的基于MES系统的物料数据管理方法，其特征在于，所述第i个聚簇和第i个聚簇对应的第v个临近聚簇之间相匹配的物料数据的获取方法为：对于第i个聚簇和第i个聚簇对应的第v个临近聚簇，选取两个聚簇中物料数据较多的聚簇作为固定聚簇，另一物料数据较少的聚簇作为滑动聚簇；按照获取时间的先后顺序，对固定聚簇内的物料数据进行排列，得到固定聚簇序列；按照获取时间的先后顺序，对滑动聚簇内的物料数据进行排列，得到滑动聚簇序列；将固定聚簇序列和滑动聚簇序列的第一个物料数据进行对齐，计算相对应物料数据之间的物料数量的差值的均值，再以预设步长滑动所述滑动聚簇序列，计算相对应物料数据之间的物料数量的差值的均值，重复按照预设步长滑动所述滑动聚簇序列，直至滑动聚簇序列和固定聚簇序列的最后一个物料数据对齐，计算相对应物料数据之间的物料数量的差值的均值；当物料数量的差值的均值取最小值时，滑动聚簇序列和固定聚簇序列之间相对应的物料数据，作为相匹配的物料数据。7.根据权利要求1所述的基于MES系统的物料数据管理方法，其特征在于，所述对数量矩阵进行平移，得到平移加密矩阵，包括：对数量矩阵中的每行数据按照行顺序平移得到行平移矩阵，对行平移矩阵中的每列数据按照列顺序平移，得到平移加密矩阵。8.根据权利要求1所述的基于MES系统的物料数据管理方法，其特征在于，所述根据聚簇的最终重要程度获取加密时的所需聚簇，包括：计算聚簇的最终重要程度和所有聚簇中对应的最小的最终重要程度的差值，作为调节差值；所述调节差值乘上预设调节权重得到初始调节聚簇数量，对初始调节聚簇数量进行向下取整操作，得到调节聚簇数量；所述调节聚簇数量加上预设聚簇数量，得到加密时的所需聚簇数量；按照获取时间将聚簇进行排序，得到聚簇序列；对于任意聚簇，获取聚簇在聚簇序列中后面的所述所需聚簇数量个聚簇作为初始所需聚簇；当对应的初始所需聚簇的所需聚簇数量的最大值小于等于聚簇的所需聚簇数量时，将聚簇对应的初始所需聚簇作为所需聚簇；当对应的初始所需聚簇的所需聚簇数量的最大值大于聚簇的所需聚簇数量时，继续向后选取预设聚簇数量个聚簇更新为初始所需聚簇，当对应的初始所需聚簇的所需聚簇数量的最大值小于等于聚簇的所需聚簇数量时，将聚簇对应的初始所需聚簇作为所需聚簇，当对应的初始所需聚簇的所需聚簇数量的最大值大于聚簇的所需聚簇数量时，继续向后选取预设聚簇数量个聚簇更新为初始所需聚簇，直至对应的初始所需聚簇的所需聚簇数量的最大值小于等于聚簇的所需聚簇数量时，得到聚簇对应的所需聚簇。9.根据权利要求1所述的基于MES系统的物料数据管理方法，其特征在于，所述对编码矩阵上滑动窗口内的矩阵元素进行置换，包括：当滑动窗口内的中心矩阵元素为0时，将中心矩阵元素置换为1；当滑动窗口内的中心矩阵元素为1时，将中心矩阵元素置换为0。10.基于MES系统的物料数据管理系统，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1~9任意一项所述方法的步骤。
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及基于MES系统的物料数据管理方法及系统。背景技术制造执行系统，主要负责车间生产管理和调度，用于跟踪和记录从原材料到成品的生产转换。整个MES系统在进行实际体验的过程当中，涵盖了所有的数据管理或者是计划的管理，还有库存管理，质量管理以及人力资源的管理。在工装管理或者是采购管理这一方面，将能带来更好的全过程控制。其中物料流转涉及整个制造生产过程，其数据包括现场数据所反映的生产进度以及控制系统物料投放等控制，并设计原料价格等企业竞争数据，所以在物料数据管理中需要对数据进行加密。对于物料数据是贯穿整个制造生产过程而产生的，数据量较大，常规的加密运算直接针对所有数据在系统中的位置信息进行不同等级的加密，该方法未考虑数据的重要等级及所需加密的价值，不同的物料数据所表现的重要程度不同，所以其加密价值不同，仅根据数据的位置信息对数据进行不同等级的加密，存在对较重要的数据加密隐藏不够的问题。发明内容为了解决对较重要的数据加密隐藏不够的技术问题，本发明的目的在于提供基于MES系统的物料数据管理方法及系统，所采用的技术方案具体如下：第一方面，本发明一个实施例提供了基于MES系统的物料数据管理方法，该方法包括以下步骤：获取物料数据，所述物料数据包括：物料名称和对应的物料数量；根据物料数据的获取时间对物料数据进行聚类，得到至少两个聚簇；根据聚簇内物料数据的数量、聚簇内各物料数据对应的物料数量的差异和聚簇内各物料数据的获取时间的差异得到聚簇的第一重要程度；根据聚簇与对应的临近聚簇内的物料数据的数量的差异、第一重要程度的差异和聚簇与对应的临近聚簇的相关系数得到聚簇的第二重要程度；根据所述第一重要程度和所述第二重要程度得到最终重要程度；对于任意聚簇，根据物料数据的获取时间、对应的物料名称和物料数量构建二维矩阵，作为数量矩阵；对数量矩阵进行平移，得到平移加密矩阵；对于任意聚簇，根据聚簇的最终重要程度获取加密时的所需聚簇，对聚簇和对应的所需聚簇进行编码得到编码序列，并将所述编码序列转换为二维矩阵，作为编码矩阵；对编码矩阵上滑动窗口内的矩阵元素进行置换，得到加密窗口和密文数据链；根据物料数据对应的所述平移加密矩阵和所述密文数据链对物料数据进行管理。优选的，所述第一重要程度的计算公式为：其中，为第i个聚簇的第一重要程度；为第i个聚簇内物料数据的数量；为所有聚簇内物料数据的最大数量；为第i个聚簇内第j个物料数据的获取时间；为第i个聚簇内第j-1个物料数据的获取时间；为第i个聚簇内第j个物料数据对应的物料数量；为第i个聚簇内第j-1个物料数据对应的物料数量。优选的，所述第二重要程度的计算公式为：其中，为第i个聚簇的第二重要程度；为第i个聚簇的第一重要程度；为聚簇对应的临近聚簇的数量；为第i个聚簇对应的第v个临近聚簇的第一重要程度；为第i个聚簇内物料数据的数量；为第i个聚簇对应的第v个临近聚簇内物料数据的数量；为自然常数；为第i个聚簇和第i个聚簇对应的第v个临近聚簇的相关系数。优选的，聚簇对应的临近聚簇为：按照获取时间将聚簇进行排序，得到聚簇序列；基于所述聚簇序列，选取任意聚簇作为目标聚簇，所述目标聚簇的后预设数量个聚簇作为目标聚簇的临近聚簇。优选的，所述相关系数的计算公式为：其中，为第i个聚簇和第i个聚簇对应的第v个临近聚簇的相关系数；为第i个聚簇和第i个聚簇对应的第v个临近聚簇之间相匹配的物料数据的数量；为第i个聚簇内第j个相匹配的物料数据的物料数量；为第i个聚簇内相匹配的物料数据的物料数量的均值；为第i个聚簇对应的第v个临近聚簇内第j个相匹配的物料数据的物料数量；为第i个聚簇对应的第v个临近聚簇内相匹配的物料数据的物料数量的均值；为第i个聚簇内相匹配的物料数据的物料数量的标准差；为第i个聚簇对应的第v个临近聚簇内相匹配的物料数据的物料数量的标准差。优选的，所述第i个聚簇和第i个聚簇对应的第v个临近聚簇之间相匹配的物料数据的获取方法为：对于第i个聚簇和第i个聚簇对应的第v个临近聚簇，选取两个聚簇中物料数据较多的聚簇作为固定聚簇，另一物料数据较少的聚簇作为滑动聚簇；按照获取时间的先后顺序，对固定聚簇内的物料数据进行排列，得到固定聚簇序列；按照获取时间的先后顺序，对滑动聚簇内的物料数据进行排列，得到滑动聚簇序列；将固定聚簇序列和滑动聚簇序列的第一个物料数据进行对齐，计算相对应物料数据之间的物料数量的差值的均值，再以预设步长滑动所述滑动聚簇序列，计算相对应物料数据之间的物料数量的差值的均值，重复按照预设步长滑动所述滑动聚簇序列，直至滑动聚簇序列和固定聚簇序列的最后一个物料数据对齐，计算相对应物料数据之间的物料数量的差值的均值；当物料数量的差值的均值取最小值时，滑动聚簇序列和固定聚簇序列之间相对应的物料数据，作为相匹配的物料数据。优选的，所述对数量矩阵进行平移，得到平移加密矩阵，包括：对数量矩阵中的每行数据按照行顺序平移得到行平移矩阵，对行平移矩阵中的每列数据按照列顺序平移，得到平移加密矩阵。优选的，所述根据聚簇的最终重要程度获取加密时的所需聚簇，包括：计算聚簇的最终重要程度和所有聚簇中对应的最小的最终重要程度的差值，作为调节差值；所述调节差值乘上预设调节权重得到初始调节聚簇数量，对初始调节聚簇数量进行向下取整操作，得到调节聚簇数量；所述调节聚簇数量加上预设聚簇数量，得到加密时的所需聚簇数量；按照获取时间将聚簇进行排序，得到聚簇序列；对于任意聚簇，获取聚簇在聚簇序列中后面的所述所需聚簇数量个聚簇作为初始所需聚簇；当对应的初始所需聚簇的所需聚簇数量的最大值小于等于聚簇的所需聚簇数量时，将聚簇对应的初始所需聚簇作为所需聚簇；当对应的初始所需聚簇的所需聚簇数量的最大值大于聚簇的所需聚簇数量时，继续向后选取预设聚簇数量个聚簇更新为初始所需聚簇，当对应的初始所需聚簇的所需聚簇数量的最大值小于等于聚簇的所需聚簇数量时，将聚簇对应的初始所需聚簇作为所需聚簇，当对应的初始所需聚簇的所需聚簇数量的最大值大于聚簇的所需聚簇数量时，继续向后选取预设聚簇数量个聚簇更新为初始所需聚簇，直至对应的初始所需聚簇的所需聚簇数量的最大值小于等于聚簇的所需聚簇数量时，得到聚簇对应的所需聚簇。优选的，所述对编码矩阵上滑动窗口内的矩阵元素进行置换，包括：当滑动窗口内的中心矩阵元素为0时，将中心矩阵元素置换为1；当滑动窗口内的中心矩阵元素为1时，将中心矩阵元素置换为0。第二方面，本发明一个实施例提供了基于MES系统的物料数据管理系统，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述基于MES系统的物料数据管理方法。本发明实施例至少具有如下有益效果：本发明获取物料数据后，根据物料数据的获取时间对物料数据进行聚类，得到至少两个聚簇，物料数据之间的时间关系反映着物料数据之间的联系，为了分析物料数据之间的关系得到后续聚簇内物料数据的最终重要程度，故先对物料数据按照获取时间进行了聚类；根据聚簇内物料数据的数量、聚簇内各物料数据对应的物料数量的差异和聚簇内各物料数据的获取时间的差异得到聚簇的第一重要程度，第一重要程度的获取是基于对聚簇本身的聚簇特征进行分析，第一重要特征能够反映出聚簇本身的受聚簇大小，聚簇数据之间的差异以及聚簇数据对应时间序列上的差异的影响；根据聚簇与对应的临近聚簇内的物料数据的数量的差异、第一重要程度的差异和聚簇与对应的临近聚簇的相关系数得到聚簇的第二重要程度，第二重要程度是结合聚簇之间的相关系数和聚簇之间的对应关系的特征，对聚簇的重要程度进行分析，从相邻聚簇之间的相关系数入手，反应聚簇在整体数据中的相关性。以聚簇数据之间的相关联程度为基础，考虑到聚簇大小差异以及聚簇本身的重要性的影响，有效避免了单个不重要聚簇或者单个过小的聚簇对其他聚簇相关性分析的影响；根据物料数据的获取时间、对应的物料名称和物料数量构建二维矩阵，作为数量矩阵；对数量矩阵进行平移，得到平移加密矩阵，通过改变物料数据本身和获取时间以及物料名称的对应关系，实现对物料数据的首次加密。最后结合聚簇的最终重要程度对聚簇内的物料数据进行编码置换，实现对物料数据的再次加密，得到对应的加密窗口和密文数据链；最后根据物料数据对应所述平移加密矩阵和所述密文数据链对物料数据进行管理。本发明根据数据所表现的重要程度进行加密处理，在保证重要信息隐藏的同时减少加密运算量。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例所提供的基于MES系统的物料数据管理方法的方法流程图；图2为本发明一个实施例所提供的对窗口中间位的编码进行置换前的示意图；图3为本发明一个实施例所提供的对窗口中间位的编码进行置换后的示意图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的基于MES系统的物料数据管理方法及系统，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。本发明实施例提供了基于MES系统的物料数据管理方法及系统的具体实施方法，该方法适用于MES系统下对物料数据的管理场景。为了解决仅根据数据的位置信息对数据进行不同等级的加密，存在对较重要的数据加密隐藏不够的问题。本发明通过获取物料数据，对物料数据聚类得到聚簇；计算聚簇的第一重要程度和第二重要程度；根据第一重要程度和第二重要程度得到最终重要程度；根据物料数据的获取时间、物料数据构建数量矩阵；平移数量矩阵得到平移加密矩阵；根据聚簇的最终重要程度获取加密时的所需聚簇，对聚簇和对应的所需聚簇进行编码得到编码序列和对应的作为编码矩阵；对编码矩阵上矩阵元素进行置换，得到加密窗口和密文数据链；根据平移加密矩阵和密文数据链对物料数据进行管理。根据数据所表现的重要程度进行不同等级的加密处理，在保证重要信息隐藏的同时减少加密运算量。下面结合附图具体的说明本发明所提供的基于MES系统的物料数据管理方法及系统的具体方案。请参阅图1，其示出了本发明一个实施例提供的基于MES系统的物料数据管理方法的步骤流程图，该方法包括以下步骤：步骤S100，获取物料数据，所述物料数据包括：物料名称和对应的物料数量。在MES系统中物料管理贯穿整个制造生产过程，具体涉及物料与人力、机器以及资金等资源关系结合，为物料保障、物料配比投放提供依据，避免物料过度浪费，减低产品成本，从而达成企业总体目标。在物料管理所涉及的每一个步骤所产生的数据主要来源于物料交接数据和控制物料指令数据，所有物料数据共同组成物料清单，也即待管理的物料数据，物料数据包括：物料名称和对应的物料数量。步骤S200，根据物料数据的获取时间对物料数据进行聚类，得到至少两个聚簇；根据聚簇内物料数据的数量、聚簇内各物料数据对应的物料数量的差异和聚簇内各物料数据的获取时间的差异得到聚簇的第一重要程度；根据聚簇与对应的临近聚簇内的物料数据的数量的差异、第一重要程度的差异和聚簇与对应的临近聚簇的相关系数得到聚簇的第二重要程度；根据所述第一重要程度和所述第二重要程度得到最终重要程度。物料数据是伴随生产过程不断产生的，其中不同物料数据表现为不同的重要程度，物料数据的重要程度越高，其加密的价值越高。所以本发明根据物料数据在时间序列上的分布确定物料数据的重要程度，然后对不同重要程度的物料数据进行不同等级的加密。获取物料数据的重要程度的步骤，具体的：步骤一，根据物料数据的获取时间对物料数据进行聚类，得到至少两个聚簇。在MES系统中物料管理涉及整个生产周期，其所涉及的物料数据的产生具有时间序列上的关系，即物料数据跟随物料管理所涉及生产周期而在时间序列上分布，此时物料数据之间的时间关系同样反映着物料数据之间的联系，此时为了分析物料数据之间的关系，首先对物料数据在时间序列上进行聚类，也即根据物料数据的获取时间对物料数据进行聚类，得到至少两个聚簇。根据物料数据的获取时间对物料数据进行聚类，本发明直接利用现有均值漂移聚类，输入所有物料数据在时间序列上对应时间节点，也即输入所有物料数据的获取时间，输出物料数据对应时间节点的聚簇，得到至少两个聚簇，即反映物料数据在时间序列上的聚簇。以便于后续步骤通过物料数据对应的多个聚簇，分析物料数据之间的关系并进行数据加密。步骤二，根据聚簇内物料数据的数量、聚簇内各物料数据对应的物料数量的差异和聚簇内各物料数据的获取时间的差异得到聚簇的第一重要程度。根据上述步骤一，对物料数据在时间序列上进行聚类得到至少两个聚簇，其聚簇反映着物料数据之间在时间序列上的联系，然后根据聚簇之间的关系判断不同聚簇的不同重要表现，进而对不同重要表现的聚簇内的物料数据分别进行加密。将当前所有物料数据聚类所获得的聚簇分别表示为，N表示聚簇数量，每一个物料数据所属聚簇的聚簇特征以及聚簇包含的物料数据之间的关系共同反应着聚簇内的物料数据相对于整体物料数据所表现的重要程度。首先，对聚簇本身的聚簇特征进行分析，聚簇本身所反映的重要程度主要受聚簇大小，聚簇数据之间的差异以及聚簇数据对应时间序列上的差异的影响，故可根据聚簇内物料数据的数量、聚簇内各物料数据对应的物料数量的差异和聚簇内各物料数据的获取时间的差异得到聚簇的第一重要程度，该第一重要程度即为聚簇本身特征所反映的重要程度。所述第一重要程度的计算公式为：其中，为第i个聚簇的第一重要程度；为第i个聚簇内物料数据的数量；为所有聚簇内物料数据的最大数量；为第i个聚簇内第j个物料数据的获取时间；为第i个聚簇内第j-1个物料数据的获取时间；为第i个聚簇内第j个物料数据对应的物料数量；为第i个聚簇内第j-1个物料数据对应的物料数量。其中，聚簇内物料数据的数量越多，则该聚簇越重要，故越趋近于1，则反映第i个聚簇内物料数据的数量越接近于所有聚簇内物料数据的最大数量，反映聚簇内物料数据的数量越多，则对应的聚簇的第一重要程度越大，聚簇内物料数据的数量和聚簇的第一重要程度成正比。表示时间序列上相邻物料数据的物料数量差异，越大，则相邻物料数据的物料数量差异越大，对应数据信息越丰富，则对应的物料数据的重要程度越大。表示以为权重判断计算相邻物料数据的物料数量的差异，表示时间序列上相邻物料数据对应时间节点的差异，也即相邻物料数据对应的获取时间的差异，越小，则对应聚簇内的物料数据越密集，物料数据之间时间相关性越强，即越大，则对应物料数据相关性越强，更能够体现相邻物料数据的物料数量的差异所反应的数据信息的丰富程度，在的后面加上调节值1是为了避免相邻物料数据的物料数量的差异为0时，其对应的为0而影响判断的准确性，故此处添加一个较小的调节值，用于调节相邻物料数据的物料数量没有差异时的情况，因为可能存在物料数量没有差异，但实际的物料数据是存在一定的差异的。表示第i个聚簇所有相邻物料数据之间的物料数量的差异，越大，对应聚簇数据越重要。实现利用物料数据的物料数量的差异所表现的信息量判断聚簇的重要程度，同时以物料数据对应时间节点为权重，反应出物料数据在时间序列上的关系，突出物料数据时序关联性，在获得物料数据信息丰富度的同时，保证数据稳定性。步骤三，根据聚簇与对应的临近聚簇内的物料数据的数量的差异、第一重要程度的差异和聚簇与对应的临近聚簇的相关系数得到聚簇的第二重要程度。在时间序列上聚簇之间的关系同样反映着物料数据的重要程度，主要涉及聚簇之间的关联性以及聚簇之间的差异。故可根据聚簇与对应的临近聚簇内的物料数据的数量的差异、第一重要程度的差异和聚簇与对应的临近聚簇的相关系数得到聚簇的第二重要程度。所述第二重要程度的计算公式为：其中，为第i个聚簇的第二重要程度；为第i个聚簇的第一重要程度；为聚簇对应的临近聚簇的数量；为第i个聚簇对应的第v个临近聚簇的第一重要程度；为第i个聚簇内物料数据的数量；为第i个聚簇对应的第v个临近聚簇内物料数据的数量；为自然常数；为第i个聚簇和第i个聚簇对应的第v个临近聚簇的相关系数。其中，表示聚簇和对应的临近聚簇二者包含物料数据的数量的差异，越大，相对应两个聚簇之间的关联性越小，则相对应的第i个聚簇对应的第二重要程度越小；当越小，相对应两个聚簇之间的关联性越大，则相对应的第i个聚簇对应的第二重要程度越大；越大，则反映第i个聚簇对应的第v个临近聚簇的关联性越可信，反之，越小，则反映第i个聚簇对应的第v个临近聚簇的关联性越不可信；相关系数越大，越大，反映两个聚簇的相关性越大，故表示第i个聚簇对应的第v个临近聚簇对应的第一重要程度和聚簇之间大小差异的影响下获得的两个聚簇的相关性，越大，对应两个聚簇的相关性越大。故表示第i个聚簇与对应的时间序列上最相近的个临近聚簇之间相关性的均值。聚簇与临近聚簇相关性越强，则表示聚簇内的物料数据越重要，表示第i个聚簇本身的第一重要程度，此时通过表示第i个聚簇与时间序列上最相近的个临近聚簇之间的相关性所反映的聚簇的重要程度，作为聚簇的第二重要程度。其中，聚簇对应的临近聚簇的获取方法为：按照获取时间将聚簇进行排序，得到聚簇序列；基于所述聚簇序列，选取任意聚簇作为目标聚簇，所述目标聚簇的后预设数量个聚簇作为目标聚簇的临近聚簇。在本发明实施例中预设数量的取值为6，也即，在其他实施例中实施者可根据实际情况调整该取值。在第二重要程度的计算公式中涉及两个聚簇之间的相关系数，因为两个聚簇数据之间的相关系数涉及聚簇内物料数据之间的对应关系，但是当前聚簇之间无法保证聚簇数量相等，即聚簇数据之间的对应不唯一，所以此时需要根据两个聚簇之间的物料数据分布，确定两个聚簇中物料数据的最佳的对应关系，进而获得两个聚簇数据的相关系数，其中物料数据的最佳的对应关系也即两个聚簇中物料数据的相匹配关系。两个聚簇数据的对应关系受聚簇大小以及两个聚簇数据大小差异的影响，如对于第i个聚簇和第i个聚簇对应的第v个临近聚簇之间相匹配的物料数据的获取方法：对于第i个聚簇和第i个聚簇对应的第v个临近聚簇，选取两个聚簇中物料数据较多的聚簇作为固定聚簇，另一物料数据较少的聚簇作为滑动聚簇；按照获取时间的先后顺序，对固定聚簇内的物料数据进行排列，得到固定聚簇序列；按照获取时间的先后顺序，对滑动聚簇内的物料数据进行排列，得到滑动聚簇序列；将固定聚簇序列和滑动聚簇序列中的第一个物料数据进行对齐，也即将固定聚簇序列中的第一个物料数据和滑动聚簇序列中的第一个物料数据对齐，此时固定聚簇序列中的第一个物料数据和滑动聚簇序列中的第一个物料数据为相对应的物料数据，固定聚簇序列中的第二个物料数据和滑动聚簇序列中的第二个物料数据为相对应的物料数据，计算相对应物料数据之间的物料数量的差值的均值，再以预设步长滑动所述滑动聚簇序列，计算相对应物料数据之间的物料数量的差值的均值，重复按照预设步长滑动所述滑动聚簇序列，直至滑动聚簇序列和固定聚簇序列的最后一个物料数据对齐，也即将固定聚簇序列中的最后一个物料数据和滑动聚簇序列中的最后一个物料数据对齐，此时固定聚簇序列中的最后一个物料数据和滑动聚簇序列中的最后一个物料数据为相对应的物料数据，固定聚簇序列中的倒数第二个物料数据和滑动聚簇序列中的倒数第二个物料数据为相对应的物料数据，计算相对应物料数据之间的物料数量的差值的均值；当物料数量的差值的均值取最小值时，滑动聚簇序列和固定聚簇序列之间相对应的物料数据，作为相匹配的物料数据。在本发明实施例中预设步长为1，在其他实施例中实施者可根据实际情况调整该取值。重复按照预设步长滑动所述滑动聚簇序列，直至滑动聚簇序列和固定聚簇序列的最后一个物料数据对齐，也即首先将滑动聚簇序列的第一个物料数据和固定聚簇序列的第一个物料数据对齐，然后滑动聚簇序列向后滑动一个步长，使滑动聚簇序列的第一个物料数据和固定聚簇序列的第一个物料数据对齐，然后滑动聚簇序列再向后滑动一个步长，使滑动聚簇序列的第一个物料数据和固定聚簇序列的第三个物料数据对齐，重复滑动预设步长，直至将固定聚簇序列中的最后一个物料数据和滑动聚簇序列中的最后一个物料数据对齐。也可以理解为首先判断两个聚簇包含的物料数据的数量，固定数量较大聚簇，从数量较大聚簇起点数据开始，将较小聚簇所有数据与较大聚簇对齐，然后计算获得对应物料数据的物料数量之间的差值的均值，然后将较小聚簇以步长为1进行滑动，直至较小聚簇中末尾的物料数据与较大聚簇中末尾的物料数据对应，分别记录不同滑动步长下两个聚簇对应物料数据的物料数量的差值的均值，选择差值的均值最小时的物料数据对应关系，将两两对应的物料数据作为相匹配的物料数据。对其相匹配的物料数据进行聚簇的相关系数的计算，也即根据两个聚簇之间的物料数据分布，确定两个聚簇中物料数据的最佳的对应关系，进而获得两个聚簇数据的相关系数。该相关系数的计算公式为：其中，为第i个聚簇和第i个聚簇对应的第v个临近聚簇的相关系数；为第i个聚簇和第i个聚簇对应的第v个临近聚簇之间相匹配的物料数据的数量；为第i个聚簇内第j个相匹配的物料数据的物料数量；为第i个聚簇内相匹配的物料数据的物料数量的均值；为第i个聚簇对应的第v个临近聚簇内第j个相匹配的物料数据的物料数量；为第i个聚簇对应的第v个临近聚簇内相匹配的物料数据的物料数量的均值；为第i个聚簇内相匹配的物料数据的物料数量的标准差；为第i个聚簇对应的第v个临近聚簇内相匹配的物料数据的物料数量的标准差。利用聚簇数据之间的对应关系，获得聚簇之间的相关系数，从而获得聚簇之间的关系所反映的数据重要程度。从聚簇在时间序列上相邻聚簇之间的相关系数入手，反应聚簇在整体数据中的相关性。以聚簇数据之间的相关系数为基础，考虑到聚簇大小差异以及聚簇本身的重要性的影响，有效避免了单个不重要聚簇或者单个过小的聚簇对其他聚簇相关性分析的影响，获得更加可信的聚簇相关性。为两个聚簇内相匹配物料数据的均方差，为两个聚簇内相匹配物料数据对应的相关系数，该相关系数为现有的计算公式，在此不再赘述。步骤四，根据所述第一重要程度和所述第二重要程度得到最终重要程度。从聚簇本身以及聚簇之间的相关性所反映出的数据重要程度，此时综合得到的第一重要程度和第二重要程度计算得到物料数据的最终重要程度。具体的：预设第一影响权重作为所述第一重要程度的权重，预设第二影响权重作为所述第二重要程度的权重；预设第一影响权重、所述第一重要程度、预设第二影响权重和所述第二重要程度加权求和得到最终重要程度。该最终重要程度的计算公式为：其中，为最终重要程度；为预设第一影响权重；为预设第二影响权重；为第一重要程度；为第二重要程度。其中，第一重要程度和第二重要程度分别表示聚簇本身特征与聚簇之间的关系所反映出的聚簇数据的重要程度，其第一重要程度和最终重要程度、第二重要程度和最终重要程度均成正比。在本发明实施例中预设第一影响权重的取值为0.6，预设第二影响权重的取值为0.4，在其他实施例中实施者可根据实际情况调整该取值。步骤S300，对于任意聚簇，根据物料数据的获取时间、对应的物料名称和物料数量构建二维矩阵，作为数量矩阵；对数量矩阵进行平移，得到平移加密矩阵；对于任意聚簇，根据聚簇的最终重要程度获取加密时的所需聚簇，对聚簇和对应的所需聚簇进行编码得到编码序列，并将所述编码序列转换为二维矩阵，作为编码矩阵；对编码矩阵上滑动窗口内的矩阵元素进行置换，得到加密窗口和密文数据链。根据步骤S200，从物料数据在时间序列上的聚簇特点反应出聚簇的重要性，此时根据聚簇数据的最终重要程度对物料数据进行加密处理。对于数据的加密主要利用数据之间的关系进行数据的置换或者替换，在本发明实施例中涉及聚簇数据的转换以及聚簇之间的转换。在聚簇内部的数据主要涉及物料数据产生的时间节点、数据大小以及数据对应属性。数据大小即为物料数量，数据对应属性即为物料名称，时间节点即为物料数据的获取时间。不同时间节点可能产生相同属性的物料数据，此时利用数据属性、数据大小以及数据产生的时间节点构建二维坐标，将同一聚簇所有数据转换为二维矩阵。也即对于任意聚簇，根据物料数据的获取时间、对应的物料名称和物料数量构建二维矩阵。具体的：首先将聚簇簇内的物料数据的获取时间和物料名称进行标记，获得获取时间标识符x和物料名称标识符y，然后分别以时间标识符作为横轴坐标，以物料名称标识符作为纵轴坐标建立二维坐标系，从而将聚簇内物料数据转换为坐标中的点，然后将所有坐标中的点转换为二维矩阵，作为数量矩阵，且对应数量矩阵元素的值为物料数据的物料数量，数量矩阵中元素位置表示物料数量与获取时间和物料名称的对应关系。此时每一个物料数量在矩阵中表示为，其中的值为物料数量，x表示对应物料数据的时间节点标识符，y表示对应物料数据的物料名称标识符。此时基于数量矩阵进行聚簇数据的转换，即对数量矩阵中的每行数据按照行顺序平移得到行平移矩阵，对行平移矩阵中的每列数据按照列顺序平移，得到平移加密矩阵，具体过程为：矩阵行方向按照行顺序进行平移，第x行的行平移单位为x，也即第一行数据向下平移一行，第二行数据向下平移两行，特殊地，在后续行平移中当移动后位置已存在已移动的行时，当前行位置向后顺移，完成行平移得到行平移矩阵。得到行平移矩阵后，利用相同的方法进行列位移，得到平移加密矩阵。对聚簇对应的数量矩阵进行行列平移，以改变物料数据本身和获取时间以及物料名称的对应关系，实现物料数据信息的首次加密。获得密文数据为转换后的平移加密矩阵，转换过程平移单位为公钥。对数量矩阵进行行列平移，仅进行了数据对应关系的加密，其数据本身同样存在原始信息，且聚簇数据量有限，不利于聚簇数据信息的隐藏，所以需要根据进行聚簇之间数据转换，进一步对物料数据进行加密。进一步的，对于任意聚簇，根据聚簇的最终重要程度获取加密时的所需聚簇，对聚簇和对应的所需聚簇进行编码得到编码序列，并将所述编码序列转换为二维矩阵，作为编码矩阵；对编码矩阵上滑动窗口内的矩阵元素进行置换，得到加密窗口和对应的密文数据链。具体的：聚簇之间进行数据转换时，由于当前数据量较大，聚簇较多，所以本发明采用局部多个聚簇进行数据转换。此时首先需要确定局部聚簇数量，也即确定聚簇局部转换时的所需聚簇数量，参与局部转换的数据数量越多，数据转换越复杂，加密效果越好。此时对于越重要的数据所需要的加密程度越高，所以聚簇数据重要程度越高，参与局部转换的聚簇数量越高。首先获取每个聚簇在进行局部聚簇转换时所需的所需聚簇数量。具体的：计算聚簇的最终重要程度和所有聚簇中对应的最小的最终重要程度的差值，作为调节差值；所述调节差值乘上预设调节权重得到初始调节聚簇数量，对初始调节聚簇数量进行向下取整操作，得到调节聚簇数量；所述调节聚簇数量加上预设聚簇数量，得到加密时的所需聚簇数量。该所需聚簇数量的计算公式为：其中，为第i个聚簇对应的所需聚簇数量；为预设聚簇数量；为预设调节权重；为第i个聚簇对应的最终重要程度；为所有聚簇中对应的最小的最终重要程度；为调节差值；为初始调节聚簇数量；为调节聚簇数量；表示向下取整运算。在本发明实施例中预设聚簇数量为5，预设调节权重的取值为2，在其他实施例中实施者可根据实际情况调整该取值。调节差值表示第i个聚簇对应的最终重要程度相对于所有聚簇中对应的最小的最终重要程度的差异，在最小的最终重要程度对应聚簇局部转换所需要的所需聚簇数量已知的情况下，调节差值越大，第i个聚簇局部转换所需要的所需聚簇数量越多，表示对第i个聚簇局部转换所需要的所需聚簇数量的影响，根据调节差值和预设聚簇数量对聚簇对应的所需聚簇数量进行调节。进一步的，基于聚簇对应的所需聚簇数量，获取加密时的所需聚簇，具体的：按照获取时间将聚簇进行排序，得到聚簇序列；对于任意聚簇t，获取聚簇t在聚簇序列中后面的所述所需聚簇数量个聚簇作为初始所需聚簇；当对应的初始所需聚簇的所需聚簇数量的最大值小于等于聚簇t的所需聚簇数量时，将聚簇t对应的初始所需聚簇作为所需聚簇；当对应的初始所需聚簇的所需聚簇数量的最大值大于聚簇t的所需聚簇数量时，继续向后选取预设聚簇数量个聚簇更新为初始所需聚簇，当对应的初始所需聚簇的所需聚簇数量的最大值小于等于聚簇t的所需聚簇数量时，将聚簇t对应的初始所需聚簇作为所需聚簇，当对应的初始所需聚簇的所需聚簇数量的最大值大于聚簇t的所需聚簇数量时，继续向后选取预设聚簇数量个聚簇更新为初始所需聚簇，直至对应的初始所需聚簇的所需聚簇数量的最大值小于等于聚簇t的所需聚簇数量时，得到聚簇t对应的所需聚簇。其中，预设聚簇数量为多个初始所需聚簇中的最大所需聚簇数量减去聚簇t的所需聚簇数量的结果值。也可以说，按照聚簇在时间序列上的顺序，如第一个聚簇，按照第一个聚簇对应的局部转换所需要的聚簇个数，选择当前顺序个聚簇作为初始所需聚簇，然后判断个初始所需聚簇对应的所需聚簇数量的最大值与的大小关系，如果，则表示当前个聚簇互相满足聚簇局部转换所需要的聚簇个数，即对当前个聚簇进行局部转换；如果，则继续选择后续个聚簇，重复上述步骤，直至当前聚簇互相满足聚簇局部转换所需要的聚簇个数，然后对其进行局部转换。进一步的，对聚簇和对应的所需聚簇进行编码得到编码序列，并将所述编码序列转换为二维矩阵，作为编码矩阵。将聚簇和对应的所需聚簇进行编码，获得编码序列为，然后将编码序列转换为二维矩阵，作为编码矩阵。在编码矩阵中进行矩阵元素转换，具体的：首先在编码矩阵中构建的滑动窗口，然后将窗口中间位的编码进行置换，即将编码中的“1”“0”置换，也即当滑动窗口内的中心矩阵元素为0时，将中心矩阵元素置换为1；当滑动窗口内的中心矩阵元素为1时，将中心矩阵元素置换为0，然后将置换后的窗口编码排列为一维，并将其转换为十进制数据。以步长为3滑动窗口，完成所有矩阵元素的转换。特殊地，矩阵边缘不足以构建的窗口时，即实际的窗口时中存在矩阵元素的位置为最终窗口。对窗口中间位的编码进行置换，请参阅图2和图3，图2为对窗口中间位的编码进行置换前的示意图，图3为对窗口中间位的编码进行置换后的示意图。如图3所示的窗口中间位的编码进行置换后，窗口所对应的十进制数据为328。通过对滑动窗口内元素的置换，实现原始数据的转换，获得转换后的数据为十进制的数据，转换参数为窗口置换元素的位置，该转换后的滑动窗口即为加密窗口，加密窗口对应的二进制数据所对应的十进制数据即为加密窗口对应的密文数据。根据上述步骤，完成编码矩阵所有数据的转换。最后获得多个密文数据，由多个密文数据构成十进制数据链，密钥为窗口置换元素的位置序列。完成数据局部聚簇数据之间的转换。为了提高数据转换对信息的加密效果，再次进行多轮转换，即在上述转换后，将密文数据重新编码再转换为矩阵进行窗口元素的置换。局部聚簇之间数据转换轮数则为参与局部转换的聚簇数量，获得最终的密文为多轮转换后的十进制数据链，该多轮转换后的十进制数据链作为密文数据链，密钥为窗口置换元素的位置矩阵，将该位置矩阵作为密钥矩阵。利用上述步骤，完成利用局部聚簇数据之间的转换实现聚簇数据的加密，其中根据聚簇数据的重要程度判断局部转换的所需聚簇数量以及局部转换的轮数，即重要程度越高的聚簇数据参与局部转换的聚簇个数越多，且加密轮式越多，使得重要程度越高的数据加密效果越好，从而实现不同重要程度数据的不同加密效果。并且数据局部转换便于数据的局部获取，有利于数据的调取与应用。至此，完成物料数据的加密。步骤S400，根据物料数据对应的所述平移加密矩阵和所述密文数据链对物料数据进行管理。完成物料数据的加密，此时为了便于数据存储对密文数据进行压缩处理，然后根据物料管理中对物料数据管理职责，赋予管理人员密钥，便于生产过程中进行物料数据的调取。利用物料数据聚簇本身转换与聚簇之间数据转换实现物料数据的加密，此时在实际应用中常常需要调取物料数据，此时需要进行数据解密，对加密后的平移加密矩阵和密文数据链进行解密验证过程为：首先将密文数据链进行编码，并将每一个数据编码投放在的滑动窗口中，再根据窗口置换元素密钥进行窗口元素的置换，然后再将矩阵转换为一维序列并进行解码，根据密钥矩阵的行数重复多次获得局部聚簇转换之前的聚簇数据。根据聚簇内部数据转换的公钥参数，进行聚簇数据对应关系的转换，获得原始的聚簇数据。综上所述，本发明通过获取物料数据，对物料数据聚类得到聚簇；计算聚簇的第一重要程度和第二重要程度；根据第一重要程度和第二重要程度得到最终重要程度；根据物料数据的获取时间、物料数据构建数量矩阵；平移数量矩阵得到平移加密矩阵；根据聚簇的最终重要程度获取加密时的所需聚簇，对聚簇和对应的所需聚簇进行编码得到编码序列和对应的作为编码矩阵；对编码矩阵上矩阵元素进行置换，得到加密窗口和密文数据链；根据平移加密矩阵和密文数据链对物料数据进行管理。根据数据所表现的重要程度进行不同等级的加密处理，在保证重要信息隐藏的同时减少加密运算量。本发明实施例还提出了基于MES系统的物料数据管理系统，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述方法的步骤。由于基于MES系统的物料数据管理方法在上述给出了详细描述，不再赘述。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。
