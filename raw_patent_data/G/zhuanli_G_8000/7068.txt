标题title
区块链的主子链运行状态收集方法、系统及存储介质
摘要abst
本发明涉及区块链技术领域，特别是公开了一种区块链的主子链运行状态收集方法、系统及存储介质，其通过构建联盟链网络，所述联盟链网络包括一个主链和一个以上的子链；在所述主链部署有状态收集智能合约，所述状态收集智能合约用于收集所述子链的状态数据；子链参与组织拥有对主链上的所述状态收集智能合约的写权限；当前子链参与组织通过调用所述主链的状态收集智能合约进行提交所述状态数据，所述主链将收集的当前子链组织的状态数据广播至区块链网络；其他子链参与组织通过监听所述主链的状态收集智能合约获取所述状态数据；从而实现主链对子链运行状态的监控，提高了区块链系统运行的稳定性和可控性。
权利要求书clms
1.一种区块链的主子链运行状态收集方法，其特征在于，包括以下步骤：构建联盟链网络，所述联盟链网络包括一个主链和一个以上的子链；在所述主链部署有状态收集智能合约，所述状态收集智能合约用于收集所述子链的状态数据；子链参与组织拥有对主链上的所述状态收集智能合约的写权限；当前子链参与组织通过调用所述主链的状态收集智能合约进行提交所述状态数据，所述主链将收集的当前子链组织的状态数据广播至区块链网络；其他子链参与组织通过监听所述主链的状态收集智能合约获取所述状态数据。2.根据权利要求1所述的一种区块链的主子链运行状态收集方法，其特征在于：所述子链的状态数据包括：子链参与组织数量及变化信息、子链节点数量及变化信息、子链运行状态、子链智能合约数量及变化信息。3.根据权利要求2所述的一种区块链的主子链运行状态收集方法，其特征在于：所述子链参与组织对所述状态收集智能合约均具有读写权限；当所述子链参与组织对所述状态收集智能合约进行写事件时，所述状态收集智能合约发出通知；子链参与组织监听该主链的状态收集智能合约发出的通知，并获取其中包含的子链的状态数据。4.根据权利要求2所述的一种区块链的主子链运行状态收集方法，其特征在于：所述子链部署新的子链智能合约时，通过当前子链参与组织向所述主链的状态收集智能合约提交一笔交易；所述主链的状态收集智能合约将所述子链智能合约的变化信息广播至区块链网络；所述其他子链参与组织接收到所述广播后，进一步将广播内容与事实信息进行分析比对，并对分析比对结果不一致的情况做出响应。5.一种区块链的主子链运行状态收集系统，其特征在于：包括存储器和处理器，所述存储器中存储有指令，所述处理器通过执行所述存储器中存储的指令使得系统实现如权利要求1至4任一项所述的运行状态收集方法。6.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质中存储有指令，系统执行所述指令使得系统实现权利要求1至4任一项所述的运行状态收集方法。
说明书desc
技术领域本发明涉及区块链技术领域，特别是一种区块链的主子链运行状态收集方法及其应用该方法的系统和存储介质。背景技术传统的区块链是单链结构，区块链中的每个普通节点都要存储所有状态、串行执行所有交易、与其他所有机器达成共识。一旦主网上线就只能小修小补，没办法大范围升级。在区块链技术方面，同一条链上的安全和性能是矛盾的。然而，区块链的任务是多样的，数字货币Token的转移对安全性要求很高，但是资产证明业务就对安全性没那么敏感，对效率更注重，在一条链上就很难兼顾，即便是后来的侧链技术也对缓解主链压力没太大用处。为了解决上述问题，提出了一种主链和子链的双层架构，根据业务特点和需求，每个子链都有独立地直接处理交易、合约等数据，这层次上并不依赖于主链。这些结构相同，但是调用节点数不同、功能不同的子链被称为“同构链”。这种机制让主链只负责最重要的事务，只有最关键的数据才记录在主链上，日常交易和事务则独立存在于子链之上，能够兼顾安全性和效率。由于主链经常被赋予监控整个网络的职责，但是主链与子链之间存在数据隔离，一般没有直接的数据通道，如何完成对子链运行状态的监控，是目前亟待解决的技术问题。发明内容本发明为解决上述问题，结合联盟链的实际需求，提供了一种区块链的主子链运行状态收集方法、系统及存储介质，从而实现主链对子链运行状态的监控，提高了区块链系统运行的稳定性和可控性。为实现上述目的，本发明采用的技术方案为：一种区块链的主子链运行状态收集方法，其包括以下步骤：构建联盟链网络，所述联盟链网络包括一个主链和一个以上的子链；在所述主链部署有状态收集智能合约，所述状态收集智能合约用于收集所述子链的状态数据；子链参与组织拥有对主链上的所述状态收集智能合约的写权限；当前子链参与组织通过调用所述主链的状态收集智能合约进行提交所述状态数据，所述主链将收集的当前子链组织的状态数据广播至区块链网络；其他子链参与组织通过监听所述主链的状态收集智能合约获取所述状态数据。优选的，所述子链的状态数据包括：子链参与组织数量及变化信息、子链节点数量及变化信息、子链运行状态、子链智能合约数量及变化信息。进一步的，所述子链参与组织对所述状态收集智能合约均具有读写权限；当所述子链参与组织对所述状态收集智能合约进行写事件时，所述状态收集智能合约发出通知；子链参与组织监听该主链的状态收集智能合约发出的通知，并获取其中包含的子链的状态数据。进一步的，所述子链部署新的子链智能合约时，通过当前子链参与组织向所述主链的状态收集智能合约提交一笔交易；所述主链的状态收集智能合约将所述子链智能合约的变化信息广播至区块链网络；所述其他子链参与组织接收到所述广播后，进一步将广播内容与事实信息进行分析比对，并对分析比对结果不一致的情况做出响应。本发明之另一目的，在于提供一种区块链的主子链运行状态收集系统，其包括存储器和处理器，所述存储器中存储有指令，所述处理器通过执行所述存储器中存储的指令使得系统实现如上述任一项所述的运行状态收集方法。本发明之再一目的，在于提供一种计算机可读存储介质，所述计算机可读存储介质中存储有指令，系统执行所述指令使得系统实现上述任一项所述的运行状态收集方法。本发明的有益效果是：本发明通过主链和子链构建联盟链网络，本发明通过构建联盟链，实现主链对子链运行状态的监控，提高了区块链系统运行的稳定性和可控性；从私有链到联盟链，相应带来的技术难题逐步递增。本发明通过部署状态收集智能合约，并通过状态收集智能合约实现主链对子链运行状态的监控，可以保障联盟链的合法合规，提高社区信任度；本发明的主链通过将子链的当前子链参与组织的状态数据进行收集，并广播至区块链网络，通过主链与子链的合作的方式共同维系整个区块链网络，操作更灵活；本发明通过其他子链参与组织对主链监听到的状态数据进行分析比对，验证数据的准确性，使得链下治理可行，且效率高、成本低。具体实施方式为了使本发明所要解决的技术问题、技术方案及有益效果更加清楚、明白，以下结合具体实施例对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅用以解释本发明，并不用于限定本发明。本发明的一种区块链的主子链运行状态收集方法，其包括以下步骤：构建联盟链网络，所述联盟链网络包括一个主链和一个以上的子链；在所述主链部署有状态收集智能合约，所述状态收集智能合约用于收集所述子链的状态数据；子链参与组织拥有对主链上的所述状态收集智能合约的写权限；当前子链参与组织通过调用所述主链的状态收集智能合约进行提交所述状态数据，所述主链将收集的当前子链组织的状态数据广播至区块链网络；其他子链参与组织通过监听所述主链的状态收集智能合约获取所述状态数据。本实施例中，所述子链可以是分布式文件系统子链，或者是多个应用领域的行业子链，或者是多个连接外部区块链网络的跨链子链等等。所述子链的状态数据包括：子链参与组织数量及变化信息、子链节点数量及变化信息、子链运行状态、子链智能合约数量及变化信息。所述运行状态包括块高、交易数、tps统计数据等。所述子链参与组织对所述状态收集智能合约均具有读写权限；当所述子链参与组织对所述状态收集智能合约进行写事件时，所述状态收集智能合约发出通知；子链参与组织监听该主链的状态收集智能合约发出的通知，并获取其中包含的子链的状态数据。进一步的，所述子链部署新的子链智能合约时，通过当前子链参与组织向所述主链的状态收集智能合约提交一笔交易；所述主链的状态收集智能合约将所述子链智能合约的变化信息广播至区块链网络。所述其他子链参与组织接收到所述广播后，进一步将广播内容与事实信息进行分析比对，并对分析比对结果不一致的情况做出响应。本实施例中，当子链部署了一个新的智能合约，此时子链上的组织可以把该事件通过调用主链上的状态收集智能合约来让主链知道。调用所述状态收集智能合约会触发主链的状态收集智能合约发出通知，该子链上的所有参与组织都会收到该通知，所以其他参与组织可根据通知内容检查该通知是否属实，防止调用者提交到主链的信息是错误的。如果不属实，则可发起链下仲裁等处理。子链参与组织对所述状态收集智能合约具有写权限。通过在主链上部署所述状态收集智能合约，从而使得该状态收集智能合约能够收集和记录各个子链的各种状态数据。子链参与组织定时自动收集本子链的各种信息，当其信息有变化时，将新状态通过有主链合约提交权限的监控账号提交到主链的状态收集智能合约。主链上的组织通过监听所述状态收集智能合约发出的事件，获取各种状态数据，得知状态变化信息，并可读取出最新状态。子链上的其他参与组织也可以监听主链上的状态收集智能合约发出的事件，并将监听到的状态数据与自身收集的子链信息做对比分析，如果不一致，可在链下发起申诉。因为联盟链是实名制的，因此链下治理可行，效率高，成本低，是优选的治理方案。本发明一个实施例还提供一种区块链的主子链运行状态收集系统，其包括存储器和处理器，所述存储器中存储有指令，所述处理器通过执行所述存储器中存储的指令使得系统实现如上述任一项所述的运行状态收集方法。系统可以包括一个以上的计算机设备，所述计算机设备包括至少一个处理器，通信总线，存储器以及至少一个通信接口。处理器可以是一个通用中央处理器，微处理器，特定应用集成电路，或一个或多个用于控制本发明方案程序执行的集成电路。存储器可以是只读存储器或可存储静态信息和指令的其他类型的静态存储设备，随机存取存储器或者可存储信息和指令的其他类型的动态存储设备，也可以是电可擦可编程只读存储器、只读光盘或其他光盘存储、光碟存储、磁盘存储介质或者其他磁存储设备、或者能够用于携带或存储具有指令或数据结构形式的期望的程序代码并能够由计算机存取的任何其他介质，但不限于此。存储器可以是独立存在，通过总线与处理器相连接。存储器也可以和处理器集成在一起。其中，所述存储器用于存储执行本发明方案的程序代码，并由处理器来控制执行。所述处理器用于执行所述存储器中存储的程序代码。在具体实现中，作为一种实施例，处理器可以包括一个或多个CPU。在具体实现中，作为一种实施例，系统可以包括多个处理器，例如处理器和处理器。这些处理器中的每一个可以是一个单核处理器，也可以是一个多核处理器。这里的处理器可以指一个或多个设备、电路、和/或用于处理数据的处理核。在具体实现中，作为一种实施例，系统还可以包括输出设备和输入设备。输出设备和和输入设备分别与处理器通信。可以以多种方式接受用户的输入，例如，输入设备可以是鼠标、键盘、触摸屏设备或传感设备等。上述的系统可以是一个通用计算机设备或者是一个专用计算机设备。在具体实现中，系统可以是台式机、便携式电脑、网络服务器、掌上电脑、移动手机、平板电脑、无线终端设备、通信设备、嵌入式设备等。系统的存储器中存储了一个或多个软件模块。系统可以通过处理器以及存储器中的程序代码来实现软件模块，实现上述实施例所说的运行状态收集方法。本发明一个实施例还提供了一种计算机存储介质，该计算机存储介质中存储有指令；系统执行该指令，例如计算机设备中的处理器执行该指令，使得该系统实现上述实施例所说的运行状态收集方法。需要说明的是，本说明书中的各个实施例均采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似的部分互相参见即可。对于系统实施例和存储介质实施例而言，由于其与方法实施例基本相似，所以描述的比较简单，相关之处参见方法实施例的部分说明即可。并且，在本文中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。另外，本领域普通技术人员可以理解实现上述实施例的全部或部分步骤可以通过硬件来完成，也可以通过程序来指令相关的硬件完成，所述的程序可以存储于一种计算机可读存储介质中，上述提到的存储介质可以是只读存储器，磁盘或光盘等。上述说明示出并描述了本发明的优选实施例，应当理解本发明并非局限于本文所披露的形式，不应看作是对其他实施例的排除，而可用于各种其他组合、修改和环境，并能够在本文发明构想范围内，通过上述教导或相关领域的技术或知识进行改动。而本领域人员所进行的改动和变化不脱离本发明的精神和范围，则都应在本发明所附权利要求的保护范围内。
