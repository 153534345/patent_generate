标题title
一种交通信号灯控制方法、系统及存储介质
摘要abst
本申请涉及一种交通信号灯控制方法、系统及存储介质，属于交通领域，其方法包括获取交通信号灯的通行状态；其中所述通行状态包括行进状态和暂停状态；当所述通行状态在所述行进状态时，基于预设的监控摄像头获取行人的年龄和行进速度；基于所述年龄和行进速度判断是否延长所述行进状态的行进时间；若延长，基于所述行进时间和所述行进速度，计算延长时间；基于所述延长时间，对所述行进状态的行进时间进行延长。本申请具有有效保障行人的人身安全的效果。
权利要求书clms
1.一种交通信号灯控制方法，其特征在于，包括：获取交通信号灯的通行状态；其中所述通行状态包括行进状态和暂停状态；当所述通行状态在所述行进状态时，基于预设的监控摄像头获取行人的年龄和行进速度；基于所述年龄和行进速度判断是否延长所述行进状态的行进时间；若延长，基于所述行进时间和所述行进速度，计算延长时间；基于所述延长时间，对所述行进状态的行进时间进行延长。2.根据权利要求1所述的一种交通信号灯控制方法，其特征在于，在所述基于所述延长时间，对所述行进状态的行进时间进行延长之后，包括：在对所述行进状态的行进时间进行延长后，对所述暂停状态的暂停时间延长所述延长时间。3.根据权利要求1所述的一种交通信号灯控制方法，其特征在于，在所述获取交通信号灯的通行状态之后，包括：获取当前时间；基于预设的管理数据库，得到所述当前时间所在的时间段是白天时间段还是黑夜时间段；若在白天时间段，判断是否存在行人在所述暂停状态下在人行横道上走动；若存在，搜索预设的区域范围内的车辆终端，并基于所述车辆终端获取车辆行进方向；基于所述车辆行进方向，判断目标车辆是否经过所述人行横道；若经过，向所述目标车辆对应的车辆终端发送提示信息。4.根据权利要求3所述的一种交通信号灯控制方法，其特征在于，在向所述目标车辆对应的车辆终端发送提示信息之前，还包括：获取所述目标车辆的车辆速度；基于所述行进速度和所述车辆速度，判断行人与目标车辆在所述人行横道上是否存在交汇点；若存在交汇点，计算行人到达所述交汇点的到达时间点；将所述到达时间点发送至所述目标车辆对应的车辆终端。5.根据权利要求4所述的一种交通信号灯控制方法，其特征在于，所述判断行人与目标车辆在所述人行横道上是否存在交汇点包括：基于预设的位移传感器，获取所述目标车辆与所述人行横道的直线距离；基于所述直线距离与所述车辆速度，得到所述目标车辆到达所述人行横道的预估时间；其中所述目标车辆的行进方向的延长线与所述人行横道相交于交接点；获取所述交接点与所述行人的交接距离；基于所述交接距离与所述行进速度，得到行人在人行横道上行走至所述交接点所用的步行时间；判断所述行进时间与所述预估时间的差值是否小于预设的时间阈值；若是，判定行人与所述目标车辆在所述人行横道上存在交汇点。6.根据权利要求3所述的一种交通信号灯控制方法，其特征在于，所述基于预设的管理数据库，得到所述当前时间所在的时间段是白天时间段还是黑夜时间段，还包括：若在黑夜时间段，判断在预设的区域范围内是否存在车辆；若不存在车辆，在所述暂停状态下，判断是否存在行人等待通过人行横道；若存在，将所述暂停状态替换为所述行进状态。7.根据权利要求3所述的一种交通信号灯控制方法，其特征在于，在所述判断是否存在行人在所述暂停状态下在人行横道上走动之前，包括：在白天时间段，基于预设的光照传感器，判断光照强度是否大于预设的光照强度阈值；若是，增强交通信号灯的亮度。8.一种交通信号灯控制系统，其特征在于：包括存储器和处理器，所述存储器存储有交通信号灯控制程序，所述处理器用于在执行程序时采用权利要求1-7的任一种方法。9.一种存储介质，其特征在于：所述存储介质中存储有计算机程序，所述计算机程序被处理器加载并执行时，采用了上述的交通信号灯控制方法。
说明书desc
技术领域本申请涉及交通领域，尤其是涉及一种交通信号灯控制方法、系统及存储介质。背景技术交通信号灯指挥交通运行的信号灯，人行横道信号灯作为交通信号灯的一种，由内有红色行人站立图案和内有绿色行人行走图案的一组信号灯组成，用于指导行人通行。当人行横道信号灯显示红色行人站立图案时，禁止行人进入人行横道，但是已经进入人行横道的，可以继续通过或在道路中心线处停留等候；当人行横道信号灯显示绿色行人行走图案时，准许行人通过人行横道；当人行横道信号灯的绿色行人行走图案闪烁时，行人不准穿越，正在穿越的行人需尽快通过或返回原地。发明人认为，在车流量大的时间段，当行人行动不便走在人行横道且信号灯由绿灯变为红灯时，人行横道所在道路的车辆会对人行横道上行人的人身安全带来威胁。申请内容为了有效保障行人的人身安全，本申请提供一种交通信号灯控制方法、系统及存储介质。第一方面，本申请提供的一种交通信号灯控制方法采用如下的技术方案：一种交通信号灯控制方法及系统，包括：获取交通信号灯的通行状态；其中所述通行状态包括行进状态和暂停状态；当所述通行状态在所述行进状态时，基于预设的监控摄像头获取行人的年龄和行进速度；基于所述年龄和行进速度判断是否延长所述行进状态的行进时间；若延长，基于所述行进时间和所述行进速度，计算延长时间；基于所述延长时间，对所述行进状态的行进时间进行延长。通过采用上述技术方案，基于年龄和行进速度判断行人是否行动不便，若行动不便，则延长行进状态的行进时间，有利于为行动不便的人争取一定的通过人行横道的时间，有效保障了行人的人身安全。可选的，在所述基于所述延长时间，对所述行进状态的行进时间进行延长之后，包括：在对所述行进状态的行进时间进行延长后，对所述暂停状态的暂停时间延长所述延长时间。通过采用上述技术方案，延长行进状态的行进时间，同时延长暂停状态的暂停时间，以此延长车辆通行的时间，降低车辆堵塞的概率。可选的，在所述获取交通信号灯的通行状态之后，包括：获取当前时间；基于预设的管理数据库，得到所述当前时间所在的时间段是白天时间段还是黑夜时间段；若在白天时间段，判断是否存在行人在所述暂停状态下在人行横道上走动；若存在，搜索预设的区域范围内的车辆终端，并基于所述车辆终端获取车辆行进方向；基于所述车辆行进方向，判断目标车辆是否经过所述人行横道；若经过，向所述目标车辆对应的车辆终端发送提示信息。通过采用上述技术方案，当行人在人行横道上走动时，通过向经过人行横道的目标车辆发送提示信息，提示车辆注意人行横道上的行人，有利于保障行走在人行横道上的行人的人身安全。可选的，在向所述目标车辆对应的车辆终端发送提示信息之前，还包括：获取所述目标车辆的车辆速度；基于所述行进速度和所述车辆速度，判断行人与目标车辆在所述人行横道上是否存在交汇点；若存在交汇点，计算行人到达所述交汇点的到达时间点；将所述到达时间点发送至所述目标车辆对应的车辆终端。通过采用上述技术方案，若存在交汇点，表明此时车辆有可能会对行走在人行横道上的行人的人身安全造成威胁，此时通过计算行人到达交汇点的到达时间点，并将到达时间点发送至目标车辆对应的车辆终端用于提醒即将经过人行横道的车辆减速，车辆上的司机可通过到达时间点控制车速，有利于保障行人的人身安全。可选的，所述判断行人与目标车辆在所述人行横道上是否存在交汇点包括：基于预设的位移传感器，获取所述目标车辆与所述人行横道的直线距离；基于所述直线距离与所述车辆速度，得到所述目标车辆到达所述人行横道的预估时间；其中所述目标车辆的行进方向的延长线与所述人行横道相交于交接点；获取所述交接点与所述行人的交接距离；基于所述交接距离与所述行进速度，得到行人在人行横道上行走至所述交接点所用的步行时间；判断所述步行时间与所述预估时间的差值是否小于预设的时间阈值；若是，判定行人与所述目标车辆在所述人行横道上存在交汇点。通过采用上述技术方案，将行人的步行时间与目标车辆的预估时间进行对比，并判断行人与目标车辆是否在人行横道上存在交汇点，当行人到交接点的步行时间与目标车辆到交接点的预估时间相近，即步行时间与预估时间的差值小于预设的时间阈值时，表明此时行人与目标车辆在人行横道上存在交汇点，威胁行人在人行横道上的人身安全。可选的，所述基于预设的管理数据库，得到所述当前时间所在的时间段是白天时间段还是黑夜时间段，还包括：若在黑夜时间段，判断在预设的区域范围内是否存在车辆；若不存在车辆，在所述暂停状态下，判断是否存在行人等待通过人行横道；若存在，将所述暂停状态替换为所述行进状态。通过采用上述技术方案，若在黑夜时间段且在预设的区域范围内不存在车辆时，此时若有行人需过人行横道，将暂停状态替换为行进状态，无须使行人在无车辆的道路上等待红灯，在保障行人人身安全的基础上便于行人直接通行。可选的，在所述判断是否存在行人在所述暂停状态下在人行横道上走动之前，包括：在白天时间段，基于预设的光照传感器，判断光照强度是否大于预设的光照强度阈值；若是，增强交通信号灯的亮度。通过采用上述技术方案，由于光照强度大于光照强度阈值时，行人无法辨别交通信号灯的通行状态，增强交通信号灯的亮度便于行人辨别交通信号灯的通行状态。第二方面，本申请提供的一种交通信号灯控制系统采用如下的技术方案：一种交通信号灯控制系统，包括存储器和处理器，所述存储器存储有交通信号灯控制程序，所述处理器用于在执行程序时采用上述交通信号灯控制方法。通过采用上述技术方案，通过将上述的交通信号灯控制方法生成计算机程序，并存储于存储器中，以被处理器加载并执行，从而，根据存储器及处理器制作终端设备，方便使用。第三方面，本申请提供的一种存储介质采用如下的技术方案：一种存储介质，所述存储介质中存储有计算机程序，所述计算机程序被处理器加载并执行时，采用了上述的交通信号灯控制方法。通过采用上述技术方案，通过将上述的交通信号灯控制方法生成计算机程序，并存储于计算机可读存储介质中，以被处理器加载并执行，通过计算机可读存储介质，方便计算机程序的可读及存储。综上所述，本申请具有以下至少一种有益技术效果：1.延长行进状态的行进时间，有利于为行动不便的人争取一定的通过人行横道的时间，有效保障了行人的人身安全。2．通过计算行人到达交汇点的到达时间点，并将到达时间点发送至目标车辆对应的车辆终端用于提醒即将经过人行横道的车辆减速，车辆上的司机可通过到达时间点控制车速，有利于保障行人的人身安全。3．在黑夜时间段且在预设的区域范围内不存在车辆时，此时若有行人需过人行横道，将暂停状态替换为行进状态，无须使行人在无车辆的道路上等待红灯，在保障行人人身安全的基础上便于行人直接通行。附图说明图1是本申请实施例一种交通信号灯控制方法的整体流程图。图2是本申请实施例一种交通信号灯控制方法中在获取交通信号灯的通行状态之后的流程图。图3是本申请实施例一种交通信号灯控制方法中判断行人与目标车辆在人行横道上是否存在交汇点的流程图。具体实施方式本申请实施例公开一种交通信号灯控制方法。参照图1，一种交通信号灯控制方法包括：S100、获取交通信号灯的通行状态；其中通行状态包括行进状态和暂停状态。本实施例中交通信号灯指人行横道信号灯，行进状态指交通信号灯显示绿色行人行走图案即绿灯，暂停状态指交通信号灯显示红色行人站立图案即红灯。参照图2，在获取交通信号灯的通行状态之后，包括：S110、获取当前时间。S120、基于预设的管理数据库，得到当前时间所在的时间段是白天时间段还是黑夜时间段。管理数据库内存储有白天时间段的时间范围和黑夜时间段的时间范围。具体的，管理数据库由工作人员进行维护，并针对不同季节对白天时间段和黑夜时间段进行及时调整，例如春季将白天时间段调整为6:50至17:30，夏季将白天时间段调整为6:00至18:00。S130、若在白天时间段，判断是否存在行人在暂停状态下在人行横道上走动。在白天时间段时，执行主体通过摄像机判断行人是否在红灯时在人行横道上走动，本实施例中，检测行人走动采用行人检测技术，即主要采用边缘特征、形状特征、统计特征或者变换特征等图像的各类静态特征来描述行人，进而检测是否存在行人，并对行人进行精确定位。由于行人检测技术在智能视频监控中已被广泛使用，故在此不再赘述。具体的，在判断是否存在行人在暂停状态下在人行横道上走动之前，包括：S131、在白天时间段，基于预设的光照传感器，判断光照强度是否大于预设的光照强度阈值。S132、若是，增强交通信号灯的亮度。在具体实施中，若白天时间段光照强度过强，行人即无法辨别交通信号灯的通行状态，进而无法做出准确判断。在一实施例中，通过增强交通信号灯的亮度用于使行人在白天时间段辨别交通信号灯的通行状态，在另一实施例中，可同时通过声音提示行人当前的交通信号灯的通行状态。若光照强度小于或等于光照强度阈值，执行主体无动作。参照图2，S140、若存在，搜索预设的区域范围内的车辆终端，并基于车辆终端获取车辆行进方向。执行主体通过摄像头和预设的车辆检测技术确定某时刻内某一区域的车辆数量，具体的，车辆检测技术的流程如下：首先提取出一段视频中的每一帧图像；通过帧差分技术检测车辆目标；对图像进行预处理；选择车辆检测区域；在车辆检测区域中寻找车辆轮廓，即可用过车辆轮廓获知预设的区域内的车辆终端数量。本实施例中，执行主体通过获取车辆的GPS终端获取车辆的行进方向。S150、基于车辆行进方向，判断目标车辆是否经过人行横道。执行主体基于车辆行进方向，判断目标车辆的前进方向是否经过人行横道。S160、若经过，向目标车辆对应的车辆终端发送提示信息。若目标车辆经过人行横道，则想目标车辆发出提示信息，用于提醒目标车辆人行横道上存在行人通行。若目标车辆不经过人行横道，执行主体无动作。具体的，在向目标车辆对应的车辆终端发送提示信息之前，还包括：S161、获取目标车辆的车辆速度。若目标车辆的前进方向经过人行横道，执行主体即获取目标车辆的车辆速度。本实施例中，执行主体通过雷达测速仪获取目标车辆的车辆速度。雷达测速即利用多普勒效应，基于接收到的反射波频移量计算目标车辆的运动速度。具体的，执行主体首先通过摄像头定位目标车辆，并通过雷达测速仪获取目标车辆的车辆速度。S162、基于行进速度和车辆速度，判断行人与目标车辆在人行横道上是否存在交汇点。若行人与目标车辆存在交汇点，表明此时行人行走在人行横道上时，即将经过人行横道的车辆会对行人的人身安全造成威胁。参照图3，判断行人与目标车辆在人行横道上是否存在交汇点包括：S1621、基于预设的位移传感器，获取目标车辆与人行横道的直线距离。S1622、基于直线距离与车辆速度，得到目标车辆到达人行横道的预估时间；其中目标车辆的行进方向的延长线与人行横道相交于交接点。预估时间为直线距离除以车辆速度。S1623、获取交接点与行人的交接距离。由步骤S130可知，摄镜头可对行人进行定位，则基于行人的定位点与交接点，获得行人与交接点的距离。需要说明的是，获取目标车辆与人行横道的直线距离与获取交接点与行人的交接距离为同时获取，用于后续计算行人与目标车辆是否在相近的时间到达人行横道的交接点。S1624、基于交接距离与行进速度，得到行人在人行横道上行走至交接点所用的步行时间。步行时间为交接距离除以行进速度。S1625、判断步行时间与预估时间的差值是否小于预设的时间阈值。S1626、若是，判定行人与目标车辆在人行横道上存在交汇点。举例说明，若设时间阈值为5s，计算得到的步行时间为20s，预估时间计算得到为16s，由于步行时间-预估时间=20s-16s=4s＜5s，故此时执行主体判定行人与目标车辆在人行横道上存在交汇点。需要说明的是，由于行人的速度与车辆的速度均不可控，则获取的行人的行进速度为行人行进的速度的平均值，获取车辆速度为车辆在距离人行横道预设的距离时获取的目标车辆的速度的平均值。S163、若存在交汇点，计算行人到达交汇点的到达时间点。若存在交汇点，则将当前时间点与步行时间相加，得到到达时间点。若不存在交汇点，执行主体无动作。S164、将到达时间点发送至目标车辆对应的车辆终端。将到达时间点发送至目标车辆对应的车辆终端用于提醒即将经过人行横道的车辆减速，车辆上的司机可通过到达时间点控制车速，有利于保障行人的人身安全。参照图2，基于预设的管理数据库，得到当前时间所在的时间段是白天时间段还是黑夜时间段，还包括：S170、若在黑夜时间段，判断在预设的区域范围内是否存在车辆。执行主体通过摄像头和预设的车辆检测技术确定某时刻内某一区域是否存在车辆。S180、若不存在车辆，在暂停状态下，判断是否存在行人等待通过人行横道。若存在车辆，执行主体无动作。S190、若存在，将暂停状态替换为行进状态。若不存在车辆，若此时在暂停状态下存在行人在等待通过人行横道，行人需等待人行横道信号灯变为绿灯即可通行。此时执行主体将暂停状态替换为行进状态，即将红灯转变为绿灯，以便于行人通行。若不存在行人等待通过人行横道，执行主体无动作。参照图1，S200、当通行状态在行进状态时，基于预设的监控摄像头获取行人的年龄和行进速度。具体的，执行主体通过监控摄像头和计算机视觉技术获取行人的年龄和速度，具体的，可通过OpenCV预训练模型检测行人的年龄和行进速度。OpenCV是一个跨平台计算机视觉和机器学习软件库，主要应用于图像分割、人脸识别、动作识别和运动跟踪等领域。S300、基于年龄和行进速度判断是否延长行进状态的行进时间。本实施例中，首先判断年龄是否大于预设的年龄阈值，若年龄大于预设的年龄阈值，此时判断行进速度是否小于预设的速度阈值；若行进速度小于速度阈值，则延长行进状态的行进时间。若年龄小于年龄阈值，则执行主体无动作，若年龄大于年龄阈值，行进速度大于速度阈值，则执行主体无动作。举例说明，若设速度阈值为1.2m/s，年龄阈值为65岁，若检测到行人的年龄为75岁，且行进速度为1m/s，此时执行主体即延长行进状态的行进时间。S400、若延长，基于行进时间和行进速度，计算延长时间。行进状态经过行进时间即进入暂停状态，例如绿灯还剩10秒即转变为红灯，10s即为行进时间。本实施例中基于行进时间和行进速度，计算延长时间的步骤如下：获取行人在当前位置节点通过人行横道的通过距离；将通过距离除以行进速度，得到通过时间；将通过时间减行进时间得到延长时间。举例说明，计算得到通过时间为17s，则延长时间为17s-10s=7s，此时延长时间即为7s。需要说明的是，延长时间为大于0的整数。S500、基于延长时间，对行进状态的行进时间进行延长。参照图1，在基于延长时间，对行进状态的行进时间进行延长之后，包括：S600、在对行进状态的行进时间进行延长后，对暂停状态的暂停时间延长时间。延长行进状态的行进时间，同时延长暂停状态的暂停时间，以此延长车辆通行的时间，降低车辆堵塞的概率。基于步骤S400进行举例说明，若计算得到延长时间为7s，表明延长了绿灯的时间为7s，在红灯时，延长红灯的时间为7s。在延长绿灯和红灯的时间后，基于预设的红灯时间和绿灯时间进行正常人行横道信号灯指示。需要说明的是，交通信号灯的通信状态的时间延长仅适用于周围无机动车信号灯和非机动车信号灯的人行横道，防止人行横道信号灯的延长影响机动车信号灯和非机动车信号灯的正常指示作用。本申请实施例一种交通信号灯控制方法的实施原理为：基于年龄和行进速度判断行人是否行动不便，若行动不便，则延长行进状态的行进时间，有利于为行动不便的人争取一定的通过人行横道的时间，有效保障了行人的人身安全。本申请实施例还公开一种交通信号灯控制系统。一种交通信号灯控制系统包括存储器和处理器，所述存储器存储有交通信号灯控制程序，所述处理器用于在执行程序时采用上述交通信号灯控制方法。其中，终端设备可以采用台式电脑、笔记本电脑或者云端服务器等计算机设备，并且，终端设备包括但不限于处理器以及存储器，例如，终端设备还可以包括输入输出设备、网络接入设备以及总线等。其中，处理器可以采用中央处理单元，当然，根据实际的使用情况，也可以采用其他通用处理器、数字信号处理器、专用集成电路、现成可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等，通用处理器可以采用微处理器或者任何常规的处理器等，本申请对此不做限制。其中，存储器可以为终端设备的内部存储单元，例如，终端设备的硬盘或者内存，也可以为终端设备的外部存储设备，例如，终端设备上配备的插接式硬盘、智能存储卡、安全数字卡或者闪存卡等，并且，存储器还可以为终端设备的内部存储单元与外部存储设备的组合，存储器用于存储计算机程序以及终端设备所需的其他程序和数据，存储器还可以用于暂时的存储已经输出或者将要输出的数据，本申请对此不做限制。其中，通过本终端设备，将上述实施例中的交通信号灯控制方法存储于终端设备的存储器中，并且，被加载并执行于终端设备的处理器上，方便使用。本申请实施例还公开一种存储介质。一种存储介质，所述存储介质中存储有计算机程序，所述计算机程序被处理器加载并执行时，采用了上述的交通信号灯控制方法。其中，计算机程序可以存储于计算机可读介质中，计算机程序包括计算机程序代码，计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间件形式等，计算机可读介质包括能够携带计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等，需要说明的是，计算机可读介质包括但不限于上述元器件。其中，通过本计算机可读存储介质，将上述实施例中的交通信号灯控制方法存储于计算机可读存储介质中，并且，被加载并执行于处理器上，以方便上述方法的存储及应用。以上均为本申请的较佳实施例，并非依此限制本申请的保护范围，故：凡依本申请的结构、形状、原理所做的等效变化，均应涵盖于本申请的保护范围之内。
