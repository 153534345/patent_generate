标题title
一种台区户变关系辨识方法及设备
摘要abst
本申请一种台区户变关系辨识方法及设备，属于户变关系辨识技术领域，所述方法包括：S1.利用自然离群因子算法计算各用户的自然离群因子，根据自然离群因子排除异常用户；S2.对于步骤S1排除异常用户后剩下的待分析用户，根据用户的电压数据对用户聚类，得到各待分析用户对应的用户聚类集合；S3.根据各用户聚类集合的用电量和台变的供电量计算各用户聚类集合的归属权重，根据归属权重完成户变关系辨识。利用自然离群因子算法排除户变关系异常的用户，并根据电压数据进行用户聚类，根据电量数据完成辨识，自然离群因子算法无需预设近邻数k，有效提升算法性能。
权利要求书clms
1.一种台区户变关系辨识方法，包括：S1.利用自然离群因子算法计算各用户的自然离群因子，根据所述自然离群因子排除异常用户；S2.对于步骤S1排除异常用户后剩下的待分析用户，根据用户的电压数据对用户聚类，得到各待分析用户对应的用户聚类集合；S3.根据所述用户聚类集合中各用户的用电量和台变的供电量计算各用户聚类集合的归属权重，根据所述归属权重完成户变关系辨识。2.根据权利要求1所述的台区户变关系辨识方法，其特征在于，所述步骤S3包括：以台区线损率波动最小建立目标函数如下式表达，求解所述目标函数得到用户聚类集合的归属权重，，其中，表示统计天数，表示集合在第天的用电量，表示当前分析台变在第天的供电量，表示集合的归属权重，表示用户聚类集合数量；所述目标函数的约束由下式表达，，和分别表示台区线损率的上、下限值；归属权重满足设定条件时表示集合所包括的用户归属当前分析台变。3.根据权利要求1所述的台区户变关系辨识方法，其特征在于，所述步骤S1包括：S101.获取各用户的电压数据构建数据集合；S102.计算所述集合中各数据点的自然离群因子；S103.排除满足设定值的自然离群因子所对应的异常用户。4.根据权利要求3所述的台区户变关系辨识方法，其特征在于，所述步骤S102包括：S1021.利用自然最近邻搜索算法确定各数据点的近邻数；S1022.计算各数据点的第距离和局域可达密度；S1023.根据所述第距离和局域可达密度计算数据点的自然离群因子。5.根据权利要求4所述的台区户变关系辨识方法，其特征在于，所述自然离群因子的计算包括：，表示数据点的自然离群因子，和分别表示数据点和的局域可达密度，表示数据点的自然影响空间。6.根据权利要求4所述的台区户变关系辨识方法，其特征在于，所述第距离的计算包括：计算数据点与集合中其余数据点的距离，当存在一个数据点与数据点的距离满足以下条件时，表示为数据点的第距离；所述条件为大于至少个除点和以外的数据点与点的距离，且小于至多k-1个除点和以外的数据点与点的距离。7.根据权利要求1所述的台区户变关系辨识方法，其特征在于，所述步骤S2包括：S201.计算任意两个待分析用户的电压相似性；S202.根据电压相似性将每个待分析用户及其相似用户进行聚类，得到各待分析用户对应的用户聚类集合。8.根据权利要求7所述的台区户变关系辨识方法，其特征在于，所述步骤S202包括：S2021.寻找与用户的电压相似性满足设定值的用户，构成用户的初始用户聚类集合；S2022.令，排除集合中的重复元素，更新集合，表示集合中的用户元素对应的用户聚类集合，；S2023.若更新后的集合有新增元素，重复步骤S2022，否则令，若则重复步骤S2021，否则进入步骤S2024，M表示待分析用户数量；S2024.完成聚类，合并相同的集合得到至少一个用户聚类集合。9.根据权利要求7所述的台区户变关系辨识方法，其特征在于，所述步骤S2的电压相似性按以下表达式计算，，表示用户与用户的电压相似性，、分别表示用户 、的电压数据，表示期望值。10.一种户变关系辨识设备，包括处理器和存储器，其中存储器用于存储计算机程序，其特征在于，所述计算机程序由处理器加载并执行时实现权利要求1-9任一项所述的台区户变关系辨识方法。
说明书desc
技术领域本发明属于电力系统户变关系辨识技术领域，具体涉及一种台区户变关系辨识方法及设备。背景技术线损率是电力系统一个重要的考核指标，反映了电力企业的管理水平，目前在各电力企业开展线损治理后，线损异常得到一定改善，但影响线损异常的因素有很多，目前仍存在阻碍线损治理的难题，其中错误的户变关系记录信息是一大影响因素。目前人工核查和停电核查是常用的户变关系核查方法，人工核查需要班组人员到台区现场校核用户的台区归属，难以大规模开展；停电核查影响用户的用电感受，同样难以大规模开展。针对传统方法的弊端，现有学者提出基于量测电气数据的辨识方法，集合用户侧和台变侧的两侧信息，通过数据挖掘分析用户与台变的潜在关系，但是这种方法往往只考虑单一维度的数据，有其局限性。此外，分析时没有排除异常用户的数据，影响分析结果。发明内容基于此，本发明提出一种台区户变关系辨识方法及设备，以克服现有技术的缺陷。本发明一种台区户变关系辨识方法，包括：S1.利用自然离群因子算法计算各用户的自然离群因子，根据自然离群因子排除异常用户；S2.对于步骤S1排除异常用户后剩下的待分析用户，根据用户的电压数据对用户聚类，得到各待分析用户对应的用户聚类集合；S3.根据各用户聚类集合的用电量和台变的供电量计算各用户聚类集合的归属权重，根据归属权重完成户变关系辨识。进一步地，步骤S1包括：S101.获取各用户的电压数据构建数据集合；S102.计算数据集合中各数据点的自然离群因子；S103.排除满足设定值的自然离群因子所对应的异常用户。进一步地，步骤S102包括：S1021.利用自然最近邻搜索算法确定各数据点的近邻数；S1022.计算各数据点的第距离和局域可达密度；S1023.根据第距离和局域可达密度计算数据点的自然离群因子。进一步地，自然离群因子的计算包括：，表示数据点的自然离群因子，和分别表示数据点和的局域可达密度，的局域可达密度，的自然影响空间。进一步地，第距离的计算包括：计算数据点与集合中其余数据点的距离，当存在一个数据点与数据点的距离满足以下条件时，表示为数据点的第距离；所述条件为大于至少个除点和以外的数据点与点的距离，且小于至多k-1个除点和以外的数据点与点的距离。。进一步地，步骤S2包括：S201.计算任意两个待分析用户的电压相似性；S202.根据电压相似性将每个待分析用户及其相似用户进行聚类，得到各待分析用户对应的用户聚类集合。进一步地。步骤S202包括：S2021.寻找与用户的电压相似性满足设定值的用户，构成用户的初始用户聚类集合；S2022.令，排除集合中的重复元素，更新集合，表示集合中的用户元素对应的用户聚类集合，；S2023.若更新后的集合有新增元素，重复步骤S2022，否则令，若则重复步骤S2021，否则进入步骤S2024，M表示待分析用户数量；S2024.完成聚类，合并相同的集合得到至少一个用户聚类集合。。进一步地，步骤S3包括：以台区线损率波动最小建立目标函数如下式表达，求解目标函数得到用户聚类集合的归属权重，，其中，表示统计天数，表示集合在第天的用电量，表示当前分析台变在第天的供电量，表示集合的归属权重，表示用户聚类集合数量；目标函数的约束由下式表达，，和分别表示台区线损率的上、下限值；归属权重满足设定条件时表示集合所包括的用户归属当前分析台变。进一步地，步骤S2的电压相似性按以下表达式计算，，表示用户与用户的电压相似性，、分别表示用户、的电压数据，表示期望值。本发明还提供一种户变关系辨识设备，包括处理器和存储器，其中存储器用于存储计算机程序，该计算机程序由处理器加载并执行时实现前述的台区户变关系辨识方法。从以上技术方案可以看出，本发明具有如下有益效果：本发明一种台区户变关系辨识方法及设备，利用自然离群因子算法，识别待分析台区下的户变关系异常用户，根据电压数据进行用户聚类分析，得到用户聚类类别集合；建立并求解基于电量数据的线损率目标函数，得到用户聚类集合归属权重，根据归属权重完成户变关系辨识；所使用的自然离群因子算法无需预设近邻数k，有效提升算法性能；综合电压和电量数据，多维度开展户变关系辨识，一定程度上克服了单一维度开展户变关系辨识的局限性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据提供的附图获得其他的附图。图1 本发明一种实施例提供的户变关系辨识方法流程图；图2 本发明另一实施例提供的户变关系示意图；图3 本发明另一实施例提供的户变关系辨识方法流程图；图4 本发明提供的一种台区户变关系辨识设备结构示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。如图1所示，本实施例提供一种户变关系辨识方法，包括以下步骤：S1.利用自然离群因子算法计算各用户的自然离群因子，根据自然离群因子排除异常用户。相比较于其他的离群点检测算法，本实施例采用的自然离群因子算法属于无尺度最近邻方法，无需预设近邻数k，k值由数据本身的特性自适应确定，利用数据本身特性搜索自然邻居，进而通过每个数据点的自然邻居个数来判断周围的数据分布，有着更佳的运算性能，k值合理设置的难题也得到解决。S2.对于步骤S1排除异常用户后的待分析用户，根据用户的电压数据对用户聚类，得到各待分析用户对应的用户聚类集合。对于某个待分析用户，本实施例采用“手拉手”式的聚类分析方法，首次确定当前分析用户的相似用户后，将相似用户的相似用户也作为元素合并至当前分析用户的用户聚类集合，直至所有的用户均完成聚类。例如用户A的相似用户为B、C，用户B的相似用户为A、C、D，用户C的相似用户为A、B、D，用户D的相似用户为B、C，则通过聚类，用户A的相似用户最终确定为B、C、D，如此便根据电压数据把用户分成多个聚类，便于之后的户变关系辨识。具体实现要判断用户的相似性时，可以根据两个用户的电压相似性进行判断，可以借助皮尔逊相关系数、斯皮尔曼系数、夹角余弦等数值特性进行计算。S3.根据各用户聚类集合的用电量和台变的供电量计算各用户聚类集合的归属权重，根据归属权重完成户变关系辨识。考虑到用户的用电量与所属台变的供电量基本平衡，因此在步骤S2根据电压数据将用户聚类后，步骤S3通过电量对用户和台变建立关系，根据计算的归属权重完成户变关系的辨识。在可能的一些实施例中，步骤S3可以包括以下步骤：以台区线损率波动最小为目标建立目标函数，如下式表达，求解目标函数得到用户聚类集合的归属权重，，其中，表示统计天数，表示集合在第天的用电量，表示当前分析台变在第天的供电量，表示集合的归属权重，表示用户聚类集合数量；目标函数的约束由下式表达，，和分别表示台区线损率的上、下限值；归属权重满足设定条件时表示集合所包括的用户归属当前分析台变。从目标函数的数学表达可以看出，等式右边绝对式符号内的表达式实则为计算相邻两天的线损率之差，因此目标函数实际上反映了一个统计周期内整体线损率的变化。在可能的一些实施例中，通过归属权重的阈值来判断用户与台变的归属关系，例如阈值设置为0.8、0.9等值时，达到了设定阈值即可视为当前用户聚类集合中的用户归属与当前分析台变；对于能够完全归一化的情况，也可以用二值表示归属权重，=1时表示归属当前台变，=0时表示不归属。为了更详尽的说明本发明的技术方案，下面实施例结合图2给出的场景，提出一种台区户变关系辨识方法。如图2所示，在营销系统的记录中，用户A-E的户变关系均归属变压器J，用户F归属变压器L，但实际通信中只有用户A-D、F抄表成功，用户E无法抄表成功，图2中的实线表示正确的户变关系，虚线表示记录错误的户变关系，现通过本实施例提出的户变关系辨识方法对用户A-F的户变关系进行确认，以核实实际户变关系与系统记录是否一致。结合图3给出的执行流程，本实施例包括以下步骤：S1.利用自然离群因子算法计算各用户的自然离群因子，根据自然离群因子排除异常用户。步骤S1的自然离群因子算法针对某一待分析的台区，利用异常点检测算法对用户进行初步过滤，将明显异常的数据点进行排除，即初步排除户变关系明显异常的用户。本实施例的以下说明均以变压器J为算例，变压器L的异常点检测和户变关系辨识同理可得。在运行自然离群因子算法时，步骤S1包括：S101.获取各用户的电压数据构建数据集合。在本实施例中检测的对象设定为用户的运行电压数据，容易理解的是，本领域技术人员可根据实际需要，采用电流数据等其他的电气量数据来构建数据集合。S102.计算数据集合中各数据点的自然离群因子。计算自然离群因子的过程本实施例采用了自然最近邻搜索算法来寻找近邻数k值的合理设置，具体可以包括：S1021.利用自然最近邻搜索算法确定各数据点的近邻数。近邻数的寻找过程包括：a.统计数据集合的数据点数为，统一初始化所有数据点的以下参数：近邻点数，反向近邻数，邻域，反向邻域，重复分析次数，从第一个数据点开始搜索。b.若，搜索数据点的第个近邻点，进入步骤c，否则进入步骤d。c.令，，，，重复步骤b。d.有数据点存在且时，令，，返回步骤b，否则进入步骤e。e.将每个数据点与其个最近邻相连，构成最大邻域图，其中近邻数，表示数据点。S1022.计算各数据点的第距离和局域可达密度。自然离群因子算法中关于数据点的第距离的计算如下：计算数据点与集合中其余数据点的距离，当存在一个数据点与数据点的距离满足以下条件时，记为数据点的第距离，满足：Ⅰ.至少有个数据点满足；Ⅱ.至多有个数据点满足；数据点满足。上述计算第距离的过程可以理解为：对于当前求解的数据点而言，在计算出点与集合内其余数据点的距离的情况下，如果存在一个除点以外的数据点，其与点的距离，能够大于至少个数据点与点的距离，且小于至多k-1个数据点与点的距离，那么这个数据点与点的距离就视为点的第距离。这里示出一个说明性示例进行说明，例如集合中有6个数据点，分别为a、b、c、d、e、f，现在计算点a的第k距离，则分别计算出点a与其余点的距离有d、d、d、d、d，若距离d大于d、d、d，且小于d，则确定的k只能为2，即点d与点a的距离d记为点a的第2距离。实际上，数据点的第距离反映了数据点周围领域的密集程度，第距离越小，表示数据点周围越密集。自然离群因子算法中关于数据点的局域可达密度的计算如下：，表示数据点到数据点的第可达距离，满足；表示数据点的近邻，满足。S1023.根据第距离和局域可达密度计算数据点的自然离群因子。对于数据点，的计算有，自然影响空间满足，。S103.排除满足设定值的自然离群因子所对应的异常用户。本实施例把的阈值设为2，的数据点所对应的即为异常用户，予以排除，针对变压器J，根据各用户的NOF判断得E、F为异常用户，即从电压数据层面分析，E、F作为离群点明显不归属变压器J。S2.对于步骤S1排除异常用户后的待分析用户A-D，根据用户的电压数据对用户聚类，得到各待分析用户对应的用户聚类集合。本实施例对用户聚类时，采用“手拉手”式的聚类分析方法，寻找当前分析用户的相似用户，再寻找相似用户的相似用户，重复更新当前分析用户的聚类集合，如此把用户分为多个聚类。本实施例采用电压相似性来描述两个用户的相似程度。S201.计算任意两个待分析用户的电压相似性。电压相似性按以下表达式计算，，表示用户与用户的电压相似性，、分别表示用户、的电压数据，表示期望值。S202.根据电压相似性将每个待分析用户及其相似用户进行聚类，得到各待分析用户对应的用户聚类集合。步骤S202实际要完成的便是寻找相似用户的过程，还包括：S2021.寻找与用户的电压相似性满足设定值的用户，构成用户的初始用户聚类集合。S2022.令，排除集合中的重复元素，更新集合，表示集合中的用户元素对应的用户聚类集合，。S2023.若更新后的集合有新增元素，重复步骤S2022，否则令，若则重复步骤S2021，否则进入步骤S2024，M表示待分析用户数量。S2024.完成聚类，合并相同的集合得到至少一个用户聚类集合。以用户A-D为例，用户的相似性是相互的，即如果B是A的相似用户，A必然也是B的相似用户，在步骤S2021中共计算得到4个用户聚类集合，分别为，，，。在步骤S2022中，循环寻找相似用户和更新聚类集合，这里以用户A为算例说明，B作为A的相似用户，其相似用户需要更新至A的聚类集合中，即令，排除重复元素后，A的聚类集合更新为，相较之前新增了C、D，则重复步骤S2022时需要增加C、D的相似用户来更新，令，此次更新后A的聚类集合为，相较之前不再新增元素，则可以输出A的聚类集合为。同理，对用户B、C、D进行同样的相似用户寻找和聚类，即可得到其最终的聚类集合分别为，，。通过合并相同集合，最终输出一个聚类集合为，用户A-D处于同一聚类下。对于有更多用户需要辨识的情况，通过实施本例中的相似用户聚类过程，可以将多个用户聚类为有限个集合，更方便后续的户变关系辨识。而在实际处理中，为了数据更直观和便于处理，电压相似性还可以用矩阵表示，构建相似性矩阵，元素表示用户，的电压相似性，寻找满足电压相似性设定值的用户时，即针对矩阵中第行元素数值满足条件的用户，组成聚类集合。本实施例中相似性阈值设为0.9，＞0.9的用户视为的相似用户。S3.根据各用户聚类集合的用电量和台变的供电量计算各用户聚类集合的归属权重，根据归属权重完成户变关系辨识。以台区线损率波动最小建立目标函数如下式表达，求解目标函数得到用户聚类集合的归属权重，,其中，表示统计天数，表示集合在第天的用电量，表示当前分析台变在第天的供电量，表示集合的归属权重，表示用户聚类集合数量；目标函数的约束由下式表达，，和分别表示台区线损率的上、下限值；归属权重满足设定条件时表示集合所包括的用户归属当前分析台变。在本实施例中进行完全归一化，用二值描述归属权重，=1时表示归属当前台变，=0表示不归属。针对用户A-D的聚类集合，求解得A、B、C、D归属于当前分析变压器J。本申请的实施例还提供一种台区户变关系辨识设备，如图4所示，包括：至少一个处理器1，至少一个通信接口2，至少一个存储器3和至少一个通信总线4；在本申请实施例中，处理器1、通信接口2、存储器3、通信总线4的数量为至少一个，且处理器1、通信接口2、存储器3通过通信总线4完成相互间的通信；处理器1可能是一个中央处理器CPU，或者是特定集成电路ASIC，或者是被配置成实施本发明实施例的一个或多个集成电路等；存储器3可能包含高速RAM存储器，也可能还包括非易失性存储器等，例如至少一个磁盘存储器；其中，存储器存储有计算机可执行指令，处理器可调用存储器存储的程序，所述程序用于：实现前述各个实施例提供的户变关系辨识流程。以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的技术人员应当理解：其依然可以对前述实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明实施例技术方案的精神和范围。
