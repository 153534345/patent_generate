标题title
一种快速稳定的网络靶场虚拟机构建系统
摘要abst
本申请公开一种快速稳定的网络靶场虚拟机构建系统，本系统通过将网络接口进行分层，即分为对外服务模块、存储模块、虚拟机管理平台以及虚拟机，且各个节点之间的对外服务模块、存储模块、虚拟机管理平台以及虚拟机可以分别通过服务交换机、存储交换机、管理交换机和通讯交换机进行数据通信，避免了现有技术中大规模虚拟化场景集中创建产生的超大规模的文件传输所导致的I/O瓶颈，以及业务大量仿真带来的管理和更新维护带来的效率瓶颈问题，从而解决大文件在构建过程中的效率问题。
权利要求书clms
1.一种快速稳定的网络靶场虚拟机构建系统，其特征在于，所述系统包括：主节点、子节点和交换机；所述主节点包括对外服务模块、存储模块、虚拟机管理平台以及虚拟机；所述子节点包括对外服务模块、存储模块、虚拟机管理平台以及虚拟机；所述交换机包括服务交换机、存储交换机、管理交换机和通讯交换机；所述主节点的对外服务模块通过所述服务交换机与所述子节点的对外服务模块进行通信连接；所述主节点的存储模块通过所述存储交换机与所述子节点的存储模块进行通信连接；所述主节点的虚拟机管理平台通过所述管理交换机与所述子节点的虚拟机管理平台进行通信连接；所述主节点的虚拟机通过所述通讯交换机与所述子节点的虚拟机进行通信连接。2.根据权利要求1中所述的系统，其特征在于，所述主节点还包括服务网卡，所述子节点还包括服务网卡；所述主节点的对外服务模块通过所述主节点的服务网卡与所述服务交换机通信连接，所述子节点的对外服务模块通过所述子节点的服务网卡与所述服务交换机进行通信连接。3.根据权利要求1中所述的系统，其特征在于，所述主节点还包括存储网卡，所述子节点还包括存储网卡；所述主节点的存储模块通过所述主节点的存储网卡与所述存储交换机通信连接，所述子节点的存储模块通过所述子节点的存储网卡与所述存储交换机进行通信连接。4.根据权利要求1中所述的系统，其特征在于，所述主节点还包括管理网卡，所述子节点还包括管理网卡；所述主节点的虚拟机管理平台通过所述主节点的管理网卡与所述管理交换机通信连接，所述子节点的虚拟机管理平台通过所述子节点的管理网卡与所述管理交换机进行通信连接。5.根据权利要求1中所述的系统，其特征在于，所述主节点还包括通讯网卡，所述子节点还包括通讯网卡；所述主节点的虚拟机通过所述主节点的通讯网卡与所述通讯交换机通信连接，所述子节点的虚拟机通过所述子节点的通讯网卡与所述通讯交换机进行通信连接。6.根据权利要求1中所述的系统，其特征在于，所述虚拟机管理平台用于通过硬件资源评估，形成节点的资源配置文件；以及，根据虚拟机模板资源预期消耗情况，预测节点所能承载的虚拟机数量、对外服务接口、网络接口，存储镜像数量；其中，所述资源配置文件包括CPU、内存、存储、网络的配资参数。7.根据权利要求1所述的系统，其特征在于，所述存储模块用于在节点上实现虚拟机镜像的复制、监控功能实现节点的存储容量的监控和阈值告警、提供虚拟机可访问的安装脚本和程序。8.根据权利要求1所述的系统，其特征在于，所述主节点的虚拟机管理平台用于将构建任务分解得到配置文件，并将所述配置文件下发到各子节点的虚拟机管理平台；针对每一个子节点，该子节点的虚拟机管理平台用于将所述配置文件下发给该子节点中的存储模块；该子节点的存储模块用于遍历存储配置文件，并调用最新的虚拟机文件、镜像文件，以及对所述最新的虚拟机文件、镜像文件进行拷贝，若所述最新的虚拟机文件、镜像文件发生变更，则将所述最新的虚拟机文件、镜像文件的变更信息同步到其他子节点。9.根据权利要求8所述的系统，其特征在于，该子节点的虚拟机管理平台具体用于接收到所述配置文件后，确定所述配置文件对应的虚拟机文件、镜像文件的网络存储位置；该子节点的存储模块具体用于根据所述网络存储位置调用最新的虚拟机文件、镜像文件，若所述最新的虚拟机文件、镜像文件为多个虚拟机可共用的，则拷贝一份所述最新的虚拟机文件、镜像文件，以便该子节点利用所述镜像文件启动所述虚拟机文件对应的多个虚拟机。10.根据权利要求8所述的系统，其特征在于，该子节点的虚拟机管理平台具体用于接收到所述配置文件后，确定所述配置文件对应的虚拟机文件、镜像文件的网络存储位置；该子节点的存储模块具体用于根据所述网络存储位置调用最新的虚拟机文件、镜像文件，若所述最新的虚拟机文件、镜像文件为多个虚拟机可共用的，则远程从所述主节点调用所述镜像文件，以便该子节点利用所述镜像文件启动所述虚拟机文件对应的多个虚拟机。
说明书desc
技术领域本申请涉及网络安全领域，尤其涉及一种快速稳定的网络靶场虚拟机构建系统。背景技术网络靶场已经成为各国进行网络空间安全研究、学习、测试、验证、演练等必不可少的网络空间安全核心基础设施。世界各国均高度重视网络靶场建设，将其作为安全能力建设支撑的重要手段。网络和业务环境仿真是网络靶场平台的基础能力。网络和业务仿真主要通过虚拟化技术来实现，而仿真环境的规模及种类是衡量网络靶场能力的重要技术指标，也是当前的一个技术难点。现有技术方案具有如下缺点或难点：1、大规模虚拟化场景集中创建产生的超大规模的文件传输，导致I/O瓶颈；2、业务大量仿真带来的管理和更新维护带来的效率瓶颈问题。发明内容本申请提供一种快速稳定的网络靶场虚拟机构建系统，以解决大规模虚拟化场景集中创建产生的超大规模的文件传输所导致的I/O瓶颈，以及业务大量仿真带来的管理和更新维护带来的效率瓶颈问题。第一方面，本申请提供了一种快速稳定的网络靶场虚拟机构建系统，其特征在于，所述系统包括：主节点、子节点和交换机；所述主节点包括对外服务模块、存储模块、虚拟机管理平台以及虚拟机；所述子节点包括对外服务模块、存储模块、虚拟机管理平台以及虚拟机；所述交换机包括服务交换机、存储交换机、管理交换机和通讯交换机；所述主节点的对外服务模块通过所述服务交换机与所述子节点的对外服务模块进行通信连接；所述主节点的存储模块通过所述存储交换机与所述子节点的存储模块进行通信连接；所述主节点的虚拟机管理平台通过所述管理交换机与所述子节点的虚拟机管理平台进行通信连接；所述主节点的虚拟机通过所述通讯交换机与所述子节点的虚拟机进行通信连接。可选的，所述主节点还包括服务网卡，所述子节点还包括服务网卡；所述主节点的对外服务模块通过所述主节点的服务网卡与所述服务交换机通信连接，所述子节点的对外服务模块通过所述子节点的服务网卡与所述服务交换机进行通信连接。可选的，所述主节点还包括存储网卡，所述子节点还包括存储网卡；所述主节点的存储模块通过所述主节点的存储网卡与所述存储交换机通信连接，所述子节点的存储模块通过所述子节点的存储网卡与所述存储交换机进行通信连接。可选的，所述主节点还包括管理网卡，所述子节点还包括管理网卡；所述主节点的虚拟机管理平台通过所述主节点的管理网卡与所述管理交换机通信连接，所述子节点的虚拟机管理平台通过所述子节点的管理网卡与所述管理交换机进行通信连接。可选的，所述主节点还包括通讯网卡，所述子节点还包括通讯网卡；所述主节点的虚拟机通过所述主节点的通讯网卡与所述通讯交换机通信连接，所述子节点的虚拟机通过所述子节点的通讯网卡与所述通讯交换机进行通信连接。可选的，所述虚拟机管理平台用于通过硬件资源评估，形成节点的资源配置文件；以及，根据虚拟机模板资源预期消耗情况，预测节点所能承载的虚拟机数量、对外服务接口、网络接口，存储镜像数量；其中，所述资源配置文件包括CPU、内存、存储、网络的配资参数。可选的，所述存储模块用于在节点上实现虚拟机镜像的复制、监控功能实现节点的存储容量的监控和阈值告警、提供虚拟机可访问的安装脚本和程序。可选的，所述主节点的虚拟机管理平台用于将构建任务分解得到配置文件，并将所述配置文件下发到各子节点的虚拟机管理平台；针对每一个子节点，该子节点的虚拟机管理平台用于将所述配置文件下发给该子节点中的存储模块；该子节点的存储模块用于遍历存储配置文件，并调用最新的虚拟机文件、镜像文件，以及对所述最新的虚拟机文件、镜像文件进行拷贝，若所述最新的虚拟机文件、镜像文件发生变更，则将所述最新的虚拟机文件、镜像文件的变更信息同步到其他子节点。可选的，该子节点的虚拟机管理平台具体用于接收到所述配置文件后，确定所述配置文件对应的虚拟机文件、镜像文件的网络存储位置；该子节点的存储模块具体用于根据所述网络存储位置调用最新的虚拟机文件、镜像文件，若所述最新的虚拟机文件、镜像文件为多个虚拟机可共用的，则拷贝一份所述最新的虚拟机文件、镜像文件，以便该子节点利用所述镜像文件启动所述虚拟机文件对应的多个虚拟机。可选的，该子节点的虚拟机管理平台具体用于接收到所述配置文件后，确定所述配置文件对应的虚拟机文件、镜像文件的网络存储位置；该子节点的存储模块具体用于根据所述网络存储位置调用最新的虚拟机文件、镜像文件，若所述最新的虚拟机文件、镜像文件为多个虚拟机可共用的，则远程从所述主节点调用所述镜像文件，以便该子节点利用所述镜像文件启动所述虚拟机文件对应的多个虚拟机。由上述技术方案可以看出，本申请提供了一种快速稳定的网络靶场虚拟机构建系统，所述系统包括：主节点、子节点和交换机；所述主节点包括对外服务模块、存储模块、虚拟机管理平台以及虚拟机；所述子节点包括对外服务模块、存储模块、虚拟机管理平台以及虚拟机；所述交换机包括服务交换机、存储交换机、管理交换机和通讯交换机；所述主节点的对外服务模块通过所述服务交换机与所述子节点的对外服务模块进行通信连接；所述主节点的存储模块通过所述存储交换机与所述子节点的存储模块进行通信连接；所述主节点的虚拟机管理平台通过所述管理交换机与所述子节点的虚拟机管理平台进行通信连接；所述主节点的虚拟机通过所述通讯交换机与所述子节点的虚拟机进行通信连接。可见，本申请通过将网络接口进行分层，即分为对外服务模块、存储模块、虚拟机管理平台以及虚拟机，且各个节点之间的对外服务模块、存储模块、虚拟机管理平台以及虚拟机可以分别通过服务交换机、存储交换机、管理交换机和通讯交换机进行数据通信，避免了现有技术中大规模虚拟化场景集中创建产生的超大规模的文件传输所导致的I/O瓶颈，以及业务大量仿真带来的管理和更新维护带来的效率瓶颈问题，从而解决大文件在构建过程中的效率问题。上述的非惯用的优选方式所具有的进一步效果将在下文中结合具体实施方式加以说明。附图说明为了更清楚地说明本申请实施例或现有的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请中记载的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本申请一种快速稳定的网络靶场虚拟机构建系统的结构示意图；图2为本申请一种存储模块的结构示意图。具体实施方式为使本申请的目的、技术方案和优点更加清楚，下面将结合具体实施例及相应的附图对本申请的技术方案进行清楚、完整地描述。显然，所描述的实施例仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。下面结合附图，详细说明本申请的各种非限制性实施方式。参见图1，示出了本申请实施例中的一种快速稳定的网络靶场虚拟机构建系统，所述系统可以包括：主节点、子节点和交换机。所述主节点可以包括对外服务模块、存储模块、虚拟机管理平台以及虚拟机。所述子节点可以包括对外服务模块、存储模块、虚拟机管理平台以及虚拟机。所述交换机可以包括服务交换机、存储交换机、管理交换机和通讯交换机。需要说明的是，在本实施例中，该系统可以包括一个主节点，以及该主节点对应的多个子节点，也可以包括多个主节点，以及各个主节点各自分别对应的多个子节点，在本实施例中对此不进行限定。所述主节点的对外服务模块通过所述服务交换机与所述子节点的对外服务模块进行通信连接。例如，若主节点的对外服务模块需要将应用场景的定制化数据或者可视化使用虚拟化资源向子节点的对外服务模块发送，主节点的对外服务模块可以通过所述服务交换机，将应用场景的定制化数据或者可视化使用虚拟化资源向子节点的对外服务模块发送。所述主节点的存储模块通过所述存储交换机与所述子节点的存储模块进行通信连接。例如，主节点的存储模块需要将镜像文件、差分压缩文件向子节点的存储模块发送，主节点的存储模块可以通过所述通讯交换机，将镜像文件、差分压缩文件向子节点的存储模块发送。所述主节点的虚拟机管理平台通过所述管理交换机与所述子节点的虚拟机管理平台进行通信连接。例如，主节点的虚拟机管理平台需要将资源配置文件向子节点的虚拟机管理平台发送，主节点的虚拟机管理平台可以通过所述管理交换机，将资源配置文件向子节点的虚拟机管理平台发送。所述主节点的虚拟机通过所述通讯交换机与所述子节点的虚拟机进行通信连接。例如，主节点的虚拟机需要将执行数据向子节点的虚拟机发送，主节点的虚拟机可以通过所述通讯交换机，将执行数据向子节点的虚拟机发送。所述主节点还包括服务网卡，所述子节点还包括服务网卡；所述主节点的对外服务模块通过所述主节点的服务网卡与所述服务交换机通信连接，所述子节点的对外服务模块通过所述子节点的服务网卡与所述服务交换机进行通信连接。可以理解的是，主节点的对外服务模块需要通过所述主节点的服务网卡向所述服务交换机输出数据，而子节点的对外服务模块需要通过所述子节点的服务网卡接收所述服务交换机发送的数据。所述主节点还包括存储网卡，所述子节点还包括存储网卡；所述主节点的存储模块通过所述主节点的存储网卡与所述存储交换机通信连接，所述子节点的存储模块通过所述子节点的存储网卡与所述存储交换机进行通信连接。可以理解的是，所述主节点的存储模块可以通过所述主节点的存储网卡向所述存储交换机输出数据，所述子节点的存储模块可以通过所述子节点的存储网卡接收所述存储交换机发送的数据。所述主节点还包括管理网卡，所述子节点还包括管理网卡；所述主节点的虚拟机管理平台通过所述主节点的管理网卡与所述管理交换机通信连接，所述子节点的虚拟机管理平台通过所述子节点的管理网卡与所述管理交换机进行通信连接。可以理解的是，所述主节点的虚拟机管理平台可以通过所述主节点的管理网卡向所述管理交换机输出数据，所述子节点的虚拟机管理平台可以通过所述子节点的管理网卡接收所述管理交换机发送的数据。所述主节点还包括通讯网卡，所述子节点还包括通讯网卡；所述主节点的虚拟机通过所述主节点的通讯网卡与所述通讯交换机通信连接，所述子节点的虚拟机通过所述子节点的通讯网卡与所述通讯交换机进行通信连接。所述主节点的虚拟机可以通过所述主节点的通讯网卡向所述通讯交换机输出数据，所述子节点的虚拟机可以通过所述子节点的通讯网卡接收所述通讯交换机发送的数据。可以理解的是，服务交换机仅用于传输主节点的对外服务模块与所述子节点的对外服务模块之间的传输数据，存储交换机仅用于传输主节点的存储模块与子节点的存储模块之间的传输数据，管理交换机仅用于传输主节点的虚拟机管理平台与子节点的虚拟机管理平台之间的传输数据，通讯交换机仅用于传输主节点的虚拟机与子节点的虚拟机之间的传输数据。可见，所述主节点中的对外服务模块、存储模块、虚拟机管理平台以及虚拟机，与所述子节点中的对外服务模块、存储模块、虚拟机管理平台以及虚拟机，分别通过服务交换机、存储交换机、管理交换机和通讯交换机进行通讯连接，四条通讯传输路线之间互不影响干扰，相互独立。可见，本申请针对网络接口进行分层规划设计，将对外服务模块、存储模块、虚拟机管理平台、虚拟机，以及存储、服务、管理和通讯的网卡和交换机等进行分离，其中，将万兆的物理网络划分为存储模块的一部分，并配置存储网络及IP通信地址。这样，通过专用万兆的存储组网以及分发机制可以解决大文件在构建过程中的效率问题。由于CPU资源、内存、是在本机/子节点上无法进行迁移的，但是网络资源是可以进行分离的，因此，本申请中，可以将网络接口进行分层，比如1台物理节点上有4个万兆网卡分成第一个网卡做管理网卡，比如管理网卡可以用于管理主节点和子节点的虚拟机管理平台的通讯交换，形成一个万兆的管理网络。第二个网卡作为存储网卡，用于对主节点和子节点之间的大量的镜像文件进行分发、拷贝，以形成万兆的存储网络，以便能实现更高效、快速的文件传输。第三个网卡作为服务网卡，用于在主节点、子节点中的虚拟机进行对外服务时，形成万兆的服务网络，对外提供服务，可提供交互性更好，更有保障的用户体验。第四个网卡作为通讯网卡，用于提供各个节点的虚拟机业务之间进行通讯的功能，比如某个虚拟机作为攻击方，产生大量的攻击流量，这个流量可能在万兆左右，该流量只存在组建的万兆业务网络中，不会影响到管理、存储、服务等其他网络的运行。在本实施例中，虚拟机管理平台，可以用于描述和定义大规模虚拟化环境，调度分配虚拟化节点资源；具体地，所述虚拟机管理平台可以用于通过硬件资源评估，形成节点的资源配置文件；以及，根据虚拟机模板资源预期消耗情况，预测节点所能承载的虚拟机数量、对外服务接口、网络接口，存储镜像数量；其中，所述资源配置文件包括CPU、内存、存储、网络的配资参数。需要说明的是，网络靶场可以由诸多的硬件服务器和辅助设备组成，每个硬件服务器都是一个虚拟化管理平台，通过虚拟化管理平台可以实现CPU、内存、存储、网卡等硬件设备的虚拟化，为虚拟机的运行准备物理条件。存储模块，可以用于提供场景所需的虚拟机、镜像文件、差分压缩文件。具体地，所述存储模块可以用于在节点上实现虚拟机镜像的复制、监控功能实现节点的存储容量的监控和阈值告警、提供虚拟机可访问的安装脚本和程序。可以理解的是，存储模块在节点上可以部署有同步功能、监控功能、资源共享功能，其中，同步功能具体用于实现虚拟机镜像的复制，监控功能具体用于实现节点的存储容量的监控和阈值告警，资源共享功能具体用于提供虚拟机可访问的安装脚本和程序。在一种实现方式中，如图2所示，存储模块中可以包括软件资源库，该软件资源库中可以包括父虚拟机模板、子增量模板1、…、子增量模板n，其中，父虚拟机模板可以理解为多个子节点的虚拟机可以共用、复用的模板文件、子增量模板可以理解为最新的模板文件或者模板文件对应的差分文件，比如可以为最新的虚拟机文件、镜像文件，或者，最新的虚拟机文件、镜像文件的差分文件。需要说明的是，在本实施例的一种实现方式中，在各个节点之间进行通讯传输时，可以采用将大文件通过差分压缩进行传输的方式，可以理解的是，在各个节点中进行数据传输时，可以只传送差分文件，后续再远程调用或后期同步大文件，这样，可以降低通讯传输的数据量，便于实现大批量镜像文件的快速构建。对外服务模块，可以用于提供应用场景的定制化管理、可视化使用虚拟化资源。即用户可以通过对外服务模块针对特定场景采用特定的定制化管理以及进行资源配置参数的设置。而本实施例中的交换机，可以用于提供存储网络的硬件支持，例如可以包括装备上的网卡和物理存储设备。需要说明的是，节点可以理解为是虚拟化管理平台实现统一管理的定义，可以将每个硬件服务器定义为一个节点。在本实施例中，节点可以分为主节点和子节点，一个网络靶场中包括几个主节点和大量的子节点，或者包括1个主节点和多个子节点。主节点可以包括管理、存储、调度等诸多功能。以管理功能举例来说，可以为：主节点收集到某个子节点的资源配置文件，可形成该子节点的预期可用于多少个虚拟机、支撑多少应用等规划工作。存储功能可以理解为：子节点上是没有镜像文件，也就是虚拟机的本身，子节点包括虚拟机运行所需的资源，而镜像文件等文件来自于主节点，在本申请中，可以通过由存储网卡和存储交换机构成的存储网络可以实现镜像文件从主节点到子节点上的快速高效的拷贝。在本实施例的一种实现方式中，可以通过资源共享功能，实现不同虚拟机的定制问题，就近获取配置文件和安装软件，以及实现对外用户自定义虚拟机，同时自动同步保存。接下来，将具体介绍上述实现方式。在一种实现方式中，所述主节点的虚拟机管理平台可以用于将构建大文件任务分解得到配置文件，例如可以先确定执行该任务所需要的资源，再将执行该任务所需要的资源整合为配置文件；并将所述配置文件下发到各子节点的虚拟机管理平台，以便各子节点的虚拟机管理平台根据该配置文件执行任务。主节点的虚拟机管理平台可以根据配置资源情况，比如虚拟机模板资源预期消耗情况，预测各个子节点所能承载的虚拟机数量、对外服务接口、网络接口，存储镜像数量等数据。网络靶场存在的物理设备，实际上由大量的虚拟机组成，规划的虚拟机组建成网络靶场的一部分，不同的部分最终构建成一个大规模的网络靶场。虚拟机是靶场的直接体现方式，每个虚拟机都是网络靶场的一个组成最小单元。举例说：100台硬件相同服务器，每台服务器可以支撑20个虚拟机的运行所需的CPU、内存、磁盘、网络等资源，最后通过构建，形成了一个2000个虚拟机的小型网络靶场。里面可能是10个不同场景，每个场景有200个虚拟机。当然，虚拟机管理平台和其他应用会占用一部分资源。需要说明的是，不同节点的存储模块可以通过专用的千兆/万兆交换组成存储网络，其中主节点形成各子节点的存储情况。具体地，针对每一个子节点，该子节点的虚拟机管理平台用于将所述配置文件下发给该子节点中的存储模块；该子节点的存储模块用于遍历存储配置文件，并调用最新的虚拟机文件、镜像文件，以及对所述最新的虚拟机文件、镜像文件进行拷贝，若所述最新的虚拟机文件、镜像文件发生变更，则将所述最新的虚拟机文件、镜像文件的变更信息同步到其他子节点。可以理解的是，主节点上虚拟机管理平台可以将构建任务分解并下发到各子节点虚拟机管理平台；各子节点虚拟机管理平台将配置文件下发给存储模块；存储模块遍历存储配置文件，通过专用万兆的网络，调用最近的虚拟机文件、镜像文件，实现快速的拷贝，如有变更，通过同步功能到其他节点。作为一种实现方式，为了实现大文件的快速拷贝，该子节点的虚拟机管理平台具体用于接收到所述配置文件后，确定所述配置文件对应的虚拟机文件、镜像文件的网络存储位置；该子节点的存储模块具体用于根据所述网络存储位置调用最新的虚拟机文件、镜像文件，若所述最新的虚拟机文件、镜像文件为多个虚拟机可共用的，则拷贝一份所述最新的虚拟机文件、镜像文件，比如可以从主节点中拷贝一份所述最新的虚拟机文件、镜像文件并存储到该子节点本地，以便该子节点可以利用所述镜像文件启动所述虚拟机文件对应的多个虚拟机。可以理解的是，子节点的虚拟管理平台接收到任务后，可以先确定执行所述任务所需的镜像文件的网络存储位置，如果是同一类型的镜像文件可由多个虚拟机共用，则可以采用拷贝一份的方式，从主节点到字节点，字节点上多个虚拟机共用一个镜像文件来启动虚拟机，虚拟机启动后，根据配置文件的差异，形成不同的虚拟机系统，存储为新的镜像文件。可见，本方式中只拷贝新的增量文件，也就是新生成的虚拟机文件、镜像文件，该镜像文件和最初的原始镜像文件形成搭配关系，只保存了改动的内容，整体较小，存储和传输都比较容易。只拷贝新的增量文件便于大规模的传输和同步，尤其是在分层的万兆存储网络中。该子节点的虚拟机管理平台具体用于接收到所述配置文件后，确定所述配置文件对应的虚拟机文件、镜像文件的网络存储位置；该子节点的存储模块具体用于根据所述网络存储位置调用最新的虚拟机文件、镜像文件，若所述最新的虚拟机文件、镜像文件为多个虚拟机可共用的，则可以远程从所述主节点调用所述镜像文件，以便该子节点利用所述镜像文件启动所述虚拟机文件对应的多个虚拟机。可以理解的是，子节点的虚拟管理平台接收到任务后，识别到所需镜像文件的网络存储位置，如果是同一类型的镜像文件多个虚拟机共用，采用不拷贝的方式，直接远程从主节点调用一个镜像文件来启动子节点的虚拟机，虚拟机启动后，可以根据配置文件形成不同的虚拟机存储在主节点上，并同步到子节点上。可见，本方式中，可以不需要拷贝镜像文件，以降低资源使用的压力。由上述技术方案可以看出，本申请提供了一种快速稳定的网络靶场虚拟机构建系统，所述系统包括：主节点、子节点和交换机；所述主节点包括对外服务模块、存储模块、虚拟机管理平台以及虚拟机；所述子节点包括对外服务模块、存储模块、虚拟机管理平台以及虚拟机；所述交换机包括服务交换机、存储交换机、管理交换机和通讯交换机；所述主节点的对外服务模块通过所述服务交换机与所述子节点的对外服务模块进行通信连接；所述主节点的存储模块通过所述存储交换机与所述子节点的存储模块进行通信连接；所述主节点的虚拟机管理平台通过所述管理交换机与所述子节点的虚拟机管理平台进行通信连接；所述主节点的虚拟机通过所述通讯交换机与所述子节点的虚拟机进行通信连接。可见，本申请通过将网络接口进行分层，即分为对外服务模块、存储模块、虚拟机管理平台以及虚拟机，且各个节点之间的对外服务模块、存储模块、虚拟机管理平台以及虚拟机可以分别通过服务交换机、存储交换机、管理交换机和通讯交换机进行数据通信，避免了现有技术中大规模虚拟化场景集中创建产生的超大规模的文件传输所导致的I/O瓶颈，以及业务大量仿真带来的管理和更新维护带来的效率瓶颈问题，从而解决大文件在构建过程中的效率问题。也就是说，本申请可以通过存储网络、镜像差分压缩和节点快速构建，实现虚拟机文件无压力复制，解决大规模文件传输问题；通过物理隔离、优先派发、增量模板等实现虚拟机高效率定制的问题。需要说明的是，本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所描述的设备及系统实施例仅仅是示意性的，其中作为分离部件说明的单元可以是或者也可以不是物理上分开的。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。以上所述，仅为本较佳的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到的变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应该以权利要求的保护范围为准。
