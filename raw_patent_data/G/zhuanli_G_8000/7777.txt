标题title
一种矿井下信号灯控制方法
摘要abst
本发明公开了一种矿井下信号灯控制方法，其通过对矿井下信号灯进行分组，并基于当前信号灯的个数、当前信号灯的红绿灯状态、同灯组下红灯或绿灯个数、待行车辆的数量等条件分别执行不同处理步骤，从而实现了矿井下信号灯的智能控制，具有逻辑简单、能适应多种路口类型，能满足矿井下路口不断拓展的需求的优点，降低矿井下信号灯管控难度，提高了信号灯控制精度，较大幅度提升了车辆通信效率和安全性。
权利要求书clms
1.一种矿井下信号灯控制方法，适用于矿井下单行双向道路，其特征在于：配置矿井交通控制器，用于获知各个车辆在矿井下的位置、矿井下各个信号灯的位置和红绿状态、以及控制各个信号灯的红绿状态；配置信号灯分组数据库、车辆优先级数据库和信号灯优先级数据库；每个信号灯均配置有待行车辆缓存，每个车辆均配置有上次通过信号灯缓存；所述分组数据库对信号灯进行分组，断头路的一个信号灯分为一组，同一交叉路口的各个信号灯分为一组；所述矿井交通控制器通过下列步骤对到达路口的车辆进行信号灯控制；所述矿井交通控制器获知当前车辆到达当前信号灯下，根据所述信号灯分组数据库判断当前信号灯所在的灯组中的信号灯个数，如信号灯个数为1，所述矿井交通控制器执行断头路信号灯控制步骤，如信号灯个数大于1，所述矿井交通控制器执行交叉路口信号灯控制步骤；所述断头路信号灯控制步骤为：所述矿井交通控制器进一步判断当前信号灯是绿灯还是红灯，如果是红灯，当前车辆进入错车巷等待，将当前车辆识别码记入当前信号灯的待行车辆缓存末尾，直至所述矿井交通控制器检测到当前信号灯下的待行缓存中排名第一的车辆再次通过该当前信号灯，将当前信号灯置为绿灯并将该排名第一的车辆识别码移除出当前信号灯的待行车辆缓存，此时，当前信号灯的待行车辆缓存中新排名第一的车辆进入断头路；如果是绿灯，当前车辆直接进入断头路，所述矿井交通控制器获知到当前车辆通过当前信号灯后将当前信号灯置为红灯，并将该当前车辆识别码记入该当前信号灯的待行车辆缓存；所述交叉路口处理步骤为：所述矿井交通控制器进一步判断当前信号灯是绿灯还是红灯，如果当前信号灯是绿灯，所述矿井交通控制器执行交叉路口绿灯处理步骤；如果当前信号灯是红灯，所述矿井交通控制器执行交叉路口红灯处理步骤；所述交叉路口绿灯处理步骤为：所述矿井交通控制器进一步判断同灯组下是否还有绿灯，如果同灯组下还有绿灯，所述矿井交通控制器执行交叉路口多绿灯处理步骤，如果同灯组下仅当前信号灯是绿灯，所述矿井交通控制器执行交叉路口单绿灯处理步骤；所述交叉路口多绿灯处理步骤为：所述矿井交通控制器进一步判断同灯组绿灯下是否有同时到达车辆，如果有同时到达车辆，所述矿井交通控制器执行交叉路口多绿灯多车辆处理步骤，如果灯组多个绿灯中仅是当前信号灯下存在到达车辆，所述矿井交通控制器执行交叉路口多绿灯单车辆处理步骤；所述交叉路口多绿灯多车辆处理步骤为：所述矿井交通控制根据所述车辆优先级数据比较同时到达车辆中哪辆车优先级最高，将优先级最高的车辆对应的信号灯保持绿灯不变，使该优先级最高的车辆通行，将该保持绿灯的信号灯识别码记入该优先级最高的车辆的上次通过信号灯缓存，将该优先级最高的车辆识别码记入该保持绿灯的信号灯的待行行车辆缓存末尾，同灯组的其它为绿灯的信号灯置为红灯，同时将灯组下各红灯下待行车辆识别码记入对应信号灯的待行车辆缓存中；如果各同时到达车辆优先级相同，所述矿井交通控制器进一步根据所述信号灯优先级数据库判断为绿色的信号灯中哪个优先级最高，将优先级高的信号灯保持绿灯不变，使对应车辆通行，将该优先级最高的信号灯识别码记入该当前通行车辆的上次通过信号灯缓存，将该当前通行的车辆识别码记入该优先级最高的信号灯的待行车辆缓存末尾，同灯组下的其它为绿灯的信号灯置为红灯，让对应的到达车辆在错道巷等候，同时将等候的车辆识别码记入对应的各新置为红灯的信号灯的待行车辆缓存中；所述交叉路口多绿灯单车辆处理步骤为：所述矿井交通控制器将当前信号灯保持绿灯不变，让当前车辆通行，将当前信号灯识别码记入该当前车辆的上次通过信号灯缓存，同时将该当前车辆识别码记入该当前信号灯的待行车辆缓存末尾，将同灯组中其它为绿灯的信号灯置为红灯；所述交叉路口单绿灯处理步骤为：所述矿井交通控制器将当前信号灯保持绿灯不变，让当前车辆通行，将当前信号灯识别码记入当前车辆的上次通过信号灯缓存，同时将当前车辆识别码记入当前信号灯的待行车辆缓存末尾；所述交叉路口红灯处理步骤为：所述矿井交通控制器查询当前车辆的上次通过信号灯缓存中是否有上次通过信号灯识别码，如果没有上次通过信号灯识别码，所述矿井交通控制器将当前信号灯识别码记入当前车辆的上次通过信号灯缓存，同时将当前车辆识别码记入当前信号灯的待行车辆缓存末尾；如果有上次通过信号灯识别码，所述矿井交通控制器则根据所述信号灯分组数据库判断当前信号灯是否与上次通过信号灯是否在同灯组下，如果是在同灯组下，所述矿井交通控制器执行交叉路口红灯同灯组处理步骤，如果是不在同灯组下，所述矿井交通控制器执行交叉路口非同灯组处理步骤；所述交叉路口红灯同灯组处理步骤为：所述矿井交通控制器从当前车辆上次通过的信号灯的待行车辆缓存中移除当前车辆识别码，并判断当前车辆上次通过的信号灯下是否还有其它待行车辆，如果还有其它待行车辆，所述矿井交通控制器保持当前信号灯状态不变；如果没有其它待行车辆，所述矿井交通控制器继续判断同灯组下其它为红灯的信号灯下是否有待行车辆，如果其它为红灯的信号灯下有待行车辆，所述矿井交通控制器执行交叉路口同灯组多个红灯有待行车辆处理步骤，如果仅当前为红灯的信号灯下有待行车辆，所述矿井交通控制器执行交叉路口同灯组单红灯有待行车辆处理步骤；如果所有为红灯的信号灯都没有待行车辆，执行交叉路口同一灯组下不存在待行车辆处理步骤；所述交叉路口同灯组多个红灯有待行车辆处理步骤为：所述矿井交通控制器根据信号灯优先级数据库判断多个为红灯的信号灯下待行车辆中哪辆车优先级最高，所述矿井交通控制器将优先级最高的车辆对应的信号灯置为绿灯，让优先级最高的车辆通行，将新置为绿灯的信号灯识别码进入该优先级最高的车辆的上次通过信号灯缓存，同灯组下之前为绿灯的信号灯置为红灯；如果多个为红灯的信号灯下待行车辆优先级相同，所述矿井交通控制器根据信号灯优先级数据库判断多个为红灯的信号灯中哪个信号灯优先级最高，所述矿井交通控制器将优先级最高的信号灯置为绿灯，让优先级最高的信号灯下对应的车辆通行，将优先级最高的信号灯识别码记入该当前通行的车辆的上次通过信号灯缓存，将同灯组中之前为绿灯的信号灯置为红灯；所述交叉路口同灯组单红灯有待行车辆处理步骤为：所述矿井交通控制器将当前信号灯置为绿灯，让当前车辆通行，将当前信号灯识别码记入当前车辆的上次通过信号灯缓存，将同灯组中之前为绿灯的信号灯置为红灯；所述交叉路口同灯组下不存在待行车辆处理步骤：所述矿井交通控制器将同灯组下所有为红灯的信号灯置为绿灯，等待车辆通行；所述交叉路口红灯非同灯组处理步骤为：所述矿井交通控制器将当前车辆识别码加入到当前信号灯的待行车辆缓存中。2.根据权利要求要求1所述的矿井下信号灯控制方法，其特征在于：所述车辆识别码为放置在车辆上的信标编号。3.根据权利要求要求1所述的矿井下信号灯控制方法，其特征在于：所述信号灯识别码为信号灯编号或者信号灯IP地址。4.根据权利要求要求1所述的矿井下信号灯控制方法，其特征在于：所述矿井交通控制器基于矿井下电子地图获知各个信号灯的位置。5.根据权利要求要求1所述的矿井下信号灯控制方法，其特征在于：所述矿井交通控制器基于矿井定位技术获知各个车辆的位置。
说明书desc
技术领域本发明属于矿井交通技术领域，尤其涉及一种矿井下信号灯控制方法。背景技术矿山由于环境复杂，一方面需要确保人员的安全，另一方面需要提高设备的运转效率。井下运输是矿山生产的一个关键环节，随着国家对矿井安全的日益重视和监管力度的不断加强，大中型采矿企业井下运输安全生产监控系统开始研制和装备。矿井下巷道分布和地面交通一样，错综复杂。目前有的矿井没有安装信号灯，随着井下车辆越来越多，导致经常发生巷道拥堵及碰撞事故，不仅影响安全且影响生产效率。因为矿井下交通和地面交通控制方式不一样。为了生产需要，不能采用信号灯红、绿灯循环交替变动的方式来控制信号灯，因此控制方法比地面信号灯控制更复杂。因为控制复杂，有的矿井的交通灯管理方式是通过手工控制，即某个路口有车辆到达时，由车辆司机控制对向路口灯变为红灯。这样控制信号灯效率低，不安全，也不能完全满足生产需要。矿井下巷道不像地面道路，可以建设成双向多车道。由于成本及安全需要，很多地方或老式矿井基本都采用单行双向的建设模式，即只有一个车道双向通行的模式。这种模式下，对交通信号灯的依赖度很高。矿井下道路主要交叉路口类型：断头路：如图1所示，为了方便矿上处理废石、垃圾等废弃物，矿上在井下有些地方专门修了废物丢弃场所11。通向这种场所的路即为断头路。这种场所，同时只能一辆车进去。进去后，倒完废物，开出来后，另一辆车才能进去。这就需要在进入断头路口安装一个信号灯10，车辆进去的时候将信号灯置红灯，提醒其他车辆不能进入，其它车辆需要在错车巷20等候，等待里边车辆出来后，再将信号灯置绿灯，然后其他车辆再进入。这种路口控制简单，一般司机手动控制即可，缺点是控制麻烦，一旦司机忘记控制或恢复，就会造成交通堵塞。单行路：如图2所示，在某些区域，为了节省成本和快速施工，修建了单行道。同一时刻只能有一辆车通过单行道，其他车辆需要在错车巷20等候。待单行路上车辆走出单行道时，对向车辆才能进入单行道，否则就会造成交通堵塞。单行路控制方法较断头路复杂了一些，需要考虑双方来车的情况，需要安装2个信号灯10。无车时，两边都是绿灯。当一方来车时，来车一边保持绿灯，另一边变红灯。当车辆走出单行路时，需要判断后方是否有跟车行驶，如果有跟车行驶情况下，保持2个信号灯当前状态继续不变。等所有跟车都通过单行路时，需要判断红灯一边错车巷是否有待行车辆。如果有待行车辆，将红灯置绿灯，另一边绿灯置红灯。如果红灯一边对应错车巷无待行车辆，将红灯置绿灯。对于单行路，如果采用手动控制信号灯，会比较麻烦。前车司机无法知道后方是否有跟车。需要同时控制2个信号灯进行相应的变化。一旦控制错误或忘记控制，就会发生交通堵塞。如果采用传统的程序控制方法实现也比较复杂，需要对每个单行路两边的信号灯分别提供单独的控制方法，随着单行路段增多，控制程序会变的比较复杂。“丁”字路口：如图3所示，对于“丁”字路口信号灯的控制比单行道控制更加复杂。一个路口来车，由于没法判断车辆会朝哪个方向拐弯，所以其他两个路口的信号灯10均需要置红灯。待车辆直行通过另一个信号灯或拐过弯后，判断后边有没有跟车。如果有跟车，保持信号灯不变。待后续跟车都拐过弯后。其他路口车辆才能通行。这个时候因为有2个红灯路口，需要判断两个红灯路口是否有待行车辆。如果都没有待行车辆，将两个红灯路口信号灯置绿灯，等待车辆通行。如果只有一个红灯路口有待行车辆，将原来绿灯路口置红灯，将有待行车辆红灯置绿灯。待行车辆可以通行。等待行车辆通过另一个信号灯或拐过弯后，继续判断其后是否有跟车。如果有跟车，保持信号灯状态不变。如果没有跟车，判断另外两个路口是否有待行车辆。如果另外两个路口都有待行车辆，则要判断哪个路口车辆先到，先到路口信号灯变绿灯，其余两个路口信号灯均变红灯。多岔路口：如图4所示，在矿井下，有很多十字、五岔路口、六岔路口等多岔路口，这些路口信号灯10控制更加复杂。一个路口来车，其他路口都要等候，直到车辆通过交叉路口后，其他路口车辆才能通行。由于有多个等候路口，就牵扯到让谁先行的问题。如果采用传统的控制方法，每个路口提供单独的控制算法。一个是控制逻辑复杂，参考“丁”字路口控制逻辑，十字路口、五岔路口、六岔路口等多叉路口控制逻辑将非常复杂。另一个是无法灵活应变。辛苦实现好的逻辑，随着生产需要，如果巷道多加了一个交叉路口，原来的控制逻辑将失效，需要重新开发控制逻辑，耗时费力，还不好测试。在本发明中，上述单行道、丁字路口、各种多岔路口统称为交叉路口。发明内容本发明所要解决的技术问题是提供一种控制逻辑简单、能适应多种路口类型，能满足矿井下路口拓展的矿井下信号灯控制方法，以克服现有技术存在的不足。为解决上述技术问题，本发明采用如下技术方案：一种矿井下信号灯控制方法，适用于矿井下单行双向道路，其特征在于：配置矿井交通控制器，用于获知各个车辆在矿井下的位置、矿井下各个信号灯的位置和红绿状态、以及控制各个信号灯的红绿状态；配置信号灯分组数据库、车辆优先级数据库和信号灯优先级数据库；每个信号灯均配置有待行车辆缓存，每个车辆均配置有上次通过信号灯缓存；所述分组数据库对信号灯进行分组，断头路的一个信号灯分为一组，同一交叉路口的各个信号灯分为一组；所述矿井交通控制器通过下列步骤对到达路口的车辆进行信号灯控制；所述矿井交通控制器获知当前车辆到达当前信号灯下，根据所述信号灯分组数据库判断当前信号灯所在的灯组中的信号灯个数，如信号灯个数为1，所述矿井交通控制器执行断头路信号灯控制步骤，如信号灯个数大于1，所述矿井交通控制器执行交叉路口信号灯控制步骤；所述断头路信号灯控制步骤为：所述矿井交通控制器进一步判断当前信号灯是绿灯还是红灯，如果是红灯，当前车辆进入错车巷等待，将当前车辆识别码记入当前信号灯的待行车辆缓存末尾，直至所述矿井交通控制器检测到当前信号灯下的待行缓存中排名第一的车辆再次通过该当前信号灯，将当前信号灯置为绿灯并将该排名第一的车辆识别码移除出当前信号灯的待行车辆缓存，此时，当前信号灯的待行车辆缓存中新排名第一的车辆进入断头路；如果是绿灯，当前车辆直接进入断头路，所述矿井交通控制器获知到当前车辆通过当前信号灯后将当前信号灯置为红灯，并将该当前车辆识别码记入该当前信号灯的待行车辆缓存；所述交叉路口处理步骤为：所述矿井交通控制器进一步判断当前信号灯是绿灯还是红灯，如果当前信号灯是绿灯，所述矿井交通控制器执行交叉路口绿灯处理步骤；如果当前信号灯是红灯，所述矿井交通控制器执行交叉路口红灯处理步骤；所述交叉路口绿灯处理步骤为：所述矿井交通控制器进一步判断同灯组下是否还有绿灯，如果同灯组下还有绿灯，所述矿井交通控制器执行交叉路口多绿灯处理步骤，如果同灯组下仅当前信号灯是绿灯，所述矿井交通控制器执行交叉路口单绿灯处理步骤；所述交叉路口多绿灯处理步骤为：所述矿井交通控制器进一步判断同灯组绿灯下是否有同时到达车辆，如果有同时到达车辆，所述矿井交通控制器执行交叉路口多绿灯多车辆处理步骤，如果灯组多个绿灯中仅是当前信号灯下存在到达车辆，所述矿井交通控制器执行交叉路口多绿灯单车辆处理步骤；所述交叉路口多绿灯多车辆处理步骤为：所述矿井交通控制根据所述车辆优先级数据比较同时到达车辆中哪辆车优先级最高，将优先级最高的车辆对应的信号灯保持绿灯不变，使该优先级最高的车辆通行，将该保持绿灯的信号灯识别码记入该优先级最高的车辆的上次通过信号灯缓存，将该优先级最高的车辆识别码记入该保持绿灯的信号灯的待行行车辆缓存末尾，同灯组的其它为绿灯的信号灯置为红灯，同时将灯组下各红灯下待行车辆识别码记入对应信号灯的待行车辆缓存中；如果各同时到达车辆优先级相同，所述矿井交通控制器进一步根据所述信号灯优先级数据库判断为绿色的信号灯中哪个优先级最高，将优先级高的信号灯保持绿灯不变，使对应车辆通行，将该优先级最高的信号灯识别码记入该当前通行车辆的上次通过信号灯缓存，将该当前通行的车辆识别码记入该优先级最高的信号灯的待行车辆缓存末尾，同灯组下的其它为绿灯的信号灯置为红灯，让对应的到达车辆在错道巷等候，同时将等候的车辆识别码记入对应的各新置为红灯的信号灯的待行车辆缓存中；所述交叉路口多绿灯单车辆处理步骤为：所述矿井交通控制器将当前信号灯保持绿灯不变，让当前车辆通行，将当前信号灯识别码记入该当前车辆的上次通过信号灯缓存，同时将该当前车辆识别码记入该当前信号灯的待行车辆缓存末尾，将同灯组中其它为绿灯的信号灯置为红灯；所述交叉路口单绿灯处理步骤为：所述矿井交通控制器将当前信号灯保持绿灯不变，让当前车辆通行，将当前信号灯识别码记入当前车辆的上次通过信号灯缓存，同时将当前车辆识别码记入当前信号灯的待行车辆缓存末尾；所述交叉路口红灯处理步骤为：所述矿井交通控制器查询当前车辆的上次通过信号灯缓存中是否有上次通过信号灯识别码，如果没有上次通过信号灯识别码，所述矿井交通控制器将当前信号灯识别码记入当前车辆的上次通过信号灯缓存，同时将当前车辆识别码记入当前信号灯的待行车辆缓存末尾；如果有上次通过信号灯识别码，所述矿井交通控制器则根据所述信号灯分组数据库判断当前信号灯是否与上次通过信号灯是否在同灯组下，如果是在同灯组下，所述矿井交通控制器执行交叉路口红灯同灯组处理步骤，如果是不在同灯组下，所述矿井交通控制器执行交叉路口非同灯组处理步骤；所述交叉路口红灯同灯组处理步骤为：所述矿井交通控制器从当前车辆上次通过的信号灯的待行车辆缓存中移除当前车辆识别码，并判断当前车辆上次通过的信号灯下是否还有其它待行车辆，如果还有其它待行车辆，所述矿井交通控制器保持当前信号灯状态不变；如果没有其它待行车辆，所述矿井交通控制器继续判断同灯组下其它为红灯的信号灯下是否有待行车辆，如果其它为红灯的信号灯下有待行车辆，所述矿井交通控制器执行交叉路口同灯组多个红灯有待行车辆处理步骤，如果仅当前为红灯的信号灯下有待行车辆，所述矿井交通控制器执行交叉路口同灯组单红灯有待行车辆处理步骤；如果所有为红灯的信号灯都没有待行车辆，执行交叉路口同一灯组下不存在待行车辆处理步骤；所述交叉路口同灯组多个红灯有待行车辆处理步骤为：所述矿井交通控制器根据信号灯优先级数据库判断多个为红灯的信号灯下待行车辆中哪辆车优先级最高，所述矿井交通控制器将优先级最高的车辆对应的信号灯置为绿灯，让优先级最高的车辆通行，将新置为绿灯的信号灯识别码进入该优先级最高的车辆的上次通过信号灯缓存，同灯组下之前为绿灯的信号灯置为红灯；如果多个为红灯的信号灯下待行车辆优先级相同，所述矿井交通控制器根据信号灯优先级数据库判断多个为红灯的信号灯中哪个信号灯优先级最高，所述矿井交通控制器将优先级最高的信号灯置为绿灯，让优先级最高的信号灯下对应的车辆通行，将优先级最高的信号灯识别码记入该当前通行的车辆的上次通过信号灯缓存，将同灯组中之前为绿灯的信号灯置为红灯；所述交叉路口同灯组单红灯有待行车辆处理步骤为：所述矿井交通控制器将当前信号灯置为绿灯，让当前车辆通行，将当前信号灯识别码记入当前车辆的上次通过信号灯缓存，将同灯组中之前为绿灯的信号灯置为红灯；所述交叉路口同灯组下不存在待行车辆处理步骤：所述矿井交通控制器将同灯组下所有为红灯的信号灯置为绿灯，等待车辆通行；所述交叉路口红灯非同灯组处理步骤为：所述矿井交通控制器将当前车辆识别码加入到当前信号灯的待行车辆缓存中。采用上述技术方案，本发明通过对信号灯进行分组，并基于当前信号灯的个数、当前信号灯的红绿灯状态、同灯组下红灯或绿灯个数、待行车辆的数量等条件分别执行不同处理步骤，从而实现了矿井下信号灯的智能控制，具有逻辑简单、能适应多种路口类型，能满足矿井下路口不断拓展的需求的优点，降低矿井下信号灯管控难度，提高了信号灯控制精度，较大幅度提升了车辆通信效率和安全性。附图说明图1为断头路示意图；图2为单行道示意图；图3为丁字路口示意图；图4为多岔路口示意图；图5为本发明的矿井下信号灯控制系统示意图。具体实施方式本发明的矿井下信号灯控制方法，如图5所示，配置有矿井交通控制器100、信号灯分组数据库200、车辆优先级数据库300、信号灯优先级数据库400。每个车辆500均配置有上次通过信号灯缓存501，每个信号灯600均配置有待行车辆缓存601。矿井交通控制器100与信号灯分组数据库200、车辆优先级数据库300、信号灯优先级数据库400、各个车辆500，各个上次通过信号灯缓存501、各个信号灯600以及各个待行车辆缓存601均通信。其中，矿井交通控制器100通过放置在车辆500上的信标进行通信，并通过信标实现了车辆500在矿井下的精确定位。矿井交通控制器100能够基于矿井下电子地图获知各个信号灯的位置信信息，也可以获知各个信号灯的红绿状态，通过矿井下精确定位技术能够实时获知各个车辆的位置信息，并且还还能够控制各个信号灯的红绿状态。由于矿井交通控制器获知信号灯位置信息和红绿状态、通过矿井下精确定位技术获知车辆位置信息是本领域技术人员均知晓的现有技术，因此这里不再累述。信号灯分组数据库对信号灯进行分组，分组根据路口的具体情况进行划分，例如：断头路的只需要一个信号灯控制，因此将断头路的一个信号灯分为一组，单行道需要两个信号灯控制，因此将单行道首尾两个信号灯分为一组，丁字路口需要三个信号灯进行控制，因此将丁字路口对应的三个信号灯分为一组，十字路口需要四个信号灯进行控制，因此将十字路口对应的四个信号分一组，……，即对于交叉路口，同一个交叉路口的各个信号灯分为一组。同灯组的信号灯具有“互斥”属性，即在同灯组内，有车到达时，同一时刻只能有一个信号灯为绿灯，其余信号灯全是红灯。例如，单行道上两端A、B两个信号灯构成的灯组就是“互斥”：A端来车，保持A端的信号灯为绿灯，B端的信号灯必须是红灯；同理，B端来车，保持B端的信号灯为绿灯，A端的信号灯就必须是红灯，不然会造成交通堵塞。丁字路口A、B、C三个信号灯构成的信号灯组也必须是“互斥”：A口来车，保持A口的信号灯为绿灯，B、C口的信号灯就必须红灯；B口来车，A、C口的信号灯必须是红灯；C口来车，A、B口的信号灯必须是红灯。上次通过信号灯缓存501用于记入车辆通过的信号灯识别码，但只会记入车辆最近一次所通过的信号灯识别码，并会把前一次通过信号灯识别码删除。例如#1车辆经过一个丁字路口时，通过该丁字路口的A口信号灯，会将该A口信号灯识别码记入该#1车辆对应的#1上次通过信号灯缓存，将之前在#1上次通过信号灯缓存中的其它信号灯识别码删除，当通过该丁字路口的B口信号灯时，就将该B口信号灯识别码记入该#1车辆对应的#1上次通过信号灯缓存中，并将原先记入在#1上次通过信号灯缓存的A口信号灯识别码删除。待行车辆缓存用于记入对应信号灯下的待行车辆，如果有多个待行车辆，则将各待行车辆识别码按到达时间顺序依次排列在待行车辆缓存中。信号灯识别码通常为信号灯编号，也可以用信号灯的I P地址作为信号识别码。车辆设别码通常为放置在车辆上的信标编号。矿井下车辆有优先级，一般指挥车辆优先级大于载人车辆，载人车辆优先级大于运货车辆，所以要配置车辆优先级数据库。信号灯也有优先级，一般上行信号灯大于下行信号灯，或者对信号灯编排优先级顺序，所以也要配置信号灯优先级数据库。本发明的矿井交通控制器通过下列步骤对到达路口的车辆进行信号灯控制：矿井交通控制器获知当前车辆到达当前信号灯下，根据信号灯分组数据库判断当前信号灯所在的灯组中的信号灯个数，如信号灯个数为1，矿井交通控制器执行断头路信号灯控制步骤，如信号灯个数大于1，所述矿井交通控制器执行交叉路口信号灯控制步骤。S100断头路信号灯控制步骤当前车辆到达断头路口信号灯附近时，矿井交通控制器进一步判断当前信号灯是绿色还是红灯，如果是红灯，说明有车已经驶入了断头路，当前车辆进入错车巷等待，将当前车辆识别码记入当前信号灯的待行车辆缓存末尾，直至矿井交通控制器检测到当前信号灯下的待行缓存中排名第一的车辆再次通过该当前信号灯，说明该车辆驶出了断头路，则将当前信号灯置为绿灯并将该排名第一的车辆识别码移除出当前信号灯的待行车辆缓存，此时，当前信号灯的待行车辆缓存中新排名第一的车辆进入断头路；如果是绿灯，当前车辆直接进入断头路，交通控制器获知到当前车辆通过当前信号灯后将当前信号灯置为红灯，并将该当前车辆识别码记入该当前信号灯的待行车辆缓存。S200交叉路口处理步骤车辆到达交叉路口信号灯附近时，矿井交通控制器进一步判断当前信号灯是绿灯还是红灯，如果当前信号灯是绿灯，矿井交通控制器执行交叉路口绿灯处理步骤；如果当前信号灯是红灯，矿井交通控制器执行交叉路口红灯处理步骤。S210交叉路口绿灯处理步骤如果当前信号灯是绿灯，矿井交通控制器进一步判断同灯组下是否还有绿灯，如果同灯组下还有绿灯，矿井交通控制器执行交叉路口多绿灯处理步骤，如果同灯组下仅当前信号灯是绿灯，矿井交通控制器执行交叉路口单绿灯处理步骤。S211交叉路口多绿灯处理步骤如果同灯组下还有绿灯，矿井交通控制器进一步判断同灯组绿灯下是否有同时到达车辆，如果有同时到达车辆，矿井交通控制器执行交叉路口多绿灯多车辆处理步骤，如果灯组多个绿灯中仅是当前信号灯下存在到达车辆，矿井交通控制器执行交叉路口多绿灯单车辆处理步骤。S211/1交叉路口多绿灯多车辆处理步骤如果灯组下多个绿灯有同时到达车辆，矿井交通控制器则根据车辆优先级数据比较同时到达车辆中哪辆车优先级最高，矿井交通控制器将优先级最高的车辆对应的信号灯保持绿灯不变，使该优先级最高的车辆通行，将该保持绿灯的信号灯识别码记入该优先级最高的车辆的上次通过信号灯缓存，将该优先级最高的车辆识别码记入该保持绿灯的信号灯的待行车辆缓存末尾，同灯组的其它为绿灯的信号灯置为红灯，同时将灯组下各红灯下待行车辆识别码记入对应信号灯的待行车辆缓存中；如果各同时到达车辆优先级相同，矿井交通控制器进一步根据所述信号灯优先级数据库判断为绿色的信号灯中哪个优先级最高，矿井交通控制器将优先级高的信号灯保持绿灯不变，使对应车辆通行，将该优先级最高的信号灯记入该当前通行车辆的上次通过信号灯缓存，将该当前通行的车辆识别码记入该优先级最高的信号灯的待行车辆缓存末尾，同灯组下的其它为绿灯的信号灯置为红灯，让对应的到达车辆在错道巷等候，同时将等候的车辆识别码记入对应的各新置为红灯的信号灯的待行车辆缓存中。S211/2交叉路口多绿灯单车辆处理步骤如果灯组下多个绿灯中只有一个绿灯有到达车辆，矿井交通控制器将当前信号灯保持绿灯不变，让当前车辆通行，将当前信号灯记入当前车辆的上次通过信号灯缓存，同时将当前车辆识别码记入当前信号灯的待行车辆缓存末尾，将同灯组中其它为绿灯的信号灯置红灯。S212交叉路口单绿灯处理步骤如果车辆到达信号灯为绿灯状态，且灯组下只有一个绿灯，说明是跟车行驶，矿井交通控制器将当前信号灯保持绿灯不变，让当前车辆通行，将当前信号灯识别码记入当前车辆的上次通过信号灯缓存，同时将当前车辆识别码记入当前信号灯的待行车辆缓存末尾。S220所述交叉路口红灯处理步骤为如果当前信号灯的红灯，矿井交通控制器查询当前车辆的上次通过信号灯缓存中是否有上次通过信号灯识别码，如果没有上次通过信号灯识别码，说明车辆首次到达信号灯下，矿井交通控制器将当前信号灯识别码记入当前车辆的上次通过信号灯缓存，同时将当前车辆识别码记入当前信号灯的待行车辆缓存末尾；如果有上次通过信号灯识别码，矿井交通控制器则根据信号灯分组数据库判断当前信号灯是否与上次通过信号灯是否在同灯组下，如果是在同灯组下，矿井交通控制器执行交叉路口红灯同灯组处理步骤，如果是不在同灯组下，矿井交通控制器执行交叉路口非同灯组处理步骤。S221交叉路口红灯同灯组处理步骤如果当前为红灯的信号灯和当前车辆上次通过的信号灯是同灯组，说明车辆走出了灯组，矿井交通控制器从当前车辆上次通过的信号灯的待行车辆缓存中移除当前车辆，并判断当前车辆上次通过的信号灯下是否还有其它待行车辆。如果还有其它待行车辆，说明当前车辆后方还有跟随车辆，矿井交通控制器保持当前信号灯状态不变。如果没有其它待行车辆，矿井交通控制器继续判断同灯组下其它为红灯的信号灯下是否有待行车辆，如果有，矿井交通控制器执行交叉路口同灯组多个红灯有待行车辆处理步骤，如果仅当前信号灯下有待行车辆，矿井交通控制器执行交叉路口同灯组单红灯有待行车辆处理步骤；如果所有为红灯的信号灯都没有待行车辆，执行交叉路口同一灯组下不存在待行车辆处理步骤。S221/1交叉路口同灯组多个红灯有待行车辆处理步骤矿井交通控制器根据信号灯优先级数据库判断多个红灯下待行车辆中哪辆车优先级最高，矿井交通控制器将优先级最高的车辆对应的信号灯置为绿灯，让优先级最高的车辆通行，将新置为绿灯的信号灯进入该优先级最高的车辆的上次通过信号灯缓存，同灯组下之前为绿灯的信号灯置为红灯；如果多个红灯下待行车辆优先级相同，矿井交通控制器根据信号灯优先级数据库判断多个为红灯的信号灯中哪个信号灯优先级最高，矿井交通控制器将优先级最高的信号灯置为绿灯，让优先级最高的信号灯下对应的车辆通行，将优先级最高的信号灯记入该当前通行车辆的上次通过信号灯缓存，将同灯组中之前为绿灯的信号灯置为红灯。S221/2交叉路口同灯组单红灯有待行车辆处理步骤如果灯组中只有一个红灯下有待行车辆，矿井交通控制器将当前信号灯置为绿灯，让当前车辆通行，将当前信号灯记入当前车辆的上次通过信号灯缓存，将同灯组中之前为绿灯的信号灯置为红灯。S221/3所述交叉路口同灯组下不存在待行车辆处理步骤如果灯组中所有红灯下均没有待行车辆，矿井交通控制器将同灯组下所有为红灯的信号灯置为绿灯，等待车辆通行。S221交叉路口红灯非同灯组处理步骤为车辆进入灯组和车辆上次通行信号灯对应灯组不是同一灯组，说明车辆是从别的交叉路口行驶到当前交叉路口的，因此矿井交通控制器将当前车辆识别码记入当前信号灯的待行车辆缓存中。通过上述详细介绍可以看出，本发明的矿井下信号灯控制方法实现了矿井下信号灯的智能控制，具有逻辑简单、能适应多种路口类型，能满足矿井下路口不断拓展的需求的优点，降低矿井下信号灯管控难度，提高了信号灯控制精度，较大幅度提升了车辆通信效率和安全性。
