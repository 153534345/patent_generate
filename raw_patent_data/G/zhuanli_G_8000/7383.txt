标题title
一种软件定义的晶圆级交换系统设计方法及装置
摘要abst
本发明提供了一种软件定义的晶圆级交换系统设计方法及装置，包括：确定晶圆级交换系统布局约束；构建目标晶圆级交换系统并确定参数，设计交换网络逻辑拓扑结构；设计交换芯粒在晶圆基板上的布局；分别设计对外芯粒和内部芯粒接口结构；配置交换芯粒各端口交换模式与使能状态；当晶圆级交换系统可实现目标逻辑拓扑结构，则结束流程；否则，重新构造交换网络逻辑拓扑结构并将其映射到基板上。本发明基于集成电路制造工艺约束所能提供的物理拓扑结构固定的晶圆基板，通过软件定义混合交换机制的方式构建面向不同应用场景的高性能、大规模、拓扑结构灵活的晶圆级交换系统。
权利要求书clms
1.一种软件定义的晶圆级交换系统设计方法，其特征在于：所述晶圆级交换系统由晶圆基板与贴装在晶圆基板上的交换芯粒组成，所述交换芯粒包括对外芯粒和内部芯粒；所述设计方法包括如下步骤：S1、确定晶圆级交换系统布局约束；S2、构建目标晶圆级交换系统，确定目标晶圆级交换系统的参数，结合晶圆级交换系统布局约束设计交换网络逻辑拓扑结构；S3、根据晶圆级交换系统布局约束，将S2中的交换网络逻辑拓扑结构映射到晶圆基板上并根据映射情况设计交换芯粒在晶圆基板上的布局；S4、根据S2中的交换网络逻辑拓扑结构与S3中交换芯粒在晶圆基板上的布局分别设计交换芯粒的接口结构；S5、根据S2中的交换网络逻辑拓扑结构配置交换芯粒各端口的交换模式与使能状态；得到晶圆级交换系统；S6、判断晶圆级交换系统是否实现S2中的交换网络逻辑拓扑结构，若实现则结束流程；否则重新构造交换网络逻辑拓扑结构并返回步骤S3。2.如权利要求1所述的一种软件定义的晶圆级交换系统设计方法，其特征在于：所述晶圆级交换系统布局约束包括交换芯粒互连驱动能力、基板可贴装交换芯粒数目、交换芯粒之间的互连线长度约束、交换芯粒间距、晶圆基板尺寸、交换芯粒尺寸。3.如权利要求2所述的一种软件定义的晶圆级交换系统设计方法，其特征在于，步骤S1具体包括如下子步骤：S11、选取晶圆基板，交换芯粒，获取晶圆基板尺寸和交换芯粒尺寸以及交换芯粒互连驱动能力；S12、获取晶圆基板的贴装工艺限制，结合交换芯粒互连驱动能力，确定交换芯粒间距；S13、根据晶圆基板尺寸、交换芯粒尺寸和交换芯粒间距，计算基板可贴装交换芯粒数目；S14、根据芯粒互连驱动能力确定交换芯粒之间的互连线长度约束。4.如权利要求3所述的一种软件定义的晶圆级交换系统设计方法，其特征在于，步骤S2具体包括如下子步骤操作：S21、构建目标晶圆级交换系统，确定目标晶圆级交换系统的对外交换容量、跳数、延时、带宽需求以及对外芯粒的逻辑交换容量；S22、根据目标晶圆级交换系统的对外交换容量与对外芯粒的逻辑交换容量，计算所需的对外芯粒数目；S23、根据对外芯粒数目以及S13中的基板可贴装交换芯粒数目，计算内部芯粒数目；S24、根据目标晶圆级交换系统的跳数、延时、带宽需求设计交换网络逻辑拓扑结构；所述交换网络逻辑拓扑结构包括网格形拓扑、环形拓扑、树形拓扑和多集群构成的层级拓扑；S25、根据对外芯粒数目与内部芯粒数目设计所述交换网络逻辑拓扑结构维度、各维度芯粒数目及芯粒之间互连链路数目。5.如权利要求1所述的一种软件定义的晶圆级交换系统设计方法，其特征在于：步骤S3中设计交换芯粒在晶圆基板上的布局具体操作如下：所述对外芯粒部署在晶圆基板边缘，所述内部芯粒位于晶圆基板的中部，所述内部芯粒包括互连芯粒和内部交换芯粒，所述互连芯粒位于对外交换芯粒与内部交换芯粒之间。6.如权利要求5所述的一种软件定义的晶圆级交换系统设计方法，其特征在于：所述内部芯粒还包括中间芯粒，所述互连芯粒分别位于外部芯粒和中间芯粒之间、中间芯粒和内部交换芯粒之间。7.如权利要求1所述的一种软件定义的晶圆级交换系统设计方法，其特征在于，步骤S4设计交换芯粒的接口结构具体包括子步骤：S41、对外芯粒的对侧设有接口结构，一侧接口连接外部收发节点，另一侧接口用于连接内部芯粒；S42、内部芯粒的四侧设有接口结构，其中一个接口与对外芯粒或内部芯粒相连接，其余接口与其他内部芯粒互连。8.如权利要求1所述的一种软件定义的晶圆级交换系统设计方法，其特征在于，所述S5具体包括如下子步骤：S51、根据S2中的交换网络逻辑拓扑结构与交换芯粒在晶圆基板上的布局情况，判断交换芯粒端口的功能，所述功能包括用于实现芯粒互连、用于实现信号交换和不使用；S52、若端口用于实现芯粒互连，则端口使能状态为使能，交换模式为电路交换；若端口用于实现信号交换，则端口使能状态为使能，交换模式为包交换；若端口不使用，则端口使能状态为不使能，无需配置交换模式。9.如权利要求1所述的一种软件定义的晶圆级交换系统设计方法，其特征在于：所述步骤S6中晶圆级交换系统不可实现交换网络逻辑拓扑结构的情况包括晶圆级交换系统对外交换带宽不满足需求、各功能交换芯粒数目不符、交换芯粒之间连接带宽不满足需求。10.一种软件定义的晶圆级交换系统设计装置，其特征在于：包括存储器和一个或多个处理器，所述存储器中存储有可执行代码，所述一个或多个处理器执行所述可执行代码时，用于实现权利要求1-9任一项所述的一种软件定义的晶圆级交换系统设计方法。11.一种计算机可读存储介质，其特征在于：其上存储有程序，该程序被处理器执行时，实现权利要求1-9任一项所述的一种软件定义的晶圆级交换系统设计方法。
说明书desc
技术领域本发明涉及集成电路技术领域，特别涉及一种软件定义的晶圆级交换系统设计方法及装置。背景技术网络交换芯片是一种可用于信号转发的网络设备，可以为任意两个接入的收发节点提供通路。随着数据中心规模的飞速扩张、超级计算机的迅猛发展，对大容量的交换芯片需求也越来越大。现有的大容量网络交换芯片有博通公司的Tomahawk4、Marvell公司的Teralynx8、思科公司的Silicon One G100，其采用的均是7nm工艺，可提供25.6Tbps的交换容量。然而随着集成电路技术的发展，先进制程的物理极限和大规模集成芯片的良率极限导致摩尔定律逐渐失效，限制了网络交换芯片交换容量的进一步提升。为解决单芯片性能瓶颈，晶圆级集成技术成为后摩尔时代集成电路领域的研究热点，其利用晶圆基板来代替PCB，通过将未封装的裸片贴装到基板上大幅提升了芯片间的传输速率与能效，其中贴装的裸片又称为芯粒。不同于片上系统只能基于一个工艺节点制造，晶圆级集成技术中贴装的芯粒可以由不同工艺节点制造且具有异质异构特性；通过贴装多个小面积芯粒可实现晶圆级集成系统的性能扩展，打破了现有集成电路的设计方法与计算范式。得益于此，大规模晶圆级交换系统是突破数据中心、超级计算机交换容量瓶颈的有效手段。受限于晶圆基板加工过程中光罩面积大小及光罩一致性约束，晶圆基板只能为贴装的芯粒提供相同的物理互连结构，大大限制了晶圆级集成系统的功能与灵活性。例如加州大学洛杉矶分校的Subramanian S. Iyer教授团队搭建的晶圆级GPU系统，Tesla公司推出的面向自动驾驶的深度学习训练系统Dojo均采用网格型互连网络实现芯粒之间的互连通信。然而，网格型互连网络存在跳数过多、阻塞严重情况，并不适用于晶圆级交换系统；除此之外，面向不同应用场景，晶圆级交换系统应具备实现多逻辑拓扑结构的能力。发明内容本发明的目的在于提供一种软件定义的晶圆级交换系统设计方法及装置，以克服现有技术中的不足。为实现上述目的，本发明提供如下技术方案：本发明公开了一种软件定义的晶圆级交换系统设计方法，所述晶圆级交换系统由晶圆基板与贴装在晶圆基板上的交换芯粒组成，所述交换芯粒包括对外芯粒和内部芯粒；所述设计方法包括如下步骤：S1、确定晶圆级交换系统布局约束；S2、构建目标晶圆级交换系统，确定目标晶圆级交换系统的参数，结合晶圆级交换系统布局约束设计交换网络逻辑拓扑结构；S3、根据晶圆级交换系统布局约束，将S2中的交换网络逻辑拓扑结构映射到晶圆基板上并根据映射情况设计交换芯粒在晶圆基板上的布局；S4、根据S2中的交换网络逻辑拓扑结构与S3中交换芯粒在晶圆基板上的布局分别设计交换芯粒的接口结构；S5、根据S2中的交换网络逻辑拓扑结构配置交换芯粒各端口的交换模式与使能状态；得到晶圆级交换系统；S6、判断晶圆级交换系统是否实现S2中的交换网络逻辑拓扑结构，若实现则结束流程；否则重新构造交换网络逻辑拓扑结构并返回步骤S3。作为优选，所述晶圆级交换系统布局约束包括交换芯粒互连驱动能力、基板可贴装交换芯粒数目、交换芯粒之间的互连线长度约束、交换芯粒间距、晶圆基板尺寸、交换芯粒尺寸。作为优选，步骤S1具体包括如下子步骤：S11、选取晶圆基板，交换芯粒，获取晶圆基板尺寸和交换芯粒尺寸以及交换芯粒互连驱动能力；S12、获取晶圆基板的贴装工艺限制，结合交换芯粒互连驱动能力，确定交换芯粒间距；S13、根据晶圆基板尺寸、交换芯粒尺寸和交换芯粒间距，计算基板可贴装交换芯粒数目；S14、根据芯粒互连驱动能力确定交换芯粒之间的互连线长度约束。作为优选，步骤S2具体包括如下子步骤操作：S21、构建目标晶圆级交换系统，确定目标晶圆级交换系统的对外交换容量、跳数、延时、带宽需求以及对外芯粒的逻辑交换容量；S22、根据目标晶圆级交换系统的对外交换容量与对外芯粒的逻辑交换容量，计算所需的对外芯粒数目；S23、根据对外芯粒数目以及S13中的基板可贴装交换芯粒数目，计算内部芯粒数目；S24、根据目标晶圆级交换系统的跳数、延时、带宽需求设计交换网络逻辑拓扑结构；所述交换网络逻辑拓扑结构包括网格形拓扑、环形拓扑、树形拓扑和多集群构成的层级拓扑；S25、根据对外芯粒数目与内部芯粒数目设计所述交换网络逻辑拓扑结构维度、各维度芯粒数目及芯粒之间互连链路数目。作为优选，步骤S3中设计交换芯粒在晶圆基板上的布局具体操作如下：所述对外芯粒部署在晶圆基板边缘，所述内部芯粒位于晶圆基板的中部，所述内部芯粒包括互连芯粒和内部交换芯粒，所述互连芯粒位于对外交换芯粒与内部交换芯粒之间。作为优选，所述内部芯粒还包括中间芯粒，所述互连芯粒分别位于外部芯粒和中间芯粒之间、中间芯粒和内部交换芯粒之间。作为优选，步骤S4设计交换芯粒的接口结构具体包括子步骤：S41、对外芯粒的对侧设有接口结构，一侧接口连接外部收发节点，另一侧接口用于连接内部芯粒；S42、内部芯粒的四侧设有接口结构，其中一个接口与对外芯粒或内部芯粒相连接，其余接口与其他内部芯粒互连；作为优选，所述S5具体包括如下子步骤：S51、根据S2中的交换网络逻辑拓扑结构与交换芯粒在晶圆基板上的布局情况，判断交换芯粒端口的功能，所述功能包括用于实现芯粒互连、用于实现信号交换和不使用；S52、若端口用于实现芯粒互连，则端口使能状态为使能，交换模式为电路交换；若端口用于实现信号交换，则端口使能状态为使能，交换模式为包交换；若端口不使用，则端口使能状态为不使能，无需配置交换模式。作为优选，所述步骤S6中晶圆级交换系统不可实现交换网络逻辑拓扑结构的情况包括晶圆级交换系统对外交换带宽不满足需求、各功能交换芯粒数目不符、交换芯粒之间连接带宽不满足需求。本发明还公开了一种软件定义的晶圆级交换系统设计装置，包括存储器和一个或多个处理器，所述存储器中存储有可执行代码，所述一个或多个处理器执行所述可执行代码时，用于实现上述的一种软件定义的晶圆级交换系统设计方法。本发明还公开了一种计算机可读存储介质，其上存储有程序，该程序被处理器执行时，实现上述的一种软件定义的晶圆级交换系统设计方法。本发明的有益效果：1、本发明可基于特定的晶圆基板物理拓扑，通过软件定义方法配置不同交换芯粒端口的交换模式情况，实现晶圆级交换网络多类型、多层次逻辑拓扑构造，提升了晶圆级交换系统的灵活性。2、本发明解决了由于晶圆基板加工工艺约束带来的互连线长度、金属线层数限制，可实现不同规模的晶圆级交换网络，提升了晶圆交换系统的规模扩展能力与交换容量。3、本发明通过配置特定交换芯粒端口工作于电路交换模式，降低了由于交换芯粒包交换模式引入的传输延迟，提升了晶圆级交换系统的性能。本发明的特征及优点将通过实施例结合附图进行详细说明。附图说明图1 是本发明实施例的4英寸晶圆级交换系统布局约束图；图2 是本发明实施例的层级交换网络逻辑拓扑结构图；图3 是本发明一种软件定义的晶圆级交换系统设计方法的流程图；图4 是本发明实施例的晶圆级交换系统布局图图5 是本发明实施例的对外芯粒与内部芯粒接口结构图图6 是本发明实施例的基于混合交换机制的层级交换网络集群构造图图7 是本发明实施例的层级结构晶圆级交换网络端口配置图；图8是本发明一种软件定义的晶圆级交换系统设计装置的结构示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚明了，下面通过附图及实施例，对本发明进行进一步详细说明。但是应该理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限制本发明的范围。此外，在以下说明中，省略了对公知结构和技术的描述，以避免不必要地混淆本发明的概念。本发明一种软件定义的晶圆级交换系统设计方法，所述晶圆级交换系统由晶圆基板与贴装在晶圆基板上的交换芯粒组成，所述交换芯粒包括对外芯粒和内部芯粒；所述设计方法包括如下步骤：S1、确定晶圆级交换系统布局约束；S2、构建目标晶圆级交换系统，确定目标晶圆级交换系统的参数，结合晶圆级交换系统布局约束设计交换网络逻辑拓扑结构；S3、根据晶圆级交换系统布局约束，将S2中的交换网络逻辑拓扑结构映射到晶圆基板上并根据映射情况设计交换芯粒在晶圆基板上的布局；S4、根据S2中的交换网络逻辑拓扑结构与S3中交换芯粒在晶圆基板上的布局分别设计交换芯粒的接口结构；S5、根据S2中的交换网络逻辑拓扑结构配置交换芯粒各端口的交换模式与使能状态；得到晶圆级交换系统；S6、判断晶圆级交换系统是否实现S2中的交换网络逻辑拓扑结构，若实现则结束流程；否则重新构造交换网络逻辑拓扑结构并返回步骤S3。在一种可行的实施例中，所述晶圆级交换系统布局约束包括交换芯粒互连驱动能力、基板可贴装交换芯粒数目、交换芯粒之间的互连线长度约束、交换芯粒间距、晶圆基板尺寸、交换芯粒尺寸。在一种可行的实施例中，步骤S1具体包括如下子步骤：S11、选取晶圆基板，交换芯粒，获取晶圆基板尺寸和交换芯粒尺寸以及交换芯粒互连驱动能力；S12、获取晶圆基板的贴装工艺限制，结合交换芯粒互连驱动能力，确定交换芯粒间距；S13、根据晶圆基板尺寸、交换芯粒尺寸和交换芯粒间距，计算基板可贴装交换芯粒数目；S14、根据芯粒互连驱动能力确定交换芯粒之间的互连线长度约束。在一种可行的实施例中，步骤S2具体包括如下子步骤操作：S21、构建目标晶圆级交换系统，确定目标晶圆级交换系统的对外交换容量、跳数、延时、带宽需求以及对外芯粒的逻辑交换容量；S22、根据目标晶圆级交换系统的对外交换容量与对外芯粒的逻辑交换容量，计算所需的对外芯粒数目；S23、根据对外芯粒数目以及S13中的基板可贴装交换芯粒数目，计算内部芯粒数目；S24、根据目标晶圆级交换系统的跳数、延时、带宽需求设计交换网络逻辑拓扑结构；所述交换网络逻辑拓扑结构包括网格形拓扑、环形拓扑、树形拓扑和多集群构成的层级拓扑；S25、根据对外芯粒数目与内部芯粒数目设计所述交换网络逻辑拓扑结构维度、各维度芯粒数目及芯粒之间互连链路数目。在一种可行的实施例中，步骤S3中设计交换芯粒在晶圆基板上的布局具体操作如下：所述对外芯粒部署在晶圆基板边缘，所述内部芯粒位于晶圆基板的中部，所述内部芯粒包括互连芯粒和内部交换芯粒，所述互连芯粒位于对外交换芯粒与内部交换芯粒之间。在一种可行的实施例中，所述内部芯粒还包括中间芯粒，所述互连芯粒分别位于外部芯粒和中间芯粒之间、中间芯粒和内部交换芯粒之间。在一种可行的实施例中，步骤S4设计交换芯粒的接口结构具体包括子步骤：S41、对外芯粒的对侧设有接口结构，一侧接口连接外部收发节点，另一侧接口用于连接内部芯粒；S42、内部芯粒的四侧设有接口结构，其中一个接口与对外芯粒或内部芯粒相连接，其余接口与其他内部芯粒互连；在一种可行的实施例中，所述S5具体包括如下子步骤：S51、根据S2中的交换网络逻辑拓扑结构与交换芯粒在晶圆基板上的布局情况，判断交换芯粒端口的功能，所述功能包括用于实现芯粒互连、用于实现信号交换和不使用；S52、若端口用于实现芯粒互连，则端口使能状态为使能，交换模式为电路交换；若端口用于实现信号交换，则端口使能状态为使能，交换模式为包交换；若端口不使用，则端口使能状态为不使能，无需配置交换模式。在一种可行的实施例中，所述步骤S6中晶圆级交换系统不可实现交换网络逻辑拓扑结构的情况包括晶圆级交换系统对外交换带宽不满足需求、各功能交换芯粒数目不符、交换芯粒之间连接带宽不满足需求。本发明一种软件定义的晶圆级交换系统设计装置的实施例可以应用在任意具备数据处理能力的设备上，该任意具备数据处理能力的设备可以为诸如计算机等设备或装置。装置实施例可以通过软件实现，也可以通过硬件或者软硬件结合的方式实现。以软件实现为例，作为一个逻辑意义上的装置，是通过其所在任意具备数据处理能力的设备的处理器将非易失性存储器中对应的计算机程序指令读取到内存中运行形成的。从硬件层面而言，如图8所示，为本发明一种软件定义的晶圆级交换系统设计装置所在任意具备数据处理能力的设备的一种硬件结构图，除了图8所示的处理器、内存、网络接口、以及非易失性存储器之外，实施例中装置所在的任意具备数据处理能力的设备通常根据该任意具备数据处理能力的设备的实际功能，还可以包括其他硬件，对此不再赘述。上述装置中各个单元的功能和作用的实现过程具体详见上述方法中对应步骤的实现过程，在此不再赘述。对于装置实施例而言，由于其基本对应于方法实施例，所以相关之处参见方法实施例的部分说明即可。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本发明方案的目的。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。本发明实施例还提供一种计算机可读存储介质，其上存储有程序，该程序被处理器执行时，实现上述实施例中的一种软件定义的晶圆级交换系统设计方法。所述计算机可读存储介质可以是前述任一实施例所述的任意具备数据处理能力的设备的内部存储单元，例如硬盘或内存。所述计算机可读存储介质也可以是任意具备数据处理能力的设备的外部存储设备，例如所述设备上配备的插接式硬盘、智能存储卡、SD卡、闪存卡所示，交换芯粒对侧各包含4个端口，每个端口的速率为200Gbps，对外芯粒的交换容量为1.6Tbps；所述内部芯粒接口结构如图5中的所示，交换芯粒四周各包含4个端口，每个端口的速率为200Gbps，内部芯粒的交换容量为3.2Tbps。如图6所示为所述层级交换网络逻辑拓扑结构中集群构造流程，4个芯粒的各端口物理互连方式如图6中的所示，其中芯粒1、芯粒2为内部芯粒，芯粒3、芯粒4为对外芯粒。为实现所述层级逻辑拓扑中的集群结构，芯粒的各端口交换机制配置与使能状况如图6中的所示。其中芯粒1的8端口与12端口、7端口与11端口在芯粒内部配置为电路互连，芯粒2的2端口与5端口、1端口与6端口在芯粒内部配置为电路互连。在此基础上，将芯粒1的1-4端口，芯粒2的9-12端口分别配置为不使能状态，即图中的叉状态。除了上述端口外，其余端口均配置为包交换模式。由于电路交换的处理时间远快于包交换，因此在上述混合交换模式与使能状况配置情况下，可实现如图6中的所示的逻辑互连方式，即通过配置交换芯粒各端口的交换模式与使能状态可实现芯粒1与芯粒4、芯粒2与芯粒3的交叉互连结构，进而满足所述集群结构。在完成层级交换网络中集群构造后，可进一步依照上述流程对其余交换芯粒的端口交换模式与使能状况进行配置，得到如图7所示的48块芯粒的端口配置情况。其中芯粒内部的互连线表示对应端口配置于电路交换模式，芯粒间互连线的叉表示对应端口不使能，未做其他标注的端口表示配置于包交换模式。基于图7的芯粒端口配置情况，可实现如图2所示的层级交换网络逻辑拓扑结构。本发明提供的软件定义晶圆级交换系统设计方法，面向现有多工艺约束、物理拓扑固定的晶圆基板，通过软件定义的方法实现晶圆级交换网络多类型、多层次逻辑拓扑构造，提升了晶圆级交换系统的灵活性。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换或改进等，均应包含在本发明的保护范围之内。
