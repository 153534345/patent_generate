标题title
一种自适应分配计算资源的方法和系统
摘要abst
一种自适应分配计算资源的方法和系统，涉及计算机技术领域，包括如下步骤：预测必要任务的预测计算资源；根据预测计算资源预留必要任务的预留计算资源；当任务队列开始执行必要任务时，将预留计算资源的第一部分分配给开始执行的必要任务，当执行的必要任务出现突发峰值时，将预留计算资源的第二部分分配给该必要任务；将所述预留计算资源之外的额外计算资源分配给训练模型；通过对必要任务进行计算资源的预测及预留，在保证必要任务能够有足够的计算资源使用的情况下，使剩余的计算资源能够分配给训练模型用于进行训练，提高了本地配备特有的机器学习的设备的使用频度，避免了机器学习的训练模型使用频度低从而造成的投资浪费。
权利要求书clms
1.一种自适应分配计算资源的方法，其特征在于，包括如下步骤：预测必要任务的预测计算资源；根据预测计算资源预留必要任务的预留计算资源；当任务队列开始执行必要任务时，将预留计算资源的第一部分分配给开始执行的必要任务；当执行的必要任务出现突发峰值时，将预留计算资源的第二部分分配给该必要任务；将所述预留计算资源之外的额外计算资源分配给训练模型。2.根据权利要求1所述的一种自适应分配计算资源的方法，其特征在于，所述预测必要任务的预测计算资源包括：周期性采集必要任务使用的计算资源的数据；对采集的所述数据进行统计计算，根据统计计算对所述预测计算资源做下一个周期的预测，所述统计计算包括均值、标准差和数据波动值中的至少一项。3.根据权利要求2所述的一种自适应分配计算资源的方法，其特征在于，所述预测必要任务的预测计算资源还包括：采集必要任务的计算资源的历史数据；基于所述额外计算资源和所述历史数据构建所述预测计算资源的训练任务；基于所述训练任务训练，获得所述预测计算资源的预测模型并预测所述必要任务的预测计算资源。4.根据权利要求3所述的一种自适应分配计算资源的方法，其特征在于，所述基于所述额外计算资源和所述历史数据构建所述预测计算资源的训练任务包括：将对所述历史数据的训练任务分割为多个子任务，每个所述子任务所需的计算资源与所述额外计算资源相适配。5.根据权利要求4所述的一种自适应分配计算资源的方法，其特征在于，包括：所述将预留计算资源的第二部分分配给该必要任务包括：将必要任务的突发峰值的部分分割成小任务，基于小任务优先原则，将预留计算资源的第二部分分配给所述小任务。6.一种自适应分配计算资源的系统，其特征在于，包括预测模块和分配模块；所述预测模块用于预测必要任务的预测计算资源；所述分配模块包括计算资源预留单元和第一分配执行单元、第二分配执行单元和第三分配执行单元；其中，计算资源预留单元用于根据预测计算资源预留必要任务的预留计算资源，所述预留计算资源包括第一部分和第二部分，所述第一分配执行单元用于当任务队列开始执行必要任务时，将预留计算资源的第一部分分配给开始执行的必要任务，所述第二分配执行单元用于当执行的必要任务出现突发峰值时，将预留计算资源的第二部分分配给该必要任务；所述第三分配执行单元用于将所述预留计算资源之外的额外计算资源分配给训练模型。7.根据权利要求6所述的一种自适应分配计算资源的系统，其特征在于，所述预测模块包括第一预测单元，所述第一预测单元用于周期性采集必要任务使用的计算资源的数据；对采集的所述数据进行统计计算，根据统计计算对所述预测计算资源做下一个周期的预测，所述统计计算包括均值、标准差和数据波动值中的至少一项。8.根据权利要求7所述的一种自适应分配计算资源的系统，其特征在于，所述预测模块还包括第二预测单元，所述第二预测单元用于采集必要任务的计算资源的历史数据；基于所述额外计算资源和所述历史数据构建所述预测计算资源的训练任务；基于所述训练任务训练，获得所述预测计算资源的预测模型并预测所述必要任务的预测计算资源。9.根据权利要求8所述的一种自适应分配计算资源的系统，其特征在于，所述基于所述额外计算资源和所述历史数据构建所述预测计算资源的训练任务包括：将所述训练任务分割为多个子任务，每个所述子任务所需的计算资源与所述额外计算资源相适配。10.根据权利要求9所述的一种自适应分配计算资源的系统，其特征在于，所述将预留计算资源的第二部分分配给该必要任务包括：将必要任务的突发峰值的部分分割成小任务，基于小任务优先原则，将预留计算资源的第二部分分配给所述小任务。
说明书desc
技术领域本申请涉及计算机技术领域，具体涉及一种自适应分配计算资源的方法和系统。背景技术在工控生产场景中，有机器学习等引擎，来甄别局域网内恶意或者非常的网络流量，因此需要一定的算力进行机器学习的训练。因为数字安全的原因，工控生成现场通常没有外网连接，没法使用云端的计算资源，而使用本地计算资源又会造成与其他任务造成冲突，这样就造成在本地配备特有的机器学习的设备，使用频度不高，会造成巨大的投资浪费。发明内容申请目的有鉴于此，本申请的目的在于提供一种自适应分配计算资源的方法和系统，用于解决现有技术中使用本地计算资源又会造成与其他任务造成冲突，造成在本地配备特有的机器学习的设备，使用频度不高，会造成巨大的投资浪费的技术问题。技术方案本申请公开了一种自适应分配计算资源的方法，包括如下步骤：包括如下步骤：预测必要任务的预测计算资源；根据预测计算资源预留必要任务的预留计算资源；当任务队列开始执行必要任务时，将预留计算资源的第一部分分配给开始执行的必要任务；当执行的必要任务出现突发峰值时，将预留计算资源的第二部分分配给该必要任务；将所述预留计算资源之外的额外计算资源分配给训练模型。在一种可能的实施方式中，所述预测必要任务的预测计算资源包括：周期性采集必要任务使用的计算资源的数据；对采集的所述数据进行统计计算，根据统计计算对所述预测计算资源做下一个周期的预测，所述统计计算包括均值、标准差和数据波动值中的至少一项。在一种可能的实施方式中，所述预测必要任务的预测计算资源还包括：采集必要任务的计算资源的历史数据；基于所述额外计算资源和所述历史数据构建所述预测计算资源的训练任务；基于所述训练任务训练，获得所述预测计算资源的预测模型并预测所述必要任务的预测计算资源。在一种可能的实施方式中，所述构建所述预测计算资源的训练任务包括：将所述训练任务分割为多个子任务，每个所述子任务所需的计算资源与所述额外计算资源相适配。在一种可能的实施方式中，所述将预留计算资源的第二部分分配给该必要任务包括：将必要任务的突发峰值的部分分割成小任务，基于小任务优先原则，将预留计算资源的第二部分分配给所述小任务。作为本申请的第二方面，还提供了一种自适应分配计算资源的系统，包括包括预测模块和分配模块；所述预测模块用于预测必要任务的预测计算资源；所述分配模块包括计算资源预留单元和第一分配执行单元、第二分配执行单元、第三分配执行单元；其中，计算资源预留单元用于根据预测计算资源预留必要任务的预留计算资源，所述预留计算资源包括第一部分和第二部分，所述第一分配执行单元用于当任务队列开始执行必要任务时，将预留计算资源的第一部分分配给开始执行的必要任务，所述第二分配执行单元用于当执行的必要任务出现突发峰值时，将预留计算资源的第二部分分配给该必要任务；所述第三分配执行单元用于将所述预留计算资源之外的额外计算资源分配给训练模型。在一种可能的实施方式中，所述预测模块包括第一预测单元，所述第一预测单元用于周期性采集必要任务使用的计算资源的数据；对采集的所述数据进行统计计算，根据统计计算对所述预测计算资源做下一个周期的预测，所述统计计算包括均值、标准差和数据波动值中的至少一项。在一种可能的实施方式中，所述预测模块还包括第二预测单元，所述第二预测单元用于采集必要任务的计算资源的历史数据；基于所述额外计算资源和所述历史数据构建所述预测计算资源的训练任务；基于所述训练任务训练，获得所述预测计算资源的预测模型并预测所述必要任务的预测计算资源。在一种可能的实施方式中，所述构建所述预测计算资源的训练任务包括：将所述训练任务分割为多个子任务，每个所述子任务所需的计算资源与所述额外计算资源相适配。在一种可能的实施方式中，所述将预留计算资源的第二部分分配给该必要任务包括：将必要任务的突发峰值的部分分割成小任务，基于小任务优先原则，将预留计算资源的第二部分分配给所述小任务。有益效果通过对必要任务进行计算资源的预测及预留，在保证必要任务能够有足够的计算资源使用的情况下，使剩余的计算资源能够分配给训练模型用于进行训练，提高了本地配备特有的机器学习的设备的使用频度，避免了机器学习的训练模型使用频度低从而造成的投资浪费；设置第一部分和第二部分计算资源，能够避免执行的任务出现突发峰值状态导致计算资源不足，造成执行的任务不能执行。本申请的其他优点、目标和特征在某种程度上将在随后的说明书中进行阐述，并且在某种程度上，基于对下文的考察研究对本领域技术人员而言将是显而易见的，或者可以从本申请的实践中得到教导。本申请的目标和其他优点可以通过下面的说明书来实现和获得。附图说明以下参考附图描述的实施例是示例性的，旨在用于解释和说明本申请，而不能理解为对本申请的保护范围的限制。图1是本申请系统流程图；图2是本申请系统结构图；其中：1、预测模块；2、分配模块；11、第一预测单元；12、第二预测单元；21、计算资源预留模块；22、第一分配执行单元；23、第二分配执行单元；24、第三分配执行单元。具体实施方式为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本申请实施例的组件可以以各种不同的分配来布置和设计。因此，以下对在附图中提供的本申请的实施例的详细描述并非旨在限制要求保护的本申请的范围，而是仅仅表示本申请的选定实施例。基于本申请中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。应注意到：相似的标号和字母在下面的附图中表示类似项，因此，一旦某一项在一个附图中被定义，则在随后的附图中不需要对其进行进一步定义和解释。在本申请的上述描述中，需要说明的是，术语“一侧”、“另一侧”等指示的方位或位置关系为基于附图所示的方位或位置关系，或者是该申请产品使用时惯常摆放的方位或位置关系，仅是为了便于描述本申请和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本申请的限制。此外，术语“第一”、“第二”等仅用于区分描述，而不能理解为指示或暗示相对重要性。此外，术语“相同”等术语并不表示要求部件绝对相同，而是可以存在微小的差异。术语“垂直”仅仅是指部件之间的位置关系相对“平行”而言更加垂直，并不是表示该结构一定要完全垂直，而是可以稍微倾斜。如图1所示，本实施例提供了一种自适应分配计算资源的方法，包括如下步骤：预测必要任务的预测计算资源；根据预测计算资源预留必要任务的预留计算资源；当任务队列开始执行必要任务时，将预留计算资源的第一部分分配给开始执行的必要任务，当执行的必要任务出现突发峰值时，将预留计算资源的第二部分分配给该必要任务，其中，预留计算资源的第一部分是对必要任务的基本预测值，基本预测值是对执行必要任务实际需要的计算资源的预测，第一部分则为在第一部分的值进行上浮，上浮为20%；将预留计算资源的第二部分分配给该必要任务具体为：将必要任务的突发峰值的部分分割成小任务，基于小任务优先原则，将预留计算资源的第二部分分配给所述小任务；将预留的所述预留计算资源之外的额外计算资源分配给训练模型。其中，所述额外计算资源为：将所有的计算资源，减去运行所用的资源，再减去预留计算资源，就得到额外计算资源。所述预测必要任务的预测计算资源包括：周期性采集必要任务使用的计算资源的数据；对采集的所述数据进行统计计算，根据统计计算对所述预测计算资源做下一个周期的预测，所述统计计算包括均值、标准差和数据波动值中的至少一项。采用均值、标准差和数据波动值来统计计算计算资源占用计算资源量小，但采用对数据统计来预测能够能够初步得到必要任务较大范围的计算资源，只保证了必要任务的计算资源不会被亏待，并不能精确反映出必要计算资源的使用具体的规律，因此需要对必要任务的计算资源预测进行重构，使其在计算资源不会被亏待的情况下释放更多所述其他计算资源。因此，所述预测必要任务的预测计算资源还包括：基于额外计算资源对必要任务的预测计算资源进行训练，具体为：采集必要任务的计算资源的历史数据；基于所述额外计算资源和所述历史数据构建所述预测计算资源的训练任务；基于所述训练任务训练，获得所述预测计算资源的预测模型并预测所述必要任务的预测计算资源；具体为：将必要任务的历史计算资源数据转换为二元组为的时序数据，其中x代表必要任务历史计算资源变量，t代表时间变量，表示采集必要任务历史计算资源的时间点；将对所述历史数据的训练任务分割为多个子任务，每个所述子任务所需的计算资源与所述额外计算资源相适配，能够在分配的计算资源内完成多个子任务中的其中一个或多个，这样避免训练任务需要的计算资源大于分配的计算资源时造成训练任务长期占有任务队列并占有计算资源从而延时必要任务的执行，而且整体可以缩短处理时间提升计算资源的使用效率；对训练获取的权重矩阵通过聚类进行压缩。生成的预测模型对必要任务的预测计算资源的预测方法进行重构，区别于采用统计计算来预测，使对预测必要任务的预测计算资源更加准确的同时使计算资源能够更加优化。通过对必要任务进行计算资源的预测及预留，在保证必要任务能够有足够的计算资源使用的情况下，使剩余的计算资源能够分配给训练模型用于进行训练，提高了本地配备特有的机器学习的设备的使用频度，避免了机器学习的训练模型使用频度低从而造成的投资浪费；设置第一部分和第二部分计算资源，能够避免执行的任务出现突发峰值状态导致计算资源不足，造成执行的任务不能执行。如图2所示，本实施例还提供了一种自适应分配计算资源的系统，包括：包括预测模块1和分配模块2；所述预测模块用于预测必要任务的预测计算资源；所述分配模块包括计算资源预留单元21和第一分配执行单元22、第二分配执行单元23、第三分配执行单元24；其中，计算资源预留单元用于根据预测计算资源预留必要任务的预留计算资源，所述预留计算资源包括第一部分和第二部分，所述第一分配执行单元用于当任务队列开始执行必要任务时，将预留计算资源的第一部分分配给开始执行的必要任务，所述第二分配执行单元用于当执行的必要任务出现突发峰值时，将预留计算资源的第二部分分配给该必要任务，具体为：将必要任务的突发峰值的部分分割成小任务，基于小任务优先原则，将预留计算资源的第二部分分配给所述小任务；所述第三分配执行单元用于将预留的所述预留计算资源之外的额外计算资源分配给训练模型。其中，所述额外计算资源为：将所有的计算资源，减去运行所用的资源，再减去预留计算资源，就得到额外计算资源。所述预测模块包括第一预测单元11，所述第一预测单元用于周期性采集必要任务使用的计算资源的数据；对采集的所述数据进行统计计算，根据统计计算对所述预测计算资源做下一个周期的预测，所述统计计算包括均值、标准差和数据波动值中的至少一项。采用均值、标准差和数据波动值来统计计算计算资源占用计算资源量小，但采用对数据统计来预测能够能够初步得到必要任务较大范围的计算资源，只保证了必要任务的计算资源不会被亏待，并不能精确反映出必要计算资源的使用具体的规律，因此需要对必要任务的计算资源预测进行重构，使其在计算资源不会被亏待的情况下释放更多所述其他计算资源。因此，所述预测模块还包括第二预测单元12，所述第二预测单元用于基于额外计算资源对必要任务的预测计算资源进行训练，具体为：采集必要任务的计算资源的历史数据；基于所述额外计算资源和所述历史数据构建所述预测计算资源的训练任务；基于所述训练任务训练，获得所述预测计算资源的预测模型并预测所述必要任务的预测计算资源。基于所述训练任务训练，获得所述预测计算资源的预测模型并预测所述必要任务的预测计算资源；具体为：将必要任务的历史计算资源数据转换为二元组为的时序数据，其中x代表必要任务历史计算资源变量，t代表时间变量，表示采集必要任务历史计算资源的时间点；将对所述历史数据的训练任务分割为多个子任务，每个所述子任务所需的计算资源与所述额外计算资源相适配，能够在分配的计算资源内完成多个子任务中的其中一个或多个，这样避免训练任务需要的计算资源大于分配的计算资源时造成训练任务长期占有任务队列并占有计算资源从而延时必要任务的执行，而且整体可以缩短处理时间提升计算资源的使用效率；对训练获取的权重矩阵通过聚类进行压缩。生成的预测模型对必要任务的预测计算资源的预测方法进行重构，区别于采用统计计算来预测，使对预测必要任务的预测计算资源更加准确的同时使计算资源能够更加优化。通过对必要任务进行计算资源的预测及预留，在保证必要任务能够有足够的计算资源使用的情况下，使剩余的计算资源能够分配给训练模型用于进行训练，提高了本地配备特有的机器学习的设备的使用频度，避免了机器学习的训练模型使用频度低从而造成的投资浪费；设置第一部分和第二部分计算资源，能够避免执行的任务出现突发峰值状态导致计算资源不足，造成执行的任务不能执行。最后说明的是，以上实施例仅用以说明本申请的技术方案而非限制，尽管参照较佳实施例对本申请进行了详细说明，本领域的普通技术人员应当理解，可以对本申请的技术方案进行修改或者等同替换，而不脱离本申请技术方案的宗旨和范围，其均应涵盖在本申请的权利要求范围当中。
