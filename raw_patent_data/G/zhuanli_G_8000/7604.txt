标题title
一种硅谐振压力传感器的动态补偿方法
摘要abst
本发明公开了一种硅谐振压力传感器的动态补偿方法，本发明通过静态标定找到压力频率和温度频率与静态压力数据之间的静态标定参数，再通过动态标定，得到动态温度频率和动态压力频率；再通过样本标签与动态温度频率对时间序列预测模型进行训练，找到样本标签与动态温度频率间的对应参数关系，从而计算出校准温度频率，通过校准温度频率和静态标定参数去计算压力，作为硅谐振压力传感器的动态补偿后的压力，以解决硅谐振压力传感器压力值不准确的问题。
权利要求书clms
1.一种硅谐振压力传感器的动态补偿方法，其特征在于，包括以下步骤：S1、对硅谐振压力传感器进行静态标定，得到静态标定参数、平均温度频率和标准化后的压力频率；S2、对硅谐振压力传感器进行动态标定，得到动态温度频率和动态压力频率；S3、根据静态标定的平均温度频率、标准化后的压力频率和动态标定的动态压力频率，构建样本标签；S4、采用样本标签和动态标定的动态温度频率对时间序列预测模型进行训练，得到训练完成的时间序列预测模型；S5、采用训练完成的时间序列预测模型计算校准温度频率；S6、根据校准温度频率、静态标定参数和标准化后的压力频率，计算硅谐振压力传感器的动态补偿后的压力。2.根据权利要求1所述的硅谐振压力传感器的动态补偿方法，其特征在于，所述步骤S1包括以下分步骤：S11、在硅谐振压力传感器的全温范围内，选取多个温度标定点；S12、在硅谐振压力传感器的全压范围内，选取多个压力标定点；S13、在压力标定点和温度标定点下采集硅谐振压力传感器的静态四路温度频率、静态压力频率和静态压力数据；S14、对静态四路温度频率取均值，得到平均温度频率；S15、对平均温度频率和静态压力频率进行标准化处理，得到标准化后的温度频率和压力频率；S16、根据标准化后的温度频率、标准化后的压力频率和静态压力数据，构建第一压力温度模型；S17、采用最小二乘法对第一压力温度模型进行求解，得到静态标定参数。3.根据权利要求2所述的硅谐振压力传感器的动态补偿方法，其特征在于，所述步骤S14中平均温度频率的计算公式为：其中，为第个温度标定点下第个压力标定点的平均温度频率，为第个温度标定点下第个压力标定点的静态第一路温度频率，为第个温度标定点下第个压力标定点的静态第二路温度频率，为第个温度标定点下第个压力标定点的静态第三路温度频率，为第个温度标定点下第个压力标定点的静态第四路温度频率。4.根据权利要求2所述的硅谐振压力传感器的动态补偿方法，其特征在于，所述步骤S15中标准化后的温度频率的计算公式为：其中，为第个温度标定点下第个压力标定点所对应的标准化后的温度频率，为第个温度标定点下第个压力标定点的平均温度频率，为个平均温度频率的均值，为个平均温度频率的标准差，为温度标定点或压力标定点的数量；所述步骤S15中标准化后的压力频率的计算公式为：其中，为第个温度标定点下第个压力标定点所对应的标准化后的压力频率，为第个温度标定点下第个压力标定点的静态压力频率，为个静态压力频率的均值，为个静态压力频率的标准差。5.根据权利要求2所述的硅谐振压力传感器的动态补偿方法，其特征在于，所述步骤S16中第一压力温度模型为：其中，为第个温度标定点下第个压力标定点的静态压力数据，为第个温度标定点下第个压力标定点所对应的标准化后的压力频率，为第个温度标定点下第个压力标定点所对应的标准化后的温度频率，和均为计数小标，为第个静态标定参数。6.根据权利要求1所述的硅谐振压力传感器的动态补偿方法，其特征在于，所述步骤S2具体为：在随机变化的温度条件下，采集多个压力标定点下连续多次的硅谐振压力传感器的动态温度频率和动态压力频率。7.根据权利要求1所述的硅谐振压力传感器的动态补偿方法，其特征在于，所述步骤S3包括以下分步骤：S31、根据静态标定过程中的标准化后的压力频率和平均温度频率，构建第二温度压力模型；S32、采用最小二乘法对第二温度压力模型进行求解，得到温度压力系数；S33、根据温度压力系数和动态标定的动态压力频率，得到样本标签。8.根据权利要求7所述的硅谐振压力传感器的动态补偿方法，其特征在于，所述步骤S32中第二温度压力模型为：其中，为第个温度标定点下第个压力标定点的平均温度频率，为第个温度标定点下第个压力标定点所对应的标准化后的压力频率，、和为温度压力系数；所述步骤S33中样本标签公式为：其中，为第个压力标定点下第次采集所对应的样本标签，、和为温度压力系数，为第个压力标定点下第次采集的硅谐振压力传感器的动态压力频率。9.根据权利要求1所述的硅谐振压力传感器的动态补偿方法，其特征在于，所述步骤S4包括以下分步骤：S41、构建时间序列预测模型，得到样本标签的预测值：其中，为样本标签的预测值，为时间序列预测模型找到参数间对应关系的函数，其函数括号内的参数为第个压力标定点下多次采集的动态温度频率，为第路第个压力标定点下第次采集的动态温度频率，为第路第个压力标定点下第次采集的动态温度频率，为第路第个压力标定点下第次采集的动态温度频率，；S42、构建代价函数，度量预测值与样本标签差值，其中，代价函数为：其中，为代价函数，为L2范数；S43、将样本标签和动态温度频率输入时间序列预测模型，使得预测值与样本标签差值最小，得到训练完成的时间序列预测模型。10.根据权利要求1所述的硅谐振压力传感器的动态补偿方法，其特征在于，所述步骤S6中计算硅谐振压力传感器的动态补偿后的压力的公式为：其中，为硅谐振压力传感器的动态补偿后的压力，为校准温度频率，为第个温度标定点下第个压力标定点所对应的标准化后的压力频率，和均为计数小标，为第个静态标定参数。
说明书desc
技术领域本发明涉及压力传感器的压力补偿方法，具体涉及一种硅谐振压力传感器的动态补偿方法。背景技术高精度硅谐振压力传感器是飞行器大气数据系统核心压力传感器，它将外界感知的压力信号转化为数字信号，经过大气数据计算机的解算，传递给飞行器的飞控系统，作为重要的控制信号，因此硅谐振压力传感器的性能指标直接影响着飞行器的安全。硅谐振压力传感器的压力频率不仅取决于被测环境的工作压力，还受到周围环境温度的影响，其需要将感受到的外界压力和温度转化为两路电信号，通过后端驱动检测和拟合公式计算得到准确的压力值。目前大多数硅谐振压力传感器通过在管壳内外接温度二极管，在不同温度下采集二极管的输出信号来表征硅谐振MEMS芯片的工作温度。但是，由于温度二极管与硅谐振MEMS芯片存在空间差异，导致温度二极管无法实时反映硅谐振MEMS芯片的工作温度，从而使得硅谐振压力传感器存在温度跟随性问题，进一步导致拟合得到的压力值不精确。发明内容针对现有技术中的上述不足，本发明提供的一种硅谐振压力传感器的动态补偿方法解决了现有硅谐振压力传感器在管壳内外接温度二极管，但温度二极管与硅谐振MEMS芯片存在空间差异，无法实时反映硅谐振MEMS芯片的工作温度，导致硅谐振压力传感器压力值不准确的问题。为了达到上述发明目的，本发明采用的技术方案为：一种硅谐振压力传感器的动态补偿方法，包括以下步骤：S1、对硅谐振压力传感器进行静态标定，得到静态标定参数、平均温度频率和标准化后的压力频率；S2、对硅谐振压力传感器进行动态标定，得到动态温度频率和动态压力频率；S3、根据静态标定的平均温度频率、标准化后的压力频率和动态标定的动态压力频率，构建样本标签；S4、采用样本标签和动态标定的动态温度频率对时间序列预测模型进行训练，得到训练完成的时间序列预测模型；S5、采用训练完成的时间序列预测模型计算校准温度频率；S6、根据校准温度频率、静态标定参数和标准化后的压力频率，计算硅谐振压力传感器的动态补偿后的压力。进一步地，所述步骤S1包括以下分步骤：S11、在硅谐振压力传感器的全温范围内，选取多个温度标定点；S12、在硅谐振压力传感器的全压范围内，选取多个压力标定点；S13、在压力标定点和温度标定点下采集硅谐振压力传感器的静态四路温度频率、静态压力频率和静态压力数据；S14、对静态四路温度频率取均值，得到平均温度频率；S15、对平均温度频率和静态压力频率进行标准化处理，得到标准化后的温度频率和压力频率；S16、根据标准化后的温度频率、标准化后的压力频率和静态压力数据，构建第一压力温度模型；S17、采用最小二乘法对第一压力温度模型进行求解，得到静态标定参数。进一步地，所述步骤S14中平均温度频率的计算公式为：其中，为第个温度标定点下第个压力标定点的平均温度频率，为第个温度标定点下第个压力标定点的静态第一路温度频率，为第个温度标定点下第个压力标定点的静态第二路温度频率，为第个温度标定点下第个压力标定点的静态第三路温度频率，为第个温度标定点下第个压力标定点的静态第四路温度频率。进一步地，所述步骤S15中标准化后的温度频率的计算公式为：其中，为第个温度标定点下第个压力标定点所对应的标准化后的温度频率，为第个温度标定点下第个压力标定点的平均温度频率，为个平均温度频率的均值，为个平均温度频率的标准差，为温度标定点或压力标定点的数量；所述步骤S15中标准化后的压力频率的计算公式为：其中，为第个温度标定点下第个压力标定点所对应的标准化后的压力频率，为第个温度标定点下第个压力标定点的静态压力频率，为个静态压力频率的均值，为个静态压力频率的标准差。进一步地，所述步骤S16中第一压力温度模型为：其中，为第个温度标定点下第个压力标定点的静态压力数据，为第个温度标定点下第个压力标定点所对应的标准化后的压力频率，为第个温度标定点下第个压力标定点所对应的标准化后的温度频率，和均为计数小标，为第个静态标定参数。进一步地，所述步骤S2具体为：在随机变化的温度条件下，采集多个压力标定点下连续多次的硅谐振压力传感器的动态温度频率和动态压力频率。进一步地，所述步骤S3包括以下分步骤：S31、根据静态标定过程中的标准化后的压力频率和平均温度频率，构建第二温度压力模型；S32、采用最小二乘法对第二温度压力模型进行求解，得到温度压力系数；S33、根据温度压力系数和动态标定的动态压力频率，得到样本标签。进一步地，所述步骤S32中第二温度压力模型为：其中，为第个温度标定点下第个压力标定点的平均温度频率，为第个温度标定点下第个压力标定点所对应的标准化后的压力频率，、和为温度压力系数；所述步骤S33中样本标签公式为：其中，为第个压力标定点下第次采集所对应的样本标签，、和为温度压力系数，为第个压力标定点下第次采集的硅谐振压力传感器的动态压力频率。进一步地，所述步骤S4包括以下分步骤：S41、构建时间序列预测模型，得到样本标签的预测值：其中，为样本标签的预测值，为时间序列预测模型找到参数间对应关系的函数，其函数括号内的参数为第个压力标定点下多次采集的动态温度频率，为第路第个压力标定点下第次采集的动态温度频率，为第路第个压力标定点下第次采集的动态温度频率，为第路第个压力标定点下第次采集的动态温度频率，；S42、构建代价函数，度量预测值与样本标签差值，其中，代价函数为：其中，为代价函数，为L2范数；S43、将样本标签和动态温度频率输入时间序列预测模型，使得预测值与样本标签差值最小，得到训练完成的时间序列预测模型。进一步地，所述步骤S6中计算硅谐振压力传感器的动态补偿后的压力的公式为：其中，为硅谐振压力传感器的动态补偿后的压力，为校准温度频率，为第个温度标定点下第个压力标定点所对应的标准化后的压力频率，和均为计数小标，为第个静态标定参数。综上，本发明的有益效果为：本发明通过静态标定找到压力频率和温度频率与静态压力数据之间的静态标定参数，再通过动态标定，得到动态温度频率和动态压力频率；再通过样本标签与动态温度频率对时间序列预测模型进行训练，找到样本标签与动态温度频率间的对应参数关系，从而计算出校准温度频率，通过校准温度频率和静态标定参数去计算压力，作为硅谐振压力传感器的动态补偿后的压力，以解决硅谐振压力传感器压力值不准确的问题。附图说明图1为一种硅谐振压力传感器的动态补偿方法的流程图。具体实施方式下面对本发明的具体实施方式进行描述，以便于本技术领域的技术人员理解本发明，但应该清楚，本发明不限于具体实施方式的范围，对本技术领域的普通技术人员来讲，只要各种变化在所附的权利要求限定和确定的本发明的精神和范围内，这些变化是显而易见的，一切利用本发明构思的发明创造均在保护之列。本发明针对因外接温度二极管，而导致硅谐振传感器存在的温度跟随性问题，提供一种动态补偿方法。基于外置温度传感器阵列，通过静态标定找到压力频率和温度频率与静态压力数据之间的静态标定参数，再通过动态标定，得到动态温度频率和动态压力频率；再通过样本标签与动态温度频率对时间序列预测模型进行训练，找到样本标签与动态温度频率间的对应参数关系，从而计算出校准温度频率，通过校准温度频率和静态标定参数去计算压力，作为硅谐振压力传感器的动态补偿后的压力，以解决硅谐振压力传感器压力值不准确的问题。如图1所示，一种硅谐振压力传感器的动态补偿方法，包括以下步骤：S1、对硅谐振压力传感器进行静态标定，得到静态标定参数、平均温度频率和标准化后的压力频率；在本实施例中，步骤S1采用外置温度传感器阵列对硅谐振压力传感器进行静态标定。所述步骤S1包括以下分步骤：S11、在硅谐振压力传感器的全温范围内，选取多个温度标定点；在本实施例中，全温范围为。S12、在硅谐振压力传感器的全压范围内，选取多个压力标定点；在本实施例中，全压范围为。S13、在压力标定点和温度标定点下采集硅谐振压力传感器的静态四路温度频率、静态压力频率和静态压力数据；S14、对静态四路温度频率取均值，得到平均温度频率；所述步骤S14中平均温度频率的计算公式为：其中，为第个温度标定点下第个压力标定点的平均温度频率，为第个温度标定点下第个压力标定点的静态第一路温度频率，为第个温度标定点下第个压力标定点的静态第二路温度频率，为第个温度标定点下第个压力标定点的静态第三路温度频率，为第个温度标定点下第个压力标定点的静态第四路温度频率。S15、对平均温度频率和静态压力频率进行标准化处理，得到标准化后的温度频率和压力频率；所述步骤S15中标准化后的温度频率的计算公式为：其中，为第个温度标定点下第个压力标定点所对应的标准化后的温度频率，为第个温度标定点下第个压力标定点的平均温度频率，为个平均温度频率的均值，为个平均温度频率的标准差，为温度标定点或压力标定点的数量；所述步骤S15中标准化后的压力频率的计算公式为：其中，为第个温度标定点下第个压力标定点所对应的标准化后的压力频率，为第个温度标定点下第个压力标定点的静态压力频率，为个静态压力频率的均值，为个静态压力频率的标准差。S16、根据标准化后的温度频率、标准化后的压力频率和静态压力数据，构建第一压力温度模型；所述步骤S16中第一压力温度模型为：其中，为第个温度标定点下第个压力标定点的静态压力数据，为第个温度标定点下第个压力标定点所对应的标准化后的压力频率，为第个温度标定点下第个压力标定点所对应的标准化后的温度频率，和均为计数小标，为第个静态标定参数。S17、采用最小二乘法对第一压力温度模型进行求解，得到静态标定参数。S2、对硅谐振压力传感器进行动态标定，得到动态温度频率和动态压力频率；所述步骤S2具体为：在随机变化的温度条件下，采集多个压力标定点下连续多次的硅谐振压力传感器的动态温度频率和动态压力频率。S3、根据静态标定的平均温度频率、标准化后的压力频率和动态标定的动态压力频率，构建样本标签；所述步骤S3包括以下分步骤：S31、根据静态标定过程中的标准化后的压力频率和平均温度频率，构建第二温度压力模型；S32、采用最小二乘法对第二温度压力模型进行求解，得到温度压力系数；所述步骤S32中第二温度压力模型为：其中，为第个温度标定点下第个压力标定点的平均温度频率，为第个温度标定点下第个压力标定点所对应的标准化后的压力频率，、和为温度压力系数，具体的为第一温度压力系数，为第二温度压力系数，为第三温度压力系数；S33、根据温度压力系数和动态标定的动态压力频率，得到样本标签。所述步骤S33中样本标签公式为：其中，为第个压力标定点下第次采集所对应的样本标签，、和为温度压力系数，为第个压力标定点下第次采集的硅谐振压力传感器的动态压力频率。S4、采用样本标签和动态标定的动态温度频率对时间序列预测模型进行训练，得到训练完成的时间序列预测模型；所述步骤S4包括以下分步骤：S41、构建时间序列预测模型，得到样本标签的预测值：其中，为样本标签的预测值，为时间序列预测模型找到参数间对应关系的函数，其函数括号内的参数为第个压力标定点下多次采集的动态温度频率，为第路第个压力标定点下第次采集的动态温度频率，为第路第个压力标定点下第次采集的动态温度频率，为第路第个压力标定点下第次采集的动态温度频率，；S42、构建代价函数，度量预测值与样本标签差值，其中，代价函数为：其中，为代价函数，为L2范数；S43、将样本标签和动态温度频率输入时间序列预测模型，使得预测值与样本标签差值最小，得到训练完成的时间序列预测模型。S5、采用训练完成的时间序列预测模型计算校准温度频率；S6、根据校准温度频率、静态标定参数和标准化后的压力频率，计算硅谐振压力传感器的动态补偿后的压力。所述步骤S6中计算硅谐振压力传感器的动态补偿后的压力的公式为：其中，为硅谐振压力传感器的动态补偿后的压力，为校准温度频率，为第个温度标定点下第个压力标定点所对应的标准化后的压力频率，和均为计数小标，为第个静态标定参数。
