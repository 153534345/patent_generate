标题title
一种全向遥控装置及控制方法
摘要abst
本发明涉及一种全向遥控装置及控制方法，其方法包括以下步骤：步骤1、遥控装置通过多个红外发射器实时发射红外信号；步骤2、具有红外装置的电器收到红外信号后，反馈红外信号到遥控装置；步骤3、遥控装置分析该红外信号，并获取其设备类型和型号，通过遥控装置的无线通信模块向服务器请求下载对应的红外控制码；步骤4、遥控装置根据红外控制码发送红外控制信号到电器。本发明的有益效果是：通过实时发射红外信号，侦测电器的型号，自动下载，自动对码，从而简化红外遥控操作。
权利要求书clms
1.一种全向遥控装置的控制方法，适用于遥控装置，包括以下步骤：步骤1、遥控装置通过多个红外发射器实时发射随机编码的红外信号；步骤2、具有红外装置的电器收到红外信号后，反馈红外信号到遥控装置；步骤3、遥控装置分析该红外信号，并获取其信号高低电平的时长，生成二进制的文本信息，通过遥控装置的无线通信模块向服务器发送该文本信息；步骤4、服务器根据文本信息内容向遥控装置匹配相应的红外编码。2.根据权利要求1所述的控制方法，其特征在于，如遥控装置发送的红外信号无回馈，则间隔一定时间后重新发送随机编码的红外信号。3.根据权利要求1述的控制方法，其特征在于，所述步骤2中，所述遥控装置驱动红外发射器发射红外信号时，产生一串脉冲编码，脉冲编码进行脉冲幅度调制后便形成遥控信号，经驱动电路由红外发射管发射出去。4.根据权利要求1所述的一种控制方法，其特征在于，所述步骤3中，所述红外接收器根据遥控脉冲产生高低电平，所述CBU模块根据输出的高低电平进行模拟还原，根据高低电平的时长解析出设备的种类和型号或由服务器进行解析。5.根据权利要求4所述的一种控制方法，其特征在于，所述遥控装置将解析的设备的种类和型号上传到云端服务器，云端服务器根据型号适配到对应的红外码，遥控装置下载该红外码并储存。6.根据权利要求1所述的一种控制方法，其特征在于，所述步骤4中，控制红外设备时，从云端获取对应红外设备的控制码，通过CBU模块控制红外发射管阵列的通断来下发对应的红外码，达到控制电器的目的。7.根据权利要求1所述的控制方法，其特征在于，遥控装置还包括温湿度传感器，通过实时检测室内环境温度并显示。8.根据权利要求7所述的控制方法，其特征在于，遥控装置还根据实时检测室内环境温度，向已经配对的空调或加湿器装置发送红外控制信号。9.一种全向遥控装置，用于实施如权利要求1-9任意一项所述的控制方法，其特征在于，所述全向遥控装置包括设置在电路板上的多个红外发射器，红外发射器按一定角度围绕中心间隔排列，使得能360°发射红外信号。
说明书desc
技术领域本发明涉及家用电子设备领域，特别是一种全向遥控装置及控制方法。背景技术现有的家用电器如电视机、风扇、空调、灯具、窗帘等家电都是独立的遥控器，每一个电器都配备遥控器，且遥控器并不通用，而遥控器需要经常使用，容易丢失，且遥控器使用寿命较短，且没有原厂的备用遥控器。针对遥控器过多的情况，也有万用遥控装置，通过一个遥控器来控制所有的电器。而这种万用遥控装置，设置过于麻烦，初用时，需要对每一个电器单独进行设置，对于老年人或者一些不太擅长电器的用户来说比较困难，如设置时的电器型号的选择是比较难的，如不清楚电器的型号，很难下载对应的红外控制码，导致设置失败。现有技术中，也有万能遥控器或智能手机，万能遥控器需要频繁进行按键操作，而且遥控按键过多，对于用户操作和体验而言，非常不友好。而智能手机需要具有红外发射装置的才可用，需要进入APP，选择要操控电器的品牌和型号，再对码，再对码完成后，才能操作。而每一款家电均需要操作一遍，通过手机遥控时，需要先打开APP。虽然能实现一机多用，但配对时较为繁琐。发明内容为克服上述技术中的缺陷，本发明提供一种全向遥控装置及遥控方法，通过算法自动核对产品型号，自动下载红外码，是通过如下技术方案来实现的。一种全向遥控装置的控制方法，适用于遥控装置，包括以下步骤：步骤1、遥控装置通过多个红外发射器实时发射红外信号；步骤2、具有红外装置的电器收到红外信号后，反馈红外信号到遥控装置步骤3、遥控装置分析该红外信号，并获取其设备类型和型号，通过遥控装置的无线通信模块向服务器请求下载对应的红外控制码；步骤4、遥控装置根据红外控制码发送红外控制信号到电器。一种全向遥控装置，用于实施上述控制方法，其包括设置在电路板上的多个红外发射器，红外发射器按一定角度围绕中心间隔排列，使得能360°发射红外信号。本发明的有益效果是：通过实时发射红外信号，侦测电器的型号，自动下载，自动对码，从而简化红外遥控操作。附图说明图1是本发明实施例的遥控方法流程图。图2是本发明实施例的遥控装置的电路板结构示意图。图3是本发明实施例的红外编码发射及接收的示意框图。图4是本发明实施例的红外发射器排列示意图。具体实施方式以下结合实施例对本发明作进一步的阐述，所述的实施例仅为本发明一部分的实施例，这些实施例仅用于解释本发明，对本发明的范围并不构成任何限制。附图中所示的流程图仅是示例说明，不是必须包括所有的内容和操作/步骤，也不是必须按所描述的顺序执行。例如，有的操作/步骤还可以分解、组合或部分合并，因此实际执行的顺序有可能根据实际情况改变。如图1所示，一种全向遥控装置的控制方法，适用于遥控装置，包括以下步骤：S1、遥控装置通过多个红外发射器实时发射红外信号；S2、具有红外装置的电器收到红外信号后，反馈红外信号到遥控装置；S3、遥控装置分析该红外信号，并获取其设备类型和型号，通过遥控装置的无线通信模块向服务器请求下载对应的红外控制码；S4、遥控装置根据红外控制码发送红外控制信号到电器。在本发明实施例中，步骤1，遥控装置通过多个红外发射器实时发射红外信号，发射时以不同编码格式按顺序向外发送红外信号。每个品牌的同一种家电的红外信号编码是一样的，如美的空调的所有型号都是同一编码。因此，在发送信号时，遥控装置随机发送预存的不同编码的红外信号，这些红外信号是不带指令的信号，当红外接收装置收到该信号时，会有信号回馈。当遥控装置侦测到红外接收装置，即电器收到该红外信号时，通过CBU模块记录下该信号高低电平的时长，并将红外信号转化成二进制代码，记录为文本文件，WIFI模组通过路由器向服务器发送该文本文件，并根据文本文件的内容匹配相应的红外编码，发回匹配完成的请求，遥控装置向服务器请求下载该红外编码，并将红外编码保存到红外装置内。根据红外编码可对已识别的电器进行遥控操作。下载完红外编码后，可选择自动对码或者人工对码，自动对码会随机选择三个功能的红外信号，通过红外发射器发送到相应的电器，待电器接收且响应后，对码完成。而人工对码是用户打开智能终端上的APP，通过APP与遥控装置通信，通过APP上的提示进行操作。如遥控装置发送的红外信号无回馈，则间隔一定时间后重新发送红外信号。由于电器关机时候，无法接收红外信号。因此，红外接收装置可间隔一段时间自动发送信号或者是根据用户的按键操作，立即发送信号。间隔时间可设置为比较长的时间，如6小时，12小时甚至一天，由于家用电器的数量不是很多，理论上，频次不宜太高。发送完一轮随机的红外信号后，3分钟内无任何操作，则进入低功耗模式，在低功耗模式下，会关闭所有红外发射器和Wi-Fi模块，使CBU模块进入低功耗模式，实现长时间待机。当遥控装置自动发送红外信号时，不依赖人为操作，即可完成红外识别和下载工作，使得用户在使用时，不需要刻意去了解操作手册，即可完成红外配对工作。大大提高了用户的体验感，使得遥控装置能自动且智能化完成红外信号的配对工作。遥控装置还包括温湿度传感器，通过实时检测室内环境温度，控制空调智能化执行相应的功能。如图2所示，遥控装置还包括温湿度传感器，通信模块、电源及指示灯。本发明实施例中，温湿度传感器通过I2C协议与主控CBU模块进行通信，模组周期性采集传感器数据，并根据设置好的上报规则进行超阈值上报或定时上报。温湿度传感器负责采集当前环境的温湿度数据。本发明实施例中，电源是电池或者外接电源设备内置锂电池，可通过Type-C接口供电并同步给锂电池充电，外部5V或电池电压经DC-DC转为3V3后给Wi-Fi模块以及相关外围器件供电。当外部5V正常输入时，设备直接由5V供电，若此时电池非满电量状态，5V通过电池管理芯片同步给锂电池充电，当外部5V供电移除后，设备自动切换为锂电池供电。通信模块，是Wi-Fi模块，通过与路由器无线连接，与服务器通信。在本发明实施例中，Wi-Fi模块为间歇性开启，由于不需要频繁与服务器通信，在通常状况下，Wi-Fi模块为休眠状态，需要通过唤醒才能与路由器通信。唤醒可通过按键唤醒、语音唤醒。红外遥控包括红外码发射与学习功能，设备经红外一体化接收头学习或从云端获取对应的红外码值后通过红外发射管阵列将红外信号发射出去，达到控制电器的目的。控制红外设备时，从云端获取对应红外设备的控制码，通过CBU模块P8管脚控制红外发射管阵列的通断来下发对应的红外码，达到控制电器的目的。遥控装置驱动红外发射器发射红外信号时，产生一串脉冲编码，脉冲编码对40kHz载波进行脉冲幅度调制后便形成遥控信号，经驱动电路由红外发射管发射出去。电器的红外接收器接收到调制后的遥控信号，经前置放大、限幅放大、带通滤波、峰值检波和波形整形，从而解调出与输入遥控信号反相的遥控脉冲。再通过单片机对该遥控脉冲进行解码，解码后为可执行的二进制代码。如图3所示，在本发明的实施例中，一次按键动作的遥控编码信息为32位串行二进制码。对于二进制信号"0"，一个脉冲占1.2ms；对于二进制信号"1"，一个脉冲占2.4ms，而每一脉冲内低电平均为0.6ms。从起始标志到32位编码脉冲发完大约需80ms，此后遥控信号维持高电平。若按键未释放，则从起始标志起每隔108ms发出3个脉冲的重复标志。按照上述编码规则，遥控装置的CBU模块通过红外发射器向四周发射随机的红外信号，并等待红外接收器的回馈。电器的红外接收器收到遥控脉冲后，红外接收器根据遥控脉冲产生高低电平，遥控装置的CBU模块根据输出的高低电平进行模拟还原，根据高低电平的时长解析出电器的种类和型号。红外码学习时，具有收发功能的红外发射器检测红外信号，通过接收头内部电路输出高低电平还原出发射端的信号并传送到CBU模块的P24，P24记录下该信号高低电平的时长并上传到云端服务器，需要控制红外设备时，下发对应的红外控制码遥控装置将解析到的型号通过路由器发送到云端服务器，服务器根据型号适配到对应的红外码，并反馈到遥控装置。遥控装置下载该红外码并储存。CBU模块的P9与P17用于控制双色指示灯，指示灯用于表示当前设备的状态，P28作为按键输入检测，用于触发进入配网模式与清除配网信息等。一种全向遥控装置，包括设置在电路板上的多个红外发射器，红外发射器按一定角度围绕中心间隔排列，使得能360°发射红外信号。红外通信是利用950nm近红外波段的红外线作为传递信息的媒体，即通信信道。发送端将基带二进制信号调制为一系列的脉冲串信号，通过红外发射管发射红外信号，红外线波长范围为0.70μm～1mm。在本发明的实施例中，通过在电路板上的多个红外发射器发射信号，由于红外波是有角度的，需要间隔设置多个红外发射器才能实现360°全向发射。如图4所示，在本发明的一个实施例中，在圆形的电路板上平均分割为6个扇形，每个扇形区域内设置一个红外发射器，如图中的圆圈所示，使得具有360°全向发射的能力。普通的红外发光二极管，其功率分为小功率，其发射角度一般在15°～60°之间，作为遥控器用。因此，间隔60°设置的红外发射器，能覆盖空间内的红外信号接收装置。以上仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
