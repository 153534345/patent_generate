标题title
一种基于着色器存储缓存对象的光点渲染方法
摘要abst
本发明公开了一种基于着色器存储缓存对象的光点渲染方法，具体涉及三维图形实时渲染技术领域，具体包括如下步骤：步骤一，3D建模；步骤二，申请着色器存储缓存对象；步骤三，初始化缓存；步骤四，渲染。本发明通过本发明设计的整体方案，与现有技术相比，通过将光点信息提前存储到着色器存储缓存对象中，然后通过instance渲染的方式，根据参数控制光点的各种形态显隐等效果。即优化了渲染效率，又达到了仿真要求。与此同时规定了一套与主流3D建模软件相符的建模规则，从而让光点的制作更加简单可行。
权利要求书clms
1.一种基于着色器存储缓存对象的光点渲染方法，其特征在于：具体包括以下步骤：步骤一：3D建模，通过3D建模，制作出光点模型；步骤二：申请着色器存储缓存对象，载入步骤一生成的光点模型，并计算出需要的光点数量，根据光点数量申请相应大小的着色器存储缓存对象；步骤三：初始化缓存，在初始化缓存的过程中，将光点模型所读取的光点信息存入初始化缓存的过程中，并设置好instance数量，生成新的缓存对象信息；步骤四：渲染，将步骤三中生成的新的缓存对象的信息进行对应渲染。2.根据权利要求1所述的一种基于着色器存储缓存对象的光点渲染方法，其特征在于：所述步骤一中光点模型的具体建模转换规则如下：步骤101：添加圆球mesh，在想要设置光点的位置处加入想要光点样式的圆球mesh；步骤102：建模，建模圆球直径大小作为光点直径大小；步骤103：设置光点法线，选择0号点法线作为光点法线；步骤104：设置光点正面颜色，选择漫反射颜色作为光点正面颜色；步骤105：设置光点背面颜色，选择镜面反射颜色作为光点背面颜色；步骤106：设置光点位置，选择圆球位置作为光点位置；步骤107：确定光点行为模式，选择圆球名字进行关键词查照，从而确定光点行为模式。3.根据权利要求1所述的一种基于着色器存储缓存对象的光点渲染方法，其特征在于：所述步骤一中3D建模采用3D建模软件生成，所述3D建模软件可选择3Dsmax、rhino、cinema4D、zbrush、poser中的任一一种。4.根据权利要求1所述的一种基于着色器存储缓存对象的光点渲染方法，其特征在于：所述步骤二中着色器载入光点模型时的具体操作如下：步骤201：初始化着色器系统，将着色器系统进行初始化操作；步骤202：创建纹理，首先创建纹理对象，之后绑定的目标纹理对象，对纹理对象配置纹理参数，其中，纹理参数包括纹理大小、缩小倍数、水平填充数值和垂直填充数值；步骤203：导入数据，将光点模型数据输入至步骤202中创建的纹理中，从而将光点的模型数据在纹理中进行参数配置；步骤204：显示帧数据，将步骤203中的数据分成每一帧进行展示。5.根据权利要求1所述的一种基于着色器存储缓存对象的光点渲染方法，其特征在于：所述步骤四中instance渲染的方式为根据参数控制光点的各种形态显隐等效果。6.根据权利要求5所述的一种基于着色器存储缓存对象的光点渲染方法，其特征在于：步骤四中instance渲染的方式是静态的粒子集合的渲染，所有的球体都是利用一个DrawCall渲染出来的，并且每一帧只Draw一次。7.根据权利要求5所述的一种基于着色器存储缓存对象的光点渲染方法，其特征在于：步骤四中instance渲染的方式为设置Input Layout和两个顶点缓冲区，其中一个顶点缓冲区用以描述球体的顶点信息，另一个顶点缓冲区用以描述位置信息。8.一种存储介质，其特征在于：所述存储介质存储有计算机可执行指令，所述计算机可执行指令用于执行权利要求1-8任意一项所述的一种基于着色器存储缓存对象的光点渲染方法。9.一种电子设备，其特征在于：包括：至少一个处理器；以及，与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-8任意一项所述的一种基于着色器存储缓存对象的光点渲染方法。
说明书desc
技术领域本发明涉及三维图形实时渲染领域技术领域，更具体地说，本发明涉及一种基于着色器存储缓存对象的光点渲染方法。背景技术飞行仿真视景软件需要能够模拟夜航时场景中的机场灯光，通常这些灯光具有不同的颜色、闪烁频率、可见方向及可视距离等，视景软件可以控制这些光点的打开或关闭，调整其亮度等级等。这些机场灯光通常为光点效果，不需要将周围场景照亮，但会受到环境能见度、雾的影响，在可视范围内应符合真实的视觉效果。传统方案中通过加入一种带自发光材质的小球可以初步达到模拟光点的效果，但是其效率极低，且可视范围会受到屏幕分辨率等因素影响，无法达到细节要求。而且由于常用3D建模软件中，没有针对光点进行特殊的建模处理。为此，我们提出了一种基于着色器存储缓存对象的光点渲染方法来解决上述问题。发明内容为了克服现有技术的上述缺陷，本发明的实施例提供一种基于着色器存储缓存对象的光点渲染方法，通过具体步骤：步骤一，3D建模；步骤二，申请着色器存储缓存对象；步骤三，初始化缓存；步骤四，渲染；以解决上述背景技术中提出的问题。为实现上述目的，本发明提供如下技术方案：一种基于着色器存储缓存对象的光点渲染方法，具体包括以下步骤：步骤一：3D建模，通过3D建模，制作出光点模型；载入步骤一生成的光点模型，并计算出需要的光点数量，根据光点数量申请相应大小的着色器存储缓存对象；步骤三：初始化缓存，在初始化缓存的过程中，将光点模型所读取的光点信息存入初始化缓存的过程中，并设置好instance数量，生成新的缓存对象信息；步骤四：渲染，将步骤三中生成的新的缓存对象的信息进行对应渲染。在一个优选的实施方式中，所述步骤一中光点模型的具体建模转换规则如下：步骤101：添加圆球mesh，在想要设置光点的位置处加入想要光点样式的圆球mesh；步骤102：建模，建模圆球直径大小作为光点直径大小；步骤103：设置光点法线，选择0号点法线作为光点法线；步骤104：设置光点正面颜色，选择漫反射颜色作为光点正面颜色；步骤105：设置光点背面颜色，选择镜面反射颜色作为光点背面颜色；步骤106：设置光点位置，选择圆球位置作为光点位置；步骤107：确定光点行为模式，选择圆球名字进行关键词查照，从而确定光点行为模式。在一个优选的实施方式中，所述步骤一中3D建模采用3D建模软件生成，所述3D建模软件可选择3Dsmax、rhino、cinema 4D、zbrush、poser中的任一一种。在一个优选的实施方式中，所述步骤二中着色器载入光点模型时的具体操作如下：步骤201：初始化着色器系统，将着色器系统进行初始化操作；步骤202：创建纹理，首先创建纹理对象，之后绑定的目标纹理对象，对纹理对象配置纹理参数，其中，纹理参数包括纹理大小、缩小倍数、水平填充数值和垂直填充数值；步骤203：导入数据，将光点模型数据输入至步骤202中创建的纹理中，从而将光点的模型数据在纹理中进行参数配置；步骤204：显示帧数据，将步骤203中的数据分成每一帧进行展示。在一个优选的实施方式中，所述步骤四中instance渲染的方式为根据参数控制光点的各种形态显隐等效果。在一个优选的实施方式中，步骤四中instance渲染的方式是静态的粒子集合的渲染，所有的球体都是利用一个DrawCall渲染出来的，并且每一帧只Draw一次。在一个优选的实施方式中，步骤四中instance渲染的方式为设置Input Layout和两个顶点缓冲区，其中一个顶点缓冲区用以描述球体的顶点信息，另一个顶点缓冲区用以描述位置信息。在一个优选的实施方式中，还包括一种存储介质，所述存储介质存储有计算机可执行指令，所述计算机可执行指令用于执行基于着色器存储缓存对象的光点渲染方法。在一个优选的实施方式中，还包括一种电子设备，这种电子设备包括：至少一个处理器；以及，与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-8任意一项所述的一种基于着色器存储缓存对象的光点渲染方法。本发明的技术效果和优点：通过本发明设计的整体方案，与现有技术相比，通过将光点信息提前存储到着色器存储缓存对象中，然后通过instance渲染的方式，根据参数控制光点的各种形态显隐等效果。即优化了渲染效率，又达到了仿真要求。与此同时规定了一套与主流3D建模软件相符的建模规则，从而让光点的制作更加简单可行。附图说明图1为本发明提供的一种基于着色器存储缓存对象的光点渲染方法的步骤示意图。图2为本发明步骤一中光点模型的具体建模转换规则的步骤示意图。图3为本发明实施例4所提供的一种基于着色器存储缓存对象的光点渲染方法的电子设备的结构示意图。具体实施方式下面将结合本发明中的实施例，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例1：本发明实施例提供了一种基于着色器存储缓存对象的光点渲染方法，具体包括以下步骤：步骤一：3D建模，通过3D建模，制作出光点模型；步骤二：申请着色器存储缓存对象，载入步骤一生成的光点模型，并计算出需要的光点数量，根据光点数量申请相应大小的着色器存储缓存对象；步骤三：初始化缓存，在初始化缓存的过程中，将光点模型所读取的光点信息存入初始化缓存的过程中，并设置好instance数量，生成新的缓存对象信息；步骤四：渲染，将步骤三中生成的新的缓存对象的信息进行对应渲染。更进一步的，所述步骤一中光点模型的具体建模转换规则如下：步骤101：添加圆球mesh，在想要设置光点的位置处加入想要光点样式的圆球mesh；步骤102：建模，建模圆球直径大小作为光点直径大小；步骤103：设置光点法线，选择0号点法线作为光点法线；步骤104：设置光点正面颜色，选择漫反射颜色作为光点正面颜色；步骤105：设置光点背面颜色，选择镜面反射颜色作为光点背面颜色；步骤106：设置光点位置，选择圆球位置作为光点位置；步骤107：确定光点行为模式，选择圆球名字进行关键词查照，从而确定光点行为模式。具体的，所述步骤一中3D建模采用3D建模软件生成，所述3D建模软件可选择3Dsmax。在另一方面，所述步骤二中着色器载入光点模型时的具体操作如下：步骤201：初始化着色器系统，将着色器系统进行初始化操作；步骤202：创建纹理，首先创建纹理对象，之后绑定的目标纹理对象，对纹理对象配置纹理参数，其中，纹理参数包括纹理大小、缩小倍数、水平填充数值和垂直填充数值；步骤203：导入数据，将光点模型数据输入至步骤202中创建的纹理中，从而将光点的模型数据在纹理中进行参数配置；步骤204：显示帧数据，将步骤203中的数据分成每一帧进行展示。不得不说的是，所述步骤四中instance渲染的方式为根据参数控制光点的各种形态显隐等效果，步骤四中instance渲染的方式是静态的粒子集合的渲染，所有的球体都是利用一个Draw Call渲染出来的，并且每一帧只Draw一次，。实施例2：本实施例提供了另一种基于着色器存储缓存对象的光点渲染方法，具体包括以下步骤：步骤一：3D建模，通过3D建模，制作出光点模型；步骤二：申请着色器存储缓存对象，载入步骤一生成的光点模型，并计算出需要的光点数量，根据光点数量申请相应大小的着色器存储缓存对象；步骤三：初始化缓存，在初始化缓存的过程中，将光点模型所读取的光点信息存入初始化缓存的过程中，并设置好instance数量，生成新的缓存对象信息；步骤四：渲染，将步骤三中生成的新的缓存对象的信息进行对应渲染。具体点，所述步骤一中光点模型的具体建模转换规则如下：步骤101：添加圆球mesh，在想要设置光点的位置处加入想要光点样式的圆球mesh；步骤102：建模，建模圆球直径大小作为光点直径大小；步骤103：设置光点法线，选择0号点法线作为光点法线；步骤104：设置光点正面颜色，选择漫反射颜色作为光点正面颜色；步骤105：设置光点背面颜色，选择镜面反射颜色作为光点背面颜色；步骤106：设置光点位置，选择圆球位置作为光点位置；步骤107：确定光点行为模式，选择圆球名字进行关键词查照，从而确定光点行为模式。不得不说的是，所述步骤一中3D建模采用3D建模软件生成，所述3D建模软件可选择VertexShader。进一步的，所述步骤二中着色器载入光点模型时的具体操作如下：步骤201：初始化着色器系统，将着色器系统进行初始化操作；步骤202：创建纹理，首先创建纹理对象，之后绑定的目标纹理对象，对纹理对象配置纹理参数，其中，纹理参数包括纹理大小、缩小倍数、水平填充数值和垂直填充数值；步骤203：导入数据，将光点模型数据输入至步骤202中创建的纹理中，从而将光点的模型数据在纹理中进行参数配置；步骤204：显示帧数据，将步骤203中的数据分成每一帧进行展示。更进一步的，所述步骤四中instance渲染的方式为根据参数控制光点的各种形态显隐等效果，步骤四中instance渲染的方式为设置Input Layout和两个顶点缓冲区，其中一个顶点缓冲区用以描述球体的顶点信息，另一个顶点缓冲区用以描述位置信息，在VertexShader中的代码如下：实施例3：本实施例提供一种存储介质，所述存储介质存储有计算机可执行指令，其包含用于执行上述基于着色器存储缓存对象的光点渲染方法的程序，该计算机可执行指令可执行实施例1-2中任一一种基于着色器存储缓存对象的光点渲染方法。其中，所述存储介质可以是计算机能够存取的任何可用介质或数据存储设备，包括但不限于磁性存储器等)、光学存储器、以及半导体存储器、固态硬盘)等。实施例4：图3示出了本发明的另一个实施例的一种电子设备的结构框图。所述电子设备1100可以是具备计算能力的主机服务器、个人计算机PC、或者可携带的便携式计算机或终端等。本发明具体实施例并不对电子设备的具体实现做限定。该电子设备1100包括至少一个处理器1110、通信接口1120、存储器1130和总线1140。其中，处理器1110、通信接口1120、以及存储器1130通过总线1140完成相互间的通信。通信接口1120用于与网元通信，其中网元包括例如虚拟机管理中心、共享存储等。处理器1110用于执行程序。处理器1110可能是一个中央处理器CPU，或者是专用集成电路ASIC，或者是被配置成实施本发明实施例的一个或多个集成电路。存储器1130用于可执行的指令。存储器1130可能包含高速RAM存储器，也可能还包括非易失性存储器，例如至少一个磁盘存储器。存储器1130也可以是存储器阵列。存储器1130还可能被分块，并且所述块可按一定的规则组合成虚拟卷。存储器1130存储的指令可被处理器1110执行，以使处理器1110能够执行上述任一一种基于着色器存储缓存对象的光点渲染方法。最后：以上所述仅为本发明的优选实施例而已，并不用于限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
