标题title
供应链协同中的数据语义协商方法及业务信息交换方法
摘要abst
本发明涉及计算机数据通信安全技术领域，具体提供供应链协同中的数据语义协商方法及业务信息交换方法；在供应链协同中的数据语义协商方法中，上、下游企业业务系统根据双方预设的规则和逻辑将己方可用于协同的数据、命名和结构逻辑，以标准的方法交换给对方，进而保证后续的计算过程能够有序进行，该协商方法可保障双方数据的隐私性；业务信息交换方法，基于数据语义协商方法实现数据项取用范围协调，在实现指标计算模型的生成与交换的过程中并对业务信息敏感度分析，最后再实现双方需求与非敏感信息的交换；通过该方法能够在更大程度上保障了数据隐私安全。
权利要求书clms
1.供应链协同中的数据语义协商方法，其特征在于，包括如下步骤：步骤1，获取企业业务系统中的数据表，并选取与主要业务对象相关的实体表ET与关系表RT，形成表的第一集合Ext；步骤2，逐一扫描所述第一集合Ext中的所有表中除主键外的所有外键并形成外键表，再根据所述外键表进行扩展，使所述第一集合Ext中的所有表获得宽字段表，所述第一集合Ext处理后得到表的第二集合wExt；步骤3，根据企业业务系统中预设的敏感字段库，扫描获取所述第二集合wExt中的敏感字段并去除，去除敏感字段后得到第三集合mwExt；步骤4，获取所述第三集合mwExt各表中字段的第一风险程度，所述第一风险程度高于第一预设值时，则去除对应字段，得到第四集合rmwExt；步骤5，为所述第四集合rmwExt中各表的字段增加中文描述词，并将增加了中文描述词的所述第四集合rmwExt转换为Json格式，得到rmwExt-J对象数据；步骤6，企业业务系统将所述rmwExt-J对象数据以远程接口调用的方式发送给目标企业业务系统的指定接口，所述目标企业业务系统对收到的所述rmwExt-J对象数据进行解析，将解析得到的数据存入本地缓存，建立本地映射关系RM，并在本地形成持久化数据集rmwExt-DB，完成数据语义协商。2.根据权利要求1所述的供应链协同中的数据语义协商方法，其特征在于，步骤1中的所述企业包括至少一上游企业和至少一下游企业。3.根据权利要求1所述的供应链协同中的数据语义协商方法，其特征在于，步骤4中所述第一风险程度的计算具体为：表的外键关系记为距离tDis，字段与表的包含关系记为fDis，并将企业业务系统中风险信息所在的表记为风险表，赋予风险系数RV，所述风险系统RV取值为(0，1]，所述第一风险程度计算如下式，其中，Rsk为第一风险程度，N表示企业业务系统中风险表的数量，fDis通常取值为1，tDis的值与外键层级相关，RS为字段自身风险系数，其根据字段表达业务的维度和类型进行定义，取值范围为。4.根据权利要求1所述的供应链协同中的数据语义协商方法，其特征在于，步骤5中为所述第四集合rmwExt中各表的字段增加中文描述词具体为，根据字段中文描述的邻近词库增加距离关系最近的y个词，得到y+1个描述词；其中，所述距离关系为欧式距离关系或余弦距离关系。5.根据权利要求1所述的供应链协同中的数据语义协商方法，其特征在于，步骤6中所述将解析得到的数据存入本地缓存之后还包括，判断缓存数据中是否有与本地数据重名的表名和或字段字，若有则需在所述表名和或字段字之前增加前缀，再建立本地映射关系RM，并在本地形成持久化数据集rmwExt-DB，完成数据语义协商；若无，则直接建立本地映射关系RM，并在本地形成持久化数据集rmwExt-DB，完成数据语义协商。6.供应链协同中的业务信息交换方法，其特征在于，具体包括如下步骤：S1.应用如权利要求1-5任一项所述的供应链协同中的数据语义协商方法，获取持久化数据集rmwExt-DB；S2.下游企业业务系统根据持久化数据集rmwExt-DB选择待使用的数据字段及使用信息并发送给上游企业业务系统，上游企业业务系统反馈第一加密证书tCert和第一有效时间Tapv；下游企业业务系统收到第一加密证书tCert后，将各个数据项计划使用的数据对象CDCset转换为Json格式并发送给上游企业业务系统；上游企业业务系统通过风险评估之后，反馈第二加密证书uCert和第二有效时间Tapv2给下游企业业务系统；S3. 下游企业业务系统明确计算模型的计算步骤表达并反馈给上游企业业务系统，上游企业业务系统判断计算步骤表达中的方法与输入参数名是否符合第二加密证书uCert和数据对象CDCset的数据用量范围；若不符合，下游企业业务系统修改计算步骤表达直至符合为止；若符合，则执行S4;S4.根据下游企业业务系统反馈的计算步骤表达，上游企业业务系统进行计算并对结果进行敏感性评估，通过敏感性评估则反馈结果Res给下游企业业务系统；S5. 下游企业业务系统接收并使用结果Res，并将结果Res的使用情况反馈给上游企业业务系统。7.根据权利要求6所述的供应链协同中的业务信息交换方法，其特征在于，所述S2具体为：S21. 下游企业业务系统根据持久化数据集rmwExt-DB选择需要使用的字段，并加入计划使用时间Tset、预期总体使用量级DCset与项目序号PID，作为请求报文以接口形式发送给上游企业业务系统；S22. 上游企业业务系统收到请求报文，判断企业系统当前的数据接口主机运行情况与PID对应项目的业务繁忙情况，若数据接口主机与PID对应项目均处于非繁忙状态，则在本地为该次请求创建数据交换任务并生成任务序号TID，再将Tset、DCset、PID以及TID加密得到第一加密证书tCert，添加第一有效时间Tapv后，回传给下游企业业务系统，并跳转至S23；否则跳转至S24；S23. 下游企业业务系统收到第一加密证书tCert后，记录每个数据项计划使用的数据对象CDCset并转换为Json格式，再以接口形式发送给上游企业业务系统，申请取用许可证书uCert并跳转至S25；S24. 上游企业业务系统将暂时拒绝的消息Rf-msg添加时间延迟rT之后，发回给下游企业业务系统，下游企业业务系统记录请求失败次数Nfa，并在时间延迟rT后继续执行S21，当失败次数Nfa在预设周期内连续达到5次以上，则该预设周期不再发起请求；S25. 上游企业业务系统根据收到的数据对象CDCset以及自身运行的情况，计算第二风险程度Rsk2，如下式：其中，ndata为数据对象CDCset内各字段在其时间起止范围或各字段自然序号起止范围的非空数据记录条数，nnew为各字段时间最早值之前上游企业业务系统中各类业务数据的新增和更新的数据记录条数，nupdate为各字段时间最晚值之前上游企业业务系统中各类业务数据的新增和更新的数据记录条数，Fm为上游企业业务系统中除去字典表的各表平均字段长度，e为自然对数，nR为下游企业业务系统的成功请求次数，Dabc_total初始值为0；S26.若第二风险程度Rsk2小于等于第二预设值，则上游企业业务系统确定第二有效时间Tapv2后，将Tapv、CDCset、PID以及tCert加密得到第二加密证书uCert，再将第二有效时间Tapv2和第二加密证书uCert发回给下游企业业务系统；若第二风险程度Rsk2大于第二预设值，则将拒绝信息发回给下游企业业务系统，当在过去的第一有效时间Tapv内，下游企业业务系统的项目序号PID对应的项目已有失败的数据取用申请，则将上一次数据取用申请的第二风险程度Rsk2与本次数据取用申请的第一风险程度Rsk进行比较，并将lower或higher作为趋势标记TRa发回给下游企业业务系统；S27.若数据取用申请成功，下游企业业务系统将收到的第二有效时间Tapv2和第二加密证书uCert存储在本地；否则下游企业业务系统根据趋势标记TRa再次调整数据对象CDCset中各字段的计划用量Ct后，再继续执行S23，直到数据取用申请成功。8.根据权利要求6所述的供应链协同中的业务信息交换方法，其特征在于，所述S3具体为：S31. 下游企业业务系统生成计算模型前，首先根据第二有效时间Tapv2检查第二加密证书uCert是否过期，若未过期，则执行S32，否则执行S2；S32. 下游企业业务系统根据实际业务需要以及数据对象CDCset中的可用字段，构建计算步骤表达，所述计算步骤表达为D-M-I-O，其中D为执行顺序，M为执行方法的方法名，所述方法以及方法名均由上、下企业业务系统基于统一的形式共同确定，I为参与计算的方法的输入参数名称，O为计算后形成新变量名称；S33. 下游企业业务系统整合多个计算步骤表达整合后，按各计算步骤表达的D中的数字由小到大进行排序并形成calList，将calList以及第二加密证书uCert一并发送给上游企业业务系统；S34. 上游企业业务系统根据收到的calList，逐一检查各计算步骤表达中的M和I所要求方法名称和输入参数名称是否已存在于本次任务序号TID对应的有效范围中；若存在，则向下游企业业务系统发回认可信息并执行S4；否则，向下游企业业务系统发回缺失的方法名称和输入参数名称并跳转至S35；S35. 下游企业业务系统收到缺失的方法名称和输入参数名称后，修改对应的计算步骤表达并重新执行S33。9.根据权利要求6所述的供应链协同中的业务信息交换方法，其特征在于，所述S4具体为：S41.解析所有计算步骤表达，将所有I部分的数据载入内存形成输入参数；S42.各计算步骤表达执行前，检查数据量变化敏感度Rsk3，如下式，其中，Ci为当前计算步骤表达执行时所有输入参数的数据量，npi为所有输入参数的类型数，ClastOut为上次计算步骤表达执行后O部分的新变量名称转换为当前计算步骤表达中I部分的输入参数名称的数据量，npo为ClastOut的类型数；若数据量变化敏感度Rsk3小于等于第三预设值，则执行S43；否则，停止执行计算步骤表达并向下游企业业务系统发送告警信息；S43.根据计算步骤表达中D部分数据的顺序逐个执行M部分中的方法，并将除去最后执行的计算步骤表达而得到的O部分的新变量名称以临时变量进行保存；S44.每个计算步骤表达执行完成之后，将临时变量同时列入I部分输入参数集合；S45.将最后执行的计算步骤表达中的O部分作为结果Res发回给下游企业业务系统。10.根据权利要求6所述的供应链协同中的业务信息交换方法，其特征在于，所述S5具体为：S51.下游企业业务系统以计算步骤表达的方法名为统计对象，查找系统中本次结果Res被引用的代码，得到Codelist；S52.统计在接收到结果Res后的第二有效时间Tapv2内，所有被引用的代码的总执行次数，并获取添加执行次数的Codelist-C；S53.统计Codelist-C中各代码在第二有效时间Tapv2内被执行时的数据操作量，同时获取所有代码在第二有效时间Tapv2内被执行时的数据操作量的总数Dabc_total，并将Dabc_total发送给上游企业业务系统；上游企业业务系统更新系统中记录的对应下游企业的Dabc_total值。
说明书desc
技术领域本发明涉及计算机数据通信安全技术领域，具体而言，涉及供应链协同中的数据语义协商方法及业务信息交换方法。背景技术随着智慧供应链的建设，各类采购、电商和货贸平台的信息化和数字化达到一个新的水平，给供应链协同创造了必要条件。降低供应链成本的一个重要方法是生产与运输环节中产品数量、排程、计划等本企业内的关键生产信息，能有效及时的传达给下游企业。然而这类信息普遍涉及上游企业的内部机密和安全隐私。这种困境致使上下游企业之间难以建立有效的数据交换机制。部分有足够研发能力的下游企业在没有上游数据的情况下，一般会采用预测的方法来降低本企业的运营成本，如订单预测、运达时间预测等。但该类方法存在较高的门槛，且普适性一般。其实际效果与数据的量级、数据的维度、数据及时性以及预测模型的优良程度都息息相关，这使得预测类方法可用性和扩展性都有较大局限。另一部分相互信任度较高的上下游企业，会通过管理强化，制度保证协商共享部分生产或运营数据。但信息化的数据本身存在删除和销毁可控制性差的特点，已对外传输或交换的数据始终存在泄露风险。因此，保证上游供应或制造企业的数据隐私不受较大影响的前提下，又能进一步增强下游企业的供应链的处理能力的信息交换方法成为一项迫切的需求。在这过程中，尤为重要的是如何实现上下游企业的数据语义协商。发明内容本发明的目的在于提供供应链协同中的数据语义协商方法及业务信息交换方法，其主要解决业务信息交换过程中上下游企业的数据语义协商问题，进而为安全、高效的业务信息交换提供基础。本发明的实施例通过以下技术方案实现：第一方面，提供供应链协同中的数据语义协商方法，其包括如下步骤：步骤1，获取企业业务系统中的数据表，并选取与主要业务对象相关的实体表ET与关系表RT，形成表的第一集合Ext；步骤2，逐一扫描所述第一集合Ext中的所有表中除主键外的所有外键并形成外键表，再根据所述外键表进行扩展，使所述第一集合Ext中的所有表获得宽字段表，所述第一集合Ext处理后得到表的第二集合wExt；步骤3，根据企业业务系统中预设的敏感字段库，扫描获取所述第二集合wExt中的敏感字段并去除，去除敏感字段后得到第三集合mwExt；步骤4，获取所述第三集合mwExt各表中字段的第一风险程度，所述第一风险程度高于第一预设值时，则去除对应字段，得到第四集合rmwExt；步骤5，为所述第四集合rmwExt中各表的字段增加中文描述词，并将增加了中文描述词的所述第四集合rmwExt转换为Json格式，得到rmwExt-J对象数据；步骤6，企业业务系统将所述rmwExt-J对象数据以远程接口调用的方式发送给目标企业业务系统的指定接口，所述目标企业业务系统对收到的所述rmwExt-J对象数据进行解析，将解析得到的数据存入本地缓存，建立本地映射关系RM，并在本地形成持久化数据集rmwExt-DB，完成数据语义协商。进一步的，步骤1中的所述企业包括至少一上游企业和至少一下游企业。进一步的，步骤4中所述第一风险程度的计算具体为：表的外键关系记为距离tDis，字段与表的包含关系记为fDis，并将企业业务系统中风险信息所在的表记为风险表，赋予风险系数RV，所述风险系统RV取值为(0，1]，所述第一风险程度计算如下式，其中，Rsk为第一风险程度，N表示企业业务系统中风险表的数量，fDis通常取值为1，tDis的值与外键层级相关，RS为字段自身风险系数，其根据字段表达业务的维度和类型进行定义，取值范围为。进一步的，步骤5中为所述第四集合rmwExt中各表的字段增加中文描述词具体为，根据字段中文描述的邻近词库增加距离关系最近的y个词，得到y+1个描述词；其中，所述距离关系为欧式距离关系或余弦距离关系。进一步的，步骤6中所述将解析得到的数据存入本地缓存之后还包括，判断缓存数据中是否有与本地数据重名的表名和或字段字，若有则需在所述表名和或字段字之前增加前缀，再建立本地映射关系RM，并在本地形成持久化数据集rmwExt-DB，完成数据语义协商；若无，则直接建立本地映射关系RM，并在本地形成持久化数据集rmwExt-DB，完成数据语义协商。第二方面，提供供应链协同中的业务信息交换方法，具体包括如下步骤：S1.应用上述的供应链协同中的数据语义协商方法，获取持久化数据集rmwExt-DB；S2.下游企业业务系统根据持久化数据集rmwExt-DB选择待使用的数据字段及使用信息并发送给上游企业业务系统，上游企业业务系统反馈第一加密证书tCert和第一有效时间Tapv；下游企业业务系统收到第一加密证书tCert后，将各个数据项计划使用的数据对象CDCset转换为Json格式并发送给上游企业业务系统；上游企业业务系统通过风险评估之后，反馈第二加密证书uCert和第二有效时间Tapv2给下游企业业务系统；S3. 下游企业业务系统明确计算模型的计算步骤表达并反馈给上游企业业务系统，上游企业业务系统判断计算步骤表达中的方法与输入参数名是否符合第二加密证书uCert和数据对象CDCset的数据用量范围；若不符合，下游企业业务系统修改计算步骤表达直至符合为止；若符合，则执行S4;S4.根据下游企业业务系统反馈的计算步骤表达，上游企业业务系统进行计算并对结果进行敏感性评估，通过敏感性评估则反馈结果Res给下游企业业务系统；S5. 下游企业业务系统接收并使用结果Res，并将结果Res的使用情况反馈给上游企业业务系统。进一步的，所述S2具体为：S21. 下游企业业务系统根据持久化数据集rmwExt-DB选择需要使用的字段，并加入计划使用时间Tset、预期总体使用量级DCset与项目序号PID，作为请求报文以接口形式发送给上游企业业务系统；S22. 上游企业业务系统收到请求报文，判断企业系统当前的数据接口主机运行情况与PID对应项目的业务繁忙情况，若数据接口主机与PID对应项目均处于非繁忙状态，则在本地为该次请求创建数据交换任务并生成任务序号TID，再将Tset、DCset、PID以及TID加密得到第一加密证书tCert，添加第一有效时间Tapv后，回传给下游企业业务系统，并跳转至S23；否则跳转至S24；S23. 下游企业业务系统收到第一加密证书tCert后，记录每个数据项计划使用的数据对象CDCset并转换为Json格式，再以接口形式发送给上游企业业务系统，申请取用许可证书uCert并跳转至S25；S24. 上游企业业务系统将暂时拒绝的消息Rf-msg添加时间延迟rT之后，发回给下游企业业务系统，下游企业业务系统记录请求失败次数Nfa，并在时间延迟rT后继续执行S21，当失败次数Nfa在预设周期内连续达到5次以上，则该预设周期不再发起请求；S25. 上游企业业务系统根据收到的数据对象CDCset以及自身运行的情况，计算第二风险程度Rsk2，如下式：其中，ndata为数据对象CDCset内各字段在其时间起止范围或各字段自然序号起止范围的非空数据记录条数，nnew为各字段时间最早值之前上游企业业务系统中各类业务数据的新增和更新的数据记录条数，nupdate为各字段时间最晚值之前上游企业业务系统中各类业务数据的新增和更新的数据记录条数，Fm为上游企业业务系统中除去字典表的各表平均字段长度，e为自然对数，nR为下游企业业务系统的成功请求次数，Dabc_total初始值为0；S26.若第二风险程度Rsk2小于等于第二预设值，则上游企业业务系统确定第二有效时间Tapv2后，将Tapv、CDCset、PID以及tCert加密得到第二加密证书uCert，再将第二有效时间Tapv2和第二加密证书uCert发回给下游企业业务系统；若第二风险程度Rsk2大于第二预设值，则将拒绝信息发回给下游企业业务系统，当在过去的第一有效时间Tapv内，下游企业业务系统的项目序号PID对应的项目已有失败的数据取用申请，则将上一次数据取用申请的第二风险程度Rsk2与本次数据取用申请的第一风险程度Rsk进行比较，并将lower或higher作为趋势标记TRa发回给下游企业业务系统；S27.若数据取用申请成功，下游企业业务系统将收到的第二有效时间Tapv2和第二加密证书uCert存储在本地；否则下游企业业务系统根据趋势标记TRa再次调整数据对象CDCset中各字段的计划用量Ct后，再继续执行S23，直到数据取用申请成功。进一步的，所述S3具体为：S31. 下游企业业务系统生成计算模型前，首先根据第二有效时间Tapv2检查第二加密证书uCert是否过期，若未过期，则执行S32，否则执行S2；S32. 下游企业业务系统根据实际业务需要以及数据对象CDCset中的可用字段，构建计算步骤表达，所述计算步骤表达为D-M-I-O，其中D为执行顺序，M为执行方法的方法名，所述方法以及方法名均由上、下企业业务系统基于统一的形式共同确定，I为参与计算的方法的输入参数名称，O为计算后形成新变量名称；S33. 下游企业业务系统整合多个计算步骤表达整合后，按各计算步骤表达的D中的数字由小到大进行排序并形成calList，将calList以及第二加密证书uCert一并发送给上游企业业务系统；S34. 上游企业业务系统根据收到的calList，逐一检查各计算步骤表达中的M和I所要求方法名称和输入参数名称是否已存在于本次任务序号TID对应的有效范围中；若存在，则向下游企业业务系统发回认可信息并执行S4；否则，向下游企业业务系统发回缺失的方法名称和输入参数名称并跳转至S35；S35. 下游企业业务系统收到缺失的方法名称和输入参数名称后，修改对应的计算步骤表达并重新执行S33。进一步的，所述S4具体为：S41.解析所有计算步骤表达，将所有I部分的数据载入内存形成输入参数；S42.各计算步骤表达执行前，检查数据量变化敏感度Rsk3，如下式，其中，Ci为当前计算步骤表达执行时所有输入参数的数据量，npi为所有输入参数的类型数，ClastOut为上次计算步骤表达执行后O部分的新变量名称转换为当前计算步骤表达中I部分的输入参数名称的数据量，npo为ClastOut的类型数；若数据量变化敏感度Rsk3小于等于第三预设值，则执行S43；否则，停止执行计算步骤表达并向下游企业业务系统发送告警信息；S43.根据计算步骤表达中D部分数据的顺序逐个执行M部分中的方法，并将除去最后执行的计算步骤表达而得到的O部分的新变量名称以临时变量进行保存；S44.每个计算步骤表达执行完成之后，将临时变量同时列入I部分输入参数集合；S45.将最后执行的计算步骤表达中的O部分作为结果Res发回给下游企业业务系统。进一步的，所述S5具体为：S51.下游企业业务系统以计算步骤表达的方法名为统计对象，查找系统中本次结果Res被引用的代码，得到Codelist；S52.统计在接收到结果Res后的第二有效时间Tapv2内，所有被引用的代码的总执行次数，并获取添加执行次数的Codelist-C；S53.统计Codelist-C中各代码在第二有效时间Tapv2内被执行时的数据操作量，同时获取所有代码在第二有效时间Tapv2内被执行时的数据操作量的总数Dabc_total，并将Dabc_total发送给上游企业业务系统；上游企业业务系统更新系统中记录的对应下游企业的Dabc_total值。本发明实施例的技术方案至少具有如下优点和有益效果：本申请实现了一种业务信息交换过程中，上下游企业的数据语义协商方法，使得上下游企业间的数据具有较高的私密性，进而为实现安全且高效的业务信息交换提供了基础；同时，本申请还实现了一种上游企业的必要业务信息向下游企业传递的新方法，该方法通过计算步骤表达的执行，可保证在主要的业务数据不离开上游企业系统的前提下，输出和交换有益于业务管理和执行的关键信息，较大程度的保障了数据隐私安全；还通过多级别的风险评估机制，综合了字段与数据范围多阶段的证书管理机制，以及响应式的计算模型回调机制，使信息交换可控性更强，同时降低了与业务信息无关接口的无序请求与调用；并且还引入了下游企业操作量反馈过程，在不扩大下游企业隐私影响的情况下，使上下游企业协同控制手段得到加强，为抑制长鞭效应提供了协议机制。附图说明图1为本发明数据语义协商方法的流程示意图；图2为本发明业务信息交换方法的流程示意图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本发明实施例的组件可以以各种不同的配置来布置和设计。实施例1提供供应链协同中的数据语义协商方法，如图1所示，包括如下步骤：步骤1，获取企业业务系统中的数据表，并选取与主要业务对象相关的实体表ET与关系表RT，形成表的第一集合Ext；其中，企业包括至少一上游企业和至少一下游企业，即可以是一个上游企业与一个下游企业之间，也可以是一个上游企业与多个下游企业之间，还可以是多个上游企业与一个下游企业之间。需要说明的是，当处于一个上游企业与多个下游企业之间时，为了提高安全性，上游企业与每个下游企业之间的语义协商应具有差异且指定不同的调用接口；其中，差异至少包括为交换或定义的数据增加唯一的前缀或标识。当多个上游企业与一个下游企业之间时同理。步骤2，逐一扫描所述第一集合Ext中的所有表中除主键外的所有外键并形成外键表，再根据所述外键表进行扩展，使所述第一集合Ext中的所有表获得宽字段表，所述第一集合Ext处理后得到表的第二集合wExt。其中，外键表的扫描层级应不超过2级；且在本实施例中，扩展采用反范式化扩展；且第二集合wExt可以通过Json或XML格式进行暂存，如：{table:order,field:}，后续该对象的转换则直接基于此结构做修改或扩展既可。步骤3，根据企业业务系统中预设的敏感字段库，扫描获取所述第二集合wExt中的敏感字段并去除，去除敏感字段后得到第三集合mwExt；通过去除敏感字段，使得企业的认定的敏感信息不外泄。步骤4，获取所述第三集合mwExt各表中字段的第一风险程度，所述第一风险程度高于第一预设值时，则去除对应字段，得到第四集合rmwExt；其中，第一预设值一般取值为1，当然，其具体值，可以根据实际情况进行适应性调整。本实施例中，第一风险程度的计算具体为：表的外键关系记为距离tDis，字段与表的包含关系记为fDis，并将企业业务系统中风险信息所在的表记为风险表，赋予风险系数RV，所述风险系统RV取值为(0，1]，所述第一风险程度计算如下式，其中，Rsk为第一风险程度，N表示企业业务系统中风险表的数量，fDis通常取值为1，tDis的值与外键层级相关，如一级外键取值为1，二级外键取值为2，RS为字段自身风险系数，其根据字段表达业务的维度和类型进行定义，取值范围为。另需要说明的是，风险表指完全不能向其他企业透露的结构或数据的表，其数量一般不超过业务系统中总业务表数量的三分之一，其内容一般为资金、客户账户等。步骤5，为所述第四集合rmwExt中各表的字段增加中文描述词，并将增加了中文描述词的所述第四集合rmwExt转换为Json格式，得到rmwExt-J对象数据。本实施例中，为所述第四集合rmwExt中各表的字段增加中文描述词具体可以是，根据字段中文描述的邻近词库增加距离关系最近的y个词，得到y+1个描述词；其中，所述距离关系为欧式距离关系或余弦距离关系。一般情况下，y取值为5，其值可以根据实际情况做适应性调整。另外，rmwExt-J对象数据在程序处理时，一般转换为JavaBean或Python的类对象，以便于高效的进行编程处理。步骤6，企业业务系统将所述rmwExt-J对象数据以远程接口调用的方式发送给目标企业业务系统的指定接口，所述目标企业业务系统对收到的所述rmwExt-J对象数据进行解析，将解析得到的数据存入本地缓存，建立本地映射关系RM，并在本地形成持久化数据集rmwExt-DB，完成数据语义协商。其中，将解析得到的数据存入本地缓存之后还包括，判断缓存数据中是否有与本地数据重名的表名和或字段字，若有则需在所述表名和或字段字之前增加前缀，再建立本地映射关系RM，并在本地形成持久化数据集rmwExt-DB，完成数据语义协商；若无，则直接建立本地映射关系RM，并在本地形成持久化数据集rmwExt-DB，完成数据语义协商。为保证可维护性，接口一般工作在Http协议层，在安全处理方面可以要求固定IP、端口以及接口路径。另外映射关系RM使用缓存数据库实现，以便于后续操作时计算调用可以具有更快的速度。通过该实施例提供的供应链协同中的数据语义协商方法，实现了在业务信息交换过程中，上下游企业间的数据的统一语义协商，使得上下游企业间的数据具有较高的私密性，进而为实现安全且高效的业务信息交换提供了基础。实施例2提供供应链协同中的业务信息交换方法，如图2所示，具体包括如下步骤：S1.应用实施例中的供应链协同中的数据语义协商方法，获取持久化数据集rmwExt-DB；S2.下游企业业务系统根据持久化数据集rmwExt-DB选择待使用的数据字段及使用信息并发送给上游企业业务系统，上游企业业务系统反馈第一加密证书tCert和第一有效时间Tapv；下游企业业务系统收到第一加密证书tCert后，将各个数据项计划使用的数据对象CDCset转换为Json格式并发送给上游企业业务系统；上游企业业务系统通过风险评估之后，反馈第二加密证书uCert和第二有效时间Tapv2给下游企业业务系统。具体的，S2包括：S21. 下游企业业务系统根据持久化数据集rmwExt-DB选择需要使用的字段，并加入计划使用时间Tset、预期总体使用量级DCset与项目序号PID，作为请求报文以接口形式发送给上游企业业务系统。一般来说，使用时间Tset不超过30天；另外在设置项目序号PID时，其数数值尽量与日期无关。S22. 上游企业业务系统收到请求报文，判断企业系统当前的数据接口主机运行情况与PID对应项目的业务繁忙情况，若数据接口主机与PID对应项目均处于非繁忙状态，则在本地为该次请求创建数据交换任务并生成任务序号TID，再将Tset、DCset、PID以及TID加密得到第一加密证书tCert，添加第一有效时间Tapv后，回传给下游企业业务系统，并跳转至S23；否则跳转至S24。需要强调的是，为了尽可能在保障数据安全的同时不影响企业的使用，第一有效时间Tapv应小于7天，任务序号TID可以与时间相关，但是多个任务序号之间应保证至少50%的字符差异。S23. 下游企业业务系统收到第一加密证书tCert后，记录每个数据项计划使用的数据对象CDCset并转换为Json格式，再以接口形式发送给上游企业业务系统，申请取用许可证书uCert并跳转至S25。其中数据对象CDCset是基于持久化数据集rmwExt-DB进行扩展的数据结构，在每个字段名下，记录有对应数据量的字段Ct，字段Ct由数据起止标记组成，通畅为时间起止范围或各字段自然序号起止范围。S24. 上游企业业务系统将暂时拒绝的消息Rf-msg添加时间延迟rT之后，发回给下游企业业务系统，下游企业业务系统记录请求失败次数Nfa，并在时间延迟rT后继续执行S21，当失败次数Nfa在预设周期内连续达到5次以上，则该预设周期不再发起请求。本实施例中，该预设周期设置为1天，当然该预设周期也可以设置为12小时等适应于不同场景的值。S25. 上游企业业务系统根据收到的数据对象CDCset以及自身运行的情况，计算第二风险程度Rsk2，如下式：其中，ndata为数据对象CDCset内各字段在其时间起止范围或各字段自然序号起止范围的非空数据记录条数，nnew为各字段时间最早值之前上游企业业务系统中各类业务数据的新增和更新的数据记录条数，nupdate为各字段时间最晚值之前上游企业业务系统中各类业务数据的新增和更新的数据记录条数，Fm为上游企业业务系统中除去字典表的各表平均字段长度，e为自然对数，nR为下游企业业务系统的成功请求次数，Dabc_total初始值为0；该Dabc_total由本方法S5实现更新。S26.若第二风险程度Rsk2小于等于第二预设值，则上游企业业务系统确定第二有效时间Tapv2后，将Tapv、CDCset、PID以及tCert加密得到第二加密证书uCert，再将第二有效时间Tapv2和第二加密证书uCert发回给下游企业业务系统；若第二风险程度Rsk2大于第二预设值，则将拒绝信息发回给下游企业业务系统，当在过去的第一有效时间Tapv内，下游企业业务系统的项目序号PID对应的项目已有失败的数据取用申请，则将上一次数据取用申请的第二风险程度Rsk2与本次数据取用申请的第一风险程度Rsk进行比较，并将lower或higher作为趋势标记TRa发回给下游企业业务系统。本实施例中，第二预设值取值为1，可以知晓的是，第二预设值可以根据不同的场景进行适应性的设置。S27.若数据取用申请成功，下游企业业务系统将收到的第二有效时间Tapv2和第二加密证书uCert存储在本地；否则下游企业业务系统根据趋势标记TRa再次调整数据对象CDCset中各字段的计划用量Ct后，再继续执行S23，直到数据取用申请成功。通过S2可实现下游企业业务系统向上游企业业务系统实时申请数据取用许可。S3. 下游企业业务系统明确计算模型的计算步骤表达并反馈给上游企业业务系统，上游企业业务系统判断计算步骤表达中的方法与输入参数名是否符合第二加密证书uCert和数据对象CDCset的数据用量范围；若不符合，下游企业业务系统修改计算步骤表达直至符合为止；若符合，则执行S4。具体的，S3包括：S31. 下游企业业务系统生成计算模型前，首先根据第二有效时间Tapv2检查第二加密证书uCert是否过期，若未过期，则执行S32，否则再次执行S2。S32. 下游企业业务系统根据实际业务需要以及数据对象CDCset中的可用字段，构建计算步骤表达，所述计算步骤表达为D-M-I-O，其中D为执行顺序，M为执行方法的方法名，所述方法以及方法名均由上、下企业业务系统基于统一的形式共同确定，I为参与计算的方法的输入参数名称，O为计算后形成新变量名称。需要说明的是，M部分中的方法与方法名，由上、下游企业业务系统双方共同采用的某种统一的解释型编程语言决定，如Python或JS等，其中方法主要包括四则远算方法、常用统计方法以及常用科学计算方法等，方法名可采用常用方法名称或双方自定义的方法名称。I部分的输入参数即根据本地映射关系RM与数据对象CDCset结合中进行选择，并且I部分的输入参数数据不超出S25中的时间或数字起止范围。在具体实施时，计算步骤表达的间隔符号不做限制，但至少应保证能将D、M、I、O四个部分进行区分。如05|MeanCount|{orderFunds,Range{…}}|menFunds,Range{…}的表现形式，即分别代表了执行顺序5，计算方法MeanCount和输入参数名称以及作为输出参数的新变量名称。S33. 下游企业业务系统整合多个计算步骤表达整合后，按各计算步骤表达的D中的数字由小到大进行排序并形成calList，将calList以及第二加密证书uCert一并发送给上游企业业务系统。S34. 上游企业业务系统根据收到的calList，逐一检查各计算步骤表达中的M和I所要求方法名称和输入参数名称是否已存在于本次任务序号TID对应的有效范围中；若存在，则向下游企业业务系统发回认可信息并执行S4；否则，向下游企业业务系统发回缺失的方法名称和输入参数名称并跳转至S35。S35. 下游企业业务系统收到缺失的方法名称和输入参数名称后，修改对应的计算步骤表达并重新执行S33。需要说明的是，还应将与计算步骤表达要使用的范围定义、步骤定义相关的语句单词与双方系统中字段名进行区分，以避免重名冲突。通过S3可以使下游企业业务系统将所需数据将要参与的计算方法与具体步骤以明确的语义传递给上游企业系统，进而能够使上游对具体要参与计算的数据能够更好的进行把握，避免敏感数据外泄。S4.根据下游企业业务系统反馈的计算步骤表达，上游企业业务系统进行计算并对结果进行敏感性评估，通过敏感性评估则反馈结果Res给下游企业业务系统。具体的，S4包括：S41.解析所有计算步骤表达，将所有I部分的数据载入内存形成输入参数；即将I部分中的输入数据名称输入内存，再根据具体的输入数据名称调用对应的数据作为输入数据。S42.各计算步骤表达执行前，检查数据量变化敏感度Rsk3，如下式，其中，Ci为当前计算步骤表达执行时所有输入参数的数据量，npi为所有输入参数的类型数，ClastOut为上次计算步骤表达执行后O部分的新变量名称转换为当前计算步骤表达中I部分的输入参数名称的数据量，npo为ClastOut的类型数；若数据量变化敏感度Rsk3小于等于第三预设值，则执行S43；否则，停止执行计算步骤表达并向下游企业业务系统发送告警信息。在本实施例中，应对I和O部分的参数变化用队列或堆栈的数据结构进行统一管理，以便于实现动态参数选取。S43.根据计算步骤表达中D部分数据的顺序逐个执行M部分中的方法，并将除去最后执行的计算步骤表达而得到的O部分的新变量名称以临时变量进行保存。本实施例中，O部分的临时变量不在进入任何缓存数据库，直接利用各类编程语言的内存管理器进行管理，以实现加快计算速度。S44.每个计算步骤表达执行完成之后，将临时变量同时列入I部分输入参数集合。S45.将最后执行的计算步骤表达中的O部分作为结果Res发回给下游企业业务系统。S5. 下游企业业务系统接收并使用结果Res，并将结果Res的使用情况反馈给上游企业业务系统。具体的，S5包括：S51.下游企业业务系统以计算步骤表达的方法名为统计对象，查找系统中本次结果Res被引用的代码，得到Codelist；Codelist以编程文件和行号作为记录索引。在本实施例中，Codelist只需记录方法名称和存储位置。S52.统计在接收到结果Res后的第二有效时间Tapv2内，所有被引用的代码的总执行次数，并获取添加执行次数的Codelist-C。S53.统计Codelist-C中各代码在第二有效时间Tapv2内被执行时的数据操作量，同时获取所有代码在第二有效时间Tapv2内被执行时的数据操作量的总数Dabc_total，并将Dabc_total发送给上游企业业务系统；上游企业业务系统更新系统中记录的对应下游企业的Dabc_total值。在本实施例中，Dabc_total的值更新时，应以任务序号TID为单位在此时进行每次调用后的平均值累加，以避免第二风险程度Rsk2在计算时才去计算Dabc_total的最新值，造成计算时间过长。通过以上业务信息交换方法，可保证在主要的业务数据不离开上游企业系统的前提下，输出和交换有益于业务管理和执行的关键信息，较大程度的保障了数据隐私安全；还通过多级别的风险评估机制，综合了字段与数据范围多阶段的证书管理机制，以及响应式的计算模型回调机制，使信息交换可控性更强，同时降低了与业务信息无关接口的无序请求与调用；并且还引入了下游企业操作量反馈过程，在不扩大下游企业隐私影响的情况下，使上下游企业协同控制手段得到加强，为抑制长鞭效应提供了协议机制。同时本方法在具体实施时，也具有更快的执行速度。以上仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
