标题title
用于梯次锂电池组的预警方法
摘要abst
本发明涉及测量电变量技术领域，具体涉及一种用于梯次锂电池组的预警方法，该方法通过对梯次电池组中各个梯次电池在过去各个设定时段对应的第一测试数据进行测量，并基于测量得到的第一测试数据，确定梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度，进而基于确定的这些可用程度，利用预测网络对梯次电池在未来下一个设定时段对应的可用程度进行预测，根据预测的可用程度，确定梯次电池组中各个梯次电池在未来下一个设定时段对应的不可用的梯次电池，并进行相应的预警。由于本发明可以提前检测到梯次电池在未来时段的可用程度，进而可实现提前预警，有效解决了现有的梯次电池性能检测具有一定滞后性的问题。
权利要求书clms
1.一种用于梯次锂电池组的预警方法，其特征在于，包括以下步骤：获取梯次电池组中各个梯次电池在过去各个设定时段对应的第一测试数据，所述第一测试数据包括：在充放电测试过程中不同充电量情况下的开路电压和充放电效率；根据梯次电池组中各个梯次电池在过去各个设定时段对应的第一测试数据，确定梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度；将梯次电池组中每个梯次电池在过去各个设定时段对应的可用程度输入到预先获取的梯次电池可用程度预测网络中，由梯次电池可用程度预测网络对每个梯次电池在未来下一个设定时段对应的可用程度进行预测，从而得到梯次电池组中各个梯次电池在未来下一个设定时段对应的可用程度预测值；根据梯次电池组中各个梯次电池在未来下一个设定时段对应的可用程度预测值，确定梯次电池组中各个梯次电池在未来下一个设定时段对应的不可用的梯次电池，进而确定当前的预警等级。2.根据权利要求1所述的用于梯次锂电池组的预警方法，其特征在于，确定梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度，包括：根据梯次电池组中各个梯次电池在过去各个设定时段对应的第一测试数据，确定梯次电池组中各个梯次电池在过去各个设定时段对应的开路电压均值和充放电效率均值；根据梯次电池组中各个梯次电池在过去各个设定时段对应的开路电压均值和充放电效率均值，计算梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度。3.根据权利要求2所述的用于梯次锂电池组的预警方法，其特征在于，计算梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度对应的计算公式为：其中，为梯次电池组中每个梯次电池在过去每个设定时段对应的可用程度，为梯次电池组中每个梯次电池在过去每个设定时段对应的充放电效率均值，为梯次电池组中每个梯次电池在过去每个设定时段对应的开路电压均值，为梯次电池的开路电压下限值。4.根据权利要求1所述的用于梯次锂电池组的预警方法，其特征在于，梯次电池可用程度预测网络的预先获取过程包括：获取各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据，所述第二测试数据包括：充电容量与电压微分曲线、电池容量、在自放电测试过程中的常温荷电保持率以及在不同充电量情况下的开路电压、充放电效率、极化电阻、欧姆电阻和极化电容；根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的充电容量与电压微分曲线、电池容量以及在自放电测试过程中的常温荷电保持率，对在过去各个设定时段中所有样本梯次电池进行分类，从而得到在过去各个设定时段中各个样本梯次电池类别；根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的在不同充电量情况下的开路电压和充放电效率，确定在过去各个设定时段中所有样本梯次电池的可用程度；根据在过去各个设定时段中各个样本梯次电池类别中的各个样本梯次电池的可用程度，确定在过去各个设定时段中各个样本梯次电池类别对应的可用权重；根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的在不同充电量情况下的极化电阻、欧姆电阻和极化电容，确定在过去各个设定时段中所有样本梯次电池的偏差率；根据在过去各个设定时段中各个样本梯次电池类别对应的可用权重以及每个样本梯次电池类别中各个样本梯次电池的偏差率，确定在过去各个设定时段中所有样本梯次电池的可信程度；利用神经网络构建梯次电池可用程度预测网络，并根据在过去各个设定时段中所有样本梯次电池的可用程度和可信程度，构造梯次电池可用程度预测网络的训练样本和损失函数；根据梯次电池可用程度预测网络的训练样本和损失函数，对梯次电池可用程度预测网络进行训练，从而得到最终的训练好的梯次电池可用程度预测网络。5.根据权利要求4所述的用于梯次锂电池组的预警方法，其特征在于，对在过去各个设定时段中所有样本梯次电池进行分类，从而得到在过去各个设定时段中各个样本梯次电池类别，包括：根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的充电容量与电压微分曲线、电池容量以及在自放电测试过程中的常温荷电保持率，确定在过去各个设定时段中所有样本梯次电池中的任意两个样本梯次电池之间的差异距离；根据在过去各个设定时段中所有样本梯次电池中的任意两个样本梯次电池之间的差异距离，对在过去各个设定时段中所有样本梯次电池进行分类，从而得到在过去各个设定时段中各个样本梯次电池类别。6.根据权利要求5所述的用于梯次锂电池组的预警方法，其特征在于，确定在过去各个设定时段中所有样本梯次电池中的任意两个样本梯次电池之间的差异距离对应的计算公式为：其中，为在过去每个设定时段中所有样本梯次电池中的任意两个样本梯次电池A和B之间的差异距离，和分别为在过去该设定时段中所有样本梯次电池中的任意样本梯次电池A和B对应的充电容量与电压微分曲线，为和之间的动态时间规整距离，和分别为在过去该设定时段中所有样本梯次电池中的任意样本梯次电池A和B对应的电池容量，和分别为在过去该设定时段中所有样本梯次电池中的任意样本梯次电池A和B对应的在自放电测试过程中的常温荷电保持率，为取和中的最小值，为取和中的最大值，cos函数为余弦函数。7.根据权利要求4所述的用于梯次锂电池组的预警方法，其特征在于，确定在过去各个设定时段中各个样本梯次电池类别对应的可用权重，包括：根据在过去每个设定时段中各个样本梯次电池类别中的各个样本梯次电池的可用程度，计算在过去每个设定时段中各个样本梯次电池类别对应的可用程度均值；按照在过去每个设定时段中各个样本梯次电池类别对应的可用程度均值从大到小的顺序，对在过去每个设定时段中各个样本梯次电池类别进行排序；确定排序后的在过去每个设定时段中各个样本梯次电池类别对应的初始的可用权重，各个样本梯次电池类别对应的初始的可用权重与该样本梯次电池类别对应的排序序号的和相同；对在过去每个设定时段中各个样本梯次电池类别对应的初始的可用权重进行归一化处理，从而最终得到在过去每个设定时段中各个样本梯次电池类别对应的可用权重。8.根据权利要求4所述的用于梯次锂电池组的预警方法，其特征在于，确定在过去各个设定时段中所有样本梯次电池的偏差率，包括：根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的在不同充电量情况下的极化电阻、欧姆电阻和极化电容，计算各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的在不同充电量情况下的极化电阻的偏差率、欧姆电阻的偏差率和极化电容的偏差率；根据各个样本梯次电池组中每个样本梯次电池在过去每个设定时段对应的所有偏差率，确定所有偏差率中的最大偏差率，并将所述最大偏差率作为在过去对应设定时段中对应样本梯次电池的最终偏差率，从而得到在过去各个设定时段中所有样本梯次电池的偏差率。9.根据权利要求4所述的用于梯次锂电池组的预警方法，其特征在于，确定在过去各个设定时段中所有样本梯次电池的可信程度包括：根据在过去各个设定时段中各个样本梯次电池类别对应的可用权重以及每个样本梯次电池类别中各个样本梯次电池的偏差率，计算在过去各个设定时段中所有样本梯次电池的初始的可信程度；对在过去每个设定时段中所有样本梯次电池的初始的可信程度进行归一化处理，从而最终得到在过去各个设定时段中所有样本梯次电池的可信程度。10.根据权利要求9所述的用于梯次锂电池组的预警方法，其特征在于，计算在过去各个设定时段中所有样本梯次电池的初始的可信程度对应的计算公式为：其中，为在过去每个设定时段中每个样本梯次电池的初始的可信程度，在过去每个设定时段中每个样本梯次电池对应的样本梯次电池类别对应的可用权重，为在过去该设定时段中每个样本梯次电池的偏差率。
说明书desc
技术领域本发明涉及测量电变量技术领域，具体涉及一种用于梯次锂电池组的预警方法。背景技术电动汽车的快速发展，催生了退役锂电池的梯次利用。由于退役的梯次锂电池质量参差不齐，当个别梯次锂电池的性能严重衰减到一定程度时，就会影响到整个锂电池组的使用性能，甚至可能会导致车辆安全事故，因此需要定期对梯次电池的性能进行检测。在现有的梯次电池的性能检测中，由于是定期定时检测，通常只有在梯次电池的性能衰减到一定程度并造成相应的影响时，才能被检测到，具有一定的滞后性。例如，申请公布号为CN111313110A的中国专利文件就公开了一种梯次利用三元电池容量快速衰退预警方法，该方法只有当电池容量衰减到一定程度时，才能检测到电池存在容量快速衰退风险。发明内容本发明的目的在于提供一种用于梯次锂电池组的预警方法，用于解决现有的梯次电池性能检测具有一定滞后性的问题。为解决上述技术问题，本发明提供了一种用于梯次锂电池组的预警方法，包括以下步骤：获取梯次电池组中各个梯次电池在过去各个设定时段对应的第一测试数据，所述第一测试数据包括：在充放电测试过程中不同充电量情况下的开路电压和充放电效率；根据梯次电池组中各个梯次电池在过去各个设定时段对应的第一测试数据，确定梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度；将梯次电池组中每个梯次电池在过去各个设定时段对应的可用程度输入到预先获取的梯次电池可用程度预测网络中，由梯次电池可用程度预测网络对每个梯次电池在未来下一个设定时段对应的可用程度进行预测，从而得到梯次电池组中各个梯次电池在未来下一个设定时段对应的可用程度预测值；根据梯次电池组中各个梯次电池在未来下一个设定时段对应的可用程度预测值，确定梯次电池组中各个梯次电池在未来下一个设定时段对应的不可用的梯次电池，进而确定当前的预警等级。进一步的，确定梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度，包括：根据梯次电池组中各个梯次电池在过去各个设定时段对应的第一测试数据，确定梯次电池组中各个梯次电池在过去各个设定时段对应的开路电压均值和充放电效率均值；根据梯次电池组中各个梯次电池在过去各个设定时段对应的开路电压均值和充放电效率均值，计算梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度。进一步的，计算梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度对应的计算公式为：其中，为梯次电池组中每个梯次电池在过去每个设定时段对应的可用程度，为梯次电池组中每个梯次电池在过去每个设定时段对应的充放电效率均值，为梯次电池组中每个梯次电池在过去每个设定时段对应的开路电压均值，为梯次电池的开路电压下限值。进一步的，梯次电池可用程度预测网络的预先获取过程包括：获取各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据，所述第二测试数据包括：充电容量与电压微分曲线、电池容量、在自放电测试过程中的常温荷电保持率以及在不同充电量情况下的开路电压、充放电效率、极化电阻、欧姆电阻和极化电容；根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的充电容量与电压微分曲线、电池容量以及在自放电测试过程中的常温荷电保持率，对在过去各个设定时段中所有样本梯次电池进行分类，从而得到在过去各个设定时段中各个样本梯次电池类别；根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的在不同充电量情况下的开路电压和充放电效率，确定在过去各个设定时段中所有样本梯次电池的可用程度；根据在过去各个设定时段中各个样本梯次电池类别中的各个样本梯次电池的可用程度，确定在过去各个设定时段中各个样本梯次电池类别对应的可用权重；根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的在不同充电量情况下的极化电阻、欧姆电阻和极化电容，确定在过去各个设定时段中所有样本梯次电池的偏差率；根据在过去各个设定时段中各个样本梯次电池类别对应的可用权重以及每个样本梯次电池类别中各个样本梯次电池的偏差率，确定在过去各个设定时段中所有样本梯次电池的可信程度；利用神经网络构建梯次电池可用程度预测网络，并根据在过去各个设定时段中所有样本梯次电池的可用程度和可信程度，构造梯次电池可用程度预测网络的训练样本和损失函数；根据梯次电池可用程度预测网络的训练样本和损失函数，对梯次电池可用程度预测网络进行训练，从而得到最终的训练好的梯次电池可用程度预测网络。进一步的，对在过去各个设定时段中所有样本梯次电池进行分类，从而得到在过去各个设定时段中各个样本梯次电池类别，包括：根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的充电容量与电压微分曲线、电池容量以及在自放电测试过程中的常温荷电保持率，确定在过去各个设定时段中所有样本梯次电池中的任意两个样本梯次电池之间的差异距离；根据在过去各个设定时段中所有样本梯次电池中的任意两个样本梯次电池之间的差异距离，对在过去各个设定时段中所有样本梯次电池进行分类，从而得到在过去各个设定时段中各个样本梯次电池类别。进一步的，确定在过去各个设定时段中所有样本梯次电池中的任意两个样本梯次电池之间的差异距离对应的计算公式为：其中，为在过去每个设定时段中所有样本梯次电池中的任意两个样本梯次电池A和B之间的差异距离，和分别为在过去该设定时段中所有样本梯次电池中的任意样本梯次电池A和B对应的充电容量与电压微分曲线，为和之间的动态时间规整距离，和分别为在过去该设定时段中所有样本梯次电池中的任意样本梯次电池A和B对应的电池容量，和分别为在过去该设定时段中所有样本梯次电池中的任意样本梯次电池A和B对应的在自放电测试过程中的常温荷电保持率，为取和中的最小值，为取和中的最大值，cos函数为余弦函数。进一步的，确定在过去各个设定时段中各个样本梯次电池类别对应的可用权重，包括：根据在过去每个设定时段中各个样本梯次电池类别中的各个样本梯次电池的可用程度，计算在过去每个设定时段中各个样本梯次电池类别对应的可用程度均值；按照在过去每个设定时段中各个样本梯次电池类别对应的可用程度均值从大到小的顺序，对在过去每个设定时段中各个样本梯次电池类别进行排序；确定排序后的在过去每个设定时段中各个样本梯次电池类别对应的初始的可用权重，各个样本梯次电池类别对应的初始的可用权重与该样本梯次电池类别对应的排序序号的和相同；对在过去每个设定时段中各个样本梯次电池类别对应的初始的可用权重进行归一化处理，从而最终得到在过去每个设定时段中各个样本梯次电池类别对应的可用权重。进一步的，确定在过去各个设定时段中所有样本梯次电池的偏差率，包括：根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的在不同充电量情况下的极化电阻、欧姆电阻和极化电容，计算各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的在不同充电量情况下的极化电阻的偏差率、欧姆电阻的偏差率和极化电容的偏差率；根据各个样本梯次电池组中每个样本梯次电池在过去每个设定时段对应的所有偏差率，确定所有偏差率中的最大偏差率，并将所述最大偏差率作为在过去对应设定时段中对应样本梯次电池的最终偏差率，从而得到在过去各个设定时段中所有样本梯次电池的偏差率。进一步的，确定在过去各个设定时段中所有样本梯次电池的可信程度包括：根据在过去各个设定时段中各个样本梯次电池类别对应的可用权重以及每个样本梯次电池类别中各个样本梯次电池的偏差率，计算在过去各个设定时段中所有样本梯次电池的初始的可信程度；对在过去每个设定时段中所有样本梯次电池的初始的可信程度进行归一化处理，从而最终得到在过去各个设定时段中所有样本梯次电池的可信程度。进一步的，计算在过去各个设定时段中所有样本梯次电池的初始的可信程度对应的计算公式为：其中，为在过去每个设定时段中每个样本梯次电池的初始的可信程度，在过去该设定时段中该样本梯次电池对应的样本梯次电池类别对应的可用权重，为在过去该设定时段中该样本梯次电池的偏差率。本发明具有如下有益效果：通过对待检测的梯次电池组中各个梯次电池在过去各个设定时段对应的第一测试数据进行测量，并基于测量得到的第一测试数据，计算梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度，这些可用程度是实际可计算出来的梯次电池参数，表征了梯次电池在过去各个设定时段的可用情况，根据这些实际可计算出来的可用程度，利用预测网络对梯次电池在未来下一个设定时段对应的可用程度进行预测，该预测到的可用程度表征了梯次电池在未来下一个设定时段的可用情况，根据该预测到的可用程度，可以提前确定梯次电池组中各个梯次电池在未来下一个设定时段对应的不可用的梯次电池，并进行相应的预警。由于本发明可以基于梯次电池在过去测量得到的第一测试数据，计算得到过去实际的可用程度，并根据过去实际的可用程度，提前检测到梯次电池在未来时段的可用程度，进而可实现提前预警，有效解决了现有的梯次电池性能检测具有一定滞后性的问题。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明实施例的获取梯次电池可用程度预测网络的流程图；图2为本发明实施例的锂电池等效电路模型的示意图；图3为本发明实施例的对待检测的梯次锂电池组进行检测预警的示意图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的技术方案的具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。为了解决现有的梯次电池性能检测具有一定滞后性的问题，本实施例提供了一种用于梯次锂电池组的预警方法，该方法通过定期对梯次电池进行检测，从而得到梯次电池在过去各个设定时段对应的可用程度，并根据在过去各个设定时段对应的可用程度，利用预先获取的梯次电池可用程度预测网络对未来下一个设定时段对应的可用程度进行预测，并根据预测到的可用程度，提前预判梯次电池在未来下一个设定时段是否可用，以提前告知使用者，有效避免了梯次电池性能检测不及时的问题。该用于梯次锂电池组的预警方法主要包括两大部分：1、预先获取梯次电池可用程度预测网络；2、利用该梯次电池可用程度预测网络，实现对待检测的梯次锂电池组的检测预警。具体的，该用于梯次锂电池组的预警方法包括以下步骤：步骤S1：获取梯次电池可用程度预测网络，如图1所示，具体实现过程如下：步骤S11：获取各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据，该第二测试数据包括：充电容量与电压微分曲线、电池容量、在自放电测试过程中的常温荷电保持率以及在不同充电量情况下的开路电压、充放电效率、极化电阻、欧姆电阻和极化电容。根据待检测的梯次电池组，本实施例中该待检测的梯次电池组具体为梯次锂电池组，获取各个样本梯次电池组，该样本梯次电池组与待检测的梯次电池组同类型，且具有相同的使用场景，其目的是要保证样本梯次电池组中的样本梯次电池与待检测的梯次电池组中的梯次电池的各种性能符合相同的变化情况。对于每个样本梯次电池组中的每个样本梯次电池，在每个设定时间段对该样本梯次电池进行基本属性测试，这里的设定时间段可以是一天的某个合适时段，可以根据需要进行确定任意两个相邻的设定时间段之间的时间间隔，例如，该时间间隔可以是3天、5天或者7天，从而可以得到该样本梯次电池在过去各个设定时段对应的第二测试数据，具体实现过程如下：对于每个样本梯次电池组中的每个样本梯次电池，在每个设定时段，根据《电动汽车用锂离子蓄电池测试规范》，对该样本梯次电池进行测试，从而得到该样本梯次电池的充电容量与电压曲线，也就是Q-V曲线，连续测试3次，并对第3次获取的Q-V曲线求微分，从而得到dQ/dV-V曲线，也就是充电容量与电压微分曲线。由于对样本梯次电池进行测试，从而得到该样本梯次电池的充电容量与电压曲线的具体过程属于现有技术，同时具有一定标准，因此本实施例对该测试过程的具体细节不多做赘述。按照这个方式，可以得到各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的充电容量与电压微分曲线。对于每个样本梯次电池组中的每个样本梯次电池，在每个设定时段，根据电动汽车用锂离子蓄电池测试规范》，对该样本梯次电池进行电池容量测试，为了得到准确的容量值，需要连续测试5个循环以上，为了减小测试次数，如果连续3次测试得到的电池容量的极差与其平均值之比在3%以内，则停止实验，并将3次测试的电池容量的平均值作为实际电池容量；如果连续3次测试得到的电池容量的极差与其平均值之比不在3%以内，则将5次测试得到的电池容量取均值，并将该均值作为实际电池容量。由于对样本梯次电池进行电池容量测试，从而得到该样本梯次电池的电池容量的具体过程属于现有技术，同时具有一定标准，因此本实施例对该电池容量测试过程的具体细节不多做赘述。另外需要强调的是，由于当电池的电池容量低于其容量额定值的50%时，该容量额定值是指该梯次电池出厂时的容量大小，则该电池不适合梯次利用，因此这里每个样本梯次电池的电池容量应当不低于其容量额定值的50%。按照这个方式，可以得到各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的电池容量。对于每个样本梯次电池组中的每个样本梯次电池，在每个设定时段，根据《电动汽车用锂离子蓄电池测试规范》，对该样本梯次电池进行自放电测试，从而可以得到该样本梯次电池的常温荷电保持率，该常温荷电保持率可以表征电池能量的损失变化情况。另外需要强调的是，由于当电池的常温荷电保持率低于其常温荷电保持率额定值的80%时，电池的使用成本比较高，不适合梯次利用，因此这里每个样本梯次电池的常温荷电保持率应当不低于其常温荷电保持率额定值的80%。按照这个方式，可以得到各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的常温荷电保持率。对于每个样本梯次电池组中的每个样本梯次电池，在每个设定时段，对该样本梯次电池进行充放电测试。在进行充放电测试时，预设4个充电量，分别为、、和，本实施例设置，并控制测试环境温度为20-30℃。在每一个充电量下，以恒功率充电的方式，充电功率为80W，进行充电测试，每次充电后，先进行开路电压值测试，再进行频谱阻抗测试，测试频率为0.01Hz~100kHz，最后按80W功率进行放电，测得放电量Q1f。根据每个充电量及其对用的放电量，计算放电量与充电量的比值，从而得到每个充电量情况下的充放电效率。同时，由频谱阻抗测试得到的频谱阻抗曲线，根据锂电池等效电路模型，如图2所示，计算获得每个充电量情况下的极化电阻、欧姆电阻和极化电容。按照这个方式，可以得到各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的在不同充电量情况下的开路电压、充放电效率、极化电阻、欧姆电阻和极化电容。步骤S12：根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的充电容量与电压微分曲线、电池容量以及在自放电测试过程中的常温荷电保持率，对在过去各个设定时段中所有样本梯次电池进行分类，从而得到在过去各个设定时段中各个样本梯次电池类别，具体实现过程包括：步骤S121：根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的充电容量与电压微分曲线、电池容量以及在自放电测试过程中的常温荷电保持率，确定在过去各个设定时段中所有样本梯次电池中的任意两个样本梯次电池之间的差异距离，对应的计算公式为：其中，为在过去每个设定时段中所有样本梯次电池中的任意两个样本梯次电池A和B之间的差异距离，和分别为在过去该设定时段中所有样本梯次电池中的任意样本梯次电池A和B对应的充电容量与电压微分曲线，为和之间的动态时间规整距离，和分别为在过去该设定时段中所有样本梯次电池中的任意样本梯次电池A和B对应的电池容量，和分别为在过去该设定时段中所有样本梯次电池中的任意样本梯次电池A和B对应的在自放电测试过程中的常温荷电保持率，为取和中的最小值，为取和中的最大值，cos函数为余弦函数。根据上述的在过去某个设定时段中所有样本梯次电池中的任意两个样本梯次电池A和B之间的差异距离的计算公式可知，当任意两个样本梯次电池A和B的充电容量与电压微分曲线和的变化越不相似时，则对应的动态时间规整距离就越大；当任意两个样本梯次电池A和B的电池容量差异比较大时，说明样本梯次电池A和B的电池容量越不接近；当任意两个样本梯次电池A和B的常温荷电保持率相差较大时，则余弦函数取值就会越大，此时说明任意两个样本梯次电池A和B性能差异越大，对应的差异距离就越大，那么后续任意两个样本梯次电池A和B越不可能分到一个类别中。步骤S122：根据在过去各个设定时段中所有样本梯次电池中的任意两个样本梯次电池之间的差异距离，对在过去各个设定时段中所有样本梯次电池进行分类，从而得到在过去各个设定时段中各个样本梯次电池类别。对于在过去每个设定时段中的所有样本梯次电池，基于所有样本梯次电池中的任意两个样本梯次电池之间的差异距离，使用DBSCAN密度聚类对该设定时段中的所有样本梯次电池进行聚类，从而得到该设定时段中的各个样本梯次电池类别。步骤S13：根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的在不同充电量情况下的开路电压和充放电效率，确定在过去各个设定时段中所有样本梯次电池的可用程度。结合充放电测试结果，对各个样本梯次电池组中的各个样本梯次电池的可用程度进行进一步衡量，从而便于后续确定各个设定时段中各个样本梯次电池类别对应的可用权重，具体实现过程如下：步骤S131：根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的在不同充电量情况下的开路电压和充放电效率，确定各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的开路电压均值和充放电效率均值。对于在过去每个设定时段中的每个样本梯次电池，计算每个样本梯次电池的在4个不同充电量情况下的开路电压的均值，同时计算每个样本梯次电池的在4个不同充电量情况下的充放电效率的均值，并将该在4个不同充电量情况下的开路电压的均值和充放电效率的均值作为该样本梯次电池在对应设定时段的开路电压均值和充放电效率均值。步骤S132：根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的开路电压均值和充放电效率均值，计算在过去各个设定时段中所有样本梯次电池的可用程度，对应的计算公式为：其中，为每个样本梯次电池组中每个样本梯次电池在过去每个设定时段对应的可用程度，为每个样本梯次电池组中每个样本梯次电池在过去每个设定时段对应的充放电效率均值，为每个样本梯次电池组中每个样本梯次电池在过去每个设定时段对应的开路电压均值，为梯次电池的开路电压下限值。根据上述的每个样本梯次电池组中每个样本梯次电池在过去每个设定时段对应的可用程度的计算公式可知，当样本梯次电池的充放电效率越高时，说明该样本梯次电池的充放电速度越快，当样本梯次电池的开路电压越大于开路电压下限值时，说明该样本梯次电池的充电后电压越高，此时说明该样本梯次电池越可用，那么在当前设定时间该样本梯次电池的可用程度就越高。步骤S14：根据在过去各个设定时段中各个样本梯次电池类别中的各个样本梯次电池的可用程度，确定在过去各个设定时段中各个样本梯次电池类别对应的可用权重。根据各个样本梯次电池类别中的各个样本梯次电池的可用程度，确定各个样本梯次电池类别的可用权重，以对各个样本梯次电池类别的可用情况进行区分，以便于后续准确确定各个样本梯次电池的可信程度，以更好地训练梯次电池可用程度预测网络，具体实现过程如下：步骤S141：根据在过去每个设定时段中各个样本梯次电池类别中的各个样本梯次电池的可用程度，计算在过去每个设定时段中各个样本梯次电池类别对应的可用程度均值。对在过去每个设定时段中的每个样本梯次电池类别的各个样本梯次电池的可用程度，进行均值处理，从而可以得到该样本梯次电池类别的对应的可用程度均值，可以以该可用程度均值代表该样本梯次电池类别的可用评分。步骤S142：按照在过去每个设定时段中各个样本梯次电池类别对应的可用程度均值从大到小的顺序，对在过去每个设定时段中各个样本梯次电池类别进行排序。针对在过去每个设定时段中各个样本梯次电池类别的可用评分大小，按照可用评分从大到小的顺序，对各个样本梯次电池类别进行排序，从而可以得到在过去每个设定时段中的样本梯次电池类别序列。步骤S143：确定排序后的在过去每个设定时段中各个样本梯次电池类别对应的初始的可用权重，各个样本梯次电池类别对应的初始的可用权重与该样本梯次电池类别对应的排序序号的和相同。根据在过去每个设定时段中的样本梯次电池类别序列，按照序列中的样本梯次电池类别的排序位序从小到大的顺序，依次将序列中的样本梯次电池类别评为一级可用，二级可用，三级可用，并以此类推，从而完成在过去每个设定时段中的各个样本梯次电池类别的可用等级的划分。在划分好各个样本梯次电池类别的可用等级之后，为各个样本梯次电池类别赋予不同的可用权重，以进行可用差异区分，可用权重的分配方式为：可用等级越高，即可用评分越大，对应的可用权重就越大。本实施例依据样本梯次电池类别的排序位序，为各个样本梯次电池类别分配可用权重，例如，总共有10个样本梯次电池类别，那么将一级可用对应的样本梯次电池类别的可用权重设置为10，二级可用对应的样本梯次电池类别的可用权重设置为9，三级可用对应的样本梯次电池类别的可用权重设置为8，并依次类推，从而得到在过去每个设定时段中的各个样本梯次电池类别的可用权重，为了便于与后面归一化处理后的可用权重进行区分，将这里得到的可用权重称为初始的可用权重。步骤S144：对在过去每个设定时段中各个样本梯次电池类别对应的初始的可用权重进行归一化处理，从而最终得到在过去每个设定时段中各个样本梯次电池类别对应的可用权重。对于在过去每个设定时段中的各个样本梯次电池类别，为了获取统一的评价标准，将这各个样本梯次电池类别的初始的可用权重进行归一化处理，使得归一化处理后的各个可用权重的累加和为1，从而得到在过去每个设定时段中的各个样本梯次电池类别的最终的可用权重。步骤S15：根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的在不同充电量情况下的极化电阻、欧姆电阻和极化电容，确定在过去各个设定时段中所有样本梯次电池的偏差率。由于随着电池的使用，其在进行充放电测试时所获得的极化电阻、欧姆电阻和极化电容这些电池参数就会与其对应的理论值之间的偏差越来越大，因此通过考察这种偏差情况，就有助于后续准确确定梯次电池的可信程度，进而便于更好地对梯次电池可用程度预测网络进行训练。步骤S151：根据各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的在不同充电量情况下的极化电阻、欧姆电阻和极化电容，计算各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的在不同充电量情况下的极化电阻的偏差率、欧姆电阻的偏差率和极化电容的偏差率。其中，偏差率=/理论值*100%，理论值是指在不同充电量下，样本梯次电池的各个所求电池参数的标准大小，该标准大小为一定值。对于同一样本梯次电池的同一电池参数，其在不同充电量档位下的偏差率可能并不相同。根据上述偏差率的确定方式，可以得到每个样本梯次电池组中每个样本梯次电池在过去每个设定时段对应的在4个不同充电量情况下的极化电阻的偏差率、欧姆电阻的偏差率和极化电容的偏差率。步骤S152：根据各个样本梯次电池组中每个样本梯次电池在过去每个设定时段对应的所有偏差率，确定所有偏差率中的最大偏差率，并将所述最大偏差率作为在过去对应设定时段中对应样本梯次电池的最终偏差率，从而得到在过去各个设定时段中所有样本梯次电池的偏差率。由于电池的电池参数的偏差率越大，则说明该电池越容易发生故障或者提前报废，为了最大程度的衡量电池参数的偏差情况，本实施例针对每个样本梯次电池在过去每个设定时段对应的所有偏差率，将其中最大的偏差率作为该样本梯次电池在过去对应设定时段的最终的偏差率。步骤S16：根据在过去各个设定时段中各个样本梯次电池类别对应的可用权重以及每个样本梯次电池类别中各个样本梯次电池的偏差率，确定在过去各个设定时段中所有样本梯次电池的可信程度。在过去每个设定时段中，当样本梯次电池所在的样本梯次电池类别对应的可用权重越大时，说明该样本梯次电池的可用程度越高，该样本梯次电池越不容易发生故障或者提前报废，那么在后续训练梯次电池可用程度预测网络时，该样本梯次电池对应的可信度就应当越高；而当样本梯次电池的偏差率越大时，说明该样本梯次电池的电池参数与理论值相差较大，该样本梯次电池越容易发生故障或者提前报废，测试结果不大可靠，那么在后续训练梯次电池可用程度预测网络时，该样本梯次电池对应的可信度就应当越低。基于上述分析，可以根据每个样本梯次电池所在的样本梯次电池类别的可用权重以及该样本梯次电池的偏差率，来确定每个样本梯次电池的可信程度，以便于后续更好地训练梯次电池可用程度预测网络。步骤S161：根据在过去各个设定时段中各个样本梯次电池类别对应的可用权重以及每个样本梯次电池类别中各个样本梯次电池的偏差率，计算在过去各个设定时段中所有样本梯次电池的初始的可信程度，对应的计算公式为：其中，为在过去每个设定时段中每个样本梯次电池的初始的可信程度，在过去每个设定时段中每个样本梯次电池对应的样本梯次电池类别对应的可用权重，为在过去该设定时段中每个样本梯次电池的偏差率。在上述的在过去每个设定时段中每个样本梯次电池的初始的可信程度的计算公式中，样本梯次电池的偏差率的取值范围为0-1，通过将1与该偏差率取差值，是为了改变样本梯次电池的初始的可信程度与该偏差率的正负关系。在过去每个设定时段中，当样本梯次电池对应的样本梯次电池类别对应的可用权重越大、该样本梯次电池的偏差率越小时，则该样本梯次电池的初始的可信程度就越大。步骤S162：对在过去每个设定时段中所有样本梯次电池的初始的可信程度进行归一化处理，从而最终得到在过去各个设定时段中所有样本梯次电池的可信程度。对于在过去每个设定时段中所有样本梯次电池的初始的可信程度，为了获取统一的评价标准，将所有样本梯次电池的初始的可信程度进行归一化处理，使得归一化处理后的各个可信程度的累加和为1，从而可以得到在过去各个设定时段中所有样本梯次电池的最终的可信程度。步骤S17：利用神经网络构建梯次电池可用程度预测网络，并根据在过去各个设定时段中所有样本梯次电池的可用程度和可信程度，构造梯次电池可用程度预测网络的训练样本和损失函数。利用时域卷积网络构建梯次电池可用程度预测网络，该梯次电池可用程度预测网络实质上是一种时序预测网络，由于利用TCN构建时序预测网络的具体构建过程属于现有技术，此处不再赘述。在构建好该梯次电池可用程度预测网络之后，为了对该预测网络进行训练以便于后续对梯次电池的可用程度进行预测，需要获取该预测网络的训练样本并确定该预测网络的损失函数。在本实施例中，每个样本梯次电池在过去各个设定时段都有其对应的可用程度，此时对于每个样本梯次电池，按照过去各个设定时段的时间先后顺序，对该样本梯次电池的可用程度进行排列，从而可以得到一个可用程度序列，该可用程度序列中的每个可用程度即为一个训练样本。通过这种方式，对于不同的样本梯次电池，可以得到多个可用程度序列，从而可以得到该预测网络的多个训练样本。在确定梯次电池可用程度预测网络的训练样本之后，为了对该预测网络进行训练，还需要确定该预测网络的损失函数。现有的TCN网络通常采用的损失函数为均方误差损失函数LOSS=，其中，为网络输出的训练样本的数目，为网络输出的第i个训练样本对应的实际值和预测值之间的差异值。但是在均方误差损失函数中，没有考虑不同训练样本的可信度差异，即默认每个训练样本对应的可信程度是等同的，当某些训练样本的实际可信度较低时，就会导致最终训练得到的预测网络的预测准确性相对较差。基于这种情况，本实施例根据样本梯次电池的可信程度，也就是每个训练样本对应的可信程度，对均方误差损失函数进行修正，并将修正后的损失函数作为梯次电池可用程度预测网络的损失函数，对应的计算公式为：=其中，为梯次电池可用程度预测网络的损失函数，为该梯次电池可用程度预测网络输出的训练样本的数目，为该梯次电池可用程度预测网络输出的第i个训练样本对应的实际值和预测值之间的差异值，为该梯次电池可用程度预测网络输出的第i个训练样本对应的可信程度，n为该梯次电池可用程度预测网络输出的训练样本的总数目。通过上述的梯次电池可用程度预测网络的损失函数的计算公式可知，当训练样本对应的可信程度越大时，则说明该训练样本越可信，从而对应的损失函数就会越大，此时就需要对梯次电池可用程度预测网络的网络参数进行更加精准的调整，从而使该网络预测得更准确。步骤S18：根据梯次电池可用程度预测网络的训练样本和损失函数，对梯次电池可用程度预测网络进行训练，从而得到最终的梯次电池可用程度预测网络。在通过上述步骤S17确定梯次电池可用程度预测网络的训练样本和损失函数后，根据确定的训练样本和损失函数，对该预测网络进行训练，在进行训练时，该预测网络会根据每个可用程度序列中的每前n个训练样本，实施者可根据实际的性能表现和需求确定n的具体取值，本实施例设置n=3，对这n个训练样本的后n个训练样本进行预测，并根据后n个训练样本的实际值和预测值之间的差异值以及后n个训练样本的可信程度，确定损失函数的取值，进而根据确定的损失函数的取值，对预测网络参数进行调整，从而最终得到训练好的预测网络。步骤S2：利用该梯次电池可用程度预测网络，对待检测的梯次锂电池组进行检测预警，对应的流程图如图3所示，具体实现过程如下：步骤S21：获取梯次电池组中各个梯次电池在过去各个设定时段对应的第一测试数据，第一测试数据包括：在充放电测试过程中不同充电量情况下的开路电压和充放电效率。对于待检测的梯次电池组，获取该梯次电池组中的每个梯次电池在过去n个设定时段对应的第一测试数据，这里的n就是指上述步骤S1中梯次电池可用程度预测网络的损失函数中的输出的训练样本的总数目n。这里的第一测试数据包括在梯次电池的充放电测试过程中不同充电量情况下的开路电压和充放电效率，由于该在梯次电池的充放电测试过程中不同充电量情况下的开路电压和充放电效率的具体获取过程，与上述步骤S11中获取各个样本梯次电池组中各个样本梯次电池在过去各个设定时段对应的第二测试数据中的开路电压和充放电效率的获取过程完全相同，此处不再赘述。步骤S22：根据梯次电池组中各个梯次电池在过去各个设定时段对应的第一测试数据，确定梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度。具体的，根据梯次电池组中各个梯次电池在过去各个设定时段对应的第一测试数据，确定梯次电池组中各个梯次电池在过去各个设定时段对应的开路电压均值和充放电效率均值；根据梯次电池组中各个梯次电池在过去各个设定时段对应的开路电压均值和充放电效率均值，计算梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度，对应的计算公式为：其中，为梯次电池组中每个梯次电池在过去每个设定时段对应的可用程度，为梯次电池组中每个梯次电池在过去每个设定时段对应的充放电效率均值，为梯次电池组中每个梯次电池在过去每个设定时段对应的开路电压均值，为梯次电池的开路电压下限值。需要说明的是，由于上述获取梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度的具体实现过程，与上述步骤S14中获取在过去各个设定时段中所有样本梯次电池的可用程度的实现过程完全相同，此处不再赘述。步骤S23：将梯次电池组中每个梯次电池在过去各个设定时段对应的可用程度输入到预先获取的梯次电池可用程度预测网络中，由梯次电池可用程度预测网络对每个梯次电池在未来下一个设定时段对应的可用程度进行预测，从而得到梯次电池组中各个梯次电池在未来下一个设定时段对应的可用程度预测值。基于上述步骤S18中得到的最终的梯次电池可用程度预测网络，对于待检测的梯次电池组中每个梯次电池，将该梯次电池在过去n个设定时段对应的可用程度输入到该预测网络中，通过该预测网络的预测，得到该梯次电池在未来下一个设定时段对应的可用程度预测值，根据该可用程度预测值，可以提前知道该梯次电池在未来下一个设定时段的可用情况，以便于进行提前预警。步骤S24：根据梯次电池组中各个梯次电池在未来下一个设定时段对应的可用程度预测值，确定梯次电池组中各个梯次电池在未来下一个设定时段对应的不可用的梯次电池，进而确定当前的预警等级。对于待检测的梯次电池组中每个梯次电池，判断该梯次电池在未来下一个设定时段对应的可用程度预测值是否小于设定可用程度阈值，若可用程度预测值小于设定可用程度阈值，则判定该梯次电池为在未来下一个设定时段的不可用的梯次电池，否则判定该梯次电池为在未来下一个设定时段的可用的梯次电池。其中，设定可用程度阈值的取值是根据需要进行设定的，当对梯次电池的使用要求越高时，则对应设定可用程度阈值的取值就越大，本实施例设置该设定可用程度阈值取值为0.65。通过这种方式，可以确定待检测的梯次电池组中各个梯次电池在未来下一个设定时段对应的不可用的梯次电池。在确定待检测的梯次电池组中各个梯次电池在未来下一个设定时段对应的不可用的梯次电池之后，为了实现对待检测的梯次电池组分级预警，根据梯次电池组中各个梯次电池在未来下一个设定时段对应的不可用的梯次电池，确定梯次电池组在未来下一个设定时段对应的不可用的梯次电池占比，并根据不可用的梯次电池占比，确定当前的预警等级，不可用的梯次电池占比越大，当前的预警等级就越高。在本实施例中，当梯次电池组在未来下一个设定时段对应的不可用的梯次电池占比不低于第一占比阈值且低于第二占比阈值时，则进行一级预警，当不低于第二占比阈值且低于第三占比阈值时，则进行二级预警，当不低于第三占比阈值时，则进行三级预警。一级预警、二级预警和三级预警的预警等级依次升高。本实施例设置第一占比阈值、第二占比阈值和第三占比阈值的取值分别为5%，10%，15%。这里设定不同等级的预警的作用是，实现梯次锂电池组的分批预警，通过预警的统计提前告知使用者需要更换的梯次电池的数量，及早进行准备，以减少电池亏损对实际使用的影响。本发明通过对梯次电池组中各个梯次电池在过去各个设定时段对应的第一测试数据进行测量，并基于测量得到的第一测试数据，确定梯次电池组中各个梯次电池在过去各个设定时段对应的可用程度，进而基于确定的这些可用程度，利用预测网络对梯次电池在未来下一个设定时段对应的可用程度进行预测，进而根据预测的可用程度，确定梯次电池组中各个梯次电池在未来下一个设定时段对应的不可用的梯次电池，并进行相应的预警。由于本发明可以提前检测到梯次电池在未来时段的可用程度，进而可实现提前预警，有效解决了现有的梯次电池性能检测具有一定滞后性的问题。需要说明的是：以上所述实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围，均应包含在本申请的保护范围之内。
