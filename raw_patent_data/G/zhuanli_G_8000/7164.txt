标题title
一种彩色电润湿电子纸实时色彩转换方法
摘要abst
本发明涉及一种彩色电润湿电子纸实时色彩转换方法。将视频分解成一帧帧的图像数据，并对图像进行分区处理；然后将图像色彩转换成256阶的灰度值信息，而后进行32×32的离散余弦变换将图像灰度信息转换为频率分量；对32×32矩阵隔位取出8×8矩阵，并对所有数值求平均；灰度值大于均值或大于下一个像素值的记为1，反之记为0，计算哈希值，构造长整型指纹，对分区像素进行查找分组；再对相似的局部特征经池化层求平均的降采样处理；通过权值矩阵将前后层的特征神经元全连接；最后将目标像素分区RGB色彩信息根据色彩转换准则与驱动电压‑开口率特性曲线，将各个目标像素的RGB色彩计算转化为CMY油墨的驱动电压，并保存以便下次播放无需重复计算。
权利要求书clms
1.一种彩色电润湿电子纸实时色彩转换方法，其特征在于，包括如下步骤：步骤S1、读取并解码需要播放的视频数据；步骤S2、将动态的视频分解为静态的每一帧图像数据，对每一帧图像进行像素分区，并构造特征矩阵和长整型指纹对存在相同像素分区的图像进行分组，一帧图像仅在一个分组中；然后对特征矩阵和长整型指纹进行卷积运算，对像素分区进行分组；步骤S3、对像素分区的像素特征经池化层进行求平均的降采样处理，通过权值矩阵将前后层的特征神经元进行全连接，比较对应像素分区的变化情况，查找出这些像素分区的目标像素分区；步骤S4、对于目标像素分区的RGB色彩信息根据色彩转换准则与驱动电压-开口率特性曲线，将各个目标像素分区的RGB色彩计算转化为CMY油墨的驱动电压并保存，以便下次播放无需重复计算，实现RGB色彩视频在电润湿电子纸上的CMY色彩实时动态显示。2.根据权利要求1所述的一种彩色电润湿电子纸实时色彩转换方法，其特征在于，所述步骤S2中，对每一帧图像进行像素分区，即将每一帧图像按照32×32矩阵进行像素分区。3.根据权利要求1所述的一种彩色电润湿电子纸实时色彩转换方法，其特征在于，所述步骤S2中，对像素分区进行分组的方式为：将图像色彩转换成256阶的灰度值信息，对图像的灰度信息按照32×32矩阵进行离散余弦变换，转换为灰度信息频率分量，并隔位选取出8×8矩阵求平均；接着将64个哈希位与其平均值及下一个像素进行比较，大于平均值或下一个像素灰度值的哈希位标记为1，否则标记为0，计算长整型哈希值，构造长整型指纹，并通过卷积层对图像中的像素分区进行分组。4.根据权利要求1或3所述的一种彩色电润湿电子纸实时色彩转换方法，其特征在于，设计一个神经网络模型用于相似图像像素色彩数据检测；首先，将视频资源读取到神经网络模型的输入层，并根据像素分区转化为相应数量的特征矩阵；然后将这些特征矩阵送入卷积层进行卷积运算，提取出图像的像素分区的像素特征，并对至少有一个像素分区的像素特征相同的图像进行分组；接着，将这些图像的对应像素分区经池化层进行降采样处理，找出变化的目标像素分区，即对这些图像的像素分区的像素特征求平均值，在降低相同像素分区的图像的分辨率同时减少像素分区像素分类的过拟合现象发生概率，查找出这些像素分区的目标像素分区；最后，把前一层的所有局部特征的神经元通过权值矩阵与后一层对应坐标的神经元经全连接层进行逐一相连，并根据检测需求，将同一像素分区的不同图像的目标像素分区的像素特征向量映射到神经网络模型的输出层；由输出层负责对全连接层传输过来的特征向量进行色域转换和驱动电压计算操作。5.根据权利要求1所述的一种彩色电润湿电子纸实时色彩转换方法，其特征在于，所述将各个目标像素分区的RGB色彩计算转化为CMY油墨的驱动电压的方式具体如下：在白色衬底上实现256级灰度的情况下，CMY三色油墨的着色覆盖率ηC,ηM,ηY分别为：则像素色彩所需的开口率η′C,η′M,η′Y分别为最后，再根据CMY不同色彩的油膜色彩反射率αC,αM,αY、单层透明板的透射率为以及开口率与其对应驱动电压的关系表达式，求解出CMY对应色彩的驱动电压，实现RGB转CMY色彩空间的图像色彩还原；CMY三色油膜色彩反射率αC,αM,αY、开口率η′C,η′M,η′Y与驱动电压UC,UM,UY的表达式记为：其中nL为像素点填充溶液的折射率，nC_oil,nM_oil,nY_oil分别为CMY对应色彩油墨的折射率。
说明书desc
技术领域本发明属于反射式显示器的显示画面的色域色彩转换技术研究，具体涉及一种彩色电润湿电子纸实时色彩转换方法。背景技术电润湿电子纸显示器作为新型反射式类纸化显示器，相比于电泳电子纸具有响应速度快、良好的动态特性、友好的可视性、低功耗、轻薄柔性化等优点，在电子书阅读、平板阅读、办公商务、户外广告等领域具有一定的应用前景。尽管电润湿电子纸具有诸多优点，但是电润湿电子纸显示器还存在一些不得不解决的问题。视频播放也还存在一定的问题。由于电润湿电子纸显示器的油墨是CMY组成的，而现在的大部分视频、图像资源都是针对RGB色域显示而制作的，如果将RGB视频、图像资源放到CMY的电润湿电子纸显示器上播放，则会出现色彩偏移失真等问题，从而影响显示器的整体观看效果和使用体验。因此，解决现有电润湿电子纸显示器的RGB视频、图像播放的色彩偏色、失真等问题，成为该显示器显示效果的一个关键性问题。发明内容本发明的目的在于提供一种彩色电润湿电子纸实时色彩转换方法，用于电润湿电子纸显示器的视频播放帧图像的色彩实时转换与校正。为实现上述目的，本发明的技术方案是：一种彩色电润湿电子纸实时色彩转换方法，包括如下步骤：步骤S1、读取并解码需要播放的视频数据；步骤S2、将动态的视频分解为静态的每一帧图像数据，对每一帧图像进行像素分区，并构造特征矩阵和长整型指纹对存在相同像素分区的图像进行分组，一帧图像仅在一个分组中；然后对特征矩阵和长整型指纹进行卷积运算，对像素分区进行分组；步骤S3、对像素分区的像素特征经池化层进行求平均的降采样处理，通过权值矩阵将前后层的特征神经元进行全连接，比较对应像素分区的变化情况，查找出这些像素分区的目标像素分区；步骤S4、对于目标像素分区的RGB色彩信息根据色彩转换准则与驱动电压-开口率特性曲线，将各个目标像素分区的RGB色彩计算转化为CMY油墨的驱动电压并保存，以便下次播放无需重复计算，实现RGB色彩视频在电润湿电子纸上的CMY色彩实时动态显示。在本发明一实施例中，所述步骤S2中，对每一帧图像进行像素分区，即将每一帧图像按照32×32矩阵进行像素分区。在本发明一实施例中，所述步骤S2中，对像素分区进行分组的方式为：将图像色彩转换成256阶的灰度值信息，对图像的灰度信息按照32×32矩阵进行离散余弦变换，转换为灰度信息频率分量，并隔位选取出8×8矩阵求平均；接着将64个哈希位与其平均值及下一个像素进行比较，大于平均值或下一个像素灰度值的哈希位标记为1，否则标记为0，计算长整型哈希值，构造长整型指纹，通过卷积层对图像中的像素分区进行分组。在本发明一实施例中，设计一个神经网络模型用于相似图像像素色彩数据检测；首先，将视频资源读取到神经网络模型的输入层，并根据像素分区转化为相应数量的特征矩阵；然后将这些特征矩阵送入卷积层进行卷积运算，提取出图像的像素分区的像素特征，并对至少有一个像素分区的像素特征相同的图像进行分组；接着，将这些图像的对应像素分区经池化层进行降采样处理，找出变化的目标像素分区，即对这些图像的像素分区的像素特征求平均值，在降低相同像素分区的图像的分辨率同时减少像素分区像素分类的过拟合现象发生概率，查找出这些像素分区的目标像素分区；最后，把前一层的所有局部特征的神经元通过权值矩阵与后一层对应坐标的神经元经全连接层进行逐一相连，并根据检测需求，将同一像素分区的不同图像的目标像素分区的像素特征向量映射到神经网络模型的输出层；由输出层负责对全连接层传输过来的特征向量进行色域转换和驱动电压计算操作。在本发明一实施例中，所述将各个目标像素分区的RGB色彩计算转化为CMY油墨的驱动电压的方式具体如下：针对电润湿电子纸显示器油墨的驱动电压大小问题，计算出256级灰度RGB图像转CMY的色度值分别为：其中R、G、B、C、M、Y分别对应了红、绿、蓝、青、品红、黄的色度值；然后，由于电润湿电子纸显示器就是由青、品红、黄三色油墨叠层组成的，在不施加电压的情况下，油膜开口率为0，此时油膜铺满整个像素。随着施加电压的逐渐增大，油膜的收缩率也逐渐增加。由于需要根据CMY色度值来还原图像本来的真实色彩，因此对CMY三色油膜单像素着色覆盖率ηC,ηM,ηY分别计算为：则像素色彩所需的开口率η′C,η′M,η′Y分别为最后，再根据CMY不同色彩的油膜色彩反射率αC,αM,αY、单层透明板的透射率为以及开口率与其对应驱动电压的关系表达式，求解出CMY对应色彩的驱动电压，实现RGB转CMY色彩空间的图像色彩还原；CMY三色油膜色彩反射率αC,αM,αY、开口率η′C,η′M,η′Y与驱动电压UC,UM,UY的表达式记为：其中nL为像素点填充溶液的折射率，nC_oil,nM_oil,nY_oil分别为CMY对应色彩油墨的折射率。相较于现有技术，本发明具有以下有益效果：本发明方法用于电润湿电子纸显示器的视频播放帧图像的色彩实时转换与校正，能够解决现有电润湿电子纸显示器的RGB视频、图像播放的色彩偏色、失真等问题。附图说明图1为CMY三色叠加的彩色电润湿电子纸显示器结构示意图。图2为彩色电润湿电子纸动态视频播放的图像色域转换流程示意图。图3为基于帧图像目标像素感知哈希的卷积神经网络模型处理流程示意图。图4为油墨驱动电压与开口率的关系特性曲线图。具体实施方式下面结合附图，对本发明的技术方案进行具体说明。本实例是介绍三层彩色电润湿纸动态色彩转换的视频播放显示关键技术，下面结合附图进行具体说明。如图1所示，一种实现彩色电润湿电子纸显示器通过CMY三层油墨在施加不同电压的情况下，实现不同电场下的油墨收缩程度不同。由白色衬底减去对应的CMY色彩色度，进而呈现出逼近RGB的色彩显示。彩色电润湿电子纸显示器主要由透明顶板1、两侧挡板2、水3、CMY油墨、疏水涂层5、像素墙6、透明电极7、透明基板8以及白色衬底9组成。图2是本发明的彩色电润湿电子纸动态视频播放的图像色域转换思路，具体步骤如下：步骤S1、神经网络模型读取需要播放的视频信息；步骤S2、将视频分解成一幅幅帧图像信息；步骤S3、与此同时，开始对这些帧图像信息进行灰度计算，根据像素矩阵进行分区，按照相似度进行归类相似分区与图像；步骤S4、比较前后相邻的帧图像分区对应像素的灰度信息是否发生改变，若发生改变，则重新计算对应分区对应像素的灰度值；步骤S5：根据视频画面的RGB色度值以及电压-开口率的特性曲线，输出对应的驱动电压来改变CMY油墨的开口率，从而显示电润湿电纸屏减法色彩的反射式显示。图3，是在搭建好彩色电润湿电子纸显示系统后，一种用于彩色电润湿电子纸动态视频播放的图像色域转换方法的具体实现步骤：步骤S1、将待播放的视频输入到模型中进行解析，并分解成一帧一帧的图像数据；步骤S2、对帧图像数据进行分区，并转化为灰度信息；步骤S3、对分区像素的灰度信息进行32×32的离散余弦变换，生成对应像素的灰度频率分量；步骤S4、对32×32矩阵进行隔位选取出8×8矩阵，并对这64个哈希位求平均；步骤S5、将这64个值与平均值以及下一个像素进行比较，若大于平均值或者下一个像素灰度值的标记为“1”，反之标记为“0”，并构造出长整型哈希值以此对相似像素分区进行分组，剔除标记并剔除特征相同的像素分区；步骤S6、对特征矩阵与长整型哈希值进行逐层卷积运算，并对像素分区特征相似的图像进行归类；步骤S7、进一步对这些相似图像进行池化层降采样处理，比较对应像素分区的变化情况，对目标分区进行特征值进行求平均，以便减少过拟合的发生概率；步骤S8、把上一层局部特征的神经元经过权值矩阵与后一层对应像素的神经元进行全连接；步骤S9、对同一分区不同图像的目标像素特征向量进行映射输出；步骤S10、计算目标像素特征向量的RGB色彩信息，并根据色彩转换准则，将RGB色彩转化为CMY色彩。步骤S11、根据图4驱动电压上升或下降过程对油墨开口率之间的特性曲线，以及色彩着色率与开口率之间的关系表达式x∈,X∈；计算并保存各个像素对应所需的驱动电压，以便下次播放不需要重复计算，其驱动电压表达式为其中i表示CMY中该色彩油墨所在的层数。需要说明的是，本发明实施是实现每个基色8位256灰阶共计16777216种色彩的视频、图像的显示。根据实际需要，如果实现单基色6位、或者10位灰度位深度，只需要更换高性能的中央处理单元、多功能视频处理单元、图像数值计算单元以及合适的调制比特数的图像灰度调制单元即可，本发明的核心思想不需要改变。需要说明的是，本发明中的CMY不同色彩油墨的驱动电压与其对应的开口率是通过检测获得数据，并经过一定非线性校正处理，本发明方法可以使用这一关系特性曲线，完成视频画面的动态色域转换。以上是本发明的较佳实施例，凡依本发明技术方案所作的改变，所产生的功能作用未超出本发明技术方案的范围时，均属于本发明的保护范围。
