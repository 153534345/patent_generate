标题title
能谱计数窗口的定位方法、装置、电子设备及存储介质
摘要abst
本发明公开了一种能谱计数窗口的定位方法、装置、电子设备及存储介质，该方法包括：获取待处理能谱，按照道址将所述待处理能谱划分为至少两个能谱分区，根据所述能谱分区确定至少一个候选能谱区段，其中，所述候选能谱区段包括至少一个能谱分区；确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段；根据所述标记能谱区段确定所述待处理能谱的目标计数窗口。通过本发明实施例的技术方案，实现了能谱尤其是核子及核辐射测量仪器测量能谱的计数窗口的自动定位，并降低时间复杂度的技术效果。
权利要求书clms
1.一种能谱计数窗口的定位方法，其特征在于，包括：获取待处理能谱，按照道址将所述待处理能谱划分为至少两个能谱分区，根据所述能谱分区确定至少一个候选能谱区段，其中，所述候选能谱区段包括至少一个能谱分区；确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段；根据所述标记能谱区段确定所述待处理能谱的目标计数窗口。2.根据权利要求1所述的方法，其特征在于，所述根据所述标记能谱区段确定所述待处理能谱的目标计数窗口，包括：根据所述标记能谱区段确定保留能谱区段；对所述保留能谱区段进行划分，得到与所述保留能谱区段对应的各个能谱分区，并根据与所述保留能谱区段对应的各个能谱分区更新所述标记能谱区段；如果满足预设结束分区条件，则将所述标记能谱区段作为所述待处理能谱的目标计数窗口；否则，返回执行根据所述标记能谱区段确定保留能谱区段的操作。3.根据权利要求2所述的方法，其特征在于，所述根据所述标记能谱区段确定保留能谱区段，包括：将所述标记能谱区段作为保留能谱区段；或者，将邻近位于所述标记能谱区段两端中至少一端的第一预设数量的能谱分区合并至所述标记能谱区段中得到保留能谱区段；或者，将邻近位于所述标记能谱区段两端中至少一端的第二预设数量的道址合并至所述标记能谱区段中得到保留能谱区段。4.根据权利要求2所述的方法，其特征在于，所述根据与所述保留能谱区段对应的各个能谱分区更新所述标记能谱区段，包括：根据所述保留能谱区段确定参考能谱区段，并根据所述参考能谱区段以及位于所述参考能谱区段两端的能谱分区确定至少一个重组能谱区段；如果所述重组能谱区段的窗口定位指标优于参考能谱区段的窗口定位指标，则将窗口定位指标最优的重组能谱区段更新为所述参考能谱区段，返回执行根据所述参考能谱区段以及位于所述参考能谱区段两端的能谱分区确定至少一个重组能谱区段的操作；否则，将所述参考能谱区段作为标记能谱区段。5.根据权利要求4所述的方法，其特征在于，所述根据所述保留能谱区段确定参考能谱区段，并根据所述参考能谱区段以及位于所述参考能谱区段两端的能谱分区确定至少一个重组能谱区段，包括：确定所述保留能谱区段的各个能谱分区的窗口定位指标，将所述窗口定位指标满足预设参考条件的能谱分区作为参考能谱区段，或者，如果所述标记能谱区段中的能谱分区数量大于预设分区数量阈值，将位于所述保留能谱区段两端中至少一端的第三预设数量的能谱分区从所述保留能谱区段中剔除，得到参考能谱区段；根据邻近位于所述参考能谱区段两端中至少一端的第四预设数量的能谱分区确定待组合能谱区段，将所述参考能谱区段与所述待组合能谱区段进行合并，得到至少一个重组能谱区段。6.根据权利要求4所述的方法，其特征在于，所述根据所述保留能谱区段确定参考能谱区段，并根据所述参考能谱区段以及位于所述参考能谱区段两端的能谱分区确定至少一个重组能谱区段，包括：将所述保留能谱区段作为参考能谱区段，根据位于所述参考能谱区段两端中至少一端的第五预设数量的能谱分区确定待剔除能谱区段，将所述参考能谱区段中的所述待剔除能谱区段进行剔除，得到至少一个重组能谱区段。7.根据权利要求4所述的方法，其特征在于，还包括：如果所述重组能谱区段中能谱分区的道址数量与所述参考能谱区段中能谱分区的道址数量的差值不超过预设差值阈值，则将所述标记能谱区段作为所述待处理能谱的目标计数窗口。8.根据权利要求2所述的方法，其特征在于，所述根据与所述保留能谱区段对应的各个能谱分区更新所述标记能谱区段，包括：遍历所述保留能谱区段中各个能谱分区的组合，得到至少一个组合能谱区段，其中，所述组合能谱区段由两个或两个以上连续排布的能谱分区组合得到；根据各个能谱分区以及各个组合能谱区段的窗口定位指标更新所述标记能谱区段。9.根据权利要求2所述的方法，其特征在于，所述对所述保留能谱区段进行划分，得到与所述保留能谱区段对应的各个能谱分区，包括：按照道址的总数量和预先设定的与能谱分区包含的道址数量，将所述保留能谱区段划分为至少两个能谱分区；或者，按照道址的总数量和设定的与能谱分区对应的分区数量，将所述保留能谱区段划分为至少两个能谱分区；或者，按照所述保留能谱区段的能谱数据分布，将所述保留能谱区段划分为至少两个能谱分区；或者，基于预设的随机算法将所述保留能谱区段划分为至少两个能谱分区；或者，根据所述保留能谱区段中各个能谱分区的数量以及各个能谱分区对应的道址段的排布信息确定重分区能谱区段，对所述重分区能谱区段进行划分，根据所述重分区能谱区段的划分结果得到与所述保留能谱区段对应的各个能谱分区。10.根据权利要求9所述的方法，其特征在于，所述根据所述保留能谱区段中各个能谱分区的数量以及各个能谱分区对应的道址段的排布信息确定重分区能谱区段，包括：如果所述保留能谱区段中包含的能谱分区的总数量未达到第一预设数量阈值，则将所述保留能谱区段作为重分区能谱区段；如果所述保留能谱区段中包含的能谱分区的总数量达到第二预设数量阈值，则将位于所述保留能谱区段两端中至少一端的第六预设数量的各个能谱分区组成的能谱区段作为重分区能谱区段。11.根据权利要求2所述的方法，其特征在于，所述预设结束分区条件包括所述保留能谱区段中除所述标记能谱区段之外的能谱分区包含的道址数量达到第一预设道址数量阈值，或者，所述标记能谱区段的更新次数达到预设次数阈值，或者，在所述标记能谱区段连续更新预设次数的情况下每次更新后所述标记能谱区段的窗口定位指标的变化不超过预设变化量，或者，所述标记能谱区段的窗口定位指标优于预设窗口定位指标阈值。12.根据权利要求1所述的方法，其特征在于，所述确定每个候选能谱区段的窗口定位指标，包括：根据各个候选能谱区段的能谱数据分别确定每个候选能谱区段的窗口定位指标；或者，根据各个候选能谱区段的能谱数据以及所述待处理能谱的能谱数据，分别确定每个候选能谱区段的窗口定位指标；或者，根据各个候选能谱区段的能谱数据以及与所述待处理能谱对应的测量样品数据，分别确定每个候选能谱区段的窗口定位指标；或者，根据各个候选能谱区段的能谱数据、与所述待处理能谱对应的测量环境数据，分别确定每个候选能谱区段的窗口定位指标；或者，根据各个候选能谱区段的能谱数据、与所述待处理能谱对应的测量样品数据以及测量环境数据，分别确定每个候选能谱区段的窗口定位指标。13.根据权利要求12所述的方法，其特征在于，所述能谱数据包括样品计数、本底计数、测量时间、道址以及能量中的至少一项；所述测量样品数据包括测量样品活度、体积以及质量中的至少一项；所述测量环境数据包括测量环境中的温度、湿度、粒子计数、粉尘以及电磁测量中的至少一项。14.一种能谱计数窗口的定位装置，其特征在于，包括：能谱划分模块，用于获取待处理能谱，按照道址将所述待处理能谱划分为至少两个能谱分区，根据所述能谱分区确定至少一个候选能谱区段，其中，所述候选能谱区段包括至少一个能谱分区；能谱区段标记模块，用于确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段；计数窗口确定模块，用于根据所述标记能谱区段确定所述待处理能谱的目标计数窗口。15.一种电子设备，其特征在于，所述电子设备包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-13中任一项所述的能谱计数窗口的定位方法。16.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机指令，所述计算机指令用于使处理器执行时实现权利要求1-13中任一项所述的能谱计数窗口的定位方法。
说明书desc
技术领域本发明涉及能谱测量领域技术领域，尤其涉及能谱计数窗口的定位方法、装置、电子设备及存储介质。背景技术核子及核辐射测量仪器中，γ谱仪、α谱仪以及液体闪烁计数器均为常见的能谱型测量仪器，其测得的放射性能谱一般表示为道址与计数相对应的一系列数据。对于特定放射性同位素，其在能谱中贡献的计数一般会集中分布在相应的道址区域，能谱分析时只考虑这一区域的计数，可以避免区域外本底和其它同位素所贡献计数的干扰，称这一区域为计数窗口。对于液体闪烁计数器测量的能谱，目前业内还没有很好的计数窗口自动定位方法，这主要是因为液体闪烁计数器经常被用于测量能量为连续谱的β射线，而且液体闪烁计数器测量时往往存在猝灭效应，导致能谱有不同程度的变形与移动，其测量能谱通常不呈尖锐的正态分布，甚至较为平坦，无法沿用已有的自动寻峰技术。通过遍历所有可能的计数窗口的优值指数，比较FOM值的大小来定位计数窗口，这种方法效率过低，实用性较差。发明内容本发明提供了一种能谱计数窗口的定位方法、装置、电子设备及存储介质，以解决能谱的计数窗口难以准确定位的问题，实现能谱的计数窗口的自动定位，并降低时间复杂度的技术效果。根据本发明的一方面，提供了一种能谱计数窗口的定位方法，其特征在于，包括：获取待处理能谱，按照道址将所述待处理能谱划分为至少两个能谱分区，根据所述能谱分区确定至少一个候选能谱区段，其中，所述候选能谱区段包括至少一个能谱分区；确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段；根据所述标记能谱区段确定所述待处理能谱的目标计数窗口。根据本发明的另一方面，提供了一种能谱计数窗口的定位装置，其特征在于，包括：能谱划分模块，用于获取待处理能谱，按照道址将所述待处理能谱划分为至少两个能谱分区，根据所述能谱分区确定至少一个候选能谱区段，其中，所述候选能谱区段包括至少一个能谱分区；能谱区段标记模块，用于确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段；计数窗口确定模块，用于根据所述标记能谱区段确定所述待处理能谱的目标计数窗口。根据本发明的另一方面，提供了一种电子设备，所述电子设备包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够执行本发明任一实施例所述的能谱计数窗口的定位方法。根据本发明的另一方面，提供了一种计算机可读存储介质，所述计算机可读存储介质存储有计算机指令，所述计算机指令用于使处理器执行时实现本发明任一实施例所述的能谱计数窗口的定位方法。本发明实施例的技术方案，通过获取待处理能谱，按照道址将待处理能谱划分为至少两个能谱分区，以进行待处理能谱的初步分区，根据能谱分区确定至少一个候选能谱区段，确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段，以初步筛选计数窗口，根据标记能谱区段确定待处理能谱的目标计数窗口，解决了确定计数窗口时计算效率低以及实用性较差的问题，实现了能谱的计数窗口的自动定位，并降低时间复杂度，提高实用性的技术效果。应当理解，本部分所描述的内容并非旨在标识本发明的实施例的关键或重要特征，也不用于限制本发明的范围。本发明的其它特征将通过以下的说明书而变得容易理解。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例一所提供的一种能谱计数窗口的定位方法的流程示意图；图2为本发明实施例二所提供的一种能谱计数窗口的定位方法的流程示意图；图3为本发明实施例三所提供的一种能谱计数窗口的定位方法的流程示意图；图4为本发明实施例四所提供的一种待处理能谱的示意图；图5为本发明实施例四所提供的一种第1次分区的能谱示意图；图6为本发明实施例四所提供的一种第2次分区的能谱示意图；图7为本发明实施例四所提供的一种第3次分区的能谱示意图；图8为本发明实施例四所提供的一种第4次分区的能谱示意图；图9为本发明实施例四所提供的一种第5次分区的能谱示意图；图10为本发明实施例四所提供的一种第6次分区的能谱示意图；图11为本发明实施例七所提供的一种能谱的计数窗口装置的结构示意图；图12为本发明实施例八所提供的一种电子设备的结构示意图。具体实施方式为了使本技术领域的人员更好地理解本发明方案，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分的实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本发明保护的范围。需要说明的是，本发明的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本发明的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。实施例一图1为本发明实施例一所提供的一种能谱计数窗口的定位方法的流程示意图，本实施例可适用于对能谱的计数窗口进行自动定位的情况，该方法可以由能谱计数窗口的定位装置来执行，该装置可采用软件和/或硬件的方式实现，该装置可配置于电子设备中，如：PC端、服务器等。如图1所示，该方法包括：S110、获取待处理能谱，按照道址将待处理能谱划分为至少两个能谱分区，根据能谱分区确定至少一个候选能谱区段。其中，待处理能谱可以是基于核子及核辐射测量仪器测得的数据。能谱分区可以是将待处理能谱按照预设规则进行划分后得到的能谱区域，其中，预设规则可以根据实际需求确定，不做具体限定。候选能谱区段包括至少一个能谱分区，可以是每个能谱分区确定为一个候选能谱区段，还可以是相邻的至少两个能谱分区确定为一个候选能谱区段。需要说明的是，通过能谱型测量仪器测得的放射性能谱一般表示为道址与计数相对应的一系列数据，如表1所示。道址通常与能量呈正相关关系，其中线性关系或对数关系较为常见，道址i对应计数Ni，其物理含义为该核子及核辐射测量仪器在该道址对应的能量下记录了Ni个计数。表1道址12…ii+1…n计数N1N2…NiNi+1…Nn具体的，基于核子及核辐射测量仪器可以获取待处理能谱，或者获取预先测量存储的待处理能谱。根据预设规则，将待处理能谱按照道址进行划分，得到至少两个能谱分区。根据各能谱分区的组合可以确定至少一个候选能谱区段。可选地，当候选能谱区段中包括两个或两个以上的能谱分区时，各个能谱分区连续排布。示例性的，若能谱分区包括1、2、3和4，则可以将能谱分区1、2、3和4分别作为一个候选能谱区段，也可以将相邻的两个能谱分区作为一个候选能谱区段，如能谱分区1和2、能谱分区2和3以及能谱分区3和4，还可以将相邻的三个能谱分区作为一个候选能谱区段，如能谱分区1-3和能谱分区2-4，当然，也可以将能谱分区1-4作为一个候选能谱区段。在本实施例的基础上，可以通过下述任意一种方式来按照道址将待处理能谱划分为至少两个能谱分区：方式一、按照道址的总数量和预先设定的与能谱分区包含的道址数量，将待处理能谱划分为至少两个能谱分区。具体的，可以按照实际需求预先设定能谱分区中应当包含的道址数量，根据该道址数量以及道址的总数量对待处理能谱进行划分，得到至少两个能谱分区。若道址的总数量不是预先设定的与能谱分区包含的道址数量的整数倍，则可以将剩余的道址单独作为一个能谱分区，也可以将剩余的道址添加至最后一个能谱分区中。示例性的，道址的总数量为256，若预先设定的与能谱分区包含的道址数量为64，则可以将1-64、65-128、129-192以及193-256作为四个能谱分区；若预先设定的与能谱分区包含的道址数量为80，则可以将1-80、81-160、161-240以及241-256作为四个能谱分区或者将1-80、81-160、161-256作为三个能谱分区。方式二、按照道址的总数量和设定的与能谱分区对应的分区数量，将待处理能谱划分为至少两个能谱分区。具体的，可以按照实际需求预先设定与能谱分区对应的分区数量，根据该分区数量以及道址的总数量对待处理能谱进行划分，得到至少两个能谱分区。示例性的，道址的总数量为256，若预先设定的与能谱分区对应的分区数量为8，则可以将1-32、33-64、65-96、97-128、129-160、161-192、193-224以及225-256作为八个能谱分区。方式三、按照待处理能谱的能谱数据的分布，将待处理能谱划分为至少两个能谱分区。其中，能谱数据的分布可以是幅值分布等。可以理解的是，根据待处理能谱可以确定能谱数据的分布情况，以该分布情况可以对待处理能谱进行划分，例如计数值达到预设阈值划分为一个能谱区域等。具体可以是，基于预设分区值算法计算待处理能谱中每个道址对应的分区值；针对每个道址，计算所述道址的分区值以及邻近所述道址的预设数量的道址的分区值的平均值，根据各个道址对应的平均值将待处理能谱按道址划分为至少两个能谱分区。其中，预设分区值算法具体为：其中，P为每个道址的分区值，i为道址编号，Ni为道址i对应样品测量谱计数，Bi为道址i对应本底测量谱计数，TS为样品测量谱测量活时间，TB为本底测量谱测量活时间。计算所述道址的分区值以及邻近所述道址的预设数量的道址的分区值的平均值，能够对各个道址的分区值进行平滑处理。具体可以是，采用其两端15个的道址的分区值来计算该道址对应的平均值其中，n用于平均值计算的道址的实际总数量，i为待计算平均值的道址的道址编号，j为用于平均值计算的道址的道址编号。n一般情况下取31，但道址i靠近能谱边缘时，需要扣除道址j无效的情况。根据各个道址对应的平均值将待处理能谱按道址划分为至少两个能谱分区，具体可以是，根据每个道址对应的平均值确定每个道址的分区编号，将分区编号一致且连续的道址划分为一个分区。示例性地，可按如下公式计算每个道址的分区编号M：S120、确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段。其中，窗口定位指标可以是根据各个候选能谱区段的能谱数据或者各个候选能谱区段的能谱数据以及其他数据确定的指标数据，用于衡量计数窗口的优劣程度。标记能谱区段可以是各个候选能谱区段中的一个候选能谱区段或连续多个候选能谱区段，标记能谱区段为当前划分得到的计数窗口最优的能谱区段。具体的，根据窗口定位指标的计算方式，可以分别计算确定每个候选能谱区段的窗口定位指标。可以将窗口定位指标最优的一个候选能谱区段确定为标记能谱区段。也可以将最优的一个候选能谱区段、最优的一个候选能谱区段和左侧相邻的候选能谱区段、最优的一个候选能谱区段和右侧相邻的候选能谱区段以及最优的一个候选能谱区段和两侧相邻的候选能谱区段进行进一步的窗口定位指标的计算，以确定最优的组合方式为标记能谱区段。需要说明的是，本发明实施例中，窗口定位指标是否最优与其计算方式相关，在此并不对其具体取值进行限定。例如，最优的窗口定位指标可能是窗口定位指标中的最大值，也可能是窗口定位指标中的最小值，又可能是窗口定位指标中的最为邻近设定值的值，还可能是窗口定位指标中的中间值等。可选的，窗口定位指标为本领域学术界提出的优值指数，其定义通常为探测效率的平方与本底计数率之比，FOM值越大，指标效果越优，计数窗口的效果越好。可选的，窗口定位指标定义如下其中，F为候选能谱区段R的窗口定位指标，i为候选能谱区段R内的道址编号，Ni为道址i对应样品测量谱计数，Bi为道址i对应本底测量谱计数，TS为样品测量谱测量活时间，TB为本底测量谱测量活时间。可选的，窗口定位指标定义如下其中，F为候选能谱区段R的窗口定位指标，i为候选能谱区段R内的道址编号，Ni为道址i对应样品测量谱计数，Bi为道址i对应本底测量谱计数，TS为样品测量谱测量活时间，TB为本底测量谱测量活时间。可选的，窗口定位指标定义如下其中，F为候选能谱区段R的窗口定位指标，i为候选能谱区段R内的道址编号，LR为候选能谱区段R的宽度，Ni为道址i对应样品测量谱计数，Bi为道址i对应本底测量谱计数，TS为样品测量谱测量活时间，TB为本底测量谱测量活时间。上述各确定窗口定位指标的方式只是示例性说明，并非对窗口定位指标的计算方式的限制，任何可以用来评价计算窗口效果的指标都可以作为窗口定位指标，在本实施例中不做具体限定。示例性的，总共有8个候选能谱区段，候选能谱区段4对应的窗口定位指标为8个候选能谱区段中最优的一个，此时，可以进一步计算候选能谱区段4、候选能谱区段3-4、候选能谱区段4-5以及候选能谱区段3-5的窗口定位指标，若其中候选能谱区段4对应的窗口定位指标最优，则将候选能谱区段4作为标记能谱区段；若候选能谱区段3-4对应的窗口定位指标最优，则进行进一步扩张，确定候选能谱区段3-4、候选能谱区段2-4、候选能谱区段3-5以及候选能谱区段2-5对应的窗口定位指标，并依次确定最优区段和扩张区段，以确定标记能谱区段；若候选能谱区段4-5或候选能谱区段3-5的窗口定位指标最优，则确定标记能谱区段的方式与候选能谱区段3-4对应的窗口定位指标最优的情况类似，在此不再赘述。S130、根据标记能谱区段确定待处理能谱的目标计数窗口。具体的，在确定出标记能谱区段后，可以认为标记能谱区段在当前划分规则下为最优的能谱区段。在此情况下，可以将标记能谱区段作为待处理能谱的目标计数窗口。也可以对标记能谱区段继续进行划分，即，以标记能谱区段为基准进行进一步的分区，并对划分后的能谱分区进行计算和比较，确定待处理能谱的目标计数窗口。本发明实施例的技术方案，通过获取待处理能谱，按照道址将待处理能谱划分为至少两个能谱分区，以进行待处理能谱的初步分区，根据能谱分区确定至少一个候选能谱区段，确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段，以初步筛选计数窗口，根据标记能谱区段确定待处理能谱的目标计数窗口，解决了确定计数窗口时计算效率低以及实用性较差的问题，实现了能谱的计数窗口的自动定位，并降低时间复杂度，提高实用性的技术效果。实施例二图2为本发明实施例二所提供的一种能谱计数窗口的定位方法的流程示意图，本实施例在上述实施例的基础上，针对根据标记能谱区段确定待处理能谱的目标计数窗口的具体实施方式可参见本实施例的技术方案。其中，与上述各实施例相同或相应的术语的解释在此不再赘述。如图2所示，该方法包括：S210、获取待处理能谱，按照道址将待处理能谱划分为至少两个能谱分区，根据能谱分区确定至少一个候选能谱区段。S220、确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段。在本实施例的基础上，可以通过下述任意一种方式来确定每个候选能谱区段的窗口定位指标：方式一、根据各个候选能谱区段的能谱数据分别确定每个候选能谱区段的窗口定位指标。具体的，针对每个候选能谱区段，可以根据该候选能谱区段的能谱数据，计算确定该候选能谱区段的窗口定位指标，也可以根据该候选能谱区段的能谱数据以及与该候选能谱区段相邻的候选能谱区段的能谱数据，计算确定该候选能谱区段的窗口定位指标。可选的，能谱数据包括样品计数、本底计数、测量时间、道址以及能量中的至少一项。方式二、根据各个候选能谱区段的能谱数据以及待处理能谱的能谱数据，分别确定每个候选能谱区段的窗口定位指标。具体的，针对每个候选能谱区段，可以根据该候选能谱区段的能谱数据以及待处理能谱的能谱数据，计算确定该候选能谱区段的窗口定位指标，也可以根据该候选能谱区段的能谱数据、与该候选能谱区段相邻的候选能谱区段的能谱数据以及待处理能谱的能谱数据，计算确定该候选能谱区段的窗口定位指标。方式三、根据各个候选能谱区段的能谱数据以及与待处理能谱对应的测量样品数据，分别确定每个候选能谱区段的窗口定位指标。其中，测量样品数据为与待测量的样品相关的数据，用于对测量样品进行衡量。可选的，测量样品数据包括测量样品活度、体积以及质量中的至少一项。具体的，针对每个候选能谱区段，可以根据该候选能谱区段的能谱数据以及与待处理能谱对应的测量样品数据，计算确定该候选能谱区段的窗口定位指标，也可以根据该候选能谱区段的能谱数据、与该候选能谱区段相邻的候选能谱区段的能谱数据以及与待处理能谱对应的测量样品数据，计算确定该候选能谱区段的窗口定位指标。方式四、根据各个候选能谱区段的能谱数据、与待处理能谱对应的测量环境数据，分别确定每个候选能谱区段的窗口定位指标。其中，测量环境数据可以用于衡量使用核子及核辐射测量仪器进行测量时的环境情况。可选的，测量环境数据包括测量环境中的温度、湿度、粒子计数、粉尘以及电磁测量中的至少一项。具体的，针对每个候选能谱区段，可以根据该候选能谱区段的能谱数据以及与待处理能谱对应的测量环境数据，计算确定该候选能谱区段的窗口定位指标，也可以根据该候选能谱区段的能谱数据、与该候选能谱区段相邻的候选能谱区段的能谱数据以及与待处理能谱对应的测量环境数据，计算确定该候选能谱区段的窗口定位指标。方式五、根据各个候选能谱区段的能谱数据、与待处理能谱对应的测量样品数据以及测量环境数据，分别确定每个候选能谱区段的窗口定位指标。具体的，针对每个候选能谱区段，可以根据该候选能谱区段的能谱数据、与待处理能谱对应的测量样品数据以及与待处理能谱对应的测量环境数据，计算确定该候选能谱区段的窗口定位指标，也可以根据该候选能谱区段的能谱数据、与该候选能谱区段相邻的候选能谱区段的能谱数据、与待处理能谱对应的测量样品数据以及与待处理能谱对应的测量环境数据，计算确定该候选能谱区段的窗口定位指标。S230、根据标记能谱区段确定保留能谱区段。其中，保留能谱区段可以理解为下一次进行划分和计算时所使用的能谱区段。具体的，在确定标记能谱区段后，可以将标记能谱区段确定为保留能谱区段，还可以将标记能谱区段和与标记能谱区段左右两端的一定数量的能谱分区或道址作为保留能谱分区。可选的，可以通过下述任意一种方式来根据标记能谱区段确定保留能谱区段：方式一、将标记能谱区段作为保留能谱区段。示例性的，标记能谱区段为能谱分区3和4，那么，保留能谱区段也为能谱分区3和4。方式二、将邻近位于标记能谱区段两端中至少一端的第一预设数量的能谱分区合并至标记能谱区段中得到保留能谱区段。示例性的，第一预设数量为1，标记能谱区段为能谱分区3和4，那么，邻近位于标记能谱区段两端的能谱分区的第一预设数量的能谱分区为能谱分区2和能谱分区5。此时，保留能谱区段为能谱分区2-5。需要说明的是，在设定第一预设数量后，可以将邻近位于标记能谱区段左端或右端的能谱分区合并至标记能谱区段中得到保留能谱区段；还可以将邻近位于标记能谱区段左端和右端的能谱分区合并至标记能谱区段中得到保留能谱区段，其中，左端合并的能谱分区数量和右端合并的能谱分区数量可以相同，也可以不同。方式三、将邻近位于标记能谱区段两端中至少一端的第二预设数量的道址合并至标记能谱区段中得到保留能谱区段。示例性的，第二预设数量为10，标记能谱区段为能谱分区3和4，那么，将能谱分区3左端的10个道址、能谱分区3-4以及能谱分区右端的10个道址确定为保留能谱区段。需要说明的是，在设定第二预设数量后，可以将邻近位于标记能谱区段左端或右端的道址合并至标记能谱区段中得到保留能谱区段；还可以将邻近位于标记能谱区段左端和右端的道址合并至标记能谱区段中得到保留能谱区段，其中，左端合并的道址数量和右端合并的道址数量可以相同，也可以不同。还需要说明的是，第一预设数量和第二预设数量都可以根据实际使用需求进行设定，具体大小在本实施例中不做具体限定。S240、对保留能谱区段进行划分，得到与保留能谱区段对应的各个能谱分区，并根据与保留能谱区段对应的各个能谱分区更新标记能谱区段。具体的，对保留能谱区段进行划分，并对保留能谱区段划分后得到的各个能谱分区进行分析或组合分析等。进一步的，根据各个能谱分区的分析结果可以确定新的标记能谱区段以进行更新。可选的，可以通过下述任意一种方式来对保留能谱区段进行划分，得到与保留能谱区段对应的各个能谱分区：方式一、按照道址的总数量和预先设定的与能谱分区包含的道址数量，将保留能谱区段划分为至少两个能谱分区。具体的，可以按照实际需求预先设定能谱分区中应当包含的道址数量，根据该道址数量以及道址的总数量对保留能谱区段进行划分，得到至少两个能谱分区。若道址的总数量不是预先设定的与能谱分区包含的道址数量的整数倍，则可以将剩余的道址单独作为一个能谱分区，也可以将剩余的道址添加至最后一个能谱分区中。方式二、按照道址的总数量和设定的与能谱分区对应的分区数量，将保留能谱区段划分为至少两个能谱分区。具体的，可以按照实际需求预先设定与能谱分区对应的分区数量，根据该分区数量以及道址的总数量对保留能谱区段进行划分，得到至少两个能谱分区。方式三、按照保留能谱区段的能谱数据分布，将保留能谱区段划分为至少两个能谱分区。具体的，根据保留能谱区段可以确定能谱数据的分布情况，以及该分布情况可以对保留能谱区段进行划分，例如计数值达到预设阈值划分为一个能谱区域等。方式四、基于预设的随机算法将保留能谱区段划分为至少两个能谱分区。具体的，基于预设的随机算法可以将保留能谱区段分为随机数量的能谱分区，每个能谱分区中的道址数量也是随机的。方式五、根据保留能谱区段中各个能谱分区的数量以及各个能谱分区对应的道址段的排布信息确定重分区能谱区段，对重分区能谱区段进行划分，根据重分区能谱区段的划分结果得到与保留能谱区段对应的各个能谱分区。其中，重分区能谱区段可以是保留能谱区段中后续进行再次划分的区段，因此重分区能谱区段可以是全部的或部分的保留能谱区段。排布信息可以包括能谱分区中各道址段的位置关系，以及所属的能谱分区等。具体的，在确定保留能谱区段后，可以确定保留能谱分区中包含的能谱分区的数量，以及每个能谱分区中道址段的排布信息。若保留能谱区段中的能谱分区数量较多，则可以认为保留能谱区段的中间区域为不重分的区域，暂不进行划分，此种情况下，可以按照道址段的排布信息，确定出除中间区域外的重分区能谱区段；若保留能谱区段中的能谱分区数量较少，则可以认为全部的保留能谱区段为重分区能谱区段。进而，对重分区能谱区段进行划分，得到与保留能谱区段对应的各个能谱分区。可选的，可以通过下述方式来确定重分区能谱区段：如果保留能谱区段中包含的能谱分区的总数量未达到第一预设数量阈值，则将保留能谱区段作为重分区能谱区段。具体的，如果保留能谱区段中包含的能谱分区的总数量未达到第一预设数量阈值，则说明当前的保留能谱区段中的能谱分区较少，将全部的保留能谱区段作为重分区能谱区段即可。示例性的，第一预设数量阈值为5，若保留能谱区段中包含能谱分区4-7，能谱分区的总数量为4，小于第一预设数量阈值5，则将保留能谱区段作为重分区能谱区段，即将能谱分区4-7作为重分区能谱区段。如果保留能谱区段中包含的能谱分区的总数量达到第二预设数量阈值，则将位于保留能谱区段两端中至少一端的第六预设数量的各个能谱分区组成的能谱区段作为重分区能谱区段。具体的，如果保留能谱区段中包含的能谱分区的总数量达到第二预设数量阈值，则说明当前的保留能谱区段中的能谱分区较多，若直接将保留能谱区段作为重分区能谱区段，则重分区后的每个能谱区段包含的能谱分区较多，计算量较大。因此，将位于保留能谱区段两端中至少一端的第六预设数量的各个能谱分区组成的能谱区段作为重分区能谱区段，以便后续再分区，将剩余的部分保留或者合并为一个分区，不进行后续再分区。需要说明的是，在设定第六预设数量后，可以将位于保留能谱区段左端或右端的各个能谱分区组成的能谱区段作为重分区能谱区段；还可以将位于保留能谱区段左端和右端的各个能谱分区组成的能谱区段作为重分区能谱区段，其中，从左端确定出的能谱分区数量和从右端确定出的能谱分区数量可以相同，也可以不同。示例性的，保留能谱区段中的能谱分区为4-10，第二预设数量阈值为5，保留能谱区段左端对应的第六预设数量为2和保留能谱区段右端对应的第六预设数量为3。此时，能谱分区的总数量7达到了第二预设数量阈值5，因此，将位于保留能谱区段左端的2个能谱分区和右端的3个能谱分区，即能谱分区4-5和能谱分区8-10，作为重分区能谱区段。需要说明的是，第一预设数量阈值可以小于或等于第二预设数量阈值，若第一预设数量阈值小于第二预设数量阈值，那么，如果保留能谱区段中包含的能谱分区的总数量达到第一预设数量阈值单未达到第二预设数量阈值，则可以采用任意一种方式来确定重分区能谱区段，在本实施例中不做具体限定。可选的，可以通过下述各步骤来根据与保留能谱区段对应的各个能谱分区更新标记能谱区段：步骤一、遍历保留能谱区段中各个能谱分区的组合，得到至少一个组合能谱区段。其中，组合能谱区段由两个或两个以上连续排布的能谱分区组合得到。具体的，保留能谱区段中任意两个或两个以上的能谱分区可以组合在一起，将其中各能谱分区为连续的组合筛选出来作为组合能谱区段。示例性的，保留能谱区段中包含能谱分区1-4，那么，组合能谱区段包括能谱分区1-2、1-3、1-4、2-3、2-4以及3-4。步骤二、根据各个能谱分区以及各个组合能谱区段的窗口定位指标更新标记能谱区段。具体的，针对每个能谱分区以及每个组合能谱区段，可以分别计算窗口定位指标，进而，将各个窗口定位指标进行比较，根据比较结果确定最优的窗口定位指标对应的能谱分区或组合能谱区段为新的标记能谱区段。示例性地，对重分区能谱区段进行划分，可以是将重分区能谱区段内所有分区宽度不为1的能谱分区等分为2个能谱分区，或者道址数量相差为1的两个能谱分区。S250、如果满足预设结束分区条件，则将标记能谱区段作为待处理能谱的目标计数窗口，否则，返回执行S230。其中，预设结束分区条件可以是预先设置的用于判断停止再进行分区的条件。目标计数窗口可以是最终确定出的待测量的放射性同位素在能谱中贡献的计数集中分布的道址区域。具体的，如果满足预设结束分区条件，则说明此时可以停止迭代分区和计算，将当前保留能谱区段中的标记能谱区段作为待处理能谱的目标计数窗口。可选的，预设结束分区条件可以为以下任意一种：第一种、保留能谱区段中除标记能谱区段之外的能谱分区包含的道址数量达到第一预设道址数量阈值。其中，第一预设道址数量阈值可以是用于判断除标记能谱区段之外的能谱分区是否可再分的道址数量，第一预设道址数量阈值通常为1，也可以根据实际需求设定。示例性的，第一预设道址数量阈值为2，若保留能谱区段中除标记能谱区段之外的能谱分区包含的道址数量为1或2，那么，说明已经满足预设结束分区条件。第二种、标记能谱区段的更新次数达到预设次数阈值。其中，预设次数阈值可以是用于判断标记能谱区段的更新迭代次数是否满足需求的数量，具体数值可以根据实际需求设定。示例性的，更新迭代次数为8，若当前标记能谱区段的更新次数为第8次，那么，说明已经满足预设结束分区条件。第三种、在标记能谱区段连续更新预设次数的情况下每次更新后标记能谱区段的窗口定位指标的变化不超过预设变化量。其中，连续更新预设次数可以是预先设定的更新次数，用于实施第三种预设结束分区条件的条件。预设变化比例可以是用于判断窗口定位指标的变化情况是否足够大的比例。需要说明的是，窗口定位指标的变化可以是两次更新中窗口定位指标的相对变化量，也可以是两次更新中窗口定位指标的绝对变化量。示例性的，连续更新预设次数为3，预设变化比例为1％，当前更新次数为3，那么第3次更新和第2次更新的窗口定位指标的变化比例为5％，此时没有满足预设分区条件，进行下一次更新。在第4次更新和第3次更新的窗口定位指标的变化比例、第5次更新和第4次更新的窗口定位指标的变化比例以及第6次更新和第5次更新的窗口定位指标的变化比例均小于1％时，满足预设结束分区条件。第四种、标记能谱区段的窗口定位指标优于预设窗口定位指标阈值。其中，预设窗口定位指标阈值可以是判断窗口定位指标是否满足需求的数值。示例性的，预设窗口定位指标阈值为a，窗口定位指标数值大的为优，当前迭代中，标记能谱区段的窗口定位指标为b，若b＞a，则满足预设分区条件，若b≤s，则不满足预设结束分区条件。具体的，如果没有满足预设结束分区条件，则需要进行再分区处理。此时，返回执行根据标记能谱区段确定保留能谱区段的操作，以便后续分区再确定目标计数窗口。本发明实施例的技术方案，通过获取待处理能谱，按照道址将待处理能谱划分为至少两个能谱分区，以进行待处理能谱的初步分区，根据能谱分区确定至少一个候选能谱区段，确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段，以初步筛选计数窗口，根据标记能谱区段确定保留能谱区段，对保留能谱区段进行划分，得到与保留能谱区段对应的各个能谱分区，并根据与保留能谱区段对应的各个能谱分区更新标记能谱区段，如果满足预设结束分区条件，则将标记能谱区段作为待处理能谱的目标计数窗口，否则，返回执行根据标记能谱区段确定保留能谱区段的操作，解决了确定计数窗口时计算效率低以及实用性较差的问题，实现了能谱的计数窗口的自动定位，并降低时间复杂度，提高实用性的技术效果。实施例三图3为本发明实施例三所提供的一种能谱计数窗口的定位方法的流程示意图，本实施例在上述实施例的基础上，针对标记能谱区段更新的具体实施方式可参见本实施例的技术方案。其中，与上述各实施例相同或相应的术语的解释在此不再赘述。如图3所示，该方法包括：S310、获取待处理能谱，按照道址将待处理能谱划分为至少两个能谱分区，根据能谱分区确定至少一个候选能谱区段。S320、确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段。S330、根据标记能谱区段确定保留能谱区段。S340、根据保留能谱区段确定参考能谱区段，并根据参考能谱区段以及位于参考能谱区段两端的能谱分区确定至少一个重组能谱区段。其中，参考能谱区段可以是作为后续分析基准的能谱区段。重组能谱区段可以是参考能谱区段和位于参考能谱区段两端的能谱分区进行不同的组合得到的能谱区段。具体的，可以将保留能谱区段的各能谱分区中，窗口定位指标满足预设参考条件的能谱分区确定为参考能谱区段；还可以判断标记能谱区段中能谱分区的数量是否大于预设分区数量阈值，若大于，则将位于保留能谱区段两端的一定数量的能谱分区剔除，将剩余部分确定为参考能谱区段；也可以将整个的保留能谱区段作为参考能谱区段。可以将参考能谱区段以及与参考能谱区段两端相邻的能谱分区进行分别组合得到至少一个重组能谱区段；还可以将参考能谱区段中位于参考能谱区段两端的能谱分区优化原则：在所有候选的计数窗口中，选择FOM值最优的窗口作为优选的计数窗口，FOM值通常定义为探测效率的平方与本底计数率之商，其数值越大越优。但优值指数优化原则作为一种指导性原则，缺乏具体的实现方法。一种易于想到的方法是遍历所有可能的计数窗口，比较其对应优值指数大小，实现计数窗口的优选，但是这一方法效率过低，并不实用。迄今为止，在工业界，所有液体闪烁计数器厂商都是在仪器内预设几种常见同位素典型条件下的计数窗口。当被测量同位素不在预设范围内，或者能谱因猝灭发生显著变化时，仪器就无法给出恰当的计数窗口，导致能谱难以分析。本发明实施例四提供了一种能谱计数窗口的定位方法。其中，与上述各实施例相同或相应的术语的解释在此不再赘述。本发明实施例四提供的能谱计数窗口的定位方法具体包括：a)将待处理能谱按道址划分若干个分区。需要说明的是，假设能谱宽度为L，即待处理能谱包含的道址的总数量为L，L满足2k≤L＜2k+1，则每个分区宽度取2k-3，若存在剩余道址未被归入分区，则将其并入最后一个分区。若能谱宽度小于8，则将每个能谱宽度为1的能谱区域作为一个能谱分区。示例性的，对于能谱宽度为256的待处理能谱，每个分区宽度取32，共划分为8个分区。b)以每个分区本身为候选能谱区段，计算其窗口定位指标，以窗口定位指标最大的候选能谱区段为参考能谱区段。其中，窗口定位指标F定义如下，该窗口定位指标越大越优越：其中，F为能谱区段R的窗口定位指标，i为候选能谱区段R内的道址编号，Ni为道址i对应样品测量谱计数，Bi为道址i对应本底测量谱计数，TS为样品测量谱测量活时间，TB为本底测量谱测量活时间。c)根据参考能谱区段确定如下三个重组能谱区段：参考能谱区段与其左侧相邻分区合并所得区段；参考能谱区段与其右侧相邻分区合并所得区段；参考能谱区段与其两侧相邻分区合并所得区段。如果重组能谱区段的窗口定位指标优于参考能谱区段的窗口定位指标，则将窗口定位指标最优的重组能谱区段更新为参考能谱区段，并重复执行步骤c)，否则，进入步骤d)。d)将参考能谱区段作为标记能谱区段。e)根据标记能谱区段确定保留能谱区段，对保留能谱区段重新进行划分，并根据新划分的分区更新标记能谱区段：e.1)如果标记能谱区段只包含两个或以下分区，则将标记能谱区段及标记能谱区段外相邻的两个分区合并作为保留能谱区段，参照步骤a)将保留能谱区段重新划分为8-15个连续分区，然后执行步骤b)-d)更新标记能谱区段。e.2)如果标记能谱区段包含三个或以上分区，则将以下三个区段组成的区段作为保留能谱区段：标记能谱区段内最左分区与最右分区剔除后剩余能谱区段；标记能谱区段内最左分区与标记能谱区段外左邻的分区合并所得能谱区段；标记能谱区段内最右分区与标记能谱区段外右邻的分区合并所得能谱区段；保留能谱区段划分方法如下：能谱区段合并为1个分区，能谱区段和能谱区段分别参照步骤a)分别划分为4-7个连续分区；然后以能谱区段合并所得分区作为参考能谱区段，并执行步骤c)-d)更新标记能谱区段。f)反复执行步骤e)，直至满足如下预设结束分区条件，将标记能谱区段作为所述待处理能谱的目标计数窗口：e.1)所述保留能谱区段划分分区宽度为1，或者e.2)所述保留能谱区段中的能谱区段和能谱区段划分分区宽度为1。以下述示例来说明本发明实施例确定目标计数窗口的过程：图4为待处理能谱的示意图，展示了待进行计数窗口自动定位的测量能谱，其中，粗线表示样品测量谱，细线表示本底测量谱。图5为第1次分区的能谱示意图，如图5所示，整个能谱按道址被分为8个等宽分区，每个分区宽度为32。表2展示了第1次分区时每个分区的边界道址及其窗口定位指标，其中，2号分区具有最大的窗口定位指标0.4232，确定为初始的参考能谱区段。表2表3展示了第1次分区时标记能谱区段的更新过程，表中用分区编号表示标记能谱区段，比如：能谱区段2表示分区2单独构成的能谱区段，能谱区段1-3表示分区1、2、3共同构成的能谱区段。前面已经确定分区2为初始的参考能谱区段，随后计算能谱区段2、1-2、2-3、1-3各自的窗口定位指标，其中能谱区段1-3具有最大的窗口定位指标，因此，更新参考能谱区段为能谱区段1-3；再计算能谱区段1-3以及1-4的窗口定位指标，能谱区段1-3仍具有最大的窗口定位指标，因此，第1次分区能谱区段1-3为最终的参考能谱区段，更新为标记能谱区段。表5、7、9、11、13依次表示之后每次分区后参考能谱区段的更新过程。表3更新步数参考能谱区段道址区间窗口定位指标120.423221-30.7364接下来，图6为第2次分区的能谱示意图。第1次分区确定了能谱区段1-3为标记能谱区段，包含3个分区，因此按e.2)分区，原能谱区段1划为4个分区，原能谱区段2划为1个分区，并作为初始的参考能谱区段，原能谱区段3-4划为4个分区。表4展示了第2次分区时每个分区的边界道址及其窗口定位指标。表4表5展示了第2次分区时标记能谱区段的更新过程，前面已经确定分区5为初始的参考能谱区段，随后确定第2次分区能谱区段2-6为最终的参考能谱区段，并更新为标记能谱区段。表5更新步数参考能谱区段区段道址区间窗口定位指标350.423244-60.659353-60.746262-60.7624接下来，图7为第3次分区的能谱示意图。第2次分区确定了能谱区段2-6为标记能谱区段，包含5个分区，因此按e.2)分区，原能谱区段1-2划为4个分区，原能谱区段3-5划为1个分区，并作为初始的参考能谱区段，原能谱区段6-7划为4个分区。表6展示了第3次分区时每个分区的边界道址及其窗口定位指标。表6表7展示了第3次分区时标记能谱区段的更新过程，前面已经确定分区5为初始的参考能谱区段，，随后确定第3次分区能谱区段3-7为最终的参考能谱区段，并更新为标记能谱区段。表7更新步数参考能谱区段道址区间窗口定位指标750.681784-60.737993-70.7624接下来，图8为第4次分区的能谱示意图。第3次分区确定了能谱区段3-7为标记能谱区段，包含5个分区，因此按e.2)分区，原能谱区段2-3划为4个分区，原能谱区段4-6划为1个分区，并作为初始的参考能谱区段，原能谱区段7-8划为4个分区。表8展示了第4次分区时每个分区的边界道址及其窗口定位指标。表8表9展示了第4次分区时标记能谱区段的更新过程，前面已经确定分区5为初始的参考能谱区段，，随后确定第4次分区能谱区段2-8为最终的参考能谱区段，并更新为标记能谱区段。表9更新步数参考能谱区段道址区间窗口定位指标1050.7379114-60.7477123-70.7624132-80.7690接下来，图9为第5次分区的能谱示意图。第4次分区确定了能谱区段2-8为标记能谱区段，包含7个分区，因此按e.2)分区，原能谱区段1-2划为4个分区，原能谱区段3-7划为1个分区，并作为初始的参考能谱区段，原能谱区段8-9划为4个分区。表10展示了第5次分区时每个分区的边界道址及其窗口定位指标。表10表11展示了第5次分区时标记能谱区段的更新过程，前面已经确定分区5为初始的参考能谱区段，，随后确定第5次分区能谱区段4-7为最终的参考能谱区段，并更新为标记能谱区段。表11更新步数参考能谱区段道址区间窗口定位指标1450.7624154-60.7646164-70.7692接下来，图10为第6次分区的能谱示意图。第5次分区确定了能谱区段4-7为标记能谱区段，包含4个分区，因此按e.2)分区，原能谱区段3-4分区宽度为1，无需进一步划分，原能谱区段5-6划为1个分区，并作为初始的参考能谱区段，原能谱区段7-8划为4个分区。表12展示了第6次分区时每个分区的边界道址及其窗口定位指标。表12表13展示了第6次分区时标记能谱区段的更新过程，前面已经确定分区3为初始的参考能谱区段，，随后确定第6次分区能谱区段2-5为最终的参考能谱区段，并更新为标记能谱区段。表13更新步数参考能谱区段道址区间窗口定位指标1730.7643182-40.7692192-50.7692由于第6次分区满足预设结束分区条件，因此，取本次分区的标记能谱区段2-5作为目标计数窗口。本发明实施例的技术方案，通过按照道址将所述待处理能谱划分为至少两个能谱分区，将每个能谱分区确定为一个候选能谱区段，基于各候选能谱区段的窗口定位指标确定标记能谱区段，并将标记能谱区段扩张为新的候选能谱区段，以根据窗口定位指标更新标记能谱区段，直至标记能谱区段不再变化，根据标记能谱区段确定保留能谱区段，对保留能谱区段重新进行划分，并根据新划分的分区更新标记能谱区段，当满足预设结束分区条件时，将标记能谱区段作为待处理能谱的目标计数窗口，解决了确定计数窗口时计算效率低以及实用性较差的问题，实现了放射性能谱的计数窗口的自动定位，并降低时间复杂度，提高实用性的技术效果。实施例五本发明实施例五提供了一种能谱计数窗口的定位方法。其中，与上述各实施例相同或相应的术语的解释在此不再赘述。本发明实施例五提供的能谱计数窗口的定位方法具体包括：a)将待处理能谱按道址划分分区，具体方法为：按如下公式计算每个道址的分区值P其中，i为道址编号，Ni为道址i对应样品测量谱计数，Bi为道址i对应本底测量谱计数，TS为样品测量谱测量活时间，TB为本底测量谱测量活时间。随后，按如下公式进行平滑处理以计算每个道址的分区值均值其中，n一般情况下取31，但道址i靠近能谱边缘时，需要扣除道址j无效的情况。再然后，按如下公式计算每个道址的分区编号M：最后，将分区编号一致且连续的道址划分为一个分区。b)以包含所有分区的区段作为参考能谱区段。c)根据参考能谱区段确定如下三个重组能谱区段：参考能谱区段剔除其内部最左分区后剩余能谱区段；参考能谱区段剔除其内部最右分区后剩余能谱区段；参考能谱区段剔除其内部最左和最右分区剩余能谱区段。如果重组能谱区段的窗口定位指标优于参考能谱区段的窗口定位指标，则将窗口定位指标最优的重组能谱区段更新为参考能谱区段，并重复执行步骤c)，否则，进入步骤d)。其中本实施方式中窗口定位指标定义如下，该窗口定位指标应大于零的情况下越小越优越：其中，F为能谱区段R的窗口定位指标，i为区段R内的道址编号，Ni为道址i对应样品测量谱计数，Bi为道址i对应本底测量谱计数，TS为样品测量谱测量活时间，TB为本底测量谱测量活时间。d)将参考能谱区段作为标记能谱区段。e)将标记能谱区段与其外部左邻分区与右邻分区合并所得能谱区段作为保留能谱区段，将保留能谱区段内所有分区宽度不为1的分区等分为2个分区，然后执行步骤b)-d)更新标记能谱区段。f)反复执行步骤e)，直至满足如下预设结束分区条件，将标记能谱区段作为待处理能谱的目标计数窗口：K≥log2L-2其中，L为待处理能谱的道址数，K为标记能谱区段的更新次数。以下述示例来说明本发明实施例确定目标计数窗口的过程：表14展示了第1次分区时每个分区的边界道址，表15展示了第1次分区时参考能谱区段的更新过程。表14表15更新步数参考能谱区段道址区间窗口定位指标11-51.12721-41.10831-31.09641-21.084511.069根据表15可知，1号分区在所有候选能谱区段中具有最优的窗口定位指标，因此，取1号分区作为标记能谱区段。进而，将1号分区的左邻分区和右邻分区进行合并，由于1号分区没有左邻分区，那么就将1号分区和右邻分区2号分区合并为保留能谱区段，并将其中每个分区等分为2个分区，得到第2次分区时每个分区的边界道址。表16展示了第2次分区时每个分区的边界道址。表17展示了第2次分区时参考能谱区段的更新过程。表16分区编号左边界右边界116326412731281444145161表17根据表17可知，1-2号分区具有最优的窗口定位指标，因此，取1-2号分区作为标记能谱区段。进而，将1-2号分区的左邻分区和右邻分区进行合并，由于1号分区没有左邻分区，那么就将1-2号分区和右邻分区3号分区合并为保留能谱区段，并将其中每个分区等分为2个分区，得到第3次分区时每个分区的边界道址。省略中间各次标记能谱区段的更新过程，当K＝6，即第6次分区时，满足K≥log2L-2＝8-2＝6，将标记能谱区段作为待处理能谱的目标计数窗口。表18展示了第6次分区时标记能谱区段的更新过程，即最后一次参考能谱区段的更新过程。表18更新步数参考能谱区段道址区间窗口定位指标191-301.068202-301.066213-301.065由于第6次分区满足预设结束分区条件，因此，取本次分区的标记能谱区段3-30作为目标计数窗口。本发明实施例的技术方案，通过按照道址将所述待处理能谱划分为至少两个能谱分区，将所有能谱分区确定为候选能谱区段，根据候选能谱区段的窗口定位指标来更新和确定标记能谱区段，将标记能谱区段与其外部左邻分区与右邻分区合并所得能谱区段作为保留能谱区段，并对保留能谱区段再次分区，若满足预设结束分区条件，则将标记能谱区段作为待处理能谱数据的目标计数窗口，解决了确定计数窗口时计算效率低以及实用性较差的问题，实现了能谱的计数窗口的自动定位，并降低时间复杂度，提高实用性的技术效果。实施例六本发明实施例六提供了一种能谱计数窗口的定位方法。其中，与上述各实施例相同或相应的术语的解释在此不再赘述。本发明实施例六提供的能谱计数窗口的定位方法具体包括：a)将待处理能谱按道址随机划分为1-8个分区。b)遍历所有可能能谱区段作为候选能谱区段，计算每个候选能谱区段的窗口定位指标，将窗口定位指标最大的更新为标记能谱区段，其中本实施方式中窗口定位指标定义如下，该窗口定位指标越大越优越：其中，F为候选能谱区段R的窗口定位指标，i为候选能谱区段R内的道址编号，LR为候选能谱区段R的宽度，Ni为道址i对应样品测量谱计数，Bi为道址i对应本底测量谱计数，TS为样品测量谱测量活时间，TB为本底测量谱测量活时间。c)随机将标记能谱区段与其外部左邻1-2个分区合并，再随机与其外部右邻1-2个分区合并，所得能谱区段作为保留能谱区段，将保留能谱区段按道址随机划分为1-8个分区，然后执行步骤b)更新标记能谱区段。d)反复执行步骤c)，直至满足如下预设结束分区条件，将标记能谱区段作为待处理能谱的目标计数窗口：标记能谱区段连续三次更新后，其窗口定位指标的相对变化不超过1％。以下述示例来说明本发明实施例确定目标计数窗口的过程：表19展示了第1次分区时每个分区的边界道址，表20展示了第1次分区时各候选能谱区段窗口定位指标。表19分区编号左边界右边界1122310431051644165256表20候选能谱区段道址区间窗口定位指标10.191-215.381-314.701-414.22215.382-314.712-414.2434.333-43.7441.48根据表20可知，1-2号分区具有最优的窗口定位指标，因此，取1-2号分区作为标记能谱区段。随机将该标记能谱区段与其外部左邻1-2个分区合并，再随机与其外部右邻1-2个分区合并，得到保留能谱区段，进而，将保留能谱区段按道址随机划分。表21展示了第2次分区时每个分区的边界道址，表22展示了第2次分区时各候选能谱区段窗口定位指标。表21分区编号左边界右边界1185286903919749811351141386139164表22根据表22可知，1号分区具有最优的窗口定位指标，因此，取1号分区作为标记能谱区段。随机将该标记能谱区段与其外部左邻1-2个分区合并，再随机与其外部右邻1-2个分区合并，得到保留能谱区段，进而，将保留能谱区段按道址随机划分。省略中间各次标记能谱区段的更新过程，表23展示了第6次分区时标记能谱区段的更新过程，即最后一次标记能谱区段的更新过程。表23在第6次分区时，满足预设结束分区条件，因此，取本次分区的标记能谱区段1-4作为目标计数窗口。本发明实施例的技术方案，通过随机划分的方式将待处理能谱划分为多个能谱分区，遍历各能谱区段和各能谱区段的组合作为候选能谱区段，计算每个候选能谱区段的窗口定位指标，根据各窗口定位指标确定标记能谱区段，随机将标记能谱区段与其外部左邻1或2个分区合并，再随机与其外部右邻1或2个分区合并，将所得能谱区段作为保留能谱区段，并对保留能谱区段进行再次随机划分，以更新标记能谱区段，若满足预设结束分区条件，则将标记能谱区段作为待处理能谱数据的目标计数窗口，解决了确定计数窗口时计算效率低以及实用性较差的问题，实现了能谱的计数窗口的自动定位，并降低时间复杂度，提高实用性的技术效果。实施例七图11为本发明实施例七所提供的一种能谱的计数窗口装置的结构示意图。如图11所示，该装置包括：能谱划分模块710、能谱区段标记模块720以及计数窗口确定模块730。其中，能谱划分模块710，用于获取待处理能谱，按照道址将所述待处理能谱划分为至少两个能谱分区，根据所述能谱分区确定至少一个候选能谱区段，其中，所述候选能谱区段包括至少一个能谱分区；能谱区段标记模块720，用于确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段；计数窗口确定模块730，用于根据所述标记能谱区段确定所述待处理能谱的目标计数窗口。可选的，计数窗口确定模块730，还用于根据所述标记能谱区段确定保留能谱区段；对所述保留能谱区段进行划分，得到与所述保留能谱区段对应的各个能谱分区，并根据与所述保留能谱区段对应的各个能谱分区更新所述标记能谱区段；如果满足预设结束分区条件，则将所述标记能谱区段作为所述待处理能谱的目标计数窗口；否则，返回执行根据所述标记能谱区段确定保留能谱区段的操作。可选的，计数窗口确定模块730，还用于将所述标记能谱区段作为保留能谱区段；或者，将邻近位于所述标记能谱区段两端中至少一端的第一预设数量的能谱分区合并至所述标记能谱区段中得到保留能谱区段；或者，将邻近位于所述标记能谱区段两端中至少一端的第二预设数量的道址合并至所述标记能谱区段中得到保留能谱区段。可选的，计数窗口确定模块730，还用于根据所述保留能谱区段确定参考能谱区段，并根据所述参考能谱区段以及位于所述参考能谱区段两端的能谱分区确定至少一个重组能谱区段；如果所述重组能谱区段的窗口定位指标优于参考能谱区段的窗口定位指标，则将窗口定位指标最优的重组能谱区段更新为所述参考能谱区段，返回执行根据所述参考能谱区段以及位于所述参考能谱区段两端的能谱分区确定至少一个重组能谱区段的操作；否则，将所述参考能谱区段作为标记能谱区段。可选的，计数窗口确定模块730，还用于确定所述保留能谱区段的各个能谱分区的窗口定位指标，将所述窗口定位指标满足预设参考条件的能谱分区作为参考能谱区段，或者，如果所述标记能谱区段中的能谱分区数量大于预设分区数量阈值，将位于所述保留能谱区段两端中至少一端的第三预设数量的能谱分区从所述保留能谱区段中剔除，得到参考能谱区段；根据邻近位于所述参考能谱区段两端中至少一端的第四预设数量的能谱分区确定待组合能谱区段，将所述参考能谱区段与所述待组合能谱区段进行合并，得到至少一个重组能谱区段。可选的，计数窗口确定模块730，还用于将所述保留能谱区段作为参考能谱区段，根据位于所述参考能谱区段两端中至少一端的第五预设数量的能谱分区确定待剔除能谱区段，将所述参考能谱区段中的所述待剔除能谱区段进行剔除，得到至少一个重组能谱区段。可选的，所述装置还包括：判断确定模块，用于如果所述重组能谱区段中能谱分区的道址数量与所述参考能谱区段中能谱分区的道址数量的差值不超过预设差值阈值，则将所述标记能谱区段作为所述待处理能谱的目标计数窗口。可选的，计数窗口确定模块730，还用于遍历所述保留能谱区段中各个能谱分区的组合，得到至少一个组合能谱区段，其中，所述组合能谱区段由两个或两个以上连续排布的能谱分区组合得到；根据各个能谱分区以及各个组合能谱区段的窗口定位指标更新所述标记能谱区段。可选的，计数窗口确定模块730，还用于按照道址的总数量和预先设定的与能谱分区包含的道址数量，将所述保留能谱区段划分为至少两个能谱分区；或者，按照道址的总数量和设定的与能谱分区对应的分区数量，将所述保留能谱区段划分为至少两个能谱分区；或者，按照所述保留能谱区段的能谱数据分布，将所述保留能谱区段划分为至少两个能谱分区；或者，基于预设的随机算法将所述保留能谱区段划分为至少两个能谱分区；或者，根据所述保留能谱区段中各个能谱分区的数量以及各个能谱分区对应的道址段的排布信息确定重分区能谱区段，对所述重分区能谱区段进行划分，根据所述重分区能谱区段的划分结果得到与所述保留能谱区段对应的各个能谱分区。可选的，计数窗口确定模块730，还用于如果所述保留能谱区段中包含的能谱分区的总数量未达到第一预设数量阈值，则将所述保留能谱区段作为重分区能谱区段；如果所述保留能谱区段中包含的能谱分区的总数量达到第二预设数量阈值，则将位于所述保留能谱区段两端中至少一端的第六预设数量的各个能谱分区组成的能谱区段作为重分区能谱区段。可选的，所述预设结束分区条件包括所述保留能谱区段中除所述标记能谱区段之外的能谱分区包含的道址数量达到第一预设道址数量阈值，或者，所述标记能谱区段的更新次数达到预设次数阈值，或者，在所述标记能谱区段连续更新预设次数的情况下每次更新后所述标记能谱区段的窗口定位指标的变化不超过预设变化量，或者，所述标记能谱区段的窗口定位指标优于预设窗口定位指标阈值。可选的，能谱区段标记模块720，还用于根据各个候选能谱区段的能谱数据分别确定每个候选能谱区段的窗口定位指标；或者，根据各个候选能谱区段的能谱数据以及所述待处理能谱的能谱数据，分别确定每个候选能谱区段的窗口定位指标；或者，根据各个候选能谱区段的能谱数据以及与所述待处理能谱对应的测量样品数据，分别确定每个候选能谱区段的窗口定位指标；或者，根据各个候选能谱区段的能谱数据、与所述待处理能谱对应的测量环境数据，分别确定每个候选能谱区段的窗口定位指标；或者，根据各个候选能谱区段的能谱数据、与所述待处理能谱对应的测量样品数据以及测量环境数据，分别确定每个候选能谱区段的窗口定位指标。可选的，所述能谱数据包括样品计数、本底计数、测量时间、道址以及能量中的至少一项；所述测量样品数据包括测量样品活度、体积以及质量中的至少一项；所述测量环境数据包括测量环境中的温度、湿度、粒子计数、粉尘以及电磁测量中的至少一项。本发明实施例的技术方案，通过获取待处理能谱，按照道址将待处理能谱划分为至少两个能谱分区，以进行待处理能谱的初步分区，根据能谱分区确定至少一个候选能谱区段，确定每个候选能谱区段的窗口定位指标，根据各个候选能谱区段的窗口定位指标从各个候选能谱区段中确定出标记能谱区段，以初步筛选计数窗口，根据标记能谱区段确定待处理能谱的目标计数窗口，解决了确定计数窗口时计算效率低以及实用性较差的问题，实现了能谱的计数窗口的自动定位，并降低时间复杂度，提高实用性的技术效果。本发明实施例所提供的能谱计数窗口的定位装置可执行本发明任意实施例所提供的能谱计数窗口的定位方法，具备执行方法相应的功能模块和有益效果。实施例八图12示出了可以用来实施本发明的实施例的电子设备10的结构示意图。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本发明的实现。如图12所示，电子设备10包括至少一个处理器11，以及与至少一个处理器11通信连接的存储器，如只读存储器12、随机访问存储器13等，其中，存储器存储有可被至少一个处理器执行的计算机程序，处理器11可以根据存储在只读存储器12中的计算机程序或者从存储单元18加载到随机访问存储器13中的计算机程序，来执行各种适当的动作和处理。在RAM 13中，还可存储电子设备10操作所需的各种程序和数据。处理器11、ROM 12以及RAM 13通过总线14彼此相连。输入/输出接口15也连接至总线14。电子设备10中的多个部件连接至I/O接口15，包括：输入单元16，例如键盘、鼠标等；输出单元17，例如各种类型的显示器、扬声器等；存储单元18，例如磁盘、光盘等；以及通信单元19，例如网卡、调制解调器、无线通信收发机等。通信单元19允许电子设备10通过诸如因特网的计算机网络和/或各种电信网络与其他设备交换信息/数据。处理器11可以是各种具有处理和计算能力的通用和/或专用处理组件。处理器11的一些示例包括但不限于中央处理单元、图形处理单元、各种专用的人工智能计算芯片、各种运行机器学习模型算法的处理器、数字信号处理器、以及任何适当的处理器、控制器、微控制器等。处理器11执行上文所描述的各个方法和处理，例如能谱计数窗口的定位方法。在一些实施例中，能谱计数窗口的定位方法可被实现为计算机程序，其被有形地包含于计算机可读存储介质，例如存储单元18。在一些实施例中，计算机程序的部分或者全部可以经由ROM 12和/或通信单元19而被载入和/或安装到电子设备10上。当计算机程序加载到RAM 13并由处理器11执行时，可以执行上文描述的能谱计数窗口的定位方法的一个或多个步骤。备选地，在其他实施例中，处理器11可以通过其他任何适当的方式而被配置为执行能谱计数窗口的定位方法。本文中以上描述的系统和技术的各种实施方式可以在数字电子电路系统、集成电路系统、场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、负载可编程逻辑设备、计算机硬件、固件、软件、和/或它们的组合中实现。这些各种实施方式可以包括：实施在一个或者多个计算机程序中，该一个或者多个计算机程序可在包括至少一个可编程处理器的可编程系统上执行和/或解释，该可编程处理器可以是专用或者通用可编程处理器，可以从存储系统、至少一个输入装置、和至少一个输出装置接收数据和指令，并且将数据和指令传输至该存储系统、该至少一个输入装置、和该至少一个输出装置。用于实施本发明的方法的计算机程序可以采用一个或多个编程语言的任何组合来编写。这些计算机程序可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器，使得计算机程序当由处理器执行时使流程图和/或框图中所规定的功能/操作被实施。计算机程序可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本发明的上下文中，计算机可读存储介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的计算机程序。计算机可读存储介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。备选地，计算机可读存储介质可以是机器可读信号介质。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。为了提供与用户的交互，可以在电子设备上实施此处描述的系统和技术，该电子设备具有：用于向用户显示信息的显示装置或者LCD监视器)；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给电子设备。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网、区块链网络和互联网。计算系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。服务器可以是云服务器，又称为云计算服务器或云主机，是云计算服务体系中的一项主机产品，以解决了传统物理主机与VPS服务中，存在的管理难度大，业务扩展性弱的缺陷。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本发明中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本发明的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本发明保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本发明的精神和原则之内所作的修改、等同替换和改进等，均应包含在本发明保护范围之内。
