标题title
一种预测天然气管道在役焊接温度场的有限元建模方法
摘要abst
一种预测天然气管道在役焊接温度场的有限元建模方法，以Abaqus软件为平台，包括以下步骤：步骤S1：几何模型的建立；步骤S2：给模型赋予材料与截面属性；步骤S3：对几何模型进行网格划分；步骤S4：建立瞬态温度场分析步；步骤S5：焊缝单元生死顺序控制；步骤S6：solid单元与shell单元耦合；步骤S7：添加热源载荷与边界条件；步骤S8：提交分析，获得天然气管道在役温度场；本发明将焊缝及邻近焊缝区的管道建立为三维实体，将邻近焊缝区以外的区域建立成二维壳，三维实体区划分为solid单元、壳划分为shell单元，shell单元与solid单元之间用线性方程进行耦合，有效的减少了模型的结点数量，即减少了所需求解的方程组数量，从而提高了计算效率。
权利要求书clms
1.一种预测天然气管道在役焊接温度场的有限元建模方法，以Abaqus软件为平台，其特征在于，包括以下步骤：步骤S1：几何模型的建立；步骤S2：给模型赋予材料与截面属性；步骤S3：对几何模型进行网格划分；步骤S4：建立瞬态温度场分析步；步骤S5：焊缝单元生死顺序控制；步骤S6：solid单元与shell单元耦合；步骤S7：添加热源载荷与边界条件；步骤S8：提交分析，获得天然气管道在役温度场。2.根据权利要求1所述的一种预测天然气管道在役焊接温度场的有限元建模方法，其特征在于，所述步骤S1包括以下步骤：S11、根据焊缝的内径WIR、宽度WL、高度WH创建焊缝的三维几何模型，命名为：weld；以2点坐标建立对称线line1，2个点的坐标分别为,；采用圆心和2个边界点建立圆弧曲线curve1，圆心的坐标为center＝，2个边界点的坐标为、；采用2点坐标创建直线line2，2个点的坐标为；所建立的直线line2和圆弧曲线curve1组成了封闭扇形，该封闭扇形绕对称线line1旋转360°，完成焊缝三维几何模型weld的建立；S12、根据管道的外径OR、内径IR、长度L、焊缝宽度WL创建管道的三维几何模型，命名为：pipe；采用2点坐标法建立矩形rectangle1，2个点的坐标分别为、；采用2点坐标建立对称线line3，2个点坐标为、；将所建立的矩形rectangle1绕对称线line3旋转360°，完成管道三维几何模型pipe的建立；以xoz平面为基准，偏移距离WL/2建立平面Datum plane-1、偏移距离-WL/2建立平面Datum plane-2、偏移距离5WL建立平面Datum plane-3、偏移距离-5WL建立平面Datumplane-4；利用平面Datum plane-1、Datum plane-2、Datum plane-3、Datum plane-4切割管道几何模型，将管道分为焊缝区、邻近焊缝区、远离焊缝区；S13、根据管道中径/2、长度L创建pipe轴线一侧的管道壳模型，命名为：pipe-s1；以/2，10×WL)为起点、/2，L/2)为终点创建直线，所创建的直线绕y轴旋转建立管道壳模型pipe-s1；S14、根据管道中径/2、长度L创建pipe轴线另一侧的管道壳模型，命名为：pipe-s2；以/2，-10×WL)为起点、/2，-L/2)为终点创建直线，所创建的直线绕y轴旋转建立管道壳模型pipe-s2；S15、将pipe、weld、pipe-s1、pipe-s2装配，形成装配体。3.根据权利要求2所述的一种预测天然气管道在役焊接温度场的有限元建模方法，其特征在于，所述步骤S2包括以下步骤：S21、创建材料material-1，其属性参数包括热导率、密度、比热容；S22、利用材料material-1创建solid截面section-1，将截面section-1分别赋予给pipe、weld；S23、利用材料material-1创建shell截面section-2，shell的厚度为管道的壁厚OR-IR，在其厚度方向设置Sn个积分点，将截面section-2赋予给pipe-s1、pipe-s2。4.根据权利要求3所述的一种预测天然气管道在役焊接温度场的有限元建模方法，其特征在于，所述步骤S3包括以下步骤：S31、采用Hex_Dominated方法对pipe模型进行网格划分，管道圆周方向的网格数量为n_g_1＝2π×OR/v，n_g_1非整数时，需圆整，其中v为焊接速度；焊缝区域的轴向网格尺寸为1.5～2.2mm，邻近焊缝区沿管道轴线方向的网格尺寸为2.5～3mm、远离焊缝区的网格尺寸5～8mm；管道厚道方向的网格尺寸为1.5～2.2mm；网格类型为8节点线性传热solid单元DC3D8；S32、采用Hex_Dominated方法对weld模型进行网格划分，定义圆周方向的网格数量为n_f_1，且n_f_1与n_g_1相等；设置焊缝轴线方向的网尺寸为1.5～2.2mm，与管道焊缝区域的轴向网格尺寸相等；设置焊缝圆弧上的网格尺寸为1.5～2.2mm；网格类型为8节点线性传热solid单元DC3D8；S33、采用Quad方法对pipe-s1进行网格划分，圆周方向的网格数量定义为n_s1_1，且所述n_s1_1与n_g_1相等；轴线方向的网格尺寸为8～12mm；网格类型为4节点传热shell单元DS4；S34、采用Quad方法对pipe-s2进行网格划分，圆周方向的网格数量定义为n_s1_1，且所述n_s2_1与n_g_1相等；轴线方向的网格尺寸为8～12mm；网格类型为4节点传热shell单元DS4。5.根据权利要求1所述的一种预测天然气管道在役焊接温度场的有限元建模方法，其特征在于，所述步骤S4具体是：基于步骤S3所建立的网格模型，建立n1+2个瞬态温度场分析步；其中，第一个分析步为稳态分析步，时间步长为time1；最后一个分析步为冷却分析步，时间步长为time2；其余分析步均为焊接分析步，且间步长为1s。6.根据权利要求1所述的一种预测天然气管道在役焊接温度场的有限元建模方法，其特征在于，所述步骤S5包括以下步骤：S51、每个焊接分析步沿焊缝圆周方向激活1层焊缝网格，单层网格的数量为enum_x，第j个分析步应激活的起始单元编号为N_S＝enum_x*、终止单元编号为N_E＝enum_x*，将编号N_S至N_E的单元定义为单元集合W_，依次完成焊缝单元集合的创建，再将全部单元集合建成单元集合W，即单元集合W包含了所有单元集合W_；S52、第1个分析步，即稳态分析步，将Model change方法中deactivated in this step选项作用于单元集合W，实现焊缝单元的全部杀死；S53、自第2个分析步开始，将Model change、region方法中activated in this step选项作用单元集合W_，从而实现按照焊接过程的持续依次激活对应的焊缝单元集合。7.根据权利要求1所述的一种预测天然气管道在役焊接温度场的有限元建模方法，其特征在于，所述步骤S6具体是：S61、将管道pipe两个端面的节点沿圆周方向依次建立节点集合，即在同一半径上的节点建为1个集合，y轴负方向一侧端面的节点集合依次命名为L-i，y轴正方向一侧端面的节点集合依次命名为R-i；将pipe-s1与管道pipe节点L-i接触的shell单元节点创建为节点集合，依次命名LL-i；将pipe-s2与管道pipe节点R-i接触的shell单元节点创建为节点集合，依次命名RR-i；S62、采用线性方程约束将pipe的solid单元节点自由度和pipe-s1、pipe-s2的shell单元的节点自由度进行耦合；管道pipe的solid单元节点与pipe-s1的shell单元节点自由度的耦合表达式为：Equation,,,,,……，))；管道pipe的solid单元节点与pipe-s2的shell单元节点自由度的耦合表达式为：Equation,,,,,……，))。8.根据权利要求1所述的一种预测天然气管道在役焊接温度场的有限元建模方法，其特征在于，所述步骤S7包括以下步骤：S71、管道的外表面、焊缝的表面设置对流散、辐射散热条件，设置对流换热系数、环境温度、辐射率、绝对温度；S72、管道的内表面设置对流、辐射散热条件，设置对流换热系数、管道介质温度、辐射率、绝对温度；S73、给所有模型添加body heat flux用户自定义热载荷；S74、给pipe、weld、pipe-s1、pipe-s2设置初始温度T0。9.根据权利要求1所述的一种预测天然气管道在役焊接温度场的有限元建模方法，其特征在于，所述步骤S8具体是：基于步骤S1-S7所建立的模型，创建job文件、选择热流程序对应的存储路径，提交job文件，求解获得天然气管道在役焊接过程及冷却过程的温度场。
说明书desc
技术领域本发明涉及焊接温度场有限元建模技术领域，特别涉及一种预测 天然气管道在役焊接温度场的有限元建模方法。背景技术管道输运是石油天然气输运的主要方式，其具有效率高、成本低、 安全、可靠等优点。当前，我国油气长输管道形成了“东西贯通，南 北连接，横跨多个经济区”的管网格局，建成了比较完备的油气运输 网络。然而，在材料缺陷、施工缺陷、环境、应力和外界干扰等因素 的综合作用下，管道会发生局部减薄，导致承压能力降低，甚至会造 成油气泄漏等事故。为保证管道的安全运行，需要对减薄部位进行修 复。在役焊接是在油气不停输的状态下直接修复损伤管道，可确保油 气输送的连续性，具有良好的经济效益、社会效益和广阔的应用前景。管道在役焊接时，熔池的形成导致其下方金属的承载能力显著下 降，若熔池下方金属的剩余强度不足以承载内部介质的压力，烧穿失 稳就会发生。因此，天然气管道在役焊接必须要避免烧穿失稳的发生。 由于现场焊接试验成本高、风险大，所以主要采用有限元建模的方法 研究管道在役焊接的温度场，从而指导在役焊接工艺的制定。专利号 为201210513305.3的专利申请公开了一种燃气管道在役焊接行为的 结构分析方法，利用有限元计算软件ANSYS,确定管道在役焊接的焊 接条件；创建管道及套管的实体模型,根据实际工况施加在役焊接温 度场的求解约束及载荷，求解得出管道在役焊接的温度场。但是，现 有天然气管道在役焊接温度场有限元模型存在显著不足，特别是，基 于焊缝单元编号修改关键词控制焊缝单元生死，模型建立耗费时间长； 为了满足求解精度导致模型网格数量多，从而导致求解、计算耗费时 间长、计算效率低。鉴于此，需要发明一种操作便捷、建模效率高、 求解计算效率高的天然气管道在役焊接温度场有限元建模方法。发明内容为了克服上述现有技术的不足，本发明的目的在于提供一种预测 天然气管道在役焊接温度场的有限元建模方法，实现天然气管道在役 焊接温度场有限元模型的快速、高效建立，从而指导在役焊接工艺的 制定。为了实现上述目的，本发明采用如下技术方案：一种预测天然气管道在役焊接温度场的有限元建模方法，以 Abaqus软件为平台，包括以下步骤：步骤S1：几何模型的建立；步骤S2：给模型赋予材料与截面属性；步骤S3：对几何模型进行网格划分；步骤S4：建立瞬态温度场分析步；步骤S5：焊缝单元生死顺序控制；步骤S6：solid单元与shell单元耦合；步骤S7：添加热源载荷与边界条件；步骤S8：提交分析，获得天然气管道在役温度场。所述步骤S1包括以下步骤：S11、根据焊缝的内径WIR、宽度WL、高度WH创建焊缝的三 维几何模型，命名为：weld；以2点坐标建立对称线line1，2个点的坐标分别为, ；采用圆心和2个边界点建立圆弧曲线curve1，圆心的坐 标为center＝，2个边界点的坐标为 、；采用2点坐标创建直线line2，2个点的坐标为；所建立的直线line2和圆弧曲线 curve1组成了封闭扇形，该封闭扇形绕对称线line1旋转360°，完 成焊缝三维几何模型weld的建立；S12、根据管道的外径OR、内径IR、长度L、焊缝宽度WL创 建管道的三维几何模型，命名为：pipe；采用2点坐标法建立矩形rectangle1，2个点的坐标分别为、；采用2点坐标建立对称线line3，2个点 坐标为、；将所建立的矩形rectangle1 绕对称线line3旋转360°，完成管道三维几何模型的建立；以XOZ平面为基准，偏移WL/2距离建立平面Datum plane-1； 偏移-WL/2距离建立平面Datum plane-2、偏移5WL距离建立平面 Datum plane-3、偏移-5WL距离建立平面Datumplane-4；分别利用平 面Datum plane-1、Datum plane-2、Datum plane-3、Datum plane-4切 割管道三维几何模型，将管道分为焊缝区、邻近焊缝区、远离焊缝区；S13、根据管道中径/2、长度L创建pipe轴线一侧的 管道壳模型，命名为：pipe-s1；以/2，10×WL)为起点、/2，L/2)为终 点创建直线，所创建的直线绕y轴旋转建立管道壳模型pipe-s1；S14、根据管道中径/2、长度L创建pipe轴线另一侧 的管道壳模型，命名为：pipe-s2；以/2，-10×WL)为起点、/2，-L/2)为 终点创建直线，所创建的直线绕y轴旋转建立管道壳模型pipe-s2；S15、将pipe、weld、pipe-s1、pipe-s2装配，形成装配体。所述步骤S2包括以下步骤：S21、创建材料material-1，其属性参数包括热导率、密度、比热 容；S22、利用材料material-1创建solid截面section-1，将截面 section-1分别赋予给pipe、weld；S23、利用材料material-1创建shell截面section-2，shell的厚度 为管道的壁厚OR-IR，在其厚度方向设置Sn个积分点，将截面 section-2赋予给pipe-s1、pipe-s2。所述步骤S3包括以下步骤：S31、采用Hex_Dominated方法对pipe模型进行网格划分，管道 圆周方向的网格数量为n_g_1＝2π×OR/v，n_g_1非整数时，需圆整， 其中v为焊接速度；焊缝区域的轴向网格尺寸为1.5～2.2mm，邻近焊 缝区沿管道轴线方向的网格尺寸为2.5～3mm、远离焊缝区的网格尺寸 5～8mm；管道厚道方向的网格尺寸为1.5～2.2mm；网格类型为8节点 线性传热solid单元DC3D8；S32、采用Hex_Dominated方法对weld模型进行网格划分，定义 圆周方向的网格数量为n_f_1，且n_f_1与n_g_1相等；设置焊缝轴 线方向的网尺寸为1.5～2.2mm，且与管道焊缝区域的轴向网格尺寸相 等；设置焊缝圆弧上的网格尺寸为1.5～2.2mm；网格类型为8节点线 性传热solid单元DC3D8；S33、采用Quad方法对pipe-s1进行网格划分，圆周方向的网格 数量定义为n_s1_1，且所述n_s1_1与n_g_1相等；轴线方向的网格 尺寸为8～12mm；网格类型为4节点传热shell单元DS4；S34、采用Quad方法对pipe-s1进行网格划分，圆周方向的网格 数量定义为n_s2_1，且所述n_s2_1与n_g_1相等；轴线方向的网格 尺寸为8～12mm；网格类型为4节点传热shell单元DS4；所述步骤S4具体是：基于步骤S3所建立的网格模型，建立n1+2个瞬态温度场分析步。 其中，第一个分析步为稳态分析步，时间步长为time1；最后一个分 析步为冷却分析步，时间步长为time2；其余分析步均为焊接分析步， 且间步长为1s。所述步骤S5包括以下步骤：S51、每个焊接分析步沿焊缝圆周方向激活1层焊缝网格，单层 网格的数量为enum_x，第j个分析步应激活的起始单元编号为 N_S＝enum_x*、终止单元编号为N_E＝enum_x*，将编号 N_S至N_E的单元定义为单元集合W_，依次完成焊缝单元集合 的创建，再将全部单元集合建成单元集合W，即单元集合W包含了 所有单元集合W_；S52、第1个分析步，即稳态分析步，将Model change方法中 deactivated in thisstep选项作用于单元集合W，实现焊缝单元的全部 杀死；S53、自第2个分析步开始，将Model change、region方法中 activated in thisstep选项作用单元集合W_，从而实现按照焊接过 程的持续依次激活对应的焊缝单元集合。所述步骤S6具体是：S61、将管道pipe两个端面的节点沿圆周方向依次建立节点集合， 即在同一半径上的节点建为1个集合，y轴负方向一侧端面的节点集 合依次命名为L-i，y轴正方向一侧端面的节点 集合依次命名为R-i；将pipe-s1与管道pipe节 点L-i接触的shell单元节点创建为节点集合， 依次命名LL-i；将pipe-s2与管道pipe节点R-i 接触的shell单元节点创建为节点集合，依次命 名RR-i；S62、采用线性方程约束将pipe的solid单元节点自由度和pipe-s1、 pipe-s2的shell单元的节点自由度进行耦合；管道pipe的solid单元 节点与pipe-s1的shell单元节点自由度的耦合表达式为：Equation ,,,,,……，))；管道pipe的solid 单元节点与pipe-s2的shell单元节点自由度的耦合表达式为：Equation,,,,,……，))。所述步骤S7包括以下步骤：S71、管道的外表面、焊缝的表面设置对流散、辐射散热条件， 设置对流换热系数、环境温度、辐射率、绝对温度；S72、管道的内表面设置对流、辐射散热条件，设置对流换热系 数、管道介质温度、辐射率、绝对温度；S73、给所有模型添加body heat flux用户自定义热载荷，热流分 布如下：式中，qr—焊枪后侧热流密度；qf—焊枪前侧热流密度；Q—电弧热功率；ff、fr热流密度分布系数；x0,y0,z0—焊枪的起点的坐标；ar、af、b、c热源形状参数；ν—焊接速度，；R—焊缝外径；其中，Q＝ηUI，式中，η—热效率；U—焊接电压；I—焊接电 流。S74、给pipe、weld、pipe-s1、pipe-s2设置初始温度T0。所述步骤S8具体是：基于上述步骤S1-S7所建立的模型，创建job文件、选择热流程 序对应的存储路径，提交job文件，求解获得天然气管道在役焊接过 程及冷却过程的温度场。本发明的有益效果是：基于焊缝单元的编号，将第j个分析步应激活的单元定义 为单元集合W_，通过设置Model change、region选择单元集合 W_、并选择activated in thisstep，实现第j个分析步单元的激活， 从而实现按照焊接过程的焊缝单元集合依次激活，避免采用单元编号 实现单元激活，建模耗费时间少、效率高；将焊缝、以及10倍焊缝宽度以内的管道建立为三维实体， 将3倍邻近焊缝区宽度以外的区域建立成二维壳，三维实体区划分为 solid单元、壳划分为shell单元，shell单元与solid单元之间用线性 方程进行耦合，有效的减少了模型的结点数量，即减少了所需求解的 方程组数量，从而提高了计算效率。附图说明图1是焊缝三维几何模型示意图。图2是管道三维实体几何模型示意图。图3是y轴负方向一侧管道壳模型示意图。图4是y轴正方向一侧管道壳模型示意图。图5是管道实体与壳体的装配体示意图。图6是管道网格模型示意图。图7是网格模型在yoz横截面内的示意图。图8是y轴正方向一侧solid单元和shell单元节点耦合示意图。图9是y轴负方向一侧solid单元和shell单元节点耦合示意图。图10是焊接开始90s的温度场示意图。图11是焊接开始90s的横截面温度场示意图。具体实施方式下面结合具体实施例及附图对本发明作进一步详细说明。一种预测天然气管道在役焊接温度场的有限元建模方法，针对 X70天然气管道在役焊接，涉及的模型参数、施焊条件与文献Huang Zhiqiang,Tang Haiping,Ding Yaping,Wei Qinwen,Xia Guofa. Numerical Simulations of temperature for the in-servicewelding of gas pipeline.Journal of Materials Processing Technology,2017:72-78相 同，管道外径813mm、内径798mm、长度300mm；焊接电流150A、 电压26V、焊接速度2mm/s、焊条直径3.2mm；焊缝宽5.4mm、高 2.7mm，焊缝位于管道长度的对称中心处，建模过程包括以下步骤：S1、几何模型的建立步骤S1包括步骤S11-S14:S11、在Abaqus软件中创建焊缝的三维几何模型，命名为：weld； 采用2点坐标建立对称线line1，2个点的坐标为point1＝、point2＝；采用圆心和2个边界点建立圆弧曲线 curve1，圆心的坐标为center＝,2个边界点的坐标 为point1＝、point2＝；以2点坐标建立直线line2，2个点的坐标分别为,；所建立的直线line2和圆弧曲线curve1 组成了封闭扇形，该扇形绕对称线line1旋转360°，完成了焊缝三维 几何模型的建立，如图1所示。S12、在Abaqus软件中创建三维几何模型，命名为：pipe；采用 2点坐标法建立矩形rectangle1，2个点的坐标分别为；采用2点坐标建立对称线line3， 2个点坐标为、；所建立的矩形rectangle1 绕对称线line3旋转360°，完成管道三维几何模型的建立，如图2所 示。以XOZ平面为基准，偏移距离2.7×10-3m建立平面Datum plane-1、偏移距离-2.7×10-3m建立平面Datum plane-2、偏移距离27 ×10-3m建立平面Datum plane-3、偏移距离-27×10-3m建立平面Datum plane-4；利用平面Datum plane-1、Datum plane-2、Datum plane-3、 Datum plane-4切割管道三维几何模型，将管道分为焊缝区、邻近焊 缝区、远离焊缝区，如图2所示。S13、在Abaqus软件中创建管道壳模型，命名为：pipe-s1，以 起点、为终点 创建直线，所创建的直线绕y轴旋转建立管道壳模型，如图3所示。S14、在Abaqus软件中创建另一侧的管道壳模型，命名为：pipe-s2， 以起点、为 终点创建直线，所创建的直线绕y轴旋转建立管道壳模型，如图4所 示。S15、将pipe、weld、pipe-s1、pipe-s2装配，形成装配体，如图 5所示。S2、模型材料与截面属性的定义步骤S2包括步骤S21-S25:S21、创建材料，命名为material-1，其属性参数包括热导率、密 度、比热容。S22、创建均匀solid截面section-1，对应的材料为material-1； 将截面section-1分别赋予给pipe、weld，从而完成材料及solid截面 属性的定义。S23、创建均匀shell截面section-2，shell的厚度为管道的壁厚， 即8×10-3m，Shell单元在其厚度方向设置3个积分点，对应的材料 为material-1；将截面section-2分别赋予给pipe-s1、pipe-s1，从而完 成材料及shell截面属性的定义。S3、网格划分步骤S3包括步骤S31-S34:S31、定义pipe的网格划分策略为HEX_DOMINATED，定义管 道圆周方向的网格数量为n1＝1278，焊缝区域的轴向网格尺寸为2mm， 邻近焊缝区沿管道轴线方向的网格尺寸为3mm、远离焊缝区的网格 尺寸为6mm；管道厚道方向的网格尺寸为2mm；网格类型为8节点 线性传热solid单元DC3D8。S32、定义weld的网格划分策略为HEX_DOMINATED，定义圆 周方向的网格数量为1278，与管道圆周方向的网格数量相等；焊缝 轴线方向的网尺寸为2mm，与管道焊缝区域的轴向网格尺寸相等； 设置焊缝圆弧上的网格尺寸为2mm；设置网格类型为8节点线性传 热solid单元DC3D8。S33、定义pipe-s1的网格划分策略为HEX_DOMINATED，与管 道远离焊缝区接触的边圆周方向的网格数量定义为1278，与管道圆 周方向的网格数量相等；定义轴线方向的网格尺寸为12mm；设置网 格类型为4节点传热shell单元DS4。S34、定义pipe-s2的网格划分策略为HEX_DOMINATED，与管 道远离焊缝区接触的边圆周方向的网格数量定义为1278，与管道圆 周方向的网格数量相等；定义轴线方向的网格尺寸为12mm；设置网 格类型为4节点传热shell单元DS4；最终所得网格模型如图6所示，网格在yoz截面的示意图如图7所示。S4、建立瞬态温度场分析步建立1280个瞬态温度场分析步。其中，第一个分析步为稳态分 析步，时间步长为20s；最后一个分析步为冷却分析步，时间步长为 7200s；其余分析步均为焊接分析步，时间步长为1s。S5、焊缝单元生死顺序控制步骤S5包括步骤S51-S53:S51、焊缝的单元总数为42174，每个焊接分析步激活网格数量 为enum_x＝33，第j个分析步应激活的起始单元编号为N_S＝33*、 终止单元编号为N_E＝33*，将编号N_S至N_E的单元定义为单 元集合W_，依次完成焊缝单元集合的创建，再将全部单元集合 建成单元集合W，即单元集合W包含了所有单元集合W_。S52、第1个分析步，即稳态分析步，将Model change方法中 deactivated in thisstep选项作用于全部单元集合W，实现焊缝单元的 全部杀死；S53、自第2个分析步开始，将Model change、region方法中activated in thisstep选项作用单元集合W_，从而实现按照焊接过 程的持续依次激活对应的焊缝单元集合。S6、solid单元与shell单元耦合步骤S6包括步骤S61-S62:S61、如图6、图7所示，将管道pipe两个端面的节点沿圆周方 向依次建立节点集合，即在同一半径上的节点建为1个集合，y轴负 方向一侧端面的节点集合依次命名为L-i，y 轴正方向一侧端面的节点集合依次命名为R-i； 将pipe-s1壳单元与管道pipe节点L-i接触的 节点创建为节点集合，依次命名LL-i；将 pipe-s2壳单元与管道pipe节点R-i接触的壳 单元节点创建为节点集合，依次命名RR-i；S62、如图8、9所示，采用线性方程约束将solid单元的节点自 由度和shell单元的节点自由度进行耦合，管道pipe的solid单元节点 L-i与pipe-s1的shell单元节点LL-i自由度的耦合表达式为：Equation ,,,))；管道pipe的solid单元节点R-i与pipe-s2的shell单元节 点RR-i自由度的耦合表达式为：Equation,,,))。S7、添加热源载荷与边界条件步骤S7包括步骤S71-S74:S71、管道的外表面、焊缝的表面设置对流散热条件，设置对流 换热系数15、热陷温度18℃，辐射率0.7、绝对温度18℃。S72、管道的内表面设置对流散热条件，设置对流换热系数797、 热陷温度18℃、设置辐射率0.7、绝对温度18℃。S73、给所有模型添加body heat flux用户自定义热载荷，幅值为 1，热流分布如下：式中，qr—焊枪后侧热流密度；qf—焊枪前侧热流密度；Q—电弧热功率；ff、fr热流密度分布系数，ff＝0.75、fr＝1.25；x0,y0,z0—焊枪的起点的坐标，；ar、af、b、c热源形状参数，ar＝4.2×10-3、af＝2.5×10-3、b＝2.8×10-3、 c＝5.2×10-3；ν—焊接速度，ν＝2×10-3；R—焊缝外径，R＝406.5；其中，Q＝ηUI＝0.75×150×26＝2925，式中，η—热效率，0.75；U— 焊接电压，26V；I—焊接电流，150A。S74、给所有模型设置初始温度18℃。步骤S8：提交分析，获得天然气管道在役温度场基于上述步骤S1-S7所建立的模型，创建job文件、选择热流程 序对应的存储路径，提交job文件，求解获得天然气管道在役焊接过 程及冷却过程的温度场，如图10、图11所示。
