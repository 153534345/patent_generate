标题title
一种基于联邦学习的公文智能推荐方法
摘要abst
本申请提供一种基于联邦学习的公文智能推荐方法，所述方法包括：确定目标公文文本的公文类型以及各公文子数据库对应的公文类型；确定各公文子数据库对应的联邦学习架构；将所述联邦学习架构由联邦学习聚合服务器广播给所述各公文子数据库；进行联邦学习训练后输出所述目标公文文本对应的公文推荐结果。本发明提供的公文智能推荐方法，采用联邦学习的架构训练得到公文推荐模型，克服了各公文子数据库数据不互通导致的训练语料缺失的问题；同时基于各公文子数据库语料数据的特点，使得公文推荐模型对公文文本共通的语法结构特征和各类公文文本各自的特定语法结构特征均兼顾了学习，进而使得公文推荐模型的推荐结果准确率较高。
权利要求书clms
1.一种基于联邦学习的公文智能推荐方法，其特征在于，所述方法包括：确定目标公文文本的公文类型以及各公文子数据库对应的公文类型；根据所述目标公文文本的公文类型以及各公文子数据库对应的公文类型，确定各公文子数据库对应的联邦学习架构；其中，所述联邦学习架构包括各公文子数据对应的公文推荐模型之间的横向联邦学习或纵向联邦学习关系；将所述联邦学习架构由联邦学习聚合服务器广播给所述各公文子数据库；所述各公文子数据库对应的公文推荐模型根据所述联邦学习状架构进行联邦学习训练后，输出所述目标公文文本对应的公文推荐结果。2.根据权利要求1所述的公文智能推荐方法，其特征在于，所述根据所述目标公文文本的公文类型以及各公文子数据库对应的公文类型，确定各公文子数据库对应的联邦学习架构，具体包括：将各公文子数据库根据对应的公文类型分为多个公文子数据库集合；确定所述多个公文子数据库集合相对于目标公文文本的公文类型的相似度权重；将各公文子数据库集合作为纵向联邦学习的节点、并将每一公文子数据库集合内各公文子数据库作为横向联邦学习的子节点，构建确定所述联邦学习架构；其中，所述纵向联邦学习的节点在所述联邦学习架构中的排序是根据所述相似度权重确定的。3.根据权利要求2所述的公文智能推荐方法，其特征在于，所述将各公文子数据库根据对应的公文类型分为多个公文子数据库集合，具体包括：根据每一公文子数据库中主要公文文本的公文类型，确定每一公文子数据库的主要类型向量；对每一公文子数据库中的所有公文文本提取公文关键词，确定每一公文子数据库的主要关键词向量；根据各公文子数据库的主要类型向量和主要关键词向量，将各公文子数据库进行聚类，得到多个公文子数据库集合。4.根据权利要求3所述的公文智能推荐方法，其特征在于，所述根据每一公文子数据库中主要公文文本的公文类型，确定每一公文子数据库的主要类型向量，具体包括：根据每一公文子数据库中的各公文类型的公文文本的数量，统计预设名次的排名靠前的公文类型；根据所述预设名次的排名靠前的公文类型，确定该公文子数据库的主要类型向量。5.根据权利要求2所述的公文智能推荐方法，其特征在于，所述确定所述多个公文子数据库集合相对于目标公文文本的公文类型的相似度权重，具体包括：根据每一公文子数据库集合中与目标公文文本的公文类型相同或相似的公文文本的数量的占比，确定该公文子数据库集合相对于目标公文文本的公文类型的相似度权重。6.根据权利要求5所述的公文智能推荐方法，其特征在于，所述公文类型的相似关系是根据多个公文类型的公文文本的语法结构特征预计算得到的。7.根据权利要求2所述的公文智能推荐方法，其特征在于，所述方法还包括，所述各公文子数据库对应的公文推荐模型的联邦学习训练过程如下：对于所述联邦学习架构中每一横向联邦学习的子节点进行本地训练后，将各自训练好的公文推荐模型参数传递给联邦学习聚合服务器；所述联邦学习聚合服务器根据公文子数据库集合的信息将各子节点训练好的公文推荐模型参数进行横向聚合得到节点聚合参数，并将所述节点聚合参数分别传输给所述联邦学习架构中对应的纵向联邦学习的节点；根据所述联邦学习架构中各纵向联邦学习的节点的排序，依次将相邻两个节点的节点聚合参数根据相似度权重进行纵向聚合、且将相似度权重合并后，传输给下一节点，直至所有节点的节点聚合参数依次完成纵向聚合；所述联邦学习聚合服务器对纵向聚合后的节点聚合参数进行评估后，进行下一轮联邦学习，直至所述公文推荐模型参数满足预设条件。8.根据权利要求7所述的公文智能推荐方法，其特征在于，将相邻两个节点的相似度权重合并的步骤具体包括：以所述相邻两个节点对应的公文子数据库中公文文本的数量为权值，对相邻两个节点的相似度权重进行加权求和。9.根据权利要求7所述的公文智能推荐方法，其特征在于，所述节点对应的相似度权重保存在各公文子数据库对应的本地服务器中。10.根据权利要求7所述的公文智能推荐方法，其特征在于，在训练各公文子数据库对应的公文推荐模型之前，所述方法还包括：所述联邦学习聚合服务器将公文推荐模型的初始结构和参数、以及目标公文文本的公文类型广播给所述联邦学习架构的各子节点。
说明书desc
技术领域本申请涉及计算机技术领域，特别涉及一种基于联邦学习的公文智能推荐方法。背景技术在电子政务应用高速发展的背景下，电子公文审批系统逐渐普及。公文审批者在对目标公文进行审批时，一般需要参考大量的相关公文，从而给出准确的审批意见。然而，现有的电子公文审批系统暂时还没有提供相关公文推荐的功能。面对该问题，如果采用现有的基于机器学习算法，并使用当前公文数据库作为训练数据得到公文推荐模型，会存在如下问题：由于公文文本的特殊保密性，不同地域不同部门的公文数据会分开存储至各公文子数据库中，且数据库中的数据很难互通。因此，会导致仅使用本地公文子数据库训练公文推荐模型，存在公文子数据库中积累的公文较少的训练语料缺失问题。并且，公文文本不同于一般文本，具有特殊的语法结构特征，且不同类型的公文文本各自的语法结构特征又不仅相同，会进一步放大语料缺失的问题，最终导致训练得到的公文推荐模型的推荐结果不准确。发明内容本申请实施例的目的在于提供一种基于联邦学习的公文智能推荐方法，所述方法包括：确定目标公文文本的公文类型以及各公文子数据库对应的公文类型；根据所述目标公文文本的公文类型以及各公文子数据库对应的公文类型，确定各公文子数据库对应的联邦学习架构；其中，所述联邦学习架构包括各公文子数据对应的公文推荐模型之间的横向联邦学习或纵向联邦学习关系；将所述联邦学习架构由联邦学习聚合服务器广播给所述各公文子数据库；所述各公文子数据库对应的公文推荐模型根据所述联邦学习状架构进行联邦学习训练后，输出所述目标公文文本对应的公文推荐结果。可选地，所述根据所述目标公文文本的公文类型以及各公文子数据库对应的公文类型，确定各公文子数据库对应的联邦学习架构，具体包括：将各公文子数据库根据对应的公文类型分为多个公文子数据库集合；确定所述多个公文子数据库集合相对于目标公文文本的公文类型的相似度权重；将各公文子数据库集合作为纵向联邦学习的节点、并将每一公文子数据库集合内各公文子数据库作为横向联邦学习的子节点，构建确定所述联邦学习架构；其中，所述纵向联邦学习的节点在所述联邦学习架构中的排序是根据所述相似度权重确定的。可选地，所述将各公文子数据库根据对应的公文类型分为多个公文子数据库集合，具体包括：根据每一公文子数据库中主要公文文本的公文类型，确定每一公文子数据库的主要类型向量；对每一公文子数据库中的所有公文文本提取公文关键词，确定每一公文子数据库的主要关键词向量；根据各公文子数据库的主要类型向量和主要关键词向量，将各公文子数据库进行聚类，得到多个公文子数据库集合。可选地，所述根据每一公文子数据库中主要公文文本的公文类型，确定每一公文子数据库的主要类型向量，具体包括：根据每一公文子数据库中的各公文类型的公文文本的数量，统计预设名次的排名靠前的公文类型；根据所述预设名次的排名靠前的公文类型，确定该公文子数据库的主要类型向量。可选地，所述确定所述多个公文子数据库集合相对于目标公文文本的公文类型的相似度权重，具体包括：根据每一公文子数据库集合中与目标公文文本的公文类型相同或相似的公文文本的数量的占比，确定该公文子数据库集合相对于目标公文文本的公文类型的相似度权重。可选地，所述公文类型的相似关系是根据多个公文类型的公文文本的语法结构特征预计算得到的。可选地，所述方法还包括，所述各公文子数据库对应的公文推荐模型的联邦学习训练过程如下：对于所述联邦学习架构中每一横向联邦学习的子节点进行本地训练后，将各自训练好的公文推荐模型参数传递给联邦学习聚合服务器；所述联邦学习聚合服务器根据公文子数据库集合的信息将各子节点训练好的公文推荐模型参数进行横向聚合得到节点聚合参数，并将所述节点聚合参数分别传输给所述联邦学习架构中对应的纵向联邦学习的节点；根据所述联邦学习架构中各纵向联邦学习的节点的排序，依次将相邻两个节点的节点聚合参数根据相似度权重进行纵向聚合、且将相似度权重合并后，传输给下一节点，直至所有节点的节点聚合参数依次完成纵向聚合；所述联邦学习聚合服务器对纵向聚合后的节点聚合参数进行评估后，进行下一轮联邦学习，直至所述公文推荐模型参数满足预设条件。可选地，将相邻两个节点的相似度权重合并的步骤具体包括：以所述相邻两个节点对应的公文子数据库中公文文本的数量为权值，对相邻两个节点的相似度权重进行加权求和。可选地，所述节点对应的相似度权重保存在各公文子数据库对应的本地服务器中。可选地，在训练各公文子数据库对应的公文推荐模型之前，所述方法还包括：所述联邦学习聚合服务器将公文推荐模型的初始结构和参数、以及目标公文文本的公文类型广播给所述联邦学习架构的各子节点。本发明提供的公文智能推荐方法，采用联邦学习的架构训练得到公文推荐模型，克服了各公文子数据库数据不互通导致的训练语料缺失的问题；同时基于各公文子数据库语料数据的特点，设计了横向联邦学习和纵向联邦学习相结合的架构，使得公文推荐模型对公文文本共通的语法结构特征和各类公文文本各自的特定语法结构特征均兼顾了学习，进而使得公文推荐模型的推荐结果准确率较高；此外，还考虑到了各公文子数据库数据的私密性，使得公文文本数据不会过度出现出域的情形。附图说明为了更清楚地说明本申请实施例的技术方案，下面将对本申请实施例中所需要使用的附图作简单地介绍。图1为本发明实施例提供的公文智能推荐方法的流程示意图；图2为本发明实施例提供的联邦学习架构确定方法的流程示意图；图3为本发明实施例提供的联邦学习架构的示意图；图4为本发明实施例提供的联邦学习训练方法的流程示意图；图5为本发明实施例提供的公文智能推荐装置的结构示意图；图6为本发明实施例提供的电子设备的结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行描述。相似的标号和字母在下面的附图中表示类似项，因此，一旦某一项在一个附图中被定义，则在随后的附图中不需要对其进行进一步定义和解释。同时，在本申请的描述中，术语“第一”、“第二”等仅用于区分描述，而不能理解为指示或暗示相对重要性。在电子政务应用高速发展的背景下，电子公文审批系统逐渐普及。公文审批者在对目标公文进行审批时，一般需要参考大量的相关公文，从而给出准确的审批意见。然而，现有的电子公文审批系统暂时还没有提供相关公文推荐的功能。面对该问题，如果采用现有的基于机器学习算法，并使用当前公文数据库作为训练数据得到公文推荐模型，会存在如下问题：由于公文文本的特殊保密性，不同地域不同部门的公文数据会分开存储至各公文子数据库中，且数据库中的数据很难互通。因此，会导致仅使用本地公文子数据库训练公文推荐模型，存在公文子数据库中积累的公文较少的训练语料缺失问题。并且，公文文本不同于一般文本，具有特殊的语法结构特征，且不同类型的公文文本各自的语法结构特征又不仅相同，会进一步放大语料缺失的问题，最终导致训练得到的公文推荐模型的推荐结果不准确。基于此，本发明实施例提供了一种基于联邦学习的公文智能推荐方法。附图1示出了本发明实施例提供的公文智能推荐方法的流程示意图。步骤S110，确定目标公文文本的公文类型以及各公文子数据库对应的公文类型。本发明实施例在训练公文推荐模型时，考虑到了由于公文文本的特殊保密性，不同地域不同部门的公文数据会分开存储至各公文子数据库中，且数据库中的数据很难互通的问题。因此，可以采样联邦学习的方式利用各公文子数据库的语料信息联合训练公文推荐模型，而且不会影响各公文子数据库数据的私密性。然而，公文文本具有很多不同的类型，例如通知、公示、决议、会议纪要、请示等。因此，公文会具有两种不同于一般文本的特征：一是基于公文结构和书面用语的规范性，所有类型的公文文本都具有共通的语法结构特征；二是基于不同类型的公文文本具有各自特定的段落格式和常用词汇，使得不同类型的公文文本分别具有各自的特定语法结构特征。因此在使用联邦学习的方式训练文本推荐模型时需要兼顾两类语法结构特征。具体而言，对于某一类型的目标公文文本而言，类型相同或相似的公文文本语料，和类型完全不同的公文文本语料，在进行文本推荐时的价值是完全不同的。但类型完全不同的公文文本语料中共通的语法结构特征在训练时也不能完全舍弃。因此，本发明实施例需要在基于联邦学习的文本推荐模型训练过程中结合横向联邦学习和纵向联邦学习两种结构。其中横向联邦学习是指多份相似的语料数据各自训练模型后再将模型聚合的方式；而纵向联邦学习是指多份不同的语料数据聚合后再统一训练模型的方式。因此，本发明实施例针对于单一任务的公文审批场景，即一个公文审批任务中往往审核的是单一类型的公文文本，在训练文本推荐模型时必须考虑目标公文文本的类型，进而根据目标公文文本的类型才能确定合适的联邦学习架构，使得训练得到的文本推荐模型能够为该类型的公文文本给出准确的公文推荐结果。因此，本步骤中首先需要确定目标公文文本的公文类型以及各公文子数据库对应的公文类型，进而在后续步骤中确定公文推荐模型的训练方式。值得说明的是，本发明实施例基于分布于不同地域不同部门的公文子数据库作为语料数据进行联邦学习训练，一个公文子数据库中的所有文本作为一个整体成为了本发明实施例中的最小语料数据单位，以保证各公文子数据库之间的公文数据是非互通的。步骤S120，根据所述目标公文文本的公文类型以及各公文子数据库对应的公文类型，确定各公文子数据库对应的联邦学习架构；其中，所述联邦学习架构包括各公文子数据对应的公文推荐模型之间的横向联邦学习或纵向联邦学习关系。在步骤S110确定了目标公文文本的公文类型以及各公文子数据库对应的公文类型后，本步骤需要根据上述信息确定本发明实施例采用的联邦学习架构，附图2示出了本步骤S120的联邦学习架构确定方法又可以具体细分为步骤S121至S123。步骤S121，将各公文子数据库根据对应的公文类型分为多个公文子数据库集合。在确定本发明实施例中的联邦学习架构时，每个公文子数据库为一个联邦学习的单位结构。由于联邦学习架构各单位结构可以看做一个树状结构，因此各单位结构可以被称为树状结构中的“节点”或“子节点”。进而，还需要确定作为“节点”或“子节点”的各公文子数据库之间属于横向联邦学习关系或纵向联邦学习关系，以及各“节点”或“子节点”在树状结构中的位置等信息。本发明实施例采用横向联邦学习和纵向联邦学习相结合的方式的原理在于，不同类型的公文文本分别具有各自的特定语法结构特征，进而不同的公文子数据库作为语料数据适用于推荐的公文类型也不同。所包含的语料数据涉及的公文类型相同或相似的公文子数据库之间，适合进行横向联邦学习，即多份相似的语料数据各自训练模型后再将模型聚合的方式，此时训练数据指向的语法结构特征趋同，从而实现在数据不出域的情况下协作训练公文推荐模型，实现对数据有效的利用；所包含的语料数据涉及的公文类型完全不同的公文子数据库之间，由于特定语法结构特征相差较大而无法进行横向联邦学习，仅能使用纵向联邦学习，即多份不同的语料数据聚合后再统一训练模型的方式，使得一部分公文子数据库的语料数据的训练结果作为另一部分公文子数据库的语料数据的补充。在纵向联邦学习中，即使是与目标公文文本的公文类型相差较大的语料数据，也能在训练文本推荐模型时用于训练公文文本共通的语法结构特征。因此，本步骤中首先需要将最小语料单元，公文子数据库按照其涉及的公文类型进行分组处理。分组的含义体现出了不同类型的公文文本之间，有些公文文本的语法结构特征是比较相似的，例如决定和决议，公告和通告等，这样的公文文本作为语料数据可以用于横向联邦学习；有些公文文本的语法结构特征相差较大，例如命令和会议纪要，这样的公文文本作为语料数据可以用于纵向联邦学习。不同类型的公文文本之间语法结构特征是否相似的信息，是对不同类型的公文文本的语法结构特征人工预计算得到的，同时也可以结合人工经验来辅助确定。具体而言，公文子数据库根据对应的公文类型，主要是指公文子数据库中哪些类型的公文文本占主要部分，即主要公文文本的公文类型代表了公文子数据库对应的公文类型。公文子数据库根据对应的公文类型可以是根据每一公文子数据库中的各公文类型的公文文本的数量，统计预设名次的排名靠前的公文类型，例如公文子数据库中排名前五的公文类型。然后根据所述预设名次的排名靠前的公文类型，确定该公文子数据库的主要类型向量。例如将排名前五的公文类型对应的标识组合为一个特征向量，用于标识公文子数据库的公文类型属性。为了提高公文子数据库分组的准确性，本步骤中还需要根据主要出现的关键词来标识公文子数据库的公文类型属性。因为对于不同类型的公文文本而言，其各自具有特定的高频词汇作为该类公文文本的特征。因此，本步骤中可以对每一公文子数据库中的所有公文文本提取公文关键词，确定每一公文子数据库的主要关键词向量，具体地可以使用高频词统计脚本来实现，最终可以取排名前十的关键词组合成主要关键词向量。在确定了各公文子数据库的主要类型向量和主要关键词向量，可以将各公文子数据库进行聚类，得到多个公文子数据库集合。具体的聚类算法采用k-means、DBSCAN等现有算法即可。这样，参与联邦学习的各公文子数据库就被分为了若干集合，每个集合内部的各公文子数据库对应的公文类型相同或相似，集合之间的各公文子数据库对应的公文类型不同。步骤S122，确定所述多个公文子数据库集合相对于目标公文文本的公文类型的相似度权重。在同一公文子数据库集合中的多个公文子数据对应的公文推荐模型可以同时进行训练，对时序上不作明确要求。但不同公文子数据库集合之间进行纵向联邦学习时，需要确定训练的顺序，即语料数据聚合的方式。具体地，附图3示出了本发明实施例中联邦学习架构的示意图。纵向联邦学习在不同节点之间展开，节点的训练数据按照离联邦学习聚合服务器由远到近的顺序进行聚合，即公文子数据库集合1节点和公文子数据库集合2节点首先聚合，再将聚合结果与公文子数据库集合3节点聚合，以此类推。可以理解的是，离联邦学习聚合服务器更远的节点，其结果对公文推荐模型的贡献越小，符合训练模型过程中同类文本用于训练公文推荐模型的共通的语法结构特征和特定的语法结构特征，而不同类公文文本对训练公文共通的语法结构特征进行补充，使得训练出的模型推荐的公文更加准确。因此，本步骤中为了对联邦学习架构中的节点进行排序，需要确定各公文子数据库集合相对于目标公文文本的公文类型的相似度权重。具体地，可以根据每一公文子数据库集合中与目标公文文本的公文类型相同或相似的公文文本的数量的占比，确定该公文子数据库集合相对于目标公文文本的公文类型的相似度权重，相似度权重的取值在0到1之间。步骤S123，将各公文子数据库集合作为纵向联邦学习的节点、并将每一公文子数据库集合内各公文子数据库作为横向联邦学习的子节点，构建确定所述联邦学习架构；其中，所述纵向联邦学习的节点在所述联邦学习架构中的排序是根据所述相似度权重确定的。在确定了多个公文子数据库集合及其相对于目标公文文本的公文类型的相似度权重之后，就可以确定本发明实施例中的联邦学习架构。如附图3所示，参与联邦学习的N个公文子数据库被分为了M个公文子数据库集合作为联邦学习框架的节点，每个公文子数据库集合中包含若干数量不同的公文子数据库作为联邦学习框架的子节点，例如公文子数据库集合1中包含公文子数据库1到10，公文子数据库集合2中包含公文子数据库11到15，公文子数据库集合M中包含公文子数据库N-9到N。M个节点的排序是根据其相对于目标公文文本的公文类型的相似度权重来确定的，公文子数据库集合1的相似度权重0.1最小，距离联邦学习聚合服务器最远，其次为相似度权重0.2公文子数据库集合2，以此类推。步骤S130，将所述联邦学习架构由联邦学习聚合服务器广播给所述各公文子数据库。在联邦学习的训练过程中，联邦学习架构的计算是在联邦学习聚合服务器中收集各公文子数据库的信息后计算得到的。因此，在进行公文推荐模型的联邦学习训练之前，联邦学习聚合服务器不仅要将公文推荐模型的初始结构和参数、以及目标公文文本的公文类型广播给所述联邦学习架构的各子节点，本发明实施例中还需要将所确定的联邦学习架构广播给各公文子数据库所在的节点，使得各节点在训练过程中知晓如何将训练数据通过通信信道传输给下一节点或传输给联邦学习聚合服务器。步骤S140，所述各公文子数据库对应的公文推荐模型根据所述联邦学习状架构进行联邦学习训练后，输出所述目标公文文本对应的公文推荐结果。在确定了联邦学习架构、以及联邦学习聚合服务器将前述步骤中描述的训练前的必要信息广播给各公文子数据库所在的子节点后，本步骤按照联邦学习的训练方式进行训练。其中，具有横向联邦学习关系的各子节点可以各自进行训练后将模型参数聚合到各节点，节点之间进行纵向联邦学习时按照联邦学习架构确定的顺序进行依次聚合。附图4示出了本发明实施例提供的公文推荐模型的联邦学习训练过程，具体包括如下步骤。S410，对于所述联邦学习架构中每一横向联邦学习的子节点进行本地训练后，将各自训练好的公文推荐模型参数传递给联邦学习聚合服务器。如前文所述，本发明实施例中的公文推荐模型的联邦学习训练过程首先对于所述联邦学习架构中每一横向联邦学习的子节点进行本地训练，该训练的对象为联邦学习聚合服务器广播给各子节点的初始公文推荐模型。训练为了保证各子节点之间数据的私密性，节点中的各子节点无法直接将数据在本地或设置局部的聚合服务器进行数据聚合，需要将训练后的模型参数传递给整个系统的联邦学习聚合服务器。S420，所述联邦学习聚合服务器根据公文子数据库集合的信息将各子节点训练好的公文推荐模型参数进行横向聚合得到节点聚合参数，并将所述节点聚合参数分别传输给所述联邦学习架构中对应的纵向联邦学习的节点。联邦学习聚合服务器收到各子节点上报的训练好的参数后，要执行横向联邦学习中的数据聚合操作，作为节点聚合参数传输给对应的节点。本发明实施例对数据聚合的方式不作具体限定，可以采用朴素加权平均聚合、欧氏距离统计聚合、按中位数聚合等联邦学习的参数聚合方法。节点聚合参数传输给对应的节点传输给各节点，是为了各节点后续做纵向聚合时在局部作用范围内进行数据聚合，而不是在联邦学习聚合服务器处统一聚合，降低数据泄露的风险。S430，根据所述联邦学习架构中各纵向联邦学习的节点的排序，依次将相邻两个节点的节点聚合参数根据相似度权重进行纵向聚合、且将相似度权重合并后，传输给下一节点，直至所有节点的节点聚合参数依次完成纵向聚合。原始的纵向联邦学习需要将训练数据聚合到联邦学习聚合服务器后再统一完成训练，但本发明实施例中的纵向联邦学习步骤区别于该常见的学习方式。由于本发明实施例采用了特殊的联邦学习架构，且各节点中的语料数据在公文推荐场景中携带有各自的语法结构特征信息。因此，为了避免大量的公文子数据库集合的数据在联邦学习聚合服务器处聚合时产生大量的数据标准化处理，增加联邦学习聚合服务器的负担，本发明实施例直接将联邦学习聚合服务器处理得到的节点聚合参数直接进行纵向聚合，简化了纵向聚合的计算量和数据通信成本。具体地，参考附图3所示，联邦学习架构中各纵向联邦学习的节点的排序，依次将相邻两个节点的节点聚合参数根据相似度权重进行纵向聚合。即，首先将公文子数据库集合1节点的节点聚合参数和公文子数据库集合2节点的节点聚合参数进行聚合，两者聚合的方式可以采用公文子数据库集合对应的相似度权重作为加权求和的权重信息。此外，除了节点聚合参数需要通过加权求和的方式进行聚合外，相似度权重也需要聚合，作为和下一节点进行聚合计算时的相似度权重。将相邻两个节点的相似度权重合并的步骤具体为，以所述相邻两个节点对应的公文子数据库中公文文本的数量为权值，对相邻两个节点的相似度权重进行加权求和。将公文子数据库集合1节点和公文子数据库集合2节点的节点聚合参数以及相似度权重进行聚合后，得到了纵向综合节点聚合参数和纵向综合相似度权值。下一步可以将纵向综合节点聚合参数和纵向综合相似度权值，与公文子数据库集合3节点的节点聚合参数以及相似度权重进行聚合，以此类推，直至所有节点的节点聚合参数依次完成纵向聚合，得到联邦学习最终的模型训练参数。需要说明的是，在纵向联邦学习的过程中，节点对应的相似度权重会保存在各公文子数据库对应的本地服务器中。联邦学习聚合服务器在确定联邦学习架构的步骤中使用了各节点对应的相似度权重中后不再长时间保存该数据，以防止相似度权重数据泄露各公文子数据库的信息。可以理解的是，离联邦学习聚合服务器最远的公文子数据库集合1节点的节点聚合参数在纵向学习的过程中对最终的训练结果的贡献逐渐降低，符合其相对于目标公文文本的公文类型的相似度权重最低这一特性。S440，所述联邦学习聚合服务器对纵向聚合后的节点聚合参数进行评估后，进行下一轮联邦学习，直至所述公文推荐模型参数满足预设条件。经过上述各步骤后，整个联邦学习的训练过程就完成了一轮训练。联邦学习聚合服务器处设置有模型评估模块，会对步骤S430输出的纵向聚合后的模型参数进行评估，如果通过测试集的测试不满足预设条件，则重复上述步骤进行下一轮的联邦学习训练。待训练过程结束后，可以使用训练好的模型参数作为本发明实施例的公文推荐模型的模型参数。在模型应用阶段，接收到目标公文文本的输入后，模型可以输出所述目标公文文本对应的公文推荐结果。公文推荐结果可以是与目标公文文本高度相关的一份或多份公文文本，查询推荐公文文本的范围可以根据审批者的权限来确定。本发明实施例得到的公文推荐模型，在面对和目标公文文本同样类型的输入时，可以推荐出较为准确的公文文本。如果审批者负责审批的公文类型为不同于该目标公文文本的另一类型，则根据该类型重新确定联邦学习架构并进行相应的模型训练，则可以得到适用于该审批者的公文推荐结果。本发明实施例提供的公文智能推荐方法，采用联邦学习的架构训练得到公文推荐模型，克服了各公文子数据库数据不互通导致的训练语料缺失的问题；同时基于各公文子数据库语料数据的特点，设计了横向联邦学习和纵向联邦学习相结合的架构，使得公文推荐模型对公文文本共通的语法结构特征和各类公文文本各自的特定语法结构特征均兼顾了学习，进而使得公文推荐模型的推荐结果准确率较高；此外，还考虑到了各公文子数据库数据的私密性，使得公文文本数据不会过度出现出域的情形。基于上述任一实施例，附图5示出了本发明实施例提供的公文智能推荐装置的结构示意图，具体内容如下：公文分类模块501，用于确定目标公文文本的公文类型以及各公文子数据库对应的公文类型；架构确定模块502，用于根据所述目标公文文本的公文类型以及各公文子数据库对应的公文类型，确定各公文子数据库对应的联邦学习架构；其中，所述联邦学习架构包括各公文子数据对应的公文推荐模型之间的横向联邦学习或纵向联邦学习关系；架构广播模块503，用于将所述联邦学习架构由联邦学习聚合服务器广播给所述各公文子数据库；公文推荐模块504，用于所述各公文子数据库对应的公文推荐模型根据所述联邦学习状架构进行联邦学习训练后，输出所述目标公文文本对应的公文推荐结果。本发明实施例提供的公文智能推荐装置，采用联邦学习的架构训练得到公文推荐模型，克服了各公文子数据库数据不互通导致的训练语料缺失的问题；同时基于各公文子数据库语料数据的特点，设计了横向联邦学习和纵向联邦学习相结合的架构，使得公文推荐模型对公文文本共通的语法结构特征和各类公文文本各自的特定语法结构特征均兼顾了学习，进而使得公文推荐模型的推荐结果准确率较高；此外，还考虑到了各公文子数据库数据的私密性，使得公文文本数据不会过度出现出域的情形。基于上述任一实施例，附图6示出了本发明实施例提供的电子设备的实体结构示意图，该电子设备可以包括：处理器610、通信接口620、存储器630和通信总线640，其中，处理器610，通信接口620，存储器630通过通信总线640完成相互间的通信。处理器610可以调用存储器630中的逻辑指令，以执行如下方法：本发明实施例提供的公文智能推荐方法，采用联邦学习的架构训练得到公文推荐模型，克服了各公文子数据库数据不互通导致的训练语料缺失的问题；同时基于各公文子数据库语料数据的特点，设计了横向联邦学习和纵向联邦学习相结合的架构，使得公文推荐模型对公文文本共通的语法结构特征和各类公文文本各自的特定语法结构特征均兼顾了学习，进而使得公文推荐模型的推荐结果准确率较高；此外，还考虑到了各公文子数据库数据的私密性，使得公文文本数据不会过度出现出域的情形。此外，上述的存储器630中的逻辑指令可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明实施例的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。另一方面，本发明实施例还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现以执行上述各实施例提供的方法，例如包括：本发明实施例提供的公文智能推荐方法，采用联邦学习的架构训练得到公文推荐模型，克服了各公文子数据库数据不互通导致的训练语料缺失的问题；同时基于各公文子数据库语料数据的特点，设计了横向联邦学习和纵向联邦学习相结合的架构，使得公文推荐模型对公文文本共通的语法结构特征和各类公文文本各自的特定语法结构特征均兼顾了学习，进而使得公文推荐模型的推荐结果准确率较高；此外，还考虑到了各公文子数据库数据的私密性，使得公文文本数据不会过度出现出域的情形。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分所述的方法。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
