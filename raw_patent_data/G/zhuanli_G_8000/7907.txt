标题title
一种水质监测物联网传感器的标定装置及方法
摘要abst
本发明公开了一种水质监测物联网传感器的标定装置及方法，所述装置包括进水系统、反应系统、在线监测系统、控制系统、数据存储与处理系统。该方法通过在线监测系统采集探头响应数据；通过数据预处理模块对在线监测数据进行预处理，包括时间戳检验、错误数据删除、空缺数据补齐等；通过模型校正模块采用深度学习修正物联网传感器模型，带入优化求解，最终获得校正后的水质监测模型。本发明利用流态优化的混合动力学模型自动计算目标指标浓度，利用较简洁的装置提供了宽范围的标定浓度值，能够更加灵活地实现多指标标定。
权利要求书clms
1.一种水质监测物联网传感器的标定装置，其特征在于，包括进水系统、反应系统、在线监测系统、控制系统、数据存储与处理系统；所述进水系统包括进水桶、蠕动泵、电磁流量计，所述进水桶包括第一进水桶、第二进水桶，第一进水桶用于目标指标水质储存，第二进水桶用于背景水质储存；所述蠕动泵的进水端通过管路与两个进水桶相连，蠕动泵的出水端通过电磁流量计接通反应系统的反应器；所述反应系统包括反应器、搅拌系统，所述搅拌系统包括搅拌装置和变频控制器；所述搅拌装置固定于反应系统内，用于反应系统内混合液的搅拌；所述变频控制器与控制系统连接，用于控制搅拌装置的搅拌速度，保证反应系统内水质均匀混合；所述在线监测系统，包括多个水质传感器探头、显示存储器；各传感器探头置于反应系统中，用于监测反应系统中水质的参数，所述显示存储器显示反应时间及传感器探头的监测数据；所述控制系统分别与进水系统和在线监测系统连接，控制进水时间及进水量，传输在线监测数据，控制反应系统搅拌速度；所述数据存储与处理系统包括数据存储模块、数据预处理模块、模型校正模块；所述数据存储模块用于对在线监测数据进行存储；所述数据预处理模块用于对在线监测数据进行预处理；所述数据存储与处理系统与控制系统连接，控制系统控制开启蠕动泵，先从第一进水桶进水，根据水质传感器探头监测数据，实时自动计算目标指标浓度Cbt＝C0*exp，其中C0为背景水质目标标定指标浓度，HRT为反应器中水力停留时间；再由第二进水桶进水，实时自动计算目标指标浓度Cbt＝Cb1*)，其中Cb1为第一进水桶进水结束时反应器中目标指标浓度；绘制时间t与目标指标浓度Cbt之间的关系曲线；在实时计算目标指标浓度过程中，还在线监测系统探头实时记录响应值，绘制时间与探头响应之间的关系曲线；根据两条关系曲线推导某一时刻探头响应与对应目标指标浓度之间的关系；所述模型校正模块通过深度学习修正物联网传感器模型，带入优化求解，最终获得校正后的水质监测模型。2.根据权利要求1所述的水质监测物联网传感器的标定装置，其特征在于，所述在线监测系统的水质传感器探头包括pH、ORP、电导率、浊度传感器探头，分别用于监测反应系统中的pH、ORP、电导率、浊度。3.根据权利要求2所述的水质监测物联网传感器的标定装置，其特征在于，所述控制系统与电磁流量计、蠕动泵连接，控制进水时间及进水量；所述控制系统与变频控制器连接，控制搅拌系统搅拌速度；所述控制系统与显示存储器连接，传输在线监测数据。4.根据权利要求1所述的水质监测物联网传感器的标定装置，其特征在于，所述第一进水桶中目标指标水质是在背景水质的基础上，根据目标校正指标人工添加一定浓度的目标指标离子；第二进水桶中背景水质为物联网传感器所监测水环境水质；两个进水桶进水均通过蠕动泵及管路投加到反应系统中。5.根据权利要求1所述的水质监测物联网传感器的标定装置，其特征在于，所述搅拌装置的搅拌器的叶轮为桨式或涡轮式；所述变频控制器实现搅拌器的启动、停止、加速、减速，并实时显示搅拌器的运行状态信息。6.根据权利要求2所述的水质监测物联网传感器的标定装置，其特征在于，所述pH、ORP、电导率、浊度传感器探头，采用电极法测量技术，带温度传感器；所述显示存储器显示卡上设有一块与屏幕显示位置对应的存储区。7.根据权利要求1所述的水质监测物联网传感器的标定装置，其特征在于，所述数据预处理模块对在线监测数据进行预处理，包括时间戳检验、错误数据删除、空缺数据补齐。8.一种自动标定物联网传感器的方法，采用权利要求1-7任一项所述的标定装置，其特征在于，包括两种函数关系：一是进水时间与反应器内指标浓度之间的关系，步骤如下：根据蠕动泵流量，计算水力停留时间HRT:HTR＝V0/Q0，其中V0为反应器有效体积，Q0为蠕动泵流量；将反应器中加入体积V0的背景水质，测定背景水质目标标定指标浓度C0，第一进水桶添加目标水质使目标指标浓度为Cb0，第二进水桶添加背景水质，其中Cb0＞C0；开启蠕动泵，以流量Q0开始由第一进水桶进水，根据式1的混合动力学模型，系统自动计算目标指标浓度Cbt；Cbt＝C0*exp第一进水桶进水总时长为3HRT，进水结束时间为te，此时反应器中目标指标浓度为Cb1＝C0*exp；第一进水桶进水结束后，继续以流量Q0开始由第二进水桶进水，根据式2自动计算目标指标浓度Cbt，进水总时长为3HRT；Cbt＝Cb1*) 绘制时间t与目标指标浓度C之间的关系曲线：以反应时间t为横坐标x，以浓度C为纵坐标y，绘制曲线yc；二是进水时间与探头响应之间的关系；步骤如下：在运行步骤-之前，单个指标在线监测系统探头响应值H0；在运行步骤-的整个过程中，在线监测系统探头实时记录响应值Ht；对在线监测系统探头响应数据进行预处理，包括时间戳检验、错误数据删除、空缺数据补齐；绘制时间t与探头响应H之间的关系曲线：以反应时间t为横坐标x，以探头响应值H为纵坐标y，绘制曲线yh；根据推导某一时刻探头响应yht与对应目标指标浓度yct之间的关系；通过深度学习修正物联网传感器模型，带入目标指标C与探头响应值H数据对优化求解，最终获得校正后的水质监测模型。9.根据权利要求8所述的自动标定物联网传感器的方法，其特征在于，所述步骤中的背景水质为物联网传感器所监测水环境的水质，目标指标是在背景水质的基础上，根据目标校正指标人工添加一定浓度的目标指标离子：a.目标指标根据校正目标可选校正指标组合数如下：m个指标的组合数：全组合数：其中n为物联网传感器可监测指标数，m为目标校正指标数，0＜m≤n；b.目标指标浓度Cb0的确定方法：根据物联网传感器所监测水环境的目标校正指标的历史数据分析，结合校正时的背景水质，确定目标指标浓度。10.根据权利要求9所述的自动标定物联网传感器的方法，其特征在于，所述步骤、过程得到两组时间与浓度C的数据对函数关系，即混合浓度增加和稀释浓度降低两个过程；对应所述步骤得到两组时间与探头响应H的数据对关系；所述步骤可进行两次模型校正，保证校正的准确性。
说明书desc
技术领域本发明涉及水环境质量监测技术领域，特别涉及一种水质监测物联网传感器的标定装置及方法。背景技术水质在线监测是保证水质量安全的重要手段，随着我国水环境治理的逐渐深入需要大量的水质指标监测。人工检测方式不能及时地提供水质信息；在线仪器监测虽可避免人工检测的弊端，但COD等指标的监测仪器价格较为昂贵，维护成本高，难以大规模普及。基于物联网、机器学习的软测量技术因检测耗时短、费用低等优点在部分工业领域得到了广泛应用，水处理软测量技术作为一种成本低、智能化的水质检测技术，在水环境监测、污水处理，尤其是农村及工业污水处理领域有较大的应用前景。水处理软测量传感器的核心是建立有效的水质指标软测量模型，模型在使用过程中，受到工作环境、气候、水质变动等因素影响，监测效果可能退化，存在数据漂移的问题，因此必须定期对传感器模型进行校正或标定，一方面可以降低模型长期运行造成的误差，另一方面可以适应水质条件等的变化。目前，较常用的校正方法有模型校正、仪器校准、仪器标定。常用的递推校正、即时学习校正等软测量模型优化校正方法都存在目的性和针对性不强的问题，有待进一步深入研究；通过采用与目标参数相关测量仪器比对校准的方法成本较高，难以大规模应用；基于机器学习的软测量传感器的标定需要包括潜在情况的所有数据对，且需要大量的样本数，如何形成标定方法，如何对标定大数据进行分析应用，目前尚无相关标定装置及方法。针对物联网传感器的标定，一般用于机器人、智能驾驶等技术领域，采用最小二乘法、神经网络等模型校正，如专利CN114199281A、CN111323069B、CN114119770A、CN113624228A；针对水质传感器的标定，专利CN104515761A公开了光学溶解氧传感器的标定，采用采样后碘量法实测标定，专利CN110252712A公开了用于水质检测传感器清晰及标定的装置，针对pH、电导率等常规指标，采用标准标定液进行标定；针对物联网水质监测传感器，专利CN 112964843A公开了污水处理设施水质监测的物联网传感器系统及监测方法，该方法可以实现农村污水处理设施出水水质的在线实时监测，并对出水水质进行达标评价，但是未涉及传感器的标定。针对常规水质监测传感器的标定，一般采用标准液两点标定，首先物联网传感器没有标准液，其次对于物联网传感器来说两点或多点标定完全无法满足其标定准确性的要求，因此亟待解决针对物联网传感器的标定问题。因此，本发明开发了一种动态流态优化的适用于不同水质监测软传感器、能够自动对物联网传感器进行标定的方法及装置。该方法和装置对提高水质监测物联网传感器的在线稳定监测具有重要意义，有助于实现水质监测物联网传感器的多参数高精度标定，确保传感器为科研、应用项目提供高质量数据支撑。发明内容本发明的目的是针对上述的问题及需求，提出一种针对不同水质监测物联网传感器的多参数高精度标定装置及方法。本发明的技术方案是：一种水质监测物联网传感器的标定装置，包括进水系统、反应系统、在线监测系统、控制系统、数据存储与处理系统；所述进水系统包括进水桶、蠕动泵、电磁流量计，所述进水桶包括第一进水桶、第二进水桶，第一进水桶用于目标指标水质储存，第二进水桶用于背景水质储存；所述蠕动泵的进水端通过管路与两个进水桶相连，蠕动泵的出水端通过电磁流量计接通反应系统的反应器；所述反应系统包括反应器、搅拌系统，所述搅拌系统包括搅拌装置和变频控制器；所述搅拌装置固定于反应系统内，用于反应系统内混合液的搅拌；所述变频控制器与控制系统连接，用于控制搅拌装置的搅拌速度，保证反应系统内水质均匀混合；所述在线监测系统，包括多个水质传感器探头、显示存储器；各传感器探头置于反应系统中，用于监测反应系统中水质的参数，所述显示存储器显示反应时间及传感器探头的监测数据；所述控制系统分别与进水系统和在线监测系统连接，控制进水时间及进水量，传输在线监测数据，控制反应系统搅拌速度；所述数据存储与处理系统包括数据存储模块、数据预处理模块、模型校正模块；所述数据存储模块用于对在线监测数据进行存储；所述数据预处理模块用于对在线监测数据进行预处理；所述数据存储与处理系统与控制系统连接，控制系统控制开启蠕动泵，先从第一进水桶进水，根据水质传感器探头监测数据，实时自动计算目标指标浓度Cbt＝C0*exp，其中C0为背景水质目标标定指标浓度，HRT为反应器中水力停留时间；再由第二进水桶进水，实时自动计算目标指标浓度Cbt＝Cb1*)，其中Cb1为第一进水桶进水结束时反应器中目标指标浓度；绘制时间t与目标指标浓度Cbt之间的关系曲线；在实时计算目标指标浓度过程中，还在线监测系统探头实时记录响应值，绘制时间与探头响应之间的关系曲线；根据两条关系曲线推导某一时刻探头响应与对应目标指标浓度之间的关系；所述模型校正模块通过深度学习修正物联网传感器模型，带入优化求解，最终获得校正后的水质监测模型。优选的，所述在线监测系统的水质传感器探头包括pH、ORP、电导率、浊度传感器探头，分别用于监测反应系统中的pH、ORP、电导率、浊度。优选的，所述控制系统与电磁流量计、蠕动泵连接，控制进水时间及进水量；所述控制系统与变频控制器连接，控制搅拌系统搅拌速度；所述控制系统与显示存储器连接，传输在线监测数据。优选的，所述第一进水桶中目标指标水质是在背景水质的基础上，根据目标校正指标人工添加一定浓度的目标指标离子；第二进水桶中背景水质为物联网传感器所监测水环境水质；两个进水桶进水均通过蠕动泵及管路投加到反应系统中。优选的，所述搅拌装置的搅拌器的叶轮为桨式或涡轮式；所述变频控制器实现搅拌器的启动、停止、加速、减速，并实时显示搅拌器的运行状态信息。优选的，所述pH、ORP、电导率、浊度传感器探头，采用电极法测量技术，带温度传感器；所述显示存储器显示卡上设有一块与屏幕显示位置对应的存储区。优选的，所述数据预处理模块对在线监测数据进行预处理，包括时间戳检验、错误数据删除、空缺数据补齐。一种自动标定物联网传感器的方法，采用上述标定装置，包括两种函数关系：一是进水时间与反应器内指标浓度之间的关系，步骤如下：根据蠕动泵流量，计算水力停留时间HRT:HTR＝V0/Q0，其中V0为反应器有效体积，Q0为蠕动泵流量；将反应器中加入体积V0的背景水质，测定背景水质目标标定指标浓度C0，第一进水桶添加目标水质使目标指标浓度为Cb0，第二进水桶添加背景水质，其中Cb0＞C0；开启蠕动泵，以流量Q0开始由第一进水桶进水，根据式1的混合动力学模型，系统自动计算目标指标浓度Cbt；Cbt＝C0*exp第一进水桶进水总时长为3HRT，进水结束时间为te，此时反应器中目标指标浓度为Cb1＝C0*exp；第一进水桶进水结束后，继续以流量Q0开始由第二进水桶进水，根据式2自动计算目标指标浓度Cbt，进水总时长为3HRT；Cbt＝Cb1*)绘制时间t与目标指标浓度C之间的关系曲线：以反应时间t为横坐标x，以浓度C为纵坐标y，绘制曲线yc；二是进水时间与探头响应之间的关系；步骤如下：在运行步骤-之前，单个指标在线监测系统探头响应值H0；在运行步骤-的整个过程中，在线监测系统探头实时记录响应值Ht；对在线监测系统探头响应数据进行预处理，包括时间戳检验、错误数据删除、空缺数据补齐；绘制时间t与探头响应H之间的关系曲线：以反应时间t为横坐标x，以探头响应值H为纵坐标y，绘制曲线yh；根据推导某一时刻探头响应yht与对应目标指标浓度yct之间的关系；通过深度学习修正物联网传感器模型，带入目标指标C与探头响应值H数据对优化求解，最终获得校正后的水质监测模型。优选的，所述步骤中的背景水质为物联网传感器所监测水环境的水质，目标指标是在背景水质的基础上，根据目标校正指标人工添加一定浓度的目标指标离子：a.目标指标根据校正目标可选校正指标组合数如下：m个指标的组合数：全组合数：其中n为物联网传感器可监测指标数，m为目标校正指标数，0＜m≤n；b.目标指标浓度Cb0的确定方法：根据物联网传感器所监测水环境的目标校正指标的历史数据分析，结合校正时的背景水质，确定目标指标浓度。优选的，所述步骤、过程得到两组时间与浓度C的数据对函数关系，即混合浓度增加和稀释浓度降低两个过程；对应所述步骤得到两组时间与探头响应H的数据对关系；所述步骤可进行两次模型校正，保证校正的准确性。本发明的优点是：1、本发明基于流态优化的混合动力学模型自动计算目标指标浓度，避免了对样品浓度的大量测试，降低了时间和经济成本。2、本发明基于物联网传感器实际监测水质的真实场景，采用进水目标指标浓度梯度递增/递减的实验方法，通过检测目标指标浓度，获取两组校正数据对，较模型优化校正方法目的性和针对性更强。3、本发明提出了目标校正指标的全组合情况，充分考虑了基于历史数据的标定指标浓度范围，几乎可以包括所有潜在情况，考虑全面，校正准确性更高。4、本发明采用较为简洁的、但独特的实现高低浓度动态优化的流态结构装置，提供了较短时间内宽范围的标定浓度数据对，装置成本低、操作简便、适用范围广。附图说明通过结合附图对本发明示例性实施方式进行更详细的描述，本发明的上述以及其它目的、特征和优势将变得更加明显，其中，在本发明示例性实施方式中，相同的参考标号通常代表相同部件。图1示出了本发明实施例1水质监测物联网传感器标定装置的结构示意图；图2示出了本发明实施例2农污COD/氨氮/硝氮/磷酸盐指标历史数据分析；图3示出了本发明实施例2进水时间与氨氮指标浓度/吸光度之间的关系；图4示出了本发明实施例2进水时间与探头响应之间的关系；图5示出了本发明实施例2水质监测物联网传感器模型标定结果；图6示出了本发明水质监测物联网传感器标定的方法流程图；其中，1进水桶、2电磁流量计、3蠕动泵、4反应装置进水口、5反应器、6搅拌系统、7物联网传感器多探头、8控制系统及数据存储与处理系统、9反应装置溢流口、10出水桶。具体实施方式如图1所示，下面将参照附图更详细地描述本发明的优选实施方式。虽然附图中显示了本发明的优选实施方式，然而应该理解，可以以各种形式实现本发明而不应被这里阐述的实施方式所限制。实施例1如图1所示，本发明水质监测物联网传感器标定装置，包括进水系统、反应系统、在线监测系统、控制系统、数据存储与处理系统；进水系统包括进水桶1、电磁流量计2、蠕动泵3。蠕动泵3的进水端通过管路与所述进水桶1相连，蠕动泵3的出水端通过管路与电磁流量计2相连，蠕动泵的出水端通过管路进入反应系统5；电磁流量计2和蠕动泵3与控制系统连接；所述进水桶1包括进水桶①、进水桶②，进水桶①用于目标指标水质储存，进水桶②用于背景水质储存。蠕动泵为L100型号，流量范围为0.0002-380ml/min。反应系统包括反应器5、搅拌系统6，反应系统有效容积为5.5L。反应器1上有进水口4，进水通过进水蠕动泵3与反应器1连接，蠕动泵3出口与进水口4连接，蠕动泵3与控制系统连接；反应器5上设有溢流口9；反应器5内设有搅拌系统6；搅拌装置6固定于反应系统5内，为2片推进式螺旋桨叶旋桨式搅拌器，叶片外缘圆周速度为5-15m/s，用于反应系统5内混合液的搅拌；所述变频控制器与控制系统连接；搅拌器6通过RS485协议控制搅拌器的启动、停止、加速、减速、正反转，单机通讯距离可达1200M，保证反应系统内活性污泥均匀混合。在线监测系统7包括pH、ORP、电导率、浊度4指标低成本传感器探头，显示存储器；传感器探头置于反应系统5中，用于监测反应系统中的pH、ORP、电导率、浊度；所述显示存储器具有数据显示、存储及导出功能，用于实时显示反应时间及传感器探头的监测数据。控制系统及数据存储与处理系统8包括控制模块、数据存储模块、数据预处理模块、模型校正模块。控制模块分别与进水系统电磁流量计2和蠕动泵3、搅拌系统6、在线监测系统7连接并可读取各仪表设备数据；控制模块与蠕动泵3连接，并可控制进水时间及进水量；控制模块与搅拌系统6连接，并可控制搅拌系统搅拌速度；控制模块与在线监测系统7连接，并可传输在线监测数据。数据存储模块用于对在线监测数据进行存储；数据预处理模块用于对在线监测数据进行预处理，包括时间戳检验、错误数据删除、空缺数据补齐等；模型校正模块基于预处理后的数据，通过深度学习修正物联网传感器模型，带入优化求解，最终获得校正后的水质监测模型；所属数据存储与处理系统与控制系统链接。上述标定装置中，所述进水桶①中目标指标水质是在背景水质的基础上，根据目标校正指标人工添加一定浓度的目标指标离子；进水桶②中背景水质为物联网传感器所监测水环境水质；进水均通过蠕动泵及管路投加到反应系统中。上述标定装置中，所述搅拌装置宜为小直径高转速的搅拌器，搅拌器的叶轮宜选桨式、涡轮式；所述变频控制器实现搅拌器的启动、停止、加速、减速，并实时显示搅拌器的工作频率、转速等运行状态信息。上述标定装置中，所述pH、ORP、电导率、浊度等多指标低成本传感器采用电极法测量技术，可带温度传感器；所述显示存储器显示卡上设有一块与屏幕显示位置对应的存储区。上述标定装置中，所述控制系统通过编写程序，可按照指定需求控制装置全自动运行，具体如下：通过控制蠕动泵电磁流量计，使进水桶①经所述蠕动泵进入所述反应系统，并控制进水桶①进样时间、进水桶②进样时间；通过控制搅拌器和变频控制器，使所述搅拌器以一定转速搅拌，使所述反应系统混合均匀；通过所述在线监测系统和所述数据存储与处理系统，以及标定方法算法，实现物联网传感器的标定。实施例2利用实施例1中的水质监测物联网传感器标定装置对某农村污水处理设施出水水质物联网传感器进行标定。某农村污水处理设施采用AO+MBR工艺，设计规模24吨/天，出水安装了水质监测物联网传感器，传感器探头包括pH、ORP、电导率、浊度，输出水质指标为COD、氨氮、硝氮、磷酸盐。利用本发明装置标定物联网传感器多指标，标定指标组合数详细组合如下：将实施例1中的装置安装在该设施出水口，采集设施出水，按照下述步骤对物联网传感器四指标进行标定，具体操作如下：历史数据分析：对待标定物联网传感器监测设施近一个月出水水质COD/氨氮/硝氮/磷酸盐指标进行分析，如图2所示。由图可见，该设施出水水质波动较大，COD浓度范围为5-40mg/L，氨氮浓度范围为0-4mg/L，硝氮浓度范围为0-5mg/L，磷酸盐浓度范围为0-0.15mg/L；确定目标水质指标浓度COD为40mg/L、氨氮为5mg/L、硝氮为5mg/L、磷酸盐为0.15mg/L。添加进水：向进水桶②中添加农污出水；向进水桶①中添加目标水质；将有效体积5.5L的农污出水添加至反应器中。装置运行：确定HRT为20min；控制系统控制进水电磁阀，使进水桶①目标水质以275ml/min进入反应系统，进水1h后停止进水桶①进水；接着将进水桶②中农污出水以275ml/min进入反应系统，进水1h后装置停止。数据获取：在装置运行前，检测并输入农污出水COD/氨氮/硝氮/磷酸盐浓度；在装置运行过程中，实时同步计算获取COD/氨氮/硝氮/磷酸盐浓度；在装置运行过程中，在线监测系统探头响应值实时采集并传输到数据处理模块。数据处理：对获取的数据进行错误数据删除、空缺数据补齐等预处理；绘制进水时间与反应器内指标浓度之间的关系、进水时间与探头响应之间的关系，如图4所示。模型标定：通过深度学习修正物联网传感器模型，将处理后的数据带入目标指标C与探头响应值H数据对标定优化，最终获得校正后的水质监测模型，如图5所示。由图可见，物联网传感器模拟值与实测值匹配度较高，使用均方根误差RMSE、平均绝对误差MAE、平均相对误差MRE、相关性系数Corr作为判别指标，结果显示与真实数据的误差很低，模型标定效果极好。图6为根据本发明一个实施例的水质监测物联网传感器标定的方法流程图，该水质监测物联网传感器标定方法包括：S1，历史数据分析，确定目标校准指标及浓度；S2，装置运行，取样分析目标指标浓度，并获取探头响应值；S3，对目标指标浓度、探头响应值等数据进行处理；S4，将处理后的数据带入物联网传感器模型，通过深度学习修正模型，获得标定后的物联网传感器模型。上述实施例只为说明本发明的技术构思及特点，其目的在于让熟悉此项技术的人能够了解本发明的内容并据以实施，并不能以此限制本发明的保护范围。凡根据本发明主要技术方案的精神实质所做的修饰，都应涵盖在本发明的保护范围之内。
