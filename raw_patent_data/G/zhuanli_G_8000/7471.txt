标题title
一种基于光强梯度数的自动对焦测量方法
摘要abst
本发明提出了一种基于光强梯度数的自动对焦测量方法，利用了PSF函数的图像特性并用拟合函数进行了拟合，对不同离焦量下的光点图像利用拟合函数进行拟合，并求一阶导函数；将一阶导函数的极值做差，可得到离焦量—导函数极值差的函数曲线；将离焦量—导函数极值差的函数曲线，利用拟合函数进行拟合；得到标定好的离焦量—导函数极值差函数，通过找寻不同离焦量下所拟合高斯函数存在一阶导函数极值差存在差异的特性，绘制出离焦量—一阶导函数极值差的函数曲线，提高了对焦的精准性，并实现了快速对焦，同时也提高了普适性。
权利要求书clms
1.一种基于光强梯度数的自动对焦测量方法，其特征在于，包括：基于光强梯度数的自动对焦测量系统，包括：光源用于发射激光；矫直透镜组将发射激光矫平，使呈现水平平行光射出；半透半反透镜将水平平行光中的入射光反射、测量光透射；物镜用于测量被测物体，汇聚透镜用于将测量光汇聚，感光器件用于成像；测量方法包括校准阶段和测量阶段；其中校准阶段包括：将与被测样品材料属性一致的标定样品放置在物镜的载物台上，载物台在焦面阈值距离内进行焦前和焦后的光点图像采集，得到不同离焦量下的光点图像；对不同离焦量下的光点图像利用拟合函数进行拟合，并求一阶导函数；将一阶导函数的极值做差，可得到离焦量—导函数极值差的函数曲线；将离焦量—导函数极值差的函数曲线，利用拟合函数进行拟合；得到标定好的离焦量—导函数极值差函数；其中，离焦量—导函数极值差函数自变量为离焦距离，因变量为离焦量—导函数极值差；测量阶段包括：将被测物体放置在物镜的载物台上，载物台驱动被测物体进行移动，感光器件对移动过程中的移动前后两个位置进行拍照，并记录载物台移动方向和坐标位置；对所采集的移动前后两个位置的两幅光点图片进行高斯函数拟合，并求取一阶导数；根据所得的两个一阶导函数极值差代入标定好的离焦量—导函数极值差函数，并根据载物台移动方向和坐标位置，计算离焦量，即移动载物台完成自动对焦。2.根据权利要求1所述的基于光强梯度数的自动对焦测量方法，其特征在于，所述光源为点光源或平行光源。3.根据权利要求1所述的基于光强梯度数的自动对焦测量方法，其特征在于，感光器件为相机。4.根据权利要求1所述的基于光强梯度数的自动对焦测量方法，其特征在于，拟合函数包括但不限于高斯函数、柯西函数或高斯—柯西函数。
说明书desc
技术领域本发明涉及对焦领域领域，特别是指一种基于光强梯度数的自动对焦测量方法。背景技术目前，现有的显微对焦方法多从图像模糊度出发，通过判断图像的边缘模糊程度或图像光斑的边缘大小，确定相机是否对焦。该类方法在需要高精度测量的场景下具有很大的局限性，其中模糊程度没有明确的定义会降低测量系统的精准度，其次光斑边缘大小会受到人为主观阈值分割的影响。发明内容本发明的主要目的在于克服现有技术中的上述缺陷，提出一种基于光强梯度数的自动对焦测量方法，通过找寻不同离焦量下所拟合高斯函数存在一阶导函数极值差存在差异的特性，绘制出离焦量—一阶导函数极值差的函数曲线，提高了对焦的精准性，并实现了快速对焦。本发明采用如下技术方案：一种基于光强梯度数的自动对焦测量方法，包括：基于光强梯度数的自动对焦测量系统，包括：光源用于发射激光；矫直透镜组将发射激光矫平，使呈现水平平行光射出；半透半反透镜将水平平行光中的入射光反射、测量光透射；物镜用于测量被测物体，汇聚透镜用于将测量光汇聚，感光器件用于成像；测量方法包括校准阶段和测量阶段；其中校准阶段包括：将与被测样品材料属性一致的标定样品放置在物镜的载物台上，载物台在焦面阈值距离内进行焦前和焦后的光点图像采集，得到不同离焦量下的光点图像；对不同离焦量下的光点图像利用拟合函数进行拟合，并求一阶导函数；将一阶导函数的极值做差，可得到离焦量—导函数极值差的函数曲线；将离焦量—导函数极值差的函数曲线，利用拟合函数进行拟合；得到标定好的离焦量—导函数极值差函数；其中，离焦量—导函数极值差函数自变量为离焦距离，因变量为离焦量—导函数极值差；测量阶段包括：将被测物体放置在物镜的载物台上，载物台驱动被测物体进行移动，感光器件对移动过程中的移动前后两个位置进行拍照，并记录载物台移动方向和坐标位置；对所采集的移动前后两个位置的两幅光点图片进行高斯函数拟合，并求取一阶导数；根据所得的两个一阶导函数极值差代入标定好的离焦量—导函数极值差函数，并根据载物台移动方向和坐标位置，计算离焦量，即移动载物台完成自动对焦。具体地，所述光源为点光源或平行光源。具体地，感光器件为相机。具体地，拟合函数包括但不限于高斯函数、柯西函数或高斯—柯西函数。由上述对本发明的描述可知，与现有技术相比，本发明具有如下有益效果：本发明提出了一种基于光强梯度数的自动对焦测量方法，通过找寻不同离焦量下所拟合高斯函数存在一阶导函数极值差存在差异的特性，绘制出离焦量—一阶导函数极值差的函数曲线，提高了对焦的精准性，并实现了快速对焦，同时也提高了普适性。附图说明图1为本发明实施例提供的系统光路架构图；图2为本发明实施例提供的显微系统点扩散函数的示意图；图3为高斯分布函数示意图；图4为标准高斯分布函数的一阶导数图；图5为本发明实施例提供的离焦量—导函数极值差的函数曲线示意图；以下结合附图和具体实施例对本发明作进一步详述。具体实施方式以下通过具体实施方式对本发明作进一步的描述。如图1，为本发明实施例的系统光路架构图；包括1光源用于发出激光；2矫直透镜组；3半透半反透镜；4物镜；5被测物；6汇聚透镜；7感光器件；6汇聚透镜和2矫直透镜组之前都设置有孔径光阑；光源1用于发射激光；矫直透镜组2将发射激光矫平，使呈现水平平行光射出；半透半反透镜3将水平平行光中的入射光反射、测量光透射；物镜4用于测量被测物5，汇聚透镜6用于将测量光汇聚，感光器件7用于成像；两个孔径光阑用来实现共聚焦测量原理；测量原理：显微镜系统是线性时不变系统，其成像过程可以借助点扩散函数描述为其中，D为探测器端光场强度分布，E为样品被照明后发出光的光场强度分布，为卷积运算，PSF为显微镜系统的点扩散函数，该函数可以用下式表述：J1——第一类一阶贝塞尔函数方程；NA——物镜的数值孔径；λ——照明光波长；r——r＝1/2,x、y为样品平面的坐标。根据公式2描述的显微系统的点扩散函数如下图2所示；在测量领域上，因难以测定出具体的PSF函数，故多用高斯函数近似PSF函数，标准高斯函数如图3所示。因距离焦面不同距离处的最大光强存在一定的数值变化，即对在距离焦面不同位置处所采集的光场图所拟合的高斯函数也存在峰值和方差的变化。基于此变化，对所拟合出的高斯函数进行一阶求导，如图4为标准高斯分布函数的一阶导数图。发现一阶导函数存在两个极值点，提取出这两点的极值进行做差，将所得的极值差与采集光斑时候离焦的距离进行曲线标定，其中，横坐标为离焦距离，纵坐标为高斯拟合的—导函数极值差。图形变化如图5所示。基于此原理，本发明技术方案为：测量方法包括校准阶段和测量阶段；其中校准阶段包括：将与被测样品材料属性一致的标定样品放置在物镜的载物台上，载物台在焦面阈值距离内进行焦前和焦后的光点图像采集，得到不同离焦量下的光点图像；对不同离焦量下的光点图像利用拟合函数进行拟合，并求一阶导函数；将一阶导函数的极值做差，可得到离焦量—导函数极值差的函数曲线；将离焦量—导函数极值差的函数曲线，利用拟合函数进行拟合；得到标定好的离焦量—导函数极值差函数；其中，离焦量—导函数极值差函数自变量为离焦距离，因变量为离焦量—导函数极值差；测量阶段包括：将被测物体放置在物镜的载物台上，载物台驱动被测物体进行移动，感光器件对移动过程中的移动前后两个位置进行拍照，并记录载物台移动方向和坐标位置；对所采集的移动前后两个位置的两幅光点图片进行高斯函数拟合，并求取一阶导数；根据所得的两个一阶导函数极值差代入标定好的离焦量—导函数极值差函数，并根据载物台移动方向和坐标位置，计算离焦量，即移动载物台完成自动对焦。此外，光源1可以是平行光源也可以是点光源；可为单独的一个散光源，也可以是通过其他光学期间反射或自发产生的具有一定间隔的光源；打光数量不局限于一个，也可以多个。此外，感光器件为相机，也可以换成能够感受光强变换的感光器件。此外，拟合函数包括但不限于高斯函数、柯西函数或高斯—柯西函数；本发明实施例中采用的是高斯函数。本发明提出了一种基于光强梯度数的自动对焦测量方法，通过找寻不同离焦量下所拟合高斯函数存在一阶导函数极值差存在差异的特性，绘制出离焦量—一阶导函数极值差的函数曲线，提高了对焦的精准性，并实现了快速对焦，同时也提高了普适性。上述仅为本发明的具体实施方式，但本发明的设计构思并不局限于此，凡利用此构思对本发明进行非实质性的改动，均应属于侵犯本发明保护范围的行为。
