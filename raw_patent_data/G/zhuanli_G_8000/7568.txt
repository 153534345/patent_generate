标题title
路口交通数据的生成方法、装置、电子设备和存储介质
摘要abst
本申请公开了一种路口交通数据的生成方法、装置、电子设备和存储介质，该方法和装置应用于基于雷达的路口监测系统，具体为基于路口的车道信息对原始雷达数据进行过滤处理，得到有效雷达数据；对有效雷达数据进行处理，得到路口中每个车道内的车辆对象；将有效雷达数据中的雷达目标与车辆对象进行匹配，并根据车道的相位状态记录与雷达目标匹配的车辆对象以及车辆对象的车辆状态。通过上述方案即可得到路口前的车辆对象标，从而能够确定路口前的车辆排队情况。
权利要求书clms
1.一种路口交通数据的生成方法，应用于基于雷达的路口监测系统，其特征在于，所述生成方法包括步骤：基于路口的车道信息对原始雷达数据进行过滤处理，得到有效雷达数据；对所述有效雷达数据中所有的车辆对象进行单步轨迹预测，得到多个雷达目标；将所述多个雷达目标依次与所述车辆对象进行匹配，并记录与所述雷达目标匹配的所述车辆对象及其车辆状态；应用跟驰模型对没有与任何所述雷达目标匹配的剩余车辆对象进行轨迹修正；基于剩余雷达目标生成新的车辆对象。2.如权利要求1所述的生成方法，其特征在于，所述基于路口的车道信息对所述原始雷达数据进行过滤处理，得到有效雷达数据，包括步骤：将所述原始雷达数据中位于车道外的原始雷达检测点予以滤除；将所述原始雷达数据中速度为负的原始雷达检测点予以滤除；将所述原始雷达数据中位置长期保持不变的原始雷达检测点予以滤除。3.如权利要求1所述的生成方法，其特征在于，所述将所述多个雷达目标依次与所述车辆对象进行匹配，并记录与所述雷达目标匹配的所述车辆对象及其车辆状态，包括步骤：基于所述雷达目标的ID字段对所述车辆对象进行匹配处理，将匹配成功的所述雷达目标记录为所述有效雷达目标，并记录与所述有效雷达目标匹配的车辆对象；如果所述车辆对象有剩余，基于所述雷达目标的距离差、远动角度、横向偏差和/或速度差对剩余车辆对象进行匹配处理，将匹配成功的所述雷达目标记录为所述有效雷达目标。4.如权利要求1所述的生成方法，其特征在于，所述跟驰模型如下式所述：a=f其中a表示当前车辆对象的加速度，v表示所述当前车辆对象的速度，af表示所述当前车辆对象的前一车辆对象的加速度，vf表示所述前一车辆对象的速度，d表示所述当前车辆对象与前一车辆对象之间的距离，pset是所述跟驰模型的其他预测参数。5.如权利要求4所述的生成方法，其特征在于，所述其他预测参数包括期望速度、期望车头时距、驾驶人反应时间、最小安全间距和最大加减速度中的部分或全部。6.如权利要求1~5任一项所述的生成方法，其特征在于，所述生成方法还包括步骤：统计一段时间内所述路口的全局坐标系内所有雷达检测目标的全局坐标点，得到所述一段时间内所述路口的散点热力图，根据所述散点热力图绘得到所述车道信息。7.一种路口交通数据的生成装置，应用于基于雷达的路口监测系统，其特征在于，所述生成装置包括：数据过滤模块，被配置为基于路口的车道信息对原始雷达数据进行过滤处理，得到有效雷达数据；单步预测模块，被配置为对所述有效雷达数据中所有的车辆对象进行单步轨迹预测，得到多个雷达目标；目标匹配模块，被配置为将所述多个雷达目标依次与所述车辆对象进行匹配，并记录与所述雷达目标匹配的所述车辆对象及其车辆状态；轨迹修正模块，被配置为应用跟驰模型对没有与任何所述雷达目标匹配的剩余车辆对象进行轨迹修正；对象生成模块，被配置为基于剩余雷达目标生成新的车辆对象。8.如权利要求7所述的生成装置，其特征在于，所述数据过滤模块包括：第一过滤单元，被配置为将所述原始雷达数据中位于车道外的原始雷达检测点予以滤除；第二过滤单元，被配置为将所述原始雷达数据中速度为负的原始雷达检测点予以滤除；第三过滤单元，被配置为将所述原始雷达数据中位置长期保持不变的原始雷达检测点予以滤除。9.如权利要求8所述的生成装置，其特征在于，所述目标匹配模块包括：第一匹配单元，被配置为基于所述雷达目标的ID字段对所述车辆对象进行匹配处理，将匹配成功的所述雷达目标记录为所述有效雷达目标，并记录与所述有效雷达目标匹配的车辆对象；第二匹配单元，被配置为如果所述车辆对象有剩余，基于所述雷达目标的距离差、远动角度、横向偏差和/或速度差对剩余车辆对象进行匹配处理，将匹配成功的所述雷达目标记录为所述有效雷达目标。10.如权利要求8所述的生成装置，其特征在于，所述跟驰模型如下式所述：a=f其中a表示当前车辆对象的加速度，v表示所述当前车辆对象的速度，af表示所述当前车辆对象的前一车辆对象的加速度，vf表示所述前一车辆对象的速度，d表示所述当前车辆对象与前一车辆对象之间的距离，pset是所述跟驰模型的其他预测参数。11.如权利要求10所述的生成装置，其特征在于，所述其他预测参数包括期望速度、期望车头时距、驾驶人反应时间、最小安全间距和最大加减速度中的部分或全部。12.如权利要求7~11任一项所述的生成装置，其特征在于，所述生成装置还包括：车道生成模块，被配置为统计一段时间内所述路口的全局坐标系内所有雷达检测目标的全局坐标点，得到所述一段时间内所述路口的散点热力图，根据所述散点热力图绘得到所述车道信息。13.一种电子设备，其特征在于，包括至少一个处理器和与所述处理器连接的存储器，其中：所述存储器用于存储计算机程序或指令；所述处理器用于执行所述计算机程序或指令，以使所述电子设备实现如权利要求1~6任一项所述的路口交通数据的生成方法。14.一种存储介质，应用于电子设备，其特征在于，所述存储介质承载有一个或多个计算机程序，当所述一个或多个计算机程序被所述电子设备执行时，使得所述电子设备实现如权利要求1~6任一项所述的路口交通数据的生成方法。
说明书desc
技术领域本申请涉及交通设施技术领域，更具体地说，涉及一种路口交通数据的生成方法、装置、电子设备和存储介质。背景技术道路交叉口是造成城市交通拥堵、居民出行时间增加的主要因素。因此，改善路口渠化设置、优化信号配时等交通建设与管理方法成为了缓解城市交通拥堵问题的关键。具体来说，交管部门需要获得准确的路口实时交通数据和非实时的交通统计数据，来制定完善的路口管理方案和相关应急处置措施；另一方面，这些数据又是支撑新建、改扩建路口决策的重要依据。因此，获取全面准确的路口车辆交通数据十分重要。现有的路口数据监测主要包括线圈检测器、路口摄像头。线圈检测器通常在距停止线一定距离地下布设，能够探测通过布设断面机动车的速度、流量等宏观统计信息。线圈检测器由于其检测技术成熟、检测精度较高等优点，是全世界最广泛使用的交通检测器。但是固定线圈检测器检测数据类别单一，无法获取实时车辆微观轨迹数据，难以满足当今路口数据的精细要求。路口摄像头已在当今城市的大部分交叉口广泛布设，交通管理者和执法者可以根据信号灯杆上安装的摄像头传输的视频数据进行违法抓拍、事故发现等交通管理，很大程度上促进了城市交通发展。但基于视频数据跟踪路口车辆排队、消散的实时轨迹信息，则需要复杂算法支撑及大算力保证，从目前技术来看，基于视频的精细路口数据获取的准确度仍不够理想。除了线圈检测器和路口摄像头，基于雷达的路口监测系统在近几年发展迅速，该路口监测系统的雷达传感器安装在路灯杆上，通过收发天线来获取路口动态车辆的电磁波信号来检测和统计交通数据，其安装和维护较简单，可实时获取车辆轨迹，基本不受天气环境影响。但雷达传感器获取的原始点数据存在目标点跟踪易缺失、难以监测拥堵状态下的静态车辆、多径效应导致杂波较多等缺陷，因此目前的路口监测系统通过原始点数据无法得到路口前的车辆排队情况。发明内容有鉴于此，本申请提供一种路口交通数据的生成方法、装置、电子设备和存储介质，用于解决目前的雷达监测系统无法得到路口前的车辆排队情况的问题。为了实现上述目的，现提出的方案如下：一种路口交通数据的生成方法，应用于基于雷达的路口监测系统，所述生成方法包括步骤：基于路口的车道信息对原始雷达数据进行过滤处理，得到有效雷达数据；对所述有效雷达数据中所有的车辆对象进行单步轨迹预测，得到多个雷达目标；将所述多个雷达目标依次与所述车辆对象进行匹配，并记录与所述雷达目标匹配的所述车辆对象及其车辆状态；应用跟驰模型对没有与任何所述雷达目标匹配的剩余车辆对象进行轨迹修正；基于剩余雷达目标生成新的车辆对象。可选的，所述基于路口的车道信息对所述原始雷达数据进行过滤处理，得到有效雷达数据，包括步骤：将所述原始雷达数据中位于车道外的原始雷达检测点予以滤除；将所述原始雷达数据中速度为负的原始雷达检测点予以滤除；将所述原始雷达数据中位置长期保持不变的原始雷达检测点予以滤除。可选的，所述将所述多个雷达目标依次与所述车辆对象进行匹配，并记录与所述雷达目标匹配的所述车辆对象及其车辆状态，包括步骤：基于所述雷达目标的ID字段对所述车辆对象进行匹配处理，将匹配成功的所述雷达目标记录为所述有效雷达目标，并记录与所述有效雷达目标匹配的车辆对象；如果所述车辆对象有剩余，基于所述雷达目标的距离差、远动角度、横向偏差和/或速度差对剩余车辆对象进行匹配处理，将匹配成功的所述雷达目标记录为所述有效雷达目标。可选的，所述跟驰模型如下式所述：a=f其中a表示当前车辆对象的加速度，v表示所述当前车辆对象的速度，af表示所述当前车辆对象的前一车辆对象的加速度，vf表示所述前一车辆对象的速度，d表示所述当前车辆对象与前一车辆对象之间的距离，pset是所述跟驰模型的其他预测参数。可选的，所述其他预测参数包括期望速度、期望车头时距、驾驶人反应时间、最小安全间距和最大加减速度中的部分或全部。可选的，所述生成方法还包括步骤：统计一段时间内所述路口的全局坐标系内所有雷达检测目标的全局坐标点，得到所述一段时间内所述路口的散点热力图，根据所述散点热力图绘得到所述车道信息。一种路口交通数据的生成装置，应用于基于雷达的路口监测系统，所述生成装置包括：数据过滤模块，被配置为基于路口的车道信息对原始雷达数据进行过滤处理，得到有效雷达数据；单步预测模块，被配置为对所述有效雷达数据中所有的车辆对象进行单步轨迹预测，得到多个雷达目标；目标匹配模块，被配置为将所述多个雷达目标依次与所述车辆对象进行匹配，并记录与所述雷达目标匹配的所述车辆对象及其车辆状态；轨迹修正模块，被配置为应用跟驰模型对没有与任何所述雷达目标匹配的剩余车辆对象进行轨迹修正；对象生成模块，被配置为基于剩余雷达目标生成新的车辆对象。可选的，所述数据过滤模块包括：第一过滤单元，被配置为将所述原始雷达数据中位于车道外的原始雷达检测点予以滤除；第二过滤单元，被配置为将所述原始雷达数据中速度为负的原始雷达检测点予以滤除；第三过滤单元，被配置为将所述原始雷达数据中位置长期保持不变的原始雷达检测点予以滤除。可选的，所述目标匹配模块包括：第一匹配单元，被配置为基于所述雷达目标的ID字段对所述车辆对象进行匹配处理，将匹配成功的所述雷达目标记录为所述有效雷达目标，并记录与所述有效雷达目标匹配的车辆对象；第二匹配单元，被配置为如果所述车辆对象有剩余，基于所述雷达目标的距离差、远动角度、横向偏差和/或速度差对剩余车辆对象进行匹配处理，将匹配成功的所述雷达目标记录为所述有效雷达目标。可选的，所述跟驰模型如下式所述：a=f其中a表示当前车辆对象的加速度，v表示所述当前车辆对象的速度，af表示所述当前车辆对象的前一车辆对象的加速度，vf表示所述前一车辆对象的速度，d表示所述当前车辆对象与前一车辆对象之间的距离，pset是所述跟驰模型的其他预测参数。可选的，所述其他预测参数包括期望速度、期望车头时距、驾驶人反应时间、最小安全间距和最大加减速度中的部分或全部。可选的，所述生成装置还包括：车道生成模块，被配置为统计一段时间内所述路口的全局坐标系内所有雷达检测目标的全局坐标点，得到所述一段时间内所述路口的散点热力图，根据所述散点热力图绘得到所述车道信息。一种电子设备，包括至少一个处理器和与所述处理器连接的存储器，其中：所述存储器用于存储计算机程序或指令；所述处理器用于执行所述计算机程序或指令，以使所述电子设备实现如上所述的路口交通数据的生成方法。一种存储介质，应用于电子设备，所述存储介质承载有一个或多个计算机程序，当所述一个或多个计算机程序被所述电子设备执行时，使得所述电子设备实现如上所述的路口交通数据的生成方法。从上述的技术方案可以看出，本申请公开了一种路口交通数据的生成方法、装置、电子设备和存储介质，该方法和装置应用于基于雷达的路口监测系统，具体为基于路口的车道信息对原始雷达数据进行过滤处理，得到有效雷达数据；对有效雷达数据进行处理，得到路口中每个车道内的车辆对象；将有效雷达数据中的雷达目标与车辆对象进行匹配，并根据车道的相位状态记录与雷达目标匹配的车辆对象以及车辆对象的车辆状态。通过上述方案即可得到路口前的车辆对象，从而得到路口前的车辆排队情况。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例的一种路口交通数据的生成方法的流程图；图2为本申请实施例的基于距离差、运动角差、横向偏差和速度差四参数关联门限的雷达目标匹配的计算示意图；图3为本申请实施例的利用跟驰模型对车辆对象进行位置修正的示意图；图4为本申请实施例的路口车辆排队生成轨迹的示意图；图5为本申请实施例的路口车辆排队消散轨迹的示意图；图6为本申请实施例的一种路口交通数据的生成装置的框图；图7为本申请实施例的一种电子设备的框图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。实施例一图1为本申请实施例的一种路口交通数据的生成方法的流程图。如图1所示，本实施例公开的生成方法应用于电子设备，该电子设备可以理解为具有信息处理能力和数据计算能力的计算机或服务器，该计算机或服务器为基于雷达的路口监测系统的数据处理设备。该生成方法用于基于路口的雷达对车辆进行检测得到的雷达数据生成路口交通数据，具体步骤如下。S1、基于路口的车道信息对原始雷达数据进行过滤处理。这里的车道信息是指预先标定的路口周边各个车道的具体位置。过滤的目的在于排出无效数据的干扰，通过过滤处理从原始雷达数据中得到有效雷达数据。具体过滤方案如下：首先，应用射线法判断原始雷达数据中是否存在位于车道线之外的原始雷达检测点，如果存在，则将位于车道线外部的原始雷达检测点予以滤除，仅留下位于车道线内部的原始雷达检测点。然后，计算车道线内的原始雷达检测点的速度向量相对于车道线的中心线的分向量，这个分向量是原始雷达检测点相对于车道的运动速度。对该分向量进行判断，确定是否存在分向量为负的原始雷达检测点，如果存在分向量为负，且绝对值大于5m/s的原始雷达检测点，则将其予以滤除。换句话说，这些被过滤掉的原始雷达检测点沿着车道做反方向运动，考虑到在路口场景下，真实车辆倒车或逆行的情况相比雷达由于多径效应检测到反向虚目标的数量低许多，因此该过滤规则过滤掉的目标多数为雷达虚假目标。最后，将车道内长期静止不动，且有运动目标在同一车道内通过的原始雷达检测点予以滤除，这里的长期不动可以根据具体实践确定时间，如1个小时、半天或一天等。由于路口地面不平整、固定广告牌反射等影响，雷达经常会检测到长时间静止的虚假目标。因在现实情况下，运动车辆不可能重叠穿过静止车辆，所以采用运动目标通过该静止目标的方法来区分在路口排队停止的真实车辆目标与静止虚假目标，并滤掉静止的虚假目标。S2、对有效雷达数据的车辆对象进行单步预测。对原始雷达过滤后得到的有效雷达数据进行处理，具体处理过程包括从中生成对应路口外的车辆对象，并基于车辆动力学原理对车辆对象进行单步轨迹预测，以上一帧雷达数据中的车辆对象为基础得到当前时刻的多个雷达目标。雷达传输数据的帧间隔一般在50毫秒至100毫秒，在如此短的时间间隔内，可以近似认为车辆匀速行驶，速度为上一帧结束时的车辆速度。S3、将有效雷达数据中的雷达目标与车辆对象进行匹配。将经过上一步骤单步预测后的雷达目标，根据车道的相位状态并通过匹配规则与当前帧的且经过过滤的有效雷达数据中的车辆对象进行匹配，得到并记录与有效雷达目标匹配的车辆对象。具体需要经过如下方案进行匹配操作：首先，基于雷达目标的ID字段对车辆对象进行匹配。雷达检测的雷达目标带有ID编号属性，即ID字段，前后帧相同的ID字段表明这是雷达检测的同一个目标的运动轨迹。如果目标车辆在上一帧匹配的雷达目标的ID字段与当前帧的中一个雷达目标的ID字段相同，则在当前帧中车辆对象匹配该雷达目标，并标记已匹配到车辆对象。然后，如果上面的匹配还有剩余车辆对象，则基于距离差、运动角差、横向偏差和速度差四参数关联门限进行雷达目标匹配。具体为，设置四个阈值参数，分别是距离差阈值d，运动角差阈值a，横向偏差c，速度差s；同时设置四个权重参数，分别是距离差权重wd，运动角差权重wa，横向偏差权重wc，速度差权重ws。针对每个车辆，计算其与没有被上一轮匹配到的所有雷达目标的二维距离d0、运动朝向角的差a0、雷达点与车辆轨迹向量的横线偏差距离c0和速度差s0；具体的计算如下所示：式中，分别表示车辆对象的x坐标，y坐标，速度及运动角度，分别表示雷达目标的x坐标，y坐标，速度及运动角度；为车辆对象沿运动角度的行驶轨迹向量，为车辆当前位置与雷达当前位置相连的向量，如图2所示。然后进行判断，如果计算出的四个值均分别不大于所设置四个阈值参数，即则根据下式计算车辆目标与该雷达的匹配度m：循环完所有车辆对象，即计算完所有满足阈值限制的匹配度后，将存储车辆标识、雷达标识及匹配度的优先队列按照匹配度m进行降序排列。遍历队列，将当前队列中拥有最大匹配度的车辆对象及雷达目标提取出来作为有效雷达目标，表明该车辆对象与该雷达目标匹配程度最高。对该车辆对与该有效雷达目标进行匹配记录，并将队列中涉及到该车辆对象与该雷达目标的所有元素进行剔除，防止同一车辆对象匹配到多个雷达目标和同一雷达目标被匹配到多个车辆对象，优先队列全部元素遍历后完成第二轮的车辆对象与雷达目标的匹配过程。S4、对没有与任何雷达目标匹配的剩余车辆对象进行轨迹修正；对上面没有匹配到雷达目标的车辆对象基于跟驰模型理论进行轨迹修正。依照跟驰理论，后车运动状态被紧邻后车的前方车辆所限制，其数学模型一般表示为下式：其中a表示本车的加速度，v表示本车速度，af表示前车加速度，vf表示前车速度，d表示本车与前车距离，pset是一系列跟驰模型的其他参数，在不同的跟驰模型中也有所区别，通常包括期望速度、期望车头时距、驾驶人反应时间、最小安全间距、最大加减速度等。从上式可知，跟驰模型体现本车当前加速度与当前车速度、前车速度、前车加速度、车间距等的函数关系。其中，本车与前车距离d是跟驰模型中重要的参数，通常而言，本车与前车距离d越大，表明本车前方有较大道路空间，前车对本车行驶限制较弱，反之，d越小，则前车对本车的行驶限制越强。在路口排队场景中，除各车道的头车外，其余车辆均有其车道内前车，采用跟驰模型对其中没有被雷达数据匹配的车辆目标进行跟驰模型预测，算出当前车辆目标加速度对车辆速度进行相应修正。对于车道头车，如果其已在步骤四中与某一雷达数据匹配，则跳过该步骤；如果没有匹配到任何雷达目标，则需要根据步骤五对路口车道信号相位判断进行跟驰模型预测。具体地说，车道头车前方无车辆，没有车间距属性，因此不适用跟驰模型。但实际情况下头车会受到信号灯管控，当信号灯为红灯时，停止线可以假想为头车的“前车”，对头车进行跟驰约束，头车与“前车”车间距为头车到停止线的距离，只不过其最小安全间距等跟驰模型参数与其他车辆不同，需重新标定。绿灯时，认为头车与“前车”的车间距为无穷大，仍然可应用跟驰模型进行预测，这样就对所有没有匹配雷达目标的车辆实行跟驰模型轨迹预测。如图3所示，只有在上面对车辆对象进行匹配时出现未匹配到雷达目标的车辆对象，才应用跟驰模型进行位置及速度修正。当判断左转车道当前时刻为红灯状态，此车道的头车跟驰模型中与“前车”的距离参数为该车辆对象到路口停止线距离；直行车道此时为绿灯状态，车道头车应用的跟驰模型中与“前车”的距离参数为无穷大，对于头车，跟驰模型用下式表示：本申请中根据根据有效雷达目标的运动状态判断车道的相位状态。由于本方案针对路口进口道停止线前路段，并没有越过停止线进入交叉口，因此对于在该路段内的车辆黄灯相位相当于红灯，所有相位状态分为绿灯状态和红灯状态两种。首先将进口道的所有车道进行车道组的划分，同一转向方向车道划分为一个车道组。举例来说，将进口道的直行车道划分为直行车道组；左转车道为左转车道组；右转车道为右转车道组等，每个车道组内的车道在同一时刻拥有相同的信号状态。设置各个车道组的初始相位状态均为红灯状态，在每个雷达传输时间间隔内，判断各车道组相位状态是否需要改变。具体逻辑如下：1、车道组当前帧状态为红灯状态时：统计上一帧中距离车道停止线15米内的有效雷达目标，如果存在某一有效雷达目标，上一帧中在车道组包含的车道内部，当前帧不包含在车道内部且离停止线距离3米之内，证明存在动态目标在路口越过停止线，表明此时可以通行，该车道对应的车道组转换成绿灯状态。2、车道组当前帧状态为绿灯：统计上一帧中距离车道停止线15米内的雷达目标数据，如果存在某一有效雷达目标，连续8帧均处在同一车道，且处于车道线纵向位置的标准差不大于0.5m，同时该有效雷达目标在当前帧沿车道线的速度小于2m/s，表明该有效雷达目标在停止线前有明显减速停止行为，代表本车道当前时刻禁止通行，该车道对应的车道组转换成红灯状态。S5、基于剩余雷达目标生成新的车辆对象。在一个帧循环步长中，新的车辆对象是否生成的依据是所有有效的雷达目标是否已经全部匹配到已有的车辆对象。如果所有有效雷达目标在这一帧匹配到了相应的车辆对象，则说明所有有效雷达目标被已经被匹配。如果存在某个或某些雷达目标在这一帧没有匹配到任何一个车辆对象，说明雷达检测的该雷达目标是一个在这一帧新出现的车辆目标，因此针对这种雷达目标需对应生成新的车辆对象。然后这些新生成的车辆对象和其他车辆对象一样，到了下一个步长循环中就可以与下一帧的雷达目标进行匹配等操作。从上述技术方案可以看出，本实施例提供了一种路口交通数据的生成方法，该方法应用于基于雷达的路口监测系统，具体为基于路口的车道信息对原始雷达数据进行过滤处理，得到有效雷达数据；对有效雷达数据进行处理，得到路口中每个车道内的车辆对象；将有效雷达数据中的雷达目标与车辆对象进行匹配，并根据车道的相位状态记录与雷达目标匹配的车辆对象以及车辆对象的车辆状态。通过上述方案即可得到路口的车辆对象，从而得到路口前的车辆排队情况。另外，本申请中的车道信息基于下面的方案得到：首先设置二维全局坐标系，并指定雷达在全局坐标系下的横坐标，纵坐标及安装角度，一般情况下设置为。然后根据雷达在全局坐标下的位置和角度信息，将雷达原始航迹目标由雷达坐标系下的位置数据转换成全局坐标下的位置数据。假设雷达自身在全局坐标下的横坐标为x0，纵坐标为y0，安装角度为θ，雷达输出目标的原始坐标为x’，y’，目标在全局坐标系下的坐标为x，y，则转换公式如下：将雷达检测目标转换到全局坐标系下后，统计一段时间内所有目标的全局位置点，得到该段时间内所有目标的散点热力图，在路口场景，车道内的航迹点相比车道外和车道之间多很多，因此雷达散点热力图可以清楚看出各条车道的主体部分，据此可以绘制出车道，并得到车道的相关位置信息，即车道信息。本申请的方案中，输入仅为实时毫米波雷达数据，不依赖视觉、信号相位接入等其他外部数据，基本不受环境天气、白天夜间时间影响；跟踪及优化流程运算量适中，多数为简单数值计算，时间复杂度低，算力需求低；可实时获得车辆路口排队及消散轨迹数据，无时间延迟，车辆跟踪结果较准确。图4和图5为采用实测样本的路口车辆排队轨迹跟踪结果。附图中的流程图和框图，图示了按照本公开各种实施例的系统、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段、或代码的一部分，该模块、程序段、或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个接连地表示的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行规定的功能或操作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。虽然采用特定次序描绘了各操作，但是这不应当理解为要求这些操作以所示出的特定次序或以顺序次序执行来执行。在一定环境下，多任务和并行处理可能是有利的。应当理解，本公开的方法实施方式中记载的各个步骤可以按照不同的顺序执行，和/或并行执行。此外，方法实施方式可以包括附加的步骤和/或省略执行示出的步骤。本公开的范围在此方面不受限制。可以以一种或多种程序设计语言或其组合来编写用于执行本公开的操作的计算机程序代码，上述程序设计语言包括但不限于面向对象的程序设计语言—诸如Java、Smalltalk、C++，还包括常规的过程式程序设计语言—诸如C语言或类似的程序设计语言。程序代码可以完全地在用户计算机上执行、部分地在用户计算机上执行、作为一个独立的软件包执行、部分在用户计算机上部分在远程计算机上执行、或者完全在远程计算机或服务器上执行。在涉及远程计算机的情形中，远程计算机可以通过任意种类的网络——包括局域网或广域网—连接到用户计算机，或者，可以连接到外部计算机。实施例二图6为本申请实施例的一种路口交通数据的生成装置的框图。如图6所示，本实施例公开的生成装置应用于电子设备，该电子设备可以理解为具有信息处理能力和数据计算能力的计算机或服务器，该计算机或服务器为基于雷达的路口监测系统的数据处理设备。该生成装置用于基于路口的雷达对车辆进行检测得到的雷达数据生成路口交通数据，具体包括数据过滤模块10、单步预测模块20、目标匹配模块30、轨迹修正模块40和对象生成模块50。数据过滤模块用于基于路口的车道信息对原始雷达数据进行过滤处理。这里的车道信息是指预先标定的路口周边各个车道的具体位置。过滤的目的在于排出无效数据的干扰，通过过滤处理从原始雷达数据中得到有效雷达数据。该模块包括第一过滤单元、第二过滤单元和第三过滤单元。第一过滤单元用于应用射线法判断原始雷达数据中是否存在位于车道线之外的原始雷达检测点，如果存在，则将位于车道线外部的原始雷达检测点予以滤除，仅留下位于车道线内部的原始雷达检测点。第二过滤单元用于计算车道线内的原始雷达检测点的速度向量相对于车道线的中心线的分向量，这个分向量是原始雷达检测点相对于车道的运动速度。对该分向量进行判断，确定是否存在分向量为负的原始雷达检测点，如果存在分向量为负，且绝对值大于5m/s的原始雷达检测点，则将其予以滤除。换句话说，这些被过滤掉的原始雷达检测点沿着车道做反方向运动，考虑到在路口场景下，真实车辆倒车或逆行的情况相比雷达由于多径效应检测到反向虚目标的数量低许多，因此该过滤规则过滤掉的目标多数为雷达虚假目标。第三过滤单元用于将车道内长期静止不动，且有运动目标在同一车道内通过的原始雷达检测点予以滤除，这里的长期不动可以根据具体实践确定时间，如1个小时、半天或一天等。由于路口地面不平整、固定广告牌反射等影响，雷达经常会检测到长时间静止的虚假目标。因在现实情况下，运动车辆不可能重叠穿过静止车辆，所以采用运动目标通过该静止目标的方法来区分在路口排队停止的真实车辆目标与静止虚假目标，并滤掉静止的虚假目标。单步预测模块用于对有效雷达数据的车辆对象进行单步预测处理。对原始雷达过滤后得到的有效雷达数据进行处理，具体处理过程包括从中生成对应路口外的车辆对象，并基于车辆动力学原理对车辆对象进行单步轨迹预测，以上一帧雷达数据中的车辆对象为基础得到当前时刻的多个雷达目标。雷达传输数据的帧间隔一般在50毫秒至100毫秒，在如此短的时间间隔内，可以近似认为车辆匀速行驶，速度为上一帧结束时的车辆速度。目标匹配模块用于将有效雷达数据中的雷达目标与车辆对象进行匹配。将经过上一步骤单步预测后的车辆对象，通过匹配规则与当前帧的且经过过滤的有效雷达数据中的雷达目标进行匹配，根据车道的相位状态得到并记录与有效雷达目标匹配的车辆对象以及车辆对象的车辆状态。该模块包括第一匹配单元和和第二匹配单元。第一匹配单元用于基于雷达目标的ID字段对车辆对象进行匹配。雷达检测的雷达目标带有ID编号属性，即ID字段，前后帧相同的ID字段表明这是雷达检测的同一个目标的运动轨迹。如果目标车辆在上一帧匹配的雷达目标的ID字段与当前帧的中一个雷达目标的ID字段相同，则在当前帧中车辆对象匹配该雷达目标，并标记已匹配到车辆对象和被匹配到的有效雷达目标。第二匹配单元用于如果上面的匹配还有剩余车辆对象，则基于距离差、运动角差、横向偏差和速度差四参数关联门限进行雷达目标匹配。具体为，设置四个阈值参数，分别是距离差阈值d，运动角差阈值a，横向偏差c，速度差s；同时设置四个权重参数，分别是距离差权重wd，运动角差权重wa，横向偏差权重wc，速度差权重ws。针对每个车辆，计算其与没有被上一轮匹配到的所有雷达目标的二维距离d0、运动朝向角的差a0、雷达点与车辆轨迹向量的横线偏差距离c0和速度差s0；具体的计算如下所示：式中，分别表示车辆对象的x坐标，y坐标，速度及运动角度，分别表示雷达目标的x坐标，y坐标，速度及运动角度；为车辆对象沿运动角度的行驶轨迹向量，为车辆当前位置与雷达当前位置相连的向量。然后进行判断，如果计算出的四个值均分别不大于所设置四个阈值参数，即则根据下式计算车辆目标与该雷达的匹配度m：循环完所有车辆对象，即计算完所有满足阈值限制的匹配度后，将存储车辆标识、雷达标识及匹配度的优先队列按照匹配度m进行降序排列。遍历队列，将当前队列中拥有最大匹配度的车辆对象及雷达目标提取出来作为有效雷达目标，表明该车辆对象与该雷达目标匹配程度最高。对该车辆对与该有效雷达目标进行匹配记录，并将队列中涉及到该车辆对象与该雷达目标的所有元素进行剔除，防止同一车辆对象匹配到多个雷达目标和同一雷达目标被匹配到多个车辆对象，优先队列全部元素遍历后完成第二轮的车辆对象与雷达目标的匹配过程。轨迹修正模块用于对没有与任何所述雷达目标匹配的剩余车辆对象进行轨迹修正。具体来说，对目标匹配模块没有匹配到雷达目标的车辆对象基于跟驰模型理论进行轨迹修正。依照跟驰理论，后车运动状态被紧邻后车的前方车辆所限制，其数学模型一般表示为下式：其中a表示本车的加速度，v表示本车速度，af表示前车加速度，vf表示前车速度，d表示本车与前车距离，pset是一系列跟驰模型的其他参数，在不同的跟驰模型中也有所区别，通常包括期望速度、期望车头时距、驾驶人反应时间、最小安全间距、最大加减速度等。从上式可知，跟驰模型体现本车当前加速度与当前车速度、前车速度、前车加速度、车间距等的函数关系。其中，本车与前车距离d是跟驰模型中重要的参数，通常而言，本车与前车距离d越大，表明本车前方有较大道路空间，前车对本车行驶限制较弱，反之，d越小，则前车对本车的行驶限制越强。在路口排队场景中，除各车道的头车外，其余车辆均有其车道内前车，采用跟驰模型对其中没有被雷达数据匹配的车辆目标进行跟驰模型预测，算出当前车辆目标加速度对车辆速度进行相应修正。对于车道头车，如果其已在步骤四中与某一雷达数据匹配，则跳过该步骤；如果没有匹配到任何雷达目标，则需要根据步骤五对路口车道信号相位判断进行跟驰模型预测。具体地说，车道头车前方无车辆，没有车间距属性，因此不适用跟驰模型。但实际情况下头车会受到信号灯管控，当信号灯为红灯时，停止线可以假想为头车的“前车”，对头车进行跟驰约束，头车与“前车”车间距为头车到停止线的距离，只不过其最小安全间距等跟驰模型参数与其他车辆不同，需重新标定。绿灯时，认为头车与“前车”的车间距为无穷大，仍然可应用跟驰模型进行预测，这样就对所有没有匹配雷达目标的车辆实行跟驰模型轨迹预测。如图3所示，只有在上面对车辆对象进行匹配时出现未匹配到雷达目标的车辆对象，才应用跟驰模型进行位置及速度修正。当判断左转车道当前时刻为红灯状态，此车道的头车跟驰模型中与“前车”的距离参数为该车辆对象到路口停止线距离；直行车道此时为绿灯状态，车道头车应用的跟驰模型中与“前车”的距离参数为无穷大，对于头车，跟驰模型用下式表示：本申请中根据有效雷达目标的运动状态判断车道的相位状态。由于本方案针对路口进口道停止线前路段，并没有越过停止线进入交叉口，因此对于在该路段内的车辆黄灯相位相当于红灯，所有相位状态分为绿灯状态和红灯状态两种。首先将进口道的所有车道进行车道组的划分，同一转向方向车道划分为一个车道组。举例来说，将进口道的直行车道划分为直行车道组；左转车道为左转车道组；右转车道为右转车道组等，每个车道组内的车道在同一时刻拥有相同的信号状态。设置各个车道组的初始相位状态均为红灯状态，在每个雷达传输时间间隔内，判断各车道组相位状态是否需要改变。具体逻辑如下：1、车道组当前帧状态为红灯状态时：统计上一帧中距离车道停止线15米内的有效雷达目标，如果存在某一有效雷达目标，上一帧中在车道组包含的车道内部，当前帧不包含在车道内部且离停止线距离3米之内，证明存在动态目标在路口越过停止线，表明此时可以通行，该车道对应的车道组转换成绿灯状态。2、车道组当前帧状态为绿灯：统计上一帧中距离车道停止线15米内的雷达目标数据，如果存在某一有效雷达目标，连续8帧均处在同一车道，且处于车道线纵向位置的标准差不大于0.5m，同时该有效雷达目标在当前帧沿车道线的速度小于2m/s，表明该有效雷达目标在停止线前有明显减速停止行为，代表本车道当前时刻禁止通行，该车道对应的车道组转换成红灯状态。对象生成模块用于基于剩余雷达目标生成新的车辆对象。在一个帧循环步长中，新的车辆对象是否生成的依据是所有有效的雷达目标是否已经全部匹配到已有的车辆对象。如果所有有效雷达目标在这一帧匹配到了相应的车辆对象，则说明所有有效雷达目标被已经被匹配。如果存在某个或某些雷达目标在这一帧没有匹配到任何一个车辆对象，说明雷达检测的该雷达目标是一个在这一帧新出现的车辆目标，因此针对这种雷达目标需对应生成新的车辆对象。然后这些新生成的车辆对象和其他车辆对象一样，到了下一个步长循环中就可以与下一帧的雷达目标进行匹配等操作。从上述技术方案可以看出，本实施例提供了一种路口交通数据的生成装置，该装置应用于基于雷达的路口监测系统，具体为基于路口的车道信息对原始雷达数据进行过滤处理，得到有效雷达数据；对有效雷达数据进行处理，得到路口中每个车道内的车辆对象；将有效雷达数据中的雷达目标与车辆对象进行匹配，并根据车道的相位状态记录与雷达目标匹配的车辆对象以及车辆对象的车辆状态。通过上述方案即可得到路口的车辆对象，从而得到路口前的车辆排队情况。描述于本公开实施例中所涉及到的单元可以通过软件的方式实现，也可以通过硬件的方式来实现。其中，单元的名称在某种情况下并不构成对该单元本身的限定，例如，第一获取单元还可以被描述为“获取至少两个网际协议地址的单元”。本文中以上描述的功能可以至少部分地由一个或多个硬件逻辑部件来执行。例如，非限制性地，可以使用的示范类型的硬件逻辑部件包括：现场可编程门阵列、专用集成电路、专用标准产品、片上系统、复杂可编程逻辑设备等等。实施例三图7为本申请实施例的一种电子设备的框图。参考图7所示，其示出了适于用来实现本公开实施例中的电子设备的结构示意图。本公开实施例中的终端设备可以包括但不限于诸如移动电话、笔记本电脑、数字广播接收器、PDA、PAD、PMP、车载终端等等的移动终端以及诸如数字TV、台式计算机等等的固定终端。图7示出的电子设备仅仅是一个示例，不应对本公开实施例的功能和使用范围带来任何限制。如图7所示，电子设备可以包括处理装置601，其可以根据存储在只读存储器602中的程序或者从存储装置608加载到随机访问存储器603中的程序而执行各种适当的动作和处理。在RAM 603中，还存储有电子设备操作所需的各种程序和数据。处理装置601、ROM 602以及RAM 603通过总线604彼此相连。输入/输出接口605也连接至总线604。通常，以下装置可以连接至I/O接口605：包括例如触摸屏、触摸板、键盘、鼠标、摄像头、麦克风、加速度计、陀螺仪等的输入装置606；包括例如液晶显示器、扬声器、振动器等的输出装置607；包括例如磁带、硬盘等的存储装置608；以及通信装置609。通信装置609可以允许电子设备与其他设备进行无线或有线通信以交换数据。虽然图7示出了具有各种装置的电子设备，但是应理解的是，并不要求实施或具备所有示出的装置。可以替代地实施或具备更多或更少的装置。实施例四本实施例提供了一种计算机可读的存储介质，该介质承载有一个或者多个程序，当上述一个或者多个程序被该电子设备执行时，使得该电子设备实现实施例一中的路口交通数据的生成方法。需要说明的是，本公开上述的计算机可读介质可以是计算机可读信号介质或者计算机可读存储介质或者是上述两者的任意组合。计算机可读存储介质例如可以是——但不限于——电、磁、光、电磁、红外线、或半导体的系统、装置或器件，或者任意以上的组合。计算机可读存储介质的更具体的例子可以包括但不限于：具有一个或多个导线的电连接、便携式计算机磁盘、硬盘、随机访问存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑磁盘只读存储器、光存储器件、磁存储器件、或者上述的任意合适的组合。在本公开中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用。而在本公开中，计算机可读信号介质可以包括在基带中或者作为载波一部分传播的数据信号，其中承载了计算机可读的程序代码。这种传播的数据信号可以采用多种形式，包括但不限于电磁信号、光信号或上述的任意合适的组合。计算机可读信号介质还可以是计算机可读存储介质以外的任何计算机可读介质，该计算机可读信号介质可以发送、传播或者传输用于由指令执行系统、装置或者器件使用或者与其结合使用的程序。计算机可读介质上包含的程序代码可以用任何适当的介质传输，包括但不限于：电线、光缆、RF等等，或者上述的任意合适的组合。本说明书中的各个实施例均采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似的部分互相参见即可。尽管已描述了本发明实施例的优选实施例，但本领域内的技术人员一旦得知了基本创造性概念，则可对这些实施例做出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本发明实施例范围的所有变更和修改。最后，还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者终端设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者终端设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者终端设备中还存在另外的相同要素。以上对本发明所提供的技术方案进行了详细介绍，本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处，综上所述，本说明书内容不应理解为对本发明的限制。
