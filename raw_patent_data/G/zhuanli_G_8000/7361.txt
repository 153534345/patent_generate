标题title
一种面向对象的遥感图像分割方法、装置、设备及介质
摘要abst
本申请的实施例提供一种面向对象的遥感图像分割方法、装置、设备及介质。所述方法包括：基于分波段的边缘特征提取算法对待分割图像进行初始图像分割，得到标签图和多边形矢量；通过遍历所述标签图，建立区域邻接图，其节点存储标签的光谱直方图、纹理直方图和形状参数，其边存储表示节点相似度的权重值；基于权重值与动态阈值的关系进行节点合并，将合并节点所对应的多边形矢量合并后与遥感底图叠加得到最终分割结果。本申请解决了采用绝对阈值存在的调参较生硬，且可能造成小建筑被合并到其他对象内，或者大对象被过分割等问题；本申请的图像分割效果更符合人眼视觉，能够在地物复杂的场景依然能保持各地物完整独立。
权利要求书clms
1.一种面向对象的遥感图像分割方法，其特征在于，包括以下步骤：基于分波段的边缘特征提取算法对待分割图像进行初始图像分割，得到标签图和多边形矢量；通过遍历所述标签图，建立区域邻接图，所述区域邻接图包括表示标签区域的节点和表示节点关系的边，所述节点存储标签的光谱直方图、纹理直方图和形状参数，所述边存储表示边所连的节点之间的相似度的权重值；基于所述权重值与预先构造的动态阈值序列中不同动态阈值的关系来判断是否进行节点合并；若所述权重值的最大值大于所述动态阈值序列中的预设动态阈值t，则认为所述节点与该邻接点可以进行合并；若同一个节点a存在多个满足条件的邻接点N，则选择与该节点相似度最大的邻接节点；若同一个节点a有且仅有一个节点b对应，则直接向任务列表中添加a到b的融合任务；若节点a没有满足条件的节点，则跳过或不做处理；将可以进行合并的节点所对应的多边形矢量合并后与遥感底图叠加得到最终分割结果。2.根据权利要求1所述的面向对象的遥感图像分割方法，其特征在于，在所述基于分波段的边缘特征提取算法对待分割图像进行初始图像分割，得到标签图和多边形矢量之前，还包括：利用Farid边缘检测法对所述待分割图像的每一波段的图像进行处理，得到各波段对应的边缘特征图；对各波段对应的边缘特征图进行求和，得到能够显示图像边缘特征强弱的灰度图；利用Canny边缘检测法对所述待分割图像的每一波段的图像进行处理，得到包括各波段对应的边缘线图像；获取所述边缘线图像中所有像素点到各个边缘线的距离，得到距离图；求解所述距离图中的峰值点，将所有峰值点作为种子点；利用分水岭算法对所述灰度图和种子点进行处理，得到所述待分割图像。3.根据权利要求1所述的面向对象的遥感图像分割方法，其特征在于，所述通过遍历所述标签图，建立区域邻接图的步骤，包括：遍历初始分割结果中的标签图，识别出邻接的标签并进行标记，生成邻接矩阵；将所述邻接矩阵转换为图论中的网络，以建立所述区域邻接图；其中，网络中的节点存储标签的光谱直方图、纹理直方图和形状参数，网络中的边存储表示边所连的节点之间的相似度的权重值。4.根据权利要求3所述的面向对象的遥感图像分割方法，其特征在于，所述进行节点合并的步骤，包括：S1、根据尺度因子预先构造动态阈值，所述尺度因子可动态调整，每一尺度因子可计算得出相对应的动态阈值，动态阈值的集合序列可表示为，N为动态阈值个数；S2、用户选择任意尺度因子，确定与之相对应的动态阈值T1S3、根据动态阈值T1与节点M的关系对节点进行合并处理，具体包括：若与节点M相连的边的权重值的最大值大于阈值T1，则将节点M合并到所述最大值对应的边连接的另一节点；否则，对节点M不进行合并处理；遍历所有节点，进行与节点M相同的合并处理；S4、更新尺度因子的值，将阈值替换为下一个阈值，重复执行步骤S3；S5、重复执行步骤S4，直到执行完最后一个阈值对应的合并处理步骤。5.根据权利要求4所述的面向对象的遥感图像分割方法，其特征在于，所述根据尺度因子预先构造动态阈值的步骤，包括：根据用户输入的尺度因子构造数列，时，；时，；，floor为向下取整运算；尺度因子与动态阈值的计算公式为：式中，min_T为能容忍的最小阈值，λ为像素数n小于尺度因子时阈值的衰减速率。6.根据权利要求4所述的面向对象的遥感图像分割方法，其特征在于，所述将节点M合并到所述最大值对应的边连接的另一节点的步骤，包括：删除节点M，将与节点M连接的其它节点连接到另一节点；更新另一节点的光谱直方图、纹理直方图和形状参数；更新与另一节点相连的所有边的权重；将节点M和另一节点对应的多边形矢量进行合并。7.根据权利要求6所述的面向对象的遥感图像分割方法，其特征在于，所述将节点M和另一节点对应的多边形矢量进行合并的步骤之后还包括，将节点M合并到另一节点后的直方图更新步骤和形状参数的更新步骤，其中，所述直方图的更新计算公式如下：式中，n、m分别为节点M和另一节点的像素数，p、q分别为节点M和另一节点的直方图；所述形状参数的更新步骤包括：修改标签图，将节点M对应的标签的id值改为另一节点对应的标签的id值；通过形态学膨胀和腐蚀的差值图得到另一节点的新边界，基于新边界像素的数量和总像素数量计算更新后另一节点的形状参数。8.一种面向对象的遥感图像分割装置，其特征在于，包括：初始分割模块，用于基于分波段的边缘特征提取算法对待分割图像进行初始图像分割，得到标签图和多边形矢量；邻接图构建模块，用于通过遍历所述标签图，建立区域邻接图，所述区域邻接图包括表示标签区域的节点和表示节点关系的边，所述节点存储标签的光谱直方图、纹理直方图和形状参数，所述边存储表示边所连的节点之间的相似度的权重值；节点判断模块，用于基于所述权重值与预先构造的动态阈值序列中不同动态阈值的关系来判断是否进行节点合并；节点更新模块，用于更新节点的光谱直方图、纹理直方图和形状参数；更新与节点相连的所有边的权重；节点合并模块，将判断为需要合并的节点进行合并，将合并的节点所对应的多边形矢量合并后与遥感底图叠加得到最终分割结果。9.一种电子设备，其特征在于，所述电子设备包括：至少一个处理器；以及，与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够执行如权利要求1至7中任意一项所述的面向对象的遥感图像分割方法。10.一种计算机可读存储介质，存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至7中任意一项所述的面向对象的遥感图像分割方法。
说明书desc
技术领域本申请属于遥感图像处理技术领域，具体涉及一种面向对象的遥感图像分割方法、装置、设备及介质。背景技术图像分割是面向对象影像分析的基础，其结果将对后续的分析处理产生重要的影响。传统的分割算法主要以光谱信息的利用为主，如区域增长、分水岭算法等。随着遥感影像空间分辨率的提高，影像中蕴含的纹理信息和边缘信息对图像分割的影响越来越大，许多学者结合光谱与纹理发展出JSEG、高斯混合模型、马尔科夫随机场模型等。这些模型对内容相对简单的自然影像具有一定的效果，但是对于地物复杂的高分辨率影像，很难消除细小地物对分割结果的干扰，导致分割效果差。发明内容为了解决现有技术中存在的上述问题，本申请的实施例提供一种面向对象的遥感图像分割方法、装置、设备及介质，基于光谱、纹理和形状相似性利用动态阈值进行区域合并，分割效果更符合人眼视觉，在地物复杂的场景下仍然能使分割结果保持各地物完整独立。为了实现上述目的，本申请的实施例采用以下技术方案。第一方面，本申请的实施例提供一种面向对象的遥感图像分割方法，包括以下步骤：基于分波段的边缘特征提取算法对待分割图像进行初始图像分割，得到标签图和多边形矢量；通过遍历所述标签图，建立区域邻接图，所述区域邻接图包括表示标签区域的节点和表示节点关系的边，所述节点存储标签的光谱直方图、纹理直方图和形状参数，所述边存储表示边所连的节点之间的相似度的权重值；基于所述权重值与预先构造的动态阈值序列中不同动态阈值的关系来判断是否进行节点合并；若所述权重值的最大值大于所述动态阈值序列中的预设动态阈值t，则认为所述节点与该邻接点可以进行合并；若同一个节点a存在多个满足条件的邻接点N，则选择与该节点相似度最大的邻接节点；若同一个节点a有且仅有一个节点b对应，则直接向任务列表中添加a到b的融合任务；若节点a没有满足条件的节点，则跳过或不做处理；将可以进行合并的节点所对应的多边形矢量合并后与遥感底图叠加得到最终分割结果。进一步地，对待分割图像的获取步骤，包括：利用Farid边缘检测法对所述待分割图像的每一波段的图像进行处理，得到各波段对应的边缘特征图；对各波段对应的边缘特征图进行求和，得到能够显示图像边缘特征强弱的灰度图；利用Canny边缘检测法对所述待分割图像的每一波段的图像进行处理，得到包括各波段对应的边缘线图像；获取所述边缘线图像中所有像素点到各个边缘线的距离，得到距离图；求解所述距离图中的峰值点，将所有峰值点作为种子点；利用分水岭算法对所述灰度图和种子点进行处理，得到所述待分割图像的初始分割结果。进一步地，所述通过遍历所述标签图，建立区域邻接图的步骤，包括：遍历初始分割结果中的标签图，识别出邻接的标签并进行标记，生成邻接矩阵；将所述邻接矩阵转换为图论中的网络，网络中的节点存储标签的光谱直方图、纹理直方图和形状参数，网络中的边存储表示边所连的节点之间的相似度的权重值。更进一步地，所述进行节点合并的步骤，包括：S1、根据尺度因子预先构造动态阈值，所述尺度因子可动态调整，每一尺度因子可计算得出相对应的动态阈值，动态阈值的集合序列可表示为，N为动态阈值个数；S2、用户选择任意尺度因子，确定与之相对应的动态阈值T1S3、根据动态阈值T1与节点M的关系对节点进行合并处理，具体包括：若与节点M相连的边的权重值的最大值大于阈值T1，则将节点M合并到所述最大值对应的边连接的另一节点；否则，对节点M不进行合并处理；遍历所有节点，进行与节点M相同的合并处理；S4、更新尺度因子的值，将阈值替换为下一个阈值，重复执行步骤S3；S5、重复执行步骤S4，直到执行完最后一个阈值对应的合并处理步骤。更进一步地，预先构造基于不同动态阈值的动态阈值序列的步骤，包括：根据用户输入的尺度因子构造数列，时，；时，；，floor为向下取整运算；按下式计算动态阈值序列中的每个阈值：式中，min_T为能容忍的最小阈值，λ为像素数n小于尺度因子时阈值的衰减速率。更进一步地，所述将节点M合并到所述最大值对应的边连接的另一节点的步骤，包括：删除节点M，将与节点M连接的其它节点连接到另一节点；更新另一节点的光谱直方图、纹理直方图和形状参数；更新与另一节点相连的所有边的权重；将节点M和另一节点对应的多边形矢量进行合并。更进一步地，所述将节点M和另一节点对应的多边形矢量进行合并的步骤之后还包括，将节点M合并到另一节点后的直方图更新步骤和形状参数的更新步骤，其中，所述直方图的更新步骤包括：式中，n、m分别为节点M和另一节点的像素数，p、q分别为节点M和另一节点的直方图；所述形状参数的更新步骤包括：修改标签图，将节点M对应的标签的id值改为另一节点对应的标签的id值；通过形态学膨胀和腐蚀的差值图得到另一节点的新边界，基于新边界像素的数量和总像素数量计算更新后另一节点的形状参数。第二方面，本申请的实施例还提供一种面向对象的遥感图像分割装置，包括：初始分割模块，用于基于分波段的边缘特征提取算法对待分割图像进行初始图像分割，得到标签图和多边形矢量；邻接图构建模块，用于通过遍历所述标签图，建立区域邻接图，所述区域邻接图包括表示标签区域的节点和表示节点关系的边，所述节点存储标签的光谱直方图、纹理直方图和形状参数，所述边存储表示边所连的节点之间的相似度的权重值；节点更新模块，用于更新节点的光谱直方图、纹理直方图和形状参数；更新与节点相连的所有边的权重；节点合并模块，将判断为需要合并的节点进行合并，将合并的节点所对应的多边形矢量合并后与遥感底图叠加得到最终分割结果。第三方面，本申请的实施例还提供一种电子设备，所述电子设备包括：至少一个处理器；以及，与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够执行如上述第一方面中任意一项所述的面向对象的遥感图像分割方法。第四方面，本申请的实施例还提供一种计算机可读存储介质，存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如上述第一方面中任意一项所述的面向对象的遥感图像分割方法。与现有技术相比，本申请具有以下有益效果。本申请的实施例提供的技术方案通过基于边缘特征提取进行初始图像分割得到标签图和多边形矢量，通过遍历所述标签图建立区域邻接图，基于所述相似度与动态阈值比较进行节点合并，将合并后得到的多边形矢量与遥感底图叠加得到最终分割结果，实现了面向对象的遥感图像分割。通过分波段提取边缘特征图，将边缘特征图叠加到一起看作高程模型，更加契合分水岭的设计理念，与现有技术将灰度图输入分水岭算法相比，本发明先对地物进行细分，再对同类地物进行划分，采用与现有技术不同的聚类算法，通过探寻找图像分割过程中，尺度因子与动态阈值的计算关系，根据不同地块对尺度因子的需求，动态的调整尺度因子的值，从而实现适应性的调整分块结果和分块效果，能够获得更流畅且符合人眼视觉习惯的图像分界、分块效果；基于动态阈值进行区域邻接图的合并，即对不同尺度的对象采用不同大小的阈值，形成不同的分块大小，解决了采用绝对阈值存在的调参较生硬，且可能造成小建筑被合并到其他对象内，或者大对象被过分割等问题；基于光谱、纹理、形状特征的综合进行图像分割，分割效果更符合人眼视觉，能够在地物复杂的场景依然能保持各地物完整独立。附图说明图1为本申请实施例提供的一种面向对象的遥感图像分割方法的流程图。图2为本申请实施例提供的一个整体流程图。图3为本申请实施例提供的分割效果对比图，为采用本申请技术方案的分割结果，为采用易康软件的分割结果。图4为本申请实施例一种面向对象的遥感图像分割装置的方框图。图5为本发明实现面向对象的遥感图像分割方法的电子设备的结构示意图。具体实施方式为使本申请的目的、技术方案及优点更加清楚、明白，以下结合附图及具体实施方式对本申请作进一步说明。显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。图1为本申请实施例一种面向对象的遥感图像分割方法的流程图，包括以下步骤：步骤101，基于分波段的边缘特征提取算法对待分割图像进行初始图像分割，得到标签图和多边形矢量；初始分割处理的图像进行合并之前，对分割结果进行预处理，其预处理过程包括建立区域邻接图、尺度因子拆分；步骤102，通过遍历所述标签图，建立区域邻接图，所述区域邻接图包括表示标签区域的节点和表示节点关系的边，所述节点存储标签的光谱直方图、纹理直方图和形状参数，所述边存储表示边所连的节点之间的相似度的权重值；建立区域邻接图具体步骤为：通过滤波器按照3*3的模板遍历所述图像的初始分割结果中的标签图，识别所述标签图中的邻接的标签并进行标记，生成邻接矩阵。再将所述邻接矩阵转换为图论中的网络；其中网络中的边属性存储不同节点之间的相似性；所述计算节点之间的相似性的步骤如下：首先节点之间的权重统一用相似度度量。其次，直方图的相似度采用巴氏距离的相似度，计算方法如下：其中，n为直方图的长度，pi为其中一节点的直方图，qi为直方图为另一节点的直方图，hi为两节点合并后的直方图，每一个直方图的累计和应为1。网络中的节点属性存分割结果中各标签的光谱直方图、纹理直方图、形状参数信息。所述形状参数信息主要采用形状指数和紧致度计算，计算公式如下：其中，p为边界像素的个数，A为分割对象的像元个数。计算节点的权重时统一用相似度度量。直方图的相似度采用巴氏距离的相似度，计算方法如下：其中，n为直方图的长度，pi为其中一节点的直方图，qi为直方图为另一节点的直方图，hi为两节点合并后的直方图，每一个直方图的累计和应为1。形状参数的相似度采用高斯核计算，计算方式如下：其中，σ是调节系数，σ越大相似性趋向1，s1和s2是两个节点的形状参数。计算出上述相似性后用加权的方式组合，加权的权重由用户自定义。最后输出区域邻接图。尺度因子拆分层级拆分的具体步骤包括：拆分的计算方法为其中sc为用户输入的尺度因子，X为尺度因子序列。若设定了过大的尺度因子，将自动生成一个由小到大的尺度因子序列，大尺度因子将在小尺度因子的基础上进行合并。从左到右顺序选择尺度因子输出得到的多个尺度因子，由小到大地遍历多个尺度因子中的一个值，将该值作为对预处理后的分割结果进行节点融合，得到的融合任务列表，合并节点的输入项进行处理。对预处理后的分割结果进行节点融合过程包括：生成节点融合任务列表：生成任务列表的具体过程包括：遍历经过预处理后的图像输出结果中的每个节点，查找待合并的节点，所述待合并的节点与邻接的节点进行合并，即重构节点之间的邻接关系。其中，所述待合并的节点与邻接的节点是否进行合并的判断方式为：取出某节点的包含的像元数n，输入到下述公式中计算该节点的动态阈值：其中，sc为步骤4选择的尺度因子，min_t为阈值的能容忍的最小值，λ为像元数小于sc尺度因子时t的衰减速率。其中t表示动态阈值。将不同节点之间的相似性与计算得到的动态阈值t进行比较，具体判断过程如下：判断节点a的相似度是否有大于t的边。若大于t，则认为所述节点与该邻接点可以进行合并；若同一个节点a存在多个满足条件的邻接点N，则选择与该节点相似度最大的邻接节点；若同一个节点a有且仅有一个节点b对应，则直接向任务列表中添加a到b的融合任务。若节点a没有满足条件的节点，则跳过或不做处理。循环步骤-迭代查找其他每一个节点，直到所有的节点被遍历，将结果生成一个融合任务列表。根据得到的融合任务列表，合并节点，具体操作包括：更新获取的区域邻接图网络中的节点拓扑结构，将节点a删除，同时把节点a连接的其他邻节点连接到节点b，完成拓扑结构的更新；更新获取的区域邻接图的节点和边的属性；更新节点的节点属性；迭代任务列表，得到一个将节点a合并到节点b的任务，计算节点a、b合并后的新属性，直方图的合并计算方式如下：其中，n和p为节点a的像元数、直方图矩阵，m和q为节点b的像元数、直方图矩阵。新的形状参数计算首先需要修改标签图，将a标签的id值改为b标签的id值完成合并；其次通过形态学膨胀和腐蚀的差值图得到节点b的新边界，统计得边界像元的数量和总像元数量即可按照前述公式计算新的形状参数。更新所有边的权重，计算方法。把节点a和节点b对应的多边形矢量进行合并；遍历下一个融合任务，循环前叙步骤，直到所有的任务被完成。所述光谱直方图由稀疏矩阵的方式存储，存储位数为波段数*32，例如，若影像是三个波段，则该光谱直方图的稀疏矩阵的维度为96；所述纹理直方图由黑塞矩阵的特征值统计得来，统计方式与光谱直方图的处理方式相同，依然以稀疏矩阵的方式存储。步骤103，基于所述权重值与预先构造的动态阈值序列中不同动态阈值的关系来判断是否进行节点合并，若所述权重值的最大值大于动态阈值序列中的预设动态阈值，则进行节点合并，将合并的节点所对应的多边形矢量合并后与遥感底图叠加得到最终分割结果。本实施例中，步骤101主要用于进行初始图像分割。分水岭算法是一种常用的图像分割方法。分水岭的设计理念是依据地理上的海拔图，分割出一个一个积水区。现有技术一般采用分水岭算法基于灰度图进行初始图像分割，这种方法很难将边缘信息融入到分割过程中。本实施例摒弃了将灰度图输入分水岭算法的方案，先对遥感图像分波段提取边缘特征图，将边缘特征图叠加到一起看作高程模型。这种方法更加契合分水岭的设计理念，也更有利于获得更加清晰的图像边界。初始分割的结果得到标签图和多边形矢量。图像分割是将一张图分成一块一块的区域，每块区域将被赋予一个id，这个id即为标签。标签图是由每个像素对应的id标签组成的图，是分割结果的栅格格网表示。多边形矢量是分割结果的矢量表示。本实施例中，步骤102主要用于建立区域邻接图。首先根据初始分割结果中的标签图，识别出邻接的标签；然后生成图论中的网络即区域邻接图。区域邻接图的一个节点代表一个标签，节点属性存储标签的光谱直方图、纹理直方图和形状参数；连接节点的边表示两个节点的关系，边属性存储权重。所述权重表示边所连的两个节点之间的相似度，所述相似度由光谱直方图相似度、纹理直方图相似度和形状参数相似度加权求和得到。因此，本实施例综合利用了光谱、纹理和形状参数三种特征，相对现有技术只利用光谱信息一种特征，可获得更好的图像分割效果。本实施例中，步骤103主要用于对区域邻接图进行节点合并，从而实现邻接区域的合并。首先判断邻接的节点是否适合合并，如果适合进行合并。遍历所有节点，实现区域邻接图的节点合并；然后将合并后得到的多边形矢量与遥感底图叠加得到最终分割结果。现有技术是通过将两个节点的相似度与固定的阈值或绝对阈值进行比较，如果所述相似度大于所述阈值则认为适合合并。现有基于区域邻接图的合并采用绝对阈值进行判断，比如光谱距离或像素数。绝对阈值在调参时较生硬，且不适合地物复杂的情况。例如一个地区的建筑可大可小，使用绝对阈值可能造成小建筑被合并到其他对象内，或者大对象被过分割。本实施例采用基于尺度因子的动态阈值方案，根据对象的尺度自适应改变阈值，可避免上述情况的发生。作为一可选实施例，所述对待分割图像的获取步骤，包括：利用Farid边缘检测法对每一波段的图像进行处理，得到各波段对应的边缘特征图；利用Farid边缘检测法对所述待分割图像的每一波段的图像进行处理，得到各波段对应的边缘特征图；对各波段对应的边缘特征图进行求和，得到能够显示图像边缘特征强弱的灰度图；利用Canny边缘检测法对所述待分割图像的每一波段的图像进行处理，得到包括各波段对应的边缘线图像；获取所述边缘线图像中所有像素点到各个边缘线的距离，得到距离图；求解所述距离图中的峰值点，将所有峰值点作为种子点；利用分水岭算法对所述灰度图和种子点进行处理，得到所述待分割图像的初始分割结果。本实施例给出了进行初始图像分割的一种技术方案。本实施例仍然采用分水岭算法进行初始图像分割，先得到灰度图和种子点，然后将灰度图和种子点输入分水岭算法即可得到初始分割结果。本实施例的灰度图和种子点分别由Farid边缘检测法和Canny边缘检测法得到。获得灰度图的方法为：先利用Farid边缘检测法分别对各波段的图像进行处理，得到各波段对应的边缘特征图；然后对各波段对应的边缘特征图进行求和，获取一张求和后的灰度图。该灰度图可以显示图像边缘特征的强弱，同时，该灰度图可看成图像的数字高程模型。不同波段的遥感图像是由传感器获取的，常用的遥感图像波段分为红绿蓝加近红外波段。一个波段对应一个边缘线的集合，多个波段求出来的边缘线集合具有一定的重叠度。获得种子点的方法为：先将Canny边缘检测算子应用于各波段得到边缘线，对所得到的边缘线求并集，得到边缘线集合，即每一条边缘线均全部独立显示在图像中；然后计算图像所有像素点到各个边缘线的距离得到一张距离图；最后在距离图中，找到峰值点也就是局部离边缘最远的点，所有峰值点就组成了种子点，这些点往往处于地物的中心。作为一可选实施例，通过遍历所述标签图，建立区域邻接图的步骤，包括：遍历初始分割结果中的标签图，识别出邻接的标签并进行标记，生成邻接矩阵；将所述邻接矩阵转换为图论中的网络，网络中的节点存储标签的光谱直方图、纹理直方图和形状参数，网络中的边存储表示边所连的节点之间的相似度的权重值；所述纹理直方图由黑塞矩阵的特征值统计获得；所述纹理直方图和光谱直方图均存储为稀疏矩阵；所述形状参数采用形状指数s1和紧致度s2表示，计算公式如下：式中，B为分割对象边界像素的个数，A为分割对象的像素个数；边的权重等于对所述边连接的两个节点的纹理直方图相似度、光谱直方图相似度和形状参数相似度进行加权求和，两个节点直方图相似度的计算公式为：式中，q、p分别为两个节点的直方图，k为直方图的长度，为直方图q、p的相似度，n、m分别为所述两个节点的像素数，h为所述两个节点合并后的直方图；pi为其中一节点的直方图，qi为另一节点的直方图，hi为两节点合并后的直方图。形状参数相似度的计算公式为：式中，σ是调节系数，s1、s2分别为两个节点的形状参数即形状指数和紧致度，为形状参数相似度。本实施例给出了建立区域邻接图的一种技术方案。首先从初始分割结果的标签图中识别出邻接的标签并进行标记，生成邻接矩阵。邻接矩阵是图论里的概念，表示区域是否相邻关系；然后根据邻接矩阵生成由节点和边组成的区域邻接图结构；最后对节点属性和边属性进行信息存储。节点属性存储分割结果中各标签的光谱直方图、纹理直方图和形状参数，边属性存储边的权重。光谱直方图存储为稀疏矩阵，存储位数为波段数乘以32。例如，如果遥感图像是三个波段，则该光谱直方图的稀疏矩阵的维度为32*3=96。纹理直方图由黑塞矩阵的特征值统计获得。纹理直方图也存储为稀疏矩阵。所述形状参数采用形状指数和紧致度表示，计算公式如上。边的权重等于所述边连接的两个节点的相似度，本实施例通过计算两个节点的纹理直方图相似度、光谱直方图相似度和形状参数相似度进行加权求和得到边的权重。直方图相似度和形状参数相似度的计算公式如上。值得说明的是，本实施例对现有技术经常采用的直方图相似度计算公式进行了改进。下式是经常采用的一种直方图相似度计算公式：如果按该式计算两个直方图相似度，当其中一个节点的直方图值很小时，因分子中的一个因子很小使计算得到的相似度值也很小，有时甚至为0，从而使这两个节点因相似度值很小不能超过设定阈值而不可能被判定为适合合并。为此，本实施例在相似度计算公式中引入了两个节点合并后的直方图h，使最后得到相似度值相对提高，消除了上述现象。作为一可选实施例，所述进行节点合并的步骤包括：S1、根据尺度因子预先构造动态阈值，所述尺度因子可动态调整，每一尺度因子可计算得出相对应的动态阈值，动态阈值的集合序列可表示为，N为动态阈值个数；S2、用户选择任意尺度因子，确定与之相对应的动态阈值T1S3、根据动态阈值T1与节点M的关系对节点进行合并处理，具体包括：若与节点M相连的边的权重值的最大值大于阈值T1，则将节点M合并到所述最大值对应的边连接的另一节点；否则，对节点M不进行合并处理；遍历所有节点，进行与节点M相同的合并处理；S4、更新尺度因子的值，将阈值替换为下一个阈值，重复执行步骤S3；S5、重复执行步骤S4，直到执行完最后一个阈值对应的合并处理步骤。本实施例给出了进行节点合并的一种技术方案。首先构造动态阈值序列，所述动态阈值序列由N个不同的阈值组成，所述阈值的大小与对象尺度有关。在进行节点合并时，先采用第一个阈值T1判断节点是否需要合并，判断方法是：如果与该节点相连的边的权重的最大值大于阈值T1，则需要将所述节点合并到所述最大值对应的边连接的另一节点；否则该节点不需要合并处理。遍历所有节点，实现基于T1的节点合并。然后采用下一阈值对第一轮合并后的节点进行下一轮的合并处理。重复上述过程，直到处理完最后一个阈值。本实施例中，基于较大尺度因子的节点合并是在基于较小尺度因子的节点合并的基础上进行的，根据对象大小自适应地调整阈值大小，可以解决采用绝对阈值造成小建筑被合并到其他对象内或者大对象被过分割的问题。作为一可选实施例，预先构造基于不同动态阈值的动态阈值序列的方法包括：根据用户输入的尺度因子构造数列，时，；时，；，floor为向下取整运算；按下式计算动态阈值序列中的每个阈值：式中，min_T为能容忍的最小阈值，λ为像素数n小于尺度因子时阈值的衰减速率。本实施例给出了构造动态阈值序列的一种技术方案。本实施例是基于用户输入的一个尺度因子构造动态阈值序列。首先，根据构造一个数列，所述数列前N-1个元素构成一个公比为4的等比级数，第N个元素也就最后一个元素为。当然，如果正好是4的几次方的20倍，则整个数列的N个元素就是一个公比为4的等比级数。然后，将构造的数列的每个元素转换成阈值得到所求的阈值序列。由上面的转换公式可知，是一个小于1的正数，且越小越大。本实施例中，将节点M合并到所述最大值对应的边连接的另一节点的步骤，包括：删除节点M，将与节点M连接的其它节点连接到另一节点；更新另一节点的光谱直方图、纹理直方图和形状参数；更新与另一节点相连的所有边的权重；将节点M和另一节点对应的多边形矢量进行合并。作为一可选实施例，所述将节点M和另一节点对应的多边形矢量进行合并的步骤之后还包括，将节点M合并到另一节点后的直方图更新步骤和形状参数的更新步骤，其中，所述直方图的更新步骤包括：式中，n、m分别为节点M和另一节点的像素数，p、q分别为节点M和另一节点的直方图；所述形状参数的更新步骤包括：修改标签图，将节点M对应的标签的id值改为另一节点对应的标签的id值；通过形态学膨胀和腐蚀的差值图得到另一节点的新边界，基于新边界像素的数量和总像素数量计算更新后另一节点的形状参数。作为一可选实施例，将节点a合并到节点b的方法包括：删除节点a，将与节点a连接的其它节点连接到节点b；更新节点b的光谱直方图、纹理直方图和形状参数；更新与节点b相连的所有边的权重；将节点a和节点b对应的多边形矢量进行合并。本实施例给出了将节点a合并到节点b的方法。首先要修改图的结构，也就是删除节点a，将与节点a连接的其它节点连接到节点b；然后更新节点属性和边属性。具体地，先更新节点b的光谱直方图、纹理直方图和形状参数，然后更新与节点b相连的所有边的权重。最后将节点a和节点b对应的多边形矢量进行合并，完成节点a合并到节点b的操作。作为一可选实施例，将节点a合并到节点b后的直方图更新为：式中，n、m分别为节点a和节点b的像素数，p、q分别为节点a和节点b的直方图。本实施例给出了将节点a合并到节点b后直方图的更新方法。本实施例的直方图计算包括光谱直方图和纹理直方图。根据上面的公式，两个节点合并后的直方图等于两个节点的直方图加权求和，加权系数与节点的像素数成正比，分别为n/、m/，且两个加权系数的和为1，即n/+m/=1。因此，上式实际上是计算两个节点的直方图的加权均值。作为一可选实施例，将节点a合并到节点b后形状参数的更新方法包括：修改标签图，将节点a对应的标签的id值改为节点b对应的标签的id值；通过形态学膨胀和腐蚀的差值图得到节点b的新边界，基于新边界像素的数量和总像素数量计算更新后节点b的形状参数。本实施例给出了合并后节点b的形状参数的更新方法。新的形状参数计算首先需要修改标签图，将a标签的id值改为b标签的id值完成合并；其次通过形态学膨胀和腐蚀的差值图得到节点b的新边界，统计边界像素的数量和总像素数量，再代入前面给出的形状参数计算公式即可得到新的形状参数。为了验证本申请技术方案的有效性，图3给出了采用本申请所述方法与现有技术的分割结果对比示意图。由图3可以看出，本申请由于充分利用了边缘信息，分割结果更符合人的视觉，边界更简明。图4为本申请实施例一种面向对象的遥感图像分割装置的组成示意图，该装置可以安装于电子设备中，根据实现的功能，所述装置包括：初始分割模块11，用于基于分波段的边缘特征提取算法对待分割图像进行初始图像分割，得到标签图和多边形矢量；邻接图构建模块12，用于通过遍历所述标签图，建立区域邻接图，所述区域邻接图包括表示标签区域的节点和表示节点关系的边，所述节点存储标签的光谱直方图、纹理直方图和形状参数，所述边存储表示边所连的节点之间的相似度的权重值；节点合并模块13，用于基于所述权重值与预先构造的动态阈值序列中不同动态阈值的关系来判断是否进行节点合并；若所述权重值的最大值大于所述动态阈值序列中的预设动态阈值，则进行节点合并，并将合并的节点所对应的多边形矢量合并后与遥感底图叠加得到最终分割结果。详细地，本发明实施例中所述面向对象的遥感图像分割装置的所述各模块在使用时采用与上述的图1至图2中所述的面向对象的遥感图像分割方法一样的技术手段，并能够产生相同的技术效果，这里不再赘述。如图5所示，是本发明实现面向对象的遥感图像分割方法的电子设备的结构示意图。所述电子设备可以包括处理器50、存储器51、通信总线52以及通信接口53，还可以包括存储在所述存储器51中并可在所述处理器50上运行的计算机程序，如图像分割程序。其中，所述处理器50在一些实施例中可以由集成电路组成，例如可以由单个封装的集成电路所组成，也可以是由多个相同功能或不同功能封装的集成电路所组成，包括一个或者多个中央处理器、微处理器、数字处理芯片、图形处理器及各种控制芯片的组合等。所述处理器50是所述电子设备的控制核心，利用各种接口和线路连接整个电子设备的各个部件，通过运行或执行存储在所述存储器51内的程序或者模块，以及调用存储在所述存储器51内的数据，以执行电子设备的各种功能和处理数据。所述存储器51至少包括一种类型的可读存储介质，所述可读存储介质包括闪存、移动硬盘、多媒体卡、卡型存储器、磁性存储器、磁盘、光盘等。所述存储器51在一些实施例中可以是电子设备的内部存储单元，例如该电子设备的移动硬盘。所述存储器51在另一些实施例中也可以是电子设备的外部存储设备，例如电子设备上配备的插接式移动硬盘、智能存储卡、安全数字卡、闪存卡等。进一步地，所述存储器51还可以既包括电子设备的内部存储单元也包括外部存储设备。所述存储器51不仅可以用于存储安装于电子设备的应用软件及各类数据，例如基于面向对象的遥感图像分割程序的代码等，还可以用于暂时地存储已经输出或者将要输出的数据。所述通信总线52可以是外设部件互连标准总线或扩展工业标准结构总线等。该总线可以分为地址总线、数据总线、控制总线等。所述总线被设置为实现所述存储器51以及至少一个处理器50等之间的连接通信。所述通信接口53用于上述电子设备与其他设备之间的通信，包括网络接口和用户接口。可选地，所述网络接口可以包括有线接口和/或无线接口，通常用于在该电子设备与其他电子设备之间建立通信连接。所述用户接口可以是显示器、输入单元），可选地，所述用户接口还可以是标准的有线接口、无线接口。可选地，在一些实施例中，显示器可以是LED显示器、液晶显示器、触控式液晶显示器以及OLED触摸器等。其中，显示器也可以适当的称为显示屏或显示单元，用于显示在电子设备中处理的信息以及用于显示可视化的用户界面。图5仅示出了具有部件的电子设备，本领域技术人员可以理解的是，图5示出的结构并不构成对所述电子设备的限定，可以包括比图示更少或者更多的部件，或者组合某些部件，或者不同的部件布置。例如，尽管未示出，所述电子设备还可以包括给各个部件供电的电源，优选地，电源可以通过电源管理装置与所述至少一个处理器50逻辑相连，从而通过电源管理装置实现充电管理、放电管理、以及功耗管理等功能。电源还可以包括一个或一个以上的直流或交流电源、再充电装置、电源故障检测电路、电源转换器或者逆变器、电源状态指示器等任意组件。所述电子设备还可以包括多种传感器、蓝牙模块、Wi-Fi模块等，在此不再赘述。应该了解，所述实施例仅为说明之用，在专利发明范围上并不受此结构的限制。所述电子设备中的所述存储器51存储的基于面向对象的遥感图像分割程序是多个计算机程序的组合，在所述处理器50中运行时，可以实现：基于分波段的边缘特征提取算法对待分割图像进行初始图像分割，得到标签图和多边形矢量；通过遍历所述标签图，建立区域邻接图，所述区域邻接图包括表示标签区域的节点和表示节点关系的边，所述节点存储标签的光谱直方图、纹理直方图和形状参数，所述边存储表示边所连的节点之间的相似度的权重值；基于所述权重值与预先构造的动态阈值序列中不同动态阈值的关系来判断是否进行节点合并；若所述权重值的最大值大于所述动态阈值序列中的预设动态阈值，则进行节点合并，并将合并的节点所对应的多边形矢量合并后与遥感底图叠加得到最终分割结果。具体地，所述处理器50对上述计算机程序的具体实现方法可参考图1对应实施例中相关步骤的描述，在此不赘述。进一步地，所述电子设备集成的模块/单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个非易失性计算机可读取存储介质中。所述计算机可读存储介质可以是易失性的，也可以是非易失性的。例如，所述计算机可读介质可以包括：能够携带所述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器。本发明还提供一种计算机可读存储介质，所述可读存储介质存储有计算机程序，所述计算机程序在被电子设备的处理器所执行时，可以实现：基于分波段的边缘特征提取算法对待分割图像进行初始图像分割，得到标签图和多边形矢量；通过遍历所述标签图，建立区域邻接图，所述区域邻接图包括表示标签区域的节点和表示节点关系的边，所述节点存储标签的光谱直方图、纹理直方图和形状参数，所述边存储表示边所连的节点之间的相似度的权重值；基于所述权重值与预先构造的动态阈值序列中不同动态阈值的关系来判断是否进行节点合并；若所述权重值的最大值大于所述动态阈值序列中的预设动态阈值，则进行节点合并，并将合并的节点所对应的多边形矢量合并后与遥感底图叠加得到最终分割结果。在本发明所提供的几个实施例中，应该理解到，所揭露的设备，装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述模块的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式。所述作为分离部件说明的模块可以是或者也可以不是物理上分开的，作为模块显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。另外，在本发明各个实施例中的各功能模块可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用硬件加软件功能模块的形式实现。对于本领域技术人员而言，显然本发明不限于上述示范性实施例的细节，而且在不背离本发明的精神或基本特征的情况下，能够以其他的具体形式实现本发明。因此，无论从哪一点来看，均应将实施例看作是示范性的，而且是非限制性的，本发明的范围由所附权利要求而不是上述说明限定，因此旨在将落在权利要求的等同要件的含义和范围内的所有变化涵括在本发明内。不应将权利要求中的任何附关联图标记视为限制所涉及的权利要求。需要说明的是，在本文中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。以上所述，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到的变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以权利要求的保护范围为准。
