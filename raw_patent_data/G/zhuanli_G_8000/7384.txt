标题title
一种数据保护的时间点恢复方法与系统
摘要abst
本发明涉及数据保护技术领域，尤其涉及一种数据保护的时间点恢复方法与系统，方法包括：步骤S1，当事故发生时，中控模块发出恢复指令并使用关键词查找备份文件和备份日志并将其进行提取，所述中控模块根据实际待恢复时间点的备份数据与预设数据的对比结果对数据是否吻合进行判定，步骤S2，当所述中控模块完成吻合程度判定时，中控模块对数据一致评价参数进行初步判定并根据预设运行参数差值对其进行进一步判定；步骤S3,当所述中控模块完成准确度调节时，中控模块根据预设时间点偏移量对恢复准确度进行判定，系统包括:数据恢复模块、存储模块，修正模块以及中控模块。本发明实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。
权利要求书clms
1.一种数据保护的时间点恢复方法，其特征在于，包括：步骤S1，当事故发生时，中控模块发出恢复指令并使用关键词查找文件目录和日志目录里的备份文件和备份日志并将备份里的文件和日志以及时间点的数据进行提取并将提取后的内容传输至恢复器，当中控模块完成对于待恢复时间点的提取时，中控模块根据实际待恢复时间点的备份数据与预设数据的对比结果对数据是否吻合进行判定；步骤S2，当所述中控模块完成对于提取的备份内容的吻合程度判定时，中控模块根据所述备份文件中待恢复时间点的数据文件和日志所对应的运行参数对数据一致评价参数进行初步判定，当中控模块完成对于评价参数的初步判定时，中控模块根据所述待恢复时间点对应的运行参数与预设参数的差值与预设运行参数差值的对比结果对数据是否一致进行进一步判定并将所述数据恢复文件进行延后或提前操作以保证恢复文件的准确度；步骤S3,当所述中控模块完成对于待恢复文件的准确度调解时，中控模块根据实际时间点偏移量与预设时间点偏移量的对比结果对待恢复时间点的准确度进行判定；当所述中控模块完成对于待恢复时间点的准确度判定时，中控模块根据不同事故类型恢复的精确度对是否需要对恢复的方法进行修正进行判定。2.根据权利要求1所述的一种数据保护的时间点恢复方法，其特征在于，当事故发生时，中控模块根据服务器发出的恢复请求指令将备份里的文件和日志以及文件所对应的数据进行提取，中控模块根据预设备份数据与实际备份数据对待恢复时间点的待恢复备份文件的数据吻合程度进行初步判定，中控模块设有预设备份数据Q0,若Q≤Q0,所述中控模块判定待恢复备份文件的吻合程度初步判定符合要求；若Q＞Q0,所述中控模块判定待恢复备份文件的吻合程度初步判定不符合要求并计算实际备份数据与预设备份数据的差值△Q并根据△Q与预设备份数据差值的对比结果对数据吻合程度进行进一步判定并将日志目录以及文件目录中的对应时间点的待恢复文件的提取宽度调节至对应值，设定△Q＝Q-Q0。3.根据权利要求2所述的一种数据保护的时间点恢复方法，其特征在于，当所述中控模块完成对于所述待恢复时间点的待恢复备份文件的数据吻合程度的初步判定时，中控模块根据实际备份数据与预设备份数据的差值△Q并根据△Q与预设备份数据差值的对比结果对待恢复时间点的待恢复备份文件的数据吻合程度进行进一步判定并将日志目录以及文件目录中的对应时间点的待恢复备份文件提取宽度调节至对应值，中控模块设有预设待恢复备份文件提取宽度W0、预设第一备份数据差值△Q1、预设第二备份数据差值△Q2、预设第一待恢复备份文件调节系数α1以及预设第二待恢复备份文件调节系数α2，其中，△Q1＜△Q2，0＜α1＜α2＜1，若△Q≤△Q1，所述中控模块判定实际备份文件吻合程度符合要求并不对待恢复备份文件数据进行调节；若△Q1＜△Q≤△Q2，所述中控模块判定实际备份文件的数据吻合程度不符合要求并使用α2对待恢复备份文件提取宽度进行调节，调节后的待恢复备份文件提取宽度记为W,设定W＝W0×α2；若△Q＞△Q2，所述中控模块判定实际备份文件的数据吻合程度不符合要求并使用α1对待恢复备份文件提取宽度进行调节，调节后的待恢复备份文件提取宽度记为W,设定W1＝W0×α1。4.根据权利要求3所述的一种数据保护的时间点恢复方法，其特征在于，当所述中控模块完成对于待恢复备份文件的提取宽度的调节时，中控模块根据预设数据一致评价参数与实际检测到的文件和日志所对应的运行参数计算得到的数据一致评价参数的对比结果对实际数据一致评价参数进行初步判定，中控模块设有预设第一运行参数A0、预设第二运行参数B0、预设第三运行参数C0以及预设数据一致评价参数K0，设定K0＝s1×A0+s2×B0+s3×C0，若A≠A0、B≠B0或C≠C0，所述中控模块判定实际数据一致评价参数不符合要求并计算实际一致评价参数与预设评价参数的差值△K并根据△K与预设评价参数差值的对比结果对评价参数是否符合要求进行进一步判定并将存储模块中存储的运行参数调节至对应值；若A＝A0、B＝B0且C＝C0，所述中控模块判定实际数据一致评价参数符合预设要求并不计算实际一致评价参数与预设评价参数的差值。5.根据权利要求4所述的一种数据保护的时间点恢复方法，其特征在于，当所述中控模块完成对于待恢复数据块的初步判定时，中控模块根据预设实际一致评价参数与预设评价参数的差值△K与预设评价参数差值的对比结果对评价参数是否符合要求进行进一步判定并将所述存储模块中存储的运行参数调节至对应值，中控模块设有预设第一评价参数差值△K1、预设第二评价参数差值△K2、预设第一运行参数调节系数g1以及预设第二运行参数调节系数g2，其中，△K1＜△K2，0＜g1＜g2＜1，若△K≤△K1，所述中控模块判定实际评价参数符合预设差值要求并不对所述存储模块中存储的运行参数进行调节；若△K1＜△K≤△K2，所述中控模块判定实际评价参数不符合预设差值要求并使用g1对所述存储模块中的运行参数进行调节，调节后的运行参数记为A1＝A0×g1，B1＝B0×g1，C1＝C0×g1；若△K＞△K2，所述中控模块判定实际评价参数不符合预设差值要求并使用g2对所述存储模块中的运行参数进行调节，调节后的运行参数记为A2＝A0×g1，B2＝B0×g1，C2＝C0×g1。6.根据权利要求5所述的一种数据保护的时间点恢复方法，其特征在于，当所述中控模块完成对于待恢复时间点的运行参数的校正时，中控模块根据实际时间点偏移量与预设时间点偏移量的对比结果对待恢复时间点的准确度进行判定；当所述中控模块完成对于待恢复时间点的准确度判定时，中控模块根据不同事故类型恢复的精确度对是否需要对恢复的方法进行修正进行判定，中控模块设有预设第一偏移量D1、预设第二偏移量D2,其中D1＜D2,若D≤D1，所述中控模块判定实际偏移量符合预设要求并不对实际偏移量与预设偏移量进行差值计算；若D1＜D≤D2，所述中控模块判定实际偏移量不符合预设要求并计算实际偏移量与预设偏移量的差值△D并根据△D与预设偏移量差值的对比结果将文件定位速度调节至对应值；若D＞D2，所述中控模块判定实际偏移量不符合预设要求并根据差值对比结果将所述运行参数调节至对应值。7.根据权利要求6所述的一种数据保护的时间点恢复方法，其特征在于，当所述中控模块完成对于准确度的初步判定时且D1＜D≤D2时，中控模块根据计算实际偏移量与预设偏移量的差值△D并根据△D与预设偏移量差值的对比结果将文件定位速度调节至对应值，中控模块设有预设第一偏移量差值△D1、预设第二偏移量差值△D2、预设文件定位速度V0、预设第一定位速度调节系数β1以及预设第二定位速度调节系数β2，其中，△D1＜△D2，0＜β1＜β2＜1，若△D≤△D1，所述中控模块判定实际偏移量差值符合预设标准并不对定位速度进行调节；若△D1＜△D≤△D2，所述中控模块判定实际偏移量差值不符合预设标准并使用β2对所述定位速度进行调节，调节后的定位速度记为V1，设定V1＝V0×β2；若△D＞△D2，所述中控模块判定实际偏移量差值不符合预设标准并使用β1对所述定位速度进行调节，调节后的定位速度记为V2，设定V2＝V0×β1。8.根据权利要求7所述的一种数据保护的时间点恢复方法，其特征在于，当所述中控模块完成对于准确度的初步判定时且D＞D2时，中控模块根据△D与预设偏移量差值的对比结果将所述运行参数进行二次调节，中控模块设有预设第三偏移量差值△D3、预设第四偏移量差值△D4、预设运行参数G0、预设第一运行参数调节系数γ1以及预设第二运行参数调节系数γ2，其中，△D3＜△D4，1＜γ1＜γ2，若△D≤△D3，所述中控模块判定实际偏移量差值符合预设标准并不对运行参数进行调节；若△D3＜△D≤△D4，所述中控模块判定实际偏移量差值不符合预设标准并使用γ1对所述运行参数进行调节，调节后的运行参数记为G1，设定G1＝G0×γ1；若△D＞△D4，所述中控模块判定实际偏移量差值不符合预设标准并使用γ2对所述运行参数进行调节，调节后的运行参数记为G2，设定G2＝G0×γ2。9.根据权利要求8所述的一种数据保护的时间点恢复方法，其特征在于，当所述中控模块完成对于所述运行参数和定位速度的调节时，中控模块根据实际偏移差值与预设最大偏移差值的对比结果对是否出现存储器故障进行判定，中控模块设有预设最大偏移量差值△Dmax,若△D≤△Dmax，所述中控模块判定实际偏移量差值符合预设标准并不发出故障警报；若△D＞△Dmax，所述中控模块判定实际偏移量差值不符合预设标准并发出存储器故障警报。10.一种数据保护的时间点恢复系统，其特征在于，包括:数据恢复模块，用于对待恢复时间点的数据进行恢复操作；存储模块，其与所述数据恢复模块相连，用于对系统正常运行时的数据存储以及发生故障时的对含有待恢复数据关键词的数据块进行调取操作；修正模块，其与所述存储模块相连，用于对存储模块的运行参数进行评价和调节；中控模块，其分别与所述各模块相连，用于向存储模块发送数据恢复指令以及对各模块输送来的信息进行分析计算并根据计算结果对各所述模块中的控制参数进行调节。
说明书desc
技术领域本发明涉及数据保护技术领域，尤其涉及一种数据保护的时间点恢复方法与系统。背景技术在计算机领域，为了保护重要的数据信息，通常采用数据备份技术，在数据不可用时能从备份介质中恢复数据。但是在恢复数据时，两次备份之间的数据可能会丢失。对于一些关键的信息系统，所能容忍的数据丢失量，即恢复点目标要尽可能地低，这就需要应用连续数据保护技术。CDP技术的原理是将更改过的所有数据按时间顺序保存下来，每次写操作都会生成带有时间戳的数据块版本，在恢复数据时能够获取任意一个时间点的数据状态。其中，块级CDP是将一个磁盘，即逻辑单元划分为固定大小的数据块，以数据块为单位来记录数据变化，特点是与应用的耦合比较低，性能和效率优于文件级CDP。当需要恢复数据到某个指定的时间点时，CDP系统可以从开始时间点一直到指定的时间点遍历所有已经记录的修改过的数据块，以恢复该时间点的数据状态，即获得该时间点的磁盘的每一个逻辑块地址与CDP所记录的数据块之间的映射关系。中国专利公开号：CN103065096A。公开了一种数据保护方法、装置及系统，涉及数据保护领域，能够提高数据恢复的效率，缩短数据恢复的时间。该方法包括：存储设备接收服务器发送的至少一个数据块、标识对应关系及服务器根据映射策略为各个数据块配置的数据块标识，其中，至少一个数据块是由数据拆分而成，该数据对应数据标识，映射策略为各个数据块与数据块标识之间的映射关系，标识对应关系为数据标识与数据块标识之间的对应关系；存储设备存储标识对应关系，并将数据块存储至存储设备的生产卷，将数据块及对应的数据块标识存储至存储设备的日志卷。由此可见所述数据保护方法、装置及系统存在以下问题：数据保护的时间点恢复的误差率没有实现降低和工作效率偏低。发明内容为此，本发明提供一种数据保护的时间点恢复方法与系统，用以克服现有技术中的数据保护的时间点恢复存在的误差率和工作效率偏低问题。为实现上述目的，本发明提供一种数据保护的时间点恢复方法，包括：步骤S1，当事故发生时，中控模块发出恢复指令并使用关键词查找文件目录和日志目录里的备份文件和备份日志并将备份里的文件和日志以及时间点的数据进行提取并将提取后的内容传输至恢复器，当中控模块完成对于待恢复时间点的提取时，中控模块根据实际待恢复时间点的备份数据与预设数据的对比结果对数据是否吻合进行判定；步骤S2，当所述中控模块完成对于提取的备份内容的吻合程度判定时，中控模块根据所述备份文件中待恢复时间点的数据文件和日志所对应的运行参数对数据一致评价参数进行初步判定，当中控模块完成对于评价参数的初步判定时，中控模块根据所述待恢复时间点对应的运行参数与预设参数的差值与预设运行参数差值的对比结果对数据是否一致进行进一步判定并将所述数据恢复文件进行延后或提前操作以保证恢复文件的准确度；步骤S3,当所述中控模块完成对于待恢复文件的准确度调解时，中控模块根据实际时间点偏移量与预设时间点偏移量的对比结果对待恢复时间点的准确度进行判定；当所述中控模块完成对于待恢复时间点的准确度判定时，中控模块根据不同事故类型恢复的精确度对是否需要对恢复的方法进行修正进行判定。进一步地，当事故发生时，中控模块根据服务器发出的恢复请求指令将备份里的文件和日志以及文件所对应的数据进行提取，中控模块根据预设备份数据与实际备份数据对待恢复时间点的待恢复备份文件的数据吻合程度进行初步判定，中控模块设有预设备份数据Q0,若Q≤Q0,所述中控模块判定待恢复备份文件的吻合程度初步判定符合要求；若Q＞Q0,所述中控模块判定待恢复备份文件的吻合程度初步判定不符合要求并计算实际备份数据与预设备份数据的差值△Q并根据△Q与预设备份数据差值的对比结果对数据吻合程度进行进一步判定并将日志目录以及文件目录中的对应时间点的待恢复文件的提取宽度调节至对应值，设定△Q＝Q-Q0。进一步地，当所述中控模块完成对于所述待恢复时间点的待恢复备份文件的数据吻合程度的初步判定时，中控模块根据实际备份数据与预设备份数据的差值△Q并根据△Q与预设备份数据差值的对比结果对待恢复时间点的待恢复备份文件的数据吻合程度进行进一步判定并将日志目录以及文件目录中的对应时间点的待恢复备份文件提取宽度调节至对应值，中控模块设有预设待恢复备份文件提取宽度W0、预设第一备份数据差值△Q1、预设第二备份数据差值△Q2、预设第一待恢复备份文件调节系数α1以及预设第二待恢复备份文件调节系数α2，其中，△Q1＜△Q2，0＜α1＜α2＜1，若△Q≤△Q1，所述中控模块判定实际备份文件吻合程度符合要求并不对待恢复备份文件数据进行调节；若△Q1＜△Q≤△Q2，所述中控模块判定实际备份文件的数据吻合程度不符合要求并使用α2对待恢复备份文件提取宽度进行调节，调节后的待恢复备份文件提取宽度记为W,设定W＝W0×α2；若△Q＞△Q2，所述中控模块判定实际备份文件的数据吻合程度不符合要求并使用α1对待恢复备份文件提取宽度进行调节，调节后的待恢复备份文件提取宽度记为W,设定W1＝W0×α1。进一步地，当所述中控模块完成对于待恢复备份文件的提取宽度的调节时，中控模块根据预设数据一致评价参数与实际检测到的文件和日志所对应的运行参数计算得到的数据一致评价参数的对比结果对实际数据一致评价参数进行初步判定，中控模块设有预设第一运行参数A0、预设第二运行参数B0、预设第三运行参数C0以及预设数据一致评价参数K0，设定K0＝s1×A0+s2×B0+s3×C0，若A≠A0、B≠B0或C≠C0，所述中控模块判定实际数据一致评价参数不符合要求并计算实际一致评价参数与预设评价参数的差值△K并根据△K与预设评价参数差值的对比结果对评价参数是否符合要求进行进一步判定并将存储模块中存储的运行参数调节至对应值；若A＝A0、B＝B0且C＝C0，所述中控模块判定实际数据一致评价参数符合预设要求并不计算实际一致评价参数与预设评价参数的差值。进一步地，当所述中控模块完成对于待恢复数据块的初步判定时，中控模块根据预设实际一致评价参数与预设评价参数的差值△K与预设评价参数差值的对比结果对评价参数是否符合要求进行进一步判定并将所述存储模块中存储的运行参数调节至对应值，中控模块设有预设第一评价参数差值△K1、预设第二评价参数差值△K2、预设第一运行参数调节系数g1以及预设第二运行参数调节系数g2，其中，△K1＜△K2，0＜g1＜g2＜1，若△K≤△K1，所述中控模块判定实际评价参数符合预设差值要求并不对所述存储模块中存储的运行参数进行调节；若△K1＜△K≤△K2，所述中控模块判定实际评价参数不符合预设差值要求并使用g1对所述存储模块中的运行参数进行调节，调节后的运行参数记为A1＝A0×g1，B1＝B0×g1，C1＝C0×g1；若△K＞△K2，所述中控模块判定实际评价参数不符合预设差值要求并使用g2对所述存储模块中的运行参数进行调节，调节后的运行参数记为A2＝A0×g1，B2＝B0×g1，C2＝C0×g1。进一步地，当所述中控模块完成对于待恢复时间点的运行参数的校正时，中控模块根据实际时间点偏移量与预设时间点偏移量的对比结果对待恢复时间点的准确度进行判定；当所述中控模块完成对于待恢复时间点的准确度判定时，中控模块根据不同事故类型恢复的精确度对是否需要对恢复的方法进行修正进行判定，中控模块设有预设第一偏移量D1、预设第二偏移量D2,其中D1＜D2,若D≤D1，所述中控模块判定实际偏移量符合预设要求并不对实际偏移量与预设偏移量进行差值计算；若D1＜D≤D2，所述中控模块判定实际偏移量不符合预设要求并计算实际偏移量与预设偏移量的差值△D并根据△D与预设偏移量差值的对比结果将文件定位速度调节至对应值；若D＞D2，所述中控模块判定实际偏移量不符合预设要求并根据差值对比结果将所述运行参数调节至对应值。进一步地，当所述中控模块完成对于准确度的初步判定时且D1＜D≤D2时，中控模块根据计算实际偏移量与预设偏移量的差值△D并根据△D与预设偏移量差值的对比结果将文件定位速度调节至对应值，中控模块设有预设第一偏移量差值△D1、预设第二偏移量差值△D2、预设文件定位速度V0、预设第一定位速度调节系数β1以及预设第二定位速度调节系数β2，其中，△D1＜△D2，0＜β1＜β2＜1，若△D≤△D1，所述中控模块判定实际偏移量差值符合预设标准并不对定位速度进行调节；若△D1＜△D≤△D2，所述中控模块判定实际偏移量差值不符合预设标准并使用β2对所述定位速度进行调节，调节后的定位速度记为V1，设定V1＝V0×β2；若△D＞△D2，所述中控模块判定实际偏移量差值不符合预设标准并使用β1对所述定位速度进行调节，调节后的定位速度记为V2，设定V2＝V0×β1。进一步地，当所述中控模块完成对于准确度的初步判定时且D＞D2时，中控模块根据△D与预设偏移量差值的对比结果将所述运行参数进行二次调节，中控模块设有预设第三偏移量差值△D3、预设第四偏移量差值△D4、预设运行参数G0、预设第一运行参数调节系数γ1以及预设第二运行参数调节系数γ2，其中，△D3＜△D4，1＜γ1＜γ2，若△D≤△D3，所述中控模块判定实际偏移量差值符合预设标准并不对运行参数进行调节；若△D3＜△D≤△D4，所述中控模块判定实际偏移量差值不符合预设标准并使用γ1对所述运行参数进行调节，调节后的运行参数记为G1，设定G1＝G0×γ1；若△D＞△D4，所述中控模块判定实际偏移量差值不符合预设标准并使用γ2对所述运行参数进行调节，调节后的运行参数记为G2，设定G2＝G0×γ2。进一步地，当所述中控模块完成对于所述运行参数和定位速度的调节时，中控模块根据实际偏移差值与预设最大偏移差值的对比结果对是否出现存储器故障进行判定，中控模块设有预设最大偏移量差值△Dmax,若△D≤△Dmax，所述中控模块判定实际偏移量差值符合预设标准并不发出故障警报；若△D＞△Dmax，所述中控模块判定实际偏移量差值不符合预设标准并发出存储器故障警报。一种数据保护的时间点恢复系统，包括:数据恢复模块，用于对待恢复时间点的数据进行恢复操作；存储模块，其与所述数据恢复模块相连，用于对系统正常运行时的数据存储以及发生故障时的对含有待恢复数据关键词的数据块进行调取操作；修正模块，其与所述存储模块相连，用于对存储模块的运行参数进行评价和调节；中控模块，其分别与所述各模块相连，用于向存储模块发送数据恢复指令以及对各模块输送来的信息进行分析计算并根据计算结果对各所述模块中的控制参数进行调节。与现有技术相比，本发明的有益效果在于，本发明通过设置预设备份数据、预设运行参数差值、预设时间点偏移量，可以根据实际待恢复时间点的备份数据与预设备份数据的对比结果对数据是否吻合进行判定，可以所述备份文件中待恢复时间点的数据文件和日志所对应的运行参数对数据一致评价参数进行初步判定，可以根据所述待恢复时间点对应的运行参数与预设参数的差值与预设运行参数差值的对比结果对数据是否一致进行进一步判定并将所述数据恢复文件进行延后或提前操作以保证恢复文件的准确度，可以根据实际时间点偏移量与预设时间点偏移量的对比结果对待恢复时间点的准确度进行判定，提高了数据保护的时间点恢复准确度以及提高了恢复的效率，实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。进一步地，本发明所述方法通过设置设有预设备份数据，可以根据预设备份数据与实际备份数据对待恢复时间点的待恢复备份文件的数据吻合程度进行初步判定，提高了数据吻合程度的判定精确度，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。进一步地，本发明所述方法通过设置预设待恢复文件提取宽度、预设第一备份数据差值、预设第二备份数据差值、预设第一待恢复文件调节系数以及预设第二待恢复文件调节系数，可以根据实际备份数据与预设备份数据的差值△Q并根据△Q与预设备份数据差值的对比结果对数据吻合程度进行进一步判定并将日志目录以及文件目录中的对应时间点的待恢复文件提取宽度调节至对应值，进一步提高了数据的提取的准确度，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。进一步地，本发明所述方法通过设置预设第一运行参数、预设第二运行参数、预设第三运行参数以及预设数据一致评价参数，可以根据预设数据一致评价参数与实际检测到的文件和日志所对应的运行参数计算得到的数据一致评价参数的对比结果对实际数据一致评价参数进行初步判定，提高了评价参数的精准确定，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。进一步地，本发明所述方法通过设置预设第一评价参数差值、预设第二评价参数差值、预设第一运行参数调节系数以及预设第二运行参数调节系数，可以根据预设实际一致评价参数与预设评价参数的差值△K与预设评价参数差值的对比结果对评价参数是否符合要求进行进一步判定并将所述存储模块中存储的运行参数调节至对应值，实现了对于涉及存储模块的运行参数的精准选择和调节，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。进一步地，本发明所述方法通过设置预设第一偏移量和预设第二偏移量,可以根据实际时间点偏移量与预设时间点偏移量的对比结果对待恢复时间点的准确度进行判定，提高了对恢复时间点的精准把控，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。进一步地，本发明所述方法通过设置预设第一偏移量差值、预设第二偏移量差值、预设文件定位速度、预设第一定位速度调节系数以及预设第二定位速度调节系数，可以根据△D与预设偏移量差值的对比结果将文件定位速度调节至对应值，实现了文件定位的速度的精准调节，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。进一步地，本发明所述方法通过设置预设第三偏移量差值、预设第四偏移量差值、预设运行参数、预设第一运行参数调节系数以及预设第二运行参数调节系数，可以根据△D与预设偏移量差值的对比结果将所述运行参数进行二次调节，提高了运行参数的精准提取，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。进一步地，本发明所述方法通过设置预设最大偏移量差值，可以根据实际偏移差值与预设最大偏移差值的对比结果对是否出现存储器故障进行判定，进一步提高了数据恢复的精准性和实现了对存储器的故障监管，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。进一步地，本发明所述系统通过设置数据恢复模块、存储模块、修正模块以及中控模块，可以对数据保护的基于时间点的恢复方法提供可靠的系统支持，从系统方面提高了数据时间点恢复的效率和准确度，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。附图说明图1为本发明所述一种数据保护的时间点恢复方法的流程图；图2为本发明所述一种数据保护的时间点恢复系统的结构框图。具体实施方式为了使本发明的目的和优点更加清楚明白，下面结合实施例对本发明作进一步描述；应当理解，此处所描述的具体实施例仅仅用于解释本发明，并不用于限定本发明。下面参照附图来描述本发明的优选实施方式。本领域技术人员应当理解的是，这些实施方式仅仅用于解释本发明的技术原理，并非在限制本发明的保护范围。需要说明的是，在本发明的描述中，术语“上”、“下”、“左”、“右”、“内”、“外”等指示的方向或位置关系的术语是基于附图所示的方向或位置关系，这仅仅是为了便于描述，而不是指示或暗示所述装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。此外，还需要说明的是，在本发明的描述中，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通。对于本领域技术人员而言，可根据具体情况理解上述术语在本发明中的具体含义。请参阅图1所示，一种数据保护的时间点恢复方法，包括：步骤S1，当事故发生时，服务器发出恢复指令并使用关键词查找文件目录和日志目录里的备份文件和备份日志并将备份里的文件和日志以及时间点的数据进行提取并将提取后的内容传输至恢复器，当中控模块完成对于待恢复时间点的提取时，中控模块根据实际待恢复时间点的备份数据与预设数据的对比结果对数据是否吻合进行判定，步骤S2，当所述中控模块完成对于提取的备份内容的吻合程度判定时，中控模块根据所述备份文件中待恢复时间点的数据文件和日志所对应的运行参数对数据一致评价参数进行初步判定，当中控模块完成对于评价参数的初步判定时，中控模块根据所述待恢复时间点对应的运行参数与预设参数的差值与预设运行参数差值的对比结果对数据是否一致进行进一步判定并将所述数据恢复文件进行延后或提前操作以保证恢复文件的准确度；步骤S3,当所述中控模块完成对于待恢复文件的准确度调解时，中控模块根据实际时间点偏移量与预设时间点偏移量的对比结果对待恢复时间点的准确度进行判定；当所述中控模块完成对于待恢复时间点的准确度判定时，中控模块根据不同事故类型恢复的精确度对是否需要对恢复的方法进行修正进行判定。本发明通过设置预设备份数据、预设运行参数差值、预设时间点偏移量，可以根据实际待恢复时间点的备份数据与预设备份数据的对比结果对数据是否吻合进行判定，可以所述备份文件中待恢复时间点的数据文件和日志所对应的运行参数对数据一致评价参数进行初步判定，可以根据所述待恢复时间点对应的运行参数与预设参数的差值与预设运行参数差值的对比结果对数据是否一致进行进一步判定并将所述数据恢复文件进行延后或提前操作以保证恢复文件的准确度，可以根据实际时间点偏移量与预设时间点偏移量的对比结果对待恢复时间点的准确度进行判定，提高了数据保护的时间点恢复准确度以及提高了恢复的效率，实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。具体而言，当事故发生时，中控模块根据服务器发出的恢复请求指令将备份里的文件和日志以及文件所对应的数据进行提取，中控模块根据预设备份数据与实际备份数据对待恢复时间点的待恢复备份文件的数据吻合程度进行初步判定，中控模块设有预设备份数据Q0,若Q≤Q0,所述中控模块判定待恢复备份文件的吻合程度初步判定符合要求；若Q＞Q0,所述中控模块判定待恢复备份文件的吻合程度初步判定不符合要求并计算实际备份数据与预设备份数据的差值△Q并根据△Q与预设备份数据差值的对比结果对数据吻合程度进行进一步判定并将日志目录以及文件目录中的对应时间点的待恢复文件的提取宽度调节至对应值，设定△Q＝Q-Q0。本发明所述方法通过设置设有预设备份数据，可以根据预设备份数据与实际备份数据对待恢复时间点的待恢复备份文件的数据吻合程度进行初步判定，提高了数据吻合程度的判定精确度，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。具体而言，当所述中控模块完成对于所述待恢复时间点的待恢复备份文件的数据吻合程度的初步判定时，中控模块根据实际备份数据与预设备份数据的差值△Q并根据△Q与预设备份数据差值的对比结果对待恢复时间点的待恢复备份文件的数据吻合程度进行进一步判定并将日志目录以及文件目录中的对应时间点的待恢复备份文件提取宽度调节至对应值，中控模块设有预设待恢复备份文件提取宽度W0、预设第一备份数据差值△Q1、预设第二备份数据差值△Q2、预设第一待恢复备份文件调节系数α1以及预设第二待恢复备份文件调节系数α2，其中，△Q1＜△Q2，0＜α1＜α2＜1，若△Q≤△Q1，所述中控模块判定实际备份文件吻合程度符合要求并不对待恢复备份文件数据进行调节；若△Q1＜△Q≤△Q2，所述中控模块判定实际备份文件的数据吻合程度不符合要求并使用α2对待恢复备份文件提取宽度进行调节，调节后的待恢复备份文件提取宽度记为W,设定W＝W0×α2；若△Q＞△Q2，所述中控模块判定实际备份文件的数据吻合程度不符合要求并使用α1对待恢复备份文件提取宽度进行调节，调节后的待恢复备份文件提取宽度记为W,设定W1＝W0×α1。本发明所述方法通过设置预设待恢复文件提取宽度、预设第一备份数据差值、预设第二备份数据差值、预设第一待恢复文件调节系数以及预设第二待恢复文件调节系数，可以根据实际备份数据与预设备份数据的差值△Q并根据△Q与预设备份数据差值的对比结果对数据吻合程度进行进一步判定并将日志目录以及文件目录中的对应时间点的待恢复文件提取宽度调节至对应值，进一步提高了数据的提取的准确度，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。具体而言，当所述中控模块完成对于待恢复备份文件的提取宽度的调节时，中控模块根据预设数据一致评价参数与实际检测到的文件和日志所对应的运行参数计算得到的数据一致评价参数的对比结果对实际数据一致评价参数进行初步判定，中控模块设有预设第一运行参数A0、预设第二运行参数B0、预设第三运行参数C0以及预设数据一致评价参数K0，设定K0＝s1×A0+s2×B0+s3×C0，若A≠A0、B≠B0或C≠C0，所述中控模块判定实际数据一致评价参数不符合要求并计算实际一致评价参数与预设评价参数的差值△K并根据△K与预设评价参数差值的对比结果对评价参数是否符合要求进行进一步判定并将存储模块中存储的运行参数调节至对应值；若A＝A0、B＝B0且C＝C0，所述中控模块判定实际数据一致评价参数符合预设要求并不计算实际一致评价参数与预设评价参数的差值。本发明所述方法通过设置预设第一运行参数、预设第二运行参数、预设第三运行参数以及预设数据一致评价参数，可以根据预设数据一致评价参数与实际检测到的文件和日志所对应的运行参数计算得到的数据一致评价参数的对比结果对实际数据一致评价参数进行初步判定，提高了评价参数的精准确定，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。具体而言，当所述中控模块完成对于待恢复数据块的初步判定时，中控模块根据预设实际一致评价参数与预设评价参数的差值△K与预设评价参数差值的对比结果对评价参数是否符合要求进行进一步判定并将所述存储模块中存储的运行参数调节至对应值，中控模块设有预设第一评价参数差值△K1、预设第二评价参数差值△K2、预设第一运行参数调节系数g1以及预设第二运行参数调节系数g2，其中，△K1＜△K2，0＜g1＜g2＜1，若△K≤△K1，所述中控模块判定实际评价参数符合预设差值要求并不对所述存储模块中存储的运行参数进行调节；若△K1＜△K≤△K2，所述中控模块判定实际评价参数不符合预设差值要求并使用g1对所述存储模块中的运行参数进行调节，调节后的运行参数记为A1＝A0×g1，B1＝B0×g1，C1＝C0×g1；若△K＞△K2，所述中控模块判定实际评价参数不符合预设差值要求并使用g2对所述存储模块中的运行参数进行调节，调节后的运行参数记为A2＝A0×g1，B2＝B0×g1，C2＝C0×g1。本发明所述方法通过设置预设第一评价参数差值、预设第二评价参数差值、预设第一运行参数调节系数以及预设第二运行参数调节系数，可以根据预设实际一致评价参数与预设评价参数的差值△K与预设评价参数差值的对比结果对评价参数是否符合要求进行进一步判定并将所述存储模块中存储的运行参数调节至对应值，实现了对于涉及存储模块的运行参数的精准选择和调节，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。具体而言，当所述中控模块完成对于待恢复时间点的运行参数的校正时，中控模块根据实际时间点偏移量与预设时间点偏移量的对比结果对待恢复时间点的准确度进行判定；当所述中控模块完成对于待恢复时间点的准确度判定时，中控模块根据不同事故类型恢复的精确度对是否需要对恢复的方法进行修正进行判定，中控模块设有预设第一偏移量D1、预设第二偏移量D2,其中D1＜D2,若D≤D1，所述中控模块判定实际偏移量符合预设要求并不对实际偏移量与预设偏移量进行差值计算；若D1＜D≤D2，所述中控模块判定实际偏移量不符合预设要求并计算实际偏移量与预设偏移量的差值△D并根据△D与预设偏移量差值的对比结果将文件定位速度调节至对应值；若D＞D2，所述中控模块判定实际偏移量不符合预设要求并根据差值对比结果将所述运行参数调节至对应值。本发明所述方法通过设置预设第一偏移量和预设第二偏移量,可以根据实际时间点偏移量与预设时间点偏移量的对比结果对待恢复时间点的准确度进行判定，提高了对恢复时间点的精准把控，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。具体而言，当所述中控模块完成对于准确度的初步判定时且D1＜D≤D2时，中控模块根据计算实际偏移量与预设偏移量的差值△D并根据△D与预设偏移量差值的对比结果将文件定位速度调节至对应值，中控模块设有预设第一偏移量差值△D1、预设第二偏移量差值△D2、预设文件定位速度V0、预设第一定位速度调节系数β1以及预设第二定位速度调节系数β2，其中，△D1＜△D2，0＜β1＜β2＜1，若△D≤△D1，所述中控模块判定实际偏移量差值符合预设标准并不对定位速度进行调节；若△D1＜△D≤△D2，所述中控模块判定实际偏移量差值不符合预设标准并使用β2对所述定位速度进行调节，调节后的定位速度记为V1，设定V1＝V0×β2；若△D＞△D2，所述中控模块判定实际偏移量差值不符合预设标准并使用β1对所述定位速度进行调节，调节后的定位速度记为V2，设定V2＝V0×β1。本发明所述方法通过设置预设第一偏移量差值、预设第二偏移量差值、预设文件定位速度、预设第一定位速度调节系数以及预设第二定位速度调节系数，可以根据△D与预设偏移量差值的对比结果将文件定位速度调节至对应值，实现了文件定位的速度的精准调节，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。具体而言，当所述中控模块完成对于准确度的初步判定时且D＞D2时，中控模块根据△D与预设偏移量差值的对比结果将所述运行参数进行二次调节，中控模块设有预设第三偏移量差值△D3、预设第四偏移量差值△D4、预设运行参数G0、预设第一运行参数调节系数γ1以及预设第二运行参数调节系数γ2，其中，△D3＜△D4，1＜γ1＜γ2，若△D≤△D3，所述中控模块判定实际偏移量差值符合预设标准并不对运行参数进行调节；若△D3＜△D≤△D4，所述中控模块判定实际偏移量差值不符合预设标准并使用γ1对所述运行参数进行调节，调节后的运行参数记为G1，设定G1＝G0×γ1；若△D＞△D4，所述中控模块判定实际偏移量差值不符合预设标准并使用γ2对所述运行参数进行调节，调节后的运行参数记为G2，设定G2＝G0×γ2。本发明所述方法通过设置预设第三偏移量差值、预设第四偏移量差值、预设运行参数、预设第一运行参数调节系数以及预设第二运行参数调节系数，可以根据△D与预设偏移量差值的对比结果将所述运行参数进行二次调节，提高了运行参数的精准提取，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。具体而言，当所述中控模块完成对于所述运行参数和定位速度的调节时，中控模块根据实际偏移差值与预设最大偏移差值的对比结果对是否出现存储器故障进行判定，中控模块设有预设最大偏移量差值△Dmax,若△D≤△Dmax，所述中控模块判定实际偏移量差值符合预设标准并不发出故障警报；若△D＞△Dmax，所述中控模块判定实际偏移量差值不符合预设标准并发出存储器故障警报。本发明所述方法通过设置预设最大偏移量差值，可以根据实际偏移差值与预设最大偏移差值的对比结果对是否出现存储器故障进行判定，进一步提高了数据恢复的精准性和实现了对存储器的故障监管，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。请参阅图2所示，一种数据保护的时间点恢复系统，包括:数据恢复模块，用于对待恢复时间点的数据进行恢复操作；存储模块，其与所述数据恢复模块相连，用于对系统正常运行时的数据存储以及发生故障时的对含有待恢复数据关键词的数据块进行调取操作；修正模块，其与所述存储模块相连，用于对存储模块的运行参数进行评价和调节；中控模块，其分别与所述各模块相连，用于向存储模块发送数据恢复指令以及对各模块输送来的信息进行分析计算并根据计算结果对各所述模块中的控制参数进行调节。本发明所述系统通过设置数据恢复模块、存储模块、修正模块以及中控模块，可以对数据保护的基于时间点的恢复方法提供可靠的系统支持，从系统方面提高了数据时间点恢复的效率和准确度，进一步实现了数据保护的时间点恢复的误差率的降低和工作效率的提高。至此，已经结合附图所示的优选实施方式描述了本发明的技术方案，但是，本领域技术人员容易理解的是，本发明的保护范围显然不局限于这些具体实施方式。在不偏离本发明的原理的前提下，本领域技术人员可以对相关技术特征做出等同的更改或替换，这些更改或替换之后的技术方案都将落入本发明的保护范围之内。以上所述仅为本发明的优选实施例，并不用于限制本发明；对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
