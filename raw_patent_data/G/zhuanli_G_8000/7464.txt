标题title
可移动设备的定位方法、装置、可移动设备及存储介质
摘要abst
本公开关于一种可移动设备的定位方法、装置、可移动设备及存储介质，可移动设备中包括激光发射器及光电传感器，方法包括：在激光发射器处于工作状态的情况下，获取可移动设备中的光电传感器阵列当前输出的电信号阵列；根据电信号阵列，确定可移动设备当前所在环境中各物体的候选轮廓信息；将每个候选轮廓信息与预设数据库中的各参考轮廓信息分别进行匹配，以确定每个候选轮廓信息与每个参考轮廓信息间的匹配度，响应于任一候选轮廓信息与任一参考轮廓信息匹配，根据任一参考轮廓信息对应的距离值及光电传感器阵列的设置位置，确定可移动设备与充电座间的位置关系。由此，提高了可移动设备定位的效率和可靠性。
权利要求书clms
1.一种可移动设备的定位方法，其特征在于，所述可移动设备中包括激光发射器及光电传感器，所述方法包括：在所述激光发射器处于工作状态的情况下，获取所述可移动设备中的光电传感器阵列当前输出的电信号阵列；根据所述电信号阵列，确定所述可移动设备当前所在环境中各物体的候选轮廓信息；将每个所述候选轮廓信息与预设数据库中的各参考轮廓信息分别进行匹配，以确定每个所述候选轮廓信息与每个所述参考轮廓信息间的匹配度，其中，所述预设数据库中包括多个参考轮廓信息及每个所述参考轮廓信息对应的距离值；响应于任一候选轮廓信息与任一参考轮廓信息匹配，根据所述任一参考轮廓信息对应的距离值及所述光电传感器阵列的设置位置，确定所述可移动设备与充电座间的位置关系。2.如权利要求1所述的方法，其特征在于，所述可移动设备中设置有多个光电传感器阵列，所述响应于任一候选轮廓信息与任一参考轮廓信息匹配，根据所述任一参考轮廓信息对应的距离值及所述光电传感器阵列的设置位置，确定所述可移动设备与充电座间的位置关系，包括：根据每个所述光电传感器阵列在所述可移动设备中的设置位置，确定每个所述候选轮廓信息与所述可移动设备当前的行进方向间的第一角度值；根据所述任一候选轮廓信息对应的第一角度值及所述距离值，确定所述充电座与所述可移动设备当前的行进方向间的角度值及距离值。3.如权利要求1所述的方法，其特征在于，所述预设数据库中还包括每个所述参考轮廓信息对应的第二角度值，在所述任一候选轮廓信息与任一参考轮廓信息匹配之后，还包括：根据所述任一参考轮廓信息对应的距离值、第二角度值及所述光电传感器阵列的设置位置，确定所述可移动设备与所述充电座中的充电点间的位置关系。4.如权利要求1所述的方法，其特征在于，所述轮廓信息包括深度图像，所述将每个所述候选轮廓信息与预设数据库中的各参考轮廓信息分别进行匹配，包括：以每个候选深度图像中像素点对应的距离值为索引，从所述预设数据库中获取相同距离值对应的各个参考深度图像；响应于所述相同距离值对应的任一参考深度图像的尺寸与任一候选深度图像的尺寸匹配，依次计算所述任一候选深度图像中每个像素点与所述任一参考深度图像中对应像素点间的匹配度；根据所述匹配度，确定所述任一候选深度图像与所述任一参考深度图像间的匹配度。5.如权利要求4所述的方法，其特征在于，所述轮廓信息还包括灰度图像，在所述确定所述任一候选深度图像与所述任一参考深度图像间的匹配度之后，还包括：响应于所述任一候选深度图像与所述任一参考深度图像间的匹配度小于第一阈值且大于第二阈值，获取与所述任一参考深度图像对应的参考灰度图像及与所述任一候选深度图像对应的候选灰度图像；依次计算所述任一候选灰度图像对应的任一中每个像素点与所述任一参考灰度图像中对应像素点间的匹配度；响应于所述任一候选灰度图像与所述任一参考灰度图像间的匹配度大于第三阈值，则确定所述任一候选深度图像对应的物体为所述充电座。6.如权利要求5所述的方法，其特征在于，在所述依次计算所述任一候选灰度图像对应的任一中每个像素点与所述任一参考灰度图像中对应像素点间的匹配度之后，还包括：响应于所述任一候选灰度图像与所述任一参考灰度图像间的匹配度小于或等于第三阈值，则确定所述任一候选深度图像对应的物体非所述充电座。7.如权利要求1-6任一所述的方法，其特征在于，在所述确定所述可移动设备与充电座间的位置关系之后，还包括：根据所述位置关系，控制所述可移动设备向所述充电座移动。8.如权利要求7所述的方法，其特征在于，所述控制所述可移动设备向所述充电座移动，包括：根据所述任一参考轮廓信息对应的距离值，确定当前的目标速度；控制所述可移动设备以所述目标速度向所述充电座移动。9.如权利要求1-8任一所述的方法，其特征在于，在所述获取所述可移动设备中的光电传感器阵列当前输出的电信号阵列之前，还包括：响应于所述可移动设备当前的剩余电量小于阈值，控制所述可移动设备中的激光发射器发射激光。10.一种可移动设备的定位装置，其特征在于，所述可移动设备中包括激光发射器及光电传感器，包括：获取模块，被配置为在所述激光发射器处于工作状态的情况下，获取所述可移动设备中的光电传感器阵列当前输出的电信号阵列；第一确定模块，被配置为根据所述电信号阵列，确定所述可移动设备当前所在环境中各物体的候选轮廓信息；第二确定模块，被配置为将每个所述候选轮廓信息与预设数据库中的各参考轮廓信息分别进行匹配，以确定每个所述候选轮廓信息与每个所述参考轮廓信息间的匹配度，其中，所述预设数据库中包括多个参考轮廓信息及每个所述参考轮廓信息对应的距离值；第三确定模块，被配置为响应于任一候选轮廓信息与任一参考轮廓信息匹配，根据所述任一参考轮廓信息对应的距离值及所述光电传感器阵列的设置位置，确定所述可移动设备与充电座间的位置关系。11.如权利要求10所述的装置，其特征在于，所述可移动设备中设置有多个光电传感器阵列，所述第三确定模块，包括：第一确定单元，被配置为根据每个所述光电传感器阵列在所述可移动设备中的设置位置，确定每个所述候选轮廓信息与所述可移动设备当前的行进方向间的第一角度值；第二确定单元，被配置为根据所述任一候选轮廓信息对应的第一角度值及所述距离值，确定所述充电座与所述可移动设备当前的行进方向间的角度值及距离值。12.如权利要求10所述的装置，其特征在于，所述第三确定模块，还包括：第三确定单元，被配置为根据所述任一参考轮廓信息对应的距离值、第二角度值及所述光电传感器阵列的设置位置，确定所述可移动设备与所述充电座中的充电点间的位置关系。13.如权利要求10所述的装置，其特征在于，所述轮廓信息包括深度图像，所述第二确定模块，具体被配置为：以每个候选深度图像中像素点对应的距离值为索引，从所述预设数据库中获取相同距离值对应的各个参考深度图像；响应于所述相同距离值对应的任一参考深度图像的尺寸与任一候选深度图像的尺寸匹配，依次计算所述任一候选深度图像中每个像素点与所述任一参考深度图像中对应像素点间的匹配度；根据所述匹配度，确定所述任一候选深度图像与所述任一参考深度图像间的匹配度。14.如权利要求13所述的装置，其特征在于，所述第二确定模块，还具体被配置为：响应于所述任一候选深度图像与所述任一参考深度图像间的匹配度小于第一阈值且大于第二阈值，获取与所述任一参考深度图像对应的参考灰度图像及与所述任一候选深度图像对应的候选灰度图像；依次计算所述任一候选灰度图像对应的任一中每个像素点与所述任一参考灰度图像中对应像素点间的匹配度；响应于所述任一候选灰度图像与所述任一参考灰度图像间的匹配度大于第三阈值，则确定所述任一候选深度图像对应的物体为所述充电座。15.如权利要求14所述的装置，其特征在于，所述第二确定模块，还具体被配置为：响应于所述任一候选灰度图像与所述任一参考灰度图像间的匹配度小于或等于第三阈值，则确定所述任一候选深度图像对应的物体非所述充电座。16.如权利要求11所述的装置，其特征在于，所述第三确定模块，还包括：控制单元，被配置为根据所述位置关系，控制所述可移动设备向所述充电座移动。17.如权利要求16所述的装置，其特征在于，所述控制单元，包括：确定子单元，被配置为根据所述任一参考轮廓信息对应的距离值，确定当前的目标速度；控制子单元，被配置为控制所述可移动设备以所述目标速度向所述充电座移动。18.如权利要求10-17任一所述的装置，其特征在于，还包括：控制模块，被配置为响应于所述可移动设备当前的剩余电量小于阈值，控制所述可移动设备中的激光发射器发射激光。19.一种可移动设备，其特征在于，包括：处理器；用于存储所述处理器的可执行指令的存储器；其中，所述处理器被配置为调用并执行所述存储器存储的可执行指令，以实现如权利要求1-9中任一项所述的可移动设备的定位方法。20.一种非临时性计算机可读存储介质，其特征在于，当所述存储介质中的指令由可移动设备的处理器执行时，使得可移动设备能够执行如权利要求1-9中任一项所述的可移动设备的定位方法。
说明书desc
技术领域本公开涉及计算机技术领域，尤其涉及一种可移动设备的定位方法、装置、可移动设 备及存储介质。背景技术随着计算机技术的快速发展，越来越多的可移动设备得到了广泛应用，可移动设备的 工作状态依赖于其自身存储的电量。可移动设备可以在电量不足时，自主进行回充，其在 进行自主回充的过程中，需要定位出充电座的位置。因此，可移动设备的定位功能成为可 移动设备中至关重要的一部分。相关技术中，利用蓝牙或无线网络等方式进行回充路径的判断和选择时，需要在可移动设备和充电座上分别安装信号的发射和接收装置，充电座和可移动设备建立通信之后才能进行路径规划和搜索，通信过程容易受到障碍物遮挡等影响，可靠性较低，效率也较低。发明内容本公开旨在至少在一定程度上解决相关技术中的技术问题之一。本公开提出了如下技术方案：本公开第一方面实施例提出了一种可移动设备的定位方法，所述可移动设备中包括激 光发射器及光电传感器，所述方法包括：在所述激光发射器处于工作状态的情况下，获取所述可移动设备中的光电传感器阵列 当前输出的电信号阵列；根据所述电信号阵列，确定所述可移动设备当前所在环境中各物体的候选轮廓信息；将每个所述候选轮廓信息与预设数据库中的各参考轮廓信息分别进行匹配，以确定每 个所述候选轮廓信息与每个所述参考轮廓信息间的匹配度，其中，所述预设数据库中包括 多个参考轮廓信息及每个所述参考轮廓信息对应的距离值；响应于任一候选轮廓信息与任一参考轮廓信息匹配，根据所述任一参考轮廓信息对应 的距离值及所述光电传感器阵列的设置位置，确定所述可移动设备与充电座间的位置关系。本公开第二方面实施例提出了一种可移动设备的定位装置，所述可移动设备中包括激 光发射器及光电传感器，包括：获取模块，被配置为在所述激光发射器处于工作状态的情况下，获取所述可移动设备 中的光电传感器阵列当前输出的电信号阵列；第一确定模块，被配置为根据所述电信号阵列，确定所述可移动设备当前所在环境中 各物体的候选轮廓信息；第二确定模块，被配置为将每个所述候选轮廓信息与预设数据库中的各参考轮廓信息 分别进行匹配，以确定每个所述候选轮廓信息与每个所述参考轮廓信息间的匹配度，其中， 所述预设数据库中包括多个参考轮廓信息及每个所述参考轮廓信息对应的距离值；第三确定模块，被配置为响应于任一候选轮廓信息与任一参考轮廓信息匹配，根据所 述任一参考轮廓信息对应的距离值及所述光电传感器阵列的设置位置，确定所述可移动设 备与充电座间的位置关系。本公开第三方面实施例提出了一种可移动设备，包括：处理器；用于存储所述处理器 的可执行指令的存储器；其中，所述处理器被配置为调用并执行所述存储器存储的可执行 指令，以实现本公开第一方面实施例提出的可移动设备的定位方法。本公开第四方面实施例提出了一种非临时性计算机可读存储介质，当所述存储介质中 的指令由可移动设备的处理器执行时，使得可移动设备能够执行本公开第一方面实施例提 出的可移动设备的定位方法。本公开第五方面实施例提出了一种计算机程序产品，该计算机程序由可移动设备的处 理器执行时，使得可移动设备能够执行本公开第一方面实施例提出的可移动设备的定位方 法。本公开的技术方案，首先在激光发射器处于工作状态的情况下，获取可移动设备中的 光电传感器阵列当前输出的电信号阵列，之后根据电信号阵列，确定可移动设备当前所在 环境中各物体的候选轮廓信息，再将每个候选轮廓信息与预设数据库中的各参考轮廓信息 分别进行匹配，以确定每个候选轮廓信息与每个参考轮廓信息间的匹配度，之后响应于任 一候选轮廓信息与任一参考轮廓信息匹配，即可根据任一参考轮廓信息对应的距离值及光 电传感器阵列的设置位置，确定可移动设备与充电座间的位置关系。由此，通过仅在可移 动设备中设置光电传感器阵列及激光发射器，由可移动设备独立处理即可确定出可移动设 备与充电座间的位置关系，定位过程无需与充电座进行交互，降低了可移动设备的定位成 本，提高了可移动设备定位的效率和可靠性。本公开附加的方面和优点将在下面的描述中部分给出，部分将从下面的描述中变得明 显，或通过本公开的实践了解到。附图说明图1是根据本公开一实施例的可移动设备的定位方法的流程图；图2是根据本公开另一实施例的可移动设备的定位方法的流程图；图3是根据本公开另一实施例的可移动设备的定位方法的流程图；图4是根据本公开实施例的可移动设备的定位装置的结构框图；图5是根据本公开实施例的可移动设备的结构示意图。具体实施方式下面详细描述本公开的实施例，所述实施例的示例在附图中示出，其中自始至终相同 或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描 述的实施例是示例性的，旨在用于解释本公开，而不能理解为对本公开的限制。下面参考附图描述本公开实施例的可移动设备的定位方法、装置、可移动设备及存储 介质。本公开实施例的可移动设备的定位方法，可由本公开实施例提供的可移动设备的定位 装置执行，该装置可配置于可移动设备中。图1是根据本公开实施例的可移动设备的定位方法的流程图。如图1所示，该可移动设备的定位方法包括以下步骤S101至步骤S104：S101，在激光发射器处于工作状态的情况下，获取可移动设备中的光电传感器阵列当 前输出的电信号阵列。其中，可移动设备可以是扫地机器人、医院机器人、送餐机器人等具有自主移动功能 的任意设备，本公开对此不做限定。另外，可移动设备中可以有一个光电传感器阵列，或者也可以有多个光电传感器阵列， 本公开对此不做限定。本公开中，通过在移动设备中设置光电传感器阵列和激光发射器VCSEL，来对可移动 设备进行定位。其中，光电传感器阵列可以由任意可将光信号转换为电信号的半导体器件 构成，比如光电传感器阵列可以由单光子雪崩二极管SPAD构成等等，本公开对此不做限定。在有定位需求时，可移动设备即可以首先控制VCSEL发射激光，并通过光电传感器阵 列接收光子信号，之后获取光电传感器阵列输出的电信号阵列。S102，根据电信号阵列，确定可移动设备当前所在环境中各物体的候选轮廓信息。其中，由于VCSEL发射的激光照射到不同形状的物体表面时，返回的光子信号不同， 进而光电传感器阵列中各个光电二极管将光子信号转换生成的电信号也不同。可移动设备 即可根据电信号阵列中各个位置的电信号大小，确定出可移动设备当前所在环境中各物体 的候选轮廓信息。另外，候选轮廓信息，是指任何可以确定物体轮廓的信息，比如，可以为物体的高度、 宽度等几何信息，本公开对此不做限定。S103，将每个候选轮廓信息与预设数据库中的各参考轮廓信息分别进行匹配，以确定 每个候选轮廓信息与每个参考轮廓信息间的匹配度，其中，预设数据库中包括多个参考轮 廓信息及每个参考轮廓信息对应的距离值。其中，参考轮廓信息，可以为在预设数据库中已预先配置好的、可以唯一表征各个物 体高度、宽度等信息。在获取参考轮廓信息时，采集设备与被采集物体之间的距离即为每 个参考轮廓信息对应的距离值。另外，多个参考轮廓信息可能为与同一物体对应的不同角度、不同距离的轮廓信息， 或者也可能为与多个不同物体对应的不同角度、不同距离的轮廓信息。比如，可以以实际测量到的距离值为依据进行分组，共有n组，比如距离范围为0-10 米，每20厘米进行一次分组，则n为50。或者，也可以将同一距离下不同角度下的所有 物体划分为一个分组，每一组可能包括多个信息。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中对参考轮廓信息 等的限定。本公开实施例中，在将候选轮廓信息与预设数据库中的各参考轮廓信息进行匹配时， 可以将候选轮廓信息中的高度、宽度等信息分别与各参考轮廓信息中的高度、宽度等信息 进行匹配，即可确定出候选轮廓信息与各个参考轮廓信息间的匹配度。比如说，候选轮廓信息中物体的长度为20厘米，宽度为10厘米，参考轮廓信息1中物体的长度为10厘米、宽度为8厘米，参考轮廓信息2中物体的长度为20厘米、宽度为 9.5厘米。之后可以将候选轮廓信息中的长度、宽度分别与参考轮廓信息1、参考轮廓信息 2中的长度、宽度进行匹配，从而可以确定出候选轮廓信息与各个参考轮廓信息各自的匹 配度。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中候选轮廓信息、 各参考轮廓信息以及各匹配度等的限定。S104，响应于任一候选轮廓信息与任一参考轮廓信息匹配，根据任一参考轮廓信息对 应的距离值及光电传感器阵列的设置位置，确定可移动设备与充电座间的位置关系。其中，预设数据库中的各个参考轮廓信息均为与充电座对应的相关信息。任一候选轮 廓信息与任一参考轮廓信息间的匹配度越高，表明二者越匹配，该候选轮廓信息为充电座 的可能性越大。比如，可以提前设定一个阈值，比如可以为0.98、0.96等，当任一候选轮廓信息与任 一参考轮廓信息的匹配度大于0.98、0.96时，即认为二者匹配。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中确定任一候选轮 廓信息与任一参考轮廓信息是否匹配的限定。可以理解的是，在不同的可移动设备中，光电传感器阵列可能对应有不同的设置位置， 比如其感光方向可能在可移动设备当前行进方向的前方，或者其感光方向也可能在可移动 设备当前行进方向的左后方等，本公开对此不做限定。举例来说，可移动设备中的光电传感器阵列的感光方向与可移动设备的前进方向一致。 该光电传感器阵列输出的任一候选轮廓信息a与任一参考轮廓信息b匹配，之后可以确定 出该任一参考轮廓信息b对应的距离值，比如可以为2米。从而可以确定出充电座位于可 移动设备前进方向2米处。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中任一参考轮廓信 息对应的距离值、光电传感器阵列的设置位置、可移动设备与充电座间的位置关系等的限 定。在实际使用过程中，可以根据需要，对预设数据库中进行扩充，可以包括可移动设备 所在空间中所有物体对应的参考轮廓信息，从而可移动设备可以对所在空间中的任一物体 进行准确定位。本公开实施例，首先在激光发射器处于工作状态的情况下，获取可移动设备中的光电 传感器阵列当前输出的电信号阵列，之后根据电信号阵列，确定可移动设备当前所在环境 中各物体的候选轮廓信息，再将每个候选轮廓信息与预设数据库中的各参考轮廓信息分别 进行匹配，以确定每个候选轮廓信息与每个参考轮廓信息间的匹配度，之后响应于任一候 选轮廓信息与任一参考轮廓信息匹配，即可根据任一参考轮廓信息对应的距离值及光电传 感器阵列的设置位置，确定可移动设备与充电座间的位置关系。由此，通过仅在可移动设 备中设置光电传感器阵列及VCSEL，由可移动设备独立处理即可确定出可移动设备与充电 座间的位置关系，定位过程无需与充电座进行交互，降低了可移动设备的定位成本，提高 了可移动设备定位的效率和可靠性。上述实施例，通过仅在可移动设备中设置光电传感器阵列及VCSEL，由可移动设备独 立处理即可确定出可移动设备与充电座间的位置关系。在一种可能的实现方式中，可移动 设备中可能设置有多个光电传感器阵列，从而可以根据各个光电传感器阵列在可移动设备 中的设置位置，先确定出每个候选轮廓信息与可移动设备当前的行进方向间的第一角度值， 进而确定出充电座的位置，下面结合图2对上述过程进行详细说明。如图2所示，该可移动设备的定位方法包括以下步骤S201至步骤S207：S201，响应于可移动设备当前的剩余电量小于阈值，控制可移动设备中的激光发射器 发射激光。S202，在激光发射器处于工作状态的情况下，获取可移动设备中的光电传感器阵列当 前输出的电信号阵列。其中，阈值可以为提前设定好的任意数值，比如可以为0.05、0.12等，本公开对此不 做限定。本公开实施例中，可移动设备当前的剩余电量小于阈值时，即可首先控制VCSEL发射 激光，并通过光电传感器阵列接收光子信号，之后获取光电传感器阵列输出的电信号阵列。S203，根据电信号阵列，确定可移动设备当前所在环境中各物体的候选轮廓信息。S204，将每个候选轮廓信息与预设数据库中的各参考轮廓信息分别进行匹配，以确定 每个候选轮廓信息与每个参考轮廓信息间的匹配度，其中，预设数据库中包括多个参考轮 廓信息及每个参考轮廓信息对应的距离值。S205，根据每个光电传感器阵列在可移动设备中的设置位置，确定每个候选轮廓信息 与可移动设备当前的行进方向间的第一角度值。其中，可移动设备中可能有一个光电传感器阵列，或者也可能有多个光电传感器阵列， 各个光电传感器阵列在可移动设备中对应有各自的设置位置。比如说，可移动设备有3个光电传感器阵列，分别为光电传感器阵列A、B、C。其中，光电传感器阵列A的感光方向与可移动设备当前行进方向一致，光电传感器阵列B的感光方向在可移动设备当前行进方向的顺时针90度的位置，光电传感器阵列C在可移动设备当前行进方向的逆时针90度的位置。若任一候选轮廓信息1由光电传感器阵列C输出得到，从而可以根据光电传感器阵列 C的设置位置，确定出该任一候选轮廓信息1位于可移动设备当前的行进方向的顺时针90 度的位置，即第一角度值为顺时针90度。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中光电传感器阵列 的设置位置、任一候选轮廓信息与可移动设备当前的行进方向间的第一角度值等的限定。S206，根据任一候选轮廓信息对应的第一角度值及距离值，确定充电座与可移动设备 当前的行进方向间的角度值及距离值。比如，确定出的任一候选轮廓信息1对应的第一角度值为与可移动设备当前的行进方 向成顺时针30度，再根据与该任一候选轮廓信息1匹配的任一参考轮廓信息，可知对应的 距离值为2.5米。从而可以确定出充电座位于可移动设备当前的行进方向的顺时针30度、 距离为2.5米处。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中任一候选轮廓信 息与可移动设备当前的行进方向间的第一角度值、距离值等的限定。在一种可能的实现方式中，充电座中也可以包括充电点，预设数据库中还可以包括每 个参考轮廓信息对应的第二角度值，从而在确定充电座位置时，可以确定出可移动设备与 充电座中充电点间的位置关系。具体的，在任一候选轮廓信息与任一参考轮廓信息匹配之后，可以根据任一参考轮廓 信息对应的距离值、第二角度值及光电传感器阵列的设置位置，确定可移动设备与充电座 中的充电点间的位置关系。其中，对应充电座而言，第二角度值，为采集设备采集该参考轮廓信息中，采集设备 与该充电座中充电点间的角度值。比如获取充电座的多个参考轮廓信息时，可以从各个角度对充电座进行信息采集，从 而获取到的参考轮廓信息与充电座中的充电点间可能存在一定的角度。比如，任一候选轮廓信息a与任一参考轮廓信息b匹配,任一参考轮廓信息b对应的距 离值为3米，其对应的第二角度值逆时针方向15度。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中任一候选轮廓信 息、任一参考轮廓信息对应的距离值、第二角度值等的限定。S207，根据位置关系，控制可移动设备向充电座移动。其中，位置关系可以包括充电座与可移动设备当前的行进方向间的角度、距离值等。本公开实施例中，可移动设备可以根据充电座与可移动设备当前的行进方向间的角度， 及时调整自己的前进方向，之后再向充电座移动相应的距离值。另外，根据位置关系，控制可移动设备向充电座移动时，可能有多种方式。比如，可以提前设定好，可移动设备剩余电量小于阈值时的移动速度，从而当可移动 设备剩余电量小于阈值时，即可按照设定好的移动速度向充电座移动。或者，也可以先根据任一参考轮廓信息对应的距离值，确定当前的目标速度，之后控 制可移动设备以目标速度向充电座移动。比如，可以提前设定好任一参考轮廓信息对应的距离值与目标速度之间的对应关系。 比如，任一参考轮廓信息对应的距离值为3米，根据任一参考轮廓信息对应的距离值与目 标速度之间的对应关系，可以确定出当前的目标速度为V1，之后可移动设备即可以V1的速度向充电座移动。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中任一参考轮廓信 息对应的距离值、目标速度等的限定。本公开实施例，首先响应于可移动设备当前的剩余电量小于阈值，控制可移动设备中 的激光发射器发射激光，之后可以获取可移动设备中的光电传感器阵列当前输出的电信号 阵列，再根据电信号阵列，确定可移动设备当前所在环境中各物体的候选轮廓信息。之后 将每个候选轮廓信息与预设数据库中的各参考轮廓信息分别进行匹配，以确定每个候选轮 廓信息与每个参考轮廓信息间的匹配度，可以根据每个光电传感器阵列在可移动设备中的 设置位置，确定每个候选轮廓信息与可移动设备当前的行进方向间的第一角度值。再根据 任一候选轮廓信息对应的第一角度值及距离值，确定充电座与可移动设备当前的行进方向 间的角度值及距离值，从而可以根据位置关系，控制可移动设备向充电座移动。由此，通 过仅在可移动设备中设置光电传感器阵列及VCSEL，由可移动设备独立处理即可确定出可 移动设备与充电座间的位置关系，定位过程无需与充电座进行交互，降低了可移动设备的 定位成本，提高了可移动设备定位的效率和可靠性。可以理解的是，轮廓信息可以包括深度图像，如图3所示，在上述步骤S103中，在将每个候选轮廓信息与预设数据库中的各参考轮廓信息分别进行匹配时，可包括以下步骤S301至S303：S301，以每个候选深度图像中像素点对应的距离值为索引，从预设数据库中获取相同 距离值对应的各个参考深度图像。其中，轮廓信息还可以包括深度图像。该深度图像可以通过多种方式得到，比如可以 利用飞行时间测距法原理，得到物体每一个像素点的距离信息，之后可以得到整个视野内不同物体的深度图像等等，本公开对此不做限定。可以理解的是，在同一距离值下，对同一物体从不同角度进行采集，得到的物体尺寸 可能有所不同，本公开对此不做限定。另外，候选轮廓信息为候选深度图像时，可以先确定出候选深度图像中像素点对应的 距离值。比如，距离值为1.5米，可以在预设数据库中以距离值1.5米为索引，获取该1.5 米距离值对应的各个参考深度图像。获取到的各个参考深度图像可能为距离同一物体1.5 米时从不同角度得到的各个深度图像，或者也可能为距离不同物体1.5米时从不同角度得 到各个的深度图像。需要说明的是，上述示例只是举例说明，不能作为对本公开实施中距离值等的限定。可以理解的是，为了排除在不同角度下的光照条件等的影响，可以将得到的每个深度 图像进行归一化处理，从而以尽量提高准确性。S302，响应于相同距离值对应的任一参考深度图像的尺寸与任一候选深度图像的尺寸 匹配，依次计算任一候选深度图像中每个像素点与任一参考深度图像中对应像素点间的匹 配度。S303，根据匹配度，确定任一候选深度图像与任一参考深度图像间的匹配度。其中，可以按照像素点对应的距离值，将深度图像中相近距离值对应的各像素点提前 进行分区，以得到对应的物体图像尺寸。比如，对任一候选深度图像1中按照像素点对应的距离值进行分区，得到三个对应的 物体图像尺寸，分别为10*10、20*15、50*30。任一参考深度图像2的尺寸为50*30。根据确定出的各尺寸可以确定出任一候选深度图像1中50*30的尺寸与任一参考深度图像2的尺寸更相近。之后可以依次计算任一候选深度图像1中50*30中各个像素点与任一参考深度图像2中对应像素点间的匹配度。再根据该匹配度，可以确定出任一候选深度图像与任一参考深度图像间的匹配度。比如，任一候选深度图像3中与任一参考深度图像4尺寸匹配的的各像素点依次为任一参考深度图像4的各像素点依次为可以得到各像素点对应的差值对该差值进行求和，可以得到总差值为0.08。从而可以确定出 该任一候选深度图像3与该任一参考深度图像4的匹配度为0.92。或者，也可以先去掉任一候选深度图像、任一参考深度图像中最大的像素点、最小的 像素点，之后再进行匹配，以确定各个对应像素点之间的匹配度。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中任一候选深度图 像、任一参考深度图像、像素点等的限定。可以理解的是，按照像素点对应的距离值，将候选深度图像中相近距离值对应的各像 素点提前进行分区，得到对应的物体图像尺寸，与参考深度图像中的尺寸可能并不完全匹 配，此时可以根据需要，选择将候选深度图像中对应的物体图像尺寸进行相应的扩充。比 如，候选深度图像中对应的物体图像尺寸分别为10*5、20*13、50*28，参考深度图像的尺 寸为50*30，其中，50*28最为接近参考深度图像的尺寸，可以将50*28进行扩充，以使其 与参考深度图像的尺寸相匹配。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中候选深度图像尺 寸、参考深度图像尺寸等的限定。另外，可以提前设定好一个阈值，若匹配度大于该阈值，可以确定该任一候选深度图 像与任一参考深度图像相匹配。比如，设定的阈值为0.9，计算得到任一候选深度图像与任一参考深度图像的匹配度 为0.92，则可以确定该任一候选深度图像与任一参考深度图像相匹配。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中阈值、该任一候 选深度图像与任一参考深度图像匹配度等的限定。可以理解的是，轮廓信息还可以包括灰度图像。可以提前设定一个第一阈值、第二阈 值，当任一候选深度图像与任一参考深度图像的匹配度小于第一阈值且大于第二阈值时， 该任一候选深度图像所对应的物体也可能为所需的充电座，可以进一步使用灰度图像对其 继续进行匹配。可以理解的是，可以通过比较VCSEL发出激光的强度与接收到的反射光的强度，得到 整个视野内不同物体的灰度图像。为了减少外部环境的干扰，还可以对得到的灰度图像进 行均一化处理。具体的，响应于任一候选深度图像与任一参考深度图像间的匹配度小于第一阈值且大 于第二阈值，获取与任一参考深度图像对应的参考灰度图像及与任一候选深度图像对应的 候选灰度图像。其中，第一阈值、第二阈值，可以为提前设定的任意数值，本公开对此不做限定。比如说，设定的第一阈值为0.9，设置的第二阈值为0.85任一候选深度图像与任一参 考深度图像间的匹配度为0.88，其小于第一阈值，又大于第二阈值。为了提高确定出的充 电座的准确性，可以进一步使用灰度图像对其进行匹配，以保证不会遗漏信息。之后，依次计算任一候选灰度图像对应的任一中每个像素点与任一参考灰度图像中对 应像素点间的匹配度。其中，可以将任一候选灰度图像对应的每个像素点与任一参考灰度图像中每个对应像 素点进行匹配，以得到二者对应的匹配度。或者，也可以仅将任一候选深度图像中匹配度 大于第一阈值小于第二阈值对应部分的候选灰度图像对应的像素点与任一参考灰度图像中 每个对应像素点进行匹配，以得到二者的匹配度。比如说，将任一候选深度图像中相近距离值的像素点进行划分，之后得到的对应的物 体图像1与任一参考深度图像2的匹配度大于第一阈值、小于第二阈值。之后，可以得到任一候选深度图像中物体图像1对应的候选灰度图像1，可以将候选 灰度图像1中的每个像素点与获取的参考灰度图像2中每个对应的像素点进行匹配，从而 可以得到二者对应的匹配度。比如，候选灰度图像1中各个像素点依次为参考灰度图像2中各个像素点依次为各像素点对应的差值为可以得到总差值0.05。从而可以确定出候选灰度图像1与参考灰度图像2的匹配度为0.95。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中任一候选灰度图 像与任一参考灰度图像各像素点、匹配度以及确定该匹配度的方法等的限定。之后，响应于任一候选灰度图像与任一参考灰度图像间的匹配度大于第三阈值，则确 定任一候选灰度图像对应的物体为充电座。或者，响应于任一候选灰度图像与任一参考灰 度图像间的匹配度小于或等于第三阈值，则确定任一候选灰度图像对应的物体非充电座。其中，第三阈值，可以为提前设定好的任意数值，本公开对此不做限定。比如，提前设定好的第三阈值为0.85，若任一候选灰度图像与任一参考灰度图像间的 匹配度为0.88，其大于0.85，则可以确定该任一候选灰度图像对应的物体为充电座。若任 一候选灰度图像与任一参考灰度图像间的匹配度为0.8，其小于0.85，则可以确定该任一 候选灰度图像对应的物体为非充电座。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中第三阈值、任一 候选灰度图像与任一参考灰度图像间的匹配度等的限定。可以理解的是，在实际使用过程中，也可以根据任一候选灰度图像与任一参考灰度图 像的匹配度，直接确定出任一候选灰度图像与任一参考灰度图像是否匹配，从而可以确定 出任一候选灰度图像对应的物体是否为充电座。比如，可以设定阈值1，当任一候选灰度 图像与任一参考灰度图像的匹配度大于该阈值1时，可以确定该任一候选灰度图像与该任 一参考灰度图像匹配。或者，对于匹配度与阈值1接近，略小于该阈值1，但大于设定的阈值2的任一候选灰度图像与任一参考灰度图像，可以使用二者各自对应的深度图像进行匹配。再根据该任一候选深度图像与该任一参考深度图像的匹配度，确定该任一候选深度图像对应的物体是否为充电座。需要说明的是，上述示例只是举例说明，不能作为对本公开实施例中确定任一候选深 度图像、任一候选灰度图像对应的物体是否为充电座等的限定。本公开实施例中，通过仅在可移动设备中设置光电传感器阵列及VCSEL，再根据任一候 选深度图像、任一候选灰度图像分别与预设数据库中的各参考深度图像、各参考灰度图像 进行匹配，根据匹配结果可以更为准确地确定出任一候选深度图像、任一候选灰度图像对 应的物体是否为充电座，该过程无需与充电座进行交互，降低了可移动设备的定位成本， 提高了可移动设备定位的效率和可靠性。本公开实施例还提出了一种可移动设备的定位装置，图4是根据本公开实施例的可移 动设备的定位装置的结构框图。如图4所示，该可移动设备的定位装置100包括：获取模块110、第一确定模块120、第二确定模块130以及第三确定模块140。其中，获取模块110，被配置为获取所述可移动设备中的光电传感器阵列当前输出的 电信号阵列。第一确定模块120，被配置为根据所述电信号阵列，确定所述可移动设备当前所在环 境中各物体的候选轮廓信息；第二确定模块130，被配置为将每个所述候选轮廓信息与预设数据库中的各参考轮廓 信息分别进行匹配，以确定每个所述候选轮廓信息与每个所述参考轮廓信息间的匹配度， 其中，所述预设数据库中包括多个参考轮廓信息及每个所述参考轮廓信息对应的距离值；第三确定模块140，被配置为响应于任一候选轮廓信息与任一参考轮廓信息匹配，根 据所述任一参考轮廓信息对应的距离值及所述光电传感器阵列的设置位置，确定所述可移 动设备与充电座间的位置关系。在一种可能的实现方式中，第二确定模块130，具体被配置为以每个候选深度图像中 像素点对应的距离值为索引，从所述预设数据库中获取相同距离值对应的各个参考深度图 像；响应于所述相同距离值对应的任一参考深度图像的尺寸与任一候选深度图像的尺寸匹 配，依次计算所述任一候选深度图像中每个像素点与所述任一参考深度图像中对应像素点 间的匹配度；根据所述匹配度，确定所述任一候选深度图像与所述任一参考深度图像间的 匹配度。在一种可能的实现方式中，第二确定模块130，还具体被配置为响应于所述任一候选 深度图像与所述任一参考深度图像间的匹配度小于第一阈值且大于第二阈值，获取与所述 任一参考深度图像对应的参考灰度图像及与所述任一候选深度图像对应的候选灰度图像； 依次计算所述任一候选灰度图像对应的任一中每个像素点与所述任一参考灰度图像中对应 像素点间的匹配度；响应于所述任一候选灰度图像与所述任一参考灰度图像间的匹配度大 于第三阈值，则确定所述任一候选深度图像对应的物体为所述充电座。在一种可能的实现方式中，第二确定模块130，还具体被配置为响应于所述任一候选 灰度图像与所述任一参考灰度图像间的匹配度小于或等于第三阈值，则确定所述任一候选 深度图像对应的物体非所述充电座。在一种可能的实现方式中，可移动设备中设置有多个光电传感器阵列，第三确定模块 140，包括：第一确定单元，被配置为根据每个所述光电传感器阵列在所述可移动设备中的设置位 置，确定每个所述候选轮廓信息与所述可移动设备当前的行进方向间的第一角度值；第二确定单元，被配置为根据所述任一候选轮廓信息对应的第一角度值及所述距离值， 确定所述充电座与所述可移动设备当前的行进方向间的角度值及距离值。在一种可能的实现方式中，第三确定模块140，还包括：第三确定单元，被配置为根据所述任一参考轮廓信息对应的距离值、第二角度值及所 述光电传感器阵列的设置位置，确定所述可移动设备与所述充电座中的充电点间的位置关 系。在一种可能的实现方式中，第三确定模块140，还包括：控制单元，被配置为根据所述位置关系，控制所述可移动设备向所述充电座移动。在一种可能的实现方式中，控制单元，包括：确定子单元，被配置为根据所述任一参 考轮廓信息对应的距离值，确定当前的目标速度；控制子单元，被配置为控制所述可移动 设备以所述目标速度向所述充电座移动。在一种可能的实现方式中，可移动设备的定位装置100，还可包括：控制模块，被配置为响应于所述可移动设备当前的剩余电量小于阈值，控制所述可移 动设备中的激光发射器发射激光。本公开实施例中的上述各模块的功能及具体实现原理，可参照上述各方法实施例，此 处不再赘述。本公开实施例的可移动设备的定位装置，首先在激光发射器处于工作状态的情况下， 获取可移动设备中的光电传感器阵列当前输出的电信号阵列，之后根据电信号阵列，确定 可移动设备当前所在环境中各物体的候选轮廓信息，再将每个候选轮廓信息与预设数据库 中的各参考轮廓信息分别进行匹配，以确定每个候选轮廓信息与每个参考轮廓信息间的匹 配度，之后响应于任一候选轮廓信息与任一参考轮廓信息匹配，即可根据任一参考轮廓信 息对应的距离值及光电传感器阵列的设置位置，确定可移动设备与充电座间的位置关系。 由此，通过仅在可移动设备中设置光电传感器阵列及VCSEL，由可移动设备独立处理即可 确定出可移动设备与充电座间的位置关系，定位过程无需与充电座进行交互，降低了可移 动设备的定位成本，提高了可移动设备定位的效率和可靠性。图5是根据本公开实施例的可移动设备的结构框图。如图5所示，该可移动设备200包括：存储器210和处理器220，连接不同组件的总线230。其中，存储器210用于存储处理器220的可执行指令；处理器201被配置为调用并执行存储器202存储的可执行指令，以实现本公开上述实施例提出的可移动设备的定位方法。总线230表示几类总线结构中的一种或多种，包括存储器总线或者存储器控制器，外 围总线，图形加速端口，处理器或者使用多种总线结构中的任意总线结构的局域总线。举 例来说，这些体系结构包括但不限于工业标准体系结构总线，微通道体系结构 总线，增强型ISA总线、视频电子标准协会局域总线以及外围组件互连总 线。可移动设备200典型地包括多种可移动设备可读介质。这些介质可以是任何能够被可 移动设备200访问的可用介质，包括易失性和非易失性介质，可移动的和不可移动的介质。存储器210还可以包括易失性存储器形式的计算机系统可读介质，例如随机存取存储 器240和/或高速缓存存储器250。可移动设备200可以进一步包括其它可移动/不 可移动的、易失性/非易失性计算机系统存储介质。仅作为举例，存储系统260可以用于读 写不可移动的、非易失性磁介质。尽管图5中 未示出，可以提供用于对可移动非易失性磁盘读写的磁盘驱动器，以及 对可移动非易失性光盘读写的光盘驱动器。在 这些情况下，每个驱动器可以通过一个或者多个数据介质接口与总线230相连。存储器210 可以包括至少一个程序产品，该程序产品具有一组程序模块，这些程序 模块被配置以执行本公开各实施例的功能。具有一组程序模块270的程序/实用工具280，可以存储在例如存储器210 中，这样的程序模块270包括——但不限于——操作系统、一个或者多个应用程序、其它 程序模块以及程序数据，这些示例中的每一个或某种组合中可能包括网络环境的实现。程 序模块270通常执行本公开所描述的实施例中的功能和/或方法。可移动设备200也可以与一个或多个外部设备290通信，还可与一个或者多个使得用户能与该可移动设备200交互的设备通信，和/或与 使得该可移动设备200能与一个或多个其它计算设备进行通信的任何设备通信。这种通信可以通过输入/输出接口292进行。并且，可移动 设备200还可以通过网络适配器293与一个或者多个网络，广域网和/或公共网络，例如因特网)通信。如图所示，网络适配器293通过总线230与可移动设 备200的其它模块通信。应当明白，尽管图中未示出，可以结合可移动设备200使用其它 硬件和/或软件模块，包括但不限于：微代码、设备驱动器、冗余处理单元、外部磁盘驱动 阵列、RAID系统、磁带驱动器以及数据备份存储系统等。处理器220通过运行存储在存储器210中的程序，从而执行各种功能应用以及数据处 理。需要说明的是，本公开实施例的可移动设备的实施过程参见前述对本公开实施例的数 据处理的解释说明，此处不再赘述。为了实现上述实施例，本公开实施例还提出了一种非临时性计算机可读存储介质，该 存储介质中的指令由可移动设备的处理器执行时，使得可移动设备能够执行如前所述的可 移动设备的定位方法。为了实现上述实施例，本公开实施例还提供一种计算机程序产品，该计算机程序由可 移动设备的处理器执行时，使得可移动设备能够执行如前所述的可移动设备的定位方法。本公开的技术方案，首先在激光发射器处于工作状态的情况下，获取可移动设备中的 光电传感器阵列当前输出的电信号阵列，之后根据电信号阵列，确定可移动设备当前所在 环境中各物体的候选轮廓信息，再将每个候选轮廓信息与预设数据库中的各参考轮廓信息 分别进行匹配，以确定每个候选轮廓信息与每个参考轮廓信息间的匹配度，之后响应于任 一候选轮廓信息与任一参考轮廓信息匹配，即可根据任一参考轮廓信息对应的距离值及光 电传感器阵列的设置位置，确定可移动设备与充电座间的位置关系。由此，通过仅在可移 动设备中设置光电传感器阵列及VCSEL，由可移动设备独立处理即可确定出可移动设备与 充电座间的位置关系，定位过程无需与充电座进行交互，降低了可移动设备的定位成本， 提高了可移动设备定位的效率和可靠性。本领域技术人员在考虑说明书及实践这里公开的发明后，将容易想到本公开的其它实 施方案。本公开旨在涵盖本公开的任何变型、用途或者适应性变化，这些变型、用途或者 适应性变化遵循本公开的一般性原理并包括本公开未公开的本技术领域中的公知常识或惯 用技术手段。说明书和实施例仅被视为示例性的，本公开的真正范围和精神由下面的权利 要求指出。应当理解的是，本公开并不局限于上面已经描述并在附图中示出的精确结构，并且可 以在不脱离其范围进行各种修改和改变。本公开的范围仅由所附的权利要求来限制。
