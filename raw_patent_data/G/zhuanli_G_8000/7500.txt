标题title
一种毫米波雷达二维角度计算方法、装置及相关设备
摘要abst
本申请公开了一种毫米波雷达二维角度计算方法、装置及相关设备，该方法包括：从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元；基于每一组目标阵元中各虚拟阵元的回波数据矩阵，确定各目标在相应方向上的角度集合，得到各目标在水平方向的第一角度集合、在竖直方向的第二角度集合以及在斜向的第三角度集合；最后基于预设的回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定所述各目标的角度。本申请仅采用部分虚拟阵元来进行计算，很大程度地减少了非必要信息的计算，且目标虚拟阵列中阵元数目的增加不会增加计算量，计算过程简单，能够较为高效地完成目标角度的二维角度估算。
权利要求书clms
1.一种毫米波雷达二维角度计算方法，其特征在于，包括：从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元，其中，所述目标虚拟阵列分别在水平方向和竖直方向上均匀排布，第一组目标阵元包括至少两个在同一水平方向上的虚拟阵元，第二组目标阵元包括至少两个在同一竖直方向上的虚拟阵元，第三组目标阵元包括至少两个不在同一水平方向、且不在同一竖直方向上的虚拟阵元；基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定各目标在水平方向的第一角度集合，基于所述第二组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在竖直方向的第二角度集合，以及基于所述第三组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在斜向的第三角度集合，其中，所述第一角度集合、所述第二角度集合和所述第三角度集合所包含的元素的个数相等，且均为目标的个数；基于回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定所述各目标的角度。2.根据权利要求1所述的方法，其特征在于，所述基于回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定所述各目标的角度的过程，包括：依据下述方程式完成所述第一角度集合中的第一角度和所述第二角度集合中的第二角度的匹配，得到互相匹配的角度组合：将每一角度组合确定为一目标的角度，每一角度组合包括一个第一角度和一个第二角度；其中，为所述第三组目标阵元中相邻目标阵元在水平方向上的距离，为所述第三组目标阵元中相邻目标阵元在竖直方向上的距离，为所述第一角度集合中的第一角度，为所述第二角度集合中的第二角度，为所述第三角度集合中的第三角度。3.根据权利要求2所述的方法，其特征在于，所述依据下述方程式完成所述第一角度集合中的第一角度和所述第二角度集合中的第二角度的匹配的过程，包括：构造矩阵，通过下述方程式计算得到矩阵中的每个元素：构造向量列表，通过下述方程式计算得到向量列表中的每个向量：针对每一，确定与所述的值最接近的目标，并将目标中的和确定为互相匹配的角度组合；其中，为所述目标的个数，为所述第一角度集合中的第一角度，为所述第二角度集合中的第二角度，为所述第三角度集合中的第三角度；为与对应的目标阵元，和与对应的目标阵元，在水平方向上的距离；为与对应的目标阵元，和与对应的目标阵元，在竖直方向上的距离。4.根据权利要求1所述的方法，其特征在于，基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在水平方向的第一角度集合的过程，包括：对所述第一组目标阵元中各虚拟阵元的各回波数据矩阵进行二维快速傅里叶变换2D-FFT，得到距离-多普勒谱矩阵；对所述距离-多普勒谱矩阵进行非相关累积处理，得到累积之后的距离-多普勒谱矩阵；对所述累积之后的距离-多普勒谱矩阵进行恒虚警CFAR检测，得到目标的距离和速度索引；基于所述距离-多普勒谱矩阵以及目标的距离和速度索引，确定目标的第一角度集合。5.根据权利要求1所述的方法，其特征在于，所述目标虚拟阵列为一矩形阵列，所述从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元的过程，包括：由目标虚拟阵列中任意一行中的各虚拟阵元构成第一组目标阵元；由目标虚拟阵列中任意一列中的各虚拟阵元构成第二组目标阵元；由目标虚拟阵列中的对角线或副对角线上的各虚拟阵元构成第三组目标阵元。6.根据权利要求1所述的方法，其特征在于，所述目标虚拟阵列为非矩形阵列，所述从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元的过程，包括：从目标虚拟阵列中确定虚拟阵元数目最多的一行，由所述行中的各虚拟阵元构成第一组目标阵元；从目标虚拟阵列中确定虚拟阵元数目最多的一列，由所述列中的各虚拟阵元构成第二组目标阵元；从目标虚拟阵列中确定不在同一行且不在同一列的多个虚拟阵元，所述多个虚拟阵元的中心连成一直线，所述多个虚拟阵元中的相邻阵元在水平方向上的间隔一致，且所述多个虚拟阵元中的相邻阵元在竖直方向上的间隔一致。7.根据权利要求1所述的方法，其特征在于，所述目标虚拟阵列中相邻目标阵元在水平方向上的距离满足下述方程式：其中，为所采用的毫米波的波长，为预设的最大不模糊测角范围。8.一种毫米波雷达二维角度计算装置，其特征在于，包括：目标阵元选取单元，用于从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元，其中，所述目标虚拟阵列分别在水平方向和竖直方向上均匀排布，第一组目标阵元包括至少两个在同一水平方向上的虚拟阵元，第二组目标阵元包括至少两个在同一竖直方向上的虚拟阵元，第三组目标阵元包括至少两个不在同一水平方向、且不在同一竖直方向上的虚拟阵元；单一角度确定单元，用于基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定各目标在水平方向的第一角度集合，基于所述第二组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在竖直方向的第二角度集合，以及基于所述第三组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在斜向的第三角度集合，其中，所述第一角度集合、所述第二角度集合和所述第三角度集合所包含的元素的个数相等，且均为目标的个数；角度匹配计算单元，用于基于回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定所述各目标的角度。9.一种毫米波雷达二维角度计算设备，其特征在于，包括：存储器和处理器；所述存储器，用于存储程序；所述处理器，用于执行所述程序，实现如权利要求1~7中任一项所述的毫米波雷达二维角度计算方法的各个步骤。10.一种存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时，实现如权利要求1~7中任一项所述的毫米波雷达二维角度计算方法的各个步骤。
说明书desc
技术领域本申请涉及毫米波雷达技术领域，更具体地说，是涉及一种毫米波雷达二维角度计算方法、装置及相关设备。背景技术汽车行业目前正朝着更智能的方向发展，从高级辅助驾驶系统到面向更高级别的全自动驾驶，这些功能的实现离不开为决策系统提供对周边环境信息进行感知的各类传感器。毫米波雷达有着探测距离远、可以测速、可以全天时全天候工作、成本低等优势，已经成为了汽车最为核心的传感器之一。传统的毫米波雷达传感器只具备水平维度的测角功能，自动驾驶等级的提高对传感器的要求也更高，于是催生了4D毫米波雷达。其中，4D雷达可以感知的目标物包括距离、速度、水平角度、竖直角度这四个维度的信息。相较于传统的车载毫米波雷达，4D雷达使用了二维面阵，具备了竖直向测角能力，同时两个维度的测角分辨率也更高。二维测角需要解决的一个问题是同一个目标的水平和竖直两个方向的角度匹配，传统的2D-DOA方法是对面阵的全部行阵元和列阵元做2D-FFT或波束成形，之后通过找极值等方法得到目标角度以规避角度匹配的问题。这种方法所需的计算量较大，不仅需要对全部的行以及列作FFT或波束成形，而且在要在整个矩阵中找极值，当阵元数目增加时该方法的计算量是线性增长的。发明内容有鉴于此，本申请提供了一种毫米波雷达二维角度计算方法、装置及相关设备，以高效地实现目标角度的计算。为实现上述目的，本申请第一方面提供了一种毫米波雷达二维角度计算方法，包括：从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元，其中，所述目标虚拟阵列分别在水平方向和竖直方向上均匀排布，第一组目标阵元包括至少两个在同一水平方向上的虚拟阵元，第二组目标阵元包括至少两个在同一竖直方向上的虚拟阵元，第三组目标阵元包括至少两个不在同一水平方向、且不在同一竖直方向上的虚拟阵元；基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定各目标在水平方向的第一角度集合，基于所述第二组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在竖直方向的第二角度集合，以及基于所述第三组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在斜向的第三角度集合，其中，所述第一角度集合、所述第二角度集合和所述第三角度集合所包含的元素的个数相等，且均为目标的个数；基于回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定所述各目标的角度。优选地，所述基于回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定所述各目标的角度的过程，包括：依据下述方程式完成所述第一角度集合中的第一角度和所述第二角度集合中的第二角度的匹配，得到互相匹配的角度组合：将每一角度组合确定为一目标的角度，每一角度组合包括一个第一角度和一个第二角度；其中，为所述第三组目标阵元中相邻目标阵元在水平方向上的距离，为所述第三组目标阵元中相邻目标阵元在竖直方向上的距离，为所述第一角度集合中的第一角度，为所述第二角度集合中的第二角度，为所述第三角度集合中的第三角度。优选地，所述依据下述方程式完成所述第一角度集合中的第一角度和所述第二角度集合中的第二角度的匹配的过程，包括：构造矩阵，通过下述方程式计算得到矩阵中的每个元素：构造向量列表，通过下述方程式计算得到向量列表中的每个向量：针对每一，确定与所述的值最接近的目标，并将目标中的和确定为互相匹配的角度组合；其中，为所述目标的个数，为所述第一角度集合中的第一角度，为所述第二角度集合中的第二角度，为所述第三角度集合中的第三角度；为与对应的目标阵元，和与对应的目标阵元，在水平方向上的距离；为与对应的目标阵元，和与对应的目标阵元，在竖直方向上的距离。优选地，基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在水平方向的第一角度集合的过程，包括：对所述第一组目标阵元中各虚拟阵元的各回波数据矩阵进行二维快速傅里叶变换2D-FFT，得到距离-多普勒谱矩阵；对所述距离-多普勒谱矩阵进行非相关累积处理，得到累积之后的距离-多普勒谱矩阵；对所述累积之后的距离-多普勒谱矩阵进行恒虚警CFAR检测，得到目标的距离和速度索引；基于所述距离-多普勒谱矩阵以及目标的距离和速度索引，确定目标的第一角度集合。优选地，所述目标虚拟阵列为一矩形阵列，所述从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元的过程，包括：由目标虚拟阵列中任意一行中的各虚拟阵元构成第一组目标阵元；由目标虚拟阵列中任意一列中的各虚拟阵元构成第二组目标阵元；由目标虚拟阵列中的对角线或副对角线上的各虚拟阵元构成第三组目标阵元。优选地，所述目标虚拟阵列为非矩形阵列，所述从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元的过程，包括：从目标虚拟阵列中确定虚拟阵元数目最多的一行，由所述行中的各虚拟阵元构成第一组目标阵元；从目标虚拟阵列中确定虚拟阵元数目最多的一列，由所述列中的各虚拟阵元构成第二组目标阵元；从目标虚拟阵列中确定不在同一行且不在同一列的多个虚拟阵元，所述多个虚拟阵元的中心连成一直线，所述多个虚拟阵元中的相邻阵元在水平方向上的间隔一致，且所述多个虚拟阵元中的相邻阵元在竖直方向上的间隔一致。优选地，所述目标虚拟阵列中相邻目标阵元在水平方向上的距离满足下述方程式：其中，为所采用的毫米波的波长，为预设的最大不模糊测角范围。本申请第二方面提供了一种毫米波雷达二维角度计算装置，包括：目标阵元选取单元，用于从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元，其中，所述目标虚拟阵列分别在水平方向和竖直方向上均匀排布，第一组目标阵元包括至少两个在同一水平方向上的虚拟阵元，第二组目标阵元包括至少两个在同一竖直方向上的虚拟阵元，第三组目标阵元包括至少两个不在同一水平方向、且不在同一竖直方向上的虚拟阵元；单一角度确定单元，用于基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定各目标在水平方向的第一角度集合，基于所述第二组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在竖直方向的第二角度集合，以及基于所述第三组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在斜向的第三角度集合，其中，所述第一角度集合、所述第二角度集合和所述第三角度集合所包含的元素的个数相等，且均为目标的个数；角度匹配计算单元，用于基于回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定所述各目标的角度。本申请第三方面提供了一种毫米波雷达二维角度计算设备，包括：存储器和处理器；所述存储器，用于存储程序；所述处理器，用于执行所述程序，实现上述的毫米波雷达二维角度计算方法的各个步骤。本申请第四方面提供了一种存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时，实现如上述的毫米波雷达二维角度计算方法的各个步骤。经由上述的技术方案可知，本申请首先从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元。其中，所述目标虚拟阵列分别在水平方向和竖直方向上均匀排布，亦即目标虚拟阵列在同一水平方向上的各虚拟阵元间隔一致，以及目标虚拟阵列在同一竖直方向上的各虚拟阵元间隔一致。然后，基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在水平方向的第一角度集合；基于所述第二组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在竖直方向的第二角度集合；以及基于所述第三组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在斜向的第三角度集合。其中，所述第一角度集合、所述第二角度集合和所述第三角度集合所包含的元素的个数相等，且均为目标的个数。由于第一组目标阵元包括至少两个在同一水平方向上的虚拟阵元，第二组目标阵元包括至少两个在同一竖直方向上的虚拟阵元，第三组目标阵元包括至少两个不在同一水平方向、且不在同一竖直方向上的虚拟阵元，因此，所述第一角度集合中的各第一角度体现了目标在水平方向上的角度信息，所述第二角度集合中的各第二角度体现了目标在竖直方向上的角度信息，所述第三角度集合中的各第三角度体现了目标在水平方向以及竖直方向上的关联信息。最后，基于预设的回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定各目标的角度。本申请仅采用部分虚拟阵元来进行计算，很大程度地减少了非必要信息的计算，且目标虚拟阵列中阵元数目的增加不会增加计算量，计算过程简单，能够较为高效地完成目标角度的二维角度估算。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据提供的附图获得其他的附图。图1示例了本申请实施例公开的收发阵列和虚拟阵列的示意图；图2为本申请实施例公开的毫米波雷达二维角度计算方法的示意图；图3示例了本申请实施例公开的对各组目标阵元的一种选取方式；图4示例了本申请实施例公开的对各组目标阵元的另一种选取方式；图5示例了本申请实施例公开的非矩形阵列中的各组目标阵元；图6为本申请实施例公开的毫米波雷达二维角度计算装置的示意图；图7为本申请实施例公开的毫米波雷达二维角度计算设备的示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。为便于理解，下面首先介绍本申请提供的毫米波雷达二维角度计算方法所采用的天线阵列。请参阅图1的左部，本申请实施例提供的天线阵列采用了均匀的面阵设计，其包括竖直方向上均匀排布的5个发射天线，以及水平方向上均匀排布的5个接收天线，该天线阵列以多发多收的工作模式应用于毫米波雷达系统中。其中，多发多收是指雷达的天线面板使用按照一定的设计排布的多个发射天线和多个接收天线来完成电磁波信号的发射和接收，这种方法能以产生虚拟孔径的方式实现更高的分辨率，以实现天线孔径的拓展。请参阅图1的右部，上述天线阵列中的5个发射天线和5个接收天线可以产生25个虚拟阵元，假设相邻的接收天线在水平方向上的距离为，相邻的发射天线在竖直方向上的距离为，那么，水平方向上的最大不模糊测角的范围可以由下述方程式计算得到： 竖直方向上的最大不模糊测角的范围可以由下述方程式计算得到： 其中，为所采用的毫米波的波长。假如取值为0.5，那么对应的水平方向上的最大不模糊测角的范围为。下面介绍本申请实施例提供的毫米波雷达二维角度计算方法。请参阅图2，本申请实施例提供的毫米波雷达二维角度计算方法可以包括如下步骤：步骤S101，从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元。其中，目标虚拟阵列分别在水平方向和竖直方向上均匀排布，第一组目标阵元包括至少两个在同一水平方向上的虚拟阵元，第二组目标阵元包括至少两个在同一竖直方向上的虚拟阵元，第三组目标阵元包括至少两个不在同一水平方向、且不在同一竖直方向上的虚拟阵元。示例性地，基于图1所示的目标虚拟阵列，可以选取目标阵元如图3或图4所示。可以理解的是，本申请所实施例提供的天线阵列仅仅是示例性的，事实上，天线阵列所产生的目标虚拟阵列只要满足以下条件：在水平方向上包含至少两个虚拟阵元，在竖直方向上包含至少两个虚拟阵元，以及在非水平方向、非竖直方向上包含至少两个虚拟阵元，即可运用本申请实施例所提供的毫米波雷达二维角度计算方法。步骤S102，基于每一组目标阵元中各虚拟阵元的回波数据矩阵，确定各目标在这一组目标阵元对应的方向下的角度集合。具体地，基于第一组目标阵元中各虚拟阵元的回波数据矩阵，确定各目标在水平方向的第一角度集合；基于第二组目标阵元中各虚拟阵元的回波数据矩阵，确定各目标在竖直方向的第二角度集合；以及基于第三组目标阵元中各虚拟阵元的回波数据矩阵，确定各目标在斜向的第三角度集合。可以理解的是，第一角度集合、第二角度集合和第三角度集合所包含的元素的个数相等，且均为目标的个数。其中，车载毫米波雷达一般使用线性调频连续波，对于雷达的原始回波数据，有多少个虚拟阵元，就对应有多少个回波数据矩阵，比如图1中对应的虚拟阵元，雷达单帧观测下可以得到25个雷达回波数据矩阵，每个雷达回波数据矩阵的大小均为，其中，为单个chirp信号下每个接收天线中ADC的采样点数，为单帧下单个天线发射的chirp数。由于第一组目标阵元为目标虚拟阵列中的、在同一水平方向上的虚拟阵元，因此第一组目标阵元中各虚拟阵元的回波数据矩阵包含了水平方向上的角度信息，即第一角度为目标在水平方向上的角度；同样地，由于第二组目标阵元为目标虚拟阵列中的、在同一竖直方向上的虚拟阵元，因此第二组目标阵元中各虚拟阵元的回波数据矩阵包含了竖直方向上的角度信息，即第二角度为目标在竖直方向上的角度；由于第三组目标阵元为目标虚拟阵列中的、不在同一水平方向、且不在同一竖直方向上的虚拟阵元，因此第三组目标阵元中各虚拟阵元的回波数据矩阵包含了水平方向以及竖直方向上的联合信息，即第三角度为目标在第三组目标阵元中各虚拟阵元所连成的直线的方向上的角度。基于此，结合每一组目标阵元中各虚拟阵元的回波数据矩阵，使用FFT或者波束成形的方法可以计算得到各目标在这一组目标阵元对应的方向下的角度集合。步骤S103，基于回波信号的计算公式、第一角度集合、第二角度集合和第三角度集合，确定各目标的角度。由于第三角度集合联合了各目标在水平方向以及竖直方向上的信息，第一角度集合、第二角度集合则分别表征了各目标在水平方向、竖直方向上的角度信息，那么利用第一角度和第二角度来描述第三组目标阵元的回波信号，则可以确定出第一角度与第二角度的角度匹配情况，进而根据匹配好的第一角度和第二角度，确定出目标的角度。本申请首先从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元。其中，所述目标虚拟阵列分别在水平方向和竖直方向上均匀排布，亦即目标虚拟阵列在同一水平方向上的各虚拟阵元间隔一致，以及目标虚拟阵列在同一竖直方向上的各虚拟阵元间隔一致。然后，基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在水平方向的第一角度集合；基于所述第二组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在竖直方向的第二角度集合；以及基于所述第三组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在斜向的第三角度集合。其中，所述第一角度集合、所述第二角度集合和所述第三角度集合所包含的元素的个数相等，且均为目标的个数。由于第一组目标阵元包括至少两个在同一水平方向上的虚拟阵元，第二组目标阵元包括至少两个在同一竖直方向上的虚拟阵元，第三组目标阵元包括至少两个不在同一水平方向、且不在同一竖直方向上的虚拟阵元，因此，所述第一角度集合中的各第一角度体现了目标在水平方向上的角度信息，所述第二角度集合中的各第二角度体现了目标在竖直方向上的角度信息，所述第三角度集合中的各第三角度体现了目标在水平方向以及竖直方向上的关联信息。最后，基于预设的回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定各目标的角度。本申请仅采用部分虚拟阵元来进行计算，很大程度地减少了非必要信息的计算，且目标虚拟阵列中阵元数目的增加不会增加计算量，计算过程简单，能够较为高效地完成目标角度的二维角度估算。在本申请的一些实施例中，该目标虚拟阵列为一矩形阵列，上述步骤S101从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元的过程，可以包括：S1，由目标虚拟阵列中任意一行中的各虚拟阵元构成第一组目标阵元。S2，由目标虚拟阵列中任意一列中的各虚拟阵元构成第二组目标阵元。S3，由目标虚拟阵列中的对角线或副对角线上的各虚拟阵元构成第三组目标阵元。其中，为了最大限度地利用天线阵列中的虚拟阵元，可以分别在同一水平方向上、同一竖直方向上以及对角线或副对角线上取尽量多的虚拟阵元，选取的虚拟阵元越多，孔径越大，从而分辨率越好。即，相对于图4所示的各组目标阵元的选取方式，图3的方案会具有更高的分辨率。具体地，对于类似图1所示的均匀排布的二维收发阵列，有角分辨率计算公式： 其中，为行/列上的虚拟阵元的个数，D 为两阵元之间的间距，为孔径大小，此处等于，为载频对应的波长，此处取77GHz对应的波长，为与雷达法线的夹角。于是由公式可知孔径越大，角分辨率越高，即能够分辨出角度相距更接近的目标。在本申请的一些实施例中，上述提及的目标虚拟阵列可以不是矩形阵列，如图5所示，该目标虚拟阵列至少包含有两个水平方向的虚拟阵元以完成水平方向的测角，两个竖直方向的虚拟阵元以完成竖直方向的测角，以及两个不在同一水平且不在同一竖直方向的虚拟阵元以得到两个方向关联的信息。基于此，在本申请的一些实施例中，该目标虚拟阵列为非矩形阵列，上述步骤S101从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元的过程，可以包括：S1，从目标虚拟阵列中确定虚拟阵元数目最多的一行，由这一行中的各虚拟阵元构成第一组目标阵元。S2，从目标虚拟阵列中确定虚拟阵元数目最多的一列，由这一列中的各虚拟阵元构成第二组目标阵元。S3，从目标虚拟阵列中确定不在同一行且不在同一列的多个虚拟阵元，这些多个虚拟阵元的中心连成一直线，这些多个虚拟阵元中的相邻阵元在水平方向上的间隔一致，且这些多个虚拟阵元中的相邻阵元在竖直方向上的间隔一致。在本申请的一些实施例中，上述步骤S102基于第一组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在水平方向的第一角度集合的过程，可以包括：S1，对第一组目标阵元中各虚拟阵元的各回波数据矩阵进行2D-FFT，得到各距离-多普勒谱矩阵。S2，对各距离-多普勒谱矩阵进行非相关累积处理，得到累积之后的距离-多普勒谱矩阵。S3，对该累积之后的距离-多普勒谱矩阵进行CFAR检测，得到目标的距离和速度索引。S4，基于各距离-多普勒谱矩阵以及目标的距离和速度索引，确定目标的第一角度集合。示例性地，可以基于该距离-多普勒谱矩阵以及目标的距离和速度索引，通过找极值等方法确定目标的第一角度集合。一般而言，因为上述各回波数据矩阵是从单个距离和速度门下得到的，可以通过设置带宽等参数使得距离分辨率和速度分辨率足够小，例如，可以通过设置带宽等参数使得同一个距离和速度门下最多只允许有3个左右的目标，然后基于此准则以及设定的阈值，找出第一组目标阵元对应的角度。同样地，参考上述方法，可以确定出目标在竖直方向的第二角度集合以及在斜向的第三角度集合。可以理解的是，在确定第一角度集合、第二角度集合以及第三角度集合的过程中，上述步骤S1至S3可以合并进行，即在S1中对整个目标虚拟阵列中的各虚拟阵元的各回波数据矩阵进行2D-FFT，执行完S2和S3后得到目标的距离和速度索引。而在S4中，则选取各距离-多普勒谱矩阵中相应的元素来确定各角度集合。即，针对第一角度集合，选取各距离-多普勒谱矩阵中对应于第一组目标阵元的元素，结合目标的距离和速度索引，确定目标的第一角度集合；针对第二角度集合，选取各距离-多普勒谱矩阵中对应于第二组目标阵元的元素，结合目标的距离和速度索引，确定目标的第二角度集合；针对第三角度集合，选取各距离-多普勒谱矩阵中对应于第三组目标阵元的元素，结合目标的距离和速度索引，确定目标的第三角度集合。在本申请的一些实施例中，上述S4基于各距离-多普勒谱矩阵以及目标的距离和速度索引，确定目标的第一角度集合的过程，可以包括：S41，从各距离-多普勒谱矩阵中选取对应于目标的距离和速度索引的各元素。S42，基于各元素构建新的行数据。其中，每一元素在该行中的位置与该元素在原先的距离-多普勒谱矩阵中的位置一致。S43，对这些行数据进行FFT或波束成形处理，通过找极值得到目标的可能的角度，并由这些角度构成目标的第一角度集合。在本申请的一些实施例中，上述步骤S103基于回波信号的计算公式、第一角度集合、第二角度集合和第三角度集合，确定各目标的角度的过程，可以包括：S1，依据方程式完成第一角度集合中的第一角度和第二角度集合中的第二角度的匹配，得到互相匹配的角度组合：其中，每一角度组合包括一个第一角度和一个第二角度，每一角度组合对应有一个目标。为第三组目标阵元中的相邻目标阵元在水平方向上的距离，为第三组目标阵元中相邻目标阵元在竖直方向上的距离。例如，对于图3或图4中所示的第三组目标阵元，，。为第一角度集合中的第一角度，为第二角度集合中的第二角度，为第三角度集合中的第三角度。S2，将每一角度组合确定为一目标的角度。假设第一角度集合、第二角度集合以及第三角度集合各包含3个角度，分别为、、，经过上述匹配过程后得到三组角度组合，分别为、以及，则这三组角度组合分别对应有一目标。其中，上述方程式的获得是基于如下相位关系：对于特定目标，设其相对于雷达的水平方向角为 ，竖直方向角为，第三组目标阵元所在阵列测得的角为，则第三组目标阵元中各个阵元接收到的回波信号有两种等价的表示方式：对应于图3所示的虚拟矩阵，，，为载波频率的波长，对应于每个阵元，对于图3所示的虚拟阵列，=5。由于方程式和方程式是等价的，联立这两个式子，可以得到方程式。在本申请的一些实施例中，上述S1依据方程式完成第一角度集合中的第一角度和第二角度集合中的第二角度的匹配的过程，可以包括：S1，构造矩阵，通过下述方程式计算得到矩阵中的每个元素：S2，构造向量列表，通过下述方程式计算得到向量列表中的每个向量：S3，针对每一，确定与该的值最接近的目标，并将目标中的和确定为互相匹配的角度组合。其中，为目标的个数，为第一角度集合中的第一角度，为第二角度集合中的第二角度，为第三角度集合中的第三角度；为与对应的目标阵元，和与对应的目标阵元，在水平方向上的距离；为与对应的目标阵元，和与对应的目标阵元，在竖直方向上的距离。示例性地，对应于图3所示的虚拟矩阵，，。实际应用中，由于测角精度不够、系统误差等影响，前述关系式并不能严格相等，因此允许有一定的误差。上述实施例中的匹配过程可以用代码表示如下：首先，基于、以及方程式构造一个大小的待比较矩阵，基于以及方程式构造一个长度为的待比较向量：随后对向量中的值做遍历，将之与前述得到的矩阵中的元素做比较，找到与该值大小最接近的元素，该元素对应的α和β的值即为某个目标对应的水平和竖直方向的角度，从而完成配对。以上完成匹配后得到的List数组包含所有目标的匹配结果：每一行对应一个目标，每一行的第二列对应该目标的水平方向对应的角度，第三列对应该目标竖直方向对应的角度。下面对本申请实施例提供的毫米波雷达二维角度计算装置进行描述，下文描述的毫米波雷达二维角度计算装置与上文描述的毫米波雷达二维角度计算方法可相互对应参照。请参见图6，本申请实施例提供的毫米波雷达二维角度计算装置，可以包括：目标阵元选取单元21，用于从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元，其中，所述目标虚拟阵列分别在水平方向和竖直方向上均匀排布，第一组目标阵元包括至少两个在同一水平方向上的虚拟阵元，第二组目标阵元包括至少两个在同一竖直方向上的虚拟阵元，第三组目标阵元包括至少两个不在同一水平方向、且不在同一竖直方向上的虚拟阵元；单一角度确定单元22，用于基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定各目标在水平方向的第一角度集合，基于所述第二组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在竖直方向的第二角度集合，以及基于所述第三组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在斜向的第三角度集合，其中，所述第一角度集合、所述第二角度集合和所述第三角度集合所包含的元素的个数相等，且均为目标的个数；角度匹配计算单元23，用于基于回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定所述各目标的角度。在本申请的一些实施例中，所述目标虚拟阵列为一矩形阵列，目标阵元选取单元21从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元的过程，可以包括：由目标虚拟阵列中任意一行中的各虚拟阵元构成第一组目标阵元；由目标虚拟阵列中任意一列中的各虚拟阵元构成第二组目标阵元；由目标虚拟阵列中的对角线或副对角线上的各虚拟阵元构成第三组目标阵元。在本申请的一些实施例中，所述目标虚拟阵列为非矩形阵列，目标阵元选取单元21从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元的过程，可以包括：从目标虚拟阵列中确定虚拟阵元数目最多的一行，由所述行中的各虚拟阵元构成第一组目标阵元；从目标虚拟阵列中确定虚拟阵元数目最多的一列，由所述列中的各虚拟阵元构成第二组目标阵元；从目标虚拟阵列中确定不在同一行且不在同一列的多个虚拟阵元，所述多个虚拟阵元的中心连成一直线，所述多个虚拟阵元中的相邻阵元在水平方向上的间隔一致，且所述多个虚拟阵元中的相邻阵元在竖直方向上的间隔一致。在本申请的一些实施例中，所述目标虚拟阵列中相邻目标阵元在水平方向上的距离满足下述方程式：其中，为所采用的毫米波的波长，为预设的最大不模糊测角范围。在本申请的一些实施例中，单一角度确定单元22基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在水平方向的第一角度集合的过程，可以包括：对所述第一组目标阵元中各虚拟阵元的各回波数据矩阵进行二维快速傅里叶变换2D-FFT，得到距离-多普勒谱矩阵；对所述距离-多普勒谱矩阵进行非相关累积处理，得到累积之后的距离-多普勒谱矩阵；对所述累积之后的距离-多普勒谱矩阵进行恒虚警CFAR检测，得到目标的距离和速度索引；基于所述距离-多普勒谱矩阵以及目标的距离和速度索引，确定目标的第一角度集合。在本申请的一些实施例中，角度匹配计算单元23基于回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定所述各目标的角度的过程，可以包括：依据下述方程式完成所述第一角度集合中的第一角度和所述第二角度集合中的第二角度的匹配，得到互相匹配的角度组合：将每一角度组合确定为一目标的角度，每一角度组合包括一个第一角度和一个第二角度；其中，为所述第三组目标阵元中相邻目标阵元在水平方向上的距离，为所述第三组目标阵元中相邻目标阵元在竖直方向上的距离，为所述第一角度集合中的第一角度，为所述第二角度集合中的第二角度，为所述第三角度集合中的第三角度。在本申请的一些实施例中，角度匹配计算单元23依据下述方程式完成所述第一角度集合中的第一角度和所述第二角度集合中的第二角度的匹配的过程，可以包括：构造矩阵，通过下述方程式计算得到矩阵中的每个元素：构造向量列表，通过下述方程式计算得到向量列表中的每个向量：针对每一，确定与所述的值最接近的目标，并将目标中的和确定为互相匹配的角度组合；其中，为所述目标的个数，为所述第一角度集合中的第一角度，为所述第二角度集合中的第二角度，为所述第三角度集合中的第三角度；为与对应的目标阵元，和与对应的目标阵元，在水平方向上的距离；为与对应的目标阵元，和与对应的目标阵元，在竖直方向上的距离。本申请实施例提供的毫米波雷达二维角度计算装置可应用于毫米波雷达二维角度计算设备，如计算机等。可选的，图7示出了毫米波雷达二维角度计算设备的硬件结构框图，参照图7，毫米波雷达二维角度计算设备的硬件结构可以包括：至少一个处理器31，至少一个通信接口32，至少一个存储器33和至少一个通信总线34。在本申请实施例中，处理器31、通信接口32、存储器33、通信总线34的数量为至少一个，且处理器31、通信接口32、存储器33通过通信总线34完成相互间的通信；处理器31可能是一个中央处理器CPU，或者是特定集成电路ASIC，或者是被配置成实施本申请实施例的一个或多个集成电路等；存储器33可能包含高速RAM存储器，也可能还包括非易失性存储器等，例如至少一个磁盘存储器；其中，存储器33存储有程序，处理器31可调用存储器33存储的程序，所述程序用于：从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元，其中，所述目标虚拟阵列分别在水平方向和竖直方向上均匀排布，第一组目标阵元包括至少两个在同一水平方向上的虚拟阵元，第二组目标阵元包括至少两个在同一竖直方向上的虚拟阵元，第三组目标阵元包括至少两个不在同一水平方向、且不在同一竖直方向上的虚拟阵元；基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定各目标在水平方向的第一角度集合，基于所述第二组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在竖直方向的第二角度集合，以及基于所述第三组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在斜向的第三角度集合，其中，所述第一角度集合、所述第二角度集合和所述第三角度集合所包含的元素的个数相等，且均为目标的个数；基于回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定所述各目标的角度。可选的，所述程序的细化功能和扩展功能可参照上文描述。本申请实施例还提供一种存储介质，该存储介质可存储有适于处理器执行的程序，所述程序用于：从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元，其中，所述目标虚拟阵列分别在水平方向和竖直方向上均匀排布，第一组目标阵元包括至少两个在同一水平方向上的虚拟阵元，第二组目标阵元包括至少两个在同一竖直方向上的虚拟阵元，第三组目标阵元包括至少两个不在同一水平方向、且不在同一竖直方向上的虚拟阵元；基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定各目标在水平方向的第一角度集合，基于所述第二组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在竖直方向的第二角度集合，以及基于所述第三组目标阵元中各虚拟阵元的回波数据矩阵，确定所述各目标在斜向的第三角度集合，其中，所述第一角度集合、所述第二角度集合和所述第三角度集合所包含的元素的个数相等，且均为目标的个数；基于回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定所述各目标的角度。可选的，所述程序的细化功能和扩展功能可参照上文描述。综上所述：本申请首先从目标虚拟阵列中选取若干虚拟阵元以构成三组目标阵元。其中，所述目标虚拟阵列分别在水平方向和竖直方向上均匀排布，亦即目标虚拟阵列在同一水平方向上的各虚拟阵元间隔一致，以及目标虚拟阵列在同一竖直方向上的各虚拟阵元间隔一致。然后，基于所述第一组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在水平方向的第一角度集合；基于所述第二组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在竖直方向的第二角度集合；以及基于所述第三组目标阵元中各虚拟阵元的回波数据矩阵，确定目标在斜向的第三角度集合。其中，所述第一角度集合、所述第二角度集合和所述第三角度集合所包含的元素的个数相等，且均为目标的个数。由于第一组目标阵元包括至少两个在同一水平方向上的虚拟阵元，第二组目标阵元包括至少两个在同一竖直方向上的虚拟阵元，第三组目标阵元包括至少两个不在同一水平方向、且不在同一竖直方向上的虚拟阵元，因此，所述第一角度集合中的各第一角度体现了目标在水平方向上的角度信息，所述第二角度集合中的各第二角度体现了目标在竖直方向上的角度信息，所述第三角度集合中的各第三角度体现了目标在水平方向以及竖直方向上的关联信息。最后，基于预设的回波信号的计算公式、所述第一角度集合、所述第二角度集合和所述第三角度集合，确定各目标的角度。本申请仅采用部分虚拟阵元来进行计算，很大程度地减少了非必要信息的计算，且目标虚拟阵列中阵元数目的增加不会增加计算量，计算过程简单，能够较为高效地完成目标角度的二维角度估算。最后，还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间可以根据需要进行组合，且相同相似部分互相参见即可。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本申请。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本申请的精神或范围的情况下，在其它实施例中实现。因此，本申请将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
