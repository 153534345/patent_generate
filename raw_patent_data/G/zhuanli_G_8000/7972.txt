标题title
基于NSGAⅢ的高维多目标联合并行仿真优化方法
摘要abst
本发明属于结构与声学计算优化设计领域，涉及一种基于NSGAⅢ的高维多目标联合并行仿真优化方法。包括确定吸声结构的初始结构与优化方向；得到结构声学系数和吸声系数；确定主要参数；确定优化目标；生成一致性参考点；根据资源条件创建待优化文件；创建哨兵文件；种群初始化；求理想点；返回由经遗传运算生成的子代；非支配排序；选择前端解；判定终止条件输出最优解。本发明利用有限元仿真计算吸声体在特定频段的吸声系数，采用种群分割手段并行搜索声学原件最优构型，摆脱了传统经验设计的束缚、弥补了单目标优化遗传算法与带精英策略的快速非支配排序遗传算法优化目标较少，优化效果不佳的现状、解决了现行优化算法效率低下的问题。
权利要求书clms
1.一种基于NSGAⅢ的高维多目标联合并行仿真优化方法，其特征在于，包括如下步骤：步骤一、确定吸声结构的初始结构与优化方向，具体是指，基于渐变式空腔结构，通过优化空腔形状与相对位置提升整体吸声性能；步骤二、采用声管仿真方法得到待优化吸声结构的反射系数与透射系数，并求吸声系数；步骤三、确定材料参数与NSGAⅢ算法参数；所述材料参数包括：杨氏模量、泊松比、损耗因子、密度声速；所述NSGAⅢ算法参数包括：进化次数、种群规模、最大停止代数、交叉概率、变异概率；步骤四、构建优化目标模型；具体是指：以不同频段内吸声结构平均吸声系数最小为优化目标建立优化目标模型；步骤五、开始阶段根据自定义的种群个数与目标个数生成一致性参考点；步骤六、根据资源条件创建待优化文件，待优化文件包括命令文件和初始构型文件；命令文件内含有检测命令、加载命令、种群分割命令、参数修改命令、执行命令、数据提取命令、书写文件命令，删除数据命令的数据；初始构型文件包含有待优化吸声结构的初始构型数据；步骤七、创建哨兵文件，执行监测功能；所述哨兵文件有两个，哨兵文件由故障检测文件和初始构型文件构成；第一个哨兵文件中的故障检测文件由命令文件增加监测命令层构成，作用为在某个初始构型文件运行异常无法输出结果时替代此文件执行优化过程；第二个哨兵文件中的故障检测文件用以检测第一个哨兵文件运行状况，若发现第一个哨兵文件开始执行优化功能，则此文件开始执行与第一个哨兵文件一致的监测功能；步骤八、种群初始化；具体是指：利用主函数按照参数设置生成第一批种群变量，并将这批变量存储；读取变量数据调用对应的COMSOL开始运行，运行完毕后按照相应规则将结果值进行存储；待种群中的所有结果值读取完毕，返回至主函数；步骤九、求理想点；具体是指：提取种群适应度最小值，构造理想点，通过理想点将目标函数转化为自适应归一化函数；步骤十、返回由经遗传运算生成的子代；步骤十一、利用约束支配原则作为判定非线性不等式约束的准则进行非支配排序，形成的不同层的前端解；步骤十二、选择最后一个前端解，依次进行正则化、计算参考线、关联个体与参考点和选择生存环境的操作；步骤十三、判定判断终止条件，若达到条件，则输出Pareto最优解；否则，重复执行步骤八至步骤十二。2.根据权利要求1所述的一种基于NSGAⅢ的高维多目标联合并行仿真优化方法，其特征在于，所述步骤一包括：确定渐变式空腔结构待优化参数，所述待优化参数包括腔体厚度、声学覆盖层厚度、单胞元尺寸、空腔各插值点与腔壁的距离、空腔各插值点到点到中轴的半径、相邻插值点的垂直距离。3.根据权利要求1所述的一种基于NSGAⅢ的高维多目标联合并行仿真优化方法，其特征在于，所述步骤二具体是指，采用声管仿真方法得到待优化吸声结构的反射系数与透射系数，得到吸声结构的吸声系数α，其中α＝1-R2-T2；其中，R为通过有限元仿真提取的反射系数，T为透射系数；声管仿真依托于COMSOL有限元仿真，并利用含空腔的钢背衬周期单元模拟无限大样品结构，水域端设置PML层用以模拟无限远水域；在结构与水域的上下表面与左右表面分别设置Floquet周期性条件用以模拟无限大样品与水域。4.根据权利要求1所述的一种基于NSGAⅢ的高维多目标联合并行仿真优化方法，其特征在于，所述步骤四中的优化目标模型如下：其中，fi表示频率范围内吸声结构的平均吸声系数；αj是指相应频率范围内测得的吸声性能；K为插值点个数；rk是指第k个插值点到中轴的半径；rk,min是rk的下限；rk,max是rk的上限；hop是指相邻的插值点o和p的垂直距离；hop,min是hop的下限；hop,max是hop的上限；hi为第i个插值点到腔壁的距离；hmax为插值点到腔壁之和上限。5.根据权利要求1所述的一种基于NSGAⅢ的高维多目标联合并行仿真优化方法，其特征在于，所述步骤五具体是指：5.1)在M-1纬度的超平面空间上生成参考点，参考点个数为其中，M代表预定义的目标个数，H代表每单个目标被划分的份数；5.2)对于每一个xij∈X，存在ij下标表示在X中第i个组合的第j个元素；5.3)定义S1为参考点集，对于每个Sij∈S1和xij∈X，存在5.4)将S1作为边界层上的点集，定义S2为内层点集，对于每个S′ij∈S2和Sij∈S1，存在5.5)得到参考点集S＝S1∪S2。6.根据权利要求1所述的一种基于NSGAⅢ的高维多目标联合并行仿真优化方法，其特征在于，所述步骤六中，检测命令具体操作包括：6.1)检测命令：此命令用于检测固定路径下的文件产生情况，当NSGAⅢ主函数产生种群参数变量并存入相应的文本文件后，检测命令便会检测到此文件的产生，并进行下一步；6.2)加载命令：此命令承接上一步检测命令，用于提取文本文件中的参数；6.3)种群分割命令：此命令根据文件夹数量n，将种群分为n个亚种群；6.4)参数修改命令：此命令根据每个亚种群提取到的种群参数变量修改COMSOL中的结构参数；6.5)MATLAB with COMSOL执行命令：此命令承接上一步参数修改命令，当参数修改命令执行完毕后，接续执行初始构型文件运行命令；6.6)数据提取命令：此命令承接上一步执行命令，待初始构型文件运行完毕，提取仿真模型中的反射系数，并按照优化目标模型中的目标函数设置对反射系数进行转换；6.7)书写文本文件命令：此命令承接上一步数据提取命令，将提取到的数据以文本文件形式存储在预设的文件夹内；6.8)删除数据命令：此命令待6.1)～6.7)步执行完毕后接续执行，用于删除种群参数变量文件，避免种群进化后产生的新的种群参数变量与之前混淆；所述步骤十二中的各操作具体内容是指：①正则化：为了维持种群的多样性，保证后续解与参考点相互联系；由于每个解的各个目标函数尺度不一致，所以为了解的偏向性保持一致需要进行正则化处理：正则化的思想是对每个样本求其p范数，然后对样本中的元素除以该范数，这样的处理结果可以使每个处理后样本的范数p等于1；其中，p为范数：②关联个体与参考点：求解每个个体距最近参考点的距离，并计算除每个参考点最后一个前端之外的相关解决方案的数量；③选择生存环境：进行非支配排序、选择最后一个前端解、生成下一代。7.根据权利要求1所述的一种基于NSGAⅢ的高维多目标联合并行仿真优化方法，其特征在于，所述步骤八中具体是指，主函数按照参数设置生成第一批种群变量，并将这批变量存入变量文件；利用此前创建的命令文件依次读取变量文件，并调用对应的COMSOL开始运行，运行完毕后按照相应规则将结果值存入相应的文件，待种群中的所有结果值读取完毕，返回至主函数。8.根据权利要求1所述的一种基于NSGAⅢ的高维多目标联合并行仿真优化方法，其特征在于，所述步骤九的具体步骤包括：9.1)将种群St的理想点定义为的最小值，构造理想点将优化目标函数按照以下方式进行转化：9.2)求每个坐标轴额外点:9.3)利用额外点构建超平面，并求该面与坐标轴的截距ai；9.4)目标函数归一化9.根据权利要求1所述的一种基于NSGAⅢ的高维多目标联合并行仿真优化方法，其特征在于，所述步骤十一中判定非线性不等式约束的准则包括：若两个个体的变量都在约束范围内，则通过比较两个体的适应度值来确定支配关系，适应度值小的个体支配适应度值大的个体；若两个个体的变量一个处于约束范围内，一个处于约束范围外，则处于约束范围内个体支配处于约束范围外的个体；若两个个体的变量均处于约束范围外，则违背约束范围小的个体支配违背约束范围大的个体；若整个种群都处于约束范围内，则采用非支配排序方法；若整个种群一部分处于约束范围内，另一部分处于约束范围外，则前者执行常规的非支配排序方法，后者按照违背约束范围大小从小到大依次放在可行解最后一层的下几层；若整个种群均处于约束范围外，则根据违背约束范围大小从小到大依次排序。10.根据权利要求1所述的一种基于NSGAⅢ的高维多目标联合并行仿真优化方法，其特征在于，所述步骤六中，为防止运行过程中出现线程拥挤而无法加载参数数据、初始构型文件无法开启，加入try-catch函数；try-catch函数的运行规则为：首先执行try中的代码，若执行异常则catch会去捕获并执行catch中的代码；若未发生异常则catch捕获功能被忽略。
说明书desc
技术领域本发明属于结构与声学计算优化设计领域，具体涉及一种基于NSGAⅢ的高维多目标联合并行仿真优化方法。背景技术通过数十年减振降噪工程技术的发展，各国潜艇已在声辐射控制领域取得了长足进步，并逐渐迈入安静型潜艇行列，大大缩短了被探测距离，从而严重削弱了传统被动声纳的探测性能。而主动声纳可以主动向外发出声波，通过接受回声信号来探测目标，具有探测低噪声甚至完全安静目标的优势，因而得到重视。因此，从主动声纳探测技术方面考虑与之相对应的声隐身技术对于现代反潜作战有着及其现实且重要的意义。从降低目标强度的角度来看，目前主要采用外形声隐身、敷设吸声覆盖层、采用水声复合材料等等，这其中绕不开优化的问题。如何调整潜艇外形、如何规划吸声覆盖层内部结构、如何选取复合材料的铺层和角度等等都是目前研究的热点问题。然而，目前声学优化手段却较为单一，以声学覆盖层/超材料研制工作为例，目前常采用的参数化扫描、遗传算法、梯度/非梯度拓扑优化等均存在优化效率不高，优化效果不佳的问题。发明内容本发明的目的在于，针对目前声学原件优化设计过程中存在的优化效率不高，优化效果不好的现状，提供一种能够摆脱传统经验设计的束缚、解决现行优化算法效率低下问题，实现根据吸声目标主动设计构型的目标，为达到上述目的，本发明采用如下技术方案：一种基于NSGAⅢ的高维多目标联合并行仿真优化方法，包括如下步骤：步骤一、确定吸声结构的初始结构与优化方向，具体是指，基于渐变式空腔结构，通过优化空腔形状与相对位置提升整体吸声性能；步骤二、采用声管仿真方法得到待优化吸声结构的反射系数与透射系数，并求吸声系数；步骤三、确定材料参数与NSGAⅢ算法参数；所述材料参数包括：杨氏模量、泊松比、损耗因子、密度声速；所述NSGAⅢ算法参数包括：进化次数、种群规模、最大停止代数、交叉概率、变异概率；步骤四、构建优化目标模型；具体是指：以不同频段内吸声结构平均吸声系数最小为优化目标建立优化目标模型；步骤五、开始阶段根据自定义的种群个数与目标个数生成一致性参考点；步骤六、根据资源条件创建待优化文件，待优化文件包括命令文件和初始构型文件；命令文件内含有检测命令、加载命令、种群分割命令、参数修改命令、执行命令、数据提取命令、书写文件命令，删除数据命令；初始构型文件包含有待优化吸声结构的初始构型数据；步骤七、创建哨兵文件，执行监测功能；所述哨兵文件有两个，哨兵文件由故障检测文件和初始构型文件构成；第一个哨兵文件中的故障检测文件由命令文件增加监测命令构成，作用为在某个初始构型文件运行异常无法输出结果时替代此文件执行优化过程；第二个哨兵文件中的故障检测文件用以检测第一个哨兵文件运行状况，若发现第一个哨兵文件开始执行优化功能，则此文件开始执行与第一个哨兵文件一致的监测功能；步骤八、种群初始化；具体是指利用主函数按照参数设置生成第一批种群变量，并将这批变量存储；读取变量数据调用对应的COMSOL开始运行，运行完毕后按照相应规则将结果值进行存储；待种群中的所有结果值读取完毕，返回至主函数；步骤九、求理想点；具体是指：提取种群适应度最小值，构造理想点，通过理想点将目标函数转化为自适应归一化函数；步骤十、返回由经遗传运算生成的子代；步骤十一、利用约束支配原则作为判定非线性不等式约束的准则进行非支配排序，形成的不同层的前端解；步骤十二、选择最后一个前端解，依次进行正则化、计算参考线、关联个体与参考点和选择生存环境的操作；步骤十三、判定终止条件，若达到条件，则输出Pareto最优解；否则，重复执行步骤八至步骤十二。对前述基于NSGAⅢ的高维多目标联合并行仿真优化方的进一步完善或补充，所述步骤一包括：确定渐变式空腔结构待优化参数，所述待优化参数包括腔体厚度、声学覆盖层厚度、单胞元尺寸、空腔各插值点与腔壁的距离、空腔各插值点到点到中轴的半径、相邻插值点的垂直距离。对前述基于NSGAⅢ的高维多目标联合并行仿真优化方的进一步完善或补充，所述步骤二具体是指，采用声管仿真方法得到待优化吸声结构的反射系数与透射系数，得到吸声结构的吸声系数α，其中α＝1-R2-T2其中，R为通过有限元仿真提取的反射系数，T为透射系数；声管仿真依托于COMSOL有限元仿真，并利用含空腔的钢背衬周期单元模拟无限大样品结构，水域端设置PML层用以模拟无限远水域；在结构与水域的上下表面与左右表面分别设置Floquet周期性条件用以模拟无限大样品与水域。对前述基于NSGAⅢ的高维多目标联合并行仿真优化方的进一步完善或补充，所述步骤四中的优化目标模型如下：其中，fi表示频率范围内吸声结构的平均吸声系数；αj是指相应频率范围内测得的吸声性能；K为插值点个数；rk是指第k个插值点到中轴的半径；rk,min是rk的下限；rk,max是rk的上限；hop是指相邻的插值点o和p的垂直距离；hop,min是hop的下限；hop,max是hop的上限；hi为第i个插值点到腔壁的距离；hmax为插值点到腔壁之和上限。对前述基于NSGAⅢ的高维多目标联合并行仿真优化方的进一步完善或补充，所述步骤五具体是指：5.1)在M-1纬度的超平面空间上生成参考点，参考点个数为其中，M代表预定义的目标个数，H代表每单个目标被划分的份数；5.2)对于每一个xij∈X，存在ij下标表示在X中第i个组合的第j个元素；5.3)定义S1为参考点集，对于每个Sij∈S1和xij∈X，存在5.4)将S1作为边界层上的点集，定义S2为内层点集，对于每个S′ij∈S2和Sij∈S1，存在5.5)得到参考点集S＝S1∪S2。对前述基于NSGAⅢ的高维多目标联合并行仿真优化方的进一步完善或补充，所述步骤六中，检测命令用于检测固定路径下的文件产生情况；加载命令承接检测命令，用于提取参数；种群分割命令用于分割种群参数，根据文件数量分为多个亚种群；参数修改命令根据每个亚种群提取到的种群参数变量修改COMSOL中的结构参数；执行命令承接参数修改命令，用于执行运行命令；数据提取命令承接执行命令，用于提取仿真模型中的反射系数并对反射系数进行转换；书写文件命令承接数据提取命令，用于存储提取到的数据；删除数据命令用于删除种群参数变量文件，避免种群进化后产生的新的种群参数变量与之前混淆；所述步骤十二中的各操作具体内容是指：正则化：对每个样本求其p-范数，然后对样本中的元素除以该范数，使每个处理后样本的p-范数等于1；其中，p-范数：关联个体与参考点：求解每个个体距最近参考点的距离，并计算除每个参考点最后一个前端之外的相关解决方案的数量；选择生存环境：进行非支配排序、选择最后一个前端解、生成下一代。对前述基于NSGAⅢ的高维多目标联合并行仿真优化方的进一步完善或补充，所述步骤八中具体是指，主函数按照参数设置生成第一批种群变量，并将这批变量存入变量文件；利用此前创建的命令文件依次读取变量文件，并调用对应的COMSOL开始运行，运行完毕后按照相应规则将结果值存入相应的文件，待种群中的所有结果值读取完毕，返回至主函数。对前述基于NSGAⅢ的高维多目标联合并行仿真优化方的进一步完善或补充，所述步骤九的具体步骤包括：9.1)将种群St的理想点定义为的最小值，构造理想点将优化目标函数按照以下方式进行转化：9.2)求每个坐标轴额外点:9.3)利用额外点构建超平面，并求该面与坐标轴的截距ai；9.4)目标函数归一化对前述基于NSGAⅢ的高维多目标联合并行仿真优化方的进一步完善或补充，所述步骤十一中判定非线性不等式约束的准则包括：若两个个体的变量都在约束范围内，则通过比较两个体的适应度值来确定支配关系，适应度值小的个体支配适应度值大的个体；若两个个体的变量一个处于约束范围内，一个处于约束范围外，则处于约束范围内个体支配处于约束范围外的个体；若两个个体的变量均处于约束范围外，则违背约束范围小的个体支配违背约束范围大的个体；若整个种群都处于约束范围内，则采用非支配排序方法；若整个种群一部分处于约束范围内，另一部分处于约束范围外，则前者执行常规的非支配排序方法，后者按照违背约束范围大小从小到大依次放在可行解最后一层的下几层；若整个种群均处于约束范围外，则根据违背约束范围大小从小到大依次排序。对前述基于NSGAⅢ的高维多目标联合并行仿真优化方的进一步完善或补充，所述步骤六中，为防止运行过程中出现线程拥挤而无法加载参数数据、初始构型文件无法开启，加入try-catch函数；try-catch函数的运行规则为：首先执行try中的代码，若执行异常则catch会去捕获并执行catch中的代码；若未发生异常则catch捕获功能被忽略。本发明的有益效果是：本发明的基于NSGAⅢ的高维多目标联合并行仿真优化方法，该方法利用有限元仿真计算吸声体在特定频段的吸声系数，然后基于未开源的NSGAⅢ算法，将特定频段分为多个小频段，每个频段的平均吸声系数作为目标，同时采用种群分割手段并行搜索声学原件最优构型。本发明根据目前声学材料宽频带高吸声的要求，自动寻找各频段均达到最优的新构型；此方案摆脱了传统经验设计的束缚、弥补了单目标优化遗传算法算法与带精英策略的快速非支配排序遗传算法优化目标较少，优化效果不佳的现状、解决了现行优化算法效率低下的问题，实现了根据吸声目标主动设计构型的目标；此外，此发明不仅仅适用于吸声结构优化问题，也可适用于其他声振优化问题，同时可拓展至所有有限元优化问题。附图说明图1是基于NSGAⅢ的高维多目标联合并行仿真优化方的流程示意图；图2是实施例中渐变式空腔吸声结构各向示意图一；图3是实施例中渐变式空腔吸声结构示意图二；图4是COMSOL有限元仿真空腔单元模型；图5是联合并行仿真优化的结构优化过程示意图；图6是基于方案一的仿真优化的结构汇总示意图一；图7是基于方案二的仿真优化的结构汇总示意图二；图8是联合并行仿真优化的结构汇总示意图三；图9是实施例中基于方案一的联合并行仿真优化的结果；图10是实施例中基于方案二的联合并行仿真优化的结果；图11是实施例中基于本申请的联合并行仿真优化的结果。具体实施方式本申请的基于NSGAⅢ的高维多目标联合并行仿真优化方基于NSGAⅢ框架，适用于小规模声振优化问题，且可拓展至所有小规模有限元优化问题。本方法通过自行建立的MATLAB with COMSOL联合并行仿真方法，借助NSGAⅢ算法理念，建立了一种多目标MATLABwith COMSOL联合并行仿真优化方法，大大提高了声学优化的效率，并解决了目前此类问题优化效果不佳的现状。以下以某X型设备的XX吸声结构进行实际优化，结合具体实施过程对本申请的具体步骤进行详细说明，具体步骤如下：步骤一：确定吸声结构的初始结构与优化方向。如图2所示，选择渐变式空腔结构，通过优化空腔形状与相对位置提升整体吸声性能。本实施例中，某X型设备的XX吸声结构的钢板厚度10mm，声学覆盖层厚度40mm，整个单胞元的长宽均为40mm，h1代表空腔第一个插值点到钢板距离，r1代表第一个插值点到中轴的半径，h2代表空腔第二个插值点到第一个插值点的垂直距离，r2代表第二个插值点到中轴的半径，h3代表空腔第三个插值点到第二个插值点的垂直距离，r3代表第三个插值点到中轴的半径。h1、h2、h3、r1、r2和r3均为待优化参数，参数范围如表1所示。此外，图2只展示了此型结构的一种形式，随着参数的改变，它还可能形成如图3所示的几种结构。表1待优化参数范围步骤二：采用声管仿真方法得到待优化吸声结构的反射系数与透射系数，并利用式得到吸声结构的吸声系数α。如图4所示，声管仿真依托于COMSOL有限元仿真平台，并利用含空腔的钢背衬周期单元模拟无限大样品结构，水域端设置PML层用以模拟无限远水域。此外，由于透射一侧的介质为空气，透射系数幅值很小，故而钢板背侧可近似为自由边界。在结构与水域的上下表面与左右表面分别设置Floquet周期性条件用以模拟无限大样品与水域。同时，平面波正入射到覆盖层一侧，入射频率为1kHz～3kHz，步长为100Hz；且α＝1-R2-T2；其中，R为通过有限元仿真提取的反射系数，T为透射系数。由于T＜＜0，所以式可直接表示为α＝1-R2；步骤三：确定材料参数与NSGAⅢ算法主要参数，材料参数如表2所示，NAGAⅢ算法主要参数设置为：进化次数——20，种群规模——30，最大停止代数——20，交叉概率——0.8，变异概率——0.2，同时并行7个COMSOL的声学-频域模块。其中，进化次数是根据初始构型文件大小制定的，倘若为了优化结果收敛性更好，可以增加进化次数；种群规模一般取30-200；最大停止代数对标进化次数，当进化次数较少时可以与进化次数保持一致；交叉概率、变异概率为遗传算法默认参数设置。此外，为了横向比较本发明的优势，同步创建了方案一联合MATLAB with COMSOL)与方案二联合MATLAB with COMSOL)，参数设置与实施例方案一致。表2材料参数材料杨氏模量泊松比损耗因子密度声速基体1.4e80.490.481100-钢2.1e110.307800-水---10001500步骤四：构建优化目标模型，以不同频段内吸声结构平均吸声系数最小为优化目标建立优化目标模型；为提升吸声结构在1000～3000Hz的吸声性能，达到整体吸声性能最佳，所采用优化目标模型如下：其中，fi表示每300Hz结构的平均吸声系数，i＝1,2,3…。此外，方案一由于GA算法只能处理单目标问题，故目标函数简化为min f＝-1/21其中，f表示结构在1000～3000Hz频段内的平均吸声系数。步骤五：在进行优化的开始阶段根据自定义的种群个数与目标个数生成一致性参考点，布点方案为：5.1)在纬度的超平面空间上生成参考点，参考点个数为其中，M代表预定义的目标个数，H代表每单个目标被划分的份数；5.2)对于每一个xij∈X，下标ij表示X中第i个组合第j个元素，都存在5.3)定义S1为参考点集，对于每个Sij∈S1和xij∈X，都存在5.4)将S1作为边界层上的点集，定义S2为内层点集，对于每个S′ij∈S2和Sij∈S1，都存在：5.5)定义参考点集为S＝S1∪S2；步骤六：根据仿真模型大小测试其运行最低核数x，然后根据电脑实际可用核数t成批创建n个待优化文件夹，每个文件包括一个初始构型文件文件和一个命令文件；其中初始构型文件为待优化的吸声结构文件。命令文件中依次包括检测命令、加载命令、种群分割命令、参数修改命令、MATLAB with COMSOL执行命令、数据提取命令、书写文本文件命令，删除数据命令，具体操作如下：6.1)检测命令：此命令用于检测固定路径下的文件产生情况，当NSGAⅢ主函数产生种群参数变量并存入相应的文本文件后，检测命令便会检测到此文件的产生，并进行下一步；6.2)加载命令：此命令承接上一步检测命令，用于提取文本文件中的参数；6.3)种群分割命令：此命令根据文件夹数量n，将种群分为n个亚种群；6.4)参数修改命令：此命令根据每个亚种群提取到的种群参数变量修改COMSOL中的结构参数；6.5)MATLAB with COMSOL执行命令：此命令承接上一步参数修改命令，当参数修改命令执行完毕后，接续执行初始构型文件运行命令；6.6)数据提取命令：此命令承接上一步执行命令，待初始构型文件运行完毕，提取仿真模型中的反射系数，并按照优化目标模型中的目标函数设置对反射系数进行转换；6.7)书写文本文件命令：此命令承接上一步数据提取命令，将提取到的数据以文本文件形式存储在预设的文件夹内；6.8)删除数据命令：此命令待～步执行完毕后接续执行，用于删除种群参数变量文件，避免种群进化后产生的新的种群参数变量与之前混淆。此外，为防止运行过程中出现线程拥挤而无法加载参数数据、初始构型文件无法开启的情况，加入了函数使得此文件可完整运行。try-catch函数的运行规则为：首先执行try中的代码，若执行异常则catch会去捕获并执行catch中的代码；若未发生异常则catch捕获功能被忽略。步骤七：创建两个哨兵文件，每个文件包括一个监测文件和一个初始构型文件。第一个by1.m文件用以检测故障，在步骤六命令文件的基础上增加了一层监测命令，作用为在某个初始构型文件运行异常无法输出结果时替代此文件执行优化过程。第二个监测文件用以检测第一个“哨兵”文件运行状况，若发现第一个“哨兵”文件开始执行优化功能，则此文件开始执行与第一个“哨兵”文件一致的监测功能，“哨兵”运行流程如图5所示。步骤八：种群初始化。主函数按照参数设置生成第一批种群变量，并将这批变量存入n个文本文件；此前创建的n个命令文件依次读取这批文本文件，并调用对应的COMSOL开始运行，运行完毕后按照相应规则将结果值存入相应的文本文件；其中，方案一为单目标优化方法，结果值按照目标函数模型的形式进行储存，方案二与本发明为多目标优化方法，结果值按照优化目标模型中目标函数的设置形式进行储存。最后，NSGA-Ⅲ中的适应度函数读取文本文件中的结果值，待种群中的所有结果值读取完毕，返回至主函数。步骤九：求理想点，提取种群适应度最小值，构造出一个理想点，通过此理想点将目标函数转化为自适应归一化函数，具体操作如下：9.1)将种群St的理想点定义为的最小值构造出一个理想点并将目标函数按照式转化：9.2)求每个坐标轴额外点:9.3)利用额外点构建超平面，并求该面与坐标轴的截距ai；9.4)目标函数归一化：步骤十：返回由经遗传运算生成的子代，子代适应度值计算规则与种群初始化过程一致，但为了避免子种群与父种群参数混淆，加入了实时清除参数文件与结果文件的命令。进而，对产生的子种群进行约束支配关系判定与求理想点的操作。步骤十一：非支配排序，基于约束支配关系进行非支配排序，利用约束支配原则作为判定非线性不等式约束的准则，具体执行过程为：若两个个体的变量都在约束范围内，则通过比较两者的适应度值来确定支配关系，适应度值小的支配适应度值大的。若两个个体的变量一个处于约束范围内，一个处于约束范围外，则前者支配后者。若两个个体的变量均处于约束范围外，则违背约束范围小的支配违背约束范围大的。根据上述原则，可确定非支配排序的等级，若整个种群都处于约束范围内，则采用常规的非支配排序方法。若整个种群一部分处于约束范围内，另一部分处于约束范围外，则前者执行常规的非支配排序方法，后者按照违背约束范围大小从小到大依次放在可行解最后一层的下几层。若整个种群均处于约束范围外，则根据违背约束范围大小从小到大依次排序。步骤十二：选择最后一个前端解，前端解是一个集，其中记录了一个种群中个体按照非支配排序后形成的不同层的前沿pareto解，这其中依次进行正则化、计算参考线、关联个体与参考点和选择生存环境等操作。①正则化——为了维持种群的多样性，保证后续解与参考点相互联系；由于每个解的各个目标函数尺度不一致，所以为了解的偏向性保持一致需要进行正则化处理：正则化的思想是对每个样本求其p范数，然后对样本中的元素除以该范数，这样的处理结果可以使每个处理后样本的p范数等于1；其中，p范数：②关联个体与参考点——求解每个个体距最近参考点的距离，并计算除每个参考点最后一个前端之外的相关解决方案的数量。③选择生存环境——进行非支配排序、选择最后一个前端解、生成下一代。步骤十三：判定终止条件——即是否达到最大进化次数20，若达到条件，则输出Pareto最优解；否则，重复执行步骤八-步骤十二。经过20次迭代循环，三种方案终止，其中方案一用时12.84小时，方案二用时12.66小时，本申请的方案总共用时2.01小时，效率较方案一提升了6.36倍，较方案二提升了6.28倍。但这并不是本发明的全部优势，因为优化效率会随着并行COMSOL的数量的增加而成倍数提升，这就意味着电脑的实际可用核数越多，优化效率提升越大。此外，表4展示了优化后的参数，图6～图8展示了优化后的结构，图9～11展示了部分优化后的结果。表4优化后的参数经过比较，方案一作为单目标优化方案仅给出了一个最优解，而采用Pareto最优解的方案二、三则给出了多组最优方案。可以看出，三种方案都能优化得到较好的结果，优化结果吸声系数峰值接近1，整频段平均吸声系数在0.78左右，但方案二与本申请所得结果在多样性方面较方案一有显著优势。此外，本申请较方案二优，本申请在保证整体宽频带吸声性能的同时对所划分的7个频段均有侧重；而方案二虽也能保证整体宽频带吸声性能，但由于算法本身的缺陷只能重点优化前3个频段，无法完全兼顾后4个频段。综合效率与优化效果，本申请具有显著优势。
