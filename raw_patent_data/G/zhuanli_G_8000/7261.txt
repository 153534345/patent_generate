标题title
一种基于矢量数据前端展示的实时脱密化方法
摘要abst
本发明公开了一种基于矢量数据前端展示的实时脱密化方法，包括PostGIS空间数据库及PostGIS数据库中的矢量数据，所述PostGIS空间数据库包括有创建数据库模块、矢量数据存储模块、检索切割数据模块、栅格瓦片渲染模块及栅格数据图像化模块，所述PostGIS数据库中的矢量数据包括有展示条件C、生成标识K、检索数据联合操作U、瓦片坐标范围B及栅格化数据R，所述矢量数据是记录实体坐标及关系而表现出精确的电、线、几何体的地理位置所在的坐标；本发明与传统矢量数据前端展示的实时脱密化方法相比，达到了所有筛选、栅格化、切图操作均发生在数据库服务中，依赖其强大的底层运算能力，实现实时响应的效果。
权利要求书clms
1.一种基于矢量数据前端展示的实时脱密化方法，其特征在于：包括PostGIS空间数据库及PostGIS数据库中的矢量数据，所述PostGIS空间数据库包括有创建数据库模块、矢量数据存储模块、检索切割数据模块、栅格瓦片渲染模块及栅格数据图像化模块，所述PostGIS数据库中的矢量数据包括有展示条件C、生成标识K、检索数据联合操作U、瓦片坐标范围B及栅格化数据R，所述矢量数据是记录实体坐标及关系而表现出精确的电、线、几何体的地理位置所在的坐标，所述栅格数据是按照行和列排列组织的一些像元集合；具体包括下列步骤：S1、首先对前端用户的当前的展示及条件展示要求生成标识，记作K；S2、对空间数据表Table_X进行以C为条件的检索，将检索结果的空间地理数据进行Union操作，记作U；S3、然后将产品U与标识K配对存入中间表Table_M，插入成功后反馈至前端；S4、前端收到反馈后，依WMS_1.3.0协议，发起以K为标识的栅格请求，经后台接口对每个请求的瓦片坐标范围进行解析后，从PostGIS数据库的Table_M表中标识为K的空间数据U进行栅格化得到R；S5、最后根据瓦片坐标范围B，以及预置的配色样式切R得到PNG图片的字节流S，经后端接口，馈至前端，在WEB端进行栅格瓦片渲染，实现实时的、条件式的“切图”。2.根据权利要求1所述的一种基于矢量数据前端展示的实时脱密化方法，其特征在于：所述创建数据库模块是指利用PostGIS创建空间数据库，在前端展示中新建数据库，添加PostGIS扩展，使得新建数据库支持空间类型，然后进入数据库导入数据，创建数据库完成，所述创建数据库模块采用创建空间数据库的方法包括有一是利用Navicat Premium 15连接PostgreSQL数据库，通过postgis默认空间数据库做模板来创建新的空间数据；二是通过PostgreSQL的管理工具pgAdmin来创建空间数据库；三是通过SQL语句创建。3.根据权利要求1所述的一种基于矢量数据前端展示的实时脱密化方法，其特征在于：所述矢量数据存储模块是采用分布式SQL数据库对矢量数据进行存储，所述矢量数据是指矢量空间数据，在GIS中包括点、线、面及几何体类型的坐标，矢量数据用于编辑、更新、查询场景，采用分布式SQL数据库作为存储矢量数据的核心存储，不仅满足SQL查询实时矢量数据，还能使用Postgres-XL集群技术对原有数据进行分布式升级。4.根据权利要求1所述的一种基于矢量数据前端展示的实时脱密化方法，其特征在于：所述检索切割数据模块是通过条件C对空间数据库中的目标数据标记为K检索出来，与条件C筛选出来的空间数据几何体融合为U，对几何体融合为U的数据进行切割成片处理，所述检索数据是把数据库中储存的数据根据用户的需求条件提取出来，生成空间数据表Table，所述切割数据是对空间数据表Table上的数据进行分割，把数据从逻辑上分割成能独立管理的物理碎片单元存储起来，便于重构、重组、灵活的创建索引。5.根据权利要求1所述的一种基于矢量数据前端展示的实时脱密化方法，其特征在于：所述栅格瓦片渲染模块指对几何体U进行栅格化处理，提取WMS瓦片参数，基于提取的瓦片参数对栅格化处理的几何体U进行样式化渲染，栅格化是将矢量图形转换成位图的过程，栅格化是生成实时三维计算机图形的渲染算法，WMS栅格瓦片是三维城市构建器的全局图层，支持独立的样式和数据配置，所述WMS瓦片参数包括与渲染顺序、图形透明度、图形HSB调整及WMS栅格服务交互，图形透明度有透明度系数，取值范围在0至1之间，所述HSB包括色调、饱和度以及亮度。6.根据权利要求1所述的一种基于矢量数据前端展示的实时脱密化方法，其特征在于：所述栅格数据图像化模块指栅格化后的数据进行图像化转换，利用后端栅格化算法处理矢量数据，把处理完的瓦片坐标数据进行坐标转换成图形像素点对应的经纬度坐标转换，在前端显示成PNG格式的文件，所述PNG格式是一种采用无损压缩算法的位图格式，关于转化PNG格式的字节流是指在数据传输中，传输数据的最基本单位是字节的流，用于处理二进制数据，不包含边界数据的连续流，所述图像化是将三维瓦片坐标的信息制作图像的进程，用来感知图像中的信息。7.根据权利要求1所述的一种基于矢量数据前端展示的实时脱密化方法，其特征在于：具体的操作判定图像响应步骤如下：A1、首先由前端页面发起检索请求，提取检索条件C的同时生成临时标识K，根据检索条件C筛选空间数据行，将几何体融合为U，把临时标识K与几何体融合U进行配对组合；A2、然后配对组合中判断几何融合U是否为空几何体，若是判断几何融合U是空几何体，则响应结束，图面无更新，显示无结果；A3、若是判断几何融合U不是空几何体，则插入临时表，对几何体U进行栅格化得到R，检索响应结束，发起图层更新要求；A4、提取WMS瓦片参数B，根据B对格栅R进行切割和样式化，转化为PNG格式的文件字节流S；A5、最后将PNG字节流S渲染至WEB页面，实现画面更新，此时瓦片响应结束。
说明书desc
技术领域本发明涉及矢量数据前端展示技术领域，更具体地说，本发明涉及一种基于矢量数据前端展示的实时脱密化方法。背景技术为了响应农业农村部队数据共享的号召和要求，实现农业农村领域空间数据的在线汇总和管理，需要把宅基地、农房、农田保护区、建设规划用地等各类矢量图斑数据在WEB端进行可视化展示，然而根据国家相关法律法规，此类矢量数据是不能以坐标数值的形式进行网络传输，必须进行脱密化处理，因此只能以“切图”，即栅格化，的方式在WEB端地图应用中进行渲染。目前主流的栅格化的实现方式有两种，其一是完全静态的预先生成好以图像形式存在的瓦片供前端调用，完全无法支持局部的、条件式的、差异化的显示以及图斑的增加、删除、修改坐标位置；另一种要依赖静态文件形式的矢量数据，当用户对图斑进行基于属性、空间关系进行筛选时，运算压力聚结于JAVA接口中，无法提供足够的实时性和并发性，同时对矢量图斑的临时增加、删除、改变坐标位置的需求会引发静态文件的重新生成，这方面的性能更加受限。因此，本专利尝试一种不一样的矢量数据栅格化的实现方式，即矢量数据的存储、“增删改”、筛选、栅格化全部发生在PostGIS空间数据库内，利用数据库本身对空间数据的“增删改查”的灵活性、便利性、快捷性，实现对WEB端用户操作的实时的、并发式的响应。发明内容为了克服现有技术的上述缺陷，本发明提供一种基于矢量数据前端展示的实时脱密化方法，在基于源代码插桩方式克服了源代码提取困难的问题，便于后续函数图的输出与混合动态建模方法，在基于多节点自动建模的分析方法过程保证了建模分析数据的精准性，以解决上述背景技术中提出的问题。为实现上述目的，本发明提供如下技术方案：一种基于矢量数据前端展示的实时脱密化方法，包括PostGIS空间数据库及PostGIS数据库中的矢量数据，所述PostGIS空间数据库包括有创建数据库模块、矢量数据存储模块、检索切割数据模块、栅格瓦片渲染模块及栅格数据图像化模块，所述PostGIS数据库中的矢量数据包括有展示条件C、生成标识K、检索数据联合操作U、瓦片坐标范围B及栅格化数据R，所述矢量数据是记录实体坐标及关系而表现出精确的电、线、几何体的地理位置所在的坐标，所述栅格数据是按照行和列排列组织的一些像元集合；具体包括下列步骤：S1、首先对前端用户的当前的展示及条件展示要求生成标识，记作K，目的是把用户筛选条件及筛选数据进行标记；S2、对空间数据表Table_X进行以C为条件的检索，将检索结果的空间地理数据进行Union操作，记作U，目的是把条件C与标识K运用Union操作进行融合；S3、然后将产品U与标识K配对存入中间表Table_M，插入成功后反馈至前端，目的是通过后端Union操作处理反馈到前端显示；S4、前端收到反馈后，依WMS_1.3.0协议，发起以K为标识的栅格请求，经后台接口对每个请求的瓦片坐标范围进行解析后，从PostGIS数据库的Table_M表中标识为K的空间数据U进行栅格化得到R，目的是把接收的数据进行栅格化处理；S5、最后根据瓦片坐标范围B，以及预置的配色样式切R得到PNG图片的字节流S，经后端接口，馈至前端，在WEB端进行栅格瓦片渲染，实现实时的、条件式的“切图”，目的是经过栅格化处理后进行渲染像素。进一步的，所述创建数据库模块是指利用PostGIS创建空间数据库，在前端展示中新建数据库，添加PostGIS扩展，使得新建数据库支持空间类型，然后进入数据库导入数据，创建数据库完成，所述创建数据库模块采用创建空间数据库的方法包括有一是利用Navicat Premium 15连接PostgreSQL数据库，通过postgis默认空间数据库做模板来创建新的空间数据；二是通过PostgreSQL的管理工具pgAdmin来创建空间数据库；三是通过SQL语句创建，目的是创建空间数据库。进一步的，所述矢量数据存储模块是采用分布式SQL数据库对矢量数据进行存储，所述矢量数据是指矢量空间数据，在GIS中包括点、线、面及几何体类型的坐标，矢量数据用于编辑、更新、查询场景，采用分布式SQL数据库作为存储矢量数据的核心存储，不仅满足SQL查询实时矢量数据，还能使用Postgres-XL集群技术对原有数据进行分布式升级，目的是提供强大运算能力及矢量数据存储能力。进一步的，所述检索切割数据模块是通过条件C对空间数据库中的目标数据标记为K检索出来，与条件C筛选出来的空间数据几何体融合为U，对几何体融合为U的数据进行切割成片处理，所述检索数据是把数据库中储存的数据根据用户的需求条件提取出来，生成空间数据表Table，所述切割数据是对空间数据表Table上的数据进行分割，把数据从逻辑上分割成能独立管理的物理碎片单元存储起来，便于重构、重组、灵活的创建索引，目的是检索目标数据进行切割成瓦片处理。进一步的，所述栅格瓦片渲染模块指对几何体U进行栅格化处理，提取WMS瓦片参数，基于提取的瓦片参数对栅格化处理的几何体U进行样式化渲染，所述栅格化就是将矢量图形转换成位图的过程，栅格化是生成实时三维计算机图形的渲染算法，WMS栅格瓦片是三维城市构建器的全局图层，支持独立的样式和数据配置，所述WMS瓦片参数包括与渲染顺序、图形透明度、图形HSB调整及WMS栅格服务交互，所述图形透明度有透明度系数，取值范围在0至1之间，所述HSB包括色调、饱和度以及亮度，目的是处理采用栅格化算法渲染。进一步的，所述栅格数据图像化模块指栅格化后的数据进行图像化转换，利用后端栅格化算法处理矢量数据，把处理完的瓦片坐标数据进行坐标转换成图形像素点对应的经纬度坐标转换，在前端显示成PNG格式的文件，所述PNG格式是一种采用无损压缩算法的位图格式，关于转化PNG格式的字节流是指在数据传输中，传输数据的最基本单位是字节的流，用于处理二进制数据，不包含边界数据的连续流，所述图像化是将三维瓦片坐标的信息制作图像的进程，用来感知图像中的信息，目的是转换瓦片坐标与像素坐标。进一步的，具体的操作判定图像响应步骤如下：A1、首先由前端页面发起检索请求，提取检索条件C的同时生成临时标识K，根据检索条件C筛选空间数据行，将几何体融合为U，把临时标识K与几何体融合U进行配对组合；A2、然后配对组合中判断几何融合U是否为空几何体，若是判断几何融合U是空几何体，则响应结束，图面无更新，显示无结果；A3、若是判断几何融合U不是空几何体，则插入临时表，对几何体U进行栅格化得到R，检索响应结束，发起图层更新要求；A4、提取WMS瓦片参数B，根据B对格栅R进行切割和样式化，转化为PNG格式的文件字节流S；A5、最后将PNG字节流S渲染至WEB页面，实现画面更新，此时瓦片响应结束。本发明的技术效果和优点：本发明与传统矢量数据前端展示的实时脱密化方法相比，达到了所有筛选、栅格化、切图操作均发生在数据库服务中，依赖其强大的底层运算能力，实现实时响应的效果。本发明与传统矢量数据前端展示的实时脱密化方法相比，实现了前端在看到图斑展示的同时，不依赖任何的坐标值数据依然能实现保密性的功能，达到了高效脱密性。本发明与传统矢量数据前端展示的实时脱密化方法相比，实现了后台服务的算法复杂度近似零，同时PostGIS数据库是一种开源的数据库服务的功能，达到了GIS快速的移植、嵌入、部署到任何项目及工程中使用的效果。本发明与传统矢量数据前端展示的实时脱密化方法相比，实现数据直接存储于关系型数据库中的功能，达到了不论是对属性数据还是空间数据的入库还是“增删改查”，都不涉及文件管理的效果，提高了便捷性、安全性及稳定性。附图说明图1为本发明的基于矢量数据前端展示的实时脱密化方法框图；图2为本发明的基于矢量数据前端展示的实时脱密化方法流程图；图3为本发明的PostGIS空间数据库分布图；图4为本发明的PostGIS数据库中的矢量数据框图。具体实施方式下面将参照附图更详细地描述本公开的示例性实施例，虽然附图中显示了本公开的示例性实施例，然而应当理解，可以以各种形式实现本公开而不应被这里阐述的实施例所限制，相反，提供这些实施例是为了能够更透彻地理解本公开，并且能够将本公开的范围完整的传达给本领域的技术人员。同时，应当明白，为了便于描述，附图中所示出的各个部分的尺寸并不是按照实际的比例关系绘制的。以下对至少一个示例性实施例的描述实际上仅仅是说明性的，决不作为对本申请及其应用或使用的任何限制。对于相关领域普通技术人员已知的技术、方法和设备可能不作详细讨论，但在适当情况下，所述技术、方法和设备应当被视为说明书的一部分。应注意到，相似的标号和字母在下面的附图中表示类似项，因此一旦某一项在一个附图中被定义，则在随后的附图中不需要对其进行进一步讨论，本申请应用于计算机系统/服务器，其可与众多其他通用或专用计算系统环境或配置一起操作，适于与计算机系统/服务器一起使用的众所周知的计算系统、环境和/或配置的例子包括但不限于，个人计算机系统、服务器计算机系统、瘦客户机、厚客户机、手持或膝上设备、基于微处理器的系统、机顶盒、可编程消费电子产品、网络个人电脑、小型计算机系统﹑大型计算机系统和包括上述任何系统的分布式云计算技术环境，等等。计算机系统/服务器可以在由计算机系统执行的计算机系统可执行指令的一般语境下描述，通常，程序模块可以包括例程、程序、目标程序、组件、逻辑、数据结构等等，它们执行特定的任务或者实现特定的抽象数据类型，计算机系统/服务器可以在分布式云计算环境中实施，分布式云计算环境中，任务是由通过通信网络链接的远程处理设备执行的，在分布式云计算环境中，程序模块可以位于包括存储设备的本地或远程计算系统存储介质上。实施例1本发明提供了一种基于矢量数据前端展示的实时脱密化方法，包括PostGIS空间数据库及PostGIS数据库中的矢量数据，所述PostGIS空间数据库包括有创建数据库模块、矢量数据存储模块、检索切割数据模块、栅格瓦片渲染模块及栅格数据图像化模块，所述PostGIS数据库中的矢量数据包括有展示条件C、生成标识K、检索数据联合操作U、瓦片坐标范围B及栅格化数据R，所述矢量数据是记录实体坐标及关系而表现出精确的电、线、几何体的地理位置所在的坐标，所述栅格数据是按照行和列排列组织的一些像元集合。具体包括下列步骤：101、首先对前端用户的当前的展示及条件展示要求生成标识，记作K；本实施例中，需要具体说明的是前端用户的当前展示是指在用户操作的前端在计算机编程语言环境下展示PostGIS空间数据，用户需要根据条件筛选的数据展示出来，其中条件设为C，然后在C条件下展示出来的空间数据标识为K，所述PostGIS空间数据是利用PostGIS创建空间数据库，所述PostGIS是为了提高数据库管理系统对空间数据的管理能力，具有开源性、用户并发操作访问、访问速度快、支持通用的关系数据库管理系统、空间数据按BLOB存取、可跨数据库平台、与特定GIS平台结合紧密及应用灵活的特点。102、对空间数据表Table_X进行以C为条件的检索，将检索结果的空间地理数据进行Union操作，记作U；本实施例中，需要具体说明的是所述空间数据表是在空间数据库中检索出数据对象，支持几何对象分析，采用PostGIS能够解决GIS操作不能并发式运行问题，确保数据的完整性，在空间数据库的地理信息在计算机物理存储介质上存储的地理空间数据总和，所述Union操作是后端运行的处理手段，把两个相同数量的列语句通过Union操作合并，采用计算机编程语言完成Union操作，如SELECT vend_id,prod_id,prod_price利用AddGeometryColumn、DropGeometryColumn直接增加或删除geometry列，语法如下：text AddGeometryColumn；将空间数据表上的地理信息用后端Union操作处理后，把地理信息标识为U。103、然后将产品U与标识K配对存入中间表Table_M，插入成功后反馈至前端；本实施例中，需要具体说明的是所述中间表Table_M指空间数据库中专门存放中间计算结果的数据表Table_M，它是把Table_X的空间数据经过一系列算法运算而得，采用SHA算法，能计算出产品U与标识K数字信息所对应的长度固定字符串算法，在配对过程中，采用产品U与标识K的字符串匹配算法，算法包括有朴素字符串匹配算法，利用字符串开头的第一个字符位置采用的计算机编程语言如下104、前端收到反馈后，依WMS_1.3.0协议，发起以K为标识的栅格请求，经后台接口对每个请求的瓦片坐标范围进行解析后，从PostGIS数据库的Table_M表中标识为K的空间数据U进行栅格化得到；本实施例中，需要具体说明的是所述WMS_1.3.0协议是在地理地图服务中获取服务要素及支持操作，获取空间地理数据及服务元数据，所述瓦片坐标范围是在不同的地图分辨率下，通过分割的方式把地理信息划分为像素256×256256imes256256×256的图像单元，划分成的每一块图像单元称为瓦片，瓦片坐标是表示，所述栅格化是将矢量图形格式表示的图像转换成位图用于前端显示的过程。105、最后根据瓦片坐标范围B，以及预置的配色样式切R得到PNG图片的字节流S，经后端接口，馈至前端，在WEB端进行栅格瓦片渲染，实现实时的、条件式的“切图”；本实施例中，需要具体说明的是所述栅格表示像素，栅格化是把矢量图转化为栅格图像，栅格化算法是把多边形几何体的三维场景图渲染到二维表面，所述渲染是CG最后一道工序，使图像符合立体着色场景，一般用于三维软件窗口和三维模型线框图辅助观察模型的作用，所述样式是在样式切换中出现变动，在CSS中切换样式背景颜色，采用编码程序表示如Example Source Code＜a href＝""οnclick＝"setActiveStyleSheet；return false；"title＝"红色样式"＞＜/a＞＜a href＝"javascript:void"οnclick＝"setActiveStyleSheet；return false；"title＝"绿色样式"＞＜/a＞＜a href＝"javascript:void"οnclick＝"setActiveStyleSheet；return false；"title＝"黄色样式"＞＜/a＞＜a href＝"javascript:void"οnclick＝"setActiveStyleSheet；return false；"title＝"没有样式"＞＜/a＞，所述“切图”是用于完成前端开发用DIV和CSS完成静态页面布局，给前端操作提供方便、用户交互性强、画面浏览速度快及提高效率的特点。本实施例中，需要具体说明的是所述创建数据库模块是指利用PostGIS创建空间数据库，在前端展示中新建数据库，添加PostGIS扩展，使得新建数据库支持空间类型，然后进入数据库导入数据，创建数据库完成，所述创建数据库模块采用创建空间数据库的方法包括有一是利用Navicat Premium15连接PostgreSQL数据库，通过postgis默认空间数据库做模板来创建新的空间数据；二是通过PostgreSQL的管理工具pgAdmin来创建空间数据库；三是通过SQL语句创建；所述利用Navicat Premium 15连接PostgreSQL数据库，具体操作方法为利用Navicat Premium 15连接PostgreSQL数据库，"postgis_32_sample"此数据库为安装PostGis时，默认创建的空间数据，连接数据库，选择“新建数据库”，在新建数据库窗口中输入名称等参数，注意“范本”选项选择已有的PostGis空间数据库，本次选择默认创建的空间库“postgis_32_sample”，设置其他参数后确认，完成空间数据库创建；所述通过PostgreSQL的管理工具pgAdmin来创建空间数据库具体操作方法为打开pgAdmin工具，连接到PostgreSQL服务器，连接创建一个普通关系数据库，打开创建的数据，在扩展插件列表中-＞创建-＞插件，在添加PostGis空间数据库相关插件；所述通过SQL语句创建，具体操作方法采用编程代码如本实施例中，需要具体说明的是所述矢量数据存储模块是采用分布式SQL数据库对矢量数据进行存储，所述矢量数据是指矢量空间数据，在GIS中包括点、线、面及几何体类型的坐标，矢量数据用于编辑、更新、查询场景，采用分布式SQL数据库作为存储矢量数据的核心存储，不仅满足SQL查询实时矢量数据，还能使用Postgres-XL集群技术对原有数据进行分布式升级；所述Postgres-XL是一种可横向扩展的开源数据库集群，具有提供多种表分片策略，采用OLAP模式，完成支持集群级别及支持OLAP应用的功能，它是一个并行数据库建立在SQL上，所述SQL是一种关系型数据库管理系统，用来把矢量数据按照数据特有结构进行组织、存储及管理数据的仓库。本实施例中，需要具体说明的是所述检索切割数据模块是通过条件C对空间数据库中的目标数据标记为K检索出来，与条件C筛选出来的空间数据几何体融合为U，对几何体融合为U的数据进行切割成片处理，所述检索数据是把数据库中储存的数据根据用户的需求条件提取出来，生成空间数据表Table，所述切割数据是对空间数据表Table上的数据进行分割，把数据从逻辑上分割成能独立管理的物理碎片单元存储起来，便于重构、重组、灵活的创建索引；所述检索数据包括数据排序及数据筛选，一般采用顺序检索、对分检索及索引查询方式进行检索处理，所述数据排序指按照一定的顺序排列展示出来，所述数据筛选根据用户给定的条件，从Table表中查找满足条件的数据显示出来，不满足条件的数据隐藏起来。本实施例中，需要具体说明的是所述栅格瓦片渲染模块指对几何体U进行栅格化处理，提取WMS瓦片参数，基于提取的瓦片参数对栅格化处理的几何体U进行样式化渲染，所述栅格化就是将矢量图形转换成位图的过程，栅格化是生成实时三维计算机图形的渲染算法，WMS栅格瓦片是三维城市构建器的全局图层，支持独立的样式和数据配置，所述WMS瓦片参数包括与渲染顺序、图形透明度、图形HSB调整及WMS栅格服务交互，所述图形透明度有透明度系数，取值范围在0至1之间，所述HSB包括色调、饱和度以及亮度；所述栅格化是将几何体用三角形在三维空间中的三个顶点表示，将定点数据映射到前端显示的二维坐标点，通过运算方法如矩阵算法、裁剪算法及扫描线算法对坐标进行变换、平移、旋转、裁剪处理，关于瓦片参数是对区域及配色进行提取，瓦片切割是指在地图图片作为金字塔的底层，即第0层，并对其进行分块，从地图图片的左上角开始，从左至右、从上到下进行切割，分割成相同大小的正方形地图瓦片，形成第0层瓦片矩阵；在第0层地图图片的基础上，按每2x2像素合成为一个像素的方法生成第1层地图图片，并对其进行分块，分割成与下一层相同大小的正方形地图瓦片，形成第1层瓦片矩阵；采用同样的方法生成第2层瓦片矩阵，以此类推，瓦片数越多则对应瓦片坐标的像素点越清晰。本实施例中，需要具体说明的是所述栅格数据图像化模块指栅格化后的数据进行图像化转换，利用后端栅格化算法处理矢量数据，把处理完的瓦片坐标数据进行坐标转换成图形像素点对应的经纬度坐标转换，在前端显示成PNG格式的文件，所述PNG格式是一种采用无损压缩算法的位图格式，关于转化PNG格式的字节流是指在数据传输中，传输数据的最基本单位是字节的流，用于处理二进制数据，不包含边界数据的连续流，所述图像化是将三维瓦片坐标的信息制作图像的进程，用来感知图像中的信息；为了实现瓦片坐标与图像化之间的转换，需要进行经纬度坐标与瓦片坐标、像素坐标的相互转换，在转化过程中对于瓦片编号及计数采取公式为，瓦片在某一个层级Level下，瓦片坐标的X轴和Y轴各有2Level2^{Level}2Level个瓦片编号，瓦片地图上的瓦片总数为2Level×2Level2^{Level}imes2^{Level}2Level×2Level，瓦片的像素坐标转换成经纬度坐标采取公式为经纬度坐标转换瓦片坐标采取公式为经纬度坐标转换像素坐标采取公式为本实施例中，需要具体说明的是所述矢量数据前端展示的实时脱密化方法，具体的操作判定图像响应步骤如下：步骤1：首先由前端页面发起检索请求，提取检索条件C的同时生成临时标识K，根据检索条件C筛选空间数据行，将几何体融合为U，把临时标识K与几何体融合U进行配对组合；步骤2：然后配对组合中判断几何融合U是否为空几何体，若是判断几何融合U是空几何体，则响应结束，图面无更新，显示无结果；步骤3：若是判断几何融合U不是空几何体，则插入临时表，对几何体U进行栅格化得到R，检索响应结束，发起图层更新要求；步骤4：提取WMS瓦片参数B，根据B对格栅R进行切割和样式化，转化为PNG格式的文件字节流S；步骤5：最后将PNG字节流S渲染至WEB页面，实现画面更新，此时瓦片响应结束。所述基于矢量数据前端展示的实时脱密化方法即是空间地理坐标数据不能直接通过接口泄露出这些数据，通过一系列算法，将用户的检索条件的关键字切割，每个细粒度关键字对应着一个矢量坐标，后端整合好这些数据生成图片流发送到前端展示。最后：以上所述仅为本发明的优选实施例而已，并不用于限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
