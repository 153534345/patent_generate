标题title
基于机器学习的障碍物识别方法
摘要abst
本发明公开了基于机器学习的障碍物识别方法，包括：步骤一：响应于障碍物识别需求，根据上一识别周期的车辆驾驶速度，获取本识别周期的采集频率；步骤二：通过设置在车辆头部的摄像机，根据采集频率获取车辆前方的道路原始图片并识别，获取障碍物存在信息；步骤三：若道路不存在障碍物，返回步骤二；若道路存在障碍物，提高摄像机的采集频率，并连续获取若干障碍物照片进行识别，获取障碍物类别信息；步骤四：若障碍物为静止障碍物时，获取静止障碍物的位置信息；若障碍物为非静止障碍物时，获取非静止障碍物的运动信息；步骤五：返回步骤二，重复步骤二至步骤四，直至本识别周期结束。解决了道路障碍物影响车辆行驶安全的技术问题。
权利要求书clms
1.基于机器学习的障碍物识别方法，其特征在于：包括：步骤一：响应于障碍物识别需求，根据上一识别周期的车辆驾驶速度，获取本识别周期的采集频率；步骤二：通过设置在车辆头部的摄像机，根据采集频率获取车辆前方的道路原始图片并识别，获取障碍物存在信息；步骤三：若道路不存在障碍物，返回步骤二；若道路存在障碍物，提高摄像机的采集频率，并连续获取若干障碍物照片进行识别，获取障碍物类别信息；步骤四：若障碍物为静止障碍物时，获取静止障碍物的位置信息；若障碍物为非静止障碍物时，获取非静止障碍物的运动信息；步骤五：返回步骤二，重复步骤二至步骤四，直至本识别周期结束。2.如权利要求1所述的基于机器学习的障碍物识别方法，其特征在于：识别道路原始图片之前，对所述道路原始图片进行预处理，包括：对道路原始图片进行灰度化处理获取道路灰度图片，对道路灰度图片进行图像空间变换处理获取道路几何变换照片；对道路几何变换照片进行图像锐化处理获取道路锐化图片。3.如权利要求2所述的基于机器学习的障碍物识别方法，其特征在于：障碍物存在信息的获取过程：将道路锐化图片输入预先训练好的障碍物识别模型；输出障碍物存在结果；若障碍物不存在，删除所述道路锐化图片；若障碍物存在，保存所述道路锐化图片。4.如权利要求1所述的基于机器学习的障碍物识别方法，其特征在于：若干障碍物照片识别之前，对所述若干障碍物照片进行预处理，包括：对若干障碍物照片均进行灰度化处理获取若干障碍物灰度图片，对若干所述障碍物灰度图片均进行图像锐化处理获取若干障碍物锐化照片。5.如权利要求4所述的基于机器学习的障碍物识别方法，其特征在于：获取障碍物类别信息，包括：将若干障碍物锐化照片输入预先训练好的障碍物类别模型；输出障碍物类别，所述障碍物类别包括静止障碍物和非静止障碍物。6.如权利要求5所述的基于机器学习的障碍物识别方法，其特征在于：获取静止障碍物的位置信息，包括：从若干所述障碍物锐化照片中获取至少两张障碍物锐化照片；然后分别根据至少两张障碍物锐化照片，获取阻挡系数、障碍物距离以及障碍物偏移系数；然后一一对应计算至少两张障碍物锐化照片的阻挡系数、障碍物距离以及障碍物偏移系数的平均值作为位置信息。7.如权利要求6所述的基于机器学习的障碍物识别方法，其特征在于：获取阻挡系数、障碍物距离以及偏移系数，包括：对障碍物锐化照片中的障碍物标记障碍物边框，以摄像机的镜头在障碍物边框所在平面上的投影点作为坐标原点建立坐标系，标记获取障碍物边框的各顶点坐标；根据摄像机参数获取障碍物距离，并将车辆投影在坐标系上，计算车辆的投影面和障碍物边框的重叠区域的面积和重叠区域分别在坐标系纵轴左右两侧的面积；阻挡系数为重叠区域与车辆投影面的面积比；偏移系数为坐标系纵轴左侧重叠区域面积与右两侧的面积的比。8.如权利要求7所述的基于机器学习的障碍物识别方法，其特征在于：获取非静止障碍物的运动信息，包括：从若干所述障碍物锐化照片中获取三张障碍物锐化照片，以及相邻两障碍物锐化照片间隔的障碍物锐化照片的数量；根据摄像机拍摄若干所述障碍物锐化照片的采集频率，获取运动数据、阻挡系数、障碍物距离以及偏移系数作为运动信息。9.如权利要求8所述的基于机器学习的障碍物识别方法，其特征在于：获取运动数据，包括：对三张障碍物锐化照片中的障碍物标记障碍物边框，以摄像机的镜头在障碍物边框所在平面上的投影点作为坐标原点建立标准坐标系，标记获取障碍物边框的各顶点坐标；分别获取两相邻障碍物锐化照片中障碍物边框的至少三个顶点的横坐标差的平均值，纵坐标差的平均值；计算获取相邻两障碍物锐化照片的间隔时间，然后获取两个水平方向速度Vx1和Vx2，竖直方向速度Vz1和Vz2；根据摄像机参数获取障碍物距离获取直线方向速度Vy1和Vy2。
说明书desc
技术领域本发明涉及障碍物识别技术领域，具体是基于机器学习的障碍物识别方法。背景技术道路障碍物是指在道路上存在对车辆运行有安全隐患的障碍物，比如隧道塌方造成巨石、线路两侧延伸至道路侧的植物枝条等。车辆在行驶过程中遇到弯道时，驾驶人员的注意力比较集中，车速较慢，遇到障碍物能够及时避开；但是在车辆长时间直线行驶时，驾驶人员的视觉不易集中，并且由于车辆行驶的速度较快，驾驶人员的反应时间比较短，仅靠驾驶员视觉判断难以保证车辆行驶安全，为此，现提供基于机器学习的障碍物识别方法。发明内容本发明的目的在于提供基于机器学习的障碍物识别方法，解决了道路障碍物影响车辆行驶安全的技术问题。本发明的目的可以通过以下技术方案实现：基于机器学习的障碍物识别方法：包括：步骤一：响应于障碍物识别需求，根据上一识别周期的车辆驾驶速度，获取本识别周期的采集频率；步骤二：通过设置在车辆头部的摄像机，根据采集频率获取车辆前方的道路原始图片并识别，获取障碍物存在信息；步骤三：若道路不存在障碍物，返回步骤二；若道路存在障碍物，提高摄像机的采集频率，并连续获取若干障碍物照片进行识别，获取障碍物类别信息；步骤四：若障碍物为静止障碍物时，获取静止障碍物的位置信息；若障碍物为非静止障碍物时，获取非静止障碍物的运动信息；步骤五：返回步骤二，重复步骤二至步骤四，直至本识别周期结束。进一步地，识别道路原始图片之前，对所述道路原始图片进行预处理，包括：对道路原始图片进行灰度化处理获取道路灰度图片，对道路灰度图片进行图像空间变换处理获取道路几何变换照片；对道路几何变换照片进行图像锐化处理获取道路锐化图片。进一步地，障碍物存在信息的获取过程：将道路锐化图片输入预先训练好的障碍物识别模型；输出障碍物存在结果；若障碍物不存在，删除所述道路锐化图片；若障碍物存在，保存所述道路锐化图片。进一步地，若干障碍物照片识别之前，对所述若干障碍物照片进行预处理，包括：对若干障碍物照片均进行灰度化处理获取若干障碍物灰度图片，对若干所述障碍物灰度图片均进行图像锐化处理获取若干障碍物锐化照片。进一步地，获取障碍物类别信息，包括：将若干障碍物锐化照片输入预先训练好的障碍物类别模型；输出障碍物类别，所述障碍物类别包括静止障碍物和非静止障碍物。进一步地，获取静止障碍物的位置信息，包括：从若干所述障碍物锐化照片中获取至少两张障碍物锐化照片；然后分别根据至少两张障碍物锐化照片，获取阻挡系数、障碍物距离以及障碍物偏移系数；然后一一对应计算至少两张障碍物锐化照片的阻挡系数、障碍物距离以及障碍物偏移系数的平均值作为位置信息。进一步地，获取阻挡系数、障碍物距离以及偏移系数，包括：对障碍物锐化照片中的障碍物标记障碍物边框，以摄像机的镜头在障碍物边框所在平面上的投影点作为坐标原点建立坐标系，标记获取障碍物边框的各顶点坐标；根据摄像机参数获取障碍物距离，并将车辆投影在坐标系上，计算车辆的投影面和障碍物边框的重叠区域的面积和重叠区域分别在坐标系纵轴左右两侧的面积；阻挡系数为重叠区域与车辆投影面的面积比；偏移系数为坐标系纵轴左侧重叠区域面积与右两侧的面积的比。进一步地，获取非静止障碍物的运动信息，包括：从若干所述障碍物锐化照片中获取三张障碍物锐化照片，以及相邻两障碍物锐化照片间隔的障碍物锐化照片的数量；根据摄像机拍摄若干所述障碍物锐化照片的采集频率，获取运动数据、阻挡系数、障碍物距离以及偏移系数作为运动信息。进一步地，获取运动数据，包括：对三张障碍物锐化照片中的障碍物标记障碍物边框，以摄像机的镜头在障碍物边框所在平面上的投影点作为坐标原点建立标准坐标系，标记获取障碍物边框的各顶点坐标；分别获取两相邻障碍物锐化照片中障碍物边框的至少三个顶点的横坐标差的平均值，纵坐标差的平均值；计算获取相邻两障碍物锐化照片的间隔时间，然后获取两个水平方向速度Vx1和Vx2，竖直方向速度Vz1和Vz2；根据摄像机参数获取障碍物距离获取直线方向速度Vy1和Vy2。本发明的有益效果：根据上一识别周期的速度确定本识别周期内摄像机的采集频率，方便摄像机周期性获取道路的图片进行识别分析，合理利用摄像机和算力；当识别到存在障碍物时，提高摄像机的采集频率，并连续获取若干的障碍物照片，对若干障碍物照片同时进行识别分析获取障碍物类别信息，降低识别错误率；并根据若干障碍物照片获取位置信息或运动信息；能够及时准确发现障碍物，解决了道路障碍物影响车辆行驶安全的技术问题，使得障碍物识别效果更佳。附图说明图1为本发明的方法步骤图。具体实施方式如图1所示，基于机器学习的障碍物识别方法：包括：步骤一：响应于障碍物识别需求，根据上一识别周期的车辆驾驶速度，获取本识别周期的采集频率；步骤二：通过设置在车辆头部的摄像机，根据采集频率获取车辆前方的道路原始图片并识别，获取障碍物存在信息；步骤三：若道路不存在障碍物，返回步骤二；若道路存在障碍物，提高摄像机的采集频率，并连续获取若干障碍物照片进行识别，获取障碍物类别信息；步骤四：若障碍物为静止障碍物时，获取静止障碍物的位置信息；若障碍物为非静止障碍物时，获取非静止障碍物的运动信息；步骤五：返回步骤二，重复步骤二至步骤四，直至本识别周期结束。本实施例中，车辆驾驶人员通过控制面板输入障碍物识别需求；车辆的控制系统响应于障碍物识别需求，获取上一识别周期的车辆行驶速度，所述车辆驾驶速度为上一识别周期时间内车辆的最高速度；车辆驾驶人员可以通过控制面板在控制系统中设置识别周期的长度，需要说明的是，设定识别周期后，控制面板每隔设定周期向控制系统发送障碍物识别需求；直至驾驶人员通过控制面板取消障碍物识别需求。本实施例中，识别周期为60秒，每隔60秒，获取上一识别周期内车辆的最高速度，然后根据速度—频率映射获取对应速度的采集频率。所述速度—频率映射提前设置在车辆的控制系统中；车辆驾驶速度越快，其摄像机采集照片的采集频率越高，因为车辆驾驶速度越快，从发现障碍物到到达障碍物处之间的时间越短，驾驶人员的反应时间也越短，故需要提高摄像机采集照片的频率，以便及时发现障碍物。获取速度－频率映射，包括：根据以下公式获取速度对应的采集频率：TFY=Lyx/V；CHmin=TSD/TFY；CHzj=【CHmin*【CHmin】+1】；Fcj=CHzj/TSD；其中，TFY为最长反应时间，单位为秒；Lyx为摄像机的有效识别距离，单位为米；V为速度，单位为米/秒；TSD为设定周期的时间长度，单位为秒；CHmin为设定周期内摄像机最少拍摄次数；CHzj为最佳拍摄次数，【】为取整符号；Fcj为采集频率，单位为次/秒；μ为调整系数，且μ大于1。当驾驶速度增加时，其对应的采集频率呈指数倍增加；增加道路原始图片拍摄的次数即图片识别的次数，方便及时发现行驶道路上的障碍物。当识别到道路上存在障碍物信息时，提高摄像机的采集频率，并获取障碍物照片；以便及时获取障碍物的类别信息；本实施例中，当发现障碍物时，提高摄像机的采集频率至摄像机的最高采集频率。同时对若干张照片进行识别并分析来提高障碍物类型判断的正确率，障碍物类型包括静止障碍物和非静止障碍物；道路上非静止障碍物相对静止障碍物来说，更加影响行驶安全，危害也更大；故需要对非静止障碍物获取运动信息，对静止障碍物获取位置信息来帮助车辆驾驶人员进行判断。将位置信息或运动信息通过语音提醒或控制面板显示的方式提醒驾驶人员，然后摄像机恢复原有的采集频率，重复步骤二至步骤四的过程，直至本识别周期结束。本发明的另一实施例，识别道路原始图片之前，对所述道路原始图片进行预处理，包括：对道路原始图片进行灰度化处理获取道路灰度图片，对道路灰度图片进行图像空间变换处理获取道路几何变换照片；对道路几何变换照片进行图像锐化处理获取道路锐化图片。本实施例中，先对道路原始图片进行预处理，提高识别效果和精度，消除无关信息，放大有效信息，简化数据；处理的过程包括：灰度化处理、空间变换处理以及图像锐化处理；灰度化处理，在RGB模型中，如果R=G=B时，则彩色表示一种灰度颜色，其中R=G=B的值为灰度值，因此，灰度图像每个像素只需一个字节存放灰度值，灰度范围为0-255；本实施例中采用加权平均方法获取灰度图的灰度值，分别是R:0.299、G:0.587、B:0.114；空间变换处理，通过平移、转置、镜像、旋转、缩放等几何变换对采集的图像进行处理，用于改正图像采集系统的系统误差和仪器位置的随机误差；图像锐化处理，用于突出图像上地物的边缘、轮廓，或某些线性目标要素的特征。这种滤波方法提高了地物边缘与周围像元之间的反差；便于目标识别。灰度化处理、空间变换处理以及图像锐化处理均通过预先设置在控制系统中的计算机程序实现；摄像机与控制系统通信连接；所述控制系统包括处理器、存储器以及通信模块。进一步地，障碍物存在信息的获取过程：将道路锐化图片输入预先训练好的障碍物识别模型；输出障碍物存在结果；若障碍物不存在，删除所述道路锐化图片；若障碍物存在，保存所述道路锐化图片。本实施例中，利用5000张道路锐化图片，通过机器学习算法进行训练，得到障碍物识别模型；包括：S1，拍摄5000张道路原始照片，并经过预处理后得到5000张道路锐化图片；然后人工判断5000张道路锐化图片中是否存在障碍物，并标记结果；选取其中4900张道路锐化图片作为标准训练集，1000张道路锐化图片为验证集；S2，利用标准训练集对识别模型进行训练；并利用验证集对识别模型进行验证；当验证集的准确率大于等于99.9%时，验证通过；得到障碍物识别模型；当验证不通过时，继续对识别模型进行训练直至准确率大于等于99.9%。进一步地，若干障碍物照片识别之前，对所述若干障碍物照片进行预处理，包括：对若干障碍物照片均进行灰度化处理获取若干障碍物灰度图片，对若干所述障碍物灰度图片均进行图像锐化处理获取若干障碍物锐化照片。本实施例中，对若干障碍物照片仅进行灰度化处理和图像锐化处理，减少处理时间，相对于识别障碍物存在要求准确性来说，判断障碍物类别的过程更强调的是快速；控制系统处理道路原始图片获取道路锐化图片的过程中单次仅需要处理一张图片，控制系统的算力即处理图片能力充足，故增加空间变换处理，使得识别障碍物准确性提高；而若干障碍物照片的处理过程中需要同时处理若干张照片；故本实施例中处理器对若干障碍物照片的处理过程中不做空间变换处理，使控制系统的算力仅用于对若干障碍物照片进行灰度化处理和图像锐化处理，从而快速获取若干障碍物锐化照片；故相较于道路原始图片预处理过程来说在不影响结果的情况下减少一部分处理过程，能够快速获取若干张障碍物照片；本实施例中，摄像机采集以最高采集频率获取5张障碍物照片。进一步地，获取障碍物类别信息，包括：将若干障碍物锐化照片输入预先训练好的障碍物类别模型；输出障碍物类别，所述障碍物类别包括静止障碍物和非静止障碍物。本实施例中，利用5000组障碍物锐化照片，每组5张障碍物锐化照片，通过机器学习算法进行训练，得到障碍物类别模型；包括：SS1：拍摄1000组障碍物照片，每组5张障碍物照片；预处理后得到1000组障碍物锐化照片；然后人工判断1000组障碍物锐化照片中障碍物是否为移动障碍物，并标记结果；选取其中900组障碍物锐化照片作为标准训练集，100组障碍物锐化照片为验证集；SS2：利用标准训练集对识别模型进行训练；识别模型通过比较相邻两张障碍物照片中障碍物边缘位置进行判定，5张照片有4组比较组，四组比较组中有大于等于3组的结果相同时，输出所述结果；不断训练识别模型直至输出结果；利用验证集对识别模型进行验证，当验证集的准确率大于等于99%时，验证通过；得到障碍物类别模型；当验证不通过时，继续对识别模型进行训练直至准确率大于等于99%。进一步地，获取静止障碍物的位置信息，包括：从若干所述障碍物锐化照片中获取至少两张障碍物锐化照片；然后分别根据至少两张障碍物锐化照片，获取阻挡系数、障碍物距离以及障碍物偏移系数；然后一一对应计算至少两张障碍物锐化照片的阻挡系数、障碍物距离以及障碍物偏移系数的平均值作为位置信息。本实施例随机在五张障碍物锐化照片中获取两张障碍物锐化照片，一一对阻挡系数、障碍物距离以及障碍物偏移系数取平均数。进一步地，获取阻挡系数、障碍物距离以及偏移系数，包括：对障碍物锐化照片中的障碍物标记障碍物边框，以摄像机的镜头在障碍物边框所在平面上的投影点作为坐标原点建立坐标系，标记获取障碍物边框的各顶点坐标；根据摄像机参数获取障碍物距离，并将车辆投影在坐标系上，计算车辆的投影面和障碍物边框的重叠区域的面积和重叠区域分别在坐标系纵轴左右两侧的面积；阻挡系数为重叠区域与车辆投影面的面积比；偏移系数为坐标系纵轴左侧重叠区域面积与右两侧的面积的比。本实施例中，所述摄像机的参数包括安装高度及位置，摄像角度、摄像倍数以及图片分辨率；将道路两侧的宽度固定线条作为参照物；获取障碍物的距离以及障碍物边框的尺寸；建立坐标系后，根据障碍物距离和车体的数据将车体的最大横截面投影在坐标系上；计算阻挡系数，阻挡系数越大，造成的损失越大，阻挡的系数为0时，说明障碍物不对车辆造成阻挡；偏移系数说明的是障碍物在车辆偏左位置还是偏右位置，方便提醒驾驶人员从哪一侧进行避让；当偏移系数为1时，说明障碍物位于车辆行驶方向的正前方；当偏移系数小于1时，说明障碍物位于车辆的右前方，当偏移系数大于1时，说明障碍物位于车辆行驶方向的左前方。进一步地，获取非静止障碍物的运动信息，包括：从若干所述障碍物锐化照片中获取三张障碍物锐化照片，以及相邻两障碍物锐化照片间隔的障碍物锐化照片的数量；根据摄像机拍摄若干所述障碍物锐化照片的采集频率，获取运动数据、阻挡系数、障碍物距离以及偏移系数作为运动信息。本实施例中，所述运动数据包括障碍物的速度及方向；相邻两障碍物锐化照片间隔的障碍物锐化照片的数量为1，故相邻两障碍物锐化照片间隔两个周期，使得障碍物产生的位移明显，方便识别。其中阻挡系数和偏移系数取三张障碍物锐化照片的分析结果的平均值，最后一张障碍物锐化照片的障碍物距离作为运动信息；进一步地，获取运动数据，包括：对三张障碍物锐化照片中的障碍物标记障碍物边框，以摄像机的镜头在障碍物边框所在平面上的投影点作为坐标原点建立标准坐标系，标记获取障碍物边框的各顶点坐标；分别获取两相邻障碍物锐化照片中障碍物边框的至少三个顶点的横坐标差的平均值，纵坐标差的平均值；计算获取相邻两障碍物锐化照片的间隔时间，然后获取两个水平方向速度Vx1和Vx2，竖直方向速度Vz1和Vz2；根据摄像机参数获取障碍物距离获取直线方向速度Vy1和Vy2。本实施例中，上述Vx1、Vx2、Vy1、Vy2、Vz1以及Vz2均带有符号；通过Vx1、Vy1以及Vz1获得障碍物的空间速度V1，通过Vx2、Vy2以及Vz2获取空间速度V2；空间速度V1和空间速度V2均包括速度大小以及速度方向。当空间速度V1和空间速度V2的速度大小差值和运动方向的角度均在对应的设定范围内时，输出速度和方向，并通过语音提醒或控制面板显示；当空间速度V1和空间速度V2的速度大小差值和运动方向的角度有一项超过在对应的设定范围内时，判断障碍物为无序移动，输出无序运动结果和告警信息并语音提醒或控制面板显示。以上实施例仅用以说明本发明的技术方法而非限制，尽管参照较佳实施例对本发明进行了详细说明，本领域的普通技术人员应当理解，可以对本发明的技术方法进行修改或等同替换，而不脱离本发明技术方法的精神和范围。
