标题title
一种水库安全监控方法及装置
摘要abst
本发明公开了一种水库安全监控方法及装置，包括：获得若干对比区，对每组n号对比区比对组赋予权重；对n号对比区比对组内的对比区分别进行比对，以获得每组n号对比区比对组的差异值；设置第一差异值阈值，筛选出差异值大于第一差异值阈值的n号对比区比对组，依据筛选出的n号对比区比对组的权重，计算得到照片An和An+1之间的总差异值。通过第一差异值阈值，剔除了一部分无效噪音，使得大概率不含偷钓人员信息的差异值直接被剔除，在此基础之上，通过偷钓人员对n号对比区比对组差异值贡献概率表达权重，从而使得照片An和An+1之间的总差异值能够最大限度表达偷钓人员出现概率，从而提升预警的准确性。
权利要求书clms
1.一种水库安全监控方法，其特征在于，包括：于时刻Tn和Tn+1分别抓取水库周边的照片An和An+1，而后对照片An和An+1分别进行分割，以获得若干对比区，其中照片An分割得到的每个对比区分别对应于照片An+1分割得到的每个对比区，以组成若干组n号对比区比对组；依据n号对比区比对组对应的内容物对每组n号对比区比对组赋予权重；对n号对比区比对组内的对比区分别进行比对，以获得每组n号对比区比对组的差异值；设置第一差异值阈值，筛选出差异值大于第一差异值阈值的n号对比区比对组，依据筛选出的n号对比区比对组的权重，计算得到照片An和An+1之间的总差异值；设置第二差异值阈值，若总差异值大于第二差异值阈值，则针对照片An+1进行提示预警，反之，则不进行预警。2.根据权利要求1所述的水库安全监控方法，其特征在于，于时刻Tn+2抓取水库周边的照片An+2，并对照片An+2进行分割，以获得若干对比区，进而与照片An+1分割得到的对比区组成若干组n+1号对比区比对组，每组n+1号对比区比对组均有对应的n号对比区比对组，若针对照片An+1发生提示预警，则找出差异值最大的n号对比区比对组并提升对应的n+1号对比区比对组的权重。3.根据权利要求2所述的水库安全监控方法，其特征在于，若针对照片An+1发生提示预警，且差异值最大的若干n号对比区比对组对应的内容物相邻且相关，则同时增加对应的若干n+1号对比区比对组的权重。4.根据权利要求3所述的水库安全监控方法，其特征在于，所述差异值由对比区之间的色度差值和灰度差值进行加权求和计算得到，其中灰度差值的权重系数不大于色度差值权重的20%。5.根据权利要求4所述的水库安全监控方法，其特征在于，设定色度差阈值以及灰度差阈值，若针对照片An+1发生提示预警，且差异值最大的n号对比区比对组中色度差值超过色度差阈值，则具有与差异值最大的n号对比区比对组相邻内容物的n+1号对比区比对组在色度差值小于色度差阈值且灰度差值大于灰度差阈值时提升灰度差值权重。6.根据权利要求4所述的水库安全监控方法，其特征在于，计算筛选出的n号对比区比对组的灰度差值的方差，设定方差阈值，若灰度差值的方差小于方差阈值，则降低所有n+1号对比区比对组的灰度差值的权重。7.根据权利要求2所述的水库安全监控方法，其特征在于，若针对照片An+1未进行提示预警，则Tn+1-Tn=Tn+2-Tn+1，若针对照片An+1进行提示预警，则Tn+1-Tn＞Tn+2-Tn+1并下调第一差异值阈值。8.根据权利要求1所述的水库安全监控方法，其特征在于，若照片An和An+1的内容物包括水库水面，则有且仅有部分对比区的内容物仅包括水库水面，且内容物仅包括水库水面的n号对比区比对组的权重系数为0。9.根据权利要求8所述的水库安全监控方法，其特征在于，内容物仅包括地面的n号对比区比对组的权重大于内容物不包括地面的n号对比区比对组的权重。10.一种水库安全监控装置，其特征在于，包括多个用于拍摄水库周边照片的摄像头以及执行权利要求1-9任一权利要求所述的水库安全监控方法的主控板，一部分摄像头的拍摄范围重叠，重叠范围为单独的对比区。
说明书desc
技术领域本发明属于图像分析领域，尤其涉及一种水库安全监控方法及装置。背景技术水库内往往存在一定渔业资源，受到许多垂钓爱好者的喜爱。但是水库作为一种政府管控设施，往往是封闭管理，禁止垂钓的，许多垂钓爱好者甚至会破坏水库周边的隔离设施进入水库进行偷钓，存在极大的安全隐患。针对偷钓情况，往往需要依靠人工监控摄像头才能够发现，这就导致了人工成本极大。因此，如何规避人工实时监控，并且在偷钓人员出现的时候及时提示管理人员进行处理驱离，就是一个在水库安全管理领域亟待解决的重要问题。发明内容本发明所要解决的技术问题在于克服现有技术的不足而提供一种水库安全监控方法及装置。解决上述技术问题，本发明采用如下技术方案：一种水库安全监控方法，包括：于时刻Tn和Tn+1分别抓取水库周边的照片An和An+1，而后对照片An和An+1分别进行分割，以获得若干对比区，其中照片An分割得到的每个对比区分别对应于照片An+1分割得到的每个对比区，以组成若干组n号对比区比对组；依据n号对比区比对组对应的内容物对每组n号对比区比对组赋予权重；对n号对比区比对组内的对比区分别进行比对，以获得每组n号对比区比对组的差异值；设置第一差异值阈值，筛选出差异值大于第一差异值阈值的n号对比区比对组，依据筛选出的n号对比区比对组的权重，计算得到照片An和An+1之间的总差异值；设置第二差异值阈值，若总差异值大于第二差异值阈值，则针对照片An+1进行提示预警，反之，则不进行预警。本发明于时刻Tn+2抓取水库周边的照片An+2，并对照片An+2进行分割，以获得若干对比区，进而与照片An+1分割得到的对比区组成若干组n+1号对比区比对组，每组n+1号对比区比对组均有对应的n号对比区比对组，若针对照片An+1发生提示预警，则找出差异值最大的n号对比区比对组并提升对应的n+1号对比区比对组的权重。本发明若针对照片An+1发生提示预警，且差异值最大的若干n号对比区比对组对应的内容物相邻且相关，则同时增加对应的若干n+1号对比区比对组的权重。本发明所述差异值由对比区之间的色度差值和灰度差值进行加权求和计算得到，其中灰度差值的权重系数不大于色度差值权重的20%。本发明设定色度差阈值以及灰度差阈值，若针对照片An+1发生提示预警，且差异值最大的n号对比区比对组中色度差值超过色度差阈值，则具有与差异值最大的n号对比区比对组相邻内容物的n+1号对比区比对组在色度差值小于色度差阈值且灰度差值大于灰度差阈值时提升灰度差值权重。本发明计算筛选出的n号对比区比对组的灰度差值的方差，设定方差阈值，若灰度差值的方差小于方差阈值，则降低所有n+1号对比区比对组的灰度差值的权重。本发明若针对照片An+1未进行提示预警，则Tn+1-Tn=Tn+2-Tn+1，若针对照片An+1进行提示预警，则Tn+1-Tn＞Tn+2-Tn+1并下调第一差异值阈值。本发明若照片An和An+1的内容物包括水库水面，则有且仅有部分对比区的内容物仅包括水库水面，且内容物仅包括水库水面的n号对比区比对组的权重系数为0。本发明内容物仅包括地面的n号对比区比对组的权重大于内容物不包括地面的n号对比区比对组的权重。一种水库安全监控装置，包括多个用于拍摄水库周边照片的摄像头以及执行水库安全监控方法的主控板，一部分摄像头的拍摄范围重叠，重叠范围为单独的对比区。本发明相较现有技术，有如下优势：1、通过第一差异值阈值，剔除了一部分无效噪音，使得大概率不含偷钓人员信息的差异值直接被剔除，在此基础之上，通过偷钓人员对n号对比区比对组差异值贡献概率表达权重，从而使得照片An和An+1之间的总差异值能够最大限度表达偷钓人员出现概率，从而提升预警的准确性；2、充分考虑到偷钓人员在水库中移动的过程很可能会在地面上产生影子，借此灰度差可能包含部分偷钓人员的图像线索，因此针对差异值计算并未完全忽略灰度差，降低预警漏报的情况；3、对权重系数依照在前预警情况进行动态调整，使得预警的准确性能够迭代提高。本发明的其他特点和优点将会在下面的具体实施方式、附图中详细的揭露。附图说明下面结合附图对本发明做进一步的说明：图1为本发明实施例1水库安全监控方法的流程图。具体实施方式下面结合本发明实施例的附图对本发明实施例的技术方案进行解释和说明，但下述实施例仅为本发明的优选实施例，并非全部。基于实施方式中的实施例，本领域技术人员在没有做出创造性劳动的前提下所获得其他实施例，都属于本发明的保护范围。在下文描述中，出现诸如术语“内”、“外”、“上”、“下”、“左”、“右”等指示方位或者位置关系仅是为了方便描述实施例和简化描述，而不是指示或暗示所指的装置或者元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。实施例1：本实施例提供了一种水库安全监控装置，包括多个用于拍摄水库周边照片的摄像头以及主控板。这里水库周边主要是在水面边缘的陆地部分，当然，为了拍摄到陆地和水面的交界处，照片的内容物还可能包含水面，依据水库环境的不同，照片的内容物还可能包括岩石、树木以及天空等。下雨、下雪、由风引起的岩石移动和树木变形、飞鸟以及日照引起的光影变化等都会反应到照片中，引发照片内容物的变化，尤其是如果出现偷钓者，就很可能称为照片中内容物的一部分。选取其中一台摄像头进行举例，该摄像头于时刻T1、T2、……、Tn、……依次进行拍摄，其中T1＜T2＜……＜Tn、……。其拍摄的照片会发送至主控板进行数据处理。参见图1，基于上述水库安全监控装置，本实施例提供了一种水库安全监控方法，包括：步骤S1：于时刻Tn和Tn+1分别抓取水库周边的照片An和An+1，由于照片An和An+1是同一台相机进行拍摄的，故而照片A1、A2、...、An和An+1，乃至后续拍摄的照片An+2等均具有相同的拍摄边界；步骤S2：对照片An和An+1分别进行分割，以获得若干对比区，其中分割的模式是依照空间坐标分割线进行分割，而非通过景物，其原因在前述已经说明，照片中内容物可能位置发生变化，乃至发生增减，因此采用固定的空间坐标分割线照片进行分割，能够获得稳定边界的对比区，同时由于照片An和An+1拍摄边界也相同，故而照片An分割得到的每个对比区都能够在照片An+1分割得到的所有对比区中找到对应的对比区，照片An分割得到的对比区以及与其对应的由照片An+1分割得到的对比区组成n号对比区比对组，n号对比区比对组的数量和照片An分割得到的对比区数量相同；常规的，对比区的边界为矩形；由于照片An和An+1拍摄时间不同，因此其内容物会发生变化，导致照片An和An+1之间在色度值和/或灰度值上会存在一定差异，具体到每组n号对比区比对组中的两个对比区之间都可能会存在一定色度值和/或灰度值上的差异。具体到偷钓行为，其具体行为过程为偷钓人员携带钓具从水库外围到达水面边缘的过程，因此整个过程中偷钓人员及其行囊会占据较大空间，整个过程一旦被摄像头拍摄到，就很容易引发照片内容物的巨大变化。由此可见，偷钓人员出现在摄像头面前的时候是引发照片An和An+1之间产生较大总差异值的可能性情况之一，针对照片An和An+1之间的总差异值设定一第二差异值阈值，也就是说，一旦判断出照片An和An+1存在较大差异的情况下，就可以初步判断摄像头前出现了偷钓人员，继而对管理人员进行针对照片An+1的预警，反之，则不需要进行预警。但是需要注意的是，水库周边生态环境一般都较好，因此常常会有一部分野生动物，比如鸟类栖息，很多情况下这部分鸟类是水鸟，他们会在水面移动，或者停留在树上后引发树枝晃动，这些行为同样很容易引发照片An和An+1之间产生较大的总差异值，这就极大增加了预警误报的频率，反而增加了管理人员在处理预警信号以及正常工作之间的切换频率，增加了管理人员的管理成本。还有一种情况，例如阵风，会使得树枝剧烈晃动，水面也会产生较大晃动，这种情况同样会导致照片An和An+1之间产生较大的总差异值，进而发生误报。由此可见，误报的比例会非常高。为了能够针对这一情况进行改善，提升预警的准确率，本实施例提供了：步骤S3：依据n号对比区比对组对应的内容物对每组n号对比区比对组赋予权重，此外对n号对比区比对组内的对比区分别进行比对，以获得每组n号对比区比对组的差异值；额外设定了第一差异值阈值，筛选出差异值大于第一差异值阈值的n号对比区比对组，仅由这部分n号对比区比对组的差异值配合权重对照片An和An+1之间的总差异值进行构成，也就是说，An和An+1之间的总差异值等于各个n号对比区比对组的差异值进行加权求和。所有n号对比区比对组的差异值共同构成了照片An和An+1之间的总差异值，而n号对比区比对组的权重系数反映的是具体每组n号对比区比对组占照片An和An+1之间的差异构成的比例；以偷钓人员移动为例，其携带的行囊体积较大，在移动过程中如果出现在对比区极大可能会导致对比区产生剧烈变化，同时偷钓人员不太可能同时出现太多，也不太可能在全部对比区中同时出现，因此不太可能所有对比区同时发生较大变化，因此如果n号对比区比对组的差异值不大，低于第一差异值阈值，则可以认为该n号对比区比对组的内容物大概率不存在偷钓人员，这些n号对比区比对组即使存在一定差异值，可能是一些体积较小的鸟类或者树枝晃动等情况引起的，该差异值不具有偷钓人员的信息量，故而不应纳入针对偷钓人员预警的考量，不应计入照片An和An+1之间的总差异值。又例如，偷钓人员往往是在地面附近移动，其移动过程为了保护钓具也会尽量避免与树木发生碰撞，也因此，内容物为树木的n号对比区比对组的差异值由偷钓人员引起的可能性较小。钓竿较为细长，偷钓人员不可能在水面上方，因此偷钓人员在偷钓过程中对内容物为水面的n号对比区比对组的差异值贡献也较小。因此针对内容物主要为树木和水面的n号对比区比对组，其权重可以设置较小。当然，由于偷钓人员是在水面边缘进行偷钓，因此内容物为水面边缘的n号对比区比对组的差异值也有一定概率是由偷钓人员引发的，针对这部分n号对比区比对组的权重可以适中或者略高。优选的，有且仅有部分对比区的内容物仅包括水库水面，并且保证摄像机的监控范围包括地面。由此分割得到的内容物仅包括水库水面的对比区比对组的权重系数为0，以此避免水库水面处对应差异值的计算，通过前述推理可知，此方案能够在不明显降低预警准确度的情况下，降低照片An和An+1之间的总差异值之间的计算量，从而在偷钓人员出现在对比区内的时候提升预警的时效性。而如果n号对比区比对组的内容物仅包含地面的情况下，风沙移动或者体积较小的鸟类并不容易引发较为明显的差异值，这种情况下在进行第一差异值阈值比较过程中可能就被剔除了，反之可以认为当其产生较大差异值的情况时大概率是由偷钓人员引起的，较大差异值和偷钓人员之间存在较强关联性，因此针对这部分n号对比区比对组的权重可以提升，换言之，n号对比区比对组的权重近似表达的是其对应内容物包含偷钓人员信息的概率，而该概率实际上是和n号对比区比对组对应的主要内容物息息相关的，通过对比区的主要内容物，能够对其权重有一个较为客观准确的估算。换言之，本实施例通过对筛选出的n号对比区比对组的差异值进行加权求和，计算得到照片An和An+1之间的总差异值。其中，筛选过程有效去掉了噪声，不仅降低了总差异值的计算量，也提升了最终预警的准确性，减少非偷钓人员引起的n号对比区比对组的差异值对最终预警准确率的影响。更进一步的，通过权重表达差异值是由偷钓人员引发的这一可能性概率，如果一部分该可能性较小的n号对比区比对组，只有其对应的差异值足够大，才会对照片An和An+1之间的总差异值产生明显影响，而该可能性较大的n号对比区比对组，只有在其差异值近乎忽略的情况，才不会对An和An+1之间的总差异值产生明显影响，通过该底层运算逻辑有效提升了预警的准确性。摄像头监控过程是连续进行的，后续于时刻Tn+2抓取水库周边的照片An+2，并对照片An+2进行分割，以获得若干对比区，其分割方式与照片An+1的分割方式一致，故而分割照片An+2得到的对比区可以与照片An+1分割得到的对比区组成若干组n+1号对比区比对组，相应的每组n+1号对比区比对组均有对应的n号对比区比对组。若针对n号对比区未进行提示预警，则Tn+1-Tn=Tn+2-Tn+1，若针对n号对比区进行提示预警，说明可能监测到了偷钓人员，则Tn+1-Tn＞Tn+2-Tn+1，以提升监控频率。在此基础上，如果针对若针对照片An+1发生提示预警，则可以默认照片An+1中出现了偷钓人员的图像信息，那么可以认为，差异值最大的n号对比区比对组中两个对比区对应的内容物差异产生原因是偷钓人员，且对应的偷钓人员的图像信息是所有n号对比区比对组中最大的。那么有理由认为，在拍摄照片An+2的时候，偷钓人员依然至少部分位于差异值最大的n号对比区比比对组对应的对比区中，故而可以认为，对应的n+1号对比区比对组的差异值大概率是由偷钓人员移动引起的，因此，如果针对若针对照片An+1发生提示预警，可以找出差异值最大的n号对比区比对组并提升对应的n+1号对比区比对组的权重，以此提升针对照片An+2是否进行提示预警的准确性。当然，由于n号对比区比对组的差异值产生时间为Tn+1-Tn，而n+1号对比区比对组的差异值产生时间为Tn+2-Tn+1，差异值的产生时间降低会使得因偷钓人员移动产生的差异值降低，为了适应这一变化，在计算n+1号对比区比对组的差异值的时候适当下调第一差异值阈值，以避免在计算An+2和An+1之间的总差异值的时候对一部分偷钓人员移动产生的影响发生遗漏，尽可能减少针对照片An+2预警漏报情况的发生。更进一步的，若针对n号对比区发生提示预警，可以对与差异值最大的若干n号对比区比对组对应的若干n+1号对比区比对组的权重进行增加。但是考虑到前述关于权重部分的描述，这部分增加权重的n+1号对比区比对组对应的内容物还应当与差异值最大的若干n号对比区比对组对应的内容物相邻且相关。由于移动或其他活动往往是连续的，因此偷钓人员往往是在相邻的几个对比区之间进行连续移动，而不会间隔一部分对比区移动。同时，偷钓人员也不可能从陆地移动至水面正上方，最常见的情况，增加权重的n+1号对比区比对组对应的内容物通常组成连续的道路。通过这种对权重增加对象进行额外限制，有效降低针对照片An+2的警报误报率。也正因此，内容物仅包括地面的n号对比区比对组的权重大于内容物不包括地面的n号对比区比对组的权重。有别于传统的差异值计算过程，本实施例差异值由对比区之间的色度差值和灰度差值进行加权求和计算得到，其中灰度差值的权重系数不大于色度差值权重的20%，即针对差异值计算并未完全忽略灰度差，这是由于偷钓人员进行偷钓时天气一般较好，也因此偷钓人员在水库中移动的过程很可能会在地面上产生影子，这部分影子就包含了偷钓人员的信息并可能对n+1号对比区比对组的差异值产生影响。当然，树叶晃动、云层飘动等情况也可能对灰度差值造成影响，但是不会对色度差值造成明显影响。考虑到偷钓人员的影子伴随偷钓人员出现和变化，因此本实施例设定色度差阈值以及灰度差阈值，若针对n号对比区发生提示预警，且差异值最大的n号对比区比对组中色度差值超过色度差阈值，说明对应的对比区中很大概率已经出现了偷钓人员，具有其相邻内容物的n号对比区比对组中即使没有明显色度差值，也很可能会因偷钓人员的影子引发明显的灰度差值，因此具有与差异值最大的n号对比区比对组相邻且相关的内容物的n+1号对比区比对组在色度差值小于色度差阈值且灰度差值大于灰度差阈值时提升灰度差值权重，此举极大增加了警报的准确性，降低漏报情况的发生。针对部分阴天情况，所有照片都会产生明显的灰度差值。为了降低因这种情况导致发生预警误报，计算筛选出的n号对比区比对组的灰度差值的方差，设定方差阈值，若灰度差值的方差小于方差阈值，则说明灰度差值的引发原因大概率是天气变化，故而可以降低所有n+1号对比区比对组的灰度差值的权重，以降低误预警概率。实施例2：本实施例与实施例1的区别在于，一部分摄像头的拍摄范围重叠，重叠范围为单独的对比区。此时主控板可以通过不同摄像头传输的照片对同一个对比区对应的n号对比区比对组的差异值进行计算比对，以判断是否有摄像头出现故障，还能够减少拍摄死角的产生。以上所述，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，熟悉该本领域的技术人员应该明白本发明包括但不限于附图和上面具体实施方式中描述的内容。任何不偏离本发明的功能和结构原理的修改都将包括在权利要求书的范围中。
