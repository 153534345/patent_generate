标题title
电子设备及其掉电保护方法、装置、存储介质
摘要abst
本发明涉及一种电子设备及其掉电保护方法、装置、存储介质，其中，电子设备包括相互分离的系统数据区和业务数据区，且系统数据区的可用性高于业务数据区，掉电保护方法包括：在电子设备发生系统掉电异常时，获取当前业务数据；将当前业务数据暂存到系统数据区，以便在电子设备恢复供电时将暂存到系统数据区的当前业务数据保存到业务数据区。由此，能够从与业务无关性的基础特性层面彻底解决设备掉电时数据存在不完整的问题，极大地降低了应用层的事务容错处理逻辑。
权利要求书clms
1.一种电子设备的掉电保护方法，其特征在于，所述电子设备包括相互分离的系统数据区和业务数据区，且所述系统数据区的可用性高于所述业务数据区，所述掉电保护方法包括：在所述电子设备发生系统掉电异常时，获取当前业务数据；将所述当前业务数据暂存到所述系统数据区，以便在所述电子设备恢复供电时将暂存到所述系统数据区的当前业务数据保存到所述业务数据区。2.根据权利要求1所述的电子设备的掉电保护方法，其特征在于，在将所述当前业务数据暂存到所述系统数据区之前，还确定结构化的业务数据请求，以便将所述结构化的业务数据请求和所述当前业务数据一起暂存到所述系统数据区。3.根据权利要求2所述的电子设备的掉电保护方法，其特征在于，在所述电子设备恢复供电时，将暂存到所述系统数据区的当前业务数据保存到所述业务数据区，包括：解析所述结构化的业务数据请求，获得所述当前业务数据的存储信息；根据所述存储信息将所述当前业务数据保存到所述业务数据区。4.根据权利要求2所述的电子设备的掉电保护方法，其特征在于，将所述结构化的业务数据请求和所述当前业务数据一起暂存到所述系统数据区，包括：根据所述结构化的业务数据请求确定所述当前业务数据中未保存到所述业务数据区的业务数据，将所述结构化的业务数据请求和所述当前业务数据中未保存到所述业务数据区的业务数据一起暂存到所述系统数据区。5.根据权利要求4所述的电子设备的掉电保护方法，其特征在于，在所述电子设备恢复供电时，将暂存到所述系统数据区的当前业务数据保存到所述业务数据区，包括：解析所述结构化的业务数据请求，获得所述当前业务数据的存储信息；根据所述存储信息将所述当前业务数据中未保存到所述业务数据区的业务数据续存到所述业务数据区。6.根据权利要求3所述的电子设备的掉电保护方法，其特征在于，根据所述存储信息将所述当前业务数据保存到所述业务数据区，包括：根据所述存储信息确定所述当前业务数据中在系统掉电异常时已经保存到所述业务数据区的业务数据，并根据所述当前业务数据对所述当前业务数据中在系统掉电异常时已经保存到所述业务数据区的业务数据进行覆盖。7.根据权利要求1所述的电子设备的掉电保护方法，其特征在于，在所述电子设备恢复供电时，还将接收到的新业务数据请求继续保存到所述系统数据区，且排在所述当前业务数据对应的数据请求之后，直至在将暂存到所述系统数据区的当前业务数据保存到所述业务数据区后，获取所述新业务数据请求，并根据所述新业务数据请求将对应的业务数据保存到所述业务数据区。8.根据权利要求1所述的电子设备的掉电保护方法，其特征在于，在所述电子设备恢复供电时，暂停接收所有业务数据请求，直至将暂存到所述系统数据区的当前业务数据保存到所述业务数据区。9.根据权利要求1-8中任一项所述的电子设备的掉电保护方法，其特征在于，还包括：在所述电子设备供电正常时，将业务数据直接保存到所述业务数据区。10.一种计算机可读存储介质，其特征在于，其上存储有电子设备的掉电保护程序，该电子设备的掉电保护程序被处理器执行时实现根据权利要求1-9中任一项所述的电子设备的掉电保护方法。11.一种电子设备，其特征在于，包括存储器、处理器及存储在存储器上并可在处理器上运行的电子设备的掉电保护程序，所述处理器执行所述电子设备的掉电保护程序时，实现根据权利要求1-9中任一项所述的电子设备的掉电保护方法。12.一种电子设备的掉电保护装置，其特征在于，所述电子设备包括相互分离的系统数据区和业务数据区，且所述系统数据区的可用性高于所述业务数据区，所述掉电保护装置包括：获取模块，用于在所述电子设备发生系统掉电异常时，获取当前业务数据；暂存模块，用于将所述当前业务数据暂存到所述系统数据区，以便在所述电子设备恢复供电时将暂存到所述系统数据区的当前业务数据保存到所述业务数据区。
说明书desc
技术领域本发明涉及数据处理技术领域，尤其涉及一种电子设备的掉电保护方法、一种计算机可读存储介质、一种电子设备以及一种电子设备的掉电保护装置。背景技术家庭用户级嵌入式设备并没有企业级的机房供电系统，经常会出现电源输入丢失的情况，所以大部分嵌入式设备都会配置大电容或预备电池来保证设备在掉电时还可以工作一段时间。为了尽量保证设备在掉电后的可用时长，一般的做法是在延迟比较短的时间后，优先关闭功耗大的外设，比如SSD。而如果此时正有数据流向SSD写数据，可能会出现数据不完整，导致业务出现异常，甚至会损坏SSD。相关技术中，在应用层做处理，具体是在感知到设备掉电后，立即停止所有数据传输，如果是事务传输过程中掉电，则在设备启动完成后进行事务数据回滚。但是，应用层处理会极大地增加业务逻辑的复杂度，而且需要针对每一次关键事务处理，开发针对性的事务回滚逻辑，并且每一个涉及业务数据的应用层服务都需要增加该逻辑。发明内容要解决的技术问题鉴于现有技术的上述缺点、不足，本发明提供一种电子设备及其掉电保护方法、装置、存储介质，其解决了在应用层采用事务回滚逻辑来保证掉电后数据完整性时存在的业务逻辑复杂、且需要开发针对性的事务回滚逻辑的技术问题。技术方案为了达到上述目的，本发明采用的主要技术方案包括：第一方面，本发明实施例提供一种电子设备的掉电保护方法，电子设备包括相互分离的系统数据区和业务数据区，且系统数据区的可用性高于业务数据区，掉电保护方法包括：在电子设备发生系统掉电异常时，获取当前业务数据；将当前业务数据暂存到系统数据区，以便在电子设备恢复供电时将暂存到系统数据区的当前业务数据保存到业务数据区。本发明实施例提出的电子设备的掉电保护方法，在电子设备发生系统掉电异常时，获取当前业务数据，并将当前业务数据暂存到系统数据区，以便在电子设备恢复供电时将暂存到系统数据区的当前业务数据保存到业务数据区。由此，基于系统数据区和业务数据区分离，且系统数据区可用性高于业务数据区的条件下，将业务数据先缓存到系统数据区来保证本次事务的原子化完成，并在设备启动恢复完成后自动地将系统数据区中缓存的业务数据及时恢复到业务数据区，从与业务无关性的基础特性层面彻底解决设备掉电时数据存在不完整的问题，极大地降低了应用层的事务容错处理逻辑。可选地，在将当前业务数据暂存到系统数据区之前，还确定结构化的业务数据请求，以便将结构化的业务数据请求和当前业务数据一起暂存到系统数据区。可选地，在电子设备恢复供电时，将暂存到系统数据区的当前业务数据保存到业务数据区，包括：解析结构化的业务数据请求，获得当前业务数据的存储信息；根据存储信息将当前业务数据保存到业务数据区。可选地，将结构化的业务数据请求和当前业务数据一起暂存到系统数据区，包括：根据结构化的业务数据请求确定当前业务数据中未保存到业务数据区的业务数据，将结构化的业务数据请求和当前业务数据中未保存到业务数据区的业务数据一起暂存到系统数据区。可选地，在电子设备恢复供电时，将暂存到系统数据区的当前业务数据保存到业务数据区，包括：解析结构化的业务数据请求，获得当前业务数据的存储信息；根据存储信息将当前业务数据中未保存到业务数据区的业务数据续存到业务数据区。可选地，根据存储信息将当前业务数据保存到业务数据区，包括：根据存储信息确定当前业务数据中在系统掉电异常时已经保存到业务数据区的业务数据，并根据当前业务数据对当前业务数据中在系统掉电异常时已经保存到业务数据区的业务数据进行覆盖。可选地，在电子设备恢复供电时，还将接收到的新业务数据请求继续保存到系统数据区，且排在当前业务数据对应的数据请求之后，直至在将暂存到系统数据区的当前业务数据保存到业务数据区后，获取新业务数据请求，并根据新业务数据请求将对应的业务数据保存到业务数据区。可选地，在电子设备恢复供电时，暂停接收所有业务数据请求，直至将暂存到系统数据区的当前业务数据保存到业务数据区。可选地，电子设备的掉电保护方法，还包括：在电子设备供电正常时，将业务数据直接保存到业务数据区。第二方面，本发明实施例提供一种计算机可读存储介质，其上存储有电子设备的掉电保护程序，该电子设备的掉电保护程序被处理器执行时实现上述的电子设备的掉电保护方法。本发明实施例提出的计算机可读存储介质，通过上述的电子设备的掉电保护方法，能够从与业务无关性的基础特性层面彻底解决设备掉电时数据存在不完整的问题，极大地降低了应用层的事务容错处理逻辑。第三方面，本发明实施例提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的电子设备的掉电保护程序，处理器执行电子设备的掉电保护程序时，实现上述的电子设备的掉电保护方法。本发明实施例提出的电子设备，通过上述的电子设备的掉电保护方法，能够从与业务无关性的基础特性层面彻底解决设备掉电时数据存在不完整的问题，极大地降低了应用层的事务容错处理逻辑。第四方面，本发明实施例提供一种电子设备的掉电保护装置，电子设备包括相互分离的系统数据区和业务数据区，且系统数据区的可用性高于业务数据区，掉电保护装置包括：获取模块，用于在电子设备发生系统掉电异常时，获取当前业务数据；暂存模块，用于将当前业务数据暂存到系统数据区，以便在电子设备恢复供电时将暂存到系统数据区的当前业务数据保存到业务数据区。本发明实施例提出的电子设备的掉电保护装置，获取模块在电子设备发生系统掉电异常时，获取当前业务数据，暂存模块将当前业务数据暂存到系统数据区，以便在电子设备恢复供电时将暂存到系统数据区的当前业务数据保存到业务数据区。由此，基于系统数据区和业务数据区分离，且系统数据区可用性高于业务数据区的条件下，将业务数据先缓存到系统数据区来保证本次事务的原子化完成，并在设备启动恢复完成后自动地将系统数据区中缓存的业务数据及时恢复到业务数据区，从与业务无关性的基础特性层面彻底解决设备掉电时数据存在不完整的问题，极大地降低了应用层的事务容错处理逻辑。有益效果本发明的有益效果是：本发明的电子设备及其掉电保护方法、装置、存储介质，基于系统数据区和业务数据区分离，且系统数据区可用性高于业务数据区的条件下，将业务数据先缓存到系统数据区来保证本次事务的原子化完成，并在设备启动恢复完后自动地将系统数据区中缓存的业务数据及时恢复到业务数据区，因此相对于现有技术而言，能够从与业务无关性的基础特性层面彻底解决设备掉电时数据存在不完整的问题，达到了极大地降低应用层的事务容错处理逻辑的技术效果。附图说明图1为根据本发明一个实施例的电子设备的掉电保护方法的流程图；图2为根据本发明另一个实施例的电子设备的掉电保护方法的流程图；图3-图4为根据本发明一个具体示例的电子设备的数据保存示意图；图5为根据本发明一个实施例的电子设备的掉电保护装置的方框图。具体实施方式为了更好的解释本发明，以便于理解，下面结合附图，通过具体实施方式，对本发明作详细描述。本发明实施例提出的电子设备及其掉电保护方法、装置、存储介质，在电子设备发生系统掉电异常时，获取当前业务数据；将当前业务数据暂存到系统数据区，以便在电子设备恢复供电时将暂存到系统数据区的当前业务数据保存到业务数据区，其中，相互分离的系统数据区的可用性高于业务数据区。由此，基于系统数据区和业务数据区分离，且系统数据区可用性高于业务数据区的条件下，将业务数据先缓存到系统数据区来保证本次事务的原子化完成，并在设备启动恢复完成后自动地将系统数据区中缓存的业务数据及时恢复到业务数据区，从与业务无关性的基础特性层面彻底解决设备掉电时数据存在不完整的问题，极大地降低了应用层的事务容错处理逻辑。为了更好的理解上述技术方案，下面将参照附图更详细地描述本发明的示例性实施例。虽然附图中显示了本发明的示例性实施例，然而应当理解，可以以各种形式实现本发明而不应被这里阐述的实施例所限制。相反，提供这些实施例是为了能够更清楚、透彻地理解本发明，并且能够将本发明的范围完整的传达给本领域的技术人员。图1为根据本发明一个实施例的电子设备的掉电保护方法的流程图，如图1所示，该电子设备的掉电保护方法包括以下步骤：步骤S102，在电子设备发生系统掉电异常时，获取当前业务数据。步骤S104，将当前业务数据暂存到系统数据区，以便在电子设备恢复供电时将暂存到系统数据区的当前业务数据保存到业务数据区。需要说明的是，在本申请中，电子设备包括相互分离的系统数据区和业务数据区，且系统数据区的可用性高于业务数据区。其中，系统数据区是指保存系统相关数据的非遗失器件，例如EMMC等非遗失存储器，业务数据区是指保存用户相关数据的非遗失器件，例如SSD等非遗失存储器；系统数据区的可用性高于业务数据区是指基于功耗考虑，系统数据区的供电时长高于业务数据区的供电时长。也就是说，将设备的数据区分离为系统数据区和业务数据区，且在掉电后，系统数据区的供电时长高于业务数据区的供电时长，在具体实施时，可采用两个数据存储器分别存储系统数据和业务数据，且在掉电后，用于存储系统数据的数据存储器的供电时长高于用于存储业务数据的数据存储器的供电时长。在电子设备工作过程中，当电子设备发生系统掉电异常时，电子设备中的简单备电系统，比如电容、后备电池等，开始给电子设备供电，例如给系统数据区和业务数据区持续供电一段时间，且给系统数据区的供电时长高于给业务数据区的供电时长，例如，给业务数据区的供电时长为3s，给系统数据区的供电时长高于3s以上。在该供电时间内，系统获取当前业务数据，并将当前业务数据暂存到系统数据区，以保证本次事务的原子化完成，而后在电子设备恢复供电时，自动识别系统数据区中的当前业务数据，并恢复至业务数据区，从而能够从系统层解决设备掉电后数据不完整的问题，使得事务能够完整的在设备上正常完成，而且应用层服务无需处理事务回滚逻辑，也即无需应用层十分敏感的感知设备掉电，进而可以在下一次事务请求时再告知设备掉电。在该示例中，基于系统数据区和业务数据区分离，且系统数据区可用性高于业务数据区的条件下，将业务数据先缓存到系统数据区来保证本次事务的原子化完成，并在设备启动恢复完成后自动地将系统数据区中缓存的业务数据及时恢复到业务数据区，从而从与业务无关性的基础特性层面彻底解决设备掉电时数据存在不完整的问题，极大地降低了应用层的事务容错处理逻辑。图2为根据本发明另一个实施例的电子设备的掉电保护方法的流程图，如图2所示，该电子设备的掉电保护方法包括以下步骤：步骤S202，在电子设备发生系统掉电异常时，获取当前业务数据，并确定结构化的业务数据请求。步骤S204，将结构化的业务数据请求和当前业务数据一起暂存到系统数据区。需要说明的是，结构化数据也称作行数据，是由二维表结构来逻辑表达和实现的数据，严格地遵循数据格式与长度规范，主要通过关系型数据库进行存储和管理，与结构化数据相对的是不适于由二维表来表现的非结构化数据，包括所有格式的办公文档、XML、HTML、各类报表、图片和音频、视频信息等。在本申请中，为了在电子设备发生系统掉电异常时，能够将结构化和非结构化的业务数据存储至系统数据区，同时在电子设备恢复供电时，能够快速且准确地将暂存到系统数据区的业务数据恢复至业务数据区，可在电子设备发生系统掉电异常时，接收当前业务数据，并确定结构化的业务数据请求，以及将结构化的业务数据请求和当前业务数据一起暂存到系统数据区。可选地，将结构化的业务数据请求和当前业务数据一起暂存到系统数据区，包括：根据结构化的业务数据请求确定当前业务数据中未保存到业务数据区的业务数据，将结构化的业务数据请求和当前业务数据中未保存到业务数据区的业务数据一起暂存到系统数据区。也就是说，在业务数据传输过程中设备发生系统掉电异常时，掉电前的一部分业务数据已经存储至业务数据区，而掉电后的另一部分业务数据还未存储至业务数据区，此时可根据结构化的业务数据请求确定未保存至业务数据区的业务数据，并将结构化的业务数据请求和当前业务数据中未保存至业务数据区的业务数据一起暂存到系统数据区。步骤S206，在电子设备恢复供电时，解析结构化的业务数据请求，获得当前业务数据的存储信息，并根据存储信息将当前业务数据保存到业务数据区。具体地，在电子设备掉电并恢复供电后，先将暂存至系统数据区的业务数据恢复至业务数据区，具体可以是先解析结构化的业务数据请求得到业务数据的存储信息，而后根据存储信息将系统数据区的业务数据保存至业务数据区，从而快速且准确地将数据恢复至业务数据区。可选地，根据存储信息将当前业务数据保存到业务数据区，包括：根据存储信息将当前业务数据中未保存到业务数据区的业务数据续存到业务数据区。也就是说，在电子设备掉电并恢复供电后，可先解析结构化的业务数据请求得到业务数据的存储信息，而后根据存储信息将系统数据区中之前未保存至业务数据区的业务数据续存至业务数据区。可选地，根据存储信息将当前业务数据保存到业务数据区，包括：根据存储信息确定当前业务数据中在系统掉电异常时已经保存到业务数据区的业务数据，并根据当前业务数据对当前业务数据中在系统掉电异常时已经保存到业务数据区的业务数据进行覆盖。需要说明的是，在该示例中，在设备发生系统掉电异常时，将当前业务数据和结构化的业务数据请求一起存储至系统数据区，在设备恢复供电后，解析结构化的业务数据请求得到当前业务数据的存储信息，进而根据存储信息将当前业务数据全部存储至业务数据区，此时掉电异常时存储至业务数据区的业务数据将被暂存在系统数据区的业务数据覆盖。上述示例中，通过基于结构化的业务数据请求，可以在电子设备发生系统掉电异常时，将结构化和非结构化的业务数据存储至系统数据区，同时在电子设备恢复供电时，能够快速且准确地将暂存到系统数据区的业务数据恢复至业务数据区。同时，可采用续存方式或覆盖方式将系统数据区中暂存的业务数据恢复至业务数据区，提高了数据恢复的灵活性。需要说明的是，在业务数据恢复期间，可采用不同的方式来保证业务数据的顺序性，具体可根据业务情况选择。作为一种方式，在电子设备恢复供电时，还将接收到的新业务数据请求继续保存到系统数据区，且排在当前业务数据对应的数据请求之后，直至在将暂存到系统数据区的当前业务数据保存到业务数据区后，获取新业务数据请求，并根据新业务数据请求将对应的业务数据保存到业务数据区。也就是说，在电子设备恢复供电后，如果有新的业务数据请求，则将该新的业务数据请求保存在系统数据区，且位于暂存至系统数据区的当前业务数据对应的业务数据请求之后，直至暂存至系统数据区的当前业务数据恢复至业务数据区后，获取新的业务数据请求，并根据新的业务数据请求将对应的业务数据保存到业务数据区。作为另一种方式，在电子设备恢复供电时，暂停接收所有业务数据请求，直至将暂存到系统数据区的当前业务数据保存到业务数据区。也就是说，在电子设备恢复供电后，如果有新的业务数据请求，则可先暂停所有的业务数据请求的接收，对外统一提供错误码“数据修复中，请等待”，直至将暂存到系统数据区的当前业务数据保存到业务数据区，而后开始接收新的业务数据请求，并根据新的业务数据请求将对应的业务数据保存到业务数据区。上述示例中，在数据恢复期间，通过将接收的新的业务数据请求保存至业务数据区或者暂停所有的业务数据请求的接收，直至暂存到系统数据区的当前业务数据保存到业务数据区，再根据新的业务数据请求将对应的业务数据保存到业务数据区，能够保证业务数据的顺序性。在一些实施例中，电子设备的掉电保护方法，还包括：在电子设备供电正常时，将业务数据直接保存到业务数据区。即在电子设备供电正常时，直接将当前业务数据保存至业务数据区。图3-图4为根据本发明一个实施例的电子设备的数据保存示意图，在该示例中，增加了缓存逻辑层，封装系统层写入业务数据请求。如图3所示，在电子设备供电正常时，缓存逻辑层在接收到应用层发送的业务数据后，直接保存业务数据到业务数据区，并在数据保存完成后，接收业务数据区的反馈信息，并将反馈信息传输至应用层。在电子设备发生系统掉电异常时，缓存逻辑层确定结构化的业务数据请求，并将结构化的业务数据请求和业务数据保存至系统数据区，并在数据保存完成后，接收系统数据区的反馈信息，并将反馈信息传输至应用层。如图4所示，在电子设备掉电并恢复供电时，缓存逻辑层启动并进行数据恢复服务，如果系统数据区具有结构化的业务数据请求，此时缓存逻辑层先从系统数据区获取结构化的业务数据请求和业务数据，并在数据获取成功后，解析结构化的业务数据请求，以及根据结构化的业务数据请求将业务数据保存至业务数据区，并在保存完成后接收到业务数据区的数据保存成功的反馈信息。进一步的，在图4中，在数据恢复期间，若有新的业务数据需要保存至业务数据区，可将接收的新的业务数据请求保存至业务数据区或者暂停所有的业务数据请求的接收，直至暂存到系统数据区的当前业务数据保存到业务数据区，再根据新的业务数据请求将对应的业务数据保存到业务数据区，具体可根据业务情况选择。综上所述，本发明实施例提出的电子设备的掉电保护方法，基于系统数据区和业务数据区分离，且系统数据区可用性高于业务数据区的条件下，将业务数据先缓存到系统数据区来保证本次事务的原子化完成，并在设备启动恢复完成后自动地将系统数据区中缓存的业务数据及时恢复到业务数据区，从与业务无关性的基础特性层面彻底解决设备掉电时数据存在不完整的问题，极大地降低了应用层的事务容错处理逻辑。本发明的实施例还提供一种计算机可读存储介质，其上存储有电子设备的掉电保护程序，该电子设备的掉电保护程序被处理器执行时实现上述的电子设备的掉电保护方法。本发明实施例提出的计算机可读存储介质，通过上述的电子设备的掉电保护方法，能够从与业务无关性的基础特性层面彻底解决设备掉电时数据存在不完整的问题，极大地降低了应用层的事务容错处理逻辑。本发明的实施例还提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的电子设备的掉电保护程序，处理器执行电子设备的掉电保护程序时，实现上述的电子设备的掉电保护方法。本发明实施例提出的电子设备，通过上述的电子设备的掉电保护方法，能够从与业务无关性的基础特性层面彻底解决设备掉电时数据存在不完整的问题，极大地降低了应用层的事务容错处理逻辑。本发明的实施例还提供一种电子设备的掉电保护装置，电子设备包括相互分离的系统数据区和业务数据区，且系统数据区的可用性高于业务数据区，如图5所示，掉电保护装置包括：获取模块10和暂存模块20。其中，获取模块10用于在电子设备发生系统掉电异常时，获取当前业务数据；暂存模块20用于将当前业务数据暂存到系统数据区，以便在电子设备恢复供电时将暂存到系统数据区的当前业务数据保存到业务数据区。可选地，获取模块10还用于确定结构化的业务数据请求；暂存模块20还用于将结构化的业务数据请求和当前业务数据一起暂存到系统数据区。可选地，暂存模块20具体用于：解析结构化的业务数据请求，获得当前业务数据的存储信息，并根据存储信息将当前业务数据保存到业务数据区。可选地，暂存模块20具体用于：根据结构化的业务数据请求确定当前业务数据中未保存到业务数据区的业务数据，将结构化的业务数据请求和当前业务数据中未保存到业务数据区的业务数据一起暂存到系统数据区。可选地，暂存模块20具体用于：解析结构化的业务数据请求，获得当前业务数据的存储信息，并根据存储信息将当前业务数据中未保存到业务数据区的业务数据续存到业务数据区。可选地，暂存模块20具体用于：根据存储信息确定当前业务数据中在系统掉电异常时已经保存到业务数据区的业务数据，并根据当前业务数据对当前业务数据中在系统掉电异常时已经保存到业务数据区的业务数据进行覆盖。可选地，暂存模块20还用于：在电子设备恢复供电时，将接收到的新业务数据请求继续保存到系统数据区，且排在当前业务数据对应的数据请求之后，直至在将暂存到系统数据区的当前业务数据保存到业务数据区后，获取新业务数据请求，并根据新业务数据请求将对应的业务数据保存到业务数据区。可选地，暂存模块20还用于：在电子设备恢复供电时，暂停接收所有业务数据请求，直至将暂存到系统数据区的当前业务数据保存到业务数据区。可选地，电子设备的掉电保护装置，还包括：存储模块，用于在电子设备供电正常时，将业务数据直接保存到业务数据区。需要说明的是，关于本申请的电子设备的掉电保护装置的描述，请参考本申请的关于电子设备的掉电保护方法的描述，具体这里不再赘述。本发明实施例提出的电子设备的掉电保护装置，基于系统数据区和业务数据区分离，且系统数据区可用性高于业务数据区的条件下，将业务数据先缓存到系统数据区来保证本次事务的原子化完成，并在设备启动恢复完成后自动地将系统数据区中缓存的业务数据及时恢复到业务数据区，从与业务无关性的基础特性层面彻底解决设备掉电时数据存在不完整的问题，极大地降低了应用层的事务容错处理逻辑。在本发明的描述中，需要理解的是，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括一个或者更多个该特征。在本发明的描述中，“多个”的含义是两个或两个以上，除非另有明确具体的限定。在本发明中，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”、“固定”等术语应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或成一体；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连；可以是两个元件内部的连通或两个元件的相互作用关系。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本发明中的具体含义。在本发明中，除非另有明确的规定和限定，第一特征在第二特征 “上”或“下”，可以是第一和第二特征直接接触，或第一和第二特征通过中间媒介间接接触。而且，第一特征在第二特征“之上”、“上方”和“上面”，可以是第一特征在第二特征正上方或斜上方，或仅仅表示第一特征水平高度高于第二特征。第一特征在第二特征“之下”、“下方”和“下面”，可以是第一特征在第二特征正下方或斜下方，或仅仅表示第一特征水平高度低于第二特征。在本说明书的描述中，术语“一个实施例”、“一些实施例”、“实施例”、“示例”、“具体示例”或“一些示例”等的描述，是指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不必须针对的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任一个或多个实施例或示例中以合适的方式结合。此外，在不相互矛盾的情况下，本领域的技术人员可以将本说明书中描述的不同实施例或示例以及不同实施例或示例的特征进行结合和组合。尽管上面已经示出和描述了本发明的实施例，可以理解的是，上述实施例是示例性的，不能理解为对本发明的限制，本领域的普通技术人员在本发明的范围内可以对上述实施例进行改动、修改、替换和变型。
