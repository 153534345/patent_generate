标题title
一种跨境电商动态调整加签服务的方法
摘要abst
本发明公开了一种跨境电商动态调整加签服务的方法，实现跨境电商平台对订单进行批量加签；每个加签客户端为加载有Ukey的PC机；加签客户端管理模块动态调整加签客户端是否参与加签的动作；其中多个加签客户端均与加签客户端管理模块进行Socket链接；加签客户端管理模块接收加签客户端的链接和注册请求，并判断加签客户端数目需要缩减、扩展或者维持；如果为缩减删除被缩减的加签客户端链接；在加签客户端与加签客户端管理模块链接后，向加签客户端发送维持链接信息从而继续进行加签动作；如果为扩展，则增加没有参与加签动作的客户端与加签客户端管理模块进行Socket链接。本发明能够提高订单众多时的整体加签效率。
权利要求书clms
1.一种跨境电商动态调整加签服务的方法，实现跨境电商平台对接收到的第三方电商平台发送的订单信息进行批量加签；其特征在于：第三方跨境电商平台将订单信息发送至跨境电商平台的业务服务器；业务服务器对订单信息进行识别处理后发送相应的加签请求至加签管理服务器；加签管理服务器的加签订单管理模块将加签请求信息分发至多个加签客户端进行加签，并将加签好的订单信息返回至加签订单管理模块；每个加签客户端为加载有Ukey的PC机；所述加签管理服务器还包括加签客户端管理模块；参与加签动作的加签客户端均通过加签客户端管理模块采用动态调整加签客户端的方法实现其是否参与加签的动作；所述动态调整加签客户端的方法为：多个加签客户端均与加签客户端管理模块进行Socket链接；加签客户端管理模块接收加签客户端的链接和注册请求，并判断参与加签订单请求的加签客户端数目需要缩减或者扩展或者维持；如果加签客户端的数目判断为缩减，则删除被缩减的加签客户端链接；在加签客户端与加签客户端管理模块链接后，向加签客户端发送维持链接信息从而继续进行加签动作；如果加签客户端的数目判断为扩展，则增加没有参与加签动作的客户端与加签客户端管理模块进行Socket链接。2.根据权利要求1所述的一种跨境电商动态调整加签服务的方法，其特征在于：加签客户端与加签客户端管理模块进行Socket链接，具体为：加签客户端管理模块通过创建Socket监听，等待加签客户端的链接和注册；如果接收到链接成功，加签客户端管理模块创建onlineSocket对象，同时加签客户端创建对应的cSocket对象实现该加签客户端注册成功；所述onlineSocket对象和cSocket对象配对使用；加签客户端注册成功后，等待加签客户端管理模块的在线核实消息和加签订单管理模块的订单加签请求消息；如果没有接收到链接成功，则每隔预设时间再进行一次链接和注册尝试。3.根据权利要求2所述的一种跨境电商动态调整加签服务的方法，其特征在于：加签客户端管理模块判断加签客户端的数目为扩展，则增加没有参与加签动作的客户端与加签订单管理模块进行Socket链接，具体包括： 加签客户端管理模块接收到加签客户端的链接和注册请求时，遍历缓存中所有的注册客户端的最后使用时间lwTime与当时时间nTime的时间差定义为其最后使用时间差；当缓存中没有请求注册的加签客户端信息时，则接收该加签客户端的链接和注册请求，将该加签客户端的链接与注册请求信息进行Map和Redis注册；如果缓存中所有已注册的加签客户端的最后使用时间差小于都预设的最小使用时间差，则接收加签客户端的链接和注册请求，将该加签客户端的链接与注册请求信息进行Map和Redis注册；如果缓存中有一个加签客户端的最后使用时间差大于等于预设的最小使用时间差时，则对所有的加签客户端的的链接和注册请求进行忽略，不接收新的加签客户端注册。4.根据权利要求3所述的一种跨境电商动态调整加签服务的方法，其特征在于：如果加签客户端的数目判断为缩减，则删除被缩减的加签客户端链接，具体为：加签客户端管理模块以固定的频率轮询业务服务器缓存中加签客户端的注册信息并遍历缓存中的所有注册的加签客户端，计算出每个注册客户端的最后使用时间lwTime与当时时间nTime之间的时间差并定义为其最后使用时间差；如果该加签客户端最后使用时间差小于等于预设的最大使用时间差，则获取对应加签客户端注册信息的redis中的onlineSocket对象，获取其最后接收消息时间lrTime；如果nTime-lrTime≥gTime，其中gTime为预设的接收消息的间隔时间，向加签客户端发送确认链接消息；如果收到加签客户端回复消息，更新该加签客户端最后接收消息时间lrTime为当前时间；如果没有收到消息，则不处理；如果nTime-lrTime＞oTime时，其中oTime为预设的接收消息的超时时间， onlineSocket对象自动释放链接，并删除此加签客户端的注册信息，删除redis中的对应对象数据，并删除注册信息Map中的客户端IP注册数据；如果该加签客户端最后使用时间差大于预设的最大使用时间差，且缓存注册信息Map中的加签客户端注册数量大于1，则向加签客户端发送主动断开消息，并删除此加签客户端的注册信息，onlineSocket对象自动释放链接，删除redis中的对应对象数据，并删除注册信息Map中的客户端IP注册；当最后使用时间差大预设的使用时间差，但注册信息Map中的客户端注册数量等于1的情况下，则不做任何处理；所述预设最小使用时间差小于预设最大使用时间差。5.根据权利要求4所述的一种跨境电商动态调整加签服务的方法，其特征在于：所述加签订单管理模块实现加签请求信息的分发，具体包括以下步骤：加签订单管理模块从业务服务器的MQ消息队列中获取一个订单加签的请求，将该加签的请求加入待加签的票对象中；获取下一个订单加签的请求，将该加签的请求也加入待加签的票对象中；从而实现循环处理MQ消息队列中的待加签订单；当待加签的票对象中的订单数达到预设的最大订单数时，则轮询使用redis中onlineSocket对象，向对应的加签客户端发送一票的订单加签请求；当待加签的票对象中的订单数没有达到设定的最大订单数，但超过预设的等待时间时，判断票对象不为无效且其大小大于0，轮询使用redis中onlineSocket对象，向对应的加签客户端发送一票的订单加签请求，更新缓存Map中的对应加签客户端的最后使用时间lwTime为当时时间nTime；收到订单加签回复消息后，并且是加签成功的消息，更新onlineSocket的中最后接收消息时间lrTime为当前时间nTime；否则，轮询使用redis中下一个onlineSocket对象，向对应的加签客户端发送一票的订单加签请求。
说明书desc
技术领域本发明涉及跨境电子商务技术领域，具体涉及一种跨境电商动态调整加签服务的方法。背景技术目前跨境电商行业，国家海关要求每笔跨境订单按照三单对碰的要求，将订单、运单、支付单分别由3家主体推送海关，进行三单对碰，海关通过以后才可以放行发货。将订单推送海关的过程时，海关给每个跨境电商主体配备一个加签卡Ukey，将数据推送海关前，需要利用加签卡Ukey对订单信息进行加签后推送，否则海关认为是无效数据。一般情况下，跨境电商订单的加签有两种方法：一种是企业申请USBKey加签卡，将其插在订单处理的服务器上，这个要求订单处理的服务器只能在本地，而不能在云端，且每分钟最大加签订单数量为12000单；二是购买海关数据中心的物理加签服务设备，该服务设备每分钟最大加签订单数量为50万单左右，但购买的成本为70万人民币。预估到未来的时间内，在短时间内会存在跨境电商订单的加签数量快速增加的情况，从而需要提高跨境电商订单的流转效率。以目前的需求来说，跨境电商订单的流程效率需求可能需求达到每分钟10万单以上，甚至100万单。从低成本高效角度来说，希望通过增加多个加插Ukey的PC端来实现提高加签订单数量的目的，但是如果采用多个加插Ukey的PC端，如何实现多个PC端同时与业务服务器链接、如何根据订单的加签流量控制PC端的多少参与加签动作等等如何实现的问题均没有现有的技术可以借鉴。因此需要对加签管理服务端、加签客户端以及业务服务端等进行合理的算法以实现资源分配。能够实现在跨境电商订单比较少的情况下，维持一个作为加签客户端的PC端正常加签工作；在跨境电商订单数量众多时，使多个作为加签客户端的PC机并行加签，因此需要一种跨境电商动态调整加签服务的方法。发明内容1.所要解决的技术问题：针对上述技术问题，本发明提供一种跨境电商动态调整加签服务的方法，通过加签管理服务器的加签订单管理模块对多个加签客户端进行资源分配来实现。在跨境电商订单比较少的情况下，维持一个加签客户端正常加签工作；在跨境电商订单数量众多时，通过加签订单管理模块实现多个客户端注册加签的方式，横向动态扩展加签客户端的个数，使多个加签客户端并行加签，以提高订单众多时的整体加签效率。2.技术方案：一种跨境电商动态调整加签服务的方法 ，实现跨境电商平台对接收到的第三方电商平台发送的订单信息进行批量加签；其特征在于：第三方跨境电商平台将订单信息发送至跨境电商平台的业务服务器；业务服务器对订单信息进行识别处理后发送相应的加签请求至加签管理服务器；加签管理服务器的加签订单管理模块将加签请求信息分发至多个加签客户端进行加签，并将加签好的订单信息返回至加签订单管理模块；每个加签客户端为加载有Ukey的PC机；所述加签管理服务器还包括加签客户端管理模块；参与加签动作的加签客户端均通过加签客户端管理模块采用动态调整加签客户端的方法实现其是否参与加签的动作；所述动态调整加签客户端的方法为：多个加签客户端均与加签客户端管理模块进行Socket链接；加签客户端管理模块接收加签客户端的链接和注册请求，并判断参与加签订单请求的加签客户端数目需要缩减或者扩展或者维持；如果加签客户端的数目判断为缩减，则删除被缩减的加签客户端链接；在加签客户端与加签客户端管理模块链接后，向加签客户端发送维持链接信息从而继续进行加签动作；如果加签客户端的数目判断为扩展，则增加没有参与加签动作的客户端与加签客户端管理模块进行Socket链接。进一步地，加签客户端与加签客户端管理模块进行Socket链接，具体为：加签客户端管理模块通过创建Socket监听，等待加签客户端的链接和注册；如果接收到链接成功，加签客户端管理模块创建onlineSocket对象，同时加签客户端创建对应的cSocket对象实现该加签客户端注册成功；所述onlineSocket对象和cSocket对象配对使用；加签客户端注册成功后，等待加签客户端管理模块的在线核实消息和加签订单管理模块的订单加签请求消息；如果没有接收到链接成功，则每隔预设时间再进行一次链接和注册尝试。进一步地，加签客户端管理模块判断加签客户端的数目为扩展，则增加没有参与加签动作的客户端与加签订单管理模块进行Socket链接，具体包括： 加签客户端管理模块接收到加签客户端的链接和注册请求时，遍历缓存中所有的注册客户端的最后使用时间lwTime与当时时间nTime的时间差定义为其最后使用时间差；当缓存中没有请求注册的加签客户端信息时，则接收该加签客户端的链接和注册请求，将该加签客户端的链接与注册请求信息进行Map和Redis注册；如果缓存中所有已注册的加签客户端的最后使用时间差小于都预设的最小使用时间差，则接收加签客户端的链接和注册请求，将该加签客户端的链接与注册请求信息进行Map和Redis注册；如果缓存中有一个加签客户端的最后使用时间差大于等于预设的最小使用时间差时，则对所有的加签客户端的的链接和注册请求进行忽略，不接收新的加签客户端注册。进一步地，如果加签客户端的数目判断为缩减，则删除被缩减的加签客户端链接，具体为：加签客户端管理模块以固定的频率轮询业务服务器缓存中加签客户端的注册信息并遍历缓存中的所有注册的加签客户端，计算出每个注册客户端的最后使用时间lwTime与当时时间nTime之间的时间差并定义为其最后使用时间差；如果该加签客户端最后使用时间差小于等于预设的最大使用时间差，则获取对应加签客户端注册信息的redis中的onlineSocket对象，获取其最后接收消息时间lrTime；如果nTime-lrTime≥gTime，其中gTime为预设的接收消息的间隔时间，向加签客户端发送确认链接消息；如果收到加签客户端回复消息，更新该加签客户端最后接收消息时间lrTime为当前时间；如果没有收到消息，则不处理；如果nTime-lrTime＞oTime时，其中oTime为预设的接收消息的超时时间， onlineSocket对象自动释放链接，并删除此加签客户端的注册信息，删除redis中的对应对象数据，并删除注册信息Map中的客户端IP注册数据；如果该加签客户端最后使用时间差大于预设的最大使用时间差，且缓存注册信息Map中的加签客户端注册数量大于1，则向加签客户端发送主动断开消息，并删除此加签客户端的注册信息，onlineSocket对象自动释放链接，删除redis中的对应对象数据，并删除注册信息Map中的客户端IP注册；当最后使用时间差大预设的使用时间差，但注册信息Map中的客户端注册数量等于1的情况下，则不做任何处理；所述预设最小使用时间差小于预设最大使用时间差。进一步地，所述加签订单管理模块实现加签请求信息的分发，具体包括以下步骤：加签订单管理模块从业务服务器的MQ消息队列中获取一个订单加签的请求，将该加签的请求加入待加签的票对象中；获取下一个订单加签的请求，将该加签的请求也加入待加签的票对象中；从而实现循环处理MQ消息队列中的待加签订单；当待加签的票对象中的订单数达到预设的最大订单数时，则轮询使用redis中onlineSocket对象，向对应的加签客户端发送一票的订单加签请求；当待加签的票对象中的订单数没有达到设定的最大订单数，但超过预设的等待时间时，判断票对象不为无效且其大小大于0，轮询使用redis中onlineSocket对象，向对应的加签客户端发送一票的订单加签请求，更新缓存Map中的对应加签客户端的最后使用时间lwTime为当时时间nTime；收到订单加签回复消息后，并且是加签成功的消息，更新onlineSocket的中最后接收消息时间lrTime为当前时间nTime；否则，轮询使用redis中下一个onlineSocket对象，向对应的加签客户端发送一票的订单加签请求。3.有益效果：本发明的一种跨境电商动态调整加签服务的方法，设置多个加载有Ukey的PC机作为加签客户端协同进行加签，实现在跨境电商订单的加签数量快速增加时，对定单实现批量地加签。本发明的一种跨境电商动态调整加签服务的方法，加签管理服务器设置加签客户端管理模块，加签客户端管理模块实现对加签客户端进行逻辑管理，系统的加签订单频率比较低时，保持比较少的加签客户端参与加签动作，如果系统的加签订单频率比较高时，保证与之适应的多个加签客户端参与加签动作，从而实现对加签客户端的动态调节。综上所述，本方案可以有效提高订单众多时的整体加签效率，且经济实用。附图说明图1为本发明中涉及的跨境电商动态调整加签服务的系统结构图；图2为具体实施例中加签客户端管理模块与加签客户端链接以及加签客户端实现扩展的逻辑实现流程图；图3为具体实施例中加签客户端管理模块实现逻辑维持和动态缩减流程图；图4为具体实施例中加签订单管理模块的订单分发实现流程图。具体实施方式下面结合附图对本发明进行具体的说明。一种跨境电商动态调整加签服务的方法 ，实现跨境电商平台对接收到的第三方电商平台发送的订单信息进行批量加签；其特征在于：如附图1所示，第三方跨境电商平台将订单信息发送至跨境电商平台的业务服务器；业务服务器对订单信息进行识别处理后发送相应的加签请求至加签管理服务器；加签管理服务器的加签订单管理模块将加签请求信息分发至多个加签客户端进行加签，并将加签好的订单信息返回至加签订单管理模块；每个加签客户端为加载有Ukey的PC机；所述加签管理服务器还包括加签客户端管理模块；参与加签动作的加签客户端均通过加签客户端管理模块采用动态调整加签客户端的方法实现其是否参与加签的动作；所述动态调整加签客户端的方法为：多个加签客户端均与加签客户端管理模块进行Socket链接；加签客户端管理模块接收加签客户端的链接和注册请求，并判断参与加签订单请求的加签客户端数目需要缩减或者扩展或者维持；如果加签客户端的数目判断为缩减，则删除被缩减的加签客户端链接；在加签客户端与加签客户端管理模块链接后，向加签客户端发送维持链接信息从而继续进行加签动作；如果加签客户端的数目判断为扩展，则增加没有参与加签动作的客户端与加签客户端管理模块进行Socket链接。进一步地，加签客户端与加签客户端管理模块进行Socket链接，具体为：加签客户端管理模块通过创建Socket监听，等待加签客户端的链接和注册；如果接收到链接成功，加签客户端管理模块创建onlineSocket对象，同时加签客户端创建对应的cSocket对象实现该加签客户端注册成功；所述onlineSocket对象和cSocket对象配对使用；加签客户端注册成功后，等待加签客户端管理模块的在线核实消息和加签订单管理模块的订单加签请求消息；如果没有接收到链接成功，则每隔预设时间再进行一次链接和注册尝试。进一步地，加签客户端管理模块判断加签客户端的数目为扩展，则增加没有参与加签动作的客户端与加签订单管理模块进行Socket链接，具体包括： 加签客户端管理模块接收到加签客户端的链接和注册请求时，遍历缓存中所有的注册客户端的最后使用时间lwTime与当时时间nTime的时间差定义为其最后使用时间差；当缓存中没有请求注册的加签客户端信息时，则接收该加签客户端的链接和注册请求，将该加签客户端的链接与注册请求信息进行Map和Redis注册；如果缓存中所有已注册的加签客户端的最后使用时间差小于都预设的最小使用时间差，则接收加签客户端的链接和注册请求，将该加签客户端的链接与注册请求信息进行Map和Redis注册；如果缓存中有一个加签客户端的最后使用时间差大于等于预设的最小使用时间差时，则对所有的加签客户端的的链接和注册请求进行忽略，不接收新的加签客户端注册。进一步地，如果加签客户端的数目判断为缩减，则删除被缩减的加签客户端链接，具体为：加签客户端管理模块以固定的频率轮询业务服务器缓存中加签客户端的注册信息并遍历缓存中的所有注册的加签客户端，计算出每个注册客户端的最后使用时间lwTime与当时时间nTime之间的时间差并定义为其最后使用时间差；如果该加签客户端最后使用时间差小于等于预设的最大使用时间差，则获取对应加签客户端注册信息的redis中的onlineSocket对象，获取其最后接收消息时间lrTime；如果nTime-lrTime≥gTime，其中gTime为预设的接收消息的间隔时间，向加签客户端发送确认链接消息；如果收到加签客户端回复消息，更新该加签客户端最后接收消息时间lrTime为当前时间；如果没有收到消息，则不处理；如果nTime-lrTime＞oTime时，其中oTime为预设的接收消息的超时时间， onlineSocket对象自动释放链接，并删除此加签客户端的注册信息，删除redis中的对应对象数据，并删除注册信息Map中的客户端IP注册数据；如果该加签客户端最后使用时间差大于预设的最大使用时间差，且缓存注册信息Map中的加签客户端注册数量大于1，则向加签客户端发送主动断开消息，并删除此加签客户端的注册信息，onlineSocket对象自动释放链接，删除redis中的对应对象数据，并删除注册信息Map中的客户端IP注册；当最后使用时间差大预设的使用时间差，但注册信息Map中的客户端注册数量等于1的情况下，则不做任何处理；所述预设最小使用时间差小于预设最大使用时间差。进一步地，所述加签订单管理模块实现加签请求信息的分发，具体包括以下步骤：加签订单管理模块从业务服务器的MQ消息队列中获取一个订单加签的请求，将该加签的请求加入待加签的票对象中；获取下一个订单加签的请求，将该加签的请求也加入待加签的票对象中；从而实现循环处理MQ消息队列中的待加签订单；当待加签的票对象中的订单数达到预设的最大订单数时，则轮询使用redis中onlineSocket对象，向对应的加签客户端发送一票的订单加签请求；当待加签的票对象中的订单数没有达到设定的最大订单数，但超过预设的等待时间时，判断票对象不为无效且其大小大于0，轮询使用redis中onlineSocket对象，向对应的加签客户端发送一票的订单加签请求，更新缓存Map中的对应加签客户端的最后使用时间lwTime为当时时间nTime；收到订单加签回复消息后，并且是加签成功的消息，更新onlineSocket的中最后接收消息时间lrTime为当前时间nTime；否则，轮询使用redis中下一个onlineSocket对象，向对应的加签客户端发送一票的订单加签请求。具体实施例：如附图1所示，包括了采用本方案从接收到订单信息至加签完成等待三单对碰的整个流程；第三方跨境电商平台将订单信息发送至跨境电商平台的业务服务器；业务服务器对订单信息进行识别处理后发送相应的加签请求至加签管理服务器；加签管理服务器设置加签订单管理模块、加签客户端管理模块；加签订单管理模块接收加签请求信息并将加签请求分发至多个加签客户端进行加签，加签好的订单信息返回至加签订单管理模块；加签客户端管理模块通过逻辑管理实现对加签客户端的数目缩减、扩展或者维持。本发明中，每张加签Ukey卡单独建立一个物理加签客户端，作为独立的物理服务器，理论上来说可以根据加签卡的数量进行无限制增加和扩展，以达到并行动态扩展加签客户端数量的效果。如附图2所示，加签客户端与加签客户端管理模块中实现链接为：加签客户端创建一个Socket客户端服务对象cSocket，并向客户端管理模块进行链接和注册。同时，加签客户端管理模块创建ServerSocket对象，通过调用accept方法监听加签客户端的链接和注册请求，当接收到一个请求时，返回一个socket对象onlineSocket放入redis，获取加签客户端IP放入缓存Map。其中redis中的key=+，value为onlineSocket，onlineSocket中包含最后接收客户端消息时间lrTime；缓存Map的key=+，value=客户端最后使用时间lwTime。加签客户端在加签管理模块中注册成功后，等待加签客户端管理模块的在线核实消息和加签订单管理模块发送来的订单加签的请求消息。如果加签客户端没有与加签客户端管理模块链接和注册成功，则每隔预设时间再进行一次尝试。本方案中对加签客户端实现动态扩展，如附图2所示，加签客户端管理模块接收到加签客户端的链接和注册请求时，遍历缓存Map中所有的注册客户端的最后使用时间lwTime与当时时间nTime的时间差并定义为其最后使用时间差。当缓存Map中没有注册客户端对象时，则接收加签客户端的链接和注册请求。当所有注册客户端的最后使用时间差nTime-lwTime都小于预设的最小使用时间差，则接收加签客户端的链接和注册请求。当有一个加签客户端最后使用时间差大于等于预设的最小使用时间差，则对所有的加签客户端的的链接和注册请求进行忽略，不接收新的加签客户端注册。本方案中对加签客户端实现逻辑维持和动态缩减：如附图3所示，加签客户端管理模块每隔预设的频率轮询缓存Map中的客户端注册信息，遍历所有的注册客户端的最后使用时间lwTime与当时时间nTime的时间差并定义为其最后使用时间差。当加签客户端的最后使用时间差nTime-lwTime小于等于最大使用时间差时，则获取redis中的onlineSocket对象，获取最后接收该加签客户端的消息时间lrTime。如果当前时间nTime-lrTime大于等于设定的间隔时间gTime，其中gTime通常设置在1-3分钟内，向加签客户端发送确认链接消息。如果收到加签客户端的回复消息，设置lrTime为当前时间nTime；如果没有收到消息，则不处理。如果nTime-lrTime＞oTime；oTime为预设的超时时间，通常在5-10分钟内；onlineSocket自动释放链接，删除此加签客户端的注册信息，删除redis中的对应对象数据，并删除Map中的客户端IP注册。当加签客户端的最后使用时间差nTime-lwTime都大于最大使用时间差比如15分钟时，且缓存Map中的客户端注册数量大于1的情况下，则向加签客户端发送主动断开消息，并删除此加签客户端的注册信息，onlineSocket自动释放链接，删除redis中的对应对象数据，并删除Map中的客户端IP注册。当加签客户端的最后使用时间差nTime-lwTime都大于最大使用时间差比如15分钟时，但缓存Map中的客户端注册数量等于1的情况下，则不做任何处理。本方案中通过加签订单管理模块实现对加签订单的分发；如附图4所示，加签订单管理模块从业务服务器的MQ消息队列中获取一个订单order1加签的请求，加入待加签的票对象pTeamObject中；获取下一个订单order2加签的请求，也加入待加签的票对象pTeamObject中；从而实现循环处理MQ中的待加签订单。当票对象pTeamObject中的订单数达到设定的最大订单数时，则轮询使用redis中onlineSocket对象，向对应的加签客户端发送一票的订单加签请求。当票对象pTeamObject中的订单数没有达到设定的最大订单数，但超过设置的等待时间outTime时，判断票对象pTeamObject不为无效且其大小大于0，也轮询使用redis中onlineSocket对象，向对应的加签客户端发送一票的订单加签请求，更新缓存Map中的对应加签客户端的最后使用时间lwTime。收到订单加签回复消息后，并且是加签成功的消息，更新onlineSocket的中lrTime，否则，轮询使用redis中下一个onlineSocket对象，向对应的加签客户端发送一票的订单加签请求。虽然本发明已以较佳实施例公开如上，但它们并不是用来限定本发明的，任何熟习此技艺者，在不脱离本发明之精神和范围内，自当可作各种变化或润饰，因此本发明的保护范围应当以本申请的权利要求保护范围所界定的为准。
