标题title
基于无人机的室内代客泊车系统
摘要abst
本发明公开了一种基于无人机的室内代客泊车系统，属于智能泊车技术领域，包括：场端、无人机及车端，路径规划、高精地图存储场端，无人机包含感知、运动、决策，无需车辆本身有任何感知规划能力，极大降低车辆配置成本和开发难度。无人机和场端通过现有设备完成高精度定位，匹配提前制作好地图，再通过无人机与车辆几何中心重合得到车辆实时精确位置，避免地下多层车库导致的通信和定位丢失，无需车辆具备定位能力。在停车场遇到拥堵场景，由场端和无人机根据优先级规则合理排序，避免单车各自规划导致拥堵无法错车。会车过程中，无人机互相配合，消除盲区，保障高优先级车辆在较小空间也能通行。
权利要求书clms
1.一种基于无人机的室内代客泊车系统，其特征在于，包括：场端、无人机及车端；所述场端，用于存储预先采集并搭建的停车场高精度地图，根据各无人机发回的无人机定位信息和识别到的所服务车辆的位置信息，在高精度地图中添加无人机定位信息和所服务车辆的位置信息，实时刷新车位信息，分配自动泊车的目标车位，基于高精度地图和无人机发回的无人机定位信息和识别到的所服务车辆的位置信息，决策规划所服务车辆的行车路径后，向无人机发送行车路径；车端，用于从无人机获取行车路径，分析得到行进距离、左右转向角和制动请求，将行进距离信息转换成车辆行进所需的扭矩和制动压力，根据左右转角信息确定轮胎转角，完成泊车。2.根据权利要求1所述的系统，其特征在于，所述场端包括：数据中心、路径规划模块及第一通信模块；所述数据中心用于存储停车场的高精度地图、目标标识点信息和车位分配状态，在高精度地图中形成网格信息及网格点坐标信息；第一通信模块，分布在停车场，提供无人机与场端的通信；路径规划模块，用于基于数据中心的高精度地图信息和无人机返回信息，决策规划所服务车辆的行车路径。3.根据权利要求2所述的系统，其特征在于，所述无人机，包括：感知模块、定位模块、决策处理器及第二通信模块；第二通信模块集成了与车端的通信能力，以及和场端的通信能力；感知模块包含摄像头、毫米波雷达及激光雷达；定位模块通过来自场端的高精度地图信息和本无人机相对于周边特征点的距离信息确定无人机位置，通过感知模块的输入定位车辆的位置；决策处理器根据无人机和车辆位置信息，根据所服务车辆的行车路径向车端传输控制信息。4.根据权利要求3所述的系统，其特征在于，所述车端包括：第三通信模块和车辆横纵向控制模块；第三通信模块，完成和无人机的加密通信，向车辆横纵向控制模块传输无人机传输的行进距离、左右转向角和制动请求；车辆横纵向控制模块，用于将第三通信模块接收到的行进距离转换成车辆行进所需的扭矩和制动压力，根据左右转角信息确定轮胎转角。5.根据权利要求4所述的系统，其特征在于，所述路径规划模块，用于在场端收到泊入指令，释放无人机后，无人机与场端通过第一通信模块进行初级定位，在初级定位的区域范围上，结合无人机本身搭载的摄像头和毫米波雷达，识别到距离周边墙壁和车道边线的水平距离，再根据第一通信模块收到的高精度地图信息，进一步完成无人机的精确坐标锁定，根据高精度地图、无人机精确坐标和上下客点位置信息，规划无人机飞行路径，并将无人机飞行路径发送到无人机，其中，泊入指令中包括所服务车辆的车辆型号信息、车牌号和上下客点位置信息。6.根据权利要求5所述的系统，其特征在于，所述决策处理器，用于根据无人机实时坐标和无人机飞行路径控制无人机到达所服务车辆上方，根据车辆型号信息，确定所服务车辆长、宽和高，并控制无人机悬停到所服务车辆几何中心点正上方，以使无人机中心坐标与所服务车辆几何中心坐标重合，控制感知模块确定所服务车辆周边安全区域，并获取场端发送的所服务车辆上下车位点四周的盲区内是否有异物指令，若所服务车辆上下车位点四周的盲区内无异物，则控制感知模块检测安全区域内环境，并通过第二通信模块与车端握手，取得横纵向控制权，在握手完毕后，接收由场端发送的目标车位在高精度地图的位置以及所服务车辆的行车路径，控制车辆按纵向速度行进和转向，沿行车路径抵达目标车位周边，通过感知模块监测安全区域是否有障碍物，若有障碍物，则控制车辆减速，若障碍物进入所服务车辆上下车位点四周的盲区内，控制车端以最大减速度刹停车辆。7.根据权利要求6所述的系统，其特征在于，所述决策处理器，用于在安全区域探测到障碍物时，确认是否为同停车场无人机控制的其他车辆，若不是同停车场无人机控制的其他车辆，则向场端发送所服务车辆重新规划请求，若是同停车场无人机控制的其他车辆，则双方同时向场端数据中心确认优先级，比对为低优先级的车辆则根据对方规划的行车路径，控制车辆靠边或后退脱离对方行车路径线并制动静止，同时控制低优先级车辆所属无人机脱离与所服务车辆几何中心的重合，悬停在所服务车辆靠近会车端的上方，检测两车交汇时的间隙，当间隙低于预设距离时对高优先级车辆无人机发出无线警告信号。8.根据权利要求7所述的系统，其特征在于，场端指派的目标车位优先级从前往后依次为：远离出口与停车场主路位置车位、远离出口位置车位及远离停车场主路位置车位。9.根据权利要求8所述的系统，其特征在于，在安全区域探测到障碍物，并确认是同停车场无人机控制的其他车辆时，设定的优先级从前往后依次为：离场车辆、入库低优先级车位的车辆及入库高优先级车位的车辆，同一优先级车辆按先握手车辆先行原则。10.根据权利要求9所述的系统，其特征在于，所述路径规划模块，还用于在场端收到泊出指令后，场端释放无人机抵达待泊出车辆，按照规划路径泊出到车主所在坐标。
说明书desc
技术领域本发明属于智能泊车技术领域，更具体地，涉及一种基于无人机的室内代客泊车系统。背景技术现有远距离泊车或代客泊车方案通过车辆前视摄像头，毫米波雷达，超声波雷达等探知周围障碍物，通过高精度地图或本车视觉SLAM构建地图，规划行车路线，通过环视摄像头或超声波雷达探查车位，由车辆控制器控制转向、驱动和制动将车挪入车位。然而，目前方案主要存在以下缺陷：要实现在室内停车场进行无人的代客泊车，需要感知周边环境、扫描车位、对突发环境进行反应，由于光线、空间影响，对于车辆传感器硬件和软件算法要求很高。由于在室内进行遥控泊车，车载高精地图定位受到建筑物屏蔽的影响，失去先验信息，车辆难以定位和规划路径。如果通过车载图像或激光雷达SLAM进行建图和定位，需要提前绕场或采集，难以应对陌生场地自动泊车需求。车辆在复杂场景下的控制需要有规划控制和环境感知的软硬件预埋，而在近未来会有大量的L2等级的自动驾驶车辆，具备横纵向控制接口但没有L4自动驾驶能力。在同一场地有多台单车进行代客自动泊车时，对于路口拥堵、相临车位同时泊车等协同场景，没有统一的协调方和协调规则，易出现所有车按照自身规则都无法动弹或长时间等待的情形。因此，目前的无人代客泊车在实现上还存在一定的局限性。发明内容针对现有技术的以上缺陷或改进需求，本发明提出了一种基于无人机的室内代客泊车系统，可以更加方便、具有延展性和降低成本，克服现有技术中存在的局限性。为实现上述目的，本发明提供了一种基于无人机的室内代客泊车系统，包括：场端、无人机及车端；所述场端，用于存储预先采集并搭建的停车场高精度地图，根据各无人机发回的无人机定位信息和识别到的所服务车辆的位置信息，在高精度地图中添加无人机定位信息和所服务车辆的位置信息，实时刷新车位信息，分配自动泊车的目标车位，基于高精度地图和无人机发回的无人机定位信息和识别到的所服务车辆的位置信息，决策规划所服务车辆的行车路径后，向无人机发送行车路径；车端，用于从无人机获取行车路径，分析得到行进距离、左右转向角和制动请求，将行进距离信息转换成车辆行进所需的扭矩和制动压力，根据左右转角信息确定轮胎转角，完成泊车。在一些可选的实施方案中，所述场端包括：数据中心、路径规划模块及第一通信模块；所述数据中心用于存储停车场的高精度地图、目标标识点信息和车位分配状态，在高精度地图中形成网格信息及网格点坐标信息；第一通信模块，分布在停车场，提供无人机与场端的通信；路径规划模块，用于基于数据中心的高精度地图信息和无人机返回信息，决策规划所服务车辆的行车路径。在一些可选的实施方案中，所述无人机，包括：感知模块、定位模块、决策处理器及第二通信模块；第二通信模块集成了与车端的通信能力，以及和场端的通信能力；感知模块包含摄像头、毫米波雷达及激光雷达；定位模块通过来自场端的高精度地图信息和本无人机相对于周边特征点的距离信息确定无人机位置，通过感知模块的输入定位车辆的位置；决策处理器根据无人机和车辆位置信息，根据所服务车辆的行车路径向车端传输控制信息。在一些可选的实施方案中，所述车端包括：第三通信模块和车辆横纵向控制模块；第三通信模块，完成和无人机的加密通信，向车辆横纵向控制模块传输无人机传输的行进距离、左右转向角和制动请求；车辆横纵向控制模块，用于将第三通信模块接收到的行进距离转换成车辆行进所需的扭矩和制动压力，根据左右转角信息确定轮胎转角。在一些可选的实施方案中，所述路径规划模块，用于在场端收到泊入指令，释放无人机后，无人机与场端通过第一通信模块进行初级定位，在初级定位的区域范围上，结合无人机本身搭载的摄像头和毫米波雷达，识别到距离周边墙壁和车道边线的水平距离，再根据第一通信模块收到的高精度地图信息，进一步完成无人机的精确坐标锁定，根据高精度地图、无人机精确坐标和上下客点位置信息，规划无人机飞行路径，并将无人机飞行路径发送到无人机，其中，泊入指令中包括所服务车辆的车辆型号信息、车牌号和上下客点位置信息。在一些可选的实施方案中，所述决策处理器，用于根据无人机实时坐标和无人机飞行路径控制无人机到达所服务车辆上方，根据车辆型号信息，确定所服务车辆长、宽和高，并控制无人机悬停到所服务车辆几何中心点正上方，以使无人机中心坐标与所服务车辆几何中心坐标重合，控制感知模块确定所服务车辆周边安全区域，并获取场端发送的所服务车辆上下车位点四周的盲区内是否有异物指令，若所服务车辆上下车位点四周的盲区内无异物，则控制感知模块检测安全区域内环境，并通过第二通信模块与车端握手，取得横纵向控制权，在握手完毕后，接收由场端发送的目标车位在高精度地图的位置以及所服务车辆的行车路径，控制车辆按纵向速度行进和转向，沿行车路径抵达目标车位周边，通过感知模块监测安全区域是否有障碍物，若有障碍物，则控制车辆减速，若障碍物进入所服务车辆上下车位点四周的盲区内，控制车端以最大减速度刹停车辆。在一些可选的实施方案中，所述决策处理器，用于在安全区域探测到障碍物时，确认是否为同停车场无人机控制的其他车辆，若不是同停车场无人机控制的其他车辆，则向场端发送所服务车辆重新规划请求，若是同停车场无人机控制的其他车辆，则双方同时向场端数据中心确认优先级，比对为低优先级的车辆则根据对方规划的行车路径，控制车辆靠边或后退脱离对方行车路径线并制动静止，同时控制低优先级车辆所属无人机脱离与所服务车辆几何中心的重合，悬停在所服务车辆靠近会车端的上方，检测两车交汇时的间隙，当间隙低于预设距离时对高优先级车辆无人机发出无线警告信号。在一些可选的实施方案中，场端指派的目标车位优先级从前往后依次为：远离出口与停车场主路位置车位、远离出口位置车位及远离停车场主路位置车位。在一些可选的实施方案中，在安全区域探测到障碍物，并确认是同停车场无人机控制的其他车辆时，设定的优先级从前往后依次为：离场车辆、入库低优先级车位的车辆及入库高优先级车位的车辆，同一优先级车辆按先握手车辆先行原则。在一些可选的实施方案中，所述路径规划模块，用于在场端收到泊出指令后，场端释放无人机抵达待泊出车辆，按照规划路径泊出到车主所在坐标。总体而言，通过本发明所构思的以上技术方案与现有技术相比，能够取得下列有益效果：室内停车场无人代客泊车，不再需要高级车辆传感器硬件和软件算法。高精地图定位已经在场端搭建，快速使用，无需扫图，定位准确。快速匹配市场上已经存在的大量L2自动驾驶，无需要求新型生产车辆。可以统一对路口拥堵、相邻车位同时泊车等场景进行协调，避免单车控制系统导致的所有车按照自身规则都无法动弹或长时间等待的情形。附图说明图1是本发明实施例提供的一种基于无人机的室内代客泊车系统的结构示意图；图2是本发明实施例提供的一种盲区设置示意图；图3是本发明实施例提供的一种基于无人机的室内代客泊车系统工作流程示意图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。此外，下面所描述的本发明各个实施方式中所涉及到的技术特征只要彼此之间未构成冲突就可以相互组合。在本发明实例中，“第一”、“第二”等是用于区别不同的对象，而不是用于描述特定的顺序或先后次序。在本发明实施例中，代客泊车：Automated Valet Parking，用户在指定下客点下车，通过移动终端或车机操作下达泊车指令，车辆在接收到泊车指令后可自动行驶到停车场的停车位，不需要用户操纵与监控。在取车时，用户通过移动终端APP下达取车指令，车辆在接收到取车指令后可以从停车位自动行驶到指定上客点接驾。属于L4自动驾驶。高精度地图：除普通地图的信息外，还包含车道信息，交通信号，周边特征环境等附加信息的地图，结合高精度定位载波相位差分技术，惯性传感单元等)，车辆可以准确定位自己和车道，误差在公分级，并获得附加在地图位置的其他周边信息。SLAM：Simultaneous Localization and Mapping，同时定位与地图构建，指搭载特定传感器的主体，在没有环境先验信息的情况下，于运动过程中建立环境的模型，同时估计自己的运动。如果这里的传感器主要为相机，那就称为“视觉SLAM”。场端：停车场的软硬件、模块、系统统称。如图1所示，本发明实施例提供的一种基于无人机的室内代客泊车系统由以下部分组成：场端数据中心，用于执行以下操作：a.存储停车场预先通过SLAM等手段采集并搭建的高精度环境地图；b.根据各无人机发回的无人机定位信息和识别到的所服务车辆的位置信息，统一在高精度环境地图中添加临时信息，其中，临时信息为无人机定位信息和识别到的所服务车辆的位置信息；c.实时刷新车位信息，统一分配自动泊车的目标车位；场端路径规划模块，基于数据中心存储的高精度环境地图信息和无人机返回信息，决策规划所服务车辆的行车路径；第一通信模块：分布在停车场，提供无人机与场端的通信；无人机，除无人机自身飞行控制设备外还包含第二通信模块、定位模块、感知模块和决策处理器，其中，第二通信模块集成了与车端的蓝牙/DSRC/V2X-DIRECT的通信能力，以及和场端的WIFI等通信能力；感知模块包含摄像头、毫米波雷达、激光雷达；定位模块通过来自场端的高精度环境地图信息和无人机相对于周边特征点的距离等信息确定无人机位置，通过感知模块的输入定位车辆的位置；决策处理器根据无人机和车辆位置信息，基于所服务车辆的行车路径向车辆传输控制信息；车端，包含第三通信模块和车辆横纵向控制模块，其中，第三通信模块完成和无人机的加密通信，向车辆横纵向控制模块传输无人机要求的行进距离、左右转向角和制动请求，横纵向控制模块将第三通信模块接收到的行进距离转换成所服务车辆行进所需的扭矩和制动压力，根据左右转角信息确定轮胎转角。在本发明实施例中，如图3所示，在代客泊车前，场端可借助第三方数据采集能力，通过激光雷达、视觉摄像头，构建整个停车场的高精度地图，同时形成网格信息及网格点坐标信息。在特定地点，例如坡道起始点，坡道结束点、拐角点，每层出入口，张贴特别标识，例如二维码或不同颜色或形状的反光贴，数据采集完毕后，场端数据中心存储有：停车场每一层及连接道路的高精度地图，特别标识点，车位分配状态。车辆到达上下客点后，通过车主APP与停车场完成确认，同时车辆绑定的牌号，型号信息被场端接收，场端将型号信息、车牌号、上下客点位置信息发送给无人机。场端释放无人机，无人机与场端可通过UWB/蓝牙/WiFi进行初级定位。在初级定位的区域范围基础上，结合无人机本身搭载的摄像头和毫米波雷达，识别到距离周边墙壁和车道边线的水平距离，根据第二通信模块收到的高精度地图信息，进一步完成无人机的精确坐标锁定，根据高精度地图和无人机精确坐标，场端规划无人机飞行路径，发送到无人机端，无人机根据实时坐标和飞行路径飞行到所服务车辆上方。根据所服务车辆的型号信息，确定所服务车辆尺寸，包括长，宽，高。悬停到所服务车辆几何中心点正上方，此时无人机中心坐标与所服务车辆几何中心坐标重合，无人机通过摄像头及毫米波雷达确定所服务车辆周边安全区域上下车位点四周场端监控确认盲区AB内无异物，如图2所示。若AB区域内无异物，则无人机通过摄像头开始检测安全区域S内环境，并开始与车端握手，取得横纵向控制权。当握手完毕，场端向无人机发送指定车位在高精度地图的位置以及规划的行车路径，车位指派优先级：远离出口与停车场主路位置车位＞远离出口位置车位＞远离停车场主路位置车位。无人机控制车辆按纵向速度V1行进和转向，沿规划路径抵达停车位附近，监测S区域是否有障碍物，如果有障碍物，控制车辆减速至V2，如果障碍物进入AB区域，立即以最大减速度刹停车辆。当探测到障碍物时，确认是否为同停车场无人机控制的其他车辆，如果不是，则向场端发送重新规划请求。如果是同停车场无人机控制的其他车辆，则双方同时向场端数据中心确认优先级，优先排列顺序：离场车辆＞入库低优先级车位的车辆＞入库高优先级车位的车辆，同一优先级车辆按先握手车辆先行原则。比对为低优先级的车辆由无人机根据对方规划路径，控制车辆靠边或后退脱离对方路径线并制动静止，同时低优先级车辆所属无人机脱离与所服务车辆几何中心的重合，悬停在所服务车辆靠近会车端的上方，检测两车交汇时的间隙，当间隙低于预设距离时对高优先级车辆无人机发出无线警告信号。此时高优先级无人机将对停下的低优先级车辆抑制“障碍物进入AB区域，立即以最大减速度刹停”的策略，按规划路径行驶，当低优先级车辆无人机发出报警时才紧急刹停。泊出取车流程与上述泊入类似，当车主抵达停车场划定的指定区域，场端通过蓝牙信号和监控摄像确认车主在高精地图坐标。车主暂时分享蓝牙钥匙权限给场端指定账号，场端释放无人机抵达停泊车辆，遥控点火控车后按照规划路径泊出到车主所在坐标。在本发明实施例中，除了数据存储，场端其他规划控制也可以在云端完成。本申请的基于无人机的室内代客泊车系统，其中，路径规划、高精地图存储场端，无人机包含感知、运动、决策，无需车辆本身有任何感知规划能力，极大降低车辆配置成本和开发难度，即使市场已经生产的低等级辅助驾驶车辆只要开放接口即可代客泊车。无人机和场端通过现有设备完成高精度定位，匹配提前制作好地图，再通过无人机与车辆几何中心重合得到车辆实时精确位置，避免地下多层车库导致的通信和定位丢失，无需车辆具备定位能力。在停车场遇到拥堵场景，由场端和无人机根据优先级规则合理排序，避免单车各自规划导致拥堵无法错车。会车过程中，无人机互相配合，消除盲区，保障高优先级车辆在较小空间也能通行。需要指出，根据实施的需要，可将本申请中描述的各个步骤/部件拆分为更多步骤/部件，也可将两个或多个步骤/部件或者步骤/部件的部分操作组合成新的步骤/部件，以实现本发明的目的。本领域的技术人员容易理解，以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明的保护范围之内。
