标题title
基于人工智能的园林行道树整形修剪识别方法及系统
摘要abst
本发明涉及基于人工智能的园林行道树整形修剪识别方法及系统，其采集行道树的RGB图像，得到行道树整体分割图；获取各行道树的主干的中心轴；根据行道树整体分割图，得到相邻两行道树树冠的分割线；根据中心轴、分割线以及两者之间的边缘信息，确定相邻两行道树的遮挡区域；根据各遮挡区域，确定相邻行道树的各遮挡轮廓信息，确定单个行道树分割图以及对应的茂密程度分布图；同时，得到各行道树分割图的置信度；根据各置信度以及茂密程度分布图，计算平均特征图；将平均特征图与茂密程度分布图作差，获得各偏差图；并计算偏差图的平均程度，当平均程度大于设定阈值，对当前行道树进行修剪；本发明能够对行道树的修剪进行准确识别。
权利要求书clms
1.基于人工智能的园林行道树整形修剪识别方法，其特征在于，包括以下步骤：采集行道树的RGB图像，利用语义分割网络得到行道树整体分割图；对所述行道树整体分割图进行图像处理，获取行道树整体边缘信息，得到各行道树的主干的中心轴，所述中心轴沿主干生长方向且使主干对称；根据所述行道树整体分割图，获取树冠分割图，得到相邻两行道树树冠的分割线；将其中一行道树的主干的中心轴、所述分割线以及其中一行道树的主干的中心轴与所述分割线之间的边缘信息围成的区域作为另一行道树的遮挡区域，将另一行道树的主干的中心轴、所述分割线以及另一行道树的主干的中心轴与所述分割线之间的边缘信息围成的区域作为其中一行道树的遮挡区域，得到两相邻行道树的遮挡区域；根据各遮挡区域，确定相邻行道树的各遮挡轮廓信息，根据所述遮挡轮廓信息和所述行道树整体边缘信息得到单个行道树分割图，进而获取单个行道树的茂密程度分布图；根据相邻行道树的各遮挡轮廓信息得到相邻两行道树的交错区域，计算交错区域的面积，根据述交错区域的面积与对应行道树的面积，得到每个行道树分割图的置信度；根据各置信度以及对应的单个行道树的茂密程度分布图，计算平均特征图；将所述平均特征图与所述茂密程度分布图作差，获得各偏差图；并计算偏差图的平均程度，当平均程度大于设定阈值，则对当前行道树进行修剪；所述遮挡轮廓信息的获取过程为：将各遮挡区域分别与所述RGB图像相乘得到对应的彩色图像；计算所述彩色图像的饱和度和明度；根据饱和度和明度，计算得到所述彩色图像中的像素的茂密程度；根据像素点的茂密程度的大小，获取茂密程度变化最大的轮廓点，各轮廓点构成对应行道树的轮廓信息；所述单个行道树的茂密程度分布图的获取方法为：根据其中一行道树的轮廓信息以及另一行道树的中心轴，获得另一行道树的中心轴到轮廓信息之间区域的散点，利用最小二乘法对该散点进行拟合得到另一行道树的未被遮挡区域的密度分布多项式函数；根据另一行道树分割图以及密度分布多项式函数，得到该行道树分割图各像素点对应的茂密程度；将各茂密程度替换所述单个行道树分割图中的像素值，得到单个行道树的茂密程度分布图。2.根据权利要求1所述的基于人工智能的园林行道树整形修剪识别方法，其特征在于，所述分割线的获取过程为：沿与所述中心轴垂直的方向对所述行道树树冠分割图进行划分，获取上树冠分割图的上边缘信息和下树冠分割图的下边缘信息；根据所述上边缘信息得到波谷点，将所述波谷点构成上交汇点序列；根据下边缘信息得到波峰点，将所述波峰点构成下交汇点序列；将各波峰点和各波谷点按照对应的横坐标进行匹配，得到匹配后的波峰点与波谷点，将匹配的波峰点与波谷点连线，所述连线为相邻两行道树的分割线。3.根据权利要求2所述的基于人工智能的园林行道树整形修剪识别方法，其特征在于，还包括对所述上序列上交汇点序列或下交汇点序列进行修正的步骤；对所述上交汇点序列修正的过程为：构建修正模型；所述修正模型为：其中，分别为上、下交汇点序列中像素值为1时对应的横坐标；为的邻域范围，邻域范围为以为中心，左右距离为4个步长的的矩形区域；为允许偏差；判断上交汇点序列中的波谷点的横坐标是否满足修正模型，当横坐标满足修正模型，则将所述横坐标保留，否则将所述横坐标对应的像素值置为0，得到更新后的上交汇点序列。4.根据权利要求1所述的基于人工智能的园林行道树整形修剪识别方法，其特征在于，所述交错区域的面积为统计的交错区域的像素点的个数。5.根据权利要求4所述的基于人工智能的园林行道树整形修剪识别方法，其特征在于，所述置信度为：其中，表示单个行道树分割图的面积；表示该单个行道树与其相邻的两个行道树分割图的交错区域。6.根据权利要求1所述的基于人工智能的园林行道树整形修剪识别方法，其特征在于，所述图像处理的过程为：利用霍夫直线检测得到所述行道树整体边缘信息中的直线信息，得到直线方程；其中，x为边缘信息的横坐标，k、b分别为斜率和截距；对所述行道树整体边缘信息和直线信息进行交集计算，得到直线段的长度；分别比较直线段的斜率与设定斜率、直线段的长度与设定长度的大小，当满足且时，该直线段为行道树主干的边缘信息；进而得到整体分割图中的行道树主树干的若干条直线段；计算两两直线段的距离，当所述距离小于设定阈值时，则该两条直线段为同一行道树的主干的两条直线段，取两条直线段的中线得到每一个行道树的中心轴。7.根据权利要求1所述的基于人工智能的园林行道树整形修剪识别方法，其特征在于，所述各偏差图的平均程度为：其中，为偏差图中的茂密程度差值，W和H为该偏差图的尺寸大小，△T为偏差图。8.基于人工智能的园林行道树整形修剪识别系统，包括存储器和处理器，其特征在于，所述处理器用于执行所述存储器存储的如权利要求1-7中任一项所述的基于人工智能的园林行道树整形修剪识别方法的步骤。
说明书desc
技术领域本发明涉及人工智能领域，具体涉及基于人工智能的园林行道树整形修剪识别方法及系统。背景技术目前，绿化主要建设在公共场所，例如园林、小区、街道等场所，在树林修剪过程中，掌握正确的修剪方法，通过合理的修剪，可以培养出优美的树形。通过修剪进一步调节营养物质的合理分配，抑制徒长，促进花芽分化，达到幼树提早开花结果，又能延长盛花期、盛果期，也能使老树复壮；同时，整齐划一的绿化环境能够改善人们的居住条件。尤其是对于行道树的修剪，一般情况下会采用规则形树冠，但由于行道树的生长趋势不同，为保证行道树的美观以及车辆行人的正常通行，需要不定时的对行道树进行整形修剪。其中，行道树是指在道路两旁及分车带用于给车辆和行人遮荫并构成园林景象的树种。行道树要求枝条伸展，树冠开阔，枝叶浓密，而冠形则是由栽植地点的架空线路以及交通状况决定。因此，如何确定行道树是否需要修剪，便于及时进行行道树的修剪是需要解决的问题。发明内容为了解决上述技术问题，本发明的目的在于提供基于人工智能的园林行道树整形修剪方法及系统，所采用的技术方案具体如下：本发明提供了基于人工智能的园林行道树整形修剪识别方法的技术方案，包括以下步骤：采集行道树的RGB图像，利用语义分割网络得到行道树整体分割图；对所述行道树整体分割图进行图像处理，获取行道树整体边缘信息，得到各行道树的主干的中心轴，所述中心轴沿主干生长方向且使主干对称；根据所述行道树整体分割图，获取树冠分割图，得到相邻两行道树树冠的分割线；将其中一行道树的主干的中心轴、所述分割线以及其中一行道树的主干的中心轴与所述分割线之间的边缘信息围成的区域作为另一行道树的遮挡区域，将另一行道树的主干的中心轴、所述分割线以及另一行道树的主干的中心轴与所述分割线之间的边缘信息围成的区域作为其中一行道树的遮挡区域，得到两相邻行道树的遮挡区域；根据各遮挡区域，确定相邻行道树的各遮挡轮廓信息，根据所述遮挡轮廓信息和所述树冠边缘信息得到单个行道树分割图，进而获取单个行道树的茂密程度分布图；根据相邻行道树的各遮挡轮廓信息得到相邻两行道树的交错区域，计算交错区域的面积，根据述交错区域的面积与对应行道树的面积，得到每个行道树分割图的置信度；根据各置信度以及对应的单个行道树的茂密程度分布图，计算平均特征图；将所述平均特征图与所述茂密程度分布图作差，获得各偏差图；并计算偏差图的平均程度，当平均程度大于设定阈值，则对当前行道树进行修剪。进一步的，所述分割线的获取过程为：沿与所述中心轴垂直的方向对所述行道树树冠分割图进行划分，获取上树冠分割图的上边缘信息和下树冠分割图的下边缘信息；根据所述上边缘信息得到波谷点，将所述波谷点构成上交汇点序列；根据下边缘信息得到波峰点，将所述波峰点构成下交汇点序列；将各波峰点和各波谷点按照对应的横坐标进行匹配，得到匹配后的波峰点与波谷点，将匹配的波峰点与波谷点连线，所述连线为相邻两行道树的分割线。进一步的，还包括对所述上序列上交汇点序列或下交汇点序列进行修正的步骤；对所述上交汇点序列修正的过程为：构建修正模型；所述修正模型为：其中，分别为上、下交汇点序列中像素值为1时对应的横坐标；为的邻域范围，邻域范围为以为中心，左右距离为4个步长的的矩形区域；为允许偏差；判断上交汇点序列中的波谷点的横坐标是否满足修正模型，当横坐标满足修正模型，则将所述横坐标保留，否则将所述横坐标对应的像素值置为0，得到更新后的上交汇点序列。进一步的，所述遮挡轮廓信息的获取过程为：将各遮挡区域分别与所述RGB图像相乘得到对应的彩色图像；计算所述彩色图像的饱和度和明度；根据饱和度和明度，计算得到所述彩色图像中的像素的茂密程度；根据像素点的茂密程度的大小，获取茂密程度变化最大的轮廓点，各轮廓点构成对应行道树的轮廓信息。进一步的，所述单个行道树的茂密程度分布图的获取方法为：根据其中一行道树的轮廓信息以及另一行道树的中心轴，获得另一行道树的中心轴到轮廓信息之间区域的散点，利用最小二乘法对该散点进行拟合得到另一行道树的未被遮挡区域的密度分布多项式函数；根据另一行道树分割图以及密度分布多项式函数，得到该行道树分割图各像素点对应的茂密程度；将各茂密程度替换所述单个行道树分割图中的像素值，得到单个行道树的茂密程度分布图。进一步的，所述交错区域的面积为统计的交错区域的像素点的个数。进一步的，所述置信度为：其中，表示单个行道树分割图的面积；表示该单个行道树与其相邻的两个行道树分割图的交错区域。进一步的，所述图像处理的过程为：利用霍夫直线检测得到所述行道树整体边缘信息中的直线信息，得到直线方程；其中，x为边缘信息的横坐标，k、b分别为斜率和截距；对所述行道树整体边缘信息和直线信息进行交集计算，得到直线段的长度；分别比较直线段的斜率与设定斜率、直线段的长度与设定长度的大小，当满足且时，该直线段为行道树主干的边缘信息；进而得到整体分割图中的行道树主树干的若干条直线段；计算两两直线段的距离，当所述距离小于设定阈值时，则该两条直线段为同一行道树的主干的两条直线段，取两条直线段的中线得到每一个行道树的中心轴。进一步的，所述各偏差图的平均程度为：其中，为偏差图中的茂密程度差值，W和H为该偏差图的尺寸大小，△T为偏差图。本发明还提供了基于人工智能的园林行道树整形修剪识别系统的技术方案，包括存储器和处理器，所述处理器用于执行所述存储器存储的上述的基于人工智能的园林行道树整形修剪识别方法的技术方案。本发明具有如下有益效果：本发明的方案，针对相邻行道树之间的树冠会相互交错，影响单个行道树的特征检测，本发明利用总体分割图和树冠的密度变化得到每一个行道树的轮廓信息和密度分布信息，确保后续行道树整形修剪时间和方案的准确性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明的基于人工智能的园林行道树整形修剪识别方法的方法实施例的方法流程图；图2为本发明的基于人工智能的园林行道树整形修剪识别方法的获取行道树的主干的中心轴的示意图；图3为本发明的基于人工智能的园林行道树整形修剪识别方法的获取遮挡轮廓信息的示意图；图4为本发明的基于人工智能的园林行道树整形修剪识别方法的获取遮挡轮廓信息的另一实施例的示意图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明的方案，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构、或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的基于人工智能的园林行道树整形修剪识别方法的具体方案。请参阅图1，其示出了本发明一个实施例，其提供的基于人工智能的园林行道树整形修剪识别方法的步骤流程图，该方法包括以下步骤：步骤1，采集行道树的RGB图像，利用语义分割网络得到行道树整体分割图；本实施例中，利用园林行道两侧的监控相机采集各行道树的RGB图像，将采集的RGB图像输入语义分割网络，得到行道树的Mask区域，并将同一条道路上的行道树Mask区域图像进行拼接，得到同一条街道上行道树整体分割图F。需要说明的是，Mask区域为二值图，即每个行道树区域的像素值为1，其他区域的像素值为0。另外，由于图像拼接为公知技术，在此不再赘述。本实施例中的语义分割网络为Encoder-Decoder结构，其可以采用现有的UNet、DeepLab等语义分割网络实现。其中，语义分割网络的训练方法：将监控相机采集的RGB图像作为训练数据，为每一张训练数据打上标签，获得标签数据。本实施例中的标签数据为将行道树区域的像素值为1，其他区域的像素值为0；损失函数采用交叉熵函数，利用梯度下降法进行网络训练，获得训练好的语义分割网络。上述步骤中获取行道树整体分割图是由于行道树的在种植时的间隔是固定的，相邻行道树之间间隔较大很容易区分，但随着行道树的生长，相邻行道树的树冠会相互交错在一起，故该步骤直接获得同一条街道上行道树整体的分割图，用于后续单个行道树的特征分析。步骤2，对所述行道树整体分割图进行图像处理，获取行道树整体边缘信息，得到各行道树的主干的中心轴，所述中心轴沿主干生长方向且使主干对称；其中获取每个行道树的主树干的中心轴的过程为：获取行道树整体边缘信息，利用霍夫直线检测得到所述行道树整体边缘信息中的直线信息，得到直线方程；其中，x为边缘信息的横坐标，k、b分别为斜率和截距；本实施例中，利用Canny边缘检测算法获得行道树整体边缘信息。对所述边行道树整体缘信息和直线信息进行交集计算，得到直线段的长度；分别比较直线段的斜率与设定斜率、直线段的长度与设定长度的大小，当满足且时，该直线段为行道树主干的边缘信息；进而得到整体分割图中的行道树主树干的若干条直线段；本实施例中的设定斜率和设定长度k0，C0为经验阈值k0=5，C0=10，实施者根据相机的位姿可以进行更改。需要说明的是，设定长度表征的是行道树的主干的高度，其可以通过历史数据对行道树的主干高度进行统计，并按照拍摄图像的缩放比例，得到图像中的设定长度，单位cm。计算两两直线段的距离，当所述距离小于设定阈值时，则该两条直线段为同一行道树的主干的两条直线段，取两条直线段的中线得到每一个行道树的中心轴，记为Z，如图2所示，Z1、Z2、Z3分别为行道树的中心轴。其中，直线段i与直线段j之间的距离为，其中，bi是直线段i的截距；bj是直线段j的截距。本实施例中，当两直线段的距离越近，其匹配度越高，即可完成多条直线段的分组，每组为同一树干的两条直线段。步骤3，根据所述行道树整体分割图，获取整体树冠分割图，得到相邻两行道树树冠的分割线；本实施例中，获取分割线的方法为：通过沿与所述中心轴垂直的方向对所述行道树整体树冠分割图进行划分，获取上树冠分割图的上边缘信息和下树冠分割图的下边缘信息；本实施例中的划分方法为：获取行道树整体树冠分割图的边缘信息中的轮廓信息以及外接矩形，其中的轮廓信息为边缘信息上的一系列散点，本实施例中，如图3所示，将外接矩形等分为2份，具体为上树冠分割图的上边缘信息和下树冠分割图的下边缘信息，获取上边缘信息的轮廓点和下边缘信息的轮廓点。需要说明的是，上述等分的份数也可以是3份，只要满足具有上树冠分割图的上边缘信息和下树冠分割图的下边缘信息即可。根据所述上边缘信息得到波谷点，得到上交汇点序列；根据下边缘信息得到波峰点，得到下交汇点序列；具体地，获取上交汇点序列的过程为：根据所述上边缘信息，确定序列Q1；设置滑窗，对序列Q1进行滑窗，并将滑窗的元素与对应窗口下的波谷序列的元素先相乘后相加，得到波动点，判断各波动点与设定波动阈值的大小，当波动点小于设定波动阈值，则将该波动点的值置0，其他不变，得到波动序列；将波动序列中由正变负的点作为波谷点，则将该波谷点的位置作为相邻行道树的树冠上方交汇点，并标记为1，其余位置的值置为0，得到上交汇点序列。其中，序列Q1的尺寸为，为图像的宽度信息，其反应了行道树树冠上方的轮廓分布；滑窗的大小为，设定波动阈值的大小为3。本实施例中，按照上述同样的方法得到序列Q2的波动序列，获得波动序列中由负变正的点为波峰点，将该点的位置作为相邻行道树树冠的下方交汇点；将树冠下方交汇点标记为1，其余位置的值标记为0，得到交汇点序列，具体过程此处不再过多赘述。需要说明的是，本发明考虑到了当相邻行道树的树冠交错在一起时，相邻行道树树冠上方的交汇处会形成一个波谷，根据这个特征获得相邻行道树的树冠交汇点，当相邻行道树的树冠交错在一起时，相邻行道树树冠下方的交汇处会形成一个波峰，根据这个特征同样可以获得相邻行道树的树冠交汇点。将各上交汇点和各下交汇点按照对应的位置横坐标进行匹配，得到匹配后的上交汇点和下交汇点，将匹配的上交汇点和下交汇点进行连线，所述连线为相邻两行道树的分割线。需要说明的是，匹配的上交汇点和下交汇点进行连线的分割线，原则上是与行道树主干的中心轴平行，但是由于匹配的上交汇点和下交汇点的对应位置的横坐标可能不相等，因此，该连线可能并不与中心轴平行，这可能是由于行道树树冠自身轮廓的波动性对树冠交汇处的检测带来的误差，所以，进一步地，本发明还包括对上交汇点序列或下交汇点序列进行修正的步骤。具体地，该修正步骤如下：构建修正模型；所述修正模型为：其中，分别为上、下交汇点序列中像素值为1时对应的横坐标；为的邻域范围，邻域范围为以为中心，左右距离为4个步长的的矩形区域；为允许偏差，为人为设定的经验值，本发明取值为2。判断上交汇点序列中的上交汇点的横坐标是否满足修正模型，当横坐标满足修正模型，则将所述横坐标保留，否则将所述横坐标对应的像素值置为0，得到更新后的上交汇点序列。根据更新后的交汇点序列得到相邻行道树树冠交汇点的分割线，记为D；需要说明的是，分割线D的斜率与行道树主干的中心轴Z的斜率一致。同时，针对下交汇点序列的修正，方法同上，此处不再过多赘述。至此，得到整体分割图中每个行道树主干的中心轴Z的以及相邻树冠交汇点分割线D，如图2所示的D12和D23。步骤4，将其中一行道树的主干的中心轴、所述分割线以及其中一行道树的主干的中心轴与所述分割线之间的边缘信息围成的区域作为另一行道树的遮挡区域，将另一行道树的主干的中心轴、所述分割线以及另一行道树的主干的中心轴与所述分割线之间的边缘信息围成的区域作为其中一行道树的遮挡区域，得到两相邻行道树的遮挡区域；根据各遮挡区域，确定相邻行道树的各遮挡轮廓信息，根据所述遮挡轮廓信息和所述边缘信息得到单个行道树图，进而获取单个行道树茂密程度分布图；根据相邻行道树的各遮挡轮廓信息得到相邻两行道树的交错区域，计算交错区域的面积，根据述交错区域的面积与对应行道树的面积，计算得到每个行道树分割图的置信度；本实施例中，所述遮挡轮廓信息的获取过程为：将各遮挡区域分别与所述RGB图像相乘得到对应的彩色图像；计算所述彩色图像的饱和度和明度；根据饱和度和明度，计算得到所述彩色图像中的像素的茂密程度；根据像素点的茂密程度的大小，确定各行道树的轮廓信息。本实施例中，获取所述单个行道树茂密程度分布图的方法为：根据确定的其中一行道树的轮廓信息中的轮廓点以及另一行道树的对称轴，获得另一行道树的对称轴到轮廓点之间区域的散点，利用最小二乘法对该散点进行拟合得到另一行道树的未被遮挡区域的密度分布多项式函数；根据确定的另一行道树分割图以及密度分布多项式函数，得到该行道树的密度指标；将各茂密程度替换所述单个行道树分割图中的像素值，得到单个行道树茂密程度分布图。本实施例中的单个行道树的置信度为：其中，表示单个行道树分割图的面积；表示该单个行道树与其相邻的两个行道树分割图的交错区域。为了对上述步骤4进行具体介绍，下面以三颗行道树为例进行说明：按照横坐标由大到小对每一条中心轴Z和分割线D进行标号，记第u个行道树的中心轴为Zu，第v个行道树的中心轴为Zv；两个行道树之间的分割线记为；如图4所示，包括行道树1、行道树2和行道树3。首先，确定相邻行道树之间是否存在遮挡：判断判断Z1和Z2之间是否存在分割线，若不存在则说明行道树1和行道树2的树冠不存在相互交错的现象，根据Z1和Z2之间前景像素点的数量最少的那一行为分割线进行切分，得到行道树1分割图；当Z1和Z2之间存在分割线时说明两相邻行道树的树冠存在相互交错，即存在遮挡区域，其中的遮挡区域中包括对应行道树的轮廓信息。其次，相邻行道树的遮挡区域的确定：根据获得的行道树整体分割图的分割线与中心轴Z2之间区域，那么，分割线、中心轴Z2以及分割线与中心轴Z2之间的边缘信息构成了行道树1的遮挡区域；依次类推，行道树2的遮挡区域为分割线、中心轴Z1以及分割线与中心轴Z1之间区域的区域。其中，需要说明的是，上述获取的行道树2的遮挡区域仅为该行道树2的一侧遮挡区域，另一侧的遮挡区域需要根据行道树3的相关信息进行获取。进一步地，作为其他优选的实施方式，还可以根据分割线与树冠分割图的两个交点坐标，分别过两个交点作于垂直的两条辅助线，并将分割线、中心轴Z2以及获取两条辅助线围成的区域，作为最终的感兴趣遮挡区域，在感兴趣遮挡区域内包含行道树1被遮挡的全部轮廓信息。需要说明的是，此时的感兴趣遮挡区域为二值图像中的区域，将感兴趣遮挡区域之外的像素值置为0，屏蔽掉无关区域的干扰。然后，获取遮挡区域的轮廓信息以及单个行道树的分割图：将各遮挡区域与步骤1中的RGB图像相乘得到遮挡区域内的彩色图像；将遮挡区域内的彩色图像换至HSV颜色空间，得到三个通道的值，分别对应色相通道H、饱和度通道S以及明度通道V；根据饱和度通道S以及明度通道V的值，计算遮挡区域内的彩色图像的各像素点对应的茂密程度；其中，本实施例中设定色相通道的阈值，得到遮挡区域中的绿色区域，进一步获得绿色区域中每一个像素点的茂密程度为：其中，分别表示位置处的像素点的色相、饱和度、明度以及茂密程度。将各像素点位置处的像素值替换为茂度程度，得到遮挡区域内的茂密程度分布图；根据茂密程度大小确定区域内的轮廓信息。需要说明的是，为了避免密度指标为0对轮廓点的影响，利用插值法将的点进行填充，得到遮挡区域内的密度分布图。本实施例中考虑到当两树冠交错时，在交错的临界点处树冠密度指标会有较大的变化，因此，以茂密程度分布图中的茂密程度大小的变化确定遮挡区域中对应行道树的轮廓点。具体地，以行道树1的遮挡区域为例进行分析：A、从靠近行道树2的中心轴Z2的一侧统计第m行中各点的茂密程度，横坐标为与中心轴Z2的距离，纵坐标为茂密程度，得到散点图；获取散点图中茂密程度变化最大的点为第m行中行道树1的轮廓点，记为；需要说明的是，从对称轴到轮廓点之间的区域为树木2的密度分布；而轮廓点到之间的区域为树木1和树木2交错产生的密度分布；B、按照步骤A获取遮挡区域中每一行的轮廓点，将所有轮廓点组合得到行道树1的遮挡区域的轮廓信息，即为序列P。需要说明的是，从中心轴Z2到序列P之间的区域为行道树2的茂密程度分布区域；而序列P到之间的区域为行道树1和行道树2相互交错产生的交错区域的茂密程度分布。同时，按照上述步骤可以得到中心轴Z1和分割线之间行道树2的遮挡区域的轮廓信息。本实施例中，根据上述获取的轮廓信息，能够得到单个树木的分割图。其中每一个树木的分割图为一张二值图，树木区域的像素值为1，其他区域的像素值为0。需要说明的是，上述中根据树木的茂密程度进行图像分割，其实际上是基于树木之间的遮挡，从而导致遮挡区域部分中绿色区域的颜色不同于未遮挡部分，即绿色区域的颜色越深，则判定为树枝茂密，则可能存在树木与树木的交错；但是需要说明的是，树木还可能由于环境等因素，使得自身树叶的颜色有所变化，但是本发明中并不考虑其他因素，仅仅是确定单个树木的大概轮廓信息，用于后续树木修剪的一个依据。再者，单个行道树的分割图对应的茂密程度分布图的获取：根据行道树2的茂密程度分布区域，获得中心轴Z2到序列P之间的区域中的散点，利用最小二乘法对该散点进行拟合得到行道树22中心轴Z2到序列P之间的区域的密度分布多项式函数；根据确定的单个行道树分割图以及密度分布多项式函数得到单个行道树茂密程度分布图。本实施例中，以行道树2为例，在获得单个行道树分割图以及行道树密度分布多项式函数后，将单个行道树分割图中的所有横坐标代入密度分布多项式函数，获得对应位置的茂密程度，将各茂密程度代替单个行道树分割图内对应的像素值，单个行道树茂密程度分布图。本实施例中的分布多项式函数的最高次幂为经验设定，取值为4。同时，对于行道树1和行道树3，同样按照上述方法先获取未遮挡区域的散点，进行多项式拟合，并进行相应密度分布图的获取的，由于上述已经给出了具体的步骤，此处不再过多赘述。最后，置信度的获取：根据确定的相邻两行道树的交错区域，确定单个行道树的交错区域的面积，并将其与单个行道树分割图的总面积进行比值计算，得到各单个行道树分割图的置信度，行道树分割图的置信度的计算公式如下：其中，表示分割图中前景区域的面积；表示行道树与相邻两个行道树分割图之间的交集区域。需要说明的是，当交集区域越大，表示树冠交错区域就越大，其分割图的置信度越小。本实施例中的面积是通过统计交错区域的像素点的个数确定的。需要说明的是，上述实施例是为了简化分析仅选取其中的3棵树进行分析，而其实际上道路两旁的行道树有很多，如10棵、20棵等等，这是需要根据实际道路情况进行确定的。步骤5，根据各置信度以及对应的行道树的茂密程度分布图，计算平均特征图；将所述平均特征图与所述茂密程度分布图作差，获得各偏差图；并计算偏差图的平均程度，当平均程度大于设定程度阈值，则对当前行道树进行修剪。本实施例中，平均特征图为：其中，Num为同一条街道上行道树的数量，为对第u个行道树的置信度归一化后的标准置信度，为第u个行道树的茂密程度分布图。需要说明的是，上述中的平均特征图可以反应平均密度分布和平均轮廓信息；平均特征图与每一个行道树的特征图的尺寸相同。同时，本实施例中的平均特征图为根据不同行道树遮挡的程度确定的权重修正对应的行道树的特征图的特征值之和，也就是说，其可以认为是所有行道树的特征图的平均值，利用该平均值作为一个标准图，将其与各行道树的特征图进行比较，实现对应行道树的修剪，尽可能保证所有行道树在修剪之后保持一致。各偏差图的平均程度为：其中，为偏差图中的茂密程度差值，W和H为该偏差图的尺寸大小，△T为偏差图当时表示当前行道树需要进行修剪，为设定程度阈值。本实施例中的设定阈值是根据对修剪好的行道树进行处理，得到设定阈值。当然作为其他实施方式，还可以根据人为经验，直接进行设定，如可以设定为。本实施例中的偏差图中各区域的像素值可以反应轮廓和密度的差异，根据每一个行道树的偏差图确定修剪方案。进一步的，统计需要修剪的行道树的数量，当时表示需要进行修剪，当行道树达不到相应的数量，则先不进行修剪。进一步地，对于上述确定修剪的行道树u，其修剪方案可借助神经网络实现，输入为行道树u行道树的偏差图；输出为需要修剪得区域。其中的神经网络为Encoder-Decoder的语义分割结构，训练数据为每一个行道树的行道树偏差图，标签数据为人为标定的需要裁剪区域，需要修剪区域的像素值为1，其他区域的像素值为0；损失函数采用交叉熵函数完成训练。基于与方法同样的发明构思，本发明还提供了基于人工智能的园林行道树整形修剪识别系统，包括处理器和存储器，其中的处理器用于执行存储在存储器中的基于人工智能的园林行道树整形修剪识别方法实施例的程序；由于该基于人工智能的园林行道树整形修剪识别方法实施例已经在上述方法实施例中进行描述，此处不再过多赘述。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。且上述对本说明书特定实施例进行了描述。其它实施例在所附权利要求书的范围内。在一些情况下，在权利要求书中记载的动作或步骤可以按照不同于实施例中的顺序来执行并且仍然可以实现期望的结果。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
