标题title
人员状况侦测的传感器融合方法
摘要abst
本发明提供一种人员状况侦测的传感器融合方法，包含：以一毫米波雷达定位一侦测区域内至少一移动人员的位置；以一深度感测相机撷取所述至少一移动人员的一RGB影像或一IR影像，并产生与所述至少一移动人员对应的二维人体骨架点信息；以一人工智能运算平台执行一传感器融合程序，利用所述二维人体骨架点信息衍生之数据合成一三维人体骨架时间序列；在所述合成三维人体骨架时间序列的数量大于一阈值N时，以所述人工智能运算平台内一动作辨识模块，判断所述至少一移动人员是否跌倒，以决定是否发出一通知。
权利要求书clms
1.一种人员状况侦测的传感器融合方法，其特征在于，包含：以毫米波雷达定位一侦测区域内至少一移动人员的位置；以深度感测相机撷取所述至少一移动人员的RGB影像或IR影像，并产生与所述至少一移动人员对应的一二维人体骨架点信息；以人工智能运算平台执行传感器融合程序，利用所述二维人体骨架点信息衍生的数据合成三维人体骨架时间序列，其中所述人工智能运算平台耦接所述毫米波雷达与所述深度感测相机；以及在所述三维人体骨架时间序列的数量大于阈值N时，以所述人工智能运算平台内动作辨识模块，判断所述至少一移动人员是否跌倒，而决定是否发出通知。2.如请求项1所述之人员状况侦测的传感器融合方法，其特征在于，其中在执行所述传感器融合程序前更包含：映射步骤，先将所述二维人体骨架点信息转换成三维人体骨架点信息；以及讯号处理步骤，利用分群算法从所述毫米波雷达的讯号获得点云群集平均速度；其中，所述三维人体骨架点信息与所述点云群集平均速度于所述传感器融合程序经结合后，产生所述三维人体骨架时间序列，供所述动作辨识模块作为判断所述至少一移动人员是否跌倒的依据。3.如请求项2所述之人员状况侦测的传感器融合方法，其特征在于，其中所述深度感测相机利用飞时测距技术、结构光技术或是主动式立体视觉技术，取得所述至少一移动人员的深度信息，以在所述映像步骤中用于获得所述三维人体骨架点信息。4.如请求项3所述之人员状况侦测的传感器融合方法，其特征在于，更包含：ID编号产生步骤，在所述RGB影像或所述IR影像显示所述至少一移动人员为复数人时，给予每一移动人员相对应之ID编号，之后进行所述映射步骤；ID编号比对步骤，将各所述ID编号与内存内储存之ID编号进行比对，其中所述内存与所述人工智能运算平台耦接；资料串联步骤，在所述ID编号比对步骤的结果显示为相同时，串联所检测到之所述三维人体骨架时间序列与相同ID编号之时间序列；以及在所述三维人体骨架时间序列的数量大于所述阈值N时，以所述人工智能运算平台内所述动作辨识模块，判断所述至少一移动人员是否跌倒，而决定是否发出所述通知。5.如请求项4所述之人员状况侦测的传感器融合方法，其特征在于，其中在所述ID编号产生步骤与所述ID编号比对步骤之间更包含：坐标系统转换步骤，将坐标系统原点从所述深度感测相机中心转换至人体骨架原点，其中所述人体骨架原点为肩膀与头部联机的交点。6.如请求项5所述之人员状况侦测的传感器融合方法，其特征在于，其中当所述ID编号比对步骤的结果显示为相异时，则新增ID编号并建立所述三维人体骨架时间序列储存空间，且将所检测到之所述三维人体骨架时间序列储存至所述内存，然后返回所述ID编号产生步骤。7.如请求项6所述之人员状况侦测的传感器融合方法，其特征在于，其中所述深度感测相机在所述毫米波雷达的所述侦测区域内，依照默认之优先权顺序逐一对不同位置之所述至少一移动人员撷取所述RGB影像或所述IR影像。8.如请求项1所述之人员状况侦测的传感器融合方法，其特征在于，其中所述二维人体骨架点信息由所述人工智能运算平台内的姿态估测与追踪模块，根据姿态估测与追踪模型获得，其中所述姿态估测与追踪模型的骨干网络使用卷积神经网络的架构。9.如请求项1所述之人员状况侦测的传感器融合方法，其特征在于，其中所述动作辨识模块由深度学习模型或机器学习分类器，判断所述至少一移动人员是否跌倒。10.如请求项1所述之人员状况侦测的传感器融合方法，其特征在于，其中所述毫米波雷达会在所述侦测区域内重复执行侦测动作，直到所述至少一移动人员出现并确认位置后，由与所述人工智能运算平台耦接的马达调整所述深度感测相机的拍摄方向与角度。
说明书desc
技术领域本发明系有关于一种人员状况侦测的方法，尤其系指一种人员状况侦测的传感器融合方法。背景技术在目前的技术中，有许多非接触式跌倒侦测产品或解决方案，但是普遍面临下列问题。例如，在使用雷达的方案中，当场景内人数过多时则跌倒辨识率可能会下降。另外，在使用影像式装置的方案中，视野涵盖范围太小，而深度摄影机有距离限制。再者，使用影像式装置的方案，容易使系统长时间维持在高负载的情况之下，有影响产品寿命及能源浪费的缺点。综上所述，如何提供一个可以有效且准确侦测人员状况侦测的方法乃是业界所需思考的重要课题。发明内容本发明提供一种人员状况侦测的传感器融合方法，可有效地提升产品寿命及避免能源浪费。另外，结合不同来源的数据，相较于单独使用这些来源而言，所得到之讯息的不确定性较小。也就是说，可以更准确地判别人员状况。鉴于上述内容，本发明提供一种人员状况侦测的传感器融合方法，包含：以一毫米波雷达定位一侦测区域内至少一移动人员的位置；以一深度感测相机撷取所述至少一移动人员的一RGB影像或一IR影像，并产生与所述至少一移动人员对应的一二维人体骨架点信息；以一人工智能运算平台执行一传感器融合程序，利用所述二维人体骨架点信息衍生之数据合成一三维人体骨架时间序列，其中所述人工智能运算平台耦接所述毫米波雷达与所述深度感测相机；在所述合成三维人体骨架时间序列的数量大于一阈值N时，以所述人工智能运算平台内一动作辨识模块，判断所述至少一移动人员是否跌倒，以决定是否发出一通知。根据本发明之一个或多个实施方式，其中在执行所述传感器融合程序前更包含：一映射步骤，先将所述二维人体骨架点信息转换成一三维人体骨架点信息；以及一讯号处理步骤，利用一分群算法从所述毫米波雷达的讯号获得一点云群集平均速度；其中，所述三维人体骨架点信息与所述点云群集平均速度于所述传感器融合程序经结合后，产生所述三维人体骨架时间序列。根据本发明之一个或多个实施方式，其中所述深度感测相机更利用飞时测距技术、结构光技术或是主动式立体视觉技术，取得所述至少一移动人员的一深度信息，以在所述映射步骤中用于获得所述三维人体骨架点信息。根据本发明之一个或多个实施方式，更包含：一ID编号产生步骤，在所述RGB影像或所述IR影像显示所述至少一移动人员为复数人时，给予每一移动人员相对应之ID编号，之后进行所述映射步骤；一ID编号比对步骤，将各所述ID编号与一内存内储存之ID编号进行比对，其中所述内存与所述人工智能运算平台耦接；一资料串联步骤，在所述ID编号比对步骤的结果显示为相同时，串联所检测到之所述三维人体骨架时间序列与相同ID编号之时间序列；以及在所述三维人体骨架时间序列的数量大于所述阈值N时，以所述人工智能运算平台内所述动作辨识模块，判断所述至少一移动人员是否跌倒，而决定是否发出所述通知。根据本发明之一个或多个实施方式，其中在所述ID编号产生步骤与所述ID编号比对步骤之间更包含：一坐标系统转换步骤，将坐标系统原点从所述深度感测相机中心转换至人体骨架原点，其中所述人体骨架原点系肩膀与头部联机的交点。根据本发明之一个或多个实施方式，其中当所述ID编号比对步骤的结果显示为相异时，则新增ID编号并建立所述三维人体骨架时间序列储存空间，且将所检测到之所述三维人体骨架时间序列储存至所述内存，然后返回所述ID编号产生步骤。根据本发明之一个或多个实施方式，其中所述深度感测相机在所述毫米波雷达之所述侦测区域内，依照默认之优先权顺序逐一对不同位置之所述至少一移动人员撷取所述RGB影像或所述IR影像。根据本发明之一个或多个实施方式，其中所述二维人体骨架点信息系由所述人工智能运算平台内之一姿态估测与追踪模块，根据一姿态估测与追踪模型获得，其中所述姿态估测与追踪模型的骨干网络系使用卷积神经网络的架构。根据本发明之一个或多个实施方式，其中所述动作辨识模块系藉由一深度学习模型或一机器学习分类器，判断所述至少一移动人员是否跌倒。根据本发明之一个或多个实施方式，其中所述毫米波雷达会在所述侦测区域内重复执行侦测动作，直到所述至少一移动人员出现并确认位置后，藉由与所述人工智能运算平台耦接之一马达调整所述深度感测相机的拍摄方向与角度。附图说明图1系绘示本发明一实施例之硬件系统的外观示意图。图2A系绘示本发明之实施例中硬件系统运作的示意图。图2B系绘示本发明之实施例中以毫米波雷达生成四维点云并进行分群算法的示意图。图2C系绘示本发明之实施例中硬件系统运作的示意图。图3系绘示本发明之实施例中人员状况侦测的传感器融合方法的流程图。图4系绘示本发明之实施例中用于多人场景跌倒辨识算法的流程图。图5系绘示本发明一实施例之姿态估测与追踪模块的功能示意图。图6系绘示本发明一实施例之动作辨识模块的功能示意图。图7系绘示本发明另一实施例之姿态估测与追踪模块的功能示意图。图8系绘示本发明一实施例之三维人体骨架时间序列的示意图。图9系绘示图3中关于传感器融合的程序。附图标记10：人工智能运算平台 512：三维人体骨架点信息20：毫米波雷达 600：动作辨识模型30：深度感测相机 610：估测类别40：马达 620：估测结果50：内存 710：IR影像100：硬件系统720：IR影像110：侦测区域730：中心点热图120：移动人员740：人体骨架估测与追踪模型130：视野750：影像200、210：步骤760：影像220：中心点770：影像230：移动人员S10～S130：步骤240：移动人员S701、S702：步骤250：移动人群S400～S480：步骤300：三维人体骨架点信息X、Y、Z：坐标轴310：点云群集平均速度：四维点云320：三维人体骨架时间序列：位置502：RGB影像 P：人体骨架原点504：IR影像t：时刻506：深度信息α：旋转角度508：人体骨架估测与追踪模型v：速度510：二维人体骨架点信息v1：点云群集平均速度具体实施方式以下发明提供不同的实施例或示例，以建置所提供之目标物的不同特征。以下叙述之成分以及排列方式的特定示例是为了简化本公开，目的不在于构成限制；组件的尺寸和形状亦不被发明之范围或数值所限制，但可以取决于组件之制程条件或所需的特性。例如，利用剖面图描述本发明的技术特征，这些剖面图是理想化的实施例示意图。因而，由于制造工艺和/公差而导致图示之形状不同是可以预见的，不应为此而限定。再者，空间相对性用语，例如「下方」、「在…之下」、「低于」、「在…之上」以及「高于」等，是为了易于描述图式中所绘示的元素或特征之间的关系；此外，空间相对用语除了图示中所描绘的方向，还包含组件在使用或操作时的不同方向。首先要说明的是，本发明之实施例利用传感器融合技术，藉由结合不同传感器所取得的数据而产生无法靠单一传感器所提供的讯息。在本发明之实施例中，系先透过毫米波雷达侦测环境之大范围区域内是否有人，若有人则定位人体位置。接着，再转动深度感测相机锁定人体。然后，利用一人工智能运算平台，以AI深度学习技术萃取三维人体骨架及追踪目标。最后，结合毫米波雷达所侦测到的人体中心点移动速度辨识是否发生跌倒。以下，搭配图式说明本案之实施例中人员状况侦测的传感器融合方法与所应用的系统。首先，请参考图1，图1系绘示本发明一实施例之硬件系统的外观示意图。如图1所示，硬件系统100包含一人工智能运算平台10、一毫米波雷达20、一深度感测相机30、一马达40以及一内存50。其中，人工智能运算平台10分别耦接毫米波雷达20、深度感测相机30、马达40以及内存50。然后，请参考图2A，图2A系绘示本发明之实施例中硬件系统运作的示意图。图2A系一俯视图，说明本发明之实施例先使用毫米波雷达20搜索场域内人体位置，再决定深度感测相机30的旋转方向与角度。在本发明之实施例中，毫米波雷达20会在侦测区域110内重复执行侦测动作直到至少一移动人员120出现并确认位置后，藉由与人工智能运算平台10耦接之一马达40调整深度感测相机30的拍摄方向与角度。如图2A所示，硬件系统100之毫米波雷达20将其侦测区域110划分为四个象限，当毫米波雷达20在侦测区域110内侦测到一移动人员120时，会定位移动人员120的位置。例如，在本发明之实施例中，移动人员120系位于第四象限。接着，人工智能运算平台10内一处理器会根据移动人员120在第四象限的位置，代入下列计算马达40的旋转角度α。若移动人员120的位置位于第一、第二或第三象限的话，则代入相对应的、或计算马达40的旋转角度α。第一象限:第二象限:第三象限:第四象限:在此，旋转角度α定义为移动人员120与硬件系统100中心之联机和坐标轴X之间的夹角。在本发明之实施例中，马达40用于调整深度感测相机30的方向与角度，因此深度感测相机30会被马达40朝移动人员120的位置方向转动一旋转角度α。然后，深度感测相机30在本身之视野内执行人体骨架侦测运算与获得深度信息。另外，请参考图2B，图2B系绘示本发明之实施例中以毫米波雷达生成四维点云并进行分群算法的示意图。如图2B所示，在本发明之实施例中，在步骤200中，进行数据收集。然后，在步骤210中，执行单一画面处理程序，即使用毫米波雷达20生成四维点云后，再由分群算法找出每个群集的中心点220与平均速度。其中代表各点位置，而v代表各该点的速度。在本发明之实施例中，四维点云之生成乃是采用频率调变连续波雷达发射毫米波并记录来自场景的反射，然后计算稀疏点云并滤除静态物体所对应的点。在本发明之实施例中，分群算法乃是采用基于密度的分群算法，对点云进行分群并找出每个群集的中心点220与平均速度。另外，请参考图2C，图2C系绘示本发明之实施例中硬件系统运作的示意图。图2C系一俯视图，说明在多人场景中，由于硬件系统100之深度感测相机30的视野130无法一次涵盖毫米波雷达20的侦测区域110，因此锁定目标的优先权依照预先设定的条件来解决。例如，位于第一象限的移动人员230，因为在点云Z轴方向有剧烈速度v的变化，依照预先设定的条件具有第一顺位的优先权，故深度感测相机30会优先旋转至移动人员230的方向，进行相关程序。待处理完移动人员230后，接着处理位于第四象限且在点云X轴或Y轴方向有明显位移的移动人员240，依照预先设定的条件具有第二顺位的优先权，故深度感测相机30会接着旋转至移动人员240的方向，进行相关程序。待处理完移动人员240后，接着处理各范围内检测到之人数最多的第三象限，此情况依照预先设定的条件具有第三顺位的优先权，故深度感测相机30会接着旋转至移动人群250的方向，进行相关程序。以上图2C仅是用于说明毫米波雷达20在多人场景优先权判断的一个实施例，当然在其他实施例中，所述预先设定的条件也可以依照不同的设计需求而定义不同的优先权顺序。接下来，请参考图3，图3系绘示本发明之实施例中人员状况侦测的传感器融合方法的流程图。如图3所示，本发明一实施例之人员状况侦测的传感器融合方法包含步骤S10～S130，以下搭配图1、图2A～图2C逐一说明各步骤。在步骤S10中，以一毫米波雷达20侦测移动人体，并将讯息传回人工智能运算平台10内之处理器。在不同实施例中，如同在现实环境中一样，所述移动人体系至少一移动人员，例如一移动人员或一移动人群。在步骤S20中，人工智能运算平台10内之处理器会判断毫米波雷达20侦测区域110内是否有人。若判断结果为否即无人，则返回步骤S10继续以毫米波雷达20侦测移动人体。若判断结果为是即有人，例如图2A之移动人员120或图2C之移动人员230、240或移动人群250，则进到下一步骤S30。在步骤S30中，人工智能运算平台10内之处理器定位所侦测到之移动人体的位置并藉由马达40旋转深度感测相机30，逐一对准所侦测到之移动人体。在步骤S40中，以深度感测相机30逐一撷取所侦测到之移动人体的一RGB影像或一IR影像。在步骤S50中，进行二维人体骨架估测及追踪。人工智能运算平台10内之处理器根据步骤S40之RGB影像或IR影像产生与所侦测到之移动人体对应的一二维人体骨架点信息。在步骤S60中，人工智能运算平台10内之处理器判断深度感测相机30之视野范围内是否有人。若判断结果为否即无人，则返回步骤S10继续以毫米波雷达20侦测移动人体。若判断结果为是即有人，则进到下一步骤S70。接下来，在步骤S70与步骤S80中，以人工智能运算平台10执行一传感器融合程序，如下说明。在步骤S70中，根据步骤S50所得之二维人体骨架点信息，藉由人工智能运算平台10内之一映像模块执行一映像步骤S701，将所述二维人体骨架点信息转换成以表示之三维人体骨架点信息，其中m为自然数，如图9所示。另外，透过人工智能运算平台10内之处理器执行一讯号处理步骤S702，利用分群算法从毫米波雷达20的讯号获得以v1表示之点云群集平均速度，即所谓毫米波雷达点云速度提取，如图9所示。后续在图9会再次进一步说明。在本发明之实施例中，深度感测相机30更利用飞时测距技术、结构光技术或是主动式立体视觉技术，取得至少一移动人员的一深度信息，以在所述映射步骤中用于获得所述三维人体骨架点信息。在步骤S80中，将步骤S70所得之三维人体骨架点信息与点云群集平均速度，合成一三维人体骨架时间序列，如图9所示。后续在图9会再次进一步说明。在步骤S90中，透过人工智能运算平台10内之处理器判别步骤S80所合成之三维人体骨架时间序列的数量是否大于一阈值N。当所述三维人体骨架时间序列的数量未大于一阈值N时，则返回步骤S50。当所述三维人体骨架时间序列的数量大于一阈值N时，则执行下一步骤S100。在步骤S100中，人工智能运算平台10呼叫一动作辨识模块，而此动作辨识模块系用于判断至少一移动人员是否跌倒。在步骤S110中，当所述动作辨识模块判断无人跌倒时，则返回步骤S50。当所述动作辨识模块判断有人跌倒时，则执行下一步骤S120。在步骤S120中，当所述动作辨识模块判断有人跌倒的情况为连续发生且次数大于或等于K时，则在步骤S130中发出一通知以通报有人跌倒。若所述动作辨识模块判断有人跌倒的情况，未符合连续发生且次数大于或等于K的条件时，则返回步骤S50。接着，请参考图9，图9系绘示图3中关于传感器融合的程序。如图9所示，在本发明之实施例中，传感器融合的程序系将深度感测相机30与毫米波雷达20的数据进行融合。亦如前所述，根据从深度感测相机30之RGB影像或IR影像得到的二维人体骨架点信息，在步骤S701中映射成三维人体骨架点信息300，包含、、、…、、与共m个数据点。另外，根据从毫米波雷达20得到的讯号，在步骤S702中进行讯号处理，得到以v1表示之点云群集平均速度310。然后，将所得之三维人体骨架点信息与点云群集平均速度，透过传感器融合技术而合成一三维人体骨架时间序列320。接下来，请参考图4，图4系绘示本发明之实施例中用于多人场景跌倒辨识算法的流程图。如图2C、图3与图4所示，如前述在多人场景的情况下，深度感测相机30在毫米波雷达20之侦测区域110内，依照默认之优先权顺序逐一对不同位置之至少一移动人员撷取RGB影像或IR影像。接着，执行步骤S400～S480的多人场景跌倒辨识算法流程。在步骤S400中，在所述RGB影像或所述IR影像显示所述至少一移动人员为复数人时，执行一ID编号产生步骤，给予每一移动人员相对应之ID编号，进行多人二维人体骨架估测及追踪，取得二维人体骨架点信息。在步骤S410中，进行映射步骤，将二维人体骨架点信息映像成三维人体骨架点信息。在步骤S420，进行坐标系统转换，将坐标系统原点从深度感测相机30的中心转换至人体骨架原点，其中所述人体骨架原点系肩膀与头部联机的交点。在步骤S430，进行ID编号比对，亦即将各ID编号与内存50内储存之ID编号进行比对。若比对结果显示为不相同时，则接着在步骤S440中，新增ID编号并建立三维人体骨架时间序列储存空间。然后，在步骤S450中，将所检测到之三维人体骨架时间序列储存至内存50，并返回步骤S400。若步骤S430之比对结果显示为相同时，则进到步骤S460执行数据串联，串联所检测到之三维人体骨架时间序列与相同ID编号之时间序列，并进到下一步骤S470。在步骤S470中，当三维人体骨架时间序列的数量未大于一阈值N时，则返回步骤S400。当三维人体骨架时间序列的数量大于一阈值N时，则进到步骤480，利用人工智能运算平台10内之动作辨识模块，判断所述至少一移动人员是否跌倒，并决定是否发出一通知以通报有人跌倒。另外，请参考图5，图5系绘示本发明一实施例之姿态估测与追踪模块的功能示意图。如图5所示，利用人工智能运算平台10内之姿态估测与追踪模块，将RGB影像502或IR影像504输入人体骨架估测与追踪模型508，得到二维人体骨架点信息510，然后结合深度信息506以映像出三维人体骨架点信息512。另外，请参考图6，图6系绘示本发明一实施例之动作辨识模块的功能示意图。如图6所示，利用人工智能运算平台10内之动作辨识模块，将对应时间序列t-2、t-1、t之三维人体骨架点信息输入动作辨识模型600，然后根据估测类别610，辨识所述至少一移动人员的动作，而得到一估测结果620。在此，时间序列t-2、t-1、t仅为例示，并非用于限定本发明，实际上输入动作辨识模型600之时间序列的数量乃因应实际上训练需要而定。在本发明之实施例中，动作辨识模型600例如是跌倒辨识模型。另外，动作辨识模块600可以是一深度学习模型架构或一机器学习分类器。另外，请参考图7，图7系绘示本发明另一实施例之姿态估测与追踪模块的功能示意图。如图7所示，利用人工智能运算平台10内之姿态估测与追踪模块，将对应时间序列t-1、t之IR影像720、710以及时刻t-1之中心点热图730输入人体骨架估测与追踪模型740，然后得到影像750、760与770。在影像750中，有边界框可以估计画面中检测到知人体的数量及位置。在影像760中，二维骨架估测身体关节与重要部位关键点。在影像770中，可以利用偏移量估测或预测前后画面坐标位移，用来追踪人体ID编号。在本发明之实施例中，姿态估测与追踪模型740的骨干网络可以是不同形式的卷积神经网络的架构。而且，不同任务共享骨干模型，减轻系统运算负担。再来，请参考图8，图8系绘示本发明一实施例之三维人体骨架时间序列的示意图。如图8所示，画面n-4、画面n-3、画面n-2、画面n-1、画面n系表示连续画面，用以例示三维人体骨架时间序列，其中n为自然数。另外，组件符号P为人体骨架原点，如前面步骤S420所述，当坐标系统原点从以深度感测相机30为中心转换成以人体骨架原点P为中心时，可排除深度感测相机30之视角对跌倒辨识模型等动作辨识模型的影响。以上实施方式仅用以说明本发明的技术方案而非限制，尽管参照较佳实施方式对本发明进行了详细说明，本领域的普通技术人员应当理解，可以对本发明的技术方案进行修改或等同替换，而不脱离本发明技术方案的精神和范围。
