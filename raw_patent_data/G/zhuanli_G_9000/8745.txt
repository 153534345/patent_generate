标题title
一种助行训练系统及其一体化控制方法
摘要abst
本发明公开了一种助行训练系统及其一体化控制方法。本发明通过模拟传统训练中对训练患者骨盆身体部位的主动干预以实现训练辅助的方式，利用六自由度并联机构能够符合人体骨盆在行走过程中三维空间运动特征，在一个紧凑的助行训练系统内实现了减重支撑、平衡控制和辅助行走的功能需求，有效提高空间利用率和训练效率；本发明在一体化控制框架内融合了辅助行走、平衡控制和减重支撑三种控制策略，避免了多种控制策略切换造成的训练患者的体验不适；同时，三种控制策略均是连续控制模型，有助于系统实现连续平稳控制；把三种控制策略有机融合在一体化控制框架内，提高了助行训练系统的人机交互智能性和康复策略针对性，促进助行训练效果的提升。
权利要求书clms
1.一种助行训练系统，其特征在于，所述助行训练系统包括：轮式移动底座、高度调节升降机、智能控制单元、六自由度并联机构、六维力传感器和骨盆固定绷带；其中，在轮式移动底座的后端中心上方安装高度调节升降机，在轮式移动底座的后端安装智能控制单元；在高度调节升降机的上表面中心安装六自由度并联机构；六自由度并联机构包括静平台、动平台、六条支链和六个直线驱动电机，静平台固定在高度调节升降机的上表面中心，静平台与动平台之间通过六条支链连接，每一条支链的末端连接至相应的直线驱动电机，六个直线驱动电机安装在静平台的内表面；在动平台的前表面固定安装六维力传感器，六维力传感器的安装面位于末端，六维力传感器的感应面位于前端，六维力传感器的安装面与六自由度并联机构的动平台的前表面中心固定连接，六维力传感器的感应面与骨盆固定绷带固定连接；每一个直线驱动电机内置的位置编码器和六维力传感器分别连接至智能控制单元；智能控制单元通过对六自由度并联机构进行控制实现助行训练系统完成减重支撑、平衡控制和辅助行走的辅助功能；六自由度并联机构中，静平台是一个柱状框架结构，前后轴线投影呈现六边形分布，静平台的前后轴向一面的外表面固定安装在高度调节升降机的上表面中心；动平台呈现六边形结构；每条支链呈滑动关节-U型万向节-转动关节-U型万向节的结构，包括电机输出滑块、第一U型万向节、第一支链连杆、支链轴向转动关节、第二支链连杆和第二U型万向节，其中，直线驱动电机的输出轴连接至相应支链的电机输出滑块，电机输出滑块能够实现一自由度直线滑动，电机输出滑块与第一支链连杆末端通过第一U型万向节实现二自由度转动，第一支链连杆的前端与第二支链连杆的末端通过支链轴向转动关节实现沿第一支链连杆和第二支链连杆的轴线方向的一自由度转动，第二支链连杆的前端与动平台通过第二U型万向节实现二自由度转动，第二U型万向节安装在动平台的后表面，直线驱动电机直线驱动电机输出滑块滑动，从而经过第一U型万向节、第一支链连杆、支链轴向转动关节、第二支链连杆和第二U型万向节带动动平台运动，动平台在六个直线驱动电机的驱动下，能够实现三维空间的三个平动以及三个转动共计六个自由度运动。2.如权利要求1所述的助行训练系统，其特征在于，所述轮式移动底座包括：移动底座框架、左侧前轮、右侧前轮、右侧后轮和左侧后轮；其中，移动底座框架的下表面的前端的左右两侧分别安装左侧前轮和右侧前轮，与地面直接滚动接触，在移动底座框架的下表面的后端的左右两侧分别安装左侧后轮和右侧后轮，与地面直接滚动接触；左侧前轮和右侧前轮均为万向轮，左侧后轮和右侧后轮均为定向轮。3.如权利要求1所述的助行训练系统，其特征在于，所述高度调节升降机包括：下固定板、上固定板、左侧下滑轨、右侧下滑轨、左侧上滑轨、右侧上滑轨、第一纵向连杆、第二纵向连杆、第三纵向连杆、第四纵向连杆、第一横向连杆、第二横向连杆、第三横向连杆、第四横向连杆、第五横向连杆、丝杆电机、丝杆和丝杆螺母；其中，下固定板的下表面中心固定安装在轮式移动底座的移动底座框架的上表面的后端中心上方，下固定板的上表面的左右两侧分别固定安装左侧下滑轨和右侧下滑轨，上固定板的下表面的左右两侧分别固定安装左侧上滑轨和右侧上滑轨；左侧下滑轨、右侧下滑轨、左侧上滑轨和右侧上滑轨的结构完全相同，分别包括一个导向槽和一个固定孔，固定孔位于导向槽的延长线上；第一至第五横向连杆的方向垂直于导向槽的方向；第一横向连杆的左右两端分别位于左侧下滑轨和右侧下滑轨的导向槽内，通过左侧下滑轨导向槽和右侧下滑轨的导向槽实现沿导向槽的滑动连接，第二横向连杆的左右两端分别位于左侧上滑轨和右侧上滑轨的导向槽内，通过左侧上滑轨导向槽和右侧上滑轨导向槽实现沿导向槽的滑动连接，第三横向连杆的左右两端分别通过左侧上滑轨的固定孔和右侧上滑轨的固定孔固定连接在左侧上滑轨和右侧上滑轨上，第五横向连杆的左右两端分别通过左侧下滑轨的固定孔和右侧下滑轨的固定孔固定连接在左侧下滑轨和右侧下滑轨上；第一纵向连杆、第二纵向连杆、第三纵向连杆和第四纵向连杆的结构完全相同，在第一至第四纵向连杆的上端、下端和中间均开设有安装圆孔，第一纵向连杆、第二纵向连杆、第三纵向连杆和第四纵向连杆沿训练患者左右身体方向依次从左到右分布，第一纵向连杆和第二纵向连杆位于高度调节升降机的左侧，第三纵向连杆和第四纵向连杆位于高度调节升降机的右侧，第一纵向连杆的下端安装圆孔和第四纵向连杆的下端安装圆孔分别与第五横向连杆的左右两端实现转动连接，第一纵向连杆的上端安装圆孔和第四纵向连杆的上端安装圆孔分别与第二横向连杆的左右两端实现转动连接，第二纵向连杆的下端安装圆孔和第三纵向连杆的下端安装圆孔分别与第一横向连杆的左右两端实现转动连接，第二纵向连杆的上端安装圆孔和第三纵向连杆的上端安装圆孔分别与第三横向连杆的左右两端实现转动连接，第四横向连杆依次穿过第一纵向连杆、第二纵向连杆、第三纵向连杆和第四纵向连杆的中间安装圆孔并实现转动连接；下固定板的上表面后端中心安装丝杆电机，丝杆电机的输出端与丝杆的后端固定连接，在第一横向连杆的正中间固定安装丝杆螺母，丝杆的前端通过丝杆螺母，丝杆电机通过转动，带动第一横向连杆沿左侧下滑轨和右侧下滑轨的导向槽移动，以调节第一与第二纵向连杆以及第三与第四纵向连杆之间的角度，从而能够沿高度方向调节下固定板与上固定板之间的垂直距离，实现高度位置调节和固定，以适应不同身高的训练患者。4.如权利要求1所述的助行训练系统，其特征在于，前后轴线投影视角下，第一直线驱动电机和第二直线电机固定安装在静平台六边形第一边上，第三直线驱动电机和第四直线电机固定安装在静平台六边形第三边上，第五直线驱动电机和第六直线电机固定安装在静平台六边形第五边上，六个直线驱动电机的输出直线滑动方向均沿前后轴线方向；第二直线驱动电机对应的支链前端第二U型万向节和第三直线驱动电机对应的支链前端第二U型万向节固定安装在动平台六边形第二边上，第四直线驱动电机对应的支链前端第二U型万向节和第五直线驱动电机对应的支链前端第二U型万向节固定安装在动平台六边形第四边上，第六直线驱动电机对应的支链前端第二U型万向节和第一直线驱动电机对应的支链前端第二U型万向节固定安装在动平台六边形第六边上。5.如权利要求1所述的助行训练系统，其特征在于，还包括跑步机，在训练时，骨盆固定绷带与训练患者的骨盆固定连接；跑步机放置在助行训练系统的前部正中位置，骨盆固定连接骨盆固定绷带的训练患者站在跑步机上进行原地步行训练。6.一种如权利要求1所述的助行训练系统的一体化控制方法，其特征在于，所述一体化控制方法包括以下步骤：1)助行训练系统是一种典型的物理人机交互类型的训练系统，训练患者与助行训练系统的物理人机交互接口为骨盆固定绷带；在训练过程中，人机交互一方面要顺应训练患者运动意图中有益部分；另一方面要预防训练患者运动意图中不利部分；2)智能控制单元接收直线驱动电机的位置编码器的位置信息和六维力传感器的人机交互力信息，并通过控制计算后，向直线驱动电机输出控制命令；直线驱动电机根据控制命令，控制六自由度并联机构实现辅助行走、平衡控制和减重支撑的控制动作；3)在训练开始前，根据训练患者的骨盆高度，调整高度调节上滑动架的位置，达到训练患者与骨盆固定绷带最优固定连接的目的；然后，助行训练系统通电，并通过自动校正零点的方式，使得六自由度并联机构的直线驱动电机的位置编码器输出和六维力传感器输出归零；在系统归零状态下，定义归零状态下的骨盆固定绷带的中心为系统运动末端的原点，在该原点建立静坐标系Oee-xyz，其中，x轴方向与训练患者水平左右方向平行、y轴方向与训练患者水平前后方向平行、z轴方向与训练患者竖直方向平行；在训练过程中，骨盆固定绷带的中心随着训练患者的骨盆运动而发生变化，定义实时的以骨盆固定绷带的中心为原点的动坐标系为O′ee-x′y′z′，其中，在归零状态下，静坐标系Oee-xyz和动坐标系O′ee-x′y′z′重合；在六自由度并联机构的静平台上建立惯性坐标系O-XYZ，其正交坐标轴方向定义与坐标系Oee-xyz一致；4)在训练过程中，针对训练患者的骨盆控制能力较弱难以实现行走步态的运动障碍问题，助行训练系统提供辅助行走控制策略：在训练患者穿戴骨盆固定绷带的行走过程中，六维力传感器获取反映训练患者的骨盆运动特征的人机交互力信息；智能控制单元根据六维力传感器获取的人机交互力信息，基于辅助助力的原则，智能控制单元通过直线驱动电机驱动六自由度并联机构的动平台，生成顺应训练患者骨盆运动的辅助行走控制策略控制力，辅助训练患者的骨盆完成行走步态的动作；5)在训练过程中，针对训练患者平衡控制能力不足难以实现稳定步态的运动障碍问题，助行训练系统提供平衡控制策略：平衡控制以归零状态下骨盆固定绷带中心Oee为原点，定义一个以静坐标系Oee-xyz原点为中心，建立x、y、z轴向长度分别为wx、wy、wz的矩形正常行走的内空间；智能控制单元根据直线驱动电机的位置编码器的位置信息，判断训练患者到达或者超出内空间的边界，训练患者如果到达或者超出内空间的边界，意味着训练患者存在失去平衡的风险，此时提供额外的平衡控制策略控制力进行干预；平衡控制的目的分两层，首先是在内空间靠近静坐标系的原点Oee时，助行训练系统不干预或者极小干预训练患者的平衡姿态；其次是在内空间远离静坐标系的原点Oee并到达内空间的边界时，助行训练系统主动干预训练患者的平衡姿态，基于增加阻力的原则，智能控制单元通过直线驱动电机驱动六自由度并联机构的动平台，生成额外的平衡控制策略控制力，防止训练患者进入到内空间之外的空间；6)在训练过程中，针对训练患者下肢缺乏肌力难以支撑躯体重量的运动障碍问题，助行训练系统提供减重支撑控制策略：结合六维力传感器输出的竖直方向相关力及力矩，基于重力补偿的原则，在训练患者自身重量的基础上，智能控制单元通过直线驱动电机驱动六自由度并联机构的动平台，生成动态的减重支撑控制策略控制力，减轻训练患者体重对双侧下肢的负担；7)针对上述提到的辅助行走、平衡控制和减重支撑三种控制策略，为了实现人机交互的自然柔顺性，需要避免由于三种控制策略的切换造成的人机交互体检不适，因此，把前述三种控制策略纳入到一个统一的一体化控制框架内，实现助行训练系统的一体化控制：在一体化控制框架内，根据六维力传感器提供的人机交互力信息及位置编码器提供的位置信息，将辅助行走控制策略控制力、平衡控制策略控制力和动态减重支撑控制策略控制力叠加生成综合控制力，并结合系统的动力学模型，计算出控制直线驱动电机的速度的控制命令，输入到对应的直线驱动电机中，通过直线驱动电机的运动输出，控制六自由度并联机构的动平台的速度，达到驱动助行训练系统的需求。7.如权利要求6所述的一体化控制方法，其特征在于，在步骤4)中，生成针对辅助行走控制策略控制力，包括步骤：a)六六维力传感器输出的力和力矩信息标记为F，六维力传感器在出厂自定义坐标系OF-x″y″z″下的输出的力和力矩信息包含了x″、y″和z″方向上的分力Fx″,Fy″和Fz″和x″、y″和z″方向的分力矩τx″,τy″和τz″，即F＝；b)从六维力传感器到六自由度并联机构的直线驱动电机的运动学雅克比矩阵为JF，从骨盆固定绷带中心点到六维力传感器的位姿传递矩阵为TF，控制增益调节系数矩阵为KF，则辅助行走控制策略控制力τwalk的计算公式如下：其中，为位姿传递矩阵JF的转置矩阵，diag表示斜对角矩阵，Xee,Yee,Zee为骨盆固定绷带的中心点的动坐标系O′ee-x′y′z′在系统惯性坐标系O-XYZ下的位置，αee,βee,γee为骨盆固定绷带中心点动坐标系O′ee-x′y′z′在系统惯性坐标系O-XYZ下的姿态变量；控制增益调节系数矩阵KF能够保证助行训练系统只有在训练患者有运动意图，即各维度上产生相关运动速度时，系统才会提供辅助行走控制策略控制力。8.如权利要求6所述的一体化控制方法，其特征在于，在步骤5)中，生成针对平衡控制策略控制力，包括以下步骤：a)在在训练过程中，动坐标系O′ee-x′y′z′的原点在静坐标系Oee-xyz的位置矢量表达为rd＝，其中，rd_x,rd_y,rd_z分别为动坐标系O′ee-x′y′z′的原点在静坐标系Oee-xyz的位置矢量表达rd在x、y、z方向上的分量；b)定义静坐标系Oee-xyz在x、y、z各个轴向的阻尼系数分别为针对前述阻尼系数的定义，当骨盆固定绷带中心O′ee在靠近静坐标系的原点Oee时，阻尼系数数值较小，数值范围在，对应产生的阻力忽略不计，不妨碍训练患者的正常训练动作；当骨盆固定绷带中心O′ee在远离静坐标系的原点Oee时，阻尼系数数值迅速增大，对应产生的阻力能够防止训练患者从内空间跨过内空间的边界；c)平衡控制策略控制力τbalance的计算同时需要考虑实时的人机交互力F在X、Y、Z方向上的投影数值，标记为，以保证训练患者的平衡控制调节是有效的，具体计算如下：通过施加额外的平衡控制策略控制力，能够把训练患者的骨盆运动限制在正常行走内空间，该内空间根据不同的训练患者特征能够进行个性化设定范围，实现行走运动平衡的辅助。9.如权利要求6所述的一体化控制方法，其特征在于，在步骤6)中，生成针对减重支撑控制策略控制力，包括以下步骤：a)减重支撑控制策略控制力包含两部分，第一部分是减重支撑静态力，第二部分是减重支撑动态力；b)训练患者在静态站立条件下的竖直方向重力为G0，设定第一系数c1，0≤c1≤1，则减重支撑静态力部分为-c1·G0；c)在训练过程中，受训练患者躯体动态运动影响，训练患者竖直方向的受力呈动态变化，该部分减重支撑动态力计算公式为：其中，第二系数c2＞0，第三系数c3＞0；和FZ分别是Z方向上的加速度和合力，因此两者同号；同样运动速度大小条件下，当训练患者往下运动时，减重支撑动态力数值较小；当训练患者往上运动时，减重支撑动态力数值较大；d)减重支撑控制策略控制力τweight的计算公式为：10.如权利要求6所述的一体化控制方法，其特征在于，在步骤7)中，将三种控制策略纳入到一个统一的一体化控制框架内，实现助行训练系统的一体化控制，包括以下步骤：把助行训练系统与训练患者之间的物理人机交互模型描述为弹簧质量阻尼系统，考虑到由于骨盆固定绷带与训练患者的骨盆固定连接，因此训练患者的骨盆的位置信息即为助行训练系统骨盆固定绷带的期望位置，则助行训练系统满足下面的控制模型：其中，Ma为可调节惯性系数，Ba为可调节阻尼系数，V为六自由度并联机构动平台修正速度，为六自由度并联机构动平台修正加速度；τwalk为辅助行走控制策略控制力，τbalance为平衡控制策略控制力，τweight为减重支撑控制策略控制力，τtotal为综合控制力，即辅助行走控制策略控制力、平衡控制策略控制力和减重支撑控制策略控制力之和；助行训练系统的智能控制单元的采样时间间隔为T，Vn为当前时刻助行训练系统的六自由度并联机构的动平台修正速度，Vn-1为上一时刻助行训练系统的六自由度并联机构的动平台修正速度，满足：进一步，推出各个直线驱动电机的速度其中，矩阵J-1是从动坐标系O′ee-x′y′z′到六自由度并联机构的直线驱动电机的运动学雅克比矩阵的逆矩阵。
说明书desc
技术领域本发明涉及辅助行走助行器领域，具体涉及一种助行训练系统及其一体化控制方法。背景技术助行训练系统是面向残疾人、伤病人、老年人等人群，针对从卧床到地面行走康复训练需求的一种重要康复训练设备。对于上述患者，其在行走功能上存在一定的功能障碍，主要是体现在下肢缺乏肌力难以支撑躯体重量、平衡控制能力不足难以实现稳定步态、骨盆控制能力较弱难以实现行走步态等三种类型。针对前述三种类型的功能障碍，对应地分别需要减重支撑、平衡控制、辅助行走等外界辅助功能支持。在目前的助行训练系统中，有些系统只具有减重支撑装置及对应的控制方法，有些系统重点考虑的是平衡控制和辅助行走功能；然而，患者往往同时存在多个类型的行走功能障碍问题，单个或两个类型的辅助功能支持不能达到期望的训练效果。同时，在训练系统与患者之间的人机交互控制策略方面，为满足同时实现减重支撑、平衡控制、辅助行走等辅助功能支持，需要在一个控制系统内实现三种辅助功能控制模式的融合。总体而言，现有的技术存在两方面的不足，一方面是缺乏融合三种辅助功能支持的助行训练系统，另一方面是缺乏针对三种辅助功能能够实现一体化控制的解决方案。发明内容针对克服以上现有技术的不足，本发明提出了一种助行训练系统及其一体化控制方法，从而解决现有助行训练系统存在的功能单一和人机交互的问题。本发明的一个目的在于提出一种助行训练系统。本发明的助行训练系统包括：轮式移动底座、高度调节升降机、智能控制单元、六自由度并联机构、六维力传感器和骨盆固定绷带；其中，在轮式移动底座的后端中心上方安装高度调节升降机，在轮式移动底座的后端安装智能控制单元；在高度调节升降机的上表面中心安装六自由度并联机构；六自由度并联机构包括静平台、动平台、六条支链和六个直线驱动电机，静平台固定在高度调节升降机的上表面中心，静平台与动平台之间通过六条支链连接，每一条支链的末端连接至相应的直线驱动电机，六个直线驱动电机安装在静平台的内表面；在动平台的前表面固定安装六维力传感器，六维力传感器的安装面位于末端，六维力传感器的感应面位于前端，六维力传感器的安装面与六自由度并联机构的动平台的前表面中心固定连接，六维力传感器的感应面与骨盆固定绷带固定连接；每一个直线驱动电机内置的位置编码器和六维力传感器分别连接至智能控制单元；智能控制单元通过对六自由度并联机构进行控制实现助行训练系统完成减重支撑、平衡控制和辅助行走的辅助功能；六自由度并联机构中，静平台是一个柱状框架结构，前后轴线投影呈现六边形分布，静平台的前后轴向一面的外表面固定安装在高度调节升降机的上表面中心；动平台呈现六边形结构；每条支链呈滑动关节-U型万向节-转动关节-U型万向节的结构，包括电机输出滑块、第一U型万向节、第一支链连杆、支链轴向转动关节、第二支链连杆和第二U型万向节，其中，直线驱动电机的输出轴连接至相应支链的电机输出滑块，电机输出滑块能够实现一自由度直线滑动，电机输出滑块与第一支链连杆末端通过第一U型万向节实现二自由度转动，第一支链连杆的前端与第二支链连杆的末端通过支链轴向转动关节实现沿第一支链连杆和第二支链连杆的轴线方向的一自由度转动，第二支链连杆的前端与动平台通过第二U型万向节实现二自由度转动，第二U型万向节安装在动平台的后表面，直线驱动电机直线驱动电机输出滑块滑动，从而经过第一U型万向节、第一支链连杆、支链轴向转动关节、第二支链连杆和第二U型万向节带动动平台运动，动平台在六个直线驱动电机的驱动下，能够实现三维空间的三个平动以及三个转动共计六个自由度运动。轮式移动底座包括：移动底座框架、左侧前轮、右侧前轮、右侧后轮和左侧后轮；其中，移动底座框架的下表面的前端的左右两侧分别安装左侧前轮和右侧前轮，与地面直接滚动接触，在移动底座框架的下表面的后端的左右两侧分别安装左侧后轮和右侧后轮，与地面直接滚动接触；左侧前轮和右侧前轮均为万向轮，左侧后轮和右侧后轮均为定向轮。高度调节升降机包括：下固定板、上固定板、左侧下滑轨、右侧下滑轨、左侧上滑轨、右侧上滑轨、第一纵向连杆、第二纵向连杆、第三纵向连杆、第四纵向连杆、第一横向连杆、第二横向连杆、第三横向连杆、第四横向连杆、第五横向连杆、丝杆电机、丝杆和丝杆螺母；其中，下固定板的下表面中心固定安装在轮式移动底座的移动底座框架的上表面的后端中心上方，下固定板的上表面的左右两侧分别固定安装左侧下滑轨和右侧下滑轨，上固定板的下表面的左右两侧分别固定安装左侧上滑轨和右侧上滑轨；左侧下滑轨、右侧下滑轨、左侧上滑轨和右侧上滑轨的结构完全相同，分别包括一个导向槽和一个固定孔，固定孔位于导向槽的延长线上；第一至第五横向连杆的方向垂直于导向槽的方向；第一横向连杆的左右两端分别位于左侧下滑轨和右侧下滑轨的导向槽内，通过左侧下滑轨导向槽和右侧下滑轨的导向槽实现沿导向槽的滑动连接，第二横向连杆的左右两端分别位于左侧上滑轨和右侧上滑轨的导向槽内，通过左侧上滑轨导向槽和右侧上滑轨导向槽实现沿导向槽的滑动连接，第三横向连杆的左右两端分别通过左侧上滑轨的固定孔和右侧上滑轨的固定孔固定连接在左侧上滑轨和右侧上滑轨上，第五横向连杆的左右两端分别通过左侧下滑轨的固定孔和右侧下滑轨的固定孔固定连接在左侧下滑轨和右侧下滑轨上；第一纵向连杆、第二纵向连杆、第三纵向连杆和第四纵向连杆的结构完全相同，在第一至第四纵向连杆的上端、下端和中间均开设有安装圆孔，第一纵向连杆、第二纵向连杆、第三纵向连杆和第四纵向连杆沿训练患者左右身体方向依次从左到右分布，第一纵向连杆和第二纵向连杆位于高度调节升降机的左侧，第三纵向连杆和第四纵向连杆位于高度调节升降机的右侧，第一纵向连杆的下端安装圆孔和第四纵向连杆的下端安装圆孔分别与第五横向连杆的左右两端实现转动连接，第一纵向连杆的上端安装圆孔和第四纵向连杆的上端安装圆孔分别与第二横向连杆的左右两端实现转动连接，第二纵向连杆的下端安装圆孔和第三纵向连杆的下端安装圆孔分别与第一横向连杆的左右两端实现转动连接，第二纵向连杆的上端安装圆孔和第三纵向连杆的上端安装圆孔分别与第三横向连杆的左右两端实现转动连接，第四横向连杆依次穿过第一纵向连杆、第二纵向连杆、第三纵向连杆和第四纵向连杆的中间安装圆孔并实现转动连接；下固定板的上表面后端中心安装丝杆电机，丝杆电机的输出端与丝杆的后端固定连接，在第一横向连杆的正中间固定安装丝杆螺母，丝杆的前端通过丝杆螺母，丝杆电机通过转动，带动第一横向连杆沿左侧下滑轨和右侧下滑轨的导向槽移动，以调节第一与第二纵向连杆以及第三与第四纵向连杆之间的角度，从而能够沿高度方向调节下固定板与上固定板之间的垂直距离，实现高度位置调节和固定，以适应不同身高的训练患者。前后轴线投影视角下，第一直线驱动电机和第二直线电机固定安装在静平台六边形第一边上，第三直线驱动电机和第四直线电机固定安装在静平台六边形第三边上，第五直线驱动电机和第六直线电机固定安装在静平台六边形第五边上，六个直线驱动电机的输出直线滑动方向均沿前后轴线方向；第二直线驱动电机对应的支链前端第二U型万向节和第三直线驱动电机对应的支链前端第二U型万向节固定安装在动平台六边形第二边上，第四直线驱动电机对应的支链前端第二U型万向节和第五直线驱动电机对应的支链前端第二U型万向节固定安装在动平台六边形第四边上，第六直线驱动电机对应的支链前端第二U型万向节和第一直线驱动电机对应的支链前端第二U型万向节固定安装在动平台六边形第六边上。智能控制单元采用计算机、单片机或现场可编程逻辑门阵列FPGA。进一步，还包括跑步机，在训练时，骨盆固定绷带与训练患者的骨盆固定连接；助行训练系统放置在平地上开展步行训练，或者与跑步机结合开展步行训练。跑步机放置在助行训练系统的前部正中位置，骨盆固定连接骨盆固定绷带的训练患者站在跑步机上进行原地步行训练。本发明的另一个目的在于提出一种助行训练系统的一体化控制方法。本发明的助行训练系统的一体化控制方法，包括以下步骤：1)助行训练系统是一种典型的物理人机交互类型的训练系统，训练患者与助行训练系统的物理人机交互接口为骨盆固定绷带；在训练过程中，人机交互一方面要顺应训练患者运动意图中有益部分；另一方面要预防训练患者运动意图中不利部分；2)智能控制单元接收直线驱动电机的位置编码器的位置信息和六维力传感器的人机交互力信息，并通过控制计算后，向直线驱动电机输出控制命令；直线驱动电机根据控制命令，控制六自由度并联机构实现辅助行走、平衡控制和减重支撑的控制动作；3)在训练开始前，根据训练患者的骨盆高度，调整高度调节上滑动架的位置，达到训练患者与骨盆固定绷带最优固定连接的目的；然后，助行训练系统通电，并通过自动校正零点的方式，使得六自由度并联机构的直线驱动电机的位置编码器输出和六维力传感器输出归零；在系统归零状态下，定义归零状态下的骨盆固定绷带的中心为系统运动末端的原点，在该原点建立静坐标系Oee-xyz，其中，x轴方向与训练患者水平左右方向平行、y轴方向与训练患者水平前后方向平行、z轴方向与训练患者竖直方向平行；在训练过程中，骨盆固定绷带的中心随着训练患者的骨盆运动而发生变化，定义实时的以骨盆固定绷带的中心为原点的动坐标系为O′ee-x′y′z′，其中，在归零状态下，静坐标系Oee-xyz和动坐标系O′ee-x′y′z′重合；在六自由度并联机构的静平台上建立惯性坐标系O-XYZ，其正交坐标轴方向定义与坐标系Oee-xyz一致；4)在训练过程中，针对训练患者的骨盆控制能力较弱难以实现行走步态的运动障碍问题，助行训练系统提供辅助行走控制策略：在训练患者穿戴骨盆固定绷带的行走过程中，六维力传感器获取反映训练患者的骨盆运动特征的人机交互力信息；智能控制单元根据六维力传感器获取的人机交互力信息，基于辅助助力的原则，智能控制单元通过直线驱动电机驱动六自由度并联机构的动平台，生成顺应训练患者骨盆运动的辅助行走控制策略控制力，辅助训练患者的骨盆完成行走步态的动作；5)在训练过程中，针对训练患者平衡控制能力不足难以实现稳定步态的运动障碍问题，助行训练系统提供平衡控制策略：平衡控制以归零状态下骨盆固定绷带中心Oee为原点，定义一个以静坐标系Oee-xyz原点为中心，建立x、y、z轴向长度分别为wx、wy、wz的矩形正常行走的内空间；智能控制单元根据直线驱动电机的位置编码器的位置信息，判断训练患者到达或者超出内空间的边界，训练患者如果到达或者超出内空间的边界，意味着训练患者存在失去平衡的风险，此时提供额外的平衡控制策略控制力进行干预；平衡控制的目的分两层，首先是在内空间靠近静坐标系的原点Oee时，助行训练系统不干预或者极小干预训练患者的平衡姿态；其次是在内空间远离静坐标系的原点Oee并到达内空间的边界时，助行训练系统主动干预训练患者的平衡姿态，基于增加阻力的原则，智能控制单元通过直线驱动电机驱动六自由度并联机构的动平台，生成额外的平衡控制策略控制力，防止训练患者进入到内空间之外的空间；6)在训练过程中，针对训练患者下肢缺乏肌力难以支撑躯体重量的运动障碍问题，助行训练系统提供减重支撑控制策略：结合六维力传感器输出的竖直方向相关力及力矩，基于重力补偿的原则，在训练患者自身重量的基础上，智能控制单元通过直线驱动电机驱动六自由度并联机构的动平台，生成动态的减重支撑控制策略控制力，减轻训练患者体重对双侧下肢的负担；7)针对上述提到的辅助行走、平衡控制和减重支撑三种控制策略，为了实现人机交互的自然柔顺性，需要避免由于三种控制策略的切换造成的人机交互体检不适，因此，把前述三种控制策略纳入到一个统一的一体化控制框架内，实现助行训练系统的一体化控制：在一体化控制框架内，根据六维力传感器提供的人机交互力信息及位置编码器提供的位置信息，将辅助行走控制策略控制力、平衡控制策略控制力和动态减重支撑控制策略控制力叠加生成综合控制力，并结合系统的动力学模型，计算出控制直线驱动电机的速度的控制命令，输入到对应的直线驱动电机中，通过直线驱动电机的运动输出，控制六自由度并联机构的动平台的速度，达到驱动助行训练系统的需求。在步骤1)中，训练患者运动意图中有益部分如辅助行走中行走意图；训练患者运动意图中不利部分如平衡控制中的跌倒风险。在步骤4)中，生成针对辅助行走控制策略控制力，包括步骤：a)六维力传感器输出的力和力矩信息标记为F，六维力传感器在出厂自定义坐标系OF-x″y″z″下的输出的力和力矩信息包含了x″、y″和z″方向上的分力Fx″，Fy″和Fz″和x″、y″和z″方向的分力矩τx″，τy″和τz″，即F＝；b)从六维力传感器到六自由度并联机构的直线驱动电机的运动学雅克比矩阵为JF，从骨盆固定绷带中心点到六维力传感器的位姿传递矩阵为TF，控制增益调节系数矩阵为KF，则辅助行走控制策略控制力τwalk的计算公式如下：其中，为位姿传递矩阵JF的转置矩阵，diag表示斜对角矩阵，Xee，Yee，Zee为骨盆固定绷带的中心点的动坐标系O′ee-x′y′z′在系统惯性坐标系O-XYZ下的位置，αee，βee，γee为骨盆固定绷带中心点动坐标系O′ee-x′y′z′在系统惯性坐标系O-XYZ下的姿态变量；控制增益调节系数矩阵KF能够保证助行训练系统只有在训练患者有运动意图，即各维度上产生相关运动速度时，系统才会提供辅助行走控制策略控制力。在步骤5)中，生成针对平衡控制策略控制力，包括以下步骤：a)在训练过程中，动坐标系O′ee-x′y′z′的原点在静坐标系Oee-xyz的位置矢量表达为rd＝，其中，rd_x，rd_y，rd_z分别为动坐标系O′ee-x′y′z′的原点在静坐标系Oee-xyz的位置矢量表达rd在x、y、z方向上的分量；b)定义静坐标系Oee-xyz在x、y、z各个轴向的阻尼系数分别为针对前述阻尼系数的定义，当骨盆固定绷带中心O′ee在靠近静坐标系的原点Oee时，阻尼系数数值较小，数值范围在，对应产生的阻力忽略不计，不妨碍训练患者的正常训练动作；当骨盆固定绷带中心O′ee在远离静坐标系的原点Oee时，阻尼系数数值迅速增大，对应产生的阻力能够防止训练患者从内空间跨过内空间的边界；c)平衡控制策略控制力τbalance的计算同时需要考虑实时的人机交互力F在X、Y、Z方向上的投影数值，标记为，以保证训练患者的平衡控制调节是有效的，具体计算如下：通过施加额外的平衡控制策略控制力，能够把训练患者的骨盆运动限制在正常行走内空间，该内空间根据不同的训练患者特征能够进行个性化设定范围，实现行走运动平衡的辅助。在步骤6)中，生成针对减重支撑控制策略控制力，包括以下步骤：a)减重支撑控制策略控制力包含两部分，第一部分是减重支撑静态力，第二部分是减重支撑动态力；b)训练患者在静态站立条件下的竖直方向重力为G0，设定第一系数c1，0≤c1≤1，则减重支撑静态力部分为-c1·G0；c)在训练过程中，受训练患者躯体动态运动影响，训练患者竖直方向的受力呈动态变化，该部分减重支撑动态力计算公式为：其中，第二系数c2＞0，第三系数c3＞0；和FZ分别是Z方向上的加速度和合力，因此两者同号；同样运动速度大小条件下，当训练患者往下运动时，减重支撑动态力数值较小；当训练患者往上运动时，减重支撑动态力数值较大；d)减重支撑控制策略控制力τweight的计算公式为：在步骤7)中，将三种控制策略纳入到一个统一的一体化控制框架内，实现助行训练系统的一体化控制，包括以下步骤：把助行训练系统与训练患者之间的物理人机交互模型描述为弹簧质量阻尼系统，考虑到由于骨盆固定绷带与训练患者的骨盆固定连接，因此训练患者的骨盆的位置信息即为助行训练系统骨盆固定绷带的期望位置，则助行训练系统满足下面的控制模型：其中，Ma为可调节惯性系数，Ba为可调节阻尼系数，V为六自由度并联机构动平台修正速度，为六自由度并联机构动平台修正加速度；τwalk为辅助行走控制策略控制力，τbalance为平衡控制策略控制力，τweight为减重支撑控制策略控制力，τtotal为综合控制力，即辅助行走控制策略控制力、平衡控制策略控制力和减重支撑控制策略控制力之和。助行训练系统的智能控制单元的采样时间间隔为T，Vn为当前时刻助行训练系统的六自由度并联机构的动平台修正速度，Vn-1为上一时刻助行训练系统的六自由度并联机构的动平台修正速度，满足：进一步，推出各个直线驱动电机的速度其中，矩阵J-1是从动坐标系O′ee-x′y′z′到六自由度并联机构的直线驱动电机的运动学雅克比矩阵的逆矩阵。本发明的优点：本发明通过模拟传统训练中对训练患者骨盆身体部位的主动干预以实现训练辅助的方式，利用六自由度并联机构能够符合人体骨盆在行走过程中三维空间运动特征，不需要吊带、天轨等悬吊系统，在一个紧凑的助行训练系统内实现了减重支撑、平衡控制、辅助行走等功能需求，有效提高空间利用率和训练效率；本发明采用的控制方法中，辅助行走、平衡控制、减重支撑等三种控制策略能够有机发挥各控制策略的优势；减重支撑控制策略对训练患者在整个正常行走内空间都是适用的，动态减轻训练患者下肢的负载；当训练患者速度趋于零时，辅助行走控制策略控制力也趋于零，此时减重支撑控制策略控制力仍正常输出；当训练患者在靠近内空间中心点运动时，平衡控制策略控制力的输出可以忽略不计、且不会影响辅助行走控制策略控制力的输出；而当训练患者接近内空间的边界时，平衡控制策略控制力迅速增大，并阻止训练患者靠近边界；本发明采用的控制方法在一体化控制框架内融合了辅助行走、平衡控制、减重支撑等三种控制策略，避免了多种控制策略切换造成的训练患者体验不适；同时，三种控制策略均是连续控制模型，有助于系统实现连续平稳控制；把三种控制策略有机融合在一体化控制框架内，提高了助行训练系统的人机交互智能性和康复策略针对性，促进助行训练效果的提升。附图说明图1为本发明的助行训练系统的一个实施例的示意图；图2为本发明的助行训练系统的一个实施例的轮式移动底座的示意图；图3为本发明的助行训练系统的一个实施例的高度调节升降机的示意图；图4为本发明的助行训练系统的一个实施例的六自由度并联机构的右侧视图；图5为本发明的助行训练系统的一个实施例的六自由度并联机构的后视图；图6为本发明的助行训练系统的一个实施例的六自由度并联机构的支链结构的示意图；图7为本发明的助行训练系统的一体化控制方法的矩形正常行走的内空间及相关坐标系的示意图；图8为本发明的助行训练系统融合减重支撑、辅助行走及平衡控制的一体化控制框架的框图。具体实施方式下面结合附图，通过具体实施例，进一步阐述本发明。如图1所示，本实施例的助行训练系统包括：轮式移动底座1、高度调节升降机2、智能控制单元3、六自由度并联机构4、六维力传感器5、骨盆固定绷带6和跑步机8；其中，在轮式移动底座1的后端中心上方安装高度调节升降机2，在轮式移动底座1后端后方安装智能控制单元3；在高度调节升降机2的上固定板上表面中心安装六自由度并联机构4；六自由度并联机构4包括静平台、动平台、六条支链和六个直线驱动电机，静平台固定在高度调节升降机2的上固定板上表面中心，静平台与动平台之间通过六条支链连接，每一条支链连接至相应的直线驱动电机，六个直线驱动电机安装在静平台上；在动平台的前表面固定安装六维力传感器5，六维力传感器5的安装面位于末端，六维力传感器5的感应面位于前端，六维力传感器5的安装面与六自由度并联机构4的动平台的前表面中心固定连接，六维力传感器5的感应面与骨盆固定绷带6固定连接；每一个直线驱动电机内置的位置编码器和六维力传感器5分别连接至智能控制单元3；助行训练系统放置在跑步机的前端，骨盆固定连接骨盆固定绷带6的训练患者7站在跑步机8上进行步行训练。如图2所示，轮式移动底座1包括：移动底座框架101、左侧前轮105、右侧前轮102、右侧后轮103和左侧后轮104；其中，移动底座框架101的下表面的前端的左右两侧分别安装左侧前轮105和右侧前轮102，与地面直接滚动接触，在移动底座框架101的下表面的后端的左右两侧分别安装左侧后轮104和右侧后轮103，与地面直接滚动接触；左侧前轮105和右侧前轮102均为万向轮，左侧后轮104和右侧后轮103均为定向轮。如图3所示，高度调节升降机2包括：下固定板201、上固定板208、左侧下滑轨202、右侧下滑轨214、左侧上滑轨206、右侧上滑轨209、第一纵向连杆203、第二纵向连杆205、第三纵向连杆211、第四纵向连杆213、第一横向连杆204、第二横向连杆207、第三横向连杆210、第四横向连杆212、第五横向连杆215、丝杆电机216、丝杆217和丝杆螺母218；其中，下固定板201的下表面中心固定安装在移动底座框架101的上表面的后端中心上方，下固定板201的上表面的左右两侧分别固定安装左侧下滑轨202和右侧下滑轨214，上固定板208的下表面的左右两侧分别固定安装左侧上滑轨206和右侧上滑轨209；静平台的前后轴向一面的外表面固定安装在高度调节升降机2的上固定板208上表面中心；左侧下滑轨202、右侧下滑轨214、左侧上滑轨206和右侧上滑轨209的结构完全相同，且均分别包含一个导向槽和固定孔，固定孔位于导向槽的延长线上，第一至第五横向连杆215的方向垂直于导向槽的方向；第一横向连杆204的左右两端分别位于左侧下滑轨202和右侧下滑轨214的导向槽内，通过左侧下滑轨202导向槽和右侧下滑轨214的导向槽实现沿导向槽的滑动连接，第二横向连杆207的左右两端分别位于左侧上滑轨206和右侧上滑轨209的导向槽内，通过左侧上滑轨206导向槽和右侧上滑轨209导向槽实现沿导向槽的滑动连接，第三横向连杆210的左右两端分别通过左侧上滑轨206的固定孔和右侧上滑轨209的固定孔固定连接在左侧上滑轨206和右侧上滑轨209上，第五横向连杆215的左右两端分别通过左侧下滑轨202的固定孔和右侧下滑轨214的固定孔固定连接在左侧下滑轨202和右侧下滑轨214上；第一纵向连杆203、第二纵向连杆205、第三纵向连杆211和第四纵向连杆213的结构完全相同，且分别在第一至第四纵向连杆213的上端、下端和中间开设有安装圆孔，第一纵向连杆203、第二纵向连杆205、第三纵向连杆211和第四纵向连杆213沿训练患者左右身体方向依次从左到右分布，第一纵向连杆203和第二纵向连杆205位于高度调节升降机2的左侧，第三纵向连杆211和第四纵向连杆213位于高度调节升降机2的右侧，第一纵向连杆203的下端安装圆孔和第四纵向连杆213的下端安装圆孔分别与第五横向连杆215的左右两端实现转动连接，第一纵向连杆203的上端安装圆孔和第四纵向连杆213的上端安装圆孔分别与第二横向连杆207的左右两端实现转动连接，第二纵向连杆205的下端安装圆孔和第三纵向连杆211的下端安装圆孔分别与第一横向连杆204的左右两端实现转动连接，第二纵向连杆205的上端安装圆孔和第三纵向连杆211的上端安装圆孔分别与第三横向连杆210的左右两端实现转动连接，第四横向连杆212依次穿过第一纵向连杆203、第二纵向连杆205、第三纵向连杆211和第四纵向连杆213的中间安装圆孔并实现转动连接；下固定板201的上表面后端中心安装丝杆电机216，丝杆电机216的输出端与丝杆217的后端固定连接，在第一横向连杆204的正中间固定安装丝杆螺母218，丝杆217的前端通过丝杆螺母218，丝杆电机216通过转动，带动第一横向连杆204沿左侧下滑轨202和右侧下滑轨214的导向槽移动，以调节第一与第二纵向连杆205以及第三与第四纵向连杆213之间的角度，从而能够沿高度方向调节下固定板201与上固定板208之间的垂直距离，实现高度位置调节和固定，以适应不同身高的训练患者。如图4所示，六自由度并联机构4包括：静平台401、动平台403和六条支链402；其中，静平台是一个柱状框架结构，前后轴线投影呈现六边形分布，选择静平台401的前后轴向一面的外表面固定安装在高度调节升降机2的上固定板208上表面中心；动平台403呈现六边形结构；每条支链402呈滑动关节-U型万向节-转动关节-U型万向节的结构，包括电机输出滑块402-2、第一U型万向节402-3、第一支链连杆402-4、支链轴向转动关节402-5、第二支链连杆402-6和第二U型万向节402-7，其中，直线驱动电机402-1与静平台的内表面即静平台的前表面固定安装连接，直线驱动电机402-1的输出轴连接至相应的电机输出滑402-2，电机输出滑块402-2能够实现一自由度直线滑动，电机输出滑块与第一支链连杆402-4末端通过第一U型万向节402-3实现二自由度转动，第一支链连杆402-4的前端与第二支链连杆402-6末端通过支链轴向转动关节402-5实现沿第一支链连杆402-4及第二支链连杆402-6轴线方向的一自由度转动，第二支链连杆402-6前端与动平台通过第二U型万向节402-7实现二自由度转动，第二U型万向节402-7安装在动平台的后表面，直线驱动电机直线驱动电机输出滑块滑动，从而经过第一U型万向节402-3、第一支链连杆402-4、支链轴向转动关节402-5、第二支链连杆402-6和第二U型万向节402-7带动动平台运动，动平台在六个直线驱动电机的驱动下，能够实现三维空间的三个移动以及三个转动共计六个自由度运动。如图5所示，静平台六边形第一至第六边分别为a1～a6，动平台六边形第一至第六边分别为A1～A6；前后轴线投影视角下，第一直线驱动电机和第二直线电机固定安装在静平台六边形第一边a1上，第三直线驱动电机和第四直线电机固定安装在静平台六边形第三边a3上，第五直线驱动电机和第六直线电机固定安装在静平台六边形第五边a5上，六个直线驱动电机的输出直线滑动方向均沿前后轴线方向；第二直线驱动电机对应的支链前端第二U型万向节和第三直线驱动电机对应的支链前端第二U型万向节固定安装在动平台六边形第二边A2上，第四直线驱动电机对应的支链前端第二U型万向节和第五直线驱动电机对应的支链前端第二U型万向节固定安装在动平台六边形第四边A4上，第六直线驱动电机对应的支链前端第二U型万向节和第一直线驱动电机对应的支链前端第二U型万向节固定安装在动平台六边形第六边A6上。本实施例的助行训练系统的一体化控制方法，如图8所示，包括以下步骤：1)助行训练系统是一种典型的物理人机交互类型的训练系统，训练患者与助行训练系统的物理人机交互接口为骨盆固定绷带；在训练过程中，人机交互一方面要顺应训练患者运动意图中有益部分，如辅助行走中行走意图；另一方面要预防训练患者运动意图中不利部分，如平衡控制中的跌倒风险；2)智能控制单元接收直线驱动电机的位置编码器的位置信息和六维力传感器的人机交互力信息，并通过控制计算后，向直线驱动电机输出控制命令；直线驱动电机根据控制命令，控制六自由度并联机构实现辅助行走、平衡控制和减重支撑的控制动作；3)在训练开始前，根据训练患者的骨盆高度，调整高度调节上滑动架的位置，达到训练患者与骨盆固定绷带最优固定连接的目的；然后，助行训练系统通电，并通过自动校正零点的方式，使得六自由度并联机构的直线驱动电机的位置编码器输出和六维力传感器输出归零；在系统归零状态下，定义归零状态下的骨盆固定绷带的中心为系统运动末端的原点，在该原点建立静坐标系Oee-xyz，其中，x轴方向与训练患者水平左右方向平行、y轴方向与训练患者水平前后方向平行、z轴方向与训练患者竖直方向平行；在训练过程中，骨盆固定绷带的中心随着训练患者的骨盆运动而发生变化，定义实时的以骨盆固定绷带的中心为原点的动坐标系为O′ee-x′y′z′，其中，在归零状态下，静坐标系Oee-xyz和动坐标系O′ee-x′y′z′重合；在六自由度并联机构的静平台上建立惯性坐标系O-XYZ，其正交坐标轴方向定义与坐标系Oee-xyz一致，如图7所示；4)在训练过程中，针对训练患者的骨盆控制能力较弱难以实现行走步态的运动障碍问题，助行训练系统提供辅助行走控制策略：在训练患者穿戴骨盆固定绷带的行走过程中，六维力传感器获取反映训练患者的骨盆运动特征的人机交互力信息；智能控制单元根据六维力传感器获取的人机交互力信息，基于辅助助力的原则，智能控制单元通过直线驱动电机驱动六自由度并联机构的动平台，生成顺应训练患者骨盆运动的辅助行走控制策略控制力，辅助训练患者的骨盆完成行走步态的动作；生成针对辅助行走控制策略控制力，包括步骤：a)六维力传感器输出的力和力矩信息标记为F，六维力传感器在出厂自定义坐标系OF-x″y″z″下的输出的力和力矩信息包含了x″、y″和z″方向上的分力Fx″，Fy″和Fz″和x″、y″和z″方向的分力矩τx″，τy″和τz″，即F＝；b)从六维力传感器到六自由度并联机构的直线驱动电机的运动学雅克比矩阵为JF，从骨盆固定绷带中心点到六维力传感器的位姿传递矩阵为TF，控制增益调节系数矩阵为KF，则辅助行走控制策略控制力τwalk的计算公式如下：其中，为位姿传递矩阵JF的转置矩阵，diag表示斜对角矩阵，Xee，Yee，Zee为骨盆固定绷带的中心点的动坐标系O′ee-x′y′z′在系统惯性坐标系O-XYZ下的位置，αee，βee，γee为骨盆固定绷带中心点动坐标系O′ee-x′y′z′在系统惯性坐标系O-XYZ下的姿态变量；控制增益调节系数矩阵KF能够保证助行训练系统只有在训练患者有运动意图，即各维度上产生相关运动速度时，系统才会提供辅助行走控制策略控制力；5)在训练过程中，针对训练患者平衡控制能力不足难以实现稳定步态的运动障碍问题，助行训练系统提供平衡控制策略：平衡控制以归零状态下骨盆固定绷带中心Oee为原点，定义一个以静坐标系Oee-xyz原点为中心，建立x、y、z轴向长度分别为wx、wy、wz的矩形正常行走的内空间；智能控制单元根据直线驱动电机的位置编码器的位置信息，判断训练患者接近或者超出内空间的边界，训练患者如果接近或者超出内空间的边界，意味着训练患者存在失去平衡的风险，此时提供额外的辅助力进行干预；平衡控制的目的分两层，首先是在内空间靠近静坐标系的原点Oee时，助行训练系统不干预或者极小干预训练患者的平衡姿态；其次是在内空间远离静坐标系的原点Oee并靠近内空间的边界时，助行训练系统主动干预训练患者的平衡姿态，基于增加阻力的原则，智能控制单元通过直线驱动电机驱动六自由度并联机构的动平台，生成额外的平衡控制策略控制力，防止训练患者进入到内空间之外的空间；生成针对平衡控制策略控制力，包括以下步骤：a)在训练过程中，动坐标系O′ee-x′y′z′的原点在静坐标系Oee-xyz的位置矢量表达为rd＝其中，rd_x，rd_y，rd_z分别为动坐标系O′ee-x′y′z′的原点在静坐标系Oee-xyz的位置矢量表达rd在x、y、z方向上的分量；b)定义静坐标系Oee-xyz在x、y、z各个轴向的阻尼系数分别为针对前述阻尼系数的定义，当骨盆固定绷带中心O′ee在靠近静坐标系的原点Oee时，阻尼系数数值较小，数值范围在，对应产生的阻力忽略不计，不妨碍训练患者的正常训练动作；当骨盆固定绷带中心O′ee在远离静坐标系的原点Oee时，阻尼系数数值迅速增大，对应产生的阻力能够防止训练患者从内空间跨过内空间的边界；c)平衡控制策略控制力τbalance的计算同时需要考虑实时的人机交互力F在X、Y、Z方向上的投影数值，标记为，以保证训练患者的平衡控制调节是有效的，具体计算如下：通过施加额外的平衡控制策略控制力，能够把训练患者的骨盆运动限制在正常行走内空间，该内空间根据不同的训练患者特征能够进行个性化设定范围，实现行走运动平衡的辅助；6)在训练过程中，针对训练患者下肢缺乏肌力难以支撑躯体重量的运动障碍问题，助行训练系统提供减重支撑控制策略：结合六维力传感器输出的竖直方向相关力及力矩，基于重力补偿的原则，在训练患者自身重量的基础上，智能控制单元通过直线驱动电机驱动六自由度并联机构的动平台，生成动态减重支撑控制策略控制力，减轻训练患者体重对双侧下肢的负担；生成针对减重支撑控制策略控制力，包括以下步骤：a)减重支撑控制策略控制力包含两部分，第一部分是减重支撑静态力，第二部分是减重支撑动态力；b)训练患者在静态站立条件下的竖直方向重力为G0，设定第一系数c1，0≤c1≤1，则减重支撑静态力部分为-c1·G0；c)在训练过程中，受训练患者躯体动态运动影响，训练患者竖直方向的受力呈动态变化，该部分减重支撑动态力计算公式为：其中，第二系数c2＞0，第三系数c3＞0；和FZ分别是Z方向上的加速度及合力，因此两者同号；同样运动速度大小条件下，当训练患者往下运动时，减重支撑动态力数值较小；当训练患者往上运动时，减重支撑动态力数值较大；d)减重支撑控制策略控制力τweight的计算公式为：7)针对上述提到的辅助行走、平衡控制和减重支撑三种控制策略，为了实现人机交互的自然柔顺性，需要避免由于三种控制策略的切换造成的人机交互体检不适，因此，把前述三种控制策略纳入到一个统一的一体化控制框架内，实现助行训练系统的一体化控制：在一体化控制框架内，根据六维力传感器提供的人机交互力信息及位置编码器提供的位置信息，将辅助行走控制策略控制力、平衡控制策略控制力和动态减重支撑控制策略控制力叠加生成综合控制力，并结合系统的动力学模型，计算出电机命令速度，输入到对应的直线驱动电机中，通过直线驱动电机的运动输出，控制六自由度并联机构的动平台的速度，达到按控制目的驱动助行训练系统的需求；把助行训练系统与训练患者之间的物理人机交互模型描述为弹簧质量阻尼系统，考虑到由于骨盆固定绷带与训练患者的骨盆固定连接，因此训练患者的骨盆位置信息即为助行训练系统骨盆固定绷带的期望位置，则助行训练系统满足下面的控制模型：其中，Ma为可调节惯性系数，Ba为可调节阻尼系数，V为六自由度并联机构动平台修正速度，为六自由度并联机构动平台修正加速度；τwalk为辅助行走控制策略控制力，τbalance为平衡控制策略控制力，τweight为减重支撑控制策略控制力，τtotal为综合控制力，即辅助行走控制策略控制力、平衡控制策略控制力和减重支撑控制策略控制力之和；助行训练系统的智能控制单元的采样时间间隔为T，Vn为当前时刻助行训练系统的六自由度并联机构动平台修正速度，Vn-1为上一时刻助行训练系统的六自由度并联机构动平台修正速度，满足：进一步，推出各个支链直线驱动电机的命令速度其中，矩阵J-1是从动坐标系O′ee-x′y′z′到六自由度并联机构支链直线驱动电机的运动学雅克比矩阵的逆矩阵。最后需要注意的是，公布实施例的目的在于帮助进一步理解本发明，但是本领域的技术人员可以理解：在不脱离本发明及所附的权利要求的精神和范围内，各种替换和修改都是可能的。因此，本发明不应局限于实施例所公开的内容，本发明要求保护的范围以权利要求书界定的范围为准。
