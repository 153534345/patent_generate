标题title
一种多个小程序功能模块插件化处理方法、系统及介质
摘要abst
本发明公开了一种多个小程序功能模块插件化处理方法、系统及介质，方法包括：根据小程序集群的相似部分，生成目标通用页面文件；根据小程序集群的用户文件，生成目标标识文件；根据小程序集群对应渠道的配置数据，生成目标配置文件；根据目标通用页面文件、目标标识文件和目标配置文件组成小程序集群的插件；获取小程序集群预设的js文件；根据js文件完成所述小程序集群中各小程序的插件调用。本发明通过基于微信小程序的插件化开发，为多渠道提高统一的小程序插件，解决了相似功能模块的重复开发工作的问题，提高了企业各渠道间相似模块功能的代码复用性，降低了人工成本以及后期维护成本，可广泛应用于微信小程序开发技术领域。
权利要求书clms
1.一种多个小程序功能模块插件化处理方法，其特征在于，包括：根据小程序集群的相似部分，生成目标通用页面文件；根据所述小程序集群的用户文件，生成目标标识文件；根据所述小程序集群对应渠道的配置数据，生成目标配置文件；根据所述目标通用页面文件、所述目标标识文件和所述目标配置文件组成所述小程序集群的插件；获取所述小程序集群预设的js文件；根据所述js文件完成所述小程序集群中各小程序的插件调用；其中，所述小程序集群包括至少一个待插件化处理的小程序，所述目标通用页面文件用于描述所述插件的页面特征，所述目标标识文件用于标识所述插件的匹配信息，所述目标配置文件用于描述所述插件的配置信息。2.根据权利要求1所述的一种多个小程序功能模块插件化处理方法，其特征在于，所述根据小程序集群的相似部分，生成目标通用页面文件，包括：根据小程序集群的相似部分，预设组件文件和基础页面文件，所述组件文件包括基础组件文件和运营组件文件；根据所述组件文件和所述基础页面文件组成所述目标通用页面文件。3.根据权利要求1所述的一种多个小程序功能模块插件化处理方法，其特征在于，所述根据所述小程序集群的用户文件，生成目标标识文件，包括：根据所述小程序集群中的各小程序调用微信登录接口获取的登录凭证，获取用户登录态信息；根据所述用户登录态信息，获取用户在所述小程序集群中各小程序的唯一标识和微信开发平台账户下的唯一标识；将所述小程序集群中各小程序的唯一标识作为对应各渠道的用户唯一标识；将所述微信开发平台账户下的唯一标识作为平台的用户唯一标识。4.根据权利要求1所述的一种多个小程序功能模块插件化处理方法，其特征在于，所述生成目标配置文件，包括以下至少之一：生成内容的配置文件；生成活动的配置文件。5.根据权利要求1所述的一种多个小程序功能模块插件化处理方法，其特征在于，所述获取所述小程序集群预设的js文件，包括：根据模块导出以键值对方式列出的参数信息；根据所述参数信息，获取所述js文件。6.根据权利要求1所述的一种多个小程序功能模块插件化处理方法，其特征在于，所述根据所述js文件完成所述小程序集群中各小程序的插件调用，包括：所述插件根据全局函数读取所述js文件，获取目标小程序对应的渠道数据；根据微信请求，通过所述插件调用端口传入所述渠道数据；通过所述插件将所述渠道数据在所述目标小程序展示。7.根据权利要求6所述的一种多个小程序功能模块插件化处理方法，其特征在于，所述获取目标小程序对应的渠道数据，包括以下至少之一：获取所述目标小程序对应的渠道值；获取所述目标小程序对应的用户信息。8.一种多个小程序功能模块插件化处理系统，其特征在于，包括：第一模块，用于根据小程序集群的相似部分，生成目标通用页面文件；第二模块，用于根据所述小程序集群的用户文件，生成目标标识文件；第三模块，用于根据所述小程序集群对应渠道的配置数据，生成目标配置文件；第四模块，用于根据所述目标通用页面文件、所述目标标识文件和所述目标配置文件组成所述小程序集群的插件；第五模块，用于获取所述小程序集群预设的js文件；第六模块，用于根据所述js文件完成所述小程序集群中各小程序的插件调用；其中，所述小程序集群包括至少一个待插件化处理的小程序，所述目标通用页面文件用于描述所述插件的页面特征，所述目标标识文件用于标识所述插件的匹配信息，所述目标配置文件用于描述所述插件的配置信息。9.一种电子设备，其特征在于，包括处理器以及存储器；所述存储器用于存储程序；所述处理器执行所述程序实现如权利要求1至7中任一项所述的方法。10.一种计算机可读存储介质，其特征在于，所述存储介质存储有程序，所述程序被处理器执行实现如权利要求1至7中任一项所述的方法。
说明书desc
技术领域本发明涉及微信小程序开发技术领域，尤其是一种多个小程序功能模块插件化处理方法、系统及介质。背景技术目前市面上的企业通常有多个渠道，常常需要针对各渠道提供能独立运作的小程序应用，现有技术的常规手段是将各种功能模块组合开发成多个独立小程序，但是单个小程序开发周期长，并且后期需要多方各自运营，同时使用多个后台管理系统进行数据维护。因此，现有的技术，常用功能模块在各小程序间重复开发，一个功能调整各应用的功能模块都得配合调整，使得人工成本增大，并且增加后期维护难度。发明内容有鉴于此，本发明实施例提供一种多个小程序功能模块插件化处理方法、系统及介质，能够为多渠道提供统一的小程序插件，避免了相似功能模块的重复开发工作，降低了人工成本以及后期维护成本。本发明实施例的第一方面提供了一种多个小程序功能模块插件化处理方法，包括：根据小程序集群的相似部分，生成目标通用页面文件；根据所述小程序集群的用户文件，生成目标标识文件；根据所述小程序集群对应渠道的配置数据，生成目标配置文件；根据所述目标通用页面文件、所述目标标识文件和所述目标配置文件组成所述小程序集群的插件；获取所述小程序集群预设的js文件；根据所述js文件完成所述小程序集群中各小程序的插件调用；其中，所述小程序集群包括至少一个待插件化处理的小程序，所述目标通用页面文件用于描述所述插件的页面特征，所述目标标识文件用于标识所述插件的匹配信息，所述目标配置文件用于描述所述插件的配置信息。可选地，所述根据小程序集群的相似部分，生成目标通用页面文件，包括：根据小程序集群的相似部分，预设组件文件和基础页面文件，所述组件文件包括基础组件文件和运营组件文件；根据所述组件文件和所述基础页面文件组成所述目标通用页面文件。可选地，所述根据所述小程序集群的用户文件，生成目标标识文件，包括：根据所述小程序集群中的各小程序调用微信登录接口获取的登录凭证，获取用户登录态信息；根据所述用户登录态信息，获取用户在所述小程序集群中各小程序的唯一标识和微信开发平台账户下的唯一标识；将所述小程序集群中各小程序的唯一标识作为对应各渠道的用户唯一标识；将所述微信开发平台账户下的唯一标识作为平台的用户唯一标识。可选地，所述生成目标配置文件，包括以下至少之一：生成内容的配置文件；生成活动的配置文件。可选地，所述获取所述小程序集群预设的js文件，包括：根据模块导出以键值对方式列出的参数信息；根据所述参数信息，获取所述js文件。可选地，所述根据所述js文件完成所述小程序集群中各小程序的插件调用，包括：所述插件根据全局函数读取所述js文件，获取目标小程序对应的渠道数据；根据微信请求，通过所述插件调用端口传入所述渠道数据；通过所述插件将所述渠道数据在所述目标小程序展示。可选地，所述获取目标小程序对应的渠道数据，包括以下至少之一：获取所述目标小程序对应的渠道值；获取所述目标小程序对应的用户信息。本发明实施例第二方面提供了一种多个小程序功能模块插件化处理系统，包括：第一模块，用于根据小程序集群的相似部分，生成目标通用页面文件；第二模块，用于根据所述小程序集群的用户文件，生成目标标识文件；第三模块，用于根据所述小程序集群对应渠道的配置数据，生成目标配置文件；第四模块，用于根据所述目标通用页面文件、所述目标标识文件和所述目标配置文件组成所述小程序集群的插件；第五模块，用于获取所述小程序集群预设的js文件；第六模块，用于根据所述js文件完成所述小程序集群中各小程序的插件调用；其中，所述小程序集群包括至少一个待插件化处理的小程序，所述目标通用页面文件用于描述所述插件的页面特征，所述目标标识文件用于标识所述插件的匹配信息，所述目标配置文件用于描述所述插件的配置信息。本发明实施例的第三方面提供了一种电子设备，包括处理器以及存储器；所述存储器用于存储程序；所述处理器执行所述程序实现如前面所述的方法。本发明实施例的第四方面提供了一种计算机可读存储介质，所述存储介质存储有程序，所述程序被处理器执行实现如前面所述的方法。本发明实施例还公开了一种计算机程序产品或计算机程序，该计算机程序产品或计算机程序包括计算机指令，该计算机指令存储在计算机可读存储介质中。计算机设备的处理器可以从计算机可读存储介质读取该计算机指令，处理器执行该计算机指令，使得该计算机设备执行前面的方法。本发明的实施例提供的技术方案具有有益效果：通过基于微信小程序的插件化开发，为多渠道提高统一的小程序插件，解决了相似功能模块的重复开发工作问题，提高了企业各渠道间相似模块功能的代码复用性，降低了人工成本以及后期维护成本。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例提供的多个小程序功能模块插件化处理方法的流程示意图；图2为本发明实施例提供的多个渠道方的配置项示意图；图3为本发明实施例提供的调用插件展示数据的流程示意图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。下面结合说明书附图，对本发明的具体实施方式的实现原理进行详细说明：图1所示为本发明实施例提供的多个小程序功能模块插件化处理方法的流程示意图，方法包括：根据小程序集群的相似部分，生成目标通用页面文件；根据小程序集群的用户文件，生成目标标识文件；根据小程序集群对应渠道的配置数据，生成目标配置文件；根据目标通用页面文件、目标标识文件和目标配置文件组成小程序集群的插件；获取小程序集群预设的js文件；根据js文件完成小程序集群中各小程序的插件调用；其中，小程序集群包括至少一个待插件化处理的小程序，目标通用页面文件用于描述插件的页面特征，目标标识文件用于标识插件的匹配信息，目标配置文件用于描述插件的配置信息。在一些实施例中，根据小程序集群的相似部分，生成目标通用页面文件，包括：根据小程序集群的相似部分，预设组件文件和基础页面文件，组件文件包括基础组件文件和运营组件文件；根据组件文件和基础页面文件组成目标通用页面文件。在一些实施例中，根据小程序集群的用户文件，生成目标标识文件，包括：根据小程序集群中的各小程序调用微信登录接口获取的登录凭证，获取用户登录态信息；根据用户登录态信息，获取用户在小程序集群中各小程序的唯一标识和微信开发平台账户下的唯一标识；将小程序集群中各小程序的唯一标识作为对应各渠道的用户唯一标识；将微信开发平台账户下的唯一标识作为平台的用户唯一标识。在一些实施例中，生成目标配置文件，包括以下至少之一：生成内容的配置文件；生成活动的配置文件。在一些实施例中，获取小程序集群预设的js文件，包括：根据模块导出以键值对方式列出的参数信息；根据参数信息，获取js文件。在一些实施例中，根据js文件完成小程序集群中各小程序的插件调用，包括：插件根据全局函数读取js文件，获取目标小程序对应的渠道数据；根据微信请求，通过插件调用端口传入渠道数据；通过插件将渠道数据在目标小程序展示。在一些实施例中，获取目标小程序对应的渠道数据，包括以下至少之一：获取目标小程序对应的渠道值；获取目标小程序对应的用户信息。具体地，在一些实施例中，本发明通过以下步骤实现上述方法：一、定制开发好各小程序的通用组件/页面；二、中心平台进行统一用户管理；三、中心平台提供多渠道内容配置；四、各调用方传入唯一渠道标志；五、插件获取对应渠道的内容数据并展现输出到小程序端。步骤一的详细步骤如下：根据企业各渠道小程序相似度高的部分，拆分为基础组件、运营组件及基础页面；对定义好的组件、页面进行业务代码编写，按业务功能调用微信提供的接口及功能进行开发，并分别存放在components及pages中，并将需要提供给小程序方调用的组件和页面在配置文件plugin.json中列出，自定义组件在publicComponents中以键值对的格式列出：“组件名：组件路径”；自定义页面在pages中以键值对的格式列出：“页面名：页面路径”。步骤二的详细步骤如下：通过各渠道的小程序主体绑定相同的微信开放平台账号，随后各小程序能够通过调用微信登录接口获取登录凭证，进而通过登录凭证到服务端获取用户登录信息，将获取到的用户信息在当前小程序的唯一标识来作为各渠道的用户唯一标识，并且将微信开放平台帐号下的唯一标识来作为全平台的用户唯一标识。需要说明的是，通过中心平台对用户渠道的唯一用户标识及全平台唯一用户标识进行储存，并且通过记录的全平台唯一用户标识辨别用户，可以实现全平台统一登录的功能以及记录用户对内容的点赞、收藏、点评等操作。步骤三的详细步骤如下：参照图2，中心平台可拓展添加多个渠道方，同时可以为各平台配置对应的内容、活动等，配置项可根据实际需求定制化开发；步骤四的详细步骤如下：各渠道方的小程序通过export导出js供插件方获取小程序方的渠道标志及用户信息。具体操作如下：1)通过模块导出小程序预设的index.js文件供插件方获取，以键值对的方式列出所需信息：Channel：‘渠道A'’；openId：‘当前小程序的唯一标识openid’；unionId：‘微信开放平台帐号下的唯一标识’。2)通过miniprogram/app.json导出index.js供插件调用；通过声明插件名，并在插件信息中以键值对的方式导出，通过version参数，控制引入的插件版本；通过provider参数，写入供应者的appId引用对应的插件；通过export参数，写入需导出的文件路径，供插件使用。步骤五的详细步骤如下：参照图3，插件通过requireMiniProgram读取步骤四中导出的文件，获取小程序的渠道及用户信息；声明公共变量openId并予其赋值通过全局函数获取到的小程序导出的openId，储存到插件公共变量中；同上述储存openId的操作，将channel、unionId也储存至公共变量中；插件通过wx.request发起HTTPS网络请求，调用后端接口并传入渠道信息，获取对应渠道的数据并进行展示；具体操作如下：1)通过url传入中心平台接口地址；2)通过data以键值对的方式传入参数channel：渠道值3)监听success，根据接口返回的code确定是否为200，非200，则进行错误状态码日志打印)并在页面做出异常提示；返回的code为200时，对返回的数据渲染展示，通过调用setData接口进行动态数据绑定，视图层通过wx:for对数据进行遍历，再使用view标签承载遍历出的数据，从而实现用户界面对数据内容的展示；4)监听fail，对返回的错误信息进行日志打印并在页面做出异常提示。本发明实施例提供了多个小程序功能模块插件化处理系统，包括：第一模块，用于根据小程序集群的相似部分，生成目标通用页面文件；第二模块，用于根据所述小程序集群的用户文件，生成目标标识文件；第三模块，用于根据所述小程序集群对应渠道的配置数据，生成目标配置文件；第四模块，用于根据所述目标通用页面文件、所述目标标识文件和所述目标配置文件组成所述小程序集群的插件；第五模块，用于获取所述小程序集群预设的js文件；第六模块，用于根据所述js文件完成所述小程序集群中各小程序的插件调用；其中，所述小程序集群包括至少一个待插件化处理的小程序，所述目标通用页面文件用于描述所述插件的页面特征，所述目标标识文件用于标识所述插件的匹配信息，所述目标配置文件用于描述所述插件的配置信息。本发明方法实施例的内容均适用于本系统实施例，本系统实施例所具有实现的功能与上述方法实施例相同，并且达到的有益效果与上述方法达到的有益效果也相同。本发明实施例提供了一种电子设备，包括处理器以及存储器；存储器用于存储程序；处理器执行程序实现多个小程序功能模块插件化处理方法。本发明方法实施例的内容均适用于本电子设备实施例，本电子设备实施例所具体实现的功能与上述方法实施例相同，并且达到的有益效果与上述方法达到的有益效果也相同。综上所述，本发明实施例能够实现基于微信小程序的插件化开发，通过识别调用插件的小程序方，为小程序方呈现相应的内容数据，解决现有多渠道/品牌，相似功能模块重复开发的问题。相较于现有技术针对多个渠道分别开发，并为各渠道提供能够独立运行的小程序，本发明实施例提供的技术方案可以提高企业各品牌渠道间相似模块功能的代码复用性，减少新项目的开发成本，降低了人工成本，同时减少了项目后期的维护成本。本发明实施例还公开了一种计算机程序产品或计算机程序，该计算机程序产品或计算机程序包括计算机指令，该计算机指令存储在计算机可读存储介质中。计算机设备的处理器可以从计算机可读存储介质读取该计算机指令，处理器执行该计算机指令，使得该计算机设备执行上述的方法。在一些可选择的实施例中，在方框图中提到的功能/操作可以不按照操作示图提到的顺序发生。例如，取决于所涉及的功能/操作，连续示出的两个方框实际上可以被大体上同时地执行或所述方框有时能以相反顺序被执行。此外，在本发明的流程图中所呈现和描述的实施例以示例的方式被提供，目的在于提供对技术更全面的理解。所公开的方法不限于本文所呈现的操作和逻辑流程。可选择的实施例是可预期的，其中各种操作的顺序被改变以及其中被描述为较大操作的一部分的子操作被独立地执行。此外，虽然在功能性模块的背景下描述了本发明，但应当理解的是，除非另有相反说明，所述的功能和/或特征中的一个或多个可以被集成在单个物理系统和/或软件模块中，或者一个或多个功能和/或特征可以在单独的物理系统或软件模块中被实现。还可以理解的是，有关每个模块的实际实现的详细讨论对于理解本发明是不必要的。更确切地说，考虑到在本文中公开的系统中各种功能模块的属性、功能和内部关系的情况下，在工程师的常规技术内将会了解该模块的实际实现。因此，本领域技术人员运用普通技术就能够在无需过度试验的情况下实现在权利要求书中所阐明的本发明。还可以理解的是，所公开的特定概念仅仅是说明性的，并不意在限制本发明的范围，本发明的范围由所附权利要求书及其等同方案的全部范围来决定。所述功能如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。在流程图中表示或在此以其他方式描述的逻辑和/或步骤，例如，可以被认为是用于实现逻辑功能的可执行指令的定序列表，可以具体实现在任何计算机可读介质中，以供指令执行系统、系统或设备使用，或结合这些指令执行系统、系统或设备而使用。就本说明书而言，“计算机可读介质”可以是任何可以包含、存储、通信、传播或传输程序以供指令执行系统、系统或设备或结合这些指令执行系统、系统或设备而使用的系统。计算机可读介质的更具体的示例包括以下：具有一个或多个布线的电连接部，便携式计算机盘盒，随机存取存储器，只读存储器，可擦除可编辑只读存储器，光纤系统，以及便携式光盘只读存储器。另外，计算机可读介质甚至可以是可在其上打印所述程序的纸或其他合适的介质，因为可以例如通过对纸或其他介质进行光学扫描，接着进行编辑、解译或必要时以其他合适方式进行处理来以电子方式获得所述程序，然后将其存储在计算机存储器中。应当理解，本发明的各部分可以用硬件、软件、固件或它们的组合来实现。在上述实施方式中，多个步骤或方法可以用存储在存储器中且由合适的指令执行系统执行的软件或固件来实现。例如，如果用硬件来实现，和在另一实施方式中一样，可用本领域公知的下列技术中的任一项或他们的组合来实现：具有用于对数据信号实现逻辑功能的逻辑门电路的离散逻辑电路，具有合适的组合逻辑门电路的专用集成电路，可编程门阵列，现场可编程门阵列等。在本说明书的描述中，参考术语“一个实施例”、“一些实施例”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。尽管已经示出和描述了本发明的实施例，本领域的普通技术人员可以理解：在不脱离本发明的原理和宗旨的情况下可以对这些实施例进行多种变化、修改、替换和变型，本发明的范围由权利要求及其等同物限定。以上是对本发明的较佳实施进行了具体说明，但本发明并不限于所述实施例，熟悉本领域的技术人员在不违背本发明精神的前提下还可做出种种的等同变形或替换，这些等同的变形或替换均包含在本申请权利要求所限定的范围内。
