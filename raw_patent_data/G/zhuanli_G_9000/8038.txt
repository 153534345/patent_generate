标题title
区域分割方法及装置
摘要abst
本发明公开了一种区域分割方法及装置，通过提取脑组织图像的像素值；将灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射；使用超像素分割技术生成每个参数图的超像素图像；将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；将所有超像素图像的特征向量的总和定义为第二特征矩阵；将第一特征矩阵和第二特征矩阵组合得到总矩阵；通过机器学习算法并经过3D模型过滤器分割半暗带和缺血核心区域。本发明采取全自动算法分割半暗带和缺血核心区域，相比传统的分割技术，分割更加精细化，也大大缩短了分割时间，提升了分割效率。
权利要求书clms
1.一种区域分割方法，其特征在于，包括：获取脑组织图像，并提取所述脑组织图像的像素值；将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图、峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表；使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括脑血流量超像素图像、脑血容量超像素图像、峰值时间超像素图像和达峰时间超像素图像；通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；根据所述总矩阵，通过机器学习算法并经过3D模型过滤器分割半暗带和缺血核心区域。2.根据权利要求1所述的区域分割方法，其特征在于，所述机器学习算法包括决策树学习算法和随机森林算法。3.根据权利要求1所述的区域分割方法，其特征在于，所述通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，包括：其中，n代表脑血流量参考图、脑血容量参考图、峰值时间参考图和达峰时间参考图中的任意一种，Xn代表脑血流量特征向量、脑血容量特征向量、峰值时间特征向量和达峰时间特征向量中的任意一种，BT代表脑组织的像素值，stack代表堆栈函数。4.一种区域分割方法，其特征在于，所述方法包括步骤1和步骤2，所述步骤1，包括：获取脑组织图像，并提取所述脑组织图像的像素值；将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表；使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括峰值时间超像素图像、达峰时间超像素图像；通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；根据所述总矩阵，通过SVM算法对半暗带进行分割，输出半暗带的二值图像；所述步骤2，包括：获取脑组织图像，并提取所述脑组织图像的像素值；将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图；使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括脑血流量超像素图像、脑血容量超像素图像；通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量的总和定义为第一特征矩阵；通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；根据所述总矩阵，通过SVM算法对缺血核心区域进行分割，输出缺血核心区域的二值图像。5.一种区域分割装置，其特征在于，包括：脑组织获取模块，用于获取脑组织图像，并提取所述脑组织图像的像素值；映射模块，用于将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图、峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表；超像素图像生成模块，用于使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括脑血流量超像素图像、脑血容量超像素图像、峰值时间超像素图像和达峰时间超像素图像；第一特征矩阵生成模块，用于通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；第二特征矩阵生成模块，用于通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；总矩阵生成模块，用于将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；分割模块，用于根据所述总矩阵，通过机器学习算法并经过3D模型过滤器分割半暗带和缺血核心区域。6.根据权利要求5所述的区域分割装置，其特征在于，所述第一特征矩阵生成模块，还用于执行如下步骤：其中，n代表脑血流量参考图、脑血容量参考图、峰值时间参考图和达峰时间参考图中的任意一种，Xn代表脑血流量特征向量、脑血容量特征向量、峰值时间特征向量和达峰时间特征向量中的任意一种，BT代表脑组织的像素值，stack代表堆栈函数。7.一种区域分割装置，其特征在于，所述装置包括半暗带分割子装置和缺血核心区域分割子装置，所述半暗带分割子装置，包括：脑组织获取模块，用于获取脑组织图像，并提取所述脑组织图像的像素值；映射模块，用于将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表；超像素图像生成模块，用于使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括峰值时间超像素图像、达峰时间超像素图像；第一特征矩阵生成模块，用于通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；第二特征矩阵生成模块，用于通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；总矩阵生成模块，用于将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；半暗带分割模块，用于根据所述总矩阵，通过SVM算法对半暗带进行分割，输出半暗带的二值图像；所述缺血核心区域分割子装置，包括：脑组织获取模块，用于获取脑组织图像，并提取所述脑组织图像的像素值；映射模块，用于将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图；超像素图像生成模块，用于使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括脑血流量超像素图像、脑血容量超像素图像；第一特征矩阵生成模块，用于通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量的总和定义为第一特征矩阵；第二特征矩阵生成模块，用于通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；总矩阵生成模块，用于将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；缺血核心区域分割模块，用于根据所述总矩阵，通过SVM算法对缺血核心区域进行分割，输出缺血核心区域的二值图像。8.一种计算机设备，包括存储器和处理器，所述存储器存储有可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至3任意一项所述的方法，或者权利要求4所述的方法的步骤。9.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至3任意一项所述的方法，或者权利要求4所述的方法的步骤。
说明书desc
技术领域本申请涉及医学图像处理技术领域，具体而言，涉及一种区域分割方法、装置、计算机设备和存储介质。背景技术对于缺血区域的分割，一般是采用“基于计算机断层扫描灌注技术后的手动分割”技术，通过计算机断层扫描灌注的方式，在CTP中在造影剂注射期间获取时间序列的三维数据集。根据组织密度随时间的变化，计算颜色编码的参数图，通过评估这些参数图来间接评估缺血核心区和半暗带。手动分割技术虽然依照患者实际情况进行分割并采取有效的治疗决策，但手动分割技术耗时过长，所以需要自动化的分割技术来进行缺血区域分割，故此应运产生了第二种方法“基于像素信息提取图像连通区域的半自动分割”技术。但半自动分割技术仅用于使用3D T2快速自旋回声磁共振成像的脑梗死面积，且分割目标是描绘缺血区域，而不是将缺血核心区和半暗带区分开来。因此并不能完成缺血区域的分割。随着对自动化分割技术的需求进一步加深，研发出了第三种方法“基于机器学习和卷积神经网络算法自动化分割”技术。“基于机器学习和卷积神经网络算法自动化分割”技术产生于近年，随着ML和CNN算法在大量医学图像分析应用中取得可喜成果，也进入了缺血性脑卒中应用。例如：以参数映射输入和临床数据的广义线性组织模型量化组织梗死变化；用非对比计算机断层扫描输入，随访磁共振扩散加权成像作为标准答案的急性缺血性脑卒中患者早期梗死检测算法；基于CNN的半自动方法，对缺血核心进行分类。但是以上算法只被训练来分类缺血核心区域，而没有发现半暗带区域。除了上述的自动分割算法，还创建了以多相CTA输入，DWI/NCCT随访图像作为标准答案算法预测缺血核心区域和半暗带，但主要目标是证明多相血管造影检查与CTP成像相比在评估缺血区域的有效性，且使用随访图像来描绘缺血区域限制了医生的可用性，可能无助于治疗决策，只是与临床结果进行比较，其数据材料仍存在局限性。针对上述相关技术中所存在的手动分割技术时间过长、半自动分割技术无法分割缺血区域中缺血核心区域和半暗带、“基于ML和CNN算法自动化分割”技术的图像及数据材料的局限性的诸多问题，目前尚未提出有效的解决方案。发明内容本发明实施例提供一种区域分割方法、装置、计算机设备和存储介质，用以解决相关技术中所存在的分割时间过长、无法分割缺血区域中缺血核心区域和半暗带、以及图像及数据材料的局限性的问题。为了实现上述目的，本发明实施例的第一方面，提供一种区域分割方法，包括：获取脑组织图像，并提取所述脑组织图像的像素值；将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图、峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表；使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括脑血流量超像素图像、脑血容量超像素图像、峰值时间超像素图像和达峰时间超像素图像；通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；根据所述总矩阵，通过机器学习算法并经过3D模型过滤器分割半暗带和缺血核心区域。可选地，在第一方面的一种可能实现方式中，所述机器学习算法包括决策树学习算法和随机森林算法。可选地，在第一方面的一种可能实现方式中，所述通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，包括：其中，n代表脑血流量参考图、脑血容量参考图、峰值时间参考图和达峰时间参考图中的任意一种，Xn代表脑血流量特征向量、脑血容量特征向量、峰值时间特征向量和达峰时间特征向量中的任意一种，BT代表脑组织的像素值，stack代表堆栈函数。本发明实施例的第二方面，还提供一种区域分割方法，所述方法包括步骤1和步骤2，所述步骤1，包括：获取脑组织图像，并提取所述脑组织图像的像素值；将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表；使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括峰值时间超像素图像、达峰时间超像素图像；通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；根据所述总矩阵，通过SVM算法对半暗带进行分割，输出半暗带的二值图像；所述步骤2，包括：获取脑组织图像，并提取所述脑组织图像的像素值；将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图；使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括脑血流量超像素图像、脑血容量超像素图像；通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量的总和定义为第一特征矩阵；通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；根据所述总矩阵，通过SVM算法对缺血核心区域进行分割，输出缺血核心区域的二值图像。本发明实施例的第三方面，提供一种区域分割装置，包括：脑组织获取模块，用于获取脑组织图像，并提取所述脑组织图像的像素值；映射模块，用于将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图、峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表；超像素图像生成模块，用于使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括脑血流量超像素图像、脑血容量超像素图像、峰值时间超像素图像和达峰时间超像素图像；第一特征矩阵生成模块，用于通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；第二特征矩阵生成模块，用于通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；总矩阵生成模块，用于将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；分割模块，用于根据所述总矩阵，通过机器学习算法并经过3D模型过滤器分割半暗带和缺血核心区域。可选地，在第三方面的一种可能实现方式中，所述第一特征矩阵生成模块，还用于执行如下步骤：其中，n代表脑血流量参考图、脑血容量参考图、峰值时间参考图和达峰时间参考图中的任意一种，Xn代表脑血流量特征向量、脑血容量特征向量、峰值时间特征向量和达峰时间特征向量中的任意一种，BT代表脑组织的像素值，stack代表堆栈函数。本发明实施例的第四方面，提供一种区域分割装置，所述装置包括半暗带分割子装置和缺血核心区域分割子装置，所述半暗带分割子装置，包括：脑组织获取模块，用于获取脑组织图像，并提取所述脑组织图像的像素值；映射模块，用于将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表；超像素图像生成模块，用于使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括峰值时间超像素图像、达峰时间超像素图像；第一特征矩阵生成模块，用于通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；第二特征矩阵生成模块，用于通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；总矩阵生成模块，用于将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；半暗带分割模块，用于根据所述总矩阵，通过SVM算法对半暗带进行分割，输出半暗带的二值图像；所述缺血核心区域分割子装置，包括：脑组织获取模块，用于获取脑组织图像，并提取所述脑组织图像的像素值；映射模块，用于将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图；超像素图像生成模块，用于使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括脑血流量超像素图像、脑血容量超像素图像；第一特征矩阵生成模块，用于通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量的总和定义为第一特征矩阵；第二特征矩阵生成模块，用于通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；总矩阵生成模块，用于将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；缺血核心区域分割模块，用于根据所述总矩阵，通过SVM算法对缺血核心区域进行分割，输出缺血核心区域的二值图像。本发明实施例的第五方面，提供一种计算机设备，包括存储器和处理器，所述存储器存储有可在处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述各个方法实施例中的步骤。本发明实施例的第六方面，提供一种可读存储介质，所述可读存储介质中存储有计算机程序，所述计算机程序被处理器执行时用于实现本发明第一方面及第一方面各种可能设计的所述方法的步骤。本发明提供的区域分割方法、装置、计算机设备和存储介质，通过获取脑组织图像，并提取所述脑组织图像的像素值；将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图、峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表；使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括脑血流量超像素图像、脑血容量超像素图像、峰值时间超像素图像和达峰时间超像素图像；通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；根据所述总矩阵，通过机器学习算法并经过3D模型过滤器分割半暗带和缺血核心区域。本发明采取全自动算法分割半暗带和缺血核心区域，相比传统的分割技术，分割更加精细化，也大大缩短了分割时间，提升了分割效率；也不会出现因为图像及材料的局限性导致无法准确对半暗带和缺血核心区域进行分割的情况。附图说明图1为本发明实施例提供的一种区域分割方法的流程图；图2为单步法流程图；图3为TTP、Tmax、CBF、CBV的参数图；图4为TTP参数图生成的3D超像素图像的示意图；图5为单步法分割后的最终结果的示意图；图6为两步法流程图；图7为半暗带分割二值图像；图8为缺血核心区域分割二值图像；图9为两步法缺血区域分割结果的示意图；图10为本发明实施例提供的一种区域分割装置的流程图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。下面以具体地实施例对本发明的技术方案进行详细说明。下面这几个具体的实施例可以相互结合，对于相同或相似的概念或过程可能在某些实施例不再赘述。为解决上述背景技术中所出现的技术问题，例如手动分割技术时间过长、半自动分割技术无法分割缺血区域中缺血核心区域和半暗带、“基于ML和CNN算法自动化分割”技术的图像及数据材料的局限性等；本申请采取单步法和两步法两种技术方案，具体如下：实施例1：本发明提供一种区域分割方法，如图1、2所示其流程图，包括：步骤S110、获取脑组织图像，并提取所述脑组织图像的像素值。在本步骤中，在对缺血区域进行分割之前，需要先进行预处理，即从大脑图像中提取脑组织图像，并保留使用脑组织中的像素值。步骤S120、将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图、峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表。在步骤S120中，首先，获取入院时的CTP数据集、脑血容量参数图、峰值时间参数图和达峰时间参数图)，以及脑部MIP映射图和NIHSS评分量表，其中脑血流量CBF，代表在单位时间内流经一定量脑组织血管结构的血容量，其值越小，脑组织血流量越低；脑血容量CBV反映脑血容量的状态；达峰时间TTP是指对比剂至脑内兴奋区达到峰值的时间，其值越大意味着对比剂团峰达到脑组织的时间越晚。然后将其中的参数图CBF、CBV、TTP和Tmax映射到提取的脑组织的像素值作为输入特征，每个输入特征都与输入特征图像右侧相应颜色条进行映射，并转换为区间内的值。其中“0”对应输入特征图像右侧颜色条中的底部值，而“1”对应输入特征图像右侧颜色条中的顶部值。通过转换为区间内的值减少了每个输入特征为一个单一的值，而不是保持三个颜色通道。。步骤S130、使用超像素分割技术，生成映射后的每个参数图的超像素图像。在该步骤中，超像素分割技术是指使用简单线性迭代聚类利用每个断层扫描图像切片间的邻近性和相似性聚类堆叠以获取生成CBF、CBV、TTP和Tmax每个参数图的3D超像素版本图像。并将这些超像素版本图像作为额外的特征输入到机器学习算法中。这些额外的特征有助于机器学习的算法考虑沿第三维的相邻像素。SLIC利用像素在图像平面上的相邻性和相似性聚类产生超像素区域。。步骤S140、通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵。在步骤S140中，其中，n代表脑血流量参考图、脑血容量参考图、峰值时间参考图和达峰时间参考图中的任意一种，Xn代表脑血流量特征向量、脑血容量特征向量、峰值时间特征向量和达峰时间特征向量中的任意一种，BT代表脑组织的像素值，stack代表堆栈函数。通过上述公式，利用stack函数将每个参考图中的所有像素值连接成一个特征向量，例如：其中，上述XCBV、XCBF XTTP和XTMax均是大小为L的向量；根据上述公式，构建脑部MIP映射图的特征向量，即：同时，将定义为长度为L的全1向量，则XNIHSS定义为XNIHSS＝NIHSS·；最后所有输入特征的参数映射的总和构成第一特征矩阵Z。矩阵Z＝。步骤S150、通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵。在步骤S150中，和上述步骤S140同理，参数图映射的超像素版本图像的特征向量为：在得到XCBV S、XCBF S、XTTPS和XT S，将所有参数图映射的超像素版本图像的额外输入特征的总数定义为第二特征矩阵ZSLIC，定义为ZSLIC＝。步骤S160、将所述第一特征矩阵和第二特征矩阵组合得到总矩阵。步骤S170、根据所述总矩阵，通过机器学习算法并经过3D模型过滤器分割半暗带和缺血核心区域。在步骤S160-S170中，第一特征矩阵Z和第二特征矩阵ZSLIC根据机器学习算法组合得到总矩阵ZTotal＝；将组合得到的总矩阵ZTotal输入至机器学习算法，并经过3D模式过滤器分割半暗带和缺血核心区域。其中决策树学习算法是一种有效的分类计数，它通过计算独立特征与目标之间的关系来生成树状结构，它包括二进制和多类分类；随机森林算法是一种监督学习算法，“森林”是由决策树的集合组成。设L为BT中的像素数。在机器学习阶段，这些机器学习方法的输入特征的总和被定义为一个矩阵。本发明采取全自动算法分割半暗带和缺血核心区域，相比传统的分割技术，分割更加精细化，也大大缩短了分割时间，提升了分割效率；也不会出现因为图像及材料的局限性导致无法准确对半暗带和缺血核心区域进行分割的情况。实施例2：本发明的实施例还提供另一种区域分割方法，如图6所示，包括：步骤1：步骤S1.1，获取脑组织图像，并提取所述脑组织图像的像素值；该步骤与步骤S110相同，在此不作赘述。步骤S1.2，将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表；在步骤S1.2中，将数据集中的峰值时间TTP参考图、达峰时间Tmax参考图映射到提取的脑组织的像素值作为输入特征，具体映射过程与步骤S120相同，在此不作赘述。步骤S1.3，使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括峰值时间超像素图像、达峰时间超像素图像；在步骤S1.3中，超像素分割技术是指使用简单线性迭代聚类利用每个断层扫描图像切片间的邻近性和相似性聚类堆叠以获取生成TTP和Tmax每个参数图的3D超像素版本图像。步骤S1.4，通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；在步骤S1.4中，通过上述S140中的公式，利用stack函数将TTP和Tmax每个参考图中的所有像素值连接成一个特征向量，例如：其中，上述XTTP和XTMax均是大小为L的向量；根据上述公式，构建脑部MIP映射图的特征向量，即：同时，将定义为长度为L的全1向量，则XNIHSS定义为XNIHSS＝NIHSS·；最后所有输入特征的参数映射的总和构成第一特征矩阵Z。矩阵Z＝步骤S1.5，通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；在步骤S1.5中，和上述步骤S1.4同理，参数图映射的超像素版本图像的特征向量为：在得到XTTPS和XT S，将所有参数图映射的超像素版本图像的额外输入特征的总数定义为第二特征矩阵ZSLIC，定义为ZSLIC＝。步骤S1.6，将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；步骤S1.7，根据所述总矩阵，通过SVM算法对半暗带进行分割，输出半暗带的二值图像；在步骤S1.6-S1.7中，将TTP、Tmax、MIP和NIHSS的特征向量的参数映射矩阵与该输入特征经SLIC算法生成的超像素版本图像矩阵的矩阵总和ZTotal＝输入至SVM算法，对半暗带进行预测，并输出显示所预测的半暗带二值图像。步骤2：步骤S2.1，获取脑组织图像，并提取所述脑组织图像的像素值；该步骤与步骤S110相同，在此不作赘述。步骤S2.2，将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图；在步骤S2.2中，将数据集中的脑血流量CBF参考图、脑血容量CBV参考图映射到提取的脑组织的像素值作为输入特征，具体映射过程与步骤S120相同，在此不作赘述。步骤S2.3，使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括脑血流量超像素图像、脑血容量超像素图像；在步骤S2.3中，超像素分割技术是指使用简单线性迭代聚类利用每个断层扫描图像切片间的邻近性和相似性聚类堆叠以获取生成CBV和CBF每个参数图的3D超像素版本图像。步骤S2.4，通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量的总和定义为第一特征矩阵；在步骤S2.4中，通过上述S140中的公式，利用stack函数将CBV和CBF每个参考图中的所有像素值连接成一个特征向量，例如：其中，上述XCBV和XCBF均是大小为L的向量；最后所有输入特征的参数映射的总和构成第一特征矩阵Z；矩阵Z＝。步骤S2.5，通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；在步骤S2.5中，和上述步骤S2.4同理，参数图映射的超像素版本图像的特征向量为：在得到XCBV和XCBF，将所有参数图映射的超像素版本图像的额外输入特征的总数定义为第二特征矩阵ZSLIC，定义为ZSLIC＝。步骤S2.6将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；步骤S2.7，根据所述总矩阵，通过SVM算法对缺血核心区域进行分割，输出缺血核心区域的二值图像。在步骤S2.6-S2.7中，将CBV和CBF输入特征的参数映射矩阵与经SLIC算法生成的超像素版本图像矩阵的矩阵总和ZTotal＝输入，经SVM算法，对缺血核心区域进行预测，并输出显示所预测的缺血核心区域的二值图像。。在实施例2中，因为TTP和Tmax常用于检测半暗带，其他参数图用于分割核心区域，因此在两步法中，缺血核心区域和半暗带的二元预测在逻辑上组合在一起，故两个预测中的共同白色区域表示最终结果中的缺血核心区域，如图9所示。技术效果：1)通过全自动算法分割缺血性脑卒中患者的缺血区域，解决了手动分割技术的时间问题，大大缩短了分割时间；同时也解决了半自动化分割技术无法分割缺血区域中缺血核心区域和半暗带的问题；并解决了“基于ML和CNN算法自动化分割”技术的图像及数据材料的局限性。2)本发明分割缺血性脑卒中患者的半暗带和缺血核心区域，对可挽救组织的可以准确可视化，从而达到更好的指导治疗决策。3)本发明不限制患者类型，即疑似脑卒中患者和脑卒中患者均可以使用本发明进行缺血性脑卒中缺血区域的分割。4)本发明既可以通过单步法分割半暗带和缺血核心区域，也可以两步法分割半暗带和缺血核心区域，并未对于检查仪器设备以及图像进行统一要求，而是通过机器学习算法，统一像素，更加智能快捷的完成缺血区域分割问题。5)本发明中对半暗带和缺血核心区域的预测都会通过3D模型过滤器，该步骤有助于减少减少不必要的噪声影响，并且还允许来自机器学习算法的预测依赖于第三维度上的相邻体素。实施例3：本发明的实施例提供了一种区域分割装置，如图10所示，包括：脑组织获取模块，用于获取脑组织图像，并提取所述脑组织图像的像素值；映射模块，用于将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图、峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表；超像素图像生成模块，用于使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括脑血流量超像素图像、脑血容量超像素图像、峰值时间超像素图像和达峰时间超像素图像；第一特征矩阵生成模块，用于通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；第二特征矩阵生成模块，用于通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；总矩阵生成模块，用于将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；分割模块，用于根据所述总矩阵，通过机器学习算法并经过3D模型过滤器分割半暗带和缺血核心区域。实施例4：本发明的实施例还提供了另一种区域分割装置，所述装置包括半暗带分割子装置和缺血核心区域分割子装置，所述半暗带分割子装置，包括：脑组织获取模块，用于获取脑组织图像，并提取所述脑组织图像的像素值；映射模块，用于将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括峰值时间参考图、达峰时间参考图、脑部MIP映射图和NIHSS评分量表；超像素图像生成模块，用于使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括峰值时间超像素图像、达峰时间超像素图像；第一特征矩阵生成模块，用于通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量，NIHSS评分特征向量和脑部MIP映射图的特征向量的总和定义为第一特征矩阵；第二特征矩阵生成模块，用于通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；总矩阵生成模块，用于将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；半暗带分割模块，用于根据所述总矩阵，通过SVM算法对半暗带进行分割，输出半暗带的二值图像；所述缺血核心区域分割子装置，包括：脑组织获取模块，用于获取脑组织图像，并提取所述脑组织图像的像素值；映射模块，用于将CT引导下的灌注扫描数据集中的参数图分别与脑组织图像的像素值进行参数映射，所述数据集包括脑血流量参考图、脑血容量参考图；超像素图像生成模块，用于使用超像素分割技术，生成映射后的每个参数图的超像素图像，包括脑血流量超像素图像、脑血容量超像素图像；第一特征矩阵生成模块，用于通过堆栈函数将映射后的每个参考图中的所有像素值连接成一个特征向量，将所有参考图的特征向量的总和定义为第一特征矩阵；第二特征矩阵生成模块，用于通过堆栈函数将每个超像素图像中的所有像素值连接成一个特征向量，将所有超像素图像的特征向量的总和定义为第二特征矩阵；总矩阵生成模块，用于将所述第一特征矩阵和第二特征矩阵组合得到总矩阵；缺血核心区域分割模块，用于根据所述总矩阵，通过SVM算法对缺血核心区域进行分割，输出缺血核心区域的二值图像。其中，可读存储介质可以是计算机存储介质，也可以是通信介质。通信介质包括便于从一个地方向另一个地方传送计算机程序的任何介质。计算机存储介质可以是通用或专用计算机能够存取的任何可用介质。例如，可读存储介质耦合至处理器，从而使处理器能够从该可读存储介质读取信息，且可向该可读存储介质写入信息。当然，可读存储介质也可以是处理器的组成部分。处理器和可读存储介质可以位于专用集成电路中。另外，该ASIC可以位于用户设备中。当然，处理器和可读存储介质也可以作为分立组件存在于通信设备中。可读存储介质可以是只读存储器、随机存取存储器、CD-ROM、磁带、软盘和光数据存储设备等。本发明还提供一种程序产品，该程序产品包括执行指令，该执行指令存储在可读存储介质中。设备的至少一个处理器可以从可读存储介质读取该执行指令，至少一个处理器执行该执行指令使得设备实施上述的各种实施方式提供的方法。在上述终端或者服务器的实施例中，应理解，处理器可以是中央处理单元，还可以是其他通用处理器、数字信号处理器等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等。结合本发明所公开的方法的步骤可以直接体现为硬件处理器执行完成，或者用处理器中的硬件及软件模块组合执行完成。最后应说明的是：以上各实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述各实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分或者全部技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的范围。
