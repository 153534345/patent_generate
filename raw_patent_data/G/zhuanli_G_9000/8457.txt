标题title
一种基于图形识别的电子印章矢量图识别方法
摘要abst
本发明涉及数据处理技术领域，具体涉及一种基于图形识别的电子印章矢量图识别方法，该方法包括：对电子印章位图进行边缘识别，得到边缘图像；获取边缘图像中的闭合边缘，对闭合边缘进行边缘片段分割，基于边缘片段线条形态的表征数值，获取各闭合边缘的表征数值序列；对于任意两个闭合边缘，对其表征数值序列进行周期延拓，得到任意两个闭合边缘的周期序列；对任意两个闭合边缘的周期序列进行滑窗，得到若干共有子序列组合；对于任意两个闭合边缘，选择其对应的任意一个共有子序列组合，所选共有子序列组合构成组合集合，得到若干个组合集合；基于最优组合集合识别得到电子印章的矢量图。可在电子印章图像边缘较复杂时保证矢量图的准确度。
权利要求书clms
1.一种基于图形识别的电子印章矢量图识别方法，其特征在于，该方法包括：获取电子印章位图，对所述电子印章位图进行边缘识别，得到边缘图像；获取所述边缘图像中的闭合边缘，对闭合边缘进行边缘片段分割，获取边缘片段线条形态的表征数值，基于所述边缘片段线条形态的表征数值，获取各闭合边缘的表征数值序列；对于任意两个闭合边缘，基于其表征数值序列长度的最小公倍数，对所述任意两个闭合边缘的表征数值序列进行周期延拓，得到所述任意两个闭合边缘的周期序列；对所述任意两个闭合边缘的周期序列进行滑窗，得到若干共有子序列组合；其中，位于一个窗口内的所述任意两个闭合边缘的周期序列共有的表征数值子序列，构成一个共有子序列组合；对于任意两个闭合边缘，选择其对应的任意一个共有子序列组合，所选共有子序列组合构成组合集合，得到若干个组合集合；计算各组合集合的优选度，基于所述优选度确定最优组合集合；基于所述最优组合集合识别得到电子印章的矢量图。2.如权利要求1所述的方法，其特征在于，所述组合集合的优选度的获取具体为：闭合边缘为节点，任意两个节点相连，构成无向图；根据节点对应闭合边缘的像素点个数和边缘片段个数计算节点值；基于组合集合，获取两个节点对应闭合边缘的共有子序列组合，根据获取的共有子序列组合中各表征数值子序列的复现次数和，以及共有子序列组合中表征数值子序列覆盖两个节点对应闭合边缘的表征数值序列的覆盖比，计算节点连接边的权值；节点连接边的权值与节点连接边对应两节点的节点值均值的乘积和，为所述组合集合的优选度。3.如权利要求2所述的方法，其特征在于，设置所述像素点个数和所述边缘片段个数的权值，节点对应闭合边缘的像素点个数和边缘片段个数加权求和，得到节点值。4.如权利要求3所述的方法，其特征在于，设置所述复现次数和以及所述覆盖比的权值，所述复现次数和以及所述覆盖比加权求和，得到节点连接边的权值。5.如权利要求4所述的方法，其特征在于，对闭合边缘进行边缘片段分割，具体为：闭合边缘上的每个边缘像素依次为待标记像素，待标记像素一侧的邻域边缘像素指向待标记像素的方向为第一方向，待标记像素指向另一侧邻域边缘像素的方向为第二方向，根据第一方向旋转至第二方向的旋转方向和旋转角度，对待标记像素进行标记；在标记发生变化的位置对闭合边缘进行边缘片段分割。6.如权利要求5所述的方法，其特征在于，所述线条形态包括直线和曲线，直线的表征数值为第一数值，曲线的表征数值为第二数值。
说明书desc
技术领域本发明涉及数据处理领域，具体涉及一种基于图形识别的电子印章矢量图识别方法。背景技术计算机图形一般分为两大类，一种为矢量图，一种为位图。位图即是由像素块组成的，可以用矩阵表示的计算机图形，而矢量图是使用直线和曲线来描述图形的，这些图形的组成基元是一些直线、曲线、多边形，弧线组成，他们都是通过数学计算获得，也因此，矢量图像文件一般体积较小，存储方式可看为一些含有参数的数学公式，且其最大的优点是图像无论放大、缩小还是旋转拉伸均不会失真，而矢量图也正是由于这个特性被广泛应用在电子印章的制作中。将扫描获得的印章位图转化为矢量图，使其具有矢量图不会失真的特性，保证电子印章的清晰度。现有的矢量图识别方法一般利用边缘识别算法获得电子印章位图边缘信息以及边缘的颜色信息，利用曲线拟合获取的边缘，并在封闭边缘中填充颜色，以各个曲线的参数信息以及对应的颜色信息来存储或表示图像。因此，曲线拟合边缘信息的准确性以及曲线参数的数量决定了矢量图识别结果的准确性以及存储量。而现有的矢量图识别方法在检测印章图像的边缘时一般会调用已知文字、图形等基元的数据库进行直接拟合，这种办法依赖数据库与实际图像的适配性，即当印章图像的边缘信息过于复杂时，无法进行有效的参数适配，进而降低准确性。而当降低图像基元的复杂程度如仅利用直线、曲线等基本图像组成元素，去提高拟合后边缘的参数准确性时又往往由于基元数目过多而大大提升了参数的数目，加大了参数的存储量。因此对于复杂电子印章的矢量图识别过程，迫切需要一种可根据不同电子印章的边缘形态特性来选择最优的图像基元组合以同时保证矢量图识别的准确性和体量特征。发明内容为了解决上述技术问题，本发明的目的在于提供一种基于图形识别的电子印章矢量图识别方法，所采用的技术方案具体如下：本发明一个实施例提供了一种基于图形识别的电子印章矢量图识别方法，该方法包括以下具体步骤：获取电子印章位图，对所述电子印章位图进行边缘识别，得到边缘图像；获取所述边缘图像中的闭合边缘，对闭合边缘进行边缘片段分割，获取边缘片段线条形态的表征数值，基于所述边缘片段线条形态的表征数值，获取各闭合边缘的表征数值序列；对于任意两个闭合边缘，基于其表征数值序列长度的最小公倍数，对所述任意两个闭合边缘的表征数值序列进行周期延拓，得到所述任意两个闭合边缘的周期序列；对所述任意两个闭合边缘的周期序列进行滑窗，得到若干共有子序列组合；其中，位于一个窗口内的所述任意两个闭合边缘的周期序列共有的表征数值子序列，构成一个共有子序列组合；对于任意两个闭合边缘，选择其对应的任意一个共有子序列组合，所选共有子序列组合构成组合集合，得到若干个组合集合；计算各组合集合的优选度，基于所述优选度确定最优组合集合；基于所述最优组合集合识别得到电子印章的矢量图。进一步地，所述组合集合的优选度的获取具体为：闭合边缘为节点，任意两个节点相连，构成无向图；根据节点对应闭合边缘的像素点个数和边缘片段个数计算节点值；基于组合集合，获取两个节点对应闭合边缘的共有子序列组合，根据获取的共有子序列组合中各表征数值子序列的复现次数和，以及共有子序列组合中表征数值子序列覆盖两个节点对应闭合边缘的表征数值序列的覆盖比，计算节点连接边的权值；节点连接边的权值与节点连接边对应两节点的节点值均值的乘积和，为所述组合集合的优选度。进一步地，设置所述像素点个数和所述边缘片段个数的权值，节点对应闭合边缘的像素点个数和边缘片段个数加权求和，得到节点值。进一步地，设置所述复现次数和以及所述覆盖比的权值，所述复现次数和以及所述覆盖比加权求和，得到节点连接边的权值。进一步地，对闭合边缘进行边缘片段分割，具体为：闭合边缘上的每个边缘像素依次为待标记像素，待标记像素一侧的邻域边缘像素指向待标记像素的方向为第一方向，待标记像素指向另一侧邻域边缘像素的方向为第二方向，根据第一方向旋转至第二方向的旋转方向和旋转角度，对待标记像素进行标记；在标记发生变化的位置对闭合边缘进行边缘片段分割。进一步地，所述线条形态包括直线和曲线，直线的表征数值为第一数值，曲线的表征数值为第二数值。本发明实施例至少具有如下有益效果：本发明可在电子印章图像边缘较复杂时保证矢量图的准确度。此外，还可根据对矢量化速度和存储体量的要求，调整所述像素点个数和所述边缘片段个数的权值，进而得到对应的最优组合集合，获取电子印章的矢量图。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明方法实施例的步骤流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种基于图形识别的电子印章矢量图识别方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构、或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种基于图形识别的电子印章矢量图识别方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种基于图形识别的电子印章矢量图识别方法的步骤流程图，该方法包括以下步骤：获取电子印章位图，对所述电子印章位图进行边缘识别，得到边缘图像；获取所述边缘图像中的闭合边缘，对闭合边缘进行边缘片段分割，获取边缘片段线条形态的表征数值，基于所述边缘片段线条形态的表征数值，获取各闭合边缘的表征数值序列；对于任意两个闭合边缘，基于其表征数值序列长度的最小公倍数，对所述任意两个闭合边缘的表征数值序列进行周期延拓，得到所述任意两个闭合边缘的周期序列；对所述任意两个闭合边缘的周期序列进行滑窗，得到若干共有子序列组合；其中，位于一个窗口内的所述任意两个闭合边缘的周期序列共有的表征数值子序列，构成一个共有子序列组合；对于任意两个闭合边缘，选择其对应的任意一个共有子序列组合，所选共有子序列组合构成组合集合，得到若干个组合集合；计算各组合集合的优选度，基于所述优选度确定最优组合集合；基于所述最优组合集合识别得到电子印章的矢量图。下面对上述步骤进行具体展开：步骤一，获取电子印章位图，对所述电子印章位图进行边缘识别，得到边缘图像。获取电子印章位图，对电子印章位图进行边缘识别，确定边缘两侧像素填充值。由于电子印章大多数为二值图，因此仅需要标记边缘两侧具体为哪种填充值即可。优选地，实施例中基于sobel算子对电子印章位图进行边缘识别。步骤二，获取所述边缘图像中的闭合边缘，对闭合边缘进行边缘片段分割，获取边缘片段线条形态的表征数值，基于所述边缘片段线条形态的表征数值，获取各闭合边缘的表征数值序列。获取所述边缘图像中的闭合边缘。边缘图像上每一个边缘像素分别作为种子点，搜寻其邻域内的边缘像素，若搜寻到则将两个边缘像素并为一个实例，以此进行下去会将构成一闭合边缘的所有边缘像素归为同一个实例。基于此，可得到边缘图像中的若干个闭合边缘。对闭合边缘进行边缘片段分割：闭合边缘上的每个边缘像素依次为待标记像素，待标记像素一侧的邻域边缘像素指向待标记像素的方向为第一方向，待标记像素指向另一侧邻域边缘像素的方向为第二方向，根据第一方向旋转至第二方向的旋转方向和旋转角度，对待标记像素进行标记；在标记发生变化的位置对闭合边缘进行边缘片段分割。选择闭合边缘上的一个边缘像素作为待标记像素，记为，选择其邻域内的位于一侧的边缘像素记为，指向的方向为第一方向，之后选择其邻域内的位于另一侧的边缘像素记为，只有一个，另一个邻域内的边缘像素为已经被选择的，指向的方向为第二方向，根据第一方向旋转至第二方向的旋转方向和旋转角度，对待标记像素进行标记。作为一个示例，对待标记像素进行标记具体为：若将第一方向顺时针旋转且旋转角度小于180度即可得到第二方向，则的标记值为第一标记值，若将第一方向逆时针旋转且旋转角度小于180度即可得到第二方向，则的标记值为第二标记值，若第一方向和第二方向相同，则的标记值为第三标记值。作为一个示例，对待标记像素进行标记具体为：若将第一方向逆时针旋转且旋转角度小于180度即可得到第二方向，则的标记值为第一标记值，若将第一方向顺时针旋转且旋转角度小于180度即可得到第二方向，则的标记值为第二标记值，若第一方向和第二方向相同，则的标记值为第三标记值。具体的标记方式可由实施者自行确定，只需让直线像素和曲线像素的标记值不同、凹曲线像素和凸曲线像素的标记值不同即可。对闭合边缘上的边缘像素完成标记后，获取标记发生变化的位置，对于每个标记发生变化的位置，该位置处对应的两个标记不同的边缘像素连线的中点为分割点；基于若干个分割点对闭合边缘进行边缘片段分割。获取边缘片段线条形态的表征数值。所述线条形态包括直线和曲线，直线的表征数值为第一数值，曲线的表征数值为第二数值。作为一个示例，第一数值为0，第二数值为1。一个实施方式中，将边缘片段输入线条形态识别网络中，获取边缘片段的形态。另一个实施方式中，计算边缘片段上所有边缘像素对应的第一方向旋转至第二方向的旋转角的偏移性，具体方式为：将所有累加，对应对待标记像素进行标记的第一个实施方式，顺时针的记为正，逆时针的记为负，若累加结果小于45度则边缘片段的线条形态为直线，表征数值为第一数值，大于45度则边缘片段的线条形态为曲线，表征数值为第二数值。基于所述边缘片段线条形态的表征数值，获取各闭合边缘的表征数值序列。对于一个闭合边缘，选择其上一个线条形态为曲线的边缘片段作为起始边缘片段，以顺时针方向获取各边缘片段的表征数值，得到闭合边缘的表征数值序列。其中，闭合边缘的表征数值序列为0或1组成的序列。步骤三，对于任意两个闭合边缘，基于其表征数值序列长度的最小公倍数，对所述任意两个闭合边缘的表征数值序列进行周期延拓，得到所述任意两个闭合边缘的周期序列；对所述任意两个闭合边缘的周期序列进行滑窗，得到若干共有子序列组合；其中，位于一个窗口内的所述任意两个闭合边缘的周期序列共有的表征数值子序列，构成一个共有子序列组合。对于任意两个闭合边缘，基于其表征数值序列长度的最小公倍数，对所述任意两个闭合边缘的表征数值序列进行周期延拓，得到所述任意两个闭合边缘的周期序列。例如，闭合边缘A的表征数值序列为：11100010100，闭合边缘B的表征数值序列为：1111001010，将两个表征数值序列按位对齐并按周期延长即进行周期延拓，得到所述任意两个闭合边缘的周期序列；具体地，闭合边缘A的表征数值序列的长度为11，闭合边缘B的表征数值序列为10，最小公倍数为110，则当两个序列的长度延长为110位时，两个周期序列的头尾就完全对齐，后续再延长没有意义。对所述任意两个闭合边缘的周期序列进行滑窗，得到若干共有子序列组合；其中，位于一个窗口内的所述任意两个闭合边缘的周期序列共有的表征数值子序列，构成一个共有子序列组合。设置窗口长度，具体地，窗口长度为任意两个闭合边缘对应的两个表征数值序列长度的较小值，以上述闭合边缘A和闭合边缘B为例，窗口长度为10，对所述任意两个闭合边缘的周期序列进行滑窗，滑窗中的表征数值按位相减，则相减结果为0或1或-1，得到相减结果序列，相减结果序列中所有连续为0且不相邻的部分为表征数值子序列，基于一个窗口得到的表征数值子序列构成一个共有子序列组合；例如一个窗口内，闭合边缘A和闭合边缘B对应的一个共有子序列组合中的表征数值子序列为111、001010。其中，表征数值子序列的长度大于等于2。对所述任意两个闭合边缘的周期序列进行滑窗得到多个窗口，相应的，得到多个共有子序列组合。至此，得到任意两个闭合边缘对应的若干共有子序列组合。步骤四，对于任意两个闭合边缘，选择其对应的任意一个共有子序列组合，所选共有子序列组合构成组合集合，得到若干个组合集合；计算各组合集合的优选度，基于所述优选度确定最优组合集合；基于所述最优组合集合识别得到电子印章的矢量图。对于任意两个闭合边缘，选择其对应的任意一个共有子序列组合，所选共有子序列组合构成组合集合，得到若干个组合集合。对于任意两个闭合边缘，其对应有若干个共有子序列组合，选择其中任意一个共有子序列组合，则基于所有闭合边缘，可得到一个组合集合；任意两个闭合边缘对应的共有子序列组合的选择不同，则得到的组合集合不同，进而得到若干个组合集合。计算各组合集合的优选度。闭合边缘为节点，任意两个节点相连，构成无向图；根据节点对应闭合边缘的像素点个数和边缘片段个数计算节点值；基于组合集合，获取两个节点对应闭合边缘的共有子序列组合，根据获取的共有子序列组合中各表征数值子序列的复现次数和，以及共有子序列组合中表征数值子序列覆盖两个节点对应闭合边缘的表征数值序列的覆盖比，计算节点连接边的权值；节点连接边的权值与节点连接边对应两节点的节点值均值的乘积和，为所述组合集合的优选度。一个实施方式中，根据节点对应闭合边缘的像素点个数和边缘片段个数计算节点值，具体为：节点对应闭合边缘的像素点个数和边缘片段个数的和为节点值。另一个实施方式中，根据节点对应闭合边缘的像素点个数和边缘片段个数计算节点值，具体为：设置所述像素点个数和所述边缘片段个数的权值，节点对应闭合边缘的像素点个数和边缘片段个数加权求和，得到节点值。其中，两个权值的和为1。设置权值的原因为：当关注算法速度时，闭合边缘的像素点个数越多，对拟合结果的精确性要求就越高，即闭合边缘的像素点个数才是影响算法速度的因素；当关注存储体量时，闭合边缘的边缘片段越多，需要存储的参数量就越多，也就是说影响存储体量的因素主要是边缘片段的个数。一个实施方式中，节点连接边的权值的计算具体为：基于组合集合，获取两个节点对应闭合边缘的共有子序列组合，根据获取的共有子序列组合中各表征数值子序列的复现次数和，以及共有子序列组合中表征数值子序列覆盖两个节点对应闭合边缘的表征数值序列的覆盖比，计算节点连接边的权值，具体地，所述复现次数和以及所述覆盖比的和为节点连接边的权值。另一个实施方式中，节点连接边的权值的计算具体为：设置所述复现次数和以及所述覆盖比的权值，所述复现次数和以及所述覆盖比加权求和，得到节点连接边的权值。其中，两个权值的和为1。设置权值的原因为：所述复现次数越多，算法拟合越快，对提高计算速度越有利；以及共有子序列组合能覆盖表征数值序列的覆盖比，覆盖比越大，说明节约的存储资源越多，对减小存储体量有好处。一个实施方式中，共有子序列组合中表征数值子序列覆盖两个节点对应闭合边缘的表征数值序列的覆盖比的获取具体为：共有子序列组合中表征数值子序列的长度的两倍比上两个节点对应的两个闭合边缘的表征数值序列的长度和为所述覆盖比。需要说明，节点值和节点间边权值需要进行归一化处理。基于所述优选度确定最优组合集合；基于所述最优组合集合识别得到电子印章的矢量图。每个组合集合对应有一个优选度，优选度最大值对应的组合集合为最优组合集合。基于所述最优组合集合识别得到电子印章的矢量图，最优组合集合中的表征数值子序列作为矢量化的图像基元，识别得到电子印章的矢量图；具体地矢量化的过程本发明不再描述。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。且上述对本说明书特定实施例进行了描述。其它实施例在所附权利要求书的范围内。在一些情况下，在权利要求书中记载的动作或步骤可以按照不同于实施例中的顺序来执行并且仍然可以实现期望的结果。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
