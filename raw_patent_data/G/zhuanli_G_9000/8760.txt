标题title
一种打印定制标签的方法、装置和存储介质
摘要abst
本发明提供了一种打印定制标签的方法，包括：获得第一标签模板；导出与第一标签对应的第一指令文本；根据预先设定的打印字段与字段符号之间的对应关系，生成与第一指令文本对应的第二指令文本，并将第二指令文本保存为标签模板配置文件，其中第二指令文本是通过将第一指令文本中的打印字段的数据值替换成对应的字段符号来获得的；响应打印指令，读取标签模板配置文件及预先存储的与标签模板配置文件中的字段符号对应的数据值，并用数据值替换标签模板配置文件中对应的字段符号，获得第三指令文本；将第三指令文本传输给条码打印机进行打印。利用上述技术方案，缩短开发定制标签的周期，实现高效便捷的定制标签打印。
权利要求书clms
1.一种打印定制标签的方法，用于使用条码打印机来打印定制标签，其特征在于，包括如下步骤：获得第一标签模板；导出与所述第一标签模板对应的打印机第一指令文本；根据预先设定的打印字段与字段符号之间的对应关系，生成与所述第一指令文本对应的打印机第二指令文本，并将所述第二指令文本保存为标签模板配置文件，其中所述第二指令文本是通过将所述第一指令文本中的一个或多个打印字段的数据值替换成相对应的一个或多个字段符号来获得的；响应打印指令，读取所述标签模板配置文件及预先存储的与所述标签模板配置文件中的所述一个或多个字段符号对应的数据值，并用所述数据值替换所述标签模板配置文件中对应的所述一个或多个字段符号，获得打印机第三指令文本；将所述第三指令文本传输给所述条码打印机进行打印。2.根据权利要求1所述的方法，其特征在于，所述第一标签模板是使用与所述条码打印机对应的设计工具所制作的。3.根据权利要求1所述的方法，其特征在于，响应用户的输入生成与所述第一指令文本对应的所述第二指令文本。4.根据权利要求1所述的方法，其特征在于，在将所述第二指令文本保存为标签模板配置文件步骤之后，还包括将与所述标签模板配置文件对应的第二标签模板加入至标签模板列表，并生成更新的标签模板列表。5.根据权利要求4所述的方法，其特征在于，还包括：根据所述标签模板配置文件，识别所述更新的标签模板列表中与所述标签模板配置文件对应的第二标签模板，并展示所述第二标签模板的步骤。6.根据权利要求5所述的方法，其特征在于，在展示所述第二标签模板之后，还包括用户选择所述第二标签模板，使所述第二标签模板生效的步骤。7.根据权利要求1所述的方法，其特征在于，通过手动方式或可执行代码的方式将所述第一指令文本中的一个或多个打印字段的数据值替换成相对应的一个或多个字段符号来获得所述第二指令文本。8.根据权利要求1所述的方法，其特征在于，通过USB通信模块、蓝牙、WiFi、或Zigbee将所述第三指令文本传输给所述条码打印机进行打印。9.一种打印定制标签的装置，其特征在于，包括存储器和处理器，所述存储器存储有至少一段程序，所述至少一段程序由所述处理器执行以实现如权利要求1至8任一所述的打印定制标签的方法。10.一种计算机可读存储介质，其特征在于，所述存储介质中存储有至少一段程序，所述至少一段程序由所述处理器执行以实现如权利要求1至8任一所述的打印定制标签的方法。
说明书desc
技术领域本发明涉及定制标签打印领域，特别是涉及一种打印定制标签的方法、装置和存储介质。背景技术随着电子计算机以及网络技术的快速发展，计算机、手机等智能电子设备遍及各行各业，成为个人工作生活中必不可少的重要工具，其所产生的电子数据在取证分析行业的作用也日益突显。因此，在电子取证实验室中，引入电子数据取证实验室智能管理系统，对于电子数据检材进行标准化管理、鉴定流程进行规范化管理、保障电子数据的司法有效性和可溯源性而言十分必要且意义重大。通过条码打印机，将电子数据检材编号二维码、名称、校验值等关键信息，打印到标签，并贴附于检材表面，配合电子数据取证实验室智能管理系统，可对检材的整个登记、鉴定、流转过程进行标准化、合规化的跟踪管理。因此，电子数据检材的编码标签化是电子数据取证实验室不可或缺的环节。各地电子数据取证实验室的规范要求不尽相同，对条码打印机标签样式的定制化需求强烈。目前，多数管理系统是通过集成条码打印机厂商配套的SDK联动条码打印机来实现标签打印的。条码打印机内置有标签样式模板，供用户选择打印。标签样式模板的定义实现，通常是通过打印机的SDK API接口耦合管理系统中的相应代码来实现的，即每次定制打印都需要管理系统修改代码。图1给出了现有技术的利用SDK API方式配置标签模板的示例性代码。由图1中的代码可知，由于每次打印定制条码标签时都需要调用SDK API接口来制成定制的，而且定制过程严重依赖管理系统版本的迭代、打印设备适配性差、设备更新换代困难等诸多难题。发明内容为解决上述技术问题，本发明的实施例提供了一种打印定制标签的方法、装置及存储介质。一方面，提供了一种打印定制标签的方法，包括如下步骤：获得第一标签模板；导出与所述第一标签模板对应的打印机第一指令文本；根据预先设定的打印字段与字段符号之间的对应关系，生成与所述第一指令文本对应的打印机第二指令文本，并将所述第二指令文本保存为标签模板配置文件，其中所述第二指令文本是通过将所述第一指令文本中的一个或多个打印字段替换成相对应的一个或多个字段符号来获得的；响应打印指令，读取所述标签模板配置文件及预先存储的与所述标签模板配置文件中的所述一个或多个字段符号对应的数据值，并用所述数据值替换所述标签模板配置文件中对应的所述一个或多个字段符号，获得打印机第三指令文本；将所述第三指令文本传输给所述条码打印机进行打印。进一步地，所述的方法，其中，所述第一标签模板是使用与所述条码打印机对应的设计工具所制作的。进一步地，所述的方法，其中，响应用户的输入生成与所述第一指令文本对应的所述第二指令文本。进一步地，所述的方法，其中，在将所述第二指令文本保存为标签模板配置文件步骤之后，还包括将与所述标签模板配置文件对应的第二标签模板加入至标签模板列表，并生成更新的标签模板列表。进一步地，所述的方法，其中，还包括：根据所述标签模板配置文件，识别所述更新的标签模板列表中与所述标签模板配置文件对应的第二标签模板，并展示所述第二标签模板的步骤。进一步地，所述的方法，其中，在展示所述第二标签模板之后，还包括用户选择所述第二标签模板，使所述第二标签模板生效的步骤。进一步地，所述的方法，其中，通过手动方式或可执行代码的方式将所述第一指令文本中的一个或多个打印字段的数据值替换成相对应的一个或多个字段符号来获得所述第二指令文本。进一步地，所述的方法，其中，所述条码打印机为斑马条码打印机；所述第一指令文本、所述第二指令文本及所述第三指令文本为所述斑马条码打印机的ZPL指令集。进一步地，所述的方法，其中，通过USB通信模块、蓝牙、WiFi、或Zigbee将所述第三指令文本传输给所述条码打印机进行打印。另一方面，提供了一种打印定制标签的装置，其中，包括存储器和处理器，所述存储器存储有至少一段程序，所述至少一段程序由所述处理器执行以实现如所述的打印定制标签的方法。又一方面，提供了一种计算机可读存储介质，其中，所述存储介质中存储有至少一段程序，所述至少一段程序由所述处理器执行以实现如所述的打印定制标签的方法。上述技术方案具有如下技术效果：本发明实施例的打印定制标签的方法、装置及存储介质基于与条码打印机适配的指令集，实现了标签样式模板的可配置化，可以灵活且快速地实现对定制标签的打印，定制开发周期短，满足了用户快速打印定制的标签样式的需求；实现了标签样式的实现与系统代码的解耦，新增和修改标签样式模板无需触发管理系统代码的修改，也不需要更新管理系统的版本，不依赖于具体设备的SDK API；且打印设备适配性好，对于使用同一指令集的打印机，即使打印设备更新换代，也可以直接使用定制标签时生成的标签模板配置文件直接打印，而无需如现有技术中管理系统每一次打印定制标签都要去修改代码看，大大简化了操作，提供了打印定制标签的效率，尤其是在要批量打印同一定制标签时能实现自动批量打印。附图说明图1为现有技术的利用SDK API方式配置标签模板的示例性代码；图2为本发明一实施例的打印定制标签的方法的流程示意图；图3为本发明一实施例的打印定制标签的方法中定制标签模板的配置示意图；图4为使用本发明一实施例的打印定制标签的方法来打印定制标签的管理系统的设计流程示意图；图5为本发明一实施例的方法展示与该新增的标签模板配置文件对应的标签模板的界面示意图；图6为一本发明实施例的打印定制标签的装置的结构示意图。具体实施方式为进一步说明各实施例，本发明提供有附图。这些附图为本发明揭露内容的一部分，其主要用以说明实施例，并可配合说明书的相关描述来解释实施例的运作原理。配合参考这些内容，本领域普通技术人员应能理解其他可能的实施方式以及本发明的优点。图中的组件并未按比例绘制，而类似的组件符号通常用来表示类似的组件。现结合附图和具体实施方式对本发明进一步说明。实施例一：图2为本发明一实施例的打印定制标签的方法的流程示意图。如图2，本发明一实施例的打印定制标签的方法，用于使用条码打印机来打印定制标签，包括如下步骤：步骤S1，获得第一标签模板；步骤S2，导出与第一标签模板对应的打印机第一指令文本；步骤S3，根据预先设定的打印字段与字段符号之间的对应关系，生成与第一指令文本对应的打印机第二指令文本，并将第二指令文本保存为标签模板配置文件，其中第二指令文本是通过将第一指令文本中的一个或多个打印字段替换成相对应的一个或多个字段符号来获得的；步骤S4，响应打印指令，读取标签模板配置文件及预先存储的与标签模板配置文件中的一个或多个字段符号对应的数据值，并用数据值替换标签模板配置文件中对应的一个或多个字段符号，获得打印机第三指令文本；步骤S5，将第三指令文本传输给条码打印机进行打印。该第三指令文本与要打印的定制标签样式对应。通过该步骤，即实现了对定制标签的打印。进一步地，第一标签模板可以使用与条码打印机对应的设计工具来制作。进一步地，响应用户的输入生成与第一指令文本对应的第二指令文本。进一步地，可以通过手动操作来将第一指令文本中的一个或多个打印字段替换成相对应的一个或多个字段符号来获得第二指令文本；也可以通过让客户端运行可执行代码的方式来实现将第一指令文本中的一个或多个打印字段替换成相对应的一个或多个字段符号以获得第二指令文本。进一步地，在将第二指令文本保存为标签模板配置文件步骤之后，还包括将标签模板配置文件加入至标签模板列表，并生成更新的标签模板列表。进一步地，还包括根据标签模板配置文件，识别更新的标签模板列表中与标签配置文件对应的标签模板，并展示与标签配置文件对应的标签模板。进一步地，在展示所述第二标签模板之后，还包括用户选择所述第二标签模板，使所述第二标签模板生效的步骤。进一步地，通过手动方式或可执行代码的方式将所述第一指令文本中的一个或多个打印字段的数据值替换成相对应的一个或多个字段符号来获得所述第二指令文本。示例性地，条码打印机为斑马条码打印机；第一指令文本和第二指令文本为斑马条码打印机使用的斑马编程语言ZPL指令集。在其他实施例中还可以使用其他类型的条码打印机，第一指令文本、第二指令文本和第三指令文本为与所使用的条码打印机对应的指令集。进一步地，可以通过USB通信模块、蓝牙、WiFi、或Zigbee将第三指令文本传输给条码打印机进行打印。具体采用的传输方式可以根据条码打印机所采用的通信方式来确定。图3为本发明一实施例的打印定制标签的方法中定制标签模板的配置示意图。图4为使用本发明一实施例的打印定制标签的方法来打印定制标签的管理系统的设计流程示意图。现在结合图3和图4来说明本发明另一实施例的打印定制标签的方法。在该实施例中，以斑马条纹打印机为例，对应的指令文本的语言为ZPL指令集。ZPL：是一种打印页面描述语言，通过高级命令来描述打印页面，由打印机用低级命令进行解释执行，独立于特定的打印机硬件平台。而斑马公司开发了2个打印页面描述语言标准：ZPL、ZPL II，主要用于制作和打印标签。这2个标准基本覆盖了斑马条码打印机系列产品，并被部分其他条码打印机厂家采用或兼容。图3中的界面301示出了利用标签设计器设计出来的一个示例性的标签。该例中使用的设计器为打印机厂商提供的标签设计软件，这个软件可以根据用户定制要求设计标签样式，并导出ZPL指令文本。该例中，用户该设计软件制作的标签302为用于电子取证实验室的电子检材的标签。该标签302包括二位码图形、文字说明“检材编号：”、表示检材编号实际内容的【检材编号】字段“20181207003-000-001”、标识检材状况的文字说明“待检”、“检中”和“检毕”，以及文字说明“待检”、“检中”和“检毕”前面的三个方框。本发明的实施例中要利用该标签去定制需要的定制标签。在利用本发明实施例的方法打印定制标签之前，需要先根据要使用的打印内容确定打印的范围，并确定打印范围内的打印字段与符号之间的对应关系，将属于打印范围内的字段符号化,以便于统一查找和替换。可以根据用户自身的需求来设置所使用的字段符号。具体的符号形式与打印机指令集的配置相适应。例如，在本例中，可以将字段【检材编号】符号化成【％DevNum％】。示例性地，这个符号化打印范围内字段的步骤可以在管理系统的设计开发阶段进行，如图4所示。如图4所示，在符号化打印范围内字段的步骤之后，进行标签的可配置化操作。这个可配置化操作包括上文提到的使用设计器制作标签模板；导出与制作的标签模板对应的ZPL指令文本，可称为第一指令文本；根据预先确定的字段与符号之间的对应关系，使用符号替换上述获得的ZPL指令文本中的相应字段的数据值，获得修改后的ZPL指令文本，即第二指令文本；将第二指令文本作为标签模板配置文件写入系统，保存起来。系统将该标签模板配置文件作为新增的标签模板加入至标签模板列表，并生成更新的标签模板列表。管理系统可以根据该标签模板配置文件，识别更新的标签模板列表中与该新增的标签模板配置文件对应的标签模板，并将其展示。如图3中的标签304以及图5所示。图5为本发明一实施例的方法展示与该新增的标签模板配置文件对应的标签模板的界面示意图。用户选择该配置的新的标签模板即标签样式模板，使其生效。图3中的界面303为用【％DevNum％】替换字段【检材编号】原来的取值即数据值“20181207003-000-001”得到的对应的ZPL指令文本。在该例中，可以通过用户手动操作，将字段【检材编号】原来的取值即数据值“20181207003-000-001”替换为符号【％DevNum％】。图3中的标签304及图5中的标签即为将字段【检材编号】原来的取值即数据值“20181207003-000-001”替换为符号【％DevNum％】之后，与第二指令文本对应的标签样式。如此就完成了定制标签的配置。重复图3中所示的上述流程即可定制不同的标签样式模板，由此实现了标签样式模板的可配置。定制标签符号化配置完且生效后，可以使用该配置文件进行定制标签的打印了。如图4，在用户使用管理系统打印定制标签的阶段，在用户登录管理系统的客户端后，用户选择先前配置的、要打印的先前经过符号化处理的标签模板即标签样式模板。响应用户的选择，系统读取与所选择的标签模板对应的配置文件并获取该配置文件中相应字段的具体数据值。在此，不对读取配置文件和获取相应字段具体数据值的顺序进行限定。读取配置文件和获取相应字段具体数据值的先后顺序不影响本发明实施例的执行。然后用获取的具体数据值分别去替换该配置文件中相应字段对应的符号，获得与实际要打印的定制标签对应的第三指令文本。这样就实现了用获取的具体数据值填充上述的标签模板，获得了实际要打印的定制标签样式。具体实现时，可以根据实际要打印的定制标签，预先将定制标签中打印字段符号对应的实际数据值与打印字段符号的对应关系存储在客户端中，并建立关联，如以数据库的形式存储及关联。例如对于符号【％DevNum％】，可以存储及关联要打印的字段【检材编号】的数据值。这里，字段【检材编号】对应的是符号DevNum，在其他实施例中可以选用其他的符号。【％DevNum％】中％与打印系统能识别的指令对应，第一个“％”表示开始的意思，第二个“％”表示结束的意思。对应不同的打印指令，这个指示开始和结束的符号可以与“％”不同。然后通过与条纹打印机适配的方式，示例地，通过USB通信模块，将ZPL第三指令文本发送给打印机进行打印。根据条纹打印机适用的通信方式也可以使用其他的通信模块，比如蓝牙、WiFi、Zigbee等等。这样就可以将定制标签打印出来了，而且可以实现自动批量地打印定制的标签。这对于需要大量使用定制标签的场合非常适用。例如，电子取证实验室、超市货物管理、资产物料盘点、产品生产流水线，普遍存在物料管理系统、仓库管理系统、图书管理系统等应用系统等。本发明实施例的方法实现了相关应用场景的标签定制化需求，能够节省一定的人力成本和定制成本，减少人为出错状况，具有较高应用价值。实施例三：本发明还提供一种打印定制标签的装置，如图6所示，该装置包括处理器601、存储器602、总线603、以及存储在存储器602中并可在处理器601上运行的计算机程序，处理器601包括一个或一个以上处理核心，存储器602通过总线603与处理器601相连，存储器602用于存储程序指令，处理器执行计算机程序时实现本发明实施例一的上述方法实施例中的步骤。进一步地，作为一个可执行方案，打印定制标签的装置可以是计算机单元，该计算机单元可以是桌上型计算机、笔记本、掌上电脑及云端服务器等计算设备。计算机单元可包括，但不仅限于，处理器、存储器。本领域技术人员可以理解，上述计算机单元的组成结构仅仅是计算机单元的示例，并不构成对计算机单元的限定，可以包括比上述更多或更少的部件，或者组合某些部件，或者不同的部件。例如计算机单元还可以包括输入输出设备、网络接入设备、总线等，本发明实施例对此不做限定。进一步地，作为一个可执行方案，所称处理器可以是中央处理单元，还可以是其他通用处理器、数字信号处理器、专用集成电路、现成可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等，处理器是计算机单元的控制中心，利用各种接口和线路连接整个计算机单元的各个部分。存储器可用于存储计算机程序和/或模块，处理器通过运行或执行存储在存储器内的计算机程序和/或模块，以及调用存储在存储器内的数据，实现计算机单元的各种功能。存储器可主要包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需的应用程序；存储数据区可存储根据手机的使用所创建的数据等。此外，存储器可以包括高速随机存取存储器，还可以包括非易失性存储器，例如硬盘、内存、插接式硬盘，智能存储卡，安全数字卡，闪存卡、至少一个磁盘存储器件、闪存器件、或其他易失性固态存储器件。实施例四：本发明还提供一种计算机可读存储介质，计算机可读存储介质存储有计算机程序，计算机程序被处理器执行时实现本发明实施例上述方法的步骤。计算机单元集成的模块/单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明实现上述实施例方法中的全部或部分流程，也可以通过计算机程序来指令相关的硬件来完成，的计算机程序可存储于一计算机可读存储介质中，该计算机程序在被处理器执行时，可实现上述各个方法实施例的步骤。其中，计算机程序包括计算机程序代码，计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。计算机可读介质可以包括：能够携带计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器以及软件分发介质等。需要说明的是，计算机可读介质包含的内容可以根据司法管辖区内立法和专利实践的要求进行适当的增减。尽管结合优选实施方案具体展示和介绍了本发明，但所属领域的技术人员应该明白，在不脱离所附权利要求书所限定的本发明的精神和范围内，在形式上和细节上可以对本发明做出各种变化，均为本发明的保护范围。
