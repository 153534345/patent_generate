标题title
一种多比特乘累加运算单元及存内计算装置
摘要abst
本发明涉及一种多比特乘累加运算单元和存内计算装置，多比特乘累加运算单元包括：M列存内计算单元；每列所述存内计算单元包括N个存内计算子单元；各所述存内计算子单元均包括6T‑SRAM存储单元、开关管M7和开关管M8；开关管M7的第一端与存储单元连接，开关管M7的第二端与公共端连接，开关管M7的第三端与开关管M8的第二端连接，开关管M8的第一端用于输入脉冲信号，开关管M8的第三端用于输出读位线信号。本发明在乘累加操作中，通过额外增加开关管M7和M8，进而避免了读写干扰的影响。
权利要求书clms
1.一种多比特乘累加运算单元，其特征在于，所述多比特乘累加运算单元包括：M列存内计算单元；每列所述存内计算单元包括N个存内计算子单元；其中，M和N均为大于或等于1的正整数；各所述存内计算子单元均包括6T-SRAM存储单元、开关管M7和开关管M8；开关管M7的第一端与6T-SRAM存储单元连接，开关管M7的第二端与公共端VSS连接，开关管M7的第三端与开关管M8的第二端连接，开关管M8的第一端用于输入脉冲信号，开关管M8的第三端用于输出读位线信号。2.根据权利要求1所述的多比特乘累加运算单元，其特征在于，所述6T-SRAM存储单元包括：开关管M1、开关管M2、开关管M3、开关管M4、开关管M5和开关管M6；开关管M1的第二端和开关管M2的第二端均与电源VDD连接，开关管M1的第一端、开关管M5的第一端、开关管M2的第三端和开关管M6的第三端连接，将连接点称为Q点，开关管M2的第一端、开关管M6的第一端、开关管M1的第三端和开关管M5的第三端连接，将连接点称为Q'点，开关管M5的第二端和开关管M6的第二端均与公共端VSS连接，开关管M3的第一端和开关管M4的第一端均用于输入字线信号，开关管M3的第二端与Q'点连接，开关管M3的第三端用于输入反位线信号，开关管M4的第三端与Q点连接，开关管M4的第二端用于输入位线信号。3.根据权利要求2所述的多比特乘累加运算单元，其特征在于，当开关管M1-开关管M8均为晶体管时，晶体管M1和晶体管M2均为PMOS，晶体管M3、晶体管M4、晶体管M5、晶体管M6、晶体管M7和晶体管M8均为NMOS，第一端为栅极，第二端为源极，第三端为漏极。4.根据权利要求1所述的多比特乘累加运算单元，其特征在于，M为4，N为64。5.一种存内计算装置，其特征在于，所述存内计算装置包括K个权利要求1-4任一项所述的多比特乘累加运算单元、输入控制模块、位线驱动模块、字线驱动模块和K组乘累加读出计算模块；其中，K为大于或等于1的正整数；所述输入控制模块、所述位线驱动模块和所述字线驱动模块均与各所述多比特乘累加运算单元连接，第g组所述乘累加读出计算模块与第g个多比特乘累加运算单元连接，g为大于或等于1，且小于或等于K的正整数；所述输入控制模块用于将输入数据转换成脉冲信号进行输出，所述位线驱动模块用于输出反位线信号和位线信号，所述字线驱动模块用于输出字线信号，各所述多比特乘累加运算单元用于根据字线信号、位线信号和反位线信号进行权重存储和脉冲信号以及权重的乘积运算，乘积结果以读位线信号方式输出；所述乘累加读出计算模块用于将所述多比特乘累加运算单元输出的乘积结果进行模数转换后进行累加，获得计算结果。6.根据权利要求5所述的存内计算装置，其特征在于，K为8。7.根据权利要求6所述的存内计算装置，其特征在于，各所述乘累加读出计算模块均包括4个模数转换单元和1个数字加权单元，4个模数转换单元分别与各所述多比特乘累加运算单元中的4列存内计算单元对应连接，4个模数转换单元均与数字加权单元连接；4个模数转换单元用于将乘积结果中各列模拟值转换成数字值；所述数字加权单元用于将4列数字值相加，获得计算结果。
说明书desc
技术领域本发明涉及存内计算技术领域，特别是涉及一种多比特乘累加运算单元及存内计算装置。背景技术深度卷积神经网络在人工智能等领域发展迅速，随着它的逐步发展，需要越来越多地考虑尺寸的大小、效率、能耗等方面的问题。传统的计算过程中，权重是在存储器和运算单元之间移动作用的，这不符合低功耗的要求。内存计算对DCNN加速越来越有吸引力，传统的存内计算单元多采用电压或者电平进行计算，并且单比特计算较多，存在读写干扰以及精度低的问题。发明内容本发明的目的是提供一种多比特乘累加运算单元及存内计算装置，以避免读写干扰问题。为实现上述目的，本发明提供了一种多比特乘累加运算单元，所述多比特乘累加运算单元包括：M列存内计算单元；每列所述存内计算单元包括N个存内计算子单元；其中，M和N均为大于或等于1的正整数；各所述存内计算子单元均包括6T-SRAM存储单元、开关管M7和开关管M8；开关管M7的第一端与6T-SRAM存储单元连接，开关管M7的第二端与公共端VSS连接，开关管M7的第三端与开关管M8的第二端连接，开关管M8的第一端用于输入脉冲信号，开关管M8的第三端用于输出读位线信号。可选地，所述6T-SRAM存储单元包括：开关管M1、开关管M2、开关管M3、开关管M4、开关管M5和开关管M6；开关管M1的第二端和开关管M2的第二端均与电源VDD连接，开关管M1的第一端、开关管M5的第一端、开关管M2的第三端和开关管M6的第三端连接，将连接点称为Q点，开关管M2的第一端、开关管M6的第一端、开关管M1的第三端和开关管M5的第三端连接，将连接点称为Q'点，开关管M5的第二端和开关管M6的第二端均与公共端VSS连接，开关管M3的第一端和开关管M4的第一端均用于输入字线信号，开关管M3的第二端与Q'点连接，开关管M3的第三端用于输入反位线信号，开关管M4的第三端与Q点连接，开关管M4的第二端用于输入位线信号。可选地，当开关管M1-开关管M8均为晶体管时，晶体管M1和晶体管M2均为PMOS，晶体管M3、晶体管M4、晶体管M5、晶体管M6、晶体管M7和晶体管M8均为NMOS，第一端为栅极，第二端为源极，第三端为漏极。可选地，M为4，N为64。本发明还提供一种存内计算装置，所述存内计算装置包括K个上述多比特乘累加运算单元、输入控制模块、位线驱动模块、字线驱动模块和K组乘累加读出计算模块；其中，K为大于或等于1的正整数；所述输入控制模块、所述位线驱动模块和所述字线驱动模块均与各所述多比特乘累加运算单元连接，第g组所述乘累加读出计算模块与第g个多比特乘累加运算单元连接，g为大于或等于1，且小于或等于K的正整数；所述输入控制模块用于将输入数据转换成脉冲信号进行输出，所述位线驱动模块用于输出反位线信号和位线信号，所述字线驱动模块用于输出字线信号，各所述多比特乘累加运算单元用于根据字线信号、位线信号和反位线信号进行权重存储和脉冲信号以及权重的乘积运算，乘积结果以读位线信号方式输出；所述乘累加读出计算模块用于将所述多比特乘累加运算单元输出的乘积结果进行模数转换后进行累加，获得计算结果。可选地，K为8。可选地，各所述乘累加读出计算模块均包括4个模数转换单元和1个数字加权单元，4个模数转换单元分别与各所述多比特乘累加运算单元中的4列存内计算单元对应连接，4个模数转换单元均与数字加权单元连接；4个模数转换单元用于将乘积结果中各列模拟值转换成数字值；所述数字加权单元用于将4列数字值相加，获得计算结果。根据本发明提供的具体实施例，本发明公开了以下技术效果：本发明涉及一种多比特乘累加运算单元和存内计算装置，多比特乘累加运算单元包括：M列存内计算单元；每列所述存内计算单元包括N个存内计算子单元；各所述存内计算子单元均包括6T-SRAM存储单元、开关管M7和开关管M8；开关管M7的第一端与 存储单元连接，开关管M7的第二端与公共端连接，开关管M7的第三端与开关管M8的第二端连接，开关管M8的第一端用于输入脉冲信号，开关管M8的第三端用于输出读位线信号。本发明在乘累加操作中，通过额外增加开关管M7和M8，进而避免了读写干扰的影响。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明多比特乘累加运算单元结构图；图2为本发明存内计算装置；图3为本发明乘累加读出计算模块结构示意图；符号说明：1-多比特乘累加运算单元，2-输入控制模块，3-位线驱动模块，4-字线驱动模块，5-乘累加读出计算模块，6-存内计算单元，7-存内计算子单元，8-模数转换单元，9-数字加权单元。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本发明的目的是提供一种多比特乘累加运算单元及存内计算装置，以避免读写干扰问题。为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。实施例1本发明公开一种多比特乘累加运算单元1，所述多比特乘累加运算单元1包括：M列存内计算单元6；每列所述存内计算单元6包括N个存内计算子单元7；其中，M和N均为大于或等于1的正整数；各所述存内计算子单元7均包括6T-SRAM存储单元、开关管M7和开关管M8；开关管M7的第一端与6T-SRAM存储单元连接，开关管M7的第二端与公共端VSS连接，开关管M7的第三端与开关管M8的第二端连接，开关管M8的第一端用于输入脉冲信号，开关管M8的第三端用于输出读位线信号。作为一种可选的实施方式，本发明所述6T-SRAM存储单元包括：开关管M1、开关管M2、开关管M3、开关管M4、开关管M5和开关管M6。开关管M1的第二端和开关管M2的第二端均与电源VDD连接，开关管M1的第一端、开关管M5的第一端、开关管M2的第三端和开关管M6的第三端连接，将连接点称为Q点，开关管M2的第一端、开关管M6的第一端、开关管M1的第三端和开关管M5的第三端连接，将连接点称为Q'点，开关管M5的第二端和开关管M6的第二端均与公共端VSS连接，开关管M3的第一端和开关管M4的第一端均用于输入字线信号，开关管M3的第二端与Q'点连接，开关管M3的第三端用于输入反位线信号，开关管M4的第三端与Q点连接，开关管M4的第二端用于输入位线信号。当上述开关管M1-M8均为晶体管时，晶体管M1和晶体管M2均为PMOS，晶体管M3、晶体管M4、晶体管M5、晶体管M6、晶体管M7和晶体管M8均为NMOS，第一端为栅极，第二端为源极，第三端为漏极。如图1所示，所述多比特乘累加运算单元1包括：4列存内计算单元6；每列所述存内计算单元6包括64个存内计算子单元7。各所述存内计算子单元7均包括6T-SRAM存储单元、晶体管M7和晶体管M8；晶体管M7的栅极与6T-SRAM存储单元连接，晶体管M7的源极与公共端VSS连接，晶体管M7的漏极与晶体管M8的源极连接；第i+1行第j列存内计算子单元7中的晶体管M8的漏极用于输出读位线信号RBLj，第i+1行第j列存内计算子单元7中的晶体管M8的栅极用于输入脉冲信号In＜i＞；第i+1行第j列存内计算子单元7中的晶体管M4的栅极用于输入字线信号WL＜i＞，第i+1行第j列存内计算子单元7中的晶体管M4的源极用于输入位线信号BLj，第i+1行第j列存内计算子单元7中的晶体管M3的漏极用于输入反位线信号BLBj，其中，i为大于或等于0的正整数，且为小于或等于63的正整数，j为大于或等于1的正整数，且为小于或等于4的正整数。如图1所示，多比特乘累加运算单元1一共由4列存内计算单元6组成，从左到右分别存储的是4bit权重的第4、3、2、1位，分别表示4bit权重的4个不同位。晶体管M1-晶体管M6用于存储权重，晶体管M7和晶体管M8用于实现脉冲信号和权重的乘法运算，晶体管M1和晶体管M2均为PMOS，晶体管M3-晶体管M8均为NMOS。进行权重存储的时候，权重要存到64行中的任何一行的时候，首先就使该行对应的WL＜i＞的电压升高，如果存储的权重是1，就让BLj的电压为1，BLBj的电压为0；如果存储的权重是0，就让BLj的电压为0，BLBj的电压为1。进行计算的时候，首先是数据的输入，输入数据为4bit的数据，数据的大小通过借助脉冲宽度大小的不同来表示，4bit的输入意味着脉冲宽度一共15种可能性。脉冲用In＜i＞表示，不同的脉宽表示不同的放电时间，这就会导致均压模块中的电压大小不同，表现在读位线信号RBL4、RBL3、RBL2、RBL1的电压存在差别，这种电压差就是一次乘法运算的结果。每列64个存内计算子单元7，每次计算只有16个单元开启，表示一个多比特乘累加运算单元1进行16个4bit*4bit的运算。这16个单元都会对读位线信号RBLj产生放电的效果，最终RBLj上的电压表示的就是这16个乘法运算加和的结果，因此读位线信号RBLj表示的是16个乘累加运算的结果。实施例2如图2所示，本发明还公开一种存内计算装置，所述存内计算装置包括8个实施例1的多比特乘累加运算单元1、输入控制模块2、位线驱动模块3、字线驱动模块4和8组乘累加读出计算模块5；所述输入控制模块2、所述位线驱动模块3和所述字线驱动模块4均与各所述多比特乘累加运算单元1连接，第g组所述乘累加读出计算模块5与第g个多比特乘累加运算单元1连接，g为大于或等于1，且小于或等于8的正整数；所述输入控制模块2用于将输入数据转换成脉冲信号In＜0＞-In＜63＞进行输出，所述位线驱动模块3用于输出反位线信号BLB0＜4:1＞-BLB7＜4:1＞和位线信号BL0＜4:1＞-BL7＜4:1＞，所述字线驱动模块4用于输出字线信号WL＜0＞-WL＜63＞，各所述多比特乘累加运算单元1用于根据字线信号、位线信号和反位线信号进行权重存储和脉冲信号以及权重的乘积运算，乘积结果以读位线信号RBL0＜4:1＞-RBL7＜4:1＞输出；所述乘累加读出计算模块5用于将所述多比特乘累加运算单元1输出的乘积结果进行模数转换后进行累加，获得计算结果。在实施例1中读位线信号用RBL1-RBL4，因为在实施例2中包括8个实施例1的多比特乘累加运算单元1，为了更好区分读位线信号，因此用RBL0＜4:1＞表示第1个多比特乘累加运算单元1输出的读位线信号RBL1-RBL4，以此类推，用RBL7＜4:1＞表示第8个多比特乘累加运算单元1输出的读位线信号RBL1-RBL4；用BL0＜4:1＞表示第1个多比特乘累加运算单元1输入的位线信号BL1-BL4，以此类推，用BL7＜4:1＞表示第8个多比特乘累加运算单元1输入的位线信号BL1-BL4；用BLB0＜4:1＞表示第1个多比特乘累加运算单元1输入的反位线信号BLB1-BLB4，以此类推，用BLB7＜4:1＞表示第8个多比特乘累加运算单元1输入的反位线信号BLB1-BLB4。如图3所示，本发明第g个所述乘累加读出计算模块5包括4个6bit的模数转换单元8和1个数字加权单元9，4个模数转换单元8分别与第g个所述多比特乘累加运算单元1中的4列存内计算单元6对应连接，4个模数转换单元8均与数字加权单元9连接；4个模数转换单元8用于接收4列存内计算单元6输出的读位线信号RBL1-RBL4，也可以写成RBLg＜4:1＞，并将乘积结果中各列模拟值转换成6bit的数字值；所述数字加权单元9用于将4列6bit的数字值加权相加，获得10bit的计算结果输出。也就是说，本发明每个所述乘累加读出计算模块5主要由两部分组成，第一部分是4个6bit的模数转换单元8，用于把多比特乘累加运算单元1的输出的4个模拟的电压值转化为4个6bit的数字值。第二部分是一个数字加权单元9，就是前一部分输出的4个6bit的数字值进行加权处理，实际上就是8组加法器构成，进行按位加法的运算，实现了最终10bit的计算结果的输出。本发明公开的方案具备以下优点：本发明存内计算子单元7采用8T SRAM结构，提高额外的计算单元，可以有效的避免读写干扰问题，增加计算结果的准确性。本发明采用的是数字和模拟混合的乘累加读出计算模块5，相比较之前的纯模拟结构的读出计算模块，可以有效地提高计算的精度，并且相对面积和功耗降低了很多。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处。综上所述，本说明书内容不应理解为对本发明的限制。
