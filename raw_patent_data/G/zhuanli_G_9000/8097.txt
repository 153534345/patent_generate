标题title
一种融合异质信号的任意组合以确定电子装置位置的概率系统及方法
摘要abst
本发明关于一种信号融合系统，该系统是融合异质信号的任意组合以确定电子装置的位置的概率系统。该系统包括信号采样装置，用于检测待定位电子装置所发出的一个或多个信号，包括地理定位信号、WiFi信号、蓝牙信号、4G通信信号、5G通信信号、地磁信号或惯性导航系统信号。似然处理器与信号采样装置协作以接收关于所选采样信号的信息，并为电子装置可能位于的感兴趣区域创建参考点网格。似然处理器针对每个选定的采样信号独立地计算位置似然，该位置似然是假设电子装置位于网格中的不同参考点处观察到采样信号的概率。
权利要求书clms
1.一种融合异质信号的任意组合以确定电子装置位置的概率系统，包括：一种信号采样装置，用于检测要定位的电子装置所发射的一个或多个信号，从一个或多个地理定位信号、WiFi信号、蓝牙信号、4G通信信号、5G通信信号、地磁信号或惯性导航系统信号中选择一个或多个发射信号,信号采样装置对每个选择的信号使用不同的采样率；一种似然处理器与信号采样装置协作以接收关于所选采样信号的信息，所述似然处理器为电子装置可能位于的感兴趣区域创建参考点网格；所述似然处理器独立地计算每个选定的采样信号，一种位置似然,是假设电子装置位于网格中的不同参考点并以加权方式融合多个信号的位置似然的情况下观察采样信号的概率。2.根据权利要求1所述的融合异质信号的任意组合以确定电子装置位置的概率系统,其特征在于,所述似然处理器包括一个似然融合模块，用于分配权重以对比位置似然。3.根据权利要求2所述的融合异质信号的任意组合以确定电子装置位置的概率系统,其特征在于,所述概率系统进一步包括粒子滤波器，所述粒子滤波器使用来自所述融合模块的加权位置似然来更新所述粒子滤波器中的粒子权重以确定所述电子装置的位置。4.根据权利要求1所述的融合异质信号的任意组合以确定电子装置位置的概率系统,其特征在于,所述似然处理器包括一个用于处理基于RSSI向量的信号的类神经网络。5.根据权利要求1所述的融合异质信号的任意组合以确定电子装置位置的概率系统,其特征在于,所述似然处理器包括一个用于确定地理定位信号的似然位置的贝氏分析模块。6.根据权利要求1所述的融合异质信号的任意组合以确定电子装置位置的概率系统,其特征在于,所述似然处理器包括一个用于分析基于序列的信号的动态时间扭曲模块。7.一种融合异质信号的任意组合以确定电子装置位置的定位方法，包括：对从待定位的电子装置发出的一个或多个信号进行异质采样，从一个或多个地理定位信号、WiFi信号、蓝牙信号、4G通信信号、5G通信信号、地磁信号或惯性导航系统信号中选择一个或多个发射信号；将采样信号信息馈送到与信号采样装置协作的一似然处理器，所述似然处理器为电子装置可能位于的感兴趣区域创建参考点网格；所述似然处理器独立地计算每个选定的采样信号，一种位置似然,是假设电子装置位于网格中的不同参考点，并以加权方式融合多个信号的位置似然的情况下观察采样信号的概率；其中，当在定位时间内未观察到采样信号时，所述方法将动态地下降采样信号。8.根据权利要求7所述的融合异质信号的任意组合以确定电子装置位置的定位方法,其特征在于,所述定位方法进一步包括使用粒子滤波器来动态组合加权位置似然与惯性传感器测量。9.根据权利要求7所述的融合异质信号的任意组合以确定电子装置位置的定位方法,其特征在于,所述似然处理器包括似然融合模块，用于分配权重以对比位置似然。10.根据权利要求7所述的融合异质信号的任意组合以确定电子装置位置的定位方法,其特征在于,所述似然处理器包括一个用于处理基于RSSI向量的信号的类神经网络。11.根据权利要求7所述的融合异质信号的任意组合以确定电子装置位置的定位方法,其特征在于,所述似然处理器包括一个用于确定地理定位信号的似然位置的贝氏分析模块。12.根据权利要求7所述的融合异质信号的任意组合以确定电子装置位置的定位方法,其特征在于,所述似然处理器包括一个用于分析基于序列的信号的动态时间扭曲模块。
说明书desc
技术领域本发明一般涉及用于确定电子装置/用户使用电子装置之位置的定位技术。更具体地来说，本发明涉及融合异质信号的任意组合以确定电子装置位置的概率系统。背景技术定位技术在导航、基于位置的营销、地理围栏等方面有着广泛的应用。对于开放的室外环境，GPS通常提供可接受的解决方案。然而，在城市峡谷、半室内或室内深处的环境中，由于信号较弱或不可用，GPS准确度会下降。对于复杂的室内案例，指纹识别成为一种很有前途的定位技术。在指纹识别中，首先调查一个位置，用它们的位置标记检测到的信号值，即所谓的“指纹图谱”。在给定指纹图谱的情况下，可以根据采样的信号估计用户的位置。考虑了各种指纹信号，例如WiFi、蓝牙、基于磁场的信号等。每个信号类别都有其本身的优势和局限性。例如，GPS在室外运行良好，但在室内可能无法使用。射频信号像是WiFi或蓝牙在长距离内普遍存在且可区分，因此可安排在室内环境中。然而，由于多路径和衰减效应，RF信号通常会受到相对较高的杂讯影响。定位准确度在很大程度上取决于信号的强度和密度。对于WiFi等一些信号，它们在手机等移动装置中的采样率可能不高，对用户体验产生不利影响。地磁是另一个已被探索的信号类别。它的优势在于其无所不在、快速采样率和低杂讯。它的缺点是全局模糊性，即某个地磁序列可能与感兴趣区域中的多个位置匹配以进行定位。几乎每个移动装置都有惯性传感器，可以用来提供用户的移动信息。然而，惯性传感器信息仅提供相对位置信息，误差可能会随着时间的推移而累积和发散。因此，INS通常与其他信号结合以提高定位准确度。鉴于用于定位的各种信号的互补性，最近的研究一直侧重于融合不同的信号以结合它们的优点，同时降低它们的缺点。然而，融合技术只考虑了根据特定信号特征以高度专业化和定制化方式组合的两个或三个信号。因此，通常是不可能去扩展融合技术用来包括其他信号。虽然通常假设给定技术的信号在定位决策时完全可用，但实际上，由于信号采样率差异很大，会发生丢失信号值的情况。试图补偿丢失的信号值包括使用上次测量的信号值、基于历史进行预测或将定位频率降低到最慢采样率。这些补偿技术都不能令人满意。因此，本领域需要用于多模式定位系统和方法的通用信号融合框架。发明内容本发明通过随时支持添加和去除信号来克服现有技术系统的问题。它是一个可增量扩展到新信号的平台，无需复训整个系统。本发明提供了一种称为“SiFu”的信号融合系统和方法。SiFu系统是一种概率系统，它融合了异质信号的任意组合来确定电子装置的位置。该系统包括用于检测由要定位电子装置发射的一个或多个信号的信号采样装置，其包括地理定位信号、WiFi信号、蓝牙信号、4G通信信号、5G通信信号、地磁信号或惯性导航系统信号。信号采样装置对每个选择的信号使用不同的采样率。似然处理器与信号采样装置协作以接收关于所选采样信号的信息，并为电子装置所位于的感兴趣区域创建参考点网格。似然处理器针对每个选定的采样信号独立地计算位置似然，该位置似然是假设电子装置位于网格中不同参考点上时所观察到采样信号的概率。在融合模块中以加权方式组合位置似然。粒子滤波器使用位置似然来更新粒子滤波器中的粒子权重以确定电子装置的位置。似然处理器可以包括用于确定不同类型信号似然的各种模块。例如，类神经网络模块可用于RSSI向量。贝氏分析模块可用于确定地理定位信号的可能性。动态时间扭曲模块可用于分析基于序列的信号。附图说明当从以下实施方式中结合附图阅读时可以容易地理解本公开的內容。图1A和1B示意性地描绘了本公开的SiFu系统和方法。图2是去杂讯自动编码器的示意图。图3是双类神经网络配置的示意图。图4是不同位置中基于点RSSI向量的不同方案的平均误差图。图5是不同定位方法在不同地点中的平均误差图。图6A-6C显示了不同地点定位误差的累积分布。图7A-7C显示了不同地点的实时定位误差。图8A-8C显示了具有不同计算网格大小的不同地点之平均定位误差。图9显示了不同网格大小的计算时间。图10显示了具有不同磁场匹配范围的不同地点之平均定位误差。图11显示了具有不同磁场匹配范围的计算时间。图12显示了具有不同σm的不同地点之平均定位误差。图13显示了具有不同σw的不同地点之平均定位误差。图14显示了具有稀疏WiFi采样的不同地点之不同定位方法的平均误差。图15A-15C显示出了具有稀疏WiFi采样的不同地点之定位误差的累积分布。具体实施方式详细请参考附图。图1A显示了信号融合系统。信号融合系统被称为“SiFu”。SiFu系统是一种概率系统，它融合了异质信号的任意组合来确定电子装置的位置。如图1A所示，系统10包括信号采样装置20，用于检测从待定位的电子装置50发出的一个或多个信号60，包括地理定位信号、WiFi信号、蓝牙信号、4G通信信号、5G通信信号、地磁信号或惯性导航系统信号。信号采样装置对每个选择的信号60使用异质采样率。信号采样装置可以选自接收器、收发器、手机、智能手表和IOT装置。似然处理器30与信号采样装置20协作以接收关于所选采样信号的信息，并为电子装置50可能位于的感兴趣区域创建参考点网格。似然处理器针对每个选定的采样信号独立地计算位置似然，该位置似然是假设电子装置50位于网格中的不同参考点处所观察到采样信号的概率。似然处理器可以包括用于确定不同类型信号似然的各种模块。例如，类神经网络模块34可用于RSSI向量。贝氏分析模块32可用于确定地理定位信号似然。动态时间扭曲模块36可用于分析基于序列的信号。在似然融合模块40中以加权方式融合独立计算似然，该模块根据指纹图谱的训练过程中每个网格点处的单个模型性能来分配权重。粒子滤波器70使用位置似然更新粒子滤波器70中的粒子权重以确定电子装置的位置。如图1B所示，SiFu采用概率框架。根据信号的定位处理方式考虑各种类别的信号。例如，基于序列的信号基于一组连续信号样本进行定位，而基于点的信号基于单个样本进行定位。基于点的信号进一步细分为第一组，其中信号输入已经是全球纬度和经度坐标的形式，第二组使用接收信号强度指标的向量。第二组包括WiFi和蓝牙等信号。在操作中，信号采样装置20对从待定位电子装置50发射的一个或多个信号进行采样。采样信号从信号采样装置被馈送到似然处理器30，其独立地将信号值转换成与潜在装置位置相关地图的可行区域中之预定义网格上的位置似然。贝氏模块32将全球坐标和准确度转换为预定义网格上的似然。对于信号强度向量，类神经网络模块34通过使用类神经网络的向量比较来返回似然性，下面将更详细地讨论。对于基于序列的信号，动态时间扭曲模36通过将输入序列与网格点上的指纹图谱进行匹配来估计似然。而似然计算模块32、34和36是通用的，意味者它们适用于一个类别内的不同信号类型。因此，这三个模块能够动态地分析各种信号组，使得系统能够根据当前条件添加或删除要分析的一类信号。通常，当在定位时未观察到信号时，信号会被动态地舍弃。之所以会发生这种情况，是因为不同信号的信号采样率不同，而且信号覆盖范围有限。相似地，当再次观察到信号时，可以动态添加信号。动态地添加和删除信号的能力是本发明的一个相当大的优势，使其能够适应不同的信号条件以及不同的生态环境/居住环境。在似然融合模块40中以加权方式融合来独立计算的似然。然后使用粒子滤波器70，以地图上的可行区域作为限制，将加权似然与用户移动信息来进行整合。由于SiFu系统使用融合异质信号的任意组合的概率框架，因此SiFu系统10可适应由于不同的信号采样率、信号添加、信号移除、丢失的样本等而导致信号的存在或不存在。因此，系统10实现了信号组合的高弹性和可扩展性，而无需因信号环境的变化而重新训练和重新设计系统。RSSI向量通常比较无法处理两个向量之间丢失或不重叠的信号值，进而严重影响定位精度。在类神经网络模块34中，使用了一种新颖的机器学习技术，该技术采用去杂讯自编码器来学习感兴趣区域中潜在表示的信号以用于定位确定。与基于原始信号读数的传统方法相比，SiFu系统10可估计潜在空间中的可能性。由于从所有指纹信号中学习深度特征，克服了缺失值问题，进而实现了更高的稳健性和准确性。不同的信号可能会在感兴趣区域的不同位置产生不同的定位准确度。系统组件的性能不佳可能会影响整个融合定位系统的性能。现有技术方法通常是针对特定信号定制的，因此不能将新信号添加到系统中或舍弃先前使用的信号。在本发明中，使用贝氏分析中的加权似然来融合多模态信号。通过对每个信号进行位置相关的加权，将信号智能地组合起来，以实现高准确度。似然处理器及其模块的操作：将感兴趣的区域离散化为参考点网格。定位似然是指为网格中的每个RP计算待定位的装置出现在参考点的概率。对于使用指纹识别方法的信号，应在每个RP处获取指纹信号。以下等式中使用的符号在下表I中定义：表I：SiFu中的主要符号。在数学上，给定观察到的信号，装置位于不同位置的概率表示为p，其中x表示感兴趣区域中的状态，S＝T是包含n个观测信号的向量。下面将进一步详细讨论粒子滤波器用于估计该分布。因此，确定测量似然p以更新粒子滤波器中粒子的权重。由于不同的信号是借由不同的传感器采样，因此假设不同信号之间的条件是独立的。似然p由下式给出对于每个信号si，测量似然p是独立计算的，它是在装置位于不同RP的情况下观察采样信号si的概率。这是通用融合定位框架的基础。地理定位数据可以利用此类信号使用以平均值μ和协方差Σ为特征的二元正态分布来建模。使用报告的位置作为来构建平均向量，其中是本地地图坐标系统中的报告位置。分布的协方差矩阵Σ近似于报告的准确度。在没有先前知识的情况下，可以合理地假设高斯分布的两个维度不相关并且具有相同的方差。多元高斯分布的区间由下式给出：等式其中μ和Σ是高斯分布的平均向量和协方差矩阵，是的第个分位数。由于表示点x和平均值μ之间的差异，使用定位准确度，我们可以得到其中a是报告的准确度。因此，协方差矩阵然后将测量似然p定义为给定位置x，平均值的概率等于所报告的位置。根据贝氏定理：等式由于均值的均匀先验在任何地方都是等概率的，即p是常数，因此可放置均值的均匀先验。由于p是高斯分布的密度函数，可以用已知的平均值和协方差矩阵计算出来，并由下式给出似然：等式基于点信号的RSSI向量对于基于点的RSSI向量，从定位步骤中RP xi处的似然计算获得采样信号s与指纹信号t之在RP xi处的相似性测量δ。经由在相似性测量上假设一个正态分布的观测模型，在RP xi处观测到RSSI向量s的概率为：等式当中σ是正态分布的标准差，其也是观测模型灵敏度的一个参数。有时可以通过比较原始读数来获得相似性测量。然而，对于更高维度的信号来说，此方法仍有缺点，因为信号杂讯和遗失可能会严重误导相似度计算，最终影响到似然计算。因此，建议利用信号的潜在表征来计算相似性测量。潜在表征是从感兴趣区域中所有收集的指纹信号中学习到的深层特征。在潜在表征的生成中，将隐含地考虑信号杂讯和遗失的测量。使用这些特征有望提供更精确和稳健的相似性测量。在具有固定维度的表示上，两个RSSI向量之间的比较也更公平。出于定位目的，如果两个信号的物理位置接近，则它们的潜在表征也将相似。机器学习技术用于学习信号潜在表征。首先，训练去杂讯自编码器。图2示意性地描绘了自编码器的结构。此输入是离线调查阶段收集的指纹信号的杂讯版本。杂讯可以通过以下两种方式注入：随机屏蔽特征，这使得模型在某些特征遗失的情况下具有稳健性，以及添加高斯杂讯以模拟局部测量误差。该自动编码器包括学习将杂讯信号编码成维度d的潜在表征的编码器，以及从该表征恢复原始干净信号的解码器。在图2的自动编码器中，编码器和解码器都由L完全连接的层组成。只需要一个自动编码器来学习感兴趣区域中的所有指纹图谱，而不是专门针对一个RP的一个自动编码器。因此，本发明的方法在数据收集和模型训练方面不需要花费太多的精力。此外，通过学习对信号进行编码和解码，整个定位区域中的相似信号将产生相似的潜在表征，使其可用于信号区分以进行定位。对于去噪自动编码器，使用图3所示的孪生/偶网络来计算相似性测量。在此架构中，两个网络在两个不同的输入X1和X2上享有共同的权重W。给定采样信号s和指纹信号t，相似性度量计算如下：等式δ＝‖Gw-Gw‖其中GW表示具有权重W的类神经网络。这里，网络本质上是自编码器的编码器部分，并且相似性度量计算两个RSSI向量的潜在表征之间的欧氏距离。以WiFi信号作为此类信号的示例。WiFi RSSI读数广泛用于许多基于指纹识别的室内定位系统。由于传递过程中的信号衰减，每个AP的RSSI反映了信号在物理空间中从该AP传播的距离。WiFi RSSI向量由当前所有检测到的AP的RSSI值组成，包含足够丰富的信息，因此可以粗略估计装置位置。然而，由于多径和衰落效应，WiFi信号在室内环境中存在杂讯，有时可能无法检测到一些Aps。去杂讯自编码器解决了这些问题，并有助于生成更好的相似性测量。基于序列的信号由于信号采样装置采样率和装置运动的差异，两个序列可能不会对齐，这使得比较两个时间序列非常困难。为了缓解这个问题，使用了动态时间扭曲演算法，该演算法可以拉伸或压缩序列的时间维度以获得最佳匹配。DTW演算法为两个序列s和t找到最佳变形路径。在扭曲路径中，序列s中的数据点与序列t中的数据点相关联。最后，将返回扭曲路径的距离，作为扭曲路径中数据点之间的差异之和，如下所示：等式其中，s,k和t6k分别是序列s和t的扭曲路径上的第k个数据点。距离本身是一种相似性测量，因此基于正态分布的观察模型获得似然为：ㄋ等式由于地磁场读数只是一个三维向量，它通常不能为定位提供足够的信息。例如，在两个非常不同位置的磁场值是相似时，模糊不清是常见的，而且不容易解决此情况。因此，通常需要考虑一段时间内的多个磁场读数来预测装置位置。所以，选择磁场作为基于序列的信号的代表。由于DTW演算法的复杂度为O，其中M和N分别是序列的长度，因此通过使用快速DTW进一步提高了SiFu系统的效率。此外，最后一个用户位置用于限制搜索空间以加快匹配过程。表示为r的磁匹配范围决定了磁匹配空间的大小。只有距离最后一个预测位置r m内的磁场指纹图谱才会与采样信号匹配以进行似然计算。似然融合将独立计算的似然组合成联合似然度，以更新粒子滤波器中的粒子权重。通常，这可以使用公式来完成。给定似然，只直接计算其产品。但是，由于模型的缺陷，这些似然可能不准确，从而产生不确实的最终结果。一般来说，加权似然是贝氏推理L的近似值。加权似然提供了一个良好的近似后验分布与适当选择的权重。在定位中，信号可能会受到不明确的读数和杂讯的影响，因此可以在物理距离较远的两个位置接收到相似的读数。这些信号会严重影响模型训练阶段，从而影响模型的性能和似然函数的形状。在本发明中，通过在空间上控制信号对似然的贡献，采用加权似然来避免由于较差的模型性能而对其产生的任何负面影响。权重较小时，信号的贡献较小，因为低似然将被推向更接近高似然端。信号之间的区别将减少。在权重为0的极端情况下，无论原始似然如何，加权似然都会变为1。在这种情况下，信号的贡献被去除，决定的能力转移到其他信号。相反，具有高权重的信号将具有可用于区分位置的似然值。在这个加权方案中，表示模型健全度的权重起着重要的作用。因此，权重的选择对于SiFu很重要。直观上，具有更多可区分特征的信号应分配更高的权重，反之亦然。在SiFu中，权重是从所有感兴趣区域中采用指纹图谱方法模型的性能推断出来的。对于不使用指纹图谱方法的信号，本发明分配权重为1，以便保留原始似然函数。在SiFu中，权重是指特定位置，因为信号的可分辨性可在感兴趣的区域内变化。设wij是在RP xi处信号类型j的权重，Vij是由在那里收集的信号类型j组成的验证数据集。使用验证数据集Vij上的单个信号源信号j来测试定位性能，用以找到wij。定位误差的计算为地面真实情况和预测位置之间的欧氏距离。接着通过以下方式计算权重：其中是RP xi处标准化的平均误差。感兴趣的测量似然估计为：粒子滤波器在获得加权似然时，粒子滤波器70用于将加权似然与装置移动和从INS所获得的信息结合起来。装置的方向和行进距离是根据陀螺仪、磁力仪和加速度计的读数来估算的。典型的粒子滤波器可用来执行以下操作：1)预测粒子，2)权重更新，3)位置估计，以及4)重新采样。预测粒子的步骤需依赖于估计的方向和行进距离信息来传播粒子。在权重更新阶段，使用计算后的加权似然。并在计算网格中的RPs处计算似然。虽然粒子不一定正好落在RP上，但每个粒子都将取其最接近的RP的似然值。此外，如果粒子违反了映像约束，则权重将设置为0，然后将权重标准化。给定一组N粒子,wi)，装置位置估计的步骤通过粒子位置的加权平均值来计算出装置位置，如下所示：等式11最后，重新采样步骤根据证据来校正样本集。虽然在概率密度较高的区域会对更多的粒子进行重新采样，但在样本中也会增加一些多样性。实施例SiFu可以应用在各种硬件中，包括具有配备信号采样装置的计算机、手机、平板电脑，或包括信号采样设备、似然处理器和粒子滤波器的定制硬件。下面的例子使用Android手机来应用于SiFu系统。在这个例子中，选择了四个不同具有广泛特征的信号：WiFi、磁场、GPS和Google Fused Location API。以这些信号为例，该示例展示了它们在本发明的多模态定位框架中的应用。然而，本发明不限于这些信号，并且同样可以简单地扩展到其他信号。该示例在大学校园内的三个区域进行，分别是室内走廊、室内开放空间区域和半室内中庭区域。该示例表明SiFu在定位方面具有很高的准确度，当其与其他定位技术相比，准确度大大提高。通过室内外转换的实例，证明SiFu系统可以管理任意的信号组合，实现无缝漫游，无需在室外和室内之间切换演算法。走廊区域有91个AP，这当中还包括一些长走廊，6010m2的室内开放空间区域有93个AP，6824m2的中庭区域有103个AP。在中庭区域可测试系统处理任意信号组合的能力。在某些地区，GPS是可用的，有些地区则是WiFi和磁指纹区域。在示例中，装置从指纹区域移动到非指纹区域，使得所使用的信号从WiFi、磁性和Google API切换到GPS和Google API。借由训练输入/输出区域检测模块，以检测在线阶段是否为指纹区域内观察到WiFi信号。如果是的话，其将用于位置估计。否则，其将不被采纳。实施例中的参数设置如表II所示。WiFi信号的采样频率大约为每几秒一个样本，而磁场和其他INS传感器的采样频率为每秒数十个样本。此外，Google融合位置API每隔几秒就会返回一个位置，而GPS的采样率通常更快。表II:预设参数在示例中，将本发明与两种现有技术定位演算法和Google API以及本系统的简易版本进行比较。·WiDeep：该定位方案采用叠加去杂讯自动编码器对WiFi-RSSI去杂讯。对每个参考点都相应地去训练一个自动编码器。通过选择自动编码器，其恢复WiFi RSSI读数最好的点来估计用户位置。由杂讯注入器模拟杂讯训练读数，而该杂讯注入器假设环境杂讯呈高斯分布。·F-Score-Weighted：该定位方案通过F-score测量WiFi和磁场的权重。借由最小化两个信号的对数似然之加权和来估计位置。而信号似然由高斯概率密度函数计算出来的。·简易版本的SiFu：该定位方案使用与SiFu相同的一组信号，即利用WiFi、磁场、GPS和Google来计算似然，然后使用粒子滤波器将其与INS信号融合。在简易版本中，信号没有加权。仅通过将所有似然相乘来计算联合测量似然。·Google融合位置API：一种由Google创建的融合定位演算法，其智能地结合了WiFi、蓝牙和GPS在内的信号。将以下性能度量用于比较：·定位错误：定位误差为地面真实情况和预测位置之间的欧氏距离。它是衡量定位系统整体性能最直接和最常用的度量。借由检查错误分布以进行更全面的评估。·计算时间：计算效率对于定位系统非常重要，尤其是对于实时系统。在本示例中，计算位置所需的平均时间是在接收到信号后测量的。似然计算模块首先针对基于点的RSSI向量进行验证。将本发明中所使用基于潜在空间中的距离计算的模型与在原始信号读取中基于不同度量的其他方案进行比较。图5显示了不同站点之间的比较。本发明的SiFu系统在所有三个点中都更准确地执行。在走廊区域，三种对比方案的表现几乎相同，可能是因为那处的WiFi信号更强更稳定。但是，在室内空地、中庭等较为开阔的区域进行测试时，多径衰落效应会变得更强，WiFi信号也可能具有较大的波动。比较原始信号空间中的欧氏距离和余弦相似度等简易的方法明显受到影响。相反，本发明的系统已经掌握了在训练阶段适应信号杂讯和遗失值，因此比其他系统获得更稳健和更高的准确度。对于融合定位，图5描绘了SiFu的平均定位误差和三个测试地点上的比较方案。SiFu在所有三个地点中都显示了优于现有技术演算法的准确性。对于WiDeep，走廊区域的性能是可接受的，但在室内开放空间和中庭区域，由于开放区域测量到的杂讯WiFi，其准确性和稳定性受到严重影响。由于WiDeep只考虑单一信号进行定位，因此在WiFi信号弱且不稳定的地区其表现不佳。相比之下，FSW将地磁与WiFi融合在一起。磁场可以减轻开放区域中WiFi信号较差的负面影响，因此它通常比WiDeep效果更好。然而，由于F-score的引入并没有考虑复杂环境下固有的定位误差，因此其融合方法并不理想。与现有技术相比，SiFu通过融合更多的信号和采用更好的融合方法来提高准确度。融合更多的信号可以让SiFu系统有更多的信息来做出判断，并进一步引入INS信号以及粒子滤波器去稳定定位结果。此外，与本发明的简易版本相比，SiFu利用了加权似然方案，该加权似然方案减少了某些区域中不良模型性能所造成的影响，进而产生较低的定位误差。在比较方案中，SiFu系统实现了最佳的平均定位误差。与现有技术系统相比，其平均误差减少了30％以上。图6描绘了不同测试地点之定位误差的累积分布函数。很明显的是，SiFu系统在所有比较方案中达到了最稳定和稳健的性能。最大误差显着降低，并且大部分结果在三个地点中都具有可接受的定位误差。在图6A中，观察到SiFu及其简易版本的具有接近的性能。这表明加权融合方法在走廊区域没有发挥到重要作用。这种情况可能是因为个别模型已经运行良好，而权重只有限的影响似然函数形状。这也可以解释为什么FSW和WiDeep可以在这个点上可达到合理的准确度。图6B显示出了加权似然的一些轻微影响。最大误差减少了，而更多的结果比简易版本具有更低的定位误差。此外，如图6C所示，似然融合方法的影响最为显着。虽然使用简易版本仍可获得许多具有平均准确度的结果，但SiFu却可大幅减少了错误。在中庭区域，由于WiDeep的定位误差和最大误差都很大，因此WiFi信号可能不适合定位。如图7所示，针对不同地点绘制了比较方案的实时性能。使用实线绘制的SiFu通常可以获得稳定且令人满意的性能。误差始终保持在较低水平，重要的是，不会出现大的波动。作为一个通用的定位解决方案，Google融合位置API并不是专门为示例测试地点所设计的。因此，预期上定位性能不如其他需要现场调查的比较方案。结果还表明，高变化度严重的破坏了用户体验。图7A显示在走廊区域中来自现有技术方法的类似性能。图7A表示在走廊区域中具有来自和现有技术方法的类似性能。所有方法的误差一般都很小，并具有可接受的波动。如图7B所示，在室内开放空间，结果相对较差。定位误差在步行结束时显着增加。然而，与其他工作相比，SiFu仍然具有最准确和最稳定的结果。此外，如图7C所示，观察到从指纹区域到非指纹区域平滑过渡的中庭区域。尽管用于定位的信号改变了，但是定位性能足够稳定，因此使得这种转变是不可察觉的。这证实了SiFu处理任意信号组合的能力。此外，研究了SiFu系统中不同参数对定位性能和计算效率的影响。用于计算似然的网格大小定义为相邻网格点之间的距离。图8A、图8B和图8C分别描绘了走廊区域、室内开放空间和中庭不同网格尺寸下的平均定位误差。总体来说，平均定位随着网格尺寸的增加而增加。计算网格中的每个参考位置都与一个指纹信号相关联。用指纹信号计算似然的目的是为了覆盖相邻区域。当网格大小较大时，指纹信号可能无法准确的反映网格邻域内可采样的信号。最终，导致似然计算将变得不正确。相比之下，更密集的网格包含更多与指纹信号相关的参考位置。这可能会更好地区分信号。例如，在粒子滤波器中，当网格尺寸较小时，附近的粒子可能具有明显的可能性，从而产生更精确的分布。网格尺寸大小对计算效率的影响如图9所示。随着网格尺寸的增大，计算时间呈下降趋势。这是合理的，因为稀疏网格意味着必须在更少的参考位置计算似然，因此需要较少的计算。因此，在更小的网格尺寸下获得更高的精度需要权衡，即计算效率。此外，结果表明SiFu系统的计算复杂度不高，因此该系统可以很容易地应用为实时定位系统。即使在较大的地点中，当磁场匹配空间是有限的而且每个模块不需要代价较高的计算时，计算时间也不会显着增加。在图10中，显示出了具有不同磁匹配范围之不同地点中的平均定位误差。从图中可以观察到V形，其中当范围太小或太大时，定位误差会变大。由于磁匹配空间受上次预测位置的限制，该位置只是上次设备/用户真实位置的近似值，当范围太小时，匹配空间可能无法覆盖当前真实位置。因此，在序列匹配过程中将忽略真实位置处的磁场，而结果将是无效的。另一方面，如果范围太大，匹配区域内的磁序列可能存在不确定性，这使得似然计算不准确。在这个例子中，最佳范围在9m左右，可以适应定位误差，同时限制搜索空间中的不确定性。图11瞄绘了不同磁场匹配范围下的平均计算时间。随着匹配范围的增加，计算时间呈线性增长趋势。这表明用于SiFu系统中磁场定位的DTW演算法之代价较高。当匹配空间较大时，需要匹配更多的磁场指纹图谱，其计算时间会急剧增加。而为了使SiFu系统可实时运行，应适当限制范围。考虑到定位精度，预设被设置为9m。图12绘制了具有不同σm之不同地点的平均定位误差。可观察到V的形状。磁场观测模型的灵敏度参数σm决定了可以容忍多少杂讯。如果其值太大，似然不能有效地区分位置，因为不同的信号仍然会得到相当高的似然。如果其值太小，即使采样信号与指纹信号有一点偏差，似然也会很低。由于杂讯容忍度较低，无法正确处理信号杂讯。这意味着，为了获得合理的位置估计，灵敏度参数σm不能太大或太小。此外，σw对不同地点定位性能的影响显示于图13。可以观察到类似于V的形状。这加强了σm的实验结果。事实上，σm和σw是SiFu系统中的两个重要参数，而结果解释了这两个参数的预设设置。最后，确定了具有稀疏WiFi采样的定位性能。图14显示了SiFu的平均误差和不同试验地点的比较方案。其结果与密集WiFi采样结果一致。使用较稀疏的WiFi采样，与可用的密集WiFi信号的情况相比，可以观察到，平均误差通常会增加。SiFu的误差增加远低于现有技术方案的误差增加。因此，它仍然是比较方案中最好的定位系统。此外，注意到SiFu中的加权方案比简易版本的SiFu提高了的定位性能。图15A、15B和15C描绘了稀疏WiFi采样情况下不同地点定位误差的累积分布。仅使用WiFi的WiDeep性能不佳，因为WiFi信号用于定位的频率较低。虽然FSW也考虑了磁场，但其性能仅略优于WiDeep。这可能是因为当某些信号不可用时，它不起作用。当WiFi信号不可用时，由于磁场的不确定性，仅使用磁场可能无法提供可接受的性能。相比之下，SiFu融合了更多的信号并整合了INS信号。即使遗失了一些信号，仍然可以大概准确地估计装置/用户位置。与密集WiFi采样情况类似，大多数结果都具有令人满意的定位误差。如本文所说且没有另外定义之术语“基本上substantially”，“基本的substantial”，“大约approximately”和“大约about”用于描述和说明小量变化。当与事件或情况一起使用时，这些术语可以包括事件或情况准确发生的实例以及事件或情况接近发生的实例。本领域技术人员基于本公开的教导，可以在不背离本发明的精神或范围的情况下实施替代的实施例。本发明的范围改变由以下权利要求所限定，其包含所有实施例及结合以上说明书和附图所进行的各种修改。插图不一定按比例绘制。由于制造工艺和公差，本发明中的艺术表现形式与实际装置之间可能存在区别。可能存在未具体说明的本发明的其他实施例。规范和图纸应被视为说明性的而不是限制性的。可以进行修改以使特定情况、材料、物质组成、方法或过程适应本公开的目的、精神和范围。所有这些修改旨在在所附权利要求的范围内。虽然本文公开的方法已经参考以特定顺序执行的特定操作来描述，但是应当理解，这些操作可以被组合、细分或重新排序以形成等效方法，而不脱离本公开的教导。因此，除非在此特别指出，否则操作的顺序和分组是不受限制。
