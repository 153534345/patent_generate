标题title
一种明渠的流量测量方法、系统、设备及存储介质
摘要abst
本发明提供一种明渠的流量测量方法、系统、设备及存储介质，方法包括：在正常供水时，建立待检测的明渠断面的CFD模型拟合得到所述明渠断面的流速场；基于所述流速场提取所述明渠断面流速场中数条测量垂线上的流速数据；根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律；实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量。通过建立CFD模型拟合明渠断面流速场，由流速场拟合断面流速分布规律曲线，通过更少的实测点的流速值，实现明渠断面流量的累积计算。可以显著减少实测工作量，并且流量测算结果稳定可靠，满足工程精度要求。
权利要求书clms
1.一种明渠的流量测量方法，其特征在于，包括：在正常供水时，建立待检测的明渠断面的CFD模型拟合得到所述明渠断面的流速场；基于所述流速场提取所述明渠断面流速场中数条测量垂线上的流速数据；根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律；实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量。2.如权利要求1所述的明渠的流量测量方法，其特征在于，所述在正常供水时，建立待检测的明渠断面的CFD数值模拟得到所述明渠断面的流速场的步骤包括：根据所述明渠的工程参数与实测流速、流量数据建立所述明渠断面的三维流体建模，其中，所述工程参数包括：所述明渠的水深、断面底宽及断面坡角度；基于所述三维流体建模计算得到所述明渠断面的CFD数值模拟；通过所述CFD数值模拟得到所述明渠断面的流速场。3.如权利要求1所述的明渠的流量测量方法，其特征在于，所述根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律的步骤包括：获取数条垂线的位置信息、流速信息；基于所述数条垂线的位置信息、流速信息及所述明渠断面的工程参数得到拟合的所述明渠断面的数条垂线横向间流速分布规律。4.如权利要求3所述的明渠的流量测量方法，其特征在于，所述基于所述数条垂线的位置信息、流速信息及所述明渠断面的工程参数得到拟合的所述明渠断面的数条垂线横向间流速分布规律的步骤包括：获取所述数条垂线上的流速；根据所述数条垂线上的流速计算得到所述数条垂线的平均流速；基于所述数条垂线上的流速和所述数条垂线的平均流速拟合得到所述数条垂线横向间流速分布规律。5.如权利要求4所述的明渠的流量测量方法，其特征在于，所述根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律的步骤还包括：基于所述数条垂线的平均流速以及所述明渠断面的工程参数计算得到所述明渠断面的横向平均流速分布规律；其中，所述明渠断面的工程参数包括：所述明渠断面的水面深度，所述数条垂线至所述明渠断面的水面与明渠壁面的交点的距离。6.如权利要求1至5任一项所述的明渠的流量测量方法，其特征在于，实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量包括：确定一个参考点并实测所述参考点的流速值；根据所述垂线流速分布规律得到所述参考点所在垂线的平均流速；基于所述参考点所在垂线的平均流速拟合所述明渠断面内数条垂线的平均流速；通过所述数条垂线的平均流速计算得到所述明渠断面的总流量。7.如权利要求6所述的明渠的流量测量方法，其特征在于，所述通过所述数条垂线的平均流速计算得到所述明渠断面的总流量的步骤包括：确定所述数条垂线划分得到的所述明渠断面的至少一个子区域；计算所述至少一个子区域内的垂线的平均流速；基于所述至少一个子区域的面积和对应的垂线的平均流速得到所述至少一个子区域的局部流量；将所述至少一个子区域的局部流量进行累加得到所述明渠断面的总流量。8.一种明渠的流量测量系统，其特征在于，包括：CFD模型建立模块，用于在正常供水时，建立待检测的明渠断面的CFD模型拟合得到所述明渠断面的流速场；提取模块，用于基于所述流速场提取所述明渠断面流速场中数条测量垂线上的流速数据；计算模块，用于根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律；所述计算模块还用于实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量。9.一种电子设备，其特征在于，包括：至少一个处理器；以及，与所述至少一个处理器通信连接的存储器；其中，所述存储器上存储有可被至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1至7任一项所述的明渠的流量测量方法的步骤。10.一种计算机存储介质，其特征在于，包括：所述计算机可读存储介质上存储有明渠的流量测量程序，所述明渠的流量测量程序被处理器执行时实现如权利要求1至7中任一项所述的明渠的流量测量方法的步骤。
说明书desc
技术领域本发明涉及水利工程技术领域，尤其涉及一种明渠的流量测量方法、系统、设备及存储介质。背景技术随着水资源短缺问题的日益严重，快速准确地的灌区明渠水流量测量具有重要的意义，目前水利工程上对明渠水流量的测量方法大多采用传统的方法，例如：流速-面积法、水位-流量关系法以及堰槽法等传统方法，但是采用传统的水流量测量方法，很多在测量时需要测量多点流速，操作繁琐，工作量大，并且如采用声学多普勒流速剖面仪，设备昂贵，不利于推广；亦或者根据简单的水位-流量测量精度较低，不能得到具有参考价值信息。由此，亟待一种实测工作量少，测量精度高，容易实现，结果稳定可靠，能满足工程精度的明渠流量测量方法。上述内容仅用于辅助理解本发明的技术方案，并不代表承认上述内容是现有技术。发明内容本发明的主要目的在于提供一种明渠的流量测量方法，旨在解决目前对于明渠水流量的测量，实测工作量大，测量结果精度不够不能满足工程精度的技术问题。为实现上述目的，本发明提供一种明渠的流量测量方法，包括：在正常供水时，建立待检测的明渠断面的CFD模型拟合得到所述明渠断面的流速场；基于所述流速场提取所述明渠断面流速场中数条测量垂线上的流速数据；根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律；实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量。优选地，所述在正常供水时，建立待检测的明渠断面的CFD数值模拟得到所述明渠断面的流速场的步骤包括：根据所述明渠的工程参数与实测流速、流量数据建立所述明渠断面的三维流体建模，其中，所述工程参数包括：所述明渠的水深、断面底宽及断面坡角度；基于所述三维流体建模计算得到所述明渠断面的CFD数值模拟；通过所述CFD数值模拟得到所述明渠断面的流速场。优选地，所述根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律的步骤包括：获取数条垂线的位置信息、流速信息；基于所述数条垂线的位置信息、流速信息及所述明渠断面的工程参数得到拟合的所述明渠断面的数条垂线横向间流速分布规律。优选地，所述基于所述数条垂线的位置信息、流速信息及所述明渠断面的工程参数得到拟合的所述明渠断面的数条垂线横向间流速分布规律的步骤包括：获取所述数条垂线上的流速；根据所述数条垂线上的流速计算得到所述数条垂线的平均流速；基于所述数条垂线上的流速和所述数条垂线的平均流速拟合得到所述数条垂线横向间流速分布规律。优选地，所述根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律的步骤还包括：基于所述数条垂线的平均流速以及所述明渠断面的工程参数计算得到所述明渠断面的横向平均流速分布规律；其中，所述明渠断面的工程参数包括：所述明渠断面的水面深度，所述数条垂线至所述明渠断面的水面与明渠壁面的交点的距离。优选地，实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量的步骤包括：确定一个参考点并实测所述参考点的流速值；根据所述垂线流速分布规律得到所述参考点所在垂线的平均流速；基于所述参考点所在垂线的平均流速拟合所述明渠断面内数条垂线的平均流速；通过所述数条垂线的平均流速计算得到所述明渠断面的总流量。优选地，所述通过所述数条垂线的平均流速计算得到所述明渠断面的总流量的步骤包括：确定所述数条垂线划分得到的所述明渠断面的至少一个子区域；计算所述至少一个子区域内的垂线的平均流速；基于所述至少一个子区域的面积和对应的垂线的平均流速得到所述至少一个子区域的局部流量；将所述至少一个子区域的局部流量进行累加得到所述明渠断面的总流量。此外，为了实现上述目的，本发明还提供了一种明渠的流量测量系统，包括：CFD模型建立模块，用于在正常供水时，建立待检测的明渠断面的CFD模型拟合得到所述明渠断面的流速场；提取模块，用于基于所述流速场提取所述明渠断面流速场中数条测量垂线上的流速数据；计算模块，用于根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律；所述计算模块还用于实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量。此外，为了实现上述目的，本发明还提供一种电子设备，包括：至少一个处理器；以及，与所述至少一个处理器通信连接的存储器；其中，所述存储器上存储有可被至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行如上述任一项所述的明渠的流量测量方法的步骤。此外，为了实现上述目的，本发明还提供一种计算机存储介质，其特征在于，包括：所述计算机可读存储介质上存储有明渠的流量测量程序，所述明渠的流量测量程序被处理器执行时实现如上述任一项所述的明渠的流量测量方法的步骤。本发明提供一种明渠的流量测量方法，包括：在正常供水时，建立待检测的明渠断面的CFD模型拟合得到所述明渠断面的流速场；基于所述流速场提取所述明渠断面流速场中数条测量垂线上的流速数据；根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律；实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量。通过建立三维计算流体力学模型获取明渠断面流速场，由流速场拟合断面流速分布规律曲线，结合相对传统方法更少的实测点的流速值，以实现明渠断面流量的累积计算。该方法可以显著减少实测工作量。并且该方法的流量测算结果稳定可靠，满足工程精度要求。附图说明图1是本发明实施例方案涉及的硬件运行环境的终端装置结构示意图；图2为本发明明渠流量测量方法方法一实施例的流程示意图；图3为图2中步骤S10的步骤的细化流程示意图；图4为图2中步骤S20的步骤的细化流程示意图；图5为CFD数值模拟流程图示意图；图6为CFD明渠断面垂线示意图；图7为本发明明渠流量测量方法第二实施例的流程示意图；图8为本发明明渠流量测量方法第三实施例的流程示意图；图9为图8中步骤S404的步骤的细化流程示意图；图10为明渠断面子区域划分示意图；图11为本发明一种明渠测量装置的结构示意图。本发明目的的实现、功能特点及优点将结合实施例，参照附图做进一步说明。具体实施方式应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。本发明实施例的主要解决方案是：在正常供水时，建立待检测的明渠断面的CFD模型拟合得到所述明渠断面的流速场；基于所述流速场提取所述明渠断面流速场中至少一条垂线流速分布；根据所述至少一条垂线流速分布得到所述明渠断面的垂线流速分布规律；实测所述明渠断面一个参考点的流速值并结合所述垂线流速分布规律得到所述明渠断面的总流量。由于现有技术中对明渠水流量测量的传统方法很多在测量时需要测量多点流速，操作繁琐，工作量大，并且如采用声学多普勒流速剖面仪，设备昂贵，不利于推广；亦或者根据简单的水位-流量测量精度较低，不能得到具有参考价值信息。由此，亟待一种实测工作量少，测量精度高，容易实现，结果稳定可靠，能满足工程精度的明渠流量测量方法。由此，本发明提供一种解决方案，通过建立维计算流体力学模型获取明渠断面流速场，由流速场拟合断面流速分布规律曲线，结合相对传统方法更少的实测点的流速值，以实现明渠断面流量的累积计算。该方法可以显著减少实测工作量。并且该方法的流量测算结果稳定可靠，满足工程精度要求。如图1所示，图1是本发明实施例方案涉及的硬件运行环境的终端结构示意图。本发明实施例终端可以是PC，也可以是智能手机、平板电脑、电子书阅读器、MP3播放器、MP4播放器、便携计算机等具有显示功能的可移动式终端设备。如图1所示，该终端可以包括：处理器1001，例如CPU，网络接口1004，用户接口1003，存储器1005，通信总线1002。其中，通信总线1002用于实现这些组件之间的连接通信。用户接口1003可以包括显示屏、输入单元比如键盘，可选用户接口1003还可以包括标准的有线接口、无线接口。网络接口1004可选的可以包括标准的有线接口、无线接口。存储器1005可以是高速RAM存储器，也可以是稳定的存储器，例如磁盘存储器。存储器1005可选的还可以是独立于前述处理器1001的存储装置。可选地，终端还可以包括摄像头、RF电路，传感器、音频电路、WiFi模块等等。其中，传感器比如光传感器、运动传感器以及其他传感器。具体地，光传感器可包括环境光传感器及接近传感器，其中，环境光传感器可根据环境光线的明暗来调节显示屏的亮度，接近传感器可在移动终端移动到耳边时，关闭显示屏和/或背光。作为运动传感器的一种，重力加速度传感器可检测各个方向上加速度的大小，静止时可检测出重力的大小及方向，可用于识别移动终端姿态的应用、振动识别相关功能等；当然，移动终端还可配置陀螺仪、气压计、湿度计、温度计、红外线传感器等其他传感器，在此不再赘述。本领域技术人员可以理解，图1中示出的终端结构并不构成对终端的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件布置。如图1所示，作为一种计算机存储介质的存储器1005中可以包括操作系统、网络通信模块、用户接口模块以及明渠的流量测量应用程序。在图1所示的终端中，网络接口1004主要用于连接后台服务器，与后台服务器进行数据通信；用户接口1003主要用于连接客户端，与客户端进行数据通信；而处理器1001可以用于调用存储器1005中存储的明渠的流量测量应用程序，并执行以下操作：在正常供水时，建立待检测的明渠断面的CFD模型拟合得到所述明渠断面的流速场；基于所述流速场提取所述明渠断面流速场中数条测量垂线上的流速数据；根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律；实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量。进一步地，处理器1001可以调用存储器1005中存储的明渠的流量测量应用程序，还执行以下操作：所述在正常供水时，建立待检测的明渠断面的CFD数值模拟得到所述明渠断面的流速场的步骤包括：根据所述明渠的工程参数与实测流速、流量数据建立所述明渠断面的三维流体建模，其中，所述工程参数包括：所述明渠的水深、断面底宽及断面坡角度；基于所述三维流体建模计算得到所述明渠断面的CFD数值模拟；通过所述CFD数值模拟得到所述明渠断面的流速场。进一步地，处理器1001可以调用存储器1005中存储的明渠的流量测量应用程序，还执行以下操作：所述根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律的步骤包括：获取数条垂线的位置信息、流速信息；基于所述数条垂线的位置信息、流速信息及所述明渠断面的工程参数得到拟合的所述明渠断面的数条垂线横向间流速分布规律。进一步地，处理器1001可以调用存储器1005中存储的明渠的流量测量应用程序，还执行以下操作：所述基于所述数条垂线的位置信息、流速信息及所述明渠断面的工程参数得到拟合的所述明渠断面的数条垂线横向间流速分布规律的步骤包括：获取所述数条垂线上的流速；根据所述数条垂线上的流速计算得到所述数条垂线的平均流速；基于所述数条垂线上的流速和所述数条垂线的平均流速拟合得到所述数条垂线横向间流速分布规律。进一步地，处理器1001可以调用存储器1005中存储的明渠的流量测量应用程序，还执行以下操作：所述根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律的步骤还包括：基于所述数条垂线的平均流速以及所述明渠断面的工程参数计算得到所述明渠断面的横向平均流速分布规律；其中，所述明渠断面的工程参数包括：所述明渠断面的水面深度，所述数条垂线至所述明渠断面的水面与明渠壁面的交点的距离。进一步地，处理器1001可以调用存储器1005中存储的明渠的流量测量应用程序，还执行以下操作：所述实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量的步骤包括：确定一个参考点并实测所述参考点的流速值；根据所述垂线流速分布规律得到所述参考点所在垂线的平均流速；基于所述参考点所在垂线的平均流速拟合所述明渠断面内数条垂线的平均流速；通过所述数条垂线的平均流速计算得到所述明渠断面的总流量。进一步地，处理器1001可以调用存储器1005中存储的明渠的流量测量应用程序，还执行以下操作：所述通过所述数条垂线的平均流速计算得到所述明渠断面的总流量的步骤包括：确定所述数条垂线划分得到的所述明渠断面的至少一个子区域；计算所述至少一个子区域内的垂线的平均流速；基于所述至少一个子区域的面积和对应的垂线的平均流速得到所述至少一个子区域的局部流量；将所述至少一个子区域的局部流量进行累加得到所述明渠断面的总流量。参照图2，本发明一种明渠的流量测量方法第一实施例提供一种明渠的流量测量方法方法，所述方法包括：步骤S10，在正常供水时，建立待检测的明渠断面的CFD模型拟合得到所述明渠断面的流速场；步骤S20，基于所述流速场提取所述明渠断面流速场中数条测量垂线上的流速数据；步骤S30，根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律；步骤S40，实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量。具体而言，CFD，英语全称，即计算流体动力学,是流体力学的一个分支，简称CFD。CFD是近代流体力学，数值数学和计算机科学结合的产物。是一门具有强大生命力的交叉科学。它以电子计算机为工具，应用各种离散化的数学方法，对流体力学的各类问题进行数值实验、计算机模拟和分析研究，以解决各种实际问题。在本实施例中，在明渠正常供水时，通过该明渠断面的工程参数以及历史实测流速、水流量数据，建立该明渠水流量的CFD模型并拟合得到该明渠断面的流速场。在所述明渠断面的流速场上提取该明渠断面上至少一个垂线上的流速，并通过计算、统计分析等手段计算得到垂线上流速分布规律，并计算该明渠断面上所有采集得到的垂线上的平均速度流速分布规律，由此即可得到经验拟合公式，此时，实测该明渠断面上的一个参考点的流速，并经过上述经验拟合公式即可得到该参考点所在垂线上的平均速度以及明渠断面上其他垂线的平均速度，基于此计算得出该明渠的水流量。由此，可以显著地减少实测的工作量，并且测量精度可靠。在本实施例中，通过在正常供水时，在正常供水时，建立待检测的明渠断面的CFD模型拟合得到所述明渠断面的流速场；基于所述流速场提取所述明渠断面流速场中数条测量垂线上的流速数据；根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律；实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量。利用三维流体力学模型获取明渠断面的流速场，通过明渠断面的流速场拟合得到明渠断面流速分布规律曲线，再结合更少的实测点的流速值，以实现对明渠断面流量的累计计算。该方法可以显著减少实测工作量，并且测量结果精确可靠能够满足工程精度的需求。进一步的，参照图3，本发明一种明渠的流量测量方法第二实施例提供一种明渠的流量测量方法，基于上述图2所示的实施例，所述步骤S10还包括：步骤S101，根据所述明渠的工程参数与实测流速、流量数据建立所述明渠断面的三维流体建模，其中，所述工程参数包括：所述明渠的水深、断面底宽及断面坡角度；步骤S102，基于所述三维流体建模计算得到所述明渠断面的CFD数值模拟；步骤S103，通过所述CFD数值模拟得到所述明渠断面的流速场。具体而言，如图3所示，在本实施例中对三维CFD数值模拟过程包括四个步骤：三维流体建模、网格划分、计算求解及后处理四个过程。具体地，使用三维建模软件根据该明渠的工程参数生成一个明渠的三维流体模型，使用ICEMCFD对明渠的三维流体模型的划分网格，作为专业的前处理软件ICEMCFD为所有世界流行的CAE软件提供高效可靠的分析模型。它拥有强大的CAD模型修复能力、自动中面抽取、独特的网格“雕塑”技术、网格编辑技术以及广泛的求解器支持能力。在此基础上，根据基本方程，以及明渠的边界条件，求解计算得到CFD数值模拟，并可以通过经过CFX-Pre软件后处理得到该明渠断面的拟合流速场。进一步地，本发明一种明渠的流量测量方法第二实施例提供一种明渠的流量测量方法，基于上述图2所示的实施例，所述步骤S20还包括：步骤S201，获取数条垂线的位置信息、流速信息；步骤S202，基于所述数条垂线的位置信息、流速信息及所述明渠断面的工程参数得到拟合的所述明渠断面的数条垂线横向间流速分布规律。所述步骤S202包括：步骤S2021，基于所述数条垂线的平均流速以及所述明渠断面的工程参数计算得到所述明渠断面的横向平均流速分布规律；步骤S2022，其中，所述明渠断面的工程参数包括：所述明渠断面的水面深度，所述数条垂线至所述明渠断面的水面与明渠壁面的交点的距离。具体而言，在本实施例中，如图4所示，将明渠的断面划分出多条测量垂线，并将获取该垂线的位置信息，再根据CFD模型的拟合流速信息以及该明渠的底宽、水深、坡面角度、以及水面与明渠壁面的交点位置等参数，通过CFD模型拟合得到该数条垂线的分布规律。垂线流速分布规律：对于工程中常见的梯形断面明渠，其垂线之间的流速存在着一定的分布规律，主要受到宽深比B/H，垂线位置的影响，相对速度u/v与相对水深y/H存在着一定的关系，分析断面流场分布规律及该领域应用经验，可以采用公式的对数函数拟合很好的拟合明渠中垂线的流速分布规律。式中u为某个点的实际流速，v为测量垂线的平均流速，y为测点到渠底的距离，H为水深，a，b为待定系数。横向平均流速分布规律：分析断面流场分布规律及该领域应用经验，横向垂线之间的平均流速采用公式的幂函数来拟合断面横向流速分布规律。式中ui为第i条测量垂线的平均流速；vm为中垂线的平均流速；B为水面宽度；Z为测量垂线到水面与明渠壁面交点之间的距离。通过前面步骤的CFD计算，得到某一个水深时的流速场，此时可以确定流速经验拟合公式、中的待定参数a、b、m、q、k。按以上步骤研究几组不同水深的流速分布规律，其他水深情况利用线性插值法确定待定参数。进一步地，本发明一种明渠的流量测量方法第三实施例提供一种明渠的流量测量方法，基于上述图2所示的实施例，所述步骤S40还包括：步骤S401，确定一个参考点并实测所述参考点的流速值；步骤S402，根据所述垂线流速分布规律得到所述参考点所在垂线的平均流速；步骤S403，基于所述参考点所在垂线的平均流速拟合所述明渠断面内数条条垂线的平均流速；步骤S404，通过所述数条垂线的平均流速计算得到所述明渠断面的总流量。具体而言，在本实施例中，通过在需要测量流量的明渠内选取一个参考作为实测点，实际测量该参考点的位置信息，水流速度以及然后利用上述步骤中计算得出的垂线的流速分布规律可以得出该点所在垂线的平均流速，接着利用垂线平均流速的横向流速分布规律就能得出其他垂线的平均流速，在结合垂线平均速度分布规律求得该明渠断面其他垂线的平均流速，以此计算得到该明渠断面的总流量。以此，通过实测一个参考点即可计算出该明渠断面的总流量，大大减少了实测工作。进一步地，参照图9，本发明一实施例还提出了一种明渠的流量测量方法，参照图8所述步骤S404还包括：步骤S4041，确定所述数条垂线划分得到的所述明渠断面的至少一个子区域；步骤S4042，计算所述至少一个子区域内的垂线的平均流速；步骤S4043，基于所述至少一个子区域的面积和对应的垂线的平均流速得到所述至少一个子区域的局部流量；步骤S4044，将所述至少一个子区域的局部流量进行累加得到所述明渠断面的总流量。具体而言，在本实施例中，参照图10，在所述明渠断面上提取多条垂线，该多条垂线将该明渠的断面划分为若干个小的子区域，通过采用前述步骤获得的流速分布规律，只需一个实测点的流速值就能完成该断面流量的测算。首先获取一点的实测流速，然后利用垂线的流速分布规律可以得出该点所在垂线的平均流速，接着利用垂线平均流速的横向流速分布规律就能得出其他垂线的平均流速，多条测量垂线将断面划分为多个区域，计算出各个垂线的平均速度与其对应的分块区域面积的乘积得出局部的流量，最后将各区域的流量如公式累加起来得到过水断面的总流量。其中：Si为第i分区的面积；Vi为第i条垂线的平均流速；n为分区的数量。以此通过实测一个参考点的流速信息、位置信息即可推算出整个明渠断面的流量总量，其显著地减少了人工测量的工作量，并且通过CFD对明渠进行三维建模可以对明渠相对精确的建模，最后得到明确断面流量相对精确，能满足工程要求。此外，根据某灌区的实测数据验证，相对传统方法更少的实测点的流速值，可实现明渠断面流量的相对精确计算。验证数据如下表，取某灌区梯形明渠数据，水深为2.8m，y为测点到渠底的距离；H为实际水深；y/H为相对水深；vr为实测点流速；Qr为实测流量；Qp为本发明测算流量；R为相对误差。表1流量实测值与本发明测算值对比验证结果表明，利用本发明方法测算的流量值与工程上实测的流量值误差在5％以内，符合工程精度要求。在该验证实例中，本发明只需要一个实测流速就能实现断面流量的测算，显著减少了实测工作量。此外，参照图11，本发明实施例还提出了一种明渠的流量测量系统，包括：CFD模型建立模块10，用于在正常供水时，建立待检测的明渠断面的CFD模型拟合得到所述明渠断面的流速场；提取模块20，基于所述流速场提取所述明渠断面流速场中数条测量垂线上的流速数据；计算模块30，根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律；所述计算模块30还用于实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量。此外，本发明实施例还提出了一种电子设备，包括：至少一个处理器；以及，与所述至少一个处理器通信连接的存储器；其中，所述存储器上存储有可被至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行如上述实施例中任一项所述的明渠的流量测量方法的步骤。此外，本发明实施例还提出一种计算机可读存储介质，所述计算机可读存储介质上存储有明渠的流量测量程序，所述明渠的流量测量程序被处理器执行时实现如下操作：在正常供水时，建立待检测的明渠断面的CFD模型拟合得到所述明渠断面的流速场；基于所述流速场提取所述明渠断面流速场中数条测量垂线上的流速数据；根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律；实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量。进一步地，所述明渠的流量测量程序被处理器执行时还实现如下操作：所述在正常供水时，建立待检测的明渠断面的CFD数值模拟得到所述明渠断面的流速场的步骤包括：根据所述明渠的工程参数与实测流速、流量数据建立所述明渠断面的三维流体建模，其中，所述工程参数包括：所述明渠的水深、断面底宽及断面坡角度；基于所述三维流体建模计算得到所述明渠断面的CFD数值模拟；通过所述CFD数值模拟得到所述明渠断面的流速场。进一步地，所述明渠的流量测量程序被处理器执行时还实现如下操作：所述根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律的步骤包括：获取数条垂线的位置信息、流速信息；基于所述数条垂线的位置信息、流速信息及所述明渠断面的工程参数得到拟合的所述明渠断面的数条垂线横向间流速分布规律。进一步地，所述明渠的流量测量程序被处理器执行时还实现如下操作：所述基于所述数条垂线的位置信息、流速信息及所述明渠断面的工程参数得到拟合的所述明渠断面的数条垂线横向间流速分布规律的步骤包括：获取所述数条垂线上的流速；根据所述数条垂线上的流速计算得到所述数条垂线的平均流速；基于所述数条垂线上的流速和所述数条垂线的平均流速拟合得到所述数条垂线横向间流速分布规律。进一步地，所述明渠的流量测量程序被处理器执行时还实现如下操作：所述根据所述数条垂线上的流速数据得到所述数条垂线上的流速分布及所述数条垂线横向间流速分布规律进而得到所述明渠断面的流速分布规律的步骤还包括：基于所述数条垂线的平均流速以及所述明渠断面的工程参数计算得到所述明渠断面的横向平均流速分布规律；其中，所述明渠断面的工程参数包括：所述明渠断面的水面深度，所述数条垂线至所述明渠断面的水面与明渠壁面的交点的距离。进一步地，所述明渠的流量测量程序被处理器执行时还实现如下操作：实测所述明渠断面一个参考点的流速值并结合所述流速分布规律计算所述明渠断面的总流量的步骤包括：确定一个参考点并实测所述参考点的流速值；根据所述垂线流速分布规律得到所述参考点所在垂线的平均流速；基于所述参考点所在垂线的平均流速拟合所述明渠断面内数条垂线的平均流速；通过所述数条垂线的平均流速计算得到所述明渠断面的总流量。进一步地，所述明渠的流量测量程序被处理器执行时还实现如下操作：所述通过所述数条垂线的平均流速计算得到所述明渠断面的总流量的步骤包括：确定所述数条垂线划分得到的所述明渠断面的至少一个子区域；计算所述至少一个子区域内的垂线的平均流速；基于所述至少一个子区域的面积和对应的垂线的平均流速得到所述至少一个子区域的局部流量；将所述至少一个子区域的局部流量进行累加得到所述明渠断面的总流量。需要说明的是，在本文中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者系统不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者系统所固有的要素。在没有更多限制的情况下，由语句“包括一条……”限定的要素，并不排除在包括该要素的过程、方法、物品或者系统中还存在另外的相同要素。上述本发明实施例序号仅仅为了描述，不代表实施例的优劣。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到上述实施例方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在如上所述的一条存储介质中，包括若干指令用以使得一台终端设备执行本发明各个实施例所述的方法。以上仅为本发明的优选实施例，并非因此限制本发明的专利范围，凡是利用本发明说明书及附图内容所作的等效结构或等效流程变换，或直接或间接运用在其他相关的技术领域，均同理包括在本发明的专利保护范围内。
