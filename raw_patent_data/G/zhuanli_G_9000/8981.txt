标题title
一种电子签署工作流引擎生成方法和更新包嵌入方法
摘要abst
本发明涉及电子签署技术领域中的一种电子签署工作流引擎生成方法和更新包嵌入方法，包括以下步骤：获取flowable开发的jar包，并根据jar包获取流程定义服务、任务服务、表单服务和识别服务；通过流程定义服务增加电子签署环节，并在电子签署环节内增加电子签署信息；将电子签署环节的电子签署信息通过转换器转换为工作流引擎的电子签署信息，得到转换信息，并通过任务服务补充电子签署环节与工作流引擎的操作接口；通过表单服务建立电子签署环节与工作流引擎的地址关联，并通过识别服务定义电子签署环节的处理人，形成电子签署工作流引擎，具有节约时间成本的优点，突破了工作流引擎不支持电子签署的瓶颈。
权利要求书clms
1.一种电子签署工作流引擎生成方法，其特征在于，包括以下步骤：获取flowable开发的jar包，并根据所述jar包获取流程定义服务、任务服务、表单服务和识别服务；通过所述流程定义服务增加电子签署环节，并在所述电子签署环节内增加电子签署信息；将电子签署环节的电子签署信息通过转换器转换为工作流引擎的电子签署信息，得到转换信息，并通过所述任务服务补充电子签署环节与工作流引擎的操作接口；通过所述表单服务建立电子签署环节与工作流引擎的地址关联，并通过识别服务定义电子签署环节的处理人，形成电子签署工作流引擎。2.根据权利要求1所述的一种电子签署工作流引擎生成方法，其特征在于，所述电子签署信息包括第一属性、第一基础数据和第一表单。3.根据权利要求2所述的一种电子签署工作流引擎生成方法，其特征在于，所述转换信息包括第二属性、第二基础数据和第二表单。4.根据权利要求3所述的一种电子签署工作流引擎生成方法，其特征在于，将电子签署环节的电子签署信息通过转换器转换为工作流引擎的电子签署信息，包括以下步骤：将所述第一属性通过转换器转换为第二属性；将所述第一基础数据通过转换器转换为第二基础数据；将所述第一表单通过转换器转换为第二表单。5.根据权利要求1所述的一种电子签署工作流引擎生成方法，其特征在于，所述操作接口包括签署表单页面的接口、编辑签署页面的接口、保存签署页面的接口、提交签署页面的接口。6.根据权利要求1所述的一种电子签署工作流引擎生成方法，其特征在于，通过所述表单服务建立电子签署环节与工作流引擎的地址关联，包括以下步骤：获取第二表单的表单地址，并通过表单地址与第二表单的签署页面进行关联。7.根据权利要求1所述的一种电子签署工作流引擎生成方法，其特征在于，还包括以下步骤：将增加电子签署信息后的电子签署环节打包，生成更新包。8.根据权利要求7所述的一种电子签署工作流引擎生成方法，其特征在于，所述更新包包括xml文件包和SDK文件包。9.一种更新包嵌入方法，其特征在于，包括以下步骤：使用所述更新包对工作流引擎进行更新；判断工作流引擎是否具有前端在线绘制能力，若是，则在前端绘制功能中补充电子签署环节图元；若否，则直接调用SDK文件包，并启用工作流引擎流程；重启工作流引擎服务，同时绘制工作流引擎流程，并验证工作流引擎流程是否正确，若否，则修改工作流引擎流程，并启用工作流引擎流程；若是，则启用工作流引擎流程。10.根据权利要求9所述的一种更新包嵌入方法，其特征在于，使用所述更新包对工作流引擎进行更新，包括以下步骤：将xml文件包进行解析，形成工作流引擎可识别的格式；在工作流引擎的能力源码中依赖所述SDK文件包。11.一种电子签署工作流引擎生成系统，其特征在于，包括获取模组、流程定义模组、转换模组、任务服务模组、表单服务模组和识别模组；所述获取模组用于获取flowable开发的jar包，并根据所述jar包获取流程定义服务、任务服务、表单服务和识别服务；所述流程定义模组用于增加电子签署环节，并在所述电子签署环节内增加电子签署信息；所述转换模组用于将电子签署环节的电子签署信息转换为工作流引擎的电子签署信息，得到转换信息；所述任务服务模组用于补充电子签署环节与工作流引擎的操作接口；所述表单服务模组用于建立电子签署环节与工作流引擎的地址关联；所述识别模组用于定义电子签署环节的处理人，形成电子签署工作流引擎。12.一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，其特征在于，所述计算机程序被处理器执行时，执行权利要求1-8任意一项所述的电子签署工作流引擎生成方法。
说明书desc
技术领域本发明涉及电子签署技术领域，具体涉及一种电子签署工作流引擎生成方法和更新包嵌入方法。背景技术随着电子签名法实施推进，电子签名已经应用到企业、事业单位各个场景当中，例如劳动合同新签、续签、竞业协议、保密协议、期权授予协议、各类人力资源证明材料、合同签订、协议签订、商家入驻协议、采购协议、销售协议、报价单、供应链融资协议等，从而解决用户在纸质合同及协议等线下签署带来的高昂纸张成本、打印成本、异地签署的快递成本，以及纸制签署时间效率成本等。目前在各个企业、事业单位在应用电子签名的时候一般都需要与企业基于工作流引擎的业务审批流程结合起来使用，但对接时都需要投入大量的人力和时间成本完成该项任务，对于目前市场中众多的工作流引擎而言，比较有代表性的如JBPM、Activiti、Flowable等，这些工作流引擎只支持常规公共的流程环节，如开始、结束、发起审批、审批、并行会签、串行会签、分支、子流程、加签、待办，但无法在使用流程当中直接完成电子签署的目的。发明内容本发明针对现有技术中的缺点，提供了一种电子签署工作流引擎生成方法和更新包嵌入方法，具有节约时间成本的优点，突破了工作流引擎不支持电子签署的瓶颈。为了解决上述技术问题，本发明通过下述技术方案得以解决：一种电子签署工作流引擎生成方法，包括以下步骤：获取flowable开发的jar包，并根据所述jar包获取流程定义服务、任务服务、表单服务和识别服务；通过所述流程定义服务增加电子签署环节，并在所述电子签署环节内增加电子签署信息；将电子签署环节的电子签署信息通过转换器转换为工作流引擎的电子签署信息，得到转换信息，并通过所述任务服务补充电子签署环节与工作流引擎的操作接口；通过所述表单服务建立电子签署环节与工作流引擎的地址关联，并通过识别服务定义电子签署环节的处理人，形成电子签署工作流引擎。可选的，所述电子签署信息包括第一属性、第一基础数据和第一表单。可选的，所述转换信息包括第二属性、第二基础数据和第二表单。可选的，将电子签署环节的电子签署信息通过转换器转换为工作流引擎的电子签署信息，包括以下步骤：将所述第一属性通过转换器转换为第二属性；将所述第一基础数据通过转换器转换为第二基础数据；将所述第一表单通过转换器转换为第二表单。可选的，所述操作接口包括签署表单页面的接口、编辑签署页面的接口、保存签署页面的接口、提交签署页面的接口。可选的，通过所述表单服务建立电子签署环节与工作流引擎的地址关联，包括以下步骤：获取第二表单的表单地址，并通过表单地址与第二表单的签署页面进行关联。可选的，还包括以下步骤：将增加电子签署信息后的电子签署环节打包，生成更新包。可选的，所述更新包包括xml文件包和SDK文件包。一种更新包嵌入方法，包括以下步骤：使用所述更新包对工作流引擎进行更新；判断工作流引擎是否具有前端在线绘制能力，若是，则在前端绘制功能中补充电子签署环节图元；若否，则直接调用SDK文件包，并启用工作流引擎流程；重启工作流引擎服务，同时绘制工作流引擎流程，并验证工作流引擎流程是否正确，若否，则修改工作流引擎流程，并启用工作流引擎流程；若是，则启用工作流引擎流程。可选的，使用所述更新包对工作流引擎进行更新，包括以下步骤：将xml文件包进行解析，形成工作流引擎可识别的格式；在工作流引擎的能力源码中依赖所述SDK文件包。一种电子签署工作流引擎生成系统，包括获取模组、流程定义模组、转换模组、任务服务模组、表单服务模组和识别模组；所述获取模组用于获取flowable开发的jar包，并根据所述jar包获取流程定义服务、任务服务、表单服务和识别服务；所述流程定义模组用于增加电子签署环节，并在所述电子签署环节内增加电子签署信息；所述转换模组用于将电子签署环节的电子签署信息转换为工作流引擎的电子签署信息，得到转换信息；所述任务服务模组用于补充电子签署环节与工作流引擎的操作接口；所述表单服务模组用于建立电子签署环节与工作流引擎的地址关联；所述识别模组用于定义电子签署环节的处理人，形成电子签署工作流引擎。一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序被处理器执行时，执行上述任意一项所述的电子签署工作流引擎生成方法。采用本发明提供的技术方案，与现有技术相比，具有如下有益效果：通过在工作流引擎内嵌入电子签署环节，在保证了工作流引擎相同使用习惯上，增加了电子签署功能，使用操作简单的同时，减少了纸质签署文件的投入成本，且提高了签署文件的效率，同时通过电子签署环节嵌入的方法，减小了对业务的侵入性，耦合性更低，降低了用户使用具有电子签署功能的流程引擎的开发成本以及维护成本。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例提出的一种电子签署工作流引擎生成方法的流程图；图2为本发明实施例提出的一种更新包嵌入方法的嵌入流程图；图3为本发明实施例提出的一种电子签署工作流引擎生成方法的电子签署业务流程图。具体实施方式下面结合实施例对本发明做进一步的详细说明，以下实施例是对本发明的解释而本发明并不局限于以下实施例。实施例一如图1所示，一种电子签署工作流引擎生成方法，包括以下步骤：获取flowable开发的jar包，并根据jar包获取流程定义服务、任务服务、表单服务和识别服务，flowable为一个工作流引擎，且该工作流引擎只包含开始、结束、发起审批、审批、并行会签、串行会签、分支、子流程、加签、待办等流程环节，flowable通过进程引擎配置、过程引擎、流程定义服务、历史服务、运行时服务、管理服务、任务服务、表单服务、识别服务提供了工作流引擎的基础能力，因此首先从flowable开发的jar包内获取流程定义服务、任务服务、表单服务和识别服务。通过流程定义服务增加电子签署环节，并在电子签署环节内增加电子签署信息，电子签署信息包括第一属性、第一基础数据和第一表单，其中，第一属性包括电子签署环节的名称、类型及编码，在本实施例中，第一属性所体现的是一个变量，即在实际使用生成流程时，在不同的电子签署环节赋值不同的名称、类型及编码；第一基础数据包括电子签署环节的处理人类型范围以及可操作的环节按钮范围；第一表单为在进行电子签署时的页面，而该页面包括签署人的信息、在线签署的文件以及可用于签署的印章等信息，从而完成电子签署环节的构建。将电子签署环节的电子签署信息通过转换器转换为工作流引擎的电子签署信息，得到转换信息，其中，转换信息包括第二属性、第二基础数据和第二表单，具体的，包括以下步骤：将第一属性通过转换器转换为第二属性；将第一基础数据通过转换器转换为第二基础数据；将第一表单通过转换器转换为第二表单。为实现所构造的电子签署环节与flowable工作流引擎的匹配与转换，需通过转换器将电子签署环节的电子签署信息转化为能够在flowable工作流引擎运行的电子签署信息，即得到转换信息，例如将电子签署环节的名称转换为工作流引擎的环节名称、将电子签署环节的编码转换为工作流引擎的环节编码、将电子签署环节的表单地址转换为工作流引擎的表单地址、将电子签署环节的处理人类型转换为工作流引擎的处理人类型等。通过任务服务补充电子签署环节与工作流引擎的操作接口，操作接口包括签署表单页面的接口、编辑签署页面的接口、保存签署页面的接口、提交签署页面的接口，在完成电子签署环节与flowable工作流引擎的匹配后，通过任务服务中的UserTaskJsonConverter类，补充电子签署环节的表单的操作接口，从而达到查询、验收、完成、删除、变更等流程的变量。通过表单服务建立电子签署环节与工作流引擎的地址关联，具体地，获取第二表单的表单地址，并通过表单地址与第二表单的签署页面进行关联，从而通过表单地址建立工作流引擎与电子签署环节页面的关联连接，同时，通过使用表单服务可以存取任务审批相关的表单数据、外置表单数据等一系列与表单相关的服务接口。通过识别服务定义电子签署环节的处理人，形成电子签署工作流引擎，电子签署环节的处理人为具体流程环节的驱动者，电子签署环节在工作流引擎内的流转依托于电子签署环节的处理人，而电子签署环节可以设置多个处理人，当多个处理人完成签署时，电子签署环节结束并自动进入下一环节，当完成处理人的定义后，即完成了电子签署环节嵌入flowable工作流引擎，从而生成具有电子签署功能的电子签署工作流引擎。一种电子签署工作流引擎生成方法，还包括以下步骤：将增加电子签署信息后的电子签署环节打包，生成更新包，更新包包括xml文件包和SDK文件包。在实际应用时，为方便工作流引擎升级为电子签署工作流引擎，生成更新包，而更新包中的xml文件包可直接导入，xml文件包内容主要包含环节名称、环节编码、环节类型、表单地址、处理人类型和环节按钮，用于增加电子签署环节，在与原工作流引擎结合时，例如flowable工作流引擎，导入xml文件包后会在工作流引擎的流程设计中增加新的环节分类节点，基于该节点在流程配置中进行选择配置应用到实际的业务中，从而完成xml文件包的基础数据准备，然后依赖SDK文件包提供电子签署相关的能力，从而通过增加的flowable，基于flowable引擎的能力进行工作流引擎的流程驱动，当流程流转到电子签署环节后，就可以调用SDK包的电子签署的能力，实现流程与电子签署的结合。而SDK包则包含了公司电子签署的后端服务接口以及签署时使用的页面，从而针对无工作流引擎的用户，可直接提供整体的工作流引擎服务，针对已使用flowable的用户，支持电子签署环节能力的升级。实施例二如图2所示，一种更新包嵌入方法，包括以下步骤：使用更新包对工作流引擎进行更新，具体的，将xml文件包进行解析，形成工作流引擎可识别的格式；在工作流引擎的能力源码中依赖SDK文件包。在实际应用时，当用户使用的工作流引擎为flowable，且结合自身流程引擎要实现电子签署在线审批、签署能力时，首先使用更新包对用户自身的工作流引擎进行更新，具体的，先将xml文件包进行解析，形成用户的流程引擎可识别的格式，多数情况下xml格式本身即为可以识别，若xml格式不可识别，则转换成bpmn格式的文件，然后在用户的工作引擎能力源码中依赖SDK文件包，其中SDK文件包为jar包格式。判断工作流引擎是否具有前端在线绘制能力，若是，则在前端绘制功能中补充电子签署环节图元；若否，则直接调用SDK文件包，并启用工作流引擎流程。当完成工作流引擎更新后，对用户的工作流引擎通过在线绘制页面补充电子签署环节图元，补充好后与导入的SDK文件包所提供的电子签署环节接口进行对接匹配，若客户方无在线绘制页面，则直接调用依赖的SDK文件包中的方法。重启工作流引擎服务，同时绘制工作流引擎流程，并验证工作流引擎流程是否正确，若否，则修改工作流引擎流程，并启用工作流引擎流程；若是，则启用工作流引擎流程。完成电子签署环节接口的对接匹配后，重新启动与工作流引擎能力相关的服务，用户的工作流引擎中就完成增加了电子签署环节。如图3所示，当用户在含有电子签署环节的业务系统中操作某一业务功能流程时，点击发起表单审批按钮，业务功能通过流程表单框架触发调用流程模板接口触发该流程实例的生成、启动、加载业务表单，当前流程任务节点处理填写好表单点击流程表单框架中的提交按钮时，工作流引擎将自动触发此前已设定好的流程环节，提交到下一环节。当下一环节为电子签署环节时，将根据用户传入的待签署PDF自动的调用公司的电子签署服务能力SaaS API接口，加载电子签署服务页面，此时，签署用户尚未进行实名认证，该页面将自动跳转至实名认证页面，只有完成实名认证的用户，才能在该签署页面中完成签署。当用户完成电子签署后，电子签署环节将自动跳转至下一待签署用户，依次完成签署动作，其中，若签署环节为两家以上企业，则通过串行会签或并行会签进行流转，从而当待签署人均完成签署后，工作流引擎自动流转至下一流程环节，至此完成电子签署过程。实施例三一种电子签署工作流引擎生成系统，包括获取模组、流程定义模组、转换模组、任务服务模组、表单服务模组和识别模组；获取模组用于获取flowable开发的jar包，并根据jar包获取流程定义服务、任务服务、表单服务和识别服务；流程定义模组用于增加电子签署环节，并在电子签署环节内增加电子签署信息；转换模组用于将电子签署环节的电子签署信息转换为工作流引擎的电子签署信息，得到转换信息；任务服务模组用于补充电子签署环节与工作流引擎的操作接口；表单服务模组用于建立电子签署环节与工作流引擎的地址关联；识别模组用于定义电子签署环节的处理人，形成电子签署工作流引擎。首先通过获取模组获取工作流引擎的jar包，然后流程定义模组将电子签署环节增加至工作流引擎中，从而在原始的工作流引擎中加入电子签署环节，并在电子签署环节内补充电子签署环节的属性、基础数据、和表单，从而构建完整的电子签署环节，然后通过转换模组将电子签署环节与flowable工作流引擎的进行匹配与转换，再使用任务服务模组补充电子签署环节的操作接口以及使用识别模组定义电子签署环节的处理人，从而完成电子签署工作流引擎的构建。一种计算机可读存储介质，计算机可读存储介质存储有计算机程序，计算机程序被处理器执行时，执行上述任意一项的电子签署工作流引擎生成方法。计算机可读存储介质的更具体的例子可以包括但不限于：具有一个或多个导线段的电连接、便携式计算机磁盘、硬盘、随机访问存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑磁盘只读存储器、光存储器件、磁存储器件、或者上述的任意合适的组合。在本申请中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用。而在本申请中，计算机可读的信号介质可以包括在基带中或者作为载波一部分传播的数据信号，其中承载了计算机可读的程序代码。这种传播的数据信号可以采用多种形式，包括但不限于电磁信号、光信号或上述的任意合适的组合。计算机可读的信号介质还可以是计算机可读存储介质以外的任何计算机可读介质，该计算机可读介质可以发送、传播或者传输用于由指令执行系统、装置或者器件使用或者与其结合使用的程序。计算机可读介质上包含的程序代码可以用任何适当的介质传输，包括但不限于：无线段、电线段、光缆、RF等等，或者上述的任意合适的组合。在本申请所提供的几个实施例中，应该理解到，所揭露的装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述模块、模组或单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元、模组或组件可以结合或者可以集成到另一个装置，或一些特征可以忽略，或不执行。所述单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是一个物理单元或多个物理单元，即可以位于一个地方，或者也可以分布到多个不同地方。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本发明各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。特别地，根据本发明公开的实施例，上文参考流程图描述的过程可以被实现为计算机软件程序。例如，本公开的实施例包括一种计算机程序产品，其包括承载在计算机可读介质上的计算机程序，该计算机程序包含用于执行流程图所示的方法的程序代码。在这样的实施例中，该计算机程序可以通过通信部分从网络上被下载和安装，和/或从可拆卸介质被安装。在该计算机程序被中央处理单元执行时，执行本申请的方法中限定的上述功能。需要说明的是，本申请上述的计算机可读介质可以是计算机可读信号介质或者计算机可读存储介质或者是上述两者的任意组合。计算机可读存储介质例如可以是但不限于电、磁、光、电磁、红外线段、或半导体的系统、装置或器件，或者任意以上的组合。附图中的流程图和框图，图示了按照本发明各种实施例的系统、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段、或代码的一部分，该模块、程序段、或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个接连地表示的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行规定的功能或操作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。以上所述，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，任何在本发明揭露的技术范围内的变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以所述权利要求的保护范围为准。
