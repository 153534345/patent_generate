标题title
一种基于光路转换的机房智能巡检系统及方法
摘要abst
本发明涉及一种基于光路转换的机房智能巡检系统及方法。本发明所述的机房智能巡检系统包括光路转换单元、巡检机器人和处理器，其中光路转换单元用于将位于不同位置的待检指示灯的光转换至同一高度上输出，所述巡检机器人用于沿预设路线采集光路转换单元输出的光，所述处理器用于存储光路转换单元输出的光信号与待检指示灯之间的对应关系以及从巡检机器人采集的图像中识别光路转换单元输出的光信号从而判断对应待检指示灯的亮灯状态和其所属设备的状态。本发明所述的基于光路转换的机房智能巡检系统及方法具有简化图像采集过程以及提高指示灯识别的效率和准确率的优点。
权利要求书clms
1.一种机房智能巡检系统，其特征在于，包括光路转换单元、巡检机器人和处理器；所述光路转换单元将各待检设备的待检指示灯的光信号转换至统一位置及方向和高度上输出，所述巡检机器人在固定的高度上对光转换单元输出的光信号进行图像采集后将图像传输至处理器，所述处理器对所述图像进行识别并进一步判断每个待检指示灯所属设备的状态。2.根据权利要求1所述的机房智能巡检系统，其特征在于，所述光路转换单元包括光纤、采光窗和观测窗；所述光纤的两端分别插入采光窗和观测窗。3.根据权利要求2所述的机房智能巡检系统，其特征在于，所述采光窗为半包围结构，其开口外缘设有吸盘。4.根据权利要求3所述的机房智能巡检系统，其特征在于，所述采光窗不透光。5.根据权利要求2所述的机房智能巡检系统，其特征在于，所述观测窗包括半包围结构的遮光罩。6.根据权利要求5所述的机房智能巡检系统，其特征在于，所述观测窗还包括光扩散膜，所述光扩散膜覆盖于所述遮光罩的开口。7.根据权利要求5所述的机房智能巡检系统，其特征在于，所述光路转换单元包括至少两个光纤、至少两个采光窗和一个观测窗，每个观测窗通过隔板分割出若干独立的观测区，每个光纤的一端分别插入一采光窗，每个光纤的另一端插入该观测窗并位于独立的观测区内。8.根据权利要求2~7任一项所述的机房智能巡检系统，其特征在于，所述处理器包括存储模块和分析单元；所述存储模块用于存储待检指示灯数据库，其包括待检指示灯编号、待检指示灯类型、待检指示灯的不同颜色及其对应状态、待检指示灯所属设备编号及其位置、待检指示灯对应的观测编号，其中所述观测编号为对每个待检指示灯所对应的观测窗或观测区在巡检过程中的被采集次序而赋予的唯一编号；所述分析单元包括识别模块、运算模块和判断模块；其中所述识别模块用于在所述巡检机器人采集的图像中识别每个观测窗或观测区的位置及其输出的光信号的亮度和颜色；所述运算模块根据图像的采集时间以及图像中所述观测窗或观测区的位置确定其观测编号，并将运算模块中得到的观测编号与待检指示灯数据库中的数据进行匹配，获得其对应的待检指示灯信息；所述判断模块根据识别模块中获得的亮度和颜色与待检指示灯数据库中对应指示灯的颜色状态进行对比，从而判断出对应待检设备的状态。9.根据权利要求8所述的机房智能巡检系统，其特征在于，所述处理器还包括报告生成模块，且所述存储模块还用于存储巡检日志；其中所述巡检日志包括每次巡检的巡检时间和巡检结果；所述报告生成模块将分析单元获得的对每个待检指示灯以及待检设备的状态判断结果整合成巡检结果，并将其与巡检时间一起生成巡检日志，再将所述巡检日志存储至所述存储模块中。10.根据权利要求9所述的机房智能巡检系统，其特征在于，所述处理器还包括警报单元，当判断模块判断待检设备异常状况时，触发所述警报单元向运维人员发送异常通知。
说明书desc
技术领域本发明涉及巡检技术领域，特别是涉及一种机房巡检系统及方法。背景技术随着信息科技的发展，各行业的日常业务开展对计算机硬件设备的依赖越来越大，因此十分需要保障计算机硬件设备的安全稳定运行。请参考图1，其为常见的需要进行巡检的机房状态示意图，机房中常设有若干排机柜，每一排都由数个机柜排列而成，每一个机柜都可叠放一个或多个待检设备，而待检设备则在面板上设置指示灯对设备的运行状态进行指示。在传统的设备运维方式中，通常是通过安排人员在机房内对设备进行巡检，通过检查设备面板上指示灯的亮灭以及亮灯颜色来判断设备状态。但由于人工巡检的工作负担大、容易出现漏检、误检现象，目前已有将机器人技术应用到设备巡检领域，通过机器人在机柜间巡逻并拍摄设备面板上的指示灯图像再进一步通过图像识别技术判断设备状态，从而代替人工巡检的做法。请参考图2，其为单排机柜1和设备2摆放状态的示意图。由于待检设备2通常被层叠摆放在机柜1内，且不同的设备指示灯21的排列方式也各有差异，因此同一排机柜甚至是同一机柜内需要检查的指示灯21常常分布在不同的水平高度上，因而巡检机器人在有限的空间内需要通过多次不同位置的拍摄才能够完全采集同一机柜中所有待检指示灯的图像。另外，由于一些设备在前后面板均有设置指示灯，巡检机器人进行巡检的时候通常需要规划兼顾设备前后面板的路线，而且在采集后面板的图像时还时常会被机柜背板阻挡。针对该问题，目前的一种主流解决方案是在采集过程中改变巡检机器人的摄像头的高度来完成不同高度上的图像采集。但是，该方法需要在巡检机器人上设置专门的升降装置以及对应的控制设备，其大大增加了巡检机器人的制造成本。而且，在使用升降的方式进行图像采集的过程中，巡检机器人需要停留在同一地面位置进行升降才能完成对该地面位置中的不同高度的所有待检指示灯的图像采集过程，其大大增加了图像采集的时间，降低了巡检效率。而另一种解决方案是通过在巡检机器人上设置多个处于不同高度的摄像头以同时采集不同高度的图像，这种结构可以避免使用升降装置，但需要更多的摄像头，同样会增加巡检机器人的制造成本；并且有些机柜高于机房的门洞高度，使得固定拍摄高度的巡检机器人的应用受限。并且，上述两种方案中获得的图像均是包含不同高度的设备面板的图像，这可能存在一个指示灯被分割在两个独立的图像中的情况，因此，采用这两种方案进行图像采集后，往往还需要将在同一个地面位置的不同高度上采集到的图像先拼接成完整图像，然后才能将其用于后续的图像识别。这也增加了运算负担，并且增加了每次巡检的时间成本。再者，在现有的机器人巡检方案中采集到的图像通常是整个设备面板的图像，因此还需要利用图像识别算法在图像中识别出指示灯的分布位置，才能进一步对指示灯的亮度和颜色进行识别。但是由于机房中的待检设备种类繁多且来自多个不同厂商，指示灯在每种设备上都有不同的分布方式，如果要实现在图像中识别指示灯的位置就要预先采集不同设备的面板图像并通过大量训练才能得到可以通过图像识别实现判断指示灯位置的识别模型，该过程浪费大量人力物力和时间；而为了避免上述模型训练过程，在另外一些处理方法中，人们通过在设备面板上贴标签等方式提示设备类型、设备型号，从而在图像识别过程中可以先对标签进行识别，再通过位置计算或者是调用模板等方式识别出指示灯在图像中的位置，但此方法会增加图像识别中对标签进行识别的步骤，从而增加运算负担。除此之外，某些设备面板上还会有与待检指示灯形状或颜色相近的色块，容易导致识别准确率的降低从而使巡检出现漏检或误检。因此，有必要提供一种新的机房巡检系统和方法以解决上述问题。发明内容基于此，本发明的目的在于，提供一种机房智能巡检系统及方法，其具有简化图像采集过程以及提高指示灯识别的效率和准确率的优点。一种机房智能巡检系统，包括光路转换单元、巡检机器人和处理器；所述光路转换单元将各待检设备的待检指示灯的光信号转换至统一位置及方向和高度上输出，所述巡检机器人在固定的高度上对光转换单元输出的光信号进行图像采集后将图像传输至处理器，所述处理器对所述图像进行识别并进一步判断每个待检指示灯所属设备的状态。本发明所述的机房智能巡检系统，具有降低指示灯本身在设备的分布方式对图像采集过程的影响以及简化指示灯的图像识别过程从而提高识别的效率和准确率的作用。进一步地，所述光路转换单元包括光纤、采光窗和观测窗；所述光纤的两端分别插入采光窗和观测窗。其中所述采光窗可辅助光纤采集待检指示灯的光信号，所述观测窗可辅助光纤将所述光信号在统一的方向和高度上输出。进一步地，所述光路转换单元的采光窗为半包围结构，其开口外缘设有吸盘。其中所述采光窗可以盖设于待检指示灯上，插入其中的光纤即可采集到对应的待检指示灯发出的光信号，而所述吸盘则可以在不损伤设备的情况下实现采光窗在设备面板上的固定和移除。进一步地，所述光路转换单元的的采光窗不透光。不透光的采光窗可以保证光纤只采集到其对应的唯一的待检指示灯的光信号，而不会被环境中的其他光线所干扰。进一步地，所述光路转换单元的的观测窗包括半包围构的遮光罩。所述遮光罩可以防止环境光对插入所述观测窗的光纤末端所输出的光信号的干扰；将所述遮光罩固定于预设的高度上并使其开口朝向设定的方向，则插入所述观测窗的光纤一端所发出的光可以通过所述开口朝所述设定的方向输出。进一步地，所述光路转换单元的的观测窗还设有光扩散膜，所述光扩散膜覆盖于所述遮光罩的开口。进一步地，所述机房智能巡检系统的光路转换单元包括至少两个光纤、至少两个采光窗和一个观测窗，每个观测窗通过隔板分割出若干独立的观测区，每个光纤的一端分别插入一采光窗，每个光纤的另一端插入该观测窗并位于独立的观测区内。进一步地，所述机房智能巡检系统的处理器包括存储模块和分析单元；所述存储模块用于存储待检指示灯数据库，其包括待检指示灯编号、待检指示灯类型、待检指示灯的不同颜色及其对应状态、待检指示灯所属设备编号及其位置、待检指示灯对应的观测编号，其中所述观测编号为对每个待检指示灯所对应的观测窗或观测区在巡检过程中的被采集次序而赋予的唯一编号；所述分析单元包括识别模块、运算模块和判断模块；其中所述识别模块用于在所述巡检机器人采集的图像中识别每个观测窗或观测区的位置及其输出的光信号的亮度和颜色；所述运算模块根据图像的采集时间以及图像中所述观测窗或观测区的位置确定其观测编号，并将运算模块中得到的观测编号与待检指示灯数据库中的数据进行匹配，获得其对应的待检指示灯信息；所述判断模块根据识别模块中获得的亮度和颜色与待检指示灯数据库中对应指示灯的颜色状态进行对比，从而判断出对应待检设备的状态。进一步地，所述机房智能巡检系统的处理器还包括报告生成模块，且所述存储模块还用于存储巡检日志；其中所述巡检日志包括每次巡检的巡检时间和巡检结果；所述报告生成模块将分析单元获得的对每个待检指示灯以及待检设备的状态判断结果整合成巡检结果，并将其与巡检时间一起生成巡检日志，再将所述巡检日志存储至所述存储模块中。进一步地，所述机房智能巡检系统的处理器还包括警报单元，所述处理器还包括警报单元，当判断模块判断待检设备异常状况时，触发所述警报单元向运维人员发送异常通知。为了更好地理解和实施，下面结合附图和具体实施例详细说明本发明。附图说明图1为机房状态示意图；图2为机房中单排机柜和设备以及指示灯的位置示意图；图3为本发明所述的机房智能巡检系统示意图；图4为光路转换单元的采光窗结构示意图；图5为光路转换单元的观测窗结构示意图；图6为光路转换单元的结构示意图；图7为巡检路线示意图；图8为机房智能巡检系统中光路转换装置与巡检机器人的组合示意图。具体实施方式本发明提供一种机房智能巡检系统，其包括光路转换单元、巡检机器人和处理器。请参阅图3，其为所述机房智能巡检系统的示意图。其中所述光路转换单元3将机房内各待检设备中分布在不同位置的待检指示灯21的光转换至统一的方向和高度上输出，所述巡检机器人4沿指定的路线移动并在固定的高度上对光转换单元3输出的光信号进行图像采集并将图像传输至处理器5，所述处理器5对巡检机器人4采集到的图像进行识别并进一步判断每个待检指示灯21所属设备的状态。所述光路转换单元3包括采光窗32、光纤31和观测窗33。所述采光窗32为半包围结构，其开口可以包围待检设备的其中一个待检指示灯21，所述观测窗33固定在指定的高度和朝向上，所述光纤31的两端分别插入采光窗32和观测窗33，将采光窗32收集的光传输至观测窗33显示出来。巡检机器人或者运维人员只需对观测窗33所输出的光信号的亮度和颜色进行观察，即可方便地得知对应的待检指示灯21的亮灯状态。具体地，该光纤31包括纤芯和包覆层，所述纤芯可使光信号从光纤31的一端传输至另一端，所述包覆层包覆在纤芯外侧，可对纤芯进行保护并将光信号局限在纤芯中。请参阅图4，其为所述采光窗的结构示意图。所述采光窗32的开口外延设有吸盘321，使该采光窗32容易吸附固定在待检设备面板22上且容易移除再利用。此外，在采光窗32的内壁还设有一遮光层322，该遮光层322可以为吸光层或反光层，以隔绝环境光对采光窗32的影响，保证光纤采光的效果。请参阅图5，其为本发明的观测窗33的其中一种实施方式。所述观测窗33包括一半包围结构的遮光罩331和一覆盖所述遮光罩331开口的光扩散膜332。该光扩散膜332可以使插入遮光罩331的光纤31端部的点光源扩散成面光源，使其更容易被采集。在使用时，一个光纤31的两端分别插入一个采光窗32和一个观测窗33，首先将光路转换单元3中的采光窗32分别盖设在分布在不同位置上的待检指示灯21上，再将与其对应的观测窗33放置在指定的高度和方向上，且使不同的观测窗在统一设定的路线上呈线性排列，从而使位于不同高度或者是不同方向的面板上的指示灯的光信号都可以被光纤转换至所述预设的高度和方向上统一地输出。请参阅图6，其为本发明中采取另一种观测窗的光路转换单元结构示意图。为了方便图像拍摄，观测窗做成同一尺寸，包括一半包围结构的遮光罩和覆盖所述遮光罩开口的光扩散膜，并且在遮光罩内通过隔板分割出若干独立的观测区，此时，每个光纤的一端分别插入一采光窗，每个光纤的另一端插入该观测窗并位于独立的观测区内。这样方便统一拍摄设备的拍摄角度、距离的定位，一次拍照可完整清楚地采集一个观测窗的指示情况。所述的光路转换单元3利用光纤31对待检指示灯21发出的光信号进行光路转换，并利用所述采光窗32和观测窗33辅助光纤31对待检指示灯21进行光信号采集以及经转换后的光信号的呈现，其实现了待检指示灯21和观测窗或观测区之间的映射关系，即对其中一个观测窗或观测区的颜色和亮度进行观察，便可得知其对应的待检指示灯21是否亮灯以及亮灯的颜色；当机房中存在多个待检指示灯21时，利用多个光路转换单元3分别对每个待检指示灯21的显示位置进行转换，即可通过对光路转换单元3中的观测窗33进行观察，直接获得所有待检指示灯21的亮灯状态和亮灯颜色，从而进一步判断每个待检指示灯21所属的待检设备2的状态。而且，本方案中将不同的观测窗33设置在同一水平高度上线性排列，并令其朝向统一的方向出光，则利用巡检机器人4进行巡检时，只需要令其沿观测窗33的排列方向前进，即可在同一水平高度上采集到对应所有待检指示灯21的观测窗图像。所述巡检机器人4可以按照预设的巡检路线和速度移动，其上设有一图像采集单元。所述巡检机器人通过其图像采集单元在指定的高度和方向上按照指定频率进行图像采集，并将采集到的图像传送至所述处理器5。具体地，所述巡检机器人4可以是导轨式机器人，其可以按照预设的速度沿轨道移动；或者所述巡检机器人4也可以是轮式机器人，其可以根据指令按照预设的速度和路线进行移动。所述图像采集单元可以是高清相机及其控制机构，也可以进一步包括补光灯等辅助图像采集的器件。当所述处理器集成于所述巡检机器人上时，所述图像可通过系统总线进行传输，而在其他情况下，所述图像也可以通过无线通讯的方式进行传输。请参阅图7和图8，其为巡检路线的一种具体规划方式以及所述光路转换单元3和巡检机器人4在整个机房智能巡检系统中的一种组合设置方式。其中所述巡检机器人4为吊轨式机器人，其可以沿设置在机房顶部的轨道6移动，并可以在机柜1顶部的高度上进行图像采集。与之配合，光转换单元3的观测窗33设置在机柜顶部，与其相连的光纤31则通过机柜1的进线孔11进入机柜内并与固定于待检指示灯21外侧的采光窗32连接。其中，观测窗33沿巡检路线方向呈线性排列并使光纤中的光信号向巡检机器人4经过的方向输出。由于每个观测窗33或每个观测区均与一个待检指示灯21相对应，则当巡检机器人4在轨道6上移动时，就可以在机柜顶部的高度上采集到对应于不同待检指示灯21的观测窗33的图像。而在其他一些实施方式中，所述观测窗的设置高度以及光信号的输出方向也可以根据具体使用的巡检机器人作出调整，只要保证所述观测窗及其输出的光信号能够被巡检机器人进行图像采集即可。所述处理器5包括存储模块、分析单元、报告生成模块和警报单元。其中所述存储模块用于存储待检指示灯数据库和巡检日志。所述待检指示灯数据库包括每个待检指示灯的编号、类型、不同颜色对应的设备状态、所属设备的编号、所属设备的摆放位置以及与待检指示灯对应的观测编号。具体地，所述观测编号可以是所述待检指示灯所对应的观测窗或者观测区在整个巡检路线中的排序序号，例如，当机器人进入机房按照路线进行巡检时，其经过的第一个观测区所对应的观测编号即为1，第二个即为2，依次类推；又或者，所述观测编号也可以是所述待检指示灯所对应的观测区在被采集到的图像中的位置以及该图像的被采集次序的结合，例如，在巡检机器人所采集到的第2幅图像中从左至右排列的第3个观测区，其观测编号可设为2-3。由于每个观测窗或者观测区在巡检路线上都只有唯一的序号，而巡检机器人在每次巡检中采集图像的张数以及每个图像中包含的观测区数量都可以被预先设定为定值，因此上述两个编号规则中，每个待检指示灯都可以获得一个唯一的编号。所述巡检日志包括每次巡检的巡检时间、对每个待检指示灯的颜色判断结果以及对其所属设备的状态判断结果。请参阅表1，其为所述待检指示灯数据库的其中一种表示方式，其中观测编号采用所述图像次序与观测区位置结合的方法进行设定。表1所述分析单元包括识别模块、运算模块和判断模块。所述识别模块利用图像识别算法，在巡检过程中采集的图像中识别出各观测区的位置、其输出的光信号的亮度以及颜色，其中，观测窗的位置为单个观测区在所在图像观测组的相对位置。所述运算模块根据图像的拍摄时间获得该图像的采集次序，然后结合观测区在图像中的位置获得其对应的观测编号。具体地，当所述观测编号按照每个观测窗在巡检路线上的排序序号设置时，所述运算模块可以先从第一个采集的图像进行识别，在其中按照从左至右的顺序获得每个观测区的序号，并利用加法器记录当前观测区的序号，当切换至下一图像时，即在加法器的数值基础上对图中的观测区进行识别并获得其对应的序号；而当所述观测编号采用所述图像次序与观测区位置结合的方法设定时，运算模块根据某个观测区所在图像的拍摄时间获得其采集次序k，并根据该观测区在图像中的位置确定其在图像观测组中排列次序h，则可以将两者结合获得该观测区的观测编号k-h。进一步地，将具体观测区的观测编号与存储模块中的待检指示灯数据库的数据进行匹配，即可获得该观测区对应的待检指示灯信息。所述判断模块将所述识别模块获得的光信号的亮度和颜色的分析结果与待检数据库中存储的待检指示灯的不同颜色所对应的设备状态进行对比，从而判断出该待检设备的状态。进一步地，在具体实践中，除了待检指示灯本身提示的异常情况外，运维人员还可以在判断模块中对每个待检设备添加自定义的判断逻辑，如对于表1中的设备M1，判断模块对指示灯的判断结果为L1未亮、L2黄色，即设备断电和风扇运行，则可能存在L1故障，或者是L1对应的光转换单元未正确连接，从而也可以将其标记为异常状态。所述报告生成模块用于将所述分析单元得到的各待检指示灯的亮灯情况以及其对应的待检设备的状态判断结果整合成巡检日志，并将其存储至所述存储模块中。所述警报单元用于通知运维人员对被判断为异常的待检设备进行处理。具体地，所述警报单元在所述报告生成模块获得的巡检报告中存在待检设备异常状况时被触发，其可通过网络向运维人员发送包括异常设备编号、设备位置、涉及的待检指示灯亮灯情况以及该次巡检的巡检时间的通知信息。在其他一些实施例中，所述警报单元也可以通过响铃或亮灯的形式向运维人员发送通知。相对于现有技术，本发明利用光转换单元将来自不同设备的指示灯的光信号传输至同一高度和同一朝向并按照顺序排列，由于光转换单元中利用柔软的光纤作为光传输介质，其可以轻易地将分布在不同高度、不同方向的设备面板上的指示灯的光转换至统一的高度和朝向，从而将分散的光信号集成在一起，可以解决有效解决设备所在的水平高度、指示灯在设备上的分布对图像采集过程的影响，只需使用任意设有摄像头的巡检机器人即可顺利完成巡检任务，无需额外采购或者制造具有升降机构或多个摄像头的巡检机器人，同时在巡检过程中也无需为分布在设备背板上的指示灯另外规划巡检线路，有效降低了巡检过程的经济成本和时间成本。而且本发明中使所述观测窗的出光沿巡检路线呈线性排列，则在巡检路线上每个观测窗都是单独出现，因此在图像采集时只需预先设定好拍摄参数，即实现每次拍摄到的图像都包含完整的观测窗，不会出现现有技术中指示灯被分割在两个图像中从而需要先完成图像拼接才可以进行下一步处理的情况。进一步地，本发明所采集到的图像中，各观测窗的分布方式都十分规律，从而可以更容易利用图像识别算法在图中识别出观测窗的位置，节省了现有技术中针对不同设备面板而预先进行的对识别模型的大量训练，又或者是预先在设备面板上设置标签再对其进行识别的过程。而且由于在巡检路线上每个观测窗所输出的光信号都具有唯一的出现次序，因此只需结合观测窗在图像中的位置以及图像的采集时间，即可确定具体某个观测窗在巡检路线上的排序，从而关联至对应的指示灯并通过其亮度和颜色判断设备状态，整个过程只需要少量运算即可获得准确的判断结果，与现有技术相比大大减少了运算量和处理时间。进一步地，由于本方法中无需直接采集设备面板的图像，因此巡检机器人采集到的图像中也不会存在设备面板上可能出现的妨碍图像识别的色块，从而可有效地提高对观测窗的识别速率以及对待检指示灯的亮灯状态的判断准确率。以上所述实施例仅表达了本发明的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干变形和改进，这些都属于本发明的保护范围。
