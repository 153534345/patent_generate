标题title
基于卫星定位与倾角传感的甲板变形监测方法
摘要abst
本发明涉及一种基于卫星定位与倾角传感的甲板变形监测方法，包括电源模块，所述电源模块通过电源稳压模块连接MCU，所述MCU依次连接有倾角传感器、卫星模块、RTC模块、SD卡存储模块、microUSB、microSD卡、信号灯，所述倾角传感器和卫星模块组成数采模块，RTC模块和SD卡存储模块组成数采模块，microUSB、microSD卡和信号灯为外置接口；采用卫星定位数据与动态倾角数据融合演算，获取多点位所对应的甲板局部区域变形情况。
权利要求书clms
1.一种基于卫星定位与倾角传感的甲板变形监测方法，其特征在于：包括电源模块，所述电源模块通过电源稳压模块连接MCU，所述MCU依次连接有倾角传感器、卫星模块、RTC模块、SD卡存储模块、microUSB、microSD卡、信号灯，所述倾角传感器和卫星模块组成数采模块，RTC模块和SD卡存储模块组成数采模块，microUSB、microSD卡和信号灯为外置接口；监测方法包括如下步骤：第一步：确保边缘计算节点与云终端连接到同一WiFi网络下，卫星模块经过初始冷启动后向MCU输出UTC时间，用以校准当前节点的RTC模块；第二步：边缘计算节点通过倾角传感器与卫星模块开始采集实时的三维加速度值与绝对的经纬度、高度；第三步：边缘计算节点MCU对原始加速度值作滤波处理，减少数据毛刺，并通过积分计算得到固定时间内节点的位移值xi，将位移值与当前的定位及高程信息附上绝对时间戳先存储到SD卡存储模块中；第四步：将SD卡存储模块中的经纬度、高度与位移数据通过MQTT协议上传到云终端，设定消息发布的质量为QoS2，即确保数据能收到且云终端采用MQTT代理接收数据并立即存储到数据库中；第五步：云终端开启线程实时处理数据，从数据库中依据绝对时间戳获取相同时间段内每个传感节点的位移与定位数据，用定位数据对实时位移进行校准。2.如权利要求1所述的基于卫星定位与倾角传感的甲板变形监测方法，其特征在于：第五步中，具体的操作流程如下：首先假设第i个边缘计算节点在某一时间段的位移数据为经纬度及高程信息为采用卡尔曼滤波融合当前节点的绝对位置信息与实时位移数据可以得到可信度更高的节点实时位置＝f，计算公式如下：其中xi为当前节点位置的实时位移量，Li，Bi，Hi为当前节点在前一状态下计算得到的实时位置，K为卡尔曼增益，其计算方法如下：其中为倾角传感器的误差，rigps为卫星模块误差，pi是预测误差，K会随着每一次状态变化而更新获取到较为可信的位置信息后，再通过差分计算得到每一段甲板的三维实时长度，公式如下：其中为当前状态下的位置信息，为前一状态下的位置信息；计算完成后重复以上流程1000次，记录平均值到数据库中作为各段甲板结构的初始值初始化后再次重复以上流程，并且对于每一次状态改变，都要通过差分运算得到当前甲板的实时变形情况，计算完成后记录到数据库中，公式如下所示：其中为当前状态下的位置信息，为初始状态下的位置信息。3.如权利要求1所述的基于卫星定位与倾角传感的甲板变形监测方法，其特征在于：所述电源模块采用太阳能电池板和镍铬电池。4.如权利要求3所述的基于卫星定位与倾角传感的甲板变形监测方法，其特征在于：太阳能电池板和镍铬电池为可充电电池作为能源解决方案，并且加入电源稳压模块用于向主控MCU输出稳定直流5V。5.如权利要求1所述的基于卫星定位与倾角传感的甲板变形监测方法，其特征在于：使用卫星模块通过自带天线获取数据并基于SPI协议传输到MCU中，使用倾角传感器采集实时加速度并经I2C协议传输到主控MCU，在主控MCU内部完成滤波、积分数据预处理。6.如权利要求1所述的基于卫星定位与倾角传感的甲板变形监测方法，其特征在于：RTC模块为高精度时间模块，用于记录当前点位数据的绝对时间，采用MCU内部时钟记录当前点位数据的相对时间。7.如权利要求1所述的基于卫星定位与倾角传感的甲板变形监测方法，其特征在于：SD卡存储模块临时存储当前点位的定位与三维位移数据。8.如权利要求1所述的基于卫星定位与倾角传感的甲板变形监测方法，其特征在于：基于TCP/IP的MQTT协议上传数据到云终端。
说明书desc
技术领域本发明涉及甲板变形检测方法技术领域，尤其是一种基于卫星定位与倾角传感的甲板变形监测方法。背景技术船舶在运行过程中会遭受风、浪等外部环境的影响，这些外部荷载使得甲板产生局部变形，严重时可能会对甲板产生不可逆破坏,因此需要对甲板结构变形进行长期可靠的结构健康监测。激光测距是一类非接触式的甲板变形方法，在安装时需要进行多站对准，并且放置在甲板的特定位置，确保良好的准直性，由于其安装要求较为苛刻，难以实现船舶结构变形的长期可靠监测。另一类变形监测方法采用接触式，常用的有采集应力传感数据实时反演变形或者使用位移计测量船舶变形绝对值，采用这两种方式会占用大量甲板空间，并且施工量大，不适用于甲板变形的长期无损监测。发明内容本申请人针对上述现有生产技术中的缺点，提供一种基于卫星定位与倾角传感的甲板变形监测方法，从而基于相对位移量监测的甲板变形计算方法，并且为该方法提供了一套用于测量该变形的边缘节点与云终端装置。本发明所采用的技术方案如下：一种基于卫星定位与倾角传感的甲板变形监测方法，包括电源模块，所述电源模块通过电源稳压模块连接MCU，所述MCU依次连接有倾角传感器、卫星模块、RTC模块、SD卡存储模块、microUSB、microSD卡、信号灯，所述倾角传感器和卫星模块组成数采模块，RTC模块和SD卡存储模块组成数采模块，microUSB、microSD卡和信号灯为外置接口；监测方法包括如下步骤：第一步：确保边缘计算节点与云终端连接到同一WiFi网络下，卫星模块经过初始冷启动后向MCU输出UTC时间，用以校准当前节点的RTC模块；第二步：边缘计算节点通过倾角传感器与卫星模块开始采集实时的三维加速度值与绝对的经纬度、高度；第三步：边缘计算节点MCU对原始加速度值作滤波处理，减少数据毛刺，并通过积分计算得到固定时间内节点的位移值xi，将位移值与当前的定位及高程信息附上绝对时间戳先存储到SD卡存储模块中；第四步：将SD卡存储模块中的经纬度、高度与位移数据通过MQTT协议上传到云终端，设定消息发布的质量为QoS2，即确保数据能收到且云终端采用MQTT代理接收数据并立即存储到数据库中；第五步：云终端开启线程实时处理数据，从数据库中依据绝对时间戳获取相同时间段内每个传感节点的位移与定位数据，用定位数据对实时位移进行校准。第五步中，具体的操作流程如下：首先假设第i个边缘计算节点在某一时间段的位移数据为经纬度及高程信息为采用卡尔曼滤波融合当前节点的绝对位置信息与实时位移数据可以得到可信度更高的节点实时位置＝f，计算公式如下：其中xi为当前节点位置的实时位移量，Li，Bi，Hi为当前节点在前一状态下计算得到的实时位置，K为卡尔曼增益，其计算方法如下：其中为倾角传感器的误差，rigps为卫星模块误差，pi是预测误差，K会随着每一次状态变化而更新获取到较为可信的位置信息后，再通过差分计算得到每一段甲板的三维实时长度，公式如下：其中为当前状态下的位置信息，为前一状态下的位置信息；计算完成后重复以上流程1000次，记录平均值到数据库中作为各段甲板结构的初始值初始化后再次重复以上流程，并且对于每一次状态改变，都要通过差分运算得到当前甲板的实时变形情况，计算完成后记录到数据库中，公式如下所示：其中为当前状态下的位置信息，为初始状态下的位置信息；所述电源模块采用太阳能电池板和镍铬电池。太阳能电池板和镍铬电池为可充电电池作为能源解决方案，并且加入电源稳压模块用于向主控MCU输出稳定直流5V。使用卫星模块通过自带天线获取数据并基于SPI协议传输到MCU中，使用倾角传感器采集实时加速度并经I2C协议传输到主控MCU，在主控MCU内部完成滤波、积分数据预处理。RTC模块为高精度时间模块，用于记录当前点位数据的绝对时间，采用MCU内部时钟记录当前点位数据的相对时间。SD卡存储模块临时存储当前点位的定位与三维位移数据。基于TCP/IP的MQTT协议上传数据到云终端。本发明的有益效果如下：本发明实现的是测量甲板变形的相对位移量，采用多点位分布式测量，可以更加有效地反映甲板的局部变形。基于此提出了一种卫星定位与倾角传感的融合演算的甲板三维变形计算方法，该方法采用倾角传感器采集高频加速度数据，为了抑制传感器的噪声以及测量误差，在MCU内利用滤波算法对原始加速度数据进行预处理，减少毛刺与噪音。然后再对加速度值进行二次积分得到该节点在当前时间点的实时位移数据，进一步将各个节点在当前时间点计算出的三维位移值与原始定位信息实时存储在SD卡中，再按一定频率经WiFi将数据发布到云终端内。云终端接收到甲板各个点位的实时三维位移与卫星定位信息后，首先即时存储到数据库中进行备份，与此同时开启另一线程进行数据处理，对于每一个点位，将当前节点的三维绝对定位数据与实时三维位移数据以卡尔曼滤波算法进行融合演算，其中三维定位数据作为当前点位的绝对值用于校准实时三维位移，计算完成后得到当前节点相对可靠的三维定位数据，再利用两次差分计算得到每一段甲板的实时变形量。为了实现本发明相关功能与算法开发了一种边缘计算节点，该节点包含多个倾角传感器以及一个卫星定位模块，用于感知当前点位三维实时加速度以及卫星定位信息。此外，该节点还具有一定的计算能力，可写入代码从而完成原始加速度的滤波及积分运算，计算结果为当前节点的实时三维位移值。此外，该节点还具有存储能力，可临时存储数据以及提取，在本发明中用于存储时间、三维位移以及卫星定位数据。该节点还采用了WiFi无线通信技术，从而使得多个节点可以形成一个甲板变形监测网络，可以通过融合演算反映整个甲板的局部变形与整体变形。该节点还采用了太阳能电池+可充电电池的电源解决方案，使得布放点位更加灵活，进一步减小监测装置对于环境的依赖。最后，电源稳压模块为节点输出持续稳定的直流电压，保障节点处于良好的运行状态，温控模块用于预警，避免节点因过热对硬件造成损害。为了本发明相关算法与功能，为此开发了一种用于接收多个节点数据并可以进行同步融合演算的云终端。该节点具有无线通信功能，可作为MQTT代理同时接收多个边缘计算节点上传的数据，采用MQTT协议可确保数据不丢失、不重复，采集数据完成后以时间戳作为键即时将实时三维位移与定位数据存储到节点内部数据库中。该节点还具有同步处理功能，可依据时间戳将当前节点的三维位移值与三维定位数据进行融合解算，输出较为可靠的甲板实时变形量。附图说明图1为本发明边云协同构架图。图2为本发明边缘节点与云终端设计构架图。图3为本发明甲板一维变形的概念图。具体实施方式下面结合附图，说明本发明的具体实施方式。如图1、图2和图3所示，本实施例所述的一种基于卫星定位与倾角传感的甲板变形监测方法，包括电源模块，所述电源模块通过电源稳压模块连接MCU，所述MCU依次连接有倾角传感器、卫星模块、RTC模块、SD卡存储模块、microUSB、microSD卡、信号灯，所述倾角传感器和卫星模块组成数采模块，RTC模块和SD卡存储模块组成数采模块，microUSB、microSD卡和信号灯为外置接口；监测方法包括如下步骤：第一步：确保边缘计算节点与云终端连接到同一WiFi网络下，卫星模块经过初始冷启动后向MCU输出UTC时间，用以校准当前节点的RTC模块；第二步：边缘计算节点通过倾角传感器与卫星模块开始采集实时的三维加速度值与绝对的经纬度、高度；第三步：边缘计算节点MCU对原始加速度值作滤波处理，减少数据毛刺，并通过积分计算得到固定时间内节点的位移值xi，将位移值与当前的定位及高程信息附上绝对时间戳先存储到SD卡存储模块中；第四步：将SD卡存储模块中的经纬度、高度与位移数据通过MQTT协议上传到云终端，设定消息发布的质量为QoS2，即确保数据能收到且云终端采用MQTT代理接收数据并立即存储到数据库中；第五步：云终端开启线程实时处理数据，从数据库中依据绝对时间戳获取相同时间段内每个传感节点的位移与定位数据，用定位数据对实时位移进行校准。第五步中，具体的操作流程如下：首先假设第i个边缘计算节点在某一时间段的位移数据为经纬度及高程信息为采用卡尔曼滤波融合当前节点的绝对位置信息与实时位移数据可以得到可信度更高的节点实时位置＝f，计算公式如下：其中xi为当前节点位置的实时位移量，Li，Bi，Hi为当前节点在前一状态下计算得到的实时位置，K为卡尔曼增益，其计算方法如下：其中为倾角传感器的误差，rigps为卫星模块误差，pi是预测误差，K会随着每一次状态变化而更新获取到较为可信的位置信息后，再通过差分计算得到每一段甲板的三维实时长度，公式如下：其中为当前状态下的位置信息，为前一状态下的位置信息；计算完成后重复以上流程1000次，记录平均值到数据库中作为各段甲板结构的初始值初始化后再次重复以上流程，并且对于每一次状态改变，都要通过差分运算得到当前甲板的实时变形情况，计算完成后记录到数据库中，公式如下所示：其中为当前状态下的位置信息，为初始状态下的位置信息；本发明所述的电源模块采用太阳能电池板和镍铬电池。本发明所述的太阳能电池板和镍铬电池为可充电电池作为能源解决方案，并且加入电源稳压模块用于向主控MCU输出稳定直流5V。本发明使用卫星模块通过自带天线获取数据并基于SPI协议传输到MCU中，使用倾角传感器采集实时加速度并经I2C协议传输到主控MCU，在主控MCU内部完成滤波、积分数据预处理。本发明所述的RTC模块为高精度时间模块，用于记录当前点位数据的绝对时间，采用MCU内部时钟记录当前点位数据的相对时间。本发明所述的SD卡存储模块临时存储当前点位的定位与三维位移数据。本发明是基于TCP/IP的MQTT协议上传数据到云终端。本发明对于每一个点位的原始加速度数据，采用滤波算法与积分运算得到当前节点在一定时间内的实时三维位移值，进一步对每个点位的实时三维位移数据，再利用卫星定位数据对各个点位的三维位移值进行校准，再利用差分运算消除大部分卫星定位数据误差，从而获取可信度较高的甲板三维变形预测值。以上描述是对本发明的解释，不是对发明的限定，本发明所限定的范围参见权利要求，在本发明的保护范围之内，可以作任何形式的修改。
