标题title
图像搜索方法、电子设备及其介质
摘要abst
本申请涉及数据处理技术领域，尤其涉及一种图像搜索方法、电子设备及其介质。其中，在本申请的图像搜索方法中，通过计算不同图像搜索算法在目标数据集上的最小搜索代价，比较不同图像搜索算法的最小搜索代价，从中选择搜索代价最小的图像搜索算法。通过这种方法，可以有效节省电子设备的计算资源，同时提高电子设备的运行效率。
权利要求书clms
1.一种图像搜索方法，应用于电子设备，其特征在于，所述方法包括：获取待匹配图像和待搜索图像集；基于所述待匹配图像的多个相似度图像集与各个相似度图像集的内联点匹配值，确定目标搜索图像集，其中，所述待匹配图像的多个相似度图像集是基于M个预设搜索算法，对所述待匹配图像进行相似度搜索得到的，其中M为大于等于1的正整数；其中，通过以下方式确定出所述搜索结果图像集：对于每个所述预设搜索算法执行如下操作：在N个不同的相似度阈值下，利用所述预设搜索算法进行所述相似度搜索，得到对应该预设搜索算法的N个相似度图像集，其中，N为大于等于1的正整数，确定每个所述相似度图像集中内联点匹配度小于预设内联点阈值的图像的数量，得到N个相似度图像集的内联点匹配值，选择出N个内联点匹配值中满足第一条件的内联点匹配值，并将选择出的内联点匹配值中的一个内联点匹配值对应的相似度图像集，作为该预设搜索算法的算法图像集；从所述M个预设算法的M个算法图像集中选择出对应的内联点匹配值满足第二条件的算法图像集作为所述搜索结果图像集。2.根据权利要求1所述的方法，其特征在于，所述确定每个所述相似度图像集中内联点匹配度小于预设内联点阈值的图像的数量，包括：利用随机抽样一致算法确定每个所述相似度图像集中内联点匹配度小于预设内联点阈值的图像的数量。3.根据权利要求1或2所述的方法，其特征在于，所述相似度图像集的内联点匹配值为每个所述相似度图像集中内联点匹配度小于预设内联点阈值的图像的数量与所述相似度图像集中图像的数量的比值。4.根据权利要求1或2所述的方法，其特征在于，所述确定每个所述相似度图像集中内联点匹配度小于预设内联点阈值的图像的数量，得到N个相似度图像集的内联点匹配值，包括：基于N个不同的相似度阈值以及N个相似度图像集的内联点匹配值，得到内联点匹配值随相似度阈值变化的变化关系；基于所述变化关系，选择出N个内联点匹配值中满足第一条件的内联点匹配值。5.根据权利要求4所述的方法，其特征在于，所述相似度阈值为待匹配图像与相似度图像集中图像的欧式距离阈值或余弦距离阈值。6.根据权利要求5所述的方法，其特征在于，在所述相似度阈值为欧式距离阈值的情况下，所述内联点匹配值随相似度阈值的增大而增大。7.根据权利要求5所述的方法，其特征在于，在所述相似度阈值为余弦距离阈值的情况下，所述内联点匹配值随相似度阈值的增大而减少。8.根据权利要求1所述的方法，其特征在于，所述算法图像集是满足第一条件的内联点匹配值中的最小内联点匹配值对应的图像集。9.根据权利要求8所述的方法，其特征在于，所述第一条件为N个内联点匹配值中按照从小到大的顺序排列，取前预设第一数量个内联点匹配值。10.根据权利要求1所述的方法，其特征在于，所述搜索结果图像集是满足第二条件的内联点匹配值中最小内联点匹配值对应的图像集。11.根据权利要求10所述的方法，其特征在于，所述第二条件为N个内联点匹配值中按照从小到大的顺序排列，取前预设第二数量个内联点匹配值。12.根据权利要求1所述的方法，其特征在于，所述待搜索图像集包括视觉建图图像集或运动恢复结构图像集。13.根据权利要求1所述的方法，其特征在于，所述预设搜索算法包括深度学习算法、词袋模型算法、哈希索引算法中的任一种。14.一种可读介质，其特征在于，所述可读介质上存储有指令，该指令在电子设备上执行时使电子设备执行权利要求1至13中任一项所述的图像搜索方法。15.一种电子设备，其特征在于，所述电子设备包括：存储器，用于存储由电子设备的一个或多个处理器执行的指令，以及处理器，是电子设备的处理器之一，用于执行权利要求1至13中任一项所述的图像搜索方法。
说明书desc
技术领域本申请涉及数据处理技术领域，尤其涉及一种图像搜索方法、电子设备及其介质。背景技术目前的图像搜索方法是基于特征匹配实现的，具体是通过提取数据集中的查询图像以及数据集中的其他图像的图像特征，并基于查询图像以及数据集中的其他图像的图像特征，计算查询图像与数据集中其他图像的相似度。然后将数据集中与查询图像相似度满足条件的图像作为候选图像，并将候选图像按照相似度由大到小的顺序排列，作为图像搜索结果输出。图像搜索方法被广泛的应用在定位导航等场景中，例如图1中自动驾驶汽车100在定位导航过程，需要利用图像搜索方法，从其拍摄的众多图像中搜索得到构建导航地图所需的图像，并利用这些图像构建对应的导航地图，以利用导航地图进行导航。但是，利用目前的图像检索方法进行搜索的过程中，会搜索到很多无关匹配的图像，浪费电子设备的计算资源，影响其系统运行的效率。发明内容为了解决上述问题，本申请提供一种图像检索方法、电子设备及其介质，通过本申请的方法，能够得到搜索代价较小的图像搜索方法，减少电子设备的计算资源，提高其系统运行的效率。下面对本申请的技术方案展开介绍。第一方面，本申请实施例提供了一种图像搜索方法，应用于电子设备，该方法包括：获取待匹配图像和待搜索图像集；基于待匹配图像的多个相似度图像集与各个相似度图像集的内联点匹配值，确定目标搜索图像集，其中，待匹配图像的多个相似度图像集是基于M个预设搜索算法，对待匹配图像进行相似度搜索得到的，其中M为大于等于1的正整数；其中通过以下方式确定出搜索结果图像集：对于每个预设搜索算法执行如下操作：在N个不同的相似度阈值下，利用预设搜索算法进行相似度搜索，得到对应该预设搜索算法的N个相似度图像集，其中，N为大于等于1的正整数，确定每个相似度图像集中内联点匹配度小于预设内联点阈值的图像的数量，得到N个相似度图像集的内联点匹配值，选择出N个内联点匹配值中满足第一条件的内联点匹配值，并将选择出的内联点匹配值中的一个内联点匹配值对应的相似度图像集，作为该预设搜索算法的算法图像集；从M个预设算法的M个算法图像集中选择出对应的内联点匹配值满足第二条件的算法图像集作为搜索结果图像集。其中，待匹配图像对应下文中的查询图像，待搜索图像集对应下文中的目标数据集，内联点匹配值对应下文中的搜索代价。其中，关于内联点与相似度阈值的定义可参考下文具体实施例部分的相关描述。结合第一方面，在第一方面的一种可能的实现方式中，确定每个相似度图像集中内联点匹配度小于预设内联点阈值的图像的数量，得到N个相似度图像集的内联点匹配值，包括：基于N个不同的相似度阈值以及N个相似度图像集的内联点匹配值，得到内联点匹配值随相似度阈值变化的变化关系；基于变化关系，选择出N个内联点匹配值中满足第一条件的内联点匹配值。结合第一方面，在第一方面的一种可能的实现方式中，相似度阈值为待匹配图像与相似度度图像集中图像的欧式距离阈值或余弦距离阈值。结合第一方面，在第一方面的一种可能的实现方式中，在相似度阈值为欧式距离阈值的情况下，内联点匹配值随相似度阈值的增大而增大。结合第一方面，在第一方面的一种可能的实现方式中，在相似度阈值为余弦距离阈值的情况下，内联点匹配值随相似度阈值的增大而减少。可以理解，由于相似度阈值不同，每一种预设搜索算法对应的相似度图像集中的图像数量也不相同，故在预设内联点阈值相同的情况下，不同的图像相似度阈值对应的相似度图像集的内联点匹配值也不相同。因此，通过上述方法，可以得到每种预设搜索算法中，内联点匹配值与不同相似度阈值之间的关系，根据该关系可以确定出每种预设搜索算法对应的最小内联点匹配值以及该内联点匹配值对应的相似度阈值。然后比较每种预设搜索算法的最小内联点匹配值，进而可以确定内联点匹配值最小的预设搜索算法，可以理解，利用该预设搜索算法即可实现节省计算资源、提高系统运行效率的目的。在一种可能的实现方式中，还可以根据具体需求，选用内联点匹配值满足条件同时相似度阈值也满足条件的预设搜索算法作为图像搜索算法，得到上述搜索结果图像集。也即，可以选用内联匹配值较小但不是最小的预设搜索算法作为图像搜索算法，得到上述搜索结果图像集。结合第一方面，在第一方面的一种可能的实现方式中，确定每个相似度图像集中内联点匹配度小于预设内联点阈值的图像的数量，包括：利用随机抽样一致算法确定每个相似度图像集中内联点匹配度小于预设内联点阈值的图像的数量。结合第一方面，在第一方面的一种可能的实现方式中，相似度图像集的内联点匹配值为每个相似度图像集中内联点匹配度小于预设内联点阈值的图像的数量与相似度图像集中图像的数量的比值。结合第一方面，在第一方面的一种可能的实现方式中，算法图像集是满足第一条件的内联点匹配值中的最小内联点匹配值对应的图像集。结合第一方面，在第一方面的一种可能的实现方式中，第一条件为N个内联点匹配值中按照从小到大的顺序排列，取前预设第一数量个内联点匹配值。结合第一方面，在第一方面的一种可能的实现方式中，搜索结果图像集是满足第二条件的内联点匹配值中最小内联点匹配值对应的图像集。结合第一方面，在第一方面的一种可能的实现方式中，第二条件为N个内联点匹配值中按照从小到大的顺序排列，取前预设第二数量个内联点匹配值。结合第一方面，在第一方面的一种可能的实现方式中，待搜索图像集包括视觉建图图像集或运动恢复结构图像集。例如下文中涉及的视觉地图构建算法或者视觉地图定位系统所依赖的数据集。其中，视觉地图构建算法包括例如同步定位与建图算法或运动恢复结构算法等。具体将在下文进行介绍。结合第一方面，在第一方面的一种可能的实现方式中，预设搜索算法包括深度学习算法、词袋模型算法、哈希索引算法中的任一种。第二方面，本申请实施例还提供了一种电子设备，该电子设备包括存储器，存储有计算机程序指令；处理器，处理器和存储器耦合，当存储器存储的计算机程序指令被处理器执行时使得电子设备实现上述第一方面中任一项的方法。第三方面，本申请实施例提供了一种计算机可读存储介质，计算机可读存储介质存储有计算机程序，计算机程序被处理器执行时实现上述第一方面中任一项的方法。第四方面，本申请实施例提供了一种计算机程序产品，当计算机程序产品在电子设备上运行时，使得电子设备执行上述第一方面中任一项的方法。可以理解的是，上述第二方面至第四方面的有益效果可以参见上述第一方面中的相关描述，在此不再赘述。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1是一些实施例提供的本申请方法适用的场景示意图；图2是一些实施例提供在图1场景中的采集图像的示意图；图3是一些实施例提供的一例特征匹配图像与内联匹配图像的对比示意图；图4是一些实施例提供的根据本申请方法得到的图像相似度阈值为余弦距离阈值与搜索代价之间的关系示意图；图5是一些实施例提供的根据本申请方法得到的图像相似度阈值为欧式距离阈值与搜索代价之间的关系示意图；图6是一些实施例提供的计算深度学习算法在某个图像相似度阈值下的搜索代价的方法流程示意图；图7是一些实施例提供的计算深度学习算法在不同图像相似度阈值下的搜索代价的方法的流程示意图；图8是一些实施例提供的确定最佳图像搜索算法的方法流程示意图；图9是一些实施例提供的一例车载设备的硬件结构900的示意图。具体实施方式下面将使用本领域技术人员通常采用的术语来描述说明性实施例的各个方面。如背景技术所言，目前图像检索方法得到的检索结果中，存在很多无关匹配的图像。以图1所示的场景为例，汽车100在构建上述导航地图前，会获取多张与当前场景相关的图像，例如图2中与汽车100行进道路相关的图像1至图像7，然后在构建视觉地图时，针对每张图像，利用图像搜索方法，从汽车100拍摄到的与当前场景相关的多张图像中得到与该图像相似度超过图像相似度阈值的特征匹配图像，再利用这些图像以及这些图像的特征匹配图像构建视觉地图。例如图3所示，汽车100针对图像3进行图像搜索，得到与图像3的图像相似度超过图像相似度阈值的特征匹配图像为图像2和图像6，然后汽车100利用图像3、图像2以及图像6构建图像3所包括的街道及周围的视觉地图。但是在实际应用中，视觉地图构建不仅要求图像的图像相似度满足要求，还需要图像之间的内联点数量也满足相应要求。其中，内联点指的是在多张图像中，指代同一物体的特征点，这些特征点互为内联点。例如，图像3中的特征点P1与图像2中的P10指代的均为“十字路口的一角”，则图像3与图像2中的P1和P10互为内联点。因此，可以理解，在上述视觉地图构建的过程中，会存在图像相似度满足要求，但是图像之间的内联点数量不满足要求的情况，也即出现上述“无关匹配的图像”。例如，假设内联点数量阈值为3，从图3可看出，图像3和图像6中的内联点的数量仅为2，少于内联点数量阈值，图像3和图像2中的内联点数量为3，超过内联点数量阈值。因此，图像6是图像3的无关匹配图像，换句话说，图像6在图像3的特征匹配图像中的比重，即为针对图像3进行图像搜索时引入的搜索代价。此外，可以理解，基于同一目标数据集，如果内联点数量阈值固定，那么针对同一张查询图像，其内联匹配图像的数量也是固定的，其中内联匹配图像指的是与对应的查询图像的内联点数量超过上述内联点数量阈值的图像。此时如果图像相似度阈值不同，针对同一张查询图像，利用同一图像搜索算法得到的特征匹配图像的数量也不相同、该图像搜索算法的搜索代价也不相同。因此，可以通过改变图像相似度阈值，得到每个图像相似度阈值对应的图像搜索算法的搜索代价，进而得到某种图像搜索算法在目标数据集上的搜索代价随图像相似度阈值的变化关系，继而可根据该种图像搜索算法的搜索代价随图像相似度阈值的变化关系，推出该图像搜索算法在目标数据集上最小搜索代价以及最佳图像相似度阈值。有基于此，为了减少上述视觉地图构建过程中，无关匹配图像带来的搜索代价，本申请的一些实施例提供了一种图像搜索方法。在本申请的图像搜索方法中，通过计算不同图像搜索算法在目标数据集上的最小搜索代价，比较不同图像搜索算法的最小搜索代价，从中选择搜索代价最小的图像搜索算法。具体地，预先建立目标数据集中每一张查询图像的内联匹配图像，然后基于第一数据集，利用第一预设搜索算法，得到不同图像相似度阈值下，每一张查询图像的特征匹配图像。然后根据不同的图像相似度阈值下，每一张查询图像的特征匹配图像与对应的内联匹配图像，计算搜索每张查询图像时的搜索代价，并根据每张查询图像的搜索代价，计算每个图像相似度阈值对应的第一预设搜索算法在目标数据集上的搜索代价，并根据不同的图像相似度阈值及其对应的第一预设搜索算法的搜索代价，得到第一预设搜索算法的搜索代价随图像相似度阈值的变化关系。其中，为目标数据集中每一张查询图像的建立内联匹配图像的过程将在下文结合流程图6进行介绍。然后利用同样的方法，分别得到不同的第一预设搜索算法的搜索代价随图像相似度阈值的变化关系，并利用各搜索算法对应的搜索代价与相似度阈值的变化关系，得到各搜索算法对应的最小搜索代价，然后从中选择搜索代价最小的第一预设搜索算法。可以理解，在一些实施例中，上述第一预设搜索算法包括深度学习算法、词袋模型算法和哈希索引算法。下面为了便于说明，以第一预设算法为深度学习算法为例，介绍计算深度学习算法对应的搜索代价与图像相似度阈值之间变化关系的方法。具体地，例如，假设数据集中包括N张查询图像，然后利用随机抽样一致算法为每一张查询图像建立其内联匹配图像。示例性地，目标数据集中各查询图像与其内联匹配图像之间的对应关系如下表1所示：表1查询图像图像1图像2图像3……图像n-1图像n内联匹配图像的数量505570……4060也即与图像1的内联点数量超过上述内联点数量阈值的图像数量为50张，与图像2的内联点数量超过上述内联特征匹配度的数量的图像数量为55张，与图像3的内联点数量超过上述内联特征匹配度的数量的图像数量为70张，…，与图像n-1的内联点数量超过上述内联特征匹配度的数量的图像数量为40张，与图像n的内联点数量超过上述内联特征匹配度的数量的图像数量为60张。然后，假设图像相似度阈值取值为a，利用深度学习算法，针对每一张查询图像，得到与其图像相似度超过图像相似度阈值a的特征匹配图像。示例性地，在图像相似度阈值为a时，目标数据集中的查询图像与其特征匹配图像的数量之间的对应关系如表2所示：表2也即与图像1的图像相似度大于a的图像数量为70张，与图像2的图像相似度大于a的图像数量为60张，与图像3的图像相似度大于a的图像数量为80张，…，与图像n-1的图像相似度大于a的图像数量为50张，与图像n的图像相似度满足要求的图像数量为70张。然后，结合表1与表2，比较每张查询图像的特征匹配图像与内联匹配图像，确定每张查询图像的特征匹配图像中，不同于所述内联匹配图像的数量。其中，在一些实施例中，可以预先为每张图像设置图像编码，该图像编码唯一标识该图像，然后在比较查询图像的特征匹配图像与内联匹配图像时，可以通过比较图像编码，来确定特征匹配图像中不同于内联匹配图像的图像数量。例如，假设某图像编码为“0006”的查询图像的内联匹配图像的编码分别为“0002”、“0003”、“0004”、“0005”、“0007”、“0009”，而特征匹配图像的编码分别为“0003”、“0005”、“0010”、“0001”，不难理解，该查询图像的特征匹配图像中无关匹配图像的数量为2张。示例性地，结合表1与表2得到的每张查询图像对应的特征匹配图像中，无关匹配图像的数量如下表3所示：表3查询图像图像1图像2图像3……图像n-1图像n特征匹配图像数量706080……5070内联匹配图像数量505570……4060无关匹配图像的数量203040……3025也即查询图像1的特征匹配图像中存在20张无关匹配图像，查询图像2的特征匹配图像中存在30张无关匹配图像，查询图像3的特征匹配图像中存在40张无关匹配图像，……，查询图像n-1的特征匹配图像中存在30张无关匹配图像，查询图像n的特征匹配图像中存在25张无关匹配图像。然后，根据表3中的内容，分别计算每张查询图像对应的搜索代价，得到如下表4所示的搜索代价结果：表4查询图像图像1图像2图像3……图像n-1图像n特征匹配图像数量706080……5070无关匹配图像的数量203040……3025搜索代价=0.28其中，表示特征向量x与y之间的欧式距离，n表示特征向量x或y中的第几个特征，例如x1表示特征向量x的第一个特征。汽车100利用上式，分别计算查询图像1的特征向量与图像1、图像2、图像3……图像n的特征向量之间的欧式距离，并将欧式距离小于图像相似度阈值对应的欧式距离阈值的图像作为特征匹配图像。603，比较每张查询图像的内联匹配图像以及特征匹配图像，得到该相似度阈值下每张查询图像的搜索代价。如上文所述，在一些实施例中，汽车100可以通过比较内联匹配图像的图像编码与特征匹配图像编码，确定特征匹配图像中不同于内联匹配图像的图像数量，也即无关匹配图像的数量，然后计算该无关匹配图像的数量占特征匹配图像的比重，得到每张查询图像的搜索代价。具体过程可参考上文相关描述，此处不再赘述。604，根据每张查询图像的搜索代价，计算深度学习算法在上述图像相似度阈值下的搜索代价。如上文所言，在一些实施例中，汽车100可利用上式计算上述图像相似度阈值下，全部查询图像在该目标数据集上的搜索代价的平均值，以得到深度学习算法在该图像相似度阈值下的搜索代价。具体可参考上文相关描述。可以理解，在另一些实施例中，汽车100也可以计算上述全部查询图像在该目标数据集上的搜索代价的方差、标准差等值得到深度学习算法在该图像相似度阈值下的搜索代价，本申请对此不作限制。通过上述方法600即可得到深度学习算法在某个图像相似度阈值下的搜索代价。然后，汽车100可以利用下述方法700计算深度学习算法在不同图像相似度阈值下的搜索代价，并得到深度学习算法的搜索代价随图像相似度阈值的变化关系。具体地，如图7所示，该过程包括：701，改变图像相似度阈值的取值，计算不同图像相似度阈值下，深度学习算法的搜索代价。如上文所述，随着图像相似度阈值的改变，基于图像相似度阈值得到的每张查询图像的特征匹配图像的数量也会发生改变，对应的，每张查询图像的搜索代价也会发生改变，故汽车100可通过改变图像相似度阈值的方法，得到不同图像相似度阈值对应的深度学习算法的搜索代价。在一些实施例中，汽车100改变图像相似度阈值后，可以利用上述方法600中的602确定图像相似度阈值为b的情况下，每张查询图像对应的特征匹配图像。然后在利用上述方法603-604计算得到图像相似度阈值为b的情况下，深度学习算法的搜索代价。702，确定不同图像相似度阈值与深度学习算法的搜索代价之间的变化关系。可以理解，在得到不同图像相似度阈值下，深度学习算法的搜索代价后，可以拟合或绘制出不同图像相似度阈值与深度学习算法的搜索代价之间的变化关系。在一些实施例中，深度学习算法的搜索代价与图像相似度阈值之间的变化关系可如上图4或图5所示。703，根据该变化关系，得到深度学习算法的最小搜索代价。可以理解，在得到不同图像相似度阈值与深度学习算法的搜索代价之间的变化关系后，不难得到深度学习算法的最小搜索代价。例如上图4所示，当图像相似度阈值取i时，深度学习算法的搜索代价最小，趋近于0。可以理解，通过上述方法可以确定使用深度学习进行图像搜索时，最小搜索代价以及该最小搜索代价所对应的相似度阈值。同理，利用同样的方法，可以得到不同的搜索算法，例如上文提及的词袋匹配算法、哈希索引算法的最小搜索代价。其中，使用词袋模型算法提取的图像特征与使用深度学习算法提取的图像特征不同。具体地，使用词袋模型算法提取的图像特征为尺度不变特征转换描述子，SIFT特征是图像的局部特征，例如图像中某物体的边缘、曲率等，这些图像不随图像的旋转、尺度缩放、亮度变化、颜色变化等变化，而深度学习算法提取的图像特征一般为图像的整体特征，例如上文提及的图像灰度值、颜色等。因此，使用词袋模型算法和深度学习算法得到的某查询图像的特征匹配图像会存在一定差异，其搜索代价也存在一定的差异，而哈希索引算法的本质与深度学习算法本质相同，区别在于哈希索引算法为了节省的计算资源或处理资源，将高维的特征向量利用哈希函数转为低维的特征向量，例如将256维的特征向量转为，但是可以理解，降维处理必然会损失图像的特征信息，因此哈希索引算法与词袋模型算法、深度学习算法之间的搜索代价也有一定差异。故可通过比较三者的最小搜索代价，确定哪种搜索算法为最佳搜索算法。具体地，如图8所示，包括：801，利用上述方法600和700，分别得到词袋模型算法、哈希索引算法在上述数据集上的最小搜索代价。其中，利用上述方法600确定词袋模型算法下，某一查询图像对应的特征匹配图像的方法与利用深度学习算法得到某一查询图像对应的特征匹配图像的方法一致，具体如下：1）利用词袋模型算法对应的神经网络模型提取查询图像的特征，得到查询图像的特征向量；2）然后利用词袋模型算法对应的神经网络模型提取目标数据集中其他图像的特征，得到其他图像的特征向量；3）计算查询图像特征向量与其他图像特征向量之间的相似度；4）将相似度超过上述图像相似度阈值的图像输出，即可得到查询图像的特征匹配图像。其中，利用上述方法600确定哈希索引算法下，某一查询图像对应的特征匹配图像的方法与利用深度学习算法得到某一查询图像对应的特征匹配图像的方法一致，可参考上述描述，此处不再赘述。802，根据深度学习算法、词袋模型算法、哈希索引算法及其各自对应的最小搜索代价，选择搜索代价最小的算法作为该数据集对应的最佳搜索算法。下面结合图9介绍本申请涉及的汽车100的车载设备900的硬件结构示意图。如图9所示，该汽车100的车载设备900包括处理器210、存储器211、电源230、天线1、天线2、无线通信模块240、定位模块260、传感器模块280、音频模块270、鸣笛按键220、显示屏294和车载摄像头292等。其中，传感器模块250中包括：方向传感器280A、陀螺仪传感器280B、加速度传感器280C、距离传感器280D。音频模块270包括高频喇叭270A、车载音箱270B、麦克风270C。车载设备900的各个器件之间可利用总线实现连接。可以理解的是，本实施例示意的结构并不构成对上述车载设备900的具体限定。在另一些实施例中，上述车载设备900可以包括比图示更多或更少的部件，或者组合某些部件，或者拆分某些部件，或者不同的部件布置。图示的部件可以以硬件、软件或软件和硬件的组合实现。其中，处理器210是车载设备900的控制中心，可以是一个处理器，也可以是多个处理元件的统称。例如，处理器210是一个中央处理器，也可是特定集成电路，或是被配置成实施本申请实施例的一个或多个集成电路，例如：一个或多个微处理器，或，一个或多个现场可编程门阵列。处理器210可通过运行或执行存储在存储器221内的软件程序，以及调用存储在存储器221内的数据，执行车载设备900的各种功能。另外，处理器210可以收集自身车载设备900所在车辆的车门状态、气囊状态等车身信息。在一些实施例中，处理器210可以生成广播无线报文。另一些实施例中，处理器210还可以处理无线通信模块240接收到的无线报文，根据无线报文中的位置信息确定出距离车载设备900距离最近的车辆，以及车载设备900所在车辆行驶方向相同的车辆。存储器221可以是随机存储存储器如，双倍数据速率，闪存，只读存储器或可存储静态信息和指令的其他类型的静态存储设备，或者可存储信息和指令的其他类型的动态存储设备，也可以是电可擦可编程只读存储器、只读光盘或其他光盘存储、光碟存储、磁盘存储介质或其他磁存储设备、或者能够用于携带或存储具有指令或数据结构形式的期望的程序代码并能够由计算机存储的任何其他介质，但不限于此。存储器221可以是独立存在，通过总线与处理器221相连接。存储器221也可以和处理器210集成在一起。其中，存储器221可用于存储执行本申请方案的软件程序，并由处理器210来控制执行。在一些实施例中，存储器221还可以上文各实施例中涉及的查询图像数据，目标数据集、内联匹配图像数据、特征匹配图像数据等。电源230可用于为车载设备900的各个部件，如处理器210、存储器221等供电。定位模块260可以提供全球导航卫星系统的解决方案，以实现包含该车载设备900的车辆的定位功能。定位模块260可经由天线1接收电磁波，将电磁波信号调频以及滤波处理，将处理后的信号发送到处理器210，以便处理器210确定设备的位置信息。方向传感器280A可以用于确定车载设备900的方向信息。在一些实施例中，可以通过方向传感器确定车载设备所在车辆的行驶方向。陀螺仪传感器280B可以用于确定车载设备900的运动姿态，例如，直行、转弯和倒退等。在一些实施例中，陀螺仪传感器280B还可以用于导航，可以通过陀螺仪传感器280B的数据确定车载设备所在车辆的运动姿态。在一些实施例中，陀螺仪传感器280B还可以用于检测出车门的状态。加速度传感器280C可以检测车载设备900所在车辆在行驶方向上加速度的大小。当车载设备900所在车辆处于静止状态时，还可以检测出车载设备所在车辆的重力的大小和重力方向，使得可以根据重力方向识别出车辆的姿态。距离传感器280D，用于测量车载设备900所在车辆与周围车辆之间的距离。车载设备900可以通过红外线或激光测量距离。在一些实施例中，车载设备900在行驶过程中，车载设备900可以利用距离传感器280D测距，确定出距离车载设备900所在车辆最近的车辆。在其他实施例中，传感器模块还可以包括角速度传感器、雷达传感器、爆震传感器和水温传感器等。车载设备900可以通过音频模块270，高频喇叭270A，车载音箱270B和麦克风270C，以及应用处理器等实现音频功能。例如，发出鸣笛，播放音乐，播放导航声音等。音频模块270用于将数字音频信息转换成模拟音频信号输出，也用于将模拟音频输入转换为数字音频信号。音频模块270还可以用于对音频信号编码和解码。在一些实施例中，音频模块270可以设置于处理器210中，或将音频模块270的部分功能模块设置于处理器210中。高频喇叭270A，用于将鸣笛操作转换为鸣笛声音。车载设备200在接收到用户输出的鸣笛操作之后，高频喇叭270A发出鸣笛。车载音箱270B用于将音频电信号转换为声音信号。当车载设备200播放音乐或播放导航声音时，可以通过车载音箱播放声音。麦克风270C，也称“话筒”，“传声器”，用于将声音信号转换为电信号。当用户发出语音命令，或者用户通过人嘴靠近麦克风270C发声时，将声音信号输入到麦克风270C。车载设备900可以设置至少一个麦克风270C。在另一些实施例中，车载设备900可以设置两个麦克风270C，除了采集声音信号，还可以实现降噪功能。鸣笛按键220可以是机械按键，也可以是触摸式按键。车载设备900通过图形处理器，显示屏294，以及应用处理器等实现显示功能。GPU为图像处理的微处理器，连接显示屏294和应用处理器。GPU用于执行数学和几何计算，用于图形渲染。处理器210可包括一个或多个GPU，其执行程序指令以生成或改变显示信息。显示屏294用于显示图像，视频等。显示屏294包括显示面板。显示面板可以采用液晶显示屏，有机发光二极管，有源矩阵有机发光二极体或主动矩阵有机发光二极体 ，柔性发光二极管，量子点发光二极管等。在一些实施例中，显示屏294可以显示汽车100构建的视觉地图。车载摄像头291用于捕获静态图像或视频。物体通过镜头生成光学图像投射到感光元件。感光元件可以是电荷耦合器件或互补金属氧化物半导体光电晶体管。感光元件把光信号转换成电信号，之后将电信号传递给ISP转换成数字图像信号。ISP将数字图像信号输出到DSP加工处理。DSP将数字图像信号转换成标准的RGB，YUV等格式的图像信号。在一些实施例中，车载设备200可以包括1个或N个摄像头291，N为大于1的正整数。以上各实施例中的方法均可以在具有上述硬件结构的车载设备900中实现。本申请实施例还提供了一种电子设备，该电子设备包括：至少一个处理器、存储器以及存储在所述存储器中并可在所述至少一个处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述任意各个方法实施例中的步骤。本申请实施例还提供了一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序被处理器执行时实现可实现上述各个方法实施例中的步骤。本申请实施例提供了一种计算机程序产品，当计算机程序产品在移动终端上运行时，使得移动终端执行时实现可实现上述各个方法实施例中的步骤。所述集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请实现上述实施例方法中的全部或部分流程，可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于计算机可读存储介质中，该计算机程序在被处理器执行时，可实现上述各个方法实施例的步骤。其中，所述计算机程序包括计算机程序代码，所述计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。所述计算机可读介质至少可以包括：能够将计算机程序代码携带到拍照装置/终端设备的任何实体或装置、记录介质、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质。例如U盘、移动硬盘、磁碟或者光盘等。在某些司法管辖区，根据立法和专利实践，计算机可读介质不可以是电载波信号和电信信号。在上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述或记载的部分，可以参见其它实施例的相关描述。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。在本申请所提供的实施例中，应该理解到，所揭露的装置/网络设备和方法，可以通过其它的方式实现。例如，以上所描述的装置/网络设备实施例仅仅是示意性的，例如，所述模块或单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通讯连接可以是通过一些接口，装置或单元的间接耦合或通讯连接，可以是电性，机械或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。以上描述中，为了说明而不是为了限定，提出了诸如特定系统结构、技术之类的具体细节，以便透彻理解本申请实施例。然而，本领域的技术人员应当清楚，在没有这些具体细节的其它实施例中也可以实现本申请。在其它情况中，省略对众所周知的系统、装置、电路以及方法的详细说明，以免不必要的细节妨碍本申请的描述。应当理解，当在本申请说明书和所附权利要求书中使用时，术语“包括”指示所描述特征、整体、步骤、操作、元素和/或组件的存在，但并不排除一个或多个其它特征、整体、步骤、操作、元素、组件和/或其集合的存在或添加。还应当理解，在本申请说明书和所附权利要求书中使用的术语“和/或”是指相关联列出的项中的一个或多个的任何组合以及所有可能组合，并且包括这些组合。如在本申请说明书和所附权利要求书中所使用的那样，术语“如果”可以依据上下文被解释为“当...时”或“一旦”或“响应于确定”或“响应于检测到”。类似地，短语“如果确定”或“如果检测到”可以依据上下文被解释为意指“一旦确定”或“响应于确定”或“一旦检测到”或“响应于检测到”。另外，在本申请说明书和所附权利要求书的描述中，术语“第一”、“第二”、“第三”等仅用于区分描述，而不能理解为指示或暗示相对重要性。在本申请说明书中描述的参考“一个实施例”或“一些实施例”等意味着在本申请的一个或多个实施例中包括结合该实施例描述的特定特征、结构或特点。由此，在本说明书中的不同之处出现的语句“在一个实施例中”、“在一些实施例中”、“在其他一些实施例中”、“在另外一些实施例中”等不是必然都参考相同的实施例，而是意味着“一个或多个但不是所有的实施例”，除非是以其他方式另外特别强调。术语“包括”、“包含”、“具有”及它们的变形都意味着“包括但不限于”，除非是以其他方式另外特别强调。以上所述实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围，均应包含在本申请的保护范围之内。
