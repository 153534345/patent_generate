标题title
芯片测试方法及系统
摘要abst
本申请涉及芯片测试方法及系统。提供了一种芯片测试系统，所述芯片测试系统包括测试器和待测芯片，其中，所述待测芯片包括：VDD管脚，所述待测芯片通过所述VDD管脚从所述测试器接收供电信号并且基于所接收的供电信号生成所述待测芯片的内部复位信号以将所述待测芯片复位；SWD管脚，所述待测芯片在测试模式下通过所述SWD管脚与所述测试器进行单线通信；以及单线OWM模块，被配置为在所述待测芯片复位之后的预定时间内监控所述SWD管脚以确定所述待测芯片是否进入所述测试模式，并且响应于所述待测芯片进入所述测试模式，使用基于所述SWD管脚与所述测试器之间的单线通信从所述测试器接收到的编程比特数据对所述trim比特位进行编程。
权利要求书clms
1.一种芯片测试系统，所述芯片测试系统包括测试器和待测芯片，其中，所述待测芯片包括：VDD管脚，所述待测芯片通过所述VDD管脚从所述测试器接收供电信号并且基于所接收的供电信号生成所述待测芯片的内部复位信号以将所述待测芯片复位；SWD管脚，所述待测芯片在测试模式下通过所述SWD管脚与所述测试器进行单线通信；以及单线OWM模块，被配置为在所述待测芯片复位之后的预定时间内监控所述SWD管脚以确定所述待测芯片是否进入所述测试模式，并且响应于所述待测芯片进入所述测试模式，使用基于所述SWD管脚与所述测试器之间的单线通信从所述测试器接收到的编程比特数据对所述trim比特位进行编程。2.如权利要求2所述的测试系统，其中，所述OWM模块被配置为当在所述待测芯片复位之后的预定时间内监控到所述SWD管脚上出现预定的测试进入模式时，确定所述待测芯片进入所述测试模式。3.如权利要求2所述的测试系统，其中，所述OWM模块被配置为基于在预定的比特周期内对从所述测试器接收的编程比特数据的连续两个上升沿之间的高低电平宽度进行计数来判定所述编程比特数据为“1”还是“0”。4.如权利要求3所述的测试系统，其中，如果在所述预定的比特周期内从所述测试器接收的编程比特数据的连续两个上升沿之间的高电平宽度的计数值大于低电平宽度的计数值，则确定所述编程比特数据为“1”，反之，确定所述编程比特数据为“0”。5.如权利要求1所述的测试系统，其中，所述测试器通过将所述SWD管脚设置为低电平并持续第一预定数量的所述比特周期来向所述待测芯片发送测试开始信号，所述待测芯片对所述SWD的低电平宽度进行计数，并且在所述SWD的低电平宽度的计数值大于一预定阈值时，开始准备从所述测试器接收编程比特数据。6.如权利要求1所述的测试系统，其中，所述测试器通过将所述SWD管脚设置为高电平并持续第二预定数量的所述比特周期来向所述待测芯片发送测试停止信号，所述待测芯片对所述SWD的高电平宽度进行计数，并且在所述SWD的高电平宽度的计数值大于一预定阈值时复位其通信逻辑。7.如权利要求1所述的测试系统，其中，其中，所述测试器使用具有预定的数据传输格式的数据帧向所述待测芯片发送编程比特数据，所述具有预定的数据传输格式的数据帧包括帧头数据、地址数据和校验数据。8.如权利要求7所述的测试系统，其中，所述OWM模块被配置为检查从所述测试器接收的所述数据帧的所述帧头数据是否为预定的帧头数据，如果不是，则忽略此数据帧。9.如权利要求7所述的测试系统，其中，所述OWM模块被配置为检查从所述测试器接收的所述数据帧的所述地址数据与所述校验数据是否满足预定的关系，如果不是，则忽略此数据帧。10.一种芯片测试方法，包括以下步骤：通过待测芯片中的VDD管脚从测试器接收供电信号并且基于所接收的供电信号生成所述待测芯片的内部复位信号以将所述待测芯片复位；通过所述待测芯片中的单线OWM模块在所述待测芯片复位之后的预定时间内监控所述待测芯片的SWD管脚以确定所述待测芯片是否进入测试模式，以及响应于所述待测芯片进入所述测试模式，使用基于所述SWD管脚与所述测试器之间的单线通信从所述测试器接收到的编程比特数据对所述trim比特位进行编程。11.如权利要求10所述的方法，其中，所述OWM模块被配置为当在所述待测芯片复位之后的预定时间内监控到所述SWD管脚上出现预定的测试进入模式时，确定所述待测芯片进入所述测试模式。12.如权利要求10所述的方法，其中，所述OWM模块被配置为基于在预定的比特周期内对从所述测试器接收的编程比特数据的连续两个上升沿之间的高低电平宽度进行计数来判定所述编程比特数据为“1”还是“0”。13.如权利要求12所述的方法，其中，如果在所述预定的比特周期内从所述测试器接收的编程比特数据的连续两个上升沿之间的高电平宽度的计数值大于低电平宽度的计数值，则确定所述编程比特数据为“1”，反之，确定所述编程比特数据为“0”。14.如权利要求10所述的方法，其中，所述测试器通过将所述SWD管脚设置为低电平并持续第一预定数量的所述比特周期来向所述待测芯片发送测试开始信号，所述待测芯片对所述SWD的低电平宽度进行计数，并且在所述SWD的低电平宽度的计数值大于一预定阈值时，开始准备从所述测试器接收编程比特数据。15.如权利要求10所述的方法，其中，所述测试器通过将所述SWD管脚设置为高电平并持续第二预定数量的所述比特周期来向所述待测芯片发送测试停止信号，所述待测芯片对所述SWD的高电平宽度进行计数，并且在所述SWD的高电平宽度的计数值大于一预定阈值时复位其通信逻辑。16.如权利要求10所述的方法，其中，所述测试器使用具有预定的数据传输格式的数据帧向所述待测芯片发送编程比特数据，所述具有预定的数据传输格式的数据帧包括帧头数据、地址数据和校验数据。17.如权利要求16所述的方法，其中，所述OWM模块被配置为检查从所述测试器接收的所述数据帧的所述帧头数据是否为预定的帧头数据，如果不是，则忽略此数据帧。18.如权利要求16所述的方法，其中，所述OWM模块被配置为检查从所述测试器接收的所述数据帧的所述地址数据与所述校验数据是否满足预定的关系，如果不是，则忽略此数据帧。19.一种计算机可读存储介质，其上存储有程序指令，当所述程序指令被处理器执行时，使得所述处理器执行根据权利要求10-18任一项所述的方法。
说明书desc
技术领域本申请涉及集成电路领域，更具体地，涉及一种芯片测试方法及系统。背景技术一款芯片通常需要在设计时放置一些trim比特位，这些trim比特位的用途，一方面是在芯片ATE测试时对模拟电路进行校准，如Bandgap/Vref/ROSC的校准；另一方面是为了提供一些定制化的选项，对内部的功能进行设置，实现一定的灵活性。传统的trim方式是使用若干电性测点来对芯片中的一次性可编程存储器进行编程以实现逻辑0或者1的选择。Probe PAD会增加芯片的面积，从而导致芯片成本增加。发明内容为了解决克服上述问题，本申请提出了一种单线测试机制，其通过对芯片管脚进行功能复用，无需增加额外的Probe PAD即可实现对芯片内部trim比特位的编程。具体地，根据本申请的一个实施例，提供一种芯片测试系统，所述芯片测试系统包括测试器和待测芯片，其中，所述待测芯片包括：VDD管脚，所述待测芯片通过所述VDD管脚从所述测试器接收供电信号并且基于所接收的供电信号生成所述待测芯片的内部复位信号以将所述待测芯片复位；SWD管脚，所述待测芯片在测试模式下通过所述SWD管脚与所述测试器进行单线通信；以及单线OWM模块，被配置为在所述待测芯片复位之后的预定时间内监控所述SWD管脚以确定所述待测芯片是否进入所述测试模式，并且响应于所述待测芯片进入所述测试模式，使用基于所述SWD管脚与所述测试器之间的单线通信从所述测试器接收到的编程比特数据对所述trim比特位进行编程。根据本申请的另一实施例，提供一种芯片测试方法，包括以下步骤：通过待测芯片中的VDD管脚从测试器接收供电信号并且基于所接收的供电信号生成所述待测芯片的内部复位信号以将所述待测芯片复位；通过所述待测芯片中的单线OWM模块在所述待测芯片复位之后的预定时间内监控所述待测芯片的SWD管脚以确定所述待测芯片是否进入测试模式，以及响应于所述待测芯片进入所述测试模式，使用基于所述SWD管脚与所述测试器之间的单线通信从所述测试器接收到的编程比特数据对所述trim比特位进行编程。根据本申请的又一实施例，提供一种计算机可读存储介质，其上存储有程序指令，当所述程序指令被处理器执行时，使得所述处理器执行以下方法：通过待测芯片中的VDD管脚从测试器接收供电信号并且基于所接收的供电信号生成所述待测芯片的内部复位信号以将所述待测芯片复位；通过所述待测芯片中的单线OWM模块在所述待测芯片复位之后的预定时间内监控所述待测芯片的SWD管脚以确定所述待测芯片是否进入测试模式，以及响应于所述待测芯片进入所述测试模式，使用基于所述SWD管脚与所述测试器之间的单线通信从所述测试器接收到的编程比特数据对所述trim比特位进行编程。取决于实施例，可以实现一个或多个效果。参考下面的详细描述和附图，将完全理解本申请的这些优点、各种附加目的、特征、以及好处。附图说明图1是示出了根据本申请的单线测试系统的示意图；图2示出根据本申请的待测芯片的各功能模块；图3是示出了根据本申请的侦测芯片是否进入测试模式的流程图；图4是示出了根据本申请的侦测芯片是否进入测试模式的时序图；图5示出了根据本申请的比特数据的比特周期的示例；图6示出了根据本申请的表示比特数据为1的信号波形的示例；图7示出了根据本申请的表示比特数据为0的信号波形的示例；图8示出了测试器发出的测试开始信号的波形的示例；图9示出了测试器发出的测试停止信号的波形的示例；图10示出了用于本申请的测试方法的数据传输格式的示例；以及图11是示出了根据本申请的测试方法的流程图。具体实施方式下面将详细描述本申请各个方面的特征和示例性实施例。下面的描述涵盖了许多具体细节，以便提供对本申请的全面理解。但是，对于本领域技术人员来说显而易见的是，本申请可以在不需要这些具体细节中的一些细节的情况下实施。下面对实施例的描述仅仅是为了通过示出本申请的示例来提供对本申请的技术方案的更清楚的理解。本申请绝不限于下面所提出的任何具体配置，而是在不脱离本申请的精神的前提下覆盖了相关特征、结构、操作等的任何修改、替换和改进。图1是示出了根据本申请的单线测试系统的示意图。如图1所示，图中SWD是待测芯片的测试复用管脚，在测试时用于与测试器进行单线通信；VDD是待测芯片的电源管脚，在测试时通过其由测试器供电给待测芯片。图2示出根据本申请的待测芯片功能模块。如图2所示，该芯片包含诸如Bandgap/LDO/VREF/ROSC的基本的模拟电路，这些模拟电路都带有校准比特位，通过trim比特位进行校准。芯片中的上电复位模块产生芯片的内部复位信号reset；ROSC是RC振荡器，产生芯片的内部工作时钟信号clk。Trim比特位模块是存放配置参数的一次性可编程存储器，即，OTP。普通功能模块负责运行待测芯片的主功能逻辑；单线模块用于在测试模式下对待测芯片内部的trim比特位进行编程。该芯片可工作于普通模式和测试模式两种状态。在普通模式下，SWD是普通功能管脚，其功能根据芯片实际需求进行定义；在测试模式下，SWD被复用为测试管脚。图3示出了侦测芯片是否进入测试模式的流程并且图4示出了侦测芯片是否进入测试模式的时序图。如图3所示，在芯片上电后，内部POR模块释放复位信号以将待测芯片复位；OWM模块在待测芯片复位之后的Twait时间内监控SWD管脚以确定待测芯片是否进入测试模式。具体地，如果OWM模块监测到SWD管脚出现预定的模式，则待测芯片进入测试模式，从而开启单线通信功能以便与测试器进行通信，否则，待测芯片在Twait时间之后进入正常运行模式。根据本申请的一个实施例，Twait值例如可以被设置为4ms-200ms。测试器控制待测芯片的上电时序，在上电Twait期间持续发送测试进入模式，以确保待测芯片能够进入测试模式，如图4所示。以下将参照图5-10详细描述根据本申请的测试方法。当芯片上电复位后，OWM模块在侦测到SWD管脚出现预定的模式之后启动SWD的单线通信功能。此处需要注意的是，由于待测芯片内部的ROSC还未经过trim，因此其初始频率与设计频率之间会出现较大误差，典型的具有30％-50％的误差。因此，需要设计一种对芯片内部时钟频率偏差不敏感的通信方式。为此，本申请预先设置一单位时间，其值例如可以等于芯片内部ROSC的一个理想时钟周期。根据设置好的单位时间，将通过SWD管脚从测试器接收到的比特数据的比特周期设置为例如40TU，如图5所示。测试器严格按照30TU/10TU or 10TU/30TU的高低电平占空比发送每个比特数据。此处需要注意，虽然本申请中将比特周期设置为40TU，也可以根据具体需要设置其它长度的比特周期。此外，虽然本申请表示了测试器按照30TU/10TU or 10TU/30TU的高低电平占空比发送每个比特数据，也可以根据具体需要设置其它占空比。待测芯片的OWM模块的接收逻辑对所接收的每个比特数据的连续两个上升沿之间的高低电平宽度进行计数，计数值分别为CntHigh和CntLow。如果高电平的计数值大于低电平的计数，即，CntHigh＞CntLow，则判定所接收的比特数据为1，如图6所示；反之则判定所接收的比特数据为0，如图7所示。换言之，由于待测芯片的内部ROSC频率有偏差，OWM模块不需根据比特数据的高低电平的宽度的绝对长度来判断比特数据为1还是为0，而是根据比特数据的高低电平的相对大小来进行判断。在所述待测芯片进入测试模式后，测试器通过拉低待测芯片的SWD管脚且保持大于预定数量的单位时间的时间来向待测芯片发出测试开始信号。待测芯片的OWM模块检测SWD管脚的电平，用待测芯片的内部时钟在SWD＝0的时间内进行计数，当计数值超过一个预定阈值，例如60时，待测芯片开始准备接收来自测试器的一帧数据，如图8所示。在测试器向待测芯片发送完编程比特数据后，其通过拉高SWD管脚的电平且保持大于预定数量的单位时间的时间来先向待测芯片发出测试停止信号。待测芯片的OWM模块检测SWD管脚的电平，用待测芯片的内部时钟在SWD＝1的时间内进行计数，当计数值超过一个预定阈值，例如100时，待测芯片复位一次通信逻辑，如图9所示。具体地，根据本申请的一个实施例，可以使用具有预定的数据传输格式的数据帧向所述待测芯片发送编程比特数据以对待测芯片内部的OTP进行编程。根据本申请的一个实施例，所述具有预定的数据传输格式的数据帧包括帧头数据段、地址数据段和校验数据段，其中，帧头数据段用于区分数据帧类型，地址数据段用于指示对OTP的哪个位置进行编程，并且校验数据段用于对数据帧进行校验以确定其是否为正确的编程数据帧。图10示出了根据本申请的一个实施例的由测试器发送的用于对待测芯片的OTP进行编程的数据帧的数据传输格式。如图10所示，测试器可以发送具有如所示的数据传输格式的数据帧：Satrt_1010_B11B10B9B8B7B6_B5B4B3B2B1B0_Stop，其中，该数据帧有16比特，开头4比特数据1010作为帧头区分数据帧类型，中间6比特数据是OTP地址，表示对该比特数据指向的OTP的位置进行编程，最后的6比特数据是对中间6比特数据的取反。在操作中，待测芯片的OWM模块检查数据帧的开头4比特数据是否为1010，如果不是，则忽略此数据帧。进一步地，待测芯片的OWM模块检查数据帧中的表示OTP地址的中间6比特数据与最后6比特数据是否满足取反关系，如果不是，则忽略数据帧。进一步地，如果待测芯片的OWN模块检测到数据帧的开头4比特数据为1010并且表示OTP地址的中间6比特数据与最后6比特数据满足取反关系，其开始在测试模式下对待测芯片内部的trim比特位进行编程。虽然在本申请中描述了使用预定数据传输格式的数据帧对待测芯片的内部的OTP进行编程，但是可以理解的是还可以根据具体情况设计其它的数据传输格式，例如，可以根据实际情况使用具有更多或更少比特数据的数据帧，可以设置其它的帧头数据，并且使用其它的校验方法来判断该数据帧是否为正确的编程数据帧。图11示出了根据本申请的测试方法的流程图。如图11所示，所述方法包括：步骤S1102，通过待测芯片中的VDD管脚从测试器接收供电信号并且基于所接收的供电信号生成所述待测芯片的内部复位信号以将所述待测芯片复位；步骤S1104，通过所述待测芯片中的单线OWM模块在所述待测芯片复位之后的预定时间内监控所述待测芯片的SWD管脚以确定所述待测芯片是否进入测试模式；以及步骤S1106，响应于所述待测芯片进入所述测试模式，使用基于所述SWD管脚与所述测试器之间的单线通信从所述测试器接收到的编程比特数据对所述trim比特位进行编程。在本申请的一些实施例中，所述OWM模块被配置为当在所述待测芯片复位之后的预定时间内监控到所述SWD管脚上出现预定的测试进入模式时，确定所述待测芯片进入所述测试模式。在本申请的一些实施例中，所述OWM模块被配置为基于在预定的比特周期内对从所述测试器接收的编程比特数据的连续两个上升沿之间的高低电平宽度进行计数来判定所述编程比特数据为“1”还是“0”。在本申请的一些实施例中，如果在所述预定的比特周期内从所述测试器接收的编程比特数据的连续两个上升沿之间的高电平宽度的计数值大于低电平宽度的计数值，则确定所述编程比特数据为“1”，反之，确定所述编程比特数据为“0”。在本申请的一些实施例中，所述测试器通过将所述SWD管脚设置为低电平并持续第一预定数量的所述比特周期来向所述待测芯片发送测试开始信号，所述待测芯片对所述SWD的低电平宽度进行计数，并且在所述SWD的低电平宽度的计数值大于一预定阈值时，开始准备从所述测试器接收编程比特数据。在本申请的一些实施例中，所述测试器通过将所述SWD管脚设置为高电平并持续第二预定数量的所述比特周期来向所述待测芯片发送测试停止信号，所述待测芯片对所述SWD的高电平宽度进行计数，并且在所述SWD的高电平宽度的计数值大于一预定阈值时复位其通信逻辑。在本申请的一些实施例中，所述测试器使用具有预定的数据传输格式的数据帧向所述待测芯片发送编程比特数据，所述具有预定的数据传输格式的数据帧包括帧头数据、地址数据和校验数据。在本申请的一些实施例中，所述OWM模块被配置为检查从所述测试器接收的所述数据帧的所述帧头数据是否为预定的帧头数据，如果不是，则忽略此数据帧。在本申请的一些实施例中，所述OWM模块被配置为检查从所述测试器接收的所述数据帧的所述地址数据与所述校验数据是否满足预定的关系，如果不是，则忽略此数据帧。尽管已经描述了本申请的具体实施例，但是本领域技术人员将理解的是，存在于所描述的实施例等同的其他实施例。因此，将理解的是，本申请不限于具体示出的实施例，而仅受所附权利要求的范围的限制。
