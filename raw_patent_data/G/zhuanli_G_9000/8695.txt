标题title
一种剩余电量估算方法、装置、设备及存储介质
摘要abst
本申请实施例公开了一种剩余电量估算方法、装置、设备及存储介质。本申请实施例提供的技术方案根据飞行任务在不同飞行阶段的剩余飞行时间以及不同飞行阶段的工作电流，准确估计无人设备在各个飞行阶段的预计耗电量，并根据预计耗电量和无人设备当前可用电量准确估算无人设备在执行飞行任务后，所剩余的预计剩余电量，提高对无人设备剩余电量的估算准确度，减少因无人设备剩余电量估算不准确而导致无人设备无法正常降落的情况，保证无人设备的飞行安全。
权利要求书clms
1.一种剩余电量估算方法，其特征在于，包括：获取飞行任务的不同飞行阶段对应的剩余飞行时间；根据所述剩余飞行时间以及不同飞行阶段对应的工作电流，确定无人设备在不同飞行阶段对应的预计耗电量；根据所述预计耗电量和所述无人设备的当前可用电量，确定所述无人设备在完成所述飞行任务后的预计剩余电量。2.根据权利要求1所述的剩余电量估算方法，其特征在于，所述预计剩余电量是在所述无人设备执行所述飞行任务前估算的，所述不同飞行阶段对应的剩余飞行时间为不同飞行阶段对应的规划飞行时间。3.根据权利要求2所述的剩余电量估算方法，其特征在于，在确定所述预计剩余电量后，所述方法还包括：基于所述预计剩余电量与设定的剩余电量阈值的比较结果，确定所述预计剩余电量是否满足所述飞行任务的执行要求。4.根据权利要求3所述的剩余电量估算方法，其特征在于，所述方法还包括：在所述预计剩余电量不满足所述执行要求时，调整所述飞行任务的目标飞行阶段的规划飞行时间。5.根据权利要求4所述的剩余电量估算方法，其特征在于，所述调整所述飞行任务的目标飞行阶段的规划飞行时间，包括：根据所述当前可用电量、所述飞行任务的起飞阶段对应的起飞耗电量和所述飞行任务的降落阶段对应的降落耗电量，确定所述飞行任务的中间飞行阶段对应的第一可用电量；根据所述第一可用电量和中间飞行阶段对应的工作电流调整所述规划飞行时间，以得到第一飞行调整时间。6.根据权利要求2所述的剩余电量估算方法，其特征在于，所述不同飞行阶段对应的工作电流包括不同飞行阶段对应的经验平均电流。7.根据权利要求1所述的剩余电量估算方法，其特征在于，所述无人设备包括固定翼和旋翼，所述飞行阶段至少包括以下一种或多种：基于旋翼的垂直起飞阶段、基于固定翼的滑行飞行阶段和基于旋翼的垂直降落阶段；其中，不同的飞行阶段对应不同的工作电流。8.根据权利要求1所述的剩余电量估算方法，其特征在于，所述预计剩余电量是在所述无人设备执行所述飞行任务的过程中估算的，所述不同飞行阶段对应的剩余飞行时间是根据不同飞行阶段对应的规划飞行时间和已飞行时间确定的。9.根据权利要求8所述的剩余电量估算方法，其特征在于，在确定所述预计剩余电量后，所述方法还包括：基于所述预计剩余电量与设定的剩余电量阈值的比较结果，确定所述预计剩余电量是否满足所述飞行任务中当前飞行阶段和剩余飞行阶段的执行要求。10.根据权利要求9所述的剩余电量估算方法，其特征在于，所述方法还包括：在所述预计剩余电量不满足所述执行要求时，调整所述飞行任务中当前飞行阶段和/或剩余飞行阶段的规划飞行时间，或返航充电后进行断点续飞。11.根据权利要求10所述的剩余电量估算方法，其特征在于，所述调整所述飞行任务中当前飞行阶段和/或剩余飞行阶段的规划飞行时间，包括：根据所述当前可用电量、所述飞行任务的降落阶段对应的降落耗电量，确定所述飞行任务的中间飞行阶段对应的第二可用电量；根据所述第二可用电量、当前飞行阶段和剩余飞行阶段对应的工作电流调整所述飞行任务中当前飞行阶段和/或剩余飞行阶段的规划飞行时间，以得到第二飞行调整时间。12.根据权利要求8所述的剩余电量估算方法，其特征在于，当前飞行阶段对应的工作电流为所述无人设备当前的实际工作电流，剩余飞行阶段对应的工作电流为经验平均电流。13.根据权利要求12所述的剩余电量估算方法，其特征在于，所述方法还包括：根据无人设备传感数据确定飞行工况；根据所述飞行工况确定电流修正系数，并根据所述电流修正系数修正所述经验平均电流。14.一种剩余电量估算装置，其特征在于，包括时间获取模块、耗电计算模块和电量估算模块，其中：所述时间获取模块，用于获取飞行任务的不同飞行阶段对应的剩余飞行时间；所述耗电计算模块，用于根据所述剩余飞行时间以及不同飞行阶段对应的工作电流，确定无人设备在不同飞行阶段对应的预计耗电量；所述电量估算模块，用于根据所述预计耗电量和所述无人设备的当前可用电量，确定所述无人设备在完成所述飞行任务后的预计剩余电量。15.一种无人设备，其特征在于，包括：存储器以及一个或多个处理器；所述存储器，用于存储一个或多个程序；当所述一个或多个程序被所述一个或多个处理器执行，使得所述一个或多个处理器实现如权利要求1-13任一项所述的剩余电量估算方法。16.一种包含计算机可执行指令的存储介质，其特征在于，所述计算机可执行指令在由计算机处理器执行时用于执行如权利要求1-13任一项所述的剩余电量估算方法。
说明书desc
技术领域本申请实施例涉及无人设备控制技术领域，尤其涉及一种剩余电量估算方法、装置、设备及存储介质。背景技术在无人设备执行飞行任务前，为了保证无人设备在执行飞行任务后可安全返航降落，需要对无人设备在执行飞行任务后的剩余电量进行估算，并确定剩余电量是否满足剩余电量阈值要求。目前对剩余电量的估算一般是基于无人设备中电池放电时的电流值计算平均电流，并根据平均电流和飞行时间计算出执行飞行任务所消耗的电量，并判断剩余电量是否满足剩余电量阈值要求。但是这种剩余电量的估算方式只适用于功率相对固定的无人设备中，在多模式切换的无人设备中，在飞行过程中容易出现较大的功率突变的情况，剩余电量估算准确度较差。发明内容本申请实施例提供一种剩余电量估算方法、装置、设备及存储介质，以解决现有技术中在飞行过程中容易出现较大的功率突变，剩余电量估算准确度较差的技术问题，提高对无人设备剩余电量的估算准确度。在第一方面，本申请实施例提供了一种剩余电量估算方法，包括：获取飞行任务的不同飞行阶段对应的剩余飞行时间；根据所述剩余飞行时间以及不同飞行阶段对应的工作电流，确定无人设备在不同飞行阶段对应的预计耗电量；根据所述预计耗电量和所述无人设备的当前可用电量，确定所述无人设备在完成所述飞行任务后的预计剩余电量。在第二方面，本申请实施例提供了一种剩余电量估算装置，包括时间获取模块、耗电计算模块和电量估算模块，其中：所述时间获取模块，用于获取飞行任务的不同飞行阶段对应的剩余飞行时间；所述耗电计算模块，用于根据所述剩余飞行时间以及不同飞行阶段对应的工作电流，确定无人设备在不同飞行阶段对应的预计耗电量；所述电量估算模块，用于根据所述预计耗电量和所述无人设备的当前可用电量，确定所述无人设备在完成所述飞行任务后的预计剩余电量。在第三方面，本申请实施例提供了一种无人设备，包括：存储器以及一个或多个处理器；所述存储器，用于存储一个或多个程序；当所述一个或多个程序被所述一个或多个处理器执行，使得所述一个或多个处理器实现如第一方面所述的剩余电量估算方法。在第四方面，本申请实施例提供了一种包含计算机可执行指令的存储介质，所述计算机可执行指令在由计算机处理器执行时用于执行如第一方面所述的剩余电量估算方法。本申请实施例根据飞行任务在不同飞行阶段的剩余飞行时间以及不同飞行阶段的工作电流，准确估计无人设备在各个飞行阶段的预计耗电量，并根据预计耗电量和无人设备当前可用电量准确估算无人设备在执行飞行任务后，所剩余的预计剩余电量，提高对无人设备剩余电量的估算准确度，减少因无人设备剩余电量估算不准确而导致无人设备无法正常降落的情况，保证无人设备的飞行安全。附图说明图1是本申请实施例提供的一种剩余电量估算方法的流程图；图2是本申请实施例提供的一种飞行任务的不同飞行阶段的示意图；图3是本申请实施例提供的另一种剩余电量估算方法的流程图；图4是本申请实施例提供的另一种剩余电量估算方法的流程图；图5是本申请实施例提供的一种剩余电量估算装置的结构示意图；图6是本申请实施例提供的一种无人设备的结构示意图。具体实施方式为了使本申请的目的、技术方案和优点更加清楚，下面结合附图对本申请具体实施例作进一步的详细描述。可以理解的是，此处所描述的具体实施例仅仅用于解释本申请，而非对本申请的限定。另外还需要说明的是，为了便于描述，附图中仅示出了与本申请相关的部分而非全部内容。在更加详细地讨论示例性实施例之前应当提到的是，一些示例性实施例被描述成作为流程图描绘的处理或方法。虽然流程图将各项操作描述成顺序的处理，但是其中的许多操作可以被并行地、并发地或者同时实施。此外，各项操作的顺序可以被重新安排。当其操作完成时所述处理可以被终止，但是还可以具有未包括在附图中的附加步骤。所述处理可以对应于方法、函数、规程、子例程、子程序等等。图1给出了本申请实施例提供的一种剩余电量估算方法的流程图，本申请实施例提供的剩余电量估算方法可以由剩余电量估算装置来执行，该剩余电量估算装置可以通过硬件和/或软件的方式实现，并集成在无人设备中。下述以剩余电量估算装置执行剩余电量估算方法为例进行描述。参考图1，该剩余电量估算方法包括：S101：获取飞行任务的不同飞行阶段对应的剩余飞行时间。示例性的，在需要对无人设备执行飞行任务后的剩余电量进行估算时，获取无人设备在飞行任务的不同飞行阶段对应的剩余飞行时间。本方案提供的剩余飞行时间根据无人设备在执行飞行任务前进行航线规划时的规划飞行时间进行确定，还可以是在执行飞行任务过程中根据不同飞行阶段对应的规划飞行时间和已飞行时间进行确定，即无论起飞前还是飞行过程中均存在剩余飞行时间，只是在飞行过程中，正在进行的飞行阶段的剩余时间要减去已飞行时间以及已经完成的飞行阶段的飞行时间为0，而在起飞前，各个飞行阶段的剩余飞行时间与规划飞行时间相等。其中规划飞行时间为在进行航线规划时，每个飞行阶段所规划的需要耗费的时间。示例性的，无人设备根据所要执行的任务进行航线规划，得到包括不同飞行阶段的飞行航线，以及各个飞行阶段对应的规划飞行时间。其中飞行阶段可以是无人设备以不同飞行模式进行飞行的阶段，其中飞行模式包括但不限于垂直起飞、垂直下降、盘旋上升、盘旋下降、固定翼滑翔、巡航、飞行喷药、固定翼滑降等，并且无人设备以不同飞行模式飞行时，其功率存在区别，对应的，无人设备的电池在不同飞行模式下的放电电流不同。S102：根据所述剩余飞行时间以及不同飞行阶段对应的工作电流，确定无人设备在不同飞行阶段对应的预计耗电量。在确定无人机所要执行的飞行任务对应的飞行阶段以及各个飞行阶段对应的剩余飞行时间后，进一步确定各个飞行阶段所对应的工作电流。其中无人设备记录有不同飞行阶段所对应的工作电流。其中，工作电流可以是不同飞行阶段对应的经验平均电流，例如对无人设备在以不同飞行模式下飞行时，电池所产生的平均电流进行统计得到经验平均电流，从而确定并记录不同飞行阶段对应的工作电流，另外，工作电流还可以是根据无人设备的硬件配置在不同工作模式下的设计工作电流进行确定。示例性的，根据不同飞行阶段对应的剩余飞行时间和工作电流，估算无人设备在各个飞行阶段所消耗的预计耗电量。例如，基于安时积分公式计算各个飞行阶段所消耗的预计耗电量，本实施提供的电量的表示方式可以是电量消耗量，还可以是以无人设备电池的电池总容量为基准，将所消耗电量占电池总容量的百分比来表示电量，本实施例以所消耗电量占电池总容量的百分比为例进行描述，例如电池总容量为100Ah，其中一个飞行阶段预估的消耗电量为10Ah，那么对应的第一预计消耗电量为10％。在具体的实施方式中，可基于以下公式计算各个飞行阶段对应的预计耗电量：SOC＝/C*100％，其中SOC为飞行阶段对应的预计耗电量，I为工作电流，T为规划飞行时间，C为电池总容量。S103：根据所述预计耗电量和所述无人设备的当前可用电量，确定所述无人设备在完成所述飞行任务后的预计剩余电量。示例性的，根据飞行任务的各个飞行阶段对应的预计耗电量预估无人设备完成飞行任务所消耗的耗电总量，并根据耗电总量和无人设备的当前可用电量，估算无人设备在完成该飞行任务后的预计剩余电量。图2是本申请实施例提供的一种飞行任务的不同飞行阶段的示意图，如图2所示，假设飞行任务共有3个不同的飞行阶段：起飞阶段、巡航阶段和降落阶段，起飞阶段对应的规划时间和工作电流分别为T1和I1，巡航阶段对应的规划时间和工作电流分别为T2和I2，降落阶段对应的规划时间和工作电流分别为T3和I3。那么这3个不同的飞行阶段所对应的预计耗电量分别为：SOC1＝/C*100％SOC2＝/C*100％SOC3＝/C*100％其中SOC1为起飞阶段对应的预计耗电量，SOC2为巡航阶段对应的预计耗电量，SOC3为降落阶段对应的预计耗电量。可知无人设备在完成飞行任务3个飞行阶段的飞行时间总共消耗的耗电总量为SOC1+SOC2+SOC3。进一步的，无人设备在完成飞行任务后的预计剩余电量为：SOCremain＝SOCnow-其中，SOCremain为预计剩余电量，SOCnow为当前可用电量。上述，根据飞行任务在不同飞行阶段的剩余飞行时间以及不同飞行阶段的工作电流，准确估计无人设备在各个飞行阶段的预计耗电量，并根据预计耗电量和无人设备当前可用电量准确估算无人设备在执行飞行任务后，所剩余的预计剩余电量，提高对无人设备剩余电量的估算准确度，减少因无人设备剩余电量估算不准确而导致无人设备无法正常降落的情况，保证无人设备的飞行安全。在上述实施例的基础上，图3给出了本申请实施例提供的另一种剩余电量估算方法的流程图，该剩余电量估算方法是对上述剩余电量估算方法的具体化。参考图3，该剩余电量估算方法包括：S201：获取飞行任务的不同飞行阶段对应的剩余飞行时间。S202：根据所述剩余飞行时间以及不同飞行阶段对应的工作电流，确定无人设备在不同飞行阶段对应的预计耗电量。其中，本实施例提供的不同飞行阶段对应的工作电流包括不同飞行阶段对应的经验平均电流。在一个实施例中，无人设备包括固定翼和旋翼，则本实施例提供的飞行阶段至少包括以下一种或多种：基于旋翼的垂直起飞阶段、基于固定翼的滑行飞行阶段和基于旋翼的垂直降落阶段。其中，不同的飞行阶段对应不同的工作电流。则可根据无人设备的不同飞行阶段对应的经验平均电流分别计算不同飞行阶段对应的预计耗电量。假设垂直起飞阶段对应的规划时间和工作电流分别为T1和I1，滑行飞行阶段对应的规划时间和工作电流分别为T2和I2，垂直降落阶段对应的规划时间和工作电流分别为T3和I3。那么这3个不同的飞行阶段所对应的预计耗电量分别为：SOC1＝/C*100％SOC2＝/C*100％SOC3＝/C*100％其中SOC1为垂直起飞阶段对应的预计耗电量，SOC2为滑行飞行阶段对应的预计耗电量，SOC3为垂直降落阶段对应的预计耗电量。可知无人设备在完成飞行任务3个飞行阶段的飞行时间总共消耗的耗电总量为SOC1+SOC2+SOC3。S203：根据所述预计耗电量和所述无人设备的当前可用电量，确定所述无人设备在完成所述飞行任务后的预计剩余电量。S204：基于所述预计剩余电量与设定的剩余电量阈值的比较结果，确定所述预计剩余电量是否满足所述飞行任务的执行要求。在本实施例中，预计剩余电量是在无人设备执行飞行任务前估算的，并且不同飞行阶段对应的剩余飞行时间为不同飞行阶段对应的规划飞行时间。进一步的，在得到无人设备完成飞行任务后的预计剩余电量后，可根据预计剩余电量与预先设定的剩余电量阈值的比较结果是否满足本次飞行任务的执行要求。本实施例提供的剩余电量阈值可理解为确保无人设备能安全着陆所需要的最低电量。具体的，将预计剩余电量和设定的剩余电量阈值进行比较，若预计剩余电量大于等于剩余电量阈值，认为预计剩余电量满足执行飞行任务对应的飞行任务的执行要求。在预计剩余电量满足执行飞行任务对应的飞行任务的执行要求时，无人设备可按照航线规划对应的飞行阶段和规划飞行时间执行飞行任务。而在预计剩余电量小于剩余电量阈值时，认为预计剩余电量不满足执行飞行任务对应的飞行任务的执行要求。在预计剩余电量不满足执行飞行任务对应的飞行任务的执行要求时，可选择终止飞行任务、充电至满足飞行任务的执行要求或者是调整不同飞行阶段的规划飞行时间以满足当前飞行任务的执行要求。例如将剩余电量阈值设置为15％，在预计剩余电量SOCremain≥15％时，满足执行飞行任务对应的飞行任务的执行要求，无人设备可按照当前航线规划执行飞行任务，而在SOCremain＜15％时，不满足执行飞行任务对应的飞行任务的执行要求。在一个实施例中，在无人设备执行所述飞行任务前，若预计剩余电量不满足执行飞行任务对应的飞行任务的执行要求，可根据无人设备当前可用电量调整不同飞行阶段的规划飞行时间以满足当前飞行任务的执行要求。基于此，本实施例提供的剩余电量估算方法还包括：S205：在所述预计剩余电量不满足所述执行要求时，调整所述飞行任务的目标飞行阶段的规划飞行时间。具体的，在预计剩余电量不满足执行飞行任务对应的飞行任务的执行要求时，按照飞行任务的执行要求对应的剩余电量阈值，根据当前可用电量调整各个飞行阶段的规划飞行时间，以得到各个飞行阶段对应的第一飞行调整时间。在一个实施例中，将飞行任务的各个飞行阶段分为航线相对难以调节的起飞阶段和降落阶段，以及航线相对容易调节的中间飞行阶段，并保证起飞阶段和降落阶段所需要的耗电量，并对中间飞行阶段的耗电量进行调整，以满足飞行任务的执行要求。基于此，本方案在根据当前可用电量调整规划飞行时间时，包括：S2051：根据所述当前可用电量、所述飞行任务的起飞阶段对应的起飞耗电量和所述飞行任务的降落阶段对应的降落耗电量，确定所述飞行任务的中间飞行阶段对应的第一可用电量。S2052：根据所述第一可用电量和中间飞行阶段对应的工作电流调整所述规划飞行时间，以得到第一飞行调整时间。具体的，确定无人设备在飞行任务的起飞阶段所需要的起飞耗电量和在降落阶段所需要的降落耗电量，并根据无人设备电池的当前可用电量、起飞耗电量和降落耗电量确定中间飞行阶段对应的第一可用电量，例如将当前可用电量与起飞耗电量和降落耗电量的差作为第一可用电量。进一步的，根据第一可用电量对中间飞行阶段中各个飞行阶段的预计耗电量进行调整，使得调整后的中的预计耗电量可满足飞行任务的执行要求对应的剩余电量阈值，得到各个飞行阶段对应的第一调整电量。并根据各个飞行阶段对应的第一调整电量以及对应的工作电流，确定各个飞行阶段调整后的规划飞行时间，从而实现对中间飞行阶段的规划飞行时间的调整，并将调整后的规划飞行时间作为第一飞行调整时间。其中，第一飞行调整时间可基于以下公式进行确定：TX＝SOCX/100％*C/I，其中TX为第一飞行调整时间，SOCX为第一调整电量，I为工作电流，C为电池总容量。在得到第一飞行调整时间后，无人设备可根据第一飞行调整时间调整飞行任务的目标飞行阶段的规划飞行时间。基于此，本实施例在得到第一飞行调整时间后，还包括：S206：根据所述第一飞行调整时间对所述飞行任务进行航线调整。具体的，在确定对各个飞行阶段的规划飞行时间进行调整后得到的第一飞行调整时间后，根据第一飞行调整时间对飞行任务中对应的飞行阶段进行航线调整，更新该飞行任务不同飞行阶段对应的规划飞行时间，无人设备可基于更新后的不同飞行阶段对应的规划飞行时间执行飞行任务。在其他可行的实施例中，在预计剩余电量不满足执行飞行任务对应的飞行任务的执行要求时，可选择不执行飞行任务或者是等待无人设备充电至电池电量满足飞行任务的执行要求时，再执行飞行任务。上述，根据飞行任务在不同飞行阶段的剩余飞行时间以及不同飞行阶段的工作电流，准确估计无人设备在各个飞行阶段的预计耗电量，并根据预计耗电量和无人设备当前可用电量准确估算无人设备在执行飞行任务后，所剩余的预计剩余电量，提高对无人设备剩余电量的估算准确度，减少因无人设备剩余电量估算不准确而导致无人设备无法正常降落的情况，保证无人设备的飞行安全。同时，在预计剩余电量不满足飞行任务的执行要求时，根据当前可用电量调整规划飞行时间得到第一飞行调整时间，并根据第一飞行调整时间对飞行任务进行航线调整，保证无人设备在执行飞行任务后可安全降落，保证设备安全。在上述实施例的基础上，图4给出了本申请实施例提供的另一种剩余电量估算方法的流程图，该剩余电量估算方法是对上述剩余电量估算方法的具体化。参考图4，该剩余电量估算方法包括：S301：获取飞行任务的不同飞行阶段对应的剩余飞行时间。S302：根据所述剩余飞行时间以及不同飞行阶段对应的工作电流，确定无人设备在不同飞行阶段对应的预计耗电量。其中，本实施例提供的预计剩余电量是在无人设备执行飞行任务的过程中估算的，并且不同飞行阶段对应的剩余飞行时间是根据不同飞行阶段对应的规划飞行时间和已飞行时间确定的。同时，本实施例提供的飞行阶段包括当前飞行阶段和剩余飞行阶段，当前飞行阶段对应的工作电流为所述无人设备当前的实际工作电流，剩余飞行阶段对应的工作电流为经验平均电流。可以理解的是，当前飞行阶段对应的剩余飞行时间为对应的规划飞行时间和已飞行时间之间的差，剩余飞行阶段为对应的规划飞行。在无人设备执行飞行任务过程中确定无人设备在不同飞行阶段对应的预计耗电量时，先获取所述飞行任务的不同飞行阶段对应的剩余飞行时间以及工作电流。可以理解的是，无人设备的实际飞行环境是多变的，其所携带的负重也有可能存在区别，无人设备在实际飞行中有可能会出现设备异常、大风等情况，导致无人设备的实际工况难以预测，所以在无人设备执行飞行任务过程中，实时更新预测无人设备执行飞行任务后的预计剩余电量，提高对无人设备剩余电量的估算准确度，保证无人设备可正常执行飞行任务并安全降落。具体的，在无人设备执行飞行任务过程中，按照设备的检测时间间隔确定所执行的飞行任务中各个飞行阶段对应的剩余飞行时间，以及各个飞行阶段对应的工作电流。本实施例提供的剩余飞行时间可理解为无人设备在各个飞行阶段对应的规划飞行时间中，所剩余的未飞行的时间，可以理解的是，对于已经完成的飞行阶段，其对应的剩余飞行时间为0，对于仍未开始的飞行阶段，其对应的剩余飞行时间与对应的规划飞行时间或第一飞行调整时间一致，正在进行的飞行阶段对应的剩余飞行时间为对应的规划飞行时间或第一飞行调整时间减去已经在该飞行阶段累计飞行的时间。在具体的实施方式中，可根据不同飞行阶段确定工作电流，即对于正在进行的飞行阶段，根据无人设备的实际工作电流进行确定，对于未进行的飞行阶段，根据工作电流进行确定。基于此，本方案在获取飞行任务的不同飞行阶段对应的工作电流时，具体包括：获取所述无人设备当前的实际工作电流，将所述实际工作电流作为当前飞行阶段对应的工作电流；获取剩余飞行阶段对应的工作电流，将所述工作电流作为剩余飞行阶段对应的工作电流。具体的，对于正在进行的飞行阶段，通过采集无人设备电池实时输出的实际工作电流，将实际工作电流作为当前飞行阶段的工作电流。对于剩余的飞行阶段，则将前述步骤确定的工作电流作为剩余飞行阶段对应的工作电流，比如剩余飞行阶段的工作电流可以是经验工作电流。在一个实施例中，在无人设备飞行过程中，可根据实际的飞行工况判断无人机是否处于正常工况，若无人设备处于异常工况，可对基于经验电流确定的工作电流进行修正，减少对剩余电量的估算误差。基于此，本实施例提供的剩余电量估算方法还包括：根据无人设备传感数据确定飞行工况；根据所述飞行工况确定电流修正系数，并根据所述电流修正系数修正所述经验平均电流。具体的，预先针对不同的飞行工况确定不同的电流修正系数，并且飞行工况反映的工作环境越差，相同的工作模式下无人设备的实际工作电流越大，对应的电流修正系数越大。在无人设备起飞后，通过在无人设备上安装的工况检测器件检测当前飞行工况，确定当前飞行工况所对应的电流修正系数，并根据电流修正系数修正工作电流。在一实施例中，无人设备可以根据当前飞行阶段的实际工作电流与当前飞行阶段对应的经验平均电流的差距，调整其他剩余飞行阶段对应的工作电流。例如，无人机在垂直起飞阶段，其实际的工作电流大于该阶段的经验平均电流，这意味着当前环境有较大的风，在后续垂直降落阶段的耗电量也会增加，所以在计算垂直降落阶段对应的预计耗电量时，可以通过修正系数对垂直降落阶段的工作电流进行增大，也可以直接通过修正系数增大原来方式计算出的预计耗电量，提高剩余电量预测的准确性。示例性的，根据无人设备电池的电池总容量、剩余飞行阶段对应的剩余飞行时间和工作电流，估算无人设备在各个飞行阶段所消耗的预计耗电量。例如，基于安时积分公式计算各个飞行阶段所消耗的预计耗电量。在具体的实施方式中，可基于以下公式计算各个剩余飞行阶段对应的预计耗电量：SOC'＝/C*100％，其中SOC'为飞行阶段对应的预计耗电量，I'为工作电流，T为剩余飞行时间，C为电池总容量。S303：根据所述预计耗电量和所述无人设备的当前可用电量，确定所述无人设备在完成所述飞行任务后的预计剩余电量。具体的，根据飞行任务的各个飞行阶段对应的预计耗电量预估无人设备执行飞行任务所消耗的耗电总量，并根据耗电总量和无人设备的当前可用电量，估算无人设备在执行该飞行任务后的预计剩余电量。结合上述实施例提供的图2，飞行任务共有3个不同的飞行阶段：起飞阶段、巡航阶段和降落阶段，假设起飞阶段对应的剩余飞行时间和工作电流分别为T1'和I1'，巡航阶段对应的剩余飞行时间和工作电流分别为T2'和I2'，降落阶段对应的剩余飞行时间和工作电流分别为T3'和I3'。那么这3个不同的飞行阶段所对应的预计耗电量分别为：SOC1'＝/C*100％SOC2'＝/C*100％SOC3'＝/C*100％其中SOC1为起飞阶段对应的预计耗电量，SOC2为巡航阶段对应的预计耗电量，SOC3为降落阶段对应的预计耗电量。可知无人设备在执行飞行任务3个飞行阶段的飞行时间总共消耗的耗电总量为SOC1+SOC2+SOC3。假设此时无人设备正处于巡航阶段，此时无人设备已完成起飞阶段，并且未进行降落阶段，那么起飞阶段对应的剩余飞行时间T2'＝0，对应的预计耗电量SOC2'＝0。进一步的，无人设备在执行飞行任务后的预计剩余电量为：SOC'remain＝SOC'now-其中，SOC'remain为预计剩余电量，SOC'now为当前可用电量。在一个可能的实施例中，在得到无人设备执行飞行任务后的预计剩余电量后，可根据预计剩余电量与预先设定的剩余电量阈值的比较结果是否满足飞行任务的执行要求，基于此，本方案提供的剩余电量估算方法还包括：S304：基于所述预计剩余电量与设定的剩余电量阈值的比较结果，确定所述预计剩余电量是否满足所述飞行任务中当前飞行阶段和剩余飞行阶段的执行要求。具体的，将预计剩余电量和设定的剩余电量阈值进行比较，若预计剩余电量大于等于剩余电量阈值，认为预计剩余电量满足执行飞行任务对应的飞行任务的执行要求。在预计剩余电量满足执行飞行任务对应的飞行任务的执行要求，无人设备可继续按照航线规划对应的飞行阶段和规划飞行时间执行剩余的飞行任务。而在预计剩余电量小于剩余电量阈值时，认为预计剩余电量不满足执行剩余的飞行任务对应的飞行任务的执行要求，并跳转至步骤S308。例如将剩余电量阈值设置为15％，在SOC'remain≥15％时，满足执行飞行任务对应的飞行任务的执行要求，无人设备可继续按照当前航线规划执行剩余的飞行任务，而在SOC'remain＜15％时，不满足执行剩余的飞行任务对应的飞行任务的执行要求。在不满足执行剩余的飞行任务对应的飞行任务的执行要求时，可选择调整各个飞行阶段的规划飞行时间，或返航充电后进行断点续飞。基于此，本实施例提供的剩余电量估算方法还包括：S305：在所述预计剩余电量不满足所述执行要求时，调整所述飞行任务中当前飞行阶段和/或剩余飞行阶段的规划飞行时间，或返航充电后进行断点续飞。具体的，对于对当前飞行阶段和/或剩余飞行阶段的规划飞行时间，在预计剩余电量不满足执行剩余的飞行任务对应的飞行任务的执行要求时，按照飞行任务的执行要求对应的剩余电量阈值，根据当前可用电量调整各个飞行阶段的规划飞行时间，以得到各个飞行阶段对应的第二飞行调整时间。在一个实施例中，将飞行任务的各个飞行阶段分为航线相对难以调节的起飞阶段和降落阶段，以及航线相对容易调节的中间飞行阶段，并保证降落阶段所需要的耗电量，并对当前飞行阶段和/或剩余飞行阶段对应的中间飞行阶段的耗电量进行调整，以满足飞行任务的执行要求。基于此，本方案在调整飞行任务中当前飞行阶段和/或剩余飞行阶段的规划飞行时间时，包括：S3081：根据所述当前可用电量、所述飞行任务的降落阶段对应的降落耗电量，确定所述飞行任务的中间飞行阶段对应的第二可用电量。S3082：根据所述第二可用电量、当前飞行阶段和剩余飞行阶段对应的工作电流调整所述飞行任务中当前飞行阶段和/或剩余飞行阶段的规划飞行时间，以得到第二飞行调整时间。具体的，确定无人设备在飞行任务的起飞阶段所需要的起飞耗电量和在降落阶段所需要的降落耗电量，并根据无人设备电池的当前可用电量、起飞耗电量和降落耗电量确定中间飞行阶段对应的第二可用电量。进一步的，根据第二可用电量对中间飞行阶段中各个飞行阶段的预计耗电量进行调整，使得调整后的中的预计耗电量可满足飞行任务的执行要求对应的剩余电量阈值，得到当前飞行阶段和/或剩余飞行阶段对应的第二调整电量。并根据当前飞行阶段和/或剩余飞行阶段对应的第二调整电量以及对应的工作电流，确定当前飞行阶段和/或剩余飞行阶段调整后的规划飞行时间，从而实现对当前飞行阶段和/或剩余飞行阶段的规划飞行时间的调整，并将调整后的规划飞行时间作为第二飞行调整时间。其中，第二飞行调整时间可基于以下公式进行确定：TX'＝SOCX'/100％*C/I'，其中TX'为第二飞行调整时间，SOCX'为第二调整电量，I'为工作电流，C为电池总容量。在得到第二飞行调整时间后，可根据所述第二飞行调整时间进行飞行决策。本实施例提供的飞行决策包括对当前飞行阶段和/或剩余飞行阶段的航线调整和返航并断点续飞，具体的，在确定第二飞行调整时间后，根据第二飞行调整时间对飞行任务进行航线调整或返航充电后进行断点续飞。例如，在确定对各个飞行阶段的规划飞行时间进行调整后得到的第二飞行调整时间后，根据第二飞行调整时间对飞行任务中对应的飞行阶段进行航线调整，更新该飞行任务中剩余的飞行阶段对应的规划飞行时间，无人设备可基于更新后的不同飞行阶段对应的规划飞行时间继续执行飞行任务。或者是按照第二飞行调整时间经航线调整后仍难以满足飞行任务的任务需求时，可根据设定的着陆点确定最近返航路径进行返航，并在充电完成后，进行断点续飞，继续剩余的飞行任务。示例性的，在无人设备执行飞行任务前，无人设备的飞控系统在根据飞行任务进行航线规划得到不同飞行阶段对应的规划飞行时间后，将不同飞行阶段对应的规划飞行时间发送给无人设备的电池管理系统，电池管理系统根据规划飞行时间、工作电流和电池总容量确定无人设备在不同飞行阶段对应的预计耗电量，并根据预计耗电量和无人设备的当前可用电量，确定无人设备在执行飞行任务后的预计剩余电量。进一步的，电池管理系统基于设定的剩余电量阈值确定预计剩余电量是否满足执行飞行任务对应的飞行任务的执行要求，并且在预计剩余电量不满足执行飞行任务对应的飞行任务的执行要求时，按照飞行任务的执行要求，根据当前可用电量调整规划飞行时间，以得到第一飞行调整时间，并将第一飞行调整时间发送给飞控系统进行决策，而在预计剩余电量满足执行飞行任务对应的飞行任务的执行要求时，将原先的规划飞行时间返回给飞控系统。飞控系统在接收到返回的第一飞行调整时间后，根据第一飞行调整时间对飞行任务进行航线调整后，再控制无人设备执行飞行任务；而飞控系统在接收到原先的规划飞行时间时，根据规划飞行时间控制无人设备执行飞行任务。进一步的，在无人设备执行飞行任务过程中，飞控系统按照设定时间间隔向电池管理系统发送飞行任务的不同飞行阶段对应的剩余飞行时间以及工作电流。电池管理系统根据剩余飞行时间、工作电流和电池总容量，确定无人设备在不同飞行阶段对应的预计耗电量，并根据预计耗电量和无人设备的当前可用电量，确定无人设备在执行飞行任务后的预计剩余电量。进一步的，电池管理系统基于设定的剩余电量阈值，确定预计剩余电量是否满足执行飞行任务对应的飞行任务的执行要求，在预计剩余电量不满足执行飞行任务对应的飞行任务的执行要求时，按照飞行任务的执行要求，根据当前可用电量调整规划飞行时间，以得到第二飞行调整时间，而在预计剩余电量满足执行飞行任务对应的飞行任务的执行要求时，将原先的剩余飞行时间返回给飞控系统。飞控系统在接收到返回的第二飞行调整时间后，根据第二飞行调整时间进行飞行决策；而飞控系统在接收到原先的剩余飞行时间时，根据剩余飞行时间控制无人设备继续执行飞行任务。上述，根据飞行任务在不同飞行阶段的剩余飞行时间以及不同飞行阶段的工作电流，准确估计无人设备在各个飞行阶段的预计耗电量，并根据预计耗电量和无人设备当前可用电量准确估算无人设备在执行飞行任务后，所剩余的预计剩余电量，提高对无人设备剩余电量的估算准确度，减少因无人设备剩余电量估算不准确而导致无人设备无法正常降落的情况，保证无人设备的飞行安全。同时，在无人设备执行飞行任务的过程中，实时根据无人设备的工作电流估计估计无人设备在各个飞行阶段的预计耗电量，并根据预计耗电量和无人设备当前可用电量准确估算无人设备在执行飞行任务后，所剩余的预计剩余电量，提高对无人设备剩余电量的估算准确度，减少因无人设备剩余电量估算不准确而导致无人设备无法正常降落的情况，保证无人设备的飞行安全，并且在预计剩余电量不满足飞行任务的执行要求时，根据当前可用电量调整规划飞行时间得到第二飞行调整时间，并根据第二飞行调整时间进行航线调整和返航并断点续飞，保证无人设备在执行飞行任务后可安全降落，保证设备安全。并且根据无人设备的飞行工况对工作电流进行修正，减少因无人设备工作在不同飞行工况下工作而导致实际工作电流与工作电流相差过大的情况，进一步提高对剩余电量的估算准确度。图5给出了本申请实施例提供的一种剩余电量估算装置的结构示意图。参考图5，该剩余电量估算装置包括时间获取模块41、耗电计算模块42和电量估算模块43。其中，所述时间获取模块41，用于获取飞行任务的不同飞行阶段对应的剩余飞行时间；所述耗电计算模块42，用于根据所述剩余飞行时间以及不同飞行阶段对应的工作电流，确定无人设备在不同飞行阶段对应的预计耗电量；所述电量估算模块43，用于根据所述预计耗电量和所述无人设备的当前可用电量，确定所述无人设备在完成所述飞行任务后的预计剩余电量。上述，根据飞行任务在不同飞行阶段的剩余飞行时间以及不同飞行阶段的工作电流，准确估计无人设备在各个飞行阶段的预计耗电量，并根据预计耗电量和无人设备当前可用电量准确估算无人设备在执行飞行任务后，所剩余的预计剩余电量，提高对无人设备剩余电量的估算准确度，减少因无人设备剩余电量估算不准确而导致无人设备无法正常降落的情况，保证无人设备的飞行安全。本申请实施例还提供了一种无人设备，该无人设备可集成本申请实施例提供的剩余电量估算装置。图6是本申请实施例提供的一种无人设备的结构示意图。参考图5，该无人设备包括：输入装置53、输出装置54、存储器52以及一个或多个处理器51；所述存储器52，用于存储一个或多个程序；当所述一个或多个程序被所述一个或多个处理器51执行，使得所述一个或多个处理器51实现如上述实施例提供的剩余电量估算方法。其中输入装置53、输出装置54、存储器52和处理器51可以通过总线或者其他方式连接，图6中以通过总线连接为例。存储器52作为一种计算设备可读存储介质，可用于存储软件程序、计算机可执行程序以及模块，如本申请任意实施例所述的剩余电量估算方法对应的程序指令/模块。存储器52可主要包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需的应用程序；存储数据区可存储根据设备的使用所创建的数据等。此外，存储器52可以包括高速随机存取存储器，还可以包括非易失性存储器，例如至少一个磁盘存储器件、闪存器件、或其他非易失性固态存储器件。在一些实例中，存储器52可进一步包括相对于处理器51远程设置的存储器，这些远程存储器可以通过网络连接至设备。上述网络的实例包括但不限于互联网、企业内部网、局域网、移动通信网及其组合。输入装置53可用于接收输入的数字或字符信息，以及产生与设备的用户设置以及功能控制有关的键信号输入。输出装置54可包括显示屏等显示设备。处理器51通过运行存储在存储器52中的软件程序、指令以及模块，从而执行设备的各种功能应用以及数据处理，即实现上述的剩余电量估算方法。上述提供的剩余电量估算装置、设备和计算机可用于执行上述任意实施例提供的剩余电量估算方法，具备相应的功能和有益效果。本申请实施例还提供一种包含计算机可执行指令的存储介质，所述计算机可执行指令在由计算机处理器执行时用于执行如上述实施例提供的剩余电量估算方法，该剩余电量估算方法包括：获取飞行任务的不同飞行阶段对应的剩余飞行时间；根据所述剩余飞行时间以及不同飞行阶段对应的工作电流，确定无人设备在不同飞行阶段对应的预计耗电量；根据所述预计耗电量和所述无人设备的当前可用电量，确定所述无人设备在完成所述飞行任务后的预计剩余电量。存储介质——任何的各种类型的存储器设备或存储设备。术语“存储介质”旨在包括：安装介质，例如CD-ROM、软盘或磁带装置；计算机系统存储器或随机存取存储器，诸如DRAM、DDR RAM、SRAM、EDO RAM，兰巴斯RAM等；非易失性存储器，诸如闪存、磁介质；寄存器或其它相似类型的存储器元件等。存储介质可以还包括其它类型的存储器或其组合。另外，存储介质可以位于程序在其中被执行的第一计算机系统中，或者可以位于不同的第二计算机系统中，第二计算机系统通过网络连接到第一计算机系统。第二计算机系统可以提供程序指令给第一计算机用于执行。术语“存储介质”可以包括可以驻留在不同位置中的两个或更多存储介质。存储介质可以存储可由一个或多个处理器执行的程序指令。当然，本申请实施例所提供的一种包含计算机可执行指令的存储介质，其计算机可执行指令不限于如上所述的剩余电量估算方法，还可以执行本申请任意实施例所提供的剩余电量估算方法中的相关操作。上述实施例中提供的剩余电量估算装置、无人设备及存储介质可执行本申请任意实施例所提供的剩余电量估算方法，未在上述实施例中详尽描述的技术细节，可参见本申请任意实施例所提供的剩余电量估算方法。上述仅为本申请的较佳实施例及所运用的技术原理。本申请不限于这里所述的特定实施例，对本领域技术人员来说能够进行的各种明显变化、重新调整及替代均不会脱离本申请的保护范围。因此，虽然通过以上实施例对本申请进行了较为详细的说明，但是本申请不仅仅限于以上实施例，在不脱离本申请构思的情况下，还可以包括更多其他等效实施例，而本申请的范围由权利要求的范围决定。
