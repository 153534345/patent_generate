标题title
基于快速踝部调节的双足机器人平衡控制器
摘要abst
本发明提供了一种基于快速踝部调节的双足机器人平衡控制器，包括质心控制器、状态判别器、零力矩点跟踪器、临稳状态控制器和力/力矩跟踪器；质心控制器根据机器人质心的位置和速度反馈，计算得到期望零力矩点位置；状态判别器对期望零力矩点的状态进行判断：当期望零力矩点位置处于稳定域内时，零力矩点跟踪器根据实际零力矩点位置和期望零力矩点位置，计算出双足期望接触力/力矩大小，随后使用力/力矩跟踪器实现期望接触力/力矩的跟踪；当期望零力矩点位置处于临界稳定域时，临稳状态控制器，将期望零力矩点拉回到稳定域内；当期望零力矩点位置处于发散域时，触发落脚点控制。本发明能使机器人实现快速的平衡响应，实现稳定的运动。
权利要求书clms
1.基于快速踝部调节的双足机器人平衡控制器，其特征在于，包括：质心控制器，根据机器人质心的位置和速度反馈，计算得到期望零力矩点位置；状态判别器，对期望零力矩点的状态进行判断，当期望零力矩点位置处于稳定域内时，触发零力矩点跟踪器，当期望零力矩点位置处于临界稳定域时，触发临稳状态控制器，当期望零力矩点位置处于发散域时，触发落脚点控制；零力矩点跟踪器，根据实际零力矩点位置和期望零力矩点位置，计算出双足期望接触力/力矩大小；临稳状态控制器，将期望零力矩点控制在支撑域边缘，从而通过力/力矩跟踪器产生翘脚动作，将状态快速拉回到稳定域内；所述临稳状态控制器的控制率为：其中：为仿人机器人x方向期望零力矩点位置，为仿人机器人y方向规划零力矩点位置，geox为仿人机器人x方向支撑域几何参数，geoy为仿人机器人y方向支撑域几何参数，为仿人机器人x方向实际质心位置，为仿人机器人y方向实际质心位置，所述x方向和y方向属于仿人机器水平面坐标系，且：其中：参数g为重力加速度，zc为机器人质心高度，geo为机器人支撑域几何参数，x为机器人质心位置，为机器人质心速度。2.根据权利要求1所述的基于快速踝部调节的双足机器人平衡控制器，其特征在于，所述临稳状态控制器考虑时间最优控制：u∈U＝t0＝0其中：矩阵矩阵geo为机器人支撑域几何参数，t为控制时间，u为控制量，t0为控制起始时间，tf为控制终止时间，x为状态量，U为支撑域，x0为初始状态。3.根据权利要求2所述的基于快速踝部调节的双足机器人平衡控制器，其特征在于，所述临稳状态控制器引入协态变量定义哈密顿函数：根据协态条件：解得：其中：c1、c2为常数。4.根据权利要求3所述的基于快速踝部调节的双足机器人平衡控制器，其特征在于，所述c1、c2满足如下情况：①c1＞0且c2＞0：u＝geo②c1＜0且c2＜0：u＝-geo③c1＞0且c2＜0：④c1＜0且c2＞0：其中，λ2穿越横轴的时间5.根据权利要求1所述的基于快速踝部调节的双足机器人平衡控制器，其特征在于，所述期望零力矩点位置根据计算得到，其中，是期望ZMP位置，是规划ZMP位置，是实际质心位置，是规划质心位置，是实际质心速度，是规划质心速度，kc和kv分别为位置项、速度项反馈系数。6.根据权利要求1所述的基于快速踝部调节的双足机器人平衡控制器，其特征在于，所述稳定域为：沿双脚支撑域形成的多边形，向内侧作与支撑域各边线平行且相距为δ的直线，左右直线所围成的区域，为稳定域；稳定域外，双脚支撑域内的区域，为临界稳定域；双脚支撑域外的区域为发散域；其中δ为稳定裕度。7.根据权利要求1所述的基于快速踝部调节的双足机器人平衡控制器，其特征在于，所述力/力矩跟踪器跟踪期望接触力/力矩，具体为：根据双脚分配系数α，得到左、右脚的期望力和力矩：其中：为总期望力，为总期望力矩，为右脚期望力，为左脚期望力，为右脚期望力矩，为左脚期望力矩；设计导纳控制器，使得机器人双脚力/力矩跟踪期望接触力/力矩。
说明书desc
技术领域本发明属于技术领域，具体涉及一种基于快速踝部调节的双足机器人平衡控制器。背景技术机器人在做常规的行走、奔跑等运动时，足部与地面的接触力及接触力矩决定了机器人的运动状态。所以，机器人的平衡控制可由足部接触力及接触力矩控制来实现，这种平衡控制可分为上层控制及下层控制；根据机器人的姿态偏差，上层控制输出期望的接触力及接触力矩，下层控制实现期望力及期望力矩的跟随。现有方法的上层控制均属于线性系统的反馈控制，输出量为连续值，在应对一般扰动时有效，但在应对较大的外部推力或未知地面突起等突发大扰动时，调节能力有限。发明内容针对现有技术中存在不足，本发明提供了一种基于快速踝部调节的双足机器人平衡控制器，使机器人实现快速的平衡响应，实现稳定的运动。本发明是通过以下技术手段实现上述技术目的的。基于快速踝部调节的双足机器人平衡控制器，包括：质心控制器，根据机器人质心的位置和速度反馈，计算得到期望零力矩点位置；状态判别器，对期望零力矩点的状态进行判断，当期望零力矩点位置处于稳定域内时，触发零力矩点跟踪器，当期望零力矩点位置处于临界稳定域时，触发临稳状态控制器，当期望零力矩点位置处于发散域时，触发落脚点控制；零力矩点跟踪器，根据实际零力矩点位置和期望零力矩点位置，计算出双足期望接触力/力矩大小；临稳状态控制器，将期望零力矩点控制在支撑域边缘，从而通过力/力矩跟踪器产生翘脚动作，将状态快速拉回到稳定域内；所述临稳状态控制器的控制率为：其中：为仿人机器人x方向期望零力矩点位置，为仿人机器人y方向规划零力矩点位置，geox为仿人机器人x方向支撑域几何参数，geoy为仿人机器人y方向支撑域几何参数，为仿人机器人x方向实际质心位置，为仿人机器人y方向实际质心位置，所述x方向和y方向属于仿人机器水平面坐标系，且：其中：参数g为重力加速度，zc为机器人质心高度，geo为机器人支撑域几何参数，x为机器人质心位置，为机器人质心速度。上述技术方案中，所述临稳状态控制器考虑时间最优控制：u∈U＝t0＝0其中：矩阵矩阵geo为机器人支撑域几何参数，t为控制时间，u为控制量，t0为控制起始时间，tf为控制终止时间，x为状态量，U为支撑域，x0为初始状态。上述技术方案中，所述临稳状态控制器引入协态变量定义哈密顿函数：根据协态条件：解得：其中：c1、c2为常数。上述技术方案中，所述c1、c2满足如下情况：①c1＞0且c2＞0：u＝geo②c1＜0且c2＜0：u＝-geo③c1＞0且c2＜0：④c1＜0且c2＞0：其中，λ2穿越横轴的时间上述技术方案中，所述期望零力矩点位置根据计算得到，其中，是期望ZMP位置，是规划ZMP位置，是实际质心位置，是规划质心位置，是实际质心速度，是规划质心速度，kc和kv分别为位置项、速度项反馈系数。上述技术方案中，所述稳定域为：沿双脚支撑域形成的多边形，向内侧作与支撑域各边线平行且相距为δ的直线，左右直线所围成的区域，为稳定域；稳定域外，双脚支撑域内的区域，为临界稳定域；双脚支撑域外的区域为发散域；其中δ为稳定裕度。上述技术方案中，所述力/力矩跟踪器跟踪期望接触力/力矩，具体为：根据双脚分配系数α，得到左、右脚的期望力和力矩：其中：为总期望力，为总期望力矩，为右脚期望力，为左脚期望力，为右脚期望力矩，为左脚期望力矩；设计导纳控制器，使得机器人双脚力/力矩跟踪期望接触力/力矩。本发明的有益效果为：本发明的临稳状态控制器考虑时间最优控制，并引入协态变量，且临稳状态控制器输出的控制率用于计算总期望力矩，当期望零力矩点位置处于临界稳定域时，触发临稳状态控制器，临稳状态控制器将期望零力矩点控制在支撑域边缘，从而通过力/力矩跟踪器产生翘脚动作，将状态快速拉回到稳定域内，如此，仿人机器人不仅能在更大的扰动下保持平衡，在较小地扰动下恢复稳定的速度也能更快。附图说明图1为本发明所述基于快速踝部调节的双足机器人平衡控制器结构框图；图2为本发明所述期望零力矩点处于稳定状态示意图；图2为本发明所述期望零力矩点处于临稳状态示意图；图2为本发明所述期望零力矩点处于发散状态示意图；图3为本发明所述期望ZMP处于质心位置正下方示意图；图3为本发明所述扰动较小时，期望ZMP处于支撑域内示意图；图3为本发明所述扰动较大时，期望ZMP处于支撑域边缘示意图；图4为本发明在临稳状态控制器的控制下，机器人受控状态图；图5为本发明所述仿人机器人左右脚力/力矩分配计算示意图。具体实施方式下面结合附图以及具体实施例对本发明作进一步的说明，但本发明的保护范围并不限于此。如图1所示，本发明一种基于快速踝部调节的双足机器人平衡控制器，包括质心控制器、状态判别器、零力矩点跟踪器、临稳状态控制器和力/力矩跟踪器。质心控制器根据机器人质心的位置和速度反馈，计算得到期望零力矩点位置：其中，是期望ZMP位置，是规划ZMP位置，是实际质心位置，是规划质心位置，是实际质心速度，是规划质心速度，kc和kv分别为位置项、速度项反馈系数；状态判别器对期望零力矩点的状态进行判断，以决定触发的控制方式；状态的种类如图2、、所示：稳定域定义为：沿双脚支撑域形成的多边形，向内侧作与支撑域各边线平行且相距为δ的直线，最终左右直线所围成的区域，为稳定域；稳定域外，双脚支撑域内的区域，为临界稳定域；双脚支撑域外的区域为发散域。如图2所示，当期望ZMP位置处于稳定域内时，触发零力矩点跟踪器，机器人可轻易的保持稳定；如图2所示，当期望ZMP位置处于临界稳定域时，触发临稳状态控制器，以快速将期望ZMP重新拉回稳定域；如图2所示，当期望ZMP位置处于发散域时，应当触发落脚点控制，否则机器人将摔倒，其中落脚点控制为现有技术，本发明不考虑。当机器人稳定站立时，期望ZMP处于质心位置正下方，如图3所示；当机器人受到扰动时，机器人的实际质心位置与期望质心位置发生偏离，期望ZMP做反馈调节，若扰动较小，期望ZMP处于支撑域内，机器人足部仍能良好地贴合地面，如图3所示；若扰动较大，期望ZMP处于支撑域边缘，在足部力/力矩跟踪器的控制下，机器人足部会自然地产生翘脚动作，如图3所示。零力矩点跟踪器的原理是：根据实际ZMP位置和期望ZMP位置，计算出双足期望接触力/力矩大小，随后使用力/力矩跟踪器实现期望接触力/力矩的跟踪。其中实际ZMP位置由安装在双足踝部的六维力传感器测量并计算得到，期望ZMP位置由质心控制器计算得到。临稳状态控制器设状态量为其中x为机器人质心位置在时间上的函数，为机器人质心速度在时间上的函数。临稳状态控制器快速将期望ZMP拉回到稳定域内，故考虑时间最优控制：其中：矩阵矩阵参数g为重力加速度，zc为机器人质心高度，geo为机器人支撑域几何参数，t为控制时间，u为控制量，t0为控制起始时间，tf为控制终止时间，U为支撑域，x0为初始状态；临稳状态控制器引入协态变量定义哈密顿函数：根据极大值原理，得到临稳状态控制器的控制率：根据协态条件：解得：根据常数c1、c2的正负性，得知λ2有四种情况；对应的控制律可表示为：①c1＞0且c2＞0：u＝geo②c1＜0且c2＜0：u＝-geo③c1＞0且c2＜0：④c1＜0且c2＞0：其中，Ts是在③、④情况下，λ2穿越横轴的时间。由以上四种情况可知，控制最多切换一次，为典型的bang-bang控制器；在该bang-bang控制器的控制下，机器人受控的状态如图4所示。图4中：其中：r-、r+将状态平面分为两部分，分别用R-、R+来表示，其中：控制量u即机器人期望零力矩点位置，于是，临稳状态控制器的控制率可表示为：其中：为仿人机器人x方向期望ZMP位置，为仿人机器人y方向期望ZMP位置，geox为仿人机器人x方向支撑域几何参数，geoy为仿人机器人y方向支撑域几何参数，为仿人机器人x方向实际质心位置，为仿人机器人y方向实际质心位置；其中x方向和y方向属于仿人机器水平面坐标系。力/力矩跟踪器如图5所示，实际ZMP位置为、左脚踝位置为、右脚踝位置为，根据这三个点的位置，计算两条直线L1、L2的方程，其中L1过左脚踝、右脚踝两点，L2过实际ZMP，且垂直于L1，并交于。L1的方程为：y＝ax+b且：L2的方程为：且：根据直线L1、L2的方程，，计算：计算双脚分配系数α：计算总期望力其中，M为机器人总质量，az为机器人质心沿竖直方向的加速度；计算总期望力矩其中：为期望ZMP位置向量，且为实际ZMP位置向量；根据双脚分配系数，得到左、右脚的期望力和力矩：为了使机器人双脚力和力矩跟随期望力和力矩，设计导纳控制器，表示为：其中，ΔP为踝部位置调节量，为踝部姿态调节量，Frel为足部实际受力，τrel为足部实际所受力矩，kp,f、kd,f、kp,τ、kd,τ均为反馈系数矩阵。所述实施例为本发明的优选的实施方式，但本发明并不限于上述实施方式，在不背离本发明的实质内容的情况下，本领域技术人员能够做出的任何显而易见的改进、替换或变型均属于本发明的保护范围。
