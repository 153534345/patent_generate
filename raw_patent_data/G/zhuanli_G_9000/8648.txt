标题title
一种绿波车速计算方法和装置
摘要abst
本发明涉及一种绿波车速计算方法和装置，获取目标路口的信号灯信息；根据信号灯信息所包含的当前信号灯剩余时间，计算在通行信号灯状态下通过目标路口对应的第一时间窗口；结合当前车速信息和车辆位置信息判断车辆能否在所述第一时间窗口内通过目标路口；响应于车辆能够通过，计算出对应的第一速度区间，在所述第一速度区间内计算各个车速对应的第一VSP值和第一通行时间；结合所设置的权重对所述第一VSP值和所述第一通行时间进行加权计算，根据计算结果确定第一建议车速。通过本发明的方法可以根据路口信号灯的状态和驾驶员需求给出合适的建议车速，以便于驾驶员进行调整，有效提升了交通管理效率，并能够促进环保。
权利要求书clms
1.一种绿波车速计算方法，其特征在于，包括：获取目标路口的信号灯信息；根据所述信号灯信息所包含的当前信号灯剩余时间，计算在通行信号灯状态下通过所述目标路口对应的第一时间窗口；结合当前车速信息和车辆位置信息判断车辆能否在所述第一时间窗口内通过所述目标路口；响应于车辆能够通过，计算出对应的第一速度区间，在所述第一速度区间内计算各个车速对应的第一VSP值和第一通行时间；结合所设置的权重对所述第一VSP值和所述第一通行时间进行加权计算，根据计算结果确定第一建议车速。2.根据权利要求1所述的绿波车速计算方法，其特征在于，响应于车辆不能够通过，判断所述车辆是否有足够的制动距离；若没有足够的制动距离，则输出告警。3.根据权利要求1所述的绿波车速计算方法，其特征在于，响应于车辆不能够通过，根据所述第一时间窗口和信号灯相位周期计算第二时间窗口；判断所述车辆能否在所述第二时间窗口内通过所述目标路口；响应于车辆能够在所述第二时间窗口内通过所述目标路口，计算出对应的第二速度区间，所述第二速度区间包括减速区间和均速区间。4.根据权利要求3所述的绿波车速计算方法，其特征在于，根据所述第一时间窗口和信号灯相位周期计算第二时间窗口包括：在所述第一时间窗口上叠加一个或多个信号灯相位周期，得到所述第二时间窗口。5.根据权利要求1所述的绿波车速计算方法，其特征在于，所述判断车辆能否在所述第一时间窗口内通过所述目标路口包括：结合所述车辆的最大加速度信息和当前车速信息计算在所述第一时间窗口内所行驶的第一距离；判断所述第一距离是否大于所述车辆与所述目标路口的距离，若是，则判断能够通过。6.根据权利要求1所述的绿波车速计算方法，其特征在于，所述判断车辆能否在所述第一时间窗口内通过所述目标路口包括：结合所述车辆的当前车速信息、车辆与所述目标路口的距离以及车辆的最大加速度信息计算得到所述车辆通过所述目标路口的行驶时间；判断所述行驶时间是否处于所述第一时间窗口，若处于所述第一时间窗口，则判断能够通过。7.根据权利要求1所述的绿波车速计算方法，其特征在于，所述计算出第一速度区间还包括：判断所述车辆通过所述目标路口时是否达到车速预警值，若达到所述车速预警值，则将所述车速预警值作为所述第一速度区间的上限。8.根据权利要求3所述的绿波车速计算方法，其特征在于，还包括：在所述第二速度区间内计算各个车速对应的第二VSP值、对应的减速通行时间和均速通行时间；结合所设置的权重对所述第二VSP值、所述减速通行时间和均速通行时间进行加权计算，根据计算结果确定第二建议车速。9.根据权利要求1-8任意一项所述的绿波车速计算方法，其特征在于，所述获取目标路口的信号灯信息包括：基于V2X通信方式与路侧单元通信以获取所述目标路口对应的信号灯信息。10.一种绿波车速计算装置，其特征在于，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现如权利要求1至9中任一项所述的绿波车速计算方法。
说明书desc
技术领域本发明属于车辆控制技术领域。具体地，本发明涉及一种绿波车速计算方法和装置。背景技术随着城市中车辆数量的不断增加，造成城市交通的压力越来越大，拥堵问题成为城市交通的一大痛点。一方面，车辆拥堵情况导致车辆反复启停，无法正常行驶，从而使车辆燃油不能充分燃烧，增加了大量的污染物，严重危害城市空气质量，另一方面，发生车辆拥堵的区域大部分分布在路口，导致驾驶员在频繁的启停控制过程中，需要进行反复操作，增加了驾驶员的驾驶压力。为了便于司机了解路口处红绿灯的剩余时间，以减少车辆在路口处停车的时间，许多路口处采用的交通信号灯系统不仅配置了红绿黄灯，还配置了显示每种信号灯剩余时间的电子屏。这种交通信号灯系统能够方便驾驶员观察和了解红绿灯剩余时间，便于驾驶员根据信号灯剩余时间进行合适的操作。例如，在行驶到有交通信号灯的路口时，若当前红灯剩余30秒以上，那么驾驶员可以控制发动机停机；若当前红灯仅剩余5秒以内，那么可以减速或者怠速，等待红灯结束后加速通过路口，由于此时不需要发动机停机和再次启动，因此可以提高车辆的燃油经济性，减少污染物的排放。若当前绿灯剩余时间仅在3秒以内，那么应当减速并且停止发动机；若当前绿灯剩余时间在20秒以上，则可以直接通过路口。目前上述实现过程主要是依据驾驶员的自身经验，从而根据信号灯剩余时间对车辆的车速进行控制。在驾驶员判断准确的情况下，通过上述方式在一定程度上提升了交通效率，也减少了污染物的排放。然而，一旦驾驶员判断出错或存在侥幸心理就可能出现超速通过路口、闯红灯或在路口处无法停下等情况发生，不仅可能对驾乘人员生命安全带来风险，还可能给交通管理增加压力。因此，如何根据路口信号灯的状态和驾驶员需求给出合适的建议车速，以便于驾驶员进行调整，对提升交通效率和促进环保具有重要意义。发明内容本发明通过目标路口的信号灯剩余时间、车速信息和车辆位置信息等，可以计算得到车辆能够正常通过目标路口的速度区间，从而在该速度区间内根据需求得到建议车速，以便于驾驶员根据自身需求将车辆控制在合理车速行驶，有效提升了驾驶员驾驶过程的便捷性，并且由于提升交通效率并促进环保。为至少解决上述一个或多个技术问题，在本发明的第一方面中，本发明提供了一种绿波车速计算方法，包括：获取目标路口的信号灯信息；根据所述信号灯信息所包含的当前信号灯剩余时间，计算在通行信号灯状态下通过所述目标路口对应的第一时间窗口；结合当前车速信息和车辆位置信息判断车辆能否在所述第一时间窗口内通过所述目标路口；响应于车辆能够通过，计算出对应的第一速度区间，在所述第一速度区间内计算各个车速对应的第一VSP值和第一通行时间；结合所设置的权重对所述第一VSP值和所述第一通行时间进行加权计算，根据计算结果确定第一建议车速。在一个实施例中，响应于车辆不能够通过，判断所述车辆是否有足够的制动距离；若没有足够的制动距离，则输出告警。在一个实施例中，响应于车辆不能够通过，根据所述第一时间窗口和信号灯相位周期计算第二时间窗口；判断所述车辆能否在所述第二时间窗口内通过所述目标路口；响应于车辆能够在所述第二时间窗口内通过所述目标路口，计算出对应的第二速度区间，所述第二速度区间包括减速区间和均速区间。在一个实施例中，根据所述第一时间窗口和信号灯相位周期计算第二时间窗口包括：在所述第一时间窗口上叠加一个或多个信号灯相位周期，得到所述第二时间窗口。在一个实施例中，所述判断车辆能否在所述第一时间窗口内通过所述目标路口包括：结合所述车辆的最大加速度信息和当前车速信息计算在所述第一时间窗口内所行驶的第一距离；判断所述第一距离是否大于所述车辆与所述目标路口的距离，若是，则判断能够通过。在一个实施例中，所述判断车辆能否在所述第一时间窗口内通过所述目标路口包括：结合所述车辆的当前车速信息、车辆与所述目标路口的距离以及车辆的最大加速度信息计算得到所述车辆通过所述目标路口的行驶时间；判断所述行驶时间是否处于所述第一时间窗口，若处于所述第一时间窗口，则判断能够通过。在一个实施例中，所述计算出第一速度区间还包括：判断所述车辆通过所述目标路口时是否达到车速预警值，若达到所述车速预警值，则将所述车速预警值作为所述第一速度区间的上限。在一个实施例中，还包括：在所述第二速度区间内计算各个车速对应的第二VSP值、对应的减速通行时间和均速通行时间；结合所设置的权重对所述第二VSP值、所述减速通行时间和均速通行时间进行加权计算，根据计算结果确定第二建议车速。在一个实施例中，所述获取目标路口的信号灯信息包括：基于V2X通信方式与路侧单元通信以获取所述目标路口对应的信号灯信息。在本发明的第二方面中，本发明还提供了一种绿波车速计算装置，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现如前述第一方面的多个实施例的绿波车速计算方法。在本发明的方案中通过获取目标路口的信号灯信息，并结合信号灯信息中包含的当前信号灯剩余时间、车速信息和车辆位置信息，计算得到车辆可通过目标路口时对应速度区间，从而驾驶员可以在该车速区间内调整车速通过目标路口。并且，可以结合设置的车辆VSP值的权重和通行时间的权重计算得到建议车速，从而可以提供建议车速，以实现车辆在最快的通行时间内或以车辆最低的功耗的情况下通过目标路口。通过本方案中的方法，可以为驾驶员提供最优的建议车速，使得所驾驶车辆能够以最低的功耗的行驶方式，或最短通行时间的行驶方式，或功耗和通行时间兼顾的行驶方式通过目标路口，从而有效提升驾驶过程的便捷性和安全性。附图说明通过参考附图阅读下文的详细描述，本发明示例性实施方式的上述以及其他目的、特征和优点将变得易于理解。在附图中，以示例性而非限制性的方式示出了本发明的若干实施方式，并且相同或对应的标号表示相同或对应的部分，其中：图1是示意性示出其中应用本发明的用于获取绿波车速的方案的示例性场景的示意图；图2是示意性示出根据本发明实施例的绿波车速计算方法的流程图；图3是示意性示出根据本发明实施例的确定车辆在第一时间窗口通过目标路口的方法的流程图；图4是示意性示出根据本发明实施例的根据行驶时间确定车辆通过目标路口的方法的流程图；图5是示意性示出根据本发明实施例的结合第二时间窗口确定绿波车速的方法的流程图；图6是示意性示出根据本发明实施例的绿波车速计算装置的示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述。显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本发明的说明书和权利要求书中使用的术语“包括”和“包含”指示所描述特征、整体、步骤、操作、元素和/或组件的存在，但并不排除一个或多个其它特征、整体、步骤、操作、元素、组件和/或其集合的存在或添加。还应当理解，在此本发明说明书中所使用的术语仅仅是出于描述特定实施例的目的，而并不意在限定本发明。如在本发明说明书和权利要求书中所使用的那样，除非上下文清楚地指明其它情况，否则单数形式的“一”、“一个”及“该”意在包括复数形式。还应当进一步理解，在本发明说明书和权利要求书中使用的术语“和/或”是指相关联列出的项中的一个或多个的任何组合以及所有可能组合，并且包括这些组合。绿波车速是指保持当前速度可以最大提升车辆的通行能力，在平交路口减少车辆等待红灯的时间。通过在一定的时间范围内协调红绿灯信号，使得车辆能够在设定的范围内提高通行能力。目前常见的绿波速度的获取方式有通过动态调整信号灯相位周期的方式，即根据车流量等因素给各个路口分配合适的信号灯时长。具体地，以交通流调对目标路口的各个相位车流量进行建模分析，根据各个时段的车流量，为各个路口处的不同相位和不同信号灯色，分别分配合适的时长，以实现路口最少的等待车辆。同时可以根据信号灯相位和周期，确定绿波车速，使得车辆可以根据该速度平稳通过路口。但是这种采用流调和建模分析对交通进行引导的方式需要交通管理方对各路口处进行控制，属于整体的管控策略，而没有针对单辆车进行引导。鉴于此，目前还有获取绿波车速的方式是通过自车确定绿波车速的方式，以及由路侧单元进行信息处理以确定绿波车速的方式。根据自车确定的绿波车速以及根据路侧单元确定滤波车速对车辆行驶过程进行引导，相对于没有进行引导车辆行驶过程，对停车次数和车辆平均延误时间都有较大的改善。本发明的方案中，自车通过各类信息的获取和分析以确定绿波车速，从而对自身车辆的行驶过程进行引导，从而有效提升了车辆在各个路口的通行能力，对改善城市交通、降低环境污染具有重要作用。下面结合附图来详细描述本发明的具体实施方式。图1是示意性示出其中应用本发明的用于获取绿波车速的方案的示例性场景100的示意图。在本发明的上下文中，前述的场景100可以包括用于各类需要交通对象参与以及需要交通信号灯参与控制的道路交通环境中，例如前述场景还可以是三叉路口、X型路口、Y型路口、多岔口环路、错位路口等多种形式的路口。基于此，可以理解的是图1仅为了示例性的目的而将该场景示出为十字交叉路口的路段。进一步地，在本发明的上下文中，前述的交通参与对象可以是与道路交通活动相关的对象，例如轿车、货车等。如图1所示，根据本发明的方案，可以在车辆102上配置相应的通信单元与路侧单元101通信，例如在车辆上设置V2X通信电路，而路侧单元能够收集到准确的交通信号灯103的信号灯信息，因此通过V2X技术可以获取可靠准确的交通信号灯信息，从而为车辆的信息处理中心的决策提供了可靠的信息来源。车辆在道路上行驶时，可以利用车辆的定位装置获取自身的位置信息，同时通过V2X通信技术与周围的路侧单元交互V2X消息。其中V2X消息可以包括路侧单元周围的地图信息、路口处的信号灯信息等交通信息。其中信号灯信息例如可以包括当前信号灯状态、当前信号灯剩余时间以及信号灯相位周期等。车辆在行驶过程中，车辆与路侧单元通信，车辆的信息处理中心可以根据路侧单元反馈的信息进行决策。本发明的上下文中，路侧单元反馈的信号灯信息、定位装置获取的车辆位置信息和车辆自身的车速信息可以发送至信息处理中心，从而实现对绿波车速的决策计算。前述信息处理中心可以实施为计算单元或模块，并且用于执行信息的处理以及可选地对互联的各类设备进行主控操作。在一个应用场景中，前述信息处理中心在通过路侧单元获取目标路口的信号灯信息后，可以根据信号灯信息中所包含的当前信号灯的剩余时间，计算在通行信号灯状态下通过目标路口对应的时间窗口，即车辆能够正常通过路口所需要的最短时间和最长时间组成的时间区间。然后信息处理中心结合当前车速信息、车辆的位置信息判断车辆能否在时间窗口内顺利通过，如果能够通过，则根据时间窗口计算车辆能够顺利通过路口的车速区间。接下来计算车速区间内每个车速对应的VSP值和通过路口的通行时间，VSP值为车辆的功率比，可以反映车辆当前的功率值，通行时间则可以反映车辆通过路口的快慢。利用设置的权重对前述VSP值和通行时间进行加权计算，则可以根据计算结果确定建议车速，从而为驾驶员提供不同需求下的车速指导。以上结合图1对本发明的方案进行了简要描述，可以理解的是以上描述仅仅是示例性的而非限制性的，本领域技术人员根据本发明的指导可以对图1中所示场景进行改变而不脱离本发明的精神和实质。前述信息处理中心例如可以是车载数据处理单元，利用车载数据处理单元和路侧单元等设备通信，以获取信号灯信息、车辆位置信息等。进一步地，前述信息处理中心也可以是与车载数据处理单元进行通信的远程终端，车辆在行驶过程中，车载数据处理单元可以一直与远程终端建立通信，从而将前述信号灯信息等上传，并接收相应的信号。图2是示意性示出根据本发明实施例的绿波车速计算方法200的流程图。可以理解的是图2中所示出的方法流程可以在图1中所示出的示例性场景中实施，因此关于图1所描述内容也同样适用于图2。如图2中所示，在步骤S201处，获取目标路口的信号灯信息。在一个应用场景中，车辆中的车载数据处理单元可以通过V2X通信方式与路侧单元通信以接收SPAT与MAP信息，从而获取目标路口对应的信号灯信息。其中信号灯信息可以包括信号灯类型、信号灯相位周期、当前信号灯剩余时间、路口位置等。例如车辆可以通过导航装置获取车辆所在的经纬度、海拔等信息，以及可以通过自身的控制系统获取车辆当前的速度、航向角等信息，从而可以确定目标路口的位置和该目标路口位置处的信号灯编号，以便于从上述SPAT信息中找到车辆所在车道的信号灯相位信息，并计算该相位所有的时间信息，包括但不限于红灯周期、绿灯周期、黄灯周期、当前灯色剩余时间等信息。然后，在步骤S202处，根据前述信号灯信息所包含的当前信号灯剩余时间，计算在通行信号灯状态下通过前述目标路口对应的第一时间窗口。例如红灯为禁行灯，绿灯为通行灯，当前直行车道对应的信号灯状态为红灯，且当前红灯的剩余时间为Tend，则当车辆达到目标路口时正好能够顺利通过的最短时间为Tend，且在绿灯结束前能通过的时间则是Tend+Dgreen，其中Dgreen是绿灯的周期，则可以得到车辆能够通过目标路口的第一时间窗口是。接着，在步骤S203处，结合当前车速信息和车辆位置信息判断车辆能否在前述计算得到的第一时间窗口内通过目标路口。在一个应用场景中，根据车辆的位置信息和车速信息可以确定车辆以相应的加速度运行时能否在第一时间窗口内通过目标路口。车辆的车载数据处理单元可以根据车辆位置信息计算得到车辆到目标路口的距离，并根据车辆的加速度计算是否能够在前述第一时间窗口内通过目标路口。再接着，在步骤S204处，响应于车辆能够通过，计算出对应的第一速度区间，在前述第一速度区间内计算各个车速对应的第一VSP值和第一通行时间。机动车的VSP是某一时刻单位质量的机动车所对应的功率，单位是kW/t或者m/s，其表示发动机克服滚动阻力和空气阻力做功的功率，因内部工作摩擦产生的传动损失功率，以及增加机动车的动能和势能所需要发出的功率。通过VSP值可以衡量车辆的功耗情况。根据前述的第一时间窗口，可以得到对应的第一速度区间，即车辆通过前述目标路口对应的速度的范围，即第一速度区间。通过第一速度区间可以给出最大建议车速和最小建议车速，从而使得驾驶员可以有足够的驾驶决策空间。在该第一速度区间内的每一个速度值都对应有一个VSP值以及对应的通过目标路口所用的第一通行时间，从而对应车辆通过目标路口的功耗情况和时间信息。在步骤S205处，结合所设置的权重对前述第一VSP值和前述第一通行时间进行加权计算，根据计算结果确定第一建议车速。在一个应用场景中，驾驶员在驾驶车辆时会有一定的偏好，例如最快的通行时间或最少的功耗，或者是功耗和通行时间二者均衡的策略。鉴于此，可以通过对表示车辆功耗情况的VSP值和通行时间设置对应的权重，从而得到相应的评分值，根据评分的高低选择合适的车速进行行驶。根据预先设置的权重分别对前述第一VSP值和第一通行时间进行加权计算，就可以根据计算结果选择相应的车速作为第一建议车速。在一个应用场景中，车辆在行驶过程中，每个时刻都对应有一个VSP值，因此，车辆从当前位置到目标路口时的第一VSP值可以通过积分的方式获取。具体地，在前述第一时间窗口内车辆能够通过目标路口的情况下，车辆的VSP值的计算公式为：VSP＝v*+0.000302*v3上述公式中，VSP为车辆比功率，v为车辆瞬时速度，a为车辆瞬时加速度。车辆当前位置到目标路口的第一VSP值可以根据积分公式确定，具体采用以下公式：VSPall＝0.0000604a3t5+0.0002265a2vt4+t3+v)t2其中t为tall，即总的通行时间，该总的通行时间包括一直加速或先加速到最高速度再均速行驶，通过对两个过程分别进行计算，可以分别取得各加速、均速行驶过程的时间用于VSP的计算过程。例如通过如下公式分别计算各部分的时间。以上结合图2对本发明的方案进行了简要说明，接下来将结合每个过程的具体实现方式对本发明的方案进一步详细阐述。图3是示意性示出根据本发明实施例的确定车辆在第一时间窗口通过目标路口的方法S203的流程图。可以理解的是图3中所示出的方法流程可以在图1中所示出的示例性场景中实施，因此关于图1所描述内容也同样适用于图3。如图3所示，前述判断车辆能否在第一时间窗口内通过目标路口时，可以通过车辆在该时间窗口内可以行驶的距离进行判定。具体地，在步骤S301处，结合前述车辆的最大加速度信息和当前车速信息计算在前述第一时间窗口内所行驶的第一距离。在一个应用场景中，可以根据当前车速、车辆可以采用的最大加速度和车辆可行驶的最大速度对行驶距离进行计算，例如采用以下公式：其中distaccel为在当前信号灯的剩余时间内车辆加速能行驶的距离，distintersection为车辆距离目标路口的距离，amax为车辆最大加速度，Vmax为车辆在该时间内可以达到的最大车速，V0为当前车速，ttravel为分别计算两种情况下的时间，dist为该种情况下到路口的距离。在步骤S302处，判断前述第一距离是否大于前述车辆与前述目标路口的距离，若是，则判断能够通过。以上内容中说明了采用行驶距离判定在第一时间窗口内是否能够通过前述目标路口的方式，接下来将说明根据行驶时间判定车辆是否能够正常通过前述目标路口的方法。图4是示意性示出根据本发明实施例的根据行驶时间确定车辆通过目标路口的方法S203的流程图。可以理解的是图4中所示出的方法流程可以在图1中所示出的示例性场景中实施，因此关于图1所描述内容也同样适用于图4。如图4所示，前述判断车辆能否在第一时间窗口内通过目标路口时，还可以通过行驶时间进行判断。具体地，在步骤S401处，结合前述车辆的当前车速信息、车辆与前述目标路口的距离以及车辆的最大加速度信息计算得到前述车辆通过目标路口的行驶时间。在一个或多个实施例中，还可以利用前述公式进行计算，例如将前述公式中的速度用行驶时间和加速度替换，从而计算不同阶段行驶的时间。在步骤S402处，判断前述行驶时间是否处于前述第一时间窗口，若行驶时间处于前述第一时间窗口，则判定能够通过。进一步地，由于车辆在不同的道路上行驶时，除了车辆自身对车速的限制，还依据法规设置有车速预警值，因此在获取前述第一速度区间时，还需要结合车速预警值进行设置，以避免行驶过程中超速情况的发生。判断前述车辆通过目标路口时是否达到车速预警值，若达到所述车速预警值，则将前述车速预警值作为前述第一速度区间的上限。在一个或多个实施例中，城市中的道路一般情况下限速60km/h，快速路则限速80km/h，则在确定第一速度区间的上限时，需要根据具体路段中的车速预警值进行设置。上述内容详细说明了车辆能够在第一时间窗口内通过目标路口时对应绿波车速的获取方式，接下来将说明在第一时间窗口内不能够通过目标路口时的绿波车速获取方法。图5是示意性示出根据本发明实施例的结合第二时间窗口确定绿波车速的方法S206的流程图。可以理解的是图5中所示出的方法流程可以在图1中所示出的示例性场景中实施，因此关于图1所描述内容也同样适用于图5。前述内容中说明了车辆在第一时间窗口内能够通过目标路口时，确定绿波车速的方法，接下来将说明车辆不能够在第一时间窗口内通过目标路口内时可能发生的几种情况。第一种情况是车辆可以通过先减速再均速行驶的过程以在第二时间窗口内通过目标路口。如图5所示，响应于车辆不能够在第一时间窗口内通过目标路口，首先，在步骤S501处，根据前述第一时间窗口和信号灯相位周期计算第二时间窗口。在一个应用场景中，当车辆在最近的通行灯亮起的时间段内无法通过路口时，就需要等待接下来一次或多次通行灯亮起的时间，因而需要在第一时间窗口的基础上，结合信号灯相位周期计算得到接下来可能通过目标路口的时间窗，即第二时间窗口。然后，在步骤S502处，判断前述车辆能否在第二时间窗口内通过前述目标路口。可以根据车辆位置信息确定车辆距离目标路口的距离，然后根据车辆所能行驶的距离或者是车辆的通行时间确定车辆是否能够在第二时间窗口内通过目标路口。接着，在步骤S503处，响应于车辆能够在前述第二时间窗口内通过前述目标路口，计算出对应的第二速度区间，其中第二速度区间可以包括减速区间和均速区间。在一个应用场景中，第二时间窗口中的最小通行时间也大于前述第一时间窗口的最大通行时间，那么车辆在行驶过程中需要经过先减速再均速行驶的过程。进一步地，在步骤S504处，在前述第二速度区间内计算各个车速对应的第二VSP值、对应的减速通行时间和均速通行时间。在一个应用场景中，可以根据车辆行驶距离和均速车速设置约束条件，并根据相应的计算公式计算车辆在行驶过程中的减速段和均速段。具体地，已知车辆在第二时间口可以通过目标路口，则可以采用以下公式计算车辆最大车速和最小车速。例如采用以下公式可以计算vt＝v0+a*ta约束条件为distdrive＞distintersectionvt＞0其中，distdrive为先减速再匀速的行驶过程，distintersection＝车辆距离目标路口的距离，vt为最终匀速车速，v0为初始车速，tb为到目标路口的匀速时间，a为减速的加速度，ta为减速的时间。在步骤S505处，结合所设置的权重对前述第二VSP值、减速通行时间和均速通行时间进行加权计算，根据计算结果确定第二建议车速。根据预先设置的权重可以对VSP值和通行时间进行加权计算，从而得到对应的评分值，以便于得到最优的建议车速，从而为驾驶员驾驶车辆提供引导。进一步地，根据前述第一时间窗口和信号灯相位周期计算第二时间窗口时，可以通过在前述第一时间窗口上叠加一个或多个信号灯相位周期，以得到对应的第二时间窗口。在一个应用场景中，在第一时间窗口上叠加一个信号灯相位周期时，可以通过以下表格说明第二时间窗口的取值方法。如下表1所示，表1当前灯色tmintmax红TendTend+Dgreen黄Tend+DredTend+Dred+Dgreen绿0Tendtmintmax红Tend+TcycleTend+Dgreen+Tcycle黄Tend+Dred+TcycleTend+Dred+Dgreen+Tcycle绿Tend+Dred+DyellowTend+Dred+Dyellow+Tcycle上述表1中，以红色信号灯作为禁行灯，以绿色信号灯作为通行灯，Tend为当前灯色剩余时间，Dred为红灯周期，Dyellow为黄灯周期，Dgreen为绿灯周期，Tcycle＝Dred+Dyellow+Dgreen为信号灯相位周期。第二种情况是车辆的减速过程无法在到达目标路口前完成，即车辆没有足够的制动距离。这种情况下车辆既无法通过加速过程通过目标路口，也无法在到达目标路口前完成制动，因此车辆将陷入两难区，此时需要进行告警，以告知驾驶员将可能发生闯禁行灯的情况。在一个应用场景中，车辆是否可以停下的过程可以通过以下方式实现。其中amin为反向最大加速度，distdecel为制动距离。通过将制动距离与车辆距离目标路口的距离distintersection进行比较确认是否可以停下。通过此计算过程结合前述判断是否可以在第一时间窗口内通过目标路口的过程可以综合判定车辆是否处于两难区，以便于对车辆特殊情况的告警操作。在本发明的另一个方面，本发明提供了一种如图6所示的绿波车速计算装置，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现前述绿波车速计算方法。进一步地，该装置10中还可以包括显示器，该显示器与前述的处理器连接，以对绿波车速的情况进行显示。关于该装置10所实现的方法，由于在前文中已经进行了详细的说明，故而在此也不再赘述。如在本说明书和权利要求书中所使用的那样，术语“如果”可以依据上下文被解释为“当...时”或“一旦”或“响应于确定”或“响应于检测到”。类似地，短语“如果确定”或“如果检测到”可以依据上下文被解释为意指“一旦确定”或“响应于确定”或“一旦检测到”或“响应于检测到”。虽然本发明的实施方式如上，但所述内容只是为便于理解本发明而采用的实施例，并非用以限定本发明的范围和应用场景。任何本发明所述技术领域内的技术人员，在不脱离本发明所揭露的精神和范围的前提下，可以在实施的形式上及细节上作任何的修改与变化，但本发明的专利保护范围，仍须以所附的权利要求书所界定的范围为准。
