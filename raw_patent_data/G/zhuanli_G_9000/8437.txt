标题title
车辆交替通行的识别方法、识别设备及计算机存储介质
摘要abst
本申请公开了一种车辆交替通行的识别方法、识别设备及计算机存储介质，识别方法包括：基于在第一车道上检测出的第一车辆确定第一车辆队列，基于在第二车道上检测出的第二车辆确定第二车辆队列；第一车道和第二车道交汇；对第一车辆队列和第二车辆队列中的各个车辆经过交汇处的情况进行跟踪；响应于跟踪到至少两个第一车辆连续经过交汇处，确定至少两个第一车辆中除首个经过交汇处的第一车辆之外的第一车辆违反交替通行规定，和/或，响应于至少两个第二车辆连续经过交汇处，确定至少两个第二车辆中除经过交汇处的第二车辆之外的第二车辆违反交替通行规定。本申请可实现交汇车道上车辆交替通行的违规识别。
权利要求书clms
1.一种车辆交替通行的识别方法，其特征在于，所述识别方法包括：基于在第一车道上检测出的第一车辆确定第一车辆队列，基于在第二车道上检测出的第二车辆确定第二车辆队列；所述第一车道和所述第二车道交汇；对所述第一车辆队列的各个第一车辆和所述第二车辆队列中的各个第二车辆经过交汇处的情况进行跟踪；响应于跟踪到至少两个第一车辆连续经过所述交汇处，确定所述至少两个第一车辆中X1车辆违反交替通行规定，所述X1车辆为所述至少两个第一车辆中除首个经过所述交汇处的第一车辆之外的第一车辆；和/或，响应于跟踪到至少两个第二车辆连续经过所述交汇处，确定所述至少两个第二车辆中X2车辆违反交替通行规定，所述X2车辆为所述至少两个第二车辆中除经过所述交汇处的第二车辆之外的第二车辆。2.根据权利要求1所述的识别方法，其特征在于，所述识别方法还包括：响应于跟踪到将要经过所述交汇处的通行车辆的跟踪状态为丢失状态；并且，在所述交通通行规则下所述通行车辆的下一个交替车辆经过所述交汇处后，所述通行车辆的跟踪状态为丢失状态；则不判断所述通行车辆和所述交替车辆是否违反交替通行规则。3.根据权利要求1所述的识别方法，其特征在于，所述识别方法还包括：响应于跟踪到所述第一车辆队列中将要经过所述交汇处的至少连续两辆第一车辆的跟踪状态为丢失状态；和/或，响应于跟踪到所述第二车辆队列中将要经过所述交汇处的至少连续两辆第二车辆的跟踪状态为丢失状态；则基于在所述第一车道上检测出的第一车辆重新确定第一车辆队列，基于在所述第二车道上检测出的第二车辆重新确定第二车辆队列。4.根据权利要求1所述的识别方法，其特征在于，所述基于在第一车道上检测出的第一车辆确定第一车辆队列，基于在第二车道上检测出的第二车辆确定第二车辆队列，均包括：检测车道上的车辆，依据车流方向将车辆依次排列形成车辆队列；所述对所述第一车辆队列的各个第一车辆和所述第二车辆队列中的各个第二车辆经过交汇处的情况进行跟踪，包括：对所述第一车辆队列的各个第一车辆和所述第二车辆队列中的各个第二车辆经过交汇处的次序进行跟踪。5.根据权利要求4所述的识别方法，其特征在于，所述第一车道和所述第二车道均对应设置有中间线，所述中间线到所述交汇处为所述车流方向；所述检测车道上的车辆，依据车流方向将车辆依次排列形成车辆队列，包括：检测车道上依次经过所述中间线的车辆，依次排列形成车辆队列。6.根据权利要求5所述的识别方法，其特征在于，所述第一车道和所述第二车道均对应设置有前置线，所述前置线到所述中间线为所述车流方向；所述识别方法包括：对经过所述前置线的车辆进行第一次抓拍，对经过所述中间线的车辆进行第二次抓拍；对经过所述交汇处且判定为违反交替通行规则的车辆进行第三次抓拍。7.根据权利要求1所述的识别方法，其特征在于，基于在第一车道上检测出的第一车辆确定第一车辆队列，基于在第二车道上检测出的第二车辆确定第二车辆队列，均包括：获取车道的视频图像；根据所述视频图像确定预设时间段内车辆的移动距离，根据所述车辆的移动距离判断所述车辆是否为缓行车辆；计算所述车道中缓行车辆的车道空间占比，根据所述车道空间占比确定所述车道是否为拥堵车道；若所述车道为拥堵车道，则形成车辆队列。8.根据权利要求7所述的识别方法，其特征在于，所述根据所述视频图像确定预设时间段内车辆的移动距离，根据所述车辆的移动距离判断所述车辆是否为缓行车辆；确定所述预设时间段内始端图像中车辆的始端坐标，以及尾端图像中车辆的尾端坐标，将所述尾端坐标和所述始端坐标的差值作为所述车辆的移动距离；确定所述尾端图像中车辆在车流方向的高度尺寸，若所述移动距离小于高度尺寸的一半，则判定所述车辆为缓行车辆。9.根据权利要求7所述的识别方法，其特征在于，所述计算所述车道中缓行车辆的车道空间占比，根据所述车道空间占比确定所述车道是否为拥堵车道，包括：确定所述缓行车辆在车流方向的高度尺寸总和，以及车道在车流方向的车道高度尺寸，将所述高度尺寸总和与车道高度尺寸的比值作为所述车道空间占比；若所述车道空间占比小于预设比值，则判定所述车道为拥堵车道。10.根据权利要求1-9中任一项所述的识别方法，其特征在于，所述识别方法还包括：识别所述车辆的左侧关键点、右侧关键点；根据所述左侧关键点、右侧关键点确定所述车尾中点，以在所述识别方法的步骤中基于所述车尾中点判断所述车辆的位置。11.一种车辆交替通行的识别设备，其特征在于，所述识别设备包括处理器和存储器，所述存储器中存储有程序指令，所述处理器用于执行所述程序指令以实现权利要求1-10中任一项所述的方法。12.一种计算机存储介质，其特征在于，所述计算机存储介质中存储有程序指令，所述程序指令被执行以实现权利要求1-10中任一项所述的方法。
说明书desc
技术领域本申请属于智能交通技术领域，具体包括了一种车辆交替通行的识别方法、识别设备及计算机存储介质。背景技术随着人们生活水平不断提高，城市私家车数量急剧攀升，高架匝道在上下班高峰极易发生拥堵，为解决该情况，交管部门制定了匝道交替通行法规，在匝道交替通行区域，若存在缓行拥堵，左右两个车道车辆必须严格依次交替通行，若有超车的将进行违法处罚。针对交替通行的管控，当前由专门的人使用无人机进行人眼管控，效率低、成本大。发明内容本申请提出一种车辆交替通行的识别方法、识别设备及计算机存储介质，以解决现有技术中人眼管控效率低、成本大的问题。为解决上述问题，本申请提出一种车辆交替通行的识别方法，包括基于在第一车道上检测出的第一车辆确定第一车辆队列，基于在第二车道上检测出的第二车辆确定第二车辆队列；所述第一车道和所述第二车道交汇；对所述第一车辆队列的各个第一车辆和所述第二车辆队列中的各个第二车辆经过交汇处的情况进行跟踪；响应于跟踪到至少两个第一车辆连续经过所述交汇处，确定所述至少两个第一车辆中X1车辆违反交替通行规定，所述X1车辆为所述至少两个第一车辆中除首个经过所述交汇处的第一车辆之外的第一车辆；和/或，响应于跟踪到至少两个第二车辆连续经过所述交汇处，确定所述至少两个第二车辆中X2车辆违反交替通行规定，所述X2车辆为所述至少两个第二车辆中除经过所述交汇处的第二车辆之外的第二车辆。在一实施例中，识别方法还包括：响应于跟踪到将要经过所述交汇处的通行车辆的跟踪状态为丢失状态；并且，在所述交通通行规则下所述通行车辆的下一个交替车辆经过所述交汇处后，所述通行车辆的跟踪状态为丢失状态；则不判断所述通行车辆和所述交替车辆是否违反交替通行规则。在一实施例中，所述识别方法还包括：响应于跟踪到所述第一车辆队列中将要经过所述交汇处的至少连续两辆第一车辆的跟踪状态为丢失状态；和/或，响应于跟踪到所述第二车辆队列中将要经过所述交汇处的至少连续两辆第二车辆的跟踪状态为丢失状态；则基于在所述第一车道上检测出的第一车辆重新确定第一车辆队列，基于在所述第二车道上检测出的第二车辆重新确定第二车辆队列。在一实施例中，所述基于在第一车道上检测出的第一车辆确定第一车辆队列，基于在第二车道上检测出的第二车辆确定第二车辆队列，均包括：检测车道上的车辆，依据车流方向将车辆依次排列形成车辆队列；所述对所述第一车辆队列的各个第一车辆和所述第二车辆队列中的各个第二车辆经过交汇处的情况进行跟踪，包括：对所述第一车辆队列的各个第一车辆和所述第二车辆队列中的各个第二车辆经过交汇处的次序进行跟踪。在一实施例中，所述第一车道和所述第二车道均对应设置有中间线，所述中间线到所述交汇处为所述车流方向；所述检测车道上的车辆，依据车流方向将车辆依次排列形成车辆队列，包括：检测车道上依次经过所述中间线的车辆，依次排列形成车辆队列。在一实施例中，所述第一车道和所述第二车道均对应设置有前置线，所述前置线到所述中间线为所述车流方向；所述识别方法包括：对经过所述前置线的车辆进行第一次抓拍，对经过所述中间线的车辆进行第二次抓拍；对经过所述交汇处且判定为违反交替通行规则的车辆进行第三次抓拍。在一实施例中，基于在第一车道上检测出的第一车辆确定第一车辆队列，基于在第二车道上检测出的第二车辆确定第二车辆队列，均包括：获取车道的视频图像；根据所述视频图像确定预设时间段内车辆的移动距离，根据所述车辆的移动距离判断所述车辆是否为缓行车辆；计算所述车道中缓行车辆的车道空间占比，根据所述车道空间占比确定所述车道是否为拥堵车道；若所述车道为拥堵车道，则形成车辆队列。在一实施例中，所述根据所述视频图像确定预设时间段内车辆的移动距离，根据所述车辆的移动距离判断所述车辆是否为缓行车辆；确定所述预设时间段内始端图像中车辆的始端坐标，以及尾端图像中车辆的尾端坐标，将所述尾端坐标和所述始端坐标的差值作为所述车辆的移动距离；确定所述尾端图像中车辆在车流方向的高度尺寸，若所述移动距离小于高度尺寸的一半，则判定所述车辆为缓行车辆。在一实施例中，所述计算所述车道中缓行车辆的车道空间占比，根据所述车道空间占比确定所述车道是否为拥堵车道，包括：确定所述缓行车辆在车流方向的高度尺寸总和，以及车道在车流方向的车道高度尺寸，将所述高度尺寸总和与车道高度尺寸的比值作为所述车道空间占比；若所述车道空间占比小于预设比值，则判定所述车道为拥堵车道。在一实施例中，所述识别方法还包括：识别所述车辆的左侧关键点、右侧关键点；根据所述左侧关键点、右侧关键点确定所述车尾中点，以在所述识别方法的步骤中基于所述车尾中点判断所述车辆的位置。为解决上述问题，本申请提出一种车辆交替通行的识别设备，包括处理器和存储器，存储器中存储有程序指令，处理器用于执行程序指令以实现上述识别方法。为解决上述问题，本申请提出一种计算机存储介质，其中存储有程序指令，程序指令被执行以实现上述识别方法。本申请车辆交替通行的识别方法包括：基于在第一车道上检测出的第一车辆确定第一车辆队列，基于在第二车道上检测出的第二车辆确定第二车辆队列；第一车道和第二车道交汇；对第一车辆队列的各个第一车辆和第二车辆队列中的各个第二车辆经过交汇处的情况进行跟踪；响应于跟踪到至少两个第一车辆连续经过交汇处，则确定除首个第一车辆之外的其他第一车辆违反交替通行规定，和/或，响应于跟踪到至少第二车辆连续经过交汇处，则确定除首个第二车辆之外的其他第二车辆违反交替通行规则。本申请可实现交汇车道上车辆交替通行的违规识别。附图说明图1是本申请车辆交替通行的识别方法一实施例的流程示意图；图2是本申请识别方法中车辆关键点的示意图；图3是本申请识别方法中检测车辆关键点的示意图；图4是本申请识别方法中获取车尾中点的示意图；图5是本申请识别方法中前置线、中间线和后置线的分布示意图；图6是本申请识别方法中车辆所在车道的空间占有率计算的示意图；图7是本申请车辆交替通行的识别设备一实施例的结构示意图；图8是本申请计算机可读存储介质一实施例的框架示意图。具体实施方式下面结合附图和实施例对本申请技术方案做进一步详细说明，以下实施例不构成对本申请的限定。为使本申请的目的、技术方案和优点更加清楚，下面将结合附图对本申请的实施方式作进一步地详细描述。如图1所示，本实施例车辆交替通行的识别方法用于对两条交汇车道上车辆的交替通行进行识别，因而在以下方法中主要是针对交汇的第一车道和第二车道上的车辆进行识别判断。本实施例识别方法具体包括以下步骤。S11：基于在第一车道上检测出的第一车辆确定第一车辆队列，基于在第二车道上检测出的第二车辆确定第二车辆队列。在本步骤中，首先检测车道上的车辆，依据车流方向将车辆依次排列形成车辆队列，即确定车道上的车辆，以及车辆的流动顺序，以利于交汇处所经过车辆的识别和判断。对车道上的车辆进行识别主要是利用关键点检测，具体来说，本实施例中识别车辆的左侧关键点、右侧关键点；然后根据左侧关键点、右侧关键点确定车尾中点，以在识别方法的步骤中基于车尾中点判断车辆的位置。其中，以左侧关键点及右侧关键点来确定车尾中点，继而判断车辆的位置，可在车辆有一定遮挡，无法直接获取车尾中点的情况下也能准确的判断出车辆的位置。左侧关键点即相对车尾中点以左的特征点，右侧关键点即相对车尾中点以右的特征点。如图2中，在本实施例中定义了22个车辆关键点，具体如下：1左前轮9车头中点17车尾左刹车灯2左后轮10车头车牌18车尾右刹车灯3右前轮11左后视镜19车尾中点4右后轮12右后视镜20车尾车牌5车头右雾灯13车头右顶点21车尾左挡板点6车头左雾灯14车头左顶点22车尾右挡板点7车头右大灯15车尾左顶点8车头左大灯16车尾右顶点其中，点定义为机动车辆左侧关键点，点定义为机动车辆侧面关键点，点定义为机动车头关键点，点定义为机动车尾关键点。具体来说，本实施例中检测车辆的过程如图3，将获取的视频图像输入到目标检测CNN和decoder-encoder模块，如CenterNet网络、RetinaNet网络等，从而检测出关键点。在利用关键点进行跟踪时，本申请中对每个机动车采用不限于传统csk、kcf算法或深度学习siamrpn++系列等算法进行目标跟踪。在此过程中，获取车尾中点的计算过程如下。通过机动车的15、16、17、18、21、22求出车尾投影的左端点、右端点以及中点，如图4，其中计算过程若存在点21、22，则优先使用21、22计算，如式2，一般设置阈值t为0.1，否则若存在点17、18，则使用17、18计算，如式3，否则使用15、16进行计算，如式4，中点计算如式5；在具体应用中，可采用摄像头来对车道进行监控，由于本实施例中主要是监控交汇处的交替通行，在对车辆队列进行判断时，并不需要对整条车道上的车辆进行次序判断。只需对靠近交汇处的一段车道进行识别判断即可。因而如图5，在第一车道和第二车道上均设置有中间线，中间线到交汇处的方向为车流方向；识别车道上依次经过中间线的车辆，以依次排列形成车辆队列。进一步的，本实施例最终是为了判断车辆是否违章，针对违规的车辆，需要抓拍三张图像，即沿着行驶方向，依次拍摄违章前的两张，以及违章的一张。因而在第一车道和第二车道上还设置有前置线，前置线到中间线的方向为车流方向。对经过前置线的车辆进行第一次抓拍，对经过中间线的车辆进行第二次抓拍，对经过交汇处且判定为违反交替通行规则的车辆进行第三次抓拍。本步骤中识别车辆形成车辆队列是为了判断交汇处的交替通行，且进一步的，在交通缓行拥堵的情况下才需要进行交替通行的识别，因而在形成队列之前还可进一步判断车道上的拥挤情况。具体包括以下步骤。S111：获取车道的视频图像。判断车道是否拥堵，即判断该车道上的车辆在一段时间内是否移动或移动的是否过慢，即可判断出车道是否拥挤。因此首先获取该车道的视频，然后再对视频中的图像帧进行识别判断。S112：根据视频图像确定预设时间段内车辆的移动距离，根据车辆的移动距离判断车辆是否为缓行车辆。本步骤的具体过程为：确定预设时间段内，始端图像中车辆的始端坐标，以及尾端图像中车辆的尾端坐标，将尾端坐标与始端坐标的差值作为车辆的移动距离；确定尾端图像中车辆在车流方向上的高度尺寸，若移动距离小于高度尺寸的一半，则判定车辆为缓行车辆。始端图像和尾端图像的采集帧率可以为25帧/s，判断公式具体如式6，其中，y25center表示第25帧时该车辆的投影中心点y坐标，y1center表示第1帧时该车辆的投影中心点y坐标，h25表示第25帧时该车辆的高度，若不等式6成立，则表示该此刻处于缓行状态；S113：计算车道中缓行车辆的车道空间占比，根据车道空间占比确定车道是否为拥堵车道。根据缓行车辆的空间占比即可判断车道是否拥堵，即缓行车辆越多，则可确定为拥堵车道。具体过程：确定缓行车辆在车流方向的高度尺寸总和，以及车道在车流方向的车道高度尺寸，将高度尺寸总和与车道高度尺寸的比值作为车道空间占比；若车道空间占比小于预设比值，则判定车道为拥堵车道。可参阅图6，计算缓行车辆所在车道的空间占有率tp，通过计算车道内缓行车辆高度的总和vhsum，和车道高度hlane，则tp＝vhsum/hlane，若tp小于预设阈值则认为该车道存在车辆缓行拥堵在步骤S11中，若由以上步骤S111-S113判断出车道为拥堵车道，则形成车辆队列。S12：对所述第一车辆队列的各个第一车辆和所述第二车辆队列中的各个第二车辆经过交汇处的情况进行跟踪。在第一车道和第二车道形成车辆队列后，即可对车辆队列中的车辆进行管理及识别判断。在跟踪第一车辆队列和第二车辆队列中的车辆时，建立第一车辆队列和第二车辆队列，且在车辆队列中存放车辆id及跟踪状态，跟踪状态分为updata、lost，具体如下。具体的在车辆的车尾中点通过中间线后，则将车辆id存放到车辆队列中，同时还可缓存第二张抓拍图。而当车辆的车尾中点通过交汇处后，判断该id的车辆是否发生不按规定交替通行违法。具体即跟踪第一车辆队列和第二车辆队列中的车辆经过交汇处的次序。若跟踪到第一车辆队列中至少两个第一车辆连续经过交汇处，或第二车辆队列中至少两个第二车辆连续经过交汇处，则执行S13。S13：确定所述至少两个第一车辆中X1车辆违反交替通行规则，或确定所述至少两个第二车辆中X2车辆违反交替通行规则。X1车辆为至少两个第一车辆中除首个经过交汇处的第一车辆之外的第一车辆，X2车辆为至少两个第二车辆中除首个经过交汇处的第二车辆之外的第二车辆。对应以上示例，若车道1、2所有id车辆都为update状态，即无发生车辆遮挡，初始化时假定车道1先行，车道1中id为1的车辆出队列，而后是车道2队列中id为2车辆出队列，交替进行，若其中一个队列中发生连续出队列情况，则判断连续出队列车辆为不按规定交替通行，抓拍第三张。若跟踪到将要经过所述交汇处的通行车辆的跟踪状态为丢失状态，且在交通通行规则下通行车辆的下一个交替车辆经过交汇处后，通行车辆的跟踪状态为丢失状态，则执行S14。S14：不判断通行车辆和交替车辆是否违反交替通行规则。对应以上示例，发生车辆遮挡，队列中头部车辆状态为lost情况，举例说明如下表，初始化时假定车道1先行，车道1中id为1的车辆出队列，然而车道2中队列头部id为2车辆由于被遮挡一直处于lost状态，当车道1中id为3车辆过后置线出队列时，判断车道2队列中id为2车辆仍存在但跟踪状态为lost，此时由于id为2的车辆被遮挡，跟踪处于丢失状态，无法准确判断是否发生不按规定交替通行，故车道1中id为2车辆和车道2中id为2车辆同时剔除队列，保证了交替通行违法抓拍的准确率。若跟踪到第一车辆队列或第二车辆队列中将要经过交汇处的至少联系两辆通行车辆的跟踪状态为丢失状态；则重新回到步骤S11，即重新识别第一车道上的车辆以形成第一车辆队列，识别第二车道上的车辆以形成第二车辆队列。对应以上示例，发生车辆遮挡，队列中头部存在连续车辆状态为lost情况，举例说明如下表，此时说明有大车发生严重遮挡，在中间线与后置线之间的车辆跟踪id已发生混乱，无法判断是否存在交替通行违法，故清空两个队列，重新初始化进入中间线的车辆。本实施例车辆交替通行的识别方法包括：识别第一车道上的车辆以形成第一车辆队列，识别第二车道上的车辆以形成第二车辆队列；第一车道和第二车道交汇；在第一车道和所述第二车道的交汇处，跟踪第一车辆队列和第二车辆队列中的车辆经过交汇处的情况；若跟踪到第一车辆队列或第二车辆队列中存在至少两个车辆连续经过交汇处，则判定至少两个车辆中除了第一个经过交汇处的车辆，其他的车辆均违反交替通行规则。本申请可实现交汇车道上车辆交替通行的违规识别。请参阅图7，本实施例车辆交替通行的识别设备70包括相互耦接的存储器71和处理器72，处理器72用于执行存储器71中存储的程序指令，以实现上述方法实施例的步骤。在一个具体的实施场景中，电子设备70可以包括但不限于：微型计算机、服务器，此外，电子设备70还可以包括笔记本电脑、平板电脑等移动设备，在此不做限定。具体而言，处理器72用于控制其自身以及存储器71以实现上述任一信息的管理方法或者是增强现实的显示方法实施例的步骤。处理器72还可以称为CPU。处理器72可能是一种集成电路芯片，具有信号的处理能力。处理器72还可以是通用处理器、数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等。另外，处理器72可以由集成电路芯片共同实现。请参阅图8，图8为本申请计算机可读存储介质一实施例的框架示意图。计算机可读存储介质80存储有能够被处理器运行的程序指令81，程序指令81用于实现上述任一信息的管理方法或者是增强现实的显示方法实施例的步骤。以上实施例仅用于说明本申请的技术方案而非对其进行限制，在不背离本申请精神及其实质的情况下，熟悉本领域的技术人员当可根据本申请做出各种相应的改变和变形，但这些相应的改变和变形都应属于本申请所附的权利要求的保护范围。
