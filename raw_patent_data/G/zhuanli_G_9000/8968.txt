标题title
一种高速调制与同步采集关联成像方法及系统
摘要abst
本发明属于光学成像与计算机成像的技术领域，尤其涉及一种高速调制与同步采集关联成像方法及系统。所述关联成像方法包括以下步骤：步骤S1：接收成像物体的光信号，预置的调制散斑序列对所述光信号进行调制，将所述被调制后的光信号转换为序列电信号；步骤S2：将所述序列电信号转换为数字信号，并对数字信号进行缓存；步骤S3：判断缓存中数字信号数量是否达到预定字节，若是则读取预定字节数字信号进行分析并计算得到探测信号；步骤S4：根据所述探测信号和调制散斑序列通过复原算法复原物体图像。通过本发明可以实现高速调制和同步采集关联成像，避免探测信号出现错位或遗漏等问题，降低计算机读取数据的频次，具备在线实时关联成像能力。
权利要求书clms
1.一种高速调制与同步采集关联成像方法，其特征在于，所述关联成像方法包括以下步骤：步骤S1：接收成像物体的光信号，预置的调制散斑序列对所述光信号进行调制，将被调制后的光信号转换为序列电信号；步骤S2：将所述序列电信号转换为数字信号，并对数字信号进行缓存；步骤S3：判断缓存中数字信号数量是否达到预定字节，若是则读取预定字节数字信号进行分析并计算得到探测信号；步骤S4：根据所述探测信号和调制散斑序列通过复原算法复原物体图像。2.根据权利要求1所述的高速调制与同步采集关联成像方法，其特征在于，所述判断缓存数据是否达到预定字节具体包括：设置调制散斑Si的数量为N，单次采集的数字信号长度为m字节，其中，调制散斑序列的数量N为满足计算一帧图像的散斑数量；计算预定字节，其中预定字节以W表示，W＝N*m；判断缓存区数量是否大于预定字节。3.根据权利要求2所述的高速调制与同步采集关联成像方法，其特征在于，所述对缓存数据计算分析得到探测信号具体包括：读取缓存区中的W个字节数据，并分成N份；对每m个字节分别扣除起始段和末尾段长度为n的数据，其中n＜m/10；对剩余的数据进行求和后取平均值，作为该调制散斑下的探测信号。4.一种高速调制与同步采集关联成像系统，其特征在于，包括依次设置的接收镜头组，用于接收成像物体的光信号；数字微镜器件，用于通过预置调制散斑对接收镜头组接收的光信号进行调制；单像素探测器，用于将数字微镜器件调制后的光信号转换为电信号；数据采集卡，用于对单像素探测器输出的电信号进行数字化；系统还包括计算机，分别与数据采集卡、数字微镜器件进行数据交互，所述计算机设置数据采集卡和数字微镜器件的参数，并预置数字微镜器件的调制散斑以及读取数据采集卡输出的数字信号；所述数字微镜器件还与数据采集卡进行交互，所述数字微镜器件产生外同步信号触发数据采集卡。5.根据权利要求4所述的一种高速调制与同步采集关联成像系统，其特征在于，所述数据采集卡包括不少于设定内存的板载FIFO缓冲区，当板载FIFO缓冲区存储数据达到设定数量后，计算机读取板载FIFO缓冲区数据。6.一种计算机可读存储介质，其特征在于，介质存有计算机程序，计算机程序运行后，执行如权利要求1-3任意一项所述的一种高速调制与同步采集的关联成像方法。7.一种计算机系统，其特征在于，包括处理器、存储介质，存储介质上存有计算机程序，处理器从存储介质上读取并运行计算机程序以执行如权利要求1-3任意一项所述的一种高速调制与同步采集的关联成像方法。
说明书desc
技术领域本发明属于光学成像与计算机成像的技术领域，尤其涉及一种高速调制与同步采集关联成像方法及系统。背景技术关联成像作为一种新型的计算成像技术，在光学遥感等领域具有重要的应用前景。无论是前向调制还是后向调制的关联成像系统，要求数据采集卡的外触发频率通常与调制器件的调制频率同步，单像素探测器完成光电转换，数据采集卡实现对电信号的数字化，最后联合调制信号与数字化后的物体信息通过计算算法来复原物体图像。无论通过何种计算算法，上述过程都要求成像物体的数字化信号与调制信号一一对应，不能出现错位、遗漏等现象，否则不能复原出物体的图像。对于采用数字投影仪等低调制频率的关联成像系统，通常采用单次调制→数据采集→数字信号读取与显示→单次调制→数据采集→数字信号与显示→……的方式进行处理，当调制与采集达到一定次数后进行图像复原计算，这种方式在数据采集卡的重触发频率或者调制频率较低时一般可以正常运行，调制频率低意味了重构一幅图像所需的时间长。对于，目前常用的空间光调制器数字微镜器件，其对二值化散斑的调制频率最大可达22kHz,因此如果在关联成像系统中将调制频率或者采集卡的重复发频率设置为10kHz或者20kHz时，还是采用单次调制→数据采集→数字信号读取与显示→单次调制→数据采集→数字信号与显示→……的方式进行处理，计算机会频繁读取数据采集卡采集的数据，经常会出现卡顿、数据错位与遗漏等现象，严重时造成系统无法正常工作。在此背景下，发明一种高速调制与同步采集关联成像方法及系统。发明内容本发明公开了一种高速调制与同步采集关联成像方法，所述关联成像方法包括以下步骤：步骤S1：接收成像物体的光信号，预置的调制散斑序列对所述光信号进行调制，将被调制后的光信号转换为序列电信号；步骤S2：将所述序列电信号转换为数字信号，并对数字信号进行缓存；步骤S3：判断缓存中数字信号数量是否达到预定字节，若是则读取预定字节数字信号进行分析并计算得到探测信号；步骤S4：根据所述探测信号和调制散斑序列通过复原算法复原物体图像。进一步的，所述判断缓存数据是否达到预定字节具体包括：设置调制散斑Si的数量为N，单次采集的数字信号长度为m字节，其中，调制散斑序列的数量N为满足计算一帧图像的散斑数量；计算预定字节，其中预定字节以W表示，W＝N*m；判断缓存区数量是否大于预定字节。进一步的，所述对缓存数据计算分析得到探测信号具体包括：读取缓存区中的W个字节数据，并分成N份；对每m个字节方分别扣除起始段和末尾段长度为n的数据，其中n＜m/10；对剩余的数据进行求和后取平均值，作为该调制散斑下的探测信号。本发明还公开了一种高速调制与同步采集关联成像系统，包括依次设置的接收镜头组，用于接收成像物体的光信号；数字微镜器件，用于通过预置调制散斑对接收镜头组接收的光信号进行调制；单像素探测器，用于将数字微镜器件调制后的光信号转换为电信号；数据采集卡，用于对单像素探测器输出的电信号进行数字化；系统还包括计算机，分别与数据采集卡、数字微镜器件进行数据交互，所述计算机设置数据采集卡和数字微镜器件的参数，并预置数字微镜器件的调制散斑以及读取数据采集卡输出的数字化信号；所述数字微镜器件还与数据采集卡进行交互，所述数字微镜器件产生外同步信号触发数据采集卡。进一步的，所述数据采集卡包括不少于设定内存的板载FIFO缓冲区，当板载FIFO缓冲区存储数据达到设定数量后，计算机读取板载FIFO缓冲区数据。本发明还公开了一种计算机可读存储介质，介质存有计算机程序，计算机程序运行后，执行任意一项上述的一种高速调制与同步采集的关联成像方法。本发明公开了一种计算机系统，包括处理器、存储介质，存储介质上存有计算机程序，处理器从存储介质上读取并运行计算机程序以执行任意一项上述的一种高速调制与同步采集的关联成像方法。有益效果：通过本发明可以实现高速调制和同步采集关联成像，避免探测信号出现错位或遗漏等问题，降低了计算机读取数据的频次，具备在线实时关联成像要求。附图说明图1为本发明中一种高速调制与同步采集关联成像方法的流程图；图2为本发明中一种高速调制与同步采集关联成像系统的框架示意图。具体实施方式本发明公开了一种高速调制与同步采集关联成像方法，如图1所示，所述成像方法包括以下步骤：步骤S1：接收成像物体的光信号，预置的调制散斑序列对光信号进行调制，并将所述调制后的光信号转换为序列电信号；步骤S2：将所述序列电信号转换为数字信号，并对数字信号进行缓存；步骤S3：判断缓存中数字信号数量是否达到预定字节，若是则读取预定字节个数字信号进行分析并计算得到探测信号；步骤S4：根据所述探测信号和调制散斑序列通过复原算法复原物体图像。具体的，在使用基于Hadamard基生成的正交图案作为调制散斑成像时，根据成像空间分辨率，需要预置一定数量的调制散斑加载到数字微镜器件上才能实现关联成像。接收镜头组接收成像物体的光信号，该光信号首先会被数字微镜器件接收，数字微镜器件上的调制散斑序列对光信号进行调制。调制散斑序列对光信号进行调制后，光信号将会被单像素探测器接收，该单像素探测器将调制后的光信号转换为序列电信号。并且，在使用数字微镜器件对光信号进行序列调制时会产生触发信号同步触发数据采集卡，数据采集卡在外触发的工作模式下，将序列电信号转换为数字信号。根据调制散斑序列和相对应的数字信号进行分析计算来复原物体图像。进一步的，所述判断缓存数据是否达到预定字节具体包括：设置调制散斑Si的数量为N，单次采集的数字信号长度为m字节，其中，调制散斑数量N为满足计算一帧图像的散斑数量；计算预定字节，其中预定字节以W表示，W＝N*m；判断缓存区数量是否大于预定字节。单次采集的数字信号由接收镜头组接收一次光信号后，被数字微镜器件单次调制、单像素探测器转换的电信号而成的。预定字节表示单次采集的数字信号与调制散斑的数量之间的乘积。当缓存区域的数据大于预定字节时，开始对缓存数据进行读取并计算分析。相反，当缓存区域的数据小于预定字节时，不会对缓存数据进行读取并计算分析，而是继续等待缓存数据，该操作可以降低读取缓存数据的次数，增强系统的健壮性。进一步的，所述对缓存数据计算分析得到探测信号具体包括：读取缓存区中的W个字节数据，并分成N份；对每m个字节方分别扣除起始段和末尾段长度为n的数据，其中n＜m/10；对剩余的数据进行求和后取平均值，作为该调制散斑下的探测信号。具体的，由于缓存区中的W个字节是由N次采集得到的数据，在进行处理的过程中首先要将缓存区数据分成N份，每份包含m个字节，得出单次采集的数据，然后将单次采集的数据进行预处理，即去除掉单次采集数据的起始段和末尾段长度为n的数据，再将剩余的每个单次采集数据进行求和，然后去平均值，作为该调制散斑下的探测信号。示例性的，成像的空间分辨率为128*128，需要使用128*128*2张调制散斑能够清晰成像，其中2表示互补，则N＝32768。N张调制散斑加载到数字微镜器件上依次对光信号进行调制。数字微镜器件开始调制时，设置每次都是从第一张调制散斑开始调制，则调制散斑数量为N，数字微镜器件工作时将会产生N个外触发信号同步触发数据采集卡，进而保证单次采集的数字信号与该次的调制散斑相对应。将数据采集卡设置工作在FIFO模式下，示例性的，每次触发时采集1024数据点，则32768张调制散斑共采集量为1024×32768字节，即32MB。当数据采集卡FIFO内存中的数据量大于等于32MB时，计算机读取相应长度的数据。对该32MB数据进行处理。对每个散斑下1024数据点分别扣除起始段和末尾段长度为100的数据点，对剩余的长度为824个数据点进行求和后取平均值，作为该调制散斑下的探测信号,得出信号Ui数据点，联合调制散斑Si，经公式来复原物体图像O。如图2所示，在本发明的另一实施例中还公开了一种高速调制与同步采集关联成像系统，包括依次设置的接收镜头组，用于接收成像物体的光信号；数字微镜器件，用于通过预置调制散斑序列对接收镜头组接收的光信号进行调制；单像素探测器，用于将数字微镜器件调制后的光信号转换为电信号；数据采集卡，用于将单像素探测器输出的电信号进行数字化；系统还包括计算机，分别与数据采集卡、数字微镜器件进行数据交互，所述计算机设置数据采集卡和数字微镜器件的参数，并预置数字微镜器件的调制散斑以及读取数据采集卡输出的数字化信号；所述数字微镜器件还与数据采集卡进行交互，所述数字微镜器件产生外同步信号触发数据采集卡。进一步的，所述数据采集卡包括不少于设定内存的板载FIFO缓冲区，当板载FIFO缓冲区存储数据达到设定数量后，计算机读取板载FIFO缓冲区数据。在本发明的另一实施例中还公开了一种计算机可读存储介质，介质存有计算机程序，计算机程序运行后，执行上述任意实施例中的一种高速调制与同步采集的关联成像方法。在本发明的另一实施例中还公开了一种计算机系统，包括处理器、存储介质，存储介质上存有计算机程序，处理器从存储介质上读取并运行计算机程序以上任意实施例中的一种高速调制与同步采集的关联成像方法。尽管为使解释简单化将上述方法图示并描述为一系列动作，但是应理解并领会，这些方法不受动作的次序所限，因为根据一个或多个实施例，一些动作可按不同次序发生和/或与来自本文中图示和描述或本文中未图示和描述但本领域技术人员可以理解的其他动作并发地发生。本领域技术人员将进一步领会，结合本文中所公开的实施例来描述的各种解说性逻辑板块、模块、电路、和算法步骤可实现为电子硬件、计算机软件、或这两者的组合。为清楚地解说硬件与软件的这一可互换性，各种解说性组件、框、模块、电路、和步骤在上面是以其功能性的形式作一般化描述的。此类功能性是被实现为硬件还是软件取决于具体应用和施加于整体系统的设计约束。技术人员对于每种特定应用可用不同的方式来实现所描述的功能性，但这样的实现决策不应被解读成导致脱离了本发明的范围。结合本文所公开的实施例描述的各种解说性逻辑板块、模块、和电路可用通用处理器、数字信号处理器、专用集成电路、现场可编程门阵列或其它可编程逻辑器件、分立的门或晶体管逻辑、分立的硬件组件、或其设计成执行本文所描述功能的任何组合来实现或执行。通用处理器可以是微处理器，但在替换方案中，该处理器可以是任何常规的处理器、控制器、微控制器、或状态机。处理器还可以被实现为计算设备的组合，例如DSP与微处理器的组合、多个微处理器、与DSP核心协作的一个或多个微处理器、或任何其他此类配置。结合本文中公开的实施例描述的方法或算法的步骤可直接在硬件中、在由处理器执行的软件模块中、或在这两者的组合中体现。软件模块可驻留在RAM存储器、闪存、ROM存储器、EPROM存储器、EEPROM存储器、寄存器、硬盘、可移动盘、CD-ROM、或本领域中所知的任何其他形式的存储介质中。示例性存储介质耦合到处理器以使得该处理器能从/向该存储介质读取和写入信息。在替换方案中，存储介质可以被整合到处理器。处理器和存储介质可驻留在ASIC中。ASIC可驻留在用户终端中。在替换方案中，处理器和存储介质可作为分立组件驻留在用户终端中。在一个或多个示例性实施例中，所描述的功能可在硬件、软件、固件或其任何组合中实现。如果在软件中实现为计算机程序产品，则各功能可以作为一条或更多条指令或代码存储在计算机可读介质上或藉其进行传送。计算机可读介质包括计算机存储介质和通信介质两者，其包括促成计算机程序从一地向另一地转移的任何介质。存储介质可以是能被计算机访问的任何可用介质。作为示例而非限定，这样的计算机可读介质可包括RAM、ROM、EEPROM、CD-ROM或其它光盘存储、磁盘存储或其它磁存储设备、或能被用来携带或存储指令或数据结构形式的合意程序代码且能被计算机访问的任何其它介质。任何连接也被正当地称为计算机可读介质。例如，如果软件是使用同轴电缆、光纤电缆、双绞线、数字订户线、或诸如红外、无线电、以及微波之类的无线技术从web网站、服务器、或其它远程源传送而来，则该同轴电缆、光纤电缆、双绞线、DSL、或诸如红外、无线电、以及微波之类的无线技术就被包括在介质的定义之中。如本文中所使用的盘和碟包括压缩碟、激光碟、光碟、数字多用碟、软盘和蓝光碟，其中盘往往以磁的方式再现数据，而碟用激光以光学方式再现数据。上述的组合也应被包括在计算机可读介质的范围内。以上所述，仅为本发明较佳的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，根据本发明的技术方案及其发明构思加以等同替换或改变，都应涵盖在本发明的保护范围之内。
