标题title
一种变维多智能体系统的编队控制方法与装置
摘要abst
本发明提供了一种变维多智能体系统的编队控制方法与装置，隔离系统中发生故障的智能体，并通过切换编队队形完成既定覆盖任务。首先，构建多智能体系统发生故障后的动力学模型，给定通信拓扑结构，并设计分布式控制器，保证多智能体系统在无故障的情况下按照既定队形完成覆盖任务。其次，利用相对输出信息设计分布式时间观测器，得到每个智能体的编队残差信号判断其是否发生故障，并隔离发生故障的智能体。最后，根据编队的几何结构设计编队切换规则，重新制定编队队形以完成覆盖任务。本发明通过隔离故障智能体以避免其对正常智能体的影响，并通过切换编队队形确保完成既定覆盖任务，提高了多智能体系统在复杂环境中的鲁棒性。
权利要求书clms
1.一种变维多智能体系统的编队控制方法，其特征在于，所述方法包含以下步骤：步骤1.构建多智能体系统故障后的动力学模型并建立通信拓扑图；步骤2.根据覆盖任务的要求，设计编队队形并对每个智能体设计相应的编队控制协议；步骤3.利用相对输出信息设计分布式时间观测器，并得到编队误差与其观测值的残差；步骤4.每个智能体观测其残差信号的具体状态，并发送给邻居智能体，结合自身及邻居的残差信息判断智能体是否发生故障；步骤5.隔离发生故障的智能体，根据编队的几何结构找出与被隔离智能体连边的两个智能体，使其编队切换后的连线与切换前的连线平行，且与任务覆盖区域的圆相切，完成既定的覆盖任务。2.根据权利要求1所述一种变维多智能体系统的编队控制方法，其特征在于，所述步骤1中的动力学模型描述如下：zi＝Cqi+f,其中，qi＝T，ui＝T，zi＝T分别是智能体的3维系统真实状态、2维控制输入和3维测量输出，xi，yi，θi分别为智能体i在t时刻对应位置的横坐标，纵坐标和偏航角，vi，ωi分别为智能体i在t时刻的线速度与角速度，f为未知故障对智能体i造成的影响，Ti为智能体i发生故障的时间，qi为智能体i的状态。3.根据权利要求1所述一种变维多智能体系统的编队控制方法，其特征在于，所述步骤2中根据智能体的数量以及所要求的覆盖区域，设计相应的编队队形；对于每一个智能体i设计一个分布式编队控制协议，具体形式为：其中，k1,k2为正数；表示智能体i的邻居构成的集合；vT为智能体系统形成编队之后的每个智能体的线速度；γd＝1-exp，其中cij为形成编队之后智能体i与智能体j之间的距离。4.根据权利要求3所述一种变维多智能体系统的编队控制方法，其特征在于，所述步骤3中分布式时间观测器，具体形式为：其中，ri为辅助变量，zi，zj为测量的智能体i与智能体j的状态，为智能体i与智能体j形成编队后状态之差的收敛值，为观测器误差；E＝-B-1T,G＝I3+EC，I3为3×3的单位矩阵，F是反馈增益矩阵使得G-FC稳定。5.根据权利要求4所述一种变维多智能体系统的编队控制方法，其特征在于，所述步骤3中对于每一个智能体i，定义编队误差为对应的残差为编队误差与其观测值的差值，即故障检测的逻辑为：其中，为给定的初始值。6.根据权利要求1所述一种变维多智能体系统的编队控制方法，其特征在于，所述步骤4中对于每一个智能体，通过比较内邻居中大于检测阈值的残差数量是否等于内邻居的个数判断智能体是否发生故障。7.根据权利要求1所述一种变维多智能体系统的编队控制方法，其特征在于，所述步骤5具体包括：步骤501、利用故障发生时刻各智能体的位置以及覆盖区域的半径R，求出圆心坐标；步骤502、隔离发生故障的智能体i之后，根据编队的几何结构找出与被隔离智能体节点连边的两个智能体i_l，i_r，记录其位置，，并求出智能体i_l与i_r连线所确定的直线方程l1，智能体i_l与其相邻节点i_l_l连线所确定的直线方程l2，智能体i_r与其相邻节点i_r_r连线所确定的直线方程l3；步骤503、将l1进行平移使得平移后的直线方程L1与圆相切，同时联立方程L1与l2以及L1与l3，得到的交点坐标与步骤504、通过得到的与分别求出智能体i_l与智能体i_r在切换编队之后与智能体i_l_l和智能体i_r_r的相对距离ci_l,i_l_l，ci_r,i_r_r；步骤505、对于与被隔离智能体i没有几何连边的智能体仍然保持原先的状态前进；对于与被隔离智能体有几何连边的智能体i_l与智能体i_r，利用计算出新的ci_l,i_l_l，ci_r,i_r_r代入编队控制协议进行编队。8.一种基于权利要求1所述变维多智能体系统的编队控制方法实现的变维多智能体系统的编队控制装置，其特征在于，包括：编队控制协议模块、故障检测模块以及编队切换模块；所述编队控制协议模块，用于各智能体根据覆盖任务的要求进行编队；所述故障检测模块，用于各智能体利用设计的分布式时间观测器得到编队误差与其观测值的残差，通过观测其残差信号的具体状态，并发送给邻居智能体，结合自身及邻居的残差信息判断智能体是否发生故障；所述编队切换模块，用于隔离发生故障的智能体，根据编队的几何结构找出与被隔离智能体连边的两个智能体，使其编队切换后的连线与切换前的连线平行，且与任务覆盖区域的圆相切，完成既定的覆盖任务。9.根据权利要求8所述变维多智能体系统的编队控制装置，其特征在于，所述多智能体系统发生故障后的动力学模型描述如下：zi＝Cqi+f,其中，qi＝T，ui＝T，zi＝T分别是智能体的3维系统真实状态、2维控制输入和3维测量输出，xi，yi，θi分别为智能体i在t时刻对应位置的横坐标，纵坐标和偏航角，vi，ωi分别为智能体i在t时刻的线速度与角速度，f为未知故障对智能体i造成的影响，Ti为智能体i发生故障的时间，qi为智能体i的状态；智能体i的分布式编队控制协议，具体形式为：其中，k1,k2为正数；表示智能体i的邻居构成的集合；vT为智能体系统形成编队之后的每个智能体的线速度；γd＝1-exp，其中cij为形成编队之后智能体i与智能体j之间的距离。10.根据权利要求9所述变维多智能体系统的编队控制装置，其特征在于，所述编队切换模块根据如下方法进行编队切换：利用故障发生时刻各智能体的位置以及覆盖区域的半径R，求出圆心坐标；隔离发生故障的智能体i之后，根据编队的几何结构找出与被隔离智能体节点连边的两个智能体i_l，i_r，记录其位置，，并求出智能体i_l与i_r连线所确定的直线方程l1，智能体i_l与其相邻节点i_l_l连线所确定的直线方程l2，智能体i_r与其相邻节点i_r_r连线所确定的直线方程l3；将l1进行平移使得平移后的直线方程L1与圆相切，同时联立方程L1与l2以及L1与l3，得到的交点坐标与通过得到的与分别求出智能体i_l与智能体i_r在切换编队之后与智能体i_l_l和智能体i_r_r的相对距离ci_l,i_l_l，ci_r,i_r_r；对于与被隔离智能体i没有几何连边的智能体仍然保持原先的状态前进；对于与被隔离智能体有几何连边的智能体i_l与智能体i_r，利用计算出新的ci_l,i_l_l，ci_r,i_r_r代入编队控制协议进行编队。
说明书desc
技术领域本发明属于多智能编队控制技术，具体涉及一种变维多智能体系统的编队控制方法与装置。背景技术多智能体协同编队在作战、演习，商业表演中扮演重要角色。但是，多智能体在户外执行指定区域覆盖打击任务时易发生故障，若不能及时检测出故障智能体从而切换编队策略，会降低任务执行度甚至导致任务失败。传统的集中式故障隔离以及集中式编队对复杂环境下的多智能体系统并不适用。近年来，分布式故障检测以及分布式协同编队控制因其优越的抗干扰能力和可扩展性得到了广泛研究。在现有的多智能体故障识别算法中，文献:800-811.)将多智能体系统划分若干个关联的子系统并考虑其动态耦合，计算一个适当定义的残差信号的方差的界，这个界取决于相邻子系统计算的状态估计的不确定性。最后，通过残差信号的方差的界以及局部故障检测的阈值，判断出发生故障的子系统。这个方案的缺陷在于首先要对多智能体系统进行子系统划分并且最终只能判断出发生故障的子系统而非单个智能体。文献:1289-1298.)针对具有速度约束的非完整车辆，将每辆小车的速度约束在两个正常数之间，提出了一种分布式编队控制律。最后，可以在无绝对位置测量且每个跟随车辆只能在有向图网络中获取相邻车辆信息的情况下实现leader-follower编队。这个方案的缺陷在于没有考虑在车辆编队的过程中可能会发生故障从而进行编队切换的情况。文献:1569-1581.)提出了一种基于距离的leader-follower关系不变的持久编队的切换拓扑，设计了一种有效的算法来确定是否可以从刚性图生成RIPF，为了实现RIPF间智能体移动最小，提出了一种向下树组合优化算法。最后，通过引入状态矩阵和转移矩阵设计了一个控制律，在给定的智能体间距离下，将初始RIPF驱动到期望RIPF。这个方案的缺陷在于没有考虑编队过程中的故障检测以及在切换拓扑下如何完成既定的覆盖任务。发明内容发明目的：针对上述存在的不足，本发明目的在于提供了一种变维多智能体系统的编队控制方法与装置，通过分布式故障识别技术和编队切换规则，能够在多智能体执行覆盖任务时准确识别故障智能体并快速形成新的编队队形完成既定的覆盖任务，提高多智能体系统在恶劣作战环境下的生存能力和任务执行能力，为变维多智能体的协同作战控制提供完美解决方案。技术方案：为了实现上述发明目的，本发明提供的一种变维多智能体系统的编队控制方法，包含以下步骤：步骤1.构建多智能体系统故障后的动力学模型并建立通信拓扑图；步骤2.根据覆盖任务的要求，设计编队队形并对每个智能体设计相应的编队控制协议；步骤3.利用相对输出信息设计分布式时间观测器，并得到编队误差与其观测值的残差；步骤4.每个智能体观测其残差信号的具体状态，并发送给邻居智能体，结合自身及邻居的残差信息判断智能体是否发生故障；步骤5.隔离发生故障的智能体，根据编队的几何结构找出与被隔离智能体连边的两个智能体，使其编队切换后的连线与切换前的连线平行，且与任务覆盖区域的圆相切，完成既定的覆盖任务。进一步地，所述步骤1中的动力学模型描述如下：zi＝Cqi+f,其中，qi＝T，ui＝T，zi＝T分别是智能体的3维系统真实状态、2维控制输入和3维测量输出，xi，yi，θii分别为智能体i在t时刻对应位置的横坐标，纵坐标和偏航角，vi，ωi分别为智能体i在t时刻的线速度与角速度，f为未知故障对智能体i造成的影响，Ti为智能体i发生故障的时间，qi为智能体i的状态。进一步地，所述步骤2中根据智能体的数量以及所要求的覆盖区域，设计相应的编队队形；对于每一个智能体i设计一个分布式编队控制协议，具体形式为：其中，k1,k2为正数；表示智能体i的邻居构成的集合；vT为智能体系统形成编队之后的每个智能体的线速度；γd＝1-exp，其中cij为形成编队之后智能体i与智能体j之间的距离。进一步地，所述步骤3中分布式时间观测器，具体形式为：其中，ri为辅助变量，zi，zj为测量的智能体i与智能体j的状态，为智能体i与智能体j形成编队后状态之差的收敛值，为观测器误差；E＝-B-1T,G＝I3+EC，I3为3×3的单位矩阵，F是反馈增益矩阵使得G-FC稳定。对于每一个智能体i，定义编队误差为对应的残差为编队误差与其观测值的差值，即故障检测的逻辑为：其中，为给定的初始值。进一步地，所述步骤4中对于每一个智能体，通过比较内邻居中大于检测阈值的残差数量是否等于内邻居的个数判断智能体是否发生故障。进一步地，所述步骤5具体包括：步骤501、利用故障发生时刻各智能体的位置以及覆盖区域的半径R，求出圆心坐标；步骤502、隔离发生故障的智能体i之后，根据编队的几何结构找出与被隔离智能体节点连边的两个智能体i_l，i_r，记录其位置，，并求出智能体i_l与i_r连线所确定的直线方程l1，智能体i_l与其相邻节点i_l_l连线所确定的直线方程l2，智能体i_r与其相邻节点i_r_r连线所确定的直线方程l3；步骤503、将l1进行平移使得平移后的直线方程L1与圆相切，同时联立方程L1与l2以及L1与l3，得到的交点坐标与步骤504、通过得到的与分别求出智能体i_l与智能体i_r在切换编队之后与智能体i_l_l和智能体i_r_r的相对距离ci_l,i_l_l，ci_r,i_r_r；步骤505、对于与被隔离智能体i没有几何连边的智能体仍然保持原先的状态前进；对于与被隔离智能体有几何连边的智能体i_l与智能体i_r，利用计算出新的ci_l,i_l_l，ci_r,i_r_r代入编队控制协议进行编队。基于相同的发明构思，本发明提供的一种基于所述变维多智能体系统的编队控制方法实现的变维多智能体系统的编队控制装置，包括：编队控制协议模块、故障检测模块以及编队切换模块；所述编队控制协议模块，用于各智能体根据覆盖任务的要求进行编队；所述故障检测模块，用于各智能体利用设计的分布式时间观测器得到编队误差与其观测值的残差，通过观测其残差信号的具体状态，并发送给邻居智能体，结合自身及邻居的残差信息判断智能体是否发生故障；所述编队切换模块，用于隔离发生故障的智能体，根据编队的几何结构找出与被隔离智能体连边的两个智能体，使其编队切换后的连线与切换前的连线平行，且与任务覆盖区域的圆相切，完成既定的覆盖任务。有益效果：与现有技术相比，本发明具有如下优点和有益效果：1.本发明在不使用智能体控制输入信息的情况下，完全基于智能体邻居之间的相对输出信息设计分布式观测器，有效降低通信负担，并且利用分布式观测器给出故障检测阈值，可以实时对智能体的编队状态进行跟踪从而判断是否发生故障。2.本发明融合多智能体编队协同控制与故障检测，考虑了变维多智能体编队过程中发生未知故障后，如何重构编队队形并且仍然能够完成既定覆盖任务。因此，有效的提高了多智能体在执行任务时的成功率与抗干扰能力。3.本发明提出了对故障智能体进行隔离的情形下多智能体系统编队切换的规则，该切换规则在保证既定区域被覆盖的基础上，仅改变与故障智能体有几何连边智能体的编队相对位置，从而有效的降低了计算复杂度和能源消耗。附图说明图1是本发明实施例的方法总体流程图；图2是本发明实施例的具体流程示意图；图3是本发明实施例中所提供的多智能体系统的通信拓扑结构图；图4是本发明实施例中步骤5对应的切换规则示意图；图5是本发明一具体示例的变维多智能体编队及覆盖仿真图。具体实施方式下面将结合附图和具体实施例，对本发明提供的技术方案进行详细描述。如图1、图2所示，本发明实施例提供的一种变维多智能体系统的编队控制方法，主要步骤包括：步骤1.构建所研究的多智能体系统在其发生故障后的动力学模型，并建立通信拓扑结构。本步骤中将发生故障后的多智能体系统的动力学模型描述如下：zi＝Cqi+f,其中，qi＝T，ui＝T，zi＝T分别是智能体的3维系统真实状态、2维控制输入和3维测量输出，xi，yi，θi分别为智能体i在t时刻对应位置的横坐标，纵坐标和偏航角，vi，ωi分别为智能体i在t时刻的线速度与角速度，f为未知故障对智能体i造成的影响，是一个3×1的向量函数。Ti为智能体i发生故障的时间，qi为智能体i的状态。B,C为系统矩阵，且同时满足如下的性质：1)rank＝2；2)其中，rank表示矩阵的秩。为了实现故障智能体的识别与编队队形的形成，需要对多智能体系统的通信拓扑结构进行一定的约束。本实施例考虑由N个多智能体构成的多智能系统，其通信拓扑结构表示为表示多智能体系统所有节点构成的集合，边构成的集合记为表示智能体i的邻居构成的集合，并将智能体i的邻居依次记为其中代表智能体i邻居的个数。此外，表示智能体i的内邻居构成的集合，其中为其内邻居总个数。根据多智能体系统分布式编队控制以及故障隔离的要求，系统的通信拓扑结构满足如下要求：假设系统中至多有K个智能体发生故障，则对于系统中任意智能体i和其他任意K个智能体Q1,Q2,...,QK的内邻居需要满足步骤2.根据覆盖任务的要求，设计编队队形并对每个智能体设计相应的编队控制协议，具体包括如下子步骤：步骤201、根据智能体的数量以及所要求的覆盖区域，设计相应的编队队形；步骤202、对于每一个智能体i设计一个分布式编队控制协议，具体形式为：其中，k1,k2为任意正数；vT为智能体系统形成编队之后的每个智能体的线速度；γd＝1-exp，其中cij为形成编队之后智能体i与智能体j之间的距离。步骤3.利用相对输出信息设计分布式时间观测器，并得到编队误差与其观测值的残差，具体包括如下子步骤：步骤301、对于每一个智能体i设计一个分布式观测器，具体形式为：其中，ri为辅助变量，zi,zj为测量的智能体i与智能体j的状态，为智能体i与智能体j相对状态在形成编队后的收敛值，为观测器误差；E＝-B-1T,G＝I3+EC，I3为3×3的单位矩阵，F是反馈增益矩阵使得G-FC稳定。步骤302、根据上述多智能体动力学模型以及设计的分布式观测器，构造相应的残差生成器，具体如下：对于每一个智能体i，定义编队误差为对应的残差为编队误差与其观测值的差值，即相应的，故障检测的逻辑设计为：其中，为给定的初始值。步骤4.对于每一个智能体，在一定时间之后，观测其残差信号的具体状态，并将残差信息发送给邻居智能体，最后结合自身及邻居的残差信息判断智能体是否发生故障；具体包括如下子步骤：步骤401、对于每个智能体i，初始化其状态指标Si＝0，故障计数器步骤402、若智能体i判断出其自身残差则将自身的状态指标修改为Si＝1，故障计数器修改为同时将Si发送给所有邻居步骤403.对于每一个智能体，通过比较内邻居中大于检测阈值的残差数量是否等于内邻居的个数判断智能体是否发生故障，即：对于智能体i，接收其所有邻居的状态指标如果Sj＝1，则否则保持不变，直到全部接收其邻居的状态指标；对于智能体i，如果其故障计数器则识别出该智能体i发生故障，否则，认为智能体i正常；步骤5.隔离发生故障的智能体，并设计编队切换规则，完成既定的覆盖任务，具体包括如下子步骤：步骤501、利用故障发生时刻各智能体的位置以及覆盖区域的半径R，求出圆心坐标；步骤502、隔离发生故障的智能体i之后，根据编队的几何结构找出与被隔离智能体节点连边的两个智能体i_l，i_r，记录其位置，，并求出智能体i_l与i_r连线所确定的直线方程l1，智能体i_l与其相邻节点i_l_l连线所确定的直线方程l2，智能体i_r与其相邻节点i_r_r连线所确定的直线方程l3；步骤503、将l1进行平移使得平移后的直线方程L1与圆相切，同时联立方程L1与l2以及L1与l3，得到的交点坐标与步骤504、通过得到的与分别求出智能体i_l与智能体i_r在切换编队之后与智能体i_l_l和智能体i_r_r的相对距离ci_l,i_l_l，ci_r,i_r_r；步骤505、对于与被隔离智能体i没有几何连边的智能体仍然保持原先的状态前进；对于与被隔离智能体有几何连边的智能体i_l与智能体i_r，利用计算出新的ci_l,i_l_l，ci_r,i_r_r代入编队控制协议进行编队。下面以在5辆Turtlebot3小车构成的多智能体系统为例，对本发明进行分布式故障识别与编队控制进行示例性说明。对于由5辆Turtlebot3小车构成的多智能体系统，其发生故障后的动力学模型如下：选取第2辆Turtlebot3小车发生故障，故障时间为T2＝8s，其故障函数为q2为智能体2在第8s时的状态向量。该5辆Turtlebot3小车的通信拓扑如图3所示。该5辆Turtlebot3小车的初始位置依次为：，，，，，编队控制协议中cij＝2,i,j＝1,2,…,5，单位均为米。分布式观测器的参数选取为：第2辆小车发生故障后，与其连边的第1辆小车和第3辆小车根据编队切换规则计算位置坐标分别为和。图4为编队切换规则示意图，当智能体i发生故障时，与其具有几何连边的智能体i-1和i+1编队相对位置发生变化，切换后位置的连线与圆形覆盖相切。图5是5辆Turtlebot3小车编队及覆盖仿真图，在发生故障之前，5辆小车形成一个正五边形编队，轨迹用实线表示，圆形覆盖区域为其编队队形的内切圆。当第2辆小车发生故障时，第4辆和第5辆Turtlebot3小车的编队相对位置不发生变化，第1辆和第3辆小车根据切换规则进行切换最终形成编队对圆形区域进行覆盖。基于相同的发明构思，本发明实施例提供的一种基于上述方法实现的变维多智能体系统的编队控制装置，包括：编队控制协议模块、故障检测模块以及编队切换模块；其中，编队控制协议模块用于各智能体根据覆盖任务的要求进行编队；故障检测模块用于各智能体利用设计的分布式时间观测器得到编队误差与其观测值的残差，通过观测其残差信号的具体状态，并发送给邻居智能体，结合自身及邻居的残差信息判断智能体是否发生故障；编队切换模块用于隔离发生故障的智能体，根据编队的几何结构找出与被隔离智能体连边的两个智能体，使其编队切换后的连线与切换前的连线平行，且与任务覆盖区域的圆相切，完成既定的覆盖任务。各模块的具体实施参考上述方法实施例，此处不再赘述。需要说明的是，在附图或说明书正文中，未绘示或描述的实现方式，均为所属技术领域中普通技术人员所知的形式，并未进行详细说明。以上仅是本发明的具体实施例，应当指出，以上实施例对本发明不构成限定，所属技术领域中普通技术人员在不偏离本发明技术思想的范围内，所进行的多样变化和修改，均落在本发明的保护范围内。
