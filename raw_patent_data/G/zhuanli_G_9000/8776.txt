标题title
USB接口扩展电路及终端
摘要abst
本申请公开了一种USB接口扩展电路及终端，USB接口扩展电路包括集线模块、若干第一USB接口、第二USB接口、第一开关模块和第二开关模块，当处理器作为主设备时，第一开关模块选择连通第一公共端与第一选择端，第二开关模块选择连通第二公共端与第四选择端，如此，第二USB接口通过集线模块与处理器的第三USB接口连通，若干第一USB接口通过集线模块与处理器的第二USB接口连通，实现了将处理器作为主设备；当处理器作为从设备时，第一开关模块选择连通第一公共端和第二选择端，第二开关模块选择连通第二公共端和第三选择端，如此，处理器的第三USB接口与第二USB接口连通，处理器能作为从设备。
权利要求书clms
1.一种USB接口扩展电路，其特征在于，包括：集线模块；若干第一USB接口，所述若干第一USB接口均与所述集线模块连接；第二USB接口；第一开关模块，所述第一开关模块包括第一公共端、第一选择端、第二选择端和第一控制端，所述第一公共端与所述第二USB接口连接，所述第一选择端与所述集线模块连接，所述第一控制端用于与处理器的信号输出端连接；所述第一开关模块用于选择连通所述第一公共端与所述第一选择端，或者选择连通所述第一公共端与所述第二选择端；第二开关模块，所述第二开关模块包括第二公共端、第三选择端、第四选择端和第二控制端，所述第二公共端用于与所述处理器的第三USB接口连接；所述第三选择端与所述第二选择端连接；所述第四选择端与所述集线模块连接；所述第二控制端用于与所述处理器的信号输出端连接；所述第二开关模块用于选择连通所述第二公共端与所述第三选择端，或者选择连通所述第二公共端与所述第四选择端。2.根据权利要求1所述的USB接口扩展电路，其特征在于，还包括第一供电模块，所述第一供电模块包括电源芯片，所述电源芯片的输入端用于与电池连接，所述电源芯片的使能端与所述处理器的信号输出端连接，所述电源芯片的输出端用于给所述第一USB接口、所述第二USB接口供电。3.根据权利要求2所述的USB接口扩展电路，其特征在于，所述第二USB接口用于与所述处理器的检测端连接，所述检测端用于检测所述第二USB接口是否接入OTG设备；所述USB接口扩展电路还包括第二供电模块，所述第二供电模块包括第一开关芯片、第一开关管、第二开关管、二极管、第一电阻、第二电阻、第三电阻、第四电阻，所述第一开关管的栅极用于与所述检测端连接，所述第一开关管的源极接地，所述第一开关管的漏极与所述第一开关芯片的使能端连接，所述第一开关芯片的输入端与所述电源芯片的输出端连接，所述第一开关管的输入端还通过所述第一电阻与所述第一开关芯片的使能端连接，所述第一开关芯片的使能端通过所述第二电阻接地；所述第一开关管的输出端与所述二极管的输入端连接，所述二极管的输出端与所述第二USB接口连接，所述第二开关管的栅极通过所述第三电阻与所述二极管的输入端连接，所述二极管的输入端通过所述第四电阻接地，所述第二开关管的源极与所述二极管的输出端连接，所述第二开关管的漏极用于与充电引脚连接，所述充电引脚用于接入充电电压。4.根据权利要求2所述的USB接口扩展电路，其特征在于，还包括若干第三供电模块，所述若干第三供电模块与所述若干第一USB接口一一对应连接，所述若干第三供电模块与所述电源芯片的输出端连接。5.根据权利要求4所述的USB接口扩展电路，其特征在于，所述第三供电模块包括第二开关芯片，所述第二开关芯片的输入端与所述电源芯片的输出端连接，所述第二开关芯片的输出端与对应的所述第一USB接口连接。6.根据权利要求1所述的USB接口扩展电路，其特征在于，所述第一开关模块包括第三开关芯片，第二开关模块包括第四开关芯片，所述第三开关芯片、所述第四开关芯片的型号均为WAS7227Q。7.根据权利要求4所述的USB接口扩展电路，其特征在于，所述第一开关芯片、所述第二开关芯片的型号均为LPW5210。8.根据权利要求1所述的USB接口扩展电路，其特征在于，所述集线模块包括型号为GL850G-37的芯片。9.根据权利要求2所述的USB接口扩展电路，其特征在于，所述电源芯片的型号为LP6252QVF。10.一种终端，其特征在于，包括：如权利要求1至9任一项所述的USB接口扩展电路。
说明书desc
技术领域本申请涉及USB接口技术领域，特别涉及一种USB接口扩展电路及终端。背景技术通用串行总线设备分为主设备和从设备。目前，终端的处理器通常只设有一路USB接口，此USB接口既可作为从设备，连接至电脑完成该处理器设备的软件升级及文件的访问；也可以作为主设备，来外挂USB设备，如U盘、USB鼠标键盘、USB耳机等。但是，由于目前的处理器通常只设有一路USB接口，使得处理器的产品形态受限，无法同时连接多个外挂USB设备。虽然，相关技术中能够将一路USB接口扩展为多路USB接口，但是，相关技术中的扩展电路，在进行扩展后，处理器只能作为主设备，无法作为从设备。发明内容本申请旨在至少解决现有技术中存在的技术问题之一。为此，本申请提出一种USB接口扩展电路及终端，能够对将处理器的USB接口扩展为多路USB接口，并且使处理器能够作为主设备，也能够作为从设备。本申请第一方面实施例提供了一种USB接口扩展电路，包括：集线模块；若干第一USB接口连接；所述若干第一USB接口均与所述集线模块连接；第二USB接口；第一开关模块，所述第一开关模块包括第一公共端、第一选择端、第二选择端和第一控制端，所述第一公共端与所述第二USB接口连接，所述第一选择端与所述集线模块连接，所述第一控制端用于与处理器的信号输出端连接；所述第一开关模块用于选择连通所述第一公共端与所述第一选择端，或者选择连通所述第一公共端与所述第二选择端；第二开关模块，所述第二开关模块包括第二公共端、第三选择端、第四选择端和第二控制端，所述第二公共端用于与所述处理器的第三USB接口连接；所述第三选择端与所述第二选择端连接；所述第四选择端与所述集线模块连接；所述第二控制端用于与所述处理器的信号输出端连接；所述第二开关模块用于选择连通所述第二公共端与所述第三选择端，或者选择连通所述第二公共端与所述第四选择端。根据本申请第一方面实施例的USB接口扩展电路，至少具有如下有益效果：本申请实施例的USB接口扩展电路包括集线模块、若干第一USB接口、第二USB接口、第一开关模块和第二开关模块，若干第一USB接口均与集线模块连接；第一开关模块包括第一公共端、第一选择端、第二选择端和第一控制端，第一公共端与第二USB接口连接，第一选择端与集线模块连接，第一控制端用于与处理器的信号输出端连接；第一开关模块用于选择连通第一公共端与第一选择端，或者选择连通第一公共端与第二选择端；第二开关模块包括第二公共端、第三选择端、第四选择端和第二控制端，第二公共端用于与处理器的第三USB接口连接；第三选择端与第二选择端连接；第四选择端与集线模块连接；第二控制端用于与处理器的信号输出端连接；第二开关模块用于选择连通第二公共端与第三选择端，或者选择连通第二公共端与第四选择端。本申请实施例的USB接口扩展电路，当处理器作为主设备时，第一开关模块选择连通第一公共端与第一选择端，第二开关模块选择连通第二公共端与第四选择端，如此，第二USB接口通过集线模块与处理器的第三USB接口连通，若干第一USB接口通过集线模块与处理器的第二USB接口连通，实现了将处理器作为主设备，并可以通过第二USB接口、若干第一USB接口分别连接从设备；当处理器作为从设备时，第一开关模块选择连通第一公共端和第二选择端，第二开关模块选择连通第二公共端和第三选择端，如此，处理器的第三USB接口与第二USB接口连通，处理器能作为从设备，通过第二USB接口与主设备连接。根据本申请第一方面的一些实施例，还包括第一供电模块，所述第一供电模块包括电源芯片，所述电源芯片的输入端用于与电池连接，所述电源芯片的使能端与所述处理器的信号输出端连接，所述电源芯片的输出端用于给所述第一USB接口、所述第二USB接口供电。根据本申请第一方面的一些实施例，所述第二USB接口用于与所述处理器的检测端连接，所述检测端用于检测所述第二USB接口是否接入OTG设备；所述USB接口扩展电路还包括第二供电模块，所述第二供电模块包括第一开关芯片、第一开关管、第二开关管、二极管、第一电阻、第二电阻、第三电阻、第四电阻，所述第一开关管的栅极用于与所述检测端连接，所述第一开关管的源极接地，所述第一开关管的漏极与所述第一开关芯片的使能端连接，所述第一开关芯片的输入端与所述电源芯片的输出端连接，所述第一开关管的输入端还通过所述第一电阻与所述第一开关芯片的使能端连接，所述第一开关芯片的使能端通过所述第二电阻接地；所述第一开关管的输出端与所述二极管的输入端连接，所述二极管的输出端与所述第二USB接口连接，所述第二开关管的栅极通过所述第三电阻与所述二极管的输入端连接，所述二极管的输入端通过所述第四电阻接地，所述第二开关管的源极与所述二极管的输出端连接，所述第二开关管的漏极用于与充电引脚连接，所述充电引脚用于接入充电电压。根据本申请第一方面的一些实施例，还包括若干第三供电模块，所述若干第三供电模块与所述若干第一USB接口一一对应连接，所述若干第三供电模块与所述电源芯片的输出端连接。根据本申请第一方面的一些实施例，所述第三供电模块包括第二开关芯片，所述第二开关芯片的输入端与所述电源芯片的输出端连接，所述第二开关芯片的输出端与对应的所述第一USB接口连接。根据本申请第一方面的一些实施例，所述第一开关模块包括第三开关芯片，第二开关模块包括第四开关芯片，所述第三开关芯片、所述第四开关芯片的型号均为WAS7227Q。根据本申请第一方面的一些实施例，所述第一开关芯片、所述第二开关芯片的型号均为LPW5210。根据本申请第一方面的一些实施例，所述集线模块包括型号为GL850G-37的芯片。根据本申请第一方面的一些实施例，所述电源芯片的型号为LP6252QVF。本申请第二方面实施例提供了一种终端，包括：如本申请第一方面实施例所述的USB接口扩展电路。本申请的附加方面和优点将在下面的描述中部分给出，部分将从下面的描述中变得明显，或通过本申请的实践了解到。附图说明本申请的附加方面和优点结合下面附图对实施例的描述中将变得明显和容易理解，其中：图1为本申请一些实施例的USB接口扩展电路的框图；图2为本申请一些实施例的第一供电模块的电路示意图；图3为本申请一些实施例的集线模块的电路示意图；图4为本申请一些实施例的第二供电模块的电路示意图；图5为本申请一些实施例的第三供电模块的电路示意图；图6为本申请一些实施例的USB通用连接器的电路示意图；图7为本申请一些实施例的第一开关模块的电路示意图；图8为本申请一些实施例的第二开关模块的电路示意图。附图标号如下：处理器100；第三USB接口110；第二开关模块200；集线模块300；第一USB接口400；第一开关模块500；第二USB接口600；第一开关芯片U3；第一开关管Q1；第二开关管QA3；二极管D6；第一电阻R40；第二电阻R44；第三电阻R33；第四电阻R34；第二开关芯片U5；第三开关芯片U6；第四开关芯片U7；第五电阻R50；第六电阻R51；第七电阻R58；电源芯片U4。具体实施方式下面详细描述本申请的实施例，所述实施例的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施例是示例性的，仅用于解释本申请，而不能理解为对本申请的限制。在本申请的描述中，需要理解的是，涉及到方位描述，例如上、下、前、后、左、右等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本申请和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本申请的限制。在本申请的描述中，如果有描述到第一、第二只是用于区分技术特征为目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量或者隐含指明所指示的技术特征的先后关系。本申请的描述中，除非另有明确的限定，设置、安装、连接等词语应做广义理解，所属技术领域技术人员可以结合技术方案的具体内容合理确定上述词语在本申请中的具体含义。参照图1至图8，本申请第一方面实施例提供了一种USB接口扩展电路，包括集线模块300、若干第一USB接口400、第二USB接口600、第一开关模块500和第二开关模块200，若干第一USB接口400均与集线模块300连接；第一开关模块500包括第一公共端、第一选择端、第二选择端和第一控制端，第一公共端与第二USB接口600连接，第一选择端与集线模块300连接，第一控制端用于与处理器100的信号输出端连接；第一开关模块500用于选择连通第一公共端与第一选择端，或者选择连通第一公共端与第二选择端；第二开关模块200包括第二公共端、第三选择端、第四选择端和第二控制端，第二公共端用于与处理器100的第三USB接口110连接；第三选择端与第二选择端连接；第四选择端与集线模块300连接；第二控制端用于与处理器100的信号输出端连接；第二开关模块200用于选择连通第二公共端与第三选择端，或者选择连通第二公共端与第四选择端。本申请实施例的USB接口扩展电路，当处理器100作为主设备时，第一开关模块500选择连通第一公共端与第一选择端，第二开关模块200选择连通第二公共端与第四选择端，如此，第二USB接口600通过集线模块300与处理器100的第三USB接口110连通，若干第一USB接口400通过集线模块300与处理器100的第二USB接口600连通，实现了将处理器100作为主设备，并可以通过第二USB接口600、若干第一USB接口400分别连接从设备；当处理器100作为从设备时，第一开关模块500选择连通第一公共端和第二选择端，第二开关模块200选择连通第二公共端和第三选择端，如此，处理器100的第三USB接口110与第二USB接口600连通，处理器100能作为从设备，通过第二USB接口600与主设备连接。可以理解的是，本申请实施例的USB接口扩展电路能够应用于终端中，终端设有处理器100，处理器100设有信号输出端和第三USB接口110，第三USB接口110能够作为主设备，也能够作为从设备。处理器100的信号输出端与第一控制端、第二控制端连接，处理器100通过信号输出端向第一控制端、第二控制端发送选择信号，以使第一开关模块500、第二开关模块200根据选择信号作出响应。例如，当处理器100作为主设备时，处理器100通过信号输出端向第一控制端、第二控制端发送的选择信号为高电平信号，此时，第一开关模块500选择连通第一公共端与第一选择端，第二开关模块200选择连通第二公共端与第四选择端，如此，第二USB接口600通过集线模块300与处理器100的第三USB接口110连通，若干第一USB接口400通过集线模块300与处理器100的第二USB接口600连通，实现了将处理器100作为主设备，并可以通过第二USB接口600、若干第一USB接口400分别连接从设备，实现了将处理器100的第三USB接口110拓展为多路USB接口；当处理器100作为从设备时，处理器100通过信号输出端向第一控制端、第二控制端发送的选择信号为低电平信号，此时，第一开关模块500选择连通第一公共端和第二选择端，第二开关模块200选择连通第二公共端和第三选择端，如此，处理器100的第三USB接口110与第二USB接口600连通，处理器100能作为从设备，通过第二USB接口600与主设备连接，主设备通过第二USB接口600对处理器100进行升级、文件访问等操作，此时所有第一USB接口400无效。如此，能够对将处理器100的USB接口扩展为多路USB接口，并且使处理器100能够作为主设备，也能够作为从设备。可以理解的是，当第一开关模块500选择连通第一公共端与第一选择端时，则第一公共端与第二选择端之间断开；当第一开关模块500选择连通第一公共端和第二选择端时，则第一公共端与第一选择端之间断开；当第二开关模块200选择连通第二公共端与第四选择端时，第二公共端与第三选择端之间断开；当第二开关模块200选择连通第二公共端和第三选择端时，第二公共端与第四选择端之间断开。可以理解的是，应用了本申请实施例的USB接口扩展电路的终端还设有电池，电池用于供电，处理器100的第三USB接口110与电池连接，可以通过第三USB接口110给电池充电。本申请实施例的USB接口扩展电路还包括第一供电模块，第一供电模块包括电源芯片U4，电源芯片U4的输入端用于与电池连接，电源芯片U4的使能端与处理器100的信号输出端连接，电源芯片U4的输出端用于给第一USB接口400、第二USB接口600供电。由于电源芯片U4的使能端与处理器100的信号输出端连接，因此处理器100通过输出信号端控制电源芯片U4是否给第一USB接口400、第二USB接口600供电。例如，当处理器100作为主设备时，第一USB接口400、第二USB接口600能够连接从设备，处理器100通过输出信号端输出的选择信号为高电平信号，即电源芯片U4的使能端为高电平，则电源芯片U4的输出端给第一USB接口400、第二USB接口600供电，以便于给连接于第一USB接口400或第二USB接口600的从设备供电；当处理器100作为从设备时，处理器100通过第二USB接口600与主设备连接，主设备能够给处理器100供电，此时，处理器100通过输出信号端输出的选择信号为低电平信号，即电源芯片U4的使能端为低电平，电源芯片U4的输出端不输出电压。可以理解的是，电源芯片U4的型号为LP6252QVF。参照图2，图2为本申请一些实施例的第一供电模块的电路示意图。USB_SW_SEL为处理器100的信号输出端输出的选择信号。图2示出的电路示意图只是一个示例，不能理解为对本申请的限制。可以理解的是，集线模块300包括型号为GL850G-37的芯片。参照图3，图3为本申请一些实施例的集线模块300的电路示意图。图3示出了集线模块300及其匹配电路的示意图，只是一个示例，不能理解为对本申请的限定。可以理解的是，处理器100还设有检测端，在本申请实施例的USB接口扩展电路中，第二USB接口600用于与处理器100的检测端连接，检测端用于检测第二USB接口600是否接入OTG设备。USB接口扩展电路还包括第二供电模块，参照图4，图4为本申请一些实施例的第二供电模块的电路示意图，第二供电模块包括第一开关芯片U3、第一开关管Q1、第二开关管QA3、二极管D6、第一电阻R40、第二电阻R44、第三电阻R33、第四电阻R34，第一开关管Q1的栅极用于与检测端连接，第一开关管Q1的源极接地，第一开关管Q1的漏极与第一开关芯片U3的使能端连接，第一开关芯片U3的输入端与电源芯片U4的输出端连接，第一开关管Q1的输入端还通过第一电阻R40与第一开关芯片U3的使能端连接，第一开关芯片U3的使能端通过第二电阻R44接地；第一开关管Q1的输出端与二极管D6的输入端连接，二极管D6的输出端与第二USB接口600连接，第二开关管QA3的栅极通过第三电阻R33与二极管D6的输入端连接，二极管D6的输入端通过第四电阻R34接地，第二开关管QA3的源极与二极管D6的输出端连接，第二开关管QA3的漏极与充电引脚连接，充电引脚用于接入充电电压。在图4中，VBUS_USB端与第二USB接口600连接。在处理器100作为主设备时，处理器100的信号输出端输出的选择信号为高电平，第一开关芯片U3的输入端与电源芯片U4的输出端连接，此时电源芯片U4的输出端有电压输出；在第二USB接口600接入非OTG设备时，处理器100的检测端为高电平，即第一开关管Q1的栅极为高电平，则第一开关管Q1的源极和栅极之间导通，而第一开关管Q1的源极接地、第一开关管Q1的漏极与第一开关芯片U3的使能端连接，因此第一开关芯片U3的使能端被拉低，使得第一开关芯片U3无电压输出，在充电器插入后，充电引脚VCHG为高电平，即第二开关管QA3的栅极为高电平，第二开关管QA3的源极和漏极之间导通，如此，充电引脚VCHG与第二USB接口600连通，即充电引脚VCHG与VBUS_USB端连通，且第二USB接口600与第三USB接口110连通，因此通过VBUS_USB端能够给终端的电池进行充电。在第二USB接口600接入OTG设备时，处理器100的检测端为低电平，即第一开关管Q1的栅极为低电平，则第一开关管Q1的源极和栅极之间截止，通过第一电阻R40和第二电阻R44对电源芯片U4的输出端的输出的电压的分压，此时第一开关芯片U3的使能端为高电平，此时第一开关芯片U3的输出端能够输出5V电压，第一开关芯片U3的输出端通过二极管D6与VBUS_USB端连通，如此能够给接入第二USB接口600的OTG设备供电，当OTG设备移除时，处理器100的检测端恢复为高电平，第一开关芯片U3的使能端被拉低，使得第一开关芯片U3无电压输出。需要说明的是，在图4中，USB_ID为处理器100的检测端的信号，在第二USB接口600接入OTG设备时，USB_ID为低电平；在第二USB接口600接入非OTG设备时，USB_ID为高电平。可以理解的是，第一开关管Q1的型号可以是WNM2030、第二开关管QA3的型号可以为WPM2026-3/TR。可以理解的是，本申请实施例的USB扩展电路还包括若干第三供电模块，若干第三供电模块与若干第一USB接口400一一对应连接，若干第三供电模块与电源芯片U4的输出端连接。第三供电模块包括第二开关芯片U5，第二开关芯片U5的输入端与电源芯片U4的输出端连接，第二开关芯片U5的输出端与对应的第一USB接口400连接。例如，参照图5，图5为本申请一些实施例的第三供电模块的电路示意图。在图5中，DC_5V端为电源芯片U4的输出端，HUB_5V_USB2端连接至第一USB接口400，第二开关芯片U5的使能端通过第五电阻R50与DC_5V端连接，第二开关芯片U5的使能端通过第六电阻R51接地，当处理器100作为主设备时，DC_5V端输出5V电压，通过第五电阻R50、第六电阻R51的分压，第二开关芯片U5的使能端为高电平，则第二开关芯片U5启动，使得第二开关芯片U5的输出端能够向HUB_5V_USB2端输出电压，以使能够给接入第一USB接口400的从设备供电。图5示出的电路图只是一个示例，并不能理解为对本申请的限制。可以理解的是，第一开关芯片U3、所述第二开关芯片U5的型号均为LPW5210。可以理解的是，本申请实施例的USB接口扩展电路还包括一个USB通用连接器。参照图6，图6为本申请一些实施例的USB通用连接器的电路示意图。USB通用连接器USB1为Micro.USB连接器，连接器USB1与VBUS_USB端连接，并且连接器USB1通过一个共模滤波器EMI1与第二USB接口600连接，Micro_USB_DM端、Micro_USB_DP为第二USB接口600的连接引脚。Micro.USB连接器为现有技术中常规的器件，本申请实施例在此不进行赘述。可以理解的是，第一开关模块500包括第三开关芯片U6，第二开关模块200包括第四开关芯片U7，所述第三开关芯片U6、第四开关芯片U7的型号均为WAS7227Q。可以理解的是，参照图7，图7为本申请一些实施例的第一开关模块500的电路示意图。在图7中，U6为第三开关芯片U6，第一开关模块500的第一公共端包括第三开关芯片U6的D+引脚和D-引脚；第一选择端包括第三开关芯片U6的D2+引脚和D2-引脚；第二选择端包括第三开关芯片U6的D1+引脚和D1-引脚；第一控制端为第三开关芯片U6的使能端，第三开关芯片U6的使能端接入USB_SW_SEL。参照图8，图8为本申请一些实施例的第二开关模块200的电路示意图。在图8中，U7为第四开关芯片U7，第二开关模块200的第二公共端包括第四开关芯片U7的D+引脚和D-引脚；第三选择端包括第四开关芯片U7的D1+引脚和D1-引脚；第四选择端包括第四开关芯片U7的D2+引脚和D1-引脚。第二控制端为第四开关芯片U7的使能端，第四开关芯片U7的使能端接入USB_SW_SEL，且第四开关芯片U7的使能端通过第七电阻R58R58接地，使得当处理器100的信号输出端无信号输出时，第四开关芯片U7的使能端被拉低，使得处理器100默认作为从设备。本申请第二方面实施例提供了一种终端，包括如本申请第一方面实施例的USB接口扩展电路。因此，第二方面实施例的终端能够将处理器100的USB接口扩展为多路USB接口，并且使处理器100能够作为主设备，也能够作为从设备。上面结合附图对本申请实施例作了详细说明，但是本申请不限于上述实施例，在所属技术领域普通技术人员所具备的知识范围内，还可以在不脱离本申请宗旨的前提下，作出各种变化。
