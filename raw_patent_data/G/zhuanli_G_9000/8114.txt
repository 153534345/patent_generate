标题title
小型麦克风阵列设备的区域拾音方法及系统
摘要abst
本发明公开了一种小型麦克风阵列设备的区域拾音方法，包括：接收麦克风设备的多通道语音输入信号，做非线性波束形成得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益；利用区域合成算法对多波束数据集进行区域合成，得到每个频点的最终权重增益；利用基于神经网络的语音活动检测算法对区域波束信号进行处理，得到语音信号和噪声信号标签；对多波束数据集和区域波束信号检测，得到拾音区域语音信号和屏蔽区域语音信号标签；根据标签对拾音区域语音信号进行增强，对需屏蔽信号进行抑制，对噪声信号不作处理。本发明能够实现高指向性的区域拾音效果，使麦克风设备能够不失真的拾取指定感兴趣区域的声音，同时屏蔽区域外的干扰声音。
权利要求书clms
1.小型麦克风阵列设备的区域拾音方法，其特征在于，包括以下步骤：S1、接收麦克风设备的多通道语音输入信号，将麦克风设备所处区域划分为拾音区域和屏蔽区域，并将拾音区域和屏蔽区域分别细分为多个角度，对每个角度的波束做非线性波束形成，得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益，并将每个频点数据分别乘以对应的多个权重增益得到多波束数据集；S2、利用区域合成算法对多波束数据集进行区域合成，将每个频点数据对应的多个波束进行合成，得到每个频点的最终权重增益，将每个频点数据乘以对应的最终权重增益，得到合成后的区域波束信号；S3、利用基于神经网络的语音活动检测算法对区域波束信号进行处理，得到语音信号和噪声信号标签；S4、对多波束数据集和区域波束信号进行能量增益检测和频谱特征检测，得到拾音区域语音信号和屏蔽区域语音信号标签，所述屏蔽区域语音信号包括噪声信号和需屏蔽信号；S5、根据标签对拾音区域语音信号进行增强，对需屏蔽信号进行抑制，对噪声信号不作处理。2.如权利要求1所述的小型麦克风阵列设备的区域拾音方法，其特征在于，所述对每个角度的波束做非线性波束形成，得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益，包括：对于麦克风设备的多个麦克风阵列，指定方位角θ下的信号到达各个麦克风的传输函数h如下：其中：k＝2πf/c，f为频率，c为声速，d为麦克风间距，M为麦克风数量；得到每个频点上的每个麦克风的观测信号向量为：xm＝hsS+hiSi+n其中，S为期望得到的信号分量，hs为期望得到的信号分量的传输函数；Si为干扰信号分量，hi为干扰信号分量的传输函数；n为噪声分量；0≤m≤M-1；得到每个频点上所有麦克风的观测信号向量为：X＝T在传统波束形成输出的基础上，再乘以自适应的增益值g，表示为：即其中，Y＝wHX，w为权重，H表示转置共轭；将每个频点数据的权重增益表示为：其中，E表示数学期望，S为期望的实际信号，展开内部多项式，得到：考虑最小化条件，省略为：3.如权利要求1所述的小型麦克风阵列设备的区域拾音方法，其特征在于，步骤S4中，采用每帧处理前后的全带能量差和全频带下特定分位数增益值来检测能量增益。4.如权利要求1所述的小型麦克风阵列设备的区域拾音方法，其特征在于，采用每帧处理前后的频谱差异度值来检测频谱特征。5.如权利要求1所述的小型麦克风阵列设备的区域拾音方法，其特征在于，在步骤S4中，通过特征累计和特征平滑来排除数值的跳动。6.小型麦克风阵列设备的区域拾音系统，其特征在于，包括以下模块：非线性多波束形成模块，用于接收麦克风设备的多通道语音输入信号，将麦克风设备所处区域划分为拾音区域和屏蔽区域，并将拾音区域和屏蔽区域分别细分为多个角度，对每个角度的波束做非线性波束形成，得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益，并将每个频点数据分别乘以对应的多个权重增益得到多波束数据集；拾音区域合成模块，用于利用区域合成算法对多波束数据集进行区域合成，将每个频点数据对应的多个波束进行合成，得到每个频点的最终权重增益，将每个频点数据乘以对应的最终权重增益，得到合成后的区域波束信号；语音检测模块，用于利用基于神经网络的语音活动检测算法对区域波束信号进行处理，得到语音信号和噪声信号标签；后置处理模块，用于对多波束数据集和区域波束信号进行能量增益检测和频谱特征检测，得到拾音区域语音信号和屏蔽区域语音信号标签，所述屏蔽区域语音信号包括噪声信号和需屏蔽信号；拾音区域语音增强模块，用于根据标签对拾音区域语音信号进行增强，对需屏蔽信号进行抑制，对噪声信号不作处理。7.如权利要求6所述的小型麦克风阵列设备的区域拾音系统，其特征在于，所述对每个角度的波束做非线性波束形成，得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益，包括：对于麦克风设备的多个麦克风阵列，指定方位角θ下的信号到达各个麦克风的传输函数h如下：其中：k＝2πf/c，f为频率，c为声速，d为麦克风间距，M为麦克风数量；得到每个频点上的每个麦克风的观测信号向量为：xm＝hsS+hiSi+n其中，S为期望得到的信号分量，hs为期望得到的信号分量的传输函数；Si为干扰信号分量，hi为干扰信号分量的传输函数；n为噪声分量；0≤m≤M-1；得到每个频点上所有麦克风的观测信号向量为：X＝T在传统波束形成输出的基础上，再乘以自适应的增益值g，表示为：即其中，Y＝wHX，w为权重，H表示转置共轭；将每个频点数据的权重增益表示为：其中，E表示数学期望，S为期望的实际信号，展开内部多项式，得到：考虑最小化条件，省略为：8.如权利要求6所述的小型麦克风阵列设备的区域拾音系统，其特征在于，所述后置处理模块包括能量增益检测模块，所述能量增益检测模块采用每帧处理前后的全带能量差和全频带下特定分位数增益值来检测能量增益。9.如权利要求6所述的小型麦克风阵列设备的区域拾音系统，其特征在于，所述后置处理模块包括频谱特征检测模块，所述频谱特征检测采用每帧处理前后的频谱差异度值来检测频谱特征。10.如权利要求6所述的小型麦克风阵列设备的区域拾音系统，其特征在于，所述后置处理模块包括特征累计模块和特征平滑模块，通过特征累计特征累计模块和特征累计模块来排除数值的跳动。
说明书desc
技术领域本发明涉及区域拾音技术领域，特别涉及一种小型麦克风阵列设备的区域拾音方法及系统。背景技术在远程语音会议场景下，屏蔽场景中不必要的干扰声音通常有助于提升会议质量，使远程交流更加方便。该功能的实现一般需要结合高指向性的大尺寸麦克风阵列和波束形成方法，构造空域滤波器，对空间中各方向的语音进行选择性屏蔽。然而，在个人远程会议或两到三人的小会议室场景下，考虑到便携性和经济性，通常不会选择大型麦克风阵列，而是选择小型的网络会议摄像头、便携式话筒等。这些小型的会议设备，通常由2-6个麦克风组成拾音阵列。受限于阵列的孔径大小，传统波束形成方法不足以做到区域屏蔽的效果。在相同的麦克风间距前提下，麦克风数量越多，即阵列尺寸越大，形成的指向性越好，在主要方向的拾音性能准确，对其他方向的抑制性更强。除了传统的波束形成方法以外，还可以利用方位估计信息或子空间分解信息来区分不同声源，但这些方法都会受到麦克风阵列孔径、设备计算能力等限制，无法发挥其实际效果。因此，在有限计算力的小型麦克风会议设备上，实现较为精确的空间屏蔽效果是当前急需解决的问题。发明内容本发明要解决的技术问题是提供一种能够不失真地拾取指定区域的声音、屏蔽区域外干扰的小型麦克风阵列设备的区域拾音方法。为了解决上述问题，本发明提供了一种小型麦克风阵列设备的区域拾音方法，所述小型麦克风阵列设备的区域拾音方法包括以下步骤：S1、接收麦克风设备的多通道语音输入信号，将麦克风设备所处区域划分为拾音区域和屏蔽区域，并将拾音区域和屏蔽区域分别细分为多个角度，对每个角度的波束做非线性波束形成，得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益，并将每个频点数据分别乘以对应的多个权重增益得到多波束数据集；S2、利用区域合成算法对多波束数据集进行区域合成，将每个频点数据对应的多个波束进行合成，得到每个频点的最终权重增益，将每个频点数据乘以对应的最终权重增益，得到合成后的区域波束信号；S3、利用基于神经网络的语音活动检测算法对区域波束信号进行处理，得到语音信号和噪声信号标签；S4、对多波束数据集和区域波束信号进行能量增益检测和频谱特征检测，得到拾音区域语音信号和屏蔽区域语音信号标签，所述屏蔽区域语音信号包括噪声信号和需屏蔽信号；S5、根据标签对拾音区域语音信号进行增强，对需屏蔽信号进行抑制，对噪声信号不作处理。作为本发明的进一步改进，所述对每个角度的波束做非线性波束形成，得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益，包括：对于麦克风设备的多个麦克风阵列，指定方位角θ下的信号到达各个麦克风的传输函数h如下：其中：k＝2πf/c，f为频率，c为声速，d为麦克风间距，M为麦克风数量；得到每个频点上的每个麦克风的观测信号向量为：xm＝hsS+hiSi+n其中，S为期望得到的信号分量，hs为期望得到的信号分量的传输函数；Si为干扰信号分量，hi为干扰信号分量的传输函数；n为噪声分量；0≤m≤M-1；得到每个频点上所有麦克风的观测信号向量为：X＝T在传统波束形成输出的基础上，再乘以自适应的增益值g，表示为：即其中，Y＝wHX，w为权重，H表示转置共轭；将每个频点数据的权重增益表示为：其中，E表示数学期望，S为期望的实际信号，展开内部多项式，得到：考虑最小化条件，省略为：作为本发明的进一步改进，步骤S4中，采用每帧处理前后的全带能量差和全频带下特定分位数增益值来检测能量增益。作为本发明的进一步改进，采用每帧处理前后的频谱差异度值来检测频谱特征。作为本发明的进一步改进，在步骤S4中，通过特征累计和特征平滑来排除数值的跳动。为了解决上述问题，本发明还提供了一种小型麦克风阵列设备的区域拾音系统，包括以下模块：非线性多波束形成模块，用于接收麦克风设备的多通道语音输入信号，将麦克风设备所处区域划分为拾音区域和屏蔽区域，并将拾音区域和屏蔽区域分别细分为多个角度，对每个角度的波束做非线性波束形成，得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益，并将每个频点数据分别乘以对应的多个权重增益得到多波束数据集；拾音区域合成模块，用于利用区域合成算法对多波束数据集进行区域合成，将每个频点数据对应的多个波束进行合成，得到每个频点的最终权重增益，将每个频点数据乘以对应的最终权重增益，得到合成后的区域波束信号；语音检测模块，用于利用基于神经网络的语音活动检测算法对区域波束信号进行处理，得到语音信号和噪声信号标签；后置处理模块，用于对多波束数据集和区域波束信号进行能量增益检测和频谱特征检测，得到拾音区域语音信号和屏蔽区域语音信号标签，所述屏蔽区域语音信号包括噪声信号和需屏蔽信号；拾音区域语音增强模块，用于根据标签对拾音区域语音信号进行增强，对需屏蔽信号进行抑制，对噪声信号不作处理。作为本发明的进一步改进，所述对每个角度的波束做非线性波束形成，得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益，包括：对于麦克风设备的多个麦克风阵列，指定方位角θ下的信号到达各个麦克风的传输函数h如下：其中：k＝2πf/c，f为频率，c为声速，d为麦克风间距，M为麦克风数量；得到每个频点上的每个麦克风的观测信号向量为：xm＝hsS+hiSi+n其中，S为期望得到的信号分量，hs为期望得到的信号分量的传输函数；Si为干扰信号分量，hi为干扰信号分量的传输函数；n为噪声分量；0≤m≤M-1；得到每个频点上所有麦克风的观测信号向量为：X＝T在传统波束形成输出的基础上，再乘以自适应的增益值g，表示为：即其中，Y＝wHX，w为权重，H表示转置共轭；将每个频点数据的权重增益表示为：其中，E表示数学期望，S为期望的实际信号，展开内部多项式，得到：考虑最小化条件，省略为：作为本发明的进一步改进，所述后置处理模块包括能量增益检测模块，所述能量增益检测模块采用每帧处理前后的全带能量差和全频带下特定分位数增益值来检测能量增益。作为本发明的进一步改进，所述后置处理模块包括频谱特征检测模块，所述频谱特征检测采用每帧处理前后的频谱差异度值来检测频谱特征。作为本发明的进一步改进，所述后置处理模块包括特征累计模块和特征平滑模块，通过特征累计特征累计模块和特征累计模块来排除数值的跳动。本发明的有益效果：本发明小型麦克风阵列设备的区域拾音方法及系统能够实现高指向性的区域拾音效果，使麦克风设备能够不失真的拾取指定感兴趣区域的声音，同时屏蔽区域外的干扰声音，提高远程会议质量，节约场地成本。本发明小型麦克风阵列设备的区域拾音方法及系统输出的语音可以有明显的区域内和区域外对比，且能够保证较好的听觉连续性。上述说明仅是本发明技术方案的概述，为了能够更清楚了解本发明的技术手段，而可依照说明书的内容予以实施，并且为了让本发明的上述和其他目的、特征和优点能够更明显易懂，以下特举较佳实施例，并配合附图，详细说明如下。附图说明图1是本发明优选实施例中小型麦克风阵列设备的区域拾音方法的流程图；图2是本发明优选实施例中小型麦克风阵列设备的区域拾音系统的示意图；图3是本发明优选实施例中小型麦克风阵列设备的区域拾音系统中非线性多波束形成模块的示意图；图4是本发明优选实施例中小型麦克风阵列设备的区域拾音系统中后置处理模块的示意图。具体实施方式下面结合附图和具体实施例对本发明作进一步说明，以使本领域的技术人员可以更好地理解本发明并能予以实施，但所举实施例不作为对本发明的限定。如图1所示，为本发明优选实施例中的小型麦克风阵列设备的区域拾音方法，所述小型麦克风阵列设备的区域拾音方法包括以下步骤：步骤S1、接收麦克风设备的多通道语音输入信号，将麦克风设备所处区域划分为拾音区域和屏蔽区域，并将拾音区域和屏蔽区域分别细分为多个角度，对每个角度的波束做非线性波束形成，得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益，并将每个频点数据分别乘以对应的多个权重增益得到多波束数据集。具体地，步骤S1先将多通道语音输入信号，通过多通道的语音分帧和短时傅立叶变换，将时域信号转化为频域信号。虽然空间是连续的，但由于波束指向性并不能做到无限狭窄细分空间，因此在算法中只需将空间划分为多个指定角度，即多个离散的小区域即可。针对每个离散小区域，重复做多次非线性波束形成。具体地，所述对每个角度的波束做非线性波束形成，得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益，包括：对于麦克风设备的多个麦克风阵列，指定方位角θ下的信号到达各个麦克风的传输函数h如下：其中：k＝2πf/c，f为频率，c为声速，d为麦克风间距，M为麦克风数量；得到每个频点上的每个麦克风的观测信号向量为：xm＝hsS+hiSi+n其中，S为期望得到的信号分量，hs为期望得到的信号分量的传输函数；Si为干扰信号分量，hi为干扰信号分量的传输函数；n为噪声分量；0≤m≤M-1；得到每个频点上所有麦克风的观测信号向量为：X＝T传统线性波束输出信号Y如下：Y＝wHX即：w为权重，H表示转置共轭，对于每帧信号，都有恒定不变的权重w。因此，无法应付时变的环境变化。步骤S1的目的是得到一个随信号特征变化的权重，可在每个频点上实现感兴趣信号和待抑制信号的分离。即对感兴趣信号占比较大的频点，做到不衰减或少衰减，对干扰信号成分做抑制，以拾音区域信号的初步筛选。在传统波束形成输出的基础上，再乘以自适应的增益值g，表示为：即其中，Y＝wHX，w为权重，H表示转置共轭；为了得到该增益，可设计如下等式，使处理后的输出信号与实际的待分离的无噪信号分量之间的误差更小。将每个频点数据的权重增益表示为：其中，E表示数学期望，S为期望的实际信号，展开内部多项式，得到：考虑最小化条件，省略为：对每个角度重复上述的非线性波束形成算法，可得到初步的区域筛选信号，即上述多波束数据集。步骤S2、利用区域合成算法对多波束数据集进行区域合成，将每个频点数据对应的多个波束进行合成，得到每个频点的最终权重增益，将每个频点数据乘以对应的最终权重增益，得到合成后的区域波束信号。其中，由于需要解决的实际问题是为了获得一整块的区域拾音或区域抑制效果，而步骤S1获得的非线性波束结果拾音区域过窄，无法满足实际使用需求。因此，需要将多个拾音区域内的窄波束合成为区域波束结果。具体地，根据概率密度合成原则，得到合成的区域波束对每个频点的增益。步骤S3、利用基于神经网络的语音活动检测算法对区域波束信号进行处理，得到语音信号和噪声信号标签。语音活动检测算法是语音前端算法中比较重要的一环，其目的是将语音从麦克风获取的音频信号中检测出来以便后续算法进行处理。在实时会议场景中，VAD算法的准确率对后续算法和最终音质有很大的影响。传统的VAD方法主要基于语音的特征进行建模，对外界环境和语音信噪比要求较高，无法处理一些类似敲击声，键盘声等瞬态噪声。近年来，基于神经网络的VAD方法越来越流行，通过神经网络强大的数据拟合能力来实现对复杂场景下的人声检测，效果通常优于传统算法。具体地，首先，将通过特征提取的40维特征送入模型第一层，卷积层，卷积层由16个卷积核组成，每个卷积核的尺寸为1×8，卷积核在时间-频率轴上进行卷积，这一步是为了学习频率子带之间的关联信息，然后使用PRelu激活函数进行计算，然后接最大池化层，池化尺寸为1×3。随后将池化后的输出送入归一化层，归一化层对每个特征图进行归一化，能够有效减少因为语音幅度变化导致的误判情况的发生。随后将输出送入LSTM层，LSTM能够有效学习帧与帧之间的关联信息，对提升语音检测准确率由很大的作用。最后送入DNN全连接层进行分类，通过sigmoid函数输出最终的帧预测结果。得到语音信号和噪声信号标签。步骤S4、对多波束数据集和区域波束信号进行能量增益检测和频谱特征检测，得到拾音区域语音信号和屏蔽区域语音信号标签，所述屏蔽区域语音信号包括噪声信号和需屏蔽信号。优选地，采用每帧处理前后的全带能量差和全频带下特定分位数增益值来检测能量增益。采用每帧处理前后的频谱差异度值来检测频谱特征。并通过特征累计和特征平滑来排除数值的跳动。每种检测结果都通过大量离线数据分析设定阈值，并通过非均匀加权综合三种特征。为了结果的稳定性，需通过多帧累计和平滑来排除数值的跳动。最终，对每帧信号可进行拾音区域和屏蔽区域的分类。步骤S5、根据标签对拾音区域语音信号进行增强，对需屏蔽信号进行抑制，对噪声信号不作处理。其中，为了提高听感上的连续性，对于判定为背景噪声的语音帧，最好不做处理或减少抑制量，将噪声幅度和被抑制后的屏蔽语音保持相似的水平，同时对拾音区域的语音进行增强。在上述处理后，输出的语音可以有明显的区域内和区域外对比，且能够保证较好的听觉连续性。实施例二如图2所示，本实施例公开了一种小型麦克风阵列设备的区域拾音系统，其包括以下模块：非线性多波束形成模块，用于接收麦克风设备的多通道语音输入信号，将麦克风设备所处区域划分为拾音区域和屏蔽区域，并将拾音区域和屏蔽区域分别细分为多个角度，对每个角度的波束做非线性波束形成，得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益，并将每个频点数据分别乘以对应的多个权重增益得到多波束数据集；拾音区域合成模块，用于利用区域合成算法对多波束数据集进行区域合成，将每个频点数据对应的多个波束进行合成，得到每个频点的最终权重增益，将每个频点数据乘以对应的最终权重增益，得到合成后的区域波束信号；语音检测模块，用于利用基于神经网络的语音活动检测算法对区域波束信号进行处理，得到语音信号和噪声信号标签；后置处理模块，用于对多波束数据集和区域波束信号进行能量增益检测和频谱特征检测，得到拾音区域语音信号和屏蔽区域语音信号标签，所述屏蔽区域语音信号包括噪声信号和需屏蔽信号；拾音区域语音增强模块，用于根据标签对拾音区域语音信号进行增强，对需屏蔽信号进行抑制，对噪声信号不作处理。参照图3，具体地，先将多通道语音输入信号，通过多通道的语音分帧和短时傅立叶变换，将时域信号转化为频域信号。虽然空间是连续的，但由于波束指向性并不能做到无限狭窄细分空间，因此在算法中只需将空间划分为多个指定角度，即多个离散的小区域即可。针对每个离散小区域，重复做多次非线性波束形成。所述对每个角度的波束做非线性波束形成，得到拾音区域和屏蔽区域中每个频点数据对应的多个权重增益，同上述实施例，在此不多赘述。对每个角度重复上述的非线性波束形成算法，可得到初步的区域筛选信号，即上述多波束数据集。如图4所示，所述后置处理模块包括能量增益检测模块，所述能量增益检测模块采用每帧处理前后的全带能量差和全频带下特定分位数增益值来检测能量增益。所述后置处理模块包括频谱特征检测模块，所述频谱特征检测采用每帧处理前后的频谱差异度值来检测频谱特征。优选地，所述后置处理模块包括特征累计模块和特征平滑模块，通过特征累计特征累计模块和特征累计模块来排除数值的跳动。本发明小型麦克风阵列设备的区域拾音方法及系统针对可能的信号和干扰声源，设计使用非线性波束形成器和基于特征统计的后置滤波器来加强对空间各方向声源的选择能力；并加入基于深度学习的智能语音检测机制，进一步加强对噪声、语音、干扰成分的判断准确性，提高系统的稳健性；可实现在一般非嘈杂场景下的区域拾音效果。以上实施例仅是为充分说明本发明而所举的较佳的实施例，本发明的保护范围不限于此。本技术领域的技术人员在本发明基础上所作的等同替代或变换，均在本发明的保护范围之内。本发明的保护范围以权利要求书为准。
