标题title
一种纱线纺织企业智能排产方法及系统
摘要abst
本发明涉及一种纱线纺织企业智能排产方法，包括如下步骤：1)，确定订单基本数据；2)，确定色绒原料的分配方案；3)，采集生产线的生产相关数据：采集设备状态数据、产品生产情况数据，并形成数据库，通过网络上传至智能排产系统；4)，毛绒纱线生产自动排产：基于客户订单要求，耦合色绒颜色分配约束和生产过程的设备状态与生产情况反馈实时数据，采用遗传算法，通过智能排产系统自动进行并生成排产计划表；5)，排产调度计划表的显示与人工修改。本发明通过确定相应的排产策略、设计系统，建立数学模型及高效求解算法，从而获得最优的纺织车间智能排产方案，指导车间生产，提高企业效益。
权利要求书clms
1.一种纱线纺织企业智能排产方法，其特征在于：包括如下步骤：1)，确定订单基本数据：确定客户订单要求，将其编制成订单数据表；2)，确色绒原料的分配方案：根据订单的色纱的颜色和产量要求，基于三刺激差值法及企业原有的单色标准色绒原料种类情况，确定色绒混色比例和用量；3)，采集生产线的生产相关数据：采集设备状态数据、产品生产情况数据，并形成数据库，通过网络上传至智能排产系统；4)，毛绒纱线生产自动排产：基于客户订单要求，耦合色绒颜色分配约束和生产过程的设备状态与生产情况反馈实时数据，采用遗传算法，通过智能排产系统自动进行并生成排产计划表；5)，排产调度计划表的显示与人工修改：把排产计划表通过可视化界面投递在系统界面上，调度中心可以实时监视设备的运行情况。2.如权利要求1所述的纱线纺织企业智能排产方法，其特征在于：所述步骤1)中，客户订单要求主要包括订单数量、每个订单成品纱量、交货期限、纱线颜色。3.如权利要求1所述的纱线纺织企业智能排产方法，其特征在于：所述步骤2)具体为：将订单的色纱样品放在一个水平的平台上和色卡进行对比，并且多重曝光扫描识别，经过大数据分析，通过基于计算机视觉的颜色识别技术将订单的色纱样品进行颜色拆解，获得订单色纱样品的单色标准色绒原料构成配比与用量，形成订单的原料配置基础资料，与订单时间、订单样本检验员姓名，以及订单交货期一并形成订单数据库通过网络上传至智能排产系统。4.如权利要求1所述的纱线纺织企业智能排产方法，其特征在于：所述步骤3)中，设备状态数据包括设备停机开机信号，设备的实时自检信号，主运行电机的转速和受力信号，设备在紧急停机情况下的报警信号，设备进程完成度分析信号；产品生产情况数据包括订单的产量、标准单色绒种类、标准单绒色绒的用量。5.如权利要求1所述的纱线纺织企业智能排产方法，其特征在于：所述步骤4)的具体排产过程如下：4-1)，第一轮排产：对于一般订单要求，根据订单个数、实时采集的色绒混色比例和订单需求产品数量进行预排序处理，将同种色绒混色比例但是不同数量的订单需求进行合并，产生相对较大规模的合并订单，该类型合并订单优先进行生产；4-2)，第二轮排产：对订单进行编号，对订单做一个颜色分类的操作，将订单编号和标准单色绒比例用量两者结合，形成一一对应关系，预处理后形成第一个染色体；对订单进行编号，做一个完成时间预估的操作，将订单编号和完成时间两者结合，形成一一对应关系，预处理完成后放入算法形成第二个染色体；接着，基于第一染色体和第二染色体，随机生成一定数目的个体，形成初始群体；根据模式定理，得到一定的群体规模，经过不随迭代而变化，保持不变然后，根据当前的排产计划计算色绒颜色a1、设备工作时间a3、订单供货量a3；基于整个种群的数据分布分别对a1，a2，a3作最大最小归一化处理，计算适应度f＝k1×a1+k2×a2+k3×a3；再次，使用轮盘选择法进行交叉和变异操作；最后通过不断迭代，得到第一最优排产计划；取迭代中间步的被删除的种群样本并也通过遗传算法进行计算，得到第二最优排产计划；将第一排产计划与第二排产计划进行比较，若第一排产计划远优于第二排产计划，则确定第一最优排产计划为最终最优排产计划；若第二排产计划远优于第一排产计划，则将第二排产计划设置为第一排产计划，再重新计算种群样本得到新的第二最优排产计划，直至第一排产计划远优于第二排产计划；4-3)，第三轮排产：针对紧急订单的处理，紧急订单进行颜色识别，确定标准单色绒的比例分配，将生产设备中的下一项生产订单数据列表进行逐个查询，如果标准单色绒的比例相同，那么就插入该设备的下一项生产订单目录里面，完成对紧急订单的处理；如果生产设备中的下一项生产订单数据列表没有和紧急订单的标准单色绒比例相同的，则将紧急订单加入数据库，通过加入优先级约束的条件优先生产；4-4)，第四轮排产：突发设备故障状况，在遗传算法加入新的约束条件，将故障设备的参与度变为0，重新运算形成最优解即可。6.如权利要求1所述的纱线纺织企业智能排产方法，其特征在于：所述步骤5)中，除了自动排产接受的订单并实时监视生产设备的监控情况，还包括人工修改的接口、警示系统，顶层管理员包括企业总经理、董事长在特殊情况下手动对排产计划表进行数据添加与删除。7.如权利要求1所述的纱线纺织企业智能排产系统，其特征在于：包括数据层、计算层和管理层；其中，所述数据层负责与计算层、管理层相连，其采集生产设备的基础数据，输入已经完成算法排列的订单序列和存储工艺已经完成的历史订单信息并形成一系列供计算层调用的数据库，并实现数据与设备之间的交流互通，为调度排产提供数据基础；所述计算层包括排产参数计算、排产调度计划的安排、预排产计算、密集小订单转化为批量订单合集、建立批量订单合集和基础颜色的映射关系、建立批量订单合集和完成时间的映射关系；排产计算得到的参数和调度计划传入数据层，为之后的调度排产提供基础数据；所述管理层实现与设备界面的联系感知，与用户界面互通，其能够接收用户的订单信息、原料储备数据、原料调动数据、设备生产状况的一系列数据、订单完成信息、成品储存信息，将其存入数据层；也能与设备界面进行感知，使员工能控制设备的运行。
说明书desc
【技术领域】本发明涉及一种排产方法及系统，具体涉及一种纱线纺织企业智能排产方法及系统，属于计算机智能管理系统技术领域。【背景技术】目前很多纺织企业还是使用静态排产方法，虽然也能让生产车间正常运转，但是排产的计划一旦确定下来，一般都是按照计划生产，不能对资源进行有效地配置，对于机器故障、人员缺岗等事件难以应对，会出现调度不及时的情况，导致车间生产效率低下。如何在一定时间内，分配有限资源，对生产任务统筹安排，缩短生产周期，最大化利用资源，是影响企业综合实力的关键。智能排产与动态调度是把整个制造系统看作是一个动态过程，要求整个系统对于一些动态事件，比如部件到达的不确定性、机器故障等进行实时响应，具有很好的灵活性，但是也增加了整个系统的复杂性和排产的难度。现有的纺织车间主要是采用先进的纺纱生产设备及远程监测系统，实现了对纺织生产全流程数据的采集与远程监测，做到了生产过程数字化、生产管理的数字化以及分析应用数字化，但其功能主要局限于在对纺织生产过程中设备运行数据、工艺执行数据等数据的远程监控与管理，但问题是各子系统功能模块以及不同工序数据间相互独立的问题仍然存在。为此，在现有纺织车间的基础之上，建立纺织车间系统集成控制模型，实现对纺织车间系统功能的统一部署，进而实现对不同数据知识的知识关联与集成分析，打破不同来源数据间的壁垒，是实现纺织品生产过程质量智能控制与管理的前提条件。现有智能排产技术的研究中，大部分以近似方法为主。对于纺织车间智能排产的问题，其排产过程较为复杂，目前的研究均缺乏针对单元装配模式下自适应调度问题的模型，使得人力资源浪费，设备利用率偏低，进而造成装配车间的生产效率低下。同时，现有技术中提供的自动排产方法效率低，在企业中的应用效果不佳。因此，为解决上述技术问题，确有必要提供一种创新的纱线纺织企业智能排产方法及系统，以克服现有技术中的所述缺陷。【发明内容】本发明的目的在于提供一种基于计划排产优先规则和生产订单合并规则提出的纱线纺织企业智能排产方法，其能解决工作人员仅凭借工作经验进行生产计划安排，使得无法准确合理地均衡各项工艺参数，导致部分订单无法按时完成的问题，以期实现纱线生产计划的排产调度系统化管理。本发明的另一目的在于提供一种纱线纺织企业智能排产系统。为实现上述第一目的，本发明采取的技术方案为：一种纱线纺织企业智能排产方法，其包括如下步骤：1)，确定订单基本数据：确定客户订单要求，将其编制成订单数据表；2)，确定色绒原料的分配方案：根据订单的色纱的颜色和产量要求，基于三刺激差值法及企业原有的单色标准色绒原料种类情况，确定色绒混色比例和用量；3)，采集生产线的生产相关数据：采集设备状态数据、产品生产情况数据，并形成数据库，通过网络上传至智能排产系统；4)，毛绒纱线生产自动排产：基于客户订单要求，耦合色绒颜色分配约束和生产过程的设备状态与生产情况反馈实时数据，采用遗传算法，通过智能排产系统自动进行并生成排产计划表；5)，排产调度计划表的显示与人工修改：把排产计划表通过可视化界面投递在系统界面上，调度中心可以实时监视设备的运行情况。本发明的纱线纺织企业智能排产方法进一步为：所述步骤1)中，客户订单要求主要包括订单数量、每个订单成品纱量、交货期限、纱线颜色。本发明的纱线纺织企业智能排产方法进一步为：所述步骤2)具体为：将订单的色纱样品放在一个水平的平台上和色卡进行对比，并且多重曝光扫描识别，经过大数据分析，通过基于计算机视觉的颜色识别技术将订单的色纱样品进行颜色拆解，获得订单色纱样品的单色标准色绒原料构成配比与用量，形成订单的原料配置基础资料，与订单时间、订单样本检验员姓名，以及订单交货期一并形成订单数据库通过网络上传至智能排产系统。本发明的纱线纺织企业智能排产方法进一步为：所述步骤3)中，设备状态数据包括设备停机开机信号，设备的实时自检信号，主运行电机的转速和受力信号，设备在紧急停机情况下的报警信号，设备进程完成度分析信号；产品生产情况数据包括订单的产量、标准单色绒种类、标准单绒色绒的用量。本发明的纱线纺织企业智能排产方法进一步为：所述步骤4)的具体排产过程如下：4-1)，第一轮排产：对于一般订单要求，根据订单个数、实时采集的色绒混色比例和订单需求产品数量进行预排序处理，将同种色绒混色比例但是不同数量的订单需求进行合并，产生相对较大规模的合并订单，该类型合并订单优先进行生产；4-2)，第二轮排产：对订单进行编号，对订单做一个颜色分类的操作，将订单编号和标准单色绒比例用量两者结合，形成一一对应关系，预处理后形成第一个染色体；对订单进行编号，做一个完成时间预估的操作，将订单编号和完成时间两者结合，形成一一对应关系，预处理完成后放入算法形成第二个染色体；接着，基于第一染色体和第二染色体，随机生成一定数目的个体，形成初始群体；根据模式定理，得到一定的群体规模，经过不随迭代而变化，保持不变然后，根据当前的排产计划计算色绒颜色a1、设备工作时间a3、订单供货量a3；基于整个种群的数据分布分别对a1，a2，a3作最大最小归一化处理，计算适应度f＝k1×a1+k2×a2+k3×a3；再次，使用轮盘选择法进行交叉和变异操作；最后通过不断迭代，得到第一最优排产计划；取迭代中间步的被删除的种群样本并也通过遗传算法进行计算，得到第二最优排产计划；将第一排产计划与第二排产计划进行比较，若第一排产计划远优于第二排产计划，则确定第一最优排产计划为最终最优排产计划；若第二排产计划远优于第一排产计划，则将第二排产计划设置为第一排产计划，再重新计算种群样本得到新的第二最优排产计划，直至第一排产计划远优于第二排产计划；4-3)，第三轮排产：针对紧急订单的处理，紧急订单进行颜色识别，确定标准单色绒的比例分配，将生产设备中的下一项生产订单数据列表进行逐个查询，如果标准单色绒的比例相同，那么就插入该设备的下一项生产订单目录里面，完成对紧急订单的处理；如果生产设备中的下一项生产订单数据列表没有和紧急订单的标准单色绒比例相同的，则将紧急订单加入数据库，通过加入优先级约束的条件优先生产；4-4)，第四轮排产：突发设备故障状况，在遗传算法加入新的约束条件，将故障设备的参与度变为0，重新运算形成最优解即可。本发明的纱线纺织企业智能排产方法还为：所述步骤5)中，除了自动排产接受的订单并实时监视生产设备的监控情况，还包括人工修改的接口、警示系统，顶层管理员包括企业总经理、董事长在特殊情况下手动对排产计划表进行数据添加与删除。为实现上述第二目的，本发明采取的技术方案为：一种纱线纺织企业智能排产系统，其包括数据层、计算层和管理层；其中，所述数据层负责与计算层、管理层相连，其采集生产设备的基础数据，输入已经完成算法排列的订单序列和存储工艺已经完成的历史订单信息并形成一系列供计算层调用的数据库，并实现数据与设备之间的交流互通，为调度排产提供数据基础；所述计算层包括排产参数计算、排产调度计划的安排、预排产计算、密集小订单转化为批量订单合集、建立批量订单合集和基础颜色的映射关系、建立批量订单合集和完成时间的映射关系；排产计算得到的参数和调度计划传入数据层，为之后的调度排产提供基础数据；所述管理层实现与设备界面的联系感知，与用户界面互通，其能够接收用户的订单信息、原料储备数据、原料调动数据、设备生产状况的一系列数据、订单完成信息、成品储存信息，将其存入数据层；也能与设备界面进行感知，使员工能控制设备的运行。与现有技术相比，本发明具有如下有益效果：1.本发明在排产过程中使用了遗传算法，除了考虑订单信息的同时也考虑颜色分配的约束，颜色相近分配到一起，减少了工艺参数反复修改，设备一直生产相近获相同颜色的纱线，工艺参数无需经常修改和原料供应种类减少，提高了生产效率，降低了运输过程所花费的时间，而且因颜色比较接近，纱线混色出现色差质量问题变少。2.本发明的设备生产情况受到反馈数据的约束，产线上设备生产状态实时反馈，设备与排产做到实时互动，动态调整排产，鲁棒性更好，效率更高。3.本发明针对纺织行业生产特点，小批量、多品种，系统根据产品要求分析工艺流程，将相同或相似的的生产订单合并批量生产，减轻人工排产的计算工作量，缩短生产计划调度的时间，提高工作效率和计划排产的准确性。4.本发明可以直接与MES系统和EPR系统互通和交互数据，实现各个工序工艺的数据上传，有利于设备维护，方便实现排产调度管理，并且在面对紧急订单扰动时能够合理地处理。【附图说明】图1是本发明的纱线纺织企业智能排产系统的原理图。图2是本发明进行生产计划调度排产的逻辑图。图3是本发明的算法流程逻辑图。【具体实施方式】请参阅说明书附图1所示，本发明为一种纱线纺织企业智能排产系统，其由数据层、计算层和管理层等几部分组成。其中，所述数据层负责与计算层、管理层相连，其采集生产设备的基础数据，输入已经完成算法排列的订单序列和存储工艺已经完成的历史订单信息并形成一系列供计算层调用的数据库，并实现数据与设备之间的交流互通，为调度排产提供数据基础。所述计算层包括排产参数计算、排产调度计划的安排、预排产计算、密集小订单转化为批量订单合集、建立批量订单合集和基础颜色的映射关系、建立批量订单合集和完成时间的映射关系；排产计算得到的参数和调度计划传入数据层，为之后的调度排产提供基础数据。所述管理层实现与设备界面的联系感知，与用户界面互通，其能够接收用户的订单信息、原料储备数据、原料调动数据、设备生产状况的一系列数据、订单完成信息、成品储存信息，将其存入数据层；也能与设备界面进行感知，使员工能控制设备的运行。请继续参阅说明书附图2和附图3所示，采用上述纱线纺织企业智能排产系统进行排产的方法包括如下工艺步骤：1)，确定订单基本数据：确定客户订单要求，将其编制成订单数据表。其中，客户订单要求主要包括订单数量、每个订单成品纱量、交货期限、纱线颜色。2)，确定色绒原料的分配方案：根据订单的色纱的颜色和产量要求，基于三刺激差值法及企业原有的单色标准色绒原料种类情况，确定色绒混色比例和用量。具体的说，本步骤将订单的色纱样品放在一个水平的平台上和色卡进行对比，并且多重曝光扫描识别，经过大数据分析，通过基于计算机视觉的颜色识别技术将订单的色纱样品进行颜色拆解，获得订单色纱样品的单色标准色绒原料构成配比与用量，形成订单的原料配置基础资料，与订单时间、订单样本检验员姓名，以及订单交货期一并形成订单数据库通过网络上传至智能排产系统。进一步的，根据订单的交货量和库存原料量以及订单交货期评估出相应的重要程度系数，并且提出相应的订单优先度评估体系，如库存原料量越充足以及订单交货期越短，则订单优先度越高，反之则订单优先度越低；订单优先度越高，则生产序列越靠前，优先完成生产。3)，采集生产线的生产相关数据：采集设备状态数据、产品生产情况数据，并形成生产设备状态数据库和生产情况数据库，通过网络上传至智能排产系统。其中，所述设备状态数据包括设备停机开机信号，设备的实时自检信号，主运行电机的转速和受力信号，设备在紧急停机情况下的报警信号，设备进程完成度分析信号；所述产品生产情况数据包括订单的产量、上一个订单的各标准单色绒的实际用量，当前订单的各标准单色绒的实际用量，各标准单色绒的使用剩余量,、标准单色绒种类、标准单绒色绒的用量。4)，毛绒纱线生产自动排产：基于客户订单要求，耦合色绒颜色分配约束、生产过程的设备状态与生产情况反馈实时数据，采用遗传算法，通过智能排产系统自动进行并生成排产计划表。具体排产过程如下：4-1)，第一轮排产：对于一般订单要求，根据订单个数、实时采集的色绒混色比例和订单需求产品数量进行预排序处理，将同种色绒混色比例但是不同数量的订单需求进行合并，产生相对较大规模的合并订单，该类型合并订单优先进行生产。检测生产设备是否有正在生产相同色绒混色比例订单的设备，如果有则加入，同时自动补充相应标准单色绒原料，通过AGV小车实时配送，目的是减少订单排产所需要的时间，尽可能减少生产设备的待机时间，提高效率；同时这样做法可以为后续排产提供运算时间，减少即将排产的订单总数，减少算法运行的工作量和时间，减少算法获得次最优解的几率。4-2)，第二轮排产：对订单进行编号，对订单做一个颜色分类的操作，将订单编号和标准单色绒比例用量两者结合，形成一一对应关系，预处理后形成第一个染色体；对订单进行编号，做一个完成时间预估的操作，将订单编号和完成时间两者结合，形成一一对应关系，预处理完成后放入算法形成第二个染色体。接着，基于第一染色体和第二染色体，随机生成一定数目的个体，形成初始群体；根据模式定理，得到一定的群体规模，经过不随迭代而变化，保持不变然后，根据当前的排产计划计算色绒颜色a1、设备工作时间a3、订单供货量a3；基于整个种群的数据分布分别对a1，a2，a3作最大最小归一化处理，计算适应度f＝k1×a1+k2×a2+k3×a3；再次，使用轮盘选择法进行交叉和变异操作，具体如下：初始群体的生成。先随机生成一定数目的个体，然后从中挑出最好的个体加入到初始群体中。这一过程不断重复，直到初始群体中个体数达到了预定的规模。群体规模的设定。根据模式定理，若群体规模为M，则遗传操作可从这M个体中生成和检测O个模式，并在此基础上不断形成和优化积木块，直到找到最优解。同时群体规模M，模式阶i，被采样的模式数量的期望Mi之间满足如下关系：群体规模不随迭代而变化，保持不变。目标函数映射成适应度函数。根据当前的排产计划计算色绒颜色a1、设备最晚结束时间a2、设备均衡性a3；再次根据当前的排产计划计算色绒颜色a1、设备工作时间a3、订单供货量a3；基于整个种群的数据分布分别对a1，a2，a3作最大最小归一化处理，计算适应度f＝k1×a1+k2×a2+k3×a3。采用排序选择方法是将事先设计好的序列概率分配给每个个体。排序选择不利用个体适应度值绝对值的信息，可以避免群体进化过程中的适应度标度变换。进行交叉操作。根据轮盘选择法，将各个个体所能被选中的区域按照序列概率分布，通过系统轮盘对各个个体开始随机选择，进行一致交叉生成的新个体位；进行变异操作。变异算子通过按变异概率pm随机反转某位等位基因的二进制字符值来实现。先判断是否进行编码变异，如需变异则对生产编码乱序改变订单生产顺序；后判断每个订单是否进行生产设备编码变异，如需变异则检索其他生产订单的编码集合，当不存在相似订单则不变异，若存在则从根据相似订单的订单中随机选择一个作为该订单新编码。生成新的个体s'＝a'1a'2a'3。采用设定最大代数的方法作为迭代终止条件。最后通过不断迭代，得到第一最优排产计划；取迭代中间步的被删除的种群样本并也通过遗传算法进行计算，得到第二最优排产计划；将第一排产计划与第二排产计划进行比较，若第一排产计划远优于第二排产计划，则确定第一最优排产计划为最终最优排产计划；若第二排产计划远优于第一排产计划，则将第二排产计划设置为第一排产计划，再重新计算种群样本得到新的第二最优排产计划，直至第一排产计划远优于第二排产计划4-3)，第三轮排产：针对紧急订单的处理，紧急订单进行颜色识别，确定标准单色绒的比例分配，将生产设备中的下一项生产订单数据列表进行逐个查询，如果标准单色绒的比例相同，那么就插入该设备的下一项生产订单目录里面，完成对紧急订单的处理。如果生产设备中的下一项生产订单数据列表没有和紧急订单的标准单色绒比例相同的，则将紧急订单加入数据库，通过加入优先级约束的条件优先生产。4-4)，第四轮排产：突发设备故障状况，在遗传算法加入新的约束条件，将故障设备的参与度变为0，重新运算形成最优解即可。5)，排产调度计划表的显示与人工修改：把排产计划表通过可视化界面投递在系统界面上，调度中心可以实时监视设备的运行情况。本步骤中，除了自动排产接受的订单并实时监视生产设备的监控情况，还包括人工修改的接口、警示系统，顶层管理员包括企业总经理、董事长在特殊情况下手动对排产计划表进行数据添加与删除。综上所述，本发明的纱线纺织企业智能排产方法及系统可以降低加工过程中因订单种类不同导致的工序之间不连续的情况的发生，从而大幅度地缩短生产过程所需的时间；其可根据纱线要求中的毛绒类型比例和颜色种类，将毛纺过程中和毛工序和梳毛工序制作成两组计划调度排产，以期实现生产订单工序合并的排产调度管理。以上的具体实施方式仅为本创作的较佳实施例，并不用以限制本创作，凡在本创作的精神及原则之内所做的任何修改、等同替换、改进等，均应包含在本创作的保护范围之内。
