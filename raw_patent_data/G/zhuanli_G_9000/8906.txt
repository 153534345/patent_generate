标题title
一种天然气泄漏点定位方法及装置
摘要abst
本发明涉及气体探测技术领域，尤其涉及一种天然气泄漏点定位方法及装置，该方法采用激光扫描仪和摄像头实现，包括如下步骤：设置激光扫描仪进行扫描的工作参数，包括设置激光波长、扫描轨迹、移动速率、采样频率及空间窗口；令激光扫描仪执行扫描，对于每一个空间窗口进行如下操作：在当前空间窗口的采样结束后，处理得到的各个甲烷气体浓度值，计算对应当前空间窗口的甲烷气体浓度空间分布矩阵；基于甲烷气体浓度空间分布矩阵，确定所有极大值点；根据确定的各个极大值点，判断当前空间窗口是否出现泄漏点，若出现泄漏点，则在摄像头拍摄的图像中标示泄漏点位置并进行展示，否则继续扫描。本发明能够在较大场景中高效定位天然气泄漏点。
权利要求书clms
1.一种天然气泄漏点定位方法，其特征在于，采用激光扫描仪和摄像头实现，所述激光扫描仪用于发射激光并采样反射光，进行光谱分析，确定激光途径区域的甲烷气体浓度值，所述摄像头用于拍摄图像，该方法包括如下步骤：设置所述激光扫描仪进行扫描的工作参数，包括设置激光波长、扫描轨迹、移动速率、采样频率及空间窗口；令所述激光扫描仪执行扫描，对于每一个空间窗口进行如下操作：在当前空间窗口的采样结束后，处理得到的各个甲烷气体浓度值，计算对应当前空间窗口的甲烷气体浓度空间分布矩阵；基于所述甲烷气体浓度空间分布矩阵，确定所有极大值点；根据确定的各个极大值点，判断当前空间窗口是否出现泄漏点，若出现泄漏点，则在所述摄像头拍摄的图像中标示泄漏点位置并进行展示，否则继续扫描。2.根据权利要求1所述的天然气泄漏点定位方法，其特征在于：所述设置所述激光扫描仪进行扫描的工作参数还包括设置重点区域和无关区域；对于所述重点区域，采用往复式细扫模式进行扫描并采样；对于所述无关区域，不进行采样。3.根据权利要求2所述的天然气泄漏点定位方法，其特征在于：所述处理得到的各个甲烷气体浓度值，计算对应当前空间窗口的甲烷气体浓度空间分布矩阵，包括：基于各个采样点的空间位置，对得到的各个甲烷气体浓度值进行去重处理与插值处理，算出空间均匀分布的各点对应的甲烷气体浓度值，组成甲烷气体浓度空间分布矩阵。4.根据权利要求1所述的天然气泄漏点定位方法，其特征在于：所述基于所述甲烷气体浓度空间分布矩阵，确定所有极大值点，包括：通过计算最大池化，判断所述甲烷气体浓度空间分布矩阵中每个点的浓度值是否与该点所在邻域的最大值相等，若相等，则该点为极大值点。5.根据权利要求3所述的天然气泄漏点定位方法，其特征在于：所述根据确定的各个极大值点，判断当前空间窗口是否出现泄漏点，包括：基于预设的第一浓度阈值对各个极大值点进行判定，若存在极大值点对应的甲烷气体浓度值超过预设的第一浓度阈值，则认为该极大值点所在位置出现泄漏点。6.根据权利要求5所述的天然气泄漏点定位方法，其特征在于：所述激光扫描仪上还设有风向风速传感器，所述风向风速传感器用于测量风向和风速；所述在所述摄像头拍摄的图像中标示泄漏点位置并进行展示，包括：根据所述风向风速传感器测量的风向和风速，结合泄漏点的甲烷气体浓度值，对泄漏点位置进行修正；将修正后的位置在拍摄的图像中标示并进行展示。7.根据权利要求6所述的天然气泄漏点定位方法，其特征在于：所述对泄漏点位置进行修正，包括：根据所述风向风速传感器测量的风向和风速建立风向量，确定所述风向量在垂直激光方向的切向分量；根据所述切向分量的方向及大小，确定由于风向量引入的偏移量；确定由于浮力引入的偏移量；基于风向量引入的偏移量和浮力引入的偏移量，修正泄漏点位置。8.根据权利要求1所述的天然气泄漏点定位方法，其特征在于：所述激光扫描仪和所述摄像头同步转动。9.根据权利要求8所述的天然气泄漏点定位方法，其特征在于：所述摄像头拍摄图像的触发条件为所述激光扫描仪确定激光途径区域的甲烷气体浓度值超过预设的第二浓度阈值。10.一种天然气泄漏点定位装置，其特征在于，包括：激光扫描仪、摄像头和控制模块，其中：所述激光扫描仪用于发射激光并采样反射光，进行光谱分析，确定激光途径区域的甲烷气体浓度值；所述摄像头用于拍摄图像；所述控制模块与所述激光扫描仪、所述摄像头信号连接，包括设置单元和分析单元；所述设置单元用于设置所述激光扫描仪进行扫描的工作参数，包括设置激光波长、扫描轨迹、移动速率、采样频率及空间窗口；所述分析单元用于在所述激光扫描仪执行扫描时，对于每一个空间窗口进行如下操作：在当前空间窗口的采样结束后，处理采样得到的各个甲烷气体浓度值，计算对应当前空间窗口的甲烷气体浓度空间分布矩阵；基于所述甲烷气体浓度空间分布矩阵，确定所有极大值点；根据确定的各个极大值点，判断当前空间窗口是否出现泄漏点，若出现泄漏点，则在所述摄像头拍摄的图像中标示泄漏点位置并进行展示，否则继续扫描。
说明书desc
技术领域本发明涉及气体探测技术领域，尤其涉及一种天然气泄漏点定位方法及装置。背景技术天然气是一种易燃的混合物，主要成分是甲烷气体。天然气发生泄漏可能会引起爆炸，造成重大财产损失的同时也造成资源浪费，因此，进行天然气的泄漏检测及泄漏点定位有着重大意义。气体的泄漏一般都利用所检测气体的物理化学性质进行检测，如：根据气体泄漏时泄漏点会产生超声波的性质，进行气体泄漏点的定位，但超声波波长较短，在空气中则极易损耗、容易散射，因此利用超声波检测气体泄漏点的方法只适用于检测范围很小的场景中，检测效率偏低。发明内容本发明的目的是针对上述至少一部分不足之处，提供一种能够通过激光检测甲烷气体浓度值，并对各方向甲烷气体浓度值分布进行分析来确定天然气泄漏点位置的技术方案，以实现在较大场景中高效定位天然气泄漏点。为了实现上述目的，本发明提供了一种天然气泄漏点定位方法，采用激光扫描仪和摄像头实现，所述激光扫描仪用于发射激光并采样反射光，进行光谱分析，确定激光途径区域的甲烷气体浓度值，所述摄像头用于拍摄图像，该方法包括如下步骤：设置所述激光扫描仪进行扫描的工作参数，包括设置激光波长、扫描轨迹、移动速率、采样频率及空间窗口；令所述激光扫描仪执行扫描，对于每一个空间窗口进行如下操作：在当前空间窗口的采样结束后，处理得到的各个甲烷气体浓度值，计算对应当前空间窗口的甲烷气体浓度空间分布矩阵；基于所述甲烷气体浓度空间分布矩阵，确定所有极大值点；根据确定的各个极大值点，判断当前空间窗口是否出现泄漏点，若出现泄漏点，则在所述摄像头拍摄的图像中标示泄漏点位置并进行展示，否则继续扫描。可选地，所述设置所述激光扫描仪进行扫描的工作参数还包括设置重点区域和无关区域；对于所述重点区域，采用往复式细扫模式进行扫描并采样；对于所述无关区域，不进行采样。可选地，所述处理得到的各个甲烷气体浓度值，计算对应当前空间窗口的甲烷气体浓度空间分布矩阵，包括：基于各个采样点的空间位置，对得到的各个甲烷气体浓度值进行去重处理与插值处理，算出空间均匀分布的各点对应的甲烷气体浓度值，组成甲烷气体浓度空间分布矩阵。可选地，所述基于所述甲烷气体浓度空间分布矩阵，确定所有极大值点，包括：通过计算最大池化，判断所述甲烷气体浓度空间分布矩阵中每个点的浓度值是否与该点所在邻域的最大值相等，若相等，则该点为极大值点。可选地，所述根据确定的各个极大值点，判断当前空间窗口是否出现泄漏点，包括：基于预设的第一浓度阈值对各个极大值点进行判定，若存在极大值点对应的甲烷气体浓度值超过预设的第一浓度阈值，则认为该极大值点所在位置出现泄漏点。可选地，所述激光扫描仪上还设有风向风速传感器，所述风向风速传感器用于测量风向和风速；所述在所述摄像头拍摄的图像中标示泄漏点位置并进行展示，包括：根据所述风向风速传感器测量的风向和风速，结合泄漏点的甲烷气体浓度值，对泄漏点位置进行修正；将修正后的位置在拍摄的图像中标示并进行展示。可选地，所述对泄漏点位置进行修正，包括：根据所述风向风速传感器测量的风向和风速建立风向量，确定所述风向量在垂直激光方向的切向分量；根据所述切向分量的方向及大小，确定由于风向量引入的偏移量；确定由于浮力引入的偏移量；基于风向量引入的偏移量和浮力引入的偏移量，修正泄漏点位置。可选地，所述激光扫描仪和所述摄像头同步转动。可选地，所述摄像头拍摄图像的触发条件为所述激光扫描仪确定激光途径区域的甲烷气体浓度值超过预设的第二浓度阈值。本发明还提供了一种天然气泄漏点定位装置，包括：激光扫描仪、摄像头和控制模块，其中：所述激光扫描仪用于发射激光并采样反射光，进行光谱分析，确定激光途径区域的甲烷气体浓度值；所述摄像头用于拍摄图像；所述控制模块与所述激光扫描仪、所述摄像头信号连接，包括设置单元和分析单元；所述设置单元用于设置所述激光扫描仪进行扫描的工作参数，包括设置激光波长、扫描轨迹、移动速率、采样频率及空间窗口；所述分析单元用于在所述激光扫描仪执行扫描时，对于每一个空间窗口进行如下操作：在当前空间窗口的采样结束后，处理采样得到的各个甲烷气体浓度值，计算对应当前空间窗口的甲烷气体浓度空间分布矩阵；基于所述甲烷气体浓度空间分布矩阵，确定所有极大值点；根据确定的各个极大值点，判断当前空间窗口是否出现泄漏点，若出现泄漏点，则在所述摄像头拍摄的图像中标示泄漏点位置并进行展示，否则继续扫描。本发明的上述技术方案具有如下优点：本发明提供了一种天然气泄漏点定位方法及装置，本发明通过发射激光并对反射光做光谱分析来计算甲烷气体浓度值，根据各个方向甲烷气体浓度值分布状况进行分析来定位天然气泄漏点的位置，并通过可视化的方式展示，本发明能够在较大的空间范围内定位泄漏点，准确率高且对周围环境影响小，并且，本发明基于空间窗口进行采样，在获取一定量的甲烷气体浓度值后即解算当前空间窗口内是否存在泄漏点，可实现及时地、快速地检测。附图说明图1是本发明实施例中一种天然气泄漏点定位方法步骤示意图；图2是本发明实施例中激光扫描仪执行细扫模式示意图；图3是风向量分解示意图；图4是本发明实施例中一种天然气泄漏点定位装置结构示意图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明的一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都属于本发明保护的范围。如图1所示，本发明实施例提供的一种天然气泄漏点定位方法，采用激光扫描仪和摄像头实现，其中，激光扫描仪用于朝目标方向发射激光并采样反射光，根据反射光进行光谱分析，确定该方向上激光途径区域的甲烷气体浓度值，摄像头用于拍摄图像。该方法具体包括如下步骤：步骤100，设置激光扫描仪进行扫描的工作参数，包括设置激光波长、扫描轨迹、移动速率、采样频率及空间窗口等；步骤102，令激光扫描仪按照设置工作参数执行扫描，对于每一个空间窗口，均进行如下操作：在当前空间窗口区域内的采样结束后，处理得到的各个甲烷气体浓度值，计算对应当前空间窗口的甲烷气体浓度空间分布矩阵；基于甲烷气体浓度空间分布矩阵，确定当前空间窗口区域内的所有极大值点；根据确定的各个极大值点，判断当前空间窗口是否出现泄漏点，若出现泄漏点，则在摄像头拍摄的图像中标示泄漏点位置并进行展示，否则继续扫描下一个空间窗口。本发明采用激光扫描仪测量甲烷气体浓度，激光扫描仪向着某一目标方向发射特定波长的激光，甲烷气体受到激光照射会产生吸收光谱，对反射回来的光线进行光谱分析，可计算出该方向上甲烷气体的浓度值。在测量过程中，激光扫描仪的激光方向按照设定好的扫描轨迹进行扫描，依采样频率采样反射光进行分析，实现对空间中各方向甲烷气体浓度值检测。随着激光扫描仪扫描检测空间各处甲烷气体浓度值，得到的数据所覆盖的区域逐渐增大。为提高计算和告警的效率，当数据量足以计算泄漏点时，及时对当前数据进行处理并寻找数据内的泄漏点，本发明设置了空间窗口，每个空间窗口内的数据采集结束后，即对空间窗口区域内的相关数据进行检测分析，判断是否存在泄漏点。每个空间窗口被检测后，所对应的区域将得到更新。本发明提供的方法可在较大的空间范围中使用，及时对扫描得到的甲烷气体浓度进行数据分析，实现快速定位天燃气泄漏点位置，并通过可视化的方式进行展示。本发明效率高、成本低，且易于实现，有利于应用推广。可选地，步骤100中，设置激光扫描仪进行扫描的工作参数还包括设置重点区域和无关区域；对于重点区域，激光扫描仪采用往复式细扫模式进行扫描并采样，从重点区域的起点至终点沿往复式回折线扫描；对于无关区域，激光扫描仪不进行采样，从无关区域快速通过，至下一个重点区域。优选地，设置重点区域包括设置重点区域的起点与终点坐标、重点区域的边界等基本参数。采用上述实施方式，对重点区域进行细扫，能保证在特定区域内采集到足够的数据，且防止采样稀疏而导致泄漏点被跳过；对无关区域快速通过，可减少扫描一周所需的时间。扫描时，轨迹可经过多个重点区域，如图2所示，激光扫描仪可从当前的重点区域的起点开始，沿垂直方向进行扫描，当到达垂直方向的边界时，扫描仪沿水平方向位移一个小角度并折返，开始下一次的垂直方向扫描，重复此过程，直到整个重点区域被扫描完成后，激光扫描仪跳过无关区域，快速运转到下一细扫的重点区域的起点处，继续细扫。进一步地，步骤102中，处理得到的各个甲烷气体浓度值，计算对应当前空间窗口的甲烷气体浓度空间分布矩阵，包括：基于各个采样点的空间位置，对得到的各个甲烷气体浓度值进行去重处理与插值处理，算出空间均匀分布的各点所对应的甲烷气体浓度值，组成甲烷气体浓度空间分布矩阵。对于当前空间窗口，由于重点区域内进行往复式细扫，若采样频率不变，由于往复移动期间需转向，可能在转向点附近更密集地采样，造成部分数据重复，同时，由于无关区域内不设置采样点，可能出现空间窗口内部分区域无对应的浓度值，造成部分数据缺失，通过去重处理和插值处理，能够得到空间均匀分布的各点对应的甲烷气体浓度值，以便进行后续的计算。可选地，对于步骤102，基于甲烷气体浓度空间分布矩阵，确定所有极大值点，包括：通过计算最大池化，判断甲烷气体浓度空间分布矩阵中每个点的浓度值是否与该点所在邻域的最大值相等，若相等，则该点为极大值点。进一步地，计算最大池化，可通过对原甲烷气体浓度空间分布矩阵的四周进行全零填充后，进行步长为1的最大池化来实现，对比最大池化后所得结果矩阵与原矩阵的各对应元素是否相等即可，相等则证明该点为极大值点，否则不是极大值点。可选地，步骤102中，根据确定的各个极大值点，判断当前空间窗口是否出现泄漏点，包括：基于预设的第一浓度阈值对各个极大值点进行判定，若存在极大值点对应的甲烷气体浓度值超过预设的第一浓度阈值，则认为该极大值点所在位置出现泄漏点，若所有极大值点均未超过预设的第一浓度阈值，则认为当前空间窗口区域内没有出现泄漏点。泄漏点处的浓度很高，浓度值较低的极大值点属于误报。上述实施方式设置了一个气体浓度阈值来进行筛选，可以有效减少误报。优选地，激光扫描仪上还设有风向风速传感器，风向风速传感器用于测量风向和风速；相应地，步骤102中，在摄像头拍摄的图像中标示泄漏点位置并进行展示，进一步包括：根据风向风速传感器测量的风向和风速，结合泄漏点的甲烷气体浓度值，对泄漏点位置进行修正；将修正后的位置在拍摄的图像中标示并进行展示。上述实施方式对计算所得的泄漏点位置进行修正，以便得到更加准确的检测结果。风向和风速的采样时间可选泄漏点对应的采样时间。可选地，在激光扫描仪进行扫描并采样的过程中，同步采样风向和风速，确定泄漏点后，再调取相应的数据进行修正。进一步地，若扫描并采样的过程中，采样得到的各个风向或风速数值差异超过相应预设阈值，则可采用平均风向或平均风速进行修正。进一步地，对泄漏点位置进行修正，具体包括：根据风向风速传感器测量的风向和风速，建立风向量，确定风向量在垂直激光方向的切向分量；根据切向分量的方向及大小，确定由于风向量引入的偏移量；确定由于浮力引入的偏移量；基于风向量引入的偏移量和浮力引入的偏移量，修正泄漏点位置。泄漏气体的扩散方向和扩散速度会受到多种因素的影响，本发明主要考虑气体密度和风对气体扩散的影响，进而对泄漏点检测结果进行调整。无风条件下，即风向风速传感器测量的风速为零的情况下，只考虑浮力的影响。气体刚发生泄漏时，泄漏点的甲烷气体浓度值较高，且气压高于大气压，因此此时泄漏气体的运动以向四周扩散为主。当泄漏持续一段时间，气压逐渐平衡时，甲烷气体受到的浮力大于重力，合力向上，气体上升。随着泄漏的甲烷气体不断被空气稀释，上升的趋势逐渐减弱。根据阿基米德原理，浮力公式为，其中ρ为空气密度，g为重力加速度，为甲烷气体加入空气中后排开空气的体积。重力公式为，其中m为甲烷气体的质量。根据牛顿第二定律，计算可得，其中a为甲烷气体向上运动的加速度。随着甲烷气体的稀释，气体向上的加速度逐渐减少。由于检测到的泄漏点浓度都很高，甲烷气体未被充分稀释，因此该过程可近似为加速时间很短的匀加速运动。优选地，对气体泄漏点做似然估计，可找出概率最高的泄漏点真实位置，确定由于浮力引入的偏移量。有风条件下，风对于气体扩散有两个主要性质，传递性质和稀释性质。风速越大，空气对泄漏气体的传递性质和稀释性质越强，泄漏气体的偏移范围越广，但泄漏气体浓度下降也越快。由于找到的泄漏点浓度较大，在以这个结果为前提下，风速大时泄漏点偏移量不会很大，风速小时泄漏点反而容易以较小速度偏移到相对较远位置。对风向量做径向和切向的分解，，其中垂直于激光方向的切向分量对泄漏点的位置产生偏移效果，如图3所示，根据的大小可对泄漏气体的偏移量进行评估，结合的方向可以进一步确定泄漏点的位置。优选地，可通过分段函数的方式建立切向分量与风向量引入的偏移量之间的映射关系，的大小从0到预设风速阈值的区间范围内，偏移量大小随的大小增加而增加，的大小超过预设风速阈值，偏移量大小随的大小增加而减小。预设风速阈值的取值优选在1m/s~5m/s之间。可选地，该天然气泄漏点定位方法中，激光扫描仪和摄像头同步转动。通过同步转动的方式，例如将激光扫描仪搭载在可转动的摄像头上，可减少所需机械结构，且有利于在根据极大值点判断出现泄漏后，在相应的图像位置中进行标示。进一步地，摄像头拍摄图像的触发条件为激光扫描仪确定激光途径区域的甲烷气体浓度值超过预设的第二浓度阈值，即，摄像头当且仅当在激光扫描仪确定激光途径区域的甲烷气体浓度值超过预设的第二浓度阈值时拍摄图像。激光扫描仪和摄像头同步转动，因此激光扫描仪在运转过程中摄像头的视频流也是不断变化的，当每个空间窗口的泄漏点计算完成时，视频流已经无法捕捉到泄漏点所在的区域，而实时保存所有图片又需要占用大量存储空间，并不现实。因此，上述实施方式中，在扫描甲烷气体浓度、记录各点浓度值的同时，若甲烷气体浓度超过预设的第二浓度阈值，则对当前方向的视频图像进行捕捉，以备后用。由于扫描仪和摄像头的相对位置固定，因此扫描点在视频图像中的位置是容易确定的。进一步地，步骤102中，对于每一个空间窗口，在判断当前空间窗口是否出现泄漏点之后，若未出现泄漏点，则在继续扫描下一个空间窗口之前，删除摄像头拍摄的图像，若出现泄漏点，则在继续扫描下一个空间窗口之前，删除未标示泄漏点位置的图像。该实施方式中，每个空间窗口的泄漏点计算完成后，泄漏点所对应图像将被标记上泄漏点位置并反馈至使用者，而不包含泄漏点的图像将会被删除，以保持对硬盘占用的稳定。如图4所示，本发明还提供了一种天然气泄漏点定位装置，包括：激光扫描仪1、摄像头2和控制模块3，其中：激光扫描仪1用于发射激光并采样反射光，进行光谱分析，确定激光途径区域的甲烷气体浓度值；摄像头2用于拍摄图像；控制模块3与激光扫描仪1、摄像头2信号连接，用于获取激光扫描仪1及摄像头2采集的数据，控制模块3包括设置单元300和分析单元301；设置单元300用于设置激光扫描仪进行扫描的工作参数，包括设置激光波长、扫描轨迹、移动速率、采样频率及空间窗口；分析单元301用于在激光扫描仪执行扫描时，对于每一个空间窗口进行如下操作：在当前空间窗口的采样结束后，处理采样得到的各个甲烷气体浓度值，计算对应当前空间窗口的甲烷气体浓度空间分布矩阵；基于甲烷气体浓度空间分布矩阵，确定所有极大值点；根据确定的各个极大值点判断是否出现泄漏点，若出现泄漏点，则在摄像头拍摄的图像中标示泄漏点位置并进行展示，否则继续扫描。上述天然气泄漏点定位装置的各单元之间的信息交互、执行过程等内容，由于与本发明方法实施例基于同一构思，具体内容可参见本发明方法实施例中的叙述，此处不再赘述。以上各实施例中，硬件单元可以通过机械方式或电气方式实现。例如，一个硬件单元可以包括永久性专用的电路或逻辑来完成相应操作。硬件单元还可以包括可编程逻辑或电路，可以由软件进行临时的设置以完成相应操作。具体的实现方式可以基于成本和时间上的考虑来确定。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
