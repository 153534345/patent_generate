标题title
故障诊断系统
摘要abst
本申请公开了一种故障诊断系统，包括采集信息处理器、ADC芯片组、切换开关组和采集控制器。采集信息处理器通过控制切换开关组的切换开关引脚构成现场信号采集链路和诊断信号链路；还根据现场采集数据确定AI采集系统的采样电阻和/或采集链路是否发生故障。切换开关组一端与目标设备相连，另一端与ADC芯片组相连；ADC芯片组对接收信号进行模数转换，并将转换所得数据发送至采集信息处理器；ADC芯片组的ADC芯片数量及每个ADC芯片的输入通道数由信号采集路数确定。采集控制器用于控制ADC芯片组的时序控制以及现场信号采集。本申请在低成本基础上，实现了1oo1架构下对SISAI采集系统进行符合SIL3要求的故障诊断。
权利要求书clms
1.一种故障诊断系统，其特征在于，应用于SIS的AI采集系统，包括采集信息处理器、ADC芯片组、切换开关组和采集控制器；所述采集信息处理器用于通过控制所述切换开关组中各切换开关的引脚构成现场信号采集链路和诊断信号链路；还用于通过根据现场信号采集数据确定所述AI采集系统的采样电阻和/或采集链路是否发生故障；所述切换开关组的一端与目标设备相连，另一端与所述ADC芯片组的输入通道相连；所述ADC芯片组用于对接收到的信号进行模数转换，并将转换所得数据发送至所述采集信息处理器；所述ADC芯片组中的ADC芯片数量以及每个ADC芯片的输入通道数由信号采集路数确定；所述采集控制器用于控制所述ADC芯片组的时序控制以及现场信号采集。2.根据权利要求1所述的故障诊断系统，其特征在于，所述ADC芯片组包括第一ADC芯片、第二ADC芯片、第三ADC芯片和第四ADC芯片；所述第一ADC芯片、所述第二ADC芯片、所述第三ADC芯片和所述第四ADC芯片并联，且所述第一ADC芯片、所述第二ADC芯片、所述第三ADC芯片和所述第四ADC芯片采用相同的架构。3.根据权利要求1所述的故障诊断系统，其特征在于，还包括设置在所述采集信息处理器和所述采集控制器之间的隔离器。4.根据权利要求1所述的故障诊断系统，其特征在于，所述目标设备为第一电阻和第二电阻；所述第一电阻和所述第二电阻为将所述采样电阻按照预设比例关系分成的两个电阻；相应的；所述采集信息处理器用于通过比较所述第一电阻和所述第二电阻采集的电压值的比例值是否与所述预设比例关系一致，确定所述AI采集系统的采样电阻是否发生故障。5.根据权利要求4所述的故障诊断系统，其特征在于，所述第一电阻包括一通道第一电阻和二通道第一电阻；所述第二电阻包括一通道第二电阻和二通道第二电阻；所述一通道第一电阻和所述一通道第二电阻部署在第一采集通道，所述二通道第一电阻和所述二通道第二电阻部署在第二采集通道；所述切换开关组包括均包含3个引脚的第一模拟开关、第二模拟开关、第三模拟开关和第四模拟开关；所述第一模拟开关的第一引脚与所述一通道第二电阻的一端相连、第二引脚连通所述诊断信号链路、第三引脚与所述第三模拟开关的第一引脚相连；所述第二模拟开关的第一引脚同时与所述一通道第二电阻的另一端和所述一通道第一电阻的一端相连、第二引脚连通所述诊断信号链路、第三引脚与所述第四模拟开关的第一引脚相连；所述第三模拟开关的第二引脚与所述二通道第二电阻的一端相连、第三引脚与所述ADC芯片组的第一输入通道相连；所述第四模拟开关的第二引脚同时与所述二通道第二电阻的另一端和所述二通道第一电阻的一端相连、第三引脚与所述ADC芯片组的第二输入通道相连；所述一通道第一电阻的另一端和所述二通道第一电阻的另一端均接地。6.根据权利要求1所述的故障诊断系统，其特征在于，所述目标设备为多通道的模数转换器，所述模数转换器的每组通道总数与所述ADC芯片组中每个ADC芯片的输入通道数相同；所述模数转换器的组数与所述ADC芯片组的ADC芯片总数相同；所述模数转换器的每个输出通道连接在所述切换开关组中对应的开关引脚上，以通过所述切换开关组所构成的通道与所述ADC芯片组的输入通道相连通；所述模数转换器用于为所述ADC芯片组提供诊断电压信号；相应的，所述采集信息处理器用于通过判断所述ADC芯片组输出的电压信号和所述模数转换器输出电压信号是否一致，确定所述AI采集系统的采样链路是否发生故障。7.根据权利要求6所述的故障诊断系统，其特征在于，所述切换开关组包括均包含3个引脚的第一模拟开关、第二模拟开关、第三模拟开关和第四模拟开关；所述第一模拟开关的第一引脚用于连通所述现场信号采集链路、第二引脚与所述模数转换器的第一输出通道相连、第三引脚与所述第三模拟开关的第一引脚相连；所述第二模拟开关的第一引脚用于连通所述现场信号采集链路、第二引脚与所述模数转换器的第二输出通道相连、第三引脚与所述第四模拟开关的第一引脚相连；所述第三模拟开关的第二引脚用于连通所述现场信号采集链路、第三引脚与所述ADC芯片组的第一输入通道相连；所述第四模拟开关的第二引脚用于连通所述现场信号采集链路、第三引脚与所述ADC芯片组的第二输入通道相连。8.根据权利要求6所述的故障诊断系统，其特征在于，所述采集信息处理器还用于按照预设诊断通道DAC设置码值规则控制所述模数转换器的预设置值。9.根据权利要求6所述的故障诊断系统，其特征在于，所述采集信息处理器还用于：控制所述ADC芯片组的各输入通道对应的所述切换开关组的开关引脚置于DAC测试图案状态，并按照当前诊断步数设置所述模数转换器的每个输出通道的电压值；通过判断各输入通道采集的输入电压信息与预设期望值是否一致，以对现场信号采集通道进行故障诊断；当检测到对所述现场信号采集通道的故障诊断操作结束，控制所述ADC芯片组的各输入通道对应的所述切换开关组的开关引脚置于正常采集信号状态。10.根据权利要求6所述的故障诊断系统，其特征在于，所述采集信息处理器还用于：控制所述ADC芯片组的各输入通道对应的所述切换开关组的开关引脚置于DAC测试图案状态；若当前诊断步数指示为ADC奇数通道的串扰诊断，则设置所述模数转换器目标组中的奇数输出通道和偶数输出通道输出第一特定电压信号，其余组的输出通道输出第二特定电压信号；若当前诊断步数指示为ADC偶数通道的串扰诊断，则设置所述模数转换器目标组中的奇数输出通道和偶数输出通道输出第三特定电压信号，其余组的输出通道输出第四特定电压信号；通过判断各输入通道采集的输入电压信息与预设期望值是否一致，以对所述ADC芯片组的各输入通道间的串扰进行诊断；当检测到通道间串扰的故障诊断操作结束，控制所述ADC芯片组的各输入通道对应的所述切换开关组的开关引脚置于正常采集信号状态。
说明书desc
技术领域本申请涉及SIS领域，特别是涉及一种故障诊断系统。背景技术众所周知，DCS和SIS均是生产过程中不可缺少设备，DCS用于生产过程的连续测量、常规控制、操作控制管理，保证生产装置的平稳运行。DCS为动态系统，其始终对过程变量连续进行检测、运算和控制，对生产过程进行动态控制，确保产品的质量和产量。而SIS用于监视生产装置的运行状况，对出现异常工况迅速进行处理，使危害降到最低，使人员和生产装置处于安全状态。SIS为静态系统，正常工况时，它始终监视生产装置的运行，系统输出不变，对生产过程不产生影响，非正常工况下时，其将按照预先的设计进行逻辑运算，实现生产装置安全联锁或停车。所以某些应用场景中可使用DCS可替代SIS，但是，SIS比DCS在可靠性、可用性上要求更严格，IEC61508、IEC61511、ISAS84.01、SH/T3018等标准中，推荐SIS与DCS硬件独立设置。所以某些特定的现场需要配备独立的SIS，不可以使用DCS进行替代。举例来说，涉及毒性气体、液化气体、剧毒液体的一级或者二级重大危险源，需配备独立的SIS，或者是仪表回路等级在SIL1及以上的需要独立的SIS来消除安全风险。对于上述需要独立配置SIS的应用场景，各家SIS厂商均按照各自对IEC61508标准的理解，设计有自成体系的SIS。为满足SIL3的认证要求，绝大部分厂家针对AI采集系统采用冗余比较的形式进行诊断，具体是将2个或者3个彼此独立的AI采集系统采集到的数据进行比较，从而达到在故障裕度一定的前提下，故障诊断覆盖率满足SIL3的要求。但是，其必须依靠冗余的系统才能实现诊断的目标。对于故障裕度为0的1oo1型系统，所谓的1oo1型系统是指一个通道有1个AI采集系统，这种方法很明显不适用。此外，增加冗余系统还会增加SIS成本。鉴于此，如何在低成本的基础上，实现1oo1架构下对SIS的AI采集系统进行符合SIL3要求的故障诊断，是所属领域技术人员需要解决的技术问题。发明内容本申请提供了一种故障诊断系统，在低成本的基础上，实现1oo1架构下对SIS的AI采集系统进行符合SIL3要求的故障诊断。为解决上述技术问题，本发明实施例提供以下技术方案：本发明实施例提供了一种故障诊断系统，应用于SIS的AI采集系统，包括采集信息处理器、ADC芯片组、切换开关组和采集控制器；所述采集信息处理器用于通过控制所述切换开关组中各切换开关的引脚构成现场信号采集链路和诊断信号链路；还用于通过根据现场信号采集数据确定所述AI采集系统的采样电阻和/或采集链路是否发生故障；所述切换开关组的一端与目标设备相连，另一端与所述ADC芯片组的输入通道相连；所述ADC芯片组用于对接收到的信号进行模数转换，并将转换所得数据发送至所述采集信息处理器；所述ADC芯片组中的ADC芯片数量以及每个ADC芯片的输入通道数由信号采集路数确定；所述采集控制器用于控制所述ADC芯片组的时序控制以及现场信号采集。可选的，所述ADC芯片组包括第一ADC芯片、第二ADC芯片、第三ADC芯片和第四ADC芯片；所述第一ADC芯片、所述第二ADC芯片、所述第三ADC芯片和所述第四ADC芯片并联，且所述第一ADC芯片、所述第二ADC芯片、所述第三ADC芯片和所述第四ADC芯片采用相同的架构。可选的，还包括设置在所述采集信息处理器和所述采集控制器之间的隔离器。可选的，所述目标设备为第一电阻和第二电阻；所述第一电阻和所述第二电阻为将所述采样电阻按照预设比例关系分成的两个电阻；相应的；所述采集信息处理器用于通过比较所述第一电阻和所述第二电阻采集的电压值的比例值是否与所述预设比例关系一致，确定所述AI采集系统的采样电阻是否发生故障。可选的，所述第一电阻包括一通道第一电阻和二通道第一电阻；所述第二电阻包括一通道第二电阻和二通道第二电阻；所述一通道第一电阻和所述一通道第二电阻部署在第一采集通道，所述二通道第一电阻和所述二通道第二电阻部署在第二采集通道；所述切换开关组包括均包含3个引脚的第一模拟开关、第二模拟开关、第三模拟开关和第四模拟开关；所述第一模拟开关的第一引脚与所述一通道第二电阻的一端相连、第二引脚连通所述诊断信号链路、第三引脚与所述第三模拟开关的第一引脚相连；所述第二模拟开关的第一引脚同时与所述一通道第二电阻的另一端和所述一通道第一电阻的一端相连、第二引脚连通所述诊断信号链路、第三引脚与所述第四模拟开关的第一引脚相连；所述第三模拟开关的第二引脚与所述二通道第二电阻的一端相连、第三引脚与所述ADC芯片组的第一输入通道相连；所述第四模拟开关的第二引脚同时与所述二通道第二电阻的另一端和所述二通道第一电阻的一端相连、第三引脚与所述ADC芯片组的第二输入通道相连；所述一通道第一电阻的另一端和所述二通道第一电阻的另一端均接地。可选的，所述目标设备为多通道的模数转换器，所述模数转换器的每组通道总数与所述ADC芯片组中每个ADC芯片的输入通道数相同；所述模数转换器的组数与所述ADC芯片组的ADC芯片总数相同；所述模数转换器的每个输出通道连接在所述切换开关组中对应的开关引脚上，以通过所述切换开关组所构成的通道与所述ADC芯片组的输入通道相连通；所述模数转换器用于为所述ADC芯片组提供诊断电压信号；相应的，所述采集信息处理器用于通过判断所述ADC芯片组输出的电压信号和所述模数转换器输出电压信号是否一致，确定所述AI采集系统的采样链路是否发生故障。可选的，所述切换开关组包括均包含3个引脚的第一模拟开关、第二模拟开关、第三模拟开关和第四模拟开关；所述第一模拟开关的第一引脚用于连通所述现场信号采集链路、第二引脚与所述模数转换器的第一输出通道相连、第三引脚与所述第三模拟开关的第一引脚相连；所述第二模拟开关的第一引脚用于连通所述现场信号采集链路、第二引脚与所述模数转换器的第二输出通道相连、第三引脚与所述第四模拟开关的第一引脚相连；所述第三模拟开关的第二引脚用于连通所述现场信号采集链路、第三引脚与所述ADC芯片组的第一输入通道相连；所述第四模拟开关的第二引脚用于连通所述现场信号采集链路、第三引脚与所述ADC芯片组的第二输入通道相连。可选的，所述采集信息处理器还用于按照预设诊断通道DAC设置码值规则控制所述模数转换器的预设置值。可选的，所述采集信息处理器还用于：控制所述ADC芯片组的各输入通道对应的所述切换开关组的开关引脚置于DAC测试图案状态，并按照当前诊断步数设置所述模数转换器的每个输出通道的电压值；通过判断各输入通道采集的输入电压信息与预设期望值是否一致，以对现场信号采集通道进行故障诊断；当检测到对所述现场信号采集通道的故障诊断操作结束，控制所述ADC芯片组的各输入通道对应的所述切换开关组的开关引脚置于正常采集信号状态。可选的，所述采集信息处理器还用于：控制所述ADC芯片组的各输入通道对应的所述切换开关组的开关引脚置于DAC测试图案状态；若当前诊断步数指示为ADC奇数通道的串扰诊断，则设置所述模数转换器目标组中的奇数输出通道和偶数输出通道输出第一特定电压信号，其余组的输出通道输出第二特定电压信号；若当前诊断步数指示为ADC偶数通道的串扰诊断，则设置所述模数转换器目标组中的奇数输出通道和偶数输出通道输出第三特定电压信号，其余组的输出通道输出第四特定电压信号；通过判断各输入通道采集的输入电压信息与预设期望值是否一致，以对所述ADC芯片组的各输入通道间的串扰进行诊断；当检测到通道间串扰的故障诊断操作结束，控制所述ADC芯片组的各输入通道对应的所述切换开关组的开关引脚置于正常采集信号状态。本申请提供的技术方案的优点在于，通过采集信息处理器控制切换开关组的不同开关引脚的切换方式可同时提供现场信号采集链路和诊断信号链路，通过对ADC芯片组的多个输入通道所采集的数据信息可对SIS的AI采集系统是否存在采样电阻或采样链路故障进行诊断，可实现对AI采集系统的快速全面诊断，诊断覆盖率可达到高要求。无需设置冗余部分，不仅降低了整个SIS系统成本，还可实现1oo1架构下对SIS的AI采集系统进行符合SIL3要求的故障诊断。应当理解的是，以上的一般描述和后文的细节描述仅是示例性的，并不能限制本公开。附图说明为了更清楚的说明本发明实施例或相关技术的技术方案，下面将对实施例或相关技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例提供的相关技术中的示例性故障诊断应用场景的框架示意图；图2为本发明实施例提供的故障诊断系统的一种具体实施方式结构图；图3为本发明实施例提供的故障诊断系统对采样电阻进行故障诊断的原理框架图；图4为本发明实施例提供的故障诊断系统对采集链路进行故障诊断的原理框架图。具体实施方式为了使本技术领域的人员更好地理解本发明方案，下面结合附图和具体实施方式对本发明作进一步的详细说明。显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本申请的说明书和权利要求书及上述附图中的术语“第一”、“第二”、“第三”、“第四”等是用于区别不同的对象，而不是用于描述特定的顺序。此外术语“包括”和“具有”以及他们任何变形，意图在于覆盖不排他的包含。例如包含了一系列步骤或单元的过程、方法、系统、产品或设备没有限定于已列出的步骤或单元，而是可包括没有列出的步骤或单元。按照IEC61508-2或者GB/T 20438.2的要求，对于安全失效分数为中要求或者高要求的，需针对DC故障、漂移、震荡这三种失效模式，给出具体的诊断措施。在标准中给出的参考设计方案为“输入比较/表决”，该诊断措施能达到的最大诊断覆盖率为99％，所谓诊断覆盖率是指进行自动诊断测试而导致的硬件威胁失效概率最低的部分，危险失效是指使安全系统处于潜在的危险或丧失功能状态的失效。但该方法的适用条件为仅当诊断测试间隔内数据流改变时有效。按照上述标准中的建议，相关技术的SIS中常用的AI采集系统结构如图1所示。在图1的诊断方案中，对于AI采集电路采用冗余的形式，每个AI采集电路分别将采集得到数据发送给数据表决组件中执行数据比较，数据表决组件的比较器对这两组数据进行比较，若数据一致，未超出预设的偏差范围，则进行数据上报。若两个冗余电路的采集值连续不一致，则认为该通道采集到的值不可靠，数据不进行上报，并置该通道的质量位为坏。对于图1中所示的故障诊断方法，其采用了冗余的采集电路，对于有低成本要求的场合，很明显多出来的这一个采集电路是不合适的。此外，对于AI型采集系统，通常采集的外部仪表信号是4-20mA信号。对于这种信号，采用冗余电路进行比较的形式，在设计上的难度较高。只有两个采集电路的采样电阻以串联的形式连接才能保证上述诊断方法的使用。然而对于串联型的采集电路，当其中某一个采样电阻开路时，很难通过技术手段对电流进行旁路而又没有采集精度损失。为了解决相关技术存在的技术弊端，本申请提供了下述技术方案。下面详细的说明本申请的各种非限制性实施方式。首先参见图2，图2为本发明实施例提供的一种故障诊断系统在一种具体实施方式下的结构示意图，本实施例是用于对SIS的AI采集系统进行故障诊断，本发明实施例可包括以下内容：故障诊断系统可包括采集信息处理器21、ADC芯片组22、切换开关组23和采集控制器24。其中，采集信息处理器21可为可以包括一个或多个处理核心，比如4核心处理器、8核心处理器，其还可为控制器、微控制器、微处理器或其他数据处理芯片等。采集信息处理器21也可以包括主处理器和协处理器，主处理器是用于对在唤醒状态下的数据进行处理的处理器，也称CPU；协处理器是用于对在待机状态下的数据进行处理的低功耗处理器。在一些实施例中，采集信息处理器21可以集成有GPU，GPU用于负责显示屏所需要显示的内容的渲染和绘制。一些实施例中，采集信息处理器21还可以包括AI处理器，该AI处理器用于处理有关机器学习的计算操作。ADC芯片组22可包括多个ADC芯片，各ADC芯片可为任何一种可实现模数转换的器件，这均不影响本申请的实现，每个ADC芯片可包括多个输入通道，ADC芯片组中的ADC芯片数量以及每个ADC芯片的输入通道数由信号采集路数确定。举例来说，ADC芯片组22可包括第一ADC芯片、第二ADC芯片、第三ADC芯片和第四ADC芯片；第一ADC芯片、第二ADC芯片、第三ADC芯片和第四ADC芯片并联，且第一ADC芯片、第二ADC芯片、第三ADC芯片和第四ADC芯片采用相同的架构。切换开关组23包括多个切换开关，切换开关组中所包含的开关数由ADC芯片组22中所包含的输入通道数或者是说整个系统所要采集信号的总路数来确定。切换开关组23可包括多个切换开关小组，每个切换开关小组又包括多个切换开关，所属领域技术人员可根据实际需求来进行设置，本申请对此不作任何限定。采集控制器24可以采用DSP、FPGA、PLA中的至少一种硬件形式来实现。在本实施例中，采集信息处理器21可用于通过控制切换开关组23中各切换开关的引脚构成现场信号采集链路和诊断信号链路；还用于通过根据现场信号采集数据确定AI采集系统的采样电阻和/或采集链路是否发生故障。本实施例根据实际需求是通过现场信号采集链路还是诊断信号链路进行数据采集，然后通过分析所采集的数据和期望数据进行比对来判断AI采集系统是否发生故障。具体的，不仅可对AI采集系统的采样电阻进行诊断，还可对采集链路进行诊断。进一步的，若诊断有故障，则可将该故障进行上报，可通过语音、邮件、报警、文字框提示等任何一种方法反馈所存在的故障。在本实施例中，切换开关组23的一端与目标设备相连，另一端与ADC芯片组22的输入通道相连。目标设备根据诊断目标进行确定，若是对采样电阻进行诊断，则目标设备为电阻元器件，若对采集链路进行诊断，目标设备为可输入电压信号的设备，如数模转化器DAC。ADC芯片组23用于对接收到的信号进行模数转换，并将转换所得数据发送至采集信息处理器21。采集控制器24可用于控制ADC芯片组的时序控制以及控制现场信号的采集操作。此外，为了进一步数据采集精度，降低干扰，还可对完成ADC转换后的现场侧数字量信号和系统侧采集控制器24之间进行隔离，也即整个系统还可包括隔离器，该隔离器设置在采集信息处理器和采集控制器之间。不可避免的，整个系统还应当包括存储器，存储器可以包括一个或多个计算机可读存储介质，该计算机可读存储介质可以是非暂态的。存储器还可包括高速随机存取存储器以及非易失性存储器，比如一个或多个磁盘存储设备、闪存存储设备。存储器在一些实施例中可以是电子设备的内部存储单元，例如服务器的硬盘。存储器在另一些实施例中也可以是电子设备的外部存储设备，例如服务器上配备的插接式硬盘，智能存储卡，安全数字卡，闪存卡等。进一步地，存储器70还可以既包括电子设备的内部存储单元也包括外部存储设备。存储器不仅可以用于存储安装于电子设备的应用软件及各类数据，例如：执行漏洞处理方法的程序的代码等，还可以用于暂时地存储已经输出或者将要输出的数据。本实施例中，存储器至少用于存储以下计算机程序，其中，该计算机程序被采集信息处理器21和采集控制器24加载并执行之后，能够实现前述任一实施例公开的故障诊断方法的相关步骤。另外，存储器所存储的资源还可以包括操作系统和数据等，存储方式可以是短暂存储或者永久存储。其中，操作系统可以包括Windows、Unix、Linux等。数据可以包括但不限于整个故障诊断过程中产生的数据等。在本发明实施例提供的技术方案中，通过采集信息处理器控制切换开关组的不同开关引脚的切换方式可同时提供现场信号采集链路和诊断信号链路，通过对ADC芯片组的多个输入通道所采集的数据信息可对SIS的AI采集系统是否存在采样电阻或采样链路故障进行诊断，可实现对AI采集系统的快速全面诊断，诊断覆盖率可达到高要求。无需设置冗余部分，不仅降低了整个SIS系统成本，还可实现1oo1架构下对SIS的AI采集系统进行符合SIL3要求的故障诊断。上述实施例对如何对SIS的AI采集系统的采样电阻进行诊断进行限定，本申请还提供了一个示意性实施例，可包括下述内容：在本实施例中，将采样电阻按照预设比例关系分成的两个电阻，也即第一电阻和第二电阻，相应的，目标设备即为第一电阻和第二电阻。在本实施例中，以ADC芯片组至少包括一块ADC芯片，且每个ADC芯片包括两个输入通道为例阐述整个故障检测系统的电路结构：由于ADC芯片组22包括两个输入通道，每个输入通道对应一个采集通道，第一电阻和第二电阻都有2个，各自需要部署在两个采集通道中，为了便于区别，可将各第一电阻称为一通道第一电阻和二通道第一电阻；2个第二电阻称为一通道第二电阻和二通道第二电阻；一通道第一电阻和一通道第二电阻部署在第一采集通道，二通道第一电阻和二通道第二电阻部署在第二采集通道。切换开关组23包括均包含3个引脚的第一模拟开关、第二模拟开关、第三模拟开关和第四模拟开关。第一模拟开关的第一引脚与一通道第二电阻的一端相连、第一模拟开关的第二引脚连通诊断信号链路、第一模拟开关的第三引脚与第三模拟开关的第一引脚相连。第二模拟开关的第一引脚同时与一通道第二电阻的另一端和一通道第一电阻的一端相连、第二模拟开关的第二引脚连通诊断信号链路、第二模拟开关的第三引脚与第四模拟开关的第一引脚相连。第三模拟开关的第二引脚与二通道第二电阻的一端相连、第三模拟开关的第三引脚与ADC芯片组22的第一输入通道相连。第四模拟开关的第二引脚同时与二通道第二电阻的另一端和二通道第一电阻的一端相连、第四模拟开关的第三引脚与ADC芯片组22的第二输入通道相连；一通道第一电阻的另一端和二通道第一电阻的另一端均接地。基于上述电路结构，采集控制器24实现ADC芯片组的各ADC芯片组的时序控制及现场信号采集。采集信息处理器21用于通过比较第一电阻和第二电阻采集的电压值的比例值是否与预设比例关系一致，确定AI采集系统的采样电阻是否发生故障，从而实现对SIS的AI采集系统的采样电阻诊断。为了使所属领域技术人员更加清楚本申请技术方案，本申请以采集信息处理器21为微处理器MCU、采集控制器24为FPGA、切换开关组包括多个模拟开关为例，结合图3，阐述通过采集32路信号进行采样电阻诊断的实现过程，可包括：在本实施例中，ADC芯片组可包括第一ADC芯片U1、第二ADC芯片U2、第三ADC芯片U3和第四ADC芯片U4；第一ADC芯片U1、第二ADC芯片U2、第三ADC芯片U3和第四ADC芯片U4并联，且第一ADC芯片U1、第二ADC芯片U2、第三ADC芯片U3和第四ADC芯片U4采用相同的架构，每个ADC芯片包括8个输入通道。由于各ADC芯片结构均相同，在图3中省略了第二ADC芯片U2、第三ADC芯片U3。对每个ADC芯片，每个输入通道对应一个采集通道，包括一个切换开关小组和一个采样电阻，每个切换开关小组包括2个模拟开关。对每个采样电阻，本实施例将其按比例划分为两个电阻，也即通过增加R1电阻来完成R2电阻的诊断，现场信号采集和采样电阻测试图案同时进行，R2电阻两端电压为V2，R1电阻两端电压为V1。V1、V2处的采样电阻的阻值例如可130Ω，电阻可将电流信号转换为电压信号，用于切换现场信号和诊断信号的切换的切换开关小组例如可采用ADG5436，其包括S1、S2、S3和S4模拟开关，ADC芯片例如可采用AD7779的芯片。IN1-IN8对应ADC的8个信号输入通道。各元器件的接线可参阅图3所示，图中虚线为诊断信号通路，实线为现场信号采集通路。本实施例阐述了一个ADC芯片的两个输入通道对应的元器件接线关系，该芯片中的其他输入通道以及其他ADC芯片的输入通道对应的接线关系可参阅相应描述，此处便不再赘述。隔离器isolation完成ADC转换后的现场侧数字量信号和系统侧FPGA之间的隔离。FPGA实现ADC芯片组的时序控制及现场信号采集。MCU实现从FPGA中固定的寄存器地址读取现场信号采集值，并进行判断比较及故障上报。对于图3中所描述的采样电阻测试图案，通过将采样电阻分成两个具有一定比例关系的电阻R1和R2，通过比较两个采样电阻采集到的电压值是否与预设比例关系一致，从而判断采样电阻是否发生故障。由于该部分电路的故障裕度为0，为满足高诊断覆盖率的要求，其诊断随外部信号采集实时诊断，当采样电阻发生故障时，可实时上报相关故障。上述实施例对如何对SIS的AI采集系统的采集链路进行诊断进行限定，采集链路可包括采集链路ADC芯片组合数据存储RAM，本申请还提供了一个示意性实施例，可包括下述内容：在本实施例中，目标设备可为多通道的模数转换器DAC，模数转换器的每组通道总数与ADC芯片组22中每个ADC芯片的输入通道数相同；模数转换器的组数与ADC芯片组的ADC芯片总数相同。以采集32路信号为例，ADC芯片组包括4个ADC芯片，每个ADC芯片包括8个输入通道，则模数转换器DAC包括4组输出通道，每组包括8个输出通道。模数转换器的每个输出通道连接在切换开关组中对应的开关引脚上，以通过切换开关组所构成的通道与ADC芯片组的输入通道相连通；模数转换器用于为ADC芯片组提供诊断电压信号。以每个ADC芯片组包括一个ADC芯片，每个ADC芯片包括2个输出通道为例，模数转化器的各输出通道与切换开关组的连接关系为：切换开关组包括均包含3个引脚的第一模拟开关S1、第二模拟开关S2、第三模拟开关S3和第四模拟开关S4；第一模拟开关S1的第一引脚用于连通现场信号采集链路、第一模拟开关S1的第二引脚与模数转换器的第一输出通道相连、第一模拟开关S1的第三引脚与第三模拟开关的第一引脚相连。第二模拟开关S2的第一引脚用于连通现场信号采集链路、第二模拟开关S2的第二引脚与模数转换器的第二输出通道相连、第二模拟开关S2的第三引脚与第四模拟开关S4的第一引脚相连；第三模拟开关S3的第二引脚用于连通现场信号采集链路、第三模拟开关S3的第三引脚与ADC芯片组22的第一输入通道相连；第四模拟开关S4的第二引脚用于连通现场信号采集链路、第四模拟开关S4的第三引脚与ADC芯片组22的第二输入通道相连。在本实施例中，采集信息处理器21可用于通过判断ADC芯片组输出的电压信号和模数转换器输出电压信号是否一致，确定AI采集系统的采样链路是否发生故障。采集信息处理器21还用于按照预设诊断通道DAC设置码值规则控制模数转换器的预设置值，也即可按照表1中的诊断通道DAC设置码值的两列设置DAC的电压。为了使所述领域技术人员更加清楚明白本申请的技术方案，本申请以采集信息处理器21为微处理器MCU、采集控制器24为FPGA、切换开关组包括多个模拟开关为例，结合图3，阐述通过采集32路信号进行采集链路诊断的实现过程，可包括：在本实施例中，ADC芯片组可包括第一ADC芯片U1、第二ADC芯片U2、第三ADC芯片U3和第四ADC芯片U4；第一ADC芯片U1、第二ADC芯片U2、第三ADC芯片U3和第四ADC芯片U4并联，且第一ADC芯片U1、第二ADC芯片U2、第三ADC芯片U3和第四ADC芯片U4采用相同的架构，每个ADC芯片包括8个输入通道。由于各ADC芯片结构均相同，图4中省略了第二ADC芯片U2、第三ADC芯片U3。对每个ADC芯片，每个输入通道对应一个采集通道，包括一个切换开关小组和一个采样电阻，每个切换开关小组包括2个模拟开关。用于切换现场信号和诊断信号的切换的切换开关小组例如可采用ADG5436，ADC芯片例如可采用AD7779的芯片。IN1-IN8对应ADC的8个信号输入通道。各元器件的接线可参阅图4所示，图中虚线为诊断信号通路，实线为现场信号采集通路。本实施例阐述了一个ADC芯片的两个输入通道对应的元器件接线关系，该芯片中的其他输入通道以及其他ADC芯片的输入通道对应的接线关系可参阅相应描述，此处便不再赘述。ADC测试图案原理如图4所示，使用1片8通道DAC，为4片ADC提供相同的诊断电压信号，4片ADC分别根据所采电压信号与DAC输出电压信号是否一致完成诊断结果判定。在进行该测试图案时，模拟开关S1和S2需分别提前由1脚切换到2脚，然后按照表1中所示电压值也即按照诊断通道DAC设置码值这两列设置进行DAC预设置值的输出。由于4片ADC处于并行状态，因此一次诊断即可完成4个芯片的相同通道的诊断。表1预设诊断通道DAC设置码值规则基于上述实施例，本申请还提供了仅针对现场信号采集通道进行诊断的漫步诊断方式，也即针对bit位的诊断，漫步诊断只关注V2所对应通道，不需要关注V1所对应通道，V1和V2分别对应的是每个CH采集通道上的两个采样电阻的端电压。其中V2在代码中作为实际传感器值进行处理，V1作为V2的诊断电压处理，正常情况下二者相等。具体的诊断步骤描述如下，也即采集信息处理器21还用于：控制ADC芯片组的各输入通道对应的切换开关组的开关引脚置于DAC测试图案状态，并按照当前诊断步数设置模数转换器的每个输出通道的电压值；通过判断各输入通道采集的输入电压信息与预设期望值是否一致，以对现场信号采集通道进行故障诊断；当检测到对现场信号采集通道的故障诊断操作结束，控制ADC芯片组的各输入通道对应的切换开关组的开关引脚置于正常采集信号状态。在本实施例中，结合图4，采集信息处理器21MCU进入诊断中断服务程序后，MCU对诊断步数进行累加，当诊断步数达到上限后自动清零，并依据当前诊断步数信息确定在本步中执行哪些操作，也即MCU控制DAC输出不同的电压值。MCU控制32个输入通道对应的模拟开关置于DAC测试图案状态，即断开ADC与现场信号间的连接，诊断时，图4中的S1、S2均接2脚，S3、S4均接1脚。正常采集时，S1、S2接1脚，S3、S4同步在前16通道和后16通道间切换。然后按照当前步数设置DAC芯片的8个通道的输入电压，4个ADC芯片中的当前被诊断通道输入电压为Vref1～Vref10中的某个电压，其余通道电压值均为Vref11；其余通道指的是ADC剩下的7个通道，每次诊断只能诊一个通道。电压设置值的设置方式可基于表2所示，该电压值是根据码值结算出来的，和产品的采集精度有关系。对于采集精度为0.2％，对应前10bit，因此每次只闭环一个bit就可以得到10组电压值。32路通道电路采集输入电压，并判断结果是否与期望值一致；通过以上操作完成4个ADC芯片的单个采集通道的诊断，MCU控制32路输入通道的模拟开关置于正常采集对应的状态。中断结束，MCU返回正常采集状态。参考电压Vref按“walking-bit”方法共选取10个不同的值Vref1～Vref10，每次进入诊断中断时使用其中1个不同的Vref值。执行40次诊断中断后，完成A/D转换检测。对上述漫步诊断步骤进行归纳，可整理为如表2所示的诊断步骤。在本实施例中，Vref1～Vref10的选取基于漫步诊断的方法，来检测ADC数据线的DC故障。由于ADC芯片的限制，在采集正电压时，最高位始终为0，因此不包含，对于24位的ADC，采用高10位数据线做漫步诊断即可，低13位为噪声不必关心，即：Vref 1对应AD转换后输出0100 0000 000x xxxx xxxx xxxx；Vref 2对应AD转换后输出0010 0000 000x xxxx xxxx xxxx；Vref 3对应AD转换后输出0001 0000 000x xxxx xxxx xxxx；Vref 4对应AD转换后输出0000 1000 000x xxxx xxxx xxxx；Vref 5对应AD转换后输出0000 0100 000x xxxx xxxx xxxx；Vref 6对应AD转换后输出0000 0010 000x xxxx xxxx xxxx；Vref 7对应AD转换后输出0000 0001 000x xxxx xxxx xxxx；Vref 8对应AD转换后输出0000 0000 100x xxxx xxxx xxxx；Vref 9对应AD转换后输出0000 0000 010x xxxx xxxx xxxx；Vref 10对应AD转换后输出0000 0000 001x xxxx xxxx xxxx。表2漫步诊断步骤表本实施例还对ADC芯片组的各输入通道间相互扰动量大小进行诊断，也即进行通道间串扰诊断，ADC的各输入通道包括采集通道+诊断通道间串扰检测的具体诊断步骤描述如下，也即采集信息处理器还可用于：控制ADC芯片组的各输入通道对应的切换开关组的开关引脚置于DAC测试图案状态；若当前诊断步数指示为ADC奇数通道的串扰诊断，则设置模数转换器目标组中的奇数输出通道和偶数输出通道输出第一特定电压信号，其余组的输出通道输出第二特定电压信号；若当前诊断步数指示为ADC偶数通道的串扰诊断，则设置模数转换器目标组中的奇数输出通道和偶数输出通道输出第三特定电压信号，其余组的输出通道输出第四特定电压信号；通过判断各输入通道采集的输入电压信息与预设期望值是否一致，以对ADC芯片组的各输入通道间的串扰进行诊断；当检测到通道间串扰的故障诊断操作结束，控制ADC芯片组的各输入通道对应的切换开关组的开关引脚置于正常采集信号状态。在本实施例中，结合图4，采集信息处理器21MCU进入诊断中断服务程序后，MCU对诊断步数进行累加，当诊断步数达到上限后自动清零，并依据当前诊断步数信息确定在本步中执行哪些操作，也即MCU控制DAC输出不同的电压值。MCU控制32个输入通道对应的模拟开关置于DAC测试图案状态，即断开ADC与现场信号间的连接，诊断时，图4中的S1、S2均接2脚，S3、S4均接1脚。正常采集时，S1、S2接1脚，S3、S4同步在前16通道和后16通道间切换。若当前诊断步数指示为ADC奇数通道的串扰诊断，则设置DAC芯片的OUTx和OUTy输出一个特定电压信号Vref12，向剩余3组通道输出零值；若当前诊断步数指示为ADC偶数通道的串扰诊断，则设置DAC芯片的OUTx和OUTy输出一个特定电压信号Vref13，向剩余3组通道输出零值。32路通道电路采集对应的输入电压，并判断结果是否与期望值一致。本步诊断完成，MCU控制32路输入通道对应的模拟开关置于正常采集的状态。按照上述步骤执行8次诊断中断后，即完成了对ADC1～ADC4的8个输入通道间串扰的检测。对上述通道间串扰的诊断步骤进行归纳，可整理为如表3所示的诊断步骤。表3通道间串扰诊断步骤表本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其它实施例的不同之处，各个实施例之间相同或相似部分互相参见即可。专业人员还可以进一步意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、计算机软件或者二者的结合来实现，为了清楚地说明硬件和软件的可互换性，在上述说明中已经按照功能一般性地描述了各示例的组成及步骤。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本发明的范围。以上对本申请所提供的一种故障诊断系统进行了详细介绍。本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想。应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以对本申请进行若干改进和修饰，这些改进和修饰也落入本申请权利要求的保护范围内。
