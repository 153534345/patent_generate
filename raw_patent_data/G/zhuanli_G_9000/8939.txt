标题title
一种基于三方纵向联邦的LOF异常检测方法及系统
摘要abst
本申请公开了一种基于三方纵向联邦的LOF异常检测方法及系统，所述方法包括：通过获得所述第一数据方和所述第二数据方的交集样本ID；获得所述第一距离数据集；获得所述第二距离数据集；获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合；获得第一预定Hash方法；获得第三样本集合和第四样本集合；获得第五样本集合；计算获得LOF参数信息；获得LOF异常得分。解决了现有技术中存在数据持有者要求在不泄露自有数据的基础上进行异常检测的技术问题。达到了通过联邦学习实现共同建模，帮助数据持有者不泄露自有数据进行异常检测的技术效果。
权利要求书clms
1.一种基于三方纵向联邦的LOF异常检测方法，其中，所述方法包括：对第一数据方和第二数据方的样本ID进行求交运算，获得所述第一数据方和所述第二数据方的交集样本ID；获得所述第一数据方的各个样本数据在所述第一数据方特征下的第一距离数据集；获得所述第二数据方的各个样本数据在所述第二数据方特征下的第二距离数据集；对所述第一距离数据集和所述第二距离数据集进行拆分，获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合；获得第一预定Hash方法；所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，获得第三样本集合和第四样本集合；将所述第三样本集合和所述第四样本集合发送给协调计算方，所述协调计算方对所述第三样本集合和所述第四样本集合进行加和，获得第五样本集合；根据所述第五样本集合，计算获得LOF参数信息；根据所述LOF参数信息，获得LOF异常得分。2.如权利要求1所述的方法，其中，所述对第一数据方和第二数据方的样本ID进行求交运算，获得所述第一数据方和所述第二数据方的交集样本ID，还包括：判断所述第一数据方和所述第二数据方是否要求隐藏非交集样本ID；如果所述第一数据方和所述第二数据方要求隐藏非交集样本ID，基于RSA加密的隐私求交方法对所述第一数据方和所述第二数据方进行求交，获得所述第一数据方和所述第二数据方的交集样本ID。3.如权利要求1所述的方法，其中，所述对所述第一距离数据集和所述第二距离数据集进行拆分，获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合，包括：所述第一距离数据集记作DB，所述第二距离数据集记作DC，均为N*N大小的矩阵，其中，N为样本数；所述第一数据方和所述第二数据方使用秘密共享方法，将DB，DC拆成DB1，DB2，DC1，DC2，其中，DB=DB1+DB2、DC=DC1+DC2；所述第一数据方将DB2发送给所述第二数据方；所述第二数据方将DC1发送给所述第一数据方；所述第一数据方将DB1DC1加和成为D1，其中，所述D1为所述第一样本集合；所述第二数据方将DB2DC2加和成为D2，其中，所述D2为所述第二样本集合。4.如权利要求1所述的方法，其中，所述方法包括：判断所述第一数据方和所述第二数据方的ID次序是否统一；如果所述第一数据方和所述第二数据方的ID次序不统一，按照样本ID进行加和。5.如权利要求1所述的方法，其中，所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，获得第三样本集合和第四样本集合之后，包括：获得映射表，对所述映射表进行保存。6.如权利要求5所述的方法，其中，所述根据所述LOF参数信息，获得LOF异常得分之后，包括：根据所述LOF异常得分，获得第一样本ID，所述第一样本ID与所述LOF异常得分相对应；所述协调计算方将所述LOF异常得分同所述第一样本ID的Hash值一同返回给所述第一数据方和所述第二数据方；所述第一数据方和所述第二数据方根据所述映射表将所述Hash值映射回所述第一样本ID。7.一种基于三方纵向联邦的LOF异常检测系统，其中，所述系统包括：第一获得单元：所述第一获得单元用于对第一数据方和第二数据方的样本ID进行求交运算，获得所述第一数据方和所述第二数据方的交集样本ID；第二获得单元：所述第二获得单元用于获得所述第一数据方的各个样本数据在所述第一数据方特征下的第一距离数据集；第三获得单元：所述第三获得单元用于获得所述第二数据方的各个样本数据在所述第二数据方特征下的第二距离数据集；第四获得单元：所述第四获得单元用于对所述第一距离数据集和所述第二距离数据集进行拆分，获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合；第五获得单元：所述第五获得单元用于获得第一预定Hash方法；第六获得单元：所述第六获得单元用于所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，获得第三样本集合和第四样本集合；第七获得单元：所述第七获得单元用于将所述第三样本集合和所述第四样本集合发送给协调计算方，所述协调计算方对所述第三样本集合和所述第四样本集合进行加和，获得第五样本集合；第八获得单元：所述第八获得单元用于根据所述第五样本集合，计算获得LOF参数信息；第九获得单元：所述第九获得单元用于根据所述LOF参数信息，获得LOF异常得分。8.一种基于三方纵向联邦的LOF异常检测系统，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其中，所述处理器执行所述程序时实现权利要求1~6任一项所述方法的步骤。
说明书desc
技术领域本发明涉及计算机领域，尤其涉及一种基于三方纵向联邦的LOF异常检测方法及系统。背景技术大规模数据收集大幅提升了机器学习算法的性能，实现了经济效益和社会效益的共赢，但也令个人隐私保护面临更大的风险与挑战，机器学习的训练模式主要分为集中学习和联邦学习两类，前者在模型训练前需统一收集各方数据，尽管易于部署，却存在极大数据隐私与安全隐患；后者实现了将各方数据保留在本地的同时进行模型训练。金融风控领域中面临的一大问题即金融欺诈，网络犯罪分子开始采用新技术，扩大攻击的规模、增加攻击的复杂性。金融机构需要采取的严密的安全措施来保护客户的金融资产和个人数据。异常检测技术广泛应用于金融风控领域中，对金融欺诈行为的检测发挥着重大作用，其中LOF作为异常检测手段中的一种无监督算法，在欺诈检测中有着许多理想的性质，对于局部异常点来说是一种可行的方法。同时金融风控领域中各种机器学习方法的运用离不开数据的支持，但数据持有者出于隐私保护，无法将数据流通出去。联邦学习的目标是在保证数据隐私安全及合法合规的基础上，实现共同建模，提升AI模型的效果。本申请在实现本申请实施例中发明技术方案的过程中，发现上述技术至少存在如下技术问题：现有技术中存在无法在保证数据持有者自有数据不泄露的前提下，帮助数据持有者完成异常检测的技术问题。发明内容有鉴于此，本申请实施例通过提供一种基于三方纵向联邦的LOF异常检测方法及系统，所述方法包括：通过对第一数据方和第二数据方的样本ID进行求交运算，获得所述第一数据方和所述第二数据方的交集样本ID；获得所述第一数据方的各个样本数据在所述第一数据方特征下的第一距离数据集；获得所述第二数据方的各个样本数据在所述第二数据方特征下的第二距离数据集；对所述第一距离数据集和所述第二距离数据集进行拆分，获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合；获得第一预定Hash方法；所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，获得第三样本集合和第四样本集合；将所述第三样本集合和所述第四样本集合发送给协调计算方，所述协调计算方对所述第三样本集合和所述第四样本集合进行加和，获得第五样本集合；根据所述第五样本集合，计算获得LOF参数信息；根据所述LOF参数信息，获得LOF异常得分。解决了现有技术中存在无法在保证数据持有者自有数据不泄露的前提下，帮助数据持有者完成异常检测的技术问题。达到了在保证数据持有者自有数据不泄露的前提下，通过联邦学习实现共同建模，帮助数据持有者完成异常检测的技术效果。鉴于上述问题，本申请实施例提供了一种基于三方纵向联邦的LOF异常检测方法及系统。第一方面，本申请提供了一种基于三方纵向联邦的LOF异常检测方法，所述方法通过一种基于三方纵向联邦的LOF异常检测系统实现，其中，所述方法包括：通过对第一数据方和第二数据方的样本ID进行求交运算，获得所述第一数据方和所述第二数据方的交集样本ID；获得所述第一数据方的各个样本数据在所述第一数据方特征下的第一距离数据集；获得所述第二数据方的各个样本数据在所述第二数据方特征下的第二距离数据集；对所述第一距离数据集和所述第二距离数据集进行拆分，获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合；获得第一预定Hash方法；所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，获得第三样本集合和第四样本集合；将所述第三样本集合和所述第四样本集合发送给协调计算方，所述协调计算方对所述第三样本集合和所述第四样本集合进行加和，获得第五样本集合；根据所述第五样本集合，计算获得LOF参数信息；根据所述LOF参数信息，获得LOF异常得分。另一方面，本申请还提供了一种基于三方纵向联邦的LOF异常检测系统，用于执行如第一方面所述的一种基于三方纵向联邦的LOF异常检测方法，其中，所述系统包括：第一获得单元：所述第一获得单元用于对第一数据方和第二数据方的样本ID进行求交运算，获得所述第一数据方和所述第二数据方的交集样本ID；第二获得单元：所述第二获得单元用于获得所述第一数据方的各个样本数据在所述第一数据方特征下的第一距离数据集；第三获得单元：所述第三获得单元用于获得所述第二数据方的各个样本数据在所述第二数据方特征下的第二距离数据集；第四获得单元：所述第四获得单元用于对所述第一距离数据集和所述第二距离数据集进行拆分，获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合；第五获得单元：所述第五获得单元用于获得第一预定Hash方法；第六获得单元：所述第六获得单元用于所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，获得第三样本集合和第四样本集合；第七获得单元：所述第七获得单元用于将所述第三样本集合和所述第四样本集合发送给协调计算方，所述协调计算方对所述第三样本集合和所述第四样本集合进行加和，获得第五样本集合；第八获得单元：所述第八获得单元用于根据所述第五样本集合，计算获得LOF参数信息；第九获得单元：所述第九获得单元用于根据所述LOF参数信息，获得LOF异常得分。第三方面，本申请实施例还提供了一种基于三方纵向联邦的LOF异常检测系统，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其中，所述处理器执行所述程序时实现上述第一方面所述方法的步骤。本申请实施例中提供的一个或多个技术方案，至少具有如下技术效果或优点：1.通过对第一数据方和第二数据方的样本ID进行求交运算，获得所述第一数据方和所述第二数据方的交集样本ID；获得所述第一数据方的各个样本数据在所述第一数据方特征下的第一距离数据集；获得所述第二数据方的各个样本数据在所述第二数据方特征下的第二距离数据集；对所述第一距离数据集和所述第二距离数据集进行拆分，获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合；获得第一预定Hash方法；所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，获得第三样本集合和第四样本集合；将所述第三样本集合和所述第四样本集合发送给协调计算方，所述协调计算方对所述第三样本集合和所述第四样本集合进行加和，获得第五样本集合；根据所述第五样本集合，计算获得LOF参数信息；根据所述LOF参数信息，获得LOF异常得分。达到了在保证数据持有者自有数据不泄露的前提下，通过联邦学习实现共同建模，帮助数据持有者完成异常检测的技术效果。2.通过持有数据的双方分别加和部分对方的数据样本后再将数据样本传送给协调计算的第三方，达到了防止第三方感知任一数据持有方数据样本分布特点的技术效果。3.通过将三方纵向联邦状态下的LOF异常检测作为无监督方法应用于金融反欺诈领域，达到了甄别异常客户的技术效果。上述说明仅是本申请技术方案的概述，为了能够更清楚了解本申请的技术手段，而可依照说明书的内容予以实施，并且为了让本申请的上述和其它目的、特征和优点能够更明显易懂，以下特举本申请的具体实施方式。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是示例性的，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据提供的附图获得其他的附图。图1为本申请实施例一种基于三方纵向联邦的LOF异常检测方法的流程示意图；图2为本申请实施例一种基于三方纵向联邦的LOF异常检测方法中获得所述第一数据方和所述第二数据方的交集样本ID的流程示意图；图3为本申请实施例一种基于三方纵向联邦的LOF异常检测方法中获得第一样本集合和第二样本集合的流程示意图；图4为本申请实施例一种基于三方纵向联邦的LOF异常检测方法中获得LOF异常得分之后的流程示意图；图5为本申请实施例一种基于三方纵向联邦的LOF异常检测系统的结构示意图；图6为本申请实施例示例性电子设备的结构示意图。附图标记说明：第一获得单元11，第二获得单元12，第三获得单元13，第四获得单元14，第五获得单元15，第六获得单元16，第七获得单元17，第八获得单元18，第九获得单元19，总线300，接收器301，处理器302，发送器303，存储器304，总线接口305。具体实施方式本申请实施例通过提供一种基于三方纵向联邦的LOF异常检测方法及系统，解决了现有技术中存在无法在保证数据持有者自有数据不泄露的前提下，帮助数据持有者完成异常检测的技术问题。达到了在保证数据持有者自有数据不泄露的前提下，通过联邦学习实现共同建模，帮助数据持有者完成异常检测的技术效果。下面，将参考附图对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅是本申请的一部分实施例，而不是本申请的全部实施例，应理解，本申请不受这里描述的示例实施例的限制。基于本申请的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。另外还需要说明的是，为了便于描述，附图中仅示出了与本申请相关的部分而非全部。申请概述大规模数据收集大幅提升了机器学习算法的性能，实现了经济效益和社会效益的共赢，但也令个人隐私保护面临更大的风险与挑战，机器学习的训练模式主要分为集中学习和联邦学习两类，前者在模型训练前需统一收集各方数据，尽管易于部署，却存在极大数据隐私与安全隐患；后者实现了将各方数据保留在本地的同时进行模型训练。金融风控领域中面临的一大问题即金融欺诈，网络犯罪分子开始采用新技术，扩大攻击的规模、增加攻击的复杂性。金融机构需要采取的严密的安全措施来保护客户的金融资产和个人数据。异常检测技术广泛应用于金融风控领域中，对金融欺诈行为的检测发挥着重大作用，其中LOF作为异常检测手段中的一种无监督算法，在欺诈检测中有着许多理想的性质，对于局部异常点来说是一种可行的方法。同时金融风控领域中各种机器学习方法的运用离不开数据的支持，但数据持有者出于隐私保护，无法将数据流通出去。联邦学习的目标是在保证数据隐私安全及合法合规的基础上，实现共同建模，提升AI模型的效果。现有技术中存在无法在保证数据持有者自有数据不泄露的前提下，帮助数据持有者完成异常检测的技术问题。针对上述技术问题，本申请提供的技术方案总体思路如下：本申请提供了一种基于三方纵向联邦的LOF异常检测方法，所述方法应用于一种基于三方纵向联邦的LOF异常检测系统，其中，所述方法包括：通过对第一数据方和第二数据方的样本ID进行求交运算，获得所述第一数据方和所述第二数据方的交集样本ID；获得所述第一数据方的各个样本数据在所述第一数据方特征下的第一距离数据集；获得所述第二数据方的各个样本数据在所述第二数据方特征下的第二距离数据集；对所述第一距离数据集和所述第二距离数据集进行拆分，获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合；获得第一预定Hash方法；所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，获得第三样本集合和第四样本集合；将所述第三样本集合和所述第四样本集合发送给协调计算方，所述协调计算方对所述第三样本集合和所述第四样本集合进行加和，获得第五样本集合；根据所述第五样本集合，计算获得LOF参数信息；根据所述LOF参数信息，获得LOF异常得分。在介绍了本申请基本原理后，下面将结合说明书附图来具体介绍本申请的各种非限制性的实施方式。实施例一请参阅附图1，本申请实施例提供了一种基于三方纵向联邦的LOF异常检测方法，其中，所述方法应用于一种基于三方纵向联邦的LOF异常检测系统，所述方法具体包括如下步骤：步骤S100：对第一数据方和第二数据方的样本ID进行求交运算，获得所述第一数据方和所述第二数据方的交集样本ID；具体而言，所述基于三方纵向联邦的LOF异常检测方法是指持有数据的两方和协调计算的第三方组成的三方，基于纵向联邦机器学习，利用LOF进行异常检测的方法。所述第一数据方和第二数据方即为所述持有数据的两方。所述联邦学习即联邦机器学习，是一个机器学习框架，能有效帮助多个机构在满足用户隐私保护、数据安全和政府法规的要求下，进行数据使用和机器学习建模。所述联邦学习分为横向联邦学习、纵向联邦学习和联邦迁移学习三种类型，其中，所述纵向联邦学习用于不同参与方数据样本有较大的重叠，但样本特征的重叠度不高的情况。举例如两家电子商务公司向客户提供不同的服务，拥有客户不同方面的数据，但他们所服务的客户群体有较大的重叠。所述LOF即局部异常因子算法，是指在数据挖掘方面，经常需要在做特征工程和模型训练之前对数据进行清洗，剔除无效数据和异常数据，是一种基于密度的经典算法。所述第一数据方和所述第二数据方的交集样本ID是指所述持有数据的两方所共同拥有的样本ID。举例如两家电子商务公司所服务的客户群体有较大的重叠，但向客户提供不同的服务，拥有客户不同方面的数据，那么这两家电子商务公司求交运算后，可以得到两家电子商务公司共有客户的ID。所述样本ID即数据样本的标签。通过对持有数据的双方进行数据交集运算，得到了持有数据双方共同拥有的数据样本标签。步骤S200：获得所述第一数据方的各个样本数据在所述第一数据方特征下的第一距离数据集；步骤S300：获得所述第二数据方的各个样本数据在所述第二数据方特征下的第二距离数据集；具体而言，所述第一距离数据集是指所述第一数据方的各个样本数据在所述第一数据方特征下的距离平方组成的集合；所述第二距离数据集是指所述第二数据方的各个样本数据在所述第二数据方特征下的距离平方组成的集合。当两数据方下的样本数为N时，那么两数据方特征对应的距离数据集为N*N的矩阵。通过计算数据双方在本地的样本点距离的平方，得到了两个矩阵形式的计算结果。步骤S400：对所述第一距离数据集和所述第二距离数据集进行拆分，获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合；具体而言，对数据双方在本地的样本点距离的平方组成的所述第一距离数据集和所述第二距离数据集分别进行拆分，可以得到第一距离数据集对应的第一数据碎片和第二距离数据集对应的第二数据碎片。进一步的，数据双方将所述第一数据碎片和所述第二数据碎片进行交换，使得第一数据方得到所述第二数据碎片，第二数据方得到所述第一数据碎片。进一步的，数据双方均将得到的数据碎片与自身拆分得到的其他碎片进行加和计算，计算后，第一数据方获得所述第一样本集合，第二数据方获得所述第二样本集合。通过数据双方拆分、交换、加和的方法，使第一数据方获得拥有部分第二数据方所持数据的第一样本集合，第二数据方获得拥有部分第一数据方所持数据的第二样本集合。步骤S500：获得第一预定Hash方法；步骤S600：所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，获得第三样本集合和第四样本集合；具体而言，所述Hash是指通过一个函数，将一个值映射成另一个更好的值。所述第一预定Hash方法为数据双方约定的共同使用的映射方法。所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，可以获得所述第一样本集合对应的第三样本集合和所述第二样本集合对应的第四样本集合。通过按照所述第一预定Hash方法对双方所持有的数据进行Hash映射，得到对应的样本数据集合，达到了双方数据隐私不外露的技术效果。步骤S700：将所述第三样本集合和所述第四样本集合发送给协调计算方，所述协调计算方对所述第三样本集合和所述第四样本集合进行加和，获得第五样本集合；具体而言，所述第一数据方和所述第二数据方均将Hash映射得到的第三样本集合和第四样本集合发送给第三方进行协调计算，所述第三方对所述第三样本集合和所述第四样本集合进行加和运算，得到第五样本集合。此时，进行协调计算的第三方拥有了所述第一数据方和所述第二数据方所有数据的距离矩阵。持有数据的双方将映射后的数据均发送给第三方进行协调计算，使第三方拥有了所有数据样本，为后续异常检测提供了数据基础。步骤S800：根据所述第五样本集合，计算获得LOF参数信息；步骤S900：根据所述LOF参数信息，获得LOF异常得分。具体而言，所述LOF参数信息是指计算LOF所需的参数信息，即异常检测所需的数据信息。进一步的，根据计算得到的LOF参数信息，可以得到LOF异常得分，最终得到所有数据样本在全部特征上的LOF值。通过第三方计算，达到了三方纵向联邦状态下，数据双方均完成异常检测的技术效果。进一步的，如附图2所示，本申请实施例步骤S100还包括：步骤S110：判断所述第一数据方和所述第二数据方是否要求隐藏非交集样本ID；步骤S120：如果所述第一数据方和所述第二数据方要求隐藏非交集样本ID，基于RSA加密的隐私求交方法对所述第一数据方和所述第二数据方进行求交，获得所述第一数据方和所述第二数据方的交集样本ID。具体而言，在进行数据双方求交运算前，首先判断所述第一数据方和所述第二数据方是否要求隐藏非交集样本的ID标签，如果所述第一数据方和所述第二数据方要求隐藏非交集样本的ID标签，则基于RSA加密的隐私求交方法对所述第一数据方和所述第二数据方进行求交，可以得到所述第一数据方和所述第二数据方共有数据的交集样本ID。其中，所述RSA加密是一种加密算法，是一种使用不同的加密密钥与解密密钥，由已知加密密钥推导出解密密钥在计算上是不可行的密码体制。通过RSA加密的方法，保护了数据持有双方的数据样本不泄露。进一步的，如附图3所示，本申请实施例步骤S400还包括：步骤S410：所述第一距离数据集记作，所述第二距离数据集记作，均为N*N大小的矩阵，其中，N为样本数；步骤S420：所述第一数据方和所述第二数据方使用秘密共享方法，将，拆成，，，，其中，、；步骤S430：所述第一数据方将发送给所述第二数据方；步骤S440：所述第二数据方将发送给所述第一数据方；步骤S450：所述第一数据方将加和成为，其中，所述为所述第一样本集合；步骤S460：所述第二数据方将加和成为，其中，所述为所述第二样本集合。具体而言，将所述第一数据方的各个样本数据在所述第一数据方特征下的第一距离数据集记作，所述第二数据方的各个样本数据在所述第二数据方特征下的第二距离数据集记作，当两数据方下的样本数为N时，那么两数据方特征对应的距离数据集为N*N的矩阵。进一步的，所述第一数据方和所述第二数据方使用秘密共享方法，将，分别拆成，和，，其中，、。之后双方进行数据碎片交换，所述第一数据方将发送给所述第二数据方，所述第二数据方将发送给所述第一数据方。完成数据交换后，所述第一数据方将加和成为，所述第二数据方将加和成为，其中，所述为所述第一样本集合，所述为所述第二样本集合。持有数据的双方通过分别加和部分对方的数据样本后再将数据样本传送给协调计算的第三方，达到了防止第三方感知任一数据持有方数据样本分布特点的技术效果。进一步的，本申请实施例步骤S450还包括：步骤S451：判断所述第一数据方和所述第二数据方的ID次序是否统一；步骤S452：如果所述第一数据方和所述第二数据方的ID次序不统一，按照样本ID进行加和。具体而言，首先判断所述第一数据方和所述第二数据方的标签ID次序是否统一，若双方标签ID次序不统一，需要按照样本标签ID进行加和，而不能简单的按位置相加。也就是说，如果所述第一数据方和所述第二数据方的标签ID次序不统一，则按照样本标签ID进行加和。通过按照标签ID加和数据双方的数据样本，实现了数据样本的清晰化和条理化。进一步的，本申请实施例步骤S600还包括：步骤S610：获得映射表，对所述映射表进行保存。具体而言，数据持有方均按照约定的Hash映射方法对数据样本进行映射，所述映射表即样本标签ID和Hash值得对应关系表。数据持有双方可以通过异常得分，匹配对应的Hash值，进一步基于映射表得到所述Hash值对应的标签样本ID。进一步的，如附图4所示，本申请实施例步骤S900还包括：步骤S910：根据所述LOF异常得分，获得第一样本ID，所述第一样本ID与所述LOF异常得分相对应；步骤S920：所述协调计算方将所述LOF异常得分同所述第一样本ID的Hash值一同返回给所述第一数据方和所述第二数据方；步骤S930：所述第一数据方和所述第二数据方根据所述映射表将所述Hash值映射回所述第一样本ID。具体而言，根据所述LOF参数信息，获得LOF异常得分之后，系统自动根据所述LOF异常得分，获得所述LOF异常得分相对应的第一样本ID。进一步的，协调计算的第三方将所述LOF异常得分同所述第一样本ID对应的Hash值一同返回给所述第一数据方和所述第二数据方，所述第一数据方和所述第二数据方根据映射表，将所述Hash值映射回所述第一样本ID，完成数据持有双方共同的异常检测工作。综上所述，本申请实施例所提供的具有如下技术效果：1.通过对第一数据方和第二数据方的样本ID进行求交运算，获得所述第一数据方和所述第二数据方的交集样本ID；获得所述第一数据方的各个样本数据在所述第一数据方特征下的第一距离数据集；获得所述第二数据方的各个样本数据在所述第二数据方特征下的第二距离数据集；对所述第一距离数据集和所述第二距离数据集进行拆分，获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合；获得第一预定Hash方法；所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，获得第三样本集合和第四样本集合；将所述第三样本集合和所述第四样本集合发送给协调计算方，所述协调计算方对所述第三样本集合和所述第四样本集合进行加和，获得第五样本集合；根据所述第五样本集合，计算获得LOF参数信息；根据所述LOF参数信息，获得LOF异常得分。达到了在保证数据持有者自有数据不泄露的前提下，通过联邦学习实现共同建模，帮助数据持有者完成异常检测的技术效果。2.通过持有数据的双方分别加和部分对方的数据样本后再将数据样本传送给协调计算的第三方，达到了防止第三方感知任一数据持有方数据样本分布特点的技术效果。3.通过将三方纵向联邦状态下的LOF异常检测作为无监督方法应用于金融反欺诈领域，达到了甄别异常客户的技术效果。实施例二基于与前述实施例中一种基于三方纵向联邦的LOF异常检测方法，同样发明构思，本发明还提供了一种基于三方纵向联邦的LOF异常检测系统，请参阅附图5，所述系统包括：第一获得单元11，所述第一获得单元11用于对第一数据方和第二数据方的样本ID进行求交运算，获得所述第一数据方和所述第二数据方的交集样本ID；第二获得单元12，所述第二获得单元12用于获得所述第一数据方的各个样本数据在所述第一数据方特征下的第一距离数据集；第三获得单元13，所述第三获得单元13用于获得所述第二数据方的各个样本数据在所述第二数据方特征下的第二距离数据集；第四获得单元14，所述第四获得单元14用于对所述第一距离数据集和所述第二距离数据集进行拆分，获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合；第五获得单元15，所述第五获得单元15用于获得第一预定Hash方法；第六获得单元16，所述第六获得单元16用于所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，获得第三样本集合和第四样本集合；第七获得单元17，所述第七获得单元17用于将所述第三样本集合和所述第四样本集合发送给协调计算方，所述协调计算方对所述第三样本集合和所述第四样本集合进行加和，获得第五样本集合；第八获得单元18，所述第八获得单元18用于根据所述第五样本集合，计算获得LOF参数信息；第九获得单元19，所述第九获得单元19用于根据所述LOF参数信息，获得LOF异常得分。进一步的，所述系统还包括：第一判断单元，所述第一判断单元用于判断所述第一数据方和所述第二数据方是否要求隐藏非交集样本ID；第十获得单元，所述第十获得单元用于如果所述第一数据方和所述第二数据方要求隐藏非交集样本ID，基于RSA加密的隐私求交方法对所述第一数据方和所述第二数据方进行求交，获得所述第一数据方和所述第二数据方的交集样本ID。进一步的，所述系统还包括：第一设置单元，所述第一设置单元用于所述第一距离数据集记作，所述第二距离数据集记作，均为N*N大小的矩阵，其中，N为样本数；第一执行单元，所述第一执行单元用于所述第一数据方和所述第二数据方使用秘密共享方法，将，拆成，，，，其中，、；第一发送单元，所述第一发送单元用于所述第一数据方将发送给所述第二数据方；第二发送单元，所述第二发送单元用于所述第二数据方将发送给所述第一数据方；第一加和单元，所述第一加和单元用于所述第一数据方将加和成为，其中，所述为所述第一样本集合；第二加和单元，所述第二加和单元用于所述第二数据方将加和成为，其中，所述为所述第二样本集合。进一步的，所述系统还包括：第二判断单元，所述第二判断单元用于判断所述第一数据方和所述第二数据方的ID次序是否统一；第三加和单元，所述第三加和单元用于如果所述第一数据方和所述第二数据方的ID次序不统一，按照样本ID进行加和。进一步的，所述系统还包括：第十一获得单元，所述第十一获得单元用于获得映射表，对所述映射表进行保存。进一步的，所述系统还包括：第十二获得单元，所述第十二获得单元用于根据所述LOF异常得分，获得第一样本ID，所述第一样本ID与所述LOF异常得分相对应；第二执行单元，所述第二执行单元用于所述协调计算方将所述LOF异常得分同所述第一样本ID的Hash值一同返回给所述第一数据方和所述第二数据方；第三执行单元，所述第三执行单元用于所述第一数据方和所述第二数据方根据所述映射表将所述Hash值映射回所述第一样本ID。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，前述图1实施例一中的一种基于三方纵向联邦的LOF异常检测方法和具体实例同样适用于本实施例的一种基于三方纵向联邦的LOF异常检测系统，通过前述对一种基于三方纵向联邦的LOF异常检测方法的详细描述，本领域技术人员可以清楚的知道本实施例中一种基于三方纵向联邦的LOF异常检测系统，所以为了说明书的简洁，在此不再详述。对于实施例公开的装置而言，由于其与实施例公开的方法相对应，所以描述的比较简单，相关之处参见方法部分说明即可。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本申请。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本申请的精神或范围的情况下，在其它实施例中实现。因此，本申请将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。示例性电子设备下面参考图6来描述本申请实施例的电子设备。图6图示了根据本申请实施例的电子设备的结构示意图。基于与前述实施例中一种基于三方纵向联邦的LOF异常检测方法的发明构思，本发明还提供一种基于三方纵向联邦的LOF异常检测系统，其上存储有计算机程序，该程序被处理器执行时实现前文所述一种基于三方纵向联邦的LOF异常检测方法的任一方法的步骤。其中，在图6中，总线架构，总线300可以包括任意数量的互联的总线和桥，总线300将包括由处理器302代表的一个或多个处理器和存储器304代表的存储器的各种电路链接在一起。总线300还可以将诸如外围设备、稳压器和功率管理电路等之类的各种其他电路链接在一起，这些都是本领域所公知的，因此，本文不再对其进行进一步描述。总线接口305在总线300和接收器301和发送器303之间提供接口。接收器301和发送器303可以是同一个元件，即收发机，提供用于在传输介质上与各种其他装置通信的单元。处理器302负责管理总线300和通常的处理，而存储器304可以被用于存储处理器302在执行操作时所使用的数据。本申请提供了一种基于三方纵向联邦的LOF异常检测方法，所述方法应用于一种基于三方纵向联邦的LOF异常检测系统，其中，所述方法包括：通过对第一数据方和第二数据方的样本ID进行求交运算，获得所述第一数据方和所述第二数据方的交集样本ID；获得所述第一数据方的各个样本数据在所述第一数据方特征下的第一距离数据集；获得所述第二数据方的各个样本数据在所述第二数据方特征下的第二距离数据集；对所述第一距离数据集和所述第二距离数据集进行拆分，获得第一数据碎片和第二数据碎片后，将所述第一数据碎片和所述第二数据碎片进行数据交换并进行加和，获得第一样本集合和第二样本集合；获得第一预定Hash方法；所述第一数据方和所述第二数据方根据所述第一预定Hash方法，对所述第一样本集合和所述第二样本集合进行Hash映射，获得第三样本集合和第四样本集合；将所述第三样本集合和所述第四样本集合发送给协调计算方，所述协调计算方对所述第三样本集合和所述第四样本集合进行加和，获得第五样本集合；根据所述第五样本集合，计算获得LOF参数信息；根据所述LOF参数信息，获得LOF异常得分。解决了现有技术中存在无法在保证数据持有者自有数据不泄露的前提下，帮助数据持有者完成异常检测的技术问题。达到了在保证数据持有者自有数据不泄露的前提下，通过联邦学习实现共同建模，帮助数据持有者完成异常检测的技术效果。本领域内的技术人员应明白，本申请的实施例可提供为方法、装置、或计算机程序产品。因此，本申请可采用完全软件实施例、完全硬件实施例、或结合软件和硬件方面实施例的形式。此外，本申请为可以在一个或多个包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。而所述的计算机可用存储介质包括但不限于：U盘、移动硬盘、只读存储器、随机存取存储器、磁盘存储器、只读光盘、光学存储器等各种可以存储程序代码的介质。本发明是参照本发明实施例的方法、设备、和计算机程序产品的流程图和／或方框图来描述的。应理解可由计算机程序指令实现流程图和／或方框图中的每一流程和／或方框、以及流程图和／或方框图中的流程和／或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的系统。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令系统的制造品，该指令系统实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的步骤。尽管已描述了本发明的优选实施例，但本领域内的技术人员一旦得知了基本创造性概念，则可对这些实施例作出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本发明范围的所有变更和修改。显然，本领域的技术人员可以对本发明进行各种改动和变型而不脱离本发明的精神和范围。这样，倘若本发明的这些修改和变型属于本发明权利要求及其等同技术的范围之内，则本发明也意图包含这些改动和变型在内。
