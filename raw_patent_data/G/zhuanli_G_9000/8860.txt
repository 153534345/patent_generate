标题title
一种智能电表文件读写系统、方法、设备和介质
摘要abst
本申请公开了一种智能电表文件读写系统、方法、设备和介质，文件标识模块标识智能电表的数据文件，生成数据文件的数据标识；地址段划分模块根据数据文件的数据类型对数据标识的范围进行划分，得到若干个地址段，每个地址段对应一种数据类型；属性配置模块根据各地址段对应的数据类型配置各地址段对应的属性；驱动程序在数据读写接口接收到文件读或写请求时，根据该文件读或写请求携带的目标数据标识确定对应的属性，根据该属性进行相应的读操作或写操作，改善了现有通用文件系统的读写方法不能适应智能电表，容易因为对数据文件的不合理存放导致数据丢失，影响智能电表运行的可靠性的技术问题。
权利要求书clms
1.一种智能电表文件读写系统，其特征在于，包括：数据读写接口、文件标识模块、地址段划分模块、属性配置模块和驱动程序；所述文件标识模块，用于标识智能电表的数据文件，生成数据文件的数据标识；所述地址段划分模块，用于根据所述数据文件的数据类型对所述数据标识的范围进行划分，得到若干个地址段，每个地址段对应一种数据类型；所述属性配置模块，用于根据各地址段对应的数据类型配置各地址段对应的属性，所述属性包括数据类型、盘符、读写方式和读写长度；所述驱动程序，用于在数据读写接口接收到文件读或写请求时，根据该文件读或写请求携带的目标数据标识确定对应的属性，根据该属性进行相应的读操作或写操作。2.根据权利要求1所述的智能电表文件读写系统，其特征在于，所述驱动程序具体用于：在数据读写接口接收到文件读或写请求时，获取该请求携带的目标数据标识；根据所述目标数据标识所属的地址段确定所述目标数据标识对应的属性；根据所述目标数据标识对应的属性进行相应的数据读操作或写操作。3.根据权利要求1或2所述的智能电表文件读写系统，其特征在于，所述驱动程序还用于：判断读或写操作是否正常，在判断到读或写操作不正常时，返回调用错误。4.根据权利要求1所述的智能电表文件读写系统，其特征在于，所述属性还包括校验方式，所述驱动程序还用于：在判断到读或写操作正常后，根据所述目标数据标识对应的校验方式对读或写结果进行校验，得到校验结果；当所述校验结果为不正常时，返回调用错误，当所述校验结果为正常时，返回读或写结果。5.根据权利要求1所述的智能电表文件读写系统，其特征在于，所述驱动程序还用于：判断所述目标数据标识是否合格，若否，则返回调用错误。6.一种智能电表文件读写方法，其特征在于，应用于权利要求1-5任一项所述的智能电表文件读写系统，所述方法包括：标识智能电表的数据文件，生成数据文件的数据标识；根据所述数据文件的数据类型对所述数据标识的范围进行划分，得到若干个地址段，每个地址段对应一种数据类型；根据各地址段对应的数据类型配置各地址段对应的属性，所述属性包括数据类型、盘符、读写方式和读写长度；在数据读写接口接收到文件读或写请求时，根据该文件读或写请求携带的目标数据标识确定对应的属性，根据该属性进行相应的读操作或写操作。7.根据权利要求6所述的智能电表文件读写方法，其特征在于，所述在数据读写接口接收到文件读或写请求时，根据该文件读或写请求携带的目标数据标识确定对应的属性，根据该属性进行相应的读操作或写操作，包括：在数据读写接口接收到文件读或写请求时，获取该请求携带的目标数据标识；根据所述目标数据标识所属的地址段确定所述目标数据标识对应的属性；根据所述目标数据标识对应的属性进行相应的数据读操作或写操作。8.根据权利要求6所述的智能电表文件读写方法，其特征在于，所述属性还包括校验方式，所述方法还包括：判断读或写操作是否正常，在判断到读或写操作不正常时，返回调用错误；在判断到读或写操作正常后，根据所述目标数据标识对应的校验方式对读或写结果进行校验，得到校验结果；当所述校验结果为不正常时，返回调用错误，当所述校验结果为正常时，返回读或写结果。9.一种智能电表文件读写设备，其特征在于，所述设备包括处理器以及存储器；所述存储器用于存储程序代码，并将所述程序代码传输给所述处理器；所述处理器用于根据所述程序代码中的指令执行权利要求6-8任一项所述的智能电表文件读写方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质用于存储程序代码，所述程序代码被处理器执行时实现权利要求6-8任一项所述的智能电表文件读写方法。
说明书desc
技术领域本申请涉及数据处理技术领域，尤其涉及一种智能电表文件读写系统、方法、设备和介质。背景技术传统电表的功能固化，数据类型少，数据结构简单，即使不依赖文件系统也能满足基础数据的读写和存储要求。新型的智能电表的应用类型丰富，特别在新型电力系统中，新能源占比提高，要求智能电表能够更多的参与能源互动，因此智能电表的数据类型更加多样，数据结构复杂，数据的存储位置和存储方式有不同的要求，而现有的通用文件系统的读写方法不能适应智能电表，容易因为对数据文件的不合理存放导致数据丢失，影响智能电表运行的可靠性。发明内容本申请提供了一种智能电表文件读写系统、方法、设备和介质，用于改善现有通用文件系统的读写方法不能适应智能电表，容易因为对数据文件的不合理存放导致数据丢失，影响智能电表运行的可靠性的技术问题。有鉴于此，本申请第一方面提供了一种智能电表文件读写系统，包括：数据读写接口、文件标识模块、地址段划分模块、属性配置模块和驱动程序；所述文件标识模块，用于标识智能电表的数据文件，生成数据文件的数据标识；所述地址段划分模块，用于根据所述数据文件的数据类型对所述数据标识的范围进行划分，得到若干个地址段，每个地址段对应一种数据类型；所述属性配置模块，用于根据各地址段对应的数据类型配置各地址段对应的属性，所述属性包括数据类型、盘符、读写方式和读写长度；所述驱动程序，用于在数据读写接口接收到文件读或写请求时，根据该文件读或写请求携带的目标数据标识确定对应的属性，根据该属性进行相应的读操作或写操作。可选的，所述驱动程序具体用于：在数据读写接口接收到文件读或写请求时，获取该请求携带的目标数据标识；根据所述目标数据标识所属的地址段确定所述目标数据标识对应的属性；根据所述目标数据标识对应的属性进行相应的数据读操作或写操作。可选的，所述驱动程序还用于：判断读或写操作是否正常，在判断到读或写操作不正常时，返回调用错误。可选的，所述属性还包括校验方式，所述驱动程序还用于：在判断到读或写操作正常后，根据所述目标数据标识对应的校验方式对读或写结果进行校验，得到校验结果；当所述校验结果为不正常时，返回调用错误，当所述校验结果为正常时，返回读或写结果。可选的，所述驱动程序还用于：判断所述目标数据标识是否合格，若否，则返回调用错误。本申请第二方面提供了一种智能电表文件读写方法，应用于第一方面任一种所述的智能电表文件读写系统，所述方法包括：标识智能电表的数据文件，生成数据文件的数据标识；根据所述数据文件的数据类型对所述数据标识的范围进行划分，得到若干个地址段，每个地址段对应一种数据类型；根据各地址段对应的数据类型配置各地址段对应的属性，所述属性包括数据类型、盘符、读写方式和读写长度；在数据读写接口接收到文件读或写请求时，根据该文件读或写请求携带的目标数据标识确定对应的属性，根据该属性进行相应的读操作或写操作。可选的，所述在数据读写接口接收到文件读或写请求时，根据该文件读或写请求携带的目标数据标识确定对应的属性，根据该属性进行相应的读操作或写操作，包括：在数据读写接口接收到文件读或写请求时，获取该请求携带的目标数据标识；根据所述目标数据标识所属的地址段确定所述目标数据标识对应的属性；根据所述目标数据标识对应的属性进行相应的数据读操作或写操作。可选的，所述属性还包括校验方式，所述方法还包括：判断读或写操作是否正常，在判断到读或写操作不正常时，返回调用错误；在判断到读或写操作正常后，根据所述目标数据标识对应的校验方式对读或写结果进行校验，得到校验结果；当所述校验结果为不正常时，返回调用错误，当所述校验结果为正常时，返回读或写结果。本申请第三方面提供了一种智能电表文件读写设备，所述设备包括处理器以及存储器；所述存储器用于存储程序代码，并将所述程序代码传输给所述处理器；所述处理器用于根据所述程序代码中的指令执行第二方面任一种所述的智能电表文件读写方法。本申请第四方面提供了一种计算机可读存储介质，所述计算机可读存储介质用于存储程序代码，所述程序代码被处理器执行时实现第二方面任一种所述的智能电表文件读写方法。从以上技术方案可以看出，本申请具有以下优点：本申请提供了一种智能电表文件读写系统，包括：数据读写接口、文件标识模块、地址段划分模块、属性配置模块和驱动程序；文件标识模块，用于标识智能电表的数据文件，生成数据文件的数据标识；地址段划分模块，用于根据数据文件的数据类型对数据标识的范围进行划分，得到若干个地址段，每个地址段对应一种数据类型；属性配置模块，用于根据各地址段对应的数据类型配置各地址段对应的属性，属性至少包括数据类型和读写方式；驱动程序，用于在数据读写接口接收到文件读或写请求时，根据该文件读或写请求携带的目标数据标识确定对应的属性，根据该属性进行相应的读操作或写操作。本申请中，将智能电表的所有数据类型进行重要属性的归类和规范，对数据文件进行唯一性的标识，提供了统一精简的文件读写接口规范，避免对智能电表重要数据的误读取、误存储、漏备份，实现了智能电表所有数据的快速检索、安全可靠的分类操作，同时简化了APP编程接口，改善了现有通用文件系统的读写方法不能适应智能电表，容易因为对数据文件的不合理存放导致数据丢失，影响智能电表运行的可靠性的技术问题。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其它的附图。图1为本申请实施例提供的一种智能电表文件读写系统的一个结构示意图；图2为本申请实施例提供的一种智能电表文件读写方法的一个流程示意图。具体实施方式本申请提供了一种智能电表文件读写系统、方法、设备和介质，用于改善现有通用文件系统的读写方法不能适应智能电表，容易因为对数据文件的不合理存放导致数据丢失，影响智能电表运行的可靠性的技术问题。为了使本技术领域的人员更好地理解本申请方案，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。通用的文件系统不能适应新型智能电表，有两点原因：一是大部分通用文件系统体系较大，设备资源占用太多，不适合新型电表的微内核化操作系统架构；二更加重要的，是通用文件系统只提供了通用的文件读写接口，没有形成对智能电表的特定数据文件的读写和存储规范，特别在文件的允许类型、存储方式、校验方式，以及电表特殊运行状态下均没有规范，容易因为对文件的不合理存放导致数据丢失、运行不稳定等影响电表可靠运行的问题，也不能提供给APP精简、快速、可靠的读写接口，不能降低电表APP开发难度。为了改善上述问题，请参阅图1，本申请实施例提供了一种智能电表文件读写系统，包括：数据读写接口11、文件标识模块12、地址段划分模块13、属性配置模块14和驱动程序15；文件标识模块12，用于标识智能电表的数据文件，生成数据文件的数据标识；地址段划分模块13，用于根据数据文件的数据类型对数据标识的范围进行划分，得到若干个地址段，每个地址段对应一种数据类型；属性配置模块14，用于根据各地址段对应的数据类型配置各地址段对应的属性，属性包括数据类型、盘符、读写方式和读写长度；驱动程序15，用于在数据读写接口11接收到文件读或写请求时，根据该文件读或写请求携带的目标数据标识确定对应的属性，根据该属性进行相应的读操作或写操作。本申请实施例中的数据读写接口11面向开发者和应用APP，提供对数据文件的读和写的统一接口；文件标识模块12标识智能电表的数据文件，生成数据文件的数据标识；文件标识模块12提供的数据标识FSID是唯一的，用于标识一个数据文件。地址段划分模块13根据数据标识FSID的范围进行划分，得到若干区段，每个区段为一个地址段，每个地址段对应一种数据类型，可以生成FSID表，用于地址段查询。属性配置模块14根据各地址段对应的数据类型配置各地址段对应的属性，属性包括数据类型、盘符、读写方式和读写长度，数据类型包括电能数据、RAM临时数据、运行参数、外设等，所有属性可由数据标识FSID唯一确定。驱动程序15在数据读写接口11接收到文件读或写请求时，根据该文件读或写请求携带的目标数据标识确定对应的属性，根据该属性执行针对虚拟盘符对物理地址的转换和相应的数据读操作或写操作，包含多种存储设备类型，如RAM、EEPROM、FLASH、CHAR字符设备。数据读写接口处于读写系统的应用层，文件标识模块、地址段划分模块、属性配置模块属于读写系统内核层，驱动程序处于读写系统的驱动层。进一步，驱动程序15具体用于：在数据读写接口接收到文件读或写请求时，获取该请求携带的目标数据标识；根据目标数据标识所属的地址段确定目标数据标识对应的属性；根据目标数据标识对应的属性进行相应的数据读操作或写操作。进一步，驱动程序15还用于：判断目标数据标识是否合格，若否，则返回调用错误。本申请实施例中的数据标识由字节标识，因此，数据标识的合格范围为0至25535，当目标数据标识不在该合格范围内时，判定该目标数据标识不合格，返回调用错误，当目标数据标识在该合格范围内时，判定该目标数据标识合格，则通过FSID表查询该目标数据标识所属的地址段，进而确定对应的属性。进一步，驱动程序15还用于：判断读或写操作是否正常，在判断到读或写操作不正常时，返回调用错误；在判断到读或写操作正常后，根据目标数据标识对应的校验方式对读或写结果进行校验，得到校验结果；当校验结果为不正常时，返回调用错误，当校验结果为正常时，返回读或写结果。本申请实施例中的属性还包括校验方式，驱动程序15在进行读或写操作后，判定读或写操作是否正常，在判断到读或写操作不正常时，返回调用错误；在判断到读或写操作正常后，根据目标数据标识对应的校验方式对读或写结果进行校验，得到校验结果；当校验结果为不正常时，返回调用错误，该错误可指引系统重启或恢复后重新进行数据多重备份和校验；当校验结果为正常时，返回读或写结果，数据读写结束。本申请实施例，将智能电表的所有数据类型进行重要属性的归类和规范，通过FSID进行唯一性的标识，提供了统一精简的文件读写接口规范，避免对智能电表重要数据的误读取、误存储、漏备份，实现了智能电表所有数据的快速检索、安全可靠的分类操作，同时简化了APP编程接口。以上为本申请提供的一种智能电表文件读写系统的一个实施例，以下为本申请提供的一种智能电表文件读写方法的一个实施例。本申请实施例提供的一种智能电表文件读写方法，应用于前述实施例中的智能电表文件读写系统，方法包括：步骤101、标识智能电表的数据文件，生成数据文件的数据标识。每个数据文件的数据标识FSID是唯一的，用于标识数据文件。步骤102、根据数据文件的数据类型对数据标识的范围进行划分，得到若干个地址段，每个地址段对应一种数据类型。可以参考图2，根据数据标识FSID的范围进行划分，得到若干区段，每个区段为一个地址段，每个地址段对应一种数据类型，可以生成FSID表，用于地址段查询。步骤103、根据各地址段对应的数据类型配置各地址段对应的属性，属性包括数据类型、盘符、读写方式和读写长度。根据各地址段对应的数据类型配置各地址段对应的属性，属性包括数据类型、盘符、读写方式和读写长度，数据类型包括电能数据、RAM临时数据、运行参数、外设等，所有属性可由数据标识FSID唯一确定。步骤104、在数据读写接口接收到文件读或写请求时，根据该文件读或写请求携带的目标数据标识确定对应的属性，根据该属性进行相应的读操作或写操作。在数据读写接口接收到文件读或写请求时，根据该文件读或写请求携带的目标数据标识确定对应的属性，根据该属性执行针对虚拟盘符对物理地址的转换和相应的数据读操作或写操作，包含多种存储设备类型，如RAM、EEPROM、FLASH、CHAR字符设备。具体的，在数据读写接口接收到文件读或写请求时，获取该请求携带的目标数据标识；然后判断目标数据标识是否合格，本申请实施例中的数据标识由字节标识，因此，数据标识的合格范围为0至25535，当目标数据标识不在该合格范围内时，判定该目标数据标识不合格，返回调用错误，当目标数据标识在该合格范围内时，判定该目标数据标识合格，则通过FSID表查询该目标数据标识所属的地址段，根据目标数据标识所属的地址段确定目标数据标识对应的属性；根据目标数据标识对应的属性进行相应的数据读操作或写操作。进一步，判断读或写操作是否正常，在判断到读或写操作不正常时，返回调用错误；在判断到读或写操作正常后，根据目标数据标识对应的校验方式对读或写结果进行校验，得到校验结果；当校验结果为不正常时，返回调用错误，当校验结果为正常时，返回读或写结果。本申请实施例，将智能电表的所有数据类型进行重要属性的归类和规范，通过FSID进行唯一性的标识，提供了统一精简的文件读写接口规范，避免对智能电表重要数据的误读取、误存储、漏备份，实现了智能电表所有数据的快速检索、安全可靠的分类操作，同时简化了APP编程接口。本申请实施例还提供了一种智能电表文件读写设备，设备包括处理器以及存储器；存储器用于存储程序代码，并将程序代码传输给处理器；处理器用于根据程序代码中的指令执行前述方法实施例中的智能电表文件读写方法。本申请实施例还提供了一种计算机可读存储介质，计算机可读存储介质用于存储程序代码，程序代码被处理器执行时实现前述方法实施例中的智能电表文件读写方法。本申请的说明书及上述附图中的术语“第一”、“第二”、“第三”、“第四”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本申请的实施例例如能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。应当理解，在本申请中，“至少一个”是指一个或者多个，“多个”是指两个或两个以上。“和/或”，用于描述关联对象的关联关系，表示可以存在三种关系，例如，“A和/或B”可以表示：只存在A，只存在B以及同时存在A和B三种情况，其中A，B可以是单数或者复数。字符“/”一般表示前后关联对象是一种“或”的关系。“以下至少一项”或其类似表达，是指这些项中的任意组合，包括单项或复数项的任意组合。例如，a，b或c中的至少一项，可以表示：a，b，c，“a和b”，“a和c”，“b和c”，或“a和b和c”，其中a，b，c可以是单个，也可以是多个。在本申请所提供的几个实施例中，应该理解到，所揭露的装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。所述集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以通过一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上所述，以上实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围。
