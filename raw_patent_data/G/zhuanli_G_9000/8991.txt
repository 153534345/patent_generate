标题title
无人机实现跟踪目标的控制方法和控制装置
摘要abst
本发明公开了无人机实现跟踪目标的控制方法和控制装置。所述控制方法包括：在旋翼无人机飞行过程中实时调整航向角，以使旋翼无人机对准追踪目标；根据当前时刻的飞行参数计算得到下一时刻的期望位置；确定在当前时刻旋翼无人机是否触发避障条件；若触发避障条件，则根据预定避障策略计算旋翼无人机的第一期望速度；根据第一期望速度调整旋翼无人机的速度控制器的参数，以使旋翼无人机到达期望位置。若未触发避障条件，则根据期望位置计算旋翼无人机的第二期望速度；根据第二期望速度调整旋翼无人机的速度控制器的参数，以使旋翼无人机到达期望位置。该控制方法既可以保证旋翼无人机稳定地跟踪目标，又可以及时躲避障碍物。
权利要求书clms
1.一种无人机实现跟踪目标的控制方法，其特征在于，所述控制方法包括：在旋翼无人机飞行过程中实时调整航向角，以使所述旋翼无人机对准追踪目标；根据当前时刻的飞行参数计算得到下一时刻的期望位置；确定在当前时刻所述旋翼无人机是否触发避障条件；若触发避障条件，则根据预定避障策略计算所述旋翼无人机的第一期望速度；根据所述第一期望速度调整所述旋翼无人机的速度控制器的参数，以使所述旋翼无人机到达期望位置。2.根据权利要求1所述的无人机实现跟踪目标的控制方法，其特征在于，所述控制方法还包括：若未触发避障条件，则根据所述期望位置计算旋翼无人机的第二期望速度；根据所述第二期望速度调整所述旋翼无人机的速度控制器的参数，以使所述旋翼无人机到达期望位置。3.根据权利要求1所述的无人机实现跟踪目标的控制方法，其特征在于，在旋翼无人机飞行过程中实时调整航向角的方法为：获取旋翼无人机携带的云台相机反馈的方位角Ψ；根据方位角ψ计算期望航向角速率r：r＝kp·Ψ根据期望航向角速率r调整航向角速率控制器的参数，以调整航向角，其中kp为航向角速率控制器的比例增益。4.根据权利要求1所述的无人机实现跟踪目标的控制方法，其特征在于，所述根据当前时刻的飞行参数计算得到下一时刻的期望位置的方法包括：获取当前时刻旋翼无人机的空间位置以及旋翼无人机携带的云台相机反馈的俯仰角、云台方位角，所述飞行参数包括所述空间位置、所述俯仰角、所述方位角；根据当前时刻旋翼无人机的所述空间位置、所述俯仰角、所述云台方位角计算得到所述追踪目标的预估位置；根据当前时刻旋翼无人机的所述空间位置和所述追踪目标的预估位置计算得到旋翼无人机下一时刻的期望位置。5.根据权利要求1所述的无人机实现跟踪目标的控制方法，其特征在于，所述确定当前时刻在所述旋翼无人机是否触发避障条件的方法包括：利用所述旋翼无人机携带的避障传感器实时监测飞行前方的障碍物与旋翼无人机的当前距离；若当前距离小于避障距离，则触发避障条件；若当前距离大于或等于避障距离，则不触发避障条件。6.根据权利要求5所述的无人机实现跟踪目标的控制方法，其特征在于，根据预定避障策略计算所述旋翼无人机的第一期望速度的方法为：计算所述当前距离drt与所述避障距离d的差值δd，δd＝drt-d；根据如下公式计算第一期望速度vt1：其中，k表示比例系数，amax表示旋翼飞行器所能达到的最大加速度。7.根据权利要求4所述的无人机实现跟踪目标的控制方法，其特征在于，所述根据所述期望位置计算得到旋翼无人机的第二期望速度的方法为根据如下公式计算第二期望速度vt2：vt2＝kpv·Pt其中，kpv表示比例增益，Pt表示旋翼无人机下一时刻的期望位置。8.一种无人机实现跟踪目标的控制装置，其特征在于，所述控制装置包括：航向调整单元，用于实时调整航向角，以使所述旋翼无人机对准追踪目标；参数计算单元，用于根据当前时刻的飞行参数计算得到下一时刻的期望位置；避障检测单元，确定当前时刻所述旋翼无人机是否触发避障条件；若触发避障条件，参数计算单元用于根据预定避障策略计算所述旋翼无人机的第一期望速度；航速调整单元，用于根据所述第一期望速度调整所述旋翼无人机的速度控制器的参数，以使所述旋翼无人机到达期望位置。9.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有无人机实现跟踪目标的控制程序，所述无人机实现跟踪目标的控制程序被处理器执行时实现权利要求1至7任一项所述的无人机实现跟踪目标的控制方法。10.一种计算机设备，其特征在于，所述计算机设备包括计算机可读存储介质、处理器和存储在所述计算机可读存储介质中的无人机实现跟踪目标的控制程序，所述无人机实现跟踪目标的控制程序被处理器执行时实现权利要求1至7任一项所述的无人机实现跟踪目标的控制方法。
说明书desc
技术领域本发明属于无人机应用技术领域，具体地讲，涉及一种无人机实现跟踪目标的控制方法、控制装置、计算机可读存储介质、计算机设备。背景技术随着无人机控制技术以及传感器技术的发展，无人机场已经被应用越来越多的领域，比如石油管道巡检，水利巡检，电力巡检，光伏，风电巡检，道路，智慧城市/园区，军事等领域。无人机场通常包含两个主要部分：无人机场停机坪；旋翼无人机。无人机场停机坪主要作用：为旋翼无人机自动充放电池；将旋翼无人机获取的前端视屏图像数据通过网络传输给后台云端；遥测数据转发；自动收纳以及放飞无人机。由于无人机场旋翼无人机在进行无人值班任务时，如巡逻，搜救，监视，智慧巡检等任务时，一方面，后台技术人员通过视频回传观测到目标并通知旋翼无人机锁定目标后，需要旋翼飞行器自动跟踪目标，并要求保持目标在旋翼无人机挂载的云台相机画面中央，即云台相机的方位角保持在零度附近，俯仰角保持在负45度附近，这种跟踪方式可以使旋翼无人机在跟踪目标的跟踪，目标时刻处于图像中心，并且使得相机云台在俯仰和方位具备足够的裕度，不会造成目标的丢失，如果使用的相机云台具备抗目标丢失和重新搜索目标的功能，那么旋翼无人机目标跟踪系统鲁棒性将会更好。另一方面，在旋翼无人机跟踪目标进行飞行过程中，特别是在城市中，飞行环境复杂多样，需要旋翼无人机具备避障功能。发明内容本发明所要解决的技术问题本发明解决的技术问题是：如何实现无人机对目标的稳定跟踪以及在跟踪过程中及时躲避障碍物。本发明所采用的技术方案一种无人机实现跟踪目标的控制方法，所述控制方法包括：在旋翼无人机飞行过程中实时调整航向角，以使所述旋翼无人机对准追踪目标；根据当前时刻的飞行参数计算得到下一时刻的期望位置；确定在当前时刻所述旋翼无人机是否触发避障条件；若触发避障条件，则根据预定避障策略计算所述旋翼无人机的第一期望速度；根据所述第一期望速度调整所述旋翼无人机的速度控制器的参数，以使所述旋翼无人机到达期望位置。优选地，所述控制方法还包括：若未触发避障条件，则根据所述期望位置计算旋翼无人机的第二期望速度；根据所述第二期望速度调整所述旋翼无人机的速度控制器的参数，以使所述旋翼无人机到达期望位置。优选地，在旋翼无人机飞行过程中实时调整航向角的方法为：获取旋翼无人机携带的云台相机反馈的方位角Ψ；根据方位角ψ计算期望航向角速率r：r＝kp·Ψ，根据期望航向角速率r调整航向角速率控制器的参数，以调整航向角，其中kp为航向角速率控制器的比例增益。所述根据当前时刻的飞行参数计算得到下一时刻的期望位置的方法包括：获取当前时刻旋翼无人机的空间位置以及旋翼无人机携带的云台相机反馈的俯仰角、云台方位角，所述飞行参数包括所述空间位置、所述俯仰角、所述方位角；根据当前时刻旋翼无人机的所述空间位置、所述俯仰角、所述云台方位角计算得到所述追踪目标的预估位置；根据当前时刻旋翼无人机的所述空间位置和所述追踪目标的预估位置计算得到旋翼无人机下一时刻的期望位置。优选地，所述确定当前时刻在所述旋翼无人机是否触发避障条件的方法包括：利用所述旋翼无人机携带的避障传感器实时监测飞行前方的障碍物与旋翼无人机的当前距离；若当前距离小于避障距离，则触发避障条件；若当前距离大于或等于避障距离，则不触发避障条件。优选地，根据预定避障策略计算所述旋翼无人机的第一期望速度的方法为：计算所述当前距离drt与所述避障距离d的差值δd，δd＝drt-d；根据如下公式计算第一期望速度vt1：其中，k表示比例系数，amax表示旋翼飞行器所能达到的最大加速度。优选地，所述根据所述期望位置计算得到旋翼无人机的第二期望速度的方法为根据如下公式计算第二期望速度vt2：vt2＝kpv·Pt其中，kpv表示比例增益，Pt表示旋翼无人机下一时刻的期望位置。本申请还公开了一种无人机实现跟踪目标的控制装置，所述控制装置包括：航向调整单元，用于实时调整航向角，以使所述旋翼无人机对准追踪目标；参数计算单元，用于根据当前时刻的飞行参数计算得到下一时刻的期望位置；避障检测单元，确定当前时刻所述旋翼无人机是否触发避障条件；若触发避障条件，参数计算单元用于根据预定避障策略计算所述旋翼无人机的第一期望速度；航速调整单元，用于根据所述第一期望速度调整所述旋翼无人机的速度控制器的参数，以使所述旋翼无人机到达期望位置。本申请还公开了一种计算机可读存储介质，所述计算机可读存储介质存储有无人机实现跟踪目标的控制程序，所述无人机实现跟踪目标的控制程序被处理器执行时实现上述的无人机实现跟踪目标的控制方法。本申请还公开了一种计算机设备，所述计算机设备包括计算机可读存储介质、处理器和存储在所述计算机可读存储介质中的无人机实现跟踪目标的控制程序，所述无人机实现跟踪目标的控制程序被处理器执行时实现上述的无人机实现跟踪目标的控制方法。有益效果本发明公开了一种无人机实现跟踪目标的控制方法和控制装置，相对于现有方法，具有如下技术效果：当探测到旋翼无人机触发避障条件时，调用预定避障策略计算得到第一期望速度，使旋翼无人机按照第一期望速度到达期望位置，若未触发避障条件时，按照正常飞行策略控制旋翼无人机的飞行，这样既可以保证旋翼无人机稳定地跟踪目标，又可以及时躲避障碍物。附图说明图1为本发明的实施例一的无人机实现跟踪目标的控制方法的流程图；图2为本发明的实施例一的运动目标追踪系统纵向示意图；图3为本发明的实施例一的运动目标追踪系统横向示意图；图4为本发明的实施例一的运动目标追踪系统位置推算示意图；图5为本发明的实施例一的第一期望速度随当前距离与避障距离的差值的趋势变化图；图6为本发明的实施例二的无人机实现跟踪目标的控制装置的原理框图；图7为本发明的实施例四的计算机设备示意图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。在详细描述本申请的各个实施例之前，首先简单描述本申请的发明构思：现有技术中利用无人机跟踪目标时，往往存在无法稳定跟踪和无法及时躲避障碍物等问题，为此，本申请提供了一种无人机实现跟踪目标的控制方法，在旋翼无人机飞行过程中实时调整航向角，以使旋翼无人机对准追踪目标，实时检测在当前时刻旋翼无人机是否触发避障条件，当触发避障条件，调用预定避障策略计算出第一期望速度，使得旋翼无人机按照第一期望速度到达期望位置，以及时的躲避障碍物，同时保证了旋翼无人机的平稳飞行。如图1所示，本实施例一公开了无人机实现跟踪目标的控制方法包括如下步骤：步骤S10：在旋翼无人机飞行过程中实时调整航向角，以使旋翼无人机对准追踪目标；步骤S20：根据当前时刻的飞行参数计算得到下一时刻的期望位置；步骤S30：确定在当前时刻所述旋翼无人机是否触发避障条件；步骤S31：若触发避障条件，则根据预定避障策略计算所述旋翼无人机的第一期望速度；步骤S40：根据所述第一期望速度调整所述旋翼无人机的速度控制器的参数，以使所述旋翼无人机达到期望位置。在对具体步骤进行描述之前，首先建立旋翼无人机的目标跟踪系统模型，并进行变量定义。图2为运动目标追踪系统纵向示意图，图3为运动目标追踪系统横向示意图。图2和图3中的变量定义如下：旋翼无人机速度：Vv，旋翼无人机位置：Pv，旋翼无人机与目标之间的斜距：l，旋翼无人机与目标之间的水平距离为：d，旋翼无人机的飞行高度：h，旋翼无人机挂载的云台相机俯仰角：θ，旋翼无人机挂在的云台相机方位角：Ψ，旋翼无人机挂载的云台相机光轴与垂直面的夹角目标速度：Vc，目标位置Pc。云台相机的俯仰角度θ的范围满足如下条件：云台相机的方位角度ψ的范围满足如下条件：Ψ∈为了保证目标使用保持在云台相机的图像中心，俯仰角θ应该满足那么根据图2可推出：由于旋翼无人机的飞行高度h已知，可得即旋翼无人机与目标的水平距离等于旋翼无人机的飞行高度，即可满足云台相机的俯仰角度为即使由于运动过程中的干扰目标偏离了图像中心，旋翼无人机仍然有足够的裕度使得目标回到图像中心。为了保证目标始终保持在云台相机的图像中心，云台相机的方位角ψ应该满足：ψ＝0。在步骤S10中，在旋翼无人机飞行过程中实时调整航向角的方法包括如下步骤：步骤S11、获取旋翼无人机携带的云台相机反馈的方位角。步骤S12、根据方位角Ψ计算期望航向角速率r：r＝kp·Ψ步骤S13、根据期望航向角速率r调整航向角速率控制器的参数，以调整航向角，其中kp为航向角速率控制器的比例增益。在步骤S20中，根据当前时刻的飞行参数计算得到下一时刻的期望位置的方法包括如下步骤：步骤S21：获取当前时刻旋翼无人机的空间位置以及旋翼无人机携带的云台相机反馈的俯仰角、云台方位角，所述飞行参数包括所述空间位置、所述俯仰角、所述云台方位角；步骤S22：根据当前时刻旋翼无人机的所述空间位置、所述俯仰角、所述方位角计算得到所述追踪目标的预估位置；步骤S23：根据当前时刻旋翼无人机的所述空间位置和所述追踪目标的预估位置计算得到旋翼无人机下一时刻的期望位置。具体来讲，如图4所示，假设k时刻旋翼无人机的位置为：Pkv＝k+1时刻追踪目标的位置为：Pt＝那么k+1时刻旋翼无人机的目标位置：Pv＝要实现稳定追踪，需满足如下条件：水平位置满足：k时刻旋翼无人机位置，k+1时刻目标位置，k+1时刻旋翼无人机位置满足共线方程：根据上述两式可得到k+1时刻的旋翼无人机目标位置：zv＝h＝zkv为了保证飞行安全，实际应用过程中h大于或等于50米，这样能避免高楼及树木的干扰。进一步地，追踪目标的预估位置的计算公式如下：xt＝xkv+d·cosyt＝ykv+d·sin其中，θ为云台相机反馈的云台俯仰角，Ψ为云台相机反馈的云台方位角。在步骤S30中，确定在当前时刻旋翼无人机是否触发避障条件的方法为：利用所述旋翼无人机携带的避障传感器实时监测飞行前方的障碍物与旋翼无人机的当前距离；若当前距离小于避障距离，则触发避障条件；若当前距离大于或等于避障距离，则不触发避障条件。示例性地，避障距离选为35m。进一步地，在步骤S31中，预定避障策略计算所述旋翼无人机的第一期望速度的方法包括：计算所述当前距离drt与所述避障距离d的差值δd，δd＝drt-d；根据如下公式计算第一期望速度vt1：其中，k表示比例系数，amax表示旋翼飞行器所能达到的最大加速度。上式的曲线如图5所示，通过在连接处连续并可微，有如下式子成立：进一步地，控制方法还包括如下步骤：步骤S32：若未触发避障条件，则根据所述期望位置计算旋翼无人机的第二期望速度；步骤S41：根据第二期望速度调整旋翼无人机的速度控制器的参数，以使旋翼无人机达到期望位置。其中，在步骤S32中，根据期望位置计算得到旋翼无人机的第二期望速度的方法为根据如下公式计算第二期望速度vt2：vt2＝kpv·Pt其中，kpv表示比例增益，Pt表示旋翼无人机下一时刻的期望位置。本实施例一公开的无人机实现跟踪目标的控制方法，当探测到旋翼无人机触发避障条件时，调用预定避障策略计算得到第一期望速度，使旋翼无人机按照第一期望速度到达期望位置，若未触发避障条件时，按照正常飞行策略控制旋翼无人机的飞行，这样既可以保证旋翼无人机稳定地跟踪目标，又可以及时躲避障碍物。如图6所示，本实施例二还公开了一种无人机实现跟踪目标的控制装置，该控制装置包括航向调整单元100、参数计算单元200、避障检测单元300和航速调整单元400。航向调整单元100用于实时调整航向角，以使旋翼无人机对准追踪目标；参数计算单元200用于根据当前时刻的飞行参数计算得到下一时刻的期望位置；避障检测单元300确定当前时刻在旋翼无人机是否触发避障条件；若触发避障条件，参数计算单元200用于根据预定避障策略计算旋翼无人机的第一期望速度；航速调整单元400用于根据第一期望速度调整旋翼无人机的速度控制器的参数，以使旋翼无人机到达期望位置。进一步地，当未触发避障条件，参数计算单元200还用于根据期望位置计算旋翼无人机的第二期望速度；航速调整单元400还用于根据第二期望速度调整旋翼无人机的速度控制器的参数，以使旋翼无人机到达期望位置。本实施例三还公开了一种计算机可读存储介质，所述计算机可读存储介质存储有无人机实现跟踪目标的控制程序，所述无人机实现跟踪目标的控制程序被处理器执行时实现实施例一的无人机实现跟踪目标的控制方法。本实施例四还公开了一种计算机设备，在硬件层面，如图7所示，该终端包括处理器12、内部总线13、网络接口14、计算机可读存储介质11。处理器12从计算机可读存储介质中读取对应的计算机程序然后运行，在逻辑层面上形成请求处理装置。当然，除了软件实现方式之外，本说明书一个或多个实施例并不排除其他实现方式，比如逻辑器件抑或软硬件结合的方式等等，也就是说以下处理流程的执行主体并不限定于各个逻辑单元，也可以是硬件或逻辑器件。所述计算机可读存储介质11上存储有无人机实现跟踪目标的控制程序，所述无人机实现跟踪目标的控制程序被处理器执行时实现实施例一的无人机实现跟踪目标的控制方法。计算机可读存储介质包括永久性和非永久性、可移动和非可移动媒体可以由任何方法或技术来实现信息存储。信息可以是计算机可读指令、数据结构、程序的模块或其他数据。计算机可读存储介质的例子包括，但不限于相变内存、静态随机存取存储器、动态随机存取存储器、其他类型的随机存取存储器、只读存储器、电可擦除可编程只读存储器、快闪记忆体或其他内存技术、只读光盘只读存储器、数字多功能光盘或其他光学存储、磁盒式磁带、磁盘存储、量子存储器、基于石墨烯的存储介质或其他磁性存储设备或任何其他非传输介质，可用于存储可以被计算设备访问的信息。上面对本发明的具体实施方式进行了详细描述，虽然已表示和描述了一些实施例，但本领域技术人员应该理解，在不脱离由权利要求及其等同物限定其范围的本发明的原理和精神的情况下，可以对这些实施例进行修改和完善，这些修改和完善也应在本发明的保护范围内。
