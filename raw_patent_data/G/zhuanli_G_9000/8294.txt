标题title
一种基于CPLD减少连接器信号的传输方法和装置
摘要abst
本发明提供一种基于CPLD减少连接器信号的传输方法、系统、设备和存储介质，方法包括：在第一主板的CPLD中分别设置第一发送单元和第一接收单元，在第二主板的CPLD中分别设置第二发送单元和第二接收单元；分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式；将转换成UART格式的数据通过低电压差分信号接口分别传输到所述第二接收单元和所述第一接收单元；以及分别在所述第二接收单元和所述第一接收单元中将接收到的UART格式得到数据进行译码。本发明通过UART传输方式与LVDS接口的结合，不仅保有LVDS抗噪声之特性，还减少数据传送所需管脚的数量。
权利要求书clms
1.一种基于CPLD减少连接器信号的传输方法，其特征在于，包括如下步骤：在第一主板的CPLD中分别设置第一发送单元和第一接收单元，在第二主板的CPLD中分别设置第二发送单元和第二接收单元；分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式；将转换成UART格式的数据通过低电压差分信号接口分别传输到所述第二接收单元和所述第一接收单元；以及分别在所述第二接收单元和所述第一接收单元中将接收到的UART格式得到数据进行译码。2.根据权利要求1所述的传输方法，其特征在于，所述分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式包括：在所述第一发送单元和所述第二发送单元中设置预设值作为同步信号以识别第一笔封包。3.根据权利要求1所述的传输方法，其特征在于，所述分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式包括：在所述第一发送单元和所述第二发送单元中设置检查码以对封包中的数据进行检测。4.根据权利要求1所述的传输方法，其特征在于，传输方法还包括：通过传输通道在所述第一主板和所述第二主板之间传输高速信号和边带信号。5.一种基于CPLD减少连接器信号的传输系统，其特征在于，包括：设置模块，配置用于在第一主板的CPLD中分别设置第一发送单元和第一接收单元，在第二主板的CPLD中分别设置第二发送单元和第二接收单元；转换模块，配置用于分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式；传输模块，配置用于将转换成UART格式的数据通过低电压差分信号接口分别传输到所述第二接收单元和所述第一接收单元；以及译码模块，配置用于分别在所述第二接收单元和所述第一接收单元中将接收到的UART格式得到数据进行译码。6.根据权利要求5所述的传输系统，其特征在于，所述转换模块配置用于：在所述第一发送单元和所述第二发送单元中设置预设值作为同步信号以识别第一笔封包。7.根据权利要求5所述的传输系统，其特征在于，所述转换模块配置用于：在所述第一发送单元和所述第二发送单元中设置检查码以对封包中的数据进行检测。8.根据权利要求5所述的传输系统，其特征在于，传输系统还包括第二传输模块，配置用于：通过传输通道在所述第一主板和所述第二主板之间传输高速信号和边带信号。9.一种计算机设备，其特征在于，包括：至少一个处理器；以及存储器，所述存储器存储有可在所述处理器上运行的计算机指令，所述指令由所述处理器执行时实现权利要求1-4任意一项所述方法的步骤。10.一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1-4任意一项所述方法的步骤。
说明书desc
技术领域本发明涉及服务器领域，更具体地，特别是指一种基于CPLD减少连接器信号的传输方法、系统、设备和存储介质。背景技术Intel在市面上推出各式各样的服务器，包含了整片主板架构，和模块化分片式架构，客户可根据需求挑选出合适的产品。其中模块化分片式架构主要分成两块，一片是CPU为主的板子，另一片是PCH和BMC为主的板子。这种模块化分片式架构的系统对于连接器的依赖非常大，因为CPU和PCH之间的信号都是透过连接器传输，包含了高速信号PCIE，或是低速信号的SMBUS；又或者是多路架构系统中，CPU板和CPU板之间的交互传递讯息等等。而研发团队在设计系统时，大部分都会先参考Intel公版设计来缩短开发时程，但Intel公板设计不见得适合所有设计需求。图1为目前Intel提供的模块化分片式服务器架构，一边称为ICM Board,主要包含了BMC和PCH；另一边为BaseBoard，则是包含了CPU和DDR5DIMM Memory。两片板子的数据传输包含了高速信号，Sideband信号，还有CPLD相互沟通透过LVDS接口传输的数据等等。而这两个CPLD透过LVDS传送接收则是需要各四个管脚来实现功能。目前Intel提供的模块化分片式服务器架构的参考设计，若是在板子空间和连接器管脚充裕条件下，没什么问题。但若是面临到有空间需求时，空间不足且连接器的管脚不足情况下，则会面临设计上的挑战。发明内容有鉴于此，本发明实施例的目的在于提出一种基于CPLD减少连接器信号的传输方法、系统、计算机设备及计算机可读存储介质，本发明通过UART传输方式与LVDS接口的结合，不仅保有LVDS抗噪声之特性，还减少数据传送所需管脚的数量；并定义传输封包格式，包含了SYNC ID、DATA和CRC检查码来提升数据正确性。基于上述目的，本发明实施例的一方面提供了一种基于CPLD减少连接器信号的传输方法，包括如下步骤：在第一主板的CPLD中分别设置第一发送单元和第一接收单元，在第二主板的CPLD中分别设置第二发送单元和第二接收单元；分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式；将转换成UART格式的数据通过低电压差分信号接口分别传输到所述第二接收单元和所述第一接收单元；以及分别在所述第二接收单元和所述第一接收单元中将接收到的UART格式得到数据进行译码。在一些实施方式中，所述分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式包括：在所述第一发送单元和所述第二发送单元中设置预设值作为同步信号以识别第一笔封包。在一些实施方式中，所述分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式包括：在所述第一发送单元和所述第二发送单元中设置检查码以对封包中的数据进行检测。在一些实施方式中，传输方法还包括：通过传输通道在所述第一主板和所述第二主板之间传输高速信号和边带信号。本发明实施例的另一方面，提供了一种基于CPLD减少连接器信号的传输系统，包括：设置模块，配置用于在第一主板的CPLD中分别设置第一发送单元和第一接收单元，在第二主板的CPLD中分别设置第二发送单元和第二接收单元；转换模块，配置用于分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式；传输模块，配置用于将转换成UART格式的数据通过低电压差分信号接口分别传输到所述第二接收单元和所述第一接收单元；以及译码模块，配置用于分别在所述第二接收单元和所述第一接收单元中将接收到的UART格式得到数据进行译码。在一些实施方式中，所述转换模块配置用于：在所述第一发送单元和所述第二发送单元中设置预设值作为同步信号以识别第一笔封包。在一些实施方式中，所述转换模块配置用于：在所述第一发送单元和所述第二发送单元中设置检查码以对封包中的数据进行检测。在一些实施方式中，传输系统还包括第二传输模块，配置用于：通过传输通道在所述第一主板和所述第二主板之间传输高速信号和边带信号。本发明实施例的又一方面，还提供了一种计算机设备，包括：至少一个处理器；以及存储器，所述存储器存储有可在所述处理器上运行的计算机指令，所述指令由所述处理器执行时实现如上方法的步骤。本发明实施例的再一方面，还提供了一种计算机可读存储介质，计算机可读存储介质存储有被处理器执行时实现如上方法步骤的计算机程序。本发明具有以下有益技术效果：通过UART传输方式与LVDS接口的结合，不仅保有LVDS抗噪声之特性，还减少数据传送所需管脚的数量；并定义传输封包格式，包含了SYNCID、DATA和CRC检查码来提升数据正确性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的实施例。图1为现有技术中模块化分片式服务器架构连接示意图；图2为本发明提供的基于CPLD减少连接器信号的传输方法的实施例的示意图；图3为本发明实施例中模块化分片式服务器架构连接示意图；图4为第一发送单元的架构示意图；图5为第一接收单元的架构示意图；图6为本发明提供的基于CPLD减少连接器信号的传输系统的实施例的示意图；图7为本发明提供的基于CPLD减少连接器信号的传输方法的计算机设备的实施例的硬件结构示意图；图8为本发明提供的基于CPLD减少连接器信号的传输方法的计算机存储介质的实施例的示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚明白，以下结合具体实施例，并参照附图，对本发明实施例进一步详细说明。需要说明的是，本发明实施例中所有使用“第一”和“第二”的表述均是为了区分两个相同名称非相同的实体或者非相同的参量，可见“第一”“第二”仅为了表述的方便，不应理解为对本发明实施例的限定，后续实施例对此不再一一说明。本发明实施例的第一个方面，提出了一种基于CPLD减少连接器信号的传输方法的实施例。图2示出的是本发明提供的基于CPLD减少连接器信号的传输方法的实施例的示意图。如图2所示，本发明实施例包括如下步骤：S1、在第一主板的CPLD中分别设置第一发送单元和第一接收单元，在第二主板的CPLD中分别设置第二发送单元和第二接收单元；S2、分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式；S3、将转换成UART格式的数据通过低电压差分信号接口分别传输到所述第二接收单元和所述第一接收单元；以及S4、分别在所述第二接收单元和所述第一接收单元中将接收到的UART格式得到数据进行译码。在第一主板的CPLD中分别设置第一发送单元和第一接收单元，在第二主板的CPLD中分别设置第二发送单元和第二接收单元。图3为本发明实施例中模块化分片式服务器架构连接示意图。如图3所示，第一主板可以是ICM Board，第二主板可以是BaseBoard，第一主板中的TX CTRL为第一发送单元，第一主板中的RX CTRL为第一接收单元，第二主板中的TXCTRL为第二发送单元，第二主板中的RX CTRL为第二接收单元。本发明实施例相较于现有技术的差异是少了LVDS CLK信号，只留下LVDSDATA信号来进行传输；此目的不但保留了LVDS接口特性，提供较佳的抗噪声传输能力，且减少了LVDS CLK信号，传送端和接收端总共减少了四支管脚。由于没有了LVDS CLK信号，所以需要一个异步机制的数据传输，让双方可以正确收发资料，这部分则是用UART的编码方式进行数据传输。传送端和接收端的模块分别是TX CTRL和RXCTRL。分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式。将转换成UART格式的数据通过低电压差分信号接口分别传输到所述第二接收单元和所述第一接收单元。分别在所述第二接收单元和所述第一接收单元中将接收到的UART格式得到数据进行译码。图4为第一发送单元的架构示意图。如图4所示，第一发送单元或第二发送单元主要是由Data Packet模块再加上UART TX Transmit模块所组成。图5为第一接收单元的架构示意图。如图5所示，第一接收单元或第二接收单元同样也是由Data Packet模块再加上UART RX Decoder模块所组成。Data Packet模块主要分成三个部分，第一个是SYNCID模块，主要是送出特定值来当同步信号，用来识别第一笔封包；第二个则是Data模块，顾名思义的就是需要传送的数据；第三模块则是CRC8检查码，用来检测封包的数据，提升数据正确性。在一些实施方式中，所述分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式包括：在所述第一发送单元和所述第二发送单元中设置预设值作为同步信号以识别第一笔封包。在一些实施方式中，所述分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式包括：在所述第一发送单元和所述第二发送单元中设置检查码以对封包中的数据进行检测。在一些实施方式中，传输方法还包括：通过传输通道在所述第一主板和所述第二主板之间传输高速信号和边带信号。具体的，发射端和接收端各保留两个PIN，作为LVDS传输接口使用，此接口只有LVDS DATA信号，传送端建立UART TX Transmit单元，负责将数据转换成UART格式，接收段建立UART RX Decoder单元，负责将收到UART的数据进行译码，UART传送和接收的过程，都是使用LVDS接口进行传输，传送端和接收端都是采用相同的Data Packet格式，其中包含了SYNC ID，Data和CRC8检查码。需要特别指出的是，上述基于CPLD减少连接器信号的传输方法的各个实施例中的各个步骤均可以相互交叉、替换、增加、删减，因此，这些合理的排列组合变换之于基于CPLD减少连接器信号的传输方法也应当属于本发明的保护范围，并且不应将本发明的保护范围局限在实施例之上。基于上述目的，本发明实施例的第二个方面，提出了一种基于CPLD减少连接器信号的传输系统。如图6所示，系统200包括如下模块：设置模块，配置用于在第一主板的CPLD中分别设置第一发送单元和第一接收单元，在第二主板的CPLD中分别设置第二发送单元和第二接收单元；转换模块，配置用于分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式；传输模块，配置用于将转换成UART格式的数据通过低电压差分信号接口分别传输到所述第二接收单元和所述第一接收单元；以及译码模块，配置用于分别在所述第二接收单元和所述第一接收单元中将接收到的UART格式得到数据进行译码。在一些实施方式中，所述转换模块配置用于：在所述第一发送单元和所述第二发送单元中设置预设值作为同步信号以识别第一笔封包。在一些实施方式中，所述转换模块配置用于：在所述第一发送单元和所述第二发送单元中设置检查码以对封包中的数据进行检测。在一些实施方式中，传输系统还包括第二传输模块，配置用于：通过传输通道在所述第一主板和所述第二主板之间传输高速信号和边带信号。基于上述目的，本发明实施例的第三个方面，提出了一种计算机设备，包括：至少一个处理器；以及存储器，存储器存储有可在处理器上运行的计算机指令，指令由处理器执行以实现如下步骤：S1、在第一主板的CPLD中分别设置第一发送单元和第一接收单元，在第二主板的CPLD中分别设置第二发送单元和第二接收单元；S2、分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式；S3、将转换成UART格式的数据通过低电压差分信号接口分别传输到所述第二接收单元和所述第一接收单元；以及S4、分别在所述第二接收单元和所述第一接收单元中将接收到的UART格式得到数据进行译码。在一些实施方式中，所述分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式包括：在所述第一发送单元和所述第二发送单元中设置预设值作为同步信号以识别第一笔封包。在一些实施方式中，所述分别在所述第一发送单元和所述第二发送单元将数据转换成UART格式包括：在所述第一发送单元和所述第二发送单元中设置检查码以对封包中的数据进行检测。在一些实施方式中，步骤还包括：通过传输通道在所述第一主板和所述第二主板之间传输高速信号和边带信号。如图7所示，为本发明提供的上述基于CPLD减少连接器信号的传输方法的计算机设备的一个实施例的硬件结构示意图。以如图7所示的装置为例，在该装置中包括一个处理器301以及一个存储器302。处理器301和存储器302可以通过总线或者其他方式连接，图7中以通过总线连接为例。存储器302作为一种非易失性计算机可读存储介质，可用于存储非易失性软件程序、非易失性计算机可执行程序以及模块，如本申请实施例中的基于CPLD减少连接器信号的传输方法对应的程序指令/模块。处理器301通过运行存储在存储器302中的非易失性软件程序、指令以及模块，从而执行服务器的各种功能应用以及数据处理，即实现基于CPLD减少连接器信号的传输方法。存储器302可以包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需要的应用程序；存储数据区可存储根据基于CPLD减少连接器信号的传输方法的使用所创建的数据等。此外，存储器302可以包括高速随机存取存储器，还可以包括非易失性存储器，例如至少一个磁盘存储器件、闪存器件、或其他非易失性固态存储器件。在一些实施例中，存储器302可选包括相对于处理器301远程设置的存储器，这些远程存储器可以通过网络连接至本地模块。上述网络的实例包括但不限于互联网、企业内部网、局域网、移动通信网及其组合。一个或者多个基于CPLD减少连接器信号的传输方法对应的计算机指令303存储在存储器302中，当被处理器301执行时，执行上述任意方法实施例中的基于CPLD减少连接器信号的传输方法。执行上述基于CPLD减少连接器信号的传输方法的计算机设备的任何一个实施例，可以达到与之对应的前述任意方法实施例相同或者相类似的效果。本发明还提供了一种计算机可读存储介质，计算机可读存储介质存储有被处理器执行时执行基于CPLD减少连接器信号的传输方法的计算机程序。如图8所示，为本发明提供的上述基于CPLD减少连接器信号的传输方法的计算机存储介质的一个实施例的示意图。以如图8所示的计算机存储介质为例，计算机可读存储介质401存储有被处理器执行时执行如上方法的计算机程序402。最后需要说明的是，本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，可以通过计算机程序来指令相关硬件来完成，基于CPLD减少连接器信号的传输方法的程序可存储于一计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，程序的存储介质可为磁碟、光盘、只读存储记忆体或随机存储记忆体等。上述计算机程序的实施例，可以达到与之对应的前述任意方法实施例相同或者相类似的效果。以上是本发明公开的示例性实施例，但是应当注意，在不背离权利要求限定的本发明实施例公开的范围的前提下，可以进行多种改变和修改。根据这里描述的公开实施例的方法权利要求的功能、步骤和/或动作不需以任何特定顺序执行。此外，尽管本发明实施例公开的元素可以以个体形式描述或要求，但除非明确限制为单数，也可以理解为多个。应当理解的是，在本文中使用的，除非上下文清楚地支持例外情况，单数形式“一个”旨在也包括复数形式。还应当理解的是，在本文中使用的“和/或”是指包括一个或者一个以上相关联地列出的项目的任意和所有可能组合。上述本发明实施例公开实施例序号仅仅为了描述，不代表实施例的优劣。本领域普通技术人员可以理解实现上述实施例的全部或部分步骤可以通过硬件来完成，也可以通过程序来指令相关的硬件完成，程序可以存储于一种计算机可读存储介质中，上述提到的存储介质可以是只读存储器，磁盘或光盘等。所属领域的普通技术人员应当理解：以上任何实施例的讨论仅为示例性的，并非旨在暗示本发明实施例公开的范围被限于这些例子；在本发明实施例的思路下，以上实施例或者不同实施例中的技术特征之间也可以进行组合，并存在如上的本发明实施例的不同方面的许多其它变化，为了简明它们没有在细节中提供。因此，凡在本发明实施例的精神和原则之内，所做的任何省略、修改、等同替换、改进等，均应包含在本发明实施例的保护范围之内。
