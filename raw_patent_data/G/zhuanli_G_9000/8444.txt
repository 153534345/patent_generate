标题title
数据备份方法、装置、设备及存储介质
摘要abst
本发明属于数据处理技术领域，公开了一种数据备份方法、装置、设备及存储介质。本发明通过在获取到故障转移集群中集群盘的读写权限时，确定集群盘中的备份记录区域，获取备份记录区域中对应的历史备份信息，根据历史备份信息确定集群盘中的待备份数据，并对待备份数据进行增量备份。相比现有技术在获取故障转移集群中集群盘的权限时只能进行全量备份，本发明通过在获取到集群盘的读取权限时，根据备份记录区域中的历史备份信息确定集群盘中的待备份数据，并对待备份数据进行增量备份，实现了对集群盘的增量备份，有效避免了在集群盘权限转移后需要重新进行全量备份的问题，提升了集群盘数据备份的效率，有效节省了备份时间。
权利要求书clms
1.一种数据备份方法，应用于故障转移集群中的服务器，其特征在于，所述数据备份方法包括：在获取到故障转移集群中集群盘的读写权限时，确定所述集群盘中的备份记录区域；获取所述备份记录区域中对应的历史备份信息；根据所述历史备份信息确定所述集群盘中的待备份数据，并对所述待备份数据进行增量备份。2.如权利要求1所述的数据备份方法，其特征在于，所述在获取到故障转移集群中集群盘的读写权限时，确定所述集群盘中的备份记录区域之前，所述方法还包括：判断故障转移集群中的集群盘对应的文件系统是否为可识别文件系统；在所述集群盘对应的文件系统为不可识别文件系统时，根据所述文件系统在所述集群盘中创建备份记录区域。3.如权利要求2所述的数据备份方法，其特征在于，所述在所述集群盘对应的文件系统为不可识别文件系统时，根据所述文件系统在所述集群盘中创建备份记录区域之后，所述方法还包括：在检测到所述故障转移集群中的主服务器对所述集群盘中的待备份数据进行增量备份时，获取所述待备份数据的数据信息；根据所述数据信息生成所述待备份数据对应的备份信息；将所述备份信息保存至所述备份记录区域中。4.如权利要求2所述的数据备份方法，其特征在于，所述判断故障转移集群中的集群盘对应的文件系统是否为可识别文件系统之后，所述方法还包括：在所述集群盘对应的文件系统为可识别文件系统时，确定所述文件系统的文件系统类型；根据所述文件系统类型在所述集群盘中创建备份记录文件。5.如权利要求4所述的数据备份方法，其特征在于，所述根据所述文件系统类型在所述集群盘中创建备份记录文件之后，所述方法还包括：在检测到所述故障转移集群中的主服务器对所述集群盘中的待备份数据进行增量备份时，获取所述待备份数据的数据信息；根据所述数据信息生成所述待备份数据对应的备份信息；将所述备份信息保存至所述备份记录文件中。6.如权利要求1至5中任一项所述的数据备份方法，其特征在于，所述根据所述历史备份信息确定所述集群盘中的待备份数据，并对所述待备份数据进行增量备份，包括：根据所述历史备份信息确定所述集群盘中的待备份数据，并确定所述待备份数据的数据信息；对所述待备份数据进行增量备份，获得增量备份结果；根据所述增量备份结果和所述数据信息生成所述待备份数据对应的备份信息；将所述备份信息保存至所述备份记录区域中。7.如权利要求6所述的数据备份方法，其特征在于，所述将所述备份信息保存至所述备份记录区域中之前，所述方法还包括：将所述历史备份信息从所述备份记录区域中删除。8.一种数据备份装置，其特征在于，所述数据备份装置包括：权限获取模块，用于在获取到故障转移集群中集群盘的读写权限时，确定所述集群盘中的备份记录区域；备份记录模块，用于获取所述备份记录区域中对应的历史备份信息；增量备份模块，用于根据所述历史备份信息确定所述集群盘中的待备份数据，并对所述待备份数据进行增量备份。9.一种数据备份设备，其特征在于，所述数据备份设备包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的数据备份程序，所述数据备份程序配置为实现如权利要求1至7中任一项所述的数据备份方法。10.一种存储介质，其特征在于，所述存储介质上存储有数据备份程序，所述数据备份程序被处理器执行时实现如权利要求1至7任一项所述的数据备份方法。
说明书desc
技术领域本发明涉及数据处理技术领域，尤其涉及一种数据备份方法、装置、设备及存储介质。背景技术随着科学技术的发展和社会的进步，数据的安全性越来越重要，因此数据一般都是保存在集群磁盘中。在现有的集群磁盘数据管理中，同一时间只有一台主服务器拥有对集群盘读写的权限，因此在主服务器出现故障时，主服务器的读写权限会被转移至主服务器所在的故障转移集群中的其他备用服务器中。现有技术中备用服务器在接管到集群盘的读写权限时，备用服务器并不知道发生故障的服务器写入了那些数据，因此备用服务在对集群盘进行备份时只能进行全量备份，即对集群盘中的所有有效数据进行备份，因此导致备份效率极低，且备份耗时长。上述内容仅用于辅助理解本发明的技术方案，并不代表承认上述内容是现有技术。发明内容本发明的主要目的在于提供一种数据备份方法、装置、设备及存储介质，旨在解决现有技术中备用服务器只能进行全量备份，导致备份效率低的技术问题。为实现上述目的，本发明提供了一种数据备份方法，所述方法包括以下步骤：在获取到故障转移集群中集群盘的读写权限时，确定所述集群盘中的备份记录区域；获取所述备份记录区域中对应的历史备份信息；根据所述历史备份信息确定所述集群盘中的待备份数据，并对所述待备份数据进行增量备份。可选地，所述在获取到故障转移集群中集群盘的读写权限时，确定所述集群盘中的备份记录区域之前，所述方法还包括：判断故障转移集群中的集群盘对应的文件系统是否为可识别文件系统；在所述集群盘对应的文件系统为不可识别文件系统时，根据所述文件系统在所述集群盘中创建备份记录区域。可选地，所述在所述集群盘对应的文件系统为不可识别文件系统时，根据所述文件系统在所述集群盘中创建备份记录区域之后，所述方法还包括：在检测到所述故障转移集群中的主服务器对所述集群盘中的待备份数据进行增量备份时，获取所述待备份数据的数据信息；根据所述数据信息生成所述待备份数据对应的备份信息；将所述备份信息保存至所述备份记录区域中。可选地，所述判断故障转移集群中的集群盘对应的文件系统是否为可识别文件系统之后，所述方法还包括：在所述集群盘对应的文件系统为可识别文件系统时，确定所述文件系统的文件系统类型；根据所述文件系统类型在所述集群盘中创建备份记录文件。可选地，所述根据所述文件系统类型在所述集群盘中创建备份记录文件之后，所述方法还包括：在检测到所述故障转移集群中的主服务器对所述集群盘中的待备份数据进行增量备份时，获取所述待备份数据的数据信息；根据所述数据信息生成所述待备份数据对应的备份信息；将所述备份信息保存至所述备份记录文件中。可选地，所述根据所述历史备份信息确定所述集群盘中的待备份数据，并对所述待备份数据进行增量备份，包括：根据所述历史备份信息确定所述集群盘中的待备份数据，并确定所述待备份数据的数据信息；对所述待备份数据进行增量备份，获得增量备份结果；根据所述增量备份结果和所述数据信息生成所述待备份数据对应的备份信息；将所述备份信息保存至所述备份记录区域中。可选地，所述将所述备份信息保存至所述备份记录区域中之前，所述方法还包括：将所述历史备份信息从所述备份记录区域中删除。此外，为实现上述目的，本发明还提出一种数据备份装置，所述数据备份装置包括：权限获取模块，用于在获取到故障转移集群中集群盘的读写权限时，确定所述集群盘中的备份记录区域；备份记录模块，用于获取所述备份记录区域中对应的历史备份信息；增量备份模块，用于根据所述历史备份信息确定所述集群盘中的待备份数据，并对所述待备份数据进行增量备份。此外，为实现上述目的，本发明还提出一种数据备份设备，所述数据备份设备包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的数据备份程序，所述数据备份程序配置为实现如上文所述的数据备份方法的步骤。此外，为实现上述目的，本发明还提出一种存储介质，所述存储介质上存储有数据备份程序，所述数据备份程序被处理器执行时实现如上文所述的数据备份方法的步骤。本发明通过在获取到故障转移集群中集群盘的读写权限时，确定所述集群盘中的备份记录区域，获取所述备份记录区域中对应的历史备份信息，根据所述历史备份信息确定所述集群盘中的待备份数据，并对所述待备份数据进行增量备份。由于本发明根据备份记录区域中的历史备份信息确定集群盘中的待备份数据，并对待备份数据进行增量备份，实现了对集群盘的增量备份，有效避免了在集群盘权限转移后需要重新进行全量备份的问题，提升了集群盘数据备份的效率，有效节省了备份时间。附图说明图1是本发明实施例方案涉及的硬件运行环境的数据备份设备的结构示意图；图2为本发明数据备份方法第一实施例的流程示意图；图3为本发明数据备份方法第二实施例的流程示意图；图4为本发明数据备份方法第三实施例的流程示意图；图5为本发明数据备份装置第一实施例的结构框图。本发明目的的实现、功能特点及优点将结合实施例，参照附图做进一步说明。具体实施方式应当理解，此处所描述的具体实施例仅用以解释本发明，并不用于限定本发明。参照图1，图1为本发明实施例方案涉及的硬件运行环境的数据备份设备结构示意图。如图1所示，该数据备份设备可以包括：处理器1001，例如中央处理器，通信总线1002、用户接口1003，网络接口1004，存储器1005。其中，通信总线1002用于实现这些组件之间的连接通信。用户接口1003可以包括显示屏、输入单元比如键盘，可选用户接口1003还可以包括标准的有线接口、无线接口。网络接口1004可选的可以包括标准的有线接口、无线接口接口）。存储器1005可以是高速的随机存取存储器，也可以是稳定的非易失性存储器，例如磁盘存储器。存储器1005可选的还可以是独立于前述处理器1001的存储装置。本领域技术人员可以理解，图1中示出的结构并不构成对数据备份设备的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件布置。如图1所示，作为一种存储介质的存储器1005中可以包括操作系统、网络通信模块、用户接口模块以及数据备份程序。在图1所示的数据备份设备中，网络接口1004主要用于与网络服务器进行数据通信；用户接口1003主要用于与用户进行数据交互；本发明数据备份设备中的处理器1001、存储器1005可以设置在数据备份设备中，所述数据备份设备通过处理器1001调用存储器1005中存储的数据备份程序，并执行本发明实施例提供的数据备份方法。本发明实施例提供了一种数据备份方法，应用于故障转移集群中的服务器，参照图2，图2为本发明一种数据备份方法第一实施例的流程示意图。本实施例中，所述数据备份方法包括以下步骤：步骤S10：在获取到故障转移集群中集群盘的读写权限时，确定所述集群盘中的备份记录区域。应当理解的是，本实施例方法的执行主体可以是具有数据处理、网络通信以及程序运行功能的数据备份设备，例如塔式服务器、机架服务器或刀片服务器等，或者是其他能够实现相同或相似功能的装置或设备，以下统一以数据备份设备为例进行说明，本实施例对此不加以限制。需要说明的是，故障转移集群可以是由两台或两台以上的服务器组成的集群服务器，其中一台为主服务器，其它服务器为备用服务器。主服务器对外提供服务，备用服务器处于准备或待机状态。集群盘可以是故障转移集群中的多台服务器共享的两台或多台存储磁盘组成的集群。读写权限可以是故障转移集群中的主服务器对集群盘读写的权限，故障转移集群中只有一台服务器拥有读写权限。备份记录区域可以是集群盘中单独划分的一块用于记录服务器备份写数据记录的区域。应当理解的是，在故障转移集群中拥有读写权限的主服务器出现故障时，将主服务器中的服务、资源、IP集群盘以及集群盘读写权限转移至备用服务器上，由获取到读写权限的备用服务器对外提供服务，从而满足业务的持续性。在具体实现中，数据备份设备在故障转移集群中拥有读写权限中的主服务器出现故障时，将故障转移集群中集群盘的读写权限转移至故障转移集群中的备用服务器，其中，获取到读写权限的备用服务器视为主服务器。主服务器在获取到故障转移集群中集群盘的读写权限时，确定集群盘中的备份记录区域。步骤S20：获取所述备份记录区域中对应的历史备份信息。需要说明的是，历史备份信息可以是集群盘在整个故障转移集群范围内的所有时间段的所有增量写数据记录。历史备份信息可以包括集群磁盘偏移和写入长度等信息，历史备份记录可以是多种形态，例如，位图、json格式的文本或其它自定义结构等，本实施例不加以限定。应当理解的是，故障转移集群在同一时间只有其中一个拥有读写权限的主服务器可以对集群盘进行读写，即同一时间只有一个主服务器可以把磁盘写信息记录至备份记录区域。在当前主服务器发生故障时，集群盘的读写权限会漂移至故障转移集群中的另一个备用服务器中，该备用服务器会继续使用集群盘中的这个备份记录区域，即该备用服务器会继续将磁盘写信息记录至备份记录区域。需要说明的是，故障转移集群中的主服务器、备用服务器以及其它服务器上均安装有磁盘跟踪模块、磁盘记录模块、集群盘监控模块以及备份模块。磁盘跟踪模块用于跟踪服务器上的所有磁盘写信息，并将该写信息传递至磁盘记录模块，磁盘跟踪模块在不同的系统中形态不同，例如，在Windows系统中，磁盘跟踪模块可以是磁盘过滤驱动，用于过滤所有对磁盘的写信息。磁盘记录模块用于将收到的磁盘写信息记录至对应的集群盘中的磁盘写记录区域，即集群盘中的备份记录区域。在不同的文件系统中，集群盘的磁盘写记录区域类型不同。集群监控模块用于监控集群盘的读写权限是否转移至本服务器，监控的方式可以是多样的，例如，在Windows中，集群监控模块监控文件系统中集群盘的卷添加或移除通知；在Linux中，集群监控模块监控集群盘的mount动作，如果无法接收到这些消息，可以定时写测试数据到集群盘，集群盘不在本服务器时，会写入失败，但当集群盘漂移到本服务器后，写入成功，这是利用了同一时间只有一个服务器能够对集群盘进行读写的机制。应当理解的是，在故障转移集群中拥有读写权限的主服务器发生故障后，该主服务器上的读写权限将转移至另一个备用服务器，备用服务器上的集群盘监控模块监控到集群盘读写权限转移至本服务器，集群盘监控模块通知磁盘记录模块识别集群盘中的磁盘写记录区域，后续备用服务器开始工作时，磁盘跟踪模块将磁盘写信息传递至磁盘记录模块，磁盘记录模块将收到的磁盘写信息采用叠加的方式记录至对应的集群盘中的磁盘写记录区域。叠加记录方式的目的是既要保留之前磁盘写记录区域中的数据，又要将新的磁盘写信息记录至磁盘写记录区域。叠加的方式依据磁盘写记录方式决定，例如磁盘写记录方式是位图的话，叠加的方式可以是按位或运算。步骤S30：根据所述历史备份信息确定所述集群盘中的待备份数据，并对所述待备份数据进行增量备份。需要说明的是，待备份数据可以是集群盘中需要备份的数据。增量备份可以是拥有读写权限的服务器只备份自上次备份以来系统更改过的数据。应当理解的是，为了避免备份重复的集群盘数据，因此数据备份设备需要根据历史备份信息确定在故障发生前的主服务器已经备份过的集群盘数据，根据已经备份过的集群盘数据确定还未备份过的待备份数据，然后对待备份数据进行增量保存，将待备份数据保存至本地存储介质或云端存储。在具体实现中，数据备份设备在控制备用服务器做增量备份时，会使用集群盘对应的磁盘写记录区域中的记录做增量备份，因为磁盘写记录区域中的记录包含了该集群盘在整个故障转移集群范围内的所有时间段的所有增量写数据记录。例如，当某承载业务的服务器发生故障后，该服务器上的集群盘读写权限将漂移到另一个备服务器，该备服务器开始正常工作，并且磁盘写信息也会持续的被记录到磁盘写记录区，之后如果该备服务器也发生故障，集群盘的读写权限又漂移到另一个备服务器，之后对该备服务器做增量备份时，磁盘写记录区域中的记录已经包含了最早发生故障的服务器的所有写信息和第一个发生故障的备服务器的所有写信息。从该例子中可以看到，不管有多少台服务器发生故障，不管集群盘读写权限被漂移了多少次，最后磁盘写记录区域中的记录始终包含了该集群盘在整个故障转移集群范围内的所有时间段的所有增量写数据记录。本实施例通过在获取到故障转移集群中集群盘的读写权限时，确定所述集群盘中的备份记录区域，获取所述备份记录区域中对应的历史备份信息，根据所述历史备份信息确定所述集群盘中的待备份数据，并对所述待备份数据进行增量备份。由于本发明根据备份记录区域中的历史备份信息确定集群盘中的待备份数据，并对待备份数据进行增量备份，实现了对集群盘的增量备份，有效避免了在集群盘权限转移后需要重新进行全量备份的问题，提升了集群盘数据备份的效率，有效节省了备份时间。参考图3，图3为本发明一种数据备份方法第二实施例的流程示意图。基于上述第一实施例，在本实施例中，所述步骤S10之前，还包括：步骤S101：判断故障转移集群中的集群盘对应的文件系统是否为可识别文件系统。需要说明的是，可识别文件系统可以是能够被操作系统识别的文件系统。应当理解的是，为了确保可以将磁盘写信息保存至集群盘中，因此数据备份设备需要提前判断故障转移集群中的集群盘对应的文件系统是否为可识别文件系统，若集群盘对应的文件系统为可识别文件系统，则在集群盘中创建空白文件，并将备份信息保存至该空白文件中；若集群盘对应的文件系统为不可识别文件系统，则在集群盘中单独划分一块区域，并将备份信息保存至该备份记录区域。进一步地，为了提升备份信息的保存效率，上述步骤S101之后，还包括：步骤S1011：在所述集群盘对应的文件系统为可识别文件系统时，确定所述文件系统的文件系统类型；步骤S1012：根据所述文件系统类型在所述集群盘中创建备份记录文件。需要说明的是，可识别文件系统可以是能够被操作系统识别的文件系统，例如，windows ntfs、linux xfs或ext4等文件系统，可识别文件系统中可以创建一个或多个文件用于记录磁盘写信息。应当理解的是，如果集群盘中的文件系统是公开的，是能够被操作系统识别的，那么创建用一个空白文件或多个空白文件，把对该集群盘的磁盘写信息记录到这些空白文件中。若集群盘中的文件系统是公开系统，则将记录的磁盘写信息以文件类型保存。数据备份设备可以根据记录时间和磁盘写信息类型对磁盘写信息进行分类，根据磁盘写信息的分类类型可以创建多个空白文件，将不同记录时间以及不同类型的信息保存在不同的空白文件中。例如，数据备份设备根据磁盘写信息在集群盘中创建空白文件，然后将备份信息写入至该空白文件，然后在服务器进行备份时，根据备份信息保存至对应的空白文件中。进一步地，为了提升备份信息的保存效率，上述步骤S1012之后，还包括：步骤S1013：在检测到所述故障转移集群中的主服务器对所述集群盘中的待备份数据进行增量备份时，获取所述待备份数据的数据信息；步骤S1014：根据所述数据信息生成所述待备份数据对应的备份信息；步骤S1015：将所述备份信息保存至所述备份记录文件中。需要说明的是，数据信息可以是待备份数据的写入信息，例如写入磁盘偏移信息或写入长度信息等。备份信息记录方式可以是多种形态的，例如位图或者基于文本的json等自定义结构。步骤S102：在所述集群盘对应的文件系统为不可识别文件系统时，根据所述文件系统在所述集群盘中创建备份记录区域。需要说明的是，不可识别文件系统可以是不能被操作系统识别的文件系统，例如，windows raw或linux oracle asm等文件系统，不可识别文件系统中不能创建文件用于记录磁盘写信息。进一步地，为了提升增量备份的效率，避免备份重复数据，上述步骤S102之后，还包括：步骤S103：在检测到所述故障转移集群中的主服务器对所述集群盘中的待备份数据进行增量备份时，获取所述待备份数据的数据信息。步骤S104：根据所述数据信息生成所述待备份数据对应的备份信息。步骤S105：将所述备份信息保存至所述备份记录区域中。需要说明的是，如果集群盘中的文件系统是未公开的，或者不是操作系统能够识别的，比如windows raw，linux oracle asm等，也就不能创建文件，那么可以采用在该集群盘中单独划一个或多个区域用于保存该集群盘的磁盘写信息。应当理解的是，如果因为某些原因导致数据备份设备不能在集群盘中划分出这个区域，可以单独加一块集群盘，把该集群盘成为记录集群盘，将该记录集群盘划分为多个区域，每个区域用于记录一个集群盘的磁盘写信息，当服务器发送故障时，该记录集群盘也会随其他集群盘一起漂移，之后被其他服务器用于记录磁盘写信息，或者添加多个记录集群盘，即为每个集群盘都添加一个记录集群盘，用于各自集群盘的磁盘写信息。本实施例通过判断故障转移集群中的集群盘对应的文件系统是否为可识别文件系统，在所述集群盘对应的文件系统为不可识别文件系统时，根据所述文件系统在所述集群盘中创建备份记录区域。由于本发明根据故障转移集群中的集群盘对应的文件系统创建对应备份记录区域，实现了对备份信息的保存，提升了备份信息的保存效率。参考图4，图4为本发明一种数据备份方法第三实施例的流程示意图。基于上述第一实施例，在本实施例中，所述步骤S30，包括：步骤S301：根据所述历史备份信息确定所述集群盘中的待备份数据，并确定所述待备份数据的数据信息。需要说明的是，历史备份信息可以是集群盘在整个故障转移集群范围内的所有时间段的所有增量写数据记录。待备份数据可以是集群盘中需要备份的数据。上述数据信息可以是待备份数据的数据大小或数据存储位置。步骤S302：对所述待备份数据进行增量备份，获得增量备份结果。需要说明的是，增量备份可以是拥有读写权限的服务器只备份自上次备份以来系统更改过的数据。增量备份结果可以是增量备份的备份过程的备份时长或备份数据的完整性等结果。在具体实现中，数据备份设备控制故障转移集群中的主服务器对待备份数据进行增量备份，获得增量备份结果，其中增量备份结果包括本次备份过程的备份时长、备份数据类型、备份服务器标识，备份数据的完整性等信息。步骤S303：根据所述增量备份结果和所述数据信息生成所述待备份数据对应的备份信息。需要说明的是，备份信息可以是待备份数据的分类信息，备份信息可以是待备份数据的数据种类、数据大小或数据格式等信息。应当理解的是，为了在之后的备份中准确对集群盘进行准确的增量备份，避免出现重复备份，因此据备份设备需要根据增量备份结果和待备份数据的数据信息生成对应的备份信息，从而使后续的增量备份可以根据备份信息确定集群盘中哪些数据已经备份过。数据备份设备根据增量备份结果确定本次增量备份中的主服务器标识、备份时间、备份时长以及备份完整性等信息，并根据数据信息确定待备份数据的数据大小、数据类型以及数据完整性等信息，然后根据主服务器标识、备份时间、备份时长、备份完整性、数据大小、数据类型以及数据完整性等信息生成待备份数据对应的备份信息。步骤S304：将所述备份信息保存至所述备份记录区域中。需要说明的是，备份记录区域可以是在集群盘中单独划分的一个或多个用于存储备份信息的区域，备份记录区域可以是文件，也可以是集群盘中的单独存储区域，备份记录区域的形式以集群盘的文件系统类型决定。进一步地，为了保持增量备份的实时性，上述步骤S304之前，还包括：步骤S3041：将所述历史备份信息从所述备份记录区域中删除。需要说明的是，由于数据备份设备控制主服务器进行增量备份不是瞬时完成的，而是一个持续的过程，因此在主服务器进行增量备份期间，服务器也在持续地把新写入的磁盘写信息持续记录至备份记录区域中，以为下次增量备份作准备。应当理解的是，数据备份设备在进行增量备份信息记录的同时，为了避免重复备份，因此需要将历史的备份记录信息删除掉，否则下次增量备份会把之前写入数据也备份，从而导致重复备份。因此数据备份设备采用边备份边删除历史备份记录信息的方式，将所述历史备份信息从所述备份记录区域中删除。在具体实现中，数据备份设备每备份完N个数据块时，就把这些数据块对应的历史备份信息删除掉，只保留新的备份信息，并同时进行备份，直至增量备份完成。本实施例通过根据所述历史备份信息确定所述集群盘中的待备份数据，并确定所述待备份数据的数据信息，对所述待备份数据进行增量备份，获得增量备份结果，根据所述增量备份结果和所述数据信息生成所述待备份数据对应的备份信息，将所述备份信息保存至所述备份记录区域中。由于本发明通过确定增量备份数据的数据信息，根据数据信息和增量备份结果生成对应的备份信息，并将备份信息保存至备份记录区域中，实现了对增量备份的记录，有效避免了数据的重复备份，提升了数据备份效率。此外，本发明实施例还提出一种存储介质，所述存储介质上存储有数据备份程序，所述数据备份程序被处理器执行时实现如上文所述的数据备份方法的步骤。由于本存储介质采用了上述所有实施例的全部技术方案，因此至少有上述实施例的技术方案所带来的所有有益效果，在此不再一一赘述。参照图5，图5为本发明数据备份装置第一实施例的结构框图。如图5所示，本发明实施例提出的数据备份装置包括：权限获取模块10，用于在获取到故障转移集群中集群盘的读写权限时，确定所述集群盘中的备份记录区域；备份记录模块20，用于获取所述备份记录区域中对应的历史备份信息；增量备份模块30，用于根据所述历史备份信息确定所述集群盘中的待备份数据，并对所述待备份数据进行增量备份。进一步地，所述权限获取模块10，还用于判断故障转移集群中的集群盘对应的文件系统是否为可识别文件系统；在所述集群盘对应的文件系统为不可识别文件系统时，根据所述文件系统在所述集群盘中创建备份记录区域。进一步地，所述权限获取模块10，还用于在检测到所述故障转移集群中的主服务器对所述集群盘中的待备份数据进行增量备份时，获取所述待备份数据的数据信息，根据所述数据信息生成所述待备份数据对应的备份信息，将所述备份信息保存至所述备份记录区域中。进一步地，所述权限获取模块10，还用于在所述集群盘对应的文件系统为可识别文件系统时，确定所述文件系统的文件系统类型；根据所述文件系统类型在所述集群盘中创建备份记录文件。进一步地，所述权限获取模块10，还用于在检测到所述故障转移集群中的主服务器对所述集群盘中的待备份数据进行增量备份时，获取所述待备份数据的数据信息；根据所述数据信息生成所述待备份数据对应的备份信息；将所述备份信息保存至所述备份记录文件中。进一步地，所述增量备份模块30，还用于根据所述历史备份信息确定所述集群盘中的待备份数据，并确定所述待备份数据的数据信息；对所述待备份数据进行增量备份，获得增量备份结果；根据所述增量备份结果和所述数据信息生成所述待备份数据对应的备份信息；将所述备份信息保存至所述备份记录区域中。进一步地，所述增量备份模块30，还用于将所述历史备份信息从所述备份记录区域中删除。本实施例通过在获取到故障转移集群中集群盘的读写权限时，确定所述集群盘中的备份记录区域，获取所述备份记录区域中对应的历史备份信息，根据所述历史备份信息确定所述集群盘中的待备份数据，并对所述待备份数据进行增量备份。由于本发明根据备份记录区域中的历史备份信息确定集群盘中的待备份数据，并对待备份数据进行增量备份，实现了对集群盘的增量备份，有效避免了在集群盘权限转移后需要重新进行全量备份的问题，提升了集群盘数据备份的效率，有效节省了备份时间。应当理解的是，以上仅为举例说明，对本发明的技术方案并不构成任何限定，在具体应用中，本领域的技术人员可以根据需要进行设置，本发明对此不做限制。需要说明的是，以上所描述的工作流程仅仅是示意性的，并不对本发明的保护范围构成限定，在实际应用中，本领域的技术人员可以根据实际的需要选择其中的部分或者全部来实现本实施例方案的目的，此处不做限制。另外，未在本实施例中详尽描述的技术细节，可参见本发明任意实施例所提供的数据备份方法，此处不再赘述。此外，需要说明的是，在本文中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者系统不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者系统所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括该要素的过程、方法、物品或者系统中还存在另外的相同要素。上述本发明实施例序号仅仅为了描述，不代表实施例的优劣。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到上述实施例方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质/RAM、磁碟、光盘）中，包括若干指令用以使得一台终端设备执行本发明各个实施例所述的方法。以上仅为本发明的优选实施例，并非因此限制本发明的专利范围，凡是利用本发明说明书及附图内容所作的等效结构或等效流程变换，或直接或间接运用在其他相关的技术领域，均同理包括在本发明的专利保护范围内。
