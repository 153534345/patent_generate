标题title
一种基于三维场景的营区物联感知设备数据实时接入系统
摘要abst
本发明涉及一种基于三维场景的营区物联感知设备数据实时接入系统，属于三维建模技术领域。本发明通过构建物联感知库和三维图模库，有效地将物联感知设备与营区三维场景进行衔接，使营区管理人员能够透彻感知核心建筑、地下空间设施、地上基础设施各类设备等物理实体对象的运行状况以及各类人员的生产、生活活动，分析各种状况和活动间的耦合关系，实现运行状态的及时感知，风险及问题的早期预测预警和高效处置应对。
权利要求书clms
1.一种基于三维场景的营区物联感知设备数据实时接入系统，其特征在于，包括物联感知库构建模块、三维图模库构建模块、物联感知设备与图模建立关联模块、图模与营区三维场景融合模块4个模块；其中，物联感知库构建模块用于：1)物联感知设备归类子模块用于针对营区管理业务和应用场景不同，对物联感知设备进行归类，包括人员监控、车辆监控、警戒防护和环境监测；2)物联感知库构建子模块用于构建物联感知库，用于存储设备相关数据，并结合三维场景进行态势展示；根据业务应用，将物联感知库分为基础数据库、动态数据库和决策支持数据库；所述基础数据库存储物联感知设备的基本信息；所述动态数据库存储物联感知设备的实时监测数据；决策支持数据库存储物联感知设备的历史监测数据和统计数据。3)监测数据引接子模块用于根据设备不同类型和数据不同格式，通过网络将物联感知设备动态监测数据实时引接至物联感知库中进行存储；三维图模库构建模块用于：1)图模设计子模块用于结合营区三维场景，针对物联感知设备特点，设计图形模型特征；2)三维图模库构建子模块用于构建三维图模库，以存储图模数据，并在态势展示时调用，根据不同三维场景，将三维图模库分为GIS图模库和BIM图模库；物联感知设备与图模建立关联模块用于：根据物联感知设备属性和应用场景，在三维图模库中选取图模对象用于与之对应，图模对象与物联感知库进行关联，提取设备的基础数据、动态数据和决策支持数据；图模对象包括图模属性、物联感知实时信息、历史信息、统计信息4个实体，图模对象关联1个共同且唯一的物联感知设备标识，用Oi表示一个图模对象，IDi为物联感知设备的唯一标识，Pi为图模属性，Ri为物联感知实时信息，Hi为历史信息，Si为统计信息，则一个图模对象表示为：Oi＝{Pi，Ri，Hi，Si}。其中：Pi＝{IDi，}；Ri＝{IDi，}；Hi＝{IDi，}；Si＝{IDi，}。式中：i，j，k，m，n分别表示任意自然数；pj表示三维图模库中一数据项；rk表示动态数据库中一数据项；hm表示决策支持数据库中一历史监测数据项；sn表示决策支持数据库中一统计数据项；图模与营区三维场景融合模块用于：1)营区三维场景构建子模块用于基于机载LiDAR和倾斜影像进行营区三维GIS建模，生成数字高程模型和建筑体框模型，通过纹理提取和贴图，完成营区室外模型构建；针对营区核心建筑物，基于BIM白模进行纹理几何纠正，形成实景BIM地物模型；2)图模标识子模块用于根据物联感知设备实际安装位置，确定其三维空间坐标，在所构建的营区三维场景对图模对象进行标识；3)态势展现子模块用于在三维场景中选取图模对象，展现与之对应的物联感知设备的基本信息、动态数据以及历史数据。2.如权利要求1所述的系统，其特征在于，所述物联感知设备的基本信息包括品牌、型号、编号、设备归类、安装位置、归口部门。3.如权利要求1所述的系统，其特征在于，所述物联感知设备的实时监测数据包括人脸、车牌号、定位、报警、温湿度。4.如权利要求1所述的系统，其特征在于，图模设计子模块具体用于针对物联感知设备特点，设计颜色、亮度、线型、线宽、字符大小、字符间距、字体这些图形模型特征。5.如权利要求1所述的系统，其特征在于，所述纹理几何纠正的过程如下：a.计算地面坐标BIM白模中点P正射纠正计算出对应的地面坐标为式中，X′、Y′为任意一点P相对于纹理面的像点坐标，X0、Y0为正射纹理面左下角BIM白模侧面角点的地面坐标，M为正射纹理所在影像的比例尺分母；b.计算像点坐标设任意像元在原始图像和纠正后图像中的坐标分别为和，用反解公式计算原始图像上的像点坐标P：式中，Z为点P的高程值；x，y为像点的像平面坐标；x0，y0，f为影像的内方位元素；X5，Y5，Z5为摄站点的物方空间坐标；X，Y，Z为物方点的物方空间坐标,X，Y为步骤a中的地面坐标；ai，bi，ci为影像的3个外方位角元素组成的9个方向余弦值；c.灰度内插与赋值首先采用双线性内插法求得P点灰度值g，而后将P点灰度值赋值给纠正后的像元，即G＝g，从而实现倾斜纹理逐像素正射纠正。6.如权利要求5所述的系统，其特征在于，图模标识子模块具体用于：a.从物联感知库中获取待接入物联感知设备的基本信息及三维空间坐标；用Li表示物联感知设备安装位置的经度，Di表示物联感知设备安装位置的纬度，Ai表示物联感知设备安装位置的高程，IDi为物联感知设备的唯一标识，则其三维空间坐标Ci表示为：Ci＝{Li,Di,Ai}其中：Li＝{IDi，}Di＝{IDi，}Ai＝{IDi，}式中：i，j，k，m分别表示任意自然数；lj表示物联感知库中一设备经度数据项；dk表示物联感知库中一设备维度数据项；am表示物联感知库中一设备高程数据项；b.实时记录事件触发时的设备编号和设备归类信息；c.将获取的三维空间坐标和相应的物联感知设备编号、设备归类信息存入三维图模库。7.如权利要求1所述的系统，其特征在于，所述态势展现子模块具体用于：a.人员态势信息展示以数据和三维场景相结合的方式，展示营区内人员的分布情况和来访人员态势信息，同时提供以时间轴的方式，定位不同时间段的人员综合态势；①人员信息接入：通过接入人脸识别摄像机获取营区内人员数据；②人员整体分布展示：对营区内人员的整体分布情况进行展示，包括以人员点位信息、人员密度、热度图的方式进行展示；③单个人员活动轨迹信息展示：根据人脸识别摄像机反馈结果，对单个人员在营区内的活动轨迹进行展示；④人员出入展示：根据访客一体机反馈结果，能够对人员进出进行统计并展示；b.车辆态势信息展示以数据和三维场景相结合的方式，展示车辆态势总览、车辆轨迹追踪信息；①车辆信息接入：通过车辆识别一体机获取营区内车辆数据；②车辆态势总览：显示所有车辆的态势，包括车辆的使用状态、车辆总数和车型功能；③车辆轨迹追踪：根据车辆识别一体机和北斗车载一体机反馈结果，显示车辆的运行轨迹，能够按照时间维度展示车辆轨迹回放；④车辆活动热度图展示：根据车辆识别一体机和北斗车载一体机反馈结果，生成车辆在营区内的活动热度图并进行展示；c.环境监测态势展示以数据和三维场景相结合的方式，展示环境运行态势及报警信息；①环境监测数据接入：通过各类传感器获取环境监测数据，针对物资库房、军械库、弹药库，接入温湿度、烟雾、漏水、气体、粉尘数据；针对特定区域接入PM10、PM2.5、SO2、NO2、CO、O3数据；针对营区山区接入森林火情、地震、山体滑坡、崩塌、地面塌陷、沉降和地裂缝数据；②环境运行参数展示：根据环境监测传感器反馈结果，通过一定方式对环境运行参数信息进行展示。8.如权利要求7所述的系统，其特征在于，环境监测数据接入时，通过温湿度、烟感、地灾、有害气体传感器获取环境监测数据。9.如权利要求7所述的系统，其特征在于，环境监测数据接入时，针对生活区、办公区、首长驻地这些特定区域接入PM10、PM2.5、SO2、NO2、CO、O3数据。10.如权利要求7所述的系统，其特征在于，环境运行参数展示时，通过文字、表格、可视化图形的方式对环境运行参数信息进行展示。
说明书desc
技术领域本发明属于三维建模技术领域，具体涉及一种基于三维场景的营区物联感知设备数据实时接入系统。背景技术军队营区担负着为官兵战备训练、工作生活提供基础设施条件，为武器装备发挥战斗效能提供基本依托的重要使命，管理人员对营区运行状态的全面掌控，确保营区稳定运行变得至关重要。近些年，随着物联网、人工智能、5G等新兴技术的迅猛发展，营区规模、信息数据量的不断扩张，以及智慧产业的迅速壮大，打造智慧军营的需求也在持续攀升，营区管理趋势逐渐走向数字化、精准化。传统的二维图纸、表格等数据信息已经很难满足营区管理的数字化需求。基于三维场景，依托GIS和BIM的先进技术，面向具体需求融合动态信息、描述实体单元、支撑营区各类应用，能够有效提升综合保障力量的部署和动态协调调度水平，支撑营区管理等部门对营区运行状态的实时监控。目前，虽然三维建模在智慧军营建设中得到广泛应用，但大部分都是对地形、建筑、道路、树木等营区信息的静态展示，物联感知设备的动态监测数据与营区三维场景的融合度较低，无法直观地展现营区实时运行状态，为营区管理和应急处置提供在线决策支持。发明内容要解决的技术问题本发明要解决的技术问题是：如何设计一种营区物联感知设备数据实时接入系统。技术方案为了解决上述技术问题，本发明提供了一种基于三维场景的营区物联感知设备数据实时接入系统，包括物联感知库构建模块、三维图模库构建模块、物联感知设备与图模建立关联模块、图模与营区三维场景融合模块4个模块；其中，物联感知库构建模块用于：1)物联感知设备归类子模块用于针对营区管理业务和应用场景不同，对物联感知设备进行归类，包括人员监控、车辆监控、警戒防护和环境监测；2)物联感知库构建子模块用于构建物联感知库，用于存储设备相关数据，并结合三维场景进行态势展示；根据业务应用，将物联感知库分为基础数据库、动态数据库和决策支持数据库；所述基础数据库存储物联感知设备的基本信息；所述动态数据库存储物联感知设备的实时监测数据；决策支持数据库存储物联感知设备的历史监测数据和统计数据。3)监测数据引接子模块用于根据设备不同类型和数据不同格式，通过网络将物联感知设备动态监测数据实时引接至物联感知库中进行存储；三维图模库构建模块用于：1)图模设计子模块用于结合营区三维场景，针对物联感知设备特点，设计图形模型特征；2)三维图模库构建子模块用于构建三维图模库，以存储图模数据，并在态势展示时调用，根据不同三维场景，将三维图模库分为GIS图模库和BIM图模库；物联感知设备与图模建立关联模块用于：根据物联感知设备属性和应用场景，在三维图模库中选取图模对象用于与之对应，图模对象与物联感知库进行关联，提取设备的基础数据、动态数据和决策支持数据；图模对象包括图模属性、物联感知实时信息、历史信息、统计信息4个实体，图模对象关联1个共同且唯一的物联感知设备标识，用Oi表示一个图模对象，IDi为物联感知设备的唯一标识，Pi为图模属性，Ri为物联感知实时信息，Hi为历史信息，Si为统计信息，则一个图模对象表示为：Oi＝{Pi，Ri，Hi，Si}。其中：Pi＝{IDi，}；Ri＝{IDi，}；Hi＝{IDi，}；Si＝{IDi，}。式中：i，j，k，m，n分别表示任意自然数；pj表示三维图模库中一数据项；rk表示动态数据库中一数据项；hm表示决策支持数据库中一历史监测数据项；sn表示决策支持数据库中一统计数据项；图模与营区三维场景融合模块用于：1)营区三维场景构建子模块用于基于机载LiDAR和倾斜影像进行营区三维GIS建模，生成数字高程模型和建筑体框模型，通过纹理提取和贴图，完成营区室外模型构建；针对营区核心建筑物，基于BIM白模进行纹理几何纠正，形成实景BIM地物模型；2)图模标识子模块用于根据物联感知设备实际安装位置，确定其三维空间坐标，在所构建的营区三维场景对图模对象进行标识；3)态势展现子模块用于在三维场景中选取图模对象，展现与之对应的物联感知设备的基本信息、动态数据以及历史数据。优选地，所述物联感知设备的基本信息包括品牌、型号、编号、设备归类、安装位置、归口部门。优选地，所述物联感知设备的实时监测数据包括人脸、车牌号、定位、报警、温湿度。优选地，图模设计子模块具体用于针对物联感知设备特点，设计颜色、亮度、线型、线宽、字符大小、字符间距、字体这些图形模型特征。优选地，所述纹理几何纠正的过程如下：a.计算地面坐标BIM白模中点P正射纠正计算出对应的地面坐标为式中，X′、Y′为任意一点P相对于纹理面的像点坐标，X0、Y0为正射纹理面左下角BIM白模侧面角点的地面坐标，M为正射纹理所在影像的比例尺分母；b.计算像点坐标设任意像元在原始图像和纠正后图像中的坐标分别为和，用反解公式计算原始图像上的像点坐标P：式中，Z为点P的高程值；x，y为像点的像平面坐标；x0，y0，f为影像的内方位元素；X5，Y5，Z5为摄站点的物方空间坐标；X，Y，Z为物方点的物方空间坐标,X，Y为步骤a中的地面坐标；ai，bi，ci为影像的3个外方位角元素组成的9个方向余弦值；c.灰度内插与赋值首先采用双线性内插法求得P点灰度值g，而后将P点灰度值赋值给纠正后的像元，即G＝g，从而实现倾斜纹理逐像素正射纠正。优选地，图模标识子模块具体用于：a.从物联感知库中获取待接入物联感知设备的基本信息及三维空间坐标；用Li表示物联感知设备安装位置的经度，Di表示物联感知设备安装位置的纬度，Ai表示物联感知设备安装位置的高程，IDi为物联感知设备的唯一标识，则其三维空间坐标Ci表示为：Ci＝{Li,Di,Ai}其中：Li＝{IDi，}Di＝{IDi，}Ai＝{IDi，}式中：i，j，k，m分别表示任意自然数；lj表示物联感知库中一设备经度数据项；dk表示物联感知库中一设备维度数据项；am表示物联感知库中一设备高程数据项；b.实时记录事件触发时的设备编号和设备归类信息；c.将获取的三维空间坐标和相应的物联感知设备编号、设备归类信息存入三维图模库。优选地，所述态势展现子模块具体用于：a.人员态势信息展示以数据和三维场景相结合的方式，展示营区内人员的分布情况和来访人员态势信息，同时提供以时间轴的方式，定位不同时间段的人员综合态势；①人员信息接入：通过接入人脸识别摄像机获取营区内人员数据；②人员整体分布展示：对营区内人员的整体分布情况进行展示，包括以人员点位信息、人员密度、热度图的方式进行展示；③单个人员活动轨迹信息展示：根据人脸识别摄像机反馈结果，对单个人员在营区内的活动轨迹进行展示；④人员出入展示：根据访客一体机反馈结果，能够对人员进出进行统计并展示；b.车辆态势信息展示以数据和三维场景相结合的方式，展示车辆态势总览、车辆轨迹追踪信息；①车辆信息接入：通过车辆识别一体机获取营区内车辆数据；②车辆态势总览：显示所有车辆的态势，包括车辆的使用状态、车辆总数和车型功能；③车辆轨迹追踪：根据车辆识别一体机和北斗车载一体机反馈结果，显示车辆的运行轨迹，能够按照时间维度展示车辆轨迹回放；④车辆活动热度图展示：根据车辆识别一体机和北斗车载一体机反馈结果，生成车辆在营区内的活动热度图并进行展示；c.环境监测态势展示以数据和三维场景相结合的方式，展示环境运行态势及报警信息；①环境监测数据接入：通过各类传感器获取环境监测数据，针对物资库房、军械库、弹药库，接入温湿度、烟雾、漏水、气体、粉尘数据；针对特定区域接入PM10、PM2.5、SO2、NO2、CO、O3数据；针对营区山区接入森林火情、地震、山体滑坡、崩塌、地面塌陷、沉降和地裂缝数据；②环境运行参数展示：根据环境监测传感器反馈结果，通过一定方式对环境运行参数信息进行展示。优选地，环境监测数据接入时，通过温湿度、烟感、地灾、有害气体传感器获取环境监测数据。优选地，环境监测数据接入时，针对生活区、办公区、首长驻地这些特定区域接入PM10、PM2.5、SO2、NO2、CO、O3数据。优选地，环境运行参数展示时，通过文字、表格、可视化图形的方式对环境运行参数信息进行展示。有益效果本发明通过构建物联感知库和三维图模库，有效地将物联感知设备与营区三维场景进行衔接，使营区管理人员能够透彻感知核心建筑、地下空间设施、地上基础设施各类设备等物理实体对象的运行状况以及各类人员的生产、生活活动，分析各种状况和活动间的耦合关系，实现运行状态的及时感知，风险及问题的早期预测预警和高效处置应对。附图说明图1为本发明的实现原理图；图2为物联感知设备归类示意图。具体实施方式为使本发明的目的、内容、和优点更加清楚，下面结合附图和实施例，对本发明的具体实施方式作进一步详细描述。如图1所示，本发明提供的一种基于三维场景的营区物联感知设备数据实时接入系统包括物联感知库构建模块、三维图模库构建模块、物联感知设备与图模建立关联模块、图模与营区三维场景融合模块。物联感知库构建模块1)物联感知设备归类子模块用于针对营区管理业务和应用场景不同，对物联感知设备进行归类，包括人员监控、车辆监控、警戒防护和环境监测等，如图2所示。2)物联感知库构建子模块用于构建物联感知库，用于存储设备相关数据，并结合三维场景进行态势展示。根据业务应用，将物联感知库分为基础数据库、动态数据库和决策支持数据库。基础数据库主要存储物联感知设备的基本信息，如品牌、型号、编号、设备归类、安装位置、归口部门等。动态数据库主要存储物联感知设备的实时监测数据，如人脸、车牌号、定位、报警、温湿度等。决策支持数据库主要存储物联感知设备的历史监测数据和统计数据。3)监测数据引接子模块用于根据设备不同类型和数据不同格式，通过网络将物联感知设备动态监测数据实时引接至物联感知库中进行存储。三维图模库构建模块1)图模设计子模块用于结合营区三维场景，针对物联感知设备特点，设计颜色、亮度、线型、线宽、字符大小、字符间距、字体等图形模型特征，具备高度浓缩并快捷传达信息、便于记忆的功能属性。2)三维图模库构建子模块用于构建三维图模库，用于存储图模数据，并在态势展示时调用。根据不同三维场景，将三维图模库分为GIS图模库和BIM图模库。物联感知设备与图模建立关联模块用于根据物联感知设备属性和应用场景，在三维图模库中选取图模对象用于与之对应。图模对象与物联感知库进行关联，提取设备的基础数据、动态数据和决策支持数据。图模对象包括图模属性、物联感知实时信息、历史信息、统计信息等4个实体，图模对象关联1个共同且唯一的物联感知设备标识。用Oi表示一个图模对象，IDi为物联感知设备的唯一标识，Pi为图模属性，Ri为物联感知实时信息，Hi为历史信息，Si为统计信息，则一个图模对象可表示为：Oi＝{Pi，Ri，Hi，Si}。其中：Pi＝{IDi，}；Ri＝{IDi，}；Hi＝{IDi，}；Si＝{IDi，}。式中：i，j，k，m，n分别表示任意自然数；pj表示三维图模库中某一数据项；rk表示动态数据库中某一数据项；hm表示决策支持数据库中某一历史监测数据项；sn表示决策支持数据库中某一统计数据项。图模与营区三维场景融合模块1)营区三维场景构建子模块用于基于机载LiDAR和倾斜影像进行营区三维GIS建模，生成数字高程模型和建筑体框模型，通过纹理提取和贴图，完成营区室外模型构建；针对营区核心建筑物，基于BIM白模进行纹理几何纠正，形成实景BIM地物模型。纹理几何纠正过程如下：a.计算地面坐标BIM白模中点P正射纠正计算出对应的地面坐标为式中，X′、Y′为任意一点P相对于纹理面的像点坐标，X0、Y0为正射纹理面左下角BIM白模侧面角点的地面坐标，M为正射纹理所在影像的比例尺分母。b.计算像点坐标设任意像元在原始图像和纠正后图像中的坐标分别为和，用反解公式计算原始图像上的像点坐标P：式中，Z为点P的高程值；x，y为像点的像平面坐标；x0，y0，f为影像的内方位元素；X5，Y5，Z5为摄站点的物方空间坐标；X，Y，Z为物方点的物方空间坐标,X，Y为步骤a中的地面坐标；ai，bi，ci为影像的3个外方位角元素组成的9个方向余弦值。c.灰度内插与赋值计算的像点坐标P不一定位于像元中心，有必要进行逐像灰度内插。首先采用双线性内插法求得P点灰度值g，而后将P点灰度值赋值给纠正后的像元，即G＝g，从而实现倾斜纹理逐像素正射纠正。2)图模标识子模块用于根据物联感知设备实际安装位置，确定其三维空间坐标，在所构建的营区三维场景对图模对象进行标识,具体包括以下步骤：a.从物联感知库中获取待接入物联感知设备的基本信息及三维空间坐标。用Li表示物联感知设备安装位置的经度，Di表示物联感知设备安装位置的纬度，Ai表示物联感知设备安装位置的高程，IDi为物联感知设备的唯一标识，则其三维空间坐标Ci表示为：Ci＝{Li,Di,Ai}其中：Li＝{IDi，}Di＝{IDi，}Ai＝{IDi，}式中：i，j，k，m分别表示任意自然数；lj表示物联感知库中某一设备经度数据项；dk表示物联感知库中某一设备维度数据项；am表示物联感知库中某一设备高程数据项。b.实时记录事件触发时的设备编号和设备归类信息。c.将获取的三维空间坐标和相应的物联感知设备编号、设备归类信息存入三维图模库。3)态势展现子模块用于在三维场景中选取图模对象，能够展现与之对应的物联感知设备的基本信息、动态数据以及历史数据,具体包括以下步骤：a.人员态势信息展示以数据和三维场景相结合的方式，展示营区内人员的分布情况和来访人员态势等信息，同时提供以时间轴的方式，快速定位不同时间段的人员综合态势。①人员信息接入：通过接入人脸识别摄像机获取营区内人员数据；②人员整体分布展示：对营区内人员的整体分布情况进行展示，包括以人员点位信息、人员密度、热度图等方式进行展示；③单个人员活动轨迹信息展示：根据人脸识别摄像机反馈结果，对单个人员在营区内的活动轨迹进行展示；④人员出入展示：根据访客一体机反馈结果，能够对人员进出进行统计并展示。b.车辆态势信息展示以数据和三维场景相结合的方式，展示车辆态势总览、车辆轨迹追踪等信息。①车辆信息接入：通过车辆识别一体机获取营区内车辆数据；②车辆态势总览：显示所有车辆的态势，包括车辆的使用状态、车辆总数和车型等功能；③车辆轨迹追踪：根据车辆识别一体机和北斗车载一体机反馈结果，显示车辆的运行轨迹，能够按照时间维度展示车辆轨迹回放；④车辆活动热度图展示：根据车辆识别一体机和北斗车载一体机反馈结果，生成车辆在营区内的活动热度图并进行展示。c.环境监测态势展示以数据和三维场景相结合的方式，展示环境运行态势及报警等信息。①环境监测数据接入：通过温湿度、烟感、地灾、有害气体等各类传感器获取环境监测数据。针对重要物资库房、军械库、弹药库，接入温湿度、烟雾、漏水、气体、粉尘等数据；针对生活区、办公区、首长驻地等某些特定区域接入PM10、PM2.5、SO2、NO2、CO、O3等数据；针对营区山区接入森林火情、地震、山体滑坡、崩塌、地面塌陷、沉降和地裂缝等数据；②环境运行参数展示：根据环境监测传感器反馈结果，通过文字、表格、可视化图形等方式对环境运行参数信息进行展示。可以看出，本发明能够实现物联感知设备动态数据与营区三维场景的有效叠加，按照“数据集中存储，信息综合利用”的应用模式，实现营区运行数据在“一个平台、一幅图”上集中展示；本发明在营区三维场景中整合指挥、监控、防护、报警、通信、处置等营区管理要素，能够实现营区防范控制由被动处置向主动防范转变，提高预知预警预处理能力。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明技术原理的前提下，还可以做出若干改进和变形，这些改进和变形也应视为本发明的保护范围。
