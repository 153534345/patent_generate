标题title
一种RSU标定方法、装置、电子设备和系统
摘要abst
本申请实施例提供一种RSU标定方法、装置、电子设备和系统，属于ETC技术领域。该方法包括：获取第一时间下的位置信息和待标定RSU接收到的标定信号的波形特征；其中，位置信息包括标定OBU的第一位置信息，待标定RSU的第二位置信息，以及辅助RSU的第三位置信息；标定信号是标定OBU向待标定RSU发送的。根据位置信息确定标定OBU、待标定RSU和辅助RSU之间的位置关系。以及，根据位置关系和波形特征确定RSU标定参数，该RSU标定参数包括待标定RSU的虚拟安装角度，和在虚拟安装角度下待标定RSU的空间阵列天线的各个通道接收到的标定信号的相位差。本申请实施例提供的技术方案能够提高RSU标定参数的准确度并提高标定效率。
权利要求书clms
1.一种路侧单元RSU标定方法，其特征在于，包括：获取第一时间下的位置信息和待标定RSU接收到的标定信号的波形特征；其中，所述位置信息包括标定车载单元OBU的第一位置信息，待标定RSU的第二位置信息，以及辅助RSU的第三位置信息；所述标定信号是所述标定OBU向所述待标定RSU发送的；根据所述位置信息确定所述标定OBU、所述待标定RSU和所述辅助RSU之间的位置关系；根据所述位置关系和所述波形特征确定RSU标定参数，所述RSU标定参数包括所述待标定RSU的虚拟安装角度，和在所述虚拟安装角度下所述待标定RSU的空间阵列天线的各个通道接收到的所述标定信号的相位差。2.根据权利要求1所述的方法，其特征在于，所述方法还包括：依次在N个不同的所述第一时间下分别执行如权利要求1所述的方法，获得不相同的N个所述RSU标定参数；根据N个所述RSU标定参数，生成RSU标定参数列表。3.根据权利要求1或2所述的方法，其特征在于，根据所述位置信息确定所述标定OBU、所述待标定RSU和所述辅助RSU之间的位置关系，包括：根据所述第一位置信息、所述第二位置信息和所述第三位置信息确定所述标定OBU与所述待标定RSU之间的第一距离，以及，所述标定OBU和所述辅助RSU之间的第二距离；根据所述待标定RSU和所述辅助RSU在车道坐标系中的位置，以及所述第一距离和所述第二距离，确定所述标定OBU在车道坐标系中的位置。4.根据权利要求3所述的方法，其特征在于，根据所述位置关系和所述波形特征确定RSU标定参数，包括：根据所述标定OBU在车道坐标系中的位置、所述待标定RSU的安装高度和所述标定OBU的安装高度，确定所述待标定RSU的虚拟安装角度；根据所述波形特征，确定所述相位差；确定所述RSU标定参数，所述RSU标定参数包括所述虚拟安装角度和所述相位差。5.根据权利要求4所述的方法，其特征在于，根据所述标定OBU在车道坐标系中的位置、所述待标定RSU的安装高度和所述标定OBU的安装高度，确定所述待标定RSU的虚拟安装角度，包括：根据角度计算公式计算所述虚拟安装角度，所述角度计算公式为：其中，θ1为所述待标定RSU的虚拟安装角度，H为所述待标定RSU距离地面的高度，h为所述标定OBU距离地面的高度，y1为所述标定OBU在所述车道坐标系中的y坐标。6.根据权利要求4所述的方法，其特征在于，所述根据所述标定信号的波形特征，确定所述标定信号的相位差，包括：确定所述标定信号的波形特征矩阵；确定所述波形特征矩阵的自相关矩阵；根据所述自相关矩阵，确定所述待标定RSU各个天线通道接收到的所述标定信号的相位差。7.根据权利要求1～6任一项所述的方法，其特征在于，在根据所述位置关系和所述波形特征确定RSU标定参数之后，所述方法还包括：向所述待标定RSU发送所述RSU标定参数。8.一种路侧单元RSU标定装置，其特征在于，包括：信息获取模块，用于获取第一时间下的位置信息和待标定RSU接收到的标定信号的波形特征；其中，所述位置信息包括标定车载单元OBU的第一位置信息，待标定RSU的第二位置信息，以及辅助RSU的第三位置信息；所述标定信号是所述标定OBU向所述待标定RSU发送的；第一确定模块，用于根据所述位置信息确定所述标定OBU、所述待标定RSU和所述辅助RSU之间的位置关系；第二确定模块，用于根据所述位置关系和所述波形特征确定RSU标定参数，所述RSU标定参数包括所述待标定RSU的虚拟安装角度，和在所述虚拟安装角度下所述待标定RSU的空间阵列天线的各个通道接收到的所述标定信号的相位差。9.一种电子设备，其特征在于，所述电子设备被配置为执行如权利要求1～7任一项所述的路侧单元RSU标定方法。10.一种路侧单元RSU标定系统，其特征在于，包括：标定车载单元OBU，用于广播标定信号，以及向控制设备发送所述标定OBU的第一位置信息；待标定RSU，用于接收所述标定信号，并确定接收到的所述标定信号的波形特征，以及向所述控制设备发送所述波形特征和所述待标定RSU的第二位置信息；辅助RSU，用于向所述控制设备发送所述辅助RSU的第三位置信息；所述控制设备，用于根据所述波形特征和所述第一位置信息、所述第二位置信息和所述第三位置信息，确定RSU标定参数；其中，所述RSU标定参数包括所述待标定RSU的虚拟安装角度，和在所述虚拟安装角度下所述待标定RSU的空间阵列天线的各个通道接收到的所述标定信号的相位差。
说明书desc
技术领域本申请属于电子收费技术领域，具体涉及一种路侧单元标定方法、装置、电子设备和系统。背景技术ETC系统在高速公路收费中应用非常广泛，其包括RSU、车载单元和中心管理设备。RSU根据预设的RSU标定参数和OBU发送的专用短程通信信号来确定OBU的位置。可以理解，准确的RSU标定参数对OBU定位十分关键。目前，通常是由人工标定RSU的，即人工测量标定RSU所需的基本参数，并根据该基本参数确定RSU标定参数。可以理解，人工确定RSU标定参数不仅需要封闭车道影响交通，而且还存在RSU标定参数不准确且标定效率低的问题。发明内容本申请实施例提供一种RSU标定方法、装置、电子设备和系统，能够提高RSU标定参数的准确度并提高标定效率。为解决上述技术问题，本申请采用如下技术方案：第一方面，本申请实施例提供一种RSU标定方法，该方法包括：获取第一时间下的位置信息和待标定RSU接收到的标定信号的波形特征；其中，位置信息包括标定车载单元OBU的第一位置信息，待标定RSU的第二位置信息，以及辅助RSU的第三位置信息；标定信号是标定OBU向待标定RSU发送的。根据位置信息确定标定OBU、待标定RSU和辅助RSU之间的位置关系。根据位置关系和波形特征确定RSU标定参数，RSU标定参数包括待标定RSU的虚拟安装角度，和在虚拟安装角度下待标定RSU的空间阵列天线的各个通道接收到的标定信号的相位差。需要说明的是，若位置信息的采集时间，与待标定RSU接收到标定信号的时间的差值在预设范围内，则认为位置信息和待标定RSU接收到标定信号的时间是相同的，例如均是第一时间。此外，在本实施例中，虚拟安装角度为待标定RSU估计的标定信号的波达方向的垂直方向与水平方向的夹角。标定信号可以是DSRC标定信号或者其他标定信号，DSRC标定信号是通过DSRC技术发送的标定信号。位置信息可以是经纬度坐标的形式，也可以是其他形式。示例性的，第一位置信息可以是第一经纬度坐标、第一位置信息可以是第二经纬度坐标、第三位置信息可以是第三经纬度坐标。本申请实施例提供的方法可以自动确定标定RSU所需的相关参数，并根据该相关参数生成RSU标定参数，无需测量人员封闭车道自行测量，且具有较高的标定准确性和标定效率。可选的，该方法还包括：依次在N个不同的第一时间下分别执行上述第一方面示出RSU标定方法，获得不相同的N个RSU标定参数。以及，根据这N个RSU标定参数，生成RSU标定参数列表。本申请实施例提供的方法可以连续确定多组RSU标定参数，并形成RSU标定参数列表。基于该RSU标定参数列表，当该RSU应用于ETC系统进行车辆收费时，其能够在对车辆上的OBU进行定位的过程时从该列表中选择最合适的RSU标定参数，从而提高OBU的定位精度。可选的，根据位置信息确定标定OBU、待标定RSU和辅助RSU之间的位置关系，包括：根据第一位置信息、第二位置信息和第三位置信息确定标定OBU与待标定RSU之间的第一距离，以及，标定OBU和辅助RSU之间的第二距离。根据待标定RSU和辅助RSU在车道坐标系中的位置，以及第一距离和第二距离，确定标定OBU在车道坐标系中的位置。例如，在已知待标定RSU在车道坐标系中的xy平面中的位置是的情况下，根据第一位置信息、第二位置信息和第三位置信息确定标定OBU与待标定RSU之间的第一距离D1，以及，标定OBU和所述辅助RSU之间的第二距离D2。根据D1和D2确定所述标定OBU在车道坐标系的xy平面中的位置。其中，x为待标定RSU和辅助RSU之间的距离。可选的，根据位置关系和波形特征确定RSU标定参数，包括：根据标定OBU在车道坐标系中的位置、待标定RSU的安装高度和标定OBU的安装高度，确定待标定RSU的虚拟安装角度；根据波形特征，确定相位差；确定RSU标定参数，RSU标定参数包括虚拟安装角度和相位差。可选的，根据标定OBU在车道坐标系中的位置、待标定RSU的安装高度和标定OBU的安装高度，确定待标定RSU的虚拟安装角度，包括：根据角度计算公式计算虚拟安装角度，该角度计算公式为：其中，θ1为待标定RSU的虚拟安装角度，H为待标定RSU距离地面的高度，h为标定OBU距离地面的高度，y1为标定OBU在车道坐标系中的y坐标。可选的，根据标定信号的波形特征，确定标定信号的相位差，包括：确定标定信号的波形特征矩阵；确定波形特征矩阵的自相关矩阵；根据自相关矩阵，确定待标定RSU各个天线通道接收到的标定信号的相位差。可选的，在根据位置关系和波形特征确定RSU标定参数之后，该方法还包括：向待标定RSU发送RSU标定参数。第二方面，本申请实施例提供一种RSU标定装置，该装置包括：信息获取模块，用于获取第一时间下的位置信息和待标定RSU接收到的标定信号的波形特征；其中，位置信息包括标定OBU的第一位置信息，待标定RSU的第二位置信息，以及辅助RSU的第三位置信息；标定信号是标定OBU向待标定RSU发送的。第一确定模块，用于根据位置信息确定标定OBU、待标定RSU和辅助RSU之间的位置关系。第二确定模块，用于根据位置关系和波形特征确定RSU标定参数，RSU标定参数包括待标定RSU的虚拟安装角度，和在虚拟安装角度下待标定RSU的空间阵列天线的各个通道接收到的标定信号的相位差。第三方面，本申请实施例一种电子设备，该电子设备被配置为执行如上述第一方面示出的RSU标定方法。第四方面，本申请实施例一种RSU标定系统，包括：标定OBU，用于广播标定信号，以及向控制设备发送标定OBU的第一位置信息。待标定RSU，用于接收标定信号，并确定接收到的标定信号的波形特征，以及向控制设备发送波形特征和待标定RSU的第二位置信息。辅助RSU，用于向控制设备发送辅助RSU的第三位置信息。控制设备，用于根据标定信号的波形特征和第一位置信息、第二位置信息和第三位置信息，确定RSU标定参数。其中，RSU标定参数包括待标定RSU的虚拟安装角度，和在虚拟安装角度下待标定RSU的空间阵列天线的各个通道接收到的标定信号的相位差。可以理解的是，上述第二方面至第四方面的有益效果可以参见上述第一方面中的相关描述，在此不再赘述。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1是本申请实施例提供的ETC系统的示意性架构图。图2是本申请实施例提供的车道坐标系的示意图。图3A～图3C是本申请不同实施例提供的RSU标定系统的结构示意图。图4是本申请实施例提供的待标定RSU、辅助RSU和标定OBU的共有结构的示意图。图5是本申请实施例提供的RSU标定方法的流程图。图6是本申请实施例提供的虚拟安装角度的确定过程示意图。图7是本申请实施例提供的OBU定位过程示意图。图8是本申请实施例提供的一种RSU标定装置的示意图。图9是本申请实施例提供的一种电子设备的结构示意图。具体实施方式下面结合附图对本申请实施例提供的技术方案进行说明。在本申请实施例的描述中，除非另有说明，“/”表示或的意思，例如，A/B可以表示A或B；本文中的“和/或”仅仅是一种描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。应理解，在本申请实施例的描述中术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括一个或者更多个该特征。此外，除非另有说明，“多个”的含义是两个或两个以上。ETC系统又称为不停车收费系统，在高速公路收费中应用非常广泛。目前，ETC系统采用DSRC技术对车辆进行收费，使车辆在整个收费过程中保持行驶状态而不用停车。图1是本申请实施例提供的ETC系统的示意性架构图。参见图1所示，ETC系统包括：车载单元、路侧单元和中心管理设备。OBU通常安装在车辆的前挡风玻璃上，OBU内存储有车辆识别信息，具备无线通信功能。OBU内安装有智能IC卡，该IC卡能够使OBU实现电子支付功能，从而支付车辆的过路费。RSU通常是固定设置的，例如设置在收费站的门架或者通行杆上，或者设置在高速公路旁边的立柱上。以收费站为例，收费站每一个ETC车道上均设置有一个RSU。RSU中通常安装有空间阵列天线，通过该空间阵列天线，RSU能够确定OBU在车道坐标系下的位置。每一个车道均对应一个车道坐标系。示例性的，参见图2所示，车道坐标系的X轴水平且与车道通行方向垂直，Y轴与车道通行方向相反，Z轴竖直。在一些实施例中，RSU位于车道坐标系的坐标处，z为RSU距离地面的高度。中心管理设备中设置有数据库，该数据库中存储有大量注册车辆的基本信息和用户信息。在ETC系统工作的过程中，RSU不断地广播询问信号，当安装OBU的车辆通过收费站口时，OBU接收该询问信号，并通过DSRC技术向RSU发出响应信号。由于收费站内可能同时存在多个OBU。因此，对于一个RSU而言，其在广播询问信号之后，可能会收到多个OBU回复的DSRC标定信号。所以，RSU需要根据接收到的DSRC信号对OBU进行定位，确定在RSU预设范围内的目标OBU。例如，RSU可以利用空间阵列天线接收DSRC信号，并根据空间阵列天线中各个通道接收到的DSRC信号的波形特征，采用波达方向估计技术和数字波束形成技术，确定DSRC信号的波达方向。随后，RSU根据DSRC信号的波达方向、RSU标定参数、RSU安装信息、OBU安装信息，即可确定出OBU在车道坐标系下的位置，完成OBU定位。RSU在确定目标OBU之后，与该目标OBU进行双向通信和数据交互。例如，OBU将车辆识别信息发送给RSU，RSU再将其发送给中心管理设备，中心管理设备根据该车辆识别信息从该车辆的签约账户中扣除本次应交的过路费。基于上述描述可知，ETC系统在工作过程中，RSU对OBU的准确定位十分关键，而为了准确定位OBU在车道坐标系中的位置，RSU需要一组准确的RSU标定参数。通过对RSU进行标定可以确定的RSU标定参数。目前，通常是人工进行RSU标定的。但是在该过程中，需要封闭车道，由人工测量OBU在车道坐标系中的位置，不仅影响交通，还可能由于人工测量导致RSU标定参数不准确且效率低。为此，本申请实施例提供一种RSU标定方法、装置、电子设备和系统。本申请实施例提供的技术方案能够基于全球定位系统高精度的定位性能，将DSRC标定信号与各个设备的位置信息相结合，自动对RSU进行标定，能够快速且准确的确定RSU标定参数。图3A～图3C是本申请不同实施例提供的RSU标定系统的结构示意图。该RSU标定系统包括：待标定RSU、辅助RSU、标定OBU和控制设备。在一些实施例中，例如图3A和图3B所示，控制设备与待标定RSU、辅助RSU、标定OBU是相互独立的设备，这些设备之间能够通过DSRC技术或者无线网络相互通信。例如，在图3A所示的系统中，待标定RSU、辅助RSU和控制设备之间通过无线网络通信，标定OBU与待标定RSU、标定OBU与辅助RSU之间通过DSRC技术通信。又例如，在图3B所示的系统中，待标定RSU、辅助RSU、标定OBU不仅能够控制设备通过无线网络通信，标定OBU与待标定RSU和辅助RSU之间还可以通过DSRC技术通信。在另一些实施例中，控制设备可以作为一个控制模块集成在待标定RSU、辅助RSU或者标定OBU内。以控制设备作为控制模块集成在待标定RSU中为例，参见图3C所示，标定OBU可以和待标定RSU、辅助RSU通过DSRC技术通信，待标定RSU和辅助RSU之间可以通过无线网络通信。待标定RSU，通常固定安装在车道的门架或者L型杆上，具备获取经纬度坐标和接收DSRC标定信号的功能。在一些实施例中，待标定RSU可以设置在车道坐标系的位置，H为已知数值。辅助RSU，通常与待标定RSU的位置关系是确定的，例如，当待标定RSU的坐标为时，辅助RSU的坐标为，即待标定RSU与辅助RSU沿车道坐标系X轴的距离为x。辅助RSU能够获取辅助RSU的经纬度坐标，以及接收标定OBU发送的DSRC标定信号。标定OBU，通常安装在车辆上的前挡风玻璃上。相比于普通的OBU，标定OBU具备标定RSU的功能，具体包括具备获取经纬度坐标的功能，具备接收待标定RSU发送的标定指令的功能，以及广播DSRC标定信号的功能。示例性的，参见图4所示，待标定RSU、辅助RSU和标定OBU均包括通信模块、处理器、定位模块、DSRC接收模块和DSRC发送模块。其中，通信模块用于进行无线通信。处理器用于管理通信模块、定位模块、DSRC接收模块和DSRC发送模块，并进行相关的数据处理。定位模块用于获取设备自身的经纬度坐标，该定位模块可以是北斗卫星导航系统模块，也可以是全球定位系统定位模块，本实施例对此不进行限制。DSRC接收模块用于接收其他设备发送的DSRC信号。DSRC发送模块用于向其他设备发送DSRC信号。其中，对于标定OBU中的DSRC发送模块，其能够发送的DSRC信号包括DSRC标定信号，待标定RSU、辅助RSU均不能发送DSRC标定信号。控制设备，用于根据待标定RSU、辅助RSU和标定OBU的经纬度坐标，DSRC标定信号等标定相关数据标定RSU，即确定RSU标定参数。基于上述本申请任意一个实施例提供的RSU标定系统，本实施例还提供一种RSU标定方法，具体如下所示。图5是本申请实施例提供的RSU标定方法的流程图，涉及RSU标定系统根据各个设备的经纬度坐标和DSRC标定信号标定RSU的过程，具体包括如下步骤S501～S507。S501，标定OBU、待标定RSU和辅助RSU在进入标定模式后，定时获取各自的经纬度坐标。在本实施例中，标定OBU、待标定RSU和辅助RSU可以根据用户指令进入标定模式，本实施例对各个设备进入标定模式的先后顺序不进行限制。在标定模式下，标定OBU、待标定RSU和辅助RSU中的定位模块均定时获取自身的经纬度坐标，例如，每间隔100ms获取一次经纬度坐标。可选的，由于待标定RSU和辅助RSU的位置是固定的，其在进入标定模式后，获取一次经纬度坐标即可。需要说明的是，本实施例将标定OBU的经纬度坐标称为第一经纬度坐标，将待标定RSU的经纬度坐标称为第二经纬度坐标，将辅助RSU的经纬度坐标称为第三经纬度坐标。S502，待标定RSU广播唤醒指令，该唤醒指令用于唤醒标定OBU发送DSRC标定信号和第一经纬度坐标。在本实施例中，唤醒指令也可以称作唤醒数据帧。S503，标定OBU在接收到唤醒指令之后，每间隔预设时间通过DSRC技术广播一次DSRC标定信号，以及向控制设备发送一次当前时刻标定OBU的第一经纬度坐标。其中，标定OBU可以通过DSRC技术将第一经纬度坐标和DSRC标定信号一起发送给待标定RSU，再由待标定RSU将其转发给控制设备。或者，标定OBU也可以通过无线网络将第一经纬度坐标直接发送给控制设备。S504，待标定RSU在接收到DSRC标定信号之后，将第二经纬度坐标和DSRC标定信号的波形特征发送给控制设备。需要说明的是，若控制设备以控制模块的形式集成在待标定RSU内部，则代表RSU在接收到DSRC标定信号之后，将第二经纬度坐标和DSRC标定信号的波形特征发送给本地的控制模块即可。应理解，由于待标定RSU是固定安装在车道附近的，因此，在RSU标定过程中，待标定RSU的第二经纬度坐标通常是固定确定不变的。因此，在一些实施例中，在本次标定过程中，待标定RSU可以仅向控制设备发送一次第二经纬度坐标。控制设备接收到第二经纬度坐标之后将其存储在本地，以便在后续使用的过程中直接调用。在另一些实施例中，待标定RSU在每一次接收到DSRC标定信号之后，均将第二经纬度坐标和DSRC标定信号的波形特征一起发送给控制设备，以避免控制设备在本地查找和调用第二经纬度坐标的过程。可选的，待标定RSU在广播唤醒指令之后，若在预设时间内未接收到DSRC标定信号，则自动退出标定模式。或者，待标定RSU也可以根据用户指令退出标定模式。S505，辅助RSU在接收到DSRC标定信号之后，将第三经纬度坐标发送给控制设备。应理解，由于辅助RSU也是固定安装在车道附近的，因此，在RSU标定过程中，辅助RSU的第三经纬度坐标通常是确定不变的。因此，在一些实施例中，在本次标定过程中，辅助RSU仅在第一次接收到DSRC标定信号之后向控制设备发送第三经纬度坐标。控制设备接收到第三经纬度坐标之后，将其存储在本地，以便在后续使用的过程中直接调用。在另一些实施例中，待标定RSU在每一次接收到DSRC标定信号之后，均可以再次向控制设备发送一次第三经纬度坐标，以避免控制设备在本地查找和调用第三经纬度坐标的过程。可选的，辅助RSU在广播唤醒数据帧之后，若在预设时间内未接收DSRC标定信号，则自动退出标定模式。或者，待标定RSU也可以根据用户指令退出标定模式。S506，控制设备根据接收到的标定相关数据计算待标定RSU的标定参数，该标定相关数据包括第一经纬度坐标、第二经纬度坐标、第三经纬度坐标和DSRC标定信号的波形特征。在本实施例中，标定OBU的第一经纬度坐标为，待标定RSU的第二经纬度坐标，辅助RSU的第三经纬度坐标。需要说明的是，当OBU处于车道坐标系的不同位置时，其发射的DSRC标定信号到达RSU的角度就不相同。相应地，RSU的空间阵列天线接收到的DSRC标定信号的波形特征就不相同。例如，针对OBU在不同位置时发射的DSRC标定信号，RSU接收到的DSRC标定信号的相位差Phase就不相同。因此，可以理解，不同的OBU位置，对应不同的RSU标定参数。下以T1时刻OBU所在的位置为例，对控制设备RSU标定过程进行示例性说明，该过程包括如下内容～：控制设备确定标定OBU在车道坐标系下的位置。由于待标定RSU和辅助RSU在车道坐标系下的位置是已知的，分别为和。忽略待标定RSU和辅助RSU与标度OBU高度不一致的问题，控制设备根据待标定RSU和辅助RSU在车道坐标系下的位置，以及第二经纬度坐标和第三经纬度坐标，可以将标定OBU的第一经纬度坐标转化为车道坐标系下的坐标。具体如下所示。首先，控制设备根据经纬度计算距离公式，计算标定OBU距离待标定RSU的第一距离D1，以及标定OBU距离辅助RSU的第二距离D2。第一距离D1通过如下公式确定：D1＝R*Arccos*Pi/180其中，C1＝sin*sin*cos+cos*cos，R为地球半径，Pi为π。第二距离D2通过如下公式确定：D2＝R*Arccos*Pi/180其中，C2＝sin*sin*cos+cos*cos，R为地球半径，Pi为π。其次，控制设备根据D1和D2确定标定OBU在车道坐标系的坐标。在仅考虑各个设备在车道坐标系XY平面的位置的情况下，待标定RSU的坐标已知为，辅助RSU的坐标已知为，待计算的标定OBU的坐标假设用表示。那么结合图6可知，标定OBU到待标定RSU设备的距离D1，和标定OBU到辅助RSU的距离D2，满足如下计算公式：求解上述公式，即可得到x1和y1的具体数据值，从而确定出OBU在车道坐标系下的坐标。应理解，控制设备根据标定OBU在不同时刻经纬度坐标，控制设备可以计算出不同时刻标定OBU在车道坐标系中的位置。控制设备根据DSRC标定信号的波形特征确定RSU的空间阵列天线各个通道的相位差Phase。待标定RSU中安装有空间阵列天线，通过空间阵列天线的数字采集功能，待标定RSU可以利用多个天线通道接收标定OBU广播的DSRC标定信号。由于空间阵列天线的各个阵子在天线中的位置是有差异的，且这些个阵子通常对应多个天线通道。因此，待标定RSU通过多个天线通道接收到的DSRC标定信号的波形特征是不同的，该波形特征包括相位、幅值等。控制设备可以将各个天线通道在不同时间采集到的DSRC标定信号的波形可以用如下矩阵x表示。其中，m为空间阵列天线的通道数，n为针对Ti时刻的DSRC标定信号的采样点的个数。例如，x11为第一个天线通道的第一个采样点采集的DSRC标定信号的波形信息。x45为第四个天线通道的第五个采样点采集的DSRC标定信号的波形信息。控制设备对DSRC标定信号矩阵x进行互相关运算，得出自相关矩阵Rxx。Rxx＝x*x′其中，Rxx是一个m*m的复数矩阵。也就是说，Rxx也可以表示为如下形式：控制设备根据自相关矩阵Rxx，可以确定待标定RSU各个天线通道接收到的DSRC标定信号的相位差Phase。Phase＝{angle1，angle2，angle3……anglem}在相位差Phase中，以第一个通道为参考基准通道，anglei表示空间阵列天线的第i个通道的DSRC标定信号与第一个通道的DSRC标定信号的相位差。例如，angle1表示第1个通道的DSRC标定信号与第1个通道的DSRC标定信号的相位差，应理解angle1＝0。又例如，angle3表示第3个通道的DSRC标定信号与第1个通道的DSRC标定信号的相位差。相位差Phase的复数形式如下所示：Phase＝{1，a2+b2i，a3+b3i，……am+bmi}控制设备对自相关矩阵Rxx按照相位差Phase进行相位补偿之后，可以获得补偿后的自相关矩阵Rxx′。Rxx′＝Rxx*′在自相关矩阵Rxx′中，′如下所示：因此，对于经过了相位补偿的自相关矩阵Rxx′，控制设备对其进行波达方向估计时，定位出的信号方向的角度是90度，即信号方向与天线阵列的法线方向相同，各个天线的波束增益最大。控制设备确定待标定RSU标定参数。在本实施例中，RSU标定参数包括虚拟安装角度，和该虚拟安装角度下RSU的空间阵列天线接收DSRC标定信号时的相位差。根据波束最大增益方向90度，以及标定OBU的坐标，空间阵列天线的安装高度H，标定OBU的安装高度h，即可计算出待标定RSU相对于车道坐标系的虚拟安装角度θ1。其中，参见图6所示，当DSRC标定信号的波达方向是90°时，认为DSRC标定信号的波达方向的垂直方向，即为空间阵列天线的天线平面所在方向。基于此，虚拟安装角度为该天线平面与水平方向的夹角。针对标定OBU在T1时刻的位置，控制设备确定出的RSU标定参数为：θ1和{angle11,angle12,angle13,…,angle1m}。由于标定OBU在进入标定区域之后是逐渐靠近待标定RSU移动的，待标定OBU在每个数据采集时间Ti的位置是不同的。因此，针对每一个数据采集时间下标定OBU的位置，以及待标定RSU接收到的标定OBU发射的DSRC标定信号，控制设备均可以确定出一组RSU标定参数，形成一个RSU标定参数列表。表1RSU标定参数列表在表1中，n为整数，且n≥1。也就是说，控制设备在每个数据采集时刻Ti，根据标定OBU、待标定RSU和辅助RSU的坐标信息，以及待标定RSU采集到的DSRC标定信号，可以标定至少一组RSU标定参数。S507，控制设备向待标定RSU发送RSU标定参数。在本实施例中，控制设备可以在每确定一个组RSU标定参数之后，将该组参数立即发送给待标定RSU；也可以在确定所有的RSU标定参数之后，将所有RSU标定参数一起发送给待标定RSU，本实施例对此不进行限制。通过上述步骤S501～S507，本申请实施例提供的RSU标定系统即可自动确定RSU标定参数，相比于封闭车道由人工进行RSU标定，该标定系统在标定RSU时更为便捷和高效。在ETC系统中，完成标定的RSU能够根据RSU标定参数准确确定OBU在车道坐标系中的位置。下面结合图7对其进行具体的说明。图7是本申请实施例提供的OBU定位过程示意图，涉及已标定RSU结合标定参数和接收到的DSRC标定信号确定OBU在车道坐标系中的位置的过程，具体包括如下步骤S701～S706。S701，RSU广播询问信号。S702，OBU接收询问信号。S703，OBU向RSU发送DSRC标定信号。S704，RSU根据接收到的DSRC标定信号的波形特征，从预设的RSU标定参数列表中确定目标RSU标定参数。该RSU标定参数列表中包括多组RSU标定参数。针对OBU发送的DSRC标定信号，RSU接收到的DSRC标定信号的波形特征是Xr。在Xr中，m为RSU中空间阵列天线的通道数，n为每个通道针对该DSRC标定信号的采样点的个数。对信号Xr进行互相关运算，得到互相关矩阵Rxxr。RSU的空间阵列天线包括m个通道，以通道1为参考基准通道，该空间阵列天线的各个通道的相位差为Phaser。Phaser＝{0,angle12r,angle13r,…,angle1mr}将Xr的相位差Phaser与RSU标定参数列表中的各个相位差Phase进行相关性计算，得到相关性结果：在该相关性结果中表示Phaser与RSU标定参数列表中第i个相位差Phase的相关性，i∈N*。RSU通常将中最大的数值对应的RSU标定参数确定为目标RSU标定参数。以中最大的数值是为例，那么目标RSU标定参数即为目标相位差{anglek1,anglek2,anglek3,…,anglekm}和目标虚拟安装角度θk。S705，RSU根据目标RSU标定参数中的目标相位差Phase确定DSRC标定信号的入射角度θ。在本实施例中，DSRC标定信号的入射角度θ′是指DSRC标定信号的入射方向与RSU的空间阵列天线表面的夹角。入射角度θ′的具体确定过程如下所示。首先，RSU根据目标相位差Phase，对接收到的DSRC标定信号的波形进行相位补偿。以目标相位差是Phasei＝{0,angle12i,angle13i,…,angle1mi}为例，根据该目标相位差补偿后的DSRC标定信号为：Rxxr'＝Rxxr*'随后，根据DSRC标定信号的权矢量确定DSRC标定信号的功率谱。在本实施例中，DSRC标定信号的权矢量为其中，λ是DSRC标定信号的波长，d为RSU的空间阵列天线中相邻的天线之间的距离，θS为扫描角度。空间阵列天线在扫描DSRC标定信号的过程中，扫描角度不断地在发生变化。在本实施例中，DSRC标定信号的功率谱为其中，为的共轭转置矩阵。最后，根据DSRC标定信号的功率谱确定入射角度θ。在本实施例中，功率谱的最大值对应的θs即为DSRC标定信号的入射角度θ。需要说明的是，θ也可以表示为，其中，θx为θ在车道坐标系中X轴方向的分量，θy为θ在车道坐标系中Y轴方向的分量。S706，RSU根据目标虚拟安装角度和DSRC标定信号的入射角度确定OBU在车道坐标系中的位置。假设OBU在车道坐标系下的坐标为，其中h是OBU的安装高度，h已知，下面对的确定过程进行说明。RSU的空间阵列天线接收到的DSRC标定信号的可以分为横向阵列和纵向阵列来表示，其中，横向阵列的单位分量为Vx和纵向阵列单位分量Vy为如下：Vx＝Vy＝入射角度满足如下关系：求解上述方程组即可求得OBU在车道坐标系下的坐标x和y，从而确定OBU在车道坐标系下的坐标为。基于上述各个实施例提供的RSU标定方法，本申请实施例还提供如下技术方案。图8是本申请实施例提供的一种RSU标定装置的示意图。参见图8所示，该装置包括信息获取模块801、第一确定模块802和第二确定模块803。信息获取模块801，用于获取第一时间下的位置信息和待标定RSU接收到的标定信号的波形特征；其中，位置信息包括标定车载单元OBU的第一经纬度，待标定RSU的第二经纬度，以及辅助RSU的第三经纬度；标定信号是标定OBU向所述待标定RSU发送的。第一确定模块802，用于根据位置信息确定标定OBU、待标定RSU和辅助RSU之间的位置关系。第二确定模块803，用于根据位置关系和波形特征确定RSU标定参数，RSU标定参数包括待标定RSU的虚拟安装角度，和在虚拟安装角度下待标定RSU的空间阵列天线的各个通道接收到的标定信号的相位差。可选的，第一确定模块802，用于根据位置信息确定标定OBU、待标定RSU和辅助RSU之间的位置关系，包括：用于根据第一位置信息、第二位置信息和第三位置信息确定标定OBU与待标定RSU之间的第一距离，以及，标定OBU和辅助RSU之间的第二距离。根据待标定RSU和辅助RSU在车道坐标系中的位置，以及第一距离和第二距离，确定标定OBU在车道坐标系中的位置。可选的，第二确定模块803，用于根据位置关系和波形特征确定RSU标定参数，包括：用于根据标定OBU在车道坐标系中的位置、待标定RSU的安装高度和标定OBU的安装高度，确定待标定RSU的虚拟安装角度；根据波形特征，确定相位差；确定RSU标定参数，RSU标定参数包括虚拟安装角度和相位差。可选的，第二确定模块803，用于根据标定OBU在车道坐标系中的位置、待标定RSU的安装高度和标定OBU的安装高度，确定待标定RSU的虚拟安装角度，包括：用于根据角度计算公式计算虚拟安装角度。该角度计算公式为：其中，θ1为待标定RSU的虚拟安装角度，H为待标定RSU距离地面的高度，h为标定OBU距离地面的高度，y1为标定OBU在车道坐标系中的y坐标。可选的，第二确定模块803，用于根据标定信号的波形特征，确定标定信号的相位差，包括：用于确定标定信号的波形特征矩阵；确定波形特征矩阵的自相关矩阵；根据自相关矩阵，确定待标定RSU各个天线通道接收到的标定信号的相位差。可选的，该装置还包括参数发送模块804，用于在第二确定模块803确定RSU标定参数之后，向待标定RSU发送RSU标定参数。本申请实施例还提供一种电子设备，参见图9所示，该电子设备包括存储器、处理器以及存储在存储器中并可在处理器上运行的计算机程序，该处理器执行该计算机程序时实现上述各个实施例中示出的RSU标定方法。应当理解，当在本申请说明书和所附权利要求书中使用时，术语“包括”指示所描述特征、整体、步骤、操作、元素和/或组件的存在，但并不排除一个或多个其它特征、整体、步骤、操作、元素、组件和/或其集合的存在或添加。在本申请说明书中描述的参考“一个实施例”或“一些实施例”等意味着在本申请的一个或多个实施例中包括结合该实施例描述的特定特征、结构或特点。由此，在本说明书中的不同之处出现的语句“在一个实施例中”、“在一些实施例中”等不是必然都参考相同的实施例，而是意味着“一个或多个但不是所有的实施例”，除非是以其他方式另外特别强调。术语“包括”、“包含”、“具有”及它们的变形都意味着“包括但不限于”，除非是以其他方式另外特别强调。以上所述实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围，均应包含在本申请的保护范围之内。
