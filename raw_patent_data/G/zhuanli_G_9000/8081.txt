标题title
基于自适应混合共轭梯度下降的光学临近修正掩膜方法
摘要abst
本发明属于芯片制造领域，提出了基于自适应混合共轭梯度下降的光学临近修正掩膜方法。该方法提出了一种可自我调节的混合共轭梯度下降策略。通过利用上一次循环的经验，指导下一次循环修正过程所选择具体采用的共轭梯度方法，做到自主调节梯度搜索的步长和方向，从而更好的搜索到最优解。解空间更大，新设计的优化函数可以使产生的掩膜质量更优；实现光刻加速模型，算法效率高；产生的掩膜版能更有效对抗工艺偏差。优化芯片制造掩膜版，使得光刻之后的图案有较高的保真度。
权利要求书clms
1.基于自适应混合共轭梯度下降的光学临近修正掩膜方法，其特征在于，包括步骤如下：步骤1，输入目标图片Zt，光刻核h1,…,hk及对应权重系数μ1,…,μk；步骤2，初始化；步骤2.1，掩膜版初始化为与目标图片Zt同样形状，并计算初始水平集函数φ0，计算φ0的几何梯度步骤2.2，经过光刻模拟后获得初始损失函数F0，计算初始损失函数梯度G0；F＝αFepe+βFpvb其中，F为优化损失函数，α，β分别是EPE损失函数，PVBand损失函数；将F初始化为F0；步骤2.3，计算初始边界演化速度步骤3，进入第i个循环，i＞0：步骤3.1计算边界演化时间步长Δti；步骤3.2计算水平集函数的变化量：其中，v为掩膜轮廓各处移动速度，G为优化函数对掩膜版信息的导数，φ为水平集函数，λ为共轭系数；i为迭代次数；采用自适应混合共轭梯度下降法获得λi；其中，步骤3.3更新水平集函数：φi＝φi-1+Δφi；步骤3.4平面各点根据φi的正负决定掩膜矩阵数值；若为正数，则掩膜矩阵取值取1代表在掩膜内，反之取0代表此处位于掩膜外；步骤3.5将更新的掩膜进行光刻模拟，获得最优条件和最大偏差条件下生成的打印图片，进行评估并获得新的损失函数值Fi，更新损失函数梯度Gi；步骤3.6计算新的边界演化速度vi；步骤3.7进行判断，若平面各点速度的绝对值最大值小于设定阈值，则认为收敛完成，输出掩膜M*，反之重回步骤3.1，进行下一循环。2.根据权利要求1所述的基于自适应混合共轭梯度下降的光学临近修正掩膜方法，其特征在于，水平集函数φ在水平集方法中，平面被图形的边界分为三个区域：内部，外部和边界线；水平集函数则是表征平面几何信息的中心函数：其中d是平面上点到边界的欧几里得距离。3.根据权利要求1所述的基于自适应混合共轭梯度下降的光学临近修正掩膜方法，其特征在于，采用了分段式欧拉时间步长算法，设定步长参数λt,时间步长计算：其中σ是0～1间的参数，用以控制演化更新的数值变化。4.根据权利要求1所述的基于自适应混合共轭梯度下降的光学临近修正掩膜方法，其特征在于，步骤2.2优化损失函数F中：Fepe＝∑EPE violations其中，Fepe为EPE损失函数，为掩膜平面上的点，D为目标轮廓测量点与打印图片轮廓的垂直距离，thEPE为EPE计误差阈值；其中，Fpvb为PVBand损失函数，Zk为在第k个条件下生成的打印图片，Zt为目标图形，Np为所考虑的不同光刻条件的数目。5.根据权利要求1所述的基于自适应混合共轭梯度下降的光学临近修正掩膜方法，其特征在于，所述光刻模拟为将光刻核提前进行加权求和，然后与掩模图像进行卷积运算：其中：H：光刻模拟核函数集；Nk：所选用的光刻核函数个数；hk和wk：第k个核函数和其对应的权重；卷积运算；6.根据权利要求2所述的基于自适应混合共轭梯度下降的光学临近修正掩膜方法，其特征在于，损失函数对掩膜信息的梯度计算证明：其中hk和μk是光刻核和对应的权重系数，是hk的共轭转置。7.根据权利要求1所述的基于自适应混合共轭梯度下降的光学临近修正掩膜方法，其特征在于，步骤3.5中，所述最优条件为透镜成像处刚好是接收平面处，曝光剂量也标准化为1的条件；最大偏差条件为根据最优条件设定的最大偏差范围。
说明书desc
技术领域本发明属于芯片制造领域，涉及一种基于自适应混合共轭梯度下降的光学临近修正掩膜方法。背景技术随着集成电路工艺的特征尺寸不断减小，现有的制造技术面临着极大的挑战。由于电路的图形尺寸和光刻工艺所使用的光源波长相近，干涉效应将不可避免的产生，从而导致光刻图形失真，进而影响集成电路制造产能。分辨率增强技术的应用则是提升产能的关键步骤。光学临近校正则是最为核心的分辨率增强技术。在光学临近校正的过程中，待加工的掩模上的图形会进行调整，以达到补偿光学散射的影响。第一类是基于设计规则的方法，这一类方法的特点是应用简单并且速度快，能很好地处理简单的设计。而先进技术节点下大规模设计的设计规则呈指数级增长，因此基于设计规则的方法优化掩模版的质量有限。另一种是基于模型的方法，这类方法有着极大的解空间，因此想要得到一个高质量的结果会非常耗时。随着电路设计的复杂程度日益增加，以上基于设计规则和基于模型的方法都会面临效率或者产出质量的问题。因此解析类方法称为成为新的趋势，其中逆光刻技术开始是广泛使用的一种方法。逆光刻技术通过将光刻过程抽象成由光学掩膜到最终打印图像的数学转换模型，进而提取出目标函数，并通过修改掩膜优化目标函数。经典的逆光刻技术基于每一个像素的强度进行修正，并通过设立阈值函数来最终决定掩膜版上每一坐标处的窗口打开与否。这种方法迭代的效率，及其制造出的掩膜版最终生成的打印图片质量仍有充分的提高空间。发明内容为了克服现有技术中存在的问题，本发明与像素级别修正的传统逆光刻技术有根本的不同，水平集算法抽取出掩膜的边界线，并用边界线整体的收缩膨胀、分离合并来代表掩膜图像的变化。在每一个循环里通过对比实际输出的图形与目标图形的偏差，反向指导掩膜的优化更迭。在实际操作过程中，通过给平面各处加以标记，以区分该处属于掩膜图形内部还是外部。1)光刻模型及逆光刻技术建模依据正向光刻模型，基于一个给定的掩模得到打印图形。这其中包含两个步骤：光刻投影模型和光刻胶模型。光刻投影模型可以描述成光刻核和掩模之间的运算。光刻胶模型则通过判断透射光强度是否超过阈值thI，确定实际打印形状。2)精确边距误差打印图形的失真是连续的，产生的图形失真部分只包含凸起或者凹陷。在目标图案轮廓线上插入大量探测点，并计算探测点处目标轮廓与实际打印图像的垂直距离。如果误差之和超过一个阈值，那么在这个测量点上就被看做是有精确边距误差违例产生。打印图形的EPE数值即为该图像上存在精确边距误差的探测点总数。EPE误差函数即为EPE损失函数。3)工艺偏差建模使得当工艺偏差出现时，打印图形受到的扰动影响最小。这样的扰动可以由工艺偏差环来衡量；基于这个思想，在普遍使用的最小化打印图形误差的优化目标中再加入一项PVBand损失函数，以期望达到协同优化的目的。在建模过程中所涉及到的表达式都是连续可导函数，因此依然可以使用通用的基于梯度的一阶算法迭代求解。4)优化的自适应混合共轭梯度下降策略在纳米尺度的图形优化过程中，优化过程对梯度下降方案的选择十分敏感。共轭梯度下降法在处理较大范围的图像更新过程中较为有效。共轭梯度下降法的形式可以被概括为：其中：v：掩膜轮廓各处移动速度；G：优化函数对掩膜版信息的导数；φ：平面到掩膜边界距离函数；λ：共轭系数。其中是第i次迭代的更新速度。是由共轭梯度不同方法决定的更新系数，常常是固定的。本发明提出一种可自我调节的混合共轭梯度下降策略。通常情况下，Polak-Ribiere-Polyak共轭梯度法可以更快的获得局部最优解：而在某在情形下，PRP共轭梯度法不够稳定，与之相比，Fletcher-Reeves共轭梯度法拥有更好的收敛性质：为了更好地利用两种共轭梯度法的优势，取长补短，既稳定又高效地获得更好的局部最优解，我们在每一个循环计算出两种共轭系数，并通过比较两者的相对大小来决定选取该循环所使用的迭代策略，即自适应混合共轭梯度下降法：具体技术方案如下：自适应混合共轭梯度下降的光学临近修正掩膜方法，包括步骤如下：步骤1，输入目标图片Zt，光刻核h1，...，hk及对应权重系数μ1，...，μk；步骤2，初始化；步骤2.1，掩膜版初始化为与目标图片Zt同样形状，并计算初始水平集函数φ0，计算φ0的几何梯度步骤2.2，经过光刻模拟后获得初始损失函数F0，计算初始损失函数梯度G0；F＝αFepe+βFpvb其中，F为优化损失函数，α，β分别是EPE损失函数，PVBand损失函数；将F初始化为F0；步骤2.3，计算初始边界演化速度步骤3，进入第i个循环，i＞0：步骤3.1计算边界演化时间步长Δti；步骤3.2计算水平集函数的变化量：Δφi＝Δti；其中，v为掩膜轮廓各处移动速度，G为优化函数对掩膜版信息的导数，φ为平面到掩膜边界距离函数，λ为共轭系数；i为迭代次数；采用自适应混合共轭梯度下降法获得λi；其中，步骤3.3更新水平集函数：φi＝φi-1+Δφi；步骤3.4平面各点根据φi的正负决定掩膜矩阵数值；若为正数，则掩膜矩阵取值取1代表在掩膜内，反之取0代表此处位于掩膜外；步骤3.5将更新的掩膜进行光刻模拟，获得最优条件和最大偏差条件下生成的打印图片，进行评估并获得新的损失函数值Fi，更新损失函数梯度Gi；步骤3.6计算新的边界演化速度vi；步骤3.7进行判断，若平面各点速度的绝对值最大值小于设定阈值，则认为收敛完成，输出掩膜M*，反之重回步骤3.1，进行下一循环。进一步地，水平集函数φ在水平集方法中，平面被图形的边界分为三个区域：内部，外部和边界线；水平集函数则是表征平面几何信息的中心函数：其中d是平面上点到边界的欧几里得距离。进一步地，采用分段式欧拉时间步长算法，设定步长参数λt，时间步长计算：其中σ是0～1间的参数，用以控制演化更新的数值变化。进一步地，步骤2.2优化损失函数F中：Fepe＝∑EPE violations其中，Fepe为EPE损失函数，为掩膜平面上的点，D为目标轮廓测量点与打印图片轮廓的垂直距离，thEPE为EPE计误差阈值；其中，Fpvb为PVBand损失函数，Zk为在第k个条件下生成的打印图片，Zt为目标图形，Np为所考虑的不同光刻条件的数目。进一步地，在求解过程中，每次迭代过程都需要进行光刻模拟来获得当前打印图形，以计算误差。但是光刻模拟的计算开销极大，使得进行模拟的运行时间主导了整个掩模优化的时间。为了提升运行效率，一种加速技术来快速进行光刻模拟。考虑到光刻模拟运算可以被表达为一系列的掩模图像与光刻核之间的加权卷积运算之和，所以提出将光刻核提前进行加权求和的加速思路，得到“有效光刻核”，然后使用有效光刻核与掩模图像进行卷积运算。其中：H：光刻模拟核函数集；Nk：所选用的光刻核函数个数；hk和wk：第k个核函数和其对应的权重；卷积运算；进一步地，损失函数对掩膜信息的梯度计算证明：其中hk和μk是光刻核和对应的权重系数，是hk的共轭转置。进一步地，上述步骤3.5中，所述最优条件为透镜成像处刚好是接收平面处，曝光剂量也标准化为1的条件；最大偏差条件为根据最优条件设定的最大偏差范围。本发明的有益效果为，提出了一种可用于光学临近修正的自适应混合共轭梯度下降策略。通过利用上一次循环的经验，指导下一次循环修正过程所选择具体采用的共轭梯度方法，做到自主调节梯度搜索的步长和方向，从而更好的搜索到最优解。该方法具有以下特点：1、解空间更大，新设计的优化函数可以使产生的掩膜质量更优；2、实现光刻加速模型，算法效率高；3、对工艺偏差建模优化，产生的掩膜版能更有效对抗工艺偏差；4、能支持其他优化目标的扩展。附图说明图1是目标掩膜版示意图。图2为本发明10个循环优化的掩膜图。图3所示传统方法循环20次后的掩膜版，图3经过本发明优化的方法得到10个循环后的掩膜版。具体实施方式结合附图和具体实施例，详细描述本发明的技术方案。自适应混合共轭梯度下降的光学临近修正掩膜方法，包括步骤如下：步骤1，输入目标图片Zt，如图1所示，光刻核h1，...，hk及对应权重系数μ1，...，μk；步骤2，初始化；步骤2.1，掩膜版初始化为与目标图片Zt同样形状，并计算初始水平集函数φ0，计算φ0的几何梯度光刻胶模型光刻强度阈值thI＝0.225。步骤2.2，经过光刻模拟后获得初始损失函数F0，计算初始损失函数梯度G0；F＝αFepe+βFpvb其中，F为优化损失函数，α，β分别是EPE损失函数，PVBand损失函数；将F初始化为F0；thEPE＝15nm。Fepe＝∑EPE violations其中，Fepe为EPE损失函数，为掩膜平面上的点，D为目标轮廓测量点与打印图片轮廓的垂直距离，thEPE为EPE计误差阈值；其中，Fpvb为PVBand损失函数，Zk为在第k个条件下生成的打印图片，Zt为目标图形，Np为所考虑的不同光刻条件的数目；步骤2.3，计算初始边界演化速度步骤3，进人第i个循环：步骤3.1计算边界演化时间步长Δti；采用分段式欧拉时间步长算法，设定步长参数λt，时间步长计算：其中σ是0～1间的参数，用以控制演化更新的数值变化。时间步长参数λt＝2.5，25循环后的减速系数σ＝0.65。步骤3.2计算水平集函数的变化量：Δφi＝Δti；步骤3.3更新水平集函数：φi＝φi-1+Δφi；步骤3.4平面各点根据φi的正负决定掩膜矩阵数值；若为正数，则掩膜矩阵取值取1代表在掩膜内，反之取0代表此处位于掩膜外；步骤3.5将更新的掩膜进行光刻模拟，获得最优条件和最大偏差条件下生成的打印图片，所述最优条件：透镜成像处刚好是接收平面处，曝光剂量也标准化为1；而此实施例中所允许的透镜成像平面最大可偏离于接收平面正负25nm，曝光剂量范围为0.98～1.02；进行评估并获得新的损失函数值Fi，更新损失函数梯度Gi；步骤3.6计算新的边界演化速度vi；步骤3.7进行判断，若平面各点速度的绝对值最大值小于设定阈值，阈值为0.015，则认为收敛完成，输出掩膜M*，反之重回步骤3.1，进行下一循环。本实施例所使用的光刻核函数和图像评估模块是由公开的ICCAD 2013 CAD竞赛组委会提供.IEEE，2013：271-274.)。通过图3所示，经过本发明优化的方法得到10个循环后的掩膜版比图3所示传统方法循环20次后的掩膜版，跟图1所示的目标掩膜版更接近，边界更加清晰。
