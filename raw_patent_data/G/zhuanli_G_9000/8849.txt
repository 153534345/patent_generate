标题title
基于接口自动化测试与功能、性能、安全测试融合的方法
摘要abst
本发明公开了一种基于接口自动化测试与功能、性能、安全测试融合的方法，包括：从第一个接口开始，在每研发完成一个接口编写后就开始进行测试任务；通过自动化生成接口脚本用例和数据对每一个接口分别进行单接口测试、功能业务测试、性能测试、安全测试；在单接口、功能业务、性能测试及安全测试的用例页面上创建测试任务，对任务进行定时执行设置和/或触发测试任务时执行该任务；触发的任务包括读取到新的接口时便开始测试任务；根据测试结果自动生成测试报告。本发明将测试往前移动，尽早开展自动化，通过自动化生成接口脚本用例和数据进行测试，且同时生成接口性能脚本和接口安全脚本，减少性能测试和安全测试在接口上的重复工作。
权利要求书clms
1.基于接口自动化测试与功能、性能、安全测试融合的方法，其特征在于，包括：从第一个接口开始，在每研发完成一个接口编写后就开始进行测试任务；通过自动化生成接口脚本用例和数据对每一个接口分别进行单接口测试、功能业务测试、性能测试、安全测试；在单接口测试用例页面、功能业务测试用例页面、性能测试用例页面、安全测试用例页面上创建测试任务，对任务进行定时执行设置和/或触发测试任务时执行该任务；触发的任务包括读取到新的接口时便开始测试任务；根据测试结果自动生成测试报告。2.根据权利要求1所述的基于接口自动化测试与功能、性能、安全测试融合的方法，其特征在于，进行测试时读取接口的方法包括：提取每一个接口的名称、header、method、参数、参数类型和长度信息，各个接口展示在前端接口集里，后台生成接口方法；通过读取各个接口参数类型和长度，自动生成各接口参数的测试数据、正常数据、异常数据和null，并展示在前端数据集里，数据集里还包含项目的环境地址信息。3.根据权利要求2所述的基于接口自动化测试与功能、性能、安全测试融合的方法，其特征在于，所述单接口测试包括：选择需要测试的接口自动生成测试用例；在执行过程中读取数据集中各接口参数的数据进行接口自动化测试，把每次调用的request和response的组合保存到数据库，当下次发送相同request时，自动和上次的response做差异检测，对于有变化的字段给出告警；通过规则配置设立白名单列表把动态值的字段排除在外，所述白名单列表包括token值、session ID、时间戳，从而避免动态值每次调用都会有告警。4.根据权利要求2所述的基于接口自动化测试与功能、性能、安全测试融合的方法，其特征在于，所述功能业务测试包括：根据测试业务选择接口生成功能业务测试用例，一个功能业务测试用例由多个接口组合而成，若一个用例中的多个接口间有依赖关系，则把上一个接口的返回数据保存为一个变量，下一个接口在执行时直接读取变量值；对于需要预期结果的参数设置预期结果进行效验；对完善后的用例进行调试，调试成功后建立测试任务生成功能业务自动化测试脚本。5.根据权利要求2所述的基于接口自动化测试与功能、性能、安全测试融合的方法，其特征在于，所述性能测试包括：在单接口用例和功能业务测试用例里选择需要进行性能测试的接口和业务用例；对测试用例进行增删改查操作，根据性能的测试需求进行相关参数的参数化，在性能执行过程中使用参数化里的数据；设置预期结果返回数据的效验，形成性能测试用例；对性能测试用例进行调试，调试成功后根据所需使用的压力工具选择生成适用于Jmeter的性能测试脚本，或者适用于loadrunner的性能测试脚本,或者locust的性能测试脚本，然后配置性能测试的参数，包括线程数、执行时间、并发时间间隔；执行自动生成场景测试脚本操作，调试场景脚本，调试成功后建立性能测试任务，执行测试任务，后台进行服务器性能的监控，返回测试结果数据和性能监控数据生成测试报告。6.根据权利要求2所述的基于接口自动化测试与功能、性能、安全测试融合的方法，其特征在于，所述安全测试包括：选择需进行SQL注入和越权的安全测试接口用例和功能业务用例；对用例进行增删改查，对参数进行参数化的设置，设置预期结果便于返回数据的效验，形成安全测试用例；调试安全测试用例，建立安全测试任务，执行测试任务。7.根据权利要求1-6任意一项所述的基于接口自动化测试与功能、性能、安全测试融合的方法，其特征在于，还包括邮件配置，当每一个接口分别完成单接口测试、功能业务测试、性能测试、安全测试后均触发邮件配置，将测试报告通过邮件发送给指定人员。
说明书desc
技术领域本发明涉及软件性能测试技术领域，尤其涉及一种基于接口自动化测试与功能、性能、安全测试融合的方法。背景技术当今时代，随着软件整个产业的发展，软件产品的质量控制与质量管理成为了一个软件最重要的一部分，但同时软件的迭代越来越快且需求不断的变化，留给测试的时间越来越少，以前测试流程是研发后进行单元测试，单元测试完后进行集成测试，然后进行系统功能测试，功能测试保证基本业务流程没有问题了开始性能测试和安全测试，系统功能测试，性能测试和安全测试都是在研发完成后开始，导致测试任务重，发现问题晚，修改问题的成本高，且在测试过程中性能、安全和功能在接口测试上有重复性的工作。发明内容本发明提供了一种基于接口自动化测试与功能、性能、安全测试融合的方法，以解决针对目前测试困境：需求变更频繁，测试时间少测试不充足，发现问题晚解决成本高的问题。本发明采用的技术方案是：提供基于接口自动化测试与功能、性能、安全测试融合的方法，包括：从第一个接口开始，在每研发完成一个接口编写后就开始进行测试任务；通过自动化生成接口脚本用例和数据对每一个接口分别进行单接口测试、功能业务测试、性能测试、安全测试；在单接口测试用例页面、功能业务测试用例页面、性能测试用例页面、安全测试用例页面上创建测试任务，对任务进行定时执行设置和/或触发测试任务时执行该任务；触发的任务包括读取到新的接口时便开始测试任务；根据测试结果自动生成测试报告。优选地，进行测试时读取接口的方法包括：提取每一个接口的名称、header、method、参数、参数类型和长度信息，各个接口展示在前端接口集里，后台生成接口方法；通过读取各个接口参数类型和长度，自动生成各接口参数的测试数据、正常数据、异常数据和null，并展示在前端数据集里，数据集里还包含项目的环境地址信息。优选地，所述单接口测试包括：选择需要测试的接口自动生成测试用例；在执行过程中读取数据集中各接口参数的数据进行接口自动化测试，把每次调用的request和response的组合保存到数据库，当下次发送相同request时，自动和上次的response做差异检测，对于有变化的字段给出告警；通过规则配置设立白名单列表把动态值的字段排除在外，所述白名单列表包括token值、session ID、时间戳，从而避免动态值每次调用都会有告警。优选地，所述功能业务测试包括：根据测试业务选择接口生成功能业务测试用例，一个功能业务测试用例由多个接口组合而成，若一个用例中的多个接口间有依赖关系，则把上一个接口的返回数据保存为一个变量，下一个接口在执行时直接读取变量值；对于需要预期结果的参数设置预期结果进行效验；对完善后的用例进行调试，调试成功后建立测试任务生成功能业务自动化测试脚本。优选地，所述性能测试包括：在单接口用例和功能业务测试用例里选择需要进行性能测试的接口和业务用例；对测试用例进行增删改查操作，根据性能的测试需求进行相关参数的参数化，在性能执行过程中使用参数化里的数据；设置预期结果返回数据的效验，形成性能测试用例；对性能测试用例进行调试，调试成功后根据所需使用的压力工具选择生成适用于Jmeter的性能测试脚本，或者适用于loadrunner的性能测试脚本,或者locust的性能测试脚本，然后配置性能测试的参数，包括线程数、执行时间、并发时间间隔；执行自动生成场景测试脚本操作，调试场景脚本，调试成功后建立性能测试任务，执行测试任务，后台进行服务器性能的监控，返回测试结果数据和性能监控数据生成测试报告。优选地，所述安全测试包括：选择需进行SQL注入和越权的安全测试接口用例和功能业务用例；对用例进行增删改查，对参数进行参数化的设置，设置预期结果便于返回数据的效验，形成安全测试用例；调试安全测试用例，建立安全测试任务，执行测试任务。优选地，还包括邮件配置，当每一个接口分别完成单接口测试、功能业务测试、性能测试、安全测试后均触发邮件配置，将测试报告通过邮件发送给指定人员。本发明的有益效果是：、本发明通过使用基于接口自动化测试与功能、性能和安全测试无缝融合的方法，将测试往前移动，尽早开展自动化，在研发完成第一个接口编写时就开始进行测试，通过自动化生成接口脚本用例和数据进行测试，且同时生成接口性能脚本和接口安全脚本，利用空闲时间进行自动测试，减少性能测试和安全测试在接口上的重复工作，可以提高测试效率和测试的完整性，充分性，提高测试用例的重复使用性。、本发明不同于现有技术中将性能测试和安全测试放在研发完成后开始，本申请在每研发完成一个接口后就开始性能测试和安全测，并且自动将性能测试和安全测放置在空闲时间，从而极大的减轻了测试任务。附图说明图1为本发明公开的基于接口自动化测试与功能、性能、安全测试融合的方法的流程示意图。具体实施方式为了使本发明的目的、技术方案和优点更加清楚，下面将结合附图对本发明作进一步详细描述，但本发明的实施方式不限于此。实施例1：参见图1，本实施例公开一种基于接口自动化测试与功能、性能、安全测试融合的方法，包括如下步骤：S1：从第一个接口开始，在每研发完成一个接口编写后就开始进行测试任务。通过在web页面上上传接口文档如word档或其它工具导出的接口json文件,或者输入在线的swagger地址，后台服务提取每一个接口的名称，header,method,参数，参数类型和长度等信息，各个接口展示在前端接口集里，在接口管理页面也可以对接口进行增删改查操作，便于后面接口变化时能及时同步完善，后台生成接口方法。通过读取各个接口参数类型和长度，自动生成各接口参数的测试数据，正常数据，异常数据，和null等，如登录接口的username和password两个参数，username类型为字符型，长度为6-10位；password类型为字符型，长度为8-10位。后台服务读取到类型和长度后为参数自动生成字符型，长度为6位的字符和长度为10位的字符，以及长度为5位的字符和长度为11位的字符以及NULL的值；数据管理页面包含有环境地址，环境地址可通过生成数据时生成的，也可手工填写。同时数据管理页面上也可以进行增删改查操作，测试人员可以手工完善测试数据，保证数据的有效性。单独存储环境数据便于服务地址迁移或者变化时测试人员可以快速的修改，提高效率。在接口自动化测试用例页面，选择需要测试的接口，每个接口根据各个参数取值形成多个测试用例。如登录接口，username在数据管理页面的值为，password在数据管理页面的值为,在登录接口下就生成了9个关于登录的测试用例，如下：登录用例1：{"username":"zhangsan","password":"abcd123456"}登录用例2：{"username":"zhangsan","password":""}登录用例3：{"username":"zhangsan","password":"abcd12345678"}登录用例4：{"username":"","password":"abcd123456"}登录用例5：{"username":"","password":""}登录用例6：{"username":"","password":"abcd12345678"}登录用例7：{"username":"zhangsan123","password":"abcd123456"}登录用例8：{"username":"zhangsan123","password":""}登录用例9：{"username":"zhangsan123","password":"abcd12345678"}如果存在接口间有依赖关系的，需根据依赖关系设置好各个接口的执行顺序，设置变量保存关联字段值以供下一个接口使用。例如编辑接口依赖新建接口所给的id,在执行新建接口的测试用例时设置保存返回数据id值到变量T中，执行编辑接口的测试用例时id的入参值就使用变量T的值。选择接口测试用例，创建接口测试任务，在创建时可选择立即执行和定时执行，选择立即执行，后台生成接口自动化测试脚本并执行测试，同时接口自动化测试任务进入任务管理列表，若选择定时执行，设置执行时间后，后台生成接口自动化测试脚本，同时接口自动化测试任务进入任务管理列表，到设置的时间后，自动运行。创建任务时测试人员可自行给任务命名。任务管理里可对任务进行取消、立即执行和定时执行的操作；在任务执行完成生成报告后。S2：通过自动化生成接口脚本用例和数据对每一个接口分别进行单接口测试、功能业务测试、性能测试、安全测试。单接口测试主要验证接口的输入和输出，保证接口的完整性和健壮性，单接口测试用例和自动化测试的逻辑如下：选择需要测试的接口自动生成测试用例，可对测试用例进行增删改查操作，建立测试任务，在执行过程中读取数据集中各接口参数的数据进行接口自动化测试，把每次调用的request和response的组合保存到数据库，当下次发送相同request时，自动和上次的response做差异检测，对于有变化的字段给出告警。因为有些字段的值每次API调用都是不同的，比如token值、session ID、时间戳等，这样每次的调用就都会有告警，通过规则配置设立一个“白名单列表”，把那些动态值的字段排除在外。验证接口入参和返回结果数据，自动生成测试报告，并发邮件给项目组相关人员。所谓单接口就是指单个的接口，比如登录接口、下单接口、提交订单接口分别属于单接口，这三个单接口之间具有逻辑关系，可组成了一项功能业务。功能业务测试主要验证主业务流程的正确，保证业务流程是连贯通畅的，功能业务测试用例和自动化测试逻辑如下：根据测试业务选择接口生成功能业务测试用例，一个功能业务测试用例可能由多个接口组合而成，若一个用例中的多个接口间有依赖关系，如上一个接口的返回数据是下一个接口的入参，可通过把上一个接口的返回数据保存为一个变量，下一个接口在执行时直接读取变量值；比如测试新建-编辑的流程，那么这个流程的测试用例里就包含登录接口、新建接口、编辑接口的用例，要测试新建-编辑这个流程那么在选择接口测试用例时就要选择登录成功的用例，和新建成功的用例，且编辑依赖于新建成功的id号才能进行修改，所以新建成功后的返回id的值保存为一个变量T，在执行编辑用例时，所需的id就从变量T里去读取，即可保证业务流程的连续性。可进行参数化的设置，使用变量配置参数的值；可选择设置预期结果，用于效验用例是否通过测试，若不设置预期结果，对返回数据不进行效验，默认测试通过；功能业务测试用例编辑好后，可调试，然后选择需测试的用例，创建功能业务测试任务，在创建时可选择立即执行和定时执行，选择立即执行，后台生成功能业务测试脚本并执行测试，同时功能业务测试任务进入任务管理列表，若选择定时执行，设置执行时间后，后台生成功能业务测试脚本，同时功能业务测试任务进入任务管理列表，到设置的时间后，自动运行。创建任务时测试人员可自行给任务命名。任务管理里可对任务进行取消、立即执行和定时执行的操作；在任务执行完成生成测试报告后，触发发送测试报告邮件。性能测试是在接口的基础上，为减少性能测试人员在接口调试时间上的投入时间，可直接使用测试通过的单接口测试用例和功能业务测试用例提高工作效率，减少重复性的工作，性能测试用例和自动化测试逻辑如下：在单接口用例和功能业务测试用例里选择需要进行性能测试的接口和业务用例，可对测试用例进行增删改查的操作，根据性能的测试需求进行相关参数的参数化，在性能执行过程中使用参数化里的数据，可设置预期结果便于返回数据的效验，形成性能测试用例，可调试用例，调试成功后可根据所需使用的压力工具选择生成适用于Jmeter的性能测试脚本，或者适用于loadrunner的性能测试脚本,或者locust的性能测试脚本，然后配置性能测试的参数，如线程数，执行时间，并发时间间隔等，执行自动生成场景测试脚本操作，可调试场景脚本，调试成功后建立性能测试任务，执行测试任务，后台进行服务器性能的监控，返回测试结果数据和性能监控数据生成测试报告，并发邮件给项目相关人员。在安全测试时，安全测试人员也需要使用到接口，通过接口进行相应的安全测试工作，存在接口方面的重复性工作，可直接使用通过的单接口测试用例和功能业务测试用例提高工作效率，提高接口测试用例和功能业务测试用例的复用性，安全测试用例和自动化测试逻辑如下：选择需进行SQL注入和越权等安全测试的接口用例和功能业务用例，可对用例进行增删改查，可对参数进行参数化的设置，可设置预期结果便于返回数据的效验，形成安全测试用例，可调试安全测试用例，建立安全测试任务，执行测试任务，生成测试报告并发邮件给项目相关人员。使用变量保存SQL注入时输入的值，比如登录接口，正常的请求数据为：{"username":"zhangsan","password":"abcd123456"}，但SQL注入时请求username入参的值可设置为：zhangsan\"or\"1\"＝\"1请求数据变为：{"username":zhangsan\"or\"1\"＝\"1or"1"＝"1,"password":"abc d123456"}开始执行测试任务前，在邮件管理页面，配置项目组相关人员的邮件地址，在接口自动化测试任务完成后，触发发送测试报告给项目相关人员，若没有填写人员邮件地址则不发送报告，可在任务管理里点击报告查看测试报告详情。S3：在单接口测试用例页面、功能业务测试用例页面、性能测试用例页面、安全测试用例页面上创建测试任务，对任务进行定时执行设置和/或触发测试任务时执行该任务；触发的任务包括读取到新的接口时便开始测试任务。可查看任务执行的进度等。S4：根据测试结果自动生成测试报告。以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
