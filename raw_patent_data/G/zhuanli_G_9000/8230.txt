标题title
一种基于负载特性的电气设备异常诊断方法及装置
摘要abst
该发明涉及一种基于负载特性的电气设备异常诊断方法及装置，该方法包括步骤，S1，根据U‑X特性曲线进行数据感测，生成设备标定表以及样本统计表，并各自初始化；S2，若电气设备为平稳运行状态，执行下一步骤；S3，记录所述样本数据并更新样本统计表；S4，判断所述记录的各样本数据中的U和X值，是否满足设备标定表中的限定条件，若满足，则特性异常计数器的计数M减1；若不满足，所述计数M加1，检查计数M值若超过了设定允许值Mmax，则发出特性异常标志。本发明的电气设备异常诊断方法及装置具有可以实时在线检测、及时识别异常并且识别准确的优点。
权利要求书clms
1.一种基于负载特性的电气设备异常诊断方法，其特征在于，包括步骤，S1，根据U-X特性曲线进行数据感测，生成记录标定数据的设备标定表以及记录样本数据的样本统计表，并各自初始化；所述U为电压，X为电流I或功率P；S2，识别所述电气设备的运行状态，若为平稳运行状态，则执行下一步骤；S3，记录所述样本数据并更新所述样本统计表；S4，判断所述记录的各样本数据中的U和X值，是否满足设备标定表中的限定条件，若满足，则特性异常计数器的计数M减1；若不满足，所述计数M加1，检查计数M值，若超过了设定允许值Mmax，则发出特性异常标志后返回步骤S2。2.根据权利要求1所述基于负载特性的电气设备异常诊断方法，其特征在于，所述的步骤S2及S3具体为，S2，识别所述电气设备在判断周期内的运行状态，若该电气设备处于平稳运行状态，则执行下一步骤；S3，记录各所述判断周期内的所述样本数据并更新所述样本统计表。3.根据权利要求1或2所述基于负载特性的电气设备异常诊断方法，其特征在于，所述步骤S2具体为，判断所述电气设备在当前判断周期内的运行状态，若同时满足，条件a，相邻两个判断周期的U值差值小于设定差值；条件b，相邻两个判断周期的X值的变化不超过设定幅度；则认定该电气设备处于平稳运行状态，执行下一步骤。4.根据权利要求1所述基于负载特性的电气设备异常诊断方法，其特征在于，所述的步骤S3具体为，记录检测所得的U值，计算所述样本数据，并更新所述样本统计表。5.根据权利要求1所述基于负载特性的电气设备异常诊断方法，其特征在于，所述的步骤S4具体为，根据所述样本数据中的U值，匹配对应的所述标定数据，判断该样本数据中的X值是否满足设备标定表中的限定条件，若满足，则特性异常计数器的计数M减1，当所述计数M为0时，清除特性异常标志；若不满足，所述计数M加1，检查计数M值，若超过了设定允许值Mmax，则发出特性异常标志后返回步骤S2，若未超过了设定允许值Mmax，返回步骤S2。6.根据权利要求1或4所述基于负载特性的电气设备异常诊断方法，其特征在于，所述的步骤S2及步骤S3之间还包括步骤S2-1，判断所述U值是否异常，若否，执行下一步骤；若是，返回步骤S2。7.根据权利要求6所述基于负载特性的电气设备异常诊断方法，其特征在于，所述的步骤S2-1包括，S2-1-1，判断U值是否超出所述电气设备许可的工作电压范围，若未超出，则将供电电压异常计数器的计数Q减1，然后执行步骤S3；如果电压超出范围，则所述计数Q加1，并执行步骤S2-1-2,S2-1-2，判断所述计数Q是否超出了最大设定值Qmax，如不超出则返回步骤S2；如超出则发出电压异常标志，并返回步骤S2。8.根据权利要求7所述基于负载特性的电气设备异常诊断方法，其特征在于，所述的计数Q为0时清除所述电压异常标志。9.根据权利要求1所述基于负载特性的电气设备异常诊断方法，其特征在于，所述的步骤S2及步骤S3之间还包括步骤S2-2，检测是否收到标定通知，如未收到或虽收到但已经完成了初始标定，则进入步骤S3，否则，初始化设备标定表，并进入初始标定流程，返回步骤S2。10.根据权利要求9所述基于负载特性的电气设备异常诊断方法，其特征在于，所述的初始标定流程具体为：统计所述样本数据，将至少一组满足初始标定合格的样本数据填入所述设备标定表中，返回步骤S2。11.S3-1根据权利要求1所述基于负载特性的电气设备异常诊断方法，其特征在于，所述的标定数据包括有U值，设定的U值范围对应的X的平均值X0j、上限值X0Hj、下限值X0Lj，以及表示该标定数据是否有效的标志；所述的样本数据包括有U值，设定的U值范围对应的X的平均值Xj、G％概率大值XLj、％概率大值XHj，以及该范围内统计的样本数量Nj，所述G取值在0～50之间。12.根据权利要求11所述基于负载特性的电气设备异常诊断方法，其特征在于，所述的步骤S3及步骤S4之间还包括步骤S3-1，根据最新的一个样本数据中的U值，匹配对应的标定数据，检查该标定数据是否有效，若有效则执行步骤S4，若无效则返回步骤S2。13.根据权利要求11所述基于负载特性的电气设备异常诊断方法，其特征在于，在所述的步骤S4中，若所述U和X值满足设备标定表中的限定条件之后还包括步骤SA0，判断所述样本数Nj是否超过设定的统计样本数Nmax，若超过，执行步骤SA，若不超过，返回步骤S2；SA，选择大于所述Nmax的Nj对应的样本数据，使用该样本数据更新对应的标定数据。14.根据权利要求13所述基于负载特性的电气设备异常诊断方法，其特征在于，所述的步骤SA具体为，选择大于所述Nmax的Nj对应的样本数据，检查该样本数据中U值对应的标定数据是否有效，若无效，则使用该样本数据更新该标定数据，若有效，则使用×x0j+s×Xj、×X0Lj+s×XLj、×X0Hj+s×XHj分别更新原所述的X0j、X0Lj、X0Hj；所述的s取值范围为0～1。15.一种基于负载特性的电气设备异常诊断装置，其特征在于，包括CPU、以及分别与CPU连接的模拟量传感器以及存储器；所述的CPU用于生成记录标定数据的设备标定表以及记录样本数据的样本统计表并存储于所述存储器中，该CPU识别所述电气设备的运行状态；所述U为电压，X为电流I或功率P；所述的模拟量传感器根据U-X特性曲线感测样本数据，记录所述样本数据并更新所述样本统计表至存储器；所述U为电压，X为电流I或功率P；所述的CPU检查所述样本统计表，判断所述记录的各样本数据中的U和X值，是否满足设备标定表中的限定条件，若满足，则特性异常计数器的计数M减1；若不满足，所述计数M加1，判断计数M值，若超过了设定允许值Mmax，则发出特性异常标志。16.根据权利要求15所述基于负载特性的电气设备异常诊断装置，其特征在于，所述的CPU还用于选择大于所述Nmax的Nj对应的样本数据，使用该样本数据更新所述存储器内对应的标定数据。17.根据权利要求15所述基于负载特性的电气设备异常诊断装置，其特征在于，所述的装置还包括用于将信号转化为数值的模拟量前置调理及AD转换装置、交互诊断装置、以及通讯接口；所述的交互诊断装置包括键盘、液晶，指示灯，开关量输入和开关量输出接口。
说明书desc
技术领域本发明涉及一种电气设备异常工况识别技术，具体涉及一种基于负载特性的电气设备异常诊断方法及装置。背景技术现有技术的电气设备的异常诊断都在设备发生异常后，再通过外接的诊断设备进行异常的排查，不能在异常发生的即时进行异常情况的通知。在供电系统中，有很多电气设备都具有确定的U-I特性曲线或确定U-P特性曲线，也有的设备同时具备确定的U-I和U-P特性曲线。这些设备在其允许的供电电压范围内，流过该设备电流值或该设备消耗的功率值虽然随电压的波动而波动，但正常时任一时刻根据施加在该设备上的电压值，就可以准确地推断出该时刻设备应流过的电流值或应消耗的功率值。如果发现某个该类设备流过的电流值或消耗的功率值与当前电压下推算出的理论值发生偏差，我们就有理论认为该设备的运行工况发生了异常，可建议对设备进行进一步的诊断或处理。这种具有确定U-I或U-P特性的电气设备，包括定频空调、定频冰箱、加热空间封闭的加热设备、不具备自动调光功能的众多照明灯具等。导致该类设备U-I或U-P特性曲线发生变化的原因包括：设备或回路漏电、绕组匝间短路、旋转设备轴瓦或润滑系统异常、旋转设备有异物进入、集中供电的照明系统中出现部分灯具故障、集中供电的加热系统中部分加热器故障等等、电气设备的就地辅助控制回路异常。因此亟需一种能够针对电气设备实时在线检测、及时识别异常的电气设备异常诊断方法或装置。发明内容该发明的目的是克服了上述现有技术中的缺点，提供能够针对电气设备实时在线检测、及时识别异常并且识别准确的基于负载特性的电气设备异常诊断方法及装置为了实现上述的目的，该发明包括一种基于负载特性的电气设备异常诊断方法，包括步骤，S1，根据U-X特性曲线进行数据感测，生成记录标定数据的设备标定表以及记录样本数据的样本统计表，并各自初始化；所述U为电压，X为电流I或功率P；S2，识别所述电气设备的运行状态，若为平稳运行状态，则执行下一步骤；S3，记录所述样本数据并更新所述样本统计表；S4，判断所述记录的各样本数据中的U和X值，是否满足设备标定表中的限定条件，若满足，则特性异常计数器的计数M减1；若不满足，所述计数M加1，检查计数M值，若超过了设定允许值Mmax，则发出特性异常标志后返回步骤S2。在该基于负载特性的电气设备异常诊断方法中，所述的步骤S2及S3具体为，S2，识别所述电气设备在判断周期内的运行状态，若该电气设备处于平稳运行状态，则执行下一步骤；S3，记录各所述判断周期内的所述样本数据并更新所述样本统计表。在该基于负载特性的电气设备异常诊断方法中，所述步骤S2具体为，判断所述电气设备在当前判断周期内的运行状态，若同时满足，条件a，相邻两个判断周期的U值差值小于设定差值；条件b，相邻两个判断周期的X值的变化不超过设定幅度；则认定该电气设备处于平稳运行状态，执行下一步骤。在该基于负载特性的电气设备异常诊断方法中，所述的步骤S3具体为，记录检测所得的U值，计算所述样本数据，并更新所述样本统计表。在该基于负载特性的电气设备异常诊断方法中，所述的步骤S4具体为，根据所述样本数据中的U值，匹配对应的所述标定数据，判断该样本数据中的X值是否满足设备标定表中的限定条件，若满足，则特性异常计数器的计数M减1，当所述计数M为0时，清除特性异常标志；若不满足，所述计数M加1，检查计数M值，若超过了设定允许值Mmax，则发出特性异常标志后返回步骤S2。在该基于负载特性的电气设备异常诊断方法中，所述的步骤S2及步骤S3之间还包括步骤S2-1，判断所述U值是否异常，若否，执行下一步骤；若是，返回步骤S2。在该基于负载特性的电气设备异常诊断方法中，所述的步骤S2-1包括，S2-1-1，判断U值是否超出所述电气设备许可的工作电压范围，若未超出，则将供电电压异常计数器的计数Q减1，然后执行步骤S3；如果电压超出范围，则所述计数Q加1，并执行步骤S2-1-2,S2-1-2，判断所述计数Q是否超出了最大设定值Qmax，如不超出则返回步骤S2；如超出则发出电压异常标志，并返回步骤S2。在该基于负载特性的电气设备异常诊断方法中，所述的计数Q为0时清除所述电压异常标志。在该基于负载特性的电气设备异常诊断方法中，所述的步骤S2及步骤S3之间还包括步骤S2-2，检测是否收到标定通知，如未收到或虽收到但已经完成了初始标定，则进入步骤S3，否则，初始化设备标定表，并进入初始标定流程，返回步骤S2。在该基于负载特性的电气设备异常诊断方法中，所述的初始标定流程具体为：统计所述样本数据，将至少一组满足初始标定合格的样本数据填入所述设备标定表中，返回步骤S2。S3-1，在该基于负载特性的电气设备异常诊断方法中，所述的标定数据包括有U值，设定的U值范围对应的X的平均值X0j、上限值X0Hj、下限值X0Lj，以及表示该标定数据是否有效的标志；所述的样本数据包括有U值，设定的U值范围对应的X的平均值Xj、G％概率大值XLj、％概率大值XHj，以及该范围内统计的样本数量Nj，所述G取值在0～50之间。在该基于负载特性的电气设备异常诊断方法中，所述的步骤S3及步骤S4之间还包括步骤S3-1，根据最新的一个样本数据中的U值，匹配对应的标定数据，检查该标定数据是否有效，若有效则执行步骤S4，若无效则返回步骤S2。在该基于负载特性的电气设备异常诊断方法中，所述的步骤S4中，若所述U和X值满足设备标定表中的限定条件之后还包括步骤SA0，判断所述样本数Nj是否超过设定的统计样本数Nmax，若超过，执行步骤SA，若不超过，返回步骤S2；SA，选择大于所述Nmax的Nj对应的样本数据，使用该样本数据更新对应的标定数据。在该基于负载特性的电气设备异常诊断方法中，所述的步骤SA具体为，SA，选择大于所述Nmax的Nj对应的样本数据，检查该样本数据中U值对应的标定数据是否有效，若无效，则使用该样本数据更新该标定数据，若有效，则使用×X0j+s×Xj、×X0Lj+s×XLj、×X0Hj+s×XHj分别更新原所述的X0j、X0Lj、X0Hj；所述的s取值范围为0～1。本申请还包括一种基于负载特性的电气设备异常诊断装置，包括CPU、以及分别与CPU连接的模拟量传感器以及存储器；所述的CPU用于生成记录标定数据的设备标定表以及记录样本数据的样本统计表并存储于所述存储器中，该CPU识别所述电气设备的运行状态；所述U为电压，X为电流I或功率P；所述的模拟量传感器根据U-X特性曲线感测样本数据，记录所述样本数据并更新所述样本统计表至存储器；所述U为电压，X为电流I或功率P；所述的CPU检查所述样本统计表，判断所述记录的各样本数据中的U和X值，是否满足设备标定表中的限定条件，若满足，则特性异常计数器的计数M减1；若不满足，所述计数M加1，检查计数M值，若超过了设定允许值Mmax，则发出特性异常标志后继续感测样本数据。在该基于负载特性的电气设备异常诊断装置中，所述的CPU还用于选择大于所述Nmax的Nj对应的样本数据，使用该样本数据更新所述存储器内对应的标定数据。在该基于负载特性的电气设备异常诊断装置中，所述的装置还包括用于将信号转化为数值的模拟量前置调理及AD转换装置、交互诊断装置、以及通讯接口；所述的交互诊断装置包括键盘、液晶，指示灯，开关量输入和开关量输出接口。采用了本发明的一种基于负载特性的电气设备异常诊断方法及装置，该方法包括步骤，S1，根据U-X特性曲线进行数据感测，生成记录标定数据的设备标定表以及记录样本数据的样本统计表，并各自初始化；所述U为电压，X为电流I或功率P；S2，识别所述电气设备的运行状态，若为平稳运行状态，则执行下一步骤；S3，记录所述样本数据并更新所述样本统计表；S4，判断所述记录的各样本数据中的U和X值，是否满足设备标定表中的限定条件，若满足，则特性异常计数器的计数M减1；若不满足，所述计数M加1，检查计数M值，若超过了设定允许值Mmax，则发出特性异常标志后返回步骤S2。本发明的电气设备异常诊断方法及装置具有可以实时在线检测、及时识别异常并且识别准确的优点。附图说明图1为本申请的电气设备异常诊断方法的优选的步骤图；图2为用于电气设备异常诊断装置优选的结构示意图；图3为优选实施例的可分解为三个单相独立运行的三相供电的电气设备组的结构示意图。具体实施方式下面将结合附图对本公开实施例中的技术方案进行清楚、完整地描述，显而易见地，所描述的实施例仅仅是本发明的部分实施例，而不是全部的实施例。基于本公开实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，也属于本发明保护的范围。如本申请和权利要求书中所示，除非上下文明确提示例外情形，“一”、“一个”、“一种”和/或“该”等词并非特指单数，也可包括复数。一般说来，术语“包括”与“包含”仅提示包括已明确标识的步骤和元素，而这些步骤和元素不构成一个排它性的罗列，方法或者设备也可能包含其他的步骤或元素。对于相关领域普通技术人员已知的技术、方法和设备暂不做详细描述，但在适当情况下，所述技术、方法和设备应当被视为授权说明书的一部分。在这里示出的和讨论的所有示例中，任何具体值应被解释为仅仅是实例性的，而不是作为限制。因此，步骤性实施例的其他示例可以具有不同的先后顺序。本发明提供了一种单相电气设备或设备组以及虽采用三相供电但可分解为三个单相独立运行的电气设备或设备组的异常工况识别技术，具体涉及对上述固定安装的电气设备或设备组的异常工况感知方法及其装置。通过对具有特定U-I特性或U-P特性的单相电气设备组或可分解为三个单相独立运行的三相电气设备组的电压电流实时在线监测，及时识别出U-I特性或U-P特性发生异常的电气设备，实现对该类电气设备发生非显见异常时的早期预警和显见异常的实时告警。如图1所示，本发明包括一种基于负载特性的电气设备异常诊断方法，包括步骤，S1，根据U-X特性曲线进行数据感测，生成记录标定数据的设备标定表以及记录样本数据的样本统计表，并各自初始化；所述U为电压，X为电流I或功率P；S2，识别所述电气设备的运行状态，若为平稳运行状态，则执行下一步骤；S3，记录所述样本数据并更新所述样本统计表；S4，判断所述记录的各样本数据中的U和X值，是否满足设备标定表中的限定条件，若满足，则特性异常计数器的计数M减1；若不满足，所述计数M加1，检查计数M值，若超过了设定允许值Mmax，则发出特性异常标志后返回步骤S2。具体地说，步骤S1可以根据电气设备的负载特性，针对性地选择U-I特性或U-P特性曲线之一进行电气设备后续的异常工况感测。根据电气设备允许正常工作的电压最小值Umin和最大值Umax，以ΔU为间隔，生成一张设备标定表，该设备标定表中的标定数据记录为{Uj，X0j，X0Lj，X0Hj，Fj}，以及一张样本统计表，该样本统计表中的样本数据记录为{Uj，Xj，XLj，XHj，Nj}，并各自初始化。其中，Umin≤Uj≤Umax，且Uj＝Umin+ΔU×j。ΔU为预设定的电压级差，所述j为整数且j≥0，所述的Uj为所感测得的电压值U。且有：设备标定表{Uj，X0j，X0Lj，X0Hj，Fj}中，X0j为电气设备电压U工作在内时，对应的X值的样本平均值。X0Lj、X0Hj分别为设备正常时X值的样本许可下限值和许可上限，且有X0Lj＜X0j＜X0Hj。Fj为对应的该Uj对应的标定数据是否有效标志。样本统计表{Uj，Xj，XLj，XHj，Nj}中，Nj为电气设备电压U工作在内已统计的样本数，Xj为样本数Nj下对应的设备X值的样本平均值。XLj、XHj分别为样本数Nj下对应的全部样本G％概率大值和％概率大值。其中G设定值，取值在0～50之间，故XLj＜XHj。所述步骤S2具体为，实时计算出电气设备在一个判断周期内每相电压U和电流I值和功率P值，根据当前和历史判断周期中电压电流值、开关量输入状态等综合信息，调用电气设备工作状态识别算法，判断出该电气设备当前处于停机、开机、波动运行和平稳运行几种状态之一。电气设备进入平稳运行的判据为该设备已经开机且经过了预设的设备启动耗时，当前电压值与前一个判断周期内电压值偏差不超过设定的波动阈值UT，且其在设备启动或电网电压波动后，已经出现了本电气设备的X值在前后两个判断周期内变动不超过设定的波动阈值XT的情况。其中一个判断周期指诊断装置获取一个样本所需的耗时。如果电气设备处于平稳运行状态，则进入下面步骤，否则回到步骤S2。所述步骤S3具体为，诊断装置进入电气设备U-I特性或U-P特性收集统计流程，该流程在每个判断周期内检测当前U值，计算得到样本数据，并更新样本统计表中对应的{Uj，Xj，XLj，XHj，Nj}项。所述的步骤S4具体为，判断当前获得的最新样本中的U和X值，是否满足设备标定表{Uj，X0j，X0Lj，X0Hj，Fj}中限定的条件，优选的，根据所述样本数据中的U值，匹配对应的所述标定数据，判断该样本数据中的X值是否满足设备标定表中的限定条件，即X0Lj＜X＜X0Hj，如满足，将特性异常计数器M减1，然后进入下一步骤，当所述计数M为0时，清除特性异常标志。如不满足，则特性异常计数器M加1，判断计数器M值是否超过了设定允许值Mmax，如不超过，则返回步骤S2；如超过，则先发出特性异常标志，优选的返回步骤S2。在优选的实施例中，所述的步骤S2及S3具体为，S2，识别所述电气设备在判断周期内的运行状态，若该电气设备处于平稳运行状态，则执行下一步骤；S3，记录各所述判断周期内的所述样本数据并更新所述样本统计表。所述的判断周期为记录一次样本数据的周期，在该判断周期内实时计算出电气设备每相电压U和电流I值和功率P值，该判断周期内每相电压U电流I值和功率P值可取该周期内的平均值。优选地，一个判断周期可取0.1秒，对应地，所检测并记录的数据为每相电压U电流I值和功率P值在0.1秒内的平均值。所述样本统计表即整合各判断周期内所记录的样本数据。在优选的实施例中，所述步骤S2具体为，判断所述电气设备在当前判断周期内的运行状态，若同时满足，条件a，相邻两个判断周期的U值差值小于设定差值；条件b，相邻两个判断周期的X值的变化不超过设定幅度；则认定该电气设备处于平稳运行状态，执行下一步骤。在其他优选的实施例中，可设定该两个条件的满足顺序，或仅满足一个条件即可。通过同时对比相邻两个判断周期的U值以及X值的变化，以判断该电气设备是否为平稳运行状态，所得到的判断结果更加准确。在优选的实施例中，所述的步骤S2及步骤S3之间还包括步骤S2-1，判断所述U值是否异常，若否，执行下一步骤；若是，返回步骤S2。优选的所述的步骤S2-1包括，S2-1-1，判断U值是否超出所述电气设备许可的工作电压范围，若未超出，则将供电电压异常计数器的计数Q减1，然后执行步骤S3，所述的计数Q为0时清除所述电压异常标志；如果电压超出范围，则所述计数Q加1，并执行步骤S2-1-2,S2-1-2，判断所述计数Q是否超出了最大设定值Qmax，如不超出则返回步骤S2；如超出则发出电压异常标志，并返回步骤S2。具体地说，在检测并记录样本数据之前，优选的可执行上述的步骤S2-1，本申请的电气设备异常诊断方法是基于检测电气设备的U值后计算得到电流或功率的相关数据，并比对该数据，因此，需要保证检测得到的U值的可靠性。所述执行步骤S2-1的目的在于判断检测得的U值是否异常，具体为判断该U值是否超出电气设备许可的工作电压范围，并设定了供电电压异常计数器，在单次判断周期内测得电压异常则计数Q增加1，即该电压异常计算方式可以单次判断周期为基本时间单元，将计数Q转换为电压异常时长。在优选的实施例中，所述的步骤S2及步骤S3之间还包括步骤S2-2，检测是否收到标定通知，如未收到或虽收到但已经完成了初始标定，则进入步骤S3，否则，初始化设备标定表，并进入初始标定流程，返回步骤S2。所述的步骤S2-2具体为，诊断装置检测是否收到了人工触发的电气设备标定通知，如未收到或虽收到但已经完成了初始标定工作，则进入下一步骤。否则，初始化设备标定表{Uj，X0j，X0Lj，X0Hj，Fj}，并进入设备U-I特性或U-P特性初始标定流程，该流程在确认设备正常工作的前提下，对采集样本进行统计，将获得的满足初始标定合格样本数的至少一组{Uj，Xj，XLj，XHj，Nj}值填入设备标定表中，并把对应Fj标志设为有效。其中X0Lj、X0Hj分别取与Uj对应的样本的G％概率大值和％概率大值。返回步骤S2。所述的初始标定合格样本数，可以取所述的Nmax，也可以取小于Nmax的合适值以缩短初始标定耗时。在上述步骤S4中，若各样本数据中的U和X值满足设备标定表中的限定条件，则可执行步骤SA0，判断所述样本数Nj是否超过设定的统计样本数Nmax，若超过，执行步骤SA，若不超过，返回步骤S2；所述的步骤SA为：SA，选择大于所述Nmax的Nj对应的样本数据，检查该样本数据中U值对应的标定数据是否有效，若无效，则使用该样本数据更新该标定数据，若有效，则使用×X0j+s×Xj、×X0Lj+s×XLj、×X0Hj+s×XHj分别更新原所述的X0j、X0Lj、X0Hj；所述的s取值范围为0～1；步骤SA具体地说：查找样本统计表中所有Nj大于Nmax的{Uj，Xj，XLj，XHj，Nj}对应项，检查设备标定表中对应{Uj，X0j，X0Lj，X0Hj，Fj}的Fj标志，如果原Fj无效，则使用{Uj，Xj，XLj，XHj，有效}这一组数据去更新设备标定表对应项。如果原Fj有效，则使用{Uj，，，，有效}这一组数据去更新设备标定表对应项。其中：s为设定值，且s取值范围为0～1。最后将通过上述已更新过标定表的样本统计表中的{Uj，Xj，XLj，XHj，Nj}数据重新初始化。在优选的实施例中，所述的步骤S3及步骤S4之间还包括步骤S3-1，根据最新的一个样本数据中的U值，匹配对应的标定数据，检查该标定数据是否有效，若有效则执行步骤S4，若无效则返回步骤S2。如图2所示，本申请还包括一种基于负载特性的电气设备异常诊断装置，所述的装置就近安装于电气设备附近，该装置包括CPU、以及分别与CPU连接的模拟量传感器以及存储器；所述的CPU用于生成记录标定数据的设备标定表以及记录样本数据的样本统计表并存储于所述存储器中，该CPU识别所述电气设备的运行状态；所述U为电压，X为电流I或功率P；所述的模拟量传感器根据U-X特性曲线感测样本数据，记录所述样本数据并更新所述样本统计表至存储器；所述U为电压，X为电流I或功率P；所述的CPU检查所述样本统计表，判断所述记录的各样本数据中的U和X值，是否满足设备标定表中的限定条件，若满足，则特性异常计数器的计数M减1；若不满足，所述计数M加1，检查计数M值，若超过了设定允许值Mmax，则发出特性异常标志后继续感测样本数据。在该基于负载特性的电气设备异常诊断装置中，所述的CPU还用于选择大于所述Nmax的Nj对应的样本数据，使用该样本数据更新所述存储器内对应的标定数据。在该基于负载特性的电气设备异常诊断装置中，所述的装置还包括用于将信号转化为数值的模拟量前置调理及AD转换装置、交互诊断装置、以及通讯接口；所述的交互诊断装置用于装置的人机与机机交互，该交互诊断装置包括键盘、液晶，指示灯，开关量输入和开关量输出接口。本申请提供了电气设备异常工况诊断方法及其装置，可以通过对具有特定U-I特性或U-P特性的单相电气设备组或可独立分解为三个单相独立运行的三相电气设备组的电压电流实时在线监测，在线自动学习其电气特性。因而可实现在电气设备正常时自动完成其特性曲线的自动标定；在电气设备异常时，自动实现异常报警。以下结合具体实施例对本发明的技术方案作进一步详细描述，本实施例不用于限制本发明，凡是采用本发明的相似结构及其相似变化，包括改变步骤顺序，均应列入本发明的保护范围。本实施例以采用单一三相开关控制的可独立分解为三个单相220V供电的照明灯具组的状态检测为例进行说明，相关电气接线图见附图3。本发明实施例提供的一种电气设备异常工况感知算法及其装置，其特征在于：包括就近安装于电气设备或设备组附近的用于采集和计算其电压U、电流I和功率P的本申请的异常诊断装置，运行在所述装置或其上位机内的电气设备正常运行时的U-I或U-P曲线自动学习算法、电气设备工作状态识别算法、U-I或U-P曲线异常诊断及告警算法。上述的装置，硬件上具备用于交流电流电压输入的模拟量传感器、模拟量前置调理及AD转换子系统，用于运行电气设备异常工况感知算法的CPU及存储子系统，用于诊断装置人机和机机交互的子系统，用于与上位机或云平台信息交互的通讯接口。所述的用于判断电气设备异常工况的诊断方法，本实施例针对照明灯具组，每一相判别的具体方法为：步骤S1，选择U-P特性曲线，即伏瓦特性曲线进行分析。ΔU取0.1V。Umin和Umax由灯具制造商提供。根据电气设备允许正常工作的电压最小值Umin和最大值Umax，以ΔU为间隔，生成一张设备标定表{Uj，X0j，X0Lj，X0Hj，Fj}，一张样本统计表{Uj，Xj，XLj，XHj，Nj}，并各自初始化。其中XLj、XHj分别为样本数Nj下对应的全部样本G％概率大值和％概率大值，本实施例中，G可取5，因而XLj,、XHj分别为样本数Nj下对应的全部样本5％概率大值和95％概率大值。步骤S2，实时计算出电气设备本判断周期内每相电压U和电流I值和功率P值，在本实施例中，一个判断周期取0.1秒，该判断周期内每相电压U电流I值和功率P值可取0.1秒内的平均值。根据当前和历史判断周期中电压电流值、开关量输入状态等综合信息，调用电气设备工作状态识别算法，判断出该电气设备处于平稳运行，进入下一步骤。所述平稳运行的判据为该设备已经开机且经过了预设的设备启动耗时，当前电压值与前一个判别周期内电压值偏差不超过设定的波动阈值1V，且其在设备启动或电网电压波动后，已经出现了本电气设备的P值在前后两个判别周期内变动不超过0.1％的当时值的情况。本实施例中，每个判断周期需要分别计算各判断周期的样本数据，分别表示为，Ua、Ia、Pa、Ub、Ib、Pb、Uc、Ic、Pc值，并用于后续Ua-Pa，Ub-Pb，Uc-Pc的特性标定和异常工况的识别。步骤S2-1，判断该相电压是否超出设备许可的工作电压范围。如未超出范围，则将供电电压异常计数器Q减1，然后直接进入下一步骤；如果电压超出范围，则计数器Q加1。然后判断计数器Q是否超过了设定值Qmax，如超出则置电压异常标志，并返回步骤S2。本实施例中，电压异常计数器设定值Qmax可取100，即电压异常累计达到10秒后报警，即持续100个判断周期。步骤S2-2：诊断装置检测是否收到了人工触发的电气设备标定通知，如未收到或虽收到但已经完成了初始标定工作，则进入下一步骤。本实施例中，用户可以通过诊断装置的按键操作来触发电气设备标定通知。本实施例人工触发的标定流程中，初始标定合格样本数可取300。本实施例中需要对A、B、C三相都完成至少一组初始标定后才可认定为完成了初始标定工作。步骤SA，初始标定合格样本数不足够或者需要增加初始或后续标定数据数量，可以通过下述步骤完成初始标定。查找样本统计表中所有大于Nmax的{Uj，Xj，XLj，XHj，Nj}相关项，检查设备标定表中相应{Uj，X0j，X0Lj，X0Hj，Fj}的Fj标志，如果原Fj无效，则使用{Uj，Xj，XLj，XHj，有效}这一组数据去更新设备标定表对应项。如果原Fj有效，则使用{Uj，，，，有效}这一组数据去更新设备标定表对应项。其中：s可取0.1。最后将通过上述操作那组已更新过标定表的样本统计表中的{Uj，Xj，XLj，XHj，Nj}数据重新初始化。步骤S3，诊断装置进入电气设备U-I特性或U-P特性收集统计流程，该流程在每个判断周期内根据当前U值，去更新样本统计表中对应的{Uj，Xj，XLj，XHj，Nj}项。步骤S4，检查当前样本统计表中，是否有一项{{Uj，Xj，XLj，XHj，Nj}的Nj已经大于设定的所需统计样本数Nmax，如有一个Nj满足,则进入下一步骤；如果所有Nj都不满足则返回步骤S2。本实施例中，所需统计样本数Nmax设定为3600，即至少需耗时6分钟方可能得到一组满足统计样本数的样本。步骤S3-1，根据当前获得的最新一个样本数据中的电压U值，找到与之对应的设备标定表中相应的{Uj，X0j，X0Lj，X0Hj，Fj}，检查对应的Fj是否有效，如有效则进入下一步骤；如果无效则返回步骤S2。步骤S4，判断当前获得的最新样本数据中的U和X值，是否满足设备标定表{Uj，X0j，X0Lj，X0Hj，Fj}中限定的条件，即X0Lj≤X≤X0Hj，如满足，将特性异常计数器M减1，然后进入下一步骤。如不满足，则特性异常计数器M加1，判断计数器M值是否超过了设定允许值Mmax，如不超过，则返回步骤S2。如超过，则先发出特性异常标志然后再返回步骤S2。本实施例中，特性异常计数器允许值Mmax可设定为18000，即在已得到相对完整的设备标定表后，任一灯具损坏后至少判断30分钟后方才发出报警。在本实施例中，根据上述步骤，诊断装置经过人工触发的初始化标定后，自动进入负载特性自学习流程。当负载特性标定表基本完成后，可在电压发生异常后10秒发出电源异常报警，可在单只照明灯具损坏30分钟后发出灯具维修报警。本发明提供了一种电气设备异常诊断方法及其装置，可以通过对具有特定U-I特性或U-P特性的单相电气设备组或可独立分解为三个单相独立运行的三相电气设备组的电压电流实时在线监测，在线自动学习其电气特性曲线。因而可实现在电气设备正常时自动完成其特性曲线的自动标定；在电气设备异常时，自动实现异常报警。上面是对本发明的说明，而不应被认为是对其的限制。尽管描述了本发明的若干示例性实施例，但本领域技术人员将容易地理解，在不背离本发明的技术特征的前提下可以对示例性实施例进行许多修改。因此，所有这些修改都意图包含在权利要求书所限定的本发明范围内。应当理解，上面是对本发明的说明，而不应被认为是限于所公开的特定实施例，并且对所公开的实施例以及其他实施例的修改意图包含在所附权利要求书的范围内。本发明由权利要求书及其等效物限定。
