标题title
一种粒子加速器局部控制网稳定性分析方法、系统和介质
摘要abst
本发明属于粒子加速器技术领域，涉及一种粒子加速器局部控制网稳定性分析方法、系统和介质，包括以下步骤：S1通过激光跟踪仪测点构成局部控制网；S2对局部控制网的函数模型进行泰勒展开，将局部控制网转换成全局控制网；S3对转换后全局控制网的残差进行卡方检验，若卡方检验通过则结束；若卡方检验不通过则进入下一步；S4对局部控制网中各三维控制点的权重进行调整，并返回步骤S2中进行循环，直至获得的全局控制网的残差通过卡方检验。其采用了基于泰勒展开的迭代计算方法来进行空间三维坐标转换，这种方法计算精度极高、迭代次数相对来说也不多，非常适合粒子加速器这种精度要求极高的工程。
权利要求书clms
1.一种粒子加速器局部控制网稳定性分析方法，其特征在于，包括以下步骤：通过激光跟踪仪测点构成局部控制网；对所述局部控制网的函数模型进行泰勒展开，将所述局部控制网转换成全局控制网；对转换后的全局控制网的残差进行卡方检验，若所述卡方检验通过则结束；若卡方检验不通过则进入下一步；对局部控制网中各三维控制点的权重进行调整，并将经过转换的局部控制网转换成全局控制网，直至获得的全局控制网中参数通过卡方检验。2.如权利要求1所述的粒子加速器局部控制网稳定性分析方法，其特征在于，所述局部控制网转换成全局控制网的转换方法为：获得初始的函数模型，并将其进行泰勒展开；求经过泰勒展开后模型的误差方程；将所述误差方程在X处泰勒展开，设X’＝X+x，将X’作为初始值，代入误差方程继续求解；直到MAX小于阈值，此时对应的X’…’为最终输出的待求参数向量，其中，dΔX,dΔY,dΔZ分别是x轴、y轴和z轴的变化量；dα,dβ,dγ分别是x轴、y轴和z轴旋转角度的变化量；dk是尺度的变化量。3.如权利要求2所述的粒子加速器局部控制网稳定性分析方法，其特征在于，所述卡方检验需要的参数包括：单位权方差估值、多余观测量和母体方差。4.如权利要求3所述的粒子加速器局部控制网稳定性分析方法，其特征在于，所述单位权方差估值的计算公式为：其中，V是残差向量，T是转置矩阵，P是各三维控制点的权重矩阵，r是多余观测量。5.如权利要求3所述的粒子加速器局部控制网稳定性分析方法，其特征在于，所述母体方差根据所述激光跟踪仪在局部范围内测量到的三维测点的不确定性及所述局部控制网中所有三维控制点的平均观察点的平均距离获得。6.如权利要求3-5任一项所述的粒子加速器局部控制网稳定性分析方法，其特征在于，转换后全局控制网的残差进行卡方检验，若所述卡方检验通过，则认为局部控制网中不存在形变点；若所述卡方检验不通过，则认为局部控制网中存在变形点，需要对所述变形点进行识别和参数调整。7.如权利要求6所述的粒子加速器局部控制网稳定性分析方法，其特征在于，所述卡方检验的具体方法为：其中，是单位权方差估值；r是多余观测量；是母体方差；是卡方检验参数，α是卡方检验中的显著性，当时，认为所述局部控制网中不存在形变点,当时，认为所述局部控制网中存在形变点。8.如权利要求1所述的粒子加速器局部控制网稳定性分析方法，其特征在于，所述局部控制网中各三维控制点的权重根据IGG权因子进行调整。9.一种粒子加速器局部控制网稳定性分析系统，其特征在于，包括：局部控制网建立模块，用于通过激光跟踪仪测点构成局部控制网；全局控制网建立模块，用于对所述局部控制网的函数模型进行泰勒展开，将所述局部控制网转换成全局控制网；卡方验证模块，用于对所述转换后全局控制网的残差进行卡方检验，若所述卡方检验通过则结束；若卡方检验不通过则进入下一步；权重调节模块，用于对局部控制网中各三维控制点的权重进行调整，并将经过转换的局部控制网转换成全局控制网，直至获得的全局控制网中参数通过卡方检验。10.一种存储一个或多个程序的计算机可读存储介质，其特征在于，所述一个或多个程序包括指令，所述指令当由计算设备执行时，使得所述计算设备执行根据权利要求1至8任一项所述的粒子加速器局部控制网稳定性分析方法。
说明书desc
技术领域本发明涉及一种粒子加速器局部控制网稳定性分析方法、系统和介质，属于粒子加速器技术领域，特别涉及粒子加速器准直中局部控制网稳定性分析领域。背景技术在加速器建设及运行维护中，准直控制网在加速器准直中起到全局控制的作用，通常采用逐级控制的方法进行控制网的布设，然后通过平差将所有的控制点统一在全局坐标系下。这时，即使在局部，激光跟踪仪观测到的控制点也反映了全局特征。然后，在装置的局部开展加速器元件的准直工作，将激光跟踪仪测到的局部控制网和全局控制网进行拟合，将坐标系恢复到全局坐标系下，最后再进行加速器元件的准直。通过上述对于加速器准直安装的描述，可以将局部控制网恢复到安装坐标系的过程视为空间三维坐标系转换的过程。在工程测量里，通常采用布尔沙七参数法进行空间三维坐标系转换。但是，该方法的求解过程不甚严密，计算结果不甚准确，只适用于小旋转角度的空间三维坐标系转换。但是，粒子加速器是一种精度要求极高的大型科学工程，不能使用这种三维坐标系转换方法。粒子加速器因建设周期长、现场条件复杂、干扰因素多，最初布设的控制网点可能会随着时间的推移而发生形变。这时，若将形变点当作稳定点进行局部坐标系到全局坐标系的恢复，则不能保证将局部控制网精确地恢复到安装坐标系下，也就不能保证将加速器元件高精度地准直。目前，对于粒子加速器控制网点稳定性的判断，多依据经验，但这有可能将稳定点误认为是形变点，或将形变点误认为是稳定点，不管是哪种情况，都会对后续准直安装造成影响。发明内容针对上述问题，本发明的目的是提供了一种粒子加速器局部控制网稳定性分析方法、系统和介质，其采用了基于泰勒展开的迭代计算方法来进行空间三维坐标转换，这种方法计算精度极高、迭代次数相对来说也不多，非常适合粒子加速器这种精度要求极高的工程。为实现上述目的，本发明提出了以下技术方案：一种粒子加速器局部控制网稳定性分析方法，通过激光跟踪仪测点构成局部控制网；对局部控制网的函数模型进行泰勒展开，将局部控制网转换成全局控制网；对转换后的全局控制网的残差进行卡方检验，若卡方检验通过则结束；若卡方检验不通过则进入下一步；对局部控制网中各三维控制点的权重进行调整，并将经过转换的局部控制网转换成全局控制网，直至获得的全局控制网中参数通过卡方检验。进一步，局部控制网转换成全局控制网的转换方法为：获得初始的函数模型，并将其进行泰勒展开；求经过泰勒展开后模型的误差方程；将误差方程在X处泰勒展开，设X’＝X+x，将X’作为初始值，代入误差方程继续求解；直到MAX小于阈值，此时对应的X’…’为最终输出的待求参数向量，其中，dΔX,dΔY,dΔZ分别是x轴、y轴和z轴的变化量；dα,dβ,dγ分别是x轴、y轴和z轴旋转角度的变化量；dk是尺度的变化量。进一步，卡方检验需要的参数包括：单位权方差估值、多余观测量和母体方差。进一步，单位权方差估值的计算公式为：其中，V是残差向量，T是转置矩阵，P是各三维控制点的权重矩阵，r是多余观测量。进一步，母体方差根据激光跟踪仪在局部范围内测量到的三维测点的不确定性及局部控制网中所有三维控制点的平均观察点的平均距离获得。进一步，转换后全局控制网的残差进行卡方检验，若卡方检验通过，则认为局部控制网中不存在形变点；若卡方检验不通过，则认为局部控制网中存在变形点，需要对变形点进行识别和参数调整。进一步，卡方检验的具体方法为：其中，是单位权方差估值；r是多余观测量；是母体方差；是卡方检验参数，α是卡方检验中的显著性，当时，认为局部控制网中不存在形变点,当时，认为局部控制网中存在形变点。进一步，局部控制网中各三维控制点的权重根据IGG权因子进行调整。本发明还公开了一种粒子加速器局部控制网稳定性分析系统，包括：局部控制网建立模块，用于通过激光跟踪仪测点构成局部控制网；全局控制网建立模块，用于对局部控制网的函数模型进行泰勒展开，将局部控制网转换成全局控制网；卡方验证模块，用于对转换后全局控制网的残差进行卡方检验，若卡方检验通过则结束；若卡方检验不通过则进入下一步；权重调节模块，用于对局部控制网中各三维控制点的权重进行调整，并将经过转换的局部控制网转换成全局控制网，直至获得的全局控制网中参数通过卡方检验。本发明还公开了一种存储一个或多个程序的计算机可读存储介质，一个或多个程序包括指令，指令当由计算设备执行时，使得计算设备执行根据上述任一项的粒子加速器局部控制网稳定性分析方法。本发明由于采取以上技术方案，其具有以下优点：1、本发明基于泰勒展开的三维坐标系转换参数求解模型可以求得十分准确的三维坐标系转换参数。2、本发明提出将假设检验和选权迭代法加入到粒子加速器局部控制网拟合过程中，能逐站探测粒子加速器控制网中的形变点；能够求得更为准确的三维坐标系转换参数，有助于后续加速器准直器的准直安装。3、和当前常依靠工作人员经验来判断形变点相比，本发明使用了数学工具来判定形变点，也在平差过程中考虑到了各观测点权不同的情形，更具有说服力和科学性。附图说明图1是本发明一实施例中粒子加速器局部控制网稳定性分析方法的流程图；图2是本发明一实施例中局部控制网到全局控制网的转换示意图。具体实施方式为了使本领域技术人员更好的理解本发明的技术方向，通过具体实施例对本发明进行详细的描绘。然而应当理解，具体实施方式的提供仅为了更好地理解本发明，它们不应该理解成对本发明的限制。在本发明的描述中，需要理解的是，所用到的术语仅仅是用于描述的目的，而不能理解为指示或暗示相对重要性。本发明提供了一种粒子加速器局部控制网稳定性分析方法、系统和介质，其将假设检验和选权迭代法加入到局部控制网拟合中，可避免工作人员将稳定点误判为形变点，或将形变点误判为稳定点，对后续粒子加速器元件准直工作产生影响。本发明以各个步骤的执行主体为电子设备为例进行说明，该电子设备具有计算能力，比如：计算机、平板电脑、手机、服务器等，本实施例不对电子设备的类型作限定。为使本公开的目的、技术方案和优点更加清楚明白，以下结合具体实施例，对本公开进一步详细说明。实施例一本实施例公开了一种粒子加速器局部控制网稳定性分析方法，如图1所示，包括以下步骤：S1通过激光跟踪仪测点构成局部控制网。本实施例中激光跟踪仪优选为LeicaAT402激光跟踪仪。局部控制网中的各点以在空间中均匀分布为宜，不可三点共线或四点共面。在局部控制网测量中应规范操作，避免测量错误的出现。S2对局部控制网的函数模型进行泰勒展开，将局部控制网转换成全局控制网。如图2所示，图2为将局部坐标系o-xyz变换至全局坐标系O-XYZ，首先绕x轴逆时针旋转α,得到旋转矩阵R1；再绕新得的y′轴逆时针旋转β，得到旋转矩阵R2；然后绕新得的z″轴逆时针旋转γ，得到旋转矩阵R3。最后，将坐标系整体平移T可得O-XYZ。虽然α,β,γ都是逆时针旋转的角度，但绕y′轴的旋转与绕x轴和z″轴的旋转不同。若将x,y,z认为是由小到大的轴，那么绕x轴和z″轴的旋转都是小轴转向大轴，而绕y′轴的旋转是大轴转向小轴。最终的旋转矩阵为：R＝R3*R2*R1，即：局部控制网转换成全局控制网的转换方法为：S2.1获得初始转换模型，并将其进行泰勒展开。局部控制网到全局控制网的转换模型为：XT＝k*R*XS+T其中，R为旋转矩阵、T为平移向量、k为缩放因子、XT和XS分别是全局坐标系和局部坐标系。泰勒展开后转换模型为：其中，d表示一阶偏导数，0表示参数初值。S2.2求经过泰勒展开后模型的误差方程。使用泰勒展开的方式进行局部控制网到全局控制网的三维坐标系转换；令：x＝T则有误差方程：V＝Bx-lS2.3将误差方程在X处泰勒展开，设X’＝X+x，将X’作为初始值，代入误差方程继续求解。将函数模型在X＝处泰勒展开，有：根据平差准则，为使VTPV＝min，则：x＝-1BTPl。在初次求解中，将权阵定为单位阵，即P＝E。根据泰勒展开，有：X′＝X+x。将X′作为初始值，代入误差方程继续求解，直到MAX小于阈值，其中，本实施例中阈值为10-8。此时对应的X’…’为最终输出的待求参数向量，其中，dΔX,dΔY,dΔZ分别是x轴、y轴和z轴的变化量；dα,dβ,dγ分别是x轴、y轴和z轴旋转角度的变化量；dk是尺度的变化量。S3对转换后全局控制网的残差进行卡方检验，若卡方检验通过则结束；若卡方检验不通过则进入下一步。选权迭代方法若迭代次数过多，有可能会造成将较多控制网点判断为形变点，这同样不符合客观事实。为防止过迭代和迭代不够，对全局控制网中参数进行卡方检验，若卡方检验通过，则认为局部控制网中不存在形变点；若卡方检验不通过，则认为局部控制网中存在变形点，需要对变形点进行识别和参数调整。卡方检验需要的参数包括：单位权方差估值、多余观测量和母体方差。单位权方差估值的计算公式为：其中，V是残差向量，T是转置矩阵，P是各三维控制点的权重矩阵，r是多余观测量。σ0一般根据测量仪器的标称精度确定。AT402激光跟踪仪的测点不确定度为最大允许误差，其值为：15um+6um/m。根据ASME B89.4.19-2006和ISO 10360-10标准，可知Ux,y,z＝2σ0。故AT402的测点中误差为：其中，Si为第i个点的观测距离，单位为米，m为观测点数。卡方检验的具体方法为：构造统计量Z：其中，是单位权方差估值；r是多余观测量；是母体方差；是卡方检验参数，α是卡方检验中的显著性，当时，认为局部控制网中不存在形变点,当时，认为局部控制网中存在形变点。在本实施例中，卡方检验中的显著性α＝0.05。S4对局部控制网中各三维控制点的权重进行调整，并返回步骤S2中进行循环，直至获得的全局控制网的残差通过卡方检验。本步骤根据IGG权因子对局部控制网中各三维控制点的权重进行调整。在步骤S1中，构成局部控制网时，认为所有的观测点具有相同的精度，因此在计算中，所有的观测点都取单位权。但这通常不符合客观事实，因为形变的随机性与不可预测性，控制网点存在不同程度的形变。为了计算出准确的拟合参数和分析控制网点的稳定性，需要根据初次平差结果，对观测点重新进行定权。本公开采用IGG权因子进行定权，具体做法是：残差在1.5倍中误差内的，权定为1；2.5倍中误差外的，权定为0；残差在1.5倍中误差和2.5倍中误差之间的，根据绝对和极小取权因子，此时权的计算公式为：vi为第i个点的残差。本发明中方法在粒子加速器准直安装中，对稳定点保留，对形变点舍弃，得到正确的控制网拟合参数，以保证准直安装的精度。实施例二基于相同的发明构思，本实施例公开了一种粒子加速器局部控制网稳定性分析系统，包括：局部控制网建立模块，用于通过激光跟踪仪测点构成局部控制网；全局控制网建立模块，用于对局部控制网的函数模型进行泰勒展开，将局部控制网转换成全局控制网；卡方验证模块，用于对转换后全局控制网的残差进行卡方检验，若卡方检验通过则结束，若卡方检验不通过则进入下一步；权重调节模块，用于对局部控制网中各三维控制点的权重进行调整，并将经过转换的局部控制网转换成全局控制网，直至获得的全局控制网中参数通过卡方检验。实施例三基于相同的发明构思，本实施例公开了一种存储一个或多个程序的计算机可读存储介质，一个或多个程序包括指令，指令当由计算设备执行时，使得计算设备执行根据上述任一项的粒子加速器局部控制网稳定性分析方法。本领域内的技术人员应明白，本申请的实施例可提供为方法、系统、或计算机程序产品。因此，本申请可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本申请可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本申请是参照根据本申请实施例的方法、设备、和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。最后应当说明的是：以上实施例仅用以说明本发明的技术方案而非对其限制，尽管参照上述实施例对本发明进行了详细的说明，所属领域的普通技术人员应当理解：依然可以对本发明的具体实施方式进行修改或者等同替换，而未脱离本发明精神和范围的任何修改或者等同替换，其均应涵盖在本发明的权利要求保护范围之内。上述内容仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以权利要求的保护范围为准。
