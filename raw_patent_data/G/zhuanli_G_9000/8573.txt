标题title
一种无人机航路自动规划的方法
摘要abst
本发明提供一种无人机航路自动规划的方法，包括划分出飞行管理区域、形成航路底图、选定起飞降落点、优化航路等步骤，通过对无人机的飞行航路进行规划，从而使无人机在飞行时能够规避碰撞的风险，提高飞行安全性。
权利要求书clms
1.一种无人机航路自动规划的方法，通过以下步骤进行航路规划：基于三维地理信息系统，划分出飞行管理区域；在飞行管理区域边界内设置若干节点，相邻节点通过连线两两连接，形成航路底图；接受无人机飞行任务选定的起飞点、降落点、起飞时间和降落时间的数据；为无人机分配高度层；形成约束条件，符合约束条件的连线和节点，予以标记为不可用；以与选点起飞地点和降落地点距离最短的节点和连线为航路规划的起飞点和降落点，计算两点之间最短的连线，形成航路；航路优化：S71判断在时间段有重叠的航路中，是否有与本次规划的航路重叠的航路，是则进入下一步，否则认为该航路已经为最优航路；S72列出飞行时间段有重叠且与本次规划的航路a1具有交叉点b的航路a2；S73本次无人机的飞行的参考时速为v1，另一航路无人机的参考时速v2；预判出a1航路的无人机到达交叉点b的时刻为T1+t1；a2航路的无人机到达交叉点b的时刻为T2+t2；S74当I-I大于安全时长时，允许航线交叉；若满足该条件，认定该航路为最优航路，若不满足该条件，进入下一步；S75以交叉点b为圆心，以安全距离c为半径形成一临时禁区，将禁区内覆盖的节点和连线标记为不可用，之后重新回到步骤S6直至形成最优航路；将所述最优航路信息反馈给无人机按航路执行飞行；无人机依据最优航路飞行；实时接收无人机飞行数据并在三维地理信息系统标记无人机实时位置。2.根据权利要求1所述方法，其特征在于，在S8中，当监测到无人机实时位置偏移航路且偏移量大于c时，发出预警，并在偏移点到其最优航路最近点之间重新规划航路，使其及时原定航路。3.根据权利要求2所述方法，其特征在于，S8中，实时对无人机飞行状态进行安全判断，判断步骤如下：S81以无人机为中心，以c为半径形成一个保护圈；S82不同无人机保护圈边缘是否相切或相交，如果是则认定为具有碰撞风险；S83向具有碰撞风险的无人机发出预警；S84碰撞规避：若所有无人机均没有出现偏移航路情况，则依次择一无人机进行路线重新规划，其他无人机暂时做悬停指令；若有无人机出现航路偏移，则依次先指令偏移航路的无人机予以路线重新规划，其他无人机暂时做悬停指令。4.根据权利要求3所述方法，其特征在于，所述路线通过以下方式进行重新规划：S84在航路底图展示出所有在飞无人机航路，并在航路两侧添加一保护区；未完成飞行的航路保护区覆盖的节点和连线标记为不可用；在航路底图中，计算此时所在地点与降落点之间最短的连线，形成新航路。5.根据权利要求1所述方法，其特征在于，监测规划航路有交叉的无人机，判断以其实际飞行速度，到达交叉点的时刻是否符合S63的判断条件，如不满足条件，则指令无人机调整飞行速度，直到符合条件。6.根据权利要求1所述方法，其特征在于，所述S4约束条件包括禁飞区域，所述禁飞区域基于三维地理信息系统划分。
说明书desc
技术领域本发明涉及无人机安全飞行领域，尤其涉及一种无人机航路自动规划的方法。背景技术低空空域为通用航空的作业区，不管工业飞行、农业飞行、空中旅游等，都运行于低空空域，低空空域的开放可以促成通用航空产业链的形成，从传统的农林服务、抢险救灾、航拍业务向多元化业务发展，例如，提供空中游览观光、培养飞行员、教学飞行、飞行表演、空中跳伞等可持续发展项目。但是低空空域飞行的安全管理，依然是制约低空经济发展的一大因素。现有的低空空域管理系统中，当空域同时具有多架无人机进行飞行时，无法有效对无人机航路进行管理，从而存在安全隐患。发明内容本发明通过对无人机的飞行航路进行规划，从而使无人机在飞行时能够规避碰撞的风险，提高飞行安全性。本发明通过以下方式实现：一种无人机航路自动规划的方法，通过以下步骤进行航路规划：S1. 基于三维地理信息系统，划分出飞行管理区域；S2. 在飞行管理区域边界内设置若干节点，相邻节点通过连线两两连接，形成航路底图；S3. 接受无人机飞行任务选定的起飞点、降落点、起飞时间和降落时间的数据；S4. 为无人机分配高度层；S5. 形成约束条件，符合约束条件的连线和节点，予以标记为不可用；S6. 以与选点起飞地点和降落地点距离最短的节点和连线为航路规划的起飞点和降落点，计算两点之间最短的连线，形成航路；S7. 航路优化：S71判断在时间段有重叠的航路中，是否有与本次规划的航路重叠的航路，是则进入下一步，否则认为该航路已经为最优航路；S72列出飞行时间段有重叠且与本次规划的航路a1具有交叉点b的航路a2；S73本次无人机的飞行的参考时速为v1，另一航路无人机的参考时速v2；预判出a1航路的无人机到达交叉点b的时刻为T1+t1；a2航路的无人机到达交叉点b的时刻为T2+t2；S74当I-I大于安全时长时，允许航线交叉；若满足该条件，认定该航路为最优航路，若不满足该条件，进入下一步；S75以交叉点b为圆心，以安全距离c为半径形成一临时禁区，将禁区内覆盖的节点和连线标记为不可用，之后重新回到步骤S6直至形成最优航路；S8. 将所述最优航路信息反馈给无人机按航路执行飞行；S9. 无人机依据最优航路飞行；实时接收无人机飞行数据并在三维地理信息系统标记无人机实时位置。进一步的，在S8中，当监测到无人机实时位置偏移航路且偏移量大于c时，发出预警，并在偏移点到其最优航路最近点之间重新规划航路，使其及时原定航路。进一步的，S8中，实时对无人机飞行状态进行安全判断，判断步骤如下：S81以无人机为中心，以c为半径形成一个保护圈；S82不同无人机保护圈边缘是否相切或相交，如果是则认定为具有碰撞风险；S83向具有碰撞风险的无人机发出预警；S84碰撞规避：若所有无人机均没有出现偏移航路情况，则依次择一无人机进行路线重新规划，其他无人机暂时做悬停指令；若有无人机出现航路偏移，则依次先指令偏移航路的无人机予以路线重新规划，其他无人机暂时做悬停指令。进一步的，所述路线通过以下方式进行重新规划：S84在航路底图展示出所有在飞无人机航路，并在航路两侧添加一保护区；未完成飞行的航路保护区覆盖的节点和连线标记为不可用；在航路底图中，计算此时所在地点与降落点之间最短的连线，形成新航路。进一步的，监测规划航路有交叉的无人机，判断以其实际飞行速度，到达交叉点的时刻是否符合S63的判断条件，如不满足条件，则指令无人机调整飞行速度，直到符合条件。进一步的，所述S4约束条件包括禁飞区域，所述禁飞区域基于三维地理信息系统划分。本发明的有益效果是：1.通过制作航路底图，实现无人机自动航路自动规划分配，使无人机在同一空域可以安全飞行，提高管理效率；2.通过航路优化，实现无人机航路交叉规划，提高空域利用率；3.实时监测无人机飞行位置，对于偏离航路的无人机予以路线重新规划，协助出现意外的无人机回归航路；4.当实时在飞无人机出现碰撞风险时，依据航路底图为无人机重新规划路线，使其规避碰撞。附图说明图1为本发明航路规划流程图；图2航路底图示意图；图3为本发明安全判断流程示意图。具体实施方式一种无人机航路自动规划的方法，通过以下步骤进行航路规划：S1基于三维地理信息系统，划分出飞行管理区域；S2在飞行管理区域边界内设置若干节点，相邻节点通过连线两两连接，形成航路底图；节点的数量可以依据实际管理需要设置，节点越多，节点间距越小，则精细度越高。如图1所示，在本实施例中，节点均匀分布在飞行管理区域中。S3接受无人机飞行任务选定的起飞点、降落点、起飞时间和降落时间的数据；无人机飞行任务的数据还可以包括无人机飞行速度、无人机续航路程、空飞重量、最大载重等。S4分配无人机高度层；系统中，可以根据不同类型无人机设置不同飞行高度层，形成飞行规范。同一类型的无人机分配在相同高度层。并且不同类型无人机之间的高度层需要有一定的隔离间距，形成多个不同高度的高度层。比如空机重量不超过15千克且最大起飞重量不超过25千克，具备符合空域管理要求的空域保持能力和可靠被监视能力，全程可以随时人工介入操作的无人驾驶航空器，设置为小型无人机，分配飞行高度层在真高150米的空域。最大起飞重量在25千克到150千克之间的无人驾驶航空器，设置为中型无人机，分配飞行高度在真高500米的空域。最大起飞重量超过150千克的无人驾驶航空器，设置为大型无人机，分配的飞行高度在真高1500米的空域。本实施例中，以中型无人机为例，在读取该无人机飞行任务申请后，将其分配在500米高程的空域进行航路规划。S5形成约束条件，符合约束条件的连线和节点，予以标记为不可用；S6以与选点起飞地点和降落地点距离最短的节点和连线为航路规划的起飞点和降落点，计算两点之间最短的连线，形成航路；两点之间最短的连线是指两点之间连线连接组成的最短路径。标记为不可用的节点和连线，在路线规划时将不予考虑。由于用户选取的起飞地点和降落地点，并不一定都会与节点重合，因此需要选择距离最近的可用节点作为航路起点进行修正。可采用dijskra、SPFA、Bellman-Ford、Floyd 、Floyd-Warshall、Johnson算法中的一种。S7航路优化：S71判断在时间段有重叠的航路中，是否有与本次规划的航路重叠的航路，是则进入下一步，否则认为该航路已经为最优航路；S72列出飞行时间段有重叠且与本次规划的航路a1具有交叉点b的航路a2；S73本次无人机的飞行的参考时速为v1，另一航路无人机的参考时速v2；预判出a1航路的无人机到达交叉点b的时刻为T1+t1；a2航路的无人机到达交叉点b的时刻为T2+t2；S74当I-I大于安全时长，允许航线交叉；若不满足该条件，进入下一步；S75以交叉点b为圆心，以安全距离c为半径形成一临时禁区，将禁区内覆盖的节点和连线标记为不可用，之后重新回到步骤S6直至形成最优航路；由于分配在同个高度层进行航路的规划的无人机在机型、航速等方面均较为接近，因此可以统一设置安全时长和安全距离c。步骤S75中，通过设置临时禁区，使本次规划可以绕开交叉点，重新规划路线。S8将所述最优航路信息反馈给无人机按航路执行飞行；S9无人机依据最优航路飞行；实时接收无人机飞行数据并在三维地理信息系统标记无人机实时位置。进一步的，在S8中，当监测到无人机实时位置偏移航路且偏移量大于c时，发出预警，并在偏移点到其最优航路最近点之间重新规划航路，使其及时原定航路。进一步的，S8中，实时对无人机飞行状态进行安全判断，判断步骤如下：S81以无人机为中心，以c为半径形成一个保护圈；S82不同无人机保护圈是否相切或相交，如果是则认定为具有碰撞风险；S83向具有碰撞风险的无人机发出预警；S84碰撞规避：若所有无人机均没有出现偏移航路情况，则依次择一无人机进行路线重新规划，其他无人机暂时做悬停指令；若有无人机出现航路偏移，则依次先指令偏移航路的无人机予以路线重新规划，其他无人机暂时做悬停指令。优先疏散偏移航路的无人机，确保航路安全性。进一步的，所述路线通过以下方式进行重新规划：S84在航路底图展示出所有在飞无人机航路，并在航路两侧添加一保护区；未完成飞行的航路保护区覆盖的节点和连线标记为不可用；在航路底图中，计算此时所在地点与降落点之间最短的连线，形成新航路。进一步的，监测规划航路有交叉的无人机，判断以其实际飞行速度，到达交叉点的时刻是否符合S74的判断条件，如不满足条件，则指令无人机调整飞行速度，直到符合条件。
