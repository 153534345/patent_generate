标题title
一种设施种植补光系统
摘要abst
本发明公开了一种设施种植补光系统，是由环境感知模块、主控模块和补光执行模块组成，其中，环境感知模块采集温室、大棚内四种环境参数并输入到主控模块，主控模块根据设施内环境数据计算出补光控制的PWM占空比，并输入到补光执行模块中，以控制补光灯实现对温室、大棚内光环境的调控。本发明能够根据植物特点和环境参数科学合理、自动高效地进行温室、大棚光环境调控，有利于增产、节能和增收。
权利要求书clms
1.一种设施种植补光系统，其特征在于，包括：环境感知模块、主控模块以及补光执行模块；所述环境感知模块包括：温度传感器、湿度传感器、CO2浓度传感器、光合有效辐射强度PAR传感器与第一微处理器ESP32芯片；所述温度传感器、湿度传感器、CO2浓度传感器、光合有效辐射强度PAR传感器分别通过485总线通信协议将所采集的环境数据传输给所述第一微处理器ESP32芯片；所述第一微处理器ESP32芯片采用WiFi将环境数据发送给所述主控模块；所述主控模块包括一个微型电脑树莓派4B，通过WiFi接收所述第一微处理器ESP32芯片发送的环境数据，并计算出PWM补光控制占空比后，通过WiFi发送给补光执行模块；所述补光执行模块包括第二微处理器ESP32芯片、多个恒流调光芯片SLM411A、多个红/蓝色LED灯板；所述补光执行模块中的第二微处理器ESP32通过WiFi接收所述PWM补光控制占空比，并输入到恒流调光芯片SLM411A中；所述恒流调光芯片SLM411A根据PWM补光控制占空比来调节红/蓝色LED灯板的平均电流大小，从而控制其所发出灯光的强度大小。2.根据权利要求1所述的一种设施种植补光系统，其特征在于，所述微型电脑树莓派4B中设置有基于光合速率预测的补光控制程序，并按如下步骤执行：步骤1：在植物可适应的光合有效辐射强度PAR区间内产生均匀分布的m个随机光合有效辐射强度其中，PARi表示第i个随机光合有效辐射强度；步骤2：将当前温室、大棚内实际测量的温度T、湿度RH、CO2浓度以及m个随机光合有效辐射强度输入到光合速率预测模型Pn～中，并预测出m个光合速率其中，Pni表示预测的第i个光合速率；步骤3：计算的二阶差分绝对值，得到二阶差分绝对值集合其中，Gi表示第i个二阶差分绝对值；步骤4：取最大值所对应的光合有效辐射强度作为补光控制的目标值PARobj；步骤5：利用模糊控制PID算法对当前温室、大棚内实际测量光合有效辐射强度PARmeasure与所述补光控制的目标值PARobj进行处理，得出PWM补光控制占空比。3.根据权利要求2所述的一种设施种植补光系统，其特征在于，所述光合速率预测模型是针对不同植物品种和生长期，通过实验测量和离线训练建立的。
说明书desc
技术领域本发明涉及智慧农业和自动控制领域，具体涉及一种设施种植补光系统。背景技术温室、大棚为植物/作物创造良好的生长环境，满足了社会日益增长的对产量、质量、品种、季节和产地需求。光合作用是种植业生产的物质基础，而光合作用受多种环境因素影响，如温度、湿度、二氧化碳浓度、光照等。光环境影响对于北半球中高纬度地区的设施种植尤为重要，特别是在冬春两季和部分地区的梅雨季节，低温、寡照和高湿难以使作物的光合作用达到最佳，导致作物生长周期延长、产量降低、遭遇病虫害概率增大等不利状况，因此对设施作物进行补光，提高其光合效果，需求十分迫切。设施种植补光系统分为两个部分。一个是测控电路和补光设备，为光环境调控提供了物理基础；另一个是补光控制方法，是温室大棚补光系统的核心。传统的植物补光技术采用白炽灯或节能灯，直接接入220V市电进行补光，不具备无线通讯功能，不能自动测量光照，不能自动调节补光灯。现有的植物补光系统虽然采用了LED光源和无线通信技术，但通常只能手动控制或固定阈值自动控制，功耗较大，而且不能采用植物生长模型进行控制。在补光控制方法方面，目前一般根据经验补光，或者基于给定阈值范围进行调控，难以取得较高的性价比。由于植物、作物生长状况可以通过其光合速率来判断，因此基于光合速率监测或预测的调控方法逐渐成为研究的主流，例如T.Liu基于作物生长模型和用电成本研究了一种分层优化光环境控制模型，P.Gao结合U弦曲率算法计算作物光响应曲线拐点，建立一种光环境决策模型，S.Mosharafian利用天气预报数据对未来光照进行预测，为本地温室的补光提供依据，单慧勇以CO2资源条件为限制对温室进行光气耦合优化调控等。但是上述控制方法较为复杂，与硬件结合不够紧密，离实际应用尚有距离。发明内容为了解决现有技术存在的不足之处，本发明提出一种设施种植补光系统，以期根据植物特点和环境参数科学合理、自动高效地进行温室、大棚光环境调控，从而能有利于增产、节能和增收。本发明为解决技术问题采取如下技术方案：本发明一种设施种植补光系统的特点在于，包括：环境感知模块、主控模块以及补光执行模块；所述环境感知模块包括：温度传感器、湿度传感器、CO2浓度传感器、光合有效辐射强度PAR传感器与第一微处理器ESP32芯片；所述温度传感器、湿度传感器、CO2浓度传感器、光合有效辐射强度PAR传感器分别通过485总线通信协议将所采集的环境数据传输给所述第一微处理器ESP32芯片；所述第一微处理器ESP32芯片采用WiFi将环境数据发送给所述主控模块；所述主控模块包括一个微型电脑树莓派4B，通过WiFi接收所述第一微处理器ESP32芯片发送的环境数据，并计算出PWM补光控制占空比后，通过WiFi发送给补光执行模块；所述补光执行模块包括第二微处理器ESP32芯片、多个恒流调光芯片SLM411A、多个红/蓝色LED灯板；所述补光执行模块中的第二微处理器ESP32通过WiFi接收所述PWM补光控制占空比，并输入到恒流调光芯片SLM411A中；所述恒流调光芯片SLM411A根据PWM补光控制占空比来调节红/蓝色LED灯板的平均电流大小，从而控制其所发出灯光的强度大小。本发明所述的一种设施种植补光系统的特点也在于，所述微型电脑树莓派4B中设置有基于光合速率预测的补光控制程序，并按如下步骤执行：步骤1：在植物可适应的光合有效辐射强度PAR区间内产生均匀分布的m个随机光合有效辐射强度其中，PARi表示第i个随机光合有效辐射强度；步骤2：将当前温室、大棚内实际测量的温度T、湿度RH、CO2浓度以及m个随机光合有效辐射强度输入到光合速率预测模型Pn～中，并预测出m个光合速率其中，Pni表示预测的第i个光合速率；步骤3：计算的二阶差分绝对值，得到二阶差分绝对值集合其中，Gi表示第i个二阶差分绝对值；步骤4：取最大值所对应的光合有效辐射强度作为补光控制的目标值PARobj；步骤5：利用模糊控制PID算法对当前温室、大棚内实际测量光合有效辐射强度PARmeasure与所述补光控制的目标值PARobj进行处理，得出PWM补光控制占空比。所述光合速率预测模型是针对不同植物品种和生长期，通过实验测量和离线训练建立的。与现有技术相比，本发明的有益效果在于：1、本发明的补光测控电路简洁、性能稳定可靠、功耗低。2、本发明基于光合速率预测模型进行补光调控，原理上更合理，同时设计了独特的补光目标值计算方法，简单高效。3、本发明补光测控电路和补光控制软件的有机结合，能够根据植物特点和环境参数对温室、大棚光环境进行自动调控，性价比高。附图说明图1为本发明补光系统总体结构框图；图2为本发明基于光合速率预测的补光控制方法流程图。具体实施方式本实施例中，一种设施种植补光系统，能够根据作物的不同种类以及当前设施内的环境数据自动计算出科学的补光控制参数，并将此参数用于实际补光控制中，从而提供一个更适合作物生长的设施光环境；具体的说，该系统包括：环境感知模块、主控模块以及补光执行模块；其中，如图1所示，环境感知模块为一个小型单元设备，并包括：温度传感器、湿度传感器、CO2浓度传感器、光合有效辐射强度PAR传感器与第一微处理器ESP32芯片；传感器与微处理器ESP32之间通过485总线连接，即所有传感器的A脚连接在一起，接入微处理器ESP32芯片所搭配的485转TTL模块的A脚，所有传感器的B脚连接在一起，接入微处理器ESP32芯片所搭配的485转TTL模块的B脚；温度传感器、湿度传感器、CO2浓度传感器、光合有效辐射强度PAR传感器分别通过485总线通信协议将所采集的环境数据传输给第一微处理器ESP32芯片；在实际应用中可采用多个这样的环境感知模块来实现对温室、大棚内不同位置处环境数据的实时监测，环境感知模块在布设时需注意要选择合适的位置，以增加所采集到的环境数据的代表性，环境感知模块中的光合有效辐射强度PAR传感器需靠近温室、大棚内的植物，以获取更准确的对植物有直接影响的光合有效辐射PAR参数；环境感知模块中微处理器ESP32芯片内置有WiFi模块，则可通过WiFi将数据传输到主控模块中。如图1所示，主控模块包括一个微型电脑树莓派4B，并设置有基于光合速率预测的补光控制程序，可根据当前设施内环境数据计算出一个较佳的补光控制参数，并用于实际的补光控制当中，微型电脑树莓派4B内同样有WiFi模块，可用于接收第一微处理器ESP32芯片发送的环境数据，并计算出PWM补光控制占空比后，通过WiFi发送给补光执行模块；主控模块可安放于较为方便进行操作的位置，如温室、大棚门口附近，便于人员进行查看以及进行一定的操作。如图1所示，补光执行模块包括第二微处理器ESP32芯片、多个恒流调光芯片SLM411A、多个红/蓝色LED灯板；补光执行模块中的第二微处理器ESP32上的WiFi模块通过WiFi接收PWM补光控制占空比，并输入到恒流调光芯片SLM411A中；恒流调光芯片SLM411A根据PWM补光控制占空比来调节红/蓝色LED灯板的平均电流大小，从而控制其所发出灯光的强度大小。电位器RP用于控制通过灯板上电流的峰值与恒流调光芯片SLM411A的SET管脚相连；红/蓝色LED灯板与恒流调光芯片SLM411A均采用外部电源供电，并且其接地端连接在一起，从而保证信号能够正常进行传输。补光执行模块上红/蓝色LED灯板可连接多个，从而对一片区域内的植物进行统一的补光控制；图1中的补光执行模块为一个小型单元设备，可通过采用多个补光执行模块来管理设施内多片区域的光环境，同时需要注意在同一片区域内的环境感知模块应与补光执行模块之间的空间距离保持接近，能够保证数据采集的准确性，以及调光控制的科学性。本实施例中，如图2所示，基于光合速率预测的补光控制程序是按如下步骤进行：步骤1：在植物可适应的光合有效辐射强度PAR区间内产生均匀分布的m个随机光合有效辐射强度其中，PARi表示第i个随机光合有效辐射强度；步骤2：将当前温室、大棚内实际测量的温度T、湿度RH、CO2浓度以及m个随机光合有效辐射强度输入到光合速率预测模型Pn～中，并预测出m个光合速率其中，Pni表示预测的第i个光合速率；而光合速率预测模型是针对不同植物品种和生长期，通过实验测量和离线训练建立的；步骤3：计算的二阶差分绝对值，得到二阶差分绝对值集合其中，Gi表示第i个二阶差分绝对值；步骤4：取最大值所对应的光合有效辐射强度作为补光控制的目标值PARobj；步骤5：利用模糊控制PID算法对当前温室、大棚内实际测量光合有效辐射强度PARmeasure与补光控制的目标值PARobj进行处理，得出PWM补光控制占空比。
