标题title
宽带质量巡检系统、方法、装置、设备及可读存储介质
摘要abst
本发明公开了一种宽带质量巡检系统、方法、装置、设备及可读存储介质，所述方法包括获取服务节点状态信息，根据所述服务节点状态信息生成巡检任务，执行所述巡检任务，并获取巡检结果。通过获取的已有的服务节点状态，来确定该服务节点是否符合宽带巡检要求，以确保巡检质量，进而依据该服务节点对应的服务节点状态生成巡检任务，在保障巡检质量的前提下，降低巡检成本，并且通过自动化执行巡检任务并获取巡检结果，实现定期对全网宽带用户自动化巡检，从而提前发现潜在风险问题，避免被动投诉的现象出现，保证用户日常宽带上网质量。
权利要求书clms
1.一种宽带质量巡检系统，其特征在于，所述宽带质量巡检系统包括巡检设备、任务中心模块、调度模块、资源管理模块、数据中心模块，所述巡检设备与所述数据中心模块、所述任务中心模块以及所述资源管理模块通信连接，所述任务中心模块与所述调度模块通信连接，所述调度模块与所述资源管理模块通信连接；所述资源管理模块，用于发送服务节点状态信息至调度模块，若接收到所述巡检设备发送的巡检请求，则根据所述巡检请求执行巡检任务；所述调度模块，用于若接收到所述任务中心模块发送的服务节点请求，则根据所述资源管理模块发送的服务节点状态信息确定所述服务节点请求对应的服务节点信息，并将所述服务节点信息发送至任务中心模块；所述任务中心模块，用于依据所述调度模块返回的服务节点信息配置巡检任务，并发送所述巡检任务至所述巡检设备；所述巡检设备，用于执行所述任务中心模块发出的巡检任务，采集执行所述巡检任务产生的巡检请求和巡检数据，并将所述巡检请求发送至所述资源管理模块，将所述巡检数据发送至数据中心模块；所述数据中心模块，用于接收所述巡检设备发送的巡检数据，并根据所述巡检数据生成巡检结果。2.根据权利要求1所述的宽带质量巡检系统，其特征在于，所述资源管理模块，还用于实时监测服务节点的当前带宽负荷；若所述带宽负荷大于或等于预设负荷峰值，则对所述服务节点进行扩容处理，得到服务节点状态信息；或，若所述带宽负荷小于预设负荷底值，则对所述服务节点进行缩容处理，得到服务节点状态信息。3.一种宽带质量巡检方法，其特征在于，包括如下步骤：获取服务节点状态信息；根据所述服务节点状态信息生成巡检任务；执行所述巡检任务，并获取巡检结果。4.根据权利要求3所述的宽带质量巡检方法，其特征在于，所述获取服务节点状态信息的步骤包括：实时监测服务节点的当前带宽负荷；若所述带宽负荷大于或等于预设负荷峰值，则对所述服务节点进行扩容处理，得到服务节点状态信息；或，若所述带宽负荷小于预设负荷底值，则对所述服务节点进行缩容处理，得到服务节点状态信息，其中，所述预设负荷峰值大于所述预设负荷底值。5.根据权利要求3所述的宽带质量巡检方法，其特征在于，所述根据所述服务节点状态信息生成巡检任务的步骤包括：根据所述服务节点状态信息确定服务节点的数量，若所述服务节点的数量存在多个，则依据所述服务节点状态信息对各所述服务节点匹配优先级；根据各所述服务节点对应的优先级生成巡检任务。6.根据权利要求5所述的宽带质量巡检方法，其特征在于，所述根据各所述服务节点对应的优先级生成巡检任务的步骤包括：获取巡检设备对应的设备区域信息，并获取所有服务节点对应的节点区域信息；依据所述设备区域信息遍历各所述节点区域信息，并判断是否存在与所述设备区域信息匹配的目标节点区域信息；若存在与所述设备区域信息匹配的目标节点区域信息，则按照所述目标节点区域信息对应的目标服务节点的优先级生成巡检任务。7.根据权利要求3所述的宽带质量巡检方法，其特征在于，所述执行所述巡检任务的步骤包括：获取所有巡检设备对应的设备信息，按照预设维度规则与所述设备信息对各所述巡检设备进行维度划分；控制同一维度中的各所述巡检设备执行巡检任务。8.一种宽带质量巡检装置，其特征在于，所述宽带质量巡检装置包括：信息获取单元，用于获取服务节点状态信息；任务生成单元，用于根据所述服务节点状态信息生成巡检任务；任务执行单元，用于执行所述巡检任务，并获取巡检结果。9.一种宽带质量巡检设备，其特征在于，所述宽带质量巡检设备包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的宽带质量巡检程序，其中：所述宽带质量巡检程序被所述处理器执行时实现如权利要求3至7中任一项所述的宽带质量巡检方法的步骤。10.一种可读存储介质，其特征在于，所述可读存储介质上存储有宽带质量巡检程序，所述宽带质量巡检程序被处理器执行时实现如权利要求3至7中任一项所述的宽带质量巡检方法的步骤。
说明书desc
技术领域本发明涉及宽带测速技术领域，尤其涉及一种宽带质量巡检系统、方法、装置、设备及可读存储介质。背景技术宽带测速是检测宽带网络质量主要手段之一，主要应用场景为宽带新装测速，宽带装维人员在用户家中现场通过手机、平板、电脑等测速工具进行验证宽带速率是否达到签约带宽，速率达标后，才能交付宽带。但是，运营商缺少有效手段保障用户日常宽带上网质量，装维人员仅对投诉用户提供上门服务检查宽带，修复故障，测速复测质量。人工上门服务方式被动应诉，不能主动提前发现问题，自动化程度低且成本高。发明内容本发明的主要目的在于提供一种宽带质量巡检系统、方法、装置、设备及可读存储介质。旨在解决如何实现宽带质量巡检自动化的问题。为实现上述目的，本发明提供一种宽带质量巡检系统，其特征在于，所述宽带质量巡检系统包括巡检设备、任务中心模块、调度模块、资源管理模块、数据中心模块，所述巡检设备与所述数据中心模块、所述任务中心模块以及所述资源管理模块通信连接，所述任务中心模块与所述调度模块通信连接，所述调度模块与所述资源管理模块通信连接；所述资源管理模块，用于发送服务节点状态信息至调度模块，若接收到所述巡检设备发送的巡检请求，则根据所述巡检请求执行巡检任务；所述调度模块，用于若接收到所述任务中心模块发送的服务节点请求，则根据所述资源管理模块发送的服务节点状态信息确定所述服务节点请求对应的服务节点信息，并将所述服务节点信息发送至任务中心模块；所述任务中心模块，用于依据所述调度模块返回的服务节点信息配置巡检任务，并发送所述巡检任务至所述巡检设备；所述巡检设备，用于执行所述任务中心模块发出的巡检任务，采集执行所述巡检任务产生的巡检请求和巡检数据，并将所述巡检请求发送至所述资源管理模块，将所述巡检数据发送至数据中心模块；所述数据中心模块，用于接收所述巡检设备发送的巡检数据，并根据所述巡检数据生成巡检结果。可选地，所述资源管理模块，还用于实时监测服务节点的当前带宽负荷；若所述带宽负荷大于或等于预设负荷峰值，则对所述服务节点进行扩容处理，得到服务节点状态信息；或，若所述带宽负荷小于预设负荷底值，则对所述服务节点进行缩容处理，得到服务节点状态信息。此外，为实现上述目的，本发明还提供一种宽带质量巡检方法，包括如下步骤：获取服务节点状态信息；根据所述服务节点状态信息生成巡检任务；执行所述巡检任务，并获取巡检结果。可选地，所述获取服务节点状态信息的步骤包括：实时监测服务节点的当前带宽负荷；若所述带宽负荷大于或等于预设负荷峰值，则对所述服务节点进行扩容处理，得到服务节点状态信息；或，若所述带宽负荷小于预设负荷底值，则对所述服务节点进行缩容处理，得到服务节点状态信息，其中，所述预设负荷峰值大于所述预设负荷底值。可选地，所述根据所述服务节点状态信息生成巡检任务的步骤包括：根据所述服务节点状态信息确定服务节点的数量，若所述服务节点的数量存在多个，则依据所述服务节点状态信息对各所述服务节点匹配优先级；根据各所述服务节点对应的优先级生成巡检任务。可选地，所述根据各所述服务节点对应的优先级生成巡检任务的步骤包括：获取巡检设备对应的设备区域信息，并获取所有服务节点对应的节点区域信息；依据所述设备区域信息遍历各所述节点区域信息，并判断是否存在与所述设备区域信息匹配的目标节点区域信息；若存在与所述设备区域信息匹配的目标节点区域信息，则按照所述目标节点区域信息对应的目标服务节点的优先级生成巡检任务。可选地，所述执行所述巡检任务的步骤包括：获取所有巡检设备对应的设备信息，按照预设维度规则与所述设备信息对各所述巡检设备进行维度划分；控制同一维度中的各所述巡检设备执行巡检任务。此外，本发明还提供一种宽带质量巡检装置，包括信息获取单元、任务生成单元、任务执行单元，其中：所述信息获取单元，用于获取服务节点状态信息；所述任务生成单元，用于根据所述服务节点状态信息生成巡检任务；所述任务执行单元，用于执行所述巡检任务，并获取巡检结果。此外，为实现上述目的，本发明还提供一种宽带质量巡检设备，所述宽带质量巡检设备包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的宽带质量巡检程序，其中：所述宽带质量巡检程序被所述处理器执行时实现如上所述的宽带质量巡检方法的步骤。此外，为实现上述目的，本发明还提供一种可读存储介质，所述可读存储介质上存储有宽带质量巡检程序，所述宽带质量巡检程序被处理器执行时实现如上所述的宽带质量巡检方法的步骤。本发明提出的一种宽带质量巡检系统、方法、装置、设备及可读存储介质，通过获取服务节点状态信息，根据该服务节点状态信息生成巡检任务，执行巡检任务，并获取巡检结果，并且是通过获取的已有的服务节点状态，来确定该服务节点是否符合宽带巡检要求，以确保巡检质量，进而依据该服务节点对应的服务节点状态生成巡检任务，在保障巡检质量的前提下，降低巡检成本，并且通过自动化执行巡检任务并获取巡检结果，实现定期对全网宽带用户自动化巡检，从而提前发现潜在风险问题，避免被动投诉的现象出现，保证用户日常宽带上网质量。附图说明图1为本发明实施例方案涉及的硬件运行环境的装置结构示意图；图2为本发明宽带质量巡检系统第一实施例系统结构示意图；图3为本发明宽带质量巡检方法第二实施例的流程示意图；图4为本发明一实施例宽带质量巡检系统架构应用示意图；图5为本发明一实施例宽带质量自动化巡检流程示意图；图6为本发明一实施例测速服务节点弹性扩缩容流程示意图；图7为本发明宽带质量巡检装置结构示意图。附图标号说明：标号名称标号名称10巡检设备20任务中心模块30调度模块40资源管理模块50数据中心模块本发明目的的实现、功能特点及优点将结合实施例，参照附图做进一步说明。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。请参照图2，图2为本发明宽带指令巡检系统第一实施例系统结构示意图，其中，宽带质量巡检系统包括巡检设备10、任务中心模块20、调度模块30、资源管理模块40、数据中心模块50。本实施例中，需要说明的是，服务节点为基于VCDN的各个CDN节点，通过复用现网VCDN资源，确定本实施例中的服务节点。服务节点是指用于测速的服务端节点，服务节点状态信息是指该服务节点相关的信息，用于确定服务节点的当前状态，该服务节点状态信息可以包括该服务节点的带宽资源信息、带宽负荷信息、区域维度信息等服务节点信息。巡检任务为任务中心配置的进行宽带质量巡检的具体执行策略，依据该巡检任务确定宽带测速方式、宽带测速客户端、宽带测速服务端、测速时间、测速周期、测速区域等详细配置策略信息。具体地，宽带质量巡检系统包括巡检设备10、任务中心模块20、调度模块30、资源管理模块40以及数据中心模块50，其中，巡检设备10与数据中心模块50、任务中心模块20以及资源管理模块40通信连接，任务中心模块20与调度模块30通信连接，调度模块30与资源管理模块40通信连接。具体地，任务中心模块20在CDN流量较少的时候，例如，凌晨2-7点，即预计用户休息不会上网的时间，配置巡检任务；任务中心模块20从包含有宽带账号与巡检设备10一一映射关系的系统中获取到巡检设备10的相关信息，该巡检设备相关信息包括巡检设备SN、签约账号、签约带宽、地市信息等信息，任务中心模块20携带该巡检设备相关信息向与之进行通信连接的调度模块30发送服务节点请求，该服务节点请求是指向调度模块30发出的确定执行巡检任务的服务端测速节点的请求，即确定服务节点的请求，服务节点请求包括测速服务节点地址，在接收到调度模块30返回的服务节点信息后，配置携带有该服务节点信息的巡检任务，并将巡检任务发送到巡检设备，其中，任务中心模块20在接收到该服务节点信息后，以任务下发频率T，例如，T＝60s，将巡检任务下发至与任务中心模块20通信连接的巡检设备10，并配置任务执行时间段，例如凌晨2-7点。具体地，调度模块30在接收到任务中心模块20发出的服务节点请求后，从与之通信连接的资源管理模块40获取服务节点状态信息，并根据该服务节点状态信息以及任务中心模块20发出的服务节点请求确定需要调度的服务节点，将该需要调度的服务节点对应的节点地址进行加密，将加密后的服务节点地址反馈作为服务节点信息反馈给任务中心模块20。具体地，巡检设备10在接收到任务中心模块20下发的巡检任务后，开始执行巡检任务，在执行巡检任务时，向与巡检设备10通信连接的资源管理模块40发送巡检请求。巡检设备10还用于在执行巡检任务时，将执行该巡检任务产生的巡检数据发送至数据中心模块50。具体地，数据中心模块50收集并处理巡检设备10发送的巡检数据，并通过管理员预先设置的巡检结果输出方式生成巡检结果。具体地，资源管理模块40在接收到巡检设备10发出的巡检请求后开始执行巡检任务。资源管理模块40，还用于实时监测服务节点的当前带宽负荷，并判断服务节点的带宽负荷是否大于等于预设负荷峰值，当带宽负荷大于等于预设负荷峰值时，资源管理模块40将对该服务节点进行扩容，并获取扩容后服务节点的扩容状态信息，将扩容状态信息作为服务节点状态信息提供给调度模块30；当服务节点的带宽负荷小于预设负荷峰值时，判断服务节点的带宽负荷是否小于预设负荷底值，当该带宽负荷小于预设负荷底值时，资源管理模块40将对服务节点进行缩容，并获取缩容后服务节点的缩容状态信息，将缩容状态信息作为服务节点状态信息提供给调度模块30。具体地，调度模块30，在接收到资源管理模块40发出的服务节点状态信息后，确定服务节点状态信息中的带宽资源信息，依据该带宽资源信息对服务节点匹配优先级，并根据优先级返回服务节点信息至任务中心模块20。其中带宽资源信息为服务节点对应的当前最终状态信息，即进行扩容后服务节点的扩容状态信息，进行缩容后服务节点的缩容状态信息，没有进行扩容或缩容的服务节点本身的服务节点状态信息。本发明实施例中，调度模块30通过接收资源管理模块40发送的服务节点状态，确定该服务节点是否符合宽带巡检要求，确保巡检质量，调度模块30将确定的服务节点对应的服务节点状态发送至任务中心模块20，任务中心模块20依据该服务节点对应的服务节点状态生成巡检任务，在保障巡检质量的前提下，降低巡检成本，并且通过自动化控制巡检设备10执行巡检任务，并通过数据中心模块50获取巡检结果，从而实现定期对全网宽带用户自动化巡检，从而提前发现潜在风险问题，避免被动投诉的现象出现，保证用户日常宽带上网质量。此外，如图1所示，图1是本发明实施例方案涉及的硬件运行环境的装置结构示意图。如图1所示，该装置可以包括：处理器1001，例如CPU，通信总线1002，用户接口1003，网络接口1004，存储器1005。其中，通信总线1002用于实现这些组件之间的连接通信。用户接口1003可以包括显示屏、输入单元比如键盘，可选的用户接口1003还可以包括标准的有线接口、无线接口。网络接口1004可选的可以包括标准的有线接口、无线接口。存储器1005可以是高速RAM存储器，也可以是稳定的存储器，例如磁盘存储器。存储器1005可选的还可以是独立于前述处理器1001的存储装置。本领域技术人员可以理解，图1中示出的装置的结构并不构成对装置的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件布置。如图1所示，作为一种计算机存储介质的存储器1005中可以包括操作系统、网络通信模块、用户接口模块以及宽带质量巡检程序。在图1所示的终端中，网络接口1004主要用于连接后台服务器，与后台服务器进行数据通信；用户接口1003主要用于连接客户端，与客户端进行数据通信；而处理器1001可以用于调用存储器1005中存储的宽带质量巡检程序，并执行以下操作：获取服务节点状态信息；根据所述服务节点状态信息生成巡检任务；执行所述巡检任务，并获取巡检结果。本发明应用于装置的具体实施例与下述应用宽带质量巡检方法的各实施例基本相同，在此不作赘述。请参照图3，图3为本发明宽带质量巡检方法第二实施例的流程示意图，其中，所述宽带质量巡检方法包括如下步骤：步骤S100，获取服务节点状态信息；本实施例中，宽带质量巡检方法应用于宽带质量巡检系统，该宽带质量巡检系统包括巡检设备、任务中心、调度中心、资源管理、数据中心。参考图4，其中，巡检设备：具体包括宽带测速客户端，具体可为宽带用户家中的智能网关，例如，A地市的智能网关1、智能网关2、智能网关3...，N地市的智能网关1、智能网关2、智能网关3...；巡检设备负责向指定的测速服务节点发起宽带测速下载任务，并将结果返回给数据中心；任务中心：负责配置巡检任务策略，以及任务管理、任务下发，例如，按照地市维度进行批量宽带测速巡检策略配置。巡检任务策略配置成功之后，任务中心向调度中心请求巡检设备的测速服务节点地址，最后携带调度中心的提供的测速服务节点地址，远程向巡检终端批量下发宽带测速任务。调度中心：按照预设服务原则，为终端巡检设备提供最优测速服务节点。资源管理：负责监控测速服务节点带宽使用情况，为巡检终端提供合适测速服务端，其中包括服务节点的节点监控、节点注册、容器管理；通过分布式测速节点，如A地市节点1...N地市节点1。数据中心：收集巡检设备的测速数据，数据处理之后，生成巡检报告。进一步，参考图5，图5为一实施例宽带质量自动化巡检流程示意图，其中，在巡检任务策略配置后进行测速节点地址生成，下一步进行巡检任务批量下发，再进行测速任务执行，任务执行结束后，生成测速巡检报告。VCDN应用Cache的原理，把网页内容分发到各个CDN节点上，并由各节点主动到源站点刷新来保证内容的新鲜。大量的访问请求通过节点服务器得到快速的响应，提高了访问质量，同时可以避免源服务器因访问量过大而造成的服务器负载过重与带宽资源不足等问题。本实施例中，需要说明的是，服务节点为基于VCDN的各个CDN节点，通过复用现网VCDN资源，确定本实施例中的服务节点。服务节点是指用于测速的服务端节点，服务节点状态信息是指该服务节点相关的信息，用于确定服务节点的当前状态，该服务节点状态信息可以包括该服务节点的带宽资源信息、带宽负荷信息、区域维度信息等服务节点信息。在本实施例中，应用场景包括多个服务节点以及多个测速客户端，所述多个服务节点以及所述多个测速客户端并没有一一对应的关系，也就是说某一个服务节点可以对应多个测速客户端。具体地，宽带质量巡检系统中资源管理模块负责服务节点监控、服务节点注册，资源管理模块确定服务节点，并获取该服务节点对应的状态信息。步骤S200，根据所述服务节点状态信息生成巡检任务；本实施例中，需要说明的是，巡检任务为任务中心配置的进行宽带质量巡检的具体执行策略，依据该巡检任务确定宽带测速方式、宽带测速客户端、宽带测速服务端、测速时间、测速周期、测速区域等详细配置策略信息。具体地，根据服务节点状态信息生成巡检任务，可以是资源管理模块在确定该服务节点的带宽负荷信息后，依据当前带宽信息判断该服务节点是否满足测速条件，当满足测速条件时，将该服务节点状态信息发送至调度中心，调度中心将该服务节点纳入测速服务端候选，从而在任务中心请求服务节点状态信息时，返回该服务节点状态信息，以使任务中心生成携带有服务节点状态信息的巡检任务；也可以是确定该服务节点的区域维度信息，根据该区域维度信息将该服务节点对应到与该区域维度匹配的测速客户端，从而生成巡检任务；还可以是确定该服务节点的带宽资源信息，根据该服务节点的带宽资源是否满足测速资源条件，进而确定是否生成与该服务节点对应的巡检任务等依据服务节点状态信息生成巡检任务的方式。步骤S300，执行所述巡检任务，并获取巡检结果。本实施例中，需要说明的是，巡检结果是指所述巡检任务执行完成后，将任务执行后获得的数据进行分析整合后得出的结论，例如，宽带质量巡检是否通过的结论、宽带巡检数据的具体分析报告等结果信息。具体地，按照巡检任务中具体的策略信息，确定对应的测速客户端、测速服务节点、测速时间、测速方式以及测速周期等具体任务信息，根据该具体任务信息执行巡检任务，并获取任务执行数据，将该数据分析整合后，得出巡检结果。本发明实施例中，通过获取服务节点状态信息，根据该服务节点状态信息生成巡检任务，执行巡检任务，并获取巡检结果，并且是通过获取的已有的服务节点状态，来确定该服务节点是否符合宽带巡检要求，以确保巡检质量，进而依据该服务节点对应的服务节点状态生成巡检任务，在保障巡检质量的前提下，降低巡检成本，并且通过自动化执行巡检任务并获取巡检结果，实现定期对全网宽带用户自动化巡检，从而提前发现潜在风险问题，避免被动投诉的现象出现，保证用户日常宽带上网质量。进一步地，基于本发明宽带质量巡检方法第二实施例，提出本发明宽带质量巡检方法第三实施例，所述步骤S100，获取服务节点状态信息的步骤，包括：步骤a，实时监测服务节点的当前带宽负荷；本实施例中，基于第一实施例中宽带质量巡检系统，应用本发明宽带质量巡检方法，资源管理模块基于容器管理技术，将当前服务器对应的物理节点进行虚拟化，从而得到当前的服务节点，其中，基于容器管理技术，可以动态弹性的扩容当前服务节点。本实施例中，带宽负荷反应当前服务节点的带宽使用情况，具体形式可以为当前带宽负荷量与带宽容量之间的比值。具体地，实时监测服务节点的当前带宽负荷，即实时获取服务节点当前使用情况。其中，可以通过实时轮询、定时检测等方式进行服务节点当前带宽负荷信息的获取。步骤b，若所述带宽负荷大于或等于预设负荷峰值，则对所述服务节点进行扩容处理，得到服务节点状态信息；本实施例中，需要说明的是，预设负荷峰值是指预先设置的，触发服务节点进行扩容的带宽负荷最大值，当服务节点的带宽负荷超过该预设负荷峰值时，需要对该服务节点进行扩容操作，从而提供合适的测试服务端。例如，预设负荷峰值为70％。该预设负荷峰值可以根据实际需求灵活变更，在此不做限制。具体地，获取服务节点的当前带宽负荷后，将该带宽负荷与预设负荷峰值进行比较，判断该带宽负荷是否超出预设负荷峰值。本实施例基于容器管理技术，将物理的服务器进行虚拟化，虚拟出多个服务节点，该虚拟出的服务节点可动态弹性的进行扩缩容，在资源不够时，服务节点可以请求进行扩容，以获取更多的资源，在资源闲置时，服务节点可以将资源进行释放，即进行缩容。本实施例中，需要说明的是，扩容是指对服务节点的带宽容量进行扩充，扩容状态信息是指服务节点进行扩容之后的带宽负荷，具体地，当服务节点的当前带宽负荷大于或等于预设负荷峰值，则触发扩容，对该服务节点的带宽容量进行扩容，在扩容之后，获取该服务节点扩容后的带宽负荷，将服务节点状态信息中的带宽负荷信息更新为扩容后的带宽负荷，从而得出服务节点状态信息。通过实时监测服务节点的带宽使用情况，及时对服务节点的带宽容量及进行调整，从而确定合适的测速服务端，保证宽带巡检质量。步骤c，若所述带宽负荷小于预设负荷底值，则对所述服务节点进行缩容处理，得到服务节点状态信息，其中，所述预设负荷峰值大于所述预设负荷底值。本实施例中，需要说明的是，预设负荷底值是指预先设置的，触发服务节点进行缩容的带宽负荷最小值，可以理解的是，预设负荷峰值大于预设负荷底值。当服务节点的带宽负荷小于该预设负荷底值时，需要对该服务节点进行缩容操作，从而提供合适的测试服务端。例如，预设负荷底值为20％。该预设负荷底值可以根据实际需求灵活变更，在此不做限制。具体地，当服务节点的当前带宽负荷没有超出预设负荷峰值时，将该带宽负荷与预设负荷底值进行比较，判断该带宽负荷是否小于预设负荷底值。本实施例中，需要说明的是，缩容是指对服务节点的带宽容量进行释放，缩容状态信息是指服务节点进行缩容之后的带宽负荷，具体地，当服务节点的当前带宽负荷小于预设负荷底值，则触发缩容，对该服务节点的带宽容量进行释放，在缩容之后，获取该服务节点缩容后的带宽负荷，将服务节点状态信息中的带宽负荷信息更新为缩容后的带宽负荷，从而得出服务节点状态信息。参考图6，在任务开始时以轮询的方式获取测速服务节点带宽，判断该带宽是否大于70％，若是，则触发扩容，对该服务节点进行扩容后返回该服务节点，结束；若否，则继续判断该服务节点带宽是否小于20％，若小于20％，则触发缩容，对该服务节点缩容后，返回该服务节点，结束。若不小于20％，则直接返回该服务节点。可以理解的是，在另一实施例中，可以优先判断服务节点的当前带宽负荷是否小于预设负荷底值，判断是否需对该服务节点进行缩容，在当前带宽负荷大于预设负荷底值时，再判断该带宽负荷是否超出预设负荷峰值，判断是否需对该服务节点进行扩容，从而实现服务节点的动态扩缩容。在一实施例中，还可以是在获取到服务节点的带宽负荷后，同时与预设负荷底值以及预设负荷峰值进行比较，从而根据带宽负荷是否小于预设负荷底值或带宽负荷是否超出预设负荷峰值，确定是否对该服务节点进行缩容或扩容。通过实时监测服务节点的带宽使用情况，对服务节点的带宽容量合理释放，优化宽带质量巡检的测速服务节点状态，并在保证宽带巡检质量的前提下，合理利用带宽资源。进一步地，根据所述服务节点状态信息生成巡检任务的步骤包括：步骤d，根据所述服务节点状态信息确定服务节点的数量，若所述服务节点的数量存在多个，则依据所述服务节点状态信息对各所述服务节点匹配优先级；本实施例中，带宽资源信息是指服务节点可以用来进行宽带质量巡检的宽带资源，是进行带宽测速的资源基础。在本实施例中，应用场景包括多个服务节点，每个服务节点的服务节点状态信息中包含有带宽资源信息。具体地，资源管理模块依据当前服务节点状态信息的数量得出对应的服务节点的数量，若服务节点只有一个时，无需再进行优先级匹配步骤，当前服务节点为最高优先级，若服务节点至少存在两个时，在获取每个服务节点对应的服务节点状态信息中的带宽资源信息后，将该带宽资源信息发送至调度中心，调度中心根据所有的带宽资源信息为所有的服务节点匹配对应的优先级。其中带宽资源信息为服务节点对应的当前最终状态信息，即进行扩容后服务节点的扩容状态信息，进行缩容后服务节点的缩容状态信息，没有进行扩容或缩容的服务节点本身的服务节点状态信息。可以理解的是，服务节点对应的优先级并不是一成不变的，在对服务节点进行动态扩缩容后、有新增或减少的服务节点时、服务节点带宽资源变化时均会对服务节点的优先级匹配情况进行更新。其中，一实施例中，具体地，可以根据带宽资源信息中的带宽资源大小对各服务节点进行排序，带宽资源丰富的服务节点排序靠前，带宽资源较为贫乏的服务节点排序靠后，为排序靠前的服务节点匹配更高的优先级。在一实施例中，根据服务节点状态信息对各服务节点匹配优先级可以是预先设置带宽资源阈值，由服务节点状态信息中带宽资源是否达到带宽资源阈值，来确定服务节点状态信息对应的服务节点的优先级，达到带宽资源阈值的服务节点优先级更高。还可以是划分不同阶级的带宽资源阈值，每个阶级的带宽资源阈值对应不同的优先级，带宽资源丰富的优先级高，根据服务节点状态信息中的带宽资源与带宽资源阈值阶级的对应关系确定对应的服务节点的优先级。步骤e，根据各所述服务节点对应的优先级生成巡检任务。任务中心在初步配置好巡检任务策略之后，将向调度中心请求服务节点地址，调度中心在接收到任务中心的服务节点地址请求后，依据当前所有服务节点对应的优先级反馈服务节点地址至任务中心，任务中心在接收到调度中心反馈的服务节点地址后，生成携带有服务节点地址的巡检任务。其中，该服务节点地址为加密的URL，一个巡检终端将对应一个测速服务节点URL地址，在执行巡检任务时，巡检终端通过对该URL进行解密后，发送测速请求。通过带宽资源为服务节点匹配优先级，将测试带宽资源更为丰富的服务节点优先调度，依据服务节点优先级生成巡检任务，实现巡检任务的合理配置，进而保证巡检任务顺利进行，从而实现自动化预检预修。进一步地，根据各所述服务节点对应的优先级生成巡检任务的步骤包括：步骤f，获取巡检设备对应的设备区域信息，并获取所有服务节点对应的节点区域信息；本实施例中，需要说明的是，设备区域信息是指巡检设备所处的地域信息，例如，地市信息。节点区域信息是指服务节点所处的地域信息，例如，地市信息。其中，获取设备区域信息与获取节点区域信息并不存在严格的先后顺序，在任务中心进行任务配置时，会优先将同一区域的巡检设备与服务节点进行匹配。具体地，调度中心在确定巡检设备后，获取该巡检设备对应的设备区域信息；调度中心获取所有的服务节点对应的节点区域信息。在一实施例中，设备区域信息的获取还可以是根据任务中心在进行巡检任务配置时，按照区域维度对巡检设备进行划分，直接发送该区域维度的设备区域信息至调度中心，调度中心直接获取该设备区域信息。步骤g，依据所述设备区域信息遍历各所述节点区域信息，并判断是否存在与所述设备区域信息匹配的目标节点区域信息；本实施例中，需要说明的是，目标节点区域信息是指与设备区域信息匹配的节点区域信息，通过目标节点区域信息可以为巡检设备匹配同一区域的服务节点，即提供最优测速的服务节点。一个区域维度可能存在多个服务节点，也即一个目标节点区域可以对应多个服务节点。例如，巡检设备为案地市维度划分时，若设备区域信息为A城市，则判断所有的节点区域信息中是否存在A城市的节点区域信息。具体地，调度中心在获取到设备区域信息以及所有的节点区域信息后，按照该设备区域信息将所有的节点区域信息一一比较，判断是否存在有该设备区域信息对应的目标节点区域信息。步骤h，若存在与所述设备区域信息匹配的目标节点区域信息，则按照所述目标节点区域信息对应的目标服务节点的优先级生成巡检任务。本实施例中，需要说明的是，目标服务节点是指节点区域信息为目标节点区域信息的服务节点，其可以为一个或者多个。例如，目标节点区域信息为B城市，则B城市的所有服务节点均为目标服务节点。具体地，当存在目标节点区域信息时，确定该目标节点区域信息对应的所有服务节点，该所对应的所有服务节点即为目标服务节点，确定该所有的目标服务节点的优先级，按照目标节点的优先级确定最终的进行宽带质量巡检的测速服务节点，调度中心将该进行宽带质量巡检的测速服务节点对应的测速服务节点地址反馈至任务中心，任务中心在接收到该测速服务节点地址后，配置携带有测速服务节点地址的巡检任务。其中，任务中心在进行任务配置时，一个巡检设备将匹配一个测速服务节点地址，一个测速服务节点可以对应多个巡检设备。在进行巡检任务配置时，为测速服务节点地址设置有效时间，例如，5分钟。在该有效时间内，巡检设备可向测速服务节点发起测速；超出该有效时间，即测速服务地址失效后，巡检设备将不能向测速服务节点发起测速。当不存在目标节点区域信息时，即表示当前区域维度没有与巡检设备匹配的服务节点，此时可以扩大对服务节点的区域维度，将服务节点的区域维度扩大至周边地区，例如，设备区域信息为A城市，A城市周边有一个B城市，当节点区域信息中不存在A城市时，将服务节点的区域维度扩大至A城市以及B城市。此时，不直接将设备区域信息与节点区域信息进行匹配，而是确定与该设备区域信息距离最近的节点区域信息，从而确定对应的测速服务节点，进而将该测速服务节点的测速服务地址反馈给任务中心。通过依据设备区域信息遍历所有的节点区域信息，确定进行宽带质量巡检的服务节点，可以为巡检设备匹配到最近的服务节点，即按照就近原则进行服务节点的选定，为巡检设备提供最优的测速服务节点。在当前区域维度没有合适的服务节点时，调度其他区域维度带宽资源富裕的测速服务节点，确保巡检任务的顺利进行。进一步地，执行所述巡检任务的步骤包括：步骤i，获取所有巡检设备对应的设备信息，按照预设维度规则与所述设备信息对各所述巡检设备进行维度划分；本实施例中，需要说明的是，巡检设备为宽带质量巡检的客户端，是一个庞大的数据量，在对巡检任务进行配置时，需将巡检设备与服务节点进行匹配，由于巡检设备与服务节点为多对一的关系，将巡检设备按照一定规则进行划分，从而实现合理的巡检任务配置。本实施例中，将巡检设备按照预设维度规则进行划分，在另一实施例中，还可以是其他划分规则，例如按照签约带宽划分等。设备信息为巡检设备对应的相关信息，包括有巡检设备SN、地市信息、签约账号、签约带宽等与巡检设备相关的信息。预设维度规则为预先设置的将巡检设备进行区域划分的维度标准，例如，地市维度划分规则、省级维度划分规则。该预设维度规则可以根据实际需要进行调整，本实施例中，以地市信息为维度进行划分为例，具体地，任务中心在获取所有的巡检设备对应的设备信息后，确定该设备信息中的地市信息，按照预设维度规则，即按照地市划分规则，将所有的巡检设备进行维度划分，将同一地市的巡检设备划分至同一维度。步骤j，控制同一维度中的各所述巡检设备执行巡检任务。任务中心将向同一维度中的所有巡检设备批量下发巡检任务，其中，任务中心根据具体巡检任务策略和最优的测速服务节点地址，对巡检区域的宽带用户周期地T批量下发巡检任务。巡检设备在接收到巡检任务后，通过文件下载测速方式，以固定下载时间t向目的测速服务节点进行下载测试任务，通过统计实际总下载数据包B，进而计算出宽带用户的下载速率v＝B/t，其中t＝60s。其中，为不影响用户正常宽带使用，通过判断用户休息时间，即CDN流量相对少的时候，执行巡检任务，例如，凌晨2-7点。任务中心向同一维度的所有巡检设备下发巡检任务，巡检任务执行时间为CDN流量相对少的时间段，在该时间段内，同一维度的所有巡检设备依序执行巡检任务。在另一实施例中，还可以是任务中心向同一维度的所有巡检设备下发巡检任务后，在巡检任务执行时间段内，同一维度的所有巡检设备同时开始执行巡检任务。通过自动批量下发巡检任务，合理控制宽带质量巡检进度，覆盖更广，全网宽带用户定期巡检，提前发现潜在宽带质量问题，保障全网宽带用户上网质量，降低人工上门服务成本。进一步地，执行所述巡检任务的步骤之后，还包括：步骤k，获取巡检数据，并分析整合所述巡检数据；本实施例中，需要说明的是，巡检数据是指巡检设备在执行巡检任务后，生成的相关数据，例如，进行下载任务时，实际总下载数据包B。具体地，巡检设备在执行巡检任务后，将巡检数据返回给数据中心，数据中心收集巡检设备的测速数据后，进行数据的分析整合处理。其中，数据中心收集和处理巡检终端上报的速率数据。步骤l，判断所述巡检数据是否符合预设带宽标准，并得出判断结果；预设带宽标准是指预先设置的，判定当前带宽质量是否达标的参考标准，在巡检数据符合该预设带宽标准时，即可判断该宽带质量较好，符合期望。例如，预设带宽标准是实际下载速率达到签约带宽的90％。具体的，结合巡检终端所在用户家中的签约带宽信息，按地市、区县维度聚类统计分析宽带达标率情况，从而是否符合预设带宽标准，若是，则判断结果为成功，此时宽带质量较好；若否，则判断结果为失败，当前宽带质量较差，需要运维人员根据实际情况进行宽带检查，修复故障，提升宽带质量。步骤m，按照所述判断结果输出巡检报告，将所述巡检报告作为巡检结果。巡检报告是指数据中心在对巡检数据进行数据处理后，输出的具有宽带质量判断结果的报告。具体地，在确定判断结果后，将该判断结果加入报告内容，其中，巡检报告可以包括有巡检数据的具体分析过程、宽带质量巡检结果、巡检区域等相关巡检信息。将该巡检报告作为巡检结果。通过对巡检数据自动化分析，输出巡检报告供宽带运维人员预检预修，提前发现潜在风险问题，确保宽带用户的上网质量。此外，参照图7，本发明还提供一种宽带质量巡检装置，其特征在于，所述宽带质量巡检装置包括信息获取单元2001、任务生成单元2002、任务执行单元2003，其中：所述信息获取单元2001，用于获取服务节点状态信息；所述任务生成单元2002，用于根据所述服务节点状态信息生成巡检任务；所述任务执行单元2003，用于执行所述巡检任务，并获取巡检结果。可选的，所述信息获取单元2001还用于：实时监测服务节点的当前带宽负荷；判断所述带宽负荷是否大于等于预设负荷峰值；若所述带宽负荷大于或等于预设负荷峰值，则对所述服务节点进行扩容处理，得到服务节点状态信息；或，若所述带宽负荷小于预设负荷底值，则对所述服务节点进行缩容处理，得到服务节点状态信息，其中，所述预设负荷峰值大于所述预设负荷底值。可选的，所述任务生成单元2002还用于：根据所述服务节点状态信息确定服务节点的数量，若所述服务节点的数量存在多个，则依据所述服务节点状态信息对各所述服务节点匹配优先级；根据各所述服务节点对应的优先级生成巡检任务。可选的，所述任务生成单元2002还用于：获取巡检设备对应的设备区域信息，并获取所有服务节点对应的节点区域信息；依据所述设备区域信息遍历各所述节点区域信息，并判断是否存在与所述设备区域信息匹配的目标节点区域信息；若存在与所述设备区域信息匹配的目标节点区域信息，则按照所述目标节点区域信息对应的目标服务节点的优先级生成巡检任务。可选的，所述任务执行单元2003还用于：获取所有巡检设备对应的设备信息，按照预设维度规则与所述设备信息对各所述巡检设备进行维度划分；控制同一维度中的各所述巡检设备执行巡检任务。本申请宽带质量巡检装置的具体实施方式与上述宽带质量巡检方法各实施例基本相同，在此不再赘述。此外，本发明还提出一种宽带质量巡检设备，其特征在于，所述宽带质量巡检设备包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的宽带质量巡检程序，其中：所述宽带质量巡检程序被所述处理器执行时实现本发明各个实施例所述的宽带质量巡检方法。此外，本发明还提出一种可读存储介质，所述可读存储介质包括计算机可读存储介质，其上存储有宽带质量巡检程序。所述可读存储介质可以是图1的终端中的存储器1005，也可以是如ROM/RAM、磁碟、光盘中的至少一种，所述可读存储介质包括若干指令用以使得一台具有处理器的宽带质量巡检设备执行本发明各个实施例所述的宽带质量巡检方法。可以理解的是，在本说明书的描述中，参考术语“一实施例”、“另一实施例”、“其他实施例”、或“第一实施例～第N实施例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。需要说明的是，在本文中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者系统不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者系统所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括该要素的过程、方法、物品或者系统中还存在另外的相同要素。上述本发明实施例序号仅仅为了描述，不代表实施例的优劣。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到上述实施例方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在如上所述的一个存储介质中，包括若干指令用以使得一台终端设备执行本发明各个实施例所述的方法。以上仅为本发明的优选实施例，并非因此限制本发明的专利范围，凡是利用本发明说明书及附图内容所作的等效结构或等效流程变换，或直接或间接运用在其他相关的技术领域，均同理包括在本发明的专利保护范围内。
