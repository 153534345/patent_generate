标题title
一种以四边形地块为参照物的山区茶园低空图像拼接方法
摘要abst
本发明公开一种以四边形地块为参照物的山区茶园低空图像拼接方法，包括以下步骤：对山区茶园进行低空图像采集,对采集的图像进行阈值分割,提取二值化图像中参照物的各角点坐标,计算图像的缩放比例和旋转角度,拼接茶园低空图像；本发明以山区茶园作业的起始点作为参照物进行低空图像的拼接，并在拼接过程中对图像进行二值化分割，对作业起始点进行角点坐标提取，计算副图缩放比例和旋转角度，以此提取副图中主图未覆盖的区域并与主图完成拼接，避免了特征点选择错误所引起的误差，所得到的拼接图像以山区茶园作业起始点为起点，解决了传统山区茶园图像采集中图像覆盖范围不足的问题，在保持图像质量的同时还保证了图像的覆盖范围相对较大。
权利要求书clms
1.一种以四边形地块为参照物的山区茶园低空图像拼接方法，其特征在于，包括以下步骤：步骤一：先对无人飞行器上预设山区茶园的巡查区域，再启动无人飞行器对山区茶园进行飞行日常巡查，并在巡查区域对山区茶园进行低空图像采集，接着对采集的图像进行预处理，获得待拼接的原始图像，且原始图像中包含作为无人飞行器停机坪的四边形地块；步骤二：先根据图像中道路长度将待拼接的原始图像分为主图和副图，再采取主图和副图的亮度特征并进行阈值分割，得到主图和副图的二值图像，在主图和副图的二值图像中确定四边形地块的白色区域作为四边形参照物；步骤三：先确定主图和副图的二值图像中四边形参照物的四个角点在原始图像中的像素点坐标，再根据确定的像素点坐标依次提取主图上的四边形参照物四个角点A1、B1、C1和D1以及副图上的四边形参照物四个角点A2、B2、C2和D2；步骤四：先根据主图和副图上的四个角点分别获取主图上的四边形参照物对角线A1C1和B1D1以及副图上的四边形参照物对角线A2C2和B2D2，再根据对角线A1C1、B1D1、A2C2和B2D2计算副图的缩放比例，接着将副图按计算的缩放比例进行缩放，然后根据对角线A1C1和A2C2以及B1D1：B2D2在原始图像坐标系中的夹角计算副图的旋转角度；步骤五：先选取副图中主图没有覆盖的区域作为副图参与拼接的部分，再将副图参与拼接的部分按步骤四中的旋转角度进行旋转，并与主图进行拼接，完成山区茶园低空图像拼接。2.根据权利要求1所述的一种以四边形地块为参照物的山区茶园低空图像拼接方法，其特征在于：所述步骤一中，所述对图像的预处理具体步骤为：先对图像进行边缘检测处理，再对图像进行均衡化处理，接着对均衡化处理后的图像进行降噪处理，最后得到预处理后的山区茶园低空原始图像。3.根据权利要求1所述的一种以四边形地块为参照物的山区茶园低空图像拼接方法，其特征在于：所述步骤二中，所述阈值分割的具体步骤为，先以待拼接的原始图像的R+G+B亮度特征作为分割特征，再用OSTU法确定阈值，然后采用阈值分割将待拼接的原始图像分割为二值图像。4.根据权利要求1所述的一种以四边形地块为参照物的山区茶园低空图像拼接方法，其特征在于：所述步骤三中，提取主图和副图上的四边形参照物角点坐标时，主图的四边形参照物四个角点以左上角为A1点，顺时针依次提取坐标为A1、B1、C1和D1，副图上的四边形参照物四个角点以左上角为A2点，顺时针依次提取坐标为A2、B2、C2和D2。5.根据权利要求1所述的一种以四边形地块为参照物的山区茶园低空图像拼接方法，其特征在于：所述步骤四中，计算副图的缩放比例时，先分别计算对角线A1C1、B1D1、A2C2和B2D2的长度，再以A1C1：A2C2和B1D1：B2D2的平均值作为副图的缩放比例。6.根据权利要求1所述的一种以四边形地块为参照物的山区茶园低空图像拼接方法，其特征在于：所述步骤四中，计算副图的旋转角度时，先以A1C1和A2C2在图像坐标系中的夹角为θ1，再以B1D1：B2D2在图像坐标系中的夹角为θ2，然后以θ1和θ2的平均值作为副图的旋转角度。7.根据权利要求1所述的一种以四边形地块为参照物的山区茶园低空图像拼接方法，其特征在于：所述步骤五中，若副图视野在左则选择旋转后图像最左边到A1点的区域作为副图参与拼接的部分，若副图视野在右则选择旋转后图像最右边到C1点的区域作为副图参与拼接的部分。
说明书desc
技术领域本发明涉及图像处理技术领域，尤其涉及一种以四边形地块为参照物的山区茶园低空图像拼接方法。背景技术茶起源于中国，栽培历史已有三千多年，是人类三大饮品之一，消费量超过咖啡和可可，茶叶是我国重要的经济作物，其发展状况对茶区经济振兴、市场供应和名茶品牌的树立具有深远影响，饮茶有益于人的身体健康，茶叶大都种植于茶园，而山区茶园就是种植茶叶的山区，我国的茶园大都位于山区，尤其是有机茶园，为了提高山区茶园的茶叶品质，需要对其环境参数进行有效感知和日常巡检，以便及时采取有效措施来实现高效的生产管理。山区茶园的日常巡查工作由于山区地形特点而导致工作量大，工作效率低，而引入多旋翼无人飞行器技术进行茶园的日常巡视成为提高劳动效率的有效途径，因此山区茶园上都修建有用于无人飞行器停靠的四边形地块，以作为无人飞行器停机坪，但是，在无人飞行器实际图像采集过程中，为保持图像质量，无人飞行器所采集图像的覆盖范围相对较小，经常出现连续多个山头无法在一幅图像中显现的问题，从而导致采集的图像覆盖范围不足。目前，为了在一幅图像中显示更多的区域信息，就需要对图像进行拼接，在已有的图像拼接研究中大多通过图像处理算法进行特征点的选择，这时候由于山区茶园中茶树行信息相似，极可能产生不同茶树行之间匹配，而且在已有的拼接方法下，拼接的目标主要是突出图像的平滑和画面的过渡自然，这显然不利于后续农业作业区域的定位，而将四边形地块的停机坪作为参照物可以解决这一问题，因此，本发明提出一种以四边形地块为参照物的山区茶园低空图像拼接方法以解决现有技术中存在的问题。发明内容针对上述问题，本发明的目的在于提出一种以四边形地块为参照物的山区茶园低空图像拼接方法，该方法从农业作业的角度出发，以山区茶园作业的起始点作为参照物进行低空图像的拼接，并在拼接过程中对图像进行二值化分割，对作业起始点进行角点坐标提取，计算副图缩放比例和旋转角度，以此提取副图中主图未覆盖的区域并与主图完成拼接，避免了传统图像拼接方法特征点选择错误所引起的误差。为了实现本发明的目的，本发明通过以下技术方案实现：一种以四边形地块为参照物的山区茶园低空图像拼接方法，包括以下步骤：步骤一：先对无人飞行器上预设山区茶园的巡查区域，再启动无人飞行器对山区茶园进行飞行日常巡查，并在巡查区域对山区茶园进行低空图像采集，接着对采集的图像进行预处理，获得待拼接的原始图像，且原始图像中包含作为无人飞行器停机坪的四边形地块；步骤二：先根据图像中道路长度将待拼接的原始图像分为主图和副图，再采取主图和副图的亮度特征并进行阈值分割，得到主图和副图的二值图像，在主图和副图的二值图像中确定四边形地块的白色区域作为四边形参照物；步骤三：先确定主图和副图的二值图像中四边形参照物的四个角点在原始图像中的像素点坐标，再根据确定的像素点坐标依次提取主图上的四边形参照物四个角点A1、B1、C1和D1以及副图上的四边形参照物四个角点A2、B2、C2和D2；步骤四：先根据主图和副图上的四个角点分别获取主图上的四边形参照物对角线A1C1和B1D1以及副图上的四边形参照物对角线A2C2和B2D2，再根据对角线A1C1、B1D1、A2C2和B2D2计算副图的缩放比例，接着将副图按计算的缩放比例进行缩放，然后根据对角线A1C1和A2C2以及B1D1：B2D2在原始图像坐标系中的夹角计算副图的旋转角度；步骤五：先选取副图中主图没有覆盖的区域作为副图参与拼接的部分，再将副图参与拼接的部分按步骤四中的旋转角度进行旋转，并与主图进行拼接，完成山区茶园低空图像拼接。进一步改进在于：所述步骤一中，所述对图像的预处理具体步骤为：先对图像进行边缘检测处理，再对图像进行均衡化处理，接着对均衡化处理后的图像进行降噪处理，最后得到预处理后的山区茶园低空原始图像。进一步改进在于：所述步骤二中，所述阈值分割的具体步骤为，先以待拼接的原始图像的R+G+B亮度特征作为分割特征，再用OSTU法确定阈值，然后采用阈值分割将待拼接的原始图像分割为二值图像。进一步改进在于：所述步骤三中，提取主图和副图上的四边形参照物角点坐标时，主图的四边形参照物四个角点以左上角为A1点，顺时针依次提取坐标为A1、B1、C1和D1，副图上的四边形参照物四个角点以左上角为A2点，顺时针依次提取坐标为A2、B2、C2和D2。进一步改进在于：所述步骤四中，计算副图的缩放比例时，先分别计算对角线A1C1、B1D1、A2C2和B2D2的长度，再以A1C1：A2C2和B1D1：B2D2的平均值作为副图的缩放比例。进一步改进在于：所述步骤四中，计算副图的旋转角度时，先以A1C1和A2C2在图像坐标系中的夹角为θ1，再以B1D1：B2D2在图像坐标系中的夹角为θ2，然后以θ1和θ2的平均值作为副图的旋转角度。进一步改进在于：所述步骤五中，若副图视野在左则选择旋转后图像最左边到A1点的区域作为副图参与拼接的部分，若副图视野在右则选择旋转后图像最右边到C1点的区域作为副图参与拼接的部分。本发明的有益效果为：本发明从农业作业的角度出发，以山区茶园作业的起始点作为参照物进行低空图像的拼接，并在拼接过程中对图像进行二值化分割，对作业起始点进行角点坐标提取，计算副图缩放比例和旋转角度，以此提取副图中主图未覆盖的区域并与主图完成拼接，避免了特征点选择错误所引起的误差，所得到的拼接图像以山区茶园作业起始点为起点，解决了传统山区茶园图像采集中图像覆盖范围不足的问题，在保持图像质量的同时还保证了图像的覆盖范围相对较大，相对传统拼接方法，拼接后的图像更利于后续茶园作业区域的确定。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1是本发明实施例一中的方法流程示意图；图2是本发明实施例二中的主图和副图对比示意图；图3是本发明实施例二中的二值化图像示意图；图4是本发明实施例二中主图和副图拼接后的示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例一参见图1、图2、图3、图4，本实施例提供了一种以四边形地块为参照物的山区茶园低空图像拼接方法，包括以下步骤：步骤一：先对无人飞行器上预设山区茶园的巡查区域，再启动无人飞行器对山区茶园进行飞行日常巡查，并在巡查区域对山区茶园进行低空图像采集，接着对采集的图像进行预处理，获得待拼接的原始图像，且原始图像中包含作为无人飞行器停机坪的四边形地块，对图像的预处理具体步骤为：先对图像进行边缘检测处理，再对图像进行均衡化处理，接着对均衡化处理后的图像进行降噪处理，最后得到预处理后的山区茶园低空原始图像；步骤二：先根据图像中道路长度将待拼接的原始图像分为主图和副图，再采取主图和副图的亮度特征并进行阈值分割，得到主图和副图的二值图像，在主图和副图的二值图像中确定四边形地块的白色区域作为四边形参照物，阈值分割的具体步骤为，先以待拼接的原始图像的R+G+B亮度特征作为分割特征，再用OSTU法确定阈值，然后采用阈值分割将待拼接的原始图像分割为二值图像；步骤三：先确定主图和副图的二值图像中四边形参照物的四个角点在原始图像中的像素点坐标，再根据确定的像素点坐标依次提取主图上的四边形参照物四个角点A1、B1、C1和D1以及副图上的四边形参照物四个角点A2、B2、C2和D2，提取主图和副图上的四边形参照物角点坐标时，主图的四边形参照物四个角点以左上角为A1点，顺时针依次提取坐标为A1、B1、C1和D1，副图上的四边形参照物四个角点以左上角为A2点，顺时针依次提取坐标为A2、B2、C2和D2；步骤四：先根据主图和副图上的四个角点分别获取主图上的四边形参照物对角线A1C1和B1D1以及副图上的四边形参照物对角线A2C2和B2D2，再根据对角线A1C1、B1D1、A2C2和B2D2计算副图的缩放比例，接着将副图按计算的缩放比例进行缩放，然后根据对角线A1C1和A2C2以及B1D1：B2D2在原始图像坐标系中的夹角计算副图的旋转角度，计算副图的缩放比例时，先分别计算对角线A1C1、B1D1、A2C2和B2D2的长度，再以A1C1：A2C2和B1D1：B2D2的平均值作为副图的缩放比例，计算副图的旋转角度时，先以A1C1和A2C2在图像坐标系中的夹角为θ1，再以B1D1：B2D2在图像坐标系中的夹角为θ2，然后以θ1和θ2的平均值作为副图的旋转角度；步骤五：先选取副图中主图没有覆盖的区域作为副图参与拼接的部分，若副图视野在左则选择旋转后图像最左边到A1点的区域作为副图参与拼接的部分，若副图视野在右则选择旋转后图像最右边到C1点的区域作为副图参与拼接的部分，再将副图参与拼接的部分按步骤四中的旋转角度进行旋转，并与主图进行拼接，完成山区茶园低空图像拼接。实施例二参见图1、图2、图3、图4，本实施例提供了一种以四边形地块为参照物的山区茶园低空图像拼接方法，包括以下步骤：步骤一：先对无人飞行器上预设山区茶园的巡查区域，再启动无人飞行器对山区茶园进行飞行日常巡查，并在巡查区域对山区茶园进行低空图像采集，接着对采集的图像进行预处理，获得待拼接的原始图像，且原始图像中包含作为无人飞行器停机坪的四边形地块，对图像的预处理具体步骤为：先通过空间域法对图像进行初次增强处理，在通过高通滤波器对图像进行二次增强处理，接着对图像进行均衡化处理，最后得到预处理后的山区茶园低空原始图像；步骤二：先根据图像中道路长度将待拼接的原始图像分为主图和副图，再采取主图和副图的亮度特征并进行阈值分割，得到主图和副图的二值图像，在主图和副图的二值图像中确定四边形地块的白色区域作为四边形参照物，阈值分割的具体步骤为，先以待拼接的原始图像的R+G+B亮度特征作为分割特征，再用OSTU法确定阈值，然后采用阈值分割将待拼接的原始图像分割为二值图像；步骤三：先确定主图和副图的二值图像中四边形参照物的四个角点在原始图像中的像素点坐标，再根据确定的像素点坐标依次提取主图上的四边形参照物四个角点A1、B1、C1和D1以及副图上的四边形参照物四个角点A2、B2、C2和D2，提取主图和副图上的四边形参照物角点坐标时，主图的四边形参照物四个角点以左上角为A1点，顺时针依次提取坐标为A1、B1、C1和D1，副图上的四边形参照物四个角点以左上角为A2点，顺时针依次提取坐标为A2、B2、C2和D2；步骤四：先根据主图和副图上的四个角点分别获取主图上的四边形参照物对角线A1C1和B1D1以及副图上的四边形参照物对角线A2C2和B2D2，再根据对角线A1C1、B1D1、A2C2和B2D2计算副图的缩放比例，接着将副图按计算的缩放比例进行缩放，然后根据对角线A1C1和A2C2以及B1D1：B2D2在原始图像坐标系中的夹角计算副图的旋转角度，计算副图的缩放比例时，先分别计算对角线A1C1、B1D1、A2C2和B2D2的长度，再以A1C1：A2C2和B1D1：B2D2的平均值作为副图的缩放比例，计算副图的旋转角度时，先以A1C1和A2C2在图像坐标系中的夹角为θ1，再以B1D1：B2D2在图像坐标系中的夹角为θ2，然后以θ1和θ2的平均值作为副图的旋转角度；步骤五：先选取副图中主图没有覆盖的区域作为副图参与拼接的部分，若副图视野在左则选择旋转后图像最左边到A1点的区域作为副图参与拼接的部分，若副图视野在右则选择旋转后图像最右边到C1点的区域作为副图参与拼接的部分，再将副图参与拼接的部分按步骤四中的旋转角度进行旋转，并与主图进行拼接，完成山区茶园低空图像拼接。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
