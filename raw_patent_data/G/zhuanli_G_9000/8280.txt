标题title
清洁机器人清洁区域规划系统及方法
摘要abst
本发明提供了一种清洁机器人清洁区域规划方法及系统，包括：利用图像处理模块识别目标物体的污渍，当未识别出污渍时，则将已清理完成指令发送至控制模块；当识别出污渍，则计算污渍的位置和个数，并将污渍的位置、个数以及未清理完成指令发送至污渍分块模块；污渍分块模块对接收到的污渍位置信息进行聚类分块，并对每个分块进行规则区域的生成，将表征规则区域的信息发送至控制模块；控制模块根据接收到的信息进行二次判断，当接收到的为已清理完成指令，则控制机器人准备进行下一步清理流程操作；当接收到的为未清理完成指令，则根据收到的表征规则区域信息对每个分块区域进行擦拭路径规划，并对所有分块区域块按擦拭路径进行依次遍历。
权利要求书clms
1.一种清洁机器人清洁区域规划方法，其特征在于，包括步骤S1：利用图像处理模块识别目标物体的污渍，当未识别出污渍时，则将已清理完成指令发送至控制模块；当识别出污渍，则计算污渍的位置和个数，并将污渍的位置、个数以及未清理完成指令发送至污渍分块模块；步骤S2：污渍分块模块对接收到的污渍位置信息进行聚类分块，并对每个分块进行规则区域的生成，将表征规则区域的信息发送至控制模块；步骤S3：控制模块根据接收到的信息进行二次判断，当接收到的为已清理完成指令，则控制机器人准备进行下一步清理流程操作；当接收到的为未清理完成指令，则根据收到的表征规则区域信息对每个分块区域进行擦拭路径规划，并对所有分块区域块按擦拭路径进行依次遍历。2.根据权利要求1所述的清洁机器人清洁区域规划方法，其特征在于，所述步骤S1采用：步骤S1.1：利用RGBD深度相机视觉识别模块采集清洁过后的物体图像，并利用中值滤波进行预处理操作，得到预处理后的物体图像；步骤S1.2：识别预处理后的物体图像中的污渍，当未识别出污渍，则将已清洁完成指令发送至控制模块；当识别出污渍，则利用自适应阈值分割算法分割出污渍区域；利用图像的连通域算法对污渍的位置和个数进行统计，并将污渍位置信息、个数以及未清洁完成指令发送至污渍分块模块。3.根据权利要求1所述的清洁机器人清洁区域规划方法，其特征在于，所述步骤S2采用：步骤S2.1：清洁机器人在进行清洁的过程中，夹具的尺寸决定了机器人在某个位置点与打扫物体表面的最大接触区域的直径，将夹具尺寸设置为污渍位置距离分割阈值，并按当前阈值对识别出的污渍位置点进行聚类，确保每个分块区域的最大距离不超过当前阈值t；步骤S2.2：对每个分块区域三维位置点坐标进行平面拟合，计算法向量；根据法向量将分块区域中的污渍点投影到法向量平面；在当前法向量平面所在的二维空间中，先求出轮廓点集的凸包，然后利用旋转卡尺算法求出凸包的最小外接矩形，将最小外接矩形的4个角点再次逆投影至三维空间中，并将每个区域块的4个角点发送至控制模块。4.根据权利要求3所述的清洁机器人清洁区域规划方法，其特征在于，所述步骤S2.1采用：步骤S2.1.1：将污渍坐标点中的随机一个点作为起始点，并起始点存放在栈m中；步骤S2.1.2：遍历其余所有污渍坐标点并依次与起始点计算欧式距离dist，并将欧式距离dist小于等于阈值t的污渍坐标点保存在与起始点相同的分块区域中；步骤S2.1.3：在剩余污渍坐标点中随机选择一个点作为起始点，并将起始点存放在m栈中；重复触发步骤S2.1.2至步骤S2.1.3，直至无责坐标点均遍历结束后，污渍坐标点分块完成；所述栈m用于存储每个分块区域的起始点，栈m中元素的个数决定了最终的区域的分块数目；所述步骤S2.1.2采用：其中，起始点p1；污渍坐标点集中的某个点p2。5.根据权利要求1所述的清洁机器人清洁区域规划方法，其特征在于，所述步骤S3采用：当接收到的信息状态为识别出污渍，并接受了污渍点的三维位置信息，则对于每个分块区域进行S区域轨迹规划，并对所有的区域块进行S型遍历。6.一种清洁机器人清洁区域规划系统，其特征在于，包括图像处理模块：识别目标物体的污渍，当未识别出污渍时，则将已清理完成指令发送至控制模块；当识别出污渍，则计算污渍的位置和个数，并将污渍的位置、个数以及未清理完成指令发送至污渍分块模块；污渍分块模块：对接收到的污渍位置信息进行聚类分块，并对每个分块进行规则区域的生成，将表征规则区域的信息发送至控制模块；控制模块：根据接收到的信息进行二次判断，当接收到的为已清理完成指令，则控制机器人准备进行下一步清理流程操作；当接收到的为未清理完成指令，则根据收到的表征规则区域信息对每个分块区域进行擦拭路径规划，并对所有分块区域块按擦拭路径进行依次遍历。7.根据权利要求6所述的清洁机器人清洁区域规划系统，其特征在于，在所述图像处理模块中：模块M1：利用RGBD深度相机视觉识别模块采集清洁过后的物体图像，并利用中值滤波进行预处理操作，得到预处理后的物体图像；模块M2：识别预处理后的物体图像中的污渍，当未识别出污渍，则将已清洁完成指令发送至控制模块；当识别出污渍，则利用自适应阈值分割算法分割出污渍区域；利用图像的连通域算法对污渍的位置和个数进行统计，并将污渍位置信息、个数以及未清洁完成指令发送至污渍分块模块。8.根据权利要求6所述的清洁机器人清洁区域规划系统，其特征在于，在所述污渍分块模块中：模块M3：清洁机器人在进行清洁的过程中，夹具的尺寸决定了机器人在某个位置点与打扫物体表面的最大接触区域的直径，将夹具尺寸设置为污渍位置距离分割阈值，并按当前阈值对识别出的污渍位置点进行聚类，确保每个分块区域的最大距离不超过当前阈值t；模块M4：对每个分块区域三维位置点坐标进行平面拟合，计算法向量；根据法向量将分块区域中的污渍点投影到法向量平面；在当前法向量平面所在的二维空间中，先求出轮廓点集的凸包，然后利用旋转卡尺算法求出凸包的最小外接矩形，将最小外接矩形的4个角点再次逆投影至三维空间中，并将每个区域块的4个角点发送至控制模块。9.根据权利要求8所述的清洁机器人清洁区域规划系统，其特征在于，所述模块M3.1采用：模块M3.1.1：将污渍坐标点中的随机一个点作为起始点，并起始点存放在栈m中；模块M3.1.2：遍历其余所有污渍坐标点并依次与起始点计算欧式距离dist，并将欧式距离dist小于等于阈值t的污渍坐标点保存在与起始点相同的分块区域中；模块M3.1.3：在剩余污渍坐标点中随机选择一个点作为起始点，并将起始点存放在m栈中；重复触发模块M3.1.2至模块M3.1.3，直至无责坐标点均遍历结束后，污渍坐标点分块完成；所述栈m用于存储每个分块区域的起始点，栈m中元素的个数决定了最终的区域的分块数目。所述模块M3.1.2采用：其中，起始点p1；污渍坐标点集中的某个点p2。10.根据权利要求6所述的清洁机器人清洁区域规划系统，其特征在于，在所示控制模块中：当接收到的信息状态为识别出污渍，并接受了污渍点的三维位置信息，则对于每个分块区域进行S区域轨迹规划，并对所有的区域块进行S型遍历。
说明书desc
技术领域本发明涉及图像处理技术领域，具体地，涉及清洁机器人清洁区域规划系统及方法。背景技术随着现代文明的提高、经济的高速发展和人们生活水平的提高，酒店智能清洁人已经逐步进入大众视野中，而且其发展趋势也越来越快。目前，酒店客房的打扫主要还是采用人工方式来完成的，清洁过程缓慢，而且成本相对较高，并且现在进入酒店使用的机器人功能主要以配送为主。目前清洁机器人主要存在以下两大问题：第一：清洁度不高，打扫不彻底；第二：打扫效率慢。针对于视觉识别出的污渍点，如果高效精确的返回给机器人的控制模块从而提高机器人的二次打扫效率一直是一个问题。专利文献CN112388631A公开了一种机器人清洁规划区域的方法及装置，其中该方法包括：按照预设规则将待清洁区域划分为多个子区域；当所述子区域中存在符合第一预设条件的目标子区域时，自动将所述目标子区域与所述目标子区域相邻的子区域进行合并；控制机器人对合并后的子区域进行清洁。由此，减少了需要机器人单独处理的子区域的数量，可以有效提升机器人的作业效率。发明内容针对现有技术中的缺陷，本发明的目的是提供一种清洁机器人清洁区域规划方法及系统。根据本发明提供的一种清洁机器人清洁区域规划方法，包括步骤S1：利用图像处理模块识别目标物体的污渍，当未识别出污渍时，则将已清理完成指令发送至控制模块；当识别出污渍，则计算污渍的位置和个数，并将污渍的位置、个数以及未清理完成指令发送至污渍分块模块；步骤S2：污渍分块模块对接收到的污渍位置信息进行聚类分块，并对每个分块进行规则区域的生成，将表征规则区域的信息发送至控制模块；步骤S3：控制模块根据接收到的信息进行二次判断，当接收到的为已清理完成指令，则控制机器人准备进行下一步清理流程操作；当接收到的为未清理完成指令，则根据收到的表征规则区域信息对每个分块区域进行擦拭路径规划，并对所有分块区域块按擦拭路径进行依次遍历。优选地，所述步骤S1采用：步骤S1.1：利用RGBD深度相机视觉识别模块采集清洁过后的物体图像，并利用中值滤波进行预处理操作，得到预处理后的物体图像；步骤S1.2：识别预处理后的物体图像中的污渍，当未识别出污渍，则将已清洁完成指令发送至控制模块；当识别出污渍，则利用自适应阈值分割算法分割出污渍区域；利用图像的连通域算法对污渍的位置和个数进行统计，并将污渍位置信息、个数以及未清洁完成指令发送至污渍分块模块。优选地，所述步骤S2采用：步骤S2.1：清洁机器人在进行清洁的过程中，夹具的尺寸决定了机器人在某个位置点与打扫物体表面的最大接触区域的直径，将夹具尺寸设置为污渍位置距离分割阈值，并按当前阈值对识别出的污渍位置点进行聚类，确保每个分块区域的最大距离不超过当前阈值t；步骤S2.2：对每个分块区域三维位置点坐标进行平面拟合，计算法向量；根据法向量将分块区域中的污渍点投影到法向量平面；在当前法向量平面所在的二维空间中，先求出轮廓点集的凸包，然后利用旋转卡尺算法求出凸包的最小外接矩形，将最小外接矩形的4个角点再次逆投影至三维空间中，并将每个区域块的4个角点发送至控制模块。优选地，所述步骤S2.1采用：步骤S2.1.1：将污渍坐标点中的随机一个点作为起始点，并起始点存放在栈m中；步骤S2.1.2：遍历其余所有污渍坐标点并依次与起始点计算欧式距离dist，并将欧式距离dist小于等于阈值t的污渍坐标点保存在与起始点相同的分块区域中；步骤S2.1.3：在剩余污渍坐标点中随机选择一个点作为起始点，并将起始点存放在m栈中；重复触发步骤S2.1.2至步骤S2.1.3，直至无责坐标点均遍历结束后，污渍坐标点分块完成；所述栈m用于存储每个分块区域的起始点，栈m中元素的个数决定了最终的区域的分块数目；所述步骤S2.1.2采用：其中，起始点p1；污渍坐标点集中的某个点p2。优选地，所述步骤S3采用：当接收到的信息状态为识别出污渍，并接受了污渍点的三维位置信息，则对于每个分块区域进行S区域轨迹规划，并对所有的区域块进行S型遍历。根据本发明提供的一种清洁机器人清洁区域规划系统，包括图像处理模块：识别目标物体的污渍，当未识别出污渍时，则将已清理完成指令发送至控制模块；当识别出污渍，则计算污渍的位置和个数，并将污渍的位置、个数以及未清理完成指令发送至污渍分块模块；污渍分块模块：对接收到的污渍位置信息进行聚类分块，并对每个分块进行规则区域的生成，将表征规则区域的信息发送至控制模块；控制模块：根据接收到的信息进行二次判断，当接收到的为已清理完成指令，则控制机器人准备进行下一步清理流程操作；当接收到的为未清理完成指令，则根据收到的表征规则区域信息对每个分块区域进行擦拭路径规划，并对所有分块区域块按擦拭路径进行依次遍历。优选地，在所述图像处理模块中：模块M1：利用RGBD深度相机视觉识别模块采集清洁过后的物体图像，并利用中值滤波进行预处理操作，得到预处理后的物体图像；模块M2：识别预处理后的物体图像中的污渍，当未识别出污渍，则将已清洁完成指令发送至控制模块；当识别出污渍，则利用自适应阈值分割算法分割出污渍区域；利用图像的连通域算法对污渍的位置和个数进行统计，并将污渍位置信息、个数以及未清洁完成指令发送至污渍分块模块。优选地，在所述污渍分块模块中：模块M3：清洁机器人在进行清洁的过程中，夹具的尺寸决定了机器人在某个位置点与打扫物体表面的最大接触区域的直径，将夹具尺寸设置为污渍位置距离分割阈值，并按当前阈值对识别出的污渍位置点进行聚类，确保每个分块区域的最大距离不超过当前阈值t；模块M4：对每个分块区域三维位置点坐标进行平面拟合，计算法向量；根据法向量将分块区域中的污渍点投影到法向量平面；在当前法向量平面所在的二维空间中，先求出轮廓点集的凸包，然后利用旋转卡尺算法求出凸包的最小外接矩形，将最小外接矩形的4个角点再次逆投影至三维空间中，并将每个区域块的4个角点发送至控制模块。优选地，所述模块M3.1采用：模块M3.1.1：将污渍坐标点中的随机一个点作为起始点，并起始点存放在栈m中；模块M3.1.2：遍历其余所有污渍坐标点并依次与起始点计算欧式距离dist，并将欧式距离dist小于等于阈值t的污渍坐标点保存在与起始点相同的分块区域中；模块M3.1.3：在剩余污渍坐标点中随机选择一个点作为起始点，并将起始点存放在m栈中；重复触发模块M3.1.2至模块M3.1.3，直至无责坐标点均遍历结束后，污渍坐标点分块完成；所述栈m用于存储每个分块区域的起始点，栈m中元素的个数决定了最终的区域的分块数目。所述模块M3.1.2采用：其中，起始点p1；污渍坐标点集中的某个点p2。优选地，在所示控制模块中：当接收到的信息状态为识别出污渍，并接受了污渍点的三维位置信息，则对于每个分块区域进行S区域轨迹规划，并对所有的区域块进行S型遍历。与现有技术相比，本发明具有如下的有益效果：1、本发明为机器人的二次清洁污渍点位信息提供了高效的反馈方案，优化了清洁轨迹流程，提高了机器人的打扫效率；2、本发明适用于任何平面场景，算法通用性高，鲁棒性强，可以应用于很多清洁打扫场景，为清洁智能化提供了良好的解决方案；3、污渍区域的最大区域生成操作，可以将不规则区域转换为规则区域，既提高了算法的复用性，也在很大程度上提高了流程的稳定性，从而提高部署效率。附图说明通过阅读参照以下附图对非限制性实施例所作的详细描述，本发明的其它特征、目的和优点将会变得更明显：图1为清洁区域规划系统流程图。图2为区域轨迹规划示意图。图3为凸集点分布示意图。具体实施方式下面结合具体实施例对本发明进行详细说明。以下实施例将有助于本领域的技术人员进一步理解本发明，但不以任何形式限制本发明。应当指出的是，对本领域的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干变化和改进。这些都属于本发明的保护范围。实施例1清洁机器人在打扫完后，为了提高清洁度，在进行复检过程中，利用视觉识别出污渍点位置，然后，利用距离阈值对污渍点进行快速分块操作，并在每个分块中进行最大区域生成操作并返回区域面的法向量，为机器人提供位姿信息，最后，对每个分块区域进行打扫路径规划，并对所有区域按“S”型路线进行遍历打扫，可有效避免机器人的重复路径，可以快速提高打扫效率。根据本发明提供的一种清洁机器人清洁区域规划方法，如图1所示，包括步骤S1：利用图像处理模块对清洁过后的目标物体进行污渍复检工作，根据污渍的识别情况判断是否再次开展清洁工作，当未识别出污渍时，则将已清理完成指令发送至控制模块；当识别出污渍，则将所有污渍的外围包围顶点以及未清理完成指令发送至污渍分块模块；步骤S2：污渍分块模块对接收到的三维坐标点数据进行距离聚类，并对聚类后的每个分块进行规则区域的生成，将表征每个区域块的特征信息发送至控制模块；步骤S3：控制模块根据接收到的信息进行二次判断，当接收到的为已清理完成指令，则控制机器人准备进行下一步清理流程操作；当接收到的为未清理完成指令，则根据收到的表征规则区域信息对每个分块区域进行擦拭路径规划，并对所有分块区域块按擦拭路径进行依次遍历。具体地，所述步骤S1采用：步骤S1.1：利用RGBD深度相机视觉识别模块采集清洁过后的物体图像，并利用中值滤波进行预处理操作，得到预处理后的物体图像，降低噪声对检测结果的影响；步骤S1.2：识别预处理后的物体图像中的污渍，当未识别出污渍，则将已清洁完成指令发送至控制模块；当识别出污渍，则利用自适应阈值分割算法分割出污渍区域；利用图像的连通域算法对污渍的位置和个数进行统计，并将污渍位置信息、个数以及未清洁完成指令发送至污渍分块模块。具体地，所述步骤S2采用：污渍分块模块接收到消息后，对接收到的污渍位置信息进行聚类分块，并对每个分块进行规则区域的生成，将表征规则区域的信息发送给控制模块。步骤S2.1：清洁机器人在进行清洁的过程中，夹具的尺寸决定了机器人在某个位置点与打扫物体表面的最大接触区域的直径，将夹具尺寸设置为污渍位置距离分割阈值，并按当前阈值对识别出的污渍位置点进行聚类，确保每个分块区域的最大距离不超过当前阈值t；步骤S2.2：对每个分块区域三维位置点坐标进行平面拟合，计算出其法向量；根据法向量将分块区域中的污渍点投影到法向量平面；在当前法向量平面所在的二维空间中，先求出轮廓点集的凸包，然后利用旋转卡尺算法求出凸包的最小外接矩形，将最小外接矩形的4个角点再次逆投影至三维空间中，并将每个区域块的4个角点发送至控制模块。具体地，所述步骤S2.1采用：步骤S2.1.1：将污渍坐标点中的随机一个点作为起始点，并起始点存放在栈m中；步骤S2.1.2：遍历其余所有污渍坐标点并依次与起始点计算欧式距离dist，并将欧式距离dist小于等于阈值t的污渍坐标点保存在与起始点相同的分块区域中；步骤S2.1.3：在剩余污渍坐标点中随机选择一个点作为起始点，并将起始点存放在m栈中；重复触发步骤S2.1.2至步骤S2.1.3，直至无责坐标点均遍历结束后，污渍坐标点分块完成；分块后的点集状态如图2所示的S1、S2、S3、S4以及S5；所述栈m用于存储每个分块区域的起始点，栈m中元素的个数决定了最终的区域的分块数目。具体地，所述步骤S2.1.2采用：其中，起始点p1；污渍坐标点集中的某个点p2。所述步骤S2.2采用：二维污渍点位置坐标凸包实现算法如下：步骤S2.2.1：把所有点放在二维坐标系中，则纵坐标最小的点一定为凸包上的点，如下图3的P0点；步骤S2.2.2：把所有点坐标平移一下，使P0作为原点；步骤S2.2.3：计算各个点相对于P0的幅角α，按从小到大的顺序对各个点排序。当α相同时，距离P0比较近的排在前面。凸包的第一个点P0和第二个点P1，将这两个点放在栈里面。然后把P1后面的点拿来当做当前点，即P2，然后开始找第三个点。步骤S2.2.4：连接P0和栈顶的那个点，得到直线L。看当前点是在直线L的右边还是左边，如果在左边则执行步骤S2.2.5；如果在直线上或者在直线左边则执行步骤S2.2.6。步骤S2.2.5：如果在右边，则栈顶那个元素不是凸包上的点，把栈顶元素出栈，执行步骤S2.2.4。步骤S2.2.6：当前点是凸包上的点，把它压入栈，执行步骤S2.2.7。步骤S2.2.7：检查当前的点P2是不是步骤S2.2.3那个结果的最后一个元素。是最后一个元素的话就结束。如果不是就把P2后面那个点当作当前点，返回步骤S2.2.4。步骤S2.2.8：最后栈中的元素就是凸包上的点了。凸包旋转卡壳算法：步骤S2.2.9：计算上述算法中凸包中点的四个多边形端点，称之为xminp,xmaxP,yminP,ymaxP.步骤S2.2.10：通过四个点构造P的四条切线，确定两个“卡壳”集合。步骤S2.2.11：如果一条线与一条边重合，那么计算由四条线决定的矩形的面积，并且把它设置为当前最小值。否则将当前最小值设置为无穷大。步骤S2.2.12：顺时间旋转线直到其中一条线与多边形的一条边重合。步骤S2.2.13：计算新矩形的面积，并且和当前最小值比较。如果小于当前最小值则更新，并保存最小矩形的信息。重复步骤步骤S2.2.12至步骤S2.2.13，直到线旋转过的角度大于90度。步骤S2.2.14：输出外接矩形的最小面积。具体地，所述步骤S3采用：当接收到的信息状态为识别出污渍，并接受了污渍点的三维位置信息，则对于每个分块区域进行S区域轨迹规划，并对所有的区域块进行S型遍历，可以减少轨迹的重复率，打打提高清洁效率，如图2所述。根据本发明提供的一种清洁机器人清洁区域规划系统，包括图像处理模块：对清洁过后的目标物体进行污渍复检工作，根据污渍的识别情况判断是否再次开展清洁工作，当未识别出污渍时，则将已清理完成指令发送至控制模块；当识别出污渍，则将所有污渍的外围包围顶点以及未清理完成指令发送至污渍分块模块；污渍分块模块：对接收到的三维坐标点数据进行距离聚类，并对聚类后的每个分块进行规则区域的生成，将表征每个区域块的特征信息发送至控制模块；控制模块：根据接收到的信息进行二次判断，当接收到的为已清理完成指令，则控制机器人准备进行下一步清理流程操作；当接收到的为未清理完成指令，则根据收到的表征规则区域信息对每个分块区域进行擦拭路径规划，并对所有分块区域块按擦拭路径进行依次遍历。具体地，所述图像处理模块采用：模块M1：利用RGBD深度相机视觉识别模块采集清洁过后的物体图像，并利用中值滤波进行预处理操作，得到预处理后的物体图像，降低噪声对检测结果的影响；模块M2：识别预处理后的物体图像中的污渍，当未识别出污渍，则将已清洁完成指令发送至控制模块；当识别出污渍，则利用自适应阈值分割算法分割出污渍区域；利用图像的连通域算法对污渍的位置和个数进行统计，并将污渍位置信息、个数以及未清洁完成指令发送至污渍分块模块。具体地，所述污渍分块模块采用：接收到消息后，对接收到的污渍位置信息进行聚类分块，并对每个分块进行规则区域的生成，将表征规则区域的信息发送给控制模块。模块M3：清洁机器人在进行清洁的过程中，夹具的尺寸决定了机器人在某个位置点与打扫物体表面的最大接触区域的直径，将夹具尺寸设置为污渍位置距离分割阈值，并按当前阈值对识别出的污渍位置点进行聚类，确保每个分块区域的最大距离不超过当前阈值t；模块M4：对每个分块区域三维位置点坐标进行平面拟合，计算出其法向量；根据法向量将分块区域中的污渍点投影到法向量平面；在当前法向量平面所在的二维空间中，先求出轮廓点集的凸包，然后利用旋转卡尺算法求出凸包的最小外接矩形，将最小外接矩形的4个角点再次逆投影至三维空间中，并将每个区域块的4个角点发送至控制模块。具体地，所述模块M3采用：模块M3.1：将污渍坐标点中的随机一个点作为起始点，并起始点存放在栈m中；模块M3.2：遍历其余所有污渍坐标点并依次与起始点计算欧式距离dist，并将欧式距离dist小于等于阈值t的污渍坐标点保存在与起始点相同的分块区域中；模块M3.3：在剩余污渍坐标点中随机选择一个点作为起始点，并将起始点存放在m栈中；重复触发模块M3.2至模块M3.3，直至无责坐标点均遍历结束后，污渍坐标点分块完成；分块后的点集状态如图2所示的S1、S2、S3、S4以及S5；所述栈m用于存储每个分块区域的起始点，栈m中元素的个数决定了最终的区域的分块数目。具体地，所述模块M3.2采用：其中，起始点p1；污渍坐标点集中的某个点p2。在所述模块M4中：二维污渍点位置坐标凸包实现算法如下：模块M4.1：把所有点放在二维坐标系中，则纵坐标最小的点一定为凸包上的点，如下图3的P0点；模块M4.2：把所有点坐标平移一下，使P0作为原点；模块M4.3：计算各个点相对于P0的幅角α，按从小到大的顺序对各个点排序。当α相同时，距离P0比较近的排在前面。凸包的第一个点P0和第二个点P1，将这两个点放在栈里面。然后把P1后面的点拿来当做当前点，即P2，然后开始找第三个点。模块M4.4：连接P0和栈顶的那个点，得到直线L。看当前点是在直线L的右边还是左边，如果在左边则触发模块M4.5；如果在直线上或者在直线左边则触发模块M4.6。模块M4.5：如果在右边，则栈顶那个元素不是凸包上的点，把栈顶元素出栈，触发模块M4.4。模块M4.6：当前点是凸包上的点，把它压入栈，触发模块M4.7。模块M4.7：检查当前的点P2是不是模块M4.3那个结果的最后一个元素。是最后一个元素的话就结束。如果不是就把P2后面那个点当作当前点，返回触发模块M4.4。模块M4.8：最后栈中的元素就是凸包上的点了。凸包旋转卡壳算法：模块M4.9：计算上述算法中凸包中点的四个多边形端点，称之为xminp,xmaxP,yminP,ymaxP；模块M4.10：通过四个点构造P的四条切线，确定两个“卡壳”集合。模块M4.11：如果一条线与一条边重合，那么计算由四条线决定的矩形的面积，并且把它设置为当前最小值。否则将当前最小值设置为无穷大。模块M4.12：顺时间旋转线直到其中一条线与多边形的一条边重合。模块M4.13：计算新矩形的面积，并且和当前最小值比较。如果小于当前最小值则更新，并保存最小矩形的信息。重复步骤模块M4.12至模块M4.13，直到线旋转过的角度大于90度。模块M4.14：输出外接矩形的最小面积。具体地，在所述控制模块中：当接收到的信息状态为识别出污渍，并接受了污渍点的三维位置信息，则对于每个分块区域进行S区域轨迹规划，并对所有的区域块进行S型遍历，可以减少轨迹的重复率，打打提高清洁效率，如图2所述。本领域技术人员知道，除了以纯计算机可读程序代码方式实现本发明提供的系统、装置及其各个模块以外，完全可以通过将方法步骤进行逻辑编程来使得本发明提供的系统、装置及其各个模块以逻辑门、开关、专用集成电路、可编程逻辑控制器以及嵌入式微控制器等的形式来实现相同程序。所以，本发明提供的系统、装置及其各个模块可以被认为是一种硬件部件，而对其内包括的用于实现各种程序的模块也可以视为硬件部件内的结构；也可以将用于实现各种功能的模块视为既可以是实现方法的软件程序又可以是硬件部件内的结构。以上对本发明的具体实施例进行了描述。需要理解的是，本发明并不局限于上述特定实施方式，本领域技术人员可以在权利要求的范围内做出各种变化或修改，这并不影响本发明的实质内容。在不冲突的情况下，本申请的实施例和实施例中的特征可以任意相互组合。
