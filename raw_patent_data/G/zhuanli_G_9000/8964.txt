标题title
一种具有烟雾浓度调控能力的智能电子烟及其使用方法
摘要abst
本申请揭示了一种具有烟雾浓度调控能力的智能电子烟及其使用方法，包括雾化器、近距离通信模块、红外线感测模块、声音采集模块、电池模块和控制芯片，控制芯片被配置为构建第一近距离通信网络，获取第一通信数据；得到环境红外线数据；得到对应于多个第一温度区域的多个第一环境红外线数据，同时得到对应于多个第二温度区域的多个第二环境红外线数据；得到环境声音数据；提取出多个第一抽烟声音数据，同时提取出多个第二抽烟声音数据；进行数据绑定处理，得到第一绑定数据集合；输入烟雾浓度预测模型中进行处理，以得到预测烟雾浓度；若预测烟雾浓度大于烟雾浓度阈值，则向至少一个电子烟发送关闭请求，实现了烟雾浓度调控。
权利要求书clms
1.一种具有烟雾浓度调控能力的智能电子烟，其特征在于，包括：雾化器、近距离通信模块、红外线感测模块、声音采集模块、电池模块和控制芯片；近距离通信模块、雾化器、红外线感测模块、声音采集模块和控制芯片分别与电池模块电连接；近距离通信模块、雾化器、红外线感测模块和声音采集模块分别与控制芯片通信连接；雾化器用于雾化烟油；近距离通信模块用于与其他的电子烟进行通信；红外线感测模块用于感测环境红外线数据；声音采集模块用于采集环境声音；电池模块用于向近距离通信模块、雾化器、红外线感测模块、控制芯片和声音采集模块供电；控制芯片被配置为：当智能电子烟的雾化器启动时，控制近距离通信模块开启，以与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据；其中，所述第一通信数据至少包括电子烟的雾化器型号；控制红外线感测模块开启，以在第一时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；对环境红外线数据进行温度筛选处理，以得到对应于多个第一温度区域的多个第一环境红外线数据，同时得到对应于多个第二温度区域的多个第二环境红外线数据；其中，第一温度区域指温度大于预设的第一温度阈值但小于预设的第二温度阈值的区域，第二温度区域指温度大于第二温度阈值的区域；控制声音采集模块开启，以在第一时间窗口内进行声音数据采集，从而得到环境声音数据；将环境声音数据与预存的抽烟声音数据进行比对，以从环境声音数据中提取出对应于多个第一温度区域的多个第一抽烟声音数据，同时提取出对应于多个第二温度区域的多个第二抽烟声音数据；进行数据绑定处理，以将处于同一个温度区域中的抽烟声音数据与环境红外线数据进行绑定，从而得到第一绑定数据集合；将所述第一通信数据和所述第一绑定数据集合输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；其中，所述烟雾浓度预测模型基于神经网络模型，并根据预设的样本数据采用有监督训练学习的方式训练得到；判断所述预测烟雾浓度是否大于预设的烟雾浓度阈值；若所述预测烟雾浓度大于预设的烟雾浓度阈值，则通过所述第一近距离通信网络向至少一个电子烟发送关闭请求，以要求接收到关闭请求的电子烟关闭雾化器。2.根据权利要求1所述的具有烟雾浓度调控能力的智能电子烟，其特征在于，所述近距离通信模块为蓝牙通信模块，所述第一近距离通信网络为蓝牙通信网络。3.根据权利要求2所述的具有烟雾浓度调控能力的智能电子烟，其特征在于，所述当智能电子烟的雾化器启动时，控制近距离通信模块开启，以与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据，包括：当智能电子烟的雾化器启动时，控制蓝牙通信模块开启，并减小蓝牙通信模块的功率，以使得蓝牙通信模块的通信距离为预设距离；与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据。4.根据权利要求1所述的具有烟雾浓度调控能力的智能电子烟，其特征在于，所述烟雾浓度预测模型训练时采用的样本数据的获取过程，包括：在预设的存在有多个正在工作的电子烟和多个点燃的真实烟的建筑物中，样本电子烟控制近距离通信模块开启，以与通信范围内的其他电子烟构建第二近距离通信网络，从而获取其他电子烟发送的第二通信数据；其中，所述第二通信数据至少包括电子烟的雾化器型号，多个正在工作的电子烟和多个点燃的真实烟分别对应于不同的持有者；样本电子烟控制红外线感测模块开启，以在第二时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；其中，第二时间窗口的宽度与第一时间窗口的宽度相同；样本电子烟对采集到的环境红外线数据进行温度筛选处理，以得到对应于多个一号温度区域的多个一号环境红外线数据，同时得到对应于多个二号温度区域的多个二号环境红外线数据；其中，一号温度区域指温度大于预设的第一温度阈值但小于预设的第二温度阈值的区域，二号温度区域指温度大于第二温度阈值的区域；样本电子烟控制声音采集模块开启，以在第二时间窗口内进行声音数据采集，从而得到环境声音数据；样本电子烟将采集到的环境声音数据与预存的抽烟声音数据进行比对，以提取出对应于多个一号温度区域的多个一号抽烟声音数据，同时提取出对应于多个二号温度区域的多个二号抽烟声音数据；样本电子烟进行数据绑定处理，以将处于同一个温度区域中的抽烟声音数据与环境红外线数据进行绑定，从而得到第二绑定数据集合；样本电子烟采用设置于所述建筑物的顶部的摄像头，对样本电子烟所处环境进行图像采集处理，以得到顶部图像；样本电子烟将所述顶部图像输入预设的烟雾浓度识别模型中进行处理，以得到所述烟雾浓度识别模型输出的浓度值；其中，所述烟雾浓度识别模型基于深度卷积神经网络模型训练而成；样本电子烟对所述第二通信数据和所述第二绑定数据集合进行标记处理，以标记上所述浓度值，从而得到一个样本数据；多次修改所述建筑物中多个正在工作的电子烟的数量和/或多个点燃的真实烟的数量，并依次进行通信数据获取、环境红外线数据采集、温度筛选处理、声音数据采集、抽烟声音数据提取、数据绑定处理、图像采集处理、浓度值生成处理和标记处理，从而对应得到多个样本数据。5.根据权利要求4所述的具有烟雾浓度调控能力的智能电子烟，其特征在于，所述将所述第一通信数据和所述第一绑定数据集合输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；其中，所述烟雾浓度预测模型基于神经网络模型，并根据预设的样本数据采用有监督训练学习的方式训练得到之前，包括：对多个样本数据按预设比例进行划分处理，以得到多个训练数据和多个验证数据；调取预设的神经网络模型，并将所述多个训练数据输入所述神经网络模型中进行训练，以得到初步烟雾浓度预测模型；其中，初步烟雾浓度预测模型的训练过程中采用反向传播算法进行各层网络的参数的更新；采用所述多个验证数据对所述初步烟雾浓度预测模型进行验证处理，并判断验证处理得到的结果是否为验证通过；若验证处理得到的结果为验证通过，则将所述初步烟雾浓度预测模型作为最终的烟雾浓度预测模型。6.根据权利要求1所述的具有烟雾浓度调控能力的智能电子烟，其特征在于，智能电子烟还包括风速传感器；所述判断所述预测烟雾浓度是否大于预设的烟雾浓度阈值之前，包括：通过所述风速传感器，获取环境风速；根据所述第一通信数据，获取电子烟的数量，并判断电子烟的数量是否等于所述多个第一温度区域的数量；若电子烟的数量是否等于所述多个第一温度区域的数量，则根据所述环境红外线数据，获取环境人数；调取预设的环境风速、人数与浓度阈值的对应关系表，并根据所述对应关系表，获取与环境风速、环境人数对应的烟雾浓度阈值。7.一种具有烟雾浓度调控能力的智能电子烟的使用方法，所述智能电子烟为如权利要求1-6中任一项所述的智能电子烟，所述使用方法包括：智能电子烟的持有者开启雾化器后，控制芯片控制近距离通信模块开启，以与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据；其中，所述第一通信数据至少包括电子烟的雾化器型号；控制红外线感测模块开启，以在第一时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；对环境红外线数据进行温度筛选处理，以得到对应于多个第一温度区域的多个第一环境红外线数据，同时得到对应于多个第二温度区域的多个第二环境红外线数据；其中，第一温度区域指温度大于预设的第一温度阈值但小于预设的第二温度阈值的区域，第二温度区域指温度大于第二温度阈值的区域；控制声音采集模块开启，以在第一时间窗口内进行声音数据采集，从而得到环境声音数据；将环境声音数据与预存的抽烟声音数据进行比对，以从环境声音数据中提取出对应于多个第一温度区域的多个第一抽烟声音数据，同时提取出对应于多个第二温度区域的多个第二抽烟声音数据；进行数据绑定处理，以将处于同一个温度区域中的抽烟声音数据与环境红外线数据进行绑定，从而得到第一绑定数据集合；将所述第一通信数据和所述第一绑定数据集合输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；其中，所述烟雾浓度预测模型基于神经网络模型，并根据预设的样本数据采用有监督训练学习的方式训练得到；判断所述预测烟雾浓度是否大于预设的烟雾浓度阈值；若所述预测烟雾浓度大于预设的烟雾浓度阈值，则通过所述第一近距离通信网络向至少一个电子烟发送关闭请求，以要求接收到关闭请求的电子烟关闭雾化器。
说明书desc
技术领域本申请涉及到电子烟领域，特别是涉及到一种具有烟雾浓度调控能力的智能电子烟及其使用方法。背景技术电子烟作为香烟的替代品，具有其独特的优点，但是无论电子烟还是香烟，其在使用过程中同样会产生二手烟，而二手烟的浓度显然不适宜过高。要控制二手烟的烟雾浓度，首先要确定当前的烟雾浓度值，而现有的识别烟雾浓度值的方案，一般是通过烟雾全景的图片，利用烟雾浓度识别模型确定烟雾浓度值。但是这种现有方案，前提是具有烟雾全景图片，而电子烟上不适宜设置摄像头，因此现有技术缺少有效识别烟雾浓度，进而进行烟雾浓度调控的智能电子烟。发明内容本申请的主要目的为提供一种具有烟雾浓度调控能力的智能电子烟，包括：雾化器、近距离通信模块、红外线感测模块、声音采集模块、电池模块和控制芯片；近距离通信模块、雾化器、红外线感测模块、声音采集模块和控制芯片分别与电池模块电连接；近距离通信模块、雾化器、红外线感测模块和声音采集模块分别与控制芯片通信连接；雾化器用于雾化烟油；近距离通信模块用于与其他的电子烟进行通信；红外线感测模块用于感测环境红外线数据；声音采集模块用于采集环境声音；电池模块用于向近距离通信模块、雾化器、红外线感测模块、控制芯片和声音采集模块供电；控制芯片被配置为：当智能电子烟的雾化器启动时，控制近距离通信模块开启，以与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据；其中，所述第一通信数据至少包括电子烟的雾化器型号；控制红外线感测模块开启，以在第一时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；对环境红外线数据进行温度筛选处理，以得到对应于多个第一温度区域的多个第一环境红外线数据，同时得到对应于多个第二温度区域的多个第二环境红外线数据；其中，第一温度区域指温度大于预设的第一温度阈值但小于预设的第二温度阈值的区域，第二温度区域指温度大于第二温度阈值的区域；控制声音采集模块开启，以在第一时间窗口内进行声音数据采集，从而得到环境声音数据；将环境声音数据与预存的抽烟声音数据进行比对，以从环境声音数据中提取出对应于多个第一温度区域的多个第一抽烟声音数据，同时提取出对应于多个第二温度区域的多个第二抽烟声音数据；进行数据绑定处理，以将处于同一个温度区域中的抽烟声音数据与环境红外线数据进行绑定，从而得到第一绑定数据集合；将所述第一通信数据和所述第一绑定数据集合输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；其中，所述烟雾浓度预测模型基于神经网络模型，并根据预设的样本数据采用有监督训练学习的方式训练得到；判断所述预测烟雾浓度是否大于预设的烟雾浓度阈值；若所述预测烟雾浓度大于预设的烟雾浓度阈值，则通过所述第一近距离通信网络向至少一个电子烟发送关闭请求，以要求接收到关闭请求的电子烟关闭雾化器。进一步地，所述近距离通信模块为蓝牙通信模块，所述第一近距离通信网络为蓝牙通信网络。进一步地，所述当智能电子烟的雾化器启动时，控制近距离通信模块开启，以与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据，包括：当智能电子烟的雾化器启动时，控制蓝牙通信模块开启，并减小蓝牙通信模块的功率，以使得蓝牙通信模块的通信距离为预设距离；与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据。进一步地，所述烟雾浓度预测模型训练时采用的样本数据的获取过程，包括：在预设的存在有多个正在工作的电子烟和多个点燃的真实烟的建筑物中，样本电子烟控制近距离通信模块开启，以与通信范围内的其他电子烟构建第二近距离通信网络，从而获取其他电子烟发送的第二通信数据；其中，所述第二通信数据至少包括电子烟的雾化器型号，多个正在工作的电子烟和多个点燃的真实烟分别对应于不同的持有者；样本电子烟控制红外线感测模块开启，以在第二时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；其中，第二时间窗口的宽度与第一时间窗口的宽度相同；样本电子烟对采集到的环境红外线数据进行温度筛选处理，以得到对应于多个一号温度区域的多个一号环境红外线数据，同时得到对应于多个二号温度区域的多个二号环境红外线数据；其中，一号温度区域指温度大于预设的第一温度阈值但小于预设的第二温度阈值的区域，二号温度区域指温度大于第二温度阈值的区域；样本电子烟控制声音采集模块开启，以在第二时间窗口内进行声音数据采集，从而得到环境声音数据；样本电子烟将采集到的环境声音数据与预存的抽烟声音数据进行比对，以提取出对应于多个一号温度区域的多个一号抽烟声音数据，同时提取出对应于多个二号温度区域的多个二号抽烟声音数据；样本电子烟进行数据绑定处理，以将处于同一个温度区域中的抽烟声音数据与环境红外线数据进行绑定，从而得到第二绑定数据集合；样本电子烟采用设置于所述建筑物的顶部的摄像头，对样本电子烟所处环境进行图像采集处理，以得到顶部图像；样本电子烟将所述顶部图像输入预设的烟雾浓度识别模型中进行处理，以得到所述烟雾浓度识别模型输出的浓度值；其中，所述烟雾浓度识别模型基于深度卷积神经网络模型训练而成；样本电子烟对所述第二通信数据和所述第二绑定数据集合进行标记处理，以标记上所述浓度值，从而得到一个样本数据；多次修改所述建筑物中多个正在工作的电子烟的数量和/或多个点燃的真实烟的数量，并依次进行通信数据获取、环境红外线数据采集、温度筛选处理、声音数据采集、抽烟声音数据提取、数据绑定处理、图像采集处理、浓度值生成处理和标记处理，从而对应得到多个样本数据。进一步地，所述将所述第一通信数据和所述第一绑定数据集合输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；其中，所述烟雾浓度预测模型基于神经网络模型，并根据预设的样本数据采用有监督训练学习的方式训练得到之前，包括：对多个样本数据按预设比例进行划分处理，以得到多个训练数据和多个验证数据；调取预设的神经网络模型，并将所述多个训练数据输入所述神经网络模型中进行训练，以得到初步烟雾浓度预测模型；其中，初步烟雾浓度预测模型的训练过程中采用反向传播算法进行各层网络的参数的更新；采用所述多个验证数据对所述初步烟雾浓度预测模型进行验证处理，并判断验证处理得到的结果是否为验证通过；若验证处理得到的结果为验证通过，则将所述初步烟雾浓度预测模型作为最终的烟雾浓度预测模型。进一步地，智能电子烟还包括风速传感器；所述判断所述预测烟雾浓度是否大于预设的烟雾浓度阈值之前，包括：通过所述风速传感器，获取环境风速；根据所述第一通信数据，获取电子烟的数量，并判断电子烟的数量是否等于所述多个第一温度区域的数量；若电子烟的数量是否等于所述多个第一温度区域的数量，则根据所述环境红外线数据，获取环境人数；调取预设的环境风速、人数与浓度阈值的对应关系表，并根据所述对应关系表，获取与环境风速、环境人数对应的烟雾浓度阈值。本申请提供一种具有烟雾浓度调控能力的智能电子烟的使用方法，所述智能电子烟为如前所述的智能电子烟，所述使用方法包括：智能电子烟的持有者开启雾化器后，控制芯片控制近距离通信模块开启，以与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据；其中，所述第一通信数据至少包括电子烟的雾化器型号；控制红外线感测模块开启，以在第一时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；对环境红外线数据进行温度筛选处理，以得到对应于多个第一温度区域的多个第一环境红外线数据，同时得到对应于多个第二温度区域的多个第二环境红外线数据；其中，第一温度区域指温度大于预设的第一温度阈值但小于预设的第二温度阈值的区域，第二温度区域指温度大于第二温度阈值的区域；控制声音采集模块开启，以在第一时间窗口内进行声音数据采集，从而得到环境声音数据；将环境声音数据与预存的抽烟声音数据进行比对，以从环境声音数据中提取出对应于多个第一温度区域的多个第一抽烟声音数据，同时提取出对应于多个第二温度区域的多个第二抽烟声音数据；进行数据绑定处理，以将处于同一个温度区域中的抽烟声音数据与环境红外线数据进行绑定，从而得到第一绑定数据集合；将所述第一通信数据和所述第一绑定数据集合输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；其中，所述烟雾浓度预测模型基于神经网络模型，并根据预设的样本数据采用有监督训练学习的方式训练得到；判断所述预测烟雾浓度是否大于预设的烟雾浓度阈值；若所述预测烟雾浓度大于预设的烟雾浓度阈值，则通过所述第一近距离通信网络向至少一个电子烟发送关闭请求，以要求接收到关闭请求的电子烟关闭雾化器。本申请的具有烟雾浓度调控能力的智能电子烟及其使用方法，构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据；控制红外线感测模块开启，以在第一时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；得到对应于多个第一温度区域的多个第一环境红外线数据，同时得到对应于多个第二温度区域的多个第二环境红外线数据；得到环境声音数据；提取出对应于多个第一温度区域的多个第一抽烟声音数据，同时提取出对应于多个第二温度区域的多个第二抽烟声音数据；进行数据绑定处理，从而得到第一绑定数据集合；输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；若预测烟雾浓度大于烟雾浓度阈值，则通过所述第一近距离通信网络向至少一个电子烟发送关闭请求，实现了烟雾浓度调控。本申请可应用于任意场景，优选应用于存在多个电子烟与多个香烟同时被抽吸的场景。在存在多个电子烟与多个香烟同时被抽吸的场景中，现有技术更难识别出烟雾浓度，而本申请仍能够在这种场景中准确预测出烟雾浓度。本申请的优点至少包括：1、本申请适用于复杂场景，尤其适合于存在多个电子烟与多个香烟同时被抽吸的场景，因为在现实生活中，香烟仍被广泛使用，存在吸烟者聚在一块聊天的情况，这些吸烟者中可能有电子烟爱好者，也有香烟爱好者，因此会出现多个电子烟与多个香烟同时被抽吸的场景，此时电子烟对于烟雾浓度的影响与香烟对于烟雾浓度的影响不同，因此更难准确识别，但本申请能够准确预测出烟雾浓度。2、本申请采用近距离通信数据、红外线数据和声音数据的共同分析，以提高烟雾浓度识别的准确性，有利于烟雾浓度调控的执行。3、本申请对红外线数据和声音数据进行绑定处理，以实现数据粒度的细化，并将烟雾浓度贡献的因素空间化，从而利于烟雾浓度识别的准确性。4、本申请采用的烟雾浓度预测模型，无需现有的烟雾浓度识别模型需要输入的全景图片数据，但是可以将现有的烟雾浓度识别模型作为标注依据，从而免去了本申请的烟雾浓度预测模型的人工标注过程，实现了对现有模型的再次利用，并且提高了烟雾浓度预测模型的可信度。附图说明图1为本申请一实施例的具有烟雾浓度调控能力的智能电子烟的结构示意框图；图2为本申请一实施例的具有烟雾浓度调控能力的智能电子烟的使用方法的流程示意图；本申请目的的实现、功能特点及优点将结合实施例，参照附图做进一步说明。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。参照图1，本申请实施例提供一种具有烟雾浓度调控能力的智能电子烟，包括：雾化器、近距离通信模块、红外线感测模块、声音采集模块、电池模块和控制芯片；近距离通信模块、雾化器、红外线感测模块、声音采集模块和控制芯片分别与电池模块电连接；近距离通信模块、雾化器、红外线感测模块和声音采集模块分别与控制芯片通信连接；雾化器用于雾化烟油；近距离通信模块用于与其他的电子烟进行通信；红外线感测模块用于感测环境红外线数据；声音采集模块用于采集环境声音；电池模块用于向近距离通信模块、雾化器、红外线感测模块、控制芯片和声音采集模块供电；控制芯片被配置为：当智能电子烟的雾化器启动时，控制近距离通信模块开启，以与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据；其中，所述第一通信数据至少包括电子烟的雾化器型号；控制红外线感测模块开启，以在第一时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；对环境红外线数据进行温度筛选处理，以得到对应于多个第一温度区域的多个第一环境红外线数据，同时得到对应于多个第二温度区域的多个第二环境红外线数据；其中，第一温度区域指温度大于预设的第一温度阈值但小于预设的第二温度阈值的区域，第二温度区域指温度大于第二温度阈值的区域；控制声音采集模块开启，以在第一时间窗口内进行声音数据采集，从而得到环境声音数据；将环境声音数据与预存的抽烟声音数据进行比对，以从环境声音数据中提取出对应于多个第一温度区域的多个第一抽烟声音数据，同时提取出对应于多个第二温度区域的多个第二抽烟声音数据；进行数据绑定处理，以将处于同一个温度区域中的抽烟声音数据与环境红外线数据进行绑定，从而得到第一绑定数据集合；将所述第一通信数据和所述第一绑定数据集合输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；其中，所述烟雾浓度预测模型基于神经网络模型，并根据预设的样本数据采用有监督训练学习的方式训练得到；判断所述预测烟雾浓度是否大于预设的烟雾浓度阈值；若所述预测烟雾浓度大于预设的烟雾浓度阈值，则通过所述第一近距离通信网络向至少一个电子烟发送关闭请求，以要求接收到关闭请求的电子烟关闭雾化器。本申请的智能电子烟包括：雾化器、近距离通信模块、红外线感测模块、声音采集模块、电池模块和控制芯片。其中的包括并不意味着智能电子烟不能包括其他部件，例如本申请的智能电子烟还能够包括外壳、抽吸力度感应器和/或风速感应器等等。本申请的智能电子烟与传统的电子烟相比，具有的特点在于，智能电子烟具有烟雾浓度调控能力，并且是在具有烟雾浓度预测能力之下的烟雾浓度调控能力。另外，智能电子烟不适宜设置摄像头，其原因包括：1、出于个人隐私的考虑，智能电子烟上的摄像头容易拍摄到隐蔽位置；2、智能电子烟上纵使设置摄像头，以难以拍摄到全景图像，因此拍摄到的图像作为烟雾浓度的分析依据，准确性不高。近距离通信模块，是指采用近距离通信技术的模块，而近距离通信技术，例如为蓝牙通信技术等。本申请的近距离通信模块主要有两个作用，其一是确定对烟雾作出贡献的电子烟的数量及型号；其二是在确定烟雾浓度过高之后，进行近距离通信，以实现关闭部分电子烟的目的，从而降低烟雾浓度。红外线感测模块，能够感测环境的红外线数据，由于物体会自发向外界发送红外辐射，温度越高则红外辐射越强，而电子烟的雾化器温度可达200度，香烟烟头的温度可达1000度，因此首先红外线感测模块感测到的红外线数据，可以确定电子烟与香烟的数量与位置。其次，本申请将红外线数据用作烟雾浓度分析依据之一，还因为在抽吸的过程中，温度与烟雾的影响是正相关的，例如大力抽吸时电子烟时，会使雾化器温度更高，制造出更多烟雾，而对于香烟也是同理，香烟烟头的温度也会明显上升，同时制造出更多烟雾。声音采集模块，能够感测到环境声音数据，其也是确定烟雾浓度的依据之一。本申请将声音数据作为确定烟雾浓度的依据，是本申请的一个特点，这是因为抽吸电子烟或者香烟时，大力抽吸与自然燃烧生成的烟雾是不同的，而抽吸力度可以通过声音数据确定。另外，本申请中的红外线数据与声音数据并不是直接使用的，并且不是单独使用的，而是分别先进行筛选处理，再进一步进行数据绑定后，再能够作为一个整体使用，这使得单体电子烟或香烟的分析成为了可能，这也是本申请的一个特点。这将在后文结合具体细节进行介绍。控制芯片用于执行具体的烟雾浓度预测步骤以及烟雾浓度调控步骤。具体地：当智能电子烟的雾化器启动时，控制近距离通信模块开启，以与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据；其中，所述第一通信数据至少包括电子烟的雾化器型号；控制红外线感测模块开启，以在第一时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；对环境红外线数据进行温度筛选处理，以得到对应于多个第一温度区域的多个第一环境红外线数据，同时得到对应于多个第二温度区域的多个第二环境红外线数据；其中，第一温度区域指温度大于预设的第一温度阈值但小于预设的第二温度阈值的区域，第二温度区域指温度大于第二温度阈值的区域；控制声音采集模块开启，以在第一时间窗口内进行声音数据采集，从而得到环境声音数据；将环境声音数据与预存的抽烟声音数据进行比对，以从环境声音数据中提取出对应于多个第一温度区域的多个第一抽烟声音数据，同时提取出对应于多个第二温度区域的多个第二抽烟声音数据；进行数据绑定处理，以将处于同一个温度区域中的抽烟声音数据与环境红外线数据进行绑定，从而得到第一绑定数据集合；将所述第一通信数据和所述第一绑定数据集合输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；其中，所述烟雾浓度预测模型基于神经网络模型，并根据预设的样本数据采用有监督训练学习的方式训练得到；判断所述预测烟雾浓度是否大于预设的烟雾浓度阈值；若所述预测烟雾浓度大于预设的烟雾浓度阈值，则通过所述第一近距离通信网络向至少一个电子烟发送关闭请求，以要求接收到关闭请求的电子烟关闭雾化器。其中，智能电子烟中的近距离通信模块、红外线感测模块和声音采集模块等，均是在雾化器开始工作后才开启的。其他的电子烟也应当配备有近距离通信模块。在这些模块开启后，能够得到第一通信数据、环境红外线数据和环境声音数据，这三个数据均与烟雾浓度相关。进一步地，所述近距离通信模块为蓝牙通信模块，所述第一近距离通信网络为蓝牙通信网络。进一步地，所述当智能电子烟的雾化器启动时，控制近距离通信模块开启，以与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据，包括：当智能电子烟的雾化器启动时，控制蓝牙通信模块开启，并减小蓝牙通信模块的功率，以使得蓝牙通信模块的通信距离为预设距离；与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据。从而能够控制蓝牙通信覆盖的范围，以保障仅在较小的距离内，确定烟雾浓度。第一通信数据至少包括电子烟的雾化器型号，而不同的雾化器不同，例如其功率不同，因此能够产生的烟雾也不同，这也是要进行近距离通信的原因。环境红外线数据并不直接使用，而是需要进行温度筛选处理，以得到对应于多个第一温度区域的多个第一环境红外线数据，同时得到对应于多个第二温度区域的多个第二环境红外线数据。其中，第一温度区域对应于电子烟，第二温度区域对应于真实香烟。因为电子烟的温度相较于真实香烟的烟头要低，例如电子烟的雾化温度为200度，真实香烟的烟头温度为1000度。环境声音数据也不直接使用，也需要将环境声音数据与预存的抽烟声音数据进行比对，以从环境声音数据中提取出对应于多个第一温度区域的多个第一抽烟声音数据，同时提取出对应于多个第二温度区域的多个第二抽烟声音数据。其中，提取出相似声音，只需与预存的抽烟声音数据进行比对即可，这仅涉及两组声音数据之间的相似计算，采用现有技术即可，在此不再赘述。但是如何做到提取出对应于多个第一温度区域的多个第一抽烟声音数据，同时提取出对应于多个第二温度区域的多个第二抽烟声音数据，这才是本申请的特点。这在普通方案中是无法实现的，但在本申请中可以实现，原因在于，随着抽烟声音的加剧，对应区域会燃烧得更为剧烈，从而温度明显上升，这会体现在第一环境红外线数据和第二环境红外线数据上，因此能够实现抽烟声音数据与温度区域的对应。再进行数据绑定处理，以将处于同一个温度区域中的抽烟声音数据与环境红外线数据进行绑定，从而得到第一绑定数据集合。而进行数据绑定数据，是因为本申请需要预测烟雾浓度，但是预测的不是瞬时烟雾浓度，而是在一个时间窗口内的烟雾浓度。在这个第一时间窗口内，由于抽吸的关系，每个电子烟或真实香烟产生的烟雾量是不同的，因此本申请通过数据绑定处理，以形成对应于单个电子烟或真实香烟的绑定数据，从而构成第一绑定数据集合。再将所述第一通信数据和所述第一绑定数据集合输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；其中，所述烟雾浓度预测模型基于神经网络模型，并根据预设的样本数据采用有监督训练学习的方式训练得到。由于烟雾浓度直接与电子烟的雾化器型号、电子烟的数量、真实香烟的数量、抽吸的程度相关，而这些因素都反应在所述第一通信数据和所述第一绑定数据集合中了，因此通过所述第一通信数据和所述第一绑定数据集合，能够进行烟雾浓度的预测。而神经网络模型具体可采用任意可行模型，例如递归神经网络模型、对抗神经网络模型、长短期记忆神经模型、卷积神经网络模型等。并且训练过程采用有监督训练学习的方式训练得到，因此需要用同样的方式采集到样本数据，并对样本数据进行自动标注或者人工标注，以将对应的浓度标签标注在对应的样本数据上。进一步地，所述烟雾浓度预测模型训练时采用的样本数据的获取过程，包括：在预设的存在有多个正在工作的电子烟和多个点燃的真实烟的建筑物中，样本电子烟控制近距离通信模块开启，以与通信范围内的其他电子烟构建第二近距离通信网络，从而获取其他电子烟发送的第二通信数据；其中，所述第二通信数据至少包括电子烟的雾化器型号，多个正在工作的电子烟和多个点燃的真实烟分别对应于不同的持有者；样本电子烟控制红外线感测模块开启，以在第二时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；其中，第二时间窗口的宽度与第一时间窗口的宽度相同；样本电子烟对采集到的环境红外线数据进行温度筛选处理，以得到对应于多个一号温度区域的多个一号环境红外线数据，同时得到对应于多个二号温度区域的多个二号环境红外线数据；其中，一号温度区域指温度大于预设的第一温度阈值但小于预设的第二温度阈值的区域，二号温度区域指温度大于第二温度阈值的区域；样本电子烟控制声音采集模块开启，以在第二时间窗口内进行声音数据采集，从而得到环境声音数据；样本电子烟将采集到的环境声音数据与预存的抽烟声音数据进行比对，以提取出对应于多个一号温度区域的多个一号抽烟声音数据，同时提取出对应于多个二号温度区域的多个二号抽烟声音数据；样本电子烟进行数据绑定处理，以将处于同一个温度区域中的抽烟声音数据与环境红外线数据进行绑定，从而得到第二绑定数据集合；样本电子烟采用设置于所述建筑物的顶部的摄像头，对样本电子烟所处环境进行图像采集处理，以得到顶部图像；样本电子烟将所述顶部图像输入预设的烟雾浓度识别模型中进行处理，以得到所述烟雾浓度识别模型输出的浓度值；其中，所述烟雾浓度识别模型基于深度卷积神经网络模型训练而成；样本电子烟对所述第二通信数据和所述第二绑定数据集合进行标记处理，以标记上所述浓度值，从而得到一个样本数据；多次修改所述建筑物中多个正在工作的电子烟的数量和/或多个点燃的真实烟的数量，并依次进行通信数据获取、环境红外线数据采集、温度筛选处理、声音数据采集、抽烟声音数据提取、数据绑定处理、图像采集处理、浓度值生成处理和标记处理，从而对应得到多个样本数据。从而借助现有的烟雾浓度识别模型，进行自动标注，以提高样本数据的生成速度，并且提高样本数据标注的准确性。本申请之所以不用现有的烟雾浓度识别模型进行烟雾浓度的识别，其原因在于，本申请的实际应用场景中，很可能不存在顶部摄像头，因此也没有顶部图像，所以现有的烟雾浓度识别模型无法使用。但是，只需要在样本数据的采集场景中增加顶部摄像头，即可再次利用现有的烟雾浓度识别模型，以实现自动标注。进一步地，所述将所述第一通信数据和所述第一绑定数据集合输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；其中，所述烟雾浓度预测模型基于神经网络模型，并根据预设的样本数据采用有监督训练学习的方式训练得到之前，包括：对多个样本数据按预设比例进行划分处理，以得到多个训练数据和多个验证数据；调取预设的神经网络模型，并将所述多个训练数据输入所述神经网络模型中进行训练，以得到初步烟雾浓度预测模型；其中，初步烟雾浓度预测模型的训练过程中采用反向传播算法进行各层网络的参数的更新；采用所述多个验证数据对所述初步烟雾浓度预测模型进行验证处理，并判断验证处理得到的结果是否为验证通过；若验证处理得到的结果为验证通过，则将所述初步烟雾浓度预测模型作为最终的烟雾浓度预测模型。从而训练得到最终的烟雾浓度预测模型。由于烟雾浓度预测模型是经过同源的训练数据进行训练，并且经过同源的验证数据进行验证得到的，因此其能够胜任对烟雾浓度的预测工作，其可靠性得到了保障。预设比例可为任意可行比例，例如为8:2、9:1等。反向传播算法是用来训练神经网络模型的有效算法，其将训练数据输入到模型的输入层，经过隐藏层，最后达到输出层并输出结果，这是神经网络模型的前向传播过程；由于输出结果与实际结果有误差，则先计算估计值与实际值之间的误差，并将该误差从输出层向隐藏层反向传播，直至传播到输入层；在反向传播的过程中，根据误差调整各种参数的值；不断迭代上述过程，直至收敛。随后，判断所述预测烟雾浓度是否大于预设的烟雾浓度阈值；若所述预测烟雾浓度大于预设的烟雾浓度阈值，则通过所述第一近距离通信网络向至少一个电子烟发送关闭请求，以要求接收到关闭请求的电子烟关闭雾化器。进一步地，若场景中还包括抽气扇，并且抽气扇还连接有通信模块，因此还可以包括：控制抽气扇开启，以增加空气流通，减少烟雾浓度。进一步地，智能电子烟还包括水汽雾化器，因此还可以包括：控制水汽雾化器开启，以增加空气中的水汽含量。进一步地，智能电子烟还包括风速传感器；所述判断所述预测烟雾浓度是否大于预设的烟雾浓度阈值之前，包括：通过所述风速传感器，获取环境风速；根据所述第一通信数据，获取电子烟的数量，并判断电子烟的数量是否等于所述多个第一温度区域的数量；若电子烟的数量是否等于所述多个第一温度区域的数量，则根据所述环境红外线数据，获取环境人数；调取预设的环境风速、人数与浓度阈值的对应关系表，并根据所述对应关系表，获取与环境风速、环境人数对应的烟雾浓度阈值。从而通过环境风速和环境人数，确定应设置的烟雾浓度阈值，以提高本申请对真实场景的适应能力。在某些非封闭场景中，空气是流通的，烟雾浓度阈值可以设置为高一些；同样的，对于不同的环境人数，烟雾浓度阈值也应当不同。此外，本申请还采用了检验手段，即采用第一通信数据对红外数据进行了检测，以确定本申请采集得到的数据是否可靠，即根据所述第一通信数据，获取电子烟的数量，并判断电子烟的数量是否等于所述多个第一温度区域的数量，从而提高了最终预测结果的准确性，以及动态调整烟雾浓度阈值的必要性。本申请的具有烟雾浓度调控能力的智能电子烟，构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据；控制红外线感测模块开启，以在第一时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；得到对应于多个第一温度区域的多个第一环境红外线数据，同时得到对应于多个第二温度区域的多个第二环境红外线数据；得到环境声音数据；提取出对应于多个第一温度区域的多个第一抽烟声音数据，同时提取出对应于多个第二温度区域的多个第二抽烟声音数据；进行数据绑定处理，从而得到第一绑定数据集合；输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；若预测烟雾浓度大于烟雾浓度阈值，则通过所述第一近距离通信网络向至少一个电子烟发送关闭请求，实现了烟雾浓度调控。参照图2，本申请实施例提供一种具有烟雾浓度调控能力的智能电子烟的使用方法，所述智能电子烟为前述实施方式中所述的智能电子烟，所述使用方法包括：S1、智能电子烟的持有者开启雾化器后，控制芯片控制近距离通信模块开启，以与通信范围内的其他电子烟构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据；其中，所述第一通信数据至少包括电子烟的雾化器型号；S2、控制红外线感测模块开启，以在第一时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；S3、对环境红外线数据进行温度筛选处理，以得到对应于多个第一温度区域的多个第一环境红外线数据，同时得到对应于多个第二温度区域的多个第二环境红外线数据；其中，第一温度区域指温度大于预设的第一温度阈值但小于预设的第二温度阈值的区域，第二温度区域指温度大于第二温度阈值的区域；S4、控制声音采集模块开启，以在第一时间窗口内进行声音数据采集，从而得到环境声音数据；S5、将环境声音数据与预存的抽烟声音数据进行比对，以从环境声音数据中提取出对应于多个第一温度区域的多个第一抽烟声音数据，同时提取出对应于多个第二温度区域的多个第二抽烟声音数据；S6、进行数据绑定处理，以将处于同一个温度区域中的抽烟声音数据与环境红外线数据进行绑定，从而得到第一绑定数据集合；S7、将所述第一通信数据和所述第一绑定数据集合输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；其中，所述烟雾浓度预测模型基于神经网络模型，并根据预设的样本数据采用有监督训练学习的方式训练得到；S8、判断所述预测烟雾浓度是否大于预设的烟雾浓度阈值；S9、若所述预测烟雾浓度大于预设的烟雾浓度阈值，则通过所述第一近距离通信网络向至少一个电子烟发送关闭请求，以要求接收到关闭请求的电子烟关闭雾化器。本申请的具有烟雾浓度调控能力的智能电子烟的使用方法，构建第一近距离通信网络，从而获取其他电子烟发送的第一通信数据；控制红外线感测模块开启，以在第一时间窗口内在感测范围内进行数据采集，从而得到环境红外线数据；得到对应于多个第一温度区域的多个第一环境红外线数据，同时得到对应于多个第二温度区域的多个第二环境红外线数据；得到环境声音数据；提取出对应于多个第一温度区域的多个第一抽烟声音数据，同时提取出对应于多个第二温度区域的多个第二抽烟声音数据；进行数据绑定处理，从而得到第一绑定数据集合；输入预先训练得到的烟雾浓度预测模型中进行处理，以得到所述烟雾浓度预测模型输出的预测烟雾浓度；若预测烟雾浓度大于烟雾浓度阈值，则通过所述第一近距离通信网络向至少一个电子烟发送关闭请求，实现了烟雾浓度调控。需要说明的是，在本文中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、装置、物品或者方法不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、装置、物品或者方法所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括该要素的过程、装置、物品或者方法中还存在另外的相同要素。以上所述仅为本申请的优选实施例，并非因此限制本申请的专利范围，凡是利用本申请说明书及附图内容所作的等效结构或等效流程变换，或直接或间接运用在其他相关的技术领域，均同理包括在本申请的专利保护范围内。
