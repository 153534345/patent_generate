标题title
基于激光扫描的盾构隧道直径收敛和径向错台检测方法
摘要abst
本发明公开了一种基于激光扫描的盾构隧道直径收敛和径向错台检测方法，包括：S1，通过自移动激光扫描系统获取盾构隧道的三维点云数据；S2，将三维点云数据映射为二维灰度影像，并对所述二维灰度影像进行增强；S3，对增强后的灰度影像进行特征检测，从中分离出呈线段特征的管片缝隙；接缝提取；S4，基于迭代优化的椭圆拟合；S5，分块圆形拟合；S6，基于拟合半径、椭圆中心与横缝位置计算水平收敛直径；基于分块圆拟合方法完成径向错台检测。与现在技术相比，该检测方法精度高、作业效率高，能有效解决隧道腰部区域因遮挡而缺失数据的普遍现状；采用分块圆拟合方法检测的收敛直径与径向错台有效避免了模型误差。
权利要求书clms
1.一种基于激光扫描的盾构隧道直径收敛和径向错台检测方法，包括以下步骤：S1，通过自移动激光扫描系统，在小车沿线路方向行进的同时，扫描仪在垂直隧道方向进行360°连续旋转测量，获取盾构隧道的三维点云数据；S2，将所述三维点云数据映射为二维灰度影像，并对所述二维灰度影像进行增强，保证映射后的灰度影像具有高对比度的色调和明显的特征信息；S3，接缝检测，包括以下步骤：S31，采用Canny算法和霍夫变换方法对增强后的灰度影像进行特征检测，从中分离出呈线段特征的管片缝隙；S32，接缝提取：基于盾构管片缝隙的长度和方向特征对步骤S31处理后的影像进行过滤，滤掉大部分明显的错误线段；然后采用统计方法获取最优接缝位置，通过遍历候选线段，逐线段统计并且选择经过像素点数量最多的直线，将其作为初始接缝；再依据盾构管片拼接的规律，进一步推算其它管片接缝，最终得到径向和环间接缝像素坐标；S4，基于迭代优化的椭圆拟合：根据步骤S32得到的所述环间接缝像素坐标提取对应的隧道断面点云，并将其投影到二维平面；基于选权截尾最小二乘法，在拟合断面点云的同时抵抗异常数据的不良影响，获得椭圆拟合参数；将断面点云按照60度等分，在除底板部分外其余五部分内分别选择一点参与拟合，确保计算的椭圆参数δ0＝趋近最优值；采用间接平差模型计算椭圆参数平差值利用丹麦权函数调整观测值权重，再重新迭代计算，直至满足设定的迭代次数或小于设定的阈值时停止：式中P是第i次迭代的观测点权值；P'是第i+1次迭代的观测点权值；V是第i次的改正数；σ为单位权中误差，由下式获得：获得椭圆参数后，遍历当前断面内的所有激光点，逐点计算与拟合椭圆的正交距离d，设定距离阈值ρ，若d＜ρ，则将该激光点归入隧道内壁点集合，否则为非内壁点，予以排除；S5，分块圆形拟合，包括：将步骤S32得到的所述环间和径向接缝像素坐标分别转换为测线序号和入射角度，将管片分环和分块；基于半径阈值和模型迭代配准，将管片上的噪声点过滤；基于二维圆形拟合算法，获得拟合后的圆形半径值R和圆心坐标；S6，计算水平直径与径向错台：基于拟合半径、椭圆中心与横缝位置计算水平收敛直径；基于分块圆拟合的方法完成径向错台的检测。2.根据权利要求1所述的盾构隧道直径收敛和径向错台检测方法，其特征在于，步骤S2包括以下子步骤：S21，点云降维：采用圆柱模型作为投影面，在单个断面内，将隧道断面几何中心作为视点，基于扫描角度将断面内激光点映射后的图像视作正射影像；按照一定间隔将点云进行分段投影，在一段点云中，采用椭圆拟合方法计算首部和尾部两个断面的概略圆心C1和C2，以两概略圆心的连线C1C2作为基准线，以隧道设计半径R作为投影半径构建圆柱投影面；然后将圆柱投影面铺展为二维平面，以扫描测线为单元进行逐测线投影，在图像上显示为按顺序依次排列的列像素，断面内各测点按照入射角度排列，其位置用纵坐标Y表示，测线位置用横坐标X表示，在确定圆柱投影圆心、半径以及投影正射影像的水平和竖直分辨率后，映射由下式计算得到：式中：XPixel表示激光点Pi在灰度图像中对应的X坐标；YPixel表示激光点Pi在灰度图像中对应的Y坐标；l表示激光点Pi所在测线距离起始测线之间的累计距离；H表示设置的水平分辨率；θ表示断面点云需要映射到图像上的角度范围值的1/2；R表示投影圆柱半径；V表示设置的纵向分辨率；α表示激光点Pi的入射角度；GPixel表示处的像素值；S22，特征增强：采用直方图均衡化处理，拉伸像素值分布范围，扩大两个灰度级的范围。3.根据权利要求2所述的盾构隧道直径收敛和径向错台检测方法，其特征在于，步骤S21中，按照20m的间隔将点云进行分段投影。4.根据权利要求1所述的盾构隧道直径收敛和径向错台检测方法，其特征在于，步骤S32中基于盾构管片缝隙的长度和方向特征对处理后的影像进行过滤的具体方法为：设置角度阈值δ对线段进行遍历，作为环间接缝的候选；对于径向接缝，加入距离阈值λ，选择符合要求的直线段作为径向接缝候选，有：式中：LT表示提取的环间接缝线段；lT表示提取的径向接缝线段；θ表示线段对应的角度；d表示线段对应的长度；W表示盾构管片宽度在图像中对应的像素长度；δ表示环间接缝角度阈值，设置为1°；表示径向接缝角度阈值，设置为3°。5.根据权利要求1所述的盾构隧道直径收敛和径向错台检测方法，其特征在于，步骤S32中：对于环间接缝，依据管片宽度分别朝左右两侧进行等间隔递推，获得其它环间接缝的横坐标；对于径向接缝，依据不同类型管片对应的角度沿环内方向推算其它径向接缝的中心纵坐标；对于通缝拼接的盾构隧道，按照管片宽度朝左右两侧进行等间隔递推；对于错缝拼接的盾构隧道，其余盾构环内的径向接缝基于初始径向接缝，按照管片宽度的2倍进行等间隔推算。6.根据权利要求1所述的盾构隧道直径收敛和径向错台检测方法，其特征在于，步骤S5中，根据步骤S3检测的管片接缝坐标提取对应盾构环点云，并利用步骤S4所述方法对点云进行初步滤波，将轨道板、接触网等噪声点去除；基于管片形变的先验知识，构建盾构管片的圆柱形模型，将管片分块点云与模型进行迭代配准，并计算点云至模型的距离；设定形变的距离阈值δ，对配准后的分块点云进行噪声过滤，实现管片点云的精细滤波，得到干净的盾构管片点云。7.根据权利要求1所述的盾构隧道直径收敛和径向错台检测方法，其特征在于，步骤S6中，当隧道为通缝拼装时，将左侧标准块与邻接块之间的横缝中心点投影至拟合圆上，得到投影点；以横缝投影点为圆心、弦长813mm为半径的圆与标准块管片拟合圆形的交点即为左侧直径收敛点B；同理，计算出右侧直径收敛点B'，B与B'的直线距离为通缝隧道断面的直径收敛值。8.根据权利要求1所述的盾构隧道直径收敛和径向错台检测方法，其特征在于，步骤S6中，当隧道为错缝拼装时，以左侧标准块与邻接块之间的横缝中心投影点为圆心、弦长539mm为半径的圆与标准块管片拟合圆形的交点即为左侧直径收敛点B，以右侧横缝投影点为圆心，弦长1597mm为半径的圆与标准块管片拟合圆形的交点即为右侧直径收敛点B'，B与B'的直线距离为错缝隧道的直径收敛值。9.根据权利要求1所述的盾构隧道直径收敛和径向错台检测方法，其特征在于，步骤S6中，基于分块圆拟合的方法检测径向错台的方法为：将步骤S6获得的干净的盾构管片点云逐个进行圆拟合，设置最大收敛迭代次数阈值m和拟合精度δ，当满足收敛条件时，记录当前管片点云对应的拟合圆参数，包括圆心和半径Ri；待拟合收敛并获得正确的圆参数后，计算当前隧道断面的半径线在径向接缝处与相邻管片对应的拟合圆之间的交点A、B的坐标，AB之间的距离即为环缝位置处对应的径向错台值。
说明书desc
技术领域本发明涉及地铁工程运维领域，具体涉及一种基于激光扫描的盾构隧道直径收敛和径向错台检测方法。背景技术城市轨道交通工程是现代城市的主要交通方式之一，地铁是城市轨道交通的重要形式。目前中国正处于地铁建设的高潮期，截止2020年底，地铁占全部轨道交通工程建设的比例超过78％。隧道是地铁管线的重要组成部分。如何保证地铁隧道在其设计生命周期内能够安全、经济的运营已成为工程界最为关心的重要问题之一。随着服役时间的增加、地质环境的不断变化以及材料老化等因素作用，隧道结构不可避免的会产生一定的病害，尤其在中国上海、杭州、广州等软土地区城市情况更为显著。由于地铁隧道工程的隐蔽性、复杂性和不确定性，使得其结构健康状况对于公众生命安全和社会财产安全有着极为重要的影响。因此，在工程建设和运营阶段对隧道结构病害状况开展常态化检测已成为一项必不可少的重要任务。盾构隧道目前是地铁工程地下结构的主要敷设形式，其断面形状可分为圆形、拱形、矩形和马蹄形四种，其中圆形结构衬砌拼装简单、易于更换且抗土层压力较好，因而应用最为广泛。圆形盾构隧道中的直径收敛和管片径向错台能够直观地反映外部压力分布和隧道形变状态，可有效指导隧道结构的养护维修，已成为运维管理部门最为关心的结构病害。隧道直径变形是指受周边环境诸因素影响，隧道周边应力场重新分布导致隧道主体结构发生收拢或形变的现象。径向错台指的是由于施工因素、周边环境变化、土层不均匀沉降等诸多因素影响，同一盾构环内相邻管片在径向接缝处产生的高度偏差。隧道直径收敛和管片径向错台直接改变了隧道工程的结构性能和管片受力特性，可诱发隧道渗漏水甚至管片开裂，也会影响隧道整体的抗震性能。传统检测方法主要依赖人工巡检，但较其它类型的隧道不同，由于地铁隧道运营繁忙，要保证列车的正常运营，检测人员只能在有限的天窗时间内实时巡检，平均检测时间为2～2.5小时/天。在范围广、时间短、频次高的检测条件下，巡检人员往往仅能对病害多发区域进行重点检测，如此极易引起漏检，存在着较大的安全隐患。除此之外，由于隧道内部环境昏暗，经常出现照片模糊、记录不准确的情况，这导致了此类方法总体检测效率非常低。近年来出现的移动激光扫描技术由于其非接触、高精度、高效率、不依赖光源等优势，在隧道结构病害检测任务中已成为众多机构和研究学者广泛推荐和采用的手段。众多学者提出了不同的自动检测方法，这些方法针对直径收敛进行检测，其主要思路为将盾构隧道断面形状视为椭圆进行拟合，进而获取断面几何参数。然而，值得注意的是，由于隧道周围外力分布的复杂性和大小的不确定性，隧道结构发生形变后的断面并不是标准的椭圆形状，若直接采用椭圆模型进行拟合，则会因为模型的不严密而产生较大的计算误差。一般情况下，拟合得到的椭圆参数是服从整体最优原则下的结果，在局部区域仍然与实际情况有较大偏差。尤其表现在计算水平直径时，上述情况会造成较大的检测误差。部分学者进一步使用局部二次曲线拟合来解决这个问题。其主要流程为使用椭圆拟合方法获得隧道断面圆心，分别截取圆心水平线上下一定范围的两侧断面点云后，拟合二次曲线模型参数，计算圆心水平线与两侧曲线的交点实现水平直径的检测。这种方法虽然能够在一定程度上避免模型误差带来的影响，但是运营期的隧道内壁通常会安装各种通讯线缆以及逃生通道，圆心水平线附近的隧道内壁通常会被遮挡导致点云数据缺失，致使该方法的适用性会受到环境的较大限制。此外，该方法与人工检测时选择的水平直径位置并不相同，因而无法直接进行数据的人工核验。同时也无法与运维部门既有的历史检测成果进行衔接。由此带来的检测成果差异，会对运维管理部门的成果管理和养护维修工作造成障碍。因此，快速、准确、高效的检测方法仍然有待进一步的探索。发明内容鉴于现有技术中存在的技术问题，本发明提供一种快速、准确、高效的隧道断面收敛与径向错台的检测方法。为此，本发明采用以下技术方案：一种基于激光扫描的盾构隧道直径收敛和径向错台检测方法，包括以下步骤：S1，通过自移动激光扫描系统，在小车沿线路方向快速行进的同时，扫描仪在垂直隧道方向进行360°连续旋转测量，获取盾构隧道的三维点云数据；S2，将所述三维点云数据映射为二维灰度影像，并对所述二维灰度影像进行增强，保证映射后的灰度影像具有高对比度的色调和明显的特征信息；S3，接缝检测，包括以下步骤：S31，采用Canny算法和霍夫变换方法对增强后的灰度影像进行特征检测，从中分离出呈线段特征的管片缝隙；S32，接缝提取：基于盾构管片缝隙的长度和方向特征对步骤S31处理后的线段进行过滤，滤掉大部分明显的错误线段；然后采用统计方法获取最优接缝位置，通过遍历候选线段，逐线段统计并且选择经过像素点数量最多的直线，将其作为初始接缝；再依据盾构管片拼接的规律，进一步推算其它管片接缝，最终得到径向和环间接缝像素坐标；S4，基于迭代优化的椭圆拟合：根据步骤S32得到的所述环间接缝像素坐标提取对应的隧道断面点云，并将其投影到二维平面；基于选权截尾最小二乘法，在拟合断面点云的同时抵抗异常数据的不良影响，获得椭圆拟合参数；将断面点云按照60度等分，在除底板部分外其余五部分内分别选择一点参与拟合，确保计算的椭圆参数δ0＝趋近最优值；采用间接平差模型计算椭圆参数平差值利用丹麦权函数调整观测值权重重新迭代计算，直至满足设定的迭代次数或小于设定的阈值时停止：式中P是第i次迭代的观测值权值；P'是第i+1次迭代的观测值权值；V是第i次的改正数；σ为单位权中误差，由下式获得：获得椭圆参数后，遍历当前断面内的所有激光点，逐点计算与拟合椭圆的正交距离d，设定距离阈值ρ，若d＜ρ，则将该激光点归入隧道内壁点集合，否则为非内壁点，予以排除；S5，分块圆形拟合，包括：将步骤S32得到的所述环间和径向接缝像素坐标分别转换为测线序号和入射角度，将管片分环和分块；基于半径阈值和模型迭代配准，将管片上的噪声点过滤；基于二维圆形拟合算法，获得拟合后的圆形半径值R和圆心坐标。S6，计算水平直径与径向错台：基于拟合半径、椭圆中心与横缝位置计算水平收敛直径；基于分块圆拟合的方法完成径向错台的检测。其中，步骤S2包括以下子步骤：S21，点云降维：采用圆柱模型作为投影面，在单个断面内，将隧道断面几何中心作为视点，基于扫描角度将断面内激光点映射后的图像视作正射影像；按照一定间隔将点云进行分段投影，在一段点云中，采用椭圆拟合方法计算首部和尾部两个断面的概略圆心C1和C2，以两概略圆心的连线C1C2作为基准线，以隧道设计半径R作为投影半径构建圆柱投影面；然后将圆柱投影面铺展为二维平面，以扫描测线为单元进行逐测线投影，在图像上显示为按顺序依次排列的列像素，断面内各测点按照入射角度排列，其位置用纵坐标Y表示，测线位置用横坐标X表示，在确定圆柱投影圆心、半径以及投影正射影像的水平和竖直分辨率后，映射由下式计算得到：式中：XPixel表示激光点Pi在灰度图像中对应的X坐标；YPixel表示激光点Pi在灰度图像中对应的Y坐标；l表示激光点Pi所在测线距离起始测线之间的累计距离；H表示设置的水平分辨率；θ表示断面点云需要映射到图像上的角度范围值的1/2；R表示投影圆柱半径；V表示设置的纵向分辨率；α表示激光点Pi的入射角度；GPixel表示处的像素值；S22，特征增强：采用直方图均衡化处理，拉伸像素值分布范围，扩大两个灰度级的范围。优选的是，步骤S21中，按照20m的间隔将点云进行分段投影。步骤S32中基于盾构管片缝隙的长度和方向特征对处理后的影像进行过滤的具体方法为：设置角度阈值δ对线段进行遍历，作为环间接缝的候选；对于径向接缝，加入距离阈值λ，选择符合要求的直线段作为径向接缝候选，有：式中：LT表示提取的环间接缝线段；lT表示提取的径向接缝线段；θ表示线段对应的角度；d表示线段对应的长度；W表示盾构管片宽度在图像中对应的像素长度；δ表示环间接缝角度阈值，设置为1°；表示径向接缝角度阈值，设置为3°。优选的是，步骤S32中：对于环间接缝，依据管片宽度分别朝左右两侧进行等间隔递推，获得其它环间接缝的横坐标；对于径向接缝，依据不同类型管片对应的角度沿环内方向推算其它径向接缝的中心纵坐标；对于通缝拼接的盾构隧道，按照管片宽度朝左右两侧进行等间隔递推；对于错缝拼接的隧道，其余盾构环内的径向接缝基于初始径向接缝，按照管片宽度的2倍进行等间隔推算。步骤S5中，根据步骤S3检测的管片接缝坐标提取对应盾构环点云，并利用步骤S4所述方法对点云进行初步滤波，将轨道板、接触网等噪声点去除；基于管片形变的先验知识，构建盾构管片的圆柱形模型，将管片分块点云与模型进行迭代配准，并计算点云至模型的距离。设定形变的距离阈值δ，对配准后的分块点云进行噪声过滤，实现管片点云的精细滤波，得到干净的盾构管片点云。步骤S6中，当隧道为通缝拼装时，将左侧标准块与邻接块之间的横缝中心点投影至拟合圆上，得到投影点；以横缝投影点为圆心、弦长813mm为半径的圆与标准块管片拟合圆形的交点即为左侧直径收敛点B；同理，计算出右侧直径收敛点B'，B与B'的直线距离为通缝隧道的直径收敛值。当隧道为错缝拼装时，以左侧横缝投影点为圆心、弦长539mm为半径的圆与标准块管片拟合圆形的交点即为左侧直径收敛点B，以右侧横缝投影点为圆心，弦长1597mm为半径的圆与标准块管片拟合圆形的交点即为右侧直径收敛点B'，B与B'的直线距离为错缝隧道的直径收敛值。步骤S6中，基于分块圆拟合的方法检测径向错台的方法为：将步骤S6获得的干净的盾构管片点云逐个进行圆拟合，设置最大收敛迭代次数阈值m和拟合精度δ，当满足收敛条件时，记录当前管片点云对应的拟合圆参数，包括圆心和半径Ri；待拟合收敛并获得正确的圆参数后，计算当前隧道断面的半径线在径向接缝处与相邻管片对应的拟合圆之间的交点A、B的坐标，AB之间的距离即为该环缝位置处对应的径向错台值。本发明的检测方法以移动激光扫描系统采集的点云数据作为处理对象，将三维点云降维映射为二维灰度影像，再通过数字图像处理算法识别管片的环间缝隙与径向缝隙等特征，利用缝隙特征提取对应的断面点云后进行滤波去噪处理，获得干净的隧道内壁点云，最后采用分块圆拟合的方法检测水平直径和径向错台值。本发明在管片接缝判识和定位过程中充分结合了三维点云信息丰富和二维图像清晰直观的特点，采用数字图像处理算法高效提取管片接缝特征并完成海量点云数据的分环与分块。提出采用最优椭圆拟合法与迭代配准法实现点云的初步滤波与精细去噪。该方法采用选权截尾最小二乘法去除隧道断面点云中的噪声点，通过图像边缘检测算法定位管片径向接缝，以特定接缝为中心偏移确定水平直径端点获得测量值。与现有技术相比，本发明具有以下有益效果：1.相比于直接采用椭圆拟合法的测量成果，本发明的检测方法精度提升2mm，该方法的绝对检测精度优于3mm，重复检测精度优于2mm。2.该方法能够有效解决隧道腰部区域因遮挡而缺失数据的普遍现状，更适用工程实际应用，工程应用结果显示，本发明的方法与人工测量方式检测的收敛直径与径向错台位置一致，具备比较性并且标准差优于1mm。3.采用分块圆拟合方法检测的收敛直径与径向错台有效避免了模型误差。4.相比于人工测量方式，本发明的方法采用了自移动激光扫描技术，在作业效率方面提升10倍以上。附图说明图1是本发明检测方法的总体框架图；图2a是自移动激光扫描系统的立体结构示意图；图2b是图2a中自移动激光扫描系统的运行模式示意图；图2c是图2a中自移动激光扫描系统的扫描得到的螺旋测线三维视图；图2d是图2c中螺旋测线的俯视图；图3a、3b是径向接缝边缘误差示意图，其中图3a是径向接缝误差示意图，图3b是径向接缝位置示意图；图4a、4b是隧道断面点云与灰度影像映射关系图，其中，图4a是圆柱投影模型；图4b是投影面平铺图；图5a、图5b分别为隧道内壁灰度影像源图像的直方图和源图像；图5c、图5d分别为隧道内壁灰度影像源图像均衡化后的直方图和均衡化图像；图6a-6c为图像边缘特征提取图，其中：图6a为纵向接缝示意图；图6b为灰度阶跃；图6c为边缘特征提取效果图；图7为霍夫变换提取竖向直线过程图，其中，图7a为霍夫变换检测结果图，7b为直线包含像素统计图，图7c为初始纵向接缝；图8a为隧道内壁噪声；图8b为区域等分获取最优椭圆拟合参数；图9为隧道断面点云滤波前后的效果图，其中：为源点云，为椭圆拟合滤波后效果图，为模型迭代滤波后效果图；图10a、10b为基于迭代配准法的点云去噪前后的局部侧视图；图11a为分块拟合法径向错台检测时管片分块示意图；图11b为收敛直径及径向错台检测示意图；图12为全站仪检测收敛直径现场图，其中：图12a检测的是隧道左侧收敛点，图12b检测的是隧道右侧收敛点；图13a、13b分别为通缝拼装和错缝拼装管片端点标记示意图；图14为全站仪与SDMLS的收敛直径检测偏差对比图；图15为往返重复扫描的重复精度验证图；图16为全站仪与SDMLS的收敛直径偏差对比图；图17为椭圆拟合与分块圆拟合的结果对比图。具体实施方式以下结合附图和实施例对本发明的检测方法进行详细说明。参见图1-图17，本发明的基于激光扫描的盾构隧道直径收敛和径向错台检测方法包括以下步骤：S1，获取隧道内的点云数据：参见图2a、2b，本实施例中使用的隧道结构变形检测系统为自移动激光扫描系统。该系统在PLC小车上集成了高精度激光扫描仪、里程计、倾角仪、工控机等。PLC小车自备动力，能以均匀时速沿轨道方向前进，小车运行速度可在1km/h～5km/h范围内自由调节，恒速误差小于0.3％。采集控制软件部署在平板电脑上，通过无线局域网或网线与系统连接，用来设置系统运行参数、扫描参数以及操控小车运行状态。本发明假定扫描测线断面为隧道断面，且收敛直径端点是根据指定接缝偏移确定。在小车沿线路方向行进的同时，扫描仪垂直隧道进行360°连续旋转测量，扫描测线相应地呈螺旋线分布，如图2c所示，因此实际的扫描断面在三维空间中并非严格地垂直于线路方向，而是存在着微小的夹角。这种非严格正交现象会导致断面点云投影到二维平面时产生一定的投影误差，其中尤以测线的起点和终点之间的误差最大。本实施例中采用的激光扫描仪型号为Z+F PROFILER 9012，线扫描频率设置为200线/秒，理论上扫描单个断面耗费的时间为0.005s。扫描仪工作时，扫描镜头在相邻测线之间会存在极短暂的等待过程，实际扫描单个断面耗费的时间约为4x10-6s，因此相应的测线之间也会存在不连续性如图2d所示。螺旋线误差可由式得到：式中，H为螺旋线误差；R为隧道内半径；L为单条测线起点和终点的距离。由式可知，当载体运行速度为3km/h时，L为1.7mm。考虑到隧道内半径为2.7m，计算误差为1.28×10-13mm，故可忽略不计。本实施例采用的另外一个激光扫描仪型号为Faro focus350，线扫描频率设置为220线/秒，实际扫描单个断面耗费实际约为1×10-3mm，则对应的螺旋线误差为8.04×10-9mm，同样可忽略不计。对于水平直径端点，其位置是依据两侧指定径向接缝的中心位置进行偏移获得，因此径向接缝的位置会对水平直径的检测结果造成一定的误差。当考虑最坏的情况时，即检测的左右两侧径向接缝位置分别在接缝顶部和底部，如图3a、图3b所示，此时对水平直径检测结果造成的误差最大，可由下式确定：式中，d为径向接缝宽度。由上式可知，当设计半径为2.7m、盾构隧道中径向接缝宽度d约为1cm时，此时径向接缝定位造成的最大误差1.85×10-2mm，可忽略不计。S2，由点云生成灰度影像，包括以下子步骤：S21，点云降维：系统采集的点云通常具有非常高的密度，如果直接采用原始点云数据进行盾构管片缝隙特征的提取，需要占用大量的计算机资源，其运行效率在工程应用中也是难以接受的。将三维点云映射为二维灰度影像，通过数据降维可极大提升处理效率。激光扫描仪获取的原始数据通常包括目标点在扫描仪坐标系下的水平角度、垂直角度、空间距离以及反射强度等信息。为了能够真实直观地描述场景中物体的纹理特征，方便后续管片缝隙特征的提取，本发明将激光点在物体表面的反射强度转换为灰度图像的像素值。基于盾构隧道整体呈线状分布且断面呈近圆形的特点，本发明采用圆柱模型作为投影面。在单个断面内，将隧道断面几何中心作为视点，基于扫描角度可将断面内激光点映射后的图像视作正射影像，其几何特征的畸变可忽略不计，并且激光点与像素之间的投影转换关系简洁明了，对于后续的特征提取以及图像和点云之间的转换具有极大的便利性，图4a、4b所示。为提升处理效率和控制投影误差，按照一定的间隔将点云进行分段投影。在一段点云中，采用椭圆拟合方法计算首部和尾部两个断面的概略圆心C1和C2，以两圆心的连线C1C2作为基准线，以隧道设计半径R作为投影半径构建圆柱投影面。然后将圆柱投影面铺展为二维平面，以扫描测线为单元进行逐测线投影，在图像上显示为按顺序依次排列的列像素，断面内各测点按照入射角度排列，其位置用纵坐标Y表示，测线位置用横坐标X表示。在确定圆柱投影圆心、半径以及投影正射影像的水平和竖直分辨率后，映射可由下式计算得到：式中：XPixel表示激光点Pi在灰度图像中对应的X坐标；YPixel表示激光点Pi在灰度图像中对应的Y坐标；l表示激光点Pi所在测线距离起始测线之间的累计距离；H表示设置的水平分辨率；θ表示断面点云需要映射到图像上的角度范围值的1/2；R表示投影圆柱半径；V表示设置的纵向分辨率；α表示激光点Pi的入射角度；GPixel表示处的像素值。对于具体案例，可以朝向线路前进方向，以过基准点的垂线与圆柱投影面的交点作为起始点，即为图像Y坐标零点，沿逆时针方向逐点投影计算。测点在投影图像上的像素坐标确定后，需要给每个像素赋值。本实施例将反射强度值转换为0～255范围内的像素灰度值。S22，特征增强：由于隧道衬砌内壁均为混凝土材质，导致相应的激光反射率基本一致。这使得上一步生成的隧道内壁灰度影像通常表现为整体颜色偏暗、色调明暗变化小且管片缝隙特征不明显，如图5b所示。因此需要对影像进行进一步增强，保证映射后的灰度影像具有高对比度的色调和明显的特征信息。这里采用直方图均衡化处理，即拉伸像素值分布范围，扩大两个灰度级的范围，如图5c、图5d所示。S3，接缝检测：盾构隧道直径收敛与径向错台检测时需要以盾构环为单位进行逐环计算与统计，因此准确判识与定位管片缝隙是开展后续数据分析的前提。盾构管片是构成盾构环的所有分块的统称，具体包括标准块、邻接块和封顶块三种主要类型。其中标准块具有固定的尺寸，而封顶块较小，一般为标准块的1/3～1/4，与封顶块相邻的邻接块的尺寸需要依据实际需要确定。一般情况下，地铁隧道常用的分块模式为6块和7块。图6a为为纵向接缝示意图。灰度影像经直方图均衡化增强后，管片环缝将在影像中呈现局部区域亮度显著变化的特征，即灰度值在很小的局部邻域内急剧变化，如图6b所示。因此管片缝隙可通过对灰度影像进行特征检测和接缝提取两个过程获得。本发明采用Canny算法+霍夫变换组合的方法来识别并提取隧道管片缝隙。两个子步骤具体如下：S31，采用Canny算法和霍夫变换方法对灰度图像进行特征检测：相继通过高斯平滑、梯度计算、非极大值抑制以及双阈值检测等过程获得图像边缘特征。图6c为提取效果，观察该结果，由于螺栓孔、电缆线等构件边缘的存在，导致结果图像中的要素组成仍然较为复杂，因此采用霍夫变换方法进一步从中分离出呈线段特征的管片缝隙。S32，接缝提取：经霍夫变换检测出的线段数量较多，同一盾构环接缝受环境影响可能会被检测为多段不连续线段，此外还包含众多非接缝处的“噪声”，需要进行进一步的过滤和分析，获得准确的管片缝隙。本发明基于盾构管片缝隙的长度和方向特征进行过滤，具体方法如下：在灰度影像中，由于环间接缝呈竖向线状分布，故检测的对应线段的极角趋近于180°或0°，因此可设置角度阈值δ对线段进行遍历，作为环间接缝的候选。对于径向接缝，由于其在图像中主要表现为趋近于水平线状分布，极角接近于90°或270°。然而，由于隧道内壁管线也主要呈现水平线状分布，因此单纯使用角度阈值无法准确地获取径向接缝。由于环向接缝长度基本一致且远小于管线长度，因此加入距离阈值λ，选择符合要求的直线段作为径向接缝候选，有：式中：LT表示提取的环间接缝线段；lT表示提取的径向接缝线段；θ表示线段对应的角度；d表示线段对应的长度；W表示盾构管片宽度在图像中对应的像素长度；δ表示环间接缝角度阈值，通常设置为1°；表示径向接缝角度阈值，通常设置为3°。经上述处理后，已过滤了大部分明显的错误线段，如图7a所示，但是在接缝周边依然存在多条位置相近的线段干扰接缝的准确定位。所以，接下来采用统计方法获取最优接缝位置，通过遍历候选线段，逐线段统计并且选择经过像素点数量最多的直线，如图7b所示，将其作为初始环间接缝，如图7c所示。获得接缝初值后，依据盾构管片拼接的规律，进一步推算其它管片接缝。对于环间接缝，依据管片宽度分别朝左右两侧进行等间隔递推，获得其它环间接缝的横坐标；对于径向接缝，依据不同类型管片对应的角度沿环内方向推算其它径向接缝的中心纵坐标。沿线路方向上根据管片拼装方式的不同，递推的方式有所不同：对于通缝拼接的盾构隧道，各环之间的缝隙连续，可直接按照管片宽度朝左右两侧进行等间隔递推；错缝拼接的隧道，按照施工拼装要求通常呈现出管片缝隙隔环交替重复的分布现象，因此其余盾构环内的径向接缝可基于初始径向接缝按照管片宽度的2倍进行等间隔推算。经上述处理后，得到径向和环间接缝像素坐标。S4，基于迭代优化的椭圆拟合：根据上述纵向接缝像素坐标提取对应的隧道断面点云，并将其投影到二维平面。此时隧道内壁上安装的管道、电缆和疏散平台等构件，以及环境中飘浮的灰尘会导致采集的点云中存在大量的噪声点，如图8a所示的蓝色部分。在处理时如果不进行滤除或抵抗，则会对结果精度产生较大的影响，。由于隧道断面点云中存在的噪声信息导致数据呈非正态分布。当面对非正态分布的误差时，常规最小二乘法的拟合效果会受到破坏性影响。因此无法采用常规最小二乘法进行回归拟合。本发明基于选权截尾最小二乘法，在拟合断面点云的同时抵抗异常数据的不良影响，获得图像拟合参数。截尾最小二乘法是一种具有高崩溃点的稳健估计方法，在噪声和粗差占比较大的情况下，也能够抵抗其对回归分析结果的不利影响，获得较好的拟合效果。但是通过实验表明，当参与拟合的点数量较大时，庞大的计算量会显著降低计算效率。因此，本发明设计了一种基于LTS思想的快速求解方法，从n个观测值中抽取m个样本，每个样本随机包含k个观测值，利用k个观测值解算最小二乘估计值δ。然后计算n个观测值在δ下的残差平方将其升序排列，记前h个残差平方和为δLTS，取所有组合中δLTS最小的对应解作为LTS估计的准确解。Ax2+By2+Cxy+Dx+Ey＝1 根据椭圆方程式可知，在一个隧道断面中至少需要5个观测点才能求解得到方程参数。为了避免选择的观测值分布不均而产生局部拟合现象，将断面点云按照60度等分，如图8b所示。在除底板部分外其余五部分内分别选择一点参与拟合，确保计算的椭圆参数δ0＝趋近最优值。设置重复抽样数m为每部分点云的数量，计算每组样本的拟合参数对应的n个观测值的残差平方，将其升序排列，取前h个残差平方和最小的一组参数记为δLTS，并将其作为拟合初值。然后采取选权迭代的方式逐步消除噪声与粗差点的负面影响。本发明采用间接平差模型计算椭圆参数平差值平差结果中，粗差与噪声的改正数值偏大。利用这一特性，按照丹麦权函数)调整观测值权重重新迭代计算，直至满足设定的迭代次数或小于设定的阈值时停止：式中：P是第i次迭代的观测值权值；P'是第i+1次迭代的观测值权值；V是第i次的改正数；σ为单位权中误差，由式获得：获得椭圆参数后，遍历当前断面内的所有激光点，逐点计算与拟合椭圆的正交距离d，设定距离阈值ρ，若d＜ρ，则将该激光点归入隧道内壁点集合，否则为非内壁点，予以排除。S5，分块圆形拟合：基于分块圆拟合方法检测水平直径的过程包括：基于识别的缝隙将管片分环和分块；基于半径阈值和迭代配准，将管片上的噪声点过滤；采用圆形拟合分块管片点云，具体步骤如下：管片分环和分块：基于S3得到环间和径向接缝像素坐标，确定点云中对应的测线序号和入射角度，将原始点云进行分环和分块。模型迭代配准过滤噪声：根据S3检测的管片接缝坐标提取对应盾构环点云，并利用S4所述方法对点云进行初步滤波，将轨道板、接触网等噪声点去除，提升下一步滤波的可靠性。滤波前后效果如图9所示，其中，为源点云，为最优椭圆拟合滤波后效果图，为模型迭代滤波后效果图。初步滤波后，隧道内壁上仍然存在部分噪声点，这部分噪声点主要有隧道壁上安装的各类管线、管片连接处的螺栓孔等。多个工程案例的验证以及圆形拟合后的残差证明，管片接缝是整个隧道结构的薄弱位置，隧道整体形变主要因外力作用于管片接缝处，导致每一块管片之间产生错位，管片自身结构的刚性强度和稳定性高，一般不会产生形变。基于管片形变的先验知识，构建盾构管片的圆柱形模型，将管片分块点云与模型进行迭代配准，并计算点云至模型的距离。设定形变的距离阈值δ，对配准后的分块点云进行噪声过滤，实现管片点云的精细滤波，如图10a和图10b所示。这些经过精细滤波后的管片点云将提高下一步圆形拟合算法精度。圆拟合管片点云：将步骤处理后的管片点云投影至二维XOY平面上。平面的X轴直线路方向向右、Y轴竖直向上，坐标中心平移至断面的拟合椭圆中心点。基于二维圆形拟合算法，获得拟合后的圆形半径值R和圆心坐标。S6，计算水平直径与径向错台基于拟合半径、椭圆中心与横缝位置计算水平收敛直径。通过圆形拟合算法，计算管片对应的半径与圆心坐标。当隧道为通缝拼装时，将左侧标准块与邻接块之间的横缝中心点投影至拟合圆上，得到投影点。以横缝投影点为圆心、弦长813mm为半径的圆与标准块管片拟合圆形的交点即为左侧直径收敛点B；同样原理，可计算右侧直径收敛点B'，见图13a。当隧道为错缝拼装时，以左侧横缝投影点为圆心、弦长539mm为半径的圆与标准块管片拟合圆形的交点即为左侧直径收敛点B，以右侧横缝投影点为圆心，弦长1597mm为半径的圆与标准块管片拟合圆形的交点即为右侧直径收敛点B'，见图13b。通过圆形拟合算法计算隧道收敛直径，不仅避免因管片被遮挡对点云的影响，且检测点位与传统人工检测方式定点测量的位置一致，可以有效验证自移动式测量系统检测的水平直径精度，具体精度指标详见实施例一。除水平直径外，基于分块圆拟合的方法还可以完成径向错台的检测。经过步骤～的处理，将获得的干净的盾构管片点云逐个进行圆拟合。设置最大收敛迭代次数阈值m和拟合精度δ，当满足收敛条件时，记录当前管片点云对应的拟合圆参数，包括圆心和半径Ri。待拟合收敛并获得正确的圆参数后，计算当前隧道断面的半径线在径向接缝处与相邻管片对应的拟合圆之间的交点A、B的坐标，AB之间的距离即为该环缝位置处对应的径向错台值，如图11a、图11b所示。实施例一实验区域和数据采集：实验数据选择中国广州的地铁，此线路于2003年开通运营。本次实验区域侧方计划开挖基坑，需要对影响范围的地铁隧道进行变形监测，以评估基坑开挖对隧道安全的影响。在基坑开挖前，采用SDMLS对隧道当前状态进行检测，在基坑开挖过程中，采用全站仪进行自动化实时监测，在基坑回填完成后，再使用SDMLS对隧道进行检测。实验数据采集选择在夜晚非运营时间进行，作业时间段为3个小时，全站仪人工测量利用5个天窗时间，移动扫描仪利用2个天窗时间。实验线路长度120米，PLC小车正常匀速行驶，移动速度为2km/h，分别使用Z+F的P9012型号扫描仪与Faro的Focus350型号扫描仪进行扫描。Z+F线扫描频率为100Hz，点扫描频率为1016KHz，每个断面内扫描点数量约为10160个，线间距约为5.6mm，隧道两侧腰部管片位置处的激光点间距约为3.3mm。Faro线扫描频率为220Hz，点扫描频率为976KHz，每个断面内扫描点数量约为4267个点，线间距约为3.7mm，隧道两侧腰部管片位置处的激光点间距约为1.8mm。两种类型扫描仪的参数设置均满足管片缝隙识别与直径收敛检测的需求。获取标准块与连接块之间的横向缝隙中点位置，从横缝中点向下量取0.813米长度，在标准块上的交点作为收敛点进行标记。为了提高测量精度，在此位置粘贴反射片，再用全站仪的反射片测量模式，测量反射片中心之间的空间距离，加上2倍反射片的厚度，作为隧道直径收敛值，如图12a、12b所示。本次实验使用的全站仪为Leica TS60型号，反射片模式的测距精度为1mm+1ppm，可作为本次实验对比的真值使用。隧道管片的缝隙识别采用S3介绍方法，隧道管片环之间的缝隙将被识别，管片块之间的缝隙也被识别出来。当隧道侧腰安装管线后，横向缝隙将被遮挡，可以通过相邻封顶块与邻接块的缝隙以及邻接块拟合参数计算连接块与标准快之间的横缝。水平直径端点检测方法本发明确定水平直径位置的方法与人工检测采用的方法保持一致。本次施测的地铁隧道管片拼装方法分为两种，分别为通缝拼装和错缝拼装。各类型拼装方式的水平直径位置端点确定方法如下：通缝拼装采用简单的直接量取法，分别从两侧直径上方接缝中间位置A或A’向下量取813mm的弦长即为水平直径一端的位置B和B’，如图13a所示。错缝拼装错缝拼装管片奇偶环不一致，分别由A处接缝中间位置向下量取1597mm至B点，从离水平方向最近的接缝中间位置C向上量取539mm至B’点，BB’即为水平直径的理想位置，详见图13b。直径端点应取管片中间位置，即沿着环片接缝中间位置按照环片设计的几何关系分别往上或下量取固定数值至a、b，再取a、b的中点即为直径一端的端点B，作明显的十字标记或者贴反射片；对面管壁参照此方法选择直径另一端点B’。精度验证1)基于全站仪的绝对精度验证采用实施例一介绍的全站仪测量方式获得每一环管片的直径收敛值，将此值作为收敛直径的检测真值。将SDMLS扫描获取的激光点云，采用S3进行分环与分块后，获得每一环管片的分块点云。采用S4介绍的方法对分块点云进行圆形拟合，再利用S5介绍的方法，计算激光点云对应的收敛直径值。为了保持与全站仪获得收敛直径值位置统一，本发明截取每环管片中部0.02米宽度的点云进行拟合计算。SDMLS与全站仪测量的隧道收敛直径差值范围为：-2.9to 2.8mm，平均绝对偏差值)为：-0.2mm，标准偏差值为：1.5mm，如图14所示。同时，根据《城市轨道交通工程监测技术规范》的要求，隧道收敛检测精度为：±3mm，证明使用SDMLS检测的收敛直径满足规范要求。2)往返重复扫描的重复精度验证为了验证SDMLS系统的稳定性与检测结果的可靠性，分别采用往返扫描方式进行重复精度实验。利用S5介绍方法，进行收敛直径检测，统计相同管片收敛直径的差值。收敛直径重复差值范围为：-1.9to 2.0mm，标准偏差为：0.8mm，如图15所示。3)不同扫描仪的对比精度验证：为了验证本发明提出方法的通用性，如实施例一介绍，在SDMLS系统中分别集成Faro与Z+F激光扫描。对相同管片检测的收敛直径进行对比，Faro扫描仪与Z+F扫描仪检测的差值区间为：-1.2to 1.3mm，标准偏差为：0.5mm，如图16所示。通过以上得出：本发明的基于SDMLS的收敛直径检测方法具有通用性；Faro扫描仪与Z+F扫描仪进行收敛直径检测的精度基本相同，Faro扫描仪检测收敛直径个别点略大，如图16所示中的小方框内的点。4)椭圆拟合与分块圆拟合的结果对比本发明基于S4获取的管片“干净”点云，基于椭圆拟合方法，拟合隧道收敛直径。将椭圆拟合结果及本发明检测方法的检测结果分别与全站仪测量结果进行比较。差值范围为：-7.6to 7.5mm，平均绝对偏差值)为：-0.2mm，标准偏差值为：3.0mm。可以看出，本发明的方法与全站仪检测结果的差值小于椭圆拟合结果，如图17所示。
