标题title
基于地图界面大数据应用综合定位方法及系统
摘要abst
本发明属于大数据综合定位技术领域，公开一种基于地图界面大数据应用综合定位方法及系统，通过网络将传统无线信号捕捉设备单一作战方式进行提升，设备自动搜索、自动采集基站数据，同时结合路测数据源和网络数据源以地图界面与操作人员进行交互，改变以往只有数据列表展示方式；将无线终端信号解析捕捉由独立的单兵作战变为综合立体解决方案。本发明地图界面人机友好交互，基站范围实时显示，目标捕获后自动标红基站，上报数值记录轨迹并可进行回放。
权利要求书clms
1.一种基于地图界面大数据应用综合定位方法，其特征在于，包括：步骤1，数据采集终端将采集的基站数据通过消息队列Jafka传输至服务器基站采集服务，服务器基站采集服务监听消息队列数据更新，读取数据包并进行解析后，判断基站数据完整性和基站实采点GPS坐标完整性，完成基站实采点基站数据录入，入库前对每条基站数据与数据库已存储的数据通过索引判别GPS坐标点是否已存在；所述基站数据包括大小区LAC/CI，GPS经纬度；步骤2，对附近守控到的有效基站发起基站位置查询，首先在本地存储中查询是否已存在对应的基站LAC/CI数据，若无则通过Http请求基站查询服务，返回基站坐标点和实采点坐标，依赖高德地图Marker标注和热力图功能，将基站数据绘制在地图中，同时对返回的基站数据在本地进行限量存储；步骤3，通过高德地图实时定位，在捕捉目标信号过程中，采用定时获取设备GPS坐标位置和中标时取GPS坐标位置相结合方式，在地图中用Marker覆盖物形式展现不同位置目标能量强弱，同时将每次获取的数据通过Http上传到云端服务器进行存储；目标捕获后自动标红基站，上报数值记录轨迹并可进行回放。2.根据权利要求1所述的基于地图界面大数据应用综合定位方法，其特征在于，所述基站数据还包括采集点基站制式、频点pci、采集时间。3.根据权利要求1所述的基于地图界面大数据应用综合定位方法，其特征在于，所述步骤3中，为了避免坐标点过于密集，影响展示效果，在对数据源依据时间排序前提下，每次标注时都对当前标注点GPS坐标与历史标注点GPS坐标的距离根据地图缩放层级进行更新，隐藏近距离覆盖物，避免区域出现过量密集覆盖物，使展示更加清晰直观。4.根据权利要求1所述的基于地图界面大数据应用综合定位方法，其特征在于，所述步骤3还包括：针对两个坐标点距离过远，通过递归算法，按照如下计算逻辑，在确保路线一致前提下，使回放动画更加平滑：定义起始坐标点，；定义中间计算量sx，sy，sz，ex，ey，ez；定义中间计算量mx，my，mz；定义目标坐标点；y＝tan；最终得到目标坐标点。5.一种基于地图界面大数据应用综合定位系统，其特征在于，包括：基站数据采集存储模块，用于数据采集终端将采集的基站数据通过消息队列Jafka传输至服务器基站采集服务，服务器基站采集服务监听消息队列数据更新，读取数据包并进行解析后，判断基站数据完整性和基站实采点GPS坐标完整性，完成基站实采点基站数据录入，入库前对每条基站数据与数据库已存储的数据通过索引判别GPS坐标点是否已存在；所述基站数据包括大小区LAC/CI，GPS经纬度；基站查询模块，用于对附近守控到的有效基站发起基站位置查询，首先在本地存储中查询是否已存在对应的基站LAC/CI数据，若无则通过Http请求基站查询服务，返回基站坐标点和实采点坐标，依赖高德地图Marker标注和热力图功能，将基站数据绘制在地图中，同时对返回的基站数据在本地进行限量存储；定位标注模块，用于通过高德地图实时定位，在捕捉目标信号过程中，采用定时获取设备GPS坐标位置和中标时取GPS坐标位置相结合方式，在地图中用Marker覆盖物形式展现不同位置目标能量强弱，同时将每次获取的数据通过Http上传到云端服务器进行存储；目标捕获后自动标红基站，上报数值记录轨迹并可进行回放。6.根据权利要求5所述的基于地图界面大数据应用综合定位系统，其特征在于，所述基站数据还包括采集点基站制式、频点pci、采集时间。7.根据权利要求5所述的基于地图界面大数据应用综合定位系统，其特征在于，所述定位标注模块中，为了避免坐标点过于密集，影响展示效果，在对数据源依据时间排序前提下，每次标注时都对当前标注点GPS坐标与历史标注点GPS坐标的距离根据地图缩放层级进行更新，隐藏近距离覆盖物，避免区域出现过量密集覆盖物，使展示更加清晰直观。8.根据权利要求5所述的基于地图界面大数据应用综合定位系统，其特征在于，所述定位标注模块还用于：针对两个坐标点距离过远，通过递归算法，按照如下计算逻辑，在确保路线一致前提下，使回放动画更加平滑：定义起始坐标点，；定义中间计算量sx，sy，sz，ex，ey，ez；定义中间计算量mx，my，mz；定义目标坐标点；y＝tan；最终得到目标坐标点。
说明书desc
技术领域本发明属于大数据综合定位技术领域，尤其涉及一种基于地图界面大数据应用综合定位方法及系统。背景技术大数据综合定位系统基于地图界面展现，应用时通过无线网络调用多个数据源，在地图界面自动调用、查询接口数据，自动展示出设备守控基站位置及覆盖区域，设备捕获目标后对应覆盖区域标红提示，中标所报数值以设备使用轨迹方式展示。目前行业内基于地图界面应用极少，多数设备不依托网络单机运行，该类设备使用中只能显示自身位置，捕获目标后仅显示部分数值轨迹。工作方式相对单一，未形成闭环应用。发明内容本发明针对现有大数据综合定位系统中多数设备不依托网络单机运行，该类设备使用中只能显示自身位置，捕获目标后仅显示部分数值轨迹，工作方式相对单一，未形成闭环应用的问题，提出一种基于地图界面大数据应用综合定位方法及系统。为了实现上述目的，本发明采用以下技术方案：本发明一方面提出一种基于地图界面大数据应用综合定位方法，包括：步骤1，数据采集终端将采集的基站数据通过消息队列Jafka传输至服务器基站采集服务，服务器基站采集服务监听消息队列数据更新，读取数据包并进行解析后，判断基站数据完整性和基站实采点GPS坐标完整性，完成基站实采点基站数据录入，入库前对每条基站数据与数据库已存储的数据通过索引判别GPS坐标点是否已存在；所述基站数据包括大小区LAC/CI，GPS经纬度；步骤2，对附近守控到的有效基站发起基站位置查询，首先在本地存储中查询是否已存在对应的基站LAC/CI数据，若无则通过Http请求基站查询服务，返回基站坐标点和实采点坐标，依赖高德地图Marker标注和热力图功能，将基站数据绘制在地图中，同时对返回的基站数据在本地进行限量存储；步骤3，通过高德地图实时定位，在捕捉目标信号过程中，采用定时获取设备GPS坐标位置和中标时取GPS坐标位置相结合方式，在地图中用Marker覆盖物形式展现不同位置目标能量强弱，同时将每次获取的数据通过Http上传到云端服务器进行存储；目标捕获后自动标红基站，上报数值记录轨迹并可进行回放。进一步地，所述基站数据还包括采集点基站制式、频点pci、采集时间。进一步地，所述步骤3中，为了避免坐标点过于密集，影响展示效果，在对数据源依据时间排序前提下，每次标注时都对当前标注点GPS坐标与历史标注点GPS坐标的距离根据地图缩放层级进行更新，隐藏近距离覆盖物，避免区域出现过量密集覆盖物，使展示更加清晰直观。进一步地，所述步骤3还包括：针对两个坐标点距离过远，通过递归算法，按照如下计算逻辑，在确保路线一致前提下，使回放动画更加平滑：定义起始坐标点，；定义中间计算量sx，sy，sz，ex，ey，ez；定义中间计算量mx，my，mz；定义目标坐标点；y＝tan；最终得到目标坐标点。本发明另一方面提出一种基于地图界面大数据应用综合定位系统，包括：基站数据采集存储模块，用于数据采集终端将采集的基站数据通过消息队列Jafka传输至服务器基站采集服务，服务器基站采集服务监听消息队列数据更新，读取数据包并进行解析后，判断基站数据完整性和基站实采点GPS坐标完整性，完成基站实采点基站数据录入，入库前对每条基站数据与数据库已存储的数据通过索引判别GPS坐标点是否已存在；所述基站数据包括大小区LAC/CI，GPS经纬度；基站查询模块，用于对附近守控到的有效基站发起基站位置查询，首先在本地存储中查询是否已存在对应的基站LAC/CI数据，若无则通过Http请求基站查询服务，返回基站坐标点和实采点坐标，依赖高德地图Marker标注和热力图功能，将基站数据绘制在地图中，同时对返回的基站数据在本地进行限量存储；定位标注模块，用于通过高德地图实时定位，在捕捉目标信号过程中，采用定时获取设备GPS坐标位置和中标时取GPS坐标位置相结合方式，在地图中用Marker覆盖物形式展现不同位置目标能量强弱，同时将每次获取的数据通过Http上传到云端服务器进行存储；目标捕获后自动标红基站，上报数值记录轨迹并可进行回放。进一步地，所述基站数据还包括采集点基站制式、频点pci、采集时间。进一步地，所述定位标注模块中，为了避免坐标点过于密集，影响展示效果，在对数据源依据时间排序前提下，每次标注时都对当前标注点GPS坐标与历史标注点GPS坐标的距离根据地图缩放层级进行更新，隐藏近距离覆盖物，避免区域出现过量密集覆盖物，使展示更加清晰直观。进一步地，所述定位标注模块还用于：针对两个坐标点距离过远，通过递归算法，按照如下计算逻辑，在确保路线一致前提下，使回放动画更加平滑：定义起始坐标点，；定义中间计算量sx，sy，sz，ex，ey，ez；定义中间计算量mx，my，mz；定义目标坐标点；y＝tan；最终得到目标坐标点。与现有技术相比，本发明具有的有益效果：本发明通过网络将传统无线信号捕捉设备单一作战方式进行提升，设备自动搜索、自动采集基站数据，同时结合路测数据源和网络数据源以地图界面与操作人员进行交互，改变以往只有数据列表展示方式。将无线终端信号解析捕捉由独立的单兵作战变为综合立体解决方案；具有以下优势：1、地图界面人机友好交互本发明开创了一种新的应用方式，改变了以往“开关、图表”等方式，操作相对复杂，对使用人员要求较高。地图人机交互友好，操作简便、易用更加符合当前阶段及今后发展趋势。2、基站范围实时显示设备应用时实时调用服务器数据，在界面上显示当前设备守控基站位置及范围，解决了原来查找基站位置的麻烦，有助于使用人员判断搜索区域，大大提高设备使用效率。3、目标捕获后自动标红基站，上报数值记录轨迹并可进行回放设备调用中标基站信息在地图界面对应GPS位置及覆盖进行标红，同时调用设备上报数值及GPS信息在地图界面对应标注并保存，设备处于短信触发停止状态下可进行轨迹调用回放。通过该功能可为进一步确定目标精确位置提供指导，同时对于后期数据分析提供帮助。附图说明图1为本发明实施例一种基于地图界面大数据应用综合定位方法的基站数据采集存储流程图；图2为本发明实施例一种基于地图界面大数据应用综合定位方法的基站查询流程图；图3为本发明实施例一种基于地图界面大数据应用综合定位方法的定位标注和历史回放流程图。具体实施方式下面结合附图和具体的实施例对本发明做进一步的解释说明：如图1-图3所示，一种基于地图界面大数据应用综合定位方法，包括：步骤S101，数据采集终端将采集的基站数据通过消息队列Jafka传输至服务器基站采集服务，服务器基站采集服务监听消息队列数据更新，读取数据包并进行解析后，判断基站数据完整性和基站实采点GPS坐标完整性，完成基站实采点基站数据录入，入库前对每条基站数据与数据库已存储的数据通过索引判别GPS坐标点是否已存在，从而保证基站实采点准确性同时，减少数据量，提升以后基站查询时的速度；所述基站数据包括采集点基站制式、大小区LAC/CI、频点pci、GPS经纬度、采集时间等数据；步骤S102，对附近守控到的有效基站发起基站位置查询，首先在本地存储中查询是否已存在对应的基站LAC/CI数据，若无则通过Http请求基站查询服务，返回基站坐标点和实采点坐标，依赖高德地图Marker标注和热力图功能，将基站数据绘制在地图中，同时对返回的基站数据在本地进行限量存储；步骤S103，通过高德地图实时定位，在捕捉目标信号过程中，采用定时获取设备GPS坐标位置和中标时取GPS坐标位置相结合方式，在地图中用Marker覆盖物形式展现不同位置目标能量强弱，同时将每次获取的数据通过Http上传到云端服务器进行存储；目标捕获后自动标红基站，上报数值记录轨迹并可进行回放。进一步地，所述步骤S103中，为了避免坐标点过于密集，影响展示效果，在对数据源依据时间排序前提下，每次标注时都对当前标注点GPS坐标与历史标注点GPS坐标的距离根据地图缩放层级进行更新，隐藏近距离覆盖物，避免区域出现过量密集覆盖物，使展示更加清晰直观。进一步地，所述步骤S103还包括：选择某个定位事件，从本机存储数据中过滤出此事件所有的定位详细数据，将数据根据GPS和坐标点对应能量的方式在高德地图绘制覆盖物Marker点，最终以动画形式将此次定位事件运动轨迹展现；除了对GPS间距过近增加过滤算法外，针对两个坐标点距离过远，通过递归算法，按照如下计算逻辑，在确保路线一致前提下，使回放动画更加平滑：定义起始坐标点，；定义中间计算量sx，sy，sz，ex，ey，ez；定义中间计算量mx，my，mz；定义目标坐标点；y＝tan；最终得到目标坐标点。在上述实施例的基础上，本发明另一方面提出一种基于地图界面大数据应用综合定位系统，包括：基站数据采集存储模块，用于数据采集终端将采集的基站数据通过消息队列Jafka传输至服务器基站采集服务，服务器基站采集服务监听消息队列数据更新，读取数据包并进行解析后，判断基站数据完整性和基站实采点GPS坐标完整性，完成基站实采点基站数据录入，入库前对每条基站数据与数据库已存储的数据通过索引判别GPS坐标点是否已存在；所述基站数据包括大小区LAC/CI，GPS经纬度；基站查询模块，用于对附近守控到的有效基站发起基站位置查询，首先在本地存储中查询是否已存在对应的基站LAC/CI数据，若无则通过Http请求基站查询服务，返回基站坐标点和实采点坐标，依赖高德地图Marker标注和热力图功能，将基站数据绘制在地图中，同时对返回的基站数据在本地进行限量存储；定位标注模块，用于通过高德地图实时定位，在捕捉目标信号过程中，采用定时获取设备GPS坐标位置和中标时取GPS坐标位置相结合方式，在地图中用Marker覆盖物形式展现不同位置目标能量强弱，同时将每次获取的数据通过Http上传到云端服务器进行存储；目标捕获后自动标红基站，上报数值记录轨迹并可进行回放。进一步地，所述定位标注模块中，为了避免坐标点过于密集，影响展示效果，在对数据源依据时间排序前提下，每次标注时都对当前标注点GPS坐标与历史标注点GPS坐标的距离根据地图缩放层级进行更新，隐藏近距离覆盖物，避免区域出现过量密集覆盖物，使展示更加清晰直观。进一步地，所述定位标注模块还用于：针对两个坐标点距离过远，通过递归算法，按照如下计算逻辑，在确保路线一致前提下，使回放动画更加平滑：定义起始坐标点，；定义中间计算量sx，sy，sz，ex，ey，ez；定义中间计算量mx，my，mz；定义目标坐标点；y＝tan；最终得到目标坐标点。综上，本发明通过网络将传统无线信号捕捉设备单一作战方式进行提升，设备自动搜索、自动采集基站数据，同时结合路测数据源和网络数据源以地图界面与操作人员进行交互，改变以往只有数据列表展示方式。将无线终端信号解析捕捉由独立的单兵作战变为综合立体解决方案；具有以下优势：1、地图界面人机友好交互本发明开创了一种新的应用方式，改变了以往“开关、图表”等方式，操作相对复杂，对使用人员要求较高。地图人机交互友好，操作简便、易用更加符合当前阶段及今后发展趋势。2、基站范围实时显示设备应用时实时调用服务器数据，在界面上显示当前设备守控基站位置及范围，解决了原来查找基站位置的麻烦，有助于使用人员判断搜索区域，大大提高设备使用效率。3、目标捕获后自动标红基站，上报数值记录轨迹并可进行回放设备调用中标基站信息在地图界面对应GPS位置及覆盖进行标红，同时调用设备上报数值及GPS信息在地图界面对应标注并保存，设备处于短信触发停止状态下可进行轨迹调用回放。通过该功能可为进一步确定目标精确位置提供指导，同时对于后期数据分析提供帮助。以上所示仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本发明的保护范围。
