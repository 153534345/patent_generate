标题title
电梯内外识别方法、装置、电子设备及存储介质
摘要abst
本公开提供一种电梯内外识别方法、装置、电子设备及存储介质。该方法包括：获取机器人拍摄的原始电梯图像，对原始电梯图像进行处理得到样本训练集，其中原始电梯图像为机器人所在位置的上方对应的电梯内部的环境图像；基于样本训练集以及预训练的指导模型，对电梯内外识别模型进行训练；将训练后的电梯内外识别模型部署到机器人中，以使机器人在采集上方环境图像后，将上方环境图像作为电梯内外识别模型的输入，利用电梯内外识别模型对机器人在电梯内外的结果进行预测，并当判断机器人在电梯内时，输出机器人对应电梯内的空间位置。本公开提高了机器人在电梯内外识别的效率和准确率，提升电梯内外识别的效果。
权利要求书clms
1.一种电梯内外识别方法，其特征在于，包括：获取机器人在历史任务中拍摄的原始电梯图像，利用预定的标注方式对所述原始电梯图像进行处理得到样本训练集，其中所述原始电梯图像为所述机器人所在位置的上方对应的电梯内部的环境图像；基于所述样本训练集以及预训练的指导模型，对预设的电梯内外识别模型进行训练，以便对所述电梯内外识别模型中的参数进行更新；将训练后的所述电梯内外识别模型部署到所述机器人中，以使所述机器人在采集上方环境图像后，将所述上方环境图像作为所述电梯内外识别模型的输入，利用所述电梯内外识别模型对所述机器人在电梯内外的结果进行预测，并当判断所述机器人在电梯内时，输出所述机器人对应所述电梯内的空间位置。2.根据权利要求1所述的方法，其特征在于，所述获取机器人在历史任务中拍摄的原始电梯图像，利用预定的标注方式对所述原始电梯图像进行处理得到样本训练集，包括：从云平台数据库中获取所述机器人在所述历史任务的执行过程中拍摄到的原始电梯图像，对所述原始电梯图像进行空间特征提取，获取所述原始电梯图像中电梯顶部位置所对应的角点位置坐标，基于所述原始电梯图像以及所述角点位置坐标，利用数据增强的方式生成所述样本训练集。3.根据权利要求2所述的方法，其特征在于，所述基于所述原始电梯图像以及所述角点位置坐标，利用数据增强的方式生成所述样本训练集，包括：利用预设的颜色转换方式，对所述原始电梯图像执行颜色转换操作，得到经颜色转换后的第一电梯图像；利用预设的图像旋转方式，对所述电梯图像执行图像旋转操作，得到经图像旋转后的第二电梯图像；利用预设的空间扰动方式，对所述原始电梯图像对应的角点位置坐标进行空间扰动，得到经空间扰动后的第三电梯图像；基于所述第一电梯图像、所述第二电梯图像、和/或所述第三电梯图像生成所述样本训练集。4.根据权利要求3所述的方法，其特征在于，所述方法还包括：获取所述机器人在历史任务中利用前部摄像头所拍摄的前方环境图像，并利用安装在所述机器人上的激光传感器采集周围环境的点云数据，对所述点云数据进行处理得到二维图像；对所述前方环境图像以及所述二维图像分别进行数据增强，基于对所述原始电梯图像进行数据增强的结果，以及对所述前方环境图像和所述二维图像进行数据增强的结果，生成所述样本训练集。5.根据权利要求3或4所述的方法，其特征在于，所述基于所述样本训练集以及预训练的指导模型，对预设的电梯内外识别模型进行训练，包括：利用知识蒸馏的方式对所述电梯内外识别模型进行迁移学习训练，将所述样本训练集作为所述指导模型的输入，利用所述样本训练集对所述指导模型进行训练，得到训练后的指导模型，并对所述指导模型进行模型压缩，得到训练前的所述电梯内外识别模型；利用训练后的所述指导模型中的参数以及置信度对训练前的所述电梯内外识别模型的参数进行更新，得到参数更新后的所述电梯内外识别模型。6.根据权利要求1所述的方法，其特征在于，所述以使所述机器人在采集上方环境图像后，将所述上方环境图像作为所述电梯内外识别模型的输入，利用所述电梯内外识别模型对所述机器人在电梯内外的结果进行预测，包括：在所述机器人的任务执行过程中，利用安装在所述机器人顶部的摄像头对机器人所在位置的上方环境图像进行采集，将所述上方环境图像输入到训练后的所述电梯内外识别模型中，利用所述电梯内外识别模型对所述机器人当前位置环境进行预测，得到所述机器人的当前位置是否在电梯内的判断结果，并当判断所述机器人在电梯内时，输出所述机器人对应所述电梯内空间位置的位置坐标。7.根据权利要求6所述的方法，其特征在于，所述方法还包括：在所述机器人的任务执行过程中，利用安装在所述机器人前部的摄像头对机器人所在位置的前方环境图像进行采集，并利用安装在所述机器人上的激光传感器采集当前周围环境的点云数据；将所述上方环境图像、所述前方环境图像、以及所述点云数据输入到训练后的所述电梯内外识别模型中，利用所述电梯内外识别模型对所述机器人当前位置环境进行预测，得到所述机器人的当前位置是否在电梯内的判断结果，并当判断所述机器人在电梯内时，输出所述机器人对应所述电梯内空间位置的位置坐标。8.一种电梯内外识别装置，其特征在于，包括：获取模块，被配置为获取机器人在历史任务中拍摄的原始电梯图像，利用预定的标注方式对所述原始电梯图像进行处理得到样本训练集，其中所述原始电梯图像为所述机器人所在位置的上方对应的电梯内部的环境图像；训练模块，被配置为基于所述样本训练集以及预训练的指导模型对预设的电梯内外识别模型进行训练，以便对所述电梯内外识别模型中的参数进行更新；预测模块，被配置为将训练后的所述电梯内外识别模型部署到所述机器人中，以使所述机器人在采集上方环境图像后，将所述上方环境图像作为所述电梯内外识别模型的输入，利用所述电梯内外识别模型对所述机器人在电梯内外的结果进行预测，并当判断所述机器人在电梯内时，输出所述机器人对应所述电梯内的空间位置。9.一种电子设备，包括存储器，处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现如权利要求1至7中任一项所述的方法。10.一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至7中任一项所述的方法。
说明书desc
技术领域本公开涉及计算机技术领域，尤其涉及一种电梯内外识别方法、装置、电子设备及存储介质。背景技术随着机器人技术的发展和人工智能研究不断深入，智能移动机器人在人类生活中扮演越来越重要的角色，在诸多领域中得到广泛应用。例如在酒店场景中，酒店服务机器人可被用于执行送物、迎宾、巡游等任务，而在机器人执行任务的过程中，可能需要机器人乘坐电梯实现跨楼层的作业。因此在机器人的任务执行过程中，对机器人所处电梯内外的环境进行判断，这不仅有利于对机器人所处环境的安全性检验，也是机器人完成服务任务的前提之一。现有技术中，目前市面上的机器人主要基于图像识别技术判断其位于电梯内还是电梯外，但是在利用机器人的摄像头进行图像采集时，由于机器人摄像头的安装位置通常比较低，因此容易被周围的人产生遮挡，基于网络模型对图像进行识别时，无法准确判断机器人在电梯内还是电梯外；另外，由于现有的用于电梯内外识别的网络模型结构比较复杂，计算具有滞后性和延迟性，不能及时向机器人反馈判断结果，从而降低电梯内外识别的效果。发明内容有鉴于此，本公开实施例提供了一种电梯内外识别方法、装置、电子设备及存储介质，以解决现有技术存在的对机器人所在电梯内外的识别效率低，判断结果的准确率较差，降低电梯内外识别效果的问题。本公开实施例的第一方面，提供了一种电梯内外识别方法，包括：获取机器人在历史任务中拍摄的原始电梯图像，利用预定的标注方式对原始电梯图像进行处理得到样本训练集，其中原始电梯图像为机器人所在位置的上方对应的电梯内部的环境图像；基于样本训练集以及预训练的指导模型，对预设的电梯内外识别模型进行训练，以便对电梯内外识别模型中的参数进行更新；将训练后的电梯内外识别模型部署到机器人中，以使机器人在采集上方环境图像后，将上方环境图像作为电梯内外识别模型的输入，利用电梯内外识别模型对机器人在电梯内外的结果进行预测，并当判断机器人在电梯内时，输出机器人对应电梯内的空间位置。本公开实施例的第二方面，提供了一种电梯内外识别装置，包括：获取模块，被配置为获取机器人在历史任务中拍摄的原始电梯图像，利用预定的标注方式对原始电梯图像进行处理得到样本训练集，其中原始电梯图像为机器人所在位置的上方对应的电梯内部的环境图像；训练模块，被配置为基于样本训练集以及预训练的指导模型，对预设的电梯内外识别模型进行训练，以便对电梯内外识别模型中的参数进行更新；预测模块，被配置为将训练后的电梯内外识别模型部署到机器人中，以使机器人在采集上方环境图像后，将上方环境图像作为电梯内外识别模型的输入，利用电梯内外识别模型对机器人在电梯内外的结果进行预测，并当判断机器人在电梯内时，输出机器人对应电梯内的空间位置。本公开实施例的第三方面，提供了一种电子设备，包括存储器，处理器及存储在存储器上并可在处理器上运行的计算机程序，处理器执行程序时实现上述方法的步骤。本公开实施例的第四方面，提供了一种计算机可读存储介质，该计算机可读存储介质存储有计算机程序，该计算机程序被处理器执行时实现上述方法的步骤。本公开实施例采用的上述至少一个技术方案能够达到以下有益效果：通过获取机器人在历史任务中拍摄的原始电梯图像，利用预定的标注方式对原始电梯图像进行处理得到样本训练集，其中原始电梯图像为机器人所在位置的上方对应的电梯内部的环境图像；基于样本训练集以及预训练的指导模型，对预设的电梯内外识别模型进行训练，以便对电梯内外识别模型中的参数进行更新；将训练后的电梯内外识别模型部署到机器人中，以使机器人在采集上方环境图像后，将上方环境图像作为电梯内外识别模型的输入，利用电梯内外识别模型对机器人在电梯内外的结果进行预测，并当判断机器人在电梯内时，输出机器人对应电梯内的空间位置。本公开能够提高对机器人所在电梯内外的识别效率，具有较高的识别准确率，降低了识别的滞后性和延迟性，提升电梯内外识别的效果。附图说明为了更清楚地说明本公开实施例中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本公开的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它的附图。图1是本公开实施例提供的电梯内外识别方法的流程示意图；图2是本公开实施例提供的电梯内外识别装置的结构示意图；图3是本公开实施例提供的电子设备的结构示意图。具体实施方式以下描述中，为了说明而不是为了限定，提出了诸如特定系统结构、技术之类的具体细节，以便透彻理解本公开实施例。然而，本领域的技术人员应当清楚，在没有这些具体细节的其它实施例中也可以实现本公开。在其它情况中，省略对众所周知的系统、装置、电路以及方法的详细说明，以免不必要的细节妨碍本公开的描述。如前述背景技术内容，随着机器人技术的迅速发展，移动机器人的应用领域越来越广泛，对于工作在酒店、写字楼、医院和餐厅等室内环境下的智能服务型移动机器人来说，机器人执行服务任务的过程中，可能需要机器人乘坐电梯实现跨楼层的作业。例如在某些应用场合，机器人可能会被用于跨楼层的场景中，比如跨楼层送物、跨楼层巡游等。在这些业务场景中，机器人往往需要乘坐电梯来实现跨楼层作业，因此如何对机器人当前位置进行电梯内外的识别，这不仅是对机器人所处环境安全性检验的关键，也是其完成服务任务的前提。目前在基于计算机视觉的人工智能算法进行电梯内外的识别时，由于机器人依靠激光扫描进入电梯，因此在某些情况下机器人无法判断有没有进入电梯。现有技术中虽然可以依靠图像识别技术对机器人的周围环境进行识别，但是在利用机器人的摄像头进行图像采集时，由于机器人摄像头的安装位置通常比较低，因此容易被周围的人产生遮挡，在基于网络模型对图像进行识别时，无法准确判断机器人在电梯内还是电梯外；另外，目前用于电梯内外识别的网络模型结构比较复杂，计算具有滞后性和延迟性，不能及时向机器人反馈判断结果，从而降低电梯内外识别的效果。鉴于以上现有技术中的问题，本公开提出一种全新的基于神经网络模型的电梯内外识别方法，本公开用于模型训练的样本训练集中包含电梯内的上方环境图像，基于机器人所在位置处的上方环境图像进行标注，并对上方环境图像中的空间位置特征进行提取，从而使训练后的神经网络模型能够基于机器人的上方环境图像判断机器人在电梯里面还是外面。另外，本公开实施例采用知识蒸馏的方式进行模型训练，使得训练后的电梯内外识别模型不仅具有与指导模型相似的识别精度，而且具有更小的体积和更低的算力要求，这样不仅减少了参数数目，而且避免了大量计算，减少对机器人内存的占用，使模型训练和检测过程变得简单高效。图1是本公开实施例提供的电梯内外识别方法的流程示意图。图1的电梯内外识别方法可以由服务器执行。如图1所示，该电梯内外识别方法具体可以包括：S101，获取机器人在历史任务中拍摄的原始电梯图像，利用预定的标注方式对原始电梯图像进行处理得到样本训练集，其中原始电梯图像为机器人所在位置的上方对应的电梯内部的环境图像；S102，基于样本训练集以及预训练的指导模型，对预设的电梯内外识别模型进行训练，以便对电梯内外识别模型中的参数进行更新；S103，将训练后的电梯内外识别模型部署到机器人中，以使机器人在采集上方环境图像后，将上方环境图像作为电梯内外识别模型的输入，利用电梯内外识别模型对机器人在电梯内外的结果进行预测，并当判断机器人在电梯内时，输出机器人对应电梯内的空间位置。具体地，本公开实施例的机器人属于智能服务型移动机器人，例如设置在酒店中的服务机器人，商场中的服务机器人等。本公开实施例中的原始电梯图像是指机器人在执行服务任务的过程中，采集到的电梯内部位于机器人上方的环境图像，原始电梯图像中包含电梯的顶棚，因此后面在对原始电梯图像进行处理时，可以提取原始电梯图像中顶棚所对应的四个角度的空间位置坐标，并将角点的空间位置坐标作为样本训练集中的组成部分。进一步地，知识蒸馏是指将一个预先训练好的大模型的知识通过知识蒸馏的方式迁移到一个较小的模型当中。通过知识蒸馏的方式，可以使小模型学习到大模型的知识，从而根据大模型的知识对自身的模型参数进行更新，使得小模型可以具有与大模型相似的识别精度，同时具有更轻量化的模型结构以及更低的算力要求。本公开利用迁移学习训练的电梯内外识别模型不仅可以预测出机器人当前在电梯内外的概率，而且可以计算出机器人在电梯内的空间位置对应的坐标。根据本公开实施例提供的技术方案，本公开通过获取机器人在历史任务中拍摄的原始电梯图像，利用预定的标注方式对原始电梯图像进行处理得到样本训练集，其中原始电梯图像为机器人所在位置的上方对应的电梯内部的环境图像；基于样本训练集以及预训练的指导模型，对预设的电梯内外识别模型进行训练，以便对电梯内外识别模型中的参数进行更新；将训练后的电梯内外识别模型部署到机器人中，以使机器人在采集上方环境图像后，将上方环境图像作为电梯内外识别模型的输入，利用电梯内外识别模型对机器人在电梯内外的结果进行预测，并当判断机器人在电梯内时，输出机器人对应电梯内的空间位置。本公开能够提高对机器人所在电梯内外的识别效率，具有较高的识别准确率，降低了识别的滞后性和延迟性，提升电梯内外识别的效果。在一些实施例中，获取机器人在历史任务中拍摄的原始电梯图像，利用预定的标注方式对原始电梯图像进行处理得到样本训练集，包括：从云平台数据库中获取机器人在历史任务的执行过程中拍摄到的原始电梯图像，对原始电梯图像进行空间特征提取，获取原始电梯图像中电梯顶部位置所对应的角点位置坐标，基于原始电梯图像以及角点位置坐标，利用数据增强的方式生成样本训练集。具体地，机器人在执行历史任务的过程中会采集一些原始电梯图像，并将这些原始电梯图像上传到云平台数据库中进行存储，因此在对电梯内外识别模型进行训练之前，需要从云平台数据库中获取这些原始电梯图像来生成样本训练集。进一步地，在基于原始电梯图像生成样本训练集时，需要先对原始电梯图像进行空间特征提取，由于原始电梯图像是电梯内部的上方环境图像，因此原始电梯图像中通常包含电梯的顶棚。基于原始电梯图像中的顶棚，利用空间特征提取的方式对原始电梯图像中的电梯角度位置坐标进行标注。在一些实施例中，基于原始电梯图像以及角点位置坐标，利用数据增强的方式生成样本训练集，包括：利用预设的颜色转换方式，对原始电梯图像执行颜色转换操作，得到经颜色转换后的第一电梯图像；利用预设的图像旋转方式，对电梯图像执行图像旋转操作，得到经图像旋转后的第二电梯图像；利用预设的空间扰动方式，对原始电梯图像对应的角点位置坐标进行空间扰动，得到经空间扰动后的第三电梯图像；基于第一电梯图像、第二电梯图像、和/或第三电梯图像生成样本训练集。具体地，在获取原始电梯图像以及原始电梯图像进行角点位置坐标的标注之后，为了扩大了训练数据集的规模，可以通过数据增强的方式对原始电梯图像以及角点位置坐标进行处理。在实际应用中，数据增强也可以称为数据增广，利用增广后的样本训练集对电梯内外识别模型进行训练，不仅减小了标注不准确带来的影响，还扩充了数据量，提高了模型的鲁棒性。进一步地，在对原始电梯图像进行数据增强时，可以采用颜色转换或者图像旋转的方式生成新的电梯图像，在进行颜色转换时，可以根据预设的颜色进行转换，使具有相同内容的电梯图像之间具有不同的颜色。除了采用上述方式对原始电梯图像进行数据增强之外，还可以对原始电梯图像对应的四个角度坐标进行空间扰动，生成更多的相似位置坐标。最后，根据原始电梯图像，原始电梯图像对应的角点位置坐标，以及经过数据增强后的电梯图像和角点位置坐标数据生成样本训练集。在一些实施例中，该方法还包括：获取机器人在历史任务中利用前部摄像头所拍摄的前方环境图像，并利用安装在机器人上的激光传感器采集周围环境的点云数据，对点云数据进行处理得到二维图像；对前方环境图像以及二维图像分别进行数据增强，基于对原始电梯图像进行数据增强的结果，以及对前方环境图像和二维图像进行数据增强的结果，生成样本训练集。具体地，本公开实施例在生成样本训练集时，除了采用电梯内的上方环境图像之外，还可以进一步获取机器人在电梯内所拍摄到的前方环境图像，以及机器人周围环境的点云数据。通过将一维的点云数据展平为二维图像数据，并将二维图像数据拉伸为640X480的二维图像，之后基于原始电梯图像、对前方环境图像以及二维图像生成样本训练集。进一步地，可以采用前述实施例中对原始电梯图像进行数据增强的方式，对前方环境图像以及二维图像进行数据增强处理，以获得更多的样本数据。这里对前方环境图像以及二维图像进行数据增强的过程不再赘述。在一些实施例中，基于样本训练集以及预训练的指导模型，对预设的电梯内外识别模型进行训练，包括：利用知识蒸馏的方式对电梯内外识别模型进行迁移学习训练，将样本训练集作为指导模型的输入，利用样本训练集对指导模型进行训练，得到训练后的指导模型，并对指导模型进行模型压缩，得到训练前的电梯内外识别模型；利用训练后的指导模型中的参数以及置信度对训练前的电梯内外识别模型的参数进行更新，得到参数更新后的电梯内外识别模型。具体地，在对电梯内外识别模型进行迁移学习训练之前，首先利用上述处理得到的样本训练集对指导模型进行训练，得到训练后的指导模型，之后对训练后的指导模型进行模型压缩，模型压缩可以通过减少卷积神经网络模型的通道数等方式进行压缩，将压缩后的模型作为未训练的电梯内外识别模型。进一步地，由于本公开实施例需要在机器人端侧进行边缘计算的内外识别，因此采用知识蒸馏的方式，将训练后的指导模型作为大模型，将未训练的电梯内外识别模型作为小模型采用大模型作为标签数据对小模型进行训练，使得小模型可以在低算力条件下达到近似大模型的进度效果，达到高效的精度算力比。进一步地，知识蒸馏是指将一个预先训练好的大模型的知识通过知识蒸馏的方式迁移到一个较小的模型当中。本公开实施例中大模型是指训练后的指导模型，小模型是指未训练的电梯内外识别模型。知识蒸馏的目的是为了让小模型学到大模型的知识，即让student模型的输出接近teacher模型的输出。因此，在基于知识蒸馏的联合学习过程中，通过定义损失函数去衡量student模型和teacher模型的接近程度。进一步地，本公开实施例的电梯内外识别模型是基于卷积神经网络所构建的模型，电梯内外识别模型主要由以下三个部分组成：基于Shufflenet的骨干网络、特征融合模块以及检测头模块；其中，骨干网络主要用于对输入到模型中的图像对应的浅层特征进行提取，特征融合模块用于进一步提取特征图中的深层特征，并将深层特征与浅层特征进行特征融合，得到包含不同层次特征的特征图，从而使得模型预测结果更加的精确。在一些实施例中，以使机器人在采集上方环境图像后，将上方环境图像作为电梯内外识别模型的输入，利用电梯内外识别模型对机器人在电梯内外的结果进行预测，包括：在机器人的任务执行过程中，利用安装在机器人顶部的摄像头对机器人所在位置的上方环境图像进行采集，将上方环境图像输入到训练后的电梯内外识别模型中，利用电梯内外识别模型对机器人当前位置环境进行预测，得到机器人的当前位置是否在电梯内的判断结果，并当判断机器人在电梯内时，输出机器人对应电梯内空间位置的位置坐标。具体地，将训练好的电梯内外识别模型部署到机器人中，在后续机器人执行服务任务时，利用安装在机器人顶部的摄像头，对机器人所在位置的上方环境图像进行实时采集，这里的顶部摄像头的方向既可以是机器人的正上方，也可以是斜上方等，顶部摄像头的不同拍摄角度不构成对本公开技术方案的限定。进一步地，利用机器人内的电梯内外识别模型对实时采集的上方环境图像进行识别，电梯内外识别模型的输出包含两方面内容，一方面是当前机器人在电梯内和电梯外的预测概率，另一方面是当判断机器人在电梯内是，输出机器人在电梯内的具体位置，即对电梯内的空间位置进行判定。电梯内外识别模型所输出的机器人所在电梯内的空间位置可以采用归一化的X，Y点进行表示。本公开实施例的电梯内外识别模型可以直接适配机器人，不需要复杂的设备和计算，本公开基于轻量化的卷积神经网络，检测过程中无需设置先验框，因此显著减少了参数数目，并且避免了大量计算，降低了对机器人的内存占用，模型训练和检测过程简单高效。在一些实施例中，该方法还包括：在机器人的任务执行过程中，利用安装在机器人前部的摄像头对机器人所在位置的前方环境图像进行采集，并利用安装在机器人上的激光传感器采集当前周围环境的点云数据；将上方环境图像、前方环境图像、以及点云数据输入到训练后的电梯内外识别模型中，利用电梯内外识别模型对机器人当前位置环境进行预测，得到机器人的当前位置是否在电梯内的判断结果，并当判断机器人在电梯内时，输出机器人对应电梯内空间位置的位置坐标。具体地，除了上述只采集上方环境图像进行识别之外，在实际应用中，还可以在采集上方环境图像的同时，实时采集机器人的前方环境图像以及当前周围环境的点云数据，并将这三种数据同时作为电梯内外识别模型的输入，利用电梯内外识别模型对机器人所在位置进行预测，由于电梯内外识别模型采用多输入多任务的类型，因此可同时输出电梯内外的预测结果以及机器人在电梯内的区域位置信息。根据本公开实施例提供的技术方案，本公开提出一种全新的基于神经网络模型的电梯内外识别方法，本公开用于模型训练的样本训练集中包含电梯内的上方环境图像，基于机器人所在位置处的上方环境图像进行标注，并对上方环境图像中的空间位置特征进行提取，从而使训练后的神经网络模型能够基于机器人的上方环境图像判断机器人在电梯里面还是外面。另外，本公开实施例采用知识蒸馏的方式进行模型训练，使得训练后的电梯内外识别模型不仅具有与指导模型相似的识别精度，而且具有更小的体积和更低的算力要求，这样不仅减少了参数数目，而且避免了大量计算，减少对机器人内存的占用，使模型训练和检测过程变得简单高效。下述为本公开装置实施例，可以用于执行本公开方法实施例。对于本公开装置实施例中未披露的细节，请参照本公开方法实施例。图2是本公开实施例提供的电梯内外识别装置的结构示意图。如图2所示，该电梯内外识别装置包括：获取模块201，被配置为获取机器人在历史任务中拍摄的原始电梯图像，利用预定的标注方式对原始电梯图像进行处理得到样本训练集，其中原始电梯图像为机器人所在位置的上方对应的电梯内部的环境图像；训练模块202，被配置为基于样本训练集以及预训练的指导模型，对预设的电梯内外识别模型进行训练，以便对电梯内外识别模型中的参数进行更新；预测模块203，被配置为将训练后的电梯内外识别模型部署到机器人中，以使机器人在采集上方环境图像后，将上方环境图像作为电梯内外识别模型的输入，利用电梯内外识别模型对机器人在电梯内外的结果进行预测，并当判断机器人在电梯内时，输出机器人对应电梯内的空间位置。在一些实施例中，图2的获取模块201从云平台数据库中获取机器人在历史任务的执行过程中拍摄到的原始电梯图像，对原始电梯图像进行空间特征提取，获取原始电梯图像中电梯顶部位置所对应的角点位置坐标，基于原始电梯图像以及角点位置坐标，利用数据增强的方式生成样本训练集。在一些实施例中，图2的获取模块201利用预设的颜色转换方式，对原始电梯图像执行颜色转换操作，得到经颜色转换后的第一电梯图像；利用预设的图像旋转方式，对电梯图像执行图像旋转操作，得到经图像旋转后的第二电梯图像；利用预设的空间扰动方式，对原始电梯图像对应的角点位置坐标进行空间扰动，得到经空间扰动后的第三电梯图像；基于第一电梯图像、第二电梯图像、和/或第三电梯图像生成样本训练集。在一些实施例中，图2的获取模块201获取机器人在历史任务中利用前部摄像头所拍摄的前方环境图像，并利用安装在机器人上的激光传感器采集周围环境的点云数据，对点云数据进行处理得到二维图像；对前方环境图像以及二维图像分别进行数据增强，基于对原始电梯图像进行数据增强的结果，以及对前方环境图像和二维图像进行数据增强的结果，生成样本训练集。在一些实施例中，图2的训练模块202将样本训练集作为指导模型的输入，利用样本训练集对指导模型进行训练，得到训练后的指导模型，并对指导模型进行模型压缩，得到训练前的电梯内外识别模型；利用训练后的指导模型中的参数以及置信度对训练前的电梯内外识别模型的参数进行更新，得到参数更新后的电梯内外识别模型。在一些实施例中，图2的预测模块203在机器人的任务执行过程中，利用安装在机器人顶部的摄像头对机器人所在位置的上方环境图像进行采集，将上方环境图像输入到训练后的电梯内外识别模型中，利用电梯内外识别模型对机器人当前位置环境进行预测，得到机器人的当前位置是否在电梯内的判断结果，并当判断机器人在电梯内时，输出机器人对应电梯内空间位置的位置坐标。在一些实施例中，图2的预测模块203在机器人的任务执行过程中，利用安装在机器人前部的摄像头对机器人所在位置的前方环境图像进行采集，并利用安装在机器人上的激光传感器采集当前周围环境的点云数据；将上方环境图像、前方环境图像、以及点云数据输入到训练后的电梯内外识别模型中，利用电梯内外识别模型对机器人当前位置环境进行预测，得到机器人的当前位置是否在电梯内的判断结果，并当判断机器人在电梯内时，输出机器人对应电梯内空间位置的位置坐标。应理解，上述实施例中各步骤的序号的大小并不意味着执行顺序的先后，各过程的执行顺序应以其功能和内在逻辑确定，而不应对本公开实施例的实施过程构成任何限定。图3是本公开实施例提供的电子设备3的结构示意图。如图3所示，该实施例的电子设备3包括：处理器301、存储器302以及存储在该存储器302中并且可以在处理器301上运行的计算机程序303。处理器301执行计算机程序303时实现上述各个方法实施例中的步骤。或者，处理器301执行计算机程序303时实现上述各装置实施例中各模块/单元的功能。示例性地，计算机程序303可以被分割成一个或多个模块/单元，一个或多个模块/单元被存储在存储器302中，并由处理器301执行，以完成本公开。一个或多个模块/单元可以是能够完成特定功能的一系列计算机程序指令段，该指令段用于描述计算机程序303在电子设备3中的执行过程。电子设备3可以是桌上型计算机、笔记本、掌上电脑及云端服务器等电子设备。电子设备3可以包括但不仅限于处理器301和存储器302。本领域技术人员可以理解，图3仅仅是电子设备3的示例，并不构成对电子设备3的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件，例如，电子设备还可以包括输入输出设备、网络接入设备、总线等。处理器301可以是中央处理单元，也可以是其它通用处理器、图形处理器、网络处理器、类脑处理器、数字信号处理器、专用集成电路、现场可编程门阵列或者其它可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等。存储器302可以是电子设备3的内部存储单元，例如，电子设备3的硬盘或内存。存储器302也可以是电子设备3的外部存储设备，例如，电子设备3上配备的插接式硬盘，智能存储卡，安全数字卡，闪存卡等。进一步地，存储器302还可以既包括电子设备3的内部存储单元也包括外部存储设备。存储器302用于存储计算机程序以及电子设备所需的其它程序和数据。存储器302还可以用于暂时地存储已经输出或者将要输出的数据。所属领域的技术人员可以清楚地了解到，为了描述的方便和简洁，仅以上述各功能单元、模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能单元、模块完成，即将装置的内部结构划分成不同的功能单元或模块，以完成以上描述的全部或者部分功能。实施例中的各功能单元、模块可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中，上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。另外，各功能单元、模块的具体名称也只是为了便于相互区分，并不用于限制本申请的保护范围。上述系统中单元、模块的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。在上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述或记载的部分，可以参见其它实施例的相关描述。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本公开的范围。在本公开所提供的实施例中，应该理解到，所揭露的装置/计算机设备和方法，可以通过其它的方式实现。例如，以上所描述的装置/计算机设备实施例仅仅是示意性的，例如，模块或单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通讯连接可以是通过一些接口，装置或单元的间接耦合或通讯连接，可以是电性，机械或其它的形式。作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本公开各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。集成的模块/单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读存储介质中。基于这样的理解，本公开实现上述实施例方法中的全部或部分流程，也可以通过计算机程序来指令相关的硬件来完成，计算机程序可以存储在计算机可读存储介质中，该计算机程序在被处理器执行时，可以实现上述各个方法实施例的步骤。计算机程序可以包括计算机程序代码，计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。计算机可读介质可以包括：能够携带计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。需要说明的是，计算机可读介质包含的内容可以根据司法管辖区内立法和专利实践的要求进行适当的增减，例如，在某些司法管辖区，根据立法和专利实践，计算机可读介质不包括电载波信号和电信信号。以上实施例仅用以说明本公开的技术方案，而非对其限制；尽管参照前述实施例对本公开进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本公开各实施例技术方案的精神和范围，均应包含在本公开的保护范围之内。
