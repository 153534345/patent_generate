标题title
房屋普查数据分组处理方法及系统
摘要abst
本发明涉及图像数据处理技术领域，公开一种房屋普查数据分组处理方法及系统，以便捷高效地实现可靠的数据采集。方法包括：在具GPS位置信息能实时获取并跟踪的移动通信终端中装载房屋测绘用的APP客户端；在数据采集过程中，客户端加载有至少两个相叠加的图层，至少一个图层为地图影像底图；至少一个图层为记录实况采集数据的编辑层；APP客户端从移动通信终端中获取GPS位置信息以定位用户当前所在的位置，并根据所设置的地图比例尺显示当前所在位置所辐射区域内各图层的信息；用户在编辑层中对目标小区通过模型复制‑缩放修正的方式实现房屋相对应外部轮廓线的分组绘制及属性赋值。
权利要求书clms
1.一种房屋普查数据分组处理方法，其特征在于，包括：在具GPS位置信息能实时获取并跟踪的移动通信终端中装载房屋测绘用的APP客户端；建立所述APP客户端与远程服务器之间的数据通道；在用户登录后，所述APP客户端与所述远程服务器进行数据同步；所述用户在所述APP客户端的菜单中选择显示和隐藏的相应图层后，启动数据采集处理；在数据采集过程中，所述客户端加载有至少两个相叠加的图层，至少一个图层为地图影像底图；至少一个图层为记录实况采集数据的编辑层；所述APP客户端从所述移动通信终端中获取GPS位置信息以定位用户当前所在的位置，并根据所设置的地图比例尺显示当前所在位置所辐射区域内各图层的信息；获取所述用户在所述编辑层中当前圈定普查的目标小区；在所述用户通过分割线将所述目标小区划分成与实际房屋数量一致的至少两个子区域后，获取所述用户将各子区域进行编号及根据各该编号将目测房屋轮廓线近似的至少两个房屋划分成同一组的分组信息；在所述用户根据实测数据完成同组内任意一个房屋相对应外部轮廓线的编辑后，将编辑后的房屋轮廓线封装成能复制的模型；获取所述用户对组内各房屋属性的信息，所述房屋属性包括实际的建筑面积和房屋类型；然后根据实际的建筑面积和地图比例尺提取对应的模型进行修正处理后显示在各该相对应的子区域内，然后在各该模型内根据不同的房屋类型填充相对应的不同颜色以完成数据采集；其中，根据实际的建筑面积和地图比例尺提取对应的模型进行修正处理具体包括：获取保存的实际建筑面积，计算并判断当前模型的填充面积相比于实际的建筑面积是否处于允许的误差范围内，如果超出误差范围，将外部轮廓线根据识别的拐点进行分段，然后分别按所计算出的等间距对外部轮廓线的各分段统一向外或向内平移处理后得到缩放后的首尾相接的轮廓线。2.根据权利要求1所述的方法，其特征在于，还包括：所述APP客户端根据所述用户的相应指令，将选中的任一模型生成对应的镜像模型，然后将该模型与对应的镜像模型组合成新的模型供剩余组复制。3.根据权利要求1或2所述的方法，其特征在于，在所述用户根据实测数据完成同组内任意一个房屋相对应轮廓线的编辑过程中，以下述方式先绘制房屋首尾相接的轮廓线：手绘方式，由所述用户参照底图的地图影像进行打点和描边；GPS方式，根据用户的相应操作间隔性获取用户在至少四个不同位置的GPS位置信息，在所述编辑层中根据各个定点位置的GPS位置信息进行打点后连接成首尾相接的轮廓线；手绘与GPS相结合方式，在所形成首尾相接的轮廓线中连接有至少一个根据所述用户所在位置实况的GPS位置信息所记录的打点；然后在绘制完的房屋首尾相接的轮廓线内以默认的颜色进行填充后封装成能复制的初始模型；根据所述用户的相应指令，对该初始模型进行相应的挖洞和/或修边处理以得到与房屋实质轮廓线趋势相似的最终模型。4.根据权利要求3所述的方法，其特征在于，所述修边处理具体包括：通过敞口的至少三段相连的修边线段与所述初始模型进行拼接，将与所述初始模型相邻的空白区域填充为所述模型新增的凸出区域，将所述初始模型中与修边线段所围合的交集区域从所述模型中剔除成凹陷区域；所述挖洞处理具体包括：通过一密闭的图形与所述初始模型进行相交处理，将该密闭图形内与所述初始模型共同的交集区域剔除为所述模型的孔洞区域，将该密闭图形内与所述初始模型相邻的空白区域填充为所述模型新增的凸出区域；其中，所述APP客户端根据所述修边线段是否闭合来识别用户操作是否为修边处理或挖洞处理。5.根据权利要求3所述的方法，其特征在于，在挖洞处理时，还包括：将洞中的填充颜色去除，并将洞的面积纳入实际建筑面积中。6.根据权利要求3所述的方法，其特征在于，还包括：数据采集完成后，将所述目标小区的分割子区域的各分割线进行隐藏或删除处理。7.根据权利要求3所述的方法，其特征在于，在所述手绘与GPS相结合方式中包括：以GPS方式根据用户的相应操作间隔性获取用户在至少四个不同位置的GPS位置信息，连成四边形的初始轮廓线；然后通过敞口的至少三段相连的修边线段与所述初始轮廓线进行拼接，将与所述初始轮廓线相邻的空白区域填充为所述初始轮廓线新增的凸出区域，将所述初始轮廓线中与修边线段所围合的交集区域从所述模型中剔除成凹陷区域。8.根据权利要求3所述的方法，其特征在于，还包括：所述APP客户端根据用户指令、或按固定时间间隔、或由相应的时间触发以将相应的采集信息上传至所述远程服务器。9.一种房屋普查数据分组处理系统，包括存储器、处理器以及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现上述权利要求1至8任一所述方法的步骤。
说明书desc
技术领域本发明涉及图像数据处理技术领域，尤其涉及一种房屋普查数据分组处理方法及系统。背景技术测绘，是指对自然地理要素或者地表人工设施的形状、大小、空间位置及其属性等进行测定、采集并绘制成图。基于测绘的房屋普查有利于国家相关部门的管理并能促进土地资源得到保护和充分利用。而在房屋普查过程中，如何便捷高效地实现可靠的数据采集成为一个急需解决的技术问题。发明内容本发明目的在于公开一种房屋普查数据分组处理方法及系统，以便捷高效地实现可靠的数据采集。为达上述目的，本发明公开一种房屋普查数据分组处理方法，包括：在具GPS位置信息能实时获取并跟踪的移动通信终端中装载房屋测绘用的APP客户端；建立所述APP客户端与远程服务器之间的数据通道；在用户登录后，所述APP客户端与所述远程服务器进行数据同步；所述用户在所述APP客户端的菜单中选择显示和隐藏的相应图层后，启动数据采集处理；在数据采集过程中，所述客户端加载有至少两个相叠加的图层，至少一个图层为地图影像底图；至少一个图层为记录实况采集数据的编辑层；所述APP客户端从所述移动通信终端中获取GPS位置信息以定位用户当前所在的位置，并根据所设置的地图比例尺显示当前所在位置所辐射区域内各图层的信息；获取所述用户在所述编辑层中当前圈定普查的目标小区；在所述用户通过分割线将所述目标小区划分成与实际房屋数量一致的至少两个子区域后，获取所述用户将各子区域进行编号及根据各该编号将目测房屋轮廓线近似的至少两个房屋划分成同一组的分组信息；在所述用户根据实测数据完成同组内任意一个房屋相对应外部轮廓线的编辑后，将编辑后的房屋轮廓线封装成能复制的模型；获取所述用户对组内各房屋属性的信息，所述房屋属性包括实际的建筑面积和房屋类型；然后根据实际的建筑面积和地图比例尺提取对应的模型进行修正处理后显示在各该相对应的子区域内，然后在各该模型内根据不同的房屋类型填充相对应的不同颜色以完成数据采集；其中，根据实际的建筑面积和地图比例尺提取对应的模型进行修正处理具体包括：获取保存的实际建筑面积，计算并判断当前模型的填充面积相比于实际的建筑面积是否处于允许的误差范围内，如果超出误差范围，将外部轮廓线根据识别的拐点进行分段，然后分别按所计算出的等间距对外部轮廓线的各分段统一向外或向内平移处理后得到缩放后的首尾相接的轮廓线。为达上述目的，本发明还公开一种房屋普查数据分组处理系统，包括存储器、处理器以及存储在存储器上并可在处理器上运行的计算机程序，其中，所述处理器执行所述计算机程序时实现上述方法的步骤。本发明具有以下有益效果：基于移动通信网络和GPS位置进行数据采集，确保了数据采集的真实性；也便于多用户同时分区域实现并行的数据采集。其中，在任一用户执行数据采集的过程中，用户在编辑层中对目标小区通过模型复制-缩放修正的方式实现房屋相对应外部轮廓线的分组绘制及属性赋值；达到了对目标小区通过分组来加快数据采集效率的绝佳效果。尤其是对聚集性的住宅类小区，小区内各楼栋的轮廓线型一般也仅为两到三种，通过分组可以极大地提升数据采集的效率。而且，大部分房屋主体部分与外部连接道路之间存在护栏和绿化带，不便于用户直接占位墙脚进行测绘，而迫使用户仅能在外部道路上以与墙边等间距的各点进行GPS打点并连接成轮廓图模型。藉此，通过该缩放处理则能实现用户在实际绘制房屋轮廓图的过程中，各采集点与房屋等间距，而在编辑层中，则能自动映射为与实际建筑面积一致外部轮廓线。确保了所采集数据之间的一致性。同时，根据不同的房屋类型填充相对应的不同颜色，提升了用户的体验，使得在视觉呈现效果上一目了然，便于相关管理层决策。下面将参照附图，对本发明作进一步详细的说明。附图说明构成本申请的一部分的附图用来提供对本发明的进一步理解，本发明的示意性实施例及其说明用于解释本发明，并不构成对本发明的不当限定。在附图中：图1是本发明实施例公开的房屋普查数据分组处理方法流程示意图。图2为本发明实施例公开的修边步骤示意图。具体实施方式以下结合附图对本发明的实施例进行详细说明，但是本发明可以由权利要求限定和覆盖的多种不同方式实施。实施例1本实施例公开一种房屋测绘数据处理方法，如图1所示，包括以下步骤：步骤S1、在具GPS位置信息能实时获取并跟踪的移动通信终端中装载房屋测绘用的APP客户端。在该步骤中，该移动通信终端的具体选型包括但不限于4G/5G手机、PAD、机器人乃至无人机等。优选地，在使用GPS进行导航和定位时，移动通信终端可基于基站定位、wifi定位等进行辅助以提高定位的精度。步骤S2、建立所述APP客户端与远程服务器之间的数据通道，在用户登录后，所述APP客户端与所述远程服务器进行数据同步。在该步骤中，通过数据同步可确保用户操作的有效性。优选地，当用户在后续执行数据编辑的过程中，当移动通信网络信号不佳时，则优先将当前的操作数据保存到离线的APP客户端中，一旦检测到移动通信网络可用的环境下，可按周期间隔持续地将APP客户端所获取的采集数据上传至远程服务器中。步骤S3、所述用户在所述APP客户端的菜单中选择显示和隐藏的相应图层后，启动数据采集处理；在数据采集过程中，所述客户端加载有至少两个相叠加的图层，至少一个图层为地图影像底图；至少一个图层为记录实况采集数据的编辑层。在该步骤中，地图影像地图可以采用第三方的地图数据，包括但不限于天地图或谷歌等地图影像。然后在该底图上叠加新的采集图层以呈现所检测房屋的位置、面积及映射相关的属性信息；其中，该属性信息包括但不限于所有者信息、房屋类型、建筑面积等信息。值得说明的是，底图的地图影像通常为非实时的历史数据，存在部分数据与当前实况不符，且部分影像数据还存在太阳斜射所产生的阴影及清晰度低等问题，从而为精准的绘制建筑物楼栋的实际轮廓带来了不便，由此，本实施例仅以第三方的地图影像作为数据采集过程中的参考，同时由于上下图层之间位置关系基于同一比例尺的进行同步缩放，故编辑层图层通过鼠标所定的位置与底图同一点位的位置信息一一对应，从而会后续借助底图第三方的API接口实现线段测距、面积测算等功能提供了便利；从而有利于节约开发时间和成本。步骤S4、所述APP客户端从所述移动通信终端中获取GPS位置信息以定位用户当前所在的位置，并根据所设置的地图比例尺显示当前所在位置所辐射区域内各图层的信息。其中，所辐射区域的范围与移动通信终端的屏幕分辨率相关。在该步骤中，本质即根据GPS位置确定用户所能操作的区域范围，可有效避免多用户在并行数据采集过程中产生串线，也进一步避免了由于串线引发相关误操作而衍生一些更为严重的数据失真甚至丢失等系统问题。同时也杜绝了用户未实际抵达相应的作业区而伪造相关采集数据的不良行为，确保了所采集数据的可靠性。步骤S5、获取所述用户在所述编辑层中当前圈定普查的目标小区，在所述用户通过分割线将所述目标小区划分成与实际房屋数量一致的至少两个子区域后，获取所述用户将各子区域进行编号及根据各该编号将目测房屋轮廓线近似的至少两个房屋划分成同一组的分组信息。在该步骤中，基于常识，同一目标小区内通常会存在至少两个房屋轮廓线一致的建筑成矩阵式排列；基于编辑层在后续所记录的属性信息中，会根据实际房屋面积对关模型轮廓线进行自动修正处理，或由人工通过后续修边等方式对组内单个对象进行修正处理，因此，在该步骤中将目测房屋轮廓线近似的房屋归为一组对最终采集结果相对于用户感官上的精确度影响几乎忽略不计。藉此，所谓“近似”的评判标准可以设定为：以轮廓线中80％以上的分段的长度和走势与基准参照房屋轮廓相同。且本领域技术人员可以理解，该标准可以根据不同的用户需求进行灵活的调整。步骤S6、在所述用户根据实测数据完成同组内任意一个房屋相对应外部轮廓线的编辑后，将编辑后的房屋轮廓线封装成能复制的模型。其中，在所述用户根据实测数据完成同组内任意一个房屋相对应轮廓线的编辑过程中，可以下述方式先绘制房屋首尾相接的轮廓线：1、手绘方式，由所述用户参照底图的地图影像进行打点和描边。2、GPS方式，根据用户的相应操作间隔性获取用户在至少四个不同位置的GPS位置信息，在所述编辑层中根据各个定点位置的GPS位置信息进行打点后连接成首尾相接的轮廓线。3、手绘与GPS相结合方式，在所形成首尾相接的轮廓线中连接有至少一个根据所述用户所在位置实况的GPS位置信息所记录的打点，从而实现在采集效率和采集数据精度之间实现良性的兼容。例如：在所述手绘与GPS相结合方式中包括：以GPS方式根据用户的相应操作间隔性获取用户在至少四个不同位置的GPS位置信息，连成四边形的初始轮廓线；然后通过敞口的至少三段相连的修边线段与所述初始轮廓线进行拼接，将与所述初始轮廓线相邻的空白区域填充为所述初始轮廓线新增的凸出区域，将所述初始轮廓线中与修边线段所围合的交集区域从所述模型中剔除成凹陷区域。通常，各GPS打点及手绘所定位的打点位置优选轮廓线中的拐点位置，相邻打点之间可以以直线或弧线进行连接。然后在绘制完的房屋首尾相接的轮廓线内以默认的颜色进行填充后封装成能复制的初始模型；根据所述用户的相应指令，对该初始模型进行相应的挖洞和/或修边处理以得到与房屋实质轮廓线趋势相似的最终模型。进一步地，所述修边处理具体包括：通过敞口的至少三段相连的修边线段与所述初始模型进行拼接，将与所述初始模型相邻的空白区域填充为所述模型新增的凸出区域，将所述初始模型中与修边线段所围合的交集区域从所述模型中剔除成凹陷区域。其中，修边的具体步骤如图2所示，其中虚线所示的五段修边线段与原矩形的初始模型形成相邻的空白区域B和交集区域A，在修边后的模型中，区域B与初始模型的轮廓区域进行融合，而区域A则从初始模型的轮廓区域中予以剔除。通过修边处理，避免了对每个拐点分别进行打点的依赖，在有效体现房屋轮廓精度的同时也提高了数据采集的效率。进一步地，所述挖洞处理具体包括：通过一密闭的图形与所述初始模型进行相交处理，将该密闭图形内与所述初始模型共同的交集区域剔除为所述模型的孔洞区域，将该密闭图形内与所述初始模型相邻的空白区域填充为所述模型新增的凸出区域。本实施例中，所述APP客户端根据所述修边线段是否闭合来识别用户操作是否为修边处理或挖洞处理。进一步地，本发明实施例所述APP客户端还提供以供用户通过移动和旋转等操作来实现编辑层图像数据与底图中地图影像的对齐处理。步骤S7、获取所述用户对组内各房屋属性的信息，所述房屋属性包括实际的建筑面积和房屋类型；然后根据实际的建筑面积和地图比例尺提取对应的模型进行修正处理后显示在各该相对应的子区域内，然后在各该模型内根据不同的房屋类型填充相对应的不同颜色以完成数据采集。在该步骤中，相关房屋类型包括但不限于：独立住宅、集合住宅、辅助用房和农村非住宅等。其中，在挖洞处理时，还包括将洞中的填充颜色去除，并将洞的面积纳入实际建筑面积中；藉此，使得在上述缩放的过程中，不需对内部中空的洞的尺寸参数也进行同步的缩放，符合土地的管理规范的同时还简化了系统设计并满足了用户视觉效果与客观情况相符合。进一步地，根据实际的建筑面积和地图比例尺提取对应的模型进行修正处理具体包括：获取保存的实际建筑面积，计算并判断当前模型的填充面积相比于实际的建筑面积是否处于允许的误差范围内，如果超出误差范围，将外部轮廓线根据识别的拐点进行分段，然后分别按所计算出的等间距对外部轮廓线的各分段统一向外或向内平移处理后得到缩放后的首尾相接的轮廓线。举例说明，在该步骤中，假设在先绘制的外部轮廓线为4*5cm的矩形，且当用户在绘制外部轮廓线所实质占位的地方距相应的墙边为等间距的5米，1cm所映射的实质距离为10米，则与实际建筑面积所存在的误差超过10％，其按实际建筑面积缩放后所对应显示的修正后的矩形尺寸应为3*5cm，且调整前后矩形的对角线中心不变，各矩形边向内实际移动的等间距为0.5cm。基于上述例子，所能得到的意料不到的技术效果具体为：大部分建筑与外部连接道路之间存在护栏和绿化带，不便于用户直接占位墙脚进行测绘，而迫使用户仅能在外部道路上以与墙边等间距的各点进行GPS打点并连接成轮廓图。藉此，通过该缩放处理则能实现用户在实际绘制房屋轮廓图的过程中，各采集点与房屋等间距，而在编辑层中，则能自动映射为与实际建筑面积一致外部轮廓线。确保了所采集数据之间的一致性，尤其是视觉效果与实际建筑面积之间的一致性。同时，还存在部分建筑主体存在顶部有延伸至地面实际绘制房屋轮廓外的情形，因此，通过向外平移也能达到相同的技术效果。进一步地，考虑到大部分小区，部分楼栋的整体构造是对另一部分楼栋基于对称性的成倍扩建，本实施例所述APP客户端还根据所述用户的相应指令，将选中的任一模型生成对应的镜像模型，然后将该模型与对应的镜像模型组合成新的模型供剩余组复制；藉此，扩充了模型库并提高了模型的产出效率。综上，本实施例通过编辑层视图与底图的地图影像进行对比，可以一目了然地观测到已采集的区域和待采集的区域。而且，基于本领域技术人员常识，本实施例方法还包括：所述APP客户端数据采集完成后，将所述目标小区的分割子区域的各分割线进行隐藏或删除处理；以及根据用户指令、或按固定时间间隔、或由相应的事件触发以将相应的采集信息上传至所述远程服务器。实施例2本实施例公开一种房屋普查数据分组处理系统，包括存储器、处理器以及存储在存储器上并可在处理器上运行的计算机程序，其中，所述处理器执行所述计算机程序时实现上述方法实施例相对应的步骤。综上，本发明实施例所公开的房屋普查数据分组处理方法及系统，至少具有以下有益效果：基于移动通信网络和GPS位置进行数据采集，确保了数据采集的真实性；也便于多用户同时分区域实现并行的数据采集。其中，在任一用户执行数据采集的过程中，用户在编辑层中对目标小区通过模型复制-缩放修正的方式实现房屋相对应外部轮廓线的分组绘制及属性赋值；达到了对目标小区通过分组来加快数据采集效率的绝佳效果。尤其是对聚集性的住宅类小区，小区内各楼栋的轮廓线型一般也仅为两到三种，通过分组可以极大地提升数据采集的效率。以上所述仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
