标题title
MEMS陀螺仪零位消除系统和方法
摘要abst
本发明提出了一种消除MEMS陀螺仪零位的系统及方法，在MEMS陀螺仪上电之初，与保存在存储装置中的bias存储序列进行融合；之后，根据MEMS陀螺仪的判静标记求取角速度平均值、实时更新bias序列；当存在最优bias并且判断出载体较长时间处于静止状态时，更新存储装置中的bias存储序列；根据bias序列计算出需要消除的零位去校正测量的角速度，得到最终输出角速度信号。
权利要求书clms
1.一种MEMS陀螺仪零位消除系统，包括MEMS陀螺仪模块、上电bias融合模块、bias序列更新模块、bias计算模块、角速度校正模块、最优bias更新模块和存储装置,其中MEMS陀螺仪模块用于输出角速度信号W和判静标记MotionSta；上电bias融合模块用于计算bias存储序列A的平均值A,计算M个角速度数值Wb的平均值B0,根据bias存储序列A的平均值A、M个角速度数值的平均值B0、上电bias融合时间的采样周期个数计算上电之初需要消除的MEMS陀螺仪零位；存储装置用于存储bias存储序列A和存储标记Flag；bias序列更新模块用于更新bias序列；bias计算模块用于计算上电融合之后需要消除的MEMS陀螺仪零位；角速度校正模块用于根据采集到的MEMS陀螺仪当前输出的角速信号W和当前计算得到的需要消除的MEMS陀螺仪零位,计算校正的角速度信号。2.如权利要求1所述的MEMS陀螺仪零位消除系统,其中,当判静标记MotionSta＝0时MEM陀螺仪模块连续采集输出M个角速度数值Wb，j＝0,1,2,…,M-1。3.如权利要求1所述的MEMS陀螺仪零位消除系统,其中上电bias融合模块具体用于：MEMS陀螺仪上电之后，系统计数器从零开始计数，每个采样周期计数器变量SC增加1，上电bias融合的时间为FuseNum个采样周期,A＝/N0，N0为bias存储序列A的长度，B0＝/M,则上电之初需要消除的MEMS陀螺仪零位B＝SC/FuseNum*B0+*A。4.如权利要求1所述的MEMS陀螺仪零位消除系统，其中bias序列更新模块具体用于：设bias序列B共N个点，i＝0,1,…N-1，设bias序列计数器变量FC,0≤FC≤N-1,从零开始计数,bias序列计数器变量计满标记为FC_Flag,初始值为零,MEMS陀螺仪上电之后在工作过程中,当判静标记MotionSta＝0时将当前采集的M个角速度信号按照顺序存入序列Wb,j＝0,1,2,…,M-1,bias序列更新的计算步骤如下：步骤1：当序列Wb存满M个采样点时，更新bias序列：B＝/M步骤2：将序列Wb清零，供下一次计算使用。即令：Wb＝0步骤3：bias序列计数器变量FC增加1,继续执行步骤1和2，当FC＝N时，令FC_Flag＝1以及FC＝0。5.如权利要求1所述的MEMS陀螺仪零位消除系统，其中bias计算模块具体用于：当前bias序列为B,i＝0,1,…N-1),当计满标记FC_Flag＝0时,当前bias序列B有FC+1个非零数值点,当计满标记FC_Flag＝1时,当前bias序列B有N个非零数值点，当FC_Flag＝0时，需要消除的MEMS陀螺仪零位：B＝/；当FC_Flag＝0时，需要消除的MEMS陀螺仪零位：B＝/N6.如权利要求1所述的MEMS陀螺仪零位消除系统，其中角速度校正模块具体用于：根据采集到的MEMS陀螺仪当前输出的角速信号W和当前计算得到的需要消除的MEMS陀螺仪零位,计算校正的角速度信号Wout,Wout＝W-B7.如权利要求1所述的MEMS陀螺仪零位消除系统，其中bias序列更新模块具体用于:当计满标记FC_Flag＝1时,bias序列B的平均值为B,最优biasWop的监测均方差Var的计算公式：最优bias更新过程：步骤1：当计满标记FC_Flag由0变为1时,监测均方差初始值Var0＝Var；步骤2：当计满标记FC_Flag＝1时,计算当前监测均方差Var如果Var＜Var0，令最优bias值Wop＝B，Var0＝Var；步骤3：当满足条件判静标记MotionSta＝0且持续P个采样周期时,存储标记Flag数值增加1,当Flag＝N0时,令Flag＝0；存储序列A的相应点A＝Wop；步骤4：将bias存储序列A和存储标记Flag写入存储装置的相应地址中。8.一种MEMS陀螺仪零位消除方法，包括：步骤一、MEMS陀螺仪上电，进行bias上电融合，根据上电融合阶段采集到的MEMS陀螺仪输出的角速度信号和计算得到的需要消除的MEMS陀螺仪零位计算校正的角速度信号步骤二、MEMS陀螺仪上电融合后，进行bias序列更新；步骤三、实时计算需要消除的MEMS陀螺仪零位；步骤四、根据计算得到的需要消除的MEMS陀螺仪零位进行角速度校正；步骤五、进行最优bias序列更新。9.如权利要求8所述的MEMS陀螺仪零位消除方法,其中步骤一具体为：系统计数器从零开始计数,每个采样周期计数器变量SC增加1,当判静标记MotionSta＝0时连续采集MEMS陀螺仪输出的M个角速度数值Wb,j＝0,1,2,…,M-1,计算bias存储序列的平均值A和M个角速度数值的平均值B0,则上电之初需要消除的MEMS陀螺仪零位：B＝SC/FuseNum*B0+*A其中A＝/N0，B0＝/M,FuseNum为上电bias融合时间内的采样周期个数，N0为存储器中bias存储序列A的长度；和/或,步骤二具体为：设bias序列B共N个点,i＝0,1,…N-1,设bias序列计数器变量FC,0≤FC≤N-1，FC从零开始计数,bias序列计数器变量计满标记为FC_Flag,初始值为零,当判静标记MotionSta＝0时将当前采集的角速度信号按照顺序存入序列Wb,bias序列更新的计算步骤如下：步骤1：当序列Wb存满M个采样点时，更新bias序列：B＝/M步骤2：将序列Wb清零，供下一次计算使用,即令：Wb＝0步骤3：bias序列计数器变量FC增加1,继续执行步骤1和2,当FC＝N时，令FC_Flag＝1以及FC＝0。和/或,步骤三具体为：当前bias序列为B,i＝0,1,…N-1,当计满标记FC_Flag＝0时，有FC+1个非零数值点，当计满标记FC_Flag＝1时,有N个非零数值点，当FC_Flag＝0时，需要消除的MEMS陀螺仪零位：B＝/当FC_Flag＝1时，需要消除的MEMS陀螺仪零位：B＝/N；和/或,步骤四具体为：采集MEMS陀螺仪当前输出的角速度信号W，根据当前计算得到的零位B，校正计算得到角速度信号Wout：Wout＝W-B；和/或,步骤五具体为：当FC_Flag＝1时,bias序列B的平均值为B,最优biasWop的监测均方差Var的计算公式：最优bias更新的步骤如下：步骤1：当计满标记FC_Flag由0变为1时,监测均方差初始值Var0＝Var；步骤2：当计满标记FC_Flag＝1时,计算当前监测均方差Var如果Var＜Var0，令最优bias值Wop＝B，Var0＝Var；步骤3：当满足条件判静标记MotionSta＝0且持续P个采样周期时,存储标记Flag数值增加1,当Flag＝N0时,令Flag＝0；存储序列A的相应点A＝Wop；步骤4：将bias存储序列A和存储标记Flag写入存储装置的相应地址中。10.一种计算机程序产品，所述计算机程序产品中包括计算机程序代码，其特征在于，当所述计算机程序代码在计算机上运行时，使得计算机实现权利要求8至9任一项所述的方法。11.一种芯片，其特征在于，包括：处理器，所述处理器与存储器耦合，所述存储器用于存储程序或指令，当所述程序或指令被所述处理器执行时，使其执行如权利要求8至9任一项所述的方法。
说明书desc
技术领域本发明涉及传感器技术领域，尤其涉及一种低成本惯性传感器的信号处理技术。背景技术MEMS陀螺仪属于低成本惯性传感器，用于测量载体敏感轴上的角速度信号，由于其具有体积小、功耗低、价格低廉、适合大批量生产等优点，广泛应用于低成本导航系统、工业控制系统、无人机、工业机器人等领域。MEMS陀螺仪的角速度测量精度直接决定着系统的性能，其测量信号中包含有真实角速度、零位、随机噪声等几部分。能否准确的估计出零位并进行消除，直接影响到能否计算出载体敏感轴上准确的角速度信号。由于MEMS陀螺仪的内部结构特性，其零位存在随时间漂移、在一定范围内随机波动等特点。并且多次上电工作时，MEMS陀螺仪零位会有变化即存在随机常值项。发明内容为解决上述技术问题，本发明提出了一种消除MEMS陀螺仪零位的处理方法及装置，通过采取相关方法和措施，计算得到更准确的零位并加以消除，最后输出载体敏感轴上准确的角速度信号。本发明提出了一种消除MEMS陀螺仪零位的系统及方法，在MEMS陀螺仪上电之初，与保存在存储装置中的bias存储序列进行融合；之后，根据MEMS陀螺仪的判静标记求取角速度平均值、实时更新bias序列；当存在最优bias并且判断出载体较长时间处于静止状态时，更新存储装置中的bias存储序列；根据bias序列计算出需要消除的零位去校正测量的角速度，得到最终输出角速度信号。MEMS陀螺仪零位消除系统包括MEMS陀螺仪模块、上电bias融合模块、bias序列更新模块、bias计算模块、角速度校正模块、最优bias更新模块和存储装置。MEMS陀螺仪模块用于输出角速度信号W和判静标记MotionSta。上电bias融合模块用于计算bias存储序列A的平均值A，计算M个角速度数值Wb的平均值B0，根据bias存储序列A的平均值A、M个角速度数值的平均值B0、上电bias融合时间的采样周期个数计算最优的bias初始值。存储装置用于存储bias存储序列A和存储标记Flag。bias序列更新模块用于更新bias序列。bias计算模块用于计算上电融合之后需要消除的MEMS陀螺仪零位。角速度校正模块用于根据采集到的MEMS陀螺仪当前输出的角速信号W和当前计算得到的需要消除的MEMS陀螺仪零位，计算校正的角速度信号。MEMS陀螺仪零位消除方法，包括：步骤一、MEMS陀螺仪上电，进行bias上电融合，根据上电融合阶段采集到的MEMS陀螺仪输出的角速度信号和计算得到的需要消除的MEMS陀螺仪零位计算校正的角速度信号步骤二、MEMS陀螺仪上电融合后，进行bias序列更新；步骤三、实时计算需要消除的MEMS陀螺仪零位；步骤四、根据计算得到的需要消除的MEMS陀螺仪零位进行角速度校正；步骤五、进行最优bias序列更新。本发明还涉及一种计算机程序产品，所述计算机程序产品中包括计算机程序代码，当所述计算机程序代码在计算机上运行时，使得计算机实现MEMS陀螺仪零位消除的方法。本发明还涉及一种芯片，其包括处理器，所述处理器与存储器耦合，所述存储器用于存储程序或指令，当所述程序或指令被所述处理器执行时，使得处理器执行MEMS陀螺仪零位消除方法。附图说明图1 MEMS陀螺仪零位消除系统结构图图2 MEMS陀螺仪零位消除方法流程实施方式MEMS陀螺仪测量载体敏感轴上的角速度，输出信号中包含有真实角速度、零位、随机噪声等几部分。参考图1，一种用于消除MEMS陀螺仪零位的系统。如图1所示，该MEMS陀螺仪零位消除系统包括MEMS陀螺仪模块、上电bias融合模块、bias序列更新模块、bias计算模块、角速度校正模块、最优bias更新模块和存储装置。MEMS陀螺仪模块用于输出角速度信号W和判静标记MotionSta，判静标记MotionSta＝0表示载体当前处于静止状态，判静标记MotionSta＝1表示载体当前处于运动状态。存储装置用于存储bias存储序列A和存储标记Flag。MEMS陀螺仪上电之初，当判静标记MotionSta＝0时连续采集MEMS陀螺仪输出的M个角速度数值Wb，M为自然数，通常根据系统存储空间和运算效率，M＜＝200,优选M＝50。上电bias融合模块用于计算bias存储序列的平均值A，计算M个角速度数值的平均值B0:A＝/N0；B0＝/M。MEMS陀螺仪上电之后，系统计数器从零开始计数，每个采样周期计数器变量SC增加1。设上电bias融合的时间为FuseNum个采样周期，FuseNum为自然数，通常FuseNum＜1000,优选FuseNum＝500，则上电之初需要消除的MEMS陀螺仪零位：B＝SC/FuseNum*B0+*A。最优bias的初始值Wop＝A。Bias序列更新模块用于更新bias序列。设bias序列B共N个点，i＝0,1,…N-1,N为自然数，通常N＜100,优选N＝30。设bias序列计数器变量FC，从零开始计数；bias序列计数器变量计满标记为FC_Flag，初始值为零。MEMS陀螺仪上电之后在工作过程中，每个采样周期采集信号。当判静标记MotionSta＝0时将当前采集的M个角速度信号按照顺序存入序列Wb。bias序列更新的计算步骤如下：步骤1：当序列Wb存满M个采样点时，更新bias序列：B＝/M步骤2：将序列Wb清零，供下一次计算使用。即令：Wb＝0步骤3：bias序列计数器变量FC增加1,继续执行步骤1和2。当FC＝N时，令FC_Flag＝1以及FC＝0。Bias计算模块用于计算需要消除的MEMS陀螺仪零位。当前bias序列B，当计满标记FC_Flag＝0时，当前bias序列B有FC+1个非零数值点，当计满标记FC_Flag＝1时，当前bias序列B有N个非零数值点。当FC_Flag＝0时，需要消除的MEMS陀螺仪零位：B＝/；当FC_Flag＝0时，需要消除的MEMS陀螺仪零位：B＝/N角速度校正模块用于根据采集到的MEMS陀螺仪当前输出的角速信号W和当前计算得到的需要消除的MEMS陀螺仪零位B，校正计算得到敏感轴上更准确的角速度信号Wout：Wout＝W-B最优bias更新模块用于更新存储最优的bias存储序列A和存储标记Flag。具体地，当计满标记FC_Flag＝1时，bias序列B的平均值为B，最优biasWop的监测均方差Var的计算公式：最优bias更新过程：步骤1：当计满标记FC_Flag由0变为1时,监测均方差初始值Var0＝Var；步骤2：当计满标记FC_Flag＝1时，计算当前监测均方差Var如果Var＜Var0，令最优bias值Wop＝B，Var0＝Var；步骤3：当满足条件判静标记MotionSta＝0持续P个采样周期时，存储标记Flag数值增加1，当Flag＝N0时，令Flag＝0；存储序列A的相应点A＝Wop；步骤4：将bias存储序列A和存储标记Flag写入存储装置的相应地址中。存储装置用于存储bias存储序列和存储标记。图2示出MEMS陀螺仪零位的消除方法的具体流程：步骤一、MEMS陀螺仪上电，进行bias上电融合，根据上电融合阶段采集到的MEMS陀螺仪输出的角速度信号和计算得到的需要消除的MEMS陀螺仪零位B计算校正的角速度信号Wout。具体的，系统计数器从零开始计数，每个采样周期计数器变量SC增加1，每个采样周期内采集MEMS陀螺仪输出的角速度信号W和判静标记MotionSta。判静标记MotionSta＝0表示载体当前处于静止状态，判静标记MotionSta＝1表示载体当前处于运动状态。当判静标记MotionSta＝0时连续采集MEMS陀螺仪输出的M个角速度数值Wb。计算bias存储序列的平均值A和M个角速度数值的平均值B0，则上电之初需要消除的MEMS陀螺仪零位：B＝SC/FuseNum*B0+*A其中A＝/N0，B0＝/M，，FuseNum为上电bias融合时间内的采样周期个数,N0为存储器中bias存储序列A的长度。根据采集到的MEMS陀螺仪当前输出的角速度信号W和当前计算得到的需要消除的MEMS陀螺仪零位B，计算得到上电融合阶段校正的角速度信号Wout，Wout＝W-B。步骤二、MEMS陀螺仪上电融合后，进行bias序列更新。具体的，设bias序列B共N个点，i＝0,1,…N-1,N为自然数，通常N＜100,优选N＝30。设bias序列计数器变量FC，从零开始计数；bias序列计数器变量计满标记为FC_Flag，初始值为零。当判静标记MotionSta＝0时将当前采集的角速度信号按照顺序存入序列Wb。bias序列更新的计算步骤如下：步骤1：当序列Wb存满M个采样点时，更新bias序列：B＝/M步骤2：将序列Wb清零，供下一次计算使用。即令：Wb＝0步骤3：bias序列计数器变量FC增加1,继续执行步骤1和2。当FC＝N时，令FC_Flag＝1以及FC＝0。步骤三、实时计算需要消除的MEMS陀螺仪零位。具体的，当前bias序列为B，当计满标记FC_Flag＝0时，有FC+1个非零数值点，当计满标记FC_Flag＝1时，有N个非零数值点。当FC_Flag＝0时，需要消除的MEMS陀螺仪零位：B＝/当FC_Flag＝1时，需要消除的MEMS陀螺仪零位：B＝/N步骤四、根据计算得到的需要消除的MEMS陀螺仪零位进行角速度校正。具体的，采集MEMS陀螺仪当前输出的角速度信号W，根据当前计算得到的零位B，校正计算得到敏感轴上更准确的角速度信号Wout：Wout＝W-B。步骤五、进行最优bias序列更新。具体的，当FC_Flag＝1时，bias序列B的平均值为B，最优biasWop的监测均方差Var的计算公式：最优bias更新的步骤如下：步骤1：当计满标记FC_Flag由0变为1时,监测均方差初始值Var0＝Var；步骤2：当计满标记FC_Flag＝1时，计算当前监测均方差Var如果Var＜Var0，令最优bias值Wop＝B，Var0＝Var；步骤3：当满足条件判静标记MotionSta＝0持续P个采样周期时，存储标记Flag数值增加1，当Flag＝N0时，令Flag＝0；存储序列A的相应点A＝Wop；步骤4：将bias存储序列A和存储标记Flag写入存储装置的相应地址中。本发明实施例中的部分模块可以用处理器实现，可以是通用处理器，例如但不限于，中央处理器，也可以是专用处理器，例如但不限于，数字信号处理器、应用专用集成电路和现场可编程门阵列等。此外，处理器还可以是多个处理器的组合。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各示例的模块及方法步骤，能够以电子硬件、或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本发明的范围。
