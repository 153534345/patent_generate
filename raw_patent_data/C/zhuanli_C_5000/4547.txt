标题title
一种电铸电流控制方法及系统
摘要abst
本发明提供一种电铸电流控制方法及系统，包括：在每个电铸阶段开始前，暂不启动PID控制器，向电铸装置输出一个小于阈值的预设电压，并检测电铸装置对应的均值电流，根据每个电铸阶段开始前的预设电压和均值电流确定电铸装置对应的压流比；将每个电铸阶段开始前的压流比乘以该电铸阶段设定的电铸电流，将对应值作为该电铸阶段的控制电压；确定每个电铸阶段的控制电压后，向电铸装置输入控制电压，以控制电铸装置输出对应的初始电铸电流，并启动PID控制器。本发明在不同的电铸段，快速找到该段的系统压流比基准值，然后再通过自编增量式PID程序进行限幅调节，以达到PID调节的前几个周期没有超调，迅速进入微调阶段获得稳定的输出电流。
权利要求书clms
1.一种电铸电流控制方法，其特征在于，电铸装置的电铸过程包括多个电铸阶段，每个电铸阶段的电铸电流值设定不同，随着电铸阶段递进，设定的电铸电流增加，且在电铸过程中电铸装置的阻抗不固定，每个电铸阶段的电流由PID控制器进行运算调节；所述电铸电流控制方法包括如下步骤：在每个电铸阶段开始前，暂不启动PID控制器，向电铸装置输出一个小于阈值的预设电压，并检测电铸装置对应的均值电流，根据每个电铸阶段开始前的预设电压和均值电流确定电铸装置对应的压流比；将每个电铸阶段开始前的压流比乘以该电铸阶段设定的电铸电流，将对应值作为该电铸阶段的控制电压；所述压流比对应电铸装置每个电铸阶段开始前的阻抗；所述预设电压小于阈值以不影响电铸产品的质量；确定每个电铸阶段的控制电压后，向电铸装置输入控制电压，以控制电铸装置输出对应的初始电铸电流，并启动PID控制器，以避免在PID控制器的初始控制阶段电镀电流产生偏离预设幅值的波动，使得PID控制器投入工作时电铸电流在小于预设时间内即可与设定电铸电流的偏差小于预设比例；由于每个电铸阶段的控制电压考虑每个电铸阶段开始前电铸装置的阻抗，且控制电压直接采用各个电铸阶段的设定电铸电流计算，使得PID控制器很快进入在稳态调节阶段，避免PID控制器超调，保证电铸电流的稳定性。2.根据权利要求1所述的方法，其特征在于，每个电铸阶段开始前的压流比通过如下步骤获取：在每个电铸阶段开始前，暂不启动PID控制器，由可编程逻辑控制器PLC向电铸装置输出预设电压；PLC在多个扫描周期内，分别检测电铸装置的电铸电流，以求得多个扫描周期内的电流平均值；PLC将所述预设电压除以电流平均值得到当前电铸阶段开始前的压流比。3.根据权利要求1所述的方法，其特征在于，所述向电铸装置输入每个电铸阶段的控制电压，以控制电铸装置输出对应的初始电铸电流，并启动PID控制器，具体为：向电铸装置输出所述控制电压，使电铸装置输出该电铸阶段的初始电铸电流；检测初始电铸电流，并将该初始电铸电流和该电铸阶段的设定电铸电流作为PID控制器的初始值，启动PID控制器。4.一种电铸电流控制系统，其特征在于，电铸装置的电铸过程包括多个电铸阶段，每个电铸阶段的电铸电流值设定不同，随着电铸阶段递进，设定的电铸电流增加，且在电铸过程中电铸装置的阻抗不固定，每个电铸阶段的电流由PID控制器进行运算调节；所述系统包括：压流比确定单元，用于在每个电铸阶段开始前，暂不启动PID控制器，向电铸装置输出一个小于阈值的预设电压，并检测电铸装置对应的均值电流，根据每个电铸阶段开始前的预设电压和均值电流确定电铸装置对应的压流比；控制电压确定单元，用于将每个电铸阶段开始前的压流比乘以该电铸阶段设定的电铸电流，将对应值作为该电铸阶段的控制电压；所述压流比对应电铸装置每个电铸阶段开始前的阻抗；所述预设电压小于阈值以不影响电铸产品的质量；PID控制单元，用于在确定每个电铸阶段的控制电压后，向电铸装置输入控制电压，以控制电铸装置输出对应的初始电铸电流，并启动PID控制器，以避免在PID控制器的初始控制阶段电镀电流产生偏离预设幅值的波动，使得PID控制器投入工作时电铸电流在小于预设时间内即可与设定电铸电流的偏差小于预设比例；由于每个电铸阶段的控制电压考虑每个电铸阶段开始前电铸装置的阻抗，且控制电压直接采用各个电铸阶段的设定电铸电流计算，使得PID控制器很快进入在稳态调节阶段，避免PID控制器超调，保证电铸电流的稳定性。5.根据权利要求4所述的系统，其特征在于，所述压流比确定单元通过如下步骤获取电铸阶段开始前的压流比：在每个电铸阶段开始前，暂不启动PID控制器，由可编程逻辑控制器PLC向电铸装置输出预设电压；PLC在多个扫描周期内，分别检测电铸装置的电铸电流，以求得多个扫描周期内的电流平均值；以及PLC将所述预设电压除以电流平均值得到当前电铸阶段开始前的压流比。6.根据权利要求4所述的系统，其特征在于，所述PID控制单元，向电铸装置输出所述控制电压，使电铸装置输出该电铸阶段的初始电铸电流；以及检测初始电铸电流，并将该初始电铸电流和该电铸阶段的设定电铸电流作为PID控制器的初始值，启动PID控制器。
说明书desc
技术领域本发明属于电铸电流控制领域，更具体地，涉及一种电铸电流控制方法及系统。背景技术现有镍版电铸过程的自动化控制过程中，各个厂家在研究设计时将高频电镀电源作为一个线性功率器件，然后将泵循环、温度控制、电铸阶段控制整合，如该领域专利文献CN202010843872.X，CN202010843887.6所述。事实上电镀槽液、镍珠、母板共同组成的负载系统中，受槽液温度、成分、循环，镍珠多少，电镀母板表面积等的共同影响，负载阻值并不是一个常量，这样该方案对电铸电流的不具备自动调节控制会存在较大的偏差，往往在±3A左右，如果要求的总AH不大的工艺要求的普通产品对产品质量的影响不太大，但对某一段电流、时间要求都较大时，会直接影响整个电场镍离子载运量，从而直接影响产品的厚度稳定性；同时，如果这时人工进行加大输入量电压，将耗费较长的时间才能稳定至所需电流，这个过程中不断产生电流阶跃，会导致产品表观诸如毛刺、不匀等一系列问题，再者在人工调节干预的过程中，过高的输入值可能产生较高的电压，从而产生烧版的现象，且这个稳定过程并不能持续太久，又会进入偏离阶段。然而电铸电流的控制要达到较好的效果，不同于大多数温度量、压力量、速度量，在PID调节过程中允许短时的超调引起大的阶跃带来的负面影响。在现有的PLC控制系统中系统提供有现成的PID指令，如三菱FX2N系列的PID指令为Pid，其含义为设定值D0、检测返回值D1、参数表首址D10、计算输出值D40。在这种模式下PID调节的初期电铸电流偏差ΔE＝D0-D1会较大，不可避免的产生超调。综上，研发出能精准控制电铸过程电流方法，能提高产品的稳定性，增强企业的核心竞争力。发明内容针对现有技术的缺陷，本发明的目的在于提供一种电铸电流控制方法及系统，旨在解决现有电铸电流控制方法会出现PID超调的问题。为实现上述目的，第一方面，本发明提供了一种种电铸电流控制方法，电铸装置的电铸过程包括多个电铸阶段，每个电铸阶段的电铸电流值设定不同，随着电铸阶段递进，设定的电铸电流增加，且在电铸过程中电铸装置的阻抗不固定，每个电铸阶段的电流由PID控制器进行运算调节；所述电铸电流控制方法包括如下步骤：在每个电铸阶段开始前，暂不启动PID控制器，向电铸装置输出一个小于阈值的预设电压，并检测电铸装置对应的均值电流，根据每个电铸阶段开始前的预设电压和均值电流确定电铸装置对应的压流比；将每个电铸阶段开始前的压流比乘以该电铸阶段设定的电铸电流，将对应值作为该电铸阶段的控制电压；所述压流比对应电铸装置每个电铸阶段开始前的阻抗；所述预设电压小于阈值以不影响电铸产品的质量；确定每个电铸阶段的控制电压后，向电铸装置输入控制电压，以控制电铸装置输出对应的初始电铸电流，并启动PID控制器，以避免在PID控制器的初始控制阶段电镀电流产生偏离预设幅值的波动，使得PID控制器投入工作时电铸电流在小于预设时间内即可与设定电铸电流的偏差小于预设比例；由于每个电铸阶段的控制电压考虑每个电铸阶段开始前电铸装置的阻抗，且控制电压直接采用各个电铸阶段的设定电铸电流计算，使得PID控制器很快进入在稳态调节阶段，避免PID控制器超调，保证电铸电流的稳定性。在一个可选的示例中，每个电铸阶段开始前的压流比通过如下步骤获取：在每个电铸阶段开始前，暂不启动PID控制器，由可编程逻辑控制器PLC向电铸装置输出预设电压；PLC在多个扫描周期内，分别检测电铸装置的电铸电流，以求得多个扫描周期内的电流平均值；PLC将所述预设电压除以电流平均值得到当前电铸阶段开始前的压流比。在一个可选的示例中，所述向电铸装置输入每个电铸阶段的控制电压，以控制电铸装置输出对应的初始电铸电流，并启动PID控制器，具体为：向电铸装置输出所述控制电压，使电铸装置输出该电铸阶段的初始电铸电流；检测初始电铸电流，并将该初始电铸电流和该电铸阶段的设定电铸电流作为PID控制器的初始值，启动PID控制器。第二方面，本发明提供了一种电铸电流控制系统，电铸装置的电铸过程包括多个电铸阶段，每个电铸阶段的电铸电流值设定不同，随着电铸阶段递进，设定的电铸电流增加，且在电铸过程中电铸装置的阻抗不固定，每个电铸阶段的电流由PID控制器进行运算调节；所述系统包括：压流比确定单元，用于在每个电铸阶段开始前，暂不启动PID控制器，向电铸装置输出一个小于阈值的预设电压，并检测电铸装置对应的均值电流，根据每个电铸阶段开始前的预设电压和均值电流确定电铸装置对应的压流比；控制电压确定单元，用于将每个电铸阶段开始前的压流比乘以该电铸阶段设定的电铸电流，将对应值作为该电铸阶段的控制电压；所述压流比对应电铸装置每个电铸阶段开始前的阻抗；所述预设电压小于阈值以不影响电铸产品的质量；PID控制单元，用于在确定每个电铸阶段的控制电压后，向电铸装置输入控制电压，以控制电铸装置输出对应的初始电铸电流，并启动PID控制器，以避免在PID控制器的初始控制阶段电镀电流产生偏离预设幅值的波动，使得PID控制器投入工作时电铸电流在小于预设时间内即可与设定电铸电流的偏差小于预设比例；由于每个电铸阶段的控制电压考虑每个电铸阶段开始前电铸装置的阻抗，且控制电压直接采用各个电铸阶段的设定电铸电流计算，使得PID控制器很快进入在稳态调节阶段，避免PID控制器超调，保证电铸电流的稳定性。在一个可选的示例中，所述压流比确定单元通过如下步骤获取电铸阶段开始前的压流比：在每个电铸阶段开始前，暂不启动PID控制器，由可编程逻辑控制器PLC向电铸装置输出预设电压；PLC在多个扫描周期内，分别检测电铸装置的电铸电流，以求得多个扫描周期内的电流平均值；以及PLC将所述预设电压除以电流平均值得到当前电铸阶段开始前的压流比。在一个可选的示例中，所述PID控制单元，向电铸装置输出所述控制电压，使电铸装置输出该电铸阶段的初始电铸电流；以及检测初始电铸电流，并将该初始电铸电流和该电铸阶段的设定电铸电流作为PID控制器的初始值，启动PID控制器。总体而言，通过本发明所构思的以上技术方案与现有技术相比，具有以下有益效果：本发明提供一种电铸电流控制方法及系统，在不同的电铸段，快速找到该段的系统压流比基准值，并基于该压流比和当前电铸阶段的电流设定值确定控制电压，然后再通过自编增量式PID程序进行限幅调节，以达到PID调节的前几个周期没有超调，迅速进入微调阶段获得稳定的输出电流，本发明通过严格的控制电铸电流，从而控制载流量得到稳定的产品。附图说明图1是本发明实施例提供的电铸电流控制方法流程图；图2是本发明实施例提供的电铸电流控制框图；图3是现阶段各个厂商电铸电流控制时序图；图4是现有电铸电流检测波形图；图5是本发明实施例提供的电镀过程精确电流控制PID投入时序图；图6是本发明实施例提供的电铸电流检测波形图；图7是本发明实施例提供的电铸电流控制系统架构图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅用以解释本发明，并不用于限定本发明。经研究发现电铸系统不稳定来源在于系统运行过程阻抗的变动性及各段电铸过程转换时电流设定值较大的跨度。本发明就是要在不同的电铸段，快速找到该段的系统压流比基准值，然后再通过自编增量式PID程序进行限幅调节，以达到PID调节的前几个周期没有超调，迅速进入微调阶段获得稳定的输出电流。通过严格的控制电流，从而控制载流量得到稳定的产品。图1是本发明实施例提供的电铸电流控制方法流程图；如图1所示，包括如下步骤：S101，在每个电铸阶段开始前，暂不启动PID控制器，向电铸装置输出一个小于阈值的预设电压，并检测电铸装置对应的均值电流，根据每个电铸阶段开始前的预设电压和均值电流确定电铸装置对应的压流比；将每个电铸阶段开始前的压流比乘以该电铸阶段设定的电铸电流，将对应值作为该电铸阶段的控制电压；所述压流比对应电铸装置每个电铸阶段开始前的阻抗；所述预设电压小于阈值以不影响电铸产品的质量；S102，确定每个电铸阶段的控制电压后，向电铸装置输入控制电压，以控制电铸装置输出对应的初始电铸电流，并启动PID控制器，以避免在PID控制器的初始控制阶段电镀电流产生偏离预设幅值的波动，使得PID控制器投入工作时电铸电流在小于预设时间内即可与设定电铸电流的偏差小于预设比例；由于每个电铸阶段的控制电压考虑每个电铸阶段开始前电铸装置的阻抗，且控制电压直接采用各个电铸阶段的设定电铸电流计算，使得PID控制器很快进入在稳态调节阶段，避免PID控制器超调，保证电铸电流的稳定性。因此本发明在如下两方面进行控制。1：在每段运行的开始阶段通过输出一个固定的电压值0.1V，理论输出电流2A，在1个滤波周期约3ms，检测得到一个均值电流值，用电压除电流得到整流机、槽液、极板、镍珠共同组成的系统输入输出压流比；压流比乘设定电流与检测电流的比值作为该段PiD调节的输出初始值，该初始电压输出值产生的电流是非常接近设定值的，且在该滤波周期PID停止调节，以便得到准确的压流比。2：在每段PID调节投入之前清除e、e、e中的数据，用来减小段切换时e、e还是上段的差值带来的不确定影响。控制实现的框图如图2所示：在每段的初始，关闭PID调节。由PLC模拟量输出端口输出一个固定的电压值，这时由整流机、槽液、镍版、镍珠篮整个构成一个系统。阴极、阳极、槽液、整流机内阻共同构成系统的阻抗。系统在这个固定电压控制下，会形成一个电流。在压流比检测段PLC每个扫描周期，检测系统形成的电镀电流，存入一个存储寄存器，将这个值进行累加，在第10个扫描周期检测电流存储并累加后除10得到10个扫描周期内的电流平均值，用控制电压除以电流平均值得到的值为当前系统的响应特性。用某段工艺需求电流乘以压流比得到系统最佳的控制输入电压。并从模拟量输出端口输出，得到第一个扫描周期电流检测值i0，存入PID电流检测值存储寄存器，并计算设定值与之的差，存入E。将E、E赋0。启动增量式PID运算对本段进行自动调节，调用E、E、E的值，得到ΔU，由如下公式可计算出下个扫描周期需输出的调节量ΔU：ΔU＝A*E-B*E+C*EU＝U+ΔU其中，P为比例系数，I为积分时间系数，D为微分时间系数，T为采样周期系数，ΔU为本次计算出的在上次基础上需调节量、U为上次的调节量、E为上个周期检测到的偏差量、E为上上个周期检测到的偏差量、E为本周期检测到的偏差量、ΔE表示偏差。E被赋值E，E被赋值E，下一个扫描周期检测得到下一个E，PID再次调用E、E、E，得到下一个控制输出的变化量ΔU。循环上述工作。当一个电铸阶段完毕跳变为另一个阶段时，E、E相近，E非常大会造成ΔU很大，比如从第2段8A进入3段20A此时ΔE变化量会是2段的1.5倍，3段的0.6倍，这不可避免的产生超调。通过压流比得到的所产生的电流与设定电流的误差能控制在±5％之内，从而所产生的ΔU波动也在±5％之内。直到本段镀完，关闭PID，检测下一段初始压流比，再投入PID运算自动控制。图3是现阶段各个厂商电铸电流控制时序图；图4是现有电铸电流检测波形图；图5是本发明实施例提供的电镀过程精确电流控制PID投入时序图；图6是本发明实施例提供的电铸电流检测波形图。对比图4和图6，可以看出本方案能有效避开PID调节初始段因电流检测值得突变引起的震荡，能快速顺利地进入微调阶段。例如：同时检测段电流2A，时间30ms，其能量2*30/1000/3600＝0.00001667AH，按正常电镀，按50AH分5段算，压流比检测能量占总体能量5*0.00001667/50＝0.000001667，从数据看占比可以不计。检测段电流波动小，系统能在检测段后立即进入平缓的调节段，从而避免阶跃突变段所产生的峰尖峰谷不利影响。可以理解的是，通过本发明方法可得到非常接近设定值电流的初始值U，使e变化量幅度减小，使ΔU的值减小，即调节量减小。为达到每段电流PID调节之前能获得系统的阻抗性能，且该检测过程精度足够高对产品的性能产生的影响足够小，需要设定一个较小的电流，并且在10个扫描周期约30毫秒即完成检测，所占产品输入总能量为3*2*30/AH，产品一般所需总能量为不少于170AH，占比为0.0000003，很显然检测带来的载流影响是忽略不计的。但该要求需要检测电流的输入到检测完成能同步在10个扫描周期内完成，并且在PID调节之初就使用该值。靠持续检测的传统方法是无法做到的。为此我们采用编制专用检测块在每段电铸的开始10个扫描周期内进行阻抗检测，该块的电流检测在10个扫描周期后退出，由专门的电流检测块进行该段的电流检测，该电流检测值供PID使用。从而在PID块调节开始调用，达到输出电流接近于设定电流，不产生较大的偏差值，使系统迅速稳定。因此，本发明有效避免直接使用PID电流调节所带来的前期超幅震荡，系统运行更为稳定。从而能更好的服务生产需求。图7是本发明实施例提供的电铸电流控制系统架构图，如图7所示，包括：压流比确定单元710，用于在每个电铸阶段开始前，暂不启动PID控制器，向电铸装置输出一个小于阈值的预设电压，并检测电铸装置对应的均值电流，根据每个电铸阶段开始前的预设电压和均值电流确定电铸装置对应的压流比；控制电压确定单元720，用于将每个电铸阶段开始前的压流比乘以该电铸阶段设定的电铸电流，将对应值作为该电铸阶段的控制电压；所述压流比对应电铸装置每个电铸阶段开始前的阻抗；所述预设电压小于阈值以不影响电铸产品的质量；PID控制单元730，用于在确定每个电铸阶段的控制电压后，向电铸装置输入控制电压，以控制电铸装置输出对应的初始电铸电流，并启动PID控制器，以避免在PID控制器的初始控制阶段电镀电流产生偏离预设幅值的波动，使得PID控制器投入工作时电铸电流在小于预设时间内即可与设定电铸电流的偏差小于预设比例；由于每个电铸阶段的控制电压考虑每个电铸阶段开始前电铸装置的阻抗，且控制电压直接采用各个电铸阶段的设定电铸电流计算，使得PID控制器很快进入在稳态调节阶段，避免PID控制器超调，保证电铸电流的稳定性。需要说明的是，图7中各单元的详细功能实现可参见前述方法实施例中的介绍，在此不做赘述。本领域的技术人员容易理解，以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明的保护范围之内。
