标题title
拉晶断苞检测方法、装置、计算机设备和存储介质
摘要abst
本申请涉及一种拉晶断苞检测方法、装置、计算机设备和存储介质。该方法包括：获取晶棒在拉晶阶段连续拍摄的图像组；对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框；根据所有正常棱线的目标框的质心点拟合确定晶棒的圆心，并以圆心的一方向为参考方向，计算每个正常棱线的目标框相对于参考方向的圆心角；根据图像组中连续图像之间同一棱线所对应的圆心角，得到连续图像之间晶棒的转动角度；根据图像组一图像中棱线的圆心角确定该图像中晶棒棱线的初始位置，并基于初始位置和转动角度对图像组检测得到的目标框进行匹配追踪，确定晶棒拉晶是否断苞。本方案不仅能够检测出各类拉晶断苞的情况，而且能够实时准确追踪晶棒各棱线状况。
权利要求书clms
1.一种拉晶断苞检测方法，其特征在于，所述方法包括：获取晶棒在拉晶阶段连续拍摄的图像组；对所述图像组中的每一图像进行检测，分别得到晶棒棱线的目标框；根据所有正常棱线的所述目标框的质心点拟合确定晶棒的圆心，并以所述圆心的一方向为参考方向，计算每个棱线的所述目标框相对于所述参考方向的圆心角；根据所述图像组中连续图像之间同一棱线所对应的所述圆心角，得到连续图像之间晶棒的转动角度；根据所述图像组一图像中棱线的所述圆心角确定该图像中晶棒棱线的初始位置，并基于所述初始位置和所述转动角度对所述图像组检测得到的所述目标框进行匹配追踪，确定晶棒拉晶是否断苞。2.根据权利要求1所述的方法，其特征在于，所述根据所述图像组一图像中棱线的所述圆心角确定该图像中晶棒棱线的初始位置包括：根据所述转动角度确定所述图像组中晶棒转动前四分之一周期所对应的多张图像；基于晶棒转动前四分之一周期所对应的多张图像，确定多张图像中出现的第一条棱线，其中，若不存在所述第一条棱线，则直接确定拉晶存在断苞；根据所述第一条棱线所在图像中的所述圆心角确定该图像上其他棱线的角度，得到该图像中晶棒棱线的所述初始位置。3.根据权利要求2所述的方法，其特征在于，所述基于所述初始位置和所述转动角度对所述图像组检测得到的所述目标框进行匹配追踪，确定晶棒拉晶是否断苞包括：根据所述初始位置和所述转动角度依次确定各图像上晶棒棱线的追踪位置，并根据所述追踪位置对各图像中的所述目标框进行匹配追踪，确定晶棒拉晶是否断苞。4.根据权利要求1所述的方法，其特征在于，所述确定晶棒拉晶是否断苞还包括：结合所述目标框中的断苞棱线数量，确定晶棒拉晶是否断苞。5.根据权利要求1至权利要求4任意一项所述的方法，其特征在于，所述对所述图像组中的每一图像进行检测，分别得到晶棒棱线的目标框包括：通过神经网络模型对所述图像组中的每一图像进行模型检测，分别得到晶棒棱线的目标框，其中，所述神经网络模型基于卷积神经网络结构并结合残差神经网络进行训练得到。6.根据权利要求5所述的方法，其特征在于，所述对所述图像组中的每一图像进行检测，分别得到晶棒棱线的目标框还包括：基于所述目标框的位置，剔除连续图像中位置相同的所述目标框；基于所述目标框的预设阈值，剔除不符合预设阈值的所述目标框。7.根据权利要求1至权利要求4任意一项所述的方法，其特征在于，所述获取晶棒在拉晶阶段连续拍摄的图像组还包括：根据连续图像之间的拍摄时间差检查所述图像组的连续性。8.一种拉晶断苞检测装置，其特征在于，包括：获取模块，用于获取晶棒在拉晶阶段连续拍摄的图像组；棱线检测模块，用于对所述图像组中的每一图像进行检测，分别得到晶棒棱线的目标框；角度测量模块，用于根据所有正常棱线的目标框的质心点拟合确定晶棒的圆心，并以所述圆心的一方向为参考方向，计算每个棱线的所述目标框相对于所述参考方向的圆心角；转动测量模块，用于根据所述图像组中连续图像之间同一棱线所对应的所述圆心角，得到连续图像之间晶棒的转动角度；匹配追踪模块，用于根据所述图像组一图像中棱线的所述圆心角确定该图像中晶棒棱线的初始位置，并基于所述初始位置和所述转动角度对所述图像组检测得到的所述目标框进行匹配追踪，确定晶棒拉晶是否断苞。9.一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至权利要求7中任一项所述的方法的步骤。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至权利要求7中任一项所述的方法的步骤。
说明书desc
技术领域本申请涉及半导体制备检测技术领域，特别是涉及一种拉晶断苞检测方法、装置、计算机设备和存储介质。背景技术在单晶硅等晶棒的生长过程中，需要经过引晶，放肩，转肩，等径，收尾等工序，其中，在晶棒生长过程中，会伴随着产生晶棒的棱线，该棱线是目前检测晶棒质量的重要参考对象之一。然而，在拉晶过程中，由于晶体原料等原因在等径的阶段会发生棱线丢失的情况，即断苞。当断苞发生时，对应的晶序也会发生变化，也就会导致最终生产的晶体性能下降，而且无法恢复。因此，需要在拉晶过程中对晶棒的棱线进行检测。在传统技术中，一般需要人工进行巡检，当出现拉晶断苞时，通过人工操作进行及时回熔、取段、收尾，防止能源的浪费以及断苞过久导致液面脱落引发位错现象，然而工厂炉台数量大，传统人工巡检方式不足以应对日益增长的业务需求，检测效率低，经常会出现漏检、少检等检测问题。另外，传统技术中还存在基于机器视觉的检测方法，然而其只能检测某个状态下的晶棒情况，然而由于拉晶过程晶棒一直是处于转动，对此，上述方法并不能清楚明确地检测出每条晶棒棱线的情况，检测的全面性和准确性很差。发明内容基于此，有必要针对上述技术问题，提供一种能够实时准确追踪晶棒各棱线状况的拉晶断苞检测方法、装置、计算机设备和计算机可读存储介质。第一方面，本申请提供了一种拉晶断苞检测方法，方法包括：获取晶棒在拉晶阶段连续拍摄的图像组；对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框；根据所有正常棱线的目标框的质心点拟合确定晶棒的圆心，并以圆心的一方向为参考方向，计算每个棱线的目标框相对于参考方向的圆心角；根据图像组中连续图像之间同一棱线所对应的圆心角，得到连续图像之间晶棒的转动角度；根据图像组一图像中棱线的圆心角确定该图像中晶棒棱线的初始位置，并基于初始位置和转动角度对图像组检测得到的目标框进行匹配追踪，确定晶棒拉晶是否断苞。在其中一个实施例中，根据图像组一图像中棱线的圆心角确定该图像中晶棒棱线的初始位置包括：根据转动角度确定图像组中晶棒转动前四分之一周期所对应的多张图像；基于晶棒转动前四分之一周期所对应的多张图像，确定多张图像中出现的第一条棱线，其中，若不存在第一条棱线，则直接确定拉晶存在断苞；根据第一条棱线所在图像中的圆心角确定该图像上其他棱线的角度，得到该图像中晶棒棱线的初始位置。在其中一个实施例中，基于初始位置和转动角度对图像组检测得到的目标框进行匹配追踪，确定晶棒拉晶是否断苞包括：根据初始位置和转动角度依次确定各图像上晶棒棱线的追踪位置，并根据追踪位置对各图像中的目标框进行匹配追踪，确定晶棒拉晶是否断苞。在其中一个实施例中，确定晶棒拉晶是否断苞还包括：结合目标框中的断苞棱线数量，确定晶棒拉晶是否断苞。在其中一个实施例中，对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框包括：通过神经网络模型对图像组中的每一图像进行模型检测，分别得到晶棒棱线的目标框，其中，神经网络模型基于卷积神经网络结构并结合残差神经网络进行训练得到。在其中一个实施例中，对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框还包括：基于目标框的位置，剔除连续图像中位置相同的目标框；基于目标框的预设阈值，剔除不符合预设阈值的目标框。在其中一个实施例中，获取晶棒在拉晶阶段连续拍摄的图像组还包括：根据连续图像之间的拍摄时间差检查图像组的连续性。第二方面，本申请还提供了一种拉晶断苞检测装置，包括：获取模块，用于获取晶棒在拉晶阶段连续拍摄的图像组；棱线检测模块，用于对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框；角度测量模块，用于根据所有正常棱线的目标框的质心点拟合确定晶棒的圆心，并以圆心的一方向为参考方向，计算每个棱线的目标框相对于参考方向的圆心角；转动测量模块，用于根据图像组中连续图像之间同一棱线所对应的圆心角，得到连续图像之间晶棒的转动角度；匹配追踪模块，用于根据图像组一图像中棱线的圆心角确定该图像中晶棒棱线的初始位置，并基于初始位置和转动角度对图像组检测得到的目标框进行匹配追踪，确定晶棒拉晶是否断苞。第三方面，本申请还提供了一种计算机设备，包括存储器和处理器，存储器存储有计算机程序，处理器执行计算机程序时实现上述任意一种实施例所述的拉晶断苞检测方法的步骤。第四方面，本申请还提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现上述任意一种实施例所述的拉晶断苞检测方法的步骤。上述拉晶断苞检测方法、装置、计算机设备和存储介质，通过获取晶棒在拉晶阶段连续拍摄的图像组，对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框，根据所有正常棱线的目标框的质心点拟合确定晶棒的圆心，并以圆心的一方向为参考方向，计算每个棱线的目标框相对于参考方向的圆心角，根据图像组中连续图像之间同一棱线所对应的圆心角，得到连续图像之间晶棒的转动角度，根据图像组中一图像的圆心角确定图像组中晶棒棱线的初始位置，并基于初始位置和转动角度依次对图像组检测得到的目标框进行匹配追踪，确定晶棒拉晶是否断苞，如此，不仅可以检测出各类拉晶断苞的情况，尤其是棱线已经完全消失的情况，避免拉晶断苞漏检，大大提高检测的全面性，而且可以在晶棒转动过程中实时追踪到晶棒各棱线状况，避免单一图像检测的局限性，以精准确定各棱线是否存在拉晶断苞，有效提高了拉晶断苞的准确性。附图说明为了更清楚地说明本申请实施例或传统技术中的技术方案，下面将对实施例或传统技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为一个实施例中拉晶断苞检测方法的整体流程示意图；图2为一个实施例中拉晶断苞检测方法的正常棱线示意图；图3为一个实施例中拉晶断苞检测方法的断苞棱线示意图；图4为一个实施例中拉晶断苞检测方法的圆心角示意图；图5为一个实施例中拉晶断苞检测方法中步骤S500的具体流程示意图；图6为一个实施例中拉晶断苞检测方法的具体流程示意图；图7为一个实施例中拉晶断苞检测装置的结构框图；图8为一个实施例中拉晶断苞检测装置的具体示意图；图9为一个实施例中计算机设备的内部结构图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。除非另有定义，本文所使用的所有的技术和科学术语与属于本申请的技术领域的技术人员通常理解的含义相同。本文中在本申请的说明书中所使用的术语只是为了描述具体的实施例的目的，不是旨在于限制本申请。需要说明的是，当一个元件被认为是“连接”另一个元件时，它可以是直接连接到另一个元件，或者通过居中元件连接另一个元件。此外，以下实施例中的“连接”，如果被连接的对象之间具有电信号或数据的传递，则应理解为“电连接”、“通信连接”等。在此使用时，单数形式的“一”、“一个”和“所述/该”也可以包括复数形式，除非上下文清楚指出另外的方式。还应当理解的是，术语“包括/包含”或“具有”等指定所陈述的特征、整体、步骤、操作、组件、部分或它们的组合的存在，但是不排除存在或添加一个或更多个其他特征、整体、步骤、操作、组件、部分或它们的组合的可能性。同时，在本说明书中使用的术语“和/或”包括相关所列项目的任何及所有组合。本申请实施例提供的拉晶断苞检测方法，可以应用于单晶硅制备中对晶棒拉晶断苞进行检测，更为广泛地，还可以应用于其他晶体制备中对晶棒拉晶断苞进行检测。对于一般晶棒生长工序，需要经过引晶，放肩，转肩，等径，收尾等工序，其中，引晶为将晶种慢慢插入其中，接着将晶种慢慢往上提升，使其直径缩小到一定尺寸，维持此直径并拉长，以消除晶种内的晶粒排列取向差异，放肩和转肩为慢慢降低提升速度和温度，使颈部直径逐渐加大到所需尺寸，等径为晶体生长不断调整提升速度和融炼温度，维持固定的晶棒直径，直到晶棒长度达到预定值，收尾为当晶棒长度达到预定值后再逐渐加快提升速度并提高融炼温度，使晶棒直径逐渐变小，以避免因热应力造成排差和滑移等现象产生，最终使晶棒与液面完全分离，到此即得到一根完整的晶棒。在一个实施例中，如图1所示，提供了一种拉晶断苞检测方法，包括以下步骤：S100：获取晶棒在拉晶阶段连续拍摄的图像组；具体地，本实施例基于一组图像组进行检测，以综合判断拉晶各个棱线是否存在断苞，其中，图像组中图像连续拍摄的，该图像组可以是从拍摄视频中截取的图像组，也可以是拍摄照片而组成的图像组。在一些实施例中，采用CCD相机进行图像组的连续拍摄，具体拍摄的图像涵盖晶棒生长的区域，即晶棒的固液交界面区域。S200：对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框；具体地，本实施例通过对图像组中每一图像进行视觉检测，以识别得到晶棒棱线的目标框，其中，目标框中可以检测出断苞棱线的情况，对此，若目标框中断苞棱线超出允许范围，则可以直接确定拉晶存在断苞，反之，则可以继续进行下一步骤。参看图2，从左到右，正常棱线依次为在固液交界面具有明显超出圆弧处的凸出、或者在固液交界面具有明显折线样式、或者在固液交界面棱线两侧具有明显虚影和一定程度折线样式、或者在晶棒边缘呈现折线或虚影效果、或者在棱线、固液交界面、遮挡面三者交汇处呈现虚影样式，参看图3，从左到右，断苞棱线依次为棱线未生长至固液交界面就呈现断裂样式、或者棱线未生长至遮挡面就呈现断裂样式、或者棱线刚断、或者棱线断较久且图像上有明显断裂样式。上述正常棱线和断苞棱线的情况均可以通过视觉检测识别，并通过目标框标识，然而，还有一种情况的断苞棱线无法通过上述视觉检测识别到，具体而言，在本应该存在棱线的地方，当完全看不到任何棱线的情况下，此时无法通过视觉检测识别到目标框，也就会被视觉检测当作无棱线区域，为此，本实施例继续进行接下来的拉晶断苞检测步骤，以对此断苞情况进行检测。S300：根据所有正常棱线的目标框的质心点拟合确定晶棒的圆心，并以圆心的一方向为参考方向，计算每个棱线的目标框相对于参考方向的圆心角；具体地，参看图4，在等径阶段，等径阶段晶棒601与溶液表面602接触，并在等径固液交界处有光圈604，本实施例根据正常棱线的目标框的质心点拟合出圆，获取圆的半径与圆心607，并以该圆心作为等径阶段晶棒601的圆心，从而定位各个目标框605，其中，以圆心的任意一方向为参考方向606，即0度对应的起始位置，该参考方向与拟合出的圆处于同一平面，基于该参考方向按顺时针或逆时针确定每个棱线的目标框相对圆心的圆心角，该圆心角603即目标框的质心点-圆心-参考方向之间的夹角，圆心角范围可以为0度~360度。在一些实施例中，参考方向可以取图像上圆心为起点的竖直向下方向，以便于计算。S400：根据图像组中连续图像之间同一棱线所对应的圆心角，得到连续图像之间晶棒的转动角度；具体地，图像组中连续图像之间可以依据图像上的棱线位置和/或转动方向确定是否为同一棱线，例如连续两张图像上只存在一条棱线，则基于转动方向可以确定两者为同一棱线，再例如连续两张图像存在两条棱线，则基于转动方向以及棱线位置就可以确定为相同的两条棱线。进一步，再基于连续图像之间同一棱线所对应的圆心角之间的差值，就可以得到连续图像之间晶棒的转动角度。S500：根据图像组一图像中棱线的圆心角确定该图像中晶棒棱线的初始位置，并基于初始位置和转动角度对图像组检测得到的目标框进行匹配追踪，确定晶棒拉晶是否断苞。具体地，本实施例根据图像组一图像中棱线的圆心角确定图像组中晶棒棱线的初始位置，任意一图像均可，其中，以单晶硅为例，其正常在拉晶阶段会存在四条棱线，并且每条棱线之间相差90度左右，对此，基于图像组任意一张图像中一棱线的角度位置就可以确定该图像上其他三条棱线的角度位置，以此作为初始位置。具体地，以上述初始位置的图像为初始图像，根据转动角度就可以确定其他图像上各棱线的位置随着晶棒转动的变化，基于此可以分别对各个图像检测得到的目标框进行匹配追踪，其中，依次对图像组中图像检测得到的目标框进行匹配追踪，在图像视野范围内检查各个图像上晶棒棱线应该出现的位置是否和检测得到目标框对应，若本应该存在棱线的位置没有对应的目标框，这就说明此处本应该存在的棱线消失了。具体地，考虑到实际棱线目标框检测的误差，可以基于整个图像组的匹配追踪结果确定拉晶断苞的情况，其中，若整个图像组均未匹配追踪到晶棒的其中一棱线，或者从其中一图像开始后续持续未匹配追踪到晶棒的其中一棱线，则确定拉晶存在断苞，以此避免棱线目标框检测误差造成的影响，若在整个图像组可以匹配追踪到晶棒指定数量的棱线，则确定拉晶正常。上述拉晶断苞检测方法，在晶棒拉晶过程中，通过连续拍摄的图像组检测得到棱线的目标框，并基于目标框拟合的晶棒圆心确定各个目标框对应的圆心角，从而确定图像组中连续图像之间晶棒的转动角度，基于转动角度、以及晶棒一棱线在任意一图像的初始位置，就可以对图像组中所有图像棱线位置进行定位，从而对目标框进行匹配追踪，检测出拉晶断苞中棱线消失的情况，如此，不仅可以检测出各类拉晶断苞的情况，尤其是棱线已经完全消失的情况，避免拉晶断苞漏检，大大提高检测的全面性，而且可以在晶棒转动过程中实时追踪到晶棒各棱线状况，避免单一图像检测的局限性，以精准确定各棱线是否存在拉晶断苞，有效提高了拉晶断苞的准确性。在一个实施例中，参看图5，根据图像组一图像中棱线的圆心角确定该图像中晶棒棱线的初始位置包括：S501：根据转动角度确定图像组中晶棒转动前四分之一周期所对应的多张图像；S502：基于晶棒转动前四分之一周期所对应的多张图像，确定多张图像中出现的第一条棱线，其中，若不存在第一条棱线，则直接确定拉晶存在断苞；S503：根据第一条棱线所在图像中的圆心角确定该图像上其他棱线的角度，得到该图像中晶棒棱线的初始位置。具体地，本实施例采用图像组中第一条棱线出现的图像作为初始图像，以确定初始位置，其中，以单晶硅为例，通过转动角度确定图像组中晶棒转动前四分之一周期所对应的多张图像，也就是说，从图像组的第一张图像开始，通过转动角度确定晶棒转动90度所对应的多张图像，对于单晶硅，该四分之一周期所对应的多张图像中理论上就应该至少存在一条棱线，这不仅是确定多张图像中出现的第一条棱线，而且还是确定拉晶是否已经存在断苞情况。在确定第一条棱线的情况下，就可以基于其对应的圆心角确定该图像上其他棱线的角度，从而得到所需的初始位置。在一个实施例中，参看图5，基于初始位置和转动角度对图像组检测得到的目标框进行匹配追踪，确定晶棒拉晶是否断苞包括：S504：根据初始位置和转动角度依次确定各图像上晶棒棱线的追踪位置，并根据追踪位置对各图像中的目标框进行匹配追踪，确定晶棒拉晶是否断苞。具体地，前后图像之间晶棒的转动角度实质上反应的是棱线角度差，即棱线位置变化，如此，以初始位置对应的图像为基准，基于前后图像之间晶棒的转动角度，就可以依次确定各图像上晶棒棱线的追踪位置，即图像上棱线应该出现的位置，再通过追踪位置就可以和检测得到的目标框进行位置匹配，若追踪位置上存在对应棱线的目标框，则说明此处棱线正常，若追踪位置上不存在对应棱线的目标框，则说明此处棱线缺失，拉晶存在断苞。在一个实施例中，确定晶棒拉晶是否断苞还包括：结合目标框中的断苞棱线数量，确定晶棒拉晶是否断苞。具体地，将上述棱线消失的情况检测与目标框直接检测出的断苞棱线数量结合，一同确定晶棒拉晶的断苞情况，其中，对于目标框检测而言，设定有断苞棱线数量的阈值，即允许范围，当目标框中，断苞棱线数量超出阈值，则更新结果为拉晶断苞，对于棱线消失的情况检测，设定有对应晶体棱线的指定数量，若追踪不到指定数量，则更新结果为拉晶断苞，该指定数量具体与晶体相关，综合两者，在均无拉晶断苞的情况，则说明拉晶正常。在一个实施例中，对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框包括：通过神经网络模型对图像组中的每一图像进行模型检测，分别得到晶棒棱线的目标框，其中，神经网络模型基于卷积神经网络结构并结合残差神经网络进行训练得到。具体地，本实施例使用CCD相机采集大量拉晶工艺过程中的图像，由于晶炉内高温和封闭环境，视觉系统需以一定倾斜角安装在观察窗上，透过镀金玻璃对炉内的等径生长状态进行图像采集，所采集的图像覆盖早期棱线未出现阶段、正常等径阶段、断苞棱线不同断苞时间的情况及各种特征情况下的棱线情况，并对图像进行初步预处理和标注，按图像组将图像数据集随机分为验证集、训练集和测试集，并且训练集、测试集和验证集的图像不重复。其中，具体对图像进行整理与图像增强，采用VGG Image Annotator图像标注工具进行标注，针对图像标注的结果，两类图像均匀分开。具体地，本实施例在常规的Faster R-CNN基础上采用ResNet-50残差神经网络作为主干网络进行图像特征的学习，使用残差学习的思想适应更大的深度，从而生产用于棱线检测的神经网络模型。其中，使用ResNet-50对输入网络的图像进行特征图提取，再接入RPN网络对特征图生成候选框，进行前景与背景的分类及边界框的回归，将生成框映射回特征图，并将映射区域池化为统一大小的生成特征图，送入全连接层进行目标类别判断，并再次修正边界框位置，以得到每个棱线目标框的类别与位置。进一步地，通过改变RPN网络的anchor尺度，可以解决图像断苞目标长宽比问题。基于上述搭建的深度学习神经网络，构建数据加载器，对数据集训练深度学习网络，经过迭代后，得到目标检测模型。在一个实施例中，对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框还包括：基于目标框的位置，剔除连续图像中位置相同的目标框；基于目标框的预设阈值，剔除不符合预设阈值的目标框。具体地，对于图像组检测得到的目标框进行筛选，其中，通过对连续两张图像中相同目标框的位置比对，将在相同位置检测到相同的目标框视为脏污干扰，并在目标框中去除该类目标框，通过对正常棱线与断苞棱线设定一定的阈值，对所有得到的目标框剔除不符合阈值的目标框，得到最终用于追踪的目标框结果。在一个实施例中，获取晶棒在拉晶阶段连续拍摄的图像组还包括：根据连续图像之间的拍摄时间差检查图像组的连续性。具体地，对该图像组中图像采集时间进行判断，分析连续两张图像的时间差是否合理，避免异常情况导致图像不连续，从而导致拉晶断苞检测错误。现结合具体应用场景对本实施例进行详细介绍，但不仅限于此。本实施例可以通过服务器的形式实现上述方法，其中，CCD采集得到现场生产的图像组和对应的炉台工艺参数信息，将数据以HTTP请求发送到服务器，服务器使用上述方法对拉晶断苞情况进行实时判断。以单晶硅为例，参看图6，具体过程如下：服务器先对请求进行相关设备确认，判别是否是新的炉台，若是新的炉台，为新炉台配置初始化的值，并且判别图像的数目是否合理，具体可以根据炉台工艺参数确定；服务器在相关设备确认完毕，开始对请求中的图像组进行拉晶断苞检测，基于预先训练好的神经网络模型对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框，并存储保存结果；服务器在上述图像检测结束后，对该组图像得到的综合结果进行判断，其中，对该图像组的图像采集时间进行判断，分析连续两张图像的时间差是否合理，避免异常情况导致图像不连续，并且通过对连续两张图像在相同位置进行检测，若检测到相同的目标框，即目标框位置不随晶棒转动而变化，则视为脏污干扰，在综合结果中去除该类目标框，以及对正常棱线与断苞棱线设定一定的阈值，对所有得到的检测结果目标框剔除不符合阈值的目标框，得到最终用于追踪的目标框结果；服务器基于上述筛选之后的目标框结果，使用所有正常棱线的目标框的质心点拟合出圆，得到圆心与半径，并以图像上圆心点竖直向下方向为参考方向，逆时针方向计算出每个棱线目标框的圆心角，即目标框的质心-圆心-参考方向的夹角，再计算具有同一条棱线的连续图像之间的棱线角度差，即连续图像之间晶棒的转动角度；以单晶硅为例，服务器基于转动角度确定图像组中晶棒转动前四分之一周期所对应的多张图像，判断前四分之一周期是否存在棱线，即是否存在第一条棱线，若不存在，表明第一条棱线断，返回结果为断苞；服务器从第一根出现的棱线进行计算，对后续棱线角度增加90、180、270，得到编号 2、3、4的棱线，并依次对图像组中的目标框进行匹配追踪，其中，每转一张图像，各棱线的追踪位置增加两张图像之间转动角度，以此对当前图像检测到的棱线进行匹配；服务器基于匹配追踪的结果与上述模型监测中的断苞棱线数量确定拉晶断苞结果，其中，若匹配追踪的结果任意一条或多条棱线消失，则拉晶为断苞状态，若断苞棱线数量大于指定值时，则拉晶为断苞状态；服务器将拉晶检测结果反馈至相关设备，并接收下一组图像组的请求，以此实现实时检测，其中，若确认断苞发生，则进行预警，现场工艺人员根据预警及时回熔、取段、收尾，防止能源的浪费，如果未检测到断苞，拉晶正常进行，继续实时检测，直到等径工艺阶段结束。应该理解的是，虽然如上所述的各实施例所涉及的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，如上所述的各实施例所涉及的流程图中的至少一部分步骤可以包括多个步骤或者多个阶段，这些步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤中的步骤或者阶段的至少一部分轮流或者交替地执行。基于同样的发明构思，本申请实施例还提供了一种用于实现上述所涉及的拉晶断苞检测方法的拉晶断苞检测装置。该装置所提供的解决问题的实现方案与上述方法中所记载的实现方案相似，故下面所提供的一个或多个拉晶断苞检测装置实施例中的具体限定可以参见上文中对于拉晶断苞检测方法的限定，在此不再赘述。在一个实施例中，如图7所示，提供了一种拉晶断苞检测装置，包括：获取模块10，用于获取晶棒在拉晶阶段连续拍摄的图像组；棱线检测模块20，用于对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框；角度测量模块30，用于根据所有正常棱线的目标框的质心点拟合确定晶棒的圆心，并以圆心的一方向为参考方向，计算每个正常棱线的目标框相对于参考方向的圆心角；转动测量模块40，用于根据图像组中连续图像之间同一棱线所对应的圆心角，得到连续图像之间晶棒的转动角度；匹配追踪模块50，用于根据图像组一图像中棱线的圆心角确定该图像中晶棒棱线的初始位置，并基于初始位置和转动角度对图像组检测得到的目标框进行匹配追踪，确定晶棒拉晶是否断苞。在一个实施例中，匹配追踪模块根据图像组一图像中棱线的圆心角确定该图像中晶棒棱线的初始位置包括：根据转动角度确定图像组中晶棒转动前四分之一周期所对应的多张图像；基于晶棒转动前四分之一周期所对应的多张图像，确定多张图像中出现的第一条棱线，其中，若不存在第一条棱线，则直接确定拉晶存在断苞；根据第一条棱线所在图像中的圆心角确定该图像上其他棱线的角度，得到该图像中晶棒棱线的初始位置。在一个实施例中，匹配追踪模块基于初始位置和转动角度对图像组检测得到的目标框进行匹配追踪，确定晶棒拉晶是否断苞包括：根据初始位置和转动角度依次确定各图像上晶棒棱线的追踪位置，并根据追踪位置对各图像中的目标框进行匹配追踪，确定晶棒拉晶是否断苞。在一个实施例中，匹配追踪模块确定晶棒拉晶是否断苞还包括：结合目标框中的断苞棱线数量，确定晶棒拉晶是否断苞。在一个实施例中，棱线检测模块对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框包括：通过神经网络模型对图像组中的每一图像进行模型检测，分别得到晶棒棱线的目标框，其中，神经网络模型基于卷积神经网络结构并结合残差神经网络进行训练得到。在一个实施例中，棱线检测模块对图像组中的每一图像进行检测，分别得到晶棒棱线的目标框还包括：基于目标框的位置，剔除连续图像中位置相同的目标框；基于目标框的预设阈值，剔除不符合预设阈值的目标框。在一个实施例中，获取模块获取晶棒在拉晶阶段连续拍摄的图像组还包括：根据连续图像之间的拍摄时间差检查图像组的连续性。如图8所示，为一个实施例中拉晶断苞检测装置的具体示意图，包括单晶炉60、图像采集装置70和计算机设备80，其中，计算机设备80中包括上述获取模块10、棱线检测模块20、角度测量模块30、转动测量模块40和匹配追踪模块50，其中，单晶炉60用于对晶棒进行拉制，图像采集装置70用于在晶棒的拉晶阶段连续拍摄图像组，并将图像组数据发送给计算机设备80，计算机设备80包括通过系统总线连接的处理器、存储器和网络接口，用于实现上述的拉晶断苞检测方法。上述拉晶断苞检测装置中的各个模块可全部或部分通过软件、硬件及其组合来实现。上述各模块可以硬件形式内嵌于或独立于计算机设备中的处理器中，也可以以软件形式存储于计算机设备中的存储器中，以便于处理器调用执行以上各个模块对应的操作。在一个实施例中，提供了一种计算机设备，该计算机设备可以是服务器，其内部结构图可以如图9所示。该计算机设备包括通过系统总线连接的处理器、存储器和网络接口。其中，该计算机设备的处理器用于提供计算和控制能力。该计算机设备的存储器包括非易失性存储介质和内存储器。该非易失性存储介质存储有操作系统、计算机程序和数据库。该内存储器为非易失性存储介质中的操作系统和计算机程序的运行提供环境。该计算机设备的网络接口用于与外部的终端通过网络连接通信。该计算机程序被处理器执行时以实现一种拉晶断苞检测方法。本领域技术人员可以理解，图9中示出的结构，仅仅是与本申请方案相关的部分结构的框图，并不构成对本申请方案所应用于其上的计算机设备的限定，具体的计算机设备可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。在一个实施例中，提供了一种计算机设备，包括存储器和处理器，存储器中存储有计算机程序，该处理器执行计算机程序时实现上述实施例中任意一种拉晶断苞检测方法。具体详细说明参看方法对应的说明，在此不再赘述。在一个实施例中，提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现上述实施例中任意一种拉晶断苞检测方法。具体详细说明参看方法对应的说明，在此不再赘述。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一非易失性计算机可读取存储介质中，该计算机程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、数据库或其它介质的任何引用，均可包括非易失性和易失性存储器中的至少一种。非易失性存储器可包括只读存储器、磁带、软盘、闪存、光存储器、高密度嵌入式非易失性存储器、阻变存储器、磁变存储器、铁电存储器、相变存储器、石墨烯存储器等。易失性存储器可包括随机存取存储器或外部高速缓冲存储器等。作为说明而非局限，RAM可以是多种形式，比如静态随机存取存储器或动态随机存取存储器等。本申请所提供的各实施例中所涉及的数据库可包括关系型数据库和非关系型数据库中至少一种。非关系型数据库可包括基于区块链的分布式数据库等，不限于此。本申请所提供的各实施例中所涉及的处理器可为通用处理器、中央处理器、图形处理器、数字信号处理器、可编程逻辑器、基于量子计算的数据处理逻辑器等，不限于此。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对本申请专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请的保护范围应以所附权利要求为准。
