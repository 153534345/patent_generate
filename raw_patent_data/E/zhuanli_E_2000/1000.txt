标题title
一种车门雷达静止障碍物识别增强方法
摘要abst
本发明涉及一种车门雷达静止障碍物识别增强方法，其利用自动车门启动过程中的检测信息，放弃传统通过天线队列进行测角的方法，通过距离速度信息推导反射点的角度信息，从而提升障碍物轮廓识别效果。同时，本发明通过车门运动引入速度维信息，增加静止障碍物不同反射点之间的隔离度，提升传统天线队列测角方法的探测效果。并且通过距离速度信息推导反射点的角度信息，解决部分反射点无法通过传统测角方法获取正确角度信息的问题。而且，本发明利用车门转动过程中车身坐标系下雷达可视区域的变化，提升雷达车身坐标系下的FOV及增强数据置信度。
权利要求书clms
1.一种车门雷达静止障碍物识别增强方法，其特征在于：所述方法包括以下步骤：步骤1、车门自动开启功能启动，雷达探测并计算车门可开角度；步骤2、车门控制模块执行开门动作，并实时反馈角度和角速度；步骤3、循环探测并修正车门可开角度，直到最新的车门可开角度与车门已开角度差值小于a，a为电动门开始执行刹停动作到完全停止的角度变化值；步骤4、控制车门停止转动，并执行到位；所述步骤1和步骤3中，雷达探测和计算车门可开角度具体如下：步骤11、对数据进行距离-速度算法分离；步骤12、对距离-速度谱做CFAR；步骤13、对超出阈值的反射点进行特殊聚类处理；特殊聚类处理方法如下：距离-速度谱上相连的反射点为同一簇，同一簇中幅值最大的点为核心A，同一簇中速度最大的点为核心B，同一簇中其他极值点为核心 C；记录各反射点的簇ID、核心类别、距离、速度信息；步骤14、计算输出4D点云信息；步骤15、FOV扩展数据更新与积累：步骤16、点云常规聚类并跟踪；步骤17、对同一类目标进行轮廓识别；步骤18、计算车门可开角度。2.根据权利要求1所述的一种车门雷达静止障碍物识别增强方法，其特征在于：所述步骤14具体如下：运用原测角算法获取核心A和核心C的角度信息；然后对核心A所在簇各反射点进行角度估计；如果核心B速度等于Vmax ，则认为该簇是静止簇，否则为运动簇；对于静止簇，通过距离速度信息对静止簇内的其他反射点进行角度估计；当车门启动起始阶段，即车门启动角度相对较小时，核心B与核心A反射点一致；待角度估计的反射点的角度δ求取公式如下：cos=Vx/Vbcos=Ra/Rx其中，Vx为相同簇中待角度估计的反射点的速度，Vb为相同簇中核心B的速度，Ra为相同簇中核心A的距离，Rx为相同簇中待角度估计的反射点的距离；当式、式计算所得的角度δ一致时，将该反射点保留，并将δ作为该反射点的水平角，否则丢弃该反射点信息；当车门启动角度较大时，核心A的角度应当与车门启动角度一致，核心B的角度为0°；此时的δ求取公式如下：cos=Vx/Vbcos=Ra/Rx其中，θ为车门已开启角度。3.根据权利要求2所述的一种车门雷达静止障碍物识别增强方法，其特征在于：在计算得到反射点的角度δ后，对该角度δ进行解模糊，具体如下：通过式计算得到δ值；计算Vx/Vb值，记为k；计算cos和cos值，分别记为p1，p2；比较|p1-k |和|p2-k |，若|p1-k | 较小，则取δ，否则取- δ；取|p1-k |和|p2-k |中较小值者与预设偏差门限值比较，若小于/＞，则将该反射点保留，并将对应的解模糊后的δ作为该反射点的水平角，否则丢弃该反射点信息。4.根据权利要求1所述的一种车门雷达静止障碍物识别增强方法，其特征在于：所述FOV扩展数据更新与积累具体如下：获取车门已开启角度；将雷达坐标系FOV转换为车身坐标系FOV；将雷达坐标系4D点云数据转换为车身坐标系4D点云数据并存储；对前后帧车身坐标系FOV重叠部分按车身坐标系4D点云数据进行匹配确认，当匹配上后置信度设为高水平；前后帧车身坐标系FOV不重叠部分按车身坐标系4D点云数据进行积累，但置信度设为低水平。
说明书desc
技术领域本发明涉及汽车雷达应用领域，具体涉及一种车门雷达精致障碍物识别增强方法。背景技术当前的车门自动开启功能需要相应的传感器识别目标障碍物信息，通过传感器提供的障碍物空间信息，在保障车门不触碰障碍物的情况下，最大限度开启车门。毫米雷达具有3D空间探测和速度探测的能力，成为车门自动开启功能中一个驻留传感器，此处称之为毫米波车门雷达。但是受限于成本及尺寸的问题，毫米波车门雷达的天线通道数通常不会很多，天线物理口径很小，导致其角度分辨率很大，对目标的形态识别效果很差。其中一个典型场景就是无法正确区分墙面目标和金属杆目标，或者无法识别墙面目标的边缘轮廓。具体地，现有毫米波车门雷达的工作逻辑如下：车速为0，车门关闭状态；雷达探测并反馈车门可开角度；车门控制模块执行开门动作；执行到位；二次开门探测。其中，雷达探测并反馈车门可开角度过程的处理流程如下：对数据进行距离-速度或者距离-角度算法分离；对距离-速度谱或者距离-角度谱做CFAR处理；计算超出阈值反射点的4D点云信息；点云聚类并跟踪；对同一类目标进行轮廓识别；计算车门可开角度。对同一类目标进行轮廓识别的处理方法如下：通过监测到的4D点云信息中的径向距离和水平俯仰角信息，计算该类目标在车身坐标系下的空间位置分布，获取轮廓信息。车门控制模块执行开门动作的方法为：车门控制模块接收车门可开角信息；根据车门开角信息，一次性编程车门控制模块转动速度、加速度、减速度以及执行加减速度位置。如图1-3所示，由于车门和环境中主要障碍物都是静止的，所以大量反射点信息都存在于相对速度为0的分块中，距离速度分离过程中只相当于进行了距离分离，速度分离失去意义。此后再进行角度分离,但由于角度分辨率不够精细，在一个角度分辨单元内存在大量不同距离单元，导致不同距离分辨单元的测角结果不准确。而由于不同距离分辨单元的测角结果不准确，通过距离角度信息计算的车身坐标系下的反射点空间位置也不准确。对应墙体，链条，护栏，路沿等这类面状目标的识别偏差很大，甚至杂乱无章。同时，车门控制模块指令中已经预设了减速信息，所以当车门转动过程中，雷达更新了车门可开角信息，全部指令需要重新编程。故雷达频繁更新可开角信息会造成车门转动顿挫现象。发明内容针对现有技术存在的问题，本发明的目的在于提供一种车门雷达精致障碍物识别增强方法，以提升障碍物轮廓识别精度。为实现上述目的，本发明采用的技术方案是：一种车门雷达静止障碍物识别增强方法，所述方法包括以下步骤：步骤1、车门自动开启功能启动，雷达探测并计算车门可开角度；步骤2、车门控制模块执行开门动作，并实时反馈角度和角速度；步骤3、循环探测并修正车门可开角度，直到最新的车门可开角度与车门已开角度差值小于a，a为电动门开始执行刹停动作到完全停止的角度变化值；步骤4、控制车门停止转动，并执行到位；所述步骤1和步骤3中，雷达探测和计算车门可开角度具体如下：步骤11、对数据进行距离-速度算法分离；步骤12、对距离-速度谱做CFAR；步骤13、对超出阈值的反射点进行特殊聚类处理；特殊聚类处理方法如下：距离-速度谱上相连的反射点为同一簇，同一簇中幅值最大的点为核心A，同一簇中速度最大的点为核心B，同一簇中其他极值点为核心 C；记录各反射点的簇ID、核心类别、距离、速度信息；步骤14、计算输出4D点云信息；步骤15、FOV扩展数据更新与积累：步骤16、点云常规聚类并跟踪；步骤17、对同一类目标进行轮廓识别；步骤18、计算车门可开角度。所述步骤14具体如下：运用原测角算法获取核心A和核心C的角度信息；然后对核心A所在簇各反射点进行角度估计；如果核心B速度等于Vmax ，则认为该簇是静止簇，否则为运动簇；对于静止簇，通过距离速度信息对静止簇内的其他反射点进行角度估计；当车门启动起始阶段，即车门启动角度相对较小时，核心B与核心A反射点一致；待角度估计的反射点的角度δ求取公式如下：cos=Vx/Vbcos=Ra/Rx其中，Vx为相同簇中待角度估计的反射点的速度，Vb为相同簇中核心B的速度，Ra为相同簇中核心A的距离，Rx为相同簇中待角度估计的反射点的距离；当式、式计算所得的角度δ一致时，将该反射点保留，并将δ作为该反射点的水平角，否则丢弃该反射点信息；当车门启动角度较大时，核心A的角度应当与车门启动角度一致，核心B的角度为0°；此时的δ求取公式如下：cos=Vx/Vbcos=Ra/Rx其中，θ为车门已开启角度。在计算得到反射点的角度δ后，对该角度δ进行解模糊，具体如下：通过式计算得到δ值；计算Vx/Vb值，记为k；计算cos和cos值，分别记为p1，p2；比较|p1-k |和|p2-k |，若|p1-k | 较小，则取δ，否则取- δ；取|p1-k |和|p2-k |中较小值者与预设偏差门限值比较，若小于/＞，则将该反射点保留，并将对应的解模糊后的δ作为该反射点的水平角，否则丢弃该反射点信息。所述FOV扩展数据更新与积累具体如下：获取车门已开启角度；将雷达坐标系FOV转换为车身坐标系FOV；将雷达坐标系4D点云数据转换为车身坐标系4D点云数据并存储；对前后帧车身坐标系FOV重叠部分按车身坐标系4D点云数据进行匹配确认，当匹配上后置信度设为高水平；前后帧车身坐标系FOV不重叠部分按车身坐标系4D点云数据进行积累，但置信度设为低水平。采用上述方案后，本发明具有以下有益效果：一、本发明利用车门启动的速度，引入速度维信息，提升反射点之间的信息隔离度，直接提升测角性能。二、本发明修改门控逻辑，使车门启动后能够持续修正车门可开角，且不会导致车门顿挫。三、本发明利用面状静止障碍物各反射点的距离速度角度之间的关系，间接获得一些通过测角算法无法准确估计其角度的反射点的角度。提升点云输出信息。四、本发明利用车门转动过程中车身坐标系下雷达可视区域的变化，提升雷达车身坐标系下的FOV及增强数据置信度。附图说明图1为现有技术墙体不同距离分辨单元反射点共用角度分辨单元示意图；图2为现有技术墙体不同反射点速度维无差别示意图；图3为现有技术墙体不同反射点距离速度角度信息隔离度示意图；图4为本发明墙体不同反射点速度维有差别示意图；图5为本发明墙体不同反射点距离速度角度信息隔离度示意图；图6为本发明车门运动状态下门雷达与墙体反射点相对速度关系示意图；图7为本发明车门运动状态下门雷达FOV变化示意图；图8为本发明车门开小角度下墙体不同核心反射点示意图；图9为本发明车门开大角度下待测墙体反射点角度模糊情况一示意图；图10为本发明车门开大角度下待测墙体反射点角度模糊情况二示意图。具体实施方式现在将参考附图更全面地描述示例实施方式。然而，示例实施方式能够以多种形式实施，且不应被理解为限于在此阐述的范例；相反，提供这些实施方式使得本公开将更加全面和完整，并将示例实施方式的构思全面地传达给本领域的技术人员。此外，所描述的特征、结构或特性可以以任何合适的方式结合在一个或更多实施例中。在下面的描述中，提供许多具体细节从而给出对本公开的实施例的充分理解。然而，本领域技术人员将意识到，可以实践本公开的技术方案而没有特定细节中的一个或更多，或者可以采用其它的方法、组元、装置、步骤等。在其它情况下，不详细示出或描述公知方法、装置、实现或者操作以避免模糊本公开的各方面。附图中所示的方框图仅仅是功能实体，不一定必须与物理上独立的实体相对应。即，可以采用软件形式来实现这些功能实体，或在一个或多个硬件模块或集成电路中实现这些功能实体，或在不同网络和/或处理器装置和/或微控制器装置中实现这些功能实体。附图中所示的流程图仅是示例性说明，不是必须包括所有的内容和操作/步骤，也不是必须按所描述的顺序执行。例如，有的操作/步骤还可以分解，而有的操作/步骤可以合并或部分合并，因此实际执行的顺序有可能根据实际情况改变。本发明揭示了一种车门雷达静止障碍物识别增强方法，其利用自动车门启动过程中的检测信息，放弃传统通过天线队列进行测角的方法，通过距离速度信息推导反射点的角度信息，从而提升障碍物轮廓识别效果。车门静止状态下探测到的静止障碍物相对速度都为0，速度维分离失去了意义。而车门运动状态下探测到的静止障碍物相对速度不为0,并且不同角度相对速度不一样。所以，如图4-5所示，本发明引入速度分量，增加距离分辨单元之间的隔离度，通过速度维的分离，减小同一角度分辨单元内的信息耦合。当车门启动过程中，车门与静止目标之间是存在相对速度的，并且该相对速度与车门转速和反射点方位角之间存在如下关系：Vmax=ω* LV1=Vmax * cos其中，ω为车门运动角速度，L为车门转轴到雷达接收天线中心的距离； Vmax为天线中心位置对应车门运动线速度，当雷达安装面与车门平行时，该线速度即为雷达0°角方向探测到的相对速度，如图6所示。由公式可以明显看出反射点速度和角度的对应关系。在LFMCW车载雷达体制中，速度分辨率由下式所得其中c为光速，fc为载频，T为单个chirp周期，M为chirp数。由上式可知，速度分辨率只和chirp总时长有关，理论上速度分辨率可以做的无穷小。所以不同距离分辨单元的速度分量都能准确识别。实际应用中应合理设置ω、L、Vres、Vmax、chirp数等参数，使该现象完整易分辨。所以，本发明通过距离，速度信息反向推测静止目标角度。如图7所示，雷达天线FOV保持不变，随着车门转动，其相对于原始位置的FOV产生变化。所以，本发明车门转动信息累积扩展雷达有效FOV，通过不同时间的检测数据匹配及积累，达到提升雷达有效FOV及增强置信度的目的。本发明具体包括以下步骤：步骤1、车门自动开启功能启动雷达探测并反馈车门可开角度。步骤2、车门控制模块执行开门动作，并实时反馈角度和角速度。步骤3、循环探测并修正车门可开角度，直到最新的车门可开角度与车门已开角度差值小于a，a为电动门开始执行刹停动作到完全停止的角度变化值，a为预设值，由用户根据电动门具体性能进行设定。步骤4、控制车门停止转动，并执行到位。上述步骤1和步骤3所执行的内容相同，均是进行雷达探测和计算可开门角度，不同的是，步骤3计算可开门角度时用的部分数据是步骤1中计算得到的。如图7-10所示，雷达探测和计算可开门的具体内容如下：步骤11、对数据进行距离-速度算法分离；步骤12、对距离-速度谱做CFAR；步骤13、对超出阈值的反射点进行聚类处理；距离-速度谱上相连的反射点为同一簇，同一簇中幅值最大的点为核心A，同一簇中速度最大的点为核心B，同一簇中其他极值点为核心 C；记录各反射点的簇ID、核心类别、距离、速度信息。步骤14、计算输出4D点云信息；4D点云信息至少包括距离、速度、角度、幅度等正常雷达信息。具体地，运用原测角算法获取核心A和核心C的角度信息。然后对各核心A所在簇各反射点进行角度估计。如果核心B速度等于Vmax ，则认为该簇是静止簇，否则为运动簇。对于运动簇采用目前的常规处理方法即可，本文对此不进行过多赘述。对于静止簇，通过距离速度信息对静止簇内的其他反射点进行角度估计。具体如下：当车门启动起始阶段，即车门启动角度相对较小时，核心B与核心A 反射点一致。如果待求反射点为墙体其他反射点，其角度δ与核心 A、核心B都有关联，通过该相关性进一步保障反射点为真实有效的墙体反射点，排除反射点为干扰或者旁瓣等可能。待角度估计的反射点的角度δ求取公式如下：cos=Vx/Vbcos=Ra/Rx其中， Vx为相同簇中待角度估计的反射点的速度，Vb为相同簇中核心B的速度，Ra为相同簇中核心A的距离，Rx为相同簇中待角度估计的反射点的距离。当式、式计算所得的角度δ一致时，将该反射点保留，并将δ作为该反射点的水平角，否则丢弃该反射点信息。注意，通过公式可知，此时计算出来的δ会存在正负模糊，并不是完全正确的，应将数据置信度设置为低，需要进一步解决该角度模糊问题。当车门启动角度较大时，核心A的角度应当与车门启动角度一致，核心B的角度为0°。此时的δ求取公式如下：cos=Vx/Vbcos=Ra/Rx其中，θ为车门已开启角度，由于θ为确定已知的，故通过上式可以进一步进行δ角解模糊。解模糊方法如下：通过式计算得到δ值；计算Vx/Vb值，记为k；计算cos和cos值，分别记为p1，p2；比较|p1-k |和|p2-k |，若|p1-k | 较小，则取δ，否则取- δ；取|p1-k |和|p2-k |中较小值者与预设偏差门限值比较，若小于/＞，则将该反射点保留，并将对应的解模糊后的δ作为该反射点的水平角，否则丢弃该反射点信息。步骤15、FOV扩展数据更新与积累。步骤16、点云常规聚类并跟踪。步骤17、对同一类目标进行轮廓识别。步骤18、计算车门可开角度。上述步骤16、17、18所采用的方法与现有的计算方法并无不同，所以本发明对此不进行赘述。所述步骤15中，FOV扩展数据更新与积累具体如下：获取车门已开启角度；将雷达坐标系FOV转换为车身坐标系FOV；将雷达坐标系4D点云数据转换为车身坐标系4D点云数据并存储；对前后帧车身坐标系FOV重叠部分按车身坐标系4D点云数据进行匹配确认，当匹配上后置信度设为高水平；前后帧车身坐标系FOV不重叠部分按车身坐标系4D点云数据进行积累，但置信度设为低水平。本发明具有以下有益效果：一、本发明利用车门启动的速度，引入速度维信息，提升反射点之间的信息隔离度，直接提升测角性能。二、本发明修改门控逻辑，使车门启动后能够持续修正车门可开角，且不会导致车门顿挫。三、本发明利用面状静止障碍物各反射点的距离速度角度之间的关系，间接获得一些通过测角算法无法准确估计其角度的反射点的角度，提升点云输出信息。四、本发明利用车门转动过程中车身坐标系下雷达可视区域的变化，提升雷达车身坐标系下的FOV及增强数据置信度。本发明还提供了一种计算机可读介质，该计算机可读介质可以是上述实施例中描述的电子设备中所包含的；也可以是单独存在，而未装配入该电子设备中。上述计算机可读介质承载有一个或者多个程序，当上述一个或者多个程序被一个该电子设备执行时，使得该电子设备实现上述实施例中所述的方法。应当注意，尽管在上文详细描述中提及了用于动作执行的设备的若干模块或者单元，但是这种划分并非强制性的。实际上，根据本公开的实施方式，上文描述的两个或更多模块或者单元的特征和功能可以在一个模块或者单元中具体化。反之，上文描述的一个模块或者单元的特征和功能可以进一步划分为由多个模块或者单元来具体化。通过以上的实施方式的描述，本领域的技术人员易于理解，这里描述的示例实施方式可以通过软件实现，也可以通过软件结合必要的硬件的方式来实现。因此，根据本公开实施方式的技术方案可以以软件产品的形式体现出来，该软件产品可以存储在一个非易失性存储介质中或网络上，包括若干指令以使得一台计算设备执行根据本公开实施方式的方法。本领域技术人员在考虑说明书及实践这里公开的发明后，将容易想到本公开的其它实施方案。本公开旨在涵盖本公开的任何变型、用途或者适应性变化，这些变型、用途或者适应性变化遵循本公开的一般性原理并包括本公开未公开的本技术领域中的公知常识或惯用技术手段。应当理解的是，本公开并不局限于上面已经描述并在附图中示出的精确结构，并且可以在不脱离其范围进行各种修改和改变。本公开的范围仅由所附的权利要求来限制。
