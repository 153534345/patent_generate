标题title
一种基于单芯电缆的深井供电与数据传输方法及系统
摘要abst
本申请实施例提供一种基于单芯电缆的深井供电与数据传输方法及系统，地面设备与井下设备通过单芯电缆相连接，方法包括：地面设备将直流电源信号调制在第一频点经单芯电缆传输至所述井下设备；地面设备将授时与控制信号调制在第二频点经单芯电缆传输至井下设备，井下设备将观测仪器的控制参数调制在第二频点经单芯电缆传输至地面设备；井下设备将观测仪器的观测数据调制在第三频段经单芯电缆传输至地面设备；其中，第一频点小于第二频点，第二频点小于第三频段的频率范围。本申请能够将多种类型的数据信号耦合在单芯电缆上传输，且简化了电路结构，降低系统复杂度，同时能够保证各类数据的精确性。
权利要求书clms
1.一种基于单芯电缆的深井供电与数据传输方法，其特征在于，地面设备与井下设备通过单芯电缆相连接，方法包括：所述地面设备将直流电源信号调制在第一频点经所述单芯电缆传输至所述井下设备；所述地面设备将授时与控制信号调制在第二频点经所述单芯电缆传输至所述井下设备，所述井下设备将观测仪器的控制参数调制在所述第二频点经所述单芯电缆传输至地面设备；所述井下设备将观测仪器的观测数据调制在第三频段经所述单芯电缆传输至所述地面设备；其中，所述第一频点小于所述第二频点，所述第二频点小于所述第三频段的频率范围。2.根据权利要求1所述的方法，其特征在于，所述地面设备将授时与控制信号调制在第二频点经所述单芯电缆传输至所述井下设备，包括：所述地面设备生成所述授时与控制信号；其中，所述授时与控制信号包括用于授时的原始秒脉冲正弦波信号和用于控制所述观测仪器的控制信号，所述授时与控制信号是基于多个不同频率的正弦波叠加而成的；对所述授时与控制信号进行频率调制，生成调制后的授时与控制信号；其中，用于频率调制的载波信号的中心频率为所述第二频点；向井下设备发送所述调制后的授时与控制信号。3.根据权利要求2所述的方法，其特征在于，对所述授时与控制信号进行频率调制，生成调制后的授时与控制信号，包括：根据所述授时与控制信号，基于直接数字频率合成器生成所述调制后的授时与控制信号。4.根据权利要求3所述的方法，其特征在于，根据所述授时与控制信号，基于直接数字频率合成器生成所述调制后的授时与控制信号，包括：根据所述授时与控制信号，计算载波信号的频率；根据所述载波信号的频率，计算相位控制字；以相位控制字为相位步长，查询预设的正弦波相位幅值表，得到所述相位步长对应的幅值；根据所述幅值，生成调制后的授时与控制信号。5.根据权利要求2-4中任意一项所述的方法，其特征在于，生成调制后的授时与控制信号，包括：利用第一缓存和第二缓存中的其中一个保存所述调制后的授时与控制信号，另一个读取所述调制后的授时与控制信号，将读取出的授时与控制信号进行数模转换后发送。6.根据权利要求2所述的方法，其特征在于，还包括：井下设备接收经过信道的调制后的授时与控制信号；对所述经过信道的调制后的授时与控制信号进行频率解调，得到解调后的授时与控制信号；基于解调后的授时与控制信号，恢复得到用于授时的整秒时刻和所述控制信号。7.根据权利要求6所述的方法，其特征在于，对所述经过信道的调制后的授时与控制信号进行解调，得到解调后的授时与控制信号，包括：利用比较器对所述经过信道的调制后的授时与控制信号进行比较处理，得到方波形式的授时与控制信号；利用计数器记录所述方波形式的授时与控制信号的上升沿和下降沿；根据所述上升沿和下降沿计算所述方波形式的授时与控制信号的半周期和半周期的中心点；根据所述半周期、半周期的中心点和预设的采样率，计算在所述采样率下确定的各采样点的频率；根据各采样点的采样时间和各采样点的频率，确定解调后的授时与控制信号。8.根据权利要求7所述的方法，其特征在于，根据所述半周期、半周期的中心点和预设的采样率，计算在所述采样率下确定的各采样点的频率，包括：确定所述采样点所在半周期；根据所述采样点与所述采样点所在半周期的中心点的位置关系，选取与所在半周期相邻的半周期；根据所述采样点所在半周期及所在半周期的中心点、与所在半周期相邻的半周期及该相邻的半周期的中心点、所述采样率，计算所述采样点的频率。9.根据权利要求8所述的方法，其特征在于，根据所述采样点所在半周期及所在半周期的中心点、与所在半周期相邻的半周期及该相邻的半周期的中心点、所述采样率，计算所述采样点的频率，方法为：其中，fj′为采样点j的频率，xj′为采样点j所在位置经线性插值得到的半周期宽度，线性插值基于采样点xj′所在半周期和相邻的半周期进行，fsys为时钟源的频率，fs为所述采样率，Pn为采样点j所在半周期的中心点的计数值，Pn-1为与采样点j所在半周期相邻的半周期的中心点的计数值，xn为采样点j所在半周期宽度，xn-1为与采样点j所在半周期相邻的半周期宽度。10.一种基于单芯电缆的深井供电与数据传输系统，其特征在于，包括：地面设备，用于将直流电源信号调制在第一频点经单芯电缆传输至井下设备；将授时与控制信号调制在第二频点经所述单芯电缆传输至所述井下设备；将观测仪器的观测数据调制在第三频段经所述单芯电缆传输至所述地面设备；其中，所述第一频点小于所述第二频点，所述第二频点小于所述第三频段的频率范围；井下设备，用于将观测仪器的控制参数调制在所述第二频点经所述单芯电缆传输至地面设备。
说明书desc
技术领域本申请实施例涉及井下观测技术领域，尤其涉及一种基于单芯电缆的深井供电与数据传输方法及系统。背景技术在深井综合观测系统中，地面设备与井下观测设备之间通过电缆连接，地面设备为井下观测设备提供授时信号等各类控制信号，各类控制信号经电缆传输至井下观测设备，井下观测设备采集的各类观测数据经电缆传输至地面设备。目前的地面设备和井下观测设备间一般通过多芯电缆连接，使用多芯电缆中的部分线芯供电，部分线芯传输控制信号和观测数据，接线复杂，且需要配置电路结构进行数据处理，系统结构复杂。发明内容有鉴于此，本申请实施例的目的在于提出一种基于单芯电缆的深井供电与数据传输方法及系统，使用单芯电缆实现供电与数据传输。基于上述目的，本申请实施例提供了一种基于单芯电缆的深井供电与数据传输方法，地面设备与井下设备通过单芯电缆相连接，方法包括：所述地面设备将直流电源信号调制在第一频点经所述单芯电缆传输至所述井下设备；所述地面设备将授时与控制信号调制在第二频点经所述单芯电缆传输至所述井下设备，所述井下设备将观测仪器的控制参数调制在所述第二频点经所述单芯电缆传输至地面设备；所述井下设备将观测仪器的观测数据调制在第三频段经所述单芯电缆传输至所述地面设备；其中，所述第一频点小于所述第二频点，所述第二频点小于所述第三频段的频率范围。可选的，所述地面设备将授时与控制信号调制在第二频点经所述单芯电缆传输至所述井下设备，包括：所述地面设备生成所述授时与控制信号；其中，所述授时与控制信号包括用于授时的原始秒脉冲正弦波信号和用于控制所述观测仪器的控制信号，所述授时与控制信号是基于多个不同频率的正弦波叠加而成的；对所述授时与控制信号进行频率调制，生成调制后的授时与控制信号；其中，用于频率调制的载波信号的中心频率为所述第二频点；向井下设备发送所述调制后的授时与控制信号。可选的，对所述授时与控制信号进行频率调制，生成调制后的授时与控制信号，包括：根据所述授时与控制信号，基于直接数字频率合成器生成所述调制后的授时与控制信号。可选的，根据所述授时与控制信号，基于直接数字频率合成器生成所述调制后的授时与控制信号，包括：根据所述授时与控制信号，计算载波信号的频率；根据所述载波信号的频率，计算相位控制字；以相位控制字为相位步长，查询预设的正弦波相位幅值表，得到所述相位步长对应的幅值；根据所述幅值，生成调制后的授时与控制信号。可选的，生成调制后的授时与控制信号，包括：利用第一缓存和第二缓存中的其中一个保存所述调制后的授时与控制信号，另一个读取所述调制后的授时与控制信号，将读取出的授时与控制信号进行数模转换后发送。可选的，所述方法还包括：井下设备接收经过信道的调制后的授时与控制信号；对所述经过信道的调制后的授时与控制信号进行频率解调，得到解调后的授时与控制信号；基于解调后的授时与控制信号，恢复得到用于授时的整秒时刻和所述控制信号。可选的，对所述经过信道的调制后的授时与控制信号进行解调，得到解调后的授时与控制信号，包括：利用比较器对所述经过信道的调制后的授时与控制信号进行比较处理，得到方波形式的授时与控制信号；利用计数器记录所述方波形式的授时与控制信号的上升沿和下降沿；根据所述上升沿和下降沿计算所述方波形式的授时与控制信号的半周期和半周期的中心点；根据所述半周期、半周期的中心点和预设的采样率，计算在所述采样率下确定的各采样点的频率；根据各采样点的采样时间和各采样点的频率，确定解调后的授时与控制信号。可选的，根据所述半周期、半周期的中心点和预设的采样率，计算在所述采样率下确定的各采样点的频率，包括：确定所述采样点所在半周期；根据所述采样点与所述采样点所在半周期的中心点的位置关系，选取与所在半周期相邻的半周期；根据所述采样点所在半周期及所在半周期的中心点、与所在半周期相邻的半周期及该相邻的半周期的中心点、所述采样率，计算所述采样点的频率。可选的，根据所述采样点所在半周期及所在半周期的中心点、与所在半周期相邻的半周期及该相邻的半周期的中心点、所述采样率，计算所述采样点的频率，方法为：其中，f′j为采样点j的频率，x′j为采样点j所在位置经线性插值得到的半周期宽度，线性插值基于采样点x′j所在半周期和相邻的半周期进行，fsys为时钟源的频率，fs为所述采样率，Pn为采样点j所在半周期的中心点的计数值，Pn-1为与采样点j所在半周期相邻的半周期的中心点的计数值，xn为采样点j所在半周期宽度，xn-1为与采样点j所在半周期相邻的半周期宽度。本申请实施例还提供一种基于单芯电缆的深井供电与数据传输系统，包括：地面设备，用于将直流电源信号调制在第一频点经单芯电缆传输至井下设备；将授时与控制信号调制在第二频点经所述单芯电缆传输至所述井下设备；将观测仪器的观测数据调制在第三频段经所述单芯电缆传输至所述地面设备；其中，所述第一频点小于所述第二频点，所述第二频点小于所述第三频段的频率范围；井下设备，用于将观测仪器的控制参数调制在所述第二频点经所述单芯电缆传输至地面设备。从上面所述可以看出，本申请实施例提供的基于单芯电缆的深井供电与数据传输方法及系统，地面设备与井下设备通过单芯电缆相连接，地面设备将直流电源信号调制在第一频点经单芯电缆传输至井下设备，地面设备将授时与控制信号调制在第二频点经单芯电缆传输至井下设备，井下设备将观测仪器的控制参数调制在第二频点经单芯电缆传输至地面设备，井下设备将观测仪器的观测数据调制在第三频段经单芯电缆传输至地面设备。本申请能够将多种类型的数据信号耦合在单芯电缆上传输，简化电路结构，降低系统复杂度，同时能够保证各类数据的精确性。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例的深井观测系统利用单芯电缆进行供电与数据传输装置的结构框图；图2A为本申请实施例的单芯电缆传输的频带信号示意图；图2B为本申请实施例的滤波器对频带信号进行滤波的示意图；图3为本申请实施例的授时与控制信号传输方法流程示意图；图4为本申请实施例的授时与控制信号传输过程示意图；图5为本申请实施例的直接数字频率合成调制后的信号的原理示意图；图6为本申请实施例的生成调制后的信号的流程示意图；图7为本申请实施例的频率解调原理示意图；图8为本申请另一实施例的频率解调原理示意图；图9为本申请实施例的正弦波授时原理示意图；图10为本申请实施例的相移补偿示意图；图11为本申请实施例的电子设备结构框图。具体实施方式为使本公开的目的、技术方案和优点更加清楚明白，以下结合具体实施例，并参照附图，对本公开进一步详细说明。需要说明的是，除非另外定义，本申请实施例使用的技术术语或者科学术语应当为本公开所属领域内具有一般技能的人士所理解的通常意义。本申请实施例中使用的“第一”、“第二”以及类似的词语并不表示任何顺序、数量或者重要性，而只是用来区分不同的组成部分。“包括”或者“包含”等类似的词语意指出现该词前面的元件或者物件涵盖出现在该词后面列举的元件或者物件及其等同，而不排除其他元件或者物件。“连接”或者“相连”等类似的词语并非限定于物理的或者机械的连接，而是可以包括电性的连接，不管是直接的还是间接的。“上”、“下”、“左”、“右”等仅用于表示相对位置关系，当被描述对象的绝对位置改变后，则该相对位置关系也可能相应地改变。相关技术中，深井观测系统包括地面设备和井下设备，井下设备一般于地下300米到3000米深的井底布设地震计、地磁仪、应变传感器等多种观测仪器，各种观测仪器测量的观测数据经电缆传输至地面设备，同时，地面设备将电源、授时信号和控制信号通过电缆传输给各观测仪器，为观测仪器供电，并提供授时与控制功能。考虑到多种数据信号在电缆线芯中传输存在干扰，一般在地面设备和井下设备间采用多芯电缆传输数据，例如，使用一部分线芯传输直流电源信号，一部分线芯传输观测数据等，多芯电缆的结构和接线较为复杂，且地面设备和井下设备两端均需配置相应的电路结构，用于进行调制解调或编码解码等数据处理，系统结构复杂。有鉴于此，本申请实施例提供一种基于单芯电缆的深井供电与数据传输方法，地面设备和井下设备之间通过单芯电缆连接，将直流电源、授时信号、控制信号和观测数据等不同类型的数据信号调制在不同的频段传输，简化电路设计，能够保证各类数据的准确传输，降低系统复杂度。如图1-3所示，本申请实施例提供的基于单芯电缆的深井供电与数据传输方法，包括：S301：地面设备将直流电源信号调制在第一频点经单芯电缆传输至井下设备；S302：地面设备将授时与控制信号调制在第二频点经单芯电缆传输至井下设备，井下设备将观测仪器的控制参数调制在第二频点经单芯电缆传输至地面设备；S303：井下设备将观测仪器的观测数据调制在第三频段经单芯电缆传输至地面设备；其中，第一频点小于第二频点，第二频点小于第三频段的频率范围。本实施例提供的深井供电与数据传输方法，应用于深井观测系统，地面设备和井下设备通过单芯电缆相连接，直流电源信号、授时与控制信号、观测数据占用不同的频段，耦合在单芯电缆上传输，实现井上、井下各类数据信号的精确传输。对于地面设备，一方面，将直流电源信号调制在第一频点经单芯电缆传输至井下设备，为井下的各类设备供电，第二方面，将包括授时信号和控制信号的授时与控制信号调制在第二频点经单芯电缆传输至井下设备，为井下的各类设备提供授时与控制功能，第三方面，经单芯电缆接收井下设备传输的观测数据。对于井下设备，一方面，经单芯电缆接收直流电源信号，根据井下各类设备所需电压，对直流电源信号进行电压转换，利用转换后的电压为各类仪器供电，第二方面，经单芯电缆接收授时与控制信号，通过对接收的授时与控制信号进行处理，获得用于授时的整秒时刻以及控制信号，根据整秒时刻校正本地时钟，根据控制信号对相应的观测仪器进行控制，第三方面，收集各类观测仪器采集的观测数据，将各类观测数据调制在第三频段经单芯电缆传输至地面设备，实现井下观测。如图1、2A、2B所示，直流电源信号在单芯电缆上占用第一频点传输，授时与控制信号在单芯电缆上占用第二频点传输，观测数据在单芯电缆上占用第三频段传输，且第一频点小于第二频点，第二频点小于第三频段的频率范围。一些方式中，第一频点为0赫兹，第二频点为10千赫兹，第三频段为2-30兆赫兹。一些实施方式中，地面设备包括第一授时控制模块、第一观测数据处理模块、第一低通滤波器、第一带通滤波器、第一高通滤波器，直流电源信号经第一低通滤波器滤波处理后在单芯电缆上传输，第一授时控制模块将授时与控制信号调制在第二频点后，经第一带通滤波器滤波处理后在单芯电缆上传输。井下设备包括第二授时控制模块、第二观测数据处理模块、数据采集器、各类观测仪器、第二低通滤波器、第二带通滤波器、第二高通滤波器，单芯电缆上的直流电源信号经第二低通滤波器滤波处理后为井下设备供电，单芯电缆上的授时与控制信号经第二带通滤波器滤波处理后，由第二授时控制模块进行处理，获得授时信号和控制信号，各类观测仪器采集的观测数据由数据采集器统一收集，收集后的观测数据经第二观测数据处理模块处理后，调制在第三频段，调制后的观测数据经第二高通滤波器滤波处理后经单芯电缆传输至地面设备，单芯电缆上传输的观测数据经第一高通滤波器滤波处理后，得到经过信道的调制后的观测数据，由第一观测数据处理模块进行解调处理，得到观测数据。观测数据经宽带电力线载波芯片调制到第三频带，二进制数据进行编码，再进行OFDM调制到第三频段发送，地面设备利用第一高通滤波后采样，经OFDM解调，得到二进制数据流，观测数据的调制解调方法不进行详细说明。一些实施例中，地面设备将授时与控制信号调制在第二频点经单芯电缆传输至井下设备，包括：地面设备生成授时与控制信号；其中，授时与控制信号包括用于授时的原始秒脉冲正弦波信号和用于控制观测仪器的控制信号，授时与控制信号是基于多个不同频率的正弦波叠加而成的；对授时与控制信号进行频率调制，生成调制后的授时与控制信号；其中，用于频率调制的载波信号的中心频率为第二频点；向井下设备发送调制后的授时与控制信号。本实施例中，地面设备的第一授时控制模块从时钟源获得精确的整秒时刻，根据整秒时刻和预设的控制信号，生成授时与控制信号，对授时与控制信号进行频率调制，将授时与控制信号调制在第二频点，生成调制后的授时与控制信号，调制后的授时与控制信号经单芯电缆发送至井下设备。其中，授时与控制信号包括两部分，一部分是用于授时的原始秒脉冲正弦波信号，另一部分是用于控制观测仪器的控制信号；授时与控制信号是基于多个不同频率的正弦波叠加而成的，根据控制信号的类型和数据量，授时与控制信号可以由具有第一数量的正弦波和具有第二数量的正弦波叠加而成，其中，第一数量的正弦波用于授时，第二数量的正弦波用于控制信号的传输。一些方式中，授时与控制信号基于正交频分复用技术调制生成，利用不同频率的子载波传输授时信号和控制信号，抗干扰能力强，误码率低，数据传输速率快，能够提高通信距离。一些实施例中，对授时与控制信号进行频率调制，生成调制后的授时与控制信号，包括：根据授时与控制信号，基于直接数字频率合成器生成调制后的授时与控制信号。即，第一授时控制模块生成授时与控制信号后，基于直接数字频率合成器根据授时与控制信号，生成调制后的授时与控制信号，方法包括：根据授时与控制信号，计算载波信号的频率；根据载波信号的频率，计算相位控制字；以相位控制字为相位步长，查询预设的正弦波相位幅值表，得到相位步长对应的幅值；根据幅值，生成调制后的授时与控制信号。如图5所示，本实施例中，将授时与控制信号作为基带信号，基于直接数字滤波合成器生成的载波信号对基带信号进行调制，得到频率调制后的授时与控制信号。其中，根据授时与控制信号，计算载波信号的频率，方法为：f＝fc+km式中，f为第i个载波信号的频率，fc为载波信号的中心频率，k为调频灵敏度，m为授时与控制信号的第i个数据点。若中心频率fc的相位控制字为Mc，第i个载波的相位控制字为M，则有：其中，为中心频率对应的相位，/＞为第i个载波信号的相位，n为载波信号的数据点个数，即由n个点表示一个正弦波，Tsend为载波数据间隔时间，即正弦波上相邻两个数据点的时间间隔。根据式得到：确定第i个载波的相位控制字M后，以该相位控制字为相位步长，查询预设的正弦波相位幅值表，该正弦波相位幅值表中保存有不同中心频率的正弦波的相位点与相应的幅值的对应关系，查询时，可根据中心频率确定对应的目标正弦波，然后按照相位步长从目标正弦波的所有相位点中选取对应的相位点，根据选取的各相位点确定对应的幅值。例如，对于中心频率为10000Hz的正弦波，相位控制字Mc为200，正弦波相位幅值表中对于该中心频率的正弦波的相位点有4000个，当基带数据m＝1，调频灵敏度k＝1000时，按照公式计算得到第i个载波的频率为11000赫兹，按照公式计算得到相位控制字M为220，则在正弦波相位幅值表中以相位步长为220查询对应的多个相位点，并确定各相位点对应的幅值。按照上述过程对所有基带数据处理之后，最终生成调制后的信号。如图6所示，实现中，对于4000个相位点，当相位控制字累加大于3999时，循环至下个周期，减去周期4000即得到实际的相位点对应的幅值。一些实施例中，生成调制后的授时与控制信号，包括：利用第一缓存和第二缓存中的其中一个保存调制后的授时与控制信号，另一个读取调制后的授时与控制信号，将读取出的授时与控制信号进行数模转换后发送。如图6所示，为提高数据处理与传输效率，配置第一缓存和第二缓存，其中，第一缓存用于按照前述方法计算生成并保存调制后的授时与控制信号，第二缓存用于从第一缓存中读取调制后的授时与控制信号，将调制后的授时与控制信号进行数模转换后发送，这样，利用两个缓存中的一个计算生成待发送数据，另一个发送数据，两个缓存同时循环使用，能够提升数据处理效率和数据传输速率。一些实施例中，深井供电与数据传输方法还包括：井下设备接收经过信道的调制后的授时与控制信号；对经过信道的调制后的授时与控制信号进行频率解调，得到解调后的授时与控制信号；基于解调后的授时与控制信号，恢复得到用于授时的整秒时刻和控制信号。如图4所示，地面设备根据授时信号和控制信号生成授时与控制信号后，对授时与控制信号进行频率调制，将授时与控制信号调制在第二频点经单芯电缆传输调制后的授时与控制信号；井下设备经单芯电缆接收经过信道的调制后的授时与控制信号，对接收的调制后的授时与控制信号进行频率解调，得到解调后的授时与控制信号，基于解调后的授时与控制信号，恢复出整秒时刻和控制信号。可选的，地面设备基于OFDM技术调制生成授时与控制信号，相应的，井下设备基于OFDM技术解调得到授时信号与控制信号。一些实施例中，对经过信道的调制后的授时与控制信号进行解调，得到解调后的授时与控制信号，包括：利用比较器对经过信道的调制后的授时与控制信号进行比较处理，得到方波形式的授时与控制信号；利用计数器记录方波形式的授时与控制信号的上升沿和下降沿；根据上升沿和下降沿计算方波形式的授时与控制信号的半周期和半周期的中心点；根据半周期、半周期的中心点和预设的采样率，计算在该采样率下确定的各采样点的频率；根据各采样点的采样时间和各采样点的频率，确定解调后的授时与控制信号。本实施例中，地面设备和井下设备均可基于控制芯片实现。井下设备从单芯电缆上接收调制后的授时与控制信号后，基于控制芯片的硬件资源和软件资源对授时与控制信号进行解调，无需额外配置用于频率解调的电路结构，简化系统结构。结合图7所示，解调方法具体为，经过信道的调制后的授时与控制信号先经过比较器进行比较处理后，生成方波形式的授时与控制信号，利用计数器记录方波形式的授时与控制信号的上升沿和下降沿，根据记录的上升沿和下降沿确定方波的半周期以及半周期的中心点，根据确定的半周期、半周期的中心点和预设的采样率，计算在该采样率下确定的各采样点的频率，得到由各采样点的采样时间及对应的频率构成的时间、频率序列，从而得到解调出的授时与控制信号。一些实施例中，根据半周期、半周期的中心点和预设的采样率，计算在采样率下确定的各采样点的频率，包括：确定采样点所在半周期；根据采样点与采样点所在半周期的中心点的位置关系，选取与所在半周期相邻的半周期；根据采样点所在半周期及所在半周期的中心点、与所在半周期相邻的半周期及该相邻的半周期的中心点、采样率，计算采样点的频率。如图7、8所示，经过信道的调制后的授时与控制信号经过比较器后转换为方波形式，方波形式的授时与控制信号由多个具有预定周期的方波组成，每个方波包括两个半周期，通过记录相邻的上升沿和下降沿，可以确定方波的半周期脉宽，以及半周期的中心点。按照预定的采样率生成在一定的采样时刻下的采样点，各采样点在方波上的采样位置任意，例如，在上升沿、下降沿、半周期的任意位置上。为确定任意采样点的频率，可根据采样点所在半周期、半周期的中心点，与所在半周期相邻的半周期及该半周期的中心点，基于数学原理计算确定。举例来说，采样点1所在半周期的下降沿计数值为Cn-1，上升沿计数值为Cn，下降沿与上升沿间构成的方波的半周期脉冲宽度为xn，该半周期的中心点的计数值为Pn。采样点2所在半周期的上升沿计数值为Cn+2，下降沿计数值为Cn+3，下降沿与上升沿间构成的半周期的计数值为xn+3，该半周期的中心点的计数值为Pn+3。采样点的频率可根据其所在半周期的计数值和所在半周期的中心点的计数值、与所在半周期相邻的半周期的计数值、相邻的半周期的中心点的计数值，以及采样点的采样率所确定。其中，对于相邻半周期的选择，可根据采样点与采样点所在半周期的中心点的位置关系确定。例如，采样点1在半周期的中心点Pn的右侧，则采样点1的频率根据其所在半周期，即中心点Pn所在半周期，以及与所在半周期右侧相邻的半周期，即中心点Pn+1所在半周期的相关计数值计算得到；采样点2在半周期的中心点Pn+3的左侧，则采样点2的频率根据其所在半周期，即中心点Pn+3所在半周期，以及与所在半周期左侧相邻的半周期，即中心点Pn+2所在半周期的相关计数值计算得到。其中，半周期宽度的计算方法为：一些实施例中，根据采样点所在半周期及所在半周期的中心点、与所在半周期相邻的半周期及该相邻的半周期的中心点、采样率，计算采样点的频率，方法为：其中，f′j为采样点j的频率，x′j为采样点j所在位置经线性插值得到的半周期宽度，线性插值基于采样点x′j所在半周期和相邻的半周期进行，fsys为时钟源的频率，fs为预设的采样率，Pn为采样点j所在半周期的中心点的计数值，Pn-1为与采样点j所在半周期相邻的半周期的中心点的计数值，xn为采样点j所在半周期宽度，xn-1为与采样点j所在半周期相邻的半周期宽度。本实施例中，利用控制芯片配置的计数器等资源，通过连续测量方波信号的正负半周期的宽度即可实现频率解调，相较于相关技术中采用相干解调或是非相干解调方式，均需要设计相匹配的带通滤波器、乘法器、低通滤波器、鉴频器等多种电路结构，本申请无需额外设计并配置用于调制解调的电路结构，简化电路设计和结构，大幅降低了系统复杂度，同时可获得精确的数据。需要说明的是，地面设备发送的授时与控制信号可按照前述方法进行频率调制后经单芯电缆传输至井下设备，井下设备按照前述方法进行频率解调后获得授时与控制信号，进一步处理得到授时信号和控制信号。井下设备发送的观测仪器的控制参数同样可按照前述方法进行频率调制后经单芯电缆传输至地面设备，地面设备按照前述方法进行频率解调后获得观测仪器的控制参数，例如地震仪器的当前工作状态等。一些实施例中，多个不同频率的正弦波包括用于授时的具有第一数量的正弦波，基于解调后的授时与控制信号，恢复得到用于授时的整秒时刻，包括：对解调后的授时与控制信号进行采样，得到采样信号；对采样信号进行快速傅里叶变换，得到频域的授时与控制信号；基于频域的授时与控制信号，确定具有第一数量的正弦波信号发生的相移；根据相移计算授时与控制信号的时延；根据时延和采样时刻，确定整秒时刻。如图9所示，本实施例中，井下设备通过频率解调得到解调后的授时与控制信号之后，对解调后的授时与控制信号进行采样，得到采样信号，对采样信号进行快速傅里叶变换，将时域信号转换为频域的授时与控制信号，基于频域的授时与控制信号获得包含不同频率的正弦波信号，确定其中的第一数量的不同频率的正弦波信号的相移，该第一数量的不同频率的正弦波信号为用于授时的正弦波信号，且该第一数量的不同频率的正弦波信号包括最低频率的正弦波信号和其他频率的正弦波信号。基于各频率的正弦波的相移，计算接收的授时与控制信号发生的时延，根据时延和采样时刻，确定整秒时刻。一些实施例中，确定授时与控制信号经过信道后，不同频率的正弦波信号发生的相移，确定不同频率的正弦波信号的相移的方法包括：根据具有最低频率的正弦波的相位和初始相位，确定具有最低频率的正弦波的原始相移；根据具有最低频率的正弦波的原始相移，确定具有最低频率的正弦波的第一时移；根据第一时移，确定各频率的正弦波的第一次补偿后的相移。本实施例中，对于不同频率的正弦波采用不同的方法确定发生的相移。对于最低频率的正弦波，授时与控制信号中最低频率的正弦波信号的初始相位为0，接收端经过变换获得的最低频率的正弦波的相位后，可根据该相位和初始相位确定出最低频率的正弦波发生的原始相移，例如，接收端经过变换获得的最低频率的正弦波的相位为那么最低频率的正弦波发生的相移可能为滞后了/＞对于其他频率的正弦波，授时与控制信号中相应频率的正弦波的初始相位为已知，接收端经过变换获得的相应频率的正弦波的相位后，可根据该相位和初始相位确定相应频率的正弦波发生的原始相移。在确定出最低频率的正弦波发生的时移后，根据该时移对各频率的正弦波的相移进行补偿，得到第一次补偿后的相移。在确定了最低频率的正弦波信号的原始相移之后，可以确定最低频率的正弦波信号发生的第一时移，即最低频率的正弦波信号发生的时延，计算方法为：其中，Δt1为最低频率的正弦波信号的第一时移，为最低频率的正弦波信号的原始相移。在确定了最低频率的正弦波的第一时移之后，可根据第一时移，确定各频率的正弦波在Δt1时间发生的相移，方法为：其中，为频率为iHz的正弦波在Δt1时间发生的相移。对于频率为iHz的正弦波，将相应的原始相移扣除Δt1时间对应产生的相移，得到频率为iHz的正弦波的频域数据为：其中，mi为对应原始相移的iHz的正弦波的频域数据，m′i的相位为第一次补偿后的相移，该相移是在原始相移基础上扣除Δt1时间对应产生的相移后得到的相移。一些实施例中，一般求取相移的值表示范围只能为或，以相移表示范围为例，当相移超过该范围会引起2π的跳变，也称存在2π模糊度问题。具体的，设第i个频点的正弦波信号的第一次补偿后的相移为第i+1个频点的正弦波信号的第一次补偿后的相移为/＞若/＞和/＞之间的相移差为：则考虑2π跳变情况，可将第i+1个频点的正弦波的第一次补偿后的相移进行修正为：正弦波相移差对应的时移范围为，扣除Δt1时间后正弦波组的时移远远小于这个范围，可采用此方法消除2π模糊度，提高信号恢复精度。一些方式中，最低频率的正弦波的频率为1Hz，其周期是1秒，1秒外已无需授时，本申请可基于最低频率为1Hz的正弦波实现1秒内的授时，其他频率均大于1赫兹，且1赫兹的正弦波在1秒的时移内相移不存在2π模糊度，因而最低频率的正弦波的原始相移无需进行模糊度修正。而对于其他频率的正弦波，在得到第一次补偿后的相移后，需要按照公式进行模糊度修正，得到修正后的相移。在确定了频域的授时与控制信号中第一数量的各频率的正弦波发生的相移之后，基于各频率的正弦波的相移，计算接收的授时与控制信号发生的时延。方法包括：根据各频率的正弦波的第一次补偿后的相移，确定第二时移；将第一时移和第二时移之和作为时延。本实施例中，接收端接收的授时与控制信号发生的时延包含两部分，一部分是最低频率的正弦波发生的时延，即第一时移，另一部分为各频率成分的正弦波发生的时延，即第二时移，两部分时延之和即为授时与控制信号发生的总时延。这是因为，基于最低频率的正弦波的原始相移计算出的第一时移并不精确，需要在第一次补充后的相移基础上进一步计算第二时移，消除第一时移存在的误差，提高时延计算的精度。对于最低频率的正弦波的第一时移，可根据其产生的原始相移所确定；对于各频率的正弦波的第二时移，可基于最低频率的正弦波经第一次补偿后的相移、其他各频率的正弦波经模糊度修正后的相移所确定。则确定第二时移的方法包括：基于各频率的正弦波的第一次补偿后的相移，拟合得到相移直线；根据相移直线的斜率，确定第二时移。如图10所示，基于对最低频率的正弦波的原始相移进行第一次补偿后得到的第一次补偿后的相移，对其他频率的正弦波的原始相移进行第一时移的第一次补偿后得到的第一次补偿后的相移，并对其他频率的第一次补偿后的相移进行2π模糊度修正后，各频率的正弦波的相移可通过拟合得到一条相移直线，即各频点的正弦波的相移近似呈线性变化；拟合出相移直线后，可确定相移直线的斜率，再根据该斜率确定第二时移，及各频率的正弦波所产生的时延。计算方法为：其中，Δt2为第二时移，k为相移直线的斜率。则，接收端接收的授时与控制信号发生的总时延为：Δt＝Δt1+Δt2在确定了授时与控制信号的时延之后，即可根据实际的采样时刻和该时延，确定地面设备发送原始秒脉冲正弦波信号的整秒时刻，即授时信号。即，将采样时刻减去确定出的时延，即得到整秒时刻。井下设备确定整秒时刻之后，基于确定的整秒时刻对本地时钟存在的钟差进行校正，即完成了地面设备对井下设备的授时。本申请实施例提供的基于单芯电缆的深井供电与数据传输方法，地面设备与井下设备通过单芯电缆连接，直流电源信号、授时信号、控制信号、观测数据等多种类型的数据信号调制在不同的频率上耦合在单芯电缆上传输，能够降低接线难度，降低井下密封难度。其中，授时信号采用正弦波信号授时，能够提高授时精度，相较于方波信号授时方式，本申请可将授时精度从毫秒级提升至微秒级；授时与控制信号采用频率调制与解调，占用频带窄，带通滤波器设计难度小，频率调制与解调均基于控制芯片的硬件资源和软件资源实现，无需额外设计并配置专用的调制解调电路，简化电路设计，大幅降低系统结构的复杂度。需要说明的是，本申请实施例的方法可以由单个设备执行，例如一台计算机或服务器等。本实施例的方法也可以应用于分布式场景下，由多台设备相互配合来完成。在这种分布式场景的情况下，这多台设备中的一台设备可以只执行本申请实施例的方法中的某一个或多个步骤，这多台设备相互之间会进行交互以完成所述的方法。需要说明的是，上述对本说明书特定实施例进行了描述。其它实施例在所附权利要求书的范围内。在一些情况下，在权利要求书中记载的动作或步骤可以按照不同于实施例中的顺序来执行并且仍然可以实现期望的结果。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本申请实施例还提供一种基于单芯电缆的深井供电与数据传输系统，包括：地面设备，用于将直流电源信号调制在第一频点经单芯电缆传输至井下设备；将授时与控制信号调制在第二频点经所述单芯电缆传输至所述井下设备；将观测仪器的观测数据调制在第三频段经所述单芯电缆传输至所述地面设备；其中，所述第一频点小于所述第二频点，所述第二频点小于所述第三频段的频率范围；井下设备，用于将观测仪器的控制参数调制在所述第二频点经所述单芯电缆传输至地面设备。上述实施例的系统用于实现前述实施例中相应的方法，并且具有相应的方法实施例的有益效果，在此不再赘述。图11示出了本实施例所提供的一种更为具体的电子设备硬件结构示意图，该设备可以包括：处理器1010、存储器1020、输入/输出接口1030、通信接口1040和总线1050。其中处理器1010、存储器1020、输入/输出接口1030和通信接口1040通过总线1050实现彼此之间在设备内部的通信连接。处理器1010可以采用通用的CPU、微处理器、应用专用集成电路、或者一个或多个集成电路等方式实现，用于执行相关程序，以实现本说明书实施例所提供的技术方案。存储器1020可以采用ROM、RAM、静态存储设备，动态存储设备等形式实现。存储器1020可以存储操作系统和其他应用程序，在通过软件或者固件来实现本说明书实施例所提供的技术方案时，相关的程序代码保存在存储器1020中，并由处理器1010来调用执行。输入/输出接口1030用于连接输入/输出模块，以实现信息输入及输出。输入输出/模块可以作为组件配置在设备中，也可以外接于设备以提供相应功能。其中输入设备可以包括键盘、鼠标、触摸屏、麦克风、各类传感器等，输出设备可以包括显示器、扬声器、振动器、指示灯等。通信接口1040用于连接通信模块，以实现本设备与其他设备的通信交互。其中通信模块可以通过有线方式实现通信，也可以通过无线方式实现通信。总线1050包括一通路，在设备的各个组件之间传输信息。需要说明的是，尽管上述设备仅示出了处理器1010、存储器1020、输入/输出接口1030、通信接口1040以及总线1050，但是在具体实施过程中，该设备还可以包括实现正常运行所必需的其他组件。此外，本领域的技术人员可以理解的是，上述设备中也可以仅包含实现本说明书实施例方案所必需的组件，而不必包含图中所示的全部组件。上述实施例的电子设备用于实现前述实施例中相应的方法，并且具有相应的方法实施例的有益效果，在此不再赘述。本实施例的计算机可读介质包括永久性和非永久性、可移动和非可移动媒体可以由任何方法或技术来实现信息存储。信息可以是计算机可读指令、数据结构、程序的模块或其他数据。计算机的存储介质的例子包括，但不限于相变内存、静态随机存取存储器、动态随机存取存储器、其他类型的随机存取存储器、只读存储器、电可擦除可编程只读存储器、快闪记忆体或其他内存技术、只读光盘只读存储器、数字多功能光盘或其他光学存储、磁盒式磁带，磁带磁磁盘存储或其他磁性存储设备或任何其他非传输介质，可用于存储可以被计算设备访问的信息。所属领域的普通技术人员应当理解：以上任何实施例的讨论仅为示例性的，并非旨在暗示本公开的范围被限于这些例子；在本公开的思路下，以上实施例或者不同实施例中的技术特征之间也可以进行组合，步骤可以以任意顺序实现，并存在如上所述的本申请实施例的不同方面的许多其它变化，为了简明它们没有在细节中提供。另外，为简化说明和讨论，并且为了不会使本申请实施例难以理解，在所提供的附图中可以示出或可以不示出与集成电路芯片和其它部件的公知的电源/接地连接。此外，可以以框图的形式示出装置，以便避免使本申请实施例难以理解，并且这也考虑了以下事实，即关于这些框图装置的实施方式的细节是高度取决于将要实施本申请实施例的平台的。在阐述了具体细节以描述本公开的示例性实施例的情况下，对本领域技术人员来说显而易见的是，可以在没有这些具体细节的情况下或者这些具体细节有变化的情况下实施本申请实施例。因此，这些描述应被认为是说明性的而不是限制性的。尽管已经结合了本公开的具体实施例对本公开进行了描述，但是根据前面的描述，这些实施例的很多替换、修改和变型对本领域普通技术人员来说将是显而易见的。例如，其它存储器架构)可以使用所讨论的实施例。本申请实施例旨在涵盖落入所附权利要求的宽泛范围之内的所有这样的替换、修改和变型。因此，凡在本申请实施例的精神和原则之内，所做的任何省略、修改、等同替换、改进等，均应包含在本公开的保护范围之内。
