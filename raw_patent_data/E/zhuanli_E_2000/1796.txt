标题title
基于套管开窗水平井小直径随钻电阻率的数据处理方法
摘要abst
本发明涉及土层或岩石钻进技术领域，具体为一种基于套管开窗水平井小直径随钻电阻率的数据处理方法，包括：通过先获取随钻测井过程产生的实测数据，其中，所述实测数据包括测量参数与初始电阻率参数，然后根据实测数据的测量参数与电阻率参数对应的分布曲线，构建邻域扩展比，并且基于邻域扩展比对应的窗口半径与纠正尺度，计算电阻率修正值，最后通过所述电阻率修正值对所述电阻率参数进行修正，确认最终电阻率参数，能够根据测量参数带来的影响在不同时间段内与视电阻率分布关系体现的增减变化，对视电阻率进行精准修正，以获得更精准视电阻率，进而降低钻井的风险，提高钻井效率。
权利要求书clms
1.一种基于套管开窗水平井小直径随钻电阻率的数据处理方法，应用于套管开窗水平井的测井领域，其特征在于，所述方法包括：获取随钻测井过程产生的实测数据，其中，所述实测数据包括测量参数与初始电阻率参数；根据实测数据的测量参数与初始电阻率参数对应的分布曲线，构建邻域扩展比；基于邻域扩展比对应的窗口半径与纠正尺度，计算电阻率修正值；通过所述电阻率修正值对所述电阻率参数进行修正，确认最终电阻率参数。2.根据权利要求1所述的基于套管开窗水平井小直径随钻电阻率的数据处理方法，其特征在于，所述获取随钻测井过程产生的实测数据，其中，所述实测数据包括测量参数与初始电阻率参数，具体包括：通过脉冲传输方式，接受随钻测井过程产生的测量参数与初始电阻率参数，其中，所述测量参数包括井深、井斜角、方位、测井仪器的倾角、层厚度。3.根据权利要求2所述的基于套管开窗水平井小直径随钻电阻率的数据处理方法，其特征在于，所述根据实测数据的测量参数与初始电阻率参数对应的分布曲线，构建邻域扩展比，具体包括：根据不同的实测数据的测量参数与初始电阻率参数同时序下的数值分布情况，形成分布曲线；通过所述分布曲线确认所述实测数据对应的影响值，以构建邻域扩展比。4.根据权利要求3所述的基于套管开窗水平井小直径随钻电阻率的数据处理方法，其特征在于，所述测量参数包括若干个子测量参数，对应的，所述通过所述分布曲线确认所述实测数据对应的影响值，以构建邻域扩展比，具体包括：将所述实测数据分成若干份相同长度的子区间数据，以获取若干个子区间数据的子测量参数的实测影响值；根据所述若干个子区间数据的子测量参数的实测值，计算每份子区间数据的若干测量参数的平均影响值；将所述若干个子区间数据的子测量参数的实测影响值与平均影响值做差，获取若干个数据偏移度；根据所述若干个数据偏移度与预先构建的标准计算公式，计算邻域扩展比。5.根据权利要求4所述的基于套管开窗水平井小直径随钻电阻率的数据处理方法，其特征在于，所述根据所述若干个数据偏移度与预先构建的标准计算公式，计算邻域扩展比，具体包括：；其中，为子测量参数，m为子区间数据，j是第i种子测量参数的第m个子区间数据内第j个接收时刻，/＞是指第m个子区间数据第i种子测量参数的实测值，/＞是第m个子区间数据第i种子测量参数若干次测量的平均影响值，/＞是每份子区间数据的第i种子测量参数测量值的分布方差；/＞是第j个接收时刻第i种子测量参数第m个子区间数据的数据偏移度；是第m个子区间的区间显著度，/＞是偏移度序列/＞、/＞的自相关系数，其中，/＞，t是子区间数据的长度，/＞是第m个子区间数据第i种子测量参数第t个接收时刻的数据偏移度；是第i种子测量参数第m个子区间的邻域扩展比是第i种子测量参数第m个子区间数据的邻域扩展比，/＞、/＞分别是第j个接收时刻的幅度比电阻率差值、相位差电阻率差值，/＞、/＞分别是第m个子区间数据的幅度比电阻率区间均值、相位差电阻率区间均值。6.根据权利要求5所述的基于套管开窗水平井小直径随钻电阻率的数据处理方法，其特征在于，所述基于邻域扩展比对应的窗口半径与纠正尺度，计算电阻率修正值，具体包括：根据所有子测量参数在若干个子区间数据的邻域扩展比，确认每个数据接收时刻的窗口半径；通过所述每个数据接收时刻的窗口半径，计算每个数据接受时刻的纠正尺度；根据所述窗口半径和纠正尺度，获取接收时刻的电阻率修正值。7.根据权利要求6所述的基于套管开窗水平井小直径随钻电阻率的数据处理方法，其特征在于，所述根据所有子测量参数在若干个子区间数据的邻域扩展比，确认每个数据接收时刻的窗口半径，具体包括：将所有子测量参数在若干个子区间数据的邻域扩展比输入第一计算公式，计算若干个子区间数据的扩展累加比；根据第二计算公式与所述若干个子区间数据的扩展累加比，计算每个数据接收时刻的窗口半径；对应的：所述第一计算公式为：；所述第二计算公式为：；其中，所述是第m个子测量参数的扩展累加比，n是子测量参数的种类数量，/＞是第i种子测量参数所有子区间数据对应的邻域扩展比均值；r是窗口半径的初始值，/＞是第j个数据接收时刻的窗口半径，/＞是第j个数据接收时刻的时间，/＞是第d个累加突变点的时间，/＞是累加突变点的数量。8.根据权利要求7所述的基于套管开窗水平井小直径随钻电阻率的数据处理方法，其特征在于，所述通过所述每个数据接收时刻的窗口半径，计算每个数据接受时刻的纠正尺度，具体包括：将所述每个数据接收时刻的窗口半径输入第三计算公式，计算每个数据接受时刻的拟合权重；根据第四计算公式与所述每个数据接受时刻的拟合权重，计算每个数据接受时刻的纠正尺度；对应的：所述第三计算公式为：；所述第四计算公式为：；其中，所述是第j个接收时刻的拟合权重，/＞、/＞分别是第k个、第j个接收时刻的时间，是调参因子；/＞是第j个接收时刻的纠正尺度，/＞是第j个接收时刻的窗口内接收时刻的数量，/＞是第k个接收时刻的异常得分值。9.根据权利要求1-8任一项所述的基于套管开窗水平井小直径随钻电阻率的数据处理方法，其特征在于，所述通过所述电阻率修正值对所述初始电阻率参数进行修正，确认最终电阻率参数，具体包括：通过预设规则，根据对应的所述电阻率修正值分别对不同层次的初始电阻率参数进行修正，确认不同层次的最终电阻率参数。
说明书desc
技术领域本发明涉及土层或岩石钻进技术领域，具体为一种基于套管开窗水平井小直径随钻电阻率的数据处理方法。背景技术套管开窗，是指在已下套管的井段内进行侧钻时，必须先在套壁上开一个“窗口”，才能把井眼侧钻到套管外的地层里去，这个工艺过程称为套管开窗。开窗前，须在井内打一段水泥塞，造成人工井底，然后在水泥塞上固定一个导斜器。开窗所用的钻具为：钻杆下面接少量钻铤，再接铣锥。开始铣进时，加很小钻压或不加钻压，靠铣锥转动，在套管壁上铣出窗口，当窗口足够长时，可适当扩窗和打捞碎铁。最后换牙轮钻头及其他造斜工具继续造斜侧钻。套管开窗水平井技术是在定向井、水平井等技术基础上发展的钻井技术，得益于提高油田采收率、节约套管使用费、节约开发成本等优点被推广应用。在钻井过程中，会采用随钻测井技术对钻井过程的数据进行测量与监控。随钻测井是在测井领域的常用技术之一，能够在水平井钻井过程中同时测量相关参数，并将测量结果实时传输至地面的测量技术。在随钻测井过程中，由于地层环境复杂多变的，层厚、围岩、各向异性、钻井液侵入、井眼环境、仪器与地层的相对夹角等因素都会对地层真实电阻率信息的测量结果产生较大的影响，以导致随钻测井的测量精度较低，进而导致钻井风险增大。发明内容鉴于以上内容，有必要提供一种基于套管开窗水平井小直径随钻电阻率的数据处理方法，可以提高随钻测井的测量精度，以获得更精准视电阻率，进而降低钻井的风险，提高钻井效率。本申请第一方面提供一种基于套管开窗水平井小直径随钻电阻率的数据处理方法，应用于套管开窗水平井的测井领域，所述方法包括：获取随钻测井过程产生的实测数据，其中，所述实测数据包括测量参数与初始电阻率参数；根据实测数据的测量参数与电阻率参数对应的分布曲线，构建邻域扩展比；基于邻域扩展比对应的窗口半径与纠正尺度，计算电阻率修正值；通过所述电阻率修正值对所述电阻率参数进行修正，确认最终电阻率参数。在其中一种实施例中，所述获取随钻测井过程产生的实测数据，其中，所述实测数据包括测量参数与初始电阻率参数，具体包括：通过脉冲传输方式，接受随钻测井过程产生的测量参数与初始电阻率参数，其中，所述测量参数包括井深、井斜角、方位、测井仪器的倾角、层厚度。在其中一种实施例中，所述根据实测数据的测量参数与电阻率参数对应的分布曲线，构建邻域扩展比，具体包括：根据不同的实测数据的测量参数与初始电阻率参数同时序下的数值分布情况，形成分布曲线；通过所述分布曲线确认所述实测数据对应的影响值，以构建邻域扩展比。在其中一种实施例中，所述测量参数包括若干个子测量参数，对应的，所述通过所述分布曲线确认所述实测数据对应的影响值，以构建邻域扩展比，具体包括：将所述实测数据分成若干份相同长度的子区间数据，以获取若干个子区间数据的子测量参数的实测影响值；根据所述若干个子区间数据的子测量参数的实测值，计算每份子区间数据的若干测量参数的平均影响值；将所述若干个子区间数据的子测量参数的实测影响值与平均影响值做差，获取若干个数据偏移度；根据所述若干个数据偏移度与预先构建的标准计算公式，计算邻域扩展比。在其中一种实施例中，所述根据所述若干个数据偏移度与预先构建的标准计算公式，计算邻域扩展比，具体包括：；；；其中，子测量参数，m为子区间数据，j是第i种子测量参数的第m个子区间数据内第j个接收时刻，是指第m个子区间数据第i种子测量参数的实测值，是第m个子区间数据的第i种子测量参数若干次测量的平均影响值，是每份子区间数据的第i种子测量参数测量值的分布方差；是第j个接收时刻第i种子测量参数第m个子区间数据的数据偏移度；是第m个子区间的区间显著度，是偏移度序列、的自相关系数，其中，，t是子区间数据的长度，是第m个子区间数据第i种子测量参数第t个接收时刻的数据偏移度；是第i种子测量参数第m个子区间的邻域扩展比是第i种子测量参数第m个子区间数据的邻域扩展比，、分别是第j个接收时刻的幅度比电阻率差值、相位差电阻率差值，、分别是第m个子区间数据的幅度比电阻率区间均值、相位差电阻率区间均值。在其中一种实施例中，所述基于邻域扩展比对应的窗口半径与纠正尺度，计算电阻率修正值，具体包括：根据所有子测量参数在若干个子区间数据的邻域扩展比，确认每个数据接收时刻的窗口半径；通过所述每个数据接收时刻的窗口半径，计算每个数据接受时刻的纠正尺度；根据所述窗口半径和纠正尺度，获取接收时刻的电阻率修正值。在其中一种实施例中，所述根据所有子测量参数在若干个子区间数据的邻域扩展比，确认每个数据接收时刻的窗口半径，具体包括：将所有子测量参数在若干个子区间数据的邻域扩展比输入第一计算公式，计算若干个子区间数据的扩展累加比；根据第二计算公式与所述若干个子区间数据的扩展累加比，计算每个数据接收时刻的窗口半径；对应的：所述第一计算公式为：；所述第二计算公式为：；其中，所述是第m个子测量参数的扩展累加比，n是子测量参数的种类数量，是第i种子测量参数所有子区间数据对应的邻域扩展比均值；r是窗口半径的初始值，是第j个数据接收时刻的窗口半径，是第j个数据接收时刻的时间，是第d个累加突变点的时间，是累加突变点的数量。在其中一种实施例中，所述通过所述每个数据接收时刻的窗口半径，计算每个数据接受时刻的纠正尺度，具体包括：将所述每个数据接收时刻的窗口半径输入第三计算公式，计算每个数据接受时刻的拟合权重；根据第四计算公式与所述每个数据接受时刻的拟合权重，计算每个数据接受时刻的纠正尺度；对应的：所述第三计算公式为：；所述第四计算公式为：；其中，所述是第j个接收时刻的拟合权重，、分别是第k个、第j个接收时刻的时间，是调参因子；是第j个接收时刻的纠正尺度，是第j个接收时刻的窗口内接收时刻的数量，是第k个接收时刻的异常得分值。在其中一种实施例中，所述通过所述电阻率修正值对所述初始电阻率参数进行修正，确认最终电阻率参数，具体包括：通过预设规则，根据对应的所述电阻率修正值分别对不同层次的初始电阻率参数进行修正，确认不同层次的最终电阻率参数。本申请实施例通过先获取随钻测井过程产生的实测数据，其中，所述实测数据包括测量参数与初始电阻率参数，然后根据实测数据的测量参数与电阻率参数对应的分布曲线，构建邻域扩展比，并且基于邻域扩展比对应的窗口半径与纠正尺度，计算电阻率修正值，最后通过所述电阻率修正值对所述电阻率参数进行修正，确认最终电阻率参数。通过实测数据的测量参数与电阻率参数对应的分布曲线构建的邻域扩展比，进一步获得对应的窗口半径与纠正尺度计算电阻率修正值，能够根据测量参数带来的影响在不同时间段内与视电阻率分布关系体现的增减变化，对视电阻率进行精准修正，以获得更精准视电阻率，进而降低钻井的风险，提高钻井效率。附图说明图1是本申请实施例的基于套管开窗水平井小直径随钻电阻率的数据处理方法的流程示意图。图2是本申请实施例的基于套管开窗水平井小直径随钻电阻率的数据处理方法的第一子流程示意图。图3是本申请实施例的基于套管开窗水平井小直径随钻电阻率的数据处理方法的第二子流程示意图。图4是本申请实施例的基于套管开窗水平井小直径随钻电阻率的数据处理方法的第三子流程示意图。图5是本申请实施例的基于套管开窗水平井小直径随钻电阻率的数据处理方法的第四子流程示意图。图6是本申请实施例的基于套管开窗水平井小直径随钻电阻率的数据处理方法的第五子流程示意图。图7是本申请实施例的优选实施例的一个分布曲线示意图。图8是本申请实施例的优选实施例的另一个分布曲线示意图。具体实施方式在本申请实施例的描述中，“示例性”、“或者”、“例如”等词用于表示作例子、例证或说明。本申请实施例中被描述为“示例性”或者“例如”的任何实施例或设计方案不应被解释为比其它实施例或设计方案更优选或更具优势。确切而言，使用“示例性”、“或者”、“例如”等词旨在以具体方式呈现相关概念。除非另有定义，本文所使用的所有的技术和科学术语与属于本申请中的技术领域的技术人员通常理解的含义相同。本申请的说明书中所使用的术语只是为了描述具体的实施例的目的，不是旨在于限制本申请。应理解，本申请中除非另有说明，“/”表示或的意思。例如，A/B可以表示A或B。本申请中的“和/或”仅仅是一种描述关联对象的关联关系，表示可以存在三种关系。例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B三种情况。“至少一个”是指一个或者多个。“多个”是指两个或多于两个。例如，a、b或c中的至少一个，可以表示：a，b，c，a和b，a和c，b和c，a、b和c七种情况。另外需要说明的是，本申请的说明书和权利要求书及附图中的术语“第一”、“第二”是用于部别类似的对象，而不是用于描述特定的顺序或先后次序。本申请实施例中公开的方法或流程图所示出的方法，包括用于实现方法的一个或多个步骤，在不脱离权利要求的范围的情况下，多个步骤的执行顺序可以彼此互换，其中某些步骤也可以被删除。本申请实施例首先提出一种基于套管开窗水平井小直径随钻电阻率的数据处理方法。请参阅图1，基于套管开窗水平井小直径随钻电阻率的数据处理方法，应用于套管开窗水平井的测井领域，所述方法包括：S101、获取随钻测井过程产生的实测数据，其中，所述实测数据包括测量参数与初始电阻率参数。其中，所述随钻测井是在测井领域的常用技术之一，是指能够在水平井钻井过程中同时测量相关参数，并将测量结果实时传输至地面的测量技术。在套管开窗水平井的随钻测井过程中，将测井仪器直接安装在钻头后方一定间隔距离的位置，间隔距离的大小与地层和钻头相关，优选的，本案间隔距离大小可以取经验值5米。优选的，所述测井仪器是指电阻率传感器，例如EWR-Phase4仪器、CPR仪器等。其中，所述实测数据是指随钻测井过程中能够获取的有关钻井过程的数据，所述实测数据包括测量参数与初始电阻率参数，所述测量参数是指与该井相关的一些角度、深度、位置以及厚度等物理测量因素，所述初始电阻率参数是指根据测井仪器所反馈的当下的有关地层的电阻率，由于地层环境复杂多变的，在随钻测井过程中，层厚、围岩、各向异性、钻井液侵入、井眼环境、仪器与地层的相对夹角等因素都会对地层真实电阻率信息的测量结果产生较大的影响。在钻井的同时，利用测井仪器采集实测数据，所述实测数据包括井深、井斜角、方位、测井仪器的倾角、层厚度，并利用脉冲传输方式将实测数据传输至地表。在本申请的一种实施例中，所述获取随钻测井过程产生的实测数据，其中，所述实测数据包括测量参数与初始电阻率参数，具体包括：通过脉冲传输方式，接受随钻测井过程产生的测量参数与初始电阻率参数，其中，所述测量参数包括井深、井斜角、方位、测井仪器的倾角、层厚度。S102、根据实测数据的测量参数与初始电阻率参数对应的分布曲线，构建邻域扩展比。其中，不同的地层环境对应的电阻率参数不同，测量参数包括多种，可以包括井深、井斜角、方位、测井仪器的倾角、层厚度，且每种测量参数的改变，对电阻率参数的测量结果都造成不同的影响，且不同地层深度，测量参数对电阻率参数的测量的影响大小也不同。需要说明的是，地面上地表接收端将实测数据中的幅度比信号转化成幅度比电阻率、将得到的相位差信号转化成相位差电阻率，通过、来反映不同地层视电阻率的情况。原理是通过发射电极或发射线圈向地层发射电磁波，再由二个接收天线接收来自地层的电磁波的相位差和幅度比,测量的相位差和幅度比与地层的电阻率和介电常数之间存在函数关系，这样就可以得到地层的电阻率和介电常数。由相位差得到的电阻率称为相位差电阻率，由幅度比得出的电阻率为幅度比电阻率，介电常数亦同理。视电阻率，是用来反映岩石和矿石导电性变化的参数。在地下岩石电性分布不均匀或地表起伏不平的情况下，若仍按测定均匀水平大地电阻率的方法和计算公式求得的电阻率称之为视电阻率，以符号ρs表示，单位和电阻率相同，为Ω·m。在地下存在多种岩石的情况下用电阻率法测得的电阻率，不是某一种岩石的真电阻率。它除受各种岩石电阻率的综合影响外，还与岩、矿石的分布状态、电极排列等具体情况有关，所以称它为视电阻率。另外，随着测量井垂直深度的不同，垂直电阻率与水平电阻率也随着改变，因为垂直电阻率与水平电阻率也随着改变，对不同地层视电阻率的影响也不同。因此，建立不同测量参数与电阻率参数对应的分布曲线，则能够将不同测量参数对不同地层视电阻率的影响进行体现。则，可选定一个测量参数，并保持其他测量参数，随着垂直深度的增大，建立与初始电阻率参数对应的分布曲线，可表征不同地层视电阻率的影响。在一个优选实施例中，选定测量参数为井斜角，并保持其余的测量参数不变，随着井垂直深度变化，将实测数据中的井斜角与幅度比电阻率、相位差电阻率形成分布曲线，参考图7与图8。不难看出在层界面处，、均出现极角化，在目的层处，、基本不变，即井斜角对目的层视电阻率的拟合影响较小。除此之外，在小角度倾斜井以及直井中，幅度比电阻率、相位差电阻率主要反映水平电阻率，此时、两者之间的差别较小，且大小基本相等；在大斜度井甚至水平井中，幅度比电阻率、相位差电阻率会逐渐趋于垂直电阻率的大小，大于，甚至会超过。不难看出在层界面处，、均出现极角化；在目的层处，、基本不变，即井斜角对目的层视电阻率的拟合影响较小。因此，分别对实测数据的不同的测量参数与初始电阻率参数形成不同的分布曲线，以此来构建邻域扩展比，用于表征不同的测量参数对视电阻率拟合结果的影响程度。S103、基于邻域扩展比对应的窗口半径与纠正尺度，计算电阻率修正值。其中，在获取所述实测数据时，测井仪器利用脉冲传输方式将实测数据传输至地面上地表接收端，则地表接收端获取所述实测数据包括多个接收时刻，所述窗口半径则与所述多个接收时刻进行对应，窗口半径是反应当前接收时刻所接收的实测数据的误差大小，则，接收时刻的窗口半径越小，当前接收时刻所对应的接收数据误差概率越大。将所有接收时刻的窗口半径作为特征值，利用LOF算法计算每个接收时刻的异常得分，以此来构建纠正尺度，所述纠正尺度用于表征每个接收时刻接收的实测数据造成误差量的大小，换句话说，纠正尺度反映了每个接收时刻接收的实测数据造成误差量的大小。在获取到所述窗口半径与纠正尺度之后，将所述窗口半径与纠正尺度作为预设算法的输入参数，以获取最终的电阻率修正值，所述预设算法可以是加权回归Lowess算法，将窗口半径作为局部加权回归Lowess算法的窗口长度，将纠正尺度作为局部加权回归Lowess算法中的权值函数，利用局部加权回归Lowess算法获取TVD值与电阻率的拟合曲线，并利用所获拟合曲线对传输至地表的实测数据中不同层的电阻率进行修正。S104、通过所述电阻率修正值对所述电阻率参数进行修正，确认最终电阻率参数。其中，在获取到所述电阻率修正值之后，针对电阻率参数进行修正进行对应修正，以获取最终的电阻率参数。本申请实施例通过先获取随钻测井过程产生的实测数据，其中，所述实测数据包括测量参数与初始电阻率参数，然后根据实测数据的测量参数与电阻率参数对应的分布曲线，构建邻域扩展比，并且基于邻域扩展比对应的窗口半径与纠正尺度，计算电阻率修正值，最后通过所述电阻率修正值对所述电阻率参数进行修正，确认最终电阻率参数。通过实测数据的测量参数与电阻率参数对应的分布曲线构建的邻域扩展比，进一步获得对应的窗口半径与纠正尺度计算电阻率修正值，能够根据测量参数带来的影响在不同时间段内与视电阻率分布关系体现的增减变化，对视电阻率进行精准修正，以获得更精准视电阻率，进而降低钻井的风险，提高钻井效率。在本申请的一种实施例中，并参阅图2，所述步骤S102：所述根据实测数据的测量参数与初始电阻率参数对应的分布曲线，构建邻域扩展比，具体包括：S201、根据不同的实测数据的测量参数与初始电阻率参数同时序下的数值分布情况，形成分布曲线。其中，所述不同的实测数据的测量参数与初始电阻率参数同时序下的数值分布情况，是指随着某个参数的改变，不同的实测数据的测量参数与初始电阻率参数在同时序下的数值表征。则，可选定一个测量参数，并保持其他测量参数，随着垂直深度的增大，建立与初始电阻率参数对应的分布曲线，可表征不同地层视电阻率的影响。S202、通过所述分布曲线确认所述实测数据对应的影响值，以构建邻域扩展比。其中，所述通过所述分布曲线确认所述实测数据对应的影响值，是指不同的实测数据的测量参数对所述初始电阻率参数的影响程度序列值，用于表征具体的测量参数对所述视电阻率的影响程度。在本申请的一种实施例中，并参阅图3，所述测量参数包括若干个子测量参数，对应的，S202：所述通过所述分布曲线确认所述实测数据对应的影响值，以构建邻域扩展比，具体包括：S301、将所述实测数据分成若干份相同长度的子区间数据，以获取若干个子区间数据的子测量参数的实测影响值。其中，将所述实测数据分成等长度数据的子区间数据，且所述子区间数据为若干份，且所述测量参数也包括若干份，则分别对应获取若干份的子区间数据中的若干份子测量参数的实测影响值。S302、根据所述若干个子区间数据的子测量参数的实测值，计算每份子区间数据的若干测量参数的平均影响值。其中，在获取若干份的子区间数据中的若干份子测量参数的实测影响值后，对应获取每个子区间数据的若干测量参数的平均影响值。举个例子，其中一个子区间数据对应的若干测量参数分别为井深、井斜角、方位三个，则对所述井深、井斜角、方位三个测量参数的实测影响值进行球平均数，求得该子区间数据的平均影响值。S303、将所述若干个子区间数据的子测量参数的实测影响值与平均影响值做差，获取若干个数据偏移度。其中，所述数据偏移度用于表征测量值偏离整体分布的程度。举个例子，假设测井过程中地表接收相邻两次实测数据的时间间隔为t，将N次实测数据分为M个区间长度为t的子区间数据，例如第一子区间为，即包含第1次至第t次接收的实测数据。对于每个子区间数据，计算子区间内每种子测量参数的均值，其次将实测数据的测量值减去对应的均值，得到每种子测量参数的差分序列。例如对于第一子区间数据中的井斜角，计算t个井斜角的均值，将t个测量值减去均值得到对应的井斜角差分序列。S304、根据所述若干个数据偏移度与预先构建的标准计算公式，计算邻域扩展比。其中，所述标准计算公式为：；其中，子测量参数，m为子区间数据，j是第i种子测量参数的第m个子区间数据内第j个接收时刻，是指第m个子区间数据第i种子测量参数的实测值，是第m个子区间数据的第i种子测量参数若干次测量的平均影响值，是每份子区间数据的第i种子测量参数测量值的分布方差；是第j个接收时刻第i种子测量参数第m个子区间数据的数据偏移度；是第m个子区间的区间显著度，是偏移度序列、的自相关系数，其中，，t是子区间数据的长度，是第m个子区间数据第i种子测量参数第t个接收时刻的数据偏移度；是第i种子测量参数第m个子区间的邻域扩展比是第i种子测量参数第m个子区间数据的邻域扩展比，、分别是第j个接收时刻的幅度比电阻率差值、相位差电阻率差值，、分别是第m个子区间数据的幅度比电阻率区间均值、相位差电阻率区间均值。需要解析的是，的值越大，第j个接收时刻的测量值偏离整体分布的程度越大。求自相关系数的过程为公知技术，具体过程不再赘述。的值越大，第m个子区间数据在所有区间中的显著程度越大，对数据拟合结果的影响越大。、分别是第m个子区间的幅度比电阻率区间均值、相位差电阻率区间均值，所述幅度比电阻率区间均值是将第m个子区间的幅度比电阻率相加求均值得到。需要说明的是，邻域扩展比反映了不同因素对视电阻率拟合结果的影响程度。第j个接收时刻的测量值偏离整体分布的程度越大，的值越大，的值越大，第m个子区间在所有区间中越突出，偏移度序列在相邻两个时间段内的变化越大，自相关程度降低，的值越小，的值越大；第j个接收时刻的幅度比电阻率差值、相位差电阻率差值越大，的值越大、的值越大，第j个接收时刻越有可能靠近极角化区域，的值越大，第m个子区间数据的幅度比电阻率区间均值与相位差电阻率区间均值的大小越接近，对目的层的影响越小，的值越小，即的值越大，第m个子区间数据对视电阻率拟合结果的影响越大。邻域扩展比考虑了每种测量因素在不同时间段内与视电阻率分布关系相关关系的增减变化，其有益效果在于能够利用子测量参数的极角化区域精准评估每个时间时刻实测数据对视电阻率拟合结果的影响程度。在本申请的一种实施例中，并参阅图4，所述步骤S103：所述基于邻域扩展比对应的窗口半径与纠正尺度，计算电阻率修正值，具体包括：S401、根据所有子测量参数在若干个子区间数据的邻域扩展比，确认每个数据接收时刻的窗口半径。S402、通过所述每个数据接收时刻的窗口半径，计算每个数据接受时刻的纠正尺度。S403、根据所述窗口半径和纠正尺度，获取接收时刻的电阻率修正值。其中，将所述实测数据分为若干份子区间数据，并获取所有子测量参数在若干个子区间数据的邻域扩展比，再获取若干份个子区间数据的对应的接收时刻的窗口半径，能够将数据进行精准与具体化，进一步提高拟合的精准程度。具体的，参照附图5，所述S401、根据所有子测量参数在若干个子区间数据的邻域扩展比，确认每个数据接收时刻的窗口半径，具体包括：S501、将所有子测量参数在若干个子区间数据的邻域扩展比输入第一计算公式，计算若干个子区间数据的扩展累加比；S501、根据第二计算公式与所述若干个子区间数据的扩展累加比，计算每个数据接收时刻的窗口半径；对应的：所述第一计算公式为：；所述第二计算公式为：；其中，所述是第m个子测量参数的扩展累加比，n是子测量参数的种类数量，是第i种子测量参数所有子区间数据对应的邻域扩展比均值；r是窗口半径的初始值，是第j个数据接收时刻的窗口半径，是第j个数据接收时刻的时间，是第d个累加突变点的时间，是累加突变点的数量。需要解析的是，所述累加突变点是利用BG序列分割算法获取的n种因素偏移度序列自相关系数组成的序列突变点集合的交集中的突变点。例如第i种测量参数偏移度序列自相关系数组成的单突变序列为，第n种测量参数偏移度序列自相关系数组成的单突变序列为，分别利用BG序列分割算法获取n个单突变序列中的突变点，上述突变点的交集即为累加突变点。的值越大，接收时刻越靠近累加突变点的时间，接收时刻的窗口半径越小。至此，得到所有实测数据接收时刻的窗口半径。能够理解的是，根据接收时刻的窗口半径获取接收时刻相邻时刻出现测量误差数据的概率，如果测井过程中测井仪器出现误差或钻井液浓度等因素发生变化导致实测数据出现异常，那么接收上述异常实测数据的接收时刻的窗口半径相对偏小。除此之外，测井过程中的地层环境复杂，造成实测数据异常的因素不会瞬时消失，通常情况下会经过一定的缓冲周期恢复至正常，即较小的窗口半径的接收时刻具有较大的局部异常密度，则在进行拟合时，应该优先降低拟合点附近实测数据的数据误差，并使得拟合点附近实测数据具有较大的权重，这样才能尽可能小的减少测量误差对拟合曲线的影响，提高电阻率的预测精度。具体的，参照附图6，所述S402、所述通过所述每个数据接收时刻的窗口半径，计算每个数据接受时刻的纠正尺度，具体包括：S601、将所述每个数据接收时刻的窗口半径输入第三计算公式，计算每个数据接受时刻的拟合权重；S602、根据第四计算公式与所述每个数据接受时刻的拟合权重，计算每个数据接受时刻的纠正尺度；对应的：所述第三计算公式为：；所述第四计算公式为：；其中，所述是第j个接收时刻的拟合权重，、分别是第k个、第j个接收时刻的时间，是调参因子；是第j个接收时刻的纠正尺度，是第j个接收时刻的窗口内接收时刻的数量，是第k个接收时刻的异常得分值。需要解析的是，的作用是防止分母为0，的大小取经验值0.01。的值越大，第k个时刻对第j个接收时刻电阻率拟合结果的影响越大。的值越大，第j个接收时刻的窗口内接收时刻实测数据的异常程度越高。能够理解的是，纠正尺度反映了每个接收时刻接收的实测数据造成误差量的大小。在对每个接收时刻的实测数据进行拟合时，第k个、第j个接收时刻之间的时间差越小，第k个时刻对第j个接收时刻电阻率拟合结果的影响越大，的值越小，的值越大，窗口内相邻时刻的异常得分越大，的值越大，即的值越大，相邻时刻的接受数据靠近突变点，在视电阻率的分布曲线中越靠近极角化区域，接受的修正尺度应该越大，使得测量误差的降到最小。纠正尺度考虑了每个接收时刻拟合时相邻时刻受测量误差异常程度，其有益效果在于能够利用各子测量参数与视电阻率分布曲线中各底层界面的极角化区域，提高每个接收时刻电阻率的拟合精度。在本申请的一种实施例中，所述步骤S104：所述通过所述电阻率修正值对所述初始电阻率参数进行修正，确认最终电阻率参数，具体包括：通过预设规则，根据对应的所述电阻率修正值分别对不同层次的初始电阻率参数进行修正，确认不同层次的最终电阻率参数。其中，在获取到所述电阻率修正值之后，可根据预设规则对不同层次的初始电阻率参数进行修正，修正不同层次因不同测量参数造成的电阻率误差。所述预设规则可为加权回归Lowess算法，将窗口半径作为局部加权回归Lowess算法的窗口长度，将纠正尺度作为局部加权回归Lowess算法中的权值函数，则可并利用所获拟合曲线对传输至地表的实测数据中不同层的电阻率进行修正。需要进一步说明的是，根据上述方法获取到最终电阻率参数后，即说明能够进行提供更加有效的地质导向信息，使得钻头尽可能在高阻含油层中钻进，进而降低钻井的风险，提高钻井效率。本申请实施例通过先获取随钻测井过程产生的实测数据，其中，所述实测数据包括测量参数与初始电阻率参数，然后根据实测数据的测量参数与电阻率参数对应的分布曲线，构建邻域扩展比，并且基于邻域扩展比对应的窗口半径与纠正尺度，计算电阻率修正值，最后通过所述电阻率修正值对所述电阻率参数进行修正，确认最终电阻率参数。通过实测数据的测量参数与电阻率参数对应的分布曲线构建的邻域扩展比，进一步获得对应的窗口半径与纠正尺度计算电阻率修正值，能够根据测量参数带来的子测量参数在不同时间段内与视电阻率分布关系体现的增减变化，对视电阻率进行精准修正，以获得更精准视电阻率，进而降低钻井的风险，提高钻井效率。对于本领域技术人员而言，显然本申请不限于上述示范性实施例的细节，而且在不背离本申请的精神或基本特征的情况下，能够以其他的具体形式实现本申请。因此，无论从哪一点来看，均应将本申请上述的实施例看作是示范性的，而且是非限制性的，本申请的范围由所附权利要求而不是上述说明限定，因此旨在将落在权利要求的等同要件的含义和范围内的所有变化涵括在本申请内。
