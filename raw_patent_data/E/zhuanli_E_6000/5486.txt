标题title
一种自动校桩方法、系统和设备
摘要abst
本发明提出了一种自动校桩方法、系统和设备，属于公路校桩技术领域，该方法包括：采集待检测载具车辆的行驶环境信息；采用卡尔曼滤波对第一里程信息滤波得到预测的第二里程信息；将第二里程信息利用位置姿态信息平曲线分段后再竖曲线分段，在竖曲线分段和平曲线分段中均确定消除竖曲线影响距离；消除检测位置车轮里程计平曲线偏移，叠加道路中线位置估计的竖曲线偏移，在竖曲线分段中计算消除竖曲线影响车轮里程计偏移的距离；提取图像信息中里程桩号，对里程桩号进行特征提取作为区间值，对调整后的检测桩号进行优化，消除测量累计误差。基于该方法，还提出了一种自动校桩系统、设备。本发明采用三级优化的方式，提升道路检测校桩准确性。
权利要求书clms
1.一种自动校桩方法，其特征在于，包括以下步骤：采集待检测载具车辆的行驶环境信息；所述行驶环境信息包括图像信息、第一里程信息和位置姿态信息；以及采用卡尔曼滤波对所述第一里程信息进行滤波得到预测的第二里程信息；将预设长度的第二里程信息利用位置姿态信息首先进行平曲线分段，在平曲线的基础上再进行竖曲线分段，确定在竖曲线分段中消除竖曲线影响距离和在平曲线分段中消除竖曲线影响距离；消除检测位置车轮里程计平曲线偏移，叠加道路中线位置估计的竖曲线偏移，在竖曲线分段中计算消除竖曲线影响车轮里程计偏移的距离；利用消除竖曲线影响车轮里程计偏移的距离调整检测桩号；提取图像信息中里程桩号，对所述里程桩号进行特征提取，将提取的里程桩号作为区间值，对调整后的检测桩号进行优化，用于消除测量累计误差。2.根据权利要求1所述的一种自动校桩方法，其特征在于，所述图像信息包括公里桩号和百米桩号；所述位置姿态信息包括载具车辆的加速度、航向角和俯仰角。3.根据权利要求2所述的一种自动校桩方法，其特征在于，所述采用卡尔曼滤波对所述第一里程信息进行滤波得到预测的第二里程信息的详细过程包括：通过车载控制器读取载具车辆的第一速度，利用所述第一速度/＞和位置姿态信息中载具车辆的加速度/＞进行卡尔曼滤波得到一次预测的载具车辆第二速度/＞；利用所述第二速度和第一里程信息/＞进行二次卡尔曼滤波得到二次预测的载具车辆第二里程信息/＞。4.根据权利要求3所述的一种自动校桩方法，其特征在于，所述一次预测方程为：一次更新方程为：其中，表示第/＞时刻速度最优估计值；/＞表示第/＞时刻的加速度；/＞表示第/＞时刻的噪声；/＞表示第/＞时刻的先验估计协方差矩阵，即/＞的协方差矩阵；/＞表示/＞时刻的后验估计协方差矩阵，即/＞的协方差矩阵；/＞表示测量噪声矩阵，/＞表示过程激励噪声矩阵；/＞表示卡尔曼系数；/＞表示第/＞时刻速度的观测值；/＞表示/＞时刻的后验估计协方差矩阵，即/＞的协方差矩阵；二次预测方程为：二次更新方程为：表示第/＞时刻里程的预测值；/＞表示第/＞时刻里程最优估计值；/＞表示第/＞时刻里程的观测值。5.根据权利要求3所述的一种自动校桩方法，其特征在于，所述将预设长度的第二里程信息利用位置姿态信息首先进行平曲线分段的过程包括：对预设长度为的数据进行平曲线分段，利用位置姿态信息中的航向角离散检测数据记为/＞，离散间距为/＞,则/＞，设直曲阈值为/＞,则连续个，则记录首个/＞为第一个平曲线线段起始位置/＞,直到个/＞，最后一个/＞位置为第一个平曲线段结束位置/＞；其中/＞平曲线分段序号；分段数据计为，其中/＞为分段号，/＞为对应数据里程。6.根据权利要求5所述的一种自动校桩方法，其特征在于，所述在平曲线的基础上再进行竖曲线分段的过程包括：将长度为的/＞数据进行竖曲线分段，利用位置姿态信息中的俯仰角离散检测数据记为/＞，离散间距为/＞，则/＞，设坡曲阈值为/＞，若连续个/＞，则记录首个/＞位置为第一个竖曲线线段起始位置/＞，直到连续个/＞，最后一个/＞位置竖曲线线段结束位置/＞，其中/＞为竖曲分段序号，以此类推对竖曲线分段，记为/＞；其中/＞为竖曲线对应数据里程；/＞为与上一段竖曲线的里程增量。7.根据权利要求6所述的一种自动校桩方法，其特征在于，所述确定在竖曲线分段中消除竖曲线影响距离和在平曲线分段中消除竖曲线影响距离；消除检测位置车轮里程计平曲线偏移，叠加道路中线位置估计的竖曲线偏移，在竖曲线分段中计算消除竖曲线影响车轮里程计偏移的距离具体包括：对应的竖曲线半径为/＞，故/＞，/＞中消除竖曲线影响的距离为：；其中，/＞为/＞中消除竖曲线影响的距离；消除平曲线影响距离为：/＞；/＞为/＞消除平曲线影响距离；对道路中线特征提取，估计出检测位置与道路中心线之间的距离，/＞与平曲线分段对应，/＞对应位置平曲线半径的测量值为/＞；/＞中消除车轮里程计偏移的距离为：/＞；/＞为/＞中消除车轮里程计偏移的距离；叠加道路中线位置估计的竖曲线偏移后，中消除竖曲线影响的距离为：；/＞为叠加道路中线位置估计的竖曲线偏移后，/＞中消除竖曲线影响的距离。8.根据权利要求2所述的一种自动校桩方法，其特征在于，所述将提取的里程桩号作为区间值，对所述调整后的检测桩号进行优化，用于消除测量累计误差的过程包括：采用线性插值法进行求解，设目标函数为：；其中，为运动约束；/＞为检测数据前一级优化完成后的按照平竖曲线的节点，所述/＞为检测数据后一级优化完成后的按照平竖曲线的节点；当整公里桩号的对应虚拟里程位置差与检测数据累积值和/＞不相等时，得到优化后的桩号点位。9.一种自动校桩系统，其特征在于，所述系统包括第一优化模块、第二优化模块和第三优化模块；所述第一优化模块用于采集待检测载具车辆的行驶环境信息；所述行驶环境信息包括图像信息、第一里程信息和位置姿态信息；以及采用卡尔曼滤波对所述第一里程信息进行滤波得到预测的第二里程信息；所述第二优化模块用于将预设长度的第二里程信息利用位置姿态信息首先进行平曲线分段，在平曲线的基础上再进行竖曲线分段，确定在竖曲线分段中消除竖曲线影响距离和在平曲线分段中消除竖曲线影响距离；消除检测位置车轮里程计平曲线偏移；叠加道路中线位置估计的竖曲线偏移，在竖曲线分段中计算消除竖曲线影响车轮里程计偏移的距离；利用消除竖曲线影响车轮里程计偏移的距离调整检测桩号；所述第三优化模块用于提取图像信息中里程桩号，对所述里程桩号进行特征提取，将提取的里程桩号作为区间值，对调整后的检测桩号进行优化，用于消除测量累计误差。10.一种自动校桩设备，其特征在于，包括存储器、处理器以及存储在所述存储器上并可在所述处理器上运行的计算机程序，其中，所述处理器执行所述程序时可实现权利要求1至8任一项所述的一种自动校桩方法。
说明书desc
技术领域本发明属于公路校桩技术领域，特别涉及一种自动校桩方法、系统和设备。背景技术在对公路基础设施等资产进行检测时，通常以轮速编码器定位、GNSS定位或者视觉定位信息为依据，来对检测数据进行存储及分割统计。公路信息使用时，需要依托公路自身定位体系的桩号来对位置进行查找，因此就产生了检测数据定位与使用者定位之间的差异。通常的做法是，检测时要求检测人员对设置于公路右侧或左侧的公里桩位置进行记录，在检测后的数据处理环节，以此为依据对检测数据进行拉伸、压缩，或“长链短链”的划分，从而输出检测数据的分析计算结果。现有技术中公开有公路里程桩号修正的方法，但是均未从偏差原理出发，因此也未能从检测数据应用角度出发从根本上解决准确可靠的测量问题。比如：专利公开号为“CN113627273A”，名称为“一种基于视觉的高速公路里程桩号定位方法”的中国发明专利，和专利公开号为“CN115798206A”，名为“一种道路巡检目标公路里程桩号定位方法”，其通过t时刻经标定内外参数的双目成像视差，及t时刻记录的卫星定位信息及航向信息，对识别出的公路桩号牌位置进行解算，结合识别出的桩号数值实现校桩效果。又如：专利公开号为“CN105070088A”名称为“GPS对接公路里程桩号系统及其实现方法”的中国发明专利，其通过检测人员手工输入，以消除轮速里程计累积误差的方式实现车辆的桩号里程定位。再如：专利公开号为“CN106772500A”，名称为“基于电子地图和GPS坐标的高速公路公里桩号确定方法”的中国发明专利，其利用预先采集的公路桩号位置与卫星定位位置对应关系库，移动中的数据采集车辆通过检索、比对实现校桩。检测数据桩号与公路桩号位置不对应，是由于多种原因造成的，以公路桩号位置为节点进行调整，是数据粗对准的解决思路，同时，关键检测目标公路桩号由于存在间隔大、识认目标小、易遮挡、检测车辆位置不同推算结果不同等问题都会使得系统失效。同时，基于预先对公路桩号位置进行准确定位，又存在耗时长、作业危险且标准数据缺乏标准，标准数据无统一查询服务支撑等问题，难以实施。检测人员根据观察校桩，存在不同人员反应不同、作业习惯不同；相同人员也会因身体状况不同，难以做到相同位置准确校桩。此外，上说所有方法，在进行多车道多次检测时，均难以解决数据起终点、过程位置横向数据对齐的问题。发明内容为了解决上述技术问题，本发明提出了一种自动校桩方法、系统和设备，采用三级优化的方式，有效提升道路检测校桩准确性。为实现上述目的，本发明采用以下技术方案：一种自动校桩方法，包括以下步骤：采集待检测载具车辆的行驶环境信息；所述行驶环境信息包括图像信息、第一里程信息和位置姿态信息；以及采用卡尔曼滤波对所述第一里程信息进行滤波得到预测的第二里程信息；将预设长度的第二里程信息利用位置姿态信息首先进行平曲线分段，在平曲线的基础上再进行竖曲线分段，确定在竖曲线分段中消除竖曲线影响距离和在平曲线分段中消除竖曲线影响距离；消除检测位置车轮里程计平曲线偏移，叠加道路中线位置估计的竖曲线偏移，在竖曲线分段中计算消除竖曲线影响车轮里程计偏移的距离；利用消除竖曲线影响车轮里程计偏移的距离调整检测桩号；提取图像信息中里程桩号，对所述里程桩号进行特征提取，将提取的里程桩号作为区间值，对调整后的检测桩号进行优化，用于消除测量累计误差。进一步的，所述图像信息包括公里桩号和百米桩号；所述位置姿态信息包括载具车辆的加速度、航向角和俯仰角。进一步的，所述采用卡尔曼滤波对所述第一里程信息进行滤波得到预测的第二里程信息的详细过程包括：通过车载控制器读取载具车辆的第一速度，利用所述第一速度/＞和位置姿态信息中载具车辆的加速度/＞进行卡尔曼滤波得到一次预测的载具车辆第二速度/＞；利用所述第二速度和第一里程信息/＞进行二次卡尔曼滤波得到二次预测的载具车辆第二里程信息/＞。进一步的，所述一次预测方程为：一次更新方程为：其中，表示第/＞时刻速度最优估计值；/＞表示第/＞时刻的加速度；表示第/＞时刻的噪声；/＞表示第/＞时刻的先验估计协方差矩阵，即/＞的协方差矩阵；/＞表示/＞时刻的后验估计协方差矩阵，即/＞的协方差矩阵；/＞表示测量噪声矩阵，/＞表示过程激励噪声矩阵；/＞表示卡尔曼系数；/＞表示第/＞时刻速度的观测值；/＞表示/＞时刻的后验估计协方差矩阵，即/＞的协方差矩阵；二次预测方程为：二次更新方程为：表示第/＞时刻里程的预测值；/＞表示第/＞时刻里程最优估计值；/＞表示第时刻里程的观测值。进一步的，所述将预设长度的第二里程信息利用位置姿态信息首先进行平曲线分段的过程包括：对预设长度为的数据进行平曲线分段，利用位置姿态信息中的航向角离散检测数据记为/＞，离散间距为/＞,则/＞，设直曲阈值为/＞,则连续个/＞，则记录首个/＞为第一个平曲线线段起始位置/＞,直到个，最后一个/＞位置为第一个平曲线段结束位置/＞；其中/＞平曲线分段序号；分段数据计为/＞，其中/＞为分段号，/＞为对应数据里程。进一步的，所述在平曲线的基础上再进行竖曲线分段的过程包括：将长度为的/＞数据进行竖曲线分段，利用位置姿态信息中的俯仰角离散检测数据记为/＞，离散间距为/＞，则/＞，设坡曲阈值为/＞，若连续个/＞，则记录首个/＞位置为第一个竖曲线线段起始位置/＞，直到连续个/＞，最后一个/＞位置竖曲线线段结束位置/＞，其中/＞为竖曲分段序号，以此类推对竖曲线分段，记为/＞；其中/＞为竖曲线对应数据里程；/＞为与上一段竖曲线的里程增量。进一步的，所述确定在竖曲线分段中消除竖曲线影响距离和在平曲线分段中消除竖曲线影响距离；消除检测位置车轮里程计平曲线偏移，叠加道路中线位置估计的竖曲线偏移，在竖曲线分段中计算消除竖曲线影响车轮里程计偏移的距离具体包括：对应的竖曲线半径为/＞，故/＞，/＞中消除竖曲线影响的距离为：；其中，/＞为/＞中消除竖曲线影响的距离；消除平曲线影响距离为：/＞；/＞为/＞消除平曲线影响距离；对道路中线特征提取，估计出检测位置与道路中心线之间的距离，/＞与平曲线分段/＞对应，/＞对应位置平曲线半径的测量值为/＞；/＞中消除车轮里程计偏移的距离为：/＞；/＞为/＞中消除车轮里程计偏移的距离；叠加道路中线位置估计的竖曲线偏移后，中消除竖曲线影响的距离为：；/＞为叠加道路中线位置估计的竖曲线偏移后，/＞中消除竖曲线影响的距离。进一步的，所述将提取的里程桩号作为区间值，对所述调整后的检测桩号进行优化，用于消除测量累计误差的过程包括：采用线性插值法进行求解，设目标函数为：；其中，为运动约束；/＞为检测数据前一级优化完成后的按照平竖曲线的节点，所述/＞为检测数据后一级优化完成后的按照平竖曲线的节点；当整公里桩号的对应虚拟里程位置差与检测数据累积值和/＞不相等时，得到优化后的桩号点位。本发明还提出了一种自动校桩系统，所述系统包括第一优化模块、第二优化模块和第三优化模块；所述第一优化模块用于采集待检测载具车辆的行驶环境信息；所述行驶环境信息包括图像信息、第一里程信息和位置姿态信息；以及采用卡尔曼滤波对所述第一里程信息进行滤波得到预测的第二里程信息；所述第二优化模块用于将预设长度的第二里程信息利用位置姿态信息首先进行平曲线分段，在平曲线的基础上再进行竖曲线分段，确定在竖曲线分段中消除竖曲线影响距离和在平曲线分段中消除竖曲线影响距离；消除检测位置车轮里程计平曲线偏移；叠加道路中线位置估计的竖曲线偏移，在竖曲线分段中计算消除竖曲线影响车轮里程计偏移的距离；利用消除竖曲线影响车轮里程计偏移的距离调整检测桩号；所述第三优化模块用于提取图像信息中里程桩号，对所述里程桩号进行特征提取，将提取的里程桩号作为区间值，对调整后的检测桩号进行优化，用于消除测量累计误差。本发明还提出了一种自动校桩设备，包括存储器、处理器以及存储在所述存储器上并可在所述处理器上运行的计算机程序，其中，所述处理器执行所述程序时可实现所述的一种自动校桩方法发明内容中提供的效果仅仅是实施例的效果，而不是发明所有的全部效果，上述技术方案中的一个技术方案具有如下优点或有益效果：本发明提出了一种自动校桩方法、系统和设备，属于公路校桩技术领域，该方法包括：采集待检测载具车辆的行驶环境信息；行驶环境信息包括图像信息、第一里程信息和位置姿态信息；以及采用卡尔曼滤波对第一里程信息进行滤波得到预测的第二里程信息；将预设长度的第二里程信息利用位置姿态信息首先进行平曲线分段，在平曲线的基础上再进行竖曲线分段，确定在竖曲线分段中消除竖曲线影响距离和在平曲线分段中消除竖曲线影响距离；消除检测位置车轮里程计平曲线偏移，叠加道路中线位置估计的竖曲线偏移，在竖曲线分段中计算消除竖曲线影响车轮里程计偏移的距离；利用消除竖曲线影响车轮里程计偏移的距离调整检测桩号；提取图像信息中里程桩号，对里程桩号进行特征提取，将提取的里程桩号作为区间值，对调整后的检测桩号进行优化，用于消除测量累计误差。基于一种自动校桩方法，还提出了一种自动校桩系统和设备。本发明采用三级优化的方式，有效提升道路检测校桩准确性。本发明中一级优化采用卡尔曼滤波的方式，用于过滤由于胎压、标定、测量自身产生的误差，优化了整体的行驶环境信息；在一级优化中通过缩小分布，提升优化的准确度。本发明中二级优化对检测位置、车辆行驶位置与路侧桩号布设位置存在差异而进行的修正，包含了道路线形平纵曲线的影响，考虑到三维环境位置姿态的估计，同样可以逐点平移至道路中线位置。本发明中三级优化对公路里程设置存在长短链，在校正校测误差后对消除测量累积误差进行优化，提升道路检测校桩准确性。附图说明图1为本发明实施例1提出的一种自动校桩方法流程图；图2为本发明实施例1提出的一种自动校桩方法中采集行驶环境信息的示意图；图3为本发明实施例1提出的一种自动校桩方法中平曲线分段示意图；图4为本发明实施例1提出的一种自动校桩方法中竖曲线分段示意图；图5为本发明实施例1提出的一种自动校桩方法中位姿优化示意图；图6为本发明实施例2提出的一种自动校桩系统示意图；图7为本发明实施例3提出的一种自动校桩设备示意图。具体实施方式为能清楚说明本方案的技术特点，下面通过具体实施方式，并结合其附图，对本发明进行详细阐述。下文的公开提供了许多不同的实施例或例子用来实现本发明的不同结构。为了简化本发明的公开，下文中对特定例子的部件和设置进行描述。此外，本发明可以在不同例子中重复参考数字和/或字母。这种重复是为了简化和清楚的目的，其本身不指示所讨论各种实施例和/或设置之间的关系。应当注意，在附图中所图示的部件不一定按比例绘制。本发明省略了对公知组件和处理技术及工艺的描述以避免不必要地限制本发明。实施例1本发明实施例1提出了一种自动校桩方法，采用一种三级优化的自动校桩方法，用于解决现有技术中存在的在进行多车道多次检测时，均难以解决数据起终点、过程位置横向数据对齐的问题，该方法实现的过程包括：采集待检测载具车辆的行驶环境信息；行驶环境信息包括图像信息、第一里程信息和位置姿态信息；以及采用卡尔曼滤波对第一里程信息进行滤波得到预测的第二里程信息；将预设长度的第二里程信息利用位置姿态信息首先进行平曲线分段，在平曲线的基础上再进行竖曲线分段，确定在竖曲线分段中消除竖曲线影响距离和在平曲线分段中消除竖曲线影响距离；消除检测位置车轮里程计平曲线偏移，叠加道路中线位置估计的竖曲线偏移，在竖曲线分段中计算消除竖曲线影响车轮里程计偏移的距离；利用消除竖曲线影响车轮里程计偏移的距离调整检测桩号；提取图像信息中里程桩号，对里程桩号进行特征提取，将提取的里程桩号作为区间值，对调整后的检测桩号进行优化，用于消除测量累计误差。图1为本发明实施例1提出的一种自动校桩方法详细流程图；在步骤S100中，开始处理该流程。在步骤S110中，采集待检测载具车辆的行驶环境信息，行驶环境信息包括图像信息、第一里程信息和位置姿态信息。图2为本发明实施例1提出的一种自动校桩方法中采集行驶环境信息的示意图；本发明中，在载具车辆上安装并利用面阵相机、惯性陀螺仪、卫星定位装置、车轮里程计等设备，对载具车辆所行驶环境新进行记录。其中面阵相机包括但不限于单目、双目、立体相机等。利用面阵相机对检测图像中的里程桩号特征识别，对道路里程桩信息进行提取；里程桩号具体包括：公里桩号和百米桩号。利用惯性陀螺仪获取位置姿态信息，其中位置姿态信息包括载具车辆的加速度、航向角和俯仰角。车轮里程计用于获取载具车辆的第一里程信息。本申请还可以在载具车辆上设置其他传感器，用于获取需要的信息。在步骤S120中，采用卡尔曼滤波对第一里程信息进行滤波得到预测的第二里程信息。由于胎压、标定、测量自身产生的影响会导致编码器的里程的误差，为了更精确的估计里程，采用两次卡尔曼滤波实现里程的准确估计。第一次卡尔曼滤波：采用检测载具车身CAN总线读取车辆的速度与车载陀螺仪得到车辆的加速度预测的速度进行滤波，得到相对精确的车辆速度；第二次卡尔曼滤波：采用第一次滤波得到的车辆速度预测里程与编码器测的里程进行滤波，得到相对精确的车辆里程。本发明中一级优化采用卡尔曼滤波的方式，用于过滤由于胎压、标定、测量自身产生的误差，优化了整体的行驶环境信息；在一级优化中通过缩小分布，提升优化的准确度。采用卡尔曼滤波对第一里程信息进行滤波得到预测的第二里程信息的详细过程包括：通过车载控制器读取载具车辆的第一速度，利用第一速度/＞和位置姿态信息中载具车辆的加速度/＞进行卡尔曼滤波得到一次预测的载具车辆第二速度/＞；利用第二速度/＞和第一里程信息/＞进行二次卡尔曼滤波得到二次预测的载具车辆第二里程信息/＞。一次预测方程为：一次更新方程为：其中，表示第/＞时刻速度最优估计值；/＞表示第/＞时刻的加速度；表示第/＞时刻的噪声；/＞表示第/＞时刻的先验估计协方差矩阵，即/＞的协方差矩阵；/＞表示/＞时刻的后验估计协方差矩阵，即/＞的协方差矩阵；/＞表示测量噪声矩阵，/＞表示过程激励噪声矩阵；/＞表示卡尔曼系数；/＞表示第/＞时刻速度的观测值；/＞表示/＞时刻的后验估计协方差矩阵，即/＞的协方差矩阵；二次预测方程为：二次更新方程为：表示第/＞时刻里程的预测值；/＞表示第/＞时刻里程最优估计值；/＞表示第时刻里程的观测值。在步骤S130中，将预设长度的第二里程信息利用位置姿态信息首先进行平曲线分段，在平曲线的基础上再进行竖曲线分段。实际路面检测中，道路线性是在不断变化的，二级优化是为了消除平纵线形对里程测量的影响。图3为本发明实施例1提出的一种自动校桩方法中平曲线分段示意图；对预设长度为的数据进行平曲线分段，利用位置姿态信息中的航向角离散检测数据记为/＞，离散间距为/＞,则/＞，设直曲阈值为/＞,则连续个，则记录首个/＞为第一个平曲线线段起始位置/＞,直到个/＞，最后一个/＞位置为第一个平曲线段结束位置/＞；其中/＞平曲线分段序号；分段数据计为，其中/＞为分段号，/＞为对应数据里程。图4为本发明实施例1提出的一种自动校桩方法中竖曲线分段示意图；在平曲线的基础上再进行竖曲线分段。将长度为的/＞数据进行竖曲线分段，利用位置姿态信息中的俯仰角离散检测数据记为/＞，离散间距为/＞，则/＞，设坡曲阈值为/＞，若连续个/＞，则记录首个/＞位置为第一个竖曲线线段起始位置/＞，直到连续个/＞，最后一个/＞位置竖曲线线段结束位置/＞，其中/＞为竖曲分段序号，以此类推对竖曲线分段，记为/＞；其中/＞为竖曲线对应数据里程；/＞为与上一段竖曲线的里程增量。在步骤S140中，确定在竖曲线分段中消除竖曲线影响距离和在平曲线分段中消除竖曲线影响距离；消除检测位置车轮里程计平曲线偏移，叠加道路中线位置估计的竖曲线偏移，在竖曲线分段中计算消除竖曲线影响车轮里程计偏移的距离；利用消除竖曲线影响车轮里程计偏移的距离调整检测桩号。本发明中二级优化对检测位置、车辆行驶位置与路侧桩号布设位置存在差异而进行的修正，包含了道路线形平纵曲线的影响，考虑到三维环境位置姿态的估计，同样可以逐点平移至道路中线位置。对应的竖曲线半径为/＞，故/＞，/＞中消除竖曲线影响的距离为：；其中，/＞为/＞中消除竖曲线影响的距离；消除平曲线影响距离为：/＞；/＞为/＞消除平曲线影响距离；对道路中线特征提取，估计出检测位置与道路中心线之间的距离，/＞与平曲线分段/＞对应，/＞对应位置平曲线半径的测量值为/＞；/＞中消除车轮里程计偏移的距离为：/＞；/＞为/＞中消除车轮里程计偏移的距离；叠加道路中线位置估计的竖曲线偏移后，中消除竖曲线影响的距离为：；/＞为叠加道路中线位置估计的竖曲线偏移后，/＞中消除竖曲线影响的距离。二次优化的目的是消除平曲线影响，涉及叠加正确的竖曲线值， 横向误差导致了平曲线对里程的影响；要想挪出去需要先消除检测位置竖曲线的影响；挪出去的话，相当于伸长了；示意图在叠加挪出去的位置上，对竖曲线的估计，这样才能得到更准确的估计。在步骤S150中，提取图像信息中里程桩号，对里程桩号进行特征提取，将提取的里程桩号作为区间值，对调整后的检测桩号进行优化，用于消除测量累计误差。利用面阵相机对检测图像中的里程桩号进行特征识别，其中；里程桩号包括公里桩号和百米桩号特征识别，对道路里程桩信息进行提取。将提取的里程信息作为区间值，图5为本发明实施例1提出的一种自动校桩方法中位姿优化示意图；在图5中，1号六边形代表整公里桩号，其余的六边形代表百米桩号。x1位置和x6位置三角形代表与整公里桩号的对应虚拟里程位置，其余三角形代表检测数据前两级优化完成后的按照平竖曲线的节点，可以通过检测数据线形插值求得。设目标函数为：；其中，为运动约束；/＞为检测数据前一级优化完成后的按照平竖曲线的节点，/＞为检测数据后一级优化完成后的按照平竖曲线的节点；当整公里桩号的对应虚拟里程位置差与检测数据累积值和/＞不相等时，得到优化后的桩号点位。在步骤S160中，得到优化后的桩号，然后再对每个数据分段均执行二级优化和三级优化，直到所有的分段都执行完得到优化后的桩号点位。在步骤S170中，流程结束。本发明实施例1提出的一种自动校桩方法采用三级优化的方式，有效提升道路检测校桩准确性。实施例2基于本发明实施例1提出的一种自动校桩方法，本发明实施例2还提出了一种自动校桩系统，图6为本发明实施例2提出的一种自动校桩系统示意图；该系统包括：第一优化模块、第二优化模块和第三优化模块；第一优化模块用于采集待检测载具车辆的行驶环境信息；行驶环境信息包括图像信息、第一里程信息和位置姿态信息；以及采用卡尔曼滤波对第一里程信息进行滤波得到预测的第二里程信息；第二优化模块用于将预设长度的第二里程信息利用位置姿态信息首先进行平曲线分段，在平曲线的基础上再进行竖曲线分段，确定在竖曲线分段中消除竖曲线影响距离和在平曲线分段中消除竖曲线影响距离；消除检测位置车轮里程计平曲线偏移；叠加道路中线位置估计的竖曲线偏移，在竖曲线分段中计算消除竖曲线影响车轮里程计偏移的距离；利用消除竖曲线影响车轮里程计偏移的距离调整检测桩号；第三优化模块用于提取图像信息中里程桩号，对里程桩号进行特征提取，将提取的里程桩号作为区间值，对调整后的检测桩号进行优化，用于消除测量累计误差。在第一优化模块中：图像信息包括公里桩号和百米桩号；位置姿态信息包括载具车辆的加速度、航向角和俯仰角。采用卡尔曼滤波对第一里程信息进行滤波得到预测的第二里程信息的详细过程包括：通过车载控制器读取载具车辆的第一速度，利用第一速度/＞和位置姿态信息中载具车辆的加速度/＞进行卡尔曼滤波得到一次预测的载具车辆第二速度/＞；利用第二速度/＞和第一里程信息/＞进行二次卡尔曼滤波得到二次预测的载具车辆第二里程信息/＞。一次预测方程为：一次更新方程为：其中，表示第/＞时刻速度最优估计值；/＞表示第/＞时刻的加速度；/＞表示第/＞时刻的噪声；/＞表示第/＞时刻的先验估计协方差矩阵，即/＞的协方差矩阵；表示/＞时刻的后验估计协方差矩阵，即/＞的协方差矩阵；/＞表示测量噪声矩阵，表示过程激励噪声矩阵；/＞表示卡尔曼系数；/＞表示第/＞时刻速度的观测值；/＞表示时刻的后验估计协方差矩阵，即/＞的协方差矩阵；二次预测方程为：二次更新方程为：表示第/＞时刻里程的预测值；/＞表示第/＞时刻里程最优估计值；/＞表示第/＞时刻里程的观测值。第二优化模块中：对预设长度为的数据进行平曲线分段，利用位置姿态信息中的航向角离散检测数据记为/＞，离散间距为/＞,则/＞，设直曲阈值为/＞,则连续个/＞，则记录首个/＞为第一个平曲线线段起始位置/＞,直到个/＞，最后一个/＞位置为第一个平曲线段结束位置/＞；其中/＞平曲线分段序号；分段数据计为/＞，其中/＞为分段号，/＞为对应数据里程。在平曲线的基础上再进行竖曲线分段，将长度为的/＞数据进行竖曲线分段，利用位置姿态信息中的俯仰角离散检测数据记为/＞，离散间距为/＞，则/＞，设坡曲阈值为/＞，若连续个/＞，则记录首个/＞位置为第一个竖曲线线段起始位置/＞，直到连续个/＞，最后一个/＞位置竖曲线线段结束位置，其中/＞为竖曲分段序号，以此类推对竖曲线分段，记为/＞；其中/＞为竖曲线对应数据里程；/＞为与上一段竖曲线的里程增量。本发明中二级优化对检测位置、车辆行驶位置与路侧桩号布设位置存在差异而进行的修正，包含了道路线形平纵曲线的影响，考虑到三维环境位置姿态的估计，同样可以逐点平移至道路中线位置。对应的竖曲线半径为/＞，故/＞，/＞中消除竖曲线影响的距离为：；其中，/＞为/＞中消除竖曲线影响的距离；消除平曲线影响距离为：/＞；/＞为/＞消除平曲线影响距离；对道路中线特征提取，估计出检测位置与道路中心线之间的距离，/＞与平曲线分段/＞对应，/＞对应位置平曲线半径的测量值为/＞；/＞中消除车轮里程计偏移的距离为：/＞；/＞为/＞中消除车轮里程计偏移的距离；叠加道路中线位置估计的竖曲线偏移后，中消除竖曲线影响的距离为：；/＞为叠加道路中线位置估计的竖曲线偏移后，/＞中消除竖曲线影响的距离。第三优化模块中，利用面阵相机对检测图像中的里程桩号进行特征识别，其中；里程桩号包括公里桩号和百米桩号特征识别，对道路里程桩信息进行提取。将提取的里程信息作为区间值，图5为本发明实施例1提出的一种自动校桩方法中位姿优化示意图；在图5中，1号六边形代表整公里桩号，其余的六边形代表百米桩号。x1位置和x6位置三角形代表与整公里桩号的对应虚拟里程位置。其余三角形代表检测数据前两级优化完成后的按照平竖曲线的节点，可以通过检测数据线形插值求得。设目标函数为：；其中，为运动约束；/＞为检测数据前一级优化完成后的按照平竖曲线的节点，为检测数据后一级优化完成后的按照平竖曲线的节点；当整公里桩号的对应虚拟里程位置差与检测数据累积值和/＞不相等时，得到优化后的桩号点位。得到优化后的桩号，然后再对每个数据分段均执行二级优化和三级优化，直到所有的分段都执行完得到优化后的桩号点位。本发明实施例2提出的一种自动校桩系统采用三级优化的方式，有效提升道路检测校桩准确性。实施例3本发明实施例3还提出了一种自动校桩设备，图7为本发明实施例3提出的一种自动校桩设备示意图，该设备包括：存储器，用于存储计算机程序；处理器，用于执行所述计算机程序时实现方法步骤如下：在步骤S100中，开始处理该流程。在步骤S110中，采集待检测载具车辆的行驶环境信息，行驶环境信息包括图像信息、第一里程信息和位置姿态信息。在步骤S120中，采用卡尔曼滤波对第一里程信息进行滤波得到预测的第二里程信息。在步骤S130中，将预设长度的第二里程信息利用位置姿态信息首先进行平曲线分段，在平曲线的基础上再进行竖曲线分段。在步骤S140中，确定在竖曲线分段中消除竖曲线影响距离和在平曲线分段中消除竖曲线影响距离；消除检测位置车轮里程计平曲线偏移，叠加道路中线位置估计的竖曲线偏移，在竖曲线分段中计算消除竖曲线影响车轮里程计偏移的距离；利用消除竖曲线影响车轮里程计偏移的距离调整检测桩号。在步骤S150中，提取图像信息中里程桩号，对里程桩号进行特征提取，将提取的里程桩号作为区间值，对调整后的检测桩号进行优化，用于消除测量累计误差。在步骤S160中，得到优化后的桩号，然后再对每个数据分段均执行二级优化和三级优化，直到所有的分段都执行完得到优化后的桩号点位。在步骤S170中，流程结束。本发明实施例3提出的一种自动校桩设备采用三级优化的方式，有效提升道路检测校桩准确性。需要说明：本发明技术方案提供了一种电子设备，包括：通信接口，能够与其它设备比如网络设备等进行信息交互；处理器，与通信接口连接，以实现与其它设备进行信息交互，用于运行计算机程序时，执行上述一个或多个技术方案提供的一种自动校桩方法，而所述计算机程序存储在存储器上。当然，实际应用时，电子设备中的各个组件通过总线系统耦合在一起。可理解，总线系统用于实现这些组件之间的连接通信。总线系统除包括数据总线之外，还包括电源总线、控制总线和状态信号总线。本申请实施例中的存储器用于存储各种类型的数据以支持电子设备的操作。这些数据的示例包括：用于在电子设备上操作的任何计算机程序。可以理解，存储器可以是易失性存储器或非易失性存储器，也可包括易失性和非易失性存储器两者。其中，非易失性存储器可以是只读存储器、可编程只读存储器、可擦除可编程只读存储器、电可擦除可编程只读存储器、磁性随机存取存储器、快闪存储器、磁表面存储器、光盘、或只读光盘；磁表面存储器可以是磁盘存储器或磁带存储器。易失性存储器可以是随机存取存储器，其用作外部高速缓存。通过示例性但不是限制性说明，许多形式的RAM可用，例如静态随机存取存储器、同步静态随机存取存储器、动态随机存取存储器、同步动态随机存取存储器、双倍数据速率同步动态随机存取存储器、增强型同步动态随机存取存储器、同步连接动态随机存取存储器、直接内存总线随机存取存储器。本申请实施例描述的存储器旨在包括但不限于这些和任意其它适合类型的存储器。上述本申请实施例揭示的方法可以应用于处理器中，或者由处理器实现。处理器可能是一种集成电路芯片，具有信号的处理能力。在实现过程中，上述方法的各步骤可以通过处理器中的硬件的集成逻辑电路或者软件形式的指令完成。上述的处理器可以是通用处理器、DSP，或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。处理器可以实现或者执行本申请实施例中的公开的各方法、步骤及逻辑框图。通用处理器可以是微处理器或者任何常规的处理器等。结合本申请实施例所公开的方法的步骤，可以直接体现为硬件译码处理器执行完成，或者用译码处理器中的硬件及软件模块组合执行完成。软件模块可以位于存储介质中，该存储介质位于存储器，处理器读取存储器中的程序，结合其硬件完成前述方法的步骤。处理器执行所述程序时实现本申请实施例的各个方法中的相应流程，为了简洁，在此不再赘述。本申请实施例3提供的一种自动校桩设备中相关部分的说明可以参见本申请实施例1提供的一种自动校桩方法中对应部分的详细说明，在此不再赘述。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。另外，本申请实施例提供的上述技术方案中与现有技术中对应技术方案实现原理一致的部分并未详细说明，以免过多赘述。上述虽然结合附图对本发明的具体实施方式进行了描述，但并非对本发明保护范围的限制。对于所属领域的技术人员来说，在上述说明的基础上还可以做出其它不同形式的修改或变形。这里无需也无法对所有的实施方式予以穷举。在本发明的技术方案的基础上，本领域技术人员不需要付出创造性劳动即可做出的各种修改或变形仍在本发明的保护范围以内。
