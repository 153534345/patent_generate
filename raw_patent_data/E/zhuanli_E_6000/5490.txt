标题title
一种无人挖掘机远程智能控制方法
摘要abst
本发明提出了一种无人挖掘机远程智能控制方法，包括如下步骤：S1：在无人挖掘机内置的控制器处配置若干传感器，在开机时进行若干传感器的自检；S2：控制器读取工作模式信号，选择无人挖掘机的回转工作模式或者行走工作模式，控制器的控制对象为无人挖掘机的回转电机和行走电机；S3：设置挖掘机的控制状态：选择无人挖掘机的控制状态为本控状态或者外控状态；S4：在控制器内预置外控状态的输入阈值，当外控状态下的输入超过输入阈值时，无人挖掘机由外控状态切换至本控状态；S5：挖掘机基于本控状态或者外控状态，采用自适应PID方法对无人挖掘机的回转电机和行走电机进行控制。
权利要求书clms
1.一种无人挖掘机远程智能控制方法，其特征在于，包括如下步骤：S1：在无人挖掘机内置的控制器处配置若干传感器，在开机时进行若干传感器的自检，并判断无人挖掘机能正常开机时进入步骤S2；S2：控制器读取工作模式信号，选择无人挖掘机的回转工作模式或者行走工作模式，控制器的控制对象为无人挖掘机的回转电机和行走电机；S3：设置无人挖掘机的控制状态：选择无人挖掘机的控制状态为本控状态或者外控状态；本控状态为控制器通过自给定值就地控制无人挖掘机，外控状态为通过外部输入远程遥控器控制无人挖掘机；S4：在控制器内预置外控状态的输入阈值，当外控状态下的输入超过输入阈值时，无人挖掘机由外控状态切换至本控状态；S5：无人挖掘机基于本控状态或者外控状态，采用自适应PID方法对无人挖掘机的回转电机和行走电机进行控制。2.根据权利要求1所述的一种无人挖掘机远程智能控制方法，其特征在于，步骤S2所述回转工作模式或者行走工作模式，均是采用电压电流双闭环控制方式，若干传感器分别获取电流环反馈信号AD采样值、电压环反馈信号AD采样值和输入信号AD采样值。3.根据权利要求2所述的一种无人挖掘机远程智能控制方法，其特征在于，步骤S2所述回转工作模式，具体内容为：A1：将所述输入信号AD采样值减去传感器基数得到输入信号AD校正值，并判断无人挖掘机是否满足外控状态的要求：如果满足，则控制输入采用所述输入信号AD校正值C11＝C1-E3；如果不满足，则控制输入切换至控制器自给定值；控制输入即为外控状态下远程遥控器的回转工作模式输入的校准后的结果；此处的控制器自给定值为本控状态下控制器向无人挖掘机的回转电机的输入；A2：对控制输入进行判断，判断控制输入与控制器自给定值的差值的绝对值是否小于控制器自给定值的第一比例系数α％，即|C11-A|＜A×α％，若不满足，则控制无人挖掘机的回转电机的输出为：UK1＝×K1-A41)×K6，其中B41和A41为回转模式中间变量；K1和K6为固定放大倍数；A3：判断无人挖掘机的回转电机的输出与控制器自给定值的大小关系，给无人挖掘机的回转电机的输出进行调整；A4：将增加了可调分量的无人挖掘机的电机的输出输出至回转电机。4.根据权利要求3所述的一种无人挖掘机远程智能控制方法，其特征在于，步骤A2中所述的回转模式中间变量A41的计算过程为：将所述电流环反馈信号AD采样值减去传感器基数得到电流环反馈信号AD校正值，A11＝A1-E1；判断所述电流环反馈信号AD校正值是否大于控制器自给定值，如果A11＞A，则回转模式中间变量A41＝A11×K4，K4为电机正转可调放大倍数；如果A11≤A，则回转模式中间变量A41＝A11×K5，K5为电机反转可调放大倍数，并且K4和K5的第一可调门槛值为V1；所述回转模式中间变量B41的计算过程为：将电压环反馈信号AD采样值减去传感器基数得到电压环反馈信号AD校正值，B11＝B1-E2；判断所述电压环反馈信号AD校正值与控制器自给定值的差值的绝对值是否超过控制器自给定值的第二比例系数，|B11-A|≥A×β％，如超过则电压环正转可调放大倍数和电压环反转可调放大倍数保持不变；如电压环反馈信号AD校正值与控制器自给定值的差值的绝对值不超过控制器自给定值的第二比例系数β％，且控制输入与控制器自给定值的差值小于控制器自给定值的第一比例系数，即|B11-A|＜A×β％，且|C11-A|＜A×α％，则将电压环正转可调放大倍数的值调整为K2×K7，将电压环反转可调放大倍数的值调整为K3×K7，K7为固定放大倍数，K2和K3的第二可调门槛值为V2；最后判断当前电压环反馈信号AD校正值是否大于控制器自给定值，如是则回转模式中间变量B41＝B11×K2；否则回转模式中间变量B41＝B11×K3，回转模式中间变量B41大于第二可调门槛值V2。5.根据权利要求3所述的一种无人挖掘机远程智能控制方法，其特征在于，步骤A3所述给无人挖掘机的回转电机的输出进行调整，是当无人挖掘机的回转电机的输出大于控制器自给定值，且无人挖掘机的回转电机的输出与控制器自给定值的差值大于控制器自给定值的1％时，将/10的结果作为调整后的无人挖掘机的回转电机的输出；当无人挖掘机的回转电机的输出大于控制器自给定值，且无人挖掘机的回转电机的输出与控制器自给定值的差值不大于控制器自给定值的1％时，为当前的无人挖掘机的回转电机的输出增加一个正向可调分量；当无人挖掘机的回转电机的输出小于控制器自给定值，且控制器自给定值与无人挖掘机的回转电机的输出的差值大于控制器自给定值的1％时，将/10的结果作为调整后的无人挖掘机的回转电机的输出；当无人挖掘机的回转电机的输出小于控制器自给定值，且控制器自给定值与无人挖掘机的回转电机的输出的差值不大于控制器自给定值的1％时，为当前的无人挖掘机的回转电机的输出增加一个负向可调分量。6.根据权利要求2所述的一种无人挖掘机远程智能控制方法，其特征在于，步骤S2所述行走工作模式，具体内容为：B1：将所述输入信号AD采样值减去传感器基数得到输入信号AD校正值，并判断无人挖掘机是否满足外控状态的要求：如果满足，则控制输入采用所述输入信号AD校正值C11＝C1-E3；如果不满足，则控制输入切换至控制器自给定值；控制输入即为外控状态下远程遥控器的行走工作模式输入的校准后的结果；此处的控制器自给定值为本控状态下控制器向无人挖掘机的行走电机的输入；B2：对控制输入进行判断，判断控制输入与控制器自给定值的差值的绝对值是否小于控制器自给定值的第一比例系数α％，即|C11-A|＜A×α％，则控制无人挖掘机的行走电机的输出为：UK2＝×K1-A42)×K6，其中B42和A42为行走模式中间变量；K1和K6为固定放大倍数；B3：判断控制无人挖掘机的行走电机的输出与控制器自给定值的大小关系，给无人挖掘机的行走电机的输出进行调整；B4：将增加了可调分量的无人挖掘机的电机的输出输出至行走电机。7.根据权利要求5所述的一种无人挖掘机远程智能控制方法，其特征在于，步骤B2中所述的行走模式中间变量A42的计算过程为：将所述电流环反馈信号AD采样值减去传感器基数得到电流环反馈信号AD校正值，A11＝A1-E1，判断所述电流环反馈信号AD校正值是否大于控制器自给定值，如果A11＞A，则回转模式中间变量A42＝A11×K4×K9，K4为电机正转可调放大倍数，K9为固定放大倍数；如果A11≤A，则回转模式中间变量A42＝A11×K5×K9，K5为电机反转可调放大倍数，并且K4和K5的可调门槛值为V1，回转模式中间变量A42大于第一可调门槛值V1；行走模式中间变量B42的计算过程为：将所述电压环反馈信号AD采样值减去传感器基数得到电压环反馈信号AD校正值，B11＝B1-E2；判断所述电压环反馈信号AD校正值与控制器自给定值的差值的绝对值是否超过控制器自给定值的第二比例系数，|B11-A|≥A×β％，如超过则电压环正转可调放大倍数和电压环反转可调放大倍数均乘上固定放大倍数K8；如电压环反馈信号AD校正值与控制器自给定值的差值的绝对值不超过控制器自给定值的第二比例系数β％，且控制输入与控制器自给定值的差值小于控制器自给定值的第一比例系数，即|B11-A|＜A×β％，且|C11-A|＜A×α％，则将电压环正转可调放大倍数的值调整为K2×K7×K8，将电压环反转可调放大倍数的值调整为K3×K7×K8，K7和K8为固定放大倍数，K2和K3的第二可调门槛值为V2；最后判断当前电压环反馈信号AD校正值是否大于控制器自给定值，如是则回转模式中间变量B42＝B11×K2；否则回转模式中间变量B42＝B11×K3。8.根据权利要求5所述的一种无人挖掘机远程智能控制方法，其特征在于，步骤B3所述给无人挖掘机的行走电机的输出进行调整，是当无人挖掘机的行走电机的输出大于控制器自给定值，且无人挖掘机的行走电机的输出与控制器自给定值的差值大于控制器自给定值的1％时，将/10的结果作为调整后的无人挖掘机的行走电机的输出；当无人挖掘机的行走电机的输出大于控制器自给定值，且无人挖掘机的行走电机的输出与控制器自给定值的差值不大于控制器自给定值的1％时，为当前的无人挖掘机的行走电机的输出增加一个正向可调分量；当控制器自给定值大于无人挖掘机的行走电机的输出，且控制器自给定值与无人挖掘机的行走电机的输出的差值大于控制器自给定值的1％时，将/10的结果作为调整后的无人挖掘机的行走电机的输出；当控制器自给定值大于无人挖掘机的行走电机的输出，且控制器自给定值与无人挖掘机的行走电机的输出的差值不大于控制器自给定值的1％时，为无人挖掘机的行走电机的输出增加一个负向可调分量。
说明书desc
技术领域本发明涉及无人挖掘机控制系统技术领域，尤其涉及一种无人挖掘机远程智能控制方法。背景技术随着市场化需求的不断扩大，无人挖掘机开始逐渐在工程施工中发挥着积极的作用。实现无人操作挖掘机施工，可以帮助用户减少人员投入、降低运营成本、进一步提升施工效率，有效提高无人挖掘机的施工过程安全性。现有的无人挖掘机技术大多采取远程遥控方案，通过目测实际施工工况或者通过采集视频场景判断挖掘机的工作姿态，人为判断施工安全条件的前提下，完成挖掘施工作业过程。由于无人挖掘机操作人员与无人挖掘机现场存在一定距离，且远程操作人员的操作过程会存在操作动作过大、过急的问题，导致挖掘机的挖掘动作存在一定的危险性，会对施工现场的安全带来隐患，但是远程操作人员往往意识不到这个问题。综上所述，提供一种针对无人挖掘机的远程智能控制方法，改善远程控制输入不合理的现象，提供无人挖掘机作业时的安全性和可靠性，是很有必要的。发明内容有鉴于此，本发明提出了一种能够在本地控制和远程输入方式之间切换，并能防止远程输入超过设定阈值导致异常的无人挖掘机远程智能控制方法。本发明的技术方案是这样实现的：本发明提供了一种无人挖掘机远程智能控制方法，包括如下步骤：S1：在无人挖掘机内置的控制器处配置若干传感器，在开机时进行若干传感器的自检，并判断无人挖掘机能正常开机时进入步骤S2；S2：控制器读取工作模式信号，选择无人挖掘机的回转工作模式或者行走工作模式，控制器的控制对象为无人挖掘机的回转电机和行走电机；S3：设置无人挖掘机的控制状态：选择无人挖掘机的控制状态为本控状态或者外控状态；本控状态为控制器通过自给定值就地控制无人挖掘机，外控状态为通过外部输入远程遥控器控制无人挖掘机；S4：在控制器内预置外控状态的输入阈值，当外控状态下的输入超过输入阈值时，无人挖掘机由外控状态切换至本控状态；S5：无人挖掘机基于本控状态或者外控状态，采用自适应PID方法对无人挖掘机的回转电机和行走电机进行控制。在以上技术方案的基础上，优选的，步骤S2所述回转工作模式或者行走工作模式，均是采用电压电流双闭环控制方式，若干传感器分别获取电流环反馈信号AD采样值、电压环反馈信号AD采样值和输入信号AD采样值。优选的，步骤S2所述回转工作模式，具体内容为：A1：将所述输入信号AD采样值C1减去传感器基数E3得到输入信号AD校正值，并判断无人挖掘机是否满足外控状态的要求：如果满足，则控制输入C11采用所述输入信号AD校正值C11＝C1-E3；如果不满足，则控制输入C11切换至控制器自给定值A；控制输入C11即为外控状态下远程遥控器的回转工作模式输入的校准后的结果；此处的控制器自给定值A为本控状态下控制器向无人挖掘机的回转电机的输入；A2：对控制输入C11进行判断，判断控制输入C11与控制器自给定值A的差值的绝对值是否小于控制器自给定值A的第一比例系数α％，即|C11-A|＜A×α％，若不满足，则控制无人挖掘机的回转电机的输出UK1为：UK1＝×K1-A41)×K6，其中B41和A41为回转模式中间变量；K1和K6为固定放大倍数；A3：判断无人挖掘机的回转电机的输出UK1与控制器自给定值A的大小关系，给无人挖掘机的回转电机的输出UK1进行调整；A4：将增加了可调分量的无人挖掘机的电机的输出UK1输出至回转电机。优选的，步骤A2中所述的回转模式中间变量A41的计算过程为：将所述电流环反馈信号AD采样值A1减去传感器基数E1得到电流环反馈信号AD校正值A11，A11＝A1-E1；判断所述电流环反馈信号AD校正值A11是否大于控制器自给定值A，如果A11＞A，则回转模式中间变量A41＝A11×K4，K4为电机正转可调放大倍数；如果A11≤A，则回转模式中间变量A41＝A11×K5，K5为电机反转可调放大倍数，并且K4和K5的第一可调门槛值为V1；所述回转模式中间变量B41的计算过程为：将电压环反馈信号AD采样值B1减去传感器基数E2得到电压环反馈信号AD校正值B11，B11＝B1-E2；判断所述电压环反馈信号AD校正值B11与控制器自给定值A的差值的绝对值是否超过控制器自给定值A的第二比例系数，|B11-A|≥A×β％，如超过则电压环正转可调放大倍数K2和电压环反转可调放大倍数K3保持不变；如电压环反馈信号AD校正值B11与控制器自给定值A的差值的绝对值不超过控制器自给定值A的第二比例系数β％，且控制输入C11与控制器自给定值A的差值小于控制器自给定值A的第一比例系数，即|B11-A|＜A×β％，且|C11-A|＜A×α％，则将电压环正转可调放大倍数K2的值调整为K2×K7，将电压环反转可调放大倍数K3的值调整为K3×K7，K7为固定放大倍数，K2和K3的第二可调门槛值为V2；最后判断当前电压环反馈信号AD校正值B11是否大于控制器自给定值A，如是则回转模式中间变量B41＝B11×K2；否则回转模式中间变量B41＝B11×K3，回转模式中间变量B41大于第二可调门槛值V2。优选的，步骤A3所述给无人挖掘机的回转电机的输出UK1进行调整，是当无人挖掘机的回转电机的输出UK1大于控制器自给定值A，且无人挖掘机的回转电机的输出UK1与控制器自给定值A的差值大于控制器自给定值A的1％时，将/10的结果作为调整后的无人挖掘机的回转电机的输出UK1；当无人挖掘机的回转电机的输出UK1大于控制器自给定值A，且无人挖掘机的回转电机的输出UK1与控制器自给定值A的差值不大于控制器自给定值A的1％时，为当前的无人挖掘机的回转电机的输出UK1增加一个正向可调分量；当无人挖掘机的回转电机的输出UK1小于控制器自给定值A，且控制器自给定值A与无人挖掘机的回转电机的输出UK1的差值大于控制器自给定值A的1％时，将/10的结果作为调整后的无人挖掘机的回转电机的输出UK1；当无人挖掘机的回转电机的输出UK1小于控制器自给定值A，且控制器自给定值A与无人挖掘机的回转电机的输出UK1的差值不大于控制器自给定值A的1％时，为当前的无人挖掘机的回转电机的输出UK1增加一个负向可调分量。优选的，步骤S2所述行走工作模式，具体内容为：B1：将所述输入信号AD采样值C1减去传感器基数E3得到输入信号AD校正值，并判断无人挖掘机是否满足外控状态的要求：如果满足，则控制输入C11采用所述输入信号AD校正值C11＝C1-E3；如果不满足，则控制输入C11切换至控制器自给定值A；控制输入C11即为外控状态下远程遥控器的行走工作模式输入的校准后的结果；此处的控制器自给定值A为本控状态下控制器向无人挖掘机的行走电机的输入；B2：对控制输入C11进行判断，判断控制输入C11与控制器自给定值A的差值的绝对值是否小于控制器自给定值A的第一比例系数α％，即|C11-A|＜A×α％，则控制无人挖掘机的行走电机的输出UK2为：UK2＝×K1-A42)×K6，其中B42和A42为行走模式中间变量；K1和K6为固定放大倍数；B3：判断控制无人挖掘机的行走电机的输出UK2与控制器自给定值A的大小关系，给无人挖掘机的行走电机的输出UK2进行调整；B4：将增加了可调分量的无人挖掘机的电机的输出UK2输出至行走电机。进一步优选的，步骤B2中所述的行走模式中间变量A42的计算过程为：将所述电流环反馈信号AD采样值A1减去传感器基数E1得到电流环反馈信号AD校正值A11，A11＝A1-E1，判断所述电流环反馈信号AD校正值A11是否大于控制器自给定值A，如果A11＞A，则回转模式中间变量A42＝A11×K4×K9，K4为电机正转可调放大倍数，K9为固定放大倍数；如果A11≤A，则回转模式中间变量A42＝A11×K5×K9，K5为电机反转可调放大倍数，并且K4和K5的可调门槛值为V1，回转模式中间变量A42大于第一可调门槛值V1；行走模式中间变量B42的计算过程为：将所述电压环反馈信号AD采样值B1减去传感器基数E2得到电压环反馈信号AD校正值B11，B11＝B1-E2；判断所述电压环反馈信号AD校正值B11与控制器自给定值A的差值的绝对值是否超过控制器自给定值A的第二比例系数，|B11-A|≥A×β％，如超过则电压环正转可调放大倍数K2和电压环反转可调放大倍数K3均乘上固定放大倍数K8；如电压环反馈信号AD校正值B11与控制器自给定值A的差值的绝对值不超过控制器自给定值A的第二比例系数β％，且控制输入C11与控制器自给定值A的差值小于控制器自给定值A的第一比例系数，即|B11-A|＜A×β％，且|C11-A|＜A×α％，则将电压环正转可调放大倍数K2的值调整为K2×K7×K8，将电压环反转可调放大倍数K3的值调整为K3×K7×K8，K7和K8为固定放大倍数，K2和K3的第二可调门槛值为V2；最后判断当前电压环反馈信号AD校正值B11是否大于控制器自给定值A，如是则回转模式中间变量B42＝B11×K2；否则回转模式中间变量B42＝B11×K3。优选的，步骤B3所述给无人挖掘机的行走电机的输出UK2进行调整，是当无人挖掘机的行走电机的输出UK2大于控制器自给定值A，且无人挖掘机的行走电机的输出UK2与控制器自给定值A的差值大于控制器自给定值A的1％时，将/10的结果作为调整后的无人挖掘机的行走电机的输出UK2；当无人挖掘机的行走电机的输出UK2大于控制器自给定值A，且无人挖掘机的行走电机的输出UK2与控制器自给定值A的差值不大于控制器自给定值A的1％时，为当前的无人挖掘机的行走电机的输出UK2增加一个正向可调分量；当控制器自给定值A大于无人挖掘机的行走电机的输出UK2，且控制器自给定值A与无人挖掘机的行走电机的输出UK2的差值大于控制器自给定值A的1％时，将/10的结果作为调整后的无人挖掘机的行走电机的输出UK2；当控制器自给定值A大于无人挖掘机的行走电机的输出UK2，且控制器自给定值A与无人挖掘机的行走电机的输出UK2的差值不大于控制器自给定值A的1％时，为无人挖掘机的行走电机的输出UK2增加一个负向可调分量。优选的，步骤A2或者步骤B2中的第一比例系数α％的取值为2％。优选的，步骤A2或者步骤B2中的第二比例系数β％的取值为5％。本发明提供的一种无人挖掘机远程智能控制方法，相对于现有技术，具有以下有益效果：本申请将无人挖掘机设置了两种不同的工作模式，以及本地控制的本控状态和远程控制的外控状态两种工作状态，对外控状态的输入进行限定，防止因外控状态输入异常导致无人挖掘机动作过大导致的安全隐患，提高无人挖掘机的可靠性和安全性；进一步限定了不同的工作模式的中间变量的求解过程和各电机的输出进行微调的内容，更好的实现自适应PID方法对无人挖掘机的控制。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明一种无人挖掘机远程智能控制方法的流程图；图2为本发明一种无人挖掘机远程智能控制方法的回转控制流程图；图3为本发明一种无人挖掘机远程智能控制方法的行走控制流程图。具体实施方式下面将结合本发明实施方式，对本发明实施方式中的技术方案进行清楚、完整地描述，显然，所描述的实施方式仅仅是本发明一部分实施方式，而不是全部的实施方式。基于本发明中的实施方式，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施方式，都属于本发明保护的范围。如图1所示，本发明提供了一种无人挖掘机远程智能控制方法，包括如下步骤：S1：在无人挖掘机内置的控制器处配置若干传感器，在开机时进行若干传感器的自检，并判断无人挖掘机能正常开机时进入步骤S2；本申请的控制器采用S2：控制器读取工作模式信号，选择无人挖掘机的回转工作模式或者行走工作模式，控制器的控制对象为无人挖掘机的回转电机和行走电机；可以根据需要随时切换回转工作模式和行走工作模式。回转工作模式或者行走工作模式，均是采用电压电流双闭环控制方式，若干传感器分别获取电流环反馈信号AD采样值A1、电压环反馈信号AD采样值B1和输入信号AD采样值C1。本申请中，传感器共有三个，分别配置为A路、B路和C路，A路对应的为电流环反馈信号，其获取的电流环反馈的采样信号通过AD转换后对应的AD采样值为A1；同理，B路对应的为电压环反馈信号，其获取的电压环反馈的采样信号通过AD转换后对应的AD采样值为B1；C路对应的是输入信号，即外控状态下遥控器输入，通过AD转换后对应的AD采样值为C1。1、回转工作模式，具体内容为：A1：将所述输入信号AD采样值C1减去传感器基数E3，传感器基数E3是传感器标准物理参考值，通过查表或者特性曲线获得，得到输入信号AD校正值，并判断无人挖掘机是否满足外控状态的要求：如果满足，则控制输入C11采用所述输入信号AD校正值C11＝C1-E3，即控制输入C11依赖外控状态下遥控器输入；如果不满足，则控制输入C11切换至控制器自给定值A；控制输入C11即为外控状态下远程遥控器的回转工作模式输入的校准后的结果；此处的控制器自给定值A为本控状态下控制器向无人挖掘机的回转电机的输入；本申请中控制器自给定值A可以给定为整数值，如2000。A2：对控制输入C11进行判断，判断控制输入C11与控制器自给定值A的差值的绝对值是否小于控制器自给定值A的第一比例系数α％，即|C11-A|＜A×α％，若不满足，则控制无人挖掘机的回转电机的输出UK1为：UK1＝×K1-A41)×K6，其中B41和A41为回转模式中间变量；K1和K6为固定放大倍数；如图2所示，令图中的中间变量M＝C11-A，C4＝×K1，C5＝C4-A41则无人挖掘机的回转电机的输出UK1的表达式改写为UK1＝C5×K6。如果M的绝对值不超过控制器自给定值A的第一比例系数α％，则进一步判断是否需要调整电压环正转可调放大倍数K2和电压环反转可调放大倍数K3。引入中间变量P＝B11-A，电压环反馈信号AD校正值B11是将电压环反馈信号AD采样值B1减去传感器基数E2得到的，B11＝B1-E2；根据中间变量P与控制器自给定值A的差值与控制器自给定值A的第二比例系数β％的关系，决定电压环正转可调放大倍数K2和电压环反转可调放大倍数K3维持不变或者进行调整，然后采用中间变量P对比后的电压环正转可调放大倍数K2和电压环反转可调放大倍数K3值求取B41，并进一步求取C11-B41的结果，来计算无人挖掘机的回转电机的输出UK1；如果P-A的绝对值超过控制器自给定值A的第二比例系数β％，则对K2和K3的值进行更新。如果P-A的绝对值不超过控制器自给定值A的第二比例系数β％，则K2和K3的值保持不变。如果M的绝对值超过控制器自给定值A的第一比例系数α％，无需考虑中间变量P，根据当前电压环正转可调放大倍数K2和电压环反转可调放大倍数K3的值求取B41，并进一步求取C11-B41的结果，来计算无人挖掘机的回转电机的输出UK1。具体的，回转模式中间变量A41的计算过程为：将所述电流环反馈信号AD采样值A1减去传感器基数E1得到电流环反馈信号AD校正值A11，A11＝A1-E1；判断电流环反馈信号AD校正值A11是否大于控制器自给定值A，如果A11＞A，则回转模式中间变量A41＝A11×K4，K4为电机正转可调放大倍数；如果A11≤A，则回转模式中间变量A41＝A11×K5，K5为电机反转可调放大倍数，并且K4和K5的第一可调门槛值为V1；可将第一可调门槛值V1的初始值设为100，调节步长为30，调节次数为25。回转模式中间变量B41的计算过程为：判断所述电压环反馈信号AD校正值B11与控制器自给定值A的差值的绝对值是否超过控制器自给定值A的第二比例系数，P＝|B11-A|≥A×β％，且|C11-A|＜A×α％，如满足则电压环正转可调放大倍数K2和电压环反转可调放大倍数K3保持不变；如电压环反馈信号AD校正值B11与控制器自给定值A的差值的绝对值不超过控制器自给定值A的第二比例系数β％，且控制输入C11与控制器自给定值A的差值小于控制器自给定值A的第一比例系数，即P＝|B11-A|＜A×β％，且|C11-A|＜A×α％，则将电压环正转可调放大倍数K2的值调整为K2×K7，将电压环反转可调放大倍数K3的值调整为K3×K7，K7为固定放大倍数，K2和K3的第二可调门槛值为V2；V2的初始值为5，调节步长为30，调节次数为25。本申请中，可令第一比例系数α％的取值为2％，第二比例系数β％的取值为5％。最后判断当前电压环反馈信号AD校正值B11是否大于控制器自给定值A，如是则回转模式中间变量B41＝B11×K2；否则回转模式中间变量B41＝B11×K3，回转模式中间变量B41大于第二可调门槛值V2时，才将中间变量B41的结果输出至中间变量M的更新环节。A3：判断无人挖掘机的回转电机的输出UK1与控制器自给定值A的大小关系，给无人挖掘机的回转电机的输出UK1进行调整；参照图2的下半部分，当无人挖掘机的回转电机的输出UK1大于控制器自给定值A，且无人挖掘机的回转电机的输出UK1与控制器自给定值A的差值大于控制器自给定值A的1％时，即UK1-A＞A×1％，将/10的结果作为调整后的无人挖掘机的回转电机的输出UK1，当然还可以进一步判断无人挖掘机的回转电机的输出UK1与设定的输出极值Amax的关系，如果无人挖掘机的回转电机的输出UK1不超过设定的输出极值Amax，则保持当前输出不变；当无人挖掘机的回转电机的输出UK1大于控制器自给定值A，且无人挖掘机的回转电机的输出UK1与控制器自给定值A的差值不大于控制器自给定值A的1％时，即UK2-A≤A×1％，为当前的无人挖掘机的回转电机的输出UK1增加一个正向可调分量。当无人挖掘机的回转电机的输出UK1小于控制器自给定值A，且控制器自给定值A与无人挖掘机的回转电机的输出UK1的差值大于控制器自给定值A的1％时，即A-UK1＞A×1％，将/10的结果作为调整后的无人挖掘机的回转电机的输出UK1；当无人挖掘机的回转电机的输出UK1小于控制器自给定值A，且控制器自给定值A与无人挖掘机的回转电机的输出UK1的差值不大于控制器自给定值A的1％时，为当前的无人挖掘机的回转电机的输出UK1增加一个负向可调分量。A4：将增加了可调分量的无人挖掘机的回转电机的输出UK1输出至回转电机。上述输出极值Amax，控制器自给定值A的极值均存储在控制器中。实现图1的控制过程1。2、行走工作模式，具体内容为：B1：将所述输入信号AD采样值C1减去传感器基数E3得到输入信号AD校正值，并判断无人挖掘机是否满足外控状态的要求：如果满足，则控制输入C11采用所述输入信号AD校正值C11＝C1-E3；如果不满足，则控制输入C11切换至控制器自给定值A；控制输入C11即为外控状态下远程遥控器的行走工作模式输入的校准后的结果；此处的控制器自给定值A为本控状态下控制器向无人挖掘机的行走电机的输入；默认无人挖掘机的回转工作模式与行走工作模式是择一进行的。B2：对控制输入C11进行判断，判断控制输入C11与控制器自给定值A的差值的绝对值是否小于控制器自给定值A的第一比例系数α％，即|C11-A|＜A×α％，则控制无人挖掘机的行走电机的输出UK2为：UK2＝×K1-A42)×K6，其中B42和A42为行走模式中间变量；K1和K6为固定放大倍数；同样可以令中间变量M＝C11-A。只不过这里的M为行走模式下的中间变量。与中间变量A41和B41类似的，中间变量A42的计算过程为：将所述电流环反馈信号AD采样值A1减去传感器基数E1得到电流环反馈信号AD校正值A11，A11＝A1-E1，判断所述电流环反馈信号AD校正值A11是否大于控制器自给定值A，如果A11＞A，则回转模式中间变量A42＝A11×K4×K9，K4为电机正转可调放大倍数，K9为固定放大倍数；如果A11≤A，则回转模式中间变量A42＝A11×K5×K9，K5为电机反转可调放大倍数，并且K4和K5的可调门槛值为V1，回转模式中间变量A42大于第一可调门槛值V1。同样的，第一可调门槛值V1的初始值设为100，调节步长为30，调节次数为25。选择合适的A42参与无人挖掘机的行走电机的输出UK2的后续计算。行走模式中间变量B42的计算过程为：将所述电压环反馈信号AD采样值B1减去传感器基数E2得到电压环反馈信号AD校正值B11，B11＝B1-E2；判断所述电压环反馈信号AD校正值B11与控制器自给定值A的差值的绝对值是否超过控制器自给定值A的第二比例系数，|B11-A|≥A×β％，如超过则电压环正转可调放大倍数K2和电压环反转可调放大倍数K3均乘上固定放大倍数K8；如电压环反馈信号AD校正值B11与控制器自给定值A的差值的绝对值不超过控制器自给定值A的第二比例系数β％，且控制输入C11与控制器自给定值A的差值小于控制器自给定值A的第一比例系数，即|B11-A|＜A×β％，且|C11-A|＜A×α％，则将电压环正转可调放大倍数K2的值调整为K2×K7×K8，将电压环反转可调放大倍数K3的值调整为K3×K7×K8，K7和K8为固定放大倍数，K2和K3的第二可调门槛值为V2；V2的初始值为5，调节步长为30，调节次数为25。第一比例系数和第二比例系数的取值如前所述，在此不再赘述。最后判断当前电压环反馈信号AD校正值B11是否大于控制器自给定值A，如是则回转模式中间变量B42＝B11×K2；否则回转模式中间变量B42＝B11×K3。行走模式中间变量B42大于第二可调门槛值V2时，才将行走模式中间变量B42的结果输出至中间变量M的更新环节以及人挖掘机的行走电机的输出UK2的后续计算。B3：判断控制无人挖掘机的行走电机的输出UK2与控制器自给定值A的大小关系，给无人挖掘机的行走电机的输出UK2进行调整。具体的，当无人挖掘机的行走电机的输出UK2大于控制器自给定值A，且无人挖掘机的行走电机的输出UK2与控制器自给定值A的差值大于控制器自给定值A的1％时，即UK2-A＞A×1％，将/10的结果作为调整后的无人挖掘机的行走电机的输出UK2；当然还可以进一步判断无人挖掘机的行走电机的输出UK2与设定的输出极值Amax的关系，如果无人挖掘机的行走电机的输出UK2不超过设定的输出极值Amax，则保持当前输出不变；当无人挖掘机的行走电机的输出UK2大于控制器自给定值A，且无人挖掘机的行走电机的输出UK2与控制器自给定值A的差值不大于控制器自给定值A的1％时，即UK2-A≤A×1％，为当前的无人挖掘机的行走电机的输出UK2增加一个正向可调分量；图中的A1即为增加了正向可调分量后的UK2。当控制器自给定值A大于无人挖掘机的行走电机的输出UK2，且控制器自给定A与无人挖掘机的行走电机的输出UK2的差值大于控制器自给定值A的1％时，即A-UK2＞A×1％，将/10的结果作为调整后的无人挖掘机的行走电机的输出UK2；当控制器自给定值A大于无人挖掘机的行走电机的输出UK2，且控制器自给定值A与无人挖掘机的行走电机的输出UK2的差值不大于控制器自给定值A的1％时，即A-UK2≤A×1％为无人挖掘机的行走电机的输出UK2增加一个负向可调分量，图在的A2即为增加了负向可调分量后的UK2。需要说明的是，对于无人挖掘机的回转电机的输出UK1和无人挖掘机的行走电机的输出UK2，增加的正向分量或者负向分量的大小不完全相等，即图2和图3中的A1和A2的取值并不完全相等，仅附图标记和操作方法相同。B4：将增加了可调分量的无人挖掘机的电机的输出UK2输出至行走电机。实现图1的控制过程2。S3：设置无人挖掘机的控制状态：选择无人挖掘机的控制状态为本控状态或者外控状态；本控状态为控制器通过自给定值就地控制无人挖掘机，外控状态为通过外部输入远程遥控器控制无人挖掘机；但是远程的外控状态存在缺点，即输入延时，操作人员输入的指令的数字过大，导致无人挖掘机动作幅度超出安全阈值范围，因此必须对这种情形进行约束。结合上述传感器就是为了对回转电机和行走电机的输入信号和输出信号形成闭环反馈，实时监控回转电机和行走电机的输入信号和输出信号的相应关系。安全阈值即上述步骤中提到的回转工作模式或者行走工作模式下的输出极值Amax，控制器自给定值A的极值。S4：在控制器内预置外控状态的输入阈值，当外控状态下的输入超过输入阈值时，无人挖掘机由外控状态切换至本控状态；控制器根据外控状态的输入，判断外控状态的输入是否超过输入阈值，如没有超过输入阈值，则采用当前外控输入的信号，如超过了输入阈值，则切换为本控状态，防止突变的非法输入导致无人挖掘机动作过大，引发潜在的安全风险；S5：无人挖掘机基于本控状态或者外控状态，采用自适应PID方法对无人挖掘机的回转电机和行走电机进行控制。以上所述仅为本发明的较佳实施方式而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
