标题title
一种基于视频识别的煤矿水害预警系统
摘要abst
本发明公开了一种基于视频识别的煤矿水害预警系统，包括多个摄像头，多个摄像头均连接视频采集卡，视频采集卡连接水害处理单元，水害处理单元设有控制中心，控制中心连接有报警系统，水害处理单元还设有信息管理系统；控制中心还连接有突水监测单元，突水监测单元包括钻孔旁设置的背板和顶板，顶板上设有的摄像机，摄像机一侧设有激光模组，激光模组连接有电机，电机驱动激光模组，控制中心设有电源模块供电，控制中心通过设置的无线通信模块将突水数据发送至信息管理系统的服务器端，进行数据存储。
权利要求书clms
1.一种基于视频识别的煤矿水害预警系统，其特征在于，包括多个摄像头，多个摄像头均连接视频采集卡，视频采集卡连接水害处理单元，水害处理单元设有控制中心，控制中心连接有报警系统，水害处理单元还设有信息管理系统；控制中心还连接有突水监测单元，突水监测单元包括钻孔旁设置的背板和顶板，顶板上设有的摄像机，摄像机一侧设有激光模组，激光模组连接有电机，电机驱动激光模组，控制中心设有电源模块供电，控制中心通过设置的无线通信模块将突水数据发送至信息管理系统的服务器端，进行数据存储。2.根据权利要求1所述的一种基于视频识别的煤矿水害预警系统，其特征在于，所述水害处理单元包括图像预处理、特征提取和图像识别；图像预处理包括图像增强和图像分割，对质量不高的图像进行增强，并对目标进行分割，提取出目标区域；特征提取部分是在前面图像分割的基础上针对水害图像特点提取动静态特征，图像识别是根据提取的动静态特征并结合算法进行水害检测，根据模式识别的方法对突水预兆和干扰物进行分类识别，最后输出处理结果。3.根据权利要求2所述的一种基于视频识别的煤矿水害预警系统，其特征在于，图像增强的方法采用镜像变换、旋转变换、亮度对比度调整；图像的镜像变换可分为水平镜像、垂直镜像和对角镜像三种；水平镜像指的是以图像垂直中线为准，把图像左右两边的内容调换；垂直镜像是以水平中轴线为中心将图像上下两部分内容进行交换，而对角镜像为水平和垂直镜像的结合。4.根据权利要求3所述的一种基于视频识别的煤矿水害预警系统，其特征在于，旋转变换是将图像按照某一点旋转指定的角度，旋转后的图像不会变形，但原图像的垂直对称轴和水平对称轴会改变，旋转后的图像的坐标与原坐标关系通过运算得到，旋转后图像的宽高和坐标原点都会发生变化；在执行时，镜像变换和旋转变换通过一定的概率执行，且变换方式、旋转角度在一定范围内随机。5.根据权利要求3所述的一种基于视频识别的煤矿水害预警系统，其特征在于，亮度对比度调整是将图像像素的强度整体变大或变小，对比度的调整指的是让图像亮暗处的像素强度差距更大，以拓宽某个区域内显示精度。6.根据权利要求1所述的一种基于视频识别的煤矿水害预警系统，其特征在于，控制中心主要由监控服务器、监控客户终端等组成，通过网络交换机与服务器、计算机连接，它可对来自于不同监控点的实时视频信号进行接收、存储等，它对图像处理单元输出的结果进行处理。7.根据权利要求1所述的一种基于视频识别的煤矿水害预警系统，其特征在于，控制中心与各报警系统均有联动功能，即当某一个报警系统的某一点出现报警信号，视频监控的相关监控摄像头将自动转向报警信号发出点进行实时录像采集，与此同时地面监测安全管理中心的主机页面将跳出报警点的视频图像并伴有蜂鸣报警声音，使地面安全管理人员第一时间发现安全隐患及时报与井下工作人员排除险情避免事故的发生。8.根据权利要求1所述的一种基于视频识别的煤矿水害预警系统，其特征在于，信息管理中心可以将水灾图像处理单元的处理结果及视频监控信息显示于计算机并输送至数据库进行存储，用于观察和历史信息查询。9.根据权利要求1所述的一种基于视频识别的煤矿水害预警系统，其特征在于，所述突水监测单元监测突水的方法包括，S1，钻井突水发生时，摄像机开始录制，激光模组在此时也开始工作，激光头以PWM调压启动的方式启动，照射红色激光点在背板顶端位置；S2，控制中心控制电机通过机械传动结构与激光模组相连，使激光模组顺时针缓慢转动，使背板上由激光模组照射的激光点由顶端缓慢向下移动至突水水柱的最高点，当激光点移动至设置的最低点时，电机反向转动，带动激光点迅速回到背板顶端初始位置，摄像机停止录制；S3，将录制的视频信息传输至控制中心，对采集到的视频进行处理，识别出激光点在视频图像中的轨迹，计算得到水位高度；最后通过无线通信的方式将突水数据与突水水柱图像发送至信息管理系统的服务器，并保存。
说明书desc
技术领域本发明属于煤矿水害预警技术领域，尤其涉及一种基于视频识别的煤矿水害预警系统。背景技术由于井下采掘活动破坏了地下岩体的天然平衡状态，采掘工作面周围水体在静水压力和矿山压力作用下，通过断层、隔水层以及岩层薄弱处进入采掘工作面，形成矿井突水。这一现象的发生与发展是一个逐渐变化的过程，有的表现很快，有的表现较慢，这与工作面具体位置、采场地质情况、水压力和矿山压力大小有关。从开拓工作面开始，到突水这段时间内，在工作面及其附近会显示出某些异常现象，这些异常统称突水预兆。识别和掌握这些预兆，可以及时采取应急措施，撤离险区人员，防止伤人事故。在矿井建设及生产过程中，需要大量的水进行井下的除尘及消防；在矿井上水平巷道向下水平巷道内施工大口径工程孔，作为溜煤井，电缆井或管道井使用。当矿井开采工作面埋深较深，又距离含水层较近时，利用矿井井下的大口径钻孔供水，比利用地面水井供水要更加经济，但是对于大口径钻孔往往也容易发生涌水或突水事件，给生产带来安全隐患，严重还会造成工作面被水淹没的事故，因此需要对钻孔进行监测，及时处理钻孔突水事件，保证生产安全。发明内容针对现有技术不足，本发明的目的在于提供了一种基于视频识别的煤矿水害预警系统，解决了背景技术中提出的问题。本发明提供如下技术方案：一种基于视频识别的煤矿水害预警系统，包括多个摄像头，多个摄像头均连接视频采集卡，视频采集卡连接水害处理单元，水害处理单元设有控制中心，控制中心连接有报警系统，水害处理单元还设有信息管理系统；控制中心还连接有突水监测单元，突水监测单元包括钻孔旁设置的背板和顶板，顶板上设有的摄像机，摄像机一侧设有激光模组，激光模组连接有电机，电机驱动激光模组，控制中心设有电源模块供电，控制中心通过设置的无线通信模块将突水数据发送至信息管理系统的服务器端，进行数据存储。优选的，所述水害处理单元包括图像预处理、特征提取和图像识别；图像预处理包括图像增强和图像分割，对质量不高的图像进行增强，并对目标进行分割，提取出目标区域；特征提取部分是在前面图像分割的基础上针对水害图像特点提取动静态特征，图像识别是根据提取的动静态特征并结合算法进行水害检测，根据模式识别的方法对突水预兆和干扰物进行分类识别，最后输出处理结果。优选的，图像增强的方法采用镜像变换、旋转变换、亮度对比度调整；图像的镜像变换可分为水平镜像、垂直镜像和对角镜像三种；水平镜像指的是以图像垂直中线为准，把图像左右两边的内容调换；垂直镜像是以水平中轴线为中心将图像上下两部分内容进行交换，而对角镜像为水平和垂直镜像的结合。优选的，旋转变换是将图像按照某一点旋转指定的角度，旋转后的图像不会变形，但原图像的垂直对称轴和水平对称轴会改变，旋转后的图像的坐标与原坐标关系通过运算得到，旋转后图像的宽高和坐标原点都会发生变化；在执行时，镜像变换和旋转变换通过一定的概率执行，且变换方式、旋转角度在一定范围内随机。优选的，亮度对比度调整是将图像像素的强度整体变大或变小，对比度的调整指的是让图像亮暗处的像素强度差距更大，以拓宽某个区域内显示精度。优选的，控制中心主要由监控服务器、监控客户终端等组成，通过网络交换机与服务器、计算机连接，它可对来自于不同监控点的实时视频信号进行接收、存储等，它对图像处理单元输出的结果进行处理。优选的，控制中心与各报警系统均有联动功能，即当某一个报警系统的某一点出现报警信号，视频监控的相关监控摄像头将自动转向报警信号发出点进行实时录像采集，与此同时地面监测安全管理中心的主机页面将跳出报警点的视频图像并伴有蜂鸣报警声音，使地面安全管理人员第一时间发现安全隐患及时报与井下工作人员排除险情避免事故的发生。优选的，信息管理中心可以将水灾图像处理单元的处理结果及视频监控信息显示于计算机并输送至数据库进行存储，用于观察和历史信息查询。优选的，所述突水监测单元监测突水的方法包括，S1，钻井突水发生时，摄像机开始录制，激光模组在此时也开始工作，激光头以PWM调压启动的方式启动，照射红色激光点在背板顶端位置；S2，控制中心控制电机通过机械传动结构与激光模组相连，使激光模组顺时针缓慢转动，使背板上由激光模组照射的激光点由顶端缓慢向下移动至突水水柱的最高点，当激光点移动至设置的最低点时，电机反向转动，带动激光点迅速回到背板顶端初始位置，摄像机停止录制；S3，将录制的视频信息传输至控制中心，对采集到的视频进行处理，识别出激光点在视频图像中的轨迹，计算得到水位高度；最后通过无线通信的方式将突水数据与突水水柱图像发送至信息管理系统的服务器，并保存。另外，图像的水平镜像变换满足公式，其逆变公式满足，垂直镜像变换公式满足，/＞逆变公式为，上式中，w、h为摄像机采集图像的宽和高，为原图像的坐标，为变换后的坐标，通过以上方法，对于一些出水未充满的图像执行镜像变换后，水流的方向有所改变，可以起到多样化水流形态，丰富数据集的作用。图像在旋转变换的过程中，将坐标系变换到以旋转中心为原点后，坐标以顺时针旋转角度a，得到旋转后的坐标记为，两个坐标的坐标值公式满足：在突水的出水形状不固定，旋转变换同样是为了使水流形态多样化，丰富特征，提高目标图像和背景的对比度，使目标区域的视觉效果以及识别特征更突出。由于采集的图像信息不可能包含所有实际场景下的光照，对原图像的亮度和对比度进行一些调整和变换可增加数据集的丰富性，使最终训练出的模型泛化能力更好，适应更多煤尘检测应用场景下的需求，亮度和对比度的调整表示为：g＝a*f+b；上式中，f为原图像素，g为输出图像像素，a为调整对比度的增益，a＞0；b为调整图像亮度的偏置；为第i行和第j列的像素能够表达为g＝a*f+b；为尽可能多得模拟不同光照下的煤尘图像，亮度对比度的调整也是在一定范围内的，即由一定概率将图像亮度对比度调低或调高，也有一定概率使图像的亮度和对比度保持不变，调整范围和概率能够根据需要指定。另外，利用阈值分割法、视频差分分割法等方法对水灾区域图像分割，集成水文基础数据，根据不同的突水水源分析蔓延趋势，将突水区域从煤岩等背景图像中分离出来；并根据二值图像的像素数量进行突水面积估算及趋势预测，水灾区域图像分割后，可以将视频动态目标区域与背景图像进行分离，得到一个二值图像，如fk为视频第k帧图像，像素分辨率为M×N，则目标分割后，目标图像gk为第k帧图像分割后，可以根据二值图像的像素数量进行突水面积估算。n255代表灰度值为255的像素数量，相对突水面积可用/＞表征，可与实际面积进行拟合。对于突水趋势的预测，突水面积的估算可以按照图像面积比例进行估算，则突水面积扩张速度可用表征，其中T为视频第k帧采集图像和第帧采集图像的间隔时间。水灾面积扩张速度可以表征突水趋势，水灾面积扩张速度越快，说明水势越凶猛，突水量越大。另外，突水监测单元在突水时，摄像机采集激光模组的光斑图像后，进行目标检测的识别和跟踪算法的计算处理之后，可以得到图像序列中提取到的光斑的数量、大小、形状、移动轨迹信息，由于光的反射与折射，光斑在图像序列中的数量变化情况并不总是一个背板光斑和一个水面反射光斑，还可能由于水面波动导致的目标光斑与动光斑同时存在的情况，会导致后续计算出现误差，为了避免上述情况发生，准确分辨背板直射光斑与水面反射光斑，对光斑目标跟踪后的图像光斑数据进行分析，具体方法为，第一步，在整幅图像中随机选取K个对象作为聚类质心，本方法为了将图像光斑依据水位线以上和水位线以下进行分类，取K＝2；第二步，分别计算光斑对象与聚类质心的曼哈顿距离；第三步，假设光斑对象共有N个，对于每一个对象，找到距离它最近的质心作为标签，若N＝1，则直接分为一类，分类结束；第四步，对于同样标签的类，更新其质心；第五步，重复第三步和第四步，不断划分新的聚类，计算新的质心，直至新的质心和上一次计算的质心相同或差距小于设定的阈值，分类结束，记录此时两类光斑的质心位置；光斑图像经过分类后可得到直射激光点类与反射激光点类的移动轨迹，将这两类质心的移动轨迹作为直射与反射光斑的移动轨迹坐标。突水水柱高度计算过程中，构建几何关系图，经过图像水位判别方法后得到的水位在图像中的位置为Y，此处像素值即为AC的长度。摄像机采集图像为640*480像素大小，图像纵向长度AD为480像素，摄像机的广角为41.41°，图像中水位以上部分的角度∠AEC即α的大小满足：α＝·41.41°；摄像机的位置为E,EA,ED为摄像机的广角其视野最高点为A，支架拐角处为Q。标尺测量得到AQ与EQ的长度，则∠AEQ即β满足：β＝arctan；在三角形EQY中，根据正切定理能够得到突水水柱以上背板的高度QY，QY＝EQ·tan；根据背板的高度QX，背板底端与钻井位于同一平面，能够得到突水水柱的高度即为XY，XY＝QX-QY；控制中心设定一个固定值作为钻孔的安全突水高度阈值，一旦实际突水高度超过设定阈值，报警系统发出警报。与现有技术相比，本发明具有以下有益效果：本发明一种基于视频识别的煤矿水害预警系统，通过视频识别采集矿井内的突水信息，并进行分析处理，通过控制中心与各报警系统均有联动功能，即当某一个报警系统的某一点出现报警信号，视频监控的相关监控摄像头将自动转向报警信号发出点进行实时录像采集，与此同时地面监测安全管理中心的主机页面将跳出报警点的视频图像并伴有蜂鸣报警声音，使地面安全管理人员第一时间发现安全隐患及时报与井下工作人员排除险情避免事故的发生。突水检测单元能够监测井下钻孔突水的高度，一旦实际突水高度超过设定阈值，报警系统发出警报；同时还通过设置的方法避免了由于水面波动导致的目标光斑与动光斑同时存在的情况，降低后续计算出现误差，提升突水高度监测的准确性。附图说明为了更清楚地说明本发明实施方式的技术方案，下面将对实施方式中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本发明的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1是本发明的系统框图。图2是本发明的突水监测单元控制系统框图。图3是本发明的突水高度计算的几何关系图。具体实施方式为使本发明实施方式的目的、技术方案和优点更加清楚，下面将结合本发明实施方式中的附图，对本发明实施方式中的技术方案进行清楚、完整地描述。显然，所描述的实施方式是本发明一部分实施方式，而不是全部的实施方式。基于本发明中的实施方式，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施方式，都属于本发明保护的范围。因此，以下对在附图中提供的本发明的实施方式的详细描述并非旨在限制要求保护的本发明的范围，而是仅仅表示本发明的选定实施方式。基于本发明中的实施方式，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施方式，都属于本发明保护的范围。实施例一：如图1-2所示，一种基于视频识别的煤矿水害预警系统，包括多个摄像头，多个摄像头均连接视频采集卡，视频采集卡连接水害处理单元，水害处理单元设有控制中心，控制中心连接有报警系统，水害处理单元还设有信息管理系统；所述水害处理单元包括图像预处理、特征提取和图像识别；图像预处理包括图像增强和图像分割，对质量不高的图像进行增强，并对目标进行分割，提取出目标区域；特征提取部分是在前面图像分割的基础上针对水害图像特点提取动静态特征，图像识别是根据提取的动静态特征并结合算法进行水害检测，根据模式识别的方法对突水预兆和干扰物进行分类识别，最后输出处理结果。图像增强的方法采用镜像变换、旋转变换、亮度对比度调整；图像的镜像变换可分为水平镜像、垂直镜像和对角镜像三种；水平镜像指的是以图像垂直中线为准，把图像左右两边的内容调换；垂直镜像是以水平中轴线为中心将图像上下两部分内容进行交换，而对角镜像为水平和垂直镜像的结合。旋转变换是将图像按照某一点旋转指定的角度，旋转后的图像不会变形，但原图像的垂直对称轴和水平对称轴会改变，旋转后的图像的坐标与原坐标关系通过运算得到，旋转后图像的宽高和坐标原点都会发生变化；在执行时，镜像变换和旋转变换通过一定的概率执行，且变换方式、旋转角度在一定范围内随机。亮度对比度调整是将图像像素的强度整体变大或变小，对比度的调整指的是让图像亮暗处的像素强度差距更大，以拓宽某个区域内显示精度。控制中心主要由监控服务器、监控客户终端等组成，通过网络交换机与服务器、计算机连接，它可对来自于不同监控点的实时视频信号进行接收、存储等，它对图像处理单元输出的结果进行处理。控制中心与各报警系统均有联动功能，即当某一个报警系统的某一点出现报警信号，视频监控的相关监控摄像头将自动转向报警信号发出点进行实时录像采集，与此同时地面监测安全管理中心的主机页面将跳出报警点的视频图像并伴有蜂鸣报警声音，使地面安全管理人员第一时间发现安全隐患及时报与井下工作人员排除险情避免事故的发生。信息管理中心可以将水灾图像处理单元的处理结果及视频监控信息显示于计算机并输送至数据库进行存储，用于观察和历史信息查询。图像的水平镜像变换满足公式，其逆变公式满足，垂直镜像变换公式满足，/＞逆变公式为，上式中，w、h为摄像机采集图像的宽和高，为原图像的坐标，为变换后的坐标，通过以上方法，对于一些出水未充满的图像执行镜像变换后，水流的方向有所改变，可以起到多样化水流形态，丰富数据集的作用。图像在旋转变换的过程中，将坐标系变换到以旋转中心为原点后，坐标以顺时针旋转角度a，得到旋转后的坐标记为，两个坐标的坐标值公式满足：在突水的出水形状不固定，旋转变换同样是为了使水流形态多样化，丰富特征，提高目标图像和背景的对比度，使目标区域的视觉效果以及识别特征更突出。由于采集的图像信息不可能包含所有实际场景下的光照，对原图像的亮度和对比度进行一些调整和变换可增加数据集的丰富性，使最终训练出的模型泛化能力更好，适应更多煤尘检测应用场景下的需求，亮度和对比度的调整表示为：g＝a*f+b；上式中，f为原图像素，g为输出图像像素，a为调整对比度的增益，a＞0；b为调整图像亮度的偏置；为第i行和第j列的像素能够表达为g＝a*f+b；为尽可能多得模拟不同光照下的煤尘图像，亮度对比度的调整也是在一定范围内的，即由一定概率将图像亮度对比度调低或调高，也有一定概率使图像的亮度和对比度保持不变，调整范围和概率能够根据需要指定。利用阈值分割法、视频差分分割法等方法对水灾区域图像分割，集成水文基础数据，根据不同的突水水源分析蔓延趋势，将突水区域从煤岩等背景图像中分离出来；并根据二值图像的像素数量进行突水面积估算及趋势预测，水灾区域图像分割后，可以将视频动态目标区域与背景图像进行分离，得到一个二值图像，如fk为视频第k帧图像，像素分辨率为M×N，则目标分割后，目标图像gk为第k帧图像分割后，可以根据二值图像的像素数量进行突水面积估算。n255代表灰度值为255的像素数量，相对突水面积可用/＞表征，可与实际面积进行拟合。对于突水趋势的预测，突水面积的估算可以按照图像面积比例进行估算，则突水面积扩张速度可用表征，其中T为视频第k帧采集图像和第帧采集图像的间隔时间。水灾面积扩张速度可以表征突水趋势，水灾面积扩张速度越快，说明水势越凶猛，突水量越大。实施例二：请参考图3，在实施例一的基础上，控制中心还连接有突水监测单元，突水监测单元包括钻孔旁设置的背板和顶板，顶板上设有的摄像机，摄像机一侧设有激光模组，激光模组连接有电机，电机驱动激光模组，控制中心设有电源模块供电，控制中心通过设置的无线通信模块将突水数据发送至信息管理系统的服务器端，进行数据存储。所述突水监测单元监测突水的方法包括，S1，钻井突水发生时，摄像机开始录制，激光模组在此时也开始工作，激光头以PWM调压启动的方式启动，照射红色激光点在背板顶端位置；S2，控制中心控制电机通过机械传动结构与激光模组相连，使激光模组顺时针缓慢转动，使背板上由激光模组照射的激光点由顶端缓慢向下移动至突水水柱的最高点，当激光点移动至设置的最低点时，电机反向转动，带动激光点迅速回到背板顶端初始位置，摄像机停止录制；S3，将录制的视频信息传输至控制中心，对采集到的视频进行处理，识别出激光点在视频图像中的轨迹，计算得到水位高度；最后通过无线通信的方式将突水数据与突水水柱图像发送至信息管理系统的服务器，并保存。突水监测单元在突水时，摄像机采集激光模组的光斑图像后，进行目标检测的识别和跟踪算法的计算处理之后，可以得到图像序列中提取到的光斑的数量、大小、形状、移动轨迹信息，由于光的反射与折射，光斑在图像序列中的数量变化情况并不总是一个背板光斑和一个水面反射光斑，还可能由于水面波动导致的目标光斑与动光斑同时存在的情况，会导致后续计算出现误差，为了避免上述情况发生，准确分辨背板直射光斑与水面反射光斑，对光斑目标跟踪后的图像光斑数据进行分析，具体方法为，第一步，在整幅图像中随机选取K个对象作为聚类质心，本方法为了将图像光斑依据水位线以上和水位线以下进行分类，取K＝2；第二步，分别计算光斑对象与聚类质心的曼哈顿距离；第三步，假设光斑对象共有N个，对于每一个对象，找到距离它最近的质心作为标签，若N＝1，则直接分为一类，分类结束；第四步，对于同样标签的类，更新其质心；第五步，重复第三步和第四步，不断划分新的聚类，计算新的质心，直至新的质心和上一次计算的质心相同或差距小于设定的阈值，分类结束，记录此时两类光斑的质心位置；光斑图像经过分类后可得到直射激光点类与反射激光点类的移动轨迹，将这两类质心的移动轨迹作为直射与反射光斑的移动轨迹坐标。突水水柱高度计算过程中，构建几何关系图，经过图像水位判别方法后得到的水位在图像中的位置为Y，此处像素值即为AC的长度。摄像机采集图像为640*480像素大小，图像纵向长度AD为480像素，摄像机的广角为41.41°，图像中水位以上部分的角度∠AEC即α的大小满足：α＝·41.41°；摄像机的位置为E,EA,ED为摄像机的广角其视野最高点为A，支架拐角处为Q。标尺测量得到AQ与EQ的长度，则∠AEQ即β满足：β＝arctan；在三角形EQY中，根据正切定理能够得到突水水柱以上背板的高度QY，QY＝EQ·tan；根据背板的高度QX，背板底端与钻井位于同一平面，能够得到突水水柱的高度即为XY，XY＝QX-QY；控制中心设定一个固定值作为钻孔的安全突水高度阈值，一旦实际突水高度超过设定阈值，报警系统发出警报。本发明中未详细阐述的其它技术方案均为本领域的现有技术，在此不再赘述。以上所述仅为本发明的优选实施方式而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化；凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
