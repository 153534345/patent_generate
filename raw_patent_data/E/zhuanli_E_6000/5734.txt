标题title
一种三轴无磁转台的定向探管的标定系统及方法
摘要abst
本发明提供了一种三轴无磁转台的定向探管的标定系统及方法，属于标定技术领域，其系统的电子数显屏幕用于显示三轴无磁转台的参考姿态角；摄像头，用于拍摄电子数显屏幕上的参考姿态角的数值图像，并对数值图像进行传输；数字识别模块用于接收数值图像，并对数值图像进行分析，得到三轴无磁转台的参考姿态角数据；标定模块用于根据获得的参考姿态角数据及传感器标定模型计算定向探管的标定参数，并根据标定参数对定向探管进行标定。本发明无需将三轴无磁转台精确地调整至若干多个预先设定的角度，避免了依靠视力不断去调整三轴无磁转台方向及角度直至达到预设角度的过程，大大提高了标定效率。
权利要求书clms
1.一种三轴无磁转台的定向探管的标定系统，其特征在于，包括：电子数显屏幕，用于采集并显示三轴无磁转台的参考姿态角；摄像头，用于拍摄电子数显屏幕上的参考姿态角的数值图像；数字识别模块，与所述摄像头电连接，用于对所述数值图像进行分析，得到三轴无磁转台的参考姿态角数据；标定模块，与所述数字识别模块电连接，用于根据所述参考姿态角数据计算定向探管的标定参数，并根据所述标定参数对定向探管进行角度标定。2.根据权利要求1所述的三轴无磁转台的定向探管的标定系统，其特征在于，所述标定模块及定向探管内部均设置有传感器标定模型，所述标定模块内部的传感器标定模型用于根据接收到的参考姿态角数据计算定向探管的标定参数，所述定向探管内部的传感器标定模型用于根据接收到标定参数对定向探管进行标定。3.根据权利要求2所述的三轴无磁转台的定向探管的标定系统，其特征在于，所述传感器标定模型包括加速度计标定模型和磁强计标定模型。4.根据权利要求1所述的三轴无磁转台的定向探管的标定系统，其特征在于，所述参考姿态角为任意角，且数量为多个。5.一种基于权利要求1所述的标定系统的标定方法，其特征在于，包括如下步骤：将定向探管夹持于三轴无磁转台上，随机调整三轴无磁转台的角度，得到三轴无磁转台的参考姿态角；获取呈现于电子数显屏幕上的参考姿态角的数值图像；将所述数值图像传输至数字识别模块并进行分析，得到三轴无磁转台的参考姿态角数据；重复上述获得参考姿态角数据的步骤，获取多组参考姿态角数据；根据多组参考姿态角数据计算定向探管的标定参数，并根据所述标定参数对定向探管进行角度标定。6.根据权利要求5所述的标定方法，其特征在于，将所述数值图像传输至数字识别模块并进行分析，得到三轴无磁转台的参考姿态角数据，包括如下步骤：对所述数值图像进行最大矩形框提取；根据提取到的最大矩形框的竖直边的方向对所述数值图像进行旋转矫正，并将矫正后的最大矩形框内部区域划分为单个数字区域；将单个数字区域输入CNN网络进行数字识别，得到三轴无磁转台的参考姿态角数据。7.根据权利要求5所述的标定方法，其特征在于，所述标定模块及定向探管内部均设置有传感器标定模型，所述传感器标定模型包括加速度计标定模型和磁强计标定模型。8.根据权利要求7所述的标定方法，其特征在于，所述根据多组参考姿态角数据计算定向探管的标定参数，并根据所述标定参数对定向探管进行角度标定，具体为根据参考姿态角数据及加速度计标定模型计算定向探管的标定参数，包括如下步骤：根据定向探管的当前姿态角的参数得到定向探管在当地导航坐标系n至载体坐标系b之间的旋转矩阵：式中，为当前姿态角的横滚角、/＞为当前姿态角的俯仰角、/＞为当前姿态角的航向角；令导航坐标系下的当地重力加速度矢量，其在载体坐标系下的投影为：得到在静止状态下加速度计的测量模型：其中，g为重力加速度，、/＞、…、/＞和/＞、/＞、/＞为待标定参数，、/＞、/＞为加速度计第/＞个姿态角处的原始测量值；利用多组参考姿态角构成最小二乘解算模型，使用最小二乘解算模型对所述加速度计的测量模型进行求解，得到标定加速度计的所有参数。9.根据权利要求7所述的标定方法，其特征在于，所述根据多组参考姿态角数据计算定向探管的标定参数，并根据所述标定参数对定向探管进行角度标定，具体为根据参考姿态角数据及磁强计标定模型计算定向探管的标定参数，包括如下步骤：根据定向探管的当前姿态角的参数得到定向探管在当地导航坐标系n至载体坐标系b之间的旋转矩阵：式中，为当前姿态角的横滚角、/＞为当前姿态角的俯仰角、/＞为当前姿态角的航向角；令导航坐标系下的当地地磁场矢量，/＞和/＞分别表示地磁场的水平分量和数值分量，其在载体坐标系下的投影为/＞，得到在静止状态下磁强计的测量模型：其中，、/＞、…、/＞和/＞、/＞、/＞等共12个参数为待标定参数，、/＞、/＞为磁强计第/＞个姿态角处的原始测量值；利用多组参考姿态角构成最小二乘解算模型，使用最小二乘解算模型对所述磁强计的测量模型进行求解，得到标定加速度计的所有参数。10.根据权利要求6所述的标定方法，其特征在于，所述CNN网络根据ResNet-18设计，其输入张量的尺寸为3×64×64，输出为三轴无磁转台的参考姿态角数据。
说明书desc
技术领域本发明属于标定技术领域，具体涉及一种三轴无磁转台的定向探管的标定系统及方法。背景技术基于磁传感器的随钻测量系统日益广泛地应用于煤炭和石油钻探行业，且在使用过程中需要对随钻测量系统的定向探管定期进行标定，以确保其测量的准确性和可靠性。由于在对定向探管标定时，需要最大程度地隔绝除地磁场以外的磁场干扰，因此通常使用三轴手动无磁转台的定向探管执行标定流程。依照现有的标定流程，工程人员需要手动将三轴无磁转台精确地调整至若干多个预先设定的角度，再将预先设定的角度数据作为参考测量值手动输入标定模块中来对定向探管进行标定。然而，当工作人员将三轴无磁转台手动调整至预先设定的角度的过程中，需要依靠视力去判断调整的方向及角度，并不断的尝试调整，直至达到预设角度，由于在标定过程中，需要设定多个角度，导致耗时较多，另外，还需要依次将设定的多个角度数据手动输入标定模块中，因此，整个过程耗时较多，一天只能标定2-3台，标定效率非常低。发明内容为了克服三轴无磁转台手动调整至特定角度时耗时过多，导致标定效率低的不足，本发明提供了一种三轴无磁转台的定向探管的标定系统及方法。其标定系统包括：电子数显屏幕，用于采集并显示三轴无磁转台的参考姿态角；摄像头，用于拍摄电子数显屏幕上的参考姿态角的数值图像，并对所述数值图像进行传输；数字识别模块，与所述摄像头电连接，用于接收所述数值图像；并对所述数值图像进行分析，得到三轴无磁转台的参考姿态角数据；标定模块，与所述数字识别模块电连接，用于根据所述接收到的参考姿态角数据计算定向探管的标定参数，并根据所述标定参数对定向探管进行角度标定。优选的，所述标定模块及定向探管内部均设置有传感器标定模型，所述标定模块内部的传感器标定模型用于根据接收到的参考姿态角数据计算定向探管的标定参数，所述定向探管内部的传感器标定模型用于根据接收到标定参数对定向探管进行标定。优选的，所述传感器标定模型包括加速度计标定模型和磁强计标定模型。优选的，所述参考姿态角为任意角，且数量为多个。本发明还提供有一种三轴无磁转台的定向探管的标定系统的标定方法，包括如下步骤：将定向探管夹持于三轴无磁转台上，随机调整三轴无磁转台的角度，得到三轴无磁转台的参考姿态角；获取呈现于电子数显屏幕上的参考姿态角的数值图像；将所述数值图像传输至数字识别模块并进行分析，得到三轴无磁转台的参考姿态角数据；重复上述获得参考姿态角数据的步骤，获取多组参考姿态角数据；根据多组参考姿态角数据计算定向探管的标定参数，并根据所述标定参数对定向探管进行角度标定。优选的，将所述数值图像传输至数字识别模块并进行分析，得到三轴无磁转台的参考姿态角数据，包括如下步骤：对所述数值图像进行最大矩形框提取；根据提取到的最大矩形框的竖直边的方向对所述数值图像进行旋转矫正，并将所述矫正后的最大矩形框内部区域划分为单个数字区域；将单个数字区域输入CNN网络进行数字识别，得到三轴无磁转台的参考姿态角数据。优选的，所述标定模块及定向探管内部均设置有传感器标定模型，所述传感器标定模型包括加速度计标定模型和磁强计标定模型。优选的，所述根据多组参考姿态角数据计算定向探管的标定参数，并根据所述标定参数对定向探管进行角度标定，具体为根据参考姿态角数据及加速度计标定模型计算定向探管的标定参数，包括如下步骤：根据定向探管的当前姿态角的参数得到定向探管在当地导航坐标系n至载体坐标系b之间的旋转矩阵：式中，为当前姿态角的横滚角、/＞为当前姿态角的俯仰角、/＞为当前姿态角的航向角；令导航坐标系下的当地重力加速度矢量，其在载体坐标系下的投影为：得到在静止状态下加速度计的测量模型：其中，g为重力加速度，、/＞、…、/＞和/＞、/＞、/＞为待标定参数，、/＞、/＞为加速度计第/＞个姿态角处的原始测量值；利用多组参考姿态角构成最小二乘解算模型，使用最小二乘解算模型对所述加速度计的测量模型进行求解，得到标定加速度计的所有参数。优选的，所述根据多组参考姿态角数据计算定向探管的标定参数，并根据所述标定参数对定向探管进行角度标定，具体为根据参考姿态角数据及磁强计标定模型计算定向探管的标定参数，包括如下步骤：根据定向探管的当前姿态角的参数得到定向探管在当地导航坐标系n至载体坐标系b之间的旋转矩阵：式中，为当前姿态角的横滚角、/＞为当前姿态角的俯仰角、/＞为当前姿态角的航向角；令导航坐标系下的当地地磁场矢量，/＞和/＞分别表示地磁场的水平分量和数值分量，其在载体坐标系下的投影为/＞，得到在静止状态下磁强计的测量模型：其中，、/＞、…、/＞和/＞、/＞、/＞等共12个参数为待标定参数，/＞、/＞、/＞为磁强计第/＞个姿态角处的原始测量值；利用多组参考姿态角构成最小二乘解算模型，使用最小二乘解算模型对所述磁强计的测量模型进行求解，得到标定加速度计的所有参数。优选的，所述CNN网络根据ResNet-18设计，其输入张量的尺寸为3×64×64，输出为三轴无磁转台的参考姿态角数据。本发明提供的三轴无磁转台的定向探管的标定系统及方法具有以下有益效果：本发明通过在标定系统中设置摄像头和数字识别模块，能够在对三轴无磁转台的定向探管进行标定时，只需要随机调整三轴无磁转台至任意角度，并将该角度作为参考姿态角，该过程无需将三轴无磁转台精确地调整至多个预先设定的角度，避免了依靠视力不断去调整三轴无磁转台方向及角度直至达到预设角度的过程，大大提高了标定效率；另外，在将预设角度数据输入至标定模块的时，通过摄像头将电子数显屏幕上呈现的参考姿态角的数值图像传输至数字识别模块，数字识别模块能够根据数值图像分析出参考姿态角数据，并将数据传输至标定模块，该过程无需工作人员手动将参考姿态角数据多次输入标定模块，整个过程自动化完成，提高了标定效率；最后标定模块能够根据获得的参考姿态角数据计算出定向探管的标定参数，并根据标定参数对定向探管进行标定。通过本发明的标定系统能够大大提高了标定效率，20分钟左右即可完成一套探管设备的标定工作。附图说明为了更清楚地说明本发明实施例及其设计方案，下面将对本实施例所需的附图作简单地介绍。下面描述中的附图仅仅是本发明的部分实施例，对于本领域普通技术人员来说，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例的三轴无磁转台的定向探管的标定系统示意图；图2为数字识别模块的工作流程图。附图标记说明：1-摄像头，2-电子数显屏幕，3-三轴无磁转台，4-数字识别模块，5-标定模块，6-定向探管。具体实施方式为了使本领域技术人员更好的理解本发明的技术方案并能予以实施，下面结合附图和具体实施例对本发明进行详细说明。以下实施例仅用于更加清楚地说明本发明的技术方案，而不能以此来限制本发明的保护范围。在本发明的描述中，需要理解的是，术语“中心”、“纵向”、“横向”、“长度”、“宽度”、“厚度”、“上”、“下”、“前”、“后”、“左”、“右”、“竖直”、“水平”、“顶”、“底”、“内”、“外”、“轴向”、“径向”、“周向”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明的技术方案和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。此外，术语“第一”、“第二”等仅用于描述目的，而不能理解为指示或暗示相对重要性。在本发明的描述中，需要说明的是，除非另有明确的规定或限定，术语“相连”、“连接”应作广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体式连接；可以是机械连接，也可以是电连接；可以是直接相连，也可以是通过中间媒介间接相连。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本发明中的具体含义。在本发明的描述中，除非另有说明，“多个”的含义是两个或两个以上，在此不再详述。实施例本发明提供了一种三轴无磁转台的定向探管的标定系统及方法，其系统具体如图1所示，包括摄像头1、电子数显屏幕2、三轴无磁转台3、数字识别模块4、标定模块5和定向探管6。定向探管6与三轴无磁转台3刚性连接；电子数显屏幕2用于采集并显示三轴无磁转台3的参考姿态角；摄像头1用于拍摄电子数显屏幕2上的参考姿态角的数值图像，并对数值图像进行传输；数字识别模块4用于接收数值图像；并对数值图像进行分析，得到三轴无磁转台3的当前姿态角数据；标定模块5用于根据接收到的参考姿态角数据及传感器标定模型计算定向探管6的标定参数，并根据标定参数对定向探管6进行标定。在本实施例中，摄像头1与数字识别模块4电连接，具体数字识别模块4与所述标定模块5电连接，标定模块5与定向探管6电连接，具体为：摄像头1与电脑电连接，或使用电脑自带摄像头，数字识别模块4及标定摄像头1设置于电脑中，摄像头1拍摄参考姿态角的数值图像后，传输至数字识别模块4，再传输至标定模块5，标定模块5及定向探管6内部均设置有传感器标定模型，标定模块5内部的传感器标定模型用于根据接收到的参考姿态角数据计算定向探管6的标定参数，定向探管6内部的传感器标定模型用于根据接收到标定参数对定向探管6进行标定，标定模块5用于根据接收到的参考姿态角数据及传感器标定模型计算定向探管6的标定参数。本发明还提供有一种基于定向探管的标定系统的标定方法，包括如下步骤：步骤1：工程人员将定向探管6夹持于三轴无磁转台3上，随机调整三轴无磁转台3的角度，且在调整角度之前无需进行任何预先设置。步骤2：获取呈现于电子数显屏幕2上的参考姿态角的数值图像；待电子数显屏幕2读数稳定后，执行下一步骤。步骤3：使用摄像头1执行拍摄任务，获取呈现于电子数显屏幕2上的参考姿态角的数值图像。步骤4：将数值图像传输至计算机的数字识别模块4并进行分析，得到三轴无磁转台3的参考姿态角数据。具体包括如下步骤：对数值图像进行最大矩形框提取；根据提取到的最大矩形框的竖直边的方向对数值图像进行旋转矫正，并将矫正后的最大矩形框内部区域划分为单个数字区域；将单个数字区域输入CNN网络进行数字识别，CNN网络根据ResNet-18设计，其输入张量的尺寸为3×64×64，输出为定向探管6的参考姿态角数据。步骤5：重复步骤2-4，获取多组参考姿态角数据。步骤6：根据多组参考姿态角数据及传感器标定模型计算定向探管6的标定参数，并根据标定参数对定向探管6进行标定。其中，传感器标定模型包括加速度计标定模型和磁强计标定模型，加速度计和磁强计所采集的定向探管6的角度为当前姿态角。根据参考姿态角数据及加速度计标定模型计算定向探管的标定参数，并根据标定参数对定向探管进行标定，包括如下步骤：：根据当前姿态角的参数得到定向探管6在当地导航坐标系n至载体坐标系b之间的旋转矩阵：式中，为当前姿态角的横滚角、/＞为当前姿态角的俯仰角、/＞为当前姿态角的航向角。：令导航坐标系下的当地重力加速度矢量，其在载体坐标系下的投影为：得到在静止状态下加速度计的测量模型：其中，g为重力加速度，、/＞、…、/＞和/＞、/＞、/＞均为待标定参数，/＞、/＞、/＞均为加速度计第/＞个姿态角处的原始测量值。为方便表示，可以将上式写为矩阵形式：为对上式中矩阵和向量/＞中12个未知参数进行估计，可利用获得的M组参考姿态角数据构建以下等式关系：其中，大小为/＞，包含了N组加速度计的原始测量值；相应地，/＞大小也为/＞，为求解矩阵/＞和向量/＞，将上式改写为增广形式：其中，I为单位矩阵；另记待求矩阵，/＞，则上式可以简写为：。：构建最小二乘解算模型，并使用最小二乘解算模型对加速度计的测量模型进行求解，得到标定加速度计的所有参数：至此，便得到了标定加速度计所需的所有参数。另外，根据参考姿态角数据及磁强计标定模型计算定向探管6的标定参数，并根据标定参数对定向探管6进行标定，包括如下步骤：：根据当前姿态角的参数得到定向探管6在当地导航坐标系n至载体坐标系b之间的旋转矩阵：式中，为当前姿态角的横滚角、/＞为当前姿态角的俯仰角、/＞为当前姿态角的航向角。：令导航坐标系下的当地地磁场矢量，/＞和/＞分别表示地磁场的水平分量和数值分量，其在载体坐标系下的投影为/＞，得到在静止状态下磁强计的测量模型：其中，、/＞、…、/＞和/＞、/＞、/＞等共12个参数为待标定参数，/＞、/＞、/＞为磁强计第/＞个姿态角处的原始测量值；为方便表示，可以将上式写为矩阵形式：为对上式中矩阵和向量/＞中12个未知参数进行估计，可利用获得的M组参考姿态角数据构建以下等式关系：其中，大小为/＞，包含了N组磁强计的原始测量值；相应地，/＞大小也为/＞，为求解矩阵/＞和向量/＞，将上式改写为增广形式：其中，I为单位矩阵；另记待求矩阵，/＞，则上式可以简写为：。：构建最小二乘解算模型，并使用最小二乘解算模型对磁强计的测量模型进行求解，得到标定加速度计的所有参数。至此，得到标定磁强计的所有参数。以上实施例仅为本发明较佳的具体实施方式，本发明的保护范围不限于此，任何熟悉本领域的技术人员在本发明披露的技术范围内，可显而易见地得到的技术方案的简单变化或等效替换，均属于本发明的保护范围。
