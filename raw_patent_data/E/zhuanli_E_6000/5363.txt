标题title
一种门禁系统
摘要abst
本申请提供一种门禁系统，包括开门按钮、门禁主机、报警设备、门禁电源、电控锁和门磁报警器，开门按钮与门禁主机连接，门禁主机与门禁电源、报警设备和门磁报警器连接；门禁电源包括：控制模块、电源模块、浪涌监测模块和报警模块，控制模块与门禁主机、浪涌监测模块、电源模块和报警模块连接，电源模块与电控锁连接，浪涌监测模块与电源模块和电控锁之间的导线连接，控制模块的报警开关和门磁报警器的报警开关与门禁主机的报警输入接口连接；浪涌监测模块检测到电控锁或电控锁线路异常，发出信号到控制模块，控制模块发出信号到报警模块和门禁主机，门磁报警器监测到门被异常打开，门磁报警器发出信号到门禁主机。
权利要求书clms
1.一种门禁系统，其特征在于，包括开门按钮、门禁主机、报警设备、门禁电源、电控锁和门磁报警器，所述开门按钮与门禁主机连接，门禁主机与门禁电源、报警设备和门磁报警器的开关部连接；所述门禁电源包括：控制模块、电源模块、浪涌监测模块和报警模块，门禁主机与控制模块连接，浪涌监测模块的输出端与控制模块连接，控制模块的输出端与电源模块和报警模块连接，电源模块与电控锁连接，浪涌监测模块与电源模块和电控锁之间的导线连接，控制模块的报警开关和门磁报警器开关部的报警开关与门禁主机的报警输入接口连接；浪涌监测模块检测到电控锁或电控锁线路异常，发出报警信号到控制模块，控制模块发出报警信号到报警模块和门禁主机，门磁报警器监测到门被异常打开，门磁报警器发出报警信号到门禁主机，门禁主机能控制报警设备。2.如权利要求1所述的门禁系统，其特征在于，按下开门按钮，门禁主机发出开门信号到控制模块，控制模块发出控制信号到电源模块使得断开提供给电控锁的电源，电控锁失去吸力，门能够被打开。3.如权利要求1所述的门禁系统，其特征在于，所述电源模块与浪涌监测模块、控制模块、报警模块、门禁主机和电控锁连接，电源模块为浪涌监测模块、控制模块、报警模块、门禁主机和电控锁提供电能，电源模块与电控锁之间具有常闭开关，按下开门按钮时，控制模块才发出控制信号断开常闭开关使得电控锁失去电能。4.如权利要求3所述的门禁系统，其特征在于，所述电源模块输出的电源为直流电，门禁主机的PUSH端口与控制模块的PUSH端口连接，按下开门按钮，门禁主机通过PUSH端口输出信号驱动控制模块。5.如权利要求1所述的门禁系统，其特征在于，所述浪涌监测模块的输入端与电源模块和电控锁之间的导线连接，浪涌监测模块用于监测电源模块输出端与电控锁之间的浪涌，当电源模块输出端与电控锁之间正常工作时无浪涌信号，当电控锁被破坏、故障，或电源模块与电控锁之间的导线破坏或损坏，或导线与异物接触，会产生浪涌信号，浪涌监测模块会检测到浪涌信号，浪涌监测模块则发出信号到控制模块，浪涌监测模块通过检测电源模块输出端的电压变化量或电流变化量监测到浪涌信号。6.如权利要求5所述的门禁系统，其特征在于，正常工作时，电源模块输出直流电给电控锁的线圈，由于电控锁线圈阻值固定，电源模块输出电流稳定不变，在理想条件下浪涌幅度近似于0；当电控锁被破坏或故障，或电控锁与电源模块之间的导线被破坏或损坏，电控锁的供电回路被切断，电控锁内部线圈在切断时维持磁通量不变，电控锁两端产生浪涌信号，甚至在断点产生火花；当电源模块的输出线绝缘材料破损、或输出线与异物相接，由于输出回路电阻改变，也会在电源模块的输出端产生浪涌信号，浪涌检测模块会监测到电源模块输出端的电压变化或电流变化，当电压变化或电流变化超过设定的阈值，则判定为故障信号，浪涌检测模块则发出信号到控制模块。7.如权利要求6所述的门禁系统，其特征在于，电压变化的设定阈值为＞2V，电流变化的设定阈值为≥100mA，则判定为故障信号。8.如权利要求1所述的门禁系统，其特征在于，控制模块接收到浪涌监测模块发出的信号后，发出信号到报警模块，报警模块进行报警指示，同时，控制模块的报警开关闭合，控制模块的报警开关与门禁主机的报警输入接口连接，门禁主机通过报警输入接口是否连通来判断是否发出信号到报警设备，当控制模块的报警开关闭合，门禁主机的报警输入接口连接，门禁主机发出信号到报警设备，报警设备进行报警指示。9.如权利要求8所述的门禁系统，其特征在于，所述门磁报警器的开关部也与门禁主机的报警输入接口连接，门禁主机还通过报警输入接口是否连通来监测门的开合，在门禁主机的布防状态下，门磁报警器的开关部闭合，门禁主机的报警输入接口连接，门禁主机发出信号到报警设备，报警设备进行报警指示。10.如权利要求9所述的门禁系统，其特征在于，所述控制模块的报警开关闭合输出给门禁主机的信号为开关量信号，门磁报警器的开关部输出给门禁主机的信号也为开关量信号，因此，它们能够共用门禁主机的报警输入接口，浪涌检测模块和门磁报警器的报警信号不会相互干扰，门禁主机都能够识别。
说明书desc
技术领域本发明涉及门禁技术领域，更具体地，涉及一种门禁系统。背景技术电控锁是门禁系统的动作执行部件，电插锁和磁力锁是门禁系统中主要采用的电控锁种类。磁力锁属于常开型，电插锁大多属常开型，常开型门锁即通电时锁门，断电自动开门，符合通道门体消防规范。门禁电源为电控锁提供上锁所需的电能，当需要上锁时，门禁电源根据控制信号，输出直流电给常开型电控锁，需要解锁时，门禁电源关闭直流输出，门禁电源通过打开或关闭直流输出来进行上锁或解锁。门禁系统还包括门禁主机，门禁主机或称门禁控制器，可以发出上锁和解锁信号给门禁电源，一般上锁和解锁信号通过PUSH端口传递。门禁主机往往留有一些报警输入接口，报警输入接口和外置报警设备相连，门禁主机通过报警输入接口采集门禁区域的异常信息，并根据异常信息报警。门磁报警器是常用的一种报警信息采集装置，由开关部和磁铁部两部分组成，当磁铁部与开关部在一定距离内，磁铁会保持开关的开状态或关状态。距离的变化会引起开关部的动作，通常门磁报警器的开关部和磁铁部被分别安装在门体和门套上，同时门磁报警器开关部的引出线接到门禁主机的DoorSense接口，门禁主机监测DoorSense是否连通来监测门的开合，当门被打开时候，如果门禁主机设定在布防状态下，门禁主机会发出报警指示。门磁报警器的安装需要在门体和门框打孔，部分门磁报警器还需要嵌入式安装在门体中。门磁报警器的报警需要结合门禁主机使用，门磁报警器本身不含电源，只能输出开关量信号到门禁主机，由门禁主机触发声光电的报警。但是，在门锁、门磁报警器被破坏的情况下，只要门不进行开合，门磁报警器不会发出报警信号到门禁主机。并且，现实中门锁损坏和开门可能存在一段时间间隔，且报警应以门锁破环时间为依据，门磁报警器会延误报警时机。另外门禁主机需要在设防状态下，才能进行报警，在撤防状态下，门磁报警器的报警信息被门禁主机屏蔽，使得撤防以后一些危险因素无法被识别，比如电控锁被暴力破坏等。此外，线路老化损坏，电控锁烧断等故障，这些安全隐患不会造成门的开关，因此，无法触发门磁报警器触发门禁主机进行报警。有鉴于此，本发明提供一种门禁系统，不仅能在布防状态报警，并且在布防状态和撤防状态都能在电控锁、门磁报警器被破坏或故障，都能报警。发明内容本发明的目的在于，提供一种门禁系统，不仅能在布防状态报警，并且在布防状态和撤防状态都能实现在电控锁、门磁报警器被破坏或故障、或导线与异物相接时，能够报警。一种门禁系统，包括开门按钮、门禁主机、报警设备、门禁电源、电控锁和门磁报警器，所述开门按钮与门禁主机连接，门禁主机与门禁电源、报警设备和门磁报警器的开关部连接；所述门禁电源包括：控制模块、电源模块、浪涌监测模块和报警模块，门禁主机与控制模块连接，浪涌监测模块的输出端与控制模块连接，控制模块的输出端与电源模块和报警模块连接，电源模块与电控锁连接，浪涌监测模块与电源模块和电控锁之间的导线连接，控制模块的报警开关和门磁报警器开关部的报警开关与门禁主机的报警输入接口连接；浪涌监测模块检测到电控锁或电控锁线路异常，发出报警信号到控制模块，控制模块发出报警信号到报警模块和门禁主机，门磁报警器监测到门被异常打开，门磁报警器发出报警信号到门禁主机，门禁主机能控制报警设备。在一些实施方式中，按下开门按钮，门禁主机发出开门信号到控制模块，控制模块发出控制信号到电源模块使得断开提供给电控锁的电源，电控锁失去吸力，门能够被打开。在一些实施方式中，所述电源模块与浪涌监测模块、控制模块、报警模块、门禁主机和电控锁连接，电源模块为浪涌监测模块、控制模块、报警模块、门禁主机和电控锁提供电能，电源模块与电控锁之间具有常闭开关，按下开门按钮时，控制模块才发出控制信号断开常闭开关使得电控锁失去电能。进一步的，所述电源模块输出的电源为直流电，门禁主机的PUSH端口与控制模块的PUSH端口连接，按下开门按钮，门禁主机通过PUSH端口输出信号驱动控制模块。在一些实施方式中，所述浪涌监测模块的输入端与电源模块和电控锁之间的导线连接，浪涌监测模块用于监测电源模块输出端与电控锁之间的浪涌，当电源模块输出端与电控锁之间正常工作时无浪涌信号，当电控锁被破坏、故障，或电源模块与电控锁之间的导线破坏或损坏，或导线与异物接触，会产生浪涌信号，浪涌监测模块会检测到浪涌信号，浪涌监测模块则发出信号到控制模块，浪涌监测模块通过检测电源模块输出端的电压变化量或电流变化量监测到浪涌信号。进一步的，正常工作时，电源模块输出直流电给电控锁的线圈，由于电控锁线圈阻值固定，电源模块输出电流稳定不变，在理想条件下浪涌幅度近似于0；当电控锁被破坏或故障，或电控锁与电源模块之间的导线被破坏或损坏，电控锁的供电回路被切断，电控锁内部线圈在切断时维持磁通量不变，电控锁两端产生浪涌信号，甚至在断点产生火花；当电源模块的输出线绝缘材料破损、或输出线与异物相接，由于输出回路电阻改变，也会在电源模块的输出端产生浪涌信号，浪涌检测模块会监测到电源模块输出端的电压变化或电流变化，当电压变化或电流变化超过设定的阈值，则判定为故障信号，浪涌检测模块则发出信号到控制模块。进一步的，电压变化的设定阈值为＞2V，电流变化的设定阈值为≥100mA，则判定为故障信号。在一些实施方式中，控制模块接收到浪涌监测模块发出的信号后，发出信号到报警模块，报警模块进行报警指示，同时，控制模块的报警开关闭合，控制模块的报警开关与门禁主机的报警输入接口连接，门禁主机通过报警输入接口是否连通来判断是否发出信号到报警设备，当控制模块的报警开关闭合，门禁主机的报警输入接口连接，门禁主机发出信号到报警设备，报警设备进行报警指示。进一步的，所述门磁报警器的开关部也与门禁主机的报警输入接口连接，门禁主机还通过报警输入接口是否连通来监测门的开合，在门禁主机的布防状态下，门磁报警器的开关部闭合，门禁主机的报警输入接口连接，门禁主机发出报警信号到报警设备，报警设备进行报警指示。进一步的，所述控制模块的报警开关闭合输出给门禁主机的信号为开关量信号，门磁报警器的开关部输出给门禁主机的信号也为开关量信号，因此，它们能够共用门禁主机的报警输入接口，浪涌检测模块和门磁报警器的报警信号不会相互干扰，门禁主机都能够识别。本发明与现有技术相比，具有以下优点：通过监测电控锁的供电线路浪涌来监测门禁区域异常，不需要增设连接线路，不会对门体产生破坏，更新替代传统的门禁系统只需替换门禁电源本身即可。门禁电源包含独立的报警模块，无门禁主机或门禁主机无报警输入端口也可通过报警模块报警，门禁主机处于撤防状态时，门禁电源也可以单独报警。门禁主机包含报警输入口时，门禁电源的控制模块与门磁报警器共用门禁主机的同一个报警输入口，报警信号不冲突。当电控锁及电控锁供电线路损坏的情况下，门禁电源一般可以先于门磁报警器进行报警；在电控锁或电控锁供电线路失效的严重安全隐患下，即使门未打开，也可及时进行报警指示。附图说明结合以下附图一起阅读时，将会更加充分地描述本申请内容的上述和其他特征。可以理解，这些附图仅描绘了本申请内容的若干实施方式，因此不应认为是对本申请内容范围的限定。通过采用附图，本申请内容将会得到更加明确和详细地说明。图1为本申请的实施例1的门禁系统的原理图。图2为本申请的实施例1的浪涌监测模块实测到的浪涌信号。具体实施方式描述以下实施例以辅助对本申请的理解，实施例不是也不应当以任何方式解释为限制本申请的保护范围。在以下描述中，本领域的技术人员将认识到，在本论述的全文中，组件可描述为单独的功能单元，但是本领域的技术人员将认识到，各种组件或其部分可划分成单独组件，或者可整合在一起。同时，组件或系统之间的连接并不旨在限于直接连接。相反，在这些组件之间的数据可由中间组件修改、重格式化、或以其它方式改变。另外，可使用另外或更少的连接。还应注意，术语“联接”、“连接”、或“输入”“固定”应理解为包括直接连接、通过一个或多个中间媒介来进行的间接的连接或固定。术语“第一”、“第二”、“第三”等仅用于区分描述，而不能理解为指示或暗示相对重要性。实施例1：一种门禁系统，包括开门按钮、门禁主机、报警设备、门禁电源、电控锁和门磁报警器，所述开门按钮与门禁主机连接，门禁主机与门禁电源、报警设备和门磁报警器的开关部连接；所述门禁电源包括：控制模块、电源模块、浪涌监测模块和报警模块，门禁主机与控制模块连接，浪涌监测模块的输出端与控制模块连接，控制模块的输出端与电源模块和报警模块连接，电源模块与电控锁连接，浪涌监测模块与电源模块和电控锁之间的导线连接，控制模块的报警开关和门磁报警器开关部的报警开关与门禁主机的报警输入接口连接；浪涌监测模块检测到电控锁或电控锁线路异常，发出报警信号到控制模块，控制模块发出报警信号到报警模块和门禁主机，门磁报警器监测到门被异常打开，门磁报警器发出报警信号到门禁主机，门禁主机能控制报警设备。开门按钮与门禁主机连接，门禁主机的PUSH脚与控制模块的PUSH脚连接，控制模块的IO1脚与电源模块的IO脚连接，电源模块的IO脚与电源模块的常闭开关连接，电源模块提供12V的直流电，电源模块的12V电源输出脚与浪涌监测模块的VCC脚、控制模块的VCC脚、报警模块的Vin脚、门禁主机的VCC脚连接，常闭开关的一端与12V电源输出脚连接另一端与OUTPUT脚连接，电源模块的OUTPUT脚与电控锁的Vin脚连接。当按下开门按钮，门禁主机通过PUSH脚发出开门信号到控制模块，控制模块的IO1脚发出控制信号到电源模块的IO脚使得常闭开关K1断开，电源模块的OUTPUT脚不输出电能到电控锁，门能够被打开。浪涌监测模块的TEST脚与电源模块的OUTPUT脚和电控锁的Vin脚之间的导线连接，浪涌监测模块用于监测电源模块OUTPUT脚与电控锁之间的浪涌，当电源模块与电控锁之间正常工作时无浪涌信号，当电控锁断开、故障或电源模块与电控锁之间的导线破坏或损坏，会产生浪涌信号，浪涌监测模块会检测到浪涌信号，浪涌监测模块的IO脚则发出报警信号到控制模块的IO2脚。浪涌监测模块通过检测电源模块输出端的电压变化量或电流变化量监测到浪涌信号。正常工作时，电源模块输出直流电给电控锁的线圈，由于电控锁线圈阻值固定，电源模块输出电流稳定不变，在理想条件下浪涌幅度近似于0。当电控锁异常，电控锁的供电回路被切断，电控锁内部线圈在切断时维持磁通量不变，电控锁两端产生浪涌信号，甚至在断点产生火花。当电源模块的输出线绝缘材料破损、或输出线与异物相接，由于输出回路电阻改变，也会在电源模块的输出端产生浪涌信号，浪涌检测模块会监测到电源模块输出端的电压变化或电流变化，当电压变化或电流变化超过设定的阈值，则判定为故障信号，浪涌检测模块则发出报警信号到控制模块。如图2所示，浪涌检测模块实际测得浪涌信号为浪涌电压，幅值大于4V。控制模块的IO2脚接收到浪涌监测模块发出的报警信号后，控制模块的ALARM脚发出报警信号到报警模块的CONTROL脚，报警模块进行报警指示，同时，控制模块的报警开关K2闭合，即报警开关K2的OUT与OUT闭合，控制模块的报警开关K2的两端分别与门禁主机的DoorSense接口和DGND接口连接，门禁主机通过DoorSense接口是否连通来判断是否发出信号到报警设备，当控制模块的报警开关K2闭合，门禁主机的DoorSense接口连接，门禁主机的ALARM脚发出报警信号到报警设备，报警设备进行报警指示。所述门磁报警器的开关部的报警开关K3也与门禁主机的DoorSense接口连接，报警开关K3的两端分别与门禁主机的DoorSense接口和DGND接口连接，门禁主机还通过DoorSense接口是否连通来监测门的开合，在门禁主机的布防状态下，门磁报警器的开关部的报警开关K合，即报警开关K3的OUT与OUT闭合，门禁主机的DoorSense接口连接，门禁主机的ALARM脚发出报警信号到报警设备，报警设备进行报警指示。所述控制模块的报警开关K2闭合输出给门禁主机的信号为开关量信号，门磁报警器的开关部的报警开关K3输出给门禁主机的信号也为开关量信号，因此，它们能够共用门禁主机的DoorSense接口，浪涌检测模块和门磁报警器的报警信号不会相互干扰，门禁主机都能够识别。尽管本申请已公开了多个方面和实施方式，但是其它方面和实施方式对本领域技术人员而言将是显而易见的，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。本申请公开的多个方面和实施方式仅用于举例说明，其并非旨在限制本申请，本申请的实际保护范围以权利要求为准。
