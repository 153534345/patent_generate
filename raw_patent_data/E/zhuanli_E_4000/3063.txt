标题title
一种基于地面示功图计算油井产液量的方法
摘要abst
本发明公开了一种基于地面示功图计算油井产液量的方法，涉及油井产液量计算技术领域，所述方法包括以下步骤：S1：通过四边形矢量法确定示功图中泵吸入阀的开启点闭合点，排出阀的开启点闭合点，S2：对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正。本发明通过四边形矢量法确定泵吸入阀、排出阀的开启点、闭合点，再对吸入阀、排出阀的开启点、闭合点进行二次修正，提高后期产液量计算精度，并且依据修正后的示功图计算产液量，解决油井产液量难以连续、准确计量的问题。
权利要求书clms
1.一种基于地面示功图计算油井产液量的方法，其特征在于：所述方法包括以下步骤：S1：通过四边形矢量法确定示功图中泵吸入阀的开启点闭合点，排出阀的开启点闭合点；S2：对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正，修正后确定吸入阀的开启点闭合点、排出阀的开启点闭合点，得到修正后的示功图；S3：依据修正后的示功图计算产液量。2.根据权利要求1所述的一种基于地面示功图计算油井产液量的方法，其特征在于：步骤S1中：通过四边形矢量法确定泵吸入阀的开启点闭合点，排出阀的开启点闭合点包括以下步骤：S1.1：确定最小位移点与最大位移点并连线，计算连线的斜率；S1.2：将连线平移，找到两个切点，上切点定义为点，下切点定义为点；S1.3：将点连成一条直线，计算连线的斜率；S1.4：将连线平移重新修正点，最后确定点；S1.5：将点连成一条直线，计算连线的斜率；S1.6：将连线平移重新修正点，最后确定为点；S1.7：最终确定吸入阀的开启点闭合点，排出阀的开启点闭合点。3.根据权利要求2所述的一种基于地面示功图计算油井产液量的方法，其特征在于：步骤S1.3和步骤S1.5中，连线的斜率、连线的斜率计算公式为：其中，M代表斜率，为载荷最大值，为载荷最小值，为位移最大值，为位移最小值。4.根据权利要求1或3所述的一种基于地面示功图计算油井产液量的方法，其特征在于：步骤S2中，对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正包括以下步骤：S2.1：点处于下冲程，向后移动到上冲程的第一个点，计算点的一次载荷差，载荷差大于0.05KN，从第一个点向后推10个点，并计算这一段每个点的一次载荷差与二次载荷差，各点一次载荷差大于等于0，二次载荷差最小的点为新的点，否则还为原点。5.根据权利要求4所述的一种基于地面示功图计算油井产液量的方法，其特征在于：步骤S2中，对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正还包括以下步骤：S2.2：点处于下冲程，前移到上冲程的最后一个点，计算点的一次载荷差，载荷差小于-0.06KN，从最后一个点前推15个点，并计算这一段每个点的一次载荷差与二次载荷差，各点一次载荷差小于0，二次载荷差最小的那个点为新的点，否则还为原点。6.根据权利要求5所述的一种基于地面示功图计算油井产液量的方法，其特征在于：步骤S2中，对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正还包括以下步骤：S2.3：点处于上冲程，向后移动到下冲程的第一个点，计算点的一次载荷差，载荷差小于-0.05KN，从第一个点向后推12个点，并计算这一段每个点的一次载荷差与二次载荷差，各点一次载荷差小于0，二次载荷差最大的点为点，否则还为原点。7.根据权利要求6所述的一种基于地面示功图计算油井产液量的方法，其特征在于：步骤S2中，对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正还包括以下步骤：S2.4：点处于上冲程，前移到下冲程的最后一个点，计算点的一次载荷差，载荷差大于0.1KN，计算这一段每个点的一次载荷差与二次载荷差，二次载荷差大于0.1KN，且位移最小，该点为新点，否则还为原点；式中，p为排出阀开启点的索引，p为排出阀闭合点的索引。8.根据权利要求7所述的一种基于地面示功图计算油井产液量的方法，其特征在于：所述示功图由200个点构成的，每个点都有一个载荷差，一次载荷差计算公式为：式中，为一次载荷差，为本点的载荷，为前一个点的载荷；二次载荷差计算公式为：式中，为二次载荷差，为后一个点的载荷差。9.根据权利要求1或8所述的一种基于地面示功图计算油井产液量的方法，其特征在于：步骤S3中，依据修正后的示功图计算产液量，计算公式为：式中，表示为产液量，表示为一天时间，表示为有效冲程，表示为冲次，表示为泵截面积，表示为产液的密度，表示为产液体积系数。10.根据权利要求9所述的一种基于地面示功图计算油井产液量的方法，其特征在于：表示为一天时间，为分钟表示，计算公式为：有效冲程依据泵吸入阀、排出阀的开启点闭合点计算，通过计算出每分钟的产液量，再乘上每天的分钟数，计算出每天的产液量。
说明书desc
技术领域本发明涉及油井产液量计算技术领域，具体涉及一种基于地面示功图计算油井产液量的方法。背景技术抽油机井有杆泵采油是我国主要的机械采油方式，油井产液量变化规律是油井生产状态评定、储油层情况变化分析，油田开发方案制定的重要依据，在油田开发中占有重要地位，抽油机井的产液量计量传统的方法为分离器人工计量，该技术虽然计量设备简单，但地面配套建设投资较大，操作较为复杂，同时采用间歇量油的方式来折算产量，不能实现油井连续计量。目前，油井基本安装了载荷和位移传感器，实现了地面示功图每30分钟采集、传输，并且实时计算产液量。现有技术存在以下不足：但在实际应用中，存在着示功图计算产液量计量不准，误差较大的问题，从而使得工作人员无法准确的计算抽油机井的油井产液量。因此，亟需提出一种基于地面示功图计算油井产液量的方法，实现油井产液量的实时、连续准确计量。发明内容本发明的目的是提供一种基于地面示功图计算油井产液量的方法，以解决背景技术中不足。为了实现上述目的，本发明提供如下技术方案：一种基于地面示功图计算油井产液量的方法，所述方法包括以下步骤：S1：通过四边形矢量法确定示功图中泵吸入阀的开启点闭合点，排出阀的开启点闭合点；S2：对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正，修正后确定吸入阀的开启点闭合点、排出阀的开启点闭合点，得到修正后的示功图；S3：依据修正后的示功图计算产液量。在一个优选的实施方式中，步骤S1中：通过四边形矢量法确定泵吸入阀的开启点闭合点，排出阀的开启点闭合点包括以下步骤：S1.1：确定最小位移点与最大位移点并连线，计算连线的斜率；S1.2：将连线平移，找到两个切点，上切点定义为点，下切点定义为点；S1.3：将点连成一条直线，计算连线的斜率；S1.4：将连线平移重新修正点，最后确定点；S1.5：将点连成一条直线，计算连线的斜率；S1.6：将连线平移重新修正点，最后确定为点；S1.7：最终确定吸入阀的开启点闭合点，排出阀的开启点闭合点。在一个优选的实施方式中，步骤S1.3和步骤S1.5中，连线的斜率、连线的斜率计算公式为：其中，M代表斜率，为载荷最大值，为载荷最小值，为位移最大值，为位移最小值。在一个优选的实施方式中，步骤S2中，对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正包括以下步骤：S2.1：点处于下冲程，向后移动到上冲程的第一个点，计算点的一次载荷差，载荷差大于0.05KN，从第一个点向后推10个点，并计算这一段每个点的一次载荷差与二次载荷差，各点一次载荷差大于等于0，二次载荷差最小的点为新的点，否则还为原点。在一个优选的实施方式中，步骤S2中，对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正还包括以下步骤：S2.2：点处于下冲程，前移到上冲程的最后一个点，计算点的一次载荷差，载荷差小于-0.06KN，从最后一个点前推15个点，并计算这一段每个点的一次载荷差与二次载荷差，各点一次载荷差小于0，二次载荷差最小的那个点为新的点，否则还为原点。在一个优选的实施方式中，步骤S2中，对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正还包括以下步骤：S2.3：点处于上冲程，向后移动到下冲程的第一个点，计算点的一次载荷差，载荷差小于-0.05KN，从第一个点向后推12个点，并计算这一段每个点的一次载荷差与二次载荷差，各点一次载荷差小于0，二次载荷差最大的点为点，否则还为原点。在一个优选的实施方式中，步骤S2中，对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正还包括以下步骤：S2.4：点处于上冲程，前移到下冲程的最后一个点，计算点的一次载荷差，载荷差大于0.1KN，计算这一段每个点的一次载荷差与二次载荷差，二次载荷差大于0.1KN，且位移最小，该点为新点，否则还为原点；式中，p为排出阀开启点的索引，p为排出阀闭合点的索引。在一个优选的实施方式中，所述示功图由200个点构成的，每个点都有一个载荷差，一次载荷差计算公式为：式中，为一次载荷差，为本点的载荷，为前一个点的载荷；二次载荷差计算公式为：式中，为二次载荷差，为后一个点的载荷差。在一个优选的实施方式中，步骤S3中，依据修正后的示功图计算产液量，计算公式为：式中，表示为产液量，表示为一天时间，表示为有效冲程，表示为冲次，表示为泵截面积，表示为产液的密度，表示为产液体积系数。在一个优选的实施方式中，表示为一天时间，为分钟表示，计算公式为：有效冲程依据泵吸入阀、排出阀的开启点闭合点计算，通过计算出每分钟的产液量，再乘上每天的分钟数，计算出每天的产液量。在上述技术方案中，本发明提供的技术效果和优点：1、本发明通过四边形矢量法确定泵吸入阀、排出阀的开启点、闭合点，再对吸入阀、排出阀的开启点、闭合点进行二次修正，提高后期产液量计算精度，并且依据修正后的示功图计算产液量，解决油井产液量难以连续、准确计量的问题。2、本发明通过吸入阀、排出阀的开启点来修正确定吸入阀、排出阀的闭合点，再通过吸入阀、排出阀的闭合点来修正确定吸入阀、排出阀的开启点，通过修正的方式最终驱动吸入阀、排出阀的开启点闭合点，为后期产液量的计算提供了依据。3、本发明通过二次修正吸入阀、排出阀的开启点闭合点，使得最后确定的吸入阀、排出阀的开启点闭合点误差小，进一步提高产液量的计算精度。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明中记载的一些实施例，对于本领域普通技术人员来讲，还可以根据这些附图获得其他的附图。图1为本发明的工作流程图；图2为本发明示功图中最小位移点与最大位移点的连线示意图；图3为本发明示功图中a、c切点的定义图；图4为本发明示功图中ac连线示意图；图5为本发明示功图中b、d切点的定义图；图6为本发明示功图中bd连线示意图；图7为本发明示功图中确定a、c切点的示意图；图8为本发明示功图中确定a、b、c、d切点的示意图；图9为本发明示功图中a切点的修正示意图；图10为本发明示功图中b切点的修正示意图；图11为本发明示功图中c切点的修正示意图；图12为本发明示功图中d切点的修正示意图；图13为本发明示功图中确定a、b、c、d切点修正后的示意图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。需要说明的是，当元件被称为“固定于”另一个元件，它可以直接在另一个元件上或者也可以存在居中的元件。当一个元件被认为是“连接”另一个元件，它可以是直接连接到另一个元件或者可能同时存在居中元件。实施例1请参阅图1所示，本实施例所述一种基于地面示功图计算油井产液量的方法，所述方法包括以下步骤：通过四边形矢量法确定泵吸入阀的开启点闭合点；排出阀的开启点闭合点，对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正，修正后确定吸入阀的开启点闭合点、排出阀的开启点闭合点，并依据修正后的示功图计算产液量，该方法先通过四边形矢量法确定泵吸入阀、排出阀的开启点、闭合点，再对吸入阀、排出阀的开启点、闭合点进行二次修正，提高后期产液量计算精度，并且依据修正后的示功图计算产液量，解决油井产液量难以连续、准确计量的问题。四边形矢量法确定泵吸入阀的开启点闭合点，排出阀的开启点闭合点包括以下步骤：请参阅图2所示，确定最小位移点与最大位移点并连线，计算连线的斜率。请参阅图3所示，将连线平移，找到两个切点，上切点定义为点，下切点定义为点。请参阅图4所示，将点连成一条直线，计算连线的斜率。请参阅图5所示，将连线平移重新修正点，最后确定点。请参阅图6所示，将点连成一条直线，计算连线的斜率。请参阅图7所示，将连线平移重新修正点，最后确定为点。请参阅图8所示，最终确定吸入阀的开启点闭合点，排出阀的开启点闭合点，该方法通过吸入阀、排出阀的开启点来修正确定吸入阀、排出阀的闭合点，再通过吸入阀、排出阀的闭合点来修正确定吸入阀、排出阀的开启点，通过修正的方式最终驱动吸入阀、排出阀的开启点闭合点，为后期产液量的计算提供了依据。最小位移点和最大位移点确定为：最小位移点是第一个位移0点，从图2上看，就是横坐标最小值对应的点，最大位移点是位移最大的点，从图2上看，就是横坐标最大值对应的点。连线的斜率、连线的斜率计算公式为：其中，M代表斜率，示功图中纵坐标为载荷，用来表示，为载荷最大值，为载荷最小值；横坐标为位移，用表示，为位移最大值，为位移最小值。本申请示功图2-图13中，示功图表示抽油机运行的一个完整冲程，包括上冲程和下冲程，示功图中的粗实线代表上冲程：表示为从最小位移点到最大位移点；示功图中的细实线代表下冲程：表示从最大位移点到最小位移点。实施例2由于上述实施例1中确定后的吸入阀、排出阀的开启点闭合点仍存在误差，因此需要进行修正，对吸入阀的开启点闭合点、排出阀的开启点闭合点进行修正包括以下步骤：请参阅图9所示，修正点：点必须在上冲程，如果点落在下冲程，则向后移动到上冲程的第一个点，计算点的一次载荷差，如果其载荷差大于0.05KN，则从该点向后推10个点，并计算这一段每个点的一次载荷差与二次载荷差，如果该段内各点一次载荷差都不满足小于等于0，那么该段内二次载荷差最小的那个点即为新的点，否则还为原点。请参阅图10所示，修正点：点必须在上冲程，如果点处于下冲程，那么需要前移，移到上冲程的最后一个点，计算点的一次载荷差，如果载荷差小于-0.06KN，则从该点前推15个点，并计算这一段每个点的一次载荷差与二次载荷差，如果该段内一次载荷差没有大于等于0的点，那么该段内二次载荷差最小的那个点即为新的点，否则还为原点。请参阅图11所示，修正点：点必须在下冲程，若点落在上冲程，则向后移动到下冲程的第一个点，计算点的一次载荷差，如果其一次载荷差小于-0.05KN，则向后推12个点，并计算这一段每个点的一次载荷差与二次载荷差，如果该段内没有大于等于0的点，那么该段内二次载荷差最大的那个点为点，否则还为原点。请参阅图12所示，修正点：点必须在下冲程，如果点处于上冲程，那么需要前移，移到下冲程的最后一个点，计算点的一次载荷差，如果一次载荷差大于0.1KN，则计算p+-p)*1/5-p这一段每个点的一次载荷差与二次载荷差，如果二次载荷差大于0.1KN且位移最小，该点为新点，否则还为原点。请参阅图13所示，点最终确定，吸入阀的开启与闭合点分别为，索引分别为p、p，载荷分别为F、F，位移分别为u；排出阀的开启与闭合点分别为；索引分别为p、p，载荷分别为F、F，位移分别为u。上述步骤、、、、中，示功图的工作原理决定了点必须在上冲程，所以因为功图异常出现在下冲程的情况，必须把点移到上冲程，点必须在下冲程，所以因为功图异常出现在上冲程的情况，必须把点移到下冲程。该方法通过二次修正吸入阀、排出阀的开启点闭合点，使得最后确定的吸入阀、排出阀的开启点闭合点误差小，进一步提高产液量的计算精度。上述步骤、、、、中，由于示功图是由200个点构成的，每个点都有一个载荷差，一次载荷差计算公式为：式中，为一次载荷差，为本点的载荷，为前一个点的载荷。则二次载荷差计算公式为：式中，为二次载荷差，为后一个点的载荷差。实施例3通过上述实施例1与实施例2修正示功图后，需要依据修正后的示功图计算产液量，产液量的计算公式为：式中，表示为产液量，表示为一天时间，通常为分钟表示，即，表示为有效冲程，表示为冲次，其中，有效冲程依据泵吸入阀、排出阀的开启点闭合点计算，该计算方式属于现有技术，在此不做过多赘述，表示为泵截面积，表示为产液的密度，表示为产液体积系数，通过计算出每分钟的产液量，再乘上每天的分钟数，从而计算出每天的产液量。实施例4利用本发明修正后的示功图编制的计产软件针对某采油厂多口油井进行现场计产对比，并通过与现场拉油车称重对比，本发明本发明计产方法计产液量比现有计产方法计产液量精度提高15.11%。计产液量对比数据统计表汇总如表1所示：表1计产液量对比数据统计表之一如表2所示：表2计产液量对比数据统计表之二如表3所示：表3计产液量对比数据统计表之三如表4所示：表4计产液量对比数据统计表之三如表5所示：表5由表1-表5数据可知，通过本发明修正后的示功图计算产液量的准确率较现有技术准确率大大提升。上述实施例，可以全部或部分地通过软件、硬件、固件或其他任意组合来实现。当使用软件实现时，上述实施例可以全部或部分地以计算机程序产品的形式实现。所述计算机程序产品包括一个或多个计算机指令或计算机程序。在计算机上加载或执行所述计算机指令或计算机程序时，全部或部分地产生按照本申请实施例所述的流程或功能。所述计算机可以为通用计算机、专用计算机、计算机网络、或者其他可编程装置。所述计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，所述计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线方式向另一个网站站点、计算机、服务器或数据中心进行传输。所述计算机可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集合的服务器、数据中心等数据存储设备。所述可用介质可以是磁性介质、光介质、或者半导体介质。半导体介质可以是固态硬盘。应理解，本文中术语“和/或”，仅仅是一种描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况，其中A，B可以是单数或者复数。另外，本文中字符“/”，一般表示前后关联对象是一种“或”的关系，但也可能表示的是一种“和/或”的关系，具体可参考前后文进行理解。本申请中，“至少一个”是指一个或者多个，“多个”是指两个或两个以上。“以下至少一项”或其类似表达，是指的这些项中的任意组合，包括单项或复数项的任意组合。例如，a，b，或c中的至少一项，可以表示：a，b，c，a-b，a-c，b-c，或a-b-c，其中a，b，c可以是单个，也可以是多个。应理解，在本申请的各种实施例中，上述各过程的序号的大小并不意味着执行顺序的先后，各过程的执行顺序应以其功能和内在逻辑确定，而不应对本申请实施例的实施过程构成任何限定。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的系统、装置和单元的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。在本申请所提供的几个实施例中，应该理解到，所揭露的系统、装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。所述功能如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上所述，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以所述权利要求的保护范围为准。
