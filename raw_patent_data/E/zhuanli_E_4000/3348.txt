标题title
一种盾构机管片姿态的确定方法、装置、设备及存储介质
摘要abst
本发明公开了一种盾构机管片姿态的确定方法、装置、设备及存储介质，所述方法包括：建立盾构机的局部坐标系，确定在局部坐标系下盾构机的油缸撑靴坐标，并根据设定测量点，确定设定测量点处盾构机的盾壳与管片之间的间隙值；根据油缸撑靴坐标确定管片与油缸撑靴的接触面的第一平面方程，并根据第一平面方程与盾壳与管片之间的间隙值确定管片的圆柱面方程；根据第一平面方程与圆柱面方程确定管片的方向及管片与盾壳之间的最小间距；根据方向与最小间距确定管片姿态。本发明提出的盾构机管片姿态的确定方法，通过建立盾构机的局部坐标系，在局部坐标系下进行相对盾构机的管片姿态计算，实现了管片姿态的准确实时求解。
权利要求书clms
1.一种盾构机管片姿态的确定方法，其特征在于，包括：建立所述盾构机的局部坐标系，确定在所述局部坐标系下所述盾构机的油缸撑靴坐标，并根据设定测量点，确定所述设定测量点处所述盾构机的盾壳与管片之间的间隙值；根据所述油缸撑靴坐标确定管片与油缸撑靴的接触面的第一平面方程，并根据所述第一平面方程与所述盾壳与管片之间的间隙值确定所述管片的圆柱面方程；根据所述第一平面方程与圆柱面方程确定所述管片的方向及所述管片与盾壳之间的最小间距；根据所述方向与最小间距确定所述管片姿态。2.根据权利要求1所述的方法，其特征在于，确定在所述局部坐标系下所述盾构机的油缸撑靴坐标，包括：获取所述油缸撑靴相对所述盾构机的倾角与位移；根据所述倾角与位移确定所述油缸撑靴在所述局部坐标系下的坐标。3.根据权利要求1所述的方法，其特征在于，所述设定测量点包括上测量点、左测量点、右测量点、左上测量点和右上测量点。4.根据权利要求3所述的方法，其特征在于，根据所述第一平面方程与所述盾壳与管片之间的间隙值确定所述管片的圆柱面方程，包括：根据所述盾壳与管片之间的间隙值确定第一直线方程，所述第一直线方程为经过各所述设定测量点且与盾构机轴线平行的直线方程；根据所述第一直线方程与所述第一平面方程确定各所述设定测量点的测量点坐标；根据所述测量点坐标确定所述管片的圆柱面方程。5.根据权利要求4所述的方法，其特征在于，根据所述测量点坐标确定所述管片的圆柱面方程，包括：建立各所述设定测量点与管片中心轴线的距离方程；根据所述距离方程得到所述管片的断面中心点坐标与管片中心轴线方程；根据所述断面中心点坐标与管片中心轴线方程确定所述管片的圆柱面方程。6.根据权利要求5所述的方法，其特征在于，根据所述第一平面方程与圆柱面方程确定所述管片与盾壳之间的最小间距，包括：确定所述盾壳的盾壳半径与所述管片的管片半径；若所述盾构机轴线与管片中心轴线平行或重叠，则确定所述盾构机轴线与管片中心轴线之间的直线距离，并将所述盾壳半径与管片半径及直线距离之差确定为所述最小间距；若所述盾构机轴线与管片中心轴线相交或异面，则对所述圆柱面方程与盾壳柱面方程进行投影处理，根据投影曲线确定所述管片与盾壳之间的最小间距。7.根据权利要求1所述的方法，其特征在于，根据所述第一平面方程与圆柱面方程确定所述管片的方向，包括：确定所述第一平面方程关于所述管片的中心平面的对称平面方程；根据所述第一平面方程与所述对称平面方程确定目标点的坐标，所述目标点与管片中心点之间的方向向量与所述第一平面方程与所述对称平面之间的法向量的向量积的值为零；根据所述目标点的坐标确定所述管片的方向。8.根据权利要求7所述的方法，其特征在于，根据所述目标点的坐标确定所述管片的方向，包括：将所述局部坐标系的横轴与竖轴构成的平面作为投影平面；根据所述目标点的坐标确定所述目标点在所述投影平面的投影坐标；根据所述投影坐标确定所述管片与横轴的夹角，并作为所述管片的方向。9.根据权利要求1所述的方法，其特征在于，根据所述方向与最小间距确定所述管片姿态，包括：确定所述局部坐标系与大地坐标系之间的转换矩阵；根据所述转换矩阵将所述管片姿态转换为大地坐标系下的姿态。10.一种盾构机管片姿态的确定装置，其特征在于，包括：油缸撑靴坐标与间隙值确定模块，用于建立所述盾构机的局部坐标系，确定在所述局部坐标系下所述盾构机的油缸撑靴坐标，并根据设定测量点，确定所述设定测量点处所述盾构机的盾壳与管片之间的间隙值；第一平面方程与圆柱面方程确定模块，用于根据所述油缸撑靴坐标确定管片与油缸撑靴的接触面的第一平面方程，并根据所述第一平面方程与所述盾壳与管片之间的间隙值确定所述管片的圆柱面方程；方向与最小间距确定模块，用于根据所述第一平面方程与圆柱面方程确定所述管片的方向及所述管片与盾壳之间的最小间距；管片姿态确定模块，用于根据所述方向与最小间距确定所述管片姿态。11.一种电子设备，其特征在于，所述电子设备包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-9中任一项所述的盾构机管片姿态的确定方法。12.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机指令，所述计算机指令用于使处理器执行时实现权利要求1-9中任一项所述的盾构机管片姿态的确定方法。
说明书desc
技术领域本发明涉及盾构系统技术领域，尤其涉及一种盾构机管片姿态的确定方法、装置、设备及存储介质。背景技术随着地下空间的建设发展，盾构法施工的质量要求也逐渐提升。盾构掘进是一种动态过程，盾构机不断前进，一个个圆弧状的预制管片根据计算出的姿态数据互相拼装成隧道环，最后隧道环相互间构成连续的隧道壳体。在现有技术中，对管片姿态的计算未考虑到盾构机壳体的姿态变化，然而，盾构掘进过程中，盾构姿态与管片姿态是相互作用的，这导致现有的管片姿态计算方法不够准确。发明内容本发明提供了一种盾构机管片姿态的确定方法、装置、设备及存储介质，以确定管片的实时姿态。根据本发明的一方面，提供了一种盾构机管片姿态的确定方法，包括：建立所述盾构机的局部坐标系，确定在所述局部坐标系下所述盾构机的油缸撑靴坐标，并根据设定测量点，确定所述设定测量点处所述盾构机的盾壳与管片之间的间隙值；根据所述油缸撑靴坐标确定管片与油缸撑靴的接触面的第一平面方程，并根据所述第一平面方程与所述盾壳与管片之间的间隙值确定所述管片的圆柱面方程；根据所述第一平面方程与圆柱面方程确定所述管片的方向及所述管片与盾壳之间的最小间距；根据所述方向与最小间距确定所述管片姿态。进一步地，确定在所述局部坐标系下所述盾构机的油缸撑靴坐标，包括：获取所述油缸撑靴相对所述盾构机的倾角与位移；根据所述倾角与位移确定所述油缸撑靴在所述局部坐标系下的坐标。进一步地，所述设定测量点包括上测量点、左测量点、右测量点、左上测量点和右上测量点。进一步地，根据所述第一平面方程与所述盾壳与管片之间的间隙值确定所述管片的圆柱面方程，包括：根据所述盾壳与管片之间的间隙值确定第一直线方程，所述第一直线方程为经过各所述设定测量点且与盾构机轴线平行的直线方程；根据所述第一直线方程与所述第一平面方程确定各所述设定测量点的测量点坐标；根据所述测量点坐标确定所述管片的圆柱面方程。进一步地，根据所述测量点坐标确定所述管片的圆柱面方程，包括：建立各所述设定测量点与管片中心轴线的距离方程；根据所述距离方程得到所述管片的断面中心点坐标与管片中心轴线方程；根据所述断面中心点坐标与管片中心轴线方程确定所述管片的圆柱面方程。进一步地，根据所述第一平面方程与圆柱面方程确定所述管片与盾壳之间的最小间距，包括：确定所述盾壳的盾壳半径与所述管片的管片半径；若所述盾构机轴线与管片中心轴线平行或重叠，则确定所述盾构机轴线与管片中心轴线之间的直线距离，并将所述盾壳半径与管片半径及直线距离之差确定为所述最小间距；若所述盾构机轴线与管片中心轴线相交或异面，则对所述圆柱面方程与盾壳柱面方程进行投影处理，根据投影曲线确定所述管片与盾壳之间的最小间距。进一步地，根据所述第一平面方程与圆柱面方程确定所述管片的方向，包括：确定所述第一平面方程关于所述管片的中心平面的对称平面方程；根据所述第一平面方程与所述对称平面方程确定目标点的坐标，所述目标点与管片中心点之间的方向向量与所述第一平面方程与所述对称平面之间的法向量的向量积的值为零；根据所述目标点的坐标确定所述管片的方向。进一步地，根据所述目标点的坐标确定所述管片的方向，包括：将所述局部坐标系的横轴与竖轴构成的平面作为投影平面；根据所述目标点的坐标确定所述目标点在所述投影平面的投影坐标；根据所述投影坐标确定所述管片与横轴的夹角，并作为所述管片的方向。进一步地，根据所述方向与最小间距确定所述管片姿态，包括：确定所述局部坐标系与大地坐标系之间的转换矩阵；根据所述转换矩阵将所述管片姿态转换为大地坐标系下的姿态。根据本发明的另一方面，提供了一种盾构机管片姿态的确定装置，包括：油缸撑靴坐标与间隙值确定模块，用于建立所述盾构机的局部坐标系，确定在所述局部坐标系下所述盾构机的油缸撑靴坐标，并根据设定测量点，确定所述设定测量点处所述盾构机的盾壳与管片之间的间隙值；第一平面方程与圆柱面方程确定模块，用于根据所述油缸撑靴坐标确定管片与油缸撑靴的接触面的第一平面方程，并根据所述第一平面方程与所述盾壳与管片之间的间隙值确定所述管片的圆柱面方程；方向与最小间距确定模块，用于根据所述第一平面方程与圆柱面方程确定所述管片的方向及所述管片与盾壳之间的最小间距；管片姿态确定模块，用于根据所述方向与最小间距确定所述管片姿态。可选的，油缸撑靴坐标与间隙值确定模块还用于：获取所述油缸撑靴相对所述盾构机的倾角与位移；根据所述倾角与位移确定所述油缸撑靴在所述局部坐标系下的坐标。可选的，所述设定测量点包括上测量点、左测量点、右测量点、左上测量点和右上测量点。可选的，第一平面方程与圆柱面方程确定模块还用于：根据所述盾壳与管片之间的间隙值确定第一直线方程，所述第一直线方程为经过各所述设定测量点且与盾构机轴线平行的直线方程；根据所述第一直线方程与所述第一平面方程确定各所述设定测量点的测量点坐标；根据所述测量点坐标确定所述管片的圆柱面方程。可选的，第一平面方程与圆柱面方程确定模块还用于：建立各所述设定测量点与管片中心轴线的距离方程；根据所述距离方程得到所述管片的断面中心点坐标与管片中心轴线方程；根据所述断面中心点坐标与管片中心轴线方程确定所述管片的圆柱面方程。可选的，方向与最小间距确定模块还用于：确定所述盾壳的盾壳半径与所述管片的管片半径；若所述盾构机轴线与管片中心轴线平行或重叠，则确定所述盾构机轴线与管片中心轴线之间的直线距离，并将所述盾壳半径与管片半径及直线距离之差确定为所述最小间距；若所述盾构机轴线与管片中心轴线相交或异面，则对所述圆柱面方程与盾壳柱面方程进行投影处理，根据投影曲线确定所述管片与盾壳之间的最小间距。可选的，方向与最小间距确定模块还用于：确定所述第一平面方程关于所述管片的中心平面的对称平面方程；根据所述第一平面方程与所述对称平面方程确定目标点的坐标，所述目标点与管片中心点之间的方向向量与所述第一平面方程与所述对称平面之间的法向量的向量积的值为零；根据所述目标点的坐标确定所述管片的方向。可选的，方向与最小间距确定模块还用于：将所述局部坐标系的横轴与竖轴构成的平面作为投影平面；根据所述目标点的坐标确定所述目标点在所述投影平面的投影坐标；根据所述投影坐标确定所述管片与横轴的夹角，并作为所述管片的方向。可选的，管片姿态确定模块还用于：确定所述局部坐标系与大地坐标系之间的转换矩阵；根据所述转换矩阵将所述管片姿态转换为大地坐标系下的姿态。根据本发明的另一方面，提供了一种电子设备，所述电子设备包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够执行本发明任一实施例所述的盾构机管片姿态的确定方法。根据本发明的另一方面，提供了一种计算机可读存储介质，所述计算机可读存储介质存储有计算机指令，所述计算机指令用于使处理器执行时实现本发明任一实施例所述的盾构机管片姿态的确定方法。本发明实施例首先建立盾构机的局部坐标系，确定在局部坐标系下盾构机的油缸撑靴坐标，并根据设定测量点，确定设定测量点处盾构机的盾壳与管片之间的间隙值；然后根据油缸撑靴坐标确定管片与油缸撑靴的接触面的第一平面方程，并根据第一平面方程与盾壳与管片之间的间隙值确定管片的圆柱面方程；再根据第一平面方程与圆柱面方程确定管片的方向及管片与盾壳之间的最小间距；最后根据方向与最小间距确定管片姿态。本发明实施例提供的盾构机管片姿态的确定方法，通过建立盾构机的局部坐标系，在局部坐标系下进行相对盾构机的管片姿态计算，实现了管片姿态的准确实时求解。应当理解，本部分所描述的内容并非旨在标识本发明的实施例的关键或重要特征，也不用于限制本发明的范围。本发明的其它特征将通过以下的说明书而变得容易理解。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是根据本发明实施例一提供的一种盾构机管片姿态的确定方法的流程图；图2a是根据本发明实施例一提供的一种盾构机的盾壳、油缸与管片的相对位置示意图；图2b是根据本发明实施例一提供的一种管片侧视图；图3是根据本发明实施例一提供的一种管片与盾壳的投影位置示意图；图4是根据本发明实施例一提供的一种管片姿态的确定方法示意图；图5为根据本发明实施例二提供的一种盾构机管片姿态的确定装置的结构示意图；图6是实现本发明实施例三的盾构机管片姿态的确定方法的电子设备的结构示意图。具体实施方式为了使本技术领域的人员更好地理解本发明方案，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分的实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本发明保护的范围。需要说明的是，本发明的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本发明的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。实施例一图1为本发明实施例一提供了一种盾构机管片姿态的确定方法的流程图，本实施例可适用于对盾构机的管片姿态进行计算的情况，该方法可以由盾构机管片姿态的确定装置来执行，该盾构机管片姿态的确定装置可以采用硬件和/或软件的形式实现，该盾构机管片姿态的确定装置可配置于电子设备中。如图1所示，该方法包括：S110、建立盾构机的局部坐标系，确定在局部坐标系下盾构机的油缸撑靴坐标，并根据设定测量点，确定设定测量点处盾构机的盾壳与管片之间的间隙值。其中，盾构机是一种使用盾构法的隧道掘进机，掘进机在掘进的同时构建隧道之“盾”。图2a和图2b分别是本发明实施例提供的一种盾构机的盾壳、油缸与管片的相对位置示意图和管片侧视图，如图所示，管片为中空的梯形圆柱结构，位于盾构机盾壳内，与盾壳之间存在一定的缝隙。在本实施例中，为了计算管片相对于盾构机的姿态，可以建立盾构机的局部坐标系，该局部坐标系与大地坐标系之间可以通过转换矩阵进行坐标转换。在盾构机中，油缸通过撑靴与管片接触，并可以获取到油缸撑靴相对盾构机的位置，基于已建立的局部坐标系，可以确定油缸撑靴的坐标。可选的，确定在局部坐标系下所述盾构机的油缸撑靴坐标的方式可以是：获取油缸撑靴相对盾构机的倾角与位移；根据倾角与位移确定油缸撑靴在局部坐标系下的坐标。具体的，可以利用设置在油缸撑靴上的位移传感器获取油缸撑靴相对盾构机的倾角与位移，进而可以确定油缸撑靴相对于盾构机的局部坐标系的具体位置，从而确定油缸撑靴坐标，即油缸撑靴与管片的接触点的坐标。优选地，可以确定三个油缸撑靴坐标，令盾构机的局部坐标系为Ox1-y1-z1，三个油缸撑靴坐标可以分别表示为：a：b：c：。在本实施例中，可以在管片上设置多个测量点，测量每个测量点处的管片与盾壳之间的间隙大小。可选的，设定测量点包括但不限于上测量点、左测量点、右测量点、左上测量点和右上测量点。图3是本发明实施例提供的一种管片与盾壳的投影位置示意图，如图所示，可以设置八个测量点，分别为：上测量点、下测量点、左测量点、右测量点、左上测量点、左下测量点、右上测量点和右下测量点，各测量点的位置关系如图所示。经过测量可以得到该八个测量点处的管片与盾壳之间的间隙值，分别以Xs、Xx、Xz、Xy、Xzs、Xys、Xzx和Xyx表示。其中，考虑到环境影响，下测量点、左下测量点和右下测量点处的间隙值可以不测量。S120、根据油缸撑靴坐标确定管片与油缸撑靴的接触面的第一平面方程，并根据第一平面方程与盾壳与管片之间的间隙值确定管片的圆柱面方程。其中，第一平面为油缸撑靴与管片的接触平面。在本实施例中，由于空间内三个点可以确定一个平面，故可以根据上一步骤中的三个油缸撑靴坐标确定第一平面方程。令三个油缸撑靴坐标分别为a：，b：和c：，则可以得到第一平面方程为x+Ay+Bz+C＝0，其中：确定第一平面方程后，结合上一步骤中确定的设定测量点处的盾壳与管片之间的间隙值，可以确定管片的圆柱面方程。可选的，根据第一平面方程与盾壳与管片之间的间隙值确定管片的圆柱面方程的方式可以是：根据盾壳与管片之间的间隙值确定第一直线方程，第一直线方程为经过各设定测量点且与盾构机轴线平行的直线方程；根据第一直线方程与第一平面方程确定各设定测量点的测量点坐标；根据测量点坐标确定管片的圆柱面方程。其中，可以在各测量点处做平行于盾构机轴线的直线，各直线方程即为第一直线方程。令上测量点、下测量点、左测量点、右测量点、左上测量点、右上测量点、左下测量点和右下测量点处的间隙值分别为Xs、Xx、Xz、Xy、Xzs、Xys、Xzx和Xyx，盾壳半径为R，则可以得到八个直线方程，分别表示为：L1：Z＝R-Xs，X＝0L2：Z＝-，X＝0L3：Z＝0，X＝R-XzL4：Z＝0，X＝-L5：L6：L7：L8：得到第一直线方程后，第一直线与第一平面相交，交点即为各测量点，因此，将各第一直线方程分别代入第一平面方程x+Ay+Bz+C＝0中，可以得到各测量点的坐标，分别表示为：上测量点a1：下测量点b1：左测量点c1：右测量点d1：左上测量点e1：右上测量点f1：左下测量点g1：右下测量点h1：。进一步地，根据测量点坐标确定管片的圆柱面方程的方式可以是：建立各设定测量点与管片中心轴线的距离方程；根据距离方程得到管片的断面中心点坐标与管片中心轴线方程；根据断面中心点坐标与管片中心轴线方程确定管片的圆柱面方程。具体的，可以设管片中心轴线的直线方程为/m＝/n＝/p＝t，其中，点是管片中心轴线过第一平面上的一点，向量S为管片中心轴线的方向向量，t为参数方程的参数。将点带入第一平面方程x+Ay+Bz+C＝0中，可以得到：x1+Ay1+Bz1+C＝0。设管片中心轴线上一点M的坐标为，代入直线方程/m＝/n＝/p可以得到：/m＝/n＝/p。其中向量S，点和点为未知。由于已知各测量点坐标a1：、b1：、c1：、d1：、e1：、f1：、g1：和h1：，可以得到：向量a1M：向量b1M：向量c1M：向量d1M：向量e1M：向量f1M：向量g1M：向量h1M：。管片半径为已知量，以R1表示，此时测量点a1到管片中心轴线的距离即为向量a1M和方向向量S所确定的平行四边形的高。即：|a1M×S|＝|S|×R1，即：同理，根据其余测量点坐标可以得到另外七个方程。优选地，考虑到环境影响，下测量点、左下测量点和右下测量点处的间隙值可以不测量，将上测量点、左测量点、右测量点、左上测量点和右上测量点的坐标代入方程求解，可以得到管片的端面中心点坐标与管片中心轴线方程/m＝/n＝/p，进一步地可以确定管片的圆柱面方程为：S130、根据第一平面方程与圆柱面方程确定管片的方向及管片与盾壳之间的最小间距。在本实施例中，管片姿态主要包括管片的方向及位置，其中，管片位置主要体现在管片与盾壳之间的最小间距。管片的方向及管片与盾壳之间的最小间距可以根据第一平面方程与圆柱面方程确定。可选的，根据第一平面方程与圆柱面方程确定管片的方向的方式可以是：确定第一平面方程关于管片的中心平面的对称平面方程；根据第一平面方程与对称平面方程确定目标点的坐标，目标点与管片中心点之间的方向向量与第一平面方程与对称平面之间的法向量的向量积的值为零；根据目标点的坐标确定管片的方向。图4是本发明实施例提供的一种管片姿态的确定方法示意图，如图所示，第一平面与其对称平面关于管片中心平面对称，管片中心点与管片端面中心点位于管片中心轴线上。令管片中心距为L，管片中心点坐标为：Lz，根据管片中心轴线方程/m＝/n＝/p，管片中心点与管片的端面中心点之间的距离为：||＝L/2，可以得到管片中心平面方程如下：m+n+p＝0。根据管片中心点与点法式方程，可以得到测量点a1、c1、d1、e1、f1中关于管片的中心平面的对称点：a1’：c1’：d1’：e1’：f1’：。因此，可以得到第一平面方程x+Ay+Bz+C＝0关于管片的中心平面的对称平面方程如下：x+A’y+B’z+C’＝0。根据平面方程x+Ay+Bz+C＝0和其对称平面方程x+A’y+B’z+C’＝0或者管片中心平面方程m+n+p＝0可以求解出点向式方程，其方向向量为两平面法向量的向量积。根据空间几何关系，存在一点，使得管片中心点坐标距离该相交线距离最短，即：与两平面法向量的向量积的数量积为0。可以得到点向式方程为：/m1＝/n1＝/p1。进一步地可以根据点的坐标确定管片的方向。进一步地，根据目标点的坐标确定管片的方向的方式可以是：将局部坐标系的横轴与竖轴构成的平面作为投影平面；根据目标点的坐标确定目标点在投影平面的投影坐标；根据投影坐标确定管片与横轴的夹角，并作为管片的方向。具体的，在局部坐标系Ox1-y1-z1的X1-O-Z1平面的投影点坐标为，可以根据X1-O-Z1平面上的投影点可以确定管片中K块点位的角度作为管片的方向，即arctan。其中，若x0＝0且z0＞0则管片为12点方向；若x0＝0且z0＜0则管片为6点方向。可选的，根据第一平面方程与圆柱面方程确定管片与盾壳之间的最小间距的方式可以是：确定盾壳的盾壳半径与管片的管片半径；若盾构机轴线与管片中心轴线平行或重叠，则确定盾构机轴线与管片中心轴线之间的直线距离，并将盾壳半径与管片半径及直线距离之差确定为最小间距；若盾构机轴线与管片中心轴线相交或异面，则对圆柱面方程与盾壳柱面方程进行投影处理，根据投影曲线确定管片与盾壳之间的最小间距。具体的，第一平面方程与圆柱面方程确定管片与盾壳之间的最小间距可以转化为两圆柱面最小间距问题，令盾壳的盾壳半径与管片的管片半径分别为R和R1，且已知管片轴线方程为：/m＝/n＝/p，盾构机轴线方程：x＝0，z＝0，若盾构机轴线与管片中心轴线平行或重叠，管片与盾壳之间的最小间距可以表示为：R-R1-HL，其中，HL为盾构机轴线与管片中心轴线之间的直线距离。若盾构机轴线与管片中心轴线相交或异面，则可以定义存在点P1属于管片圆柱面，点P2属于盾壳圆柱面，当曲面之间间距最短，向量P1P2为两平面的公共法向量。根据几空间几何关系，该解为非最小解。对于包络柱面几何体，管片柱面距离盾壳柱面的最小间隙点坐标位于管片柱面的两端约束空间椭圆方程上，其与盾壳柱面上的点所形成的矢量方向平行于局部坐标系X1-O-Z1平面。因此，两柱面之间最小间距可转化为局部坐标系X1-O-Z1平面内曲线最小间距问题。根据方程：及令y＝0，使其空间椭圆曲线在局部坐标系X1-O-Z1平面内投影。此时，盾壳柱面方程为x2+z2＝R2。由于两几何曲线光滑且不相交，即最小间距为两曲线的共法线处。因此，两柱面最小间距可以转化为局部坐标系X1-O-Z1平面内光滑曲线距离问题。S140、根据方向与最小间距确定管片姿态。在本实施例中，确定管片的方向及管片与盾壳之间的最小间距后，可以确定管片的姿态。可选的，根据方向与最小间距确定管片姿态的方式可以是：确定局部坐标系与大地坐标系之间的转换矩阵；根据转换矩阵将管片姿态转换为大地坐标系下的姿态。具体的，在上述步骤中，对于管片方向与最小间距的计算是在盾构机的局部坐标系Ox1-y1-z1下的，由于盾构机是运动的，需要在局部坐标系与大地坐标系之间进行转换，从而确定管片相对于大地坐标系的姿态。盾构机的局部坐标系同大地坐标系间采用转换矩阵建立，管片姿态随着盾构姿态的变化而变化，在管片间接触紧密的条件下，前一环管片随着当前环伴随盾构姿态的变化而变化。本发明实施例首先建立盾构机的局部坐标系，确定在局部坐标系下盾构机的油缸撑靴坐标，并根据设定测量点，确定设定测量点处盾构机的盾壳与管片之间的间隙值；然后根据油缸撑靴坐标确定管片与油缸撑靴的接触面的第一平面方程，并根据第一平面方程与盾壳与管片之间的间隙值确定管片的圆柱面方程；再根据第一平面方程与圆柱面方程确定管片的方向及管片与盾壳之间的最小间距；最后根据方向与最小间距确定管片姿态。本发明实施例提供的盾构机管片姿态的确定方法，通过建立盾构机的局部坐标系，在局部坐标系下进行相对盾构机的管片姿态计算，实现了管片姿态的准确实时求解。实施例二图5为本发明实施例二提供的一种盾构机管片姿态的确定装置的结构示意图。如图5所示，该装置包括：油缸撑靴坐标与间隙值确定模块210，第一平面方程与圆柱面方程确定模块220，方向与最小间距确定模块230和管片姿态确定模块240。油缸撑靴坐标与间隙值确定模块210，用于建立盾构机的局部坐标系，确定在局部坐标系下盾构机的油缸撑靴坐标，并根据设定测量点，确定设定测量点处盾构机的盾壳与管片之间的间隙值。可选的，油缸撑靴坐标与间隙值确定模块210还用于：获取油缸撑靴相对盾构机的倾角与位移；根据倾角与位移确定油缸撑靴在局部坐标系下的坐标。可选的，设定测量点包括上测量点、左测量点、右测量点、左上测量点和右上测量点。第一平面方程与圆柱面方程确定模块220，用于根据油缸撑靴坐标确定管片与油缸撑靴的接触面的第一平面方程，并根据第一平面方程与盾壳与管片之间的间隙值确定管片的圆柱面方程。可选的，第一平面方程与圆柱面方程确定模块220还用于：根据盾壳与管片之间的间隙值确定第一直线方程，第一直线方程为经过各设定测量点且与盾构机轴线平行的直线方程；根据第一直线方程与第一平面方程确定各设定测量点的测量点坐标；根据测量点坐标确定管片的圆柱面方程。可选的，第一平面方程与圆柱面方程确定模块220还用于：建立各设定测量点与管片中心轴线的距离方程；根据距离方程得到管片的断面中心点坐标与管片中心轴线方程；根据断面中心点坐标与管片中心轴线方程确定管片的圆柱面方程。方向与最小间距确定模块230，用于根据第一平面方程与圆柱面方程确定管片的方向及管片与盾壳之间的最小间距。可选的，方向与最小间距确定模块230还用于：确定盾壳的盾壳半径与管片的管片半径；若盾构机轴线与管片中心轴线平行或重叠，则确定盾构机轴线与管片中心轴线之间的直线距离，并将盾壳半径与管片半径及直线距离之差确定为最小间距；若盾构机轴线与管片中心轴线相交或异面，则对圆柱面方程与盾壳柱面方程进行投影处理，根据投影曲线确定管片与盾壳之间的最小间距。可选的，方向与最小间距确定模块230还用于：确定第一平面方程关于管片的中心平面的平面方程；根据第一平面方程与对称平面方程确定目标点的坐标，目标点与管片中心点之间的方向向量与第一平面方程与对称平面之间的法向量的向量积的值为零；根据目标点的坐标确定管片的方向。可选的，方向与最小间距确定模块230还用于：将局部坐标系的横轴与竖轴构成的平面作为投影平面；根据目标点的坐标确定目标点在投影平面的投影坐标；根据投影坐标确定管片与横轴的夹角，并作为管片的方向。管片姿态确定模块240，用于根据方向与最小间距确定管片姿态。可选的，管片姿态确定模块240还用于：确定局部坐标系与大地坐标系之间的转换矩阵；根据转换矩阵将管片姿态转换为大地坐标系下的姿态。本发明实施例所提供的盾构机管片姿态的确定装置可执行本发明任意实施例所提供的盾构机管片姿态的确定方法，具备执行方法相应的功能模块和有益效果。实施例三图6示出了可以用来实施本发明的实施例的电子设备10的结构示意图。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本发明的实现。如图6所示，电子设备10包括至少一个处理器11，以及与至少一个处理器11通信连接的存储器，如只读存储器12、随机访问存储器13等，其中，存储器存储有可被至少一个处理器执行的计算机程序，处理器11可以根据存储在只读存储器12中的计算机程序或者从存储单元18加载到随机访问存储器13中的计算机程序，来执行各种适当的动作和处理。在RAM 13中，还可存储电子设备10操作所需的各种程序和数据。处理器11、ROM 12以及RAM 13通过总线14彼此相连。输入/输出接口15也连接至总线14。电子设备10中的多个部件连接至I/O接口15，包括：输入单元16，例如键盘、鼠标等；输出单元17，例如各种类型的显示器、扬声器等；存储单元18，例如磁盘、光盘等；以及通信单元19，例如网卡、调制解调器、无线通信收发机等。通信单元19允许电子设备10通过诸如因特网的计算机网络和/或各种电信网络与其他设备交换信息/数据。处理器11可以是各种具有处理和计算能力的通用和/或专用处理组件。处理器11的一些示例包括但不限于中央处理单元、图形处理单元、各种专用的人工智能计算芯片、各种运行机器学习模型算法的处理器、数字信号处理器、以及任何适当的处理器、控制器、微控制器等。处理器11执行上文所描述的各个方法和处理，例如盾构机管片姿态的确定方法。在一些实施例中，盾构机管片姿态的确定方法可被实现为计算机程序，其被有形地包含于计算机可读存储介质，例如存储单元18。在一些实施例中，计算机程序的部分或者全部可以经由ROM 12和/或通信单元19而被载入和/或安装到电子设备10上。当计算机程序加载到RAM 13并由处理器11执行时，可以执行上文描述的盾构机管片姿态的确定的一个或多个步骤。备选地，在其他实施例中，处理器11可以通过其他任何适当的方式而被配置为执行盾构机管片姿态的确定方法。本文中以上描述的系统和技术的各种实施方式可以在数字电子电路系统、集成电路系统、场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、负载可编程逻辑设备、计算机硬件、固件、软件、和/或它们的组合中实现。这些各种实施方式可以包括：实施在一个或者多个计算机程序中，该一个或者多个计算机程序可在包括至少一个可编程处理器的可编程系统上执行和/或解释，该可编程处理器可以是专用或者通用可编程处理器，可以从存储系统、至少一个输入装置、和至少一个输出装置接收数据和指令，并且将数据和指令传输至该存储系统、该至少一个输入装置、和该至少一个输出装置。用于实施本发明的方法的计算机程序可以采用一个或多个编程语言的任何组合来编写。这些计算机程序可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器，使得计算机程序当由处理器执行时使流程图和/或框图中所规定的功能/操作被实施。计算机程序可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本发明的上下文中，计算机可读存储介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的计算机程序。计算机可读存储介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。备选地，计算机可读存储介质可以是机器可读信号介质。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。为了提供与用户的交互，可以在电子设备上实施此处描述的系统和技术，该电子设备具有：用于向用户显示信息的显示装置或者LCD监视器)；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给电子设备。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网、区块链网络和互联网。计算系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。服务器可以是云服务器，又称为云计算服务器或云主机，是云计算服务体系中的一项主机产品，以解决了传统物理主机与VPS服务中，存在的管理难度大，业务扩展性弱的缺陷。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本发明中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本发明的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本发明保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本发明的精神和原则之内所作的修改、等同替换和改进等，均应包含在本发明保护范围之内。
