标题title
能实现开锁功率提升的基于NFC电子钥匙授权开锁的方法
摘要abst
能实现开锁功率提升的基于NFC电子钥匙授权开锁的方法，无源电子锁的电子锁端主控系统包括NFC天线和驱动模块、储能模块、NFC接收模块、电源模块、通讯及控制模块，无源电子锁的电子钥匙端具有NFC发射模块、防撞模块、比对模块、延时模块；开锁功率提升的开锁方法包括四个步骤。本发明减少了其他NFC设备带来的无线信号干扰，工作更加可靠，通过电子锁端发送的馈电电流判定NFC收发模块是否对准，以实现电源模块最大效率的充能，且根据NFC装置的阻抗信息以及功率信息，能动态调节输出给电子锁电源模块的功率大小以及相位，提高了充电效率并降低了充电时间，由此能为电子锁端提供相对更充足的电能，保证了开锁指令能有效得到响应，进而能有效开锁操作控制。
权利要求书clms
1.能实现开锁功率提升的基于NFC电子钥匙授权开锁的方法，其特征在于，无源电子锁的电子锁端主控系统包括NFC天线和驱动模块、储能模块、NFC接收模块、电源模块、通讯及控制模块，无源电子锁的电子钥匙端具有NFC发射模块、防撞模块、比对模块、延时模块；开锁功率提升的开锁方法包括如下步骤，步骤A：相关人员经随身携带电子钥匙端的NFC发射模块先后发射出无线能量信号和开锁指令，具体的，电子钥匙端的防撞模块将开锁指令信道分为控制信道和数据信道，控制信道用于发送忙音信号和无源电子锁之间的NFC接收模块之间建立通讯，当发送请求后得到反馈、电子锁端受到BUSY信号干扰时则通过延时模块进行随机延时，延时结束后再次发送请求、直至电子锁端不再受到BUSY信息，完成与无源电子锁建立数据传输通讯的功能；步骤B：经电子钥匙端的数据信道，NFC发射模块通过NFC接收模块为电子锁供电的同时并建立通讯，通信建立完成后电子钥匙输出开锁命令，电子钥匙发射的无线能量信号先对电子锁内的电源模块进行充电，通讯及控制模块获取电子锁并发送、电源模块得到的电子钥匙端发射的馈电电流测量值，该测量值是电源模块充电的电流信息；步骤C：电子钥匙端将接收的电源模块充电电流信息和自身内部多个给定范围的边界所对应阈值,经比对模块进行比较，得出电子钥匙与电子锁之间的NFC发射模块及接收模块NFC位置是否对准，当偏离得越远、电子钥匙端测量值越低，在达到电子钥匙端移动到理想位置时，也就是电子钥匙端输出的功率和电子锁端接收的功率在最大阈值时，电子钥匙生成功率控制信号，提升输出给NFC接收模块的功率，并将输出给NFC接收模块的功率的相位调节至NFC发射模块的功率的相同相位，增加等效品质因数、提高电源模块充电效率，进而，驱动模块进行开锁操作为电子锁供电、其锁芯打开；步骤D：若NFC接收模块为感性或容性电路中的一种时，电子钥匙端控制输出相位与NFC接收模块的功率相位差，使NFC发射模块及NFC接收模块之间变为阻性电路，对无源电子锁的储能模块进行快速充能，当无源电子锁中的存储能量足以驱动电子锁时、驱动模块进行开锁操作为电子锁供电、其锁芯打开。2.根据权利要求1所述的能实现开锁功率提升的基于NFC电子钥匙授权开锁的方法，其特征在于，步骤A中，防撞模块对信号判断并进行控制输出，主要是确NFC发射模块、NPN接收模块之间收发无线信号指令及无线能量信号不受到外部设备的干扰。3.根据权利要求1所述的能实现开锁功率提升的基于NFC电子钥匙授权开锁的方法，其特征在于，步骤B中，电子锁发送的馈电电流测量值是电子锁NFC天线的末端之间的交流电流数据。4.根据权利要求1所述的能实现开锁功率提升的基于NFC电子钥匙授权开锁的方法，其特征在于，步骤C中，电子钥匙与电子锁之间的NFC发射模块及接收模块NFC位置对准时，达到最大值后，电子钥匙端的LED会发光或者讯响器发声提示相关人员。5.根据权利要求1所述的能实现开锁功率提升的基于NFC电子钥匙授权开锁的方法，其特征在于，步骤A中，电子钥匙端的NFC发射模块发射出的出开锁指令，是在电子钥匙与电子锁之间的NFC发射模块及接收模块NFC位置对准后。
说明书desc
技术领域本发明涉及无线控制方法技术领域，特别是一种能实现开锁功率提升的基于NFC电子钥匙授权开锁的方法。背景技术目前常见的智能门锁、保险箱锁、拉杆箱锁等各种电子锁，大部分都是采用干电池或可充电电池进行供电。当干电池或充电电池的电量耗尽后，需要重新更换电池或充电。若不能及时更换干电池或充电，用户再次开锁时，会因为电量低或没有电而无法打开锁，对其应用造成了不利影响。无源电子锁是一种不需要外接电源的智能锁，比如通信领域使用的智能井盖上安装的无源电子锁就是其中的一种，无源电子锁中，主要包括NFC天线和驱动模块、储能模块、NFC收发模块、电源模块、通讯及控制模块等等，应用中需要开锁时，相关人员通过随身携带的开锁端发射出开锁指令及无线能量信号，锁端的主控系统经NFC天线接收到开锁指令及无线能量信号后，在相关模块共同作用下，将其转换为自身工作所需的电源并在开锁指令作用下，锁端就能实现开锁功能。NFC模块的工作方式一般分为三种，包括读卡器模式、仿真卡模式、点对点模式。其中点对点模式支持不同NFC收发设备之间进行数据交换，如果采用另外两个模式，则需要在电子锁中内置电源，无法实现无源电子锁的设计，因此，现有技术中一般采用点对点模式实现无源电子锁的开锁控制。现有技术中，具备NFC控制功能的设备 很多，例如手机，电脑等，都能实现和锁端的NFC模块实现开锁指令输出及接收，锁端并接收转换无线能量信号作为电源供给。实际情况下，为了防止正在工作无源电子锁设备被其他NFC 设备信号干扰，需要防碰撞技术来实现稳定的连接，但是现有技术中，均未见到记载有能通过相应方案防止其他NFC设备干扰的技术。还有就是，通常情况下，NFC收发模块的体积及功率较小，用户通常无法精准的对准控制发射端及锁端接收侧的两个NFC模块，这样，会导致传输效率不高。此外NFC模块输出的充电电源的功率很低，通常只适用于一些小型低功耗可穿戴设备，因此，在对需要相对较大功率的无源电子锁进行无线非接触开锁，目前的公知技术还无法满足实际需要，提供一种能有效实现无线充电能量的发射及接收，能为电子锁提供相对大能量，满足无线非接触开锁的技术显得尤为必要。发明内容为了克服现有无源电子锁由于技术所限，存在如背景所述弊端，本发明提供了一种在相关模块共同作用下，通过防碰撞技术使得电子钥匙和电子锁即使在复杂的应用场景也能实现正常应答、实现信息交互，当电子锁和电子钥匙建立通讯后，电子钥匙可通过电子锁发送的馈电电流判定NFC收发模块是否对准，以实现最大效率的充能，根据NFC装置的阻抗信息以及功率信息，动态调节输出给电子锁NFC接收模块的功率大小以及相位，提高充电效率，由此实现能为电子锁端提供相对更充足的电能，保证了开锁指令能有效得到响应，进而能实现有效开锁的能实现开锁功率提升的基于NFC电子钥匙授权开锁的方法。本发明解决其技术问题所采用的技术方案是：能实现开锁功率提升的基于NFC电子钥匙授权开锁的方法，其特征在于无源电子锁的电子锁端主控系统包括NFC天线和驱动模块、储能模块、NFC接收模块、电源模块、通讯及控制模块，无源电子锁的电子钥匙端具有NFC发射模块、防撞模块、比对模块、延时模块；开锁功率提升的开锁方法包括如下步骤，步骤A：相关人员经随身携带电子钥匙端的NFC发射模块先后发射出无线能量信号和开锁指令，具体的，电子钥匙端的防撞模块将开锁指令信道分为控制信道和数据信道，控制信道用于发送忙音信号和无源电子锁之间的NFC接收模块之间建立通讯，当发送请求后得到反馈、电子锁端受到BUSY信号干扰时则通过延时模块进行随机延时，延时结束后再次发送请求、直至电子锁端不再受到BUSY信息，完成与无源电子锁建立数据传输通讯的功能；步骤B：经电子钥匙端的数据信道，NFC发射模块通过NFC接收模块为电子锁供电的同时并建立通讯，通信建立完成后电子钥匙输出开锁命令，电子钥匙发射的无线能量信号先对电子锁内的电源模块进行充电，通讯及控制模块获取电子锁并发送、电源模块得到的电子钥匙端发射的馈电电流测量值，该测量值是电源模块充电的电流信息；步骤C：电子钥匙端将接收的电源模块充电电流信息和自身内部多个给定范围的边界所对应阈值,经比对模块进行比较，得出电子钥匙与电子锁之间的NFC发射模块及接收模块NFC位置是否对准，当偏离得越远、电子钥匙端测量值越低，在达到电子钥匙端移动到理想位置时，也就是电子钥匙端输出的功率和电子锁端接收的功率在最大阈值时，电子钥匙生成功率控制信号，提升输出给NFC接收模块的功率，并将输出给NFC接收模块的功率的相位调节至NFC发射模块的功率的相同相位，增加等效品质因数、提高电源模块充电效率，进而，驱动模块进行开锁操作为电子锁供电、其锁芯打开；步骤D：若NFC接收模块为感性或容性电路中的一种时，电子钥匙端控制输出相位与NFC接收模块的功率相位差，使NFC发射模块及NFC接收模块之间变为阻性电路，对无源电子锁的储能模块进行快速充能，当无源电子锁中的存储能量足以驱动电子锁时、驱动模块进行开锁操作为电子锁供电、其锁芯打开。进一步地，所述步骤A中，防撞模块对信号判断并进行控制输出，主要是确NFC发射模块、NPN接收模块之间收发无线信号指令及无线能量信号不受到外部设备的干扰。进一步地，所述步骤B中，电子锁发送的馈电电流测量值是电子锁NFC天线的末端之间的交流电流数据。进一步地，所述步骤C中，电子钥匙与电子锁之间的NFC发射模块及接收模块NFC位置对准时，达到最大值后，电子钥匙端的LED会发光或者讯响器发声提示相关人员。进一步地，所述步骤A中，电子钥匙端的NFC发射模块发射出的出开锁指令，是在电子钥匙与电子锁之间的NFC发射模块及接收模块NFC位置对准后。本发明有益效果是：本发明能经电子钥匙给电子锁授权，进行开锁，使得电子锁可以做到无源，无需对电子锁的电源进行更换。通过防撞模块的作用，电子钥匙和电子锁即使在复杂的应用场景下也能实现正常的应答，并减少了其他NFC设备带来的无线信号干扰，工作更加可靠；本发明中，当电子锁和电子钥匙端建立通讯连接后，电子钥匙端可通过电子锁端发送的馈电电流判定NFC收发模块是否对准，以实现电源模块最大效率的充能，且根据NFC装置的阻抗信息以及功率信息，能动态调节输出给电子锁电源模块的功率大小以及相位，提高了充电效率并降低了充电时间，由此实现能为电子锁端提供相对更充足的电能，保证了开锁指令能有效得到响应，进而能实现有效开锁的操作控制。综上，本发明具有好的应用前景。附图说明以下结合附图和实施例将本发明做进一步说明。图1是本发明开锁流程框图。图2是本发明防撞模块工作流框图。图3是本发明软件架构框图示意。具体实施方式图1、2、3中所示，能实现开锁功率提升的基于NFC电子钥匙授权开锁的方法，无源电子锁的电子锁端主控系统包括但不限定的NFC天线和驱动模块、储能模块、NFC接收模块、电源模块、通讯及控制模块，无源电子锁的电子钥匙具有但不限定的NFC发射模块、防撞模块、比对模块、延时模块。图1、2、3中所示，本实施例以智能井盖上安装的无源电子锁开锁为例做使用说明，相关人员通过授权的电子钥匙获得开启井盖电子锁的权限，具体的，开锁功率提升的开锁方法包括如下步骤。步骤A：相关人员经随身携带电子钥匙端的NFC发射模块先后发射出无线能量信号和开锁指令，具体的，电子钥匙端的防撞模块将开锁指令信道分为控制信道和数据信道，控制信道用于发送忙音信号和无源电子锁之间的NFC接收模块之间的通讯交互，当发送请求后得到反馈、电子锁端受到BUSY信号干扰时则通过延时模块进行随机延时，延时结束后再次发送请求、直至电子锁端不再受到BUSY信息干扰，完成与无源电子锁建立数据传输通讯；具体的，防撞模块对信号判断并进行控制输出，主要是确NFC发射模块、NPN接收模块之间收发无线信号指令及无线能量信号不受到外部设备的干扰。图1、2、3中所示，开锁功率提升的开锁方法，步骤B：经电子钥匙端的数据信道，NFC发射模块通过 NFC接收模块为电子锁供电的同时并建立通讯，通信建立完成后电子钥匙输出开锁命令，电子钥匙发射的无线能量信号先对电子锁内的电源模块进行充电，通讯及控制模块获取电子锁并发送、电源模块得到的电子钥匙端发射的馈电电流测量值，该测量值是电源模块充电的电流信息；步骤B中，电子锁发送的馈电电流测量值是电子锁NFC天线末端之间的交流电流数据。图1、2、3中所示，开锁功率提升的开锁方法，步骤C：电子钥匙端将接收的电源模块充电电流信息和自身内部多个给定范围的边界所对应阈值,经比对模块进行比较，得出电子钥匙与电子锁之间的NFC发射模块及接收模块NFC位置是否对准，当偏离得越远、电子钥匙端测量值越低，反之越大，在达到电子钥匙端移动到理想位置时，也就是电子钥匙端输出的功率和电子锁端接收的功率在最大阈值时，范围R2包括低于最大值并且高于或等于160mA的值X，范围R3包括低于160mA 并且高于或等于80mA的值X,范围R4包括低于80mA的值X，电子钥匙生成功率控制信号，提升输出给NFC接收模块的功率，并将输出给NFC接收模块的功率的相位调节至NFC发射模块的功率的相同相位，增加等效品质因数、提高充电效率。具体的，电子钥匙与电子锁之间的NFC发射模块及接收模块NFC位置对准时，达到最大值后，电子钥匙端的LED会发光或者讯响器发声提示相关人员，进而，驱动模块进行开锁操作为电子锁供电、其锁芯打开。图1、2、3中所示，开锁功率提升的开锁方法，步骤D：若NFC接收模块为感性或容性电路中的一种时，电子钥匙端控制输出相位与NFC接收模块的功率相位差，使NFC发射模块及NFC接收模块之间变为阻性电路，对无源电子锁的储能模块进行快速充能，当无源电子锁中的存储能量足以驱动电子锁时、驱动模块进行开锁操作为电子锁供电、其锁芯打开。电子钥匙端的NFC发射模块发射出的出开锁指令，是在电子钥匙与电子锁之间的NFC发射模块及接收模块NFC位置对准后。图1、2、3中所示，本发明能经电子钥匙给电子锁授权进行开锁，使得电子锁可以做到无源，无需对电子锁的电源进行更换。通过防撞模块的作用，使得电子钥匙和电子锁即使在复杂的应用场景下也能实现正常应答，并减少了其他NFC设备带来的无线信号干扰，工作更加可靠；本发明中，当电子锁和电子钥匙端建立通讯后，电子钥匙端可通过电子锁端发送的馈电电流判定NFC收发模块是否对准，以实现最大效率的充能，且根据设备的阻抗信息以及功率信息，动态调节输出给电子锁电源模块的功率大小以及相位，提高了充电效率并降低了充电时间，由此实现能为电子锁端提供相对更充足的电能，保证了开锁指令能有效得到响应，进而能实现有效开锁操作控制。应当理解，虽然本说明书按照实施方式加以描述，但并非实施方式仅包含一个独立的技术方案，说明书的这种叙述方式仅仅是为清楚起见，本领域技术人员应当将说明书作为一个整体，实施例中的技术方案也可以经适当组合，形成本领域技术人员可以理解的其他实施方式，本发明的保护范围在权利要求书记载范围之内。
