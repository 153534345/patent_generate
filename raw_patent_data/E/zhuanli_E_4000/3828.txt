标题title
列车车门控制方法、计算机装置及存储介质
摘要abst
本发明公开了一种列车车门控制方法、计算机装置及存储介质，列车车门控制方法包括获取列车的车门传感数据和车门视频数据，对车门视频数据进行图像识别，确定乘客动作倾向，根据车门传感数据和乘客动作倾向，控制列车的车门动作等步骤。本发明应用图像识别去控制列车车门动作，避免依赖车门传感器等设备测得的单一控制量，与使用车门传感器等设备相比，能够直接判断列车车门是否夹住人或物体，而且能够在列车车门实际夹住人或物体之前预判列车车门是否会夹住人或物体，从而及时做出控制，因此本实施例中的列车车门控制方法能够对列车车门动作进行更精准的判断，降低因列车车门夹住人或物体造成的损失。本发明广泛应用于工业控制技术领域。
权利要求书clms
1.一种列车车门控制方法，其特征在于，所述列车车门控制方法包括：获取列车的车门传感数据和车门视频数据；对所述车门视频数据进行图像识别，确定乘客动作倾向；根据所述车门传感数据和所述乘客动作倾向，控制列车的车门动作。2.根据权利要求1所述的列车车门控制方法，其特征在于，所述获取列车的车门传感数据和车门视频数据，包括：获取所述车门传感数据；当所述车门传感数据的数值达到第一范围，确定所述车门传感数据对应的车门位置；获取对所述车门位置拍摄得到的所述车门视频数据。3.根据权利要求2所述的列车车门控制方法，其特征在于，所述获取列车的车门传感数据和车门视频数据，还包括：将所述车门传感数据和所述车门视频数据，通过5G基站发送至网络数据分析功能网元。4.根据权利要求1-3任一项所述的列车车门控制方法，其特征在于，所述对所述车门视频数据进行图像识别，确定乘客动作倾向，包括：对所述车门视频数据进行时空动作检测，获得乘客动作时序信息；根据所述乘客动作时序信息，确定乘客在各个时刻的真实移动速度；根据各所述真实移动速度进行预测，获得预测移动速度；将所述预测移动速度确定为所述乘客动作倾向。5.根据权利要求4所述的列车车门控制方法，其特征在于，所述对所述车门视频数据进行时空动作检测，包括：确定视频截取范围；从所述车门视频数据截取得到待检测视频数据；所述待检测视频数据为所述车门视频数据中位于所述视频截取范围内的部分；对所述待检测视频数据进行时空动作检测。6.根据权利要求5所述的列车车门控制方法，其特征在于，所述确定视频截取范围，包括：获取列车的客流量；根据所述客流量，确定所述视频截取范围；所述视频截取范围的大小与所述客流量的大小正相关。7.根据权利要求4所述的列车车门控制方法，其特征在于，所述根据所述车门传感数据和所述乘客动作倾向，控制列车的车门动作，包括：根据所述乘客动作倾向确定乘客到达车门位置的第一时刻；根据所述车门传感数据确定车门动作至预定位置的第二时刻；当所述第一时刻和所述第二时刻之间的时间差小于时间阈值，生成暂停执行车门动作的控制指令。8.根据权利要求7所述的列车车门控制方法，其特征在于，所述列车车门控制方法还包括：将所述控制指令通过5G基站发送至车门控制系统。9.一种计算机装置，其特征在于，包括存储器和处理器，所述存储器用于存储至少一个程序，所述处理器用于加载所述至少一个程序以执行权利要求1-8任一项所述的列车车门控制方法。10.一种计算机可读存储介质，其中存储有处理器可执行的程序，其特征在于，所述处理器可执行的程序在由处理器执行时用于执行权利要求1-8任一项所述的列车车门控制方法。
说明书desc
技术领域本发明涉及工业控制技术领域，尤其是一种列车车门控制方法、计算机装置及存储介质。背景技术地铁和高铁等列车交通工具具有运力强等特点，能够满足城市内以及城市间广大群众的出行需求。目前的列车基本已全部安装自动开关的车门，存在着乘客的身体、衣物或者随身物品被车门夹住的风险，从而造成身体损害或者财物损失，也会对列车设备造成损害。为了实现列车的安全运行，目前的相关技术中普遍在车门安装防夹保护装置。防夹保护装置一般是基于传感器工作，例如一些防夹保护装置带有转速传感器，通过转速传感器检测用来驱动车门的电机的转速，当转速异常时判断乘客或者物体被车门夹住，从而控制电机停止继续驱动车门，实现防夹的效果。目前的相关技术是通过检测某一物理量来判断车门是否夹住物体，但是这一物理量的变化与车门是否夹住物体之间的关联性不强，容易受到各种因素干扰，因此容易造成误判，例如地铁上时有发生车门实际并无夹住物体，但仍控制车门打开重新关闭，以及乘客的衣物被夹住但是列车照常开动等事件。发明内容针对目前的车门防夹保护装置依赖的控制变量单一，容易导致误判等技术问题，本发明的目的在于提供一种列车车门控制方法、计算机装置及存储介质。一方面，本发明实施例包括一种列车车门控制方法，包括：获取列车的车门传感数据和车门视频数据；对所述车门视频数据进行图像识别，确定乘客动作倾向；根据所述车门传感数据和所述乘客动作倾向，控制列车的车门动作。进一步地，所述获取列车的车门传感数据和车门视频数据，包括：获取所述车门传感数据；当所述车门传感数据的数值达到第一范围，确定所述车门传感数据对应的车门位置；获取对所述车门位置拍摄得到的所述车门视频数据。进一步地，所述获取列车的车门传感数据和车门视频数据，还包括：将所述车门传感数据和所述车门视频数据，通过5G基站发送至网络数据分析功能网元。进一步地，所述对所述车门视频数据进行图像识别，确定乘客动作倾向，包括：对所述车门视频数据进行时空动作检测，获得乘客动作时序信息；根据所述乘客动作时序信息，确定乘客在各个时刻的真实移动速度；根据各所述真实移动速度进行预测，获得预测移动速度；将所述预测移动速度确定为所述乘客动作倾向。进一步地，所述对所述车门视频数据进行时空动作检测，包括：确定视频截取范围；从所述车门视频数据截取得到待检测视频数据；所述待检测视频数据为所述车门视频数据中位于所述视频截取范围内的部分；对所述待检测视频数据进行时空动作检测。进一步地，所述确定视频截取范围，包括：获取列车的客流量；根据所述客流量，确定所述视频截取范围；所述视频截取范围的大小与所述客流量的大小正相关。进一步地，所述根据所述车门传感数据和所述乘客动作倾向，控制列车的车门动作，包括：根据所述乘客动作倾向确定乘客到达车门位置的第一时刻；根据所述车门传感数据确定车门动作至预定位置的第二时刻；当所述第一时刻和所述第二时刻之间的时间差小于时间阈值，生成暂停执行车门动作的控制指令。进一步地，所述列车车门控制方法还包括：将所述控制指令通过5G基站发送至车门控制系统。另一方面，本发明实施例还包括一种计算机装置，包括存储器和处理器，所述存储器用于存储至少一个程序，所述处理器用于加载所述至少一个程序以执行实施例中的列车车门控制方法。另一方面，本发明实施例还包括一种存储介质，其中存储有处理器可执行的程序，所述处理器可执行的程序在由处理器执行时用于执行实施例中的列车车门控制方法。本发明的有益效果是：实施例中的列车车门控制方法，应用图像识别去控制列车车门动作，避免依赖车门传感器等设备测得的单一控制量，与通过车门传感器等设备间接判断列车车门是否夹住人或物体相比，根据图像识别结果能够直接判断列车车门是否夹住人或物体，而且能够在列车车门实际夹住人或物体之前预判列车车门是否会夹住人或物体，从而及时做出控制，因此本实施例中的列车车门控制方法能够对列车车门动作进行更精准的判断，降低因列车车门夹住人或物体造成的损失；实施例中的列车车门控制方法能够使用基于5G或者更先进的通信网络实现，执行实施例中的列车车门控制方法时可以无需额外配备硬件设备，只需在列车和车站原有安装的硬件设备的基础上接入云计算系统即可实现，从而降低使用成本。附图说明图1为实施例中的列车车门控制方法的各步骤示意图；图2为应用实施例中的列车车门控制方法的系统结构示意图；图3为实施例中由车内摄像头拍摄得到的车门视频数据的画面示意图；图4为实施例中由站台摄像头拍摄得到的车门视频数据的画面示意图；图5为实施例中视频截取范围的示意图。具体实施方式本实施例中，参照图1，列车车门控制方法包括以下步骤：S1.获取列车的车门传感数据和车门视频数据；S2.对车门视频数据进行图像识别，确定乘客动作倾向；S3.根据车门传感数据和乘客动作倾向，控制列车的车门动作。本实施例中，可以在图2所示的系统应用列车车门控制方法。图2中，列车车门、车内摄像头、列车车门传感器、列车通信系统和车门控制系统等部分安装在列车上，站台摄像头、站台屏蔽门传感器、车站通信系统、站台屏蔽门和屏蔽门控制系统等部分安装在车站。5G基站可以安装在车站内部或者外部，网络数据分析功能网元可以安装在服务端。本实施例中，“车门”可以是指列车上安装的车门，也可以是指站台端与列车车门对应的屏蔽门。当需要控制列车上安装的车门，可以由车内摄像头和列车车门传感器执行步骤S1；当需要控制站台上安装的屏蔽门，可以由站台摄像头和站台屏蔽门传感器执行步骤S1。其中，由车内摄像头拍摄得到的车门视频数据的画面效果如图3所示，由站台摄像头拍摄得到的车门视频数据的画面效果如图4所示。车内摄像头和站台摄像头可以是专门设置的摄像头，也可以是用于安监的摄像头。由于由车内摄像头和列车车门传感器执行步骤S1与由站台摄像头和站台屏蔽门传感器执行步骤S1的原理相同，因此本实施例中以由车内摄像头和列车车门传感器执行步骤S1为例进行说明。本实施例中，在执行步骤S1，也就是获取列车的车门传感数据和车门视频数据这一步骤时，具体可以执行以下步骤：S101.获取车门传感数据；S102.当车门传感数据的数值达到第一范围，确定车门传感数据对应的车门位置；S103.获取对车门位置拍摄得到的车门视频数据。本实施例中，列车车门传感器的类型可以是车门位置传感器、压力传感器或者这些传感器的组合。列车车门传感器通过车门位置传感器可以检测车门的位置信息，即车门处于全开、全关或者开关程度等信息；列车车门传感器通过压力传感器可以检测车门受到的压力，即车门是否被乘客倚靠等信息；列车车门传感器将这些信息打包生成车门传感数据。步骤S101中，列车通信系统通过列车车门传感器获取到车门传感数据后，判断车门传感数据的数值达到第一范围。具体地，第一范围可以用来限定车门的位置的范围，当列车车门传感器检测到的车门的位置处于第一范围内，可以判断车门的位置被打开或者关闭的程度足够大，从而触发继续执行步骤S102以及后续步骤；第一范围可以用来限定车门受到的压力的范围，当列车车门传感器检测到的车门受到的压力处于第一范围内，可以判断车门受到的压力足够大，从而判断车门被乘客倚靠，触发继续执行步骤S102以及后续步骤。步骤S102中，当车门传感数据的数值达到第一范围，确定车门传感数据对应的车门位置。具体地，可以通过发出车门传感数据的列车车门传感器的地址，确定列车车门传感器对应的车门的编号。步骤S103中，根据步骤S102所确定的车门的编号，调取这个车门附近的车内摄像头拍摄得到的车门视频数据，这个车门将出现在车门视频数据播放出的画面中。通过执行步骤S101-S103，可以先获取车门传感数据，当车门传感数据的数值达到第一范围，从而能够判断发生了“车门的位置被打开或者关闭的程度足够大”或者“车门被乘客倚靠”等有可能导致乘客身体、衣物或随身物品被夹的事件时，再去调用相应的车门视频数据进行处理，由于车门传感数据的数据量一般比车门视频数据小，因此可以避免直接调用车门视频数据，从而降低需要处理的数据量。在执行完步骤S1后，列车通信系统将车门传感数据和车门视频数据通过5G基站发送至NWDAF，由NWDAF执行步骤S2和S3。本实施例中，NWDAF在执行步骤S2，也就是对车门视频数据进行图像识别，确定乘客动作倾向这一步骤时，具体可以执行以下步骤：S201.对车门视频数据进行时空动作检测，获得乘客动作时序信息；S202.根据乘客动作时序信息，确定乘客在各个时刻的真实移动速度；S203.根据各真实移动速度进行预测，获得预测移动速度；将预测移动速度确定为乘客动作倾向。步骤S201中，可以使用MOC-detector等时空动作检测算法对车门视频数据进行检测，从而获得乘客动作时序信息。MOC-detector将时空动作检测任务分解为三个子任务：1.中心检测：检测动作实例的中心以及类别；2.偏移估计：估计当前帧动作实例对于中心的偏移；3.框回归：再每一帧的中心预测框大小。通过使用MOC-detector，可以识别出车门视频数据中每帧的乘客的动作实例，各帧的识别结果组成乘客动作时序信息。步骤S202中，根据乘客动作时序信息，确定乘客在各个时刻的真实移动速度。步骤S203中，可以使用长短期记忆等算法，对步骤S202中获得的各时刻下的真实移动速度进行预测，获得预测移动速度，即预测乘客在未来一个时刻的移动速度。步骤S203所获得的预测移动速度即为乘客动作倾向。在执行步骤S201，也就是对车门视频数据进行时空动作检测这一步骤时，可以使用MOC-detector等时空动作检测算法，对车门视频数据中的每一帧完整画面进行检测，也可以对于车门视频数据中的每一帧，从完整画面中截取出一部分，使用MOC-detector等时空动作检测算法对截取出的一部分进行处理，从而减少进行时空动作检测的数据处理量。在执行步骤S201时，具体地，可以参照图5确定视频截取范围。图5中的虚线方框表示一个可能的视频截取范围，即对于图5所示的车门视频数据中的一帧画面，将虚线方框内的部分截取出来作为这一帧对应的待检测视频数据，使用MOC-detector等时空动作检测算法对截取出的待检测视频数据进行时空动作检测。本实施例中，车内摄像头的拍摄角度一般是固定的，因此可以预先设置好视频截取范围的初始边界，保持视频截取范围的大小固定。也可以通过查询客流量-时间对应关系表、对车内摄像头拍摄到的画面进行人脸识别、查询车站实时人流等方式，获取列车的客流量，根据客流量，确定视频截取范围，使得视频截取范围的大小与客流量的大小正相关，即客流量越大，则视频截取范围越大，所截取出的待检测视频数据的画面视野范围越大，时空动作检测算法所处理的待检测视频数据量越大。在根据客流量调整视频截取范围时，可以保持视频截取范围始终将初始边界包括在内。通过根据客流量调整视频截取范围，能够在客流量较大、发生乘客被车门夹住的风险较大时，增大时空动作检测算法所处理的待检测视频数据量，时空动作检测算法所处理的数据量增大有利于输出更准确的乘客动作倾向；在客流量较小、发生乘客被车门夹住的风险较小时，降低时空动作检测算法所处理的待检测视频数据量，能够降低数据处理带来的网络负荷，从而起到节约资源的效果。因此，通过根据客流量调整视频截取范围，能够起到资源消耗、网络负荷与乘客被车门夹住的风险相匹配的作用，能够在降低资源消耗、降低网络负荷与降低乘客被车门夹住的风险之间取得平衡。本实施例中，NWDAF在执行步骤S3，也就是根据车门传感数据和乘客动作倾向，控制列车的车门动作这一步骤时，具体可以执行以下步骤：S301.根据乘客动作倾向确定乘客到达车门位置的第一时刻；S302.根据车门传感数据确定车门动作至预定位置的第二时刻；S303.当第一时刻和第二时刻之间的时间差小于时间阈值，生成暂停执行车门动作的控制指令。步骤S301中，可以根据步骤S203的结果，乘客动作倾向为预测移动速度，通过计算乘客在车门视频数据中的位置与车门位置之间的距离，与预测移动速度之间的商，可以确定乘客到达车门位置的时长，与当前时刻相加，可以得到第一时刻，即预计乘客动作倾向确定乘客到达车门位置的时刻。步骤S302中，车门传感数据中包括了电机转速与车门当前位置等信息，根据车门当前位置可以确定车门开启或者关闭至预定位置所要进行的行程，以行程除以车门开启或关闭的速度所得到的商，可以确定车门开启或者关闭至预定位置所需的时长，与当前时刻相加，可以得到第二时刻，即预计确定车门开启或者关闭至预定位置的时刻。在步骤S301所获得的第一时刻早于步骤S302所获得的第二时刻的情况下，可以预计确定车门开启或者关闭至预定位置之前，乘客已到达车门所在位置，因此存在着乘客被车门夹住的风险。在此情况下，第一时刻和第二时刻之间的时间差越小，则留给乘客的反应时间越小，乘客被车门夹住的风险越大。步骤S303中，可以设定一个时间阈值，当第一时刻和第二时刻之间的时间差小于时间阈值，则可以判断第一时刻和第二时刻之间的时间差足够小，乘客被车门夹住的风险足够大，NWDAF生成暂停执行车门动作的控制指令。在执行完步骤S3后，参照图2，NWDAF将暂停执行车门动作的控制指令通过5G基站发送至车门控制系统，由车门控制系统执行控制指令，暂停执行车门动作，从而避免乘客被车门夹住。在由站台摄像头和站台屏蔽门传感器执行步骤S1的情况下，在执行完步骤S3后，参照图2，NWDAF将暂停执行车门动作的控制指令通过5G基站发送至屏蔽门控制系统，由屏蔽门控制系统执行控制指令，暂停执行站台屏蔽门动作，从而避免乘客被站台屏蔽门夹住。本实施例中的列车车门控制方法，应用图像识别去控制列车车门动作，避免依赖车门传感器等设备测得的单一控制量，与通过车门传感器等设备间接判断列车车门是否夹住人或物体相比，根据图像识别结果能够直接判断列车车门是否夹住人或物体，而且能够在列车车门实际夹住人或物体之前预判列车车门是否会夹住人或物体，从而及时做出控制，因此本实施例中的列车车门控制方法能够对列车车门动作进行更精准的判断，降低因列车车门夹住人或物体造成的损失；本实施例中的列车车门控制方法能够使用基于5G或者更先进的通信网络实现，可以使用图2所示的5G云计算系统执行本实施例中的列车车门控制方法，基于5G通信网络低时延、高带宽、多接入、全双工等的优点，执行本实施例中的列车车门控制方法时可以无需额外配备硬件设备，只需在列车和车站原有安装的硬件设备的基础上接入5G云计算系统即可实现，从而降低使用成本。可以通过编写执行本实施例中的列车车门控制方法的计算机程序，将该计算机程序写入至计算机装置或者存储介质中，当计算机程序被读取出来运行时，执行本实施例中的列车车门控制方法，从而实现与实施例中的列车车门控制方法相同的技术效果。需要说明的是，如无特殊说明，当某一特征被称为“固定”、“连接”在另一个特征，它可以直接固定、连接在另一个特征上，也可以间接地固定、连接在另一个特征上。此外，本公开中所使用的上、下、左、右等描述仅仅是相对于附图中本公开各组成部分的相互位置关系来说的。在本公开中所使用的单数形式的“一种”、“所述”和“该”也旨在包括多数形式，除非上下文清楚地表示其他含义。此外，除非另有定义，本实施例所使用的所有的技术和科学术语与本技术领域的技术人员通常理解的含义相同。本实施例说明书中所使用的术语只是为了描述具体的实施例，而不是为了限制本发明。本实施例所使用的术语“和/或”包括一个或多个相关的所列项目的任意的组合。应当理解，尽管在本公开可能采用术语第一、第二、第三等来描述各种元件，但这些元件不应限于这些术语。这些术语仅用来将同一类型的元件彼此区分开。例如，在不脱离本公开范围的情况下，第一元件也可以被称为第二元件，类似地，第二元件也可以被称为第一元件。本实施例所提供的任何以及所有实例或示例性语言的使用仅意图更好地说明本发明的实施例，并且除非另外要求，否则不会对本发明的范围施加限制。应当认识到，本发明的实施例可以由计算机硬件、硬件和软件的组合、或者通过存储在非暂时性计算机可读存储器中的计算机指令来实现或实施。所述方法可以使用标准编程技术-包括配置有计算机程序的非暂时性计算机可读存储介质在计算机程序中实现，其中如此配置的存储介质使得计算机以特定和预定义的方式操作——根据在具体实施例中描述的方法和附图。每个程序可以以高级过程或面向对象的编程语言来实现以与计算机系统通信。然而，若需要，该程序可以以汇编或机器语言实现。在任何情况下，该语言可以是编译或解释的语言。此外，为此目的该程序能够在编程的专用集成电路上运行。此外，可按任何合适的顺序来执行本实施例描述的过程的操作，除非本实施例另外指示或以其他方式明显地与上下文矛盾。本实施例描述的过程可在配置有可执行指令的一个或多个计算机系统的控制下执行，并且可作为共同地在一个或多个处理器上执行的代码、由硬件或其组合来实现。所述计算机程序包括可由一个或多个处理器执行的多个指令。进一步，所述方法可以在可操作地连接至合适的任何类型的计算平台中实现，包括但不限于个人电脑、迷你计算机、主框架、工作站、网络或分布式计算环境、单独的或集成的计算机平台、或者与带电粒子工具或其它成像装置通信等等。本发明的各方面可以以存储在非暂时性存储介质或设备上的机器可读代码来实现，无论是可移动的还是集成至计算平台，如硬盘、光学读取和/或写入存储介质、RAM、ROM等，使得其可由可编程计算机读取，当存储介质或设备由计算机读取时可用于配置和操作计算机以执行在此所描述的过程。此外，机器可读代码，或其部分可以通过有线或无线网络传输。当此类媒体包括结合微处理器或其他数据处理器实现上文所述步骤的指令或程序时，本实施例所述的发明包括这些和其他不同类型的非暂时性计算机可读存储介质。当根据本发明所述的方法和技术编程时，本发明还包括计算机本身。计算机程序能够应用于输入数据以执行本实施例所述的功能，从而转换输入数据以生成存储至非易失性存储器的输出数据。输出信息还可以应用于一个或多个输出设备如显示器。在本发明优选的实施例中，转换的数据表示物理和有形的对象，包括显示器上产生的物理和有形对象的特定视觉描绘。以上所述，只是本发明的较佳实施例而已，本发明并不局限于上述实施方式，只要其以相同的手段达到本发明的技术效果，凡在本发明的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本发明保护的范围之内。在本发明的保护范围内其技术方案和/或实施方式可以有各种不同的修改和变化。
