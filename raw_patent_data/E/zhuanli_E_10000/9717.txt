标题title
一种贵金属存储方法、装置、设备及系统
摘要abst
本发明公开了一种贵金属存储方法、装置、设备及系统，属于贵金属存储领域；首先以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位上，这样能够得到抽屉在哈希环上的点位顺序，在存储贵金属时，依照该点位顺序进行存储。由于将存储顺序转换为哈希环上的点位顺序，这样每段时间存储时，抽屉使用率较为均匀。同时，当扩容时，只需要将新的抽屉部署到哈希环的点位上，无需移动之前抽屉在哈希环的位置，保证了使用均衡的同时，保留了扩容能力，能够满足业务的需求。
权利要求书clms
1.一种贵金属存储方法，其特征在于，包括以下步骤：以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位；依照所述抽屉在哈希环上的点位顺序依次对贵金属进行存储。2.根据权利要求1所述的方法，其特征在于：所述哈希环的点位数量为2n，所述以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位，包括：定义衰减跨度x＝2n-1和衰减周期y＝2i，i从0开始，当部署次数等于y时，将抽屉部署到哈希环节点后，i自增1；将所述哈希环上任一点位设置为原点，原点处A＝0，A为抽屉将要部署在哈希环上的节点的点位位置；节点的点位位置为：若部署次数不大于y，先部署一次A＝A+x，再部署一次A＝A+2n-1，按照两种方式轮流部署；若部署过程中，部署次数等于y时，将抽屉部署到哈希环节点后，部署次数归零，令x＝x/2。3.根据权利要求1所述的方法，其特征在于：所述依照所述抽屉在哈希环上的点位顺序依次对贵金属进行存储，包括：从哈希环原点开始，依照特定顺序将哈希环上的抽屉进行排序，所述特定顺序包括顺时针或逆时针；根据排序依次对贵金属进行存储。4.根据权利要求1所述的方法，其特征在于，还包括：获取待存储贵金属所属用户的个人信息并根据所述个人信息生成哈希值；判断是否存在目标抽屉存储有所述哈希值对应的客户的贵金属；若有，则将所述待存储贵金属存储到所述目标抽屉中。5.根据权利要求4所述的方法，其特征在于：若无，则依照所述抽屉在哈希环上的点位顺序依次对所述贵金属进行存储。6.一种贵金属存储装置，其特征在于，包括：抽屉部署模块，用于以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位；贵金属存储模块，用于依照所述抽屉在哈希环上的点位顺序依次对贵金属进行存储。7.一种贵金属存储设备，其特征在于，包括：处理器；用于存储所述处理器的可执行指令的存储器；所述处理器被配置为用于执行权利要求1-5任一项所述的方法。8.一种贵金属存储系统，其特征在于：所述系统采用权利要求1-5任一项所述的方法将所述贵金属存储到存储柜中。
说明书desc
技术领域本发明涉及贵金属存储领域，特别地，涉及一种贵金属存储方法、装置、设备及系统。背景技术实物贵金属的存储业务中，需要将用户的贵金属产品存储在金库的存储柜中，由于金库中存在多个存储柜，在存储时，需要保证在预设时长内每个存储柜的使用率相对平均，否则会浪费存储柜的存储空间。现有的贵金属存储分配方案主要由人工方式进行，包含以下缺陷：人工分配贵金属产品的具体存储位置的方式效率低且出错率高、库存分配记录数据不完整、人工分配方式主观性太强，缺乏科学合理性、库管人员不规范操作、手工记录可能被伪造篡改，不具备公信力等问题。也有通过算法来计算贵金属存储位置的方式，如通过常见的负载均衡算法，根据客户信息或其他条件计算得出该贵金属实物的具体存储位置。常见的负载均衡算法如：轮询法、随机算法、源地址哈希法和键值范围法等算法，或多或少的存在一些问题，例如：易负载不均衡、各贵金属储存柜使用率相差大、不能保证高可用或者效率低等问题，无法完全满足业务的需求。发明内容为了克服现有技术的不足，本发明提供一种贵金属存储方法、装置、设备及系统，以解决现有贵金属存储方法易负载不均衡、各贵金属储存柜使用率相差大、不能保证高可用或者效率低等问题，无法完全满足业务的需求的问题。本发明解决其技术问题所采用的技术方案是：第一方面，一种贵金属存储方法，包括以下步骤：以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位；依照所述抽屉在哈希环上的点位顺序依次对贵金属进行存储。进一步地，所述哈希环的点位数量为2n，所述以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位，包括：定义衰减跨度x＝2n-1和衰减周期y＝2i，i从0开始，当部署次数等于y时，将抽屉部署到哈希环节点后，i自增1；将所述哈希环上任一点位设置为原点，原点处A＝0，A为抽屉将要部署在哈希环上的节点的点位位置；节点的点位位置为：若部署次数不大于y，先部署一次A＝A+x，再部署一次A＝A+2n-1，按照两种方式轮流部署；若部署过程中，部署次数等于y时，将抽屉部署到哈希环节点后，部署次数归零，令x＝x/2。进一步地，所述依照所述抽屉在哈希环上的点位顺序依次对贵金属进行存储，包括：从哈希环原点开始，依照特定顺序将哈希环上的抽屉进行排序，所述特定顺序包括顺时针或逆时针；根据排序依次对贵金属进行存储。进一步地，还包括：获取待存储贵金属所属用户的个人信息并根据所述个人信息生成哈希值；判断是否存在目标抽屉存储有所述哈希值对应的客户的贵金属；若有，则将所述待存储贵金属存储到所述目标抽屉中。进一步地，若无，则依照所述抽屉在哈希环上的点位顺序依次对所述贵金属进行存储。第二方面，一种贵金属存储装置，包括：抽屉部署模块，用于以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位；贵金属存储模块，用于依照所述抽屉在哈希环上的点位顺序依次对贵金属进行存储。第三方面，一种贵金属存储设备，包括：处理器；用于存储所述处理器的可执行指令的存储器；所述处理器被配置为用于执行第一方面技术方案中任一项所述的方法。第四方面，一种贵金属存储系统，所述系统采用第一方面技术方案中任一项所述的方法将所述贵金属存储到存储柜中。有益效果：本申请技术方案提供一种贵金属存储方法、装置、设备及系统，首先以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位上，这样能够得到抽屉在哈希环上的点位顺序，在存储贵金属时，依照该点位顺序进行存储。由于将存储顺序转换为哈希环上的点位顺序，这样每段时间存储时，抽屉使用率较为均匀。同时，当扩容时，只需要将新的抽屉部署到哈希环的点位上，无需移动之前抽屉在哈希环的位置，保证了使用均衡的同时，保留了扩容能力，能够满足业务的需求。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明实施例提供的一种贵金属存储方法流程图；图2是本发明实施例提供的一种哈希环上抽屉部署位置示意图；图3是本发明实施例提供的一种贵金属存储装置结构示意图。具体实施方式为使本申请的目的、技术方案和优点更加清楚，下面结合附图和实施例对本发明的技术方案进行详细的描述说明。显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动的前提下所得到的所有其它实施方式，都属于本申请所保护的范围。第一实施例，参照图1，本发明实施例提供了一种贵金属存储方法，包括以下步骤：以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位；依照所述抽屉在哈希环上的点位顺序依次对贵金属进行存储。本发明实施例提供的贵金属存储方法，首先以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位上，这样能够得到抽屉在哈希环上的点位顺序，在存储贵金属时，依照该点位顺序进行存储。由于将存储顺序转换为哈希环上的点位顺序，这样每段时间存储时，抽屉使用率较为均匀。同时，当扩容时，只需要将新的抽屉部署到哈希环的点位上，无需移动之前抽屉在哈希环的位置，保证了使用均衡的同时，保留了扩容能力，能够满足业务的需求。第二实施例，作为对第一实施例的补充，本发明提供一种具体的贵金属存储方法，包括以下步骤：以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位；具体地，所述哈希环的点位数量为2n，所述以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位，包括：定义衰减跨度x＝2n-1和衰减周期y＝2i，i从0开始，当部署次数等于y时，将抽屉部署到哈希环节点后，i自增1；将所述哈希环上任一点位设置为原点，原点处A＝0，A为抽屉将要部署在哈希环上的节点的点位位置；节点的点位位置为：若部署次数不大于y，先部署一次A＝A+x，再部署一次A＝A+2n-1，按照两种方式轮流部署；若部署过程中，部署次数等于y时，将抽屉部署到哈希环节点后，部署次数归零，令x＝x/2。依照所述抽屉在哈希环上的点位顺序依次对贵金属进行存储。具体地，从哈希环原点开始，依照特定顺序将哈希环上的抽屉进行排序，所述特定顺序包括顺时针或逆时针；根据排序依次对贵金属进行存储。如图2所示，以n＝31为例说明具体实施方式，此时上述哈希环上节点为0-231-1。当将第一个抽屉部署到第一个节点node1时，部署次数为1，衰减跨度x此时等于230，衰减周期y＝20＝1，此时部署次数与衰减周期y相等，则将第一个抽屉部署在A＝0+x＝0+230＝230处，即哈希环第230节点处。由于此时部署次数与衰减周期相等，则部署次数清零，衰减跨度x＝230/2＝229，衰减周期中i自增1此时i＝1，y＝2；因此将第二个抽屉部署到第二个节点node2时，部署次数为1，小于衰减周期y，则将第二个抽屉部署在A＝230+229处，此时部署次数为1小于衰减周期y，部署次数无需清零；则当将第三个抽屉部署到第三个节点node3时，部署次数为2，部署在A＝+230，虽然此时A大于231，但是因为哈希环为圆环，即此时A＝229，则第三节点node3在A＝229处。由于此时部署次数为2与衰减周期y相等，则将部署次数清零，然后衰减跨度x＝229/2＝228；当将第四个抽屉部署到第四节点node4时，部署次数从1重新开始计算，依据上述步骤进行部署。后续抽屉依次部署到节点node5、node6和node7及nodeN，部署原理依据上述步骤进行部署。当新增抽屉时，仅需要按照上述步骤进行部署即可，无需变更以前抽屉所在节点的位置。同时，由于当部署次数为偶数时节抽屉部署的节点位置与上一部署时节点的位置为对称。贵金属存储时，以顺时针为例，从原点开始以顺时针的顺序将贵金属存储在距离原点最近的节点所对应的抽屉，如图2所示，存储方式为node6-node3-node4……。如图2所示，当仅有2个节点时，存储的顺序依次为node1-node2。而当扩容两个节点后，存储的顺序为node3-node4-node1-node2。作为本发明实施例一种可选的实现方式，还包括，获取待存储贵金属所属用户的个人信息并根据所述个人信息生成哈希值；判断是否存在目标抽屉存储有所述哈希值对应的客户的贵金属；若有，则将所述待存储贵金属存储到所述目标抽屉中。若无，则依照所述抽屉在哈希环上的点位顺序依次对所述贵金属进行存储。保证同一用户的贵金属存放在同一个抽屉中。本发明实施例提供的具体的贵金属存储方法，具有以下优点：根据客户信息自动生成具体储存位置方案，数据记录便于保存，最大程度减低人力成本的同时提高了效率，且相比于人为操作，基于算法的计算方式使得存储方案更加科学合理；可以有效保证各个储物抽屉的平均分布，根据客户请求将保管的贵金属平均存储在各个具体的储物柜中，提高储物柜的使用效率；保持了扩容能力，便于后续在不影响原有存储方案的情况下进行库房的扩容，增加新的存储柜或抽屉；可以使指定的客户请求都分配到指定的存储柜中，由此不同客户的贵金属产品分开保存，特定客户也可以根据不同客户等级将代保管贵金属分门别类的保存在特定的储物柜中，便于资产盘点及客户的存取。第三实施例，本发明提供一种贵金属存储装置，如图3所示，包括：抽屉部署模块31，用于以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位；具体地，所述哈希环的点位数量为2n，定义衰减跨度x＝2n-1和衰减周期y＝2i，i从0开始，当部署次数等于y时，将抽屉部署到哈希环节点后，i自增1；将所述哈希环上任一点位设置为原点，原点处A＝0，A为抽屉将要部署在哈希环上的节点的点位位置；节点的点位位置为：若部署次数不大于y，先部署一次A＝A+x，再部署一次A＝A+2n-1，按照两种方式轮流部署；若部署过程中，部署次数等于y时，将抽屉部署到哈希环节点后，部署次数归零，令x＝x/2。贵金属存储模块32，用于依照所述抽屉在哈希环上的点位顺序依次对贵金属进行存储。具体地，哈希环原点开始，依照特定顺序将哈希环上的抽屉进行排序，所述特定顺序包括顺时针或逆时针；根据排序依次对贵金属进行存储。贵金属存储模块32还用于获取待存储贵金属所属用户的个人信息并根据所述个人信息生成哈希值；判断是否存在目标抽屉存储有所述哈希值对应的客户的贵金属；若有，则将所述待存储贵金属存储到所述目标抽屉中。若无，则依照所述抽屉在哈希环上的点位顺序依次对所述贵金属进行存储。本发明实施例提供的贵金属存储装置，抽屉部署模块以衰减排列路由算法将所有存储柜中的抽屉部署到哈希环的点位；贵金属存储模块依照所述抽屉在哈希环上的点位顺序依次对贵金属进行存储。本发明实施例提供的存储装置由于将存储顺序转换为哈希环上的点位顺序，这样每段时间存储时，抽屉使用率较为均匀。同时，当扩容时，只需要将新的抽屉部署到哈希环的点位上，无需移动之前抽屉在哈希环的位置，保证了使用均衡的同时，保留了扩容能力，能够满足业务的需求。第四实施例，本发明提供一种用户请求分配设备，包括：处理器；用于存储所述处理器可执行指令的存储器；所述处理器被配置为用于执行第一实施例或第二实施例提供的方法。第五实施例，本发明提供一种贵金属存储系统，所述系统采用第一实施例或第二实施例提供的方法将所述贵金属存储到存储柜中。可以理解的是，上述各实施例中相同或相似部分可以相互参考，在一些实施例中未详细说明的内容可以参见其他实施例中相同或相似的内容。需要说明的是，在本申请的描述中，术语“第一”、“第二”等仅用于描述目的，而不能理解为指示或暗示相对重要性。此外，在本申请的描述中，除非另有说明，“多个”的含义是指至少两个。流程图中或在此以其他方式描述的任何过程或方法描述可以被理解为，表示包括一个或更多个用于实现特定逻辑功能或过程的步骤的可执行指令的代码的模块、片段或部分，并且本申请的优选实施方式的范围包括另外的实现，其中可以不按所示出或讨论的顺序，包括根据所涉及的功能按基本同时的方式或按相反的顺序，来执行功能，这应被本申请的实施例所属技术领域的技术人员所理解。应当理解，本申请的各部分可以用硬件、软件、固件或它们的组合来实现。在上述实施方式中，多个步骤或方法可以用存储在存储器中且由合适的指令执行系统执行的软件或固件来实现。例如，如果用硬件来实现，和在另一实施方式中一样，可用本领域公知的下列技术中的任一项或他们的组合来实现：具有用于对数据信号实现逻辑功能的逻辑门电路的离散逻辑电路，具有合适的组合逻辑门电路的专用集成电路，可编程门阵列，现场可编程门阵列等。本技术领域的普通技术人员可以理解实现上述实施例方法携带的全部或部分步骤是可以通过程序来指令相关的硬件完成，所述的程序可以存储于一种计算机可读存储介质中，该程序在执行时，包括方法实施例的步骤之一或其组合。此外，在本申请各个实施例中的各功能单元可以集成在一个处理模块中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个模块中。上述集成的模块既可以采用硬件的形式实现，也可以采用软件功能模块的形式实现。所述集成的模块如果以软件功能模块的形式实现并作为独立的产品销售或使用时，也可以存储在一个计算机可读取存储介质中。上述提到的存储介质可以是只读存储器，磁盘或光盘等。在本说明书的描述中，参考术语“一个实施例”、“一些实施例”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本申请的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。尽管上面已经示出和描述了本申请的实施例，可以理解的是，上述实施例是示例性的，不能理解为对本申请的限制，本领域的普通技术人员在本申请的范围内可以对上述实施例进行变化、修改、替换和变型。
