标题title
单总线电路、随钻旋转导向测井仪器
摘要abst
本发明公开了一种单总线电路、随钻旋转导向测井仪器。其中，单总线电路包括直流母线和多个通信节点，通信节点包括编码电路、解码电路和通讯变压器，编码电路和解码电路分别通过通讯变压器与直流母线连接；其中，任意一个通信节点的编码电路在生成编码信号后，将编码信号通过相应的通讯变压器耦合到直流母线上，其它通信节点的解码电路通过相应的通讯变压器接收编码信号，并对编码信号进行解码处理得到解码信号。该电路，可以实现低空间占用。
权利要求书clms
1.一种单总线电路，其特征在于，所述电路包括直流母线和多个通信节点，所述通信节点包括编码电路、解码电路和通讯变压器，所述编码电路和所述解码电路分别通过所述通讯变压器与所述直流母线连接；其中，任意一个所述通信节点的编码电路在生成编码信号后，将所述编码信号通过相应的通讯变压器耦合到所述直流母线上，其它所述通信节点的解码电路通过相应的通讯变压器接收所述编码信号，并对所述编码信号进行解码处理得到解码信号。2.根据权利要求1所述的单总线电路，其特征在于，所述编码信号为频率受控的正弦波信号，所述正弦波信号的频率表征所述编码信号所携带的信息。3.根据权利要求2所述的单总线电路，其特征在于，所述编码电路包括：第一开关管，所述第一开关管的第一端连接至电源，所述第一开关管的控制端用于输入第一控制信号；第二开关管，所述第二开关管的第一端与所述第一开关管的第二端连接，并作为所述编码电路的第一输出端，所述第二开关管的第二端与第一电阻的一端连接，所述第二开关管的控制端用于输入第二控制信号；第三开关管，所述第三开关管的第一端连接至所述电源，所述第三开关管的控制端用于输入第三控制信号；第四开关管，所述第四开关管的第一端与所述第三开关管的第二端连接，并作为所述编码电路的第二输出端，所述第四开关管的第二端与所述第一电阻的一端连接，所述第四开关管的控制端用于输入第四控制信号；所述第一电阻，所述第一电阻的另一端接地；其中，所述编码电路用于在所述第一控制信号、所述第二控制信号、所述第三控制信号和所述第四控制信号的作用下，通过所述第一输出端和所述第二输出端输出所述编码信号。4.根据权利要求3所述的单总线电路，其特征在于，所述解码信号为方波信号。5.根据权利要求4所述的单总线电路，其特征在于，所述解码电路包括：增益子电路，所述增益子电路的输入端作为所述解码电路的输入端，所述增益子电路用于接收所述编码信号，并对所述编码信号进行增益处理；基准子电路，用于提供基准电压；比较子电路，所述比较子电路的第一输入端与所述增益子电路的输出端连接，所述比较子电路的第二输入端与所述基准子电路的输出端连接，所述比较子电路的输出端作为所述解码电路的输出端，所述比较子电路用于将增益后的编码信号电压和所述基准电压进行比较，并输出比较结果作为所述解码信号。6.根据权利要求5所述的单总线电路，其特征在于，所述增益子电路包括：第一电容，所述第一电容的一端作为所述解码电路的输入端；第二电阻，所述第二电阻的一端与所述第一电容的另一端连接；第二电容，所述第二电容的一端与所述第二电阻的另一端连接，所述第二电容的另一端接地；第三电阻，所述第三电阻的一端连接至所述电源；第四电阻，所述第四电阻的一端与所述第三电阻的另一端连接，并作为所述增益子电路的输出端，所述第四电阻的另一端接地。7.根据权利要求5所述的单总线电路，其特征在于，所述基准子电路，包括：第五电阻，所述第五电阻的一端连接至所述电源；第六电阻，所述第六电阻的一端与所述第五电阻的另一端连接，并形成所述基准子电路的输出端，所述第六电阻的另一端接地。8.根据权利要求5所述的单总线电路，其特征在于，所述比较子电路，包括：比较器，所述比较器的第一输入端形成所述比较子电路的第一输入端，所述比较器的第二输入端形成所述比较子电路的第二输入端，所述比较器的输出端形成所述比较子电路的输出端；第七电阻，所述第七电阻的一端连接至所述电源，所述第七电阻的另一端与所述比较器的输出端连接。9.根据权利要求1所述的单总线电路，其特征在于，所述单总线电路还包括功率节点，所述功率节点包括滤波电路和耗电模块，所述滤波电路连接在所述直流母线与所述耗电模块之间，用于对所述直流母线上的编码信号进行滤波处理，以给所述耗电模块提供稳定电压。10.一种随钻旋转导向测井仪器，其特征在于，包括如权利要求1-9中任一项所述的单总线电路。
说明书desc
技术领域本发明涉及随钻测井技术领域，尤其涉及一种单总线电路、随钻旋转导向测井仪器。背景技术随钻测井技术和旋转导向是现代钻井技术的关键核心，前者用于实时获取井下岩石和流体的地球物理性质，后者用于精确控制钻头完成复杂三维井眼轨迹，是开发地下复杂油气资源的关键技术。在实际应用过程中，为了实现随钻测井和旋转导向配套使用，需要可靠的单总线系统以保证设备稳定，高效工作。但是，相关技术中的单总线电路，软件算法复杂，需要包含数据传输线，时钟线，标志位线等20个以上信号，也需要相应数量的引脚，因而需要使用专用芯片，会占用较大的空间。发明内容本发明旨在至少在一定程度上解决相关技术中的技术问题之一。为此，本发明的第一个目的在于提出一种单总线电路，以降低占用空间。本发明的第二个目的在于提出一种随钻旋转导向测井仪器。为达到上述目的，本发明第一方面实施例提出了一种单总线电路，所述电路包括直流母线和多个通信节点，所述通信节点包括编码电路、解码电路和通讯变压器，所述编码电路和所述解码电路分别通过所述通讯变压器与所述直流母线连接；其中，任意一个所述通信节点的编码电路在生成编码信号后，将所述编码信号通过相应的通讯变压器耦合到所述直流母线上，其它所述通信节点的解码电路通过相应的通讯变压器接收所述编码信号，并对所述编码信号进行解码处理得到解码信号。为达到上述目的，本发明第二方面实施例提出了一种随钻旋转导向测井仪器，包括上述的单总线电路。根据本发明实施例的单总线电路、随钻旋转导向测井仪器，设置直流母线和多个通信节点，每个通信节点内均包括编码电路、解码电路和通讯变压器，编码电路通过通讯变压器将编码信号耦合到直流母线上，解码电路通过通讯变压器接收编码信号，并进行解码处理，从而设计得到可靠的单总线电路，不需要专用芯片，占用空间小。本发明附加的方面和优点将在下面的描述中部分给出，部分将从下面的描述中变得明显，或通过本发明的实践了解到。附图说明图1是本发明一个或多个实施例的单总线电路的结构示意图；图2是本发明一个或多个实施例的通讯变压器的结构示意图；图3是本发明一个示例的编码信号的示意图；图4是本发明一个具体实施例的编码电路的电路图；图5是本发明另一个示例的编码信号的示意图；图6是本发明一个或多个实施例的解码电路的结构框图；图7是本发明一个示例的解码信号的示意图；图8是本发明一个具体实施例的增益子电路的电路图；图9是本发明一个具体实施例的基准子电路的电路图；图10是本发明一个具体实施例的比较子电路的电路图；图11是本发明一个示例的解码电路的电路图；图12是本发明一个示例的单总线电路的结构示意图；图13是本发明一个具体实施例的功率节点的结构示意图；图14是本发明实施例的随钻旋转导向测井仪器的结构框图。具体实施方式下面参考附图描述本发明实施例的单总线电路、随钻旋转导向测井仪器，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。参考附图描述的实施例是示例性的，不能理解为对本发明的限制。图1是本发明一个或多个实施例的单总线电路的结构示意图。如图1所示，单总线电路10，包括直流母线DC和多个通信节点100，通信节点100包括编码电路101、解码电路102和通讯变压器103，编码电路101和解码电路102分别通过通讯变压器103与直流母线DC连接。其中，任意一个通信节点100的编码电路101在生成编码信号后，将编码信号通过相应的通讯变压器103耦合到直流母线DC上，其它通信节点100的解码电路102通过相应的通讯变压器103接收编码信号，并对编码信号进行解码处理得到解码信号。由此，设置直流母线DC和多个通信节点100，每个通信节点100内均包括编码电路101、解码电路102和通讯变压器103，编码电路101通过通讯变压器103将编码信号耦合到直流母线DC上，解码电路102通过通讯变压器103接收编码信号，并进行解码处理，从而设计得到可靠的单总线电路10，在该电路中，MCU仅需要控制编码电路101生成编码信号，并接收解码电路102的解码结果，即MCU仅需五个引脚即可满足需求，软件算法简单，无需传统的专用芯片即可实现，占用空间小。在本发明一个或多个实施例中，通讯变压器103可以如图2所示，包括绕制在一个磁芯上的三个绕组，分别为母线绕组T、发射绕组TX和接收绕组RX。当发射绕组TX上产生编码信号时，母线绕组T上会产生相同的信号，这个信号耦合到直流母线DC上，其他通信节点100的接收绕组RX得到该信号，并通过解码电路102发给MCU采集。在本发明一个或多个实施例中，编码信号为频率受控的正弦波信号，正弦波信号的频率表征编码信号所携带的信息。作为一个示例，参见图3，编码信号为幅度为1.2V_vpp，有着f1、f2两个频率的正弦波信号，其中，频率为f1的信号表示0，频率为f2的信号表示1，此时，若要输出信号0101，则可将频率为f1f2f1f2的正弦波信号耦合到直流母线DC上。编码电路101生成的编码信号的波特率的取值范围为9000~12000，例如可以为9600。由此，采用正弦波信号的频率表征编码信号所携带的信息，可以有效避免编码信号的信息在传输过程中失真，提高单总线电路10的适用性，即使在如井下之类温度、湿度、震动环境复杂的情况下，依然可以正常使用。而且，由于采用正弦波信号，从而支持MCU调整通信的信号频率和波特率，可以适用于更多应用场合。在本发明一个或多个实施例中，编码电路101包括：第一开关管Q1，第一开关管Q1的第一端连接至电源，第一开关管Q1的控制端用于输入第一控制信号H1；第二开关管Q2，第二开关管Q2的第一端与第一开关管Q1的第二端连接，并作为编码电路101的第一输出端，第二开关管Q2的第二端与第一电阻R1的一端连接，第二开关管Q2的控制端用于输入第二控制信号L1；第三开关管Q3，第三开关管Q3的第一端连接至电源，第三开关管Q3的控制端用于输入第三控制信号H2；第四开关管Q4，第四开关管Q4的第一端与第三开关管Q3的第二端连接，并作为编码电路101的第二输出端，第四开关管Q4的第二端与第一电阻R1的一端连接，第四开关管Q4的控制端用于输入第四控制信号L2；第一电阻R1，第一电阻R1的另一端接地。具体可参见图4与图5。在图4所示的具体实施例中，电源为3.3V，第一电阻R1为50Ω电阻，通过发射绕组TX输出编码信号，第一开关管Q1、第三开关管Q3为PMOS管，第二开关管Q2、第四开关管Q4为NMOS管。在实际应用中，经过反复调试实际电路中的数值，第一电阻R1在50Ω-100Ω内均可实现工作状态稳定，测量精度高。其中，编码电路101用于在第一控制信号H1、第二控制信号L1、第三控制信号H2和第四控制信号L2的作用下，通过第一输出端和第二输出端输出编码信号。通讯变压器103的发射绕组TX连接在编码电路101的第一输出端和第二输出端之间，编码电路101可以通过通讯变压器103的发射绕组TX输出编码信号。具体地，参见图5，MCU对第一开关管Q1、第二开关管Q2、第三开关管Q3、第四开关管Q4进行控制，当第一开关管Q1与第二开关管Q2的控制端被施加低电平，第三开关管Q3与第四开关管Q4的控制端被施加高电平时，第一开关管Q1、第四开关管Q4导通，第二开关管Q2、第三开关管Q3关断，发射绕组TX上的电压UAB正向升高。当第一开关管Q1与第二开关管Q2的控制端被施加高电平，第三开关管Q3与第四开关管Q4的控制端被施加低电平时，第二开关管Q2、第三开关管Q3导通，第一开关管Q1、第四开关管Q4关断，发射绕组TX上的电压UAB负向升高。由此，通过控制第一开关管Q1、第二开关管Q2、第三开关管Q3、第四开关管Q4的导通关断时间，即可实现控制编码信号的信号频率。在本发明一个或多个实施例中，解码信号为方波信号。在本发明一个或多个实施例中，参见图6，解码电路102包括：增益子电路1021，增益子电路1021的输入端作为解码电路102的输入端，增益子电路1021用于接收编码信号，并对编码信号进行增益处理；基准子电路1022，用于提供基准电压；比较子电路1023，比较子电路1023的第一输入端与增益子电路1021的输出端连接，比较子电路1023的第二输入端与基准子电路1022的输出端连接，比较子电路1023的输出端作为解码电路102的输出端，比较子电路1023用于将增益后的编码信号电压和基准电压进行比较，并输出比较结果作为解码信号。具体地，参见图7所示的示例，在解码电路102未接收到编码信号时，解码电路102的输出端的静态电压可以参见信号3，为3.3V_vpp。然而，当解码电路102接收到如信号1所示的编码信号时，增益子电路1021对信号1进行增益处理，比较子电路1023比较增益后的信号1的电压和基准电压。当增益后的信号1的电压高于基准电压时，比较子电路1023输出高电平，当增益后的信号1的电压小于基准电压时，比较子电路1023输出低电平，从而比较子电路1023可以输出如信号2所示的输出信号，进而将信号2输入至MCU。由此，设计解码电路102包括增益子电路1021、基准子电路1022和比较子电路1023，比较子电路1023比较增益子电路1021的输出电压和基准子电路1022的输出电压之间的电压高低，根据比较结果输出对应的信号，从而实现以简单的电路结构实现精确的解码。由于电路结构简单，因而具备了高环境抗性，能够进一步提高单总线电路10的适用性，进一步保证即使在如井下之类温度、湿度、震动环境复杂的情况下，依然可以正常使用。在本发明一个或多个实施例中，参见图8，增益子电路1021包括：第一电容C1，第一电容C1的一端作为解码电路102的输入端；第二电阻R2，第二电阻R2的一端与第一电容C1的另一端连接；第二电容C2，第二电容C2的一端与第二电阻R2的另一端连接，第二电容C2的另一端接地；第三电阻R3，第三电阻R3的一端连接至电源；第四电阻R4，第四电阻R4的一端与第三电阻R3的另一端连接，并作为增益子电路1021的输出端，第四电阻R4的另一端接地。其中，通讯变压器103的接收绕组RX连接在第一电容C1的一端和地之间，增益子电路1021通过通讯变压器103的接收绕组RX接收编码信号。在实际应用中，经过反复调试实际电路中的数值，第一电容C1、第二电容C2在750pF-1000pF内均可实现工作状态稳定，测量精度高。在本发明一个或多个实施例中，参见图9，基准子电路1022，包括：第五电阻R5，第五电阻R5的一端连接至电源；第六电阻R6，第六电阻R6的一端与第五电阻R5的另一端连接，并形成基准子电路1022的输出端，第六电阻R6的另一端接地。在本发明一个或多个实施例中，参见图10，比较子电路1023，包括：比较器U1，比较器U1的第一输入端形成比较子电路1023的第一输入端，比较器U1的第二输入端形成比较子电路1023的第二输入端，比较器U1的输出端形成比较子电路1023的输出端；第七电阻R7，第七电阻R7的一端连接至电源，第七电阻R7的另一端与比较器U1的输出端连接。下面结合图11所示的具体示例对解码电路102进行说明。具体地，解码电路102通过通讯变压器103的接收绕组RX获取编码信号，增益子电路1021对编码信号进行增益处理，增益后的编码信号输入到比较器U1的正输入端，比较器U1的负输入端接收基准信号。比较器U1进行比较处理，从输出端输出解码信号。在本发明一个或多个实施例中，单总线电路10还包括功率节点200。参见图12所示的示例，在单总线电路10中，可以包括多个通信节点100和多个功率节点200。参见图13所示的具体实施例，功率节点200包括滤波电路201和耗电模块202，滤波电路201连接在直流母线DC与耗电模块202之间，用于对直流母线DC上的编码信号进行滤波处理，以给耗电模块202提供稳定电压。其中，在图13所示的具体实施例中，滤波电路201为LC滤波电路。具体的，在直流母线DC上，不但有着用于供电的直流电压，还有着通信节点100耦合的编码信号。对于每个功率节点200，通过设置滤波电路201的截至频率，可以实现滤波电路201将从直流母线DC上获取的编码信号滤除，仅留直流电压，从而为耗电模块202提供稳定的电压。由此，设置了相互独立的功率节点200和通信节点100，通信节点100用于通信，功率节点200用于提供电压，从而实现为耗电模块202提供电压无需经过用于通信的变压器，实现了为耗电模块202传输电压时不受变压器饱和电流的限制，可以实现大功率传输。综上，本发明实施例的单总线电路，设置直流母线和多个通信节点，每个通信节点内均包括编码电路、解码电路和通讯变压器，编码电路通过通讯变压器将编码信号耦合到直流母线上，解码电路通过通讯变压器接收编码信号，并进行解码处理，从而设计得到可靠的单总线电路，不需要专用芯片，占用空间小。而且，通过设计该单总线电路，可以实现通讯变压器仅需绕制在一个磁芯上的三个绕组，无需大变压器，进一步降低占用空间。而且，设计了包括增益子电路、基准子电路、比较子电路的解码电路，电路结构简单，传输速度快，误码率小。而且，设计单总线电路中还包括功率节点，功率节点直连直流母线并包括滤波电路，从而可以实现传输大功率。而且，由于整个单总线电路结构简单，器件少，可以实现较高的抗干扰能力。而且，电路中所使用的电压幅值可调，可以适用于更多应用场合。进一步地，本发明提出一种随钻旋转导向测井仪器。图14是本发明实施例的随钻旋转导向测井仪器的结构框图。如图14所示，随钻旋转导向测井仪器1000，包括上述的单总线电路10。本发明实施例的随钻旋转导向测井仪器，通过上述实施例的单总线电路，实现不需要专用芯片，占用空间小。而且，通过设计该单总线电路，可以实现通讯变压器仅需绕制在一个磁芯上的三个绕组，无需大变压器，进一步降低占用空间。而且，设计了包括增益子电路、基准子电路、比较子电路的解码电路，电路结构简单，传输速度快，误码率小。而且，设计单总线电路中还包括功率节点，功率节点直连直流母线并包括滤波电路，从而可以实现传输大功率。而且，由于整个单总线电路结构简单，器件少，可以实现较高的抗干扰能力。需要说明的是，在流程图中表示或在此以其他方式描述的逻辑和/或步骤，可以被认为是用于实现逻辑功能的可执行指令的定序列表，可以具体实现在任何计算机可读介质中，以供指令执行系统、装置或设备使用，或结合这些指令执行系统、装置或设备而使用。就本说明书而言，“计算机可读介质”可以是任何可以包含、存储、通信、传播或传输程序以供指令执行系统、装置或设备或结合这些指令执行系统、装置或设备而使用的装置。计算机可读介质的更具体的示例包括以下：具有一个或多个布线的电连接部，便携式计算机盘盒，随机存取存储器，只读存储器，可擦除可编辑只读存储器，光纤装置，以及便携式光盘只读存储器。另外，计算机可读介质甚至可以是可在其上打印所述程序的纸或其他合适的介质，因为可以例如通过对纸或其他介质进行光学扫描，接着进行编辑、解译或必要时以其他合适方式进行处理来以电子方式获得所述程序，然后将其存储在计算机存储器中。应当理解，本发明的各部分可以用硬件、软件、固件或它们的组合来实现。在上述实施方式中，多个步骤或方法可以用存储在存储器中且由合适的指令执行系统执行的软件或固件来实现。如果用硬件来实现，和在另一实施方式中一样，可用本领域公知的下列技术中的任一项或他们的组合来实现：具有用于对数据信号实现逻辑功能的逻辑门电路的离散逻辑电路，具有合适的组合逻辑门电路的专用集成电路，可编程门阵列，现场可编程门阵列等。在本说明书的描述中，参考术语“一个实施例”、“一些实施例”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。在本说明书的描述中，术语“中心”、“纵向”、“横向”、“长度”、“宽度”、“厚度”、“上”、“下”、“前”、“后”、“左”、“右”、“竖直”、“水平”、“顶”、“底”“内”、“外”、“顺时针”、“逆时针”、“轴向”、“径向”、“周向”等指示的方位或位置关系为基于附图所示的方位或位置关系，不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，不能理解为对本发明的限制。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括至少一个该特征。在本发明的描述中，“多个”的含义是至少两个，例如两个，三个等，除非另有明确具体的限定。在本说明书的描述中，除非另有说明，术语“安装”、“相连”、“连接”、“固定”等术语应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或成一体；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通或两个元件的相互作用关系，除非另有明确的限定。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本发明中的具体含义。在本发明中，除非另有明确的规定和限定，第一特征在第二特征“上”或“下”可以是第一和第二特征直接接触，或第一和第二特征通过中间媒介间接接触。而且，第一特征在第二特征“之上”、“上方”和“上面”可是第一特征在第二特征正上方或斜上方，或仅仅表示第一特征水平高度高于第二特征。第一特征在第二特征“之下”、“下方”和“下面”可以是第一特征在第二特征正下方或斜下方，或仅仅表示第一特征水平高度小于第二特征。尽管上面已经示出和描述了本发明的实施例，可以理解的是，上述实施例是示例性的，不能理解为对本发明的限制，本领域的普通技术人员在本发明的范围内可以对上述实施例进行变化、修改、替换和变型。
