标题title
基于UWB的位姿确定方法和装置
摘要abst
本公开提出一种基于UWB的位姿确定方法和装置，涉及矿井安全技术领域。该方法包括：获取当前定位空间中的各个UWB基站和待测主体之间的距离；根据各个UWB基站的设置位置和各个距离，计算待测主体的第一坐标；基于定位空间中预设的红外相机，获取包含有待测主体的红外图像；对红外图像进行处理，以确定红外图像中每个恒温器对应的位置；根据红外图像中每个恒温器对应的位置，以及第一坐标、以及预先存储的定位标签与每个恒温器之间的位置关系，确定每个恒温器对应的每个第二坐标；根据第一坐标和每个第二坐标，计算待测主体当前的姿态。为煤矿井下的定位和检测提供了丰富的数据支撑，便于及时发现问题。
权利要求书clms
1.一种基于UWB的位姿确定方法，其特征在于，包括：获取当前定位空间中的各个UWB基站和待测主体之间的距离，其中，待测主体中携带有定位标签，所述待测主体为人或者设备；基于加权最小二乘法，根据所述各个UWB基站的设置位置和各个所述距离，计算所述待测主体的第一坐标；基于所述定位空间中预设的红外相机，获取包含有所述待测主体的红外图像，其中，所述待测主体上预先设置有至少三个恒温器，所述至少三个恒温器所处的位置不处于同一条直线；对所述红外图像进行处理，以确定所述红外图像中每个所述恒温器对应的位置；根据所述红外图像中每个所述恒温器对应的位置，以及所述第一坐标、以及预先存储的所述定位标签与每个所述恒温器之间的位置关系，确定每个所述恒温器对应的每个第二坐标；根据所述第一坐标和所述每个第二坐标，计算所述待测主体当前的姿态。2.根据权利要求1所述的方法，其特征在于，在所述基于加权最小二乘法，根据所述各个UWB基站的设置位置和各个所述距离，计算所述待测主体的第一坐标之后，还包括： 根据预先收集的多个基站组网对应的样本数据，构建DOP 数值分析模型，其中，每个所述基站组网对应的属性信息至少包含了基站的形状、数量、高度以及位置分布，所述预先收集的多个基站组网为煤矿井下中多个各个预先标记为狭长定位空间的各个空间中设置的基站组网；基于所述第一坐标配置卡尔曼滤波定位模型的观测值；根据所述DOP 数值分析模型，以及所述当前定位空间对应的场景信息，以及所述当前定位空间对应的基站组网信息，确定所述当前定位空间对应的DOP值，并基于所述DOP值配置所述卡尔曼滤波定位模型的观测噪声协方差参考值；根据所述观测噪声协方差参考值、所述观测值，以及所述卡尔曼滤波定位模型，对当前所述第一坐标进行修正。3.根据权利要求1所述的方法，其特征在于，所述获取当前定位空间中的各个UWB基站和待测主体之间的距离，包括：基于双边双向测距算法，测每个UWB 基站与所述待测主体之间的距离。4.根据权利要求1所述的方法，其特征在于，在所述计算所述待测主体当前的姿态之后，还包括：响应于所述第一坐标和所述每个第二坐标中的任一坐标为目标区域坐标，发出警报，其中，所述目标区域坐标为与所述当前定位空间对应的危险空间对应的坐标。5.根据权利要求1所述的方法，其特征在于，在所述计算所述待测主体当前的姿态之后，还包括：根据所述当前定位空间对应的场景信息，以及所述待测主体的类型，确定与所述类型对应的危险动作特征；确定每个所述危险动作特征对应的危险姿态信息；在所述待测主体当前的姿态与所述危险姿态信息之间的相似度大于预设阈值时，发出警报。6.一种基于UWB的位姿确定装置，其特征在于，包括：第一获取模块，用于获取当前定位空间中的各个UWB基站和待测主体之间的距离，其中，待测主体中携带有定位标签，所述待测主体为人或者设备；第一计算模块，用于基于加权最小二乘法，根据所述各个UWB基站的设置位置和各个所述距离，计算所述待测主体的第一坐标；第二获取模块，用于基于所述定位空间中预设的红外相机，获取包含有所述待测主体的红外图像，其中，所述待测主体上预先设置有至少三个恒温器，所述至少三个恒温器所处的位置不处于同一条直线；处理模块，用于对所述红外图像进行处理，以确定所述红外图像中每个所述恒温器对应的位置；确定模块，用于根据所述红外图像中每个所述恒温器对应的位置，以及所述第一坐标、以及预先存储的所述定位标签与每个所述恒温器之间的位置关系，确定每个所述恒温器对应的每个第二坐标；第二计算模块，用于根据所述第一坐标和所述每个第二坐标，计算所述待测主体当前的姿态。7.根据权利要求6所述的装置，其特征在于，所述第一计算模块，还用于：根据预先收集的多个基站组网对应的样本数据，构建DOP 数值分析模型，其中，每个所述基站组网对应的属性信息至少包含了基站的形状、数量、高度以及位置分布，所述预先收集的多个基站组网为煤矿井下中多个各个预先标记为狭长定位空间的各个空间中设置的基站组网；基于所述第一坐标配置卡尔曼滤波定位模型的观测值；根据所述DOP 数值分析模型，以及所述当前定位空间对应的场景信息，以及所述当前定位空间对应的基站组网信息，确定所述当前定位空间对应的DOP值，并基于所述DOP值配置所述卡尔曼滤波定位模型的观测噪声协方差参考值；根据所述观测噪声协方差参考值、所述观测值，以及所述卡尔曼滤波定位模型，对当前所述第一坐标进行修正。8.根据权利要求6所述的装置，其特征在于，所述第一获取模块，具体用于：基于双边双向测距算法，测每个UWB 基站与所述待测主体之间的距离。9.根据权利要求6所述的装置，其特征在于，所述第二计算模块，还用于：响应于所述第一坐标和所述每个第二坐标中的任一坐标为目标区域坐标，发出警报，其中，所述目标区域坐标为与所述当前定位空间对应的危险空间对应的坐标。10.根据权利要求6所述的装置，其特征在于，所述第二计算模块，还用于：根据所述当前定位空间对应的场景信息，以及所述待测主体的类型，确定与所述类型对应的危险动作特征；确定每个所述危险动作特征对应的危险姿态信息；在所述待测主体当前的姿态与所述危险姿态信息之间的相似度大于预设阈值时，发出警报。
说明书desc
技术领域本公开涉及煤矿井下定位技术领域，尤其涉及一种基于UWB的位姿确定方法和装置。背景技术由于煤矿井下特殊的地理环境，一旦发生事故，救援人员往往难以了解井下的实际情况和被困人员的准确位置，使得抢险救灾工作异常困难。为了能够实时了解井下工作人员的位置状态或者设备的位置状态，需要对井下人员位置或设备位置进行定位，但传统的定位技术，如GPS定位由于各自的局限性而难以在煤矿井下应用。不仅仅是人员，在煤矿井下工作的一些机器人，或者其他井下需要移动进行工作的设备，也会经常因为井下的特殊环境卡顿在某处，造成工作故障，而且煤矿井下的环境非常恶劣，很多地方都不利于救援人员前往，也很难及时的使得工作设备及时的恢复正常运行，给工作生产带来了很大的隐患，而且在煤矿井下有很多狭长的空间，比如巷道、隧道，在这种空间中非常难以定位，且有的空间中，光线很灰暗，利用监控摄像头也很难拍摄到工作设备的有效信息。因而，如何在灰暗狭长的煤矿井下空间中，对设备或者人员进行定位，从而为救助被困人员或者恢复设备的正常工作状态，提高数据支撑，是当前需要解决的问题。发明内容本公开旨在至少在一定程度上解决相关技术中的技术问题之一。本公开第一方面实施例提出了一种基于UWB的位姿确定方法，包括：获取当前定位空间中的各个UWB基站和待测主体之间的距离，其中，待测主体中携带有定位标签，所述待测主体为人或者设备；基于加权最小二乘法，根据所述各个UWB基站的设置位置和各个所述距离，计算所述待测主体的第一坐标；基于所述定位空间中预设的红外相机，获取包含有所述待测主体的红外图像，其中，所述待测主体上预先设置有至少三个恒温器，所述至少三个恒温器所处的位置不处于同一条直线；对所述红外图像进行处理，以确定所述红外图像中每个所述恒温器对应的位置；根据所述红外图像中每个所述恒温器对应的位置，以及所述第一坐标、以及预先存储的所述定位标签与每个所述恒温器之间的位置关系，确定每个所述恒温器对应的每个第二坐标；根据所述第一坐标和所述每个第二坐标，计算所述待测主体当前的姿态。本公开第二方面实施例提出了一种基于UWB的位姿确定装置，包括：第一获取模块，用于获取当前定位空间中的各个UWB基站和待测主体之间的距离，其中，待测主体中携带有定位标签，所述待测主体为人或者设备；第一计算模块，用于基于加权最小二乘法，根据所述各个UWB基站的设置位置和各个所述距离，计算所述待测主体的第一坐标；第二获取模块，用于基于所述定位空间中预设的红外相机，获取包含有所述待测主体的红外图像，其中，所述待测主体上预先设置有至少三个恒温器，所述至少三个恒温器所处的位置不处于同一条直线；处理模块，用于对所述红外图像进行处理，以确定所述红外图像中每个所述恒温器对应的位置；确定模块，用于根据所述红外图像中每个所述恒温器对应的位置，以及所述第一坐标、以及预先存储的所述定位标签与每个所述恒温器之间的位置关系，确定每个所述恒温器对应的每个第二坐标；第二计算模块，用于根据所述第一坐标和所述每个第二坐标，计算所述待测主体当前的姿态。本公开第三方面实施例提出了一种电子设备，包括：存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时，实现如本公开第一方面实施例提出的基于UWB的位姿确定方法。本公开第四方面实施例提出了一种计算机可读存储介质，存储有计算机程序，所述计算机程序被处理器执行时，实现如本公开第一方面实施例提出的基于UWB的位姿确定方法。本公开第五方面实施例提出了一种计算机程序产品，包括计算机程序，所述计算机程序在被处理器执行时，实现如本公开第一方面实施例提出的基于UWB的位姿确定方法。本公开提供的基于UWB的位姿确定方法和装置，存在如下有益效果：本公开实施例中，该装置首先获取当前定位空间中的各个UWB基站和待测主体之间的距离，其中，待测主体中携带有定位标签，所述待测主体为人或者设备，然后基于加权最小二乘法，根据所述各个UWB基站的设置位置和各个所述距离，计算所述待测主体的第一坐标，之后基于所述定位空间中预设的红外相机，获取包含有所述待测主体的红外图像，其中，所述待测主体上预先设置有至少三个恒温器，所述至少三个恒温器所处的位置不处于同一条直线，然后对所述红外图像进行处理，以确定所述红外图像中每个所述恒温器对应的位置，之后根据所述红外图像中每个所述恒温器对应的位置，以及所述第一坐标、以及预先存储的所述定位标签与每个所述恒温器之间的位置关系，确定每个所述恒温器对应的每个第二坐标，最后根据所述第一坐标和所述每个第二坐标，计算所述待测主体当前的姿态。由此，能够在灰暗的环境下，通过待测物体本身的热量特征，来实现对待测物体位姿的确定，由于是利用了超宽带UWB无线通信的方式进行定位，可以精确测距，且结构简单、成本低、体积小、功耗低、多径分辨率高、抗噪声和抗干扰能力强，通过本方案不仅能提供定位标签性对与基站的相对位置，而且还可以提供定位标签在绝对坐标体系准确位置信息，为安全生产以及救援工作提供数据保障，由于预先在待测主体上安装有恒温器，从而可以利用恒温器的热量，在红外图像中对待测主体进行识别，从而即使待测主体本身热量很低，也可以实现定位，更是通过了多个恒温器进而确定了待测主体的姿态，为煤矿井下的定位和检测提供了丰富的数据支撑，便于及时发现问题，从而避免造成不安全的因素。本公开附加的方面和优点将在下面的描述中部分给出，部分将从下面的描述中变得明显，或通过本公开的实践了解到。附图说明本公开上述的和/或附加的方面和优点从下面结合附图对实施例的描述中将变得明显和容易理解，其中：图1为本公开一实施例所提供的基于UWB的位姿确定方法的流程示意图；图2为本公开一实施例所提供的基于UWB的位姿确定装置的结构示意图；图3示出了适于用来实现本公开实施方式的示例性电子设备的框图。具体实施方式下面详细描述本公开的实施例，所述实施例的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施例是示例性的，旨在用于解释本公开，而不能理解为对本公开的限制。下面参考附图描述本公开实施例的基于UWB的位姿确定方法、装置、电子设备和存储介质。图1为本公开实施例所提供的基于UWB的位姿确定方法的流程示意图。本公开实施例以该基于UWB的位姿确定方法被配置于基于UWB的位姿确定装置中来举例说明，该基于UWB的位姿确定装置可以应用于任一电子设备中，以使该电子设备可以执行基于UWB的位姿确定功能。其中，电子设备可以为个人电脑、云端设备等。如图1所示，该基于UWB的位姿确定方法可以包括以下步骤：步骤101，获取当前定位空间中的各个UWB基站和待测主体之间的距离，其中，待测主体中携带有定位标签，所述待测主体为人或者设备。其中，当前定位空间可以为煤矿井下的巷道、隧道、狭长通道、走廊，特别是巷道，具备多分支特征，采掘设备布置复杂且存在强磁干扰，环境复杂多变,工作区域狭窄,井下突发事故难以避免。其中，狭长空间可以为地形狭长，宽度较短，但是长宽比值很大的空间。可选的，可以在沿定位空间的延伸方向分布设置多个UWB基站，并在待测主体上设置好定位标签。若主体为人，则可以使得定位标签携带在人身上的指定位置。比如左手口袋。其中，定位标签可以为一个定位芯片，可以和定位空间中设置的各个基站之间进行无线通讯。需要说明的是，基站的数量不同，高度不同，形状不同，设置的位置不同，也即布置的情况不同时，定位的精度也会不同，本公开中，可以预先记录到当前定位空间的基站布置情况，之后根据基站布置情况对定位的坐标进行修正，从而使得定位更加精准。其中，待测主体可以为设备，比如机器人、采掘设备、运输车，或者也可以为无人机、飞行器，等等，在此不做限定。可选的，该装置可以基于双边双向测距算法，测每个UWB 基站与所述待测主体之间的距离。需要说明的是，双向双边测距可以通过差分运算滤除时钟偏差及漂移对测量精度的影响,无需高精度晶振即可保证测距精度。可选的，可以根据TOF 飞行时间测量法，测量定位标签和UWB基站间UWB信号的飞行时间来计算距离。步骤102，基于加权最小二乘法，根据所述各个UWB基站的设置位置和各个所述距离，计算所述待测主体的第一坐标。需要说明的是，若三维空间内分布了有m个基站，每个基站的坐标分别为U1，U2,U3,U4...Um,将第一坐标可以设置为X,也即定位标签的坐标，可以通过TOA或者TWR测量，得到定位标签到每个基站的距离d,然后可以根据以下方程计算第一坐标X：，其中，i=1，2，3,4,5，6...m。其中，为第i个基站的测距误差。需要说明的是，通过最小二乘法可以计算出标签的坐标信息，但是最小二乘法是以测距误差具有恒定的方差为前提，而在实际测量中，测距误差却是变化的，此时可采用加权最小二乘法解决上述问题。该方法主要通过引入加权矩阵，将单个范围的测距误差乘以估计范围，以此得到更可靠的结果。可选的，该装置可以根据预先收集的多个基站组网对应的样本数据，构建DOP 数值分析模型，其中，每个所述基站组网对应的属性信息至少包含了基站的形状、数量、高度以及位置分布，所述预先收集的多个基站组网为煤矿井下中多个各个预先标记为狭长定位空间的各个空间中设置的基站组网，然后基于所述第一坐标配置卡尔曼滤波定位模型的观测值，之后根据所述DOP 数值分析模型，以及所述当前定位空间对应的场景信息，以及所述当前定位空间对应的基站组网信息，确定所述当前定位空间对应的DOP值，并基于所述DOP值配置所述卡尔曼滤波定位模型的观测噪声协方差参考值，最后根据所述观测噪声协方差参考值、所述观测值，以及所述卡尔曼滤波定位模型，对当前所述第一坐标进行修正。DOP值取决于标签位置和基站之间的几何构型和时间钟差，DOP 值的大小与基站定位的误差成正比，DOP 值越大，定位算法对测距误差的放大程度就越大，系统的定位的精度就越低。可以拟针对不同面积和长宽比的狭长空间，综合分析狭长空间下的定位失准原因。在不同基站组网方案下，测算整个区域的 DOP 值：定义坐标系原点，从左下角的坐标原点处开始以0.1 米为步长遍历整个区域，针对以上区域，分别计算 HDOP 和 PDOP 值。记录和比较不同狭长空间下的 DOP 数值范围，判断其能否满足高精度定位的要求，并比较狭长空间和宽阔空间的 DOP 差异，最终得到不同场景、不同基站组网下的 DOP 数值。 本公开中，可以根据当前定位空间对应的场景信息和基站组网，确定对应的 DOP 数值。需要说明的是，可以根据预先收集到的多个煤矿井下的多个狭长定位空间对应的基站组网的布置情况，构建DOP 数值分析模型。需要说明的是，卡尔曼滤波算法是一种最优化回归数据处理算法，能实时修正滤波增益矩阵，从包含噪声信息测量的数据中提取有效信息，修正状态参量。本项目拟以卡尔曼滤波为例，研究引入 DOP 数值分析模型的定位方法，实现定位误差的自适应补偿。卡尔曼滤波过程包括预测和更新两个步骤，首先需要构建线性系统状态空间模块。此时可由上一时刻的系统状态和观测状态预测出下一时刻的系统的真实状态。卡尔曼滤波算法主要由预测步骤和更新步骤两部分组成，预测步骤构建的状态估计方程越接近实际进程，先验估计精度越高。后验估计所得结果的精度主要依赖观测值，传感器得到的观测数据误差越小，KF 算法的最优估计值精度越高。在本项目实验中，拟将加权最小二乘定位算法得到的第一坐标作为卡尔曼滤波的观测值，并将 DOP 值作为 KF 算法的观测噪声因素之一，从而有效抑制其特殊空间结构带来的误差。步骤103，基于所述定位空间中预设的红外相机，获取包含有所述待测主体的红外图像，其中，所述待测主体上预先设置有至少三个恒温器，所述至少三个恒温器所处的位置不处于同一条直线。需要说明的是，可以在定位空间中的多个位置中预先设置有红外相机，从而可以根据红外相机获得定位空间中多个位置的红外图像，并从中选中包含有所述待测主体的红外图像。需要说明的是，可以在待测主体上预先设置有恒温器，其中，恒温器是在正常操作下以自动开路或闭路来保持受控部在一定温度范围的一种温度感测装置。本公开中的恒温器，可以为一种保持向外辐射热量的设备，因而，由于恒温器的辐射需要消耗能量，因而，可以预先记录好恒温器在当前环境温度下，温度降低所消耗的时间，从而可以在恒温器电量达到指定阈值时，进行更换。其中，红外图像是通过“测量”物体向外辐射的热量而获得的,因而，通过以待测主体上的恒温器所辐射的热量作为特征，该装置可以获取到包含有待测主体的红外图像。步骤104，对所述红外图像进行处理，以确定所述红外图像中每个所述恒温器对应的位置。具体的，该装置可以对红外图像进行识别，从而可以确定每个恒温器对应的位置，需要说明的是，该位置是一种相对位置。比如，若包含恒温器A,B,C,则可以确定A分别相对于B，以及相对于C的位置。作为一种可能实现的方式，可以将红外图像以及每个恒温器所设置的温度输入至预先训练完成的神经网络模型中，从而可以通过深度学习算法，对红外图像进行解析，进而可以根据红外图像中各个恒温器对应的温度，在红外图像中对恒温器进行定位，从而可以得出每个恒温器所对应的位置。步骤105，根据所述红外图像中每个所述恒温器对应的位置，以及所述第一坐标、以及预先存储的所述定位标签与每个所述恒温器之间的位置关系，确定每个所述恒温器对应的每个第二坐标。需要说明的是，由于恒温器在设置在设备上时，可以是按照一定的布局进行布置的，从而可以便于红外相机检测，可以将多个恒温器分布连接在设备的多个位置，从而使得相机可以在各个角度，都能拍摄得到包含恒温器热量的图像。另外，还可以记录好定位标签与恒温器之间的位置关系，从而该装置可以根据第一坐标，以及定位标签与每个所述恒温器之间的位置关系，以及每个恒温器之间的相对位置，进行坐标转化，进而可以将第一坐标转化为各个第二坐标。其中，第二坐标是在世界坐标系下的任一恒温器的坐标。比如，若恒温器有3个，分别为S1,S2,S3,定位标签R的坐标为E,其中，S1到S2、S3、R的距离分别为D1,D2,D3;S2到S3、R的距离分别为D4,D5；S3到R的距离为D6,则该装置可以根据E,D1,D2,D3,D4,D5,D6构建方程，从而计算出S1,S2,S3对应的坐标，如下：步骤106，根据所述第一坐标和所述每个第二坐标，计算所述待测主体当前的姿态。需要说明的是，第一坐标为定位标签的坐标，第二坐标为恒温器对应的坐标。可选的，该装置可以预先存储有对应的映射关系表，其中，映射关系表可以是基于大数据生成的，其中记录有待测物体的每种姿态的定位标签在第三坐标下对应的各个恒温器坐标，并用定位标签在第三坐标下对应的各个恒温器坐标来表征待测主体的姿态。其中，第三坐标可以为定位标签的参考坐标。具体的，该装置可以根据第一坐标与第三坐标，确定坐标转移矩阵，并根据坐标转移矩阵将各个第二坐标转换为各个第四坐标，也即可以确定每个第一坐标当前对应各个第四坐标。之后根据预设的映射关系表，可以得到各个第四坐标所对应的姿态。可以理解的是，由于恒温器在设置在待测主体的时候，可以根据定位标签的位置对恒温器进行设置，也即使得恒温器与定位标签之间的距离为恒定不动的，而由于待测物体在移动过程中，姿态可能会发生改变，也可能不会改变，而在姿态改变时，恒温器之间的位置关系可能会发生改变，也即恒温器A与恒温器B之间的距离可能有F1变为F2，而恒温器A和恒温器B到定位标签的距离还是保持不变的。作为另一种可能实现的方式，该装置可以根据定位标签以及恒温器与待测主体上各个关键点之间的预设位置关系，将第一坐标和每个第二坐标转换为各个关键点的坐标，从而根据各个关键点的坐标，识别出待测主体当前的姿态。可选的，该装置可以响应于所述第一坐标和所述每个第二坐标中的任一坐标为目标区域坐标，发出警报，其中，所述目标区域坐标为与所述当前定位空间对应的危险空间对应的坐标。其中，目标区域坐标为预先记录的与当前定位空间对应的危险空间对应的坐标。需要说明的是，在当前定位空间中有些是工作空间，有些是非工作空间，而非工作空间则有可能给待测主体带来伤害，因而可以为危险空间。也即说明，若第一坐标或者任一第二坐标为目标区域坐标，则说明当前待测主体所在位置有危险，有可能对待测主体带来伤害，因而可以发出警报，及时使得监测人员得知预警信息，避免危险发生。可选的，该装置可以根据所述当前定位空间对应的场景信息，以及所述待测主体的类型，确定与所述类型对应的危险动作特征，之后确定每个所述危险动作特征对应的危险姿态信息，然后在所述待测主体当前的姿态与所述危险姿态信息之间的相似度大于预设阈值时，发出警报。需要说明的是，不同的定位空间对应的场景信息不同，有的场景下，危险系数低，因而待测主体可以做的姿态比较多，然而有的场景危险系数非常高，如果姿态是错误的，则会给待测主体带来很高的伤害。对于不同的待测主体，危险动作特征也可能存在差异，不同的设备在进行同一个动作时，危险系数也是不同的，因而可以预先为每个场景，以及每个待测主体确定对应的危险动作特征，在数据库中存储。若当前待测主体的姿态和危险姿态信息之间的相似度非常高，则说明待测主体当前的姿态有危险，有可能对待测主体带来伤害，因而可以发出警报，及时使得监测人员得知预警信息，避免危险发生。本公开实施例中，该装置首先获取当前定位空间中的各个UWB基站和待测主体之间的距离，其中，待测主体中携带有定位标签，所述待测主体为人或者设备，然后基于加权最小二乘法，根据所述各个UWB基站的设置位置和各个所述距离，计算所述待测主体的第一坐标，之后基于所述定位空间中预设的红外相机，获取包含有所述待测主体的红外图像，其中，所述待测主体上预先设置有至少三个恒温器，所述至少三个恒温器所处的位置不处于同一条直线，然后对所述红外图像进行处理，以确定所述红外图像中每个所述恒温器对应的位置，之后根据所述红外图像中每个所述恒温器对应的位置，以及所述第一坐标、以及预先存储的所述定位标签与每个所述恒温器之间的位置关系，确定每个所述恒温器对应的每个第二坐标，最后根据所述第一坐标和所述每个第二坐标，计算所述待测主体当前的姿态。由此，能够在灰暗的环境下，通过待测物体本身的热量特征，来实现对待测物体位姿的确定，由于是利用了超宽带UWB无线通信的方式进行定位，可以精确测距，且结构简单、成本低、体积小、功耗低、多径分辨率高、抗噪声和抗干扰能力强，通过本方案不仅能提供定位标签性对与基站的相对位置，而且还可以提供定位标签在绝对坐标体系准确位置信息，为安全生产以及救援工作提供数据保障，由于预先在待测主体上安装有恒温器，从而可以利用恒温器的热量，在红外图像中对待测主体进行识别，从而即使待测主体本身热量很低，也可以实现定位，更是通过了多个恒温器进而确定了待测主体的姿态，为煤矿井下的定位和检测提供了丰富的数据支撑，便于及时发现问题，从而避免造成不安全的因素。为了实现上述实施例，本公开还提出一种基于UWB的位姿确定装置。图2为本公开实施例所提供的基于UWB的位姿确定装置的结构示意图。如图2所示，该基于UWB的位姿确定装置200可以包括：第一获取模块210，用于获取当前定位空间中的各个UWB基站和待测主体之间的距离，其中，待测主体中携带有定位标签，所述待测主体为人或者设备；第一计算模块220，用于基于加权最小二乘法，根据所述各个UWB基站的设置位置和各个所述距离，计算所述待测主体的第一坐标；第二获取模块230，用于基于所述定位空间中预设的红外相机，获取包含有所述待测主体的红外图像，其中，所述待测主体上预先设置有至少三个恒温器，所述至少三个恒温器所处的位置不处于同一条直线；处理模块240，用于对所述红外图像进行处理，以确定所述红外图像中每个所述恒温器对应的位置；确定模块250，用于根据所述红外图像中每个所述恒温器对应的位置，以及所述第一坐标、以及预先存储的所述定位标签与每个所述恒温器之间的位置关系，确定每个所述恒温器对应的每个第二坐标；第二计算模块260，用于根据所述第一坐标和所述每个第二坐标，计算所述待测主体当前的姿态。可选的，所述第一计算模块，还用于：根据预先收集的多个基站组网对应的样本数据，构建DOP 数值分析模型，其中，每个所述基站组网对应的属性信息至少包含了基站的形状、数量、高度以及位置分布，所述预先收集的多个基站组网为煤矿井下中多个各个预先标记为狭长定位空间的各个空间中设置的基站组网；基于所述第一坐标配置卡尔曼滤波定位模型的观测值；根据所述DOP 数值分析模型，以及所述当前定位空间对应的场景信息，以及所述当前定位空间对应的基站组网信息，确定所述当前定位空间对应的DOP值，并基于所述DOP值配置所述卡尔曼滤波定位模型的观测噪声协方差参考值；根据所述观测噪声协方差参考值、所述观测值，以及所述卡尔曼滤波定位模型，对当前所述第一坐标进行修正。 可选的，所述第一获取模块，具体用于：基于双边双向测距算法，测每个UWB 基站与所述待测主体之间的距离。可选的，所述第二计算模块，还用于：响应于所述第一坐标和所述每个第二坐标中的任一坐标为目标区域坐标，发出警报，其中，所述第三坐标为与所述当前定位空间对应的危险空间对应的坐标。可选的，所述第二计算模块，还用于：根据所述当前定位空间对应的场景信息，以及所述待测主体的类型，确定与所述类型对应的危险动作特征；确定每个所述危险动作特征对应的危险姿态信息；在所述待测主体当前的姿态与所述危险姿态信息之间的相似度大于预设阈值时，发出警报。为了实现上述实施例，本公开还提出一种电子设备，包括：存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，处理器执行程序时，实现如本公开前述实施例提出的基于UWB的位姿确定方法。为了实现上述实施例，本公开还提出了一种计算机可读存储介质，存储有计算机程序，计算机程序被处理器执行时，实现如本公开前述实施例提出的基于UWB的位姿确定方法。为了实现上述实施例，本公开还提出了一种计算机程序产品，包括计算机程序，所述计算机程序在被处理器执行时，实现如本公开前述实施例提出的基于UWB的位姿确定方法。本公开实施例中，该装置首先获取当前定位空间中的各个UWB基站和待测主体之间的距离，其中，待测主体中携带有定位标签，所述待测主体为人或者设备，然后基于加权最小二乘法，根据所述各个UWB基站的设置位置和各个所述距离，计算所述待测主体的第一坐标，之后基于所述定位空间中预设的红外相机，获取包含有所述待测主体的红外图像，其中，所述待测主体上预先设置有至少三个恒温器，所述至少三个恒温器所处的位置不处于同一条直线，然后对所述红外图像进行处理，以确定所述红外图像中每个所述恒温器对应的位置，之后根据所述红外图像中每个所述恒温器对应的位置，以及所述第一坐标、以及预先存储的所述定位标签与每个所述恒温器之间的位置关系，确定每个所述恒温器对应的每个第二坐标，最后根据所述第一坐标和所述每个第二坐标，计算所述待测主体当前的姿态。由此，能够在灰暗的环境下，通过待测物体本身的热量特征，来实现对待测物体位姿的确定，由于是利用了超宽带UWB无线通信的方式进行定位，可以精确测距，且结构简单、成本低、体积小、功耗低、多径分辨率高、抗噪声和抗干扰能力强，通过本方案不仅能提供定位标签性对与基站的相对位置，而且还可以提供定位标签在绝对坐标体系准确位置信息，为安全生产以及救援工作提供数据保障，由于预先在待测主体上安装有恒温器，从而可以利用恒温器的热量，在红外图像中对待测主体进行识别，从而即使待测主体本身热量很低，也可以实现定位，更是通过了多个恒温器进而确定了待测主体的姿态，为煤矿井下的定位和检测提供了丰富的数据支撑，便于及时发现问题，从而避免造成不安全的因素。图3示出了适于用来实现本公开实施方式的示例性电子设备的框图。图3显示的电子设备12仅仅是一个示例，不应对本公开实施例的功能和使用范围带来任何限制。如图3所示，电子设备12以通用计算设备的形式表现。计算机设备12的组件可以包括但不限于：一个或者多个处理器或者处理单元16，系统存储器28，连接不同系统组件的总线18。总线18表示几类总线结构中的一种或多种，包括存储器总线或者存储器控制器，外围总线，图形加速端口，处理器或者使用多种总线结构中的任意总线结构的局域总线。举例来说，这些体系结构包括但不限于工业标准体系结构总线，微通道体系结构总线，增强型ISA总线、视频电子标准协会局域总线以及外围组件互连总线。计算机设备12典型地包括多种计算机系统可读介质。这些介质可以是任何能够被计算机设备12访问的可用介质，包括易失性和非易失性介质，可移动的和不可移动的介质。存储器28可以包括易失性存储器形式的计算机系统可读介质，例如随机存取存储器30和/或高速缓存存储器32。计算机设备12可以进一步包括其它可移动/不可移动的、易失性/非易失性计算机系统存储介质。仅作为举例，存储系统34可以用于读写不可移动的、非易失性磁介质。尽管图3中未示出，可以提供用于对可移动非易失性磁盘读写的磁盘驱动器，以及对可移动非易失性光盘、数字多功能只读光盘或者其它光介质）读写的光盘驱动器。在这些情况下，每个驱动器可以通过一个或者多个数据介质接口与总线18相连。存储器28可以包括至少一个程序产品，该程序产品具有一组程序模块，这些程序模块被配置以执行本公开各实施例的功能。具有一组程序模块42的程序/实用工具40，可以存储在例如存储器28中，这样的程序模块42包括但不限于操作系统、一个或者多个应用程序、其它程序模块以及程序数据，这些示例中的每一个或某种组合中可能包括网络环境的实现。程序模块42通常执行本公开所描述的实施例中的功能和/或方法。计算机设备12也可以与一个或多个外部设备14通信，还可与一个或者多个使得用户能与该计算机设备12交互的设备通信，和/或与使得该计算机设备12能与一个或多个其它计算设备进行通信的任何设备通信。这种通信可以通过输入/输出接口22进行。并且，计算机设备12还可以通过网络适配器20与一个或者多个网络，广域网和/或公共网络，例如因特网）通信。如图所示，网络适配器20通过总线18与计算机设备12的其它模块通信。应当明白，尽管图中未示出，可以结合计算机设备12使用其它硬件和/或软件模块，包括但不限于：微代码、设备驱动器、冗余处理单元、外部磁盘驱动阵列、RAID系统、磁带驱动器以及数据备份存储系统等。处理单元16通过运行存储在系统存储器28中的程序，从而执行各种功能应用以及数据处理，例如实现前述实施例中提及的方法。本公开的技术方案，首先获取双目摄像机采集的图像，之后对图像进行第一识别，以确定图像中是否包含工作人员，在图像中包含工作人员的情况下，获取图像中刮板机上每个视觉标靶对应的编号，每个视觉标靶在相机坐标下的第一坐标，及工作人员在相机坐标系下的第二坐标，并根据每个视觉标靶对应的编号及第一坐标，确定双目摄像机对应的视野区域中包含的安全区域及危险区域。最后在第二坐标在危险区域内的情况下，发出警报。由此，在发现工作人员进入危险区域之后，及时地发出预警，从而避免安全事故的发生，保障了工作人员的安全。在本说明书的描述中，参考术语“一个实施例”、“一些实施例”、 “示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本公开的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不必须针对的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任一个或多个实施例或示例中以合适的方式结合。此外，在不相互矛盾的情况下，本领域的技术人员可以将本说明书中描述的不同实施例或示例以及不同实施例或示例的特征进行结合和组合。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括至少一个该特征。在本公开的描述中，“多个”的含义是至少两个，例如两个，三个等，除非另有明确具体的限定。流程图中或在此以其他方式描述的任何过程或方法描述可以被理解为，表示包括一个或更多个用于实现定制逻辑功能或过程的步骤的可执行指令的代码的模块、片段或部分，并且本公开的优选实施方式的范围包括另外的实现，其中可以不按所示出或讨论的顺序，包括根据所涉及的功能按基本同时的方式或按相反的顺序，来执行功能，这应被本公开的实施例所属技术领域的技术人员所理解。在流程图中表示或在此以其他方式描述的逻辑和/或步骤，例如，可以被认为是用于实现逻辑功能的可执行指令的定序列表，可以具体实现在任何计算机可读介质中，以供指令执行系统、装置或设备使用，或结合这些指令执行系统、装置或设备而使用。就本说明书而言，"计算机可读介质"可以是任何可以包含、存储、通信、传播或传输程序以供指令执行系统、装置或设备或结合这些指令执行系统、装置或设备而使用的装置。计算机可读介质的更具体的示例包括以下：具有一个或多个布线的电连接部，便携式计算机盘盒，随机存取存储器，只读存储器，可擦除可编辑只读存储器，光纤装置，以及便携式光盘只读存储器。另外，计算机可读介质甚至可以是可在其上打印所述程序的纸或其他合适的介质，因为可以例如通过对纸或其他介质进行光学扫描，接着进行编辑、解译或必要时以其他合适方式进行处理来以电子方式获得所述程序，然后将其存储在计算机存储器中。应当理解，本公开的各部分可以用硬件、软件、固件或它们的组合来实现。在上述实施方式中，多个步骤或方法可以用存储在存储器中且由合适的指令执行系统执行的软件或固件来实现。如，如果用硬件来实现和在另一实施方式中一样，可用本领域公知的下列技术中的任一项或他们的组合来实现：具有用于对数据信号实现逻辑功能的逻辑门电路的离散逻辑电路，具有合适的组合逻辑门电路的专用集成电路，可编程门阵列，现场可编程门阵列等。本技术领域的普通技术人员可以理解实现上述实施例方法携带的全部或部分步骤是可以通过程序来指令相关的硬件完成，所述的程序可以存储于一种计算机可读存储介质中，该程序在执行时，包括方法实施例的步骤之一或其组合。此外，在本公开各个实施例中的各功能单元可以集成在一个处理模块中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个模块中。上述集成的模块既可以采用硬件的形式实现，也可以采用软件功能模块的形式实现。所述集成的模块如果以软件功能模块的形式实现并作为独立的产品销售或使用时，也可以存储在一个计算机可读取存储介质中。上述提到的存储介质可以是只读存储器，磁盘或光盘等。尽管上面已经示出和描述了本公开的实施例，可以理解的是，上述实施例是示例性的，不能理解为对本公开的限制，本领域的普通技术人员在本公开的范围内可以对上述实施例进行变化、修改、替换和变型。
