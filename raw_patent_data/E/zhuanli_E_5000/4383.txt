标题title
一种基于视觉控制的自动安全门系统
摘要abst
本发明涉及一种基于视觉控制的自动安全门系统。设置了红外摄像模块，使得一般状态下整个系统工作在黑暗的环境中，节约能源；在机器人顶部设置V字形散热孔，即可以使得机器人形成良好的散热，又充分利用这个散热的效果拍摄红外图像；红外图像干扰较少，处理速度快，同时充分利用散热形成的图像，可以将能耗降至最低。通过图像处理计算机器人的图像计算得到机器人的多个运动参数，从而对安全门进行控制，使用近场通信模块进行安全门的开启保持控制和机器人的运动控制；极大的提高了安全性。
权利要求书clms
1.一种基于视觉控制的自动安全门系统，其特征在于包括牵引机器人和安全门主体；安全门主体包括安全门控制器、动力模块、数据计算模块、图像采集模块、红外摄像模块和近场通信模块；动力模块、数据计算模块、图像采集模块、红外摄像模块和近场通信模块连接至安全门控制器；动力模块用于控制安全门的开闭，为安全门的开启和关闭提供动力，使得安全门可以在安全门控制器的控制下自动开闭；图像采集模块用于在安全门控制器的控制下采集安全门两侧的可见光图像，并将采集的可见光图像发送至安全门控制器；红外摄像模块用于在安全门控制器的控制下采集安全门两侧的红外图像，并将采集的红外图像发送至安全门控制器；数据计算模块对红外图像进行分析，获得牵引机器人的运动方向、到达安全门的间距和运动速度，并将牵引机器人运动方向、到达安全门的间距和运动速度发送给安全门控制器；安全门控制器根据运动方向、到达安全门的间距和运动速度向动力模块发送指令，控制安全门的开闭。2.根据权利要求1所述的一种基于视觉控制的自动安全门系统，其特征在于：图像采集模块包括照明光源，用于在进行可见光图像采集时进行照明。3.根据权利要求1所述的一种基于视觉控制的自动安全门系统，其特征在于：牵引机器人包括主控模块、电池、驱动模块、路径规划模块、红外摄像模块、标签感应模块和通信标签；驱动模块用于驱动机器人移动，电池用于提供动力源，红外摄像头用于感知外部的环境，路径规划模块用于根据红外摄像头拍摄的图像进行分析，并基于分析结果进行机器人移动的路径规划；标签感应模块用于对安全门的近场通信模块进行感应，并将感应结果发送至主控模块；安全门的近场通信模块用于感应牵引机器人的通信标签，并将感应结果发送至安全门主控制器；牵引机器人顶部设置有隔热板，隔热板上设置多个V形散热孔，牵引机器人的驱动模块设置为保持多个V形散热口的“V”字尖端方向指向牵引机器人的前进方向。4.根据权利要求3所述的一种基于视觉控制的自动安全门系统，其特征在于：数据计算模块对红外图像进行分析的具体方式为：红外图像以3-5Hz的频率拍摄红外图像；数据计算模块从安全门主控制器获取红外摄像模块采集的红外图像，并对红外图像进行预处理；预处理的具体方式为先将红外图像转换成灰度图，然后对灰度图像进行二维离散傅里叶变换，得到二维频谱，然后对进行高斯低通滤波，之后进行二维离散傅里叶逆变换，得到降噪后的图像；将降噪后的图像进行二值化处理，并提取每个白色连通域的坐标，绘制白色连通域的图形的中心线；得到一组图像连通域的中心线的坐标；将连通域的中心线的坐标进行特征识别，将其与预存的多个角度的“V”字形进行匹配；筛选出匹配度最高的“V”字形的角度即为红外图像中“V”字形的角度θ，也即获取了牵引机器人的移动方向；对边缘的“V”字形进行坐标提取，并将其转换成机器人到达安全门的间距L；对前后两张处理后的红外图像中的“V”字形的坐标进行差分，从而获取机器人的运动速度v；当角度θ处于阈值范围之内时，判断牵引机器人朝向安全门运动，进一步当角度θ处于阈值范围之内且机器人到达安全门的间距L小于阈值时，判断机器人即将到达安全门；此时计算t＝L/v，获得机器人到达安全门的时间，安全门控制器控制安全门在t时间内开启。5.根据权利要求4所述的一种基于视觉控制的自动安全门系统，其特征在于：当安全门开启后，安全门的近场通信模块打开，使得安全门的近场通信模块的信号可以被第一有效范围内的牵引机器人的标签感应模块感应到；当牵引机器人距离安全门小于阈值距离时，若标签感应模块感应到安全门的近场通信模块的信号，则牵引机器人继续前进；若没有感应到安全门的近场通信模块的信号，则机器人停止前进；安全门的近场通信模块打开后，扫描牵引第二有效范围内的牵引机器人的通信标签，当第二有效范围内存在牵引机器人的通信标签时，安全门主控制器控制安全门保持开启；第二有效范围比第一有效范围大。6.根据权利要求4所述的一种基于视觉控制的自动安全门系统，其特征在于：当数据计算模块计算得到机器人的运动速度v为0时，图像采集模块启动，并拍摄可见光图像发送给安全门控制器；安全门控制器将可见光图像显示在显示装置上，并请求手动控制。
说明书desc
技术领域本发明涉及机器人控制领域，尤其涉及一种基于视觉控制的自动安全门系统。背景技术机器人工作站内有机器人自动进行各种作业，机器人进出需要控制安全门打开和关闭，安全门常开使得安全门形同虚设，但是人工控制安全门就没有自动控制系统的意义，浪费人力，现有的安全门一般都是和机器人的路径规划系统连接，直接获取机器人路径；但是这种方式需要大量的数据传输，系统负荷大；尤其当前许多分布式工作的机器人，并没有统一的上级控制中枢，这就导致安全门的开闭控制存在困难。申请号CN202010565580.4公开了一种货物存放、领取方法、装置；货物存放方法包括：响应于用户的存放货物指令打开内安全门，通过货叉机构将目标空托盘移动至投递口，并关闭内安全门；打开外安全门，并通过目标空托盘接收待存放货物；关闭外安全门，并通过称重与视觉检测装置检测待存放货物是否满足存放要求；若是，则开启内安全门，并通过货叉机构将待存放货物存放在设定存货区位置。申请号CN201821305123.6公开了一种视觉检测工位，包括用于固定被测物的支撑台、机器人、机器人导轨或机器人安装台、连接在机器人末端的视觉传感器以及围栏；机器人安装在机器人导轨或机器人安装台上；视觉传感器安装在机器人末端，对被测物拍摄，获取图像信息；围栏设置在视觉检测工位的外周，包括本体、光栅监控模块，以及设置于本体上的安全门和安全柜；光栅监控模块包括发射端和接收端；发射端发射出的激光投射到接收端，形成光栅。上述视觉控制方法需要额外的照明，且图像处理时信息较多，处理负荷大，处理效果不好。发明内容针对上述内容，为解决上述问题，提供一种基于视觉控制的自动安全门系统，包括牵引机器人和安全门主体；安全门主体包括安全门控制器、动力模块、数据计算模块、图像采集模块、红外摄像模块和近场通信模块；动力模块、数据计算模块、图像采集模块、红外摄像模块和近场通信模块连接至安全门控制器；动力模块用于控制安全门的开闭，为安全门的开启和关闭提供动力，使得安全门可以在安全门控制器的控制下自动开闭；图像采集模块用于在安全门控制器的控制下采集安全门两侧的可见光图像，并将采集的可见光图像发送至安全门控制器；上述的可见光图像主要用于在整个系统发生故障时提供可见光的图像，从而给维护人员和手动操控人员提供参考；由于为了节能，一般状态下整个系统工作在黑暗的环境中，无法通过可见光进行拍摄，因此设置了红外摄像模块；红外摄像模块用于在安全门控制器的控制下采集安全门两侧的红外图像，并将采集的红外图像发送至安全门控制器；红外摄像模块采集的是热成像，因此可以在黑暗环境中直接采集图像，并且由于工作环境中除了机器人没有其他发热体，可以大大降低图像的处理复杂度，处理速度快，图像更加简单。数据计算模块对红外图像进行分析，获得牵引机器人的运动方向、到达安全门的间距和运动速度，并将牵引机器人运动方向、到达安全门的间距和运动速度发送给安全门控制器；安全门控制器根据运动方向、到达安全门的间距和运动速度向动力模块发送指令，控制安全门的开闭。图像采集模块包括照明光源，用于在进行可见光图像采集时进行照明。牵引机器人包括主控模块、电池、驱动模块、路径规划模块、红外摄像模块、标签感应模块和通信标签；驱动模块用于驱动机器人移动，电池用于提供动力源，红外摄像头用于感知外部的环境，路径规划模块用于根据红外摄像头拍摄的图像进行分析，并基于分析结果进行机器人移动的路径规划；标签感应模块用于对安全门的近场通信模块进行感应，并将感应结果发送至主控模块；安全门的近场通信模块用于感应牵引机器人的通信标签，并将感应结果发送至安全门主控制器；牵引机器人顶部设置有隔热板，隔热板上设置多个V形散热孔，牵引机器人的驱动模块设置为保持多个V形散热口的“V”字尖端方向指向牵引机器人的前进方向。由于隔热板隔热，导致机器人工作中的发热只能从V字形的散热孔排出，此时使用红外摄像模块采集图像就可以看到在机器人顶部的多个V字形比其他位置的温度更高，就可以从背景中将V字形提取出来。实际在工作中，保持V字的尖端始终指向机器人的前进方向有多种设置方式，一种为设置隔热板可以转动，保证时刻与前进方向一致即可；另一种方式为设置机器人只可以原地旋转或者沿着V字尖端的方向前进即可。数据计算模块对红外图像进行分析的具体方式为：红外图像以3-5Hz的频率拍摄红外图像；拍摄频率低，降低系统负荷。数据计算模块从安全门主控制器获取红外摄像模块采集的红外图像，并对红外图像进行预处理；预处理的具体方式为先将红外图像转换成灰度图，然后对灰度图像进行二维离散傅里叶变换，得到二维频谱，然后对进行高斯低通滤波，之后进行二维离散傅里叶逆变换，得到降噪后的图像；将降噪后的图像进行二值化处理，并提取每个白色连通域的坐标，绘制白色连通域的图形的中心线；得到一组图像连通域的中心线的坐标；将连通域的中心线的坐标进行特征识别，将其与预存的多个角度的“V”字形进行匹配；筛选出匹配度最高的“V”字形的角度即为红外图像中“V”字形的角度θ，也即获取了牵引机器人的移动方向；实际使用时提前拍摄多组不同角度机器人的图像，并将其存储在数据库中，将未知角度的图像与已知角度的图像进行匹配即可获得V字的方向。对边缘的“V”字形进行坐标提取，并将其转换成机器人到达安全门的间距L；对前后两张处理后的红外图像中的“V”字形的坐标进行差分，从而获取机器人的运动速度v；当角度θ处于阈值范围之内时，判断牵引机器人朝向安全门运动，进一步当角度θ处于阈值范围之内且机器人到达安全门的间距L小于阈值时，判断机器人即将到达安全门；此时计算t＝L/v，获得机器人到达安全门的时间，安全门控制器控制安全门在t时间内开启。当安全门开启后，安全门的近场通信模块打开，使得安全门的近场通信模块的信号可以被第一有效范围内的牵引机器人的标签感应模块感应到；当牵引机器人距离安全门小于阈值距离时，若标签感应模块感应到安全门的近场通信模块的信号，则牵引机器人继续前进；若没有感应到安全门的近场通信模块的信号，则机器人停止前进；安全门的近场通信模块打开后，扫描牵引第二有效范围内的牵引机器人的通信标签，当第二有效范围内存在牵引机器人的通信标签时，安全门主控制器控制安全门保持开启；第二有效范围比第一有效范围大。当数据计算模块计算得到机器人的运动速度v为0时，图像采集模块启动，并拍摄可见光图像发送给安全门控制器；安全门控制器将可见光图像显示在显示装置上，并请求手动控制。本发明的有益效果为：设置了红外摄像模块，使得一般状态下整个系统工作在黑暗的环境中，节约能源；在机器人顶部设置V字形散热孔，即可以使得机器人形成良好的散热，又充分利用这个散热的效果拍摄红外图像；红外图像干扰较少，处理速度快，同时充分利用散热形成的图像，可以将能耗降至最低。通过图像处理计算机器人的图像计算得到机器人的多个运动参数，从而对安全门进行控制，使用近场通信模块进行安全门的开启保持控制和机器人的运动控制；极大的提高了安全性。附图说明被包括来提供对所公开主题的进一步认识的附图，将被并入此说明书并构成该说明书的一部分。附图也阐明了所公开主题的实现，以及连同详细描述一起用于解释所公开主题的实现原则。没有尝试对所公开主题的基本理解及其多种实践方式展示超过需要的结构细节。图1为本发明安全门主体的架构示意图；图2为本发明牵引机器人的架构示意图；图3为本发明安全门和牵引机器人工作时的位置关系示意图。具体实施方式本发明的优点、特征以及达成所述目的的方法通过附图及后续的详细说明将会明确。实施例1：一种基于视觉控制的自动安全门系统，包括牵引机器人和安全门主体；安全门主体包括安全门控制器、动力模块、数据计算模块、图像采集模块、红外摄像模块和近场通信模块；动力模块、数据计算模块、图像采集模块、红外摄像模块和近场通信模块连接至安全门控制器；动力模块用于控制安全门的开闭，为安全门的开启和关闭提供动力，使得安全门可以在安全门控制器的控制下自动开闭；图像采集模块用于在安全门控制器的控制下采集安全门两侧的可见光图像，并将采集的可见光图像发送至安全门控制器；红外摄像模块用于在安全门控制器的控制下采集安全门两侧的红外图像，并将采集的红外图像发送至安全门控制器；数据计算模块对红外图像进行分析，获得牵引机器人的运动方向、到达安全门的间距和运动速度，并将牵引机器人运动方向、到达安全门的间距和运动速度发送给安全门控制器；安全门控制器根据运动方向、到达安全门的间距和运动速度向动力模块发送指令，控制安全门的开闭。图像采集模块包括照明光源，用于在进行可见光图像采集时进行照明。牵引机器人包括主控模块、电池、驱动模块、路径规划模块、红外摄像模块、标签感应模块和通信标签；驱动模块用于驱动机器人移动，电池用于提供动力源，红外摄像头用于感知外部的环境，路径规划模块用于根据红外摄像头拍摄的图像进行分析，并基于分析结果进行机器人移动的路径规划；标签感应模块用于对安全门的近场通信模块进行感应，并将感应结果发送至主控模块；安全门的近场通信模块用于感应牵引机器人的通信标签，并将感应结果发送至安全门主控制器；牵引机器人顶部设置有隔热板，隔热板上设置多个V形散热孔，牵引机器人的驱动模块设置为保持多个V形散热口的“V”字尖端方向指向牵引机器人的前进方向。实施例2：数据计算模块对红外图像进行分析的具体方式为：红外图像以3-5Hz的频率拍摄红外图像；数据计算模块从安全门主控制器获取红外摄像模块采集的红外图像，并对红外图像进行预处理；预处理的具体方式为先将红外图像转换成灰度图，然后对灰度图像进行二维离散傅里叶变换，得到二维频谱，然后对进行高斯低通滤波，之后进行二维离散傅里叶逆变换，得到降噪后的图像；将降噪后的图像进行二值化处理，并提取每个白色连通域的坐标，绘制白色连通域的图形的中心线；得到一组图像连通域的中心线的坐标；将连通域的中心线的坐标进行特征识别，将其与预存的多个角度的“V”字形进行匹配；筛选出匹配度最高的“V”字形的角度即为红外图像中“V”字形的角度θ，也即获取了牵引机器人的移动方向；对边缘的“V”字形进行坐标提取，并将其转换成机器人到达安全门的间距L；对前后两张处理后的红外图像中的“V”字形的坐标进行差分，从而获取机器人的运动速度v；实施例3：本实施例针对安全门和机器人的控制方式进行进一步的说明。当角度θ处于阈值范围之内时，判断牵引机器人朝向安全门运动，进一步当角度θ处于阈值范围之内且机器人到达安全门的间距L小于阈值时，判断机器人即将到达安全门；此时计算t＝L/v，获得机器人到达安全门的时间，安全门控制器控制安全门在t时间内开启。当安全门开启后，安全门的近场通信模块打开，使得安全门的近场通信模块的信号可以被第一有效范围内的牵引机器人的标签感应模块感应到；当牵引机器人距离安全门小于阈值距离时，若标签感应模块感应到安全门的近场通信模块的信号，则牵引机器人继续前进；若没有感应到安全门的近场通信模块的信号，则机器人停止前进；安全门的近场通信模块打开后，扫描牵引第二有效范围内的牵引机器人的通信标签，当第二有效范围内存在牵引机器人的通信标签时，安全门主控制器控制安全门保持开启；第二有效范围比第一有效范围大。当数据计算模块计算得到机器人的运动速度v为0时，图像采集模块启动，并拍摄可见光图像发送给安全门控制器；安全门控制器将可见光图像显示在显示装置上，并请求手动控制。在正常工作状态下机器人工作在黑暗的环境中，无需提供照明，红外检测器检测机器人散热发射的红外线即可实现图像采集和识别；当运行出现故障时，系统可以自行进行判断，并提供可见关的图像，供人工操作时进行参考。以上所述，仅为本发明的优选实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以所述权利要求的保护范围为准。
