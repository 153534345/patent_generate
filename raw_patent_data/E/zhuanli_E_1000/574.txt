标题title
一种隧道打孔机器人及其智能目标识别与自动化打孔方法
摘要abst
本发明提供了一种隧道打孔机器人及其智能目标识别与自动化打孔方法，属于智能机器人技术领域。隧道打孔机器人包括电控系统以及与电控系统信号连接的行走平台轨道车、示教器、发电机、液压系统、打孔机械臂、执行机构，执行机构中设置有智能视觉相机以及四个激光传感器。本发明引入视觉识别技术，采用智能视觉相机和激光传感器相结合的方法，实现了钻孔目标的三维定位和钻头与目标平面相对角度的计算，进而能够更快更准的实现目标点的识别并控制机械臂运动，实施完整的打孔作业，使该隧道打孔机器人具有广泛的社会运用前景，有效解决了传统的打孔方法所存在的无法解决钻孔间距的控制、角度调整、无法适应现场复杂多变的施工要求等问题。
权利要求书clms
1.一种基于隧道打孔机器人的智能目标识别与自动化打孔方法，其特征在于，隧道打孔机器人包括电控系统以及与电控系统信号连接的行走平台轨道车、示教器、发电机、液压系统、打孔机械臂、执行机构；执行机构包括固定在打孔机械臂的机械臂头架上的钻头，机械臂头架四角处安装有激光传感器A、激光传感器B、激光传感器C、激光传感器D，机械臂头架上还安装有智能视觉相机；智能目标识别与自动化打孔方法包括如下过程：步骤1：向示教器中输入系统参数，启动行走平台轨道车，带动打孔机器人整体移动至第一个目标打孔点附近；步骤2：智能视觉相机进行视觉检测，在可见打孔区域内检测目标位置，将检测到的图像数据传递至电控系统，同时，激光传感器A、激光传感器B、激光传感器C、激光传感器D将获得的距离数据也传递至电控系统；电控系统对接收到的数据进行分析处理，计算出钻头与目标位置的距离差值以及夹角；步骤3：电控系统通过步骤2计算出钻头与目标位置之间的距离以及夹角数据后，结合打孔机械臂的期望位置，基于模糊PID控制原理计算得到目标位置控制量，然后由电控系统根据目标位置控制量控制行走平台轨道车运动以及控制打孔机械臂带动钻头末端运动，使得钻头末端与目标打孔点精确对准；步骤4：钻头末端调整至垂直于目标打孔点时，电控系统基于目标位置控制量控制机械臂底座移动，使钻头靠近目标位置；步骤5：钻头按钻深钻，钻孔完成后，机械臂底座回到原位；步骤6：行走平台轨道车根据钻进间隔，移动到下一个需要钻进的位置，然后重复步骤2至5，继续钻孔；步骤7：当一侧钻孔作业完成后，通过打孔机械臂切换到另一侧继续同样的钻孔作业。2.根据权利要求1所述的智能目标识别与自动化打孔方法，其特征在于，所述步骤2中，计算钻头与目标位置的距离差值的具体方法如下：将四个激光传感器所在位置分别记为A、B、C、D四个点位，设定AB = CD = ，AC = BD =，建立Oxyz参考坐标系，该坐标系是A、B、C、D所在的平面坐标系，其以A、B、C、D所在平面的中心处为原点，垂直于机械臂头架向上的方向为X轴方向，以垂直于机械臂头架向右的方向为Y轴方向，以垂直机械臂头架平面且指向内的方向为Z轴方向；则四个激光传感器的空间三维坐标分别为：；；；；式中，、/＞、/＞、/＞分别为激光传感器A、激光传感器B、激光传感器C、激光传感器D的空间三维坐标；然后，用线性插值法计算出智能视觉相机中心到目标位置所在平面的距离，然后根据世界坐标系与像素坐标系之间的变化关系，得到智能视觉相机中目标位置在世界坐标系Oxyz下的坐标；接着，设定四个激光传感器的测量值分别为、/＞、/＞、/＞，则四个激光传感器在目标位置平面上的投影点在Oxyz坐标系下分别表示为：；；；；式中，、/＞、/＞、/＞分别为激光传感器A、激光传感器B、激光传感器C、激光传感器D在目标位置平面上的投影点在Oxyz坐标系中的空间三维坐标；在钻头垂直于目标位置的平面后，通过激光传感器读取距离数据即可得到钻头与目标位置的距离差值。3.根据权利要求2所述的智能目标识别与自动化打孔方法，其特征在于，所述步骤2中，计算钻头与目标位置的夹角的具体方法如下：利用四个投影点、/＞、/＞、/＞计算得到如下两个非平行向量/＞和/＞：；；则四个投影点所在平面的法向量为：；式中，、/＞、/＞分别为四个投影点所在平面的法向量的X轴、Y轴、Z轴的分向量；是/＞的计算所得值，/＞是/＞的计算所得值，/＞是/＞的计算所得值；/＞表示转置；则法向量与目标位置所在平面坐标系中对应坐标轴之间的夹角，即钻头与目标位置之间的夹角为：；；；、/＞、/＞分别表示法向量与目标位置所在平面坐标系的X轴、Y轴、Z轴之间的夹角；当钻头垂直于目标平面时，/＞，/＞，/＞。4.根据权利要求1所述的智能目标识别与自动化打孔方法，其特征在于，所述步骤3中，基于模糊PID控制原理计算目标位置控制量时，计算模糊PID控制器的输入值：；式中，和/＞分别表示期望值和实际输出值；/＞和/＞分别表示误差和误差率；/＞表示时间；通过对模糊PID控制器工作参数的设置与调整，得出模糊PID控制器的离散控制规律为：；式中，是目标位置控制量；/＞表示模糊PID控制器的输出和输入偏差之间的比例关系。
说明书desc
技术领域本发明属于智能机器人技术领域，尤其涉及一种隧道打孔机器人及其智能目标识别与自动化打孔方法。背景技术随着我国城市轨道交通建设的快速发展，地铁隧道占比越来越多，地铁隧道中电接触网、侧壁电缆及紧急输送平台等机电设施的安装均需在隧道管片上钻大量的安装孔，目前相关钻孔工作主要采用人工划线、手持钻孔的作业模式，涉及大量空中作业，作业难度大，劳动强度高，施工效率低，钻孔质量难以保证。市面上也存在少量地铁隧道自动打孔台车，能在隧道壁的不同位置同时自动打多组孔，但无法解决钻孔间距的控制、角度调整问题，无法适应现场复杂多变的施工要求。为解决上述问题，本发明提出了一种隧道打孔机器人及其智能目标识别与自动化打孔方法。发明内容针对现有技术中存在不足，本发明提供了一种隧道打孔机器人及其智能目标识别与自动化打孔方法，有效解决了传统的打孔方法所存在的无法解决钻孔间距的控制、角度调整、无法适应现场复杂多变的施工要求等问题。本发明是通过以下技术手段实现上述技术目的的。一种基于隧道打孔机器人的智能目标识别与自动化打孔方法，隧道打孔机器人包括电控系统以及与电控系统信号连接的行走平台轨道车、示教器、发电机、液压系统、打孔机械臂、执行机构；执行机构包括固定在打孔机械臂的机械臂头架上的钻头，机械臂头架四角处安装有激光传感器A、激光传感器B、激光传感器C、激光传感器D，机械臂头架上还安装有智能视觉相机；智能目标识别与自动化打孔方法包括如下过程：步骤1：向示教器中输入系统参数，启动行走平台轨道车，带动打孔机器人整体移动至第一个目标打孔点附近；步骤2：智能视觉相机进行视觉检测，在可见打孔区域内检测目标位置，将检测到的图像数据传递至电控系统，同时，激光传感器A、激光传感器B、激光传感器C、激光传感器D将获得的距离数据也传递至电控系统；电控系统对接收到的数据进行分析处理，计算出钻头与目标位置的距离差值以及夹角；步骤3：电控系统通过步骤2计算出钻头与目标位置之间的距离以及夹角数据后，结合打孔机械臂的期望位置，基于模糊PID控制原理计算得到目标位置控制量，然后由电控系统根据目标位置控制量控制行走平台轨道车运动以及控制打孔机械臂带动钻头末端运动，使得钻头末端与目标打孔点精确对准；步骤4：钻头末端调整至垂直于目标打孔点时，电控系统基于目标位置控制量控制机械臂底座移动，使钻头靠近目标位置；步骤5：钻头按钻深钻孔，钻孔完成后，机械臂底座回到原位；步骤6：行走平台轨道车根据钻进间隔，移动到下一个需要钻进的位置，然后重复步骤2至5，继续钻孔；步骤7：当一侧钻孔作业完成后，通过打孔机械臂切换到另一侧继续同样的钻孔作业。进一步地，所述步骤2中，计算钻头与目标位置的距离差值的具体方法如下：将四个激光传感器所在位置分别记为A、B、C、D四个点位，设定AB = CD = ，AC =BD =/＞，建立Oxyz参考坐标系，该坐标系是A、B、C、D所在的平面坐标系，其以A、B、C、D所在平面的中心处为原点，垂直于机械臂头架向上的方向为X轴方向，以垂直于机械臂头架向右的方向为Y轴方向，以垂直机械臂头架平面且指向内的方向为Z轴方向；则四个激光传感器的空间三维坐标分别为：；；；；式中，、/＞、/＞、/＞分别为激光传感器A、激光传感器B、激光传感器C、激光传感器D的空间三维坐标；然后，用线性插值法计算出智能视觉相机中心到目标位置所在平面的距离，然后根据世界坐标系与像素坐标系之间的变化关系，得到智能视觉相机中目标位置在世界坐标系Oxyz下的坐标；接着，设定四个激光传感器的测量值分别为、/＞、/＞、/＞，则四个激光传感器在目标位置平面上的投影点在Oxyz坐标系下分别表示为：；；；；式中，、/＞、/＞、/＞分别为激光传感器A、激光传感器B、激光传感器C、激光传感器D在目标位置平面上的投影点在Oxyz坐标系中的空间三维坐标；在钻头垂直于目标位置的平面后，通过激光传感器读取距离数据即可得到钻头与目标位置的距离差值。进一步地，所述步骤2中，计算钻头与目标位置的夹角的具体方法如下：利用四个投影点、/＞、/＞、/＞计算得到如下两个非平行向量/＞和/＞：；；则四个投影点所在平面的法向量为：；式中，、/＞、/＞分别为四个投影点所在平面的法向量的X轴、Y轴、Z轴的分向量；是/＞的计算所得值，/＞是/＞的计算所得值，/＞是/＞的计算所得值；/＞表示转置；则法向量与目标位置所在平面坐标系中对应坐标轴之间的夹角，即钻头与目标位置之间的夹角为：；；；、/＞、/＞分别表示法向量与目标位置所在平面坐标系的X轴、Y轴、Z轴之间的夹角；当钻头垂直于目标平面时，/＞，/＞，/＞。进一步地，所述步骤3中，基于模糊PID控制原理计算目标位置控制量时，受到打孔机械臂工作状态以及位姿的影响，输入模糊PID控制器中的数据呈现出动态变化规律，模糊PID控制器的工作参数随之发生变化，计算模糊PID控制器的输入值：；式中，和/＞分别表示期望值和实际输出值；/＞和/＞分别表示误差和误差率；/＞表示时间；通过对模糊PID控制器工作参数的设置与调整，得出模糊PID控制器的离散控制规律为：；式中，是目标位置控制量；/＞表示模糊PID控制器的输出和输入偏差之间的比例关系。本发明具有如下有益效果：本发明引入视觉识别技术，采用智能视觉相机和激光传感器相结合的方法，实现了钻孔目标的三维定位和钻头与目标平面相对角度的计算，进而能够更快更准的实现目标点的识别并控制机械臂运动，实施完整的打孔作业，使该隧道打孔机器人具有广泛的社会运用前景，有效解决了传统的打孔方法所存在的无法解决钻孔间距的控制、角度调整、无法适应现场复杂多变的施工要求等问题。附图说明图1为行走平台轨道车结构示意图；图2为液压系统示意图；图3为打孔机械臂结构示意图；图4为末端执行器结构示意图；图5为隧道打孔机器人整体示意图；图6为激光布局及坐标系示意图；图中：1-1、主动行走轮组；1-2、被动行走轮组；1-3、变速调频电机；1-4、顶部支撑板；2-1、液压滑轨；2-2、滑块；2-3、液压马达；2-4、丝杠；2-5、固定板A；2-6、固定板B；2-7、液压滑轨底座；3-1、机械臂底座；3-2、机械臂折臂；3-3、机械臂大臂；3-4、机械臂小臂；3-5、机械臂底架；3-6、液压缸；4-1、机械臂头架；4-2、夹头A；4-3、夹头B；5-1、行走平台轨道车；5-2、电控系统；5-3、示教器；5-4、发电机；5-5、液压系统；5-6、打孔机械臂；5-7、执行机构；6-1、激光传感器A；6-2、激光传感器B；6-3、激光传感器C；6-4、激光传感器D；6-5、智能视觉相机。具体实施方式下面结合附图以及具体实施例对本发明作进一步的说明，但本发明的保护范围并不限于此。如图5所示，本发明所述的隧道打孔机器人，包括电控系统5-2以及与电控系统5-2信号连接的行走平台轨道车5-1、示教器5-3、发电机5-4、液压系统5-5、打孔机械臂5-6、执行机构5-7。如图1、5所示，行走平台轨道车5-1包括主动行走轮组1-1、被动行走轮组1-2、变速调频电机1-3、顶部支撑板1-4。主动行走轮组1-1、被动行走轮组1-2均安装在顶部支撑板1-4下表面，均通过变速调频电机1-3驱动，变速调频电机1-3与电控系统5-2连接，受其控制。电控系统5-2、发电机5-4、液压系统5-5均固定安装在顶部支撑板1-4上表面，示教器5-3安装在电控系统5-2上。如图2、5所示，液压系统5-5包括液压滑轨2-1、滑块2-2、液压马达2-3、丝杠2-4、固定板A2-5、固定板B2-6、液压滑轨底座2-7。液压滑轨底座2-7固定在顶部支撑板1-4上，液压滑轨底座2-7上安装有液压滑轨2-1、丝杠2-4，丝杠2-4由液压马达2-3驱动旋转，液压滑轨2-1以及丝杠2-4上共同安装有一块滑块2-2，滑块2-2能够沿着液压滑轨2-1运动，滑块2-2上安装有固定板A2-5、固定板B2-6、液压马达2-3及打孔机械臂5-6上的机械臂底架3-5；固定板A2-5、固定板B2-6用于固定打孔机械臂5-6上的机械臂底座3-1，保证打孔机械臂5-6的稳定性。如图3、5所示，打孔机械臂5-6包括机械臂底座3-1，机械臂折臂3-2，机械臂大臂3-3，机械臂小臂3-4，机械臂底架3-5、液压缸3-6。机械臂底座3-1安装在机械臂底架3-5上，机械臂底架3-5固定于滑块2-2上；机械臂底座3-1侧边安装有液压缸3-6，液压缸3-6用于驱动机械臂底座3-1旋转。机械臂折臂3-2固定于机械臂底座3-1上，机械臂折臂3-2与机械臂大臂3-3通过液压杆及转动副连接，机械臂大臂3-3与机械臂小臂3-4通过滑动副连接，机械臂小臂3-4通过转动副与机械臂头架4-1连接，执行机构5-7安装在机械臂头架4-1上。如图4、5、6所示，执行机构5-7包括夹头A4-2、夹头B4-3、激光传感器A6-1、激光传感器B6-2、激光传感器C6-3、激光传感器D6-4、智能视觉相机6-5。机械臂头架4-1上固定有夹头A4-2、夹头B4-3，其中，夹头A4-2与夹头B4-3的结构以及安装完全相同。激光传感器A6-1、激光传感器B6-2、激光传感器C6-3、激光传感器D6-4、智能视觉相机6-5均固定于机械臂头架4-1上，其中，四个激光传感器分别位于夹头位置处的机械臂头架4-1四角处。电控系统5-2包括主控制器PC与PLC，主控制器PC用于接收激光传感器A6-1、激光传感器B6-2、激光传感器C6-3、激光传感器D6-4以及智能视觉相机6-5的实时数据并进行处理；PLC用于执行逻辑控制，监视输入信号状态并根据设定的逻辑规则控制相应执行机构做出相应的输出动作。利用上述隧道打孔机器人的智能目标识别与自动化打孔方法，包括如下过程：步骤1：首先向示教器5-3中输入系统参数，包括孔深、孔间距、左侧NL上孔数、右侧NR上孔数，然后启动行走平台轨道车5-1，带动打孔机器人整体移动至第一个目标打孔点附近。步骤2：行走平台轨道车5-1至目标打孔点附近且停稳后，智能视觉相机6-5进行视觉检测，在可见打孔区域内检测目标打孔点位置，将检测到的图像数据传递至电控系统5-2，与此同时，激光传感器A6-1、激光传感器B6-2、激光传感器C6-3、激光传感器D6-4将获得的距离数据也传递至电控系统5-2；电控系统5-2中的主控制器PC对接收到的数据进行分析处理，计算出钻头与目标位置的距离差值以及夹角，具体的算法原理如下：钻头与目标位置的距离差值计算原理如下：首先，将四个激光传感器所在位置分别记为A、B、C、D四个点位，设定AB = CD =，AC = BD =/＞，建立如图6所示的Oxyz参考坐标系，该坐标系是A、B、C、D所在的平面坐标系，其以A、B、C、D所在平面的中心处为原点，垂直于机械臂头架4-1向上的方向为X轴方向，以垂直于机械臂头架4-1向右的方向为Y轴方向，以垂直机械臂头架4-1平面且指向内的方向为Z轴方向；则四个激光传感器的空间三维坐标分别为：式中，、/＞、/＞、/＞分别为激光传感器A6-1、激光传感器B6-2、激光传感器C6-3、激光传感器D6-4的空间三维坐标；然后，用线性插值法计算出智能视觉相机6-5中心到目标位置所在平面的距离，然后根据世界坐标系与像素坐标系之间的变化关系，得到智能视觉相机6-5中目标位置在世界坐标系Oxyz下的坐标；接着，设定四个激光传感器的测量值分别为、/＞、/＞、/＞，则四个激光传感器在目标位置平面上的投影点在Oxyz坐标系下分别表示为：式中，、/＞、/＞、/＞分别为激光传感器A6-1、激光传感器B6-2、激光传感器C6-3、激光传感器D6-4在目标位置平面上的投影点在Oxyz坐标系中的空间三维坐标；由于只需要保证钻头的末端与目标位置所在平面坐标系的X、Y轴重合且钻头垂直于目标位置平面即可实现精准打孔，因此Z轴不需要计算，只需要在钻头垂直于目标位置的平面后，通过激光传感器读取距离数据即可得到钻头与目标位置的距离差值。钻头与目标位置平面夹角的相对关系计算如下：利用四个投影点、/＞、/＞、/＞计算得到如下两个非平行向量/＞和/＞：则四个投影点所在平面的法向量为：式中，、/＞、/＞分别为四个投影点所在平面的法向量的X轴、Y轴、Z轴的分向量；是/＞的计算所得值，/＞是/＞的计算所得值，/＞是/＞的计算所得值；/＞表示转置。则法向量与目标位置所在平面坐标系中对应坐标轴之间的夹角为：、/＞、/＞分别表示法向量与目标位置所在平面坐标系的X轴、Y轴、Z轴之间的夹角；当钻头垂直于目标平面时，/＞，/＞，/＞。步骤3：电控系统5-2中的主控制器PC通过步骤2计算出钻头与目标位置之间的距离以及夹角数据后，结合打孔机械臂5-6的期望位置，利用模糊PID控制器，基于模糊PID控制原理计算得到目标位置控制量，即模糊PID控制器的输出结果，然后由电控系统5-2中的PLC根据目标位置控制量控制行走平台轨道车5-1、液压系统5-5运动以及控制打孔机械臂5-6带动钻头末端运动，使其与目标打孔点所在平面坐标系的X轴、Y轴坐标重合，即钻头末端与目标打孔点精确对准；其中，模糊PID 控制是通过在线实时调整比例系数、微分系数、积分系数，使其能随误差和误差变化率而变化，从而使被控对象有良好的动、静态性能；受到打孔机械臂5-6工作状态以及位姿的影响，输入模糊PID控制器中的数据呈现出动态变化规律，要求模糊PID控制器的工作参数随之发生变化，计算模糊PID控制器的输入值：式中，和/＞分别表示期望值和实际输出值；/＞和/＞分别表示误差和误差率；/＞表示时间；通过对模糊PID控制器工作参数的设置与调整，可以得出模糊PID控制器的离散控制规律为：式中，是目标位置控制量；/＞表示模糊PID控制器的输出和输入偏差之间的比例关系，增加比例系数可降低系统的稳定误差，从而改善系统的稳定状态；/＞主要是为了消除稳态误差，随着时间的推移，稳态误差会逐渐降低；/＞是为了提高控制器的运行稳定性。步骤4：钻头末端调整至垂直于目标打孔点时，电控系统5-2基于目标位置控制量控制机械臂底座3-1移动，使钻头靠近目标位置；步骤5：钻头按钻深钻孔，钻孔完成后，机械臂底座3-1回到原位；步骤6：行走平台轨道车5-1根据钻进间隔，移动到下一个需要钻进的位置，然后重复步骤2至5，继续钻孔。步骤7：当一侧钻孔作业完成后，通过打孔机械臂5-6切换到另一侧继续同样的钻孔作业。所述实施例为本发明的优选的实施方式，但本发明并不限于上述实施方式，在不背离本发明的实质内容的情况下，本领域技术人员能够做出的任何显而易见的改进、替换或变型均属于本发明的保护范围。
