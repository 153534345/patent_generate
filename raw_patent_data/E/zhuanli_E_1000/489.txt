标题title
一种基于深度学习的油井井底流压软测量方法
摘要abst
本发明涉及一种基于深度学习的油井井底流压软测量方法，属于信息技术领域。本方法为：区块选择与区块建模；井网选择与精细描述；精细化数值模拟；油井聚类参数选择；油井聚类分析；油井工况预测参数选择；工况聚类分析；井底流压预测。本方法充分利用油田生产大数据，通过动静态数据相结合的方式，实现油井井底流压的实时连续测量，操作简单，经济成本低，易于工程实现，适合油田大面积推广应用。
权利要求书clms
1.一种基于深度学习的油井井底流压软测量方法，其特征在于，包括以下步骤：1)基于油田中的井网，构建井网地质模型，根据动静态油气生产数据进行数值模拟；2)根据所选择的井网和数值模拟结果，选择多个储层参数作为油井聚类参数，使用Agglomerative层次聚类算法对其进行聚类分析，得到多个聚类结果；3)根据采油工程原理，在步骤2)得到的聚类结果中，针对各个油井，选择多个参数作为工况聚类参数，并使用Agglomerative层次聚类算法对油井进行工况聚类分析，得到多个不同的工况聚类结果；4)在步骤3)中的每个聚类内，基于井底流压预测参数和井底流压实测参数，采用深度双向长短期记忆神经网络BiLSTM构建并训练油井井底流压预测模型，使用训练好的预测模型对油井井底流压进行预测。2.根据权利要求1所述的一种基于深度学习的油井井底流压软测量方法，其特征在于，所述步骤1)包括以下步骤：1.1)在油田中选择目标区块，并根据区块静态数据，建立目标区块的初步地质模型；1.2)在目标区块中选择井网，针对所选井网，进行油藏精细描述，建立最终的井网地质模型，并根据动静态油气生产数据进行油藏数值模拟。3.根据权利要求1所述的一种基于深度学习的油井井底流压软测量方法，其特征在于，所述步骤2)包括以下步骤：2.1)根据所选择的井网和数值模拟结果，选择多个地质参数，构建油井聚类数据集X，X＝{X1,X2,…,Xs,…,XS}，其中，Xs表示第s个样本点，分别表示K种不同的油井聚类参数，S表示样本个数；2.2)对于油井聚类数据集X，将每个样本作为一个簇，计算距离矩阵D；2.3)遍历距离矩阵D，找到其中的最小距离，将拥有最小距离的两个簇合并为一个新的簇，并根据簇距离度量方法更新距离矩阵D，即删除所述两个簇对应的行和列，并把新簇的距离向量插入距离矩阵D中；2.4)重复过程步骤2.3)，直至最终只剩下一个簇，终止迭代，输出最终聚类结果{WG1，WG2，…WGn，…，WGN}，其中，WGn代表第n个样本聚类结果，N表示聚类数。4.根据权利要求3所述的一种基于深度学习的油井井底流压软测量方法，其特征在于，所述距离矩阵D采用欧式距离进行计算，即其中，Dij为样本点Xi和Xj之间的距离，为第i个样本的第k个聚类参数，/＞为第j个样本的第k个聚类参数，K为样本个数。5.根据权利要求1所述的一种基于深度学习的油井井底流压软测量方法，其特征在于，所述步骤3)包括以下步骤：3.1)根据采油工程原理，在步骤2)得到的聚类结果中，针对各个油井，选择多个油井参数，构建井底流压预测数据集Y，Y＝{Y1，Y2，…，Ym，…，YM}，其中，Ym表示第m个样本点，分别表示n种不同的油井参数，M表示样本个数；3.2)根据步骤2.2)～步骤2.4)，对油井参数进行工况聚类分析，得到Z个不同的工况聚类结果{WC1，WC2，…WCz，…，WCZ}，其中，WCz代表第z个样本聚类结果。6.根据权利要求1所述的一种基于深度学习的油井井底流压软测量方法，其特征在于，所述步骤4)包括以下步骤：4.1)将井底流压预测数据集Y＝{Y1，Y2，…，Ym，…，YM}和实测井底流压数据L＝{L1，L2，…，Lm，…，LM}进行归一化处理，得到初始样本集G，G＝{，，…，，…，}，其中，Y′m表示第m个样本归一化后的结果，L′M表示第m个实测井底流压参数归一化后的结果；4.2)对深度双向长短期记忆神经网络BiLSTM预测模型参数进行初始化，并将初始样本集G分为训练集和测试集；4.3)通过训练集数据训练预测模型，判断训练计数值是否达到设定的训练次数，如果达到训练次数，进行步骤4.4)，如果没有达到训练次数，判断预测误差是否达到训练目标设定的误差要求，如果达到训练目标设定的误差要求，进行步骤4.4)，否则增加模型训练次数或重新定义训练目标；4.4)使用训练好的预测模型对油井井底流压进行预测，并对油藏数值模拟过程参数进行更新。7.一种基于深度学习的油井井底流压软测量系统，其特征在于，包括以下步骤：井网地质模型构建模块，用于基于油田中的井网，构建井网地质模型，根据动静态油气生产数据进行数值模拟；油井聚类模块，用于根据所选择的井网和数值模拟结果，选择多个储层参数作为油井聚类参数，使用Agglomerative层次聚类算法对其进行聚类分析，得到多个聚类结果；油井工况聚类模块，用于根据采油工程原理，在聚类结果中，针对各个油井，选择多个参数作为工况聚类参数，并使用Agglomerative层次聚类算法对油井进行工况聚类分析，得到多个不同的工况聚类结果；井底流压预测模块，用于在每个聚类内，基于井底流压预测参数和井底流压实测参数，采用深度双向长短期记忆神经网络BiLSTM构建并训练油井井底流压预测模型，使用训练好的预测模型对油井井底流压进行预测。8.一种基于深度学习的油井井底流压软测量系统，其特征在于，包括存储器和处理器；所述存储器，用于存储计算机程序；所述处理器，用于当执行所述计算机程序时，实现如权利要求1-6任一项所述的一种基于深度学习的油井井底流压软测量方法。9.一种计算机可读存储介质，其特征在于，所述存储介质上存储有计算机程序，当所述计算机程序被处理器执行时，实现如权利要求1-6任一项所述的一种基于深度学习的油井井底流压软测量方法。
说明书desc
技术领域本发明属于信息技术领域，具体涉及一种基于深度学习的油井井底流压软测量方法。背景技术井底流压是油井生产时测得的井底压力。井底流压是油井的一项关键生产指标，直接决定油井的生产能力，也是进行油井动态分析的基础。井底流压影响油田生产能力和生产方案调整。油井井底流压的准确测量对分析地层供液能力、提高油井产量、制定合理工作制度、实现油田节能降耗、提高油田采收率具有重要意义。目前，对油井井底流压的测量主要采用压力计实测法、密度迭代法、经验公式法、液面折算法等测量方法。压力计实测法需要关井测量，无法实现井底流压的实时监测，同时严重影响油田正常生产。其他测量方法由于计算精度问题难以满足油田现场实际需求。同时由于油田内油井数量多、分布范围广、生产条件恶劣，导致上述方法测量工作量巨大，效率极其低下，从而无法及时准确掌握油井的工作状况，难以满足油田生产开发过程的精细化管理需求。因此针对油井井底流压这一油气生产过程中的重要参数，通过软测量技术解决油井井底流压实时准确测量的问题，是解决在线测试仪价格昂贵、不易维护的有效方法，也是建设数字油田、智能油田、智慧油田的必然选择。近年来，随着软测量技术的快速发展，相关研究人员提出了多种方法实现油井井底流压的间接测量。利用统计学理论对大量的油井生产数据进行分析，通过辅助变量的选择、数据预处理与特征选取、井底流压软测量模型的建立和校正三步实现油井井底流压的预测。通过一些简单易测的辅助变量，以较小的成本和较低的代价预测井底流压，为油井进一步的生产过程优化和控制创造了条件。但是受地层能量波动和油井工况影响，现有油井井底流压软测量方法适用性不强、稳定性较差、准确度不高。发明内容针对上述现有方法存在的不足，本发明提供一种基于深度学习的油井井底流压软测量方法。本方法操作简单，经济成本低，易于工程实现，同时综合考虑了动静态生产大数据对油井井底流压的影响，利用深度学习方法分析了长期历史数据之间的依赖关系，进一步提高了软测量模型的预测精度，适合在油田大面积推广应用。本发明为实现上述目的所采用的技术方案是：一种基于深度学习的油井井底流压软测量方法，包括以下步骤：1)基于油田中的井网，构建井网地质模型，根据动静态油气生产数据进行数值模拟；2)根据所选择的井网和数值模拟结果，选择多个储层参数作为油井聚类参数，使用Agglomerative层次聚类算法对其进行聚类分析，得到多个聚类结果；3)根据采油工程原理，在步骤2)得到的聚类结果中，针对各个油井，选择多个参数作为工况聚类参数，并使用Agglomerative层次聚类算法对油井进行工况聚类分析，得到多个不同的工况聚类结果；4)在步骤3)中的每个聚类内，基于井底流压预测参数和井底流压实测参数，采用深度双向长短期记忆神经网络BiLSTM构建并训练油井井底流压预测模型，使用训练好的预测模型对油井井底流压进行预测。所述步骤1)包括以下步骤：1.1)在油田中选择目标区块，并根据区块静态数据，建立目标区块的初步地质模型；1.2)在目标区块中选择井网，针对所选井网，进行油藏精细描述，建立最终的井网地质模型，并根据动静态油气生产数据进行油藏数值模拟。所述步骤2)包括以下步骤：2.1)根据所选择的井网和数值模拟结果，选择多个地质参数，构建油井聚类数据集X，X＝{X1,X2,…,Xs,…,XS}，其中，Xs表示第s个样本点，分别表示K种不同的油井聚类参数，S表示样本个数；2.2)对于油井聚类数据集X，将每个样本作为一个簇，计算距离矩阵D；2.3)遍历距离矩阵D，找到其中的最小距离，将拥有最小距离的两个簇合并为一个新的簇，并根据簇距离度量方法更新距离矩阵D，即删除所述两个簇对应的行和列，并把新簇的距离向量插入距离矩阵D中；2.4)重复过程步骤2.3)，直至最终只剩下一个簇，终止迭代，输出最终聚类结果{WG1,WG2,…WGn,…,WGN}，其中，WGn代表第n个样本聚类结果,N表示聚类数。所述距离矩阵D采用欧式距离进行计算，即其中，Dij为样本点Xi和Xj之间的距离，为第i个样本的第k个聚类参数，/＞为第j个样本的第k个聚类参数，K为样本个数。所述步骤3)包括以下步骤：3.1)根据采油工程原理，在步骤2)得到的聚类结果中，针对各个油井，选择多个油井参数，构建井底流压预测数据集Y，Y＝{Y1,Y2,…,Ym,…,YM}，其中，Ym表示第m个样本点，分别表示n种不同的油井参数，M表示样本个数；3.2)根据步骤2.2)～步骤2.4)，对油井参数进行工况聚类分析，得到Z个不同的工况聚类结果{WC1,WC2,…WCz,…,WCZ}，其中，WCz代表第z个样本聚类结果。所述步骤4)包括以下步骤：4.1)将井底流压预测数据集Y＝{Y1,Y2,…,Ym,…,YM}和实测井底流压数据L＝{L1,L2,…,Lm,…,LM}进行归一化处理，得到初始样本集G，G＝{,,…,,…,}，其中，Y′m表示第m个样本归一化后的结果，L′M表示第m个实测井底流压参数归一化后的结果；4.2)对深度双向长短期记忆神经网络BiLSTM预测模型参数进行初始化，并将初始样本集G分为训练集和测试集；4.3)通过训练集数据训练预测模型，判断训练计数值是否达到设定的训练次数，如果达到训练次数，进行步骤4.4)，如果没有达到训练次数，判断预测误差是否达到训练目标设定的误差要求，如果达到训练目标设定的误差要求，进行步骤4.4)，否则增加模型训练次数或重新定义训练目标；4.4)使用训练好的预测模型对油井井底流压进行预测，并对油藏数值模拟过程参数进行更新。一种基于深度学习的油井井底流压软测量系统，包括以下步骤：井网地质模型构建模块，用于基于油田中的井网，构建井网地质模型，根据动静态油气生产数据进行数值模拟；油井聚类模块，用于根据所选择的井网和数值模拟结果，选择多个储层参数作为油井聚类参数，使用Agglomerative层次聚类算法对其进行聚类分析，得到多个聚类结果；油井工况聚类模块，用于根据采油工程原理，在聚类结果中，针对各个油井，选择多个参数作为工况聚类参数，并使用Agglomerative层次聚类算法对油井进行工况聚类分析，得到多个不同的工况聚类结果；井底流压预测模块，用于在每个聚类内，基于井底流压预测参数和井底流压实测参数，采用深度双向长短期记忆神经网络BiLSTM构建并训练油井井底流压预测模型，使用训练好的预测模型对油井井底流压进行预测。一种基于深度学习的油井井底流压软测量系统，包括存储器和处理器；所述存储器，用于存储计算机程序；所述处理器，用于当执行所述计算机程序时，实现所述的一种基于深度学习的油井井底流压软测量方法。一种计算机可读存储介质，所述存储介质上存储有计算机程序，当所述计算机程序被处理器执行时，实现所述的一种基于深度学习的油井井底流压软测量方法。本发明具有以下有益效果及优点：本发明提供的一种基于深度学习的油井井底流压软测量方法，本方法充分利用油田生产大数据，通过动静态数据相结合的方式，首先对各个区块、不同井网的油井进行聚类分析，并针对每个油井聚类结果中的油井工况再次进行聚类分析，从而最大限度地减小地层能量波动、油井工况变化对井底流压预测引起的误差，提高模型预测的准确度和稳定性。在根据深度双向长短期记忆神经网络BiLSTM进行油井井底流压预测时，利用数值模拟得到的井底温度结果，结合井口生产大数据，进一步提高了油井井底流压软测量模型的精度。本方法仅需要井底流压预测参数和井底流压历史数据，操作简单，易于工程实现，经济成本低，适合油田大面积推广应用。附图说明图1为本发明实施例提供的基于深度学习的油井井底流压软测量方法流程图；图2为本发明实施例提供的基于深度学习的油井井底流压预测结果图。具体实施方式下面结合附图及实施例对本发明做进一步的详细说明。如图1所示，本实施例的方法如下所述。本发明提供了一种基于深度学习的油井井底流压软测量方法，包括如下步骤：步骤1：区块选择与区块建模。在油田中选择目标区块，并根据区块静态数据，利用油藏建模软件建立目标区块的地质模型。步骤2：井网选择与数值模拟。在目标区块中选择井网，针对所选井网，进行精细油藏描述，建立高精度的井网地质模型，并根据动静态油气生产数据进行油藏数值模拟。步骤3：聚类参数选择。根据所选择的井网和数值模拟结果，选择孔隙度、渗透率、含油饱和度、含水饱和度、含水率、井底温度参数作为油井聚类参数：X＝{X1,X2,…,Xs,…,XS}，其中Xs表示第s个样本，x1表示孔隙度，x2表示渗透率，x3表示含油饱和度，x4表示含水饱和度，x5表示含水率，x6表示井底温度，S表示样本个数。本发明中孔隙度、渗透率、含油饱和度、含水饱和度由油田静态数据库获得，含水率由井口采出液取样测得，井底温度通过油藏数值模拟获得。步骤4：油井聚类分析。基于油井聚类参数，采用Agglomerative层次聚类算法对油井进行聚类分析，得到N个不同的聚类结果{WG1,WG2,…WGn,…,WGN}，其中WGn代表第n个聚类结果。具体步骤为：步骤4.1：对于聚类参数样本集合X＝{X1,X2,…,Xs,…,XS}，将每个样本作为一个簇，计算距离矩阵D，其中元素Dij为样本点Xi和Xj之间的距离。样本点间距离采用欧式距离进行计算，计算公式为：步骤4.2：遍历距离矩阵D，找到其中的最小距离，并由此得到拥有最小距离的两个簇的编号，将这两个簇合并为一个新的簇，并根据簇距离度量方法更新距离矩阵D，即删除这两个簇对应的行和列，并把新簇计算得到的距离向量插入距离矩阵D中。步骤4.3：重复过程步骤4.2，直至最终只剩下一个簇，终止迭代。步骤4.4：输出最终聚类结果{WG1,WG2,…WGn,…,WGN}。步骤5：预测参数选择。根据采油工程原理，在步骤4得到的油井聚类结果中，针对各个油井，选择油井的井底温度、油嘴开度、日产气量、日产油量、日产水量作为井底流压预测参数：Y＝{Y1,Y2,…,Ym,…,YM}，其中Ym表示第m个样本，x6表示井底温度，x7表示油嘴开度，x8表示日产气量，x9表示日产油量，x10表示日产水量，M表示样本个数。本实施例中，共选取了741组数据。步骤6：工况聚类分析。基于井底流压预测参数Y，采用Agglomerative层次聚类算法对油井进行工况聚类分析，得到Z个不同的工况聚类结果{WC1,WC2,…WCz,…,WCZ}，其中WCz代表第z个工况聚类结果，具体方法参考步骤4。步骤7：井底流压预测。根据工况聚类结果，在每个聚类内，基于井底流压预测参数Y＝{Y1,Y2,…,Ym,…,YM}和实测井底流压数据L＝{L1,L2,…,Lm,…,LM}，采用深度双向长短期记忆神经网络BiLSTM建立油井井底流压预测模型。具体步骤为：步骤7.1：将井底流压预测参数Y＝{Y1,Y2,…,Ym,…,YM}和实测油井井底流压数据L＝{L1,L2,…,Lm,…,LM}进行归一化处理，得到初始样本集G＝{,,…,,…,}，其中Y′m表示第m个井底流压预测样本归一化后的结果，L′M表示第m个实测井底流压样本归一化后的结果。归一化公式为：其中x为待处理的数据，即井底流压预测数据或实测井底流压数据，所述井底流压预测参数包括井底温度、油嘴开度、日产气量、日产油量、日产水量，xmin为待处理数据最小值，xmax为待处理数据最大值。步骤7.2：对深度双向长短期记忆神经网络BiLSTM预测模型参数进行初始化，并将初始样本集G的前80％设置为训练集，用于训练深度双向长短期记忆神经网络BiLSTM，后20％设置为测试集，用于模型测试。本实施例中训练集中包含592组数据，测试集中包含149组数据。步骤7.3：将训练集数据输入到初始化后的深度双向长短期记忆神经网络BiLSTM预测模型中，训练深度双向长短期记忆神经网络BiLSTM进行学习，挖掘和记忆油井井底流压的整体特征，判断训练计数值是否达到设定的训练次数，如果达到训练次数，进行步骤7.4，如果没有达到训练次数，判断预测误差是否达到训练目标设定的误差要求，如果达到训练目标设定的误差要求，进行步骤7.4，否则增加模型训练次数或重新定义训练目标。步骤7.4：给出井底流压预测结果，并对油藏数值模拟过程参数进行更新，提高油藏数值模拟精度。针对油井井底流压实测值L和预测试使用均方根误差RMSE、平均绝对百分比误差MAPE、均方相对误差RSE进行误差分析。计算公式如下所示：其中T为测试集样本个数，Lt为第t个井底流压实测值，为第t个井底流压预测值，/＞为测试集样本平均值。基于深度学习的油井井底流压预测结果如图2所示。为了更好地评估本发明所建立的基于深度双向长短期记忆神经网络BiLSTM的井底流压软测量模型的预测效果，与循环神经网络RNN、GRU和Transformer算法进行比较，结果如表1所示。由表1可知，本发明所建立的基于深度双向长短期记忆神经网络BiLSTM的井底流压预测模型优于其他模型。综上所述，本发明采用深度学习方法，充分利用油田生产大数据，通过动静态数据相结合的方式，对井底流压数据进行预测。通过油井聚类和工况聚类方式减小地层能量波动、油井工况变化对井底流压预测引起的误差，提高模型预测的准确度和稳定性。通过深度双向长短期记忆神经网络BiLSTM进行井底流压预测，有效克服了传统方法误差大、效率低、实时性差等缺点。本方法仅需要井底流压预测参数和井底流压历史数据，操作简单，易于工程实现，经济成本低。若将本发明应用于油田实际生产过程中，可以很好地解决现在井底流压测量所面临的问题，更好地指导油田油井的运行方式，对提高油田采收率具有重要的实际意义。
