标题title
一种基于GIS平台的矿井掘进工程空间预警方法和装置
摘要abst
本发明提供一种基于GIS平台的矿井掘进工程空间预警方法和装置，涉及矿井掘进工程管理技术领域，该方法基于矿井掘进生产数据和巷道的空间位置坐标，通过生产进尺数据计算出巷道最新推进位置以及巷道自动延伸，基于地理坐标构建巷道掘进过程当中遇到的地质构造、巷道贯通、小煤柱临空硐室、过空巷等主要致灾因素形成预测预警模型，通过定位巷道最新掘进位置，自动计算掘进位置周边致灾因素位置、动态计算掘进头与风险因素间的空间距离，对比空间距离预警模型设置的分级预警阈值判断预警状态和预警级别，该预警方法可为巷道安全生产、应急指挥提供有效支持，降低事故发生的概率。
权利要求书clms
1.一种基于GIS平台的矿井掘进工程空间预警方法，其特征在于，所述矿井掘进工程空间预警方法包括以下步骤：步骤1：根据矿井的历史地质资料，在GIS平台上标注隐蔽致灾因素对应的位置，并设置所述隐蔽致灾因素所关联的巷道名称，所述隐蔽致灾因素包括多个类型；步骤2：按照不同类型的隐蔽致灾因素对其进行预警分类，根据不同的预警分类设置不同的预警距离，并基于GIS技术与掘进生产数据相融合建立巷道掘进过程中的预测预警管理模型，其中所述预警距离依据矿山实际情况进行动态配置；步骤3：基于导线点数据对巷道进尺数据进行校准，以对巷道生产进尺进行修正，提高所述预测预警管理模型的预警精确程度；步骤4：基于矿井GIS图形标注巷道中心线位置，根据巷道生产进尺数据自动进行延伸，得到巷道进尺自动延伸数据；步骤5：根据所述巷道进尺自动延伸数据，自动计算掘进头与所述隐蔽致灾因素的距离，并结合所述预测预警管理模型和所述距离，产生预警信息；步骤6：通过GIS空间可视化技术展示相关巷道在掘进生产过程中前方的预警信息，并通过大数据展示技术将所述预警信息展示到目标终端，同时将所述预警信息通过移动端推送到目标负责人。2.根据权利要求1所述的矿井掘进工程空间预警方法，其特征在于，基于矿井GIS图形标注巷道中心线位置，根据生产进尺数据自动进行延伸，得到巷道进尺自动延伸数据，包括：连接矿端生产数据库，从所述数据库中查询巷道不同时间范围的生产进尺数据，该生产数据包含巷道历史生产数据并将每个时间段内的生产数据进行累加；基于所述矿井GIS图形标注所述巷道中心线位置，并获取到巷道中心坐标，并根据所述巷道中心坐标所在坐标系，转为大地坐标系，所述大地坐标系为集合数组；根据所述巷道中心坐标，算出每一段距离差值的角度an，上式中，Δx，Δy分别表示两个坐标点之间x轴坐标的差值、y轴坐标的差值；根据所述生产进尺数据，从巷道中心线起始点开始计算巷道每一段时期进尺的延伸长度，并计算得到延长点坐标；根据巷道宽度和三角函数公式，对所述巷道中心线起始点和所述延长点各自的坐标进行投影计算，得到投影四个坐标点，即得到所述巷道进尺自动延伸数据。3.根据权利要求2所述的矿井掘进工程空间预警方法，其特征在于，根据所述生产进尺数据，从巷道中心线起点开始计算巷道每一段时期进尺的延伸长度，并计算得到延长点坐标，包括：从巷道中心两个相邻点开始计算，根据坐标差值判断所在象限，并计算延长点坐标，设i＝1，pi和pi+1所形成的线段为di，若li＜＝di，则延长点在该线段范围内部，否则对应这部分差值不在该线段内，向后移动一个点进行计算i＝i+1，计算方式如下：若Δxi＞＝0且Δyi＞＝0，xk＝xi+li*cos，yk＝yi+lo*sin；若Δxi＞＝0且Δyi＜0，xk＝xi+li*cos，yk＝yi+*sin；若Δxi-1＜0且Δyi-1＞＝0，xk＝xi+*cos，yk＝yi+li*sin；若Δxi＜0且Δyi＜0，xk＝xi+*cos，yk＝yi+*sin；上述公式中，Δxi，Δyi分别表示pi与pi+1之间x轴坐标的差值、y轴坐标的差值，li表示巷道进尺的距离。4.根据权利要求3所述的矿井掘进工程空间预警方法，其特征在于，根据巷道宽度和三角函数公式，对所述巷道中心线起始点和所述延长点各自的坐标进行投影计算，得到投影四个坐标点，包括：根据起始点pi、巷道宽度w以及三角函数公式计算出对应所述起始点的两个投影点pb，pc坐标如下：所述延伸点pa根据所述起始点同样方式获取对应所述延伸点的两个投影点坐标pd，pe。5.根据权利要求1所述的矿井掘进工程空间预警方法，其特征在于，所述巷道生产进尺数据对应的巷道推进度配置有自动标注颜色功能，该功能实现的方法包括：根据不同时间进度，设定不同时间进度对应的颜色集合：Ci{，，......}；通过GIS前端引擎绘制出巷道的进度图，设置不同时间进度用不同颜色矩形色块表示。6.根据权利要求1所述的矿井掘进工程空间预警方法，其特征在于，基于GIS技术与掘进生产数据相融合建立巷道掘进过程中的预测预警管理模型，包括：基于所述GIS技术中的GIS空间关系和所述掘进生产数据，对巷道掘进过程遇到的隐蔽致灾因素建立所述预测预警模型的指标分类，并结合矿井掘进业务流程，得到所述预测预警模型的预警预测类型及其预警规则。7.根据权利要求1所述的矿井掘进工程空间预警方法，其特征在于，根据所述巷道进尺自动延伸数据，自动计算掘进头与所述隐蔽致灾因素的距离，包括：将各类隐蔽致灾因素的二维空间坐标，投影到所述巷道中心线上；根据巷道最新的掘进位置，计算在投影距离范围内，是否达到报警范围；若达到所述预警范围进行超前预警，提示预计x米到达T构造。8.根据权利要求7所述的矿井掘进工程空间预警方法，其特征在于，根据巷道最新的掘进位置，计算在投影距离范围内，是否达到报警范围，包括：将巷道最新的掘进位置点pk，和上一个巷道中心线段点pm连接一条直线；根据pk、pm，运用两点式公式如下：/＝/求所述直线的直线方程为：x+y+＝0，整理为ax+by+c＝0；所述隐蔽致灾因素的坐标点pf的法向量为：bx-ay+＝0；通过求所述直线和所述法向量对应法线的交点，得到所述隐蔽致灾因素的坐标点在所述直线上的投影点p′f，即：所述隐蔽致灾因素对应的投影点有多个点，或者单一点；若所述隐蔽致灾因素对应的投影点有多给点，则通过不同投影点的距离进行对比，确定最大距离的点位范围：pmax与pmin，若所述最新的掘进位置到达该点位范围进行预警；若所述隐蔽致灾因素对应的投影点为单一点，则所述最新的掘进位置到达所述隐蔽致灾因素对应的投影点进行预警。9.根据权利要求1所述的矿井掘进工程空间预警方法，其特征在于，基于导线点数据对巷道进尺数据进行校准，以对巷道进尺进行修正，提高所述预测预警管理模型的预警精确程度，包括：通过系统录入所述导线点数据，所述导线点数据包括：导线点时间、里程、导前距离；根据巷道各个导线点的时间ti，计算导线点距离Si，结合导前距离Sdq，修正该段时间的进尺数据，计算公式如下：Lt＝Si+Sdq上式中，Lt表示两个导线点时间差值的巷道实际里程；查询两个导线点日期时间范围：ti，查询该段时间的进尺：Li{，，....}；根据导线点里程Lt，计算导线点历程和该段时间范围巷道历程的差值通过该差值D除以进尺集合数量n算出均值a＝D/n；重新计算集合：Li{，，....}，作为该巷道该段时间范围的修正进尺。10.一种基于GIS平台的矿井掘进工程空间预警装置，其特征在于，所述矿井掘进工程空间预警装置包括：标注位置关联名称模块，用于根据矿井的历史地质资料，在GIS平台上标注隐蔽致灾因素对应的位置，并设置所述隐蔽致灾因素所关联的巷道名称，所述隐蔽致灾因素包括多个类型；分类构建模块，用于按照不同类型的隐蔽致灾因素对其进行预警分类，根据不同的预警分类设置不同的预警距离，并基于GIS技术与掘进生产数据相融合建立巷道掘进过程中的预测预警管理模型，其中所述预警距离依据矿山实际情况进行动态配置；巷道进尺校准模块，用于基于导线点数据对巷道进尺数据进行校准，以对巷道生产进尺进行修正，提高所述预测预警管理模型的预警精确程度；巷道自动延伸计算模块，用于基于矿井GIS图形标注巷道中心线位置，根据巷道生产进尺数据自动进行延伸，得到巷道进尺自动延伸数据；空间预警距离计算模块，用于根据所述巷道进尺自动延伸数据，自动计算掘进头与所述隐蔽致灾因素的距离，并结合所述预测预警管理模型和所述距离，产生预警信息；展示模块，用于通过GIS空间可视化技术展示相关巷道在掘进生产过程中前方的预警信息，并通过大数据展示技术将所述预警信息展示到目标终端，同时将所述预警信息通过移动端推送到目标负责人。
说明书desc
技术领域本发明涉及矿井掘进工程管理技术领域，特别是一种基于GIS平台的矿井掘进工程空间预警方法和矿井掘进工程空间预警装置。背景技术矿井掘进工程是煤矿建设的基础部分，也是采掘衔接重要环节，是煤矿生产的重中之重。目前国内巷道施工人员技术水平有待提高，对巷道施工进度把控不严格，影响矿井生产，基本上以手工上图为主，现有业务生产数据和GIS数据形成数据孤岛，无法和GIS进行融合展示，不能精确计算巷道推进位置，不能准确计算巷道在掘进过程遇到的各类地质构造等距离，无法形成基于掘进工程的预测预警模型。发明内容鉴于上述问题，本发明提出了一种基于GIS平台的矿井掘进工程空间预警方法和矿井掘进工程空间预警装置。本发明实施例提供了一种基于GIS平台的矿井掘进工程空间预警方法，所述矿井掘进工程空间预警方法包括以下步骤：步骤1：根据矿井的历史地质资料，在GIS平台上标注隐蔽致灾因素对应的位置，并设置所述隐蔽致灾因素所关联的巷道名称，所述隐蔽致灾因素包括多个类型；步骤2：按照不同类型的隐蔽致灾因素对其进行预警分类，根据不同的预警分类设置不同的预警距离，并基于GIS技术与掘进生产数据相融合建立巷道掘进过程中的预测预警管理模型，其中所述预警距离依据矿山实际情况进行动态配置；步骤3：基于导线点数据对巷道进尺数据进行校准，以对巷道生产进尺进行修正，提高所述预测预警管理模型的预警精确程度；步骤4：基于矿井GIS图形标注巷道中心线位置，根据巷道生产进尺数据自动进行延伸，得到巷道进尺自动延伸数据；步骤5：根据所述巷道进尺自动延伸数据，自动计算掘进头与所述隐蔽致灾因素的距离，并结合所述预测预警管理模型和所述距离，产生预警信息；步骤6：通过GIS空间可视化技术展示相关巷道在掘进生产过程中前方的预警信息，并通过大数据展示技术将所述预警信息展示到目标终端，同时将所述预警信息通过移动端推送到目标负责人。可选地，基于矿井GIS图形标注巷道中心线位置，根据生产进尺数据自动进行延伸，得到巷道进尺自动延伸数据，包括：连接矿端生产数据库，从所述数据库中查询巷道不同时间范围的生产进尺数据，该生产数据包含巷道历史生产数据并将每个时间段内的生产数据进行累加；基于所述矿井GIS图形标注所述巷道中心线位置，并获取到巷道中心坐标，并根据所述巷道中心坐标所在坐标系，转为大地坐标系，所述大地坐标系为集合数组；根据所述巷道中心坐标，算出每一段距离差值的角度an，上式中，Δx，Δy分别表示两个坐标点之间x轴坐标的差值、y轴坐标的差值；根据所述生产进尺数据，从巷道中心线起始点开始计算巷道每一段时期进尺的延伸长度，并计算得到延长点坐标；根据巷道宽度和三角函数公式，对所述巷道中心线起始点和所述延长点各自的坐标进行投影计算，得到投影四个坐标点，即得到所述巷道进尺自动延伸数据。可选地，根据所述生产进尺数据，从巷道中心线起点开始计算巷道每一段时期进尺的延伸长度，并计算得到延长点坐标，包括：从巷道中心两个相邻点开始计算，根据坐标差值判断所在象限，并计算延长点坐标，设i＝1，pi和pi+1所形成的线段为di，若li＜＝di，则延长点在该线段范围内部，否则对应这部分差值不在该线段内，向后移动一个点进行计算i＝i+1，计算方式如下：若Δxi＞＝0且Δyi＞＝0，xk＝xi+li*cos，yk＝yi+li*sin；若Δxi＞＝0且Δyi＜0，xk＝xi+li*cos，yk＝yi+*sin；若Δxi-1＜0且Δyi-1＞＝0，xk＝xi+*cos，yk＝yi+li*sin；若Δxi＜0且Δyi＜0，xk＝xi+*cos，yk＝yi+*sin；上述公式中，Δxi，Δyi分别表示pi与pi+1之间x轴坐标的差值、y轴坐标的差值，li表示巷道进尺的距离。可选地，根据巷道宽度和三角函数公式，对所述巷道中心线起始点和所述延长点各自的坐标进行投影计算，得到投影四个坐标点，包括：根据起始点pi、巷道宽度w以及三角函数公式计算出对应所述起始点的两个投影点pb，pc坐标如下：所述延伸点pa根据所述起始点同样方式获取对应所述延伸点的两个投影点坐标pd，pe。可选地，所述巷道生产进尺数据对应的巷道推进度配置有自动标注颜色功能，该功能实现的方法包括：根据不同时间进度，设定不同时间进度对应的颜色集合：Ci{，，......}；通过GIS前端引擎绘制出巷道的进度图，设置不同时间进度用不同颜色矩形色块表示。可选地，基于GIS技术与掘进生产数据相融合建立巷道掘进过程中的预测预警管理模型，包括：基于所述GIS技术中的GIS空间关系和所述掘进生产数据，对巷道掘进过程遇到的隐蔽致灾因素建立所述预测预警模型的指标分类，并结合矿井掘进业务流程，得到所述预测预警模型的预警预测类型及其预警规则。可选地，根据所述巷道进尺自动延伸数据，自动计算掘进头与所述隐蔽致灾因素的距离，包括：将各类隐蔽致灾因素的二维空间坐标，投影到所述巷道中心线上；根据巷道最新的掘进位置，计算在投影距离范围内，是否达到报警范围；若达到所述预警范围进行超前预警，提示预计x米到达T构造。可选地，根据巷道最新的掘进位置，计算在投影距离范围内，是否达到报警范围，包括：将巷道最新的掘进位置点pk，和上一个巷道中心线段点pm连接一条直线；根据pk、pm，运用两点式公式如下：/＝/求所述直线的直线方程为：x+y+＝0，整理为ax+by+c＝0；所述隐蔽致灾因素的坐标点pf的法向量为：bx-ay+＝0；通过求所述直线和所述法向量对应法线的交点，得到所述隐蔽致灾因素的坐标点在所述直线上的投影点p′f，即：所述隐蔽致灾因素对应的投影点有多个点，或者单一点；若所述隐蔽致灾因素对应的投影点有多给点，则通过不同投影点的距离进行对比，确定最大距离的点位范围：pmax与pmin，若所述最新的掘进位置到达该点位范围进行预警；若所述隐蔽致灾因素对应的投影点为单一点，则所述最新的掘进位置到达所述隐蔽致灾因素对应的投影点进行预警。可选地，基于导线点数据对巷道进尺数据进行校准，以对巷道进尺进行修正，提高所述预测预警管理模型的预警精确程度，包括：通过系统录入所述导线点数据，所述导线点数据包括：导线点时间、里程、导前距离；根据巷道各个导线点的时间ti，计算导线点距离Si，结合导前距离Sdq，修正该段时间的进尺数据，计算公式如下：Lt＝Si+Sdq上式中，Lt表示两个导线点时间差值的巷道实际里程；查询两个导线点日期时间范围：ti，查询该段时间的进尺：Li{，，....}；根据导线点里程Lt，计算导线点历程和该段时间范围巷道历程的差值通过该差值D除以进尺集合数量n算出均值a＝D/n；重新计算集合：Li{，，....}，作为该巷道该段时间范围的修正进尺。本发明实施例提供了一种基于GIS平台的矿井掘进工程空间预警装置，所述矿井掘进工程空间预警装置包括：标注位置关联名称模块，用于根据矿井的历史地质资料，在GIS平台上标注隐蔽致灾因素对应的位置，并设置所述隐蔽致灾因素所关联的巷道名称，所述隐蔽致灾因素包括多个类型；分类构建模块，用于按照不同类型的隐蔽致灾因素对其进行预警分类，根据不同的预警分类设置不同的预警距离，并基于GIS技术与掘进生产数据相融合建立巷道掘进过程中的预测预警管理模型，其中所述预警距离依据矿山实际情况进行动态配置；巷道进尺校准模块，用于基于导线点数据对巷道进尺数据进行校准，以对巷道生产进尺进行修正，提高所述预测预警管理模型的预警精确程度；巷道自动延伸计算模块，用于基于矿井GIS图形标注巷道中心线位置，根据巷道生产进尺数据自动进行延伸，得到巷道进尺自动延伸数据；空间预警距离计算模块，用于根据所述巷道进尺自动延伸数据，自动计算掘进头与所述隐蔽致灾因素的距离，并结合所述预测预警管理模型和所述距离，产生预警信息；展示模块，用于通过GIS空间可视化技术展示相关巷道在掘进生产过程中前方的预警信息，并通过大数据展示技术将所述预警信息展示到目标终端，同时将所述预警信息通过移动端推送到目标负责人。本发明提供的基于GIS平台的矿井掘进工程空间预警方法，首先根据矿井的历史地质资料，在GIS平台上标注隐蔽致灾因素对应的位置，并设置隐蔽致灾因素所关联的巷道名称；接着按照不同类型的隐蔽致灾因素对其进行预警分类，根据不同的预警分类设置不同的预警距离，并基于GIS技术与掘进生产数据相融合建立巷道掘进过程中的预测预警管理模型。之后基于导线点数据对巷道进尺数据进行校准，以对巷道生产进尺进行修正，提高预测预警管理模型的预警精确程度；再基于矿井GIS图形标注巷道中心线位置，根据巷道生产进尺数据自动进行延伸，得到巷道进尺自动延伸数据。根据巷道进尺自动延伸数据，自动计算掘进头与隐蔽致灾因素的距离，并结合预测预警管理模型和所述距离，产生预警信息；最后通过GIS空间可视化技术展示相关巷道在掘进生产过程中前方的预警信息，并通过大数据展示技术将预警信息展示到目标终端，同时将预警信息通过移动端推送到目标负责人。本发明无需以手工上图为主，将业务生产数据和GIS数据进行融合展示，精确计算巷道推进位置，准确计算巷道在掘进过程遇到的各类地质构造等距离，形成基于掘进工程的预测预警模型。实现提前超前预警，为巷道安全生产提供充分保障，提前准备预防措施，大幅度降低了巷道生产事故发生的概率。可为巷道安全生产、应急指挥提供有效支持，降低事故发生的概率。附图说明通过阅读下文优选实施方式的详细描述，各种其他的优点和益处对于本领域普通技术人员将变得清楚明了。附图仅用于示出优选实施方式的目的，而并不认为是对本发明的限制。而且在整个附图中，用相同的参考符号表示相同的部件。在附图中：图1是本发明实施例的一种基于GIS平台的矿井掘进工程空间预警方法的流程图；图2是本发明实施例中预警方法概述流程图；图3是本发明实施例的基于GIS平台的矿井掘进工程空间预警装置的框图。具体实施方式为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。应当理解，此处所描述的具体实施例仅用以解释本发明，仅仅是本发明一部分实施例，而不是全部的实施例，并不用于限定本发明。参照图1，示出了本发明实施例的一种基于GIS平台的矿井掘进工程空间预警方法的流程图，该矿井掘进工程空间预警方法包括：步骤101：根据矿井的历史地质资料，在GIS平台上标注隐蔽致灾因素对应的位置，并设置隐蔽致灾因素所关联的巷道名称，隐蔽致灾因素包括多个类型。首先根据矿井的历史地质资料，在GIS平台上标注隐蔽致灾因素对应的位置，所谓隐蔽致灾因素可以包括：地质构造、巷道贯通、小煤柱临空硐室、过空巷、采空区、积水区、有掘必探、超长距离供风、超长距离供电、采掘交锋等等，在GIS平台上标注这些隐蔽致灾因素的位置，同时设置隐蔽致灾因素所关联的巷道名称。由上述内容可知，隐蔽致灾因素包括多个类型。步骤102：按照不同类型的隐蔽致灾因素对其进行预警分类，根据不同的预警分类设置不同的预警距离，并基于GIS技术与掘进生产数据相融合建立巷道掘进过程中的预测预警管理模型，其中预警距离依据矿山实际情况进行动态配置。由于隐蔽致灾因素包括多个类型，因此需要按照不同类型的隐蔽致灾因素对所有隐蔽致灾因素进行预警分类，根据不同的预警分类设置不同的预警距离，其中预警距离可以依据矿山实际情况进行动态配置。同时基于GIS技术与掘进生产数据相融合，建立出巷道掘进过程中的预测预警管理模型。可以基于GIS技术中的GIS空间关系和掘进生产数据，对巷道掘进过程遇到的隐蔽致灾因素建立预测预警模型的指标分类，并结合矿井掘进业务流程，得到预测预警模型的预警预测类型及其预警规则。预警预测分类表可以反映出每个类型以及对应的预警距离，例如下表所示：上表为示例性的示出10个隐蔽致灾因素对应的预警预测分类，并不表示本发明所提矿井掘进工程空间预警方法仅能对这10个隐蔽致灾因素进行预警预测。步骤103：基于导线点数据对巷道进尺数据进行校准，以对巷道生产进尺进行修正，提高预测预警管理模型的预警精确程度。为了提高预测预警管理模型的预警精确程度，需要基于导线点数据对巷道进尺数据进行校准，以对巷道生产进尺进行修正。一种较优的修正方法为：通过系统录入导线点数据，该导线点数据包括：导线点时间、里程、导前距离；之后根据巷道各个导线点的时间ti，计算导线点距离Si，结合导前距离Sdq，修正该段时间的进尺数据，计算公式如下：Lt＝Si+Sdq上式中，Lt表示两个导线点时间差值的巷道实际里程。查询两个导线点日期时间范围：ti，查询该段时间的进尺：Li{，，....}。根据导线点里程Lt，计算导线点历程和该段时间范围巷道历程的差值通过该差值D除以进尺集合数量n算出均值a＝D/n；最后重新计算集合：Li{，，....}，将该集合作为该巷道该段时间范围的修正进尺。步骤104：基于矿井GIS图形标注巷道中心线位置，根据巷道生产进尺数据自动进行延伸，得到巷道进尺自动延伸数据。还需要得到巷道进尺自动延伸数据，该延伸数据是基于矿井GIS图形标注巷道中心线位置，根据巷道生产进尺数据自动进行延伸得到的。在一种可能的实施例中，具体得到巷道进尺自动延伸数据的方法包括：1)、首先连接矿端生产数据库，从数据库中查询巷道不同时间范围的生产进尺数据，该生产数据包含巷道历史生产数据并将每个时间段内的生产数据进行累加。2)、基于矿井GIS图形标注巷道中心线位置，并获取到巷道中心坐标，并根据巷道中心坐标所在坐标系，转为大地坐标系，该大地坐标系为集合数组。3)、根据获取到的巷道中心坐标，算出每一段距离差值的角度an，上式中，Δx，Δy分别表示两个坐标点之间x轴坐标的差值、y轴坐标的差值。4)、根据已有的生产进尺数据，从巷道中心线起始点开始计算巷道每一段时期进尺的延伸长度，并计算得到延长点坐标。具体计算延长点坐标的方法为：从巷道中心两个相邻点开始计算，根据坐标差值判断所在象限，并计算延长点坐标，设i＝1，pi和pi+1所形成的线段为di，若li＜＝di，则延长点在该线段范围内部，否则对应这部分差值不在该线段内，向后移动一个点进行计算i＝i+1，计算方式如下：若Δxi＞＝0且Δyi＞＝0，xk＝xi+li*cos，yk＝yi+li*sin；若Δxi＞＝0且Δyi＜0，xk＝xi+li*cos，yk＝yi+*sin；若Δxi-1＜0且Δyi-1＞＝0，xk＝xi+*cos，yk＝yi+li*sin；若Δxi＜0且Δyi＜0，xk＝xi+*cos，yk＝yi+*sin；上述公式中，Δxi，Δyi分别表示pi与pi+1之间x轴坐标的差值、y轴坐标的差值，li表示巷道进尺的距离。5)、根据巷道宽度和三角函数公式，对巷道中心线起始点和延长点各自的坐标进行投影计算，得到投影四个坐标点，即得到巷道进尺自动延伸数据。前面计算得到了延长点坐标，再根据巷道宽度和三角函数公式，对巷道中心线起始点和延长点各自的坐标进行投影计算，得到投影四个坐标点，即巷道中心线起始点计算得到两个投影坐标点，延长点计算得到两个投影坐标点。这四个投影坐标点表征了巷道进尺自动延伸数据。以起始点为例：根据起始点pi、巷道宽度w以及三角函数公式计算出对应起始点的两个投影点pb，pc坐标如下：延伸点pa可以按照上述得到起始点的两个投影坐标点相同的方式，获取对应延伸点的两个投影点坐标pd，pe。此外，巷道生产进尺数据对应的巷道推进度，还可以配置有自动标注颜色功能，该功能实现的方法包括：根据不同时间进度，设定不同时间进度对应的颜色集合：Ci{，，......}；通过GIS前端引擎绘制出巷道的进度图，设置不同时间进度用不同颜色矩形色块表示。步骤105：根据巷道进尺自动延伸数据，自动计算掘进头与隐蔽致灾因素的距离，并结合预测预警管理模型和距离，产生预警信息。得到巷道进尺自动延伸数据后，即可根据巷道进尺自动延伸数据，自动计算出掘进头与隐蔽致灾因素的距离，也即得到当前掘进头所在位置与隐蔽致灾因素所在位置之间的距离。再结合预测预警管理模型和计算得到的距离，产生预警信息。由于提前已经根据实际地质数据，在GIS图上标注各类隐蔽致灾因素的位置，并设置好所关联的巷道名称。在此基础上，一种较优的计算距离的方式为：先将各类隐蔽致灾因素的二维空间坐标，投影到巷道中心线上；之后根据巷道最新的掘进位置，也即掘进头所在位置，计算在投影距离范围内，是否达到报警范围。具体的：先将巷道最新的掘进位置点pk，和上一个巷道中心线段点pm连接一条直线；再根据pk、pm，运用两点式公式如下：/＝/求连接得到直线的直线方程为：x+y+＝0，整理为ax+by+c＝0。隐蔽致灾因素的坐标点pf的法向量为：bx-ay+＝0；通过求直线和法向量对应法线的交点，得到隐蔽致灾因素的坐标点在直线上的投影点p′f，即：在实际的计算中，隐蔽致灾因素对应的投影点可能有多个点，也可能仅为单一点；若隐蔽致灾因素对应的投影点有多给点，则通过不同投影点的距离进行对比，确定最大距离的点位范围：pmax与pmin，若最新的掘进位置到达该点位范围则进行预警。若隐蔽致灾因素对应的投影点为单一点，则最新的掘进位置到达隐蔽致灾因素对应的投影点则进行预警。一般情况下，若没有达到报警范围，则无需预警；若达到预警范围，则进行超前预警，提示预计x米到达T构造。例如：提示预计50米到达进出采空区，提示预计20米到达积水区等等。一般情况下，预警的隐蔽致灾因素在巷道前方，即隐蔽致灾因素所在位置的坐标和巷道掘进位置的坐标形成的夹角为锐角。隐蔽致灾因素中很多类型致灾因素，例如：采空区、积水区等，其对应坐标会形成规则或者不规则多边形，构成多边形的投影点是否已经在有点位在巷道的正前方，来决定是否预警。这类的预警还可以提示进入到该区域多少米，即将多少米出，例如：即将30米进入到采空区，即将10米出采空区等。步骤106：通过GIS空间可视化技术展示相关巷道在掘进生产过程中前方的预警信息，并通过大数据展示技术将预警信息展示到目标终端，同时将预警信息通过移动端推送到目标负责人。通过上述步骤101～步骤105即可实现对隐蔽致灾因素的预警预测。若出现预警信息，则可以通过GIS空间可视化技术，展示相关巷道在掘进生产过程中前方的预警信息，并通过大数据展示技术，将预警信息展示到目标终端，同时将预警信息通过移动端推送到目标负责人。上述过程可以用图2所示的预警方法概述流程图进行概述，基于GIS平台的矿井掘进工程空间预警方法中会用到GIS空间坐标数据、进尺自动延伸算法、导线点基础数据、预测预警模型体系、空间距离预警算法。先从生产数据库中获取矿井的历史地质资料，GIS空间数据库用于支撑GIS平台的各项功能。在GIS平台上的GIS地图中标注地质构造等隐蔽致灾因素，设定不同分类的预警距离。基于巷道进尺推进度自动计算当前掘进位置，根据空间距离预警算法计算得到掘进头与隐蔽致灾因素的距离，判断是否达到预警条件，若达到则GIS空间预警展示。本发明实施例中，基于上述矿井掘进工程空间预警方法，还提出一种基于GIS平台的矿井掘进工程空间预警装置，参照图3所示，所述矿井掘进工程空间预警装置包括：标注位置关联名称模块310，用于根据矿井的历史地质资料，在GIS平台上标注隐蔽致灾因素对应的位置，并设置所述隐蔽致灾因素所关联的巷道名称，所述隐蔽致灾因素包括多个类型；分类构建模块320，用于按照不同类型的隐蔽致灾因素对其进行预警分类，根据不同的预警分类设置不同的预警距离，并基于GIS技术与掘进生产数据相融合建立巷道掘进过程中的预测预警管理模型，其中所述预警距离依据矿山实际情况进行动态配置；巷道进尺校准模块330，用于基于导线点数据对巷道进尺数据进行校准，以对巷道生产进尺进行修正，提高所述预测预警管理模型的预警精确程度；巷道自动延伸计算模块340，用于基于矿井GIS图形标注巷道中心线位置，根据巷道生产进尺数据自动进行延伸，得到巷道进尺自动延伸数据；空间预警距离计算模块350，用于根据所述巷道进尺自动延伸数据，自动计算掘进头与所述隐蔽致灾因素的距离，并结合所述预测预警管理模型和所述距离，产生预警信息；展示模块360，用于通过GIS空间可视化技术展示相关巷道在掘进生产过程中前方的预警信息，并通过大数据展示技术将所述预警信息展示到目标终端，同时将所述预警信息通过移动端推送到目标负责人。上述6个模块，标注位置关联名称模块310用于实现前述步骤101描述的方法，分类构建模块320用于实现前述步骤102描述的方法，巷道进尺校准模块330用于实现前述步骤103描述的方法，巷道自动延伸计算模块340用于实现前述步骤104描述的方法，空间预警距离计算模块350用于实现前述步骤105描述的方法，展示模块360用于实现前述步骤106描述的方法。前面已经详细解释和说明，不再赘述。综上所述，本发明无需以手工上图为主，将业务生产数据和GIS数据进行融合展示，精确计算巷道推进位置，准确计算巷道在掘进过程遇到的各类地质构造等距离，形成基于掘进工程的预测预警模型。实现提前超前预警，为巷道安全生产提供充分保障，提前准备预防措施，大幅度降低了巷道生产事故发生的概率。可为巷道安全生产、应急指挥提供有效支持，降低事故发生的概率。尽管已描述了本发明实施例的优选实施例，但本领域内的技术人员一旦得知了基本创造性概念，则可对这些实施例做出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本发明实施例范围的所有变更和修改。最后，还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者终端设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者终端设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者终端设备中还存在另外的相同要素。上面结合附图对本发明的实施例进行了描述，但是本发明并不局限于上述的具体实施方式，上述的具体实施方式仅仅是示意性的，而不是限制性的，本领域的普通技术人员在本发明的启示下，在不脱离本发明宗旨和权利要求所保护的范围情况下，还可做出很多形式，这些均属于本发明的保护之内。
