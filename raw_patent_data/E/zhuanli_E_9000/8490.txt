标题title
一种钻井工况智能标定方法和系统
摘要abst
本发明公开了一种钻井工况智能标定方法和系统，涉及石油天然气钻探领域。该方法包括：通过钻井日志对数据进行自动标定，利用机器学习模型对标定的数据进行第一次修正，通过专家利用图形化工具对钻井数据进行第二次修正，再通过机器学习模型利用修正的数据进行更新增加预测精度，通过本方案对钻井数据进行自动工况标定，提高工况标定的效率与准确率，快速地标定钻井工况，从而可以精确识别历史数据的工况以处分析历史数据，还可以准确、快速地实时识别钻井工况，从而为优化钻井、复杂预防打下坚实基础。
权利要求书clms
1.一种钻井工况智能标定方法，其特征在于，包括：通过标定工况标签的历史工况数据对用于判断钻井工况的智能标定模型进行第一次修正；根据预设标定结果对经第一次修正后的所述智能标定模型进行第二次修正；通过第二次修正后的所述智能标定模型对实时钻井工况数据进行自动标定。2.根据权利要求1所述的一种钻井工况智能标定方法，其特征在于，还包括：对历史工况数据进行初步工况标定，将标定工况标签的历史工况数据存入数据库。3.根据权利要求2所述的一种钻井工况智能标定方法，其特征在于，还包括：基于钻井参数构建用于判断钻井工况的智能标定模型。4.根据权利要求1-3任一项所述的一种钻井工况智能标定方法，其特征在于，还包括：获取钻井参数和钻井工况之间的关联规则，根据所述关联规则获得钻井工况类别的关键特征；将所述关键特征按时间序列进行图形化显示；按照时间段对包含所述关键特征的钻井数据进行工况标定，获得所述预设标定结果。5.根据权利要求3所述的一种钻井工况智能标定方法，其特征在于，所述基于钻井参数构建判断钻井工况的智能标定模型具体包括：根据工况参数的取值范围直接判定钻井工况；或，根据工况参数的组合特征进行判定钻井工况，完成构建智能标定模型。6.一种钻井工况智能标定系统，其特征在于，包括：第一修正模块、第二修正模块和自动标定模块；所述第一修正模块用于通过标定工况标签的历史工况数据对用于判断钻井工况的智能标定模型进行第一次修正；所述第二修正模块用于根据预设标定结果对经第一次修正后的所述智能标定模型进行第二次修正；所述自动标定模块用于通过第二次修正后的所述智能标定模型对实时钻井工况数据进行自动标定。7.根据权利要求6所述的一种钻井工况智能标定系统，其特征在于，还包括：初步标定模块，用于对历史工况数据进行初步工况标定，将标定工况标签的历史工况数据存入数据库。8.根据权利要求7所述的一种钻井工况智能标定系统，其特征在于，还包括：模型构建模块，用于基于钻井参数构建用于判断钻井工况的智能标定模型。9.根据权利要求6-8任一项所述的一种钻井工况智能标定系统，其特征在于，还包括：标定结果获取模块，用于获取钻井参数和钻井工况之间的关联规则，根据所述关联规则获得钻井工况类别的关键特征；将所述关键特征按时间序列进行图形化显示；按照时间段对包含所述关键特征的钻井数据进行工况标定，获得所述预设标定结果。10.根据权利要求8所述的一种钻井工况智能标定系统，其特征在于，所述模型构建模块具体用于根据工况参数的取值范围直接判定钻井工况；或，根据工况参数的组合特征进行判定钻井工况，完成构建智能标定模型。
说明书desc
技术领域本发明涉及石油天然气钻探领域，尤其涉及一种钻井工况智能标定方法和系统。背景技术随着油气勘探开发逐渐向深部、复杂地层进军发展，钻井过程中面临的风险越来越大。如果事故恶化之前能够及时预警，为井控措施争取时间，排除威胁，从而保障钻井安全。而它的前提在于，每条数据的具体工况要尽可能地描述准确。在以往的工作中，注明工况主要是人工利用经验知识，通过观察数据特征乃至一段时间内数据图像的曲线变化来手工标定，这样不仅工作量大，费时费力，效率低下，而且也可能造成标定偏差。发明内容本发明所要解决的技术问题是针对现有技术的不足，提供一种钻井工况智能标定方法和系统。本发明解决上述技术问题的技术方案如下：一种钻井工况智能标定方法，包括：通过标定工况标签的历史工况数据对用于判断钻井工况的智能标定模型进行第一次修正；根据预设标定结果对经第一次修正后的所述智能标定模型进行第二次修正；通过第二次修正后的所述智能标定模型对实时钻井工况数据进行自动标定。本发明的有益效果是：本方案通过标定工况标签的历史工况数据对智能标定模型进行第一次修正，根据预设标定结果对经第一次修正后的所述智能标定模型进行第二次修正，通过第二次修正后的所述智能标定模型对实时钻井工况数据进行自动标定，替代手工标定，可以精确识别历史数据的钻井工况，同时还可以处理实时数据，钻井现场操作人员运用该方法可以准确及时了解钻井状态，有利于钻井相关作业安排以及复杂工况的发现。通过本方案对钻井数据进行自动工况标定，提高工况标定的效率与准确率，快速地标定钻井工况，从而可以精确识别历史数据的工况以处分析历史数据，还可以准确、快速地实时识别钻井工况，从而为优化钻井、复杂预防打下坚实基础。进一步地，还包括：对历史工况数据进行初步工况标定，将标定工况标签的历史工况数据存入数据库。采用上述进一步方案的有益效果是：本方案将大量历史数据与人工记录钻井工况快速准确匹配，将匹配后的历史数据和工况标签一并存入数据库系统，为后续自动标定提供基础训练集，在对钻井数据进行工况标定时提高工况标定的效率与准确率。进一步地，还包括：基于钻井参数构建判断钻井工况的智能标定模型。采用上述进一步方案的有益效果是：本方案通过采用机器学习方法准确、快速地标定钻井工况，从而可以精确识别历史数据的工况以处分析历史数据，还可以准确、快速地实时识别钻井工况，从而为优化钻井、复杂预防打下坚实基础。进一步地，还包括：获取钻井参数和钻井工况之间的关联规则，根据所述关联规则获得钻井工况类别的关键特征；将所述关键特征按时间序列进行图形化显示；按照时间段对包含所述关键特征的钻井数据进行工况标定，获得所述预设标定结果。采用上述进一步方案的有益效果是：本方案基于物理模型与人工智能来创建机器学习的模型，结合基于专家校正的结果对模型进行修正，实现准确、快速校正工况标定。通过对钻井工况使用图形化形式结合机器学习方法模型进行智能化标定，可以精确识别历史数据的工况，还可以应用于实时数据以获得实时钻井工况，有利于对钻井相关作业安排与调度以及对复杂工况的处理。进一步地，所述基于钻井参数构建判断钻井工况的智能标定模型具体包括：根据工况参数的取值范围直接判定钻井工况；或，根据工况参数的组合特征进行判定钻井工况，完成构建智能标定模型。采用上述进一步方案的有益效果是：通过不同工况参数的组合方式，实现判断不同类型的钻井工况，能够快速地实时识别钻井工况。本发明解决上述技术问题的另一种技术方案如下：一种钻井工况智能标定系统，包括：第一修正模块、第二修正模块和自动标定模块；所述第一修正模块用于通过标定工况标签的历史工况数据对用于判断钻井工况的智能标定模型进行第一次修正；所述第二修正模块用于根据预设标定结果对经第一次修正后的所述智能标定模型进行第二次修正；所述自动标定模块用于通过第二次修正后的所述智能标定模型对实时钻井工况数据进行自动标定。本发明的有益效果是：本方案通过标定工况标签的历史工况数据对智能标定模型进行第一次修正，根据预设标定结果对经第一次修正后的所述智能标定模型进行第二次修正，通过第二次修正后的智能标定模型对实时钻井工况数据进行自动标定，替代手工标定，可以精确识别历史数据的钻井工况，同时还可以处理实时数据，钻井现场操作人员运用该方法可以准确及时了解钻井状态，有利于钻井相关作业安排以及复杂工况的发现。在对钻井数据进行工况标定时提高工况标定的效率与准确率，从而实现采用机器学习方法准确、快速地标定钻井工况，从而可以精确识别历史数据的工况以处分析历史数据，还可以准确、快速地实时识别钻井工况，从而为优化钻井、复杂预防打下坚实基础。进一步地，还包括：初步标定模块，用于对历史工况数据进行初步工况标定，将标定工况标签的历史工况数据存入数据库。采用上述进一步方案的有益效果是：本方案将大量历史数据与人工记录钻井工况快速准确匹配，将匹配后的历史数据和工况标签一并存入数据库系统，为后续自动标定提供基础训练集，在对钻井数据进行工况标定时提高工况标定的效率与准确率。进一步地，还包括：模型构建模块，用于基于钻井参数构建判断钻井工况的智能标定模型。采用上述进一步方案的有益效果是：本方案通过采用机器学习方法准确、快速地标定钻井工况，从而可以精确识别历史数据的工况以处分析历史数据，还可以准确、快速地实时识别钻井工况，从而为优化钻井、复杂预防打下坚实基础。进一步地，还包括：标定结果获取模块，用于获取钻井参数和钻井工况之间的关联规则，根据所述关联规则获得钻井工况类别的关键特征；将所述关键特征按时间序列进行图形化显示；按照时间段对包含所述关键特征的钻井数据进行工况标定，获得所述预设标定结果。采用上述进一步方案的有益效果是：本方案基于物理模型与人工智能来创建机器学习的模型，结合基于专家校正的结果对模型进行修正，实现准确、快速校正工况标定。通过对钻井工况使用图形化形式结合机器学习方法模型进行智能化标定，可以精确识别历史数据的工况，还可以应用于实时数据以获得实时钻井工况，有利于对钻井相关作业安排与调度以及对复杂工况的处理。进一步地，所述模型构建模块具体用于根据工况参数的取值范围直接判定钻井工况；或，根据工况参数的组合特征进行判定钻井工况，完成构建智能标定模型。采用上述进一步方案的有益效果是：通过不同工况参数的组合方式，实现判断不同类型的钻井工况，能够快速地实时识别钻井工况。本发明附加的方面的优点将在下面的描述中部分给出，部分将从下面的描述中变得明显，或通过本发明实践了解到。附图说明图1为本发明的实施例提供的流程示意图；图2为本发明的实施例提供的结构框架图；图3为本发明的其他实施例提供的钻井工况标定总体技术路线图；图4为本发明的其他实施例提供的工况判断物理模型的示意图；图5为本发明的其他实施例提供的部分钻井工况记录信息图；图6为本发明的其他实施例提供的基于钻井工况记录的初步工况标定设计系统的示意图；图7为本发明的其他实施例提供的图形化的工况标定模块结构示意图；图8为本发明的其他实施例提供的工况特征数据在某一时刻的图形化显示的结果示意图；图9为本发明的其他实施例提供的时间微调操作界面示意图；图10为本发明的其他实施例提供的系统自动确定工况类型的示意图。具体实施方式以下结合附图对本发明的原理和特征进行描述，所举实施例只用于解释本发明，并非用于限定本发明的范围。如图1所示，为本发明实施例提供的一种钻井工况智能标定方法，包括：S1，通过标定工况标签的历史工况数据对用于判断钻井工况的智能标定模型进行第一次修正；根据以下钻井参数判断钻井工况的物理模型后，采用机器学习模型进行学习、训练，得到自动判断工况的机器模型，即智能标定模型，智能标定模型对钻井工况进行自动标定，即为物理模型与人工智能相结合的钻井工况自动标定方法。其中，钻井参数可以包括：井深、钻头深度、入口流量、大钩负荷和大钩高度等参数。根据标定工况标签的历史工况数据对智能标定模型进行训练，获得训练后的智能标定模型，即修正后的智能标定模型。S2，根据预设标定结果对经第一次修正后的智能标定模型进行第二次修正；在某一实施例中，获取钻井参数和钻井工况的关联规则，根据关联规则获得钻井工况类别的关键特征；需要说明的是，工况标签与某些工况特征具有强关联性，即已知某几个特征的特性便可确定工况类别，这些能确定工况类别的特征即为关键特征。将关键特征按时间序列进行图形化显示；按照时间段对包含关键特征的钻井数据进行工况标定，获得预设标定结果，并显示预设标定结果。S3，根据标定结果对经第一次修正后的智能标定模型进行修正。通过第二次修正后的智能标定模型对实时钻井工况数据进行自动标定。在某一实施例中，如图3所示，第一部分为基于人工记录钻井工况记录的初步工况标定，其中如图5所示，为部分钻井工况记录信息。可以包括对多个历史数据文件进行是否有历史钻井工况记录判断，根据工况记录的时间对数据标定，获得初步标定的数据，并存入数据库系统。第二部分为基于物理模型与机器学习模型的工况修正。可以包括：从数据库系统提起数据集，进行数据集预处理，获得机器学习模型，在模型中输入需要获得工况标签的测试数据，输出修正后的工况标签；第三部分为基于图形化的专家校正。可以包括：对工况标签和工况关键特征图像化显示，专家观察图形，校正模型所得工况标签。第四部分为基于专家校正结果的模型修正。可以包括：根据校正结果反馈给模型，模型根据校正工况标签进行模型修正。本方案通过标定工况标签的历史工况数据对智能标定模型进行第一次修正，根据预设标定结果对经第一次修正后的智能标定模型进行第二次修正，通过第二次修正后的智能标定模型对实时钻井工况数据进行自动标定，替代手工标定，可以精确识别历史数据的钻井工况，同时还可以处理实时数据，钻井现场操作人员运用该方法可以准确及时了解钻井状态，有利于钻井相关作业安排以及复杂工况的发现。在对钻井数据进行工况标定时提高工况标定的效率与准确率，从而实现采用机器学习方法准确、快速地标定钻井工况，从而可以精确识别历史数据的工况以处分析历史数据，还可以准确、快速地实时识别钻井工况，从而为优化钻井、复杂预防打下坚实基础。优选地，在上述任意实施例中，还包括：对历史工况数据进行初步工况标定，将标定工况标签的历史工况数据存入数据库。在某一实施例中，基于人工记录钻井工况记录的初步工况标定。首先，由于历史数据文件特别多，将历史数据一次性导入数据库，该过程不仅可以减少为了寻找数据而整理文件的时间，而且统一存储可以方便后续对数据的处理。其次，对于历史数据可按时间通过钻井工况记录匹配进行初步工况标定后，将历史数据和工况标签一并存入数据库系统当中，其中工况标签是比较粗略，且不是必需的。因此，第一部分完成了历史数据的初步工况标定。在某一实施例中，基于钻井工况记录的初步工况标定设计系统可以如图6所示，将已有的钻井数据与较为粗略的钻井工况记录进行初步工况标定并存入数据库系统，若没有手工记录的钻井工况，则本步骤只处理钻井数据。该步骤将对原始工况记录文件中的工况信息进行规范化人工修改。该过程采用图形化界面开发，将已有钻井数据与钻井工况记录读入程序，然后通过钻井工况记录修改后的工况以及时间与历史数据文件中的时间进行匹配，以实现钻井数据的初步标定操作。若钻井数据分别存入多个CSV文件中，不便于对数据的分析与处理，因此将包含初步标定的工况信息的多个历史文件数据利用数据库连接技术存入到数据库中。具体执行步骤如下：一、选择历史文件地址；二、选择工况记录文件地址及页面；三、填写数据库的连接信息；四、选择数据库的关系与表名；五、点击存入数据库按钮。本方案将大量历史数据与人工记录钻井工况快速准确匹配，将匹配后的历史数据和工况标签一并存入数据库系统，为后续自动标定提供基础训练集，在对钻井数据进行工况标定时提高工况标定的效率与准确率。优选地，在上述任意实施例中，还包括：基于钻井参数构建用于判断钻井工况的智能标定模型；在某一实施例中，根据以下钻井参数判断钻井工况的物理模型后，采用机器学习模型进行学习、训练，得到自动判断工况的机器模型，即智能标定模型，智能标定模型对钻井工况进行自动标定，即为物理模型与人工智能相结合的钻井工况自动标定方法。其中，钻井参数可以包括：井深、钻头深度、入口流量、大钩负荷和大钩高度等参数。根据标定工况标签的历史数据对智能标定模型进行预处理。在某一实施例中，预处理过程可以包括：首先将初步标定的工况数据先依据物理模型进行预处理，即利用编写的模块判断钻头深度与井深是否相等，若相等，则判断为钻进工况；若不相等，且具有排量参数，则判断为循环工况；然后根据入口流量、大钩高度、大钩负荷、钻头深度等钻井参数的变化特征组合判断接单根、起钻、下钻等工况，具体判断规则方法见下文。依据初步钻井工况标定的数据作为数据集来训练一个初步的人工智能模型，当要获得一个测试样本的工况标签，将测试样本输入到模型，模型可得出工况标签，为钻进、循环、接单根、起钻、下钻及其他工况中的一种。通过以上操作便完成了对初始数据集进行钻井工况识别的修正。最后将修正结果存入数据库，便于后续操作。本方案通过采用机器学习方法准确、快速地标定钻井工况，从而可以精确识别历史数据的工况以处分析历史数据，还可以准确、快速地实时识别钻井工况，从而为优化钻井、复杂预防打下坚实基础。优选地，在上述任意实施例中，还包括：获取钻井参数和钻井工况之间的关联规则，根据关联规则获得钻井工况类别的关键特征；需要说明的是，工况标签与某些工况特征具有强关联性，即已知某几个特征的特性便可确定工况类别，这些能确定工况类别的特征即为关键特征。将关键特征按时间序列进行图形化显示；按照时间段对包含关键特征的钻井数据进行工况标定，获得预设标定结果，并显示预设标定结果。在某一实施例中，为了检验模型校正结果是否准确，发明人将工况关键属性和工况标签数据按照工况发生的时间顺序图形化的展示给专家，专家可以直观地从图形中获取关键参数变化趋势来确定数据的工况类型从而对模型所得的工况标签进行校正。在某一实施例中，基于图形化的专家校正可以包括：针对钻井现场数据的特征与标签的相关性，选择未标注数据的关键特征图形化提供给相关专家，图形采用横轴时间序列变化，纵轴多个关键特征包括井深、钻头深度、入口流量、大钩负荷、大钩高度的折线图进行清晰的表示。由于关键钻井参数特征较多，图形采用了3个图进行表示，其中两个图为参数特征曲线图，第三个图为工况标定图。专家可以修改关键参数特征的显示刻度或隐藏相关参数特征以突显想要观察的参数特征曲线，并且图形的时间轴可以进行缩放，专家可以观察自定义一段时间内的参数特征连续变化曲线，直观地从图形中获取关键参数变化趋势。该方法包括以下几个步骤：步骤101：获取参数特征与工况的关联规则，得到决定工况的关键特征。步骤102：将关键参数特征按时间序列图形化显示。步骤103：专家根据图形确定工况的起止时间以及工况类型，按照时间段进行工况标定。步骤104：图形化实时显示标定结果。基于专家校正结果，即专家校正的工况标签作为新的数据集，重新采用第二部分中的模型进行训练对模型进行修正，使模型更加精确并得到新的工况标定结果。在某一实施例中，由于在钻井过程中，各种工况的发生，如起钻、下钻、接单根等等，都会伴随着钻井参数的变化，这些参数变化规律可以帮助用户对工况进行判断。所以发明人在所有钻井参数中挑选对工况变化影响显著的属性，包括井深、钻头深度、入口流量、大钩负荷、大钩高度；如图9所示，时间框可自动输入工况进行时间微调操作的示意图。右键图像折线可以将此结点的时间自动选择输入到普通工况的起止时间栏里。通过下拉框，对此时间段进行工况确定，最终点击确定按钮将数据传输至数据库，将这段工况写入该段时间属性中。在某一实施例中，数据获取的方法，可以包括：在页面编辑，采用异步式办法实时更新数据。发明人采用的交互数据是对象列表。每次将3小时的钻井数据以列表的形式传送给前端。前端获取数据后对列表中的对象进行解析，从对象中获取需要的属性，将他们和时间组成“时间数据二元组”。到此，数据获取阶段完成。在某一实施例中，图像显示的方法，包括以下步骤：图像划分为三个图，如图7或如图8所示，由于关键特征数量较多，在一个图中显示较为混乱，可以分为两个图显示为关键钻井参数特征，是时间的折线图，即图7中的前两个折线图。第三个图为工况标定的图像，显示了当前时间下工况的标定情况。三个图的时间轴是一致的，以便于对于图像进行观察，具体实施如下：在数值轴设置中，可以设置多条钻井参数数值轴线。将之前获取的“时间数据二元组”，通过更新二元组的方式，来更新钻井参数显示图。可以在图形上通过点击鼠标左键或右键完成一些特定功能，如在数值轴上左键点击某一个钻井参数，可以在弹窗中为数值轴设置最大值与最小值，从而将某个参数曲线调整显示到合适区域，使参数曲线显示更加有层次、有条理。右键点击参数曲线，可以在弹窗中将此钻井参数数据点对应的“时间”写入到普通、复杂工况的起、止时间输入框中。这四个输入框搭载了日期控件，可以对日期、时间进行直观化的修改、微调。在某一实施例中，写回的方法，可以包括：在确定好普通、复杂工况的起、止时间后，通过点击“提交”按钮，将写入的数据异步传输到后台负责控制数据库写入的方法中，同时将写入的部分工况再传送回前端中，对工况显示的折线图进行更新，方法同上。在工况显示折线图中，分别采用将0-9映射为9种工况。每种工况对应不同的颜色，将工况变化直观地显示到图像中。本方案基于物理模型与人工智能来创建机器学习的模型，结合基于专家校正的结果对模型进行修正，实现准确、快速校正工况标定。通过对钻井工况使用图形化形式结合机器学习方法模型进行智能化标定，可以精确识别历史数据的工况，还可以应用于实时数据以获得实时钻井工况，有利于对钻井相关作业安排与调度以及对复杂工况的处理。优选地，在上述任意实施例中，基于钻井参数构建判断钻井工况的智能标定模型具体包括：根据工况参数的取值范围直接判定钻井工况；或，根据工况参数的组合特征进行判定钻井工况，完成构建智能标定模型。优选的，在某一实施例中，使用物理模型与机器学习模型对初步标定的工况结果进行修正，如图4所示为工况判断物理模型，其中，钻井工况可以包括：钻进、循环、接单根、起钻、下钻及其他工况共6种工况。首先是基于物理模型钻井参数对钻井工况进行判断，对于正常工况的工况特征，在众多钻井参数中挑选能表征工况变化的参数，包括井深、钻头深度、入口流量、大钩负荷、大钩高度共5个参数。首先读取钻井参数后，根据物理模型，对比井深与钻头深度，当钻头深度等于井深或小于某一极小值时，可判断为钻进工况；当钻头深度与井深不相等于或超过某一极小值范围后，即钻头不在井底，且有入口流量，可判断为循环工况。而其他工况判断无法通过工况特征参数的取值范围直接判定，可进一步根据入口流量、大钩高度、大钩负荷、钻头深度等钻井参数的变化特征组合进行判断。在某一实施例中，对接单根、起钻、下钻等常见工况，进行判断规则的方法可以包括：接单根工况分为四个阶段，第一阶段是停泵过程、大钩高度升高同时大钩负荷降低，第二阶段是停泵状态、大钩高度基本不变同时大钩负荷为空载，第三阶段是停泵状态、大钩高度升高同时大钩负荷为空载，第四阶段是开泵过程、大钩高度降低同时大钩负荷为升高；起钻工况分为三个阶段，第一阶段是停泵状态、大钩高度升高同时钻头深度降低，第二阶段是停泵状态、大钩高度基本不变同时钻头深度保持不变，第三阶段是停泵状态、大钩高度降低同时钻头深度保持不变，停泵状态贯穿起钻的全过程；下钻工况分为三个阶段，第一阶段是停泵状态、大钩高度升高同时钻头深度不变，第二阶段是停泵状态、大钩高度基本不变同时钻头深度保持不变，第三阶段是停泵状态、大钩高度降低同时钻头深度增加，停泵状态贯穿下钻的全过程。在某一实施例中，如图4所示，基于物理模型与机器学习模型对工况进行识别过程可以包括：首先读取钻井参数后，根据物理模型，对比井深与钻头深度，当钻头深度等于井深或小于某一极小值时，可判断为钻进工况。当钻头深度与井深不相等于或超过某一极小值范围后，即钻头不在井底，且有入口流量，可判断为循环工况。而其他工况判断无法通过工况特征参数的取值范围直接判定，可进一步根据入口流量、大钩高度、大钩负荷、钻头深度等钻井参数的变化特征组合进行判断。下面结合图2，针对接单根、起钻、下钻等常见工况，进行判断规则的阐述。首先阐明一些概念，如停泵过程是指钻井泵由正常运行状态变为停止状态，入口流量由一定数值降低为0；停泵状态是指持续一段时间内，钻井泵都处于停止状态，该状态下入口流量为0；开泵过程是指钻井泵由停止状态开始转为运行的过程，该过程中入口流量油0开始增大到一定值的过程。大钩负荷为空载表示大钩未提钻柱，重量基本上就是大钩和游车的载荷，是大钩载荷的最小值。接单根工况分为四个阶段，第一阶段是停泵过程、大钩高度升高同时大钩负荷降低，第二阶段是停泵状态、大钩高度基本不变同时大钩负荷为空载，第三阶段是停泵状态、大钩高度升高同时大钩负荷为空载，第四阶段是开泵过程、大钩高度降低同时大钩负荷为升高。起钻工况分为三个阶段，第一阶段是停泵状态、大钩高度升高同时钻头深度降低，第二阶段是停泵状态、大钩高度基本不变同时钻头深度保持不变，第三阶段是停泵状态、大钩高度降低同时钻头深度保持不变，停泵状态贯穿起钻的全过程。下钻工况分为三个阶段，第一阶段是停泵状态、大钩高度升高同时钻头深度不变，第二阶段是停泵状态、大钩高度基本不变同时钻头深度保持不变，第三阶段是停泵状态、大钩高度降低同时钻头深度增加，停泵状态贯穿下钻的全过程。未归在上述钻井工况的，暂时归为其他工况。根据上述钻井参数规律确定钻进、循环、接单根、起钻、下钻等工况及其他工况，与钻井参数一并存入数据库。通过不同工况参数的组合方式，实现判断不同类型的钻井工况，能够快速地实时识别钻井工况。在某一实施例中，建立上述根据钻井参数判断钻井工况的物理模型后，采用机器学习模型进行学习、训练、测试与验证。利用从数据库中读取存入的工况标定数据作为实验数据集，包括每个样本所有钻井参数以及初步标定的工况标签。然后采用了分类准确率高的Lightgbm模型作为分类器，对数据集进行工况识别的修正，并将修正结果存入数据库。对于该模型采用历史数据实验集进行测验，验证模型的准确度。在实验中，工况识别平均准确率能够达到99％。从原始数据中抽取工况切换时的前后各100条样本，得到共8400个样本。训练集和测试集随机划分，测试集占30％，实验结果如下。从数据库中读取上一步骤存入的工况标定数据作为实验数据集，包括每个样本所有钻井参数以及初步标定的工况标签。然后采用了分类准确率高的Lightgbm模型作为分类器，对数据集进行工况识别的修正，并将修正结果存入数据库。对于该模型采用历史数据实验集进行测验，工况识别平均准确率能够达到99％。从原始数据中抽取工况切换时的前后各100条样本，得到共8400个样本。训练集和测试集随机划分，测试集占30％，实验结果如表1所示：经过上述步骤，建立根据钻井参数判断钻井工况的物理模型基础上，采用分类器进行自动识别钻井工况的训练学习、测试验证的机器学习模型，形成物理模型与人工智能相结合的钻井工况自动标定方法。在某一实施例中，如图2所示，一种钻井工况智能标定系统，包括：第一修正模块1101、第二修正模块1102和自动标定模块1103；第一修正模块1101用于通过标定工况标签的历史工况数据对用于判断钻井工况的智能标定模型进行第一次修正；第二修正模块1102用于根据预设标定结果对经第一次修正后的智能标定模型进行第二次修正；自动标定模块1103用于通过第二次修正后的智能标定模型对实时钻井工况数据进行自动标定。在某一实施例中，系统自动确定工况类型的示意图如图10所示。本方案通过标定工况标签的历史工况数据对智能标定模型进行第一次修正，根据预设标定结果对经第一次修正后的智能标定模型进行第二次修正，通过第二次修正后的智能标定模型对实时钻井工况数据进行自动标定，替代手工标定，可以精确识别历史数据的钻井工况，同时还可以处理实时数据，钻井现场操作人员运用该方法可以准确及时了解钻井状态，有利于钻井相关作业安排以及复杂工况的发现。在对钻井数据进行工况标定时提高工况标定的效率与准确率，从而实现采用机器学习方法准确、快速地标定钻井工况，从而可以精确识别历史数据的工况以处分析历史数据，还可以准确、快速地实时识别钻井工况，从而为优化钻井、复杂预防打下坚实基础。优选地，在上述任意实施例中，还包括：初步标定模块，用于对历史工况数据进行初步工况标定，将标定工况标签的历史工况数据存入数据库。本方案将大量历史数据与人工记录钻井工况快速准确匹配，将匹配后的历史数据和工况标签一并存入数据库系统，为后续自动标定提供基础训练集，在对钻井数据进行工况标定时提高工况标定的效率与准确率。优选地，在上述任意实施例中，还包括：模型构建模块，用于基于钻井参数构建用于判断钻井工况的智能标定模型；根据标定工况标签的历史数据对智能标定模型进行预处理。本方案通过采用机器学习方法准确、快速地标定钻井工况，从而可以精确识别历史数据的工况以处分析历史数据，还可以准确、快速地实时识别钻井工况，从而为优化钻井、复杂预防打下坚实基础。优选地，在上述任意实施例中，还包括：标定结果获取模块，用于获取钻井参数和钻井工况之间的关联规则，根据关联规则获得钻井工况类别的关键特征；将关键特征按时间序列进行图形化显示；按照时间段对包含关键特征的钻井数据进行工况标定，获得预设标定结果，并显示预设标定结果。本方案基于物理模型与人工智能来创建机器学习的模型，结合基于专家校正的结果对模型进行修正，实现准确、快速校正工况标定。通过对钻井工况使用图形化形式结合机器学习方法模型进行智能化标定，可以精确识别历史数据的工况，还可以应用于实时数据以获得实时钻井工况，有利于对钻井相关作业安排与调度以及对复杂工况的处理。优选地，在上述任意实施例中，模型构建模块具体用于根据工况参数的取值范围直接判定钻井工况；或，根据工况参数的组合特征进行判定钻井工况，完成构建智能标定模型。通过不同工况参数的组合方式，实现判断不同类型的钻井工况，能够快速地实时识别钻井工况。可以理解，在一些实施例中，可以包含如上述各实施例中的部分或全部可选实施方式。需要说明的是，上述各实施例是与在先方法实施例对应的产品实施例，对于产品实施例中各可选实施方式的说明可以参考上述各方法实施例中的对应说明，在此不再赘述。读者应理解，在本说明书的描述中，参考术语“一个实施例”、“一些实施例”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不必针对的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任一个或多个实施例或示例中以合适的方式结合。此外，在不相互矛盾的情况下，本领域的技术人员可以将本说明书中描述的不同实施例或示例以及不同实施例或示例的特征进行结合和组合。在本申请所提供的几个实施例中，应该理解到，所揭露的装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本发明实施例方案的目的。另外，在本发明各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以是两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分，或者该技术方案的全部或部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到各种等效的修改或替换，这些修改或替换都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以权利要求的保护范围为准。
