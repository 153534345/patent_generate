标题title
剪切阀泥浆脉冲发生器的误差检测方法及装置
摘要abst
本发明公开了一种剪切阀泥浆脉冲发生器的误差检测方法及装置。其中，方法包括：采集转子阀片的指令位置信号以及实际位置信号；计算实际位置信号与指令位置信号的相位差；利用相位差对实际位置信号进行相位偏移后得到修正实际位置信号；计算修正实际位置信号与指令位置信号的位置差，根据位置差得到剪切阀泥浆脉冲发生器的误差率。本方案能够实现对剪切阀泥浆脉冲发生器的误差率检测，而且修正实际位置信号是对实际位置信号进行相位偏移后得到的，能够避免实际位置信号和指令位置信号的相位延迟对误差率的干扰，提高误差率的检测精度。
权利要求书clms
1.一种剪切阀泥浆脉冲发生器的误差检测方法，其特征在于，包括：采集转子阀片的指令位置信号以及实际位置信号；计算所述实际位置信号与所述指令位置信号的相位差；利用所述相位差对所述实际位置信号进行相位偏移后得到修正实际位置信号；计算所述修正实际位置信号与所述指令位置信号的位置差，根据所述位置差得到所述剪切阀泥浆脉冲发生器的误差率。2.根据权利要求1所述的方法，其特征在于，所述计算所述实际位置信号与所述指令位置信号的相位差包括：对所述实际位置信号和所述指令位置信号进行相关运算，得到相关运算结果；根据所述相关运算结果获得所述实际位置信号与所述指令位置信号的相位差。3.根据权利要求2所述的方法，其特征在于，所述相关运算结果包括多个相关运算值；所述根据所述相关运算结果获得所述实际位置信号与所述指令位置信号的相位差包括：确定所述相关运算结果中的最大相关运算值；根据所述最大相关运算值的序列号，获得所述实际位置信号与所述指令位置信号的相位差。4.根据权利要求1-3中任一项所述的方法，其特征在于，所述计算所述修正实际位置信号与所述指令位置信号的位置差，根据所述位置差得到所述剪切阀泥浆脉冲发生器的误差率包括：针对于任一采样点，从所述修正实际位置信号中获取该采样点的修正实际位置，以及从所述指令位置信号中获取该采样点的指令位置，计算所述修正实际位置与所述指令位置的第一差值；对多个采样点对应的第一差值进行求和得到第一求和结果，根据所述第一求和结果获得所述剪切阀泥浆脉冲发生器的误差率。5.根据权利要求4所述的方法，其特征在于，所述方法还包括：确定采样点对应的阀片位置加权系数；所述根据所述位置差得到所述剪切阀泥浆脉冲发生器的误差率包括：根据所述位置差以及所述阀片位置加权系数，得到所述剪切阀泥浆脉冲发生器的误差率。6.根据权利要求5所述的方法，其特征在于，所述确定采样点对应的阀片位置加权系数包括：采集所述剪切阀泥浆脉冲发生器的阀口处的泥浆压力波信号；利用所述相位差对所述泥浆压力波信号进行相位偏移后得到修正泥浆压力波信号；针对于任一采样点，从所述修正泥浆压力波信号中确定该采样点的泥浆压力波幅值，根据所述泥浆压力波幅值的归一化数值生成该采样点对应的阀片位置加权系数。7.根据权利要求5所述的方法，其特征在于，所述根据所述位置差以及所述阀片位置加权系数，得到所述剪切阀泥浆脉冲发生器的误差率包括：针对于任一采样点，计算该采样点的指令位置与指令位置最小值的第二差值，利用该采样点对应的阀片位置加权系数对所述第二差值进行修正后得到该采样点对应的第三差值；对多个采样点的第三差值进行求和得到第二求和结果；根据所述第一求和结果以及所述第二求和结果，得到所述剪切阀泥浆脉冲发生器的误差率。8.一种剪切阀泥浆脉冲发生器的误差检测装置，其特征在于，包括：采集模块，用于采集转子阀片的指令位置信号以及实际位置信号；相位计算模块，用于计算所述实际位置信号与所述指令位置信号的相位差；相位偏移模块，用于利用所述相位差对所述实际位置信号进行相位偏移后得到修正实际位置信号；误差确定模块，用于计算所述修正实际位置信号与所述指令位置信号的位置差，根据所述位置差得到所述剪切阀泥浆脉冲发生器的误差率。9.一种计算设备，其特征在于，包括：处理器、存储器、通信接口和通信总线，所述处理器、所述存储器和所述通信接口通过所述通信总线完成相互间的通信；所述存储器用于存放至少一个可执行指令，所述可执行指令使所述处理器执行如权利要求1-7中任一项所述的剪切阀泥浆脉冲发生器的误差检测方法对应的操作。10.一种计算机存储介质，其特征在于，所述存储介质中存储有至少一个可执行指令，所述可执行指令使处理器执行如权利要求1-7中任一项所述的剪切阀泥浆脉冲发生器的误差检测方法对应的操作。
说明书desc
技术领域本发明涉及勘探技术领域，具体涉及一种剪切阀泥浆脉冲发生器的误差检测方法及装置。背景技术剪切阀泥浆脉冲发生器是随钻测井中常用的一种泥浆脉冲发生器。在随钻测井过程中，控制信号驱使电动机转动，在电动机带动下剪切阀泥浆脉冲发生器的转子按照相应的轨迹旋转或摆动，剪切阀泥浆脉冲发生器的定转子剪切流经的流体，从而产生泥浆压力波调制信号。泥浆压力波调制信号经钻杆内泥浆传输至地面立管，数据采集系统对地面立管上压力传感器进行压力信号采集，解调系统对压力信号进行解析得到井下工程参数和地层参数。其中，剪切阀泥浆脉冲发生器中转子阀片的实际位置运动轨迹决定了产生的泥浆压力调制波的波形特征，进而影响最终得到的井下工程参数和地层参数。然而，发明人在实施过程中发现，现有技术中存在如下缺陷：剪切阀泥浆脉冲发生器在井下作业时，由于受脉冲器机械结构、变化的水力转矩负载、选用的电机控制算法和控制参数等方面的影响，在一些工况下，剪切阀泥浆脉冲发生器的转子阀片的实际位置运动轨迹会与控制信号产生的理论指令位置轨迹存在一定的偏差，从而影响产生的泥浆压力调制波的波形特征，进而影响地面解调系统对信号的解调，降低井下工程参数和地层参数的检测精度。然而，现有技术中并不存在对剪切阀泥浆脉冲发生器进行误差检测的方案。发明内容鉴于上述问题，提出了本发明以便提供一种克服上述问题或者至少部分地解决上述问题的剪切阀泥浆脉冲发生器的误差检测方法、装置、计算设备及计算机存储介质。根据本发明的一个方面，提供了一种剪切阀泥浆脉冲发生器的误差检测方法，包括：采集转子阀片的指令位置信号以及实际位置信号；计算所述实际位置信号与所述指令位置信号的相位差；利用所述相位差对所述实际位置信号进行相位偏移后得到修正实际位置信号；计算所述修正实际位置信号与所述指令位置信号的位置差，根据所述位置差得到所述剪切阀泥浆脉冲发生器的误差率。在一种可选的实施方式中，所述计算所述实际位置信号与所述指令位置信号的相位差包括：对所述实际位置信号和所述指令位置信号进行相关运算，得到相关运算结果；根据所述相关运算结果获得所述实际位置信号与所述指令位置信号的相位差。在一种可选的实施方式中，所述相关运算结果包括多个相关运算值；所述根据所述相关运算结果获得所述实际位置信号与所述指令位置信号的相位差包括：确定所述相关运算结果中的最大相关运算值；根据所述最大相关运算值的序列号，获得所述实际位置信号与所述指令位置信号的相位差。在一种可选的实施方式中，所述计算所述修正实际位置信号与所述指令位置信号的位置差，根据所述位置差得到所述剪切阀泥浆脉冲发生器的误差率包括：针对于任一采样点，从所述修正实际位置信号中获取该采样点的修正实际位置，以及从所述指令位置信号中获取该采样点的指令位置，计算所述修正实际位置与所述指令位置的第一差值；对多个采样点对应的第一差值进行求和得到第一求和结果，根据所述第一求和结果获得所述剪切阀泥浆脉冲发生器的误差率。在一种可选的实施方式中，所述方法还包括：确定采样点对应的阀片位置加权系数；所述根据所述位置差得到所述剪切阀泥浆脉冲发生器的误差率包括：根据所述位置差以及所述阀片位置加权系数，得到所述剪切阀泥浆脉冲发生器的误差率。在一种可选的实施方式中，所述确定采样点对应的阀片位置加权系数包括：采集所述剪切阀泥浆脉冲发生器的阀口处的泥浆压力波信号；利用所述相位差对所述泥浆压力波信号进行相位偏移后得到修正泥浆压力波信号；针对于任一采样点，从所述修正泥浆压力波信号中确定该采样点的泥浆压力波幅值，根据所述泥浆压力波幅值的归一化数值生成该采样点对应的阀片位置加权系数。在一种可选的实施方式中，所述根据所述位置差以及所述阀片位置加权系数，得到所述剪切阀泥浆脉冲发生器的误差率包括：针对于任一采样点，计算该采样点的指令位置与指令位置最小值的第二差值，利用该采样点对应的阀片位置加权系数对所述第二差值进行修正后得到该采样点对应的第三差值；对多个采样点的第三差值进行求和得到第二求和结果；根据所述第一求和结果以及所述第二求和结果，得到所述剪切阀泥浆脉冲发生器的误差率。根据本发明实施例第二方面，提供了一种剪切阀泥浆脉冲发生器的误差检测装置，包括：采集模块，用于采集转子阀片的指令位置信号以及实际位置信号；相位计算模块，用于计算所述实际位置信号与所述指令位置信号的相位差；相位偏移模块，用于利用所述相位差对所述实际位置信号进行相位偏移后得到修正实际位置信号；误差确定模块，用于计算所述修正实际位置信号与所述指令位置信号的位置差，根据所述位置差得到所述剪切阀泥浆脉冲发生器的误差率。在一种可选的实施方式中，相位计算模块用于：对所述实际位置信号和所述指令位置信号进行相关运算，得到相关运算结果；根据所述相关运算结果获得所述实际位置信号与所述指令位置信号的相位差。在一种可选的实施方式中，所述相关运算结果包括多个相关运算值；相位计算模块用于：确定所述相关运算结果中的最大相关运算值；根据所述最大相关运算值的序列号，获得所述实际位置信号与所述指令位置信号的相位差。在一种可选的实施方式中，误差确定模块用于：针对于任一采样点，从所述修正实际位置信号中获取该采样点的修正实际位置，以及从所述指令位置信号中获取该采样点的指令位置，计算所述修正实际位置与所述指令位置的第一差值；对多个采样点对应的第一差值进行求和得到第一求和结果，根据所述第一求和结果获得所述剪切阀泥浆脉冲发生器的误差率。在一种可选的实施方式中，误差确定模块用于：确定采样点对应的阀片位置加权系数；根据所述位置差以及所述阀片位置加权系数，得到所述剪切阀泥浆脉冲发生器的误差率。在一种可选的实施方式中，采集模块用于：采集所述剪切阀泥浆脉冲发生器的阀口处的泥浆压力波信号；相位偏移模块用于：利用所述相位差对所述泥浆压力波信号进行相位偏移后得到修正泥浆压力波信号；误差确定模块用于：针对于任一采样点，从所述修正泥浆压力波信号中确定该采样点的泥浆压力波幅值，根据所述泥浆压力波幅值的归一化数值生成该采样点对应的阀片位置加权系数。在一种可选的实施方式中，误差确定模块用于：针对于任一采样点，计算该采样点的指令位置与指令位置最小值的第二差值，利用该采样点对应的阀片位置加权系数对所述第二差值进行修正后得到该采样点对应的第三差值；对多个采样点的第三差值进行求和得到第二求和结果；根据第一求和结果以及所述第二求和结果，得到所述剪切阀泥浆脉冲发生器的误差率。根据本发明实施例第三方面，提供了一种计算设备，包括：处理器、存储器、通信接口和通信总线，所述处理器、所述存储器和所述通信接口通过所述通信总线完成相互间的通信；所述存储器用于存放至少一个可执行指令，所述可执行指令使所述处理器执行上述剪切阀泥浆脉冲发生器的误差检测方法对应的操作。根据本发明实施例第四方面，提供了一种计算机存储介质，所述存储介质中存储有至少一个可执行指令，所述可执行指令使处理器执行上述剪切阀泥浆脉冲发生器的误差检测方法对应的操作。本发明实施例提供的剪切阀泥浆脉冲发生器的误差检测方法及装置，通过修正实际位置信号与指令位置信号的位置差得到剪切阀泥浆脉冲发生器的误差率，实现对剪切阀泥浆脉冲发生器的精度检测；而且，修正实际位置信号是对实际位置信号进行相位偏移后得到的，从而能够避免实际位置信号和指令位置信号的相位延迟对误差率的干扰，提高误差率的检测精度。上述说明仅是本发明技术方案的概述，为了能够更清楚了解本发明的技术手段，而可依照说明书的内容予以实施，并且为了让本发明的上述和其它目的、特征和优点能够更明显易懂，以下特举本发明的具体实施方式。附图说明通过阅读下文优选实施方式的详细描述，各种其他的优点和益处对于本领域普通技术人员将变得清楚明了。附图仅用于示出优选实施方式的目的，而并不认为是对本发明的限制。而且在整个附图中，用相同的参考符号表示相同的部件。在附图中：图1示出了本发明实施例提供的一种剪切阀泥浆脉冲发生器的误差检测方法的流程示意图；图2示出了本发明实施例提供的一种转子阀片处于第一位置时的剪切阀泥浆脉冲发生器的示意图；图3示出了本发明实施例提供的一种转子阀片处于第二位置时的剪切阀泥浆脉冲发生器的示意图；图4示出了本发明实施例提供的一种实际位置信号与指令位置信号的示意图；图5示出了本发明实施例提供的一种相关运算值的示意图；图6示出了本发明实施例提供的一种修正实际位置信号与指令位置信号的示意图；图7示出了本发明实施例提供的又一种剪切阀泥浆脉冲发生器的误差检测方法的流程示意图；图8示出了本发明实施例提供的一种压力波幅值与转子阀片位置的关系示意图；图9示出了本发明实施例提供的一种剪切阀泥浆脉冲发生器的误差检测装置的结构示意图；图10示出了本发明实施例提供的一种计算设备的结构示意图。具体实施方式下面将参照附图更详细地描述本发明的示例性实施例。虽然附图中显示了本发明的示例性实施例，然而应当理解，可以以各种形式实现本发明而不应被这里阐述的实施例所限制。相反，提供这些实施例是为了能够更透彻地理解本发明，并且能够将本发明的范围完整的传达给本领域的技术人员。图1示出了本发明实施例提供的一种剪切阀泥浆脉冲发生器的误差检测方法的流程示意图。如图1所示，该方法具体包括如下步骤：步骤S110，采集转子阀片的指令位置信号以及实际位置信号。本发明实施例中所述的转子阀片具体为剪切阀泥浆脉冲发生器中的构件。剪切阀泥浆脉冲发生器的结构如图2及3所示：剪切阀泥浆脉冲发生器主要包含转子阀片R及定子构件S，D为泥浆流动方向，转子阀片R以位置变化范围为剪切泥浆流体工作，从而产生泥浆压力波信号。其中，图2为转子阀片R位置为θmax的剪切阀泥浆脉冲发生器的示意图，图3为转子阀片R位置为θmin的剪切阀泥浆脉冲发生器的示意图。转子阀片在控制电路给定的控制信号下旋转或摆动，从而实现对泥浆流体的剪切。其中，该控制信号包含指令位置信号，指令位置信号包含了各时间点对应的转子阀片的指令位置，该指定位置又可以称为理论位置，是控制电路希望控制转子阀片转动到的位置。则本发明实施例采集转子阀片的指令位置信号。然而，由于多方面因素的影响，转子阀片的实际位置往往与指令位置存在偏差，由此影响剪切阀泥浆脉冲发生器的精度。本发明实施例除了采集转子阀片的指令位置信号之外，还进一步设置有用于检测转子阀片实际位置的位置传感器，该位置传感器可以采集转子阀片的实际位置信号，该实际位置信号中包含了相应时间点对应的转子阀片的实际位置。其中，为了保障误差检测的准确性，本发明实施例中指令位置信号和实际位置信号的采样时段以及采样周期相同，并且该采样时段根据转子阀片的载波频率确定。例如，转子阀片以载波频率fc剪切泥浆流体，则采样时段Ta是的整数倍，采样时段Ta是采样频率Ts的整数倍。从而以采样频率Ts采集采样时段Ta内的指令位置信号以及实际位置信号，该指令位置信号包含了各个采样点的指令位置，实际位置信号中包含了各个采样点的实际位置。步骤S120，计算实际位置信号与指令位置信号的相位差。转子阀片是在控制信号下运动，然而控制算法通常存在一定的延迟，导致转子阀片的实际位置与指令位置存在一定的相位延迟，如图4所示，转子阀片的实际位置会相位滞后于指令位置。由于相同的载波频率下不同周期的载波信号相位延迟的时间相同，所以相位延迟不会影响泥浆压力波的波形调制以及地面系统对泥浆压力波信号的解调。鉴于此，本发明实施例排除因相位延迟对剪切阀泥浆脉冲发生器的误差检测的干扰。在获得指令位置信号以及实际位置信号之后，计算实际位置信号与指令位置信号的相位差，该相位差便是实际位置信号相对于指令位置信号的相位延迟。在一种可选的实施方式中，实际位置信号与指令位置信号的相位差可以通过如下方式获得：对实际位置信号和指令位置信号进行相关运算，得到相关运算结果，根据相关运算结果获得实际位置信号与指令位置信号的相位差。采用该种实施方式，能够准确地确定出实际位置信号与指令位置信号的相位差。进一步可选的，可以采用如下步骤获得实际位置信号与指令位置信号的相位差。对实际位置信号和指令位置信号进行相关运算，得到包含多个相关运算值的相关运算结果。对实际位置信号和指令位置信号进行相关运算后得到的相关运算结果包含多个相关运算值。具体可以通过如下公式1得到实际位置信号和指令位置信号的相关运算值。其中，i为采样点序列号，1≤i≤N，N为采样时段内的采样点总数，j为相关运算值的序列号，j=，θs为第i个采样点的指令位置，θf为第i-j个采样点的实际位置，rsf为第j个相关运算值。由于θf为周期信号，则可以得到如下公式2。将公式2应用于公式1可以得到公式3。结合公式1及公式3可以得到包含多个相关运算值的相关运算结果。确定相关运算结果中的最大相关运算值。从相关运算结果包含的各个相关运算值中确定出最大值，该最大值便是最大相关运算值，最大相关运算值满足如下公式4。根据最大相关运算值的序列号，获得实际位置信号与指令位置信号的相位差。如公式4所示，L为最大相关运算值的序列号，该序列号表示了实际位置信号与指令位置信号的相位延迟序列数量。如图5所示的相关运算值的示意图，最大相关运算值为22672，最大相关运算值的序列号为-1，则相位差为-1。步骤S130，利用相位差对实际位置信号进行相位偏移后得到修正实际位置信号。利用相位差对实际位置信号进行相位偏移后得到的信号为修正实际位置信号。具体地，对实际位置信号θf进行偏移相位差L后得到修正实际位置信号θf。例如，将图4所示实际位置信号进行相位偏移后得到图6所示的修正实际位置信号，修正实际位置信号与指令位置信号已不存在相应的相位延迟。步骤S140，计算修正实际位置信号与指令位置信号的位置差，根据位置差得到剪切阀泥浆脉冲发生器的误差率。修正实际位置信号与指令位置信号的位置差是采样点对应的修正实际位置和指令位置的差异，该位置差能够反映剪切阀泥浆脉冲发生器的实际位置与指令控制位置间的偏差，从而根据该位置差能够准确地得到剪切阀泥浆脉冲发生器的误差率。在一种可选的实施方式中，具体通过如下方式得到该误差率：针对于任一采样点，从修正实际位置信号中获取该采样点的修正实际位置，以及从指令位置信号中获取该采样点的指令位置，计算修正实际位置与指令位置的第一差值，该修正实际位置与指令位置的差值的绝对值便是该采样点对应的第一差值。对修正实际位置信号和指令位置信号中的多个采样点对应的第一差值进行求和得到第一求和结果，根据第一求和结果获得剪切阀泥浆脉冲发生器的误差率。此外，还可以针对于任一采样点，计算该采样点的指令位置与指令位置最小值的第二差值，其中，指令位置最小值是指令位置信号中指令位置的最小值，采样点的指令位置与该指令位置最小值的差值绝对值为该采样点对应的第二差值。对修正实际位置信号和指令位置信号中的多个采样点对应的第二差值进行求和得到第三求和结果。进而根据第一求和结果与第三求和结果得到误差率，例如，根据第一求和结果与第三求和结果的比值得到误差率。进一步可选地，具体通过如下公式5计算误差率。其中，ep为剪切阀泥浆脉冲发生器的误差率，θf为第i个采样点的修正实际位置，θs为第i个采样点的指令位置，|θs-θf| 为第i个采样点对应的第一差值，θmin为指令位置信号的指令位置最小值，|θs-θmin| 为第i个采样点对应的第二差值，分子部分便是第一求和结果，分母部分便是第三求和结果，第一求和结果与第三求和结果的比值便是误差率。此外，由于实际位置信号通常滞后于指令位置信号，从而上述L通常为负值，i-L会存在大于N的情况，在采用上述公式5时，针对于i-L大于N的采样点，需根据上述公式2的周期性特征得到该部分采样点的修正实际位置。为了简化求和过程，提升本方法整体的执行逻辑，本发明实施例进一步可以通过如下公式6得到误差率。其中，m为一个正整数，m可以为-L，也可以为，fc为载波频率，Ts为采样频率，/＞表示一个载波周期内的采样点数量。从而采用公式6不会出现i-L大于N的情况，无需再利用上述公式2得到该部分采样点的修正实际位置。由此可见，本发明实施例提供的剪切阀泥浆脉冲发生器的误差检测方法，通过修正实际位置信号与指令位置信号的位置差得到剪切阀泥浆脉冲发生器的误差率，实现对剪切阀泥浆脉冲发生器的精度检测；而且，修正实际位置信号是对实际位置信号进行相位偏移后得到的，从而能够避免实际位置信号和指令位置信号的相位延迟对误差率的干扰，提高误差率的检测精度。图7示出了本发明实施例提供的又一种剪切阀泥浆脉冲发生器的误差检测方法的流程示意图。如图7所示，该方法具体包括如下步骤：步骤S710，采集转子阀片的指令位置信号以及实际位置信号。步骤S720，计算实际位置信号与指令位置信号的相位差，利用相位差对实际位置信号进行相位偏移后得到修正实际位置信号，计算修正实际位置信号与指令位置信号的位置差。步骤S730，确定采样点对应的阀片位置加权系数。在实际的实施过程中，如图8所示，剪切阀泥浆脉冲发生器的阀口处的归一化后压力波幅值与归一化后转子阀片位置呈非线性关系，从而泥浆压力波幅值与转子阀片位置呈非线性关系，在不同位置处的位置误差对泥浆压力波信号的影响程度不同。鉴于此，本发明实施例在得到位置差的基础上进一步结合采样点的阀片位置加权系数来获得最终的误差率，提升误差率的检测精度。具体地，首先确定采样点对应的阀片位置加权系数，阀片位置加权系数用于反映采样点对应的转子阀片位置对泥浆压力波的影响程度。在具体实施过程中，通过设置于剪切阀泥浆脉冲发生器的阀口处的压力传感器采集剪切阀泥浆脉冲发生器的阀口处的泥浆压力波信号，该采集周期和采集时段与上述实际位置信号和指令位置信号的采集周期和采集时段相同。采集的泥浆压力波信号包含了各个采样点对应的泥浆压力波幅值。进一步地，利用上述计算得到的相位差对采集的泥浆压力波信号进行相位偏移后得到修正泥浆压力波信号。例如，泥浆压力波信号pi相位差偏移相位差L后得到修正泥浆压力波信号p。针对于任一采样点，从修正泥浆压力波信号中确定该采样点的泥浆压力波幅值，根据泥浆压力波幅值的归一化数值生成该采样点对应的阀片位置加权系数。具体地，可以通过如下公式7计算阀片位置加权系数。其中，wi为第i个采样点对应的阀片位置加权系数，p为修正泥浆压力波信号中第i个采样点对应的泥浆压力波幅值，pmin为修正泥浆压力波信号中的泥浆压力波幅值最小值，pmax为修正泥浆压力波信号中的泥浆压力波幅值最大值。步骤S740，根据位置差以及阀片位置加权系数，得到剪切阀泥浆脉冲发生器的误差率。具体地，针对于任一采样点，计算该采样点的指令位置与指令位置最小值的第二差值。其中，指令位置最小值是指令位置信号中指令位置的最小值，采样点的指令位置与该指令位置最小值的差值绝对值为该采样点对应的第二差值。进一步利用该采样点对应的阀片位置加权系数对其对应的第二差值进行修正后得到该采样点对应的第三差值。例如，可以将该采样点的阀片位置加权系数与对应的第二差值的乘积作为该采样点对应的第三差值。对指令位置信号中多个采样点的第三差值进行求和得到第二求和结果，根据第一求和结果以及第二求和结果，得到剪切阀泥浆脉冲发生器的误差率，例如根据第一求和结果和第二求和结果的比值得到误差率。其中，第一求和结果的具体计算过程可参照图1实施例中的描述，在此不作赘述。例如，可以通过如下公式8得到剪切阀泥浆脉冲发生器的误差率。其中，ec为剪切阀泥浆脉冲发生器的误差率，θf为第i个采样点的修正实际位置，θs为第i个采样点的指令位置，|θs-θf| 为第i个采样点对应的第一差值，θmin为指令位置信号的指令位置最小值，wi为第i个采样点对应的阀片位置加权系数，为第i个采样点对应的第三差值，分母部分为第二求和结果，分子部分为第一求和结果。又或者，可以采用如下公式9获得误差率：其中，m为一个正整数，m可以为-L，也可以为，fc为载波频率，Ts为采样频率。由此可见，本发明实施例提供的剪切阀泥浆脉冲发生器的误差检测方法，通过采样点对应的阀片位置加权系数来反映不同转子阀片位置的位置误差对压力波的影响程度，结合修正实际位置信号与指令位置信号的位置差以及该阀片位置加权系数得到最终的剪切阀泥浆脉冲发生器的误差率，进一步提升误差率的确定精度。图9示出了本发明实施例提供的一种剪切阀泥浆脉冲发生器的误差检测装置的结构示意图。如图9所示，该装置包括：采集模块910、相位计算模块920、相位偏移模块930、以及误差确定模块940。采集模块910，用于采集转子阀片的指令位置信号以及实际位置信号；相位计算模块920，用于计算所述实际位置信号与所述指令位置信号的相位差；相位偏移模块930，用于利用所述相位差对所述实际位置信号进行相位偏移后得到修正实际位置信号；误差确定模块940，用于计算所述修正实际位置信号与所述指令位置信号的位置差，根据所述位置差得到所述剪切阀泥浆脉冲发生器的误差率。在一种可选的实施方式中，相位计算模块920用于：对所述实际位置信号和所述指令位置信号进行相关运算，得到相关运算结果；根据所述相关运算结果获得所述实际位置信号与所述指令位置信号的相位差。在一种可选的实施方式中，所述相关运算结果包括多个相关运算值；相位计算模块920用于：确定所述相关运算结果中的最大相关运算值；根据所述最大相关运算值的序列号，获得所述实际位置信号与所述指令位置信号的相位差。在一种可选的实施方式中，误差确定模块940用于：针对于任一采样点，从所述修正实际位置信号中获取该采样点的修正实际位置，以及从所述指令位置信号中获取该采样点的指令位置，计算所述修正实际位置与所述指令位置的第一差值；对多个采样点对应的第一差值进行求和得到第一求和结果，根据所述第一求和结果获得所述剪切阀泥浆脉冲发生器的误差率。在一种可选的实施方式中，误差确定模块940用于：确定采样点对应的阀片位置加权系数；根据所述位置差以及所述阀片位置加权系数，得到所述剪切阀泥浆脉冲发生器的误差率。在一种可选的实施方式中，采集模块910用于：采集所述剪切阀泥浆脉冲发生器的阀口处的泥浆压力波信号；相位偏移模块930用于：利用所述相位差对所述泥浆压力波信号进行相位偏移后得到修正泥浆压力波信号；误差确定模块940用于：针对于任一采样点，从所述修正泥浆压力波信号中确定该采样点的泥浆压力波幅值，根据所述泥浆压力波幅值的归一化数值生成该采样点对应的阀片位置加权系数。在一种可选的实施方式中，误差确定模块940用于：针对于任一采样点，计算该采样点的指令位置与指令位置最小值的第二差值，利用该采样点对应的阀片位置加权系数对所述第二差值进行修正后得到该采样点对应的第三差值；对多个采样点的第三差值进行求和得到第二求和结果；根据所述第一求和结果以及所述第二求和结果，得到所述剪切阀泥浆脉冲发生器的误差率。由此可见，本发明实施例提供的剪切阀泥浆脉冲发生器的误差检测装置，通过修正实际位置信号与指令位置信号的位置差得到剪切阀泥浆脉冲发生器的误差率，实现对剪切阀泥浆脉冲发生器的精度检测；而且，修正实际位置信号是对实际位置信号进行相位偏移后得到的，从而能够避免实际位置信号和指令位置信号的相位延迟对误差率的干扰，提高误差率的检测精度。本发明实施例提供了一种非易失性计算机存储介质，所述计算机存储介质存储有至少一可执行指令，该计算机可执行指令可执行上述任意方法实施例中的剪切阀泥浆脉冲发生器的误差检测方法。图10示出了本发明实施例提供的一种计算设备的结构示意图。本发明具体实施例并不对计算设备的具体实现做限定。如图10所示，该计算设备可以包括：处理器1002、通信接口1004、存储器1006、以及通信总线1008。其中：处理器1002、通信接口1004、以及存储器1006通过通信总线1008完成相互间的通信。通信接口1004，用于与其它设备比如客户端或其它服务器等的网元通信。处理器1002，用于执行程序1010，具体可以执行上述用于剪切阀泥浆脉冲发生器的误差检测方法实施例中的相关步骤。具体地，程序1010可以包括程序代码，该程序代码包括计算机操作指令。处理器1002可能是中央处理器CPU，或者是特定集成电路ASIC，或者是被配置成实施本发明实施例的一个或多个集成电路。计算设备包括的一个或多个处理器，可以是同一类型的处理器，如一个或多个CPU；也可以是不同类型的处理器，如一个或多个CPU以及一个或多个ASIC。存储器1006，用于存放程序1010。存储器1006可能包含高速RAM存储器，也可能还包括非易失性存储器，例如至少一个磁盘存储器。程序1010具体可以用于使得处理器1002执行上述剪切阀泥浆脉冲发生器的误差检测方法中的操作。在此提供的算法或显示不与任何特定计算机、虚拟系统或者其它设备固有相关。各种通用系统也可以与基于在此的示教一起使用。根据上面的描述，构造这类系统所要求的结构是显而易见的。此外，本发明实施例也不针对任何特定编程语言。应当明白，可以利用各种编程语言实现在此描述的本发明的内容，并且上面对特定语言所做的描述是为了披露本发明的最佳实施方式。在此处所提供的说明书中，说明了大量具体细节。然而，能够理解，本发明的实施例可以在没有这些具体细节的情况下实践。在一些实例中，并未详细示出公知的方法、结构和技术，以便不模糊对本说明书的理解。类似地，应当理解，为了精简本发明并帮助理解各个发明方面中的一个或多个，在上面对本发明的示例性实施例的描述中，本发明实施例的各个特征有时被一起分组到单个实施例、图、或者对其的描述中。然而，并不应将该公开的方法解释成反映如下意图：即所要求保护的本发明要求比在每个权利要求中所明确记载的特征更多的特征。更确切地说，如下面的权利要求书所反映的那样，发明方面在于少于前面公开的单个实施例的所有特征。因此，遵循具体实施方式的权利要求书由此明确地并入该具体实施方式，其中每个权利要求本身都作为本发明的单独实施例。本领域那些技术人员可以理解，可以对实施例中的设备中的模块进行自适应性地改变并且把它们设置在与该实施例不同的一个或多个设备中。可以把实施例中的模块或单元或组件组合成一个模块或单元或组件，以及此外可以把它们分成多个子模块或子单元或子组件。除了这样的特征和/或过程或者单元中的至少一些是相互排斥之外，可以采用任何组合对本说明书中公开的所有特征以及如此公开的任何方法或者设备的所有过程或单元进行组合。除非另外明确陈述，本说明书中公开的每个特征可以由提供相同、等同或相似目的的替代特征来代替。此外，本领域的技术人员能够理解，尽管在此的一些实施例包括其它实施例中所包括的某些特征而不是其它特征，但是不同实施例的特征的组合意味着处于本发明的范围之内并且形成不同的实施例。例如，在下面的权利要求书中，所要求保护的实施例的任意之一都可以以任意的组合方式来使用。本发明的各个部件实施例可以以硬件实现，或者以在一个或者多个处理器上运行的软件模块实现，或者以它们的组合实现。本领域的技术人员应当理解，可以在实践中使用微处理器或者数字信号处理器来实现根据本发明实施例的一些或者全部部件的一些或者全部功能。本发明还可以实现为用于执行这里所描述的方法的一部分或者全部的设备或者装置程序。这样的实现本发明的程序可以存储在计算机可读介质上，或者可以具有一个或者多个信号的形式。这样的信号可以从因特网网站上下载得到，或者在载体信号上提供，或者以任何其他形式提供。应该注意的是上述实施例对本发明进行说明而不是对本发明进行限制，并且本领域技术人员在不脱离所附权利要求的范围的情况下可设计出替换实施例。在权利要求中，不应将位于括号之间的任何参考符号构造成对权利要求的限制。单词“包含”不排除存在未列在权利要求中的元件或步骤。位于元件之前的单词“一”或“一个”不排除存在多个这样的元件。本发明可以借助于包括有若干不同元件的硬件以及借助于适当编程的计算机来实现。在列举了若干装置的单元权利要求中，这些装置中的若干个可以是通过同一个硬件项来具体体现。单词第一、第二、以及第三等的使用不表示任何顺序。可将这些单词解释为名称。上述实施例中的步骤，除有特殊说明外，不应理解为对执行顺序的限定。
