标题title
基于深度学习的压裂磁法实时监测中裂缝诊断方法
摘要abst
本发明属于非常规油气藏、二氧化碳埋存、地热开发领域，涉及基于深度学习的压裂磁法实时监测中裂缝诊断方法。本发明通过总结压裂裂缝发育几何形态，提取压裂裂缝基本单元模型；通过颗粒流分析获得顺磁颗粒在压裂裂缝内部的分布，建立压裂裂缝基本单元模型对应的磁化率模型；通过有限元数值模拟获得外磁场作用下空间磁异常数值，建立数据集资料；选取深度学习中的深度残差网络ResNet50模型，用数据集数据实现对网络模型训练和测试，确定网络模型的最佳参数；将压裂裂缝动态监测中的磁异常数据输入通过测试的深度学习网络模型，实现压裂裂缝几何发育形态的预测和诊断。本发明采用基于深度学习的大数据处理方法，实现裂缝快速、高精度诊断。
权利要求书clms
1.一种基于深度学习的压裂磁法实时监测中裂缝诊断方法，其特征在于，所述方法包括：设计表征压裂裂缝发育几何形态的压裂裂缝基本单元模型；设计压裂裂缝基本单元模型对应的磁化强度模型；通过数值模拟获得注入顺磁颗粒后的压裂裂缝引起的空间磁异常数据；建立数据集，对数据集进行标签，分组；选择深度学习网络模型并建立基于深度学习网络模型的井地联合反演目标函数；通过训练集数据训练获得深度学习ResNet网络模型的参数；通过测试集数据测试深度学习网络模型参数的准确度；测试深度学习ResNet网络模型的泛化性；将待预测的磁异常数据输入深度学习网络模型中，预测压裂裂缝发育几何形态。2.根据权利要求1所述的基于深度学习的压裂磁法实时监测中裂缝诊断方法，其特征在于，步骤中根据目的层岩石物理学特征、压裂工艺，设计可能的压裂裂缝几何形态，提炼压裂裂缝基本单元模型，其参数包括：裂缝长度、裂缝开度、裂缝高度、裂缝倾角和走向。3.根据权利要求1所述的基于深度学习的压裂磁法实时监测中裂缝诊断方法，其特征在于，步骤中根据压裂过程中随压裂液注入的顺磁颗粒状况，通过颗粒流分析获得顺磁颗粒在压裂裂缝基本单元模型内部的沉积和分布，进一步得到裂缝基本单元模型对应的磁化率模型。4.根据权利要求1所述的基于深度学习的压裂磁法实时监测中裂缝诊断方法，其特征在于，步骤中，采用基于非规则网格的有限元法实现数值模拟，获得充填顺磁颗粒的压裂裂缝在外加磁场作用下引起的空间磁异常数据。5.根据权利要求1所述的基于深度学习的压裂磁法实时监测中裂缝诊断方法，其特征在于，步骤中，对数据集进行标签，用压裂裂缝基本单元模型的序号作为标签，建立压裂裂缝基本单元模型、磁化率模型和磁异常数据之间的关联；对数据集进行分组，分为训练集和测试集。6.根据权利要求1所述基于深度学习的压裂磁法实时监测中裂缝诊断方法，其特征在于，步骤中，深度学习模型为深度学习中深度残差网络模型ResNet；建立井地联合三分量反演目标函数，井地联合三分量反演目标函数中的磁异常数据与磁化率模型对应的数值之间的满足关系式：；即：；其中，、/＞分别表示地面磁异常数据和井中磁异常数据；/＞、/＞分别表示地面和井中磁异常数据与磁化率模型对应的核函数关系式；对应的磁异常三分量数值可以进一步表示为：；其中，、 /＞和/＞分别表示为磁异常数据的三分量数值；采用残差网络模型进行学计算，输入数据分别为地面和井中对应的磁异常三分量数值、/＞ 和/＞，期望输出为真实地下磁化率模型数值m。7.根据权利要求1所述基于深度学习的压裂磁法实时监测中裂缝诊断方法，其特征在于，步骤中，训练集中的磁异常数据d作为输入数据，输入到网络模型，得到输出的磁化率模型数值m*；；；为需要更新深度学习网络内部参数，m为真实地下磁化率模型数值；d为输入的磁异常数据；/＞为深度学习网络模型对应表达式，L为损失函数；通过对比m*与真实地下磁化率模型数值m，确定损失函数数学期望极小条件下的网络模型参数/＞；通过网络模型训练确定网络模型参数的最佳取值；通过损失函数L实现网络模型参数/＞的调整，将增量/＞添加到各个参数中，继续进行网络模型训练，直至结束。8.根据权利要求1所述基于深度学习的压裂磁法实时监测中裂缝诊断方法，其特征在于，步骤中，将测试集的磁异常数据输入到训练后的网络模型ResNet中，对比测试输出的磁化率模型数值与对应的真实地下磁化率模型数值，验证网络模型ResNet参数的准确性。9.根据权利要求1所述基于深度学习的压裂磁法实时监测中裂缝诊断方法，其特征在于，步骤中，构建新的压裂裂缝基本单元模型和对应的磁化率模型，通过数值模拟获得对应的磁异常数据，将通过数值模拟获得的磁异常数据作为输入、通过网络模型计算后获得磁化率模型数值输出，对比输出的磁化率模型数值与对应的数据集内磁化率模型数值之间的差异验证网络模型的泛化性。10.根据权利要求1所述基于深度学习的压裂磁法实时监测中裂缝诊断方法，其特征在于，将待预测的磁异常数据作为输入，输入到训练好的深度残差网络模型ResNet中，通过数值计算获得对应的磁化率模型，根据磁化率模型实现对压裂裂缝发育几何形态的诊断。
说明书desc
技术领域本发明属于非常规油气藏、二氧化碳埋存、地热开发领域，具体涉及基于深度学习的压裂磁法实时监测中裂缝诊断方法。背景技术人工压裂技术已成为非常规油气开采、地热开采和二氧化碳埋存以及废物埋存等领域中不可缺少的技术手段。人工压裂实时动态监测可以及时了解生成的压裂裂缝发育现状，并根据压裂结果及时调整压裂方案，最终达到最佳压裂效果。当前使用的压裂裂缝实时监测主要采用的是微地震方法，微地震是以岩石的破裂时的微小地震事件作为震源，通过发震时间、空间位置和震动强度等地震属性来刻画改造后裂缝的长度、方向和密度等，不足是裂缝检测时间有限，仅仅局限于裂缝产生阶段；微地震接收到的破裂边缘与改造后裂缝的实际有效空间存在明显偏差；对裂缝的解释主要是破裂“点”的定位，需要根据点实现裂缝发育状况和走向的进一步判断和解释，此外还存在一些有效裂缝被遗漏的现象。针对微地震压裂实时监测的局限期，研究者尝试将新型顺磁材料引入到压裂实时动态监测中，通过向压裂裂缝内注入微纳尺度的顺磁颗粒，实现对压裂裂缝有效空间的充填；充填顺磁颗粒后的裂缝对外表现出磁性体的特征，通过监测空间磁异常的变化，通过裂缝反演实现裂缝几何形态反演。基于顺磁颗粒实现压裂实时动态监测主要包括两部分：磁异常采集和裂缝诊断。相对而言后者是重点，前者数据的采集主要是为了实现压裂裂缝有效空间的诊断。基于磁异常实现裂缝发育几何形态的诊断属于典型的反演问题，传统的非线性反演存在耗时长、计算量大的问题。若实现压裂的实时监测则要求工作人员及时获得精准的裂缝发育形态，便于调整压裂实施方案。随着科技发现，深度学习开始在各领域得到飞速发展，深度学习在电磁反演、地震反演等领域也得到了广泛应用。通过深度学习实现压裂磁法实时监测中的裂缝几何形态反演诊断中，提高裂缝诊断的计算效率和精度。发明内容针对基于磁异常的人工压裂实时监测中裂缝反演诊断问题，本发明提供了一种基于深度学习的压裂裂缝预测诊断方法，以提高基于磁异常的裂缝几何形态诊断的速度和准确度，实现压裂过程中磁法实时监测中的裂缝快速诊断。为了实现以上目标，本发明采用下述方案：基于深度学习的压裂磁法实时监测中裂缝诊断方法，包括：设计表征压裂裂缝发育几何形态的压裂裂缝基本单元模型；设计压裂裂缝基本单元模型对应的磁化强度模型；通过数值模拟获得注入顺磁颗粒后的压裂裂缝引起的空间磁异常数据；建立数据集，对数据集进行标签，分组；选择深度学习网络模型并建立基于深度学习网络模型的井地联合反演目标函数；通过训练集数据训练获得深度学习网络模型参数；通过测试集数据测试深度学习网络模型参数的准确度；测试深度学习网络模型的泛化性；待预测的磁异常数据输入深度学习网络模型中，预测压裂裂缝发育几何形态。步骤中根据目的层岩石物理学特征、压裂工艺，设计可能的压裂裂缝几何形态，提炼压裂裂缝基本单元模型，其参数包括：裂缝长度、裂缝开度、裂缝高度、裂缝倾角和走向等。提炼压裂裂缝基本单元模型用于生成深度学习实现裂缝识别诊断的数据集，获取充足的压裂裂缝基本单元模型，给深度学习提供充足的样本模型，有利于压裂裂缝几何发育的诊断和识别。步骤中根据压裂过程中随压裂液注入的顺磁颗粒状况，通过颗粒流分析获得顺磁颗粒在压裂裂缝基本单元模型内部的沉积和分布，依据顺磁颗粒在裂缝内部的充填和分布状况，计算获取对应的磁化率，进一步得到裂缝基本单元模型对应的磁化率模型。输入压裂区域目标区域范围，进行网格离散化；通过调整离散网格大小，设置压裂裂缝基本单元模型中裂缝长度、裂缝高度、开度、埋深等参数和磁性参数，获取离散化的磁化率模型。步骤中，鉴于压裂裂缝几何形态的复杂多样性，采用有限元法实现外加磁场作用下充填顺磁颗粒后的压裂裂缝引起的空间磁异常数值模拟，获得磁异常数据。在无传导电流情况下，对应稳定磁场基本方程由场论可知： 定义一个标量势函数： 所以有： 式中，B为磁感应强度，；H为磁场强度，；µ为磁导率，；M为磁化强度，A/m；U为磁标势，；r为观测点到体元dv的距离。通过数值模拟获得不同裂缝基本单元模型、不同磁化强度模型对应下的空间磁异常数据di，获取足够的数据集。本发明充分利用了顺磁颗粒的特性，即无外加磁场时对外表现为普通颗粒特性，当施加外加磁场作用后，被磁化引起空间磁异常。本发明选择位于微纳米尺度的顺磁颗粒，一方面可以实现对复杂裂缝有效空间的充填，另一方面可以避免进入岩石基质孔隙。本发明考虑了压裂裂缝的复杂空间展布，采用基于非规则网格的有限元数值模拟，可以实现模型空间的灵活剖分和对压裂裂缝的有效逼近。本发明施加的外加磁场大小远大于地磁大小，在数值模拟分析中可以忽略地磁的影响。步骤中，将压裂裂缝基本单元模型、磁化率模型和磁异常数据形成数据集，对数据集进行标签，用压裂裂缝基本单元模型的序号作为标签，建立压裂裂缝基本单元模型、磁化率模型和磁异常数据之间的对应、关联；将标签后的数据集数据进行顺序打乱处理，然后再对数据集进行分组，抽取数据集中的80%数据构成训练集，剩余的20%数据构成测试集；训练集数据用于训练网络模型内部参数，测试集数据用于测试训练好的网络模型的准确性和可行性。步骤中，深度学习模型为深度学习中深度残差网络模型ResNet。步骤中，深度学习模型为深度学习中深度残差网络模型ResNet；建立井地联合三分量反演目标函数，井地联合三分量反演目标函数中的磁异常数据与磁化率模型对应的数值之间的满足关系式：；即：；其中，、/＞分别表示地面磁异常数据和井中磁异常数据；/＞、/＞分别表示地面和井中磁异常数据与磁化率模型对应的核函数关系式；对应的磁异常三分量数值可以进一步表示为：；其中，、 /＞和/＞分别表示为磁异常数据的三分量数值；磁异常数据与磁化率模型之间具有复杂的线性关系，采用残差网络模型进行学计算，输入数据分别为地面和井中对应的磁异常三分量数值、/＞ 和/＞，期望输出为真实地下磁化率模型数值m。步骤中，训练集中的磁异常数据作为输入数据，输入到网络模型，得到输出的磁化率模型数值m*；；；为需要更新深度学习网络内部参数，m为真实地下磁化率模型数值；d为输入的磁异常数据；/＞为深度学习网络模型对应表达式，L为损失函数；通过对比m*与真实地下磁化率模型数值m，确定损失函数数学期望极小条件下的网络模型参数/＞；通过网络模型训练确定网络模型参数的最佳取值；通过损失函数L实现网络模型参数/＞的调整，将增量/＞添加到各个参数中，继续进行网络模型训练，直至结束。损失函数是通过正向传播的输出结果与样本标签值之间的偏差，反向传播来修改网络单元节点权值和其他参数。在此选取L2范数作为损失函数，网络模型训练的过程就是损失函数数学期望极小化的过程。通过训练集数据的学习，ResNet网络模型内部参数自动拟合到残差函数最小情况下的取值，然后保存这些参数值用于预测裂缝。步骤中，将测试集的磁异常数据输入到训练后的网络模型ResNet中，对比测试输出的磁化率模型数值与对应的真实地下磁化率模型数值，验证网络模型ResNet参数的准确性。若两者差异较大，则需要重新训练、更新网络参数，直到输出结果与实际数值之间误差在允许范围之内为止；若测试集内数据输入后得到的输出结果与期望输出结果相近，误差在允许的范围之内，则表明网络模型参数通过了准确性测试。ResNet网络在全卷积网络的基础上引入残差，对应的网络残差映射函数，防止网络加深导致梯度消失，提高模型的稳定性。卷积层有卷积核与输入数据进行卷积获得特征图像；激励层通过非线性运算将卷积结果进行一次非线性映射，选取ReLu函数作为激励层函数；池化层采用最大池化或者平均池化，进一步减少特征图像的维度；在训练过程中采用均方差函数作为损失函数，Adam最优化算法和正则化约束进行网络训练。步骤中，构建新的压裂裂缝基本单元模型和对应的磁化率模型，通过数值模拟获得对应的磁异常数据，将通过数值模拟获得的磁异常数据作为输入、通过网络模型计算后获得磁化率模型数值作为输出，对比输出的磁化率模型数值与对应的数据集内磁化率模型数值之间的差异验证网络模型的泛化性。步骤中，将待预测的磁异常数据作为输入，输入到训练好的深度残差网络模型ResNet中，通过数值计算获得对应的磁化率模型，根据磁化率模型实现对压裂裂缝发育几何形态的诊断。本发明采用磁性颗粒实现压裂裂缝检测，主要侧重于充填磁性颗粒后的裂缝引起的空间磁异常，现有技术中如何根据磁异常实现压裂裂缝的诊断成像，相关研究颇少。本发明在实现压裂裂缝实时动态监测过程中，不仅要求监测到裂缝引起的磁异常，还需要根据磁异常数据实现对压裂裂缝快速反演和精确成像，以便及时获得压裂裂缝空间展布形态，并及时的调整和优化压裂方案。附图说明图1为压裂裂缝基本单元模型示意图，为垂直裂缝示意图，为倾斜裂缝图，为裂缝组合示意图；图2为本发明所述流程图；图3为压裂三阶段地面磁场三分量记录；图4为压裂三阶段四口井中磁场三分量记录图5为压裂过程中监测到目标区域裂缝发育状况。具体实施方式一种基于深度学习的压裂磁法实时监测中裂缝诊断方法，具体步骤为：步骤1：获取目标地层物性参数。获取目标地层天然裂缝发育状况、压裂设计参数、压裂过程中注入压力、注入颗粒量等参数。假定目标地层发育天然裂缝，压裂为三段压裂，每段压裂三簇裂缝，则可能存在的压裂裂缝为关于水平井对称的垂直裂缝。步骤2：提炼压裂裂缝基本单元模型。考虑到天然裂缝存在，压裂裂缝与天然裂缝相互连通后可形成裂缝网状结构，表现为L形、Y形和X形；考虑到裂缝长度、裂缝高度、裂缝开度、裂缝倾角和裂缝走向的不同，设计不同参数的裂缝单元模型1000组。步骤3：建立裂缝基本单元模型对应的磁化率模型。鉴于压裂裂缝参数不同：裂缝长度、裂缝开度、裂缝高度、裂缝倾角、裂缝走向、裂缝网状连通方式不同，通过颗粒流分析注入的顺磁颗粒在裂缝单元模型内的沉积和分布，并计算压裂裂缝单元模型注入顺磁颗粒后，对应的磁化率模型数值。步骤4：通过有限元数值模拟获取压裂裂缝基本单元模型对应的空间磁异常。考虑了压裂裂缝基本单元中裂缝形态的多样性，采用非规则网络对模型进行离散化，更好的逼近裂缝网状结构形态；施加的外磁场数值远大于地磁数值，可以忽略实际监测中地磁的影响。顺磁颗粒在外磁场作用下被磁化，其磁化方向与外加磁场方向相同。步骤5：建立数据集并进行标签，分组。将数值模拟获得磁异常数据，与磁化率模型和压裂裂缝基本单元模型构成数据集并一一对应，用压裂裂缝基本单元模型的序号作为标签；对标签后的数据集打乱顺序，挑选其中的80%作为训练集，剩余的20%作为测试集。步骤6：选择深度残差网络模型ResNet50作为网络模型，建立基于深度学习网络模型的井地联合反演目标函数，对网络模型进行训练并测试其准确度和泛化性。井地联合三分量反演目标函数中的磁异常数据d与磁化率模型对应的数值m之间的满足关系式：；即：；其中，、/＞分别表示地面磁异常数据和井中磁异常数据；/＞、/＞分别表示地面和井中磁异常数据与磁化率模型对应的核函数关系式；对应的磁异常三分量数值可以进一步表示为：；其中，、 /＞和/＞分别表示为磁异常数据的三分量数值；采用残差网络模型进行学计算，输入数据分别为地面和井中对应的磁异常三分量数值、/＞ 和/＞，期望输出为真实地下磁化率模型数值m。训练集中的磁异常数据d作为输入数据，输入到网络模型，得到输出的磁化率模型数值m*；；；选取深度残差网络模型ResNet50进行训练，选取ReLU作为激活函数，Adam优化器和均方差函数为损失函数，设置训练的迭代次数，迭代次数最多为500次；计算损失函数，利用优化器不断更新网络模型参数是的输出结果与期望输出拟合效果最好；若训练效果不好，则调整网络结构，重新训练和优化参数。用测试集数据测试网络模型和参数的准确性，若输出磁化率模型数值与期望数值结果拟合较好，则表明网络模型和参数通过测试，若误差较大则重新训练。设置新的裂缝网络结构模型，计算对应的磁化率模型，通过数值模拟获得对应磁异常数据；将磁异常数据作为模型输入来测试网络模型的泛化性，若输出磁化率模型数值与期望输出结果拟合较好，则表明网络模型和参数适用性较好，否则，重新进行模型训练。步骤7：预测压裂裂缝几何发育形态。通过设计压裂模型进行计算分析。假定模型大小为3000 m ×3000 m × 3200 m，模拟在深度3000米处分三段压裂的过程，每一段压裂生成三簇长100m、高30m的裂缝，裂缝间隔50米；在地面和四口井中接收磁场三分量：W1、W2、W3、W4和W5；获得空间磁异常记录如图3和图4所示；将空间磁异常数据作为输出，获得深度学习后裂缝对应磁化率模型结果，如图5所示；根据磁化率模型可以解释压裂裂缝的几何形状和分布。
