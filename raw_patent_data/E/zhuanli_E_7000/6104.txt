标题title
一种基于大数据分析的煤矿水害实时预警方法
摘要abst
本发明涉及数据处理技术领域，具体涉及一种基于大数据分析的煤矿水害实时预警方法。该方法包括：获取矿井周围区域的辅助监测区域，并对辅助监测区域进行分析获得辅助判断指标和方向指标；获取下一预设时间段内的预测监测指标；在下一个预设时间段内，获取同一时刻的所有预测监测指标，组成预测指标向量，并获取异常监测指标的数量；计算每个预测指标向量与其他预测指标向量的相似度获得相似度序列；根据相似度序列的波动程度和均值、该相似度序列的预测指标向量对应的异常监测指标的数量、辅助判断指标的均值和方向指标获取综合判断指标；根据综合判断指标进行水害预警。本发明能够提高矿井水害预警的准确性，并将预警时机提前。
权利要求书clms
1.一种基于大数据分析的煤矿水害实时预警方法，其特征在于，该方法包括：在矿井的边界外获取矿井的至少两个辅助监测区域；在预设时间段内采集各辅助监测区域的微震事件数目、微震事件能量和微震事件位置；基于所述微震事件数目和微震事件能量得到辅助判断指标；根据所述微震事件位置得到方向指标；在预设时间段内的每个采集时刻采集矿井内的至少两种监测指标；构建每种监测指标对应的数据预测模型；将预设时间段内的一种监测指标输入对应的数据预测模型，得到下一预设时间段内的预测监测指标；在下一个预设时间段内，获取同一时刻的所有预测监测指标，组成预测指标向量，并获取每个预测指标向量中异常监测指标的数量；计算每个预测指标向量与其他预测指标向量的相似度获得相似度序列；根据相似度序列的波动程度和均值、该相似度序列的预测指标向量对应的异常监测指标的数量、辅助判断指标的均值和方向指标获取综合判断指标；根据综合判断指标进行水害预警。2.根据权利要求1所述的一种基于大数据分析的煤矿水害实时预警方法，其特征在于，所述在矿井的边界外获取矿井的至少两个辅助监测区域，包括：获取矿井的边界，然后获取整个矿井区域的最小外接圆；经过圆心将最小外接圆进行等分，得到预设数量的扇形；在每个扇形区域内获取辅助监测区域，辅助监测区域为圆形且与最小外接圆的边、扇形的边相切。3.根据权利要求1所述的一种基于大数据分析的煤矿水害实时预警方法，其特征在于，所述基于所述微震事件数目和微震事件能量得到辅助判断指标，包括：一个预设时间段内一个辅助监测区域内的微震事件数目与预设时间段的时间长度的比值为时间密度指标；则辅助判断指标的计算公式为：其中，YP表示一个辅助监测区域的辅助判断指标；表示预设时间段内一个辅助监测区域微震事件数目的平均值；/＞表示一个辅助监测区域微震事件能量的平均值；ρt表示一个辅助监测区域微震事件预设时间段内的时间密度指标。4.根据权利要求1所述的一种基于大数据分析的煤矿水害实时预警方法，其特征在于，所述根据微震事件位置得到方向指标，包括：获取预设时间段内每个辅助监测区域内微震事件的位置，若在预设时间段内出现一个辅助监测区域的微震事件的位置连续变化趋向矿井方向，其中连续变化的时间不少于预设时间长度，则将其编码为1，否则编码为0；其中编码的数量与辅助监测区域的数量相等；将所有的编码进行求和获得方向指标。5.根据权利要求1所述的一种基于大数据分析的煤矿水害实时预警方法，其特征在于，所述在预设时间段内的每个采集时刻采集矿井内的至少两种监测指标，包括：所述监测指标分别为水位、涌水量、第一化学指标、第二化学指标、水硬度、pH值、应力、岩层的位移、微震事件数目、微震能量和矿井巷道内的空气湿度。6.根据权利要求1所述的一种基于大数据分析的煤矿水害实时预警方法，其特征在于，所述构建每种监测指标对应的数据预测模型，包括：构建数据预测模型和对应的损失函数，所述损失函数由第一损失函数和第二损失函数组成；将每种监测指标的历史数据作为训练样本，利用训练样本基于所述损失函数对数据预测模型进行训练。7.根据权利要求6所述的一种基于大数据分析的煤矿水害实时预警方法，其特征在于，所述损失函数为：L＝αL1+βL2，其中，α和β分别表示第一权重系数和第二权重系数；L1和L2分别为第一损失函数和第二损失函数；第一损失函数为均方误差损失函数，第二损失函数具体为：其中，L2表示第二损失函数；n表示所有参与训练的样本的组数；pa表示第a组真实样本与第a组预测数据的皮尔逊相关性系数；e表示自然常数。8.根据权利要求1所述的一种基于大数据分析的煤矿水害实时预警方法，其特征在于，所述计算每个预测指标向量与其他预测指标向量的相似度获得相似度序列，包括：相似度的计算公式具体为其中，xsij表示第i个预测指标向量与第j个预测指标向量的相似度，其中i和j的取值范围，为正整数且不相等；YXij表示第i个预测指标向量与第j个预测指标向量的余弦相似度；Dij表示第i个预测指标向量与第j个预测指标向量的欧式距离；γ表示第一参数，取值为无限接近于零的正数。9.根据权利要求1所述的一种基于大数据分析的煤矿水害实时预警方法，其特征在于，所述综合判断指标的计算公式为：其中，ZPc表示第c个预测指标向量对应的综合判断指标；Nc表示一个预测指标向量中异常的监测指标的数量；YPPJ表示预测的预设时间段的前一个预设时间段内的所有辅助判断指标的平均值；FX表示预测的预设时间段的前一个预设时间段内的所有辅助监测区域对应的方向指标；Varc表示第c个预测指标向量对应的相似度序列的波动程度，也即是方差；Gc表示第c个预测指标向量对应的相似度序列的均值；b1和b2为权重系数。10.根据权利要求1所述的一种基于大数据分析的煤矿水害实时预警方法，其特征在于，所述根据综合判断指标进行水害预警，包括：获取预警阈值，将下一预设时间段内的所有预测指标向量对应的综合判断指标与所述预警指标进行比较，获取大于等于预警阈值的综合判断指标所有时刻，时序上排在最前面的时刻为水害发展开始时刻；并在当前预设时间段内发出预警，提醒工作人员根据水害发展开始时刻做出相应措施。
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及一种基于大数据分析的煤矿水害实时预警方法。背景技术煤炭在能源领域有着举足轻重的作用，是我国能源中关键的一环，随着浅层煤炭的开采逐渐枯竭，现在对于煤炭的开采逐渐需要深入地下，随着开采的深度加深，煤矿水害成为了煤矿开采的一大难题，不仅阻挠了煤矿资源的开采，严重时，还会对工作人员的安全造成威胁，矿井下的各种机械和机电设备，也会随着水害的发生造成巨大的损失，而且恢复起来，也非常难，因此需要对煤矿水害进行监测并根据所采集数据对水害进行实时预警。现有的关于煤矿水害实时预警的方法，有基于多个单独的监测指标进行预警的，每个单独的监测指标与确定的阈值相比较，来判断水害是否进行预警，并未考虑不同类型的监测指标之间的关系，以及监测指标本身的变化情况和历史数据对于矿井水害预警的影响，导致预警并不准确。发明内容为了解决上述技术问题，本发明的目的在于提供一种基于大数据分析的煤矿水害实时预警方法，所采用的技术方案具体如下：本发明一个实施例提供了一种基于大数据分析的煤矿水害实时预警方法：在矿井的边界外获取矿井的至少两个辅助监测区域；在预设时间段内采集各辅助监测区域的微震事件数目、微震事件能量和微震事件位置；基于所述微震事件数目和微震事件能量得到辅助判断指标；根据所述微震事件位置得到方向指标；在预设时间段内的每个采集时刻采集矿井内的至少两种监测指标；构建每种监测指标对应的数据预测模型；将预设时间段内的一种监测指标输入对应的数据预测模型，得到下一预设时间段内的预测监测指标；在下一个预设时间段内，获取同一时刻的所有预测监测指标，组成预测指标向量，并获取每个预测指标向量中异常监测指标的数量；计算每个预测指标向量与其他预测指标向量的相似度获得相似度序列；根据相似度序列的波动程度和均值、该相似度序列的预测指标向量对应的异常监测指标的数量、辅助判断指标的均值和方向指标获取综合判断指标；根据综合判断指标进行水害预警。优选地，在矿井的边界外获取矿井的至少两个辅助监测区域，包括：获取矿井的边界，然后获取整个矿井区域的最小外接圆；经过圆心将最小外接圆进行等分，得到预设数量的扇形；在每个扇形区域内获取辅助监测区域，辅助监测区域为圆形且与最小外接圆的边、扇形的边相切。优选地，基于所述微震事件数目和微震事件能量得到辅助判断指标，包括：一个预设时间段内一个辅助监测区域内的微震事件数目与预设时间段的时间长度的比值为时间密度指标；则辅助判断指标的计算公式为：其中，YP表示一个辅助监测区域的辅助判断指标；表示预设时间段内一个辅助监测区域微震事件数目的平均值；/＞表示一个辅助监测区域微震事件能量的平均值；ρt表示一个辅助监测区域微震事件预设时间段内的时间密度指标。优选地，根据微震事件位置得到方向指标，包括：获取预设时间段内每个辅助监测区域内微震事件的位置，若在预设时间段内出现一个辅助监测区域的微震事件的位置连续变化趋向矿井方向，其中连续变化的时间不少于预设时间长度，则将其编码为1，否则编码为0；其中编码的数量与辅助监测区域的数量相等；将所有的编码进行求和获得方向指标。优选地，在预设时间段内的每个采集时刻采集矿井内的至少两种监测指标，包括：所述监测指标分别为水位、涌水量、第一化学指标、第二化学指标、水硬度、pH值、应力、岩层的位移、微震事件数目、微震能量和矿井巷道内的空气湿度。优选地，构建每种监测指标对应的数据预测模型，包括：构建数据预测模型和对应的损失函数，所述损失函数由第一损失函数和第二损失函数组成；将每种监测指标的历史数据作为训练样本，利用训练样本基于所述损失函数对数据预测模型进行训练。优选地，损失函数为：L＝αL1+βL2，其中，α和β分别表示第一权重系数和第二权重系数；L1和L2分别为第一损失函数和第二损失函数；第一损失函数为均方误差损失函数，第二损失函数具体为：其中，L2表示第二损失函数；n表示所有参与训练的样本的组数；pa表示第a组真实样本与第a组预测数据的皮尔逊相关性系数；e表示自然常数。优选地，计算每个预测指标向量与其他预测指标向量的相似度获得相似度序列，包括：相似度的计算公式具体为其中，xsij表示第i个预测指标向量与第j个预测指标向量的相似度，其中i和j的取值范围，为正整数且不相等；YXij表示第i个预测指标向量与第j个预测指标向量的余弦相似度；Dij表示第i个预测指标向量与第j个预测指标向量的欧式距离；γ表示第一参数，取值为无限接近于零的正数。优选地，综合判断指标的计算公式为：其中，ZPc表示第c个预测指标向量对应的综合判断指标；Nc表示一个预测指标向量中异常的监测指标的数量；YPPJ表示预测的预设时间段的前一个预设时间段内的所有辅助判断指标的平均值；FX表示预测的预设时间段的前一个预设时间段内的所有辅助监测区域对应的方向指标；Varc表示第c个预测指标向量对应的相似度序列的波动程度，也即是方差；Gc表示第c个预测指标向量对应的相似度序列的均值；b1和b2为权重系数。优选地，根据综合判断指标进行水害预警，包括：获取预警阈值，将下一预设时间段内的所有预测指标向量对应的综合判断指标与所述预警指标进行比较，获取大于等于预警阈值的综合判断指标所有时刻，时序上排在最前面的时刻为水害发展开始时刻；并在当前预设时间段内发出预警，提醒工作人员根据水害发展开始时刻做出相应措施。本发明实施例至少具有如下有益效果：本发明在矿井的边界外获取了矿井的多个辅助监测区域，并对辅助监测区域的微震数据进行进一步的分析，获取了辅助判断指标和方向指标，从矿井周围的地质变化情况来辅助判断矿井发生水害的可能性，使得对于矿井水害的预警的准确性得到了进一步加强；进一步的，在预设时间段内，采集多种监测指标，并利用这些指标预测下一个预设时间段内的预测监测指标，利用同一时刻的预测监测指标组成预测指标向量，并结合其它时刻的预测指标向量进行分析，得到相似度序列，考虑了一个时刻的各种监测指标与其他时刻指标之间的联系，能够提高预警的准确性；然后将辅助判断指标、方向指标、预测指标向量的分析结果进行结合，获得综合判断指标进行预警，进而预警，将矿井内部的情况和矿井周围区域的情况进行了结合，使得预警更加准确；同时预测的监测数据提前量较长，能够使得预警的时机更加提前，让工作人员有足够的时间进行应对。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明实施例提供的一种基于大数据分析的煤矿水害实时预警方法的方法流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种基于大数据分析的煤矿水害实时预警方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构、或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种基于大数据分析的煤矿水害实时预警方法的具体方案。实施例：本发明的主要应用场景为：矿井一旦发生水害，会对煤矿的开采造成很大的影响，且非常不容易恢复，使得工作环境恶化，影响工人身体健康，积水过多还会对各种生产设备设施造成破坏，会造成设备和设施的腐蚀和锈蚀，且涌水量较大时，甚至会影响采矿人员的生命安全问题。因此需要实时采集煤煤矿区内的各个矿井内的数据，以达到对于水害的监测的目的，能够及时的对矿井的水害进行预警。煤矿水害是一个多因素、非线性的空间问题，煤矿水害预测涉及到水文地质、岩石力学、开采条件等诸多因素，各因素间有复杂的非线性关系，因此需要进行精确的分析，确定发生疑似发生水害的位置；同时现有的对于矿井的水害的监测，基本上都是基于矿井本身的各种水文数据，岩层数据以及通过“电法”获得数据等进行监测的，并未考虑其他区域的变化情况对于矿井水害的影响，如距离矿井较近的某个区域地质条件发生了变化，会影响到距离它较近的矿井，但矿井的监测指标，在短时间内，可能并未出现异常，因此还需要对矿井周边的区域进行监测，进而更加精细化的监测每个矿井的水害。请参阅图1，其示出了本发明实施例提供的一种基于大数据分析的煤矿水害实时预警方法流程图，该方法包括以下步骤：步骤S1，在矿井的边界外获取矿井的至少两个辅助监测区域；在预设时间段内采集各辅助监测区域的微震事件数目、微震事件能量和微震事件位置；基于微震事件数目和微震事件能量得到辅助判断指标；根据微震事件位置得到方向指标。在实际的生产过程中，矿井水害的发生是一个过程量，虽然在水害发生时，比较突然，但是在发生之前会有一定的演变过程，在这个演变过程中，矿井当下的水文数据或者其他的监测指标可能并未发生明显的变化，但其周围区域可能存在突水前兆，因此除了需要对矿井进行实时的监测，还需要在矿井的周围区域进行同步监测。具体的，获取矿井的边界，紧接着获取整个矿井区域的最小外接圆，然后经过圆心将最小外接圆进行等分，得到预设数量的扇形，优选地，在本发明实施例中，最小外接圆等分为36份，也即是得到36个以最小外接圆的圆心为顶点的扇形，预设数量取值为36，在扇形区域内获取辅助监测区域，辅助监测区域为圆形且与最小外接圆的边、扇形的边相切，一共获取36个辅助监测区域。得到矿井区域的最小外接圆，然后划分36个辅助监测区域，能够从多个方向，全方位的对矿井的水害情况进行一定的监测，使得对于矿井水害的预警更加准确。进一步的，由于辅助监测区域数据并不能直接反映矿井水害的情况，因此还需要矿井内部的动态数据进行辅助，来进行预判断。对于一个辅助监测区域，需要根据在此区域内获取数据的情况来进行预判断，通过微震数据进行监测是矿井水害监测常用的手段，微震数据监测是通过监测与收集伴随岩石破裂和错动时发出的微地震波信息，分析处理后确定微地震事件发生的位置、数量及能量释放等信息，来对水害进行监测。利用微震检波器，在以辅助监测区域为顶面的空间内获取辅助监测区域内微震事件的数目、微震能量，进一步的，在以辅助监测区域为顶面的空间内建立三维坐标系，来获取微震事件的位置，进而获取微震事件的时间密度指标；需要说明的是，微震检波器的具体型号可由实施者根据具体情况选择不同的型号，同时在获取微震数据时，有些数据是可能是噪声数据，因此需要对微震数据进行降噪，获取有效的微震数据，然后，从微震数据中提取微震事件等数据。时间密度指标指的是在预设时间段内，单位时间发生微震事件的数目，本发明中时间密度指标的计算方法为利用预设时间段内一个辅助监测区域所有微震事件的数目与预设时间段内24个小时的比值，其中预设时间段时长在本发明实施例中为一天，采集的时候为每个小时采集一次，每次采集数据的时刻为采集时刻，两个采集时刻之间间隔一个小时，时间尺度可由实施者根据实际情况进行调整，仅仅从微震事件的数目来对水害进行预判断，精确度不够，微震事件数目越多，密度越大，能量越高，则水害发生的可能性越大，仅仅从微震事件的数目和微震能量对其进行监测，精度较低，因此还需要加入微震事件的时间密度指标进行表征。根据微震事件数目、微震能量和时间密度指标，获取辅助判断指标：其中，YP表示一个辅助监测区域的辅助判断指标；表示预设时间段内一个辅助监测区域微震事件数目的平均值；/＞表示一个辅助监测区域微震事件能量的平均值；ρt表示一个辅助监测区域微震事件预设时间段内的时间密度指标，其中YP的值越大，说明矿井周围区域对于矿井水害的影响越大，矿井发生水害的概率越大，越需要对矿井进行更加细致的监测。需要说明的是，参与计算的参数都需要先进行去量纲和标准化，保证其量纲一致。一个预设时间段内，可得到36个辅助判断指标，求取所有辅助判断指标的平均值YPPJ，同时，获取预设时间段内每个辅助监测区域内微震事件的位置，若在预设时间段内出现一个辅助监测区域的微震事件的位置连续变化趋向矿井方向，其中连续变化的时间不少于预设时间长度，优选地，本发明实施例中预设时间长度为6小时，则将其编码为1，例如在预设时间段内第一个小时、第二个小时，一直到第六个小时微震事件的位置变化方向整体趋势是连续趋向矿井的，则编码为1，同一个辅助监测区域出现多次微震事件位置变化连续趋向矿井，只编码一次，也即是编码的数量一共只有36个，若位置变化未出现连续趋向矿井，则将其编码为0，获取编码的和，并归一化，得到方向指标，其中辅助判断指标的平均值和方向指标对于矿井水害的预警有着很重要的作用。步骤S2，在预设时间段内的每个采集时刻采集矿井内的至少两种监测指标。在步骤S1中分析了矿井周围区域的对于矿井的水害预警的影响，获取了两个影响指标，进一步的，需要获取矿井内的各种监测指标对矿井水害进行监测，主要的数据包括水位、涌水量，水温、以及水质参数数据，以及地下岩石的变化产生的数据。在对煤矿水害的研究过程中发现，矿井含水层的水位SW在矿井发生水害的时候，其变化非常明显，因此当含水层水位这一指标出现异常情况，则矿井发生水害的概率就非常大，因此水位的变化对于水害是较为敏感的。同时在发生水害的前期以及在发生水害时探水眼的涌水量会发生明显的变化，因此矿井的涌水量SL对于矿井水害的有很大的重要性，敏感性也非常强。这两个指标与煤矿水害有着直接的关系，因此有效性很高，而水温在水害发生时，虽然也有一定程度的变化，但是变化相较于其他指标并不明显，因此本发明实施例中将水温指标舍弃。需要说明的是，采集指标时，需要在矿井巷道的关键位置利用相应的装置进行监测，其关键位置的选择，由工作人员根据矿井的实际情况进行确定，水位的监测需要进行钻孔进行监测，涌水量的监测为整个矿井的总的涌水量。对于水质指标，在本发明实施例中指的是矿井地下水质中化学成分的含量，主要包括一些离子的含量，其中主要的离子的成分为：硫酸根离子、钾离子、钙离子、镁离子、钠离子氯离子和碳酸氢根离子；但在不同的煤矿中，各种离子在地下水中的变化可能会有差异，因此对于不同的矿井需要筛选变化较为显著的离子，进行监测。在本发明实施例中，需要根据历史数据，也即是历史上矿井采样的水样的各种化学离子的平均浓度变化差异最大的两个化学指标作为监测指标，分别记为第一化学指标HX1和第二化学指标HX2；需要说明的是，在选取不同的离子时需要根据矿井的实际情况进行确定；进一步的，在对矿井的地下水进行采样分析过程中，发现地下水的硬度YD在突水过程中，变化明显且逐渐增大，同时水的pH值的变化差异也比较大，因此pH值需要列为监测指标；关于水质指标需要利用水质传感器进行检测，优选地，本发明实施例中采用WMP6多参数水质传感器进行监测，在矿井巷道的关键位置进行采集水样进行检测。进一步的，除了需要对水质的变化进行监测外，还需要对岩层的变化进行监测，其中岩层的应力会对隔水层的稳定性有很大的影响，岩层的应力的变化可以反映岩体的变化趋势，而且应力的对于岩层中裂隙的形成有着非常大的影响，因此应力的变化需要进行进一步的监测，裂隙的形成会伴随着岩层的位移，因此需要为岩层的位移进行监测，具体的在关键位置利用应力传感器和位移传感器，采集应力F和岩层的位移S进行检测。矿井岩层某位置中发生微震事件，则表示该位置出现了微震动，如果同一位置的微震事件数目较多，则说明该位置发生了一连串的微震动，发生水害之前，岩层会发生微震动，因此需要采集微震事件数目WS和微震能量E。在发生水害之前，矿井巷道内的空气湿度会发生变化，因此还需要采集矿井巷道内的空气湿度SD。需要说明的是，所有获得的这些数据指标统称为监测指标；在获取水位SW、涌水量SL、第一化学指标HX1、第二化学指标HX2、水的硬度YD、pH值、应力F、岩层的位移S、微震事件数目WS、微震能量E和矿井巷道内的空气湿度SD、一共11个监测指标，每一小时，也即是一个采集时刻采集一次监测指标，一个采集时刻采集11种监测指标，以一天为一个预设时间段，因此一个预设时间段采集的监测指标为24个，一共11种指标，其中预警时机以一个小时结束的时刻为节点。步骤S3，构建每种监测指标对应的数据预测模型；将预设时间段内的一种监测指标输入对应的数据预测模型，得到下一预设时间段内的预测监测指标。由于需要提前对水害进行预警，因此需要将预测时机提前，而在现有的关于水害的预警方法中，大多是基于连续的数据预测下一个时刻的数据，根据下一个时刻的数据与相对应的阈值进行相比较，来判断是否进行预警，没有考虑该数据前后相邻的数据的情况，使得预警的准确性不够高。在本发明实施例中，预测的数据是一个预设时间段内的数据，根据该时间段内的数据对对水害进行监测。具体的，构建数据预测模型，这里的数据预测模型指的是TCN神经网络，TCN神经网络是一种时域卷积神经网络模型，能够很好的在时域上对时序数据进行预测，本发明采用各种监测指标的历史数据作为训练样本，将训练样本按照7:3的比例划分为训练集和验证集，需要说明的是，每种监测指标需要对应一个数据预测模型，每个预设时间段的每种监测指标的全部数据作为输入数据，输出也是一个预设时间段内的数据。具体的，数据预测模型的损失函数由两部分构成，第一部分为均方误差损失函数，表达式为：其中，L1表示均方误差损失函数，记为第一损失函数；m表示样本的数量；yi表示第i个真实样本，表示第i个真实样本对应的预测值；同时由于一组监测指标的变化趋势由于对于矿井的水害监测指标，因此还需要考虑输入预设时间段的监测指标的变化趋势与预测出来的下一个预设时间段的监测指标的变化趋势的相似程度；具体的第二部分的损失函数具体为：其中，L2表示对于变化趋势监督的损失函数，记为第二损失函数；n表示所有参与训练的样本的组数，每次输入的数据为一组数据，n也就是表示有多少组这样的数据；pa表示第a组真实样本与输出的预测数据的皮尔逊相关性系数，用于约束一组真实样本与输出的预测数据在变化趋势上的差异，L2收敛的值越小说明预测的数据的趋势变化越接近真实情况下的矿井的各个监测指标变化；e表示自然常数。皮尔逊相关性系数的计算公式为：其中，ρX,Y表示两组数据的皮尔逊相关性系数；σX和σY分别表示两组数据各自的标准差；cov表示两组数据的协方差。数据训练模型的损失函数为：L＝αL1+βL2；其中，α和β分别表示第一权重系数和第二权重系数，优选地，α和β在本发明实施例中取值为0.5；需要说明的是，根据所需要预测的数据的实际情况的不同，实施者可以对其进行调整。需要说明的是，均方误差损失函数，也即是第一损失函数是着重从数值上约束模型训练的，而第二损失函数是着重从数据的变化趋势的关系上来约束模型训练的，使得模型能够学习到数据样本中潜在的趋势变化关系。将当前预设时间段的监测指标输入其对应的训练完成的数据预测模型，输出对应的下一预设时间段的预测监测指标，其中每种类型的监测指标都对应一个数据预测模型；至此可以获取每种监测指标下一预设时间段的预测监测指标。步骤S4，在下一个预设时间段内，获取同一时刻的所有预测监测指标，组成预测指标向量，并获取每个预测指标向量中异常监测指标的数量；计算每个预测指标向量与其他预测指标向量的相似度获得相似度序列；根据相似度序列的波动程度和均值、该相似度序列的预测指标向量对应的异常监测指标的数量、辅助判断指标的均值和方向指标获取综合判断指标；根据综合判断指标进行水害预警。在步骤S3，获取了每种监测指标对应的下一预设时间段的预测监测指标，能够提前对突水进行预测，且由于划分时间较短，预警的提前量更大；进一步的，将预设时间段内同一时间对应的预测的每种监测指标组成预测指标向量，一个预测指标向量里的元素分别为同一时间对应的水位SW、涌水量SL、第一化学指标HX1、第二化学指标HX2、硬度YD、pH值、应力F、岩层的位移S、微震事件数目WS、微震能量E和矿井巷道内的空气湿度SD；一个预设时间段内可以获得24个预测指标向量；分别计算每个预测指标向量和其他预测指标向量的相似度，一个预测指标向量可以得到23个相似度，组成相似度序列XS；相似度的计算具体为：其中，xsij表示第i个预测指标向量与第j个预测指标向量的相似度，其中i和j的取值范围，为正整数且不相等；YXij表示第i个预测指标向量与第j个预测指标向量的余弦相似度；Dij表示第i个预测指标向量与第j个预测指标向量的欧式距离；γ表示第一参数，取值为无限接近于零的正数。计算相似度过程中，不仅仅需要从其趋势上计算其相似度，还需要从数值差异进行计算。对矿井在正常状态下的历史数据进行数学统计，获取每种监测指标的数值的上限值和下限值，以获得每种监测指标的正常波动范围，在一个预测指标向量中获取不在正常波动范围内的元素的数量，也即是获取一个预测指标向量中异常监测指标的数量，记为Nc；进一步的，求取每个预测指标向量对应的相似度序列的波动程度和均值，对于相似度序列的波动程度和均值，如果一个时刻对应的预测指标向量相对于其他预测指标向量基本相同，相似度较高，且相似度之间并无太大的波动，则该预测指标向量对应时刻矿井在正常状态，若一个时刻对应的预测指标向量相对于其他预测指标向量，差异很大，相似度较低，且相似度之间的波动程度很大，则说明该指标对应的时刻很可能是矿井发生水害的前兆时刻，此时就需要对矿井水害做出预警。相似度序列的波动程度利用序列的方差进行表示。最后将获取的各种指标进行融合，获得综合判断指标，综合判断指标的计算公式为：其中，ZPc表示第c个预测指标向量对应的综合判断指标；Nc表示一个预测指标向量中异常的监测指标的数量；YPPJ表示预测的预设时间段的前一个预设时间段内的所有辅助判断指标的平均值；FX表示预测的预设时间段的前一个预设时间段内的所有辅助监测区域对应的方向指标；Varc表示第c个预测指标向量对应的相似度序列的波动程度，也即是方差；Gc表示第c个预测指标向量对应的相似度序列的均值；b1和b2为权重系数，取值分别为0.75和0.35。需要说明的是，Nc表示的预测的一个时刻对应的预测指标向量中的异常的元素，也即是表示不在正常范围内变化的监测指标的种类数，数量越大，则矿井发生水害的概率越大，YPPJ和FX表示矿井周围区域，岩层的变化情况，YPPJ表示微震事件发生的情况，其值越大，说明周边地区发生微震的情况越频繁，结合方向指标FX可以监测微震位置的变化情况，如果整体趋势是向矿井移动的，则会在一定程度上加大矿井发生水害的概率；Varc和Gc分别表示相似度序列的方差和平均值，方差越大说明相似度序列的波动程度大，平均值小说明该预测指标向量与其他指标的相似度较小，则说明该预测指标序列对应的时刻很可能是水害发生前的前兆开始时刻。需要说明的是，在计算综合判断指标时，需要将所有的数据进行去量纲处理，且最总得到的综合判断指标是归一化后的结果。最后，基于历史数据计算每个采集时刻对应的综合判断指标，同时利用结合矿井当时各种监测指标判断是否需要进行预警，进行数学统计，得到预警阈值T；将判断预设时间段内每个预测指标向量对应的综合判断指标与预警阈值T相比较，获取大于等于预警阈值T的综合判断指标对应的所有时刻，排在最前面的时刻为水害发展开始时刻，若监测到水害发展时刻，则在当前预设时间段内对矿井的工作人员和总控制台的人员进行预警，以便于工作人员根据水害发展时刻进行进一步的处理。另外，需要说明的是，在对各种监测指标进行预测时，并不是需要完整的一天的监测指标才开始预测，本发明实施例中的“一天”指的是24个小时，并不是广义上的一天时间，例如本发明实施例中的“一天”可以是第一天的13时到第二天的13时，此时预警的时刻就是第二天的13时，监测是连续存在的。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。且上述对本说明书特定实施例进行了描述。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
