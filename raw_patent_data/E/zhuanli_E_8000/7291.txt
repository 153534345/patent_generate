标题title
超声井径的参数测量方法和超声井径随钻测井装置
摘要abst
本申请提供一种超声井径的参数测量方法、超声井径随钻测井装置和计算机可读存储介质。其中，该方法包括：获取超声回波探测器分别在相同方位、不同深度探测得到的多个超声回波时域信号；根据与目标深度相邻的深度探测得到的超声回波时域信号，对目标深度的超声回波时域信号进行滤波处理，获得目标超声回波时域信号；根据目标超声回波时域信号，确定超声回波探测器在目标深度探测的初至到时。通过本申请，解决了超声井径测量中超声回波信号中的初至到时提取难度大的问题，能够降低从超声回波信号中提取初至到时的难度。
权利要求书clms
1.一种超声井径的参数测量方法，其特征在于，包括：获取超声回波探测器分别在相同方位、不同深度探测得到的多个超声回波时域信号；根据与目标深度相邻的深度探测得到的超声回波时域信号，对所述目标深度的超声回波时域信号进行滤波处理，获得目标超声回波时域信号；根据所述目标超声回波时域信号，确定所述超声回波探测器在所述目标深度探测的初至到时。2.根据权利要求1所述的方法，其特征在于，所述多个超声回波时域信号对应的深度均匀分布，相邻两个深度之间的差值为固定数值。3.根据权利要求1所述的方法，其特征在于，根据与目标深度相邻的深度探测得到的超声回波时域信号，对所述目标深度的超声回波时域信号进行滤波处理，获得目标超声回波时域信号包括：将第i-1个深度探测得到的超声回波时域信号与第i个深度探测得到的超声回波时域信号做差，获得所述目标超声回波时域信号；或者将第i个深度探测得到的超声回波时域信号与第i+1个深度探测得到的超声回波时域信号做差，获得所述目标超声回波时域信号；其中，所述第i个深度为所述目标深度，i为大于1的整数。4.根据权利要求1所述的方法，其特征在于，根据与目标深度相邻的深度探测得到的超声回波时域信号，对所述目标深度的超声回波时域信号进行滤波处理，获得目标超声回波时域信号包括：将两倍的第i个深度探测得到的超声回波时域信号，依次与第i-1个深度和第i+1个深度探测到的超声回波时域信号做差，获得所述目标超声回波时域信号，其中，所述第i个深度为所述目标深度，i为大于1的整数。5.根据权利要求1至4中任一项所述的方法，其特征在于，根据所述目标超声回波时域信号，确定所述超声回波探测器在所述目标深度探测的初至到时包括：对所述目标超声回波时域信号进行包络检波，获得所述目标超声回波时域信号的峰值中心位置；确定所述目标超声回波时域信号的峰值中心位置对应的时间值为所述超声回波探测器在所述目标深度探测的初至到时。6.根据权利要求1至4中任一项所述的方法，其特征在于，对所述目标深度的超声回波时域信号进行滤波处理所使用的相邻的深度的超声回波时域信号为一个；根据所述目标超声回波时域信号，确定所述超声回波探测器在所述目标深度探测的初至到时包括：对所述目标超声回波时域信号进行包络检波，获得所述目标超声回波时域信号的峰值中心位置，并确定与所述峰值中心位置对应的初至到时；获取所述超声回波探测器在与所述目标深度相邻的深度探测的相邻初至到时；将两倍的与所述峰值中心位置对应的初至到时与所述相邻初至到时做差，确定所获得的差值为所述超声回波探测器在所述目标深度探测的初至到时。7.根据权利要求1至4中任一项所述的方法，其特征在于，根据所述目标超声回波时域信号，确定所述超声回波探测器在所述目标深度探测的初至到时包括：使用第一预设时长的滑动窗口在所述目标超声回波时域信号的时间域内滑动并获得与所述目标超声回波时域信号对应的能量曲线和能量比曲线；确定所述能量曲线的极大值，并在所述能量曲线的极大值大于设定阈值的情况下，在所述能量曲线的极大值对应的时间值前后各第二预设时长的搜索范围内搜索所述能量比曲线的极大值；确定所述能量比曲线的极大值对应的时间值为所述超声回波探测器在所述目标深度探测的初至到时。8.根据权利要求7所述的方法，其特征在于，在搜索到的所述能量比曲线的极大值的数量为多个的情况下，确定所述能量比曲线的极大值对应的时间值为所述超声回波探测器在所述目标深度探测的初至到时包括：获取所述超声回波探测器在与所述目标深度相邻的深度探测的相邻初至到时；确定搜索到的所述能量比曲线的多个极大值对应的多个初至到时中与所述相邻初至到时距离最远的初至到时，并将与所述相邻初至到时距离最远的初至到时作为所述超声回波探测器在所述目标深度探测的初至到时。9.一种超声井径随钻测井装置，包括电子设备和设置在钻铤表面的超声回波探测器，所述电子设备包括存储器和处理器，其特征在于，所述存储器中存储有计算机程序，所述处理器被设置为运行所述计算机程序以执行权利要求1至8中任一项所述的方法的步骤。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至8中任一项所述的方法的步骤。
说明书desc
技术领域本发明涉及随钻测井的技术领域，尤其是涉及一种超声井径的参数测量方法、超声井径随钻测井装置和计算机可读存储介质。背景技术在油气勘探开发过程中，井径测量是钻井工程参数和地层评价参数的重要组成部分，能够评价井眼稳定性以及描述油气藏特征。定向钻井过程中，通过井径值的实时获取，可以了解井眼状况，对钻井参数进行调整和优化，对提高钻井安全具有重要意义。地层评价中，井眼形状是计算固井泥浆用量的重要依据，同时，井径值也是放射性测量、电阻率测量以及声波频散分析等测量数据环境校正的关键参数。超声井径测量利用了超声波脉冲回波测距的原理，沿井眼径向发射超声波脉冲后立即切换为接收模式，通过测量超声波初至到时，并结合井眼泥浆的声速计算得到换能器到井壁的间距。超声井径测量数据处理的关键是初至到时的准确提取。传统的超声井径测量将会先通过试验获得噪声模版，通过噪声模版可以去除超声回波探测器探测到的超声回波信号中的噪声干扰。然而，由于在实际测井过程中受泥浆密度、含砂量、井壁光滑度、仪器振动等因素影响，都可能使超声回波的幅度衰减严重且环境噪声干扰叠加，采用固定的噪声模版难以有效去除超声回波信号中的噪声干扰，从而导致井壁回波初至到时提取难度增大。发明内容本申请实施例提供一种超声井径的参数测量方法、超声井径随钻测井装置和计算机可读存储介质，以至少解决超声井径测量中超声回波信号中的初至到时提取难度大的问题。一种超声井径的参数测量方法，包括：获取超声回波探测器分别在相同方位、不同深度探测得到的多个超声回波时域信号；根据与目标深度相邻的深度探测得到的超声回波时域信号，对所述目标深度的超声回波时域信号进行滤波处理，获得目标超声回波时域信号；根据所述目标超声回波时域信号，确定所述超声回波探测器在所述目标深度探测的初至到时。在其中的一些实施例中，所述多个超声回波时域信号对应的深度均匀分布，相邻两个深度之间的差值为固定数值。在其中的一些实施例中，所述固定数值为0.0762米。在其中的一些实施例中，根据与目标深度相邻的深度探测得到的超声回波时域信号，对所述目标深度的超声回波时域信号进行滤波处理，获得目标超声回波时域信号包括：将第i-1个深度探测得到的超声回波时域信号与第i个深度探测得到的超声回波时域信号做差，获得所述目标超声回波时域信号；或者将第i个深度探测得到的超声回波时域信号与第i+1个深度探测得到的超声回波时域信号做差，获得所述目标超声回波时域信号；其中，所述第i个深度为所述目标深度，i为大于1的整数。在其中的一些实施例中，根据与目标深度相邻的深度探测得到的超声回波时域信号，对所述目标深度的超声回波时域信号进行滤波处理，获得目标超声回波时域信号包括：将两倍的第i个深度探测得到的超声回波时域信号，依次与第i-1个深度和第i+1个深度探测到的超声回波时域信号做差，获得所述目标超声回波时域信号，其中，所述第i个深度为所述目标深度，i为大于1的整数。在其中的一些实施例中，在根据所述目标超声回波时域信号，确定所述超声回波探测器在所述目标深度探测的初至到时之前，所述方法还包括：对所述目标超声回波时域信号的幅值进行归一化处理。在其中的一些实施例中，根据所述目标超声回波时域信号，确定所述超声回波探测器在所述目标深度探测的初至到时包括：对所述目标超声回波时域信号进行包络检波，获得所述目标超声回波时域信号的峰值中心位置；确定所述目标超声回波时域信号的峰值中心位置对应的时间值为所述超声回波探测器在所述目标深度探测的初至到时。在其中的一些实施例中，对所述目标深度的超声回波时域信号进行滤波处理所使用的相邻的深度的超声回波时域信号为一个；根据所述目标超声回波时域信号，确定所述超声回波探测器在所述目标深度探测的初至到时包括：对所述目标超声回波时域信号进行包络检波，获得所述目标超声回波时域信号的峰值中心位置，并确定与所述峰值中心位置对应的初至到时；获取所述超声回波探测器在与所述目标深度相邻的深度探测的相邻初至到时；将两倍的与所述峰值中心位置对应的初至到时与所述相邻初至到时做差，确定所获得的差值为所述超声回波探测器在所述目标深度探测的初至到时。在其中的一些实施例中，根据所述目标超声回波时域信号，确定所述超声回波探测器在所述目标深度探测的初至到时包括：使用第一预设时长的滑动窗口在所述目标超声回波时域信号的时间域内滑动并获得与所述目标超声回波时域信号对应的能量曲线和能量比曲线；确定所述能量曲线的极大值，并在所述能量曲线的极大值大于设定阈值的情况下，在所述能量曲线的极大值对应的时间值前后各第二预设时长的搜索范围内搜索所述能量比曲线的极大值；确定所述能量比曲线的极大值对应的时间值为所述超声回波探测器在所述目标深度探测的初至到时。在其中的一些实施例中，所述第一预设时长为所述超声回波探测器发射的超声探测信号周期的3至4倍；所述第二预设时长与所述第一预设时长相等。在其中的一些实施例中，在搜索到的所述能量比曲线的极大值的数量为多个的情况下，确定所述能量比曲线的极大值对应的时间值为所述超声回波探测器在所述目标深度探测的初至到时包括：获取所述超声回波探测器在与所述目标深度相邻的深度探测的相邻初至到时；确定搜索到的所述能量比曲线的多个极大值对应的多个初至到时中与所述相邻初至到时距离最远的初至到时，并将与所述相邻初至到时距离最远的初至到时作为所述超声回波探测器在所述目标深度探测的初至到时。一种超声井径随钻测井装置，包括电子设备和设置在钻铤表面的超声回波探测器，所述电子设备包括存储器和处理器，所述存储器中存储有计算机程序，所述处理器被设置为运行所述计算机程序以执行上述的超声井径的参数测量方法的步骤。一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行上述的超声井径的参数测量方法的步骤。本申请实施例能够降低从超声回波信号中提取初至到时的难度。附图说明为了更清楚地说明本申请实施例或相关技术中的技术方案，下面将对实施例描述中所需要使用的附图作简要介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本实施例的超声井径随钻测井装置钻井时的横截面示意图。图2是本实施例的超声脉冲回波测距原理的示意图。图3是本实施例的超声井径的参数测量方法的流程图。图4是本实施例的相邻两个深度探测到的超声回波时域信号的示意图。图5是本实施例的滤波后得到的目标超声回波时域信号的示意图。图6是本实施例的滑动窗口的示意图。图7是本实施例的能量曲线和能量比曲线的示意图。图8是本实施例的超声井径的参数测量方法的优选流程图。图9是本实施例的超声井径的初至到时测量结果的示意图。图10是本实施例的超声井径随钻测井装置的结构框图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。基于本申请中的实例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实例，都属于本申请保护的范围。显而易见地，下面描述中的附图仅仅是本申请的一些示例或实施例，对于本领域的普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图将本申请应用于其他类似情景。此外，还可以理解的是，虽然这种开发过程中所作出的努力可能是复杂并且冗长的，然而对于与本申请公开的内容相关的本领域的普通技术人员而言，在本申请揭露的技术内容的基础上进行的一些设计，制造或者生产等变更只是常规的技术手段，不应当理解为本申请公开的内容不充分。在本申请中提及“实施例”意味着，结合实施例描述的特定特征、结构或特性可以包含在本申请的至少一个实施例中。在说明书中的各个位置出现该短语并不一定均是指相同的实施例，也不是与其它实施例互斥的独立的或备选的实施例。本领域技术人员显式地和隐式地理解的是，本文所描述的实施例可以与其它实施例相结合。除非另作定义，权利要求书和说明书中使用的技术术语或者科学术语应当为本申请所属技术领域内具有一般技能的人士所理解的通常意义。本申请专利申请说明书以及权利要求书中使用的“一”、“一个”、“一种”、“该”等类似词语并不表示数量限制，可表示单数或复数。“包括”或者“包含”等类似的词语意指出现在“包括”或者“包含”前面的元件或者物件涵盖出现在“包括”或者“包含”后面列举的元件或者物件及其等同元件，并不排除其他元件或者物件。“连接”或者“相连”等类似的词语并非限定于物理的或者机械的连接，而是可以包括电气的连接，不管是直接的还是间接的。本申请专利申请说明书以及权利要求书中使用的“多个”是指两个或两个以上。“和/或”，描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。字符“/”一般表示前后关联对象是一种“或”的关系。本实施例提供的超声井径的参数测量方法可以应用于任意一种已有的超声井径测量设备，而无需改变超声井径测量设备的硬件电路和机械结构。例如，该超声井径测量设备可以包括单超声换能器，也可以包括多个超声换能器。在采用单超声换能器时，单超声换能器通过螺旋扫描的方式进行测量，在实施例中可以通过提取相同方位、不同深度探测得到的多个超声回波时域信号用于超声井径的参数测量。在采用沿钻铤周向均匀分布的多个超声换能器时，多个超声换能器的方位保持不变，此时可以提取同一个超声换能器在不同深度探测得到的多个超声回波时域信号用于超声井径的参数测量。本实施例将以包含三个超声换能器的超声井径测量设备为例进行说明，而并非对本申请实施例的应用领域和应用场景的限定。图1是本实施例的超声井径随钻测井装置钻井时的横截面示意图，如图1所示，该超声井径随钻测井装置包括半径为R0的金属钻铤本体10和三个超声换能器20，最外侧的圆圈表示钻井的井眼，其外侧为地层。金属钻铤周向开槽，三个超声换能器20均匀布置在槽内，圆心角均呈120°。虽然图1示出的井眼看似正圆形，然而在实际钻井过程中井眼的横截面形状可能并非正圆形，或者金属钻铤的轴线与井眼的轴线可能不重合，因此三个超声换能器20到井壁的距离d1、d2和d3可能不相等。为了获得井眼的形状，d1、d2和d3就是待测参数。图2是本实施例的超声脉冲回波测距原理的示意图，如图2所示，基于声波旅行时间测量的超声换能器，其工作频率通常高于人类可听见的范围。超声换能器既是信号发射器也是信号接收器，其发射一个脉冲声波信号，立即切换为接收模式，在声波传播过程中遇到不同介质界面，会发生反射，称为反射回波，提取该反射回波旅行时间，即初至到时，结合介质声速，即可计算出超声换能器距井壁的间距d。图3是本实施例的超声井径的参数测量方法的流程图，如图3所示，该流程包括如下步骤：步骤S301，获取超声回波探测器分别在相同方位、不同深度探测得到的多个超声回波时域信号。在步骤S301中，上述的超声回波探测器是指工作在接收模式的超声换能器。由于本实施例中的三个超声换能器的方位均保持不变，因此，从同一个超声回波探测器就能够获得上述的上述多个超声回波时域信号。通常而言，超声换能器每下钻一定深度进行一次超声回波时域信号的采集，深度的间隔可以是均匀间隔也可以是不均匀间隔。在本实施例中，无论均匀间隔深度还是不均匀间隔深度均不作限定。在其中的一些实施例中，相邻两个深度之间的差值不超过一定阈值，以保证相邻深度之间的噪声干扰更相近，有利于后续步骤的干扰消除，从而提高参数测量的精度。该阈值例如可以是0.0762米。在另一些实施例中，上述的多个超声回波时域信号的采集深度间隔均匀分布，相邻两个采集深度之间的差值为固定数值。该固定数值也不超过一定阈值，该阈值例如也可以是0.0762米。采用固定数值的深度间隔，可以简化后续参数数据呈现的步骤，例如在呈现不同深度的参数数据时，仅需要将参数数据均匀间隔排列而不必再考虑各参数数据之间的采集深度间隔的差异。步骤S302，根据与目标深度相邻的深度探测得到的超声回波时域信号，对目标深度的超声回波时域信号进行滤波处理，获得目标超声回波时域信号。上述滤波处理的原理是：同一个超声回波探测器自身产生的噪声干扰在短时内是相同的，并且相邻的深度的地质状况相近，即因土壤等原因产生的噪声干扰也基本相同，因此，可以采用与目标深度相邻的深度探测得到的超声回波时域信号，对目标深度的超声回波时域信号进行差分滤波处理，从而获得可以用于提取初至到时的目标超声回波时域信号。由于本实施例不限于在超声回波时域信号采集的同时进行滤波处理，因此，上述与目标深度相邻的深度不仅可以是目标深度相邻的前一个采集深度，也可以是目标深度相邻的后一个采集深度，或者也可以是上述的两个深度。基于与目标深度相邻的一个深度的超声回波时域信号进行滤波处理的优势在于实现更加简单、占用更低的计算资源，而基于与目标深度相邻的前后两个深度的超声回波时域信号进行滤波处理，相当于采用前后两个探测深度的干扰来估计目标深度的干扰，因此对干扰的消除效果能够进一步提升。在基于一个相邻的深度探测到的超声回波时域信号进行滤波的情况下，上述步骤S302可以包括：将第i-1个深度探测得到的超声回波时域信号与第i个深度探测得到的超声回波时域信号做差，获得目标超声回波时域信号。或者，将第i个深度探测得到的超声回波时域信号与第i+1个深度探测得到的超声回波时域信号做差，获得目标超声回波时域信号。例如，；或者，；其中，超声换能器在某个深度处采集的原始超声脉冲回波时域信号，记为， i表示深度，j表示时间，，N表示时间采样点数。表示采用上述方式自适应滤波处理后第i个深度点在j时刻的反射回波信号。在本实施例中，深度的序号越大表示深度越深，即第i-1个深度是指目标深度之前的一个深度，第i+1个深度是指目标深度之后的一个深度。在基于两个相邻的深度探测到的超声回波时域信号进行滤波的情况下，上述步骤S302可以包括：将两倍的第i个深度探测得到的超声回波时域信号，依次与第i-1个深度和第i+1个深度探测到的超声回波时域信号做差，获得目标超声回波时域信号。例如，；其中，超声换能器在某个深度处采集的原始超声脉冲回波时域信号，记为， i表示深度，j表示时间，，N表示时间采样点数。表示采用上述方式自适应滤波处理后第i个深度点在j时刻的反射回波信号。下面将继续以基于一个相邻的深度探测到的超声回波时域信号进行滤波为例进行说明。图4是本实施例的相邻两个深度探测到的超声回波时域信号的示意图，其中曲线①为第i-1个深度探测到的超声回波时域信号，曲线②为第i个深度探测到的超声回波时域信号。每个探测到的原始的超声回波时域信号包括两个部分，如图4所示，0~100μs主要为噪声干扰，在100μs附近的波形为实际的反射回波信号。由曲线①和曲线②可以观察到0~100μs的噪声干扰波形几乎相同，这是因为同一个超声换能器在相邻的两个深度下所处的环境基本相同，因此内外部产生的噪声干扰的波形也几乎相同。虽然通常来说实际的反射回波信号的振幅或能量是大于噪声干扰信号的，如图4的曲线②所示。而在某些情况下，如图4的曲线①所示，反射回波信号的振幅甚至可能比噪声干扰信号的振幅小，在这种情形下，很容易将噪声干扰信号误判为反射回波信号，从而导致测距错误。以基于第i-1个深度探测到的超声回波时域信号进行滤波为例，图5是本实施例的滤波后得到的目标超声回波时域信号的示意图，如图5所示，该目标超声回波时域信号是图4所示的曲线①与曲线②做差得到的波形图。由于曲线①和曲线②的噪声干扰波形几乎相同，因此将两条曲线做差后噪声干扰几乎完全被消除。而两条曲线上的实际的反射回波信号也被做差值，虽然目标超声回波时域信号中的反射回波信号不再是任意一个实际探测到的反射回波信号，但是除非两个反射回波信号的波形和相位完全一致，否则这两个反射回波信号必然不会被相互抵消，又由于噪声干扰几乎被完全消除，因此，检测到目标超声回波时域信号中的反射回波信号变得更容易，从而降低检测错误的可能性。需要说明的是，两个反射回波信号做差，有可能使得做差后得到的反射回波信号的峰值增加、峰值减少或者出现两个间隔一定距离的波峰，对于峰值增加或者减少的情形，并不影响初至到时的提取。而对于出现两个间隔一定距离的波峰的情形，每个波峰都可以代表一个初至到时，也就是说，基于做差后得到的反射回波信号中的波形位置确定的初至到时有可能并非当前深度的初至到时，例如有可能是第i-1个深度或者第i+1个深度的真实的初至到时。但是可以理解的是，由于探测超声回波时域信号的深度的间距足够小，即使存在将第i-1个深度的初至到时错误当作第i个深度的初至到时的情形，在实际工况中是可以容忍的。步骤S303，根据目标超声回波时域信号，确定超声回波探测器在目标深度探测的初至到时。在获得目标超声回波时域信号后，检测该目标超声回波时域信号中能量值最大的时间即为反射回波信号达到超声换能器的时间，进而可以根据反射回波信号达到超声换能器的时间与超声换能器发射超声脉冲的时间的差值，确定目标深度的初至到时。滤波后得到的目标超声回波时域信号的幅值、能量大小不一，而检测反射回波信号的关键在于检测幅值、能量的极点，而并不关注于幅值、能量的绝对值，因此，在本实施例中可以对目标超声回波时域信号进行归一化处理，从而使得时域信号可以更加清晰的反映有效反射回波信号初至到时，降低从目标超声回波时域信号中检测反射回波信号的难度，也有利于在检测中设置用于排除干扰的统一的能量或幅值的门限值。例如，可以通过下列方式进行归一化处理，可以将目标超声回波时域信号的数值范围限制到-1.0至1.0之间：；其中，表示归一化处理后第i个深度点在j时刻反射回波信号，表示第i个深度处时域信号最大值，表示第i个深度处时域信号最小值。在上述步骤S303中，根据目标超声回波时域信号，确定超声回波探测器在目标深度探测的初至到时可以采取的检波方式包括但不限于以下至少之一的方式：包络检波、基于能量比的检波、基于能量值的检波。例如，在采用包络检波时，可以对目标超声回波时域信号进行包络检波，获得目标超声回波时域信号的峰值中心位置；然后确定目标超声回波时域信号的峰值中心位置对应的时间值为超声回波探测器在目标深度探测的初至到时。采用包络检波的方式，即使出现前述的缺陷：基于做差后得到的反射回波信号中的波形位置确定的初至到时有可能并非当前深度的初至到时，例如有可能是第i-1个深度或者第i+1个深度的真实的初至到时；此时采用包络检波的方法能够获得第i-1个深度与第i个深度的真实的初至到时的平均值作为第i个深度的初至到时的检测值。可见，包络检波的方式能够提高初至到时检测的准确性，使得目标深度的初至到时的检测值更小程度地被相邻深度的初至到时影响。在一些实施例中，还可以完全消除相邻深度的初至到时的影响。例如，步骤S303可以采用下列的方式：在对目标深度的超声回波时域信号进行滤波处理所使用的相邻的深度的超声回波时域信号为一个的情况下；可以首先对目标超声回波时域信号进行包络检波，获得目标超声回波时域信号的峰值中心位置，并确定与峰值中心位置对应的初至到时；然后获取超声回波探测器在与目标深度相邻的深度探测的相邻初至到时；最后将两倍的与峰值中心位置对应的初至到时与相邻初至到时做差，确定所获得的差值为超声回波探测器在目标深度探测的初至到时。通过上述方式，额外获取相邻的深度探测的相邻初至到时，并根据相邻初至到时对包络检波获得的初至到时进行校正，从而获得目标深度实际的初至到时。在另一些实施例中，采用能量值结合能量比检测反射回波信号。例如，步骤S303采用下列方式：首先，使用第一预设时长的滑动窗口在目标超声回波时域信号的时间域内滑动并获得与目标超声回波时域信号对应的能量曲线和能量比曲线；然后，确定能量曲线的极大值，并在能量曲线的极大值大于设定阈值的情况下，在能量曲线的极大值对应的时间值前后各第二预设时长的搜索范围内搜索能量比曲线的极大值；最后，确定能量比曲线的极大值对应的时间值为超声回波探测器在目标深度探测的初至到时。图6是本实施例的滑动窗口的示意图，图6所示的滑动窗口的范围为，T0为滑动窗口的中心，上述的第一预设时长可以为超声换能器发射超声脉冲信号周期的3至4倍。图7是本实施例的能量曲线和能量比曲线的示意图。其中，在本实施例中，能量曲线和能量比曲线上每个点的数值值通过下列公式计算：第i个深度点能量计算公式：；第i个深度点能量比计算公式： ；基于计算得到的能量曲线和能量比曲线，分别计算其极大值位置。为了排除数值较小的极大值的干扰，在本实施例中还可以设定能量阈值为，若能量曲线极大值大于等于该能量阈值，根据能量曲线极大值位置，否则忽略该极大值。在本实施例中设定的搜索范围为能量曲线上极大值位置前后的一定范围内，例如，，其中，表示搜索窗长，也即上述的第二预设时长与第一预设时长相等。在此范围内确定能量比曲线极大值位置，则可以将该位置对应的时间作为反射回波信号的初至到时T，初至到时T直接反映了超声换能器表面与井壁的间距d。在上述实施例中采用能量曲线结合能量比曲线，通过在滑动窗口内搜索极大值的方式，能够提高运算效率。对于直接进行能量比曲线上的极大值搜索的方式，在钻铤与井壁的间隙较大的情况下，有效反射回波幅度小，未被消除的微小干扰波信号会导致误识别。相较而言，在本实施例中采用能量曲线结合能量比曲线的方式，先用能量法可以有效剔除微小干扰波，再利用能量比法，能够更加准确识别有效反射回波，提高了反射回波信号识别的准确性。上述的能量曲线结合能量比曲线进行参数测量的方法示出在图8中。另外，与包络检波类似的，上述实施例也可以通过额外获取相邻深度的初至到时对目标深度的初至到时进行进一步校正，例如，在搜索到的能量比曲线的极大值的数量为多个的情况下，在确定能量比曲线的极大值对应的时间值为超声回波探测器在目标深度探测的初至到时，可以采用下列方式：首先，获取超声回波探测器在与目标深度相邻的深度探测的相邻初至到时；然后，确定搜索到的能量比曲线的多个极大值对应的多个初至到时中与相邻初至到时距离最远的初至到时，并将与相邻初至到时距离最远的初至到时作为超声回波探测器在目标深度探测的初至到时。通过上述方式，可以完全消除相邻深度的初至到时的影响。本实施例的三个超声换能器采集的超声回波时域信号都可以通过上述相同的方式获得各自的目标深度的初至到时，图9是本实施例的超声井径的初至到时测量结果的示意图。初至到时越大，表明超声换能器表面距离井壁越远，可以看出，三个不同方位的初至到时在不同深度处具有不同的变化趋势。同时，通过图9可以看出同一深度的三个超声换能器检测到的初至到时存在一定相关性，例如在2200m深度时，超声换能器1和超声换能器3均出现了较大的初至到时，而超声换能器2出现了较小的初至到时，这说明钻铤的中心朝向超声换能器2指向的方向偏移。此外，通过试验可以获得井眼泥浆声速Vmud,利用已知的金属钻铤半径R0可以求得三个不同换能器的井眼半径值R1、R2和R3，即： ；其中d1、d2和d3可由下式计算得到： ；因此，通过反射回波信号自适应初至到时信息的准确提取，能够直观反映井眼形状的变化情况。本实施例还提供了一种超声井径随钻测井装置。图10是本实施例的超声井径随钻测井装置的结构框图，如图10所示，该装置包括电子设备110和设置在钻铤表面的超声回波探测器120，电子设备110包括存储器111和处理器112，存储器中存储有计算机程序，处理器112被设置为运行计算机程序以执行上述的超声井径的参数测量方法的步骤。上述的电子设备110还可以包括通信接口113。通信接口113可以为有线接口或无线接口，用于与其他模块/设备进行通信。本实施例还提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现超声井径的参数测量方法的步骤。综上所述，通过上述实施例，至少可以取得下列有益效果：1、在干扰波消除上，多数在实验室或者地面环境采集固定的干扰波信号，井下测量时利用采集的原始信号减去该固定的干扰信号，然而，由于实际的井下测量环境，温度、压力及泥浆介质会有差异，该干扰波幅度和相位是变化的，造成较大的提取误差。本申请实施例提出的用邻近深度点信息，可以获得井下环境下的真实干扰波信号，提高了干扰波消除效果，同时增大了有效反射回波信号幅度，更利于后续初至到时的准确提取。2、在消除干扰波后的有效回波识别上，相关技术多采用能量比法，在间隙较大的情况下，有效反射回波幅度小，未被消除的微小干扰波信号会导致误识别。本申请实施例采用能量法结合能量比法，先用能量法可以有效剔除微小干扰波，再利用能量比法，能够更加准确识别有效反射回波，提高了反射回波识别的准确性。应该理解的是，虽然附图的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，其可以以其他的顺序执行。而且，附图的流程图中的至少一部分步骤可以包括多个子步骤或者多个阶段，这些子步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，其执行顺序也不必然是依次进行，而是可以与其他步骤或者其他步骤的子步骤或者阶段的至少一部分轮流或者交替地执行。以上所述仅是本申请的部分实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本申请原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本申请的保护范围。
