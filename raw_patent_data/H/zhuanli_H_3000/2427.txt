标题title
充电方法和终端设备
摘要abst
本申请提供了一种充电方法和终端设备，有利于保障终端设备在掉电中断再次接通专用快速充电器之后，以快速充电的方式进行充电，能够提高充电效率，进而提高用户体验。该方法包括：检测电压母线VBUS是否有信号；在VBUS有信号的情况下，检测数据正信号线DP和数据负信号线DM是否有信号；在DP和DM均有信号的情况下，检测外部设备的类型；在外部设备的类型为充电器类型的情况下，确定外部设备的端口是否为专用快充端口；在外部设备的端口为专用快充端口的情况下，检测外部设备的电压是否可调，同时持续检测VBUS是否有信号；若VBUS无信号，停止检测外部设备的电压是否可调，并重新检测DP和DM是否有信号。
权利要求书clms
1.一种充电方法，其特征在于，应用于终端设备，所述方法包括：检测电压母线VBUS是否有信号；在所述VBUS有信号的情况下，检测数据正信号线DP和数据负信号线DM是否有信号；在所述DP和所述DM均有信号的情况下，检测外部设备的类型，所述外部设备与所述终端设备连接；在所述外部设备的类型为充电器类型的情况下，确定所述外部设备的端口是否为专用快充端口；在所述外部设备的端口为专用快充端口的情况下，检测所述外部设备的电压是否可调，同时持续检测所述VBUS是否有信号；若所述VBUS无信号，停止检测所述外部设备的电压是否可调，并重新检测所述DP和所述DM是否有信号。2.根据权利要求1所述的方法，其特征在于，所述方法还包括：在所述外部设备的电压可调、且所述VBUS持续有信号的情况下，通过快速充电方式进行充电。3.根据权利要求1所述的方法，其特征在于，所述方法还包括：在所述外部设备的电压不可调、且所述VBUS持续有信号的情况下，通过普通充电方式进行充电。4.根据权利要求1所述的方法，其特征在于，所述检测外部设备的类型，包括：将所述DP的电压信号调高至第一预设值，在第一预设时间结束后，将所述DP的电压信号恢复；在所述第一预设时间内，检测所述DM的电压信号是否大于或等于第二预设值；在所述DM的电压信号大于或等于所述第二预设值的情况下，确定所述外部设备为充电器类型。5.根据权利要求1所述的方法，其特征在于，所述确定所述外部设备的端口是否为专用快充端口，包括：将所述DM的电压信号调高至第三预设值，在第二预设时间结束后，将所述DM的电压信号恢复；在所述第二预设时间内，检测所述DP的电压信号是否大于或等于第四预设值；在所述DP的电压信号大于或等于所述第四预设值的情况下，确定所述外部设备的端口为专用快充端口。6.根据权利要求1所述的方法，其特征在于，所述检测所述外部设备的电压是否可调，包括：将所述DP的电压信号调高至第五预设值；在第三预设时间内，检测所述DM的电压信号是否小于第六预设值；在所述DM的电压信号小于所述第六预设值的情况下，确定所述外部设备的电压可调，并将所述DP的电压信号恢复。7.根据权利要求1至6任一项所述的方法，其特征在于，所述检测所述VBUS是否有信号，包括：从所述终端设备内部的寄存器获取中断数据；基于所述中断数据，检测所述VBUS是否有信号。8.根据权利要求1至6任一项所述的方法，其特征在于，所述检测所述VBUS是否有信号，包括：检测所述终端设备内部的预设管脚上的信号；基于所述预设管脚上的信号，确定所述VBUS是否有信号。9.根据权利要求8所述的方法，其特征在于，所述基于所述预设管脚上的信号，确定所述VBUS是否有信号，包括：在所述预设管脚的信号小于或等于第七预设值的情况下，确定所述VBUS无信号。10.一种终端设备，其特征在于，包括：检测模块，用于检测电压母线VBUS是否有信号；在所述VBUS有信号的情况下，检测数据正信号线DP和数据负信号线DM是否有信号；在所述DP和所述DM均有信号的情况下，检测外部设备的类型，所述外部设备与所述终端设备连接；处理模块，用于在所述外部设备的类型为充电器类型的情况下，确定所述外部设备的端口是否为专用快充端口；所述检测模块还用于：在所述外部设备的端口为专用快充端口的情况下，检测所述外部设备的电压是否可调，同时持续检测所述VBUS是否有信号；若所述VBUS无信号，停止检测所述外部设备的电压是否可调，并重新检测所述DP和所述DM是否有信号。11.根据权利要求10所述的终端设备，其特征在于，所述处理模块还用于：在所述外部设备的电压可调、且所述VBUS持续有信号的情况下，通过快速充电方式进行充电。12.根据权利要求10所述的终端设备，其特征在于，所述处理模块还用于：在所述外部设备的电压不可调、且所述VBUS持续有信号的情况下，通过普通充电方式进行充电。13.根据权利要求10所述的终端设备，其特征在于，所述处理模块还用于：将所述DP的电压信号调高至第一预设值，在第一预设时间结束后，将所述DP的电压信号恢复；所述检测模块还用于：在所述第一预设时间内，检测所述DM的电压信号是否大于或等于第二预设值；所述处理模块还用于：在所述DM的电压信号大于或等于所述第二预设值的情况下，确定所述外部设备为充电器类型。14.根据权利要求10所述的终端设备，其特征在于，所述处理模块还用于：将所述DM的电压信号调高至第三预设值，在第二预设时间结束后，将所述DM的电压信号恢复；所述检测模块还用于：在所述第二预设时间内，检测所述DP的电压信号是否大于或等于第四预设值；所述处理模块还用于：在所述DP的电压信号大于或等于所述第四预设值的情况下，确定所述外部设备的端口为专用快充端口。15.根据权利要求10所述的终端设备，其特征在于，所述处理模块还用于：将所述DP的电压信号调高至第五预设值；所述检测模块还用于：在第三预设时间内，检测所述DM的电压信号是否小于第六预设值；所述处理模块还用于：在所述DM的电压信号小于所述第六预设值的情况下，确定所述外部设备的电压可调，并将所述DP的电压信号恢复。16.根据权利要求10至15任一项所述的终端设备，其特征在于，所述终端设备还包括：获取模块，用于从所述终端设备内部的寄存器获取中断数据；所述检测模块还用于：基于所述中断数据，检测所述VBUS是否有信号。17.根据权利要求10至15任一项所述的终端设备，其特征在于，所述检测模块还用于：检测所述终端设备内部的预设管脚上的信号；所述处理模块还用于：基于所述预设管脚上的信号，确定所述VBUS是否有信号。18.根据权利要求17所述的终端设备，其特征在于，所述处理模块还用于：在所述预设管脚的信号小于或等于第七预设值的情况下，确定所述VBUS无信号。19.一种终端设备，其特征在于，包括：处理器，所述处理器与存储器耦合，所述存储器用于存储计算机程序，当所述处理器调用所述计算机程序时，使得所述终端设备执行如权利要求1至9中任一项所述的方法。20.一种计算机可读存储介质，其特征在于，用于存储计算机程序，所述计算机程序包括用于实现如权利要求1至9中任一项所述的方法的指令。21.一种计算机程序产品，其特征在于，所述计算机程序产品中包括计算机程序代码，当所述计算机程序代码在计算机上运行时，使得所述计算机实现如权利要求1至9中任一项所述的方法。
说明书desc
技术领域本申请涉及终端技术领域，尤其涉及一种充电方法和终端设备。背景技术随着终端技术的发展，可以利用专用快速充电器对终端设备进行快速充电。用户将专用快速充电器连接上电源，并通过数据线将专用快速充电器与终端设备连接，在终端设备检测到与其连接的外部设备为专用快速充电器的情况下，可以实现快速充电。但是，若是出现用户快速插拔充电器或者充电器瞬间松动等掉电中断的情况，在终端设备再次接通专用快速充电器之后，终端设备可能会无法继续以快速充电的方式进行充电，而是以普通充电的方式进行充电，这样，影响了充电效率，进而影响了用户体验。发明内容本申请提供了一种充电方法和终端设备，有利于保障终端设备在掉电中断再次接通专用快速充电器之后，以快速充电的方式进行充电，能够提高充电效率，进而提高用户体验。第一方面，提供了一种充电方法，包括：检测电压母线是否有信号；在VBUS有信号的情况下，检测数据正信号线和数据负信号线是否有信号；在DP和DM均有信号的情况下，检测外部设备的类型，该外部设备与终端设备连接；在外部设备的类型为充电器类型的情况下，确定外部设备的端口是否为专用快充端口；在外部设备的端口为专用快充端口的情况下，检测外部设备的电压是否可调，同时持续检测VBUS是否有信号；若VBUS无信号，停止检测外部设备的电压是否可调，并重新检测DP和DM是否有信号。应理解，连接终端设备和外部设备的数据线中有四条线，包括VBUS、DP、DM以及地线，其中，VBUS用于传送电能，DP和DM用于传输数据。还应理解，在刚插上外部设备进行快充时，若终端设备检测到VBUS无信号，停止检测外部设备的电压是否可调，并重新检测DP和DM是否有信号，直到预设时间结束。在进入快充后，终端设备会继续检测VBUS是否有信号，直到充电结束。若是在进入快速充电的后出现掉电中断，终端设备会结束快速充电，继续执行上述第一方面中的步骤。本申请实施例的充电方法，通过在检测外部设备电压是否可调的过程中，持续检测VBUS是否有信号，若VBUS无信号，即表明发生了掉电中断，则终端设备停止检测外部设备电压是否可调，当终端设备再次接通专用快速充电器之后，可以重新检测DP和DM是否有信号，该方法有利于保障终端设备在掉电中断再次接通专用快速充电器之后，以快速充电的方式进行充电，能够提高充电效率，进而提高用户体验。结合第一方面，在第一方面的某些实现方式中，还包括：在外部设备的电压可调、且VBUS持续有信号的情况下，通过快速充电方式进行充电。应理解，从开始检测外部设备电压是否可调开始，到检测到外部设备电压可调为止的整个过程中，终端设备持续检测VBUS是否有信号，若VBUS持续有信号，则终端设备可以通过快速充电的方式进行充电。结合第一方面，在第一方面的某些实现方式中，还包括：在外部设备的电压不可调、且VBUS持续有信号的情况下，通过普通充电方式进行充电。结合第一方面，在第一方面的某些实现方式中，检测外部设备的类型，包括：将DP的电压信号调高至第一预设值，在第一预设时间结束后，将DP的电压信号恢复；在第一预设时间内，检测DM的电压信号是否大于或等于第二预设值；在DM的电压信号大于或等于第二预设值的情况下，确定外部设备为充电器类型。结合第一方面，在第一方面的某些实现方式中，确定外部设备的端口是否为专用快充端口，包括：将DM的电压信号调高至第三预设值，在第二预设时间结束后，将DM的电压信号恢复；在第二预设时间内，检测DP的电压信号是否大于或等于第四预设值；在DP的电压信号大于或等于第四预设值的情况下，确定外部设备的端口为专用快充端口。结合第一方面，在第一方面的某些实现方式中，检测外部设备的电压是否可调，包括：将DP的电压信号调高至第五预设值；在第三预设时间内，检测DM的电压信号是否小于第六预设值；在DM的电压信号小于第六预设值的情况下，确定外部设备的电压可调，并将DP的电压信号恢复。结合第一方面，在第一方面的某些实现方式中，检测VBUS是否有信号，包括：从终端设备内部的寄存器获取中断数据；基于中断数据，检测VBUS是否有信号。结合第一方面，在第一方面的某些实现方式中，检测VBUS是否有信号，包括：检测终端设备内部的预设管脚上的信号；基于预设管脚上的信号，确定VBUS是否有信号。应理解，预设管脚可以称为硬件中断管脚，具体可以为一个电压比较电路，用于确定VBUS信号是否有中断。结合第一方面，在第一方面的某些实现方式中，基于预设管脚上的信号，确定VBUS是否有信号，包括：在预设管脚的信号小于或等于第七预设值的情况下，确定VBUS无信号。第二方面，提供了一种终端设备，用于执行上述第一方面中任一种可能的实现方式中的方法。具体地，该终端设备包括用于执行上述第一方面中任一种可能的实现方式中的方法的模块。在一种设计中，该终端设备可以包括执行上述第一方面中所描述的方法/操作/步骤/动作所一一对应的模块，该模块可以是硬件电路，也可是软件，也可以是硬件电路结合软件实现。第三方面，提供了一种终端设备，包括：处理器和存储器，该处理器用于读取存储器中存储的指令，以执行上述第一方面中的任一种可能实现方式中的方法。可选地，处理器为一个或多个，存储器为一个或多个。可选地，存储器可以与处理器集成在一起，或者存储器与处理器分离设置。在具体实现过程中，存储器可以为非瞬时性存储器，例如只读存储器，其可以与处理器集成在同一块芯片上，也可以分别设置在不同的芯片上，本申请实施例对存储器的类型以及存储器与处理器的设置方式不做限定。上述第三方面中的终端设备可以是一个芯片，该处理器可以通过硬件来实现也可以通过软件来实现，当通过硬件实现时，该处理器可以是逻辑电路、集成电路等；当通过软件来实现时，该处理器可以是一个通用处理器，通过读取存储器中存储的软件代码来实现，该存储器可以集成在处理器中，可以位于该处理器之外，独立存在。第四方面，提供了一种计算机程序产品，计算机程序产品包括：计算机程序，当计算机程序被运行时，使得计算机执行上述第一方面中的任一种可能实现方式中的方法。第五方面，提供了一种计算机可读存储介质，该计算机可读存储介质存储有计算机程序当其在计算机上运行时，使得计算机执行上述第一方面中的任一种可能实现方式中的方法。附图说明图1是本申请实施例提供的终端设备的结构示意图；图2是本申请实施例提供的终端设备的软件结构框图；图3是本申请实施例提供的应用场景的示意图；图4是一种充电方法的示意性流程图；图5是本申请实施例提供的一种充电方法的示意性流程图；图6是本申请实施例提供的终端设备充电场景的简化电路图；图7是本申请实施例提供的另一种充电方法的示意性流程图；图8是本申请实施例提供的又一种充电方法的示意性流程图；图9是本申请实施例提供的终端设备的一种界面变化示意图；图10是本申请实施例提供的终端设备的另一种界面变化示意图；图11是本申请实施例提供的一种终端设备的示意性框图；图12是本申请实施例提供的另一种终端设备的示意性框图。具体实施方式下面将结合附图，对本申请中的技术方案进行描述。为了便于清楚描述本申请实施例的技术方案，在本申请的实施例中，采用了“第一”、“第二”等字样对功能和作用基本相同的相同项或相似项进行区分。本领域技术人员可以理解“第一”、“第二”等字样并不对数量和执行次序进行限定，并且“第一”、“第二”等字样也并不限定一定不同。需要说明的是，本申请中，“示例性地”或者“例如”等词用于表示作例子、例证或说明。本申请中被描述为“示例性地”或者“例如”的任何实施例或设计方案不应被解释为比其他实施例或设计方案更优选或更具优势。确切而言，使用“示例性地”或者“例如”等词旨在以具体方式呈现相关概念。此外，“至少一个”是指一个或者多个，“多个”是指两个或两个以上。“和/或”，描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B的情况，其中A，B可以是单数或者复数。字符“/”一般表示前后关联对象是一种“或”的关系。“以下至少一项”或其类似表达，是指的这些项中的任意组合，包括单项或复数项的任意组合。例如，a、b和c中的至少一项，可以表示：a，或b，或c，或a和b，或a和c，或b和c，或a、b和c，其中a，b，c可以是单个，也可以是多个。为了能够更好地理解本申请实施例，下面对本申请实施例的终端设备的硬件结构进行介绍。图1示出了终端设备100的结构示意图。终端设备100可以包括处理器110，外部存储器接口120，内部存储器121，通用串行总线接口130，充电管理模块140，电源管理模块141，电池142，天线1，天线2，移动通信模块150，无线通信模块160，音频模块170，扬声器170A，受话器170B，麦克风170C，耳机接口170D，传感器模块180，按键190，马达191，指示器192，摄像头193，显示屏194，以及用户标识模块卡接口195等。其中传感器模块180可以包括压力传感器180A，陀螺仪传感器180B，气压传感器180C，磁传感器180D，加速度传感器180E，距离传感器180F，接近光传感器180G，指纹传感器180H，温度传感器180J，触摸传感器180K，环境光传感器180L，骨传导传感器180M等。可以理解的是，本申请实施例示意的结构并不构成对终端设备100的具体限定。在本申请另一些实施例中，终端设备100可以包括比图示更多或更少的部件，或者组合某些部件，或者拆分某些部件，或者不同的部件布置。图示的部件可以以硬件，软件或软件和硬件的组合实现。处理器110可以包括一个或多个处理单元，例如：处理器110可以包括应用处理器，调制解调处理器，图形处理器，图像信号处理器，控制器，视频编解码器，数字信号处理器，基带处理器，和/或神经网络处理器等。其中，不同的处理单元可以是独立的器件，也可以集成在一个或多个处理器中。控制器可以根据指令操作码和时序信号，产生操作控制信号，完成取指令和执行指令的控制。处理器110中还可以设置存储器，用于存储指令和数据。在一些实施例中，处理器110中的存储器为高速缓冲存储器。该存储器可以保存处理器110刚用过或循环使用的指令或数据。如果处理器110需要再次使用该指令或数据，可从所述存储器中直接调用。避免了重复存取，减少了处理器110的等待时间，因而提高了系统的效率。在一些实施例中，处理器110可以包括一个或多个接口。接口可以包括集成电路接口，集成电路内置音频接口，脉冲编码调制接口，通用异步收发传输器接口，移动产业处理器接口，通用输入输出接口，用户标识模块接口，和/或通用串行总线接口等。I2C接口是一种双向同步串行总线，包括一根串行数据线和一根串行时钟线。在一些实施例中，处理器110可以包含多组I2C总线。处理器110可以通过不同的I2C总线接口分别耦合触摸传感器180K，充电器，闪光灯，摄像头193等。例如：处理器110可以通过I2C接口耦合触摸传感器180K，使处理器110与触摸传感器180K通过I2C总线接口通信，实现终端设备100的触摸功能。I2S接口可以用于音频通信。在一些实施例中，处理器110可以包含多组I2S总线。处理器110可以通过I2S总线与音频模块170耦合，实现处理器110与音频模块170之间的通信。在一些实施例中，音频模块170可以通过I2S接口向无线通信模块160传递音频信号，实现通过蓝牙耳机接听电话的功能。PCM接口也可以用于音频通信，将模拟信号抽样，量化和编码。在一些实施例中，音频模块170与无线通信模块160可以通过PCM总线接口耦合。在一些实施例中，音频模块170也可以通过PCM接口向无线通信模块160传递音频信号，实现通过蓝牙耳机接听电话的功能。所述I2S接口和所述PCM接口都可以用于音频通信。UART接口是一种通用串行数据总线，用于异步通信。该总线可以为双向通信总线。它将要传输的数据在串行通信与并行通信之间转换。在一些实施例中，UART接口通常被用于连接处理器110与无线通信模块160。例如：处理器110通过UART接口与无线通信模块160中的蓝牙模块通信，实现蓝牙功能。在一些实施例中，音频模块170可以通过UART接口向无线通信模块160传递音频信号，实现通过蓝牙耳机播放音乐的功能。MIPI接口可以被用于连接处理器110与显示屏194，摄像头193等外围器件。MIPI接口包括摄像头串行接口，显示屏串行接口等。在一些实施例中，处理器110和摄像头193通过CSI接口通信，实现终端设备100的拍摄功能。处理器110和显示屏194通过DSI接口通信，实现终端设备100的显示功能。GPIO接口可以通过软件配置。GPIO接口可以被配置为控制信号，也可被配置为数据信号。在一些实施例中，GPIO接口可以用于连接处理器110与摄像头193，显示屏194，无线通信模块160，音频模块170，传感器模块180等。GPIO接口还可以被配置为I2C接口，I2S接口，UART接口，MIPI接口等。USB接口130是符合USB标准规范的接口，具体可以是Mini USB接口，Micro USB接口，USB Type C接口等。USB接口130可以用于连接充电器为终端设备100充电，也可以用于终端设备100与外围设备之间传输数据。也可以用于连接耳机，通过耳机播放音频。该接口还可以用于连接其他终端设备，例如AR设备等。可以理解的是，本申请实施例示意的各模块间的接口连接关系，只是示意性说明，并不构成对终端设备100的结构限定。在本申请另一些实施例中，终端设备100也可以采用上述实施例中不同的接口连接方式，或多种接口连接方式的组合。充电管理模块140用于从充电器接收充电输入。其中，充电器可以是无线充电器，也可以是有线充电器。在一些有线充电的实施例中，充电管理模块140可以通过USB接口130接收有线充电器的充电输入。在一些无线充电的实施例中，充电管理模块140可以通过终端设备100的无线充电线圈接收无线充电输入。充电管理模块140为电池142充电的同时，还可以通过电源管理模块141为终端设备供电。电源管理模块141用于连接电池142，充电管理模块140与处理器110。电源管理模块141接收电池142和/或充电管理模块140的输入，为处理器110，内部存储器121，显示屏194，摄像头193，和无线通信模块160等供电。电源管理模块141还可以用于监测电池容量，电池循环次数，电池健康状态等参数。在其他一些实施例中，电源管理模块141也可以设置于处理器110中。在另一些实施例中，电源管理模块141和充电管理模块140也可以设置于同一个器件中。终端设备100的无线通信功能可以通过天线1，天线2，移动通信模块150，无线通信模块160，调制解调处理器以及基带处理器等实现。天线1和天线2用于发射和接收电磁波信号。终端设备100中的每个天线可用于覆盖单个或多个通信频带。不同的天线还可以复用，以提高天线的利用率。例如：可以将天线1复用为无线局域网的分集天线。在另外一些实施例中，天线可以和调谐开关结合使用。移动通信模块150可以提供应用在终端设备100上的包括2G/3G/4G/5G等无线通信的解决方案。移动通信模块150可以包括至少一个滤波器，开关，功率放大器，低噪声放大器等。移动通信模块150可以由天线1接收电磁波，并对接收的电磁波进行滤波，放大等处理，传送至调制解调处理器进行解调。移动通信模块150还可以对经调制解调处理器调制后的信号放大，经天线1转为电磁波辐射出去。在一些实施例中，移动通信模块150的至少部分功能模块可以被设置于处理器110中。在一些实施例中，移动通信模块150的至少部分功能模块可以与处理器110的至少部分模块被设置在同一个器件中。调制解调处理器可以包括调制器和解调器。其中，调制器用于将待发送的低频基带信号调制成中高频信号。解调器用于将接收的电磁波信号解调为低频基带信号。随后解调器将解调得到的低频基带信号传送至基带处理器处理。低频基带信号经基带处理器处理后，被传递给应用处理器。应用处理器通过音频设备输出声音信号，或通过显示屏194显示图像或视频。在一些实施例中，调制解调处理器可以是独立的器件。在另一些实施例中，调制解调处理器可以独立于处理器110，与移动通信模块150或其他功能模块设置在同一个器件中。无线通信模块160可以提供应用在终端设备100上的包括无线局域网网络），蓝牙，全球导航卫星系统，调频，近距离无线通信技术，红外技术等无线通信的解决方案。无线通信模块160可以是集成至少一个通信处理模块的一个或多个器件。无线通信模块160经由天线2接收电磁波，将电磁波信号调频以及滤波处理，将处理后的信号发送到处理器110。无线通信模块160还可以从处理器110接收待发送的信号，对其进行调频，放大，经天线2转为电磁波辐射出去。在一些实施例中，终端设备100的天线1和移动通信模块150耦合，天线2和无线通信模块160耦合，使得终端设备100可以通过无线通信技术与网络以及其他设备通信。所述无线通信技术可以包括全球移动通讯系统，通用分组无线服务，码分多址接入，宽带码分多址，时分码分多址，长期演进，BT，GNSS，WLAN，NFC ，FM，和/或IR技术等。所述GNSS可以包括全球卫星定位系统，全球导航卫星系统，北斗卫星导航系统，准天顶卫星系统和/或星基增强系统。终端设备100通过GPU，显示屏194，以及应用处理器等实现显示功能。GPU为图像处理的微处理器，连接显示屏194和应用处理器。GPU用于执行数学和几何计算，用于图形渲染。处理器110可包括一个或多个GPU，其执行程序指令以生成或改变显示信息。显示屏194用于显示图像，视频等。显示屏194包括显示面板。显示面板可以采用液晶显示屏，有机发光二极管，有源矩阵有机发光二极体或主动矩阵有机发光二极体，柔性发光二极管，Miniled，MicroLed，Micro-oLed，量子点发光二极管等。在一些实施例中，终端设备100可以包括1个或N个显示屏194，N为大于1的正整数。终端设备100可以通过ISP，摄像头193，视频编解码器，GPU，显示屏194以及应用处理器等实现拍摄功能。ISP 用于处理摄像头193反馈的数据。例如，拍照时，打开快门，光线通过镜头被传递到摄像头感光元件上，光信号转换为电信号，摄像头感光元件将所述电信号传递给ISP处理，转化为肉眼可见的图像。ISP还可以对图像的噪点，亮度，肤色进行算法优化。ISP还可以对拍摄场景的曝光，色温等参数优化。在一些实施例中，ISP可以设置在摄像头193中。摄像头193用于捕获静态图像或视频。物体通过镜头生成光学图像投射到感光元件。感光元件可以是电荷耦合器件或互补金属氧化物半导体光电晶体管。感光元件把光信号转换成电信号，之后将电信号传递给ISP转换成数字图像信号。ISP将数字图像信号输出到DSP加工处理。DSP将数字图像信号转换成标准的RGB，YUV等格式的图像信号。在一些实施例中，终端设备100可以包括1个或N个摄像头193，N为大于1的正整数。数字信号处理器用于处理数字信号，除了可以处理数字图像信号，还可以处理其他数字信号。例如，当终端设备100在频点选择时，数字信号处理器用于对频点能量进行傅里叶变换等。视频编解码器用于对数字视频压缩或解压缩。终端设备100可以支持一种或多种视频编解码器。这样，终端设备100可以播放或录制多种编码格式的视频，例如：动态图像专家组1，MPEG2，MPEG3，MPEG4等。NPU为神经网络计算处理器，通过借鉴生物神经网络结构，例如借鉴人脑神经元之间传递模式，对输入信息快速处理，还可以不断的自学习。通过NPU可以实现终端设备100的智能认知等应用，例如：图像识别，人脸识别，语音识别，文本理解等。外部存储器接口120可以用于连接外部存储卡，例如Micro SD卡，实现扩展终端设备100的存储能力。外部存储卡通过外部存储器接口120与处理器110通信，实现数据存储功能。例如将音乐，视频等文件保存在外部存储卡中。内部存储器121可以用于存储计算机可执行程序代码，所述可执行程序代码包括指令。内部存储器121可以包括存储程序区和存储数据区。其中，存储程序区可存储操作系统，至少一个功能所需的应用程序等。存储数据区可存储终端设备100使用过程中所创建的数据等。此外，内部存储器121可以包括高速随机存取存储器，还可以包括非易失性存储器，例如至少一个磁盘存储器件，闪存器件，通用闪存存储器等。处理器110通过运行存储在内部存储器121的指令，和/或存储在设置于处理器中的存储器的指令，执行终端设备100的各种功能应用以及数据处理。终端设备100可以通过音频模块170，扬声器170A，受话器170B，麦克风170C，耳机接口170D，以及应用处理器等实现音频功能。例如音乐播放，录音等。音频模块170用于将数字音频信息转换成模拟音频信号输出，也用于将模拟音频输入转换为数字音频信号。音频模块170还可以用于对音频信号编码和解码。在一些实施例中，音频模块170可以设置于处理器110中，或将音频模块170的部分功能模块设置于处理器110中。扬声器170A，也称“喇叭”，用于将音频电信号转换为声音信号。终端设备100可以通过扬声器170A收听音乐，或收听免提通话。受话器170B，也称“听筒”，用于将音频电信号转换成声音信号。当终端设备100接听电话或语音信息时，可以通过将受话器170B靠近人耳接听语音。麦克风170C，也称“话筒”，“传声器”，用于将声音信号转换为电信号。当拨打电话或发送语音信息时，用户可以通过人嘴靠近麦克风170C发声，将声音信号输入到麦克风170C。终端设备100可以设置至少一个麦克风170C。在另一些实施例中，终端设备100可以设置两个麦克风170C，除了采集声音信号，还可以实现降噪功能。在另一些实施例中，终端设备100还可以设置三个，四个或更多麦克风170C，实现采集声音信号，降噪，还可以识别声音来源，实现定向录音功能等。耳机接口170D用于连接有线耳机。耳机接口170D可以是USB接口130，也可以是3.5mm的开放移动终端设备平台标准接口，美国蜂窝电信工业协会标准接口。压力传感器180A用于感受压力信号，可以将压力信号转换成电信号。在一些实施例中，压力传感器180A可以设置于显示屏194。压力传感器180A的种类很多，如电阻式压力传感器，电感式压力传感器，电容式压力传感器等。电容式压力传感器可以是包括至少两个具有导电材料的平行板。当有力作用于压力传感器180A，电极之间的电容改变。终端设备100根据电容的变化确定压力的强度。当有触摸操作作用于显示屏194，终端设备100根据压力传感器180A检测所述触摸操作强度。终端设备100也可以根据压力传感器180A的检测信号计算触摸的位置。在一些实施例中，作用于相同触摸位置，但不同触摸操作强度的触摸操作，可以对应不同的操作指令。例如：当有触摸操作强度小于第一压力阈值的触摸操作作用于短消息应用图标时，执行查看短消息的指令。当有触摸操作强度大于或等于第一压力阈值的触摸操作作用于短消息应用图标时，执行新建短消息的指令。陀螺仪传感器180B可以用于确定终端设备100的运动姿态。在一些实施例中，可以通过陀螺仪传感器180B确定终端设备100围绕三个轴的角速度。陀螺仪传感器180B可以用于拍摄防抖。示例性的，当按下快门，陀螺仪传感器180B检测终端设备100抖动的角度，根据角度计算出镜头模组需要补偿的距离，让镜头通过反向运动抵消终端设备100的抖动，实现防抖。陀螺仪传感器180B还可以用于导航，体感游戏场景。气压传感器180C用于测量气压。在一些实施例中，终端设备100通过气压传感器180C测得的气压值计算海拔高度，辅助定位和导航。磁传感器180D包括霍尔传感器。终端设备100可以利用磁传感器180D检测翻盖皮套的开合。在一些实施例中，当终端设备100是翻盖机时，终端设备100可以根据磁传感器180D检测翻盖的开合。进而根据检测到的皮套的开合状态或翻盖的开合状态，设置翻盖自动解锁等特性。加速度传感器180E可检测终端设备100在各个方向上加速度的大小。当终端设备100静止时可检测出重力的大小及方向。还可以用于识别终端设备姿态，应用于横竖屏切换，计步器等应用。距离传感器180F，用于测量距离。终端设备100可以通过红外或激光测量距离。在一些实施例中，拍摄场景，终端设备100可以利用距离传感器180F测距以实现快速对焦。接近光传感器180G可以包括例如发光二极管和光检测器，例如光电二极管。发光二极管可以是红外发光二极管。终端设备100通过发光二极管向外发射红外光。终端设备100使用光电二极管检测来自附近物体的红外反射光。当检测到充分的反射光时，可以确定终端设备100附近有物体。当检测到不充分的反射光时，终端设备100可以确定终端设备100附近没有物体。终端设备100可以利用接近光传感器180G检测用户手持终端设备100贴近耳朵通话，以便自动熄灭屏幕达到省电的目的。接近光传感器180G也可用于皮套模式，口袋模式自动解锁与锁屏。环境光传感器180L用于感知环境光亮度。终端设备100可以根据感知的环境光亮度自适应调节显示屏194亮度。环境光传感器180L也可用于拍照时自动调节白平衡。环境光传感器180L还可以与接近光传感器180G配合，检测终端设备100是否在口袋里，以防误触。指纹传感器180H用于采集指纹。终端设备100可以利用采集的指纹特性实现指纹解锁，访问应用锁，指纹拍照，指纹接听来电等。温度传感器180J用于检测温度。在一些实施例中，终端设备100利用温度传感器180J检测的温度，执行温度处理策略。例如，当温度传感器180J上报的温度超过阈值，终端设备100执行降低位于温度传感器180J附近的处理器的性能，以便降低功耗实施热保护。在另一些实施例中，当温度低于另一阈值时，终端设备100对电池142加热，以避免低温导致终端设备100异常关机。在其他一些实施例中，当温度低于又一阈值时，终端设备100对电池142的输出电压执行升压，以避免低温导致的异常关机。触摸传感器180K，也称“触控器件”。触摸传感器180K可以设置于显示屏194，由触摸传感器180K与显示屏194组成触摸屏，也称“触控屏”。触摸传感器180K用于检测作用于其上或附近的触摸操作。触摸传感器可以将检测到的触摸操作传递给应用处理器，以确定触摸事件类型。可以通过显示屏194提供与触摸操作相关的视觉输出。在另一些实施例中，触摸传感器180K也可以设置于终端设备100的表面，与显示屏194所处的位置不同。骨传导传感器180M可以获取振动信号。在一些实施例中，骨传导传感器180M可以获取人体声部振动骨块的振动信号。骨传导传感器180M也可以接触人体脉搏，接收血压跳动信号。在一些实施例中，骨传导传感器180M也可以设置于耳机中，结合成骨传导耳机。音频模块170可以基于所述骨传导传感器180M获取的声部振动骨块的振动信号，解析出语音信号，实现语音功能。应用处理器可以基于所述骨传导传感器180M获取的血压跳动信号解析心率信息，实现心率检测功能。按键190包括开机键，音量键等。按键190可以是机械按键。也可以是触摸式按键。终端设备100可以接收按键输入，产生与终端设备100的用户设置以及功能控制有关的键信号输入。马达191可以产生振动提示。马达191可以用于来电振动提示，也可以用于触摸振动反馈。例如，作用于不同应用的触摸操作，可以对应不同的振动反馈效果。作用于显示屏194不同区域的触摸操作，马达191也可对应不同的振动反馈效果。不同的应用场景也可以对应不同的振动反馈效果。触摸振动反馈效果还可以支持自定义。指示器192可以是指示灯，可以用于指示充电状态，电量变化，也可以用于指示消息，未接来电，通知等。SIM卡接口195用于连接SIM卡。SIM卡可以通过插入SIM卡接口195，或从SIM卡接口195拔出，实现和终端设备100的接触和分离。终端设备100可以支持1个或N个SIM卡接口，N为大于1的正整数。SIM卡接口195可以支持Nano SIM卡，Micro SIM卡，SIM卡等。同一个SIM卡接口195可以同时插入多张卡。所述多张卡的类型可以相同，也可以不同。SIM卡接口195也可以兼容不同类型的SIM卡。SIM卡接口195也可以兼容外部存储卡。终端设备100通过SIM卡和网络交互，实现通话以及数据通信等功能。在一些实施例中，终端设备100采用eSIM，即：嵌入式SIM卡。eSIM卡可以嵌在终端设备100中，不能和终端设备100分离。终端设备100的软件系统可以采用分层架构，事件驱动架构，微核架构，微服务架构，或云架构。本申请实施例以分层架构的Android系统为例，示例性说明终端设备100的软件结构。图2是本申请实施例的终端设备100的软件结构框图。分层架构将软件分成若干个层，每一层都有清晰的角色和分工。层与层之间通过软件接口通信。在一些实施例中，将Android系统分为四层，从上至下分别为应用程序层，应用程序框架层，安卓运行时和系统库，以及内核层。应用程序层可以包括一系列应用程序包。如图2所示，应用程序包可以包括相机，图库，日历，通话，地图，导航，WLAN，蓝牙，音乐，视频，短信息等应用程序。应用程序框架层为应用程序层的应用程序提供应用编程接口和编程框架。应用程序框架层包括一些预先定义的函数。如图2所示，应用程序框架层可以包括窗口管理器，内容提供器，视图系统，电话管理器，资源管理器，通知管理器等。窗口管理器用于管理窗口程序。窗口管理器可以获取显示屏大小，判断是否有状态栏，锁定屏幕，截取屏幕等。内容提供器用来存放和获取数据，并使这些数据可以被应用程序访问。所述数据可以包括视频，图像，音频，拨打和接听的电话，浏览历史和书签，电话簿等。视图系统包括可视控件，例如显示文字的控件，显示图片的控件等。视图系统可用于构建应用程序。显示界面可以由一个或多个视图组成的。例如，包括短信通知图标的显示界面，可以包括显示文字的视图以及显示图片的视图。电话管理器用于提供终端设备100的通信功能。例如通话状态的管理。资源管理器为应用程序提供各种资源，比如本地化字符串，图标，图片，布局文件，视频文件等等。通知管理器使应用程序可以在状态栏中显示通知信息，可以用于传达告知类型的消息，可以短暂停留后自动消失，无需用户交互。比如通知管理器被用于告知下载完成，消息提醒等。通知管理器还可以是以图表或者滚动条文本形式出现在系统顶部状态栏的通知，例如后台运行的应用程序的通知，还可以是以对话窗口形式出现在屏幕上的通知。例如在状态栏提示文本信息，发出提示音，终端设备振动，指示灯闪烁等。Android Runtime包括核心库和虚拟机。Android runtime负责安卓系统的调度和管理。核心库包含两部分：一部分是java语言需要调用的功能函数，另一部分是安卓的核心库。应用程序层和应用程序框架层运行在虚拟机中。虚拟机将应用程序层和应用程序框架层的java文件执行为二进制文件。虚拟机用于执行对象生命周期的管理，堆栈管理，线程管理，安全和异常的管理，以及垃圾回收等功能。系统库可以包括多个功能模块。例如：表面管理器，媒体库，三维图形处理库，2D图形引擎等。表面管理器用于对显示子系统进行管理，并且为多个应用程序提供了2D和3D图层的融合。媒体库支持多种常用的音频，视频格式回放和录制，以及静态图像文件等。媒体库可以支持多种音视频编码格式，例如: MPEG4，H.264，MP3，AAC，AMR，JPG，PNG等。三维图形处理库用于实现三维图形绘图、图像渲染、合成和图层处理等。2D图形引擎是2D绘图的绘图引擎。内核层是硬件和软件之间的层。内核层用于驱动硬件，使得硬件工作。内核层至少包含显示驱动，屏幕驱动、图像处理器驱动、摄像头、以及传感器驱动等，本申请实施例对此不做限制。例如，屏幕驱动可以驱动屏幕亮屏或息屏。本申请实施例涉及的终端设备为具有电池的设备，可以为手机、平板电脑、个人计算机、智慧屏、人工智能音箱、耳机、车机设备以及智能手表等可穿戴终端设备，还可以是各种教学辅助工具、智能玩具、便携式机器人、个人数字助理、增强现实技术设备、虚拟现实设备等，也可以是具有移动办公功能的设备、具有智能家居功能的设备、具有影音娱乐功能的设备、支持智能出行的设备等。应理解，本申请的实施例对终端设备所采用的具体技术和具体设备形态不做限定。下面，以终端设备为手机为例，对本申请实施例的终端设备所涉及的应用场景进行介绍。图3是本申请实施例提供的应用场景300的示意图，该应用场景300可以包括手机301和专用快速充电器302，用户将专用快速充电器302与墙面的电源连接，并通过数据线将专用快速充电器302与手机301连接，在手机301检测到与其连接的外部设备为专用快速充电器302的情况下，可以实现快速充电。随着终端技术的发展，可以利用专用快速充电器对终端设备进行快速充电。目前，存在一种充电方法，在终端设备检测到与其连接的外部设备为专用快速充电器，且该专用快速充电器的电压可调的情况下，终端设备可以以快速充电的方式进行充电。下面，结合图4对目前存在的充电方法进行介绍。图4是一种充电方法400的示意性流程图。该方法400可以应用于上述场景300，由终端设备执行。方法400包括下列步骤：步骤一，检测VBUS是否有信号。应理解，连接终端设备和外部设备的数据线中有四条线，包括电压母线、数据正信号线、数据负信号线以及地线，其中，VBUS用于传送电能， DP和DM用于传输数据。步骤二，在VBUS有信号的情况下，检测DP和DM是否有信号。应理解，在VBUS无信号的情况下，终端设备不再执行下述步骤，整个流程结束，终端设备无法充电。步骤三，在DP和DM均有信号的情况下，检测外部设备是否为充电器类型。应理解，在DP和/或DM无信号的情况下，终端设备不再执行下述步骤，整个流程结束，终端设备无法充电。步骤四，在外部设备为充电器类型的情况下，检测外部设备的端口是否为快充端口。应理解，在外部设备的端口不是快充端口的情况下，终端设备以普通充电的方式进行充电。步骤五，在外部设备的端口为快充端口的情况下，检测外部设备的电压是否可调。应理解，在外部设备的电压不可调的情况下，终端设备以普通充电的方式进行充电。步骤六，在外部设备的电压可调的情况下，以快速充电的方式进行充电。但是，对于目前存在的充电方法，若是出现用户快速插拔充电器或者充电器瞬间松动等掉电中断的情况，由于步骤一至步骤四所经历的时间短，只有毫秒量级，终端设备掉电中断还没有结束或者中断之后还没有连接上专用快速充电器，步骤一到步骤四就结束了，而步骤五的时间在秒量级，所以终端设备发生掉电中断时可能已经处于步骤五的检测阶段。换句话说，终端设备在检测外部设备电压是否可调的过程中，可能得到的结果是外部设备的电压不可调。因此，在终端设备再次接通专用快速充电器之后，终端设备可能会无法继续以快速充电的方式进行充电，而是以普通充电的方式进行充电，这样，影响了充电效率，进而影响了用户体验。为了解决上述问题，本申请实施例提供了一种充电方法和终端设备，通过在检测外部设备电压是否可调的过程中，持续检测VBUS是否有信号，若VBUS无信号，即表明终端设备发生了掉电中断，当终端设备再次接通专用快速充电器之后，终端设备可以重新执行上述步骤二及之后的步骤，有利于保障终端设备在掉电中断再次接通专用快速充电器之后，以快速充电的方式进行充电，能够提高充电效率，进而提高用户体验。下面，结合图5至图10，对本申请实施例的充电方法进行介绍。图5是本申请实施例提供的一种充电方法500的示意性流程图。该方法500可以应用于上述场景300中，由终端设备执行。该方法500所涉及的终端设备的硬件结构可以如图1所示，该方法500所涉及的终端设备的软件结构可以如图2所示。方法500包括下列步骤：S501，检测VBUS是否有信号。应理解，若VBUS的电压信号在预设阈值之内，则VBUS有信号；否则，VBUS无信号。可选地，终端设备还可以通过检测VBUS的电流信号是否在预设阈值之内来判断VBUS是否有信号，本申请实施例对此不作限定。S502，在VBUS有信号的情况下，检测DP和DM是否有信号。应理解，若DP和DM的电压信号在预设时间内均在预设阈值之内，则DP和DM有信号；否则，DP和DM无信号。可选地，终端设备还可以通过检测DP和DM的电流信号是否在预设阈值之内来判断DP和DM是否有信号，本申请实施例对此不作限定。S503，在DP和DM均有信号的情况下，检测外部设备的类型，该外部设备与终端设备连接。可选地，终端设备检测外部设备的类型，可以将DP的电压信号调高至第一预设值，在第一预设时间结束后，将DP的电压信号恢复，在第一预设时间内，检测DM的电压信号是否大于或等于第二预设值，在DM的电压信号大于或等于第二预设值的情况下，终端设备确定外部设备为充电器类型。示例性地，终端设备可以将DP的电压调高至0.6V，在10ms内检测DM的电压是否大于或者等于0.4V，若持续10ms内DM的电压大于或者等于0.4V，则外部设备类型为充电器类型，否则外部设备类型为非充电器类型。在10ms结束时，终端设备将DP的电压恢复。应理解，上述示例只是示例性地给出用DP和DM的电压信号来检测外部设备的类型，终端设备还可以采用DP和DM的电流信号检测，本申请实施例对外部设备的类型的具体检测方法不作限定。还应理解，上述示例只是示例性给出第一预设值的取值0.6V、第二预设值的取值0.4V以及第一预设时间的取值10ms，第一预设值、第二预设值以及第一预设时间还可以设置为其他值，本申请实施例对此不作限定。S504，在外部设备类型为充电器类型的情况下，确定外部设备的端口是否为专用快充端口。可选地，终端设备确定外部设备的端口是否为专用快充端口，可以将DM的电压信号调高至第三预设值，在第二预设时间结束后，将DM的电压信号恢复，在第二预设时间内，检测DP的电压信号是否大于或等于第四预设值，在DP的电压信号大于或等于第四预设值的情况下，终端设备确定外部设备的端口为专用快充端口。示例性地，终端设备可以将DM的电压调高至0.6V，在10ms内检测DP的电压是否大于或者等于0.4V，若持续10ms内DP的电压大于或者等于0.4V，则外部设备的端口为专用快充端口，否则外部设备的端口为非专用快充端口。在10ms结束时，终端设备将DM的电压恢复。应理解，上述示例只是示例性地给出用DP和DM的电压信号来确定外部设备的端口是否为专用快充端口，终端设备还可以采用DP和DM的电流信号确定，本申请实施例对此不作限定。还应理解，上述示例只是示例性给出第三预设值的取值0.6V、第四预设值的取值0.4V以及第二预设时间的取值10ms，第三预设值、第四预设值以及第二预设时间还可以设置为其他值，本申请实施例对此不作限定。S505，在外部设备的端口为专用快充端口的情况下，检测外部设备的电压是否可调，同时持续检测VBUS是否有信号。可选地，在外部设备的电压可调、且VBUS持续有信号的情况下，终端设备可以通过快速充电的方式进行充电。应理解，从开始检测外部设备电压是否可调开始，到检测到外部设备电压可调为止的整个过程中，终端设备持续检测VBUS是否有信号，若VBUS持续有信号，则终端设备可以通过快速充电的方式进行充电。可选地，在外部设备的电压不可调、且VBUS持续有信号的情况下，终端设备可以通过普通充电的方式进行充电。可选地，终端设备检测外部设备的电压是否可调，可以将DP的电压信号调高至第五预设值，在第三预设时间内，检测DM的电压信号是否小于第六预设值，在DM的电压信号小于第六预设值的情况下，确定外部设备的电压可调，并将DP的电压信号恢复。示例性地，终端设备可以将DP的电压调高至0.6V，在2s内检测DM的电压是否小于0.35V，若持续2s内DM的电压大于或者等于0.35V，则外部设备的电压不可调，2s后终端设备将DP电压恢复，同时若在2s内VBUS持续有信号，则终端设备进行普通充电。若在2s内的某一刻终端设备检测到DM的电压小于0.35V，则外部设备的电压可调，此时，终端设备将DP电压恢复，且从开始检测外部设备电压是否可调开始，到检测到外部设备电压可调为止的整个过程中，在VBUS持续有信号的情况下，则终端设备进行快速充电。可选地，终端设备检测VBUS是否有信号，可以从终端设备内部的寄存器获取中断数据，基于从寄存器获取的中断数据，终端设备检测VBUS是否有信号。示例性地，上述寄存器可以称为中断寄存器，终端设备可以从中断寄存器二进制位读取数据，当VBUS无信号时，中断寄存器二进制位为1，当VBUS有信号时，中断寄存器二进制位为0，通过从中断寄存器二进制位读取的数据，终端设备可以检测VBUS是否有信号。可选地，检测VBUS是否有信号，可以检测终端设备内部的预设管脚上的信号，基于预设管脚上的信号，确定VBUS是否有信号。可选地，基于预设管脚上的信号，确定VBUS是否有信号，可以在预设管脚的信号小于或等于第七预设值的情况下，确定VBUS无信号。应理解，预设管脚可以称为硬件中断管脚，具体可以为一个电压比较电路，用于确定VBUS信号是否有中断。应理解，上述示例只是示例性地给出用DP和DM的电压信号来检测外部设备的电压是否可调，终端设备还可以采用DP和DM的电流信号来检测，本申请实施例对外部设备的电压是否可调的具体检测方法不作限定。还应理解，上述示例只是示例性给出第五预设值的取值0.6V、第六预设值的取值0.35V以及第三预设时间的取值2s，第五预设值、第六预设值以及第三预设时间还可以设置为其他值，本申请实施例对此不作限定。还应理解，上述示例只是示例性地给出寄存器中表示VBUS是否有信号的数字，表示VBUS是否有信号的数字还可以设置为其他值，本申请实施例对此不作限定。S506，若检测到VBUS无信号，停止检测外部设备的电压是否可调，并重新检测DP和DM是否有信号。应理解，若终端设备检测到VBUS无信号，停止检测外部设备的电压是否可调，并重新检测DP和DM是否有信号，直到第三预设时间结束。应理解，在进入快速充电后，终端设备会继续检测VBUS是否有信号，直到充电结束。若是在充电的过程中出现掉电中断，终端设备会结束快速充电，继续执行上述S501至S506。本申请实施例的充电方法，通过在检测外部设备电压是否可调的过程中，持续检测VBUS是否有信号，若VBUS无信号，即表明发生了掉电中断，则终端设备停止检测外部设备电压是否可调，当终端设备再次接通专用快速充电器之后，可以重新检测DP和DM是否有信号，该方法有利于保障终端设备在掉电中断再次接通专用快速充电器之后，以快速充电的方式进行充电，能够提高充电效率，进而提高用户体验。接下来结合图6，以终端设备为手机301、外部设备为专用快速充电器302为例，对上述S501~S504所涉及的内部电路进行介绍。图6是本申请实施例提供的终端设备充电场景的简化电路图。该电路包括手机301中的电路与专用快速充电器302中的电路，手机301和专用快速充电器302通过数据线连接，即通过数据线中的VBUS、DP、DM及GND连接。在S501中，手机301检测VBUS是否有信号，若VBUS电压大于或等于4.5V，则手机301确定VBUS有信号。在S502中，手机301检测DP和DM是否有信号。具体而言，手机301闭合开关2和开关6，在连通的电路上有电流源、电阻1及电阻2。电流源提供电流信号，电阻1为15 KΩ大电阻。DP和电流源相接，DM和电阻1相接，DP和DM通过电阻2相接。若DP电压小于或等于0.8V且持续时间为10 ms，则手机301确定DP和DM均有信号。在10 ms结束后，手机301将开关2和开关6复位。在S503中，手机301检测外部设备类型。具体而言，手机301闭合开关1和开关4，在连通的电路上有电压源1、电阻2及比较器2。电压源1提供电压信号，通过比较器2比较DM电压信号是否大于或等于0.4 V。DP和电压源1相接，DM和比较器2相接，DP和DM通过电阻2相接，即相当于上述的将DP电压信号调高至0.6 V，在10 ms内检测DM电压信号是否大于或等于0.4 V，若持续10 ms内DM的电压大于或者等于0.4 V，则手机301确定外部设备类型为充电器类型，否则外部设备类型为非充电器类型。在10 ms结束后，手机301将开关1和开关4复位。应理解，比较器2为能够实现比较功能的比较电路，为了方便描述，将其称为“比较器2”。在S504中，手机301确定外部设备的端口是否为专用快充端口。具体而言，手机301闭合开关3和开关5，在连通的电路上有电压源2、电阻2及比较器1。该电路由电压源2提供电压信号，通过比较器1比较DP电压信号是否大于或等于0.4 V。DM和电压源2相接，DP和比较器1相接，DM和DP通过电阻2相接，即相当于上述的将DM电压信号调高至0.6 V，在10 ms内检测DP电压信号是否大于或等于0.4 V，若持续10 ms内DP的电压大于或者等于0.4 V，则手机301确定外部设备的端口为专用快充端口。在10 ms结束后，手机301将开关3和开关5复位。应理解，比较器1为能够实现比较功能的比较电路，为了方便描述，将其称为“比较器1”。图7是本申请实施例提供的另一种充电方法700的示意性流程图。该方法700可以应用于上述场景300中，由终端设备执行。该方法700所涉及的终端设备的硬件结构可以如图1所示，该方法700所涉及的终端设备的软件结构可以如图2所示。方法700包括下列步骤：S701，检测VBUS是否有信号，若VBUS有信号，则执行S702，若VBUS无信号，则结束充电流程，不进行充电。应理解，检测VBUS是否有信号，与上述方法500中的S505相同，为避免重复，在此不再赘述。S702，检测DP和DM是否有信号，若DP和DM均有信号，则执行S703，若DP和/或DM无信号，则结束充电流程，不进行充电。应理解， DP和DM是否有信号的判断方法，与上述方法500中的S502相同，为避免重复，在此不再赘述。S703，检测外部设备是否为充电器类型，若外部设备为充电器类型，则执行S704，若外部设备为非充电器类型，则结束充电流程，不进行充电。应理解，检测外部设备是否为充电器类型，与上述方法500中的S503相同，为避免重复，在此不再赘述。S704，检测外部设备的端口是否为专用快充端口，若外部设备的端口为专用快充端口，则执行S705，若外部设备的端口为非专用快充端口，则执行S710，即以普通充电的方式进行充电。应理解，检测外部设备的端口是否为专用快充端口，与上述方法500中的S504相同，为避免重复，在此不再赘述。S705，启动计时。应理解，计时时间可以为上述第三预设时间。在启动计时后，终端设备同时执行S706和S708。应理解，S706和S708可以在终端设备内部的处理器的两个线程上。S706，检测DM电压信号是否小于第六预设值。若DM电压信号小于第六预设值，且VBUS持续有信号的情况下，不管计时结束与否，终端设备执行S707，同时停止执行S708。若DM电压信号大于或等于第六预设值，则终端设备执行S709。示例性地，若在小于或等于计时时间的情况下，终端设备检测到DM电压信号小于第六预设值，则确定外部设备电压可调，并且在VBUS持续有信号的情况下，不管计时结束与否，终端设备执行S707，同时可以在内部通过线程之间发送停止执行S708的指令。S707，以快速充电的方式进行充电。S708，检测VBUS是否有信号。若VBUS无信号，则重新执行S702及之后的步骤，同时终端设备停止执行S706，若VBUS有信号，则执S709。示例性地，若在小于或等于计时时间的情况下，终端设备检测到VBUS无信号，则重新执行S702及之后的步骤，同时可以在内部通过线程之间发送停止S706的指令。S709，确认计时是否结束，若计时结束，执行S710，若计时未结束，执行S706和S708。应理解，在DM电压信号大于或等于第六预设值，且VBUS持续有信号的情况下，若计时结束，终端设备认为外部设备电压不可调，则执行S710，若计时没有结束，终端设备同时执行S706和S708以及之后的步骤。S710，以普通充电的方式进行充电。下面，结合图8介绍在判断外部设备电压是否可调的过程中，终端设备和外部设备的交互过程。图8是本申请实施例提供的又一种充电方法800的示意性流程图。该方法800可以应用于上述充电场景300中，由终端设备执行。该方法800所涉及的终端设备的硬件结构可以如图1所示，该方法800所涉及的软件结构可以如图2所示。方法800包括下列步骤：S801，终端设备将DP电压信号调高至第五预设值。S802，在第三预设时间内，终端设备检测DM的电压信号是否小于第六预设值。S803，终端设备向外部设备发送DP电压信号值变大的消息。S804，外部设备接收DP电压信号值变大的消息，并在第四预设时间内，检测DP信号是否持续大于或等于第七预设值。应理解，第七预设值小于或者等于第五预设值，这是由于连接终端设备和外部设备的数据线上存在电压损失，在终端设备处将DP电压信号调高后，可能导致外部设备端的DP电压信号小于或等于终端设备处的DP电压信号。S805，若在第四预设时间内，DP信号持续大于或等于第七预设值，则外部设备释放DP和DM短接，并将DM接地。具体地，若在第四预设时间内，DP信号持续大于或等于第七预设值，则断开DP和DM的连接，并将DM接地，使得DM电压信号接近0。应理解，第四预设时间小于上述第三预设时间。S806，外部设备向终端设备发送DM接地的消息。S807，终端设备接收DM接地的消息，并确定外部设备的电压是否可调。具体地，终端设备接收DM接地的消息，若在第三预设时间内，检测到DM的电压小于第六预设值，则确定外部设备的电压可调。示例性地，终端设备可以将DP电压信号调高至0.6V，并开始在2s内检测DM信号是否小于0.35V，同时终端设备将DP电压信号值变大的消息发送给外部设备，外部设备接收到DP电压信号变大的消息后，在1s内检测DP的电压信号是否持续大于0.4V，若DP电压信号在1s内持续大于0.4V后，外部设备断开DP和DM的连接，并将DM接地，使DM电压信号接近于0，并向终端设备发送DM接地的消息，终端设备接收到DM接地的消息后，继续检测DM电压信号是否小于0.35V，若在2s内的某一刻检测到DM电压信号小于0.35V，则确定外部设备电压可调，以快速充电的方式充电。应理解， S802和S803~S806可以同时执行，即S802执行的过程可以贯穿S803~S806整个过程，S802还可以在S803执行之后，与S804~S806同时执行，本申请实施例对此不作限定。此外，上述各步骤并不意味着执行顺序的先后，各步骤的执行顺序应以其功能和内在逻辑确定，而不应对本申请实施例的实施过程构成任何限定。下面，以终端设备为手机301为例，结合图9和图10，对终端设备充电过程中有掉电中断，并重新接通电源后的界面变化进行介绍。一种可能的实现方式中，充电的过程中手机301处于关机状态或者锁屏状态，充电图标在手机301界面中央显示。另一种可能的实现方式中，充电的过程中由于用户需要操作手机301，手机301处于未锁屏状态，充电的图标在手机301界面右上角以小图标的形式显示。下面以充电过程中手机301处于关机状态或者锁屏状态为例，介绍终端设备充电过程中的界面变化。图9是本申请实施例提供的终端设备在充电过程中的一种界面变化的示意图。在刚插上专用快速充电器时，手机301显示图9的界面a充电图标，表示手机301处于普通充电状态。若在刚插上快速充电器302，还未进入快速充电时，手机301出现掉电中断，由于掉电中断时间短，手机301未检测到掉电充电器就连接上电源了，因此不会出现停止充电的情况，手机301显示图9的界面b，表示手机处于掉电中断状态。手机301利用本申请实施例中的充电方法检测到存在掉电中断，并再次接通专用快速充电器302之后，手机301显示图9的界面c，表示手机301处于快速充电状态。在另一种可能的实现方式中，在刚插上专用快速充电器时，手机301显示图9的界面a充电图标，表示手机301处于普通充电状态。经过本申请实施例的充电方法已经进入到快速充电中后，手机301显示图9的界面c，表示手机处于快速充电状态。若在快速充电过程中出现掉电中断，由于掉电中断时间短，手机301未检测到掉电就连接上电源了，因此不会出现停止充电的情况，手机301显示图9的界面b，表示手机处于掉电中断状态。手机301利用本申请实施例中的充电方法检测到存在掉电中断，并再次接通专用快速充电器之后，手机301显示图9的界面c，表示手机301再次处于快速充电状态。图10是本申请实施例提供的终端设备在充电过程中的另一种界面变化的示意图。在刚插上专用快速充电器时，手机301显示图10的界面a充电图标，表示手机301处于普通充电状态。若在刚插上快速充电器302，还未进入快速充电时，手机301出现掉电中断，由于掉电中断时间短，手机301未检测到掉电就连接上电源了，因此不会出现停止充电情况，手机301依然显示图10的界面a，表示手机301依然处于普通充电状态。手机301利用本申请实施例中的充电方法检测到存在掉电中断，并再次接通专用快速充电器之后，手机301显示图10的界面b，表示手机301处于快速充电状态。上文结合图5至图10详细描述了本申请实施例的充电方法，下面将结合图11和图12，详细描述本申请实施例的终端设备。图11是本申请实施例提供的一种终端设备1100，该终端设备1100包括：检测模块1101和处理模块1102。其中，检测模块1101用于：检测VBUS是否有信号；在VBUS有信号的情况下，检测DP和DM是否有信号；在DP和DM均有信号的情况下，检测外部设备的类型，该外部设备与终端设备连接；处理模块1102用于：在外部设备的类型为充电器类型的情况下，确定外部设备的端口是否为专用快充端口；检测模块1101还用于：在外部设备的端口为专用快充端口的情况下，检测外部设备的电压是否可调，同时持续检测VBUS是否有信号；若VBUS无信号，停止检测外部设备的电压是否可调，并重新检测DP和DM是否有信号。可选地，处理模块1102还用于：在外部设备的电压可调、且VBUS持续有信号的情况下，通过快速充电方式进行充电。可选地，处理模块1102还用于：在外部设备的电压不可调、且VBUS持续有信号的情况下，通过普通充电方式进行充电。可选地，处理模块1102还用于：将DP的电压信号调高至第一预设值，在第一预设时间结束后，将DP的电压信号恢复；检测模块1101还用于：在第一预设时间内，检测DM的电压信号是否大于或等于第二预设值；处理模块1102还用于：在DM的电压信号大于或等于第二预设值的情况下，确定外部设备为充电器类型。可选地，处理模块1102还用于：将DM的电压信号调高至第三预设值，在第二预设时间结束后，将DM的电压信号恢复；检测模块1101还用于：在第二预设时间内，检测DP的电压信号是否大于或等于第四预设值；处理模块1102还用于：在DP的电压信号大于或等于第四预设值的情况下，确定外部设备的端口为专用快充端口。可选地，处理模块1102还用于：将DP的电压信号调高至第五预设值；检测模块1101还用于：在第三预设时间内，检测DM的电压信号是否小于第六预设值；处理模块1102还用于：在DM的电压信号小于第六预设值的情况下，确定外部设备的电压可调，并将DP的电压信号恢复。可选地，终端设备还包括获取模块，该获取模块用于：从终端设备内部的寄存器获取中断数据；检测模块1101还用于：基于中断数据，检测VBUS是否有信号。可选地，检测模块1101还用于：检测终端设备内部的预设管脚上的信号；处理模块1102还用于：基于预设管脚上的信号，确定VBUS是否有信号。可选地，处理模块1102还用于：在预设管脚的信号小于或等于第七预设值的情况下，确定VBUS无信号。应理解，这里的终端设备1100以功能模块的形式体现。这里的术语“模块”可以指应用特有集成电路、电子电路、用于执行一个或多个软件或固件程序的处理器和存储器、合并逻辑电路和/或其它支持所描述的功能的合适组件。在一个可选例子中，本领域技术人员可以理解，终端设备1100可以具体为上述实施例中的终端设备，终端设备1100可以用于执行上述方法实施例中与终端设备对应的各个流程和/或步骤，为避免重复，在此不再赘述。图12是本申请实施例提供的另一种终端设备1200.。该终端设备1200包括：处理器1201和存储器1202。其中，处理器1201和存储器1202通过内部连接通路互相通信，该存储器1202用于存储指令，该处理器1201用于执行该存储器1202存储的指令。应理解，终端设备1200可以具体为上述实施例中的终端设备，并且可以用于执行上述方法实施例中与终端设备对应的各个步骤和/或流程。可选地，该存储器1202可以包括只读存储器和随机存取存储器，并向处理器提供指令和数据。存储器的一部分还可以包括非易失性随机存取存储器。例如，存储器还可以存储设备类型的信息。该处理器1201可以用于执行存储器中存储的指令，并且当该处理器1201执行存储器1202中存储的指令时，该处理器1201用于执行上述与该终端设备对应的方法实施例的各个步骤和/或流程。应理解，在本申请实施例中，该处理器可以是中央处理单元，该处理器还可以是其他通用处理器、数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等。在实现过程中，上述方法的各步骤可以通过处理器中的硬件的集成逻辑电路或者软件形式的指令完成。结合本申请实施例所公开的方法的步骤可以直接体现为硬件处理器执行完成，或者用处理器中的硬件及软件模块组合执行完成。软件模块可以位于随机存储器，闪存、只读存储器，可编程只读存储器或者电可擦写可编程存储器、寄存器等本领域成熟的存储介质中。该存储介质位于存储器，处理器执行存储器中的指令，结合其硬件完成上述方法的步骤。为避免重复，这里不再详细描述。本申请还提供了一种计算机可读存储介质，该计算机可读存储介质用于存储计算机程序，该计算机程序用于实现上述实施例中与终端设备对应的方法。本申请还提供了一种计算机程序产品，该计算机程序产品包括计算机程序，当该计算机程序在计算机上运行时，该计算机可以执行上述实施例所示的终端设备所对应的方法。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各示例的模块及算法步骤，能够以电子硬件、或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的系统、装置和模块的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。在本申请所提供的几个实施例中，应该理解到，所揭露的系统、装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述模块的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个模块或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或模块的间接耦合或通信连接，可以是电性，机械或其它的形式。所述作为分离部件说明的模块可以是或者也可以不是物理上分开的，作为模块显示的部件可以是或者也可以不是物理模块，即可以位于一个地方，或者也可以分布到多个网络模块上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能模块可以集成在一个处理模块中，也可以是各个模块单独物理存在，也可以两个或两个以上模块集成在一个模块中。所述功能如果以软件功能模块的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上所述，仅为本申请的具体实施方式，但本申请实施例的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请实施例揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请实施例的保护范围之内。因此，本申请实施例的保护范围应所述以权利要求的保护范围为准。
