标题title
视频传输方法、视频传输装置以及计算机可读存储介质
摘要abst
本申请提供一种视频传输方法、视频传输装置以及计算机可读存储介质。该视频传输方法包括：响应于视频传输指令，获取目标监控设备的第一当天可用流量；在所述第一当天可用流量小于等于预设流量阈值时，获取所述目标监控设备的邻居监控设备的第二当前可用流量；根据所述邻居监控设备的第二当前可用流量，确定所述目标监控设备的最优邻居监控设备；将所述视频传输指令发送至所述目标监控设备以及所述最优邻居监控设备，以使所述目标监控设备将视频数据传输至所述最优邻居监控设备，由所述最优邻居监控设备向所述监控平台上传所述视频数据。通过上述方式，视频传输装置通过流量均衡策略实现视频数据的高可靠传输，实现了监控设备集群的流量共享。
权利要求书clms
1.一种视频传输方法，其特征在于，所述视频传输方法应用于一种监控平台，所述视频传输方法包括：响应于视频传输指令，获取目标监控设备的第一当天可用流量；在所述第一当天可用流量小于等于预设流量阈值时，获取所述目标监控设备的邻居监控设备的第二当前可用流量；根据所述邻居监控设备的第二当前可用流量，确定所述目标监控设备的最优邻居监控设备；将所述视频传输指令发送至所述目标监控设备以及所述最优邻居监控设备，以使所述目标监控设备将视频数据传输至所述最优邻居监控设备，由所述最优邻居监控设备向所述监控平台上传所述视频数据。2.根据权利要求1所述的视频传输方法，其特征在于，所述视频传输指令由所述目标监控设备触发本地唤醒生成，或者由用户端基于用户针对所述目标监控设备的拉流指令生成。3.根据权利要求1所述的视频传输方法，其特征在于，所述将所述视频传输指令发送至所述目标监控设备以及所述最优邻居监控设备，包括：基于所述视频传输指令，确定所述最优邻居监控设备的热点参数；将所述视频传输指令和热点参数发送至所述目标监控设备以及所述最优邻居监控设备，以使所述最优邻居监控设备按照所述热点参数开启热点网络，以及所述目标监控设备按照所述热点参数连接所述热点网络。4.根据权利要求1所述的视频传输方法，其特征在于，所述获取目标监控设备的第一当天可用流量之前，所述视频传输方法还包括：获取所述目标监控设备的流量套餐，其中，所述流量套餐包括每月可用流量；按照当前月份的天数以及所述每月可用流量，计算当前月份的每天可用流量；所述获取目标监控设备的第一当前可用流量包括：获取所述目标监控设备前一天剩余可用流量；利用所述前一天剩余可用流量以及所述当前月份的每天可用流量，确定所述第一当前可用流量。5.根据权利要求1或4所述的视频传输方法，其特征在于，所述获取目标监控设备的第一当天可用流量之后，所述视频传输方法还包括：在所述第一当前可用流量小于等于所述预设流量阈值，且不存在任意一个邻居监控设备的第二当前可用流量大于所述预设流量阈值时，将所述视频传输指令发送至所述目标监控设备，以使所述目标监控设备使用未来的可用流量上传所述视频数据，和/或所述目标监控设备降低上传所述视频数据的码流参数。6.根据权利要求1或4所述的视频传输方法，其特征在于，所述根据所述邻居监控设备的第二当前可用流量，确定所述目标监控设备的最优邻居监控设备，包括：将所述目标监控设备的邻居监控设备中第二当前可用流量大于所述预设流量阈值的一个，确定为所述最优邻居监控设备。7.根据权利要求6所述的视频传输方法，其特征在于，所述将所述目标监控设备的邻居监控设备中第二当前可用流量大于所述预设流量阈值的一个，确定为所述最优邻居监控设备，包括：获取所述第二当前可用流量大于所述预设流量阈值的候选邻居监控设备；将所述候选邻居监控设备中处于拉流模式下的邻居监控设备，确定为所述最优邻居监控设备。8.根据权利要求6所述的视频传输方法，其特征在于，所述将所述目标监控设备的邻居监控设备中第二当前可用流量大于所述预设流量阈值的一个，确定为所述最优邻居监控设备，包括：获取所述第二当前可用流量大于所述预设流量阈值的候选邻居监控设备；将所述候选邻居监控设备中运营商类型与所述目标监控设备的运营商类型不同的邻居监控设备，确定为所述最优邻居监控设备。9.一种视频传输装置，其特征在于，所述视频传输装置包括处理器和存储器，所述存储器中存储有程序数据，所述处理器用于执行所述程序数据以实现如权利要求1-8任一项所述的视频传输方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质用于存储程序数据，所述程序数据在被处理器执行时，用以实现权利要求1-8任一项所述的视频传输方法。
说明书desc
技术领域本申请涉及蜂窝网络无线传输技术领域，特别是涉及一种视频传输方法、视频传输装置以及计算机可读存储介质。背景技术蜂窝监控设备被广泛应用到各行各业，如公园、地铁、码头等关键场所都使用了基于蜂窝网络的监控设备。蜂窝5G超大带宽、低时延的网络特性为4K、8K等超高清视频传输带来可能，极大的提高了施工便捷性，无需部署网线，只需接入SIM卡即可快速接入外部网络，将摄像头采集的数据实时传输到平台。蜂窝5G带来便捷的同时，也存在着一些问题，如当前流量资费较贵，每个SIM卡都是按月提供流量套餐，超出套餐部分将会大幅降速无法满足视频传输需求，同时超出部分用户需花费更高流量成本。蜂窝监控设备很多应用在无网、无电场景，因此会配备太阳能充电板，在无监控需求时间段处于休眠状态，当感应到有人等过来或者远端平台视频请求时，唤醒设备进行视频传输。显然，不同时段、不同位置每个监控设备唤醒时长及唤醒次数都是动态变化的，因此消耗的流量也是不均衡的，当前亟需提供一种蜂窝流量均衡且保证视频可靠传输的方法。发明内容本申请提供了一种视频传输方法、视频传输装置以及计算机可读存储介质。本申请提供了一种视频传输方法，所述视频传输方法应用于一种监控平台，所述视频传输方法包括：响应于视频传输指令，获取目标监控设备的第一当天可用流量；在所述第一当天可用流量小于等于预设流量阈值时，获取所述目标监控设备的邻居监控设备的第二当前可用流量；根据所述邻居监控设备的第二当前可用流量，确定所述目标监控设备的最优邻居监控设备；将所述视频传输指令发送至所述目标监控设备以及所述最优邻居监控设备，以使所述目标监控设备将视频数据传输至所述最优邻居监控设备，由所述最优邻居监控设备向所述监控平台上传所述视频数据。其中，所述视频传输指令由所述目标监控设备触发本地唤醒生成，或者由用户端基于用户针对所述目标监控设备的拉流指令生成。其中，所述将所述视频传输指令发送至所述目标监控设备以及所述最优邻居监控设备，包括：基于所述视频传输指令，确定所述最优邻居监控设备的热点参数；将所述视频传输指令和热点参数发送至所述目标监控设备以及所述最优邻居监控设备，以使所述最优邻居监控设备按照所述热点参数开启热点网络，以及所述目标监控设备按照所述热点参数连接所述热点网络。其中，所述获取目标监控设备的第一当天可用流量之前，所述视频传输方法还包括：获取所述目标监控设备的流量套餐，其中，所述流量套餐包括每月可用流量；按照当前月份的天数以及所述每月可用流量，计算当前月份的每天可用流量；所述获取目标监控设备的第一当前可用流量包括：获取所述目标监控设备前一天剩余可用流量；利用所述前一天剩余可用流量以及所述当前月份的每天可用流量，确定所述第一当前可用流量。其中，所述获取目标监控设备的第一当天可用流量之后，所述视频传输方法还包括：在所述第一当前可用流量小于等于所述预设流量阈值，且不存在任意一个邻居监控设备的第二当前可用流量大于所述预设流量阈值时，将所述视频传输指令发送至所述目标监控设备，以使所述目标监控设备使用未来的可用流量上传所述视频数据，和/或所述目标监控设备降低上传所述视频数据的码流参数。其中，所述根据所述邻居监控设备的第二当前可用流量，确定所述目标监控设备的最优邻居监控设备，包括：将所述目标监控设备的邻居监控设备中第二当前可用流量大于所述预设流量阈值的一个，确定为所述最优邻居监控设备。其中，所述将所述目标监控设备的邻居监控设备中第二当前可用流量大于所述预设流量阈值的一个，确定为所述最优邻居监控设备，包括：获取所述第二当前可用流量大于所述预设流量阈值的候选邻居监控设备；将所述候选邻居监控设备中处于拉流模式下的邻居监控设备，确定为所述最优邻居监控设备。其中，所述将所述目标监控设备的邻居监控设备中第二当前可用流量大于所述预设流量阈值的一个，确定为所述最优邻居监控设备，包括：获取所述第二当前可用流量大于所述预设流量阈值的候选邻居监控设备；将所述候选邻居监控设备中运营商类型与所述目标监控设备的运营商类型不同的邻居监控设备，确定为所述最优邻居监控设备。本申请还提供了一种视频传输装置，所述视频传输装置包括处理器和存储器，所述存储器中存储有程序数据，所述处理器用于执行所述程序数据以实现如上述的视频传输方法。本申请还提供了一种计算机可读存储介质，所述计算机可读存储介质用于存储程序数据，所述程序数据在被处理器执行时，用以实现上述的视频传输的视频传输方法。本申请的有益效果是：监控平台响应于视频传输指令，获取目标监控设备的第一当天可用流量；在所述第一当天可用流量小于等于预设流量阈值时，获取所述目标监控设备的邻居监控设备的第二当前可用流量；根据所述邻居监控设备的第二当前可用流量，确定所述目标监控设备的最优邻居监控设备；将所述视频传输指令发送至所述目标监控设备以及所述最优邻居监控设备，以使所述目标监控设备将视频数据传输至所述最优邻居监控设备，由所述最优邻居监控设备向所述监控平台上传所述视频数据。通过上述方式，视频传输装置通过流量均衡策略实现视频数据的高可靠传输，实现了监控设备集群的流量共享。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。其中：图1是本申请提供的视频传输系统一实施例的框架示意图；图2是本申请提供的视频传输方法一实施例的流程示意图；图3是本申请提供的视频传输方法的整体流程示意图；图4是本申请提供的平台最优通道选择逻辑的流程示意图；图5是本申请提供的视频传输装置一实施例的结构示意图；图6是本申请提供的计算机可读存储介质一实施例的结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅是本申请的一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。本申请主要解决设备流量套餐固定，设备突发情况多造成流量超预期后欠费停机无法传输视频或者超过用户流量套餐额外花费大量SIM资费的问题，具体提供一种基于流量均衡策略实现视频高可靠传输的系统和方法。具体请参阅图1至图3，图1是本申请提供的视频传输系统一实施例的框架示意图，图2是本申请提供的视频传输方法一实施例的流程示意图，图3是本申请提供的视频传输方法的整体流程示意图。其中，本申请的视频传输方法应用于一种视频传输装置，其中，本申请的视频传输装置可以为服务器，也可以为由服务器和终端设备相互配合的系统。相应地，视频传输装置包括的各个部分，例如各个单元、子单元、模块、子模块可以全部设置于服务器中，也可以分别设置于服务器和终端设备中。进一步地，上述服务器可以是硬件，也可以是软件。当服务器为硬件时，可以实现成多个服务器组成的分布式服务器集群，也可以实现成单个服务器。当服务器为软件时，可以实现成多个软件或软件模块，例如用来提供分布式服务器的软件或软件模块，也可以实现成单个软件或软件模块，在此不做具体限定。在一些可能的实现方式中，本申请实施例的视频传输的模型训练方法可以通过处理器调用存储器中存储的计算机可读指令的方式来实现。在本申请实施例中，视频传输装置具体可以为在图1所示的监控平台或云平台。如图1所述，本申请提供的视频传输系统主要涉及低功耗设备集群，本实施例中以设备A、设备B、设备C和设备D进行举例。低功耗设备上电后依次通过蜂窝网络4G或者5G模块注册到云平台。同时各监控户设备开启WIFi热点模式并进行周围热点的扫描，用于发现周围的邻居监控设备信息。初次接入平台时需要上报当前监控设备的流量套餐信息和邻居监控设备信息。同时在监控设备部署安装时，SIM卡运营商类型需要交叉部署，在同一部署区域内设备需要安装不同运营商的卡，如上述系统示例图该区域内有设备A、设备B、设备C、设备D，设备A可以安装移动SIM卡、设备B安装联通SIM卡、设备C安装电信SIM卡、设备D安装电信SIM卡，保证任何时刻至少存在1路备用蜂窝通道。具体而言，如图2所示，本申请实施例的视频传输方法具体包括以下步骤：步骤S11：响应于视频传输指令，获取目标监控设备的第一当天可用流量。在本申请实施例中，如图3所示，监控平台接收的视频传输指令的主要来源主要包括用户端和监控设备端，具体地，视频传输指令可以由目标监控设备触发本地唤醒生成，也可以由用户端基于用户针对目标监控设备的拉流指令生成。具体地，假设某一时刻监控设备D的PIR传感器感应到有人经过，则触发本地唤醒，设备开始将采集到的码流信息实时推动到云平台。如果设备监测到画面一直有变动则持续向云平台传输码流，传输码流过程中设备会定期更新当前剩余流量信息。在另一种实施方式中，假设某一时刻用户通过手机APP远程唤醒设备C进行拉流，同样可以在云平台端生成视频传输指令。需要说明的是，本申请提及的剩余流量以及可用流量以天为单位记录。假设该监控设备安装的SIM卡月套餐为31GB，则平均每天可使用1GB，设备第N天的剩余流量为：当天可用的1GB+第N-1天剩余的可用流量。如果当天需上传的码流较多，随着拉流时间的增长，当天可用剩余流量会逐渐变为0。具体地，云平台根据视频传输指令确定低功耗监控设备集群中需要进行视频数据拉流的目标监控设备的第一当前可用流量。步骤S12：在第一当天可用流量小于等于预设流量阈值时，获取目标监控设备的邻居监控设备的第二当前可用流量。在本申请实施例中，当目标监控设备的第一当前可用流量小于等于预设流量阈值，例如第一当前可用流量小于等于0时，云平台会启动综合调度，确认当前设备是否有其他传输通道进行码流传输。此时，云平台即可获取目标监控设备的邻居监控设备的第二当前可用流量。当目标监控设备的第一当前可用流量大于预设流量阈值，例如第一当前可用流量大于0时，云平台直接唤醒目标监控设备，由目标监控设备通过自身的蜂窝网络进行视频传输。步骤S13：根据邻居监控设备的第二当前可用流量，确定目标监控设备的最优邻居监控设备。在本申请实施例中，当目标监控设备的所有邻居监控设备的第二当前可用流量均小于等于预设流量阈值时，即确认目标监控设备没有其他传输通道，此时，目标监控设备则需要透支本设备的未来流量即第N+1天的甚至第N+2天的继续进行码流传输，此时该设备的可用剩余流量标记为负值，透支未来天数多少则负值多少。进一步地，如果剩余流量为负值且仍需继续传输码流则设备降低码流参数，降低传输数据量。当目标监控设备的所有邻居监控设备中存在至少一个邻居监控设备的第二当前可用流量大于预设流量阈值时，即确认目标监控设备有其他传输通道，此时，目标监控设备直接将第二当前可用流量最大的邻居监控设备作为最优邻居监控设备，借助最优邻居监控设备的传输通道上传目标监控设备的视频数据。在一种具体的实施方式中，云平台也可以采用如图4所述的平台最优通道选择逻辑在所有邻居监控设备中选择最优邻居监控设备。具体地，如图4所示，在目标监控设备的当前剩余可用流量M小于等于0时，云平台获取目标监控设备的所有邻居监控设备的当前状态信息，包括是否处于拉流模式，以及当前剩余流量等。云平台判断是否存在邻居监控设备有可用剩余流量，若没有则降低码流参数，预支未来天数的流量进行拉流。若存在邻居监控设备有可用剩余流量，优先判断是否存在处于拉流模式下的邻居监控设备，且当前可用剩余流量足以给目标监控设备拉流。若存在，即可将该邻居监控设备为最优邻居监控设备；若不存在，继续判断是否存在处于休眠模式，且当前可用剩余流量足以给目标监控设备拉流的邻居监控设备。若存在，即可将该邻居监控设备为最优邻居监控设备。在其他实施方式中，云平台也可以在确定存在邻居监控设备有可用剩余流量时，在有当前可用剩余流量足以给目标监控设备拉流的邻居监控设备中优先选择与目标监控设备的运营商类型不同的邻居监控设备作为最优邻居监控设备。例如，目标监控设备的运营商类型为移动时，最优邻居监控设备的运营商类型可以为联通或者电信。通过监控设备SIM卡运营商类型的差异化部署和平台最优通道选择逻辑，能够保证每一运营商类型的传输通道能够实现流量共享，提高每个传输通道的利用率。步骤S14：将视频传输指令发送至目标监控设备以及最优邻居监控设备，以使目标监控设备将视频数据传输至最优邻居监控设备，由最优邻居监控设备向监控平台上传视频数据。在本申请实施例中，如图3所示，通过上述步骤确定目标监控设备的最优邻居监控设备之后，云平台即可唤醒最优邻居监控设备，利用最优邻居监控设备提供的传输通道，上传所述目标监控设备的视频数据。具体地，云平台通知选中为最优节点的邻居设备开启wifi热点，其中，热点参数包括但不限于：wifi ssid、鉴权参数由均由平台指定，同时将热点参数通知给目标监控设备去进行wifi连接。当目标监控设备的wifi连接OK后将码流由蜂窝网络传输切换至邻居监控设备wifi网络传输，然后，最优邻居监控设备收到的视频码流也会通过最优邻居监控设备的蜂窝网络转发至云平台。同样，目标监控设备拉流结束后会通知云平台进入休眠模式，此时，最优邻居监控设备关闭热点网络也进入休眠。在其他实施例中，最优邻居监控设备的热点参数也可以由自身的设备确定，由最优邻居监控设备上传至云平台，或者直接发送给目标监控设备。在本申请实施例中，监控平台，即云平台响应于视频传输指令，获取目标监控设备的第一当天可用流量；在所述第一当天可用流量小于等于预设流量阈值时，获取所述目标监控设备的邻居监控设备的第二当前可用流量；根据所述邻居监控设备的第二当前可用流量，确定所述目标监控设备的最优邻居监控设备；将所述视频传输指令发送至所述目标监控设备以及所述最优邻居监控设备，以使所述目标监控设备将视频数据传输至所述最优邻居监控设备，由所述最优邻居监控设备向所述监控平台上传所述视频数据。通过上述方式，视频传输装置通过流量均衡策略实现视频数据的高可靠传输，实现了监控设备集群的流量共享。本申请设计了一种基于流量均衡策略实现视频高可靠传输的系统和方法，通过设备SIM卡运营商类型的差异化部署、以天为单位的流量分配策略及蜂窝网络可承载上行带宽信息的实时上报以及云平台的综合调度，实现了在WiFI可覆盖范围内设备集群的流量共享。云平台通过当前剩余流量、当前蜂窝网络可承载上行带宽及节能角度，尽可能减少唤醒次数综合决策，选择最优网络通道来调度设备进行视频传输，特别的流量共享前提为不影响邻居节点视频传输性能，如无满足要求邻居节点则透支该设备未来天数的流量进行低画质视频传输直至有剩余流量或者有邻居节点支持转发。本领域技术人员可以理解，在具体实施方式的上述方法中，各步骤的撰写顺序并不意味着严格的执行顺序而对实施过程构成任何限定，各步骤的具体执行顺序应当以其功能和可能的内在逻辑确定。为实现上述实施例的视频传输方法，本申请还提出了一种视频传输装置，具体请参阅图5，图5是本申请提供的视频传输装置一实施例的结构示意图。本申请实施例的视频传输装置300包括存储器31和处理器32，其中，存储器31和处理器32耦接。存储器31用于存储程序数据，处理器32用于执行程序数据以实现上述实施例所述的视频传输方法。在本实施例中，处理器32还可以称为CPU。处理器32可能是一种集成电路芯片，具有信号的处理能力。处理器32还可以是通用处理器、数字信号处理器、专用集成电路、现场可编程门阵列或者其它可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。通用处理器可以是微处理器或者该处理器32也可以是任何常规的处理器等。为实现上述实施例的视频传输方法，本申请还提供了一种计算机可读存储介质，如图6所示，计算机可读存储介质400用于存储程序数据41，程序数据41在被处理器执行时，用以实现如上述实施例所述的视频传输的视频传输方法。本申请还提供一种计算机程序产品，其中，上述计算机程序产品包括计算机程序，上述计算机程序可操作来使计算机执行如本申请实施例所述的视频传输方法。该计算机程序产品可以为一个软件安装包。本申请上述实施例所述的视频传输方法，在实现时以软件功能单元的形式存在并作为独立的产品销售或使用时，可以存储在装置中，例如一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备或处理器执行本发明各个实施方式所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上所述仅为本申请的实施方式，并非因此限制本申请的专利范围，凡是利用本申请说明书及附图内容所作的等效结构或等效流程变换，或直接或间接运用在其他相关的技术领域，均同理包括在本申请的专利保护范围内。
