标题title
近场通信的方法和装置、主控设备、NFC芯片和NFC设备
摘要abst
本申请提供一种近场通信的方法和装置、主控设备、NFC芯片和NFC设备，能够有效解决NFC芯片中非硬件损坏的原因导致的通信异常，且不影响用户体验。所述方法应用于NFC芯片，所述NFC芯片与主控设备连接，所述方法包括：确定所述NFC芯片发生异常；控制所述NFC芯片进入静置待用态，并在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块；设置唤醒源，以使所述NFC芯片在预定时长后从所述静置待用态唤醒；向所述主控设备发送异常指示信息，所述异常指示信息用于指示所述NFC芯片发生异常；接收所述主控设备响应于所述异常指示信息发送的配置参数，以使所述NFC芯片在唤醒后根据所述配置参数进行近场通信。
权利要求书clms
1.一种近场通信NFC的方法，其特征在于，所述方法应用于NFC芯片，所述NFC芯片与主控设备连接，所述方法包括：确定所述NFC芯片发生异常；控制所述NFC芯片进入静置待用态，并在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块；设置唤醒源，以使所述NFC芯片在预定时长后从所述静置待用态唤醒；向所述主控设备发送异常指示信息，所述异常指示信息用于指示所述NFC芯片发生异常；接收所述主控设备响应于所述异常指示信息发送的配置参数，以使所述NFC芯片在唤醒后根据所述配置参数进行近场通信。2.根据权利要求1所述的方法，其特征在于，所述确定所述NFC芯片发生异常，包括：检测所述NFC芯片的硬件模块的状态机；若所述状态机的状态与预期状态不同，确定所述NFC芯片发生异常。3.根据权利要求1所述的方法，其特征在于，所述确定所述NFC芯片发生异常，包括：检测所述NFC芯片的状态寄存器；若所述状态寄存器的值与期望值不同，确定所述NFC芯片发生异常。4.根据权利要求1至3中任一项所述的方法，其特征在于，所述方法还包括：在确定所述NFC芯片发生异常时，关闭所述NFC芯片中已开启的时钟和功能，以使所述NFC芯片进入低功耗模式。5.根据权利要求1至3中任一项所述的方法，其特征在于，所述方法还包括：在确定所述NFC芯片发生异常时，控制所述NFC芯片中未发生异常的硬件模块进入初始态。6.根据权利要求1至3中任一项所述的方法，其特征在于，在所述控制所述NFC芯片进入静置待用态之前，所述方法还包括：清除所述NFC芯片在发生异常之前使用的配置参数。7.根据权利要求1至3中任一项所述的方法，其特征在于，在所述控制所述NFC芯片进入静置待用态之前，所述方法还包括：处理完毕当前正在执行的操作。8.根据权利要求7所述的方法，其特征在于，所述NFC芯片采用实时操作系统RTOS，所述处理完毕当前正在执行的操作，包括：处理完毕当前正在执行的消息或者事件。9.根据权利要求1至3中任一项所述的方法，其特征在于，所述在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块，包括：对所述NFC芯片中发生异常的硬件模块的电源进行复位，以使所述发生异常的硬件模块进入初始态。10.根据权利要求1至3中任一项所述的方法，其特征在于，所述异常指示信息中携带所述NFC芯片发生异常的原因。11.根据权利要求1至3中任一项所述的方法，其特征在于，所述主控设备用于在接收到所述异常指示信息后重置用于近场通信的协议栈并发送所述配置参数，且在此过程中保持近场通信的应用程序与服务进程之间的连接。12.根据权利要求1至3中任一项所述的方法，其特征在于，所述唤醒源包括定时器，所述唤醒源用于在所述定时器的定时时长结束后将所述NFC芯片从所述静置待用态唤醒。13.根据权利要求1至3中任一项所述的方法，其特征在于，所述唤醒源用于在近场通信时射频信号的场强满足预定条件时，将所述NFC芯片从所述静置待用态唤醒。14.根据权利要求1至3中任一项所述的方法，其特征在于，所述唤醒源包括所述主控设备发送的唤醒消息，其中，在确定所述NFC芯片发生异常后，所述方法还包括：向所述主控设备发送唤醒通知，以使所述主控设备根据所述唤醒通知，在所述预定时长后向所述NFC芯片发送所述唤醒消息，所述唤醒消息用于将所述NFC芯片从所述静置待用态唤醒。15.根据权利要求14所述的方法，其特征在于，所述唤醒消息包括以下消息中的至少一种：内部集成电路I2C通信接口的消息、串行外设接口SPI通信接口的消息、单线协议SWP通信接口的消息、通用输入输出GPIO通信接口的消息。16.根据权利要求1至3中任一项所述的方法，其特征在于，所述唤醒源用于根据所述NFC芯片的电源电平的变化，触发所述NFC芯片从所述静置待用态唤醒。17.根据权利要求1至3中任一项所述的方法，其特征在于，所述配置参数包括以下参数中的至少一种：NFC的标识符、用于表示NFC技术的参数、用于表示传输速率或帧长度的参数、以及天线的射频RF特征参数。18.根据权利要求1至3中任一项所述的方法，其特征在于，在确定所述NFC芯片发生异常之前，所述方法还包括：对所述NFC芯片的硬件模块进行测试，并根据测试结果确定所述NFC芯片的硬件模块未出现物理损伤。19.根据权利要求1至3中任一项所述的方法，其特征在于，所述NFC芯片应用于卡模拟CE模式、读卡器RW模式或者点对点P2P模式的NFC设备。20.根据权利要求1至3中任一项所述的方法，其特征在于，所述主控设备包括设备主机DH、安全芯片SE、通用集成电路卡UICC或者用户身份模块SIM卡。21.一种近场通信NFC的方法，其特征在于，应用于主控设备，所述主控设备与NFC芯片连接，所述方法包括：接收所述NFC芯片发送的异常指示信息，所述异常指示信息用于指示所述NFC芯片发生异常，其中，所述NFC芯片在发生异常后进入静置待用态，并在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块；响应于所述异常指示信息，向所述NFC芯片发送配置参数，以使所述NFC芯片从所述静置待用态唤醒后根据所述配置参数进行近场通信。22.根据权利要求21所述的方法，其特征在于，所述异常指示信息中携带所述NFC芯片发生异常的原因。23.根据权利要求21或22所述的方法，其特征在于，所述向所述NFC芯片发送配置参数，包括：重置用于近场通信的协议栈，并在重置所述协议栈之后发送所述配置参数，其中，所述主控设备在重置所述协议栈和发送所述配置参数的过程中保持近场通信的应用程序与服务进程之间的连接。24.根据权利要求21或22所述的方法，其特征在于，所述方法还包括：接收所述NFC芯片发送的唤醒通知；根据所述唤醒通知，在预定时长后向所述NFC芯片发送唤醒消息，所述唤醒消息用于将所述NFC芯片从所述静置待用态唤醒。25.根据权利要求24所述的方法，其特征在于，所述唤醒消息包括以下消息中的至少一种：内部集成电路I2C通信接口的消息、串行外设接口SPI通信接口的消息、单线协议SWP通信接口的消息、通用输入输出GPIO通信接口的消息。26.根据权利要求21或22所述的方法，其特征在于，所述配置参数包括以下参数中的至少一种：NFC的标识符、用于表示NFC技术的参数、用于表示传输速率或帧长度的参数、以及天线的射频RF特征参数。27.根据权利要求21或22所述的方法，其特征在于，所述NFC芯片应用于卡模拟CE模式、读卡器RW模式或者点对点P2P模式的NFC设备。28.根据权利要求21或22所述的方法，其特征在于，所述主控设备包括设备主机DH、安全芯片SE、通用集成电路卡UICC或者用户身份模块SIM卡。29.一种近场通信NFC的装置，其特征在于，所述装置应用于NFC芯片，所述NFC芯片与主控设备连接，所述装置包括：异常检测单元，用于确定所述NFC芯片发生异常；处理单元，用于控制所述NFC芯片进入静置待用态，并在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块；所述处理单元还用于，设置唤醒源，以使所述NFC芯片在预定时长后从所述静置待用态唤醒；收发单元，用于向所述主控设备发送异常指示信息，所述异常指示信息用于指示所述NFC芯片发生异常；所述收发单元还用于，接收所述主控设备响应于所述异常指示信息发送的配置参数，以使所述NFC芯片在唤醒后根据所述配置参数进行近场通信。30.根据权利要求29所述的装置，其特征在于，所述处理单元还用于：在确定所述NFC芯片发生异常时，关闭所述NFC芯片中已开启的时钟和功能，以使所述NFC芯片进入低功耗模式。31.根据权利要求29或30所述的装置，其特征在于，所述处理单元还用于：在确定所述NFC芯片发生异常时，控制所述NFC芯片中未发生异常的硬件模块进入初始态。32.根据权利要求29或30所述的装置，其特征在于，所述处理单元还用于：在所述控制所述NFC芯片进入静置待用态之前，清除所述NFC芯片在发生异常之前使用的配置参数。33.根据权利要求29或30所述的装置，其特征在于，所述处理单元具体用于：对所述NFC芯片中发生异常的硬件模块的电源进行复位，以使所述发生异常的硬件模块进入初始态。34.根据权利要求29或30所述的装置，其特征在于，所述配置参数包括以下参数中的至少一种：NFC的标识符、用于表示NFC技术的参数、用于表示传输速率或帧长度的参数、以及天线的射频RF特征参数。35.一种主控设备，其特征在于，所述主控设备与NFC芯片连接，所述主控设备包括：收发单元，用于接收所述NFC芯片发送的异常指示信息，所述异常指示信息用于指示所述NFC芯片发生异常，其中，所述NFC芯片在发生异常后进入静置待用态，并在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块；处理单元，用于响应于所述异常指示信息，向所述NFC芯片发送配置参数，以使所述NFC芯片从所述静置待用态唤醒后根据所述配置参数进行近场通信。36.根据权利要求35所述的主控设备，其特征在于，所述处理单元还用于，重置用于近场通信的协议栈，所述收发单元具体用于，在重置所述协议栈之后发送所述配置参数；其中，所述主控设备在重置所述协议栈和发送所述配置参数的过程中保持近场通信的应用程序与服务进程之间的连接。37.根据权利要求35或36所述的主控设备，其特征在于，所述配置参数包括以下参数中的至少一种：NFC的标识符、用于表示NFC技术的参数、用于表示传输速率或帧长度的参数、以及天线的射频RF特征参数。38.一种近场通信NFC芯片，其特征在于，所述NFC芯片包括根据权利要求29至34中任一项所述的近场通信的装置。39.一种近场通信NFC设备，其特征在于，所述NFC设备包括根据权利要求35至37中任一项所述的主控设备，以及根据权利要求38所述的NFC芯片。40.根据权利要求39所述的NFC设备，其特征在于，所述NFC设备为卡模拟CE模式、读卡器RW模式或者点对点P2P模式的NFC设备。
说明书desc
技术领域本申请实施例涉及近场通信领域，并且更具体地，涉及一种近场通信的方法和装置、主控设备、NFC芯片和NFC设备。背景技术近场通信技术具有较好的安全性和便利性，已广泛应用在门禁、交通、电子支付等领域。NFC芯片出现非硬件损坏的原因而导致通信异常时，NFC系统已经陷入非预期的运行状态，已无法正确响应主控设备例如设备主机等下发的NFC控制接口指令，DH会终止当前的应用进程并断电重启NFC系统，从而用户在使用应用程序时会感觉到明显的卡顿，影响用户体验。为此，如何有效解决NFC芯片中非硬件损坏的原因导致的通信异常，且不影响用户体验，成为需要解决的问题。发明内容本申请实施例提供一种近场通信的方法和装置、主控设备、NFC芯片和NFC设备，能够有效解决NFC芯片中非硬件损坏的原因导致的通信异常，且不影响用户体验。第一方面，提供了一种近场通信的方法，所述方法应用于NFC芯片，所述NFC芯片与主控设备连接，所述方法包括：确定所述NFC芯片发生异常；控制所述NFC芯片进入静置待用态，并在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块；设置唤醒源，以使所述NFC芯片在预定时长后从所述静置待用态唤醒；向所述主控设备发送异常指示信息，所述异常指示信息用于指示所述NFC芯片发生异常；接收所述主控设备响应于所述异常指示信息发送的配置参数，以使所述NFC芯片在唤醒后根据所述配置参数进行近场通信。在一种实现方式中，所述确定所述NFC芯片发生异常，包括：检测所述NFC芯片的硬件模块的状态机；若所述状态机的状态与预期状态不同，确定所述NFC芯片发生异常。在一种实现方式中，所述确定所述NFC芯片发生异常，包括：检测所述NFC芯片的状态寄存器；若所述状态寄存器的值与期望值不同，确定所述NFC芯片发生异常。在一种实现方式中，所述方法还包括：在确定所述NFC芯片发生异常时，关闭所述NFC芯片中已开启的时钟和功能，以使所述NFC芯片进入低功耗模式。在一种实现方式中，所述方法还包括：在确定所述NFC芯片发生异常时，控制所述NFC芯片中未发生异常的硬件模块进入初始态。在一种实现方式中，在所述控制所述NFC芯片进入静置待用态之前，所述方法还包括：清除所述NFC芯片在发生异常之前使用的配置参数。在一种实现方式中，在所述控制所述NFC芯片进入静置待用态之前，所述方法还包括：处理完毕当前正在执行的操作。在一种实现方式中，所述NFC芯片采用RTOS，所述处理完毕当前正在执行的操作，包括：处理完毕当前正在执行的消息或者事件。在一种实现方式中，所述在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块，包括：对所述NFC芯片中发生异常的硬件模块的电源进行复位，以使所述发生异常的硬件模块进入初始态。在一种实现方式中，所述异常指示信息中携带所述NFC芯片发生异常的原因。在一种实现方式中，所述主控设备用于在接收到所述异常指示信息后重置用于近场通信的协议栈并发送所述配置参数，且在此过程中保持近场通信的应用程序与服务进程之间的连接。在一种实现方式中，所述唤醒源包括定时器，所述唤醒源用于在所述定时器的定时时长结束后将所述NFC芯片从所述静置待用态唤醒。在一种实现方式中，所述唤醒源用于在近场通信时射频信号的场强满足预定条件时，将所述NFC芯片从所述静置待用态唤醒。在一种实现方式中，所述唤醒源包括所述主控设备发送的唤醒消息，其中，在确定所述NFC芯片发生异常后，所述方法还包括：向所述主控设备发送唤醒通知，以使所述主控设备根据所述唤醒通知，在所述预定时长后向所述NFC芯片发送所述唤醒消息，所述唤醒消息用于将所述NFC芯片从所述静置待用态唤醒。在一种实现方式中，所述唤醒消息包括以下消息中的至少一种：I2C通信接口的消息、SPI通信接口的消息、SWP通信接口的消息、GPIO通信接口的消息。在一种实现方式中，所述唤醒源用于根据所述NFC芯片的电源电平的变化，触发所述NFC芯片从所述静置待用态唤醒。在一种实现方式中，所述配置参数包括以下参数中的至少一种：NFC的标识符、用于表示NFC技术的参数、用于表示传输速率或帧长度的参数、以及天线的RF特征参数。在一种实现方式中，在确定所述NFC芯片发生异常之前，所述方法还包括：对所述NFC芯片的硬件模块进行测试，并根据测试结果确定所述NFC芯片的硬件模块未出现物理损伤。在一种实现方式中，所述NFC芯片应用于CE模式、RW模式或者P2P模式的NFC设备。在一种实现方式中，所述主控设备包括DH、SE、UICC或者SIM卡。第二方面，提供一种近场通信的方法，应用于主控设备，所述主控设备与NFC芯片连接，所述方法包括：接收所述NFC芯片发送的异常指示信息，所述异常指示信息用于指示所述NFC芯片发生异常，其中，所述NFC芯片在发生异常后进入静置待用态，并在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块；响应于所述异常指示信息，向所述NFC芯片发送配置参数，以使所述NFC芯片从所述静置待用态唤醒后根据所述配置参数进行近场通信。在一种实现方式中，所述异常指示信息中携带所述NFC芯片发生异常的原因。在一种实现方式中，所述向所述NFC芯片发送配置参数，包括：重置用于近场通信的协议栈，并在重置所述协议栈之后发送所述配置参数，其中，所述主控设备在重置所述协议栈和发送所述配置参数的过程中保持近场通信的应用程序与服务进程之间的连接。在一种实现方式中，所述NFC芯片在发生异常后进入静置待用态，以在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块，所述方法还包括：接收所述NFC芯片发送的唤醒通知；根据所述唤醒通知，在预定时长后向所述NFC芯片发送唤醒消息，所述唤醒消息用于将所述NFC芯片从所述静置待用态唤醒。在一种实现方式中，所述唤醒消息包括以下消息中的至少一种：I2C通信接口的消息、SPI通信接口的消息、SWP通信接口的消息、GPIO通信接口的消息。在一种实现方式中，所述配置参数包括以下参数中的至少一种：NFC的标识符、用于表示NFC技术的参数、用于表示传输速率或帧长度的参数、以及天线的RF特征参数。在一种实现方式中，所述NFC芯片应用于CE模式、RW模式或者P2P模式的NFC设备。在一种实现方式中，所述主控设备包括DH、SE、UICC或者SIM卡。第三方面，提供一种近场通信的装置，所述装置应用于NFC芯片，所述NFC芯片与主控设备连接，所述装置包括：异常检测单元，用于确定所述NFC芯片发生异常；处理单元，用于控制所述NFC芯片进入静置待用态，并在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块；所述处理单元还用于，设置唤醒源，以使所述NFC芯片在预定时长后从所述静置待用态唤醒；收发单元，用于向所述主控设备发送异常指示信息，所述异常指示信息用于指示所述NFC芯片发生异常；所述收发单元还用于，接收所述主控设备响应于所述异常指示信息发送的配置参数，以使所述NFC芯片在唤醒后根据所述配置参数进行近场通信。在一种实现方式中，所述异常检测单元具体用于：检测所述NFC芯片的硬件模块的状态机；若所述状态机的状态与预期状态不同，确定所述NFC芯片发生异常。在一种实现方式中，所述异常检测单元具体用于：检测所述NFC芯片的状态寄存器；若所述状态寄存器的值与期望值不同，确定所述NFC芯片发生异常。在一种实现方式中，所述处理单元还用于：在确定所述NFC芯片发生异常时，关闭所述NFC芯片中已开启的时钟和功能，以使所述NFC芯片进入低功耗模式。在一种实现方式中，所述处理单元还用于：在确定所述NFC芯片发生异常时，控制所述NFC芯片中未发生异常的硬件模块进入初始态。在一种实现方式中，所述处理单元还用于：在所述控制所述NFC芯片进入静置待用态之前，清除所述NFC芯片在发生异常之前使用的配置参数。在一种实现方式中，所述处理单元还用于：在所述控制所述NFC芯片进入静置待用态之前，处理完毕当前正在执行的操作。在一种实现方式中，所述NFC芯片采用RTOS，所述处理单元具体用于：在所述控制所述NFC芯片进入静置待用态之前，处理完毕当前正在执行的消息或者事件。在一种实现方式中，所述处理单元具体用于：对所述NFC芯片中发生异常的硬件模块的电源进行复位，以使所述发生异常的硬件模块进入初始态。在一种实现方式中，所述异常指示信息中携带所述NFC芯片发生异常的原因。在一种实现方式中，所述主控设备用于在接收到所述异常指示信息后重置用于近场通信的协议栈并发送所述配置参数，且在此过程中保持近场通信的应用程序与服务进程之间的连接。在一种实现方式中，所述唤醒源包括定时器，所述唤醒源用于在所述定时器的定时时长结束后将所述NFC芯片从所述静置待用态唤醒。在一种实现方式中，所述唤醒源用于在近场通信时射频信号的场强满足预定条件时，将所述NFC芯片从所述静置待用态唤醒。在一种实现方式中，所述唤醒源包括所述主控设备发送的唤醒消息，其中，所述收发单元还用于：在确定所述NFC芯片发生异常后，向所述主控设备发送唤醒通知，以使所述主控设备根据所述唤醒通知，在所述预定时长后向所述NFC芯片发送所述唤醒消息，所述唤醒消息用于将所述NFC芯片从所述静置待用态唤醒。在一种实现方式中，所述唤醒消息包括以下消息中的至少一种：I2C通信接口的消息、SPI通信接口的消息、SWP通信接口的消息、GPIO通信接口的消息。在一种实现方式中，所述唤醒源用于根据所述NFC芯片的电源电平的变化，触发所述NFC芯片从所述静置待用态唤醒。在一种实现方式中，所述配置参数包括以下参数中的至少一种：NFC的标识符、用于表示NFC技术的参数、用于表示传输速率或帧长度的参数、以及天线的RF特征参数。在一种实现方式中，所述装置还包括测试模块，所述测试模块用于：在确定所述NFC芯片发生异常之前，对所述NFC芯片的硬件模块进行测试，并根据测试结果确定所述NFC芯片的硬件模块未出现物理损伤。在一种实现方式中，所述NFC芯片应用于CE模式、RW模式或者P2P模式的NFC设备。在一种实现方式中，所述主控设备包括DH、SE、UICC或者SIM卡。第四方面，提供了一种主控设备，所述主控设备与NFC芯片连接，所述主控设备包括：收发单元，用于接收所述NFC芯片发送的异常指示信息，所述异常指示信息用于指示所述NFC芯片发生异常，其中，所述NFC芯片在发生异常后进入静置待用态，并在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块；处理单元，用于响应于所述异常指示信息，向所述NFC芯片发送配置参数，以使所述NFC芯片从所述静置待用态唤醒后根据所述配置参数进行近场通信。在一种实现方式中，所述异常指示信息中携带所述NFC芯片发生异常的原因。在一种实现方式中，所述处理单元还用于，重置用于近场通信的协议栈，所述收发单元具体用于，在重置所述协议栈之后发送所述配置参数；其中，所述主控设备在重置所述协议栈和发送所述配置参数的过程中保持近场通信的应用程序与服务进程之间的连接。在一种实现方式中，所述NFC芯片在发生异常后进入静置待用态，以在所述静置待用态中重启所述NFC芯片中发生异常的硬件模块，所述收发单元还用于：接收所述NFC芯片发送的唤醒通知；根据所述唤醒通知，在预定时长后向所述NFC芯片发送唤醒消息，所述唤醒消息用于将所述NFC芯片从所述静置待用态唤醒。在一种实现方式中，所述唤醒消息包括以下消息中的至少一种：I2C通信接口的消息、SPI通信接口的消息、SWP通信接口的消息、GPIO通信接口的消息。在一种实现方式中，所述配置参数包括以下参数中的至少一种：NFC的标识符、用于表示NFC技术的参数、用于表示传输速率或帧长度的参数、以及天线的RF特征参数。在一种实现方式中，所述NFC芯片应用于CE模式、RW模式或者P2P模式的NFC设备。在一种实现方式中，所述主控设备包括DH、SE、UICC或者SIM卡。第五方面，提供了一种NFC芯片，所述NFC芯片包括根据第三方面或第三方面的任一可能的实现方式中所述的近场通信的装置。第六方面，提供了一种NFC设备，包括上述第四方面或第四方面的任一实现方式中所述的主控设备，以及第五方面或第五方面的任一实现方式中所述的NFC芯片。在一种实现方式中，所述NFC设备为CE模式、RW模式或者P2P模式的NFC设备。基于上述技术方案，在确定NFC芯片发生异常时，向主控设备发送异常指示信息，并控制NFC芯片进入静置待用态，以在静置待用态中重启NFC芯片中发生异常的硬件模块，并且通过设置唤醒源，使得NFC芯片在预定时长后从静置待用态唤醒。主控设备响应于该异常指示信息向NFC芯片重新下发用于近场通信的配置参数，使得NFC芯片在唤醒后根据该配置参数继续进行近场通信。这样，NFC芯片通过异常指示信息上报其异常状态并从主控设备重新获取配置参数，同时在NFC芯片的静置待用态中对发生异常的硬件模块进行重启，以使其从静置待用态唤醒后根据该配置参数继续进行近场通信，无需断电重启整个NFC芯片，便能够使NFC芯片的恢复至异常前的状态，且该过程能够使用户无感知，极大地提升了用户体验。附图说明图1是本申请实施例的近场通信的方法的示意性流程图。图2是图1所示的方法的一种可能的具体实现方式的流程交互图。图3是本申请实施例的近场通信的装置的示意性框图。图4是本申请实施例的主控设备的示意性框图。具体实施方式下面将结合附图，对本申请中的技术方案进行描述。NFC技术已经在人们的生活中被广泛使用。通常，NFC设备的工作模式包括三种，第一种为主动模式，也称读卡器模式，工作于RW模式下的NFC设备作为读卡器使用，主动发出射频信号去识别和读写其他NFC设备，例如应用于POS机、门禁等；第二种为被动模式，也称卡模拟模式，工作于CE模式下的NFC设备可以作为卡片被读写，在其他NFC设备发出的射频场中被动地进行响应，例如应用于移动支付上；第三种为点对点模式。以下，为了简洁，将工作于RW模式下的NFC设备称为RW设备，将工作于CE模式下的NFC设备称CE设备，将工作于P2P模式下的NFC设备称为PSP设备。在NFC的三种模式的使用过程中，会出现非硬件损坏等原因导致的通信异常，进而导致通信失败，甚至NFC芯片挂死。这些非硬件损坏的原因包括但不限于以下几种：1）NFC芯片的硬件模块对正常频率例如13.56Mhz区间内的电磁波采样或者解码出错；2）NFC芯片的硬件的时钟不准确，导致NFC芯片的运行时序失常；3）NFC芯片的外部存在其他频率的信号源或者异物干扰源等，导致NFC芯片的硬件模块陷入异常的工作状态；4）对NFC芯片的寄存器参数或者硬件的特征值的配置不符合当前场景的预期值，但NFC芯片仍将在该场景下运行。对于这些非硬件损坏等原因导致的通信异常，NFC芯片的硬件模块无法正常工作，NFC芯片内的软件模块由于硬件模块的回复异常，陷入非预期的运行状态，对设备主机或者安全芯片等主控设备下发的命令此时已无法正常回应，主控设备会终止当前的应用进程并断电重启NFC系统，因此需要较长时间NFC系统才能重新恢复至可用状态，用户在使用应用程序时会感觉到明显的卡顿，影响用户体验。为此，本申请提供一种近场通信的方案，旨在解决NFC芯片中非硬件损坏的原因导致的通信异常的问题，通过在NFC芯片的静置待用态中对发生异常的硬件模块进行重启，无需断电重启整个NFC系统，能够在用户无感知的情况下，使NFC芯片的恢复至异常前的状态，极大地提升了用户体验。图1为本申请实施例的近场通信的方法100的流程交互图。方法100应用于NFC芯片200，NFC芯片200可以应用于CE模式的NFC设备、RW模式的NFC设备、或者P2P模式的NFC设备。NFC芯片200与主控设备300连接，主控设备300例如可以是设备主机、安全芯片、通用集成电路卡、用户身份认证模块、或者其他读头和门禁等。方法100可以由主控设备300和NFC芯片200执行。具体地，NFC芯片200中包括近场通信的装置210，方法100可以由近场通信的装置210和主控设备300执行。应理解，本申请实施例中所述的装置210是指NFC芯片200的软件模块，或者说是软件部分，例如装置210可以是NFC芯片200的固件210等。此外，NFC芯片200中还包括与装置210连接的硬件模块220。NFC芯片200中的装置210与硬件模块220之间可以进行交互，从而由装置210控制硬件模块220实现相应的功能。以下，也将装置210称为软件模块210。硬件模块220例如可以包括NFC芯片200的场检测模块、采样模块、编解码模块、模数转换模块等硬件模块。如图1所示，方法100可以包括以下步骤中的部分或全部。在步骤110中，NFC芯片200的软件模块210确定NFC芯片200发生异常。在步骤120中，软件模块210控制NFC芯片200进入静置待用态，并在静置待用态中重启NFC芯片200中发生异常的硬件模块220。在步骤130中，软件模块210设置唤醒源，以使NFC芯片200在预定时长后从静置待用态唤醒。在步骤140中，软件模块210向主控设备300发送异常指示信息。其中，该异常指示信息用于指示NFC芯片200发生异常。该异常指示信息例如可以承载于NFC芯片200和主控设备300之间约定的具有特定格式的通知或者消息中。可选地，该异常指示信息中还可以携带NFC芯片200发生异常的原因，该异常原因上报给主控设备300后，方便技术人员获取该异常原因，以便后续对NFC芯片200的设计进行改进。在步骤150中，主控设备300接收该异常指示信息，在步骤160中，响应于该异常指示信息，主控设备300向软件模块210发送配置参数。在步骤160中，软件模块210接收该配置参数。该配置参数例如可以承载于主控设备300的NCI指令中。通过设置该配置参数，NFC芯片200在唤醒后能够根据该配置参数继续进行近场通信。该配置参数例如可以包括以下参数中的至少一种：NFC的标识符、用于表示NFC技术的参数、用于表示传输速率或帧长度的参数、以及天线的射频特征参数。NFC技术例如包括NFC技术A、技术B、NFC技术F等，也称为模式或者协议信息。这些配置参数用于硬件模块220实现相应的功能，从而完成NFC芯片200的近场通信。在实际协议中，这些配置参数例如通过选择A技术的信息作为回应、针对Select命令的回复等信令承载。这样，NFC芯片200通过异常指示信息上报其异常状态并从主控设备300重新获取配置参数，同时在NFC芯片200的静置待用态中对发生异常的硬件模块220进行重启，以使其从静置待用态唤醒后根据该配置参数继续进行近场通信，无需断电重启整个NFC芯片200，便能够使NFC芯片200的恢复至异常前的状态，且该过程能够使用户无感知，极大地提升了用户体验。方法100应用于非硬件损坏导致的异常场景中，以解决NFC芯片200的非硬件损坏导致的异常。因此，在一种实现方式中，在步骤110之前，方法100还包括：对NFC芯片200的硬件模块220进行测试，并根据测试结果确定NFC芯片200的硬件模块220未出现物理损伤。例如，可以通过简单地发送脉冲波形等方式对NFC芯片200的天线进行自检，以排除天线模块对NFC芯片200的影响，确保NFC芯片200和主控设备300交互前其硬件模块220未出现物理损伤。通常，状态机包括若干个状态寄存器以及相关的组合逻辑电路。本申请实施例中，可以通过检测NFC芯片200的状态寄存器或者状态机，来确定NFC芯片200中是否发生异常。例如，在步骤110中，可以检测NFC芯片200的状态寄存器，并在该状态寄存器的值与期望值不同时，确定NFC芯片200发生异常。以NFC芯片200包括8个寄存器为例，NFC装置210在发送或者接收命令之前，查询这些状态寄存器的值，假设这些状态寄存器当前的预期值分别为11000000，那么，如果查询后发现这些状态寄存器的值不是11000000，则认为NFC芯片200发生了异常。又例如，在步骤110中，可以检测NFC芯片200的硬件模块的状态机，并在状态机的状态与预期状态不同时，确定NFC芯片200发生异常。以NFC芯片200有三种可能的状态即状态S0、状态S1和状态S2为例，NFC装置210在发送或者接收命令之前，查询状态机的状态，假设该状态当前的预期状态应为S0，那么，如果查询后发现该状态机当前的状态不是S0，则认为NFC芯片200发生了异常。一旦确定NFC芯片200发生异常，则进入NFC芯片200的恢复流程，执行例如上述步骤120至步骤160。NFC芯片200支持低功耗模式，NFC芯片200在低功耗模式中可以实现静置待用态。因此，在一种实现方式中，方法100还包括：在确定NFC芯片200发生异常时，关闭NFC芯片200中已开启的时钟和功能，以使NFC芯片200进入低功耗模式，并控制所述NFC芯片中未发生异常的硬件模块进入初始态，即IDLE状态。在一种实现方式中，在步骤120中，在静置待用态中重启NFC芯片200中发生异常的硬件模块220，包括：对NFC芯片200中发生异常的硬件模块220的电源进行复位，以使发生异常的硬件模块220进入初始态。具体来说，在NFC芯片200进入静置待用态之前，需要主动关闭NFC芯片200中所有已开启的时钟，并关闭NFC芯片200的各类功能，准备进入低功耗模式，进而进入静置待用态；同时，需要将NFC芯片置为初始态。但是，发生异常的硬件模块220无法受到软件模块210的控制而进入初始态，因此需要在静置待用态中执行电源复位操作，以对发生异常的硬件模块220的电源进行复位，从而使发生异常的硬件模块220恢复至初始态。例如，在静置待用态中对与异常的硬件模块220相关联的电源域进行重启，即下电再上电。在一种实现方式中，在控制NFC芯片200进入静置待用态之前，方法100还包括：处理完毕当前正在执行的操作，即软件模块210处理完毕当前正在执行的语句。例如，针对实时操作系统，软件模块210按照原顺序处理完毕当前正在执行的消息或者事件等，从而避免发生内存泄露。NFC芯片200进入静置待用态且在静置待用态中完成对异常的硬件模块220的电源复位之后，需要利用唤醒源将其从静置待用态唤醒，并退出低功耗模式。通常，唤醒源可以通过设置定时器、检测场强、接收主控设备通过通信接口发送的唤醒消息、检测芯片电源的电平变化等方式实现。其中，定时器即为NFC芯片200中的软件定时器，其被配置有定时时长例如100 us，定时器计时并在到达定时时长后，触发NFC芯片200从静置待用态唤醒。该定时器具有应用场景广泛、操作简单且易于实现等优点。检测场强的唤醒方式是指，根据RF信号的场强变化触发NFC芯片200从静置待用态唤醒。例如，在检测到场强满足预定条件，比如大于预设值时，触发NFC芯片200从静置待用态唤醒。检测芯片电源的电平变化的唤醒方式是指，根据NFC芯片200的电源电平的变化触发NFC芯片200从静置待用态唤醒。例如，拉高NFC芯片200的供电电源的电平，比如将对应引脚的电压从1.3-1.8V拉高至2.7-3.3V，则会触发NFC芯片200从静置待用态唤醒。NFC芯片200可以通过相应的通信接口与主控设备300连接，例如，NFC芯片200通过内部集成电路通信接口与DH连接，或者通过串行外设接口通信接口与SE连接，或者通过单线协议通信接口与UICC或者SIM卡连接。可选地，在确定NFC芯片200发生异常后，软件模块210可以向主控设备300发送唤醒通知，例如在即将进入静置待用态时向主控设备300发送该唤醒通知；主控设备300接收到该唤醒通知后，根据该唤醒通知在预定时长后向NFC芯片200发送唤醒消息，以将其从静置待用态唤醒。针对不同的主控设备，该唤醒消息可以由不同通信接口传递，例如，该唤醒消息可以是DH发送的I2C通信接口的消息、SE发送的SPI通信接口的消息、UICC或者SIM卡发送的SWP通信接口的消息、其他读头和门禁等发送的GPIO通信接口的消息。不同设备中通常配置有多个唤醒源，对于手机等电子设备，通常配置两个唤醒源，例如基于场强检测的唤醒源和基于I2C接口消息的唤醒源；对于安全设备，通常配置三个唤醒源，例如基于场强检测的唤醒源、基于SPI接口消息的唤醒源、基于SWP接口消息的唤醒源。这些唤醒源也可以用在NFC芯片200的恢复流程中。为了避免单一唤醒源异常而无法唤醒的情况发生，可以为NFC芯片200的恢复流程配置多个唤醒源。这时，可选地，可以按照唤醒源的优先级从高至低的顺序执行唤醒源；如果唤醒源的优先级相同，则按照预定的触发顺序执行唤醒源。本申请实施例中，NFC芯片200在发生异常后，软件模块210向主控设备300发送异常指示信息，主动设备300基于该异常指示信息为NFC芯片200重新下发用于近场通信的配置参数，以将NFC芯片200配置到异常前的状态。因此，可选地，在控制NFC芯片200进入静置待用态之前，方法200还可以包括：清除NFC芯片200在发生异常之前使用的配置参数。应理解，主控设备300向NFC芯片200重新下发的配置参数，与NFC芯片200进入静置待用态之前使用的配置参数可以是相同的；或者，主控设备300向NFC芯片200重新下发的配置参数，也可以不同于NFC芯片200进入静置待用态之前使用的配置参数，例如，可以根据异常原因对该配置参数进行调整从而得到新的配置参数并下发给NFC芯片200。可选地，方法100还包括：在NFC芯片200从静置待用态唤醒后，软件模块210清除所有的状态位和数据，以防止此前清除配置参数时存在残留，从而提高NFC系统的可靠性。NFC芯片200在唤醒源的触发下从静置待用态唤醒并获取主控设备300发送的配置参数后，可以立即根据该配置参数继续进行近场通信，例如，对于CE设备，其NFC芯片200在唤醒成功后可以根据这些配置参数进入发现流程，使该CE设备恢复其与RW设备之间的交互流程。在一种实现方式中，在步骤160中，主控设备300向NFC芯片200发送配置参数，包括：重置用于近场通信的协议栈，并在重置协议栈之后发送该配置参数。应注意，主控设备300在重置协议栈和发送配置参数的过程中保持近场通信的应用程序与服务进程之间的连接。也就是说，主控设备300在接收到异常指示信息后，需要重置用于近场通信的协议栈，即重置整个NFC网络的各层协议，并在重置协议栈之后向NFC芯片200发送配置参数。而在此过程中，主控设备300应保持近场通信的应用程序与服务进程之间的连接，即不重启正在运行的应用程序，使用户不会感觉到正在使用的应用程序发生重启。本申请对主控设备300如何保持近场通信的应用程序与服务进程之间的连接不做任何限定。在主控设备300重启即重置协议栈的过程中，主控设备300可以基于任何可能的方式保持应用程序与服务进程之间的连接。在NFC芯片200发生异常时，如果对整个NFC芯片200执行断电重启的方式恢复其硬件状态，则对于用户来说，会产生明显的使用断裂感，且必须重新启动正在使用的应用程序。而采用本申请的近场通信的方法100，NFC芯片200在静置待用态中仅控制异常的硬件模块220断电重启，且通过向主控设备300发送异常指示信息而使主控设备300重新为其下发用于近场通信的配置参数，主控设备300在此过程中会保持应用程序和服务进程之间的连接，不会终止当前的应用进程，不会重启用户正在使用的应用程序，用户仅会在极短的一段时间内感受到操作上的迟滞，这极大地提升了用户体验。以下，结合图2所示的一种可能的流程交互图，以NFC芯片200应用于RW设备为例，详细描述NFC芯片200的恢复流程。该流程由DH 300、应用于RW设备的NFC芯片200和应用于CE设备的NFC芯片400执行，其中，NFC芯片200包括软件模块210和硬件模块220。如图2所示，该流程包括以下步骤中的部分或全部。在步骤401中，DH 300向NFC芯片200的软件模块210发送配置参数。该配置参数例如包括RF特征参数和NFC参数，该NFC参数例如包括NFCID、SAK、ATS等。在步骤402中，DH 300向软件模块210发送RF发现命令。其中，该RF发现命令用于指示RW设备的NFC芯片200处于发现态，以使CE设备的NFC芯片400进行场检测，以执行发现流程。在步骤403中，软件模块210向硬件模块220发送指令，以开启基于NFC技术A的RW模式。在步骤404中，NFC芯片200与NFC芯片400之间建立通信。这里，假设NFC芯片200与NFC芯片400之间基于NFC技术A进行通信，则在步骤404中，NFC芯片200与NFC芯片300之间建立基于技术A的协议层3的通信。在步骤405中，硬件模块220向软件模块210发送相应的应答消息。在步骤406中，软件模块210向DH 300发送RF激活通知。该RF激活通知用于指示RF场已激活，RW设备和CE设备之间能够基于RF场进行近场通信。在步骤407中，DH 300向软件模块210发送通信指令。在步骤408中，软件模块210向硬件模块220发送通信指令。在步骤409中，硬件模块220向NFC芯片400发送通信指令。步骤407至步骤409中的通信指令例如为RW-4指令，指代用于建立基于技术A的协议层4的通信的所有指令，或者用于建立基于技术A的应用协议数据单元的通信的所有指令，也记作RWA layer 4指令或者RW-A指令。在步骤410中，NFC芯片400向硬件模块220发送相应的应答消息。在步骤411中，硬件模块220向软件模块210发送该应答消息。在步骤412中，软件模块210向DH 300发送该应答消息。如果NFC芯片200在执行步骤411的过程中因干扰等原因出现异常，即图2中所示的异常位置，则无法正常执行后续的步骤411和步骤412。那么DH 300可能会因为没有收到相应的应答消息而执行步骤413。在步骤413中，DH 300向软件模块发送去激活NFC的命令。应理解，无论DH 300是否执行步骤413，软件模块210在检测到NFC芯片200发生异常后，都会直接执行步骤414。在步骤414中，软件模块210向硬件模块220发送终止NFC操作的指令。例如，软件模块210执行完毕当前正在执行的语句，并关闭已开启的时钟和各类功能，准备进入低功耗模式。当然，异常也可以发生在其他位置，这时，软件模块210在检测到NFC芯片200发生异常后，也会直接执行步骤414。接着，在步骤415中，清除硬件模块220的配置参数，即步骤401中获取的配置参数。在步骤416中，软件模块210控制硬件模块220进入静置待用态并设置唤醒源。软件模块210可以控制NFC芯片200中未发生异常的硬件模块220置为初始态，而异常的硬件模块220不受此控制，因此只能够在静置待用态中对与异常的硬件模块220相关联的电源域进行重启，即下电再上电，从而使异常的硬件模块220也进入初始态。在步骤417中，NFC芯片200基于唤醒源从静置待用态中唤醒。在步骤418中，软件模块210向DH 300发送异常指示信息，也可以称为重置通知。在步骤419中，DH 300重启协议栈。之后，可以重新执行上述步骤，例如步骤401至步骤405，以恢复CE设备与RW设备之间的近场通信。可见，在检测到NFC芯片200发生异常时，软件模块210向主控设备300发送异常指示信息，并控制NFC芯片200进入静置待用态，以在静置待用态中重启NFC芯片200中发生异常的硬件模块220，并且通过设置唤醒源，使得NFC芯片200在预定时长后从静置待用态唤醒。主控设备300响应于该异常指示信息向NFC芯片200重新下发用于近场通信的配置参数，使得NFC芯片200在唤醒后根据该配置参数继续进行近场通信。这样，NFC芯片200通过异常指示信息上报其异常状态并从主控设备重新获取配置参数，同时在NFC芯片200的静置待用态中对发生异常的硬件模块进行重启，以使其从静置待用态唤醒后根据该配置参数继续进行近场通信，无需断电重启整个NFC芯片200，便能够使NFC芯片200的恢复至异常前的状态，且该过程能够使用户无感知，极大地提升了用户体验。图2仅为示例，本申请实施例的近场通信的方法100还可以应用于CE设备的NFC芯片400，以实现NFC芯片400的恢复，并且能够应用在包括技术A、技术B、技术F在内的各种NFC技术的近场通信的恢复中。本申请还提供了一种近场通信的装置210，装置210应用于NFC芯片200，NFC芯片200与主控设备300连接，主控设备300例如包括DH、SE、UICC或者SIM卡。NFC芯片200可以应用于CE模式、RW模式或者P2P模式的NFC设备。如图3所示，装置210包括异常检测单元2101、处理单元2101和收发单元2103。其中，异常检测单元2101用于确定NFC芯片200发生异常；处理单元2102用于：控制NFC芯片200进入静置待用态，并在静置待用态中重启NFC芯片200中发生异常的硬件模块220；设置唤醒源，以使NFC芯片200在预定时长后从静置待用态唤醒；收发单元，用于向主控设备300发送异常指示信息，异常指示信息用于指示NFC芯片200发生异常；收发单元2103用于：接收主控设备300响应于异常指示信息发送的配置参数，以使NFC芯片200在唤醒后根据配置参数进行近场通信。在一种实现方式中，异常检测单元2101具体用于：检测NFC芯片200的硬件模块220的状态机；若该状态机的状态与预期状态不同，确定NFC芯片200发生异常。在一种实现方式中，异常检测单元2101具体用于：检测NFC芯片200的状态寄存器；若该状态寄存器的值与期望值不同，确定NFC芯片200发生异常。在一种实现方式中，处理单元2102还用于：在确定NFC芯片200发生异常时，关闭NFC芯片200中已开启的时钟和功能，以使NFC芯片200进入低功耗模式。在一种实现方式中，处理单元2102还用于：在确定NFC芯片200发生异常时，控制NFC芯片200中未发生异常的硬件模块220进入初始态。在一种实现方式中，处理单元2102还用于：在控制NFC芯片200进入静置待用态之前，清除NFC芯片200在发生异常之前使用的配置参数。在一种实现方式中，处理单元2102还用于：在控制NFC芯片200进入静置待用态之前，处理完毕当前正在执行的操作。在一种实现方式中，NFC芯片200采用RTOS，处理单元2102具体用于：在所述控制所述NFC芯片进入静置待用态之前，处理完毕当前正在执行的消息或者事件。在一种实现方式中，处理单元2102具体用于：对NFC芯片200中发生异常的硬件模块220的电源进行复位，以使发生异常的硬件模块220进入初始态。在一种实现方式中，该异常指示信息中携带NFC芯片200发生异常的原因。在一种实现方式中，主控设备300用于在接收到所述异常指示信息后重置用于近场通信的协议栈并发送该配置参数，且在此过程保持近场通信的应用程序与服务进程之间的连接。在一种实现方式中，该唤醒源包括定时器，唤醒源用于在定时器的定时时长结束后将NFC芯片200从静置待用态唤醒。在一种实现方式中，该唤醒源用于在近场通信时射频信号的场强满足预定条件时，将NFC芯片200从静置待用态唤醒。在一种实现方式中，该唤醒源包括主控设备300发送的唤醒消息，其中，收发单元2103还用于：在确定NFC芯片200发生异常后，向主控设备300发送唤醒通知，以使主控设备300根据该唤醒通知，在该预定时长后向NFC芯片200发送唤醒消息，该唤醒消息用于触发NFC芯片200从静置待用态唤醒。在一种实现方式中，该唤醒消息包括以下消息中的至少一种：I2C通信接口的消息、SPI通信接口的消息、SWP通信接口的消息、GPIO通信接口的消息。在一种实现方式中，该唤醒源用于根据NFC芯片200的电源电平的变化，触发NFC芯片200从静置待用态唤醒。在一种实现方式中，该配置参数包括以下参数中的至少一种：NFC的标识符、用于表示NFC技术的参数、用于表示传输速率或帧长度的参数、以及天线的RF特征参数。在一种实现方式中，装置210还包括测试模块，该测试模块用于：在确定NFC芯片200发生异常之前，对NFC芯片200的硬件模块220进行测试，并根据测试结果确定NFC芯片200的硬件模块220未出现物理损伤。本申请还提供了一种主控设备，主控设备300与NFC芯片200连接，主控设备300例如可以是DH、SE、UICC或者SIM卡等，NFC芯片200例如可以应用于CE模式、RW模式或者P2P模式的NFC设备。如图4所示，主控设备300包括收发单元310和处理单元320。收发单元310用于：接收NFC芯片200发送的异常指示信息，异常指示信息用于指示NFC芯片200发生异常，其中，NFC芯片200在发生异常后进入静置待用态，并在静置待用态中重启NFC芯片200中发生异常的硬件模块220；处理单元320用于：响应于异常指示信息，向NFC芯片200发送配置参数，以使NFC芯片200从静置待用态唤醒后根据配置参数进行近场通信。在一种实现方式中，异常指示信息中携带NFC芯片200发生异常的原因。在一种实现方式中，处理单元320还用于，重置用于近场通信的协议栈，收发单元具体用于，在重置协议栈之后发送配置参数；其中，主控设备300在重置协议栈和发送配置参数的过程中保持近场通信的应用程序与服务进程之间的连接。在一种实现方式中，收发单元310还用于：接收NFC芯片200发送的唤醒通知；根据该唤醒通知，在该预定时长后向NFC芯片200发送唤醒消息，该唤醒消息用于将NFC芯片200从静置待用态唤醒。在一种实现方式中，该唤醒消息包括以下消息中的至少一种：I2C通信接口的消息、SPI通信接口的消息、SWP通信接口的消息、GPIO通信接口的消息。在一种实现方式中，该配置参数包括以下参数中的至少一种：NFC的标识符、用于表示NFC技术的参数、用于表示传输速率或帧长度的参数、以及天线的RF特征参数。本申请还提供了一种NFC芯片200，包括上述任一实施例中所述的近场通信的装置210。可选地，NFC芯片200还包括与装置210连接的硬件模块220。本申请还提供了一种NFC设备，所述NFC设备包括上述任一实施例中所述的NFC芯片200和主控设备300，其中，NFC芯片200包括上述任一实施例中所述的近场通信的装置210。可选地，NFC芯片200还包括与装置210连接的硬件模块220。所述NFC设备例如可以是CE模式、RW模式或者P2P模式的NFC设备。需要说明的是，在不冲突的前提下，本申请描述的各个实施例和/或各个实施例中的技术特征可以任意的相互组合，组合之后得到的技术方案也应落入本申请的保护范围。本申请实施例中所揭露的系统、装置和方法，可以通过其它的方式实现。例如，以上所描述的方法实施例的一些特征可以忽略或者不执行。以上所描述的装置实施例仅仅是示意性的，单元的划分仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，多个单元或组件可以结合或者可以集成到另一个系统。另外，各单元之间的耦合或各个组件之间的耦合可以是直接耦合，也可以是间接耦合，上述耦合包括电的、机械的或其它形式的连接。本领域的技术人员可以清楚地了解到，为了描述的方便和简洁，上述描述的装置和设备的具体工作过程以及产生的技术效果，可以参考前述方法实施例中对应的过程和技术效果，在此不再赘述。应理解，本申请实施例中的具体的例子只是为了帮助本领域技术人员更好地理解本申请实施例，而非限制本申请实施例的范围，本领域技术人员可以在上述实施例的基础上进行各种改进和变形，而这些改进或者变形均落在本申请的保护范围内。以上所述，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以所述权利要求的保护范围为准。
