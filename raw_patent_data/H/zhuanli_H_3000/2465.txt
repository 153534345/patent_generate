标题title
一种基于视频流的隐患抓拍和识别的智能装置
摘要abst
本发明公开了一种基于视频流的隐患抓拍和识别的智能装置，包括与外部设备通信连接并基于视频流的传输方式获取视频数据的获取模块以及与获取模块电连接的处理器，智能装置还包括与处理器通信连接的输出模块，输出模块用于输出从处理器获取的带有标识框的隐患抓拍图像。本发明公开的基于视频流的隐患抓拍和识别的智能装置通过对目标视频数据中的目标图像进行目标检测，并生成检测到的目标物体的当前属性信息，将当前属性信息与预先确定的目标属性信息不匹配的目标图像标记为隐患抓拍图像，并输出带有标识框的隐患抓拍图像，有利于应用场景中的相关人员能够及时获悉存在的安全隐患，从而有利于应用场景中的设备以及人员的安全。
权利要求书clms
1.一种基于视频流的隐患抓拍和识别的智能装置，其特征在于，所述智能装置包括与外部设备通信连接并基于视频流的传输方式获取视频数据的获取模块以及与所述获取模块电连接的处理器，在所述获取模块从所述外部设备获取到目标视频数据之后，所述处理器执行的步骤包括：所述处理器从所述目标视频数据中获取目标图像；所述处理器利用深度卷积神经网络对所述目标图像执行目标检测的操作，提取所检测到的目标物体的标签信息和图像范围信息；所述处理器根据所述标签信息对所述目标物体进行分类，并生成所述目标物体的分类信息；所述处理器根据所述图像范围信息和所述分类信息，生成所述目标物体的当前属性信息；所述处理器判定所述当前属性信息与预先确定的目标属性信息是否匹配；若判定所述当前属性信息与预先确定的目标属性信息不匹配，则所述处理器将所述目标图像标记为隐患抓拍图像；所述处理器根据所述图像范围信息，生成用于标示所述目标物体在所述目标图像中位置范围的标识框；所述智能装置还包括与所述处理器通信连接的输出模块，所述输出模块用于输出从所述处理器获取的带有所述标识框的隐患抓拍图像。2.根据权利要求1所述的基于视频流的隐患抓拍和识别的智能装置，其特征在于，所述输出模块包括通信接口和/或显示器。3.根据权利要求1所述的基于视频流的隐患抓拍和识别的智能装置，其特征在于，所述处理器判定所述当前属性信息与预先确定的目标属性信息是否匹配，具体包括：所述处理器判定目标物体的分类信息与先验目标的分类信息是否匹配，若匹配，则所述处理器基于图像位置信息数值化算法，将所述目标物体的当前图像位置信息与先验目标的图像位置信息进行数值化处理，得出所述目标物体的当前图像位置信息所对应的当前转化值；所述处理器比对所述当前转化值与先验转化值，若比对结果表示两者匹配，则所述处理器将所述目标图像丢弃，若比对结果表示两者不匹配，则所述处理器得出所述当前属性信息与预先确定的目标属性信息不匹配的结果，进而将所述目标图像标记为隐患抓拍图像；其中，所述图像位置信息数值化算法是基于现实世界的空间坐标和图像中的像素平面坐标之间的转化关系而构建的、将图像位置信息通过具体数值表示的算法。4.根据权利要求3所述的基于视频流的隐患抓拍和识别的智能装置，其特征在于，所述图像位置信息数值化算法包括：求取目标物体所对应的图像范围内的s个像素点、、…对应的现实世界的坐标、、…如下：式中，i＝1,2,3…s,fx为预先确定的x轴方向的放大系数，fy为预先确定的y轴方向的放大系数,cx为预先确定的x轴方向对应的物理成像坐标系与像素成像坐标系之间的位移量，cy为预先确定的y轴方向对应的物理成像坐标系与像素成像坐标系之间的位移量，求出预先确定的参照像素点对应的现实世界的坐标如下：求出目标物体的当前图像位置信息所对应的当前转化值dw：5.根据权利要求1所述的基于视频流的隐患抓拍和识别的智能装置，其特征在于，所述智能装置设置在物联网系统中，所述物联网系统包括用于拍摄监控视频的摄像机以及与所述摄像机通信连接的网关，所述网关与若干个所述摄像机基于星型拓扑结构连接，所述网关还与所述智能装置通信连接。
说明书desc
技术领域本发明涉及电气工程技术领域，尤其涉及一种基于视频流的隐患抓拍和识别的智能装置。背景技术为了解决视频的数据量较大，在进行视频传输的过程中可以采用一种专用的流体化技术提取文件即视频流技术。基于视频流技术实现的视频数据传输，使用者可以在没有接到完整的数据信息前就能处理那些已接收的信息，这使得视频流技术能够广泛应用到对时效性要求较高的场景中。CN115173555A公开了一种基于低压智能断路器的线路监控保护方法及系统，其方法包括：采集线路相关信号并进行分析处理；通过串口将分析处理后的信号发送至通讯网络，并通过通讯网络将信号传输至服务器；通过服务器对处理后的数据进行智能监控，以实时监控线路是否发生短路；当发生短路时，通过低压智能断路器控制脱扣器对线路进行继电保护。CN113466608A公开了一种配网线路接地故障智能查找分析系统及方法，通过对配网线路接地故障查找装置手持终端的优化实现故障方向的智能判断，降低设备的使用难度，提高了便捷性和准确性，实现存储故障查找的测试数据通过数据线与国网手持终端交互上传控制中心，实现故障数字化大数据库的建设，提高故障查找效率。上述相关技术方案针对的是电气工程的故障排查，使得电气工程的安全性问题处于相对被动的状态。可见，如何对应用场景中所存在的安全隐患进行有效预判，是亟需解决的技术问题。发明内容本发明所要解决的技术问题在于，提供一种基于视频流的隐患抓拍和识别的智能装置。本发明公开了一种基于视频流的隐患抓拍和识别的智能装置，所述智能装置包括与外部设备通信连接并基于视频流的传输方式获取视频数据的获取模块以及与所述获取模块电连接的处理器，在所述获取模块从所述外部设备获取到目标视频数据之后，所述处理器执行的步骤包括：所述处理器从所述目标视频数据中获取目标图像；所述处理器利用深度卷积神经网络对所述目标图像执行目标检测的操作，提取所检测到的目标物体的标签信息和图像范围信息；所述处理器根据所述标签信息对所述目标物体进行分类，并生成所述目标物体的分类信息；所述处理器根据所述图像范围信息和所述分类信息，生成所述目标物体的当前属性信息；所述处理器判定所述当前属性信息与预先确定的目标属性信息是否匹配；若判定所述当前属性信息与预先确定的目标属性信息不匹配，则所述处理器将所述目标图像标记为隐患抓拍图像；所述处理器根据所述图像范围信息，生成用于标示所述目标物体在所述目标图像中位置范围的标识框；所述智能装置还包括与所述处理器通信连接的输出模块，所述输出模块用于输出从所述处理器获取的带有所述标识框的隐患抓拍图像。可见，本发明公开的基于视频流的隐患抓拍和识别的智能装置通过对目标视频数据中的目标图像进行目标检测，并生成检测到的目标物体的当前属性信息，将当前属性信息与预先确定的目标属性信息不匹配的目标图像标记为隐患抓拍图像，并输出带有标识框的该隐患抓拍图像，有利于应用场景中的相关人员能够及时获悉存在的安全隐患，从而有利于应用场景中的设备以及人员的安全。作为一种可选的实施方式，本发明中，所述输出模块包括通信接口和/或显示器。作为一种可选的实施方式，本发明中，所述处理器判定所述当前属性信息与预先确定的目标属性信息是否匹配，具体包括：所述处理器判定目标物体的分类信息与先验目标的分类信息是否匹配，若匹配，则所述处理器基于图像位置信息数值化算法，将所述目标物体的当前图像位置信息与先验目标的图像位置信息进行数值化处理，得出所述目标物体的当前图像位置信息所对应的当前转化值；所述处理器比对所述当前转化值与先验转化值，若比对结果表示两者匹配，则所述处理器将所述目标图像丢弃，若比对结果表示两者不匹配，则所述处理器得出所述当前属性信息与预先确定的目标属性信息不匹配的结果，进而将所述目标图像标记为隐患抓拍图像；其中，所述图像位置信息数值化算法是基于现实世界的空间坐标和图像中的像素平面坐标之间的转化关系而构建的、将图像位置信息通过具体数值表示的算法。作为一种可选的实施方式，本发明中，所述图像位置信息数值化算法包括：求取目标物体所对应的图像范围内的s个像素点、、…对应的现实世界的坐标、、…如下：式中，i＝1,2,3…s,fx为预先确定的x轴方向的放大系数，fy为预先确定的y轴方向的放大系数,cx为预先确定的x轴方向对应的物理成像坐标系与像素成像坐标系之间的位移量，cy为预先确定的y轴方向对应的物理成像坐标系与像素成像坐标系之间的位移量，求出预先确定的参照像素点对应的现实世界的坐标如下：求出目标物体的当前图像位置信息所对应的当前转化值dw：作为一种可选的实施方式，本发明中，所述智能装置设置在物联网系统中，所述物联网系统包括用于拍摄监控视频的摄像机以及与所述摄像机通信连接的网关，所述网关与若干个所述摄像机基于星型拓扑结构连接，所述网关还与所述智能装置通信连接。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明实施例的一种基于视频流的隐患抓拍和识别的智能装置的结构示意图；图2是本发明实施例的物联网系统的结构示意图；图3是本发明实施例的其中一种将目标图像标记为隐患抓拍图像的方法的流程示意图；图4是本发明实施例的处理器执行步骤S103的子步骤的流程示意图；图5是本发明实施例的另一种将目标图像标记为隐患抓拍图像的方法的流程示意图。具体实施方式为了使本技术领域的人员更好地理解本发明方案，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本文中提及“实施例”意味着，结合实施例描述的特定特征、结构或特性可以包含在本发明的至少一个实施例中。在说明书中的各个位置出现该短语并不一定均是指相同的实施例，也不是与其它实施例互斥的独立的或备选的实施例。本领域技术人员显式地和隐式地理解的是，本文所描述的实施例可以与其它实施例相结合。如图1所示，本发明公开的一种基于视频流的隐患抓拍和识别的智能装置包括与外部设备通信连接并基于视频流的传输方式获取视频数据的获取模块以及与获取模块电连接的处理器。可选的，获取模块可以是具有视频流数据信号接收功能的通信模块，该获取模块集成到智能装置中，使得该智能装置能够与外部设备通信连接并获取视频流数据，又进一步可选的，获取模块可以基于Wi-Fi通信连接或者蓝牙通信连接的实现方式，与外部设备建立无线通信连接。可选的，处理器可以是具有视频流数据处理功能、运算功能以及数据交互功能的控制芯片，如ARM系列的控制芯片。可选的，如图2所示，智能装置设置在物联网系统中，物联网系统包括用于拍摄监控视频的摄像机以及与摄像机通信连接的网关，网关与若干个摄像机基于星型拓扑结构连接，网关还与智能装置通信连接。如图3所示，在获取模块从外部设备获取到目标视频数据之后，处理器执行的步骤如下。S101、处理器从目标视频数据中获取目标图像。可选的，处理器可以通过逐帧截取视频流数据的方式，从目标视频数据中获取目标图像，或者可以通过设置关键时间节点，在目标视频数据中截取与该关键时间节点对应的图像作为目标图像。S102、处理器利用深度卷积神经网络对目标图像执行目标检测的操作，提取所检测到的目标物体的标签信息和图像范围信息。可选的，对该目标图像执行目标检测的操作，可以基于深度卷积神经网络进行，进一步可选的，该网络结构可以参照Fast-RCNN或者Yolo网络模型结构，又进一步可选的，可以根据应用场景的需要，选用对应的训练图像集对该深度卷积神经网络进行训练，以有利于目标检测操作的高效性。S103、处理器根据标签信息对目标物体进行分类，并生成目标物体的分类信息。S104、处理器根据图像范围信息和分类信息，生成目标物体的当前属性信息。S105、处理器判定当前属性信息与预先确定的目标属性信息是否匹配，若判定当前属性信息与预先确定的目标属性信息不匹配，则执行步骤S106。S106、处理器将目标图像标记为隐患抓拍图像。S107、处理器根据图像范围信息，生成用于标示目标物体在目标图像中位置范围的标识框。智能装置还包括与处理器通信连接的输出模块，输出模块用于输出从处理器获取的带有标识框的隐患抓拍图像。可选的，输出模块可以包括通信接口和/或显示器，其中，带有标识框的隐患抓拍图像可以通过该通信接口输入至输出模块，并进一步通过显示器将该隐患抓拍图像向应用场景中的相关人员展示，相关人员可以直观地从该隐患抓拍图像中的标识框标示出的图像位置范围，获悉该智能装置判定存在隐患的依据。可见，本发明公开的基于视频流的隐患抓拍和识别的智能装置通过对目标视频数据中的目标图像进行目标检测，生成检测到的目标物体的当前属性信息，将当前属性信息与预先确定的目标属性信息不匹配的目标图像标记为隐患抓拍图像，并输出带有标识框的隐患抓拍图像，有利于应用场景中的相关人员能够及时获悉存在的安全隐患，从而有利于应用场景中的设备以及人员的安全。在电气工程的应用场景中，上述提到的分类信息，可以是电气工程中的设备类型信息，也可以是电气工程的硬件系统中的部件类型信息，还可以是电气工程中的指示标志；上述提到的图像范围信息，可以通过有限个图像像素点组成的集合来表示，或者也可以通过以某个确定的像素点作为参照点，有限个图像中的像素点与该参照点之间的向量所组成的集合来表示。可选的，如图4、图5所示，处理器判定当前属性信息与预先确定的目标属性信息是否匹配的步骤，可以包括以下操作。S1051、处理器判定目标物体的分类信息与先验目标的分类信息是否匹配，若匹配，则处理器执行步骤S1052。分类信息可以用于区分目标物体是否为该应用场景中允许存在的，比如，在需要禁止明火的场景中，先验目标的分类信息中不具有与明火相关的物体信息，若目标物体的分类信息表示该目标物体为“火把”，则处理器能够判定目标物体的分类信息与先验目标的分类信息不匹配，即初步判定目标物体为“隐患”。S1052、处理器基于图像位置信息数值化算法，将目标物体的当前图像位置信息与先验目标的图像位置信息进行数值化处理，得出目标物体的当前图像位置信息所对应的当前转化值。S1053、处理器比对当前转化值与先验转化值，若比对结果表示两者匹配，则执行步骤S1053a，若比对结果表示两者不匹配，则执行步骤S1053b。S1053a、处理器将目标图像丢弃。对于无需标记为隐患抓拍图像的目标图像，处理器其对应的数据丢弃，有利于降低处理器内部缓存的数据量。S1054b、处理器得出当前属性信息与预先确定的目标属性信息不匹配的结果，进而将目标图像标记为隐患抓拍图像。其中，图像位置信息数值化算法是基于现实世界的空间坐标和图像中的像素平面坐标之间的转化关系而构建的、将图像位置信息通过具体数值表示的算法。具体而言，图像位置信息数值化算法可以包括以下操作。求取目标物体所对应的图像范围内的s个像素点、、…对应的现实世界的坐标、、…如下：式中，i＝1,2,3…s,fx为预先确定的x轴方向的放大系数，fy为预先确定的y轴方向的放大系数,cx为预先确定的x轴方向对应的物理成像坐标系与像素成像坐标系之间的位移量，cy为预先确定的y轴方向对应的物理成像坐标系与像素成像坐标系之间的位移量。其中，fx、fy、cx、cy为可以通过求解摄像机的内参矩阵获得，或者可以通过查阅摄像机相关说明而获得。求出预先确定的参照像素点对应的现实世界的坐标如下：求出目标物体的当前图像位置信息所对应的当前转化值dw：进一步可选的，可以基于该当前转化值与先验转化值之间的比值对该目标图像进行评分，并根据评分结果，判定该目标图像是否需要标记为隐患抓拍图像，这有利于提高隐患抓拍图像判定的准确性，进一步有利于应用场景中的相关人员能够及时获悉存在的安全隐患，从而更进一步有利于应用场景中的设备以及人员的安全。具体而言，该评分Q可以基于以下公式求得：式中，I为评判系数，Tn为当前转化值，To为先验转化值。另外，还需要满足|Tn-To|≤δ，δ为当前转化值和先验转化值之间的最大偏差，其大小可以根据实际应用过程中对于精度的要求进行调整，通常，对于精度要求越高，δ越小。又进一步可选的，评判系数I可以是基于具体应用场景的需要进行调整，比如，对于10分制的评分系统，评判系数I可以预设为10。以上所描述的装置实施例仅是示意性的，其中作为分离部件说明的模块可以是或者也可以不是物理上分开的，作为模块显示的部件可以是或者也可以不是物理模块，即可以位于一个地方，或者也可以分布到多个网络模块上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。最后应说明的是：本发明实施例公开的一种基于视频流的隐患抓拍和识别的智能装置所揭露的仅为本发明较佳实施例而已，仅用于说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解；其依然可以对前述的实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或替换，并不使相应的技术方案的本质脱离本发明的实施例技术方案的精神和范围。
