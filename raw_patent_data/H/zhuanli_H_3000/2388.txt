标题title
视频素材生成方法、装置、电子设备及存储介质
摘要abst
本公开提供了一种视频素材生成方法、装置、电子设备及存储介质，涉及图像处理技术领域，尤其涉及人工智能、大数据等技术领域。具体实现方案为：获取待切分视频；调度锚点切分服务对待切分视频进行内容分析，确定待切分视频中切换物理镜头的时间点，作为切分锚点；基于切分锚点将待切分视频切割为视频段；基于待切分视频的场景特征，调度与场景特征匹配的后处理服务处理视频段，得到视频素材。本公开实施例中，根据切换物理镜头的时间点切割待切分视频，实现对待切分视频的准确切分。此外，将生产视频素材的整个流程框架抽取为不同的、可单独调度的服务，可根据不同场景需求调度后处理服务，从而提高视频素材生产的效率。
权利要求书clms
1.一种视频素材生成方法，包括：获取待切分视频；调度锚点切分服务对所述待切分视频进行内容分析，确定所述待切分视频中切换物理镜头的时间点，作为切分锚点；基于所述切分锚点将所述待切分视频切割为视频段；基于所述待切分视频的场景特征，调度与所述场景特征匹配的后处理服务处理所述视频段，得到视频素材。2.根据权利要求1所述的方法，其中，所述调度锚点切分服务对所述待切分视频进行内容分析，确定所述待切分视频中切换物理镜头的时间点，作为切分锚点，包括：使用所述切分服务执行以下操作：对所述待切分视频进行抽帧处理，得到多个第一关键帧；确定相邻两帧第一关键帧之间的相似度；在所述相邻两帧第一关键帧之间的相似度小于相似度阈值的情况下，基于所述相邻两帧第一关键帧确定切换物理镜头的时间点，作为切分锚点。3.根据权利要求1所述的方法，其中，所述后处理服务包括字幕切除服务和水印擦除服务，所述基于所述待切分视频的场景特征，调度与所述场景特征匹配的后处理服务处理所述视频段，得到视频素材，包括：在所述场景特征包括字幕的情况下，调度所述字幕切除服务切除所述视频段中包含的字幕；在所述场景特征包括水印的情况下，调度所述水印擦除服务擦除所述视频段中的水印。4.根据权利要求3所述的方法，其中，所述调度所述水印擦除服务擦除所述视频段中的水印，包括：调度所述水印擦除服务执行以下操作：对所述视频段进行关键目标检测，并对所述视频段进行水印检测；在所述视频段中包括关键目标区域且包括水印区域的情况下，确定所述关键目标区域和所述水印区域的位置关系；在所述水印区域和所述关键目标区域不重叠，且所述水印区域位于视频帧的边界区域的情况下，对所述水印区域进行裁剪处理；在所述水印区域满足指定情形的情况下，对所述水印区域进行模糊处理；所述指定情形包括以下至少一种：所述水印区域和所述关键目标区域重叠、所述水印区域位于视频帧的中心区域。5.根据权利要求3或4所述的方法，其中，所述调度所述字幕切除服务切除所述视频段中包含的字幕，包括：调度所述字幕切除服务执行以下操作：对所述视频段进行抽帧处理，得到多帧第二关键帧；对各第二关键帧分别进行字幕识别，得到各第二关键帧的字幕区域；基于各第二关键帧的字幕区域，确定裁剪区域；从所述视频段的各帧图像中剪切掉所述裁剪区域。6.根据权利要求4所述的方法，其中，所述对所述视频段进行关键目标检测，并对所述视频段进行水印检测，包括：对所述视频段进行抽帧处理，得到多帧第三关键帧；分别对各第三关键帧进行关键目标检测和水印检测。7.根据权利要求4所述的方法，其中，所述确定所述关键目标区域和所述水印区域的位置关系，包括：确定各第三关键帧中关键目标区域的并集，得到总关键目标区域；以及，确定各第三关键帧中水印区域的并集，得到总水印区域；确定所述总关键目标区域和所述总水印区域的位置关系。8.根据权利要求1-7中任一项所述的方法，其中，所述调度与所述场景特征匹配的后处理服务处理所述视频段，包括：基于对象存储服务将所述视频段上传到云服务器，得到所述视频段在所述云服务器中的存储地址；基于所述视频段的存储地址调度所述后处理服务处理所述视频段。9.根据权利要求1-8中任一项所述的方法，还包括：在具有多个视频段的情况下，生成统一调度请求，所述统一调度请求中包括所述多个视频段在云服务器中的存储地址、需要调度的后处理服务、以及返回结果要求；将所述统一调度请求发送给所述后处理服务，以使所述后处理服务执行以下操作：基于所述多个视频段在云服务器中的存储地址，下载所述多个视频段；基于需要调度的后处理服务对所述多个视频段进行处理，并将处理结果按照所述返回结果要求进行处理后得到所述统一调度请求的响应信息。10.一种视频素材生成装置，包括：获取模块，用于获取待切分视频；第一调度模块，用于调度锚点切分服务对所述待切分视频进行内容分析，确定所述待切分视频中切换物理镜头的时间点，作为切分锚点；切割模块，用于基于所述切分锚点将所述待切分视频切割为视频段；第二调度模块，用于基于所述待切分视频的场景特征，调度与所述场景特征匹配的后处理服务处理所述视频段，得到视频素材。11.根据权利要求10所述的装置，其中，所述第一调度模块，用于：使用所述切分服务执行以下操作：对所述待切分视频进行抽帧处理，得到多个第一关键帧；确定相邻两帧第一关键帧之间的相似度；在所述相邻两帧第一关键帧之间的相似度小于相似度阈值的情况下，基于所述相邻两帧第一关键帧确定切换物理镜头的时间点，作为切分锚点。12.根据权利要求10所述的装置，其中，所述第二调度模块，包括：第一调度子模块，用于在所述场景特征包括字幕的情况下，调度所述字幕切除服务切除所述视频段中包含的字幕；第二调度子模块，用于在所述场景特征包括水印的情况下，调度所述水印擦除服务擦除所述视频段中的水印。13.根据权利要求12所述的装置，其中，所述第二调度子模块，用于：调度所述水印擦除服务执行以下操作：对所述视频段进行关键目标检测，并对所述视频段进行水印检测；在所述视频段中包括关键目标区域且包括水印区域的情况下，确定所述关键目标区域和所述水印区域的位置关系；在所述水印区域和所述关键目标区域不重叠，且所述水印区域位于视频帧的边界区域的情况下，对所述水印区域进行裁剪处理；在所述水印区域满足指定情形的情况下，对所述水印区域进行模糊处理；所述指定情形包括以下至少一种：所述水印区域和所述关键目标区域重叠、所述水印区域位于视频帧的中心区域。14.根据权利要求12或13所述的装置，其中，所述第一调度子模块，用于：调度所述字幕切除服务执行以下操作：对所述视频段进行抽帧处理，得到多帧第二关键帧；对各第二关键帧分别进行字幕识别，得到各第二关键帧的字幕区域；基于各第二关键帧的字幕区域，确定裁剪区域；从所述视频段的各帧图像中剪切掉所述裁剪区域。15.根据权利要求13所述的装置，其中，执行所述对所述视频段进行关键目标检测，并对所述视频段进行水印检测，所述第二调度子模块，用于：对所述视频段进行抽帧处理，得到多帧第三关键帧；分别对各第三关键帧进行关键目标检测和水印检测。16.根据权利要求13所述的装置，其中，执行所述确定所述关键目标区域和所述水印区域的位置关系，所述第二调度子模块，用于：确定各第三关键帧中关键目标区域的并集，得到总关键目标区域；以及，确定各第三关键帧中水印区域的并集，得到总水印区域；确定所述总关键目标区域和所述总水印区域的位置关系。17.根据权利要求10-16中任一项所述的装置，其中，所述第二调度模块，包括：获取子模块，用于基于对象存储服务将所述视频段上传到云服务器，得到所述视频段在所述云服务器中的存储地址；调度子模块，用于基于所述视频段的存储地址调度所述后处理服务处理所述视频段。18.根据权利要求10-17中任一项所述的装置，还包括：生成模块，用于在具有多个视频段的情况下，生成统一调度请求，所述统一调度请求中包括所述多个视频段在云服务器中的存储地址、需要调度的后处理服务、以及返回结果要求；发送模块，用于将所述统一调度请求发送给所述后处理服务，以使所述后处理服务执行以下操作：基于所述多个视频段在云服务器中的存储地址，下载所述多个视频段；基于需要调度的后处理服务对所述多个视频段进行处理，并将处理结果按照所述返回结果要求进行处理后得到所述统一调度请求的响应信息。19.一种电子设备，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-9中任一项所述的方法。20.一种存储有计算机指令的非瞬时计算机可读存储介质，其中，所述计算机指令用于使所述计算机执行根据权利要求1-9中任一项所述的方法。21.一种计算机程序产品，包括计算机程序，所述计算机程序在被处理器执行时实现根据权利要求1-9中任一项所述的方法。
说明书desc
技术领域本公开涉及图像处理技术领域，尤其涉及人工智能、大数据等技术领域。背景技术在当前AI技术发展的大背景下，AIGC已逐步在各主流APP中占有一席之地，并且逐渐扩大占比。而视频素材则成为AIGC内容生产最根本、最直接的内容来源。如何生产视频素材是业内比较关注的基础问题。发明内容本公开提供了一种视频素材生成方法、装置、设备以及存储介质。根据本公开的一方面，提供了一种视频素材生成方法，包括：获取待切分视频；调度锚点切分服务对待切分视频进行内容分析，确定待切分视频中切换物理镜头的时间点，作为切分锚点；基于切分锚点将待切分视频切割为视频段；基于待切分视频的场景特征，调度与场景特征匹配的后处理服务处理视频段，得到视频素材。根据本公开的另一方面，提供了一种视频素材生成装置，包括：获取模块，用于获取待切分视频；第一调度模块，用于调度锚点切分服务对待切分视频进行内容分析，确定待切分视频中切换物理镜头的时间点，作为切分锚点；切割模块，用于基于切分锚点将待切分视频切割为视频段；第二调度模块，用于基于待切分视频的场景特征，调度与场景特征匹配的后处理服务处理视频段，得到视频素材。根据本公开的另一方面，提供了一种电子设备，包括：至少一个处理器；以及与该至少一个处理器通信连接的存储器；其中，该存储器存储有可被该至少一个处理器执行的指令，该指令被该至少一个处理器执行，以使该至少一个处理器能够执行本公开中任一实施例的方法。根据本公开的另一方面，提供了一种存储有计算机指令的非瞬时计算机可读存储介质，其中，该计算机指令用于使该计算机执行根据本公开中任一实施例的方法。根据本公开的另一方面，提供了一种计算机程序产品，包括计算机程序，该计算机程序在被处理器执行时实现根据本公开中任一实施例的方法。本公开实施例中，根据切换物理镜头的时间点切割待切分视频，实现对待切分视频的准确切分。此外，将生产视频素材的整个流程框架抽取为不同的、可单独调度的服务，可根据不同场景需求调度后处理服务，从而提高视频素材生产的效率。应当理解，本部分所描述的内容并非旨在标识本公开的实施例的关键或重要特征，也不用于限制本公开的范围。本公开的其它特征将通过以下的说明书而变得容易理解。附图说明附图用于更好地理解本方案，不构成对本公开的限定。其中：图1是根据本公开一实施例的视频素材生成方法的流程示意图；图2a是根据本公开另一实施例寻找切分锚点的流程示意图；图2b是根据本公开另一实施例确定切分锚点的示例图；图3a是根据本公开另一实施例的字幕切除服务的流程示意图；图3b是根据本公开另一实施例确定裁剪区域的示例图；图4a是根据本公开另一实施例的水印擦除服务的处理流程示意图；图4b是根据本公开另一实施例处理图像组的示例图；图5是根据本公开另一实施例的视频素材生成的整体流程示意图；图6是根据本公开一实施例的视频素材生成装置的结构示意图；图7是用来实现本公开实施例的视频素材生成方法的电子设备的框图。具体实施方式以下结合附图对本公开的示范性实施例做出说明，其中包括本公开实施例的各种细节以助于理解，应当将它们认为仅仅是示范性的。因此，本领域普通技术人员应当认识到，可以对这里描述的实施例做出各种改变和修改，而不会背离本公开的范围和精神。同样，为了清楚和简明，以下的描述中省略了对公知功能和结构的描述。本公开实施例中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元。方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。对原始视频按照处理流程进行处理，可从中获取到视频素材。然而，视频素材并非是直接从原始视频中剪切出的视频段，而是需要按照视频素材的生产要求处理视频段，才能得到视频素材。因此，对原始视频的处理流程涉及多个操作。如果处理流程中各个步骤串行执行，将使得视频素材的生产过程耗时较长、效率低下。因此如何高效地生成视频素材是本公开实施例关注的问题。有鉴于此，如图1所示，为本公开实施例中视频素材生成方法的流程示意图，包括：S101，获取待切分视频。S102，调度锚点切分服务对待切分视频进行内容分析，确定待切分视频中切换物理镜头的时间点，作为切分锚点。摄影机或照相机通过作为光学部件的镜头，完成影像的采集。镜头根据焦距的长度被分为三个类型，包括：标准镜头、长焦镜头和短焦镜头。针对标准镜头，其焦距多为40～50mm，景物的透视关系与正常人眼观察的透视关系比较接近。针对长焦镜头，其焦距长于标准镜头焦距，长焦镜头的特点是视角小、景深小、变形小、透视效果差。针对短焦镜头，其焦距短于标准镜头焦距，短焦镜头也叫“广角镜头”，其特点是视野大、景深大。除了可以根据上述区别区分不同的物理镜头之外，本公开实施例中，由于一段待切分视频中可能包括多帧图像，可根据图像所表达的不同内容来区分不同的物理镜头。例如，同一角色的近景和远景不同，可作为不同的物理镜头进行处理。再例如，同一角色的正面镜头和侧面镜头也可以作为不同的物理镜头。当然，不同关键角色的画面可理解为不同的物理镜头，例如演员1的镜头和演员2的镜头属于不同的物理镜头。本公开实施例中，同一物理镜头所表达的内容是阐述同一关键角色的相同或相似状态，基于物理镜头不同，可得到待切分视频的多个切分锚点。S103，基于切分锚点将待切分视频切割为视频段。在切分锚点处，对待切分视频进行切割，得到视频段。可以理解的是，一个待切分视频中，可包括一个或多个切分锚点。每个切分锚点作为切割点，将待切分视频切割为两段。由此，可理解的是，在具有n-1个切分锚点的情况下，可得到n段视频段，其中n为大于1的正整数。针对每个视频段，后续的处理是相同的。S104，基于待切分视频的场景特征，调度与场景特征匹配的后处理服务处理视频段，得到视频素材。基于切分锚点切分待切分视频是不可或缺的操作。得到视频段之后的后处理方式可根据实际业务需求设置，不同的业务需求可配置不同的后处理方式。但无论何种业务需求，均可以按照本公开实施例的实施方式，将整个处理流程框架配置为独立的服务进行调度。即，包括锚点切分服务和后处理服务。其中，后处理服务可根据不同业务需求配置一种或多种服务。本公开实施例中，根据切换物理镜头的时间点切割待切分视频，使得相同物理镜头下的视频帧汇总到同一时间段中，实现对待切分视频的准确切分。此外，本公开实例中，将生产视频素材的整个流程框架抽取为不同的、可单独调度的服务，在视频素材生成过程中，可基于需求来调度不同的服务，从而提高视频素材生产的效率。而且，调度后处理服务时，可根据待切分场景特征来调度相应的后处理服务，实现按场景特征的灵活调度，可进一步提高视频素材生产的效率。在一些实施例中，待切分视频可能存在不同的场景特征，例如，一些视频需要去字幕、一些视频需要去水印、还有一些视频既需要去字幕也需要去水印。对于不同的场景特征，存在多种后处理服务。调度与场景特征相匹配的后处理服务来处理视频段，从而得到高可用的视频素材。可做到有针对性地对视频段进行后处理，例如对于不需要切除字幕的待切分视频，不需要调度相应的后处理服务来识别并切除字幕，不仅提高了视频素材生产的效率，也避免了资源浪费。下面对本公开实施例提供的视频素材生成方法做进一步说明。一、锚点切分服务如前文所阐述的，需要从待切分视频中找到物理镜头的切换点，从而确定出切分锚点。为了能够准确地生成视频素材，本公开实施例中，可定义视频内容发生变化的时间点作为切分锚点。实施时，可确定相邻两帧之间的相似度，若该相似度大于相似度阈值，则确定视频内容在这两帧之间发生变化，即切换了物理镜头。在待切分视频的播放时间轴上切换物理镜头的时间点作为切分锚点。一种可能的实施方式中，可逐帧比较待切分视频中的相邻帧，但逐帧比较会耗费较多的处理资源。实施时，由于同一物理镜头下，不同图像帧的内容很相似，故可对比关键帧的图像内容，以提高寻找切分锚点的效率。如图2a所示，为锚点切分服务寻找切分锚点的流程示意图，包括：S201，对待切分视频进行抽帧处理，得到多个第一关键帧。实施时，可每隔五帧对待切分视频抽帧，得到第一关键帧。当然，可以根据待切分视频的帧率，动态确定抽帧的帧数间隔，本公开实施例对此不作限定。S202，确定相邻两帧第一关键帧之间的相似度。在所抽取的多个第一关键帧中，分别取相邻两帧进行相似度对比。目的在于判断相邻两帧视频图像是否切换了物理镜头。实施时，可以采用神经网络模型提取第一关键帧的图像特征，然后计算两帧图像特征之间的余弦距离，作为相邻两帧第一关键帧的相似度。此外，除了采取上述方式之外，还可以采用其他方式来计算两帧图像之间的相似度。例如SSIM是一种用来衡量图片相似度的指标。SSIM由亮度对比、对比度对比、结构对比三部分组成，可从多方面衡量两帧图像之间的相似度。还可以采用同位置像素值的平均差值作为两帧图像之间的相似度。需要说明的是，本公开实施例中，对如何确定相似度的方式不作具体限定。S203，在相邻两帧第一关键帧之间的相似度小于相似度阈值的情况下，基于相邻两帧第一关键帧确定切换物理镜头的时间点，作为切分锚点。在得到相邻两帧第一关键帧之间的相似度后，将所得相似度与相似度阈值进行比较。在所得相似度小于相似度阈值的情况下，说明该相邻两帧之间的物理镜头不同，即在该相邻两帧间发生了物理镜头的切换。对于该相邻两帧第一关键帧，可将时序在前的第一关键帧在待切分视频中的播放时间点作为切分锚点，也可以将时序在后的第一关键帧在待切分视频中的播放时间点作为切分锚点。在其他实施例中，为了更加准确地确定切分锚点，还可以在确定相邻两帧第一关键帧之间切换物理镜头的情况下，进一步将该相邻两帧第一关键帧之间的视频帧集合进行分析。分析时，可确定该视频帧集合中每相邻两帧图像之间的相似度，进而查找出相似度最大的相邻两帧，将该相邻两帧的任一帧在待切分视频中的播放时间点作为切分锚点。例如，如图2b所示，第一关键帧A和第二关键帧B之间切换了物理镜头。第一关键帧A和第一关键帧B之间一共有3帧图像，包括图像1、图像2和图像3。可以确定第一关键帧A和图像1之间的相似度a1、图像1和图像2之间的相似度a2，图像2和图像3之间的相似度a3、以及图像3和第一关键帧B之间的相似度a4。在a1、a2、a3和a4中取最大值，假设为a2，则选取图像1或图像2的位置作为切分锚点。由于每帧图像中都会带有时间戳，可将图像1或图像2的时间戳作为在时间维度上的切分锚点。综上所述，本公开实施例中，从待切分视频中抽取第一关键帧，进而比对相邻两帧第一关键帧间的相似度，以确定发生物理镜头切换的切分锚点。通过这种方式，可在保证准确性的基础上降低需要处理的帧数，以提高视频素材的生产效率。降低需要处理的帧数，也能够节省系统的资源消耗和内存空间，提高了资源利用率。二、后处理服务经锚点切分服务产生多个视频段，此时，调用后处理服务对多个视频段进行后处理。一些可能的实施例中，后处理服务包括字幕切除服务和水印擦除服务。在这两个后处理服务的基础上，可基于待切分视频的场景特征，调度与场景特征匹配的后处理服务处理视频段，进而得到视频素材。例如，在场景特征包括字幕的情况下，调用字幕切除服务，可以切除视频段中包含的字幕。再例如，在场景特征包括水印的情况下，调用水印擦除服务，可以擦除视频段中包含的水印。由此，本公开实施例中，可独立地使用字幕切除服务来切除字幕，亦可独立地使用水印擦除服务来擦除水印。可依场景特征不同，灵活调度不同的服务来进行后处理，提高了视频素材生生成的效率和灵活性。下面分别就字幕切分服务和水印切除服务做进一步说明。1)字幕切除服务由于字幕一般位于视频段的边缘区域，故，可基于字幕在画面中的位置属性对字幕进行切除。如图3a所示，为本公开实施例中字幕切除服务的流程示意图，调度字幕切除服务执行以下操作，包括：S301，对视频段进行抽帧处理，得到多帧第二关键帧。每个视频段都对应一个物理镜头，在同一物理镜头中，字幕的位置、大小基本可以认为是相同的。基于此，对于每个视频段，只需要抽取一帧作为第二关键帧即可；对于多个视频段，则抽取得到多帧第二关键帧。当然，字幕的长度未可知，字幕长度的变化可能影响字幕所占的区域。因此，实施时，为了提高视频素材的质量，可以从同一视频段中抽取多帧第二关键帧。S302，对各第二关键帧分别进行字幕识别，得到各第二关键帧的字幕区域。利用字幕切除服务的字幕检测功能，对各第二关键帧分别进行字幕识别，确定各第二关键帧中字幕所在位置，得到各第二关键帧的字幕区域。一种可能的实施方式中，可采用OCR技术识别出各第二关键帧中的字幕区域。在另一种实施例中，可采用神经网络处理各第二关键帧，得到各第二关键帧中的字幕内容以及字幕位置。需要说明的是，能够识别出字幕位置和字幕内容的字幕识别技术均适用于本公开实施例，对此不作限定。S303，基于各第二关键帧的字幕区域，确定裁剪区域。由于对各第二关键帧是分别进行处理的，各第二关键帧的字幕内容、长度均可能会存在差别。因此，各第二关键帧的字幕区域不会完全相同。鉴于此，本公开实施例中可示例性的提供以下两种实施方式来确定出裁剪区域：对各第二关键帧分别确定裁剪区域。对每帧第二关键帧而言，将该第二关键帧的字幕区域确定为该第二关键帧的裁剪区域。由此，得到和第二关键帧数量相同的裁剪区域。确定各字幕区域的最小包围盒，得到裁剪区域。对于每帧第二关键帧的字幕区域，获取其位置信息。例如，每个字幕区域分别为一个矩形框。位置信息中可包括字幕区域的参考顶点坐标，以及矩形框的宽和高。可对各字幕区域的位置信息进行分析，得到能够包含所有字幕区域的最小包围盒，将该最小包围盒确定为各帧图像共用的裁剪区域。例如，如图3b所示，第二关键帧A的字幕区域为矩形框b1、第二关键帧B的字幕区域为矩形框b2，则能够包围矩形框b1和矩形框b2的最小矩形框b3为各字幕区域的最小包围盒。S304，从视频段的各帧图像中剪切掉裁剪区域。从视频段的各帧图像中剪切掉裁剪区域，其中，对于S303的，同一视频段可能采用多个裁剪区域进行裁剪，以尽可能保留更多的图像内容；对于S303的，由于同一视频段采用同一裁剪区域，简化了对视频段的裁剪操作，能够提高视频素材的生成效率。本公开实施例中，独立的字幕切除服务可独立地执行字幕相关的处理。且，可以在字幕切除失败的情况下，重新调用字幕切除服务处理视频段，而不需要重新从待切分视频的锚点切分服务开始切分视频段，提高了视频素材的生成效率。2)、水印擦除服务在场景特征包括水印的情况下，调用水印擦除服务，可以擦除视频段中包含的水印。如图4a所示，为本公开实施例中水印擦除服务的处理流程示意图，包括：S401，对视频段进行关键目标检测，并对视频段进行水印检测。其中，关键目标可根据实际情况确定。例如，待切分视频主要阐述人物，则关键目标为人脸。待切分视频讲述动物世界，则关键目标可理解为动物头像。例如，讲述狮子的生活过程，可将关键目标设置为狮子头像。运用关键目标检测技术和水印检测技术，分别对视频段进行关键目标检测和水印检测。实施时，关键目标检测和水印检测不区分先后顺序。例如，可对同一视频段先进行关键目标检测，再进行水印检测；或，对同一视频段先进行水印检测，再进行关键目标检测。当然，关键目标检测和水印检测可以独立执行，没有依赖关系。由此也可以同时对同一视频段分别进行关键目标检测和水印检测。例如，可以将人脸检测和水印检测分配给不同的内核，由此分别调用不同的内核处理同一视频段，实现人脸检测和水印检测的同步执行。实施时，可采用实例分割方法，实现关键目标检测，得到关键目标的位置。本公开实施例中的水印可以指证明视频出处或版权的标记，例如生产者的l ogo可以理解为需要检测的水印。S402，在视频段中包括关键目标区域且包括水印区域的情况下，确定关键目标区域和水印区域的位置关系。可以理解的是，当包含关键目标区域且不包含水印区域时，即不存在水印遮挡关键信息的情况，无需执行擦除水印的操作。当包含水印且不包含关键目标时，也可理解为在不存在水印遮挡关键信息的情况下，无需执行擦除水印的操作。S403，在水印区域和关键目标区域不重叠，且水印区域位于视频帧的边界区域的情况下，对水印区域进行裁剪处理。其中，边界区域可理解为视频段的画面中的四周区域，边界区域作为视觉的非中心点，对水印进行裁剪可降低对画面的视觉感受的不良影响，保证画面质量稳定。S404，在水印区域满足指定情形的情况下，对水印区域进行模糊处理。该指定情形包括以下至少一种：水印区域和关键目标区域重叠、水印区域位于视频帧的中心区域。也即，当视频区域位于视频帧的中心区域时，如果处理水印区域会影响视觉焦点位置的信息，影响视觉感受，所以为了保证画面质量，对居于中心区域的水印不能进行裁剪，此时需要通过模糊处理的方式来减少水印信息。当水印区域和关键目标区域重叠时，为了尽可能多的保留关键目标的信息，不对水印区域进行裁剪，而是采用模糊处理的方式。本公开实施例中，独立的水印擦除服务可实现擦除视频段水印的效果。且，在水印擦除失败的情况下，由于水印擦除服务可独立调度，不需要重新从待切分视频的锚点切分服务开始切分视频段，提高了水印擦除效率，也提高了视频素材生成的效率。综上而言，本公开实施例中，基于不同的视频段后处理场景，分别调用不同的后处理服务对视频段进行后处理。当视频段只需要去字幕时，调用字幕切除服务对视频段进行处理；当视频段只需要去水印时，调用水印擦除服务对视频段进行处理；当视频段既需要去字幕，也需要去水印时，可调用字幕切除服务对视频段进行处理，并调用水印擦除服务继续对视频段进行处理。后处理服务之间相互独立，可针对不同需求场景进行动态调用。当某服务执行失败时，也可单独地重新调用该服务，而不用从最初的切分视频段开始对待切分视频进行处理，一定程度上提高了后处理效率，也提高了视频素材生成效率。在一些实施例中，对于视频段中每帧图像，可分别进行关键目标检测和水印检测。但这样处理，由于需要处理的图像帧数量较大，当大量的待切分视频等待处理时，显然会极大降低视频素材的生产效率。因此，本公开实施例中，水印擦除服务同样对视频段进行抽帧处理，得到多帧第三关键帧。之后，分别对各第三关键帧进行人脸检测和水印检测。对于各视频段，不提取全部序列帧，而是进行抽帧处理，得到多帧第三关键帧。获取第三关键帧的目的，是为关键目标检测和水印检测提供物料基础，而关键目标检测和水印检测是水印擦除服务所涵盖的功能。水印擦除服务只需对视频段进行抽帧处理，以确定关键目标位置和水印位置，以及关键目标位置和水印位置的相对关系。对视频段抽帧，既可满足关键目标检测需求和水印检测需求，又能够降低需要处理的帧数，可提高视频素材的生产效率，降低资源消耗。以人脸检测为例，对视频段分别进行人脸检测和水印检测，目的在于获取人脸位置、水印位置，以及人脸位置和水印位置的相对关系，以判断应该对水印区域进行模糊处理，还是直接将水印区域切除掉。根据不同的情况采取相应的水印擦除方式，提高了水印擦除效率，也提高了视频素材生成效率。在一些实施例中，可以针对每帧第三关键帧,分别确定其包含的关键目标区域和水印区域的相对位置关系。例如，图4b所示，第三关键帧A1之前包含5帧图像，即图4b中的图像组1；第三关键帧A2之前也包含5帧图像，即图4b中的图像组2。在确定第三关键帧A1的关键目标区域和水印区域重叠时，以第三关键帧的关键目标区域和水印区域为基准，对图像组1以及第三关键帧A1中的水印区域进行裁剪或模糊处理。类似的，对图像组2以及第三关键帧A2，以第三关键帧A2的水印区域为基准，对第三关键帧A2以及图像组2进行模糊处理或裁剪。当然，除了图4b示出的以第三关键帧为基准，采用相同方式处理其之前的视频帧之外，还可以第三关键帧为基准，采用相同方式，处理第三关键帧之后的且位于下一关键帧之前的视频帧。在另一些实施例中，为了进一步提高视频素材的生成效率，本公开实施例中可确定出视频段中关键目标区域和水印区域的整体位置关系，对同一视频段的每帧图像采用相同的方式进行处理。则，确定关键目标区域和水印区域的位置关系，可实施为：分别确定各第三关键帧中关键目标区域的并集和水印区域的并集，得到总关键目标区域以及总水印区域，之后，确定总关键目标区域和总水印区域的位置关系。一种情况下，视频段中可能包含一个关键目标，则相应地，若检测到水印，则确定该关键目标在各第三关键帧中区域的第一最小包围盒，也即该第一最小包围盒能够将关键目标在各第三关键帧中的位置均包含进来。同理，可确定水印在各第三关键帧中区域的第二最小包围盒，也即该第二最小包围盒能够将水印在各第三关键帧中的位置均包含进来。由此，通过比对第一最小包围盒和第二最小包围盒的位置关系，可确定水印是否遮挡关键目标。另一种情况下，视频段中包含多个关键目标，则针对每个关键目标在不同第三关键帧中进行追踪，可分别得到每个关键目标在第三关键帧中的位置。针对每个关键目标，可采用上述方法得到各关键目标的第一最小包围盒和水印的第二最小包围盒。由此，可确定水印是否遮挡关键目标。在水印遮挡任一关键目标的情况下，对水印进行模糊处理。在另一种情况下，视频段中包含多个关键目标，也会包含多种水印，则针对每个关键目标和每种水印，可采用上述方法确定二者在位置上是否重叠。在重叠的情况下，对该种水印进行模糊处理。在不重叠的情况下，对该种水印进行裁剪。本公开实施例中，通过考虑水印和关键目标的总体情况，而不是考虑每帧第三关键帧中水印和关键目标的个体情况，可提高确定水印和关键目标的位置关系的效率，从而提高视频素材的生成效率。在一些实施例中，生成的视频段可以存储在本地，以便于调用后处理服务时，后处理服务能从本地获取视频段。然而，在高并发的场景中，本地存储容易因为存储空间不足或因为存储的是临时文件，导致视频段生成失败或被删除。有鉴于此，本公开实施例中，基于对象存储服务，将视频段上传到云服务器，得到视频段在云服务器中的存储地址；基于视频段的存储地址，调度后处理服务处理视频段。其中，云存储包括私有云、混合云、云托管、原生云等方式，实施时，可采取任一种云存储方式。由此，云服务存储可节约本地资源，避免本地临时文件被系统删除，或磁盘占用较高导致本地文件生成失败，进而导致最终的素材生成失败。在调度与场景特征匹配的后处理服务处理视频段时，可基于视频段的存储地址，调度后处理服务处理视频段。而不是基于本地存储的临时文件，来调用后处理服务对视频段进行处理。本公开实施例中，通过云存储的方式存储视频段，避免了本地临时文件占用资源大、易丢失、视频素材生成可能会失败的风险，节省了本地资源，提高了视频素材生成效率。在一些可能的实施方式中，可实现每个视频段发一个调度请求给后处理服务。但这种调度方法过于依赖调度请求的产生，不能进行批量处理，对于大量待切分视频资源处理效率十分缓慢。本公开的一些实施例中，采用p i pe l i ne流水线技术对多个视频段进行统一调度。在具有多个视频段的情况下，生成统一调度请求，统一调度请求中包括多个视频段在云服务器中的存储地址、需要调度的后处理服务以及返回结果要求。将统一调度请求发送给后处理服务，以使后处理服务执行以下操作：基于多个视频段在云服务器中的存储地址，下载多个视频段；基于需要调度的后处理服务对多个视频段进行处理，并将处理结果按照返回结果要求进行处理后得到统一调度请求的响应信息。通过统一调度请求，同时调度多个视频段给后处理服务进行处理，可节约带宽、提高视频段的处理速度，提升了服务调度效率。综上，结合云存储，在云服务器中存储多个视频段，并，可基于多个视频段在云服务器中的存储地址，下载多个视频段。摒弃了将多个视频段文件存储在本地文件夹中的资源存储方式。基于多个视频段在云服务器中的存储地址，下载多个视频段，可节约本地空间资源，提高生成视频素材的效率。以调度水印切除服务为例，对本公开实施例中的统一调度请求和响应信息进行说明。本公开实施例中，统一调度请求的入参分为两部分，包括：1.要被处理的数据：i nput_data，该数据中包含的是视频段的链接；在需要对多个视频段进行处理时，i nput_data中可携带多个视频段各自的链接；2.要请求的后处理服务feat_args，该数据中包含的是所需调用的后处理服务的唯一标识。当不同视频段调用不同的后处理服务时，可以每个视频段的i nput_data和feat_args构成一个信息组，每个信息组中包含一个被调用的后处理服务，但，可包括一个或多个视频段的链接。返回结果要求中，可要求各视频段处理成功或处理失败时的反馈信息，以及，在处理成功的情况下，处理结果以何种方式进行编码压缩。例如，可要求对处理结果进行编码，则得到处理结果后相应地进行解码，以减少交互的数据量。例如，调用字幕切除服务时，处理结果包括每帧图像的字幕位置、字幕内容，处理结果进行编码后返回。为便于执行下载操作，本公开实施例中，锚点切分服务、字幕切除服务和水印擦除服务可共用同一下载模块。如图5所示，为本公开实施例中视频素材生成方法的整体流程示意图。如图5所示：视频切分请求中包括待切分视频的外网链接。下载模块接收到该视频切分请求后，如图5中分支所示，通过第一链接转换节点将外网链接转换为第一内网链接。而后，通过第二链接转换节点将第一内网链接转换为高清视频外网链接。之后，通过第三链接转换节点转换为高清视频的内网链接。如图5中的分支所示，下载模块得到的第一内网链接输入给锚点切分节点，得到待切分视频的切分锚点。下载模块得到的高清视频的内网链接输入给切分节点，由该节点下载高清视频并基于切分锚点进行切分得到视频段，并存储在第一文件夹。下载模块得到的第一内网链接可作为参数传递下来。第一文件夹中的视频段通过生成节点得到视频段的键值。视频段链接生成节点基于视频段的键值得到视频段在云服务器中的链接，由此整个锚点切分服务完成处理，可生成锚点切分服务的响应信息，以便于基于该响应信息调用后续的字幕切除服务和水印擦除服务。假设视频段中包含字幕需要切除，则基于视频段的链接生成字幕切除服务的云请求，来调用字幕切除服务。字幕切除服务采用下载模块从云服务器中下载视频段，并存储到第二文件夹中。字幕检测服务节点调用字幕检测服务识别视频段中的字幕。实施时，字幕检测服务节点基于视频段的url对视频段进行抽帧，并对抽取的关键帧进行字幕识别得到字幕识别结果。字幕识别结果传输给字幕切分节点。字幕切分节点可基于cv.VideoCapture方法获取待切分视频的宽和高，由此得到视频段的宽度和高度。字幕切分节点可获取视频段的帧数、帧率，得到视频段的时长。字幕切分节点基于视频段的url生成待切分视频的第三文件夹。字幕切分节点，基于频段的宽度、高度、时长信息切除视频段中的字幕，并将处理结果传输给视频素材上传节点，由该节点将切除字幕的视频段上传到云端，并返回响应结果。类似的，需要调用水印擦除服务的情况下，锚点切分服务基于视频段的链接生成水印擦除请求。水印擦除服务基于下载模块下载视频段，并将下载的视频段存储在第四文件夹)中。水印擦除服务中的人脸检测节点，人脸检测节点可调用人脸检测服务对第四文件夹中的视频段进行人脸检测，得到人脸检测结果。同时，水印擦除服务中的水印检测节点，可调用水印检测服务对第四文件夹中的视频段进行水印检测，得到水印检测结果。水印擦除节点，基于人脸检测结果和水印检测结果对水印进行裁切或模糊处理，得到擦除水印的视频段。该视频段经视频素材上传节点上传到云服务器，得到擦除水印的视频段的存储键值。擦除水印的视频段，被时间序列帧图上传节点抽帧后，将帧序列上传给云服务器，得到帧序列的存储键值，汇总这两个存储介质的相关信息，得到水印擦除服务的响应信息。需要说明的是，当需要切除视频段的字幕时，水印擦除服务可基于字幕切除服务的处理结果执行操作。也即，水印擦除服务，一开始下载视频端段的链接是字幕擦除服务处理后的视频段的链接。由此，本公开实施例中，提供不同的可独立调用的服务，来提高视频素材的生成效率。不同服务采用相应的节点进行处理。各节点执行完任务后可对相关的本地文件夹进行清理以释放存储资源。基于相同的技术构思，本公开实施例还提供一种视频素材生成装置，如图6所示，包括：获取模块，用于获取待切分视频；第一调度模块，用于调度锚点切分服务对待切分视频进行内容分析，确定待切分视频中切换物理镜头的时间点，作为切分锚点；切割模块，用于基于切分锚点将待切分视频切割为视频段；第二调度模块，用于基于待切分视频的场景特征，调度与场景特征匹配的后处理服务处理视频段，得到视频素材。在一些实施例中，第一调度模块，用于：使用切分服务执行以下操作：对待切分视频进行抽帧处理，得到多个第一关键帧；确定相邻两帧第一关键帧之间的相似度；在相邻两帧第一关键帧之间的相似度小于相似度阈值的情况下，基于相邻两帧第一关键帧确定切换物理镜头的时间点，作为切分锚点。在一些实施例中，第二调度模块，包括：第一调度子模块，用于在场景特征包括字幕的情况下，调度字幕切除服务切除视频段中包含的字幕；第二调度子模块，用于在场景特征包括水印的情况下，调度水印擦除服务擦除视频段中的水印。在一些实施例中，第二调度子模块，用于：调度水印擦除服务执行以下操作：对视频段进行人脸检测，并对视频段进行水印检测；在视频段中包括人脸区域且包括水印区域的情况下，确定人脸区域和水印区域的位置关系；在水印区域和人脸区域不重叠，且水印区域位于视频帧的边界区域的情况下，对水印区域进行裁剪处理；在水印区域满足指定情形的情况下，对水印区域进行模糊处理；指定情形包括以下至少一种：水印区域和人脸区域重叠、水印区域位于视频帧的中心区域。在一些实施例中，第一调度子模块，用于：调度字幕切除服务执行以下操作：对视频段进行抽帧处理，得到多帧第二关键帧；对各第二关键帧分别进行字幕识别，得到各第二关键帧的字幕区域；基于各第二关键帧的字幕区域，确定裁剪区域；从视频段的各帧图像中剪切掉裁剪区域。在一些实施例中，执行对视频段进行人脸检测，并对视频段进行水印检测，第二调度子模块，用于：对视频段进行抽帧处理，得到多帧第三关键帧；分别对各第三关键帧进行人脸检测和水印检测。在一些实施例中，执行确定人脸区域和水印区域的位置关系，第二调度子模块，用于：确定各第三关键帧中人脸区域的并集，得到总人脸区域；以及，确定各第三关键帧中水印区域的并集，得到总水印区域；确定总人脸区域和总水印区域的位置关系。在一些实施例中，第二调度模块，包括：获取子模块，用于基于对象存储服务将视频段上传到云服务器，得到视频段在云服务器中的存储地址；调度子模块，用于基于视频段的存储地址调度后处理服务处理视频段。在一些实施例中，视频素材切分装置，还包括：生成模块，用于在具有多个视频段的情况下，生成统一调度请求，统一调度请求中包括多个视频段在云服务器中的存储地址、需要调度的后处理服务、以及返回结果要求；发送模块，用于将统一调度请求发送给后处理服务，以使后处理服务执行以下操作：基于多个视频段在云服务器中的存储地址，下载多个视频段；基于需要调度的后处理服务对多个视频段进行处理，并将处理结果按照返回结果要求进行处理后得到统一调度请求的响应信息。本公开实施例的装置的各模块、子模块的具体功能和示例的描述，可以参见上述方法实施例中对应步骤的相关描述，在此不再赘述。根据本公开的实施例，本公开还提供了一种电子设备、一种可读存储介质和一种计算机程序产品。图7示出了可以用来实施本公开的实施例的示例电子设备700的示意性框图。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字助理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本公开的实现。如图7所示，设备700包括计算单元701，其可以根据存储在只读存储器702中的计算机程序或者从存储单元708加载到随机访问存储器703中的计算机程序，来执行各种适当的动作和处理。在RAM 703中，还可存储设备700操作所需的各种程序和数据。计算单元701、ROM 702以及RAM 703通过总线704彼此相连。输入/输出接口705也连接至总线704。设备700中的多个部件连接至I/O接口705，包括：输入单元706，例如键盘、鼠标等；输出单元707，例如各种类型的显示器、扬声器等；存储单元708，例如磁盘、光盘等；以及通信单元709，例如网卡、调制解调器、无线通信收发机等。通信单元709允许设备700通过诸如因特网的计算机网络和/或各种电信网络与其他设备交换信息/数据。计算单元701可以是各种具有处理和计算能力的通用和/或专用处理组件。计算单元701的一些示例包括但不限于中央处理单元、图形处理单元、各种专用的人工智能计算芯片、各种运行机器学习模型算法的计算单元、数字信号处理器、以及任何适当的处理器、控制器、微控制器等。计算单元701执行上文所描述的各个方法和处理，例如视频素材生成方法。例如，在一些实施例中，视频素材生成方法可被实现为计算机软件程序，其被有形地包含于机器可读介质，例如存储单元708。在一些实施例中，计算机程序的部分或者全部可以经由ROM 702和/或通信单元709而被载入和/或安装到设备700上。当计算机程序加载到RAM 703并由计算单元701执行时，可以执行上文描述的视频素材生成方法的一个或多个步骤。备选地，在其他实施例中，计算单元701可以通过其他任何适当的方式而被配置为执行视频素材生成方法。本文中以上描述的系统和技术的各种实施方式可以在数字电子电路系统、集成电路系统、现场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、负载可编程逻辑设备、计算机硬件、固件、软件、和/或它们的组合中实现。这些各种实施方式可以包括：实施在一个或者多个计算机程序中，该一个或者多个计算机程序可在包括至少一个可编程处理器的可编程系统上执行和/或解释，该可编程处理器可以是专用或者通用可编程处理器，可以从存储系统、至少一个输入装置、和至少一个输出装置接收数据和指令，并且将数据和指令传输至该存储系统、该至少一个输入装置、和该至少一个输出装置。用于实施本公开的方法的程序代码可以采用一个或多个编程语言的任何组合来编写。这些程序代码可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器或控制器，使得程序代码当由处理器或控制器执行时使流程图和/或框图中所规定的功能/操作被实施。程序代码可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本公开的上下文中，机器可读介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的程序。机器可读介质可以是机器可读信号介质或机器可读储存介质。机器可读介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。为了提供与用户的交互，可以在计算机上实施此处描述的系统和技术，该计算机具有：用于向用户显示信息的显示装置或者LCD监视器)；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给计算机。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网和互联网。计算机系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。服务器可以是云服务器，也可以为分布式系统的服务器，或者是结合了区块链的服务器。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本公开中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本公开公开的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本公开保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本公开的原则之内所作的修改、等同替换和改进等，均应包含在本公开保护范围之内。
