标题title
蓝牙系统、处理蓝牙信号的方法、芯片以及电子设备
摘要abst
提供了一种蓝牙系统、处理蓝牙信号的方法、芯片以及电子设备。该蓝牙系统包括：调制模块，用于调制生成待发射的多路蓝牙信号；相位补偿模块，所述相位补偿模块的一端与所述调制模块连接，所述相位补偿模块用于对所述多路蓝牙信号进行相位补偿，使得所述多路蓝牙信号在接收端同相叠加；发射模块，用于发射所述多路蓝牙信号，其中，所述多路蓝牙信号通过多根天线发射。本申请实施例通过对待发射的多路蓝牙信号进行相位补偿，使得该多路蓝牙信号在接收端可以同相叠加，从而有助于提高蓝牙传输距离。
权利要求书clms
1.一种蓝牙系统，其特征在于，包括：调制模块，用于调制生成待发射的多路蓝牙信号；相位补偿模块，用于对所述多路蓝牙信号进行相位补偿，使得所述多路蓝牙信号在接收端同相叠加；发射模块，用于发射所述多路蓝牙信号，其中，所述多路蓝牙信号通过多根天线发射。2.根据权利要求1所述的蓝牙系统，其特征在于，所述蓝牙系统还包括：确定模块，用于根据所述多根天线的蓝牙接收信号进行初始相位估计，以确定所述初始相位估计的结果；所述相位补偿模块与所述确定模块相连，用于根据所述初始相位估计的结果，对所述待发射的多路蓝牙信号进行相位补偿，使得所述多路蓝牙信号在接收端同相叠加。3.根据权利要求2所述的蓝牙系统，其特征在于，所述确定模块包括：同步单元，用于在所述根据所述多根天线的蓝牙接收信号进行初始相位估计之前，对所述多根天线的蓝牙接收信号进行信号同步操作；相位估计单元，与所述同步单元相连，所述相位估计单元用于：在所述同步操作成功的情况下，根据所述多根天线的蓝牙接收信号进行初始相位估计，以确定所述初始相位估计的结果。4.根据权利要求3所述的蓝牙系统，其特征在于，所述相位估计单元还用于：在所述同步操作失败的情况下，根据所述初始相位估计的历史数据，对所述待发射的多路蓝牙信号进行相位补偿。5.一种处理蓝牙信号的方法，其特征在于，包括：获取待发射的多路蓝牙信号；对待发射的所述多路蓝牙信号进行相位补偿，使得所述多路蓝牙信号在接收端同相叠加；通过多根天线发射所述多路蓝牙信号。6.根据权利要求5所述的方法，其特征在于，所述对待发射的所述多路蓝牙信号进行相位补偿，包括：根据所述多根天线的蓝牙接收信号进行初始相位估计；根据所述初始相位估计的结果，对待发射的所述多路蓝牙信号进行相位补偿。7.根据权利要求6所述的方法，其特征在于，所述根据所述多根天线的蓝牙接收信号进行初始相位估计，包括：对所述多根天线的蓝牙接收信号进行信号同步操作；在所述同步操作成功的情况下，则根据所述多根天线的蓝牙接收信号进行初始相位估计。8.根据权利要求7所述的方法，其特征在于，所述方法还包括：在所述同步操作失败的情况下，则根据所述初始相位估计的历史数据，对待发射的所述多路蓝牙信号进行相位补偿。9.一种芯片，其特征在于，包括存储器和处理器，所述存储器用于存储代码，所述处理器用于执行所述存储器中存储的代码，以执行如权利要求5-8中任一项所述的方法。10.一种电子设备，其特征在于，包括如权利要求9所述的芯片。
说明书desc
技术领域本申请实施例涉及蓝牙技术领域，并且更为具体地，涉及一种蓝牙系统、处理蓝牙信号的方法、芯片以及电子设备。背景技术近年来随着无线通信技术的发展，蓝牙的应用场景也得到了极大的拓展，比如工业生产中的车床监控，理疗领域的病房监护等场景，它们都对蓝牙的传输距离提出了更大的挑战。但是，蓝牙通信通常采用单天线的收发机制，通信范围一般在10m之内，蓝牙技术的传输距离已经渐渐无法满足要求。发明内容本申请实施例提供了一种蓝牙系统、处理蓝牙信号的方法、芯片以及电子设备，下面对本申请实施例的各个方面进行介绍。第一方面，提供一种蓝牙系统，包括：调制模块，用于调制生成待发射的多路蓝牙信号；相位补偿模块，所述相位补偿模块的一端与所述调制模块连接，所述相位补偿模块用于对所述多路蓝牙信号进行相位补偿，使得所述多路蓝牙信号在接收端同相叠加；发射模块，用于发射所述多路蓝牙信号，其中，所述多路蓝牙信号通过多根天线发射。第二方面，提供一种处理蓝牙信号的方法，包括：获取待发射的多路蓝牙信号；对待发射的所述多路蓝牙信号进行相位补偿，使得所述多路蓝牙信号在接收端同相叠加；通过多根天线发射所述多路蓝牙信号。第三方面，提供一种芯片，包括存储器和处理器，所述存储器用于存储代码，所述处理器用于执行所述存储器中存储的代码，能够实现如第二方面所述的方法。第四方面，提供一种电子设备，包括如第三方面所述的芯片。第五方面，提供一种计算机可读存储介质，其上存储有可执行代码，当所述可执行代码被执行时，能够实现如第二方面所述的方法。第六方面，提供一种计算机程序产品，包括可执行代码，当所述可执行代码被执行时，能够实现如第二方面所述的方法。本申请实施例中的蓝牙系统包括相位补偿模块，通过利用相位补偿模块对待发射的多路蓝牙信号进行相位补偿，使得该多路蓝牙信号在接收端可以同相叠加，提高了蓝牙信号的增益，从而有助于提高蓝牙传输距离。附图说明图1是本申请实施例提供的一发一收的蓝牙传输模式的结构示意图。图2是本申请实施例提供的一种蓝牙系统的示意图。图3是本申请实施例提供的另一种蓝牙系统的结构示意图。图4是本申请实施例提供的一种蓝牙数据传输过程的流程示意图。图5是本申请实施例提供的处理蓝牙信号的方法的流程示意图。图6是本申请实施例提供的处理蓝牙信号的装置的结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅是本申请的一部分实施例，而不是全部的实施例。蓝牙是一种无线技术标准，可实现固定设备、移动设备和楼宇个人域网之间的短距离数据交换。蓝牙信号传输是一发一收的传输模式，也就是说，每当蓝牙设备A发送一个数据包之后，都会接收对端设备B发送的反馈消息。示例性地，参见图1，蓝牙设备A向蓝牙设备B发送第一蓝牙信号数据包之后，蓝牙设备A会接收到蓝牙设备B发送的反馈信息，若该反馈信息为ACK信息，则表示蓝牙设备B成功的接收了第一数据包。接着，蓝牙设备A可以向蓝牙设备B发送第二数据包，然后蓝牙设备A再等待接收第二数据包的反馈信息，若第二数据包的反馈信息为ACK，则蓝牙设备A可以向蓝牙设备B发送第三数据包，以此类推，从而可以利用蓝牙通信完成蓝牙设备A至蓝牙设备B的数据传输。应理解，如果蓝牙设备A接收到蓝牙设备B发送的NACK信息，则表示蓝牙设备B对当前的数据包接收失败。蓝牙设备A收到NACK信息后，可以对当前发送失败帧进行重传。目前，蓝牙主要有BR，EDR和BLE等蓝牙格式，蓝牙可连接多个蓝牙设备进行数据传输，克服了数据同步的难题。但是，蓝牙通信通常采用单天线的收发机制，通信范围一般在10m之内。随着蓝牙无线通信技术的发展，蓝牙的应用场景也得到了极大的拓展。比如在汽车领域的车辆远程诊断以及监控、工业生产中的车床监控记录和医疗领域的病房监护等场景中，蓝牙通信都将扮演极为重要的角色。这些场景不同于以往蓝牙耳机、手机的数据传输，它们都对蓝牙的传输距离提出了更大的挑战。目前现有的蓝牙技术传输距离近的缺点被逐步放大，已经渐渐无法满足要求。针对上述问题，本申请实施例提出一种蓝牙系统，通过利用相位补偿模块对多根天线发射的多路蓝牙信号进行相位补偿，使得该多路蓝牙信号在接收端可以同相叠加，提高了蓝牙信号的增益，从而有助于提高蓝牙传输距离。图2是本申请实施例提供的一种蓝牙系统的结构示意图。该蓝牙系统200可以包括调制模块210、相位补偿模块220和发射模块230。调制模块210例如可以是调制器，调制模块210可以将蓝牙数字比特翻译成对应的蓝牙基带IQ信号。调制模块210包括多个发射端口，可与蓝牙系统200的多个信号发射通路连接，调制模块210可用于调制生成待发射的多路蓝牙信号，该多路蓝牙信号可以沿多个信号发射通路向外发射。相位补偿模块220可以位于蓝牙系统200的多个信号发射通路上，相位补偿模块220的一端可与调制模块210连接。相位补偿模块220可用于对多路蓝牙信号进行相位补偿，以使得多路蓝牙信号在接收端可以同相叠加。在一些实施例中，蓝牙系统200可以包括多个相位补偿模块220，该多个相位补偿模块220可以对应的设置在多个信号发射通路上，该多个相位补偿模块220的一端可分别与调制模块210的多个发射端口对应连接，该多个相位补偿模块220可分别用于对多路蓝牙信号进行相位补偿，以使得多路蓝牙信号在接收端可以同相叠加。当然，蓝牙系统200也可以包括一个相位补偿模块220，该一个相位补偿模块220可以同时对多路蓝牙信号进行相位补偿，以使得多路蓝牙信号在接收端可以同相叠加。需要说明的是，本申请实施例中的同相可以是指多路蓝牙信号的相位同向，使得多路蓝牙信号在接收端叠加后，可以获得正增益，从而可以提升蓝牙信号的传输范围。应理解，多路蓝牙信号的相位相同，是一种特殊的相位同向。例如可以利用相位补偿模块220对多路蓝牙信号进行相位补偿，以使得该多路蓝牙信号的相位相同，这样一来，多路蓝牙信号在接收端同相叠加之后，可以获得最大的正增益。以多路蓝牙信号为两路蓝牙信号为例进行举例说明，相位补偿模块220可以对该两路蓝牙信号进行相位补偿，以使得两路蓝牙信号的相位相同，在接收端同相叠加后，则最多可以获得3dB增益，从而使得蓝牙信号的传输范围扩大一倍。由此，也可以达到波束成形的效果。发射模块230可用于发射补偿后的多路蓝牙信号。发射模块230例如可以包括射频单元231和天线单元232，射频单元231与天线单元232连接。射频单元231可以通过天线单元232中的多根天线发射补偿后的多路蓝牙信号。射频单元231可以包括多条射频通路，用于传输多路蓝牙信号。应理解，发射模块230还可用于接收对端设备发送的蓝牙信号，即可以通过天线单元232中的多根天线来接收对端设备发送的蓝牙信号。需要说明的是，射频单元中可以包括放大器、双工器以及开关等元器件。经研究发现，由于不同射频通路上的元器件和天线等器件的参数是不同的，这就导致：调制模块210调制生成的待发射的多路蓝牙信号，在经过射频单元231，由天线单元232中的多根天线发射之后，会产生不同的相位偏移。因此，本申请实施例中的方案增加了相位补偿模块220，来对多路蓝牙信号进行相位补偿，使得多路蓝牙信号在接收端可以同相叠加，提高蓝牙信号的传输距离。下面结合图3对多路蓝牙信号的相位补偿方式进行举例说明。图3为本申请实施例提供的另一种蓝牙系统。在一些实施例中，参见图3，蓝牙通信系统200还可以包括确定模块250。确定模块250位于蓝牙系统200的信号接收通路中，可用于根据多根天线的蓝牙接收信号进行初始相位估计，以估计多路蓝牙信号经过射频单元231时所产生的相位偏移量。由于发射通路和接收通路之间存在互易性，多路蓝牙信号在发射通路和接收通路所产生的相位偏移可以认为是相同的。因此，相位补偿模块220与确定模块250相连，可用于根据确定模块250的初始相位估计结果，对待发射的多路蓝牙信号进行相位补偿。在一些实施例中，蓝牙系统200可以包括多个确定模块250，该多个确定模块250可以对应的设置在多个信号接收通路上，多个确定模块250可用于根据多根天线的蓝牙接收信号进行初始相位估计，以确定初始相位估计的结果。该多个确定模块250可分别与多个补偿模块220连接，并将多根天线的蓝牙接收信号的初始相位估计的结果对应发送至多个相位补偿模块220。该多个相位补偿模块220可根据初始相位估计的结果，分别对待发射的多路蓝牙信号进行相位补偿，以使得多路蓝牙信号在接收端可以同相叠加。应理解，蓝牙系统200也可以包括一个确定模块250，该一个确定模块250可以同时对多根天线的蓝牙接收信号进行初始相位估计，并将初始相位估计的结果发送至相位补偿模块220。在一些实施例中，为了方便的对多根天线的蓝牙接收信号进行初始相位估计，确定模块250可以包括同步单元251和相位估计单元252。同步单元251可用于在根据多根天线的蓝牙接收信号进行初始相位估计之前，对多根天线的蓝牙接收信号进行信号同步操作。以多根天线接收的多路蓝牙信号的任意两路蓝牙信号的同步情况为例进行说明。例如可以采用滑动相关法对该两路蓝牙信号进行数据同步，具体地，可以对两路蓝牙信号进行相位相关滑动，进行最大滑动相关峰的寻找。如果找到最大相关峰，则认为两路蓝牙信号同步成功，如果两路蓝牙信号同步成功，就代表两路蓝牙信号数据中的同步序列的位置也已经确定。如果没有找到最大相关峰，则认为两路蓝牙信号的数据同步失败。相位估计单元252与同步单元251连接，相位估计单元252可用于：在同步操作成功的情况下，根据多根天线的蓝牙接收信号进行初始相位估计，以确定所述初始相位估计的结果。更具体地，相位估计单元252可以根据两路蓝牙信号数据的本地序列和同步序列进行比较，从而可以求取待发射的两路蓝牙信号的相位差，进而可以计算出两路蓝牙信号的初始相位。在另一些实施例中，相位估计单元252还可用于：在同步操作失败的情况下，则根据初始相位估计的历史数据，对待发射的多路蓝牙信号进行相位补偿。初始相位估计的历史数据可以是指当前数据包之前的初始相位估计数据，比如当前包为第三数据包，多根天线可以接收第一数据包和第二数据包的反馈蓝牙信号，对该第一数据包和第二数据包的反馈蓝牙信号的初始相位估计数据即为初始相位估计的历史数据。应理解，如果不存在初始相位估计的历史数据，则可以使用默认初始相位估计值，如0，此时表示对待发射的多路蓝牙信号不存在相位补偿。需要说明的是，确定模块250可以实时的对多根天线的蓝牙接收信号进行初始相位估计，然后根据该初始相位估计的实时数据，利用相位补偿模块220对待发射的多路蓝牙信号进行相位补偿，这样可以缓解外部环境影响所导致的相位估计的误差。也可以只对对多根天线的蓝牙接收信号进行一次初始相位估计，然后根据该一次固定的初始相位估计数据，利用相位补偿模块220对待发射的多路蓝牙信号进行相位补偿。还可以利用相位估计模块实时的对多根天线的蓝牙接收信号进行初始相位估计，然后获取当前次初始相位估计数据与历史初始相位估计数据的相位估计均值，然后根据该相位估计均值，利用相位补偿模块220对待发射的多路蓝牙信号进行相位补偿。本申请实施例对此不做具体限制。在一些实施例中，继续参见图3，蓝牙系统200还包括滤波模块260和解调模块270。滤波模块260可以位于蓝牙系统200的信号发射和接收通路上，滤波模块260可以是低通滤波器，滤波模块260可用于过滤基带信号的高频分量。蓝牙系统200可以包括多个滤波模块260，分别设置于多个信号发射和接收通路中。解调模块270可以是解调器，解调模块270可以将蓝牙基带IQ信号翻译成对应的蓝牙数字比特，并发送至处理器进行相应的数据处理。为了更好的理解本申请实施例中的相位补偿的方式，下面以蓝牙设备A向蓝牙设备B发送数据，蓝牙设备A包括蓝牙系统200，蓝牙系统200包括两根天线和两路蓝牙信号为例，结合图3和图4对多路蓝牙信号的同步工作流程进行举例说明。具体步骤如下：步骤1：蓝牙设备A与蓝牙设备B进行匹配连接。当蓝牙设备A与蓝牙设备B匹配连接成功后，即可以开始数据传输流程，进入步骤2。步骤2：蓝牙设备A首先向蓝牙设备B发送一数据包，然后蓝牙设备A作为接收端，可利用两根天线接收蓝牙设备B发来的该数据包的蓝牙信号反馈数据，即得到两路数据，进入步骤3。步骤3：对两根天线的蓝牙接收信号分别进行同步操作，进入步骤4。在一些实施例中，可以采用滑动相关法对两根天线的蓝牙接收信号进行数据同步，具体地，可以对两路蓝牙信号和本地同步序列进行滑动相关操作，并寻找最大滑动相关峰。如果找到最大相关峰，则认为两路蓝牙信号同步成功，否则，两路蓝牙信号的数据同步失败。步骤4：检查两路蓝牙信号数据的同步情况，如果都同步成功，进入步骤5；否则进入步骤6。步骤5：两路蓝牙信号同步成功，相当于两路蓝牙数据中的同步序列的位置已经确定，然后可以通过两路蓝牙信号的本地序列和同步序列进行比较求取相位差，即可获得两路蓝牙信号的发射初始相位，进入步骤7。步骤6：两路蓝牙信号同步失败，可以初始相位估计的历史数据作为本次估计的结果，如果不存在历史估计值，则可以使用默认初始相位估计值，如0，即对待发射的两路蓝牙信号没有补偿，进入步骤7。步骤7：当轮到蓝牙设备A发送时，根据每根天线的初始相位估计值对待发射的蓝牙信号进行对应的相位补偿。接着，蓝牙设备A可以使用双天线向蓝牙设备B发送相位补偿后的两路蓝牙信号数据，然后准备接收当前次发射数据的反馈信息，进入步骤2。上文结合图1至图4，详细描述了本申请的蓝牙系统的实施例，下面结合图5，详细描述本申请的方法实施例。应理解，方法实施例的描述与蓝牙系统的实施例的描述相互对应，因此，未详细描述的部分可以参见前面蓝牙系统的实施例。图5是本申请实施例提供的一种处理蓝牙信号的方法的示意性流程图。图5所示的方法500可以包括步骤S520～S540，下面对这些步骤进行详细描述。在步骤S520中，获取待发射的多路蓝牙信号。在步骤S540中，对待发射的所述多路蓝牙信号进行相位补偿，使得所述多路蓝牙信号在接收端同相叠加。在步骤S560中，通过多根天线发射所述多路蓝牙信号。可选地，所述对待发射的所述多路蓝牙信号进行相位补偿，包括：根据所述多根天线的蓝牙接收信号进行初始相位估计；根据所述初始相位估计的结果，对待发射的所述多路蓝牙信号进行相位补偿。可选地，所述根据所述多根天线的蓝牙接收信号进行初始相位估计，包括：对所述多根天线的蓝牙接收信号进行信号同步操作；在所述同步操作成功的情况下，则根据所述多根天线的蓝牙接收信号进行初始相位估计。可选地，所述方法还包括：在所述同步操作失败的情况下，则根据所述初始相位估计的历史数据，对待发射的所述多路蓝牙信号进行相位补偿。下面结合图6是对本申请实施例中的处理蓝牙信号的方法的装置600进行介绍。图6中的虚线表示该单元或模块为可选的。该装置600可用于实现上述方法实施例中描述的方法。装置600可以是计算机或任意类型的电子设备。装置600可以包括一个或多个处理器610。该处理器610可支持装置600实现前文方法实施例所描述的方法。装置600还可以包括一个或多个存储器620。存储器620上存储有程序，该程序可以被处理器610执行，使得处理器610执行前文方法实施例所描述的方法。存储器620可以独立于处理器610也可以集成在处理器610中。装置600还可以包括收发器630。处理器610可以通过收发器630与其他设备进行通信。例如，处理器610可以通过收发器630与其他设备进行数据收发。本申请实施例提供的一种芯片，该芯片包括存储器和处理器，存储器用于存储代码，处理器用于执行存储器中存储的代码，以实现前文提及的各个实施例中的方法。本申请实施例中的电子设备例如可以是手机、无线耳机、音箱、智能手表等。本申请实施例还提供一种机器可读存储介质，用于存储程序。并且该程序使得计算机执行本申请各个实施例中的方法。本申请实施例还提供一种计算机程序产品。该计算机程序产品包括程序。该程序使得计算机执行本申请各个实施例中的方法。本申请实施例还提供一种计算机程序。该计算机程序使得计算机执行本申请各个实施例中的方法。应理解，在本申请的各种实施例中，“第一”、“第二”等是用于区别不同的对象，而不是用于描述特定顺序，上述各过程的序号的大小并不意味着执行顺序的先后，各过程的执行顺序应以其功能和内在逻辑确定，而不应对本申请实施例的实施过程构成任何限定。在上述实施例中，可以全部或部分地通过软件、硬件、固件或者其他任意组合来实现。当使用软件实现时，可以全部或部分地以计算机程序产品的形式实现。所述计算机程序产品包括一个或多个计算机指令。在计算机上加载和执行所述计算机程序指令时，全部或部分地产生按照本公开实施例所述的流程或功能。所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。所述计算机指令可以存储在机器可读存储介质中，或者从一个机器可读存储介质向另一个机器可读存储介质传输，例如，所述计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线)或无线方式向另一个网站站点、计算机、服务器或数据中心进行传输。所述机器可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集成的服务器、数据中心等数据存储设备。所述可用介质可以是磁性介质、光介质)、或者半导体介质)等。本领域普通技术人员可以意识到，结合本公开实施例描述的各示例的单元及算法步骤，能够以电子硬件、或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本公开的范围。在本申请所提供的几个实施例中，应该理解到，所揭露的系统、装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。在本申请所提供的几个实施例中，应该理解到，当称某一部分与另一部分“连接”或“相连”时，其意味着该部分不仅可以“直接连接”，而且也可以“电连接”，同时另一个元件介入其中。另外，术语“连接”也意指该部分“物理地连接”以及“无线地连接”。另外，当称某一部分“包含”某一元件时，除非另行加以陈述，否则，其意味着该某一部分可以包括另一元件，而不是排除所述另一个元件。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。以上所述，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以所述权利要求的保护范围为准。
