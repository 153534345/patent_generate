标题title
通过DP端口传输电力方法、装置、计算机设备及存储介质
摘要abst
本发明涉及通过DP端口传输电力方法、装置、计算机设备及存储介质，方法包括当Source检测到Pin18低时，将系统电源，进行电压转换，提供3.3V、500ma的功率电源作为初始状态；当Source检测到Pin20输出功率大于200ma时，且Pin18有热插拔信号且有3.3V时，检测Pin15和Pin17的通讯状态；从由Pin15和Pin17组成的通讯通道，获取Sink基础属性；将Pin20和Pin19及Pin14和Pin13分别组合成两组供电单元，当检测到输出大于通讯协议沟通的功率后，切断Pin13和Pin14电源。使显示设备免除单独的外接电源设备，可实现电源和音视频的同时传输。
权利要求书clms
1.一种通过DP端口传输电力方法，其特征在于，包括下述步骤：S1、当设备Source端检测到连接器引脚Pin18为低电平时，将设备Source端输入的20～48V提供的系统电源，通过一路DC-DC电路进行电压转换并进行电流限制，通过连接器引脚Pin20和Pin19提供电压为3.3V、电流为500ma的功率电源作为供电系统的初始状态；S2、当所述设备Source端通过一路DC-DC电路，检测到连接器引脚Pin20输出功率大于200ma时，并且检测到连接器引脚Pin18有热插拔信号且有3.3V电压时，检测连接器引脚Pin15和Pin17的通讯状态；S3、从由连接器引脚Pin15和Pin17组成的通讯通道，获取所述设备Sink端的基础属性；S4、将引脚Pin20和引脚Pin19及Pin14和Pin13分别组合成两组供电单元，设备Source端通过两组DC-DC 20V电源电路，为所述两组供电单元分配工作电压，所述工作电压来自由所述设备Sink端获取的电压值，所述两组供电单元分别为所述设备Sink端提供一半的输出功率；S5、所述设备Source端实时监控输出功率的变化，当所述设备Source端检测到所述Source端大于通讯协议沟通的功率后，切断引脚Pin13和Pin14电源，并重新连接引脚Pin20和Pin19到设备Source端DC-DC 3.3V电源，之后重新进入通讯状态。2.根据权利要求1所述的通过DP端口传输电力方法，其特征在于：所述设备Sink端的基础属性包括电压范围、功率大小、设备类型。3.根据权利要求1所述的通过DP端口传输电力方法，其特征在于，所述步骤S1、当设备Source端检测到连接器引脚Pin18为低电平时，将设备Source端输入的20～48V提供的系统电源，通过一路DC-DC电路进行电压转换并进行电流限制，通过连接器引脚Pin20和Pin19提供电压为3.3V、电流为500ma的功率电源作为供电系统的初始状态的步骤具体包括：S11、通过MCU 循环检测连接器引脚Pin18的状态，当Pin18的状态为低电平时，进入步骤S12；S12、通过MCU 打开一路Source端输入电源，提供电源给一路DC-DC 3.3V电路；S13、通过MCU打开DC-DC 3.3V电路，映射到连接器引脚Pin20和Pin19；S14、MCU循环检测连接器引脚Pin18引脚状态，且判断Pin18 跳变是否为高电平，如果是则判断是否持续100ms。4.根据权利要求3所述的通过DP端口传输电力方法，其特征在于，所述步骤S2、当所述设备Source端通过一路DC-DC电路，检测到连接器引脚Pin20输出功率大于200ma时，并且检测到连接器引脚Pin18有热插拔信号且有3.3V电压时，检测连接器引脚Pin15和Pin17的通讯状态的步骤具体包括：S21、MCU循环检测连接器引脚Pin18状态，当检测到Pin18 状态持续为高电平时，进入步骤S22；S22、通过MCU检测由步骤S12 启动的一路DC-DC 3.3V系统电路电流，当检测到DC-DC3.3V输出电流大于给定值时，进入步骤S23；S23、MCU循环检测连接器引脚Pin18状态，判断连接器引脚Pin18状态是否持续为高电平或者判断连接器引脚Pin18状态是否由高电平跳变为低电平。5.根据权利要求1所述的通过DP端口传输电力方法，其特征在于，所述步骤S3、从由连接器引脚Pin15和Pin17组成的通讯通道，获取所述设备Sink端的基础属性的步骤具体包括：S31、当设备Sink端通过DisplayPort连接器连接到设备Source端时，设备Sink端引脚Pin20和引脚Pin19组成初始功能供电系统，设备Sink端使用所述供电系统的初始状态进行供电，设备Sink端拉高硬件Pin18，并连通引脚Pin15和引脚Pin17，准备和设备Source端进行数据通讯；S32、通过MCU连接的引脚Pin15和引脚Pin17组成的通讯电路，通过定义的通讯协议，获取到设备Sink端的设备名称、设备状态、支持电压幅度及最大消耗电流状态，通过获取的设备状态、支持电压幅度及最大消耗电流状态计算设备Source端配置，当获取到完整的设备Sink端信息后，进入步骤S33；S33、设备Source端通过获取的设备Sink端电压需求和电流需求设置，初始化设备Source 端DC-DC电路系统。6.根据权利要求1所述的通过DP端口传输电力方法，其特征在于，所述步骤S4、将引脚Pin20和引脚Pin19及Pin14和Pin13分别组合成两组供电单元，设备Source端通过两组DC-DC 20V电源电路，为所述两组供电单元分配工作电压，所述工作电压来自由所述设备Sink端获取的电压值，所述两组供电单元分别为所述设备Sink端提供一半的输出功率的步骤具体包括：S41、设备Source端完成S3通讯协议指令后，通过MCU io配置，使引脚Pin14 和引脚Pin13连接到DC-DC 20V电路上；S42、设备Sink端检测到引脚Pin14 和引脚Pin13组成的电路导通时，将引脚Pin14和引脚Pin13连接到DC-DC 5V电路中；S43、设备Sink端稳定后，断开由引脚Pin20和引脚Pin19提供的DC-DC 3.3V电路，并等待系统电源稳定；S44、设备Sink端系统电源稳定后，通过私有通讯协议反馈给设备Source端；S45、设备Source 端获取的设备Sink端DC-DC 20V电源稳定信号后，打开设备Source端引脚Pin20和Pin19 DC-DC3.3V电路,并再次连接到设备Source端DC-DC 20V电路上，并通过私有通讯协议通知设备Sink端；S46、设备Sink端重新链接引脚Pin20和Pin19 到DC-DC 20V电路上，并供给显示屏设备使用。7.根据权利要求1至6任意一项所述的通过DP端口传输电力方法，其特征在于，所述步骤S5、所述设备Source端实时监控输出功率的变化，当所述设备Source端检测到所述Source端大于通讯协议沟通的功率后，切断引脚Pin13和Pin14电源，并重新连接引脚Pin20和Pin19到设备Source端DC-DC 3.3V电源，之后重新进入通讯状态的步骤具体包括：S51、设备Source 端和设备Sink端实时通过连接器引脚Pin15和Pin17组成的通讯链路通讯，当设备Source端或设备Sink端检测的系统供电异常时，设备Source 端关闭由引脚Pin20和Pin19及引脚Pin13和Pin14组成的两组供电系统；S52、当设备Source 端检测到设备Sink端拨出或掉线时，设备Source端关闭由引脚Pin20和Pin19及引脚Pin13和Pin14组成的两组供电系统；S53、当设备Source端检测到设备Source 端的DC-DC 20V输出超过设备Sink端通讯所需要的功率后，关闭设备Source端系统电源输出。8.一种通过DP端口传输电力装置，其特征在于，包括：设置模块，用于当设备Source端检测到连接器引脚Pin18为低电平时，将设备Source端输入的20～48V提供的系统电源，通过一路DC-DC电路进行电压转换并进行电流限制，通过连接器引脚Pin20和Pin19提供电压为3.3V、电流为500ma的功率电源作为供电系统的初始状态；检测模块，用于当所述设备Source端通过一路DC-DC电路，检测到连接器引脚Pin20输出功率大于200ma时，并且检测到连接器引脚Pin18有热插拔信号且有3.3V电压时，检测连接器引脚Pin15和Pin17的通讯状态；获取模块，用于从由连接器引脚Pin15和Pin17组成的通讯通道，获取所述设备Sink端的基础属性；供电模块，用于将引脚Pin20和引脚Pin19及Pin14和Pin13分别组合成两组供电单元，设备Source端通过两组DC-DC 20V电源电路，为所述两组供电单元分配工作电压，所述工作电压来自由所述设备Sink端获取的电压值，所述两组供电单元分别为所述设备Sink端提供一半的输出功率；重置模块，用于所述设备Source端实时监控输出功率的变化，当所述设备Source端检测到所述Source端大于通讯协议沟通的功率后，切断引脚Pin13和Pin14电源，并重新连接引脚Pin20和Pin19到设备Source端DC-DC 3.3V电源，之后重新进入通讯状态。9.一种计算机设备，包括存储器和处理器，所述存储器中存储有计算机可读指令，所述处理器执行所述计算机可读指令时实现如权利要求1至7中任一项所述的通过DP端口传输电力方法的步骤。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储有计算机可读指令，所述计算机可读指令被处理器执行时实现如权利要求1至7中任一项所述的通过DP端口传输电力方法的步骤。
说明书desc
技术领域本发明涉及电源供电技术领域，尤其涉及通过DP端口传输电力方法、装置、计算机设备及存储介质。背景技术DP是一个由PC及芯片制造商联盟开发，视频电子标准协会标准化的数字式视频接口标准。该接口免认证、免授权金，主要用于视频源与显示器等设备的连接，并也支持携带音频、USB和其他形式的数据。DisplayPort是第一个依赖数据包化数据传输技术的显示通信端口，这种数据包化传输技术可以在以太网、USB和PCI Express等技术中找到。它既可以用于内部显示连接，也可以用于外部的显示连接。DisplayPort可用于同时传输音频和视频。随着显示设备不断地发展，新一代的显示端口DisplayPort作为一种音视频传输接口逐渐被市场所认可，最新的电脑显卡和显示设备逐渐标配DisplayPort端口。而显示设备通常需要配备单独的供电系统，这使得显示设备显的过于笨重和繁杂，与显示设备越来越轻便化和一体化的要求是反其道而行之的。发明内容本发明实施例的目的在于提出一种通过DP端口传输电力方法、装置、计算机设备及存储介质，以解决现有技术中显示设备通常需要配备单独的供电系统，这使得显示设备显的过于笨重和繁杂的问题。为了解决上述技术问题，本发明提供一种通过DP端口传输电力方法，采用了如下所述的技术方案，包括下述步骤：S1、当设备Source端检测到连接器引脚Pin18为低电平时，将设备Source端输入的20～48V提供的系统电源，通过一路DC-DC电路进行电压转换并进行电流限制，通过连接器引脚Pin20和Pin19提供电压为3.3V、电流为500ma的功率电源作为供电系统的初始状态；S2、当所述设备Source端通过一路DC-DC电路，检测到连接器引脚Pin20输出功率大于200ma时，并且检测到连接器引脚Pin18有热插拔信号且有3.3V电压时，检测连接器引脚Pin15和Pin17的通讯状态；S3、从由连接器引脚Pin15和Pin17组成的通讯通道，获取所述设备Sink端的基础属性；S4、将引脚Pin20和引脚Pin19及Pin14和Pin13分别组合成两组供电单元，设备Source端通过两组DC-DC 20V电源电路，为所述两组供电单元分配工作电压，所述工作电压来自由所述设备Sink端获取的电压值，所述两组供电单元分别为所述设备Sink端提供一半的输出功率；S5、所述设备Source端实时监控输出功率的变化，当所述设备Source端检测到所述Source端大于通讯协议沟通的功率后，切断引脚Pin13和Pin14电源，并重新连接引脚Pin20和Pin19到设备Source端DC-DC 3.3V电源，之后重新进入通讯状态。进一步的，所述设备Sink端的基础属性包括电压范围、功率大小、设备类型。进一步的，所述步骤S1、当设备Source端未检测到设备Sink端的时候，由Pin20/Pin19提供电压3.3V、电流500ma功率电源作为初始状态的步骤具体包括：S11、通过MCU 循环检测连接器引脚Pin18的状态，当Pin18的状态为低电平时，进入步骤S12；S12、通过MCU 打开一路Source端输入电源，提供电源给一路DC-DC 3.3V电路；S13、通过MCU打开DC-DC 3.3V电路，映射到连接器引脚Pin20和Pin19；S14、MCU循环检测连接器引脚Pin18引脚状态，且判断Pin18 跳变是否为高电平，如果是则判断是否持续100ms。进一步的，所述步骤S2、当所述设备Source端通过一路DC-DC电路，检测到连接器引脚Pin20输出功率大于200ma时，并且检测到连接器引脚Pin18有热插拔信号且有3.3V电压时，检测连接器引脚Pin15和Pin17的通讯状态的步骤具体包括：S21、MCU循环检测连接器引脚Pin18状态，当检测到Pin18 状态持续为高电平时，进入步骤S22；S22、通过MCU检测由步骤S12 启动的一路DC-DC 3.3V系统电路电流，当检测到DC-DC 3.3V输出电流大于给定值时，进入步骤S23；S23、 MCU循环检测连接器引脚Pin18状态，判断连接器引脚Pin18状态是否持续为高电平或者判断连接器引脚Pin18状态是否由高电平跳变为低电平。进一步的，所述步骤S3、从由连接器引脚Pin15和Pin17组成的通讯通道，获取所述设备Sink端的基础属性的步骤具体包括：S31、当设备Sink端通过DisplayPort连接器连接到设备Source端时，设备Sink端引脚Pin20和引脚Pin19组成初始功能供电系统，设备Sink端使用所述初始供电系统进行供电，设备Sink端拉高硬件Pin18，并连通引脚Pin15和引脚Pin17，准备和设备Source端进行数据通讯；S32、通过MCU连接的引脚Pin15和引脚Pin17组成的通讯电路，通过定义的通讯协议，获取到设备Sink端的设备名称、设备状态、支持电压幅度及最大消耗电流状态，通过获取的设备状态、支持电压幅度及最大消耗电流状态计算设备Source端配置，当获取到完整的设备Sink端信息后，进入步骤S33；S33、设备Source端通过获取的设备Sink端电压需求和电流需求设置，初始化设备Source 端DC-DC电路系统。进一步的，所述步骤S4、将引脚Pin20和引脚Pin19及Pin14和Pin13分别组合成两组供电单元，设备Source端通过两组DC-DC 20V电源电路，为所述两组供电单元分配工作电压，所述工作电压来自由所述设备Sink端获取的电压值，所述两组供电单元分别为所述设备Sink端提供一半的输出功率的步骤具体包括：S41、设备Source端完成S3通讯协议指令后，通过MCU io配置，使引脚Pin14 和引脚Pin13连接到DC-DC 20V电路上；S42、设备Sink端检测到引脚Pin14 和引脚Pin13组成的电路导通时，将引脚Pin14和引脚Pin13连接到DC-DC 5V电路中；S43、设备Sink端稳定后，断开由引脚Pin20和引脚Pin19提供的DC-DC 3.3V电路，并等待系统电源稳定；S44、设备Sink端系统电源稳定后，通过私有通讯协议反馈给设备Source端；S45、设备Source 端获取的设备Sink端DC-DC 20V电源稳定信号后，打开设备Source 端引脚Pin20和Pin19 DC-DC3.3V电路,并再次连接到设备Source端DC-DC 20V电路上，并通过私有通讯协议通知设备Sink端；S46、设备Sink端重新链接引脚Pin20和Pin19 到DC-DC 20V电路上，并供给显示屏设备使用。进一步的，所述步骤S5、所述设备Source端实时监控输出功率的变化，当所述设备Source端检测到所述Source端大于通讯协议沟通的功率后，切断引脚Pin13和Pin14电源，并重新连接引脚Pin20和Pin19到设备Source端DC-DC 3.3V电源，之后重新进入通讯状态的步骤具体包括：S51、设备Source 端和设备Sink端实时通过连接器引脚Pin15和Pin17组成的通讯链路通讯，当设备Source端或设备Sink端检测的系统供电异常时，设备Source 端关闭由引脚Pin20和Pin19及引脚Pin13和Pin14组成的两组供电系统；S52、当设备Source 端检测到设备Sink端拨出或掉线时设备Source端关闭由引脚Pin20和Pin19及引脚Pin13和Pin14组成的两组供电系统；S53、当设备Source端检测到设备Source 端的DC-DC 20V输出超过设备Sink端通讯所需要的功率后，关闭设备Source端系统电源输出。为了解决上述技术问题，本发明还提供一种通过DP端口传输电力装置，采用了如下所述的技术方案，包括：设置模块，用于当设备Source端检测到连接器引脚Pin18为低电平时，将设备Source端输入的20～48V提供的系统电源，通过一路DC-DC电路进行电压转换并进行电流限制，通过连接器引脚Pin20和Pin19提供电压为3.3V、电流为500ma的功率电源作为供电系统的初始状态；检测模块，用于当所述设备Source端通过一路DC-DC电路，检测到连接器引脚Pin20输出功率大于200ma时，并且检测到连接器引脚Pin18有热插拔信号且有3.3V电压时，检测连接器引脚Pin15和Pin17的通讯状态；获取模块，用于从由连接器引脚Pin15和Pin17组成的通讯通道，获取所述设备Sink端的基础属性；供电模块，用于将引脚Pin20和引脚Pin19及Pin14和Pin13分别组合成两组供电单元，设备Source端通过两组DC-DC 20V电源电路，为所述两组供电单元分配工作电压，所述工作电压来自由所述设备Sink端获取的电压值，所述两组供电单元分别为所述设备Sink端提供一半的输出功率；重置模块，用于所述设备Source端实时监控输出功率的变化，当所述设备Source端检测到所述Source端大于通讯协议沟通的功率后，切断引脚Pin13和Pin14电源，并重新连接引脚Pin20和Pin19到设备Source端DC-DC 3.3V电源，之后重新进入通讯状态。为了解决上述技术问题，本发明还提供一种计算机设备，采用了如下所述的技术方案，包括存储器和处理器，所述存储器中存储有计算机可读指令，所述处理器执行所述计算机可读指令时实现上述的通过DP端口传输电力方法的步骤。为了解决上述技术问题，本发明还提供一种计算机可读存储介质，采用了如下所述的技术方案，所述计算机可读存储介质上存储有计算机可读指令，所述计算机可读指令被处理器执行时实现上述的通过DP端口传输电力方法的步骤。与现有技术相比，本发明主要有以下有益效果：通过采用当前流行使用的DisplayPort接口，实现对后端显示设备的供电传输，使显示设备免除单独的外接电源设备，使DisplayPort可实现电源和音视频的同时传输，系统结构简单，提升显示设备的简洁性。附图说明为了更清楚地说明本发明中的方案，下面将对本发明实施例描述中所需要使用的附图作一个简单介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明可以应用于其中的示例性系统架构图；图2是本发明的通过DP端口传输电力方法的一个实施例的流程图；图3是本发明的通过DP端口传输电力方法中使用的DP引脚结构示意图；图4是本发明的通过DP端口传输电力方法中使用的工作原理框图；图5是本发明的通过DP端口传输电力方法中使用的Source 端外部功能端口图；图6是本发明的通过DP端口传输电力方法中使用的Source端DC-DC电路切换IO功能引脚图；图7是本发明的通过DP端口传输电力方法中使用的Source端连接Sink端DC-DC20V 切换电路电路图；图8是本发明的通过DP端口传输电力方法中使用的Source端DC-DC 20V输入电源第一检查电路电路图；图9是本发明的通过DP端口传输电力方法中使用的Source端DC-DC 20V输入电源第二检查电路电路图；图10是本发明的通过DP端口传输电力方法中使用的Source端MCU IO使用配置电路电路图；图11是本发明的通过DP端口传输电力方法中使用的Source端DC-DC 5V 转换电路电路图；图12是本发明的通过DP端口传输电力方法中使用的Source端与Sink端之间连接引脚电路电路图；图13是本发明的通过DP端口传输电力方法中使用的Sink端供电电路电路图；图14是本发明的通过DP端口传输电力方法中使用的Sink端DC-DC 3.3V电路电路图；图15是本发明的通过DP端口传输电力装置的一个实施例的结构示意图；图16是本发明的计算机设备的一个实施例的结构示意图。具体实施方式除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同；本文中在申请的说明书中所使用的术语只是为了描述具体的实施例的目的，不是旨在于限制本发明；本发明的说明书和权利要求书及上述附图说明中的术语“包括”和“具有”以及它们的任何变形，意图在于覆盖不排他的包含。本发明的说明书和权利要求书或上述附图中的术语“第一”、“第二”等是用于区别不同对象，而不是用于描述特定顺序。在本文中提及“实施例”意味着，结合实施例描述的特定特征、结构或特性可以包含在本发明的至少一个实施例中。在说明书中的各个位置出现该短语并不一定均是指相同的实施例，也不是与其它实施例互斥的独立的或备选的实施例。本领域技术人员显式地和隐式地理解的是，本文所描述的实施例可以与其它实施例相结合。为了使本技术领域的人员更好地理解本发明方案，下面将结合附图，对本发明实施例中的技术方案进行清楚、完整地描述。如图1所示，系统架构100可以包括第一终端设备101、第二终端设备102、第三终端设备103、网络104和服务器105。网络104用以在第一终端设备101、第二终端设备102、第三终端设备103和服务器105之间提供通信链路的介质。网络104可以包括各种连接类型，例如有线、无线通信链路或者光纤电缆等等。用户可以使用第一终端设备101、第二终端设备102或者第三终端设备103通过网络104与服务器105交互，以接收或发送通过DP端口传输电力的命令、消息等。第一终端设备101、第二终端设备102、第三终端设备103上可以安装有各种通讯客户端应用，例如网页浏览器应用、购物类应用、搜索类应用、即时通信工具、邮箱客户端、社交平台软件等。第一终端设备101、第二终端设备102、第三终端设备103、网络104及服务器105可以分别/同时通过网络104与设备Source端或者设备Sink进行交互。单一终端设备如第一终端设备101、第二终端设备102或者第三终端设备可以控制设备Source端或者设备Sink，或者多终端设备联合起来用于控制设备Source端或者设备Sink的工作。第一终端设备101、第二终端设备102、第三终端设备103可以是具有显示屏并且支持网页浏览的各种电子设备，包括但不限于智能手机、平板电脑、电子书阅读器、MP3播放器、MP4播放器、膝上型便携计算机和台式计算机等等。服务器105可以是提供各种服务的服务器，例如对第一终端设备101、第二终端设备102、第三终端设备103上显示的页面提供支持的后台服务器。需要说明的是，本发明实施例所提供的通过DP端口传输电力方法一般由服务器/终端设备执行，相应地，通过DP端口传输电力装置一般设置于服务器/终端设备中。应该理解，图1中的终端设备、网络和服务器的数目仅仅是示意性的。根据实现需要，可以具有任意数目的终端设备、网络和服务器。实施例一继续参考图2，示出了本发明的通过DP端口传输电力方法的一个实施例的流程图。通过DP端口传输电力方法，包括以下步骤：步骤S1，当设备Source端检测到连接器引脚Pin18为低电平时，将设备Source端输入的20～48V提供的系统电源，通过一路DC-DC电路进行电压转换并进行电流限制，通过连接器引脚Pin20和Pin19提供电压为3.3V、电流为500ma的功率电源作为供电系统的初始状态。在本实施例中，通过DP端口传输电力方法运行于其上的电子设备可以通过有线连接方式或者无线连接方式接收通过DP端口传输电力请求。需要指出的是，上述无线连接方式可以包括但不限于3G/4G/5G连接、WiFi连接、蓝牙连接、WiMAXX连接、Zigbee连接、UWB连接、以及其他现在已知或将来开发的无线连接方式。设备源端在这里指的是发送端，设备Sink端，在这里指的是接收端。DP端口用于在设备Source端和设备Sink端之间传输视频、音频、USB以及其它格式的数据信息等。图3是本发明的通过DP端口传输电力方法中使用的DP引脚结构示意图。如图3所示，且参考下表，DP引脚共设有20个引脚。在本实施例的一些可选的实现方式中，步骤S1具体包括步骤：S11、通过MCU 循环检测连接器引脚Pin18的状态，当Pin18的状态为低电平时进入步骤S12；S12、通过MCU 打开一路Source端输入电源，提供电源给一路DC-DC 3.3V电路；S13、通过MCU打开DC-DC 3.3V电路，映射到连接器引脚Pin20和Pin19；S14、MCU循环检测连接器引脚Pin18引脚状态，且判断Pin18 跳变是否为高电平，如果是则判断是否持续100ms。上述的持续时间，也可以是根据实际需要，用户自定义的持续时间。当检测到Pin18 跳变为高电平时并持续100ms时进入步骤S2。步骤S2，当设备Source端通过系统DC-DC电路，检测到连接器引脚Pin20输出功率大于200ma时，并且检测到连接器引脚Pin18有热插拔信号且有3.3V电压时，检测连接器引脚Pin15和Pin17的通讯状态。在本实施例的一些可选的实现方式中，步骤S2具体包括步骤：S21、MCU循环检测连接器引脚Pin18状态，当检测到Pin18 状态持续为高电平时，进入步骤S22；S22、通过MCU检测由步骤S12 启动的一路DC-DC 3.3V系统电路电流，当检测到DC-DC 3.3V输出电流大于给定值时，进入步骤S23；S23、MCU循环检测连接器引脚Pin18状态，判断连接器引脚Pin18状态是否持续为高电平或者判断连接器引脚Pin18状态是否由高电平跳变为低电平。当检测到连接器引脚Pin18状态持续为高电平时，进步步骤S3，当检测到连接器引脚Pin18 状态由高电平跳变为低电平时，进入步骤S1。步骤S3、从由连接器引脚Pin15和Pin17组成的通讯通道，获取设备Sink端的基础属性。DP设有专用总线，即AUX Channel，用于source和sink之间的握手。因为source是过程的控制装置，它为sink提出请求。sink与source进行通信的唯一途径是在热插拔检测信号中发出一个脉冲。因为AUX Channel是source / sink通信的关键部分，所以理解握手过程的核心在于记录AUX Channel通信。可以通过AUX Channel Monitor工具，获取source和sink进行通信的信息。辅助通道作为DP接口中一条独立的双向传输辅助通道，采用交流耦合差分传输方式，是一条双向半双工传输通道，单一方向速率仅1Mbit/s左右，用来传输设定与控制指令。AUX的用途包括读取扩展显示识别数据，以确保DP信号的正确传输；读取显示器所支持的DP接口的信息，如主要通道的数量和DP信号的传输速率；进行各种显示组态暂存器的设定；读取显示器状态暂存器。接收设备可以切换HPD信号来提示源设备启动一个AUX请求事务来读取DPCD链接/接收状态寄存器位，包括IRQ_HPD向量寄存器位。DP source和sink之间的信息传送通过对sink上的DisplayPort配置数据寄存器进行读写来实现。通过读取DPCD中的特定寄存器，source将知晓sink的性能。在建立数据link，即link训练期间，source对DPCD进行写操作，以指明目标link的配置，另外sink也将各个link训练阶段的结果写到此处。扩展显示标识数据是一个结构化数据块，定义了DP接收装置的性能。它定义了构造、型号名称、屏幕尺寸和颜色格式。在连接到sink之后，source首先要执行的操作之一就是读取sink的EDID数据。对DP source和sink之间的通信起到重要作用的是EDID定义了sink以及sink支持的视频模式的原始分辨率。在选择将要发送给sink的内容的格式时，该数据是source的基础，包括分辨率、所用视频模式、颜色格式、音频格式等。通过改变测试sink的EDID，可以验证sink的灵活性。根据source需要发送给sink的内容以及从EDID和DPCD读取来的sink性能，source可确定发送内容的格式以及用于传输的数据link配置。在link训练期间，source使用其首选配置启动实际训练过程，在link建立之前通过迭代法对其进行改变。一旦link建立，source便可开始发送内容本身。在本实施例中，设备Sink端的基础属性包括电压范围、功率大小、设备类型等。在本实施例的一些可选的实现方式中，步骤S3具体包括步骤：S31、当设备Sink端通过DisplayPort连接器连接到设备Source端时，设备Sink端引脚Pin20和引脚Pin19组成初始功能供电系统，设备Sink端使用初始供电系统进行供电，设备Sink端拉高硬件Pin18，并连通引脚Pin15和引脚Pin17，准备和设备Source端进行数据通讯；S32、通过MCU连接的引脚Pin15和引脚Pin17组成的通讯电路，通过定义的通讯协议，获取到设备Sink端的设备名称、设备状态、支持电压幅度及最大消耗电流状态，通过获取的设备状态、支持电压幅度及最大消耗电流状态计算设备Source端配置，当获取到完整的设备Sink端信息后，进入步骤S33；S33、设备Source端通过获取的设备Sink端电压需求和电流需求设置，初始化设备Source 端DC-DC电路系统。完整的设备Sink端信息包括电压范围、功率大小、设备类型等。步骤S4，将引脚Pin20和引脚Pin19及Pin14和Pin13分别组合成两组供电单元，设备Source端通过两组DC-DC 20V电源电路，为两组供电单元分配工作电压，工作电压来自由设备Sink端获取的电压值，两组供电单元分别为设备Sink端提供一半的输出功率。在本实施例的一些可选的实现方式中，步骤S4具体包括步骤：S41、设备Source端完成S3通讯协议指令后，通过MCU io配置，使引脚Pin14 和引脚Pin13连接到DC-DC 20V电路上；S42、设备Sink端检测到引脚Pin14 和引脚Pin13组成的电路导通时，将引脚Pin14和引脚Pin13连接到DC-DC 5V电路中；S43、设备Sink端稳定后，断开由引脚Pin20和引脚Pin19提供的DC-DC 3.3V电路，并等待系统电源稳定；S44、设备Sink端系统电源稳定后，通过私有通讯协议反馈给设备Source端；S45、设备Source 端获取的设备Sink端DC-DC 20V电源稳定信号后，打开设备Source 端引脚Pin20和Pin19 DC-DC3.3V电路,并再次连接到设备Source端DC-DC 20V电路上，并通过私有通讯协议通知设备Sink端；S46、设备Sink端重新链接引脚Pin20和Pin19 到DC-DC 20V电路上，并供给显示屏设备使用。步骤S5、设备Source端实时监控输出功率的变化，当设备Source端检测到Source端大于通讯协议沟通的功率后，切断引脚Pin13和Pin14电源，并重新连接引脚Pin20和Pin19到设备Source端DC-DC 3.3V电源，之后重新进入通讯状态。接口传输的信号由传输图像的数据通道信号以及传输图像相关的状态、控制信息的辅助通道信号组成，具体包含DisplayPort数据传输主要通道、辅助通道与连接。在视频和音频内容通过DP link发送并显示在显示屏上之前，在DP source和sink之间已经进行了大量通信。主要通道：主要通道是单向的、高带宽、低延迟的信道，用于传输同步串行数据流，如未压缩的视频和音频。辅助通道：辅助通道是1Mbit/s半双工，双向通道，用于链路管理和设备控制。热插拔检测信号线：HPD信号是sink to source的信号，一是用作sink的检测，接3.3V或拉高说明sink存在，拉低超过2ms说明sink不存在；也可以作为sink设备的中断请求，当拉低0.5ms~1ms时，说明sink设备发出中断，此时source通过AUX读取sink的DPCD寄存器获知中断类型。在本实施例的一些可选的实现方式中，步骤S5具体包括步骤：S51、设备Source 端和设备Sink端实时通过连接器引脚Pin15和Pin17组成的通讯链路通讯，当设备Source端或设备Sink端检测的系统供电异常时，设备Source 端关闭由引脚Pin20和Pin19及引脚Pin13和Pin14组成的两组供电系统，进入步骤S1。S52、当设备Source 端检测到设备Sink端拨出或掉线时设备Source端关闭由引脚Pin20和Pin19及引脚Pin13和Pin14组成的两组供电系统，进入步骤S1。S53、当设备Source端检测到设备Source 端的DC-DC 20V输出超过设备Sink端通讯所需要的功率后，关闭设备Source端系统电源输出，进入步骤S1。图4是本发明的通过DP端口传输电力方法中使用的工作原理框图。如图4所示，设备Source端和设备Sink端通过DP连接器连接。设备Source端设有DP输入端口，DP输出端口和USB端口。设备Sink端设有DP输入端口、DP输出端口、DC-DC电路和LDO。图5是本发明的通过DP端口传输电力方法中使用的Source 端外部功能端口图。如图5所示，设备Source端外部连接TypeC接口，方便进行外设连接。图6是本发明的通过DP端口传输电力方法中使用的Source端DC-DC电路切换IO功能引脚图。如图6所示，电容C12与电阻R15并联后，一端接地，另一端引出DFP_CC1。DFP，下行端口，可以理解为一个Host，DFP作为Source给VBUS和vcon供电的，简单理解为一个提供电源的设备，如：电源适配器。DFP_CC1表示设备Source端发送信号。DFP_CC2表示设备Source端接收信号。如图7所示，PMOS管AD30P47D3的引脚5、6、7、8连在一起，分别与电容C1的一端、电容C2的一端连接，PMOS管AD30P47D3的引脚4独立，与电容C3的一端、电阻R8的一端、电阻R5的一端连接，电阻R8的另一端与场效应管Q4的漏极D连接，场效应管Q4的栅极与电阻R17的一端连接，场效应管Q4的源极接地，PMOS管AD30P47D3的引脚1、2、3连接在一起，且分别与电容C3的另一端、电阻R5的另一端、电阻R13的一端连接。图8是本发明的通过DP端口传输电力方法中使用的Source端DC-DC 20V输入电源第一检查电路电路图。如图8所示，场效应管Q3的漏极与电阻R3的一端连接，场效应管的栅极与电阻R7的一端连接，场效应管的源极接地，通过设置场效应管Q3、电阻R7及电阻R3，实现Source端DC-DC 20V输入电源检测功能。图9是本发明的通过DP端口传输电力方法中使用的Source端DC-DC 20V输入电源第二检查电路电路图。如图9所示，电阻R4与电阻R6的一端连接，电阻R6的另一端接地。通过使用电阻R4和R6，达到对Source端DC-DC 20V输入电源进行检测的目的。图10是本发明的通过DP端口传输电力方法中使用的Source端MCU IO使用配置电路电路图。如图10所示，USB芯片VL103R-Q4通过引脚6、7、8分别与电阻R31、R32、R33连接。通过采用USB芯片，达到Source端MCU IO使用配置的目的。图11是本发明的通过DP端口传输电力方法中使用的Source端DC-DC 5V 转换电路电路图。如图11所示，开关式稳压器U5的引脚1分别与电容C31的一端、电容C35的一端、电容C36的一端、电容C37的一端、电容C32的一端、电阻R34的一端连接，开关式稳压器U5的引脚3分别与电阻R34的另一端、电容C38的一端连接，开关式稳压器U5的引脚5与电阻R35的一端连接，开关式稳压器U5的引脚6与电阻R37的一端连接，开关式稳压器U5的引脚8与电阻R36的一端连接。电阻R35的另一端分别与电阻R37的另一端、电阻R36的另一端、开关式稳压器U5的引脚9、电容C40的一端、电阻R38的一端连接，电阻R38的另一端分别与电阻R40的一端、开关式稳压器U5的引脚4连接。开关式稳压器U5的引脚16与电容C26的一端连接，电容C26的另一端分别与电感L2的一端、开关式稳压器U5的引脚15连接。图12是本发明的通过DP端口传输电力方法中使用的Source端与Sink端之间连接引脚电路电路图。如图12所示，Source端与Sink端之间通过DP连接线连接。图13是本发明的通过DP端口传输电力方法中使用的Sink端供电电路电路图。如图13所示，开关式稳压器U1的引脚1分别与电容C5的一端、电容C8的一端、电容C6的一端、电容C9的一端、电容C10的一端、电阻R9的一端连接，开关式稳压器U1的引脚3分别与电阻R9的另一端、电容C11的一端连接，开关式稳压器U1的引脚5与电阻R10的一端连接，开关式稳压器U1的引脚6与电阻R12的一端连接，开关式稳压器U1的引脚8与电阻R11的一端连接。电阻R10的另一端分别与电阻R12的另一端、电阻R11的另一端、开关式稳压器U1的引脚9、电容C13的一端、电阻R14的一端连接，电阻R14的另一端分别与电阻R19的一端、开关式稳压器U1的引脚4连接。开关式稳压器U1的引脚16与电容C4的一端连接，电容C4的另一端分别与电感L1的一端、开关式稳压器U1的引脚15连接。图14是本发明的通过DP端口传输电力方法中使用的Sink端DC-DC 3.3V电路电路图。如图14所示，低压差线性稳压器U3的引脚3与电容C21的一端连接，低压差线性稳压器U3的引脚2分别与电容C22的一端、电容C23的一端连接。实施本实施例，通过采用当前流行使用的DisplayPort接口，实现对后端显示设备的供电传输，使显示设备免除单独的外接电源设备，使DisplayPort可实现电源和音视频的同时传输，系统结构简单，提升显示设备的简洁性。本发明可用于众多通用或专用的计算机系统环境或配置中。例如：个人计算机、服务器计算机、手持设备或便携式设备、平板型设备、多处理器系统、基于微处理器的系统、置顶盒、可编程的消费电子设备、网络PC、小型计算机、大型计算机、包括以上任何系统或设备的分布式计算环境等等。本发明可以在由计算机执行的计算机可执行指令的一般上下文中描述，例如程序模块。一般地，程序模块包括执行特定任务或实现特定抽象数据类型的例程、程序、对象、组件、数据结构等等。也可以在分布式计算环境中实践本发明，在这些分布式计算环境中，由通过通信网络而被连接的远程处理设备来执行任务。在分布式计算环境中，程序模块可以位于包括存储设备在内的本地和远程计算机存储介质中。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机可读指令来指令相关的硬件来完成，该计算机可读指令可存储于一计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，前述的存储介质可为磁碟、光盘、只读存储记忆体等非易失性存储介质，或随机存储记忆体等。应该理解的是，虽然附图的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，其可以以其他的顺序执行。而且，附图的流程图中的至少一部分步骤可以包括多个子步骤或者多个阶段，这些子步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，其执行顺序也不必然是依次进行，而是可以与其他步骤或者其他步骤的子步骤或者阶段的至少一部分轮流或者交替地执行。实施例二进一步参考图15，作为对上述图2所示方法的实现，本发明提供了一种通过DP端口传输电力装置的一个实施例，该装置实施例与图2所示的方法实施例相对应，该装置具体可以应用于各种电子设备中。如图15所示，本实施例的通过DP端口传输电力装置40包括：设置模块41、检测模块42、获取模块43、供电模块44以及重置模块45。其中：设置模块41，用于当设备Source端检测到连接器引脚Pin18为低电平时，将设备Source端输入的20～48V提供的系统电源，通过一路DC-DC电路进行电压转换并进行电流限制，通过连接器引脚Pin20和Pin19提供电压为3.3V、电流为500ma的功率电源作为供电系统的初始状态；检测模块42，用于当设备Source端通过一路DC-DC电路，检测到连接器引脚Pin20输出功率大于200ma时，并且检测到连接器引脚Pin18有热插拔信号且有3.3V电压时，检测连接器引脚Pin15和Pin17的通讯状态；获取模块43，用于从由连接器引脚Pin15和Pin17组成的通讯通道，获取设备Sink端的基础属性；供电模块44，用于将引脚Pin20和引脚Pin19及Pin14和Pin13分别组合成两组供电单元，设备Source端通过两组DC-DC 20V电源电路，为两组供电单元分配工作电压，工作电压来自由设备Sink端获取的电压值，两组供电单元分别为设备Sink端提供一半的输出功率；重置模块45，用于设备Source端实时监控输出功率的变化，当设备Source端检测到Source端大于通讯协议沟通的功率后，切断引脚Pin13和Pin14电源，并重新连接引脚Pin20和Pin19到设备Source端DC-DC 3.3V电源，之后重新进入通讯状态。实施本实施例，通过采用现在流行使用的DisplayPort接口，实现对后端显示设备的供电传输，使显示设备免除单独的外接电源设备，使得DisplayPort可实现电源和音视频的同时传输，系统结构简单，提升显示设备的简洁性。实施例三为解决上述技术问题，本发明实施例还提供计算机设备。具体请参阅图16，图16为本实施例计算机设备基本结构框图。计算机设备6包括通过系统总线相互通信连接存储器61、处理器62、网络接口63。需要指出的是，图中仅示出了具有组件存储器61、处理器62和网络接口63的计算机设备6，但是应理解的是，并不要求实施所有示出的组件，可以替代的实施更多或者更少的组件。其中，本技术领域技术人员可以理解，这里的计算机设备是一种能够按照事先设定或存储的指令，自动进行数值计算和/或信息处理的设备，其硬件包括但不限于微处理器、专用集成电路、可编程门阵列、数字处理器 、嵌入式设备等。计算机设备可以是桌上型计算机、笔记本、掌上电脑及云端服务器等计算设备。计算机设备可以与用户通过键盘、鼠标、遥控器、触摸板或声控设备等方式进行人机交互。存储器61至少包括一种类型的可读存储介质，可读存储介质包括闪存、硬盘、多媒体卡、卡型存储器、随机访问存储器、静态随机访问存储器、只读存储器、电可擦除可编程只读存储器、可编程只读存储器、磁性存储器、磁盘、光盘等。在一些实施例中，存储器61可以是计算机设备6的内部存储单元，例如该计算机设备6的硬盘或内存。在另一些实施例中，存储器61也可以是计算机设备6的外部存储设备，例如该计算机设备6上配备的插接式硬盘，智能存储卡，安全数字卡，闪存卡等。当然，存储器61还可以既包括计算机设备6的内部存储单元也包括其外部存储设备。本实施例中，存储器61通常用于存储安装于计算机设备6的操作系统和各类应用软件，例如通过DP端口传输电力方法的计算机可读指令等。此外，存储器61还可以用于暂时地存储已经输出或者将要输出的各类数据。处理器62在一些实施例中可以是中央处理器、控制器、微控制器、微处理器、或其他数据处理芯片。该处理器62通常用于控制计算机设备6的总体操作。本实施例中，处理器62用于运行存储器61中存储的计算机可读指令或者处理数据，例如运行通过DP端口传输电力方法的计算机可读指令。网络接口63可包括无线网络接口或有线网络接口，该网络接口63通常用于在计算机设备6与其他电子设备之间建立通信连接。实施本实施例，通过现流行使用的DisplayPort接口实现对后端显示设备的供电传输，使显示设备免除单独的外接电源设备，使DisplayPort可实现电源和音视频的同时传输，系统结构简单，提升显示设备的简洁性。实施例四本发明还提供了另一种实施方式，即提供一种计算机可读存储介质，计算机可读存储介质存储有计算机可读指令，计算机可读指令可被至少一个处理器执行，以使至少一个处理器执行如上述的通过DP端口传输电力方法的步骤。实施本实施例，通过现流行使用的DisplayPort接口实现对后端显示设备的供电传输，使显示设备免除单独的外接电源设备，使DisplayPort可实现电源和音视频的同时传输，系统结构简单，提升显示设备的简洁性。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到上述实施例方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台终端设备执行本发明各个实施例的方法。显然，以上所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例，附图中给出了本发明的较佳实施例，但并不限制本发明的专利范围。本发明可以以许多不同的形式来实现，相反地，提供这些实施例的目的是使对本发明的公开内容的理解更加透彻全面。尽管参照前述实施例对本发明进行了详细的说明，对于本领域的技术人员来而言，其依然可以对前述各具体实施方式所记载的技术方案进行修改，或者对其中部分技术特征进行等效替换。凡是利用本发明说明书及附图内容所做的等效结构，直接或间接运用在其他相关的技术领域，均同理在本发明专利保护范围之内。
