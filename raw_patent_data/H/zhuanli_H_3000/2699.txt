标题title
一种数据包提取方法、装置、设备及介质
摘要abst
本申请公开了一种数据包提取方法、装置、设备及介质，涉及以太网数据传输领域，该方法包括：利用通过千兆介质无关接口接收的帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量；基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志；基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据；基于所述平移后数据生成与所述目标流数据对应的数据包。本发明能够通过进行帧头、帧尾数量检测并利用数据平移的方式实现以太网数据包的提取，为400G以太网包的提取提供了一种有效的实现方式。
权利要求书clms
1.一种数据包提取方法，其特征在于，包括：利用通过千兆介质无关接口接收的帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量；基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志；基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据；基于所述平移后数据生成与所述目标流数据对应的数据包。2.根据权利要求1所述的数据包提取方法，其特征在于，所述基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志，包括：基于所述帧头数量与所述帧尾数量确定目标流数据的帧头平移标志和帧尾平移标志；其中，所述帧头平移标志用于对所述目标流数据中的帧头数据进行平移对齐；相应的，所述基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，包括：基于所述帧头平移标志和帧尾平移标志从所述目标流数据中确定目标数据，并对所述目标流数据中的数据进行数据平移处理。3.根据权利要求2所述的数据包提取方法，其特征在于，所述基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据，包括：基于所述帧头平移标志和帧尾平移标志，从基于所述目标流数据延迟一个周期获取的第一目标数据和延迟两个周期获取的第二目标数据中确定目标数据，并对所述目标数据进行数据平移处理，以确定包含有帧头的第一数据与包含有帧尾的第二数据。4.根据权利要求3所述的数据包提取方法，其特征在于，所述基于所述帧头平移标志和帧尾平移标志，从基于所述目标流数据延迟一个周期获取的第一目标数据和延迟两个周期获取的第二目标数据中确定目标数据，并对所述目标数据进行数据平移处理，以确定包含有帧头的第一数据与包含有帧尾的第二数据，包括：基于所述帧头平移标志确定第一目标平移通道，并将所述目标流数据延迟两个周期获取的第二目标数据中所述第一目标平移通道中的数据以及所述第一目标平移通道后的数据作为第一平移数据；确定数据传输的通道总数，并基于所述通道总数与所述第一平移数据包含的第一平移通道数确定第二平移通道数；将所述目标流数据延迟一个周期获取的第一目标数据中，前所述第二平移通道数对应的数据作为第二平移数据；将所述第一平移数据与所述第二平移数据进行连接，以确定第一数据；基于所述帧尾平移标志确定目标结束通道，并基于所述目标结束通道与所述第一目标平移通道，利用预设帧尾平移方法确定包含有帧尾的第二数据。5.根据权利要求3或4所述的数据包提取方法，其特征在于，所述基于所述平移后数据生成与所述目标流数据对应的数据包，包括：根据所述帧头标志信号的前二分之一通道中的帧头数量与所述帧尾标志信号的后二分之一通道中的帧尾数量，确定所述第一数据和所述第二数据与第一数据包和第二数据包的对应关系；基于所述对应关系，并利用所述第一数据和所述第二数据生成与所述目标流数据对应的第一数据包和第二数据包。6.根据权利要求1所述的数据包提取方法，其特征在于，所述基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志，包括：基于所述帧头数量与所述帧尾数量确定目标流数据的单周期小包平移标志；所述单周期小包平移标志用于对所述目标流数据中的帧头数据进行平移对齐；相应的，所基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，包括：基于所述单周期小包平移标志从所述目标流数据中确定目标数据，并对所述目标流数据中的数据进行数据平移处理。7.根据权利要求6所述的数据包提取方法，其特征在于，所述基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据，包括：基于所述单周期小包平移标志确定第二目标平移通道，并将所述目标流数据延迟两个周期获取的第二目标数据中所述第二目标平移通道中的数据以及所述第二目标平移通道后的数据作为第三平移数据；以将所述第三平移数据中所述第二目标平移通道的数据放置于起始通道，将其余通道数据补零的方式生成第三数据；相应的，所述基于所述平移后数据生成与所述目标流数据对应的数据包，包括：基于所述第三数据生成与所述目标流数据对应的数据包。8.一种数据包提取装置，其特征在于，包括：帧头帧尾数量确定模块，用于利用通过千兆介质无关接口接收的帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量；数据平移标志确定模块，用于基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志；数据平移模块，用于基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据；数据包生成模块，用于基于所述平移后数据生成与所述目标流数据对应的数据包。9.一种电子设备，其特征在于，包括处理器和存储器；其中，所述处理器执行所述存储器中保存的计算机程序时实现如权利要求1至7任一项所述的数据包提取方法。10.一种计算机可读存储介质，其特征在于，用于存储计算机程序；其中，所述计算机程序被处理器执行时实现如权利要求1至7任一项所述的数据包提取方法。
说明书desc
技术领域本发明涉及以太网数据传输，特别涉及一种数据包提取方法、装置、设备及介质。背景技术现有技术中已有在100G MAC实现以太网包的提取方法，但针对一些位宽低于或等于512bit，针对1024或2048bit等连续大位宽以太网包提取的算法较少，而400G或800G等单周期内存在多个包的情况，因此连续大位宽以太网包的提取技术有待攻克。由上可见，在400G、800G或更高速率光通信或的以太网分析过程中，如何提供一种以太网包的提取方法是本领域有待解决的问题。发明内容有鉴于此，本发明的目的在于提供一种数据包提取方法、装置、设备及介质，能够通过进行帧头、帧尾数量检测并利用数据平移的方式实现以太网数据包的提取，为400G以太网包的提取提供了一种有效的实现方式。其具体方案如下：第一方面，本申请公开了一种数据包提取方法，包括：利用通过千兆介质无关接口接收的帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量；基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志；基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据；基于所述平移后数据生成与所述目标流数据对应的数据包。可选的，所述基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志，包括：基于所述帧头数量与所述帧尾数量确定目标流数据的帧头平移标志和帧尾平移标志；其中，所述帧头平移标志用于对所述目标流数据中的帧头数据进行平移对齐；相应的，所述基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，包括：基于所述帧头平移标志和帧尾平移标志从所述目标流数据中确定目标数据，并对所述目标流数据中的数据进行数据平移处理。可选的，所述基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据，包括：基于所述帧头平移标志和帧尾平移标志，从基于所述目标流数据延迟一个周期获取的第一目标数据和延迟两个周期获取的第二目标数据中确定目标数据，并对所述目标数据进行数据平移处理，以确定包含有帧头的第一数据与包含有帧尾的第二数据。可选的，所述基于所述帧头平移标志和帧尾平移标志，从基于所述目标流数据延迟一个周期获取的第一目标数据和延迟两个周期获取的第二目标数据中确定目标数据，并对所述目标数据进行数据平移处理，以确定包含有帧头的第一数据与包含有帧尾的第二数据，包括：基于所述帧头平移标志确定第一目标平移通道，并将所述目标流数据延迟两个周期获取的第二目标数据中所述第一目标平移通道中的数据以及所述第一目标平移通道后的数据作为第一平移数据；确定数据传输的通道总数，并基于所述通道总数与所述第一平移数据包含的第一平移通道数确定第二平移通道数；将所述目标流数据延迟一个周期获取的第一目标数据中，前所述第二平移通道数对应的数据作为第二平移数据；将所述第一平移数据与所述第二平移数据进行连接，以确定第一数据；基于所述帧尾平移标志确定目标结束通道，并基于所述目标结束通道与所述第一目标平移通道，利用预设帧尾平移方法确定包含有帧尾的第二数据。可选的，所述基于所述平移后数据生成与所述目标流数据对应的数据包，包括：根据所述帧头标志信号的前二分之一通道中的帧头数量与所述帧尾标志信号的后二分之一通道中的帧尾数量，确定所述第一数据和所述第二数据与第一数据包和第二数据包的对应关系；基于所述对应关系，并利用所述第一数据和所述第二数据生成与所述目标流数据对应的第一数据包和第二数据包。可选的，所述基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志，包括：基于所述帧头数量与所述帧尾数量确定目标流数据的单周期小包平移标志；所述单周期小包平移标志用于对所述目标流数据中的帧头数据进行平移对齐；相应的，所述基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，包括：基于所述单周期小包平移标志从所述目标流数据中确定目标数据，并对所述目标流数据中的数据进行数据平移处理。可选的，所述基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据，包括：基于所述单周期小包平移标志确定第二目标平移通道，并将所述目标流数据延迟两个周期获取的第二目标数据中所述第二目标平移通道中的数据以及所述第二目标平移通道后的数据作为第三平移数据；以将所述第三平移数据中所述第二目标平移通道的数据放置于起始通道，将其余通道数据补零的方式生成第三数据；相应的，所述基于所述平移后数据生成与所述目标流数据对应的数据包，包括：基于所述第三数据生成与所述目标流数据对应的数据包。第二方面，本申请公开了一种数据包提取装置，包括：帧头帧尾数量确定模块，用于利用通过千兆介质无关接口接收的帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量；数据平移标志确定模块，用于基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志；数据平移模块，用于基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据；数据包生成模块，用于基于所述平移后数据生成与所述目标流数据对应的数据包。第三方面，本申请公开了一种电子设备，包括：存储器，用于保存计算机程序；处理器，用于执行所述计算机程序，以实现前述的数据包提取方法。第四方面，本申请公开了一种计算机存储介质，用于保存计算机程序；其中，所述计算机程序被处理器执行时实现前述公开的数据包提取方法的步骤。本申请利用通过千兆介质无关接口接收的帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量；基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志；基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据；基于所述平移后数据生成与所述目标流数据对应的数据包。这样一来，本发明通过帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量，并确定目标流数据的数据平移标志，基于所述数据平移标志对数据进行平移后，基于平移后的数据确定数据包，最终完成以太网数据包的提取。本发明可以在1024bit的位宽上对以太网数据进行提取，编译频率在400MHz，对于400G等的以太网流量可正确提取以太网帧用于MAC层CRC校验。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据提供的附图获得其他的附图。图1为本申请提供的一种数据包提取方法流程图；图2为本申请提供的一种具体的数据包提取方法流程图；图3为本申请提供的一种第一数据平移示意图；图4为本申请提供的一种具体的数据包提取方法流程图；图5为本申请提供的一种数据包提取装置结构示意图；图6为本申请提供的一种电子设备结构图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。现有技术中，针对一些位宽低于或等于512bit，针对1024或2048bit等连续大位宽以太网包提取的算法较少，而400G或800G等单周期内存在多个包的情况，因此连续大位宽以太网包的提取技术有待攻克。在本申请中，能够通过进行帧头、帧尾数量检测并利用数据平移的方式实现以太网数据包的提取，为400G及以上更高速率的以太网包的提取提供了一种有效的实现方式。本发明实施例公开了一种数据包提取方法，参见图1所述，该方法包括：步骤S11：利用通过千兆介质无关接口接收的帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量。本实施例中，针对400G网络可以在千兆介质无关接口中定义：1024bit数据信号i_txd；其中＜16-1:0＞＜63：0＞表示数据信号使用16通道进行传输，且起始通道为0，每一通道64bit位宽；128bits控制信号i_txc；16bits帧头标志信号i_startofpacket；128bits帧尾标志信号i_endofpacket；lane通道数量I=16，即400G以太网中有16个lane同时进行数据传输，且每个通道传输64bit数据。本发明中的具体实施方式中，可以基于帧头标志信号i_startofpacket确定帧头数量start_num，基于帧尾标志信号i_endofpacket确定帧尾数量end_num。具体地，在确定帧尾数量的过程中，先基于帧尾标志信号i_endofpacket得出帧尾结束的通道end_lane，然后得出帧尾数量end_num。其中，在获取目标流数据之后的一个周期可确定帧头数量start_num与帧尾结束的通道end_lane，在获取目标流数据之后的两个周期确定帧尾数量end_num。步骤S12：基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志。本发明中，所述数据平移标志用于作为数据平移的依据对目标流数据做平移处理。目标流数据的数据平移标志可以包括帧头平移标志和帧尾平移标志或单周期小包平移标志。具体地，若目标流数据中为多周期大包，可以确定大包对应的帧头平移标志和帧尾平移标志；若目标流数据中为单周期小包，则可以确定小包对应的单周期小包平移标志。步骤S13：基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据。本实施例中，基于所述数据平移标志可以从目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据。所述平移后数据为后续数据包提取的依据。步骤S14：基于所述平移后数据生成与所述目标流数据对应的数据包。本实施例中，利用通过千兆介质无关接口接收的帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量；基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志；基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据；基于所述平移后数据生成与所述目标流数据对应的数据包。这样一来，本发明通过帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量，并确定目标流数据的数据平移标志，基于所述数据平移标志对数据进行平移后，基于平移后的数据确定数据包，最终完成以太网数据包的提取。本发明可以在1024bit的位宽上对以太网数据进行提取，编译频率在400MHz，对于400G的以太网流量可正确提取以太网帧用于MAC层CRC校验。图2为本申请实施例提供的一种具体的数据包提取方法流程图。参见图2所示，该方法包括：步骤S21：利用通过千兆介质无关接口接收的帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量。其中，关于步骤S21的更加具体的处理过程可以参考前述实施例中公开的相应内容，在此不再进行赘述。步骤S22：基于所述帧头数量与所述帧尾数量确定目标流数据的帧头平移标志和帧尾平移标志；其中，所述帧头平移标志用于对所述目标流数据中的帧头数据进行平移对齐。在具体的实施方式中，在确定帧头平移标志时，若帧头数量start_num=1且帧尾数量end_num=2，则帧头平移标志start_extract的高l/2通道的数据值为帧头标志信号i_startofpacket的高l/2通道的数据值，低l/2通道的数据值为0，即Start_extract＜15:0＞具体数值为{i_startofpacket＜15:8＞，8’h00}；若帧头数量start_num=2，帧尾数量end_num=1或2，则帧头平移标志start_extract的高l/2通道的数据值为0，低l/2通道的数据值为i_startofpacket的低l/2通道的数据值，即Start_extract＜15:0＞具体数值为{8’h00，i_startofpacket＜7:0＞}；除上述两种情况外以外的其他情况下，帧头平移标志start_extract为i_startofpacket_dl2的值，即Start_extract＜15:0＞具体数值为{i_startofpacket_dl2＜15:0＞}。在具体的实施方式中，在确定帧尾平移标志时，根据i_endofpacket可以检测出包结束的通道位置end_lane位宽＜16-1:0＞，然后结合end_lane确定帧尾平移标志Termin_lane：若帧头数量start_num=1或2，且帧尾数量end_num=2，则帧尾平移标志Termin_lane的高l/2通道的数据值为end_lane_dl1的高l/2通道的数据值，低l/2通道的数据值为0；若帧头数量start_num=2，且帧尾数量end_num=1，则帧尾平移标志Termin_lane为0；除上述两种情况外以外的其他情况下，帧尾平移标志Termin_lane为end_lane_dl1。步骤S23：基于所述帧头平移标志和帧尾平移标志从所述目标流数据中确定目标数据，并对所述目标流数据中的数据进行数据平移处理，以获取平移后数据。本实施例中，所述基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据，可以包括：基于所述帧头平移标志和帧尾平移标志，从基于所述目标流数据延迟一个周期获取的第一目标数据和延迟两个周期获取的第二目标数据中确定目标数据，并对所述目标数据进行数据平移处理，以确定包含有帧头的第一数据与包含有帧尾的第二数据。本实施例中可以根据上述得出的帧头平移标志start_extract和帧尾平移标志Termin_lane在两个周期的32个通道数据上做数据的平移对齐。具体地，可以根据帧头平移标志start_extract值平移目标流数据对应在两个周期的32个通道数据以得出第一数据txd_a，并利用帧头平移标志start_extract值和帧尾平移标志Termin_lane平移所述32个通道数据以得出第二数据txd_b。需要指出的是，所述第一数据包含有帧头，所述第二数据包含有帧尾。并且，数据平移后要确保目标流数据中的包的帧头放置于第一数据中的起始通道上。本实施例中，所述基于所述帧头平移标志和帧尾平移标志，从基于所述目标流数据延迟一个周期获取的第一目标数据和延迟两个周期获取的第二目标数据中确定目标数据，并对所述目标数据进行数据平移处理，以确定包含有帧头的第一数据与包含有帧尾的第二数据，可以包括：基于所述帧头平移标志确定第一目标平移通道，并将所述目标流数据延迟两个周期获取的第二目标数据中所述第一目标平移通道中的数据以及所述第一目标平移通道后的数据作为第一平移数据；确定数据传输的通道总数，并基于所述通道总数与所述第一平移数据包含的第一平移通道数确定第二平移通道数；将所述目标流数据延迟一个周期获取的第一目标数据中，前所述第二平移通道数对应的数据作为第二平移数据；将所述第一平移数据与所述第二平移数据进行连接，以确定第一数据；基于所述帧尾平移标志确定目标结束通道，并基于所述目标结束通道与所述第一目标平移通道，利用预设帧尾平移方法确定包含有帧尾的第二数据。本实施例中，可以基于帧头平移标志start_extract确定平移lane数量标志lane_shift，即第一目标平移通道。例如start_extract=16’h0400，表明包的起始lane在第六个通道上，即第一目标平移通道为6，当16通道为0-15通道时，lane_shift=5。本发明中将目标流数据延迟两个周期获取的第二目标数据中所述第一目标平移通道以及中的数据以及所述第一目标平移通道后的数据作为第一平移数据，即将txd_dl2作为第一平移数据，然后确定数据传输的通道总数为16，第一平移数据包含的第一平移通道数为11，则确定第二平移通道数为16-11=5，将所述目标流数据延迟一个周期获取的第一目标数据中，前5个通道对应的数据作为第二平移数据，即第二平移数据为txd_dl1，然后将第一平移数据与第二平移数据进行连接确定第一数据，即第一数据txd_a={txd_dl2，txd_dl1}，即由txd_dl2的5-15通道和txd_dl1的0-4通道数据组成。如图3为本发明提出的第一数据平移示意图，图中txd为目标流数据，txd_dl1为目标流数据延迟一周期获取的第一目标数据，txd_dl2为目标流数据延迟两周期获取的第二目标数据，以start_extract=16’h0400为例，将txd_dl2的5-15通道和txd_dl1的0-4通道数据进行平移与组合，确定第一数据txd_a。需要指出的是，生成的第一数据中，帧头始终位于txd_a的起始通道上。本实施例中，可以基于所述帧尾平移标志确定目标结束通道，并基于所述目标结束通道与所述第一目标平移通道，利用预设帧尾平移方法确定包含有帧尾的第二数据。具体的，若帧尾标志Termin_lane数值0，即没有帧尾，则txd_b={txd_dl2，txd_dl1}；若帧尾平移标志Termin_lane不为0，当Termin_lane=16’h8000，16’h4000，16’h2000，16’h1000，16’h0800，五种情况时，即帧尾平移标志对应的目标结束通道为第一目标平移通道之前的通道，则txd_b为0，因为以上五种情况的帧尾数据实际上已经在A中进行了平移；若帧尾平移标志Termin_lane不为0，且Termin_lane为其余10中情况时，帧结束在第一目标平移通道之后，则取第二目标数据txd_dl2中第一目标平移通道至目标结束通道之间的数值为第三平移数据，并将第三平移数据中的第一目标平移通道的数据赋值给第二数据的初始通道，将第三平移数据中的原始数据顺序依次赋值至第二数据的相应通道，最后将不具备数值的通道补零。例如，在具体实施时，如帧头平移标志start_extract=16’h0400，第一目标平移通道lane_shift=5，帧尾平移标志Termin_lane=16’h0200，目标结束通道为6，则txd_b={txd_dl2, 0}，只取5和6通道数据，其他通道数值补零，最终得到第二数据txd_b。步骤S24：基于所述平移后数据生成与所述目标流数据对应的数据包。本实施例中，所述基于所述平移后数据生成与所述目标流数据对应的数据包，可以包括：根据所述帧头标志信号的前二分之一通道中的帧头数量与所述帧尾标志信号的后二分之一通道中的帧尾数量，确定所述第一数据和所述第二数据与第一数据包和第二数据包的对应关系；基于所述对应关系，并利用所述第一数据和所述第二数据生成与所述目标流数据对应的第一数据包和第二数据包。具体的实施方式中，首先根据帧头标志信号i_startofpacket的0-7通道判断是否有帧头产生，根据帧尾标志信号i_endofpacket的8-15通道判断是否有帧尾产生end_lane_num，本实施例中将帧头标志信号的前二分之一通道中的帧头数量记为start_half_num，将帧尾标志信号的后二分之一通道中的帧尾数量记为end_lane_num。若帧头标志信号的前二分之一通道中的帧头数量start_half_num=1且帧尾标志信号的后二分之一通道中的帧尾数量end_lane_num=1，则产生one_head_end为1，其他情况one_head_end均为0；若所述帧头数量start_num=1且帧尾数量end_num=1且one_head_end=0，或帧头数量start_num=2且帧尾数量end_num=2，以上两个种情况之一，则表示识别到可提取一个完整的数据包，此时控制extract_pkt为1，并控制extract_flag电平翻转。然后基于extract_pkt与extract_flag确定第一数据txd_A和所述第二数据txd_b与第一数据包Data_1和第二数据包Data_2的对应关系，以将txd_A和txd_b分别分配到Data_1、Data_2中，具体如下：若extract_pkt=1且extract_flag=1，则Data_1=txd_b，Data_2=txd_A;若extract_pkt=1且extract_flag=0，则Data_1=txd_A，Data_2=txd_b;除上述两种情况以外的其他情况下：若extract_flag=0，则Data_2=0；判断start_extract_dl1是否为0，若为0：则Data_1 = txd_b；若为1，则Data_1 = txd_A;若extract_flag=1，则Data_1=0；判断start_extract_dl1是否为0，若为0，则Data_2 = txd_b；若为1，则Data_2 = txd_A。所述Data_1与Data_2即为针对所述目标流数据提取出的数据包。本实施例中，提出了帧头帧尾数量和位置检测法，根据帧头帧尾数量和位置两个维度从一个数据组中提取出两个分别包含帧头和帧尾的数据组；通过帧头0-7，帧尾8-15通道包含的帧头帧尾信息，并结合0-15通道的帧头和帧尾数量，提出了数据包提取的标志，并根据该标志实现了以太网的正确提取。图4为本申请实施例提供的一种具体的数据包提取方法流程图。参见图4所示，该方法包括：步骤S31：利用通过千兆介质无关接口接收的帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量。其中，关于步骤S31的更加具体的处理过程可以参考前述实施例中公开的相应内容，在此不再进行赘述。步骤S32：基于所述帧头数量与所述帧尾数量确定目标流数据的单周期小包平移标志；所述单周期小包平移标志用于对所述目标流数据中的帧头数据进行平移对齐。本实施例中，若帧头数量start_num=1且帧尾数量end_num=2，则单周期小包平移标志small_extract为i_startofpacket_dl2；若帧头数量start_num=2，帧尾数量end_num=1或2，则单周期小包平移标志small_extract的高l/2通道的数据值为帧头标志信号i_startofpacket_dl2的高l/2通道的数据值，低l/2通道的数据值为0；除上述两种情况外以外的其他情况下，单周期小包平移标志small_extract为0。步骤S33：基于所述单周期小包平移标志从所述目标流数据中确定目标数据，并对所述目标流数据中的数据进行数据平移处理，以获取平移后数据。本实施例中，所述基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据，可以包括：基于所述单周期小包平移标志确定第二目标平移通道，并将所述目标流数据延迟两个周期获取的第二目标数据中所述第二目标平移通道中的数据以及所述第二目标平移通道后的数据作为第三平移数据；以将所述第三平移数据中所述第二目标平移通道的数据放置于起始通道，将其余空通道数据补零的方式生成第三数据。本实施例中，根据small_extract标志的值，我们可以提取短包txd_c，txd_c的提取如下：如small_extract=16'h1000，则表示该短包的帧头在第四个通道上，当16通道为0-15通道时短包的帧头在lane3上，则txd_c={txd_dl2，0}；表示短包数据位于通道3至通道15之间，其余通道数据补零。依据上述过程便可确定第三数据。步骤S34：基于所述平移后数据生成与所述目标流数据对应的数据包。本实施例中，所述基于所述平移后数据生成与所述目标流数据对应的数据包，包括：基于所述第三数据生成与所述目标流数据对应的数据包。具体地，可以直接将第三数据打包作为针对所述目标流数据提取出的数据包。本实施例中，提出了根据帧头帧尾数量从一个数据组中提取出小包的数据包的方法，在实际的实施方式中，可以结合步骤S21-S24中针对大包数据包提取的方法进行结合使用，便可针对400G以太网实现以太网包的正确提取。可以理解的是，本发明同样适用于100G、200G及800G以太网，其中只需注意按照每个通道均传输64bit数据的原则确定通道数即可，其余数据平移及数据组合的过程同样参照上述过程完成。参见图5所示，本申请实施例公开了一种数据包提取装置，具体可以包括：帧头帧尾数量确定模块11，用于利用通过千兆介质无关接口接收的帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量；数据平移标志确定模块12，用于基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志；数据平移模块13，用于基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据；数据包生成模块14，用于基于所述平移后数据生成与所述目标流数据对应的数据包。本发明利用通过千兆介质无关接口接收的帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量；基于所述帧头数量与所述帧尾数量确定目标流数据的数据平移标志；基于所述数据平移标志从所述目标流数据中确定目标数据，并对所述目标数据进行数据平移处理，以获取平移后数据；基于所述平移后数据生成与所述目标流数据对应的数据包。这样一来，本发明通过帧头标志信号和帧尾标志信号确定目标流数据中的帧头数量和帧尾数量，并确定目标流数据的数据平移标志，基于所述数据平移标志对数据进行平移后，基于平移后的数据确定数据包，最终完成以太网数据包的提取。本发明可以在1024bit的位宽上对以太网数据进行提取，编译频率在400MHz，对于400G的以太网流量可正确提取以太网帧用于MAC层CRC校验。进一步的，本申请实施例还公开了一种电子设备，图6是根据示例性实施例示出的电子设备20结构图，图中的内容不能认为是对本申请的使用范围的任何限制。图6为本申请实施例提供的一种电子设备20的结构示意图。该电子设备20，具体可以包括：至少一个处理器21、至少一个存储器22、电源23、显示屏24、输入输出接口25、通信接口26和通信总线27。其中，所述存储器22用于存储计算机程序，所述计算机程序由所述处理器21加载并执行，以实现前述任一实施例公开的数据包提取方法中的相关步骤。另外，本实施例中的电子设备20具体可以为电子计算机。本实施例中，电源23用于为电子设备20上的各硬件设备提供工作电压；通信接口26能够为电子设备20创建与外界设备之间的数据传输通道，其所遵循的通信协议是能够适用于本申请技术方案的任意通信协议，在此不对其进行具体限定；输入输出接口25，用于获取外界输入数据或向外界输出数据，其具体的接口类型可以根据具体应用需要进行选取，在此不进行具体限定。另外，存储器22作为资源存储的载体，可以是只读存储器、随机存储器、磁盘或者光盘等，其上所存储的资源可以包括操作系统221、计算机程序222及虚拟机数据223等，虚拟机数据223可以包括各种各样的数据。存储方式可以是短暂存储或者永久存储。其中，操作系统221用于管理与控制电子设备20上的各硬件设备以及计算机程序222，其可以是Windows Server、Netware、Unix、Linux等。计算机程序222除了包括能够用于完成前述任一实施例公开的由电子设备20执行的数据包提取方法的计算机程序之外，还可以进一步包括能够用于完成其他特定工作的计算机程序。进一步的，本申请还公开了一种计算机可读存储介质，这里所说的计算机可读存储介质包括随机存取存储器、内存、只读存储器、电可编程ROM、电可擦除可编程ROM、寄存器、硬盘、磁碟或者光盘或技术领域内所公知的任意其他形式的存储介质。其中，所述计算机程序被处理器执行时实现前述公开的数据包提取方法。关于该方法的具体步骤可以参考前述实施例中公开的相应内容，在此不再进行赘述。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其它实施例的不同之处，各个实施例之间相同或相似部分互相参见即可。对于实施例公开的装置而言，由于其与实施例公开的方法相对应，所以描述的比较简单，相关之处参见方法部分说明即可。专业人员还可以进一步意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、计算机软件或者二者的结合来实现，为了清楚地说明硬件和软件的可互换性，在上述说明中已经按照功能一般性地描述了各示例的组成及步骤。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。结合本文中所公开的实施例描述的方法或算法的步骤可以直接用硬件、处理器执行的软件模块，或者二者的结合来实施。软件模块可以置于随机存储器、内存、只读存储器、电可编程ROM、电可擦除可编程ROM、寄存器、硬盘、可移动磁盘、CD-ROM、或技术领域内所公知的任意其它形式的存储介质中。最后，还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。以上对本发明所提供的数据包提取方法、装置、设备、存储介质进行了详细介绍，本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处，综上所述，本说明书内容不应理解为对本发明的限制。
