标题title
一种存储装置及其供电方法
摘要abst
本发明提供一种存储装置及其供电方法，具体涉及存储技术领域，包括：主处理器；存储器，所述存储器电性连接于所述主处理器，所述存储器中设置有工作条件寄存器；电源模块，所述电源模块电性连接于所述主处理器和所述存储器；多个电源转换模块，设置在所述电源模块内，所述电源转换模块电性连接于所述主处理器，所述主处理器控制所述电源转换模块输出多种电压电源；电源保护模块，设置在所述电源模块内，所述电源保护模块的输入端电性连接于所述电源转换模块的输出端，且通过主处理器控制所述电源保护模块输出所述电压电源至所述存储器的输入端。本发明提供多种电压电源进行切换，提高电路应用的灵活性。
权利要求书clms
1.一种存储装置，其特征在于，包括：主处理器；存储器，所述存储器电性连接于所述主处理器，且所述存储器中设置有工作条件寄存器；电源模块，所述电源模块电性连接于所述主处理器和所述存储器；多个电源转换模块，设置在所述电源模块内，所述电源转换模块电性连接于所述主处理器，所述主处理器控制所述电源转换模块输出多种电压电源；以及电源保护模块，设置在所述电源模块内，所述电源保护模块的输入端电性连接于所述电源转换模块的输出端，且所述电源保护模块电性连接于所述主处理器，通过主处理器控制所述电源保护模块输出所述电压电源至所述存储器的输入端；其中，当所述主处理器发送协议命令至存储器时，所述工作条件寄存器响应所述协调命令，且所述工作条件寄存器发送工作条件寄存器数据至所述主处理器；所述主处理器分析所述操作条件寄存器数据，获取所述存储器的电压操作范围；依据所述存储器的总线规格，所述主处理器对所述电压操作范围和所述总线规格进行匹配，并获取所述存储器的可操作的总线规格；所述主处理器依据所述可操作的总线规格切换所述电压电源对所述存储器提供电源供电。2.根据权利要求1所述的一种存储装置，其特征在于，所述电源转换模块包括多个降压转换器，且所述降压转换器的使能端通过上拉电阻电性连接于直流电源，所述使能端通过下拉电阻接地，且所述使能端电性连接于所述主处理器。3.根据权利要求1所述的一种存储装置，其特征在于，所述电源保护模块包括晶体管，所述晶体管的基极电性连接于所述主处理器，所述晶体管的集电极电性连接于所述电源转换模块的输出端，所述晶体管的发射极接地。4.根据权利要求3所述的一种存储装置，其特征在于，所述电源保护模块包括第一场效应管，所述第一场效应管的栅极电性连接于所述晶体管的集电极，所述第一场效应管的漏极电性连接于所述电源转换模块的输出端。5.根据权利要求4所述的一种存储装置，其特征在于，所述电源保护模块包括第二场效应管，所述第二场效应管的源极电性连接于所述第一场效应管的源极，所述第二场效应管的栅极电性连接于所述晶体管的集电极，所述第二场效应管的漏极电性连接于电源输出端。6.一种存储装置的供电方法，其特征在于，所述方法包括以下步骤：通过主处理器发送协议命令至存储器，且所述存储器中设置有工作条件寄存器；所述工作条件寄存器响应所述协调命令，并发送工作条件寄存器数据至所述主处理器；通过所述主处理器分析所述操作条件寄存器数据，获取所述存储器的电压操作范围；依据所述存储器的总线规格，对所述电压操作范围和所述总线规格进行匹配，并获取所述存储器的可操作的总线规格；以及通过电源模块提供多种电压电源，依据所述可操作的总线规格切换电压电源对所述存储器提供电源供电。7.根据权利要求6所述的一种存储装置的供电方法，其特征在于，依据所述可操作的总线规格切换电压电源对所述存储器芯片提供电源供电还包括步骤：对所述电压电源和所述可操作的总线规格进行匹配，获取可操作的电压电源；依次选择所述可操作的电压电源，对所述存储器芯片提供电源供电。8.根据权利要求6所述的一种存储装置的供电方法，其特征在于，对所述存储器提供电源供电后，还包括步骤：所述主处理器发送测试命令至所述存储器，所述存储器响应所述测试命令进行总线测试。9.根据权利要求8所述的一种存储装置的供电方法，其特征在于，所述存储器响应所述测试命令进行总线测试的步骤包括：获取所述可操作电压电源支持的总线速度，判断所述存储器是否支持所述总线速度。10.根据权利要求9所述的一种存储装置的供电方法，其特征在于，所述存储器芯片响应所述测试命令进行总线测试后，还包括步骤：若所述总线通过，则所述主处理器对所述存储器芯片进行读写操作；若所述总线测试不通过，则重新对所述电压操作范围和所述总线规格进行匹配。
说明书desc
技术领域本申请涉及存储技术领域，具体涉及一种存储装置及其供电方法。背景技术随着存储技术的发展，对于存储器应用于产品的要求逐渐严格。由于工艺技术的推进，不同品牌产品的存储器具有不同的规格，在实际的应用中，针对不同存储器的技术特性以及电压支持范围等，要进行不同的板端设计。这对于需要快速推出产品的消费类电子，无疑是一挑战，延长了开发周期。同时，存储器芯片通过上电后，在存储设备烧写程序或者操作中切换电源等情况下，容易影响到电子产品的正常使用，甚至造成芯片损坏。因此，找到一种高效可靠的技术方案提升电路应用的灵活性是亟需解决的问题。发明内容在鉴于以上所述现有技术的缺点，本发明提供一种存储装置及其供电方法，以提供多种供电电源进行切换，提高了电路应用的灵活性。本发明提供的一种存储装置，包括：主处理器；存储器，所述存储器电性连接于所述主处理器，且所述存储器中设置有工作条件寄存器；电源模块，所述电源模块电性连接于所述主处理器和所述存储器；多个电源转换模块，设置在所述电源模块内，所述电源转换模块电性连接于所述主处理器，所述主处理器控制所述电源转换模块输出多种电压电源；以及电源保护模块，设置在所述电源模块内，所述电源保护模块的输入端电性连接于所述电源转换模块的输出端，且所述电源保护模块电性连接于所述主处理器，通过主处理器控制所述电源保护模块输出所述电压电源至所述存储器的输入端；其中，当所述主处理器发送协议命令至存储器时，所述工作条件寄存器响应所述协调命令，且所述工作条件寄存器发送工作条件寄存器数据至所述主处理器；所述主处理器分析所述操作条件寄存器数据，获取所述存储器的电压操作范围；依据所述存储器的总线规格，所述主处理器对所述电压操作范围和所述总线规格进行匹配，并获取所述存储器的可操作的总线规格；所述主处理器依据所述可操作的总线规格切换所述电压电源对所述存储器提供电源供电。于本发明的一实施例中，所述电源转换模块包括多个降压转换器，且所述降压转换器的使能端通过上拉电阻电性连接于直流电源，所述使能端通过下拉电阻接地，且所述使能端电性连接于所述主处理器。于本发明的一实施例中，所述电源保护模块包括晶体管，所述晶体管的基极电性连接于所述主处理器，所述晶体管的集电极电性连接于所述电源转换模块的输出端，所述晶体管的发射极接地。于本发明的一实施例中，所述电源保护模块包括第一场效应管，所述第一场效应管的栅极电性连接于所述晶体管的集电极，所述第一场效应管的漏极电性连接于所述电源转换模块的输出端。于本发明的一实施例中，所述电源保护模块包括第二场效应管，所述第二场效应管的源极电性连接于所述第一场效应管的源极，所述第二场效应管的栅极电性连接于所述晶体管的集电极，所述第二场效应管的漏极电性连接于电源输出端。本发明提供的一种存储装置的供电方法，其特征在于，所述方法包括：通过主处理器发送协议命令至存储器，且所述存储器中设置有工作条件寄存器；所述工作条件寄存器响应所述协调命令，并发送工作条件寄存器数据至所述主处理器；通过所述主处理器分析所述操作条件寄存器数据，获取所述存储器的电压操作范围；依据所述存储器的总线规格，对所述电压操作范围和所述总线规格进行匹配，并获取所述存储器的可操作的总线规格；以及通过电源模块提供多种电压电源，依据所述可操作的总线规格切换电压电源对所述存储器提供电源供电。于本发明的一实施例中，依据所述可操作的总线规格切换电压电源对所述存储器芯片提供电源供电还包括步骤：对所述电压电源和所述可操作的总线规格进行匹配，获取可操作的电压电源；依次选择所述可操作的电压电源，对所述存储器芯片提供电源供电。于本发明的一实施例中，对所述存储器提供电源供电后，还包括步骤：所述主处理器发送测试命令至所述存储器，所述存储器响应所述测试命令进行总线测试。于本发明的一实施例中，所述存储器响应所述测试命令进行总线测试的步骤包括：获取所述可操作电压电源支持的总线速度，判断所述存储器是否支持所述总线速度。于本发明的一实施例中，所述存储器芯片响应所述测试命令进行总线测试后，还包括步骤：若所述总线通过，则所述主处理器对所述存储器芯片进行读写操作；若所述总线测试不通过，则重新对所述电压操作范围和所述总线规格进行匹配。如上所述本发明提供的一种存储装置及其供电方法，通过设置电源模块，将输入电源模块的电压电源转换为多种电压电源，并通过主处理器控制电源保护模块输出电压电源至存储器。其中，根据主处理器获取的存储器的电压操作范围以及存储器的总线规格，匹配获取可操作的电压电源至存储器，并通过总线测试依次调试可操作的电压电源。同时，电源转换模块包括晶体管、第一场效应管和第二场效应管，通过晶体管、第一场效应管和第二场效应管的作用，防止输出的电压电源回流至其它电路。在本实施例中，可以提供多种电压电源，其电路设计简单，有效改善电源供应的问题。应当理解的是，以上的一般描述和后文的细节描述仅是示例性和解释性的，并不能限制本申请。附图说明此处的附图被并入说明书中并构成本说明书的一部分，示出了符合本申请的实施例，并与说明书一起用于解释本申请的原理。显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术者来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。在附图中：图1是本申请的一示例性实施例示出的存储装置框图；图2是本申请的一示例性实施例示出的存储装置的供电方法的流程图；图3是本申请的一示例性实施例示出的电源转换模块部分示意图；图4是本申请的一示例性实施例示出的电源转换模块部分示意图；图5是本申请的一示例性实施例示出的电源保护模块部分示意图；图6是本申请的一示例性实施例示出的电源保护模块部分示意图；图7是本申请的一示例性实施例示出的进行总线测试的流程图。具体实施方式以下将参照附图和优选实施例来说明本发明的实施方式，本领域技术人员可由本说明书中所揭露的内容轻易地了解本发明的其他优点与功效。本发明还可以通过另外不同的具体实施方式加以实施或应用，本说明书中的各项细节也可以基于不同观点与应用，在没有背离本发明的精神下进行各种修饰或改变。应当理解，优选实施例仅为了说明本发明，而不是为了限制本发明的保护范围。需要说明的是，以下实施例中所提供的图示仅以示意方式说明本发明的基本构想，遂图式中仅显示与本发明中有关的组件而非按照实际实施时的组件数目、形状及尺寸绘制，其实际实施时各组件的型态、数量及比例可为一种随意的改变，且其组件布局型态也可能更为复杂。在下文描述中，探讨了大量细节，以提供对本发明实施例的更透彻的解释，然而，对本领域技术人员来说，可以在没有这些具体细节的情况下实施本发明的实施例是显而易见的，在其他实施例中，以方框图的形式而不是以细节的形式来示出公知的结构和设备，以避免使本发明的实施例难以理解。图1是本申请的一示例性实施例示出的存储装置框图。如图1所示，主处理器10电性连接于存储器20，且主处理器10与存储器20之间通过多个接口信号连接，主处理器10发送命令至存储器20，存储器20响应命令，发送该命令对应的数据至主处理器10，以此实现数据互联。在本实施例中，主处理器10例如CPU，存储器20例如为EMMC，CPU和EMMC设备通过多条信号线连接，实现主机和设备之间的数据通信。其中，电源模块30电性连接于主处理器10，通过主处理器10控制电源模块30为存储器20提供多种电压电源。请参阅图1所示，在本发明一实施例中，存储器20包括控制器201和闪存存储器202。在本实施例中，闪存存储器202例如Nand Flash芯片，且所述闪存存储器202可使用一种或多种不同种类规格。控制器201与Nand Flash芯片电性连接实现数据交互，通过控制器201控制Nand Flash芯片。其中，控制器201包括OCR寄存器2011，通过OCR寄存器响应主处理器10发送的命令，使得主处理器10获取OCR寄存器的数据信息。电源模块30包括电源转换模块301和电源保护模块302，电源转换模块301电性连接于所述主处理器10，通过主处理器10控制电源转换模块301将输入的电压电源转换成电压值不同的多种电压电源输出，有效改善电源供应的问题。具体的，电源保护模块302的输入端电性连接于电源转换模块301输出的多种电压电源，输出端电性连接于存储器20，且电源保护模块302电性连接于主处理器10，通过主处理器10控制电源保护模块302输出电源电压至存储器20，同时电源保护模块302通过电路设计可以控制输入存储器20的电源电压回流至其它电源电路，对电路起到保护作用。图2是本申请的一示例性实施例示出的存储装置的供电方法的流程图。如图2所示，该方法可以应用于图1所示的存储装置框图。请参阅图2所示，在本发明一实施例中，存储装置的供电方法至少包括步骤S201至步骤S205，详细介绍如下：步骤S201，通过主处理器发送协调协议命令至存储器，且所述存储器包括工作条件寄存器。如图1所示，通过主处理器10发送协议命令至存储器20，存储器20响应协议命令发送有关存储器数据信息至主处理器10。其中，存储器20包括工作条件寄存器2011，即OCR寄存器。在OCR寄存器中，存放存储器设备的电压信息概况和访问模式，通过OCR寄存器响应协议命令，可以发送所述协议命令对应的寄存器数据至主处理器10。具体的，主要通过OCR寄存器匹配电压，帮助选择支持存储器20正常工作的电压。步骤S202，所述工作条件寄存器响应所述协调命令，并发送工作条件寄存器数据至所述主处理器。在本实施例中，协议命令例如CMD1。如图1所示，通过主处理器10的驱动层发送命令CMD1至存储器20，使得存储器20中的工作条件寄存器2011响应命令CMD1，并通过存储器20发送工作条件寄存器数据至主处理器10，即将OCR寄存器数据发送至至主处理器10。其中，所述工作条件寄存器数据包括存储器20的芯片容量和电压数据信息。步骤S203，通过所述主处理器分析所述操作条件寄存器数据，获取所述存储器的电压操作范围。通过发送协议命令，实现所述协议命令的发送方和接收方的数据交互。如图1所示，主处理器10发送协议命令至存储器20，使得工作条件寄存器2011响应协议命令并发送工作条件寄存器数据至所述主处理器10。主处理器10对所述工作条件寄存器数据进行分析，以此从工作条件寄存器2011包含的电压数据信息中获取存储器20的电压操作范围。步骤S204，依据所述存储器的总线规格，对所述电压操作范围和所述总线规格进行匹配，并获取所述存储器的可操作的总线规格。需要理解的是，如图1所示，所述存储器20，即EMMC，在出厂时定义了规格表格。其中，EMMC的规格表格内包括电压范围、总线宽度和总线速度等数据信息，且不同电压范围对应不同的总线宽度和总线速度，例如按照规格表格中，1.8V的电压理论上可以支持到HS400的速度。但在EMMC具体的使用中，实际要看EMMC颗粒对不同电压所支持的总线速度，在实际中EMMC颗粒在当前的电压中能支持到多高的总线速度，那么在最后读取的EMMC颗粒寄存器的值就有多大。在本实施例中，通过主处理器10发送协议命令获取存储器20的电压操作范围，将获取的电压操作范围和存储器20的总线规格进行匹配，确定存储器20的总线规格的电压值，将获取的电压操作范围匹配的所述电压值对应的规格设置为可操作的总线规格。步骤S205，通过电源模块提供多种电压电源，所述主处理器依据所述可操作的总线规格切换电压电源对所述存储器提供电源供电。如图1所示，通过主处理器10控制电源转换模块301将输入的电压转换为多种不同电压电源，并控制电源保护模块302将电压电源输入存储器20，且电源保护模块302通过电路设计可以防止输出的电压电源回流至其它电路。在本实施例中，电源转换模块包括多个降压转换器，通过降压转换器将输入的电压转换为多种不同电压电源。请参阅图3所示，在本发明一实施例中，电源转换模块包括降压转换器U3。在本实施例中，降压转换器U3设置例如为DC-DC转换器，型号例如为TLV62569，在其它实施例中，可以根据电路设计任意设置。电源转换模块还包括电容C25、电容C26、电容C27、上拉电阻R44、电阻R47、下拉电阻R49、电阻R50和电感L1。在本实施例中，电容C25采用电容量6.8pF、封装0603的电容，电容C26采用电容量10uF、封装0603的电容，电容C27采用电容量4.7uF、封装0603的电容，上拉电阻R44采用电阻值51K、封装0603的电阻，电阻R47采用电阻值200K、封装0603的电阻，下拉电阻R49采用电阻值100K、封装0603的电阻，电阻R50采用电阻值100K、封装0603的电阻，电感L1采用电感量2.2UF的电感，在其它实施例中，可以电路设计任意设置。具体的，降压转换器U3包括引脚1、引脚2、引脚3、引脚4和引脚5。其中，引脚1为降压转换器U3的使能端，所述使能端通过下拉电阻R49接地，通过上拉电阻R44电性连接于VBUS，即通过VBUS输入5V电压电源，且所述使能端通过引脚VCCQ_V18_EN电性连接于主处理器，以此控制降压转换器U3开关。引脚4为降压转换器U3的电源输入端，所述电源输入端电性连接于VBUS，即通过VBUS输入5V电压电源，且通过电容C27接地。引脚3为降压转换器U3的开关控制端，电感L1一端电性连接于所述开关控制端，另一端通过电阻R47和R50接地。引脚5为降压转换器U3的输出电压端，所述输出电压端电性连接于电容C25，且通过电阻R50电性连接于电容C26，以此输出1.8V电压至电源转换模块输出端EXT_V18。在本实施例中，通过电源转换模块的降压转换器U3，将输入的5V电压电源转换成1.8V电压电源。请参阅图4所示，在本发明一实施例中，电源转换模块包括降压转换器U4。在本实施例中，降压转换器U4设置例如为DC-DC转换器，型号例如为TLV62569，在其它实施例中，可以根据电路设计任意设置。电源转换模块还包括电容C29、电容C30、电容C31、上拉电阻R53、电阻R55、下拉电阻R56、电阻R57和电感L2。在本实施例中，电容C29采用电容量6.8pF、封装0603的电容，电容C30采用电容量10uF、封装0603的电容，电容C31采用电容量4.7uF、封装0603的电容，上拉电阻R53采用电阻值51K、封装0603的电阻，电阻R55采用电阻值200K、封装0603的电阻，下拉电阻R56采用电阻值100K、封装0603的电阻，电阻R57采用电阻值100K、封装0603的电阻，电感L2采用电感量2.2UF的电感，在其它实施例中，可以电路设计任意设置。具体的，降压转换器U4包括引脚1、引脚2、引脚3、引脚4和引脚5。其中，引脚1为降压转换器U4的使能端，所述使能端通过下拉电阻R56接地，通过上拉电阻R53电性连接于VBUS，即通过VBUS输入5V电压电源，且所述使能端通过引脚VCCQ_V33_EN电性连接于主处理器，以此控制降压转换器U4开关。引脚4为降压转换器U4的电源输入端，所述电源输入端电性连接于VBUS，即通过VBUS输入5V电压电源，且通过电容C31接地。引脚3为降压转换器U3的开关控制端，电感L2一端电性连接于所述开关控制端，另一端通过电阻R55和R57接地。引脚5为降压转换器U4的输出电压端，所述输出电压端电性连接于电容C29，且通过电阻R57电性连接于电容C30，以此输出3.3V电压至电源转换模块输出端EXT_V33。在本实施例中，通过电源转换模块的降压转换器U4，将输入的5V电压电源转换成3.3V电压电源。在本实施例中，电源模块还包括电源保护模块，转换后的多种电压电源通过电源保护模块对所述存储器提供电源供电。具体的，对转换后的多种电压电源和获取的可操作的总线规格进行匹配，获取可操作的电压电源，依次切换选择可操作的电压电源，以此对存储器提供电源供电。请参阅图5所示，在本发明一实施例中，电源保护模块包括晶体管Q3、第一场效应管Q1、第二场效应管Q2、电阻R45、电阻R51、电容C28。在本实施例中，晶体管Q3采用型号MMBT3904的P型晶体管，第一场效应管Q1采用型号FDN336P的P通道增强型场效应管，第二场效应管Q2采用型号FDN338P的P通道增强型场效应管，电阻R45采用电阻值47K、封装0603的电阻，电阻R51采用电阻值1K、封装0603的电阻，电容C28采用电容量0.1uF、封装0603的电容，在其它实施例中，可以根据电路设计任意设置。具体的，晶体管Q3的基极通过电阻R51电性连接于引脚VCCQ_V18_EN，发射极接地，集电极通过电阻R45电性连接于电源转换模块的输出端EXT_V18。第一场效应管Q1的栅极电性连接于晶体管Q3的集电极，漏极电性连接于电源转换模块的输出端EXT_V18，源极电性连接于第二场效应管Q2的源极。第二场效应管Q2的栅极电性连接于晶体管Q3的集电极，漏极端通过电容C28接地，且电性连接于存储器输入端电压输入端EXT_VCCQ。其中，通过引脚VCCQ_V18_EN对晶体管Q3施加偏压的正电流，使其集电极到发射极的电流流动，进而将第一场效应管Q1的栅极拉低至低电位，使得第一场效应管Q1的漏极和源极导通，因此将1.8V电压电源输出至存储器输入端电压输入端EXT_VCCQ。当要关闭1.8V电压电源输出时，将引脚VCCQ_V18_EN设置为低电位，此时晶体管Q3未施加偏压的正电流，使其集电极到发射极的电流不流动，进而将第一场效应管Q1和第二场效应管Q2的栅极恢复为高电位，使得第一场效应管Q1和第二场效应管Q2的漏极和源极不导通，因此1.8V电压电源不会输出至存储器输入端电压输入端EXT_VCCQ。请参阅图6所示，在本发明一实施例中，电源保护模块包括晶体管Q6、第一场效应管Q4、第二场效应管Q5、电阻R54、电阻R58、电容C32。在本实施例中，晶体管Q6采用型号MMBT3904的P型晶体管，第一场效应管Q4采用型号LS3407PG的P通道增强型场效应管，第二场效应管Q5采用型号LS3407PG的P通道增强型场效应管，电阻R54采用电阻值47K、封装0603的电阻，电阻R58采用电阻值1K、封装0603的电阻，电容C32采用电容量0.1uF、封装0603的电容，在其它实施例中，可以根据电路设计任意设置。具体的，晶体管Q6的基极通过电阻R58电性连接于引脚VCCQ_V33_EN，发射极接地，集电极通过电阻R54电性连接于电源转换模块的输出端EXT_V33。第一场效应管Q4的栅极电性连接于晶体管Q5的集电极，漏极电性连接于电源转换模块的输出端EXT_V33，源极电性连接于第二场效应管Q5的源极。第二场效应管Q5的栅极电性连接于晶体管Q6的集电极，漏极端通过电容C32接地，且电性连接于存储器输入端电压输入端EXT_VCCQ。其中，通过引脚VCCQ_V33_EN对晶体管Q6施加偏压的正电流，使其集电极到发射极的电流流动，进而将第一场效应管Q4的栅极拉低至低电位，使得第一场效应管Q4的漏极和源极导通，因此将3.3V电压电源输出至存储器输入端电压输入端EXT_VCCQ。当要关闭3.3V电压电源输出时，将引脚VCCQ_V33_EN设置为低电位，此时晶体管Q6未施加偏压的正电流，使其集电极到发射极的电流不流动，进而将第一场效应管Q4和第二场效应管Q5的栅极恢复为高电位，使得第一场效应管Q4和第二场效应管Q5的漏极和源极不导通，因此3.3V电压电源不会输出至存储器输入端电压输入端EXT_VCCQ。在本实施例中，电源保护模块可以起到保护电路的作用，防止输出的电压电源回流。具体的，当第二场效应管Q2的栅极设置为高电位，其漏极和源极不导通，此时如同形成一个反向二极管，可有效防止输出至存储器输入端电压输入端EXT_VCCQ的电压电源反灌回电源转换模块的输出端EXT_V18。同时，当场效应管Q6的栅极设置为高电位，其漏极和源极不导通，此时如同形成一个反向二极管，可有效防止输出至存储器输入端电压输入端EXT_VCCQ的电压电源反灌回电源转换模块的输出端EXT_V33，进而起到保护电路的作用。请参阅图7所示，在本发明一实施例中，对所述存储器提供电源供电后，还包括步骤S401至步骤S403，详细介绍如下：步骤S401，所述主处理器发送测试命令至所述存储器，所述存储器响应所述测试命令进行总线测试。在本实施例中，如图1所示，主处理器10的驱动层发送测试命令至存储器20。其中，测试命令例如CMD19和CMD14。当存储器20接收到测试命令，则响应所述测试命令进行总线测试。步骤S402，确认所述总线测试是否通过。在进行总线测试时，获取切换进行供电的电压电源支持的总线速度，判断存储器是否支持所述总线速度，从而判断总线测试是否通过。其中，若总线测试通过，则跳转步骤S403，所述主处理器对所述存储器进行正常操作，即主处理器对存储器进行读写操作；若总线测试不通过，则跳转S204，即重新对电压操作范围和总线规格进行匹配，获取下一组可操作的总线规格，主处理器依据重新获取的可操作的总线规格切换电压电源对存储器提供电源供电。综上所述，通过主处理器10发送协议命令获取存储器20的电压操作范围，并根据所述电压操作范围以及存储器的总线规格进行匹配，获取存储器20的可操作的总线规格，主处理器10依据所述可操作的总线规格切换电压电源对存储器20提供电源供电。其中，通过电源模块30可以提供多种电压电源进行切换，且电路设计简单，并有效的改善电源供应的问题。具体的，电压转换模块301将输入的5V电压转换为1.8V和3.3V电压，并通过电压保护模块302将转换后的电压电源输入存储器20，且电源保护模块设置晶体管和场效应管，以此防止输出的电压电源倒灌，回流至其它电路，从而实现了保护电路的作用。附图中的流程图和框图，图示了按照本申请各种实施例的系统、方法和计算机程序产品的可能实现的体系架构、功能和操作。其中，流程图或框图中的每个方框可以代表一个模块、程序段、或代码的一部分，上述模块、程序段、或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个接连地表示的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图或流程图中的每个方框、以及框图或流程图中的方框的组合，可以用执行规定的功能或操作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。描述于本申请实施例中所涉及到的单元可以通过软件的方式实现，也可以通过硬件的方式来实现，所描述的单元也可以设置在处理器中。其中，这些单元的名称在某种情况下并不构成对该单元本身的限定。上述实施例仅示例性说明本发明的原理及其功效，而非用于限制本发明。任何熟悉此技术的人士皆可在不违背本发明的精神及范畴下，对上述实施例进行修饰或改变。因此，但凡所属技术领域中具有通常知识者在未脱离本发明所揭示的精神与技术思想下所完成的一切等效修饰或改变，仍应由本发明的权利要求所涵盖。
