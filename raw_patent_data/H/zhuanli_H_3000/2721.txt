标题title
一种软件版本升级方法及装置
摘要abst
本申请提供一种软件版本升级方法及装置，涉及软件版本升级领域，可以用于金融领域，所述方法包括：根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级；其中，软件版本升级期间的业务由第二服务器集群运行旧软件版本进行处理；根据各所述第一服务器集群运行对应的新软件版本处理软件版本升级后的业务时的效能参数确定最优软件版本；所述最优软件版本为所述新软件版本之一；将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级。本申请能够在当前业务处理不中断的前提下，选取最优软件版本对服务器集群进行软件版本升级。
权利要求书clms
1.一种软件版本升级方法，其特征在于，包括：根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级；其中，软件版本升级期间的业务由第二服务器集群运行旧软件版本进行处理；根据各所述第一服务器集群运行对应的新软件版本处理软件版本升级后的业务时的效能参数确定最优软件版本；所述最优软件版本为所述新软件版本之一；将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级。2.根据权利要求1所述的软件版本升级方法，其特征在于，在根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级之前，还包括：关断所述第一服务器集群的业务流量入口；检测所述第一服务器集群中是否有正在处理中的业务；其中，若无，则根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群。3.根据权利要求1所述的软件版本升级方法，其特征在于，所述根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级，包括：根据所述新软件版本对应的业务处理模式确定该新软件版本所应部署的第一服务器集群；将该新软件版本对应的软件版本升级参数下发至该第一服务器集群，以使该第一服务器集群根据该软件版本升级参数进行软件版本升级。4.根据权利要求1所述的软件版本升级方法，其特征在于，在所述第二服务器集群运行旧软件版本处理所述软件版本升级期间的业务之前，还包括：关断所述第一服务器集群的业务流量入口；变更路由配置信息，以使所述软件版本升级期间的业务对应的业务流全部流入所述第二服务器集群。5.根据权利要求1所述的软件版本升级方法，其特征在于，所述根据各所述第一服务器集群运行对应的新软件版本处理软件版本升级后的业务时的效能参数确定最优软件版本，包括：根据预设的业务流量牵引策略牵引软件版本升级后的业务对应的业务流至各所述第一服务器集群，以使各所述第一服务器集群运行对应的新软件版本处理所述软件版本升级后的业务；根据各所述第一服务器集群的业务流分配量及业务交易量确定各所述第一服务器集群对应的效能参数；比较各所述第一服务器集群对应的效能参数，将所述效能参数中最大者对应的新软件版本确定为所述最优软件版本。6.根据权利要求5所述的软件版本升级方法，其特征在于，所述根据各所述第一服务器集群的业务流分配量及业务交易量确定各所述第一服务器集群对应的效能参数，包括：将所述业务交易量除以所述业务流量分配量得到所述效能参数。7.根据权利要求1所述的软件版本升级方法，其特征在于，在将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级之前，还包括：关断所述第二服务器集群的业务流量入口；检测所述第二服务器集群中是否有正在处理中的业务；其中，若无，则将所述最优软件版本部署至所述第二服务器集群。8.根据权利要求1所述的软件版本升级方法，其特征在于，所述将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级，包括：将所述最优软件版本对应的软件版本升级参数下发至所述第二服务器集群，以使所述第二服务器集群根据该软件版本升级参数进行软件版本升级。9.根据权利要求1所述的软件版本升级方法，其特征在于，还包括：将所述最优软件版本部署至未运行所述最优软件版本的第一服务器集群，以使该第一服务器集群进行软件版本升级。10.一种软件版本升级装置，其特征在于，包括：第一部署单元，用于根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级；其中，软件版本升级期间的业务由第二服务器集群运行旧软件版本进行处理；最优版本确定单元，用于根据各所述第一服务器集群运行对应的新软件版本处理软件版本升级后的业务时的效能参数确定最优软件版本；所述最优软件版本为所述新软件版本之一；第二部署单元，用于将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级。11.根据权利要求10所述的软件版本升级装置，其特征在于，还包括：第一关断单元，用于关断所述第一服务器集群的业务流量入口；第一业务检测单元，用于检测所述第一服务器集群中是否有正在处理中的业务；其中，若无，则根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群。12.根据权利要求10所述的软件版本升级装置，其特征在于，所述第一部署单元，包括：版本部署确定模块，用于根据所述新软件版本对应的业务处理模式确定该新软件版本所应部署的第一服务器集群；升级参数下发模块，用于将该新软件版本对应的软件版本升级参数下发至该第一服务器集群，以使该第一服务器集群根据该软件版本升级参数进行软件版本升级。13.根据权利要求10所述的软件版本升级装置，其特征在于，还包括：第一关断单元，用于关断所述第一服务器集群的业务流量入口；路由信息变更单元，用于变更路由配置信息，以使所述软件版本升级期间的业务对应的业务流全部流入所述第二服务器集群。14.根据权利要求10所述的软件版本升级装置，其特征在于，所述最优版本确定单元，包括：流量牵引模块，用于根据预设的业务流量牵引策略牵引软件版本升级后的业务对应的业务流至各所述第一服务器集群，以使各所述第一服务器集群运行对应的新软件版本处理所述软件版本升级后的业务；效能参数确定模块，用于根据各所述第一服务器集群的业务流分配量及业务交易量确定各所述第一服务器集群对应的效能参数；效能参数比较模块，用于比较各所述第一服务器集群对应的效能参数，将所述效能参数中最大者对应的新软件版本确定为所述最优软件版本。15.根据权利要求14所述的软件版本升级装置，其特征在于，所述效能参数确定模块，具体用于将所述业务交易量除以所述业务流量分配量得到所述效能参数。16.根据权利要求10所述的软件版本升级装置，其特征在于，还包括：第二关断单元，用于关断所述第二服务器集群的业务流量入口；第二业务检测单元，用于检测所述第二服务器集群中是否有正在处理中的业务；其中，若无，则将所述最优软件版本部署至所述第二服务器集群。17.根据权利要求10所述的软件版本升级装置，其特征在于，所述第二部署单元，具体用于将所述最优软件版本对应的软件版本升级参数下发至所述第二服务器集群，以使所述第二服务器集群根据该软件版本升级参数进行软件版本升级。18.根据权利要求10所述的软件版本升级装置，其特征在于，还包括：第三部署单元，用于将所述最优软件版本部署至未运行所述最优软件版本的第一服务器集群，以使该第一服务器集群进行软件版本升级。19.一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现权利要求1至9任一项所述的软件版本升级方法的步骤。20.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，该计算机程序被处理器执行时实现权利要求1至9任一项所述的软件版本升级方法的步骤。21.一种计算机程序产品，包括计算机程序/指令，其特征在于，该计算机程序/指令被处理器执行时实现权利要求1至9任一项所述的软件版本升级方法的步骤。
说明书desc
技术领域本申请涉及软件版本升级领域，可以用于金融领域，具体是一种软件版本升级方法及装置。背景技术随着计算机技术及互联网技术在金融领域的发展与应用，越来越多的金融业务系统服务器面临从旧软件版本到新软件版本的升级。通常，由于新软件版本的种类多，更迭速度快，金融机构在将新软件版本投产前，难以预料其使用效果。在此背景下，金融业务系统服务器的软件版本升级过程至少需要考虑以下两点：第一，由于部分金融业务需要向客户提供7×24小时的不间断服务，如果在软件版本升级过程中，为了完成升级而将服务器关停，则会影响正常的业务办理，给客户带来不便，还可能给金融机构带来损失。第二，由于新软件版本的使用效果在经过市场检验前并不明朗，如果贸然用新软件版本代替旧软件版本，将新软件版本在所有服务器上进行部署，则一旦发现新软件版本存在问题或不如旧软件版本使用效果好，进行版本回退将浪费大量的人力物力。发明内容针对现有技术中的问题，本申请提供一种软件版本升级方法及装置，能够在当前业务处理不中断的前提下，选取最优软件版本对服务器集群进行软件版本升级。为解决上述技术问题，本申请提供以下技术方案：第一方面，本申请提供一种软件版本升级方法，包括：根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级；其中，软件版本升级期间的业务由第二服务器集群运行旧软件版本进行处理；根据各所述第一服务器集群运行对应的新软件版本处理软件版本升级后的业务时的效能参数确定最优软件版本；所述最优软件版本为所述新软件版本之一；将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级。进一步地，在根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级之前，还包括：关断所述第一服务器集群的业务流量入口；检测所述第一服务器集群中是否有正在处理中的业务；其中，若无，则根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群。进一步地，所述根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级，包括：根据所述新软件版本对应的业务处理模式确定该新软件版本所应部署的第一服务器集群；将该新软件版本对应的软件版本升级参数下发至该第一服务器集群，以使该第一服务器集群根据该软件版本升级参数进行软件版本升级。进一步地，在所述第二服务器集群运行旧软件版本处理所述软件版本升级期间的业务之前，还包括：关断所述第一服务器集群的业务流量入口；变更路由配置信息，以使所述软件版本升级期间的业务对应的业务流全部流入所述第二服务器集群。进一步地，所述根据各所述第一服务器集群运行对应的新软件版本处理软件版本升级后的业务时的效能参数确定最优软件版本，包括：根据预设的业务流量牵引策略牵引软件版本升级后的业务对应的业务流至各所述第一服务器集群，以使各所述第一服务器集群运行对应的新软件版本处理所述软件版本升级后的业务；根据各所述第一服务器集群的业务流分配量及业务交易量确定各所述第一服务器集群对应的效能参数；比较各所述第一服务器集群对应的效能参数，将所述效能参数中最大者对应的新软件版本确定为所述最优软件版本。进一步地，所述根据各所述第一服务器集群的业务流分配量及业务交易量确定各所述第一服务器集群对应的效能参数，包括：将所述业务交易量除以所述业务流量分配量得到所述效能参数。进一步地，在将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级之前，还包括：关断所述第二服务器集群的业务流量入口；检测所述第二服务器集群中是否有正在处理中的业务；其中，若无，则将所述最优软件版本部署至所述第二服务器集群。进一步地，所述将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级，包括：将所述最优软件版本对应的软件版本升级参数下发至所述第二服务器集群，以使所述第二服务器集群根据该软件版本升级参数进行软件版本升级。进一步地，所述的软件版本升级方法，还包括：将所述最优软件版本部署至未运行所述最优软件版本的第一服务器集群，以使该第一服务器集群进行软件版本升级。第二方面，本申请提供一种软件版本升级装置，包括：第一部署单元，用于根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级；其中，软件版本升级期间的业务由第二服务器集群运行旧软件版本进行处理；最优版本确定单元，用于根据各所述第一服务器集群运行对应的新软件版本处理软件版本升级后的业务时的效能参数确定最优软件版本；所述最优软件版本为所述新软件版本之一；第二部署单元，用于将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级。进一步地，所述的软件版本升级装置，还包括：第一关断单元，用于关断所述第一服务器集群的业务流量入口；第一业务检测单元，用于检测所述第一服务器集群中是否有正在处理中的业务；其中，若无，则根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群。进一步地，所述第一部署单元，包括：版本部署确定模块，用于根据所述新软件版本对应的业务处理模式确定该新软件版本所应部署的第一服务器集群；升级参数下发模块，用于将该新软件版本对应的软件版本升级参数下发至该第一服务器集群，以使该第一服务器集群根据该软件版本升级参数进行软件版本升级。进一步地，所述的软件版本升级装置，还包括：第一关断单元，用于关断所述第一服务器集群的业务流量入口；路由信息变更单元，用于变更路由配置信息，以使所述软件版本升级期间的业务对应的业务流全部流入所述第二服务器集群。进一步地，所述最优版本确定单元，包括：流量牵引模块，用于根据预设的业务流量牵引策略牵引软件版本升级后的业务对应的业务流至各所述第一服务器集群，以使各所述第一服务器集群运行对应的新软件版本处理所述软件版本升级后的业务；效能参数确定模块，用于根据各所述第一服务器集群的业务流分配量及业务交易量确定各所述第一服务器集群对应的效能参数；效能参数比较模块，用于比较各所述第一服务器集群对应的效能参数，将所述效能参数中最大者对应的新软件版本确定为所述最优软件版本。进一步地，所述效能参数确定模块，具体用于将所述业务交易量除以所述业务流量分配量得到所述效能参数。进一步地，所述的软件版本升级装置，还包括：第二关断单元，用于关断所述第二服务器集群的业务流量入口；第二业务检测单元，用于检测所述第二服务器集群中是否有正在处理中的业务；其中，若无，则将所述最优软件版本部署至所述第二服务器集群。进一步地，所述第二部署单元，具体用于将所述最优软件版本对应的软件版本升级参数下发至所述第二服务器集群，以使所述第二服务器集群根据该软件版本升级参数进行软件版本升级。进一步地，所述的软件版本升级装置，还包括：第三部署单元，用于将所述最优软件版本部署至未运行所述最优软件版本的第一服务器集群，以使该第一服务器集群进行软件版本升级。第三方面，本申请提供一种电子设备包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现所述软件版本升级方法的步骤。第四方面，本申请提供一种计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现所述软件版本升级方法的步骤。第五方面，本申请提供一种计算机程序产品，包括计算机程序/指令，该计算机程序/指令被处理器执行时实现所述软件版本升级方法的步骤。针对现有技术中的问题，本申请提供的软件版本升级方法及装置，能够在当前业务处理不中断的前提下，选取最优软件版本对服务器集群进行软件版本升级；既保证了业务流量不丢失，又保证了业务服务的稳定性，在客户无感的情况下完成服务器集群的软件版本升级，极大地提升了软件版本升级过程中的客户体验度及系统健壮性；同时能够支持业务流量的可视、可管、可控，支持业务流量分割、服务对比部署，从而将最优软件版本部署于服务器集群。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例中软件版本升级方法的流程图之一；图2为本申请实施例中软件版本升级方法的流程图之二；图3为本申请实施例中第一服务器集群版本部署的流程图；图4为本申请实施例中软件版本升级方法的流程图之三；图5为本申请实施例中确定最优软件版本的流程图；图6为本申请实施例中软件版本升级方法的流程图之四；图7为本申请实施例中软件版本升级装置的结构图之一；图8为本申请实施例中软件版本升级装置的结构图之二；图9为本申请实施例中第一升级单元的结构图；图10为本申请实施例中软件版本升级装置的结构图之三；图11为本申请实施例中最优版本确定单元的结构图；图12为本申请实施例中软件版本升级装置的结构图之四；图13为本申请实施例中的电子设备的结构示意图；图14为本申请实施例中应用场景示意图；图15为本申请实施例中升级控制过程示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。需要说明的是，本申请提供的软件版本升级方法及装置，可用于金融领域，也可用于除金融领域之外的任意领域，本申请提供的软件版本升级方法及装置的应用领域不做限定。一实施例中，参见图1，为了能够在当前业务处理不中断的前提下，选取最优软件版本对服务器集群进行软件版本升级，本申请提供一种软件版本升级方法，包括：S101：根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级；其中，第一服务器集群进行软件版本升级期间的业务由第二服务器集群运行旧软件版本进行处理；S102：根据各所述第一服务器集群运行对应的新软件版本处理软件版本升级后的业务时的效能参数确定最优软件版本；所述最优软件版本为所述新软件版本之一；其中，软件版本升级后的业务是指在第一服务器集群完成软件版本升级以后，客户发送业务处理请求至银行，这些业务处理请求所对应的业务。S103：将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级。可以理解的是，参见图14，本申请实施例的应用场景如下：以银行为代表的金融机构，在为向客户提供金融业务服务时，一般会部署多个金融业务服务器组成服务器集群。例如，图14中的第一服务器集群200与第二服务器集群300均可以向客户提供金融业务服务，即处理金融业务。一般地，第一服务器集群200与第二服务器集群300均可受中央控制服务器100的控制有序地完成金融业务处理。在本申请实施例中，中央调度服务器100还能够控制第一服务器集群200与第二服务器集群300有序地完成软件版本升级。其中，软件是指运行于服务器集群上，用于处理金融业务的程序。具体地，随着计算机技术及互联网技术在金融领域的发展与应用，这些金融业务服务器可能面临着软件版本的升级。然而，考虑到部分金融业务需要向客户提供7×24小时的不间断服务，如果在软件版本升级的过程中，为了完成升级而将服务器关停，则会影响正常的业务办理，给客户带来不便，还可能给金融机构带来损失。为了能够在当前业务处理不中断的前提下，保证业务服务的稳定性，本申请实施例设置了一台中央控制服务器100，用于利用本申请提供的方法，控制金融业务服务器完成软件版本升级。处理原则是，先让部分金融业务服务器进行软件版本升级，再让另一部分金融业务服务器进行软件版本升级，具体的实现方法详见下文阐述。需要说明的是，考虑到软件版本升级后，新软件版本的使用效果在经过市场检验前并不明朗，如果贸然用新软件版本代替旧软件版本，将新软件版本在所有服务器上进行部署，则一旦发现新软件版本存在问题或不如旧软件版本使用效果好，进行版本回退将浪费大量的人力物力。因此，本申请实施例中的中央控制服务器还用于按照预设的新软件版本部署策略，先在部分金融业务服务器上进行软件版本升级，经过本申请提供的算法选出最优软件版本之后，再在其他金融业务服务器上部署；其中，最优软件版本为新软件版本之一。由此描述可知，最终通过该中央控制服务器控制完成软件版本升级的金融业务服务器均能被部署上最优软件版本。通过上述方法能够实现在当前业务处理不中断的前提下，选取最优软件版本对服务器集群进行软件版本升级。从上述描述可知，本申请提供的软件版本升级方法，能够在当前业务处理不中断的前提下，选取最优软件版本对服务器集群进行软件版本升级；既保证了业务流量不丢失，又保证了业务服务的稳定性，在客户无感的情况下完成服务器集群的软件版本升级，极大地提升了软件版本升级过程中的客户体验度及系统健壮性；同时能够支持业务流量的可视、可管、可控，支持业务流量分割、服务对比部署，从而将最优软件版本部署于服务器集群。一实施例中，参见图2，在根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级之前，还包括：S201：关断所述第一服务器集群的业务流量入口；S202：检测所述第一服务器集群中是否有正在处理中的业务；其中，若无，则根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群。可以理解的是，在实际业务处理中，待升级的金融业务服务器可能当前还在处理业务。为了保障业务流量无损，即不影响当前业务的处理，本申请实施例中的中央控制服务器可以首先通过变更路由配置的方式关断第一服务器集群的业务流量入口，使其当前不再接收新的业务流量，而仅处理已在服务器中的业务流量。待到“正在处理中的”业务流量处理完毕，中央控制服务器可以检测到第一服务器集群中已无正在处理的业务流量，方可进行软件版本升级。换而言之，在本申请实施例中，只有服务器中已无正在处理的业务流量时，方可进行软件版本升级。需要说明的是，第一服务器集群中可能包括多个金融业务服务器。中央控制服务器可以等多个金融业务服务器均处理完“正在处理的业务流量”后进行新软件版本部署，也可以对各金融业务服务器在时序上分开进行新软件版本部署。从上述描述可知，本申请提供的软件版本升级方法，能够在第一服务器集群进行软件版本升级之前，先检测第一服务器集群中是否有正在处理中的业务。一实施例中，参见图3，所述根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级，包括：S301：根据所述新软件版本对应的业务处理模式确定该新软件版本所应部署的第一服务器集群；S302：将该新软件版本对应的软件版本升级参数下发至该第一服务器集群，以使该第一服务器集群根据该软件版本升级参数进行软件版本升级。可以理解的是，前文已经阐述，本申请实施例中的中央控制服务器可以按照预设的新软件版本部署策略，先在部分金融业务服务器上进行软件版本升级，经过本申请提供的算法选出最优软件版本之后，再在其他金融业务服务器上部署。根据上文描述，本申请实施例中的新软件版本可能存在多个，那么具体是将哪些新软件版本部署到哪个第一服务器集群，或者说是将哪些新软件版本部署到哪个金融业务服务器上，需要根据新软件版本部署策略而定。具体地，新软件版本部署策略可以包括新软件版本对应的业务处理模式；例如，将业务处理模式为“在首页以静态大字方式展示理财产品”的新软件版本A部署在第一服务器集群A上；将业务处理模式为“在第二页以动态浮动方式展示理财产品”的新软件版本B部署在第一服务器集群B上。新软件版本部署策略还可以包括：将业务处理模式为“将某些理财产品展现在一级页面上”的新软件版本A部署在第一服务器集群A上；将业务处理模式为“将某些理财产品展现在二级页面上”的新软件版本B部署在第一服务器集群B上。新软件版本部署策略可以根据实际需要进行设定。确定了该将各新软件版本部署在哪个第一服务器集群上后，可以将该新软件版本对应的软件版本升级参数下发至该第一服务器集群，以使该第一服务器集群根据该软件版本升级参数进行软件版本升级。其中，软件版本升级参数可以包括：软件安装包的路径、文件名、版本号及操作系统类型等。第一服务器集群在其本地进行软件版本升级的具体步骤可以参见现有技术，本申请不对如何在本地进行软件版本升级进行限定，具体可以根据实际需要实施。需要说明的是，上述新软件版本部署策略仅为举例说明，实际上，新软件版本部署策略可以根据业务需要进行灵活设定，本申请不以此为限。从上述描述可知，本申请提供的软件版本升级方法，能够根据预设的新软件版本部署策略将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级。一实施例中，参见图4，在所述第二服务器集群运行旧软件版本处理所述软件版本升级期间的业务之前，还包括：S401：关断所述第一服务器集群的业务流量入口；S402：变更路由配置信息，以使所述软件版本升级期间的业务对应的业务流全部流入所述第二服务器集群。可以理解的是，根据前文阐述，为了对第一服务器集群进行软件版本升级，需要先使其内部不再存在“正在处理中的”业务流量，即需要关断第一服务器集群的业务流量入口，使后续流入金融机构的业务流量全部加载至第二服务器集群处理。需要说明的是，此时，第二服务器集群运行的是旧软件版本。旧软件版本可以正常处理业务流量，从而对客户而言，软件版本升级并未对其办理金融业务造成影响，客户是无感的，业务流量是无损的。具体地，进行流量重新分配的步骤可以参见图15所示。第一步：利用流量控制器进行路由配置；第二步：向待升级的服务器集群部署发布新软件版本，即发布升级服务；第三步：由待升级的服务器集群向流量控制器上报升级已经就绪；第四步：由流量控制器向代理网关上报流量分配策略；第五步：代理网关进行路由切换；第六步：旧软件版本所在的服务器集群检测进程内是否有处理中的交易，等待交易执行结束；第七步：待交易全部执行结束后，旧软件版本所在的服务器集群向流量控制器上报自身状态，即交易已全部执行结束。从上述描述可知，本申请提供的软件版本升级方法，能够变更路由配置信息，以使所述当前业务对应的业务流全部流入所述第二服务器集群。一实施例中，参见图5，所述根据各所述第一服务器集群运行对应的新软件版本处理软件版本升级后的业务时的效能参数确定最优软件版本，包括：S501：根据预设的业务流量牵引策略牵引软件版本升级后的业务对应的业务流至各所述第一服务器集群，以使各所述第一服务器集群运行对应的新软件版本处理所述软件版本升级后的业务；可以理解的是，所谓“新增业务流量”是指第一服务器集群已经完成软件版本升级后，接收的业务流量。各第一服务器集群均被部署了不同的新软件版本。令各第一服务器集群根据预设的业务流量牵引策略，接收“新增业务流量”，可以根据各第一服务器集群对“新增业务流量”的处理效果，筛选出“最优软件版本”。举例而言，预设的业务流量牵引策略可以包括但不限于：根据客户的账户卡号尾号进行随机划分，按照年龄群组进行划分等。确定了划分方式后，可以将对应的业务流量进行牵引，即将对应的业务流量分配至对应的第一服务器集群，具体的牵引方式可以是通过变更路由配置的方式实现。需要说明的是，在业务流量牵引过程中，对外可以暴露web服务接口。web服务接口即为对外暴露的应用接口，可以被第三方系统直接访问，起到一个桥的作用，最终将接入流量路由到下游service服务中进行处理，该层可以通过动态配置对外部客户流量进行流量分割与牵引，以便于后续实现业务灰度对比。其中，service服务即系统内部服务，提供接口给web服务接口进行调用。service服务服务往往由多个同类型服务构成，每个service服务负责自己业务领域的业务逻辑处理，多个service服务串联起来可以处理一笔完整的交易流量。另外，web服务可以采用“代理网关”负责流量的无损控制；service服务可以采用自定义“流量控制器”来完成流量无损控制。参见前述关于图15的描述，在本申请实施例中，流量控制器可以进行路由配置，可以进行流量分配策略配置，还可以监测各服务器集群的实际流量；此外，流量控制器可以将预先配置的流量分配策略发布至代理网关，以使代理网关真正去执行流量下发。另外，本申请提供的方法不仅能够实现对web服务的流量分配，对于各service服务，本申请提供的方法也能实现对其的流量分配。具体地，服务每次都带版本号发布，每个服务保留路由配置。服务与服务间保持路由信息的传递能力。软件升级成功后，可以告知上游服务当前的服务使用新软件版本，上游服务切换路由，将新增业务流量全部发送到运行有新软件版本的服务，同时通过服务的自我保护机制保证旧软件版本上正在执行的业务流量能够继续执行，直到该业务流量对应的交易结束。可以理解，流量控制器可以部署于本申请实施例中的中央控制器上。流量控制器既是全局流量接入的总控，也是全局流量分布的观测室；通过它，可以观测到每个服务当前的流量接入情况，流量被降到零时，可以安全进行软件版本升级。S502：根据各所述第一服务器集群的业务流分配量及业务交易量确定各所述第一服务器集群对应的效能参数；可以理解，此步骤即为业务灰度对比过程。举例而言，新软件版本有两个，A与B，分别部署至第一服务器集群A及第一服务器集群B。目前，将新增业务流量按照业务交易账户尾号的单双号，指定分配至第一服务器集群A与第一服务器集群B。在实际的业务处理过程中，假设第一服务器集群A的客户交易成功率在80％，而第一服务器集群B的客户交易成功率仅在30％，可以得出结论，第一服务器集群A对应的效能参数高于第一服务器集群B对应的效能参数。所谓效能参数可以是百分比，也可以是其他与百分比存在映射关系的数值，本申请不以此为限。S503：比较各所述第一服务器集群对应的效能参数，将所述效能参数中最大者对应的新软件版本确定为所述最优软件版本。可以理解，比较各所述第一服务器集群对应的效能参数，可以确定出哪个新软件版本为最优软件版本。从上述描述可知，本申请提供的软件版本升级方法，能够根据各所述第一服务器集群运行对应的新软件版本处理业务时的效能参数确定最优软件版本。一实施例中，所述根据各所述第一服务器集群的业务流量分配量及业务交易量确定各所述第一服务器集群对应的效能参数，包括：将所述业务交易量除以所述业务流量分配量得到所述效能参数。可以理解的是，业务交易量可以包括但不限于客户点击量、交易金额及交易量等。再结合其所分配到的业务流量，就能够得出相对于这个业务流量而言，其业务交易量是高还是低，从而体现出对应软件版本的效能。一实施例中，参见图6，在将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级之前，还包括：S601：关断所述第二服务器集群的业务流量入口；S602：检测所述第二服务器集群中是否有正在处理中的业务；其中，若无，则将所述最优软件版本部署至所述第二服务器集群。可以理解的是，与前述实施例相似，对第二服务器集群进行软件版本升级前，也需要检测第二服务器集群中是否有正在处理中的业务。具体的处理方式与步骤S201至S202相同，在此不再赘述。从上述描述可知，本申请提供的软件版本升级方法，能够检测第二服务器集群中是否有正在处理中的业务。一实施例中，所述将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级，包括：将所述最优软件版本对应的软件版本升级参数下发至所述第二服务器集群，以使所述第二服务器集群根据该软件版本升级参数进行软件版本升级。可以理解的是，在确定了最优软件版本后，可以将该最优软件版本对应的软件版本升级参数下发至该第二服务器集群，以使该第二服务器集群根据该软件版本升级参数进行软件版本升级。其中，软件版本升级参数可以包括：软件安装包的路径、文件名、版本号及操作系统类型等。第二服务器集群在其本地进行软件版本升级的具体步骤可以参见现有技术，本申请不对如何在本地进行软件版本升级进行限定，具体可以根据实际需要实施。从上述描述可知，本申请提供的软件版本升级方法，能够根据将最优软件版本对应的软件版本升级参数下发至第二服务器集群，以使第二服务器集群根据该软件版本升级参数进行软件版本升级。一实施例中，所述的软件版本升级方法，还包括：将所述最优软件版本部署至未运行所述最优软件版本的第一服务器集群，以使该第一服务器集群进行软件版本升级。可以理解的是，由于并非所有第一服务器集群，在确定哪个新软件版本为最优软件版本的过程中，都被部署上了最优软件版本，因此，当确定了最优软件版本后，需要对未运行最优软件版本的第一服务器集群进行软件版本升级。具体的软件版本升级方法参见前文阐述，本申请不对其进行具体限定。从上述描述可知，本申请提供的软件版本升级方法，能够将所述最优软件版本部署至未运行所述最优软件版本的第一服务器集群，以使该第一服务器集群进行软件版本升级。一实施例中，为了完成流量无损情况下的软件版本升级，具体可以按照如下步骤实现：第1步，进行路由预配置，实际并没生效；第2步，部署发布新服务版本；第3步，第2步成功则上报服务已就绪可以接入交易流量；第4步，第3步成功，生效路由配置并下发路由配置；第5步，第4步成功，切换路由，将所有交易流量切换给已升级服务第6步，第5步成功，旧版本服务检测进程内是否有处理中的交易，等待交易执行结束。第7步，第6步成功，上报当前服务升级结束，可以下线旧版本服务。第3步失败则继续上报，直到成功；第4步失败则继续下发，如果仍然失败，则提供补偿机制，即上游服务主动获取路由信息。第7步成功则完成流量无损升级。综上所述，本申请提供的软件版本升级方法，至少具有如下有益效果：1、通过开关控制业务流量的路由方向，既保证流量不丢失，又保证服务的稳定性，即在客户无感的情况下完成了软件版本升级，极大地提升了软件版本升级过程中，客户的使用体验及系统的健壮性。2、此业务流量无损方案对业务层面而言是透明的，即对业务无侵入。3、业务流量无损能够实现配置化、标准化，支持对接主流监控系统，实现流量信息的可视、可管、可控。4、支持同类业务的不同实现方式对应的新软件版本在生产线上作业务流量分割、服务对比部署，从而得到最优软件版本，用于后续软件版本升级。基于同一发明构思，本申请实施例还提供了一种软件版本升级装置，可以用于实现上述实施例所描述的方法，如下面的实施例所述。由于软件版本升级装置解决问题的原理与软件版本升级方法相似，因此软件版本升级装置的实施可以参见基于软件性能基准确定方法的实施，重复之处不再赘述。以下所使用的，术语“单元”或者“模块”可以实现预定功能的软件和/或硬件的组合。尽管以下实施例所描述的系统较佳地以软件来实现，但是硬件，或者软件和硬件的组合的实现也是可能并被构想的。一实施例中，参见图7，为了能够在当前业务处理不中断的前提下，选取最优软件版本对服务器集群进行软件版本升级，本申请提供一种软件版本升级装置，包括：第一部署单元701、最优版本确定单元702及第二部署单元703。第一部署单元701，用于根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级；其中，软件版本升级期间的业务由第二服务器集群运行旧软件版本进行处理；最优版本确定单元702，用于根据各所述第一服务器集群运行对应的新软件版本处理软件版本升级后的业务时的效能参数确定最优软件版本；所述最优软件版本为所述新软件版本之一；第二部署单元703，用于将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级。一实施例中，参见图8，所述的软件版本升级装置，还包括：第一关断单元801及第一业务检测单元802。第一关断单元801，用于关断所述第一服务器集群的业务流量入口；第一业务检测单元802，用于检测所述第一服务器集群中是否有正在处理中的业务；其中，若无，则根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群。一实施例中，参见图9，所述第一部署单元701，包括：版本部署确定模块901及升级参数下发模块902。版本部署确定模块901，用于根据所述新软件版本对应的业务处理模式确定该新软件版本所应部署的第一服务器集群；升级参数下发模块902，用于将该新软件版本对应的软件版本升级参数下发至该第一服务器集群，以使该第一服务器集群根据该软件版本升级参数进行软件版本升级。一实施例中，参见图10，所述的软件版本升级装置，还包括：第一关断单元1001及路由信息变更单元1002。第一关断单元1001，用于关断所述第一服务器集群的业务流量入口；路由信息变更单元1002，用于变更路由配置信息，以使所述软件版本升级期间的业务对应的业务流全部流入所述第二服务器集群。一实施例中，参见图11，所述最优版本确定单元702，包括：流量牵引模块1101、效能参数确定模块1102及效能参数比较模块1103。流量牵引模块1101，用于根据预设的业务流量牵引策略牵引软件版本升级后的业务对应的业务流至各所述第一服务器集群，以使各所述第一服务器集群运行对应的新软件版本处理所述软件版本升级后的业务；效能参数确定模块1102，用于根据各所述第一服务器集群的业务流分配量及业务交易量确定各所述第一服务器集群对应的效能参数；效能参数比较模块1103，用于比较各所述第一服务器集群对应的效能参数，将所述效能参数中最大者对应的新软件版本确定为所述最优软件版本。一实施例中，所述效能参数确定模块1102，具体用于将所述业务交易量除以所述业务流量分配量得到所述效能参数。一实施例中，参见图12，所述的软件版本升级装置，还包括：第二关断单元1201及第二业务检测单元1202。第二关断单元1201，用于关断所述第二服务器集群的业务流量入口；第二业务检测单元1202，用于检测所述第二服务器集群中是否有正在处理中的业务；其中，若无，则将所述最优软件版本部署至所述第二服务器集群。一实施例中，所述第二部署单元703，具体用于将所述最优软件版本对应的软件版本升级参数下发至所述第二服务器集群，以使所述第二服务器集群根据该软件版本升级参数进行软件版本升级。一实施例中，所述的软件版本升级装置，还包括：第三部署单元，用于将所述最优软件版本部署至未运行所述最优软件版本的第一服务器集群，以使该第一服务器集群进行软件版本升级。从硬件层面来说，为了能够在当前业务处理不中断的前提下，选取最优软件版本对服务器集群进行软件版本升级，本申请提供一种用于实现所述软件版本升级方法中的全部或部分内容的电子设备的实施例，所述电子设备具体包含有如下内容：处理器、存储器、通讯接口和总线；其中，所述处理器、存储器、通讯接口通过所述总线完成相互间的通讯；所述通讯接口用于实现所述软件版本升级装置与核心业务系统、用户终端以及相关数据库等相关设备之间的信息传输；该逻辑控制器可以是台式计算机、平板电脑及移动终端等，本实施例不限于此。在本实施例中，该逻辑控制器可以参照实施例中的软件版本升级方法的实施例，以及软件版本升级装置的实施例进行实施，其内容被合并于此，重复之处不再赘述。可以理解的是，所述用户终端可以包括智能手机、平板电子设备、网络机顶盒、便携式计算机、台式电脑、个人数字助理、车载设备、智能穿戴设备等。其中，所述智能穿戴设备可以包括智能眼镜、智能手表、智能手环等。在实际应用中，软件版本升级方法的部分可以在如上述内容所述的电子设备侧执行，也可以所有的操作都在所述客户端设备中完成。具体可以根据所述客户端设备的处理能力，以及用户使用场景的限制等进行选择。本申请对此不作限定。若所有的操作都在所述客户端设备中完成，所述客户端设备还可以包括处理器。上述的客户端设备可以具有通讯模块，可以与远程的服务器进行通讯连接，实现与所述服务器的数据传输。所述服务器可以包括任务调度中心一侧的服务器，其他的实施场景中也可以包括中间平台的服务器，例如与任务调度中心服务器有通讯链接的第三方服务器平台的服务器。所述的服务器可以包括单台计算机设备，也可以包括多个服务器组成的服务器集群，或者分布式装置的服务器结构。图13为本申请实施例的电子设备9600的系统构成的示意框图。如图13所示，该电子设备9600可以包括中央处理器9100和存储器9140；存储器9140耦合到中央处理器9100。值得注意的是，该图13是示例性的；还可以使用其他类型的结构，来补充或代替该结构，以实现电信功能或其他功能。一实施例中，软件版本升级方法功能可以被集成到中央处理器9100中。其中，中央处理器9100可以被配置为进行如下控制：S101：根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级；其中，软件版本升级期间的业务由第二服务器集群运行旧软件版本进行处理；S102：根据各所述第一服务器集群运行对应的新软件版本处理软件版本升级后的业务时的效能参数确定最优软件版本；所述最优软件版本为所述新软件版本之一；S103：将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级。从上述描述可知，本申请提供的软件版本升级方法，能够在当前业务处理不中断的前提下，选取最优软件版本对服务器集群进行软件版本升级；既保证了业务流量不丢失，又保证了业务服务的稳定性，在客户无感的情况下完成服务器集群的软件版本升级，极大地提升了软件版本升级过程中的客户体验度及系统健壮性；同时能够支持业务流量的可视、可管、可控，支持业务流量分割、服务对比部署，从而将最优软件版本部署于服务器集群。在另一个实施方式中，软件版本升级装置可以与中央处理器9100分开配置，例如可以将数据复合传输装置软件版本升级装置配置为与中央处理器9100连接的芯片，通过中央处理器的控制来实现软件版本升级方法的功能。如图13所示，该电子设备9600还可以包括：通讯模块9110、输入单元9120、音频处理器9130、显示器9160、电源9170。值得注意的是，电子设备9600也并不是必须要包括图13中所示的所有部件；此外，电子设备9600还可以包括图13中没有示出的部件，可以参考现有技术。如图13所示，中央处理器9100有时也称为控制器或操作控件，可以包括微处理器或其他处理器装置和/或逻辑装置，该中央处理器9100接收输入并控制电子设备9600的各个部件的操作。其中，存储器9140，例如可以是缓存器、闪存、硬驱、可移动介质、易失性存储器、非易失性存储器或其它合适装置中的一种或更多种。可储存上述与失败有关的信息，此外还可存储执行有关信息的程序。并且中央处理器9100可执行该存储器9140存储的该程序，以实现信息存储或处理等。输入单元9120向中央处理器9100提供输入。该输入单元9120例如为按键或触摸输入装置。电源9170用于向电子设备9600提供电力。显示器9160用于进行图像和文字等显示对象的显示。该显示器例如可为LCD显示器，但并不限于此。该存储器9140可以是固态存储器，例如，只读存储器、随机存取存储器、SIM卡等。还可以是这样的存储器，其即使在断电时也保存信息，可被选择性地擦除且设有更多数据，该存储器的示例有时被称为EPROM等。存储器9140还可以是某种其它类型的装置。存储器9140包括缓冲存储器9141。存储器9140可以包括应用/功能存储部9142，该应用/功能存储部9142用于存储应用程序和功能程序或用于通过中央处理器9100执行电子设备9600的操作的流程。存储器9140还可以包括数据存储部9143，该数据存储部9143用于存储数据，例如联系人、数字数据、图片、声音和/或任何其他由电子设备使用的数据。存储器9140的驱动程序存储部9144可以包括电子设备的用于通讯功能和/或用于执行电子设备的其他功能的各种驱动程序。通讯模块9110即为经由天线9111发送和接收信号的发送机/接收机9110。通讯模块9110耦合到中央处理器9100，以提供输入信号和接收输出信号，这可以和常规移动通讯终端的情况相同。基于不同的通讯技术，在同一电子设备中，可以设置有多个通讯模块9110，如蜂窝网络模块、蓝牙模块和/或无线局域网模块等。通讯模块9110还经由音频处理器9130耦合到扬声器9131和麦克风9132，以经由扬声器9131提供音频输出，并接收来自麦克风9132的音频输入，从而实现通常的电信功能。音频处理器9130可以包括任何合适的缓冲器、解码器、放大器等。另外，音频处理器9130还耦合到中央处理器9100，从而使得可以通过麦克风9132能够在本机上录音，且使得可以通过扬声器9131来播放本机上存储的声音。本申请的实施例还提供能够实现上述实施例中的执行主体为服务器或客户端的软件版本升级方法中全部步骤的一种计算机可读存储介质，所述计算机可读存储介质上存储有计算机程序，该计算机程序被处理器执行时实现上述实施例中的执行主体为服务器或客户端的软件版本升级方法的全部步骤，例如，所述处理器执行所述计算机程序时实现下述步骤：S101：根据新软件版本对应的业务处理模式将各新软件版本部署至对应的第一服务器集群，以使所述第一服务器集群进行软件版本升级；其中，软件版本升级期间的业务由第二服务器集群运行旧软件版本进行处理；S102：根据各所述第一服务器集群运行对应的新软件版本处理软件版本升级后的业务时的效能参数确定最优软件版本；所述最优软件版本为所述新软件版本之一；S103：将所述最优软件版本部署至所述第二服务器集群，以使所述第二服务器集群进行软件版本升级。从上述描述可知，本申请提供的软件版本升级方法，能够在当前业务处理不中断的前提下，选取最优软件版本对服务器集群进行软件版本升级；既保证了业务流量不丢失，又保证了业务服务的稳定性，在客户无感的情况下完成服务器集群的软件版本升级，极大地提升了软件版本升级过程中的客户体验度及系统健壮性；同时能够支持业务流量的可视、可管、可控，支持业务流量分割、服务对比部署，从而将最优软件版本部署于服务器集群。本领域内的技术人员应明白，本发明的实施例可提供为方法、装置、或计算机程序产品。因此，本发明可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本发明是参照根据本发明实施例的方法、设备、和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。本发明中应用了具体实施例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处，综上所述，本说明书内容不应理解为对本发明的限制。
