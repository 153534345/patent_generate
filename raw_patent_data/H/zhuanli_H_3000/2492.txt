标题title
一种自动驾驶数据处理方法及自动驾驶交通系统
摘要abst
本发明公开了一种自动驾驶数据处理方法和自动驾驶交通系统，其应用于路侧和/或车端，包括：S1：利用多元融合感知方法获取当前交通环境；S2：对当前交通环境中的交通参与者进行识别，并对交通参与者的行动轨迹进行预测，得到预测结果；S3：根据当前交通环境以及预测结果，构建当前交通环境下的自动驾驶车辆的决策模型和约束规则；S4：确定自动驾驶车辆决策模型的包络区间；S5：利用数据驱动方法，确定包络区间的乘客评价模型；S6：判断乘客评价模型是否为目标乘客评价模型，若是，进入步骤S7；否则返回步骤S2；S7：利用乘客评价模型优化自动驾驶车辆的决策模型和约束规则，并发送至自动驾驶车辆。
权利要求书clms
1.一种自动驾驶数据处理方法，其特征在于，其应用于路侧和/或车端，所述自动驾驶数据处理方法包括：S1：利用多元融合感知方法获取当前交通环境；S2：对所述当前交通环境中的交通参与者进行识别，并对所述交通参与者的行动轨迹进行预测，得到预测结果；S3：根据所述当前交通环境以及所述预测结果，构建当前交通环境下的自动驾驶车辆的决策模型和约束规则；S4：确定所述自动驾驶车辆决策模型的包络区间；S5：利用数据驱动方法，确定所述包络区间的乘客评价模型；S6：判断所述乘客评价模型是否为目标乘客评价模型，若是，进入步骤S7；否则返回步骤S2；S7：利用所述乘客评价模型优化所述自动驾驶车辆的决策模型和约束规则，并将所述自动驾驶车辆的决策模型和约束规则发送至所述自动驾驶车辆。2.根据权利要求1所述的自动驾驶数据处理方法，其特征在于，所述当前交通环境包括当前路段交通环境以及当前路口交通环境，所述步骤S1包括：S11：利用所述多元融合感知方法获取当前路段交通环境；S12：利用所述多元融合感知方法获取当前路口交通环境；S13：利用二维候选区域对所述当前路段交通环境和所述当前路口交通环境进行多元传感器信息融合，得到所述当前交通环境。3.根据权利要求2所述的自动驾驶数据处理方法，其特征在于，所述步骤S11包括：S111：获取当前路段交通环境图像信息；S112：采用无锚点目标检测与识别方法获取所述当前交通环境图像信息中的目标关键点；S113：利用所述目标关键点预测所述当前交通环境图像信息的包围框尺寸；S114：根据所述当前交通环境图像信息的包围框尺寸以及所述目标关键点，得到所述当前路段交通环境。4.根据权利要求3所述的自动驾驶数据处理方法，其特征在于，所述步骤S112中，所述无锚点目标检测与识别方法包括：A1：利用全卷积神经网络提取所述当前路段交通环境图像信息中不同尺度间的特征；A2：利用高维卷积提取挖掘不同尺度间的特征的相互作用；A3：根据所述相互作用，对不同尺度间的特征进行融合，得到融合后的图像信息；A4：根据所述融合后的图像信息，利用关键点检测和逻辑回归损失模型，得到所述当前交通环境图像信息中的目标关键点。5.根据权利要求4所述的自动驾驶数据处理方法，其特征在于，所述步骤A2中，所述高维卷积结构为：y＝upsample+w0*xl+w-1*s2xl-1其中，y为卷积运算后的结果；upsample为上采样操作，将低分辨率图像拓展为高分辨率图像；w1为卷积核1中元素的值；xl+1为分辨率第l+1层矩阵的值；xl为分辨率第l层矩阵的值；w0为卷积核0中元素的值；w-1为卷积核-1中元素的值；s2为将高分辨率图像缩小为低分辨率图像的采样规则；xl-1为分辨率第l-1层矩阵的值；*代表卷积操作；所述步骤A4中，所述逻辑回归损失模型为：其中，L为逻辑回归损失模型；a为回归参数；y为机器学习中的目标的标签；y′为关于y的预测值；γ为回归参数。6.根据权利要求2所述的自动驾驶数据处理方法，其特征在于，所述步骤S12包括：S121：获取当前路口交通环境激光点云数据；S122：采用稀疏卷积神经网络的多尺寸表征提取算法，对所述当前路口交通环境激光点云数据进行融合，得到融合数据；S123：利用自适应权重调节机制分配所述融合数据的参数权重，得到处理后的融合数据；S124：利用所述处理后的融合数据获取所述当前路口交通环境激光点云数据的关键信息。7.根据权利要求1所述的自动驾驶数据处理方法，其特征在于，所述步骤S2包括：对所述交通参与者进行姿态意图预测；和/或对所述交通参与者进行轨迹预测。8.根据权利要求7所述的自动驾驶数据处理方法，其特征在于，所述对所述交通参与者进行姿态意图预测包括：获取各交通参与者的关键点和关键点之间的亲和力场编码图；通过所述亲和力场编码图对所述关键点进行连接，得到各所述交通参与者的姿态估计拟合特征；根据所述姿态估计拟合特征，分别对所述当前交通环境中的所有交通参与者进行模式匹配，得到匹配结果；利用所述匹配结果对所述交通参与者进行姿态意图预测；所述对所述交通参与者进行轨迹预测包括：根据所述交通参与者的位置坐标以及行人各向异性数据，构建行人轨迹预测模型；以及根据所述交通参与者的位置坐标、所述行人各向异性数据和所述交通参与者编码信息，构建序列到序列神经网络模型；其中，所述交通参与者编码信息是通过当前交通环境的图像数据生成的卷积神经网络得到的；根据所述行人轨迹预测模型，得到第一行人轨迹预测结果；以及，根据所述序列到序列神经网络模型，得到第二行人轨迹预测结果；根据所述第一行人预测结果和所述第二行人轨迹预测结果，构建堆栈泛化模型；根据所述堆栈泛化模型，得到所述交通参与者的轨迹预测结果。9.根据权利要求1所述的自动驾驶数据处理方法，其特征在于，所述步骤S3包括：S31：根据所述当前交通环境，构建自动驾驶车辆的物理约束条件；S32：根据典型极端交通场景，建立基于微观运动学和动力学的物理模型；S33：根据所述物理模型和所述物理约束条件，建立对应的碰撞危险表达式；S34：根据所述碰撞危险表达式，构建所述自动驾驶车辆周边安全数据场；S35：根据所述交通参与者的轨迹预测，得到自动驾驶车辆周边安全数据场的变化趋势；S36：利用所述变化趋势，生成所述自动驾驶车辆的路径规划策略。10.一种自动驾驶交通系统，其特征在于，所述自动驾驶交通系统应用根据权利要求1-9中任意一项所述的自动驾驶数据处理方法，所述自动驾驶交通系统还包括：多个感知模块：多个所述感知模块用于感知当前交通环境中的多个单一特征；融合模块，所述融合模块用于对多个所述单一特征进行融合，以构成完整的所述当前交通环境；识别模块，所述识别模块用于对所述当前交通环境中的交通参与者进行识别，并生成所述交通参与者的行动轨迹；处理模块，所述处理模块用于对所述行动轨迹进行处理，并依据所述行动轨迹进行行动轨迹预测，生成预测结果；根据所述当前交通环境以及所述预测结果，构建当前交通环境下的自动驾驶车辆的决策模型和约束规则；确定所述自动驾驶车辆决策模型的包络区间；利用数据驱动方法，确定所述包络区间的乘客评价模型；判断所述乘客评价模型是否为目标乘客评价模型；以及利用所述乘客评价模型优化所述自动驾驶车辆的决策模型和约束规则，并将所述自动驾驶车辆的决策模型和约束规则发送至所述自动驾驶车辆。
说明书desc
技术领域本发明涉及自动驾驶技术领域，具体涉及一种自动驾驶数据处理方法及自动驾驶交通系统。背景技术数字化交通基础设施的建设可充分弥补复杂交通场景下自动驾驶汽车安全行驶所需算力与感知能力不足的缺陷，通过车路协同模式显著降低车辆的硬件升级成本、提高系统整体安全性，对于自动驾驶产业落地起到重要的支撑作用。近年来，国内外从政策和应用层面都进行了车-路协同的推进。车路协同V2X通信技术目前主要基于IEEE 802.11p的DSRC标准、基于LTE蜂窝网络的LTE-V技术标准、5G-V2X标准三种，可适应不同业务场景需求。目前，DSRC标准推广缓慢，LTE-V2X已经具备产业应用基础，而5G-V2X 标准已冻结，尚待发布。LTE-V2X处于5G-V2X的前一个阶段，目前已经能够解决上述定义场景中的大部分基础安全预警和效率提升类应用需求，主要用于辅助驾驶场景。5G-V2X则主要是为了满足高等级自动驾驶应用场景需求。目前学术界和工业界针对V2X通信开展了许多研究工作，这些研究多集中于这些方面：通过车辆间的协同通信获得实时路况和道路信息以及行人信息等一系列交通信息，从而提高驾驶安全性，减少拥堵，提高交通效率以及提供丰富的车载娱乐信息等。然而，由于城市交通环境涉及到人车混行的复杂混合交通场景，增大了研究城市道路自动驾驶技术的难度。同时目前多传感器融合算法的应用场景相对简单，因此对于复杂动态场景的研究仍有待加强，工程方面仍面临着时间同步与在线子校准的问题，亟待解决。发明内容本发明的目的在于提供一种自动驾驶数据处理方法及自动驾驶交通系统，以同时解决多源融合感知、交通参与者辨识与轨迹预测以及自动驾驶智能决策与路径规划问题。本发明解决上述技术问题的技术方案如下：本发明提供一种自动驾驶数据处理方法，其应用于路侧和/或车端，所述自动驾驶数据处理方法包括：S1：利用多元融合感知方法获取当前交通环境；S2：对所述当前交通环境中的交通参与者进行识别，并对所述交通参与者的行动轨迹进行预测，得到预测结果；S3：根据所述当前交通环境以及所述预测结果，构建当前交通环境下的自动驾驶车辆的决策模型和约束规则；S4：确定所述自动驾驶车辆决策模型的包络区间；S5：利用数据驱动方法，确定所述包络区间的乘客评价模型；S6：判断所述乘客评价模型是否为目标乘客评价模型，若是，进入步骤 S7；否则返回步骤S2；S7：利用所述乘客评价模型优化所述自动驾驶车辆的决策模型和约束规则，并将所述自动驾驶车辆的决策模型和约束规则发送至所述自动驾驶车辆。可选择地，所述当前交通环境包括当前路段交通环境以及当前路口交通环境，所述步骤S1包括：S11：利用所述多元融合感知方法获取当前路段交通环境；S12：利用所述多元融合感知方法获取当前路口交通环境；以及S13：利用二维候选区域对所述当前路段交通环境和所述当前路口交通环境进行多元传感器信息融合，得到所述当前交通环境。可选择地，所述步骤S11包括：S111：获取当前路段交通环境图像信息；S112：采用无锚点目标检测与识别方法获取所述当前交通环境图像信息中的目标关键点；S113：利用所述目标关键点预测所述当前交通环境图像信息的包围框尺寸；S114：根据所述当前交通环境图像信息的包围框尺寸以及所述目标关键点，得到所述当前路段交通环境；所述步骤S12包括：S121：获取当前路口交通环境激光点云数据；S122：采用稀疏卷积神经网络的多尺寸表征提取算法，对所述当前路口交通环境激光点云数据进行融合，得到融合数据；S123：利用自适应权重调节机制分配所述融合数据的参数权重，得到处理后的融合数据；S124：利用所述处理后的融合数据获取所述当前路口交通环境激光点云数据的关键信息。可选择地，所述步骤S112中，所述无锚点目标检测与识别方法包括：A1：利用全卷积神经网络提取所述当前路段交通环境图像信息中不同尺度间的特征；A2：利用高维卷积提取挖掘不同尺度间的特征的相互作用；A3：根据所述相互作用，对不同尺度间的特征进行融合，得到融合后的图像信息；A4：根据所述融合后的图像信息，利用关键点检测和逻辑回归损失模型，得到所述当前交通环境图像信息中的目标关键点。可选择地，所述步骤A2中，所述高维卷积结构为：y＝upsample+w0*xl+w-1*s2 xl-1其中，y为卷积运算后的结果；upsample为上采样操作，将低分辨率图像拓展为高分辨率图像；w1为卷积核1中元素的值；xl+1为分辨率第l+1层矩阵的值；xl为分辨率第l层矩阵的值；w0为卷积核0中元素的值；w-1为卷积核-1中元素的值；s2为将高分辨率图像缩小为低分辨率图像的采样规则；xl-1为分辨率第l-1层矩阵的值；*代表卷积操作；所述步骤A4中，所述逻辑回归损失模型为：其中，L为逻辑回归损失模型；a为回归参数；y为机器学习中的目标的标签；y′为关于y的预测值；γ为回归参数。可选择地，所述步骤S2包括：对所述交通参与者进行姿态意图预测；和/或对所述交通参与者进行轨迹预测。可选择地，所述对所述交通参与者进行姿态意图预测包括：获取各交通参与者的关键点和关键点之间的亲和力场编码图；通过所述亲和力场编码图对所述关键点进行连接，得到各所述交通参与者的姿态估计拟合特征；根据所述姿态估计拟合特征，分别对所述当前交通环境中的所有交通参与者进行模式匹配，得到匹配结果；利用所述匹配结果对所述交通参与者进行姿态意图预测；所述对所述交通参与者进行轨迹预测包括：根据所述交通参与者的位置坐标以及行人各向异性数据，构建行人轨迹预测模型；以及根据所述交通参与者的位置坐标、所述行人各向异性数据和所述交通参与者编码信息，构建序列到序列神经网络模型；其中，所述交通参与者编码信息是通过当前交通环境的图像数据生成的卷积神经网络得到的；根据所述行人轨迹预测模型，得到第一行人轨迹预测结果；以及，根据所述序列到序列神经网络模型，得到第二行人轨迹预测结果；根据所述第一行人预测结果和所述第二行人轨迹预测结果，构建堆栈泛化模型；根据所述堆栈泛化模型，得到所述交通参与者的轨迹预测结果。可选择地，所述步骤S3包括：S31：根据所述当前交通环境，构建自动驾驶车辆的物理约束条件；S32：根据典型极端交通场景，建立基于微观运动学和动力学的物理模型；S33：根据所述物理模型和所述物理约束条件，建立对应的碰撞危险表达式；S34：根据所述碰撞危险表达式，构建所述自动驾驶车辆周边安全数据场；S35：根据所述交通参与者的轨迹预测，得到自动驾驶车辆周边安全数据场的变化趋势；S36：利用所述变化趋势，生成所述自动驾驶车辆的路径规划策略。本发明还提供一种自动驾驶交通系统，所述自动驾驶交通系统应用上述的自动驾驶数据处理方法，所述自动驾驶交通系统还包括：多个感知模块：多个所述感知模块用于感知当前交通环境中的多个单一特征；融合模块，所述融合模块用于对多个所述单一特征进行融合，以构成完整的所述当前交通环境；识别模块，所述识别模块用于对所述当前交通环境中的交通参与者进行识别，并生成所述交通参与者的行动轨迹；处理模块，所述处理模块用于对所述行动轨迹进行处理，并依据所述行动轨迹进行行动轨迹预测，生成预测结果；根据所述当前交通环境以及所述预测结果，构建当前交通环境下的自动驾驶车辆的决策模型和约束规则；确定所述自动驾驶车辆决策模型的包络区间；利用数据驱动方法，确定所述包络区间的乘客评价模型；判断所述乘客评价模型是否为目标乘客评价模型；以及利用所述乘客评价模型优化所述自动驾驶车辆的决策模型和约束规则，并将所述自动驾驶车辆的决策模型和约束规则发送至所述自动驾驶车辆。本发明具有以下有益效果：基于数字基础设施的复杂城市道路自动驾驶技术，着眼于弱势交通参与者的安全性与自动驾驶车辆乘客的舒适性，通过路侧移动边缘计算单元与车载传感器的多源融合感知、交通参与者辨识与轨迹预测和自动驾驶智能决策与路径规划的研究，探究基于数字道路交通基础设施的自动驾驶综合感知与决策技术，从而提高城市道路复杂交通场景的道路通行能力。通过空-地道路基础设施数据建模、路侧传感器布设等，实现基础设施的数字化。将基础设施、交通标志标线、交叉口控制信息、单车信息等上传至路侧计算单元，在边缘端进行车路信息的多视角时空耦合，并辅助自动驾驶汽车完成路径规划的决策。立足于V2X通信技术，聚焦车路融合通信架构与协同运算机制，开展面向城市交通典型场景的车路协同信息传输架构、云-边-端协同运算决策机制和虚实结合的车路协同测试技术研究，突破保障通信数据可靠性、可达性及低时延的理论与技术瓶颈，实现云边端协同计算算力高效均衡分配，并探究基于元场景颗粒提取与快速构建的虚拟仿真加速测试方法，为车路协同系统的实际应用与落地提供支撑。附图说明图1为本发明所提供的自动驾驶数据处理方法中交通参与者辨识与轨迹预测整体架构图；图2为本发明所提供的自动驾驶数据处理方法的流程图；图3为步骤S11的分步骤流程图；图4为步骤S12的分步骤流程图；图5为本发明所提供的自动驾驶数据处理方法的无锚点目标检测与识别方法的流程图；图6为图2中步骤S3的分步骤流程图。具体实施方式以下结合附图对本发明的原理和特征进行描述，所举实例只用于解释本发明，并非用于限定本发明的范围。实施例城市交通环境涉及到人车混行的复杂混合交通场景，增大了研究城市道路自动驾驶技术的难度。为了提高城市道路的通行能力、改善交通环境，本项目在城市数字道路基础信息设施的基础上，从多源融合感知、交通参与者辨识与轨迹预测和自动驾驶智能决策与路径规划多维度解决城市道路自动驾驶技术难题，具体内容包括：车路协同模式下的自动驾驶复杂交通环境多源融合感知现有自动驾驶车辆在路口等复杂交通环境下，依靠单一传感器难以实现对环境全天候的可靠感知，研究针对车路协同模式下车端与路端视觉传感器相机在复杂场景应用过程中目标检测与识别存在的目标多尺度问题及检测效率问题，设计建立了基于高维卷积的特征融合方法和无锚点目标检测方法。具体地，步骤包括：获取当前路段交通环境图像信息；采用无锚点目标检测与识别方法对所述当前交通环境图像信息中的目标关键点；利用所述目标关键点预测所述当前交通环境图像信息的包围框尺寸；根据所述当前交通环境图像信息的包围框尺寸以及所述目标关键点，得到所述当前路段交通环境。其中，无锚点目标检测与识别方法包括：先利用全卷积神经网络提取特征。其次利用高维卷积提取挖掘不同尺度间的相互作用，能够通过对齐内核来自适应特征尺度的变化，保持层间尺度均衡，对不同尺度的特征进行融合。其中高维卷积结构为：y＝upsample+w0*xl+w-1*s2xl-1其中，y为卷积运算后的结果；upsample为上采样操作，将低分辨率图像拓展为高分辨率图像；w1为卷积核1中元素的值；xl+1为分辨率第l+1层矩阵的值；xl为分辨率第l层矩阵的值；w0为卷积核0中元素的值；w-1为卷积核-1中元素的值；s2为将高分辨率图像缩小为低分辨率图像的采样规则；xl-1为分辨率第l-1层矩阵的值；*代表卷积操作；对所提取的多尺度融合特征，利用关键点检测及包围框尺寸回归，在不使用预设锚点的前提下进行目标检测与识别。将图像信息输入全卷积网络，得到热力图，热力图峰值点即为目标的关键点，进而通过该关键点预测目标包围框的宽高信息。其中，采用逻辑回归损失函数为：其中，L为逻辑回归损失模型；a为回归参数；y为机器学习中的目标的标签；y′为关于y的预测值；γ为回归参数。该方法无需穷举潜在目标位置及非极大值抑制等后处理操作，有效提高目标检测与识别的效率与跨域适应性。具体地，基于视觉和点云信息等传感器多源融合感知方法包括：获取当前路口交通环境激光点云数据；采用稀疏卷积神经网络的多尺寸表征提取算法，对所述当前路口交通环境激光点云数据进行融合，得到融合数据；利用自适应权重调节机制分配所述融合数据的参数权重，得到处理后的融合数据；利用所述处理后的融合数据获取所述当前路口交通环境激光点云数据的关键信息。对车路协同场景中车端与路侧激光雷达对复杂场景应用过程中存在的单元传感器目标精准检测问题与遮挡问题，对于多个激光雷达输入点云 Pi，自适应匹配融合点云可表达为：Hi为通过渐进一致采样持续优化的变换矩阵，后根据最远点随机取样机制选取最广分布点云Pt：Pt＝max{Pi|distance}进而实现空间表征完备的同时压缩传输数据体量，以提升点云表现能力。研究利用稀疏卷积网络的多尺寸表征提取算法，基于前述的融合点云输入，建立跨层网络连接，将不同层级与尺度的特征进行联合融合，并引入自适应权重调节机制分配参数权重，以提取其点云视界中更关键的信息，设定损失函数为：其中Lcls为分类计算得到的focal loss，其后为预测值与实际值的smooth-L1误差，进而通过优化学习，最终提高路口复杂场景下多目标物的激光雷达识别性能。针对车路协同模式下车端与路端在复杂场景应用过程中目标检测与识别存在的目标尺度多变、检测效率与遮挡等问题，提出基于视觉和点云信息等传感器多源融合感知方法。如此，能够研究车路协同场景中车端与路侧点云信息传感器对复杂场景应用过程中存在的单元传感器目标精准检测问题与遮挡问题，通过研究冗余自适应多传感器点云融合技术实现路侧点云组合提炼，并设计多尺寸稀疏卷积神经网络进行特征提取，建立跨层网络连接，实现不同层级与尺度的特征联合融合，最终提高路口复杂场景下多目标物的激光雷达识别性能。车端与路端等多个传感器通过以太网互联，实现时钟同步与空间统一。基于二维检测器生成候选区域，在点云空间形成视锥搜索空间，回归得到三维检测结果。对于城市道路GPS信号遮挡路段，路端传感器视为位置已知的信标节点，车辆位置为待定节点。根据信标节点位置信息与车路协同环境中车端与路端传感器的信息交互，采用单边同步双向测距算法，计算出移动车辆的位置信息。基于V2I与本地数据联合驱动的交通参与者辨识与轨迹预测算法，通过建立CNN卷积神经网络的行人意图估计模型和基于社会学因素的交通参与者轨迹预测模型，利用V2I和车载传感器数据的融合，实现多交通参与者的准确辨识和精准预测。基于CNN卷积神经网络的行人二维姿态估计。研究将姿态估计用于行人的意图检测，综合运用骨架拟合特征提取、神经网络训练并分类，实现行人意图的准确输出。研究将交通参与者的辨识结果固化至V2I 硬件载体，并将辨识结果实时发送给自动驾驶汽车，填补车载传感器目标检测盲区，实现车-路-人的全面融通通信。利用Stacking方法将改进社会力模型和长短期记忆网络进行深度融合的行人及非机动车轨迹预测模型，实现行人的社会学本质与大数据相结合，能够对特殊、复杂场景下的行人及非机动车的轨迹进行精准的预测。具体包括：获取各交通参与者的关键点和关键点之间的亲和力场编码图；通过所述亲和力场编码图对所述关键点进行连接，得到各所述交通参与者的姿态估计拟合特征；根据所述姿态估计拟合特征，分别对所述当前交通环境中的所有交通参与者进行模式匹配，得到匹配结果；利用所述匹配结果对所述交通参与者进行姿态意图预测；所述对所述交通参与者进行轨迹预测包括：根据所述交通参与者的位置坐标以及行人各向异性数据，构建行人轨迹预测模型；以及根据所述交通参与者的位置坐标、所述行人各向异性数据和所述交通参与者编码信息，构建序列到序列神经网络模型；其中，所述交通参与者编码信息是通过当前交通环境的图像数据生成的卷积神经网络得到的；根据所述行人轨迹预测模型，得到第一行人轨迹预测结果；以及，根据所述序列到序列神经网络模型，得到第二行人轨迹预测结果；根据所述第一行人预测结果和所述第二行人轨迹预测结果，构建堆栈泛化模型；根据所述堆栈泛化模型，得到所述交通参与者的轨迹预测结果。用具有双分支的循环卷积神经网络分别从输入图像中同时检测人体部位的关键点和关键点之间连接的亲和力场。通过亲和力场编码图将图像中关键点进行连接获得行人的姿态估计拟合特征,整体检测流程如图。通过多层感知机对图像中每个行人的姿态估计进行模式匹配。将姿态估计中获得的人体拟合骨架中可以体现行人运动意图的手臂、腿部等关节作为关键点，依据高度对其位置进行归一化，将关键点之间的位置，关节角度提取为特征向量，使用多层感知机对特征向量进行匹配，检测行人当前运动意图。利用V2I感知设备、车载传感器等采集真实的交通环境信息，建立车-路通信方式进行数据传输和交互，以V2I和车载终端作为行车环境感知与交互的核心载体，完成数据转换系统统一坐标的搭建，将V2I传感器与车载传感器采集的数据相互关联，建立特征级的数据融合模型，对交通参与者融合后的数据进行结构化整合，完成交通参与者的精准辨识，同时将辨识结果实时发布给自动驾驶汽车的OBU。量化不同年龄、性别行人以及非机动车的期望速度、最大速度、反应时间等运动学特征，考虑交通环境、车辆对交通参与者的影响，建立一种改进社会力的行人轨迹预测模型。建立堆栈泛化模型，克服单纯使用社会力模型或长短期记忆网络进行交通参与者轨迹预测的不足，所建立的元模型使用全连接网络，基模型为改进社会力模型和基于LSTM的序列到序列神经网络模型，具体参考图1。城市复杂道路环境中，以主车关联域内的宏观交通图为背景，研究一种融合车辆乘坐体验评价与优化的自动驾驶汽车智能决策与路径规划技术，平衡宏观通行效率与微观车辆操控品质，提高混合交通模式下，各型路面车辆的通行效率。基于规则约束的方法用于路径规划与避障时，算法的外延特性差，而深度强化学习方法用于规划的可解释性差，研究基于规则与基于数据驱动耦合的方法，以车辆为智能体，抽象化环境特征，在可行使空间域内，局部寻找最优解，在自动驾驶汽车与行驶环境物理约束条件下，在线交互求得最优的决策与规划策略。针对单车感知区域受限，对于城市区域路网单车无法通过感知系统获取路口内其他方向以及毗邻路口内交通态势的问题，基于交通宏观基本图，建立将交通宏观状态与微观驾驶规则相结合的交通模型，分析驾驶行为参数与宏观交通参数的相互影响和映射关系，以此对路网交通进行宏观调控，对车辆行为进行微观改进。当前自动驾驶汽车以功能实现为首要目标，大量技术进步表明，车内乘客对车辆行为的主客观认可度将成为制约自动驾驶汽车智能化程度的关键因素，因而在本发明中，通过根据当前交通环境以及交通参与者行动轨迹的预测结果，构建当前环境下的自动驾驶车辆决策模型和约束规则，具体包括：根据所述当前交通环境，构建自动驾驶车辆的物理约束条件；根据典型极端交通场景，建立基于微观运动学和动力学的物理模型；根据所述物理模型和所述物理约束条件，建立对应的碰撞危险表达式；根据所述碰撞危险表达式，构建所述自动驾驶车辆周边安全数据场；根据所述交通参与者的轨迹预测，得到自动驾驶车辆周边安全数据场的变化趋势；利用所述变化趋势，生成所述自动驾驶车辆的路径规划策略。通过基于规则的方法构建道路交通环境对自动驾驶汽车的物理约束条件，该约束作为车辆决策行为的边界条件，以强约束的形式保证自动驾驶汽车的安全性，在该约束下可以保证自动驾驶汽车始终运行在安全可行驶区域内，并且能够避免对周围交通参与者产生危险性影响。规则约束层面，通过对典型极端场景进行分析，在纵向、侧向和并行工况下进行极端工况的机理分析，建立基于微观运动学和动力学的物理模型，融合碰撞时距并结合制动过程运动学分析，建立对应的碰撞危险表达式，形成碰撞危险综合评价方法。构建车辆周边安全数据场，根据周边车辆的轨迹预测，得到智能车辆周边安全数据场在不同时刻的叠加变化，利用所构建的碰撞危险综合评价方法对智能车辆周边安全数据场的变化趋势进行判断，最终实现智能车辆周边安全的态势评价；数据驱动层面，通过基于数据的方法，以强化学习决策模型与深度强化学习决策模型为优化手段，模型在自动驾驶汽车物理约束条件内，可以找到最优的决策与规划策略。对于交通与自动驾驶车辆的交互作用，通过对城市路网运行状态的分析，将城市路网划分为两个区域：中心区域和周边区域，建立两个区域各自的宏观基本图数学模型，通过真实数据与仿真结果拟合得到模型参数。考虑区域周边控制以及自动驾驶车辆决策方法的影响，引入控制因子和影响因子，建立基于城市两区域的MFD宏观交通流模型，将区域交通完成量最大化作为控制目标，通过遗传算法求解目标函数。建立考虑区域宏观交通参数的微观交通流模型，通过数值实验与仿真分析方法得到考虑不同交通影响参数的微观驾驶行为稳定性与安全性。MFD的数学表达式：G)＝a·N3+b·N2+c·N+d式中：G)是路网旅行完成流量，N是路网累积车辆数。根据相关医学研究成果，车内乘客呼吸变化情况、脉搏变化情况、皮肤电导率等指标的变化能够较准确反应乘客在测试区间内的紧张感变化情况，能够作为当前测试场景下乘客生理舒适度的重要参考指标。除了进行客观生理指标采集以外，在不同的场景测试中，同时通过主观评分的方式给出车辆通过相关场景时，车内乘客的心理信心度指标，作为测试区间内的心理主观评价指标。以时序神经网络模型作为网络框架，以预采集的车辆在不同行驶工况下车辆状态以及车辆周围环境信息为模型输入，以车内乘客主/客观评价作为车辆通过该场景的量化评价值,通过长短期记忆网络/门控循环单元 模型算法训练，从而建立自动驾驶汽车动力学参数与乘客舒适度之间的映射关系，从而能够确保自动驾驶乘客舒适度。实施例2本发明解决上述技术问题的技术方案如下：本发明提供一种自动驾驶数据处理方法，其应用于路侧和/或车端，参考图2所示，所述自动驾驶数据处理方法包括：S1：利用多元融合感知方法获取当前交通环境；S2：对所述当前交通环境中的交通参与者进行识别，并对所述交通参与者的行动轨迹进行预测，得到预测结果；S3：根据所述当前交通环境以及所述预测结果，构建当前交通环境下的自动驾驶车辆的决策模型和约束规则；S4：确定所述自动驾驶车辆决策模型的包络区间；S5：利用数据驱动方法，确定所述包络区间的乘客评价模型；对于交通与自动驾驶车辆的交互作用，通过对城市路网运行状态的分析，将城市路网划分为两个区域：中心区域和周边区域，建立两个区域各自的宏观基本图数学模型，通过真实数据与仿真结果拟合得到模型参数。考虑区域周边控制以及自动驾驶车辆决策方法的影响，引入控制因子和影响因子，建立基于城市两区域的MFD宏观交通流模型，将区域交通完成量最大化作为控制目标，通过遗传算法求解目标函数。建立考虑区域宏观交通参数的微观交通流模型，通过数值实验与仿真分析方法得到考虑不同交通影响参数的微观驾驶行为稳定性与安全性。S6：判断所述乘客评价模型是否为目标乘客评价模型，若是，进入步骤 S7；否则返回步骤S2；S7：利用所述乘客评价模型优化所述自动驾驶车辆的决策模型和约束规则，并将所述自动驾驶车辆的决策模型和约束规则发送至所述自动驾驶车辆。可选择地，所述当前交通环境包括当前路段交通环境以及当前路口交通环境，所述步骤S1包括：S11：利用所述多元融合感知方法获取当前路段交通环境；S12：利用所述多元融合感知方法获取当前路口交通环境；以及S13：利用二维候选区域对所述当前路段交通环境和所述当前路口交通环境进行多元传感器信息融合，得到所述当前交通环境。可选择地，参考图3所示，所述步骤S11包括：S111：获取当前路段交通环境图像信息；S112：采用无锚点目标检测与识别方法获取所述当前交通环境图像信息中的目标关键点；S113：利用所述目标关键点预测所述当前交通环境图像信息的包围框尺寸；S114：根据所述当前交通环境图像信息的包围框尺寸以及所述目标关键点，得到所述当前路段交通环境；参考图4所示，所述步骤S12包括：S121：获取当前路口交通环境激光点云数据；S122：采用稀疏卷积神经网络的多尺寸表征提取算法，对所述当前路口交通环境激光点云数据进行融合，得到融合数据；研究利用稀疏卷积网络的多尺寸表征提取算法，基于前述的融合点云输入，建立跨层网络连接，将不同层级与尺度的特征进行联合融合，并引入自适应权重调节机制分配参数权重，以提取其点云视界中更关键的信息。多尺寸表征提取算法为基于稀疏卷积神经网络的算法，其目的是提取三维激光扫描获得的交通环境激光点云模型数据中的关键特征点，如：道路边界、建筑物或构筑物轮廓、标志、标线、指示信息等。S123：利用自适应权重调节机制分配所述融合数据的参数权重，得到处理后的融合数据；S124：利用所述处理后的融合数据获取所述当前路口交通环境激光点云数据的关键信息。可选择地，参考图5，所述步骤S112中，所述无锚点目标检测与识别方法包括：A1：利用全卷积神经网络提取所述当前路段交通环境图像信息中不同尺度间的特征；A2：利用高维卷积提取挖掘不同尺度间的特征的相互作用；其中，所述高维卷积结构为：y＝upsample+w0*xl+w-1*s2xl-1其中，y为卷积运算后的结果；upsample为上采样操作，将低分辨率图像拓展为高分辨率图像；w1为卷积核1中元素的值；xl+1为分辨率第l+1层矩阵的值；xl为分辨率第l层矩阵的值；w0为卷积核0中元素的值；w-1为卷积核-1中元素的值；s2为将高分辨率图像缩小为低分辨率图像的采样规则；xl-1为分辨率第l-1层矩阵的值；*代表卷积操作。A3：根据所述相互作用，对不同尺度间的特征进行融合，得到融合后的图像信息；A4：根据所述融合后的图像信息，利用关键点检测和逻辑回归损失模型，得到所述当前交通环境图像信息中的目标关键点，其中，所述逻辑回归损失模型为：其中，L为逻辑回归损失模型；a为回归参数；y为机器学习中的目标的标签；y′为关于y的预测值；γ为回归参数。可选择地，所述步骤S2包括：对所述交通参与者进行姿态意图预测；和/或对所述交通参与者进行轨迹预测。可选择地，所述对所述交通参与者进行姿态意图预测包括：获取各交通参与者的关键点和关键点之间的亲和力场编码图；通过所述亲和力场编码图对所述关键点进行连接，得到各所述交通参与者的姿态估计拟合特征；根据所述姿态估计拟合特征，分别对所述当前交通环境中的所有交通参与者进行模式匹配，得到匹配结果；利用所述匹配结果对所述交通参与者进行姿态意图预测；所述对所述交通参与者进行轨迹预测包括：根据所述交通参与者的位置坐标以及行人各向异性数据，构建行人轨迹预测模型；以及根据所述交通参与者的位置坐标、所述行人各向异性数据和所述交通参与者编码信息，构建序列到序列神经网络模型；其中，所述交通参与者编码信息是通过当前交通环境的图像数据生成的卷积神经网络得到的；根据所述行人轨迹预测模型，得到第一行人轨迹预测结果；以及，根据所述序列到序列神经网络模型，得到第二行人轨迹预测结果；根据所述第一行人预测结果和所述第二行人轨迹预测结果，构建堆栈泛化模型；根据所述堆栈泛化模型，得到所述交通参与者的轨迹预测结果。可选择地，参考图6所示，所述步骤S3包括：S31：根据所述当前交通环境，构建自动驾驶车辆的物理约束条件；S32：根据典型极端交通场景，建立基于微观运动学和动力学的物理模型；S33：根据所述物理模型和所述物理约束条件，建立对应的碰撞危险表达式；S34：根据所述碰撞危险表达式，构建所述自动驾驶车辆周边安全数据场；S35：根据所述交通参与者的轨迹预测，得到自动驾驶车辆周边安全数据场的变化趋势；S36：利用所述变化趋势，生成所述自动驾驶车辆的路径规划策略。本发明还提供一种自动驾驶交通系统，所述自动驾驶交通系统应用上述的自动驾驶数据处理方法，所述自动驾驶交通系统还包括：多个感知模块：多个所述感知模块用于感知当前交通环境中的多个单一特征；融合模块，所述融合模块用于对多个所述单一特征进行融合，以构成完整的所述当前交通环境；识别模块，所述识别模块用于对所述当前交通环境中的交通参与者进行识别，并生成所述交通参与者的行动轨迹；处理模块，所述处理模块用于对所述行动轨迹进行处理，并依据所述行动轨迹进行行动轨迹预测，生成预测结果；根据所述当前交通环境以及所述预测结果，构建当前交通环境下的自动驾驶车辆的决策模型和约束规则；确定所述自动驾驶车辆决策模型的包络区间；利用数据驱动方法，确定所述包络区间的乘客评价模型；判断所述乘客评价模型是否为目标乘客评价模型；以及利用所述乘客评价模型优化所述自动驾驶车辆的决策模型和约束规则，并将所述自动驾驶车辆的决策模型和约束规则发送至所述自动驾驶车辆。以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
