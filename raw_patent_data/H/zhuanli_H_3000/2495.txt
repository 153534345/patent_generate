标题title
基于四麦克风的收音方法和收音装置
摘要abst
本发明公开了一种基于四麦克风的收音方法和收音装置。所述方法和装置使用四个麦克风并构成两个麦克风组，两个麦克风组共用其中的两个麦克风，且每个麦克风组中的麦克风构成两个通道以进行降噪处理，分别使用第一麦克风组和第二麦克风组在相对的两个方向上进行收音，以获得降噪后的第一声音信号和第二声音信号。本发明通过四麦克风在两个方向上进行录音，适用于面对面谈话的录音场景，且双通道频谱子带的降噪后的能量值大于稳态底噪的能量，降低了流水声，减小了有用信号的衰减。
权利要求书clms
1.一种基于四麦克风的收音方法，其特征在于包括如下步骤：获取第一麦克风、第二麦克风、第三麦克风和第四麦克风所产生的声音信号，其中：所述第一麦克风和第二麦克风之间的距离，与第一麦克风和第三麦克风之间的距离相等；所述第四麦克风和第二麦克风之间的距离，与第四麦克风和第三麦克风之间的距离相等；所述第一麦克风、第二麦克风、第三麦克风构成第一麦克风组，所述第四麦克风、第二麦克风和第三麦克风构成第二麦克风组，分别使用第一麦克风组和第二麦克风组在相对的两个方向上进行收音，以获得第一声音信号和第二声音信号。2.如权利要求1所述基于四麦克风的收音方法，其特征在于：第一麦克风组和第二麦克风组均具有第一通道和第二通道，且第一麦克风和第二麦克风构成第一麦克风组的第一通道，第一麦克风和第三麦克风构成第一麦克风组的第二通道，第四麦克风和第二麦克风构成第二麦克风组的第一通道，第四麦克风和第三麦克风构成第二麦克风组的第二通道；对于各麦克风组，分别计算第一通道和第二通道的延时相减波束形成信号，其包括第一通道前向形成信号、第一通道后向形成信号、第二通道前向形成信号和第二通道后向形成信号；对各所述延时相减波束形成信号划分成预定数量的频谱子带信号，计算同一通道的前向形成信号和后向形成信号的各相同频谱子带的信号能量Efij和Ebij，f表示前向，b表示后向，i为通道序号，j为频谱子带序号；对于同一麦克风组的前向形成信号和后向形号，根据前向形成信号和后向形成信号的频谱子带信号的能量计算相对能量统计参数；根据所述相对能量统计参数对同一麦克风组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号赋予第一增益G1ij，其中i为通道序号，j为频谱子带序号；计算同一麦克风组的第一通道前向形成信号和第二通道前向形成信号衰减到稳态噪声能量等级时的第二增益G2ij，其中i为通道序号，j为频谱子带序号；对于同一麦克风组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号，比较第一增益G1ij和第二增益G2ij的大小，并取二者的最大值作为该频谱子带信号的通道最后增益Gij；计算同一麦克风组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号的降噪后的能量值E’fij= Efij * Gij，并比较该两个前向形成信号的相同频谱子带的频谱子带信号的能量值E’f1j和E’f2j，将该频谱子带j的最后增益Gj取能量值小的通道的增益；平滑同一麦克风组的频谱子带的增益值后，计算出该频谱子带最后的复数频谱，再逆傅里叶变换得到时域信号，由此得到来自第一麦克风组的第一声音信号和来自第二麦克风组的第二声音信号。3.根据权利要求1所述的收音方法，其特征在于：所述第一麦克风、第二麦克风、第三麦克风两两之间的距离均相等；第四麦克风、第二麦克风、第三麦克风两两之间的距离均相等。4.根据权利要求2所述的收音方法，其特征在于：使用一阶延时相减波束形成算法计算所述延时相减波束形成信号。5.根据权利要求2所述的收音方法，其特征在于：计算所述相对能量统计参数的方法为：初始化相对能量统计参数的值为0，逐一比较前向形成信号和后向形成信号的各相同频谱子带信号的能量，当前向形成信号的频谱子带信号能量较大时，该相对能量统计参数的值加1，否则减1。6.根据权利要求2所述的收音方法，其特征在于：所述方法还包括：对所述逆傅里叶变换得到的时域信号进行稳态降噪处理。7.一种基于四麦克风的收音装置，其特征在于：包括第一麦克风模块、第二麦克风模块、第三麦克风模块、第四麦克风模块和信号合成模块，第一麦克风模块和第二麦克风模块之间的距离，与第一麦克风模块和第三麦克风模块之间的距离相等；所述第四麦克风模块和第二麦克风模块之间的距离，与第四麦克风模块和第三麦克风模块之间的距离相等；所述第一麦克风模块、第二麦克风模块、第三麦克风模块构成第一麦克风模块组，所述第四麦克风模块、第二麦克风模块和第三麦克风模块构成第二麦克风模块组，所述第一麦克风模块组和第二麦克风模块组用于在相对的两个方向上进行收音；所述信号合成模块分别对所述第一麦克风模块组和第二麦克风模块组获得的声音信号进行降噪处理，以获得第一声音信号和第二声音信号。8.如权利要求7所述的基于四麦克风的收音装置，其特征在于：所述第一麦克风模块组和第二麦克风模块组均具有第一通道和第二通道，且第一麦克风模块和第二麦克风模块构成第一麦克风模块组的第一通道，第一麦克风模块和第三麦克风模块构成第一麦克风模块组第二通道，第四麦克风模块和第二麦克风模块构成第二麦克风模块组的第一通道，第四麦克风模块和第三麦克风模块构成第二麦克风模块组的第二通道；所述信号合成模块用于：获取第一麦克风模块、第二麦克风模块、第三麦克风模块和第四麦克风模块所产生的声音信号；对于各麦克风模块组，分别计算第一通道和第二通道的延时相减波束形成信号，其包括第一通道前向形成信号、第一通道后向形成信号、第二通道前向形成信号和第二通道后向形成信号；对各所述延时相减波束形成信号划分成预定数量的频谱子带信号，计算同一通道的前向形成信号和后向形成信号的各相同频谱子带的信号能量Efij和Ebij，f表示前向，b表示后向，i为通道序号，j为频谱子带序号；对于同一麦克风模块组的前向形成信号和后向形号，根据前向形成信号和后向形成信号的频谱子带信号的能量计算相对能量统计参数；根据所述相对能量统计参数对同一麦克风模块组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号赋予第一增益G1ij，其中i为通道序号，j为频谱子带序号；计算同一麦克风模块组的第一通道前向形成信号和第二通道前向形成信号衰减到稳态噪声能量等级时的第二增益G2ij，其中i为通道序号，j为频谱子带序号；对于同一麦克风模块组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号，比较第一增益G1ij和第二增益G2ij的大小，并取二者的最大值作为该频谱子带信号的通道最后增益Gij；计算同一麦克风模块组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号的降噪后的能量值E’fij= Efij * Gij，并比较该两个前向形成信号的相同频谱子带的频谱子带信号的能量值E’f1j和E’f2j，将该频谱子带j的最后增益Gj取能量值小的通道的增益；平滑同一麦克风模块组的频谱子带的增益值后，计算出该频谱子带最后的复数频谱，再逆傅里叶变换得到时域信号，由此得到来自第一麦克风组的第一声音信号和来自第二麦克风组的第二声音信号。9.根据权利要求8所述的收音装置，其特征在于：所述第一麦克风模块、第二麦克风模块、第三麦克风模块两两之间的距离均相等，所述第四麦克风模块、第二麦克风模块、第三麦克风模块两两之间的距离均相等。10.根据权利要求8所述的收音装置，其特征在于：使用一阶延时相减波束形成算法计算所述延时相减波束形成信号。11.根据权利要求8所述的收音装置，其特征在于：计算所述相对能量统计参数的方法为：初始化相对能量统计参数的值为0，逐一比较前向形成信号和后向形成信号的各相同频谱子带信号的能量，当前向形成信号的频谱子带信号能量较大时，该相对能量统计参数的值加1，否则减1。12.根据权利要求8所述的收音装置，其特征在于：所述信号合成模块还用于对所述逆傅里叶变换得到的时域信号进行稳态降噪处理。13.一种电子设备，包括：处理器；以及存储计算机可执行指令的存储器，其特征在于，所述计算机可执行指令在被执行时使所述处理器执行根据权利要求1-6中任一项所述的方法。14.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储一个或多个程序，当所述一个或多个程序被处理器执行时，实现权利要求1-6中任一项所述的方法。
说明书desc
技术领域本发明涉及录音或收音技术，特别是录音或收音过程中对音频信号进行降噪处理，具体而言，涉及一种基于四麦克风的收音方法、装置、电子设备及计算机可读介质。背景技术随着网络技术的发展，实时收取和记录声音的情况越来越多地出现在各种应用场景中。许多电子设备都集成了录音设备，例如手机、便携电脑、智能音箱、高拍仪等。作为例子，高拍仪也有人称为速拍仪，是一种便携办公用品，集成了高速扫描、OCR文字识别以及拍照、录像等功能，实现网络无纸化办公。为了清楚拍摄办公现场情况，及记录重要视频、声音信息，尽可能消除复杂的办公环境的噪声干扰，需要对高拍仪进行进一步改进。公告号为CN205622717U的实用新型专利提出一种带微课录制功能的高拍仪，其上设置有任意调节角度的麦克风，使录音更清晰。然而，对于噪声嘈杂的办公环境，通过调节麦克风角度来提高录音清晰度的效果是有限的。为了降低录音噪声以提高录音质量，现有技术已提出采用多麦克风进行收音后再进行降噪处理。例如，在公告号为US6668062B1的专利中提出一种包括自适应方向性双麦克风系统，其中来自第一和第二麦克风的时域数据被转换为频域数据。然后，处理该频域数据以产生噪声消除信号，该噪声消除信号在逆傅里叶变换块中被转换为噪声消除时域数据。而且，针对面对面交谈的场景，例如对于提供柜台服务的双方，高拍仪或类似的录音设备常设置于二者之间，感兴趣的录音方向是客户和工作人员这两个相对的方向，周围的噪音应当被有效屏蔽，这时，只通过调节麦克风角度和采取常规的降噪方法是无法进行有效的收音和录音的。而且，现有的收音方法所达到的降噪效果仍不能令人满意，有用信号可能会过度衰减，而底噪或流水声不能有效的消除。发明内容本发明旨在解决现有的收音方法和收音装置对于面对面交谈的双方无法进行相对方向上的清晰的收音和录音，以及常规的声音降噪方法在降噪时对有用信号过度衰减以及流水声消除不明显的问题。为了解决上述技术问题，本发明第一方面提出一种基于四麦克风的收音方法，包括如下步骤：获取第一麦克风、第二麦克风、第三麦克风和第四麦克风所产生的声音信号，其中：所述第一麦克风和第二麦克风之间的距离，与第一麦克风和第三麦克风之间的距离相等；所述第四麦克风和第二麦克风之间的距离，与第四麦克风和第三麦克风之间的距离相等；所述第一麦克风、第二麦克风、第三麦克风构成第一麦克风组，所述第四麦克风、第二麦克风和第三麦克风构成第二麦克风组，分别使用第一麦克风组和第二麦克风组在相对的两个方向上进行收音，以获得第一声音信号和第二声音信号。根据本发明的优选实施例，第一麦克风组和第二麦克风组均具有第一通道和第二通道，且第一麦克风和第二麦克风构成第一麦克风组的第一通道，第一麦克风和第三麦克风构成第一麦克风组的第二通道；第四麦克风和第二麦克风构成第二麦克风组的第一通道，第四麦克风和第三麦克风构成第二麦克风组的第二通道；对于各麦克风组，分别计算第一通道和第二通道的延时相减波束形成信号，其包括第一通道前向形成信号、第一通道后向形成信号、第二通道前向形成信号和第二通道后向形成信号；对各所述延时相减波束形成信号划分成预定数量的频谱子带信号，计算同一通道的前向形成信号和后向形成信号的各相同频谱子带的信号能量Efij和Ebij，f表示前向，b表示后向，i为通道序号，j为频谱子带序号；对于同一麦克风组的前向形成信号和后向形号，根据前向形成信号和后向形成信号的频谱子带信号的能量计算相对能量统计参数；根据所述相对能量统计参数对第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号赋予第一增益G1ij，其中i为通道序号，j为频谱子带序号；计算同一麦克风组的第一通道前向形成信号和第二通道前向形成信号衰减到稳态噪声能量等级时的第二增益G2ij，其中i为通道序号，j为频谱子带序号；对于同一麦克风组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号，比较第一增益G1ij和第二增益G2ij的大小，并取二者的最大值作为该频谱子带信号的通道最后增益Gij；计算同一麦克风组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号的降噪后的能量值E’fij= Efij * Gij，并比较该两个前向形成信号的相同频谱子带的频谱子带信号的能量值E’f1j和E’f2j，将该频谱子带j的最后增益Gj取能量值小的通道的增益；平滑同一麦克风组的频谱子带的增益值后，计算出该频谱子带最后的复数频谱，再逆傅里叶变换得到时域信号，由此得到来自第一麦克风组的第一声音信号和来自第二麦克风组的第二声音信号。根据本发明的一种优选实施方式，所述第一麦克风、第二麦克风、第三麦克风两两之间的距离均相等，第四麦克风、第二麦克风、第三麦克风两两之间的距离均相等。根据本发明的一种优选实施方式，使用一阶延时相减波束形成算法计算所述延时相减波束形成信号。根据本发明的一种优选实施方式，计算所述相对能量统计参数值的方法为：初始化相对能量统计参数的值为0，逐一比较前向形成信号和后向形成信号的各相同频谱子带信号的能量，当前向形成信号的频谱子带信号能量较大时，该相对能量统计参数的值加1，否则减1。根据本发明的一种优选实施方式，所述方法还包括：对所述傅里叶变换得到的时域信号进行稳态降噪处理。为了解决上述技术问题，本发明第二方面提出一种基于四麦克风的收音装置，包括第一麦克风模块、第二麦克风模块、第三麦克风模块、第四麦克风模块和信号合成模块，第一麦克风模块和第二麦克风模块之间的距离，与第一麦克风模块和第三麦克风模块之间的距离相等；所述第四麦克风模块和第二麦克风模块之间的距离，与第四麦克风模块和第三麦克风模块之间的距离相等；所述第一麦克风模块、第二麦克风模块、第三麦克风模块构成第一麦克风模块组，所述第四麦克风模块、第二麦克风模块和第三麦克风模块构成第二麦克风模块组，所述第一麦克风模块组和第二麦克风模块组用于在相对的两个方向上进行收音；所述信号合成模块分别对所述第一麦克风模块组和第二麦克风模块组获得的声音信号进行降噪处理，以获得第一声音信号和第二声音信号。根据本发明的优选实施方式，所述第一麦克风模块组和第二麦克风模块组均具有第一通道和第二通道，且第一麦克风模块和第二麦克风模块构成第一麦克风模块组的第一通道，第一麦克风模块和第三麦克风模块构成第一麦克风模块组的第二通道，第四麦克风模块和第二麦克风模块构成第二麦克风模块组的第一通道，第四麦克风模块和第三麦克风模块构成第二麦克风模块组的第二通道；所述信号合成模块用于：获取第一麦克风模块、第二麦克风模块、第三麦克风模块和第四麦克风模块所产生的声音信号；对于各麦克风模块组，分别计算第一通道和第二通道的延时相减波束形成信号，其包括第一通道前向形成信号、第一通道后向形成信号、第二通道前向形成信号和第二通道后向形成信号；对各所述延时相减波束形成信号划分成预定数量的频谱子带信号，计算同一通道的前向形成信号和后向形成信号的各相同频谱子带的信号能量Efij和Ebij，f表示前向，b表示后向，i为通道序号，j为频谱子带序号；对于同一麦克风模块组的前向形成信号和后向形号，根据前向形成信号和后向形成信号的频谱子带信号的能量计算相对能量统计参数；根据所述相对能量统计参数对同一麦克风模块组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号赋予第一增益G1ij，其中i为通道序号，j为频谱子带序号；计算同一麦克风模块组的第一通道前向形成信号和第二通道前向形成信号衰减到稳态噪声能量等级时的第二增益G2ij，其中i为通道序号，j为频谱子带序号；对于同一麦克风模块组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号，比较第一增益G1ij和第二增益G2ij的大小，并取二者的最大值作为该频谱子带信号的通道最后增益Gij；计算同一麦克风模块组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号的降噪后的能量值E’fij= Efij * Gij，并比较该两个前向形成信号的相同频谱子带的频谱子带信号的能量值E’f1j和E’f2j，将该频谱子带j的最后增益Gj取能量值小的通道的增益；平滑同一麦克风模块组的频谱子带的增益值后，计算出该频谱子带最后的复数频谱，再逆傅里叶变换得到时域信号，由此得到来自第一麦克风组的第一声音信号和来自第二麦克风组的第二声音信号。根据本发明的一种优选实施方式，所述第一麦克风模块、第二麦克风模块、第三麦克风模块两两之间的距离均相等，第四麦克风模块、第二麦克风模块、第三麦克风模块两两之间的距离均相等。根据本发明的一种优选实施方式，使用一阶延时相减波束形成算法计算所述延时相减波束形成信号。根据本发明的一种优选实施方式，计算所述相对能量统计参数的方法为：初始化相对能量统计参数的值为0，逐一比较前向形成信号和后向形成信号的各相同频谱子带信号的能量，当前向形成信号的频谱子带信号能量较大时，该相对能量统计参数的值加1，否则减1。根据本发明的一种优选实施方式，所述信号合成模块还用于对所述傅里叶变换得到的时域信号进行稳态降噪处理。为了解决上述技术问题，本发明第三方面提出一种电子设备，其包括处理器以及存储计算机可执行指令的存储器，所述计算机可执行指令在被执行时使所述处理器执行上述的方法。为了解决上述技术问题，本发明第四方面提出一种计算机可读存储介质，该所述计算机可读存储介质存储一个或多个程序，当所述一个或多个程序被处理器执行时，实现上述的方法。本发明通过比较前后向延时相减波束形成信号的频谱子带能量，通过统计的方式来确定频谱子带增益，通过通道频谱子带的降噪后的能量值大于稳态底噪的能量，降低了流水声，减小了有用信号的衰减。附图说明为了使本发明所解决的技术问题、采用的技术手段及取得的技术效果更加清楚，下面将参照附图详细描述本发明的具体实施例。但需声明的是，下面描述的附图仅仅是本发明的示例性实施例的附图，对于本领域的技术人员来讲，在不付出创造性劳动的前提下，可以根据这些附图获得其他实施例的附图。图1是本发明的第一实施例的四麦克风收音的布局图。图2是延时相减波束形成示意图。图3是双麦克风的延时相减波束形成信号的方向性图。图4是本发明的第二实施例的收音装置的模块结构图。图5是根据本发明的一种电子设备的示例性实施例的结构框图。图6是包含本发明的收音装置或执行本发明的收音方法的高拍仪的一个实施例的示意图。图7显示了图6的高拍仪的一个应用场景的示意图。图8是本发明的一个计算机可读介质实施例的示意图。具体实施方式现在将参考附图来更加全面地描述本发明的示例性实施例，虽然各示例性实施例能够以多种具体的方式实施，但不应理解为本发明仅限于在此阐述的实施例。相反，提供这些示例性实施例是为了使本发明的内容更加完整，更加便于将发明构思全面地传达给本领域的技术人员。在符合本发明的技术构思的前提下，在某个特定的实施例中描述的结构、性能、效果或者其他特征可以以任何合适的方式结合到一个或更多其他的实施例中。在对于具体实施例的介绍过程中，对结构、性能、效果或者其他特征的细节描述是为了使本领域的技术人员对实施例能够充分理解。但是，并不排除本领域技术人员可以在特定情况下，以不含有上述结构、性能、效果或者其他特征的技术方案来实施本发明。附图中的流程图仅是一种示例性的流程演示，不代表本发明的方案中必须包括流程图中的所有的内容、操作和步骤，也不代表必须按照图中所显示的顺序执行。例如，流程图中有的操作/步骤可以分解，有的操作/步骤可以合并或部分合并，等等，在不脱离本发明的发明主旨的情况下，流程图中显示的执行顺序可以根据实际情况改变。附图中的框图一般表示的是功能实体，并不一定必然与物理上独立的实体相对应。即，可以采用软件形式来实现这些功能实体，或在一个或多个硬件模块或集成电路中实现这些功能实体，或在不同网络和/或处理器装置和/或微控制器装置中实现这些功能实体。各附图中相同的附图标记表示相同或类似的元件、组件或部分，因而下文中可能省略了对相同或类似的元件、组件或部分的重复描述。还应理解，虽然本文中可能使用第一、第二、第三等表示编号的定语来描述各种器件、元件、组件或部分，但是这些器件、元件、组件或部分不应受这些定语的限制。也就是说，这些定语仅是用来将一者与另一者区分。例如，第一器件亦可称为第二器件，但不偏离本发明实质的技术方案。此外，术语“和/或”、“及/或”是指包括所列出项目中的任一个或多个的所有组合。本发明一方面提出一种基于四麦克风的收音方法。本发明中将四个麦克风分别称为第一麦克风、第二麦克风、第三麦克风和第四麦克风，并且使第一麦克风和第二麦克风的距离，与第一麦克风与第三麦克风的距离相等，使第四麦克风和第二麦克风的距离，与第四麦克风与第三麦克风的距离相等。所述第一麦克风、第二麦克风、第三麦克风构成第一麦克风组，所述第四麦克风、第二麦克风和第三麦克风构成第二麦克风组。通常，这四个麦克见处于同一平面上，由此，第一和第四麦克风所对的方向正好是面对面交谈双方的方向，由此，第一麦克风组和第二麦克风组共用了第二和第三麦克风，可以分别使用第一麦克风组和第二麦克风组在相对的两个方向上进行收音和降噪处理，以获得降噪后的第一声音信号和第二声音信号。这两个声音信号分别来自面对面交谈双方，由此，本发明特别适合于柜台、教学等面对面交谈时进行清晰的录音。同时，本发明对来自面对面交谈双方之外的声音进行降噪处理，特别是环境噪音进行去除和消减。为此，本发明使第一麦克风组和第二麦克风组均构成两个通道。上述两个距离相等能够使得麦克风相减波束形成的两通道信号之间进行有意义的比较，即是根据本发明进行降噪处理的前提条件，这将在后面进一步说明。此外，根据本发明，同一麦克风组的两个通道的麦克风的夹角可以变化，但更优选为取60度，也即，本发明优选为第一麦克风、第二麦克风和第三麦克风两两之间的距离相等，第四麦克风、第二麦克风和第三麦克风两两之间的距离相等，以达到比较好的方向性选择效果和降噪效果。也就是说，本发明优选为四个麦克风构成一个内角为60或120度的菱形。下面，以第一麦克风组为例对于麦克见组内的声音降噪处理方法进行说明。对于第一麦克风组，本发明首先获取第一麦克风、第二麦克风和第三麦克风所产生的声音信号，然后进行波束形成方法进行处理。具体来说，本发明将第一麦克风组的第一麦克风和第二麦克风构成第一通道，第一麦克风和第三麦克风构成第二通道，分别计算所述第一通道和第二通道的延时相减波束形成信号，即包括第一通道前向形成信号、第一通道后向形成信号、第二通道前向形成信号和第二通道后向形成信号。接下来，本发明对各第一麦克风组的所述延时相减波束形成信号划分成预定数量的频谱子带信号，计算同一通道的前向形成信号和后向形成信号的各相同频谱子带的信号能量Efij和Ebij。其中f表示前向，b表示后向，i为通道序号，取1或2，j为频谱子带序号，取值为1至n，n为预定频谱子带数量，为大于等于2的自然数。本发明中，n优选为64~256，更优选为128。本发明创新地提出根据前向形成信号和后向形成信号的频谱子带信号的能量进行比较统计，得到相对能量统计参数，并根据所述相对能量统计参数对第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号赋予第一增益G1ij，其中i为通道序号，j为频谱子带序号。赋予第一增益G1ij时，相对能量统计参数值大越大，给予越大的增益系数，相对能量统计参数统计值越小，给予越小的增益系数，增益系数在0和1之间。本发明中的相对能量统计参数表示当前一段时间内前向能量大还是后向能量大，或者说，表示了声音的前向能量与后向能量之间的相对大小。根据本发明，当声音在前方，前向能量大于后向能量，统计值变大，对应的增益值也大，声音被保留；当声音在后方，后向能量大于前向能量，统计值变小，对应的增益值也变小，声音被抑制。对于第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号，本发明比较第一增益G1ij和第二增益G2ij的大小，并取二者的最大值作为该频谱子带信号的通道最后增益Gij；该第二增益是频谱子带信号衰减到稳态噪声能量等级的增益。即本发明还需要先计算第一通道前向形成信号和第二通道前向形成信号衰减到稳态噪声能量等级时的第二增益G2ij，这可以通过对每一个频谱子带进行稳态噪声降噪的谱减法计算出。然后，本发明计算第一麦克风组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号的降噪后的能量值E’fij = Efij*Gij，并比较该两个前向形成信号的相同频谱子带的频谱子带信号的能量值E’f1j和E’f2j，将该频谱子带j的最后增益Gj取能量值小的通道的增益；取两个通道中前向信号每一个频谱子带中能量低的子带频谱和增益合并，最后输出一个通道。最后，本发明平滑频谱子带的增益值后，计算出该频谱子带最后的复数频谱，再逆傅里叶变换得到时域信号，由此得到来自第一麦克风组的第一声音信号。具体来说，对每一个频谱子带的增益Gj进行前后帧平滑。记平滑后的增益为 Gjn，前一次的平滑增益为Gj，如果Gjn ＞= Gj ，Gjn = a * Gj +* Gj；如果Gjn ＜ Gj ，Gjn = b * Gj + * Gj，其中a和b均为经验常数，a一般在0.2到0.5之前，b一般在0.7到0.9之间。对于第二麦克风组，计算方法与第一麦克风组相同，最后得到来自第二麦克风组的第二声音信号。由此，得到两路声音信号。下面参照附图来描述本发明的具体实施例。图1是本发明的第一实施例的四麦克风收音的布局图。如图1所示，第一麦克风mic1、第二麦克风mic2、第三麦克风mic3两两之间等距排列，第四麦克风mic4、第二麦克风mic2、第三麦克风mic3两两之间等距排列。在该实施例中，其间距均为20mm。第一麦克风mic1、第二麦克风mic2、第三麦克风mic3和第四麦克风mic4可以集成在一个实体设备中，也可以分别实现于不同的实体设备中。上述四个麦克风构成了麦克风阵列，并构成两个麦克风组。所述第一麦克风mic1、第二麦克风mic2、第三麦克风mic3构成第一麦克风组，所述第四麦克风mic4、第二麦克风mic2和第三麦克风mic3构成第二麦克风组。该实施例使用第一麦克风组和第二麦克风组在相对的两个方向上进行收音，以获得第一声音信号和第二声音信号。对于第一麦克风组，第一麦克风mic1与第二麦克风mic2、第一麦克风mic1与第三麦克风mic3分别构成两个一阶延时相减波束形成信号。我们将第一麦克风mic1与第二麦克风mic2构成的收音信号通道称为第一麦克风组的第一通道，将第一麦克风mic1与第三麦克风mic3构成的收音信号通道称为第一麦克风组的第二通道。对于第二麦克风组，第四麦克风mic4与第二麦克风mic2、第四麦克风mic4与第三麦克风mic3分别构成两个一阶延时相减波束形成信号。我们将第四麦克风mic4与第二麦克风mic2构成的收音信号通道称为第二麦克风组的第一通道，将第四麦克风mic4与第三麦克风mic3构成的收音信号通道称为第二麦克风组的第二通道。对于各麦克风组，使用延时τ=d/c，可知第一通道和第二通道分别的收音方向型图都为心型。每个麦克风组的三个麦克风的组合的收音方向为这两个心型的重叠部分。波束形成算法对于不同来向上的声音具有不同的增益。波束形成能良好地应用声音的空间信息，因此对于空间噪声有较好的抑制效果。一阶延时相减是较为简单和经典的波束形成技术，具体做法为使用两路麦克采集语音，将一路输入信号进行延时，然后与另一路信号进行相减。图2是延时相减波束形成示意图。如图2所示，设原始声音信号为y，两路麦克风输入声音信号s1、s2，则增强输出声音信号x为：x= s1-s2，τ=d/c。其中为τ延时值，d为麦克风间距，c为声音在空气中的传播速度。两路麦克风输入信号为：s1= ys2= y∙cosθ)，θ为声音来向角。代入可得：x= y- y∙cosθ-τ)为了分析方便，令y=，则可写为：则麦克风阵列输出的功率谱为：当麦克风距离较小时，进行Taylor展开，使用cosφ=1-φ2/2，可得到：由上式可以看出，麦克风阵列的方向性图是与延时值τ有关。当τ=d/c时，公式变为：当θ=0°时，增益最大；当θ=180°时，增益最小。此时方向形图称为心型图，如图3所示。本实施例中，第一麦克风组的第一麦克风mic1与第二麦克风mic2、第一麦克风mic1与第三麦克风mic3分别构成两个一阶延时相减波束形成信号。第二麦克风组的第四麦克风mic4与第二麦克风mic2、第四麦克风mic1与第三麦克风mic3分别构成两个一阶延时相减波束形成信号。使用延时τ=d/c，这样第一麦克风mic1与第二麦克风mic2、第一麦克风mic1与第三麦克风mic3、第四麦克风mic4与第二麦克风mic2、第四麦克风mic1与第三麦克风mic3分别的收音方向型图都为心型。同一麦克风组的三个麦克风的组合的收音方向为这两个心型的重叠部分。本发明使用一阶延时相减波束形成算法分别计算各麦克风组的第一通道、第二通道的前向和后向的延时相减波束形成信号的频带能量。该实施例对于所获取的各声音信号均划分了128个频谱子带信号。在其他的实施方式中，也可以划分成其他预定数量的频谱子带信号。然后，计算同一通道的前向形成信号和后向形成信号的各相同频谱子带的信号能量Efij和Ebij。其中E表示能量，f表示前向，b表示后向，i为通道序号，取1或2，分别代表第一通道和第二通道。j为频谱子带序号，取值为1至128。根据前向形成信号和后向形成信号的频谱子带信号的能量计算相对能量统计参数，并根据所述相对能量统计参数对第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号赋予第一增益G1ij，其中i为通道序号，j为频谱子带序号。如前所述，本发明中的相对能量统计参数表示当前一段时间内前向能量大还是后向能量大，或者说，表示了声音的前向能量与后向能量之间的相对大小。根据本发明，当声音在前方，前向能量大于后向能量，统计值变大，对应的增益值也大，声音被保留；当声音在后方，后向能量大于前向能量，统计值变小，对应的增益值也变小，声音被抑制。对于各麦克风组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号，本发明比较第一增益G1ij和第二增益G2ij的大小，并取二者的最大值作为该频谱子带信号的通道最后增益Gij；该第二增益是频谱子带信号衰减到稳态噪声能量等级的增益。即本发明还需要先计算第一通道前向形成信号和第二通道前向形成信号衰减到稳态噪声能量等级时的第二增益G2ij。然后，本发明计算各麦克风组的第一通道前向形成信号和第二通道前向形成信号的各频谱子带信号的降噪后的能量值E’fij = Efij*Gij，并比较该两个前向形成信号的相同频谱子带的频谱子带信号的能量值E’f1j和E’f2j，将该频谱子带j的最后增益Gj取能量值小的通道的增益；最后，本发明平滑同一麦克风组的频谱子带的增益值后，计算出该频谱子带最后的复数频谱，再逆傅里叶变换得到时域信号，由此得到来自第一麦克风组的第一声音信号和来自第二麦克风组的第二声音信号。本领域技术人员可以理解，实现上述实施例的全部或部分步骤被实现为由数据处理设备执行的程序，即计算机程序。在该计算机程序被执行时，可以实现本发明提供的上述方法。而且，所述的计算机程序可以存储于计算机可读存储介质中，该存储介质可以是磁盘、光盘、ROM、RAM等可读存储介质，也可以是多个存储介质组成的存储阵列，例如磁盘或磁带存储阵列。所述的存储介质不限于集中式存储，其也可以是分布式存储，例如基于云计算的云存储。下面描述本发明的装置实施例，该装置可以用于执行本发明的方法实施例。对于本发明装置实施例中描述的细节，应视为对于上述方法实施例的补充；对于在本发明装置实施例中未披露的细节，可以参照上述方法实施例来实现。图4是本发明的第二实施例的收音装置的模块结构图。如图4所示，该收音装置包括第一麦克风模块、第二麦克风模块、第三麦克风模块、第四麦克风模块和信号合成模块。第一麦克风模块、第二麦克风模块、第三麦克风模块和第四麦克风模块用于感应声音以产生声音信号，且各麦克风模块两两之间的距离均相等。与第一实施例相似，第一麦克风模块和第二麦克风模块构成第一麦克见模块组的第一通道，第一麦克风模块和第三麦克风模块构成第一麦克见模块组的第二通道，第四麦克风模块和第二麦克风模块构成第二麦克见模块组的第一通道，第四麦克风模块和第三麦克风模块构成第二麦克见模块组的第二通道，各麦克风模块产生的声音信号均输入信号合成模块。信号合成模块获取第一麦克风模块、第二麦克风模块、第三麦克风模块和第四麦克风模块所产生的声音信号并对信号进行处理以产生最终处理过的声音信号，该处理过的声音信号对声音信号中的噪声进行消除或减弱，因此也可以称为增强的声音信号。总的来说，信号合成模块用于执行本发明第一实施例的收音方法中的各个步骤。即所述信号合成模块分别对所述第一麦克风模块组和第二麦克风模块组获得的声音信号进行降噪处理，以获得第一声音信号和第二声音信号。为了执行各个步骤，该信号合成模块可以由多个不同功能的子模块来实现。本领域技术人员可以理解，上述装置实施例中的各模块可以按照描述分布于装置中，也可以进行相应变化，分布于不同于上述实施例的一个或多个装置中。上述实施例的模块可以合并为一个模块，也可以进一步拆分成多个子模块。下面描述本发明的电子设备实施例，该电子设备可以视为对于上述本发明的方法和装置实施例的实体形式的实施方式。对于本发明电子设备实施例中描述的细节，应视为对于上述方法或装置实施例的补充；对于在本发明电子设备实施例中未披露的细节，可以参照上述方法或装置实施例来实现。图5是根据本发明的一种电子设备的示例性实施例的结构框图。图5显示的电子设备仅仅是一个示例，不应对本发明实施例的功能和使用范围带来任何限制。如图5所示，该示例性实施例的电子设备510以通用数据处理设备的形式表现。电子设备510的组件可以包括但不限于：至少一个处理单元511、至少一个存储单元512、连接不同系统组件的总线516、显示单元513等。其中，所述存储单元512存储有计算机可读程序，其可以是源程序或都只读程序的代码。所述程序可以被处理单元511执行，使得所述处理单元511执行本发明各种实施方式的步骤。例如，所述处理单元511可以执行第一实施例的步骤。所述存储单元512可以包括易失性存储单元形式的可读介质，例如随机存取存储单元5121和/或高速缓存存储单元5122，还可以进一步包括只读存储单元5123。所述存储单元512还可以包括具有一组程序模块5125的程序/实用工具5124，这样的程序模块5125包括但不限于：操作系统、一个或者多个应用程序、其它程序模块以及程序数据，这些示例中的每一个或某种组合中可能包括网络环境的实现。总线516可以为表示几类总线结构中的一种或多种，包括存储单元总线或者存储单元控制器、外围总线、图形加速端口、处理单元或者使用多种总线结构中的任意总线结构的局域总线。电子设备510也可以与一个或多个外部设备520通信，使得用户能经由这些外部设备520与该电子设备510交互，和/或使得该电子设备510能与一个或多个其它数据处理设备进行通信。这种通信可以通过输入/输出接口514进行，还可以通过网络适配器515与一个或者多个网络，广域网和/或公共网络，例如因特网）进行。网络适配器515可以通过总线516与电子设备510的其它模块通信。应当明白，尽管图中未示出，电子设备510中可使用其它硬件和/或软件模块，包括但不限于：微代码、设备驱动器、冗余处理单元、外部磁盘驱动阵列、RAID系统、磁带驱动器以及数据备份存储系统等。图6是包含本发明的收音装置或执行本发明的收音方法的高拍仪的一个实施例的示意图。如图6所示，该实施例的高拍仪的底座上设置有4个收音孔，收音孔内部分别安装有第一麦克风mic1、第二麦克风mic2、第三麦克风mic3和第四麦克风mic4。四个麦克风由麦克风模块和相应的信号处理电路组成，信号处理电路组成信号合成模块，以执行本发明的收音方法的各步骤，各麦克风模块和信号合成模块在前面的收音装置实施例中已有说明，在此不再赘述。四个麦克风排列成菱形，且第二麦克风mic2和第三麦克风mic3的距离与菱形各边的长度相等。该四个麦克见根据本发明的前述方法进行收音，可以分别对第一麦克风mic1、第四麦克风mic4所指向的方向为主方向进行录音。图7显示了图6的高拍仪的一个应用场景的示意图。该应用场景例如是办事柜台，如图7所示，高拍仪2放置在柜台1上，A和D分别是办事双方的所处的位置，例如位置A是客户的座位所在的位置，位置D是柜台办事人员的座位所在的位置，客户和办事人员进行面对面的沟通。在这种情形下，高拍仪需要对客户和办事人员的语音进行收音和记录，但是需要对来自B和C方向上的噪音或干扰语音进宪屏蔽。通过包含有本发明的收音装置的图6所示的高拍仪，将第一麦克风mic1和第四麦克风mic4分别朝向位置A和位置D，通过本发明的上述收音方法，可以分别对来自位置A和位置D的方向上的声音进行收音，并且减弱或屏蔽来自位置B、C方向的声音。由于本发明在录音时可以同时双通道进行独立录音，A和D两个方向录音不串音，而B、C方向的两侧环境音被屏蔽和减弱，有效提提高了收音质量，实现单个柜台录音不串扰，客户工作人员分离录音不串扰。图8是本发明的一个计算机可读介质实施例的示意图。如图8所示，所述计算机程序可以存储于一个或多个计算机可读介质上。计算机可读介质可以是可读信号介质或者可读存储介质。可读存储介质例如可以为但不限于电、磁、光、电磁、红外线、或半导体的系统、装置或器件，或者任意以上的组合。可读存储介质的更具体的例子包括：具有一个或多个导线的电连接、便携式盘、硬盘、随机存取存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑盘只读存储器、光存储器件、磁存储器件、或者上述的任意合适的组合。当所述计算机程序被一个或多个数据处理设备执行时，使得该计算机可读介质能够实现本发明的上述方法。通过以上的实施方式的描述，本领域的技术人员易于理解，本发明描述的示例性实施例可以通过软件实现，也可以通过软件结合必要的硬件的方式来实现。因此，根据本发明实施方式的技术方案可以以软件产品的形式体现出来，该软件产品可以存储在一个计算机可读的存储介质中或网络上，包括若干指令以使得一台数据处理设备执行根据本发明的上述方法。所述计算机可读存储介质可以包括在基带中或者作为载波一部分传播的数据信号，其中承载了可读程序代码。这种传播的数据信号可以采用多种形式，包括但不限于电磁信号、光信号或上述的任意合适的组合。可读存储介质还可以是可读存储介质以外的任何可读介质，该可读介质可以发送、传播或者传输用于由指令执行系统、装置或者器件使用或者与其结合使用的程序。可读存储介质上包含的程序代码可以用任何适当的介质传输，包括但不限于无线、有线、光缆、RF等等，或者上述的任意合适的组合。可以以一种或多种程序设计语言的任意组合来编写用于执行本发明操作的程序代码，所述程序设计语言包括面向对象的程序设计语言—诸如Java、C++等，还包括常规的过程式程序设计语言—诸如“C”语言或类似的程序设计语言。程序代码可以完全地在用户计算设备上执行、部分地在用户设备上执行、作为一个独立的软件包执行、部分在用户计算设备上部分在远程计算设备上执行、或者完全在远程计算设备或服务器上执行。在涉及远程计算设备的情形中，远程计算设备可以通过任意种类的网络，包括局域网或广域网，连接到用户计算设备，或者，可以连接到外部计算设备。综上所述，本发明可以执行计算机程序的方法、装置、电子设备或计算机可读介质来实现。可以在实践中使用微处理器或者数字信号处理器等通用数据处理设备来实现本发明的一些或者全部功能。以上所述的具体实施例，对本发明的目的、技术方案和有益效果进行了进一步详细说明，应理解的是，本发明不与任何特定计算机、虚拟装置或者电子设备固有相关，各种通用装置也可以实现本发明。以上所述仅为本发明的具体实施例而已，并不用于限制本发明，凡在本发明的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
