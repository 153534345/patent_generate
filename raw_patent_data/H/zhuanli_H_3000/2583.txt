标题title
一种安检系统运行参数校正同步的方法及装置
摘要abst
本发明涉及安检系统技术领域，涉及一种安检系统运行参数校正同步的方法及装置。在第i个参数下发周期的时间范围内，包括以下步骤：执行对第一安检系统运行参数和第二安检系统运行参数的参数比对，直接将第一安检系统运行参数或第二安检系统运行参数下发至车站设备，将第一安检系统运行参数和第二安检系统运行参数作为待选参数，获取对待选参数的确认，下发确认的待选参数至车站设备。本发明利用在线网启运准备时间段或线网启运准备时间段的某个时刻实施主动拉取参数、并判定被动接收的下发参数和主动拉取参数的状态从而确定需要对比的参数，再根据对比的结果确定参数，从而提高保障安检系统运行参数的正确下发。
权利要求书clms
1.一种安检系统运行参数校正同步的方法，其特征在于，在第i个参数下发周期的时间范围内，包括以下步骤：S1.执行对第一安检系统运行参数和第二安检系统运行参数的参数比对，若参数比对结果为一致，则转S2，若参数比对结果为不一致，则转S3，S2.直接将第一安检系统运行参数或第二安检系统运行参数下发至车站设备，S3.将第一安检系统运行参数和第二安检系统运行参数作为待选参数，获取对待选参数的确认，下发确认的待选参数至车站设备。2.根据权利要求1所述的一种安检系统运行参数校正同步的方法，其特征在于，还包括以下步骤：S0A.获取来自线网中心参数服务器于A时下发的下发参数、并存储该下发参数；S0B.于B时向线网中心参数服务器发出发送参数拉取请求、并获得对应的响应参数、并存储该响应参数；S0C.根据下发参数、响应参数确定第一安检系统运行参数、第二安检系统运行参数。3.根据权利要求2所述的一种安检系统运行参数校正同步的方法，其特征在于，根据下发参数、响应参数确定第一安检系统运行参数、第二安检系统运行参数的确定过程为：根据下发参数的时间戳按新到旧排序，将排序为第一的下发参数作为最新的下发参数，判定最新的下发参数的时间戳是否在第i个参数下发周期的时间范围内，若是，则将最新的下发参数作为第一安检系统运行参数，判定当前响应参数是否收到，若是，则将当前响应参数作为第二安检系统运行参数。4.根据权利要求2所述的一种安检系统运行参数校正同步的方法，其特征在于，根据下发参数、响应参数确定第一安检系统运行参数、第二安检系统运行参数的确定过程为：根据下发参数的时间戳按新到旧排序，将排序为第一的下发参数作为最新的下发参数，判定最新的下发参数的时间戳是否在第i个参数下发周期的时间范围内，若是，则将最新的下发参数作为第一安检系统运行参数；判定当前响应参数是否收到，若否，将排序为第二的下发参数作第二安检系统运行参数。5.根据权利要求2所述的一种安检系统运行参数校正同步的方法，其特征在于，根据下发参数、响应参数确定第一安检系统运行参数、第二安检系统运行参数的确定过程为：根据下发参数的时间戳按新到旧排序，将排序为第一的下发参数作为最新的下发参数，判定最新的下发参数的时间戳是否在第i个参数下发周期的时间范围内，若否，则将最新的下发参数作为第一安检系统运行参数；判定当前响应参数是否收到，若是，则将当前响应参数作为第二安检系统运行参数。6.根据权利要求2所述的一种安检系统运行参数校正同步的方法，其特征在于，A时、B时为第i个参数下发周期的时间范围内的2个不同的时段或时刻，这2个不同时段或时刻互不重合。7.根据权利要求2所述的一种安检系统运行参数校正同步的方法，其特征在于，A时为线网停运时间段或线网停运时间段内的某个时刻，B时为线网启运准备时间段或线网启运准备时间段的某个时刻。8.根据权利要求1-7中任意一项所述的一种安检系统运行参数校正同步的方法，其特征在于，第i个参数下发周期的时间范围为24小时。9.根据权利要求1-7中任意一项所述的一种安检系统运行参数校正同步的方法，其特征在于，所述车站设备为安检系统的设备。10.一种安检系统运行参数校正同步的装置，其特征在于，包括：一个或多个处理器；存储单元，用于存储一个或多个程序，当所述一个或多个程序被所述一个或多个处理器执行时，能使得所述一个或多个处理器实现权利要求1-9中任意一项所述的一种安检系统运行参数校正同步的方法。
说明书desc
技术领域本发明涉及安检系统技术领域，具体涉及一种安检系统运行参数校正同步的方法及装置。背景技术在地铁或高铁运维的过程中，一般都设置有安检系统，安检系统一般包括设置在车站的X光机、识图设备、复检确认设备等。一般的，在一个运行周期结束后，这些设备都会关闭或处于待机状态，一般需要在一个参数下发周期内获得对应的参数，这些设备按照新的参数进行运行。传统的参数下发周期是指在线网停运时间段或线网停运时间段内的某个时刻，这个时间段或时刻是一个运行周期内的一个空窗期，空窗期内一般要开展设备的检修、替换、以及本发明中的参数下发。由于在该空窗期会同时开展检修、替换和参数下发工作，因此，某车站具有较高概率无法获得下发的参数，例如在开展车站的网络测试或检修时，一般会对该车站的网络进行断网、恢复、再断网等一些复杂操作，若在下发参数时出现断网等情形，则很容易导致下发参数未成功。因此，在本领域中，亟待一种解决上述问题的方法，可以提高保障安检系统运行参数正确下发。发明内容本发明的目的在于提供一种安检系统运行参数校正同步的方法及装置，本发明利用在线网启运准备时间段或线网启运准备时间段的某个时刻实施主动拉取参数、并判定被动接收的下发参数和主动拉取参数的状态从而确定需要对比的参数，再根据对比的结果确定参数，从而提高保障安检系统运行参数的正确下发。本发明的技术方案具体如下：一方面，一种安检系统运行参数校正同步的方法，包括以下步骤：一种安检系统运行参数校正同步的方法，在第i个参数下发周期的时间范围内，包括以下步骤：S1.执行对第一安检系统运行参数和第二安检系统运行参数的参数比对，若参数比对结果为一致，则转S2，若参数比对结果为不一致，则转S3，S2.直接将第一安检系统运行参数或第二安检系统运行参数下发至车站设备，S3.将第一安检系统运行参数和第二安检系统运行参数作为待选参数，获取对待选参数的确认，下发确认的待选参数至车站设备。进一步的，还包括以下步骤：S0A.获取来自线网中心参数服务器于A时下发的下发参数、并存储该下发参数；S0B.于B时向线网中心参数服务器发出发送参数拉取请求、并获得对应的响应参数、并存储该响应参数；S0C.根据下发参数、响应参数确定第一安检系统运行参数、第二安检系统运行参数。进一步的，根据下发参数、响应参数确定第一安检系统运行参数、第二安检系统运行参数的确定过程为：根据下发参数的时间戳按新到旧排序，将排序为第一的下发参数作为最新的下发参数，判定最新的下发参数的时间戳是否在第i个参数下发周期的时间范围内，若是，则将最新的下发参数作为第一安检系统运行参数，判定当前响应参数是否收到，若是，则将当前响应参数作为第二安检系统运行参数。进一步的，根据下发参数、响应参数确定第一安检系统运行参数、第二安检系统运行参数的确定过程为：根据下发参数的时间戳按新到旧排序，将排序为第一的下发参数作为最新的下发参数，判定最新的下发参数的时间戳是否在第i个参数下发周期的时间范围内，若是，则将最新的下发参数作为第一安检系统运行参数；判定当前响应参数是否收到，若否，将排序为第二的下发参数作第二安检系统运行参数。进一步的，根据下发参数、响应参数确定第一安检系统运行参数、第二安检系统运行参数的确定过程为：根据下发参数的时间戳按新到旧排序，将排序为第一的下发参数作为最新的下发参数，判定最新的下发参数的时间戳是否在第i个参数下发周期的时间范围内，若否，则将最新的下发参数作为第一安检系统运行参数；判定当前响应参数是否收到，若是，则将当前响应参数作为第二安检系统运行参数。进一步的，A时、B时为第i个参数下发周期的时间范围内的2个不同的时段或时刻，这2个不同时段或时刻互不重合。进一步的，A时为线网停运时间段或线网停运时间段内的某个时刻，B时为线网启运准备时间段或线网启运准备时间段的某个时刻。进一步的，第i个参数下发周期的时间范围为24小时。进一步的，所述车站设备为安检系统的设备。另一方面，一种安检系统运行参数校正同步的装置，其特征在于，包括：一个或多个处理器；存储单元，用于存储一个或多个程序，当所述一个或多个程序被所述一个或多个处理器执行时，能使得所述一个或多个处理器实现所述的一种安检系统运行参数校正同步的方法。本发明的有益效果为：本发明利用在线网启运准备时间段或线网启运准备时间段的某个时刻实施主动拉取参数，即在被动接收下发参数的基础上，在线网启运准备时间段或线网启运准备时间段的某个时刻设置触发主动拉取参数程序，因为在该时间段或该时刻，网络大概率已恢复，以此可以获得来自2个不同时间段的参数，从而提高基准数据的来源方式，以时间划分获取2个互为冗余的参数，从而提高系统的可靠性。本发明需要判定被动接收的下发参数和主动拉取参数的状态从而确定需要对比的参数，根据下发参数和拉取参数的状态可以对不同时段的网络状态进行判定，若网络状态良好，一般可以保障2个时段的参数为一致的，可以自动运算一致后直接下发，无需人工干预，若网络状态不好，其中任意1个时段时的网络故障时，可以确定选出最佳的2个参数作为待选参数，可将最佳参数推荐给人工，人工选择最佳后，再执行下发，从而提高保障安检系统运行参数的正确下发。附图说明图1为本发明的交互流程图。图2为本发明的数据流向图。具体实施方式下面结合实施例及附图，对本发明作进一步的详细说明，但本发明的实施方式不限于此。实施例1如图1所示，本实施例提供了一种安检系统运行参数校正同步的方法，在第i个参数下发周期的时间范围内，包括以下步骤：S1.执行对第一安检系统运行参数和第二安检系统运行参数的参数比对，若参数比对结果为一致，则转S2，若参数比对结果为不一致，则转S3，S2.直接将第一安检系统运行参数或第二安检系统运行参数下发至车站设备，S3.将第一安检系统运行参数和第二安检系统运行参数作为待选参数，获取对待选参数的确认，下发确认的待选参数至车站设备。相比现有技术，本实施例将待下发的运行参数划分为第一安检系统运行参数和第二安检系统运行参数，并根据第一安检系统运行参数和第二安检系统运行参数的一致性来确定是否自动下发还是由人工选择下发，从而提高运行参数的下发的正确性。同时，这里的第一安检系统运行参数和第二安检系统运行参数是来自于不同时段或时刻的运行参数，它们的组合存在多样性，可以为提高运行参数的下发的正确性提供支持。以实际场景为例，进行以下说明：车站每天的客运任务完成后，即线网停运时间段或线网停运时间段内的某个时刻，线网中心参数服务器每日定时下发参数，车站的车站控制台会接收线网中心参数服务器的下发参数，以此循环。下发参数会被本地存储，即保存在车站控制台，车站控制台是一种车站服务器。现有技术中，一般直接利用车站控制台向车站设备直接下发参数。这种模式存在上述技术问题。为了解决上述问题，本发明在车站控制台内设置了主动拉取参数的程序。具体的，每天开始客运任务时，一般设置在线网启运准备时间段或线网启运准备时间段的某个时刻，车站控制台定时拉取线网中心参数服务器的参数。正常情况下，线网中心参数服务器每日定时下发参数时没有网络故障，车站控制台定时拉取线网中心参数服务器时没有网络故障；因此，可以将线网中心参数服务器每日定时下发参数作为第一安检系统运行参数，车站控制台定时拉取线网中心参数服务器的参数作为第二安检系统运行参数，一般来说，这2个参数仅是获取的时间不同，因此比对结果一般为一致，车站控制台一般会自动择一后将参数下发至车站设备，若比对结果为不一致时，则需人工择一后下发至车站设备。异常情况下，线网中心参数服务器每日定时下发参数、车站控制台定时拉取线网中心参数服务器的时间段内，即一个参数下发周期的时间范围内，一般会出现以下2个场景情况：如果线网中心参数服务器每日定时下发参数时网络故障，参数没有成功下发，本地存储保存的当前最新下发参数则为前一天的下发参数，即上一个参数下发周期所对应的下发参数，这时候当车站控制台定时拉取线网中心参数服务器时，这2个参数可能并不一致，这个时候车站控制台就会让管理员手动选择参数优先级，所选定的参数最后再下发至车站设备。如果线网中心参数服务器每日定时下发参数时没有网络故障，成功下发参数，但是，在车站控制台定时拉取线网中心参数服务器时出现网络故障，则拉取参数失败时，则没有当前下拉参数，即没有当前下拉请求所响应的响应参数，车站会将最新的下发参数与次新的下发参数作对比，一般的是将当天的下发参数与前一天的下发参数做对比，若一致，则说2天的数据没有变化，则可以自动直接择一下发，若不一致，则让车站管理员选取参数优先级。这样就很好的避免前面所属问题。具体的，下面将从数据流向角度进一步的讲述如何获得第一安检系统运行参数和第二安检系统运行参数。参见图2，进一步的，还包括以下步骤：S0A.获取来自线网中心参数服务器于A时下发的下发参数、并存储该下发参数；S0B.于B时向线网中心参数服务器发出发送参数拉取请求、并获得对应的响应参数、并存储该响应参数；S0C.根据下发参数、响应参数确定第一安检系统运行参数、第二安检系统运行参数。其中，获得下发参数和获得响应参数的过程为每日或上述每个参数下发周期循环。根据2个不同时所获得下发参数和响应参数可以进一步的确定这2个不同时下的网络状态，则可以根据网络状态从下发参数和响应参数选择出第一安检系统运行参数、第二安检系统运行参数。具体的，根据上述场景描述的原理逻辑，可以将其具体分解三种情况，分别为正常模式、异常模式第一种、异常模式第二种。参见图2，在正常模式下：根据下发参数、响应参数确定第一安检系统运行参数、第二安检系统运行参数的确定过程为：根据下发参数的时间戳按新到旧排序，将排序为第一的下发参数作为最新的下发参数，判定最新的下发参数的时间戳是否在第i个参数下发周期的时间范围内，若是，则将最新的下发参数作为第一安检系统运行参数，判定当前响应参数是否收到，若是，则将当前响应参数作为第二安检系统运行参数。这种模式下，2个不同时所获得参数过程中均没有网络故障。可以以2个参数过程获得的各自最新参数为基准进行确定运行参数。参见图2，异常模式第一种：根据下发参数、响应参数确定第一安检系统运行参数、第二安检系统运行参数的确定过程为：根据下发参数的时间戳按新到旧排序，将排序为第一的下发参数作为最新的下发参数，判定最新的下发参数的时间戳是否在第i个参数下发周期的时间范围内，若是，则将最新的下发参数作为第一安检系统运行参数；判定当前响应参数是否收到，若否，将排序为第二的下发参数作第二安检系统运行参数。这种模式下，当前响应参数没有收到，则说明下拉时出现了网络故障，则可以调用最新的2个相邻的下发参数为基准进行确定运行参数。参见图2，异常模式第二种：根据下发参数、响应参数确定第一安检系统运行参数、第二安检系统运行参数的确定过程为：根据下发参数的时间戳按新到旧排序，将排序为第一的下发参数作为最新的下发参数，判定最新的下发参数的时间戳是否在第i个参数下发周期的时间范围内，若否，则将最新的下发参数作为第一安检系统运行参数；判定当前响应参数是否收到，若是，则将当前响应参数作为第二安检系统运行参数。这种模式下，可以根据最新的下发参数的时间戳是否在第i个参数下发周期的时间范围内来判断是否本周期下发成功，一般的最新的下发参数具有时间戳，可以进行验证，从而判定下发过程是否出现故障，若故障，则可以利用当前最新的下发参数与当前响应参数为基准进行确定运行参数，需要说明的是：此处的最新的下发参数一般为上一个参数下发周期所获得的下发参数，即第i-1个参数下发周期时，获得的第个i-1个下发参数。进一步的，A时、B时为第i个参数下发周期的时间范围内的2个不同的时段或时刻，这2个不同时段或时刻互不重合。进一步的，A时为线网停运时间段或线网停运时间段内的某个时刻，B时为线网启运准备时间段或线网启运准备时间段的某个时刻。进一步的，第i个参数下发周期的时间范围为24小时。进一步的，所述车站设备为安检系统的设备。实施例2如图1和图2，一种安检系统运行参数校正同步的装置，包括：一个或多个处理器；存储单元，用于存储一个或多个程序，当所述一个或多个程序被所述一个或多个处理器执行时，能使得所述一个或多个处理器实现所述的一种安检系统运行参数校正同步的方法。可以理解的是，以上实施方式仅仅是为了说明本发明/发明的原理而采用的示例性实施方式，然而本发明/发明并不局限于此。对于本领域内的普通技术人员而言，在不脱离本发明/发明的精神和实质的情况下，可以做出各种变型和改进，这些变型和改进也视为本发明/发明的保护范围。
