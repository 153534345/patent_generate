标题title
基于卡模拟方案的NFC数字钥匙移动设备适配方法及装置
摘要abst
本发明公开了一种基于卡模拟方案的NFC数字钥匙移动设备适配方法，通过将终端作为读取设备，在锁内设置nfc卡模拟模块，nfc卡模拟模块初始化时写入锁的生产商秘钥和平台服务密钥，需要进行验证时终端读取nfc卡模拟模块的数据，nfc卡模拟模块会对数据进行二次加密，读取到数据后提交到服务器端，服务器端进行二次解密得到明文数据再进行数据验证。服务器返回数据时也将数据进行二次加密，通过手机把加密数据传输给nfc卡模拟模块，卡模拟模块对接收到的数据进行二次解密得到明文后执行指定的业务逻辑，本发明开卡流程简单提升了用户体检，方案落地实现简单不需要向手机产商申请nfc权限，扩展了使用范围。
权利要求书clms
1.一种基于卡模拟方案的NFC数字钥匙移动设备适配方法，应用于终端，其特征在于，所述方法包括：发送开锁指令给锁模块，并与锁模块建立NFC连接，发送用户第一编号给锁模块；所述锁模块生成第一随机数据，并使用平台密钥对所述第一随机数据进行第一加密，得到第一加密数据，使用锁商密钥对所述第一加密数据进行第二加密，得到第二加密数据；接收所述锁模块发送的所述第二加密数据，并将所述第二加密数据和用户标识发送给锁商；锁商通过所述用户标识获取用户第二编号，并通过所述用户第二编号获取对应锁商密匙，通过所述锁商密匙对所述第二加密数据进行解密，得到第一锁商解密数据并将所述第一锁商解密数据发送给平台，平台接收所述锁商发送的所述第一锁商解密数据和所述用户第二编号，并通过所述用户第二编号获取对应平台密匙，通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据；其中，所述平台判断所述第二编号是否与所述第一编号相同，若是，判断所述平台解密数据是否与所述第一随机数据相同，若是，则平台接收锁商的获取第一开锁指令请求，通过平台密钥将所述平台解密数据进行第三加密得到第三加密数据，将第三加密数据作为第一开锁指令发送给锁商；接收第四加密数据作为第二开锁指令，将所述第二开锁指令发送给锁模块；锁模块接收所述第二开锁指令，采用锁商密匙对所述第二开锁指令进行解密，得到第二锁商解密数据，采用平台密匙对所述第二锁商解密数据进行解密，得到第二平台解密数据；其中，锁商接收所述第三加密数据并通过锁商密钥对所述第三加密数据进行第四加密，得到第四加密数据，所述第四加密数据为所述第二开锁指令；若所述第二平台解密数据与所述第一随机数据相同，则接收开锁成功信号。2.根据权利要求1所述的方法，其特征在于，所述锁模块包括nfc卡模拟模块，所述终端有nfc读取功能。3.根据权利要求1所述的方法，其特征在于，所述通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据后，锁商向平台发送第一开锁指令请求。4.根据权利要求1所述的方法，其特征在于，所述判断所述第二编号是否与所述第一编号相同，若否，则发送开锁失败给终端；判断所述平台解密数据是否与所述第一随机数据相同，若否，则发送开锁失败给终端。5.根据权利要求1所述的方法，其特征在于，所述若所述第二平台解密数据与所述第一随机数据相同，则接收开锁成功信号具体为：锁模块验证所述第二平台解密数据与所述第一随机数据是否相同，若相同，则发送开锁成功信号给终端。6.根据权利要求5所述的方法，其特征在于，所述锁模块验证所述第二平台解密数据与所述第一随机数据是否相同，若不同，则发送开锁失败信号给终端。7.一种基于卡模拟方案的NFC数字钥匙移动设备适配装置，其特征在于，所述装置包括：NFC连接模块：用于发送开锁指令给锁模块，并与锁模块建立NFC连接，发送用户第一编号给锁模块；所述锁模块生成第一随机数据，并使用平台密钥对所述第一随机数据进行第一加密，得到第一加密数据，使用锁商密钥对所述第一加密数据进行第二加密，得到第二加密数据；第一发送模块：用于接收所述锁模块发送的所述第二加密数据，并将所述第二加密数据和用户标识发送给锁商；锁商模块：用于锁商通过所述用户标识获取用户第二编号，并通过所述用户第二编号获取对应锁商密匙，通过所述锁商密匙对所述第二加密数据进行解密，得到第一锁商解密数据并将所述第一锁商解密数据发送给平台，平台接收所述锁商发送的所述第一锁商解密数据和所述用户第二编号，并通过所述用户第二编号获取对应平台密匙，通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据；其中，所述平台判断所述第二编号是否与所述第一编号相同，若是，判断所述平台解密数据是否与所述第一随机数据相同，若是，则平台接收锁商的获取第一开锁指令请求，通过平台密钥将所述平台解密数据进行第三加密得到第三加密数据，将第三加密数据作为第一开锁指令发送给锁商；接收模块：用于接收第四加密数据作为第二开锁指令，将所述第二开锁指令发送给锁模块；锁模块接收所述第二开锁指令，采用锁商密匙对所述第二开锁指令进行解密，得到第二锁商解密数据，采用平台密匙对所述第二锁商解密数据进行解密，得到第二平台解密数据；其中，锁商接收所述第三加密数据并通过锁商密钥对所述第三加密数据进行第四加密，得到第四加密数据，所述第四加密数据为所述第二开锁指令；开锁成功模块：用于若所述第二平台解密数据与所述第一随机数据相同，则接收开锁成功信号。8.根据权利要求7所述的装置，其特征在于，所述第二锁商模块还包括：用于通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据后，锁商向平台发送第一开锁指令请求。9.一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至6中任一项所述的方法的步骤。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至6中任一项所述的方法的步骤。
说明书desc
技术领域本申请涉及NFC数字钥匙移动设备适配技术领域，特别是涉及一种基于卡模拟方案的NFC数字钥匙移动设备适配方法及装置。背景技术近场通信也称NFC，是一种短距离无线通信技术，它允许设备之间进行非接触点对点数据传输和数据交换，NFC具有三种应用模式，分别为：读卡器模式、卡模拟模式和点对点模式，其中应用最为广泛的就是卡模拟模式，这种模式可以使具有NFC功能的移动端模拟成一张非接触的卡从被读卡器识别，从而进行移动支付和门禁控制等操作，现有NFC可模拟的卡种很多，有公交卡、银行卡和门禁卡等。目前NFC数字秘钥验证方式均以手机作为NFC卡片被NFC读取模块读取验证，此种场景下需要在手机中写入NFC数据，但是由于手机系统的封闭性，使得该方案实施的难度比较大,需要获得往手机内写入NFC数据的权限，写入NFC数据时操作方式非常繁琐。发明内容基于此，针对上述技术问题，提供一种基于卡模拟方案的NFC数字钥匙移动设备适配方法、装置、计算机设备和存储介质。第一方面，一种基于卡模拟方案的NFC数字钥匙移动设备适配方法，所述方法包括：发送开锁指令给锁模块，并与锁模块建立NFC连接，发送用户第一编号给锁模块；所述锁模块生成第一随机数据，并使用平台密钥对所述第一随机数据进行第一加密，得到第一加密数据，使用锁商密钥对所述第一加密数据进行第二加密，得到第二加密数据；接收所述锁模块发送的所述第二加密数据，并将所述第二加密数据和用户标识发送给锁商；锁商通过所述用户标识获取用户第二编号，并通过所述用户第二编号获取对应锁商密匙，通过所述锁商密匙对所述第二加密数据进行解密，得到第一锁商解密数据并将所述第一锁商解密数据发送给平台，平台接收所述锁商发送的所述第一锁商解密数据和所述用户第二编号，并通过所述用户第二编号获取对应平台密匙，通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据；其中，所述平台判断所述第二编号是否与所述第一编号相同，若是，判断所述平台解密数据是否与所述第一随机数据相同，若是，则平台接收锁商的获取第一开锁指令请求，通过平台密钥将所述平台解密数据进行第三加密得到第三加密数据，将第三加密数据作为第一开锁指令发送给锁商；接收第四加密数据作为第二开锁指令，将所述第二开锁指令发送给锁模块；锁模块接收所述第二开锁指令，采用锁商密匙对所述第二开锁指令进行解密，得到第二锁商解密数据，采用平台密匙对所述第二锁商解密数据进行解密，得到第二平台解密数据；其中，锁商接收所述第三加密数据并通过锁商密钥对所述第三加密数据进行第四加密，得到第四加密数据，所述第四加密数据为所述第二开锁指令；若所述第二平台解密数据与所述第一随机数据相同，则接收开锁成功信号。上述方案中，可选的，所述锁模块包括nfc卡模拟模块，所述终端有nfc读取功能。上述方案中，进一步可选的，所述通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据后，锁商向平台发送第一开锁指令请求。上述方案中，进一步可选的，所述判断所述第二编号是否与所述第一编号相同，若否，则发送开锁失败给终端；判断所述平台解密数据是否与所述第一随机数据相同，若否，则发送开锁失败给终端。上述方案中，进一步可选的，所述若所述第二平台解密数据与所述第一随机数据相同，则接收开锁成功信号具体为：锁模块验证所述第二平台解密数据与所述第一随机数据是否相同，若相同，则发送开锁成功信号给终端。上述方案中，进一步可选的，所述锁模块验证所述第二平台解密数据与所述第一随机数据是否相同，若不同，则发送开锁失败信号给终端。第二方面，一种基于卡模拟方案的NFC数字钥匙移动设备适配装置，所述装置包括：NFC连接模块：用于发送开锁指令给锁模块，并与锁模块建立NFC连接，发送用户第一编号给锁模块；所述锁模块生成第一随机数据，并使用平台密钥对所述第一随机数据进行第一加密，得到第一加密数据，使用锁商密钥对所述第一加密数据进行第二加密，得到第二加密数据；第一发送模块：用于接收所述锁模块发送的所述第二加密数据，并将所述第二加密数据和用户标识发送给锁商；锁商模块：用于锁商通过所述用户标识获取用户第二编号，并通过所述用户第二编号获取对应锁商密匙，通过所述锁商密匙对所述第二加密数据进行解密，得到第一锁商解密数据并将所述第一锁商解密数据发送给平台，平台接收所述锁商发送的所述第一锁商解密数据和所述用户第二编号，并通过所述用户第二编号获取对应平台密匙，通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据；其中，所述平台判断所述第二编号是否与所述第一编号相同，若是，判断所述平台解密数据是否与所述第一随机数据相同，若是，则平台接收锁商的获取第一开锁指令请求，通过平台密钥将所述平台解密数据进行第三加密得到第三加密数据，将第三加密数据作为第一开锁指令发送给锁商；接收模块：用于接收第四加密数据作为第二开锁指令，将所述第二开锁指令发送给锁模块；锁模块接收所述第二开锁指令，采用锁商密匙对所述第二开锁指令进行解密，得到第二锁商解密数据，采用平台密匙对所述第二锁商解密数据进行解密，得到第二平台解密数据；其中，锁商接收所述第三加密数据并通过锁商密钥对所述第三加密数据进行第四加密，得到第四加密数据，所述第四加密数据为所述第二开锁指令；开锁成功模块：用于若所述第二平台解密数据与所述第一随机数据相同，则接收开锁成功信号。上述方案中，可选的，所述第二锁商模块还包括：用于通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据后，锁商向平台发送第一开锁指令请求。第三方面，一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时实现以下步骤：发送开锁指令给锁模块，并与锁模块建立NFC连接，发送用户第一编号给锁模块；所述锁模块生成第一随机数据，并使用平台密钥对所述第一随机数据进行第一加密，得到第一加密数据，使用锁商密钥对所述第一加密数据进行第二加密，得到第二加密数据；接收所述锁模块发送的所述第二加密数据，并将所述第二加密数据和用户标识发送给锁商；锁商通过所述用户标识获取用户第二编号，并通过所述用户第二编号获取对应锁商密匙，通过所述锁商密匙对所述第二加密数据进行解密，得到第一锁商解密数据并将所述第一锁商解密数据发送给平台，平台接收所述锁商发送的所述第一锁商解密数据和所述用户第二编号，并通过所述用户第二编号获取对应平台密匙，通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据；其中，所述平台判断所述第二编号是否与所述第一编号相同，若是，判断所述平台解密数据是否与所述第一随机数据相同，若是，则平台接收锁商的获取第一开锁指令请求，通过平台密钥将所述平台解密数据进行第三加密得到第三加密数据，将第三加密数据作为第一开锁指令发送给锁商；接收第四加密数据作为第二开锁指令，将所述第二开锁指令发送给锁模块；锁模块接收所述第二开锁指令，采用锁商密匙对所述第二开锁指令进行解密，得到第二锁商解密数据，采用平台密匙对所述第二锁商解密数据进行解密，得到第二平台解密数据；其中，锁商接收所述第三加密数据并通过锁商密钥对所述第三加密数据进行第四加密，得到第四加密数据，所述第四加密数据为所述第二开锁指令；若所述第二平台解密数据与所述第一随机数据相同，则接收开锁成功信号。第四方面，一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现以下步骤：发送开锁指令给锁模块，并与锁模块建立NFC连接，发送用户第一编号给锁模块；所述锁模块生成第一随机数据，并使用平台密钥对所述第一随机数据进行第一加密，得到第一加密数据，使用锁商密钥对所述第一加密数据进行第二加密，得到第二加密数据；接收所述锁模块发送的所述第二加密数据，并将所述第二加密数据和用户标识发送给锁商；锁商通过所述用户标识获取用户第二编号，并通过所述用户第二编号获取对应锁商密匙，通过所述锁商密匙对所述第二加密数据进行解密，得到第一锁商解密数据并将所述第一锁商解密数据发送给平台，平台接收所述锁商发送的所述第一锁商解密数据和所述用户第二编号，并通过所述用户第二编号获取对应平台密匙，通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据；其中，所述平台判断所述第二编号是否与所述第一编号相同，若是，判断所述平台解密数据是否与所述第一随机数据相同，若是，则平台接收锁商的获取第一开锁指令请求，通过平台密钥将所述平台解密数据进行第三加密得到第三加密数据，将第三加密数据作为第一开锁指令发送给锁商；接收第四加密数据作为第二开锁指令，将所述第二开锁指令发送给锁模块；锁模块接收所述第二开锁指令，采用锁商密匙对所述第二开锁指令进行解密，得到第二锁商解密数据，采用平台密匙对所述第二锁商解密数据进行解密，得到第二平台解密数据；其中，锁商接收所述第三加密数据并通过锁商密钥对所述第三加密数据进行第四加密，得到第四加密数据，所述第四加密数据为所述第二开锁指令；若所述第二平台解密数据与所述第一随机数据相同，则接收开锁成功信号。本发明至少具有以下有益效果：本发明基于对现有技术问题的进一步分析和研究，认识到目前NFC数字秘钥验证方式均以手机作为NFC卡片被NFC读取模块读取验证，此种场景下需要在手机中写入NFC数据，但是由于手机系统的封闭性，使得该方案实施的难度比较大,需要获得往手机内写入NFC数据的权限，写入NFC数据时操作方式非常繁琐，本发明通过将终端作为读取设备，在锁内设置nfc卡模拟模块，nfc卡模拟模块初始化时写入锁的生产商秘钥和平台服务密钥，需要进行验证时终端读取nfc卡模拟模块的数据，nfc卡模拟模块会对数据进行二次加密，读取到数据后提交到服务器端，服务器端进行二次解密得到明文数据再进行数据验证。服务器返回数据时也将数据进行二次加密，通过手机把加密数据传输给nfc卡模拟模块，卡模拟模块对接收到的数据进行二次解密得到明文后执行指定的业务逻辑，本发明开卡流程简单提升了用户体检，方案落地实现简单不需要向手机产商申请nfc权限，扩展了使用范围。附图说明图1为本发明一个实施例提供的基于卡模拟方案的NFC数字钥匙移动设备适配方法的流程示意图；图2为本发明一个实施例提供的基于卡模拟方案的NFC数字钥匙移动设备适配方法应用到商用锁领域的具体流程示意图；图3为一个实施例中计算机设备的内部结构图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。本申请提供的基于卡模拟方案的NFC数字钥匙移动设备适配方法，在一个实施例中，如图1所示，提供了一种基于卡模拟方案的NFC数字钥匙移动设备适配方法，包括以下步骤：响应于终端的第一输入，与终端建立NFC连接并获取所述终端第一编号；其中，所述终端的第一输入中，终端可以为手机，所述第一输入在手机内开锁软件进行操作。生成第一随机数据，并使用平台密钥对所述第一随机数据进行第一加密，得到第一加密数据，使用锁商密钥对所述第一加密数据进行第二加密，得到第二加密数据。将所述第二加密数据发送给终端，终端接收第二加密数据，并将第二加密数据和终端标识发送给锁商。锁商通过所述终端标识获取终端第二编号，并通过所述终端第二编号获取对应锁商密匙，通过所述锁商密匙对所述第二加密数据进行解密，得到第一锁商解密数据。平台接收所述锁商发送的所述第一锁商解密数据和所述终端第二编号，并通过所述终端第二编号获取对应平台密匙，通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据。判断所述第二编号是否与所述第一编号相同，若是，判断所述平台解密数据是否与所述第一随机数据相同，若是，则平台接收锁商的获取第一开锁指令请求，通过平台密钥将所述平台解密数据进行第三加密得到第三加密数据，将第三加密数据作为第一开锁指令发送给锁商。其中，所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据后，锁商向平台发送第一开锁指令请求。其中，判断所述第二编号是否与所述第一编号相同，若否，则发送开锁失败给终端；判断所述平台解密数据是否与所述第一随机数据相同，若否，则发送开锁失败给终端。锁商接收所述第三加密数据并通过锁商密钥对所述第三加密数据进行第四加密，得到第四加密数据，并将所述第四加密数据作为第二开锁指令发送给所述终端；响应于用户的第二输入，接收所述第二开锁指令，采用锁商密匙对所述第二开锁指令进行解密，得到第二锁商解密数据，采用平台密匙对所述第二锁商解密数据进行解密，得到第二平台解密数据；验证所述第二平台解密数据与所述第一随机数据是否相同，若相同，则开锁，并发送开锁成功给终端。其中，验证所述第二平台解密数据与所述第一随机数据是否相同，若否，则发送开锁失败给终端。其中，终端有NFC读取功能，所述终端可以为手机平板电脑等。在一个实施例中，如图2所示，提供了一种基于卡模拟方案的NFC数字钥匙移动设备适配方法应用到商用锁领域，用户使用终端操作开锁，所述终端可以为手机或平板等，具体为，用户在手机软件上点击开锁，所述手机有NFC读取功能，在点击开锁后与商用锁建立NFC连接，所述商用锁可以为车锁、智能门锁等。商用锁接收用户终端发送开锁指令后，生成随机数，所述随机数可以为“123”等，商用锁内部.nfc卡模拟模块首先使用平台密钥对所述随机数进行加密得到第一次加密数据，进一步使用锁商密钥对所述第一次加密数据进行第二次加密得到第二次加密数据。商用锁得到第二次加密数据后，将所述第二次加密数据返回给用户终端，用户终端接收所述第二次加密数据并将其和用户标志一起发送给锁商，锁商接收第二次加密数据并将其和用户标志后，采用锁商密匙进行解密得到解密数据M1，锁商通过用户标识获取到用户编号U1，并将所述用户编号U1和解密数据M1发送给平台。平台接收到所述用户编号U1和解密数据M1，通过用户编号U1找到对应的平台密钥对所述解密数据M1进行解密得到平台解密数据，并通过对比平台解密数据与随机数，若两者相同，则平台认证成功。在平台认证成功后，锁商向平台发送开锁指令请求，平台将平台解密数据进行加密生成平台开锁指令，锁商接收到平台加密指令后，对所述平台开锁指令进行锁商加密生成锁商加密指令。锁商将锁商加密指令发送给用户终端，用户终端读取锁商加密指令，并将锁商加密指令发送给商用锁，所述商用锁可以为车锁、智能门锁等。商用锁接收到所述商用锁加密指令后使用商用锁内部.nfc卡模拟模块中锁商密匙进行第一次解锁得到平台加密指令，进而使用平台密匙进行第二次解锁得到解密数据，将所述解密数据与随机数进行对比，若一致，则商用锁进行开锁，并发送开锁成功给用户终端，例如，用户终端为手机时，手机显示开锁成功。本实施例通过将终端作为读取设备，在锁内设置nfc卡模拟模块，nfc卡模拟模块初始化时写入锁的生产商秘钥和平台服务密钥，需要进行验证时终端读取nfc卡模拟模块的数据，nfc卡模拟模块会对数据进行二次加密，读取到数据后提交到服务器端，服务器端进行二次解密得到明文数据再进行数据验证。服务器返回数据时也将数据进行二次加密，通过手机把加密数据传输给nfc卡模拟模块，卡模拟模块对接收到的数据进行二次解密得到明文后执行指定的业务逻辑，本发明开卡流程简单提升了用户体检，方案落地实现简单不需要向手机产商申请nfc权限，扩展了使用范围。应该理解的是，虽然图1的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，图1中的至少一部分步骤可以包括多个步骤或者多个阶段，这些步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤中的步骤或者阶段的至少一部分轮流或者交替地执行。在一个实施例中，提供了一种基于卡模拟方案的NFC数字钥匙移动设备适配装置，包括以下程序模块：NFC连接模块：用于发送开锁指令给锁模块，并与锁模块建立NFC连接，发送用户第一编号给锁模块；所述锁模块生成第一随机数据，并使用平台密钥对所述第一随机数据进行第一加密，得到第一加密数据，使用锁商密钥对所述第一加密数据进行第二加密，得到第二加密数据；第一发送模块：用于接收所述锁模块发送的所述第二加密数据，并将所述第二加密数据和用户标识发送给锁商；锁商模块：用于锁商通过所述用户标识获取用户第二编号，并通过所述用户第二编号获取对应锁商密匙，通过所述锁商密匙对所述第二加密数据进行解密，得到第一锁商解密数据并将所述第一锁商解密数据发送给平台，平台接收所述锁商发送的所述第一锁商解密数据和所述用户第二编号，并通过所述用户第二编号获取对应平台密匙，通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据；其中，所述平台判断所述第二编号是否与所述第一编号相同，若是，判断所述平台解密数据是否与所述第一随机数据相同，若是，则平台接收锁商的获取第一开锁指令请求，通过平台密钥将所述平台解密数据进行第三加密得到第三加密数据，将第三加密数据作为第一开锁指令发送给锁商；接收模块：用于接收第四加密数据作为第二开锁指令，将所述第二开锁指令发送给锁模块；锁模块接收所述第二开锁指令，采用锁商密匙对所述第二开锁指令进行解密，得到第二锁商解密数据，采用平台密匙对所述第二锁商解密数据进行解密，得到第二平台解密数据；其中，锁商接收所述第三加密数据并通过锁商密钥对所述第三加密数据进行第四加密，得到第四加密数据，所述第四加密数据为所述第二开锁指令；开锁成功模块：用于若所述第二平台解密数据与所述第一随机数据相同，则接收开锁成功信号。第二锁商模块还包括：用于通过所述平台密匙对所述第一锁商解密数据进行解密，得到第一平台解密数据后，锁商向平台发送第一开锁指令请求。关于基于卡模拟方案的NFC数字钥匙移动设备适配装置的具体限定可以参见上文中对于基于卡模拟方案的NFC数字钥匙移动设备适配方法的限定，在此不再赘述。上述基于卡模拟方案的NFC数字钥匙移动设备适配装置中的各个模块可全部或部分通过软件、硬件及其组合来实现。上述各模块可以硬件形式内嵌于或独立于计算机设备中的处理器中，也可以以软件形式存储于计算机设备中的存储器中，以便于处理器调用执行以上各个模块对应的操作。在一个实施例中，提供了一种计算机设备，该计算机设备可以是终端，其内部结构图可以如图3所示。该计算机设备包括通过系统总线连接的处理器、存储器、通信接口、显示屏和输入装置。其中，该计算机设备的处理器用于提供计算和控制能力。该计算机设备的存储器包括非易失性存储介质、内存储器。该非易失性存储介质存储有操作系统和计算机程序。该内存储器为非易失性存储介质中的操作系统和计算机程序的运行提供环境。该计算机设备的通信接口用于与外部的终端进行有线或无线方式的通信，无线方式可通过WIFI、运营商网络、NFC或其他技术实现。该计算机程序被处理器执行时以实现一种基于卡模拟方案的NFC数字钥匙移动设备适配方法。该计算机设备的显示屏可以是液晶显示屏或者电子墨水显示屏，该计算机设备的输入装置可以是显示屏上覆盖的触摸层，也可以是计算机设备外壳上设置的按键、轨迹球或触控板，还可以是外接的键盘、触控板或鼠标等。本领域技术人员可以理解，图3中示出的结构，仅仅是与本申请方案相关的部分结构的框图，并不构成对本申请方案所应用于其上的计算机设备的限定，具体的计算机设备可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。在一个实施例中，提供了一种计算机设备，包括存储器和处理器，存储器中存储有计算机程序，涉及上述实施例方法中的全部或部分流程。在一个实施例中，提供了一种计算机可读存储介质，其上存储有计算机程序，涉及上述实施例方法中的全部或部分流程。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一非易失性计算机可读取存储介质中，该计算机程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、存储、数据库或其它介质的任何引用，均可包括非易失性和易失性存储器中的至少一种。非易失性存储器可包括只读存储器、磁带、软盘、闪存或光存储器等。易失性存储器可包括随机存取存储器或外部高速缓冲存储器。作为说明而非局限，RAM可以是多种形式，比如静态随机存取存储器或动态随机存取存储器等。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请专利的保护范围应以所附权利要求为准。
