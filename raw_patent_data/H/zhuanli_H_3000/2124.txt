标题title
一种具备无源与有源天线切换的通信模组及天线切换方法
摘要abst
本发明公开了一种具备无源与有源天线切换的通信模组及天线切换方法，包括一体化基带芯片、功放单元、LNA单元、通道选择单元、一线通天线检测单元、双工器单元及供电单元，其中，一体化基带芯片用于合成即将发射的基带信号或对接收到的基带信号进行解码；通道选择单元用于根据使能信号的高低控制射频开关将对应的载波信号传输至对应单元；一线通天线检测单元用于根据检测结果输出对应的使能信号到通道选择单元。本发明实现了一线通天线和无源天线的兼容并可以实现自动切换，无需用户手动设置，通过SOC一体化技术，使模组体积在兼容两种天线的同时实现了模块的小型化，降低便携北斗终端的集成难度。
权利要求书clms
1.一种具备无源与有源天线切换的通信模组，其特征在于，该具备无源与有源天线切换的通信模组包括一体化基带芯片、功放单元、LNA单元、通道选择单元、一线通天线检测单元、双工器单元及供电单元；其中，所述一体化基带芯片用于合成即将发射的基带信号或对接收到的基带信号进行解码；所述功放单元用于对载波信号进行放大处理；所述LNA单元用于对接收到的载波信号进行两级滤波和两级放大处理；所述通道选择单元用于根据使能信号的高低控制射频开关将对应的载波信号传输至对应单元；所述一线通天线检测单元用于根据检测结果输出对应的使能信号到通道选择单元；所述双工器单元用于负责将一线通天线收发通道进行隔离；所述供电单元用于为通信模组中的各单元进行供电。2.根据权利要求1所述的一种具备无源与有源天线切换的通信模组，其特征在于，所述一体化基带芯片中集成有电源管理模块、射频前端上下变频模块、调制调解模块、串口通讯模块及SIM卡信息读取模块；其中，所述电源管理模块用于对电源供电进行管理，简化电源供电；所述射频前端上下变频模块用于将接收的射频信号变频为一体化基带芯片可以处理的中频信号，还用于将中频信号变频为射频信号通过天线发出；所述调制调解模块用于根据上位机发送的指令将调制后的载波信号输出到变频模块上变频为射频信号后经过放大电路输出到天线发送至卫星，还用于将变频模块输出的中频信号进行解调并将解调后的信息通过串口发送到上位机；所述串口通讯模块用于通过串口与上位机通信；所述SIM卡信息读取模块用于读取和发送SIM卡的相关信息。3.根据权利要求1所述的一种具备无源与有源天线切换的通信模组，其特征在于，所述功放单元内部共包含两级放大电路，入口处使用一个带通声表滤波器滤除杂波增加电路的稳定性，前级放大使用一个增益为17dB的低噪声放大器以满足末级输入端所需功率，级间使用一个Π型衰减器，在增加级间稳定性的同时调节末级输入端功率，防止末级功放因输入端功率过大烧毁，末级输出端使用一个5W隔离器防止信号倒灌对整个电路产生影响。4.根据权利要求1所述的一种具备无源与有源天线切换的通信模组，其特征在于，所述LNA单元内部共包含两级放大电路，入口处使用一个带通滤波器滤除杂波增加电路的稳定性防止功放单元的信号对LNA电路产生影响，电路使用两个低噪声放大器对信号进行放大，在保证信号功率达到要求的同时，使链路的整体噪声系数低，两级低噪声放大器的级间使用一个声表滤波器增加电路的稳定性。5.根据权利要求1所述的一种具备无源与有源天线切换的通信模组，其特征在于，所述通道选择单元共使用3个射频开关，射频开关一负责根据一线通天线检测单元输出的结果控制将无源天线或一线通天线接收到的S波段信号传输至一体化基带芯片，射频开关二负责根据一线通天线检测单元输出的结果控制将一体化基带芯片调制后的载波传输至无源天线或一线通天线的发射端，射频开关三负责根据一线通天线检测单元输出的结果控制将一线通天线或无源天线接收到的L1B1频段信号传输至外接RN模块。6.根据权利要求1所述的一种具备无源与有源天线切换的通信模组，其特征在于，所述一线通天线检测单元利用电流感应放大器检测一线通天线供电链路上的检测电阻两端的电压差变化；根据检测得到的电压差变化判断一线通天线是否工作，当一线通天线接通时由于负载变大检测电阻两端压差大于设定的阈值，则系统判定一线通天线工作，高速比较器输出高电平作为射频开关的使能来设置射频开关状态控制射频开关选择一线通天线通路，当一线通天线未接通时，由于负载变小检测电阻两端压差小于设定的阈值，则一线通天线不工作，高速比较器输出低电平作为射频开关的使能来设置射频开关的状态控制射频开关选择RN无源天线通路。7.根据权利要求1所述的一种具备无源与有源天线切换的通信模组，其特征在于，所述通信模组采用采用SMD邮票口封装，且所述通信模组集成了三个IPEX接口，可直接与一线通天线、RN无源天线和RN模块直接连接；所述通信模组的邮票口预留有为一线通天线使能的WZ_ANT_POWER_EN接口。8.根据权利要求1所述的一种具备无源与有源天线切换的通信模组，其特征在于，所述通道选择单元对应的电路中共有三个射频开关，且所述供电单元使用一个低噪声低压差线性稳压器为射频开关供电，功放链路中末级功放由外部通过邮票口直接提供5V供电，前极功放由一个高精度低压差稳压器供电。9.根据权利要求1所述的一种具备无源与有源天线切换的通信模组，其特征在于，所述供电单元使用一个500mA输出电流的低噪声低压差线性稳压器为一体化基带芯片供电，且所述低压差线性稳压器还提供一个3.3V电压到邮票口为外接的SIM卡座供电。10.一种具备无源与有源天线切换的通信模组的天线切换方法，用于实现权利要求1-9中任一所述的具备无源与有源天线切换的通信模组中无源天线与有源天线的切换，其特征在于，该方法包括以下步骤：S1、利用电流感应放大器检测一线通天线供电链路上的检测电阻两端的电压差变化；S2、根据检测得到的电压差变化判断一线通天线是否工作，当检测电阻两端压差大于设定的阈值，则一线通天线工作，并执行S3，当检测电阻两端压差小于设定的阈值，则一线通天线不工作，并执行S4；S3、高速比较器输出高电平作为射频开关的使能来设置射频开关状态控制射频开关选择一线通天线通路；S4、高速比较器输出低电平作为射频开关的使能来设置射频开关的状态控制射频开关选择RN无源天线通路。
说明书desc
技术领域本发明涉及通信技术领域，具体来说，涉及一种具备无源与有源天线切换的通信模组及天线切换方法。背景技术北斗卫星导航系统由空间段、地面段和用户段三部分组成，可在全球范围内全天候、全天时为各类用户提供高精度、高可靠定位、导航、授时服务，并且具备短报文通信能力，已经初步具备区域导航、定位和授时能力，定位精度为分米、厘米级别，测速精度0.2米/秒，授时精度10纳秒。北斗卫星导航系统是全球卫星导航系统，是为全球用户提供全天候、全天时、高精度的定位、导航和授时服务的重要时空基础设施。然而，在目前的北斗卫星导航系统中北斗通信模组仅支持无源天线或仅支持有源天线，且空间利用率较低，体积为60mm*60mm*3.5mm，从而使得便携北斗终端的集成难度较高，不能很好的满足于人们的通信需求。针对相关技术中的问题，目前尚未提出有效的解决方案。发明内容针对相关技术中的问题，本发明提出一种具备无源与有源天线切换的通信模组及天线切换方法，以克服现有相关技术所存在的上述技术问题。为此，本发明采用的具体技术方案如下：根据本发明的一个方面，提供了一种具备无源与有源天线切换的通信模组，该具备无源与有源天线切换的通信模组包括一体化基带芯片、功放单元、LNA单元、通道选择单元、一线通天线检测单元、双工器单元及供电单元；其中，一体化基带芯片用于合成即将发射的基带信号或对接收到的基带信号进行解码；功放单元用于对载波信号进行放大处理；LNA单元用于对接收到的载波信号进行两级滤波和两级放大处理；通道选择单元用于根据使能信号的高低控制射频开关将对应的载波信号传输至对应单元；一线通天线检测单元用于根据检测结果输出对应的使能信号到通道选择单元；双工器单元用于负责将一线通天线收发通道进行隔离；供电单元用于为通信模组中的各单元进行供电。进一步的，一体化基带芯片中集成有电源管理模块、射频前端上下变频模块、调制调解模块、串口通讯模块及SIM卡信息读取模块；其中，电源管理模块用于对电源供电进行管理，简化电源供电；射频前端上下变频模块用于将接收的射频信号变频为一体化基带芯片可以处理的中频信号，还用于将中频信号变频为射频信号通过天线发出；调制调解模块用于根据上位机发送的指令将调制后的载波信号输出到变频模块上变频为射频信号后经过放大电路输出到天线发送至卫星，还用于将变频模块输出的中频信号进行解调并将解调后的信息通过串口发送到上位机；串口通讯模块用于通过串口与上位机通信；SIM卡信息读取模块用于读取和发送SIM卡的相关信息。进一步的，功放单元内部共包含两级放大电路，入口处使用一个带通声表滤波器滤除杂波增加电路的稳定性，前级放大使用一个增益为17dB的低噪声放大器以满足末级输入端所需功率，级间使用一个Π型衰减器，在增加级间稳定性的同时可以调节末级输入端功率，防止末级功放因输入端功率过大烧毁，末级输出端使用一个5W隔离器防止信号倒灌对整个电路产生影响。进一步的，LNA单元内部共包含两级放大电路，入口处使用一个带通滤波器滤除杂波增加电路的稳定性防止功放单元的信号对LNA电路产生影响，电路使用两个低噪声放大器对信号进行放大，在保证信号功率达到要求的同时，使链路的整体噪声系数尽量低，两级低噪声放大器的级间使用一个声表滤波器增加电路的稳定性。进一步的，通道选择单元共使用3个射频开关，射频开关一负责根据一线通天线检测单元输出的结果控制将无源天线或一线通天线接收到的S波段信号传输至一体化基带芯片，射频开关二负责根据一线通天线检测单元输出的结果控制将一体化基带芯片调制后的载波传输至无源天线或一线通天线的发射端，射频开关三负责根据一线通天线检测单元输出的结果控制将一线通天线或无源天线接收到的L1B1频段信号传输至外接RN模块。进一步的，一线通天线检测单元利用电流感应放大器检测一线通天线供电链路上的检测电阻两端的电压差变化；根据检测得到的电压差变化判断一线通天线是否工作，当一线通天线接通时由于负载变大检测电阻两端压差大于设定的阈值，则系统判定一线通天线工作，高速比较器输出高电平作为射频开关的使能来设置射频开关状态控制射频开关选择一线通天线通路，当一线通天线未接通时，由于负载变小检测电阻两端压差小于设定的阈值，则一线通天线不工作，高速比较器输出低电平作为射频开关的使能来设置射频开关的状态控制射频开关选择RN无源天线通路。进一步的，通信模组采用采用SMD邮票口封装，且通信模组集成了三个IPEX接口，可直接与一线通天线、RN无源天线和RN模块直接连接；通信模组的邮票口预留有为一线通天线使能的WZ_ANT_POWER_EN接口。进一步的，通道选择单元对应的电路中共有三个射频开关，且供电单元使用一个低噪声低压差线性稳压器为射频开关供电，功放链路中末级功放由外部通过邮票口直接提供5V供电，前极功放由一个高精度低压差稳压器供电。进一步的，供电单元使用一个500mA输出电流的低噪声低压差线性稳压器为一体化基带芯片供电，且低压差线性稳压器还提供一个3.3V电压到邮票口为外接的SIM卡座供电。根据本发明的另一个方面，提供了一种具备无源与有源天线切换的通信模组的天线切换方法，该方法包括以下步骤：S1、利用电流感应放大器检测一线通天线供电链路上的检测电阻两端的电压差变化；S2、根据检测得到的电压差变化判断一线通天线是否工作，当检测电阻两端压差大于设定的阈值，则一线通天线工作，并执行S3，当检测电阻两端压差小于设定的阈值，则一线通天线不工作，并执行S4；S3、高速比较器输出高电平作为射频开关的使能来设置射频开关状态控制射频开关选择一线通天线通路；S4、高速比较器输出低电平作为射频开关的使能来设置射频开关的状态控制射频开关选择RN无源天线通路。本发明的有益效果为：本发明实现了一线通天线和无源天线的兼容并可以实现自动切换，无需用户手动设置。通过SOC一体化技术，使模组体积和目前市面上支持单一天线的产品相比可以有效地降低，在兼容两种天线的同时实现了模块的小型化，降低便携北斗终端的集成难度。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是根据本发明实施例的一种具备无源与有源天线切换的通信模组的原理框图；图2是根据本发明实施例的一种具备无源与有源天线切换的通信模组中一体化基带芯片的结构框图；图3是根据本发明实施例的一种具备无源与有源天线切换的通信模组中一线通天线检测单元的电路图；图4是根据本发明实施例的一种具备无源与有源天线切换的通信模组中通道选择单元的电路图；图5是根据本发明实施例的一种具备无源与有源天线切换的通信模组中功放单元的电路图；图6是根据本发明实施例的一种具备无源与有源天线切换的通信模组中LNA单元的电路图；图7是根据本发明实施例的一种具备无源与有源天线切换的通信模组中一体化基带芯片的电路图；图8是根据本发明实施例的一种具备无源与有源天线切换的通信模组中双工器单元的电路图。图中：1、一体化基带芯片；11、电源管理模块；12、射频前端上下变频模块；13、调制调解模块；14、串口通讯模块；15、SIM卡信息读取模块；2、功放单元；3、LNA单元；4、通道选择单元；5、一线通天线检测单元；6、双工器单元；7、供电单元。实施方式为进一步说明各实施例，本发明提供有附图，这些附图为本发明揭露内容的一部分，其主要用以说明实施例，并可配合说明书的相关描述来解释实施例的运作原理，配合参考这些内容，本领域普通技术人员应能理解其他可能的实施方式以及本发明的优点，图中的组件并未按比例绘制，而类似的组件符号通常用来表示类似的组件。根据本发明的实施例，提供了一种具备无源与有源天线切换的通信模组及天线切换方法。现结合附图和具体实施方式对本发明进一步说明，如图1-图8所示，根据本发明的一个实施例，提供了一种具备无源与有源天线切换的通信模组，该具备无源与有源天线切换的通信模组包括一体化基带芯片1、功放单元2、LNA单元3、通道选择单元4、一线通天线检测单元5、双工器单元6及供电单元7；其中，一体化基带芯片1用于合成即将发射的基带信号或对接收到的基带信号进行解码；具体的，基带芯片根据串口接收到的指令将调制后的载波信号发射到射频开关，射频开关根据使能信号选择将载波信号传输给功放链路放大后经无源天线发出或将载波信号传输给双工器通过一线通天线发出。为了简化模组的尺寸、降低成本，模组采用射频基带一体化的SOC芯片。SOC技术的定义为由多个具有特定功能的集成电路组合在一个芯片上形成的系统或产品，其中包含完整的硬件系统及其承载的嵌入式软件。这意味着，在单个芯片上，就能完成一个电子系统的功能，而这个系统在以前往往需要一个或多个电路板，以及板上的各种电子器件、芯片和互连线共同配合来实现。在单个芯片上集成了更多配套的电路，节省了集成电路的面积，也就节省了成本。SOC在性能、成本、功耗、可靠性，以及生命周期与适用范围各方面都有明显的优势。芯片的各个模块通过SOC一体化技术集成于基带芯片中，通过UART/SPI接口、GPIO与APSOC通信。芯片内集成电源管理模块11可以简化电源供电。芯片内集成了射频前端上下变频模块12、调制调解模块13、串口通讯模块14及SIM卡信息读取模块15。各个模块通过SOC一体化技术集成于基带芯片中，此种方式可以减少芯片外围电路器件数量。降低模组体积从而实现模组小型化的要求。由于模组收发通道中的载波信号都是频率较高的射频信号，基带芯片无法处理此类载波信号。因此芯片内集成的射频前端上下变频模块可将天线到的射频信号变频为基带可以处理的中频信号。也可将中频信号变频为射频信号通过天线发出。解调模块负责将变频模块输出的中频信号进行解调并将解调后的信息通过串口发送到上位机。调制模块负责根据上位机发送的指令将调制后的载波信号输出到变频模块上变频为射频信号后经过放大电路输出到天线发送至卫星。基带芯片提供了两个引脚作为串口用于与上位机通信，并提供了三个引脚用于与外接的SIM卡通讯。上位机可通过串口与模组通讯实现对RDSS功能进行软件版本升级和对模组的控制。并通过串口与SIM卡信息读取模块通讯从而读取和发送SIM卡相关信息。模组采用SMD邮票口封装。另外集成了三个IPEX接口可直接与一线通天线，RN无源天线，RN模块直接连接。目前现有此类产品都是只支持单一天线模式，为了能由用户自己选择天线首先模组邮票口预留了WZ_ANT_POWER_EN接口。接口功能为一线通天线使能，该引脚定义为低电平时无法使用一线通天线。如图3所示，WZ_ANT_POWER_EN接口通过一个三极管连接到P沟道场效应管的G极。当WZ_ANT_POWER_EN接口为高电平时，场效应管G极为低电平，VGS=5V，此时VDS=0V，S极连接VCC=5V，当D极连接到一线通天线供电端为一线通天线供电。当WZ_ANT_POWER_EN接口为低电平时，场效应管G极为高电平，VGS=0V，VDS=5V，D极无电压为一线通天线供电。功放单元2用于对载波信号进行放大处理；具体的，模组内置功放单元，无需外接功放电路即可满足使用需求。基带芯片根据串口接收到的指令将调制后的载波信号发射到通道选择电路，通过选择电路后将载波信号发射至功放电路中进行放大，可通过邮票口外接无源天线将放大后的载波信号发射至卫星。功放单元内部共包含两级放大电路，入口处使用一个带通声表滤波器滤除杂波增加电路的稳定性。前级放大使用一个增益为17dB的低噪声放大器以满足末级输入端所需功率。级间使用一个Π型衰减器，在增加级间稳定性的同时可以调节末级输入端功率，防止末级功放因输入端功率过大烧毁。末级输出端使用一个5W隔离器防止信号倒灌对整个电路产生影响。LNA单元3用于对接收到的载波信号进行两级滤波和两级放大处理；具体的，模组内置的LNA链路，载波信号通过无源天线进入LNA电路，经过滤波后经过两级放大后进入射频开关。射频开关根据使能信号选择无源天线或一线通天线接收到的载波信号进入基带芯片进行解调。LNA单元内部共包含两级放大电路，入口处使用一个带通滤波器滤除杂波增加电路的稳定性防止功放单元的信号对LNA电路产生影响。电路使用两个低噪声放大器对信号进行放大。在保证信号功率达到要求的同时，使链路的整体噪声系数尽量低。两级低噪声放大器的级间使用一个声表滤波器增加电路的稳定性。通道选择单元4用于根据使能信号的高低控制射频开关将对应的载波信号传输至对应单元；通道选择单元共使用3个射频开关，射频开关一负责根据一线通天线检测单元输出的结果控制将无源天线或一线通天线接收到的S波段信号传输至一体化基带芯片。射频开关二负责根据一线通天线检测单元输出的结果控制将一体化基带芯片调制后的载波传输至无源天线或一线通天线的发射端。射频开关三负责根据一线通天线检测单元输出的结果控制将一线通天线或无源天线接收到的L1B1频段信号传输至外接RN模块。一线通天线检测单元5用于根据检测结果输出对应的使能信号到通道选择单元；一线通天线检测单元利用电流感应放大器检测一线通天线供电链路上的检测电阻两端的电压差变化；根据检测得到的电压差变化判断一线通天线是否工作，当一线通天线接通时由于负载变大检测电阻两端压差大于设定的阈值，则系统判定一线通天线工作，高速比较器输出高电平作为射频开关的使能来设置射频开关状态控制射频开关选择一线通天线通路，当一线通天线未接通时，由于负载变小检测电阻两端压差小于设定的阈值，则一线通天线不工作，高速比较器输出低电平作为射频开关的使能来设置射频开关的状态控制射频开关选择RN无源天线通路。双工器单元6用于负责将一线通天线收发通道进行隔离；供电单元7用于为通信模组中的各单元进行供电。具体的，模组共有两个外接供电引脚分别为功放和其他器件供电。供电引脚需外接5V供电，内部通过BUCK电路将外接电压降压至3.6V。通过多个LDO将3.6V电压转换成不同电压为模块内各个电路提供供电电压和使能电压。电路使能由邮票口的使能引脚控制，当使能引脚为低电平时系统无供电电压。供电单元使用一个500mA输出电流的低噪声LDO为基带芯片供电，此LDO还提供一个3.3V电压到邮票口为外接的SIM卡座供电。晶振供电电压为3.3V，供电单元使用一个高精度低压差稳压器为晶振供电。通道选择电路上共有三个射频开关，供电单元使用一个低噪声LDO为射频开关供电。功放链路中末级功放由外部通过邮票口直接提供5V供电，前极功放由一个高精度低压差稳压器供电。设计中将各个电路的电压分别用不同的LDO供电，这样的设计可以降低单个LDO的功耗，便于各个芯片散热从而降低整个模块工作时的温度。根据本发明的另一个实施例，提供了一种具备无源与有源天线切换的通信模组的天线切换方法，该方法包括以下步骤：S1、利用电流感应放大器检测一线通天线供电链路上的检测电阻两端的电压差变化；S2、根据检测得到的电压差变化判断一线通天线是否工作，当检测电阻两端压差大于设定的阈值，则一线通天线工作，并执行S3，当检测电阻两端压差小于设定的阈值，则一线通天线不工作，并执行S4；S3、高速比较器输出高电平作为射频开关的使能来设置射频开关状态控制射频开关选择一线通天线通路；S4、高速比较器输出低电平作为射频开关的使能来设置射频开关的状态控制射频开关选择RN无源天线通路。具体的，在用户选择了使用一线通天线模式时为了实现一线通天线插拔时内置无源天线和一线通天线自动切换使用功能模组内部通过一个电流感应放大器和一个高速比较器实现对一线通天线和无源天线的检测，电流感应放大器根据一线通天线供电链路上的检测电阻两端的电压差变化来判断一线通天线是否工作，当一线通天线工作时电路负载增大检测电阻两端压差大于设定的阈值，比较器输出高电平作为射频开关的使能来设置射频开关状态控制射频开关选择一线通天线通路。一线通天线未接入电路时，一线通天线供电链路上检测电阻两端压差小于设定的阈值，比较器输出低电平作为射频开关的使能来设置射频开关的状态控制射频开关选择无源天线通路。综上所述，借助于本发明的上述技术方案，本发明实现了一线通天线和无源天线的兼容并可以实现自动切换，无需用户手动设置。通过SOC一体化技术，使模组体积和目前市面上支持单一天线的产品相比可以有效地降低，在兼容两种天线的同时实现了模块的小型化，降低便携北斗终端的集成难度。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
