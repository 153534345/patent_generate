标题title
通信连接控制方法及装置
摘要abst
本申请实施例公开了一种通信连接控制方法及装置，该方法包括：创建至少两个通信端点，所述至少两个通信端点包括第一通信端点和第二通信端点；通过所述第一通信端点发送连接请求，以用于和对端设备建立通信连接；在所述第一通信端点发送连接请求后的时长满足切换时间阈值时，通过所述第二通信端点发送连接请求，以用于和所述对端设备建立通信连接；基于所述第一通信端点与所述对端设备的通信连接情况，关闭或保持所述第二通信端点与所述对端设备的通信连接。本方案实现了灵活可控的通信选择，降低了通信连接不稳定导致通信中断的概率，提升了通信连接质量。
权利要求书clms
1.通信连接控制方法，其特征在于，包括：创建至少两个通信端点，所述至少两个通信端点包括第一通信端点和第二通信端点；通过所述第一通信端点发送连接请求，以用于和对端设备建立通信连接；在所述第一通信端点发送连接请求后的时长满足切换时间阈值时，通过所述第二通信端点发送连接请求，以用于和所述对端设备建立通信连接；基于所述第一通信端点与所述对端设备的通信连接情况，关闭或保持所述第二通信端点与所述对端设备的通信连接。2.根据权利要求1所述的通信连接控制方法，其特征在于，所述基于所述第一通信端点与所述对端设备的通信连接情况，关闭或保持所述第二通信端点与所述对端设备的通信连接，包括：判断所述第一通信端点与所述对端设备是否成功建立通信连接；响应于成功建立通信连接的判断结果，关闭所述第二通信端点与所述对端设备的通信连接；响应于未成功建立通信连接的判断结果，保持所述第二通信端点与所述对端设备的通信连接，关闭所述第一通信端点与所述对端设备的通信连接。3.根据权利要求1所述的通信连接控制方法，其特征在于，所述至少两个通信端点还包括第三通信端点，所述第三通信端点为空连接端点，所述第一通信端点对应第一数据流，所述两个通信端点和所述第三通信端点对应第二数据流，在所述通过所述第一通信端点发送连接请求时，还包括：通过所述第三通信端点进行通信连接的占位；所述通过所述第二通信端点发送连接请求，以用于和所述对端设备建立通信连接，包括：将所述第二数据流中的连接由所述第三通信端点切换至所述第二通信端点，通过所述第二通信端点发送连接请求。4.根据权利要求1-3中任一项所述的通信连接控制方法，其特征在于，所述第一通信端点基于UDP协议与所述对端设备建立通信连接，所述第二通信端点基于TCP协议与所述对端设备建立通信连接。5.根据权利要求1-3中任一项所述的通信连接控制方法，其特征在于，在所述关闭或保持所述第二通信端点与所述对端设备的通信连接之后，还包括：在与所述对端设备连接异常的时长超过异常时间阈值的情况下，重新通过所述至少两个通信端点建立与所述对端设备的通信连接。6.根据权利要求3所述的通信连接控制方法，其特征在于，还包括：根据所述第一通信端点以及所述第二通信端点与所述对端设备的连接情况，设置所述第一通信端点和所述第二通信端点的权重值，用于发送数据包至所述对端设备时，基于所述权重值在所述第一数据流和所述第二数据流中选择发送所述数据包的数据流。7.根据权利要求6所述的通信连接控制方法，其特征在于，在所述第一通信端点成功建立与所述对端设备的通信连接的情况下，设置所述第一通信端点的权重为第一预设值，设置所述第二通信端点的权重为第二预设值，在所述第一通信端点未成功建立与所述对端设备的通信连接的情况下，且通过所述第二通信端点与所述对端设备成功建立通信连接时，设置所述第二通信端点的权重为第三预设值，所述第一预设值大于所述第二预设值，且小于所述第三预设值。8.根据权利要求7所述的通信连接控制方法，其特征在于，所述基于所述权重值在所述第一数据流和所述第二数据流中选择发送所述数据包的数据流，包括：选择权重值最大的通信端点对应的数据流进行所述数据包的发送。9.根据权利要求3所述的通信连接控制方法，其特征在于，所述至少两个通信端点还包括第四通信端点，所述第四通信端点对应第三数据流，在所述通过所述第二通信端点发送连接请求之后，还包括：在所述第二通信端点发送连接请求后的时长满足所述切换时间阈值时，通过所述第四通信端点发送连接请求，以用于和所述对端设备建立通信连接。10.通信连接控制装置，其特征在于，包括：通信端点创建模块，配置为创建至少两个通信端点，所述至少两个通信端点包括第一通信端点和第二通信端点；连接建立模块，配置为通过所述第一通信端点发送连接请求，以用于和对端设备建立通信连接；连接切换模块，配置为在所述第一通信端点发送连接请求后的时长满足切换时间阈值时，通过所述第二通信端点发送连接请求，以用于和所述对端设备建立通信连接；连接开闭模块，配置为基于所述第一通信端点与所述对端设备的通信连接情况，关闭或保持所述第二通信端点与所述对端设备的通信连接。11.一种通信连接控制设备，所述设备包括：一个或多个处理器；存储装置，用于存储一个或多个程序，当所述一个或多个程序被所述一个或多个处理器执行，使得所述一个或多个处理器实现权利要求1-9中任一项所述的通信连接控制方法。12.一种存储计算机可执行指令的存储介质，所述计算机可执行指令在由计算机处理器执行时用于执行权利要求1-9中任一项所述的通信连接控制方法。13.一种计算机程序产品，包括计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1-9中任一项所述的通信连接控制方法。
说明书desc
技术领域本申请实施例涉及通信技术领域，尤其涉及一种通信连接控制方法及装置。背景技术随着互联网技术的快速发展，基于客户端和服务器之间通信的应用场景越来越多，对通信连接质量的要求也越来越高。尤其是全球化的互联网客户端产品，更需要应对世界各个国家和地区复杂的基础网络环境，在不同的网络环境中保证客户端和服务器之间网络的连通性和稳定性。例如，在音视频通话过程中，通常使用UDP协议发送数据，但部分国家和运营商基础网络较差，导致部分时段特定类型的连接不可用或网络质量波动比较大。此时，为了提高连接成功率，提升通话质量，通常需要提供备用连接以供选择使用。相关技术中，在进行通信协议的选择时，通过设置回退计时器，如果在设置的时间内未收到优选协议的响应，则回退至非优选协议。上述方案可实现一次优选协议失败下的协议回退，但扩展性较低，适用范围窄，灵活性不足。发明内容本申请实施例提供了一种通信连接控制方法及装置，实现了灵活可控的通信选择，降低了通信连接不稳定导致通信中断的概率，提升了通信连接质量。第一方面，本申请实施例提供了一种通信连接控制方法，该方法包括：创建至少两个通信端点，所述至少两个通信端点包括第一通信端点和第二通信端点；通过所述第一通信端点发送连接请求，以用于和对端设备建立通信连接；在所述第一通信端点发送连接请求后的时长满足切换时间阈值时，通过所述第二通信端点发送连接请求，以用于和所述对端设备建立通信连接；基于所述第一通信端点与所述对端设备的通信连接情况，关闭或保持所述第二通信端点与所述对端设备的通信连接。第二方面，本申请实施例还提供了一种通信连接控制装置，包括：通信端点创建模块，配置为创建至少两个通信端点，所述至少两个通信端点包括第一通信端点和第二通信端点；连接建立模块，配置为通过所述第一通信端点发送连接请求，以用于和对端设备建立通信连接；连接切换模块，配置为在所述第一通信端点发送连接请求后的时长满足切换时间阈值时，通过所述第二通信端点发送连接请求，以用于和所述对端设备建立通信连接；连接开闭模块，配置为基于所述第一通信端点与所述对端设备的通信连接情况，关闭或保持所述第二通信端点与所述对端设备的通信连接。第三方面，本申请实施例还提供了一种通信连接控制设备，该设备包括：一个或多个处理器；存储装置，用于存储一个或多个程序，当所述一个或多个程序被所述一个或多个处理器执行，使得所述一个或多个处理器实现本申请实施例所述的通信连接控制方法。第四方面，本申请实施例还提供了一种存储计算机可执行指令的存储介质，所述计算机可执行指令在由计算机处理器执行时用于执行本申请实施例所述的通信连接控制方法。第五方面，本申请实施例还提供了一种计算机程序产品，该计算机程序产品包括计算机程序，该计算机程序存储在计算机可读存储介质中，设备的至少一个处理器从计算机可读存储介质读取并执行计算机程序，使得设备执行本申请实施例所述的通信连接控制方法。本申请实施例中，通过创建至少两个通信端点，其中，至少两个通信端点包括第一通信端点和第二通信端点，通过第一通信端点发送连接请求，以用于和对端设备建立通信连接，在第一通信端点发送连接请求后的时长满足切换时间阈值时，通过第二通信端点发送连接请求，以用于和所述对端设备建立通信连接，基于第一通信端点与对端设备的通信连接情况，确定是否关闭所述第二通信端点与对端设备的通信连接，实现了灵活可控的通信选择，降低了通信连接不稳定导致通信中断的概率，提升了通信连接质量。附图说明图1为本申请实施例提供的一种通信连接控制方法的流程图；图2为本申请实施例提供的一种设备间连接关系建立的示意图；图3为本申请实施例提供的另一种通信连接控制方法的流程图；图4为本申请实施例提供的一种包含对权重设置的通信连接控制方法的流程图；图5为本申请实施例提供的一种通信连接控制装置的结构框图；图6为本申请实施例提供的一种通信连接控制设备的结构示意图。具体实施方式下面结合附图和实施例对本申请实施例作进一步的详细说明。可以理解的是，此处所描述的具体实施例仅仅用于解释本申请实施例，而非对本申请实施例的限定。另外还需要说明的是，为了便于描述，附图中仅示出了与本申请实施例相关的部分而非全部结构。本申请的说明书和权利要求书中的术语“第一”、“第二”等是用于区别类似的对象，而不用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便本申请的实施例能够以除了在这里图示或描述的那些以外的顺序实施，且“第一”、“第二”等所区分的对象通常为一类，并不限定对象的个数，例如第一对象可以是一个，也可以是多个。此外，说明书以及权利要求中“和/或”表示所连接对象的至少其中之一，字符“/”，一般表示前后关联对象是一种“或”的关系。图1为本申请实施例提供的一种通信连接控制方法的流程图，可用于设备之间的通信连接，该方法可以由计算设备如客户端执行，具体包括如下步骤：步骤S101、创建至少两个通信端点，所述至少两个通信端点包括第一通信端点和第二通信端点。在一个实施例中，首先进行通信端点的创建。可选的，该通信端点可以是socket，创建的通信端点的数量为至少两个。该通信端点提供了应用层进程利用网络协议交换数据的机制，上联应用进程，下联网络协议栈，是应用程序通过网络协议进行通信的接口，以及应用程序与网络协议栈进行交互的接口。在一个实施例中，可以通过使用通信43端点创建指令进行通信端点的创建，以套接字为例，其为协议栈内部一块用于存放控制信息的内存空间，记录了用于控制通信操作的控制消息，其还记录了是否已经收到对端设备的响应等。在一个实施例中，创建的通信端点包括第一通信端点和第二通信端点。可选的，每个通信端点对应一个数据流，如第一通信端点对应第一数据流，第二通信端点对应第二数据流。其中，数据流为设备之间传输数据的流，每路数据流可包含一个或多个连接，每个连接对应一个通信端点。在一个实施例中，该第一通信端点基于UDP协议与对端设备建立通信连接，第二通信端点基于TCP协议与对端设备建立通信连接。可选的，该第二通信端点还可以是基于HTTP协议与对端设备建立通信连接，其中，第一通信端点对应优选的即优先选择使用的通信协议，第二通信端点对应非优选的即退回使用的通信协议。当然，针对不同的通信场景，优选的和非优选的通信协议可以进行不同的设置，此处不做限定。步骤S102、通过所述第一通信端点发送连接请求，以用于和对端设备建立通信连接。在一个实施例中，在进行和对端设备的通信连接建立过程中，首先通过第一通信端点发送连接请求，以用于和对端设备建立通信连接。示例性的，该对端设备可以是服务器或者其它区别于当前设备的计算设备。可选的，通过第一通信端点开始尝试与对端设备建立通信连接，示例性的，可以是发送通信连接请求至对端设备，以在对端设备进行响应反馈后，二者建立通信连接。可选的，该第一通信端点对应第一数据流，第一数据流可包含多个通信端点，默认的以第一通信端点开始建立和对端设备的通信连接。步骤S103、在所述第一通信端点发送连接请求后的时长满足切换时间阈值时，通过所述第二通信端点发送连接请求，以用于和所述对端设备建立通信连接。在一个实施例中，在通过第一通信端点开启尝试和对端设备的连接后，进行计时，时长满足切换时间阈值时，通过第二通信端点发送连接请求，以用于和对端设备建立通信连接。此时，第一通信端点继续保持尝试和对端设备建立连接，其包括通信连接建立成功和通信连接建立失败两种情况。可选的，该切换时间阈值可以根据实际情况进行灵活配置，示例性的为10秒。即第一通信端点发送连接请求后的时长超过10秒时，通过第二通信端点发送连接请求。在一个实施例中，该第二通信端点所属的第二数据流还包括第三通信端点，该第三通信端点为空连接端点，其起到通信连接占位的作用。在第一通信端点开启和对端设备的通信连接建立的尝试时，该第三通信端点同步开启通信连接的占位，在第一通信端点发送连接请求后的时长满足切换时间阈值时，针对第二数据流，其由第三通信端点切换至第二通信端点，通过第二通信端点发送连接请求，由此实现了各个数据流的实时同步的联动控制。如图2所示，图2为本申请实施例提供的一种设备间连接关系建立的示意图，其中，当前设备为1031，对端设备为1032，示例性的当前设备1031为客户端，对端设备1032为服务器，客户端1031与服务器1032可通过两路数据流即第一数据流和第二数据流进行数据的传输，其中，第一数据流对应一个通信端点，记作第一通信端点10311；第二数据流对应两个通信端点，记作第二通信端点10312和第三通信端点10313。在客户端1031与服务器1032开始建立通信连接的过程中，第一数据流中通过第一通信端点10311开启尝试与服务器1032建立连接，第二数据流中的第三通信端点进行通信占位，在占位时间满足切换时间阈值时，通过第二通信端点10312发送连接请求，以用于和所述对端设备建立通信连接。步骤S104、基于所述第一通信端点与所述对端设备的通信连接情况，关闭或保持所述第二通信端点与所述对端设备的通信连接。在一个实施例中，在通过第二通信端点发送连接请求，以用于和所述对端设备建立通信连接后，确定第一通信端点与对端设备的通信连接情况，基于该连接情况确定是否关闭或保持第二通信端点与对端设备的通信连接。具体的，包括：判断第一通信端点与对端设备是否成功建立通信连接，响应于成功建立通信连接的判断结果，关闭第二通信端点与所述对端设备的通信连接，响应于未成功建立通信连接的判断结果，保持第二通信端点与对端设备的通信连接，关闭第一通信端点与对端设备的通信连接。其中，上述记载的关闭通信连接即不进行和对端设备的通信连接建立的尝试，保持通信连接为针对以成功建立通信连接的情况下继续保持建立的通信连接，如果也未成功的建立通信连接，则继续尝试和对端设备建立通信连接。在一个实施例中，该通信连接情况可以通过在NetworkManager中进行查询，查询该第一通信端点是否连接成功的标记以确定具体的是否连接成功的情况。示例性的，如果标记为1则表示连接成功，标记为0则表示连接失败。由上述方案可知，通过创建至少两个通信端点，其中，至少两个通信端点包括第一通信端点和第二通信端点，通过第一通信端点发送连接请求，以用于和对端设备建立通信连接，在第一通信端点发送连接请求后的时长满足切换时间阈值时，通过第二通信端点发送连接请求，以用于和所述对端设备建立通信连接，基于第一通信端点与对端设备的通信连接情况，确定是否关闭所述第二通信端点与对端设备的通信连接，该通信连接控制机制，提高了通信连接保持成功建立的概率，实现了灵活可控的通信选择，降低了通信连接不稳定导致通信中断的概率，提升了通信连接质量。图3为本申请实施例提供的另一种通信连接控制方法的流程图，如图3所示，通过创建三个数据流，以实现多数据流的备份，其中，针对第三数据流其包含第四通信端点，以建立和对端设备通信连接，具体包括：步骤S201、创建至少两个通信端点，至少两个通信端点包括第一通信端点、第二通信端点、第三通信端点和第四通信端点，第一通信端点对应第一数据流，第二通信端点、第三通信端点对应第二数据流，第四通信端点对应第三数据流。步骤S202、通过第一通信端点发送连接请求，以用于和对端设备建立通信连接，同时，通过第三通信端点进行通信连接的占位。步骤S203、在第一通信端点发送连接请求后的时长满足切换时间阈值时，将第二数据流中的连接由第三通信端点切换至所述第二通信端点，通过第二通信端点发送连接请求，以用于和对端设备建立通信连接。步骤S204、基于所述第一通信端点与所述对端设备的通信连接情况，关闭或保持所述第二通信端点与所述对端设备的通信连接。步骤S205、在第二通信端点发送连接请求后的时长满足切换时间阈值时，通过第四通信端点发送连接请求，以用于和对端设备建立通信连接。在一个实施例中，除了创建第一数据流和第二数据流外，进一步创建第三数据流，可选的，该第三数据流包括第四通信端点，用于建立和对端设备的通信连接。当然，该第三数据流中除包含第四通信端点外，还可包含用于占位的第五通信端点，其占位功能如前第二数据流中的第三通信端点所述，此处不再赘述。可选的，以切换时间阈值为10秒为例，针对第一数据流中第一通信端点发其连接请求后，第二数据流在10秒后由第三通信端点切换至第二通信端点，以通过第二通信端点开启尝试建立和对端设备的通信连接。在第二通信端点发送连接请求建立和对端设备的通信连接的10秒后，通过第三数据流中的第四通信端点发送连接请求至对端设备，以尝试和对端设备建立通信连接。需要说明的是，上述切换时间阈值的大小可根据不同需求进行适应性调节。在一个实施例中，在通过第四通信端点尝试和对端设备建立连接后，进一步包括判断前述第一数据流和第二数据流的通信端点是否和对端设备成功建立通信连接，如果成功建立，则关闭第四通信端点与对端设备的通信连接，如果第一数据流和第二数据流的通信端点不存在和对端设备成功建立通信连接的情况，则保持第四通信端点与所述对端设备的通信连接。需要说明的是，上述除了进一步创建第三数据流外，还可根据实际需求同步创建第四数据流、第五数据流等，此处不做数量限定。在一个实施例中，针对每个数据流中通信端点的连接，可以在整个通信控制链路中保持一个或多个数据流的通信连接的建立，如同时建立第一数据流和第二数据流与对端设备的通信连接的数据传输，也可以根据实际需求，仅保持一路数据流与对端设备的通信连接的建立，可灵活进行配置。由上述可知，在建立和对端设备的通信连接的过程中，通过创建多个数据流，并在满足时间切换阈值时进行对应数据流通信端点和对端设备的连接，由此循环进行多数据流机制下，和对端设备建立通信连接的尝试，实现了多连接备份机制，保证了连接的可靠性，降低了连接中断概率。在上述技术方案的基础上，在关闭或保持第二通信端点与对端设备的通信连接之后，还包括：在与对端设备连接异常的时长超过异常时间阈值的情况下，重新通过至少两个通信端点建立与对端设备的通信连接。可选的，重新开启每个数据流中从第一个通信端点开始尝试与对端设备建立通信连接。图4为本申请实施例提供的一种包含对权重设置的通信连接控制方法的流程图，如图4所示，具体包括：步骤S301、创建至少两个通信端点，所述至少两个通信端点包括第一通信端点、第二通信端点和第三通信端点，其中，第一通信端点对应第一数据流，第二通信端点、第三通信端点对应第二数据流。步骤S302、通过第一通信端点发送连接请求，以用于和对端设备建立通信连接，同时，通过第三通信端点进行通信连接的占位。步骤S303、在第一通信端点发送连接请求后的时长满足切换时间阈值时，将第二数据流中的连接由第三通信端点切换至所述第二通信端点，通过第二通信端点发送连接请求，以用于和对端设备建立通信连接。步骤S304、基于所述第一通信端点与所述对端设备的通信连接情况，关闭或保持所述第二通信端点与所述对端设备的通信连接。步骤S305、根据所述第一通信端点以及所述第二通信端点与所述对端设备的连接情况，设置所述第一通信端点和所述第二通信端点的权重值，用于发送数据包至所述对端设备时，基于所述权重值在所述第一数据流和所述第二数据流中选择发送所述数据包的数据流。在一个实施例中，进一步包括对通信端点的权重的设置，即根据具体的连接情况设置权重值，以后续基于权重值在第一数据流和第二数据流中选择发送数据包的数据流。可选的，在第一通信端点成功建立与对端设备的通信连接的情况下，设置第一通信端点的权重为第一预设值，设置第二通信端点的权重为第二预设值，在第一通信端点未成功建立与所述对端设备的通信连接的情况下，且通过第二通信端点与对端设备成功建立通信连接时，设置第二通信端点的权重为第三预设值，其中，该第一预设值大于所述第二预设值，且小于所述第三预设值。需要说明的时，上述权重预设值的设置仅为示例性的说明，可以选择设置其它数值，数值大小之间的关系也非固定，其根据后续选择的排序设置可相应设置。在一个实施例中，后续进行数据包的发送时，以上述权重的设置方式为例，选择权重值最大的通信端点对应的数据流进行数据包的发送。在另一个实施例中，针对不同数据包类型可采用不同的数据流进行传输。可选的，如和对端设备建立两路数据流，分别通过各自的通信端点成功建立通信连接后，每路数据流针对单一类型的数据包进行发送，如数据包分为视频流数据包和音频流数据包，针对音频流数据包其通过第一数据流进行传输，针对视频数据包其通过第二数据流进行传数，由此实现了数据包的分类型分发功能，提高了数据传输效率。由上述可知，通过不同数据流通信节点权重的设置，使得数据包传输时选择稳定的通信链路进行传输，同时，多路数据流的传输设置，可实现数据包的分类分发功能，具有灵活和广泛的场景适用性。图5为本申请实施例提供的一种通信连接控制装置的结构框图，该装置用于执行上述实施例提供的通信连接控制方法，具备执行方法相应的功能模块和有益效果。如图5所示，该装置具体包括：通信端点创建模块101、连接建立模块102、连接切换模块103和连接开闭模块104，其中，通信端点创建模块101，配置为创建至少两个通信端点，所述至少两个通信端点包括第一通信端点和第二通信端点；连接建立模块102，配置为通过所述第一通信端点发送连接请求，以用于和对端设备建立通信连接；连接切换模块103，配置为在所述第一通信端点发送连接请求后的时长满足切换时间阈值时，通过所述第二通信端点发送连接请求，以用于和所述对端设备建立通信连接；连接开闭模块104，配置为基于所述第一通信端点与所述对端设备的通信连接情况，关闭或保持所述第二通信端点与所述对端设备的通信连接。由上述方案可知，通过创建至少两个通信端点，其中，至少两个通信端点包括第一通信端点和第二通信端点，通过第一通信端点发送连接请求，以用于和对端设备建立通信连接，在第一通信端点发送连接请求后的时长满足切换时间阈值时，通过第二通信端点发送连接请求，以用于和所述对端设备建立通信连接，基于第一通信端点与对端设备的通信连接情况，确定是否关闭所述第二通信端点与对端设备的通信连接，实现了灵活可控的通信选择，降低了通信连接不稳定导致通信中断的概率，提升了通信连接质量。在一个可能的实施例中，所述连接开闭模块104，配置为：判断所述第一通信端点与所述对端设备是否成功建立通信连接；响应于成功建立通信连接的判断结果，关闭所述第二通信端点与所述对端设备的通信连接；响应于未成功建立通信连接的判断结果，保持所述第二通信端点与所述对端设备的通信连接，关闭所述第一通信端点与所述对端设备的通信连接。在一个可能的实施例中，所述至少两个通信端点还包括第三通信端点，所述第三通信端点为空连接端点，所述第一通信端点对应第一数据流，所述两个通信端点和所述第三通信端点对应第二数据流，所述连接建立模块，还配置为：通过所述第三通信端点进行通信连接的占位；将所述第二数据流中的连接由所述第三通信端点切换至所述第二通信端点，通过所述第二通信端点发送连接请求。在一个可能的实施例中，所述第一通信端点基于UDP协议与所述对端设备建立通信连接，所述第二通信端点基于TCP协议与所述对端设备建立通信连接。在一个可能的实施例中，所述连接开闭模块，还配置为：在所述关闭或保持所述第二通信端点与所述对端设备的通信连接之后，在与所述对端设备连接异常的时长超过异常时间阈值的情况下，重新通过所述至少两个通信端点建立与所述对端设备的通信连接。在一个可能的实施例中，该装置还包括权重设置模块，配置为：根据所述第一通信端点以及所述第二通信端点与所述对端设备的连接情况，设置所述第一通信端点和所述第二通信端点的权重值，用于发送数据包至所述对端设备时，基于所述权重值在所述第一数据流和所述第二数据流中选择发送所述数据包的数据流。在一个可能的实施例中，所述权重设置模块，配置为：在所述第一通信端点成功建立与所述对端设备的通信连接的情况下，设置所述第一通信端点的权重为第一预设值，设置所述第二通信端点的权重为第二预设值，在所述第一通信端点未成功建立与所述对端设备的通信连接的情况下，且通过所述第二通信端点与所述对端设备成功建立通信连接时，设置所述第二通信端点的权重为第三预设值，所述第一预设值大于所述第二预设值，且小于所述第三预设值。在一个可能的实施例中，该装置还包括数据传输模块，配置为：选择权重值最大的通信端点对应的数据流进行所述数据包的发送。在一个可能的实施例中，所述至少两个通信端点还包括第四通信端点，所述第四通信端点对应第三数据流，所述连接切换模块103，还配置为：在所述通过所述第二通信端点发送连接请求之后，在所述第二通信端点发送连接请求后的时长满足所述切换时间阈值时，通过所述第四通信端点发送连接请求，以用于和所述对端设备建立通信连接。图6为本申请实施例提供的一种通信连接控制设备的结构示意图，如图6所示，该设备包括处理器201、存储器202、输入装置203和输出装置204；设备中处理器201的数量可以是一个或多个，图6中以一个处理器201为例；设备中的处理器201、存储器202、输入装置203和输出装置204可以通过总线或其他方式连接，图6中以通过总线连接为例。存储器202作为一种计算机可读存储介质，可用于存储软件程序、计算机可执行程序以及模块，如本申请实施例中的通信连接控制方法对应的程序指令/模块。处理器201通过运行存储在存储器202中的软件程序、指令以及模块，从而执行设备的各种功能应用以及数据处理，即实现上述的通信连接控制方法。输入装置203可用于接收输入的数字或字符信息，以及产生与设备的用户设置以及功能控制有关的键信号输入。输出装置204可包括显示屏等显示设备。本申请实施例还提供一种包含计算机可执行指令的存储介质，所述计算机可执行指令在由计算机处理器执行时用于执行一种上述实施例描述的通信连接控制方法，其中，包括：创建至少两个通信端点，所述至少两个通信端点包括第一通信端点和第二通信端点；通过所述第一通信端点发送连接请求，以用于和对端设备建立通信连接；在所述第一通信端点发送连接请求后的时长满足切换时间阈值时，通过所述第二通信端点发送连接请求，以用于和所述对端设备建立通信连接；基于所述第一通信端点与所述对端设备的通信连接情况，关闭或保持所述第二通信端点与所述对端设备的通信连接。值得注意的是，上述通信连接控制装置的实施例中，所包括的各个单元和模块只是按照功能逻辑进行划分的，但并不局限于上述的划分，只要能够实现相应的功能即可；另外，各功能单元的具体名称也只是为了便于相互区分，并不用于限制本申请实施例的保护范围。在一些可能的实施方式中，本申请提供的方法的各个方面还可以实现为一种程序产品的形式，其包括程序代码，当所述程序产品在计算机设备上运行时，所述程序代码用于使所述计算机设备执行本说明书上述描述的根据本申请各种示例性实施方式的方法中的步骤，例如，所述计算机设备可以执行本申请实施例所记载的通信连接控制方法。所述程序产品可以采用一个或多个可读介质的任意组合实现。
