标题title
储能电池充放电功率控制方法、装置及电池控制系统
摘要abst
本申请提供了一种储能电池充放电功率控制方法、装置及电池控制系统，方法应用于预存有多种电池类型分别对应的功率预测模型的电池控制系统；每种功率预测模型为应用该电池类型对应的训练样本集，对遗传算法优化后的BP神经网络进行训练得到；方法包括：获取待控制储能电池的目标电池类型和当前电池工作参数；查找目标电池类型对应的目标功率预测模型；将当前电池工作参数输入至目标功率预测模型进行预测，得到待控制储能电池对应的最佳充放电功率；控制待控制储能电池在最佳充放电功率下工作。本申请针对不同的电池类型，通过不同的模型预测最佳充放电功率，对电池充放电进行控制，可以提高电池的使用寿命。
权利要求书clms
1.一种储能电池充放电功率控制方法，其特征在于，所述方法应用于电池控制系统；所述系统中预存有多种电池类型分别对应的功率预测模型；每种所述功率预测模型为应用该电池类型对应的训练样本集，对遗传算法优化后的BP神经网络进行训练得到；所述训练样本集与该电池类型的电池特性相关；所述方法包括：获取待控制储能电池的目标电池类型和当前电池工作参数；所述当前电池工作参数包括：工作温度、SOH和SOC；查找所述目标电池类型对应的目标功率预测模型；将所述当前电池工作参数输入至所述目标功率预测模型进行预测，得到所述待控制储能电池对应的最佳充放电功率；所述最佳充放电功率是指在所述当前电池工作参数下，所述待控制储能电池充放电相同时间，电池内阻变化量最小的充放电功率；控制所述待控制储能电池在所述最佳充放电功率下工作；所述目标功率预测模型的训练过程如下：获取目标电池类型对应的目标训练样本集；所述目标训练样本集中的样本包括：预设电池工作参数，以及目标电池类型的储能电池在所述预设电池工作参数下对应的最佳充放电功率；所述预设电池工作参数包括：预设温度、预设SOC区间和预设SOH；根据由所述目标训练样本集中样本确定的输入参数和输出参数，确定BP神经网络的拓扑结构；设定所述BP神经网络的初始权值和初始阈值，采用所述目标训练样本集中预设数量的目标训练样本作为初始种群结合遗传算法对所述初始权值和初始阈值进行优化，得到优化后的BP神经网络；通过所述目标训练样本集中所有的目标训练样本对优化后的BP神经网络进行训练，直到满足迭代次数或达到误差条件，得到所述目标功率预测模型；获取目标电池类型对应的目标训练样本集的步骤，包括：依次将不同的预设电池工作参数作为目标电池类型的当前工作参数，均执行以下步骤：控制所述目标电池类型的多个储能电池在所述当前工作参数及额度电压下，以不同的充放电功率进行循环充电放电过程达到指定时间；检测所述循环充电放电过程中，每个所述储能电池的内阻变化量；将最小内阻变化量的储能电池对应的充放电功率、以及所述当前工作参数，作为一条目标训练样本。2.根据权利要求1所述的方法，其特征在于，采用目标训练样本集中一定量的目标训练样本作为初始种群结合遗传算法对所述初始权值和初始阈值进行优化，得到优化后的BP神经网络的步骤，包括：对所述BP神经网络的初始权值和初始阈值进行编码，构建包含指定数量的个体的初始种群；将所述初始种群作为当前种群，执行以下判断步骤：针对所述当前种群中每个个体下的当前BP神经网络，基于所述当前BP神经网络的误差函数，确定所述个体的适应度；判断适应度最大的最优个体是否满足终止条件，或者判断当前迭代次数是否达到预设次数；如果是，将所述最优个体对应的当前BP神经网络作为优化后的BP神经网络；如果否，基于每个所述个体对应的适应度，对所述当前种群中的个体进行选择操作、交叉操作、变异操作，形成新种群，将所述新种群作为所述当前种群，继续执行所述判断步骤。3.根据权利要求2所述的方法，其特征在于，基于所述当前BP神经网络的误差函数，确定所述个体的适应度的步骤，包括：通过所述目标训练样本集对所述当前BP神经网络进行训练和测试，得到所述当前BP神经网络各节点对应的预测结果；根据下式计算所述个体对应的适应度：其中，S为个体对应的适应度；n为当前BP神经网络的总输出节点数，Ti为当前BP神经网络第i个节点的期望结果，Pi为当前BP神经网络第i个节点的预测结果。4.根据权利要求3所述的方法，其特征在于，基于每个所述个体对应的适应度，对所述当前种群中的个体进行选择操作的步骤，包括：采用轮盘赌法对所述当前种群中的个体进行选择，每个所述个体被选中的概率Bi为：其中，Si为个体i的适应度，K为当前种群中的个体总数量。5.根据权利要求1所述的方法，其特征在于，通过所述目标训练样本集中所有的目标训练样本对优化后的BP神经网络进行训练，直到满足迭代次数或达到误差条件，得到所述目标功率预测模型的步骤，包括：将所述目标训练样本集中的第一个样本作为当前样本，执行以下训练步骤：将所述当前样本输入至所述优化后的BP神经网络，得到所述当前样本对应的输出结果；基于所述输出结果和期望结果，计算所述当前样本对应的输出误差；如果所述输出误差中存在SOH异常损耗误差，反向传播并调整所述优化后的BP神经网络的权值和阈值以更新所述优化后的BP神经网络，获取下一个样本作为所述当前样本，继续执行所述训练步骤，直到遍历完所述训练样本集；计算所述优化后的BP神经网络的平均误差；判断所述平均误差是否达到预设条件或当前迭代次数是否达到预设次数，如果是，将最后一次优化后的BP神经网络作为目标功率预测模型；如果否，将最后一次优化后的BP神经网络对应的权值和阈值作为所述初始权值和初始阈值，继续执行通过遗传算法对所述初始权值和初始阈值进行优化，得到优化后的BP神经网络的步骤。6.一种储能电池充放电功率控制装置，其特征在于，所述装置应用于电池控制系统；所述系统中预存有多种电池类型分别对应的功率预测模型；每种所述功率预测模型为应用该电池类型对应的训练样本集，对遗传算法优化后的BP神经网络进行训练得到；所述训练样本集与该电池类型的电池特性相关；所述装置包括：参数获取模块，用于获取待控制储能电池的目标电池类型和当前电池工作参数；所述当前电池工作参数包括：工作温度、SOH和SOC；模型查找模块，用于查找所述目标电池类型对应的目标功率预测模型；预测模块，用于将所述当前电池工作参数输入至所述目标功率预测模型进行预测，得到所述待控制储能电池对应的最佳充放电功率；所述最佳充放电功率是指在所述当前电池工作参数下，所述待控制储能电池充放发电相同时间，电池内阻变化量最小的充放电功率；控制模块，用于控制所述待控制储能电池在所述最佳充放电功率下工作；模型训练模块，用于执行以下目标功率预测模型的训练过程：获取目标电池类型对应的目标训练样本集；所述目标训练样本集中的样本包括：预设电池工作参数，以及目标电池类型的储能电池在所述预设电池工作参数下对应的最佳充放电功率；所述预设电池工作参数包括：预设温度、预设SOC区间和预设SOH；根据由所述目标训练样本集中样本确定的输入参数和输出参数，确定BP神经网络的拓扑结构；设定所述BP神经网络的初始权值和初始阈值，采用目标训练样本集中预设数量的目标训练样本作为初始种群结合遗传算法对所述初始权值和初始阈值进行优化，得到优化后的BP神经网络；通过所述目标训练样本集中所有的目标训练样本对优化后的BP神经网络进行训练，直到满足迭代次数或达到误差条件，得到所述目标功率预测模型；所述模型训练模块，还用于：依次将不同的预设电池工作参数作为目标电池类型的当前工作参数，均执行以下步骤：控制所述目标电池类型的多个储能电池在所述当前工作参数及额度电压下，以不同的充放电功率进行循环充电放电过程达到指定时间；检测所述循环充电放电过程中，每个所述储能电池的内阻变化量；将最小内阻变化量的储能电池对应的充放电功率、以及所述当前工作参数，作为一条目标训练样本。7.一种电池控制系统，其特征在于，包括处理器和存储器，所述存储器存储有能够被所述处理器执行的计算机可执行指令，所述处理器执行所述计算机可执行指令以实现权利要求1至5任一项所述的方法。8.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机可执行指令，所述计算机可执行指令在被处理器调用和执行时，计算机可执行指令促使处理器实现权利要求1至5任一项所述的方法。
说明书desc
技术领域本申请涉及储能电池技术领域，尤其是涉及一种储能电池充放电功率控制方法、装置及电池控制系统。背景技术储能电池作为整个储能系统的关键部件，理论上其使用寿命可以达到十年以上，但是实际使用年限只不过五六年，所以对于储能电池控制充放电调优的措施必不可少。目前，储能行业的能源管控普遍依赖EMS能源管理系统来实现，EMS大致包含数据采集、网络监控、能量调度和网络数据分析四大类功能。然而针对储能电池的管控来说，EMS仍停留在对本地的各个电池设备进行简单的功率匹配与管理，这就导致储能电池的使用寿命与理论寿命时长相差甚远，严重影响整个储能系统的性能。发明内容本申请的目的在于提供一种储能电池充放电功率控制方法、装置及电池控制系统，针对不同类型的储能电池，选用不同的功率预测模型进行最佳充放电功率的预测，并控制储能电池在最佳充放电功率下工作，由于功率预测模型是根据不同电池特性的样本对通过遗传算法优化好的BP神经网络训练得到的，也即针对不同的电池特性通过算法层面的优化对电池充放电功率进行了调优，这样不仅可以延电池寿命，而且增加了整个储能系统的安全性能。第一方面，本申请实施例提供一种储能电池充放电功率控制方法，方法应用于电池控制系统；系统中预存有多种电池类型分别对应的功率预测模型；每种功率预测模型为应用该电池类型对应的训练样本集，对遗传算法优化后的BP神经网络进行训练得到；训练样本集与该电池类型的电池特性相关；方法包括：获取待控制储能电池的目标电池类型和当前电池工作参数；当前电池工作参数包括：工作温度、SOH和SOC；查找目标电池类型对应的目标功率预测模型；将当前电池工作参数输入至目标功率预测模型进行预测，得到待控制储能电池对应的最佳充放电功率；最佳充放电功率是指在当前电池工作参数下，待控制储能电池充放电相同时间，电池内阻变化量最小的充放电功率；控制待控制储能电池在最佳充放电功率下工作；目标功率预测模型的训练过程如下：获取目标电池类型对应的目标训练样本集；目标训练样本集中的样本包括：预设电池工作参数，以及目标电池类型的储能电池在预设电池工作参数下对应的最佳充放电功率；预设电池工作参数包括：预设温度、预设SOC区间和预设SOH；根据由目标训练样本集中样本确定的输入参数和输出参数，确定BP神经网络的拓扑结构；设定BP神经网络的初始权值和初始阈值，采用目标训练样本集中预设数量的目标训练样本作为初始种群结合遗传算法对初始权值和初始阈值进行优化，得到优化后的BP神经网络；通过目标训练样本集中所有的目标训练样本对优化后的BP神经网络进行训练，直到满足迭代次数或达到误差条件，得到目标功率预测模型；获取目标电池类型对应的目标训练样本集的步骤，包括：依次将不同的预设电池工作参数作为目标电池类型的当前工作参数，均执行以下步骤：控制目标电池类型的多个储能电池在当前工作参数及额度电压下，以不同的充放电功率进行循环充电放电过程达到指定时间；检测循环充电放电过程中，每个储能电池的内阻变化量；将最小内阻变化量的储能电池对应的充放电功率、以及当前工作参数，作为一条目标训练样本。在本申请较佳的实施方式中，上述用目标训练样本集中一定量的目标训练样本作为初始种群结合遗传算法对初始权值和初始阈值进行优化，得到优化后的BP神经网络的步骤，包括：对BP神经网络的初始权值和初始阈值进行编码，构建包含指定数量的个体的初始种群；将初始种群作为当前种群，执行以下判断步骤：针对当前种群中每个个体下的当前BP神经网络，基于当前BP神经网络的误差函数，确定个体的适应度；判断适应度最大的最优个体是否满足终止条件，或者判断当前迭代次数是否达到预设次数；如果是，将最优个体对应的当前BP神经网络作为优化后的BP神经网络；如果否，基于每个个体对应的适应度，对当前种群中的个体进行选择操作、交叉操作、变异操作，形成新种群，将新种群作为当前种群，继续执行判断步骤。在本申请较佳的实施方式中，上述基于当前BP神经网络的误差函数，确定个体的适应度的步骤，包括：通过目标训练样本集对当前BP神经网络进行训练和测试，得到当前BP神经网络各节点对应的预测结果；根据下式计算个体对应的适应度：其中，S为个体对应的适应度；n为当前BP神经网络的总输出节点数，Ti为当前BP神经网络第i个节点的期望结果，Pi为当前BP神经网络第i个节点的预测结果。在本申请较佳的实施方式中，上述基于每个个体对应的适应度，对当前种群中的个体进行选择操作的步骤，包括：采用轮盘赌法对当前种群中的个体进行选择，每个个体被选中的概率Bi为：其中，Si为个体i的适应度，K为当前种群中的个体总数量。在本申请较佳的实施方式中，上述通过目标训练样本集中所有的目标训练样本对优化后的BP神经网络进行训练，直到满足迭代次数或达到误差条件，得到目标功率预测模型的步骤，包括：将目标训练样本集中的第一个样本作为当前样本，执行以下训练步骤：将当前样本输入至优化后的BP神经网络，得到当前样本对应的输出结果；基于输出结果和期望结果，计算当前样本对应的输出误差；如果输出误差中存在SOH异常损耗误差，反向传播并调整优化后的BP神经网络的权值和阈值以更新优化后的BP神经网络，获取下一个样本作为当前样本，继续执行训练步骤，直到遍历完训练样本集；计算优化后的BP神经网络的平均误差；判断平均误差是否达到预设条件或当前迭代次数是否达到预设次数，如果是，将最后一次优化后的BP神经网络作为目标功率预测模型；如果否，将最后一次优化后的BP神经网络对应的权值和阈值作为初始权值和初始阈值，继续执行通过遗传算法对初始权值和初始阈值进行优化，得到优化后的BP神经网络的步骤。第二方面，本申请实施例还提供一种储能电池充放电功率控制装置，装置应用于电池控制系统；系统中预存有多种电池类型分别对应的功率预测模型；每种功率预测模型为应用该电池类型对应的训练样本集，对遗传算法优化后的BP神经网络进行训练得到；训练样本集与该电池类型的电池特性相关；装置包括：参数获取模块，用于获取待控制储能电池的目标电池类型和当前电池工作参数；当前电池工作参数包括：工作温度、SOH和SOC；模型查找模块，用于查找目标电池类型对应的目标功率预测模型；预测模块，用于将当前电池工作参数输入至目标功率预测模型进行预测，得到待控制储能电池对应的最佳充放电功率；最佳充放电功率是指在当前电池工作参数下，待控制储能电池充放发电相同时间，电池内阻变化量最小的充放电功率；控制模块，用于控制待控制储能电池在最佳充放电功率下工作；模型训练模块，用于执行以下目标功率预测模型的训练过程：获取目标电池类型对应的目标训练样本集；目标训练样本集中的样本包括：预设电池工作参数，以及目标电池类型的储能电池在预设电池工作参数下对应的最佳充放电功率；预设电池工作参数包括：预设温度、预设SOC区间和预设SOH；根据由目标训练样本集中样本确定的输入参数和输出参数，确定BP神经网络的拓扑结构；设定BP神经网络的初始权值和初始阈值，采用目标训练样本集中预设数量的目标训练样本作为初始种群结合遗传算法对初始权值和初始阈值进行优化，得到优化后的BP神经网络；通过目标训练样本集中所有的目标训练样本对优化后的BP神经网络进行训练，直到满足迭代次数或达到误差条件，得到目标功率预测模型；模型训练模块，还用于：依次将不同的预设电池工作参数作为目标电池类型的当前工作参数，均执行以下步骤：控制目标电池类型的多个储能电池在当前工作参数及额度电压下，以不同的充放电功率进行循环充电放电过程达到指定时间；检测循环充电放电过程中，每个储能电池的内阻变化量；将最小内阻变化量的储能电池对应的充放电功率、以及当前工作参数，作为一条目标训练样本。第三方面，本申请实施例还提供一种电池控制系统，包括处理器和存储器，存储器存储有能够被处理器执行的计算机可执行指令，处理器执行计算机可执行指令以实现上述第一方面所述的方法。第四方面，本申请实施例还提供一种计算机可读存储介质，计算机可读存储介质存储有计算机可执行指令，计算机可执行指令在被处理器调用和执行时，计算机可执行指令促使处理器实现上述第一方面所述的方法。本申请实施例提供的一种储能电池充放电功率控制方法、装置及电池控制系统中，方法应用于电池控制系统；系统中预存有多种电池类型分别对应的功率预测模型；每种功率预测模型为应用该电池类型对应的训练样本集，对遗传算法优化后的BP神经网络进行训练得到；训练样本集与该电池类型的电池特性相关；方法包括：获取待控制储能电池的目标电池类型和当前电池工作参数；当前电池工作参数包括：工作温度、SOH和SOC；查找目标电池类型对应的目标功率预测模型；将当前电池工作参数输入至目标功率预测模型进行预测，得到待控制储能电池对应的最佳充放电功率；最佳充放电功率是指在当前电池工作参数下，待控制储能电池充放电相同时间，电池内阻变化量最小的充放电功率；控制待控制储能电池在最佳充放电功率下工作；目标功率预测模型的训练过程如下：获取目标电池类型对应的目标训练样本集；目标训练样本集中的样本包括：预设电池工作参数，以及目标电池类型的储能电池在预设电池工作参数下对应的最佳充放电功率；预设电池工作参数包括：预设温度、预设SOC区间和预设SOH；根据由目标训练样本集中样本确定的输入参数和输出参数，确定BP神经网络的拓扑结构；设定BP神经网络的初始权值和初始阈值，采用目标训练样本集中预设数量的目标训练样本作为初始种群结合遗传算法对初始权值和初始阈值进行优化，得到优化后的BP神经网络；通过目标训练样本集中所有的目标训练样本对优化后的BP神经网络进行训练，直到满足迭代次数或达到误差条件，得到目标功率预测模型；获取目标电池类型对应的目标训练样本集的步骤，包括：依次将不同的预设电池工作参数作为目标电池类型的当前工作参数，均执行以下步骤：控制目标电池类型的多个储能电池在当前工作参数及额度电压下，以不同的充放电功率进行循环充电放电过程达到指定时间；检测循环充电放电过程中，每个储能电池的内阻变化量；将最小内阻变化量的储能电池对应的充放电功率、以及当前工作参数，作为一条目标训练样本。本申请实施例中，针对不同类型的储能电池，选用不同的功率预测模型进行最佳充放电功率的预测，并控制储能电池在最佳充放电功率下工作，由于功率预测模型是根据不同电池特性的样本对通过遗传算法优化好的BP神经网络训练得到的，也即针对不同的电池特性通过算法层面的优化对电池充放电功率进行了调优，这样不仅可以延电池寿命，对整个系统的安全性更是多了一份保障。附图说明为了更清楚地说明本申请具体实施方式或现有技术中的技术方案，下面将对具体实施方式或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图是本申请的一些实施方式，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例提供的一种储能电池充放电功率控制方法的流程图；图2为本申请实施例提供的另一种储能电池充放电功率控制方法的流程图；图3为本申请实施例提供的另一种储能电池充放电功率控制方法的示意图；图4为本申请实施例提供的一种储能电池充放电功率控制装置的结构框图；图5为本申请实施例提供的一种电池控制系统的结构示意图。具体实施方式下面将结合实施例对本申请的技术方案进行清楚、完整地描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。现有技术中，通常采用EMS能源管理系统对储能电池进行管控，然而目前EMS对储能电池的管控方式，仍停留在对本地的各个电池设备进行简单的功率匹配与管理，这就导致储能电池的使用寿命与理论寿命时长相差甚远，严重影响整个储能系统的性能。基于此，本申请实施例提供一种储能电池充放电功率控制方法、装置及电池控制系统，为便于对本实施例进行理解，首先对本申请实施例所公开的一种储能电池充放电功率控制方法进行详细介绍。现有技术中往往是针对单独品牌的电芯做功率匹配，无算法优化；而本申请实施例可以针对不同电芯厂家的不同电池类型的储能电池进行对应的功率匹配，并使用相应的智能算法进行分析优化。图1为本申请实施例提供的一种储能电池充放电功率控制方法的流程图，该方法应用于电池控制系统；系统中预存有多种电池类型分别对应的功率预测模型；电池类型可以包括电池品牌和/或电池型号，每种功率预测模型为应用该电池类型对应的训练样本集，对遗传算法优化后的BP神经网络进行训练得到；训练样本集与该电池类型的电池特性相关，即训练样本集中的样本可以包括该电池类型的储能电池在多种预设电池工作参数下对应的最佳充放电功率；预设电池工作参数包括：预设温度、预设SOC区间和预设SOH；该方法具体包括以下步骤：步骤S102，获取待控制储能电池的目标电池类型和当前电池工作参数；当前电池工作参数包括：工作温度、SOH和SOC。上述目标电池类型为待控制储能电池的品牌和/或型号，当前电池工作参数中，SOC指的是某一时刻这个储能电池还存有多少可用的电能，而SOH通常理解为这个储能电池的存放可用电能的体积还剩多少，也就是它还能存放的可用电能是多少。需要说明的是，上述获取待控制储能电池的当前电池工作参数，可以按照一定的时间间隔进行周期性采样。步骤S104，查找目标电池类型对应的目标功率预测模型。由于上述系统中预存有各种电池类型分别对应的功率预测模型，因此，可以基于上述对应关系查找到目标电池类型对应的目标功率预测模型。步骤S106，将当前电池工作参数输入至目标功率预测模型进行预测，得到待控制储能电池对应的最佳充放电功率。目标功率预测模型是应用目标电池类型的训练样本集对遗传算法优化后的BP神经网络进行训练得到的，目标电池类型对应的训练样本集包括：目标电池类型的储能电池在多种预设电池工作参数下对应的最佳充放电功率；预设电池工作参数包括：预设温度、预设SOC区间和预设SOH；因此，该目标功率预测模型可以基于待控制储能电池的当前电池工作参数，精准地预测该储能电池的最佳充放电功率。步骤S108，控制待控制储能电池在最佳充放电功率下工作。本申请实施例提供的储能电池充放电功率控制方法中，方法应用于电池控制系统；系统中预存有多种电池类型分别对应的功率预测模型；每种功率预测模型为应用该电池类型对应的训练样本集，对遗传算法优化后的BP神经网络进行训练得到；训练样本集与该电池类型的电池特性相关；本方案能够针对不同类型的储能电池，选用不同的功率预测模型进行最佳充放电功率的预测，并控制储能电池在最佳充放电功率下工作，由于功率预测模型是根据不同电池特性的样本对通过遗传算法优化好的BP神经网络训练得到的，也即针对不同的电池特性通过算法层面的优化对电池充放电功率进行了调优，这样不仅可以延电池寿命，对整个系统的安全性更是多了一份保障。本申请实施例还提供另一种储能电池充放电功率控制方法，该方法在上述实施例的基础上实现；本实施例重点描述模型的训练过程。上述多种电池类型分别对应的功率预测模型的训练过程均是一样的，不同之处仅在于样本内容，下面以上述目标功率预测模型的训练过程为例进行说明：参见图2所示，上述目标功率预测模型的训练过程如下：步骤S202，获取目标电池类型对应的目标训练样本集；目标训练样本集中的样本包括：预设电池工作参数，以及目标电池类型的储能电池在预设电池工作参数下对应的最佳充放电功率；预设电池工作参数包括：预设温度、预设SOC区间和预设SOH；上述目标训练样本集的具体获取过程如下：依次将不同的预设电池工作参数作为目标电池类型的当前工作参数，均执行以下步骤：控制目标电池类型的多个储能电池在当前工作参数及额度电压下，以不同的充放电功率进行循环充电放电过程达到指定时间；检测循环充电放电过程中，每个储能电池的内阻变化量；将最小内阻变化量的储能电池对应的充放电功率、以及当前工作参数，作为一条目标训练样本。具体实施时，可以针对目标电池类型的储能电池，在额度电压、预设温度、预设SOH和预设SO区间下，进行最小SOH的样本数据的采集：比如，一组测试电池工作在额度电压、相同的预设温度和预设SOH下，在相同的预设SOC区间以不同的充放电功率进行循环充电-放电相同的时间段，测量电池的内阻变化，找出内阻变化量最小的一个电芯、记录为＜温度1、SOH1、SOC区间1、最小内阻变化量电池对应的充放电功率1＞作为一条样本。在保持其他测试电池组在额度电压、相同的温度和SOH下，在相同SOC区间的前提下，在电池工作的温度范围内、以及最佳充放电深度范围内改变测试电芯组的工作温度、SOC区间或SOH，使测试电池组以不同的充放电功率进行循环充电-放电相同的时间段；依样找出内阻变化量最小的一个电池，记录为＜温度2、SOH2、SOC区间2、最小内阻变化量电池对应的充放电功率2＞作为另一条样本，以此类推，可以获取目标电池类型的储能电池在多种预设电池工作参数下对应的最佳充放电功率。步骤S204，根据由目标训练样本集中样本确定的输入参数和输出参数，确定BP神经网络的拓扑结构。比如，本申请实施例中，训练样本集中的样本包括目标电池类型的储能电池在多种预设电池工作参数下对应的最佳充放电功率，则可以将多种预设电池工作参数作为输入参数，最佳充放电功率作为输出参数，从而确定出BP神经网络的拓扑结构。BP神经网络的确定有以下两条重要的指导原则：1.对于一般的模式识别问题，三层网络可以很好地解决问题；2.在三层网络中，隐含层神经网络个数n2和输入层神经元个数n1之间有近似关系为：n2＝n1x2+1；在本案例中，由于样本有3个输入参数，1个输出参数，所以这里n2取值为7，设置的BP神经网络结构为3-7-1，即输入层有3个节点，隐含层有7个节点，输出层有1个节点，共有3x7+7x1＝28个权值，7+1＝8个阈值，所以遗传算法优化参数的个数28+8＝36。步骤S206，设定BP神经网络的初始权值和初始阈值，采用目标训练样本集中预设数量的目标训练样本作为初始种群结合遗传算法对初始权值和初始阈值进行优化，得到优化后的BP神经网络；BP神经网络的拓扑结构是根据样本的输入/输出参数个数确定的，这样就可以确定遗传算法优化参数的个数，从而确定种群个体的编码长度。因为遗传算法优化参数是BP神经网络的初始权值和阈值，只要网络结构已知，权值和阈值的个数就已知了。神经网络的权值和阈值一般是通过随机初始化为区间的随机数，引入遗传算法就是为了优化出最佳的初始权值和阈值。下面详细介绍通过遗传算法优化权值和阈值的过程，大致过程参见图3所示。对BP神经网络的初始权值和初始阈值进行编码，构建包含指定数量的个体的初始种群。个体编码可以使用二进制编码,每个个体均为一个二进制串，由输入层与隐含层连接权值、隐含层阈值、隐含层与输出层连接权值、输出层阈值四部分组成，每个权值和阈值使用M位的二进制编码,将所有权值和阈值的编码连接起来即为一个个体的编码。具体实施时，对BP神经网络的权值和阈值进行二进制编码，编码长度即个体的染色体长度n，1*10000＜＝2^n；其中权值和阈值的范围为0到1，10000为精确到0.01％，得出n为14，随机生成个数为1000的种群作为1000个随机解。即：就是随机选取1000个二进制编码对应的权值和阈值的初始个体构成初始种群。每个初始个体代表找寻最优初始权值与初始阈值的一个初始解。将初始种群作为当前种群，执行以下判断步骤：针对当前种群中每个个体下的当前BP神经网络，基于当前BP神经网络的误差函数，确定个体的适应度。通过训练样本集对当前BP神经网络进行训练和测试，得到当前BP神经网络各节点对应的预测结果；根据下式计算个体对应的适应度：其中，S为个体对应的适应度；n为当前BP神经网络的总输出节点数，Ti为当前BP神经网络第i个节点的期望结果，Pi为当前BP神经网络第i个节点的预测结果。判断适应度最大的最优个体是否满足终止条件，或者判断当前迭代次数是否达到预设次数。比如，最优个体的适应度是否满足预设要求，或者，当前迭代次数是否达到预设次数。如果是，将最优个体对应的当前BP神经网络作为优化后的BP神经网络。上述两个条件中有一个满足，即可将最优个体对应的当前BP神经网络作为优化后的BP神经网络。如果否，基于每个个体对应的适应度，对当前种群中的个体进行选择操作、交叉操作、变异操作，形成新种群，将新种群作为当前种群，继续执行判断步骤。上述两个条件都不满足时，则需要对当前种群中的个体进行选择操作、交叉操作、变异操作，形成新种群，将新种群作为上述当前种群，再循环执行上述判断步骤。本实施例中，选择操作可以采用轮盘赌法对所述当前种群中的个体进行选择，每个所述个体被选中的概率Bi为：其中，Si为个体i的适应度，K为当前种群中的个体总数量。上述交叉操作可以从种群中选择两个个体，按一定该路口交叉得到新个体。上述变异操作从种群中随机选择一个个体，按一定概率变异得到新个体。通过选择操作、交叉操作和变异操作后可以得到一个新种群。然后再执行前述判断步骤，直到确定出最优个体，即得到最优权值和最优阈值，然后将最优权值和最优阈值赋于BP神经网络，则得到优化后的BP神经网络。步骤S208，通过目标训练样本集中所有的目标训练样本对优化后的BP神经网络进行训练，直到满足迭代次数或达到误差条件，得到目标功率预测模型。在本申请较佳的实施方式中，上述获取目标电池类型对应的训练样本集的步骤，包括：在本申请较佳的实施方式中，上述通过遗传算法对初始权值和初始阈值进行优化，得到优化后的BP神经网络的步骤，包括：在本申请较佳的实施方式中，上述基于当前BP神经网络的误差函数，确定个体的适应度的步骤，包括：具体的训练过程如下：将训练样本集中的第一个样本作为当前样本，执行以下训练步骤：将当前样本输入至优化后的BP神经网络，得到当前样本对应的输出结果；基于输出结果和期望结果，计算当前样本对应的输出误差；如果输出误差中存在SOH异常损耗误差，反向传播并调整优化后的BP神经网络的权值和阈值以更新优化后的BP神经网络，获取下一个样本作为当前样本，继续执行上述训练步骤，直到遍历完训练样本集；计算优化后的BP神经网络的平均误差；判断平均误差是否达到预设条件或当前迭代次数是否达到预设次数，如果是，将最后一次优化后的BP神经网络作为目标功率预测模型；如果否，将最后一次优化后的BP神经网络对应的权值和阈值作为初始权值和初始阈值，继续执行通过遗传算法对初始权值和初始阈值进行优化，得到优化后的BP神经网络的步骤。需要说明的是，本实施例中通过神经网络模型得出的预测功率，保证了在当时的SOC，温度，SOH，电芯电压条件下，用此功率运行可以达到电池最佳工作状态以延迟电池寿命，但是如果系统需要更大功率进行充放电，系统会根据其预测值给出一定的调整，即既能满足电量充放需要，又尽可能的减少电池SOH损耗。对于图3所示的算法流程图中的SOH异常损耗是根据其当时的充放电功率结合整个电池全部历史数据中的SOH正常变化量对比得来的。针对以往的神经网络稳定性不高，最终权值与阈值容易陷入局部最优，使得功率匹配无法达到预期效果的问题，本申请实施例中利用了遗传算法对权值和阈值在全局内寻得一个近似最优解，再将其输送到神经网络中，进而极大的提高了运算效率与精度。本申请实施例提供的储能电池充放电功率控制方法中，首先利用遗传算法可以在全局范围内发生变异，在较优解中进行交叉，来选择最合适的BP神经网络的权值和阈值，然后再将其交给BP神经网络进行训练，训练小于SOH预期误差后结束训练，进行功率匹配；可以很大程度上解决了电池的实际充放电功率与当时环境条件不匹配而造成的电池SOH的损耗，从而延长了电池寿命，增加了整个储能系统的安全性能。基于上述方法实施例，本申请实施例还提供一种储能电池充放电功率控制装置，装置应用于电池控制系统；所述系统中预存有多种电池类型分别对应的功率预测模型；每种功率预测模型为应用该电池类型对应的训练样本集，对遗传算法优化后的BP神经网络进行训练得到；训练样本集与该电池类型的电池特性相关；参见图4所示，该装置包括：参数获取模块42，用于获取待控制储能电池的目标电池类型和当前电池工作参数；当前电池工作参数包括：工作温度、SOH和SOC；模型查找模块44，用于查找目标电池类型对应的目标功率预测模型；预测模块46，用于将当前工作相关参数输入至目标功率预测模型进行预测，得到待控制储能电池对应的最佳充放电功率；最佳充放电功率是指在当前电池工作参数下，待控制储能电池充放发电相同时间，电池内阻变化量最小的充放电功率；控制模块48，用于控制待控制储能电池在最佳充放电功率下工作。上述装置还包括：模型训练模块，用于执行以下目标功率预测模型的训练过程：获取目标电池类型对应的目标训练样本集；目标训练样本集中的样本包括：预设电池工作参数，以及目标电池类型的储能电池在预设电池工作参数下对应的最佳充放电功率；预设电池工作参数包括：预设温度、预设SOC区间和预设SOH；根据由目标训练样本集中样本确定的输入参数和输出参数，确定BP神经网络的拓扑结构；设定BP神经网络的初始权值和初始阈值，采用目标训练样本集中预设数量的目标训练样本作为初始种群结合遗传算法对初始权值和初始阈值进行优化，得到优化后的BP神经网络；通过目标训练样本集中所有的目标训练样本对优化后的BP神经网络进行训练，直到满足迭代次数或达到误差条件，得到目标功率预测模型；模型训练模块，还用于：依次将不同的预设电池工作参数作为目标电池类型的当前工作参数，均执行以下步骤：控制目标电池类型的多个储能电池在当前工作参数及额度电压下，以不同的充放电功率进行循环充电放电过程达到指定时间；检测循环充电放电过程中，每个储能电池的内阻变化量；将最小内阻变化量的储能电池对应的充放电功率、以及当前工作参数，作为一条目标训练样本。上述模型训练模块还用于：对BP神经网络的初始权值和初始阈值进行编码，构建包含指定数量的个体的初始种群；将初始种群作为当前种群，执行以下判断步骤：针对当前种群中每个个体下的当前BP神经网络，基于当前BP神经网络的误差函数，确定个体的适应度；判断适应度最大的最优个体是否满足终止条件，或者判断当前迭代次数是否达到预设次数；如果是，将最优个体对应的当前BP神经网络作为优化后的BP神经网络；如果否，基于每个个体对应的适应度，对当前种群中的个体进行选择操作、交叉操作、变异操作，形成新种群，将新种群作为当前种群，继续执行判断步骤。上述模型训练模块还用于：通过目标训练样本集对当前BP神经网络进行训练和测试，得到当前BP神经网络各节点对应的预测结果；根据下式计算个体对应的适应度：其中，S为个体对应的适应度；n为当前BP神经网络的总输出节点数，Ti为当前BP神经网络第i个节点的期望结果，Pi为当前BP神经网络第i个节点的预测结果。上述模型训练模块还用于：采用轮盘赌法对所述当前种群中的个体进行选择，每个所述个体被选中的概率Bi为：其中，Si为个体i的适应度，K为当前种群中的个体总数量。上述模型训练模块还用于：将目标训练样本集中的第一个样本作为当前样本，执行以下训练步骤：将当前样本输入至优化后的BP神经网络，得到当前样本对应的输出结果；基于输出结果和期望结果，计算当前样本对应的输出误差；如果输出误差中存在SOH异常损耗误差，反向传播并调整优化后的BP神经网络的权值和阈值以更新优化后的BP神经网络，获取下一个样本作为当前样本，继续执行训练步骤，直到遍历完训练样本集；计算优化后的BP神经网络的平均误差；判断平均误差是否达到预设条件或当前迭代次数是否达到预设次数，如果是，将最后一次优化后的BP神经网络作为目标功率预测模型；如果否，将最后一次优化后的BP神经网络对应的权值和阈值作为初始权值和初始阈值，继续执行通过遗传算法对初始权值和初始阈值进行优化，得到优化后的BP神经网络的步骤。本申请实施例提供的储能电池充放电功率控制装置，其实现原理及产生的技术效果和前述方法实施例相同，为简要描述，储能电池充放电功率控制装置的实施例部分未提及之处，可参考前述方法实施例中相应内容。本申请实施例还提供了一种电池控制系统，如图5所示，为该电池控制系统的结构示意图，其中，该电池控制系统包括处理器51和存储器50，该存储器50存储有能够被该处理器51执行的计算机可执行指令，该处理器51执行该计算机可执行指令以实现上述方法。在图5示出的实施方式中，该电池控制系统还包括总线52和通信接口53，其中，处理器51、通信接口53和存储器50通过总线52连接。其中，存储器50可能包含高速随机存取存储器，也可能还包括非不稳定的存储器，例如至少一个磁盘存储器。通过至少一个通信接口53实现该系统网元与至少一个其他网元之间的通信连接，可以使用互联网，广域网，本地网，城域网等。总线52可以是ISA总线、PCI总线或EISA总线等。所述总线52可以分为地址总线、数据总线、控制总线等。为便于表示，图5中仅用一个双向箭头表示，但并不表示仅有一根总线或一种类型的总线。处理器51可能是一种集成电路芯片，具有信号的处理能力。在实现过程中，上述方法的各步骤可以通过处理器51中的硬件的集成逻辑电路或者软件形式的指令完成。上述的处理器51可以是通用处理器，包括中央处理器、网络处理器等；还可以是数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等。结合本申请实施例所公开的方法的步骤可以直接体现为硬件译码处理器执行完成，或者用译码处理器中的硬件及软件模块组合执行完成。软件模块可以位于随机存储器，闪存、只读存储器，可编程只读存储器或者电可擦写可编程存储器、寄存器等本领域成熟的存储介质中。该存储介质位于存储器，处理器51读取存储器中的信息，结合其硬件完成前述实施例的方法的步骤。本申请实施例还提供了一种计算机可读存储介质，该计算机可读存储介质存储有计算机可执行指令，该计算机可执行指令在被处理器调用和执行时，该计算机可执行指令促使处理器实现上述方法，具体实现可参见前述方法实施例，在此不再赘述。本申请实施例所提供的方法、装置和系统的计算机程序产品，包括存储了程序代码的计算机可读存储介质，所述程序代码包括的指令可用于执行前面方法实施例中所述的方法，具体实现可参见方法实施例，在此不再赘述。除非另外具体说明，否则在这些实施例中阐述的部件和步骤的相对步骤、数字表达式和数值并不限制本申请的范围。所述功能如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个处理器可执行的非易失的计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。在本申请的描述中，需要说明的是，术语“中心”、“上”、“下”、“左”、“右”、“竖直”、“水平”、“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本申请和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本申请的限制。此外，术语“第一”、“第二”、“第三”仅用于描述目的，而不能理解为指示或暗示相对重要性。最后应说明的是：以上所述实施例，仅为本申请的具体实施方式，用以说明本申请的技术方案，而非对其限制，本申请的保护范围并不局限于此，尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，其依然可以对前述实施例所记载的技术方案进行修改或可轻易想到变化，或者对其中部分技术特征进行等同替换；而这些修改、变化或者替换，并不使相应技术方案的本质脱离本申请实施例技术方案的精神和范围，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应所述以权利要求的保护范围为准。
