标题title
单通道半双工软无设备快速收发方法、介质、设备和系统
摘要abst
本申请涉及一种单通道半双工软无设备快速收发方法、介质、设备和系统，对软件无线电设备驱动层、射频软件层和应用软件层进行了优化，通过初始化工作参数以及运行接收/发送流图程序的步骤，将更改接收/发送模式的相关工作参数从打开/关闭收发设备环节中分离出来，实现了打开或关闭设备无收发之分，大大减少了单通道半双工软无设备在通信过程中的延时，提高了信号传输效率，避免了两个设备天线之间的串扰，大幅度节省了成本。
权利要求书clms
1.一种单通道半双工软无设备快速收发方法，其特征在于，包括以下步骤：启动单通道半双工软无设备；初始化接收模式工作参数；启动数据接收模式，运行接收流图程序；所述接收流图程序用于接收和播放外来模拟音频信号；停止数据接收模式；初始化发送模式工作参数；启动数据发送模式，运行发送流图程序；所述发送流图程序用于发送本地模拟音频信号；停止数据发送模式；重复初始化接收模式工作参数到停止数据发送模式的步骤，执行单通道半双工软无设备的语音通信任务；所述语音通信任务结束后，关闭单通道半双工软无设备。2.根据权利要求1所述的单通道半双工软无设备快速收发方法，其特征在于，所述运行接收流图程序的过程，包括：接收外来模拟音频信号，将所述外来模拟音频信号转换成外来数字音频信号；对所述外来数字音频信号进行滤波；对滤波后的数字信号进行重采样，得到低采样率音频信号；对所述低采样率音频信号取模值，得到实数音频信号；去除所述实数音频信号的直流成分，得到去直流实数音频信号；去除所述去直流实数音频信号的高频分量，得到还原后的外来模拟音频信号，播放还原后的所述外来模拟音频信号。3.根据权利要求2所述的单通道半双工软无设备快速收发方法，其特征在于，所述去除所述实数音频信号的直流成分，得到去直流实数音频信号的过程，包括：所述实数音频信号减去自身平均值，得到所述去直流实数音频信号。4.根据权利要求1所述的单通道半双工软无设备快速收发方法，其特征在于，所述运行发送流图程序的过程，包括：输入本地模拟音频信号，将所述本地模拟音频信号转换成本地数字音频信号；去除所述本地数字音频信号的高频成分，得到低通实数音频信号；将所述低通实数音频信号转换为低通复数音频信号；对所述低通复数音频信号进行重采样，得到高采样率音频信号；对所述高采样率音频信号进行调制，发送调制后的所述高采样率音频信号至天线。5.根据权利要求4所述的单通道半双工软无设备快速收发方法，其特征在于，所述对所述低通复数音频信号进行重采样，得到高采样率音频信号的过程，包括：通过内嵌的一个常系数乘法器对所述低通复数音频信号进行两级重采样，得到高采样率音频信号。6.根据权利要求1所述的单通道半双工软无设备快速收发方法，其特征在于，所述接收模式和发送模式的工作参数包括：中心频率、采样率、带宽、增益值和偏置值。7.根据权利要求6所述的单通道半双工软无设备快速收发方法，其特征在于，所述初始化接收模式工作参数和初始化发送模式工作参数的过程中，通过调用初始化函数实现初始化。8.一种可读存储介质，其上存储有驱动程序，其特征在于，所述驱动程序被处理器执行时实现权利要求1至7中任一项所述的单通道半双工软无设备快速收发方法的步骤。9.一种单通道半双工软无设备，其特征在于，包括开关组件、初始化组件、模式切换组件、接收流图程序运行组件和发送流图程序运行组件；所述开关组件，用于启动和关闭单通道半双工软无设备；所述初始化组件，用于初始化接收模式工作参数和发送模式工作参数，所述接收模式和发送模式的工作参数包括：中心频率、采样率、带宽、增益值和偏置值；所述模式切换组件，用于启动、停止数据接收模式和数据发送模式；所述接收流图程序运行组件，用于执行接收流图程序；所述接收流图程序用于接收和播放外来模拟音频信号；所述发送流图程序运行组件，用于执行发送流图程序；所述发送流图程序用于发送本地模拟音频信号。10.根据权利要求9所述的单通道半双工软无设备，其特征在于，所述接收流图程序运行组件包括：开源移动通信协议信源模块、FIR滤波器、合理重采样模块、复数取模功能模块、隔离直流模块、低通滤波模块和音频信宿模块；所述开源移动通信协议信源模块，用于接收外来模拟音频信号，将所述外来模拟音频信号转换成外来数字音频信号；所述FIR滤波器，用于对所述外来数字音频信号进行滤波；所述合理重采样模块，用于对滤波后的数字信号进行重采样，得到低采样率音频信号；所述复数取模功能模块，用于对所述低采样率音频信号取模值，得到实数音频信号；所述隔离直流模块，用于所述实数音频信号通过减去自身平均值去除直流成分，得到去直流实数音频信号；所述低通滤波模块，用于去除所述去直流实数音频信号的高频分量，得到还原后的外来模拟音频信号；所述音频信宿模块，用于播放还原后的所述外来模拟音频信号。11.根据权利要求9所述的单通道半双工软无设备，其特征在于，所述发送流图程序运行组件包括：音频信源模块、低通滤波器、实数信号转复数信号模块、合理重采样模块和开源移动通信协议信宿模块；所述音频信源模块，用于输入本地模拟音频信号，将所述本地模拟音频信号转换成本地数字音频信号；所述低通滤波器，用于去除所述本地数字音频信号的高频成分，得到低通实数音频信号；所述实数信号转复数信号模块，用于将所述低通实数音频信号转换为低通复数音频信号；所述合理重采样模块，用于通过内嵌的一个常系数乘法器对所述低通复数音频信号进行两级重采样，得到高采样率音频信号；所述开源移动通信协议信宿模块，用于对所述高采样率音频信号进行调制，发送所述调制后的高采样率音频信号至天线。12.一种基于单通道半双工软无设备的射频平台测试系统，其特征在于，包括：干扰控制台、软件无线电干扰环境构设平台、模拟操作台接收端、模拟操作台发送端和权利要求9-11任一项所述的单通道半双工软无设备；其中，所述单通道半双工软无设备包括软件无线电射频平台接收端和软件无线电射频平台发送端；所述干扰控制台通过网络控制所述软件无线电干扰环境构设平台；所述软件无线电干扰环境构设平台用于发射干扰信号及测试干扰效果，所述干扰信号用于对所述软件无线电射频平台接收端和软件无线电射频平台发送端进行干扰；所述模拟操作台接收端通过网络控制所述软件无线电射频平台接收端；所述模拟操作台发送端通过网络控制所述软件无线电射频平台发送端。
说明书desc
技术领域本申请涉及软件无线电设备通信领域，特别是涉及一种单通道半双工软无设备快速收发方法、介质、设备和系统。背景技术随着软件无线电设备通信技术的发展，出现了单通道半双工软件无线电设备，单通道半双工软件无线电设备具有价格低廉、功能完善、性价比高等优点，非常适合教育科研机构使用，目前，可以将单通道半双工软无设备加上天线作为软无射频平台来实现数字语音通信。然而，单通道半双工软件无线电设备只有单通道，只能工作在半双工模式下，并且此设备的接收与发送过程的相关工作参数是不一样的，比如说中心频率、增益等，因此，要实现接收模式和发送模式的切换，需要重启设备来重置参数，这样使得单通道半双工软无射频平台进行收发切换时，存在超过2秒的切换延时，有时还会因一次切换失败而再次切换使得延时达到6秒以上，导致在单通道半双工软无射频平台的实际通信过程中，语音通信效果实时性差，且容易损坏设备。使用两个单通道半双工软件无线电设备，一个用于发送，另一个用于接收，可以解决切换的延时问题，但是两个设备之间容易相互干扰，使得通信效果不稳定，并且增加了成本。发明内容基于此，有必要针对上述技术问题，提供一种单通道半双工软无设备快速收发方法、介质、设备和系统，优化单通道半双工软无射频平台的收发转换问题。为了实现上述目的，本发明实施例采用以下技术方案：一方面，本发明实施例提供一种单通道半双工软无设备快速收发方法，包括以下步骤：启动单通道半双工软无设备；初始化接收模式工作参数；启动数据接收模式，运行接收流图程序；接收流图程序用于接收和播放外来模拟音频信号；停止数据接收模式；初始化发送模式工作参数；启动数据发送模式，运行发送流图程序；发送流图程序用于发送本地模拟音频信号；停止数据发送模式；重复初始化接收模式工作参数到停止数据发送模式的步骤，执行单通道半双工软无设备的语音通信任务；语音通信任务结束后，关闭单通道半双工软无设备。在其中一个实施例中，运行接收流图程序的过程，包括：接收外来模拟音频信号，将外来模拟音频信号转换成外来数字音频信号；对外来数字音频信号进行滤波；对滤波后的数字信号进行重采样，得到低采样率音频信号；对低采样率音频信号取模值，得到实数音频信号；去除实数音频信号的直流成分，得到去直流实数音频信号；去除去直流实数音频信号的高频分量，得到还原后的外来模拟音频信号，播放还原后的外来模拟音频信号。在其中一个实施例中，去除实数音频信号的直流成分，得到去直流实数音频信号的过程，包括：实数音频信号减去自身平均值，得到去直流实数音频信号。在其中一个实施例中，运行发送流图程序的过程，包括：输入本地模拟音频信号，将所述本地模拟音频信号转换成本地数字音频信号；去除本地数字音频信号的高频成分，得到低通实数音频信号；将低通实数音频信号转换为低通复数音频信号；对低通复数音频信号进行重采样，得到高采样率音频信号；对高采样率音频信号进行调制，发送调制后的高采样率音频信号至天线。在其中一个实施例中，对低通复数音频信号进行重采样，得到高采样率音频信号的过程，包括：通过内嵌的一个常系数乘法器对低通复数音频信号进行两级重采样，得到高采样率音频信号。在其中一个实施例中，接收模式和发送模式的工作参数包括：中心频率、采样率、带宽、增益值和偏置值。在其中一个实施例中，初始化接收模式工作参数和初始化发送模式工作参数的过程中，通过调用初始化函数实现初始化。一方面，本发明实施例提供一种可读存储介质，其上存储有驱动程序，驱动程序被处理器执行时实现上述任一单通道半双工软无设备快速收发方法的步骤。一方面，本发明实施例提供一种单通道半双工软无设备，包括开关组件、初始化组件、模式切换组件、接收流图程序运行组件和发送流图程序运行组件；开关组件，用于启动和关闭单通道半双工软无设备；初始化组件，用于初始化接收模式工作参数和发送模式工作参数，接收模式和发送模式的工作参数包括：中心频率、采样率、带宽、增益值和偏置值；模式切换组件，用于启动、停止数据接收模式和数据发送模式；接收流图程序运行组件，用于执行接收流图程序；接收流图程序用于接收和播放外来模拟音频信号；发送流图程序运行组件，用于执行发送流图程序；发送流图程序用于发送本地模拟音频信号。在其中一个实施例中，接收流图程序运行组件包括：开源移动通信协议信源模块、FIR滤波器、合理重采样模块、复数取模功能模块、隔离直流模块、低通滤波模块和音频信宿模块；开源移动通信协议信源模块，用于接收外来模拟音频信号，将外来模拟音频信号转换成外来数字音频信号；FIR滤波器，用于对外来数字音频信号进行滤波；合理重采样模块，用于对滤波后的数字信号进行重采样，得到低采样率音频信号；复数取模功能模块，用于对低采样率音频信号取模值，得到实数音频信号；隔离直流模块，用于实数音频信号通过减去自身平均值去除直流成分，得到去直流实数音频信号；低通滤波模块，用于去除去直流实数音频信号的高频分量，得到还原后的外来模拟音频信号；音频信宿模块，用于播放还原后的外来模拟音频信号。在其中一个实施例中，发送流图程序运行组件包括：音频信源模块、低通滤波器、实数信号转复数信号模块、合理重采样模块和开源移动通信协议信宿模块；音频信源模块，用于输入本地模拟音频信号，将本地模拟音频信号转换成本地数字音频信号；低通滤波器，用于去除本地数字音频信号的高频成分，得到低通实数音频信号；实数信号转复数信号模块，用于将低通实数音频信号转换为低通复数音频信号；合理重采样模块，用于通过内嵌的一个常系数乘法器对低通复数音频信号进行两级重采样，得到高采样率音频信号；开源移动通信协议信宿模块，用于对高采样率音频信号进行调制，发送调制后的高采样率音频信号至天线。另一方面，本发明实施例提供一种基于上述任一实施例中单通道半双工软无设备的射频平台测试系统，包括：干扰控制台、软件无线电干扰环境构设平台、模拟操作台接收端、模拟操作台发送端和上述任一单通道半双工软无设备；其中，单通道半双工软无设备包括软件无线电射频平台接收端和软件无线电射频平台发送端；干扰控制台通过网络控制软件无线电干扰环境构设平台；软件无线电干扰环境构设平台用于发射干扰信号及测试干扰效果，干扰信号用于对软件无线电射频平台接收端和软件无线电射频平台发送端进行干扰；模拟操作台接收端通过网络控制软件无线电射频平台接收端；模拟操作台发送端通过网络控制软件无线电射频平台发送端。上述技术方案中的一个技术方案具有如下优点和有益效果：上述一种单通道半双工软无设备快速收发方法、介质、设备和系统，对软件无线电设备驱动层、射频软件层和应用软件层进行了优化，通过初始化工作参数以及运行接收/发送流图程序的步骤，将更改接收/发送模式的相关工作参数从打开/关闭收发设备环节中分离出来，实现了打开或关闭设备无收发之分，大大减少了单通道半双工软无设备在通信过程中的延时，提高了信号传输效率，避免了两个设备天线之间的串扰。相比于传统多通道全双工设备，本申请的单通道半双工软无设备每台成本约为传统多通道全双工设备的1/30左右，达到了大幅降低设备成本的效果。附图说明图1为一个实施例中一种单通道半双工软无设备快速收发方法的步骤流程图；图2为一个实施例中接收流图程序运行组件运行流程示意图；图3为一个实施例中发送流图程序运行组件运行流程示意图；图4为一个实施例中一种基于单通道半双工软无设备的射频平台测试系统示意图；图5为一个实施例中单通道半双工软无设备通信网络系统示意图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。除非另有定义，本文所使用的所有的技术和科学术语与属于本申请的技术领域的技术人员通常理解的含义相同。在本申请的说明书中所使用的术语只是为了描述具体的实施例的目的，不是旨在于限制本申请。另外，本发明各个实施例之间的技术方案可以相互结合，但是必须是以本领域普通技术人员能够实现为基础，当技术方案的结合出现相互矛盾或无法实现时，应当认为这种技术方案的结合不存在，也不在本发明要求的保护范围之内。本申请提供了一种单通道半双工软无设备快速收发方法，如图1所示，包括以下步骤：102：启动单通道半双工软无设备；104：初始化接收模式工作参数；106：启动数据接收模式，运行接收流图程序；接收流图程序用于接收和播放外来模拟音频信号；108：停止数据接收模式；110：初始化发送模式工作参数；112：启动数据发送模式，运行发送流图程序；发送流图程序用于发送本地模拟音频信号；114：停止数据发送模式；116：重复初始化接收模式工作参数到停止数据发送模式的步骤，执行单通道半双工软无设备的语音通信任务；118：语音通信任务结束后，关闭单通道半双工软无设备。可以理解，单通道半双工软无设备，指的是单通道半双工软件无线电设备，在本实施例中应用于传输音频信号，单通道指的是发送和接收之间仅有唯一通信通道，半双工指的是数据传输可以在一个信号载体的两个方向上传输，但是不能同时传输。可以理解，发送模式和接收模式的工作参数种类可以相同，例如都可以是中心频率、采样率、带宽、增益值和偏置值等参数，但是其大小不同。在一个实施例中，运行接收流图程序的过程，包括：接收外来模拟音频信号，将外来模拟音频信号转换成外来数字音频信号；对外来数字音频信号进行滤波；对滤波后的数字信号进行重采样，得到低采样率音频信号；对低采样率音频信号取模值，得到实数音频信号；去除实数音频信号的直流成分，得到去直流实数音频信号；去除去直流实数音频信号的高频分量，得到还原后的外来模拟音频信号，播放还原后的外来模拟音频信号。可以理解，采样率越高单位时间的采样点越多，本实施例的重采样是从信号中提取出低采样率信号的过程。在一个实施例中，去除实数音频信号的直流成分，得到去直流实数音频信号的步骤，包括：实数音频信号减去自身平均值，得到去直流实数音频信号。可以理解，信号的直流分量就是信号的均值，因此可以通过在时域下减去音频信号平均值的方法来实现去除实数音频信号的直流成分。在一个实施例中，运行发送流图程序的过程，包括：输入本地模拟音频信号，将本地模拟音频信号转换成本地数字音频信号；去除本地数字音频信号的高频成分，得到低通实数音频信号；将低通实数音频信号转换为低通复数音频信号；对低通复数音频信号进行重采样，得到高采样率音频信号；对高采样率音频信号进行调制，发送调制后的高采样率音频信号至天线。可以理解，本实施例的重采样是从信号中提取出高采样率信号的过程。在一个实施例中，对低通复数音频信号进行重采样，得到高采样率音频信号的过程，包括：通过内嵌的一个常系数乘法器对低通复数音频信号进行两级重采样，得到高采样率音频信号。可以理解，乘法器可以完成两个互不相关的数字信号相乘，用于信号的调制、解调、混频、鉴相、滤波和自动增益控制等。常系数乘法器是一种数字信号处理硬件组件，用于执行固定系数与输入信号的乘法操作，在信号处理和控制系统中，数字滤波器和变换算法将输入数据与预定义的常数相乘，常系数乘法器可以高效地实现这种乘法操作，从而降低整个系统的功耗。本实施例通过内嵌一个常系数乘法器，可以实现两级重采样，从而提高采样率转换精度。在一个实施例中，接收模式和发送模式的工作参数包括：中心频率、采样率、带宽、增益值和偏置值。可以理解，当打开/关闭设备与接收与发送步骤完全分离时，可以设置接收过程与发送过程共有的集中初始化参数，例如：中心频率、采样率、带宽、增益值和偏置值。在一个实施例中，初始化接收模式工作参数和初始化发送模式工作参数的过程中，通过调用初始化函数实现初始化。可以理解，初始化函数由自行编写而成，可以对集中初始化参数如中心频率、采样率、带宽、增益值和偏置值等进行初始化。本申请还提供了一种可读存储介质，其上存储有驱动程序，驱动程序被处理器执行时实现上述中任一实施例的单通道半双工软无设备快速收发方法的步骤。可以理解，驱动程序的实现无需更改硬件设备，仅需在软件层面进行设计和修改。本申请还提供了一种单通道半双工软无设备，包括开关组件、初始化组件、模式切换组件、接收流图程序运行组件和发送流图程序运行组件；开关组件，用于启动和关闭单通道半双工软无设备；初始化组件，用于初始化接收模式工作参数和发送模式工作参数，接收模式和发送模式的工作参数包括：中心频率、采样率、带宽、增益值和偏置值；模式切换组件，用于启动、停止数据接收模式和数据发送模式；接收流图程序运行组件，用于执行接收流图程序；接收流图程序用于接收和播放外来模拟音频信号；发送流图程序运行组件，用于执行发送流图程序；发送流图程序用于发送本地模拟音频信号。可以理解，单通道半双工软无设备加上天线后可以成为可通信的软件无线电射频平台，而不同软件无线电射频平台之间可以通过有线网络或无线网络进行通信。在一个实施例中，如图2所示，接收流图程序运行组件包括：开源移动通信协议信源模块201、FIR滤波器202、合理重采样模块203、复数取模功能模块204、隔离直流模块205、低通滤波模块206和音频信宿模块207。开源移动通信协议信源模块201，是用于接收外来模拟音频信号的软无信号源，将解调出的外来模拟音频信号转换成外来数字音频信号；FIR滤波器202，用于对外来数字音频信号进行滤波；合理重采样模块203，用于对滤波后的数字信号进行重采样，得到低采样率音频信号；复数取模功能模块204，用于对低采样率音频信号取模值，得到实数音频信号；隔离直流模块205，用于实数音频信号通过减去自身平均值去除直流成分，得到去直流实数音频信号；低通滤波模块206，用于去除直流实数音频信号的高频分量，得到还原后的外来模拟音频信号；音频信宿模块207，用于播放还原后的外来模拟音频信号。可以理解，在本实施例中，在开源移动通信协议信源模块201设置采样率为400ksps，频率为26.9MHz，无需进行精确频率校准，A/D转换后信道解码出IQ平衡的两路数字信号，启用DC偏移消除功能，不采用增益模式；在FIR滤波器202中设置中心频率为100kHz，采样率为400ksps，无需通过信号抽取改变采样率；在合理重采样模块203中设置先内插值为3，后抽取值为25从而降低采样率，不设通带带宽；在复数取模功能模块204中无需做任何设置；在隔离直流模块205中设置长度为3.2k，即每次隔直信号长度为3.2k；在低通滤波模块206中设置增益为3，无信号抽取，采样率为48kHz，截止频率为24kHz，截频过渡带宽度为400；在音频信宿模块207中设置采样率为48kHz。在一个实施例中，如图3所示，发送流图程序运行组件包括：音频信源模块301、低通滤波器302、实数信号转复数信号模块303、第一合理重采样模块304、常系数乘法器305、第二合理重采样模块306和开源移动通信协议信宿模块307。音频信源模块301，用于输入本地模拟音频信号，将本地模拟音频信号转换成本地数字音频信号；低通滤波器302，用于去除本地数字音频信号的高频成分，得到低通实数音频信号；实数信号转复数信号模块303，用于将低通实数音频信号转换为低通复数音频信号；第一合理重采样模块304、常系数乘法器305和第二合理重采样模块306，用于对低通复数音频信号进行两级重采样，得到更高精度的高采样率音频信号；开源移动通信协议信宿模块307，是用于发送模拟音频信号的软无信宿，用于将数字音频信号转换成模拟音频信号并进行调制，发送调制后的高采样率模拟音频信号至天线。可以理解，在本实施例中，在音频信源模块301中设置采样率为48kHz；在低通滤波器302中设置增益为1，无信号抽取，采样率为48kHz，截止频率为24kHz，截频过渡带宽度为400；在实数信号转复数信号模块303中无需做任何设置；在第一合理重采样模块304中设置先内插值为25，后抽取值为3从而提高采样率，不设通带带宽；在常系数乘法器305中设置常系数为400m；在第二合理重采样模块306中设置先内插值为4，后抽取值为1从而再次提高采样率，不设通带带宽；在开源移动通信协议信宿模块307中设置采样率为1.6Msps，频率为27MHz，无需进行精确频率校准，射频增益14dB，中频增益25dB，基带增益10dB。本申请还提供了一种基于上述任一实施例中单通道半双工软无设备的射频平台测试系统，如图4所示，包括：干扰控制台401、软件无线电干扰环境构设平台402、模拟操作台接收端403、模拟操作台发送端404和单通道半双工软无设备；其中，单通道半双工软无设备包括软件无线电射频平台接收端405和软件无线电射频平台发送端406；干扰控制台401通过网络控制软件无线电干扰环境构设平台；软件无线电干扰环境构设平台402用于发射干扰信号及测试干扰效果，干扰信号用于对软件无线电射频平台接收端和软件无线电射频平台发送端进行干扰；模拟操作台接收端403通过网络控制软件无线电射频平台接收端405；模拟操作台发送端404通过网络控制软件无线电射频平台发送端406。可以理解，接收流图程序运行于图4中的软件无线电射频平台接收端405；而发送流图程序运行于图4中的软件无线电射频平台发送端406。模拟操作台以前端方式通过网线来操控软件无线电射频平台后端。并且，一套模拟操作台和软无射频平台既可用做发送端，又可用做接收端。在收发模式切换时，它就进行着接收端与发送端角色的切换。如图5所示，可以由多个软无射频平台和模拟操作台，组成单通道半双工软无设备通信网络系统，系统中一套软无射频平台和模拟操作台之间的网络通常是是网线直连，也可是局域网相连；图5中的大网络可以是有线网络，也可以是无线网络，局域网络数据延时通常小于1毫秒，广域网数据延时通常只有几十毫秒。可以理解，系统中单通道半双工软无设备可以通过内置或外置的方式与模拟操作台相连接，内置包括插卡等方式，外置包括通过网线、USB等方式。为了更直观且全面地说明上述单通道半双工软无设备通信网络系统和单通道半双工软无设备的效用，对上述单通道半双工软无设备通信网络系统进行实验验证：将单通道半双工软无设备的软无设备驱动程序修改并重新编译后，经过多次收发切换时间的测试，结果收发切换延时低于200毫秒。进行实际语音的测试，接收端收到语音与发送端有6秒延时，原因是发送端Audio Source有之前的杂音数据，接收端收到有效语音前先收到了杂音数据才导致的语音延时，在发送前将发送端Audio Source缓冲区清空再启动发送。此时测试实时语音在接收端与发送端之间的延时控制在了1秒左右，再次测试收发切换延时，仍然是低于200毫秒。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请专利的保护范围应以所附权利要求为准。
