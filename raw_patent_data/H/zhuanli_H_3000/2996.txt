标题title
一种实现本地化双录质检稽核服务的方法
摘要abst
一种实现本地化双录质检稽核服务的方法，在同一台用于金融双录的前端设备上设置金融业务流程程序和金融双录质检稽核系统两套程序，所述金融业务流程程序调用前端设备的录音录像硬件完成金融双录音视频的录制，生成待质检稽核的音视频文件及其对应的用于质检稽核的参数信息，并通过网络协议将该参数信息和待质检稽核的音视频文件地址信息传输给后台运行的金融双录质检稽核系统，金融双录质检稽核系统在所述前端设备的后台完成音视频质检稽核，并将质检稽核报告通过网络协议传输给音视频录制程序，工作人员确认质检稽核报告后，将质检稽核报告和音视频文件打包传输给金融远端服务器存档。本发明大大缩减了金融双录音视频的质检稽核等待时间。
权利要求书clms
1.一种实现本地化双录质检稽核服务的方法，其特征在于：在同一台用于金融双录的前端设备上设置金融业务流程程序和金融双录质检稽核系统两套程序；所述金融业务流程程序调用前端设备的录音录像硬件完成金融双录音视频的录制，生成待质检稽核的音视频文件及其对应的用于质检稽核的参数信息，并通过网络协议将该参数信息和待质检稽核的音视频文件地址信息传输给后台运行的金融双录质检稽核系统，金融双录质检稽核系统在所述前端设备的后台完成音视频质检稽核，并将质检稽核报告通过网络协议传输给金融业务流程程序；工作人员确认质检稽核报告后，将质检稽核报告和音视频文件打包传输给金融远端服务器存档。2.根据权利要求1所述的一种实现本地化双录质检稽核服务的方法，其特征在于：具体步骤为：步骤1：前端设备上预装金融业务流程程序，所述金融业务流程程序配备录制工具，同时预装金融双录质检稽核系统；步骤2：工作人员操作前端设备上金融业务流程程序的录制工具调用录音录像硬件进行金融双录音视频录制，得到待质检稽核的音视频文件，并根据工作人员选择生成与待质检稽核的音视频文件所关联业务对应的用于质检稽核的参数信息；步骤3：录制工具通过网络协议向后台运行的金融双录质检稽核系统传输待质检稽核音视频文件的存储地址和待及其对应的用于质检稽核的参数信息，发送完毕后，录制工具处于等待反馈结果状态；步骤4：金融双录质检稽核系统的质检稽核程序通过步骤3所述存储地址打开待质检稽核的音视频文件，并解析对应的用于质检稽核的参数信息，对该音视频进行自动质检稽核；步骤5：金融双录质检稽核系统在后台运行并完成对双录音视频文件的自动质检与稽核，生成质检稽核报告，并通过网络协议将质检稽核报告反馈给前端运行的录制工具；步骤6：工作人员通过录制工具查看质检稽核报告，确认质检稽核结果，继续进行业务流程，并操作录制工具将音视频文件及其对应的质检稽核报告打包上传给远端的服务器存档。3.根据权利要求2所述的一种实现本地化双录质检稽核服务的方法，其特征在于：步骤2中，录制工具通过WebSocket即时通信协议向后台运行的金融双录质检稽核系统传输待质检稽核的音视频文件的存储地址及与该音视频文件对应的用于质检稽核的参数信息。4.根据权利要求2所述的一种实现本地化双录质检稽核服务的方法，其特征在于：步骤2中，录制工具通过http网络协议向后台运行的金融双录质检稽核系统传输待质检稽核的音视频文件的存储地址及与该音视频文件对应的用于质检稽核的参数信息。5.根据权利要求3所述的一种实现本地化双录质检稽核服务的方法，其特征在于：所述用于质检稽核的参数信息包括工作人员正在进行的业务类型、业务流水号和质检稽核项目参数数据。6.根据权利要求2所述的一种实现本地化双录质检稽核服务的方法，其特征在于：步骤4中，自动质检稽核具体是采用金融双录质检稽核系统自带的质检稽核算法对待质检稽核的音视频文件进行质检稽核。7.根据权利要求1-6任一所述的一种实现本地化双录质检稽核服务的方法，其特征在于：所述前端设备是笔记本电脑、手机、平板电脑、手持智能终端或台式电脑。
说明书desc
技术领域本发明涉及视频分析、智能双录、远程开户、远程开卡、远程合同签署等相关技术领域，尤其是涉及一种实现本地化双录质检稽核服务的方法。背景技术随着数字图像、数字视频及其软硬件技术的进步以及成本的大幅下降，越来越多的行业和领域开始了数字媒体的相关应用。如在安保领域，监控摄像头往往需要24小时不间断录像。银行、证券、保险等金融机构在销售理财产品、贵重金属、保险产品时，根据监管部门的要求必须进行录音录像。不仅如此，双录音视频还必须符合监管部门的一系列规范与要求。人工审核音视频工作量大、成本高，因此音视频或图像中的内容或行为往往需要借助机器算法实现自动质检稽核。质检稽核算法需要分析视频中销售人员与消费者的身份、行为、话术。这些分析内容具体包括人脸检测和识别、检测视频中的证件、检测协议合同资料、语音识别以及签字内容等。为了实现这些质检稽核服务，现有技术方案使用传统C/S即客户端/服务器模式进行部署。工作人员在终端PC或者移动设备上通过web页面或者app完成音视频录制后，使用网络将音视频文件传输到后台服务器进行质检稽核分析。后台服务器对音视频完成合格合规性检验后反馈质检稽核报告。在实际应用场景下，采用传统C/S模式往往因为网络带宽不足等原因造成较大的传输延迟，严重影响业务的办理速度。当音视频质检稽核计算量不大时，可以将质检稽核应用服务直接在录制端进行。一种方法是在客户端运行质检稽核程序，直接对录制的音视频进行分析并生成报告。但目前多数业务采用web页面进行录制，浏览器因为安全考虑，不能直接启动本地服务或者进程。基于上述背景现状，本发明设计一种解决方法及其配套的硬件。发明内容为了解决现有技术中金融双录系统客户端拍摄的音视频需要上传，上传过程较慢，影响业务办理速度的问题，本发明提供一种实现本地化双录质检稽核服务的方法，采用如下的技术方案：一种实现本地化双录质检稽核服务的方法，在同一台用于金融双录的前端设备上设置金融业务流程程序和金融双录质检稽核系统两套程序；所述金融业务流程程序调用前端设备的录音录像硬件完成金融双录音视频的录制，生成待质检稽核的音视频文件及其对应的用于质检稽核的参数信息，并通过网络协议将该参数信息和对应的音视频文件的地址信息传输给后台运行的金融双录质检稽核系统；金融双录质检稽核系统在所述前端设备的后台完成音视频的质检与稽核，并将质检稽核报告通过网络协议传输给金融业务流程程序；工作人员确认该质检稽核报告后，将该质检稽核报告及其对应的音视频文件打包传输给金融远端服务器存档。通过上述技术方案，将传统的客户端/服务器的金融双录质检稽核的硬件部署方式，变成将金融业务流程程序和金融双录质检稽核系统部署到同一台前端设备中。该前端设备完成音视频的录制，该设备的后台进行视频质检稽核，并生成报告。这样的模式可无需采购服务器，从而降低了成本，实现了工作人员根据业务流程程序进行业务办理时，不需要向金融远端服务器上传数据量庞大的双录音视频文件，大大缩减了等待金融双录质检稽核系统进行质检稽核的时间。工作人员能通过业务流程程序更快速地获取质检稽核报告，后续的上传音视频文件及其对应的质检稽核报告进行存档的操作不影响正常业务流程的进行。可选的，具体步骤为：步骤1：前端设备上预装金融业务流程程序，所述金融业务流程程序配备录制工具，同时预装金融双录质检稽核系统；步骤2：工作人员操作前端设备上金融业务流程程序的录制工具调用录音录像硬件进行金融双录音视频的录制，得到待质检稽核的音视频文件，并根据工作人员选择生成与该待质检稽核的音视频文件所关联的业务对应的用于质检稽核的参数信息；步骤3：录制工具通过网络协议向后台运行的金融双录质检稽核系统传输待质检稽核的音视频文件的存储地址及与该音视频文件对应的用于质检稽核的参数信息，发送完毕后，录制工具处于等待反馈结果状态；步骤4：金融双录质检稽核系统的质检稽核程序通过步骤3所述存储地址打开待质检稽核音视频文件，并解析对应的用于质检稽核的参数信息，对音视频进行自动质检与稽核；步骤5：金融双录质检稽核系统后台运行完成自动质检稽核，生成质检稽核报告，并通过网络协议将质检稽核报告反馈给前端运行的录制工具；步骤6：工作人员通过录制工具查看质检稽核报告，确认质检稽核结果，继续进行业务流程，并操作录制工具将音视频文件和对应的质检稽核报告打包上传给远端的服务器存档。通过上述技术方案，对常规的客户端拍摄金融双录视频上传给远端服务器端进行质检稽核后，反馈质检稽核报告的质检稽核流程进行了颠覆性的改进。业务流程录制工具调用前端设备的录音录像硬件完成金融双录音视频的拍摄，并通过网络协议向同一个前端设备后台运行的金融双录质检稽核系统传输待质检稽核的音视频文件的存储地址及相应的用于质检稽核的参数信息。后台运行的金融双录质检稽核系统通过自带的质检稽核算法实现自动质检与稽核，并通过网络协议向前端运行的业务流程录制工具传输质检稽核报告。工作人员通过前端运行的业务流程录制工具显示界面调阅质检稽核报告后，操作录制工具的上传存档功能按键，app程序或web在后台将音视频文件和对应的质检稽核报告打包上传给金融远端服务器进行存档，这个上传过程就不影响正常的业务流程，避免了上传音视频所需要的等待时间，大大缩短了金融双录业务流程。可选的，步骤2中，录制工具通过WebSocket即时通信协议向后台运行的金融双录质检稽核系统传输待质检稽核的音视频文件的存储地址及对应的用于质检稽核的参数信息。通过采用上述技术方案，由于WebSocket协议是普适性的，app和web都适用。WebSocket是一种在单个TCP连接上进行全双工通信的协议，是W3C标准，使用WebSocket协议进行业务处理，处理完成后，后台会主动通知前端处理完成，能及时得到反馈。可选的，步骤2中，录制工具通过http网络协议向后台运行的金融双录质检稽核系统传输待质检稽核的音视频文件的存储地址及相应的用于质检稽核的参数信息。通过采用上述技术方案，采用http网络协议也可以被动地实现后台运行的金融双录质检稽核系统与前端的通信，设置前端的录制工具主动去查询后台运行的金融双录质检稽核系统的运行结果即可。可选的，所述用于质检稽核的参数信息包括工作人员正在进行的业务类型、业务流水号和质检稽核项目参数数据。通过上述技术方案，金融双录质检稽核系统接收到用于质检稽核的参数信息里的关于双录视频涉及的业务流程中的业务类型、业务流水号和质检稽核项目参数数据，并将这些数据自动填入到质检稽核算法的参数选项中，金融双录质检稽核系统根据这些具体参数完成双录音视频文件的自动质检与稽核。可选的，步骤4中，自动质检稽核具体是采用金融双录质检稽核系统自带的质检稽核算法对待质检稽核的音视频文件进行质检与稽核。可选的，所述前端设备是笔记本电脑、手机、平板电脑、手持智能终端或台式电脑。通过上述技术方案，前端设备可以是能够同时安装并运行业务流程程序的录制工具、金融双录质检稽核系统的含有物理存储器和处理器的硬件，不需要额外地进行设备购置，减少金融门店布置金融双录系统所需购买新硬件的费用。综上所述，本发明包括以下至少一种有益技术效果：本发明采用金融门店本地的前端设备完成质检稽核音视频的录制，前端设备拍摄的双录音视频不需要上传到远程服务器的质检稽核后台而在本地就能进行质检与稽核，大大缩减了金融双录音视频的质检稽核等待时间。金融门店客户端能更快速地获取质检稽核报告，并根据质检稽核报告结果完成正常的金融业务流程，大大提升了对金融双录音视频进行质检稽核的效率，也减少金融门店布置金融双录系统所需购买新硬件的费用。附图说明图1是本发明一种实现本地化双录质检稽核服务的方法的流程示意图；图2是本发明具体实施例的双录视频截图；图3是本发明录制前端和质检稽核后台通信过程演示。具体实施方式以下结合附图1-图3对本发明作进一步详细说明。本发明实施例公开一种实现本地化双录质检稽核服务的方法。参照图1，一种实现本地化双录质检稽核服务的方法，在同一台用于金融双录的前端设备上设置金融业务流程程序和金融双录质检稽核系统两套程序，所述金融业务流程程序调用前端设备的录音录像硬件完成金融双录音视频的录制，生成待质检稽核的音视频文件及其对应的用于质检稽核的参数信息，并通过网络协议将该参数信息和音视频文件的地址信息传输给后台运行的金融双录质检稽核系统，金融双录质检稽核系统在所述前端设备的后台完成音视频的质检与稽核，并将质检稽核报告通过网络协议传输给金融业务流程程序，工作人员确认质检稽核报告后，将质检稽核报告和音视频文件打包传输给金融远端服务器存档。将传统的客户端/服务器的金融双录质检稽核的硬件部署方式，变成将金融业务流程程序和金融双录质检稽核系统部署到同一台前端设备中，该前端设备完成音视频的录制，后台进行音视频的质检与稽核，并生成报告。这样的模式无需采购服务器降低了成本，实现了工作人员根据业务流程程序进行业务办理时，不需要向金融远端服务器上传数据量庞大的双录音视频文件，从而大大缩减了等待金融双录质检稽核系统进行质检稽核的时间，工作人员能通过业务流程程序更快速地获取质检稽核报告，后续的上传音视频文件和质检稽核报告进行存档的操作不影响正常业务流程的进行。具体步骤为：步骤1：前端设备上预装金融业务流程程序，金融业务流程程序配备录制工具，同时预装金融双录质检稽核系统；步骤2：工作人员操作前端设备上金融业务流程程序的录制工具调用录音录像硬件进行金融双录音视频录制，得到待质检稽核的音视频文件，并根据工作人员选择生成与待质检稽核的音视频文件所关联业务对应的用于质检稽核的参数信息；步骤3：录制工具通过网络协议向后台运行的金融双录质检稽核系统传输待质检稽核的音视频文件的存储地址和对应的用于质检稽核的参数信息，发送完毕后，录制工具处于等待反馈结果状态；步骤4：金融双录质检稽核系统的质检稽核程序通过步骤3存储地址打开待质检稽核的音视频文件，并解析对应的用于质检稽核的参数信息，对音视频进行自动质检与稽核；步骤5：金融双录质检稽核系统在后台运行完成自动质检与稽核，生成质检稽核报告，并通过网络协议将质检稽核报告反馈给前端运行的录制工具；步骤6：工作人员通过录制工具查看质检稽核报告，确认质检稽核结果，继续进行业务流程，并操作录制工具将音视频文件和质检稽核报告打包上传给远端的服务器存档。对常规的客户端拍摄金融双录音视频上传给远端服务器端进行质检稽核后，反馈质检稽核报告的质检稽核流程进行了颠覆性的改进，业务流程录制工具调用前端设备的录音录像硬件完成金融双录音视频的拍摄，并通过网络协议向在同一个前端设备的后台运行的金融双录质检稽核系统传输待质检稽核的音视频文件的存储地址及相应的用于质检稽核的参数信息，后台运行的金融双录质检稽核系统通过自带的质检稽核算法实现自动质检与稽核，并通过网络协议向前端运行的业务流程录制工具传输质检稽核报告，工作人员通过前端运行的业务流程录制工具显示界面调阅质检稽核报告后，操作录制工具的上传存档功能按键，app程序或web在后台将音视频文件和质检稽核报告打包上传给远端服务器进行存档，这个上传过程就不影响正常的业务流程，避免了上传音视频所需要的等待时间，大大缩短金融双录业务流程。步骤2中，录制工具通过WebSocket即时通信协议向后台运行的金融双录质检稽核系统传输待质检稽核的音视频文件的存储地址和相应的用于质检稽核的参数信息。通过采用上述技术方案，由于WebSocket协议是普适性的，app和web都适用。WebSocket是一种在单个TCP连接上进行全双工通信的协议，是W3C标准，使用WebSocket协议进行业务处理，处理完成后，后台会主动通知前端处理完成，能及时得到反馈。步骤2中，录制工具通过http网络协议向后台运行的金融双录质检稽核系统传输待质检稽核的音视频文件的存储地址和相应的用于质检稽核的参数信息。通过采用上述技术方案，采用http网络协议也可以被动地实现后台运行的金融双录质检稽核系统与前端的通信，设置前端的录制工具主动去查询后台运行的金融双录质检稽核系统的运行结果即可。用于质检稽核的参数信息包括工作人员正在进行的业务类型、业务流水号和质检稽核项目参数数据。金融双录质检稽核系统接收到用于质检稽核的参数信息里的关于双录视频涉及到的业务流程中的业务类型、业务流水号和质检稽核项目参数数据，并将这些数据自动填入到质检稽核算法的参数选项中，金融双录质检稽核系统根据这些具体参数完成双录音视频文件的自动质检与稽核。步骤4中，自动质检稽核具体是采用金融双录质检稽核系统自带的质检稽核算法对待质检稽核的音视频文件进行质检与稽核。前端设备是笔记本电脑、手机、平板电脑、手持智能终端或台式电脑。前端设备可以是能够同时安装并运行业务流程程序的录制工具、金融双录质检稽核系统的含有物理存储器和处理器的硬件，不需要额外地进行设备购置，减少金融门店布置金融双录系统所需购买新硬件的费用。本发明实施例一种实现本地化双录质检稽核服务的方法的实施原理为：这里以金融行业的银行销售理财产品进行录音录像为例进行说明。在一台办理业务的台式电脑上，部署有业务流程web程序，同时预装银行双录质检稽核系统。1.音视频录制。使用业务流程web程序进行音视频录制。参见图2，银行双录音视频录制由工作人员和消费者在摄像头前完成，该双录音视频文件记录了双方的证件、理财产品销售的产品信息等相关内容，以及消费者对于该理财产品确认购买的意愿。工作人员在一台办理业务的PC上使用基于web页面的业务流程程序实现该录制过程。在业务流程程序或操作页面上录制业务办理音视频，保存mp4视频格式到本地，供后续质检稽核调用。2.结束录制发送质检稽核任务。双录音视频录制完毕后，工作人员可以通过点击业务流程程序上的结束录制按钮，音视频文件在台式电脑上生成成功。业务流程程序将所录制音视频文件的物理地址通过WebSocket网络协议传输给后台运行的银行双录质检稽核系统。音视频录制完成后通过本地服务提供的接口发送音视频及业务信息到本地服务端，下方为接口及报文说明：接口名称：ws://127.0.0.1:1234调用方向：供业务系统调用接口入参：{"interfaceID":"100001","runningNo":"123456","filePath":"E:\ test-norm.mp4"}入参说明：interfaceID:接口ID, 100001表示进行质检稽核。runningNo:流水号，任意字母或数字。filePath:质检稽核视频完整路径。服务描述：进行音视频质检稽核，并生成质检稽核报告。返回值：String型json字符串，返回初始化结果，成功返回success，失败返回fail示例：{"result":"success", "msg":"质检稽核成功", "interfaceID":"100001"}{"result":"fail", "msg":"质检稽核失败原因", "interfaceID":"100001"}3.开始质检稽核服务。本地后台运行的银行双录质检稽核系统接收到该质检稽核任务后，启动质检稽核算法对该双录音视频进行分析，例如录制音视频中的各个环节是否完整连贯、证件及人脸是否清晰等。业务流程程序发送完成之后处于等待状态，等待银行双录质检稽核系统完成音视频分析及质检稽核任务。4.完成质检稽核反馈质检稽核结果。完成该质检稽核后，将质检稽核的结果以及对应的中间结果生成一个文档报告，即质检稽核报告。并将该质检稽核报告传输给业务流程web程序页面。业务流程web程序页面可将该双录音视频文件和质检稽核报告展示给工作人员查看，工作人员进行人工查看后，提交该笔业务，完成银行双录音视频文件及其质检稽核报告的打包上传给银行远端的服务端存档。服务端完成质检稽核后通知前端质检稽核已完成。前端通过接口获取质检稽核信息，下方为接口及报文说明：接口名称：ws://127.0.0.1:1234调用方向：业务系统调用接口入参：{"interfaceID":"100003","runningNo":"123456"}入参说明：interfaceID:接口ID, 100003代表读取质检稽核报告。runningNo:流水号，任意字母或数字。服务描述：根据流水号读取对应质检稽核报告。返回值：String型json字符串，返回更新机构结果，成功返回success，失败返回fail，示例如下。读取成功，返回：{"interfaceID":"100003","result":"success","msg":"读取成功","info":{"check_data":{//质检稽核相关信息"task_id":"123456",//流水号"video_info":{//视频信息"name":"test-norm.mp4",//视频名称"width":800,//视频分辨率宽"height":480,//视频分辨率高"video_time":328.583,//视频长度"audio_time":328.887,//音频长度"fps":12//帧率},"audio_recg":"嗯，可以了。",//音频转文字结果"check_items":视频流可解码",//质检稽核项标题"check_comment":"视频流可以正常解码",//质检稽核项结果"result":"通过",//质检稽核项是否通过"conf":"1.000000",//质检稽核得分"extra_info":{//附加结果"image":{//行为相关质检稽核项保存的图片信息"image_time":,//图片位于的时间，中间用,分隔"image_path"://图片保存路径，中间用,分隔},"audio":{//话术相关质检稽核项保存的信息"audio_time":,//话术位于的时间，中间用,分隔"audio_content"://话术转换的文字，中间用,分隔},"text":{//预留字段，暂时未使用"text_content":}}}]}}}若读取失败，返回：{"result":"fail", "msg":"读取失败原因", "interfaceID":"100003"}以上通信过程可以参见图3。正常网络状况时，本发明方案因不需要进行音视频在网络上的传输，速度比传统的客户端/服务器模式快。特别是质检稽核项较少时，运行时间低于客户端服务器模式的一半。在网络状况不佳甚至没有网络时，传统方案必须向银行的远程服务器上传待质检稽核的音视频，那么速度会极其缓慢，甚至无法办理。本方案可以实现先质检稽核后在空闲时间，网络状态好的时候再上传银行的远程服务器进行留底存档。这使得即使在网络环境差的情况下，依然可以正常进行后续业务流程。以上均为本发明的较佳实施例，并非依此限制本发明的保护范围，故：凡依本发明的结构、形状、原理所做的等效变化，均应涵盖于本发明的保护范围之内。
