标题title
一种自动曝光方法、装置、设备及存储介质
摘要abst
本申请公开了一种自动曝光方法、装置、设备及存储介质，利用相机采集当前帧图像，对当前帧图像进行分块，计算每一当前帧图像块的平均亮度，将平均亮度低于绝对欠曝阈值的图像块标记为欠曝光块，将平均亮度高于绝对过曝阈值的图像块标记为过曝光块，将平均亮度大于相对过曝阈值、平均亮度小于等于绝对过曝阈值且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相反的当前帧图像块标记为过曝光块，为每一当前帧图像块标记了更为准确的曝光状态，为调整相机的曝光参数提供了更为准确的调整依据，从而可以在不同的拍摄场景下实现对曝光参数的调整，采集到曝光状态合适的图像。
权利要求书clms
1.一种自动曝光方法，其特征在于，包括：利用相机采集图像，得到当前帧图像；对所述当前帧图像进行分块，并计算每一个当前帧图像块的平均亮度；标记平均亮度小于绝对欠曝阈值的当前帧图像块为欠曝光块，标记平均亮度大于绝对过曝阈值的当前帧图像块为过曝光块，标记平均亮度大于相对过曝阈值、平均亮度小于等于所述绝对过曝阈值且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相反的当前帧图像块为过曝光块，其中，所述相对过曝阈值大于所述绝对欠曝阈值；统计所述当前帧图像的过曝光块的数量和欠曝光块的数量，得到当前帧图像的统计结果；根据所述当前帧图像的统计结果调整相机的曝光参数。2.根据权利要求1所述的方法，其特征在于，所述标记平均亮度大于相对过曝阈值、平均亮度小于等于所述绝对过曝阈值且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相反的当前帧图像块为过曝光块，包括：对于平均亮度大于相对过曝阈值且小于等于所述绝对过曝阈值的每一个当前帧图像块：若所述当前帧图像块的平均亮度相对于同一位置的上一帧图像块的平均亮度呈增加趋势，且所述当前帧图像块的信息熵相对于同一位置的上一帧图像块的信息熵的变化量小于第一变化量阈值，则标记所述当前帧图像块为过曝光块，其中，所述第一变化量阈值小于零；若所述当前帧图像块的平均亮度相对于同一位置的上一帧图像块的平均亮度呈减少趋势，且所述当前帧图像块的信息熵相对于同一位置的上一帧图像块的信息熵的变化量大于第二变化量阈值，则标记所述当前帧图像块为过曝光块，其中，所述第二变化量阈值大于零。3.根据权利要求1所述的方法，其特征在于，在统计所述当前帧图像的欠曝光块的数量之前，还包括：标记平均亮度大于等于所述绝对欠曝阈值、平均亮度小于相对欠曝阈值、且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相同的当前帧图像块为欠曝光块，其中，所述相对欠曝阈值小于所述绝对过曝阈值。4.根据权利要求3所述的方法，其特征在于，所述标记平均亮度大于等于所述绝对欠曝阈值、平均亮度小于相对欠曝阈值、且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相同的当前帧图像块为欠曝光块，包括：对于平均亮度大于等于所述绝对欠曝阈值且小于相对欠曝阈值的每一个当前帧图像块：若所述当前帧图像块的平均亮度相对于同一位置的上一帧图像块的平均亮度呈增加趋势，且所述当前帧图像块的信息熵相对于同一位置的上一帧图像块的信息熵的变化量大于第三变化量阈值，则标记所述当前帧图像块为欠曝光块，其中，所述第三变化量阈值大于零；若所述当前帧图像块的平均亮度相对于同一位置的上一帧图像块的平均亮度呈减少趋势，且所述当前帧图像块的信息熵相对于同一位置的上一帧图像块的信息熵的变化量小于第四变化量阈值，则标记所述当前帧图像块为欠曝光块，其中，所述第四变化量阈值小于零。5.根据权利要求1所述的方法，其特征在于，根据所述当前帧图像的统计结果调整相机的曝光参数，包括：若所述当前帧图像的统计结果满足第一预设条件或第二预设条件，则确定采集所述当前帧图像时的曝光参数为目标曝光参数，否则至少根据所述当前帧图像的图像特征调整相机的曝光参数；其中，所述第一预设条件为所述当前帧图像的过曝光块的数量不大于第一数量阈值，且所述当前帧图像的欠曝光块的数量不大于第二数量阈值；所述第二预设条件为所述当前帧图像的过曝光块的数量为零、所述当前帧图像的欠曝光块的数量大于所述第二数量阈值且所述当前帧图像的平均亮度大于平均亮度阈值。6.根据权利要求5所述的方法，其特征在于，所述至少根据所述当前帧图像的图像特征调整相机的曝光参数，包括：至少根据所述当前帧图像的图像特征确定欲配置的曝光参数；在所述欲配置的曝光参数大于所述欲配置的曝光参数的预设最大值的情况下，判断采集所述当前帧图像时的曝光参数是否为所述欲配置的曝光参数的预设最大值，若否，则调整所述欲配置的曝光参数为所述欲配置的曝光参数的预设最大值，将调整后的欲配置的曝光参数配置给所述相机，并返回执行利用相机采集图像，得到当前帧图像的步骤，若是，则确定采集所述当前帧图像时的曝光参数为目标曝光参数；在所述欲配置的曝光参数小于所述欲配置的曝光参数的预设最小值的情况下，判断采集所述当前帧图像时的曝光参数是否为所述欲配置的曝光参数的预设最小值，若否，则调整所述欲配置的曝光参数为所述欲配置的曝光参数的预设最小值，将调整后的欲配置的曝光参数配置给所述相机，并返回执行利用相机采集图像，得到当前帧图像的步骤，若是，则确定采集所述当前帧图像时的曝光参数为目标曝光参数；在所述欲配置的曝光参数不小于所述欲配置的曝光参数的预设最小值，且不大于所述欲配置的曝光参数的预设最大值的情况下，将所述欲配置的曝光参数配置给所述相机，并返回执行利用相机采集图像，得到当前帧图像的步骤。7.根据权利要求6所述的方法，其特征在于，在利用相机采集图像之前，该方法还包括设置曝光参数调整模式为时间优先模式，在所述时间优先模式下，所述欲配置的曝光参数为欲配置的曝光时间；在所述欲配置的曝光参数大于等于所述欲配置的曝光参数的预设最大值，或所述欲配置的曝光参数小于等于所述欲配置的曝光参数的预设最小值的情况下，在所述将调整后的欲配置的曝光参数配置给所述相机和所述返回执行利用相机采集图像，得到当前帧图像的步骤之间，还包括：设置所述曝光参数调整模式为增益优先模式，在所述增益优先模式下，所述欲配置的曝光参数为欲配置的曝光增益。8.根据权利要求6所述的方法，其特征在于，所述至少根据所述当前帧图像的图像特征确定欲配置的曝光参数，包括：在所述当前帧图像是第一帧图像的情况下，根据所述当前帧图像的图像特征和采集所述当前帧图像时的曝光参数确定欲配置的曝光参数；在所述当前帧图像不是第一帧图像的情况下，根据所述当前帧图像的图像特征、上一帧图像的图像特征、与所述图像特征对应的预设阈值、采集所述当前帧图像时的曝光参数和采集所述上一帧图像时的曝光参数确定欲配置的曝光参数。9.根据权利要求8所述的方法，其特征在于，根据所述当前帧图像的图像特征、上一帧图像的图像特征、与所述图像特征对应的预设阈值、采集所述当前帧图像时的曝光参数和采集所述上一帧图像时的曝光参数确定欲配置的曝光参数，包括：根据所述当前帧图像的图像特征、上一帧图像的图像特征、采集所述当前帧图像时的曝光参数和采集所述上一帧图像时的曝光参数，计算得到关于所述图像特征和所述曝光参数的一次函数；根据所述一次函数，计算图像特征为与所述图像特征对应的预设阈值时的曝光参数，得到欲配置的曝光参数。10.根据权利要求8所述的方法，其特征在于，在所述当前帧图像的过曝光块的数量大于所述第一数量阈值的情况下，所述图像特征为过曝光块的数量，与所述图像特征对应的预设阈值为所述第一数量阈值；在所述当前帧图像的过曝光块的数量不等于零且不大于所述第一数量阈值，并且所述当前帧图像的欠曝光块的数量大于所述第二数量阈值的情况下，所述图像特征为欠曝光块的数量，与所述图像特征对应的预设阈值为所述第二数量阈值；在所述当前帧图像的过曝光块的数量等于零、所述当前帧图像的欠曝光块的数量大于所述第二数量阈值且所述当前帧图像的平均亮度不大于所述平均亮度阈值的情况下，所述图像特征为平均亮度，与所述图像特征对应的预设阈值为所述平均亮度阈值。11.根据权利要求6-10中任一项所述的方法，其特征在于，在所述当前帧图像的欠曝光块的数量大于所述第二数量阈值或所述当前帧图像的平均亮度不大于所述平均亮度阈值的情况下，在返回执行利用相机采集图像，得到当前帧图像的步骤之前，该方法还包括：修改所述绝对欠曝阈值为采集所述当前帧图像时的绝对欠曝阈值和各当前帧图像块的平均亮度中的最小值。12.根据权利要求6-10中任一项所述的方法，其特征在于，在利用相机采集图像，得到当前帧图像和对所述当前帧图像进行分块，并计算每一个当前帧图像块的平均亮度之间，该方法还包括：为所述当前帧图像标记该图像的曝光参数变化趋势，所述当前帧图像的曝光参数变化趋势用于表征采集所述当前帧图像时的曝光参数和采集上一帧图像时的曝光参数间的大小关系；若在所述当前帧图像和与之相邻的若干帧连续图像中，每两个相邻的图像的曝光参数变化趋势均相反，则确定采集所述当前帧图像时的曝光参数为目标曝光参数，否则执行对所述当前帧图像进行分块，并计算每一个当前帧图像块的平均亮度的步骤。13.一种自动曝光装置，其特征在于，包括：图像采集单元，用于利用相机采集图像，得到当前帧图像；图像块平均亮度计算单元，用于对所述当前帧图像进行分块，并计算每一个当前帧图像块的平均亮度；曝光状态标记单元，用于标记平均亮度小于绝对欠曝阈值的当前帧图像块为欠曝光块，标记平均亮度大于绝对过曝阈值的当前帧图像块为过曝光块，标记平均亮度大于相对过曝阈值、平均亮度小于等于所述绝对过曝阈值且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相反的当前帧图像块为过曝光块，其中，所述相对过曝阈值大于所述绝对欠曝阈值；数量统计单元，用于统计所述当前帧图像的过曝光块的数量和欠曝光块的数量，得到当前帧图像的统计结果；曝光参数调整单元，用于根据所述当前帧图像的统计结果调整相机的曝光参数。14.一种自动曝光设备，其特征在于，包括：存储器和处理器；所述存储器，用于存储程序；所述处理器，用于执行所述程序，实现如权利要求1-12中任一项所述的自动曝光方法的各个步骤。15.一种存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时，实现如权利要求1-12中任一项所述的自动曝光方法的各个步骤。
说明书desc
技术领域本申请涉及相机成像技术领域，更具体的说，是涉及一种自动曝光方法、装置、设备及存储介质。背景技术为了采集到曝光状态合适的图像，可以对相机的曝光参数进行调整。当前，基于高光优先策略的自动曝光方法已经能够实现相机曝光参数的自动调整，该方法将图像亮度超过亮度阈值的高光区域认定为感兴趣区域，以降低感兴趣区域的图像亮度、防止该区域过曝为目的自动调整相机曝光参数。但是，基于高光优先策略的自动曝光方法设置了固定的图像亮度阈值，且将图像亮度作为确定曝光状态的唯一指标，该曝光状态确定标准以及基于该标准的自动曝光方法对不同拍摄场景的适用性较差。示例性的，在场景中包含有反光材料且包含有反光材料的区域不是需要关注的重点区域的情况下，由于包含有反光材料的区域的图像亮度会大于重点区域，若应用该方法去调整相机曝光参数，则在降低了包含有反光材料的区域的图像亮度的同时，也抑制了重点区域的正常曝光，将无法采集到重点区域曝光状态合适的图像，该方法在不同拍摄场景下的适用性较差。发明内容鉴于上述问题，提出了本申请以便提供一种自动曝光方法、装置、设备及存储介质，以实现在不同的拍摄场景下采集到曝光状态合适的图像的目的。具体方案如下：第一方面，提供了一种自动曝光方法，包括：利用相机采集图像，得到当前帧图像；对所述当前帧图像进行分块，并计算每一个当前帧图像块的平均亮度；标记平均亮度小于绝对欠曝阈值的当前帧图像块为欠曝光块，标记平均亮度大于绝对过曝阈值的当前帧图像块为过曝光块，标记平均亮度大于相对过曝阈值、平均亮度小于等于所述绝对过曝阈值且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相反的当前帧图像块为过曝光块，其中，所述相对过曝阈值大于所述绝对欠曝阈值；统计所述当前帧图像的过曝光块的数量和欠曝光块的数量，得到当前帧图像的统计结果；根据所述当前帧图像的统计结果调整相机的曝光参数。第二方面，提供了一种自动曝光装置，包括：图像采集单元，用于利用相机采集图像，得到当前帧图像；图像块平均亮度计算单元，用于对所述当前帧图像进行分块，并计算每一个当前帧图像块的平均亮度；曝光状态标记单元，用于标记平均亮度小于绝对欠曝阈值的当前帧图像块为欠曝光块，标记平均亮度大于绝对过曝阈值的当前帧图像块为过曝光块，标记平均亮度大于相对过曝阈值、平均亮度小于等于所述绝对过曝阈值且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相反的当前帧图像块为过曝光块，其中，所述相对过曝阈值大于所述绝对欠曝阈值；数量统计单元，用于统计所述当前帧图像的过曝光块的数量和欠曝光块的数量，得到当前帧图像的统计结果；曝光参数调整单元，用于根据所述当前帧图像的统计结果调整相机的曝光参数。第三方面，提供了一种自动曝光设备，包括：存储器和处理器；所述存储器，用于存储程序；所述处理器，用于执行所述程序，实现上述的自动曝光方法的各个步骤。第四方面，提供了一种存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时，实现上述的自动曝光方法的各个步骤。借由上述技术方案，本申请利用相机采集图像，得到了当前帧图像，对所述当前帧图像进行分块，计算得到每一个当前帧图像块的平均亮度，在为每一个当前帧图像块标记曝光状态时，将平均亮度低于绝对欠曝阈值的图像块确定为欠曝光块，将平均亮度高于绝对过曝阈值的图像块确定为过曝光块，并且在图像块的平均亮度介于相对过曝阈值和绝对过曝阈值之间的情况下，将图像块的信息熵作为辅助判断图像块是否过曝的指标，并在时间维度上，对图像块的图像特征进行时序分析，具体的，获取所述当前帧图像块的平均亮度和信息熵以及与该图像块处于同一位置的上一帧图像块的平均亮度和信息熵，以确定所述当前帧图像块的平均亮度变化趋势和信息熵变化趋势，在所述平均亮度变化趋势和信息熵变化趋势相反的情况下，将该图像块确定为过曝光块，也就是说，相对于对应的上一帧图像块，若所述当前帧图像块的平均亮度增加而信息熵减少或平均亮度减少而信息熵增加，则将所述当前帧图像块标记为过曝光块，以增加统计得到的当前帧图像的统计结果中的过曝光块的数量，从而增加采取降低曝光参数的措施的可能性。本申请提供的自动曝光方案，为每一当前帧图像块标记了更为准确的曝光状态，为调整相机的曝光参数提供了更为准确的调整依据，从而可以在不同的拍摄场景下实现对曝光参数的调整，采集到曝光状态合适的图像。示例性的，假设欲采集的图像中包含有反光材料的区域，且该区域为非重点区域，随着该区域的平均亮度减少，该区域的信息熵增加的可能性较小，则本方案将该区域标记为过曝光区域的可能性也较小，基于此，采取降低曝光参数的措施的可能性也随之减小，从而不会过度的抑制图像中重点区域的曝光，可以采集到重点区域曝光状态合适的图像。附图说明通过阅读下文优选实施方式的详细描述，各种其他的优点和益处对于本领域普通技术人员将变得清楚明了。附图仅用于示出优选实施方式的目的，而并不认为是对本申请的限制。而且在整个附图中，用相同的参考符号表示相同的部件。在附图中：图1为本申请实施例提供的一种自动曝光方法的流程示意图；图2示例了对一个当前帧图像块进行标记的一过程示意图；图3示例了对一个当前帧图像块进行标记的另一过程示意图；图4示例了根据当前帧图像的统计结果进行判断的过程示意图；图5为本申请实施例提供的另一种自动曝光方法的流程示意图；图6为本申请实施例提供的再一种自动曝光方法的流程示意图；图7示例了确定欲配置的曝光参数的过程示意图；图8为本申请实施例提供的一种自动曝光装置结构示意图；图9为本申请实施例提供的自动曝光设备的结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。本申请提供了一种自动曝光方法、装置、设备及存储介质，可以适用于不同的拍摄场景，实现在不同的拍摄场景下采集到曝光状态合适的图像的目的。接下来，结合图1所示，本申请提供的自动曝光方法可以包括如下步骤：步骤S101、利用相机采集图像，得到当前帧图像。需要说明的是，采集第一张当前帧图像时的相机的曝光参数，可以是在执行自动曝光方法之前被配置给相机的初始曝光参数，所述初始曝光参数可以包括由用户预先配置的且满足预设的参数有效范围的初始曝光时间和初始曝光增益，其中，所述参数有效范围是由所要使用的相机确定的，表征了能够配置给相机的曝光参数的最大值和最小值。步骤S102、对所述当前帧图像进行分块，并计算每一个当前帧图像块的平均亮度。具体的，对所述当前帧图像进行分块可以包括将所述当前帧图像平均的划分成M行N列，共计M×N个当前帧图像块，其中，参数M和N为预设的正整数。需要说明的是，当前帧图像块的平均亮度是确定该图像块的曝光状态的主要依据。步骤S103、对满足对应的预设条件的当前帧图像块进行标记。具体的，结合图2所示，对于每一个当前帧图像块：在所述当前帧图像块的平均亮度pb小于绝对欠曝阈值ue的情况下，将其标记为欠曝光块；在所述当前帧图像块的平均亮度pb大于相对过曝阈值oe1且小于等于所述绝对过曝阈值oe的情况下，计算所述当前帧图像块相对于同一位置的上一帧图像块的平均亮度变化量D_pb和信息熵变化量D_pe，若D_pb＞0且D_pe＜0，或D_pb＜0且D_pe＞0，也就是说，若所述当前帧图像块相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相反，则将所述当前帧图像块标记为过曝光块；在所述当前帧图像块的平均亮度pb大于绝对过曝阈值oe的情况下，将其标记为过曝光块。需要说明的是，图像的信息熵是表征图像中的平均信息量的参数，例如，一维熵可以表示图像灰度分布的聚集特征。示例性的，平均亮度变化量D_pb＜0，信息熵变化量D_pe＞0可以表征所述当前帧图像块相对于同一位置的上一帧图像块的平均亮度有所降低而平均信息量有所增加，对于该图像块，采取降低平均亮度的措施有利于获取到信息量更多、更清晰的图像块，因此，将该图像块标记为过曝光块，以增加采取降低平均亮度的措施的可能性；此外，在所述当前帧图像为第一帧图像的情况下，与任一当前帧图像块处于同一位置上的上一帧图像块的平均亮度和信息熵均为零，所述绝对欠曝阈值、所述相对过曝阈值和所述绝对过曝阈值均可以是在执行本申请所提供的自动曝光方法之前由用户预先配置的确定值。步骤S104、对所述当前帧图像的标记结果进行统计。具体的，统计所述当前帧图像的过曝光块的数量cur_no和欠曝光块的数量cur_nu进行统计，得到当前帧图像的统计结果。步骤S105、根据所述当前帧图像的统计结果调整相机的曝光参数。具体的，所述根据所述当前帧图像的统计结果调整相机的曝光参数，可以包括：以所述当前帧图像的统计结果为基础的判断依据，确定是否调整所述相机的曝光参数，以及根据所述当前帧图像的统计结果确定调整曝光参数的方向和步长。本申请利用相机采集图像，得到了当前帧图像，对所述当前帧图像进行分块，计算得到每一个当前帧图像块的平均亮度，在为每一个当前帧图像块标记曝光状态时，将平均亮度低于绝对欠曝阈值的图像块确定为欠曝光块，将平均亮度高于绝对过曝阈值的图像块确定为过曝光块，并且在图像块的平均亮度介于相对过曝阈值和绝对过曝阈值之间的情况下，将图像块的信息熵作为辅助判断图像块是否过曝的指标，具体的，获取所述当前帧图像块的平均亮度和信息熵以及与该图像块处于同一位置的上一帧图像块的平均亮度和信息熵，以确定所述当前帧图像块的平均亮度变化趋势和信息熵变化趋势，在所述平均亮度变化趋势和信息熵变化趋势相反的情况下，将该图像块确定为过曝光块，也就是说，相对于对应的上一帧图像块，若所述当前帧图像块的平均亮度增加而信息熵减少或平均亮度减少而信息熵增加，则将所述当前帧图像块标记为过曝光块，以增加统计得到的当前帧图像的统计结果中的过曝光块的数量，从而增加采取降低曝光参数的措施的可能性。本申请提供的自动曝光方案，为每一当前帧图像块标记了更为准确的曝光状态，为调整相机的曝光参数提供了更为准确的调整依据，从而可以在不同的拍摄场景下实现对曝光参数的调整，采集到曝光状态合适的图像。示例性的，假设欲采集的图像中包含有反光材料的区域，且该区域为非重点区域，若该区域的平均亮度过高，即超过了绝对曝光阈值，会将该区域的曝光状态标记为过曝光，采取降低曝光参数的可能性较高，可以在一定程度上降低该区域的平均亮度，在该区域的平均亮度降低到相对过曝阈值和绝对过曝阈值之间的情况下，由于该区域为非重点区域，包含的平均信息量较少，随着该区域的平均亮度的减少，该区域的信息熵增加的可能性较小，则本方案将该区域标记为过曝光区域的可能性也较小，基于此，采取降低曝光参数的措施的可能性也随之减小，不会为了得到该区域曝光状态合适的图像而过度的抑制图像中重点区域的曝光，从而可以采集到重点区域曝光状态合适的图像。为了提高本申请实施例所提供的自动曝光方法在低曝光场景下的适用性，结合图3所示，在统计所述当前帧图像的欠曝光块的数量之前，该方法还可以包括：对于每一个当前帧图像块：在所述当前帧图像块的平均亮度pb大于等于所述绝对欠曝阈值ue且小于相对欠曝阈值ue1的情况下，计算所述当前帧图像块相对于同一位置的上一帧图像块的平均亮度变化量D_pb和信息熵变化量D_pe，若D_pb和D_pe同号，也就是说，若所述当前帧图像块相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相同，则将所述当前帧图像块标记为欠曝光块，其中，所述相对欠曝阈值ue1小于所述相对过曝阈值oe1。本申请所提供的自动曝光方法，在上述的基础上，为平均亮度较低的图像块标记了更为准确的曝光状态，具体的，在图像块的平均亮度介于预设的绝对欠曝阈值和相对欠曝阈值之间的情况下，将图像块的信息熵作为辅助判断图像块是否欠曝的指标，示例性的，相对于对应的上一帧图像块，若所述当前帧图像块的平均亮度增加而信息熵增加或平均亮度减少而信息熵减少，则将所述当前帧图像块标记为过曝光块，以增加统计得到的当前帧图像的统计结果中的欠曝光块的数量，从而增加采取增加曝光参数的措施的可能性。示例性的，假设欲采集的图像中包含有反光材料的区域，且该区域为非重点区域，对于重点区域，若该区域的平均亮度过低，即小于了绝对欠曝阈值，会将该区域的曝光状态标记为欠曝光，以增加采取增加曝光参数的可能性，从而增加该区域的平均亮度，在该区域的平均亮度增加到绝对欠曝阈值和相对欠曝阈值之间的情况下，由于该区域为重点区域，包含的平均信息量较多，随着该区域的平均亮度的增加，该区域的信息熵增加的可能性较大，则本方案将该区域标记为欠曝光区域的可能性也较大，基于此，采取增加曝光参数的措施的可能性也随之增加，从而可以采集到重点区域曝光状态合适的图像。为了减少运算量、提高运算速度，可以在对平均亮度pb大于相对过曝阈值oe1且小于等于所述绝对过曝阈值oe，或平均亮度pb大于等于所述绝对欠曝阈值ue且小于相对欠曝阈值ue1的当前帧图像块进行标记时，考虑信息熵的变化量阈值。在一种可能的实现方式中，所述标记平均亮度大于相对过曝阈值、平均亮度小于等于所述绝对过曝阈值且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相反的当前帧图像块为过曝光块，可以包括：对于平均亮度大于相对过曝阈值且小于等于所述绝对过曝阈值的每一个当前帧图像块：若所述当前帧图像块的平均亮度相对于同一位置的上一帧图像块的平均亮度呈增加趋势，且所述当前帧图像块的信息熵相对于同一位置的上一帧图像块的信息熵的变化量小于第一变化量阈值，则标记所述当前帧图像块为过曝光块，其中，所述第一变化量阈值小于零；若所述当前帧图像块的平均亮度相对于同一位置的上一帧图像块的平均亮度呈减少趋势，且所述当前帧图像块的信息熵相对于同一位置的上一帧图像块的信息熵的变化量大于第二变化量阈值，则标记所述当前帧图像块为过曝光块，其中，所述第二变化量阈值大于零。可选的，所述第一变化量阈值和所述第二变化量阈值可以互为相反数。所述第一变化量阈值和所述第二变化量阈值可以作为标记过曝光块时的灵敏度，示例性的，预设的信息熵变化量阈值的越趋近于零，在平均亮度增加的情况下，信息损失轻微的当前帧图像块即可被标记为过曝光块，具体的，对于一个平均亮度大于相对过曝阈值且小于等于所述绝对过曝阈值的当前帧图像块，若所述第一变化量阈值和所述第二变化量阈值的绝对值较小，则在所述当前帧图像块的平均亮度大于同一位置的上一帧图像块的情况下，该图像块的信息熵稍微减少，或在所述当前帧图像块的平均亮度小于同一位置的上一帧图像块的情况下，该图像块的信息熵稍微增加，该图像块即会被标记为过曝光块，以增加采取降低曝光参数的措施的可能性，从而减少图像的平均亮度，使得图像可以具备较高的信息熵，包含有较多的图像信息。在一种可能的实现方式中，所述标记平均亮度大于等于所述绝对欠曝阈值、平均亮度小于相对欠曝阈值且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相同的当前帧图像块为欠曝光块，可以包括：对于平均亮度大于等于所述绝对欠曝阈值且小于相对欠曝阈值的每一个当前帧图像块：若所述当前帧图像块的平均亮度相对于同一位置的上一帧图像块的平均亮度呈增加趋势，且所述当前帧图像块的信息熵相对于同一位置的上一帧图像块的信息熵的变化量大于第三变化量阈值，则标记所述当前帧图像块为欠曝光块，其中，所述第三变化量阈值大于零；若所述当前帧图像块的平均亮度相对于同一位置的上一帧图像块的平均亮度呈减少趋势，且所述当前帧图像块的信息熵相对于同一位置的上一帧图像块的信息熵的变化量小于第四变化量阈值，则标记所述当前帧图像块为欠曝光块，其中，所述第四变化量阈值小于零。可选的，所述第三变化量阈值和所述第四变化量阈值可以互为相反数。所述第三变化量阈值和所述第四变化量阈值可以作为标记欠曝光块时的灵敏度，示例性的，预设的信息熵变化量阈值的越趋近于零，在平均亮度减少的情况下，信息损失轻微的当前帧图像块即可被标记为欠曝光块，具体的，对于一个平均亮度大于等于所述绝对欠曝阈值且小于所述相对欠曝阈值的当前帧图像块，若所述第三变化量阈值和所述第四变化量阈值的绝对值较小，则在所述当前帧图像块的平均亮度大于同一位置的上一帧图像块的情况下，该图像块的信息熵稍微增加，或在所述当前帧图像块的平均亮度小于同一位置的上一帧图像块的情况下，该图像块的信息熵稍微减少，该图像块即会被标记为欠曝光块，以增加采取增加曝光参数的措施的可能性，从而增加图像的平均亮度，使得图像可以具备较高的信息熵，包含有较多的图像信息。下面对步骤S105、根据所述当前帧图像的统计结果调整相机的曝光参数的各种实现方式进行阐述，主要包括两个方面：第一方面，以所述当前帧图像的统计结果为基础的判断依据，确定是否调整所述相机的曝光参数；第二方面，根据所述当前帧图像的统计结果确定调整曝光参数的具体方式，可以包括调整的方向和调整的步长。图4示出了一种可能的根据统计结果进行判断的过程示意图，结合图4所示，在本申请提供的一些实施例中，所述根据所述当前帧图像的统计结果调整相机的曝光参数，可以包括：S01、在所述当前帧图像的统计结果满足第一预设条件或第二预设条件的情况下，确定采集所述当前帧图像时的曝光参数为目标曝光参数。具体的，在当前帧图像的过曝光块的数量cur_no不大于第一数量阈值N1，且当前帧图像的欠曝光块的数量cur_nu不大于第二数量阈值N2，即满足第一预设条件的情况下，确定采集所述当前帧图像时的曝光参数为目标曝光参数，即无需调整相机的曝光参数；在当前帧图像的过曝光块的数量cur_no＝0，且当前帧图像的欠曝光块的数量cur_nu大于第二数量阈值N2的情况下，对当前帧图像的平均亮度cur_pb进行判断，若所述当前帧图像的平均亮度cur_pb大于预设的平均亮度阈值N3，即满足第二预设条件，则确定采集所述当前帧图像时的曝光参数为目标曝光参数。S02、在所述当前帧图像的统计结果不满足第一预设条件或第二预设条件的情况下，至少根据所述当前帧图像的图像特征调整相机的曝光参数。具体的，在当前帧图像的过曝光块的数量cur_no＝0，且当前帧图像的欠曝光块的数量cur_nu大于第二数量阈值N2的情况下，对当前帧图像的平均亮度cur_pb进行判断，若所述当前帧图像的平均亮度cur_pb不大于预设的平均亮度阈值N3，则至少根据所述当前帧图像的图像特征调整相机的曝光参数；在当前帧图像的过曝光块的数量cur_no不大于第一数量阈值N1、cur_no≠0，且当前帧图像的欠曝光块的数量cur_nu大于第二数量阈值N2的情况下，或在当前帧图像的过曝光块的数量cur_no大于第一数量阈值N1的情况下，至少根据所述当前帧图像的图像特征调整相机的曝光参数。接下来对调整曝光参数的具体实现方式进行阐述。图5是根据本申请实施例示出的另一种自动曝光方法的流程示意图，结合图5所示，该方法可以包括：步骤S201-S204与上述的步骤S101-S104一致，在此不再赘述。步骤S205、判断当前帧图像的统计结果是否满足第一预设条件或第二预设条件，若是，则执行步骤S206，若否，则执行步骤S207。步骤S206、确定采集所述当前帧图像时的曝光参数为目标曝光参数。步骤S207、至少根据所述当前帧图像的图像特征确定欲配置的曝光参数。步骤S208、对所述欲配置的曝光参数next_Y进行判断，若所述欲配置的曝光参数next_Y处于有效参数范围内，则将所述欲配置的曝光参数配置给相机，并执行步骤S201，若所述欲配置的曝光参数next_Y不处于有效参数范围内，则对采集当前帧图像时的曝光参数cur_Y进行判断，若cur_Y等于有效参数范围的边界值，则确定采集所述当前帧图像时的曝光参数为目标曝光参数，否则调整所述欲配置的曝光参数为有效参数范围的对应边界值，将调整后的欲配置的曝光参数配置给所述相机，并执行步骤S201。具体的，对于欲配置的曝光参数next_Y：在所述欲配置的曝光参数next_Y大于所述欲配置的曝光参数的预设最大值Max的情况下，判断采集所述当前帧图像时的曝光参数cur_Y是否为所述欲配置的曝光参数的预设最大值Max，若否，则调整所述欲配置的曝光参数next_Y为所述欲配置的曝光参数的预设最大值Max，将调整后的欲配置的曝光参数next_Y’配置给所述相机，并返回执行步骤S201利用相机采集图像，得到当前帧图像的步骤，若是，则确定采集所述当前帧图像时的曝光参数为目标曝光参数；在所述欲配置的曝光参数next_Y小于所述欲配置的曝光参数的预设最小值Min的情况下，判断采集所述当前帧图像时的曝光参数cur_Y是否为所述欲配置的曝光参数的预设最小值Min，若否，则调整所述欲配置的曝光参数next_Y为所述欲配置的曝光参数的预设最小值Min，将调整后的欲配置的曝光参数next_Y’配置给所述相机，并返回执行步骤S201利用相机采集图像，得到当前帧图像的步骤，若是，则确定采集所述当前帧图像时的曝光参数为目标曝光参数；在所述欲配置的曝光参数next_Y不小于所述欲配置的曝光参数的预设最小值Min，且不大于所述欲配置的曝光参数的预设最大值Max的情况下，将所述欲配置的曝光参数next_Y配置给所述相机，并返回执行步骤S201利用相机采集图像，得到当前帧图像的步骤。上述的自动曝光方法，可以在采集到的当前帧图像的统计结果不满足预设条件的情况下，通过迭代优化的方式，不断的利用当前帧图像的图像特征调整曝光参数，直至采集到满足预设条件的当前帧图像；此外，还考虑了能够配置给相机的曝光参数的有效范围，在超出该参数的有效范围的情况下，对采集当前帧图像时的曝光参数进行判断，具体的，在欲增加配置给相机的曝光参数时，判断采集当前帧图像时的曝光参数是否为预设最大值，在欲减少配置给相机的曝光参数时，判断采集当前帧图像时的曝光参数是否为预设最小值，若当前的曝光参数为有效参数的边界值，则表征当前的曝光参数已经是当前的场景下，能够被配置给所述相机的目标曝光参数，达到阈值中断条件，将停止曝光参数的调整，以减少不必要的算力浪费，若当前的曝光参数不是有效参数的边界值，则将所述欲配置的曝光参数调整为对应的边界值，使得所述调整后的欲配置的曝光参数可以被配置给相机，并在一定程度上改善下一帧图像的曝光状态。需要说明的是，上述的曝光参数可以是曝光时间，和/或，曝光增益。在本申请提供的一些实施例中，可以采取优先调整曝光时间，在欲配置的曝光时间超出预设的曝光参数有效范围而当前帧图像的曝光状态还不满足预设条件的情况下，再调整曝光增益。原因在于，假设欲提高所要采集的图像的亮度，可以增加曝光时间，以提高感光元件的进光量，从而实现提高图像亮度的目的；也可以增加曝光增益，通过在数模转换前放大电信号的方式来提高图像亮度，但是增加曝光增益的方式会放大图像的量化噪声，而增加曝光时间的方式不会增加图像噪声。具体的，在步骤S201、利用相机采集图像之前，该方法还可以包括：设置曝光参数调整模式为时间优先模式，在所述时间优先模式下，所述欲配置的曝光参数为欲配置的曝光时间。在上述的基础上，在所述欲配置的曝光参数大于等于所述欲配置的曝光参数的预设最大值，或所述欲配置的曝光参数小于等于所述欲配置的曝光参数的预设最小值的情况下，在所述将调整后的欲配置的曝光参数配置给所述相机和所述返回执行利用相机采集图像，得到当前帧图像的步骤之间，该方法还可以包括：设置所述曝光参数调整模式为增益优先模式，在所述增益优先模式下，所述欲配置的曝光参数为欲配置的曝光增益。需要说明的是，初始时的曝光参数调整模式是时间优先模式，在所述时间优先模式下，所述欲配置的曝光参数为欲配置的曝光时间，由于在所述欲配置的曝光时间大于等于欲配置的曝光时间的预设最大值或所述欲配置的曝光时间小于等于欲配置的曝光时间的预设最小值的情况下，在所述将调整后的欲配置的曝光参数配置给所述相机和所述返回执行利用相机采集图像，得到当前帧图像的步骤之间，已将所述曝光参数调整模式设置为了增益优先模式，即所述欲配置的曝光参数为欲配置的曝光增益，也就是说，不存在欲配置的曝光时间不处于有效的曝光时间范围，而当前的曝光时间为有效的曝光时间范围的边界值的情况；而在增益优先模式下，可能会出现欲配置的曝光增益不处于有效的曝光增益范围，而当前的曝光增益为有效的曝光增益范围的边界值的情况，也就是说，在时间优先模式下不会出现阈值中断，而在增益优先模式下可以实现阈值中断，节省算力。图6是根据本申请实施例示出的再一种自动曝光方法的流程示意图，结合图6所示，该方法可以包括：步骤S301与上述的步骤S201一致，在此不再赘述。步骤S302、标记所述当前帧图像的曝光参数变化趋势。具体的，上述的步骤S302可以包括：为所述当前帧图像标记该图像的曝光参数变化趋势，所述当前帧图像的曝光参数变化趋势用于表征采集所述当前帧图像时的曝光参数和采集上一帧图像时的曝光参数间的大小关系。步骤S303、判断曝光参数变化趋势是否满足预设条件，若是，则执行步骤S308，若否，则执行步骤S304。具体的，所述预设条件可以是在所述当前帧图像和与之相邻的若干帧连续图像中，每两个相邻的图像的曝光参数变化趋势均相反。步骤S304-S310与上述的步骤S202-S208一致，在此不再赘述。上述的自动曝光方法，在迭代优化曝光参数的过程中，记录了当前帧图像的曝光参数相对于上一帧图像的曝光参数的变化趋势，示例性的，所述与之相邻的若干帧连续图像可以是与之相邻的四帧连续图像，则在连续的五帧图像中，并且当前帧图像在这五帧图像中是最晚被采集的，若每两个相邻的图像的曝光参数变化趋势均相反，也就是说，在任意一组相邻的图像对中，一图像采取了欲提高图像亮度的措施，另一图像采取了欲降低图像亮度的措施，相当于当前的曝光参数在最佳的曝光参数附近波动，发生了四次折返，满足了预设的波动中断要求，则可以确定采集当前帧图像时的曝光参数为目标曝光参数，提前停止迭代，从而提高实现自动曝光的速度。需要说明的是，在本申请提供的一些实施例中，在所述时间优先模式下，所述当前帧图像的曝光参数变化趋势用于表征采集所述当前帧图像时的曝光时间和采集上一帧图像时的曝光时间之间的大小关系，在所述增益优先模式下，所述当前帧图像的曝光参数变化趋势用于表征采集所述当前帧图像时的曝光增益和采集上一帧图像时的曝光增益之间的大小关系。下面对确定欲配置的曝光参数的具体实现方式进行说明。在本申请提供的一些实施例中，步骤S208、至少根据所述当前帧图像的图像特征确定欲配置的曝光参数，可以包括：S10、判断所述当前帧图像是否为第一帧图像，若是，则执行S11，若否，则执行S12。S11、根据所述当前帧图像的图像特征和采集所述当前帧图像时的曝光参数确定欲配置的曝光参数。具体的，可以根据所述当前帧图像的平均亮度，确定欲配置的曝光参数相对于采集所述当前帧图像时的曝光参数的调整倍数k。示例性的，欲配置的曝光参数next_Y=k*cur_Y，在所述当前帧图像的平均亮度小于第一预设值的情况下，k=2；在所述当前帧图像的平均亮度大于等于所述第一预设值且小于第二预设值的情况下，k=1.25；在所述当前帧图像的平均亮度大于等于所述第二预设值且小于第三预设值的情况下，k=0.75；在所述当前帧图像的平均亮度大于等于所述第三预设值的情况下，k=0.5，所述第一预设值、第二预设值和第三预设值依次增大，示例性的，第一预设值可以是64，第二预设值可以是128，第三预设值可以是192。S12、根据所述当前帧图像的图像特征、上一帧图像的图像特征、与所述图像特征对应的预设阈值、采集所述当前帧图像时的曝光参数和采集所述上一帧图像时的曝光参数确定欲配置的曝光参数。在一种可能的实现方式中，可以利用相邻两帧图像的曝光参数和图像特征，通过局部线性拟合的方式进行参数估计，具体的，上述步骤S12、根据所述当前帧图像的图像特征、上一帧图像的图像特征、与所述图像特征对应的预设阈值、采集所述当前帧图像时的曝光参数和采集所述上一帧图像时的曝光参数确定欲配置的曝光参数，可以包括：S21、根据所述当前帧图像的图像特征cur_X、上一帧图像的图像特征pre_X、采集所述当前帧图像时的曝光参数cur_Y和采集所述上一帧图像时的曝光参数pre_Y，计算得到关于所述图像特征X和所述曝光参数Y的一次函数Y= cur_Y+ / * 。S22、根据所述一次函数，计算图像特征为与所述图像特征对应的预设阈值时的曝光参数，得到欲配置的曝光参数。上述的自动曝光方法，通过局部线性拟合的方式进行了参数估计，可以快速的预测出欲配置的曝光参数，提高了实现自动曝光的速度。此外，对于不同的当前帧图像的统计结果，可以利用不同的图像特征进行欲配置的曝光参数的计算，所述图像特征可以是过曝光块的数量、欠曝光块的数量或平均亮度。图7示例了一种可能的确定欲配置的曝光参数的过程示意图，其中，欲配置的曝光参数next_Y可以是欲配置的曝光增益也可以是欲配置的曝光时间，结合图7所示：在所述当前帧图像的过曝光块的数量cur_no大于所述第一数量阈值N1的情况下，所述图像特征为过曝光块的数量no，与所述图像特征对应的预设阈值为所述第一数量阈值N1，具体的，首先判断当前帧是否为第一帧，若是，则根据所述当前帧的图像特征确定参数调整倍数k，欲配置的曝光参数next_Y为k倍的采集当前帧图像时的曝光参数cur_Y，若不是第一帧，则根据所述当前帧图像的过曝光块的数量cur_no、上一帧图像的过曝光块的数量pre_no、采集所述当前帧图像时的曝光参数cur_Y和采集所述上一帧图像时的曝光参数pre_Y，计算得到关于图像特征x和曝光参数Y的一次函数Y= cur_Y+ / * ，计算图像特征X为所述第一数量阈值N1时的曝光参数Y，即令X=N1，计算得到欲配置的曝光参数next_Y= cur_Y+ / * 。在所述当前帧图像的过曝光块的数量cur_no不等于零且不大于所述第一数量阈值N1，并且所述当前帧图像的欠曝光块的数量cur_nu大于所述第二数量阈值N2的情况下，所述图像特征为欠曝光块的数量nu，与所述图像特征对应的预设阈值为所述第二数量阈值N2，若当前帧为第一帧，则欲配置的曝光参数next_Y＝k*cur_Y，否则next_Y= cur_Y+/ * ，具体的计算过程与上述一致，不再赘述；在所述当前帧图像的过曝光块的数量cur_no等于零、所述当前帧图像的欠曝光块的数量cur_nu大于所述第二数量阈值N2且所述当前帧图像的平均亮度cur_pb不大于所述平均亮度阈值N3的情况下，所述图像特征为平均亮度，与所述图像特征对应的预设阈值为所述平均亮度阈值N3，若当前帧为第一帧，则欲配置的曝光参数next_Y＝k* cur_Y，否则next_Y= cur_Y+ / * ，具体的计算过程与上述一致，不再赘述。在本申请提供了一些实施例中，为了提高自动曝光方法在低曝光水平的场景下的适用性，在所述当前帧图像的欠曝光块的数量大于所述第二数量阈值或所述当前帧图像的平均亮度不大于所述平均亮度阈值的情况下，在返回执行步骤S201、利用相机采集图像，得到当前帧图像的步骤之前，该方法还可以包括：修改所述绝对欠曝阈值为采集所述当前帧图像时的绝对欠曝阈值和各当前帧图像块的平均亮度中的最小值。需要说明的，在图像中没有过曝区域的情况下，一定程度的欠曝或低图像亮度是可以被接受的，因此可以在所述当前帧图像的过曝光块的数量等于零、所述当前帧图像的欠曝光块的数量大于所述第二数量阈值且所述当前帧图像的平均亮度不大于所述平均亮度阈值的情况下，再对所述绝对欠曝阈值进行修改，以减少计算量、提高迭代速度。下面对本申请实施例提供的自动曝光装置进行描述，下文描述的自动曝光装置与上文描述的自动曝光方法可相互对应参照。参见图8，图8为本申请实施例公开的一种自动曝光装置的结构示意图。如图8所示，该装置可以包括：图像采集单元101，用于利用相机采集图像，得到当前帧图像；图像块平均亮度计算单元102，用于对所述当前帧图像进行分块，并计算每一个当前帧图像块的平均亮度；曝光状态标记单元103，用于标记平均亮度小于绝对欠曝阈值的当前帧图像块为欠曝光块，标记平均亮度大于绝对过曝阈值的当前帧图像块为过曝光块，标记平均亮度大于相对过曝阈值、平均亮度小于等于所述绝对过曝阈值且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相反的当前帧图像块为过曝光块，其中，所述相对过曝阈值大于所述绝对欠曝阈值；数量统计单元104，用于统计所述当前帧图像的过曝光块的数量和欠曝光块的数量，得到当前帧图像的统计结果；曝光参数调整单元105，用于根据所述当前帧图像的统计结果调整相机的曝光参数。在本申请提供的一些实施例中，所述自动曝光装置还可以包括曝光参数调整模式配置单元，用于设置相机的曝光参数调整模式为时间优先模式，在所述时间优先模式下，所述欲配置的曝光参数为欲配置的曝光时间。在上述的基础上，所述曝光参数调整单元105根据所述当前帧图像的统计结果调整相机的曝光参数的过程，可以包括：判断当前帧图像的统计结果是否满足第一预设条件或第二预设条件，若是，则确定采集所述当前帧图像时的曝光参数为目标曝光参数否则执行：至少根据所述当前帧图像的图像特征确定欲配置的曝光参数；判断欲配置的曝光参数是否小于预设最大值并大于预设最小值；若是，则将所述欲配置的曝光参数配置给所述相机，并返回执行利用相机采集图像，得到当前帧图像的步骤；若否，则判断采集所述当前帧图像时的曝光参数是否为对应的预设值，若否，调整所述欲配置的曝光参数为对应的预设值，将调整后的欲配置的曝光参数配置给所述相机，向所述曝光参数调整模式配置单元发送所述模式修改指令，并返回执行利用相机采集图像，得到当前帧图像的步骤，其中，所述模式修改指令用于设置所述曝光参数调整模式为增益优先模式，在所述增益优先模式下所述欲配置的曝光参数为欲配置的曝光增益；若是，则确定采集所述当前帧图像时的曝光参数为目标曝光参数。需要说明的是，若欲配置的曝光参数不大于预设最小值，则与当前帧的曝光参数对应的预设值为预设最小值，若欲配置的曝光参数不小于预设最大值，则与当前帧的曝光参数对应的预设值为预设最大值。在本申请提供的一些实施例中，所述自动曝光装置还可以包括阈值调整单元，用于在所述当前帧图像的欠曝光块的数量大于所述第二数量阈值或所述当前帧图像的平均亮度不大于所述平均亮度阈值的情况下，在利用相机采集图像，得到当前帧图像之前，修改所述绝对欠曝阈值为采集所述当前帧图像时的绝对欠曝阈值和各当前帧图像块的平均亮度中的最小值。在本申请提供的一些实施例中，所述自动曝光装置还可以包括波动监测单元，用于为当前帧图像标记曝光参数变化趋势，所述曝光参数变化趋势用于表征采集当前帧图像时的曝光参数和采集上一帧图像时的曝光参数间的大小关系，若在当前帧图像和与之相邻的若干帧连续图像中，每两个相邻的图像的曝光参数变化趋势均相反，则向曝光参数调整单元105发送用于确定采集当前帧图像时的曝光参数为目标曝光参数的指令，否则向曝光参数调整单元105发送用于执行对所述当前帧图像进行分块步骤的指令。上述的自动曝光装置的细化功能和扩展功能可参照上文方法部分的相关描述。本申请实施例提供的自动曝光装置可应用于自动曝光设备，如具备数据处理能力的数码相机、手机等。可选的，图9示出了自动曝光设备的硬件结构框图，参照图9，自动曝光设备的硬件结构可以包括：至少一个处理器1，至少一个通信接口2，至少一个存储器3和至少一个通信总线4；在本申请实施例中，处理器1、通信接口2、存储器3、通信总线4的数量为至少一个，且处理器1、通信接口2、存储器3通过通信总线4完成相互间的通信；处理器1可能是一个中央处理器CPU，或者是特定集成电路ASIC，或者是被配置成实施本发明实施例的一个或多个集成电路等；存储器3可能包含高速RAM存储器，也可能还包括非易失性存储器等，例如至少一个磁盘存储器；其中，存储器存储有程序，处理器可调用存储器存储的程序，所述程序用于：利用相机采集图像，得到当前帧图像；对所述当前帧图像进行分块，并计算每一个当前帧图像块的平均亮度；标记平均亮度小于绝对欠曝阈值的当前帧图像块为欠曝光块，标记平均亮度大于绝对过曝阈值的当前帧图像块为过曝光块，标记平均亮度大于相对过曝阈值、平均亮度小于等于所述绝对过曝阈值且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相反的当前帧图像块为过曝光块，其中，所述相对过曝阈值大于所述绝对欠曝阈值；统计所述当前帧图像的过曝光块的数量和欠曝光块的数量，得到当前帧图像的统计结果；根据所述当前帧图像的统计结果调整相机的曝光参数。可选的，所述程序的细化功能和扩展功能可参照上文描述。本申请实施例还提供一种存储介质，该存储介质可存储有适于处理器执行的程序，所述程序用于：利用相机采集图像，得到当前帧图像；对所述当前帧图像进行分块，并计算每一个当前帧图像块的平均亮度；标记平均亮度小于绝对欠曝阈值的当前帧图像块为欠曝光块，标记平均亮度大于绝对过曝阈值的当前帧图像块为过曝光块，标记平均亮度大于相对过曝阈值、平均亮度小于等于所述绝对过曝阈值且相对于同一位置的上一帧图像块的平均亮度变化趋势与信息熵变化趋势相反的当前帧图像块为过曝光块，其中，所述相对过曝阈值大于所述绝对欠曝阈值；统计所述当前帧图像的过曝光块的数量和欠曝光块的数量，得到当前帧图像的统计结果；根据所述当前帧图像的统计结果调整相机的曝光参数。可选的，所述程序的细化功能和扩展功能可参照上文描述。最后，还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间可以根据需要进行组合，且相同相似部分互相参见即可。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本申请。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本申请的精神或范围的情况下，在其它实施例中实现。因此，本申请将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
