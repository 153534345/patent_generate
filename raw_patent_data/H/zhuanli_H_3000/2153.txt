标题title
一种无线物联网异步跳频组网通信方法
摘要abst
本发明适用于物联网通信技术领域，涉及一种无线物联网异步跳频组网通信方法，包括以下步骤：S10、全网信道和时隙规划；S20、网络协商；S30、一级子节点入网；S40、二级与多级子节点入网；S50、网络维护与业务报文传输。本发明过程简单、运行便捷，通过信令信道发布网络配置信息，可以实现高效组网，各子节点分别按照不同的跳频序列进行跳频通信，网内多组子节点可以在不同信道同时进行报文传输，通过全网节点异步跳频的方法，有效提升了信道利用率。
权利要求书clms
1.一种无线物联网异步跳频组网通信方法，其特征在于，包括以下步骤：S10、在频域将网络的可用带宽划分为M个子信道，并在其中选取N个子信道作为信令信道集合，剩余的子信道作为业务信道集合；在时域将超帧时间周期划分K个驻留时隙，由主节点指定某个或者多个驻留时隙为信令时隙，其余驻留时隙为业务时隙；S20、主节点上电启动后在各个信令信道轮流进行无线侦听，并从信令信道集合中选取一个信道作为本网络的信令信道；S30、主节点在信令时隙中通过信令信道发送本网络信令报文和自身的时频配置消息，在各个业务时隙根据自身跳频序列依次在各个业务信道上驻留侦听和通信，所有一级子节点上电启动后在信令信道集合中的所有信令信道上轮流进行侦听，侦听结束后从所侦听到的所有主节点中选择一个作为父节点，所有一级子节点在业务信道通过异步跳频通信方式发起入网请求；S40、主节点安排已入网的一级子节点在信令时隙中通过信令信道发送本网络信令报文和一级子节点自身的时频配置消息，所有二级子节点上电启动后在信令信道集合中的所有信令信道上轮流进行侦听，侦听结束后从所侦听到的所有一级子节点中选择一个作为代理节点，所有二级子节点在业务信道通过异步跳频通信方式向父节点发起入网请求；S50、主节点定时发送本网络信令报文，并安排网络中各子节点在信令时隙通过信令信道代理发送本网络信令报文，网络中各节点通过异步跳频方式进行业务报文传输，并在传输过程中携带自身的跳频配置。2.根据权利要求1所述的一种无线物联网异步跳频组网通信方法，其特征在于，所述步骤S30中，主节点收到一级子节点的入网请求消息后判断该一级子节点是否允许入网，若是，则在业务信道通过异步跳频通信方式向该一级子节点发送入网确认消息，若否，则不回复该一级子节点的入网请求消息；重复以上操作，直至所有一级子节点入网。3.根据权利要求1所述的一种无线物联网异步跳频组网通信方法，其特征在于，所述步骤S40中，代理节点在业务信道通过异步跳频通信方式，转发二级子节点和主节点之间的组网报文，以及组网完成后的业务报文，重复以上操作，直至所有二级子节点入网。4.根据权利要求3所述的一种无线物联网异步跳频组网通信方法，其特征在于，所有第i级子节点入网以后，第i级子节点在信令时隙的信令信道集合中的所有信令信道上发送本网络信令报文，并中继代理第i+1级子节点入网，直至所有子节点入网。5.根据权利要求1所述的一种无线物联网异步跳频组网通信方法，其特征在于，所述步骤S30中，信令报文包括本网络的网络号、本网络所采用的hash算法、本网络超帧周期长度、本网络时隙单位长度、本网络的信令时隙位置、本网络的信令信道当前时刻在超帧中所处位置、发送该报文的节点的时频配置。6.根据权利要求5所述的一种无线物联网异步跳频组网通信方法，其特征在于，所述步骤S30中，时频配置信息包括发送该报文的节点的唯一性ID、当前时刻在跳频序列周期中所处的位置。7.根据权利要求6所述的一种无线物联网异步跳频组网通信方法，其特征在于，全网采用统一的hash算法，网络中所有节点根据自身的唯一性ID作为种子，通过hash算法计算出自身的伪随机跳频序列。8.根据权利要求1所述的一种无线物联网异步跳频组网通信方法，其特征在于，在每个业务时隙，各个节点依据自身的跳频序列依次选取业务信道频率驻留监听与通信，运行过程中遇到信令时隙则切换至全网统一的信令信道驻留监听与通信。9.根据权利要求1所述的一种无线物联网异步跳频组网通信方法，其特征在于，网络中节点与其他节点进行点对点通信时，根据对方的时频配置信息，计算出对方当前时隙所驻留的业务信道，并切换至该信道向对方发送消息，所发送的消息中附带自身的时频配置信息。10.根据权利要求6所述的一种无线物联网异步跳频组网通信方法，其特征在于，其他节点接收到该节点时频配置消息后可计算出该节点当前所驻留的业务信道，以及未来任意时刻所驻留的业务信道。
说明书desc
技术领域本发明属于物联网通信技术领域，尤其涉及一种无线物联网异步跳频组网通信方法。背景技术无线通信是物联网中广泛使用的通信技术之一。跳频通信是一种扩频通信，在物联网中广泛使用，载波频率在很宽频带范围内按跳频进行跳变，可以有效避免无线干扰。传统的跳频通信一般在网内采用统一的跳频序列，在任意时刻所有节点同步到同一频点进行通信，然而，在大规模网络中会遇到多个节点同时同频发起通信而发生冲突的情况，从而导致丢包或者吞吐量下降的问题，信道利用效率低。公开号CN107276630B的专利申请提供了一种跳频通信方法及系统，方法包括：主设备通过初始工作频道、初始通信地址与从设备进行通信以识别从设备，并在成功识别从设备时为所述从设备分配相应的通信地址和通信频道；主设备按照轮询机制轮询各从设备，在被轮询从设备对应的工作频道上与所述被轮询从设备进行通信；若主设备与被轮询从设备通信失败，则所述被轮询从设备按照预置的统一跳频列表跳频到下一工作频道。此专利也是采用多个节点统一跳频到一个频道进行通信的方式，同样存在信道利用效率不高的问题。因此，如何杜绝多个节点同步跳频，从而提高信道利用效率，是本技术领域人员亟待解决的问题。发明内容针对现有技术的不足，本发明的目的是提供一种无线物联网异步跳频组网通信方法，以解决现有技术中多个节点同比跳频导致信道利用效率低的问题。为了解决上述技术问题，本发明采用了如下的技术方案：本发明提供了一种无线物联网异步跳频组网通信方法，包括以下步骤：S10、在频域将网络的可用带宽划分为M个子信道，并在其中选取N个子信道作为信令信道集合，剩余的子信道作为业务信道集合；在时域将超帧时间周期划分K个驻留时隙，由主节点指定某个或者多个驻留时隙为信令时隙，其余驻留时隙为业务时隙；S20、主节点上电启动后在各个信令信道轮流进行无线侦听，并从信令信道集合中选取一个信道作为本网络的信令信道；S30、主节点在信令时隙中通过信令信道发送本网络信令报文和自身的时频配置消息，在各个业务时隙根据自身跳频序列依次在各个业务信道上驻留侦听和通信，所有一级子节点上电启动后在信令信道集合中的所有信令信道上轮流进行侦听，侦听结束后从所侦听到的所有主节点中选择一个作为父节点，所有一级子节点在业务信道通过异步跳频通信方式发起入网请求；S40、主节点安排已入网的一级子节点在信令时隙中通过信令信道发送本网络信令报文和一级子节点自身的时频配置消息，所有二级子节点上电启动后在信令信道集合中的所有信令信道上轮流进行侦听，侦听结束后从所侦听到的所有一级子节点中选择一个作为代理节点，所有二级子节点在业务信道通过异步跳频通信方式向父节点发起入网请求；S50、主节点定时发送本网络信令报文，并安排网络中各子节点在信令时隙通过信令信道代理发送本网络信令报文，网络中各节点通过异步跳频方式进行业务报文传输，并在传输过程中携带自身的跳频配置。进一步的，所述步骤S30中，主节点收到一级子节点的入网请求消息后判断该一级子节点是否允许入网，若是，则在业务信道通过异步跳频通信方式向该一级子节点发送入网确认消息，若否，则不回复该一级子节点的入网请求消息；重复以上操作，直至所有一级子节点入网。进一步的，所述步骤S40中，代理节点在业务信道通过异步跳频通信方式，转发二级子节点和主节点之间的组网报文，以及组网完成后的业务报文，重复以上操作，直至所有二级子节点入网。进一步的，所有第i级子节点入网以后，第i级子节点在信令时隙的信令信道集合中的所有信令信道上发送本网络信令报文，并中继代理第i+1级子节点入网，直至所有子节点入网。进一步的，所述步骤S30中，信令报文包括本网络的网络号、本网络所采用的hash算法、本网络超帧周期长度、本网络时隙单位长度、本网络的信令时隙位置、本网络的信令信道当前时刻在超帧中所处位置、发送该报文的节点的时频配置。进一步的，所述步骤S30中，时频配置信息包括发送该报文的节点的唯一性ID、当前时刻在跳频序列周期中所处的位置。进一步的，全网采用统一的hash算法，网络中所有节点根据自身的唯一性ID作为种子，通过hash算法计算出自身的伪随机跳频序列。进一步的，在每个业务时隙，各个节点依据自身的跳频序列依次选取业务信道频率驻留监听与通信，运行过程中遇到信令时隙则切换至全网统一的信令信道驻留监听与通信。进一步的，网络中节点与其他节点进行点对点通信时，根据对方的时频配置信息，计算出对方当前时隙所驻留的业务信道，并切换至该信道向对方发送消息，所发送的消息中附带自身的时频配置信息。进一步的，其他节点接收到该节点时频配置消息后可计算出该节点当前所驻留的业务信道，以及未来任意时刻所驻留的业务信道。本发明提供的无线物联网异步跳频组网通信方法与现有技术相比，至少具有如下有益效果：传统的跳频通信一般在网内采用统一的跳频序列，在任意时刻所有节点同步到同一频点进行通信，在大规模网络中会遇到多个节点同时同频发起通信而发生冲突的情况，从而导致丢包或者吞吐量下降的问题，信道利用效率低。本发明过程简单、运行便捷，通过信令信道发布网络配置信息，可以实现高效组网，网络内只采用统一的信令时隙和信令信道，用于发送必要的网络组建和辅助维护信息，网内多组子节点可以在不同信道同时进行报文传输，各子节点分别按照不同的跳频序列进行跳频通信，各个节点都维护各自不同的跳频序列，任意时刻各节点之间的通信频率各不相同，从而有效降低大规模网络时多节点竞争同一信道而导致的冲突，通过全网节点异步跳频的方法，有效提升了信道利用率。附图说明为了更清楚地说明本发明的方案，下面将对实施例描述中所需要使用的图作一个简单的介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例提供的一种无线物联网异步跳频组网通信方法的流程图。具体实施方式为了便于理解本发明，下面将参照相关附图对本发明进行更全面的描述。附图中给出了本发明的较佳实施例。但是，本发明可以以许多不同的形式来实现，并不限于本文所描述的实施例。相反地，提供这些实施例的目的是使对本发明的公开内容的理解更加透彻全面。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。本文中在本发明的说明书中所使用的术语只是为了描述具体的实施例的目的，不是旨在于限制本发明。本发明提供了一种无线物联网异步跳频组网通信方法，应用于物联网中的无线通信过程，无线物联网异步跳频组网通信方法包括以下步骤：S10、在频域将网络的可用带宽划分为M个子信道，并在其中选取N个子信道作为信令信道集合，剩余的子信道作为业务信道集合；在时域将超帧时间周期划分K个驻留时隙，由主节点指定某个或者多个驻留时隙为信令时隙，其余驻留时隙为业务时隙；S20、主节点上电启动后在各个信令信道轮流进行无线侦听，并从信令信道集合中选取一个信道作为本网络的信令信道；S30、主节点在信令时隙中通过信令信道发送本网络信令报文和自身的时频配置消息，在各个业务时隙根据自身跳频序列依次在各个业务信道上驻留侦听和通信，所有一级子节点上电启动后在信令信道集合中的所有信令信道上轮流进行侦听，侦听结束后从所侦听到的所有主节点中选择一个作为父节点，所有一级子节点在业务信道通过异步跳频通信方式发起入网请求；S40、主节点安排已入网的一级子节点在信令时隙中通过信令信道发送本网络信令报文和一级子节点自身的时频配置消息，所有二级子节点上电启动后在信令信道集合中的所有信令信道上轮流进行侦听，侦听结束后从所侦听到的所有一级子节点中选择一个作为代理节点，所有二级子节点在业务信道通过异步跳频通信方式向父节点发起入网请求；S50、主节点定时发送本网络信令报文，并安排网络中各子节点在信令时隙通过信令信道代理发送本网络信令报文，网络中各节点通过异步跳频方式进行业务报文传输，并在传输过程中携带自身的跳频配置。本发明过程简单、运行便捷，通过信令信道发布网络配置信息，可以实现高效组网，各子节点分别按照不同的跳频序列进行跳频通信，网内多组子节点可以在不同信道同时进行报文传输，通过全网节点异步跳频的方法，有效提升了信道利用率。为了使本技术领域的人员更好地理解本发明方案，下面将结合附图，对本发明实施例中的技术方案进行清楚、完整地描述。本发明提供了一种无线物联网异步跳频组网通信方法，应用于物联网中的无线通信过程，如图1所示，本实施例中，所述无线物联网异步跳频组网通信方法包括以下步骤：S10、全网信道和时隙规划：在频域将网络的可用带宽划分为M个子信道，并在其中选取N个子信道作为信令信道集合，剩余的子信道作为业务信道集合；在时域将超帧时间周期划分K个驻留时隙，由主节点指定某个或者多个驻留时隙为信令时隙，其余驻留时隙为业务时隙；进一步的，本实施例中，信令时隙和信令信道全网同步，用于主节点和各级代理节点发布本网络的信令信息，业务信道和业务时隙用于网络中各节点的跳频组网和业务通信，全网异步跳频通信。具体地，在每个业务时隙，各个节点依据自身的跳频序列依次选取业务信道频率驻留监听与通信，运行过程中遇到信令时隙则切换至全网统一的信令信道驻留监听与通信。S20、网络协商：主节点上电启动后在各个信令信道轮流进行一段时间的无线侦听，根据各网络间信令信道不冲突的原则，从信令信道集合中选取一个信道作为本网络的信令信道。S30、一级子节点入网：主节点完成网络协商后，主节点在信令时隙中通过信令信道发送本网络信令报文和自身的时频配置消息，在各个业务时隙根据自身跳频序列依次在各个业务信道上驻留侦听和通信，所有一级子节点上电启动后在信令信道集合中的所有信令信道上轮流进行侦听，侦听结束后从所侦听到的所有主节点中选择一个作为父节点，所有一级子节点在业务信道通过异步跳频通信方式发起入网请求，主节点收到一级子节点的入网请求消息后判断该一级子节点是否允许入网，如果允许入网则在业务信道通过异步跳频通信方式向该一级子节点发送入网确认消息，否则不回复该一级子节点的入网请求消息，重复以上操作，直至所以一级子节点入网；进一步的，本实施例中，信令报文包括本网络的网络号、本网络所采用hash算法、本网络超帧周期长度、本网络时隙单位长度、本网络的信令时隙位置、本网络的信令信道、当前时刻在超帧中所处位置、发送该报文的节点的时频配置等信息。具体地，全网采用统一的hash算法，网络中所有节点根据自身的唯一性ID作为种子，通过hash算法可以计算出自身的伪随机跳频序列，各个节点的跳频序列长度一致，具体跳频序列各不相同，网络中节点与其他节点进行点对点通信时，根据对方的时频配置信息，计算出对方当前时隙所驻留的业务信道，并切换至该信道向对方发送消息，所发送的消息中附带自身的时频配置消息。进一步的，本实施例中，时频配置信息包括发送该报文的节点的唯一性ID、当前时刻在跳频序列周期中所处的位置等信息，其他节点接收到该节点时频配置消息后可计算出该节点当前所驻留的业务信道，以及未来任意时刻所驻留的业务信道。S40、二级与多级子节点入网：主节点安排已入网的一级子节点在信令时隙中通过信令信道发送本网络信令报文和一级子节点自身的时频配置消息，所有二级子节点上电启动后在信令信道集合中的所有信令信道上轮流进行侦听，侦听结束后从所侦听到的所有一级子节点中选择一个作为代理节点，所有二级子节点在业务信道通过异步跳频通信方式向父节点发起入网请求；进一步的，代理节点在业务信道通过异步跳频通信方式，转发二级子节点和主节点之间组网报文，以及组网完成后的业务报文，重复以上操作，直至所有二级节点入网。进一步的，以此类推，所有第i级子节点入网以后，主模块安排入网的第i级子节点在信令时隙的信令信道集合中的所有信令信道上发送本网络信令报文，并代理中继第i+1级节点入网，直至所有子节点全部入网。S50、网络维护与业务报文传输：组网完成后，主节点在信令时隙通过信令信道定时发送本网络信令报文，并安排网络中各子节点在信令时隙通过信令信道代理发送本网络信令报文，网络中各节点通过异步跳频方式进行业务报文传输，并在传输过程中携带自身的跳频配置。实施例S1、在频域将网络的可用带宽划分为M个子信道形成信道集合A={F1，F2，F3，……，FM}，并在其中选取B={F5，F10，……，F5N}共N个子信道作为信令信道集合，剩余的子信道作为业务信道集合，在时域将超帧时间周期划分K个驻留时隙，主节点指定第一个时隙为信令时隙，其余驻留时隙为业务时隙；S2、主节点上电启动后在集合B中各个信令子信道上轮流进行持续一段时间的无线侦听，如果没有侦听到其他网络的信令报文，则从集合B中任意选择一个子信道作为本网络的信令信道，如果侦听到了其他网络信令报文，则从集合B中选择一个与其他所有网络信令信道不同的子信道作为本网络的信令信道；S3、主节点完成网络协商后，在信令时隙中通过信令信道发送本网络信令报文和自身的时频配置消息，在各个业务时隙根据自身跳频序列依次在各个业务信道上驻留侦听和通信，信令报文包括本网络的网络名称、所采用的hash算法、超帧长度、信令时隙长度、信令时隙在超帧中的位置、信令子信道编号等，主节点自身时频配置信息包括主节点自身的唯一性ID、主节点当前时钟在跳频周期中所处的位置等信息；S4、子节点上电启动后在信令信道集合B中的所有子信道上轮流进行持续一段时间的侦听，侦听结束后从所侦听到的所有主节点中选择信号质量最好的一个作为备选父节点，子节点根据所侦听到时频配置信息，计算出备选父节点当前时刻所驻留子信道频率，并切换到该子信道频率向主节点发送入网请求报文，入网请求报文发送完成后，子节点切换到自身跳频序列所在的子信道监听和通信；S5、主节点收到该子节点的入网请求报文后判断该子节点是否允许入网，如果允许入网，则根据入网请求报文中所附带的时频配置信息，计算出该子节点当前时刻所驻留子信道频率，并切换到该子信道频率向子节点发送入网确认报文，入网确认报文发送完成后，主节点切换到自身跳频序列所在的子信道监听和通信，如果该子节点允许入网，主节点则忽略该入网请求报文或者向子节点发送入网拒绝报文；S6、重复步骤S4至步骤S5，直至所有一级子节点全部入网；S7、主节点安排已入网的一级子节点分批次在信令时隙中通过信令信道发送本网络信令报文和自身的时频配置消息，信令报文包括本网络的网络名称、所采用的hash算法、超帧长度、信令时隙长度、信令时隙在超帧中的位置、信令子信道编号等，一级子节点自身时频配置信息包括该节点的自身唯一性ID、当前时钟在跳频周期中所处的位置等信息；S8、游离子节点上电启动后在信令信道集合B中的所有子信道上轮流进行持续一段时间的侦听，侦听结束后从所侦听到的所有节点中选择信号质量最好的一个作为备选父节点，子节点根据所侦听到时频配置信息，计算出备选父节点当前时刻所驻留子信道频率，并切换到该子信道频率向父节点发送入网请求报文，入网请求报文发送完成后，子节点切换到自身跳频序列所在的子信道监听和通信；S9、所选定为父节点的子节点收到下级子节点所发送的入网请求报文后，切换至主节点当前子信道频率，向主节点转发下级子节点的入网请求报文，如果收到主节点的回复报文，则切换至下级子节点当前所在子信道，并转发主节点的回复报文；S10、重复步骤S7至步骤S9，直至所有二级子节点全部入网；S11、第三级及以下各级子节点入网步骤与第二子节点入网步骤相同，即各级父节点中级转发上下行的报文，完成低级子节点的入网；S12、各级子节点入网以后，主节点定期在信令时隙通过信令信道发送信令报文，并安排各级子节点分批次在信令时隙通过信令信道发送信令报文，以便于新发现节点入网、游离节点重新入网、周围其他主节点做网络协商，以及本网络的其他维护，网内节点的所有通信报文中都会附带有自身的时频配置信息，以便于邻居节点计算或更新与自身通信所需的跳频信息。上述实施例提供的无线物联网异步跳频组网通信方法，与现有技术相比，传统的跳频通信一般在网内采用统一的跳频序列，在任意时刻所有节点同步到同一频点进行通信，在大规模网络中会遇到多个节点同时同频发起通信而发生冲突的情况，从而导致丢包或者吞吐量下降的问题，信道利用效率低。本发明过程简单、运行便捷，通过信令信道发布网络配置信息，可以实现高效组网，网络内只采用统一的信令时隙和信令信道，用于发送必要的网络组建和辅助维护信息，网内多组子节点可以在不同信道同时进行报文传输，各子节点分别按照不同的跳频序列进行跳频通信，各个节点都维护各自不同的跳频序列，任意时刻各节点之间的通信频率各不相同，从而有效降低大规模网络时多节点竞争同一信道而导致的冲突，通过全网节点异步跳频的方法，有效提升了信道利用率。显然，以上所描述的实施例仅仅是本发明较佳实施例，而不是全部的实施例，附图中给出了本发明的较佳实施例，但并不限制本发明的专利范围。本发明可以以许多不同的形式来实现，相反地，提供这些实施例的目的是使对本发明的公开内容的理解更加透彻全面。尽管参照前述实施例对本发明进行了详细的说明，对于本领域的技术人员来而言，其依然可以对前述各具体实施方式所记载的技术方案进行修改，或者对其中部分技术特征进行等效替换。凡是利用本发明说明书及附图内容所做的等效结构，直接或间接运用在其他相关的技术领域，均同理在本发明专利保护范围之内。
