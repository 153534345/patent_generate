标题title
储能系统升级方法、装置、计算机设备及可读存储介质
摘要abst
本申请涉及一种储能系统升级方法、装置、计算机设备及可读存储介质，包括：根据预设升级请求与云端进行预设次数的握手验证；所述握手验证全部成功后，接收所述云端下发的固件升级包；为所述固件升级包添加待验证数据，以得到目标固件升级包；将所述目标固件升级包发送至储能系统的目标从机设备；根据所述目标从机设备的反馈信号，完成所述目标从机设备的固件升级。本申请通过在握手过程与分配固件升级包过程添加多种验证模式，有效提升了储能系统进行OTA升级时的安全性。
权利要求书clms
1.一种储能系统升级方法，其特征在于，包括：根据预设升级请求与云端进行预设次数的握手验证；若所述握手验证全部成功，接收所述云端下发的固件升级包；为所述固件升级包添加待验证数据，以得到目标固件升级包；将所述目标固件升级包发送至储能系统的目标从机设备；根据所述目标从机设备的反馈信号，完成所述目标从机设备的固件升级。2.根据权利要求1所述的方法，其特征在于，所述根据预设升级请求与云端进行预设次数的握手验证之前，所述方法还包括：与预设终端建立蓝牙连接；向所述预设终端发送当前固件信息；当所述当前固件信息与所述预设终端的最新固件信息不同时，接收所述预设终端发送的所述预设升级请求。3.根据权利要求1所述的方法，其特征在于，所述根据预设升级请求与云端进行预设次数的握手验证，包括：接收所述云端发送的固件升级包的部分加密数据；根据第一预设验证方法验证所述部分加密数据，以得到第一验证结果；若所述第一验证结果为验证通过，根据第二预设验证方法验证所述部分加密数据，以得到第二验证结果；若所述第二验证结果为验证通过，确定所述握手验证全部成功。4.根据权利要求3所述的方法，其特征在于，所述根据第一预设验证方法验证所述部分加密数据，包括：根据数字证书对所述部分加密数据中的数字签名进行验证；若所述数字签名验证通过，输出验证通过的第一验证结果；若所述数字签名验证失败，输出验证失败的第一验证结果。5.根据权利要求3所述的方法，其特征在于，所述根据第二预设验证方法验证所述部分加密数据，包括：根据AES私钥对所述部分加密数据进行解密；若解密得到目标特征码，输出验证通过的第二验证结果；若解密未得到所述目标特征码，输出验证失败的第二验证结果。6.根据权利要求3所述的方法，其特征在于，所述根据所述目标从机设备的反馈信号，完成所述目标从机设备的固件升级，包括：若所述目标从机设备的反馈信号为第一反馈信号，持续向目标从机设备发送所述固件升级包，直至目标从机设备完成固件升级；若所述目标从机设备的反馈信号为第二反馈信号，停止向目标从机设备发送所述固件升级包，并向预设终端发送校验异常信息。7.根据权利要求1所述的方法，其特征在于，所述为所述固件升级包添加待验证数据，以得到目标固件升级包，包括：在各固件升级包的升级包数据之间，间隔预设帧数生成并添加所述待验证数据，以得到所述目标固件升级包，其中，所述待验证数据与本地当前时间相关联。8.一种储能系统升级装置，其特征在于，包括：握手模块，用于根据预设升级请求与云端进行预设次数的握手验证；接收模块，用于若所述握手验证全部成功，接收所述云端下发的固件升级包；加密模块，用于为所述固件升级包添加待验证数据，以得到目标固件升级包；发送模块，用于将所述目标固件升级包发送至储能系统的目标从机设备；升级模块，用于根据所述目标从机设备的反馈信号，完成所述目标从机设备的固件升级。9.一种计算机设备，包括处理器和存储器，所述存储器存储有计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至7中任一项所述的储能系统升级方法的步骤。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至7中任一项所述的储能系统升级方法的步骤。
说明书desc
技术领域本申请涉及储能系统固件升级技术领域，特别是涉及一种储能系统升级方法、装置、计算机设备及可读存储介质。背景技术现有储能系统进行空中下载技术升级时，需要进行复杂的通信连接过程，且在通信过程中容易遭到恶意攻击而引发系统安全隐患。因此，亟需一种能够提高OTA升级过程中的安全性的储能系统升级方案。发明内容基于此，有必要针对储能系统OTA升级过程中的安全性问题，提供一种储能系统升级方法、装置、计算机设备及可读存储介质。具体方案如下：第一方面，一种储能系统升级方法，包括：根据预设升级请求与云端进行预设次数的握手验证；若所述握手验证全部成功，接收所述云端下发的固件升级包；为所述固件升级包添加待验证数据，以得到目标固件升级包；将所述目标固件升级包发送至储能系统的目标从机设备；根据所述目标从机设备的反馈信号，完成所述目标从机设备的固件升级。在其中一个实施例中，所述根据预设升级请求与云端进行预设次数的握手验证之前，所述方法还包括：与预设终端建立蓝牙连接；向所述预设终端发送当前固件信息；当所述当前固件信息与所述预设终端的最新固件信息不同时，接收所述预设终端发送的所述预设升级请求。在其中一个实施例中，所述根据预设升级请求与云端进行预设次数的握手验证，包括：接收所述云端发送的固件升级包的部分加密数据；根据第一预设验证方法验证所述部分加密数据，以得到第一验证结果；若所述第一验证结果为验证通过，根据第二预设验证方法验证所述部分加密数据，以得到第二验证结果；若所述第二验证结果为验证通过，确定所述握手验证全部成功。在其中一个实施例中，所述根据第一预设验证方法验证所述部分加密数据，包括：根据数字证书对所述部分加密数据中的数字签名进行验证；若所述数字签名验证通过，输出验证通过的第一验证结果；若所述数字签名验证失败，输出验证失败的第一验证结果。在其中一个实施例中，所述根据第二预设验证方法验证所述部分加密数据，包括：根据AES私钥对所述部分加密数据进行解密；若解密得到所述目标特征码，输出验证通过的第二验证结果；若解密未得到所述目标特征码，输出验证失败的第二验证结果。在其中一个实施例中，所述根据所述目标从机设备的反馈信号，完成所述目标从机设备的固件升级，包括：若所述目标从机设备的反馈信号为第一反馈信号，持续向目标从机设备发送所述固件升级包，直至目标从机设备完成固件升级；若所述目标从机设备的反馈信号为第二反馈信号，停止向目标从机设备发送所述固件升级包，并向预设终端发送校验异常信息。在其中一个实施例中，所述为所述固件升级包添加待验证数据，以得到目标固件升级包，包括：在各固件升级包的升级包数据之间，间隔预设帧数生成并添加所述待验证数据，以得到所述目标固件升级包，其中，所述待验证数据与本地当前时间相关联。第二方面，本申请实施例提供了一种储能系统升级装置，其特征在于，包括：握手模块，用于根据预设OTA升级请求与云端进行预设次数的握手验证；接收模块，用于若所述握手验证全部成功，接收所述云端下发的固件升级包；加密模块，用于为所述固件升级包添加待验证数据，以得到目标固件升级包；发送模块，用于将所述目标固件升级包发送至储能系统的目标从机设备；升级模块，用于根据所述目标从机设备的反馈信号，完成所述目标从机设备的固件升级。第三方面，一种计算机设备，包括处理器和存储器，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时实现第一方面所述的储能系统升级方法的步骤。第四方面，一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现第一方面所述的储能系统升级方法的步骤。综上，本申请实施例提供了一种储能系统升级方法、装置、计算机设备及可读存储介质，包括：根据预设升级请求与云端进行预设次数的握手验证；所述握手验证全部成功后，接收所述云端下发的固件升级包；为所述固件升级包添加待验证数据，以得到目标固件升级包；将所述目标固件升级包发送至储能系统的目标从机设备；根据所述目标从机设备的反馈信号，完成所述目标从机设备的固件升级。本申请通过在握手过程与分配固件升级包过程添加多种验证模式，有效提升了储能系统进行OTA升级时的安全性。附图说明图1为一个实施例中储能系统升级方法的应用环境示意图；图2为一个实施例中储能系统升级方法的方法流程示意图；图3为另一个实施例中储能系统升级方法的方法流程示意图；图4为一个实施例中储能系统升级方法的握手验证流程示意图；图5为一个实施例中储能系统升级装置的装置模块示意图；图6为一个实施例中计算机设备的设备结构示意图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。除非另有定义，本文所使用的所有的技术和科学术语与属于本申请的技术领域的技术人员通常理解的含义相同。本文中在本申请的说明书中所使用的术语只是为了描述具体的实施例的目的，不是旨在于限制本申请。可以理解，本申请所使用的术语“第一”、“第二”等可在本文中用于描述各种元件，但这些元件不受这些术语限制。这些术语仅用于将第一个元件与另一个元件区分。举例来说，在不脱离本申请的范围的情况下，可以将第一电阻称为第二电阻，且类似地，可将第二电阻称为第一电阻。第一电阻和第二电阻两者都是电阻，但其不是同一电阻。可以理解，以下实施例中的“连接”，如果被连接的电路、装置、单元等相互之间具有电信号或数据的传递，则应理解为“电连接”、“通信连接”等。在此使用时，单数形式的“一”、“一个”和“所述/该”也可以包括复数形式，除非上下文清楚指出另外的方式。还应当理解的是，术语“包括/包含”或“具有”等指定所陈述的特征、整体、步骤、操作、组件、部分或它们的组合的存在，但是不排除存在或添加一个或更多个其他特征、整体、步骤、操作、组件、部分或它们的组合的可能性。在一个实施例中，提供了一种储能系统升级方法，应用于如图1所示的应用环境中。如图1所示，储能系统包括主机设备和多个从机设备，主机设备与各从机设备通信连接。其中，储能系统的主机设备还与预设终端进行通信连接，用于从预设终端获取固件升级指令，以对主机设备及各从机设备进行固件升级。主机设备与预设终端之间的通信连接方式可以为蓝牙连接，也可以为WIFI连接，本实施例对此不作具体限定。预设终端包括但不限于手机、个人电脑、机器人或者智能可穿戴设备等。具体的，如图1所示，从机设备包括从机设备a、从机设备b、从机设备c和从机设备d等4个从机设备，各从机设备均可以控制独立的储能模块。需知的，从机设备的数量可以根据实际应用场景进行设置，此处仅作为示例说明，不作具体限定。主机设备与从机设备之间可以基于控制器局域网总线通信协议进行数据通信，也可以采用其它通信协议进行通信，本实施例对此不作具体限定。在实际应用过程中，预设终端与云端之间进行通信交互，云端按照预设协议打包固件升级程序，并向预设终端发送升级统一资源定位器，其中，预设协议的类型可以根据实际应用场景进行自适应选择。另外，储能系统的主机设备在接收预设终端发送的升级指令后，与云端之间进行通信交互，以获取云端发送的固件升级包，其中，云端也可以称为云端服务器或云计算平台，云端用于基于硬件资源和软件资源的服务，提供计算、网络和存储能力。在对主机设备或从机设备进行固件升级前，预设终端会通过主机设备获取主机设备的设备类型、从机设备的设备类型、主机设备的固件版本信息以及从机设备的固件版本信息，其中，固件版本信息包括固件版本号、固件大小以及固件循环冗余校验等信息。预设终端实时接收云端推送的最新固件的版本信息，并比对最新固件的版本信息与主机设备及从机设备的当前固件的版本信息，并在最新固件的版本信息与当前固件的版本信息不同时，使主机设备及各从机设备开始进行固件升级处理。在一个实施例中，如图2所示，提供了一种储能系统升级方法，以该方法应用于图1中的应用环境为例进行说明，包括以下步骤：S101，根据预设OTA升级请求与云端进行预设次数的握手验证。具体地，预设空中加载技术升级请求由预设终端根据储能系统的当前固件信息以及云端发送的最新固件信息生成。预设终端比较当前固件信息和最新固件信息，当最新固件信息的固件版本与当前固件信息的固件版本不同时，向储能系统发送预设OTA升级请求。储能系统接收预设OTA升级请求后，与云端开始执行多次的握手验证，仅在全部握手验证均成功后，开始进行数据通信。S102，握手验证全部成功后，接收云端下发的固件升级包；具体地，储能系统的主机设备在与云端的握手验证全部成功后，接收云端发送的加密后的固件升级包。主机设备在本地接收固件升级包后，对加密后的固件升级包进行添加待验证数据处理。S103，为固件升级包添加待验证数据，以得到目标固件升级包；具体地，主机设备预设有本地加密算法，本地加密算法用于为云端发送的固件升级包添加待验证数据，以形成包含待验证数据的目标固件升级包。从机设备在读取到待验证数据后，会根据待验证数据进行数据校验处理，仅当从机设备的校验结果与待验证数据一致时，从机设备继续接收固件升级包。在其中一个实施例中，为固件升级包添加待验证数据，以得到目标固件升级包，包括：在各固件升级包的升级包数据之间，间隔预设帧数生成并添加待验证数据，以得到目标固件升级包，其中，待验证数据与本地当前时间相关联。具体地，主机设备在添加待验证数据时，会间隔预设帧数将待验证数据嵌入到固件升级包中。举例来说，若一个固件升级包的大小为3兆，定义8个字节为1帧，那么3兆固件升级包共有393216帧，每10帧添加一个待验证数据，从机设备在接收数据时，每隔10帧进行一次数据校验处理。在实际应用过程中，待验证数据为实时生成的，与主机设备本地当前时间相关联，从机设备在和主机设备进行握手时，获取主机设备的本地当前时间，并根据主机设备的本地当前时间得到从机设备的本地验证数据，当从机设备的本地验证数据和固件升级包的待验证数据一致时，说明主机设备与从机设备之间的通信正常，并未受到恶意程序攻击，可以持续接收主机设备的固件升级包。在具体实施过程中，间隔的预设帧数可以随着固件升级包的数据大小而进行自适应设置，固件升级包数据越大，间隔的预设帧数越大，本实施例不对预设帧数进行具体限定。需知的，预设帧数以尽量减少验证次数为最佳。S104，将目标固件升级包发送至储能系统的目标从机设备；具体地，主机设备将目标固件升级包发送至目标从机设备前，还需与目标从机设备进行握手，以统一通信协议。在主机设备与目标从机设备握手成功后，将目标固件升级包发送至目标从机设备，以使目标从机设备开始进行固件升级。S105，根据目标从机设备的反馈信号，完成目标从机设备的OTA升级。具体地，目标从机设备在接收目标固件升级包时，会根据主机设备添加的待验证数据进行实时数据校验步骤，并向主机设备发送相应的反馈信号。主机设备根据目标从机设备发送的反馈信号，完成对目标从机设备的OTA升级过程。在其中一个实施例中，如图3所示，根据预设OTA升级请求与云端进行预设次数的握手验证之前，方法还包括：S201，与预设终端建立蓝牙连接。S202，向预设终端发送当前固件信息，以使预设终端根据最新固件信息与当前固件信息判断是否发送预设OTA升级请求。S203，当最新固件信息与当前固件信息不同时，接收预设终端发送的预设OTA升级请求。在具体实施过程中，储能系统的主机设备在进行固件升级步骤前，先与预设终端建立蓝牙连接，以便于后续接收预设OTA升级请求。预设终端与储能系统之间建立蓝牙连接即可以开始执行OTA升级步骤，有效简化了储能系统进行OTA升级的通信连接过程，有效提升了储能系统的OTA升级效率。具体地，当前固件信息包括主机设备的当前固件信息和各从机设备的当前固件信息。在一个实施例中，从机设备的类型及地址均不相同，且从机设备的固件信息与其类型相关联，主机设备向预设终端发送从机设备的当前固件信息时，会将从机设备的类型、地址及当前固件信息打包发送至预设终端，以便于预设终端识别对应的最新固件信息。预设终端会比对具有相同设备类型的当前固件信息和最新固件信息，且仅在当前固件信息和最新固件信息不同时，向储能系统的主机设备发送预设OTA升级请求。具体地，主机设备间隔预设时间向预设终端发送主机设备及从机设备的当前固件信息，预设时间可以根据实际应用场景进行自适应设置，此处不作限定。主机设备接收预设OTA升级请求后，开始与云端进行握手连接步骤。在其中一个实施例中，如图4所示，根据预设OTA升级请求与云端进行预设次数的握手验证，包括：S1011，接收云端发送的固件升级包的部分加密数据；具体地，部分加密数据为固件升级包的概要部分。云端在向主机设备发送固件升级包前，会对固件升级包的概要部分添加特征码，并打包添加特征码之后的概要部分，得到部分升级数据包；然后采用AES加密算法对部分升级数据包进行加密处理，并在加盖数字签证后，将带有数字签证的部分升级数据包发送至主机设备。主机设备接收的固件升级包的部分加密数据，即包括数字签证和特征码的加密部分升级数据包。在实际应用过程中，部分加密数据也可以为固件升级包的其它内容部分在执行添加特征码步骤、加密步骤以及加盖数字签证步骤后得到的升级数据包，本实施例不对部分加密数据的具体部分进行限定。S1012，根据第一预设验证方法验证部分加密数据，以得到第一验证结果；在具体实施例中，握手验证的次数可以根据实际应用场景进行自适应设置，通过设置多次握手验证步骤，能够有效防止云端与主机设备在通信过程中，因受到其它设备的恶意攻击而造成数据丢失和系统异常等情况。第一预设验证方法用于验证数字签证的真实性。第一验证结果包括验证成功和验证失败；当第一验证结果为验证成功时，说明主机设备对数字签证的验证无误；当第一验证结果为验证失败时，说明主机设备对数字签证的验证有误。具体地，云端在加盖数字签证的过程中，可以采用SHA-256算法对数字签证进行加密，也可以采用其它类型加密算法对数字签证进行加密。在其中一个实施例中，根据第一预设验证方法验证部分加密数据，包括：根据数字证书对部分加密数据中的数字签名进行验证；若数字签名验证通过，输出验证通过的第一验证结果；若数字签名验证失败，输出验证失败的第一验证结果。具体地，数字证书可以采用X.509格式进行生成和验证，也可以采用其它格式进行生成和验证，本实施例对此不作具体限定，可以根据实际应用场景进行自适应替换。S1013，若第一验证结果为验证通过，根据第二预设验证方法验证部分加密数据，以得到第二验证结果；具体地，第二预设验证方法仅在第一预设验证方法执行完成，得到验证通过的第一验证结果后开始执行。若第一验证结果为验证失败，储能系统的主机设备将拒绝云端发送的固件升级包，并向预设终端反馈OTA升级请求执行失败。用户可以通过预设终端查看OTA升级请求执行失败的节点，并对固件升级包以及储能系统进行相应的调整。若第一验证结果为验证通过，则对部分加密数据进行第二次验证。第二预设验证方法用于部分加密数据中的特征码，若解密部分加密数据后检测到相应的特征码，说明书主机设备的第二次验证通过；若解密部分加密数据后未检测到相应的特征码，说明主机设备的第二次验证失败。在其中一个实施例中，根据第二预设验证方法验证部分加密数据，包括：根据AES私钥对部分加密数据进行解密，以获取部分加密数据中的目标特征码；若得到目标特征码，输出验证通过的第二验证结果；若未得到目标特征码，输出验证失败的第二验证结果。在具体实施例中，云端通过AES加密方法加密固件升级包的部分升级数据包，主机设备则通过AES私钥对部分加密数据解密，并检测解密后的部分升级数据包中的目标特征码。在具体实施过程中，若云端采用其它加密方式对固件升级包的部分升级数据包进行加密，则主机设备通过对应的解密方式对部分加密数据进行解密。加密方式可以根据实际应用场景进行自适应替换，本实施例对此不作限定。具体地，若第二验证结果为验证失败，储能系统的主机设备将拒绝云端发送的固件升级包，并向预设终端反馈OTA升级请求执行失败。用户可以通过预设终端查看OTA升级请求执行失败的节点，并对固件升级包以及储能系统进行相应的调整。S1014，若第二验证结果为验证通过，确定握手验证全部成功。具体地，本实施例设置两次握手验证过程，且主机设备按照预设顺序执行第一预设验证方法和第二预设验证方法，在接收到第二验证结果为验证通过时，说明主机设备与云端之间的多次握手验证全部成功。在具体实施例中，握手验证的次数还可以根据实际应用场景进行自适应添加，本实施例对此不作限定。当握手验证的次数为三次及三次以上时，各握手验证的执行顺序需提前进行设置，主机设备按照提前设置的执行顺序依次执行各握手验证步骤。在其中一个实施例中，根据目标从机设备的反馈信号，完成目标从机设备的OTA升级，包括：若目标从机设备的反馈信号为第一反馈信号，持续向目标从机设备发送固件升级包，直至目标从机设备完成OTA升级；若目标从机设备的反馈信号为第二反馈信号，停止向目标从机设备发送固件升级包，并向预设终端发送校验异常信息。具体地，第一反馈信号为数据校验正常的反馈信号，主机设备接收第一反馈信号后，持续向目标从机设备发送固件升级包。第二反馈信号为数据校验异常的反馈信号，主机设备接收第二反馈信号后，停止向目标从机设备发送固件升级包，并生成目标从机设备校验异常的校验异常信息，向预设终端发送校验异常信息，以便于用户根据预设终端中的校验异常信息，快速定位目标从机设备，解决升级异常的问题。综上，本申请实施例提出了一种储能系统升级方法，通过在储能系统与云端之间进行通信交互前，进行多次握手验证步骤，有效提升了储能系统与云端进行通信交互的安全性，保障固件升级包的数据安全。储能系统的主机设备向储能系统的从机设备发送固件升级包前，还额外为固件升级包添加验证数据，进一步提升主机设备与从机设备之间的通信安全，有效防止了固件升级包因恶意程序的攻击而被损坏和替换，极大的提升了储能系统进行OTA升级的安全性。应该理解的是，虽然如上的各实施例所涉及的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，如上的各实施例所涉及的流程图中的至少一部分步骤可以包括多个子步骤或者多个阶段，这些子步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤中的子步骤或者阶段的至少一部分轮流或者交替地执行。基于同样的发明构思，本申请实施例还提供了一种用于实现上述所涉及的固件升级方法的固件升级装置。该装置所提供的解决问题的实现方案与上述方法中所记载的实现方法相似，故下面所提供的一个或多个固件升级装置实施例中的具体限定可以参见上文对于固件升级方法的限定，在此不再赘述。在一个实施例中，如图5所示，提供了一种储能系统升级装置500，包括：握手模块510，用于根据预设OTA升级请求与云端进行预设次数的握手验证；接收模块520，用于握手验证全部成功后，接收云端下发的固件升级包；加密模块530，用于为固件升级包添加待验证数据，以得到目标固件升级包；发送模块540，用于将目标固件升级包发送至储能系统的目标从机设备；升级模块550，用于根据目标从机设备的反馈信号，完成目标从机设备的OTA升级。在其中一个实施例中，储能系统升级装置500，还包括：蓝牙连接模块，用于与预设终端建立蓝牙连接；向所述预设终端发送当前固件信息，以使所述预设终端根据最新固件信息与所述当前固件信息判断是否发送所述预设OTA升级请求；当所述最新固件信息与所述当前固件信息不同时，接收所述预设终端发送的所述预设OTA升级请求。在其中一个实施例中，握手模块510，具体用于接收所述云端发送的固件升级包的部分加密数据；根据第一预设验证方法验证所述部分加密数据，以得到第一验证结果；若所述第一验证结果为验证通过，根据第二预设验证方法验证所述部分加密数据，以得到第二验证结果；若所述第二验证结果为验证通过，确定所述握手验证全部成功。在其中一个实施例中，握手模块510，具体用于根据数字证书对所述部分加密数据中的数字签名进行验证；若所述数字签名验证通过，输出验证通过的第一验证结果；若所述数字签名验证失败，输出验证失败的第一验证结果。在其中一个实施例中，握手模块510，具体用于根据AES私钥对所述部分加密数据进行解密，以获取所述部分加密数据中的目标特征码；若得到所述目标特征码，输出验证通过的第二验证结果；若未得到所述目标特征码，输出验证失败的第二验证结果。在其中一个实施例中，升级模块550，具体用于若所述目标从机设备的反馈信号为第一反馈信号，持续向目标从机设备发送所述固件升级包，直至目标从机设备完成OTA升级；若所述目标从机设备的反馈信号为第二反馈信号，停止向目标从机设备发送所述固件升级包，并向预设终端发送校验异常信息。在其中一个实施例中，加密模块530，具体用于在各固件升级包的升级包数据之间，间隔预设帧数生成并添加所述待验证数据，以得到所述目标固件升级包，其中，所述待验证数据与本地当前时间相关联。综上，本申请实施例提出了一种储能系统升级装置，通过在储能系统与云端之间进行通信交互前，进行多次握手验证步骤，有效提升了储能系统与云端进行通信交互的安全性，保障固件升级包的数据安全。储能系统的主机设备向储能系统的从机设备发送固件升级包前，还额外为固件升级包添加验证数据，进一步提升主机设备与从机设备之间的通信安全，有效防止了固件升级包因恶意程序的攻击而被损坏和替换，极大的提升了储能系统进行OTA升级的安全性。另外，参考图6，本申请实施例提供了一种计算机设备，包括处理器和存储器，存储器存储有计算机程序，处理器执行计算机程序时实现以下步骤：根据预设OTA升级请求与云端进行预设次数的握手验证；所述握手验证全部成功后，接收所述云端下发的固件升级包；为所述固件升级包添加待验证数据，以得到目标固件升级包；将所述目标固件升级包发送至储能系统的目标从机设备；根据所述目标从机设备的反馈信号，完成所述目标从机设备的OTA升级。在具体实时过程中，计算机设备可以为储能设备或属于储能系统中的任一控制设备，本实施例对此不作限定。本申请实施例提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现以下步骤：根据预设OTA升级请求与云端进行预设次数的握手验证；所述握手验证全部成功后，接收所述云端下发的固件升级包；为所述固件升级包添加待验证数据，以得到目标固件升级包；将所述目标固件升级包发送至储能系统的目标从机设备；根据所述目标从机设备的反馈信号，完成所述目标从机设备的OTA升级。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一非易失性计算机可读取存储介质中，该计算机程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、数据库或其它介质的任何引用，均可包括非易失性和易失性存储器中的至少一种。非易失性存储器可包括只读存储器、磁带、软盘、闪存、光存储器、高密度嵌入式非易失性存储器、阻变存储器、磁变存储器、铁电存储器、相变存储器、石墨烯存储器等。易失性存储器可包括随机存取存储器或外部高速缓冲存储器等。作为说明而非局限，RAM可以是多种形式，比如静态随机存取存储器或动态随机存取存储器等。本申请所提供的各实施例中所涉及的数据库可包括关系型数据库和非关系型数据库中至少一种。非关系型数据库可包括基于区块链的分布式数据库等，不限于此。本申请所提供的各实施例中所涉及的处理器可为通用处理器、中央处理器、图形处理器、数字信号处理器、可编程逻辑器、基于量子计算的数据处理逻辑器等，不限于此。以上所述实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请专利的保护范围应以所附权利要求为准。
