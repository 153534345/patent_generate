标题title
四开关Buck-Boost变换器无缝切换的控制方法
摘要abst
本发明公开了一种四开关Buck‑Boost变换器无缝切换的控制方法，包括以下步骤：获取输入、输出电压的采样结果；将Buck环路和Boost环路叠加成一个Buck‑Boost环路,同时变换器的Buck‑Boost开关管的占空比也进行叠加；Buck‑Boost环路结果与Buck管和Boost管的占空比相对应，环路结果随着实际输入输出电压改变从而改变Buck管和Boost管占空比,变换器Buck‑Boost模式进行自动切换。本发明能够改进现有技术的不足，实现Buck‑Boost模式的无缝切换，适用范围广。
权利要求书clms
1.一种四开关Buck-Boost变换器无缝切换的控制方法，其特征在于，包括以下步骤：获取输入、输出电压的采样结果；将Buck环路和Boost环路叠加成一个Buck-Boost环路,同时变换器的Buck-Boost开关管的占空比也进行叠加；Buck-Boost环路结果与Buck管和Boost管的占空比相对应，环路结果随着实际输入输出电压改变从而改变Buck管和Boost管占空比,变换器Buck-Boost模式进行自动切换。2.根据权利要求1所述的四开关Buck-Boost变换器无缝切换的控制方法，其特征在于：通过MCU的ADC模块采样得到输入电压，输出电压，经过数据处理后，用来计算Buck-Boost叠加环路，得到环路结果R范围为0～2×full；当R＜full, R对应Buck开关管占空比D1 = R/full，Boost管子完全关闭，变换器工作在Buck模式；当R≥full，对应Boost开关管占空比D2=/full，Buck管子完全打开，变换器工作在Boost模式。3.根据权利要求2所述的四开关Buck-Boost变换器无缝切换的控制方法，其特征在于：输出电压使用Buck-Boost闭环控制，环路结果R连续平滑过渡在full两边，Buck-Boost开关管的工作模式平滑过渡，变换器达到无缝切换。4.根据权利要求3所述的四开关Buck-Boost变换器无缝切换的控制方法，其特征在于：当输入电压大于所需输出电压时，变换器工作在Buck模式；环路结果默认为0，此时输出电压小于输出电压参考值，环路结果逐渐增大；将环路结果映射到开关管S1的占空比D1，D1逐渐增大，输出电压逐渐增大，D2保持为0，直至到达所需要的输出电压，并保持稳定；此时，占空比D1小于100%，环路结果范围为0～full；占空比D1 = R/full，S1的开通时间；续流管S2的开通时间由S1的开通时间计算得到/＞；控制S3常关/＞，S4常开/＞，此时变换器工作在Buck模式，输入输出电压关系为/＞。5.根据权利要求3所述的四开关Buck-Boost变换器无缝切换的控制方法，其特征在于：当输入电压小于输出电压时，环路结果逐渐变大；当R=full时，Buck管S1的占空比D1为100%，D2 = 0，此时输出电压与输入电压相等；输出电压没有达到目标电压，环路结果继续增大，Boost开关管需要开通的占空比D2 =/full，D1 = 1；S3的开通时间；根据输入输出电压范围限制D2的最大值/＞；续流管S4的开通时间由S3的开通时间计算得到/＞；控制S2常关/＞，S1常开/＞，变换器从Buck模式切换到Boost模式，输入输出电压关系为/＞。6.根据权利要求3所述的四开关Buck-Boost变换器无缝切换的控制方法，其特征在于：变换器工作在Boost模式时，若提高输入电压，依据，输出电压会升高，环路结果减小，占空比D2减小；当输入电压提高至于输出电压相等时，占空比D2减小为0%，R=full；若输入电压继续提高，R＜full，变换器进入Buck模式，完成Boost模式到Buck模式的无缝切换。
说明书desc
技术领域本发明涉及DC-DC升降压变换器技术领域，尤其是一种四开关Buck-Boost变换器无缝切换的控制方法。背景技术随着科技的日新月异，电子产品逐渐在人们生活和工作的各个方面扮演着重要角色。电源作为电子产品的心脏，在其中发挥着不可替代的作用。宽范围输入，宽范围输出DC-DC 变换器受到了广泛关注，其中四开关Buck-Boost电路以其优越的性能成为研究热点。目前四开关Buck-Boost电路的数字控制常用方式是双环路控制，根据输入电压与输出电压参考值比较来区分工作模式，输入电压小于输出电压，运行Boost环路，独立控制Boost开关管；输入电压大于输出电压，运行Buck环路，独立控制Buck开关管。具体控制方式如图1所示，其主要缺陷在于：当输入电压与输出电压接近时，由于实际的输入电压势必会存在波动，于是有可能在Buck环路和Boost环路之间切换，导致电路的工作模式有可能在Buck模式和Boost模式之间反复来回切换，从而导致一些不理想的结果，比如控制开关管的驱动信号可能变得不可控，输出电压抖动，系统在某一阶段不稳定，输出电压不能全范围稳定输出。《基于四开关Buck-Boost的三模式平滑切换控制策略》一文根据输入输出电压范围，人为地划定一段输入电压范围作为Buck-Boost工作状态，变换器工作在Buck-Boost模式。在这段范围之上工作在Buck模式，这段范围之下工作在Boost模式。此种方案引入了一种滤波模式，在输入电压与输出电压接近时会进入Buck-Boost模式，这种模式下输入电压等于输出电压。于是，Buck模式与Boost模式经过先转变为Buck-Boost模式再转变为Boost模式或Buck模式，一定程度上避免了以前的四开关Bcuk-Boost变换器在输入电压与输出电压接近时，工作状态可能在Buck模式和Boost模式之间切换导致变换器工作不理想的问题。但是，可以看出这一技术方案页存在一些缺陷：1、其引入了Buck-Boost模式一种新的工作状态，那么在Buck模式与Buck-Boost模式，Boost模式与Buck-Boost模式切换时就会出现新的问题。其通过在Buck模式和Boost模式下设定不同的输出电压参考值来避免这个问题。但如果实际应用要求在全范围输入电压做到额定输出电压不变，这就不适用了。2、其在Buck-Boost模式下输入电压等于输出电压，即是说这段输入电压范围内，输出电压不可调节，与输入电压必定相等，存在一定的局限性。3、在宽范围输入，宽范围输出的变换器应用中，如何选取输入电压范围作为Buck-Boost模式的工作区域也是一个挑战。发明内容本发明要解决的技术问题是提供一种四开关Buck-Boost变换器无缝切换的控制方法，能够解决现有技术的不足，实现Buck-Boost模式的无缝切换，适用范围广。为解决上述技术问题，本发明所采取的技术方案如下。一种四开关Buck-Boost变换器无缝切换的控制方法，包括以下步骤：获取输入、输出电压的采样结果；将Buck环路和Boost环路叠加成一个Buck-Boost环路,同时变换器的Buck-Boost开关管的占空比也进行叠加；Buck-Boost环路结果与Buck管和Boost管的占空比相对应，环路结果随着实际输入输出电压改变从而改变Buck管和Boost管占空比,变换器Buck-Boost模式进行自动切换。作为优选，通过MCU的ADC模块采样得到输入电压，输出电压，经过数据处理后，用来计算Buck-Boost叠加环路，得到环路结果R范围为0～2×full；当R＜full, R对应Buck开关管占空比D1 = R/full，Boost管子完全关闭，变换器工作在Buck模式；当R≥full，对应Boost开关管占空比D2 =/full，Buck管子完全打开，变换器工作在Boost模式。作为优选，输出电压使用Buck-Boost闭环控制，环路结果R连续平滑过渡在full两边，Buck-Boost开关管的工作模式平滑过渡，变换器达到无缝切换。作为优选，当输入电压大于所需输出电压时，变换器工作在Buck模式；环路结果默认为0，此时输出电压小于输出电压参考值，环路结果逐渐增大；将环路结果映射到开关管S1的占空比D1，D1逐渐增大，输出电压逐渐增大，D2保持为0，直至到达所需要的输出电压，并保持稳定；此时，占空比D1小于100%，环路结果范围为0～full；占空比D1 = R/full，S1的开通时间；续流管S2的开通时间由S1的开通时间计算得到/＞；控制S3常关/＞，S4常开/＞，此时变换器工作在Buck模式，输入输出电压关系为。作为优选，当输入电压小于输出电压时，环路结果逐渐变大；当R=full时，Buck管S1的占空比D1为100%，D2 = 0，此时输出电压与输入电压相等；输出电压没有达到目标电压，环路结果继续增大，Boost开关管需要开通的占空比D2 =/full，D1 = 1；S3的开通时间；根据输入输出电压范围限制D2的最大值/＞；续流管S4的开通时间由S3的开通时间计算得到/＞；控制S2常关/＞，S1常开，变换器从Buck模式切换到Boost模式，输入输出电压关系为/＞。作为优选，变换器工作在Boost模式时，若提高输入电压，依据，输出电压会升高，环路结果减小，占空比D2减小；当输入电压提高至于输出电压相等时，占空比D2减小为0%，R=full；若输入电压继续提高，R＜full，变换器进入Buck模式，完成Boost模式到Buck模式的无缝切换。采用上述技术方案所带来的有益效果在于：本发明将Buck环路结果，Boost环路结果叠加成一个Buck-Boost环路,同时变换器的Buck-Boost开关管的占空比也进行叠加。Buck-Boost环路结果作用到各开关管的工作状态,变换器Buck-Boost模式就会自动切换。即：R＜full，变换器自动工作在Buck模式；R≥full，变换器自动工作在Boost模式。R连续不跳变，变换器的工作模式跟随R变换，完成Buck/Boost模式的无缝切换。从而可以有效地避免当输入电压与输出电压接近时，系统工作不稳定的问题。具体的，本发明中变换器只存在两种工作模式，Buck模式和Boost模式，通过Buck-Boost环路控制方式实现了Buck/Boost模式的无缝切换，不需要类似于现有技术中引入Buck-Boost模式来过渡。本发明的控制策略是根据Buck-Boost环路结果来作用各管的工作状态从而控制变换器的工作模式，提高了本发明的适用范围。本发明只需一个Buck-Boost环路控制变换器，而现有技术中在Buck模式和Boost模式需要运行不同的PI环路来控制变换器，从而简化了控制系统的复杂度。本发明根据Buck-Boost环路结果来作用各管的工作状态从而控制变换器的工作模式，环路结果是连续不跳变的，变换器的工作模式跟随环路结果的变化而变化，完成Buck与Boost模式的无缝切换。解决了现有技术需要通过设定不同输出电压参考值来实现三种模式的切换，而且存在一定局限性的问题。在宽范围输入，宽范围输出的情况，现有技术的三模式技术方案不能很好处理。因为输出电压参考值在不同模式下不同，需求的输出电压变化时，其存在一段输入电压范围不能达到需求的输出电压。而本发明的输出电压参考值在不同模式下是一样的，若输入输出电压改变，环路结果也随之改变从而改变各管工作状态维持输出电压稳定。设定不同的输出电压参考值可以达到需求的输出电压。从而达到对于需求的输出电压变化，在全输入电压范围内仍可以实现正常运行的效果。附图说明图1是常见Buck-Boost电路控制原理框图。图2是本发明Buck-Boost环路工作流程图。图3是本发明Buck-Boost电路工作框架示意图。图4是本发明Buck-Boost环路与工作模式对应关系框图。具体实施方式参照图2-4，本发明实现的四开关Buck-Boost变换器的无缝切换的控制方式具体如下：通过MCU的ADC模块采样得到输入电压，输出电压，经过数据处理后，用来计算Buck-Boost叠加环路，得到环路结果R范围为0～2×full；当R＜full, R对应Buck开关管占空比D1 = R/full，Boost管子完全关闭，变换器工作在Buck模式；当R≥full，对应Boost开关管占空比D2 =/full，Buck管子完全打开，变换器工作在Boost模式。输出电压使用Buck-Boost闭环控制，环路结果R连续平滑过渡在full两边，Buck-Boost开关管的工作模式平滑过渡，变换器达到无缝切换。当输入电压大于所需输出电压时，变换器工作在Buck模式；环路结果默认为0，此时输出电压小于输出电压参考值，环路结果逐渐增大；将环路结果映射到开关管S1的占空比D1，D1逐渐增大，输出电压逐渐增大，D2保持为0，直至到达所需要的输出电压，并保持稳定；此时，占空比D1小于100%，环路结果范围为0～full；占空比D1 = R/full，S1的开通时间；续流管S2的开通时间由S1的开通时间计算得到/＞；控制S3常关/＞，S4常开/＞，此时变换器工作在Buck模式，输入输出电压关系为/＞。当输入电压小于输出电压时，环路结果逐渐变大；当R=full时，Buck管S1的占空比D1为100%，D2 = 0，此时输出电压与输入电压相等；输出电压没有达到目标电压，环路结果继续增大，Boost开关管需要开通的占空比D2 =/full，D1 = 1；S3的开通时间；根据输入输出电压范围限制D2的最大值/＞；续流管S4的开通时间由S3的开通时间计算得到/＞；控制S2常关/＞，S1常开/＞，变换器从Buck模式切换到Boost模式，输入输出电压关系为/＞。变换器工作在Boost模式时，若提高输入电压，依据，输出电压会升高，环路结果减小，占空比D2减小；当输入电压提高至于输出电压相等时，占空比D2减小为0%，R=full；若输入电压继续提高，R＜full，变换器进入Buck模式，完成Boost模式到Buck模式的无缝切换。若修改设置输出电压，则与上述修改输入电压分析过程类似。所以，调节输入输出电压，环路结果将会随之变化，由环路结果计算各管的工作状态，从而由各管的开关状态确定了变换器的工作模式。所以无论输入电压与输出电压接近，还是大于或小于，都可以实现Buck模式与Boost模式之间的无缝切换。在本发明的描述中，需要理解的是，术语“纵向”、“横向”、“上”、“下”、“前”、“后”、“左”、“右”、“竖直”、“水平”、“顶”、“底”、“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。以上显示和描述了本发明的基本原理和主要特征和本发明的优点。本行业的技术人员应该了解，本发明不受上述实施例的限制，上述实施例和说明书中描述的只是说明本发明的原理，在不脱离本发明精神和范围的前提下，本发明还会有各种变化和改进，这些变化和改进都落入要求保护的本发明范围内。本发明要求保护范围由所附的权利要求书及其等效物界定。
