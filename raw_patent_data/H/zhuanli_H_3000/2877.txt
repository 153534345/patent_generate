标题title
时间校准方法、装置、电子设备以及存储介质
摘要abst
本公开提供了一种时间校准方法、装置、电子设备及存储介质，涉及自动驾驶技术领域。具体实现方案为：确定第一基准时间和第一系统时间之间的第一观测误差，其中，第一基准时间和第一系统时间为第一时刻分别对基准时间系统和待校准系统的时间值进行观测得到；确定第二基准时间和第二系统时间之间的第二观测误差，其中，第二基准时间和第二系统时间为第二时刻分别对基准时间系统和待校准系统的时间值进行观测得到；基于第一系统时间、第二系统时间、第一观测误差、第二观测误差，确定待校准系统的单位时间偏差；基于单位时间偏差对待校准系统的时间进行校准。
权利要求书clms
1.一种时间校准方法，包括：确定第一基准时间和第一系统时间之间的第一观测误差，其中，所述第一基准时间和所述第一系统时间为第一时刻分别对基准时间系统和待校准系统的时间值进行观测得到；确定第二基准时间和第二系统时间之间的第二观测误差，其中，所述第二基准时间和所述第二系统时间为第二时刻分别对所述基准时间系统和所述待校准系统的时间值进行观测得到；基于所述第一系统时间、第二系统时间、所述第一观测误差、所述第二观测误差，确定所述待校准系统的单位时间偏差；基于所述单位时间偏差对所述待校准系统的时间进行校准。2.根据权利要求1所述的方法，其中，基于所述单位时间偏差对所述待校准系统的时间进行校准，包括：获取历史系统时间和当前系统时间之间相隔的目标时长，其中，所述历史系统时间为所述待校准系统历史被校准时对应的系统时间；基于所述单位时间偏差和目标时长，确定目标补偿时间；基于所述目标补偿时间对所述待校准系统的时间进行校准。3.根据权利要求1所述的方法，其中，基于所述第一系统时间、第二系统时间、所述第一观测误差、所述第二观测误差，确定所述待校准系统的单位时间偏差，包括：基于所述第一系统时间、第一偏差变量、固定变量和所述第一观测误差，构建第一表达式，其中，所述第一偏差变量为定位过程中所述待校准系统的时钟晶振引入的时间偏差；基于所述第二系统时间、所述第一偏差变量、所述固定变量和所述第二观测误差，构建第二表达式；对所述第一表达式和所述第二表达式进行求解，得到所述单位时间偏差。4.根据权利要求2所述的方法，其中，基于所述单位时间偏差和目标时长，确定目标补偿时间，包括：基于所述单位时间偏差和所述目标时长的乘积，确定所述目标补偿时间。5.根据权利要求2所述的方法，其中，基于所述目标补偿时间对所述待校准系统的时间进行校准，包括：基于所述目标补偿时间和所述待校准系统的时间的和值进行校准。6.根据权利要求3所述的方法，其中，所述固定变量用于表示在观测所述基准时间系统的时间或所述待校准系统的时间时引入的时间开销。7.一种时间校准装置，包括：第一确定模块，用于确定第一基准时间和第一系统时间之间的第一观测误差，其中，所述第一基准时间和所述第一系统时间为第一时刻分别对基准时间系统和待校准系统的时间值进行观测得到；第二确定模块，用于确定第二基准时间和第二系统时间之间的第二观测误差，其中，所述第二基准时间和所述第二系统时间为第二时刻分别对所述基准时间系统和所述待校准系统的时间值进行观测得到；第三确定模块，用于基于所述第一系统时间、第二系统时间、所述第一观测误差、所述第二观测误差，确定所述待校准系统的单位时间偏差；校准模块，用于基于所述单位时间偏差对所述待校准系统的时间进行校准。8.根据权利要求7所述的装置，其中，校准模块，包括：第一获取单元，用于获取历史系统时间和当前系统时间之间相隔的目标时长，其中，所述历史系统时间为所述待校准系统历史被校准时对应的系统时间；第一确定单元，用于基于所述单位时间偏差和目标时长，确定目标补偿时间；校准单元，用于基于所述目标补偿时间对所述待校准系统的时间进行校准。9.根据权利要求8所述的装置，其中，第三确定模块，包括：第一构建单元，用于基于所述第一系统时间、第一偏差变量、固定变量和所述第一观测误差，构建第一表达式，其中，所述第一偏差变量为定位过程中所述待校准系统的时钟晶振引入的时间偏差；第二构建单元，用于基于所述第二系统时间、所述第一偏差变量、所述固定变量和所述第二观测误差，构建第二表达式；求解单元，用于基于所述第二系统时间、所述第一偏差变量、所述固定变量和所述第二观测误差，构建第二表达式。10.根据权利要求8所述的装置，其中，第一确定单元还用于基于所述单位时间偏差和所述目标时长的乘积，确定所述目标补偿时间。11.根据权利要求8所述的装置，其中，校准单元还用于基于所述目标补偿时间和所述待校准系统的时间的和值进行校准。12.一种电子设备，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-6中任一项所述的方法。13.一种存储有计算机指令的非瞬时计算机可读存储介质，其中，所述计算机指令用于使所述计算机执行根据权利要求1-6中任一项所述的方法。14.一种计算机程序产品，包括计算机程序，所述计算机程序在被处理器执行时实现根据权利要求1-6中任一项所述的方法。
说明书desc
技术领域本公开涉及自动驾驶技术领域，尤其涉及一种时间校准方法、装置、电子设备以及存储介质。背景技术目前，自动驾驶系统要求各计算单元以及各传感器的时间同步在非常小的精度上，时间同步越精确则计算结果越准确，目前的全球基准时间系统授时是按照秒脉冲信号进行的，即，在整秒处系统时间会被GPS更新，但是在两次时间同步之间的时间段，系统时间是由自身晶振驱动维持的，晶振会受到温度等因素的影响存在一定的频率偏差，导致系统时间偏差较大。发明内容本公开提供了一种时间校准方法、装置、电子设备以及存储介质，以至少解决相关技术中系统时间偏差较大的技术问题。根据本公开的一方面，提供了一种时间校准方法，包括：确定第一基准时间和第一系统时间之间的第一观测误差，其中，第一基准时间和第一系统时间为第一时刻分别对基准时间系统和待校准系统的时间值进行观测得到；确定第二基准时间和第二系统时间之间的第二观测误差，其中，第二基准时间和第二系统时间为第二时刻分别对基准时间系统和待校准系统的时间值进行观测得到；基于第一系统时间、第二系统时间、第一观测误差、第二观测误差，确定待校准系统的单位时间偏差；基于单位时间偏差对待校准系统的时间进行校准。根据本公开的又一方面，提供了一种时间校准装置，包括：第一确定模块，用于确定第一基准时间和第一系统时间之间的第一观测误差，其中，第一基准时间和第一系统时间为第一时刻分别对基准时间系统和待校准系统的时间值进行观测得到；第二确定模块，用于确定第二基准时间和第二系统时间之间的第二观测误差，其中，所述第二基准时间和所述第二系统时间为第二时刻分别对所述基准时间系统和所述待校准系统的时间值进行观测得到；第三确定模块，用于基于第一系统时间、第二系统时间、第一观测误差、第二观测误差，确定待校准系统的单位时间偏差；校准模块，用于基于单位时间偏差对待校准系统的时间进行校准。根据本公开的又一方面，提供了一种电子设备，包括：至少一个处理器；以及与至少一个处理器通信连接的存储器；其中，存储器存储有可被至少一个处理器执行的指令，指令被至少一个处理器执行，以使至少一个处理器能够执行本公开提出的时间校准方法。根据本公开的又一方面，提供了一种存储有计算机指令的非瞬时计算机可读存储介质，其中，计算机指令用于使计算机执行本公开提出的时间校准方法。根据本公开的又一方面，提供了一种计算机程序产品，包括计算机程序，计算机程序在被处理器执行本公开提出的待校准系统的时间校准方法。在本公开中，首先确定第一基准时间和第一系统时间之间的第一观测误差，其中，第一基准时间和第一系统时间为第一时刻分别对基准时间系统和待校准系统的时间值进行观测得到；确定第二基准时间和第二系统时间之间的第二观测误差，其中，第二基准时间和第二系统时间为第二时刻分别对基准时间系统和待校准系统的时间值进行观测得到；基于第一系统时间、第二系统时间、第一观测误差、第二观测误差，确定待校准系统的单位时间偏差；基于单位时间偏差对待校准系统的时间进行校准，实现了通过计算得出并维护动态的单位时间偏差，并根据单位时间偏差修正补偿当前系统时间，使得当前系统时间摆脱晶振频偏的影响，能够在相当长的时间内维持微秒尺度下的精确度，实现了提高系统时间的精确度，进而解决了相关技术中系统时间偏差较大的技术问题。应当理解，本部分所描述的内容并非旨在标识本公开的实施例的关键或重要特征，也不用于限制本公开的范围。本公开的其它特征将通过以下的说明书而变得容易理解。附图说明附图用于更好地理解本方案，不构成对本公开的限定。其中：图1是根据本公开实施例提供的一种时间同步问题的示意图；图2是根据本公开实施例提供的一种时间校准方法流程图；图3是根据本公开实施例提供的另一种时间校准方法流程图；图4是根据本公开实施例提供的一种时间校准装置的结构框图。具体实施方式以下结合附图对本公开的示范性实施例做出说明，其中包括本公开实施例的各种细节以助于理解，应当将它们认为仅仅是示范性的。因此，本领域普通技术人员应当认识到，可以对这里描述的实施例做出各种改变和修改，而不会背离本公开的范围和精神。同样，为了清楚和简明，以下的描述中省略了对公知功能和结构的描述。需要说明的是，本公开的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本公开的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。自动驾驶系统要求各计算单元以及各传感器的时间同步在非常小的精度上，时间同步越精确则计算结果越精确、给自动驾驶上层软件模块提供的计算结果的可信度就越高。GPS授时同步是按照秒脉冲信号进行的，即每秒钟同步一次，因此在整秒处系统时间会被GPS时间更新，因而得到准确的时间。但在两次时间同步之间的时间段，系统时间是由自身的晶振驱动维持。晶振因受温度等因素影响都有一定的频率偏差，因此在这段时间内，系统时间会随着时间有累计性的偏差。目前为了减少偏差带来的影响，系统设计者一般会综合考虑可接受的系统时间最大偏差，以及时间更新程序周期性纠偏带来的系统负载，制定一个时间更新的周期，比如每60秒或每10秒更新一次。因此这种方案的缺点就是两次更新之间的系统时间是不准确的，受晶振频偏影响，并且越是临近下一次时间更新时刻，系统时间偏差越大。图1是根据本公开实施例提供的一种时间同步问题的示意图。其中，T2和T3之间的时间偏差会随着时间的流动变得越来越大，直至下一次GPS时间同步才能减少偏差，但是T2和T3之间的偏差没有办法消除。本申请提供了一种时间校准方法，能够计算出时钟晶振引入的时间偏差，并将该时间偏差作为计算补偿，使得系统能够提供长期的、精确的时间同步。根据本公开实施例，提供了一种时间校准方法，需要说明的是，在附图的流程图示出的步骤可以在诸如一组计算机可执行指令的计算机系统中执行，并且，虽然在流程图中示出了逻辑顺序，但是在某些情况下，可以以不同于此处的顺序执行所示出或描述的步骤。本公开实施例所提供的方法实施例可以在移动终端、计算机终端或者类似的电子设备中执行。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本公开的实现。图2是根据本公开实施例提供的一种时间校准方法流程图。如图2所示，该方法可以包括如下步骤：步骤S202，确定第一基准时间和第一系统时间之间的第一观测误差。其中，第一基准时间和第一系统时间为第一时刻分别对基准时间系统和待校准系统的时间值进行观测得到。上述的第一时刻可以为当前时刻，也可以是任意一个时刻。上述的基准时间系统可以为卫星基准时间系统、全球基准时间系统、全球导航卫星系统、基站基准时间系统、无线网络基准时间系统、北斗基准时间系统等。上述的第一基准时间可以为对基准时间系统进行观测得到的时间点。可选的，可以利用调用接口对基准时间系统的时间点进行调用，从而得到第一基准时间，以便实现对基准时间系统的时间点进行观测的目的。上述的待校准系统可以自动驾驶车辆的待校准系统，上述待校准系统还可以是计算机的待校准系统，上述的待校准系统还可以为移动终端的待校准系统。上述的第一系统时间可以是对待校准系统进行观测得到的时间点。可选的，可以利用调用接口对待校准系统的时间点进行调用，从而得到第一系统时间，以便实现对待校准系统的时间点进行观测的目的。上述的第一观测误差可以是第一基准时间和第一系统时间之间的观测误差，用于表示在第一时刻待校准系统相对于基准时间系统所产生的误差。在一种可选的实施例中，可以确定第一基准时间和第一系统时间的第一观测误差，以便于后续根据该第一观测误差对待校准系统的系统时间进行校准，从而得到准确度较高的系统时间。在另一种可选的实施例中，可以周期性的确定第一基准时间和第一系统时间的第一观测误差，还可以根据预先设定的时刻获取第一基准时间与第一系统时间的第一观测误差。在又一种可选的实施例中，可以先采集到一段时间内的多个系统时间，通过对多个系统时间进行预处理，得到上述的第一系统时间，可选的，预处理的方式可以为取多个系统时间的平均值，将该平均值作为上述的第一系统时间，还可以是取多个系统时间中误差较小的系统时间，将该时间点作为上述的第一系统时间。还可以将一段时间内的第一个提取到的系统时间作为上述的第一系统时间，还可以将一段时间内最后一个提取到的系统时间作为上述的第一系统时间。对第二系统时间的提取方式与对第一系统时间的提取方式可以相同，后续不再赘述。可选的，可以根据待校准系统的具体应用场景设置上述第一系统时间的获取方式。步骤S304，确定第二基准时间和第二系统时间之间的第二观测误差。其中，第二基准时间和第二系统时间为第二时刻分别对基准时间系统和待校准系统的时间值进行观测得到。上述的第二基准时间和第二系统时间可以为在获取到第一基准时间和第一系统时间之后获取到的时间点。上述的第二时刻可以为第一时刻之后的时刻。其中，第二时刻和第一时刻之间可以间隔预设时间段。第二时刻可以是第一时刻之后的任意时刻。上述的第二观测误差可以是第二基准时间和第二系统时间之间的观测误差，用于表示在第二时刻待校准系统相对于基准时间系统所产生的误差。在一种可选的实施例中，可以对GPS系统的时间值进行观测，得到上述的第二基准时间，以便根据第二基准时间对待校准系统的系统时间进行校准。在一种可选的实施例中，可以在第一时刻之后的第二时刻确定第二基准时间和第二系统时间，还可以根据预先设定的时刻获取第二基准时间与第二系统时间的第二观测误差。其中，第一时刻和第二时刻可以是相邻的时刻，第一时刻和第二时刻也可以是间隔预设时间的时刻。在另一种可选的实施例中，第一时刻和第二时刻可以根据具体的场景灵活的设置。步骤S306，基于第一系统时间、第二系统时间、第一观测误差、第二观测误差，确定待校准系统的单位时间偏差。上述的单位时间偏差可以为每秒钟晶振引入的时间偏差。其中，单位时间偏差可以为定位过程中待校准系统的时钟晶振引入的时间偏差。上述的待校准系统可以为车辆的整个自动驾驶系统，其中可以包括计算单元和各种传感器，但不仅限于此.在一种可选的实施例中，待校准系统可以使用时钟晶振的方式进行计时。在晶振计时的过程中会引入部分的时间偏差。在一种可选的实施例中，可以设置第一变量和第二变量，其中，第一变量为单位时间偏差，第二变量为固定变量，可以根据第一变量、第一系统时间和第二变量以及第一观测误差构建第一个方程组，可以根据第一变量、第二系统时间和第二变量以及第二观测误差构建第二个方程组，可以对第一个方程组和第二个方程组求解，得到第一变量和第二变量的解。从而得到上述的单位时间偏差。上述的固定变量可以表示由于观测而引入的软件程序固定的时间开销，例如，通过接口调用系统时间和基准时间引入的开销。步骤S308，基于单位时间偏差对待校准系统的时间进行校准。在一种可选的实施例中，可以根据单位时间偏差对待校准系统的时间进行校准，得到校准后的目标系统时间，其中，目标系统时间应用于待校准系统的计算过程中。在一种可选的实施例中，在调取到待校准系统的当前系统时间之后，可以获取当前系统时间和上一次系统被更新时的历史系统时间之间的差值，并根据该差值与单位时间偏差的乘积得到补偿时间，可以将该补偿时间叠加到当前系统时间上，以便于对当前系统时间进行校准，从而得到校准后的目标系统时间。进一步的，在得到目标系统时间之后，待校准系统可以使用该目标系统时间进行计算，以便于提高待校准系统整体的时间精确度，从而提高待校准系统的处理准确度。在另一种可选的实施例中，可以重复使用单位时间偏差对待校准系统的系统时间进行校准。也可以周期性的求解单位时间偏差，根据求解得到的单位时间偏差对待校准系统的系统时间进行校准。还可以按照预设时间求解单位时间偏差，根据求解得到的单位时间偏差对待校准系统的系统时间进行校准。通过上述步骤，首先确定第一基准时间和第一系统时间之间的第一观测误差，其中，第一基准时间和第一系统时间为第一时刻分别对基准时间系统和待校准系统的时间值进行观测得到；确定第二基准时间和第二系统时间之间的第二观测误差，其中，第二基准时间和第二系统时间为第二时刻分别对基准时间系统和待校准系统的时间值进行观测得到；基于第一系统时间、第二系统时间、第一观测误差、第二观测误差，确定待校准系统的单位时间偏差；基于单位时间偏差对待校准系统的时间进行校准，实现了通过计算得出并维护动态的单位时间偏差，并根据单位时间偏差修正补偿当前系统时间，使得当前系统时间摆脱晶振频偏的影响，能够在相当长的时间内维持微秒尺度下的精确度，实现了提高系统时间的精确度，进而解决了相关技术中系统时间偏差较大的技术问题。可选地，基于单位时间偏差对待校准系统的时间进行校准，包括：获取历史系统时间和当前系统时间之间相隔的目标时长，其中，历史系统时间为待校准系统历史被校准时对应的系统时间；基于单位时间偏差和目标时长，确定目标补偿时间；基于目标补偿时间对待校准系统的时间进行校准。上述的历史系统时间可以是待校准系统上一次被校准时对应的系统时间。上述的目标补偿时间用于对待校准系统的晶振偏差进行补偿。在一种可选的实施例中，可以根据当前系统时间和历史系统时间之间的差值确定上述的目标时长，可以根据单位时间偏差和目标时长的乘积，确定目标补偿时间，可以根据目标补偿时间与当前系统时间的和值，得到目标系统时间。通过上述步骤，可以定期的通过计算得到目标补偿时间来对当前系统时间进行校准，以便得到精确度更高的目标系统时间。可选地，基于第一系统时间、第二系统时间、第一观测误差、第二观测误差，确定待校准系统的单位时间偏差，包括：基于第一系统时间、第一偏差变量、固定变量和第一观测误差，构建第一表达式，其中，第一偏差变量为定位过程中待校准系统的时钟晶振引入的时间偏差；基于第二系统时间、第一偏差变量、固定变量和第二观测误差，构建第二表达式；对第一表达式和第二表达式进行求解，得到单位时间偏差。上述的第一系统时间可以为Tsys1。第一基准时间可以为Tgps1。上述的第一观测误差可以为Tdiff1，其中，Tdiff1＝Tgps1-Tsys1。上述的第一偏差变量可以为DPS，其用于表示定位过程中待校准系统的每秒时钟晶振引入的时间偏差。上述的固定变量可以为a，用于表示由于观测系统时间而引入的软件程序固定的时间开销。上述的第一表达式可以为DPS*Tsys1+a＝Tdiff1。上述的第二系统时间可以为Tsys2。第二基准时间可以为Tgps2。上述的第二观测误差可以为Tdiff2，其中，Tdiff2＝Tgps2-Tsys2。上述的第二表达式可以为DPS*Tsys2+a＝Tdiff2。可以对进行求解，得到单位时间偏差，也即上述的DPS对应的解。通过上述步骤，可以计算得出并维护动态的单位时间偏差，并根据频偏率修正补偿系统时间，使得系统时间能够摆脱晶振频偏的影响，能够长时间维持微秒尺度下的精确度。可选地，基于单位时间偏差和目标时长，确定目标补偿时间，包括：基于单位时间偏差和目标时长的乘积，确定目标补偿时间。上述的目标时长可以通过T-LU得到，其中，T为待校准系统调用拿到的此刻的系统时间，LU为上一次待校准系统被更新的时刻。上述的单位时间偏差为DPS的求解值。上述的目标补偿时间可以为Tcomp，其中，Tcomp＝*DPS。在一种可选的实施例中，可以重复使用Tcomp，也可以定期的获取得到Tcomp，还可以在每次对待校准系统的系统时间进行校准时候得到Tcomp。通过上述步骤，可以在调用待校准系统的当前系统时间之后，通过目标补偿时间对当前系统时间进行校准，从而得到精确度更高的目标系统时间，可以根据该目标系统时间对待校准系统的系统时间进行更新。可选地，基于目标补偿时间对待校准系统的时间进行校准，包括：基于目标补偿时间和待校准系统的时间的和值进行校准。在一种可选的实施例中，可以直接将目标补偿时间叠加到当前系统时间上，得到目标系统时间，以便通过该目标系统时间可以保证待校准系统能够长时间足够精确。可选地，固定变量用于表示在观测基准时间系统的时间或待校准系统的时间时引入的时间开销。上述的固定变量可以通过接口调用基准时间系统的时间或待校准系统的时间引入的软件程序上的时间开销。通过本公开的上述内容，可以在时间敏感系统上计算出由于晶振器件温度漂移所产出的精度损失，并通过计算给予补偿纠正，保证系统时间长时间足够精确。通过GPS授时和系统测量，计算出系统晶振引入的时间偏差，利用系统晶振偏差，补偿系统时间，获得更为精确的系统时间。图3是根据本公开实施例提供的另一种时间校准方法流程图。如图3所示，该方法可以包括如下步骤：步骤S302，确定第一基准时间和第一系统时间之间的第一观测误差。步骤S304，确定第一基准时间和第一系统时间之间的第一观测误差，其中，第一基准时间和第一系统时间为第一时刻分别对基准时间系统和待校准系统的时间值进行观测得到；步骤S306，确定第二基准时间和第二系统时间之间的第二观测误差，其中，第二基准时间和第二系统时间为第二时刻分别对基准时间系统和待校准系统的时间值进行观测得到；步骤S308，基于第一系统时间、第二系统时间、第一观测误差、第二观测误差，确定待校准系统的单位时间偏差；步骤S310，获取历史系统时间和当前系统时间之间相隔的目标时长，其中，历史系统时间为待校准系统历史被校准时对应的系统时间；步骤S312，基于单位时间偏差和目标时长，确定目标补偿时间；步骤S314，基于目标补偿时间对待校准系统的时间进行校准。本公开的技术方案中，所涉及的用户个人信息的收集、存储、使用、加工、传输、提供和公开等处理，均符合相关法律法规的规定，且不违背公序良俗。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到根据上述实施例的方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本公开的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台终端设备执行本公开各个实施例的方法。在本公开中还提供了一种···装置，该装置用于实现上述实施例及优选实施方式，已经进行过说明的不再赘述。如以下所使用的，术语“模块”可以实现预定功能的软件和/或硬件的组合。尽管以下实施例所描述的装置较佳地以软件来实现，但是硬件，或者软件和硬件的组合的实现也是可能并被构想的。图4是根据本公开实施例提供的一种时间校准装置的结构框图，如图4所示，一种时间校准装置400包括：第一确定模块402、第二确定模块404、第三确定模块406、校准模块408。其中，第一确定模块，用于确定第一基准时间和第一系统时间之间的第一观测误差，其中，第一基准时间和第一系统时间为第一时刻分别对基准时间系统和待校准系统的时间值进行观测得到；第二确定模块，用于确定第二基准时间和第二系统时间之间的第二观测误差，其中，第二基准时间和第二系统时间为第二时刻分别对基准时间系统和待校准系统的时间值进行观测得到；第三确定模块，用于基于第一系统时间、第二系统时间、第一观测误差、第二观测误差，确定待校准系统的单位时间偏差；校准模块，用于基于单位时间偏差对待校准系统的时间进行校准。可选的，校准模块包括：第一获取单元、第一确定单元、校准单元。其中，第一获取单元用于获取历史系统时间和当前系统时间之间相隔的目标时长，其中，历史系统时间为待校准系统历史被校准时对应的系统时间；第一确定单元用于基于单位时间偏差和目标时长，确定目标补偿时间；校准单元用于基于目标补偿时间和待校准系统的时间的和值进行校准。可选的，第三确定模块包括：第一构建单元、第二构建单元、求解单元。其中，第一构建单元用于基于第一系统时间、第一偏差变量、固定变量和第一观测误差，构建第一表达式，其中，第一偏差变量为定位过程中待校准系统的时钟晶振引入的时间偏差；第二构建单元用于基于第一系统时间、第一偏差变量、固定变量和第一观测误差，构建第一表达式，其中，第一偏差变量为定位过程中待校准系统的时钟晶振引入的时间偏差；求解单元用于基于第一系统时间、第一偏差变量、固定变量和第一观测误差，构建第一表达式，其中，第一偏差变量为定位过程中待校准系统的时钟晶振引入的时间偏差。可选的，第一确定单元还用于基于单位时间偏差和目标时长的乘积，确定目标补偿时间。可选的，校准单元还用于基于目标补偿时间和待校准系统的时间的和值进行校准。可选的，固定变量用于表示在观测基准时间系统的时间或待校准系统的时间时引入的时间开销。需要说明的是，上述各个模块是可以通过软件或硬件来实现的，对于后者，可以通过以下方式实现，但不限于此：上述模块均位于同一处理器中；或者，上述各个模块以任意组合的形式分别位于不同的处理器中。根据本公开的实施例，本公开还提供了一种电子设备，包括存储器和至少一个处理器，该存储器中存储有计算机指令，该处理器被设置为运行计算机指令以执行上述任一项方法实施例中的步骤。可选地，上述电子设备还可以包括传输设备以及输入输出设备，其中，该传输设备和上述处理器连接，该输入输出设备和上述处理器连接。可选地，在本公开中，上述处理器可以被设置为通过计算机程序执行以下步骤：S1，确定第一基准时间和第一系统时间之间的第一观测误差，其中，第一基准时间和第一系统时间为第一时刻分别对基准时间系统和待校准系统的时间值进行观测得到；S2，确定第二基准时间和第二系统时间的第二观测误差，其中，第二基准时间和第二系统时间为第二时刻分别对基准时间系统和待校准系统的时间进行观测得到；S3，基于第一系统时间、第二系统时间、第一观测误差、第二观测误差，确定待校准系统的单位时间偏差；S4，基于单位时间偏差对待校准系统的时间进行校准。可选地，本实施例中的具体示例可以参考上述实施例及可选实施方式中所描述的示例，本实施例在此不再赘述。根据本公开的实施例，本公开还提供了一种存储有计算机指令的非瞬时计算机可读存储介质，该非瞬时计算机可读存储介质中存储有计算机指令，其中，该计算机指令被设置为运行时执行上述任一项方法实施例中的步骤。可选地，在本实施例中，上述非易失性存储介质可以被设置为存储用于执行以下步骤的计算机程序：S1，确定第一基准时间和第一系统时间之间的第一观测误差，其中，第一基准时间和第一系统时间为第一时刻分别对基准时间系统和待校准系统的时间值进行观测得到；S2，确定第二基准时间和第二系统时间的第二观测误差，其中，第二基准时间和第二系统时间为第二时刻分别对基准时间系统和待校准系统的时间进行观测得到；S3，基于第一系统时间、第二系统时间、第一观测误差、第二观测误差，确定待校准系统的单位时间偏差；S4，基于单位时间偏差对待校准系统的时间进行校准。可选地，在本实施例中，上述非瞬时计算机可读存储介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。根据本公开的实施例，本公开还提供了一种计算机程序产品。用于实施本公开的方法实施例的程序代码可以采用一个或多个编程语言的任何组合来编写。这些程序代码可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器或控制器，使得程序代码当由处理器或控制器执行时使流程图和/或框图中所规定的功能/操作被实施。程序代码可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本公开的上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述的部分，可以参见其他实施例的相关描述。在本公开所提供的几个实施例中，应该理解到，所揭露的技术内容，可通过其它的方式实现。其中，以上所描述的装置实施例仅仅是示意性的，例如所述单元的划分，可以为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，单元或模块的间接耦合或通信连接，可以是电性或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本公开各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。所述集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本公开的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本公开各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、只读存储器、随机存取存储器、移动硬盘、磁碟或者光盘等各种可以存储程序代码的介质。以上所述仅是本公开的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本公开原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本公开的保护范围。
