标题title
一种操作系统部署方法、装置、计算机设备及存储介质
摘要abst
本申请属于服务器技术领域，公开了一种操作系统部署方法、装置、计算机设备及存储介质，该方法包括：步骤S1，接收参数信息并解析，得到解析结果；解析结果包括待部署服务器信息，根据待部署服务器信息和待部署服务器连接；步骤S2，控制待部署服务器进入引导装载界面中的引导装载外层界面；步骤S3，获取待部署服务器的配置地址，检测配置地址是否可连接至文件服务器；若否，则在待部署服务器中设置与文件服务器连接的临时静态地址；步骤S4，令待部署服务器生成引导项，控制待部署服务器根据引导项和文件服务器中的脚本文件完成操作系统的部署。本申请能够降低部署操作系统的成本和出错率，同时提高操作系统部署方法的适用性。
权利要求书clms
1.一种操作系统部署方法，其特征在于，所述方法包括：步骤S1，接收参数信息并解析，得到解析结果；所述解析结果包括待部署服务器信息，根据所述待部署服务器信息和待部署服务器连接；步骤S2，控制所述待部署服务器进入引导装载界面中的引导装载外层界面；步骤S3，获取所述待部署服务器的配置地址，检测所述配置地址是否可连接至文件服务器；若否，则在所述待部署服务器中设置与所述文件服务器连接的临时静态地址；步骤S4，令所述待部署服务器生成引导项，控制所述待部署服务器根据所述引导项和所述文件服务器中的脚本文件完成操作系统的部署。2.根据权利要求1所述的方法，其特征在于，所述方法还包括：在执行步骤S1-S4中，同步执行回显检测操作，得到操作锚定结果；若所述操作锚定结果显示操作错误，则退出操作系统部署程序。3.根据权利要求2所述的方法，其特征在于，所述执行回显检测操作，得到操作锚定结果，包括：通过平台管理工具获取所述待部署服务器的界面信息，根据标点符号或空行对所述界面信息进行切割，得到短语句数组；计算所述短语句数组与字符流特征库中各特征项的匹配度，将最高的所述匹配度对应的所述特征项作为所述操作锚定结果。4.根据权利要求3所述的方法，其特征在于，所述计算所述短语句数组与字符流特征库中各特征项的匹配度，将最高的所述匹配度对应的所述特征项作为所述操作锚定结果，包括：采用TF-IDF算法或最近邻居法计算所述短语句数组与字符流特征库中各特征项的匹配度；判断最高的所述匹配度是否大于等于预设下限值，若是，则将最高的所述匹配度对应的所述特征项作为所述操作锚定结果，否则退出所述操作系统部署程序。5.根据权利要求1所述的方法，其特征在于，所述解析结果中还包括网段地址配置语句；所述在所述待部署服务器中设置与所述文件服务器连接的临时静态地址，包括：根据所述解析结果中的所述网段地址配置语句生成临时地址信息并发送至所述待部署服务器，以使其根据所述临时地址信息设置所述临时静态地址。6.根据权利要求5所述的方法，其特征在于，所述解析结果中还包括预设地址配置信息；所述在所述待部署服务器中设置与所述文件服务器连接的临时静态地址，包括：根据所述解析结果中的所述预设地址配置信息生成临时地址信息并发送至所述待部署服务器，以使其根据所述临时地址信息设置所述临时静态地址。7.根据权利要求6所述的方法，其特征在于，所述在所述待部署服务器中设置与所述文件服务器连接的临时静态地址，包括：获取所述待部署服务器中的网卡端口列表，并根据所述网卡端口列表得到临时地址信息；将所述临时地址信息发送至所述待部署服务器，以使其根据所述临时地址信息设置所述临时静态地址。8.根据权利要求7所述的方法，其特征在于，所述获取所述待部署服务器中的网卡端口列表，并根据所述网卡端口列表得到临时地址信息，包括：步骤S31，获取所述待部署服务器中的网卡端口列表；步骤S32，将所述网卡端口列表中的所述网卡端口设置为临时地址；步骤S33，检测所述临时地址与所述文件服务器是否连通，若是，则将所述临时地址对应的所述网卡端口作为所述临时地址信息，若否，返回步骤S32。9.根据权利要求1所述的方法，其特征在于，所述令所述待部署服务器生成引导项，包括：控制所述待部署服务器退出所述引导装载外层界面并进入自定义引导项编辑界面；在所述自定义引导项编辑界面的参数输入处输入所述解析结果，以生成所述引导项。10.根据权利要求1所述的方法，其特征在于，所述控制所述待部署服务器根据所述引导项和所述文件服务器中的脚本文件完成操作系统的部署，包括：控制所述待部署服务器退出所述自定义引导项编辑界面并进入所述引导装载界面；发送回车键使所述待部署服务器通过所述配置地址或所述临时静态地址获取所述文件服务器中的所述脚本文件，并根据所述引导项和所述脚本文件完成操作系统的部署。11.一种操作系统部署装置，其特征在于，所述装置包括：解析模块，用于接收参数信息并解析，得到解析结果；所述解析结果包括待部署服务器信息，还用于根据所述待部署服务器信息和待部署服务器连接；界面切换模块，用于控制所述待部署服务器进入引导装载界面中的引导装载外层界面；地址检测模块，用于获取所述待部署服务器的配置地址，检测所述配置地址是否可连接至文件服务器；若否，则在所述待部署服务器中设置与所述文件服务器连接的临时静态地址；自动部署模块，用于令所述待部署服务器生成引导项，控制所述待部署服务器根据所述引导项和所述文件服务器中的脚本文件完成操作系统的部署。12.一种计算机设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1至10中任一项所述方法的步骤。13.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至10中任一项所述方法的步骤。
说明书desc
技术领域本申请涉及服务器技术领域，尤其涉及一种操作系统部署方法、装置、计算机设备及存储介质。背景技术在大批量对服务器的操作系统进行部署时，使用手动部署工作繁琐，且非常容易出错。手工部署单台服务器需要近30分钟，大规模部署就需要投入大量人力和时间。而现有的PXE自动化部署方案依赖于DHCP服务器，在复杂网络环境中需要对DHCP服务器进行繁琐的设计和配置，增加了操作系统部署成本和部署过程中出错的概率。同时出于网络安全和隔离等方面的考虑，在DHCP服务器不可用或不受控等场合，PXE服务器无法搭建，从而无法通过PXE方式进行自动部署。因此，现有技术中部署大量服务器的PXE方式存在部署成本高、出错率高、适用性差的问题。发明内容本申请提供了一种操作系统部署方法、装置、计算机设备及存储介质，能够降低部署操作系统的成本，降低部署过程中的出错率，同时提高操作系统部署方法的适用性。第一方面，本申请实施例提供了一种操作系统部署方法，该方法包括：步骤S1，接收参数信息并解析，得到解析结果；解析结果包括待部署服务器信息，根据待部署服务器信息和待部署服务器连接；步骤S2，控制待部署服务器进入引导装载界面中的引导装载外层界面；步骤S3，获取待部署服务器的配置地址，检测配置地址是否可连接至文件服务器；若否，则在待部署服务器中设置与文件服务器连接的临时静态地址；步骤S4，令待部署服务器生成引导项，控制待部署服务器根据引导项和文件服务器中的脚本文件完成操作系统的部署。进一步的，该方法还包括：在执行步骤S1-S4中，同步执行回显检测操作，得到操作锚定结果；若所述操作锚定结果显示操作错误，则退出操作系统部署程序。上述实施例保证了部署过程每一个步骤的正确执行，避免了待部署服务器未执行或未接收到某一个指令或特定字符，导致后续的部署步骤均无效的情况，降低了部署过程的出错率。进一步的，上述执行回显检测操作，得到操作锚定结果，包括：通过平台管理工具获取待部署服务器的界面信息，根据标点符号或空行对界面信息进行切割，得到短语句数组；计算短语句数组与字符流特征库中各特征项的匹配度，将最高的匹配度对应的特征项作为操作锚定结果。上述实施例将待部署服务器的界面信息切割为短语句数组，解决了界面信息为不规则文本，可读性较差的问题；对短语句数组和多个特征项进行一对多的匹配度计算，将最高匹配度对应的特征项为操作锚定结果，实现了根据操作锚定结果得知待部署服务器是否操作错误，若出错直接退出，从而降低了部署过程的出错率。进一步的，上述计算短语句数组与字符流特征库中各特征项的匹配度，将最高的匹配度对应的特征项作为操作锚定结果，包括：采用TF-IDF算法或最近邻居法计算短语句数组与字符流特征库中各特征项的匹配度；判断最高的匹配度是否大于等于预设下限值，若是，则将最高的匹配度对应的特征项作为操作锚定结果，否则退出操作系统部署程序。上述实施例通过设置预设下限值，避免了待部署服务器未成功执行指令，但操作锚定结果碰巧对上了命令信息的要求，从而导致后续流程出错的情况，只有最高匹配度大于等于预设下限值时，才能判定对应的特征项为操作锚定结果，保证了操作锚定结果的准确性，间接降低了操作系统部署流程的出错率。进一步的，解析结果中还包括网段地址配置语句；上述在待部署服务器中设置与文件服务器连接的临时静态地址，包括：根据解析结果中的网段地址配置语句生成临时地址信息并发送至待部署服务器，以使其根据临时地址信息设置临时静态地址。上述实施例为配置地址无法连接到文件服务器的待部署服务器提供了一种设置临时静态地址的方法，使得待部署服务器能够实现在不依赖PXE和DHCP、不受网络环境的限制的情况下获取文件服务器中的脚本文件，大大提高了操作系统部署方法的适用性。进一步的，解析结果中还包括预设地址配置信息；上述在待部署服务器中设置与文件服务器连接的临时静态地址，包括：根据解析结果中的预设地址配置信息生成临时地址信息并发送至待部署服务器，以使其根据临时地址信息设置临时静态地址。上述实施例为配置地址无法连接到文件服务器的待部署服务器提供了一种设置临时静态地址的方法，使得待部署服务器能够实现在不依赖PXE和DHCP、不受网络环境的限制的情况下获取文件服务器中的脚本文件，大大提高了操作系统部署方法的适用性。进一步的，上述在待部署服务器中设置与文件服务器连接的临时静态地址，包括：获取待部署服务器中的网卡端口列表，并根据网卡端口列表得到临时地址信息；将临时地址信息发送至待部署服务器，以使其根据临时地址信息设置临时静态地址。上述实施例为配置地址无法连接到文件服务器的待部署服务器提供了一种设置临时静态地址的方法，使得待部署服务器能够实现在不依赖PXE和DHCP、不受网络环境的限制的情况下获取文件服务器中的脚本文件，大大提高了操作系统部署方法的适用性。进一步的，上述获取待部署服务器中的网卡端口列表，并根据网卡端口列表得到临时地址信息，包括：步骤S31，获取待部署服务器中的网卡端口列表；步骤S32，将网卡端口列表中的网卡端口设置为临时地址；步骤S33，检测临时地址与文件服务器是否连通，若是，则将临时地址对应的网卡端口作为临时地址信息，若否，返回步骤S32。上述实施例通过对网卡端口列表中根据网卡端口设置的临时地址进行逐一检测，在检测到不与文件服务器连通时，再进行下一个临时地址的生成，避免了同时对多个网卡端口设置的多个临时地址进行检测造成的冲突，轮询检测的方式使得对网卡端口的检测快速流畅，提高了设置临时静态地址的效率，进一步提高了操作系统部署方法的效率。进一步的，上述令待部署服务器生成引导项，包括：控制待部署服务器退出引导装载外层界面并进入自定义引导项编辑界面；在自定义引导项编辑界面的参数输入处输入解析结果，以生成引导项。上述实施例实现了引导项的快速生成，仅需切换界面后，定位参数输入处输入解析结果后保存，即可生成引导项，从而进入最终的操作系统部署步骤，简单快捷，有效提升了操作系统部署方法的效率。进一步的，上述控制待部署服务器根据引导项和文件服务器中的脚本文件完成操作系统的部署，包括：控制待部署服务器退出自定义引导项编辑界面并进入引导装载界面；发送回车键使待部署服务器通过配置地址或临时静态地址获取文件服务器中的脚本文件，并根据引导项和脚本文件完成操作系统的部署。上述实施例中，重新进入petitboot界面后，仅需按下回车键便可完成操作系统的自动部署，操作简单方便，简化了操作系统的自动部署流程，提高了部署效率。第二方面，本申请实施例提供了一种操作系统部署装置，该装置包括：解析模块，用于接收参数信息并解析，得到解析结果；解析结果包括待部署服务器信息，还用于根据待部署服务器信息和待部署服务器连接；界面切换模块，用于控制待部署服务器进入引导装载界面中的引导装载外层界面；地址检测模块，用于获取待部署服务器的配置地址，检测配置地址是否可连接至文件服务器；若否，则在待部署服务器中设置与文件服务器连接的临时静态地址；自动部署模块，用于令待部署服务器生成引导项，控制待部署服务器根据引导项和文件服务器中的脚本文件完成操作系统的部署。上述实施例中提供的一种操作系统部署装置，通过控制待部署服务器进入特定界面，使其完成引导项的生成和操作系统的自动部署；本申请给出的操作系统部署方法无需对待部署服务器进行繁琐的设计和配置，大大提高了部署效率，降低了因步骤繁琐带来的高出错率；且本申请在部署过程中添加了对待部署服务器配置地址的检测步骤，若配置地址不可连接文件服务器，则设置临时静态地址，以上操作保证了待部署服务器对文件服务器中脚本文件的获取，进一步降低了部署过程的出错率；最后，本申请无需依赖PXE自动部署方法和DHCP服务器，不受网络环境的限制，从而提高了本申请的适用性。第三方面，本申请实施例提供了一种计算机设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，处理器执行计算机程序时执行如上述任一实施例的操作系统部署方法的步骤。第四方面，本申请实施例提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现如上述任一实施例的操作系统部署方法的步骤。综上，与现有技术相比，本申请实施例提供的技术方案带来的有益效果至少包括：本申请实施例提供的一种操作系统部署方法，通过控制待部署服务器进入特定界面，使其完成引导项的生成和操作系统的自动部署；首先，本申请给出的操作系统部署方法无需对待部署服务器进行繁琐的设计和配置，大大提高了部署效率，降低了因步骤繁琐带来的高出错率；其次，本申请在部署过程中添加了对待部署服务器配置地址的检测步骤，若配置地址不可连接文件服务器，则设置临时静态地址，以上操作保证了待部署服务器对文件服务器中脚本文件的获取，进一步降低了部署过程的出错率；最后，本申请无需依赖PXE自动部署方法和DHCP服务器，不受网络环境的限制，从而提高了本申请的适用性。附图说明图1为本申请一个示例性实施例提供的一种操作系统部署方法的流程图。图2为本申请又一个示例性实施例提供的一种操作系统部署方法的流程图。图3为本申请一个示例性实施例提供的网卡端口检测步骤的流程图。图4为本申请一个示例性实施例提供的一种自动部署设备的结构示意图。图5为本申请一个示例性实施例提供的一种操作系统部署装置的结构图。图6为本申请另一个示例性实施例提供的一种操作系统部署方法的流程图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。请参见图1，本申请实施例提供了一种操作系统部署方法，该方法应用于容器，以执行主体是容器为例进行说明，该方法具体包括以下步骤：步骤S1，接收参数信息并解析，得到解析结果；解析结果包括待部署服务器信息，根据待部署服务器信息和待部署服务器连接。其中，参数信息是由控制端根据服务器数据和脚本文件生成并发送给容器的。具体地，控制端也是一台服务器，控制端接收工作人员输入的，需要进行操作系统部署的服务器数据，控制端与文件服务器网络连接，采用http协议访问文件服务器，文件服务器中存储有部署操作系统所需要的脚本文件；控制端根据服务器数据和脚本文件生成参数信息。其中，文件服务器中的脚本文件又称kickstart文件，kickstart是Linux系统中用于制作自动安装脚本的服务。在具体实施过程中，步骤S1中解析出的待部署服务器信息包括一台待部署服务器的BMC的ip、用户和密码，容器根据这些信息和待部署服务器的BMC连接。步骤S2，控制待部署服务器进入引导装载界面中的引导装载外层界面。其中，引导装载界面为petitboot界面，引导装载外层界面为petitboot shell界面，petitboot是POWER系统服务器中的引导装载程序。具体地，先由容器发送ipmitool指令，具体为chassis bootparam set bootflagforce_bios和chassis power reset，ipmitool指令用来强制待部署服务器进入petitboot界面；之后，容器再发送x、或�03等特定字符，用来触发petitboot快捷键，进入petitboot shell界面。步骤S3，获取待部署服务器的配置地址，检测配置地址是否可连接至文件服务器；若否，则在待部署服务器中设置与文件服务器连接的临时静态地址。具体地，在进入petitboot shell界面后，发送命令ip addr到待部署服务器中，获取其配置地址，检测待部署服务器能够根据该配置地址连接文件服务器、获取其中的脚本文件；若不能，则设置临时静态地址，以确保待部署服务器能够连接到文件服务器。步骤S4，令待部署服务器生成引导项，控制待部署服务器根据引导项和文件服务器中的脚本文件完成操作系统的部署。上述实施例中提供的一种操作系统部署方法，以和待部署服务器相连接的容器为执行主体，通过控制待部署服务器进入特定界面，使其完成引导项的生成和操作系统的自动部署；本申请给出的操作系统部署方法无需对待部署服务器进行繁琐的设计和配置，大大提高了部署效率，降低了因步骤繁琐带来的高出错率；且本申请在部署过程中添加了对待部署服务器配置地址的检测步骤，若配置地址不可连接文件服务器，则设置临时静态地址，以上操作保证了待部署服务器对文件服务器中脚本文件的获取，进一步降低了部署过程的出错率；最后，本申请无需依赖PXE自动部署方法和DHCP服务器，不受网络环境的限制，从而提高了本申请的适用性。请参见图2，在一些实施例中，该方法还包括：在执行步骤S1-S4中，同步执行回显检测操作，得到操作锚定结果。若所述操作锚定结果显示操作错误，则退出操作系统部署程序。其中，回显检测操作是对待部署服务器的显示进行检测，操作锚定结果显示的是待部署服务器的当前操作是否正确。具体地，例如在控制待部署服务器进入petitboot shell界面后，操作锚定结果显示待部署服务器未进入petitboot shell界面，则直接退出操作系统部署程序；否则进行下一个步骤的操作。回显检测操作可以在每一个小步骤后实施，也可以在其中几个比较重要的步骤后实施，如设置临时静态地址后检测是否成功设置；也可以在整个操作系统部署流程中去掉回显检测操作，不顾待部署服务器的操作是否出错，容器直接下发每一个控制指令。实际上，在执行完步骤S4之后也可以执行回显检测操作，在确定操作锚定结果显示服务器已安装成功并重启进入到操作系统登录界面时，才会正式退出操作系统部署程序。上述实施例保证了部署过程每一个步骤的正确执行，避免了待部署服务器未执行或未接收到某一个指令或特定字符，导致后续的部署步骤均无效的情况，降低了部署过程的出错率。在一些实施例中，上述执行回显检测操作，得到操作锚定结果，包括：通过平台管理工具获取待部署服务器的界面信息，根据标点符号或空行对界面信息进行切割，得到短语句数组；计算短语句数组与字符流特征库中各特征项的匹配度，将最高的匹配度对应的特征项作为操作锚定结果。其中，平台管理工具为容器的ipmitool工具，这是一种可用在Linux系统下的命令行方式的IPMI平台管理工具。通过它可以实现获取传感器的信息、显示系统日志内容、网络远程开关机等功能。在本申请中容器使用该工具进行各种指令的发送，同时也可以在利用该工具在发送完指令后，利用该工具获取待部署服务器的界面信息。但因为待部署服务器的界面信息为不规则文本，包括不可见的ASCII控制符等，因此要对其进行切割，切割为容器可以识别的短语句。计算短语句数组与字符流特征库中各特征项的匹配度，将最高的匹配度对应的特征项作为操作锚定结果。字符流特征库的部分内容请见下表：序号特征项1ipmitool通讯成功语句2ipmitool通讯失败语句3petitboot界面首页字符4petitboot shell界面特征字符，引导符5petitboot shell中ip addr命令输出6petitboot shell中ip addr add设置失败输出7petitboot自定义引导项编辑界面特征字符8操作系统启动成功后的引导符通过对字符流特征库的维护和增强，回显检测操作可以支持更多型号的待部署服务器的界面信息检测，同时能够提升匹配度计算的精准性。上述实施例将待部署服务器的界面信息切割为短语句数组，解决了界面信息为不规则文本，可读性较差的问题；对短语句数组和多个特征项进行一对多的匹配度计算，将最高匹配度对应的特征项为操作锚定结果，实现了根据操作锚定结果得知待部署服务器是否操作错误，若出错直接退出，从而降低了部署过程的出错率。在一些实施例中，上述计算短语句数组与字符流特征库中各特征项的匹配度，将最高的匹配度对应的特征项作为操作锚定结果，包括：采用TF-IDF算法或最近邻居法计算短语句数组与字符流特征库中各特征项的匹配度。判断最高的匹配度是否大于等于预设下限值，若是，则将最高的匹配度对应的特征项作为操作锚定结果，否则退出操作系统部署程序。其中，TF-IDF算法是一种用于信息检索与文本挖掘的常用加权技术，也是一种统计方法，用以评估一字词对于一个文件集或一个语料库中的其中一份文件的重要程度。字词的重要性随着它在文件中出现的次数成正比增加，但同时会随着它在语料库中出现的频率成反比下降。最近邻居法，又称KNN算法或K-近邻算法，是一种用于分类和回归的非参数统计方法。具体地，匹配度可以采用百分制，预设下限值可以设为30，只有最高的匹配度大于等于30时，对应的特征项才会和命令信息的作用进行对比，否则视为无效，退出程序。上述实施例通过设置预设下限值，避免了待部署服务器未成功执行指令，但操作锚定结果碰巧对上了命令信息的要求，从而导致后续流程出错的情况，只有最高匹配度大于等于预设下限值时，才能判定对应的特征项为操作锚定结果，保证了操作锚定结果的准确性，间接降低了操作系统部署流程的出错率。在一些实施例中，解析结果中还包括网段地址配置语句。上述在待部署服务器中设置与文件服务器连接的临时静态地址，包括：根据解析结果中的网段地址配置语句生成临时地址信息并发送至待部署服务器，以使其根据临时地址信息设置临时静态地址。其中，解析结果还包括可以访问文件服务器中kickstart文件的链接信息，网段地址配置语句为kickstart文件中的network语句，该语句包括参数ip、netmask、device和gateway，其中gateway可以不存在，也可以不存在。具体地，容器发送指令ip addr add到待部署服务器，指令ip addr add中包括临时地址信息，待部署服务器根据指令ip addr add设置临时静态地址。上述实施例为配置地址无法连接到文件服务器的待部署服务器提供了一种设置临时静态地址的方法，使得待部署服务器能够实现在不依赖PXE和DHCP、不受网络环境的限制的情况下获取文件服务器中的脚本文件，大大提高了操作系统部署方法的适用性。在一些实施例中，解析结果中还包括预设地址配置信息。上述在待部署服务器中设置与文件服务器连接的临时静态地址，包括：根据解析结果中的预设地址配置信息生成临时地址信息并发送至待部署服务器，以使其根据临时地址信息设置临时静态地址。其中，预设地址配置信息是工作人员提前在参数信息的生成过程中添加的petitboot ip、petitboot netmask、petitboot gateway、petitboot network device等参数。具体地，若kickstart文件中没有network语句，或者network语句是使用DHCP指定操作系统获取的动态ip，又或者network语句中定义的ip和待部署服务器的BMC网络隔离，便可以根据解析结果中提前输入的预设地址配置信息来设置待部署服务器的静态地址。在具体实施过程中，容器发送指令ip addr add到待部署服务器，指令ip addradd中包括临时地址信息，待部署服务器根据指令ip addr add设置临时静态地址。上述实施例为配置地址无法连接到文件服务器的待部署服务器提供了一种设置临时静态地址的方法，使得待部署服务器能够实现在不依赖PXE和DHCP、不受网络环境的限制的情况下获取文件服务器中的脚本文件，大大提高了操作系统部署方法的适用性。在一些实施例中，上述在待部署服务器中设置与文件服务器连接的临时静态地址，包括：获取待部署服务器中的网卡端口列表，并根据网卡端口列表得到临时地址信息。将临时地址信息发送至待部署服务器，以使其根据临时地址信息设置临时静态地址。具体地，若kickstart文件无法提供network语句，且参数信息的解析结果中也并未存在提前设定好的预设地址配置信息，则可选用待部署服务器中的网卡端口列表生成临时地址信息。上述实施例为配置地址无法连接到文件服务器的待部署服务器提供了一种设置临时静态地址的方法，使得待部署服务器能够实现在不依赖PXE和DHCP、不受网络环境的限制的情况下获取文件服务器中的脚本文件，大大提高了操作系统部署方法的适用性。请参见图3，在一些实施例中，上述获取待部署服务器中的网卡端口列表，并根据网卡端口列表得到临时地址信息，包括：步骤S31，获取待部署服务器中的网卡端口列表。步骤S32，将网卡端口列表中的网卡端口设置为临时地址。步骤S33，检测临时地址与文件服务器是否连通，若是，则将临时地址对应的网卡端口作为临时地址信息，若否，返回步骤S32。具体地，容器采用ping命令来检测临时地址与文件服务器是否连通，ping命令是用于测试网络连接量的命令。上述实施例通过对网卡端口列表中根据网卡端口设置的临时地址进行逐一检测，在检测到不与文件服务器连通时，再进行下一个临时地址的生成，避免了同时对多个网卡端口设置的多个临时地址进行检测造成的冲突，轮询检测的方式使得对网卡端口的检测快速流畅，提高了设置临时静态地址的效率，进一步提高了操作系统部署方法的效率。在一些实施例中，上述令待部署服务器生成引导项，包括：控制待部署服务器退出引导装载外层界面并进入自定义引导项编辑界面。在自定义引导项编辑界面的参数输入处输入解析结果，以生成引导项。具体地，容器在判断配置地址可用或设置完临时静态地址后，发送�03、exit等字符到待部署服务器，使其退出petitboot shell界面，然后发送快捷键指令n使待部署服务器进入自定义引导项编辑界面；然后发送字符定位到vmlinuz、initrd和kickstart参数输入处，将步骤S1中解析得到的解析结果输入到该参数输入处，然后再次发送字符定位到保存按钮，至此，生成了部署操作系统所需的引导项。上述实施例实现了引导项的快速生成，仅需切换界面后，定位参数输入处输入解析结果后保存，即可生成引导项，从而进入最终的操作系统部署步骤，简单快捷，有效提升了操作系统部署方法的效率。在一些实施例中，上述控制待部署服务器根据引导项和文件服务器中的脚本文件完成操作系统的部署，具体还可以包括：控制待部署服务器退出自定义引导项编辑界面并进入引导装载界面。发送回车键使待部署服务器通过配置地址或临时静态地址获取文件服务器中的脚本文件，并根据引导项和脚本文件完成操作系统的部署。上述实施例中，重新进入petitboot界面后，仅需按下回车键便可完成操作系统的自动部署，操作简单方便，简化了操作系统的自动部署流程，提高了部署效率。请参见图4，图4中所示为整个自动部署设备，包括控制端、多个容器、待部署服务器集群和一个文件服务器；本申请的方法可以同时分别应用于多个容器当中：控制端根据多条服务器数据和脚本文件生成业务逻辑启动参数数组，业务逻辑启动参数数组中包括多条参数信息。假设待部署服务器集群中有100个待部署服务器，则业务逻辑启动参数数组中包括脚本文件和100台服务器的数据，其中的一条参数信息中包括一台服务器的信息和脚本文件的链接，即业务逻辑启动参数数组中一共100条参数信息；控制端根据参数信息的数量拉起100个容器，将100条参数信息分别发送给100个容器，每条参数信息内的服务器数据不同、脚本文件链接的信息相同。这100个容器分别与其对应的待部署服务器IPMI通讯连接，100个容器同时执行本申请提供的一种操作系统部署方法，从而同时完成100个服务器的部署。图4中的容器的结构请参见图5，本申请另一实施例提供了一种操作系统部署装置，该装置应用于容器，该装置具体可以包括以下模块：解析模块101，用于接收参数信息并解析，得到解析结果；解析结果包括待部署服务器信息，还用于根据待部署服务器信息和待部署服务器连接。界面切换模块102，用于控制待部署服务器进入引导装载界面中的引导装载外层界面。地址检测模块103，用于获取待部署服务器的配置地址，检测配置地址是否可连接至文件服务器；若否，则在待部署服务器中设置与文件服务器连接的临时静态地址。自动部署模块104，用于令待部署服务器生成引导项，控制待部署服务器根据引导项和文件服务器中的脚本文件完成操作系统的部署。上述实施例中提供的一种操作系统部署装置，通过控制待部署服务器进入特定界面，使其完成引导项的生成和操作系统的自动部署；本申请给出的操作系统部署方法无需对待部署服务器进行繁琐的设计和配置，大大提高了部署效率，降低了因步骤繁琐带来的高出错率；且本申请在部署过程中添加了对待部署服务器配置地址的检测步骤，若配置地址不可连接文件服务器，则设置临时静态地址，以上操作保证了待部署服务器对文件服务器中脚本文件的获取，进一步降低了部署过程的出错率；最后，本申请无需依赖PXE自动部署方法和DHCP服务器，不受网络环境的限制，从而提高了本申请的适用性。本实施例对一种操作系统部署装置的具体限定，可以参见上文中一种操作系统部署方法的实施例，于此不再赘述。上述一种操作系统部署装置中的各个模块可全部或部分通过软件、硬件及其组合来实现。上述各模块可以硬件形式内嵌于或独立于计算机设备中的处理器中，也可以以软件形式存储于计算机设备中的存储器中，以便处理器调用执行以上各个模块对应的操作。以安装100台待部署服务器为例说明本申请的操作系统部署方法的具体实现过程：1.环境准备准备一台服务器作为控制端，确保可以连接到待部署服务器BMC，用来安装控制端程序，以及作为运行包含操作系统部署程序的容器运行时环境。控制端服务器的性能越好可以支持同时部署更多的服务器。2.准备文件准备好支持http协议的文件服务器，且文件服务器处于待部署服务器可以访问的网络中。准备好操作系统安装镜像及kickstart文件，将其存储于文件服务器中，并且确保文件可以通过http协议访问。文件列表如下，以安装CentOS 8.5为例：http:///centos85/ppc/ppc64/vmlinuzhttp:///centos85/。3.启动控制端控制端启动后，通过读取传入的参数或者配置文件生成业务逻辑启动参数数组。业务逻辑启动参数数组包含100个数组元素，每一个元素包含对应服务器的BMC信息，以及第2步中准备好的对应文件链接信息。控制端程序依据生成的业务逻辑启动参数数组启动100个容器。4.启动操作系统部署程序操作系统部署程序及其运行环境和ipmitool都包含在定制好的容器中。控制端根据接收的参数和配置文件生成业务逻辑启动参数数组，根据业务逻辑启动参数数组的元素数量连接同样数量的容器，将数组中的各参数信息分别发送到对应的容器；容器启动后，根据接收到的参数信息进行解析，得到解析结果，根据解析结果连接对应的待部署服务器、通过http协议获取文件服务器中的kickstart文件；5.开始部署成功连接到对应部署服务器BMC后，强制服务器进入petitiboot界面，导航至自定义引导项编辑界面的参数输入处自动输入第2步中文件列表为参数，然后启动生成的引导项，启动成功后服务器会根据kickstart脚本安装操作系统。6.完成部署操作系统安装完成后，引导至用户登陆界面，操作系统部署程序。至此整个自动化部署完成。以下介绍业务逻辑程序主要实现流程，具体参见图6。锚定过程如下：.获取ipmitool回显，按照标点符号或者空行，切割成短语句数组列表。.遍历短语句数组，使用TF-IDF和KNN算法逐次计算每条特征项匹配度，获得一个结果列表，该列表长度为短语句数组长度乘以特征库项数。.从上一步中的结果列表中获取最高匹配度对应的特征项，可以锚定当前所处操作步骤，然后执行实现流程图中的对应操作。当最高匹配度未达到预设的下限,程序退出，需要采集更多特征值后重试。实现流程步骤详解①参数信息的解析参数信息解析后的到的解析结果内容如下：BMC ipBMC用户BMC密码vmlinuz文件http链接initrd文件http链接kickstart文件http链接petitboot ippetitboot netmaskpetitboot gatewaypetitboot network device②连接待部署服务器BMC根据解析结果中待部署服务器的BMC ip、用户和密码，通讯连接待部署服务器，调用预先安装好的ipmitool工具与待部署服务器进行服务器进行通讯。③强制重启进入petitboot界面容器的通讯模块发送ipmitool指令和，强制服务器重启进入petitboot界面。④进入petitboot通讯模块获取待部署服务器petitboot界面，petitboot是字符型图形界面。通过智能分析和锚定结果判定是否进入petitboot界面。确定进入petitboot界面后，发送特定字符比如x、、�03，用来触发petitboot快捷键，进入petitboot shell界面。⑤检测petitboot ip进入petitboot shell界面后，由通讯模块发送命令，智能分析和查询petitboot是否已配置可用的ip地址。⑥获取petitboot临时ip信息如果第⑤步“检测petitboot ip”中未检测到可用ip，需要在下一步中设置临时静态ip，此时需要以下参数：ip、netmask、device、gateway上述参数可以通过以下途径获取：1.通常kickstart文件中会包含network指令，通过ip、netmask、device、gateway设置目标部署服务器的操作系统静态ip。业务逻辑程序中的解析模块可以通过解析kickstart文件获得这些信息，以此来设置petitboot临时静态ip。2.如果kickstart中network使用dhcp指定操作系统获取动态ip，或者没有network语句，或者kickstart文件中定义的操作系统ip同BMC网络隔离，则可以通过预先计划好的待部署服务器临时ip信息，包含ip、netmask、gateway参数，在第①步“参数解析”中传入petitboot ip、petitboot netmask、petitboot gateway、petitboot network device等参数。如果无法事先确定petitboot network device参数，则可以通过读取petitbootshell中的命令ip addr输出获取网卡端口列表。依次使用获取到的网卡端口设置临时静态ip，配合ping命令检测是否连通文件服务器。如果不通，则删除设置的ip，尝试下一个网卡端口，直到找到需要的网卡端口。⑦设置petitboot临时ip在第⑥步中获取到临时ip信息后，发送命令设置临时静态ip，以此确保petitboot可以与文件服务器进行http通讯。⑧生成引导项确保petitboot连通文件服务器后,容器发送�03、exit等字符指令退出petitboot shell，然后发送快捷键指令n进入petitboot自定义引导项编辑界面，通过发送字符定位到vmlinuz、initrd和kickstart参数输入处，自动输入第一步中解析得到的参数，通过发送字符定位保存按钮生成所需引导项。⑨开始部署确定回到petitboot主界面后，通常默认已选中刚才新建成的引导项，发送回车键即可开始安装。其后根据kickstart文件定义自动完成部署，无需人工介入。在发送字符保存引导项后，再次执行步骤4中的操作：发送指令至服务器，使其进入petitboot，根据ipmitool的回显判断其是否进入了petitboot⑩完成部署安装过程中，通讯模块会全程监测ipmitool的回显，当检测到安装成功重启进入到操作系统登陆界面时，操作系统部署程序即可成功退出。本申请的操作系统部署方法可以产生以下有益效果：1.当网络无法或很难搭建PXE服务器时，采用本申请的方法可以完成操作系统部署。2.在大规模部署时，本方案极大地简化操作逻辑，节省人力和时间。以部署100台服务器为例，手动部署需要3000分钟，采用本申请后部署时间节省到30分钟，效率提高99.9％。本申请实施例提供了一种计算机设备，该计算机设备可以包括通过系统总线连接的处理器、存储器、网络接口和数据库。其中，该计算机设备的处理器用于提供计算和控制能力。该计算机设备的存储器包括非易失性存储介质、内存储器。该非易失性存储介质存储有操作系统、计算机程序和数据库。该内存储器为非易失性存储介质中的操作系统和计算机程序的运行提供环境。该计算机设备的网络接口用于与外部的终端通过网络连接通信。处计算机程序被处理器执行时，使得处理器执行如上述任一实施例的操作系统部署方法的步骤。本实施例提供的计算机设备的工作过程、工作细节和技术效果，可以参见上文中关于操作系统部署方法的实施例，于此不再赘述。本申请实施例提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现如上述任一实施例的操作系统部署方法的步骤。其中，所述计算机可读存储介质是指存储数据的载体，可以但不限于包括软盘、光盘、硬盘、闪存、优盘和/或记忆棒等，所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。本实施例提供的计算机可读存储介质的工作过程、工作细节和技术效果，可以参见上文中关于操作系统部署方法的实施例，于此不再赘述。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一非易失性计算机可读取存储介质中，该计算机程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、存储、数据库或其它介质的任何引用，均可包括非易失性和/或易失性存储器。非易失性存储器可包括只读存储器、可编程ROM、电可编程ROM、电可擦除可编程ROM或闪存。易失性存储器可包括随机存取存储器或者外部高速缓冲存储器。作为说明而非局限，RAM以多种形式可得，诸如静态RAM、动态RAM、同步DRAM、双数据率SDRAM、增强型SDRAM、同步链路DRAM、存储器总线直接RAM、直接存储器总线动态RAM、以及存储器总线动态RAM。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请专利的保护范围应以所附权利要求为准。
