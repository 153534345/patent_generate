标题title
一种基于服务器的主备功放配置切换方法及系统
摘要abst
本发明公开了一种基于服务器的主备功放配置切换方法及系统，包括：当接收到由服务器发送的功放配置信号时，根据功放配置信号，调整各第一功放对应连接的选择器模块的开关通断状态，以将各第一功放分别配置切换为主功放或者备用功放；其中，选择器模块是由第一选择器和第二选择器依次连接而成的，第一选择器包括第一开关，第二选择器包括多个具备不同序号的第二开关，且所有第二选择器中所有具备相同序号的第二开关依次串联。本发明在对现场接线未知的情况下，根据服务器发送的功放配置信号，适应性调整具备双开关的选择器模块的通断状态，从而实现对远程的第一功放进行主功放和备用功放的自由配置。
权利要求书clms
1.一种基于服务器的主备功放配置切换方法，其特征在于，包括：当接收到由服务器发送的功放配置信号时，根据所述功放配置信号，调整各第一功放对应连接的选择器模块的开关通断状态，以将各所述第一功放分别配置切换为主功放或者备用功放；通过各所述主功放和其对应的所述选择器模块，将待传输信号传输至各所述主功放对应的外部负载的音频输出端；其中，所述选择器模块是由第一选择器和第二选择器依次连接而成的，所述第一选择器包括第一开关，所述第二选择器包括多个具备不同序号的第二开关，且所有所述第二选择器中所有具备相同序号的所述第二开关依次串联。2.如权利要求1所述的一种基于服务器的主备功放配置切换方法，其特征在于，所述当接收到由服务器发送的功放配置信号时，根据所述功放配置信号，调整各第一功放对应连接的选择器模块的开关通断状态，以将各所述第一功放分别配置切换为主功放或者备用功放，具体为：当接收到由所述服务器发送的所述功放配置信号时，根据所述功放配置信号，判断各所述第一功放是否为主功放；若当前所述第一功放为主功放，则闭合当前所述第一功放对应的所述第一开关，并按照预设的开关通断规则，对当前所述第一功放对应的所有所述第二开关的通断状态进行调整；若当前所述第一功放为备用功放，则断开当前所述第一功放对应的所述第一开关。3.如权利要求1所述的一种基于服务器的主备功放配置切换方法，其特征在于，还包括：当任意一个所述备用功放接收到由故障的主功放发送的故障电平时，以当前所述故障的主功放所对应的处于闭合状态的第二开关，作为第三开关，并闭合当前所述备用功放对应的所述第一开关、以及当前所述备用功放所对应的所述第二选择器中与所述第三开关相连接的第二开关，同时将当前所述备用功放所对应的其余第二开关调整为断开状态。4.如权利要求3所述的一种基于服务器的主备功放配置切换方法，其特征在于，还包括：当任意一个所述备用功放接收到由所述故障的主功放发送的故障电平时，向后台监控系统发送故障信号；其中，所述故障信号包括所述故障的主功放的位置信息和故障时间。5.如权利要求1所述的一种基于服务器的主备功放配置切换方法，其特征在于，还包括：实时获取各所述主功放的运行时长；分别将各所述主功放的运行时长与预设时长阈值进行比较，若当前所述主功放的运行时长大于所述预设时长阈值，则将当前所述主功放对应的所述第一开关调整为断开状态，并将任意一个所述备用功放对应的所述第一开关调整为闭合状态，然后以当前所述主功放所对应的处于闭合状态的第二开关，作为第四开关，并将当前所述备用功放所对应的所述第二选择器中与所述第四开关相连接的第二开关调整为闭合状态，同时将当前所述备用功放所对应的其余第二开关调整为断开状态。6.一种基于服务器的主备功放配置切换系统，其特征在于，包括：配置切换模块，用于当接收到由服务器发送的功放配置信号时，根据所述功放配置信号，调整各第一功放对应连接的选择器模块的开关通断状态，以将各所述第一功放分别配置切换为主功放或者备用功放；其中，所述选择器模块是由第一选择器和第二选择器依次连接而成的，所述第一选择器包括第一开关，所述第二选择器包括多个具备不同序号的第二开关，且所有所述第二选择器中所有具备相同序号的所述第二开关依次串联；信号传输模块，用于通过各所述主功放和其对应的所述选择器模块，将待传输信号传输至各所述主功放对应的外部负载的音频输出端。7.如权利要求6所述的一种基于服务器的主备功放配置切换系统，其特征在于，所述配置切换模块，具体包括：判断单元，用于当接收到由所述服务器发送的所述功放配置信号时，根据所述功放配置信号，判断各所述第一功放是否为主功放；第一配置切换单元，用于若当前所述第一功放为主功放，则闭合当前所述第一功放对应的所述第一开关，并按照预设的开关通断规则，对当前所述第一功放对应的所有所述第二开关的通断状态进行调整；第二配置切换单元，用于若当前所述第一功放为备用功放，则断开当前所述第一功放对应的所述第一开关。8.如权利要求6所述的一种基于服务器的主备功放配置切换系统，其特征在于，还包括：故障处理模块，用于当任意一个所述备用功放接收到由故障的主功放发送的故障电平时，以当前所述故障的主功放所对应的处于闭合状态的第二开关，作为第三开关，并闭合当前所述备用功放对应的所述第一开关、以及当前所述备用功放所对应的所述第二选择器中与所述第三开关相连接的第二开关，同时将当前所述备用功放所对应的其余第二开关调整为断开状态。9.如权利要求8所述的一种基于服务器的主备功放配置切换系统，其特征在于，还包括：所述故障处理模块，还用于当任意一个所述备用功放接收到由所述故障的主功放发送的故障电平时，向后台监控系统发送故障信号；其中，所述故障信号包括所述故障的主功放的位置信息和故障时间。10.如权利要求6所述的一种基于服务器的主备功放配置切换系统，其特征在于，还包括：定时切换模块，用于实时获取各所述主功放的运行时长；分别将各所述主功放的运行时长与预设时长阈值进行比较，若当前所述主功放的运行时长大于所述预设时长阈值，则将当前所述主功放对应的所述第一开关调整为断开状态，并将任意一个所述备用功放对应的所述第一开关调整为闭合状态，然后以当前所述主功放所对应的处于闭合状态的第二开关，作为第四开关，并将当前所述备用功放所对应的所述第二选择器中与所述第四开关相连接的第二开关调整为闭合状态，同时将当前所述备用功放所对应的其余第二开关调整为断开状态。
说明书desc
技术领域本发明涉及主功放和备用功放的配置切换领域，尤其涉及一种基于服务器的主备功放配置切换方法及系统。背景技术功率放大器简称为功放，是音响系统中最基本的设备，能够放大来自信号源的微弱电信号以驱动音频输出端发出声音。在功放运行的过程中，容易产生过温、元件损坏等故障，从而影响音响系统的工作稳定性。目前，轨道交通中功放的备用功放，通常都需要提前将备用功放的音频线接到所有功放上，然后服务器再根据实际接线配置备用功放，从而实现主功放故障时将故障功放自动切换到备用功放的功能。然而，这种配置方法必须在施工现场指定好主备功放顺序，并且接好实体音频线后，配置人员根据现场接线情况在服务器进行对应配置，无法做到在服务器配置人员不知道现场接线情况下，任意配置一个功放为备用功放，实现主备切换功能，额外增设功放的配置管理成本。发明内容本发明提供了一种基于服务器的主备功放配置切换方法及系统，在不了解现场接线布置的情况下，实现对远程主备功放的自由灵活配置。为了解决上述技术问题，本发明实施例提供了一种基于服务器的主备功放配置切换方法，包括：当接收到由服务器发送的功放配置信号时，根据所述功放配置信号，调整各第一功放对应连接的选择器模块的开关通断状态，以将各所述第一功放分别配置切换为主功放或者备用功放；通过各所述主功放和其对应的所述选择器模块，将待传输信号传输至各所述主功放对应的外部负载的音频输出端；其中，所述选择器模块是由第一选择器和第二选择器依次连接而成的，所述第一选择器包括第一开关，所述第二选择器包括多个具备不同序号的第二开关，且所有所述第二选择器中所有具备相同序号的所述第二开关依次串联。实施本发明实施例，在不了解现场接线布置的情况下，利用具备双开关的选择器模块，基于服务器发送的功放配置信号，对远程的主备功放进行灵活配置，而非在施工现场提前指定主备功放顺序，实现对主功放和备用功放的自由配置。作为优选方案，所述当接收到由服务器发送的功放配置信号时，根据所述功放配置信号，调整各第一功放对应连接的选择器模块的开关通断状态，以将各所述第一功放分别配置切换为主功放或者备用功放，具体为：当接收到由所述服务器发送的所述功放配置信号时，根据所述功放配置信号，判断各所述第一功放是否为主功放；若当前所述第一功放为主功放，则闭合当前所述第一功放对应的所述第一开关，并按照预设的开关通断规则，对当前所述第一功放对应的所有所述第二开关的通断状态进行调整；若当前所述第一功放为备用功放，则断开当前所述第一功放对应的所述第一开关。实施本发明实施例的优选方案，根据服务器发送的功放配置信号，确定各第一功放应当配置为主功放还是应当配置为备用功放，进而通过调整各个第一功放的第一开关和第二开关的通断状态，确定待传输信号的传输路线，使得经主功放放大后的信号能够传输至对应的外部负载的音频输出端，以驱动音频输出端发出声音。作为优选方案，所述的一种基于服务器的主备功放配置切换方法，还包括：当任意一个所述备用功放接收到由故障的主功放发送的故障电平时，以当前所述故障的主功放所对应的处于闭合状态的第二开关，作为第三开关，并闭合当前所述备用功放对应的所述第一开关、以及当前所述备用功放所对应的所述第二选择器中与所述第三开关相连接的第二开关，同时将当前所述备用功放所对应的其余第二开关调整为断开状态。实施本发明实施例的优选方案，实时监测主功放是否向备用功放发出故障电平，并在备用功放接收到由故障的主功放发送的故障电平的时候，分别调整故障的主功放和备用功放所对应的第一开关及第二开关的通断状态，以实现主备功放的智能动态切换，从而避免故障功放对系统运行造成负面影响。作为优选方案，所述的一种基于服务器的主备功放配置切换方法，还包括：当任意一个所述备用功放接收到由所述故障的主功放发送的故障电平时，向后台监控系统发送故障信号；其中，所述故障信号包括所述故障的主功放的位置信息和故障时间。实施本发明实施例的优选方案，在故障的主功放向备用功放发出故障电平的同时，向后台监控系统发送包括故障的主功放的位置信息和故障时间的故障信号，以提醒后台管理人员及时去现场处理故障的主功放，防止长时间的故障功放影响整体的主备功放配置切换效果。作为优选方案，所述的一种基于服务器的主备功放配置切换方法，还包括：实时获取各所述主功放的运行时长；分别将各所述主功放的运行时长与预设时长阈值进行比较，若当前所述主功放的运行时长大于所述预设时长阈值，则将当前所述主功放对应的所述第一开关调整为断开状态，并将任意一个所述备用功放对应的所述第一开关调整为闭合状态，然后以当前所述主功放所对应的处于闭合状态的第二开关，作为第四开关，并将当前所述备用功放所对应的所述第二选择器中与所述第四开关相连接的第二开关调整为闭合状态，同时将当前所述备用功放所对应的其余第二开关调整为断开状态。实施本发明实施例的优选方案，通过对各个主功放的持续运行时长的实时监测，并在持续运行时长超过预设值时，智能切换主备功放，避免功放的长时间运行破坏功放的原始性能，从而提升各个第一功放的使用寿命。为了解决相同的技术问题，本发明实施例还提供了一种基于服务器的主备功放配置切换系统，包括：配置切换模块，用于当接收到由服务器发送的功放配置信号时，根据所述功放配置信号，调整各第一功放对应连接的选择器模块的开关通断状态，以将各所述第一功放分别配置切换为主功放或者备用功放；其中，所述选择器模块是由第一选择器和第二选择器依次连接而成的，所述第一选择器包括第一开关，所述第二选择器包括多个具备不同序号的第二开关，且所有所述第二选择器中所有具备相同序号的所述第二开关依次串联；信号传输模块，用于通过各所述主功放和其对应的所述选择器模块，将待传输信号传输至各所述主功放对应的外部负载的音频输出端。作为优选方案，所述配置切换模块，具体包括：判断单元，用于当接收到由所述服务器发送的所述功放配置信号时，根据所述功放配置信号，判断各所述第一功放是否为主功放；第一配置切换单元，用于若当前所述第一功放为主功放，则闭合当前所述第一功放对应的所述第一开关，并按照预设的开关通断规则，对当前所述第一功放对应的所有所述第二开关的通断状态进行调整；第二配置切换单元，用于若当前所述第一功放为备用功放，则断开当前所述第一功放对应的所述第一开关。作为优选方案，所述的一种基于服务器的主备功放配置切换系统，还包括：故障处理模块，用于当任意一个所述备用功放接收到由故障的主功放发送的故障电平时，以当前所述故障的主功放所对应的处于闭合状态的第二开关，作为第三开关，并闭合当前所述备用功放对应的所述第一开关、以及当前所述备用功放所对应的所述第二选择器中与所述第三开关相连接的第二开关，同时将当前所述备用功放所对应的其余第二开关调整为断开状态。作为优选方案，所述的一种基于服务器的主备功放配置切换系统，还包括：所述故障处理模块，还用于当任意一个所述备用功放接收到由所述故障的主功放发送的故障电平时，向后台监控系统发送故障信号；其中，所述故障信号包括所述故障的主功放的位置信息和故障时间。作为优选方案，所述的一种基于服务器的主备功放配置切换系统，还包括：定时切换模块，用于实时获取各所述主功放的运行时长；分别将各所述主功放的运行时长与预设时长阈值进行比较，若当前所述主功放的运行时长大于所述预设时长阈值，则将当前所述主功放对应的所述第一开关调整为断开状态，并将任意一个所述备用功放对应的所述第一开关调整为闭合状态，然后以当前所述主功放所对应的处于闭合状态的第二开关，作为第四开关，并将当前所述备用功放所对应的所述第二选择器中与所述第四开关相连接的第二开关调整为闭合状态，同时将当前所述备用功放所对应的其余第二开关调整为断开状态。附图说明图1：为本发明实施例一提供的一种基于服务器的主备功放配置切换方法的流程示意图；图2：为本发明实施例一提供的主备功放配置情况的示意图；图3：为本发明实施例一提供的一种基于服务器的主备功放配置切换系统的结构示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例一：请参照图1，为本发明实施例提供的一种基于服务器的主备功放配置切换方法，该方法包括步骤S1，具体如下：步骤S1，当接收到由服务器发送的功放配置信号时，根据功放配置信号，调整各第一功放对应连接的选择器模块的开关通断状态，以将各第一功放分别配置切换为主功放或者备用功放；其中，选择器模块是由第一选择器和第二选择器依次连接而成的，第一选择器包括第一开关，第二选择器包括多个具备不同序号的第二开关，且所有第二选择器中所有具备相同序号的第二开关依次串联。步骤S2，通过各主功放和其对应的所述选择器模块，将待传输信号传输至各主功放对应的外部负载的音频输出端。需要说明的是，音频输出端包括但不限于喇叭、音柱和扬声器。在本实施例中，请参照图2，系统中总共配置4个第一功放，分别为G1、G2、G3和G4，其中3个作为主功放，1个作为备用功放。并且，第一功放G1对应的第一选择器为A1，第一功放G1对应的第二选择器为S1；第一功放G2对应的第一选择器为A2，第一功放G2对应的第二选择器为S2；第一功放G3对应的第一选择器为A3，第一功放G3对应的第二选择器为S3；第一功放G4对应的第一选择器为A4，第一功放G4对应的第二选择器为S4。另外地，每个第二选择器中均包括序号分别为1、2、3的三个第二开关，且序号相同的第二开关依次串联。作为优选方案，步骤S1包括步骤S11至步骤S13，各步骤具体如下：步骤S11，当接收到由服务器发送的功放配置信号时，根据功放配置信号，判断各第一功放是否为主功放；若当前第一功放为主功放，则执行步骤S12；若当前第一功放为备用功放，则执行步骤S13。步骤S12，闭合当前第一功放对应的第一开关，并按照预设的开关通断规则，对当前第一功放对应的所有第二开关的通断状态进行调整。步骤S13，断开当前第一功放对应的第一开关。作为一种举例，请参照图2，若功放配置信号对应的功放配置情况为，第一功放G1、G2和G3是主功放，第一功放G4是备用功放，则分别闭合A1、A2和A3中的第一开关，并闭合S1中序号为1的第二开关、S2中序号为2的第二开关、以及S3中序号为3的第二开关，同时其他的第二开关保持断开状态。基于上述连接关系，通过第一功放G1的待传输信号，经由闭合的A1中的第一开关和S1中序号为1且闭合的第二开关构成的线路，传输至音频输出接口J1，进而传输至喇叭H1，以驱动喇叭H1发出声音。类似地，通过第一功放G2的待传输信号，经由闭合的A2中的第一开关和S2中序号为2且闭合的第二开关构成的线路，传输至喇叭H2，以驱动喇叭H2发出声音，而通过第一功放G3的待传输信号，经由类似的线路传输至喇叭H3。至于第一功放G4，则作为备用功放，不对待传输信号进行传输。作为优选方案，本发明实施例提供的一种基于服务器的主备功放配置切换方法，还包括故障功放处理流程，该流程包括步骤S3至步骤S4，各步骤具体如下：步骤S3，当任意一个备用功放接收到由故障的主功放发送的故障电平时，以当前故障的主功放所对应的处于闭合状态的第二开关，作为第三开关，并闭合当前备用功放对应的第一开关、以及当前备用功放所对应的第二选择器中与第三开关相连接的第二开关，同时将当前备用功放所对应的其余第二开关调整为断开状态。作为一种举例，当作为主功放的第一功放G1发生故障时，故障的第一功放G1向作为备用功放的第一功放G4发送故障电平，此时闭合A4中的第一开关、以及S4中序号为1的第二开关，并将S4中序号分别为2和3的两个第二开关调整为断开状态，实现将第一功放G4切换为主功放，以替换故障的第一功放G1，完成功放故障时主备功放的配置切换。步骤S4，当任意一个备用功放接收到由故障的主功放发送的故障电平时，向后台监控系统发送故障信号，以提醒工作人员及时去现场更换或者维修故障的第一功放；其中，故障信号包括故障的主功放的位置信息和故障时间。作为优选方案，本发明实施例提供的一种基于服务器的主备功放配置切换方法，还包括功放定时切换流程，该流程包括步骤S51至步骤S53，各步骤具体如下：步骤S51，实时获取各个主功放的运行时长Tn。步骤S52，分别将各个主功放的运行时长Tn与预设时长阈值T进行比较，若当前主功放的运行时长大于预设时长阈值T，则将当前主功放对应的所述第一开关调整为断开状态，并将任意一个备用功放对应的所述第一开关调整为闭合状态。步骤S53，以当前主功放所对应的处于闭合状态的第二开关，作为第四开关，并将当前备用功放所对应的第二选择器中与第四开关相连接的第二开关调整为闭合状态，同时将当前备用功放所对应的其余第二开关调整为断开状态。在本实施例中，当第一功放G1、G2和G3是主功放，第一功放G4是备用功放时，主功放G1的运行时长记为T1，功放G2的运行时长记为T2，功放G3的运行时长记为T3。作为一种举例，若实时获取的主功放G2的运行时长T2大于T，则断开A2中的第一开关，并闭合A4中的第一开关、以及S4中序号为2的第二开关，实现将第一功放G4切换为主功放、将第一功放G2切换为备用功放。请参照图3，为本发明实施例提供的一种基于服务器的主备功放配置切换系统的结构示意图，该系统包括配置切换模块M1、信号传输模块M2、故障处理模块M3和定时切换模块M4，各模块具体如下：配置切换模块M1，用于当接收到由服务器发送的功放配置信号时，根据功放配置信号，调整各第一功放对应连接的选择器模块的开关通断状态，以将各第一功放分别配置切换为主功放或者备用功放；其中，选择器模块是由第一选择器和第二选择器依次连接而成的，第一选择器包括第一开关，第二选择器包括多个具备不同序号的第二开关，且所有第二选择器中所有具备相同序号的第二开关依次串联。信号传输模块M2，用于通过各所述主功放和其对应的所述选择器模块，将待传输信号传输至各所述主功放对应的外部负载的音频输出端。故障处理模块M3，用于当任意一个备用功放接收到由故障的主功放发送的故障电平时，以当前故障的主功放所对应的处于闭合状态的第二开关，作为第三开关，并闭合当前备用功放对应的第一开关、以及当前备用功放所对应的第二选择器中与第三开关相连接的第二开关，同时将当前备用功放所对应的其余第二开关调整为断开状态。定时切换模块M4，用于各个主功放的运行时长；分别将各个主功放的运行时长与预设时长阈值进行比较，若当前主功放的运行时长大于预设时长阈值，则将当前主功放对应的第一开关调整为断开状态，并将任意一个备用功放对应的第一开关调整为闭合状态，然后以当前主功放所对应的处于闭合状态的第二开关，作为第四开关，并将当前备用功放所对应的第二选择器中与第四开关相连接的第二开关调整为闭合状态，同时将当前备用功放所对应的其余第二开关调整为断开状态。作为优选方案，配置切换模块M1，具体包括判断单元11、第一配置切换单元12和第二配置切换单元13，各单元具体如下：判断单元11，用于当接收到由服务器发送的功放配置信号时，根据功放配置信号，判断各第一功放是否为主功放；第一配置切换单元12，用于若当前第一功放为主功放，则闭合当前第一功放对应的第一开关，并按照预设的开关通断规则，对当前第一功放对应的所有第二开关的通断状态进行调整；第二配置切换单元13，用于若当前第一功放为备用功放，则断开当前第一功放对应的第一开关。作为优选方案，本发明实施例提供的一种基于服务器的主备功放配置切换系统所包括的故障处理模块M3，还用于当任意一个备用功放接收到由故障的主功放发送的故障电平时，向后台监控系统发送故障信号；其中，故障信号包括故障的主功放的位置信息和故障时间。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的系统的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。相比于现有技术，本发明实施例具有如下有益效果：本发明提供了一种基于服务器的主备功放配置切换方法及系统，在对现场接线布置未知的情况下，根据由服务器发送的功放配置信号，确定并调整各个第一功放对应的第一选择器和第二选择器的开关通断状态，而非在施工现场提前指定主备功放顺序，实现对远程的第一功放进行主功放和备用功放的自由配置。另外地，通过所有具备相同序号的第二开关的依次串联、以及由第一选择器和第二选择器依次连接而成的选择器模块结构，能够在配置切换主备功放的过程中，直接调整第一选择器和第二选择器的开关通断状态，从而实现主功放和备用功放的快速配置切换。进一步地，当运行中的主功放发生故障时，通过故障电平，控制备用功放配置切换为主功放，以替代故障的主功放，避免故障的主功放对系统运行造成负面影响。同时向后台监控系统发送包括故障的主功放的位置信息和故障时间的故障信号，以提醒后台管理人员及时处理故障的主功放。此外，对各个主功放的运行时长进行实时监测，并将运行时长超过预设时长阈值的主功放与备用功放进行智能切换，避免功放的长时间运行破坏功放性能，从而提升各个功放的使用寿命。以上所述的具体实施例，对本发明的目的、技术方案和有益效果进行了进一步的详细说明，应当理解，以上所述仅为本发明的具体实施例而已，并不用于限定本发明的保护范围。特别指出，对于本领域技术人员来说，凡在本发明的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
