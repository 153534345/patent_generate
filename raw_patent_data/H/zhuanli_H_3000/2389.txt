标题title
图像传输方法、装置、设备和存储介质
摘要abst
本发明实施例提供一种图像传输方法、装置、设备和存储介质，属于计算机技术领域，该方法包括：接收目标客户端发送的远程操作指令；根据远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据；共享内存为第一设备和第二设备之间的共享内存；目标数据用于第二设备获取目标操作完成时目标服务端的屏幕图像。本发明实施例的方法，第一设备根据远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据，从而使得第二设备基于共享内存中的目标数据可以获取远程操作完成时目标服务端的更新后的屏幕图像，实现了目标服务端的更新后的屏幕图像在第一设备和第二设备之间的快速传输，提高了目标服务端的更新区域的传输效率。
权利要求书clms
1.一种图像传输方法，其特征在于，应用于第一设备，包括：接收目标客户端发送的远程操作指令；根据所述远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据；所述共享内存为第一设备和第二设备之间的共享内存；所述目标数据用于所述第二设备获取所述目标操作完成时目标服务端的屏幕图像。2.根据权利要求1所述的图像传输方法，其特征在于，所述目标数据包括以下至少一项：数据访问锁、变化区域数组、原始图像内存数据、目标指示信息、编码请求标志；所述数据访问锁用于对数据加锁；所述变化区域数组用于表示所述远程操作指令被执行后，目标服务端的初始图像中发生变更的区域；所述原始图像内存数据用于存储图像信息；所述目标指示信息用于表示所述目标服务端的初始图像已发生更新；所述编码请求标志用于表示是否请求获取目标数据的操作权限。3.根据权利要求2所述的图像传输方法，其特征在于，所述根据所述远程操作指令对目标服务端进行操作，更新共享内存中的目标数据，包括以下至少一项：在所述编码请求标志设置为第一目标值的情况下，等待预设时间段后将所述编码请求标志清空；所述第一目标值表示第二设备请求获取目标数据的操作权限；对所述操作指令进行解析，在确定所述目标服务端的初始图像发生变更的情况下，更新所述数据访问锁，获取所述目标数据的操作权限；对所述操作指令进行解析，在确定所述目标服务端的初始图像发生变更的情况下，对目标指示信息进行更新；对所述操作指令进行解析，确定目标服务端的初始图像中发生变更的区域，将所述初始图像中发生变更的区域更新至所述变化区域数组，得到更新后的变化区域数组；根据更新后的变化区域数组，对所述原始图像内存数据进行更新。4.根据权利要求3所述的图像传输方法，其特征在于，所述获取所述目标数据的操作权限，包括：获取所述目标数据中的目标指示信息和变化区域数组的操作权限；和/或，获取所述目标数据中的目标指示信息、变化区域数组和原始图像内存数据的操作权限。5.一种图像传输方法，其特征在于，应用于第二设备，包括：获取共享内存中的目标数据；所述共享内存为第一设备和第二设备之间的共享内存；所述目标数据是所述第一设备根据目标客户端发送的远程操作指令对目标服务端进行目标操作后确定的数据；根据所述共享内存中的目标数据，获取目标图像；所述目标图像为所述目标操作完成时目标服务端的屏幕图像。6.根据权利要求5所述的图像传输方法，其特征在于，所述目标数据包括以下至少一项：数据访问锁、变化区域数组、原始图像内存数据、目标指示信息、编码请求标志；所述数据访问锁用于对数据加锁；所述变化区域数组用于表示所述远程操作指令被执行后，目标服务端的初始图像中发生变更的区域；所述原始图像内存数据用于存储图像信息；所述目标指示信息用于表示所述目标服务端的初始图像已发生更新；所述编码请求标志用于表示是否请求获取目标数据的操作权限。7.根据权利要求6所述的图像传输方法，其特征在于，所述根据共享内存中的目标数据，获取目标图像，包括：获取所述目标数据中的变化区域数组；根据所述变化区域数组，更新所述原始图像内存数据；根据更新后的所述原始图像内存数据，获取所述目标图像。8.根据权利要求7所述的图像传输方法，其特征在于，所述获取所述目标数据中的变化区域数组之前，还包括：获取所述目标数据中的目标指示信息；根据所述目标数据中的目标指示信息，获取目标数据集合中的变化区域数组。9.根据权利要求7或8所述的图像传输方法，其特征在于，所述获取所述目标数据中的目标指示信息之后，还包括：根据所述目标数据中的目标指示信息，更新所述数据访问锁，获取所述目标数据的操作权限。10.根据权利要求9所述的图像传输方法，其特征在于，所述获取所述目标数据的操作权限，包括：获取所述目标数据中的目标指示信息和变化区域数组的操作权限；和/或，获取所述目标数据中的目标指示信息、变化区域数组和原始图像内存数据的操作权限。11.根据权利要求9所述的图像传输方法，其特征在于，所述更新所述数据访问锁之前，还包括：将目标数据中的编码请求标志设置为第一目标值；所述第一目标值表示所述第二设备请求获取目标数据的操作权限。12.一种图像传输装置，其特征在于，包括：接收模块，用于接收目标客户端发送的远程操作指令；更新模块，用于根据所述远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据；所述共享内存为第一设备和第二设备之间的共享内存；所述目标数据用于所述第二设备获取所述目标操作完成时目标服务端的屏幕图像。13.一种图像传输装置，其特征在于，包括：第一获取模块，获取共享内存中的目标数据；所述共享内存为第一设备和第二设备之间的共享内存；所述目标数据是所述第一设备根据目标客户端发送的远程操作指令对目标服务端进行目标操作后确定的数据；第二获取模块，根据所述共享内存中的目标数据，获取目标图像；所述目标图像为所述目标操作完成时目标服务端的屏幕图像。14.一种第一设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求1至4任一项所述的图像传输方法。15.一种第二设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求5至11任一项所述的图像传输方法。16.一种非暂态计算机可读存储介质，其上存储有计算机程序，其特征在于，该计算机程序被处理器执行时实现如权利要求1至4任一项所述的图像传输方法或如权利要求5至11任一项所述的图像传输方法。
说明书desc
技术领域本发明涉及计算机技术领域，尤其涉及一种图像传输方法、装置、设备和存储介质。背景技术在云桌面系统中，相比本地操作方式，除用户操作传入外，还增加了屏幕图像抓取和图像编码传送两个步骤，两步骤性能直接影响远程桌面操作性能。相关技术中，为在图像抓取模块和图像编码模块之间传送变化图像数据，需要使用网络通信、管道通信、队列通信等方式，但这些方式都不适合传送大量数据，且通信本身带来较大延迟。发明内容针对现有技术中的问题，本发明实施例提供一种图像传输方法、装置、设备和存储介质。具体地，本发明实施例提供了以下技术方案：第一方面，本发明实施例提供了一种图像传输方法，包括：接收目标客户端发送的远程操作指令；根据所述远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据；所述共享内存为第一设备和第二设备之间的共享内存；所述目标数据用于所述第二设备获取所述目标操作完成时目标服务端的屏幕图像。进一步地，所述目标数据包括以下至少一项：数据访问锁、变化区域数组、原始图像内存数据、目标指示信息、编码请求标志；所述数据访问锁用于对数据加锁；所述变化区域数组用于表示所述远程操作指令被执行后，目标服务端的初始图像中发生变更的区域；所述原始图像内存数据用于存储图像信息；所述目标指示信息用于表示所述目标服务端的初始图像已发生更新；所述编码请求标志用于表示是否请求获取目标数据的操作权限。进一步地，所述根据所述远程操作指令对目标服务端进行操作，更新共享内存中的目标数据，包括以下至少一项：在所述编码请求标志设置为第一目标值的情况下，等待预设时间段后将所述编码请求标志清空；所述第一目标值表示第二设备请求获取目标数据的操作权限；对所述操作指令进行解析，在确定所述目标服务端的初始图像发生变更的情况下，更新所述数据访问锁，获取所述目标数据的操作权限；对所述操作指令进行解析，在确定所述目标服务端的初始图像发生变更的情况下，对目标指示信息进行更新；对所述操作指令进行解析，确定目标服务端的初始图像中发生变更的区域，将所述初始图像中发生变更的区域更新至所述变化区域数组，得到更新后的变化区域数组；根据更新后的变化区域数组，对所述原始图像内存数据进行更新。进一步地，所述获取所述目标数据的操作权限，包括：获取所述目标数据中的目标指示信息和变化区域数组的操作权限；和/或，获取所述目标数据中的目标指示信息、变化区域数组和原始图像内存数据的操作权限。第二方面，本发明实施例提供了一种图像传输方法，包括：获取共享内存中的目标数据；所述共享内存为第一设备和第二设备之间的共享内存；所述目标数据是所述第一设备根据目标客户端发送的远程操作指令对目标服务端进行目标操作后确定的数据；根据所述共享内存中的目标数据，获取目标图像；所述目标图像为所述目标操作完成时目标服务端的屏幕图像。进一步地，所述目标数据包括以下至少一项：数据访问锁、变化区域数组、原始图像内存数据、目标指示信息、编码请求标志；所述数据访问锁用于对数据加锁；所述变化区域数组用于表示所述远程操作指令被执行后，目标服务端的初始图像中发生变更的区域；所述原始图像内存数据用于存储图像信息；所述目标指示信息用于表示所述目标服务端的初始图像已发生更新；所述编码请求标志用于表示是否请求获取目标数据的操作权限。进一步地，所述根据共享内存中的目标数据，获取目标图像，包括：获取所述目标数据中的变化区域数组；根据所述变化区域数组，更新所述原始图像内存数据；根据更新后的所述原始图像内存数据，获取所述目标图像。进一步地，所述获取所述目标数据中的变化区域数组之前，还包括：获取所述目标数据中的目标指示信息；根据所述目标数据中的目标指示信息，获取目标数据集合中的变化区域数组。进一步地，所述获取所述目标数据中的目标指示信息之后，还包括：根据所述目标数据中的目标指示信息，更新所述数据访问锁，获取所述目标数据的操作权限。进一步地，所述获取所述目标数据的操作权限，包括：获取所述目标数据中的目标指示信息和变化区域数组的操作权限；和/或，获取所述目标数据中的目标指示信息、变化区域数组和原始图像内存数据的操作权限。进一步地，所述更新所述数据访问锁之前，还包括：将目标数据中的编码请求标志设置为第一目标值；所述第一目标值表示所述第二设备请求获取目标数据的操作权限。第三方面，本发明实施例还提供了一种图像传输装置，包括：接收模块，用于接收目标客户端发送的远程操作指令；更新模块，用于根据所述远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据；所述共享内存为第一设备和第二设备之间的共享内存；所述目标数据用于所述第二设备获取所述目标操作完成时目标服务端的屏幕图像。第四方面，本发明实施例还提供了一种图像传输装置，包括：第一获取模块，获取共享内存中的目标数据；共享内存为第一设备和第二设备之间的共享内存；目标数据是第一设备根据目标客户端发送的远程操作指令对目标服务端进行目标操作后确定的数据；第二获取模块，根据共享内存中的目标数据，获取目标图像；目标图像为目标操作完成时目标服务端的屏幕图像。第五方面，本发明实施例还提供了一种第一设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述处理器执行所述程序时实现如第一方面所述图像方法。第六方面，本发明实施例还提供了一种第二设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述处理器执行所述程序时实现如第二方面所述图像方法。第七方面，本发明实施例还提供了一种非暂态计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现如第一方面所述图像传输方法或如第二方面所述图像传输方法。第八方面，本发明实施例还提供了一种计算机程序产品，包括计算机程序，所述计算机程序被处理器执行时实现如第一方面所述图像传输方法或如第二方面所述图像传输方法。本发明实施例提供的图像传输方法、装置、设备和存储介质，第一设备通过接收目标客户端发送的远程操作指令，并根据远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据，从而使得第二设备基于共享内存可以快速有效地获取到第一设备更新后的目标数据，进而第二设备根据获取到的目标数据也就可以获取远程操作完成时目标服务端的更新后的屏幕图像，实现了目标服务端的更新后的屏幕图像在第一设备和第二设备之间的快速传输，提高了目标服务端的更新区域的传输效率，并且可以有效满足第一设备和第二设备之间大量图像数据的传输，解决了图像传输延迟问题，降低了系统开销。附图说明为了更清楚地说明本发明或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明实施例提供的图像传输方法的流程示意图之一；图2是本发明实施例提供的图像传输方法的流程示意图之二；图3是本发明实施例提供的图像传输方法的流程示意图之三；图4是本发明实施例提供的图像传输方法的流程示意图之四；图5是本发明实施例提供的图像传输方法的流程示意图之五；图6是本发明实施例提供的图像传输方法的流程示意图之六；图7是本发明实施例提供的图像传输方法的流程示意图之七；图8是本发明实施例提供的图像传输装置的结构示意图之一；图9是本发明实施例提供的图像传输装置的结构示意图之二；图10是本发明实施例提供的第一设备的结构示意图；图11是本发明实施例提供的第二设备的结构示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚，下面将结合本发明中的附图，对本发明中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本发明实施例的方法可以应用于图像传输场景中，实现图像高效快捷地传输。相关技术中，为在图像抓取模块和图像编码模块之间传送变化图像数据，需要使用网络通信、管道通信、队列通信等方式，但这些方式都不适合传送大量数据，且通信本身带来较大延迟。本发明实施例的图像传输方法，第一设备通过接收目标客户端发送的远程操作指令，并根据远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据，从而使得第二设备基于共享内存可以快速有效地获取到第一设备更新后的目标数据，进而第二设备根据获取到的目标数据也就可以获取远程操作完成时目标服务端的更新后的屏幕图像，实现了目标服务端的更新后的屏幕图像在第一设备和第二设备之间的快速传输，提高了目标服务端的更新区域的传输效率，并且可以有效满足第一设备和第二设备之间大量图像数据的传输，解决了图像传输延迟问题，降低了系统开销。为了便于更加清晰地理解本申请各实施例的技术方案，首先对本申请各实施例相关的一些技术内容进行介绍。如图1所示，在云桌面系统中，用户操作在步骤11通过远程桌面协议传送到桌面系统，桌面系统中应用软件在步骤12接收操作请求后做出响应，在步骤13对屏幕显示的部分内容做出更改。之后，远程桌面服务端通过屏幕图像抓取等方式在步骤14a或14b获取图像变化，对变化图像或全屏图像进行压缩编码后在步骤15传递到用户远程桌面客户端，进行回显。相比本地操作方式，除用户操作传入外，以上还增加了屏幕图像抓取和图像编码传送两个步骤。两步骤性能直接影响远程桌面操作性能。屏幕图像抓取的常规方法包括步骤14a，在应用软件完成图像更改后，编解码器通过定时查询等方式获取屏幕变化。方法抓取屏幕图形没有针对性，且需要大量内存复制对比操作，性能较差。或步骤14b，监听应用软件更新屏幕图形的操作指令，传送监听到的屏幕变化数据量很大。现有方案屏幕图像抓取需定期复制大量图像数据，或者监听应用软件的原始图像更新过程。由此带来的系统开销较大。上述两种方式，为在图像抓取模块和图像编码模块之间传送变化图像数据，需要使用网络通信、管道通信、队列通信等方式，但这些方式都不适合传送大量数据，且通信本身带来较大延迟。下面以具体的实施例对本发明的技术方案进行详细说明。下面这几个具体的实施例可以相互结合，对于相同或相似的概念或过程可能在某些实施例不再赘述。图2是本发明实施例提供的图像传输方法一实施例的流程示意图。如图2所示，本实施例提供的方法，包括：步骤201、接收目标客户端发送的远程操作指令；具体地，相关技术中，针对远程桌面协议服务端的图像更新获取、图像编码传输过程，为在第一设备和第二设备之间传送变化图像数据，需要使用网络通信、管道通信、队列通信等方式，但这些方式都不适合传送大量数据，且通信本身带来较大延迟；可选地，所述第一设备为图像抓取模块，所述第二设备为图像编码模块。为了解决上述问题，本发明实施例中第一设备首先接收目标客户端发送的远程操作指令，可选地，远程操作指令为绘图指令。步骤202、根据远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据；共享内存为第一设备和第二设备之间的共享内存；目标数据用于第二设备获取目标操作完成时目标服务端的屏幕图像。具体地，本发明实施例中第一设备在接收目标客户端发送的远程操作指令后，就可以根据接收到的远程操作指令，对需要进行远程操作的服务端设备进行目标操作；可选地，目标操作会导致服务端的屏幕图像发生更新；第一设备在根据远程操作指令对服务端完成目标操作时，也会更新共享内存中的目标数据；其中，共享内存为第一设备和第二设备之间的共享内存，目标数据用于第二设备获取目标操作完成时目标服务端的屏幕图像，可选地，目标数据中记录了目标服务端更新后的屏幕图像信息，从而使得第二设备基于第一设备和第二设备之间的共享内存，可以快速有效地获取到第一设备更新的目标数据，进而第二设备根据获取到的共享内存中的目标数据也就可以获取远程操作完成时目标服务端的更新后的屏幕图像，实现了目标服务端的更新后的屏幕图像在第一设备和第二设备之间的快速有效地传输；可选地，第二设备在获取更新后的目标服务端的屏幕图像后，可以对更新后的图像进行编码，并将编码后的图像发送给目标客户端，从而使得目标客户端获取到更新后的目标服务端的屏幕图像。本发明实施例的方法中，图像传输过程不额外增加内存占用，可以有效提高目标服务端的更新区域传输效率，提高后续图像编码效率，并且可实现第一设备、第二设备间的完全解耦，便于远程桌面协议算法在多线程、多进程环境中实现。例如，第一设备接收目标客户端发送的远程操作指令，根据远程操作指令对目标服务端完成目标操作时，目标服务端的屏幕图像A更新为图像a，则第一设备可以将图像a相较于图像A变化的区域信息记录到第一设备和第二设备之间的共享内存中，也可以将更新后的图像a对应的信息记录到共享内存中，从而使得第二设备根据共享内存中的信息就可以获取到更新后的目标服务端的屏幕图像a。上述实施例的方法，第一设备通过接收目标客户端发送的远程操作指令，并根据远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据，从而使得第二设备基于共享内存可以快速有效地获取到第一设备更新后的目标数据，进而第二设备根据获取到的目标数据也就可以获取远程操作完成时目标服务端的更新后的屏幕图像，实现了目标服务端的更新后的屏幕图像在第一设备和第二设备之间的快速传输，提高了目标服务端的更新区域的传输效率，并且可以有效满足第一设备和第二设备之间大量图像数据的传输，解决了图像传输延迟问题，降低了系统开销。在一实施例中，目标数据包括以下至少一项：数据访问锁、变化区域数组、原始图像内存数据、目标指示信息、编码请求标志；数据访问锁用于对数据加锁；变化区域数组用于表示远程操作指令被执行后，目标服务端的初始图像中发生变更的区域；原始图像内存数据用于存储图像信息；目标指示信息用于表示目标服务端的初始图像已发生更新；编码请求标志用于表示是否请求获取目标数据的操作权限。具体地，第一设备在接收目标客户端发送的远程操作指令后，就可以根据接收到的远程操作指令，对需要进行远程操作的服务端设备进行目标操作，并更新共享内存中的目标数据。为了使得第二设备基于共享内存中的目标数据可以快速有效地获取目标操作完成时目标服务端的屏幕图像，第一设备更新的共享内存中的目标数据包括以下至少一项：数据访问锁、变化区域数组、原始图像内存数据、目标指示信息、编码请求标志。可选地，数据访问锁用于对数据加锁，从而使得第一设备在对共享内存中的数据进行更新时，可以对共享内存中的数据加锁，避免其他设备对共享内存中的数据进行误操作，也可以避免其他设备与第一设备对共享内存中的数据进行操作时相冲突；可选地，数据访问锁是共享内存中的一个状态字段，用于表示共享内存中被锁保护的数据是否处于可访问状态，可以是支持原子比较操作内存区域、操作系统锁句柄、其他共享库的锁状态数据。可选地，变化区域数组用于表示远程操作指令被执行后，目标服务端的初始图像中发生变更的区域，从而根据共享内存中的变化区域数组可以快速确定目标服务端的屏幕中哪个区域发生了变更，使得目标服务端的屏幕中的变更区域更加具体和细化，降低数据处理量，提升传输效率；可选地，变化区域数组用于记录两次图像编码之间被图像绘图命令影响的显示区域，变化区域数组包括若干矩形，它们之间互不相交，其并集表示被影响的显示区域。可选地，原始图像内存数据用于存储图像信息，从而基于图像内存数据就可以获取到目标服务端的图像；可选地，原始图像内存以矩阵方式记录每个屏幕像素的亮度、颜色信息。可选地，目标指示信息用于表示目标服务端的初始图像已发生更新，使得第二设备根据共享内存中的目标指示信息可以及时有效地知晓目标客户端的屏幕图像已发生更新，从而第二设备也就可以及时的获取到更新后的目标服务端的图像。可选地，目标指示信息可以包括第一计数器，在第一计数器增加时，表明目标客户端的屏幕图像已发生更新；且第一计数器增加的程度，可以表明目标客户端的屏幕图像变更区域的大小和变更的程度。编码请求标志用于表示是否请求获取共享内存中数据的操作权限，使得第二设备可以通过编码请求标志请求获取目标数据的操作权限，从而实现第二设备优先对共享内存中的数据进行操作，避免第二设备与第一设备对共享内存中的数据进行操作时相冲突。可选地，在第二设备长时间无法获取数据访问锁时，第二设备通过更新共享内存中的编码请求标志就可以被第一设备获知第二设备需要获取共享内存中数据的操作权限，从而提升第一设备和第二设备之间的交互性。可选地，根据远程操作指令对目标服务端进行操作，更新共享内存中的目标数据，包括以下至少一项：在编码请求标志设置为第一目标值的情况下，等待预设时间段后将编码请求标志清空；第一目标值表示第二设备请求获取目标数据的操作权限；对操作指令进行解析，在确定目标服务端的初始图像发生变更的情况下，更新数据访问锁，获取目标数据的操作权限；对操作指令进行解析，在确定目标服务端的初始图像发生变更的情况下，对目标指示信息进行更新；对操作指令进行解析，确定目标服务端的初始图像中发生变更的区域，将初始图像中发生变更的区域更新至变化区域数组，得到更新后的变化区域数组；根据更新后的变化区域数组，对原始图像内存数据进行更新。具体地，本发明实施例中第一设备根据远程操作指令对目标服务端进行操作后，及时更新共享内存中的目标数据，从而实现对服务端图像的更新区域和更新后的服务端图像的记录；进而第二设备基于共享内存中的目标数据就可以快速有效的获取到目标服务端更新后的屏幕图像。可选地，第一设备更新共享内存中的目标数据，包括在目标服务端的屏幕图像发生变化的情况下，第一设备对目标数据中的编码请求标志进行检查，若编码请求标志设置为第一目标值的情况下，表示第二设备请求获取目标数据的操作权限，则第一设备等待预设时间段后，即等待第二设备操作完成后，第一设备可以将共享内存中的编码请求标志清空，使得第一设备可以获取共享内存中数据的操作权限，从而对共享内存中的数据进行更新。可选地，第一设备更新共享内存中的目标数据，包括第一设备在对操作指令进行解析，确定操作指令对应的目标操作会影响目标服务端的初始图像发生变更的情况下，则第一设备可以更新共享内存中的数据访问锁，从而第一设备获取权限后，就可以对共享内存中的数据进行更新，从而实现对服务端图像的更新区域和更新后的服务端图像的记录。可选地，第一设备和第二设备对共享内存中的数据进行操作更新的过程中，被数据访问锁保护的部分，同一时间只能有一个设备其进行执行，另一个设备需等待以获取锁。因此被锁保护的部分执行时间越短，两过程的并行度越高，图像处理效率越高。可选地，第一设备更新共享内存中的目标数据，包括对操作指令进行解析，确定操作指令对应的目标操作是否会导致目标服务端的初始图像发生变更的情况下，对共享内存中的目标指示信息进行更新，从而使得第二设备根据共享内存中的目标指示信息可以知晓目标服务端的屏幕图像发生了变化。可选地，第一设备更新共享内存中的目标数据，包括对操作指令进行解析，确定操作指令对应的目标操作是否会导致目标服务端的初始图像发生变更的情况下，将目标服务端的初始图像中发生变更的区域更新至变化区域数组，从而使得第二设备基于共享内存中的变化区域数组可以快速确定目标服务端的屏幕中哪个区域发生了变更，使得目标服务端的屏幕中的变更区域更加具体和细化，降低数据处理量，提升传输效率。可选地，第一设备更新共享内存中的目标数据，包括根据更新后的变化区域数组，对共享内存中的原始图像内存数据进行更新，使得第二设备根据共享内存中的原始图像内存数据，也就可以获取更新后的目标服务端的屏幕图像。例如，如图3所示，第一设备根据远程操作指令对目标服务端进行操作，更新共享内存中的目标数据的流程具体如下：第一设备收到绘图命令时，首先检查是否共享内存中的编码请求标志被设置。如果没有被设置，说明第二设备没有紧急的动作需要获取数据访问锁，因此第一设备可直接开始图像命令解析步骤。如被设置，则第一设备对图像命令解析开始前需要等待一定时间，使第二设备有机会获得数据访问锁。可选地，等待时间结束后第一设备需将共享内存中的标志位清空。图像命令解析步骤中，第一设备将获取到图像命令是否更新了用户可见的屏幕显示区域，以及操作指令执行后，目标服务端被修改的屏幕显示区域。第一设备完成操作指令解析后，开始正式执行目标操作，并完成对共享内存的更新。过程如下：首先获取数据访问锁。获取锁后目标指示信息中的更新计数器执行增加操作，增加量根据被修改显示区域大小确定，使得第二设备可根据目标指示信息中的更新计数器值大小评估开始下次屏幕编码动作的紧迫性。第一设备获取锁后对变化区域数组进行更新，使得数组表示的整个变化区域为执行绘图命令前完整屏幕变化区域与命令引起的新增屏幕变化区域的并集。获取锁后，开始具体执行绘图命令，并对受绘图命令影响的原始图像内存进行更新。上述骤执行完后，第一设备释放数据访问锁，等待新的绘图命令到来。需要说明的是，本发明实施例中也监听了应用软件发送的图像命令。但监听到图像命令后，额外的操作仅为：获取数据访问锁，增加目标指示信息中的更新计数器，更新变化区域数组。不涉及复杂的内存复制和进程间通信机制。因此处理大量图像命令时额外开销很小。上述实施例的方法，第一设备通过更新共享内存中的目标数据，使得第一设备可以有效的将更新后的目标服务端的屏幕图像记录在共享内存中，使得第二设备根据共享内存中的目标数据可以及时有效地知晓目标客户端的屏幕图像已发生更新，及时准确的获取到更新后的目标服务端的图像，实现了目标服务端的更新后的屏幕图像在第一设备和第二设备之间的快速传输，提高目标服务端的更新区域的传输效率。在一实施例中，获取目标数据的操作权限，包括：获取目标数据中的目标指示信息和变化区域数组的操作权限；和/或，获取目标数据中的目标指示信息、变化区域数组和原始图像内存数据的操作权限。具体地，第一设备在对操作指令进行解析，确定目标服务端的初始图像发生变更的情况下，第一设备可以更新数据访问锁，获取共享内存中数据的操作权限；可选地，第一设备可以获取目标数据中的目标指示信息、变化区域数组和原始图像内存数据的操作权限，第一设备也可以减少被数据访问锁保护的操作范围，只获取目标数据中的目标指示信息和变化区域数组的操作权限，从而使得数据访问锁锁定时间缩短，使得共享内存中的目标数据可以被第一设备和第二设备合理有效的利用，提高第一设备和第二设备对共享内存中目标数据的并行执行度和共享内存中的目标数据的利用效率。例如，如图4所示，第一设备可以减少被数据访问锁保护的操作范围，只获取目标数据中的目标指示信息和变化区域数组的操作权限，从而使得数据访问锁锁定时间缩短，使得共享内存中的目标数据可以被第一设备和第二设备合理有效的利用，提高第一设备和第二设备对共享内存中目标数据的并行执行度和共享内存中的目标数据的利用效率。可选地，第一设备和第二设备对共享内存中的数据进行操作更新的过程中，被数据访问锁保护的部分，同一时间只能有一个设备其进行执行，另一个设备需等待以获取锁。因此被锁保护的部分执行时间越短，共享内存中目标数据的并行执行度越高，图像处理效率越高。示例性的，如图4所示，为了提高第一设备和第二设备的执行并行度，在允许远程桌面客户端显示出现短时间花屏情况下，可减少被数据访问锁保护的操作范围。可将图像命令渲染、原始图像内存更新步骤放到数据访问锁之外。可选地，第一设备抓取目标服务端的更新后的屏幕图像的过程中，目标指示信息中的更新计数器增加、变化区域数组更新步骤都可以快速完成，而图像命令渲染、原始图像内存更新步骤则与图像命令复杂度，以及更新区域大小相关，可能占用较长时间。减少被数据访问锁保护的操作范围后，第一设备因图像抓取过程导致的数据访问锁锁定时间可以非常短，从而也就可以有效提高第一设备和第二设备的执行并行度。上述实施例的方法，第一设备获取共享内存中的目标数据的操作权限时，可以通过减少被数据访问锁保护的操作范围，从而使得数据访问锁锁定时间缩短，使得共享内存中的目标数据可以被第一设备和第二设备合理有效的利用，提高第一设备和第二设备对共享内存中目标数据的并行执行度和共享内存中的目标数据的利用效率。图5是本发明实施例提供的图像传输方法另一实施例的流程示意图。如图5所示，本实施例提供的方法，包括：步骤501、第二设备获取共享内存中的目标数据；共享内存为第一设备和第二设备之间的共享内存；目标数据是第一设备根据目标客户端发送的远程操作指令对目标服务端进行目标操作后确定的数据；具体地，第一设备根据远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据后，目标数据中记录了目标服务端屏幕更新区域及更新后的目标服务端的屏幕图像的信息，进而第二设备就可以在第一设备和第二设备之间的共享内存中获取更新后的目标数据。步骤502、根据共享内存中的目标数据，获取目标图像；目标图像为目标操作完成时目标服务端的屏幕图像。具体地，第二设备在第一设备和第二设备之间的共享内存中获取更新后的目标数据后，就可以根据共享内存中记录的目标服务端屏幕更新区域及更新后的目标服务端的屏幕图像的信息，获取目标操作完成时目标服务端的屏幕图像。例如，第一设备接收目标客户端发送的远程操作指令，根据远程操作指令对目标服务端完成目标操作时，目标服务端的屏幕图像A更新为图像a，则第一设备可以将图像a相较于图像A变化的区域信息记录到第一设备和第二设备之间的共享内存中，也可以将更新后的图像a对应的信息记录到共享内存中，从而使得第二设备根据共享内存中的信息就可以获取到更新后的目标服务端的屏幕图像a。上述实施例的方法，第二设备在第一设备和第二设备之间的共享内存中获取更新后的目标数据后，就可以根据目标数据中记录的目标服务端屏幕更新区域及更新后的目标服务端的屏幕图像的信息，获取远程操作完成时目标服务端的更新后的屏幕图像，实现了目标服务端的更新后的屏幕图像在第一设备和第二设备之间的快速传输，提高了目标服务端的更新区域的传输效率，并且可以有效满足第一设备和第二设备之间大量图像数据的传输，解决了图像传输延迟问题，降低了系统开销。在一实施例中，目标数据包括以下至少一项：数据访问锁、变化区域数组、原始图像内存数据、目标指示信息、编码请求标志 ；数据访问锁用于对数据加锁；变化区域数组用于表示远程操作指令被执行后，目标服务端的初始图像中发生变更的区域；原始图像内存数据用于存储图像信息；目标指示信息用于表示目标服务端的初始图像已发生更新；编码请求标志用于表示是否请求获取目标数据的操作权限。具体地，为了使得第二设备基于共享内存中的目标数据可以快速有效地获取目标操作完成时目标服务端的屏幕图像，可选地，第二设备获取的共享内存中的目标数据包括以下至少一项：数据访问锁、变化区域数组、原始图像内存数据、目标指示信息、编码请求标志。可选地，数据访问锁用于对数据加锁，从而使得第二设备在获取共享内存中的数据时，可以对共享内存中的数据加锁，避免其他设备对共享内存中的数据进行误操作，也可以避免其他设备与第二设备对共享内存中的数据进行操作时相冲突；可选地，数据访问锁是共享内存中的一个状态字段，用于表示共享内存中被锁保护的数据是否处于可访问状态，可以是支持原子比较操作内存区域、操作系统锁句柄、其他共享库的锁状态数据。可选地，变化区域数组用于表示远程操作指令被执行后，目标服务端的初始图像中发生变更的区域，从而第二设备根据变化区域数组，可以快速确定目标服务端的屏幕中哪个区域发生了变更，使得第二设备获取的目标服务端的屏幕中的变更区域更加具体和细化，降低数据处理量，提升传输效率；可选地，变化区域数组用于记录两次图像编码之间被图像绘图命令影响的显示区域，变化区域数组包括若干矩形，它们之间互不相交，其并集表示被影响的显示区域。可选地，原始图像内存数据用于存储图像信息，从而第二设备基于共享内存中图像内存数据就可以获取到目标服务端的图像；可选地，原始图像内存以矩阵方式记录每个屏幕像素的亮度、颜色信息。可选地，目标指示信息用于表示目标服务端的初始图像已发生更新，使得第二设备获取共享内存中的目标指示信息后，可以及时有效地知晓目标客户端的屏幕图像已发生更新，从而第二设备也就可以及时的获取到更新后的目标服务端的图像。可选地，目标指示信息可以包括第一计数器，在第一计数器增加时，表明目标客户端的屏幕图像已发生更新；且第一计数器增加的程度，可以表明目标客户端的屏幕图像变更区域的大小和变更的程度。可选地，编码请求标志用于表示是否请求获取目标数据的操作权限，使得第二设备可以通过编码请求标志请求获取目标数据的操作权限，从而优先对共享内存中的目标数据进行操作，避免第二设备与第一设备对共享内存中的数据进行操作时相冲突。可选地，在第二设备长时间无法获取数据访问锁时，第二设备通过更新共享内存中的编码请求标志就可以被第一设备获知第二设备需要获取共享内存中数据的操作权限，从而提升第一设备和第二设备之间的交互性。在一实施例中，根据共享内存中的目标数据，获取目标图像，包括：获取目标数据中的变化区域数组；根据变化区域数组，更新原始图像内存数据；根据更新后的原始图像内存数据，获取目标图像。具体地，第一设备和第二设备之间的共享内存中的变化区域数组用于表示目标操作完成时，目标服务端的初始图像中发生变更的区域，从而第二设备可以通过获取共享内存中的变化区域数组，确定目标服务端的屏幕中哪个区域发生了变更，并对原始图像内存数据中记录的目标服务端的原始屏幕图像进行变更，也就可以获取目标服务端更新后的屏幕图像，实现了目标服务端的更新后的屏幕图像在第一设备和第二设备之间的快速传输。上述实施例的方法，第二设备通过获取共享内存中的变化区域数组，从而第二设备根据变化区域数组，可以快速确定目标服务端的屏幕中哪个区域发生了变更，使得第二设备获取的目标服务端的屏幕中的变更区域更加具体和细化，降低数据处理量，提升传输效率；进一步，第二设备根据获取到的变化区域数组，更新原始图像内存数据，也就可以获取目标服务端更新后的屏幕图像，实现了目标服务端的更新后的屏幕图像在第一设备和第二设备之间的快速传输。在一实施例中，获取目标数据中的变化区域数组之前，还包括：获取目标数据中的目标指示信息；根据目标数据中的目标指示信息，获取目标数据集合中的变化区域数组。具体地，第二设备获取共享内存中的目标指示信息后，使得第二设备基于目标指示信息就可以及时有效地知晓目标客户端的屏幕图像已发生更新，进而第二设备也就可以及时的获取目标服务端更新后的屏幕图像，提高了第二设备获取目标服务端的更新后的图像的效率。上述实施例的方法，第二设备通过获取共享内存中的目标指示信息，就可以及时有效地知晓目标服务端的屏幕图像已发生更新，从而及时的获取目标服务端更新后的屏幕图像，提高了第二设备获取目标服务端的更新后的图像的效率。在一实施例中，获取目标数据中的目标指示信息之后，还包括：根据目标数据中的目标指示信息，更新数据访问锁，获取目标数据的操作权限。具体地，第二设备获取目标数据中的目标指示信息之后，若目标指示信息指示目标服务端的屏幕图像已发生更新，则第二设备可以对共享内存中的数据加锁，避免其他设备对共享内存中的数据进行误操作，也可以避免其他设备与第二设备对共享内存中的数据进行操作时相冲突，使得第二设备可以有效的基于共享内存中的数据获取更新后的目标服务端的屏幕图像。示例性的，如图6所示，第二设备根据共享内存中的目标数据，获取目标图像的流程具体如下：首先第二设备检查共享内存中的目标指示信息是否指示目标服务端的原始图像内存发生变更，其变化区域由变化区域数组表示。如共享内存中的目标指示信息指示目标服务端的原始图像不变，则第二设备不需要获取目标服务端的屏幕图像，只需等待下次更新检查时间到来后再次进行检查。在目标指示信息指示目标服务端的原始图像内存发生变更的情况下，执行如下步骤：首先，获取数据访问锁；若第二设备长时间不能获取数据访问锁时，则第二设备可设置编码请求标志，并通知第一设备，使第二设备得到获取锁的机会。可选地，第二设备获取锁后，将目标指示信息清空，并在获取共享内存中变化区域数组的完整内容后，将共享内存中的变化区域数组清空，并根据获取的变化区域数组可确定目标服务端被修改的屏幕显示区域，获取被修改区域的原始图像内存数据。以上骤完成后，第二设备释放数据访问锁。可选地，第二设备释放数据访问锁后，开始执行图像编码步骤，该步骤实现对原始图像内存中像素数据的编码、压缩、转换，将占用较多计算时间。图像编码步骤完成后，重复循环过程，等待下次更新检查时间到来后再次进行检查。本申请实施例中第一设备的图像抓取和第二设备的图像编码过程间，仅通过共享内存中的状态和原始图像内存区进行通信。通过共享内存，不仅传输了图像像素变化，也传送了变化区域，使得图像编码可针对变化区域高效执行；设置的目标指示信息中的更新计数器和编码请求标志使得两过程间可高效同步状态，减小两过程间状态同步带来的编码延迟。第一设备和第二设备共享内存中的数据、标志可跨进程正确工作，可在云桌面环境虚拟机与宿主机间正确工作。因此可实现远程桌面图像编码与用户操作环境之间更大程度的隔离，保障云桌面系统安全。可选地，如果第一设备在云桌面中完成图像抓取后，第二设备的编码传输在云桌面之外完成，则可保证云桌面与用户客户端之间有更高的数据安全保障。上述实施例的方法，第二设备通过对共享内存中的数据加锁，避免其他设备对共享内存中的数据进行误操作，也可以避免其他设备与第二设备对共享内存中的数据进行操作时相冲突，使得第二设备可以进一步有效的获取更新后的目标服务端的屏幕图像。在一实施例中，获取目标数据的操作权限，包括：获取目标数据中的目标指示信息和变化区域数组的操作权限；和/或，获取目标数据中的目标指示信息、变化区域数组和原始图像内存数据的操作权限。具体地，第二设备在获取目标数据中的目标指示信息，且目标指示信息指示目标服务端的屏幕图像已发生更新的情况下，第二设备可以更新数据访问锁，获取共享内存中数据的操作权限，从而避免其他设备与第二设备对共享内存中的数据进行操作时相冲突，使得第二设备可以有效的获取更新后的目标服务端变的屏幕图像；可选地，第二设备可以获取共享内存中的目标指示信息、变化区域数组和原始图像内存数据的操作权限，第二设备也可以减少被数据访问锁保护的操作范围，只获取共享内存中的目标指示信息和变化区域数组的操作权限，从而使得数据访问锁锁定时间缩短，使得共享内存中的数据可以被第一设备和第二设备合理有效的利用，提高第一设备和第二设备对共享内存中数据的并行执行度和共享内存中的目标数据的利用效率。例如，如图7所示，第二设备可以减少被数据访问锁保护的操作范围，只获取共享内存中的目标指示信息和变化区域数组的操作权限，从而使得数据访问锁锁定时间缩短，使得共享内存中的目标数据可以被第一设备和第二设备合理有效的利用，提高第一设备和第二设备对共享内存中目标数据的并行执行度和共享内存中的目标数据的利用效率。可选地，第一设备和第二设备对共享内存中的数据进行操作更新的过程中，被数据访问锁保护的部分，同一时间只能有一个设备其进行执行，另一个设备需等待以获取锁。因此被锁保护的部分执行时间越短，两过程的并行度越高，图像处理效率越高。示例性的，如图7所示，为了提高第一设备和第二设备的执行并行度，在允许远程桌面客户端显示出现短时间花屏情况下，可减少被数据访问锁保护的操作范围。可将第二设备获取被修改区域的原始图像内存数据步骤放到数据访问锁之外。此时，被数据访问锁保护的清空目标指示信息、获取变化区域数组内容、清空变化区域数组步骤，因为实际执行速度很快，数据访问锁将很快被释放。等到数据访问锁被释放，且耗时的获取被修改区域的原始图像内存数据、图像编码步骤完成后，再进入下一图像编码过程循环周期。减少被数据访问锁保护的操作范围后，第二设备因图像编码过程导致的数据访问锁锁定时间可以非常短，从而也就可以有效提高第一设备和第二设备的执行并行度。可选地，在第一设备为图像抓取模块，第二设备为图像编码模块时，图像抓取过程，图像编码过程配合执行，共同使用的共享内存数据由数据访问锁进行保护。当屏幕图像更新快速时，两次图像编码过程间可能发生多次图像抓取过程。当屏幕图像更新慢时，两次图像编码过程间可能没有图像抓取过程。通过以上步骤，通过共享内存中的数据、标志可完整实现第一设备的图像抓取、第二设备的图像编码过程间数据传送和状态同步，不需要其他如网络通信、管道通信、队列通信等方式辅助。通过共享内存方式，远程桌面服务端的图像抓取和图像编码可跨进程正确工作，可在云桌面环境虚拟机与宿主机间正确工作。上述实施例的方法，第二设备获取共享内存中数据的操作权限时，可以通过减少被数据访问锁保护的操作范围，从而使得数据访问锁锁定时间缩短，使得共享内存中的目标数据可以被第一设备和第二设备合理有效的利用，提高第一设备和第二设备对共享内存中目标数据的并行执行度和共享内存中的目标数据的利用效率。在一实施例中，更新数据访问锁之前，还包括：将目标数据中的编码请求标志设置为第一目标值；第一目标值表示第二设备请求获取目标数据的操作权限。具体地，若第二设备长时间不能获取数据访问锁时，则第二设备可设置编码请求标志，并通知第一设备，使第二设备得到获取锁的机会。其中，置编码请求标志用于表示是否请求获取共享内存中数据的操作权限，使得第二设备可以通过编码请求标志请求获取目标数据的操作权限，从而优先对共享内存中的目标数据进行操作，避免第二设备与第一设备对共享内存中的数据进行操作时相冲突，提升第一设备和第二设备之间的交互性。上述实施例的方法，第二设备通过将共享内存中的编码请求标志设置为第一目标值，从而使得第二设备可以通过编码请求标志请求获取目标数据的操作权限，使得第二设备优先对共享内存中的目标数据进行操作，避免第二设备与第一设备对共享内存中的数据进行操作时相冲突。可选地，在第二设备长时间无法获取数据访问锁时，第二设备通过更新共享内存中的编码请求标志就可以被第一设备获知，从而提升第一设备和第二设备之间的交互性。下面对本发明提供的图像传输装置进行描述，下文描述的图像传输装置与上文描述的图像传输方法可相互对应参照。图8是本发明提供的图像传输装置的结构示意图。本实施例提供的图像传输装置，包括：接收模块810，用于接收目标客户端发送的远程操作指令；更新模块820，用于根据远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据；共享内存为第一设备和第二设备之间的共享内存；目标数据用于第二设备获取目标操作完成时目标服务端的屏幕图像。可选地，目标数据包括以下至少一项：数据访问锁、变化区域数组、原始图像内存数据、目标指示信息、编码请求标志；数据访问锁用于对数据加锁；变化区域数组用于表示远程操作指令被执行后，目标服务端的初始图像中发生变更的区域；原始图像内存数据用于存储图像信息；目标指示信息用于表示目标服务端的初始图像已发生更新；编码请求标志用于表示是否请求获取目标数据的操作权限。可选地，所述更新模块820，具体用于：在编码请求标志设置为第一目标值的情况下，等待预设时间段后将编码请求标志清空；第一目标值表示第二设备请求获取目标数据的操作权限；对操作指令进行解析，在确定目标服务端的初始图像发生变更的情况下，更新数据访问锁，获取目标数据的操作权限；对操作指令进行解析，在确定目标服务端的初始图像发生变更的情况下，对目标指示信息进行更新；对操作指令进行解析，确定目标服务端的初始图像中发生变更的区域，将初始图像中发生变更的区域更新至变化区域数组，得到更新后的变化区域数组；根据更新后的变化区域数组，对原始图像内存数据进行更新。可选地，所述更新模块820，具体用于：获取目标数据中的目标指示信息和变化区域数组的操作权限；和/或，获取目标数据中的目标指示信息、变化区域数组和原始图像内存数据的操作权限。图9是本发明提供的图像传输装置的结构示意图。本实施例提供的图像传输装置，包括：第一获取模块910，获取共享内存中的目标数据；共享内存为第一设备和第二设备之间的共享内存；目标数据是第一设备根据目标客户端发送的远程操作指令对目标服务端进行目标操作后确定的数据；第二获取模块920，根据共享内存中的目标数据，获取目标图像；目标图像为目标操作完成时目标服务端的屏幕图像。可选地，目标数据包括以下至少一项：数据访问锁、变化区域数组、原始图像内存数据、目标指示信息、编码请求标志；数据访问锁用于对数据加锁；变化区域数组用于表示远程操作指令被执行后，目标服务端的初始图像中发生变更的区域；原始图像内存数据用于存储图像信息；目标指示信息用于表示目标服务端的初始图像已发生更新；编码请求标志用于表示是否请求获取目标数据的操作权限。可选地，所述第二获取模块920，具体用于：获取目标数据中的变化区域数组；根据变化区域数组，更新原始图像内存数据；根据更新后的原始图像内存数据，获取目标图像。可选地，所述第一获取模块910，具体用于获取目标数据中的目标指示信息；根据目标数据中的目标指示信息，获取目标数据集合中的变化区域数组。可选地，所述第一获取模块910，还用于：根据目标数据中的目标指示信息，更新数据访问锁，获取目标数据的操作权限。可选地，所述第一获取模块910，具体用于获取目标数据中的目标指示信息和变化区域数组的操作权限；和/或，获取目标数据中的目标指示信息、变化区域数组和原始图像内存数据的操作权限。可选地，所述第一获取模块910，具体用于将目标数据中的编码请求标志设置为第一目标值；第一目标值表示第二设备请求获取目标数据的操作权限。本发明实施例的装置，其用于执行前述任一方法实施例中的方法，其实现原理和技术效果类似，此次不再赘述。图10示例了一种第一设备的实体结构示意图，该电子设备可以包括：处理器1010、通信接口1020、存储器1030和通信总线1040，其中，处理器1010，通信接口1020，存储器1030通过通信总线1040完成相互间的通信。处理器1010可以调用存储器1030中的逻辑指令，以执行图像传输方法，该方法包括：接收目标客户端发送的远程操作指令；根据远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据；共享内存为第一设备和第二设备之间的共享内存；目标数据用于第二设备获取目标操作完成时目标服务端的屏幕图像。此外，上述的存储器1030中的逻辑指令可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。图11示例了一种第二设备的实体结构示意图，该电子设备可以包括：处理器1110、通信接口1120、存储器1130和通信总线1140，其中，处理器1110，通信接口1120，存储器1130通过通信总线1140完成相互间的通信。处理器1110可以调用存储器1130中的逻辑指令，以执行图像传输方法，该方法包括：获取共享内存中的目标数据；共享内存为第一设备和第二设备之间的共享内存；目标数据是第一设备根据目标客户端发送的远程操作指令对目标服务端进行目标操作后确定的数据；根据共享内存中的目标数据，获取目标图像；目标图像为目标操作完成时目标服务端的屏幕图像。另一方面，本发明还提供一种计算机程序产品，所述计算机程序产品包括存储在非暂态计算机可读存储介质上的计算机程序，所述计算机程序包括程序指令，当所述程序指令被计算机执行时，计算机能够执行上述各方法所提供的图像传输方法，该方法包括：接收目标客户端发送的远程操作指令；根据远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据；共享内存为第一设备和第二设备之间的共享内存；目标数据用于第二设备获取目标操作完成时目标服务端的屏幕图像；或，获取共享内存中的目标数据；共享内存为第一设备和第二设备之间的共享内存；目标数据是第一设备根据目标客户端发送的远程操作指令对目标服务端进行目标操作后确定的数据；根据共享内存中的目标数据，获取目标图像；目标图像为目标操作完成时目标服务端的屏幕图像。又一方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现以执行上述各提供的图像传输方法，该方法包括：接收目标客户端发送的远程操作指令；根据远程操作指令对目标服务端进行目标操作，更新共享内存中的目标数据；共享内存为第一设备和第二设备之间的共享内存；目标数据用于第二设备获取目标操作完成时目标服务端的屏幕图像；或，获取共享内存中的目标数据；共享内存为第一设备和第二设备之间的共享内存；目标数据是第一设备根据目标客户端发送的远程操作指令对目标服务端进行目标操作后确定的数据；根据共享内存中的目标数据，获取目标图像；目标图像为目标操作完成时目标服务端的屏幕图像。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分所述的方法。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
