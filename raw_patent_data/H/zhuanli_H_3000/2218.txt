标题title
消息处理方法、装置和计算机设备
摘要abst
本申请涉及一种消息处理方法、装置和计算机设备。所述消息处理方法包括：获取待下发消息的属性信息；根据属性信息和预先设置的信息等级，对待下发消息进行等级划分；根据各信息等级对应的频控阈值，确定各待下发消息的频控状态；根据频控状态和各信息等级对应的延迟值阈值，对待下发消息进行下发处理，通过该种设置，实现了不同处理优先级、重要度的信息分层，实现了待下发消息的频控状态的区别调控，实现了海量消息中重要度较高消息的快速区分，缓解了服务器的高并发压力，保障了重要消息的下发。
权利要求书clms
1.一种消息处理方法，其特征在于，包括：获取待下发消息的属性信息；根据所述属性信息和预先设置的信息等级，对所述待下发消息进行等级划分；根据各所述信息等级对应的频控阈值，确定各所述待下发消息的频控状态；根据所述频控状态和各所述信息等级对应的延迟值阈值，对所述待下发消息进行下发处理。2.根据权利要求1所述的方法，其特征在于，所述属性信息包括业务类型信息；所述信息等级与至少一种业务类型信息对应；所述根据所述属性信息和预先设置的信息等级，对所述待下发消息进行等级划分，包括：根据所述业务类型信息，匹配到各所述待下发消息对应的信息等级。3.根据权利要求1所述的方法，其特征在于，所述根据各所述信息等级对应的频控阈值，确定各所述待下发消息的频控状态之前，包括：获取各所述待下发消息对应发起方的实时频控信息；所述根据各所述信息等级对应的频控阈值，确定各所述待下发消息的频控状态，包括：根据各所述待下发消息对应发起方的实时频控信息和所述待下发消息所在消息等级对应的频控阈值，确定各所述待下发消息的频控状态。4.根据权利要求3所述的方法，其特征在于，所述根据各所述待下发消息对应发起方的实时频控信息和各所述信息等级对应的频控阈值，确定各所述待下发消息的频控状态，包括：当所述待下发消息对应发起方的实时频控信息达到所述待下发消息所在信息等级对应的频控阈值时，将达到频控阈值作为所述待下发消息的频控状态；当所述待下发消息对应发起方的实时频控信息未达到所述待下发消息所在信息等级对应的频控阈值时，将未达到频控阈值作为所述待下发消息的频控状态。5.根据权利要求4所述的方法，其特征在于，所述根据所述频控状态和各所述信息等级对应的延迟值阈值，对所述待下发消息进行下发处理，包括：当所述待下发消息的频控状态为未达到频控阈值时，对所述待下发消息进行下发处理；当所述待下发消息的频控状态为达到频控阈值时，获取所述待下发消息的实际延迟值；当所述实际延迟值未达到所述待下发消息所在信息等级对应的延迟值阈值时，对所述待下发消息进行下发处理。6.根据权利要求5所述的方法，其特征在于，所述方法还包括：当所述实际延迟值达到所述待下发消息所在信息等级对应的延迟值阈值时，丢弃所述待下发消息。7.一种消息处理装置，其特征在于，包括：第一获取模块，用于获取待下发消息的属性信息；划分模块，用于根据所述属性信息和预先设置的信息等级，对所述待下发消息进行等级划分；确定模块，用于根据各所述信息等级对应的频控阈值，确定各所述待下发消息的频控状态；下发模块，用于根据所述频控状态和各所述信息等级对应的延迟值阈值，对所述待下发消息进行下发处理。8.一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至6中任一项所述的消息处理方法的步骤。9.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至6中任一项所述的消息处理方法的步骤。10.一种计算机程序产品，包括计算机程序，其特征在于，该计算机程序被处理器执行时实现权利要求1至6中任一项所述的消息处理方法的步骤。
说明书desc
技术领域本申请涉及数据处理技术领域，特别是涉及一种消息处理方法、装置和计算机设备。背景技术随着互联网技术的发展，服务端可以基于不同的业务期望向不同客户端下发不同的消息。例如，基于生产业务期望可以向用户推送促产的消息，基于增长业务期望可以向用户推送活动相关的消息，基于直播业务期望可以向用户推送直播开关播等消息。在任意一个并发压力较大的场景中，针对同一个客户端的每秒查询率可能会达到几千甚至上万，显然客户端无法承受这个量级的消息输入，所以服务端会进行一定的频控限流，选择性的丢弃一部分消息。常见的，服务端通常会设置一个频控阈值，随后把未达到频控阈值的消息推送给处于同一房间内的所有客户端，把达到频控阈值的消息直接丢弃，以此实现消息的筛查挑选，然而，该种设置可能会把不重要的垃圾信息优先下发，并筛除掉一些较重要的信息，这使得客户端无法及时接收到实际有用的信息，造成用户的信息遗漏。发明内容基于此，有必要针对上述技术问题，提供一种能够保障重要信息优先下发的消息处理方法、装置和计算机设备。第一方面，本申请提供了一种消息处理方法，包括：获取待下发消息的属性信息；根据所述属性信息和预先设置的信息等级，对所述待下发消息进行等级划分；根据各所述信息等级对应的频控阈值，确定各所述待下发消息的频控状态；根据所述频控状态和各所述信息等级对应的延迟值阈值，对所述待下发消息进行下发处理。在其中一个实施例中，所述属性信息包括业务类型信息；所述信息等级与至少一种业务类型信息对应；所述根据所述属性信息和预先设置的信息等级，对所述待下发消息进行等级划分，包括：根据所述业务类型信息，匹配到各所述待下发消息对应的信息等级。在其中一个实施例中，所述根据各所述信息等级对应的频控阈值，确定各所述待下发消息的频控状态之前，包括：获取各所述待下发消息对应发起方的实时频控信息；所述根据各所述信息等级对应的频控阈值，确定各所述待下发消息的频控状态，包括：根据各所述待下发消息对应发起方的实时频控信息和所述待下发消息所在消息等级对应的频控阈值，确定各所述待下发消息的频控状态。在其中一个实施例中，所述根据各所述待下发消息对应发起方的实时频控信息和各所述信息等级对应的频控阈值，确定各所述待下发消息的频控状态，包括：当所述待下发消息对应发起方的实时频控信息达到所述待下发消息所在信息等级对应的频控阈值时，将达到频控阈值作为所述待下发消息的频控状态；当所述待下发消息对应发起方的实时频控信息未达到所述待下发消息所在信息等级对应的频控阈值时，将未达到频控阈值作为所述待下发消息的频控状态。在其中一个实施例中，所述根据所述频控状态和各所述信息等级对应的延迟值阈值，对所述待下发消息进行下发处理，包括：当所述待下发消息的频控状态为未达到频控阈值时，对所述待下发消息进行下发处理；当所述待下发消息的频控状态为达到频控阈值时，获取所述待下发消息的实际延迟值；当所述实际延迟值未达到所述待下发消息所在信息等级对应的延迟值阈值时，对所述待下发消息进行下发处理。在其中一个实施例中，方法还包括：当所述实际延迟值达到所述待下发消息所在信息等级对应的延迟值阈值时，丢弃所述待下发消息。第二方面，本申请还提供了一种消息处理装置，包括：第一获取模块，用于获取待下发消息的属性信息；划分模块，用于根据所述属性信息和预先设置的信息等级，对所述待下发消息进行等级划分；确定模块，用于根据各所述信息等级对应的频控阈值，确定各所述待下发消息的频控状态；下发模块，用于根据所述频控状态和各所述信息等级对应的延迟值阈值，对所述待下发消息进行下发处理。第三方面，本申请还提供了一种计算机设备。所述计算机设备包括存储器和处理器，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时实现上述任一实施例所述的消息处理方法。第四方面，本申请还提供了一种计算机可读存储介质。所述计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现上述任一实施例所述的消息处理方法。第五方面，本申请还提供了一种计算机程序产品。所述计算机程序产品，包括计算机程序，该计算机程序产品被处理器执行时实现上述任一实施例所述的消息处理方法。上述消息处理方法、装置和计算机设备，能够按照属性信息将待下发消息进行处理优先级、重要度的信息分层，通过不同的频控阈值，实现了待下发消息的频控状态的区别调控，实现了海量消息中重要度较高消息的快速区分，缓解了服务器的高并发压力，保障了重要消息的优先下发。附图说明图1为一个实施例中消息处理方法的应用环境图；图2为一个实施例中消息处理方法的流程示意图；图3为另一个实施例中消息处理方法的流程示意图；图4为再一个实施例中消息处理方法的流程示意图；图5为又一个实施例中消息处理方法的流程示意图；图6为一个实施例中消息处理装置的结构框图；图7为又一个实施例中消息处理装置的结构框图；图8为一个实施例中消息处理装置中下发模块的结构框图；图9为一个实施例中计算机设备的内部结构图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。本申请实施例提供的消息处理方法，可以应用于如图1所示的应用环境中。其中，客户端102通过网络与服务端104通过网络进行通信。例如，消息处理方法应用于客户端102，客户端102首先获取待下发消息的属性信息，随后根据属性信息和预先设置的信息等级，对待下发消息进行等级划分；并根据各信息等级对应的频控阈值，确定各待下发消息的频控状态；随后客户端102将待下发消息的频控状态发送给服务端104，服务端104根据频控状态和各信息等级对应的延迟值阈值，确定待下发消息的下发处理结果进行下发处理，其中，客户端102可以但不限于是各种个人计算机、笔记本电脑、智能手机、平板电脑、物联网设备和便携式可穿戴设备，物联网设备可为智能音箱、智能电视、智能空调、智能车载设备等。便携式可穿戴设备可为智能手表、智能手环、头戴设备等。服务端104可以用独立的服务器或者是多个服务器组成的服务器集群来实现。客户端102和服务端104可以通过有线或无线通信方式进行直接或间接的连接，例如通过网络连接。又例如，存储器数据访问方法应用于服务端104，服务端104在接收到客户端102发出的待下发消息后，首先获取待下发消息的属性信息，随后根据属性信息和预先设置的信息等级，对待下发消息进行等级划分；并根据各信息等级对应的频控阈值，确定各待下发消息的频控状态；随后服务端104根据频控状态和各信息等级对应的延迟值阈值，确定待下发消息的下发处理结果进行下发处理。作为示例，服务端104可以将各待下发消息的频控状态等信息存储于数据存储系统中。可以理解的是，数据存储系统可为独立的存储设备，或者该数据存储系统位于服务器上，或者该数据存储系统位于另一终端上。在一个实施例中，提供了一种消息处理方法，本实施例以该消息处理方法应用于处理器进行举例说明，可以理解的是，该处理器可位于客户端或服务端上。如图2所示，该消息处理方法包括：步骤202、获取待下发消息的属性信息。属性信息指的是待下发消息携带的相关信息，例如可以包括待下发消息的业务类型、消息发送时间、该待下发消息对应的客户端的信息等。作为示例，在直播场景中，可以实时接收各直播间中多个用户通过手机、平板或电脑发出的待下发消息，待下发消息的属性信息可以包括用户身份信息、直播间信息、当前待下发消息的关键词内容等，其中，用户身份信息可以是用户ID和发出当前待下发消息的终端信息的对应关系，比如用户ID-电脑型号，直播间信息可以是直播间房间号，当前待下发消息的关键词内容可以是将待下发信息的具体内容与预先设置的关键词列表比对后，获得的比对成功的字段。在本实施例中，处理器可以获取至少一个客户端发出的至少一个待下发消息的属性信息。步骤204、根据属性信息和预先设置的信息等级，对待下发消息进行等级划分。信息等级可以是用户预先设置的，不同的信息等级可以用于区分不同处理优先级、不同重要度的消息，处理器可以预先设置至少一个信息等级，各个信息等级对应的处理优先级依次下降，即重要度依次下降。具体地，处理器可以预先设置多个层级的关键词列表，其重要程度依次下降，用以区别不同待下发消息的文本信息的重要程度，若待下发消息的文本信息与各个层级的关键词列表均不匹配，则认为当前待下发消息是可以丢弃的普通文本消息。作为示例，在直播场景中，处理器中预先设置第一列表和第二列表，第一列表和第二列表中分别包含多个关键词，且第一列表中关键词的重要程度高于第二列表；处理器还预先设置有四个信息等级，第一个信息等级对应高等级的消息，例如可以是价值高于第一预设阈值的直播间礼物或存在第一列表关键词内容的文本消息；第二个信息等级对应比较重要的消息，例如可以是价值低于第一预设阈值，但同时高于第二预设阈值的直播间礼物，或存在第二列表关键词内容的文本消息，或预先设置能够接受较低延时送达的消息；第三个信息等级对应一般的消息，例如可以接收较高延时送达的信息；第四个信息等级对应不重要的消息，例如是与第一列表和第二列表中的关键词均不匹配，且未携带任何标签的文本消息。其中能够接受较低延时送达的消息和可以接收较高延时送达的信息分别可以携带有对应的延时标签，延时标签可以是字母、字符或数字中的至少一种组成，用于标记当前消息对应的可以接受延时的状态，状态可以包括较低延时和较高延时。作为示例，各信息等级可以分别对应至少一种属性信息。处理器在获取待下发消息的属性信息后，可以将其与各信息等级对应的属性信息进行匹配，将匹配到的信息等级作为待下发消息对应的信息等级。或者，待下发消息的属性信息可以携带有等级标签，等级标签可以是字母、字符或数字中的至少一种组成，等级标签用于表示唯一的信息等级，处理器在获取待下发消息的属性信息后，读取属性信息携带的等级标签，并根据等级标签，匹配到待下发消息对应的信息等级。本实施例中，处理器可以根据待下发消息携带的属性信息，匹配到待下发消息对应的信息等级，完成等级划分。步骤206、根据各信息等级对应的频控阈值，确定各待下发消息的频控状态。频控阈值指的是服务端在一定时间内接收到的某一客户端发出的消息数量。频控状态指的可以是待下发消息对应的客户端在一定时间内向服务端发出的消息数量达到频控阈值或未达到频控阈值。服务端可以基于以下因素设置客户端的频控阈值：用户身份：服务端可能会根据用户的身份来设置频控阈值。例如，对于普通用户和高级用户，服务端可以设置不同的频控阈值。请求类型：服务端也可以根据请求类型来设置频控阈值。例如，对于某些需要处理大量数据的请求，服务端可以设置较低的频控阈值。系统负载：服务端还可以根据系统负载情况来动态地调整频控阈值。如果服务端发现系统负载过高，就可以将频控阈值调高，以减轻服务器的压力。业务需求：服务端还可以根据业务需求来设置频控阈值。例如，对于某些在线游戏或实时交易等业务，服务端需要保证低延迟和高吞吐量，因此需要设置较高的频控阈值。安全策略：服务端还可以根据安全策略来设置频控阈值。例如，为了防止恶意攻击或磁盘操作系统攻击等安全问题，服务端需要设置较高的频控阈值。综上，服务端可以基于用户身份、请求类型、系统负载、业务需求和安全策略等因素来设置客户端的频控阈值，以保证系统的稳定性，提高响应速度，并防止安全问题。本实施例中，处理器可以通过为不同信息等级设置不同的频控阈值，来调控处理优先级不同、重要度不同的待下发消息的频控状态。步骤208、根据频控状态和各信息等级对应的延迟值阈值，对待下发消息进行下发处理。延迟值指的是消息在传递过程中所消耗的时间，各信息等级预先设置对应的延迟值阈值，可以进一步区分同一信息等级的待下发消息的下发优先级或下发顺序。作为示例，处理器还可以设置各信息等级的延迟值范围，用以更精准的限定各信息等级对应的信息的延迟时长是指信息从客户端发出到服务端接收的时间间隔。这个时间间隔可能涉及到多种因素，包括以下几点：信道传输延迟：当信息在传输过程中，信道传播所需的时间会被称为传输延迟。这个延迟通常由电磁波或者其他媒介的传播速度决定。网络拥塞：如果网络负载很大，信息需要等待其他信息完成传输才能成功传输，这就成为了网络拥塞，这个因素也会导致信息延迟。服务端处理时间：在信息到达服务端之后，如果服务端需要对信息进行处理或解码，那么这个处理时间就会成为延迟因素之一；客户端和服务端之间的距离:物理距离也会影响信息传输的延迟，因为信息需要经过一段时间才能以光速传播到达目标，所以较远的距离会带来更高的延迟。综上，信息的延迟时长可以由多种因素造成，其中最主要的因素是信道传输延迟、网络拥塞、接收方处理时间和物理距离等。本实施例中，处理器可以根据待下发消息的频控状态以及各个待下发消息所在信息等级对应的延迟值阈值，进一步细分各信息等级的待下发消息的下发顺序。上述消息处理方法中，处理器可以获取待下发消息的属性信息，并根据预先设置的至少一个信息等级，按照属性信息将各待下发消息进行消息分层，通过该种方式，能够将大量待下发消息进行处理优先级、重要度的区分，进一步地，处理器为各信息等级分别设置了不同的频控阈值，实现了处理优先级不同、重要度不同的待下发消息的频控状态的区别调控，在此基础上，处理器还为各信息等级分别设置了不同的延迟值阈值，处理器最终通过各待下发消息调控后的频控状态和所在信息等级对应的延迟值阈值，对待下发消息进行下发处理。通过上述设置，实现了不同处理优先级、不同重要度的消息的先后分层，在海量消息中能快速区分出重要度较高的消息，并保障重要消息的下发，缓解了服务器的高并发压力、保障了服务器的平稳运行。如图3所示，在一些可选的实施例中，属性信息包括业务类型信息；信息等级与至少一种业务类型信息对应；步骤204包括：步骤204a、根据业务类型信息，匹配到各待下发消息对应的信息等级。业务类型信息指的是待下发消息实际要执行的动作类型，例如，在直播场景中，待下发消息可以包括直播送礼物业务、主播消息业务、普通观众发言业务。作为示例，处理器预先设置了三个消息等级①、②、③，消息等级①对应直播送礼物业务，消息等级②对应主播消息业务，消息等级③对应普通观众发言业务，则当处理器面对三个待下发消息A、B、C，且待下发消息A属性信息中的业务类型信息为主播消息业务，待下发消息B属性信息中的业务类型信息为直播送礼物业务，待下发消息C属性信息中的业务类型信息为普通观众发言业务，则处理器可以匹配到待下发消息A的信息等级为②，待下发消息B的信息等级为①，待下发消息C的信息等级为③。进一步地，属性信息还可以包括业务类型信息、消息发送时间、该待下发消息对应的客户端的信息；各信息等级还可以分别对应至少一种业务类型信息、至少一个消息发送时间段、至少一个客户端。则步骤204还可以包括：根据业务类型、消息发送时间、该待下发消息对应的客户端的信息以及各信息等级还可以对应的至少一种业务类型信息、至少一个消息发送时间段、至少一个客户端，匹配到各待下发消息对应的信息等级。如图4所示，在一些可选的实施例中，在步骤206之前，包括：步骤205、获取各待下发消息对应发起方的实时频控信息；步骤206包括：步骤206a、根据各待下发消息对应发起方的实时频控信息和待下发消息所在消息等级对应的频控阈值，确定各待下发消息的频控状态。实时频控信息指的是客户端在一定时间内向服务端发出的消息数量。待下发消息对应的发起方即为客户端，则处理器获取各待下发消息的消息发送时间，进一步获取待下发消息对应的客户方在该消息发送时间往前一定时间内向服务端发出的消息数量，作为实时频控信息。随后将实时频控信息和当前待下发消息所在信息等级对应的频控阈值进行比对，确定待下发消息的频控状态。其中，根据各待下发消息对应发起方的实时频控信息和待下发消息所在消息等级对应的频控阈值，确定各待下发消息的频控状态的步骤具体包括：当待下发消息对应发起方的实时频控信息达到待下发消息所在信息等级对应的频控阈值时，将达到频控阈值作为待下发消息的频控状态；当待下发消息对应发起方的实时频控信息未达到待下发消息所在信息等级对应的频控阈值时，将未达到频控阈值作为待下发消息的频控状态。如图5所示，在一些可选的实施例中，步骤208包括：步骤2082、当待下发消息的频控状态为未达到频控阈值时，对待下发消息进行下发处理；步骤2084、当待下发消息的频控状态为达到频控阈值时，获取待下发消息的实际延迟值；步骤2086、当实际延迟值未达到待下发消息所在信息等级对应的延迟值阈值时，对待下发消息进行下发处理。不同消息等级对应的频控阈值可以不同，不同消息等级对应的延迟值阈值也可以不同，例如，按照消息等级实际对应的处理优先级、重要度依次下降的顺序，设置依次降低的频控阈值和延迟值阈值，频控阈值越高，待下发消息越容易达不到频控阈值，则越容易被处理器下发，延迟指阈值越高，待下发消息的实际延迟值越不容易达到所在信息等级对应的延迟值阈值，则频控状态为达到频控阈值的待下发消息越容易被处理器下发，通过上述设置，实现了处理优先级靠前、重要度较高的待下发消息的优先下发，处理优先级最高、重要度最高的消息等级中的待下发消息的下发触达率最高，处理优先级最低、重要度最低的消息等级中的待下发消息的下发触达率最低。在步骤208中，处理器可以将待下发消息发送给处于同一房间内的、除发出待下发消息的客户端外的所有客户端。其中，同一房间内指的可以是与同一服务器建立连接、且携带有同一房间标签的客户端，房间标签用于唯一标识网络环境或访问网址。在一些可选的实施例中，消息处理方法还包括：当实际延迟值达到待下发消息所在信息等级对应的延迟值阈值时，丢弃待下发消息。在一些可选的实施例中，还可以为不同的消息等级增加ack机制，处理器可以预先设置一批高价值的用户作为ack用户，这些用户所在客户端在收到存在ack机制的消息等级中的消息时，会立即回复服务端已收到。服务端会定时检测，对收到存在ack机制的消息等级中的消息、却没有回复ack的客户端进行消息重发。其中，服务端下发的每条消息都有唯一的消息标识，客户端会基于消息标识做幂等。上述消息处理方法中，能够按照不同的属性信息将各待下发消息进行细化消息分层，通过该种方式将大量待下发消息进行处理优先级、重要度的区分，并进一步为各信息等级分别设置了不同的频控阈值，实现了处理优先级不同、重要度不同的待下发消息的频控状态的区别调控，在此基础上，为各信息等级分别设置不同的延迟值阈值，能够在每个信息等级的处理优先级的基础上，将每个信息等级中的频控状态为未达到频控阈值的待下发消息最优先下发，将频控状态为达到频控阈值、但实际延迟值未达到延迟值阈值的待下发消息延后下发，将频控状态为达到频控阈值、但实际延迟值未达到延迟值阈值直接丢弃，从而实现消息的多层细化分级。应该理解的是，虽然如上的各实施例所涉及的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，如上的各实施例所涉及的流程图中的至少一部分步骤可以包括多个步骤或者多个阶段，这些步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤中的步骤或者阶段的至少一部分轮流或者交替地执行。基于同样的发明构思，本申请实施例还提供了一种用于实现上述所涉及的消息处理方法的消息处理装置。该装置所提供的解决问题的实现方案与上述方法中所记载的实现方案相似，故下面所提供的一个或多个消息处理装置实施例中的具体限定可以参见上文中对于消息处理方法的限定，在此不再赘述。在一个实施例中，如图6所示，提供了一种消息处理装置500，包括：第一获取模块502、划分模块504、确定模块506和下发模块508，其中：第一获取模块502用于获取待下发消息的属性信息；划分模块504用于根据属性信息和预先设置的信息等级，对待下发消息进行等级划分；确定模块506用于根据各信息等级对应的频控阈值，确定各待下发消息的频控状态；下发模块508用于根据频控状态和各信息等级对应的延迟值阈值，对待下发消息进行下发处理。在一些可选的实施例中，属性信息包括业务类型信息；信息等级与至少一种业务类型信息对应；划分模块504还被配置为：根据业务类型信息，匹配到各待下发消息对应的信息等级。如图7所示，在一些可选的实施例中，消息处理装置500还包括：第二获取模块505，用于获取各待下发消息对应发起方的实时频控信息；确定模块506还被配置为：根据各待下发消息对应发起方的实时频控信息和待下发消息所在消息等级对应的频控阈值，确定各待下发消息的频控状态。在一些可选的实施例中，确定模块506被配置为：当待下发消息对应发起方的实时频控信息达到待下发消息所在信息等级对应的频控阈值时，将达到频控阈值作为待下发消息的频控状态；当待下发消息对应发起方的实时频控信息未达到待下发消息所在信息等级对应的频控阈值时，将未达到频控阈值作为待下发消息的频控状态。如图8所示，在一些可选的实施例中，下发模块508包括：第一下达单元5082，用于当待下发消息的频控状态为未达到频控阈值时，对待下发消息进行下发处理；获取单元5084，用于当待下发消息的频控状态为达到频控阈值时，获取待下发消息的实际延迟值；第二下发单元5086，用于当实际延迟值未达到待下发消息所在信息等级对应的延迟值阈值时，对待下发消息进行下发处理。上述消息处理装置中的各个模块可全部或部分通过软件、硬件及其组合来实现。上述各模块可以硬件形式内嵌于或独立于计算机设备中的处理器中，也可以以软件形式存储于计算机设备中的存储器中，以便于处理器调用执行以上各个模块对应的操作。在一个实施例中，提供了一种计算机设备，该计算机设备可以是终端，其内部结构图可以如图9所示。该计算机设备包括处理器、存储器、输入/输出接口、通信接口、显示单元和输入装置。其中，处理器、存储器和输入/输出接口通过系统总线连接，通信接口、显示单元和输入装置通过输入/输出接口连接到系统总线。其中，该计算机设备的处理器用于提供计算和控制能力。该计算机设备的存储器包括非易失性存储介质和内存储器。该非易失性存储介质存储有操作系统和计算机程序。该内存储器为非易失性存储介质中的操作系统和计算机程序的运行提供环境。该计算机设备的输入/输出接口用于处理器与外部设备之间交换信息。该计算机设备的通信接口用于与外部的终端进行有线或无线方式的通信，无线方式可通过WIFI、移动蜂窝网络、NFC或其他技术实现。该计算机程序被处理器执行时以实现一种消息处理方法。该计算机设备的显示单元用于形成视觉可见的画面，可以是显示屏、投影装置或虚拟现实成像装置。显示屏可以是液晶显示屏或者电子墨水显示屏，该计算机设备的输入装置可以是显示屏上覆盖的触摸层，也可以是计算机设备外壳上设置的按键、轨迹球或触控板，还可以是外接的键盘、触控板或鼠标等。本领域技术人员可以理解，图9中示出的结构，仅仅是与本申请方案相关的部分结构的框图，并不构成对本申请方案所应用于其上的计算机设备的限定，具体的计算机设备可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。在一个实施例中，提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现上述消息处理方法的各个步骤。在一个实施例中，提供了一种计算机程序产品，包括计算机程序，该计算机程序产品被处理器执行时实现上述消息处理方法的各个步骤。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一非易失性计算机可读取存储介质中，该计算机程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、数据库或其它介质的任何引用，均可包括非易失性和易失性存储器中的至少一种。非易失性存储器可包括只读存储器、磁带、软盘、闪存、光存储器、高密度嵌入式非易失性存储器、阻变存储器、磁变存储器、铁电存储器、相变存储器、石墨烯存储器等。易失性存储器可包括随机存取存储器或外部高速缓冲存储器等。作为说明而非局限，RAM可以是多种形式，比如静态随机存取存储器或动态随机存取存储器等。本申请所提供的各实施例中所涉及的数据库可包括关系型数据库和非关系型数据库中至少一种。非关系型数据库可包括基于区块链的分布式数据库等，不限于此。本申请所提供的各实施例中所涉及的处理器可为通用处理器、中央处理器、图形处理器、数字信号处理器、可编程逻辑器、基于量子计算的数据处理逻辑器等，不限于此。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对本申请专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请的保护范围应以所附权利要求为准。
