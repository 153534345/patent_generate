标题title
一种批量文件上传的方法、装置、设备及可读存储介质
摘要abst
本申请公开了一种批量文件上传的方法、装置、设备及可读存储介质，方法包括：响应上传批量文件的指令，判断文件上传目录下是否标识文件，若否，将批量文件上传至数据上传系统，若是，判断标识文件的id与本地id是否不匹配，创建时间在标识文件之后的文件量是否大于预设数量，最近创建文件的时间是否超过预设时间阈值，若均是，删除在标识文件的创建时间之后的所有文件与标识文件，并将批量文件上传至数据上传系统。可见，根据标识文件的信息，确定文件上传目录是否为当前客户端对应的文件目录，并根据该目录下的文件的状态，处理该目录下的文件，保证仅允许一个客户端上传文件，并保证批量文件完整地上传。
权利要求书clms
1.一种批量文件上传的方法，其特征在于，应用于客户端，包括：响应上传多个批量文件的指令，判断数据上传系统的文件上传目录下是否存在第一指示文件；若否，建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统；若是，判断第一条件、第二条件和第三条件是否同时成立，所述第一条件为所述第一指示文件的id与本地id不匹配，所述第二条件为所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的文件的数量大于预设数量，所述第三条件为所述文件上传目录下，最近创建的文件的时间距离当前时间的时间差，超过预设时间阈值；若同时成立，删除所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的所有文件，与所述第一指示文件，并建立与所述数据上传系统的传输通道，将所述多个批量文件上传至所述数据上传系统。2.根据权利要求1所述的方法，其特征在于，还包括：若所述第一条件不成立，将所述多个批量文件上传至所述数据上传系统。3.根据权利要求1所述的方法，其特征在于，还包括：若所述第一条件和所述第三条件均成立，且所述第二条件不成立，删除所述第一指示文件，建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统。4.根据权利要求1-3任一项所述的方法，其特征在于，还包括：当所述第一条件成立且所述第三条件不成立时，拒绝上传所述多个批量文件。5.根据权利要求1或3所述的方法，其特征在于，将所述多个批量文件上传至所述数据上传系统，包括：在开始向所述数据上传系统上传所述多个批量文件中的每个批量文件时，在所述文件上传目录下创建与本地id对应的第二指示文件；在上传每个批量文件至所述数据上传系统后，判断所述文件上传目录下是否含有元信息文件；若否，在所述文件上传目录下创建元信息文件，并删除所述第二指示文件；若是，更新所述元信息文件，得到新的元信息文件并删除所述第二指示文件。6.根据权利要求5所述的方法，其特征在于，在所述文件上传目录下创建与本地id对应的第二指示文件之后，还包括：若在所述文件上传目录下，创建时间在所述第二指示文件的创建时间之后的文件的数量不大于所述预设数量，则将每个批量文件中的各个文件，逐一上传至所述第二指示文件的下方，以上传该批量文件。7.根据权利要求5所述的方法，其特征在于，在所述文件上传目录下创建元信息文件，包括：在所述文件上传目录下的最近上传的批量文件的下方，以当前时间作为创建时间，创建元信息文件。8.根据权利要求5所述的方法，其特征在于，更新所述元信息文件，得到新的元信息文件，包括：删除所述文件上传目录下的元信息文件；在所述文件上传目录下的最近上传的批量文件的下方，以当前时间作为创建时间，创建元信息文件。9.根据权利要求5所述的方法，其特征在于，还包括：在上传所述多个批量文件的过程中，检查当前所述文件上传目录下的元信息文件的创建时间；周期性地访问在所述文件上传目录下的元信息文件的创建时间之前的所有文件，直至完成上传各个批量文件后，对当前所述文件上传目录下的元信息文件的创建时间之前的所有文件访问成功，确定各个批量文件上传成功。10.根据权利要求5所述的方法，其特征在于，还包括：在上传所述多个批量文件的过程中，确定所述文件上传目录下，在所述元信息文件的创建时间之前的所有文件；判断对在所述元信息文件的创建时间之前的所有文件的访问是否成功；若访问不成功，显示上传文件不完整的提示信息。11.一种批量文件上传的装置，其特征在于，包括：第一指示文件判断单元，用于响应上传多个批量文件的指令，判断数据上传系统的文件上传目录下是否存在第一指示文件，若否，执行第一文件上传单元，若是，执行三条件判断单元；第一文件上传单元，用于建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统；三条件判断单元，用于判断第一条件、第二条件和第三条件是否同时成立，所述第一条件为所述第一指示文件的id与本地id不匹配，所述第二条件为所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的文件的数量大于预设数量，所述第三条件为所述文件上传目录下，最近创建的文件的时间距离当前时间的时间差，超过预设时间阈值，若同时成立，执行第二文件上传单元；第一指示文件删除单元，用于删除所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的所有文件，与所述第一指示文件；第二文件上传单元，用于建立与所述数据上传系统的传输通道，将所述多个批量文件上传至所述数据上传系统。12.一种批量文件上传的设备，其特征在于，包括存储器和处理器；所述存储器，用于存储程序；所述处理器，用于执行所述程序，实现如权利要求1-10任一项的批量文件上传的方法的各个步骤。13.一种可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时，实现如权利要求1-10任一项的批量文件上传的方法的各个步骤。
说明书desc
技术领域本申请涉及数据传输领域，更具体的说，是涉及一种批量文件上传的方法、装置、设备及可读存储介质。背景技术随着智能化技术的发展，无人驾驶已大量展开研究并逐步投入到现实生活中，在无人操控车辆行驶过程中，对行驶安全的要求非常严格，需实时严谨地监控周边环境，每趟无人驾驶结束后，得到大量监控数据，需要把监控到的数据以文件的形式，通过数据上传系统上传至数据中心。由于数据上传系统需要获取多个客户端的上传文件，而每个客户端的上传文件的文件量巨大，在分布式上传的模式下单个客户端的上传文件的上传速度低下，且由于多个客户端并行上传会频繁访问到文件上传目录，容易造成一个客户端中断另一个客户端的上传文件过程，导致上传的文件不完整。通过上传前检查文件上传目录下的文件信息，保证仅允许一个客户端上传文件，使文件完整地上传。发明内容鉴于上述问题，提出了本申请以便提供一种批量文件上传的方法、装置、设备及可读存储介质，以高效、完整地上传批量文件。为了实现上述目的，现提出具体方案如下：一种批量文件上传的方法，包括：响应上传多个批量文件的指令，判断数据上传系统的文件上传目录下是否存在第一指示文件；若否，建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统；若是，判断第一条件、第二条件和第三条件是否同时成立，所述第一条件为所述第一指示文件的id与本地id不匹配，所述第二条件为所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的文件的数量大于预设数量，所述第三条件为所述文件上传目录下，最近创建的文件的时间距离当前时间的时间差，超过预设时间阈值；若同时成立，删除所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的所有文件，与所述第一指示文件，并建立与所述数据上传系统的传输通道，将所述多个批量文件上传至所述数据上传系统。可选的，该方法还包括：若所述第一条件不成立，将所述多个批量文件上传至所述数据上传系统。可选的，该方法还包括：若所述第一条件和所述第三条件均成立，且所述第二条件不成立，删除所述第一指示文件，建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统。可选的，该方法还包括：当所述第一条件成立且所述第三条件不成立时，拒绝上传所述多个批量文件。可选的，将所述多个批量文件上传至所述数据上传系统，包括：在开始向所述数据上传系统上传所述多个批量文件中的每个批量文件时，在所述文件上传目录下创建与本地id对应的第二指示文件；在上传每个批量文件至所述数据上传系统后，判断所述文件上传目录下是否含有元信息文件；若否，在所述文件上传目录下创建元信息文件，并删除所述第二指示文件；若是，更新所述元信息文件，得到新的元信息文件并删除所述第二指示文件。可选的，在所述文件上传目录下创建与本地id对应的第二指示文件之后，还包括：若在所述文件上传目录下，创建时间在所述第二指示文件的创建时间之后的文件的数量不大于所述预设数量，则将每个批量文件中的各个文件，逐一上传至所述第二指示文件的下方，以上传该批量文件。可选的，在所述文件上传目录下创建元信息文件，包括：在所述文件上传目录下的最近上传的批量文件的下方，以当前时间作为创建时间，创建元信息文件。可选的，更新所述元信息文件，得到新的元信息文件，包括：删除所述文件上传目录下的元信息文件；在所述文件上传目录下的最近上传的批量文件的下方，以当前时间作为创建时间，创建元信息文件。可选的，该方法还包括：在上传所述多个批量文件的过程中，检查当前所述文件上传目录下的元信息文件的创建时间；周期性地访问在所述文件上传目录下的元信息文件的创建时间之前的所有文件，直至完成上传各个批量文件后，对当前所述文件上传目录下的元信息文件的创建时间之前的所有文件访问成功，确定各个批量文件上传成功。可选的，该方法还包括：在上传所述多个批量文件的过程中，确定所述文件上传目录下，在所述元信息文件的创建时间之前的所有文件；判断对在所述元信息文件的创建时间之前的所有文件的访问是否成功；若访问不成功，显示上传文件不完整的提示信息。一种批量文件上传的装置，包括：第一指示文件判断单元，用于响应上传多个批量文件的指令，判断数据上传系统的文件上传目录下是否存在第一指示文件，若否，执行第一文件上传单元，若是，执行三条件判断单元；第一文件上传单元，用于建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统；三条件判断单元，用于判断第一条件、第二条件和第三条件是否同时成立，所述第一条件为所述第一指示文件的id与本地id不匹配，所述第二条件为所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的文件的数量大于预设数量，所述第三条件为所述文件上传目录下，最近创建的文件的时间距离当前时间的时间差，超过预设时间阈值，若同时成立，执行第二文件上传单元；第一指示文件删除单元，用于删除所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的所有文件，与所述第一指示文件；第二文件上传单元，用于建立与所述数据上传系统的传输通道，将所述多个批量文件上传至所述数据上传系统。可选的，该装置还包括：继续上传单元，用于若所述第一条件不成立，将所述多个批量文件上传至所述数据上传系统。可选的，该装置还包括：第一指示文件清理单元，用于若所述第一条件和所述第三条件均成立，且所述第二条件不成立，删除所述第一指示文件；第三文件上传单元，用于建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统。可选的，该装置还包括：拒绝上传单元，用于当所述第一条件成立且所述第三条件不成立时，拒绝上传所述多个批量文件。可选的，所述第一文件上传单元、所述第二文件上传单元或所述第三文件上传单元，包括：第二指示文件创建单元，用于在开始向所述数据上传系统上传所述多个批量文件中的每个批量文件时，在所述文件上传目录下创建与本地id对应的第二指示文件；元信息文件判断单元，用于在上传每个批量文件至所述数据上传系统后，判断所述文件上传目录下是否含有元信息文件，若否，执行元信息文件创建单元，若是，执行元信息文件更新单元；元信息文件创建单元，用于在所述文件上传目录下创建元信息文件，并删除所述第二指示文件；元信息文件更新单元，用于更新所述元信息文件，得到新的元信息文件并删除所述第二指示文件。可选的，该装置还包括：批量文件上传单元，用于在所述第二指示文件创建单元于所述文件上传目录下创建与本地id对应的第二指示文件之后，若在所述文件上传目录下，创建时间在所述第二指示文件的创建时间之后的文件的数量不大于所述预设数量，则将每个批量文件中的各个文件，逐一上传至所述第二指示文件的下方，以上传该批量文件。可选的，所述元信息文件创建单元在所述文件上传目录下创建元信息文件，包括：所述元信息文件创建单元在所述文件上传目录下的最近上传的批量文件的下方，以当前时间作为创建时间，创建元信息文件。可选的，所述元信息文件更新单元，包括：第一元信息文件更新子单元，用于删除所述文件上传目录下的元信息文件；第二元信息文件更新子单元，用于在所述文件上传目录下的最近上传的批量文件的下方，以当前时间作为创建时间，创建元信息文件。可选的，该装置还包括：创建时间检查单元，用于在上传所述多个批量文件的过程中，检查当前所述文件上传目录下的元信息文件的创建时间；文件访问单元，用于周期性地访问在所述文件上传目录下的元信息文件的创建时间之前的所有文件，直至完成上传各个批量文件后，对当前所述文件上传目录下的元信息文件的创建时间之前的所有文件访问成功，确定各个批量文件上传成功。可选的，该装置还包括：历史上传文件确定单元，用于在上传所述多个批量文件的过程中，确定所述文件上传目录下，在所述元信息文件的创建时间之前的所有文件；访问失败提示单元，用于判断对在所述元信息文件的创建时间之前的所有文件的访问是否成功，若访问不成功，显示上传文件不完整的提示信息。一种批量文件上传的设备，包括存储器和处理器；所述存储器，用于存储程序；所述处理器，用于执行所述程序，实现上述的批量文件上传的方法的各个步骤。一种可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时，实现上述的批量文件上传的方法的各个步骤。借由上述技术方案，本申请通过响应上传多个批量文件的指令，判断数据上传系统的文件上传目录下是否存在第一指示文件，若否，建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统，若是，判断第一条件、第二条件和第三条件是否同时成立，所述第一条件为所述第一指示文件的id与本地id不匹配，所述第二条件为所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的文件的数量大于预设数量，所述第三条件为所述文件上传目录下，最近创建的文件的时间距离当前时间的时间差，超过预设时间阈值，若同时成立，删除所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的所有文件，与所述第一指示文件，并建立与所述数据上传系统的传输通道，将所述多个批量文件上传至所述数据上传系统。由此可见，根据文件上传目录下的第一指示文件的信息，确定该文件上传目录是否为当前客户端对应的文件目录，并根据文件上传目录下的文件的状态，处理文件上传目录下的文件，使得保证当前仅为本地一个客户端在上传批量文件，并保证批量文件完整地上传。附图说明通过阅读下文优选实施方式的详细描述，各种其他的优点和益处对于本领域普通技术人员将变得清楚明了。附图仅用于示出优选实施方式的目的，而并不认为是对本申请的限制。而且在整个附图中，用相同的参考符号表示相同的部件。在附图中：图1为本申请实施例提供的一种批量文件上传的流程示意图；图2为本申请实施例提供的一种布置元信息文件的流程示意图；图3为本申请实施例提供的一种批量文件上传的装置结构示意图；图4为本申请实施例提供的一种批量文件上传的设备的结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。本申请方案可以基于具备数据处理能力的终端实现，该终端可以是待上传文件的客户端。接下来，结合图1所述，本申请的批量文件上传的方法可以包括以下步骤：步骤S110、响应上传多个批量文件的指令，判断数据上传系统的文件上传目录下是否存在第一指示文件，若否，则执行步骤S120，若是，则执行步骤S130。具体的，指示文件可以表示数据上传系统正在接收客户端上传批量文件的标识文件，可以为.staging文件。每当用户需要上传多个批量文件时，客户端可以响应上传多个批量文件的指令，在数据上传系统的文件上传目录下查询是否存在指示文件，若存在指示文件，则可以表示当前存在客户端向数据上传系统上传批量文件，若不存在指示文件，则可以表示数据上传系统当前处于空闲状态，可以发起批量文件上传。步骤S120、建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统。可以理解的是，当数据上传系统的文件上传目录下不存在指示文件时，可以表示数据上传系统当前处于空闲状态，可以建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统。步骤S130、判断第一条件、第二条件和第三条件是否同时成立，若同时成立，则执行步骤S140。其中，所述第一条件为所述第一指示文件的id与本地id不匹配，所述第二条件为所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的文件的数量大于预设数量，所述第三条件为所述文件上传目录下，最近创建的文件的时间距离当前时间的时间差，超过预设时间阈值。具体的，指示文件中含有客户端的id，可以表示数据上传系统正在接收id对应的客户端的批量文件上传。预设数量可以表示创建时间在第一指示文件的创建时间之后的文件的最大正常数量，具体可以为0。预设时间阈值可以表示距离上一上传文件的最大正常间隔时间。可以理解的是，当数据上传系统的文件上传目录下存在指示文件时，数据上传系统当前正在接收客户端上传批量文件，因此需进一步参考该指示文件的id是否与本地id不匹配，最近创建文件数量的多少，以及最近创建文件的时间，以判断是否将所述多个批量文件上传至所述数据上传系统。步骤S140、删除所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的所有文件，与所述第一指示文件，并建立与所述数据上传系统的传输通道，将所述多个批量文件上传至所述数据上传系统。可以理解的是，当第一条件、第二条件和第三条件同时成立，则表示其他客户端的批量文件上传在第一指示文件创建时间之后出现了异常，数据上传系统会保留该客户端id对应的第一指示文件，和在该第一指示文件下方存在超过预设数量的文件，那么可以删除所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的所有文件，并删除所述第一指示文件。此时，数据上传系统中不存在指示文件，那么可以表示数据上传系统当前处于空闲状态，可以将所述多个批量文件上传至所述数据上传系统。本实施例提供的批量文件上传的方法，通过响应上传多个批量文件的指令，判断数据上传系统的文件上传目录下是否存在第一指示文件，若否，将所述多个批量文件上传至所述数据上传系统，若是，判断第一条件、第二条件和第三条件是否同时成立，所述第一条件为所述第一指示文件的id与本地id不匹配，所述第二条件为所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的文件的数量大于预设数量，所述第三条件为所述文件上传目录下，最近创建的文件的时间距离当前时间的时间差，超过预设时间阈值，若同时成立，删除所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的所有文件，与所述第一指示文件，并建立与所述数据上传系统的传输通道，将所述多个批量文件上传至所述数据上传系统。由此可见，根据文件上传目录下的第一指示文件的信息，确定该文件上传目录是否为当前客户端对应的文件目录，并根据文件上传目录下的文件的状态，处理文件上传目录下的文件，使得保证当前仅为本地一个客户端在上传批量文件，并保证批量文件完整地上传。本申请的一些实施例中，考虑到本地客户端上传过程中发生中断，但在数据上传系统的文件上传目录下的文件属于正常情况，可以继续上传，基于此，本申请提供的批量文件上传的方法，还可以包括以下过程：若所述第一条件不成立，将所述多个批量文件上传至所述数据上传系统。具体的，当第一指示文件的id与所述客户端的id匹配时，不需要删除第一指示文件，即可继续上传多个批量文件。本实施例提供的批量文件上传的方法，在所述第一条件成立时，接收所述客户端上传的多个批量文件，能够在文件上传目录下的文件属于正常情况下，不需要删除第一指示文件，即可继续上传多个批量文件，提高了文件上传和异常处理的效率。本申请的一些实施例中，考虑到其他客户端上传批量文件的过程中挂掉，阻塞了其他客户端上传文件，基于此，本申请提供的批量文件上传的方法，还可以包括以下过程：若所述第一条件和所述第三条件均成立，且所述第二条件不成立，删除所述第一指示文件，建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统。可以理解的是，当其他客户端上传文件过程中挂掉时，数据上传系统会保留该客户端id对应的第一指示文件，则需要将该客户端对应的第一指示文件都清理掉，使数据上传系统恢复空闲状态，使得本地客户端可以建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统。本实施例提供的批量文件上传的方法，在第一条件和第三条件均成立，且第二条件不成立时，将这个挂掉的客户端所对应的第一指示文件清理掉，使得数据上传系统恢复空闲状态，本地客户端可以将所述多个批量文件上传至所述数据上传系统，提高了异常处理的效率，保证了文件上传的完整性。本申请的一些实施例中，考虑到其他客户端正在进行正常批量文件上传，当前客户端需要等待或当前不能进行批量文件上传，基于此，本申请提供的批量文件上传的方法，还可以包括以下过程：当所述第一条件成立且所述第三条件不成立时，拒绝上传所述多个批量文件。可以理解的是，当第一指示文件的id与本地id不匹配时，可以表示数据上传系统当前正在接收其他客户端的批量文件上传。与此同时，若最近创建的文件的时间距离当前时间的时间差，也没有超过预设时间阈值，表示该客户端处于正常上传状态，那么数据上传系统则不允许异于该其他客户端的客户端文件上传，因此可以拒绝本地客户端上传所述多个批量文件。进一步的，本地客户端所需上传的多个批量文件，可以添加至文件上传就绪队列中，待数据上传系统中正在上传批量文件的客户端上传结束后，数据上传系统可以接收文件上传就绪队列中的首个客户端的批量文件。本实施例提供的批量文件上传的方法，当所述第一条件成立且所述第三条件不成立时，拒绝上传所述多个批量文件，能够保证仅允许一个客户端上传文件。本申请的一些实施例中，考虑到上传的批量文件较多，需要通过检查来确保所上传的批量文件的完整性，基于此，本申请提供的批量文件上传的方法，还可以包括布置元信息文件的过程，参照图2，该过程可以包括以下步骤：步骤S210、在开始向所述数据上传系统上传所述多个批量文件中的每个批量文件时，在所述文件上传目录下创建与本地id对应的第二指示文件。可以理解的是，指示文件表示数据上传系统正在接收客户端上传批量文件的标识文件，因此本地客户端在开始上传所述多个批量文件中的每个批量文件时，创建与本地客户端的id对应的第二指示文件，以示数据上传系统正在准备接收本地客户端上传批量文件。具体的，第二指示文件与所上传的批量文件中的各个文件可以处于同一目录下，因此，对于每个批量文件的上传位置可以以第二指示文件作为参考，每个批量文件中的各个文件在上传时，可以逐一上传于第二指示文件的下方，从而上传该批量文件。其中，在每个批量文件中的各个文件需要上传时，需要检查第二指示文件下方是否存在大于所述预设数量的文件。当在所述文件上传目录下，创建时间在所述第二指示文件的创建时间之后的文件的数量不大于所述预设数量时，则可以将每个批量文件中的各个文件，逐一上传至所述第二指示文件的下方，以上传该批量文件。步骤S220、在上传每个批量文件至所述数据上传系统后，判断所述文件上传目录下是否含有元信息文件，若否，则执行步骤S230，若是，则执行步骤S240。具体的，元信息文件可以表示已上传了至少一个批量文件的标识文件，因此，若文件上传目录下不含元信息文件，可以表示尚未完成首个批量文件的上传。步骤S230、在所述文件上传目录下创建元信息文件，并删除所述第二指示文件。具体的，可以在最近上传的批量文件的下方，以当前时间作为创建时间，创建元信息文件，那么在元信息文件创建时间之前的文件为已上传的批量文件。可以理解的是，当上传了当前批量文件后，文件上传目录下若没有用于标识上传了至少一个批量文件的元信息文件，则创建元信息文件，以示已上传了一个批量文件。步骤S240、更新所述元信息文件，得到新的元信息文件并删除所述第二指示文件。具体的，更新元信息文件，得到新的元信息文件的过程可以是先删除文件上传目录下的元信息文件，该元信息文件为上一个批量文件上传完成后创建的，然后在最近上传的批量文件的下方，以当前时间作为创建时间，创建元信息文件，使新的元信息文件覆盖旧的元信息文件。可以理解的是，当上传了当前批量文件后，文件上传目录下若存在用于标识上传了至少一个批量文件的元信息文件，可以表示当前批量文件为多个批量文件中的至少第二个批量文件，此时可以更新已存在于件上传目录下的元信息文件，得到新的元信息文件，删除所述第二指示文件可以表示当前批量文件已上传完毕。本实施例提供的批量文件上传的方法，通过元信息文件指示每一个批量文件的上传，有助于确保上传的批量文件的完整性。本申请的一些实施例中，考虑到上传的批量文件较多，需要通过检查来确保所上传的批量文件的完整性，基于此，本申请提供的批量文件上传的方法，还可以包括访问已上传文件的过程，该过程可以包括：S1、在上传所述多个批量文件的过程中，检查当前所述文件上传目录下的元信息文件的创建时间。可以理解的是，由于需要检查访问已上传的批量文件，元信息文件为每个批量文件上传结束后创建或更新的，因此在确定已上传的批量文件可以参考元信息文件的创建时间。S2、周期性地访问在所述文件上传目录下的元信息文件的创建时间之前的所有文件，直至上传各个批量文件后，对当前所述文件上传目录下的元信息文件的创建时间之前的所有文件访问成功，确定各个批量文件上传成功。具体的，在元信息文件的创建时间之前的所有文件为已上传的文件，本地客户端可以周期性地访问这些已上传的文件，当所有批量文件上传完毕后，仍能对在元信息文件的创建时间之前的所有文件访问成功，则可以确定各个批量文件上传成功。可以理解的是，由于访问的是已上传的文件，因此若当前有新的文件上传时，则不会访问到新的正在上传的文件。本实施例提供的批量文件上传的方法，通过周期性地访问已上传的文件，能够确保上传的批量文件的完整性。本申请的一些实施例中，考虑到批量文件上传异常，导致对历史上传文件访问失败，需要向用户或管理人员反馈异常消息基于此，本申请提供的批量文件上传的方法，还可以包括访问已上传文件的过程，该过程可以包括：S1、在上传所述多个批量文件的过程中，确定所述文件上传目录下，在所述元信息文件的创建时间之前的所有文件。具体的，可以检查当前所述文件上传目录下的元信息文件的创建时间，并基于这个元信息文件的创建时间，确定所述文件上传目录下，在所述元信息文件的创建时间之前的所有文件。S2、判断对在所述元信息文件的创建时间之前的所有文件的访问是否成功，若访问不成功，则显示上传文件不完整的提示信息。具体的，对历史上传文件访问失败的原因可以是意外跳过了对访问失败的文件的上传，仅上传了该访问失败的文件的基本信息，导致文件上传不完整，因此数据上传系统可以显示上传文件不完整的提示信息，以告知用户或管理人员。进一步地，在对所述元信息文件的创建时间之前的所有文件的访问不成功之后，可以进入批量文件上传挂起的状态，并可以从文件上传就绪队列中接收下一个客户端的所需上传的批量文件。本实施例提供的批量文件上传的方法，在对历史上传文件访问失败后，通过显示上传文件不完整的提示信息，及时向用户或管理人员反馈异常消息，优化了数据上传系统的用户交互性能。下面对本申请实施例提供的实现批量文件上传的装置进行描述，下文描述的实现批量文件上传的装置与上文描述的实现批量文件上传的方法可相互对应参照。参见图3，图3为本申请实施例公开的一种实现批量文件上传的装置结构示意图。如图3所示，该装置可以包括：第一指示文件判断单元11，用于响应上传多个批量文件的指令，判断数据上传系统的文件上传目录下是否存在第一指示文件，若否，执行第一文件上传单元，若是，执行三条件判断单元；第一文件上传单元12，用于建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统；三条件判断单元13，用于判断第一条件、第二条件和第三条件是否同时成立，所述第一条件为所述第一指示文件的id与本地id不匹配，所述第二条件为所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的文件的数量大于预设数量，所述第三条件为所述文件上传目录下，最近创建的文件的时间距离当前时间的时间差，超过预设时间阈值，若同时成立，执行第二文件上传单元；第一指示文件删除单元14，用于删除所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的所有文件，与所述第一指示文件；第二文件上传单元15，用于建立与所述数据上传系统的传输通道，将所述多个批量文件上传至所述数据上传系统。可选的，该装置还包括：继续上传单元，用于若所述第一条件不成立，将所述多个批量文件上传至所述数据上传系统。可选的，该装置还包括：第一指示文件清理单元，用于若所述第一条件和所述第三条件均成立，且所述第二条件不成立，删除所述第一指示文件；第三文件上传单元，用于建立与所述数据上传系统的传输通道，并将所述多个批量文件上传至所述数据上传系统。可选的，该装置还包括：拒绝上传单元，用于当所述第一条件成立且所述第三条件不成立时，拒绝上传所述多个批量文件。可选的，所述第一文件上传单元、所述第二文件上传单元或所述第三文件上传单元，包括：第二指示文件创建单元，用于在开始向所述数据上传系统上传所述多个批量文件中的每个批量文件时，在所述文件上传目录下创建与本地id对应的第二指示文件；元信息文件判断单元，用于在上传每个批量文件至所述数据上传系统后，判断所述文件上传目录下是否含有元信息文件，若否，执行元信息文件创建单元，若是，执行元信息文件更新单元；元信息文件创建单元，用于在所述文件上传目录下创建元信息文件，并删除所述第二指示文件；元信息文件更新单元，用于更新所述元信息文件，得到新的元信息文件并删除所述第二指示文件。可选的，该装置还包括：批量文件上传单元，用于在所述第二指示文件创建单元于所述文件上传目录下创建与本地id对应的第二指示文件之后，若在所述文件上传目录下，创建时间在所述第二指示文件的创建时间之后的文件的数量不大于所述预设数量，则将每个批量文件中的各个文件，逐一上传至所述第二指示文件的下方，以上传该批量文件。可选的，所述元信息文件创建单元在所述文件上传目录下创建元信息文件，包括：所述元信息文件创建单元在所述文件上传目录下的最近上传的批量文件的下方，以当前时间作为创建时间，创建元信息文件。可选的，所述元信息文件更新单元，包括：第一元信息文件更新子单元，用于删除所述文件上传目录下的元信息文件；第二元信息文件更新子单元，用于在所述文件上传目录下的最近上传的批量文件的下方，以当前时间作为创建时间，创建元信息文件。可选的，该装置还包括：创建时间检查单元，用于在上传所述多个批量文件的过程中，检查当前所述文件上传目录下的元信息文件的创建时间；文件访问单元，用于周期性地访问在所述文件上传目录下的元信息文件的创建时间之前的所有文件，直至完成上传各个批量文件后，对当前所述文件上传目录下的元信息文件的创建时间之前的所有文件访问成功，确定各个批量文件上传成功。可选的，该装置还包括：历史上传文件确定单元，用于在上传所述多个批量文件的过程中，确定所述文件上传目录下，在所述元信息文件的创建时间之前的所有文件；访问失败提示单元，用于判断对在所述元信息文件的创建时间之前的所有文件的访问是否成功，若访问不成功，显示上传文件不完整的提示信息。本申请实施例提供的批量文件上传的装置可应用于批量文件上传的设备，如终端：手机、电脑等。可选的，图4示出了批量文件上传的设备的硬件结构框图，参照图4，批量文件上传的设备的硬件结构可以包括：至少一个处理器1，至少一个通信接口2，至少一个存储器3和至少一个通信总线4；在本申请实施例中，处理器1、通信接口2、存储器3、通信总线4的数量为至少一个，且处理器1、通信接口2、存储器3通过通信总线4完成相互间的通信；处理器1可能是一个中央处理器CPU，或者是特定集成电路ASIC，或者是被配置成实施本发明实施例的一个或多个集成电路等；存储器3可能包含高速RAM存储器，也可能还包括非易失性存储器等，例如至少一个磁盘存储器；其中，存储器存储有程序，处理器可调用存储器存储的程序，所述程序用于：响应上传多个批量文件的指令，判断数据上传系统的文件上传目录下是否存在第一指示文件；若否，将所述多个批量文件上传至所述数据上传系统；若是，判断第一条件、第二条件和第三条件是否同时成立，所述第一条件为所述第一指示文件的id与本地id匹配，所述第二条件为所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的文件的数量大于预设数量，所述第三条件为所述文件上传目录下，最近创建的文件的时间距离当前时间的时间差，超过预设时间阈值；若同时成立，删除所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的所有文件，并删除所述第一指示文件，并将所述多个批量文件上传至所述数据上传系统。可选的，所述程序的细化功能和扩展功能可参照上文描述。本申请实施例还提供一种可读存储介质，该可读存储介质可存储有适于处理器执行的程序，所述程序用于：响应上传多个批量文件的指令，判断数据上传系统的文件上传目录下是否存在第一指示文件；若否，将所述多个批量文件上传至所述数据上传系统；若是，判断第一条件、第二条件和第三条件是否同时成立，所述第一条件为所述第一指示文件的id与本地id匹配，所述第二条件为所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的文件的数量大于预设数量，所述第三条件为所述文件上传目录下，最近创建的文件的时间距离当前时间的时间差，超过预设时间阈值；若同时成立，删除所述文件上传目录下，创建时间在所述第一指示文件的创建时间之后的所有文件，并删除所述第一指示文件，并将所述多个批量文件上传至所述数据上传系统。可选的，所述程序的细化功能和扩展功能可参照上文描述。最后，还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间可以根据需要进行组合，且相同相似部分互相参见即可。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本申请。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本申请的精神或范围的情况下，在其它实施例中实现。因此，本申请将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
