标题title
一种基于点对点内容分发网络的资源获取方法及系统
摘要abst
本申请提供了一种基于点对点内容分发网络的资源获取方法及系统，该方法应用于初始资源节点，方法包括：基于历史资源获取请求确定资源服务数据；响应于所述初始资源节点的带宽使用率超过预设阈值，根据所述资源服务数据确定热点资源；将所述热点资源的标识信息发送至资源节点管理器，以使得所述资源节点管理器将所述热点资源的标识信息转发至新增资源节点，并使得所述新增资源节点根据所述热点资源的标识信息获取所述热点资源。由此可见，本申请实施例在当前资源节点不能满足峰值带宽的情况下，将节点中的热点资源扩散至新增资源节点，由新增资源节点共同提供热点资源的请求服务，由此改善媒体资源的P2P分享效率。
权利要求书clms
1.一种基于点对点内容分发网络的资源获取方法，其特征在于，所述方法应用于初始资源节点，所述方法包括：基于历史资源获取请求确定资源服务数据；响应于所述初始资源节点的带宽使用率超过预设阈值，根据所述资源服务数据确定热点资源；将所述热点资源的标识信息发送至资源节点管理器，以使得所述资源节点管理器将所述热点资源的标识信息转发至新增资源节点，并使得所述新增资源节点根据所述热点资源的标识信息获取所述热点资源。2.根据权利要求1所述的方法，其特征在于，所述基于历史资源获取请求确定资源服务数据，包括：根据历史资源获取请求确定目标资源以及所述目标资源的标识信息；获取预设周期内所述目标资源对应的服务资源使用数据，所述服务资源使用数据包括：资源访问量占比数据以及资源带宽占用数据；关联所述目标资源的标识信息与所述目标资源对应的服务资源使用数据，以获得资源服务数据。3.根据权利要求2所述的方法，其特征在于，所述响应于所述初始资源节点的带宽使用率超过预设阈值，根据所述资源服务数据确定热点资源，包括：响应于所述初始资源节点的带宽使用率超过预设阈值，根据所述资源服务数据以及预设的热点条件确定所述热点资源；其中，所述预设的热点条件包括：所述资源访问量占比数据大于预设占比阈值以及所述资源带宽占用数据大于预设占用阈值。4.根据权利要求1所述的方法，其特征在于，所述热点资源包括多种码率的流媒体资源，所述热点资源以多层级目录文件的形式存储于所述初始资源节点中，所述热点资源的标识信息是根据所述热点资源的资源存储路径的信息摘要算法MD5值确定的。5.根据权利要求3所述的方法，其特征在于，所述方法还包括：接收所述资源节点管理器发送的所述热点资源的标识信息；向资源连接服务器发送所述热点资源的标识信息，并接收所述资源连接服务器基于所述热点资源的标识信息反馈的热点资源节点地址；根据所述热点资源的标识信息以及所述热点资源节点地址获取所述热点资源。6.根据权利要求5所述的方法，其特征在于，所述方法还包括：响应于所述热点资源的资源服务数据在预设时间段内不再满足所述预设的热点条件后，清理所述热点资源。7.根据权利要求1-6中的任一所述的方法，其特征在于，所述新增资源节点是所述资源节点管理器根据历史服务质量或资源服务需求从备选资源节点库中确定出来的，所述资源服务需求包括运营商服务需求以及服务资源地域需求。8.一种基于点对点内容分发网络的资源获取系统，其特征在于，所述系统包括：初始资源节点、资源节点管理器以及新增资源节点；其中，所述初始资源节点用于：基于历史资源获取请求确定资源服务数据；响应于所述初始资源节点的带宽使用率超过预设阈值，根据所述资源服务数据确定热点资源；将所述热点资源的标识信息发送至所述资源节点管理器；所述资源节点管理器用于：接收所述初始资源节点发送的所述热点资源的标识信息，并将所述热点资源的标识信息转发至所述新增资源节点，所述新增资源节点是所述资源节点管理器确定的；所述新增资源节点用于：根据所述热点资源的标识信息获取所述热点资源。9.根据权利要求8所述的系统，其特征在于，所述资源节点管理器用于：接收所述初始资源节点发送的所述热点资源的标识信息；根据历史服务质量或资源服务需求从备选资源节点库中确定所述新增资源节点，所述资源服务需求包括运营商服务需求以及服务资源地域需求；将所述热点资源的标识信息转发至所述新增资源节点，以使得所述新增资源节点根据所述热点资源的标识信息获取所述热点资源。10.根据权利要求8所述的系统，其特征在于，所述系统还包括：资源连接服务器，所述资源连接服务器分别与所述初始资源节点以及所述新增资源节点连接，所述资源连接服务器用于：接收所述新增资源节点发送的所述热点资源的标识信息；基于所述热点资源的标识信息确定所述初始资源节点，并将初始资源节点地址反馈至所述新增资源节点，以使得所述新增资源节点根据所述热点资源的标识信息以及所述初始资源节点地址获取所述热点资源，其中，所述初始资源节点中包括所述热点资源。
说明书desc
技术领域本申请涉及内容分发技术领域，尤其涉及一种基于点对点内容分发网络的资源获取方法及系统。背景技术点对点内容分发网络是以P2P技术为基础，通过挖掘利用电信边缘网络海量碎片化闲置资源而构建的低成本高品质内容分发网络服务，适用于媒体资源点播、直播、大文件下载等业务场景。参见图1，PCDN提供一部分资源节点，同时所有的用户端植入PCDN客户端，peer从资源连接服务器获得需要获取的资源列表，然后从seeder或者peer中获取对应资源，同时作为一个peer向其他peer提供已有资源，所有的seeder和peer都可以通过链接tracker来相互获取资源。现有的基于PCDN实现媒体资源点播技术在实际使用中存在如下问题，当某个首发的媒体资源可能对应多种分辨率的多个文件，上线初期大家都集中访问，此时如果简单的增加seeder来避免热点资源上线时压力过大，则因并非所有的资源都是热点，热点本身也不容易准确预测，如果单纯增加资源的seeder将会因体量过大而造成资源浪费，横向扩容的成本增加。发明内容有鉴于此，本申请提供了一种基于点对点内容分发网络的资源获取方法及系统，用以实现改善媒体资源的P2P分享效率。其技术方案如下：第一方面，本申请实施例提供了一种基于的资源获取方法，所述方法应用于初始资源节点，所述方法包括：基于历史资源获取请求确定资源服务数据；响应于所述初始资源节点的带宽使用率超过预设阈值，根据所述资源服务数据确定热点资源；将所述热点资源的标识信息发送至资源节点管理器，以使得所述资源节点管理器将所述热点资源的标识信息转发至新增资源节点，并使得所述新增资源节点根据所述热点资源的标识信息获取所述热点资源。可选的，所述基于历史资源获取请求确定资源服务数据，包括：根据历史资源获取请求确定目标资源以及所述目标资源的标识信息；获取预设周期内所述目标资源对应的服务资源使用数据，所述服务资源使用数据包括：资源访问量占比数据以及资源带宽占用数据；关联所述目标资源的标识信息与所述目标资源对应的服务资源使用数据，以获得资源服务数据。可选的，所述响应于所述初始资源节点的带宽使用率超过预设阈值，根据所述资源服务数据确定热点资源，包括：响应于所述初始资源节点的带宽使用率超过预设阈值，根据所述资源服务数据以及预设的热点条件确定所述热点资源；其中，所述预设的热点条件包括：所述资源访问量占比数据大于预设占比阈值以及所述资源带宽占用数据大于预设占用阈值。可选的，所述热点资源包括多种码率的流媒体资源，所述热点资源以多层级目录文件的形式存储于所述初始资源节点中，所述热点资源的标识信息是根据所述热点资源的资源存储路径的信息摘要算法MD5值确定的。可选的，所述方法还包括：接收所述资源节点管理器发送的所述热点资源的标识信息；向资源连接服务器发送所述热点资源的标识信息，并接收所述资源连接服务器基于所述热点资源的标识信息反馈的热点资源节点地址；根据所述热点资源的标识信息以及所述热点资源节点地址获取所述热点资源。可选的，所述方法还包括：响应于所述热点资源的资源服务数据在预设时间段内不再满足所述预设的热点条件后，清理所述热点资源。可选的，所述新增资源节点是所述资源节点管理器根据历史服务质量或资源服务需求从备选资源节点库中确定出来的，所述资源服务需求包括运营商服务需求以及服务资源地域需求。第二方面，本申请实施例提供了一种基于点对点内容分发网络的资源获取系统，所述系统包括：初始资源节点、资源节点管理器以及新增资源节点；其中，所述初始资源节点用于：基于历史资源获取请求确定资源服务数据；响应于所述初始资源节点的带宽使用率超过预设阈值，根据所述资源服务数据确定热点资源；将所述热点资源的标识信息发送至所述资源节点管理器；所述资源节点管理器用于：接收所述初始资源节点发送的所述热点资源的标识信息，并将所述热点资源的标识信息转发至所述新增资源节点，所述新增资源节点是所述资源节点管理器确定的；所述新增资源节点用于：根据所述热点资源的标识信息获取所述热点资源。可选的，所述资源节点管理器用于：接收所述初始资源节点发送的所述热点资源的标识信息；根据历史服务质量或资源服务需求从备选资源节点库中确定所述新增资源节点，所述资源服务需求包括运营商服务需求以及服务资源地域需求；将所述热点资源的标识信息转发至所述新增资源节点，以使得所述新增资源节点根据所述热点资源的标识信息获取所述热点资源。可选的，所述系统还包括：资源连接服务器，所述资源连接服务器分别与所述初始资源节点以及所述新增资源节点连接，所述资源连接服务器用于：接收所述新增资源节点发送的所述热点资源的标识信息；基于所述热点资源的标识信息确定所述初始资源节点，并将初始资源节点地址反馈至所述新增资源节点，以使得所述新增资源节点根据所述热点资源的标识信息以及所述初始资源节点地址获取所述热点资源，其中，所述初始资源节点中包括所述热点资源。上述技术方案具有如下有益效果：本申请实施例提供的一种基于点对点内容分发网络的资源获取方法，该方法应用于初始资源节点，该方法包括：基于历史资源获取请求确定资源服务数据；响应于所述初始资源节点的带宽使用率超过预设阈值，根据所述资源服务数据确定热点资源；将所述热点资源的标识信息发送至资源节点管理器，以使得所述资源节点管理器将所述热点资源的标识信息转发至新增资源节点，并使得所述新增资源节点根据所述热点资源的标识信息获取所述热点资源。由此可见，本申请实施例在当前资源节点不能满足峰值带宽的情况下，将节点中的热点资源扩散至新增资源节点，由新增资源节点共同提供热点资源的请求服务，由此改善媒体资源的P2P分享效率。本申请实施例还提供了与上述方法相对应的系统，具有与上述方法相同的有益效果。附图说明为更清楚地说明本实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请提供的一种现有的点对点内容分发网络资源服务框架示意图；图2为本申请实施例提供的一种基于点对点内容分发网络的资源获取方法的流程示意图；图3为本申请实施例提供的一种基于点对点内容分发网络的资源扩容前的示意图；图4为本申请实施例提供的一种基于点对点内容分发网络的资源扩容后的示意图；图5为本申请实施例提供的一种基于点对点内容分发网络的资源获取系统的结构示意图；图6为本申请实施例提供的又一种基于点对点内容分发网络的资源获取系统的结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。为了改善媒体资源的P2P分享效率，本申请实施例提供了一种基于PCDN的资源获取方法，请参阅图2，该方法应用于初始资源节点，初始资源节点可以是PCDN中的任意一个资源节点seeder，该方法可以包括：步骤S100：基于历史资源获取请求确定资源服务数据。历史资源获取请求可以是初始资源节点历史收到的来自客户端peer的各个资源请求，初始资源节点会统计和记录这些资源请求，并根据历史资源获取请求确定资源服务数据，资源服务数据是指初始资源节点中存储的各个资源占用本资源节点服务能力相关的数据。需要说明的是，客户端peer请求资源的方式具体有，客户端peer从资源连接服务器tracker获得需要获取的资源列表，然后向资源节点seeder请求相应的数据，客户端peer请求资源的方式可以参考现有技术，此处不赘述。在一种可选的实现方式中，步骤S100可以包括如下步骤：步骤S101：根据历史资源获取请求确定目标资源以及目标资源的标识信息。其中，历史资源获取请求包括历史请求的目标资源以及目标资源的标识信息，需要说明的是，目标资源的标识信息用于唯一标识该目标资源，标识信息可以根据资源存储路径的信息摘要算法MD5值确定的。步骤S102：获取预设周期内目标资源对应的服务资源使用数据，服务资源使用数据包括：资源访问量占比数据以及资源带宽占用数据。初始资源节点响应历史资源获取请求后均会相应的记录该请求对应的目标资源的相关信息，如目标资源的标识信息、目标资源的文件大小信息、目标资源的传输速率情况等。初始资源节点会获取预设周期内的目标资源对应的服务资源使用情况，包括如资源访问量占比数据以及资源带宽占用数据。需要说明的是，预设周期是技术人员按需进行设置的，作为选项，可以将预设周期设置为30秒。可以理解的是，资源访问量占比数据是指目标资源访问量占比初始资源节点所有资源访问量的数据，资源带宽占用数据是指传输目标资源占比初始资源节点总传输贷款的数据，服务资源使用情况由初始资源节点根据记录的相关信息。步骤S103：关联目标资源的标识信息与目标资源对应的服务资源使用数据，以获得资源服务数据。具体的，按照资源的标识信息关联对应的服务资源使用数据，由此使得每个资源与自身对应的服务资源使用数据一一对应，便于后续根据服务资源使用数据确定热点资源。步骤S200：响应于初始资源节点的带宽使用率超过预设阈值，根据资源服务数据确定热点资源。本申请实施例中，当初始资源节点的带宽使用率超过预设阈值时，根据资源服务数据确定热点资源。可以理解的是，当资源节点的带宽使用率超过预设阈值时，说明该资源节点中的某些资源数据在当前时间节点下被客户端请求密集。在一种可选的实现方式中，步骤S200可以包括：响应于初始资源节点的带宽使用率超过预设阈值，根据资源服务数据以及预设的热点条件确定所述热点资源；其中，预设的热点条件包括：资源访问量占比数据大于预设占比阈值以及资源带宽占用数据大于预设占用阈值。具体的，本申请实施例中通过资源服务数据以及预设的热点条件判断一个资源是否为热点资源，具体的，判断资源对应的资源访问量占比数据是否大于预设占比阈值以及判断资源带宽占用数据是否大于预设占用阈值，若二者均是，那么可以将该资源确定为热点资源。可以理解的是，本申请实施例中资源服务数据是按照预设周期进行统计的，相应的，对与热点资源的判断可以与预设周期同步，也可以按需进行设置，时间跨度应该大于预设周期，例如一分钟、两分钟等。在一种可选的实现方式中，本申请实施例中资源节点seeder中的资源数据可以按照多层级目录文件的形式存储。具体的，一个目标资源对应一个流媒体资源，一个流媒体资源中可以包括各种码率、各种分辨率的流媒体子资源，如：同一视频资源包括多种码率、多种分辨率的流媒体子资源，一个流媒体资源中的各个流媒体子资源可以使用如HLS或者备用资源节点的资源服务需求进行考量和选择。运营商服务需求为根据客户端的网络服务提供商ISP的统计进行选择，例如移动、联通、或电信，服务资源地域需求为根据客户端的地域分布的统计进行选择，例如华南、华中或华北。在一种可选的实现方式中，本申请实施例中当热点资源在热点资源的资源服务数据在预设时间段内不再满足预设的热点条件时，新增资源节点将热点资源进行清理。可以理解的是，热点资源是具备时效性的，当热点资源的热度低于阈值则进行扩容清理工作，让系统更加有弹性。下面通过图3和图4对本申请实施例中的热点资源扩容进行说明，图3示出PCDN在热点资源扩容前的连接示意图，初始资源节点与四个客户端peer连接，初始资源节点还与资源节点管理器seeder manager连接，初始资源节点以及客户端peer均与资源连接服务器tracker连接，由初始资源节点为客户端peer提供资源获取服务。图4示出PCDN在热点资源扩容后的连接示意图，当初始资源节点的带宽能力不足以满足需求后，初始资源节点将热点资源扩散至新增资源节点，由初始资源节点以及新增资源节点共同为客户端peer提供资源获取服务。需要说明的是，本申请不限制初始资源节点、新增资源节点、客户端、资源连接服务器以及资源节点管理器的数量。综上所述，本申请实施例提供了一种基于PCDN的资源获取方法，该方法应用于初始资源节点，该方式包括：基于历史资源获取请求确定资源服务数据；响应于所述初始资源节点的带宽使用率超过预设阈值，根据所述资源服务数据确定热点资源；将所述热点资源的标识信息发送至资源节点管理器，以使得所述资源节点管理器将所述热点资源的标识信息转发至新增资源节点，并使得所述新增资源节点根据所述热点资源的标识信息获取所述热点资源。由此可见，本申请实施例在当前资源节点不能满足峰值带宽的情况下，将节点中的热点资源扩散至新增资源节点，由新增资源节点共同提供热点资源的请求服务，由此改善媒体资源的P2P分享效率。与上述方法相对应，本申请实施例还提供了一种基于PCDN的资源获取系统，请参阅图5，示出了该系统的结构示意图，该系统可以包括：初始资源节点501、资源节点管理器502以及新增资源节点503，初始资源节点501与资源节点管理器502连接，资源节点管理器502与新增资源节点503连接；其中，初始资源节点501用于：基于历史资源获取请求确定资源服务数据；响应于初始资源节点的带宽使用率超过预设阈值，根据资源服务数据确定热点资源；将热点资源的标识信息发送至资源节点管理器；所述资源节点管理器502用于：接收所述初始资源节点发送的所述热点资源的标识信息，并将所述热点资源的标识信息转发至所述新增资源节点，所述新增资源节点是所述资源节点管理器确定的；所述新增资源节点503用于：根据所述热点资源的标识信息获取所述热点资源。在一种可选的实现方式中，资源节点管理器502具体用于：接收初始资源节点发送的热点资源的标识信息；根据历史服务质量或资源服务需求从备选资源节点库中确定新增资源节点，资源服务需求包括运营商服务需求以及服务资源地域需求；将热点资源的标识信息转发至新增资源节点，以使得新增资源节点根据热点资源的标识信息获取热点资源。在一种可选的实现方式中，参见图6所述系统还包括：资源连接服务器504，资源连接服务器分别与所述初始资源节点501以及所述新增资源节点503连接，资源连接服务器504用于：接收新增资源节点发送的热点资源的标识信息；基于热点资源的标识信息确定初始资源节点，并将初始资源节点地址反馈至新增资源节点，以使得新增资源节点根据热点资源的标识信息以及初始资源节点地址获取热点资源，其中，初始资源节点中包括热点资源。需要说明的是，本申请实施例提供的一种系统中各部分执行的步骤以及相关技术特征与申请实施例所提供方法相对应，系统部分的描述可以参见前述方法部分的实施例，此处不赘述。综上所述，本申请实施例提供了一种基于点对点内容分发网络的资源获取系统，所述系统包括：初始资源节点、资源节点管理器以及新增资源节点，初始资源节点与资源节点管理器连接，资源节点管理器与所述新增资源节点连接；其中，初始资源节点用于：基于历史资源获取请求确定资源服务数据；响应于初始资源节点的带宽使用率超过预设阈值，根据资源服务数据确定热点资源；将热点资源的标识信息发送至资源节点管理器；所述资源节点管理器用于：接收所述初始资源节点发送的所述热点资源的标识信息，并将所述热点资源的标识信息转发至所述新增资源节点，所述新增资源节点是所述资源节点管理器确定的；所述新增资源节点用于：根据所述热点资源的标识信息获取所述热点资源。由此可见，本申请实施例在当前资源节点不能满足峰值带宽的情况下，将节点中的热点资源扩散至新增资源节点，由新增资源节点共同提供热点资源的请求服务，由此改善媒体资源的P2P分享效率。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。本领域技术人员可以理解，图所示的流程图仅是本申请的实施方式可以在其中得以实现的一个示例，本申请实施方式的适用范围不受到该流程图任何方面的限制。在本申请所提供的几个实施例中，应该理解到，所揭露的方法、装置和设备，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些通信接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。所述功能如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本申请。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本申请的精神或范围的情况下，在其它实施例中实现。因此，本申请将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
