标题title
一种基于MESH技术的隧道实时通讯方法和系统
摘要abst
本发明公开了一种基于MESH技术的隧道实时通讯方法和系统，涉及网络通讯技术领域。其包括：对布设在隧道中的所有MESH节点进行编号、分组；在链路关联时，距离通讯设备B最近的子节点群选择该节点群中编号最大的子节点作为根节点，根节点接收该节点群所有子节点发出的广播并将广播信息比对后发送给通讯设备B；在信息传播时，关联的链路通过子节点群传播信息，子节点群中的每一个子节点将信息定向传播至下一个子节点群对应编号的子节点，直至到达根节点所在的子节点群。本发明通过MESH网络能在长隧道中实现信息的快速、无损传播。
权利要求书clms
1.一种基于MESH技术的隧道实时通讯方法，包括：通讯设备A广播链路请求包，通讯设备B接收到广播链路请求包后确认通讯设备A的接口状态并回复链路回应包，通讯设备A接收到链路回应包后确认通讯设备B的接口状态，并发送链路确认包，通讯设备A与通讯设备B的接口状态更新，链路关联；其特征在于，该方法还包括以下步骤：对布设在隧道中的所有MESH节点进行统一编号，按照编号顺序对所有MESH节点进行分组，将分为一组的MESH节点作为一个子节点群，及对所有子节点群进行编号；在链路关联时，距离通讯设备B最近的子节点群选择该节点群中编号最大的子节点作为根节点，根节点接收该节点群所有子节点发出的广播并将广播信息比对后发送给通讯设备B；在信息传播时，关联的链路通过子节点群传播信息，子节点群中的每一个子节点将信息定向传播至下一个子节点群对应编号的子节点，直至到达根节点所在的子节点群。2.如权利要求1所述的一种基于MESH技术的隧道实时通讯方法，其特征在于，所述对布设在隧道中的所有MESH节点进行统一编号，按照编号顺序对所有MESH节点进行分组，具体包括：对在隧道中呈线性排布的所有MESH节点，按照前后顺序进行编号；对于已经编号的MESH节点，从第一个MESH节点开始，每四个MESH节点编为一组。3.如权利要求1所述的一种基于MESH技术的隧道实时通讯方法，其特征在于，还包括：若检测到MESH网络中有新增或损坏的MESH节点时，对所有的MESH节点重新进行编码、分组。4.如权利要求1所述的一种基于MESH技术的隧道实时通讯方法，其特征在于，还包括：发送链路关联的请求后，若在10毫秒内未收到回复，则链路关联失败，通讯设备A不更新接口状态；否则链路关联成功，每3秒检测一次链路是否断开或更新。5.如权利要求1所述的一种基于MESH技术的隧道实时通讯方法，其特征在于，所述根节点接收该节点群所有子节点发出的广播并将广播信息比对后发送给通讯设备B，具体包括：根节点的通讯模块提取所有子节点发送的广播信息编码中对应比特位相同数据占比最大的数据，将提取的各比特位数据合并形成新的广播信息编码，及将新的广播信息编码发送给通讯设备B。6.如权利要求1所述的一种基于MESH技术的隧道实时通讯方法，其特征在于，所述子节点群中的每一个子节点将信息定向传播至下一个子节点群对应编号的子节点，具体包括：通讯设备将链路请求包广播至最近的子节点群时，该子节点群识别节点类型为通讯设备，不修改链路请求包中的传播方向信息，该子节点群两侧对应的子节点群均能够收到链路请求包；两侧的子节点群识别节点类型为MESH节点后，检测到链路请求包中的传播方向信息未初始化，将该子节点群的编号与上一个节点群的编号作比较后，修改链路请求包中的传播方向信息；后面的子节点群优先检测传播方向与子节点编号大小的变化是否一致，若一致则接收信息并广播。7.如权利要求6所述的一种基于MESH技术的隧道实时通讯方法，其特征在于，还包括：通讯设备B接收到链路请求包后，改变接口状态，不再接收其它请求包；通讯设备B接收到链路请求包后，对发射链路请求包的对应子节点群发射链路回应包，该子节点群接收到链路回应包的根节点使能信号后，该子节点群的编号最大的子节点状态更改为根节点，更新根节点使能信号、根节点编号以及传播方向。8.如权利要求6所述的一种基于MESH技术的隧道实时通讯方法，其特征在于，还包括：通讯设备A接收到链路回应包后，改变接口状态，不再接收其它请求包；通讯设备A接收到链路回应包后，对发射链路回应包的对应的子节点群发射链路确认包，该子节点群接收到链路确认包的根节点使能信号后，该子节点群的编号最大的子节点状态更改为根节点，更新根节点使能信号、根节点编号以及传播方向。9.如权利要求6所述的一种基于MESH技术的隧道实时通讯方法，其特征在于，还包括：通讯设备B接收到链路确认包后，接口状态更新，链路建立，链路中的两个根节点也随之确定。10.一种基于MESH技术的隧道实时通讯系统，包括：基础链路关联模块：通讯设备A广播链路请求包，通讯设备B接收到广播链路请求包后确认通讯设备A的接口状态并回复链路回应包，通讯设备A接收到链路回应包后确认通讯设备B的接口状态，并发送链路确认包，通讯设备A与通讯设备B的接口状态更新，链路关联；其特征在于，该系统还包括：编号模块，用于对布设在隧道中的所有MESH节点进行统一编号，按照编号顺序对所有MESH节点进行分组，将分为一组的MESH节点作为一个子节点群，及对所有子节点群进行编号；链路关联模块，用于在链路关联时，距离通讯设备B最近的子节点群选择该节点群中编号最大的子节点作为根节点，根节点接收该节点群所有子节点发出的广播并将广播信息比对后发送给通讯设备B；通讯模块，用于在信息传播时，关联的链路通过子节点群传播信息，子节点群中的每一个子节点将信息定向传播至下一个子节点群对应编号的子节点，直至到达根节点所在的子节点群。
说明书desc
技术领域本发明涉及网络通讯技术领域，特别涉及一种基于MESH技术的隧道实时通讯方法和系统。背景技术传统矿井通讯利用有限网络传输，最大的优势就是信息的传输稳定，抗干扰能力强，但布线难度大、施工周期长。因此基于可灵活部署、拓展性强且维护简单的无线网络正在成为主流。目前，两个通讯设备间通过无线网络通讯过程包括：两个通讯设备间的链路关联和信息通讯。其中，链路关联的一般方法为：通讯设备A广播链路请求包，通讯设备B接收到广播链路请求包后确认通讯设备A的接口状态并回复链路回应包，通讯设备A接收到链路回应包后确认通讯设备B的接口状态，并发送链路确认包，通讯设备A与通讯设备B的接口状态更新，链路关联；且在链路关联后就可以正常进行两个通讯设备间的信息通讯。但是，上述直传式的无线网络通讯过程不能达到在长隧道中实现信息的快速、无损传播的目的。发明内容基于上述背景技术中提出的直传式的无线网络通讯过程不能达到在长隧道中实现信息的快速、无损传播目的技术问题，本发明实施例提供了一种基于MESH技术的隧道实时通讯方法和系统。本发明实施例提供一种基于MESH技术的隧道实时通讯方法，包括：通讯设备A广播链路请求包，通讯设备B接收到广播链路请求包后确认通讯设备A的接口状态并回复链路回应包，通讯设备A接收到链路回应包后确认通讯设备B的接口状态，并发送链路确认包，通讯设备A与通讯设备B的接口状态更新，链路关联；还包括以下步骤：对布设在隧道中的所有MESH节点进行统一编号，按照编号顺序对所有MESH节点进行分组，将分为一组的MESH节点作为一个子节点群，及对所有子节点群进行编号；在链路关联时，距离通讯设备B最近的子节点群选择该节点群中编号最大的子节点作为根节点，根节点接收该节点群所有子节点发出的广播并将广播信息比对后发送给通讯设备B；在信息传播时，关联的链路通过子节点群传播信息，子节点群中的每一个子节点将信息定向传播至下一个子节点群对应编号的子节点，直至到达根节点所在的子节点群。进一步地，所述对布设在隧道中的所有MESH节点进行统一编号，按照编号顺序对所有MESH节点进行分组，具体包括：对在隧道中呈线性排布的所有MESH节点，按照前后顺序进行编号；对于已经编号的MESH节点，从第一个MESH节点开始，每四个MESH节点编为一组。较佳地，本发明实施例提供的一种基于MESH技术的隧道实时通讯方法，还包括：若检测到MESH网络中有新增或损坏的MESH节点时，对所有的MESH节点重新进行编码、分组。较佳地，本发明实施例提供的一种基于MESH技术的隧道实时通讯方法，还包括：发送链路关联的请求后，若在10毫秒内未收到回复，则链路关联失败，通讯设备A不更新接口状态；否则链路关联成功，每3秒检测一次链路是否断开或更新。进一步地，所述根节点接收该节点群所有子节点发出的广播并将广播信息比对后发送给通讯设备B，具体包括：根节点的通讯模块提取所有子节点发送的广播信息编码中对应比特位相同数据占比最大的数据，将提取的各比特位数据合并形成新的广播信息编码，及将新的广播信息编码发送给通讯设备B。优选地，所述子节点群中的每一个子节点将信息定向传播至下一个子节点群对应编号的子节点，具体包括：通讯设备将链路请求包广播至最近的子节点群时，该子节点群识别节点类型为通讯设备，不修改链路请求包中的传播方向信息，该子节点群两侧对应的子节点群均能够收到链路请求包；两侧的子节点群识别节点类型为MESH节点后，检测到链路请求包中的传播方向信息未初始化，将该子节点群的编号与上一个节点群的编号作比较后，修改链路请求包中的传播方向信息；后面的子节点群优先检测传播方向与子节点编号大小的变化是否一致，若一致则接收信息并广播。较佳地，本发明实施例提供的一种基于MESH技术的隧道实时通讯方法，还包括：通讯设备B接收到链路请求包后，改变接口状态，不再接收其它请求包；通讯设备B接收到链路请求包后，对发射链路请求包的对应子节点群发射链路回应包，该子节点群接收到链路回应包的根节点使能信号后，该子节点群的编号最大的子节点状态更改为根节点，更新根节点使能信号、根节点编号以及传播方向。较佳地，本发明实施例提供的一种基于MESH技术的隧道实时通讯方法，还包括：通讯设备A接收到链路回应包后，改变接口状态，不再接收其它请求包；通讯设备A接收到链路回应包后，对发射链路回应包的对应的子节点群发射链路确认包，该子节点群接收到链路确认包的根节点使能信号后，该子节点群的编号最大的子节点状态更改为根节点，更新根节点使能信号、根节点编号以及传播方向。较佳地，本发明实施例提供的一种基于MESH技术的隧道实时通讯方法，还包括：通讯设备B接收到链路确认包后，接口状态更新，链路建立，链路中的两个根节点也随之确定。一种基于MESH技术的隧道实时通讯系统，包括：基础链路关联模块：通讯设备A广播链路请求包，通讯设备B接收到广播链路请求包后确认通讯设备A的接口状态并回复链路回应包，通讯设备A接收到链路回应包后确认通讯设备B的接口状态，并发送链路确认包，通讯设备A与通讯设备B的接口状态更新，链路关联；编号模块，用于对布设在隧道中的所有MESH节点进行统一编号，按照编号顺序对所有MESH节点进行分组，将分为一组的MESH节点作为一个子节点群，及对所有子节点群进行编号；链路关联模块，用于在链路关联时，距离通讯设备B最近的子节点群选择该节点群中编号最大的子节点作为根节点，根节点接收该节点群所有子节点发出的广播并将广播信息比对后发送给通讯设备B；通讯模块，用于在信息传播时，关联的链路通过子节点群传播信息，子节点群中的每一个子节点将信息定向传播至下一个子节点群对应编号的子节点，直至到达根节点所在的子节点群。本发明实施例提供的上述基于MESH技术的隧道实时通讯方法和系统，与现有技术相比，其有益效果如下：本发明实施例中，在链路关联时，距离通讯设备B最近的子节点群选择该节点群中编号最大的子节点作为根节点，根节点接收该节点群所有子节点发出的广播并将广播信息比对后发送给通讯设备B；即通过根节点对信息的比对，大幅降低信息传播的误码率。同时，在信息传播时，关联的链路通过子节点群传播信息，子节点群中的每一个子节点将信息定向传播至下一个子节点群对应编号的子节点，直至到达根节点所在的子节点群；即通过引入mesh网络、并将mesh网络划分为多个子节点群，以子节点群定向向下一个子节点群传播的方式可以达到在长隧道中实现信息的快速、无损传播的目的。附图说明图1为一个实施例中提供的一种基于MESH技术的隧道实时通讯结构示意图；图2为一个实施例中提供的一种基于MESH技术的隧道实时通讯方法流程图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。目前，两个通讯设备之间的链路关联的一般通讯方法包括：通讯设备A广播链路请求包，通讯设备B接收到广播链路请求包后确认通讯设备A的接口状态并回复链路回应包，通讯设备A接收到链路回应包后确认通讯设备B的接口状态，并发送链路确认包，通讯设备A与通讯设备B的接口状态更新，链路关联。基于上述两个通讯设备之间的链路关联的一般通讯方法，参见图1～2，本发明实施例提供的一种基于MESH技术的隧道实时通讯方法，具体包括：1)节点在隧道中呈线性排布，按照顺序对所有节点进行编号；若检测到网络中有新增或损坏节点时，对所有的节点进行重新编码。2)对已经编号的节点进行分组，从第一个节点开始，每四个节点编为一组，构成一个节点群。3)关联的链路通过子节点群传播信息，节点群中的每一个子节点都发出广播给下一个节点群对应的子节点，直至到达根节点所在的节点群。链路中的根节点所在的节点群将信息发送至根节点，根节点进行信息的比对后，将信息发送至通讯设备，通过根节点对信息的比对，大幅降低信息传播的误码率，实现无损传输的目的。4)在链路关联时，通讯设备B附近的子节点群会选择该节点群中编号最大的子节点作为根节点，根节点接收该节点群所有子节点发出的广播并将信息比对后发送给通讯设备B。具体地，根节点的通讯模块提取所有子节点发送的广播信息编码中对应比特位相同数据占比最大的数据，将提取的各比特位数据合并形成新的广播信息编码，及将新的广播信息编码发送给通讯设备B，从而在软件层面实现针对链路噪声、串扰或发射导致误码的实时纠错，提高链路传输的可靠性。5)发送链路关联的请求后，若在10毫秒内未收到回复，则链路关联失败，通讯设备A不更新接口状态。在链路关联成功后，每3秒检测一次链路是否断开或更新。6)通讯设备B接收到链路请求包后，会改变接口状态，不再接收其它请求包。7)通讯设备B接收到链路请求包后，会对发射链路请求包的对应节点群发射链路回应包，该节点群接收到链路回应包的根节点使能信号后，该节点群的编号最大的节点状态更改为根节点，更新根节点使能信号、根节点编号以及传播方向。8)通讯设备A接收到链路回应包后，会改变接口状态，不再接收其它请求包。对发射链路回应包的对应的节点群发射链路确认包，该节点群接收到链路确认包的根节点使能信号后，该节点群的编号最大的节点状态更改为根节点，更新根节点使能信号、根节点编号以及传播方向。9)通讯设备B接收到链路确认包后，接口状态更新，链路建立，链路中的两个根节点也随之确定。需要说明的是，上述序号标记并不限定方法的执行顺序。对于上述4)，本发明实施例中提供了如下定性传播方法：41)通讯设备将链路请求包广播至最近的节点群时，该节点群识别节点类型为通讯设备，不修改链路请求包中的传播方向信息，该节点群两侧对应的节点群均可收到链路请求包。42)两侧的节点群识别节点类型为MESH节点后，检测到链路请求包中的传播方向信息未初始化，将本节点群的编号与上一个节点群的编号作比较后，修改链路请求包中的传播方向信息。43)后面的节点群会优先检测传播方向与节点编号大小的变化是否一致，若一致则接收信息并广播。确定传播方向后，每个节点广播的信息只能被与传播方向一致的节点接收，实现信息的单向传播。。其中，本发明实施例中，链路请求包包含当前设备接口信息、当前节点类型、当前节点编号、传播方向；链路回应包包括当前设备接口信息、根节点使能信号、根节点编号、当前节点编号、传播方向；链路确认包包括当前设备接口信息、根节点使能信号、根节点编号、当前节点编号、传播方向。基于同一发明构思，参见图1～2，本发明实施例还提供了一种基于MESH技术的隧道实时通讯系统，具体包括：基础链路关联模块：通讯设备A广播链路请求包，通讯设备B接收到广播链路请求包后确认通讯设备A的接口状态并回复链路回应包，通讯设备A接收到链路回应包后确认通讯设备B的接口状态，并发送链路确认包，通讯设备A与通讯设备B的接口状态更新，链路关联。编号模块，用于对布设在隧道中的所有MESH节点进行统一编号，按照编号顺序对所有MESH节点进行分组，将分为一组的MESH节点作为一个子节点群，及对所有子节点群进行编号。链路关联模块，用于在链路关联时，距离通讯设备B最近的子节点群选择该节点群中编号最大的子节点作为根节点，根节点接收该节点群所有子节点发出的广播并将广播信息比对后发送给通讯设备B。通讯模块，用于在信息传播时，关联的链路通过子节点群传播信息，子节点群中的每一个子节点将信息定向传播至下一个子节点群对应编号的子节点，直至到达根节点所在的子节点群。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请专利的保护范围应以所附权利要求为准。
