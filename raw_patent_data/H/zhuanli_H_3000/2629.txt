标题title
一种基于区块链的电子陪护证管理方法、装置及存储介质
摘要abst
本发明公开了一种基于区块链的电子陪护证管理方法、装置及存储介质；其中，所述方法包括：判断申请电子陪护证用户是否为定义的特殊人群；若否，接收录入的用户信息，基于接收到的用户信息生成第一哈希值并广播至区块链中；在区块链中将第一哈希值存储至各个节点的分布式账本；获得申请电子陪护证用户对应的患者院内数据；基于患者院内数据生成第二哈希值，判断是否满足智能合约预设的申请规则；若否时，驳回处理，将驳回信息广播至区块链中，并进行驳回信息推送；若是时，进行通过处理，并广播至区块链中；生成陪护证，进行陪护证的签发。在本发明实施例中，实现了陪护证的相关信息及所有流程记录的防篡改，保证数据可靠及可溯源。
权利要求书clms
1.一种基于区块链的电子陪护证管理方法，其特征在于，所述方法包括：判断申请电子陪护证用户是否为定义的特殊人群，所述特殊人群为无法使用智能终端的用户人群；若否，医护DAPP端接收所述申请电子陪护证用户基于用户DAPP端录入的用户信息，基于接收到的用户信息生成第一哈希值并广播至区块链中；在所述区块链中将所述第一哈希值存储至各个节点的分布式账本，所述节点包括全节点和轻节点；基于所述医护DAPP端基于智能合约程序调用医院陪护证后台管理系统的API接口获得院内HIS系统同步的所述申请电子陪护证用户对应的患者院内数据；基于所述患者院内数据生成第二哈希值，并利用所述第二哈希值与所述第一哈希值进行比对，判断是否满足智能合约预设的申请规则；若不满足智能合约预设的申请规则时，对所述申请电子陪护证用户的申请进行驳回处理，将驳回信息广播至所述区块链中，并基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行驳回信息推送；若满足智能合约预设的申请规则时，对所述申请电子陪护证用户的申请进行通过处理，并将通过信息广播至所述区块链中；所述医护DAPP端基于所述通过信息生成陪护证，并基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行所述陪护证的签发。2.根据权利要求1所述的电子陪护证管理方法，其特征在于，所述方法还包括：所述申请电子陪护证用户为定义的特殊人群时，由医护用户在所述医护DAPP端录入所述特殊人群对应的申请电子陪护证用户的用户信息，并且所述医护DAPP端基于录入的用户信息生成第一哈希值并广播至区块链中。3.根据权利要求1所述的电子陪护证管理方法，其特征在于，所述用户信息包括：陪护人姓名、陪护人身份证号、陪护人手机号、陪护人核酸检测报告、对应患者的姓名及对应患者的身份证号。4.根据权利要求1所述的电子陪护证管理方法，其特征在于，所述基于录入的用户信息生成第一哈希值并广播至区块链中，包括：基于所述医护DAPP端上部署的以太坊虚拟机上的所述智能合约程序利用单向加密的SHA256哈希函数对所述用户信息进行加密处理，获得第一次加密结果；利用单向加密的RipeMD160哈希函数对所述第一次加密结果进行加密处理，获得第一哈希值；将获得的第一哈希值基于广播的形式广播至所述区块链中，所述区块链为私有链。5.根据权利要求4所述的电子陪护证管理方法，其特征在于，所述利用单向加密的SHA256哈希函数对所述用户信息进行加密处理，包括：基于的SHA256哈希函数对所述用户信息进行补位处理，形成补位后的用户信息，其中补位后用户信息的长度为512位的倍数；以512位为单位对补位后的用户信息进行分块处理，并对分块形成的消息区块逐个进行加密处理。6.根据权利要求4所述的电子陪护证管理方法，其特征在于，所述利用单向加密的RipeMD160哈希函数对所述第一次加密结果进行加密处理，包括：将第一次加密结果划分为512的倍数块，其中每个倍数块为16个词；每次将5个倍数块输入RipeMD160哈希函数中进行哈希运算，并将运算结果转换为十六进制字符串，获得第一哈希值。7.根据权利要求1所述的电子陪护证管理方法，其特征在于，所述基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行所述陪护证的签发，包括：所述医护DAPP端利用非对称加密技术中的椭圆曲线加密技术签名算法对所述陪护证进行加密签名；基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行加密签名后的陪护证的签发。8.根据权利要求1所述的电子陪护证管理方法，其特征在于，所述方法还包括：所述智能合约程序每间隔预设时间在所述院内HIS系统获得当天出院患者数据；基于当天出院患者数据自动注销对应的陪护证，并将注销信息广播至区块链中。9.一种基于区块链的电子陪护证管理装置，其特征在于，所述装置包括：判断模块：用于判断申请电子陪护证用户是否为定义的特殊人群；第一哈希值生成模块：用于若否，医护DAPP端接收所述申请电子陪护证用户基于用户DAPP端录入的用户信息，基于接收到的用户信息生成第一哈希值并广播至区块链中；存储模块：用于在所述区块链中将所述第一哈希值存储至各个节点的分布式账本，所述节点包括全节点和轻节点；数据获取模块：用于基于所述医护DAPP端基于智能合约程序调用医院陪护证后台管理系统的API接口获得院内HIS系统同步的所述申请电子陪护证用户对应的患者院内数据；第二哈希值生成模块：用于基于所述患者院内数据生成第二哈希值，并利用所述第二哈希值与所述第一哈希值进行比对，判断是否满足智能合约预设的申请规则；驳回模块：用于若不满足智能合约预设的申请规则时，对所述申请电子陪护证用户的申请进行驳回处理，将驳回信息广播至所述区块链中，并基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行驳回信息推送；通过模块：用于若满足智能合约预设的申请规则时，对所述申请电子陪护证用户的申请进行通过处理，并将通过信息广播至所述区块链中；签发模块：用于所述医护DAPP端基于所述通过信息生成陪护证，并基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行所述陪护证的签发。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，该程序被处理器执行时实现如权利要求1至8中任意一项所述的电子陪护证管理方法。
说明书desc
技术领域本发明涉及数据处理技术领域，尤其涉及一种基于区块链的电子陪护证管理方法、装置及存储介质。背景技术目前绝大部分医院对于病区陪护人管理依旧以发放传统纸质陪护证的方式为主，纸质陪护证可以随意借用，病区流动人员没有完整的身份校验体系，导致医院对于病区流动人员的把控不足，如何利用信息化手段建立完善的病区陪护人员身份校验体系成为当务之急。现有技术中无法实现陪护人数量的控制，且无法对陪护人检测结果等数据进行唯一性校验；如果信息提交有误后续没有处理机制，也没有完备的追溯机制；对特殊人群，如老人、小孩，使用手机或小程序不便的人群则无法满足其申领需求；同时，申请、注销流程缺乏自动审核、处理机制，给医院的管理人员增加了太多的工作负担。发明内容本发明的目的在于克服现有技术的不足，本发明提供了一种基于区块链的电子陪护证管理方法、装置及存储介质，实现了陪护证的相关信息不被篡改，保证数据可靠及可溯源，同时数据无需人工审核，特殊人群也可以进行申请。为了解决上述技术问题，本发明实施例提供了一种基于区块链的电子陪护证管理方法，所述方法包括：判断申请电子陪护证用户是否为定义的特殊人群，所述特殊人群为无法使用智能终端的用户人群；若否，医护DAPP端接收所述申请电子陪护证用户基于用户DAPP端录入的用户信息，基于接收到的用户信息生成第一哈希值并广播至区块链中；在所述区块链中将所述第一哈希值存储至各个节点的分布式账本，所述节点包括全节点和轻节点；基于所述医护DAPP端基于智能合约程序调用医院陪护证后台管理系统的API接口获得院内HIS系统同步的所述申请电子陪护证用户对应的患者院内数据；基于所述患者院内数据生成第二哈希值，并利用所述第二哈希值与所述第一哈希值进行比对，判断是否满足智能合约预设的申请规则；若不满足智能合约预设的申请规则时，对所述申请电子陪护证用户的申请进行驳回处理，将驳回信息广播至所述区块链中，并基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行驳回信息推送；若满足智能合约预设的申请规则时，对所述申请电子陪护证用户的申请进行通过处理，并将通过信息广播至所述区块链中；所述医护DAPP端基于所述通过信息生成陪护证，并基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行所述陪护证的签发。可选的，所述方法还包括：所述申请电子陪护证用户为定义的特殊人群时，由医护用户在所述医护DAPP端录入所述特殊人群对应的申请电子陪护证用户的用户信息，并且所述医护DAPP端基于录入的用户信息生成第一哈希值并广播至区块链中。可选的，所述用户信息包括：陪护人姓名、陪护人身份证号、陪护人手机号、陪护人核酸检测报告、对应患者的姓名及对应患者的身份证号。可选的，所述基于录入的用户信息生成第一哈希值并广播至区块链中，包括：基于所述医护DAPP端上部署的以太坊虚拟机上的所述智能合约程序利用单向加密的SHA256哈希函数对所述用户信息进行加密处理，获得第一次加密结果；利用单向加密的RipeMD160哈希函数对所述第一次加密结果进行加密处理，获得第一哈希值；将获得的第一哈希值基于广播的形式广播至所述区块链中，所述区块链为私有链。可选的，所述利用单向加密的SHA256哈希函数对所述用户信息进行加密处理，包括：基于的SHA256哈希函数对所述用户信息进行补位处理，形成补位后的用户信息，其中补位后用户信息的长度为512位的倍数；以512位为单位对补位后的用户信息进行分块处理，并对分块形成的消息区块逐个进行加密处理。可选的，所述利用单向加密的RipeMD160哈希函数对所述第一次加密结果进行加密处理，包括：将第一次加密结果划分为512的倍数块，其中每个倍数块为16个词；每次将5个倍数块输入RipeMD160哈希函数中进行哈希运算，并将运算结果转换为十六进制字符串，获得第一哈希值。可选的，所述基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行所述陪护证的签发，包括：所述医护DAPP端利用非对称加密技术中的椭圆曲线加密技术签名算法对所述陪护证进行加密签名；基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行加密签名后的陪护证的签发。可选的，所述方法还包括：所述智能合约程序每间隔预设时间在所述院内HIS系统获得当天出院患者数据；基于当天出院患者数据自动注销对应的陪护证，并将注销信息广播至区块链中。另外，本发明实施例还提供了一种基于区块链的电子陪护证管理装置，所述装置包括：判断模块：用于判断申请电子陪护证用户是否为定义的特殊人群；第一哈希值生成模块：用于若否，医护DAPP端接收所述申请电子陪护证用户基于用户DAPP端录入的用户信息，基于接收到的用户信息生成第一哈希值并广播至区块链中；存储模块：用于在所述区块链中将所述第一哈希值存储至各个节点的分布式账本，所述节点包括全节点和轻节点；数据获取模块：用于基于所述医护DAPP端基于智能合约程序调用医院陪护证后台管理系统的API接口获得院内HIS系统同步的所述申请电子陪护证用户对应的患者院内数据；第二哈希值生成模块：用于基于所述患者院内数据生成第二哈希值，并利用所述第二哈希值与所述第一哈希值进行比对，判断是否满足智能合约预设的申请规则；驳回模块：用于若不满足智能合约预设的申请规则时，对所述申请电子陪护证用户的申请进行驳回处理，将驳回信息广播至所述区块链中，并基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行驳回信息推送；通过模块：用于若满足智能合约预设的申请规则时，对所述申请电子陪护证用户的申请进行通过处理，并将通过信息广播至所述区块链中；签发模块：用于所述医护DAPP端基于所述通过信息生成陪护证，并基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行所述陪护证的签发。另外，本发明实施例还提供了一种计算机可读存储介质，其上存储有计算机程序，该程序被处理器执行时实现如上述中任意一项所述的电子陪护证管理方法。在本发明具体实施过程中，通过医护DAPP端和用户DAPP端的有机结合，可以有效控制进出医院的陪护人员数量，监控陪护人员身份，减少人员聚集；监控并记录陪护人员个人核酸情况，防止陪护人员带病上岗；识别码动态更新，健康状况及行程记录全部上链不可篡改删除，保障信息安全及可溯源，同时数据无需人工审核，特殊人群也可以进行申请；通过与医院相关系统打通，实现信息智能审核，提升工作效率；使用电子陪护码，减少与医护人员、安保人员接触，最大化降低感染几率。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见的，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它的附图。图1是本发明实施例中的基于区块链的电子陪护证管理方法的流程示意图；图2是本发明实施例中的基于区块链的电子陪护证管理装置的结构组成示意图；图3是本发明实施例中的区块链的结构组成示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其它实施例，都属于本发明保护的范围。实施例一请参阅图1，图1是本发明实施例中的基于区块链的电子陪护证管理方法的流程示意图。如图1所示，一种基于区块链的电子陪护证管理方法，所述方法包括：S11：判断申请电子陪护证用户是否为定义的特殊人群，所述特殊人群为无法使用智能终端的用户人群；在本发明具体实施过程中，在住院患者的家属需要申请陪护时，需要判断申请电子陪护证的用户是否为定义的特殊人群，在本申请中特殊人群指无法使用智能手机终端等智能终端的用户人群，一般为无智能手机的老人或小孩等。S12：若否，医护DAPP端接收所述申请电子陪护证用户基于用户DAPP 端录入的用户信息，基于接收到的用户信息生成第一哈希值并广播至区块链中；在本发明具体实施过程中，所述用户信息包括：陪护人姓名、陪护人身份证号、陪护人手机号、陪护人核酸检测报告、对应患者的姓名及对应患者的身份证号。进一步的，所述基于录入的用户信息生成第一哈希值并广播至区块链中，包括：基于所述医护DAPP端上部署的以太坊虚拟机上的所述智能合约程序利用单向加密的SHA256哈希函数对所述用户信息进行加密处理，获得第一次加密结果；利用单向加密的RipeMD160哈希函数对所述第一次加密结果进行加密处理，获得第一哈希值；将获得的第一哈希值基于广播的形式广播至所述区块链中，所述区块链为私有链。进一步的，所述利用单向加密的SHA256哈希函数对所述用户信息进行加密处理，包括：基于的SHA256哈希函数对所述用户信息进行补位处理，形成补位后的用户信息，其中补位后用户信息的长度为512位的倍数；以512位为单位对补位后的用户信息进行分块处理，并对分块形成的消息区块逐个进行加密处理。进一步的，所述利用单向加密的RipeMD160哈希函数对所述第一次加密结果进行加密处理，包括：将第一次加密结果划分为512的倍数块，其中每个倍数块为16个词；每次将5个倍数块输入RipeMD160哈希函数中进行哈希运算，并将运算结果转换为十六进制字符串，获得第一哈希值。具体的，申请电子陪护证的用户通过用户DAPP端，即用户自己的智能终端设备，通过扫描指定的二维码进入智能终端上的用户DAPP端，然后通过DAPP端进行申请时的用户信息的录入，并将这些信息上传至医护 DAPP端，这些用户信息至少包括陪护人姓名、陪护人身份证号、陪护人手机号、陪护人核酸检测报告、对应患者的姓名及对应患者的身份证号等；然后医护DAPP端通过其上所部署的以太坊虚拟机上的智能合约程序对用户信息进行加密处理，最终生成第一哈希值，并广播至区块链中。其中如图3所示，在区块链中，将医护DAPP端设置为区块链的全节点，用户DAPP端设置为区块链的轻节点，并且只在全节点上部署以太坊虚拟机，并且在以太坊虚拟机上部署智能合约程序，对用户信息加密生成第一哈希值在智能合约程序上实现，具体需要两次加密处理，第一次为使用SHA256哈希函数进行的加密处理，第二次为使用RipeMD160哈希函数进行的加密处理。在使用SHA256哈希函数进行的加密处理时，该加密过程为单向加密过程，该SHA256哈希函数首先对用户信息进行补位处理，使得补位后的用户信息的最终长度为512位的倍数，然后以512位为单位对补位后的用户信息进行分块，记得的信息分块为M，M，...，M，然后对信息分块逐个进行加密处理，即从一个固定的初始哈希H开始，进行以下序列的计算：其中，C表示SHA256哈希函数的压缩函数，+表示mod232加法，即将两个数字加在一起，如果对232取余，则H为该信息分块的哈希值；通过上述计算处理，即可得到第一次加密结果。在第二次加密处理是，利用单向加密的RipeMD160哈希函数实现，即先将第一次加密结果分成512的倍数块，其中每一个倍数块中含有16个词，然后每次将五个倍数块输入RipeMD160哈希函数中进行一次哈希运算，输出一个哈希值位数为32的哈希值，所有的倍数块计算往后将获得5个32 位的哈希值，将这些哈希值连接起来形成160位的哈希值，最终以保证生成的哈希值唯一性，极低碰撞率，最终将160位的哈希值生成一串160bit 的十六进制字符串，即为第一哈希值。在获得第一哈希值之后，需要将第一哈希值广播至区块链上，并且该区块链为私有链。S13：所述申请电子陪护证用户为定义的特殊人群时，由医护用户在所述医护DAPP端录入所述特殊人群对应的申请电子陪护证用户的用户信息，并且所述医护DAPP端基于录入的用户信息生成第一哈希值并广播至区块链中。在本发明具体实施过程中，申请电子陪护证用户为定义的特殊人群时，需要医护人员通过医护DAPP端帮助电子陪护证的申请工作，由医护人员直接在DAPP端上直接帮助特殊人群录入对应的申请电子陪护证用户的用户信息，并直接在医护DAPP端上通过智能合约程序生成第一哈希值，并广播至区块链上；其中生成第一哈希值的方式和上一步骤一致，在此不再赘述。S14：在所述区块链中将所述第一哈希值存储至各个节点的分布式账本，所述节点包括全节点和轻节点；在本发明具体实施过程中，在区块链接收到第一哈希值之后，将第一哈希值存储在各个节点中，在区块链中的节点分为全节点和轻节点，其中医护DAPP端被定义为全节点，用户DAPP端被定义为轻节点，同时在区块链的节点中均具有分布式账本存储功能，但只有全节点上部署有以太坊虚拟机，并且在以太坊虚拟机上部署有智能合约程序。S15：基于所述医护DAPP端基于智能合约程序调用医院陪护证后台管理系统的API接口获得院内HIS系统同步的所述申请电子陪护证用户对应的患者院内数据；在本发明具体实施过程中，通过医护DAPP端上的以太坊虚拟机所部署的智能合约程序来调用医院陪护证后台管理系统的API接口的方式来获得医院陪护证后台管理系统在院内HIS系统同步的申请电子陪护证用户对应的患者院内数据。S16：基于所述患者院内数据生成第二哈希值，并利用所述第二哈希值与所述第一哈希值进行比对，判断是否满足智能合约预设的申请规则；在本发明具体实施过程中，在获得患者院内数据之后，利用上述步骤 的方法进行加密处理，生成第二哈希值；同时利用第一哈希值和第二哈希值在智能合约程序中进行比对，并根据比对结果判断是否满足智能合约预设的申请规则。S17：若满足智能合约预设的申请规则时，对所述申请电子陪护证用户的申请进行通过处理，并将通过信息广播至所述区块链中；在本发明具体实施过程中，在满足智能合约预设的申请规则时，则对申请电子陪护证用户的申请进行通过处理，同时将通过信息广播至区块链中；同时根据申请电子陪护证用户对应的用户标签向用户DAPP端进行消息推送。S18：所述医护DAPP端基于所述通过信息生成陪护证，并基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行所述陪护证的签发；在本发明具体实施过程中，所述基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行所述陪护证的签发，包括：所述医护 DAPP端利用非对称加密技术中的椭圆曲线加密技术签名算法对所述陪护证进行加密签名；基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行加密签名后的陪护证的签发。具体的，医护DAPP端利用非对称加密技术中的椭圆曲线加密技术签名算法对陪护证进行加密签名，然后在根据申请电子陪护证用户对应的用户标签向用户DAPP端进行加密签名后的陪护证的签发。加密签名的具体过程如下：假设私钥、公钥分别为k、K，既有K＝kG，其中，G为G点；私钥签名：1、选择随机数r，计算点rG；2、根据随机数r、消息M的哈希h、私钥k，计算s＝/r；将消息M、和签名{rG,s}发给接收方；公钥签名：1、接收方收到消息M、以及签名{rG＝, s}；2、根据消息求哈希h；3、使用发送方公钥K计算：hG/s+xK/s，并与 rG比较，如相等即验签成功；原理如下：：hG/s+xK/s＝hG/s+x/s＝ G/s＝rG/＝rG。ECDSA签名的第一个步骤是对待签名的消息生成一个消息摘要。ECDSA256使用SHA256生成256比特的摘要。摘要生成结束后，应用签名算法对摘要进行签名：产生一个随机数k，利用随机数k，计算出两个大数r和s；将r和s拼在一起就构成了对消息摘要的签名。S19：若不满足智能合约预设的申请规则时，对所述申请电子陪护证用户的申请进行驳回处理，将驳回信息广播至所述区块链中，并基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行驳回信息推送。在本发明具体实施过程中，在不满足智能合约预设的申请规则时，则对申请电子陪护证用户的申请进行驳回处理，将驳回信息广播至所述区块链中，并根据申请电子陪护证用户对应的用户标签向用户DAPP端进行驳回信息推送；因为驳回信息被记录在区块链的各个节点中，因此该用户不能使用用户DAPP端进行再次申请，需要医护人员使用医护DAPP端进行再次申请。在本发明具体实施过程中，还包括：所述智能合约程序每间隔预设时间在所述院内HIS系统获得当天出院患者数据；基于当天出院患者数据自动注销对应的陪护证，并将注销信息广播至区块链中。具体的，在某一个患者出院之后，需要进行其对应的陪护证注销，因此，智能合约程序每间隔一段时间在院内 HIS系统获得当天出院患者数据；然后根据当天出院患者数据自动注销对应的陪护证，并将注销信息广播至区块链中。同时在需要更换陪护人员时，即陪护人员变更必须注销后再次重新申请，住院期间如果陪护人注销可由用户DAPP端后自助注销，或由医护 DAPP直接操作注销，首先通过陪护人在用户DAPP端发起申请，二次确认注销，或通过其他通讯方式联系医护，医护DAPP端对原陪护人标记为注销，并通过区块链网络广播到各节点并存储操作记录，再通过用户DAPP端重新发起陪护证申请，或经医护DAPP端变更陪护人，最后通过陪护证区块链网络广播到各节点，再次存储操作记录。在本发明具体实施过程中，通过医护DAPP端和用户DAPP端的有机结合，可以有效控制进出医院的陪护人员数量，监控陪护人员身份，减少人员聚集；监控并记录陪护人员个人核酸情况，防止陪护人员带病上岗；电子陪护码动态更新，健康状况及行程记录全部上链不可篡改删除，保障信息安全及可溯源，同时数据无需人工审核，特殊人群也可以进行申请；通过与医院相关系统打通，实现信息智能审核，提升工作效率；使用电子陪护码，减少与医护人员、安保人员接触，最大化降低感染几率。实施例二请参阅图2，图2是本发明实施例中的基于区块链的电子陪护证管理装置的结构组成示意图。如图2所示，一种基于区块链的电子陪护证管理装置，所述装置包括：判断模块21：用于判断申请电子陪护证用户是否为定义的特殊人群；在本发明具体实施过程中，在住院患者的家属需要申请陪护时，需要判断申请电子陪护证的用户是否为定义的特殊人群，在本申请中特殊人群指无法使用智能手机终端等智能终端的用户人群，一般为无智能手机的老人或小孩等。第一哈希值生成模块22：用于若否，医护DAPP端接收所述申请电子陪护证用户基于用户DAPP端录入的用户信息，基于接收到的用户信息生成第一哈希值并广播至区块链中；在本发明具体实施过程中，所述用户信息包括：陪护人姓名、陪护人身份证号、陪护人手机号、陪护人核酸检测报告、对应患者的姓名及对应患者的身份证号。进一步的，所述基于录入的用户信息生成第一哈希值并广播至区块链中，包括：基于所述医护DAPP端上部署的以太坊虚拟机上的所述智能合约程序利用单向加密的SHA256哈希函数对所述用户信息进行加密处理，获得第一次加密结果；利用单向加密的RipeMD160哈希函数对所述第一次加密结果进行加密处理，获得第一哈希值；将获得的第一哈希值基于广播的形式广播至所述区块链中，所述区块链为私有链。进一步的，所述利用单向加密的SHA256哈希函数对所述用户信息进行加密处理，包括：基于的SHA256哈希函数对所述用户信息进行补位处理，形成补位后的用户信息，其中补位后用户信息的长度为512位的倍数；以512位为单位对补位后的用户信息进行分块处理，并对分块形成的消息区块逐个进行加密处理。进一步的，所述利用单向加密的RipeMD160哈希函数对所述第一次加密结果进行加密处理，包括：将第一次加密结果划分为512的倍数块，其中每个倍数块为16个词；每次将5个倍数块输入RipeMD160哈希函数中进行哈希运算，并将运算结果转换为十六进制字符串，获得第一哈希值。具体的，申请电子陪护证的用户通过用户DAPP端，即用户自己的智能终端设备，通过扫描指定的二维码进入智能终端上的用户DAPP端，然后通过DAPP端进行申请时的用户信息的录入，并将这些信息上传至医护 DAPP端，这些用户信息至少包括陪护人姓名、陪护人身份证号、陪护人手机号、陪护人核酸检测报告、对应患者的姓名及对应患者的身份证号等；然后医护DAPP端通过其上所部署的以太坊虚拟机上的智能合约程序对用户信息进行加密处理，最终生成第一哈希值，并广播至区块链中。其中如图3所示，在区块链中，将医护DAPP端设置为区块链的全节点，用户DAPP端设置为区块链的轻节点，并且只在全节点上部署以太坊虚拟机，并且在以太坊虚拟机上部署智能合约程序，对用户信息加密生成第一哈希值在智能合约程序上实现，具体需要两次加密处理，第一次为使用SHA256哈希函数进行的加密处理，第二次为使用RipeMD160哈希函数进行的加密处理。在使用SHA256哈希函数进行的加密处理时，该加密过程为单向加密过程，该SHA256哈希函数首先对用户信息进行补位处理，使得补位后的用户信息的最终长度为512位的倍数，然后以512位为单位对补位后的用户信息进行分块，记得的信息分块为M，M，...，M，然后对信息分块逐个进行加密处理，即从一个固定的初始哈希H开始，进行以下序列的计算：其中，C表示SHA256哈希函数的压缩函数，+表示mod232加法，即将两个数字加在一起，如果对232取余，则H为该信息分块的哈希值；通过上述计算处理，即可得到第一次加密结果。在第二次加密处理是，利用单向加密的RipeMD160哈希函数实现，即先将第一次加密结果分成512的倍数块，其中每一个倍数块中含有16个词，然后每次将五个倍数块输入RipeMD160哈希函数中进行一次哈希运算，输出一个哈希值位数为32的哈希值，所有的倍数块计算往后将获得5个32 位的哈希值，将这些哈希值连接起来形成160位的哈希值，最终以保证生成的哈希值唯一性，极低碰撞率，最终将160位的哈希值生成一串160bit 的十六进制字符串，即为第一哈希值。在获得第一哈希值之后，需要将第一哈希值广播至区块链上，并且该区块链为私有链。申请电子陪护证用户为定义的特殊人群时，由医护用户在医护DAPP 端录入特殊人群对应的申请电子陪护证用户的用户信息，并且医护DAPP 端基于录入的用户信息生成第一哈希值并广播至区块链中。在本发明具体实施过程中，申请电子陪护证用户为定义的特殊人群时，需要医护人员通过医护DAPP端帮助电子陪护证的申请工作，由医护人员直接在DAPP端上直接帮助特殊人群录入对应的申请电子陪护证用户的用户信息，并直接在医护DAPP端上通过智能合约程序生成第一哈希值，并广播至区块链上；其中生成第一哈希值的方式和上一步骤一致，在此不再赘述。存储模块23：用于在所述区块链中将所述第一哈希值存储至各个节点的分布式账本，所述节点包括全节点和轻节点；在本发明具体实施过程中，在区块链接收到第一哈希值之后，将第一哈希值存储在各个节点中，在区块链中的节点分为全节点和轻节点，其中医护DAPP端被定义为全节点，用户DAPP端被定义为轻节点，同时在区块链的节点中均具有分布式账本存储功能，但只有全节点上部署有以太坊虚拟机，并且在以太坊虚拟机上部署有智能合约程序。数据获取模块24：用于基于所述医护DAPP端基于智能合约程序调用医院陪护证后台管理系统的API接口获得院内HIS系统同步的所述申请电子陪护证用户对应的患者院内数据；在本发明具体实施过程中，通过医护DAPP端上的以太坊虚拟机所部署的智能合约程序来调用医院陪护证后台管理系统的API接口的方式来获得医院陪护证后台管理系统在院内HIS系统同步的申请电子陪护证用户对应的患者院内数据。第二哈希值生成模块25：用于基于所述患者院内数据生成第二哈希值，并利用所述第二哈希值与所述第一哈希值进行比对，判断是否满足智能合约预设的申请规则；在本发明具体实施过程中，在获得患者院内数据之后，利用上述步骤 的方法进行加密处理，生成第二哈希值；同时利用第一哈希值和第二哈希值在智能合约程序中进行比对，并根据比对结果判断是否满足智能合约预设的申请规则。驳回模块26：用于若不满足智能合约预设的申请规则时，对所述申请电子陪护证用户的申请进行驳回处理，将驳回信息广播至所述区块链中，并基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行驳回信息推送；在本发明具体实施过程中，在不满足智能合约预设的申请规则时，则对申请电子陪护证用户的申请进行驳回处理，将驳回信息广播至所述区块链中，并根据申请电子陪护证用户对应的用户标签向用户DAPP端进行驳回信息推送；因为驳回信息被记录在区块链的各个节点中，因此该用户不能使用用户DAPP端进行再次申请，需要医护人员使用医护DAPP端进行再次申请。通过模块27：用于若满足智能合约预设的申请规则时，对所述申请电子陪护证用户的申请进行通过处理，并将通过信息广播至所述区块链中；在本发明具体实施过程中，在满足智能合约预设的申请规则时，则对申请电子陪护证用户的申请进行通过处理，同时将通过信息广播至区块链中；同时根据申请电子陪护证用户对应的用户标签向用户DAPP端进行消息推送。签发模块28：用于所述医护DAPP端基于所述通过信息生成陪护证，并基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行所述陪护证的签发。在本发明具体实施过程中，所述基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行所述陪护证的签发，包括：所述医护DAPP端利用非对称加密技术中的椭圆曲线加密技术签名算法对所述陪护证进行加密签名；基于所述申请电子陪护证用户对应的用户标签向所述用户DAPP端进行加密签名后的陪护证的签发。具体的，医护DAPP端利用非对称加密技术中的椭圆曲线加密技术签名算法对陪护证进行加密签名，然后在根据申请电子陪护证用户对应的用户标签向用户DAPP端进行加密签名后的陪护证的签发。加密签名的具体过程如下：假设私钥、公钥分别为k、K，既有K＝kG，其中，G为G点；私钥签名：1、选择随机数r，计算点rG；2、根据随机数r、消息M的哈希h、私钥k，计算s＝/r；将消息M、和签名{rG,s}发给接收方；公钥签名：1、接收方收到消息M、以及签名{rG＝, s}；2、根据消息求哈希h；3、使用发送方公钥K计算：hG/s+xK/s，并与 rG比较，如相等即验签成功；原理如下：：hG/s+xK/s＝hG/s+x/s＝ G/s＝rG/＝rG。ECDSA签名的第一个步骤是对待签名的消息生成一个消息摘要。ECDSA256使用SHA256生成256比特的摘要。摘要生成结束后，应用签名算法对摘要进行签名：产生一个随机数k，利用随机数k，计算出两个大数r和s；将r和s拼在一起就构成了对消息摘要的签名。在本发明具体实施过程中，该装置还包括：所述智能合约程序每间隔预设时间在所述院内HIS系统获得当天出院患者数据；基于当天出院患者数据自动注销对应的陪护证，并将注销信息广播至区块链中。具体的，在某一个患者出院之后，需要进行其对应的陪护证注销，因此，智能合约程序每个一段时间在院内HIS 系统获得当天出院患者数据；然后根据当天出院患者数据自动注销对应的陪护证，并将注销信息广播至区块链中。同时在需要更换陪护人员时，即陪护人员变更必须注销后在重新申请，住院期间如果陪护人注销可由用户DAPP端后自助注销，或由医护DAPP 直接操作注销，首先通过陪护人在用户DAPP端发起申请，二次确认注销，或通过其他通讯方式联系医护，医护DAPP端对原陪护人标记为注销，并通过区块链网络广播到各节点并存储操作记录，再通过用户DAPP端重新发起陪护证申请，或经医护DAPP端变更陪护人，最后通过陪护证区块链网络广播到各节点，再次存储操作记录。在本发明具体实施过程中，通过医护DAPP端和用户DAPP端的有机结合，可以有效控制进出医院的陪护人员数量，监控陪护人员身份，减少人员聚集；监控并记录陪护人员个人核酸情况，防止陪护人员带病上岗；识别码动态更新，健康状况及行程记录全部上链不可篡改删除，保障信息安全及可溯源，同时数据无需人工审核，特殊人群也可以进行申请；通过与医院相关系统打通，实现信息智能审核，提升工作效率；使用电子陪护码，减少与医护人员、安保人员接触，最大化降低感染几率。本发明实施例提供的一种计算机可读存储介质，所述计算机可读存储介质上存储有计算机程序，该程序被处理器执行时实现上述实施例中任意一个实施例的电子陪护证管理方法。其中，所述计算机可读存储介质包括但不限于任何类型的盘、 ROM、RAM、EPROM、EEPROM、闪存、磁性卡片或光线卡片。也就是，存储设备包括由设备 以能够读的形式存储或传输信息的任何介质，可以是只读存储器，磁盘或光盘等。本发明实施例还提供了一种计算机应用程序，其运行在计算机上，该计算机应用程序用于执行上述中任意一个实施例的电子陪护证管理方法。另外，以上对本发明实施例所提供的一种基于区块链的电子陪护证管理方法、装置及存储介质进行了详细介绍，本文中应采用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处，综上所述，本说明书内容不应理解为对本发明的限制。
