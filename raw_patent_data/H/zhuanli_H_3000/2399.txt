标题title
一种电池充放电效率自主寻优型变换器及其效率寻优方法
摘要abst
本发明提供了一种电池充放电效率自主寻优型变换器及其效率寻优方法，其中变换器包括：阻抗测量功能模块，在对电池模块进行正常充放电控制的过程中，该阻抗测量功能模块对电池阻抗进行在线测量；效率寻优充放电控制功能模块，基于所述阻抗测量功能模块得到的电池阻抗结果，完成电池充放电效率最优频率的搜寻，并以带直流偏置的所述最优频率的正弦电流对电池进行充放电控制。同时本发明还提供一种上述变换器的效率寻优方法。本发明变换器与电池模块相联，作为电池模块的功率接口，用于调控电池的充放电过程，对电池模块进行功率控制，实现电池系统的分割管控；针对电池模块进行阻抗测量，不会影响电池系统的正常运行，能降低能量损耗。
权利要求书clms
1.一种电池充放电效率自主寻优型变换器，与电池模块相联，作为电池模块的功率接口，用于调控电池的充放电过程，对电池模块进行功率控制，实现电池系统的分割管控；其特征在于，所述变换器包括：阻抗测量功能模块，在所述变换器对电池模块进行正常充放电控制的过程中，该阻抗测量功能模块对电池阻抗进行在线测量；效率寻优充放电控制功能模块，该模块基于所述阻抗测量功能模块得到的电池阻抗结果，完成电池充放电效率最优频率的搜寻，并以带直流偏置的所述最优频率的正弦电流对电池进行充放电控制。2.根据权利要求1所述的电池充放电效率自主寻优型变换器，其特征在于，所述阻抗测量功能模块，包括：采样子模块，该模块对电池正常工作过程中的电压、电流进行采样；电信号变化判断子模块，该模块判断是否出现能用于阻抗测量的电信号变化，若出现能用于阻抗测量的电信号变化，则传给电池阻抗计算子模块；电池阻抗计算子模块，该模块基于所述电信号变化判断子模块的出现的电信号变化，根据不同时刻变化幅值选择阻抗测量的分析时刻，并基于分析时刻，对电信号进行小波变换，计算电池阻抗，得到电池阻抗结果。3.根据权利要求2所述的电池充放电效率自主寻优型变换器，其特征在于，所述采样子模块，以设定的采样频率fs采样设定采样点数N的电池模块端电压ubat和电流ibat时间序列；所述电信号变化判断子模块，根据相邻采样时刻电信号的差值判断是否出现了能用于电池阻抗测量的电信号变化。4.根据权利要求3所述的电池充放电效率自主寻优型变换器，其特征在于，所述电池阻抗计算子模块，根据不同采样时刻电信号变化幅值确定用于电池阻抗测量的分析时刻，并基于该分析时刻，对电池模块端电压、电流进行小波变换，根据电压小波系数和电流小波系数计算得到电池阻抗。5.根据权利要求1所述的电池充放电效率自主寻优型变换器，其特征在于，所述效率寻优充放电控制功能模块，包括：效率寻优子模块，该模块基于电池阻抗在线测量结果搜寻电池阻抗零相位对应频率，并将此频率作为充放电效率最优频率；充放电控制子模块，该模块根据所述效率寻优子模块得到的最优频率，以带直流偏置的所述最优频率的正弦电流对电池进行充放电控制。6.根据权利要求5所述的电池充放电效率自主寻优型变换器，其特征在于，所述效率寻优子模块，包括：从设定的频率寻优起点开始，每隔固定间隔划分为一段，获取相位为零频率所在频率段，即目标频率段；对所述目标频率段采用二分法搜寻相位为零对应频率，即为电池充放电效率最优频率。7.一种电池充放电效率自主寻优型变换器的效率寻优方法，其特征在于，包括：在变换器对电池模块进行正常充放电控制的过程中，采用阻抗测量算法对电池阻抗进行在线测量；基于所述阻抗测量功能模块得到的电池阻抗结果，采用频率寻优算法完成电池充放电效率最优频率f0的搜寻，并以带直流偏置的最优频率f0正弦电流对电池进行充放电控制。8.根据权利要求7所述的电池充放电效率自主寻优型变换器的效率寻优方法，其特征在于，所述阻抗测量算法，包括：根据指令对电池正常工作过程中的电压、电流进行采样；判断是否出现可用于阻抗测量的电信号变化；若出现上述变化，则根据不同时刻电信号变化幅值选择阻抗测量的分析时刻，并基于分析时刻，对电信号进行小波变换，计算电池阻抗；所述频率寻优算法，包括：基于电池阻抗在线测量结果搜寻电池阻抗零相位对应频率，并将此频率作为充放电效率最优频率f0。9.根据权利要求8所述的电池充放电效率自主寻优型变换器的效率寻优方法，其特征在于，所述阻抗测量算法，包括以下步骤：S1：当处于电池阻抗测量模式时，判断是否为循环采样模式，若不是循环采样模式，则进行步骤S2，否则跳转步骤S3；S2：在检测到电池充放电效率自主寻优型变换器的充放电指令发生变化后，对电池正常充放电过程中的电池模块端电压、电流进行采样；根据相邻采样时刻电信号的差值判断是否出现了能用于电池阻抗测量的电信号变化，若判断出现了能用于电池阻抗测量的电信号变化，则进行步骤S4，否则返回步骤S2；S3：对电池正常充放电过程中的电池模块端电压、电流进行采样，根据相邻采样时刻电信号的差值判断是否出现了能用于电池阻抗测量的电信号变化，若判断出现了能用于电池阻抗测量的电信号变化，则进行步骤S4，否则返回步骤S3；S4：根据不同采样时刻电信号变化幅值确定用于电池阻抗测量的分析时刻，并基于该分析时刻，对电池模块端电压、电流进行小波变换，根据电压小波系数和电流小波系数计算得到电池阻抗。10.根据权利要求8所述的电池充放电效率自主寻优型变换器的效率寻优方法，其特征在于，所述基于电池阻抗在线测量结果搜寻电池阻抗相角为零对应频率，并将此频率作为电池充放电效率最优频率f0，包括以下步骤：SS1：从设定的频率寻优起点开始，每隔固定间隔划分为一段，获取相位为零频率所在频率段，即目标频率段；SS2：对目标频率段采用二分法搜寻相位为零对应频率f0，f0即为电池充放电效率最优频率。
说明书desc
技术领域本发明涉及一种电池充放电用变换器，尤其是一种电池充放电效率自主寻优型变换器及其效率寻优方法。背景技术随着电池储能系统容量的增加，电池系统内部电池模块串并联规模持续扩大。作为一个由众多电池模块组成的庞大系统，电池系统的运行十分复杂。若将电池模块与电池充放电效率自主寻优型变换器融合成电力电子化电池单元，通过电力电子化电池单元的串并联组合可扩容形成大容量电池储能系统，通过变换器对电池模块的功率控制可实现电池系统的分割管控，可提高电池储能系统的经济性与安全性。电池阻抗作为电池的重要参数，对电池状态辨识和电池性能诊断具有十分重要的指导意义。目前电池阻抗的测量主要基于电池阻抗分析仪等离线测量方式，存在耗时长且成本较高等问题，在实际应用中也受到了适用范围的限制，因此电池阻抗在线测量相比于离线测量更具实用价值，研究如何在电池正常工作状态下进行电池阻抗测量具有十分重要的意义。基于电池阻抗数据可了解频率与电池阻抗的对应关系，若将低电池阻抗对应的频率作为电池充放电电流频率，可通过降低充放电时电池阻抗减小电池充放电过程中的能量损耗，提高电池的充放电效率，实现效率寻优充放电策略。经检索发现：公开号为111830419A的中国专利申请，该发明涉及一种燃料电池在线阻抗测量方法，包括以下步骤：S1：获取燃料电池的阻抗测量频率集；S2：实时采集燃料电池的电压信号u和电流信号i；S3：分别对电压信号u和电流信号i进行小波变换，得到电压小波系数U和电流小波系数I，并计算得到燃料电池的阻抗；S4：判断是否完成阻抗测量频率集中所有频率的计算，若是，则结束本次测量，否则改变小波函数的参数，并返回执行步骤S3。公开号为110554327A的中国专利申请，该发明涉及一种充电时蓄电池阻抗快速测量方法，包括以下步骤：1)将待测量蓄电池和充电装置连接；2)利用充电装置对待测量蓄电池进行充电和放电产生电流阶跃信号，生成变化的电流和电压；3)在蓄电池充放电期间采集蓄电池上的电压和电流信号；4)分别对采样采集到的蓄电池电压和电流进行小波分析，并通过电压与电流小波变换系数之比得到蓄电池阻抗值。上述专利申请111830419A和110554327A针对的对象为电池单体，公开号为111830419A的中国专利申请通过激励单元输出激励电流信号进行电池阻抗测量，公开号为110554327A的中国专利申请通过充电装置产生电流阶跃信号进行电池阻抗测量，两者合均需要专门产生激励信号以进行电池阻抗测量，会影响电池系统的正常运行。发明内容本发明针对现有技术中的缺陷，提出了一种电池充放电效率自主寻优型变换器及其效率寻优方法，针对电池模块进行阻抗测量，不会影响电池系统的正常运行。根据本发明的一个方面，提供了一种电池充放电效率自主寻优型变换器，作为电池模块的功率接口，用于调控电池的充放电过程，对电池模块进行功率控制，实现电池系统的分割管控；所述变换器包括：阻抗测量功能模块，在所述变换器对电池模块进行正常充放电控制的过程中，该阻抗测量功能模块对电池阻抗进行在线测量；效率寻优充放电控制功能模块，该模块基于所述阻抗测量功能模块得到的电池阻抗结果，完成电池充放电效率最优频率的搜寻，并以带直流偏置的所述最优频率的正弦电流对电池进行充放电控制。可选地，所述阻抗测量功能模块，包括：采样子模块，该模块对电池正常工作过程中的电压、电流进行采样；电信号变化判断子模块，该模块判断是否出现能用于阻抗测量的电信号变化，若出现能用于阻抗测量的电信号变化，则传给电池阻抗计算子模块；电池阻抗计算子模块，该模块基于所述电信号变化判断子模块的出现的电信号变化，根据不同时刻变化幅值选择阻抗测量的分析时刻，并基于分析时刻，对电信号进行小波变换，计算电池阻抗，得到电池阻抗结果。可选地，所述采样子模块，以设定的采样频率fs采样设定采样点数N的电池模块端电压ubat和电流ibat时间序列；所述电信号变化判断子模块，根据相邻采样时刻电信号的差值判断是否出现了能用于电池阻抗测量的电信号变化。可选地，所述电池阻抗计算子模块，根据不同采样时刻电信号变化幅值确定用于电池阻抗测量的分析时刻，并基于该分析时刻，对电池模块端电压、电流进行小波变换，根据电压小波系数和电流小波系数计算得到电池阻抗。可选地，所述效率寻优充放电控制功能模块，包括：效率寻优子模块，该模块基于电池阻抗在线测量结果搜寻电池阻抗零相位对应频率，并将此频率作为充放电效率最优频率；充放电控制子模块，该模块根据所述效率寻优子模块得到的最优频率，以带直流偏置的最优频率正弦电流对电池进行充放电控制。可选地，所述效率寻优子模块，包括：从设定的频率寻优起点开始，每隔固定间隔划分为一段，获取相位为零频率所在频率段，即目标频率段；对所述目标频率段采用二分法搜寻相位为零对应频率，即为电池充放电效率最优频率。根据本发明的另一方面，提供一种电池充放电效率自主寻优型变换器的效率寻优方法，包括：在变换器对电池模块进行正常充放电控制的过程中，采用阻抗测量算法对电池阻抗进行在线测量；基于所述阻抗测量功能模块得到的电池阻抗结果，采用频率寻优算法完成电池充放电效率最优频率f0的搜寻，并以带直流偏置的最优频率f0正弦电流对电池进行充放电控制。可选地，所述阻抗测量算法，包括：根据指令对电池正常工作过程中的电压、电流进行采样；判断是否出现可用于阻抗测量的电信号变化；若出现上述变化，则根据不同时刻电信号变化幅值选择阻抗测量的分析时刻，并基于分析时刻，对电信号进行小波变换，计算电池阻抗；所述频率寻优算法，包括：基于电池阻抗在线测量结果搜寻电池阻抗零相位对应频率，并将此频率作为充放电效率最优频率f0。可选地，所述阻抗测量算法，包括以下步骤：S1：当处于电池阻抗测量模式时，判断是否为循环采样模式，若不是循环采样模式，则进行步骤S2，否则跳转步骤S3；S2：在检测到电池充放电效率自主寻优型变换器的充放电指令发生变化后，对电池正常充放电过程中的电池模块端电压、电流进行采样；根据相邻采样时刻电信号的差值判断是否出现了能用于电池阻抗测量的电信号变化，若判断出现了能用于电池阻抗测量的电信号变化，则进行步骤S4，否则返回步骤S2；S3：对电池正常充放电过程中的电池模块端电压、电流进行采样，根据相邻采样时刻电信号的差值判断是否出现了能用于电池阻抗测量的电信号变化，若判断出现了能用于电池阻抗测量的电信号变化，则进行步骤S4，否则返回步骤S3；S4：根据不同采样时刻电信号变化幅值确定用于电池阻抗测量的分析时刻，并基于该分析时刻，对电池模块端电压、电流进行小波变换，根据电压小波系数和电流小波系数计算得到电池阻抗。与现有技术相比，本发明实施例具有如下至少一种有益效果：本发明提供的电池充放电效率自主寻优型变换器具有电池阻抗在线测量功能，可在电池模块正常充放电过程中，对电池模块的端电压、电流进行小波变换，以此得到电池阻抗数据，此测量过程无需额外注入激励电信号，无需额外增加硬件，降低了电池阻抗测量成本，也更具实用性。本发明提供的电池充放电效率自主寻优型变换器具有效率寻优充放电控制功能，可依据在线测量得到的电池阻抗数据搜寻电池充放电的效率最优频率，并以此频率对电池模块采用带直流偏置的正弦电流充放电策略，降低了电池充放电过程中的能量损耗，提高了充放电效率。本发明提供的电池充放电效率自主寻优型变换器与电池模块相联，可对电池模块进行功率控制，实现电池系统的分割管控，使得电池系统以更优性能运行。附图说明通过阅读参照以下附图对非限制性实施例所作的详细描述，本发明的其他特征、目的和优点将会变得更明显：图1为本发明一实施例中电池充放电效率自主寻优型变换器及其工作流程图；图2为本发明一实施例中电池充放电效率自主寻优型变换器拓扑；图3为本发明一实施例中电池阻抗测量算法的工作流程图；图4为本发明一实施例中电池充放电效率自主寻优型变换器效率寻优充放电控制功能模块的工作流程图；图5为本发明一实施例中电池阻抗等效电路模型；图6为本发明一实施例中频率寻优算法的工作流程图；图7为本发明一实施例中频率寻优算法中二分法搜寻最优频率的工作流程图。具体实施方式下面结合具体实施例对本发明进行详细说明。以下实施例将有助于本领域的技术人员进一步理解本发明，但不以任何形式限制本发明。应当指出的是，对本领域的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干变形和改进。这些都属于本发明的保护范围。图1为本发明一实施例中电池充放电效率自主寻优型变换器及其工作流程图。如图1所示，该实施例提供的电池充放电效率自主寻优型变换器，包括：阻抗测量功能模块和效率寻优充放电控制功能模块，在变换器对电池模块进行正常充放电控制的过程中，阻抗测量功能模块对电池阻抗进行在线测量；效率寻优充放电控制功能模块基于阻抗测量功能模块得到的电池阻抗结果，完成电池充放电效率最优频率f0的搜寻，并以带直流偏置的最优频率f0正弦电流对电池进行充放电控制。图1中，电池充放电效率自主寻优型变换器与电池模块相联，作为电池模块的功率接口，可调控电池的充放电过程，对电池模块进行功率控制，实现电池系统的分割管控，其中，电池充放电效率自主寻优型变换器的充放电指令可根据电池模块自身状态与电池系统平均状态的差异实时调节以调控电池模块的充放电过程。本实施例针对电池模块，在电池充放电效率自主寻优型变换器对电池进行充放电的过程中，采用正弦电流充放电策略，以带直流偏置的最优频率正弦电流对电池进行充放电控制，以减小电池模块充放电功率损耗，提高充电效率。为了更好实现电池阻抗在线测量功能，在一些实施例中，阻抗测量功能模块包括：采样子模块、电信号变化判断子模块和电池阻抗计算子模块，采样子模块对电池正常工作过程中的电压、电流进行采样；电信号变化判断子模块判断是否出现能用于阻抗测量的电信号变化，若出现能用于阻抗测量的电信号变化，则传给电池阻抗计算子模块；电池阻抗计算子模块基于电信号变化判断子模块的出现的电信号变化，根据不同时刻变化幅值选择阻抗测量的分析时刻，并基于分析时刻，对电信号进行小波变换，计算电池阻抗，得到电池阻抗结果。作为一种具体的优选方式，采样子模块以设定的采样频率fs采样设定采样点数N的电池模块端电压ubat和电流ibat时间序列；电信号变化判断子模块根据相邻采样时刻电信号的差值判断是否出现了能用于电池阻抗测量的电信号变化，若出现，电池阻抗计算子模块根据不同采样时刻电信号变化幅值确定用于电池阻抗测量的分析时刻，并基于该分析时刻，对电池模块端电压、电流进行小波变换，根据电压小波系数和电流小波系数计算得到电池阻抗。本实施例上述阻抗测量功能模块可在电池模块正常充放电过程中，对电池模块的端电压、电流进行小波变换，以此得到电池阻抗数据，此测量过程无需额外注入激励电信号，无需额外增加硬件，降低了电池阻抗测量成本。为了在实现效率寻优的同时，降低电池充放电过程中的能量损耗，在一些实施例中，效率寻优充放电控制功能模块包括两个部分：效率寻优子模块和充放电控制子模块，其中，效率寻优子模块基于阻抗测量功能模块得到的电池阻抗在线测量结果，搜寻电池阻抗零相位对应频率，并将此频率作为充放电效率最优频率f0；充放电控制子模根据效率寻优子模块得到的带直流偏置的最优频率f0正弦电流，对电池进行充放电控制。在一具体的实施例中，效率寻优子模块从设定的频率寻优起点开始，每隔固定间隔划分为一段，获取相位为零频率所在频率段，即目标频率段；对目标频率段采用二分法搜寻相位为零对应频率f0，f0即为电池充放电效率最优频率。本实施例上述效率寻优充放电控制功能模块能实现效率寻优和充放电控制功能，可依据在线测量得到的电池阻抗数据搜寻电池充放电的效率最优频率，并以此频率对电池模块采用带直流偏置的正弦电流充放电策略，降低了电池充放电过程中的能量损耗，提高了充放电效率；由于效率寻优充放电采用正弦充放电策略，需要变换器在充放电过程中具有控制电池侧电流的能力，因此采用电流源型变换器；由于变换器对电池模块充放电过程进行调控，需具有双向功率传输的能力，因此变换器应为双向变换器。图2为本发明一实施例中电池充放电效率自主寻优型变换器拓扑。在一些实施例中，电池充放电效率自主寻优型变换器可以采用如图2所示电流源型双向变换器拓扑，其中为非隔离型电流源型双向DC/DC变换器，为隔离型电流源型双向DC/DC变换器。需要注意的是，电流源型双向变换器包括但不限于图2给出的变换器拓扑。在图2中所示具体实施例中，电池模块BAT与滤波电感L串联，接在具有两个反并联二极管的全控开关管S1和S2所构成的桥臂中点，滤波电容C一端接桥臂正母线，另一端接桥臂负母线，根据充放电工况与电源或负载并联。图2中所示具体实施例中，变换器的主变压器两端均采用半桥结构，变压器接于桥臂中点和电容中点之间；在电池侧，电池模块BAT与滤波电感L串联，接在具有两个反并联二极管的全控开关管S1和S2所构成的桥臂中点；在另一侧，具有两个反并联二极管的全控开关管S3和S4构成半桥桥臂，滤波电容Co一端接桥臂正母线，另一端接桥臂负母线，根据充放电工况与电源或负载并联；四个主开关S1～S4分别并联一电容。采用图2的所示的非隔离型电流源型双向DC/DC变换器时，当开关管S1开通，S2关断时，由于电源或负载侧电压大于电池电压，电感电流增加，当开关管S2开通，S1关断时，电感上电压反向，电感电流减小；图2中电池侧电路拓扑类似图2中，当开关管S1开通，S2关断时，电感电流增加，当开关管S2开通，S1关断时，电感电流减小。因此通过控制开关管的开关可以控制电感上的电流，进而实现控制流经电池电流的波形。图2中电容起滤波和稳压作用。图2的中变压器用于电气隔离和电压匹配，变压器两侧的半桥分别在变压器原边和副边产生一个方波电压，传输的功率由两个方波的相移决定。本发明实施例中，因为是通过变换器控制电池的电流来实现阻抗的测量和最优频率的充放电，图2所示的电子元器件可以作为变换器中两个功能模块的一部分，实现阻抗测量功能、效率寻优充放电控制功能。具体的：变换器在阻抗测量中的应用，阻抗测量模块就是依据变换器控制的电池电流信号和电池电压信号来进行阻抗测量，例如非循环采样模式下，当已知变换器的充放电指令发生变化时，即已知变换器控制的电池电流将发生变化时，对电压电流进行采样。另外，变换器在充放电控制中的应用，是按照最佳充放电频率，由变换器对电池电流波形进行控制。采用图2中所示的电流源型双向变换器，该变换器与电池模块相联，作为电池模块的功率接口。正常工作时，变换器通过控制开关管控制流经电池的电流，当进入阻抗测量模式，依据不同的采样模式电压电流采样电路分别对电池的电压电流进行采样，若电信号变化判断子模块判断出现能用于阻抗变化的电信号变化，则可由电池阻抗计算子模块计算出电池阻抗。效率寻优充放电控制模块中的频率寻优子模块可依据阻抗数据寻找到最佳的充放电频率，此时通过对变换器开关管的通断加以控制可控制流经电池的电流波形，实现最优频率的充放电。可见，本发明上述图2所示的实施例可以用于调控电池的充放电过程，对电池模块进行功率控制，实现电池系统的分割管控，针对电池模块进行阻抗测量，不会影响电池系统的正常运行，能降低能量损耗。基于相同的技术构思，参照图1所示，对应于图1中的电池充放电效率自主寻优型变换器，还提供一种电池充放电效率自主寻优型变换器的效率寻优方法，具体包括：S100，在变换器对电池模块进行正常充放电控制的过程中，采用阻抗测量算法对电池阻抗进行在线测量；S200，基于阻抗测量功能模块得到的电池阻抗结果，采用频率寻优算法完成电池充放电效率最优频率f0的搜寻，并以带直流偏置的最优频率f0正弦电流对电池进行充放电控制。本实施例针对电池模块，在电池充放电效率自主寻优型变换器对电池进行充放电的过程中，以带直流偏置的最优频率正弦电流对电池进行充放电控制。图3为本发明一实施例中电池阻抗测量算法的工作流程图。如图3所示，该实施例提供的电池阻抗测量算法流程，可以包括如下步骤：S1：当处于电池阻抗测量模式时，判断是否为循环采样模式，若不是循环采样模式，则进行步骤S2，否则跳转步骤S3；S2：在检测到电池充放电效率自主寻优型变换器的充放电指令发生变化后，对电池正常充放电过程中的电池模块端电压、电流进行采样；根据相邻采样时刻电信号的差值判断是否出现了可用于电池阻抗测量的电信号变化，若判断出现了可用于电池阻抗测量的电信号变化，则进行步骤S4，否则返回步骤S2；S3：对电池正常充放电过程中的电池模块端电压、电流进行采样，根据相邻采样时刻电信号的差值判断是否出现了可用于电池阻抗测量的电信号变化，若判断出现了可用于电池阻抗测量的电信号变化，则进行步骤S4，否则返回步骤S3；S4：根据不同采样时刻电信号变化幅值确定用于电池阻抗测量的分析时刻，并基于该分析时刻，对电池模块端电压、电流进行小波变换，根据电压小波系数和电流小波系数计算得到电池阻抗。具体的，在一些实施例中，执行S1，当处于电池阻抗测量模式时，判断是否为循环采样模式，可以包括如下步骤：S11：检测是否处于电池阻抗测量模式，若处于电池阻抗测量模式，则进行步骤S12，否则循环步骤S11；S12：检测是否处于循环采样模式，若不处于循环采样模式，则进行步骤S2，否则跳转步骤S3。具体的，在一些实施例中，执行S2，可以包括以下步骤：S21：检测电池充放电效率自主寻优型变换器的充放电指令是否发生变化，若发生变化，则进行步骤S22，否则循环步骤S21；S22：以设定的采样频率fs采样设定采样点数N的电池模块端电压ubat和电流ibat时间序列；S23：根据相邻采样时刻电信号的差值判断是否出现了可用于电池阻抗测量的电信号变化，若出现可用于电池阻抗测量的变化，则进行步骤S4，否则返回步骤S21。其中，所述电池充放电效率自主寻优型变换器充放电指令，包括：电池充放电效率自主寻优型变换器的充放电指令可根据电池模块自身状态与电池系统平均状态的差异实时调节以调控电池模块的充放电过程，例如在电池模块并联的电池系统中，当电池模块的SOC低于电池系统平均SOC时，可减少该电池模块放电电流或增加该电池模块充电电流，反之则增加该电池模块放电电流或减少该电池模块充电电流。具体的，在一些实施例中，执行S3，可以包括以下步骤：S31：以设定的采样频率fs采样设定采样点数N的电池模块端电压ubat和电流ibat时间序列；S32：根据相邻采样时刻电信号的差值判断是否出现了可用于电池阻抗测量的电信号变化，若出现可用于电池阻抗测量的变化，则进行步骤S4，否则返回步骤S31。进一步地，S2和S3中根据相邻采样时刻电信号的差值判断是否出现了可用于电池阻抗测量的电信号变化，其中：可用于电池阻抗测量的电信号变化包括电池模块端电压、电流变化的幅值需满足测量要求，电池模块端电压、电流变化的速度需满足测量要求；若相邻采样时刻电信号的差值大于设定阈值，则说明电信号变化的幅值满足要求，电信号变化的速度也满足要求，即出现了可用于电池阻抗测量的电信号变化，反之则未出现可用于电池阻抗测量的电信号变化。具体的，在一些实施例中，执行S S4，为了计算得到电池阻抗，可以包括如下步骤：S41：根据相邻采样时刻的电信号差值，选取合适变化幅值对应的采样时刻作为电池阻抗测量的分析时刻b；S42：分别对电压ubat和电流ibat时间序列进行小波变换得到电压小波系数Ubat和电流小波系数Ibat，其中小波基采用复Morlet小波，尺度因子a取决于所需测量的电池阻抗频率f；复Morlet小波为复值对称小波基：采用复值小波可以分析信号的幅值和相位；对称小波基对应的滤波器具有线性相位的特点，可以避免相位畸变。S43：根据电压小波系数Ubat和电流小波系数Ibat计算电池阻抗Zbat，其中其中，S4中根据不同采样时刻电信号变化幅值确定用于电池阻抗测量的分析时刻，具体可以是：在采样序列中所有满足要求的电信号变化对应时刻选择一个作为后续小波变换的分析时刻，例如可选择变化幅值最大对应时刻作为分析时刻。其中，复Morlet小波表达式为：电压小波系数Ubat表达式为：电流小波系数Ibat表达式为：其中，fb为复Morlet小波带宽参数，fc为复Morlet小波中心频率，a为复Morlet小波尺度因子，b为复Morlet小波位移因子，对应电池阻抗的分析时刻，fs为采样频率，k为采样序列点数，N为总采样点数。小波尺度因子a由小波中心频率fc和待测阻抗频率f决定；小波位移因子b对应阻抗分析时刻，此分析时刻由电信号变化判断子模块给出，小波带宽参数和小波中心频率自主选择。其中，电池阻抗频率改变复Morlet小波尺度因子a可以测量得到不同频率f下的电池阻抗。图4为本发明一实施例中电池充放电效率自主寻优型变换器效率寻优充放电控制功能的工作流程图。如图4所示，在该实施例中效率寻优充放电控制功能的实现，可以包括如下步骤：SS1：搜寻电池充放电效率最优频率f0；SS2：以带直流偏置的最优频率正弦电流对电池进行充放电控制。根据如图5所示的电池阻抗等效电路进行分析，电池阻抗等效电路由双层电容CDL、电荷转移电阻RCT、电感L、Warburg阻抗Zw、欧姆电阻Ro组成，在中低频段，电池阻抗等效电路有CDL和RCT存在，在中高频段，电池阻抗等效电路没有CDL和RCT，但有L存在，在更低频段，电池阻抗更大，因此在电感和电容区域之间的边界频率处，电池阻抗可以最小化，即电池阻抗相位为零处电池阻抗可以最小化。因此，在部分优选实施例中，SS1中频率寻优算法搜寻电池充放电效率最优频率f0，可以采用以下方式：由于在中高频段电池阻抗相位连续且单调递增，因此可从某一设定的频率寻优起点开始，每隔固定间隔划分为一段，获取相位为零频率所在频率段，即目标频率段；对目标频率段采用二分法搜寻相位为零对应频率f0，f0即为效率最优正弦充放电频率。本实施例中采用频率寻优算法，将最优频率即阻抗最小频率的寻找转换为阻抗相位零点的寻找，减小了该频率搜寻难度，具化了该频率搜寻标准。其中，在一具体实施例中，获取相位为零频率所在频率段包括：根据电池阻抗测量结果获得每一频段起点处阻抗相位和终点处阻抗相位其中f1为该频段起点处频率，f2为该频段终点处频率；若起点处阻抗相位与终点处阻抗相位异号或二者之一为零，即由于电池阻抗相位单调递增，此段即为相位为零频率所在的目标频率段。采用该实施例中的方法，可以准确寻找相位为0的目标频率段。其中，由于在中高频段电池阻抗相位连续且单调，因此相位过零点有且只有一个，利用零点存在定理，可求取相位零点对应频率的近似值。二分法的基本思想是通过不断地将零点所在的区间一分为二，使得两个端点逐步逼近零点，搜寻流程如图7所示，采用二分法搜寻相位为零对应频率f0的具体步骤包括：S01：输入阻抗数据、目标频率段范围，设定二分法精度error；S02：判断目标频率段起点处阻抗相位是否满足若满足要求，则电池阻抗相位为零对应频率f0＝f1，跳转步骤S08，否则进行步骤S03；S03：判断目标频率段起点处阻抗相位是否满足若满足要求，则电池阻抗相位为零对应频率f0＝f2，跳转步骤S08，否则进行步骤S04；S04：令S05：判断阻抗相位过零对应频率是否位于之间，即判断与是否导号，若同号，则阻抗相位过零对应频率位于之间，令f1＝f0，并返回步骤S04，否则进行步骤S06；S06：令f2＝f0；S07：判断频段是否满足|f1-f2|＜error，若不满足要求，返回步骤S04，否则进行步骤S08；S08：搜寻得到相位为零对应频率为f0。本发明上述实施例电池充放电效率自主寻优型变换器作为电池模块的功率接口，用于调控电池的充放电过程，对电池模块进行功率控制，实现电池系统的分割管控；针对电池模块进行阻抗测量，通过阻抗测量算法以及频率寻优算法实现，不会影响电池系统的正常运行。以上对本发明的部分具体实施例进行了描述。需要理解的是，本发明并不局限于上述特定实施方式，本领域技术人员可以在权利要求的范围内做出各种变形或修改，这并不影响本发明的实质内容。
