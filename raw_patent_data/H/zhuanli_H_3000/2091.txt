标题title
一种储能逆变器的低电压穿越控制方法
摘要abst
本发明属于电力电子控制技术领域，具体涉及一种储能逆变器的低电压穿越控制算法，尤其注重对逆变器进入/离开低电压穿越状态进行快速判断。所述方法包括：采样电网输出的三相电压，并根据电网输出的三相电压计算正序电压、电压幅值和瞬时零序电压；根据瞬时电压幅值和瞬时零序电压，计算综合跌落电压；当瞬时零序电压低于阈值一时，进入疑似低穿状态，将控制方式由功率、电流双闭环暂时转为纯电流环控制；当正序电压低于阈值一时，或综合跌落电压高于阈值二时，进入低穿状态，此时使用纯电流环控制；当正序电压高于阈值一时，或瞬时零序电压高于阈值一时，零序电压低于额定相电压峰值的5％且持续3ms，进入低穿恢复状态。
权利要求书clms
1.一种储能逆变器的低电压穿越控制方法，其特征在于，包括以下步骤：采样电网输出的三相电压，并根据电网输出的三相电压计算正序电压、电压幅值和瞬时零序电压；根据瞬时电压幅值和瞬时零序电压，计算综合跌落电压；当瞬时零序电压低于阈值一时，进入疑似低穿状态，将控制方式由功率外环、电流内环双闭环暂时转为纯电流环控制；当正序电压低于阈值一时，或综合跌落电压高于阈值二时，进入低穿状态，此时使用纯电流环控制；当正序电压高于阈值一时，或瞬时零序电压高于阈值一时，零序电压低于额定相电压峰值的5％且持续3ms，进入低穿恢复状态，功率恢复过程中仍保持纯电流环控制，根据功率指令和额定电压计算电流指令，电流指令恢复后，恢复功率外环计算，变为由功率、电流双闭环控制。2.根据权利要求1所述的一种储能逆变器的低电压穿越控制方法，其特征在于，根据电网输出的三相电压实时计算瞬时电压幅值，包括：对电网输出的三相电压信号进行Clark变换，以获得α、β轴电压；Uα＝1/3*其中，Ua、Ub、Uc为电网输出的三相电压信号；利用获得的α、β轴电压，计算瞬时电压幅值Uamp:3.根据权利要求2所述的一种储能逆变器的低电压穿越控制方法，其特征在于，根据电网输出的三相电压计算瞬时零序电压U0：U0＝/3其中，Ua、Ub、Uc为电网输出的三相电压信号。4.根据权利要求3所述的一种储能逆变器的低电压穿越控制方法，其特征在于，根据瞬时电压幅值Uamp和瞬时零序电压U0计算综合跌落电压Us，综合跌落电压Us为：Us＝Un-Uamp-0.5*U0其中，Un为额定相电压峰值。5.根据权利要求1所述的一种储能逆变器的低电压穿越控制方法，其特征在于，进入疑似低穿状态，将控制方式由功率、电流双闭环暂时转为纯电流环控制，具体包括：停止功率外环的计算，根据功率指令和额定电压计算电流指令，将电流环的电流参考值锁定为功率环停止前的输出，将电流环的电流参考值分别与实测电流反馈值id、iq的差值经过PI调节后输出，再与各自的解耦补偿项运算后得到参考电压ud_m、uq_m；参考电压ud_m、uq_m经坐标变换后进SPWM调制，产生驱动信号实现对逆变器的控制。6.根据权利要求1所述的一种储能逆变器的低电压穿越控制方法，其特征在于，进入低穿状态，此时使用纯电流环控制，具体包括：使d轴电流指令为0，根据功率指令和额定电压计算q轴电流指令，电流指令与实测电流反馈值id、iq的差值经过PI调节后输出，再与各自的解耦补偿项运算后得到参考电压ud_m、uq_m；参考电压ud_m、uq_m经坐标变换后进SPWM调制，由SPWM输出的驱动信号实现对逆变器的控制。7.根据权利要求1所述的一种储能逆变器的低电压穿越控制方法，其特征在于，进入低穿恢复状态后，具体包括：停止无功电流输出，先不恢复功率环；根据功率设定值除额定电压峰值计算电流指令，并且使电流指令随时间缓增，增速为每秒50％额定功率；电流指令恢复后，令功率外环开始运行，功率环的第一个计算周期，积分初值继承当前电流指令，逆变器恢复正常运行状态。8.根据权利要求1所述的一种储能逆变器的低电压穿越控制方法，其特征在于，所述阈值一为85％额定相电压峰值，阈值二设置为70V。
说明书desc
技术领域本发明属于电力电子控制技术领域，具体涉及一种储能逆变器的低电压穿越控制方法。背景技术储能逆变器需要具有低电压穿越功能，当电网正序电压低于85％额定相电压峰值，储能逆变器应当按跌落深度输出对应的无功电流，且响应时间小于30ms。低电压穿越时，要求快速做出响应以支撑电网，同时由于电网电压突变，对储能逆变器的控制会造成冲击。因此，对低电压穿越状态进入/离开的检测越快越好，更有利于对电压突变的冲击早做预防，有利于快速进行电流响应。对低电压穿越的检测，通常使用DSOGI算法分离出正序电压进行判断，但DSOGI算法用到移相计算，实际上存在延迟，使得低穿事件发生后，储能逆变器不能立刻发现，延迟时间与跌落深度、发生故障时系统相位都有关，多数情况下为数个毫秒。如果不使用正序电压，使用瞬时电压进行判断，电压三相平衡跌落时可以迅速判断，但是不平衡跌落时，瞬时电压将幅值将正弦波动，导致误判。基于此，需要一种储能逆变器的低电压穿越控制方法，对逆变器进入/离开低电压穿越状态进行快速判断。发明内容为了克服现有技术中的问题，本发明提出了一种储能逆变器的低电压穿越控制方法，提高逆变器对进入/离开低电压穿越的判断速度，提高进入/离开低电压穿越时逆变器的稳定能力，使发生低穿故障时逆变器快速响应、安全穿越。本发明解决上述技术问题的技术方案如下：一种储能逆变器的低电压穿越控制方法，包括以下步骤：采样电网输出的三相电压，并根据电网输出的三相电压计算正序电压、电压幅值和瞬时零序电压；根据瞬时电压幅值和瞬时零序电压，计算综合跌落电压；当瞬时零序电压低于阈值一时，进入疑似低穿状态，将控制方式由功率外环、电流内环双闭环暂时转为纯电流环控制；当正序电压低于阈值一时，或综合跌落电压高于阈值二时，进入低穿状态，此时使用纯电流环控制；当正序电压高于阈值一时，或瞬时零序电压高于阈值一时，零序电压低于额定相电压峰值5％且持续3ms，进入低穿恢复状态，功率恢复过程中仍保持纯电流环控制，根据功率指令和额定电压计算电流指令，电流指令恢复后，恢复功率外环计算，变为由功率、电流双闭环控制。进一步地，根据电网输出的三相电压实时计算瞬时电压幅值，包括：对电网输出的三相电压信号进行Clark变换，以获得α、β轴电压；Uα＝1/3*其中，Ua、Ub、Uc为电网输出的三相电压信号；利用获得的α、β轴电压，计算瞬时电压幅值Uamp:进一步地，根据电网输出的三相电压计算瞬时零序电压U0：U0＝/3其中，Ua、Ub、Uc为电网输出的三相电压信号。进一步地，根据瞬时电压幅值Uamp和瞬时零序电压U0计算综合跌落电压Us，综合跌落电压Us为：Us＝Un-Uamp-0.5*|U0|其中，Un为额定相电压峰值。进一步地，进入疑似低穿状态，将控制方式由功率、电流双闭环暂时转为纯电流环控制，具体包括：停止功率外环的计算，根据功率指令和额定电压计算电流指令，将电流环的电流参考值锁定为功率环停止前的输出，将电流环的电流参考值分别与实测电流反馈值id、iq的差值经过PI调节后输出，再与各自的解耦补偿项运算后得到参考电压ud_m、uq_m；参考电压ud_m、uq_m经坐标变换后进SPWM调制，产生驱动信号实现对逆变器的控制。进一步地，进入低穿状态，此时使用纯电流环控制，具体包括：使d轴电流指令为0，计算q轴电流指令，电流指令与实测电流反馈值id、iq的差值经过PI调节后输出，再与各自的解耦补偿项运算后得到参考电压ud_m、uq_m；参考电压ud_m、uq_m经坐标变换后进SPWM调制，由SPWM输出的驱动信号实现对逆变器的控制。进一步地，进入低穿恢复状态后，具体包括：停止无功电流输出，先不恢复功率环；根据功率设定值除额定电压峰值计算电流指令，并且使电流指令随时间缓增，增速为每秒50％额定功率；电流增满后，令功率外环开始运行，功率环的第一个计算周期，积分初值继承当前电流指令，至此，逆变器完全恢复正常运行状态了。进一步地，所述阈值一为85％额定相电压峰值，阈值二设置为70V。与现有技术相比，本发明具有如下技术效果：本发明使用瞬时电压幅值和瞬时零序电压计算综合跌落电压，能够加快低电压穿越进入和离开的检测速度，且属于增量算法，保留了传统正序电压判断方法，在多数情况下综合跌落电压判断速度较快，其他情况下不影响传统正序判断；进入低电压穿越时，电压三相跌落低于75％时判断非常迅速，仅需要0.5ms，电压不平衡跌落时，判断速度取决于故障开始时的相位，如40％单相穿越，时间在0.5ms～7ms之间。平均判断时间显著优于单纯使用正序电压判断。离开低电压穿越时，如果电压恢复后的平衡度较高，判断离开低穿的速度也得到显著加快，仅需0.6ms，令逆变器及早做出反应。在“疑似低穿”、“低穿”以及“低穿恢复”期间使用纯电流环控制，增强稳定性，减少了过流保护的概率。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明中逆变器的基本控制框图；图2为本发明进入低电压穿越的动作逻辑流程图；图3为本发明离开低电压穿越的动作逻辑流程图；图4为本发明单相电压跌落至40％额定相电压峰值时，正序电压、综合跌落电压与阈值的波形图；图5为本发明三相电压跌落至80％额定相电压峰值时，正序电压、综合跌落电压与阈值的波形图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的技术方案的具体实施方式、结构、特征及其功效，详细说明如下。一个或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。考虑到正序电压有滞后性，而瞬时电压幅值可以快速判断低电压穿越状态，但在不平衡穿越时，瞬时电压将正弦波动，低于实际正序电压导致误判。同时，不平衡穿越的电压特点之一，是存在零序电压。因此，将瞬时电压幅值与零序电压结合考虑，提供了一种储能逆变器的低电压穿越控制方法。本实施例公开的一种储能逆变器的低电压穿越控制方法，包括以下步骤：步骤1.采样电网输出的三相电压，并根据电网输出的三相电压计算正序电压Upos、电压幅值Uamp和瞬时零序电压U0；步骤2.根据瞬时电压幅值Uamp和瞬时零序电压U0，计算综合跌落电压Us；步骤3.当瞬时零序电压U0低于阈值一时，进入疑似低穿状态，将控制方式由功率外环、电流内环双闭环暂时转为纯电流环控制；根据上位机下发的功率指令和额定电压计算电流指令，作为电压环参考值；当正序电压Upos低于阈值一时，或综合跌落电压Us高于阈值二时，进入低穿状态，此时使用纯电流环控制；当正序电压Upos高于阈值一时，或瞬时零序电压U0高于阈值一时，零序电压U0低于额定相电压峰值的5％且持续3ms，进入低穿恢复状态，功率恢复过程中仍保持纯电流环控制，根据功率指令和额定电压计算电流指令，电流指令恢复到预设值后，恢复功率外环计算，变为由功率、电流双闭环控制。下面对上述各个步骤进行详细展开：在本发明实施例中，步骤1中根据电网输出的三相电压实时计算瞬时电压幅值Uamp，本子步骤可以包括以下步骤：对电网输出的三相电压信号进行Clark变换，以获得α、β轴电压；Uα＝1/3*其中，Ua、Ub、Uc为电网输出的三相电压信号；利用获得的α、β轴电压，计算瞬时电压幅值Uamp:在本发明实施例中，步骤1中根据电网输出的三相电压计算瞬时零序电压U0：U0＝/3其中，Ua、Ub、Uc为电网输出的三相电压信号。在本发明实施例中，根据电网输出的三相电压，采用DSOGI算法计算正序电压Upos；DSOGI算法公式如下：式中，q为移相因子，代表移相90°，Uαβ由Clark变换得到，U+αβ为αβ轴下的正、负序电压。在本发明实施例中，步骤2中根据瞬时电压幅值Uamp和瞬时零序电压U0计算综合跌落电压Us，综合跌落电压Us为：Us＝Un-Uamp-0.5*|U0|其中，Un为额定相电压峰值，通常为311V。在本发明实施例中，为了检测及应对低电压穿越故障，实时计算正序电压、瞬时电压、零序电压，再计算综合跌落电压。按照图2和图3的动作逻辑应对低电压穿越情况。如图1所示，图1为一种基本的逆变器基本结构和控制框图，其中，主拓扑从左到右为直流电源Vdc、逆变器、滤波器和交流电网；从电网侧采样电压电流，用于锁相和功率计算；从逆变侧采样交流电流，用于电流环控制；控制方式为功率、电流双闭环控制，正常并网运行时，从上位机接收功率指令，双闭环控制准确输出功率。功率、电流双闭环控制，其中，外环为功率环，内环为电流环。对电网侧输出的三相电压信号、三相电流信号进行Clark变换，以获得αβ坐标系下的两相电压、两相电流；对αβ坐标系下的两相电压、两相电流进行Park变换，以获得直轴电压分量、电流分量i1d和交轴的电压分量、电流分量i1q；根据直轴电压分量、电流分量i1d和交轴的电压分量、电流分量i1q计算有功功率P和无功功率Q。逆变侧采用锁相环与电网侧同步，将三相静止坐标系下的逆变侧电流检测信号Ia、Ib、Ic变换成两相坐标系下的电流Id、Iq。上位机输出的有功指令值Pref与实际测得的有功功率P误差经PI调节输出d轴电流指令id_ref；无功指令值Qref与实际测得的无功功率Q的误差经PI调节输出q轴电流指令iq_ref；idref、iqref分别与实测电流反馈值id、iq的差值经过PI调节后输出，再与各自的解耦补偿项ωL运算后得到参考电压ud_m、uq_m；参考电压ud_m、uq_m经坐标变换后进SPWM调制，由SPWM输出驱动信号实现对逆变器的控制。逆变器正常运行时，为了对低电压穿越尽早做出反应，防止电压突变导致的过电流，当瞬时电压Uamp低于阈值一，立即进入“疑似低穿”状态，停止功率外环的计算，根据功率指令和额定电压计算电流指令，将电流环的电流参考值锁定为功率环停止前的输出，将电流环的电流参考值分别与实测电流反馈值id、iq的差值经过PI调节后输出，再与各自的解耦补偿项运算后得到参考电压ud_m、uq_m；参考电压ud_m、uq_m经坐标变换后进SPWM调制，产生驱动信号实现对逆变器的控制，短时间内牺牲功率控制精度，换取稳定性。逆变器正常运行时，下列两个条件满足其一，则进入“低穿”状态：正序电压Upos小于阈值一；或，综合跌落电压Us大于阈值二，延时0.5ms。通常，上述条件发生之前逆变器已经处于“疑似低穿”状态。进入“低穿”状态后：保持控制方式为纯电流环控制，此时使用纯电流环控制，使d轴电流指令为0，q轴电流指令根据国标公式计算，电流指令与实测电流反馈值id、iq的差值经过PI调节后输出，再与各自的解耦补偿项运算后得到参考电压ud_m、uq_m；参考电压ud_m、uq_m经坐标变换后进SPWM调制，由SPWM输出的驱动信号实现对逆变器的控制。其中，q轴电流指令计算公式如下：其中，Qref为功率指令，t为时间。对进入低穿状态的判定，多数情况下，由综合跌落电压Us判出，快于正序电压。例如，发生单相穿越事件，电压跌落到50％额定相电压峰值，正序电压、综合跌落电压情况如图4所示，使用综合跌落电压判断速度显著提高。若电压跌落程度较小，刚好处于正序略小于85％额定相电压峰值的情况，仍然依靠正序电压判出。例如，发生三相穿越时间，电压跌落到80％额定相电压峰值，正序电压，综合跌落电压情况如图5所示，此时综合跌落电压无效，仍依靠正序电压判断。表1展示了不同情况下本发明的判断速度。低电压穿越发生后，改变电流指令，根据国标的公式输出无功电流。表1发生低电压穿越时判断速度对比逆变器PCS处于低穿状态时，下列两个条件满足其一，则进入“低穿恢复”状态：正序电压Upos大于阈值一；或瞬时电压Uamp持续大于阈值一，且零序电压持续低于15V，维持3ms。进入“低穿恢复”状态后：停止无功电流输出，但先不恢复功率环。根据功率设定值除额定电压计算电流指令，并且使电流指令随时间缓增，增速为每秒50％额定功率。电流增满后，即实际电流大小达到指令值后，令功率外环开始运行，功率环的第一个计算周期，积分初值继承当前电流指令，至此，逆变器完全恢复正常运行状态。具体的，低穿事件结束，通常情况下，三相电压会恢复成基本平衡的状态，即零序电压约定于0。因此，在正序电压大于阈值一作为判据之外，如果瞬时电压高于阈值一，且零序电压持续3ms小于15V，则判定为低穿结束。虽然不平衡穿越时零序电压处于正弦波动状态，也有小于15V的时候，但3ms的延时足以覆盖30％的正弦周期，度过低谷。进入“低穿恢复”状态后，根据功率设定值除额定电压计算电流指令，并且使电流指令随时间缓增，增速为每秒50％额定功率。电流增满后，令功率外环开始运行，功率环的第一个计算周期，积分初值继承当前电流指令，至此，逆变器完全恢复正常运行状态。其中，d、q轴电流指令计算可参考如下公式：式中，Pref、Qref为功率指令，t为时间。在本发明实施例中，阈值一通常为264.35V。相电压峰值乘以要求进入低穿的跌落深度，按当前国标要求，220*1.4142*85％＝264.35V。阈值二的取值最小为70V，通常取70V即可，可酌情的增大。两相电压跌落时，会出现当瞬时电压Uamp波动到最低点，此时恰好U0为0的极端情况。因此，应使两相穿越至正序85％时，阈值二大于该情况下Us的最大值。使两相电压各跌落至77.5％额定相电压峰值，Us最大值恰好为70V。如果阈值二小于70V会将该情况误判为低穿。两相电压跌落限制了阈值二的最小值为70V。因此，考虑调整综合跌落电压Us计算式，使其它情况下穿越至正序85％，刚好不会误判。当单相电压跌落至55％，此时U0的系数取0.5恰好可使Us的峰值＝70V。如此，在任何形式的电压跌落下都不会误判，同时尽可能提高了该判据可生效的区间和判断速度。综上，本发明采用DSOGI算法分离电网侧三相电压得到正序电压，作为进入/离开低电压穿越的第一个判据。在此基础上，为弥补正序电压计算速度滞后的缺点，增加一个额外判据：考虑到电压瞬时幅值在不平衡穿越时将正弦波动导致误判，同时电压越不平衡直流分量就越大，因此二者结合考虑，将瞬时电压跌落深度与零序分量的绝对值相减，得到新的判据，该判据在大多数情况下判定速度远快于基于正序电压的判定，尤其是在三相低穿和单相深度低穿的极端情况下，能够快速判断低穿状态的进入和离开，提高了响应速度；在电压跌落较浅的情况下，新增判据将不进行动作，仍然依靠正序电压判断低电压穿越。为尽可能防止电压突变导致的过电流，增加“疑似低穿”和“低穿恢复”状态，当电压瞬时值小于阈值，但未确定是低电压穿越时，先进入“疑似低穿”状态，将功率、电流双闭环控制切换为纯电流环控制，同理，离开低电压穿越时，进入“低穿恢复”状态，在功率恢复过程中仍保持纯电流环控制，短时间内牺牲功率控制精度，但提高了逆变器抗干扰能力。应该理解的是，虽然如上所述的各实施例所涉及的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，如上所述的各实施例所涉及的流程图中的至少一部分步骤可以包括多个步骤或者多个阶段，这些步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤中的步骤或者阶段的至少一部分轮流或者交替地执行。以上实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围，均应包含在本申请的保护范围之内。
