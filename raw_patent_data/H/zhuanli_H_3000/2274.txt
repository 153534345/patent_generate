标题title
一种订单自动拦截方法和电商ERP
摘要abst
本申请公开了一种订单自动拦截方法和电商ERP，包括获取电商平台相应店铺的数据访问权限，设置订单信息的监控规则；从电商平台采集相应店铺的订单信息，将相应订单的订单信息第一次保存到电商ERP的数据库；按时间T1同步订单信息，在每次同步订单信息时，将所述电商平台的订单信息保存到电商ERP的数据库；判断电商ERP数据库的监控信息和对应的电商平台订单信息是否一致：当电商ERP数据库的监控信息和对应的电商平台订单信息不一致时，通过订单拦截单元对所述订单信息不一致的订单进行拦截处理。该方法和相应的电商ERP可以避免在订单执行环节因订单数据异常导致订单损失，提高订单处理的安全性。
权利要求书clms
1.一种订单自动拦截方法，用于电商ERP的订单管理模块，所述订单管理模块包括订单列表和订单拦截单元，其特征在于，所述方法包括以下步骤：步骤W1：获取电商平台相应店铺的数据访问权限，设置订单信息的监控规则，所述监控规则用于订单管理模块监控相应的订单信息，定义被监控的订单信息为监控信息；步骤W2：从电商平台采集相应店铺的订单信息，将相应订单的订单信息第一次保存到电商ERP的数据库，并将订单信息展示在订单列表；步骤W3：按时间T1同步订单信息，将电商ERP的订单信息更新为相应时间的电商平台的订单信息，在每次同步订单信息时，将所述电商平台的订单信息保存到电商ERP的数据库，并将最新的订单信息展示在订单列表，进行下一步骤的操作；步骤W4：判断电商ERP数据库的监控信息和对应的电商平台订单信息是否一致：当电商ERP数据库的监控信息和对应的电商平台订单信息一致时，结束本次订单信息的同步；当电商ERP数据库的监控信息和对应的电商平台订单信息不一致时，通过订单拦截单元对所述订单信息不一致的订单进行拦截处理，将被拦截的订单在订单列表中作拦截标识。2.如权利要求1所述订单自动拦截方法，其特征在于，所述订单管理模块还包括解除拦截单元，通过所述解除拦截单元解除被拦截订单的拦截；在解除被拦截订单的拦截时，手动从订单列表选择相应被拦截订单，将订单状态设置成取消拦截。3.如权利要求2所述订单自动拦截方法，其特征在于，所述订单列表设置有订单状态设置单元，通过所述订单状态设置单元手动切换订单的拦截状态。4.如权利要求1所述订单自动拦截方法，其特征在于，所述监控信息包括商品SKU信息、订单金额信息、订单商品数量、订单收件人信息，其中所述商品SKU信息包括商品标题信息、商品属性信息、商品图片信息。5.如权利要求4所述订单自动拦截方法，其特征在于，在每次将订单信息保存到电商ERP的数据库时，先将相应的订单信息生成对应的ID，再记录相应订单信息的ID到所述电商ERP的数据库，在判断电商ERP数据库的监控信息和对应的电商平台订单信息是否一致时，进行电商ERP数据库监控信息的ID和对应电商平台订单信息的ID进行匹配，如果电商ERP数据库监控信息的ID和对应电商平台订单信息的ID相同，那么判定电商ERP数据库的监控信息和对应的电商平台订单信息一致；如果电商ERP数据库监控信息的ID和对应电商平台订单信息的ID不相同，那么判定电商ERP数据库的监控信息和对应的电商平台订单信息不一致。6.如权利要求5所述订单自动拦截方法，其特征在于，所述订单拦截单元包括拦截分析模块，在步骤W4中，当电商ERP数据库的监控信息和对应的电商平台订单信息不一致时，所述拦截分析模块提取全部电商ERP数据库监控信息的ID和对应电商平台订单信息的ID不相同的监控信息，对提取的监控信息进行拦截分析，并根据所述提取的监控信息生成订单拦截报告；在所述订单拦截报告中展示全部所述提取的监控信息，并说明订单被拦截的原因是相应的监控信息发生异常，将所述订单被拦截的时间作为所述监控信息发生异常的时间记录在所述订单拦截报告中。7.如权利要求5所述订单自动拦截方法，其特征在于，在所述订单被拦截后，继续按时间T1同步被拦截订单的订单信息，判断所述订单在拦截时的监控信息和电商平台的最新订单信息是否一致，当所述订单在拦截时的监控信息和电商平台的最新订单信息一致时，所述订单管理模块自动解除所述订单的拦截。8.如权利要求1所述订单自动拦截方法，其特征在于， 在步骤W3中，当订单管理模块按时间T1同步订单信息时，如果从电商平台获取订单信息返回数据为空时，在订单列表提示相应的订单信息同步失败；和/或，所述订单拦截单元在每次同步订单信息时监控相应订单的订单状态，当相应订单的最新订单状态为退货或者换货时，将所述退货或者换货的订单进行拦截处理；和/或，在步骤W4中，所述拦截处理包括在运单号生成、单价打印、商品发货中的一个或多个环节对相应的拦截订单进行拦截处理。9.如权利要求1所述订单自动拦截方法，其特征在于，所述订单管理模块包括时间控制单元，所述时间控制单元执行所述按时间T1同步订单信息；所述订单信息的同步方式为根据不同电商平台的店铺设置相应的自动同步方式，其中针对一部分电商平台店铺设置成每隔一定时间T1自动同步，针对另一部分电商平台店铺设置成实时同步；或者，所述订单信息的同步方式为手动同步，当运行手动同步后，所述订单管理模块立即执行步骤W3的操作。10.一种电商ERP，其特征在于，所述电商ERP包括订单管理模块，所述订单管理模块执行权利要求1-9中任一项所述订单自动拦截方法所包含的操作指令。
说明书desc
技术领域本申请涉及计算机技术领域，特别涉及一种订单自动拦截方法和对应的电商ERP。背景技术随着全球电子商务的兴起，国际零售贸易得到飞速发展，大量的国内中小型电商卖家将零售业务扩展至国外市场，通过境外的电商平台将国内众多物美价廉的商品销往国外市场。伴随跨境业务的发展，基于ERP软件而开发的电商ERP系统逐步发展起来。电商ERP可以和电商平台深度连接，帮助国内的中小型电商卖家统一管理其海外店铺，解决语言差异带来的障碍，可实现一个运营人员同时管理上百个电商店铺，大幅度提高店铺运营的效率。电商ERP是通过既定的规则访问和控制电商平台的店铺，处理店铺运营各环节的动态数据，数据管理庞杂，同时还要满足多种类型用户的操作便捷性需求；因此现有已商业化的电商ERP的各功能模块都还处于功能逐步更新和完善的阶段，各软件企业在开发自家电商ERP时所制定的功能算法和规则也基本不一样，各功能模块随着用户需求变化会持续开发新的版本，以兼容更多的使用场景。对于已完成发布的店铺商品，可以通过电商ERP对订单进行批量处理，但在订单执行环节，由于可能存在电商平台出现bug、API接口出现异常或其他不可控因素导致卖家拣货、发货出现错误，进而导致物流拒收、报关被拦截等一系列问题，给卖家造成很大损失。尽管这类错误出现的概率非常低，存在偶然性、隐蔽性、持续时间短、可恢复等特点，但是错误出现后损失很大，而且很难查找出订单执行错误的真实原因，也很难要求电商平台承担相应责任。此外，由于一些电商平台会提供定制化的功能服务，一些区域性的中小型电商平台投入运营时间不长，导致电商平台数据不稳定，出现数据出错的概率大幅增加。而且在订单执行环节，如果商品信息出现变更，也可能导致买家购买的商品和实际发货的商品不一致，导致商品发错货。现有电商ERP并未考量并解决这些问题，给订单处理带来很多不确定性。涉及本申请的其他技术问题，在后文进一步阐述。上述内容仅用于辅助理解本申请的技术方案，并不表示上述内容全部都是现有技术。发明内容本申请的主要目的是提供一种订单自动拦截方法和电商ERP，以避免在订单执行环节因订单数据异常导致订单损失，提高订单处理的安全性。为实现上述目的，本申请提出一种订单自动拦截方法，用于电商ERP的订单管理模块，所述订单管理模块包括订单列表和订单拦截单元，其特征在于，所述方法包括以下步骤：步骤W1：获取电商平台相应店铺的数据访问权限，设置订单信息的监控规则，所述监控规则用于订单管理模块监控相应的订单信息，定义被监控的订单信息为监控信息；步骤W2：从电商平台采集相应店铺的订单信息，将相应订单的订单信息第一次保存到电商ERP的数据库，并将订单信息展示在订单列表；步骤W3：按时间T1同步订单信息，将电商ERP的订单信息更新为相应时间的电商平台的订单信息，在每次同步订单信息时，将所述电商平台的订单信息保存到电商ERP的数据库，并将最新的订单信息展示在订单列表，进行下一步骤的操作；步骤W4：判断电商ERP数据库的监控信息和对应的电商平台订单信息是否一致：当电商ERP数据库的监控信息和对应的电商平台订单信息一致时，结束本次订单信息的同步；当电商ERP数据库的监控信息和对应的电商平台订单信息不一致时，通过订单拦截单元对所述订单信息不一致的订单进行拦截处理，将被拦截的订单在订单列表中作拦截标识。这种订单自动拦截方法和对应的电商ERP系统，可以弥补电商平台因系统数据不稳定、数据更新出错、订单执行阶段商品信息变更等问题带来的缺陷，避免订单执行出错，以及在订单执行环节因订单数据异常导致订单损失，提高订单处理的安全性。此外，还可以提高电商ERP系统的稳定性，使电商ERP系统可兼容更多电商平台，包括新的中小型电商平台。当因电商平台原因导致订单损失时，可以通过存储在电商ERP数据库中的相关证据，向相应的电商平台主张赔偿损失，提高店铺运营安全。进一步的，所述订单管理模块还包括解除拦截单元，通过所述解除拦截单元解除被拦截订单的拦截；在解除被拦截订单的拦截时，手动从订单列表选择相应被拦截订单，将订单状态设置成取消拦截。进一步的，所述订单列表设置有订单状态设置单元，通过所述订单状态设置单元手动切换订单的拦截状态。进一步的，所述监控信息包括商品SKU信息、订单金额信息、订单商品数量、订单收件人信息，其中所述商品SKU信息包括商品标题信息、商品属性信息、商品图片信息。进一步的，在每次将订单信息保存到电商ERP的数据库时，先将相应的订单信息生成对应的ID，再记录相应订单信息的ID到所述电商ERP的数据库，在判断电商ERP数据库的监控信息和对应的电商平台订单信息是否一致时，进行电商ERP数据库监控信息的ID和对应电商平台订单信息的ID进行匹配，如果电商ERP数据库监控信息的ID和对应电商平台订单信息的ID相同，那么判定电商ERP数据库的监控信息和对应的电商平台订单信息一致；如果电商ERP数据库监控信息的ID和对应电商平台订单信息的ID不相同，那么判定电商ERP数据库的监控信息和对应的电商平台订单信息不一致。进一步的，所述订单拦截单元包括拦截分析模块，在步骤W4中，当电商ERP数据库的监控信息和对应的电商平台订单信息不一致时，所述拦截分析模块提取全部电商ERP数据库监控信息的ID和对应电商平台订单信息的ID不相同的监控信息，对提取的监控信息进行拦截分析，并根据所述提取的监控信息生成订单拦截报告；在所述订单拦截报告中展示全部所述提取的监控信息，并说明订单被拦截的原因是相应的监控信息发生异常，将所述订单被拦截的时间作为所述监控信息发生异常的时间记录在所述订单拦截报告中。进一步的，在所述订单被拦截后，继续按时间T1同步被拦截订单的订单信息，判断所述订单在拦截时的监控信息和电商平台的最新订单信息是否一致，当所述订单在拦截时的监控信息和电商平台的最新订单信息一致时，所述订单管理模块自动解除所述订单的拦截。进一步的，在步骤W3中，当订单管理模块按时间T1同步订单信息时，如果从电商平台获取订单信息返回数据为空时，在订单列表提示相应的订单信息同步失败；所述订单拦截单元在每次同步订单信息时监控相应订单的订单状态，当相应订单的最新订单状态为退货或者换货时，将所述退货或者换货的订单进行拦截处理；在步骤W4中，所述拦截处理包括在运单号生成、单价打印、商品发货中的一个或多个环节对相应的拦截订单进行拦截处理。进一步的，所述订单管理模块包括时间控制单元，所述时间控制单元执行所述按时间T1同步订单信息；所述订单信息的同步方式为根据不同电商平台的店铺设置相应的自动同步方式，其中针对一部分电商平台店铺设置成每隔一定时间T1自动同步，针对另一部分电商平台店铺设置成实时同步； 或者，所述订单信息的同步方式为手动同步，当运行手动同步后，所述订单管理模块立即执行步骤W3的操作。其他实施方案和技术效果在后文阐述。进一步的，本申请还提供一种系统，系统包含商品模块、销售模块、采购模块、物流模块、仓库模块、财务模块、广告模块、客服模块或工具模块等功能模块，执行相应功能模块的各项操作指令。相应的，本申请还提供一种服务器，服务器包括存储器、处理器，本申请中的各功能模块及其系统储存在存储器，处理器可以执行相应功能模块及其系统的操作指令。此外，本申请还提供一种计算机设备，计算机设备包括存储器、处理器，本申请的各功能模块及其系统储存在存储器，处理器可以执行相应功能模块及其系统的操作指令。申明：参考图1，本申请的电商ERP系统包括商品模块、销售模块、采购模块、物流模块、仓库模块、财务模块、广告模块、客服模块、工具模块、权限管理模块和数据模块等功能模块中的一个或多个；本申请的各功能模块之间可以相互融合，也可以独立存在，还可以是一个功能模块作为另一个功能模块的子模块；本申请的各功能模块可以设置在电商平台上，用于管理相应电商平台的店铺。本申请电商ERP的操作人员也可以称为店铺管理人员、卖家、商家、运营、运营人员、用户、客服人员或提问者，除特别申明外，其身份不做严格限定。本申请中“商品”和“产品”都是本领域习惯性称呼，两者含义相同，不做区分。本申请中，在编辑或创建商品信息时，“填写”和“填充”含义相同，不做区分。本申请中，“电商平台”为“电商平台系统”的简称。本申请中电商领域名词的含义及说明：ERP是企业资源计划，本申请中也可以作为ERP系统的简称。AI是指人工智能。商品标题信息是指用于简要介绍商品的文字信息，通常为一句话。商品描述信息是指用于介绍商品细节特点的商品信息，可以是文字、图片、视频、图表等信息。商品图片信息是指用于展示商品形状、结构、色彩等内容的图片信息，可以包含是一个或多个商品图片。关键词是指用于在搜索、查询时匹配相同或近似类别商品的关联词语。变种是指商品因规格参数变化而衍生出来的变体商品。商品价格信息是指商品在相应规格、购买方式下的商品价格信息。ASIN是亚马逊平台的商品编号，在本申请中可泛指电商平台的商品编号；SKU是指库存商品编码，泛指商品编号所表示的商品；SPU指标准化产品单元；MSKU是指在线商品编码。API是指应用编程接口，在本申请中也称为API接口；Bug是指系统故障；ID是指对应信息的字符串，用于计算机编程中标识相应信息的变量、函数、对象、存储地址或其他程序元素，本申请中“ID”可以表述为“ID字符串”。附图说明附图用来提供对本申请的进一步理解，不构成对本申请的限制；附图所示内容可以是实施例的真实数据，属于本申请的保护范围。图1为本申请一实施例中电商ERP系统功能模块示意图；图2为本申请一实施例中店铺商品订单处理流程示意图；图3为本申请一实施例中订单管理模块结构示意图；图4为本申请一实施例中订单自动拦截方法流程示意图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，下面通过具体实施方式结合附图对本申请实施例做进一步详细说明。应当理解，此处所描述的具体实施例仅用于解释本申请，并不用于限定本申请。如图2-图4所示，本申请提供一种订单自动拦截方法，用于电商ERP的订单管理模块，所述订单管理模块包括订单列表和订单拦截单元，其特征在于，所述方法包括步骤W1-W4的操作。步骤W1：获取电商平台相应店铺的数据访问权限，设置订单信息的监控规则，所述监控规则用于订单管理模块监控相应的订单信息，定义被监控的订单信息为监控信息。步骤W2：从电商平台采集相应店铺的订单信息，将相应订单的订单信息第一次保存到电商ERP的数据库，并将订单信息展示在订单列表。步骤W3：按时间T1同步订单信息，将电商ERP的订单信息更新为相应时间的电商平台的订单信息，在每次同步订单信息时，将所述电商平台的订单信息保存到电商ERP的数据库，并将最新的订单信息展示在订单列表，进行下一步骤的操作。步骤W4：判断电商ERP数据库的监控信息和对应的电商平台订单信息是否一致：当电商ERP数据库的监控信息和对应的电商平台订单信息一致时，结束本次订单信息的同步；当电商ERP数据库的监控信息和对应的电商平台订单信息不一致时，通过订单拦截单元对所述订单信息不一致的订单进行拦截处理，将被拦截的订单在订单列表中作拦截标识，待店铺运营人员进一步核实和处理。在具体实施时，可以将拦截标识自动标识在订单列表，相关的拦截标识可以采用红色文字或符号，使被拦截订单更容易识别。进一步的，订单管理模块还包括解除拦截单元，通过解除拦截单元解除被拦截订单的拦截；在解除被拦截订单的拦截时，手动从订单列表选择相应被拦截订单，将订单状态设置成取消拦截，以解除订单拦截，恢复订单的常规操作权限，使其可以正常发货。此外，订单列表设置有订单状态设置单元，通过订单状态设置单元能够实现手动切换订单的拦截状态。也即，从订单列表中选择相应的订单，可以把已被拦截的订单设置成取消拦截状态，也可以把未被拦截的订单直接设置成拦截状态。比如当运营人员评估订单无需拦截时，可以手动解除订单拦截；当运营人员评估订单需要拦截时，可以手动设置拦截对应的订单，使订单拦截和解除拦截的操作更加便捷。相关实施例中，监控信息包括商品SKU信息、订单金额信息、订单商品数量、订单收件人信息等子订单信息，其中商品SKU信息包括商品标题信息、商品属性信息、商品图片信息等商品信息，商品SKU信息不包括商品描述信息。在买家下单后，如果发生电商平台信息推送错误、订单被取消、订单被退款或电商商品信息更新等事件，可能会导致电商ERP中的订单信息和买家原先下单时的订单信息不一致，进而给订单执行带来风险，因此通过监控信息的设置，使订单管理模块可以自动监控这些关键的监控信息。在每次将订单信息保存到电商ERP的数据库时，先将相应的订单信息生成对应的ID，再记录相应订单信息的ID到所述电商ERP的数据库。在判断电商ERP数据库的监控信息和对应的电商平台订单信息是否一致时，进行电商ERP数据库监控信息的ID和对应电商平台订单信息的ID进行匹配，如果电商ERP数据库监控信息的ID和对应电商平台订单信息的ID相同，那么判定电商ERP数据库的监控信息和对应的电商平台订单信息一致；如果电商ERP数据库监控信息的ID和对应电商平台订单信息的ID不相同，那么判定电商ERP数据库的监控信息和对应的电商平台订单信息不一致。从而避免对订单信息中不同类型的文字和/或图片进行核对校验，提高了对监控信息一致性判断的速度和准确性，也节约了存储监控信息的存储空间。具体实施时，可以是将多个要进行一致性判断的电商ERP监控信息生成一个总的ID，将多个要进行一致性判断的电商平台订单信息生成另一个总的ID，然后将对应的两个总的ID进行匹配，判断总的ID是否相同；也可以是将同一订单的各订单信息分别生成对应的ID，各监控信息分别生成对应的ID，然后对同一订单中相同类型的订单信息进行ID匹配，判断各监控信息和对应的各子订单信息的ID是否相同。ID相同表示匹配的两个订单信息相同/一致。进一步的，在每次将订单信息保存到电商ERP的数据库时，标识相应订单信息的存储时间，以便追溯和计算订单异常的时间。此外，当电商ERP数据库的监控信息和对应的电商平台订单信息不一致时，将拦截订单所涉及全部订单信息以附件方式存储在电商ERP的数据库。订单拦截单元包括拦截分析模块，在步骤W4中，当电商ERP数据库的监控信息和对应的电商平台订单信息不一致时，所述拦截分析模块提取全部电商ERP数据库监控信息的ID和对应电商平台订单信息的ID不相同的监控信息，对提取的监控信息进行拦截分析，并根据所述提取的监控信息生成订单拦截报告。在所述订单拦截报告中展示全部所述提取的监控信息，并说明订单被拦截的原因是相应的监控信息发生异常，将所述订单被拦截的时间作为所述监控信息发生异常的时间记录在所述订单拦截报告中。订单拦截报告可以展示在订单列表的订单详情页面中，订单详情页面还可以展示相应订单的执行进度情况。在其他实施例中，拦截分析模块统计各被拦截订单的订单数量和订单金额，以作为店铺运营风险的参考，其中由电商平台导致订单拦截的订单数量和订单金额作为电商平台稳定性评估的依据，而存储在电商ERP数据库中的订单信息可以作为向电商平台主张赔偿的证据，进而提高店铺运营安全。一实施例中，在订单被拦截后停止被拦截订单的订单信息同步，待拦截解除后再继续同步相应的订单。另一实施例中，在所述订单被拦截后，继续按时间T1同步被拦截订单的订单信息，判断所述订单在拦截时的监控信息和电商平台的最新订单信息是否一致，当所述订单在拦截时的监控信息和电商平台的最新订单信息一致时，所述订单管理模块自动解除所述订单的拦截，从而使电商平台系统在恢复正确的订单信息后，电商ERP系统能够相应的解除订单拦截。进一步的，在步骤W3中，当订单管理模块按时间T1同步订单信息时，如果从电商平台获取订单信息返回数据为空时，判断订单信息同步失败，在订单列表提示相应的订单信息同步失败，以告知店铺运营人员异。进一步的，订单拦截单元在每次同步订单信息时监控相应订单的订单状态，当相应订单的最新订单状态为退货或者换货时，将所述退货或者换货的订单进行拦截处理。进一步的，在步骤W4中，所述拦截处理包括在运单号生成、单价打印、商品发货中的一个或多个环节对相应的拦截订单进行拦截处理，以禁止被拦截订单在相关拦截处理环节进行相应的操作，或者在相关拦截处理环节生成相应的订单拦截提示。如图2所示，在电商ERP系统上，订单处理流程包括订单审核、物流设置、运单号生成、单据打印、商品发货和售后服务八个订单执行环节。其中，在订单审核环节，运营人员可以查看清单需求，包括查看订单商品、买家留言等信息，并审核是否承接订单；在物流设置环节，运营人员进行填写报关信息、选择物流方式、申请运单号等操作；在运单号生成环节，根据向物流商系统提交的订单信息和报关信息生成运单号，并在运单号生成后将相应订单转入单据打印环节；在单据打印环节，完成商品拣货单和发货单的打印；在商品发货环节完成商品的拣货和发货；在售后服务环节进行订单退货、换货、客户关怀、满意度调查等操作。当订单被拦截处理后，在被拦截订单生成拣货单和/或发货单时，在生成的拣货单和/或发货单上标识订单或订单商品被拦截的提示信息，以提醒相关人员注意并核实实际的订单信息。进一步的，订单管理模块还包括时间控制单元，时间控制单元执行步骤W3中所述按时间T1同步订单信息。所述订单信息的同步方式为根据不同电商平台的店铺设置相应的自动同步方式，其中针对一部分电商平台店铺设置成每隔一定时间T1自动同步，针对另一部分电商平台店铺设置成实时同步，从而方便运营人员针对不同类型的店铺灵活设置订单同步时间，可以实现在订单高峰期让优先级更高的店铺订单提前同步，以及不同发货周期的订单分开处理。具体实施中，可以通过设置订单同步规则来设置订单信息的同步方式。或者，所述订单信息的同步方式为手动同步，当运行手动同步后，所述订单管理模块立即执行步骤W3的操作。以上所述仅为本申请的优选实施例，并非因此限制本申请的专利范围，凡是在本申请的发明构思下，利用本申请说明书及附图内容所作的等效变换，或直接/间接运用在其他相关的技术领域均包括在本申请的专利保护范围内。
