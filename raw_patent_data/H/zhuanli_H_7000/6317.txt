标题title
遥测报文传输方法、装置、通信设备及存储介质
摘要abst
本申请实施例提供了一种遥测报文传输方法、装置、通信设备及存储介质，包括：获取目标遥测报文；获取目标遥测报文，目标遥测报文包括至少一个第一遥测栏位数据；获取预先存储的历史遥测报文，历史遥测报文存储于预先设置的存储模块中，历史遥测报文包括第二遥测栏位数据；将第一遥测栏位数据和第二遥测栏位数据进行比对处理，得到目标遥测报文和历史遥测报文之间的差异值；根据差异值和预设阈值之间的关系确定目标遥测报文是否传输。本申请实施例通过差异式遥测信息传输，实现了减少传输数据量、提高传输效率、节省带宽资源、和数据一致性等有益效果，有助于提升遥测系统的性能和可靠性，同时降低了数据传输的成本和资源消耗。
权利要求书clms
1.一种遥测报文传输方法，其特征在于，应用于第一交换机，所述方法包括：获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；获取预先存储的历史遥测报文，其中，所述历史遥测报文存储于预先设置的存储模块中，所述历史遥测报文包括第二遥测栏位数据；将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输。2.根据权利要求1所述的遥测报文传输方法，其特征在于，所述获取预先存储的历史遥测报文包括：获取所述目标遥测报文的键值；根据所述键值获取预先存储的历史遥测报文。3.根据权利要求1所述的遥测报文传输方法，其特征在于，所述根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输包括：在检测到所述差异值小于预设阈值的情况下，删除所述目标遥测报文的遥测栏位数据，将所述遥测报文传输至第二交换机。4.根据权利要求1所述的遥测报文传输方法，其特征在于，所述根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输包括：在检测到所述差异值大于预设阈值的情况下，将键值对应的遥测栏位数据进行更新至所述存储模块中，将所述遥测报文传输至第二交换机。5.根据权利要求2或3所述的遥测报文传输方法，其特征在于，所述将所述遥测报文传输至第二交换机包括：判断第一交换机是否为上报节点；根据判断结果确定是否传输至第二交换机。6.根据权利要求5所述的遥测报文传输方法，其特征在于，所述根据判断结果确定是否传输至第二交换机包括：若所述第一交换机为非上报节点；将所述第一交换机的遥测栏位数据添加至所述目标遥测报文中，得到目标附加遥测报文；并将所述目标附加遥测报文传输至第二交换机。7.根据权利要求4所述的遥测报文传输方法，其特征在于，所述根据判断结果确定是否传输至第二交换机包括：若所述第一交换机为上报节点；将目标附加遥测报文中的附加遥测资料上传至控制器，并将附加遥测资料从所述目标附加遥测报文中剥离；将所述遥测报文发送至第二服务器。8.根据权利要求7所述的遥测报文传输方法，其特征在于，所述将目标附加遥测报文中的附加遥测资料上传至控制器包括：将目标附加遥测报文中的附加遥测资料上传至控制器，以使所述控制器对所述目标遥测报文进行分析处理，得到分析结果。9.根据权利要求7所述的遥测报文传输方法，其特征在于，所述将目标附加遥测报文中的附加遥测资料上传至控制器，以使所述控制器对所述目标遥测报文进行分析处理，得到分析结果包括：向控制器发送目标遥测报文，若所述目标遥测报文中遥测栏位数据存在缺失，所述控制器根据所述历史遥测报文对应的遥测栏位数据对所述目标遥测报文进行填充。10.根据权利要求2所述的遥测报文传输方法，其特征在于，获取所述目标遥测报文的键值包括：根据所述目标遥测报文中的5元组进行拼接，得到拼接5元组；获取所述拼接5元组的哈希值作为所述目标遥测报文的键值。11.根据权利要求10所述的遥测报文传输方法，其特征在于，所述键值用于构建索引和比对处理，所述索引存储于预设存储模块。12.根据权利要求10所述的遥测报文传输方法，其特征在于，所述5元组包括：源IP地址、目的IP地址、源端口号、目的端口号以及协议类型。13.根据权利要求12所述的遥测报文传输方法，其特征在于，所述根据所述目标遥测报文中的5元组进行拼接包括：根据预设顺序将所述目标遥测报文中的5元组进行拼接，其中，所述预设顺序包括从源IP地址、目的IP地址、源端口号、目的端口号至协议类型。14.根据权利要求2所述的遥测报文传输方法，其特征在于，所述根据所述键值获取预先存储的历史遥测报文包括：根据所述键值从预设存储模块中获取预先存储的历史遥测报文，其中，所述历史遥测报文的键值和所述目标遥测报文的键值相同。15.根据权利要求1所述的遥测报文传输方法，其特征在于，所述遥测栏位数据包括：switch_id、latency、queue_offset以及queue_depth。16.根据权利要求1所述的遥测报文传输方法，其特征在于，所述将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值包括：获取所述目标遥测报文的第一遥测栏位数据，以及，所述历史遥测报文的第二遥测栏位数据；基于相同的遥测栏位对所述第一遥测栏位数据和所述第二遥测栏位数据进行比对处理，得到所述第一遥测栏位数据和所述第二遥测栏位数据之间的差异值。17.根据权利要求1所述的遥测报文传输方法，其特征在于，所述获取目标遥测报文包括：接收第一服务器发送的普通报文，其中，所述普通报文用于向第二服务器发送；识别出所述普通报文中的目标遥测报文。18.根据权利要求17所述的遥测报文传输方法，其特征在于，所述识别出所述普通报文中的目标遥测报文包括：通过DSCP值、对所述普通报文中的标头进行解析或者预设解析协议识别出所述普通报文中的目标遥测报文。19.一种遥测报文传输装置，其特征在于，应用于第一交换机，所述装置包括：第一获取模块，用于获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；第二获取模块，用于获取预先存储的历史遥测报文，其中，所述历史遥测报文存储于预先设置的存储模块中，所述历史遥测报文包括第二遥测栏位数据；比对模块，用于将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；传输模块，用于根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输。20.一种通信设备，其特征在于，包括：收发机、存储器、处理器及存储在所述存储器上并可在所述处理器上运行的程序；所述处理器，用于读取存储器中的程序实现如权利要求1-18中任意一项所述遥测报文传输方法。21.一种可读存储介质，用于存储程序，其特征在于，所述程序被处理器执行时实现如权利要求1-18中任意一项所述遥测报文传输方法。
说明书desc
技术领域本申请涉及数据处理技术领域，特别是一种遥测报文传输方法、装置、通信设备及存储介质。背景技术带内网络遥测是一种网络监测技术，可以提供对网络中的数据流进行实时、精细粒度的监测和分析。INT允许网络设备在数据包转发的过程中将关键信息嵌入到数据包中，从而实现对网络的深入了解和分析。INT技术面临一些挑战和限制，首先，INT需要网络设备的支持和配置，目前并不是所有的网络设备都支持INT功能，其次，INT会在数据包中添加额外的元数据字段，增加了数据包的大小，可能对网络的带宽利用率产生一定的影响。相关技术中，为了解决网络拥塞，通过将多个数据点或数据片段合并为一个数据单元，从而减少频繁传输的数据量，然而，这种合并操作会导致数据的精度损失，因为一些细节信息可能会在合并过程中丢失，并且，数据聚合涉及对数据进行处理和计算，需要额外的计算资源和时间，特别是在实时传输的场景下，数据聚合和压缩的计算复杂性可能会导致传输的延迟增加，从而影响实时性能。发明内容本申请实施例的目的在于提供一种遥测报文传输方法、装置、通信设备及存储介质，以解决现有技术中通过数据聚合从而导致降低数据的精度的技术问题。具体技术方案如下：在本申请实施的第一方面，首先提供了一种遥测报文传输方法，应用于第一交换机，所述方法包括：获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；获取预先存储的历史遥测报文，其中，所述历史遥测报文存储于预先设置的存储模块中，所述历史遥测报文包括第二遥测栏位数据；将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输。可选地，所述根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输包括：在检测到所述差异值小于预设阈值的情况下，删除所述目标遥测报文的遥测栏位数据，将所述遥测报文传输至第二交换机。。可选地，所述根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输包括：在检测到所述差异值大于预设阈值的情况下，将所述键值对应的遥测栏位数据进行更新至所述存储模块中，将所述遥测报文传输至第二交换机。可选地，所述将所述遥测报文传输至第二交换机包括：判断第一交换机是否为上报节点；根据判断结果确定是否传输至第二交换机。可选地，所述根据判断结果确定是否传输至第二交换机包括：若所述第一交换机为非上报节点；将所述第一交换机的遥测栏位数据添加至所述目标遥测报文中，得到目标附加遥测报文；并将所述目标附加遥测报文传输至第二交换机。可选地，所述根据判断结果确定是否传输至第二交换机包括：若所述第一交换机为上报节点；将目标附加遥测报文中的附加遥测资料上传至控制器，并将附加遥测资料从所述目标附加遥测报文中剥离；将所述遥测报文发送至第二服务器。可选地，所述将目标附加遥测报文中的附加遥测资料上传至控制器包括：将目标附加遥测报文中的附加遥测资料上传至控制器，以使所述控制器对所述目标遥测报文进行分析处理，得到分析结果。可选地，所述将目标附加遥测报文中的附加遥测资料上传至控制器，以使所述控制器对所述目标遥测报文进行分析处理，得到分析结果包括：向控制器发送目标遥测报文，若所述目标遥测报文中遥测栏位数据存在缺失，所述控制器根据所述历史遥测报文对应的遥测栏位数据对所述目标遥测报文进行填充。可选地，获取所述目标遥测报文的键值包括：根据所述目标遥测报文中的5元组进行拼接，得到拼接5元组；获取所述拼接5元组的哈希值作为所述目标遥测报文的键值。可选地，所述键值用于构建索引和比对处理，所述索引存储于预设存储模块。可选地，所述5元组包括：源IP地址、目的IP地址、源端口号、目的端口号以及协议类型。可选地，所述根据所述目标遥测报文中的5元组进行拼接包括：根据预设顺序将所述目标遥测报文中的5元组进行拼接，其中，所述预设顺序包括从源IP地址、目的IP地址、源端口号、目的端口号至协议类型。可选地，所述根据所述键值获取预先存储的历史遥测报文包括：根据所述键值从预设存储模块中获取预先存储的历史遥测报文，其中，所述历史遥测报文的键值和所述目标遥测报文的键值相同。可选地，所述遥测栏位数据包括：switch_id、latency、queue_offset以及queue_depth。可选地，所述将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值包括：获取所述目标遥测报文的第一遥测栏位数据，以及，所述历史遥测报文的第二遥测栏位数据；基于相同的遥测栏位对所述第一遥测栏位数据和所述第二遥测栏位数据进行比对处理，得到所述第一遥测栏位数据和所述第二遥测栏位数据之间的差异值。可选地，所述获取目标遥测报文包括：接收第一服务器发送的普通报文，其中，所述普通报文用于向第二服务器发送；识别出所述普通报文中的目标遥测报文。可选地，所述识别出所述普通报文中的目标遥测报文包括：通过DSCP值、对所述普通报文中的标头进行解析或者预设解析协议识别出所述普通报文中的目标遥测报文。在本申请实施的又一方面，还提供了一种遥测报文传输系统，所述遥测报文传输系统包括：第一交换机以及控制器；所述第一交换机用于获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；获取预先存储的历史遥测报文，其中，所述历史遥测报文存储于预先设置的存储模块中，所述历史遥测报文包括第二遥测栏位数据；将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输；所述控制器用于在所述第一交换机为上报节点的情况下，接收第一交换机发送的目标附加遥测报文中的附加遥测资料。在本申请实施的又一方面，还提供了一种遥测报文传输装置，所述装置包括：第一获取模块，用于获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；第二获取模块，用于获取预先存储的历史遥测报文，其中，所述历史遥测报文存储于预先设置的存储模块中，所述历史遥测报文包括第二遥测栏位数据；比对模块，用于将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；传输模块，用于根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输。在本申请实施的又一方面，还提供了一种通信设备，包括处理器、通信接口、存储器和通信总线，其中，处理器，通信接口，存储器通过通信总线完成相互间的通信；存储器，用于存放计算机程序；处理器，用于执行存储器上所存放的程序时，实现上述任一所述的遥测报文传输方法。在本申请实施的又一方面，还提供了一种计算机可读存储介质，所述计算机可读存储介质中存储有指令，当其在计算机上运行时，使得计算机执行上述任一所述的遥测报文传输方法。在本申请实施的又一方面，还提供了一种包含指令的计算机程序产品，当其在计算机上运行时，使得计算机执行上述任一所述的遥测报文传输方法。本申请实施例提供的遥测报文传输方法，通过获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；获取预先存储的历史遥测报文，其中，所述历史遥测报文存储于预先设置的存储模块中，所述历史遥测报文包括第二遥测栏位数据；将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输。本申请实施例通过比对获取遥测报文的差异值，能够仅传输发生超过阈值变化的遥测数据，而不需要传输完整的数据。这大大减少了传输的数据量，节省了网络带宽资源。另外，相较于相关技术中使用数据聚合的方法，通过比较和填充缺失的栏位，本申请实施例确保了遥测数据的一致性，进而将遥测报文上报至控制器，使得控制器能够获取完整的遥测数据，减少了数据不一致或遗漏的情况，从而提高了数据的准确性和可靠性。因此，本申请实施例通过差异式遥测信息传输，实现了减少传输数据量、提高传输效率、节省带宽资源、和数据一致性等有益效果，有助于提升遥测系统的性能和可靠性，同时降低了数据传输的成本和资源消耗。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍。图1示出了本申请实施例提供的遥测报文传输方法的步骤流程图一；图2示出了本申请实施例提供的遥测报文传输方法的步骤流程图二；图3示出了本申请实施例提供的遥测报文传输方法的步骤流程图三；图4示出了本申请实施例提供的遥测报文传输方法的步骤流程图四；图5示出了本申请实施例提供的一种遥测报文传输装置的装置框图；图6示出了本申请实施例提供的一种通信设备的结构框图；图7示出了本申请实施例提供的一种遥测报文传输网络拓扑示意图；图8示出了本申请实施例提供的一种遥测报文传输架构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行描述。为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合附图对本申请的各实施方式进行详细的阐述。然而，本领域的普通技术人员可以理解，在本申请各实施方式中，为了使读者更好地理解本申请而提出了许多技术细节。但是，即使没有这些技术细节和基于以下各实施方式的种种变化和修改，也可以实现本申请所要求保护的技术方案。以下各个实施例的划分是为了描述方便，不应对本申请的具体实现方式构成任何限定，各个实施例在不矛盾的前提下可以相互结合相互引用。需要说明的是，在本申请实施例中，参照图8，图8示出了本申请实施例提供的一种遥测报文传输架构示意图，可以看出，服务器、交换机以及控制器构成本申请中的遥测报文传输系统，其中，图中PKT表示packet，业务报文，即本申请中第一服务器向第二服务器发送的全部报文的统称，也即普通报文，交换机可以通过一些方式在普通报文中识别出遥测报文，其中，遥测报文是指带内网络遥测报文，MD表示metadata，代表交换机上收集的信息总称。需要说明的是，本申请中进行的带内网络遥测是一种不需要网络控制平面干预，网络数据平面收集和报告网络状态的框架，在带内网络遥测架构中，交换设备转发处理携带遥测指令的数据包。当遥测数据包经过该设备时，这些遥测指令告诉具备网络遥测功能的网络设备应该收集并写入何种网络状态信息。首先，对应服务器来讲，服务器包括第一服务器和第二服务器，第一服务器用于发送普通报文，第二服务器用于接收普通报文。其次，对于交换机来讲，交换机是该系统的核心组件，位于第一服务器和第二服务器之间，扮演着数据传输的中继角色，负责遥测数据的收集和处理，并在指定交换机将其遥测数据传输到控制器。需要说明的是，对于交换机来讲，参照图7，图7中示例性的示出了一种遥测报文传输网络拓扑示意图，本申请实施例中，在整个遥测报文传输过程中交换机的数量不是限定为三个，对交换机的数量不做具体限定，对于第一服务器和第二服务器进行报文传输时，最后一个传递至服务器的交换机可以被称为遥测尾节点或者上报节点。最后，对于控制器来讲，控制器负责接收和处理来自交换机的遥测数据。它对数据进行解码、分析和决策，根据特定的业务逻辑执行相应的控制操作。另外，控制器可以包括对应的可视化界面，可以实时监测网络设备的状态和性能指标，及时发现处理网络故障，进行相应的配置和调整。参照图1，示出了本申请实施例提供的遥测报文传输方法的步骤流程图一，所述方法可以包括：需要说明的是，在本申请实施例中，应用于第一交换机，第一交换机和第二交换机可以是同一个交换机也可以是不同的交换机，取决于当前交换机是否为遥测尾节点或者上报节点。为了便于本领域技术人员理解本申请实施例，以第一交换机和第二交换机进行阐述。步骤101，获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；第一交换机可以获取第一服务器或者其他使用者发送的普通报文，第一交换机可以识别出普通报文中的属于带内网络遥测的目标遥测报文。其中，目标遥测报文包括至少一个第一遥测栏位数据，遥测栏位是根据用户实际需求，为交换机上收集的遥测信息的统称，在本申请实施例中，遥测栏位可以包括switch_id、latency、queue_offset、queue_depth。步骤102，获取预先存储的历史遥测报文，其中，所述历史遥测报文存储于预先设置的存储模块中，所述历史遥测报文包括第二遥测栏位数据；需要说明的是，历史遥测报文是需要和目标遥测报文存在相同遥测栏位的报文，因此，需要根据一些方法获取预先存储的历史遥测报文，其中，历史遥测报文存储于预先设置的存储模块中，并且，后续当遥测栏位进行更新时，也可以存储于该模块中。进一步地，步骤102可以包括：获取所述目标遥测报文的键值；根据所述键值获取预先存储的历史遥测报文。第一交换机可以通过目标遥测报文的5元组获取键值。需要说明的是，在本申请实施例中，5元组是一个通信术语，英文名称为five-tuple，或5-tuple，可以理解为五个元素组合，通常指由源IP , 源端口,目标IP ，目标端口，4层通信协议等5个字段来表示一个会话，在本申请实施例中，5元组包括：源IP地址、目的IP地址、源端口号、目的端口号以及协议类型。具体的，键值为目标遥测报文的5元组拼接，然后计算其哈希值得出，哈希值特性是只要输入的字串相同，則输出值也相同，因此，所以键值相同代表同一个flow。例如，示例性的存在遥测报文1、遥测报文2，其中，遥测报文1和遥测报文2均为一种目标遥测报文。遥测报文1使用5元组可以表示为：源IP地址: 192.168.0.1、目的IP地址:10.0.0.1、源端口号: 5001、目的端口号: 8001、协议类型: TCP。遥测报文2使用5元组可以表示为：源IP地址: 192.168.0.2、目的IP地址:10.0.0.1、源端口号: 5002、目的端口号: 8001、协议类型: UDP。那么根据哈希算法，例如SHA-256算法，进行哈希计算，可以得到：遥测报文1的键值：SHA-256 = dbecccaba64a926661e05dc02968315d8ce0735fe4d6231d4473ac9c6c720d33；遥测报文2的键值：SHA-256 = 3c96d8af418a8bb33d74e8bb4479d93b6821f0f3415b384a2c526b57959ca8c8。在获取当前需要传输的目标遥测报文的键值之后，交换机可以根据键值从存储中取出之前记录的相同5元组的遥测栏位数据，那么该遥测栏位数据对应的报文即为历史遥测报文。需要说明的是，除了上述通过5元组的方式确定遥测报文的键值从而选择和目标遥测报文有相同遥测栏位的历史遥测报文的方法，本申请中获取预先存储的历史遥测报文还可以通过对遥测栏位进行特殊标记来判断当前历史遥测报文是否是目标遥测报文相似或相同的报文。另外，本申请可以通过增加一个遥测栏位，或者，对已有的遥测栏位进行设置来判断历史遥测报文和目标遥测报文是否存在相同遥测栏位。步骤103，将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；进而，使用键值取出相同5元组的记录进行每个遥测栏位比较，交换机根据键值从存储中取出之前记录的相同5元组的遥测栏位数据，交换机比较当前接收到的遥测栏位数据与之前记录的数据，判断它们之间的差异是否超过设定的阈值。具体的，通过json格式记录遥测栏位数据；{"dbecccaba64a926661e05dc02968315d8ce0735fe4d6231d4473ac9c6c720d33"：{"_comment": "遥测报文1","switch_id" : "switch_1","latency": 900,"queue_offset": 1,"queue_depth": 100},"3c96d8af418a8bb33d74e8bb4479d93b6821f0f3415b384a2c526b57959ca8c8"；{"_comment": "遥测报文2","switch_id" : "switch_1","latency": 850,"queue_offset": 2,"queue_depth": 100}}需要说明的是，上述是示例性的遥测报文1和遥测报文2对应的遥测栏位数据记录，其中，"dbecccaba64a926661e05dc02968315d8ce0735fe4d6231d4473ac9c6c720d33"代表遥测报文1的键值，"3c96d8af418a8bb33d74e8bb4479d93b6821f0f3415b384a2c526b57959ca8c8"代表遥测栏位2的键值，可以看出，键值可以构建索引，另外，_comment相当于一个注释，switch_id为当前交换机id，latency为报文出时戳-入时戳，queue_offset为目前出口queue的使用情形，queue_depth为出口queue的大小。那么，示例性的将历史遥测报文表示为遥测报文3，其对应的5元组可以表示为遥测报文3：源IP地址: 192.168.0.1、目的IP地址: 10.0.0.1、源端口号: 5001、目的端口号:8001、协议类型: TCP。并且其对应的遥测栏位数据通过json格式记录遥测栏位数据：{"switch_id" : "switch_1","latency": 950,"queue_offset": 1,"queue_depth": 10}因此，针对目标遥测报文以及历史遥测报文进行比对，首先使用遥测报文3的5元组拼接，计算其哈希值作为键值，因遥测报文3的5元组与遥测报文1的5元组相同，所以最后算得和遥测报文1相同的键值，取得上次的遥测纪录，并与其进行差异比较。步骤104，根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输。需要说明的是，在本申请实施例中，根据差异值确定目标遥测报文是否进行传输以及传输目标是什么以及是否需要上报至控制器。具体的，参照后续阐述。另外，本申请实施例中，预设阈值可以根据实际应用场景进行设置，具体的，针对每一个遥测栏位可以设置不同的预设阈值，其中，当遥测栏位为switch_id时，此时由于switch_id表示当前交换机ID，是对交换机的一种唯一标识，因此，无论该遥测栏位对应的差异值无论多少，均保留该遥测栏位。本申请实施例提供的遥测报文传输方法，通过获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；获取所述目标遥测报文的键值；根据所述键值获取预先存储的历史遥测报文；将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输。本申请实施例通过比对获取遥测报文的差异值，能够仅传输发生超过阈值变化的遥测数据，而不需要传输完整的数据。这大大减少了传输的数据量，节省了网络带宽资源。另外，相较于相关技术中使用数据聚合的方法，通过比较和填充缺失的栏位，本申请实施例确保了遥测数据的一致性，进而将遥测报文上报至控制器，使得控制器能够获取完整的遥测数据，减少了数据不一致或遗漏的情况，从而提高了数据的准确性和可靠性。因此，本申请实施例通过差异式遥测信息传输，实现了减少传输数据量、提高传输效率、节省带宽资源、和数据一致性等有益效果，有助于提升遥测系统的性能和可靠性，同时降低了数据传输的成本和资源消耗。参照图2，示出了本申请实施例提供的遥测报文传输方法的步骤流程图二，所述方法可以包括：步骤201，获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；步骤202，获取预先存储的历史遥测报文，其中，所述历史遥测报文存储于预先设置的存储模块中，所述历史遥测报文包括第二遥测栏位数据；步骤203，将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；需要说明的是，在本申请实施例中，上述步骤201-204中，参照前序论述，在此不再论述。步骤204，在检测到所述差异值小于预设阈值的情况下，删除所述目标遥测报文的遥测栏位数据，将所述遥测报文传输至第二交换机。步骤205，在检测到所述差异值大于预设阈值的情况下，将所述键值对应的遥测栏位数据进行更新至所述存储模块中，将所述遥测报文传输至第二交换机。需要说明的是，在本申请实施例中，在确定目标遥测报文和历史遥测报文之间针对遥测栏位的差异值之后，根据差异值的大小确定遥测报文的传输。具体的，如果差异超过阈值，交换机会更新该键值对应的遥测栏位数据为当前接收到的数据，例如，以前序的遥测报文1、遥测报文2一斤遥测报文3为例进行阐述，可以看出，queue_depth的差异超过事先设定好的阈值，那么此时，更新该键值中5元组记录的遥测栏位数据，即更新纪录。如果差异未超过阈值，第一交换机将删除当前遥测栏位数据，并将其传输到下一节点。以遥测报文3为例，latency与queue_offset差异未达到阈值，则删除当前遥测栏位数据，并将其传输到下一节点，例如：遥测报文3源IP地址: 192.168.0.1目的IP地址: 10.0.0.1源端口号: 5001目的端口号: 8001协议类型: TCP{"switch_id" : "switch_1","queue_depth": 10}进而，在确定差异值和阈值之间的关系之后，需要判断当前报文所在的交换机，即第一交换机是否为最后一跳交换机，即是否为遥测尾节点或者上报节点。具体的，如果是最后一跳交换机，如果当前交换机是最后一跳，它会将报文中的遥测资料上送给控制器，并将遥测资料从报文中剥离后发送到服务器2。如果不是最后一跳交换机，如果当前交换机不是最后一跳，它会将附加的交换机遥测资料添加到遥测报文中，并将整个遥测报文传输到下一节点。进一步地，对于差异值大于预设阈值和小于预设阈值来讲，所述将所述遥测报文传输至第二交换机包括：判断第一交换机是否为上报节点；根据判断结果确定是否传输至第二交换机。在第一种情况下，即第一交换机为非上报节点，那么根据判断结果确定是否传输至第二交换机包括：将所述第一交换机的遥测栏位数据添加至所述目标遥测报文中，得到目标附加遥测报文；并将所述目标附加遥测报文传输至第二交换机。在第二种情况下，即第一交换机为上报节点，那么根据判断结果确定是否传输至第二交换机包括：将目标附加遥测报文中的附加遥测资料上传至控制器，并将附加遥测资料从所述目标附加遥测报文中剥离；将所述遥测报文发送至第二服务器。进一步地，对于控制器来讲，当控制器接收到目标附加遥测报文上报的附加遥测资料之后，会对目标遥测报文进一步处理。即将目标附加遥测报文中的附加遥测资料上传至控制器包括：将目标附加遥测报文中的附加遥测资料上传至控制器，以使所述控制器对所述目标遥测报文进行分析处理，得到分析结果。所述将目标附加遥测报文中的附加遥测资料上传至控制器，以使所述控制器对所述目标遥测报文进行分析处理，得到分析结果包括：向控制器发送目标遥测报文，若所述目标遥测报文中遥测栏位数据存在缺失，所述控制器根据所述历史遥测报文对应的遥测栏位数据对所述目标遥测报文进行填充。需要说明的是，控制器接收来自交换机3的遥测报文，它对接收到的数据进行分析，如果某个栏位在当前报文中缺失，控制器会使用先前遥测报文中相同5元组对应栏位的值进行填充，以确保遥测报文的完整性和一致性。即本申请实施例中，当遥测报文传输到控制器时，控制器检查接收到的报文与先前记录的差异，对于缺少的栏位，自动填充使用先前遥测报文中相同5元组的内容。本申请实施例通过比对获取遥测报文的差异值，能够仅传输发生超过阈值变化的遥测数据，而不需要传输完整的数据。这大大减少了传输的数据量，节省了网络带宽资源。另外，相较于相关技术中使用数据聚合的方法，通过比较和填充缺失的栏位，本申请实施例确保了遥测数据的一致性，进而将遥测报文上报至控制器，使得控制器能够获取完整的遥测数据，减少了数据不一致或遗漏的情况，从而提高了数据的准确性和可靠性。另外，本申请实施例通过差异式遥测信息传输和自动填充缺失遥测栏位，实现了减少传输数据量、提高传输效率、节省带宽资源、和数据一致性等有益效果，有助于提升遥测系统的性能和可靠性，同时降低了数据传输的成本和资源消耗。参照图3，示出了本申请实施例提供的遥测报文传输方法的步骤流程图三，所述方法可以包括：步骤301，获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据。需要说明的是，上述步骤301参照前序论述，在此不再赘述。步骤302，根据所述目标遥测报文中的5元组进行拼接，得到拼接5元组；步骤303，获取所述拼接5元组的哈希值作为所述目标遥测报文的键值；其中，所述键值用于构建索引和比对处理，所述索引存储于预设存储模块。所述5元组包括：源IP地址、目的IP地址、源端口号、目的端口号以及协议类型。具体的，5元组拼接是根据预设顺序将所述目标遥测报文中的5元组进行拼接，其中，所述预设顺序包括从源IP地址、目的IP地址、源端口号、目的端口号至协议类型。需要说明的是，第一交换机可以通过目标遥测报文的5元组获取键值。在本申请实施例中，5元组是一个通信术语，英文名称为five-tuple，或5-tuple，可以理解为五个元素组合，通常指由源IP , 源端口,目标IP，目标端口，4层通信协议 等5个字段来表示一个会话，在本申请实施例中，5元组包括：源IP地址、目的IP地址、源端口号、目的端口号以及协议类型。具体的，键值为目标遥测报文的5元组拼接，然后计算其哈希值得出，哈希值特性是只要输入的字串相同，則输出值也相同，因此，所以键值相同代表同一个flow。例如，示例性的存在遥测报文1、遥测报文2，其中，遥测报文1和遥测报文2均为一种目标遥测报文。遥测报文1使用5元组可以表示为：源IP地址: 192.168.0.1、目的IP地址:10.0.0.1、源端口号: 5001、目的端口号: 8001、协议类型: TCP。遥测报文2使用5元组可以表示为：源IP地址: 192.168.0.2、目的IP地址:10.0.0.1、源端口号: 5002、目的端口号: 8001、协议类型: UDP。那么根据哈希算法，例如SHA-256算法，进行哈希计算，可以得到：遥测报文1的键值：SHA-256 = dbecccaba64a926661e05dc02968315d8ce0735fe4d6231d4473ac9c6c720d33；遥测报文2的键值：SHA-256 = 3c96d8af418a8bb33d74e8bb4479d93b6821f0f3415b384a2c526b57959ca8c8。步骤304，根据所述键值从预设存储模块中获取预先存储的历史遥测报文，其中，所述历史遥测报文的键值和所述目标遥测报文的键值相同；步骤305，将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；进一步地，步骤305包括：获取所述目标遥测报文的第一遥测栏位数据，以及，所述历史遥测报文的第二遥测栏位数据；基于相同的遥测栏位对所述第一遥测栏位数据和所述第二遥测栏位数据进行比对处理，得到所述第一遥测栏位数据和所述第二遥测栏位数据之间的差异值。步骤306，根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输。需要说明的是，上述步骤304-306参照前序论述，在此不再赘述。本申请实施例通过比对获取遥测报文的差异值，能够仅传输发生超过阈值变化的遥测数据，而不需要传输完整的数据。这大大减少了传输的数据量，节省了网络带宽资源。另外，相较于相关技术中使用数据聚合的方法，通过比较和填充缺失的栏位，本申请实施例确保了遥测数据的一致性，进而将遥测报文上报至控制器，使得控制器能够获取完整的遥测数据，减少了数据不一致或遗漏的情况，从而提高了数据的准确性和可靠性。另外，本申请实施例通过对遥测报文进行差异判断与过滤，即当新的遥测报文进入交换机时，与相同5元组的记录进行比较。如果栏位的数值差异未超过预设的阈值，则将该栏位从报文中移除，只传输变化的栏位数据，可以保证仅传输发生超过阈值变化的遥测数据，从而大幅减少传输数据量。参照图4，示出了本申请实施例提供的遥测报文传输方法的步骤流程图四，所述方法可以包括：步骤401，接收第一服务器发送的普通报文，其中，所述普通报文用于向第二服务器发送；步骤402，识别出所述普通报文中的目标遥测报文；进一步地，步骤402包括：通过DSCP值、对所述普通报文中的标头进行解析或者预设解析协议识别出所述普通报文中的目标遥测报文。需要说明的是，第一交换机可以获取第一服务器或者其他使用者发送的普通报文，第一交换机可以识别出普通报文中的属于带内网络遥测的目标遥测报文。具体的，可以通过DSCP值、对所述普通报文中的标头进行解析或者预设解析协议识别出所述普通报文中的目标遥测报文，对此本申请不做具体限定。步骤403，获取预先存储的历史遥测报文，其中，所述历史遥测报文存储于预先设置的存储模块中，所述历史遥测报文包括第二遥测栏位数据；步骤404，将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；步骤405，根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输。需要说明的是，上述步骤403-405参照前序论述，在此不再赘述。本申请实施例通过比对获取遥测报文的差异值，能够仅传输发生超过阈值变化的遥测数据，而不需要传输完整的数据。这大大减少了传输的数据量，节省了网络带宽资源。另外，相较于相关技术中使用数据聚合的方法，通过比较和填充缺失的栏位，本申请实施例确保了遥测数据的一致性，进而将遥测报文上报至控制器，使得控制器能够获取完整的遥测数据，减少了数据不一致或遗漏的情况，从而提高了数据的准确性和可靠性。另外，本申请实施例通过在普通报文中识别遥测报文，交换机可以记录遥测报文的所有信息，进而可以实现后续根据差异判断策略过滤无需传输的栏位数据，从而减少了带宽的使用。另外，在本申请实施的又一方面，还提供了一种遥测报文传输系统，所述遥测报文传输系统包括：第一交换机以及控制器；所述第一交换机用于获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；获取预先存储的历史遥测报文，其中，所述历史遥测报文存储于预先设置的存储模块中，所述历史遥测报文包括第二遥测栏位数据；将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输；所述控制器用于在所述第一交换机为上报节点的情况下，接收第一交换机发送的目标附加遥测报文中的附加遥测资料。需要说明的是，具体的，可以参照图7，图7中包括第一交换机和控制器，由于第一交换机为上报节点的时候，可以直接上报至控制器，因此，图中的第一交换机、第二交换机以及第三交换机是在另一场景下，第一交换机不作为上报节点，而是第三交换机作为上报节点的示意图。参照图5，图5示出了本申请实施例提供的一种遥测报文传输装置，所述装置可以包括：第一获取模块501，用于获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；第二获取模块502，用于获取预先存储的历史遥测报文，其中，所述历史遥测报文存储于预先设置的存储模块中，所述历史遥测报文包括第二遥测栏位数据；比对模块503，用于将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；传输模块504，用于根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输。本申请实施例提供的遥测报文传输方法，通过获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；获取所述目标遥测报文的键值；根据所述键值获取预先存储的历史遥测报文；将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输。本申请实施例通过比对获取遥测报文的差异值，能够仅传输发生超过阈值变化的遥测数据，而不需要传输完整的数据。这大大减少了传输的数据量，节省了网络带宽资源。另外，相较于相关技术中使用数据聚合的方法，通过比较和填充缺失的栏位，本申请实施例确保了遥测数据的一致性，进而将遥测报文上报至控制器，使得控制器能够获取完整的遥测数据，减少了数据不一致或遗漏的情况，从而提高了数据的准确性和可靠性。因此，本申请实施例通过差异式遥测信息传输，实现了减少传输数据量、提高传输效率、节省带宽资源、和数据一致性等有益效果，有助于提升遥测系统的性能和可靠性，同时降低了数据传输的成本和资源消耗。本申请实施例还提供了一种通信设备，如图6所示，包括处理器601、通信接口602、存储器603和通信总线604，其中，处理器601，通信接口602，存储器603通过通信总线604完成相互间的通信，存储器603，用于存放计算机程序；处理器601，用于执行存储器603上所存放的程序时，可以实现如下步骤：获取目标遥测报文，其中，所述目标遥测报文包括至少一个第一遥测栏位数据；获取所述目标遥测报文的键值；根据所述键值获取预先存储的历史遥测报文；将所述目标遥测报文的第一遥测栏位数据和所述历史遥测报文的第二遥测栏位数据进行比对处理，得到所述目标遥测报文和所述历史遥测报文之间的差异值；根据所述差异值和预设阈值之间的关系确定所述目标遥测报文是否传输。上述终端提到的通信总线可以是外设部件互连标准总线或扩展工业标准结构总线等。该通信总线可以分为地址总线、数据总线、控制总线等。为便于表示，图中仅用一条粗线表示，但并不表示仅有一根总线或一种类型的总线。通信接口用于上述终端与其他设备之间的通信。存储器可以包括随机存取存储器，也可以包括非易失性存储器，例如至少一个磁盘存储器。可选的，存储器还可以是至少一个位于远离前述处理器的存储装置。上述的处理器可以是通用处理器，包括中央处理器、网络处理器等；还可以是数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。在本申请提供的又一实施例中，还提供了一种计算机可读存储介质，该计算机可读存储介质中存储有指令，当其在计算机上运行时，使得计算机执行上述实施例中任一所述的遥测报文传输。在本申请提供的又一实施例中，还提供了一种包含指令的计算机程序产品，当其在计算机上运行时，使得计算机执行上述实施例中任一所述的遥测报文传输。在上述实施例中，可以全部或部分地通过软件、硬件、固件或者其任意组合来实现。当使用软件实现时，可以全部或部分地以计算机程序产品的形式实现。所述计算机程序产品包括一个或多个计算机指令。在计算机上加载和执行所述计算机程序指令时，全部或部分地产生按照本申请实施例所述的流程或功能。所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。所述计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，所述计算机指令可以从一个网站站点、计算机、服务器或第三数据库通过有线）或无线方式向另一个网站站点、计算机、服务器或第三数据库进行传输。所述计算机可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集成的服务器、第三数据库等数据存储设备。所述可用介质可以是磁性介质，、光介质、或者半导体介质等。需要说明的是，在本文中，诸如第一和第一等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本说明书中的各个实施例均采用相关的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于系统实施例而言，由于其基本相似于方法实施例，所以描述的比较简单，相关之处参见方法实施例的部分说明即可。以上所述仅为本申请的较佳实施例而已，并非用于限定本申请的保护范围。凡在本申请的精神和原则之内所作的任何修改、等同替换、改进等，均包含在本申请的保护范围内。
