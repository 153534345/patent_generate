标题title
一种线缆在位信号指示系统及方法
摘要abst
本发明提供一种线缆在位信号指示系统及方法，所述系统包括控制板和N个部件；控制板包括管理系统、第一执行系统和N个第一线缆连接器；每个部件包括第二线缆连接器和第二执行系统；所述第一执行系统、第一线缆连接器、第二线缆连接器和第二执行系统之间采用双线环回方式连接，用于传输在位信号和环回信号；所述在位信号和环回信号均为PWM信号；在第一线缆连接器和第二线缆连接器中，用于传输在位信号和环回信号的连接引脚为最大对角方向的两个引脚。本发明不仅能够高效、准确的检测线缆是否插好，并且能够在多线缆场景下定位到具体的线缆是否插正确，还能够归一化线缆及配套的线缆连接器，降低线缆方案的成本，同时扩展性好。
权利要求书clms
1.一种线缆在位信号指示系统，其特征在于，包括控制板和N个部件；所述控制板包括相连接的管理系统和第一执行系统，以及与第一执行系统连接的N个第一线缆连接器；每个部件包括相连接的第二线缆连接器和第二执行系统；N个第一线缆连接器与N个部件的第二线缆连接器一一对应连接；所述第一执行系统、第一线缆连接器、第二线缆连接器和第二执行系统之间采用双线环回方式连接，用于传输在位信号和环回信号；所述在位信号和环回信号均为PWM信号；在第一线缆连接器和第二线缆连接器中，用于传输在位信号和环回信号的连接引脚，分别为第一线缆连接器和第二线缆连接器上最大对角方向的两个引脚。2.一种线缆在位信号指示方法，其特征在于，所述线缆在位信号指示方法基于权利要求1所述的线缆在位信号指示系统实现；所述线缆在位信号指示方法包括如下步骤：S1，根据部件的类型确认线缆配置规则，并将线缆配置规则存储在管理系统中；S2，管理系统给第一执行系统下发线缆配置规则；第一执行系统根据下发的线缆配置规则，生成在位信号；S3，在位信号依次经过对应的第一线缆连接器、线缆和第二线缆连接器，进入到对应的第二执行系统中；S4，第二执行系统根据与线缆配置规则对应的调频处理策略，对在位信号进行调频处理，生成环回信号；S5，环回信号依次经过对应的第二线缆连接器、线缆和第一线缆连接器环回到第一执行系统中；S6，第一执行系统计算环回信号的频率和占空比，并将环回信号的频率和占空比对应存储；S7，管理系统读取第一执行系统中存储的环回信号的频率和占空比，并对环回信号的频率和占空比进行匹配分析，从而判断线缆在位情况。3.根据权利要求2所述的线缆在位信号指示方法，其特征在于，步骤S7包括：若未读取到环回信号的频率和占空比，则表示对应部件的线缆未插好；若读取到环回信号的频率和占空比，则比较读取的环回信号的频率和占空比与事先对应存储的频率和占空比是否一致：若一致，则表示线缆在位正确；若不一致，则表示线缆插错。4.根据权利要求3所述的线缆在位信号指示方法，其特征在于，线缆未插好的情况包括：第一线缆连接器和/或第二线缆连接器未插到位；第一线缆连接器和/或第二线缆连接器损坏；和/或，线缆插错和/或损坏。5.根据权利要求3所述的线缆在位信号指示方法，其特征在于，线缆插错的情况为部件插错。6.根据权利要求3-5任一项所述的线缆在位信号指示方法，其特征在于，若线缆未插好和/或线缆插错，则进行告警。7.根据权利要求2所述的线缆在位信号指示方法，其特征在于，更换新的部件时：如果新的部件需要兼容已有老部件，则新的部件中的第二执行系统的调频处理策略与老部件相同；如果新的部件不兼容替代老部件，则新的部件中的第二执行系统采用新的调频处理策略；并且在涉及新的部件时，同步升级管理系统中存储的线缆配置规则。
说明书desc
技术领域本发明涉及高速线缆技术领域，具体而言，涉及一种线缆在位信号指示系统及方法。背景技术随着存储设备、服务器的内部总线速率越来越高，低成本PCB无法支撑高速信号的传输要求，越来越多采用高速线缆来传输高速信号。高速线缆在位信号是指示高速线缆是否安装到位、正确的指示信号，关系到存储设备、服务器能否正常工作。因此，高速线缆在位信号是非常关键的信号，其准确性必须得到保障。现有线缆在位指示主要采用如下三种方式：如图1所示，通过单点接地方式，指示线缆是否已经接入到位；然而，为了提高信号密度，高速线缆连接器配合高速线缆都是采用双边走线形式。在这种情况下，单点信号指示线缆在位时，在出现线缆插头一边插好但另一边未插好时的情况下，无法正确指示线缆未插好信息。如图2所示，通过单点双线环回方式增强线缆在位信号，可以准确指示线缆是否已经接入到位。但是，在多线缆场景下，无法区分线缆是否插到正确的位置。为了保证多线缆场景线缆不会插错，采用不同线缆长度或者不同线缆类型来区分。但是，使用不同线缆长度或者不同线缆类型，会带来线缆及配套的线缆连接器难以归一化的问题，从而无法全部采用最优成本的线缆方案，导致成本增加。发明内容本发明旨在提供一种线缆在位信号指示系统及方法，以解决上述现有线缆在位指示的三种方式存在的问题。本发明提供的一种线缆在位信号指示系统，包括控制板和N个部件；所述控制板包括相连接的管理系统和第一执行系统，以及与第一执行系统连接的N个第一线缆连接器；每个部件包括相连接的第二线缆连接器和第二执行系统；N个第一线缆连接器与N个部件的第二线缆连接器一一对应连接；所述第一执行系统、第一线缆连接器、第二线缆连接器和第二执行系统之间采用双线环回方式连接，用于传输在位信号和环回信号；所述在位信号和环回信号均为PWM信号；在第一线缆连接器和第二线缆连接器中，用于传输在位信号和环回信号的连接引脚，分别为第一线缆连接器和第二线缆连接器上最大对角方向的两个引脚。基于上述的线缆在位信号指示系统，本发明还提供一种线缆在位信号指示方法，包括如下步骤：S1，根据部件的类型确认线缆配置规则，并将线缆配置规则存储在管理系统中；S2，管理系统给第一执行系统下发线缆配置规则；第一执行系统根据下发的线缆配置规则，生成在位信号；S3，在位信号依次经过对应的第一线缆连接器、线缆和第二线缆连接器，进入到对应的第二执行系统中；S4，第二执行系统根据与线缆配置规则对应的调频处理策略，对在位信号进行调频处理，生成环回信号；S5，环回信号依次经过对应的第二线缆连接器、线缆和第一线缆连接器环回到第一执行系统中；S6，第一执行系统计算环回信号的频率和占空比，并将环回信号的频率和占空比对应存储；S7，管理系统读取第一执行系统中存储的环回信号的频率和占空比，并对环回信号的频率和占空比进行匹配分析，从而判断线缆在位情况。进一步的，步骤S7包括：若未读取到环回信号的频率和占空比，则表示对应部件的线缆未插好；若读取到环回信号的频率和占空比，则比较读取的环回信号的频率和占空比与事先对应存储的频率和占空比是否一致：若一致，则表示线缆在位正确；若不一致，则表示线缆插错。进一步的，线缆未插好的情况包括：第一线缆连接器和/或第二线缆连接器未插到位；第一线缆连接器和/或第二线缆连接器损坏；和/或，线缆插错和/或损坏。进一步的，线缆插错的情况为部件插错。进一步的，若线缆未插好和/或线缆插错，则进行告警。进一步的，更换新的部件时：如果新的部件需要兼容已有老部件，则新的部件中的第二执行系统的调频处理策略与老部件相同；如果新的部件不兼容替代老部件，则新的部件中的第二执行系统采用新的调频处理策略；并且在涉及新的部件时，同步升级管理系统中存储的线缆配置规则。综上所述，由于采用了上述技术方案，本发明的有益效果是：本发明将在位信号和环回信号配置在线缆连接器上最大对角方向的两个引脚，并且所述在位信号和环回信号均实现为PWM信号。由此，本发明实现了基于PWM信号的线缆在位指示，不仅能够高效、准确的检测线缆是否插好，并且能够在多线缆场景下定位到具体的线缆是否插正确，还能够归一化线缆及配套的线缆连接器，降低线缆方案的成本，同时扩展性好。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例中的附图作简单地介绍，应当理解，以下附图仅示出了本发明的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1为现有线缆在位指示中单点接地方式示意图。图2为现有线缆在位指示中单点节点双线环回方式示意图。图3为本发明实施例中线缆在位信号指示系统的示意图。图4为本发明实施例中在位信号和环回信号的连接引脚示意图。图5为本发明实施例中线缆在位信号指示方法的流程图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本发明实施例的组件可以以各种不同的配置来布置和设计。因此，以下对在附图中提供的本发明的实施例的详细描述并非旨在限制要求保护的本发明的范围，而是仅仅表示本发明的选定实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例如图3所示，本实施例提出一种线缆在位信号指示系统，包括控制板和N个部件；所述控制板包括相连接的管理系统和第一执行系统，以及与第一执行系统连接的N个第一线缆连接器；每个部件包括相连接的第二线缆连接器和第二执行系统；N个第一线缆连接器与N个部件的第二线缆连接器一一对应连接；所述第一执行系统、第一线缆连接器、第二线缆连接器和第二执行系统之间采用双线环回方式连接，用于传输在位信号和环回信号；所述在位信号和环回信号均为PWM信号；在第一线缆连接器和第二线缆连接器中，用于传输在位信号和环回信号的连接引脚，分别为第一线缆连接器和第二线缆连接器上最大对角方向的两个引脚，如图4所示。基于所述线缆在位信号指示系统，实现一种线缆在位信号指示方法，如图5所示，具体包括如下步骤：S1，根据部件的类型确认线缆配置规则，并将线缆配置规则存储在管理系统中；所述线缆配置规则是指，在系统中的部件应当有对应的线缆和线缆连接器。为了后续处理，确认线缆配置规则后，应当为每个部件设置一个与线缆配置规则对应的调频处理策略，并且调频处理策略的正确结果应当事先存储在管理系统中，每个部件的调频处理策略不同，从而进行区分。S2，管理系统给第一执行系统下发线缆配置规则；第一执行系统根据下发的线缆配置规则，生成在位信号；S3，在位信号依次经过对应的第一线缆连接器、线缆和第二线缆连接器，进入到对应的第二执行系统中；S4，第二执行系统根据与线缆配置规则对应的调频处理策略，对在位信号进行调频处理，生成环回信号；S5，环回信号依次经过对应的第二线缆连接器、线缆和第一线缆连接器环回到第一执行系统中；S6，第一执行系统计算环回信号的频率和占空比，并将环回信号的频率和占空比对应存储；S7，管理系统读取第一执行系统中存储的环回信号的频率和占空比，并对环回信号的频率和占空比进行匹配分析，从而判断线缆在位情况：若未读取到环回信号的频率和占空比，则表示对应部件的线缆未插好，并进行告警；其中，线缆未插好的情况包括：对应部件的第一线缆连接器和/或第二线缆连接器未插到位，线缆插错和/或损坏，第一线缆连接器和/或第二线缆连接器损坏等；若读取到环回信号的频率和占空比，则比较读取的环回信号的频率和占空比与事先存储的频率和占空比是否一致：若一致，则表示线缆在位正确，不进行操作；若不一致，则表示线缆插错，并进行告警；其中，线缆插错的情况包括部件插错等。具体各类异常场景分析如下：1、部件插错场景在部件插错场景下，如果插入部件不是需要插入部件且无法兼容，那么，部件中的第二执行系统的调频处理策略会不一样。在位信号经过第二执行系统后产生的环回信号环回到第一执行系统，第一执行系统检测环回信号的频率和占空比后，管理系统会从第一执行系统定期读取到环回信号的频率和占空比，通过与事先存储的频率和占空比比对，管理系统可以精确识别并告警。需要说明的是，部件种类繁多，并且生命周期会很较长。在新整机开发时，既要支持现有部件，也要兼容新开发新部件，新老部件兼容需重点考虑。对于新开发的部件：如果是需要兼容已有老部件，则新开发部件上的第二执行系统的调频处理策略与老部件相同；如果是非兼容替代老部件，则第二执行系统采用新的调频处理策略，涉及新开发部件时，需要同步升级管理系统中存储的线缆配置规则。2、线缆插错场景在线缆插错场景下，线缆涉及线缆头、线缆线序、线缆长度和线缆材质等。如果线缆头不对，则无法插进对应的线缆连接器中；如果线缆线序不一样，通过上述的线缆在位信号指示，可以精确识别并告警。3、线缆损坏场景线缆损坏场景下，在位信号损坏，通过上述的线缆在位信号指示，可以精确识别并告警。4、线缆未插好场景如图4所示，第一线缆连接器和第二线缆连接器的四个角的引脚分别为引脚PINA1、引脚PINAN、引脚PINB1和引脚PINBN，本实施例选择第一线缆连接器和第二线缆连接器的最大对角方向的两个引脚来传输在位信号PRSNT_1及环回信号PRSNT_2，由此，只要线缆完全插好并且连接器锁扣锁到位，同时，在位信号PRSNT_1所在边和环回信号PRSNT_2所在边都接触好，那么三点形成一个面，就能保证整个线缆连接器配合面都已插好。任何一边未插好都无法保证线缆连接器配合面插好，导致无法获取到环回信号，并会上报线缆未插好告警。5、线缆连接器损坏场景线缆连接器损坏场景下，在位信号损坏，通过上述线缆在位信号指示，可以精确识别并告警。由上述可见，本发明将在位信号和环回信号配置在线缆连接器上最大对角方向的两个引脚，并且所述在位信号和环回信号均实现为PWM信号。由此，本发明实现了基于PWM信号的线缆在位指示，不仅能够高效、准确的检测线缆是否插好，并且能够在多线缆场景下定位到具体的线缆是否插正确，还能够归一化线缆及配套的线缆连接器，降低线缆方案的成本，同时扩展性好。以上所述仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
