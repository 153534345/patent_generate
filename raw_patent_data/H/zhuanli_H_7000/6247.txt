标题title
一种锁相环、芯片及电子设备
摘要abst
本发明涉及锁相环技术领域，尤其涉及一种锁相环，该锁相环包括：振荡器，用于输出振荡信号；分频器，用于根据接收到的振荡信号输出分频信号；相位误差抵消模块，用于将获取到的分频信号和参考时钟信号之间的相位差转为控制电压，通过其第一输出端输出控制电压至振荡器，从控制电压中获取直流分量电压，通过其第二输出端输出直流分量电压；低通滤波模块，连接于相位误差抵消模块的第二输出端与振荡器的输入端之间，用于根据直流分量电压得到过滤后的直流分量电压，过滤后的直流分量电压用于调整振荡器的频率，以增大振荡器的频率调节范围。该锁相环在提高锁相环的输出时钟性能的同时，实现锁相环的宽锁定范围，增强锁相环的应用范围与通用性。
权利要求书clms
1.一种锁相环，其特征在于，包括：振荡器，用于输出振荡信号；分频器，用于接收所述振荡信号，并将所述振荡信号进行分频得到分频信号，且输出所述分频信号；相位误差抵消模块，用于接收所述振荡信号、所述分频信号和参考时钟信号，获取所述分频信号和所述参考时钟信号之间的相位差，将所述相位差转化为控制电压，通过所述相位误差抵消模块的第一输出端输出所述控制电压至所述振荡器，以通过所述控制电压使所述振荡信号的相位与所述参考时钟信号的相位保持固定的相位差，并从所述控制电压中获取直流分量电压，通过所述相位误差抵消模块的第二输出端输出所述直流分量电压；低通滤波模块，连接于所述相位误差抵消模块的第二输出端与振荡器的输入端之间，用于接收所述直流分量电压，对所述直流分量电压进行低通滤波得到过滤后的直流分量电压，所述过滤后的直流分量电压用于调整所述振荡器的频率，以增大所述振荡器的频率调节范围。2.如权利要求1所述的锁相环，其特征在于，所述低通滤波模块包括：第一电阻，所述第一电阻的一端作为所述低通滤波模块的输入端，用于接收所述直流分量电压；滤波电容，所述滤波电容的一端与所述第一电阻的另一端相连，所述滤波电容的一端还作为所述低通滤波模块的输出端，另一端接地，用于过滤所述直流分量电压的噪声信号，得到并输出所述过滤后的直流分量电压。3.如权利要求1所述的锁相环，其特征在于，所述相位误差抵消模块包括：相位误差采样子模块、开关电容低通滤波器和开关时序控制子模块；所述开关时序控制子模块，用于接收所述振荡信号和所述分频信号，根据所述振荡信号和所述分频信号得到第一开关使能信号和第二开关使能信号，并将所述分频信号输出至所述相位误差采样子模块，将所述第一开关使能信号和所述第二开关使能信号输出至所述开关电容低通滤波器；所述相位误差采样子模块，用于接收所述分频信号和所述参考时钟信号，对所述分频信号的相位和所述参考时钟信号的相位进行比较得到相位差，并根据所述相位差输出电压信号；所述开关电容低通滤波器，用于接收所述电压信号，根据所述第一开关使能信号和所述第二开关使能信号，对所述电压信号进行低通滤波得到所述控制电压和所述直流分量电压。4.如权利要求3所述的锁相环，其特征在于，在同一时钟周期下，控制所述第一开关使能信号和所述第二开关使能信号均延迟于所述分频信号，以使所述相位误差采样子模块根据所述相位差输出所述电压信号，并控制所述第一开关使能信号的相位与所述第二开关使能信号的相位相反，以使所述开关电容低通滤波器分别输出所述控制电压和所述直流分量电压。5.如权利要求4所述的锁相环，其特征在于，所述开关电容低通滤波器包括：第一电容，所述第一电容的一端为所述开关电容低通滤波器的输入端，另一端接地，用于存储并输出所述电压信号；第一开关，所述第一开关的一端连接所述第一电容的一端，所述第一开关的控制端连接所述第一开关使能信号，用于控制所述电压信号的输出；第二电容，所述第二电容的一端为所述相位误差抵消模块的第一输出端，用于输出所述控制电压，且所述第二电容的一端连接所述第一开关的另一端，所述第二电容的另一端接地；第二开关，所述第二开关的一端连接所述控制电压，所述第二开关的控制端连接第二开关使能信号；第三电容，所述第三电容的一端为所述相位误差抵消模块的第二输出端，且连接所述第二开关的另一端，所述第三电容的另一端接地，用于过滤所述控制电压的高频误差信号，得到并输出所述直流分量电压。6.如权利要求1所述的锁相环，其特征在于，所述振荡器包括：第一延时模块，所述第一延时模块的第一输入端连接所述控制电压，所述第一延时模块的输出端为所述振荡器的输出端，用于根据所述控制电压控制所述振荡器的瞬时频率，使所述振荡信号的相位与所述参考时钟信号的相位保持固定的相位差；第二延时模块，所述第二延时模块的第一输入端连接所述过滤后的直流分量电压，所述第二延时模块的第二输入端连接所述第一延时模块的输出端，所述第二延时模块的输出端连接所述第一延时模块的第二输入端，用于根据所述过滤后的直流分量电压控制所述振荡器的频率。7.如权利要求6所述的锁相环，其特征在于，所述第一延时模块包括：反相器，所述反相器的输入端为所述第一延时模块的第二输入端，所述反相器的输出端为所述第一延时模块的输出端，用于输出所述振荡信号；第一可变电容，所述第一可变电容的第一端连接所述反相器输出端，所述第一可变电容的第二端为所述第一延时模块的输入端，用于根据所述控制电压调整电容值，以调控所述第一延时模块的瞬时频率，调节所述反相器输出的所述振荡信号的相位，使所述振荡信号的相位与所述参考时钟信号的相位保持固定的相位差。8.如权利要求7所述的锁相环，其特征在于，所述第一延时模块还包括：第一可控电容阵列，所述第一可控电容阵列的第一端连接所述反相器的输出端，所述第一可控电容阵列的第二端接地，所述第一可控电容阵列的控制端连接第一数字控制码，用于根据所述第一数字控制码调整所述第一延时模块的频率级别。9.如权利要求8所述的锁相环，其特征在于，所述第一可控电容阵列包括多个并联连接的可控电容支路，每个可控电容支路包括串联连接的固定电容和可控开关，每个可控开关的控制端连接所述第一数字控制码。10.如权利要求9所述的锁相环，其特征在于，所述第二延时模块包括：依次相连的n个反相器，所述n个反相器的第一个反相器的输入端连接所述第一延时模块的反相器的输出端，所述n个反相器的第n个反相器的输出端连接所述第一延时模块的反相器的输入端，n为大于1的正整数；与所述n个反相器一一对应连接的n个第二可变电容，每个第二可变电容的第一端连接所述每个第二可变电容对应的反相器的输出端，每个第二可变电容的第二端共接为所述第二延时模块的第一输入端，用于根据所述过滤后的直流分量电压改变电容值，以调节所述第一延时模块的反相器输出所述振荡信号的频率。11.如权利要求10所述的锁相环，其特征在于，所述第二延时模块还包括：与所述n个反相器一一对应连接的n个第二可控电容阵列，每个第二可控电容阵列的第一端连接所述每个第二可控电容阵列对应的反相器的输出端，每个第二可控电容阵列的第二端均接地，每个第二可控电容阵列的控制端连接第二数字控制码，用于根据所述第二数字控制码调节所述第一延时模块的反相器输出所述振荡信号的频率级别。12.如权利要求11所述的锁相环，其特征在于，所述第二可控电容阵列包括多个并联连接的可控电容支路，每个可控电容支路包括串联连接的固定电容和可控开关，每个可控开关的控制端连接所述第二数字控制码。13.一种芯片，其特征在于，包括如权利要求1-12中任一权利要求所述的锁相环。14.一种电子设备，其特征在于，包括如权利要求13所述的芯片。
说明书desc
技术领域本发明涉及锁相环技术领域，尤其涉及一种锁相环、芯片及电子设备。背景技术锁相环电路在滤波、频率综合、调制与解调、信号检测等许多技术领域获得了广泛的应用，在模拟与数字通信系统中已成为不可缺少的基本部件。锁相环是利用反馈控制原理实现频率及相位的控制，其作用是将电路的输出信号与其外部的参考信号保持同步，使输出信号与参考信号的相位保持恒定。当参考信号的频率或相位发生改变时，锁相环会检测到参考信号的变化，通过其内部的反馈系统来调节输出频率或相位，直到二者重新同步，该同步过程又称为“锁相”。锁相环的主要指标包括相位噪声、杂散、功耗、面积、频率锁定范围与相位裕度。现有技术中往往通过降低个别指标以达到低相位噪声与低杂散时钟要求，通常为了满足低相位噪声与低杂散时钟要求导致减少锁相环的频率锁定范围，这限制了锁相环在需要宽锁定范围的应用。在提高锁相环的输出时钟性能的同时，需要保证其它指标尤其是锁定范围不受影响是设计的关键。然而，有的产品既需要低相位噪声与低杂散时钟，也需要较宽的频率范围，例如，在人工智能领域的芯片尤其有相关的需求。发明内容本申请实施例通过提供一种锁相环、芯片及电子设备，以至少解决现有技术中上述技术问题。第一方面，本发明实施例提供一种锁相环，包括：振荡器，用于输出振荡信号；分频器，用于接收所述振荡信号，并将所述振荡信号进行分频得到分频信号，且输出所述分频信号；相位误差抵消模块，用于接收所述振荡信号、所述分频信号和参考时钟信号，获取所述分频信号和所述参考时钟信号之间的相位差，将所述相位差转化为控制电压，通过所述相位误差抵消模块的第一输出端输出所述控制电压至所述振荡器，以通过所述控制电压使所述振荡信号的相位与所述参考时钟信号的相位保持固定的相位差，并从所述控制电压中获取直流分量电压，通过所述相位误差抵消模块的第二输出端输出所述直流分量电压；低通滤波模块，连接于所述相位误差抵消模块的第二输出端与振荡器的输入端之间，用于接收所述直流分量电压，对所述直流分量电压进行低通滤波得到过滤后的直流分量电压，所述过滤后的直流分量电压用于调整所述振荡器的频率，以增大所述振荡器的频率调节范围。优选的，所述低通滤波模块包括：第一电阻，所述第一电阻的一端作为所述低通滤波模块的输入端，用于接收所述直流分量电压；滤波电容，所述滤波电容的一端与所述第一电阻的另一端相连，所述滤波电容的一端还作为所述低通滤波模块的输出端，另一端接地，用于过滤所述直流分量电压的噪声信号，得到并输出所述过滤后的直流分量电压。优选的，所述相位误差抵消模块包括：相位误差采样子模块、开关电容低通滤波器和开关时序控制子模块；所述开关时序控制子模块，用于接收所述振荡信号和所述分频信号，根据所述振荡信号和所述分频信号得到第一开关使能信号和第二开关使能信号，并将所述分频信号输出至所述相位误差采样子模块，将所述第一开关使能信号和所述第二开关使能信号输出至所述开关电容低通滤波器；所述相位误差采样子模块，用于接收所述分频信号和所述参考时钟信号，对所述分频信号的相位和所述参考时钟信号的相位进行比较得到相位差，并根据所述相位差输出电压信号；所述开关电容低通滤波器，用于接收所述电压信号，根据所述第一开关使能信号和所述第二开关使能信号，对所述电压信号进行低通滤波得到所述控制电压和所述直流分量电压。优选的，在同一时钟周期下，控制所述第一开关使能信号和所述第二开关使能信号均延迟于所述分频信号，以使所述相位误差采样子模块根据所述相位差输出所述电压信号，并控制所述第一开关使能信号的相位与所述第二开关使能信号的相位相反，以使所述开关电容低通滤波器分别输出所述控制电压和所述直流分量电压。优选的，所述开关电容低通滤波器包括：第一电容，所述第一电容的一端为所述开关电容低通滤波器的输入端，另一端接地，用于存储并输出所述电压信号；第一开关，所述第一开关的一端连接所述第一电容的一端，所述第一开关的控制端连接所述第一开关使能信号，用于控制所述电压信号的输出；第二电容，所述第二电容的一端为所述相位误差抵消模块的第一输出端，用于输出所述控制电压，且所述第二电容的一端连接所述第一开关的另一端，所述第二电容的另一端接地；第二开关，所述第二开关的一端连接所述控制电压，所述第二开关的控制端连接第二开关使能信号；第三电容，所述第三电容的一端为所述相位误差抵消模块的第二输出端，且连接所述第二开关的另一端，所述第三电容的另一端接地，用于过滤所述控制电压的高频误差信号，得到并输出所述直流分量电压。优选的，所述振荡器包括：第一延时模块，所述第一延时模块的第一输入端连接所述控制电压，所述第一延时模块的输出端为所述振荡器的输出端，用于根据所述控制电压控制所述振荡器的瞬时频率，使所述振荡信号的相位与所述参考时钟信号的相位保持固定的相位差；第二延时模块，所述第二延时模块的第一输入端连接所述过滤后的直流分量电压，所述第二延时模块的第二输入端连接所述第一延时模块的输出端，所述第二延时模块的输出端连接所述第一延时模块的第二输入端，用于根据所述过滤后的直流分量电压控制所述振荡器的频率。优选的，所述第一延时模块包括：一个反相器，所述反相器的输入端为所述第一延时模块的第二输入端，所述反相器的输出端为所述第一延时模块的输出端，用于输出所述振荡信号；第一可变电容，所述第一可变电容的第一端连接所述反相器输出端，所述第一可变电容的第二端为所述第一延时模块的输入端，用于根据所述控制电压调整电容值，以调控所述第一延时模块的瞬时频率，调节所述反相器输出的所述振荡信号的相位，使所述振荡信号的相位与所述参考时钟信号的相位保持固定的相位差。优选的，所述第一延时模块还包括：第一可控电容阵列，所述第一可控电容阵列的第一端连接所述反相器的输出端，所述第一可控电容阵列的第二端接地，所述第一可控电容阵列的控制端连接第一数字控制码，用于根据所述第一数字控制码调整所述第一延时模块的频率级别。优选的，所述第一可控电容阵列包括多个并联连接的可控电容支路，每个可控电容支路包括串联连接的固定电容和可控开关，每个可控开关的控制端连接所述第一数字控制码。优选的，所述第二延时模块包括：依次相连的n个反相器，所述n个反相器的第一个反相器的输入端连接所述第一延时模块的反相器的输出端，所述n个反相器的第n个反相器的输出端连接所述第一延时模块的反相器的输入端，n为大于1的正整数；与所述n个反相器一一对应连接的n个第二可变电容，每个第二可变电容的第一端连接所述每个第二可变电容对应的反相器的输出端，每个第二可变电容的第二端共接为所述第二延时模块的第一输入端，用于根据所述过滤后的直流分量电压改变电容值，以调节所述第一延时模块的反相器输出所述振荡信号的频率。优选的，所述第二延时模块还包括：与所述n个反相器一一对应连接的n个第二可控电容阵列，每个第二可控电容阵列的第一端连接所述每个第二可控电容阵列对应的反相器的输出端，每个第二可控电容阵列的第二端均接地，每个第二可控电容阵列的控制端连接第二数字控制码，用于根据所述第二数字控制码调节所述第一延时模块的反相器输出所述振荡信号的频率级别。优选的，所述第二可控电容阵列包括多个并联连接的可控电容支路，每个可控电容支路包括串联连接的固定电容和可控开关，每个可控开关的控制端连接所述第二数字控制码。基于同一发明构思，第二方面，本发明还提供一种芯片，包括：第一方面所述的锁相环。基于同一发明构思，第三方面，本发明提供一种电子设备，包括：第二方面所述的芯片。本发明实施例中的一个或多个技术方案，至少具有如下技术效果或优点：在本发明实施例中，锁相环包括振荡器、分频器、相位误差抵消模块、低通滤波模块。通过振荡器、分频器、相位误差抵消模块、低通滤波模块形成了反馈环路，基于相位误差抵消模块输出的控制电压和低通滤波模块输出的过滤后的直流分量电压共同调整振荡器输出频率中的输出频率。因此，通过设置相位误差抵消模块和低通滤波模块对振荡器输入双控制电压，相位误差抵消模块向振荡器输出的控制电压控制振荡器的瞬时频率，使振荡信号的相位与参考时钟信号的相位保持固定的相位差，实现锁相环的低相位噪声和低杂散时钟。同时，相位误差抵消模块输出的直流分量电压通过低通滤波模块产生过滤后的直流分量电压，过滤后的直流分量电压用于调控振荡器的输出频率，使锁相环的锁定范围变宽变大。本发明实施例的锁相环在保证锁相环的低功耗，低相位噪声与低输出时钟杂散等性能的条件下，还能增大锁相环的锁定范围。增强锁相环的应用范围与通用性。还避免过多的器件模块进行调制振荡器，通过相位误差抵消模块和低通滤波模块直接调控振荡器的控制方式还具有简单、成本低、稳定可靠等优点。此外，低通滤波模块与相位误差抵消模块及振荡器的协同配合，减少了信号的抖动和电压的突变等情况的发生，提高过滤后的直流分量电压的质量，能够精准地调整振荡器的输出频率。附图说明通过阅读下文优选实施方式的详细描述，各种其他的优点和益处对于本领域普通技术人员将变得清楚明了。附图仅用于示出优选实施方式的目的，而并不认为是对本发明的限制。而且在整个附图中，用相同的参考图形表示相同的部件。在附图中：图1示出了本发明实施例中的锁相环的模块示意图；图2示出了本发明实施例中的低通滤波模块的结构示意图；图3示出了本发明实施例中的相位误差抵消模块的结构示意图；图4示出了本发明实施例中的锁相环的波形图；图5示出了本发明实施例中的振荡器的第一种实施方式的结构示意图；图6示出了本发明实施例中的振荡器的第一种实施方式的示例结构图；图7示出了本发明实施例中的振荡器的第二种实施方式的结构示意图。具体实施方式下面将参照附图更详细地描述本公开的示例性实施例。虽然附图中显示了本公开的示例性实施例，然而应当理解，可以以各种形式实现本公开而不应被这里阐述的实施例所限制。相反，提供这些实施例是为了能够更透彻地理解本公开，并且能够将本公开的范围完整的传达给本领域的技术人员。实施例一：本发明第一实施例提供了一种锁相环，如图1所示，包括：振荡器40，用于输出振荡信号；分频器10，用于接收振荡信号，并将振荡信号进行分频得到分频信号，且输出分频信号；相位误差抵消模块20，用于接收振荡信号、分频信号和参考时钟信号，获取分频信号和参考时钟信号之间的相位差，将相位差转化为控制电压，通过相位误差抵消模块20的第一输出端输出控制电压至振荡器40，以通过控制电压使振荡信号的相位与参考时钟信号的相位保持固定的相位差，并从控制电压中获取直流分量电压，通过相位误差抵消模块20的第二输出端输出直流分量电压；低通滤波模块30，连接于相位误差抵消模块20的第二输出端与振荡器30的输入端之间，用于接收直流分量电压，对直流分量电压进行低通滤波得到过滤后的直流分量电压，过滤后的直流分量电压用于调整振荡器的频率，以增大振荡器的频率调节范围。在图1中，分频器10在接收振荡器40输出的振荡信号VCO_OUT之后，对振荡信号VCO_OUT进行分频得到分频信号DIV_OUT，分频信号DIV_OUT的频率为振荡信号VCO_OUT的频率的1/N，N为分频器10的分频比。分频器10的作用是将振荡信号的频率降低到锁相环所能处理的频率范围内。通过分频器10，振荡信号的频率可以被降低生成分频信号，使锁相环高效接收和处理分频信号。分频器10还能够提供输入信号的相位信息，使锁相环能够准确锁定输入信号的频率和相位。通过将输入信号与参考信号进行比较，锁相环能精准控制振荡信号的频率和相位。相位误差抵消模块20在接收振荡信号VCO_OUT、分频信号DIV_OUT和参考时钟信号CLK_REF后，将获取到的分频信号DIV_OUT和参考时钟信号CLK_REF的相位差转化为控制电压VC_EPEC，通过控制电压VC_EPEC控制振荡器40的瞬时频率，使振荡信号VCO_OUT的相位与参考时钟信号CLK_REF的相位保持固定的相位差。同时，还从控制电压VC_EPEC中获取直流分量电压DC_FPEC，并输出直流分量电压DC_FPEC。其中，振荡信号VCO_OUT的相位与参考时钟信号CLK_REF的相位保持固定的相位差是存在上下波动的空间。相位误差抵消模块20通过控制电压VC_EPEC，抵消振荡器在固定的相位差上突然变化的误差，实现低相位噪声。因此，通过控制电压和过滤后的直流分量电压共同调整振荡器40的输出频率，在保证锁相环的低功耗，低相位噪声与低输出时钟杂散等性能的条件下，还能增大锁相环的锁定范围。低通滤波模块30在接收直流分量电压DC_FPEC后，对直流分量电压进行低通滤波得到过滤后的直流分量电压VC_FLL，以通过过滤后的直流分量电压VC_FLL调整振荡器40的频率，实现锁相环的宽锁定范围。并且，过滤后的直流分量电压的质量高，低通滤波模块30的设置减少了信号的抖动和电压的突变等情况的发生。其中，控制电压VC_EPEC侧重调整振荡器输出频率中的瞬时频率，表示通过控制电压VC_EPEC能快速调整振荡器的输出频率。过滤后的直流分量电压VC_FLL是直流分量电压DC_FPEC通过低通滤波模块产生的，过滤后的直流分量电压VC_FLL能缓慢调整振荡器的输出频率，且过滤后的直流分量电压VC_FLL的调整范围比控制电压VC_EPEC的调整范围大，以增大振荡器的频率调节范围，即实现锁相环的宽锁定范围。振荡器40、分频器10、相位误差抵消模块20、低通滤波模块30形成了反馈环路电路，基于相位误差抵消模块20输出的控制电压和低通滤波模块30输出的过滤后的直流分量电压共同调整振荡器40的输出频率。因此，通过设置相位误差抵消模块20和低通滤波模块30对振荡器40输入双控制电压，相位误差抵消模块20向振荡器40输出的控制电压控制振荡器40输出频率中的瞬时频率，使振荡信号的相位与参考时钟信号CLK_REF的相位保持固定的相位差，实现锁相环的低相位噪声和低杂散时钟。同时，相位误差抵消模块20向振荡器40输出的直流分量电压经过低通滤波模块30产生过滤后的直流分量电压调控振荡器40的输出频率，使锁相环的锁定范围变宽变大。本实施例的锁相环在保证锁相环的低功耗，低相位噪声与低输出时钟杂散等性能的条件下，还能增大锁相环的锁定范围，增强锁相环的应用范围与通用性。还避免过多的器件模块进行调制振荡器40，通过相位误差抵消模块20和低通滤波模块30直接调控振荡器40的控制方式还具有简单、成本低、稳定可靠等优点。此外，低通滤波模块30与相位误差抵消模块及振荡器的协同配合，减少了信号的抖动和电压的突变等情况的发生，提高过滤后的直流分量电压的质量，能够精准地调整振荡器的输出频率。下面，结合图1详细阐述本实施例的锁相环的各个模块结构及功能：如图2所示，低通滤波模块30包括：第一电阻R，第一电阻R的一端作为低通滤波模块30的输入端，用于接收直流分量电压；滤波电容C，滤波电容C的一端与第一电阻R的另一端相连，滤波电容C的一端还作为低通滤波模块30的输出端，另一端接地，用于过滤直流分量电压的噪声信号，得到并输出过滤后的直流分量电压。通过低通滤波模块30对直流分量电压DC_FPEC进行低通滤波，得到过滤后的直流分量电压VC_FLL，以通过滤波电容C过滤掉直流分量电压的噪声信号，实现低噪声特性。再将过滤后的直流分量电压VC_FLL输出至振荡器40中，以通过过滤后的直流分量电压VC_FLL调整振荡器40的输出频率，提高振荡器的输出时钟的稳定性。由于低通滤波模块30的带宽非常低，能够滤除相位误差抵消模块20的噪声，因而实现了在噪声性能相当的情况下，比传统振荡器更大的锁定范围。通过低通滤波模块30的设置，还能平滑输出过滤后的直流分量电压，提高过滤后的直流分量电压的质量，进一步精准地调整振荡器的输出频率，避免信号抖动、毛刺、突变等情况发生，使振荡器高效接收处理过滤后的直流分量电压，增强振荡器的输出时钟的稳定性。需要说明的是，通过过滤后的直流分量电压VC_FLL调整振荡器40的频率，特别针对导致振荡器40变化缓慢的频率。例如，锁相环受到温度、电压或老化等因素影响，振荡器40的输出信号的频率会存在缓慢的变化，通过过滤后的直流分量电压VC_FLL实现高效、精准地调整振荡器40的输出频率，且过滤后的直流分量电压VC_FLL的调整范围比控制电压VC_EPEC的调整范围大，使锁相环的锁定范围变宽变大。无需太多电子元器件生成过滤后的直流分量电压，实现低功耗、低成本调整振荡器40的过程，使低通滤波模块30具有控制方式简单、低功耗、低成本、稳定性高和可靠性高等优点。如图3所示，相位误差抵消模块20包括：相位误差采样子模块202、开关电容低通滤波器203和开关时序控制子模块201。开关时序控制子模块201，用于接收振荡信号和分频信号，根据振荡信号和分频信号得到第一开关使能信号和第二开关使能信号，并将分频信号输出至相位误差采样子模块202，将第一开关使能信号和第二开关使能信号输出至开关电容低通滤波器203。相位误差采样子模块202，用于接收分频信号和参考时钟信号，对分频信号的相位和参考时钟信号的相位进行比较得到相位差，并根据相位差输出电压信号。开关电容低通滤波器203，用于接收电压信号，根据第一开关使能信号和第二开关使能信号，对电压信号进行低通滤波得到控制电压和直流分量电压。具体地，开关时序控制子模块201在接收到振荡信号和分频信号后，不仅根据振荡信号和分频信号得到第一开关使能信号和第二开关使能信号，还会控制分频信号、第一开关使能信号和第二开关使能信号的时序。具体控制三者时序的过程是，在同一时钟周期下，控制第一开关使能信号和第二开关使能信号均延迟于分频信号，以使相位误差采样子模块202根据相位差输出电压信号，并控制第一开关使能信号的相位与第二开关使能信号的相位相反，以使开关电容低通滤波器203分别输出控制电压和直流分量电压。其中，控制第一开关使能信号的相位与第二开关使能信号的相位相反，表示第一开关使能信号和第二开关使能信息交替使能。将分频信号输出至相位误差采样子模块202，相位误差采样子模块202通过分频信号与参考时钟信号进行相位比较生成相位差，再根据相位差输出电压信号至开关电容低通滤波器203。开关电容低通滤波器203在接收电压信号后，通过第一开关使能信号和第二开关使能信号对电压信号依次进行低通滤波，从而得到控制电压和直流分量电压。其中，根据第一开关使能信号，将电压信号调制成的控制电压包括相位差信息，以通过控制电压实现相位调整。再根据第二开关使能信号，对控制电压进行低通滤波得到直流分量电压，以实现从控制电压中直接获取直流分量电压。所以，分频信号、第一开关使能信号和第二开关使能信号处于同一时钟周期，第一开关使能信号和第二开关使能信号均延迟于分频信号，第一开关使能信号的相位与第二开关使能信号的相位相反。这样，开关时序控制子模块201能高效且精准地控制相位误差采样子模块202和开关电容低通滤波器203的运行，通过控制电压快速地把振荡器的相位误差抵消。在图3中，相位误差采样子模块202包括相位比较器U1、MOS管Q1和MOS管Q2，相位比较器U1的输出端通过非门连接MOS管Q1的栅极，MOS管Q1的源极连接某电压，MOS管Q1的漏极连接MOS管Q2的漏极，MOS管Q2的源极接地。其中，MOS管Q1优选P型MOS管，MOS管Q2优选N型MOS管。开关电容低通滤波器203包括：第一电容，第一电容的一端为开关电容低通滤波器的输入端，另一端接地，用于存储并输出电压信号；第一开关，第一开关的一端连接第一电容的一端，第一开关的控制端连接第一开关使能信号，用于控制电压信号的输出；第二电容，第二电容的一端为相位误差抵消模块的第一输出端，用于输出控制电压，且第二电容的一端连接第一开关的另一端，第二电容的另一端接地；第二开关，第二开关的一端连接控制电压，第二开关的控制端连接第二开关使能信号；第三电容，第三电容的一端为相位误差抵消模块的第二输出端，且连接第二开关的另一端，第三电容的另一端接地，用于过滤控制电压的高频误差信号，得到并输出直流分量电压。具体地，如图3所示，第一电容为电容CP，第一开关为开关K1，第二电容为电容CC，第二开关为开关K2，第三电容为电容CI。电容CP的第一端连接开关K1的第一端，电容CP的第二端接地，开关K1的第二端连接电容CC的第一端和开关K2的第一端，电容CC的第二端接地，开关K2的第二端连接电容CI的第一端，电容CC的第二端接地，电容CC的第一端输出VC_FPEC，电容CI的第一端输出DC_FPEC，开关K1的控制端连接开关时序控制子模块201输出的第一开关使能信号，开关K2的控制端连接开关时序控制子模块201输出的第二开关使能信号。开关电容低通滤波器203的工作原理是，第一电容和第三电容的电容值远大于第二电容的电容值。在第一开关使能信号使能时，第一开关闭合导通，第二开关断开未导通，通过第一电容输出电压信号，第二电容跟随第一电容的电荷进行变化，形成并输出控制电压。表示在第一开关使能信号使能的情况下，第一电容、第一开关和第二电容是连通的，执行根据电压信号生成控制电压的过程。通过控制电压快速地把振荡器40的相位误差抵消，同时还能过滤掉反馈环路内部的高频噪声和杂散信号，实现低相位噪声。在第二开关使能信号使能时，第二开关闭合导通，第一开关断开未导通，第二电容和第三电容形成低通滤波器，用于去除环路电路的高频分量，以避免环路电路的高频震荡，同时也可以对输入信号进行滤波，以提高锁相环的跟踪精度和鲁棒性。如图3所示，相位误差抵消模块20的工作原理是：分频器10将振荡器40输出的振荡信号VCO_OUT进行分频，分频器10输出分频信号DIV_OUT为振荡器40输出频率的1/N。开关时序控制子模块201接收振荡信号VCO_OUT和分频信号DIV_OUT，并输出分频信号DIV_OUT给相位比较器U1。相位比较器U1输出DIV_OUT与参考时钟信号CLK_REF的相位差给MOS管Q1，MOS管Q1将该相位差转化为电压信号，并通过开关电容低通滤波器203输出的控制电压VC_FPEC调整振荡器40输出频率中的瞬时频率，使振荡器40的时钟输出相位与参考时钟相位保持一个固定的相位差。锁相环的信号波形如图4所示，在t0时刻，振荡器40输出的振荡信号VCO_OUT与开关时序控制子模块201输出的DIV_OUT产生相位差为：ΦSO+ΔΦe，ΦSO为系统固定相位误差，用于产生直流控制电压，控制振荡器40的频率。由于系统固定相位误差是定值，因此不会引入相位噪声。ΔΦe为随机变化的相位误差，由振荡器40的自身噪声或电压干扰引起，是一个随机变化的值，会在振荡器40输出VCO_OUT引入相位噪声。相位误差采样子模块202根据ΔΦe调制VP的电压。当第一开关K1的第一开关使能信号SWP为高电平时，表示第一开关使能信号使能，第一开关K1导通，电容CP通过与电容CC电荷共享，当电容CP容值远大于CC的容值时，控制电压VC_FPEC被调制到接近VP刚完成采样时的电压。由于VP保存ΔΦe的大小信息，控制电压VC_FPEC把VCO_OUT与参考时钟之间随机相位误差快速抵消，从而实现低相位噪声。当相位误差抵消模块20完成相位误差抵消之后，需要将振荡器40的VC_FPEC切换到电容CI上的直流信号，向第二开关K2输出第二开关使能信号SWI使第二开关K2导通，表示第二开关使能信号使能，由于电容CI的电容值远大于电容CC的电容值，并且电容CC以固定的频率与电容CI导通。因此电容CC与电容CI形成一个开关低通滤波器，把高频的随机相位误差ΔΦe滤掉。所以电容CI不参与随机相位误差抵消，只是提取VC_FPEC的直流电压DC_FPEC，控制振荡器40的频率。在第一开关K1断开后，控制信号SWR使能时，MOS管Q2接地，使VP逐渐变化为零。在下一个时钟周期内，相位误差抵消模块20接收振荡信号VCO_OUT和分频信号DIV_OUT，再次执行整个过程。本实施例的锁相环的振荡器40包括：第一延时模块401，第一延时模块401的第一输入端连接控制电压，第一延时模块401的输出端为振荡器40的输出端，用于根据控制电压控制振荡器40的瞬时频率，使振荡信号的相位与参考时钟信号的相位保持固定的相位差；第二延时模块402，第二延时模块402的第一输入端连接过滤后的直流分量电压，第二延时模块402的第二输入端连接第一延时模块401的输出端，第二延时模块402的输出端连接第一延时模块401的第二输入端，用于根据过滤后的直流分量电压控制振荡器40的频率。第一延时模块401根据控制电压控制输出信号的相位是通过延时电路来实现的。延时电路可以将信号的相位进行调节。延时电路可以为RC相移电路、RL相移电路和LC相移电路等。调节电压是通过调节延时电路中电容器的电压来实现的。当电容器的电压发生变化时，电容器的电容值也会发生变化，从而影响信号的频率和相位。因此，通过改变电容器的电压，就可以控制信号的相位延迟，从而实现相位调节。以RC相移电路为例，当输入信号通过电阻和电容时，会发生相位延迟。通过调节电阻和电容的数值，可以改变信号的相位延迟量，从而实现相位的调节。具体来说，当电容C和电阻R的数值适当地选择时，可以实现0度、±90度和180度的相位延迟。除了RC相移电路，还可以是反相器与电容阵列组成的相移电路。第二延时模块402包括多个与第一延时模块401相同的延时模块，该延时模块是反相器与电容阵列组成的相移电路，通过过滤后的直流分量电压调节电容阵列的电容值可以调节振荡器40输出振荡信号的频率。振荡器40的频率受VC_FPEC与VC_FLL两个电压控制。当VC_FPEC与VC_FLL电压同时为0时，振荡器40的输出频率记为f0。VC_FPEC与VC_FLL的单位电压频率增益分别为K_FPEC和K_FLL。其输出频率计算如下：Freq_VCO=f0+K_FPEC×VC_FPEC+K_FLL×VC_FLL；由公式可知，振荡器40的可变频率范围与第一增益K_FPEC和第二增益K_FLL有关，而第一增益K_FPEC与第一延时模块401中可变电容的电容值有关，第二增益K_FLL与第二延时模块402中可变电容的电容值以及数量有关。第一延时模块401中可变电容的电容值由控制电压决定，第二延时模块402中可变电容的电容值由过滤后的直流分量电压决定。因此，根据控制电压和过滤后的直流分量电压可以调节振荡器40输出振荡信号的频率和相位，实现了通过两组独立的电压控制信号，高效精准地调整振荡器40的振荡信号的频率和相位，此调整振荡器40的方式还具有低功耗、低成本和鲁棒性高等优点。通过结合使用这两个延时模块，可以实现高精度的时钟同步和较宽频率范围。振荡器40的具体实施方式有两种，第二种实施方式是在第一种实施方式上额外增加了可控电容阵列。具体如下：如图5所示，振荡器40的第一种实施方式：第一延时模块401包括：一个反相器，如图5所示的反相器DC0，反相器的输入端为第一延时模块401的第二输入端，反相器的输出端为第一延时模块401的输出端，用于输出振荡信号。第一可变电容4011，如图5所示的第一可变电容4011C0，第一可变电容4011的第一端连接反相器输出端，第一可变电容4011的第二端为第一延时模块401的输入端，用于根据控制电压调整电容值，以调控第一延时模块401的瞬时频率，调节反相器输出的振荡信号的相位，使振荡信号的相位与参考时钟信号的相位保持固定的相位差。其中，第一延时模块401的电容值为第一可变电容4011的电容值，第一可变电容4011接收控制电压的控制，根据控制电压的大小改变容值，进而改变振荡器40输出信号的相位。还需要说明的是，在附图中，SD0表示反相器DC0输出的振荡信号。第二延时模块402包括：依次相连的n个反相器，如图5所示的反相器DC1-DCn，n个反相器的第一个反相器的输入端连接第一延时模块401的反相器的输出端，n个反相器的第n个反相器的输出端连接第一延时模块401的反相器的输入端，n为大于1的正整数。在附图中，每个反相器输出的信号用SD表示，SD下标的数字表示对应的反相器输出的信号。与n个反相器一一对应连接的n个第二可变电容4021，如图5所示的第二可变电容4021C1-Cn，每个第二可变电容4021的第一端连接每个第二可变电容4021对应的反相器的输出端，每个第二可变电容4021的第二端共接为第二延时模块402的第一输入端，用于根据过滤后的直流分量电压改变电容值，以调节第一延时模块401的反相器输出振荡信号的频率。在第二延时模块402中，第1个反相器输出高电平时，对与其连接的第二可变电容4021进行充电。第1个反相器输出低电平时，与第1个反相器连接的第二可变电容4021对第2个反相器进行放电。第1个反相器及与其连接的第二可变电容4021形成一个振荡电路，第二延时模块402包括多个依次连接的振荡电路。因此，通过控制第二可变电容4021的电压值，改变振荡器40输出振荡信号的频率。所以，通过控制电压控制第一可变电容4011的容值，精确调节振荡器40输出信号的瞬时频率和相位。通过调节第二延时模块402中的可变电容的电容值和数量，实现振荡器40的宽锁定范围，同时通过过滤后的直流分量电压精确调节振荡器40的频率。作为一种示例，如图6所示，第一延时模块401包括反相器DC2和第一可变电容C2，第二延时模块402包括依次相连的2个反相器DC0和DC1，以及与2个反相器一一对应连接的2个第二可变电容4021C0和C1。此时，振荡器40包括3个振荡电路，第一谐振电路包括反相器DC0和可变电容C0，第二谐振电路包括反相器DC1和可变电容C1，第三谐振电路包括反相器DC2和可变电容C2。本示例的工作原理为：振荡器40输出的频率由相位误差抵消模块20输出的控制电压VC_FPEC与低通滤波模块30输出的过滤后的直流分量电压VC_FLL两个电压控制。当控制电压VC_FPEC与过滤后的直流分量电压VC_FLL电压同时为0时，振荡器40的输出频率记为f0。控制电压VC_FPEC与过滤后的直流分量电压VC_FLL的单位电压频率增益分别为K_FPEC和K_FLL。其输出频率计算如公式所示。由公式可知，振荡器40的可变频率范围与单位电压频率增益分别为K_FPEC和K_FLL，K_FPEC与K_FLL与可变电容的容值与数量成正比关系。通过公式和图6可知，VC_FLL连接可变电容的数量是VC_FPEC的2倍，所以K_FLL是K_FPEC的2倍，得到比传统振荡器大2倍的锁定范围。因此，通过第一延时模块401和第二延时模块402的结构设置，在提高锁相环的输出时钟性能的同时，实现锁相环的宽锁定范围，增强锁相环的应用范围与通用性。还需要说明的是，可变电容容值Cv受控制电压VC的控制，控制电压为0时，其电容为C_orig，可变电容容值计算公式为Cv=KC×VC+C_ori，KC为振荡器40的频率随电压VC变化的斜率。如图7所示，振荡器40的第二种实施方式：基于振荡器40的第一种实施方式，在第一延时模块401中，第一延时模块401还包括：第一可控电容阵列4012，第一可控电容阵列4012的第一端连接反相器的输出端，第一可控电容阵列4012的第二端接地，第一可控电容阵列4012的控制端连接第一数字控制码，用于根据第一数字控制码调整第一延时模块401的频率级别。其中，第一可控电容阵列4012包括多个并联连接的可控电容支路，每个可控电容支路包括串联连接的固定电容和可控开关，每个可控开关的控制端连接第一数字控制码。在第一数字控制码使能时，每个可控电容支路中串联的固定电容接入电路中，第一延时模块401的电容值为第一可控电容阵列4012的电容值和第一可变电容4011的电容值之和，第一可变电容4011接收控制电压的控制，根据控制电压的大小改变容值，进而改变振荡器40的输出信号的相位。基于振荡器40的第一种实施方式，在第二延时模块402中，第二延时模块402还包括：与n个反相器一一对应连接的n个第二可控电容阵列4022，每个第二可控电容阵列4022的第一端连接每个第二可控电容阵列4022对应的反相器的输出端，每个第二可控电容阵列4022的第二端均接地，每个第二可控电容阵列4022的控制端连接第二数字控制码，用于根据第二数字控制码调节第一延时模块401的反相器输出振荡信号的频率级别。其中，第二可控电容阵列4022包括多个并联连接的可控电容支路，每个可控电容支路包括串联连接的固定电容和可控开关，每个可控开关的控制端连接第二数字控制码。在第二数字控制码使能时，第二可控电容阵列4022中每个可控电容支路中串联的固定电容接入电路中，每个振荡电路的电容值为第二可控电容阵列4022的电容值和第二可变电容4021的电容值之和，第二可变电容4021接收过滤后的直流分量电压的控制，根据直流分量电压的大小改变容值，进而改变振荡器40输出振荡信号的频率。作为一种示例，如图7所示，振荡器40包括反相器DC0、第一可控电容阵列4012、可变电容C0。以n=3为例，振荡器40的第二延时模块402包括依次连接的三个谐振电路，第一谐振电路包括反相器DC1、第二可控电容阵列4022以及可变电容C1，第二谐振电路包括反相器DC2、第二可控电容阵列4022以及可变电容C2，第三谐振电路包括反相器DC3、第二可控电容阵列4022以及可变电容C3。本示例的工作原理为：振荡器40输出的频率由相位误差抵消模块20输出的控制电压VC_FPEC与低通滤波模块30输出的过滤后的直流分量电压VC_FLL两个电压控制。当VC_FPEC与VC_FLL电压同时为0时，振荡器40的输出频率记为f0。第一电压VC_FPEC与第二电压VC_FLL的单位电压频率增益分别为K_FPEC和K_FLL。其输出频率计算如公式所示。由公式可知，振荡器40的可变频率范围与单位电压频率增益分别为K_FPEC和K_FLL，当D0~DN都为0时，电容阵列的有效电容值只由可变电容决定，K_FPEC与K_FLL与可变电容的容值与数量成正比关系。此示例中，振荡器40的四个反相器分别与四个可控电容阵列组成四个延时电路。每个可控电容阵列由一组开关控制的电容组与一个压控可变电容组成。当D0~Dn为1时，相连的电容为电容阵列的有效电容。而D0~Dn为0时，相连的电容与振荡器40断开，开关控制电容的容值相等，记为Ｃ。可变电容容值Cv受控制电压VC的控制，控制电压为0时，其电容为C_orig，可变电容容值计算为Cv=KC×VC+C_orig。每个可控电容阵列的有效电容C_g计算如下：C_g=D0×Ｃ+……＋DN×C+Cv。传统的振荡器只有一个电压输入控制信号，本实施例使用两组独立的电压控制信号。VC_FLL电压控制多个可变电容，VC_FPEC电压控制一个可变电容。相位误差抵消模块20根据参考时钟信号与DIV_OUT的相位误差，通过VC_FPEC实现快速地把振荡器40的相位误差抵消，同时还通过VC_FLL实时调整振荡器40的频率。因此，通过第一延时模块401和第二延时模块402的结构设置，在提高锁相环的输出时钟性能的同时，实现锁相环的宽锁定范围，增强锁相环的应用范围与通用性。振荡器40的第一种实施方式相较于振荡器40的第二种实施方式，振荡器40的电子元器件更少，控制逻辑更简单，具有低功耗、低成本、稳定性和可靠性高的优势。在实际应用中，优选振荡器40的第一种实施方式。本发明实施例中的一个或多个技术方案，至少具有如下技术效果或优点：在本发明实施例中，锁相环包括振荡器、分频器、相位误差抵消模块、低通滤波模块。通过振荡器、分频器、相位误差抵消模块、低通滤波模块形成了反馈环路，基于相位误差抵消模块输出的控制电压和低通滤波模块输出的过滤后的直流分量电压共同调整振荡器输出频率中的输出频率。因此，通过设置相位误差抵消模块和低通滤波模块对振荡器输入双控制电压，相位误差抵消模块向振荡器输出的控制电压控制振荡器的瞬时频率，使振荡信号的相位与参考时钟信号的相位保持固定的相位差，实现锁相环的低相位噪声和低杂散时钟。同时，相位误差抵消模块输出的直流分量电压通过低通滤波模块产生过滤后的直流分量电压，过滤后的直流分量电压用于调控振荡器的输出频率，使锁相环的锁定范围变宽变大。本发明实施例的锁相环在保证锁相环的低功耗，低相位噪声与低输出时钟杂散等性能的条件下，还能增大锁相环的锁定范围。增强锁相环的应用范围与通用性。还避免过多的器件模块进行调制振荡器，通过相位误差抵消模块和低通滤波模块直接调控振荡器的控制方式还具有简单、成本低、稳定可靠等优点。此外，低通滤波模块与相位误差抵消模块及振荡器的协同配合，减少了信号的抖动和电压的突变等情况的发生，提高过滤后的直流分量电压的质量，能够精准地调整振荡器的输出频率。实施例二：基于相同的发明构思，本发明第二实施例还提供了一种芯片。本发明实施例提供的锁相环可以应用于诸多AI领域，例如包括本发明提供的锁相环的基于感存算一体技术架构实现的模数混合AI视觉芯片，该AI视觉芯片的鲁棒性和稳定性更好，且具有更低功耗与更高的能效比。对应的AI视觉芯片可应用于自动驾驶、AR、VR、激光雷达，还可广泛应用于智能手机、平板电脑、可穿戴电子装备、智能家居电子产品、工业或医疗或电池供电类等一系列的应用领域。由于本实施例所介绍的芯片为实施本申请实施例一中锁相环所实现的芯片，故而基于本申请实施例一中所介绍的锁相环，本领域所属技术人员能够了解本实施例的芯片的具体实施方式以及其各种变化形式，所以在此对于该芯片如何实现本申请实施例一中的锁相环不再详细介绍。只要本领域所属技术人员实施本申请实施例一中锁相环所实现的芯片，都属于本申请所欲保护的范围。实施例三：基于相同的发明构思，本发明第三实施例还提供了一种电子设备。对应的电子设备包括但不限于智能手机、平板电脑、可穿戴电子装备、智能家居电子产品、AR、VR、激光雷达、汽车、光纤通信设备、雷达和卫星通信设备。本领域内的技术人员应明白，尽管已描述了本发明的优选实施例，但本领域内的技术人员一旦得知了基本创造性概念，则可对这些实施例作出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本发明范围的所有变更和修改。显然，本领域的技术人员可以对本发明进行各种改动和变型而不脱离本发明的精神和范围。这样，倘若本发明的这些修改和变型属于本发明权利要求及其等同技术的范围之内，则本发明也意图包含这些改动和变型在内。
