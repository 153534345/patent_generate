标题title
光纤到房间FTTR的主从设备通信方法、存储介质和电子装置
摘要abst
本发明实施例提供了一种光纤到房间FTTR的主从设备通信方法、存储介质和电子装置，通过FTTR的主设备与从设备之间根据从设备的上行方式，建立对应的OMCI通道；主设备通过OMCI通道接收来自从设备的属性值变化AVC通知；主设备根据AVC通知，接收从设备的序列号，完成从设备辅节点SN认证；主设备根据SN认证，向从设备发起主信息块MIB同步，以进行主设备与从设备的通信。解决了相关技术FTTR通信中，无法对主从设备之间多种上行方式进行有效管理的问题，达到了对主从设备之间多种上行方式进行有效管理、降低管控复杂度的效果。
权利要求书clms
1.一种光纤到房间FTTR的主从设备通信方法，其特征在于，包括：FTTR的主设备与从设备之间根据所述从设备的上行方式，建立对应的无源光网络管理与控制接口OMCI通道；所述主设备通过所述OMCI通道接收来自所述从设备的属性值变化AVC通知；所述主设备根据所述AVC通知，接收所述从设备的序列号，完成所述从设备的辅节点SN认证；所述主设备根据所述SN认证，向所述从设备发起主信息块MIB同步，以进行所述主设备与所述从设备的通信。2.根据权利要求1所述的方法，其特征在于，根据所述从设备的上行方式，建立对应的无源光网络管理与控制接口OMCI通道，包括：在所述从设备的上行方式为以太网或者无线的情况下，所述主设备基于以太网帧建立与所述从设备之间的无源光网络管理与控制接口OMCI通道；在所述从设备的上行方式为无源光网络PON的情况下，所述主设备基于GEM帧建立与所述从设备之间的OMCI通道。3.根据权利要求1所述的方法，其特征在于，所述主设备通过所述OMCI通道接收来自所述从设备的属性值变化AVC通知，包括：所述主设备通过所述OMCI通道，接收来自所述从设备的所述AVC通知，所述AVC通知至少包括所述从设备的接入节点端口实体的操作状态属性字段。4.根据权利要求3所述的方法，其特征在于，所述接入节点端口实体的类型至少包括：以太网接入节点端口实体；无线接入节点端口实体；PON接入节点端口实体。5.根据权利要求4所述的方法，其特征在于，其中，所述以太网接入节点端口实体至少包括：受管实体编号属性字段、操作状态属性字段、管理状态属性字段、最大比特率属性字段、当前比特率属性字段、双工模式属性字段；所述无线接入节点端口实体至少包括：受管实体编号属性字段、操作状态属性字段、管理状态属性字段、接入频段属性字段、无线信号强度属性字段、接入信道属性字段、上下行协商速率属性字段；所述PON接入节点端口实体至少包括：受管实体编号属性字段、操作状态属性字段、管理状态属性字段。6.根据权利要求1所述的方法，其特征在于，所述主设备根据所述AVC通知，接收所述从设备的序列号，完成所述从设备的辅节点SN认证，包括：在所述AVC通知指示所述从设备的操作状态为激活状态的情况下，所述主设备发送查询消息，以查询所述从设备的所述序列号；所述主设备接收所述从设备上报的所述序列号；所述主设备对所述从设备进行所述SN认证。7.根据权利要求6所述的方法，其特征在于，所述主设备对所述从设备进行所述SN认证，包括：在所述主设备对所述从设备进行所述SN认证成功的情况下，所述主设备向所述从设备发起MIB同步；在所述主设备对所述从设备进行所述SN认证失败的情况下，所述主设备将所述从设备离线。8.根据权利要求1所述的方法，其特征在于，在所述主设备向所述从设备发起主信息块MIB同步之后，所述方法还包括：所述主设备向所述从设备发送配置指令或者查询消息；所述主设备接收所述从设备上报的告警信息或者AVC通知。9.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质中存储有计算机程序，其中，所述计算机程序被处理器执行时实现所述权利要求1至8任一项中所述的方法。10.一种电子装置，包括存储器、处理器以及存储在所述存储器上并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现所述权利要求1至8任一项中所述的方法。
说明书desc
技术领域本发明实施例涉及通信领域，具体而言，涉及一种光纤到房间FTTR的主从设备通信方法、存储介质和电子装置。背景技术千兆无源光网络技术是基于ITU-T G.9xx标准的无源光网络接入技术。GPON系统包括光线路终端和光网络单元 。ITU-T G.988 是ONU管理和控制接口是国际通行标准，OMCI协议是OLT管理必选协议。OMCI协议是内嵌在GPON/XGPON系统中的底层管理协议，用于ONU的PON接口相关的基本配置，在GPON/XGPON系统中不可或缺的。家庭全光网络，将光纤铺设至每一个房间，通过部署边缘ONU，实现与家庭网关互连，最大可能的保障在线教育、居家办公和家庭娱乐等新业务应用的高质量发展。目前，在家庭全光网络FTTR中，主设备可以对PON上行的从网关进行管理，但是对主从设备之间多种上行方式，例如以太网Ethernet上行和无线Wireless上行缺乏有效的管理。发明内容本发明实施例提供了一种光纤到房间FTTR的主从设备通信方法、存储介质和电子装置，以至少解决相关技术FTTR通信中，无法对主从设备之间多种上行方式进行有效管理的问题。根据本发明的一个实施例，提供了一种光纤到房间FTTR的主从设备通信方法，包括：FTTR的主设备与从设备之间根据所述从设备的上行方式，建立对应的无源光网络管理与控制接口OMCI通道；所述主设备通过所述OMCI通道接收来自所述从设备的属性值变化通知；所述主设备根据所述AVC通知，接收所述从设备的序列号，完成所述从设备辅节点认证；所述主设备根据所述SN认证，向所述从设备发起主信息块MIB同步，以进行所述主设备与所述从设备的通信。根据本发明的又一个实施例，还提供了一种计算机可读存储介质，所述计算机可读存储介质中存储有计算机程序，其中，所述计算机程序被设置为运行时执行上述任一项方法实施例中的步骤。根据本发明的又一个实施例，还提供了一种电子装置，包括存储器和处理器，所述存储器中存储有计算机程序，所述处理器被设置为运行所述计算机程序以执行上述任一项方法实施例中的步骤。通过本发明，提供了一种光纤到房间FTTR的主从设备通信方法，通过FTTR的主设备与从设备之间根据从设备的上行方式，建立对应的OMCI通道；主设备通过OMCI通道接收来自从设备的属性值变化AVC通知；主设备根据AVC通知，接收从设备的序列号，完成从设备辅节点SN认证；主设备根据SN认证，向从设备发起主信息块MIB同步，以进行主设备与从设备的通信。解决了相关技术FTTR通信中，无法对主从设备之间多种上行方式进行有效管理的问题，达到了对主从设备之间多种上行方式进行有效管理、降低管控复杂度的效果。附图说明图1是本发明实施例的一种FTTR的主从设备通信方法的移动终端的硬件结构框图；图2是根据本发明实施例的FTTR的主从设备通信方法运行的网络架构图；图3是根据本发明实施例的FTTR的主从设备通信方法的流程图；图4是根据本发明实施例的FTTR的主从设备通信装置的结构框图；图5是根据本发明场景实施例的FTTR主从设备通信模型示意图；图6是根据本发明场景实施例的FTTR基于不同上行方式的主从设备通信原理图。具体实施方式下文中将参考附图并结合实施例来详细说明本发明的实施例。需要说明的是，本发明的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。本申请实施例中所提供的方法实施例可以在移动终端、计算机终端或者类似的运算装置中执行。以运行在移动终端上为例，图1是本发明实施例的一种FTTR的主从设备通信方法的移动终端的硬件结构框图，如图1所示，移动终端可以包括一个或多个处理器102和用于存储数据的存储器104，其中，上述移动终端还可以包括用于通信功能的传输设备106以及输入输出设备108。本领域普通技术人员可以理解，图1所示的结构仅为示意，其并不对上述移动终端的结构造成限定。例如，移动终端还可包括比图1中所示更多或者更少的组件，或者具有与图1所示不同的配置。存储器104可用于存储计算机程序，例如，应用软件的软件程序以及模块，如本发明实施例中的FTTR的主从设备通信方法对应的计算机程序，处理器102通过运行存储在存储器104内的计算机程序，从而执行各种功能应用以及数据处理，即实现上述的方法。存储器104可包括高速随机存储器，还可包括非易失性存储器，如一个或者多个磁性存储装置、闪存、或者其他非易失性固态存储器。在一些实例中，存储器104可进一步包括相对于处理器102远程设置的存储器，这些远程存储器可以通过网络连接至移动终端。上述网络的实例包括但不限于互联网、企业内部网、局域网、移动通信网及其组合。传输设备106用于经由一个网络接收或者发送数据。上述的网络具体实例可包括移动终端的通信供应商提供的无线网络。在一个实例中，传输设备106包括一个网络适配器，其可通过基站与其他网络设备相连从而可与互联网进行通讯。在一个实例中，传输设备106可以为射频模块，其用于通过无线方式与互联网进行通讯。本申请实施例可以运行于图2所示的网络架构上，图2是根据本发明实施例的FTTR的主从设备通信方法运行的网络架构图，如图2所示，该网络架构包括：主设备和从设备1-3，主设备作为OMCI 服务器，从设备作为OMCI 客户端，其中，主设备：入户设备，上联OLT，下挂从设备。从设备1-3：布置在用户的各个房间，通过不同方式连接主设备。以下为从网关接入方式的具体说明：从设备1：PON上行，用GEM frame承载OMCI消息。从设备2：Ethernet上行，用以太网帧承载OMCI消息。从设备3：无线上行，用Ethernet frame承载OMCI消息。在本实施例中提供了一种运行于上述移动终端或网络架构的FTTR的主从设备通信方法，图3是根据本发明实施例的FTTR的主从设备通信方法的流程图，如图3所示，该流程包括如下步骤：步骤S302，FTTR的主设备与从设备之间根据从设备的上行方式，建立对应的OMCI通道；在一个示例性实施例中，根据从设备的上行方式，建立对应的无源光网络管理与控制接口OMCI通道，包括：在从设备的上行方式为以太网或者无线的情况下，主设备基于以太网帧建立与从设备之间的无源光网络管理与控制接口OMCI通道；在从设备的上行方式为无源光网络PON的情况下，主设备基于GEM帧建立与从设备之间的OMCI通道。步骤S304，主设备通过OMCI通道接收来自从设备的属性值变化AVC通知；在一个示例性实施例中，主设备通过OMCI通道接收来自从设备的属性值变化AVC通知，包括：主设备通过OMCI通道，接收来自从设备的AVC通知，AVC通知至少包括从设备的接入节点端口实体的操作状态属性字段。在实际实施过程中，AVC通知的操作状态属性字段可以用于指示从设备的状态为去激活状态或者激活状态。在一个示例性实施例中，接入节点端口实体的类型至少包括：以太网接入节点端口实体；无线接入节点端口实体；PON接入节点端口实体。在一个示例性实施例中，以太网接入节点端口实体至少包括：受管实体编号属性字段、操作状态属性字段、管理状态属性字段、最大比特率属性字段、当前比特率属性字段、双工模式属性字段；无线接入节点端口实体至少包括：受管实体编号属性字段、操作状态属性字段、管理状态属性字段、接入频段属性字段、无线信号强度属性字段、接入信道属性字段、上下行协商速率属性字段；PON接入节点端口实体至少包括：受管实体编号属性字段、操作状态属性字段、管理状态属性字段。在实际实施过程中，不同类型的接入节点端口实体可以具有不同的字段设置，并根据实际情况对字段内容进行调整。步骤S306，主设备根据AVC通知，接收从设备的序列号，完成从设备辅节点SN认证；在一个示例性实施例中，主设备根据AVC通知，接收从设备的序列号，完成从设备辅节点SN认证，包括：在AVC通知指示从设备的操作状态为激活状态的情况下，主设备发送查询消息，以查询从设备的所述序列号；主设备接收从设备上报的序列号；主设备对从设备进行SN认证。在一个示例性实施例中，主设备对从设备进行SN认证，包括：在主设备对从设备进行SN认证成功的情况下，主设备向从设备发起MIB同步；在主设备对从设备进行SN认证失败的情况下，主设备将从设备离线。在实际实施过程中，从设备在主设备上登记过，则会认证成功，从设备没有在主设备上登记过，则会认证失败。步骤S308，主设备根据SN认证，向从设备发起主信息块MIB同步，以进行主设备与从设备的通信。在一个示例性实施例中，在主设备向从设备发起主信息块MIB同步之后，方法还包括：主设备向从设备发送配置指令或者查询消息；主设备接收从设备上报的告警信息或者AVC通知。通过上述步骤，提供了一种光纤到房间FTTR的主从设备通信方法，通过FTTR的主设备与从设备之间根据从设备的上行方式，建立对应的OMCI通道；主设备通过OMCI通道接收来自从设备的属性值变化AVC通知；主设备根据AVC通知，接收从设备的序列号，完成从设备辅节点SN认证；主设备根据SN认证，向从设备发起主信息块MIB同步，以进行主设备与从设备的通信。解决了相关技术FTTR通信中，无法对主从设备之间多种上行方式进行有效管理的问题，达到了对主从设备之间多种上行方式进行有效管理、降低管控复杂度的效果。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到根据上述实施例的方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台终端设备执行本发明各个实施例所述的方法。在本实施例中还提供了一种FTTR的主从设备通信装置，该装置用于实现上述实施例及优选实施方式，已经进行过说明的不再赘述。如以下所使用的，术语“模块”可以实现预定功能的软件和/或硬件的组合。尽管以下实施例所描述的装置较佳地以软件来实现，但是硬件，或者软件和硬件的组合的实现也是可能并被构想的。图4是根据本发明实施例的FTTR的主从设备通信装置的结构框图，如图4所示，该通信装置40包括：通道建立模块410，用于在FTTR的主设备与从设备之间根据从设备的上行方式，建立对应的OMCI通道；状态通知模块420，用于通过OMCI通道接收来自从设备的属性值变化AVC通知；认证模块430，用于根据AVC通知，接收从设备的序列号，完成从设备辅节点SN认证；同步模块440，用于根据SN认证，向从设备发起主信息块MIB同步，以进行主设备与从设备的通信。在本发明实施例中，上述通信装置可以设置于主设备侧，或者独立设置于主设备与从设备之外，在实际实施过程中，还可以根据实际情况，调整通信装置信息发送与接收，将通信装置设置于从设备侧。本领域的技术人员应该知道的是，上述关于通信装置的模块定义和模块功能划分仅是举例而言，并不是具体限制，在实际实施过程中，通信装置的模块定义和模块功能划分可以根据实际情况进行调整。需要说明的是，上述各个模块是可以通过软件或硬件来实现的，对于后者，可以通过以下方式实现，但不限于此：上述模块均位于同一处理器中；或者，上述各个模块以任意组合的形式分别位于不同的处理器中。本发明的实施例还提供了一种计算机可读存储介质，该计算机可读存储介质中存储有计算机程序，其中，该计算机程序被设置为运行时执行上述任一项方法实施例中的步骤。在一个示例性实施例中，上述计算机可读存储介质可以包括但不限于：U盘、只读存储器、随机存取存储器、移动硬盘、磁碟或者光盘等各种可以存储计算机程序的介质。本发明的实施例还提供了一种电子装置，包括存储器和处理器，该存储器中存储有计算机程序，该处理器被设置为运行计算机程序以执行上述任一项方法实施例中的步骤。在一个示例性实施例中，上述电子装置还可以包括传输设备以及输入输出设备，其中，该传输设备和上述处理器连接，该输入输出设备和上述处理器连接。本实施例中的具体示例可以参考上述实施例及示例性实施方式中所描述的示例，本实施例在此不再赘述。显然，本领域的技术人员应该明白，上述的本发明的各模块或各步骤可以用通用的计算装置来实现，它们可以集中在单个的计算装置上，或者分布在多个计算装置所组成的网络上，它们可以用计算装置可执行的程序代码来实现，从而，可以将它们存储在存储装置中由计算装置来执行，并且在某些情况下，可以以不同于此处的顺序执行所示出或描述的步骤，或者将它们分别制作成各个集成电路模块，或者将它们中的多个模块或步骤制作成单个集成电路模块来实现。这样，本发明不限制于任何特定的硬件和软件结合。为了使得本领域的技术人员更好地理解本发明的技术方案，下面结合具体的场景实施例进行阐述。场景实施例一在本发明场景实施例中，主设备作为OMCI 服务器，从设备作为OMCI 客户端，主设备统一管理多种上行方式从设备，定义Sub FTTR UnitOMCI Ethernet frame承载管控消息。从设备多种上行方式自动发现和注册，定义子光纤到房间单元接入节点接口实体管理对象和AVC通知消息。从设备多种上行方式通过统一的OMCI业务管理模型管理从设备，定义虚拟GEM端口和接入节点接口实例指针构建从设备业务管理模型。图5是根据本发明场景实施例的FTTR主从设备通信模型示意图，如图5所示，Ethernet上行和Wireless上行消息通过Sub FTTR Unit OMCI Ethernet frame即Ethernetframe承载，图5中，Software image 表示软件映像，ONU-G表示光网络单元实体，ONT DATA表示光传送网数据。在本发明场景实施例中，以太网帧Ethernet frame定义如下表所示：表1 以太网帧Ethernet frame字段定义示例表其中，上述OMCI message与G988上extended OMCI message不同，在本发明场景实施例中，OMCI message定义如下表所示：表2 OMCI message字段定义示例表图6是根据本发明场景实施例的FTTR基于不同上行方式的主从设备通信原理图，如图6所示，包括以下步骤：步骤601：主设备与从设备之间基于Gem frame或Ethernetframe建立OMCI通道；步骤602：通道建立后，从设备发送AVC通知，告知主设备：从设备状态发生变化,由去激活状态变更为激活状态，其中PON上行从设备通过PON接入节点端口实体上报，Ethernet上行从设备通过以太网接入节点端口实体上报，Wireless上行从设备通过无线接入节点端口实体上报；步骤603：主设备收到从设备发送的AVC通知后，下发消息查询从设备的序列号；步骤604：从设备上报自己的序列号；步骤605：从设备SN认证成功，主设备发起MIB同步；步骤606：MIB同步后，主设备可以向从设备发起配置或者查询消息；步骤607：从设备向主设备上报告警和AVC通知。场景实施例二在本场景实施例二中，对从设备的上行方式为无源光网络PON的主从设备通信进行介绍。首先，对PON接入节点端口实体进行定义，如表3所示，在本发明场景实施例中， ONU自动为每个PON物理口创建一个实例。表3 PON ANI Port实体定义示例表在本场景实施例中，主从通信消息基于Gem frame格式构建，从设备的上行方式为无源光网络PON的主从设备通信流程如下：步骤701、从设备上电，光纤连接主设备的LAN侧PON口，主设备自动发现从设备，与从设备之间基于Gem frame建立OMCI通道；步骤702、通道建立后，从设备发送PON ANI Port实体的AVC通知，告知主设备：从设备状态发生变化,当前操作状态为激活状态；步骤703、主设备收到从设备发送的AVC通知后，下发消息查询从设备的Serialnumber；在本发明场景实施例中，上述AVC通知可以以列表形式发送，具体定义如下表所示：表4 AVC通知列表示例表步骤704、从设备上报自己的Serial number；步骤705、主设备收到从设备SN，判断该从设备是否在主设备上登记过，根据结果分别进入步骤706和707；步骤706、从设备在主设备上登记过，认证成功，主设备向认证成功的从设备发起MIB同步，注册完成；步骤707、从设备没有在主设备上登记过，认证失败，主设备将从设备离线。场景实施例三在本场景实施例三中，对从设备的上行方式为以太网Ethernet的主从设备通信进行介绍。在本场景实施例中，ONU自动为每个以太网ANI口创建一个实例，首先，对以太网接入节点端口实体进行定义，如表5所示：表5 Ethernet ANI Port实体定义示例表在本场景实施例中，主从通信消息基于Sub FTTR Unit OMCI Ethernet frame格式即Ethernet frame格式构建。从设备的上行方式为以太网Ethernet的主从设备通信流程如下：步骤801、从设备上电，网线连接主设备和从设备的LAN口，主设备自动发现从设备，与从设备之间基于Ethernet frame建立OMCI通道；步骤802、通道建立后，从设备发送Ethernet ANI Port实体的AVC通知，告知主设备：从设备状态发生变化,当前操作状态为激活状态；在本发明场景实施例中，上述AVC通知可以以列表形式发送，具体定义如下表所示：表6 AVC通知列表示例表AVC通知可以采取的报文格式如下表所示：表7 AVC通知的报文格式示例表步骤803、主设备收到从设备发送的AVC通知后，下发消息查询从设备的Serialnumber；步骤804、从设备上报自己的Serial number；步骤805、主设备收到从设备SN，判断该从设备是否在主设备上登记过，根据结果分别进入步骤806和807；步骤806、从设备在主设备上登记过，认证成功，主设备向认证成功的从设备发起MIB同步，注册完成；步骤807、从设备没有在主设备上登记过，认证失败，主设备将从设备离线。步骤808、主设备下发配置：将从设备LAN1口MTU设置为1980；步骤809、从设备接收后进行相应设置，并返回执行结果给主设备。在步骤808中，主设备下发配置可以采取的报文格式如下表所示：表8 主设备下发配置的报文格式示例表场景实施例四在本场景实施例四中，对从设备的上行方式为无线Wireless上行的主从设备通信进行介绍。在本场景实施例中，ONU自动为每个无线ANI口创建一个实例。首先，对无线接入节点端口实体进行定义，如表9所示：表9 Wireless ANI Port实体定义示例表在本场景实施例中，主从通信消息基于Sub FTTR Unit OMCI Ethernet frame格式即Ethernet frame格式构建。从设备的上行方式为无线Wireless的主从设备通信流程如下：步骤901、从设备上电，从设备通过Wireless连接主设备，主设备自动发现从设备，与从设备之间基于Ethernet frame建立OMCI通道；步骤902、通道建立后，从设备发送Wireless ANI Port实体的AVC通知，告知主设备：从设备状态发生变化，当前操作状态为激活状态；在本发明场景实施例中，上述AVC通知可以以列表形式发送，具体定义如下表所示：表10 AVC通知列表示例表AVC通知可以采取的报文格式如下表所示：表11 AVC通知的报文格式示例表步骤903、主设备收到从设备发送的AVC通知后，下发消息查询从设备的Serialnumber；步骤904、从设备上报自己的Serial number；步骤905、主设备收到从设备SN，判断该从设备是否在主设备上登记过，根据结果分别进入步骤906和907；步骤906、从设备在主设备上登记过，认证成功，主设备向认证成功的从设备发起MIB同步，注册完成；步骤907、从设备没有在主设备上登记过，认证失败，主设备将从设备离线。步骤908、主设备查询从设备的软件版本号；步骤909、从设备返回当前软件版本号给主设备。其中，从设备返回的消息可以采取的报文格式如表12所示：表12 从设备返回消息的报文格式示例表随着创新的业务应用也层出不穷，超高清视频、云 VR、云游戏、线上教育、远程办公等，对网络的带宽、时延、抖动等提出了越来越高的要求。FTTR通过部署边缘ONU，实现与家庭网关互连，最大可能的保障在线教育、居家办公和家庭娱乐等新业务应用的高质量发展。本发明实施例提供了一种FTTR的主从设备通信方法，通过标准OMCI协议统一管控多种上行方式的从设备， 降低了管控复杂度，提升了用户体验，易于互通和部署。以上所述仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
