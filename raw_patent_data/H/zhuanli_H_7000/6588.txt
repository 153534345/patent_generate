标题title
一种高灵敏度接近光检测传感器
摘要abst
本发明公开了一种高灵敏度接近光检测传感器，涉及光学传感器芯片处理技术领域，解决了传感器的电路噪声较大的问题，采用伪差分输入电路和可编程电容阵列Cdummy匹配光电二极管Photo diode的寄生电容，光电二极管Photo diode的正极接地，光电二极管Photo diode的负极与伪差分电路的反相输入端进行连接，将编程电容阵列Cdummy的一个端口与伪差分输入电路的同相输入端进行连接，另一个端口进行接地，并设置共模稳定电路，以减小积分器的共模噪声。
权利要求书clms
1.一种高灵敏度接近光检测传感器，其特征在于，包括传感器接收端与数模转换器ADC；传感器接收端由光电二极管Photo diode、积分器Integrator、可编程电容阵列Cdummy和输入共模稳定电路组成；传感器接收端采用伪差分输入电路，并用可编程电容阵列Cdummy匹配光电二极管Photo diode的寄生电容；设置共模稳定电路，共模稳定电路中包括缓冲器Buffer、电阻电容以及PMOS电流输出管，将积分器Integrator同相输入端悬空，SUMJP和SUMJN节点的电压通过缓冲器buffer1和缓冲器buffer2输出，然后由电阻R1和R2采样SUMJP和SUMJN的输入共模电压，并通过缓冲器buffer3反馈控制PMOS电流输出管MP1和MP2的开启。2.根据权利要求1所述的一种高灵敏度接近光检测传感器，其特征在于，伪差分输入电路的连接方式为：伪差分输入电路中包括同相输入端和反相输入端，光电二极管Photo diode的负极与同相输入端进行相连，光电二极管Photo diode的正极与地进行连接。3.根据权利要求1所述的一种高灵敏度接近光检测传感器，其特征在于，可编程电容阵列Cdummy的接线方式为：将编程电容阵列Cdummy的一个端口与伪差分输入电路的同相输入端进行连接，另一个端口进行接地。4.根据权利要求1所述的一种高灵敏度接近光检测传感器，其特征在于，伪差分输入电路和可编程电容阵列Cdummy匹配光电二极管Photo diode的寄生电容的工作方法为：S1：当传感器接收端接收到外界的光信号时，先通过伪差分输入电路中的反相输入端对光电二极管Photo diode的输出电流进行光电转换，并对信号进行放大，然后通过模数转换器将积分器输出电压信号转换成数字信号；S2：将连接伪差分输入电路中同相输入端的可编程电容阵列Cdummy匹配光电二极管Photo diode的寄生电容，通过调整可编程电容阵列Cdummy的大小，得到模数转换器ADC输出信号噪声最小时的可编程电容阵列Cdummy数据参数。5.根据权利要求1所述的一种高灵敏度接近光检测传感器，其特征在于，共模稳定电路的工作原理为：ST1：SUMJP和SUMJN节点的电压通过缓冲器Buffer1和缓冲器Buffer2分别隔离输出；ST2：将buffer采集的SUMJP和SUMJN节点的电压分别经过电阻R1和R2，得到输入共模电压；ST3：之后将输入共模电压输入至缓冲器Buffer3中，并通过缓冲器Buffer3来进行反馈控制，得到反馈控制信号；ST4：最后根据反馈控制信号对PMOS电流输出管的MP1和MP2进行开启。6.根据权利要求1所述的一种高灵敏度接近光检测传感器，其特征在于，还包括对传感器的运行状态进行检测，具体的检测方法为：通过光电二极管Photo diode生成电信号Ui，并对电信号进行检测，同时获取到模数转换器中的输出电压Uo，之后将输出电压Uo除以电信号Ui得到信号比Xb，之后将信号比Xb与信号阈值范围比Xy进行比较，当信号比Xb在信号阈值范围比Xy内时，此时接近光检测传感器信号运算为正常状态，当信号比Xb不在信号阈值范围比Xy内时，此时接近光检测传感器信号运算为异常状态，并将异常状态传输至相关工作人员的终端设备中。
说明书desc
技术领域本发明属于光学传感器芯片处理技术领域，具体是一种高灵敏度接近光检测传感器。背景技术在手机和平板电脑领域，高性能光学传感器芯片作为标准配置被用于接近光检测，系统设计师可根据显示屏离被测物体距离的远近自动调节显示屏的亮灭从而降低系统功耗。实际应用场景中，由于显示屏对红外线的衰减以及屏幕对LED灯开启时间的要求，需要接近光检测传感器能够分辨微弱的物体红外反射信号；如图2所示，现有技术方案通过降低接近光检测传感器的电路噪声以提高其灵敏度，由LED发射端与接近光检测接收端组成。通过控制 LED开关SW 的导通和关断来控制LED灯发光，当光电二极管photo diode接收到物体的反射光信号后，光信号由模拟前端AFE 转换成电信号，再通过模数转换器ADC 转换成数字信号Data进行系统级数字信号处理。现有技术中，在对接近光进行检测时，其传感器的电路噪声较大，此时会增加传感器的运行功耗，从而对接近光检测传感器的精度造成影响。发明内容本发明旨在至少解决现有技术中存在的技术问题之一；为此，本发明提出了一种高灵敏度接近光检测传感器，用于解决上述所提出的技术问题。为实现上述目的，根据本发明的第一方面的实施例提出一种高灵敏度接近光检测传感器，包括传感器接收端与数模转换器ADC；传感器接收端由光电二极管Photo diode、积分器Integrator、可编程电容阵列Cdummy和输入共模稳定电路组成；传感器接收端采用伪差分输入电路，并用可编程电容阵列Cdummy匹配光电二极管Photo diode的寄生电容；设置共模稳定电路，共模稳定电路中包括缓冲器Buffer、电阻电容以及PMOS电流输出管，将积分器Integrator同相输入端悬空，SUMJP和SUMJN节点的电压通过缓冲器buffer1和缓冲器buffer2输出，然后由电阻R1和R2采样SUMJP和SUMJN的输入共模电压，并通过缓冲器buffer3反馈控制PMOS电流输出管MP1和MP2的开启。作为本发明的进一步方案，伪差分输入电路的连接方式为：伪差分输入电路中包括同相输入端和反相输入端，光电二极管Photo diode的负极与同相输入端进行相连，光电二极管Photo diode的正极与地进行连接。作为本发明的进一步方案，可编程电容阵列Cdummy的接线方式为：将编程电容阵列Cdummy的一个端口与伪差分输入电路的同相输入端进行连接，另一个端口进行接地。作为本发明的进一步方案，伪差分输入电路和可编程电容阵列Cdummy匹配光电二极管Photo diode的寄生电容的工作方法为：S1：当传感器接收端接收到外界的光信号时，先通过伪差分输入电路中的反相输入端对光电二极管Photo diode的输出电流进行光电转换，并对信号进行放大，然后通过模数转换器将积分器输出电压信号转换成数字信号；S2：将连接伪差分输入电路中同相输入端的可编程电容阵列Cdummy匹配光电二极管Photo diode的寄生电容，通过调整可编程电容阵列Cdummy的大小，得到模数转换器ADC输出信号噪声最小时的可编程电容阵列Cdummy数据参数。作为本发明的进一步方案，共模稳定电路的工作原理为：ST1：SUMJP和SUMJN节点的电压通过缓冲器Buffer1和缓冲器Buffer2分别隔离输出；ST2：将buffer采集的SUMJP和SUMJN节点的电压分别经过电阻R1和R2，得到输入共模电压；ST3：之后将输入共模电压输入至缓冲器Buffer3中，并通过缓冲器Buffer3来进行反馈控制，得到反馈控制信号；ST4：最后根据反馈控制信号对PMOS电流输出管的MP1和MP2进行开启。作为本发明的进一步方案，还包括对传感器的运行状态进行检测，具体的检测方法为：通过光电二极管Photo diode生成电信号Ui，并对电信号进行检测，同时获取到模数转换器中的输出电压Uo，之后将输出电压Uo除以电信号Ui得到信号比Xb，之后将信号比Xb与信号阈值范围比Xy进行比较，当信号比Xb在信号阈值范围比Xy内时，此时接近光检测传感器信号运算为正常状态，当信号比Xb不在信号阈值范围比Xy内时，此时接近光检测传感器信号运算为异常状态，并将异常状态传输至相关工作人员的终端设备中。与现有技术相比，本发明的有益效果是：1）采用伪差分输入电路和可编程电容阵列Cdummy匹配光电二极管Photo diode的寄生电容，以减小积分器的共模噪声；2）积分器负端输入悬空floating，从而不会引入额外的参考电压噪声；3）SUMJP和SUMJN节点的电压通过缓冲器buffer1和buffer2输出，并通过电阻R1和R2采样SUMJP和SUMJN的输入共模电压后，通过缓冲器buffer3反馈控制PMOS电流输出管MP1和MP2的开启，以提供额外的补偿电流来稳定输入共模电压。附图说明图1为本发明系统框架示意图；图2为本发明现有技术示意图。具体实施方式下面将结合实施例对本发明的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其它实施例，都属于本发明保护的范围。请参阅图1，本申请提供了一种高灵敏度接近光检测传感器，包括传感器接收端，其中传感器接收端由光电二极管Photo diode、积分器Integrator、可编程电容阵列Cdummy、输入共模稳定电路和模数转换器ADC组成；其中，传感器接收端采用伪差分输入电路，伪差分输入电路中包括同相输入端和反相输入端，之后光电二极管Photo diode的负极与同相输入端进行相连，光电二极管Photo diode的正极与地进行连接；同时设置可编程电容阵列Cdummy，将编程电容阵列Cdummy的一个端口与伪差分输入电路的反相输入端进行连接，另一个端口进行接地；上述接线的具体工作方法为：S1：当传感器接收端接收到被测物体的反射信号时，先通过积分器对光电二极管Photo diode的输出电流进行光电转换，并对信号进行放大，然后通过模数转换器将积分器输出电压信号转换成数字信号；S2：之后将可编程电容阵列Cdummy匹配光电二极管Photo diode的寄生电容，通过调整可编程电容阵列Cdummy的大小，得到模数转换器ADC输出信号噪声最小时的可编程电容阵列Cdummy数据参数；之后将积分器Integrator同相输入端输入悬空floating，即积分器Integrator同相输入端未连接到参考电压，并处于悬空floating状态，从而不会引入额外的参考电压噪声；同时设置共模稳定电路，用于因积分器Integrator同相输入端悬空floating，光电二极管Photo diode输出的环境光和接近电流太大，积分器Integrator输入的共模电压会被持续拉低，从而造成积分器不能正常工作，共模稳定电路中包括缓冲器Buffer、电阻以及PMOS电流输出管，具体的共模稳定电路的工作原理为：ST1：SUMJP和SUMJN节点的电压通过缓冲器Buffer1和缓冲器Buffer2分别隔离输出；ST2：将buffer采集的SUMJP和SUMJN节点的电压分别经过电阻R1和R2，得到输入共模电压；ST3：之后将输入共模电压输入至缓冲器Buffer3中，并通过缓冲器Buffer3来进行反馈控制，得到反馈控制信号；ST4：最后根据反馈控制信号对PMOS电流输出管的MP1和MP2进行开启，来调节SUMJP和SUMJN节点的电压；其中，将此光检测传感器的运行具体方式与仿真数据进行结合，生产电路仿真数据表，如下所示：积分器输出电压积分器输出噪声原方案152mV3.8mVpp本发明152mV600uVpp由此可见，本发明有效降低了接近光传感器的输出噪声，相同积分器输出电压的状态下，本发明比现有技术中，输出噪声减小了6.3倍。实施例二：本实施例在实施例一的基础上，与实施例一的区别之处在于，本实施例对接近光进行检测时，通过光电二极管Photo diode生成电信号Ui，并对电信号进行检测，同时获取到模数转换器中的输出电压Uo，之后将输出电压Uo除以电信号Ui得到信号比Xb，之后将信号比Xb与信号阈值范围比Xy进行比较，当信号比Xb在信号阈值范围比Xy内时，此时接近光检测传感器信号运算为正常状态，当信号比Xb不在信号阈值范围比Xy内时，此时接近光检测传感器信号运算为异常状态，并将异常状态传输至相关工作人员的终端设备中，之后相关工作人员对接近光检测传感器进行异常状态检修，从而及时的对接近光检测传感器的异常状态进行报修，其中信号阈值范围比Xy根据接近光传感器内芯片的实际参数进行设置。实施例三：本实施例用于将实施例一与实施例二进行融合，并实施。上述公式中的部分数据均是去除量纲取其数值计算，公式是由采集的大量数据经过软件模拟得到最接近真实情况的一个公式；公式中的预设参数和预设阈值由本领域的技术人员根据实际情况设定或者通过大量数据模拟获得。以上实施例仅用以说明本发明的技术方法而非限制，尽管参照较佳实施例对本发明进行了详细说明，本领域的普通技术人员应当理解，可以对本发明的技术方法进行修改或等同替换，而不脱离本发明技术方法的精神和范围。
