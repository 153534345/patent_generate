标题title
会话迁移方法、装置、终端设备及存储介质
摘要abst
本申请公开了一种会话迁移方法、装置、终端设备和存储介质，包括：接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端，在会话迁移过程中原会话将用户信息以会话通行证的方式进行传递，会话通行证所采用的加密算法由原会话服务端采用非对称加密控制，保障在会话迁移过程中任何信息不在公开环境中以明文方式传输，保障会话迁移的用户数据安全。
权利要求书clms
1.一种会话迁移方法，其特征在于，所述方法包括：接收第一会话客户端发送的通行证请求，其中，所述通行证请求至少包括所述第一用户会话信息和第一会话客户端设备信息；根据所述第一用户会话信息和所述第一会话客户端设备信息，确定会话通行证；将所述会话通行证发送至所述第一会话客户端，以使所述第一会话客户端将所述会话通行证发送至第二会话客户端。2.根据权利要求1所述的会话迁移方法，其特征在于，所述根据所述第一用户会话信息和所述第一会话客户端设备信息，确定会话通行证，包括：采用本地私钥对所述第一用户会话信息和所述第一会话客户端设备信息进行签名，得到第一签名信息；采用本地公钥对所述第一用户会话信息和所述第一会话客户端设备信息加密，得到第一会话密文；将所述第一签名信息和所述第一会话密文封装成所述会话通行证。3.根据权利要求2所述的会话迁移方法，其特征在于，所述通行证请求中还包括业务状态、时间戳和随机信息，所述业务状态用于判断所述第一会话客户端是否当前正在发生会话，所述时间戳用于判断所述通行证请求在有效时间段内，所述随机信息用于判断所述通行证请求的发送次数。4.根据权利要求3所述的会话迁移方法，其特征在于，所述方法还包括：通过所述随机信息，判断所述通行证请求是否为首次请求；若是首次请求，则向第二会话服务器返回验证通过指令。5.根据权利要求1所述的会话迁移方法，其特征在于，所述方法还包括：在接收到第二会话服务器发送的第二签名信息和第二会话密文后，采用本地私钥对所述第二会话密文进行解密，得到解密后的第二用户会话信息和第二会话客户端设备信息；对所述第一用户会话信息和所述第二用户会话信息进行比较，且对所述第一会话客户端设备信息和所述第二会话客户端设备信息进行比较；若所述第一用户会话信息和所述第二用户会话信息相同，且所述第一会话客户端设备信息和所述第二会话客户端设备信息相同，则确定所述第二签名信息和所述第二会话密文通过验证。6.一种会话迁移方法，其特征在于，所述方法包括：接收第二会话客户端发送的会话通行证，其中，所述会话通行证是所述第一会话客户端发送的，所述会话通行证是根据第一用户会话信息和第一会话客户端设备信息确定的；对所述会话通行证进行解析，得到第二签名信息和第二会话密文；将所述第二签名信息和所述第二会话密文发送至第一会话服务器，以使所述第一会话服务器对所述第二签名信息和所述第二会话密文进行验证，若所述第二签名信息和所述第二会话密文通过验证，则将所述会话通行证确定为目标通行证；将所述目标通行证返回至第二会话客户端。7.一种会话迁移装置，其特征在于，所述装置包括：第一接收模块，用于接收第一会话客户端发送的通行证请求，其中，所述通行证请求至少包括所述第一用户会话信息和第一会话客户端设备信息；第一确定模块，用于根据所述第一用户会话信息和所述第一会话客户端设备信息，确定会话通行证；第一发送模块，用于将所述会话通行证发送至所述第一会话客户端，以使所述第一会话客户端将所述会话通行证发送至第二会话客户端。8.一种会话迁移装置，其特征在于，所述装置包括：第二接收模块，用于接收第二会话客户端发送的会话通行证，其中，所述会话通行证是所述第一会话客户端发送的，所述会话通行证是根据第一用户会话信息和第一会话客户端设备信息确定的；解析模块，用于对所述会话通行证进行解析，得到第二签名信息和第二会话密文；第二发送模块，用于将所述第二签名信息和所述第二会话密文发送至第一会话服务器，以使所述第一会话服务器对所述第二签名信息和所述第二会话密文进行验证，若所述第二签名信息和所述第二会话密文通过验证，则将所述会话通行证确定为目标通行证；返回模块，用于将所述目标通行证返回至第二会话客户端。9.一种终端设备，其特征在于，包括：至少一个处理器和存储器；所述存储器存储计算机程序；所述至少一个处理器执行所述存储器存储的计算机程序，以实现权利要求1-5或6中任一项所述的会话迁移方法。10.一种计算机可读存储介质，其特征在于，该计算机可读存储介质中存储有计算机程序，所述计算机程序被执行时实现权利要求1-5或6中任一项所述的会话迁移方法。
说明书desc
技术领域本申请属于通信技术领域，尤其涉及一种会话迁移方法、装置、终端设备及存储介质。背景技术在大多数移动端应用开发过程中，通常会存在用户会话迁移的情况，会话迁移一般存在于两个不同系统不同体系的移动应用相互嵌套以共同实现一个完整的业务操作流程，而完成此类操作流程离不开两个应用运行同一个用户会话，才能实现用户操作逻辑链路的完整性，而两个应用的数据并不共享，因此就只能通过会话迁移来解决两个应用之间的会话共享问题。例如，用户在线上商城购买与支付处理中，用户登录线上移动商城购买商品，并准备为商品完成支付行为过程中，即需要在商城应用内打开银行收银台应用来完成用户在金融端的支付操作，这其中，用H5技术实现的移动金融收银台应用内嵌在其他基于iOS或Andriod系统开发的移动原生商城APP应用内，使用原生商城APP内置的移动浏览器控件通过URL链接访问的方式将H5移动收银台应用在原生APP应用界面中打开，方便用户通过原生APP操作H5应用端的内容，该示例过程即涉及两个应用为完成同一逻辑操作流程所必须的用户会话迁移。通过这种方式将两个应用的业务解耦，但因原生APP应用与H5应用归属为不同的业务系统且双方数据信息并不共享，因此随之而来的就是要保障原生APP应用的用户会话能够安全迁移到H5应用端，使迁移前后两应用的会话保持高度一致，以确保会话迁移后所发生的操作得以在安全、真实环境中顺利执行。业界提出了很多解决该问题的方法。例如，可以采用基于信息直接传递的方法，主要是利用两个应用之间的信息传输接口，将原始会话的用户信息、会话数据以及其他参数信息传递给新会话，确保新会话能够获取到原会话数据进而保障新会话的操作与原始会话的用户会话信息一致。还可以采用基于信息二次验证的方法，主要是两应用各自建立一套完整的用户体系，两应用的用户数据相互独立，则用户通过原会话迁移到新会话后，需要通过二次登录或二次验证码验证等方式完成新会话对于用户信息的验证后方可进行下一步操作。上述的这些方法虽然从理论上能够做到用户会话通过原应用迁移至新应用后，新会话端的操作与原会话端的操作行为人的一致性，但在实际的应用场景中都存在以下几个缺陷和不足，例如，用户体系资料信息属于保密信息，需要高度保密，因会话迁移前后两应用分属两个不同的系统体系，在会话迁移过程中，原会话信息出于保密要求不便于通过技术手段直接传递给新会话，通过信息传递的方式将用户数据迁移至新会话易造成信息泄露等安全风险。发明内容本申请意在提供一种会话迁移方法、装置、终端设备和存储介质，以解决现有技术中存在的不足，本申请要解决的技术问题通过以下技术方案来实现。第一个方面，本申请实施例提供一种会话迁移方法，所述方法包括：接收第一会话客户端发送的通行证请求，其中，所述通行证请求至少包括所述第一用户会话信息和第一会话客户端设备信息；根据所述第一用户会话信息和所述第一会话客户端设备信息，确定会话通行证；将所述会话通行证发送至所述第一会话客户端，以使所述第一会话客户端将所述会话通行证发送至第二会话客户端。可选地，所述根据所述第一用户会话信息和所述第一会话客户端设备信息，确定会话通行证，包括：采用本地私钥对所述第一用户会话信息和所述第一会话客户端设备信息进行签名，得到第一签名信息；采用本地公钥对所述第一用户会话信息和所述第一会话客户端设备信息加密，得到第一会话密文；将所述第一签名信息和所述第一会话密文封装成所述会话通行证。可选地，所述通行证请求中还包括业务状态、时间戳和随机信息，所述业务状态用于判断所述第一会话客户端是否当前正在发生会话，所述时间戳用于判断所述通行证请求在有效时间段内，所述随机信息用于判断所述通行证请求的发送次数。可选地，所述方法还包括：通过所述随机信息，判断所述通行证请求是否为首次请求；若是首次请求，则向第二会话服务器返回验证通过指令。可选地，所述方法还包括：在接收到第二会话服务器发送的第二签名信息和第二会话密文后，采用本地私钥对所述第二会话密文进行解密，得到解密后的第二用户会话信息和第二会话客户端设备信息；对所述第一用户会话信息和所述第二用户会话信息进行比较，且对所述第一会话客户端设备信息和所述第二会话客户端设备信息进行比较；若所述第一用户会话信息和所述第二用户会话信息相同，且所述第一会话客户端设备信息和所述第二会话客户端设备信息相同，则确定所述第二签名信息和所述第二会话密文通过验证。第二个方面，本申请实施例提供一种会话迁移方法，所述方法包括：接收第二会话客户端发送的会话通行证，其中，所述会话通行证是所述第一会话客户端发送的，所述会话通行证是根据第一用户会话信息和第一会话客户端设备信息确定的；对所述会话通行证进行解析，得到第二签名信息和第二会话密文；将所述第二签名信息和所述第二会话密文发送至第一会话服务器，以使所述第一会话服务器对所述第二签名信息和所述第二会话密文进行验证，若所述第二签名信息和所述第二会话密文通过验证，则将所述会话通行证确定为目标通行证；将所述目标通行证返回至第二会话客户端。第三个方面，本申请实施例提供一种会话迁移装置，所述装置包括：第一接收模块，用于接收第一会话客户端发送的通行证请求，其中，所述通行证请求至少包括所述第一用户会话信息和第一会话客户端设备信息；第一确定模块，用于根据所述第一用户会话信息和所述第一会话客户端设备信息，确定会话通行证；第一发送模块，用于将所述会话通行证发送至所述第一会话客户端，以使所述第一会话客户端将所述会话通行证发送至第二会话客户端。可选地，所述第一确定模块用于：采用本地私钥对所述第一用户会话信息和所述第一会话客户端设备信息进行签名，得到第一签名信息；采用本地公钥对所述第一用户会话信息和所述第一会话客户端设备信息加密，得到第一会话密文；将所述第一签名信息和所述第一会话密文封装成所述会话通行证。可选地，所述通行证请求中还包括业务状态、时间戳和随机信息，所述业务状态用于判断所述第一会话客户端是否当前正在发生会话，所述时间戳用于判断所述通行证请求在有效时间段内，所述随机信息用于判断所述通行证请求的发送次数。可选地，所述第一发送模块，还用于：通过所述随机信息，判断所述通行证请求是否为首次请求；若是首次请求，则向第二会话服务器返回验证通过指令。可选地，所述第一发送模块，还用于：在接收到第二会话服务器发送的第二签名信息和第二会话密文后，采用本地私钥对所述第二会话密文进行解密，得到解密后的第二用户会话信息和第二会话客户端设备信息；对所述第一用户会话信息和所述第二用户会话信息进行比较，且对所述第一会话客户端设备信息和所述第二会话客户端设备信息进行比较；若所述第一用户会话信息和所述第二用户会话信息相同，且所述第一会话客户端设备信息和所述第二会话客户端设备信息相同，则确定所述第二签名信息和所述第二会话密文通过验证。第四个方面，本申请实施例提供一种会话迁移装置，所述装置包括：第二接收模块，用于接收第二会话客户端发送的会话通行证，其中，所述会话通行证是所述第一会话客户端发送的，所述会话通行证是根据第一用户会话信息和第一会话客户端设备信息确定的；解析模块，用于对所述会话通行证进行解析，得到第二签名信息和第二会话密文；第二发送模块，用于将所述第二签名信息和所述第二会话密文发送至第一会话服务器，以使所述第一会话服务器对所述第二签名信息和所述第二会话密文进行验证，若所述第二签名信息和所述第二会话密文通过验证，则将所述会话通行证确定为目标通行证；返回模块，用于将所述目标通行证返回至第二会话客户端。第五个方面，本申请实施例提供一种终端设备，包括：至少一个处理器和存储器；所述存储器存储计算机程序；所述至少一个处理器执行所述存储器存储的计算机程序，以实现第一个方面提供的会话迁移方法。第六个方面，本申请实施例提供一种计算机可读存储介质，该计算机可读存储介质中存储有计算机程序，所述计算机程序被执行时实现第一个方面提供的会话迁移方法。第七个方面，本申请实施例提供一种终端设备，包括：至少一个处理器和存储器；所述存储器存储计算机程序；所述至少一个处理器执行所述存储器存储的计算机程序，以实现第二个方面提供的会话迁移方法。第八个方面，本申请实施例提供一种计算机可读存储介质，该计算机可读存储介质中存储有计算机程序，所述计算机程序被执行时实现第二个方面提供的会话迁移方法。本申请实施例包括以下优点：本申请实施例提供的会话迁移方法、装置、终端设备和存储介质，通过接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端，在会话迁移过程中原会话将用户信息以会话通行证的方式进行传递，会话通行证所采用的加密算法由原会话服务端采用非对称加密控制，保障在会话迁移过程中任何信息不在公开环境中以明文方式传输，保障会话迁移的用户数据安全。附图说明为了更清楚地说明本申请实施例或现有的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请中记载的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本申请一实施例中一种会话迁移方法的流程图；图2为本申请一实施例中一种会话迁移方法的流程图；图3为本申请一实施例中一种会话迁移系统的结构示意图；图4为本申请一实施例中通行证的生成与迁移工作流程示意图；图5为本申请一实施例中通行证的验证工作流程示意图；图6是本申请的一种会话迁移装置实施例的结构框图；图7是本申请的一种会话迁移装置实施例的结构框图；图8是本申请的一种终端设备的结构示意图；图9是本申请的一种终端设备的结构示意图。具体实施方式为使本申请的目的、技术方案和优点更加清楚，下面将结合具体实施例及相应的附图对本申请的技术方案进行清楚、完整地描述。显然，所描述的实施例仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。本申请一实施例提供一种会话迁移方法，用于对不同终端进行会话迁移。本实施例的执行主体为会话迁移装置，设置在终端设备上，例如，终端设备至少包括计算机终端等。参照图1，示出了本申请的一种会话迁移方法实施例的步骤流程图，该方法具体可以包括如下步骤：S101、接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；具体地，第一会议客户端上在处理一个会话，在此过程中需要跳转到另一个会话中，对于比，本申请实施例提供一种会议迁移方法，第一会议客户端向第一会话服务器发送通行证请求，该通行证请求包括第一用户会话信息和第一会话客户端设备信息，例如，第一用户会议信息包括某一会话的会议内容，如打开某一个网站，第一会议客户端设备信息包括客户端标识，如，终端mac地址、终端型号、终端IP地址等。S102、根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；第一会话服务器在接收到第一会话客户端方发送的通行证请求后，根据通行证请求中的第一用户会话信息和第一会话客户端设备信息，来计算会话通行证，即采用本地私钥对第一用户会话信息和第一会话客户端设备信息进行签名，得到第一签名信息；采用本地公钥对第一用户会话信息和第一会话客户端设备信息加密，得到第一会话密文；将第一签名信息和第一会话密文封装成会话通行证。在本申请中，会话通行许可证具有时效性与唯一性，会话通行证经过原会话端验证通过后，新会话服务端为该通行证颁发通行许可证，通行许可证与会话通行证一一对应，新会话内用户操作访问等行为完全基于通行许可证来执行。通行许可证一旦发放成功，则代表会话迁移成功。通行许可证具有新会话操作访问效力，同时通行许可证具有一定的有效期时限，通行许可证过期后会自动销毁，一旦通行许可证过期或不可用，则新会话失去操作访问效力，客户端会立即停止新会话的运行，需原会话重新申请通行证再次进行会话迁移。S103、将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端；具体地，第一会话服务器将生成的会话通行证发送至第一会话客户端，第一会话客户端将该会话通行证发送至第二会话客户端，第二会话客户端对该会话通行证进行初始判断，例如，格式是否符合预设的格式，若如何预设格式，则将会话通行证发送至第二会话服务器，第二会话服务器在将该会话通信证发送至第一会话服务器，第一会话服务器对该会话通信证进行验证，若通过验证，则返回通行许可证，第二会议服务器再将通行许可证发送至第二会话客户端，从而实现了从第一会话客户端到第二会话客户端的会话迁移，并且在此过程中，通过使用会话通行证进行传输，避免在传输的过程中发生数据泄露，保证会话迁移数据的安全。本申请实施例提供的会话迁移方法，通过接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端，在会话迁移过程中原会话将用户信息以会话通行证的方式进行传递，会话通行证所采用的加密算法由原会话服务端采用非对称加密控制，保障在会话迁移过程中任何信息不在公开环境中以明文方式传输，保障会话迁移的用户数据安全。本申请又一实施例对上述实施例提供的会话迁移方法做进一步补充说明。可选地，根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证，包括：采用本地私钥对第一用户会话信息和第一会话客户端设备信息进行签名，得到第一签名信息；采用本地公钥对第一用户会话信息和第一会话客户端设备信息加密，得到第一会话密文；将第一签名信息和第一会话密文封装成会话通行证。具体地，通行证的有效性由通行证的发放方即第一会话服务器验证，因原会话服务端的私钥仅在原会话服务端本地存留，因此由原会话服务端验证新会话上送的通行证的有效性，能够有效证明该通行证确为原会话服务器生成的原始通行证，又原会话服务端使用公钥对原始签名的验签操作可有效确认通行证在会话迁移整个过程中通行证没有被恶意篡改，保障当前会话迁移过程没有被恶意攻击且用户的敏感信息不被泄露。可选地，通行证请求中还包括业务状态、时间戳和随机信息，业务状态用于判断第一会话客户端是否当前正在发生会话，时间戳用于判断通行证请求在有效时间段内，随机信息用于判断通行证请求的发送次数。具体地，第一会话客户端向第一会话服务器发送通行证请求，通行证请求中还包括业务状态、时间戳和随机信息，业务状态用于判断第一会话客户端是否当前正在发生会话，时间戳用于判断通行证请求在有效时间段内，随机信息用于判断通行证请求的发送次数，第一会话服务器对会话设备环境信息的核验。在通行证验证环节，原会话同样会对新会话上报的设备环境信息进行核验，新会话的运行环境须与原会话申请通行证时的运行环境保持完全一致，一旦发生新会话环境设备信息异常，即说明新会话可能被恶意从原会话设备环境中转移并试图使用外部未知环境独立运行，存在运行环境的安全风险，通过对原设备运行环境的限制要求，避免新会话被外部环境的病毒指令入侵造成新会话操作被恶意监控或被恶意操控等行为。可选地，该方法还包括：通过随机信息，判断通行证请求是否为首次请求；若是首次请求，则向第二会话服务器返回验证通过指令。新会话客户端将初验通过的通行证发送至新会话服务端，并由服务端对通行证进行初步解析，解析后可得到通行证的签名信息以及会话密文，将解析后的内容递交给原会话服务端进行进一步核验，原会话服务端首先判断本通行证是否为首次核验，若为首次核验，则将会话密文使用本地私钥进行解密后得到原会话的有效用户信息与客户端设备信息。在本申请实施例中，每个会话的通行证仅允许被解析并核验一次，通行证被尝试多次核验，说明在会话迁移过程中本次会话的通行证丢失或被窃取被人为利用在未被原会话允许的情况下人为拉起新会话并尝试通过正常验证的方式取得新会话的操作权，在会话迁移过程中一旦发生通行证可疑核验行为，会话立即启动自我保护机制，自动停止本次迁移以及自动注销当前原会话和所有已完成迁移的会话，并对该异常会话进行登记上报。通过对通行证的核验限制，可以有效避免在通行证泄露或通行证在发送验证前被提前窃取的情况下，新会话依然被人为开启且冒用遗失的通行证假借原会话的名义试图潜入新会话端进行非法操作。可选地，该方法还包括：在接收到第二会话服务器发送的第二签名信息和第二会话密文后，采用本地私钥对第二会话密文进行解密，得到解密后的第二用户会话信息和第二会话客户端设备信息；对第一用户会话信息和第二用户会话信息进行比较，且对第一会话客户端设备信息和第二会话客户端设备信息进行比较；若第一用户会话信息和第二用户会话信息相同，且第一会话客户端设备信息和第二会话客户端设备信息相同，则确定第二签名信息和第二会话密文通过验证。参照图2，示出了本申请的一种会话迁移方法实施例的步骤流程图，该会话迁移方法，包括：S201、接收第二会话客户端发送的会话通行证，其中，会话通行证是第一会话客户端发送的，会话通行证是根据第一用户会话信息和第一会话客户端设备信息确定的；具体地，第二会话客户端接收第一会话客户端发送的会话通行证，第二会话客户端再将该会话通行证发送至第二会话服务器，会话通行证是根据第一用户会话信息和第一会话客户端设备信息确定的。S202、对会话通行证进行解析，得到第二签名信息和第二会话密文；第二会话客户端对该会话通行证进行解析，得到第二签名信息和第二会话密文。S203、将第二签名信息和第二会话密文发送至第一会话服务器，以使第一会话服务器对第二签名信息和第二会话密文进行验证，若第二签名信息和第二会话密文通过验证，则将会话通行证确定为目标通行证；第二客户服务器将第二签名信息和第二会话密文发送至第一会话服务器，第一会话服务器对第二签名信息和第二会话密文进行验证，在接收到第二会话服务器发送的第二签名信息和第二会话密文后，采用本地私钥对第二会话密文进行解密，得到解密后的第二用户会话信息和第二会话客户端设备信息；对第一用户会话信息和第二用户会话信息进行比较，且对第一会话客户端设备信息和第二会话客户端设备信息进行比较；若第一用户会话信息和第二用户会话信息相同，且第一会话客户端设备信息和第二会话客户端设备信息相同，则确定第二签名信息和第二会话密文通过验证。S204、将目标通行证返回至第二会话客户端。其中，该目标通行证即为通行许可证，第一会话服务器将该目标通行证返回至第二会话服务器，第二会话服务器再将该目标通行证返回至第二会话客户端。图3为本申请一实施例中一种会话迁移系统的结构示意图，该会议迁移系统包括原会话客户端、原会话服务端、新会话客户端、新会话服务端四个终端。在密钥存储方面，为确保存储介质安全，客户端统一禁止存放私钥，原会话服务端维护自己本地公私钥、新会话服务端维护自己本地公私钥以及新会话客户端拥有新会话服务端的公钥，同时原会话服务端与新会话服务端双方共享一把对称密钥。会话迁移的工作原理具体为：原会话将本次会话信息加密封装成通行证迁移至新会话，由新会话对通行证进行有效性验证后，换取通行许可证，新会话后续所有业务操作均基于通行许可证完成。原会话的通行证对同一用户身份仅允许存在一个，通过会话迁移后同一用户身份的通行证在同一原会话生命周期内也仅能换取一个有效的通行许可证，以确保后续基于通行许可证的会话操作的唯一性。通行证的安全转移和验证为会话迁移前后安全的重要保证，一旦会话迁移过程可疑，则立即注销通行证并停止迁移。整体结构中所有环节的通信均为实时请求实时响应的同步通信，不存在异步通信环节。在原会话端的处理中，涉及原会话向服务端申请通行证并将通行证迁移至新会话两个环节，图4为本申请一实施例中通行证的生成与迁移工作流程示意图；原会话客户端向原会话服务端申请当前用户会话的通行证，原会话客户端传递当前用户信息、当前客户端设备信息、时间戳及随机串至第一会话服务器，第一会话服务端根据当前用户的会话状态判断当前用户正在发生的会话是否真实有效，并根据时间戳校验当前发起申请的动作是否在允许的有效期内，以及根据随机串判断是否重复发送申请，以此来避免面虚假会话的恶意请求通行证行为以及当前会话已过期或会话多次重复发送通行证申请等风险。原会话服务端记录原会话客户端设备信息，并用本地私钥对当前用户会话信息、客户端设备信息进行签名，再用本地公钥对当前用户会话信息、客户端设备信息加密，而后将签名信息与会话密文封装成通行证传回原会话客户端。原会话客户端接收到通行证后立即启动本地客户端浏览器通过URL链接形式打开新会话客户端，并将取得的会话通行证通过参数传递的形式传递给新会话客户端。新会话客户端需要对通行证进行初始验证，判断通行证是否合规合法及是否满足通行证的基本格式要求，如满足，则进一步发起对通行证的真实性验证，如不满足则拒绝建立新会话。在通行证迁移的验证环节中，涉及新会话向服务端传递通行证以及新会话服务端将通行证向原会话服务端发起验证请求两个环节。图5为本申请一实施例中通行证的验证工作流程示意图；新会话客户端将初验通过的通行证发送至新会话服务端，并由服务端对通行证进行初步解析，解析后可得到通行证的签名信息以及会话密文，将解析后的内容递交给原会话服务端进行进一步核验，原会话服务端首先判断本通行证是否为首次核验，若为首次核验，则将会话密文使用本地私钥进行解密后得到原会话的有效用户信息与客户端设备信息。原会话服务端首先通过客户端申请时登记的设备信息对通行证解密后取得的设备信息进行核验，确保通行证内设备信息与申请方保持一致，以此来确保会话迁移时的设备环境没有被恶意更换，保障新的会话在原会话设备的安全环境内打开。原会话服务端根据解密后的用户信息来提取当前本地有效用户，组装用户对象信息并使用本地私钥对其进行签名，核验此次签名与新会话在通行证内取得的签名是否一致，以保障在会话迁移过程中通行证为原始取得，未在中途传递被恶意篡改。本申请实施例增加了新会话需要向原会话发起通行证有效性验证的环节。会话在迁移过程中，新会话不对通行证进行任何改造及直接使用，原始通行证由原会话发放，则所有的验证环节均同样由原会话完成，避免用户信息及会话信息存在外部泄露的风险。还增加了对可疑会话通行证的注销能力。原会话对通行证进行统一管控，会话在迁移过程中，原会话对新会话发起的通行证验证进行标记，增加原会话对通行证被试图发送多次验证的行为进行感知，一旦通行证被解析验证两次及以上，原会话则立即注销该通行证并上报登记风险会话，避免在通行证泄露或通行证在发送验证前被提前窃取的情况下，新会话依然被人为开启且冒用遗失的通行证假借原会话的名义试图潜入新会话端进行非法操作。本申请实施例克服在一次会话迁移过程中会话信息丢失或会话信息被恶意窃取而造成外部人员可通过人为操控手段开启新会话且冒用原会话的名义进入新会话进行非法操作的问题。每次同一用户的会话仅会存留一个且仅被迁移一次，会话信息一旦被迁移后则禁止再次被迁移，一旦原会话试图发起两次或多次迁移行为，则该用户的会话会被立即强制停止并上报登记风险会话，保障会话的单点运行，确保用户在会话迁移后操作的唯一性。增加对原会话设备环境信息的有效性验证，会话在迁移过程中，新会话所传递的设备信息必须与原会话申请通行证时的设备环境信息完全一致，以确保会话的整个迁移过程均在同一设备环境中完成，避免新会话在未知设备终端的未知浏览器环境中被打开而产生脱离原会话的外部非法操作。原会话端的所有用户敏感信息均不会在原会话端以外的任何环境以明文的形式暴露，用户数据及敏感信息均已封装后的密文形式传递且算法及验证密钥均由原会话端掌控，保障数据信息安全。会话迁移过程中不会因会话被窃取或被外部获得而造成会话被仿造拷贝，进而产生未知的风险操作，一旦原会话通行证被多次使用并试图解析验证，原会话则能够切断当前所有的会话迁移行为并注销通行证，并登记上报风险后对会话进行风险追踪，保障会话的安全迁移。新会话端具有了对设备甄别的能力，设备环境必须为原会话申请迁移时认证过方可进行会话安全迁移，实现会话迁移全过程的环境安全。克服由于用户会话信息在迁移过程中用户信息泄露而导致的用户敏感信息的安全风险问题，在会话迁移过程中原会话将用户信息以通行证的方式进行传递，通行证所采用的加密算法由原会话服务端采用非对称加密控制，保障在会话迁移过程中任何敏感信息不在公开环境中以明文方式传输，保障会话迁移的用户数据安全。克服会话被迁移后，新会话可在外部任意境中独立正常运行而导致新会话容易被外部攻击问题，会话迁移后，建立会话迁移前后的环境绑定关系，仅支持在原会话内部环境运行，禁止单独拷贝会话到外部任何第三方环境运行，一旦新会话与原有环境失去绑定连接，则新会话被立即强制停止，保障会话迁移后的运行环境安全。需要说明的是，对于方法实施例，为了简单描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本申请实施例并不受所描述的动作顺序的限制，因为依据本申请实施例，某些步骤可以采用其他顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于优选实施例，所涉及的动作并不一定是本申请实施例所必须的。本申请实施例提供的会话迁移方法，通过接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端，在会话迁移过程中原会话将用户信息以会话通行证的方式进行传递，会话通行证所采用的加密算法由原会话服务端采用非对称加密控制，保障在会话迁移过程中任何信息不在公开环境中以明文方式传输，保障会话迁移的用户数据安全。本申请另一实施例提供一种会话迁移装置，用于执行上述实施例提供的会话迁移方法。参照图6，示出了本申请的一种会话迁移装置实施例的结构框图，该装置具体可以包括如下模块：第一接收模块601、第一确定模块602和第一发送模块603，其中：第一接收模块601用于接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；第一确定模块602用于根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；第一发送模块603用于将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端。本申请实施例提供的会话迁移装置，通过接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端，在会话迁移过程中原会话将用户信息以会话通行证的方式进行传递，会话通行证所采用的加密算法由原会话服务端采用非对称加密控制，保障在会话迁移过程中任何信息不在公开环境中以明文方式传输，保障会话迁移的用户数据安全。本申请又一实施例对上述实施例提供的会话迁移装置做进一步补充说明。可选地，第一确定模块用于：采用本地私钥对第一用户会话信息和第一会话客户端设备信息进行签名，得到第一签名信息；采用本地公钥对第一用户会话信息和第一会话客户端设备信息加密，得到第一会话密文；将第一签名信息和第一会话密文封装成会话通行证。可选地，通行证请求中还包括业务状态、时间戳和随机信息，业务状态用于判断第一会话客户端是否当前正在发生会话，时间戳用于判断通行证请求在有效时间段内，随机信息用于判断通行证请求的发送次数。可选地，第一发送模块，还用于：通过随机信息，判断通行证请求是否为首次请求；若是首次请求，则向第二会话服务器返回验证通过指令。可选地，第一发送模块，还用于：在接收到第二会话服务器发送的第二签名信息和第二会话密文后，采用本地私钥对第二会话密文进行解密，得到解密后的第二用户会话信息和第二会话客户端设备信息；对第一用户会话信息和第二用户会话信息进行比较，且对第一会话客户端设备信息和第二会话客户端设备信息进行比较；若第一用户会话信息和第二用户会话信息相同，且第一会话客户端设备信息和第二会话客户端设备信息相同，则确定第二签名信息和第二会话密文通过验证。对于装置实施例而言，由于其与方法实施例基本相似，所以描述的比较简单，相关之处参见方法实施例的部分说明即可。本申请实施例提供的会话迁移装置，通过接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端，在会话迁移过程中原会话将用户信息以会话通行证的方式进行传递，会话通行证所采用的加密算法由原会话服务端采用非对称加密控制，保障在会话迁移过程中任何信息不在公开环境中以明文方式传输，保障会话迁移的用户数据安全。本申请另一实施例提供一种会话迁移装置，用于执行上述实施例提供的会话迁移方法。参照图7，示出了本申请的一种会话迁移装置实施例的结构框图，该装置具体可以包括如下模块：第二接收模块701、解析模块702、第二发送模块703和返回模块704，其中：第二接收模块701用于接收第二会话客户端发送的会话通行证，其中，会话通行证是第一会话客户端发送的，会话通行证是根据第一用户会话信息和第一会话客户端设备信息确定的；解析模块702用于对会话通行证进行解析，得到第二签名信息和第二会话密文；第二发送模块703用于将第二签名信息和第二会话密文发送至第一会话服务器，以使第一会话服务器对第二签名信息和第二会话密文进行验证，若第二签名信息和第二会话密文通过验证，则将会话通行证确定为目标通行证；返回模块704用于将目标通行证返回至第二会话客户端。本申请实施例提供的会话迁移装置，通过接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端，在会话迁移过程中原会话将用户信息以会话通行证的方式进行传递，会话通行证所采用的加密算法由原会话服务端采用非对称加密控制，保障在会话迁移过程中任何信息不在公开环境中以明文方式传输，保障会话迁移的用户数据安全。本申请再一实施例提供一种终端设备，用于执行上述实施例提供的会话迁移方法。图8是本申请的一种终端设备的结构示意图，如图8所示，该终端设备包括：至少一个处理器801和存储器802；存储器存储计算机程序；至少一个处理器执行存储器存储的计算机程序，以实现上述实施例提供的会话迁移方法。本实施例提供的终端设备，通过接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端，在会话迁移过程中原会话将用户信息以会话通行证的方式进行传递，会话通行证所采用的加密算法由原会话服务端采用非对称加密控制，保障在会话迁移过程中任何信息不在公开环境中以明文方式传输，保障会话迁移的用户数据安全。本申请又一实施例提供一种计算机可读存储介质，该计算机可读存储介质中存储有计算机程序，计算机程序被执行时实现上述任一实施例提供的会话迁移方法。根据本实施例的计算机可读存储介质，通过接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端，在会话迁移过程中原会话将用户信息以会话通行证的方式进行传递，会话通行证所采用的加密算法由原会话服务端采用非对称加密控制，保障在会话迁移过程中任何信息不在公开环境中以明文方式传输，保障会话迁移的用户数据安全。图9是本申请的一种终端设备的结构示意图，如图9所示，该终端设备包括：至少一个处理器901和存储器902；存储器存储计算机程序；至少一个处理器执行存储器存储的计算机程序，以实现上述实施例提供的会话迁移方法。本实施例提供的终端设备，通过接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端，在会话迁移过程中原会话将用户信息以会话通行证的方式进行传递，会话通行证所采用的加密算法由原会话服务端采用非对称加密控制，保障在会话迁移过程中任何信息不在公开环境中以明文方式传输，保障会话迁移的用户数据安全。本申请又一实施例提供一种计算机可读存储介质，该计算机可读存储介质中存储有计算机程序，计算机程序被执行时实现上述任一实施例提供的会话迁移方法。根据本实施例的计算机可读存储介质，通过接收第一会话客户端发送的通行证请求，其中，通行证请求至少包括第一用户会话信息和第一会话客户端设备信息；根据第一用户会话信息和第一会话客户端设备信息，确定会话通行证；将会话通行证发送至第一会话客户端，以使第一会话客户端将会话通行证发送至第二会话客户端，在会话迁移过程中原会话将用户信息以会话通行证的方式进行传递，会话通行证所采用的加密算法由原会话服务端采用非对称加密控制，保障在会话迁移过程中任何信息不在公开环境中以明文方式传输，保障会话迁移的用户数据安全。应该指出，上述详细说明都是示例性的，旨在对本申请提供进一步的说明。除非另有指明，本文使用的所有技术和科学术语均具有与本申请所属技术领域的普通技术人员的通常理解所相同的含义。需要注意的是，这里所使用的术语仅是为了描述具体实施方式，而非意图限制根据本申请的示例性实施方式。如在这里所使用的，除非上下文另外明确指出，否则单数形式也意图包括复数形式。此外，还应当理解的是，当在本说明书中使用术语“包含”和/或“包括”时，其指明存在特征、步骤、操作、器件、组件和/或它们的组合。需要说明的是，本申请的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的术语在适当情况下可以互换，以便这里描述的本申请的实施方式能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含。例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。为了便于描述，在这里可以使用空间相对术语，如“在……之上”、“在……上方”、“在……上表面”、“上面的”等，用来描述如在图中所示的一个器件或特征与其他器件或特征的空间位置关系。应当理解的是，空间相对术语旨在包含除了器件在图中所描述的方位之外的在使用或操作中的不同方位。例如，如果附图中的器件被倒置，则描述为“在其他器件或构造上方”或“在其他器件或构造之上”的器件之后将被定位为“在其他器件或构造下方”或“在其他器件或构造之下”。因而，示例性术语“在……上方”可以包括“在……上方”和“在……下方”两种方位。该器件也可以其他不同方式定位，如旋转90度或处于其他方位，并且对这里所使用的空间相对描述作出相应解释。在上面详细的说明中，参考了附图，附图形成本文的一部分。在附图中，类似的符号典型地确定类似的部件，除非上下文以其他方式指明。在详细的说明书、附图及权利要求书中所描述的图示说明的实施方案不意味是限制性的。在不脱离本文所呈现的主题的精神或范围下，其他实施方案可以被使用，并且可以作其他改变。以上所述仅为本申请的优选实施例而已，并不用于限制本申请，对于本领域的技术人员来说，本申请可以有各种更改和变化。凡在本申请的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。
