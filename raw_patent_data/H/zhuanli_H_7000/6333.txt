标题title
一种LED护眼台灯照明控制方法及系统
摘要abst
本发明涉及台灯照明控制技术领域，具体涉及一种LED护眼台灯照明控制方法及系统，该方法对用户的眼部区域灰度图像进行分析，根据眼部区域灰度图像中的灰度分布，得到眼部轮廓、虹膜区域和瞳孔区域，对虹膜区域边缘、瞳孔区域边缘和眼部轮廓进行分析，得到眨眼疲劳系数和瞳孔应激疲劳指数；根据预设时间段内眨眼疲劳系数的局部分布趋势变化得到眨眼疲劳度；根据预设时间段内瞳孔应激疲劳指数的时序差异分布得到瞳孔应激疲劳度；最后根据眨眼疲劳度和瞳孔应激疲劳度得到眼球疲劳程度对LED护眼台灯进行照明控制。本发明通过分析得到的眼球疲劳程度进行LED护眼台灯照明控制的准确性更高。
权利要求书clms
1.一种LED护眼台灯照明控制方法，其特征在于，所述方法包括：获取用户在预设时间段内每个时刻的眼部区域灰度图像；根据所述眼部区域灰度图像中的灰度分布特征，得到每个时刻对应的眼部轮廓、虹膜区域以及瞳孔区域；将存在封闭区域的眼部轮廓对应的时刻，作为开眼时刻；将不存在封闭区域的眼部轮廓对应的时刻，作为闭眼时刻；根据眼部轮廓上像素点的位置分布特征，得到每个开眼时刻和每个闭眼时刻的眨眼疲劳系数；根据所述虹膜区域的边缘和所述瞳孔区域的边缘上像素点的位置分布特征，得到每个开眼时刻和每个闭眼时刻的瞳孔应激疲劳指数；根据预设时间段内眨眼疲劳系数的局部分布趋势变化情况，得到用户的眨眼疲劳度；根据瞳孔应激疲劳指数的时序差异分布特征，得到用户的瞳孔应激疲劳度；根据所述眨眼疲劳度和所述瞳孔应激疲劳度，得到用户在预设时间段内的眼球疲劳程度；根据所述眼球疲劳程度进行LED护眼台灯照明控制。2.根据权利要求1所述的一种LED护眼台灯照明控制方法，其特征在于，所述眨眼疲劳系数的获取方法包括：将眼部轮廓上的像素点作为轮廓像素点，根据各个开眼时刻下对应的轮廓像素点的分布特征，得到每个开眼时刻的基本眼距，以及每个开眼时刻的眼角开合度；根据所述眼角开合度和所述基本眼距，得到每个开眼时刻的眨眼疲劳系数，所述眼角开合度和所述基本眼距均与所述眨眼疲劳系数呈负相关；将预设闭眼疲劳参数作为每个闭眼时刻的眨眼疲劳系数，所述预设闭眼疲劳参数大于或等于所有开眼时刻的眨眼疲劳系数。3.根据权利要求2所述的一种LED护眼台灯照明控制方法，其特征在于，所述基本眼距的获取方法包括：对于任意一个开眼时刻：依次将每个轮廓像素点作为目标轮廓像素点；过目标轮廓像素点作眼部轮廓的法线，得到目标轮廓像素点对应的参考法线；将所述参考法线与眼部轮廓相交的另一个轮廓像素点，作为参考轮廓像素点；将所述目标轮廓像素点与所述参考轮廓像素点之间的距离，作为目标轮廓像素点的参考眼距；将所有轮廓像素点的参考眼距的均值，作为开眼时刻的基本眼距。4.根据权利要求2所述的一种LED护眼台灯照明控制方法，其特征在于，所述眼角开合度的获取方法包括：对于任意一个开眼时刻：在所有轮廓像素点中，将曲率最大的两个轮廓像素点作为眼角像素点；以每个眼角像素点为端点，分别朝向其相邻的两个轮廓像素点作射线，得到每个眼角像素点对应的两条射线；将每个眼角像素点对应的两条射线之间的夹角，作为每个眼角像素点的特征夹角；将两个眼角像素点的特征夹角的均值，作为开眼时刻的眼角开合度。5.根据权利要求1所述的一种LED护眼台灯照明控制方法，其特征在于，所述瞳孔应激疲劳指数的获取方法包括：将每个开眼时刻下的虹膜区域中相距最远的像素点之间的距离，作为虹膜参考距离；将每个开眼时刻下的瞳孔区域中相距最远的像素点之间的距离，作为瞳孔参考距离；将所述瞳孔参考距离与所述虹膜参考距离之间的比值的负相关映射值，作为每个开眼时刻对应的瞳孔收缩程度；根据每个开眼时刻下的虹膜区域面积与所述瞳孔收缩程度，得到每个开眼时刻的瞳孔应激疲劳指数，所述虹膜区域面积与所述瞳孔应激疲劳指数呈负相关，所述瞳孔收缩程度与所述瞳孔应激疲劳指数呈正相关；将时序上与每个闭眼时刻相邻的前一个开眼时刻的瞳孔应激疲劳指数，作为每个闭眼时刻的第一参考应激疲劳指数；将时序上与每个闭眼时刻相邻的后一个开眼时刻的瞳孔应激疲劳指数，作为每个闭眼时刻的第二参考应激疲劳指数；将所述第一参考应激疲劳指数和所述第二参考应激疲劳指数的均值，作为每个闭眼时刻的瞳孔应激疲劳指数。6.根据权利要求1所述的一种LED护眼台灯照明控制方法，其特征在于，所述眨眼疲劳度的获取方法包括：以时间顺序将预设时间段内的所有眨眼疲劳系数进行曲线拟合，得到眨眼疲劳系数曲线；将所述眨眼疲劳系数曲线对应的第一个时刻、最后一个时刻以及每个闭眼时刻，作为划分时刻；根据所述划分时刻将所述眨眼疲劳系数曲线划分为至少两个眨眼区间，所述眨眼区间的起点和终点对应的时刻均为划分时刻，且起点和终点对应的时刻之间不存在划分时刻；将每个眨眼区间中的所有眨眼疲劳系数的极差，作为每个眨眼区间对应的眨眼疲劳波动因子；根据每个眨眼区间的时间长度和所述眨眼疲劳波动因子，得到每个眨眼区间的局部眼球疲劳程度，所述时间长度和所述眨眼疲劳波动因子均与所述局部眼球疲劳程度呈负相关；将预设时间段内所有眨眼区间的局部眼球疲劳程度的累加值，作为用户的参考眼部疲劳程度；在时间顺序上，将眨眼疲劳波动因子小于前一个眨眼区间的眨眼疲劳波动因子的眨眼区间，作为疲劳趋势眨眼区间；将预设时间段内的疲劳趋势眨眼区间数量和所述参考眼部疲劳程度的乘积的归一化值，作为用户的眨眼疲劳度。7.根据权利要求1所述的一种LED护眼台灯照明控制方法，其特征在于，所述瞳孔应激疲劳度的获取方法包括：在预设时间段内，依次将除第一个时刻和最后一个时刻外的每个时刻作为目标时刻；将目标时刻的前一个时刻和后一个时刻的瞳孔应激疲劳指数的均值，作为目标时刻的参考应激疲劳指数；将目标时刻的瞳孔应激疲劳指数与所述参考应激疲劳指数之间的差异，作为目标时刻的应激疲劳差异指数；在时间顺序上，将第一个时刻与其后一个时刻之间瞳孔应激疲劳指数的差异，作为第一个时刻的应激疲劳差异指数；将最后一个时刻与其前一个时刻之间瞳孔应激疲劳指数的差异，作为最后一个时刻的应激疲劳差异指数；将预设时间段内所有时刻的应激疲劳差异指数的累加值的归一化值，作为用户的瞳孔应激疲劳度。8.根据权利要求1所述的一种LED护眼台灯照明控制方法，其特征在于，所述根据所述眼球疲劳程度进行LED护眼台灯照明控制包括：当所述眼球疲劳程度大于或等于预设护眼调节阈值时，将LED护眼台灯的色温降低预设色温数值，所述预设色温数值大于0；当所述眼球疲劳程度小于预设护眼调节阈值时，不调整LED护眼台灯的色温。9.根据权利要求1所述的一种LED护眼台灯照明控制方法，其特征在于，所述根据所述眼部区域灰度图像中的灰度分布特征，得到每个时刻对应的眼眶轮廓、虹膜区域以及瞳孔区域包括：将所述眼部区域灰度图像的边界轮廓作为每个时刻对应的眼部轮廓；根据所述眼部区域灰度图像中所有像素点的灰度值通过最大类间方差法进行分析，得到第一分割阈值；将所述眼部区域灰度图像中灰度值小于所述第一分割阈值的像素点组成的区域，作为每个时刻对应的参考区域；根据所述参考区域中所有像素点的灰度值通过最大类间方差法进行分析，得到第二分割阈值；将所述参考区域中灰度值小于所述第二分割阈值的像素点组成的区域，作为每个时刻对应的瞳孔区域；在所述参考区域中，将所述瞳孔区域以外的其他区域作为每个时刻对应的虹膜区域。10.一种LED护眼台灯照明控制系统，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1~9任意一项所述方法的步骤。
说明书desc
技术领域本发明涉及台灯照明控制技术领域，具体涉及一种LED护眼台灯照明控制方法及系统。背景技术眼睛是人体接收外界信息的主要媒介，保持良好的视力可以更好的观察和感知周围的环境。在夜晚环境下，选用照明合适的护眼台灯能够有效的减少眼睛疲劳，提高视觉清晰度，从而在满足照明需求的情况下保护视力健康。考虑到当护眼台灯照明不合适时，眼睛会由于疲劳从而表现出一定的特征，因此现有技术通常根据该特征进行LED护眼台灯照明控制。现有技术通常通过图像处理的方法对眼球表面图像进行处理，通过眼球表面图像中眼睛的张开大小判断眼睛疲劳程度，从而根据眼睛疲劳程度进行LED护眼台灯照明控制。但是在眨眼过程中，眼睛的张开大小会随着眼睛的闭合而改变，并且眼球疲劳程度还表现在瞳孔变化和眼睛张开程度的变化，使得仅根据眼睛的张开大小所判断的眼睛疲劳程度不够准确，导致对LED护眼台灯照明控制的准确性较差。发明内容为了解决现有技术通过眼睛的张开大小所判断的眼睛疲劳程度进行LED护眼台灯照明控制的准确性较差的技术问题，本发明的目的在于提供一种LED护眼台灯照明控制方法及系统，所采用的技术方案具体如下：本发明提出了一种LED护眼台灯照明控制方法，所述方法包括：获取用户在预设时间段内每个时刻的眼部区域灰度图像；根据所述眼部区域灰度图像中的灰度分布特征，得到每个时刻对应的眼部轮廓、虹膜区域以及瞳孔区域；将存在封闭区域的眼部轮廓对应的时刻，作为开眼时刻；将不存在封闭区域的眼部轮廓对应的时刻，作为闭眼时刻；根据眼部轮廓上像素点的位置分布特征，得到每个开眼时刻和每个闭眼时刻的眨眼疲劳系数；根据所述虹膜区域的边缘和所述瞳孔区域的边缘上像素点的位置分布特征，得到每个开眼时刻和每个闭眼时刻的瞳孔应激疲劳指数；根据预设时间段内眨眼疲劳系数的局部分布趋势变化情况，得到用户的眨眼疲劳度；根据瞳孔应激疲劳指数的时序差异分布特征，得到用户的瞳孔应激疲劳度；根据所述眨眼疲劳度和所述瞳孔应激疲劳度，得到用户在预设时间段内的眼球疲劳程度；根据所述眼球疲劳程度进行LED护眼台灯照明控制。进一步地，所述眨眼疲劳系数的获取方法包括：将眼部轮廓上的像素点作为轮廓像素点，根据各个开眼时刻下对应的轮廓像素点的分布特征，得到每个开眼时刻的基本眼距，以及每个开眼时刻的眼角开合度；根据所述眼角开合度和所述基本眼距，得到每个开眼时刻的眨眼疲劳系数，所述眼角开合度和所述基本眼距均与所述眨眼疲劳系数呈负相关；将预设闭眼疲劳参数作为每个闭眼时刻的眨眼疲劳系数，所述预设闭眼疲劳参数大于或等于所有开眼时刻的眨眼疲劳系数。进一步地，所述基本眼距的获取方法包括：对于任意一个开眼时刻：依次将每个轮廓像素点作为目标轮廓像素点；过目标轮廓像素点作眼部轮廓的法线，得到目标轮廓像素点对应的参考法线；将所述参考法线与眼部轮廓相交的另一个轮廓像素点，作为参考轮廓像素点；将所述目标轮廓像素点与所述参考轮廓像素点之间的距离，作为目标轮廓像素点的参考眼距；将所有轮廓像素点的参考眼距的均值，作为开眼时刻的基本眼距。进一步地，所述眼角开合度的获取方法包括：对于任意一个开眼时刻：在所有轮廓像素点中，将曲率最大的两个轮廓像素点作为眼角像素点；以每个眼角像素点为端点，分别朝向其相邻的两个轮廓像素点作射线，得到每个眼角像素点对应的两条射线；将每个眼角像素点对应的两条射线之间的夹角，作为每个眼角像素点的特征夹角；将两个眼角像素点的特征夹角的均值，作为开眼时刻的眼角开合度。进一步地，所述瞳孔应激疲劳指数的获取方法包括：将每个开眼时刻下的虹膜区域中相距最远的像素点之间的距离，作为虹膜参考距离；将每个开眼时刻下的瞳孔区域中相距最远的像素点之间的距离，作为瞳孔参考距离；将所述瞳孔参考距离与所述虹膜参考距离之间的比值的负相关映射值，作为每个开眼时刻对应的瞳孔收缩程度；根据每个开眼时刻下的虹膜区域面积与所述瞳孔收缩程度，得到每个开眼时刻的瞳孔应激疲劳指数，所述虹膜区域面积与所述瞳孔应激疲劳指数呈负相关，所述瞳孔收缩程度与所述瞳孔应激疲劳指数呈正相关；将时序上与每个闭眼时刻相邻的前一个开眼时刻的瞳孔应激疲劳指数，作为每个闭眼时刻的第一参考应激疲劳指数；将时序上与每个闭眼时刻相邻的后一个开眼时刻的瞳孔应激疲劳指数，作为每个闭眼时刻的第二参考应激疲劳指数；将所述第一参考应激疲劳指数和所述第二参考应激疲劳指数的均值，作为每个闭眼时刻的瞳孔应激疲劳指数。进一步地，所述眨眼疲劳度的获取方法包括：以时间顺序将预设时间段内的所有眨眼疲劳系数进行曲线拟合，得到眨眼疲劳系数曲线；将所述眨眼疲劳系数曲线对应的第一个时刻、最后一个时刻以及每个闭眼时刻，作为划分时刻；根据所述划分时刻将所述眨眼疲劳系数曲线划分为至少两个眨眼区间，所述眨眼区间的起点和终点对应的时刻均为划分时刻，且起点和终点对应的时刻之间不存在划分时刻；将每个眨眼区间中的所有眨眼疲劳系数的极差，作为每个眨眼区间对应的眨眼疲劳波动因子；根据每个眨眼区间的时间长度和所述眨眼疲劳波动因子，得到每个眨眼区间的局部眼球疲劳程度，所述时间长度和所述眨眼疲劳波动因子均与所述局部眼球疲劳程度呈负相关；将预设时间段内所有眨眼区间的局部眼球疲劳程度的累加值，作为用户的参考眼部疲劳程度；在时间顺序上，将眨眼疲劳波动因子小于前一个眨眼区间的眨眼疲劳波动因子的眨眼区间，作为疲劳趋势眨眼区间；将预设时间段内的疲劳趋势眨眼区间数量和所述参考眼部疲劳程度的乘积的归一化值，作为用户的眨眼疲劳度。进一步地，所述瞳孔应激疲劳度的获取方法包括：在预设时间段内，依次将除第一个时刻和最后一个时刻外的每个时刻作为目标时刻；将目标时刻的前一个时刻和后一个时刻的瞳孔应激疲劳指数的均值，作为目标时刻的参考应激疲劳指数；将目标时刻的瞳孔应激疲劳指数与所述参考应激疲劳指数之间的差异，作为目标时刻的应激疲劳差异指数；在时间顺序上，将第一个时刻与其后一个时刻之间瞳孔应激疲劳指数的差异，作为第一个时刻的应激疲劳差异指数；将最后一个时刻与其前一个时刻之间瞳孔应激疲劳指数的差异，作为最后一个时刻的应激疲劳差异指数；将预设时间段内所有时刻的应激疲劳差异指数的累加值的归一化值，作为用户的瞳孔应激疲劳度。进一步地，所述根据所述眼球疲劳程度进行LED护眼台灯照明控制包括：当所述眼球疲劳程度大于或等于预设护眼调节阈值时，将LED护眼台灯的色温降低预设色温数值，所述预设色温数值大于0；当所述眼球疲劳程度小于预设护眼调节阈值时，不调整LED护眼台灯的色温。进一步地，所述根据所述眼部区域灰度图像中的灰度分布特征，得到每个时刻对应的眼眶轮廓、虹膜区域以及瞳孔区域包括：将所述眼部区域灰度图像的边界轮廓作为每个时刻对应的眼部轮廓；根据所述眼部区域灰度图像中所有像素点的灰度值通过最大类间方差法进行分析，得到第一分割阈值；将所述眼部区域灰度图像中灰度值小于所述第一分割阈值的像素点组成的区域，作为每个时刻对应的参考区域；根据所述参考区域中所有像素点的灰度值通过最大类间方差法进行分析，得到第二分割阈值；将所述参考区域中灰度值小于所述第二分割阈值的像素点组成的区域，作为每个时刻对应的瞳孔区域；在所述参考区域中，将所述瞳孔区域以外的其他区域作为每个时刻对应的虹膜区域。本发明还提出了一种LED护眼台灯照明控制系统，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，处理器执行所述计算机程序时实现任意一项一种LED护眼台灯照明控制方法的步骤。本发明具有如下有益效果：考虑到眼部轮廓能够反映眼睛张开的程度，并且眼睛张开的程度能够在一定程度上反映用户的眼睛疲劳程度，因此本发明根据眼部轮廓上像素点的位置分布特征得到眨眼疲劳系数，并且考虑到眼球疲劳的过程是持续的，并且随着眨眼的进行，眼睛的张开程度会不断变小，因此本发明根据眨眼疲劳系数的局部分布趋势变化情况得到眨眼疲劳度。进一步地考虑到人眼疲劳时，眼睛会增强对光的敏感程度，从而导致瞳孔缩小；而人眼在接收到较为刺激的光源时，虹膜对应的部分会被眼皮遮挡；根据该特点，本发明根据所述虹膜区域的边缘、瞳孔区域的边缘上像素点的位置分布特征，得到瞳孔应激疲劳指数，并根据对应的时序差异分布特征，得到瞳孔应激疲劳度。最后结合眨眼疲劳度和瞳孔应激疲劳度综合表征用户的眼球疲劳程度，使得对用户眼球疲劳状态的表征更加准确，进一步地根据眼球疲劳程度进行LED护眼台灯照明控制的准确性更高。综上所述，本发明通过分析得到的眼球疲劳程度进行LED护眼台灯照明控制的准确性更高。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例所提供的一种LED护眼台灯照明控制方法流程图；图2为本发明一个实施例所提供的一种眼球疲劳程度检测方法流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种LED护眼台灯照明控制方法及系统，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种LED护眼台灯照明控制方法及系统的具体方案。一种LED护眼台灯照明控制方法及系统实施例：请参阅图1，其示出了本发明一个实施例提供的一种LED护眼台灯照明控制方法流程图，该方法包括：步骤S1：获取用户在预设时间段内每个时刻的眼部区域灰度图像。本发明旨在提供一种LED护眼台灯照明控制方法及系统，用于对用户的眼部区域图像进行分析得到用户的眼球疲劳程度，并根据眼球疲劳程度进行LED护眼台灯照明控制。本发明实施例首先获取用户在预设时间段内每个时刻的眼部区域灰度图像。在本发明实施例中，通过电荷耦合元件相机在预设时间段内通过预设采样频率采集用户人脸区域图像，进一步地将用户人脸区域输入到训练好的深度学习模型中，输出眼部区域初始图像。在本发明实施例中深度学习模型选择MaskR-CNN深度学习模型，且MaskR-CNN深度学习模型为本领域技术人员所熟知的现有技术，实施者可根据具体实施环境自行选择其他深度学习模型，在此不做赘述。需要说明的是，本发明实施例中眼部区域初始图像中只包含眼皮之间的区域，也即眼睛张开的区域，当眼球闭合时，所输出的眼部区域初始图像应当为眼裂，即两个眼睑闭合后的缝隙。此外需要说明的是，实施者也可根据具体实施环境采用CCD相机以外的其他图像采集设备。在获取眼部区域初始图像后，考虑到眼部区域初始图像中可能存在噪声，噪声的存在会影响后续图像处理过程的准确性，因此需要对眼部区域初始图像进行滤波处理。在本发明实施例中，将眼部区域初始图像灰度化后，通过双边滤波算法对眼部区域初始图像进行滤波增强，得到本发明实施例所需要的眼部区域灰度图像，也即本发明实施例中所有眼部区域灰度图像均为灰度化后且滤波处理后的图像，实施者也可根据具体实施环境选择其他滤波方法。由于LED护眼台灯根据用户眼球的疲劳情况进行照明控制的过程是实时，因此在本发明实施例中将用户在当前时刻之前1min对应的时间段作为预设时间段；并且考虑到后续需要对每次眨眼的过程进行分析，而一次眨眼过程的时间大约为0.3s，因此为了获取完整的眨眼过程中每个时刻对应的眼部区域灰度图像，本发明实施例预设采样频率设置为每0.02s采集一次，即本发明实施例获取眼部区域灰度图像的频率也为0.02s获取一次，也即本发明实施例中每个时刻与后一个时刻之间的时间间隔为0.02s，实施者可根据具体实施环境自行调整眼部区域灰度图像的采样频率和预设时间段。步骤S2：根据眼部区域灰度图像中的灰度分布特征，得到每个时刻对应的眼部轮廓、虹膜区域以及瞳孔区域；将存在封闭区域的眼部轮廓对应的时刻，作为开眼时刻；将不存在封闭区域的眼部轮廓对应的时刻，作为闭眼时刻；根据眼部轮廓上像素点的位置分布特征，得到每个开眼时刻和每个闭眼时刻的眨眼疲劳系数；根据虹膜区域的边缘和瞳孔区域的边缘上像素点的位置分布特征，得到每个开眼时刻和每个闭眼时刻的瞳孔应激疲劳指数。考虑到眼睛疲劳时，对应的眼睛张开大小、瞳孔以及虹膜区域均会产生一定程度的变化，而眼睛张开大小可以通过眼眶轮廓来进行表征，因此首先需要筛选出眼部区域灰度图像中的眼眶轮廓、瞳孔区域以及虹膜区域。考虑到瞳孔区域和虹膜区域都具有一定的灰度特征，因此本发明实施例根据眼部区域灰度图像中的灰度分布特征，得到每个时刻对应的眼部轮廓、虹膜区域以及瞳孔区域。优选地，根据眼部区域灰度图像中的灰度分布特征，得到每个时刻对应的眼眶轮廓、虹膜区域以及瞳孔区域包括：将眼部区域灰度图像的边界轮廓作为每个时刻对应的眼部轮廓。眼部轮廓即眼睛张开区域对应的轮廓，而本发明实施例所获取的眼部区域灰度图像对应区域为眼睛张开区域，因此眼部轮廓为眼部区域灰度图像的边界轮廓。当闭眼时，眼部轮廓即对应两个眼睑闭合后的缝隙。由于眼球表面除虹膜和瞳孔区域外的其他区域均为白色，对应的灰度值与虹膜瞳孔对应的区域存在较大的差异，因此本发明对眼部区域灰度图像中所有像素点的灰度值通过最大类间方差法进行分析，得到第一分割阈值；将眼部区域灰度图像中灰度值小于第一分割阈值的像素点组成的区域，作为每个时刻对应的参考区域。参考区域即虹膜区域和瞳孔区域组成的区域。由于瞳孔区域呈现黑色，相比于虹膜区域而言，对应的灰度通常更小，因此本发明实施例对参考区域中所有像素点的灰度值通过最大类间方差法进行分析，得到第二分割阈值；将参考区域中灰度值小于第二分割阈值的像素点组成的区域，作为每个时刻对应的瞳孔区域；在参考区域中，将瞳孔区域以外的其他区域作为每个时刻对应的虹膜区域。需要说明的是，最大类间方差法为本领域技术人员所熟知的现有技术，在此不做赘述。由于闭眼时刻对应的眼部轮廓为一条线，也即两个眼睑闭合后的缝隙，没有对应的封闭区域，导致无法对眼部轮廓对应的封闭区域进行分析，因此本发明实施例对闭眼时刻和开眼时刻分别进行分析。将存在封闭区域的眼部轮廓对应的时刻，作为开眼时刻；将不存在封闭区域的眼部轮廓对应的时刻，作为闭眼时刻。考虑到眼睛张开的程度能够在一定程度上反映用户的眼睛疲劳程度。因此眼眶轮廓对应区域形状大小会影响眼球疲劳程度，因此本发明实施例根据眼部轮廓上像素点的位置分布特征，得到每个开眼时刻和每个闭眼时刻的眨眼疲劳系数。优选地，眨眼疲劳系数的获取方法包括：对于睁眼时刻而言，虽然眨眼的过程会使得眼睛张开的区域变小，但眨眼过程对应的时间在预设时间段的占比相对较少，因此眼睛张开的程度也能一定程度上反映疲劳程度。如果以眼部轮廓曲率最大的两个点为眼角，以眼角为分割点将眼部轮廓划分为上边缘和下边缘，则眼睛张开程度越小时，对应眼眶轮廓的上边缘和下边缘的距离会越短，并且眼角对应的开合度也会受到影响，而这些因素都受到眼睛轮廓上像素点的位置影响，因此本发明实施例将眼部轮廓上的像素点作为轮廓像素点，根据各个开眼时刻下对应的轮廓像素点的分布特征，得到每个开眼时刻的基本眼距，以及每个开眼时刻的眼角开合度。优选地，基本眼距的获取方法包括：对于任意一个开眼时刻：依次将每个轮廓像素点作为目标轮廓像素点；过目标轮廓像素点作眼部轮廓的法线，得到目标轮廓像素点对应的参考法线。法线即与曲线上的点的切线垂直的直线，进一步地将参考法线与眼部轮廓构成区域之间重叠部分的长度作为眼距进行进一步地判断。将参考法线与眼部轮廓相交的另一个轮廓像素点，作为参考轮廓像素点；将目标轮廓像素点与参考轮廓像素点之间的距离，作为目标轮廓像素点的参考眼距；将所有轮廓像素点的参考眼距的均值，作为开眼时刻的基本眼距。根据眼睛张开时的形状特点，对应的参考法线通常会同时与上边缘和下边缘相交，也即目标轮廓像素点和参考轮廓像素点分别在眼眶轮廓对应区域的不同边缘上。因此当眼睛张开程度较小时，参考眼距会变小；也即基本眼距越大，说明对应开眼时刻下眼睛张开的程度越大。优选地，眼角开合度的获取方法包括：对于任意一个开眼时刻：在所有轮廓像素点中，将曲率最大的两个轮廓像素点作为眼角像素点；以每个眼角像素点为端点，分别朝向其相邻的两个轮廓像素点作射线，得到每个眼角像素点对应的两条射线；将每个眼角像素点对应的两条射线之间的夹角，作为每个眼角像素点的特征夹角；将两个眼角像素点的特征夹角的均值，作为开眼时刻的眼角开合度。特征夹角也即眼角的角度，眼睛张开的程度的反映到眼角上，通常表现为眼角的角度，也即特征夹角，考虑到每个眼睛通常对应两个眼角，将两个特征夹角的均值作为每个开眼时刻的眼角开合度。并且考虑到眼睛张开的程度较小时，对应的特征夹角也较小，也即眼睛开合度越大，说明对应开眼时刻眼睛张开的程度越大。由于基本眼距越大，眼睛开合度越大时，对应的眼睛张开程度越大，而眼睛张开程度能够在一定程度上反映眼球的疲劳程度，并且眼睛张开的程度越小，对应的眼球越疲劳，因此本发明实施例根据眼角开合度和基本眼距，得到每个开眼时刻的眨眼疲劳系数，眼角开合度和基本眼距均与眨眼疲劳系数呈负相关。在本发明实施例中，依次将预设时间段内的每个开眼时刻作为第个开眼时刻，则第/＞个开眼时刻的眨眼疲劳系数的获取方法在公式上表现为：其中，为第/＞个开眼时刻的眨眼疲劳系数，/＞为第/＞个开眼时刻的轮廓像素点数量，/＞为第/＞个开眼时刻下第/＞个轮廓像素点的参考眼距，/＞为第/＞个开眼时刻对应的第一个眼角像素点的特征夹角，/＞为第/＞个开眼时刻对应的第二个眼角像素点的特征夹角，为以自然常数为底的指数函数，/＞为归一化函数，/＞为余弦函数；为第/＞个开眼时刻的基本眼距，/＞为第/＞个开眼时刻的眼角开合度。需要说明的是，由于人眼在正常情况下对应眼角的角度不会大于90度，因此眼角开合度对应的角度范围为0到90度，因此通过余弦函数对眼睛开合度进行映射后的映射关系表现为负相关。需要说明的是，本发明实施例中的所有归一化函数的归一化方法均采用线性归一化，实施者可根据具体实施环境自行调整归一化方法，在此不做进一步赘述。由于闭眼时刻无法获取对应的眨眼疲劳系数，但是为了能够对预设时间段内的所有时刻进行分析，本发明实施例将预设闭眼疲劳参数作为每个闭眼时刻的眨眼疲劳系数，预设闭眼疲劳参数大于或等于所有开眼时刻的眨眼疲劳系数。在本发明实施例中，预设闭眼疲劳参数设置为1，实施者可根据具体实施环境自行设置。考虑到眼睛疲劳时，眼睛会增强对光的敏感程度，从而导致瞳孔缩小，因此虹膜区域和瞳孔区域的形状大小会影响眼球疲劳程度，因此本发明实施例根据虹膜区域的边缘和瞳孔区域的边缘上像素点的位置分布特征，得到每个开眼时刻和每个闭眼时刻的瞳孔应激疲劳指数。优选地，瞳孔应激疲劳指数的获取方法包括：人眼疲劳时，眼睛会增强对光的敏感程度，从而导致瞳孔缩小，而眼球中的虹膜区域通常不会发生改变，因此可通过瞳孔区域与虹膜区域的面积占比分析瞳孔应激疲劳指数，瞳孔应激疲劳指数能够反映眼睛对光的敏感程度，也即反映人眼的疲劳程度。由于瞳孔区域和虹膜区域均为一个近似的圆，因此可以进一步拟合瞳孔区域和虹膜区域，获取拟合圆。但是在眨眼过程中，由于眼睛张开的程度会变小，眼睑可能遮挡部分瞳孔区域和虹膜区域，使得眼部区域灰度图像中的瞳孔区域和虹膜区域，出现与圆形差异较大的情况，导致所获取的拟合圆不准确。但是考虑到瞳孔区域和虹膜区域实质上均为圆形，虽然可能会受到眼睑遮挡，但是基于圆形的特征，瞳孔区域和虹膜区域的面积之间的比值可以转化为对应直径之间的比值。从而通过长度来进一步地表征瞳孔应激疲劳指数。虽然无法通过常规方法获取瞳孔区域和虹膜区域之间直径之比，但是考虑到通常情况下瞳孔区域和虹膜区域共圆，因此本发明将每个开眼时刻下的虹膜区域中相距最远的像素点之间的距离，作为虹膜参考距离；将每个开眼时刻下的瞳孔区域中相距最远的像素点之间的距离，作为瞳孔参考距离；将瞳孔参考距离与虹膜参考距离之间的比值的负相关映射值，作为每个开眼时刻对应的瞳孔收缩程度。也即通过虹膜参考距离和瞳孔参考距离的比值，表征瞳孔区域和虹膜区域之间的直径之比，从而进一步表征瞳孔应激疲劳指数。由于瞳孔面积越小时，对应的眼球越疲劳。因此瞳孔收缩程度越大，说明对应时刻下人眼对光的敏感程度越大，对应的瞳孔应激疲劳指数越大。由于人眼在接收到较为刺激的光源时，虹膜被眼皮遮挡的面积会变大，也即眼睛区域灰度图像中所表现的虹膜区域面积会减小。而人眼在疲劳时，对光的敏感度会增强，因此在相同的光源下，虹膜被眼皮遮挡的面积越大，虹膜区域面积越小，也即瞳孔应激疲劳指数越大。进一步地根据虹膜区域面积、瞳孔收缩程度和瞳孔应激疲劳指数之间的关系，根据每个开眼时刻下的虹膜区域面积与瞳孔收缩程度，得到每个开眼时刻的瞳孔应激疲劳指数，虹膜区域面积与瞳孔应激疲劳指数呈负相关，瞳孔收缩程度与瞳孔应激疲劳指数呈正相关。在本发明实施例中，第个开眼时刻的瞳孔应激疲劳指数的获取方法在公式上表现为：/＞其中，为第/＞个开眼时刻的瞳孔应激疲劳指数，/＞为第/＞个开眼时刻的虹膜区域面积，/＞为第/＞个开眼时刻的瞳孔参考距离，/＞为第/＞个开眼时刻的虹膜参考距离，为以自然常数为底的指数函数，/＞为第/＞个开眼时刻的瞳孔收缩程度。对于闭眼时刻而言，由于无法检测到眼部区域灰度图像中的瞳孔区域和虹膜区域，因此无法根据开眼时刻的瞳孔应激疲劳指数的分析方法分析闭眼时刻的瞳孔应激疲劳指数，但考虑到闭眼时刻总是与两个开眼时刻相邻，因此本发明实施例将时序上与每个闭眼时刻相邻的前一个开眼时刻的瞳孔应激疲劳指数，作为每个闭眼时刻的第一参考应激疲劳指数；将时序上与每个闭眼时刻相邻的后一个开眼时刻的瞳孔应激疲劳指数，作为每个闭眼时刻的第二参考应激疲劳指数；将第一参考应激疲劳指数和第二参考应激疲劳指数的均值，作为每个闭眼时刻的瞳孔应激疲劳指数。步骤S3：根据预设时间段内眨眼疲劳系数的局部分布趋势变化情况，得到用户的眨眼疲劳度；根据瞳孔应激疲劳指数的时序差异分布特征，得到用户的瞳孔应激疲劳度；根据眨眼疲劳度和瞳孔应激疲劳度，得到用户在预设时间段内的眼球疲劳程度。至此，得到每个时刻对应的眨眼疲劳系数和瞳孔应激疲劳指数。由于预设时间段内的眨眼疲劳系数和瞳孔应激疲劳指数是动态变化的，在用眼疲劳时，眨眼的频率以及眨眼后眼睛张开程度都会发生一定的变化，并且存在一定的变化趋势，本发明实施例根据预设时间段内眨眼疲劳系数的局部分布趋势变化情况，得到用户的眨眼疲劳度。优选地，眨眼疲劳度的获取方法包括：以时间顺序将预设时间段内的所有眨眼疲劳系数进行曲线拟合，得到眨眼疲劳系数曲线；将眨眼疲劳系数曲线对应的第一个时刻、最后一个时刻以及每个闭眼时刻，作为划分时刻；根据划分时刻将眨眼疲劳系数曲线划分为至少两个眨眼区间，眨眼区间的起点和终点对应的时刻均为划分时刻，且起点和终点对应的时刻之间不存在划分时刻。由于每次眨眼时眼睛都会闭上一次，因此根据划分时刻所得到的眨眼区间为相邻两次眨眼之间对应的时间区间，也即预设时间段内的眨眼区间数量能够表征眨眼频率。将每个眨眼区间中的所有眨眼疲劳系数的极差，作为每个眨眼区间对应的眨眼疲劳波动因子。眨眼疲劳系数表征眼睛的张开程度，因此通过眨眼疲劳系数极差得到的眨眼疲劳波动因子能够表征每个眨眼区间的整体眼睛张开程度，对应的眨眼疲劳波动因子越小，说明对应眨眼区间的眼睛张开程度整体越小，也即对应眨眼区间的眼部越疲劳。由于预设时间段的时间长度是一定的，因此眨眼区间的数量越多，说明用户的眨眼频率越高；而眨眼区间的数量越多时，说明各个眨眼区间的时间长度整体越短，也即眼部疲劳程度会影响各个眨眼区间的时间长度，并且眼部越疲劳，眨眼的频率越高，也即各个眨眼区间的时间长度越短。由于眨眼区间的眨眼疲劳波动因子越小，时间长度越短，对应的眼球越疲劳，因此本发明实施例根据每个眨眼区间的时间长度和眨眼疲劳波动因子，得到每个眨眼区间的局部眼球疲劳程度，时间长度和眨眼疲劳波动因子均与局部眼球疲劳程度呈负相关。进一步地根据每个眨眼区间的局部眼球疲劳程度，进一步表征预设时间段内眼球的整体疲劳程度，本发明实施例将预设时间段内所有眨眼区间的局部眼球疲劳程度的累加值，作为用户的参考眼部疲劳程度。在时间顺序上，将眨眼疲劳波动因子小于前一个眨眼区间的眨眼疲劳波动因子的眨眼区间，作为疲劳趋势眨眼区间。若眨眼区间对应的眨眼疲劳波动因子小于其前一个眨眼区间的眨眼疲劳波动因子，说明当前眨眼区间对应的眼睛存在疲劳趋势，也即眼睛张开程度存在变小趋势，因此将对应的眨眼区间作为疲劳趋势眨眼区间。并且当预设时间段内的疲劳趋势眨眼区间越多，说明用户在预设时间段内眼球趋于疲劳的程度越深，也即眼球越疲劳，因此本发明实施例进一步地将疲劳趋势眨眼区间数量与参考眼部疲劳程度结合，将预设时间段内的疲劳趋势眨眼区间数量和参考眼部疲劳程度的乘积的归一化值，作为用户的眨眼疲劳度。在本发明实施例中，用户在预设时间段内的眨眼疲劳度的获取方法在公式上表现为：其中，为预设时间段内用户的眨眼疲劳度，/＞为预设时间段内的疲劳趋势眨眼区间数量，/＞为预设时间段内对应的第/＞个眨眼区间的眨眼疲劳波动因子，/＞为预设时间段内的眨眼区间数量，/＞为预设时间段内对应的第/＞个眨眼区间的时间长度，/＞为以自然常数为底的指数函数，/＞为归一化函数，/＞为预设时间段内对应的第/＞个眨眼区间的局部眼球疲劳程度，/＞为预设时间段内的用户的参考眼部疲劳程度。瞳孔应激疲劳指数能够通过瞳孔区域和虹膜区域的面积反映眼睛在每个时刻的疲劳程度。而眼睛趋于疲劳的过程是持续的，因此需要对预设时间段内整体的瞳孔应激疲劳指数进行分析。考虑到眼睛在不疲劳的情况下，瞳孔应激疲劳指数通常是不变或者随着眨眼过程的进行而匀速变化的，而当眼球疲劳时，对光的敏感程度增加，若此时不对护眼台灯照明进行调整，则对应的瞳孔应激疲劳指数会出现异常波动，根据该特点本发明实施例根据瞳孔应激疲劳指数的时序差异分布特征，得到用户的瞳孔应激疲劳度。优选地，瞳孔应激疲劳度的获取方法包括：在预设时间段内，依次将除第一个时刻和最后一个时刻外的每个时刻作为目标时刻；将目标时刻的前一个时刻和后一个时刻的瞳孔应激疲劳指数的均值，作为目标时刻的参考应激疲劳指数；将目标时刻的瞳孔应激疲劳指数与参考应激疲劳指数之间的差异，作为目标时刻的应激疲劳差异指数。当目标时刻的瞳孔应激疲劳指数与参考应激疲劳指数之间的差异越大时，说明目标时刻的眼球状态越趋于疲劳，也即用户的眼球状态越差。由于第一个时刻和最后一个时刻不存在前后相邻的两个时刻，为了使得本发明实施例的内容完整，本发明实施例在时间顺序上，将第一个时刻与其后一个时刻之间瞳孔应激疲劳指数的差异，作为第一个时刻的应激疲劳差异指数；将最后一个时刻与其前一个时刻之间瞳孔应激疲劳指数的差异，作为最后一个时刻的应激疲劳差异指数。在得到每个时刻对应的应激疲劳差异指数后，进一步地获取表征预设时间段整体的应激疲劳差异指数分布情况的瞳孔应激疲劳度。本发明实施例将预设时间段内所有时刻的应激疲劳差异指数的累加值的归一化值，作为用户的瞳孔应激疲劳度。在本发明实施例中，用户在预设时间段内的瞳孔应激疲劳度的获取方法在公式上表现为：其中，为用户在预设时间段内的瞳孔应激疲劳度；/＞为预设时间段内对应的时刻数量，也即预设时间段内的瞳孔应激疲劳指数的数量；/＞为预设时间段内第/＞个时刻对应的瞳孔应激疲劳指数，/＞为预设时间段内第/＞个时刻对应的瞳孔应激疲劳指数，为预设时间段内第1个时刻对应的瞳孔应激疲劳指数，/＞为预设时间段内第2个时刻对应的瞳孔应激疲劳指数；/＞为预设时间段内第/＞个时刻对应的瞳孔应激疲劳指数，也即预设时间段内最后一个时刻对应的瞳孔应激疲劳指数；/＞为预设时间段内第/＞个时刻对应的瞳孔应激疲劳指数，也即预设时间段内倒数第二个时刻对应的瞳孔应激疲劳指数，为归一化函数；/＞为预设时间段内第/＞个时刻对应的参考应激疲劳指数，为预设时间段内第/＞个时刻对应的应激疲劳差异指数，/＞为预设时间段内第一个时刻的应激疲劳差异指数，/＞为预设时间段内最后一个时刻的应激疲劳差异指数。至此，得到表征用户眼球疲劳程度的眨眼疲劳度和瞳孔应激疲劳度，进一步可将眨眼疲劳度和瞳孔应激疲劳度结合，本发明实施例根据眨眼疲劳度和瞳孔应激疲劳度，得到用户在预设时间段内的眼球疲劳程度，眨眼疲劳度和瞳孔应激疲劳度均与眼球疲劳程度呈正相关。在本发明实施例中，将眨眼疲劳度和瞳孔应激疲劳度的和值的归一化值，作为眼球疲劳程度。在本发明实施例中，用户在预设时间段内的眼球疲劳程度的获取方法在公式上表现为：/＞其中，为用户在预设时间段内的眼球疲劳程度，/＞为用户在预设时间段内的眨眼疲劳度，/＞为用户在预设时间段内的瞳孔应激疲劳度，/＞为归一化函数。步骤S4：根据眼球疲劳程度进行LED护眼台灯照明控制。根据眨眼疲劳度和瞳孔应激疲劳度的获取方法可知，用户在预设时间段内的眨眼频率越大，眼睛受到光源的刺激程度越大时，用户的眼睛状态越趋于疲劳，对应的眼睛状态越差，也即台灯越应该调整至护眼状态。本发明实施例根据眼球疲劳程度进行LED护眼台灯照明控制。优选地，根据眼球疲劳程度进行LED护眼台灯照明控制包括：当眼球疲劳程度大于或等于预设护眼调节阈值时，将LED护眼台灯的色温降低预设色温数值，预设色温数值大于0；当眼球疲劳程度小于预设护眼调节阈值时，不调整LED护眼台灯的色温。在本发明实施例中，预设护眼调节阈值设置为0.7，预设色温数值设置为500K，并且色温越低，对应的护眼台灯越趋近于暖色调，也即护眼效果越强。需要说明的是，实施者可根据具体实施环境自行设置预设色温数值和预设护眼调节阈值的大小。综上所述，本发明对用户的眼部区域灰度图像进行分析，根据眼部区域灰度图像中的灰度分布，得到眼部轮廓、虹膜区域和瞳孔区域，对虹膜区域边缘、瞳孔区域边缘和眼部轮廓进行分析，得到眨眼疲劳系数和瞳孔应激疲劳指数；根据预设时间段内眨眼疲劳系数的局部分布趋势变化得到眨眼疲劳度；根据预设时间段内瞳孔应激疲劳指数的时序差异分布得到瞳孔应激疲劳度；最后根据眨眼疲劳度和瞳孔应激疲劳度得到眼球疲劳程度对LED护眼台灯进行照明控制。本发明通过分析得到的眼球疲劳程度进行LED护眼台灯照明控制的准确性更高。本发明还提出了一种LED护眼台灯照明控制系统，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，处理器执行所述计算机程序时实现任意一项一种LED护眼台灯照明控制方法的步骤。一种眼球疲劳程度检测方法实施例：现有的对眼球疲劳程度进行检测的方法为眼球表面图像中眼睛的张开大小判断眼睛疲劳程度，但是在眨眼过程中，眼睛的张开大小会随着眼睛的闭合而改变，并且眼球疲劳程度还表现在瞳孔变化和眼睛张开程度的变化，使得仅根据眼睛的张开大小所判断的眼睛疲劳程度不够准确，也即现有技术对眼睛疲劳程度的检测方法准确度较低。本发明实施例提出了一种眼球疲劳程度检测方法。请参阅图2，其示出了本发明一个实施例所提供的一种眼球疲劳程度检测方法流程图，该方法包括：步骤S01：获取用户在预设时间段内每个时刻的眼部区域灰度图像。步骤S02：根据眼部区域灰度图像中的灰度分布特征，得到每个时刻对应的眼部轮廓、虹膜区域以及瞳孔区域；将存在封闭区域的眼部轮廓对应的时刻，作为开眼时刻；将不存在封闭区域的眼部轮廓对应的时刻，作为闭眼时刻；根据眼部轮廓上像素点的位置分布特征，得到每个开眼时刻和每个闭眼时刻的眨眼疲劳系数；根据虹膜区域的边缘和瞳孔区域的边缘上像素点的位置分布特征，得到每个开眼时刻和每个闭眼时刻的瞳孔应激疲劳指数。步骤S03：根据预设时间段内眨眼疲劳系数的局部分布趋势变化情况，得到用户的眨眼疲劳度；根据瞳孔应激疲劳指数的时序差异分布特征，得到用户的瞳孔应激疲劳度；根据眨眼疲劳度和瞳孔应激疲劳度，得到用户在预设时间段内的眼球疲劳程度。其中步骤S01~步骤S03在上述一种LED护眼台灯照明控制方法及系统实施例中已给出了详细说明，不再赘述。一种眼球疲劳程度检测方法涉及图像边缘检测技术领域，该方法考虑到眼部轮廓能够反映眼睛张开的程度，并且眼睛张开的程度能够在一定程度上反映用户的眼睛疲劳程度，因此本发明根据眼部轮廓上像素点的位置分布特征得到眨眼疲劳系数，并且考虑到眼球疲劳的过程是持续的，并且随着眨眼的进行，眼睛的张开程度会不断变小，因此本发明根据眨眼疲劳系数的局部分布趋势变化情况得到眨眼疲劳度。进一步地考虑到人眼疲劳时，眼睛会增强对光的敏感程度，从而导致瞳孔缩小；而人眼在接收到较为刺激的光源时，虹膜对应的部分会被眼皮遮挡；根据该特点，本发明根据所述虹膜区域的边缘、瞳孔区域的边缘上像素点的位置分布特征，得到瞳孔应激疲劳指数，并根据对应的时序差异分布特征，得到瞳孔应激疲劳度。最后结合眨眼疲劳度和瞳孔应激疲劳度综合表征用户的眼球疲劳程度，使得对用户眼球疲劳状态的表征更加准确。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。
