标题title
一种基于d、q轴电流控制的电机控制方法和供电方法
摘要abst
本发明提供一种基于d、q轴电流控制的电机控制方法和供电方法，包括获取发电机M1的三相电流Iu、Iv、Iw，经变换以获得d轴的电流反馈值Id和q轴的电流反馈值I q；实际交流电压Uw和设定交流电压Uf输入第一PI调节器以生成第一控制量，第一控制量调整Id并生成d轴电压给定值Ud；实际输出电压Uf*目标电压Ut输入第三PI调节器以生成第二控制量，第二控制量调整I q并生成q轴电压给定值Uq；d轴电压给定值Ud和q轴电压给定值Uq输入至Park反变换装置再输入脉宽调制模块PWM，并控制三相全桥逆变电路动。本发明能够无须查表和安装大量传感器设备，精确获取发电机M1的d轴反馈电流Id值，以保证输出稳定的直流电。
权利要求书clms
1.一种基于d、q轴电流控制的电机控制方法，其特征在于，包括有，步骤一，生成Id和I q，获取发电机M1输出的三相电流Iu、Iv、Iw和实际交流电压Uw，Iu、Iv、Iw经变换以获得d轴的电流反馈值Id和q轴的电流反馈值I q；步骤二，调整Id，获取设定交流电压Uf，实际交流电压Uw和设定交流电压Uf输入第一PI调节器以生成第一控制量，第一控制量调整电流反馈值Id并输入第二PI调节器，第二PI调节器输出d轴电压给定值Ud；步骤三，调整Iq，获取目标电压Ut和三相全桥逆变电路的实际输出电压Uf*，所述实际输出电压Uf*目标电压Ut输入第三PI调节器以生成第二控制量，第二控制量调整电流反馈值I q并输入第四PI调节器，第四PI调节器输出q轴电压给定值Uq；步骤四，输出控制脉宽，d轴电压给定值Ud和q轴电压给定值Uq输入至Park反变换装置将Ud 、Uq 分解为两相静止坐标系的电压给定值Uα、Uβ，两相静止坐标系的电压给定值Uα、Uβ输入脉宽调制模块PWM，脉宽调制模块PWM控制三相全桥逆变电路动作。2. 根据权利要求1所述的一种基于d、q轴电流控制的电机控制方法，其特征在于，所述步骤一还包括：Iu、Iv、Iw依次经行Clark变换和Park变换后输出d轴的电流反馈值Id和q轴的电流反馈值I q。3.根据权利要求1所述的一种基于d、q轴电流控制的电机控制方法，其特征在于，所述步骤二中设定交流电压Uf的获取方法为：获取发电机M1的交直流电压系数K，依据目标电压Ut与交直流电压系数K计算出设定交流电压Uf。4.根据权利要求1-3任意一项所述的一种基于d、q轴电流控制的电机控制方法，其特征在于，所述发电机M1为永磁电机，Uw＜Uf时，控制Id=0，调整Iq控制Uf*，Ut＜Uf*，Iq减小；Ut＞Uf*，Iq增大；Uw＞Uf时，控制Id＜0，发电机M1进入弱磁状态，调整Iq控制Uf*，Ut＜Uf*，Iq减小；Ut＞Uf*，Iq增大。5.根据权利要求4所述的一种基于d、q轴电流控制的电机控制方法，其特征在于，所述发电机M1低于额定转速，且Uw＜Uf时，控制Id＞0，发电机M1进入强磁状态，以提高Uw。6.根据权利要求1-3任意一项所述的一种基于d、q轴电流控制的电机控制方法，其特征在于，所述发电机M1为励磁电机，发电机M1转速低于额定转速时，Id随转速升高而增加，Ut由Iq控制，Ut＜Uf*，Iq减小；Ut＞Uf*，Iq增大；发电机M1转速大于额定转速时，减小Id以维持Uw不变，Ut＜Uf*，Iq减小；Ut＞Uf*，Iq增大。7.根据权利要求6所述的一种基于d、q轴电流控制的电机控制方法，其特征在于，发电机M1转速远低于额定转速，且Uw＜Uf时，同时增大Iq和Id，以提高Uw。8.一种基于d、q轴电流控制的电动机供电方法，其特征在于，包括,步骤一，生成Id和I q，获取三相全桥逆变电路输出的三相电流Iu、Iv、Iw和实际交流电压Uw，Iu、Iv、Iw经变换以获得d轴的电流反馈值Id和q轴的电流反馈值I q；步骤二，调整Id，获取设定交流电压Uf，实际交流电压Uw和设定交流电压Uf输入第一PI调节器以生成第一控制量，第一控制量调整电流反馈值Id并输入第二PI调节器，第二PI调节器输出d轴电压给定值Ud；步骤三，调整Iq，获取目标电压Ut和电源电压UF*，所述电源电压UF*目标电压Ut输入第三PI调节器以生成第二控制量，第二控制量调整电流反馈值I q并输入第四PI调节器，第四PI调节器输出q轴电压给定值Uq；步骤四，输出控制脉宽，d轴电压给定值Ud和q轴电压给定值Uq输入至Park反变换装置将Ud 、Uq 分解为两相静止坐标系的电压给定值Uα、Uβ，两相静止坐标系的电压给定值Uα、Uβ输入脉宽调制模块PWM，脉宽调制模块PWM控制三相全桥逆变电路动作。
说明书desc
技术领域本发明涉及发电机直流稳压输出技术领域，具体涉及一种基于d、q轴电流控制的电机控制方法和供电方法。背景技术现有的直流发电设备包括有输出交流电的发电机，为能输出稳压的直流电，发电机的输出端还连接有AC/DC整流和DC/DC调压。常规设置中还包括有控制励磁绕组d轴和q轴的磁场电流，以改变磁场强度，使发电机输出稳压的直流电。实际方法包括有：采集发电机的输出电流，依据输出电流给出d轴控制电流Id，再调整q轴电流Iq使电机的输出设定压强的电压。但在常规情况下Id由查表获得，在Id固定的情况下调整Iq，控制输出电压。使用交流永磁电机或交流电励磁电机情况下，由于励磁电场的强度受温度影响，因此发电机的工作温度也会影响输出电压，发电机的驱动转速、工作温度和输出功率，均会影响发电机的输出电压。现有技术中为能够精确调整Id，在直流发电设备内需增设温度、驱动转速和输出功率采集设备，对查表获取的d轴控制电流Id进行调整，以保证输出电压的稳定。但此类方法会在增大直流发电设备的体积且增大生产成本。发明内容有鉴于此，本发明要解决的问题是提供一种基于d、q轴电流控制的电机控制方法和供电方法，能够无须查表和安装大量传感器设备，精确获取发电机的d轴反馈电流Id值和q轴的电流反馈值I q，以保证输出稳定的直流电。为解决上述技术问题，本发明采用的技术方案是：一种基于d、q轴电流控制的电机控制方法和供电方法，包括有，步骤一，生成Id和I q，获取发电机M1输出的三相电流Iu、Iv、Iw和实际交流电压Uw，Iu、Iv、Iw经变换以获得d轴的电流反馈值Id和q轴的电流反馈值I q；步骤二，调整Id，获取设定交流电压Uf，实际交流电压Uw和设定交流电压Uf输入第一PI调节器以生成第一控制量，第一控制量调整电流反馈值Id并输入第二PI调节器，第二PI调节器输出d轴电压给定值Ud；步骤三，调整Iq，获取目标电压Ut和三相全桥逆变电路的实际输出电压Uf*，所述实际输出电压Uf*目标电压Ut输入第三PI调节器以生成第二控制量，第二控制量调整电流反馈值I q并输入第四PI调节器，第四PI调节器输出q轴电压给定值Uq；步骤四，输出控制脉宽，d轴电压给定值Ud和q轴电压给定值Uq输入至Park反变换装置将Ud 、Uq 分解为两相静止坐标系的电压给定值Uα、Uβ，两相静止坐标系的电压给定值Uα、Uβ输入脉宽调制模块PWM，脉宽调制模块控制三相全桥逆变电路动作。进一步的，所述步骤一还包括：Iu、Iv、Iw依次经行Clark变换和Park变换后输出d轴的电流反馈值Id和q轴的电流反馈值I q。进一步的，所述步骤二中设定交流电压Uf的获取方法为：获取发电机M1的交直流电压系数K，依据目标电压Ut与交直流电压系数K计算出设定交流电压Uf。进一步的，所述发电机M1为永磁电机，Uw＜Uf时，控制Id=0，调整Iq控制Uf*，Ut＜Uf*，Iq减小；Ut＞Uf*，Iq增大；Uw＞Uf时，控制Id＜0，发电机M1进入弱磁状态，调整Iq控制Uf*，Ut＜Uf*，Iq减小；Ut＞Uf*，Iq增大。进一步的，所述发电机M1低于额定转速，且Uw＜Uf时，控制Id＞0，发电机M1进入强磁状态，以提高Uw。进一步的，所述发电机M1为励磁电机，发电机M1转速低于额定转速时，Id随转速升高而增加，Ut由Iq控制，Ut＜Uf*，Iq减小；Ut＞Uf*，Iq增大；发电机M1转速大于额定转速时，减小Id以维持Uw不变，Ut＜Uf*，Iq减小；Ut＞Uf*，Iq增大。进一步的，发电机M1转速远低于额定转速，且Uw＜Uf时，同时增大Iq和Id，以提高Uw。进一步的，包括,步骤一，生成Id和I q，获取三相全桥逆变电路输出的三相电流Iu、Iv、Iw和实际交流电压Uw，Iu、Iv、Iw经变换以获得d轴的电流反馈值Id和q轴的电流反馈值I q；步骤二，调整Id，获取设定交流电压Uf，实际交流电压Uw和设定交流电压Uf输入第一PI调节器以生成第一控制量，第一控制量调整电流反馈值Id并输入第二PI调节器，第二PI调节器输出d轴电压给定值Ud；步骤三，调整Iq，获取目标电压Ut和电源电压UF*，所述电源电压UF*目标电压Ut输入第三PI调节器以生成第二控制量，第二控制量调整电流反馈值I q并输入第四PI调节器，第四PI调节器输出q轴电压给定值Uq；步骤四，输出控制脉宽，d轴电压给定值Ud和q轴电压给定值Uq输入至Park反变换装置将Ud 、Uq 分解为两相静止坐标系的电压给定值Uα、Uβ，两相静止坐标系的电压给定值Uα、Uβ输入脉宽调制模块PWM，脉宽调制模块控制三相全桥逆变电路动作。本发明具有的优点和积极效果是：通过直接获取实际交流电压Uw，依据实际交流电压Uw与设定交流电压Uf的比值确定第一控制量，依据第一控制量动态调整Id的取值，并通过第一控制量动态调整Iq的取值，保证保证Uf*的稳定。能够无须查表获取Id值，或安装大量传感器设备对Id值进行校准，直接通过Uw与Uf的比值调整Id值，依据Ut与Uf*的比值调整Iq值，保证Uf*的稳定的通知，减少直流发电内部设备，节约直流发电设备的生产成本。附图说明附图用来提供对本发明的进一步理解，并且构成说明书的一部分，与本发明的实施例一起用于解释本发明，并不构成对本发明的限制。在附图中：图1是本发明的一种基于d、q轴电流控制的发电机直流稳压输出方法的整体系统图；图2是本发明的一种基于d、q轴电流控制的发电机直流稳压输出方法的整体原理图；图3是本发明的一种基于d、q轴电流控制的电动机供电方法的整体系统；图4是本发明的一种基于d、q轴电流控制的电动机供电方法的整体原理图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。本文中在本发明的说明书中所使用的术语只是为了描述具体的实施例的目的，不是旨在于限制本发明。本文所使用的术语“及／或”包括一个或多个相关的所列项目的任意的和所有的组合。本发明提供一种基于d、q轴电流控制的电机控制方法和供电方法，如图1和图2所示，包括输出交流电的发电机M1，发电机M1的输出端电连接有三相全桥逆变电路，三相全桥逆变电路的输出端电连接有用电设备，三相全桥逆变电路用于将交流电转换成稳定的直流电路，给用电设备平稳的供电。三相全桥逆变电路通过脉宽调制模块PWM与控制模块数据互通，控制模块数据互通与发电机M1的输出端电连接，控制模块依采集发电机M1输出数据，控制三相全桥逆变电路动作。发电机M1输出三相交流电流，分别为Iu、Iv、Iw，发电机M1输出的交流电的压为实际交流电压Uw，三相全桥逆变电路的输出直流电的电压为实际直流电压Uf*，目标电压Ut为三相全桥逆变电路理论应输出的直流电的电压。控制模块的控制方法：接收三相交流电流Iu、Iv、Iw，依次经过Clark变换和Park变换后输出d轴的电流反馈值Id和q轴的电流反馈值I q。Iu、Iv、Iw执行Clark变换得到两相静止坐标系电流Iα和Iβ，其中，α、β分别表示两相静止坐标系下的两个轴。对Iα和Iβ执行Park变换，得到d轴电流反馈值Id和q轴电流反馈值I q。d轴控制过程为：获取目标电压Ut和发电机M1的交直流电压系数K，计算出设定交流电压Uf，计算公司为：Uf=Ut×K，设定交流电压Uf为发电机M1输出的理论交流电压。实际交流电压Uw和设定交流电压Uf输入第一PI调节器，第一PI调节器依据实际交流电压Uw和设定交流电压Uf构成控制偏差，将偏差的比例和积分通过线性组合构成第一控制量。第一控制量调整d轴的电流反馈值Id，并输入第二PI调节器，第二PI调节器依据d轴的电流反馈值Id输出d轴控制电压Ud。q轴控制过程为：获取目标电压Ut和实际直流电压Uf*并输入第三PI调节器，第三PI调节器依据目标电压Ut和实际直流电压Uf*构成控制偏差，将偏差的比例和积分通过线性组合构成第二控制量。依据第二控制量调整q轴的电流反馈值Iq，并输入第四PI调节器，第四PI调节器依据q轴的电流反馈值Iq输出q轴控制电压Uq。q轴控制电压Uq和d轴控制电压Ud输入Park反变换装置，Park反变换装置将Ud 、Uq分解为两相静止坐标系的电压给定值Uα、Uβ，两相静止坐标系的电压给定值Uα、Uβ输入脉宽调制模块PWM，脉宽调制模块控制三相全桥逆变电路动作，使三相全桥逆变电路输出设定电压的直流电路。当发电机M1为永磁电机时，控制方法为:发电机M1正常转速运行时：Uw＜Uf时，通过第一控制量使Id=0，以确定Id值；依据Ut与Uf*的比值调整Iq值。q轴的调整过程为，第三PI调节器依据Ut与Uf*的比值输出第二控制量，Ut＜Uf*，第二控制量使Iq减小；Ut＞Uf*，第二控制量使Iq增大。判断Uw＞Uf时，通过第一控制量使Id＜0，使发电机M1进入弱磁状态。依据第一控制量具体调整Id值，确定Id值；依据Ut与Uf*的比值调整Iq值。q轴的调整过程为，第三PI调节器依据Ut与Uf*的比值输出第二控制量，Ut＜Uf*，第二控制量使Iq减小；Ut＞Uf*，第二控制量使Iq增大。发电机M1低于额定转速，且Uw＜Uf时，第一控制量使Id＞0，发电机M1进入强磁状态，以提高Uw；依据Ut与Uf*的比值调整Iq值。q轴的调整过程为与发电机M1正常转速运行时相同。当发电机M1为励磁电机时，控制方法为：依据Ut设定预设的Id，发电机M1实际转小和额定转速时，第一PI调节器依据转速比值输出第一控制量，通过第一控制量增加Id，Id随转速升高而增加，q轴的调整过程为与永磁电机相同，Ut＜Uf*，Iq减小；Ut＞Uf*，Iq增大。发电机M1转速大于额定转速时，第一PI调节器依据转速比值输出第一控制量，通过第一控制量减小Id以维持Uw不变，q轴的调整过程为与永磁电机相同，Ut＜Uf*，Iq减小；Ut＞Uf*，Iq增大。发电机M1转速远低于额定转速，且Uw＜Uf时，同时增大Iq和Id，以提高Uw，保证高压输出。如图3和图4所示，包括接收交流电的电动机M2，电动机M2的输入端电连接有三相全桥逆变电路，三相全桥逆变电路的输入端电连接有电源电压UF*，三相全桥逆变电路用于将直流电转换成稳定的三相交流电，给用电动机M2平稳的供电。三相全桥逆变电路通过脉宽调制模块PWM与控制模块数据互通，控制模块数据互通与三相全桥逆变电路的输出端电连接，控制模块采集三相全桥逆变电路输出数据，反馈调整三相全桥逆变电路。为给电动机稳压供电电路，通过反向使用d、q轴电流控制电路，给电动机提供稳定的压强的三相交流电。电源电压UF*为供电的电源，实际交流电压Uw为电动机接收交流电的电压。稳压供电控制方法与电机控制方法类相同，仅电流流向相反：步骤一，生成Id和I q，获取三相全桥逆变电路输出的三相电流Iu、Iv、Iw和实际交流电压Uw，Iu、Iv、Iw经变换以获得d轴的电流反馈值Id和q轴的电流反馈值I q；步骤二，调整Id，获取设定交流电压Uf，实际交流电压Uw和设定交流电压Uf输入第一PI调节器以生成第一控制量，第一控制量调整电流反馈值Id并输入第二PI调节器，第二PI调节器输出d轴电压给定值Ud；步骤三，调整Iq，获取目标电压Ut和电源电压UF*，所述电源电压UF*目标电压Ut输入第三PI调节器以生成第二控制量，第二控制量调整电流反馈值I q并输入第四PI调节器，第四PI调节器输出q轴电压给定值Uq；步骤四，输出控制脉宽，d轴电压给定值Ud和q轴电压给定值Uq输入至Park反变换装置将Ud 、Uq 分解为两相静止坐标系的电压给定值Uα、Uβ，两相静止坐标系的电压给定值Uα、Uβ输入脉宽调制模块PWM，脉宽调制模块控制三相全桥逆变电路动作。以上对本发明的实施例进行了详细说明，但所述内容仅为本发明的较佳实施例，不能被认为用于限定本发明的实施范围。凡依本发明范围所作的均等变化与改进等，均应仍归属于本专利涵盖范围之内。
