标题title
一种串联电池PACK充放电均衡控制方法
摘要abst
本发明属于电池均衡控制技术领域，具体公开了一种串联电池PACK充放电均衡控制方法，包括：获取串联电池PACK的充放电参数以及最先充满电芯和最先放空电芯；提取特征数对，组成参考SOC和特征值对应的数对集合并进一步确定参考数对集合；计算各个电芯的实际放电容量；计算放电截止时刻的电芯预留电量SOC、充电截止时刻的电芯预期电量SOC、预期充电截止压差；基于放电截止时刻与最小容量电芯的预期压差、放电末端预留电量SOC、各个电芯实际容量计算各个电芯期望均衡容量和均衡时间。本发明可以精准识别待均衡电芯，有效控制均衡时间和均衡容量，实现最小容量电芯容量最大程度发挥，提高了串联电池PACK性能。
权利要求书clms
1.一种串联电池PACK充放电均衡控制方法，其特征在于，包括以下步骤：获取串联电池PACK的充放电参数以及串联电池PACK中各个电芯的状态信息；确定最先充满电芯和最先放空电芯，在充电截止时刻，获取串联电池PACK中各个电芯的电压，电芯电压最高的电芯为最先充满电芯；在放电截止时刻，获取串联电池PACK中各个电芯的电压，电芯电压最低的电芯为最先放空电芯；基于所述充放电参数和状态信息计算参考SOC，并在所述充放电参数和状态信息中提取特征数对，基于所述参考SOC和特征数对组成参考SOC和特征值一一对应的数对集合；将最先放空电芯放电末段数对集合作为放电末段参考数对集合，最先充满电芯充电末段数对集合作为充电末段参考数对集合；计算各个电芯的实际放电容量并确定最小容量电芯；设定放电截止时刻最大期望压差阈值以及充电阶段最大压差阈值，基于放电末段参考数对集合和充电末段参考数对集合利用插值法计算各个电芯放电截止时刻的电芯预留电量SOC、各个电芯充电截止时刻的电芯预期电量SOC、预期充电截止压差；判断各个电芯预期充电截止压差与充电阶段最大压差阈值的差值是否超出调整阈值，若超出调整阈值，则调整放电截止时刻最大期望压差阈值，直至各个电芯预期充电截止压差与充电阶段最大压差阈值的差值回归调整阈值，重新计算各个电芯充电截止时刻的电芯预期电量SOC和预期充电截止压差；基于各电芯放电截止时刻与最小容量电芯的预期压差、放电末端预留电量SOC、各个电芯实际容量计算各个电芯期望均衡容量和均衡时间，基于所述期望均衡容量和均衡时间对所述串联电池PACK进行均衡控制。2.根据权利要求1所述的一种串联电池PACK充放电均衡控制方法，其特征在于，基于所述充放电参数和状态信息确定电芯充满时刻和放空时刻，并分别记录串联电池PACK中各个电芯在充满时刻和放空时刻的电压。3.根据权利要求2所述的一种串联电池PACK充放电均衡控制方法，其特征在于，所述特征数对包括最先放空电芯放电末段的第一特征和最先充满电芯充电末段的第二特征；所述放电末段参考数对集合包括第一特征不同时刻的第一子特征集合以及与所述第一子特征相对应的参考SOC集合，所述充电末段参考数对集合包括第二特征不同时刻的第二子特征集合以及与所述第二子特征相对应的参考SOC集合。4.根据权利要求3所述的一种串联电池PACK充放电均衡控制方法，其特征在于，所述充放电参数和状态信息至少包括充放电状态参数State、充放电电流参数I、串联电池PACKSOC参数SOC、电压变化曲线、各个电芯电压参数V_i和充放电安时数Q，其中i代表第i个电芯，t代表时刻，所述充放电状态参数State至少包括充电状态、放电状态、待机状态、停机状态。5.根据权利要求4所述的一种串联电池PACK充放电均衡控制方法，其特征在于，基于所述充放电电流参数I、串联电池PACKSOC参数SOC、充电状态、放电状态确定电芯充满时刻t1和满放时刻t2并记录该时刻各个电芯充满时刻t1电压V_i和满放时刻t2电压V_i。6.根据权利要求5所述的一种串联电池PACK充放电均衡控制方法，其特征在于，所述参考SOC包括放电末段不同时刻参考SOC和充电末端不同时刻参考SOC；所述放电末段不同时刻参考SOC计算过程为：；所述充电末段不同时刻参考SOC计算过程为：；其中，SOCref_dis为放电末段不同时刻的参考SOC，SOCref_cha为充电末段不同时刻的参考SOC，t为充放电时刻，Qdis为放电总容量，Q为实时电芯容量，SOCdis为放电截止时刻的参考SOC，Qr 为串联电池PACK额定容量，SOCcha为充电截止时刻的参考SOC，Qcha为充电总容量。7.根据权利要求6所述的一种串联电池PACK充放电均衡控制方法，其特征在于，基于充放电截止时刻电压利用插值法计算SOCend_cha_i和SOCend_dis_i，其中，SOCend_cha_i为充电末端电量SOC，SOCend_dis_i为放电末端电量SOC；所述各个电芯的实际放电容量Qactual_i，计算过程为：；其中，SOCend_cha_i为充电末端电量SOC、SOCend_dis_i为放电末端电量SOC，所述充电末端电量SOC基于充电末段参考数对集合和充电截止时刻电压利用插值法计算得出，所述放电末端电量SOC基于放电末段参考数对集合和放电截止时刻电压利用插值法计算得出。8.根据权利要求7所述的一种串联电池PACK充放电均衡控制方法，其特征在于，在计算所述预期充电截止压差之前，还需要计算各个电芯放电截止时刻与最小容量电芯的预期压差∆Vexp_dis_i、各个电芯的放电截止时刻的预期电压Vexp_dis_i、各个电芯放电截止时刻的预留电量SOCexp_dis_i；所述各个电芯放电截止时刻与最小容量电芯的预期压差∆Vexp_dis_i计算过程为：；其中，Qactual代表电芯实际容量的向量组Qactual=，n代表电池系统中串联电芯的总数；max和min分别代表对向量组取最大值和最小值；∆Vmax_dis为放电截止时刻最大期望压差阈值；所述各个电芯的放电截止时刻的预期电压Vexp_dis_i计算过程为：；其中，V为放电截止时刻各电芯电压向量组；所述各个电芯放电截止时刻的预留电量SOCexp_dis_i基于放电末段参考数对集合利用插值法得出；所述各个电芯充电截止时刻的电芯预期电量SOC计算过程为：；其中，SOCexp_cha_i为电芯充电截止时刻的电芯预期电量SOC；SOCexp_dis_i为各个电芯放电截止时刻的预留电量SOC，基于放电末段参考数对集合利用插值法计算得出；min为向量组最小值；所述预期充电截止压差计算过程为：；其中，Vexp_cha_i为充电截止时刻预期电压，基于充电末段参考数对集合利用插值法计算得出，max为充电预期电压的最大值。9.根据权利要求8所述的一种串联电池PACK充放电均衡控制方法，其特征在于，所述各个电芯期望均衡容量Qb_i，计算过程为：；所述均衡时间Tb_i，计算过程为：；其中，μ为均衡效率，Ib为均衡电流。10.根据权利要求9所述的一种串联电池PACK充放电均衡控制方法，其特征在于，所述调整放电截止时刻最大期望压差阈值∆Vmax_dis，调整后的放电截止时刻最大期望压差阈值为：/＞；其中，K为增益系数，其数值以固定间隔逐步递增，K值更新后均需要重新计算充电截止时刻各个电芯预期电量SOCexp_cha_i和放电截止时刻的预期电压Vexp_dis_i，直至各个电芯预期充电截止压差与充电阶段最大压差阈值的差值回归调整阈值。
说明书desc
技术领域本发明属于电池组均衡控制技术领域，特别涉及一种串联电池PACK充放电均衡控制方法。背景技术多个磷酸铁锂电芯串联成组，根据不同的电压使用场景需求可以广泛应用于新能源储能、新能源汽车等多个行业。在磷酸铁锂电池串联使用过程中，各电芯在出厂时的容量往往会存在一定差异，受“木桶效应”的限制，整个串联电池系统的最大放电容量取决于系统中的最小电芯容量。但由于系统中各电芯自放电速率、内阻、工作环境温度、串联电路板焊接工艺存在差异，电芯SOC工作区间会逐渐分化，导致系统出现最大容量无法完全发挥的不均衡问题。并且随着时间的累积，该不均衡问题会渐渐恶化，在电池全生命周期内的表现为实际充放电容量和能量利用效率大幅降低。为有效解决该问题，需要对电池系统进行均衡，以降低各个电芯SOC工作区间离散程度。传统的均衡算法是通过设定固定压差阈值来控制均衡开启或关闭，在充放电过程中，若电芯与平均电压或最低电压的偏差大于某一阈值则对该电芯开启均衡，当二者偏差小于结束阈值，均衡停止。这种算法一方面无法精确定位最小容量电芯，实现其容量最大程度发挥；另一方面也无法精准控制均衡时间，若某一电芯出现漏电问题造成电压持续降低，多数电芯都会开启均衡，若电池系统长期未进行工作，最终整个系统都会亏电。发明内容本发明的目的在于克服现有技术中存在的缺陷，提供一种串联电池PACK充放电均衡控制方法。本发明提供了一种串联电池PACK充放电均衡控制方法及方法，包括以下步骤：获取串联电池PACK的充放电参数以及串联电池PACK中各个电芯的状态信息；确定最先充满电芯和最先放空电芯，在充电截止时刻，获取串联电池PACK中各个电芯的电压，电芯电压最高的电芯为最先充满电芯；在放电截止时刻，获取串联电池PACK中各个电芯的电压，电芯电压最低的电芯为最先放空电芯；基于所述充放电参数和状态信息计算参考SOC，并在所述充放电参数和状态信息中提取特征数对，基于所述参考SOC和特征数对组成参考SOC和特征值一一对应的数对集合；将最先放空电芯放电末段数对集合作为放电末段参考数对集合，最先充满电芯充电末段数对集合作为充电末段参考数对集合；计算各个电芯的实际放电容量并确定最小容量电芯；设定放电截止时刻最大期望压差阈值以及充电阶段最大压差阈值，基于放电末段参考数对集合和充电末段参考数对集合利用插值法计算各个电芯放电截止时刻的电芯预留电量SOC、各个电芯充电截止时刻的电芯预期电量SOC、预期充电截止压差；判断各个电芯预期充电截止压差与充电阶段最大压差阈值的差值是否超出调整阈值，若超出调整阈值，则调整放电截止时刻最大期望压差阈值，直至各个电芯预期充电截止压差与充电阶段最大压差阈值的差值回归调整阈值，重新计算各个电芯充电截止时刻的电芯预期电量SOC和预期充电截止压差；基于各电芯放电截止时刻与最小容量电芯的预期压差、放电末端预留电量SOC、各个电芯实际容量计算各个电芯期望均衡容量和均衡时间，基于所述期望均衡容量和均衡时间对所述串联电池PACK进行均衡控制。进一步的方案为，基于所述充放电参数和状态信息确定电芯充满时刻和放空时刻，并分别记录串联电池PACK中各个电芯在充满时刻和放空时刻的电压。进一步的方案为，所述特征数对包括最先放空电芯放电末段的第一特征和最先充满电芯充电末段的第二特征；所述放电末段参考数对集合包括第一特征不同时刻的第一子特征集合以及与所述第一子特征相对应的参考SOC集合，所述充电末段参考数对集合包括第二特征不同时刻的第二子特征集合以及与所述第二子特征相对应的参考SOC集合。进一步的方案为，所述充放电参数和状态信息至少包括充放电状态参数State、充放电电流参数I、串联电池PACKSOC参数SOC、电压变化曲线、各个电芯电压参数V_i和充放电安时数Q，其中i代表第i个电芯，t代表时刻，所述充放电状态参数State至少包括充电状态、放电状态、待机状态、停机状态。进一步的方案为，基于所述充放电电流参数I、串联电池PACKSOC参数SOC、充电状态、放电状态确定电芯充满时刻t1和满放时刻t2并记录该时刻各个电芯充满时刻t1电压V_i和满放时刻t2电压V_i。进一步的方案为，所述参考SOC包括放电末段不同时刻参考SOC和充电末端不同时刻参考SOC；所述放电末段不同时刻参考SOC计算过程为：；所述充电末段不同时刻参考SOC计算过程为：；其中，SOCref_dis为放电末段不同时刻的参考SOC，SOCref_cha为充电末段不同时刻的参考SOC，t为充放电时刻，Qdis为放电总容量，Q为实时电芯容量，SOCdis为放电截止时刻的参考SOC，Qr 为串联电池PACK额定容量，SOCcha为充电截止时刻的参考SOC，Qcha为充电总容量。进一步的方案为，基于充放电截止时刻电压利用插值法计算充电末端电量SOCend_cha_i和放电末端电量SOCend_dis_i；所述各个电芯的实际放电容量Qactual_i，计算过程为：；其中，SOCend_cha_i为充电末端电量SOC、SOCend_dis_i为放电末端电量SOC，所述充电末端电量SOC基于充电末段参考数对集合和充电截止时刻电压利用插值法计算得出，所述放电末端电量SOC基于放电末段参考数对集合和放电截止时刻电压利用插值法计算得出。进一步的方案为，在计算所述预期充电截止压差之前，还需要计算各个电芯放电截止时刻与最小容量电芯的预期压差∆Vexp_dis_i、各个电芯的放电截止时刻的预期电压Vexp_dis_i、各个电芯放电截止时刻的预留电量SOCexp_dis_i；所述各个电芯放电截止时刻与最小容量电芯的预期压差∆Vexp_dis_i计算过程为：；其中，Qactual代表电芯实际容量的向量组Qactual=，n代表电池系统中串联电芯的总数；max和min分别代表对向量组取最大值和最小值；∆Vmax_dis为放电截止时刻最大期望压差阈值；所述各个电芯的放电截止时刻的预期电压Vexp_dis_i计算过程为：；其中，V为放电截止时刻各电芯电压向量组；所述各个电芯放电截止时刻的预留电量SOCexp_dis_i基于放电末段参考数对集合利用插值法得出；所述各个电芯充电截止时刻的电芯预期电量SOC计算过程为：；其中，SOCexp_cha_i为电芯充电截止时刻的电芯预期电量SOC；SOCexp_dis_i为各个电芯放电截止时刻的预留电量SOC，基于放电末段参考数对集合利用插值法计算得出；min为向量组最小值；所述预期充电截止压差计算过程为：；其中，Vexp_cha_i为充电截止时刻预期电压，基于充电末段参考数对集合利用插值法计算得出，max为充电预期电压的最大值。进一步的方案为，所述各个电芯期望均衡容量Qb_i，计算过程为：；所述均衡时间Tb_i，计算过程为：；其中，μ为均衡效率，Ib为均衡电流。进一步的方案为，所述调整放电截止时刻最大期望压差阈值∆Vmax_dis，调整后的放电截止时刻最大期望压差阈值为：/＞；其中，K为增益系数，其数值以固定间隔逐步递增，K值更新后均需要重新计算充电截止时刻各个电芯预期电量SOCexp_cha_i和放电截止时刻的预期电压Vexp_dis_i，直至各个电芯预期充电截止压差与充电阶段最大压差阈值的差值回归调整阈值。与现有技术相比，本发明的有益效果在于：本发明通过获取串联电池PACK的充放电参数以及各个电芯的状态信息，进而确定最先充满电芯和最先放空电芯以及充放电末段的参考SOC，组成充放电末段参考数对集合，基于放电末段参考数对集合计算各个电芯放电截止时刻的电芯预留电量SOC、各个电芯充电截止时刻的规划SOC、预期充电截止压差，根据输出的各电芯放电截止时刻规划SOC，计算未均衡前各电芯SOC与规划SOC的偏差，进而计算出各电芯期望均衡容量，结合串联电池系统的均衡电流可计算出均衡时间，基于所述期望均衡容量和均衡时间对所述串联电池PACK进行均衡控制，可以精准识别待均衡电芯，有效控制均衡时间和均衡容量，实现最小容量电芯容量最大程度发挥，保证了最先充满的电芯最先放空，提高了串联电池PACK性能。附图说明以下附图仅对本发明作示意性的说明和解释，并不用于限定本发明的范围，其中：图1：本发明均衡控制流程图；图2：能量均衡控制方法原理图。具体实施方式为了使本发明的目的、技术方案、设计方法及优点更加清楚明了，以下结合附图通过具体实施例对本发明进一步详细说明。应当理解，此处所描述的具体实施例仅用于解释本发明，并不用于限定本发明。实施例1：如图1所示，本发明提供了一种串联电池PACK充放电均衡控制方法，目的在于解决现有技术中串联电池组充放电容量和能量利用效率低的问题，包括以下步骤：步骤1：获取串联电池PACK的充放电参数以及串联电池PACK中各个电芯的状态信息；具体的，充放电参数和状态信息至少包括充放电状态参数State、充放电电流参数I、串联电池PACKSOC参数SOC、电压变化曲线、各个电芯电压参数V_i和充放电安时数Q，其中i代表第i个电芯，t代表时刻，所述充放电状态参数State至少包括充电状态、放电状态、待机状态、停机状态。步骤2：确定最先充满电芯和最先放空电芯，同时基于所述充放电参数和状态信息确定电芯充满时刻和放空时刻，并分别记录串联电池PACK中各个电芯在充满时刻和放空时刻的电压；在充电截止时刻，获取串联电池PACK中各个电芯的电压，电芯电压最高的电芯为最先充满电芯；在放电截止时刻，获取串联电池PACK中各个电芯的电压，电芯电压最低的电芯为最先放空电芯。步骤3：基于所述充放电参数和状态信息计算参考SOC，并在所述充放电参数和状态信息中提取特征数对，基于所述参考SOC和特征数对组成参考SOC和特征值一一对应的数对集合；将最先放空电芯放电末段数对集合作为放电末段参考数对集合，最先充满电芯充电末段数对集合作为充电末段参考数对集合；所述特征数对包括最先放空电芯放电末段的第一特征和最先充满电芯充电末段的第二特征；所述放电末段参考数对集合包括第一特征不同时刻的第一子特征集合以及与所述第一子特征相对应的参考SOC集合，所述充电末段参考数对集合包括第二特征不同时刻的第二子特征集合以及与所述第二子特征相对应的参考SOC集合。在本实施例中，第一特征为放电末段的电压变化参数，第一子特征为放电末段不同时刻对应的电压，第二特征为充电末段的电压变化参数，第二子特征为充电末段不同时刻对应的电压，可以通过BMS电池管理系统直接获取，数对集合包括不同时刻一一对应的电压值和SOC。步骤4：计算各个电芯的实际放电容量并确定最小容量电芯，在获得参考数对集合的基础上，串联电池PACK的其他电芯基于该参考数对集合，基于截止时刻电压利用插值法计算充电末端电量SOCend_cha_i和放电末端电量SOCend_dis_i，进一步可以得出每个电芯的实际最大放电容量，进而确定最小容量电芯。步骤5：设定放电截止时刻最大期望压差阈值以及充电阶段最大压差阈值，基于放电末段参考数对集合和充电末段参考数对集合利用插值法计算各个电芯放电截止时刻的电芯预留电量SOC、各个电芯充电截止时刻的电芯预期电量SOC、预期充电截止压差。步骤6：判断各个电芯预期充电截止压差与充电阶段最大压差阈值的差值是否超出调整阈值，若各个电芯预期充电截止压差与充电阶段最大压差阈值的差值超出调整阈值，则调整放电截止时刻最大期望压差阈值，直至各个电芯预期充电截止压差与充电阶段最大压差阈值的差值回归调整阈值，重新计算各个电芯充电截止时刻的电芯预期电量SOC和预期充电截止压差。步骤7：基于各电芯放电截止时刻与最小容量电芯的预期压差、放电末端预留电量SOC、各个电芯实际容量计算各个电芯期望均衡容量和均衡时间，基于所述期望均衡容量和均衡时间对所述串联电池PACK进行均衡控制。在步骤2中，基于所述充放电电流参数I、串联电池PACKSOC参数SOC、充电状态、放电状态确定电芯充满时刻t1和满放时刻t2并记录该时刻各个电芯充满时刻t1电压V_i和满放时刻t2电压V_i。在步骤3中，假定串联电池PACK的各个电芯一致性较好，在充放电末端电芯电压的变化趋势近似相同，且在截止时刻附近充放电电压接近线性变化。放电阶段，以最先放电至截止电压的电芯电压变化曲线作为参考电压变化曲线，其放电截止时刻的参考SOC为SOCdis，其余时刻的参考SOC可结合实时放电容量Q、系统额定容量Qr 和放电总容量Qdis计算得出。在充电阶段，以最先充电至截止电压的电芯电压曲线作为参考电压变化曲线，其充电截止时刻的参考SOC为SOCcha，其余时刻的参考SOC可结合实时充电容量Q、系统额定容量Qr 和充电总容量Qcha计算得出，参考SOC包括放电末段不同时刻参考SOC和充电末端不同时刻参考SOC；所述放电末段不同时刻参考SOC计算过程为：；所述充电末段不同时刻参考SOC计算过程为：；其中，SOCref_dis为放电末段不同时刻的参考SOC，SOCref_cha为充电末段不同时刻的参考SOC，t为充放电时刻，Qdis为放电总容量，Q为实时电芯容量，SOCdis为放电截止时刻的参考SOC，Qr 为串联电池PACK额定容量，SOCcha为充电截止时刻的参考SOC，Qcha为充电总容量。在步骤4中，各个电芯的实际放电容量Qactual_i，计算过程为：；其中，SOCend_cha_i为充电末端电量SOC、SOCend_dis_i为放电末端电量SOC，所述充电末端电量SOC基于充电末段参考数对集合和充电截止时刻电压利用插值法计算得出，所述放电末端电量SOC基于放电末段参考数对集合和放电截止时刻电压利用插值法计算得出。在步骤5中，整个串联电池系统能够发挥的最大容量为最小容量电芯的容量，将其容量全部发挥即可实现最优状态。在该状态下，最小容量电芯的SOC工作区间为0-100%，而其他电芯由于容量不一致，SOC工作区间也不同，需要对这些电芯的工作区间进行规划。在计算所述预期充电截止压差之前，还需要计算各个电芯放电截止时刻与最小容量电芯的预期压差∆Vexp_dis_i、各个电芯的放电截止时刻的预期电压Vexp_dis_i、各个电芯放电截止时刻的预留电量SOCexp_dis_i；所述各个电芯放电截止时刻与最小容量电芯的预期压差∆Vexp_dis_i计算过程为：；其中，Qactual代表电芯实际容量的向量组Qactual=，n代表电池系统中串联电芯的总数；max和min分别代表对向量组取最大值和最小值；∆Vmax_dis为放电截止时刻最大期望压差阈值；所述各个电芯的放电截止时刻的预期电压Vexp_dis_i计算过程为：；其中，V为放电截止时刻各电芯电压向量组；所述各个电芯放电截止时刻的预留电量SOCexp_dis_i基于放电末段参考数对集合利用插值法得出；所述各个电芯充电截止时刻的电芯预期电量SOC计算过程为：；其中，SOCexp_cha_i为电芯充电截止时刻的电芯预期电量SOC；SOCexp_dis_i为各个电芯放电截止时刻的预留电量SOC，基于放电末段参考数对集合利用插值法计算得出；min为向量组最小值；所述预期充电截止压差计算过程为：；其中，Vexp_cha_i为充电截止时刻预期电压，基于充电末段参考数对集合利用插值法计算得出，max为充电预期电压的最大值。在步骤6中，调整放电截止时刻最大期望压差阈值∆Vmax_dis，调整后的放电截止时刻最大期望压差阈值为：；其中，K为增益系数，其数值以固定间隔逐步递增，K值更新后均需要重新计算充电截止时刻各个电芯预期电量SOCexp_cha_i和放电截止时刻的预期电压Vexp_dis_i，直至各个电芯预期充电截止压差与充电阶段最大压差阈值的差值回归调整阈值。在步骤7中，各个电芯期望均衡容量Qb_i，计算过程为：；所述均衡时间Tb_i，计算过程为：；其中，μ为均衡效率，Ib为均衡电流。实施例2为了实现实施例1中的均衡控制方法，本实施例提供了一种均衡控制系统。包括用户系统、BMS电池管理系统、能量均衡控制系统、参考电压-SOC曲线计算单元、电芯SOC及容量计算单元、截止SOC规划单元、充放电压差动态调整单元、均衡容量及均衡时间计算单元。在应用实施例1中的均衡控制方法进行串联电池PACK均衡控制过程中，用户系统即为串联电池PACK。BMS电池管理系统用于获取串联电池PACK的充放电参数以及对串联电池PACK进行均衡控制；具体的，充放电参数包括充放电状态参数State、充放电电流参数I、串联电池组模块SOC参数SOC、电压变化曲线、各个电芯电压参数V_i和充放电安时数Q，其中i代表第i个电芯，t代表时刻，所述充放电状态参数State至少包括充电状态、放电状态、待机状态、停机状态；对串联电池PACK进行均衡控制体现在BMS电池管理系统获取均衡容量及均衡时间对串联电池PACK进行精准均衡控制。参考电压-SOC曲线计算单元中，以充放电截止时刻最先达到截止条件的电芯的电压-SOC曲线作为参考电压-SOC曲线，用于充放电截止时刻SOC评估；所述电芯SOC及容量计算单元以参考电压-SOC曲线计算各电芯充放电截止SOC，结合充放电安时数，可精准计算各电芯容量；其中，电压-SOC曲线通过实施例1中的数对集合进行绘制，也就是说，数对集合实际上是电压和SOC对应关系的集合。整个串联电池PACK能够发挥的最大容量为最小容量电芯的容量，将其容量全部发挥即可实现最优状态。在该状态下，最小容量电芯的SOC工作区间为0-100%，而其他电芯由于容量不一致，SOC工作区间也不同，需要对这些电芯的工作区间进行规划。若所有电芯同步达到放电截止电压，放电截止时刻压差为0，但由于容量不一致，其充电截止时刻压差就会过大，压差过大会导致整个电池系统性能下降，长期可能会导致电池寿命缩短、容量降低、内阻降低等问题。故而需要对放电截止SOC进行合理规划，保证充放电截止时刻压差都在预期范围之内，因此，所述截止SOC规划单元通过对放电压差阈值进行归一化处理，实现对各电芯SOC工作区间的初步规划。所述充放电压差调整单元通过充电最大压差阈值进行工作区间调整，保证充放电压差均在合理范围内，得到各电芯最优的SOC工作区间；所述均衡容量及均衡时间计算单元根据各电芯最优SOC工作区间对均衡容量和均衡时间进行计算，并将结果输出至均衡执行单元；需要注意的是，每次充放电循环结束后，均衡时间重新计算，减少单次测试误差累计。以上已经描述了本发明的各实施例，上述说明是示例性的，并非穷尽性的，并且也不限于所披露的各实施例。在不偏离所说明的各实施例的范围和精神的情况下，对于本技术领域的普通技术人员来说许多修改和变更都是显而易见的。本文中所用术语的选择，旨在最好地解释各实施例的原理、实际应用或对市场中的技术改进，或者使本技术领域的其他普通技术人员能理解本文披露的各实施例。
