标题title
智能家居系统的OTA升级方法、装置、电子设备及介质
摘要abst
本申请提供了一种智能家居系统的OTA升级方法、装置、电子设备及介质；方法应用于智能家居系统，智能家居系统包括多种类型的智能家居设备和智能网关；方法包括：智能网关获取所述OTA服务端的升级信息；获取待升级智能家居设备的工作状态参数，并根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测目标升级时长；根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长；允许升级时长大于目标升级时长则进行升级，防止因为升级系统导致智能家居设备无法正常工作或智能家居设备升级失败。
权利要求书clms
1.智能家居系统的OTA升级方法，其特征在于，应用于智能家居系统，所述智能家居系统包括多种类型的智能家居设备和智能网关，所述多种类型的智能家居设备均通过智能网关与OTA服务端通信连接；所述OTA升级方法包括以下步骤：智能网关获取所述OTA服务端的升级信息；其中，所述升级信息中包括至少一种待升级智能家居设备、每种待升级智能家居设备的升级包的属性信息；智能网关获取待升级智能家居设备的工作状态参数，并根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长；当允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级。2.根据权利要求1所述的智能家居系统的OTA升级方法，其特征在于，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长之后，所述OTA升级方法还包括：当允许升级时长小于或等于目标升级时长时，所述智能网关基于预先配置的授权信息，确定待升级智能家居设备是否授权预下载；若允许，则所述智能网关从待升级智能家居设备中获取身份验证信息；所述智能网关基于身份验证信息进行区块链身份认证，并在认证通过后从区块链中下载升级包至所述智能网关；所述智能网关按照预设更新条件更新待升级智能家居设备的允许升级时长，并在更新后的允许升级时长大于目标升级时长时，将所述升级包发送至待升级智能家居设备，以使所述待升级智能家居设备通过升级包进行升级。3.根据权利要求1所述的智能家居系统的OTA升级方法，其特征在于，智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长，包括：智能网关从工作状态参数中筛选出第二部分工作状态参数；所述第二部分工作状态参数至少包括以下之一：待升级智能家居设备的电量信息、实时工作状态、预先配置的工作计划信息；所述工作计划信息表征待升级智能家居设备在不同时间段的工作状态；所述智能网关基于预先配置的、表征每种工作状态是否可以升级的升级配置信息，以及所述第二部分工作状态参数，预测所述待升级智能家居设备支持OTA升级的允许升级时长。4.根据权利要求3所述的智能家居系统的OTA升级方法，其特征在于，所述智能网关基于预先配置的、表征每种工作状态是否可以升级的升级配置信息，以及所述第二部分工作状态参数，预测所述待升级智能家居设备支持OTA升级的允许升级时长，包括：根据所述实时工作状态和工作计划信息，确定所述待升级智能家居设备在未来时间段内的至少一种第一目标工作状态；基于至少一种第一目标工作状态对应的耗电量和待升级智能家居设备的电量信息，预测所述待升级智能家居设备的剩余断电时长；和/或，基于升级配置信息，从第一目标工作状态中确定不可升级的第二目标工作状态；基于实时工作状态、预先配置的工作计划信息，确定进入第二目标工作状态之前的剩余升级时长；基于所述剩余断电时长和/或剩余升级时长，确定允许升级时长。5.根据权利要求1所述的智能家居系统的OTA升级方法，其特征在于，根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长，包括：从待升级智能家居设备的工作状态参数中，获取第一部分工作状态参数，所述第一部分工作状态参数至少包括以下之一：网络环境参数、待升级智能家居设备的硬件属性参数、待升级智能家居设备的现有系统版本；根据该种待升级智能家居设备的第一部分工作状态参数，以及历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；基于预先配置的冗余时长的计算规则，确定目标冗余时长；基于目标冗余时长更新所述目标升级时长，得到更新后的目标升级时长。6.根据权利要求1所述的智能家居系统的OTA升级方法，其特征在于，当升级信息中包括多种待升级智能家居设备，且有多种待升级智能家居设备的允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，包括：根据每种待升级智能家居设备的允许升级时长和目标升级时长，确定待升级智能家居设备的升级时间充裕度顺序；待升级智能家居设备按照所述升级时间充裕度顺序，依次从所述通过智能网关从区块链中下载升级包。7.根据权利要求1所述的智能家居系统的OTA升级方法，其特征在于，待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级，包括：待升级智能家居设备通过智能网关向区块链发送下载请求；所述下载请求中携带公钥信息，以使区块链通过公钥信息进行验证，若验证通过，区块链将对应的升级包发送给待升级智能家居设备；待升级智能家居设备接收到对应的升级包后，使用预先保存的私钥进行签名认证，若签名验证成功，则进行升级。8.智能家居系统的OTA升级装置，其特征在于，应用于智能家居系统，所述智能家居系统包括多种类型的智能家居设备和智能网关，所述多种类型的智能家居设备均通过智能网关与OTA服务端通信连接；所述装置包括：获取模块，用于使智能网关获取所述OTA服务端的升级信息；其中，所述升级信息中包括至少一种待升级智能家居设备、每种待升级智能家居设备的升级包的属性信息；第一预测模块，用于使智能网关获取待升级智能家居设备的工作状态参数，并根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；第二预测模块，用于使智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长；下载模块，用于在当允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级。9.一种电子设备，其特征在于，包括：处理器、存储器和总线，所述存储器存储有所述处理器可执行的机器可读指令，当电子设备运行时，所述处理器与所述存储器之间通过总线通信，所述机器可读指令被所述处理器执行时执行如权利要求1至7任意一项所述的智能家居系统的OTA升级方法的步骤。10.一种计算机可读存储介质，其特征在于，该计算机可读存储介质上存储有计算机程序，该计算机程序被处理器运行时执行如权利要求1至7任意一项所述的智能家居系统的OTA升级方法的步骤。
说明书desc
技术领域本申请涉及物联网技术领域，具体而言，涉及一种智能家居系统的OTA升级方法、装置、电子设备及介质。背景技术智能家居设备已经日益普遍，种类也越来越多，如，智能电视、智能音箱、智能窗帘、智能窗帘等等，在此基础上发展出了智能家居系统，智能家居系统是利用网络通讯技术、智能云端控制等技术，将与家居生活有关的各个子系统如灯光控制、窗帘控制、煤气阀控制、信息家电、地板采暖、健康保健、卫生防疫、日常清扫等有机地结合在一起，通过网络化综合智能控制和管理，实现智能化的全新家居生活，给人们的生活带来了极大的便利。在智能家居系统的使用过程中，往往需要不断加强各种智能家居设备的数据处理能力，提升系统稳定性与安全性，以及融入新的技术与功能，因此，智能家居系统需要对各种智能家居设备进行升级。但是，但是智能家居设备需要在自身系统的控制下自动执行任务，部分智能家居设备还会受到电量的限制，在升级的过程中容易影响任务完成效果，以及若电量不足则容易升级失败。发明内容有鉴于此，本申请的目的在于提供一种智能家居系统的OTA升级方法、装置、电子设备及介质，能够合理控制智能家居设备在合适的时间进行升级，防止因电量不足升级失败或因升级影响任务完成效果。本申请实施例提供的一种智能家居系统的OTA升级方法，应用于智能家居系统，所述智能家居系统包括多种类型的智能家居设备和智能网关，所述多种类型的智能家居设备均通过智能网关与OTA服务端通信连接；所述OTA升级方法包括以下步骤：智能网关获取所述OTA服务端的升级信息；其中，所述升级信息中包括至少一种待升级智能家居设备、每种待升级智能家居设备的升级包的属性信息；智能网关获取待升级智能家居设备的工作状态参数，并根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长；当允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级。在一些实施例中，所述的智能家居系统的OTA升级方法中，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长之后，所述OTA升级方法还包括：当允许升级时长小于或等于目标升级时长时，所述智能网关基于预先配置的授权信息，确定待升级智能家居设备是否授权预下载；若允许，则所述智能网关从待升级智能家居设备中获取身份验证信息；所述智能网关基于身份验证信息进行区块链身份认证，并在认证通过后从区块链中下载升级包至所述智能网关；所述智能网关按照预设更新条件更新待升级智能家居设备的允许升级时长，并在更新后的允许升级时长大于目标升级时长时，将所述升级包发送至待升级智能家居设备，以使所述待升级智能家居设备通过升级包进行升级。在一些实施例中，所述的智能家居系统的OTA升级方法中，智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长，包括：智能网关从工作状态参数中筛选出第二部分工作状态参数；所述第二部分工作状态参数至少包括以下之一：待升级智能家居设备的电量信息、实时工作状态、预先配置的工作计划信息；所述工作计划信息表征待升级智能家居设备在不同时间段的工作状态；所述智能网关基于预先配置的、表征每种工作状态是否可以升级的升级配置信息，以及所述第二部分工作状态参数，预测所述该待升级智能家居设备支持OTA升级的允许升级时长。在一些实施例中，所述的智能家居系统的OTA升级方法中，所述智能网关基于预先配置的、表征每种工作状态是否可以升级的升级配置信息，以及所述第二部分工作状态参数，预测所述该待升级智能家居设备支持OTA升级的允许升级时长，包括：根据所述实时工作状态和工作计划信息，确定所述待升级智能家居设备在未来时间段内的至少一种第一目标工作状态；基于至少一种第一目标工作状态对应的耗电量和待升级智能家居设备的电量信息，预测所述待升级智能家居设备的剩余断电时长；和/或，基于升级配置信息，从第一目标工作状态中确定不可升级的第二目标工作状态；基于实时工作状态、预先配置的工作计划信息，确定进入第二目标工作状态之前的剩余升级时长；基于所述剩余断电时长和/或剩余升级时长，确定允许升级时长。在一些实施例中，所述的智能家居系统的OTA升级方法中，根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长，包括：从待升级智能家居设备的工作状态参数中，获取第一部分工作状态参数，所述第一部分工作状态参数至少包括以下之一：网络环境参数、待升级智能家居设备的硬件属性参数、待升级智能家居设备的现有系统版本；根据该种待升级智能家居设备的第一部分工作状态参数，以及历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；基于预先配置的冗余时长的计算规则，确定目标冗余时长；基于目标冗余时长更新所述目标升级时长，得到更新后的目标升级时长。在一些实施例中，所述的智能家居系统的OTA升级方法中，当升级信息中包括多种待升级智能家居设备，且有多种待升级智能家居设备的允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，包括：根据每种待升级智能家居设备的允许升级时长和目标升级时长，确定待升级智能家居设备的升级时间充裕度顺序；待升级智能家居设备按照所述升级时间充裕度顺序，依次从所述通过智能网关从区块链中下载升级包。在一些实施例中，所述的智能家居系统的OTA升级方法中，待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级，包括：待升级智能家居设备通过智能网关向区块链发送下载请求；所述下载请求中携带公钥信息，以使区块链通过公钥信息进行验证，若验证通过，区块链将对应的升级包发送给待升级智能家居设备；待升级智能家居设备接收到对应的升级包后，使用预先保存的私钥进行签名认证，若签名验证成功，则进行升级。在一些实施例中，还提供一种智能家居系统的OTA升级装置，应用于智能家居系统，所述智能家居系统包括多种类型的智能家居设备和智能网关，所述多种类型的智能家居设备均通过智能网关与OTA服务端通信连接；所述装置包括：获取模块，用于使智能网关获取所述OTA服务端的升级信息；其中，所述升级信息中包括至少一种待升级智能家居设备、每种待升级智能家居设备的升级包的属性信息；第一预测模块，用于使智能网关获取待升级智能家居设备的工作状态参数，并根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；第二预测模块，用于使智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长；下载模块，用于在当允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级。在一些实施例中，还提供一种电子设备，包括：处理器、存储器和总线，所述存储器存储有所述处理器可执行的机器可读指令，当电子设备运行时，所述处理器与所述存储器之间通过总线通信，所述机器可读指令被所述处理器执行时执行所述的智能家居系统的OTA升级方法的步骤。在一些实施例中，还提供一种计算机可读存储介质，该计算机可读存储介质上存储有计算机程序，该计算机程序被处理器运行时执行所述的智能家居系统的OTA升级方法的步骤。本申请实施例中提供一种智能家居系统的OTA升级方法、装置、电子设备及介质；所述OTA升级方法应用于智能家居系统，所述智能家居系统包括多种类型的智能家居设备和智能网关，所述多种类型的智能家居设备均通过智能网关与OTA服务端通信连接；所述OTA升级方法包括以下步骤：智能网关获取所述OTA服务端的升级信息；其中，所述升级信息中包括至少一种待升级智能家居设备、每种待升级智能家居设备的升级包的属性信息；智能网关获取待升级智能家居设备的工作状态参数，并根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长； 当允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级；基于此，只在智能家居设备正常进行OTA升级，且工作状态不受OTA升级影响的允许升级时长中进行升级，防止因为升级系统导致智能家居设备无法正常工作，也防止智能家居设备升级失败。附图说明为了更清楚地说明本申请实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本申请的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1示出了本申请实施例所述智能家居系统的OTA升级方法的流程图；图2示出了本申请实施例所述预测目标升级时长的方法流程图；图3示出了本申请实施例中预测允许升级时长的方法流程图；图4示出了本申请实施例所述另一种智能家居系统的OTA升级方法的方法流程图；图5示出了本申请实施例所述智能家居系统的OTA升级装置的结构示意图；图6示出了本申请实施例所示电子设备的结构示意图。具体实施方式为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，应当理解，本申请中附图仅起到说明和描述的目的，并不用于限定本申请的保护范围。另外，应当理解，示意性的附图并未按实物比例绘制。本申请中使用的流程图示出了根据本申请的一些实施例实现的操作。 应该理解，流程图的操作可以不按顺序实现，没有逻辑的上下文关系的步骤可以反转顺序或者同时实施。 此外，本领域技术人员在本申请内容的指引下，可以向流程图添加一个或多个其他操作，也可以从流程图中移除一个或多个操作。另外，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本申请实施例的组件可以以各种不同的配置来布置和设计。因此，以下对在附图中提供的本申请的实施例的详细描述并非旨在限制要求保护的本申请的范围，而是仅仅表示本申请的选定实施例。基于本申请的实施例，本领域技术人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都属于本申请保护的范围。需要说明的是，本申请实施例中将会用到术语“包括”，用于指出其后所声明的特征的存在，但并不排除增加其它的特征。智能家居设备已经日益普遍，种类也越来越多，如，智能电视、智能音箱、智能窗帘、智能窗帘等等，在此基础上发展出了智能家居系统，智能家居系统是利用网络通讯技术、智能云端控制等技术，将与家居生活有关的各个子系统如灯光控制、窗帘控制、煤气阀控制、信息家电、地板采暖、健康保健、卫生防疫、日常清扫等有机地结合在一起，通过网络化综合智能控制和管理，实现智能化的全新家居生活，给人们的生活带来了极大的便利。在智能家居系统的使用过程中，可能会遇到各种固件/软件方面的问题，比如漏洞、兼容性问题等，因此固件/软件更新是必要的。同时，智能家居设备需要不断地增加新功能，以保持市场竞争力。因此，往往需要不断加强各种智能家居设备的数据处理能力，提升系统稳定性与安全性，以及融入新的技术与功能，因此，智能家居系统需要对各种智能家居设备进行升级。现在，OTA升级就是一种方便的固件/软件更新方式，通过无线传输方式直接将新固件/软件推送给设备，省去了用户手动更新的麻烦，免去了用户前往官网下载新固件/软件并手动更新的步骤。但是，直接将新固件/软件推送给设备，没有考虑智能家居设备的状态是否适合升级。智能家居设备需要在自身系统的控制下自动执行任务，部分智能家居设备还会受到电量的限制，在升级的过程中容易影响任务完成效果，以及若电量不足则容易升级失败。以扫地机器人为例，升级系统需要进行下载和安装，占用扫地机器人的处理能力和内存，导致其无法专注于扫地任务，影响扫地机器人的正常运行；扫地机器人可能会在升级过程中电量不足，导致升级失败。以智能窗帘为例，升级系统可能导致原系统无法正常工作，导致智能窗帘无法在预先设定的时间点打开或关闭。基于此，本申请实施例中提供一种智能家居系统的OTA升级方法、装置、电子设备及介质；所述OTA升级方法应用于智能家居系统，所述智能家居系统包括多种类型的智能家居设备和智能网关，所述多种类型的智能家居设备均通过智能网关与OTA服务端通信连接；所述OTA升级方法包括以下步骤：智能网关获取所述OTA服务端的升级信息；其中，所述升级信息中包括至少一种待升级智能家居设备、每种待升级智能家居设备的升级包的属性信息；智能网关获取待升级智能家居设备的工作状态参数，并根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长； 当允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级；基于此，只在智能家居设备正常进行OTA升级，且工作状态不受OTA升级影响的允许升级时长中进行升级，防止因为升级系统导致智能家居设备无法正常工作，也防止智能家居设备升级失败。请参照图1，图1示出了本申请实施例所述智能家居系统的OTA升级方法的流程图；智能家居系统的OTA升级方法，应用于智能家居系统，所述智能家居系统包括多种类型的智能家居设备和智能网关，所述多种类型的智能家居设备均通过智能网关与OTA服务端通信连接；所述OTA升级方法包括以下步骤S101-S104:S101、智能网关获取所述OTA服务端的升级信息；其中，所述升级信息中包括至少一种待升级智能家居设备、每种待升级智能家居设备的升级包的属性信息；S102、智能网关获取待升级智能家居设备的工作状态参数，并根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；S103、智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长；S104、当允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级。智能网关是智能家居系统中的一种关键设备，它可以将各种智能家居设备连接在一起，实现对智能家居设备的信息采集、信息输入、信息输出；以及实现设备之间的互联互通和集中控制；智能网关作为一个集中的管理点，具有计算能力和存储能力，可以通过手机或其他设备对智能家居设备进行控制和监控，例如根据时间或天气情况自动调节智能设备的设置。所述OTA服务端，即用于向智能家居系统推送升级包的服务端，可以为服务器、云端等。在所述步骤S101中，智能网关获取所述OTA服务端的升级信息；其中，所述升级信息中包括至少一种待升级智能家居设备、每种待升级智能家居设备的升级包的属性信息。智能家居系统升级时，有时候会单独针对特定的智能家居设备进行升级，有时候会同时对多种智能家居设备进行升级，有时候多种智能家居设备之间相互关联，需要同时进行升级，例如，窗帘控件和室内灯光控制之间存在一定联系。基于此，所述OTA服务端的升级信息中可以包括一种待升级智能家居设备，或者多种待升级智能家居设备。本申请中，OTA服务端并不直接向智能家居设备推送升级包，而是先向智能网关推送升级信息。所述升级信息中包括至少一种待升级智能家居设备，申明此次升级的对象，示例性的，例如仅仅对扫地机器人、智能窗帘进行升级，则升级信息中包括扫地机器人、智能窗帘的名称，或者其对应的标识，所述标识可以为代码、编码等。例如扫地机器人的编码对应001，智能窗帘的编码为002。所述升级信息中还包括每种待升级智能家居设备的升级包的属性信息，所述属性信息包括软件版本、文件大小、修改日期等等。在所述步骤S102中，智能网关获取待升级智能家居设备的工作状态参数，并根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长。智能家居设备的与以下因素有关：1.升级包大小：升级包越大，所需的时间就越长，因为需要下载和安装更多的软件包；2.网络环境：网络环境的好坏也会影响升级时间；3：设备本身的硬件性能，如处理器速度、内存大小等，都会影响升级的速度；4:系统版本,升级包通常会修复旧版本中存在的漏洞和缺陷、改变就版本的功能，从而提高系统的稳定性和安全性，因此，版本越老旧，可能需要修复的内容越多，升级需要的时间越长。基于此，请参照图2，图2示出了本申请实施例所述预测目标升级时长的方法流程图；本申请实施例中，根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长，包括以下步骤S201-S204：S201、从待升级智能家居设备的工作状态参数中，获取第一部分工作状态参数，所述第一部分工作状态参数至少包括以下之一：网络环境参数、待升级智能家居设备的硬件属性参数、待升级智能家居设备的现有系统版本；S202、根据该种待升级智能家居设备的第一部分工作状态参数，以及历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；S203、基于预先配置的冗余时长的计算规则，确定目标冗余时长；S204、基于目标冗余时长更新所述目标升级时长，得到更新后的目标升级时长。所述历史升级数据，包括待升级智能家居设备在之前的升级过程中，网络环境参数、待升级智能家居设备的硬件属性参数、待升级智能家居设备的现有系统版本等第一部分工作状态参数，以升级包的属性信息、真实是升级时长。所述历史升级数据，可以说明待升级智能家居设备在之前的升级过程中，在具体的网络环境、硬件属性下，处理一定大小的升级包所需要的时间，从而作为预测本次升级的目标升级时长的重要参考。待升级智能家居设备的现有系统版本和本次升级的升级包之间的版本差异，也可以作为预测本次升级的目标升级时长的重要参考，版本差异越大，目标升级时间越长。仅作为示例，假设上次升级的网络环境的下载速度为200k，硬件属性中剩余内存为3G，升级包大小为10M，版本从9.0版本升级到9.1版本，版本差异为1；上次升级时下载时间是1分钟，安装时间是10分钟，总共的历史升级时间为11分钟。假设本次升级的网络环境的下载速度为100k，硬件属性中剩余内存为2G，升级包大小为20M，版本从9.1版本升级到9.3版本，版本差异为2；则预测下载时间为4分钟，安装时间为20分钟，由于剩余内存降低，因此安装速度变慢，调整为21分钟，由于版本差异大，因为安装速度变慢，调整为22分钟。这样，预测本次的目标升级时长为26分钟。需要说明的是，在实际的计算中，并非是简单的等比计算，而是经过数据采集、分析建立数学模型以进行预测。在一些可行的实施例中，通过大量的该种类型的智能家居设备的升级数据，训练一目标升级时长预测模型，以使目标升级时长预测模型学习升级时长和升级数据之间的关系；在预测时，将第一部分工作状态参数，以及历史升级数据、升级包的属性信息输入至所述目标升级时长预测模型，得到目标升级时长。本申请实施例中，为保证在目标升级时长一定能完成升级过程，防止计算失误，升级时依然需要执行特定任务，导致任务执行效果差，在计算目标升级时长时需设置一定的冗余时长。本申请中则基于预先配置的冗余时长的计算规则，确定目标冗余时长，原先预测的目标升级时长和目标冗余时长的和值，则为更新后的目标升级时长，以保证在目标升级时长一定能下载并安装好升级包。所述冗余时长的计算规则为：根据目标升级时长计算目标冗余时长，目标升级时长越长，目标冗余时长越长；这是因为升级时长越长，可能出现的情况越多，例如网速可能会变慢。具体的，本申请实施例中，所述目标冗余时长与目标升级时长成正比。在所述步骤S103中，所述智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长。所述升级时正常工作，即在OTA升级的过程中，不会由于OTA升级影响其执行效果。例如扫地机器人处于待机状态、充电状态，则不会被OTA升级所影响；若扫地机器人处于扫地状态，则会被OTA升级所影响。正常进行OTA升级，即不会关机、不会断电等。影响待升级智能家居设备OTA升级的因素如下：在执行任务的工作状态下升级，会影响任务执行效果；或该任务执行时会影响OTA升级；也就是说，若有一些特定任务需要执行，则不可OTA升级；若电量不足，则不可OTA升级，容易升级过程中断电，造成升级失败。这里，特定任务也可以称之为特定状态。智能家居系统中会配置各个智能家居工作计划信息，例如智能窗帘在6点打开，并在6点-18点之间保持打开状态；扫地机器人9点开始清扫任务，直至清扫完成，自动返回充电位充电；智能音响在11点-11点30分之间播放音乐，等等。由于OTA升级需要一段时间，因此，不仅要考虑智能家居设备的当下状态，还要考虑其工作计划。比如智能音响在11点-11点30分之间播放音乐，若在10点55分升级，仅仅考虑当前状态是可以升级的，但是5分钟都就不可升级了，因此，允许升级时长只有5分钟。基于此，请参照图3，图3示出了本申请实施例中预测允许升级时长的方法流程图；如图3所示，所述智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长，包括以下步骤S301-S302：S301、智能网关从工作状态参数中筛选出第二部分工作状态参数；所述第二部分工作状态参数至少包括以下之一：待升级智能家居设备的电量信息、实时工作状态、预先配置的工作计划信息；所述工作计划信息表征待升级智能家居设备在不同时间段的工作状态；S302、所述智能网关基于预先配置的、表征每种工作状态是否可以升级的升级配置信息，以及所述第二部分工作状态参数，预测所述该待升级智能家居设备支持OTA升级的允许升级时长。由于智能家居设备在一些特定状态下不可升级，因此，在智能网关中预先配置升级配置信息，通过升级配置信息表征智能家居设备的每种工作状态是否可以升级。例如，扫拖一体机器人：待机状态-可升级；充电状态-可升级；扫地状态-不可升级；拖地状态-不可升级。智能摄像头：待机状态-可升级；通话状态：不可升级。预先配置的工作计划信息，表征待升级智能家居设备在不同时间段的工作状态，也就是说，能够根据工作计划信息确定待升级智能家居设备在未来一段时间是否会进入不可升级状态。这样，升级配置信息，以及所述第二部分工作状态参数，就可以预测所述该待升级智能家居设备支持OTA升级的允许升级时长。具体的，本申请实施例中，所述智能网关基于预先配置的、表征每种工作状态是否可以升级的升级配置信息，以及所述第二部分工作状态参数，预测所述该待升级智能家居设备支持OTA升级的允许升级时长，包括：根据所述实时工作状态和工作计划信息，确定所述待升级智能家居设备在未来时间段内的至少一种第一目标工作状态；基于至少一种第一目标工作状态对应的耗电量和待升级智能家居设备的电量信息，预测所述待升级智能家居设备的剩余断电时长；和/或，基于升级配置信息，从第一目标工作状态中确定不可升级的第二目标工作状态；基于实时工作状态、预先配置的工作计划信息，确定进入第二目标工作状态之前的剩余升级时长；基于所述剩余断电时长和/或剩余升级时长，确定允许升级时长。这里，计算了两种时长，剩余断电时长和剩余升级时长；这里，所述剩余断电时长表征待升级智能家居设备的剩余电量能够支持待升级智能家居设备运行的时长，例如剩余50%的电量，则可以运行30分钟。但是，剩余断电时长跟工作状态有关，以扫拖一体机器人为例，假设扫地状态耗电少，拖地状态耗电多，则剩余50%的电量，则可以扫地30分钟，或者拖地20分钟。基于此，需要先根据所述实时工作状态和工作计划信息，确定所述待升级智能家居设备在未来时间段内的至少一种第一目标工作状态；再基于至少一种第一目标工作状态对应的耗电量和待升级智能家居设备的电量信息，预测所述待升级智能家居设备的剩余断电时长。例如，智能音响在10点30的实时工作状态为待机状态，11点进入音乐播放状态；11点30停止音乐播放；则在 10点30分根据所述实时工作状态和工作计划信息，确定所述待升级智能家居设备在未来时间段内的第一目标工作状态依次为待机状态、音乐播放状态。根据待机状态、音乐播放状态分别对应的耗电量，智能音响的剩余电量，可以计算出智能音响的剩余断电时长。所述不可升级中的第二目标工作状态，即全部的工作状态中，升级会造成影响的一种工作状态。例如扫地机器人的扫地状态。基于实时工作状态、预先配置的工作计划信息，确定进入第二目标工作状态之前的剩余升级时长；也就是说，在进入第二目标工作状态之前，是可以正常升级的，在进入第二目标工作状态之后，为保证第二目标工作状态的正常，不可以进行升级。例如，在9点50进行计算，此时扫地机器人处于待机状态，但是10点整扫地机器人开始扫地，那么剩余升级时长就是10分钟。有些智能设备不用考虑电量这一因素，有些智能设备所有工作状态均可升级，有些则既需要考虑电量又需要考虑工作状态，因此，基于所述剩余断电时长和/或剩余升级时长，确定允许升级时长，包括以下三种情况：第一：基于所述剩余断电时长，确定允许升级时长，剩余断电时长就是允许升级时长；第二：基于所述剩余升级时长，确定允许升级时长，剩余升级时长就是允许升级时长；第三：基于所述剩余断电时长和剩余升级时长，确定允许升级时长，剩余断电时长和剩余升级时长中最短的时长则为允许升级时长。在所述步骤S104中，当允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级。当允许升级时长大于目标升级时长时，既能保证下载升级包和安装升级包的过程顺利进行，也能保证待升级智能家居设备在升级过程中依然正常运行。请参照图4，图4示出了本申请实施例所述另一种智能家居系统的OTA升级方法的方法流程图；本申请实施例中，当升级信息中包括多种待升级智能家居设备，且有多种待升级智能家居设备的允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，包括：S401、根据每种待升级智能家居设备的允许升级时长和目标升级时长，确定待升级智能家居设备的升级时间充裕度顺序；S402、待升级智能家居设备按照所述升级时间充裕度顺序，从所述通过智能网关从区块链中下载升级包的顺序。也就是说，当升级信息中包括多种待升级智能家居设备时，且有多种待升级智能家居设备的允许升级时长大于目标升级时长，这些待升级智能家居设备都可以升级；但是，由于下载安装包需要时间，在下载A设备的安装包之后，可能导致B设备的允许升级时长小于目标升级时长了，因此，确定待升级智能家居设备的升级时间充裕度顺序，升级时间越充裕，则下载顺序越靠后，从而保证多种待升级智能家居设备都能正常升级且升级过程中正常运行。这里，所述根据每种待升级智能家居设备的允许升级时长和目标升级时长，确定待升级智能家居设备的升级时间充裕度顺序，具体的，计算据每种待升级智能家居设备的允许升级时长和目标升级时长的时间差，时间差越大，则升级时间越充裕；根据每种待升级智能家居设备的时间差确定升级时间充裕度顺序。与之相对的，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长之后，所述OTA升级方法还包括以下步骤：当允许升级时长小于或等于目标升级时长时，所述智能网关基于预先配置的授权信息，确定待升级智能家居设备是否授权预下载；若允许，则所述智能网关从待升级智能家居设备中获取身份验证信息；所述智能网关基于身份验证信息进行区块链身份认证，并在认证通过后从区块链中下载升级包至所述智能网关；所述智能网关按照预设更新条件更新待升级智能家居设备的允许升级时长，并在更新后的允许升级时长大于目标升级时长时，将所述升级包发送至待升级智能家居设备，以使所述待升级智能家居设备通过升级包进行升级。也就是说，允许升级时长小于或等于目标升级时长时，可以先将安装包预存到智能网关中，在允许升级时长大于目标升级时长时，待升级智能家居设备安装所述升级包。所述智能网关按照预设更新条件更新待升级智能家居设备的允许升级时长，示例性的，所述预设更新条件为：每隔一段时间重新预测允许升级时长，待升级智能家居设备充电完成，不可升级工作状态结束，等等。本申请实施例中，待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级，包括：待升级智能家居设备通过智能网关向区块链发送下载请求；所述下载请求中携带公钥信息，以使区块链通过公钥信息进行验证，若验证通过，区块链将对应的升级包发送给待升级智能家居设备；待升级智能家居设备接收到对应的升级包后，使用预先保存的私钥进行签名认证，若签名验证成功，则进行升级。因此，智能网关也需要获取预先配置的授权信息，在区块链中完成认证，才能够下载安装包。但是，本申请实施例中，即使是智能网关预下载安装包，但是依然是待升级智能家居设备接收到对应的升级包后，使用预先保存的私钥进行签名认证，若签名验证成功，则进行升级。在设备进行OTA更新时，从云端获取的升级包可能会被注入木马程序，从而达到不法分子的一些目的，如沸沸扬扬的家庭摄像头直播事件，同时，智能家居系统包括大量用户隐私，因此，必须保证智能家居系统的安全，因此，本申请实施例中采用区块链来保证智能家居系统的安全。区块链认证是一种基于区块链技术的数字身份认证方式，其特点是可以提供去中心化、安全、透明的认证服务。区块链技术的去中心化特点可以将用户的隐私数据存储在本地，只有用户持有私钥才能对数据进行操作，这大大提高了智能家居系统的安全性，拦截了可能存在的黑客攻击。同时，使用区块链技术所有数据将被加密、验证和记录，确保数据的安全性和完整性。由于数据被分布存储在众多节点上，攻击者难以修改、增加或删除数据，因此智能家居系统的安全性将大大提高。基于同一发明构思，本申请实施例中还提供了与智能家居系统的OTA升级方法对应的智能家居系统的OTA升级装置，由于本申请实施例中的OTA升级装置解决问题的原理与本申请实施例上述OTA升级方法相似，因此装置的实施可以参见方法的实施，重复之处不再赘述。请参照图5，图5示出了本申请实施例所述智能家居系统的OTA升级装置的结构示意图；智能家居系统的OTA升级装置，应用于智能家居系统，所述智能家居系统包括多种类型的智能家居设备和智能网关，所述多种类型的智能家居设备均通过智能网关与OTA服务端通信连接；所述装置包括：获取模块501，用于使智能网关获取所述OTA服务端的升级信息；其中，所述升级信息中包括至少一种待升级智能家居设备、每种待升级智能家居设备的升级包的属性信息；第一预测模块502，用于使智能网关获取待升级智能家居设备的工作状态参数，并根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；第二预测模块503，用于使智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长；下载模块504，用于在当允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级。本申请实施例中提供一种智能家居系统的OTA升级装置，所述OTA升级方法应用于智能家居系统，所述智能家居系统包括多种类型的智能家居设备和智能网关，所述多种类型的智能家居设备均通过智能网关与OTA服务端通信连接；所述OTA升级方法包括以下步骤：智能网关获取所述OTA服务端的升级信息；其中，所述升级信息中包括至少一种待升级智能家居设备、每种待升级智能家居设备的升级包的属性信息；智能网关获取待升级智能家居设备的工作状态参数，并根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长； 当允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级；基于此，只在智能家居设备正常进行OTA升级，且工作状态不受OTA升级影响的允许升级时长中进行升级，防止因为升级系统导致智能家居设备无法正常工作，也防止智能家居设备升级失败。在一些实施例中，所述的智能家居系统的OTA升级装置中，所述装置还包括：预下载模块，用于在预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长之后，当允许升级时长小于或等于目标升级时长时，所述智能网关基于预先配置的授权信息，确定待升级智能家居设备是否授权预下载；若允许，则所述智能网关从待升级智能家居设备中获取身份验证信息；所述智能网关基于身份验证信息进行区块链身份认证，并在认证通过后从区块链中下载升级包至所述智能网关；所述智能网关按照预设更新条件更新待升级智能家居设备的允许升级时长，并在更新后的允许升级时长大于目标升级时长时，将所述升级包发送至待升级智能家居设备，以使所述待升级智能家居设备通过升级包进行升级。在一些实施例中，所述的智能家居系统的OTA升级装置中的第二预测模块，在智能网关根据该待升级智能家居设备的第二部分工作状态参数，预测该待升级智能家居设备正常进行OTA升级且升级时正常工作的允许升级时长时，具体用于：智能网关从工作状态参数中筛选出第二部分工作状态参数；所述第二部分工作状态参数至少包括以下之一：待升级智能家居设备的电量信息、实时工作状态、预先配置的工作计划信息；所述工作计划信息表征待升级智能家居设备在不同时间段的工作状态；所述智能网关基于预先配置的、表征每种工作状态是否可以升级的升级配置信息，以及所述第二部分工作状态参数，预测所述该待升级智能家居设备支持OTA升级的允许升级时长。在一些实施例中，所述的智能家居系统的OTA升级装置中的第二预测模块，在所述智能网关基于预先配置的、表征每种工作状态是否可以升级的升级配置信息，以及所述第二部分工作状态参数，预测所述该待升级智能家居设备支持OTA升级的允许升级时长时，具体用于：根据所述实时工作状态和工作计划信息，确定所述待升级智能家居设备在未来时间段内的至少一种第一目标工作状态；基于至少一种第一目标工作状态对应的耗电量和待升级智能家居设备的电量信息，预测所述待升级智能家居设备的剩余断电时长；和/或，基于升级配置信息，从第一目标工作状态中确定不可升级的第二目标工作状态；基于实时工作状态、预先配置的工作计划信息，确定进入第二目标工作状态之前的剩余升级时长；基于所述剩余断电时长和/或剩余升级时长，确定允许升级时长。在一些实施例中，所述的智能家居系统的OTA升级装置中的第一预测模块，在根据该种待升级智能家居设备的第一部分工作状态参数、历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长时，具体用于：从待升级智能家居设备的工作状态参数中，获取第一部分工作状态参数，所述第一部分工作状态参数至少包括以下之一：网络环境参数、待升级智能家居设备的硬件属性参数、待升级智能家居设备的现有系统版本；根据该种待升级智能家居设备的第一部分工作状态参数，以及历史升级数据、升级包的属性信息，预测该种待升级智能家居设备的目标升级时长；基于预先配置的冗余时长的计算规则，确定目标冗余时长；基于目标冗余时长更新所述目标升级时长，得到更新后的目标升级时长。在一些实施例中，所述的智能家居系统的OTA升级装置中的下载模块，当升级信息中包括多种待升级智能家居设备，且有多种待升级智能家居设备的允许升级时长大于目标升级时长时，所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包，所述下载模块在使所述待升级智能家居设备通过智能网关从区块链中下载对应的升级包时，具体用于：根据每种待升级智能家居设备的允许升级时长和目标升级时长，确定待升级智能家居设备的升级时间充裕度顺序；待升级智能家居设备按照所述升级时间充裕度顺序，依次从所述通过智能网关从区块链中下载升级包。在一些实施例中，所述的智能家居系统的OTA升级装置中的下载模块，在待升级智能家居设备通过智能网关从区块链中下载对应的升级包，并进行升级时，具体用于：待升级智能家居设备通过智能网关向区块链发送下载请求；所述下载请求中携带公钥信息，以使区块链通过公钥信息进行验证，若验证通过，区块链将对应的升级包发送给待升级智能家居设备；待升级智能家居设备接收到对应的升级包后，使用预先保存的私钥进行签名认证，若签名验证成功，则进行升级。基于同一发明构思，本申请实施例中还提供了与智能家居系统的OTA升级方法对应的电子设备，由于本申请实施例中的电子设备解决问题的原理与本申请实施例上述OTA升级方法相似，因此电子设备的实施可以参见方法的实施，重复之处不再赘述。请参照图6，所述图6示出了本申请实施例所示电子设备的结构示意图；所述电子设备600，包括：处理器602、存储器601和总线，所述存储器601存储有所述处理器602可执行的机器可读指令，当电子设备600运行时，所述处理器602与所述存储器601之间通过总线通信，所述机器可读指令被所述处理器602执行时执行所述的智能家居系统的OTA升级方法的步骤。基于同一发明构思，本申请实施例中还提供了与智能家居系统的OTA升级方法对应的计算机可读存储介质，由于本申请实施例中的计算机可读存储介质解决问题的原理与本申请实施例上述OTA升级方法相似，因此计算机可读存储介质的实施可以参见方法的实施，重复之处不再赘述。一种计算机可读存储介质，该计算机可读存储介质上存储有计算机程序，该计算机程序被处理器运行时执行所述的智能家居系统的OTA升级方法的步骤。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的系统和装置的具体工作过程，可以参考方法实施例中的对应过程，本申请中不再赘述。在本申请所提供的几个实施例中，应该理解到，所揭露的系统、装置和方法，可以通过其它的方式实现。以上所描述的装置实施例仅仅是示意性的，例如，所述模块的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，又例如，多个模块或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些通信接口，装置或模块的间接耦合或通信连接，可以是电性，机械或其它的形式。所述作为分离部件说明的模块可以是或者也可以不是物理上分开的，作为模块显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。所述功能如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个处理器可执行的非易失的计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、ROM、RAM、磁碟或者光盘等各种可以存储程序代码的介质。以上仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以权利要求的保护范围为准。
