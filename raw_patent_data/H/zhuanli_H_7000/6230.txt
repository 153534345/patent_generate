标题title
一种工控互联网数据通用权限验证方法
摘要abst
本发明公开了一种工控互联网数据通用权限验证方法，属于数据安全防护技术领域，该权限验证方法通过数据权限转变为脚本，并为不同的账号用户链接不同的权限脚本，在账号用户执行相关操作时，通过执行权限脚本来对用户是否满足对应数据的权限要求进行判断，这样能够保证在用户的需求发生变化，如权限校验规则发生变化时，不需要重新编写代码，只需要根据用户的需求修改相应的权限脚本，不需要重新修改和发布程序，具有很高的通用性；另外本发明通过各用户账号在对应时段内执行该权限脚本，能够快速执行验证过程，节省了验证时间，避免出现在权限脚本使用较为频繁的时候，出现权限验证过长，影响体验的问题。
权利要求书clms
1.一种工控互联网数据通用权限验证方法，其特征在于，包括如下步骤：S1、通过权限定义单元定义一套权限脚本，所定义的权限脚本存储于脚本库，并为每一个用户账号对应一个权限脚本；S2、根据各工控互联网数据特征为各工控互联网数据赋予数据标签；根据各用户账号的特征为各用户账号赋予对照标签，各用户账号以及工控互联网数据与标签的对应关系存储于标签库；S3、当一个用户账号通过数据检索单元对数据库内的数据进行检索时，将检索得到的工控互联网数据标记为待核准数据；获取各待核准数据的数据标签，获取对应用户账号的对照标签；在脚本库中获取对应用户账号所对应的权限脚本，通过脚本解释器执行该权限脚本，根据权限脚本计算结果进行权限判定，判断对应用户账号是否满足各待核准数据的权限要求，并通过人机交互界面对满足权限要求的待核准数据进行展示。2.根据权利要求1所述的一种工控互联网数据通用权限验证方法，其特征在于，通过预编译单元对权限脚本进行预编译的方法为：将一个周期划分为k个待考核时段，获取在一个周期中各待考核时段内各权限脚本被执行的次数z；将一个待考核时段标记为样本段，将一个权限脚本标记为样本脚本，获取样本脚本在连续的n个样本段中被执行的次数zi，其中1≤i≤n；将能够表示样本脚本在样本段中对应的n个zi值特征的数值标记特征值zz；获取样本脚本在n个样本段中被执行时，对应的用户账号的权限级别以及各权限级别的用户账号的数量be；根据公式计算得到样本脚本在过去的n个周期中在样本段中的执行系数G；其中αe为各权限级别的用户账号对应的预设权限系数，且用户账号的权限级别越高，其对应的预设权限系数越大，其中1≤e≤r；b为样本脚本在过去的n个样本段中对执行时，各权限级别的用户账号的总数；计算在过去的n个周期中，各权限脚本在各待考核时段中对应的执行系数G；对于样本脚本，将其对应的执行系数G大于等于预设值G1的待考核时段标记为样本脚本的预编译时段；计算得到各权限脚本对应的预编译时段；当一个权限脚本进入其对应的预编译时段时，则通过预编译单元对对应的权限脚本进行预编译。3.根据权利要求2所述的一种工控互联网数据通用权限验证方法，其特征在于，一个周期为一天。4.根据权利要求2所述的一种工控互联网数据通用权限验证方法，其特征在于，表示n个zi值的特征的数值zz包括n个对应zi值的平均值、中位数。5.根据权利要求2所述的一种工控互联网数据通用权限验证方法，其特征在于，样本脚本在样本段中的特征值zz的计算方法为：根据公式计算得到z1至zn这一组数据的离散系数F，当F≤F1时，则将zp作为对应的zz；当F＞F1时，则按照|zi-zp|从大到小的顺序依次删除对应的zi值，直至F≤F1成立，若删除的zi值的数量c满足c/n＞β成立，则将zp作为对应的zz，若满足c/n≤β成立，则将剩余未被删除的zi值的平均值作为对应的zz；其中F1为预设值，zp为z1至zn这一组数据的平均值，β为预设的比例系数。6.根据权利要求5所述的一种工控互联网数据通用权限验证方法，其特征在于，β取值为65%。
说明书desc
技术领域本发明属于数据安全防护技术领域，具体的，涉及一种工控互联网数据通用权限验证方法。背景技术在计算机软件领域，对敏感数据的保护是非常严格的，需要根据用户的权限设置相应的数据查看范围，所以数据权限的校验是一项非常重要的功能。目前软件开发中的数据权限都是针对特定的需求编制相应的代码，不具备任何通用性。一旦用户的需求发生变化，一般都需要重新编写代码，以满足新的需求。无论开发和开发后的测试，都需要大量的时间，也不利于软件在后期根据实际需要进行权限的精准修改，为了解决上述问题，提供一种能够根据用户需要准确的对权限进行设置的方法，本发明提供了以下技术方案。发明内容本发明的目的在于提供一种工控互联网数据通用权限验证方法，解决现有技术中在进行软件开发时，数据权限都是针对特定的需求编制相应的代码，不具备任何通用性。一旦用户的需求发生变化，一般都需要重新编写代码，以满足新的需求，从而效率低下，通用性较差的问题。本发明的目的可以通过以下技术方案实现：一种工控互联网数据通用权限验证方法，包括如下步骤：S1、通过权限定义单元定义一套权限脚本，所定义的权限脚本存储于脚本库，并为每一个用户账号对应一个权限脚本；S2、根据各工控互联网数据特征为各工控互联网数据赋予数据标签；根据各用户账号的特征为各用户账号赋予对照标签，各用户账号以及工控互联网数据与标签的对应关系存储于标签库；S3、当一个用户账号通过数据检索单元对数据库内的数据进行检索时，将检索得到的工控互联网数据标记为待核准数据；获取各待核准数据的数据标签，获取对应用户账号的对照标签；在脚本库中获取对应用户账号所对应的权限脚本，通过脚本解释器执行该权限脚本，根据权限脚本计算结果进行权限判定，判断对应用户账号是否满足各待核准数据的权限要求，并通过人机交互界面对满足权限要求的待核准数据进行展示。作为本发明的进一步方案，通过预编译单元对权限脚本进行预编译的方法为：将一个周期划分为k个待考核时段，获取在一个周期中各待考核时段内各权限脚本被执行的次数z；将一个待考核时段标记为样本段，将一个权限脚本标记为样本脚本，获取样本脚本在连续的n个样本段中被执行的次数zi，其中1≤i≤n；将能够表示样本脚本在样本段中对应的n个zi值特征的数值标记特征值zz；获取样本脚本在n个样本段中被执行时，对应的用户账号的权限级别以及各权限级别的用户账号的数量be；根据公式计算得到样本脚本在过去的n个周期中在样本段中的执行系数G；其中αe为各权限级别的用户账号对应的预设权限系数，且用户账号的权限级别越高，其对应的预设权限系数越大，其中1≤e≤r；b为样本脚本在过去的n个样本段中对执行时，各权限级别的用户账号的总数；计算在过去的n个周期中，各权限脚本在各待考核时段中对应的执行系数G；对于样本脚本，将其对应的执行系数G大于等于预设值G1的待考核时段标记为样本脚本的预编译时段；计算得到各权限脚本对应的预编译时段；当一个权限脚本进入其对应的预编译时段时，则通过预编译单元对对应的权限脚本进行预编译。作为本发明的进一步方案，一个周期为一天。作为本发明的进一步方案，表示n个zi值的特征的数值zz包括n个对应zi值的平均值、中位数。作为本发明的进一步方案，样本脚本在样本段中的特征值zz的计算方法为：根据公式计算得到z1至zn这一组数据的离散系数F，当F≤F1时，则将zp作为对应的zz；当F＞F1时，则按照|zi-zp|从大到小的顺序依次删除对应的zi值，直至F≤F1成立，若删除的zi值的数量c满足c/n＞β成立，则将zp作为对应的zz，若满足c/n≤β成立，则将剩余未被删除的zi值的平均值作为对应的zz；其中F1为预设值，zp为z1至zn这一组数据的平均值，β为预设的比例系数；作为本发明的进一步方案，β取值为65%。本发明的有益效果：1、本发明通过数据权限转变为脚本，并为不同的账号用户链接不同的权限脚本，在账号用户执行相关操作时，通过执行权限脚本来对用户是否满足对应数据的权限要求进行判断，这样能够保证在用户的需求发生变化，如权限校验规则发生变化时，不需要重新编写代码，只需要根据用户的需求修改相应的权限脚本，不需要重新修改和发布程序，具有很高的通用性；2、本发明通过对不同的权限脚本的执行在时间上的规律以及执行权限脚本的用户账号进行分析，并在预设的时间范围内对权限脚本进行预编译，因此在各用户账号在对应时段内执行该权限脚本时，能够快速执行，节省了验证时间，避免出现在权限脚本使用较为频繁的时候，出现权限验证过长，影响体验的问题。附图说明下面结合附图对本发明作进一步的说明。图1是本发明权限验证系统的框架结构示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其它实施例，都属于本发明保护的范围。一种工控互联网数据通用权限验证方法，包括如下步骤：S1、通过权限定义单元定义一套权限脚本，所定义的权限脚本存储于脚本库，并为每一个用户账号对应一个权限脚本；需要注意的是，同一权限脚本可以对应两个或者两个以上不同的用户账号；S2、根据各工控互联网数据特征为各工控互联网数据赋予数据标签；根据各用户账号的特征为各用户账号赋予对照标签，各用户账号以及工控互联网数据与标签的对应关系存储于标签库；具体的，所述数据标签根据使用环境进行确定，为方便理解，举例如下：数据的权限级别、数据所属的部门、数据产生的时间等；所述对照标签距离如下：用户账号的权限级别、用户账号所属的部门等；S3、当一个用户账号通过数据检索单元对数据库内的数据进行检索时，将检索得到的工控互联网数据标记为待核准数据；获取各待核准数据的数据标签，获取对应用户账号的对照标签；在脚本库中获取对应用户账号所对应的权限脚本，通过脚本解释器执行该权限脚本，根据权限脚本计算结果进行权限判定，判断对应用户账号是否满足各待核准数据的权限要求，并通过人机交互界面对满足权限要求的待核准数据进行展示；这种方式能够保证在用户的需求发生变化，如权限校验规则发生变化时，不需要重新编写代码，只需要根据用户的需求修改相应的权限脚本，不需要重新修改和发布程序，具有很高的通用性；另外，相较于传统的验证方法中设置金字塔式的权限等级的方式，本发明具有更高的细粒度，通过对权限脚本进行定义，本发明能够精细化到对单个账号进行权限定制，更加适应实际生产过程中的特别需求。S4、将一天标记为一个周期，并将一个周期划分为k个待考核时段，获取在一个周期中各待考核时段内各权限脚本被执行的次数z；将一个待考核时段标记为样本段，将一个权限脚本标记为样本脚本，获取样本脚本在连续的n个样本段中被执行的次数zi，其中1≤i≤n；将能够表示样本脚本在样本段中对应的n个zi值特征的数值标记特征值zz；获取样本脚本在n个样本段中被执行时，对应的用户账号的权限级别以及各权限级别的用户账号的数量be；根据公式计算得到样本脚本在过去的n个周期中在样本段中的执行系数G；其中αe为各权限级别的用户账号对应的预设权限系数，且用户账号的权限级别越高，其对应的预设权限系数越大，其中1≤e≤r；b为样本脚本在过去的n个样本段中对执行时，各权限级别的用户账号的总数；按照上述方法依次计算在过去的n个周期中，各权限脚本在各待考核时段中对应的执行系数G；其中，能够表示n个zi值的特征的数值zz可以为n个对应zi值的平均值、中位数，删除偏差较大值之后剩余数值的平均值等；在本发明的一个实施例中，样本脚本在样本段中的特征值zz的计算方法为：根据公式计算得到z1至zn这一组数据的离散系数F，当F≤F1时，则将zp作为对应的zz；当F＞F1时，则按照|zi-zp|从大到小的顺序依次删除对应的zi值，直至F≤F1成立，若删除的zi值的数量c满足c/n＞β成立，则将zp作为对应的zz，若满足c/n≤β成立，则将剩余未被删除的zi值的平均值作为对应的zz；其中F1为预设值，zp为z1至zn这一组数据的平均值，β为预设的比例系数，在本发明的一个实施例中，β取值为65%；S5、对于样本脚本，将其对应的执行系数G大于等于预设值G1的待考核时段标记为样本脚本的预编译时段；按照上述方法计算得到各权限脚本对应的预编译时段；当一个权限脚本进入其对应的预编译时段时，则通过预编译单元对对应的权限脚本进行预编译；当脚本解析器要执行对应的权限脚本时，通过预编译机制，可以快速执行权限脚本。经实际测试，在有5个验证条件的情况下，对1000条包含30个字段的数据进行数据权限验证，耗费时间约80毫秒。一般业务场景都会对数据进行分页，每页的数据一般在10到100条之间，所以本方法完全满足常规业务系统的时效要求；本发明通过对不同的权限脚本的执行在时间上的规律以及执行权限脚本的用户账号进行分析，并在预设的时间范围内对权限脚本进行预编译，因此在各用户账号在对应时段内执行该权限脚本时，能够快速执行，节省了验证时间，避免出现在权限脚本使用较为频繁的时候，出现权限验证过长，影响体验的问题。上述的一种工控互联网数据通用权限验证方法是通过权限验证系统运行的，如图1所示，该权限验证系统包括：权限定义单元，用于定义一套权限脚本，将数据的各级权限转变为对应的脚本；为方便理解，对于脚本包含的内容举例如下：能够对相同部门的三级及以下权限数据进行查看；能够对所在部门、人事部及保安部的三级及以下权限数据进行查看等；脚本库，用于对权限定义单元定义的权限脚本进行保存；标签库，用于对工控互联网数据与数据标签的对应关系以及用户账号与对照标签之间的对应关系进行存储；数据检索单元，用于对数据库中工控互联网数据进行检索；数据库，用于对工控互联网数据进行保存；脚本解释器，用于对权限脚本进行解释与执行，根据脚本规则，可以动态执行脚本，计算脚本的结果，根据计算结果对数据进行权限判定，实现权限精确控制。预编译单元，用于对脚本库中的权限脚本进行预编译，每个脚本只需要编译一次，便可多次执行，大大提高执行效率。在说明书的描述中，参考术语“一个实施例”、“示例”、“具体示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。以上内容仅仅是对本发明所作的举例和说明，所属本技术领域的技术人员对所描述的具体实施例做各种各样的修改或补充或采用类似的方式替代，只要不偏离发明或者超越本权利要求书所定义的范围，均应属于本发明的保护范围。
