标题title
氛围灯设备及其映射配色方法和相应的装置、介质
摘要abst
本申请涉及一种氛围灯设备及其映射配色方法和相应的装置、介质，所述方法包括：获取氛围灯设备的框体形状信息，框体形状信息将氛围灯设备中的各个发光单元表示为同一框体的各个边框上的基本像素；基于目标图像进行图像语义分割，确定目标图像中各个内容对象的图像内容和内容区域；将各个内容对象的内容区域分配到所述框体的各个边框，得到每个内容区域相映射的发光单元集；根据各个内容对象的图像内容确定各个内容对象的主色调，以各个内容对象的主色调对应控制各个内容对象相映射的发光单元集播放灯效。本申请能以内容对象为单位将图像的色彩氛围有效投射到线性排列的多个发光灯带，可在实体空间渲染出原图的光线氛围。
权利要求书clms
1.一种氛围灯设备映射配色方法，其特征在于，包括：获取氛围灯设备的框体形状信息，所述框体形状信息将所述氛围灯设备中的各个发光单元表示为有序排列在构成同一框体的各个边框上的基本像素；基于目标图像进行图像语义分割，确定所述目标图像中各个内容对象的图像内容和内容区域；以所述框体为所述目标图像的外框，将各个内容对象的内容区域分配到所述框体的各个边框，使所述框体的每个发光单元都与其中一个内容区域相对应，得到每个内容区域相映射的发光单元集；根据各个内容对象的图像内容确定各个内容对象的主色调，以各个内容对象的主色调对应控制各个内容对象相映射的发光单元集播放灯效。2.根据权利要求1所述的氛围灯设备映射配色方法，其特征在于，基于目标图像进行图像语义分割，确定所述目标图像中各个内容对象的图像内容和内容区域，包括：调用目标图像，采用目标检测模型对所述目标图像进行目标检测，得到至少一个内容对象相对应的窗口位置信息；根据各个内容对象的窗口位置信息从所述目标图像中提取出相应区域的区域图像；采用图像默认分割模型确定每个区域图像的内容对象相对于该区域图像的区域掩膜，所述区域掩膜包含相应的内容对象在该区域图像中的内容区域；将各个内容对象的区域掩膜转换为相应的全图掩膜，所述全图掩膜按照目标图像的尺寸规格表示出相应的内容对象的内容区域。3.根据权利要求1所述的氛围灯设备映射配色方法，其特征在于，基于目标图像进行图像语义分割，确定所述目标图像中各个内容对象的图像内容和内容区域，包括：调用目标图像及分割提示信息，所述分割提示信息用于指示所述目标图像中的内容对象的分割识别规则；采用图像提示分割模型基于所述分割提示信息的分割识别规则检测出所述目标图像中的各个内容对象相对应的全图掩膜，所述全图掩膜按照目标图像的尺寸规格表示出相应的内容对象的内容区域。4.根据权利要求3所述的氛围灯设备映射配色方法，其特征在于，调用目标图像及分割提示信息之前，包括：根据所述目标图像的尺寸规格确定界面画布，将界面画布显示在图形用户界面；接收基于所述界面画布指定的至少一个识别位置，确定所述识别位置相对于所述目标图像的位置信息；将各个所述识别位置的位置信息构造为分割识别规则，将该分割识别规则存储为分割提示信息。5.根据权利要求1至4中任意一项所述的氛围灯设备映射配色方法，其特征在于，以所述框体为所述目标图像的外框，将各个内容对象的内容区域分配到所述框体的各个边框，使所述框体的每个发光单元都与其中一个内容区域相对应，得到每个内容区域相映射的发光单元集，包括：根据框体形状信息确定所述框体中各个发光单元的位置信息与该框体的各个边框的隶属关系；计算每个内容对象的内容区域到达所述框体的各个边框的距离，确定距离最小的边框为该内容区域相对应的目标边框，以及将该内容区域投影到该目标边框时的投影尺寸；按照每个目标边框相对应的全部内容区域的投影尺寸的比例关系，为所述相对应的全部内容区域中的各个内容区域分配该目标边框的发光单元总量，得到每个内容区域相映射的发光单元集。6.根据权利要求1至4中任意一项所述的氛围灯设备映射配色方法，其特征在于，根据各个内容对象的图像内容确定各个内容对象的主色调，以各个内容对象的主色调对应控制各个内容对象相映射的发光单元集播放灯效，包括：获取氛围灯设备相对应的灯效描述模板，所述灯效描述模板包含该氛围灯设备中各个发光单元相对应的色值属性项；根据每个内容对象的图像内容确定该内容对象的主色调的图像颜色值，为该内容对象相映射的发光单元集中的各个发光单元的所述色值属性项赋值，从而将该图像颜色值设定为该色值属性项中的发光颜色值；将设定了氛围灯设备中的各个发光单元的发光颜色值的灯效描述模板转换为灯效播放指令，控制所述各个发光单元协同播放所述目标图像相对应的灯效。7.根据权利要求6所述的氛围灯设备映射配色方法，其特征在于，根据每个内容对象的图像内容确定该内容对象的主色调的图像颜色值，包括：将每个内容对象的图像内容输入预设的情绪分类模型中，推理确定该图像内容所传达的情绪属性；根据各个内容对象的情绪属性确定其相对应的主色调，以及确定该主色调相对应的图像颜色值。8.一种氛围灯设备映射配色装置，其特征在于，包括：框体确定模块，设置为获取氛围灯设备的框体形状信息，所述框体形状信息将所述氛围灯设备中的各个发光单元表示为有序排列在构成同一框体的各个边框上的基本像素；图像分割模块，设置为基于目标图像进行图像语义分割，确定所述目标图像中各个内容对象的图像内容和内容区域；分配映射模块，设置为以所述框体为所述目标图像的外框，将各个内容对象的内容区域分配到所述框体的各个边框，使所述框体的每个发光单元都与其中一个内容区域相对应，得到每个内容区域相映射的发光单元集；灯效播放模块，设置为根据各个内容对象的图像内容确定各个内容对象的主色调，以各个内容对象的主色调对应控制各个内容对象相映射的发光单元集播放灯效。9.一种氛围灯设备，包括中央处理器和存储器，其特征在于，所述中央处理器用于调用运行存储于所述存储器中的计算机程序以执行如权利要求1至7中任意一项所述的方法的步骤。10.一种非易失性可读存储介质，其特征在于，其以计算机可读指令的形式存储有计算机程序，所述计算机程序被计算机调用运行时，执行如权利要求1至7中任意一项所述的方法的步骤。
说明书desc
技术领域本申请涉及照明控制领域，尤其涉及一种氛围灯设备及其映射配色方法和相应的装置、介质。背景技术氛围灯设备作为智能灯具的一种，可以起到装饰室内空间效果、展示信息的作用。随着人们经济水平的提升，氛围灯设备越来越普及。氛围灯设备的功能之一，是根据指定的环境的光线效果，来生成与该光线效果相呼应的灯光效果，起到加强环境氛围的作用。例如，可以根据游戏或视频的显示画面的光线来生成相应的灯光效果，或者根据某个指定的物理空间环境的实拍图像中的光线生成相应的灯光效果等。总之，氛围灯设备可以各种图像作为环境参照图像，用来生成相应的灯光效果。根据环境参照图像生成相应的灯光效果的关键，在于将客观存在于环境参照图像中的色彩分布准确投射到氛围灯设备的显示画幅中，氛围灯设备的显示画幅是由大量的发光单元布局形成的，对此，传统技术中，常采用相同的分区方式将环境参照图像与显示画幅进行对应分割，分别分割出具有相同布局的多个区域图像，再将每个区域图像相应的色彩投射到显示画幅的相应区域的发光单元中显示，由此呈现灯效。氛围灯设备中的一种，将其中的氛围灯装配成边框灯形态，即整个氛围灯由分布在多条边框上的发光单元构成，对于这种形态的氛围灯来说，由于发光单元分布在周边，如果仍然按照机械分区方式进行简单对应，会导致氛围灯无法有效反映图像的色彩分布，也就无法真正起到渲染氛围的作用。概括而言，对于边框灯形态的氛围灯设备来说，按照传统技术对原图进行机械分区映射无法有效地表现环境参照图像的光线氛围，需要对技术进行更新换代。发明内容本申请的目的在于提供一种氛围灯设备及其映射配色方法和相应的装置、介质。根据本申请的一个方面，提供一种氛围灯设备映射配色方法，包括：获取氛围灯设备的框体形状信息，所述框体形状信息将所述氛围灯设备中的各个发光单元表示为有序排列在构成同一框体的各个边框上的基本像素；基于目标图像进行图像语义分割，确定所述目标图像中各个内容对象的图像内容和内容区域；以所述框体为所述目标图像的外框，将各个内容对象的内容区域分配到所述框体的各个边框，使所述框体的每个发光单元都与其中一个内容区域相对应，得到每个内容区域相映射的发光单元集；根据各个内容对象的图像内容确定各个内容对象的主色调，以各个内容对象的主色调对应控制各个内容对象相映射的发光单元集播放灯效。根据本申请的另一方面，提供一种氛围灯设备映射配色装置，包括：框体确定模块，设置为获取氛围灯设备的框体形状信息，所述框体形状信息将所述氛围灯设备中的各个发光单元表示为有序排列在构成同一框体的各个边框上的基本像素；图像分割模块，设置为基于目标图像进行图像语义分割，确定所述目标图像中各个内容对象的图像内容和内容区域；分配映射模块，设置为以所述框体为所述目标图像的外框，将各个内容对象的内容区域分配到所述框体的各个边框，使所述框体的每个发光单元都与其中一个内容区域相对应，得到每个内容区域相映射的发光单元集；灯效播放模块，设置为根据各个内容对象的图像内容确定各个内容对象的主色调，以各个内容对象的主色调对应控制各个内容对象相映射的发光单元集播放灯效。根据本申请的另一方面，提供一种氛围灯设备，包括中央处理器和存储器，所述中央处理器用于调用运行存储于所述存储器中的计算机程序以执行所述氛围灯设备映射配色方法的步骤。根据本申请的另一方面，提供一种非易失性可读存储介质，其以计算机可读指令的形式存储有依据所述的氛围灯设备映射配色方法所实现的计算机程序，所述计算机程序被计算机调用运行时，执行该方法所包括的步骤。相对于现有技术，本申请具有多方面优势，包括但不限于：首先，本申请针对边框灯形态的氛围灯设备，在获得其框体形状信息之后，从目标图像中检测出各个内容对象的内容区域及其图像内容，将各个内容对象的内容区域投影到该框体形状信息所定义的框体的各个边框中，使每个内容对象都有其座落在其中一个边框上的发光单元集，实现将框体中的全部发光单元分配给各个内容对象对应使用，以此为基础，根据各个内容对象的图像内容的主色调控制氛围灯设备中与该内容对象相对应的发光单元集中的各个发光单元发射相应颜色的光线，使氛围灯设备的整个框体能够分区显示目标图像中的各个内容对象的主色调相对应的灯效，将各个内容对象的主色调摊分到整个框体中渲染光线氛围，由此，氛围灯设备能够更为准确地对应各个内容对象的主体颜色塑造相应的色彩氛围感，从而提升灯效对目标图像的光线氛围的仿真度。其次，本申请以内容对象的内容区域与边框的投影关系，确定内容对象相映射的发光单元集，而不是以规则矩形区域作为分区映射依据，使目标图像中各个内容对象的色彩氛围能够有效地迁移到边框灯形态的氛围灯设备中，而不是机械地截取目标图像的边缘图像信息来确定边框灯中各个发光单元的色彩，所以，能使边框灯形态的氛围灯设备模拟目标图像的光线氛围时获得更为接近原图光线氛围的效果。此外，根据本申请实现的氛围灯设备，由于其对照目标图像所塑造的光线氛围更为真实有效，所以，当将氛围灯设备以终端设备的桌面图像为目标图像，对照该目标图像播放相应的灯效时，在氛围灯设备的光线氛围的渲染下，能够将桌面图像的画面氛围有效延展到实体空间中，从而增强终端设备使用者的沉浸感。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例中的氛围灯设备的电气结构的原理示意图；图2为本申请实施例中的氛围灯设备布局形成的框体的示意图；图3为本申请实施例中的氛围灯设备映射配色方法的流程示意图；图4为本申请示例性的目标图像；图5是图4中的各个内容对象与框体中各个发光单元集之间的对应关系示意图；图6为示例性的图形用户界面，其中展示界面画布及用于添加识别位置的相关功能设定按键；图7为本申请实施例中的氛围灯设备映射配色装置的结构示意图；图8为本申请实施例中的计算机设备的结构示意图。具体实施方式请参阅图1，本申请一种实施例提供的一种氛围灯设备的结构示意图中可以看出，所述氛围灯设备包括控制器1、氛围灯2，以及图像获取接口，氛围灯2与控制器1电性连接，以便接受控制器1中运行的计算机程序的控制协同工作，实现灯效播放。控制器1通常包括控制芯片、通信组件以及总线接头，在一些实施例中，控制器1还可以按需配置电源适配器、控制面板、显示屏等。电源适配器主要用于将市电转换为直流电，以便为整个氛围灯设备供电。控制芯片可采用各种嵌入式芯片实现，例如蓝牙SoC、WiFi SoC、MCU 、DSP等各种类型的芯片，控制芯片通常包括中央处理器和存储器，存储器和中央处理器分别用于存储和执行程序指令，以实现相应的功能。以上各种类型的控制芯片，可以自带通信组件，也可按需额外配置通信组件。通信组件可以用于与外部设备通信，例如，可以与个人计算机或各种智能手机之类的终端设备通信，以便用户通过其终端设备下达各种配置指令之后，控制器1的控制芯片可以通过通信组件接收配置指令，完成基础配置，以便控制氛围灯工作。此外，控制器1还可以通过通信组件获取终端设备的界面图像，或者获取摄像头采集的实时预览图像。总线接头主要用于为接入总线的氛围灯2接入电源并提供灯效播放指令，因而对应提供电源总线和信号总线相对应的针脚，由此，当氛围灯2需要接入控制器1时，通过氛围灯相应的接头与所述总线接头连接即可。控制面板通常提供一个或多个按键，用于对控制器1实施开关控制、选择各种预设的灯效控制方式等等。显示屏可用于显示各种控制信息，以便与所述控制面板中的按键相配合，支持人机交互功能的实现。一些实施例中，控制面板与所述显示屏可以集成到同一触控显示屏中。请结合图2，图2中的氛围灯被布局在终端设备的显示器的四周而成为边框灯的样态，边框灯可以由连接在总线上的单条或多条发光灯带围设而成。每条发光灯带21都包括多个串接而成的灯珠210，每个灯珠210作为一个发光单元。在布局成边框灯时，可以按照一个几何框体4，将全部灯带沿该几何框体4的边框布设，例如，可以如图2所示，将全部发光灯带21围设成一个四边形，该四边形可以刚好沿显示器四周布设，以便用来根据显示器中显示的桌面图像播放相应的灯效，当播放灯效时，便可以在该显示器的范围内外散射出一定的光线氛围效果。每个发光灯带21可由多个灯珠210串接而成，每个灯珠210是一个发光单元，同一发光灯带21中的各个灯珠210由接入总线的同一组线缆传输工作电流，同一发光灯带21的各个灯珠210之间，在电性连接关系上，可以采用并联的方式进行连接。氛围灯设备的控制器1，用于实现对整个氛围灯设备的工作控制，并且负责整个氛围灯设备内外的通信，其中，控制器1还负责驱动图像获取接口工作，通过图像获取接口逐帧采集环境参照图像，环境参照图像可以是终端设备的界面图像或者实体空间的实景图像，再根据各帧环境参照图像生成相应帧的灯效播放指令，通过灯效播放指令控制窗帘灯播放相应帧的灯效。氛围灯2的每条发光灯带21的每个灯珠210中，也设置有相应的控制芯片，该控制芯片可以按照前文所揭示进行选型，或者选取其它更为经济的控制芯片，其作用主要在于能够从灯效播放指令中提取出与本灯珠210相对应的发光颜色值，控制本灯珠210内的发光元件发出相应的色光。发光元件可以是LED灯。图像获取接口既可以是硬件接口，也可以是实现于控制器1中的软件接口。当为硬件接口时，图像获取接口可以实现为摄像头3，由控制器1加载相应的驱动程序驱动摄像头3工作，当将摄像头3对准目标画面时，例如对准终端设备的显示桌面，或者将摄像头3对准实体空间环境，按照一定的帧率采集图像，便可采集到界面图像。当为软件接口时，图像获取接口可以是借助终端设备的操作系统所提供的图形基础结构技术而在控制器1侧实现的图像获取程序，控制器1通过各种线缆例如HDMI、Type-C连接线与终端设备相连接，便可在该图形基础结构技术的支持下，持续获得终端设备的界面图像；当然，如果控制器1与终端设备中预先建立无线投屏协议，控制器1也可以通过无线通信的方式，获取终端设备的界面图像。操作系统的图形基础结构技术，视操作系统类型不同而不同，示例而言，Windows操作系统中，提供了相应的技术，即：Microsoft DirectX Graphics Infrastructure，简称DXGI，便可实现此一功能。由此可见，图像获取接口负责采集环境参照图像时，其采集图像的具体环境可由用户灵活设定，例如，当图像获取接口为摄像头3时，用户可以将摄像头3对准计算机的图形用户界面进行拍摄以采集相应的界面图像作为目标图像用来播放灯效，使氛围灯2可以根据界面图像生成相应的灯效；用户也可以将摄像头3对准实体空间环境例如户外环境，摄录实景图像作为环境参照图像，使氛围灯2可以根据实景播放相应的灯效。本申请的氛围灯设备，当其上电时，控制器的控制芯片可以从存储器中调用执行计算机程序，通过该计算机程序默认的初始化流程，为氛围灯上电并实现初始化，完成对氛围灯和其他硬件设备的驱动配置。一种实施例中，控制器在启动氛围灯时，可以先向氛围灯发送自检指令，驱动氛围灯的各个发光灯带或灯块中的各个灯珠返回其在发光灯带或灯块中的位置信息。每个灯珠都设置有相应的控制芯片用于与控制器中的控制芯片进行数据通信，因而可以按照串行通信协议，将灯珠自身的特征信息与其他灯珠的特征信息按序串接，实现对自身的位置信息的表征。控制器与灯珠之间执行的串行通信协议，可以是IIC、SPI、UART中任意一项。控制器从总线获得各个灯珠自检返回的结果数据后，对其进行解析，根据每个灯珠的特征信息在结果数据中的排序，便可确定各个灯珠在整个氛围灯所布局的框体4中的位置，由此可以将每个灯珠作为一个发光单元，可以理解为一个基本像素，后续控制器在构造灯效播放指令时，可以根据各个灯珠的位置信息，按照实际需要，为每个基本像素设置其相应的发光颜色值。控制器在完成初始化后，便可通过图像获取接口持续获取环境参照图像作为目标图像，对目标图像进行取色，以确定其框体4中各个发光单元的发光颜色值。为此，可以根据本申请的方法识别出目标图像中的各个内容对象，再根据各个内容对象的图像内容确定主色调，根据每个内容对象的主色调确定相应的图像颜色值，再根据该图像颜色值生成该内容对象在框体内相应的各个发光单元的发光颜色值。一些实施例中，本申请的控制器1可以在独立的计算机设备中实现，只要该计算机设备配备控制器1相应的硬件，以及将控制器1相应的业务逻辑包括本申请的方法所执行的业务逻辑，实现为计算机程序安装在该计算机设备中运行即可。当控制器1在计算机设备中实现时，可以共用计算机设备固有的各种资源例如摄像头3以便读取摄像头3所采集的实时预览图像作为环境参照图像，或者简化业务逻辑，例如可通过计算机的图形开放库读取界面图像作为环境参照图像等，可以节省整体实现成本。此处所称的计算机设备，可以是任意供用户使用的终端设备，例如智能手机、个人计算机、笔记本电脑，平板电脑等。根据以上氛围灯设备的产品架构和工作原理，本申请的氛围灯设备映射配色方法，可以实现为计算机程序产品，存储于氛围灯设备的控制器的存储器中，由中央处理器从该存储器中调用后运行，在运行时根据图像获取接口所采集的环境参照图像以确定目标图像，从而控制氛围灯播放相应的灯效。请参阅图3，在一个实施例中，本申请的氛围灯设备映射配色方法，主要实现在氛围灯设备的控制器一侧，由控制器的控制芯片负责执行，包括：步骤S5100、获取氛围灯设备的框体形状信息，所述框体形状信息将所述氛围灯设备中的各个发光单元表示为有序排列在构成同一框体的各个边框上的基本像素；本申请的氛围灯设备中的氛围灯，在实际使用时，会被围设成一个特定的框体形状，通常是围设成长方形框体，当然，也可以围设成其它形状的框体，例如长方形框体、六边形框体等，只需按照实际需要，将氛围灯的各条发光灯带按照特定形状的框体要求进行铺设即可。由此铺设而成的框体，由相应的多个边框构成，每个边框都有属于该边框的多个发光单元。如图2所示的框体是一个长方形框体，相应的，由四个边框构成。框体中的全部边框所占用的发光灯带，可以属于一整条发光灯带，也可以是多条发光灯带共同组成的，只要控制器能集中识别每条发光灯带中的发光单元在整个框体中的位置信息，控制器便能对各个位置的发光单元实施有效控制。框体中的各个边框，即可以是铺设在平面中，也可以铺设在曲面中，或者从一个面沿伸铺设至其他的面。具体可视实际效果需求，由用户自行灵活铺设。控制器与发光灯带之间借助串行通信协议进行数据通信，因此，控制器一侧，可以事先存储或通过检测确定氛围灯设备的布局配置信息，布局配置信息通常包括各条发光灯带及其中的各个发光单元在数据通信链路中的位置信息，该位置信息表示出每个发光单元在数据通信链路中的顺序，当控制器向整个框体发送指令或数据时，可以按照串行通信协议，按照各个发光单元的顺序，封装各个发光单元相应的指令或数据，当将指令或数据发送到氛围灯中时，各个发光单元按序调用自身相对应的指令或数据即可，反之各个发光单元向控制器报告自身的位置时亦是同理。氛围灯出厂时，或者至少在用户在铺设氛围灯的框体时，事先已经知晓框体的形态，也即知晓各个边框的长度以及其中的发光单元数量，因而，在控制器一侧，布局配置信息还可以与各个边框的发光单元数量相结合，构成框体形状信息。由此，框体形状信息实际上不仅包括构成框体的各个边框的发光单元数量的描述，也包括各个发光单元在相应边框中的位置信息的描述。通过框体形状信息，便将氛围灯设备中的各个发光单元表示成了有序排列在同一框体的各个边框上的基本像素。在这个意义上，框体可以视为一个中部镂空的显示画幅。本申请将目标图像的灯效投射到框体，实际上也就是将灯效投身到这个显示画幅。由于框体上的发光单元通常是等距设置的，所以，根据框体形状信息确定框体的各个边框的发光单元数量，也就相当于确定了各个边框的长度，进一步便可以确定边框比例，对于长方形框体来说，也就是其画幅比例。根据这个画幅比例，可以方便地与目标图像进行缩放对应。步骤S5200、基于目标图像进行图像语义分割，确定所述目标图像中各个内容对象的图像内容和内容区域；为了实现按照目标图像中的内容对象的主色调投射到氛围灯中，需要先对目标图像实施图像语义分割，以便确定其中的内容对象的图像内容和内容区域。目标图像，用来作为氛围灯设备所播放的灯效的色彩氛围的参照对象，故其本质是一种环境参照图像。环境参照图像的来源，既可以是摄像头3实拍获得的，也可以是从缓存或显存中调用的，也可以是直接从图像文件中读取的，还可以是经过有线或无线传输接收的。示例而言，环境参照图像既可以是摄像头3拍摄的实景图像，也可以是终端设备的界面图像，界面图像既可以是摄像头3拍摄采集的，也可以是在终端设备中读取或截图后传输的。目标图像一般表示为位图数据，以方便读取其中各个像素的颜色值，其颜色值的表示形式，根据目标图像的格式不同，可以有不同的表示方式，例如RGB、YUV等不同格式表示颜色值的方式各有不同，本领域技术人员可以适应这些不同格式做相应的表示处理，恕不赘述。目标图像中通常包含有各种内容对象例如各种物体、各种图案等，每个内容对象的形状可能都不相同，并且因为内容对象所展示的角度、周遭的光线不同等等原因，使得不同目标图像中即使是相同内容对象，在目标图像中所体现的面积、位置、色彩等也都可能不同。所以针对每个目标图像，当需要确定各个内容对象的内容区域，即包含构成该内容对象的全部像素所占据的区域。一种实施例中，考虑到氛围灯设备根据连续多个目标图像播放相应的灯效时，各个目标图像可能出自同一图像流，相邻两个目标图像之间可能是同一视频内容的两个图像帧，而且这两个图像帧之间的图像内容变动较小，针对这种情况，可以基于当前的目标图像计算其与在先的目标图像之间的帧差信息，当帧差信息中呈现的变动幅度小于预设阈值时，可以沿用在先的目标图像相对应的内容区域，否则才对当前的目标图像重新确定其中各个内容对象的内容区域。确定目标图像中的各个内容对象的内容区域的方式可以有多种，例如：一些实施例中，可以基于传统的边界检测算法，例如Sobel、Prewitt、Roberts、Canny、Marr-Hildreth等算法，在对目标图像进行二值化处理得到其相应的灰度图的基础上，应用选定的算法，确定出其中的各个内容对象的轮廓相对应的内容区域。另一些实施例中，可以基于经过预先训练的深度学习模型，包括传统的非提示型的图像分割模型或者基于具有图像交互处理能力的提示型的图像分割模型，根据目标图像的深层语义进行图像语义分割，得到相应的内容区域。在进一步增强的一些实施例中，在确定各个内容对象的内容区域之前，可以先借助目标检测模型对目标图像进行目标检测，检测出一个或多个目标作为内容对象的区域图像之后，再将各个内容对象的区域图像陆续输入图像分割模型中实施图像语义分割，相继得到各个内容对象的内容区域。根据目标图像得到的内容区域，可以预先通过算法规定或者借助深度学习模型的技术架构提供的能力，表示为各种方便解析调用的数据格式，例如表示为硬掩膜或软掩膜形式的图像，得到相应的区域掩膜或全图掩膜。软掩膜通过数值区间的任意值来表示目标图像中的像素属于前景的概率，硬掩膜则可通过0或1指示目标图像中某个像素是否属于背景或前景。由此不难理解，目标图像中内容对象的内容区域，在定义出该内容对象的轮廓的同时，也定义出该轮廓所限定的封闭区域内的像素的集合，通过提取出像素集合，便可得到内容对象的图像内容。在一些实施例中，针对每个内容对象，可以先在确定了其区域图像的基础上再确定其相应的区域掩膜。区域掩膜只是对应单个内容对象的区域图像表示出该内容对象的内容区域，所以，为了方便与目标图像相对应，还可以进一步将每个内容对象的区域掩膜按照目标图像的尺寸规格转换成全图掩膜。全图掩膜可以是对应每个内容对象相对于目标图像的内容区域独立设定的，也可以是适应同时表示出多个内容对象的内容区域而设定的，以便在这样的全图掩膜中同时表示出多个内容对象相对于目标图像的内容区域，具体可按需灵活实施。当借助包含有多个内容对象的全图掩膜来确定各个内容对象的内容区域时，可通过全图掩膜进行连通域计算找到相同连通域内的前景像素或背景像素，将属于相同连通域的图像内容，这个图像内容也就是这个相同连通域相对应的内容对象的图像内容。可见，在这个步骤中，由于已经检测出目标图像中各个内容对象的内容区域，进而提取出内容区域中的全部像素构成图像内容，将内容对象与其图像内容建立映射关系，以便快速调用。考虑到在目标图像的画幅中面积占比较小的内容对象对灯效起到的视觉效果影响不大，有时甚至可能因为其色调与周边的其他内容对象的色调之间差异过大导致在灯效中出现突兀的效果，为了解决这一问题，在一些实施例中，可以先根据内容对象的内容区域计算出其像素总数相对于整个目标图像的画幅的像素总数的占比，将占比低于预设阈值的内容对象的内容区域，与其周边的任意一个内容对象的内容区域进行融合，使两个内容对象的内容区域合并为同一个内容区域，将这两个内容对象视为同一内容对象处理。对于属于目标图像中的背景的内容来说，在本申请中，既可以将全部背景视为同一内容对象看待进行相应的处理，也可以丢充不予处理，本领域技术人员可根据实际需要灵活确定。步骤S5300、以所述框体为所述目标图像的外框，将各个内容对象的内容区域分配到所述框体的各个边框，使所述框体的每个发光单元都与其中一个内容区域相对应，得到每个内容区域相映射的发光单元集；为了方便将目标图像中的各个内容对象的主色调投射到框体的各个边框上，通常先建立起目标图像的各条侧边与框体的各个边框之间的一一对应关系，以便将框体视为目标图像的外框进行后续的投射。在框体默认为长方形框体的情况下，刚好对应目标图像的四条侧边，这种情况下两者对应关系明确清晰，无需额外处理。在一些实施例中，当框体为其他形状例如五边形或六边形时，可以对根据框体形状信息，构造出一个虚拟框体，将该虚拟框体缩放到与目标图像大致相当的尺寸，对目标图像进行相应的裁剪，使目标图像更便于与氛围灯所构造的框体实现边与边的一一对应。由于目标图像的图像边与氛围灯的框体的边框一一对应，所以，可以根据一定的预设规则，将目标图像中的各个内容对象的内容区域分配投影到框体的各个边框上，建立起内容对象与边框以及边框中的发光单元之间的映射关系。例如，可以根据就近原则，将每个内容区域投影到离其几何中心最近的边框的发光单元上，或者，根据占比分配原则，将照各内容区域的区域面积之间的比例，将框体中全部发光单元按照该比例关系分配给各个内容区域进行对应，再根据每个内容区域所对应的发光单元确定相应的边框是落在一个还是多个上。在一个实施例中，还可以将整个框体视为一个显示画幅，沿该显示画幅的四周划分出多个单元画幅，然后，根据内容区域与各个单元画幅在平面上的投影重合关系，将内容区域与其所属的单元画幅所涵盖的各个发光单元相对应映射，由此获得各个内容区域相对应的发光单元集。这种情况下，一个内容区域的发光单元集可能分布在相邻接的两个边框上。此外的一个实施例中，还可以将整个框体的全部发光单元视为一条线，同样按照占比分配原则，按照各个内容区域的区域面积之间的比例，为各个内容区域分配整条线上的发光单元，由此确定每个内容区域相映射的发光单元集。同理，一个内容区域的发光单元集也可能分布在相邻接的两个边框上。总之，根据一定的预设规则，可以将目标图像中的各个内容对象的内容区域映射到框体的一个或多个边框上，对应涵盖一个或多个发光单元，这些被涵盖的发光单元便构成与该内容区域相映射的发光单元集。根据这种映射关系也不难理解，每个发光单元只对应一个内容对象的内容区域，而每个内容区域则通常对应涵盖一个或多个发光单元。请参阅图4和图5的示例。图4是本申请示例性的目标图像，图5是对图4中的目标图像进行图像语义分割得到的分割结果也即各个内容对象及其与氛围灯中发光单元集的映射关系的示意图，图5中A、B、C、D、E分别代表各个内容对象的图像内容，其中也示出了各个图像内容到边框灯样态的氛围灯中的各个发光单元集合的映射关系，可以看出，各种形态的氛围灯，都能够为各个内容对象与相应的发光单元集建立对应映射关系。在更具体的实施例中，为便于调用各个发光单元集，可以将每个发光单元集中各个发光单元存储于同一数组中，然后将这个数组与相应的内容对象建立映射关系即可。步骤S5400、根据各个内容对象的图像内容确定各个内容对象的主色调，以各个内容对象的主色调对应控制各个内容对象相映射的发光单元集播放灯效。作为实现灯效投射的基础，需要根据各个内容对象的图像内容确定各个内容对象的主色调，采用一个相应的图像颜色值进行对应表示。可根据各个内容对象的图像内容来确定各个内容对象的主色调以及其相应的图像颜色值，例如：在一些实施例中，可以根据每个内容对象的内容区域，在目标图像中提取出由该内容区域界定的轮廓范围内的各个像素，得到相应的图像内容，然后根据这个图像内容的各个像素的颜色值来确定相应的主色调的图像颜色值。另一些实施例中，当借助深度学习模型得到内容区域时，利用深度学习模型事先实现的功能，可以直接得到深度学习模型根据掩膜对目标图像进行图像分割后相对应的图像集，这个图像集中包含了各个内容对象相对应的图像内容。针对这种情况，可以直接调用该图像集中的各个内容对象相对应的图像内容，通过其中的各个像素的颜色值来确定相应的主色调的图像颜色值。根据每个内容对象的图像内容确定其图像颜色值时，可以进一步结合各种优化方式来实施，例如：在一些实施例中，根据每个内容对象的图像内容确定其主色调的图像颜色值时，可以先过滤该图像内容中颜色值低于预设阈值的像素，再根据保留下来的有效像素确定主色调的图像颜色值。该预设阈值可以用来衡量像素的明暗度，例如，对于RGB格式而言，对应三原色预设的阈值为RGB，较为接近黑色，当图像内容中的某个像素低于这个阈值时，可以将其过滤掉，由此，将最后保留的有效像素用来确定相应的主色调的图像颜色值后，降低黑色对主色调的影响，使所确定的主色调能保持较高的明亮度，确保灯效能以较高的明亮度呈现。在一些实施例中，根据每个内容对象的图像内容确定其主色调的图像颜色值时，可以将图像内容中全部像素或者全部前文揭示的有效像素进行简单算术平均，得到相应的均值，将该均值作为主色调相对应的图像颜色值。按照这种方式，可以节约运算量，对于嵌入式控制芯片来说，具有计算上的成本优势。在另一些实施例中，根据每个内容对象的图像内容确定其主色调的图像颜色值时，可以先在图像内容中确定出一个预设面积的中心区域，以该中心区域的全部像素或者全部有效像素确定中心色调相对应的图像颜色值，以该中心区域之外的其他全部像素或者其他全部有效像素确定周边色调相对应的图像颜色值，具体的确定方式可以是求各自的算术平均值即可，然后，再按照预设的比例为中心色调和周边色调匹配权重，例如将中心色调与周边色调的权重比例设置为6：4，按照这个比例求出中心色调的图像颜色值和周边色调的图像颜色值之间的算术平均值，作为该内容对象的主色调的图像颜色值使用。按照这种方式确定主色调的图像颜色值，可以放大内容对象的中央区域的色调的作用，符合人眼视觉习惯，更能保持灯效与目标图像之间关于色彩氛围的感知的对应性。内容对象的发光单元集、图像内容之间均已事先建立了映射关系，因此，确定各个内容对象的主色调的图像颜色值后，便可用来设定各个内容对象相对应的发光单元集中的各个发光单元的发光颜色值。通常，直接将每个内容对象的主色调的图像颜色值设定为该内容对象相应的发光单元集中的各个发光单元的发光颜色值即可。按照这种方式，可以对应各个内容对象，都设定相应的发光单元集中的发光单元的发光颜色值，藉此实现对氛围灯设备中的全部各个发光单元的发光颜色值的设定，构成与目标图像相对应的一帧灯效的发光单元控制数据。适应播放灯效的需要，将对应目标图像为氛围灯设备的整个框体中的各个发光单元相对应设定的控制数据，封装成相应的灯效播放指令，传输至氛围灯，氛围灯的发光单元中的各个控制芯片便可根据预设的业务逻辑，解析该灯效播放指令，提取出其中的控制数据，根据控制数据与发光单元的对应性，利用对应的控制数据中的发光颜色值，控制相应的发光单元按照相应色调的发光颜色值发射相应的光线。在氛围灯中全部发光单元发射的光线的协同配合下，便呈现与目标图像的色彩氛围相对应的灯效。根据以上实施例可知，相对于现有技术，本申请具有多方面优势，包括但不限于：首先，本申请针对边框灯形态的氛围灯设备，在获得其框体形状信息之后，从目标图像中检测出各个内容对象的内容区域及其图像内容，将各个内容对象的内容区域投影到该框体形状信息所定义的框体的各个边框中，使每个内容对象都有其座落在其中一个边框上的发光单元集，实现将框体中的全部发光单元分配给各个内容对象对应使用，以此为基础，根据各个内容对象的图像内容的主色调控制氛围灯设备中与该内容对象相对应的发光单元集中的各个发光单元发射相应颜色的光线，使氛围灯设备的整个框体能够分区显示目标图像中的各个内容对象的主色调相对应的灯效，将各个内容对象的主色调摊分到整个框体中渲染光线氛围，由此，氛围灯设备能够更为准确地对应各个内容对象的主体颜色塑造相应的色彩氛围感，从而提升灯效对目标图像的光线氛围的仿真度。其次，本申请以内容对象的内容区域与边框的投影关系，确定内容对象相映射的发光单元集，而不是以规则矩形区域作为分区映射依据，使目标图像中各个内容对象的色彩氛围能够有效地迁移到边框灯形态的氛围灯设备中，而不是机械地截取目标图像的边缘图像信息来确定边框灯中各个发光单元的色彩，所以，能使边框灯形态的氛围灯设备模拟目标图像的光线氛围时获得更为接近原图光线氛围的效果。此外，根据本申请实现的氛围灯设备，由于其对照目标图像所塑造的光线氛围更为真实有效，所以，当将氛围灯设备以终端设备的桌面图像为目标图像，对照该目标图像播放相应的灯效时，在氛围灯设备的光线氛围的渲染下，能够将桌面图像的画面氛围有效延展到实体空间中，从而增强终端设备使用者的沉浸感。在本申请的方法的任意实施例的基础上，基于目标图像进行图像语义分割，确定所述目标图像中各个内容对象的图像内容和内容区域，包括：步骤S5111、调用目标图像，采用目标检测模型对所述目标图像进行目标检测，得到至少一个内容对象相对应的窗口位置信息；氛围灯设备在播放灯效时，通常会播放多帧目标图像，这些目标图像可以是一个图像帧序列中的各个图像帧，由此，按照一定的规则，从图像帧序列中陆续调用各个图像帧作为目标图像，便可根据各个目标图像控制氛围灯播放相应的灯效。图像帧序列中的各个图像帧，可以是对视频流进行解码得到的。例如，控制器接收摄像头3实录的视频后，便可以从将该视频的各个图像帧存储到图像帧序列中有序调用作为目标图像。同理，控制器以视频流的方式接收按照一定帧率采集的终端设备的界面图像之后，也可对该视频流解码得到相应的各个图像帧存储到图像帧序列中有序调用作为目标图像。为了初步确定目标图像中的内容对象，可以借助一个事先训练至收敛的目标检测模型，例如Yolo系列模型、EfficientDet模型、Faster R-CNN模型等等可行的模型，对目标图像进行目标检测，确定出其中的各个内容对象相对应的窗口位置信息。步骤S5112、根据各个内容对象的窗口位置信息从所述目标图像中提取出相应区域的区域图像；目标检测模型所输出的窗口位置信息，通常以窗口的两个角坐标的坐标信息进行表示，由此便可通过窗口位置信息在目标图像中定位出相应的内容对象的区域图像。根据目标检测模型针对目标图像确定的各个窗口位置信息，对应从目标图像中提取出各个窗口相对应的区域图像，每个区域图像便包含有一个相应的内容对象的图像内容。步骤S5113、采用图像默认分割模型确定每个区域图像的内容对象相对于该区域图像的区域掩膜，所述区域掩膜包含相应的内容对象在该区域图像中的内容区域；本实施例中用于检测内容区域的深度学习模型可以是经过事先训练达到收敛状态的图像默认分割模型，属于非提示型的图像分割模型，例如，U-Net系列各种模型、Deeplab系列各种模型均可。此类模型均可基于输入其中的图像嵌入数据，提取出其中的深层语义信息，在深层语义信息的基础上，进一步解码确定出其中的各个内容对象相对应的掩膜，在该掩膜中，以二值化掩码的形式，表示出各个内容对象的内容区域，同时起到区分前景和背景的作用，由此基于目标图像的图像语义，对目标图像中的各个内容对象实现语义分割。由于事先已经得到各个内容对象的区域图像，所以，可以将各个区域图像编码成相应的图像嵌入数据分别输入深度学习模型中，由深度学习模型根据该图像嵌入数据推理检测出相应的区域掩膜，实现对内容对象的图像内容在区域图像中的内容区域的有效表示。以U-Net为例，图像嵌入数据是编码为红绿蓝三个颜色通道相对应的数据形式，将图像嵌入数据输入U-Net模型之后，经过其编码路径中的多个尺度的编码器，对其进行降采样，得到各个尺度相对应的语义特征图，实现对目标图像在相应尺度上的深层语义的有效表示，然后，最小尺度相对应的语义特征图被作为还原特征图输入解码路径，在解码路径中，对应每个尺度，根据输入其中的还原特征图，参考该尺度相对应的编码器所表示的语义特征图，还原出该尺度相对应的解码特征图，再将该解码特征图作为更高一级尺度的解码器的输入，由此实现逐层解码，在最后一个尺度得到解码特征图之后，将全部解码特征图进行融合，便可得到相应的掩膜。当掩膜是基于单个区域图像得到时，便是区域掩膜。当掩膜是基于整个目标图像得到时，便是全图掩膜，而无论该全图掩膜中包含有多少个内容对象。在掩膜中，以0或1的二值化表示形式，表示出目标图像中的各个像素是否属于前景或背景，区分数值为0、1确定两个连通域，其中像素值为1的连通域的边缘像素集合，便构成对属于前景的内容对象的图像内容的内容区域的指定。当然，在本申请中，内容区域还限定了图像内容所占的整个实际图像区域，因而，也构成对内容对象的图像内容在区域图像中的有效覆盖区域的限定。对于区域图像中属于背景的连通域而言，在此处可不予处理，但多个区域图像中属于背景的连通域也可根据实际需要融合为同一个内容对象对待。当然，在一些实施例中，图像默认分割模型也可以替换为图像提示分割模型，而目标检测模型检测各个内容对象时得到的各个窗口位置信息，则可作为图像提示分割模型的分割提示信息，与目标图像一起输入图像提示分割模型中，引导图像提示分割模型直接得到各个内容对象的内容区域。步骤S5114、将各个内容对象的区域掩膜转换为相应的全图掩膜，所述全图掩膜按照目标图像的尺寸规格表示出相应的内容对象的内容区域。当针对多个区域图像分别确定了其区域掩膜之后，可以进一步确定全图掩膜。确定全图掩膜的方式较为灵活，既可以是对应每个内容对象的图像内容的内容区域提供一个专用的全图掩膜，也可以是通过同一张全图掩膜表示出各个内容对象的图像内容的内容区域。以下通过不同实施例详细说明：一种实施例中，为每个内容对象的区域掩膜确定一个对应的全图掩膜。具体而言，可以按照目标图像的原图画幅，先建立一个像素赋值为全0的二值图，然后，将内容对象的区域掩膜，按照内容对象的区域图像在目标图像中相应的区域和位置，以区域掩膜对应覆盖该二值图中的相应区域，如果区域图像事先经过缩放导致区域掩膜的尺度基准与目标图像的原图不一致，则亦可按照目标图像的原图的尺寸规格对区域掩膜进行相应的缩放处理后，再将区域掩膜对应替换到该二值图的相应区域中，由此实现将单个区域掩膜转换为单个全图掩膜，不难理解，另一实施例中，可以在前一实施例的基础上，按照相同的方式，在同一张二值图的基础上，将各个内容对象相对应的各个区域掩膜都覆盖到该二值图中，得到单一的全图掩膜，该全图掩膜便对照目标图像的原图的尺寸规格，同时表示出了各个内容对象的内容区域。不难理解，无论全图掩膜是对应每个内容对象进行表示，还是对应全部各个内容对象进行表示，都可以通过其中表示的内容区域，确定各个内容对象的图像内容。需要注意的是，全图掩膜中，未被视为内容对象的图像内容的其他区域，一般属于背景，在本申请中，目标图像的背景信息既可以按需利用也可以弃用，当需利用时，可以在排除了各个内容对象的图像内容相对应的像素的基础上得到这个背景，将全图掩膜中属于背景的像素都确定为同一内容对象，对应确定其图像内容，以及根据其内容区域确定相应的发光单元集，同理也可实现根据该图像内容的主色调的发光颜色值确定该发光单元集中的各个发光单元的发光颜色值，确保目标图像全图都与氛围灯的整个框体中的全部发光单元建立颜色上的可靠映射关系。以上实施例，先借助目标检测模型预测出目标图像中的各个内容对象的窗口位置信息，据此提取出各个内容对象的区域图像，在各个区域图像的基础上借助图像分割模型进行图像语义分割，得到各个区域图像的区域掩膜，再根据区域掩膜转换出全图掩膜，以便根据全图掩膜中表示的内容区域，准确提取出目标图像中各个内容对象的图像内容，以及确定氛围灯的框体中的发光单元集，实现图像内容与发光单元集的精准对应，确保内容对象中的图像内容的主色调能够精准投射到相应的发光单元集中进行播放，使整个氛围灯能够对应各个内容对象之间构成的色彩氛围，而渲染出相对应的光线氛围效果。目标检测模型以及图像分割模型都是可以实现轻量化部署的模型，且其各自经训练获得的分割能力也较为专注，所以，能够在以嵌入式芯片为基础的氛围灯设备中进行可靠的部署以及维持稳定的运行，同时确保灯效中的色彩光效的有效投射，进一步提升氛围灯设备模拟目标图像中的色彩氛围的能力，使氛围灯设备渲染光线氛围的能力实现全方位的提升。在本申请的方法的任意实施例的基础上，基于目标图像进行图像语义分割，确定所述目标图像中各个内容对象的图像内容和内容区域，包括：步骤S5121、调用目标图像及分割提示信息，所述分割提示信息用于指示所述目标图像中的内容对象的分割识别规则；关于目标图像的调用，如前文实施例所揭示，可以从图像帧序列中调用各个目标图像用来播放灯效，恕不赘述。关于分割提示信息，其作用在于指导深层学习模型以某种分割识别规则，从目标图像中识别出各个内容对象。所以，分割提示信息可以事先确定。在一种实施例中，分割提示信息可以采用自然语言表示的方式表示分割识别规则，且可事先存储为模板以便在本步骤中直接调用。分割提示信息中使用的分割识别规则，可以灵活设定，例如，该分割识别规则可以表示为指示相应的提示型分割模型根据相对于目标图像指定的位置信息或区域信息，或基于内容对象指定的内容类型或尺寸信息等任意一项或任意多项，在目标图像中识别出相应的内容对象。步骤S5122、采用图像提示分割模型基于所述分割提示信息的分割识别规则检测出所述目标图像中的各个内容对象相对应的全图掩膜，所述全图掩膜按照目标图像的尺寸规格表示出相应的内容对象的内容区域。鉴于提示型图像分割模型处理图像的能力飞速发展，本实施例提出借助基于图像提示分割模型来实现确定目标图像中的各个内容对象的内容区域的方案。示例性的图像提示分割模型，可以是分割一切模型,SAM模型整体上包含三个大模块，图像编码器，提示编码器和掩膜解码器。图像编码器用于映射待分割的图像到图像特征空间，实现对所输入的图像例如本申请的目标图像的深层语义表示。提示编码器则负责映射输入的分割提示信息到提示特征空间，实现对分割提示信息的深层语义表示。掩膜解码器的意义从功能上说有两个，一是整合图像编码器和提示编码器分别输出的两个深层语义信息得到综合语义信息，实现对目标图像和分割提示信息的综合表示，然后从这个综合语义信息中解码出最终的掩膜，这个掩膜由于是对应全图确定的，所以是全图掩膜，在其中已经表示出各个内容对象的内容区域，所有内容对象的内容区域的总和，刚好占满整个目标图像的画幅，由此，该全图掩膜便按照目标图像的尺寸规格表示出目标图像中的全部各个内容对象相对应的内容区域。以上实施例中，利用分割提示信息，借助图像提示分割模型的交互能力，根据分割提示信息中指定的分割识别规则，对目标图像中的内容对象进行准确识别，除了能实现非提示型图像分割模型在灯效上取得的相同技术优势外，还能够开放一定的交互能力，丰富内容对象的识别方式，使得氛围灯设备可以按照以指定方式区分的内容对象的色彩氛围呈现相应的光线氛围效果，更为智能。在本申请的方法的任意实施例的基础上，调用目标图像及分割提示信息之前，包括：步骤S4100、根据所述目标图像的尺寸规格确定界面画布，将界面画布显示在图形用户界面；控制器可以通过配备显示屏和按键等实现自带人机交互能力，在其与终端设备通信连接时，也可以复用终端设备的人机交互能力，或者，当控制器实现在终端设备上时，终端设备本身便具有人机交互能力。在这种能力的支持下，在借助分割提示信息对目标图像进行图像语义分割的场景中，便可以借助控制器的人机交互能力来向用户开放对分割揭示信息中的分割识别规则的自定义功能。据此，如图6所示，可以目标图像的尺寸规格为统一规格，按照相应的尺寸，设定一个界面画布，将该界面画布显示到图形用户界面中，即图6上方的方框。该界面画布是与目标图像的画幅比例相一致的，只是在图形用户界面中显示时，适应图形用户界面的显示尺寸而进行相应的缩放以方便用户操作。自然地，在界面画布上设定的位置或区域，也可以关联相应的缩放比例，唯一性地映射到目标图像中得到相应的位置和区域。步骤S4200、接收基于所述界面画布指定的至少一个识别位置，确定所述识别位置相对于所述目标图像的位置信息；如图6所示，用户可以控制器开放的人机交互能力，在该界面画布中设定一个或多个识别位置，程序进程负责将用户在界面画布中设定的位置信息对应映射为目标图像中的位置信息，由此实现由用户参考目标图像的全画幅指定需要识别内容对象的位置的位置信息。如图6所示，用户可以触控“推荐”按键以提交识别位置自动推荐指令，由程序进程随机推荐多个识别位置，或者，用户也可触控各个位置文本例如“左上角”、“右上角”右侧相对应的按键，开始为各个位置文本指定相应的识别位置，当一个位置文本相对应的识别位置被用户指定后，其右侧按键中的状态文本便从“未设定”改变为“已设定“，并且，在界面画布中以“+”号之类的定位标识加以提示。用户通过界面画布可以便捷地设定各个识别位置，更为高效迅速。不难理解，识别位置可以是一个点，也可以是封闭曲线、涂抹区域等任意几何对象，只要按照相应的坐标信息进行表示，便可给出该识别位置相对应的位置信息。步骤S4300、将各个所述识别位置的位置信息构造为分割识别规则，将该分割识别规则存储为分割提示信息。本申请事先为根据位置信息识别目标图像中的内容对象给出相应的识别指示文本，在用户给出其指定的位置确定相应的位置信息后，将这些位置信息相拼接，便构成提示型图像分割模型可以理解的分割识别规则，将这个分割识别规则存储为分割提示信息，便可用于为目标图像识别内容对象的内容区域。以上实施例可见，本申请通过界面画布，进一步向用户开放了对内容对象进行图像语义分割的服务能力，使用户可以自行设计用于识别内容对象相对应的分割识别规则。不难理解，用户通过在界面画布中指定不同的识别位置，即使是面对同一个目标图像，深度学习模型可能适应位置的不同而识别出不同的内容对象，氛围灯设备可能对应得到不同的配色方案，从而实现对配色方案的灵活调节，丰富了人机交互功能的同时，还能全面提升氛围灯设备的用户体验。在本申请的方法的任意实施例的基础上，以所述框体为所述目标图像的外框，将各个内容对象的内容区域分配到所述框体的各个边框，使所述框体的每个发光单元都与其中一个内容区域相对应，得到每个内容区域相映射的发光单元集，包括：步骤S5310、根据框体形状信息确定所述框体中各个发光单元的位置信息与该框体的各个边框的隶属关系；如前所述，框体形状信息中，包含有表示氛围灯中各个发光单元的位置的位置信息，以及框体的每个边框相对应的发光单元数量，据此，可以根据每个边框相对应发光单元数量，依次确定框体的各个边框相对应的各个发光单元，建立边框与发光单元之间的涵盖对应关系信息，明确每个发光单元的位置信息与其相应的边框之间的隶属关系。步骤S5320、计算每个内容对象的内容区域到达所述框体的各个边框的距离，确定距离最小的边框为该内容区域相对应的目标边框，以及将该内容区域投影到该目标边框时的投影尺寸；目标图像中的内容对象通常有多个，或者用户可以通过设定识别位置来控制模型从目标图像中确定出多个内容对象，使内容对象的数量达到四个或四个以上更佳。在这种情况下，框体中的每个边框至少可以与一个内容对象相对应。为了建立框体中的每个边框中的发光单元与内容对象的映射关系，本实施例中，针对将框体作为目标图像的外框，使目标图像的图像边与框体的边框建立一一对应关系的情况，可以先计算每个内容对象的内容区域确定其到达框体的每个边框的距离。通过先确定出该内容区域的几何中心位置，然后再根据这个几何中心位置计算确定到各个边框的距离进行表示即可。然后，对于每个内容对象来说，将到达距离最小的边框，作为该内容对象确定发光单元集相对应的目标边框。由于每个内容区域都有一定的跨度，这个跨度投影到目标边框时，便会得到一个投影尺寸，这个投影尺寸能够在一定程度上反映这个内容区域在整个目标图像中相对于其他内容对象的内容区域的画幅比例。步骤S5330、按照每个目标边框相对应的全部内容区域的投影尺寸的比例关系，为所述相对应的全部内容区域中的各个内容区域分配该目标边框的发光单元总量，得到每个内容区域相映射的发光单元集。不难理解，由于可能存在多个内容区域投影到同一个边框的情况，所以，同一个边框中的全部发光单元可能需要分配给多个内容区域。据此，框体中的每个边框，都有其相对应的一个或多个内容区域，同一边框的全部发光单元需要在其相对应的一个或多个内容区域之间分配以建立内容区域与发光单元集之间的映射关系。为此，以目标边框为单位，计算投影到其上的各个内容区域的投影尺寸之间的比例关系，然后，按照各个内容区域各自的占比，对该目标边框中的发光单元总量进行分配。例如同一目标边框的发光单元总量为n，内容区域1与内容区域2之间投影尺寸的比例为6：4，则内容区域1可得到0.6n个发光单元作为发光单元集，而内容区域2则得到0.4n个发光单元作为发光单元集。同理，在确定同一目标边框的发光单元集的顺序与各个内容区域的对应关系时，可以根据各个内容区域投影到目标边框的位置确定，例如，当内容区域1相对于内容区域2更靠近目标边框的左侧时，则内容区域1与目标边框左侧的0.6n个发光单元构成的发光单元集相映射，而内容区域2则与目标边框右侧的0.4n个发光单元构成的发光单元集相映射。当按照以上的方式建立内容区域与发光单元集的映射关系的过程中，因内容对象较少而导致有个别边框未与内容对象建立映射关系时，可以将目标图像的背景作为内容对象，确定其相应的内容区域，将这些边框的全部发光单元构成与该背景的内容区域相映射的发光单元集使用。根据以上的过程可见，先将各个内容区域投影到框体的相应边框中得到一个投影尺寸，再根据每个边框所对应的全部内容区域的投影尺寸之间的比例关系来分配该边框的发光单元，使内容区域与发光单元集的映射关系，能够大体遵循内容区域中的图像内容的主色调对目标图像所总体呈映的色彩氛围的约束比重，以较为简洁高效的方式，实现将目标图像的色彩氛围有效投射到边框灯形态的氛围灯设备中显示，既方便实施，又能保障高效运行。在本申请的方法的任意实施例的基础上，根据各个内容对象的图像内容确定各个内容对象的主色调，以各个内容对象的主色调对应控制各个内容对象相映射的发光单元集播放灯效，包括：步骤S5410、获取氛围灯设备相对应的灯效描述模板，所述灯效描述模板包含该氛围灯设备中各个发光单元相对应的色值属性项；为便于生成每个目标图像相对应的灯效播放指令，在氛围灯设备的控制器中预先存储有灯效描述模板。灯效描述模板可以是控制器按照预设的协议格式，对应布局配置信息中各个发光单元的位置信息所表征的顺序位置而生成的。由于控制器与各个发光单元之间的通信通常是基于串行通信协议实现的，当需要控制各个发光单元播放灯效时，只需按照预设的协议格式，封装出每个发光单元的控制数据，再将这些控制数据按照串行通信协议有序封装便可得到灯效播放指令，所以，灯效描述模板可以按照串行通信协议的规范，表示好氛围灯中各个发光单元的顺序位置，以及规范好控制每个发光单元发光相对应的各个属性项即可，后续需要生成相应的灯效播放指令时，只需调用这个灯效描述模板，更新各个发光单元相对应的属性项中的数据即可。每个发光单元相对应的各个属性项中，包括色值属性项，色值属性项用于设定相应的发光单元所需发射的光线的颜色值，故称发光颜色值。当需要设定发光颜色值时，通过对色值属性项进行赋值即可实现。步骤S5420、根据每个内容对象的图像内容确定该内容对象的主色调的图像颜色值，为该内容对象相映射的发光单元集中的各个发光单元的所述色值属性项赋值，从而将该图像颜色值设定为该色值属性项中的发光颜色值；由于每个内容对象都能够如前文的实施例所揭示，根据其图像内容中的像素的颜色值确定出代表该内容对象相对应主色调的图像颜色值，因此，对于每个内容对象来说，可以以其主色调的图像颜色值，直接为该内容对象相映射的发光单元集中的每个发光单元的色值属性项赋值，将该图像颜色值设定为该色值属性项中的发光颜色值即可。一些实施例中，对于每个内容对象来说，在设定其发光单元集中的各个发光单元的发光颜色值时，还可以按照中心扩散原则，将该主色调的图像颜色值设定为位于该发光单元集相对应的中心位置的发光单元相对应的色值属性项的发光颜色值，然后，沿该相应的边框两侧方向的顺序，以该图像颜色值为基础值，将沿每一方向扩散的各个发光单元的色值属性项中的发光颜色值，设定为以该基础值梯度递降颜色值得到的发光颜色值，由此将整个发光单元集的灯效塑造为以中心位置为基准进行色彩上的淡入和淡出呈现的效果，使整体灯效更为柔和。步骤S5430、将设定了氛围灯设备中的各个发光单元的发光颜色值的灯效描述模板转换为灯效播放指令，控制所述各个发光单元协同播放所述目标图像相对应的灯效。在按照以上的方式，设定了各个内容对象相对应的各个发光单元集中各个发光单元的发光颜色值后，便实现对灯效描述模板的数据更新，据此，按照串行通信协议对已经更新的灯效描述模板中的全部数据进行封装，便可将灯效描述模板转换为目标图像相对应的灯效播放指令。控制器封装出目标图像的灯效播放指令后，便可将其发送至氛围灯中，通过氛围灯的连接拓扑，最终将灯效播放指令中封装的各个发光单元发送至目的地，发光单元对应提取出属于自己的控制数据，根据控制数据中的发光颜色值控制内部的发光元件发出相应色调的光线。每个发光单元都按照相同的原理工作，由此，氛围灯所构成的整个框体中的全部各个发光单元，便通过这种方式实现协同播放目标图像相对应的灯效，实现对目标图像中的各个内容对象的图像内容的色彩氛围在框体中的准确投射。以上实施例可知，借助灯效描述模板以及内容对象与其发光单元集的映射关系，可以快速地为氛围灯中的各个发光单元完成发光颜色值的赋值，快速生成目标图像相对应的灯效播放指令，生成迅速，赋值精准，较为高效。在本申请的方法的任意实施例的基础上，根据每个内容对象的图像内容确定该内容对象的主色调的图像颜色值，包括：步骤S5421、将每个内容对象的图像内容输入预设的情绪分类模型中，推理确定该图像内容所传达的情绪属性；本申请预备一个情绪分类模型，其可由一个基于卷积神经网络的特征提取模型后接分类器构成，其中的卷积神经网络用于提取所输入的图像内容的深层语义信息，然后将其映射到分类器相对应的分类空间，得到各种预设的情绪属性相对应的分类概率，将其中分类概率最大的情绪属性，确定为该图像内容相对应的情绪属性，实现对图像内容进行情绪分类。本申请的情绪分类模型事先借助训练数据经过训练，训练数据中，以选定的包含有内容对象的图像内容作为训练样本，而对应设置这个图像内容所表达的情绪相对应的情绪属性作为该训练样本的监督标签，通过采用足量的训练样本和监督标签对，对该情绪分类模型实施有限次训练，使其达到收敛状态，即表明该情绪分类模型适于根据给定的图像内容确定其中的内容对象相对应的情绪属性的能力，即可投入推理阶段使用。据此，将每个内容对象的图像内容都输入该情绪分类模型中，便可得到该内容对象相对应的情绪属性。步骤S5422、根据各个内容对象的情绪属性确定其相对应的主色调，以及确定该主色调相对应的图像颜色值。对内容对象的图像内容所代表的情绪属性的分类体系，可由本领域技术人员灵活设定。例如，一种实施例中，可以将乐器类的内容对象设定为表征欢乐相对应的情绪属性，而将工作类的内容对象设定为表征紧张相对应的情绪属性，将社交类的内容对象设定为表征轻松类相对应的情绪属性等，诸如此类均可。在分类体系中，对应每个情绪属性确定一个表达相应的情绪氛围的主色调，例如，表征欢乐的主色调以橙红色相对应的一个固定的图像颜色值表示，表征紧张的主色调以黄色相对应的一个固定的图像颜色值表示，表征温馨的主色调以淡紫色相对应的一个固定的图像颜色值表示等。借此，将每个情绪属性与一个图像颜色值建立映射关系。根据这个映射关系，根据每个内容对象已经确定的情绪属性便可得到每个内容对象相对应的主色调，进而可以得到该主色调相对应的图像颜色值，便可用于设定内容对象相应的发光单元集的发光颜色值。根据以上实施例可以知晓，在内容对象的图像内容的基础上，借助预先训练的情绪分类模型，可以确定出各个内容对象相对应的主色调及其图像颜色值，改变了传统以图像内容中像素的颜色值简单机械确定相应的发光单元集的发光颜色值的方式，以对内容对象的情绪属性转义后得到的图像颜色值为准，对氛围灯设备的灯效进行设定，使氛围灯设备的灯效能够更匹配用户的主观感受，更好地营造氛围效果。在本申请的方法的任意实施例的基础上，根据各个内容对象的情绪属性相对应的主色调，确定各个内容对象相对应的图像颜色值之后，包括：步骤S5423、将所述目标图像输入所述情绪分类模型中，推理确定所述目标图像所传达的情绪属性；虽然每个内容对象理论上都可以表征对应一种情绪属性，但是，有时候由若干个内容对象的图像内容构成的目标图像，其所表达的整体情绪感受未必与其中的每个内容对象所表达的情绪属性一致，例如，目标图像整体上传达一种欢乐的情绪，但其中个别内容对象传达的是压抑的情绪，而多个内容对象传达的均是欢乐的情绪，在类似这种情况下，可以在步骤S5422的基础上，进一步调和各个内容对象相对应的图像颜色值，以便得到最终的图像颜色值，再根据这个重新确定的图像颜色值去设定相应的发光单元集中各个发光单元的发光颜色值。据此，可以将目标图像作为一个独立的整体，输入到本申请的情绪分类模型中，借助该情绪分类模型训练时得到的能力，确定该目标图像相对应的情绪属性。适应本实施例的需要，在训练该情绪分类模型时，也可以采用由多个内容对象的图像内容构成的图像作训训练样本，并提供相应的情绪属性作为监督标签，输入情绪分类模型中对其进行增强训练，使其更能准确地确定由多个内容对象的图像内容构成的目标图像的情绪属性。根据情绪属性与主色调和图像颜色值之间的映射关系，根据目标图像被分类得到的情绪属性，可以确定其相应的主色调，然后利用这个主色调的图像颜色值，对该目标图像中的各个内容对象相对应的图像颜色值进行调整。调和的方式可以有多种，例如，可以将每个内容对象相对应的图像颜色值与目标图像相对应的图像颜色值求均值或者加权均值等均可，又或者可以根据目标图像的图像颜色值所属的色系作为基调，对各个内容对象相对应的图像颜色值进行色系变换来实现。据此，可以继续执行后续步骤：步骤S5424、根据所述目标图像的情绪属性相对应的主色调确定其所属的目标色系；根据前文实施例的揭示，目标图像确定其情绪属性后，便可查找到其主色调相对应的图像颜色值，于是，便可根据该图像颜色值确定其所属的目标色系。图像颜色值和色系之间的对应关系，可以事先预设，例如，红色、黄色等相对应的图像颜色值可以归类为暖色系，灰色、蓝色等相对应的图像颜色值可以归类为冷色系等。不难理解，通过比较图像颜色值是否落入某个色系相对应的色域范围，便可确定该图像颜色值所属的目标色系。目标图像所属的目标色系一经确定，便可用来调和目标图像中的各个内容对象的图像内容的图像颜色值。步骤S5425、检测每个内容对象的情绪属性相对应的主色调是否属于所述目标色系，将不属于该目标色系的各个内容对象的主色调，参考相同基准变换至所述目标色系。为使各个内容对象相对应的图像颜色值都能服从于目标图像相对应的目标色系，在本实施例中，可以逐个检测内容对象的主色调即其图像颜色值是否属于该目标色系相对应的色域范围，从而判定相应的内容对象的主色调是否属于目标色系，即一个或多个内容对象的图像颜色值不属于目标色系时，可以参考同一预设的基准，对这些不属于目标色系的图像颜色值进行变换，例如，以预定量为基准，在这些图像颜色值的基础上，叠加该预定量以改变各个图像颜色值，得到新的图像颜色值，用来为相应的发光单元集中的各个发光单元配色。根据以上实施例可以看出，利用目标图像的情绪属性相对应的主色调所属的目标色系，对各个内容对象的主色调是否服务该目标色系进行检测，并调整其中不属于该目标色系的内容对象的主色调的图像颜色值，以使各个内容对象的图像颜色值尽量服从目标图像的主色调，确保积上内容对象所传达的情绪价值更能与目标图像整体传达的情绪价值相吻合，可以进一步保持各个内容对象表达目标图像的主色调的能力，确保灯效品质。在本申请的方法的任意实施例的基础上，基于目标图像进行图像语义分割之前，包括：步骤S3100、持续采集外部的终端设备中的界面图像；本实施例示例性的应用场景中，氛围灯设备用于根据终端设备的界面图像形成的图像流，将图像流中的各个界面图像作为相应的目标图像，根据目标图像生成相应的灯效，从而仿真终端设备的图形用户界面上的光线氛围。为此，控制器可以通过其图像获取接口持续采集外部的终端设备的界面图像，具体可参考前文各实施例所述，可以通过摄像方式、投屏方式或者有线传输等方式，采集终端设备中显示到其图形用户界面中的各帧界面图像。为便于后续处理，当控制器接收到的界面图像不是位图数据时，可以先将其转换为位图数据。考虑到终端设备的界面图像通常具有较高的分辨率，也就具有海量的像素总量，而氛围灯设备中的发光单元也就是基本像素的数量远小于该像素总量，所以，控制器可以对每个界面图像都进行压缩，将其压缩至预定规格，既能保证灯效的播放，还能节省控制器的系统开销。步骤S3200、将当前获得的界面图像消除边缘黑带，得到无黑带图像；控制器源源不断地获取终端设备的界面图像的过程中，逐一对每个时刻获得的界面图像进行预处理。在每个时刻获得的界面图像可视为当前界面图像，对于当前界面图像，控制器可先通过检测其中处于全画幅的边缘区域的表征黑色的像素，然后确定最靠近外侧边的矩形区域作为边缘黑带，从当前界面图像中裁剪掉各个边缘黑带，得到无黑带图像。消除边缘黑带主要是考虑到终端设备中显示的有效图像内容通常占据界面中部，而边缘黑带本身不能有效表达图像色彩，将其消除，可以避免黑色边缘区域对灯效的不利影响，突出有效图像内容的色彩呈现，确保所播放的灯效的品质。步骤S3300、提升所述无黑带图像中属于暗光像素的目标像素的颜色值，得到增强图像；为避免界面图像中存在大幅黑色像素导致影响所播放的灯效的明亮度，在得到无黑带图像的基础上，可以对其中的各个像素的颜色值进行检测，对于颜色值低于预设阈值的像素，将其确定为暗光像素，针对暗光像素，按照预设值或者预设比例提升其颜色值，从而使其成为非暗光像素，也使无黑带图像成为增强图像。步骤S3400、将该增强图像添加到图像帧序列，由该图像帧序列有序将其中的增强图像出列作为所述目标图像使用。得到当前界面图像相对应的增强图像后，将其添加到控制器在缓存中设置的图像帧序列中，由该图像帧序列，按照预设的出列规则，通常是先进先出规则，将各个图像帧陆续出列。被出列的增强图像，便可作为目标图像，进行本申请以上各实施例所揭示的后续步骤的处理，实现根据目标图像播放灯效。根据以上实施例可见，在氛围灯设备根据终端设备的界面图像播放相应的灯效的场景中，控制器能够适应界面图像的特点对其进行各种针对性的预处理，其中集中处理黑色像素所导致的灯效品质下降的难题，通过消除边缘黑带和针对黑色像素提升颜色值等方式，使界面图像的色彩得到有效增强，再添加到图像帧序列中依序出列播放相应的灯效，从而，确保氛围灯设备能够根据界面图像播放仿真该界面图像中各个内容对象之间的色彩氛围的光线氛围效果，全面提升根据界面图像塑造光线氛围的品质，实现终端设备的界面图像的光线氛围在实体空间中的有效延展，通过相应的灯效提升终端设备的使用者的氛围沉浸感。请参阅图7，本申请的另一实施例还提供一种氛围灯设备映射配色装置，其包括框体确定模块5100、图像分割模块5200、分配映射模块5300，以及灯效播放模块5400，其中，所述框体确定模块5100，设置为获取氛围灯设备的框体形状信息，所述框体形状信息将所述氛围灯设备中的各个发光单元表示为有序排列在构成同一框体的各个边框上的基本像素；所述图像分割模块5200，设置为基于目标图像进行图像语义分割，确定所述目标图像中各个内容对象的图像内容和内容区域；所述分配映射模块5300，设置为以所述框体为所述目标图像的外框，将各个内容对象的内容区域分配到所述框体的各个边框，使所述框体的每个发光单元都与其中一个内容区域相对应，得到每个内容区域相映射的发光单元集；所述灯效播放模块5400，设置为根据各个内容对象的图像内容确定各个内容对象的主色调，以各个内容对象的主色调对应控制各个内容对象相映射的发光单元集播放灯效。在本申请的装置的任意实施例的基础上，所述图像分割模块5200，包括：目标检测单元，设置为调用目标图像，采用目标检测模型对所述目标图像进行目标检测，得到至少一个内容对象相对应的窗口位置信息；区域提取单元，设置为根据各个内容对象的窗口位置信息从所述目标图像中提取出相应区域的区域图像；第一分割单元，设置为采用图像默认分割模型确定每个区域图像的内容对象相对于该区域图像的区域掩膜，所述区域掩膜包含相应的内容对象在该区域图像中的内容区域；区域表示单元，设置为将各个内容对象的区域掩膜转换为相应的全图掩膜，所述全图掩膜按照目标图像的尺寸规格表示出相应的内容对象的内容区域。在本申请的装置的任意实施例的基础上，所述图像分割模块5200，包括：输入预备单元，设置为调用目标图像及分割提示信息，所述分割提示信息用于指示所述目标图像中的内容对象的分割识别规则；第二分割单元，设置为采用图像提示分割模型基于所述分割提示信息的分割识别规则检测出所述目标图像中的各个内容对象相对应的全图掩膜，所述全图掩膜按照目标图像的尺寸规格表示出相应的内容对象的内容区域。在本申请的装置的任意实施例的基础上，先于所述输入预备单元的运行，所述图像分割模块5200，还包括：画布显示单元，设置为根据所述目标图像的尺寸规格确定界面画布，将界面画布显示在图形用户界面；位置确定单元，设置为接收基于所述界面画布指定的至少一个识别位置，确定所述识别位置相对于所述目标图像的位置信息；提示构造单元，设置为将各个所述识别位置的位置信息构造为分割识别规则，将该分割识别规则存储为分割提示信息。在本申请的装置的任意实施例的基础上，所述分配映射模块5300，包括：关系确定单元，设置为根据框体形状信息确定所述框体中各个发光单元的位置信息与该框体的各个边框的隶属关系；区域分析单元，设置为计算每个内容对象的内容区域到达所述框体的各个边框的距离，确定距离最小的边框为该内容区域相对应的目标边框，以及将该内容区域投影到该目标边框时的投影尺寸；分配映射单元，设置为按照每个目标边框相对应的全部内容区域的投影尺寸的比例关系，为所述相对应的全部内容区域中的各个内容区域分配该目标边框的发光单元总量，得到每个内容区域相映射的发光单元集。在本申请的装置的任意实施例的基础上，所述灯效播放模块5400，包括：模板调用单元，设置为获取氛围灯设备相对应的灯效描述模板，所述灯效描述模板包含该氛围灯设备中各个发光单元相对应的色值属性项；配色执行单元，设置为根据每个内容对象的图像内容确定该内容对象的主色调的图像颜色值，为该内容对象相映射的发光单元集中的各个发光单元的所述色值属性项赋值，从而将该图像颜色值设定为该色值属性项中的发光颜色值；应用播放单元，设置为将设定了氛围灯设备中的各个发光单元的发光颜色值的灯效描述模板转换为灯效播放指令，控制所述各个发光单元协同播放所述目标图像相对应的灯效。在本申请的装置的任意实施例的基础上，所述配色执行单元，包括：情绪分析子单元，设置为将每个内容对象的图像内容输入预设的情绪分类模型中，推理确定该图像内容所传达的情绪属性；颜色确定子单元，设置为根据各个内容对象的情绪属性确定其相对应的主色调，以及确定该主色调相对应的图像颜色值。在本申请的装置的任意实施例的基础上，后于所述颜色确定子单元的运行，所述配色执行单元，还包括：全图分析子单元，设置为将所述目标图像输入所述情绪分类模型中，推理确定所述目标图像所传达的情绪属性；色系确定子单元，设置为根据所述目标图像的情绪属性相对应的主色调确定其所属的目标色系；颜色调和子单元，设置为检测每个内容对象的情绪属性相对应的主色调是否属于所述目标色系，将不属于该目标色系的各个内容对象的主色调，参考相同基准变换至所述目标色系。在本申请的装置的任意实施例的基础上，先于所述图像分割模块5200的运行，本申请的氛围灯设备映射配色装置，还包括：图像采集模块，设置为持续采集外部的终端设备中的界面图像；黑带裁切模块，设置为将当前获得的界面图像消除边缘黑带，得到无黑带图像；图像增强模块，设置为提升所述无黑带图像中属于暗光像素的目标像素的颜色值，得到增强图像；播放调度模块，设置为将该增强图像添加到图像帧序列，由该图像帧序列有序将其中的增强图像出列作为所述目标图像使用。在本申请任意实施例的基础上，请参阅图8，本申请的另一实施例还提供一种计算机设备，该计算机设备可以充当氛围灯设备中的控制器使用，如图8所示，计算机设备的内部结构示意图。该计算机设备包括通过系统总线连接的处理器、计算机可读存储介质、存储器和网络接口。其中，该计算机设备的计算机可读存储介质存储有操作系统、数据库和封装计算机可读指令的计算机程序，数据库中可存储有控件信息序列，该计算机可读指令被处理器执行时，可使得处理器实现一种氛围灯设备映射配色方法。该计算机设备的处理器用于提供计算和控制能力，支撑整个计算机设备的运行。该计算机设备的存储器中可存储有计算机可读指令，该计算机可读指令被处理器执行时，可使得处理器执行本申请的氛围灯设备映射配色方法。该计算机设备的网络接口用于与终端连接通信。本领域技术人员可以理解，图8中示出的结构，仅仅是与本申请方案相关的部分结构的框图，并不构成对本申请方案所应用于其上的计算机设备的限定，具体的计算机设备可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。本实施方式中处理器用于执行图7中的各个模块及其子模块的具体功能，存储器存储有执行上述模块或子模块所需的程序代码和各类数据。网络接口用于向用户终端或服务器之间的数据传输。本实施方式中的存储器存储有本申请的氛围灯设备映射配色装置中执行所有模块/子模块所需的程序代码及数据，服务器能够调用服务器的程序代码及数据执行所有子模块的功能。本申请还提供一种存储有计算机可读指令的存储介质，计算机可读指令被一个或多个处理器执行时，使得一个或多个处理器执行本申请任一实施例所述氛围灯设备映射配色方法的步骤。本申请还提供一种计算机程序产品，包括计算机程序/指令，该计算机程序/指令被一个或多个处理器执行时实现本申请任一实施例所述氛围灯设备映射配色方法的步骤。本领域普通技术人员可以理解实现本申请上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，该计算机程序可存储于一计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，前述的存储介质可为磁碟、光盘、只读存储记忆体等计算机可读存储介质，或随机存储记忆体等。以上所述仅是本申请的部分实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本申请原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本申请的保护范围。综上所述，本申请适应边框灯形态的氛围灯设备的特点，将目标图像中的内容对象的内容区域有效分配映射到边框灯的各个边框上，以将各个边框上的每个发光单元都对应服务于一个内容区域，使每个内容区域在整个边框灯中都得到其相映射的发光单元集，将内容对象的图像内容的主色调投射到相应的发光单元集，使氛围灯设备对应该目标图像播放的灯效，能够以内容对象为分区单位呈现相应图像内容中的色彩效果，从而通过各个边框协同渲染出目标图像的原图光线氛围，当氛围灯设备根据终端设备的桌面图像播放相应的灯效时，能够明显增强终端设备使用者的沉浸感。
