标题title
基于TCP/IP协议和CCSDS协议的通信方法、装置以及存储介质
摘要abst
本申请公开了一种基于TCP/IP协议和CCSDS协议的通信方法、装置以及存储介质。包括：协议网关监控空间链路状态信息，并将空间链路状态信息发送给终端设备，其中终端设备通过TCP/IP协议与协议网关进行通信，并且协议网关通过CCSDS协议与卫星系统进行通信；终端设备通过传输层中的数据长度调节模块根据空间链路状态信息确定TCP报文的数据长度；终端设备通过传输层根据数据长度将用户数据生成TCP报文，通过网络层根据TCP报文生成相应的IP数据包，并且通过链路层根据IP数据包生成相应的以太网帧；以及协议网关根据以太网帧生成相应的AOS空间链路帧，其中通过直接添加协议数据单元头生成多路复用数据单元。从而减少了传输过程中的延迟。
权利要求书clms
1.一种基于TCP/IP协议和CCSDS协议的通信方法，其特征在于，包括：协议网关监控空间链路状态信息，并将所述空间链路状态信息发送给终端设备，其中所述终端设备通过TCP/IP协议与所述协议网关进行通信，并且所述协议网关通过CCSDS协议与卫星系统进行通信；所述终端设备通过传输层中的数据长度调节模块根据所述空间链路状态信息确定TCP报文的数据长度；所述终端设备通过传输层根据所述数据长度将用户数据生成所述TCP报文，通过网络层根据所述TCP报文生成相应的IP数据包，并且通过链路层根据所述IP数据包生成相应的以太网帧；以及所述协议网关根据所述以太网帧生成相应的AOS空间链路帧，其中通过直接添加协议数据单元头生成多路复用数据单元。2.根据权利要求1所述的方法，其特征在于，协议网关监控空间链路状态信息的操作，包括：所述协议网关根据预先设定的时间间隔获取空间链路状态信息，其中所述空间链路状态信息用于通过多个参数表征当前时刻的网络情况，并且所述空间链路状态信息包括信号强度、信噪比、误码率、延迟、带宽、流失率以及重传率；以及所述协议网关将当前时刻获取的第一参数与上一时刻获取的第二参数进行比对，计算所述第一参数与所述第二参数之间的距离。3.根据权利要求2所述的方法，其特征在于，协议网关监控空间链路状态信息的操作，还包括：所述协议网关依次将不同时间获取的所述空间链路状态信息进行归一化预处理，生成相应的网络特征向量。4.根据权利要求3所述的方法，其特征在于，所述协议网关将当前时刻获取的第一参数与上一时刻获取的第二参数进行比对，计算所述第一参数与所述第二参数之间的距离的操作，包括：所述协议网关获取当前时刻的第一特征向量以及上一时刻的第二特征向量；以及所述协议网关根据预设的距离公式，计算所述第一特征向量和所述第二特征向量之间的距离。5.根据权利要求4所述的方法，其特征在于，将所述空间链路状态信息发送给终端设备的操作，包括：所述协议网关通过预设的距离计算模型根据所述第一特征向量和所述第二特征向量之间的距离，确定传输概率；所述协议网关将所述传输概率与预定的概率阈值进行比较；以及在所述传输概率大于所述概率阈值的情况下，所述协议网关将所述第一特征向量传输至所述终端设备。6.根据权利要求1所述的方法，其特征在于，所述终端设备通过传输层中的数据长度调节模块根据所述空间链路状态信息确定TCP报文的数据长度的操作，包括：所述数据长度调节模块通过预先设定的数据长度调节模型，根据所述空间链路状态信息，确定所述TCP报文的数据长度。7.根据权利要求1所述的方法，其特征在于，所述协议网关根据所述以太网帧生成相应的AOS空间链路帧的操作，包括：所述协议网关将所述以太网帧进行解析，确定相应的IP数据包；所述协议网关根据所述IP数据包生成相应的CCSDS空间包；所述协议网关将所述CCSDS空间包添加协议数据单元头生成相应的多路复用数据单元；所述协议网关根据所述多路复用数据单元生成相应的网络虚拟信道数据单元；以及所述协议网关根据所述网络虚拟信道数据单元生成相应的AOS空间链路帧。8.一种存储介质，其特征在于，所述存储介质包括存储的程序，其中，在所述程序运行时由处理器执行权利要求1至7中任意一项所述的方法。9.一种基于TCP/IP协议和CCSDS协议的通信装置，其特征在于，包括：信息发送模块，用于协议网关监控空间链路状态信息，并将所述空间链路状态信息发送给终端设备，其中所述终端设备通过TCP/IP协议与所述协议网关进行通信，并且所述协议网关通过CCSDS协议与卫星系统进行通信；长度确定模块，用于所述终端设备通过传输层中的数据长度调节模块根据所述空间链路状态信息确定TCP报文的数据长度；第一生成模块，用于所述终端设备通过传输层根据所述数据长度将用户数据生成所述TCP报文，通过网络层根据所述TCP报文生成相应的IP数据包，并且通过链路层根据所述IP数据包生成相应的以太网帧；以及第二生成模块，用于所述协议网关根据所述以太网帧生成相应的AOS空间链路帧，其中通过直接添加协议数据单元头生成多路复用数据单元。10.一种基于TCP/IP协议和CCSDS协议的通信装置，其特征在于，包括：处理器；以及存储器，与所述处理器连接，用于为所述处理器提供处理以下处理步骤的指令：协议网关监控空间链路状态信息，并将所述空间链路状态信息发送给终端设备，其中所述终端设备通过TCP/IP协议与所述协议网关进行通信，并且所述协议网关通过CCSDS协议与卫星系统进行通信；所述终端设备通过传输层中的数据长度调节模块根据所述空间链路状态信息确定TCP报文的数据长度；所述终端设备通过传输层根据所述数据长度将用户数据生成所述TCP报文，通过网络层根据所述TCP报文生成相应的IP数据包，并且通过链路层根据所述IP数据包生成相应的以太网帧；以及所述协议网关根据所述以太网帧生成相应的AOS空间链路帧，其中通过直接添加协议数据单元头生成多路复用数据单元。
说明书desc
技术领域本申请涉及卫星信息传输技术领域，特别是涉及一种基于TCP/IP协议和CCSDS协议的通信方法、装置以及存储介质。背景技术TCP/IP协议以及CCSDS协议，都具有可靠性和完整性的优点。但反过来，数据传输的实时性不能得到满足，容易产生延迟。因此需要对传输过程进行优化以减少传输过程中的延迟。此外，在AOS协议中M_PDU以及AOS空间链路帧的长度是固定的。而接收到的IP数据包数据长度不定，因此基于IP数据包生成的CCSDS空间包的长度也不固定。从而，需要将CCSDS空间包拆分成多个M_PDU，或者将多个CCSDS空间包合并到一个M_PDU中。有时还要将同一个CCSDS空间包拆分成两个不同的部分，分别填充到不同的M_PDU中。这些操作显然增加了协议转换的时长，增加了传输过程中的延迟。此外，卫星通信的网络是不稳定的，因此当卫星通信网络状况良好时，可以传送较大长度的空间链路帧，当卫星通信的网络不稳定时，为了避免发生传输错误，最好传送较小长度的空间链路帧。由于现有协议中AOS空间链路帧的长度固定，因此不能适应不同的网络状态，因此增加了出现错误的概率，从而引发CCSDS协议不断重传数据包，从而进一步增加了传输的延迟。公开号为CN113507722A，名称为一种基于NS3的用于低轨卫星控制拥塞的平台的实现方法。本发明方法根据TCP/IP通信协议的层次结构，在仿真模拟器NS3中搭建用于低轨卫星控制拥塞的平台；在安装网络设备和信道时，为每个卫星建立通信任务队列，在安装网络协议栈时，设置使用显示负载均衡的路由控制策略，定时检查卫星负载状态，并发送给相邻卫星，根据卫星状态控制卫星间的数据流量传输。公开号为CN113438139B，名称为用于检查来自通信总线的帧的设备和方法。包括：确定从通信总线接收的帧是否根据特定通信协议被编码并且被寻址到特定电子设备；当帧基于确定根据特定通信协议被编码并且被寻址到特定电子设备时，增加帧计数值，其中增加帧计数值包括增加具有第一比特深度的模运算计数器电路的计数，并且帧计数值被约束到模运算计数器电路的模值；基于将帧计数值与阈值进行比较来设置帧计数状态比特，并且在通信总线之上传输包括帧计数器状态比特的帧，并且在监测时间间隔结束时重置帧计数值。针对上述的现有技术中存在的在通过TCP/IP协议以及CCSDS协议进行通信时，数据传输的延迟高的技术问题，目前尚未提出有效的解决方案。发明内容本申请的实施例提供了一种基于TCP/IP协议和CCSDS协议的通信方法、装置以及存储介质，以至少解决现有技术中存在的在通过TCP/IP协议以及CCSDS协议进行通信时，数据传输的延迟高的技术问题。根据本申请实施例的一个方面，提供了一种基于TCP/IP协议和CCSDS协议的通信方法，包括：协议网关监控空间链路状态信息，并将空间链路状态信息发送给终端设备，其中终端设备通过TCP/IP协议与协议网关进行通信，并且协议网关通过CCSDS协议与卫星系统进行通信；终端设备通过传输层中的数据长度调节模块根据空间链路状态信息确定TCP报文的数据长度；终端设备通过传输层根据数据长度将用户数据生成TCP报文，通过网络层根据TCP报文生成相应的IP数据包，并且通过链路层根据IP数据包生成相应的以太网帧；以及协议网关根据以太网帧生成相应的AOS空间链路帧，其中通过直接添加协议数据单元头生成多路复用数据单元。根据本申请实施例的另一个方面，还提供了一种存储介质，存储介质包括存储的程序，其中，在程序运行时由处理器执行以上任意一项所述的方法。根据本申请实施例的另一个方面，还提供了一种基于TCP/IP协议和CCSDS协议的通信装置，包括：信息发送模块，用于协议网关监控空间链路状态信息，并将空间链路状态信息发送给终端设备，其中终端设备通过TCP/IP协议与协议网关进行通信，并且协议网关通过CCSDS协议与卫星系统进行通信；长度确定模块，用于终端设备通过传输层中的数据长度调节模块根据空间链路状态信息确定TCP报文的数据长度；第一生成模块，用于终端设备通过传输层根据数据长度将用户数据生成TCP报文，通过网络层根据TCP报文生成相应的IP数据包，并且通过链路层根据IP数据包生成相应的以太网帧；以及第二生成模块，用于协议网关根据以太网帧生成相应的AOS空间链路帧，其中通过直接添加协议数据单元头生成多路复用数据单元。根据本申请实施例的另一个方面，还提供了一种基于TCP/IP协议和CCSDS协议的通信装置，包括：处理器；以及存储器，与处理器连接，用于为处理器提供处理以下处理步骤的指令：协议网关监控空间链路状态信息，并将空间链路状态信息发送给终端设备，其中终端设备通过TCP/IP协议与协议网关进行通信，并且协议网关通过CCSDS协议与卫星系统进行通信；终端设备通过传输层中的数据长度调节模块根据空间链路状态信息确定TCP报文的数据长度；终端设备通过传输层根据数据长度将用户数据生成TCP报文，通过网络层根据TCP报文生成相应的IP数据包，并且通过链路层根据IP数据包生成相应的以太网帧；以及协议网关根据以太网帧生成相应的AOS空间链路帧，其中通过直接添加协议数据单元头生成多路复用数据单元。在本申请实施例中，协议网关通过在应用层设置的空间链路监控模块实时获取当前时刻的空间链路状态信息，从而终端设备可以根据当前时刻的空间链路状态信息，确定适合当前网络情况的TCP报文的数据长度，从而可以将用户数据及时发送，从而满足了数据传输的实时性，减少了延迟。并且由于在AOS协议中多路复用数据单元以及AOS空间链路帧的长度是固定的，因此本技术方案根据多路复用数据单元的固定长度，确定需传输的数据的长度，从而使得传输的数据在生成为多路复用数据单元时，无需进行拆分就可以进行传输，从而减少了传输过程中的延迟。进而解决了现有技术中存在的在通过TCP/IP协议以及CCSDS协议进行通信时，数据传输的延迟高的技术问题。附图说明此处所说明的附图用来提供对本申请的进一步理解，构成本申请的一部分，本申请的示意性实施例及其说明用于解释本申请，并不构成对本申请的不当限定。在附图中：图1是用于实现根据本申请实施例1所述的方法的计算设备的硬件结构框图；图2是根据本申请实施例1所述的网络通信系统的示意图；图3是根据本申请实施例1所述的基于TCP/IP协议和CCSDS协议的通信方法的流程示意图；图4是根据本申请实施例1所述的基于TCP/IP协议和CCSDS协议的通信方法的模块示意图；图5是根据本申请实施例1所述的用户数据生成以太网帧的流程示意图；图6是根据本申请实施例1所述的AOS层的示意图；图7是根据本申请实施例2所述的基于TCP/IP协议和CCSDS协议的通信装置的示意图；以及图8是根据本申请实施例3所述的基于TCP/IP协议和CCSDS协议的通信装置的示意图。具体实施方式为了使本技术领域的人员更好地理解本申请的技术方案，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述。显然，所描述的实施例仅仅是本申请一部分的实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本申请保护的范围。需要说明的是，本申请的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本申请的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。实施例1根据本实施例，提供了一种基于TCP/IP协议和CCSDS协议的通信方法的方法实施例，需要说明的是，在附图的流程图示出的步骤可以在诸如一组计算机可执行指令的计算机系统中执行，并且，虽然在流程图中示出了逻辑顺序，但是在某些情况下，可以以不同于此处的顺序执行所示出或描述的步骤。本实施例所提供的方法实施例可以在移动终端、计算机终端、服务器或者类似的计算设备中执行。图1示出了一种用于实现基于TCP/IP协议和CCSDS协议的通信方法的计算设备的硬件结构框图。如图1所示，计算设备可以包括一个或多个处理器、用于存储数据的存储器、以及用于通信功能的传输装置。除此以外，还可以包括：显示器、输入/输出接口、通用串行总线端口、网络接口、电源和/或相机。本领域普通技术人员可以理解，图1所示的结构仅为示意，其并不对上述电子装置的结构造成限定。例如，计算设备还可包括比图1中所示更多或者更少的组件，或者具有与图1所示不同的配置。应当注意到的是上述一个或多个处理器和/或其他数据处理电路在本文中通常可以被称为“数据处理电路”。该数据处理电路可以全部或部分的体现为软件、硬件、固件或其他任意组合。此外，数据处理电路可为单个独立的处理模块，或全部或部分的结合到计算设备中的其他元件中的任意一个内。如本申请实施例中所涉及到的，该数据处理电路作为一种处理器控制。存储器可用于存储应用软件的软件程序以及模块，如本申请实施例中的基于TCP/IP协议和CCSDS协议的通信方法对应的程序指令/数据存储装置，处理器通过运行存储在存储器内的软件程序以及模块，从而执行各种功能应用以及数据处理，即实现上述的应用程序的基于TCP/IP协议和CCSDS协议的通信方法。存储器可包括高速随机存储器，还可包括非易失性存储器，如一个或者多个磁性存储装置、闪存、或者其他非易失性固态存储器。在一些实例中，存储器可进一步包括相对于处理器远程设置的存储器，这些远程存储器可以通过网络连接至计算设备。上述网络的实例包括但不限于互联网、企业内部网、局域网、移动通信网及其组合。传输装置用于经由一个网络接收或者发送数据。上述的网络具体实例可包括计算设备的通信供应商提供的无线网络。在一个实例中，传输装置包括一个网络适配器，其可通过基站与其他网络设备相连从而可与互联网进行通讯。在一个实例中，传输装置可以为射频模块，其用于通过无线方式与互联网进行通讯。显示器可以例如触摸屏式的液晶显示器，该液晶显示器可使得用户能够与计算设备的用户界面进行交互。此处需要说明的是，在一些可选实施例中，上述图1所示的计算设备可以包括硬件元件、软件元件、或硬件元件和软件元件两者的结合。应当指出的是，图1仅为特定具体实例的一个实例，并且旨在示出可存在于上述计算设备中的部件的类型。图2是根据本实施例所述的网络通信系统的示意图。参照图2所示，该系统包括：协议网关200和500以及卫星300和400。其中，终端设备100和服务器600例如通过该网络通信系统通信。其中，终端设备100与协议网关200之间通过TCP/IP协议进行通信。协议网关200与卫星系统300之间通过CCSDS协议进行通信。其中CCSDS协议可以为CCSDS AOS协议。协议网关200和500用于实现TCP/IP协议与CCSDS AOS协议之间的协议转换。从而当终端设备100向服务器600发送用户数据时，可以通过TCP/IP协议将封装有用户数据的IP数据包传输至协议网关200。协议网关200收到IP数据包后将其进行协议转换成基于CCSDSAOS协议的AOS空间链路帧，并通过AOS空间链路，经由卫星系统300和400传输至协议网关500。协议网关500接收到AOS空间链路帧之后进行解析，得到IP数据包，然后基于TCP/IP协议将IP数据包传输至服务器600。在上述运行环境下，根据本实施例的第一个方面，提供了一种基于TCP/IP协议和CCSDS协议的通信方法，该方法由图2中所示的协议网关200实现。图3示出了该方法的流程示意图，参考图3所示，该方法包括：S302：协议网关监控空间链路状态信息，并将空间链路状态信息发送给终端设备，其中终端设备通过TCP/IP协议与协议网关进行通信，并且协议网关通过CCSDS协议与卫星系统进行通信；S304：终端设备通过传输层中的数据长度调节模块根据空间链路状态信息确定TCP报文的数据长度；S306：终端设备通过传输层根据数据长度将用户数据生成TCP报文，通过网络层根据TCP报文生成相应的IP数据包，并且通过链路层根据IP数据包生成相应的以太网帧；以及S308：协议网关根据以太网帧生成相应的AOS空间链路帧，其中通过直接添加协议数据单元头生成多路复用数据单元。具体地，终端设备100要通过网络通信系统将用户数据发送给服务器600。其中网络通信系统包括协议网关200和500，以及卫星系统300和400。即，终端设备100将用户数据发送给协议网关200，之后协议网关200将接收到的用户数据经由卫星系统300、卫星系统400以及协议网关500，发送给服务器600。其中终端设备100通过TCP/IP协议与协议网关200进行通信，协议网关200通过CCSDS协议与卫星系统300进行通信。其中CCSDS协议可以为CCSDS AOS协议。参考图4所示，协议网关200的CCSDS AOS协议设置有应用层。并且应用层中预先设置有空间链路监控模块，从而协议网关200可以通过空间链路监控模块监控当前时刻的网络情况，得到空间链路状态信息，并将当前时刻监控到的空间链路状态信息发送给终端设备100。进一步地，参考图4所示，TCP/IP协议包括应用层、传输层、网络层以及链路层。其中TCP协议部署于传输层，用于将应用层传输的用户数据的数据字节流拆分成多个TCP报文。并且其中终端设备100在TCP/IP协议的传输层中预先设置有数据长度调节模块。当终端设备100需要发送用户数据时，则会通过数据长度调节模块根据当前时刻接收到的空间链路状态信息确定TCP报文的数据长度，从而使TCP报文的数据长度适合当前的网络状态传输的数据长度。进一步地，终端设备100的应用层将需要发送的用户数据的数据字节流发送至传输层，传输层则根据确定的数据长度，将接收到的数据字节流进行切分，进而将切分后的用户数据添加TCP首部生成符合数据长度的TCP报文。参考图5所示，之后传输层将生成的TCP报文发送给网络层。其中IP协议部署于网络层，网络层在接收到的TCP报文首部添加IP首部，从而生成相应的IP数据包，之后将IP数据包发送给链路层。链路层将接收到的IP数据包添加以太网首部和以太网尾部，从而生成相应的以太网帧。之后链路层将以太网帧发送给协议网关200。进一步地，参考图4所示，协议网关200的CCSDS协议除了应用层，还设置有传输层、网络层、链路层、AOS层以及RF。协议网关200通过链路层接收以太网帧，并且在网络层解析出IP数据包，并将IP数据包发送至AOS层。AOS层将IP数据包进行解析，并将解析后的IP数据包添加协议数据单元头，从而生成多路复用数据单元。之后AOS层将多路复用数据单元进行解析，生成相应的AOS空间链路帧。协议网关200然后通过RF层经由空间链路传输至卫星系统300。进一步地，卫星系统300通过CCSDS AOS协议将用户数据传输至卫星系统400，之后卫星系统400通过CCSDS AOS协议将用户数据传输至协议网关500，然后协议网关500将用户数据传输至服务器600。其中协议网关500的CCSDS AOS协议与协议网关200的CCSDS AOS协议的结构以及用户数据传输过程相同，此处不再赘述。正如背景技术中所述的，TCP/IP协议以及CCSDS协议，都具有可靠性和完整性的优点。但反过来，数据传输的实时性不能得到满足，容易产生延迟。因此需要对传输过程进行优化以减少传输过程中的延迟。此外，在AOS协议中M_PDU以及AOS空间链路帧的长度是固定的。而接收到的IP数据包的数据长度不定，因此基于IP数据包生成的CCSDS空间包的长度也不固定。从而，需要将CCSDS空间包拆分成多个M_PDU，或者将多个CCSDS空间包合并到一个M_PDU中。有时还要将同一个CCSDS空间包拆分成两个不同的部分，分别填充到不同的M_PDU中。这些操作显然增加了协议转换的时长，增加了传输过程中的延迟。此外，卫星通信的网络是不稳定的，因此当卫星通信网络状况良好时，可以传送较大长度的空间链路帧，当卫星通信的网络不稳定时，为了避免发生传输错误，最好传送较小长度的空间链路帧。由于现有协议中AOS空间链路帧的长度固定，因此不能适应不同的网络状态，因此增加了出现错误的概率，从而引发CCSDS协议不断重传数据包，从而进一步增加了传输的延迟。针对以上所述的技术问题，通过本申请实施例的技术方案，协议网关通过在应用层设置的空间链路监控模块实时获取当前时刻的空间链路状态信息，从而终端设备可以根据当前时刻的空间链路状态信息，确定适合当前网络情况的TCP报文的数据长度，从而可以将用户数据及时发送，从而满足了数据传输的实时性，减少了延迟。并且由于在AOS协议中多路复用数据单元以及AOS空间链路帧的长度是固定的，因此本技术方案根据多路复用数据单元的固定长度，确定需传输的数据的长度，从而使得传输的数据在生成为多路复用数据单元时，无需进行拆分就可以进行传输，从而减少了传输过程中的延迟。进而解决了现有技术中存在的在通过TCP/IP协议以及CCSDS协议进行通信时，数据传输的延迟高的技术问题。可选地，协议网关监控空间链路状态信息的操作，包括：协议网关根据预先设定的时间间隔获取空间链路状态信息，其中空间链路状态信息用于通过多个参数表征当前时刻的网络情况，并且空间链路状态信息包括信号强度、信噪比、误码率、延迟、带宽、流失率以及重传率；以及协议网关将当前时刻获取的第一参数与上一时刻获取的第二参数进行比对，计算第一参数与第二参数之间的距离。具体地，协议网关200会根据预先设定的时间间隔获取空间链路状态信息，从而可以根据当前时刻获取的空间链路状态信息确定当时的网络情况。并且，协议网关200在获取到当前时刻的空间链路状态信息后，会立即将该空间链路状态信息发送给终端设备100。其中空间链路状态信息包括信号强度、信噪比、误码率、延迟、带宽、流失率以及重传率等多个参数。其中信号强度对通信质量有重要影响，终端设备100可以根据信号强度的变化来调整传输速率和数据包大小。信噪比是信号和噪声的比值，通常以分贝为单位。信噪比越高，通信质量越好。误码率是指在传输中发生的误码数量与传输总比特数之比。误码率越低，通信质量越好。延迟是指从发送数据到接收方接收到数据所需的时间。高延迟会导致通信速度变慢，严重时可能导致通信中断。带宽是指网络能够传输的数据量，通常以每秒传输的比特数表示。带宽越大，网络传输速度越快。流失率指的是在数据传输过程中，发生丢包的概率，通常用百分比表示。它可以通过以下公式计算：PLR=×100%例如，在发送了100个数据包后，有5个数据包未能到达接收方，那么这个数据流的PLR为：PLR=×100%=5%流失率可以通过在发送端和接收端同时记录已发送和已接收数据包的数量，然后计算差值来得出。如果使用网络分析工具，也可以通过抓包来统计丢包数量。重传率是指在数据传输过程中，由于数据包的丢失或错误导致需要重传的数据包占总数据包数的比例。计算公式为：重传率=重传的数据包数/总数据包数其中，重传的数据包数和总数据包数都可以通过网络设备进行实时监测和计算。通信的可靠性通常是通过数据包的丢失率和重传率来衡量的。在卫星通信中，由于信号传播的时延、天气等因素的影响，数据包的丢失率可能会比较高，因此需要通过实时监测丢包情况来确定网络的可靠性。重传率则是指在数据包丢失后，重传次数与总发包次数的比率。通过实时监测重传率可以了解网络的稳定性和可靠性。通信的可靠性指数据能够正确传输的概率。在卫星通信中，由于天气等因素的影响，可靠性可能会受到影响。以上这些参数可以用来评估卫星通信的质量，终端设备100可以根据这些参数来动态地调整数据包的大小、传输速率和错误处理策略等。进一步地，协议网关200在当前时刻获取到信号强度、信噪比、误码率、延迟、带宽、流失率以及重传率等参数，并在上一时刻也获取到了信号强度、信噪比、误码率、延迟、带宽、流失率以及重传率等参数。之后协议网关200将上一时刻的信号强度与当前时刻的信号强度进行比对，并且依照上述方式将上一时刻与当前时刻的信噪比、误码率、延迟、带宽、流失率以及重传率进行比对，从而得到比对结果，并将该比对结果作为第一参数与第二参数之间的距离。从而，本技术方案通过实时获取不同时刻的空间链路状态信息，从而可以实时确定当前时刻的网络情况，进而终端设备100可以根据当时的网络情况准确确定TCP报文的数据长度，保证了确定的数据长度与当时网络情况的匹配度。可选地，协议网关监控空间链路状态信息的操作，还包括：协议网关依次将不同时间获取的空间链路状态信息进行归一化预处理，生成相应的网络特征向量。具体地，空间链路状态信息包括信号强度、信噪比、误码率、延迟、带宽、流失率以及重传率等参数。其中当前时刻的信号强度的参数向量标识为a1，信噪比的参数向量标识为a2，误码率的参数向量标识为a3，延迟的参数向量标识为a4，带宽的参数向量标识为a5，流失率的参数向量标识为a6，重传率的参数向量标识为a7。则当前时刻的空间链路状态信息的参数向量A，可表示为：A=T。进一步地，协议网关200将当前时刻的空间链路状态信息的参数向量A进行归一化预处理，从而生成相应的网络特征向量B。其中网络特征向量B可表示为：B=T。并且其中当前时刻的信号强度的网络特征向量标识为b1，信噪比的网络特征向量标识为b2，误码率的网络特征向量标识为b3，延迟的网络特征向量标识为b4，带宽的网络特征向量标识为b5，流失率的网络特征向量标识为b6，重传率的网络特征向量标识为b7。从而，本技术方案通过归一化预处理，将参数向量生成为符合当前处理格式的网络特征向量，从而有助于更加准确地分析空间链路的网络环境。可选地，协议网关将当前时刻获取的第一参数与上一时刻获取的第二参数进行比对，计算第一参数与第二参数之间的距离的操作，包括：协议网关获取当前时刻的第一特征向量以及上一时刻的第二特征向量；以及协议网关根据预设的距离公式，计算第一特征向量和第二特征向量之间的距离。具体地，当前时刻的参数向量A=T，上一时刻的参数向量标识为A’，则A’=T。其中上一时刻的信号强度的参数向量标识为a1’，信噪比的参数向量标识为a2’，误码率的参数向量标识为a3’，延迟的参数向量标识为a4’，带宽的参数向量标识为a5’，流失率的参数向量标识为a6’，重传率的参数向量标识为a7’。协议网关200根据当前时刻的参数向量A=T，生成当前时刻的网络特征向量B=T。协议网关200根据上一时刻的参数向量A’=T，生成上一时刻的网络特征向量B’=T。其中上一时刻的信号强度的网络特征向量标识为b1’，信噪比的网络特征向量标识为b2’，误码率的网络特征向量标识为b3’，延迟的网络特征向量标识为b4’，带宽的网络特征向量标识为b5’，流失率的网络特征向量标识为b6’，重传率的网络特征向量标识为b7’。进一步地，协议网关200根据预设的距离公式，计算当前时刻的网络特征向量B与上一时刻的网络特征向量B’之间的距离x。其中距离公式为并且其中，bi为当前时刻的网络特征向量，bi’为上一时刻的网络特征向量，i=1~7。从而本技术方案通过计算上一时刻的网络特征向量和当前时刻的网络特征向量之间的距离，从而可以准确判断当前时刻的网络情况与上一时刻的网络情况的是否相差过大，提高了判断的准确率。可选地，将空间链路状态信息发送给终端设备的操作，包括：协议网关通过预设的距离计算模型根据第一特征向量和第二特征向量之间的距离，确定传输概率；协议网关将传输概率与预定的概率阈值进行比较；以及在传输概率大于概率阈值的情况下，协议网关将第一特征向量传输至终端设备。具体地，协议网关200预先设定有距离计算模型，之后将当前时刻的网络特征向量B与上一时刻的网络特征向量B’之间的距离x输入该距离计算模型，之后该距离计算模型根据距离x输出传输概率。其中协议网关200通过对距离样本进行训练得到距离计算模型sigmoid)，其中f=kx+e。进一步地，协议网关200预先设定的概率阈值为50%，当计算得到的传输概率大于或者等于50%，意味着当前时刻的网络状况与上一时刻的网络状况相差较大，协议网关200则将当前时刻的网络特征向量B发送至终端设备100。当计算得到的传输概率小于50%，则意味着当前时刻的网络状况与上一时刻的网络状况相近，则协议网关200无需将当前时刻的网络特征向量B传输至终端设备100。从而，在终端设备100没有接收到当前时刻的网络特征向量B的情况下，终端设备100在确定TCP报文的数据长度时，可以根据上一时刻接收到的网络特征向量来确定。从而，本技术方案通过计算传输概率来确定是否要向终端设备100发送当前时刻的网络特征向量，从而当协议网关200已经向终端设备100发送了与当前的网络特征向量距离相近的上一时刻的网络特征向量时，协议网关200就无需再发送当前时刻的网络特征向量，从而协议网关200可以减少向终端设备100发送网络特征向量的次数，进而压缩了协议网关200与终端设备100之间交互的时长，从而提高数据传输速率。可选地，终端设备通过传输层中的数据长度调节模块根据空间链路状态信息确定TCP报文的数据长度的操作，包括：数据长度调节模块通过预先设定的数据长度调节模型，根据空间链路状态信息，确定TCP报文的数据长度。具体地，终端设备100预先设定了多个数据长度L1~Ln。其中L1为210个字节，L2为211个字节，……，Ln为2m个字节。其中协议网关200的AOS层中的一个多路复用数据单元的最大数据长度为2m个字节。则终端设备100将TCP报文的最大数据长度设置为2m个字节。并且各个数据长度对应于一个数据长度调节模型。例如，与数据长度L1对应的数据长度调节模型为：sigmoid)。其中g1=k10+k11b1+k12b2+...+k17b7。与数据长度L2对应的数据长度调节模型为：sigmoid)。其中g2=k20+k21b1+k22b2+...+k27b7。……与数据长度Ln对应的数据长度调节模型为：sigmoid)。其中g1=kn0+kn1b1+kn2b2+...+kn7b7。其中k为根据样本训练后得到的参数，b为网络特征向量。进一步地，终端设备100将获取的网络特征向量B=T分别输入与数据长度L1~Ln对应的数据长度调节模型，每个数据长度调节模型都会输出一个概率值，从而可以得到与数据长度L1~Ln分别对应的概率值。从而终端设备100分别将与数据长度L1~Ln对应的概率值进行比对，从而确定最大的概率值。之后终端设备100将与最大的概率值对应的数据长度作为TCP报文的数据长度。从而本技术方案根据当前时刻的网络情况以及多路复用数据单元的最大数据长度确定合适的TCP报文的数据长度，使得该数据长度的TCP报文可以快速传输至协议网关，提高了用户数据的传输速率。可选地，协议网关根据以太网帧生成相应的AOS空间链路帧的操作，包括：协议网关将以太网帧进行解析，确定相应的IP数据包；协议网关根据IP数据包生成相应的CCSDS空间包；协议网关将CCSDS空间包添加协议数据单元头生成相应的多路复用数据单元；协议网关根据多路复用数据单元生成相应的网络虚拟信道数据单元；以及协议网关根据网络虚拟信道数据单元生成相应的AOS空间链路帧。具体地，参考图4以及图6所示，协议网关200的链路层接收到终端设备100发送的以太网帧，并且在网络层解析出IP数据包。其中IP数据包包括IP首部和IP数据部分。之后协议网关200通过AOS层将IP数据包进行IP分组，并在IP分组的首部添加CCSDS空间包头和IPE，从而生成相应的CCSDS空间包。之后协议网关200通过AOS层将CCSDS空间包添加协议数据单元头，从而生成相应的多路复用数据单元。之后协议网关200通过AOS层在多路复用数据单元的首部添加网络虚拟信道主导头以及在尾部添加差错控制，从而生成相应的网络虚拟信道数据单元。之后协议网关200通过AOS层在网络虚拟信道数据单元的首部添加AOS同步头，以及在尾部添加RS编译码，从而生成相应的AOS空间链路帧。从而与现有技术中的将CCSDS空间包进行拆分，生成多个多路复用数据单元相比，本技术方案可以直接将CCSDS空间包添加协议数据单元头，从而生成相应的多路复用数据单元，无需对CCSDS空间包进行拆分，从而减少了拆分CCSDS空间包的时间，提高了数据传输效率。此外，参考图1所示，根据本实施例的第二个方面，提供了一种存储介质。所述存储介质包括存储的程序，其中，在所述程序运行时由处理器执行以上任意一项所述的方法。从而根据本实施例，协议网关通过在应用层设置的空间链路监控模块实时获取当前时刻的空间链路状态信息，从而终端设备可以根据当前时刻的空间链路状态信息，确定适合当前网络情况的TCP报文的数据长度，从而可以将用户数据及时发送，从而满足了数据传输的实时性，减少了延迟。并且由于在AOS协议中多路复用数据单元以及AOS空间链路帧的长度是固定的，因此本技术方案根据多路复用数据单元的固定长度，确定需传输的数据的长度，从而使得传输的数据在生成为多路复用数据单元时，无需进行拆分就可以进行传输，从而减少了传输过程中的延迟。进而解决了现有技术中存在的在通过TCP/IP协议以及CCSDS协议进行通信时，数据传输的延迟高的技术问题。需要说明的是，对于前述的各方法实施例，为了简单描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本发明并不受所描述的动作顺序的限制，因为依据本发明，某些步骤可以采用其他顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于优选实施例，所涉及的动作和模块并不一定是本发明所必须的。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到根据上述实施例的方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台终端设备执行本发明各个实施例所述的方法。实施例2图7示出了根据本实施例所述的基于TCP/IP协议和CCSDS协议的通信装置700，该装置700与根据实施例1的第一个方面所述的方法相对应。参考图7所示，该装置700包括：信息发送模块710，用于协议网关监控空间链路状态信息，并将空间链路状态信息发送给终端设备，其中终端设备通过TCP/IP协议与协议网关进行通信，并且协议网关通过CCSDS协议与卫星系统进行通信；长度确定模块720，用于终端设备通过传输层中的数据长度调节模块根据空间链路状态信息确定TCP报文的数据长度；第一生成模块730，用于终端设备通过传输层根据数据长度将用户数据生成TCP报文，通过网络层根据TCP报文生成相应的IP数据包，并且通过链路层根据IP数据包生成相应的以太网帧；以及第二生成模块740，用于协议网关根据以太网帧生成相应的AOS空间链路帧，其中通过直接添加协议数据单元头生成多路复用数据单元。可选地，信息发送模块710，包括：第一获取子模块，用于协议网关根据预先设定的时间间隔获取空间链路状态信息，其中空间链路状态信息用于通过多个参数表征当前时刻的网络情况，并且空间链路状态信息包括信号强度、信噪比、误码率、延迟、带宽、流失率以及重传率；以及第一计算子模块，用于协议网关将当前时刻获取的第一参数与上一时刻获取的第二参数进行比对，计算第一参数与第二参数之间的距离。可选地，信息发送模块710，还包括：第一生成子模块，用于协议网关依次将不同时间获取的空间链路状态信息进行归一化预处理，生成相应的网络特征向量。可选地，第一计算子模块，包括：第一获取单元，用于协议网关获取当前时刻的第一特征向量以及上一时刻的第二特征向量；以及第一计算单元，用于协议网关根据预设的距离公式，计算第一特征向量和第二特征向量之间的距离。可选地，信息发送模块710，包括：第一确定子模块，用于协议网关通过预设的距离计算模型根据第一特征向量和第二特征向量之间的距离，确定传输概率；第一比较子模块，用于协议网关将传输概率与预定的概率阈值进行比较；以及第一传输子模块，用于在传输概率大于概率阈值的情况下，协议网关将第一特征向量传输至终端设备。可选地，长度确定模块720，包括：第二确定子模块，用于数据长度调节模块通过预先设定的数据长度调节模型，根据空间链路状态信息，确定TCP报文的数据长度。可选地，第二生成模块740，包括：第三确定子模块，用于协议网关将以太网帧进行解析，确定相应的IP数据包；第二生成子模块，用于协议网关根据IP数据包生成相应的CCSDS空间包；第三生成子模块，用于协议网关将CCSDS空间包添加协议数据单元头生成相应的多路复用数据单元；第四生成子模块，用于协议网关根据多路复用数据单元生成相应的网络虚拟信道数据单元；以及第五生成子模块，用于协议网关根据网络虚拟信道数据单元生成相应的AOS空间链路帧。从而根据本实施例，协议网关通过在应用层设置的空间链路监控模块实时获取当前时刻的空间链路状态信息，从而终端设备可以根据当前时刻的空间链路状态信息，确定适合当前网络情况的TCP报文的数据长度，从而可以将用户数据及时发送，从而满足了数据传输的实时性，减少了延迟。并且由于在AOS协议中多路复用数据单元以及AOS空间链路帧的长度是固定的，因此本技术方案根据多路复用数据单元的固定长度，确定需传输的数据的长度，从而使得传输的数据在生成为多路复用数据单元时，无需进行拆分就可以进行传输，从而减少了传输过程中的延迟。进而解决了现有技术中存在的在通过TCP/IP协议以及CCSDS协议进行通信时，数据传输的延迟高的技术问题。实施例3图8示出了根据本实施例所述的基于TCP/IP协议和CCSDS协议的通信装置800，该装置800与根据实施例1的第一个方面所述的方法相对应。参考图8所示，该装置800包括：处理器810；以及存储器820，与处理器810连接，用于为处理器810提供处理以下处理步骤的指令：协议网关监控空间链路状态信息，并将空间链路状态信息发送给终端设备，其中终端设备通过TCP/IP协议与协议网关进行通信，并且协议网关通过CCSDS协议与卫星系统进行通信；终端设备通过传输层中的数据长度调节模块根据空间链路状态信息确定TCP报文的数据长度；终端设备通过传输层根据数据长度将用户数据生成TCP报文，通过网络层根据TCP报文生成相应的IP数据包，并且通过链路层根据IP数据包生成相应的以太网帧；以及协议网关根据以太网帧生成相应的AOS空间链路帧，其中通过直接添加协议数据单元头生成多路复用数据单元。可选地，协议网关监控空间链路状态信息的操作，包括：协议网关根据预先设定的时间间隔获取空间链路状态信息，其中空间链路状态信息用于通过多个参数表征当前时刻的网络情况，并且空间链路状态信息包括信号强度、信噪比、误码率、延迟、带宽、流失率以及重传率；以及协议网关将当前时刻获取的第一参数与上一时刻获取的第二参数进行比对，计算第一参数与第二参数之间的距离。可选地，协议网关监控空间链路状态信息的操作，还包括：协议网关依次将不同时间获取的空间链路状态信息进行归一化预处理，生成相应的网络特征向量。可选地，协议网关将当前时刻获取的第一参数与上一时刻获取的第二参数进行比对，计算第一参数与第二参数之间的距离的操作，包括：协议网关获取当前时刻的第一特征向量以及上一时刻的第二特征向量；以及协议网关根据预设的距离公式，计算第一特征向量和第二特征向量之间的距离。可选地，将空间链路状态信息发送给终端设备的操作，包括：协议网关通过预设的距离计算模型根据第一特征向量和第二特征向量之间的距离，确定传输概率；协议网关将传输概率与预定的概率阈值进行比较；以及在传输概率大于概率阈值的情况下，协议网关将第一特征向量传输至终端设备。可选地，终端设备通过传输层中的数据长度调节模块根据空间链路状态信息确定TCP报文的数据长度的操作，包括：数据长度调节模块通过预先设定的数据长度调节模型，根据空间链路状态信息，确定TCP报文的数据长度。可选地，协议网关根据以太网帧生成相应的AOS空间链路帧的操作，包括：协议网关将以太网帧进行解析，确定相应的IP数据包；协议网关根据IP数据包生成相应的CCSDS空间包；协议网关将CCSDS空间包添加协议数据单元头生成相应的多路复用数据单元；协议网关根据多路复用数据单元生成相应的网络虚拟信道数据单元；以及协议网关根据网络虚拟信道数据单元生成相应的AOS空间链路帧。从而根据本实施例，协议网关通过在应用层设置的空间链路监控模块实时获取当前时刻的空间链路状态信息，从而终端设备可以根据当前时刻的空间链路状态信息，确定适合当前网络情况的TCP报文的数据长度，从而可以将用户数据及时发送，从而满足了数据传输的实时性，减少了延迟。并且由于在AOS协议中多路复用数据单元以及AOS空间链路帧的长度是固定的，因此本技术方案根据多路复用数据单元的固定长度，确定需传输的数据的长度，从而使得传输的数据在生成为多路复用数据单元时，无需进行拆分就可以进行传输，从而减少了传输过程中的延迟。进而解决了现有技术中存在的在通过TCP/IP协议以及CCSDS协议进行通信时，数据传输的延迟高的技术问题。上述本发明实施例序号仅仅为了描述，不代表实施例的优劣。在本发明的上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述的部分，可以参见其他实施例的相关描述。在本申请所提供的几个实施例中，应该理解到，所揭露的技术内容，可通过其它的方式实现。其中，以上所描述的装置实施例仅仅是示意性的，例如所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，单元或模块的间接耦合或通信连接，可以是电性或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本发明各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。所述集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、只读存储器、随机存取存储器、移动硬盘、磁碟或者光盘等各种可以存储程序代码的介质。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本发明的保护范围。
