标题title
基于物联网的企业信息数据优化管理系统
摘要abst
本发明涉及数据处理技术领域，具体涉及基于物联网的企业信息数据优化管理系统，包括：销售数据采集模块，分段节点获取模块，优化K值获取模块，异常检测模块，用于获取每个销售位置的每种类型的销售数据序列；获取每个销售位置的每种类型的销售数据序列的若干分段节点；根据分段节点得到若干真实区间范围，计算每个区间范围的初始K值和权值，根据每个真实区间范围的权值和初始K值得到每个真实区间范围的优化K值；根据每个真实区间范围的优化K值进行异常检测得到异常数据，通过自适应K值，能够有效提高异常检测的准确性。
权利要求书clms
1.基于物联网的企业信息数据优化管理系统，其特征在于，该系统包括以下模块：销售数据采集模块，用于在企业信息数据库中获取每个销售位置的每种类型的销售数据序列；分段节点获取模块，用于根据销售数据序列中各区域数据波动一致性情况得到每个销售位置的每种类型的销售数据序列的若干变化节点，根据每个销售位置的每种类型的销售数据序列中每个变化节点与其他销售数据序列的变化节点的时间间隔得到每个变化节点的置信程度，根据每个变化节点的置信程度得到每个销售位置的每种类型的销售数据序列的若干分段节点；优化K值获取模块，用于利用分段节点将每个销售位置的每种类型的销售数据序列分割成若干真实区间范围，根据每个真实区间范围内数据的波动情况得到每个真实区间范围的初始K值；获取每个销售位置的每种类型的销售数据序列的若干虚拟节点，利用虚拟节点将每个销售位置的每种类型的销售数据序列分割成若干虚拟区间范围；根据每个销售位置的每个类型的销售数据序列的每个虚拟区间范围的波动情况与其他销售位置的其他类型的销售数据序列的虚拟区间范围的波动情况的相似性得到每个虚拟区间范围的相似性，根据每个虚拟区间范围的相似性得到每个真实区间范围的权值，根据利用每个真实区间范围的权值对初始K值进行优化得到每个真实区间范围的优化K值；异常检测模块，用于根据每个真实区间范围的优化K值对每个销售位置的每种类型的销售数据序列中数据进行异常检测得到异常数据。2.根据权利要求1所述基于物联网的企业信息数据优化管理系统，其特征在于，所述根据销售数据序列中各区域数据波动一致性情况得到每个销售位置的每种类型的销售数据序列的若干变化节点，包括的具体方法为：对于任意一个销售地点的每种类型的销售数据序列，预设基准尺寸C，将销售数据序列的第一个销售数据作为第一基准点，获取第一基准点的变化节点，获取第一基准点的变化节点在销售数据序列中的位置次序W，将第一基准点的变化节点的位置次序与基准尺寸C的累加和记为第一基准点的变化节点的截止标志值，将第一基准点的变化节点的截止标志值与销售数据序列的长度比较，当截止标志值大于销售数据序列的长度时，循环结束；当截止标志值小于等于销售数据序列的长度时，将第一基准点的变化节点作为第二基准点，获取第二基准点的变化节点，获取第二基准点的变化节点在销售数据序列中的位置次序W，将第二基准点的变化节点的位置次序与基准尺寸C的累加和记为第二基准点的变化节点的截止标志值，将第二基准点的变化节点的截止标志值与销售数据序列的长度比较，当截止标志值大于销售数据序列的长度时，循环结束，以此类推，直至循环结束。3.根据权利要求2所述基于物联网的企业信息数据优化管理系统，其特征在于，所述获取第一基准点的变化节点，包括的具体方法为：设置一个尺寸为1*C的第一窗口，将第一窗口的左侧与第一基准点对齐，在销售数据序列中获取第一窗口内数据，将第一窗口中最后一个数据作为第一候选变化节点，根据第一窗口得到第一候选变化节点的优选程度，将第一候选变化节点的优选程度与预设优选阈值Y1比较，当第一候选变化节点的优选程度大于等于预设优选阈值时，将第一候选变化节点作为变化节点，当第一候选变化节点的优选程度小于预设优选阈值时，设置一个尺寸为1*的第二窗口，将第二窗口的左侧与第一基准点对齐，在销售数据序列中获取第二窗口内数据，将第二窗口中最后一个数据作为第二候选变化节点，根据第二窗口得到第二候选变化节点的优选程度；以此类推，当第n-1候选变化节点的优选程度小于预设优选阈值时，设置一个尺寸为1*的第n窗口，将第n窗口的左侧与第一基准点对齐，在销售数据序列中获取第n窗口内数据，将第n窗口中最后一个数据作为第n候选变化节点，根据第n窗口得到第n候选变化节点的优选程度，直至候选变化节点的优选程度大于等于预设优选阈值时结束，得到第一基准点的变化节点。4.根据权利要求3所述基于物联网的企业信息数据优化管理系统，其特征在于，所述根据第一窗口得到第一候选变化节点的优选程度，包括的具体方法为：其中，表示第一窗口中第i个销售数据之前的所有销售数据的方差，/＞表示第一窗口中第i-1个销售数据之前的所有销售数据的方差，H表示第一窗口中销售数据的数量，/＞表示预设基准尺寸，/＞表示线性归一化处理，/＞表示第一候选变化节点的优选程度。5.根据权利要求1所述基于物联网的企业信息数据优化管理系统，其特征在于，所述根据每个销售位置的每种类型的销售数据序列中每个变化节点与其他销售数据序列的变化节点的时间间隔得到每个变化节点的置信程度，根据每个变化节点的置信程度得到每个销售位置的每种类型的销售数据序列的若干分段节点，包括的具体方法为：对于任意一个销售位置，将第j种类型的销售数据序列中的第k个变化节点记为，在第z种类型的销售数据序列中获取与变化节点/＞时间间隔最近的变化节点，记为变化节点在第z种类型上的参考节点/＞，获取每个变化节点在每种类型上的参考节点；根据每个变化节点在每种类型上的参考节点得到每个节点的置信程度的方法为：其中，表示销售数据的类型数，exp表示以自然常数为底的指数函数，/＞表示每个销售位置的第j种类型的销售数据序列中第k个变化节点的置信程度；将置信程度大于预设置信阈值的变化节点作为分段节点。6.根据权利要求1所述基于物联网的企业信息数据优化管理系统，其特征在于，所述根据每个真实区间范围内数据的波动情况得到每个真实区间范围的初始K值，包括的具体方法为：其中，表示每个销售位置的每种类型的销售数据序列中每个真实区间范围内第m个销售数据，/＞表示每个销售位置的每种类型的销售数据序列中每个真实区间范围内所有销售数据的均值，/＞表示每个销售位置的每种类型的销售数据序列中每个真实区间范围内销售数据的数量，/＞表示预设调节参数，/＞表示预设基准值，/＞表示每个销售位置的每种类型的销售数据序列中每个真实区间范围的初始K值，/＞表示向上取整符号。7.根据权利要求1所述基于物联网的企业信息数据优化管理系统，其特征在于，所述获取每个销售位置的每种类型的销售数据序列的若干虚拟节点，包括的具体方法为：获取每个销售位置的每个类型的销售数据序列中的分段节点的位置，将所有销售位置的所有类型的销售数据序列中的所有分段节点的位置构成节点位置集合；将节点位置集合中各元素称为节点位置；在每个销售位置的每个类型的销售数据序列中获取每个节点位置处的销售数据，记为每个销售位置的每个类型的销售数据序列的虚拟节点。8.根据权利要求1所述基于物联网的企业信息数据优化管理系统，其特征在于，所述根据每个销售位置的每个类型的销售数据序列的每个虚拟区间范围的波动情况与其他销售位置的其他类型的销售数据序列的虚拟区间范围的波动情况的相似性得到每个虚拟区间范围的相似性，包括的具体方法为：其中，表示第a个销售位置的第b种类型的销售数据序列的每个虚拟区间范围内的第s个销售数据，/＞表示所有销售位置的第b种类型的销售数据序列的每个虚拟区间范围内第s个销售数据的均值，/＞表示第a个销售位置的所有类型的销售数据序列的每个虚拟区间范围内第s个销售数据的均值，/＞表示销售位置的数量，/＞表示销售数据的类型数，表示第a个销售位置的第b种类型的销售数据序列的每个虚拟区间范围内销售数据的数量，/＞表示第a个销售位置的第b种类型的销售数据序列的每个虚拟区间范围的相似度，表示连乘符号。9.根据权利要求1所述基于物联网的企业信息数据优化管理系统，其特征在于，所述根据每个虚拟区间范围的相似性得到每个真实区间范围的权值，根据利用每个真实区间范围的权值对初始K值进行优化得到每个真实区间范围的优化K值，包括的具体方法为：获取每个销售位置的每种类型的销售数据序列的每个真实区间范围内的虚拟区间范围，将每个销售位置的每种类型的销售数据序列的每个真实区间范围内的所有虚拟区间范围的相似度求均值之后取倒数得到每个销售位置的每种类型的销售数据序列的每个真实区间范围的权值；根据每个真实区间范围的权值得到每个真实区间范围的优化权值为：其中，表示每个销售位置的每种类型的销售数据序列的每个真实区间范围的初始K值，/＞表示每个销售位置的每种类型的销售数据序列的每个真实区间范围的权值，/＞表示每个销售位置的每种类型的销售数据序列的每个真实区间范围的优化K值。10.根据权利要求1所述基于物联网的企业信息数据优化管理系统，其特征在于，所述根据每个真实区间范围的优化K值对每个销售位置的每种类型的销售数据序列中数据进行异常检测得到异常数据，包括的具体方法为：将每个销售位置的每种类型的销售数据序列的每个真实区间范围的优化K值作为每个销售位置的每种类型的销售数据序列中每个销售数据的优化K值；将每个销售数据的优化K值作为K值，利用LOF算法对每个销售位置的每种类型的销售数据序列中的销售数据进行处理，得到离群点集合和聚集点集合；将离群点集合中的销售数据判定为异常数据。
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及基于物联网的企业信息数据优化管理系统。背景技术传统的企业信息数据数据管理方法通常无法有效处理来自物联网设备的大规模、高频率、多源数据流。以企业信息数据中的销售数据为例，销售数据对企业的经营和决策至关重要，但在物联网环境中，销售数据的体积和复杂性不断增加，企业可能面临销售数据中的异常情况，例如异常订单、供应链问题、欺诈交易或库存管理问题，这些异常情况可能对企业的运营和利润产生负面影响。因此，需要对销售数据进行异常性检测。传统的LOF算法是一种用于检测数据集中的离群点的方法，该算法通过分析每个数据的分布密度与局部邻域内其他数据的分布密度的差异性来实现离群点检测，而LOF算法中的K值是用于定义局部邻域的大小，因而LOF算法的K值设置的合理性会影响该算法离群点检测的准确性。由于销售数据存在多种类型，并不是每一个类型的销售数据的变化都是固定的，即有些类型销售数据分布较为密集，有些类型销售数据分布较为稀疏，利用固定的K值对数据进行异常检测，会影响异常检测的准确性。发明内容本发明提供基于物联网的企业信息数据优化管理系统，以解决现有的问题：如何准确的检测出销售数据中的异常数据。本发明的基于物联网的企业信息数据优化管理系统采用如下技术方案：本发明一个实施例提供了基于物联网的企业信息数据优化管理系统，该系统包括以下模块：销售数据采集模块，用于在企业信息数据库中获取每个销售位置的每种类型的销售数据序列；分段节点获取模块，用于根据销售数据序列中各区域数据波动一致性情况得到每个销售位置的每种类型的销售数据序列的若干变化节点，根据每个销售位置的每种类型的销售数据序列中每个变化节点与其他销售数据序列的变化节点的时间间隔得到每个变化节点的置信程度，根据每个变化节点的置信程度得到每个销售位置的每种类型的销售数据序列的若干分段节点；优化K值获取模块，用于利用分段节点将每个销售位置的每种类型的销售数据序列分割成若干真实区间范围，根据每个真实区间范围内数据的波动情况得到每个真实区间范围的初始K值；获取每个销售位置的每种类型的销售数据序列的若干虚拟节点，利用虚拟节点将每个销售位置的每种类型的销售数据序列分割成若干虚拟区间范围；根据每个销售位置的每个类型的销售数据序列的每个虚拟区间范围的波动情况与其他销售位置的其他类型的销售数据序列的虚拟区间范围的波动情况的相似性得到每个虚拟区间范围的相似性，根据每个虚拟区间范围的相似性得到每个真实区间范围的权值，根据利用每个真实区间范围的权值对初始K值进行优化得到每个真实区间范围的优化K值；异常检测模块，用于根据每个真实区间范围的优化K值对每个销售位置的每种类型的销售数据序列中数据进行异常检测得到异常数据。优选的，所述根据销售数据序列中各区域数据波动一致性情况得到每个销售位置的每种类型的销售数据序列的若干变化节点，包括的具体方法为：对于任意一个销售地点的每种类型的销售数据序列，预设基准尺寸C，将销售数据序列的第一个销售数据作为第一基准点，获取第一基准点的变化节点，获取第一基准点的变化节点在销售数据序列中的位置次序W，将第一基准点的变化节点的位置次序与基准尺寸C的累加和记为第一基准点的变化节点的截止标志值，将第一基准点的变化节点的截止标志值与销售数据序列的长度比较，当截止标志值大于销售数据序列的长度时，循环结束；当截止标志值小于等于销售数据序列的长度时，将第一基准点的变化节点作为第二基准点，获取第二基准点的变化节点，获取第二基准点的变化节点在销售数据序列中的位置次序W，将第二基准点的变化节点的位置次序与基准尺寸C的累加和记为第二基准点的变化节点的截止标志值，将第二基准点的变化节点的截止标志值与销售数据序列的长度比较，当截止标志值大于销售数据序列的长度时，循环结束，以此类推，直至循环结束。优选的，所述获取第一基准点的变化节点，包括的具体方法为：设置一个尺寸为1*C的第一窗口，将第一窗口的左侧与第一基准点对齐，在销售数据序列中获取第一窗口内数据，将第一窗口中最后一个数据作为第一候选变化节点，根据第一窗口得到第一候选变化节点的优选程度，将第一候选变化节点的优选程度与预设优选阈值Y1比较，当第一候选变化节点的优选程度大于等于预设优选阈值时，将第一候选变化节点作为变化节点，当第一候选变化节点的优选程度小于预设优选阈值时，设置一个尺寸为1*的第二窗口，将第二窗口的左侧与第一基准点对齐，在销售数据序列中获取第二窗口内数据，将第二窗口中最后一个数据作为第二候选变化节点，根据第二窗口得到第二候选变化节点的优选程度；以此类推，当第n-1候选变化节点的优选程度小于预设优选阈值时，设置一个尺寸为1*的第n窗口，将第n窗口的左侧与第一基准点对齐，在销售数据序列中获取第n窗口内数据，将第n窗口中最后一个数据作为第n候选变化节点，根据第n窗口得到第n候选变化节点的优选程度，直至候选变化节点的优选程度大于等于预设优选阈值时结束，得到第一基准点的变化节点。优选的，所述根据第一窗口得到第一候选变化节点的优选程度，包括的具体方法为：其中，表示第一窗口中第i个销售数据之前的所有销售数据的方差，/＞表示第一窗口中第i-1个销售数据之前的所有销售数据的方差，H表示第一窗口中销售数据的数量，/＞表示预设基准尺寸，/＞表示线性归一化处理，/＞表示第一候选变化节点的优选程度。优选的，所述根据每个销售位置的每种类型的销售数据序列中每个变化节点与其他销售数据序列的变化节点的时间间隔得到每个变化节点的置信程度，根据每个变化节点的置信程度得到每个销售位置的每种类型的销售数据序列的若干分段节点，包括的具体方法为：对于任意一个销售位置，将第j种类型的销售数据序列中的第k个变化节点记为，在第z种类型的销售数据序列中获取与变化节点/＞时间间隔最近的变化节点，记为变化节点/＞在第z种类型上的参考节点/＞，获取每个变化节点在每种类型上的参考节点；根据每个变化节点在每种类型上的参考节点得到每个节点的置信程度的方法为：其中，表示销售数据的类型数，exp表示以自然常数为底的指数函数，/＞表示每个销售位置的第j种类型的销售数据序列中第k个变化节点的置信程度；将置信程度大于预设置信阈值的变化节点作为分段节点。优选的，所述根据每个真实区间范围内数据的波动情况得到每个真实区间范围的初始K值，包括的具体方法为：其中，表示每个销售位置的每种类型的销售数据序列中每个真实区间范围内第m个销售数据，/＞表示每个销售位置的每种类型的销售数据序列中每个真实区间范围内所有销售数据的均值，/＞表示每个销售位置的每种类型的销售数据序列中每个真实区间范围内销售数据的数量，/＞表示预设调节参数，/＞表示预设基准值，/＞表示每个销售位置的每种类型的销售数据序列中每个真实区间范围的初始K值，/＞表示向上取整符号。优选的，所述获取每个销售位置的每种类型的销售数据序列的若干虚拟节点，包括的具体方法为：获取每个销售位置的每个类型的销售数据序列中的分段节点的位置，将所有销售位置的所有类型的销售数据序列中的所有分段节点的位置构成节点位置集合；将节点位置集合中各元素称为节点位置；在每个销售位置的每个类型的销售数据序列中获取每个节点位置处的销售数据，记为每个销售位置的每个类型的销售数据序列的虚拟节点。优选的，所述根据每个销售位置的每个类型的销售数据序列的每个虚拟区间范围的波动情况与其他销售位置的其他类型的销售数据序列的虚拟区间范围的波动情况的相似性得到每个虚拟区间范围的相似性，包括的具体方法为：其中，表示第a个销售位置的第b种类型的销售数据序列的每个虚拟区间范围内的第s个销售数据，/＞表示所有销售位置的第b种类型的销售数据序列的每个虚拟区间范围内第s个销售数据的均值，/＞表示第a个销售位置的所有类型的销售数据序列的每个虚拟区间范围内第s个销售数据的均值，/＞表示销售位置的数量，/＞表示销售数据的类型数，/＞表示第a个销售位置的第b种类型的销售数据序列的每个虚拟区间范围内销售数据的数量，/＞表示第a个销售位置的第b种类型的销售数据序列的每个虚拟区间范围的相似度，/＞表示连乘符号。优选的，所述根据每个虚拟区间范围的相似性得到每个真实区间范围的权值，根据利用每个真实区间范围的权值对初始K值进行优化得到每个真实区间范围的优化K值，包括的具体方法为：获取每个销售位置的每种类型的销售数据序列的每个真实区间范围内的虚拟区间范围，将每个销售位置的每种类型的销售数据序列的每个真实区间范围内的所有虚拟区间范围的相似度求均值之后取倒数得到每个销售位置的每种类型的销售数据序列的每个真实区间范围的权值；根据每个真实区间范围的权值得到每个真实区间范围的优化权值为：其中，表示每个销售位置的每种类型的销售数据序列的每个真实区间范围的初始K值，/＞表示每个销售位置的每种类型的销售数据序列的每个真实区间范围的权值，/＞表示每个销售位置的每种类型的销售数据序列的每个真实区间范围的优化K值。优选的，所述根据每个真实区间范围的优化K值对每个销售位置的每种类型的销售数据序列中数据进行异常检测得到异常数据，包括的具体方法为：将每个销售位置的每种类型的销售数据序列的每个真实区间范围的优化K值作为每个销售位置的每种类型的销售数据序列中每个销售数据的优化K值；将每个销售数据的优化K值作为K值，利用LOF算法对每个销售位置的每种类型的销售数据序列中的销售数据进行处理，得到离群点集合和聚集点集合；将离群点集合中的销售数据判定为异常数据。本发明的技术方案的有益效果是：获取每个销售位置的每种类型的销售数据序列，根据销售数据序列中各区域数据的波动一致性得到若干真实区间范围。通过划分真实区间范围，不用为每个销售数据均设置K值，只需给包含多个数据的每个真实间范围设置K值，因而可以有效提高处理效率。根据每个真实区间范围内的数据波动情况设置初始K值，其可以根据数据波动情况为每个真实区间范围设置K值，其有效防止数据波动差异导致异常数据误检现象。根据每个真实区间范围内数据与同时段的其他真实区间范围内的数据的波动一致性来得到每个真实区间范围的权值，通过真实区间范围的权值可以反映真实区间范围内数据波动是由异常数据导致，还是由数据特征导致，利用权值对初始K值进行修正得到每个真实区间范围的优化K值，通过权值修正可以有效避免异常数据波动造成的初始K值设置不良，进而有效避免由于初始K值设置不良引起的异常数据漏检现象。相较于传统的异常检测算法，其能够自适应的设置K值，进而提高异常检测的准确性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明基于物联网的企业信息数据优化管理系统的结构框图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的基于物联网的企业信息数据优化管理系统，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的基于物联网的企业信息数据优化管理系统的具体方案。请参阅图1，其示出了本发明一个实施例提供的基于物联网的企业信息数据优化管理系统的结构框图，该系统包括以下模块：销售数据采集模块101，用于采集每个销售地点的每种类型的销售数据序列。需要说明的是，传统的企业信息数据数据管理方法通常无法有效处理来自物联网设备的大规模、高频率、多源数据流。以企业信息数据中的销售数据为例，销售数据对企业的经营和决策至关重要，在物联网环境中，销售数据的体积和复杂性不断增加，企业可能面临销售数据中的异常情况，例如异常订单、供应链问题、欺诈交易或库存管理问题，这些异常情况可能对企业的运营和利润产生负面影响。因此，需要对销售数据进行异常性检测。为了实现本实施例提出的基于物联网的企业信息数据优化管理系统，首先需要采集每个销售地点的每种类型的销售数据序列，具体过程为：在企业信息数据库中采集每个销售地点的每种类型的每个时刻的销售数据，销售数据的类型包括但不限于以下几个方面，如：产品销售数量、库存状态、销售价格、客户数量，将每个销售地点的每种类型的销售数据按时序排列得到每个销售地点的每种类型的销售数据序列。至此，通过上述方法得到每个销售地点的每种类型的销售数据序列。分段节点获取模块102，用于根据每个销售地点的每种类型的销售数据序列得到每个销售地点的每种类型的若干变动节点，计算每个变动节点的置信程度，根据每个变动节点的置信程度得到每个销售地点的每种类型的若干分段节点。需要说明的是，传统的LOF算法是一种用于检测数据集中的离群点的方法，该算法通过分析每个数据的分布密度与局部邻域内其他数据的分布密度的差异性来实现离群点检测，而LOF算法中的K值是用于定义局部邻域的大小，因而LOF算法的K值设置的合理性会影响该算法离群点检测的准确性。由于销售数据存在多种类型，并不是每一个类型的销售数据的变化都是固定的，即有些类型销售数据分布较为密集，有些类型销售数据分布较为稀疏，利用固定的K值对数据进行异常检测，会影响异常检测的准确性。需要进一步说明的是，每个销售地点的每种类型的销售数据序列中数据的波动程度不同，其数据分布密度不同，其中波动程度较大的数据，其分布密度较为稀疏，波动程度较小的数据，其分布密度较为密集。因而波动程度相似的数据其需要的K值也相同。因而需根据销售数据序列中每个区间的数据的波动程度来对销售数据序列进行区间划分。具体的，对于任意一个销售地点的每种类型的销售数据序列，预设基准尺寸C，将销售数据序列的第一个销售数据作为第一基准点，获取第一基准点的变化节点，获取第一基准点的变化节点在销售数据序列中的位置次序W，将第一基准点的变化节点的位置次序与基准尺寸C的累加和记为第一基准点的变化节点的截止标志值，将第一基准点的变化节点的截止标志值与销售数据序列的长度比较，当截止标志值大于销售数据序列的长度时，循环结束。当截止标志值小于等于销售数据序列的长度时，将第一基准点的变化节点作为第二基准点，获取第二基准点的变化节点，获取第二基准点的变化节点在销售数据序列中的位置次序W，将第二基准点的变化节点的位置次序与基准尺寸C的累加和记为第二基准点的变化节点的截止标志值，将第二基准点的变化节点的截止标志值与销售数据序列的长度比较，当截止标志值大于销售数据序列的长度时，循环结束，以此类推，直至循环结束。本实施例以C取20为例进行叙述，其他实施例可以取其他值，本实施例不进行具体限制。同理获取每个销售位置的每种类型的销售数据序列的若干变化节点。进一步的，获取第一基准点的变化节点的方法为：设置一个尺寸为1*C的第一窗口，将第一窗口的左侧与第一基准点对齐，在销售数据序列中获取第一窗口内数据，将第一窗口中最后一个数据作为第一候选变化节点，根据第一窗口得到第一候选变化节点的优选程度，将第一候选变化节点的优选程度与预设优选阈值Y1比较，当第一候选变化节点的优选程度大于等于预设优选阈值时，将第一候选变化节点作为变化节点，当第一候选变化节点的优选程度小于预设优选阈值时，设置一个尺寸为1*的第二窗口，将第二窗口的左侧与第一基准点对齐，在销售数据序列中获取第二窗口内数据，将第二窗口中最后一个数据作为第二候选变化节点，根据第二窗口得到第二候选变化节点的优选程度。以此类推，当第n-1候选变化节点的优选程度小于预设优选阈值时，设置一个尺寸为1*的第n窗口，将第n窗口的左侧与第一基准点对齐，在销售数据序列中获取第n窗口内数据，将第n窗口中最后一个数据作为第n候选变化节点，根据第n窗口得到第n候选变化节点的优选程度，直至候选变化节点的优选程度大于等于预设优选阈值时结束，得到第一基准点的变化节点。本实施例以Y1取0.7为例进行叙述，其他实施例可以取其他值，本实施例不进行具体限制。进一步的，根据第一窗口得到第一候选变化节点的优选程度的方法为：其中，表示第一窗口中第i个销售数据之前的所有销售数据的方差，该值反映了第一窗口中第i个销售数据之前的销售数据的波动情况，/＞表示第一窗口中第i-1个销售数据之前的所有销售数据的方差，该值反映了第一窗口中第i-1个销售数据之前的销售数据的波动情况，/＞反映了第一窗口中第i个销售数据之前的销售数据的波动情况与第i-1个销售数据之前的销售数据的波动情况差异，该值越大说明数据的波动一致性较小，即数据的分布密度差异较大，H表示第一窗口中销售数据的数量，/＞表示预设基准尺寸，表示线性归一化处理，/＞表示第一候选变化节点的优选程度。进一步的，计算每个变化节点的置信程度的方法为：对于任意一个销售位置，将第j种类型的销售数据序列中的第k个变化节点记为，在第z中类型的销售数据序列中获取与变化节点/＞时间间隔最近的变化节点，记为变化节点/＞在第z类型上的参考节点/＞。同理获取每个变化节点的参考节点。根据每个变化节点的参考节点得到每个节点的置信程度的方法为：其中，表示销售数据的类型数，exp表示以自然常数为底的指数函数，反映了每个销售位置的第j种类型的销售数据序列中第k个变化节点与其他类型的销售数据序列中参考节点的距离情况，即将该变化节点作为分段节点时，对该类型的销售数据序列进行分段处理，其反映了该变化节点与参考节点的分段差异性，该值越大说明该变化节点的为分段节点的可能性较小，即该变化节点的置信程度越小，/＞表示每个销售位置的第j种类型的销售数据序列中第k个变化节点的置信程度。进一步的，将置信程度大于预设置信阈值Y2的变化节点作为分段节点。本实施例以Y2取0.8为例进行叙述，其他实施例可以取其他值，本实施例不进行具体限制。至此，得到了每个销售位置的每种类型的销售数据序列中的分段节点，通过分段节点能够将波动一致性的数据分在一个范围内。优化K值获取模块103，用于根据每个销售地点的每种类型的若干分段节点得到每个销售地点的每种类型的若干真实区间范围，计算每个真实区间范围的初始K值，根据所有销售地点的所有种类型的若干分段节点得到每个销售地点的每种类型的若干虚拟区间范围，计算每个虚拟区间范围的相似程度，根据每个虚拟区间范围的相似程度得到每个销售地点的每种类型的每个真实区间范围的权值，根据初始K值和权值得到每个销售地点的每种类型的每个真实区间范围的优化K值。具体的，利用分段节点将每个销售位置的每种类型的销售数据序列分割成若干个真实区间范围。需要说明的是，每个真实区间范围内的销售数据的波动一致性较大，因而每个真实区间范围内的销售数据的K值相同，因而不用为每个销售数据设置K值，只需为每个真实区间范围设置K值即可，有效降低计算效率。需要进一步说明的是，由于销售数据本身就存在波动差异，如果直接根据固定K邻域内的数据密度情况来对该数据进行异常判定，其判定精度较低。有些销售数据不是异常数据，其波动也较大，此时为了降低异常误判，需结合更多数据的分布密度来对其进行异常判定。进一步的，每个真实区间范围的初始K值计算方法为：其中，表示每个销售位置的每种类型的销售数据序列中每个真实区间范围内第m个销售数据，/＞表示每个销售位置的每种类型的销售数据序列中每个真实区间范围内所有销售数据的均值，/＞表示每个销售位置的每种类型的销售数据序列中每个真实区间范围内销售数据的数量，/＞反映了每个销售位置的每种类型的销售数据序列中每个真实区间范围内数据波动情况，该值越大其需要更大的K值，即需要参考更多的邻域数据对该范围内的数据进行异常判断，/＞表示预设调节参数，/＞表示预设基准值。/＞表示每个销售位置的每种类型的销售数据序列中每个真实区间范围的初始K值，本实施例以/＞取0.5、取10为例进行叙述，其他实施例可以取其他值，本实施例不进行具体限制，/＞表示向上取整符号。需要说明的是，只根据每个真实波动范围的波动程度设置每个真实波动范围的K值，其检测精度较小。因为波动程度大有可能是异常数据，对于异常数据来说，设置的K值较大会导致异常数据漏检。因而为了防止出现该问题，需对初始K值进行调整。需要进一步说明的是，销售数据出现较大波动一般是由于外界干扰，一般外界干扰不会只导致一个销售位置的一种类型的销售数据发生较大波动，其应该会导致多个销售位置的多种类型的销售数据发生较大波动，并且其波动具有相似的波动一致性。因而可以通过分析每个真实区间范围内多个销售位置的多种类型的销售数据的波动一致性情况来对初始K值进行修正。进一步的，获取每个销售位置的每个类型的销售数据序列中的分段节点的位置，将所有销售位置的所有类型的销售数据序列中的所有分段节点的位置构成节点位置集合。将节点位置集合中各元素称为节点位置。在每个销售位置的每个类型的销售数据序列中获取每个节点位置处的销售数据，记为每个销售位置的每个类型的销售数据序列的虚拟节点。利用所有的虚拟节点将每个销售位置的每个类型的销售数据序列分割成若干虚拟区间范围。获取每个虚拟区间范围的相似度的方法为：其中，表示第a个销售位置的第b种类型的销售数据序列的每个虚拟区间范围内的第s个销售数据，/＞表示所有销售位置的第b种类型的销售数据序列的每个虚拟区间范围内第s个销售数据的均值，/＞表示第a个销售位置的所有类型的销售数据序列的每个虚拟区间范围内第s个销售数据的均值，/＞表示销售位置的数量，/＞表示销售数据的类型数，/＞表示第a个销售位置的第b种类型的销售数据序列的每个虚拟区间范围内销售数据的数量。/＞表示第a个销售位置的第b种类型的销售数据序列的每个虚拟区间范围的相似度。/＞表示连乘符号。需要说明的是，该相似度计算方法是借鉴了皮尔逊相关系数的计算方法，皮尔逊相关系数的计算方法为现有技术，此处不再进行赘述。进一步的，根据每个虚拟区间范围的相似度得到每个真实区间范围的权值的方法为：获取每个销售位置的每种类型的销售数据序列的每个真实区间范围内的虚拟区间范围，将每个销售位置的每种类型的销售数据序列的每个真实区间范围内的所有虚拟区间范围的相似度求均值之后取倒数得到每个销售位置的每种类型的销售数据序列的每个真实区间范围的权值。至此，得到每个真实区间范围的权值，下面需利用权值对每个真实区间范围的初始K值进行修正处理。进一步的，每个真实区间范围的优化K值为：其中，表示每个销售位置的每种类型的销售数据序列的每个真实区间范围的初始K值，/＞表示每个销售位置的每种类型的销售数据序列的每个真实区间范围的权值，/＞表示每个销售位置的每种类型的销售数据序列的每个真实区间范围的优化K值。异常检测模块104，用于根据每个真实区间范围的优化K值对每个销售地点的每种类型的销售数据序列进行异常检测得到异常数据。具体的，将每个销售位置的每种类型的销售数据序列的每个真实区间范围的优化K值作为每个销售位置的每种类型的销售数据序列中每个销售数据的优化K值。将每个销售数据的优化K值作为K值，利用LOF算法对每个销售位置的每种类型的销售数据序列中的销售数据进行处理，得到离群点集合和聚集点集合。将离群点集合中的销售数据判定为异常数据。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
