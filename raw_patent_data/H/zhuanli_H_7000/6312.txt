标题title
一种智能物联网系统的实现方法
摘要abst
本发明提供了一种智能物联网系统的实现方法，所述系统包括边缘节点、传感节点和用户节点；配置报警装置的边缘节点又称为报警节点，每个所述传感节点和所述用户节点分别与所述的一个边缘节点链接。用户通过本发明所提供的一种智能物联网系统的实现方法能够快速获取所在监测环境下的监测数据，从而实现实时监测，有效缩短了获取监测数据的延迟和代价，提高了服务质量，本发明可应用于工业环境的监测、道路安全环境监测以及环境监测等多个领域，具有广泛的应用前景。
权利要求书clms
1.一种智能物联网系统的实现方法，其特征在于，所述系统包括边缘节点、传感节点和用户节点；配置报警装置的边缘节点又称为报警节点，每个所述传感节点和所述用户节点分别与所述的一个边缘节点链接；每个边缘节点具有唯一的坐标，每个传感节点能创建一种类型的数据；每种类型的数据由一个全局前缀标识，创建一种类型数据的地点由本地前缀标识；所述报警节点定期向其它所述边缘节点发送发布消息，以在其它所述边缘节点中创建和更新报警表项；其中，所述发布消息包括第一消息ID域和坐标域，所述报警表项包括坐标域和生命周期域；所述边缘节点定期向其它所述边缘节点发送邻居消息，以在其它所述边缘节点中创建和更新邻居表项；其中，所述邻居消息包括第二消息ID域和坐标域，所述邻居表项包括坐标域和生命周期域；若所述边缘节点不为所述报警节点，且检测到所述邻居表项标识的邻居边缘节点异常，则向距离最近的所述报警节点发送出错消息，以触发该报警节点中的报警装置进行报警；其中，所述出错消息包括第三消息ID域、邻居表项域和出错坐标域；所述边缘节点向所述传感节点发送创建消息获取传感节点采集的数据，所述传感节点通过发送收集消息将创建的数据返回给所述边缘节点，所述边缘节点通过创建或者更新本地表项保存采集的数据；其中，所述创建消息包括第四消息ID域，所述收集消息包括第五消息ID域、数据域和全局前缀域，所述本地表项包括全局前缀域和数据域。2.根据权利要求1所述的一种智能物联网系统的实现方法，其特征在于，所述方法还包括：若所述边缘节点检测到表名等于自己坐标的本地表的某些本地表项中的数据异常，则该边缘节点创建一个本地表，该本地表为空，该表的表名为该边缘节点的坐标；将所有数据异常的本地表项加入到该本地表中，同时向其它所述边缘节点发送报警消息；其中，所述报警消息包括第五消息ID域、序列号域和本地表集合域；接收到报警消息的所述边缘节点通过推送表判断是否已经接收到所述报警消息，其中，一个推送表项包含序列号域和生命周期域，若是，则放弃该消息，否则，所述边缘节点创建或者更新推送表项，同时更新报警消息中的本地表集合域值，转发该报警消息。3.根据权利要求2所述的一种智能物联网系统的实现方法，其特征在于，所述边缘节点创建或者更新推送表项，同时更新报警消息中的本地表集合域值，包括：创建一个推送表项，该表项的序列号等于该报警消息中的随机数，生命周期设置为最大值；若表名为自己坐标的本地表存在至少一个本地表项，该表项中的数据存在异常，则创建一个本地表，该表的表名为自己的坐标，将选中的所有数据表项加入到该本地表中，将该本地表加入到报警消息中的本地表集合中；接收到报警消息的边缘节点转发该报警消息。4.根据权利要求1所述的一种智能物联网系统的实现方法，其特征在于，所述方法还包括：所述用户节点向所述边缘节点发送兴趣消息获取全局前缀和本地前缀标识的数据；其中，所述兴趣消息包括第七消息ID域、全局前缀域、本地前缀域和坐标域；若所述兴趣消息的全局前缀域值为空，则获取符合创建地点坐标等于该兴趣消息中的本地前缀的所有数据；若所述兴趣消息的全局前缀域值不为空，则获取符合由兴趣消息的全局前缀域值标识的数据，且该数据的创建地点坐标等于该兴趣消息中的本地前缀域值的数据；接收到所述兴趣消息的边缘节点，若能提供所述兴趣消息中全局前缀域值和本地前缀域值标识的数据，则向所述用户节点发送数据消息，该数据消息通过订阅表项返回至所述用户节点；其中，所述数据消息包括第八消息ID域、全局前缀域、本地前缀域和本地表域，所述订阅表项包括全局前缀域、局部前缀域和生命周期域。5.根据权利要求4所述的一种智能物联网系统的实现方法，其特征在于，所述用户节点通过发送兴趣消息发起全局前缀标识的数据的获取过程包括：若接收到所述兴趣消息的边缘节点能提供数据，则发送数据消息；若接收到所述兴趣消息的边缘节点存在一个订阅表项，该表项的全局前缀和局部前缀分别等于该兴趣消息中的全局前缀和局部前缀，则不转发兴趣消息；接收到所述兴趣消息的边缘节点创建一个订阅表项，该表项的全局前缀和局部前缀分别等于该兴趣消息中的全局前缀和局部前缀，选择一个邻居表项，该表项的坐标与该兴趣消息中的局部前缀距离最近，将该兴趣消息的坐标设置为该邻居表项的坐标，转发该兴趣消息。6.根据权利要求4所述的一种智能物联网系统的实现方法，其特征在于，所述方法还包括：若所述数据消息中的全局前缀不为空，以及接收到该数据消息的边缘节点存在一个订阅表项，该表项的全局前缀和局部前缀分别等于该数据消息中的全局前缀和局部前缀，则删除该表项，转发该数据消息；若所述数据消息中的全局前缀为空，以及同时接收到该数据消息的边缘节点存在一个订阅表项，该表项的全局前缀和局部前缀分别等于该数据消息中的全局前缀和局部前缀，则删除该表项，转发该数据消息；若接收到所述数据消息的边缘节点存在一个订阅表项，该表项的全局前缀不等于空，且局部前缀等于该数据消息中的局部前缀，则针对每个选择的订阅表项执行下述操作：从数据消息中的本地表中选择一个本地表项，该表项的全局前缀等于订阅表项中的全局前缀，发送一个数据消息，全局前缀和本地前缀分别等于该订阅表项的全局前缀和本地前缀，本地表只包含选中的本地表项；接收到所述数据消息的边缘节点选择所有全局前缀不等于空，且局部前缀等于该数据消息中的局部前缀的订阅表项，删除这些表项。7.根据权利要求5所述的一种智能物联网系统的实现方法，其特征在于，若接收到所述兴趣消息的边缘节点能提供数据，则执行下述步骤：接收到所述兴趣消息的边缘节点判断该兴趣消息中的全局前缀域值是否为空，若是，则接收到所述兴趣消息的边缘节点选择一个本地表，该本地表的表名等于该兴趣消息中的本地前缀，发送一个数据消息，该消息的全局前缀和本地前缀分别等于该兴趣消息中的全局前缀和本地前缀，本地表为选中的本地表，执行数据消息转发流程；若否，则接收到所述兴趣消息的边缘节点选择一个本地表，该本地表的表名等于该兴趣消息中的本地前缀，从该本地表中选择一个本地表项，该表项的全局前缀等于该兴趣消息中的全局前缀，发送一个数据消息，该消息全局前缀和本地前缀分别等于该兴趣消息中的全局前缀和本地前缀，本地表只包含选中的本地表项，执行数据消息转发流程。
说明书desc
技术领域本发明涉及一种实现方法，尤其涉及的是一种智能物联网系统的实现方法。背景技术近年来，很多研究工作致力于物联网，以便通过物联网能够快速获取各种监测网络服务。随着物联网的发展，物联网会成为未来提供监测服务的一种模式。目前，物联网的实现模式是通过广播来实现，因此延迟和代价都比较大，降低了环境监测服务性能。因此，如何降低物联网提供监测数据的延迟和代价成为近年来研究的热点问题。发明内容发明目的：本发明所要解决的技术问题是针对现有技术的不足，提供一种智能物联网系统的实现方法。技术方案：本发明公开了一种智能物联网系统的实现方法，所述系统包括边缘节点、传感节点和用户节点；配置报警装置的边缘节点又称为报警节点，每个所述传感节点和所述用户节点分别与所述的一个边缘节点链接；每个边缘节点具有唯一的坐标，每个传感节点能创建一种类型的数据；每种类型的数据由一个全局前缀标识，创建一种类型数据的地点由本地前缀标识；所述报警节点定期向其它所述边缘节点发送发布消息，以在其它所述边缘节点中创建和更新报警表项；其中，所述发布消息包括第一消息ID域和坐标域，所述报警表项包括坐标域和生命周期域；所述边缘节点定期向其它所述边缘节点发送邻居消息，以在其它所述边缘节点中创建和更新邻居表项；其中，所述邻居消息包括第二消息ID域和坐标域，所述邻居表项包括坐标域和生命周期域；若所述边缘节点不为所述报警节点，且检测到所述邻居表项标识的邻居边缘节点异常，则向距离最近的所述报警节点发送出错消息，以触发该报警节点中的报警装置进行报警；其中，所述出错消息包括第三消息ID域、邻居表项域和出错坐标域；所述边缘节点向所述传感节点发送创建消息获取传感节点采集的数据，所述传感节点通过发送收集消息将创建的数据返回给所述边缘节点，所述边缘节点通过创建或者更新本地表项保存采集的数据；其中，所述创建消息包括第四消息ID域，所述收集消息包括第五消息ID域、数据域和全局前缀域，所述本地表项包括全局前缀域和数据域。在一些实施例中，所述方法还包括：若所述边缘节点检测到表名等于自己坐标的本地表的某些本地表项中的数据异常，则该边缘节点创建一个本地表，该本地表为空，该表的表名为该边缘节点的坐标；将所有数据异常的本地表项加入到该本地表中，同时向其它所述边缘节点发送报警消息；其中，所述报警消息包括第五消息ID域、序列号域和本地表集合域；接收到报警消息的所述边缘节点通过推送表判断是否已经接收到所述报警消息，其中，一个推送表项包含序列号域和生命周期域，若是，则放弃该消息，否则，所述边缘节点创建或者更新推送表项，同时更新报警消息中的本地表集合域值，转发该报警消息。在一些实施例中，所述边缘节点创建或者更新推送表项，同时更新报警消息中的本地表集合域值，包括：创建一个推送表项，该表项的序列号等于该报警消息中的随机数，生命周期设置为最大值；若表名为自己坐标的本地表存在至少一个本地表项，该表项中的数据存在异常，则创建一个本地表，该表的表名为自己的坐标，将选中的所有数据表项加入到该本地表中，将该本地表加入到报警消息中的本地表集合中；接收到报警消息的边缘节点转发该报警消息。在一些实施例中，所述方法还包括：所述用户节点向所述边缘节点发送兴趣消息获取全局前缀和本地前缀标识的数据；其中，所述兴趣消息包括第七消息ID域、全局前缀域、本地前缀域和坐标域；若所述兴趣消息的全局前缀域值为空，则获取符合创建地点坐标等于该兴趣消息中的本地前缀的所有数据；若所述兴趣消息的全局前缀域值不为空，则获取符合由兴趣消息的全局前缀域值标识的数据，且该数据的创建地点坐标等于该兴趣消息中的本地前缀域值的数据；接收到所述兴趣消息的边缘节点，若能提供所述兴趣消息中全局前缀域值和本地前缀域值标识的数据，则向所述用户节点发送数据消息，该数据消息通过订阅表项返回至所述用户节点；其中，所述数据消息包括第八消息ID域、全局前缀域、本地前缀域和本地表域，所述订阅表项包括全局前缀域、局部前缀域和生命周期域。在一些实施例中，所述用户节点通过发送兴趣消息发起全局前缀标识的数据的获取过程包括：若接收到所述兴趣消息的边缘节点能提供数据，则发送数据消息；若接收到所述兴趣消息的边缘节点存在一个订阅表项，该表项的全局前缀和局部前缀分别等于该兴趣消息中的全局前缀和局部前缀，则不转发兴趣消息；接收到所述兴趣消息的边缘节点创建一个订阅表项，该表项的全局前缀和局部前缀分别等于该兴趣消息中的全局前缀和局部前缀，选择一个邻居表项，该表项的坐标与该兴趣消息中的局部前缀距离最近，将该兴趣消息的坐标设置为该邻居表项的坐标，转发该兴趣消息。在一些实施例中，所述方法还包括：若所述数据消息中的全局前缀不为空，以及接收到该数据消息的边缘节点存在一个订阅表项，该表项的全局前缀和局部前缀分别等于该数据消息中的全局前缀和局部前缀，则删除该表项，转发该数据消息；若所述数据消息中的全局前缀为空，以及同时接收到该数据消息的边缘节点存在一个订阅表项，该表项的全局前缀和局部前缀分别等于该数据消息中的全局前缀和局部前缀，则删除该表项，转发该数据消息；若接收到所述数据消息的边缘节点存在一个订阅表项，该表项的全局前缀不等于空，且局部前缀等于该数据消息中的局部前缀，则针对每个选择的订阅表项执行下述操作：从数据消息中的本地表中选择一个本地表项，该表项的全局前缀等于订阅表项中的全局前缀，发送一个数据消息，全局前缀和本地前缀分别等于该订阅表项的全局前缀和本地前缀，本地表只包含选中的本地表项；接收到所述数据消息的边缘节点选择所有全局前缀不等于空，且局部前缀等于该数据消息中的局部前缀的订阅表项，删除这些表项。在一些实施例中，若接收到所述兴趣消息的边缘节点能提供数据，则执行下述步骤：接收到所述兴趣消息的边缘节点判断该兴趣消息中的全局前缀是否为空，若是，则接收到所述兴趣消息的边缘节点选择一个本地表，该本地表的表名等于该兴趣消息中的本地前缀，发送一个数据消息，该消息的全局前缀和本地前缀分别等于该兴趣消息中的全局前缀和本地前缀，本地表为选中的本地表，执行数据消息转发流程；若否，则接收到所述兴趣消息的边缘节点选择一个本地表，该本地表的表名等于该兴趣消息中的本地前缀，从该本地表中选择一个本地表项，该表项的全局前缀等于该兴趣消息中的全局前缀，发送一个数据消息，该消息全局前缀和本地前缀分别等于该兴趣消息中的全局前缀和本地前缀，本地表只包含选中的本地表项，执行数据消息转发流程。有益效果：本发明提供了一种智能物联网系统的实现方法，用户通过本发明所提供的一种智能物联网系统的实现方法能够快速获取所在监测环境下的监测数据，从而实现实时监测，有效缩短了获取监测数据的延迟和代价，提高了服务质量，本发明可应用于工业环境的监测、道路安全环境监测以及环境监测等多个领域，具有广泛的应用前景。附图说明下面结合附图和具体实施方式对本发明做更进一步的具体说明，本发明的上述和/或其他方面的优点将会变得更加清楚。图1为本发明所述的建立报警表流程示意图；图2为本发明所述的建立邻居表流程示意图；图3为本发明所述的检测流程示意图；图4为本发明所述的建立本地表流程示意图；图5为本发明所述的建立报警流程示意图；图6为本发明所述的获取全局前缀不为空的数据流程示意图；图7为本发明所述的获取全局前缀为空的数据流程示意图。具体实施方式图1为本发明所述的建立报警表流程示意图。所述系统包括边缘节点、传感节点和用户节点；其中，配置报警装置的边缘节点又称为报警节点；每个传感节点与一个边缘节点链接；每个用户节点与一个边缘节点链接；每个边缘节点具有唯一的坐标；每种类型的数据由一个全局前缀标识，例如瓦斯浓度，创建一种类型数据的地点由本地前缀标识；每个传感节点能创建一种类型的数据，例如瓦斯浓度；每个边缘节点保存一个报警表，一个报警表项包含坐标和生命周期；每种消息由一个消息ID标识；发布消息包含消息ID和坐标；报警节点AD1定期执行下述过程建立报警表项：步骤101：开始；步骤102：报警节点AD1发送一个发布消息，该消息的消息ID为1，坐标为自己的坐标；步骤103：接收到该发布消息的边缘节点查看报警表，如果存在一个报警表项，该表项的坐标等于该发布消息中的坐标，且该报警表项的生命周期与最大生命周期之差的绝对值小于阈值THT1，阈值THT1的取值范围为最大生命周期的90%-100%，则执行步骤108，否则执行步骤104；步骤104：接收到该发布消息的边缘节点判断是否存在一个报警表项，该表项的坐标等于该发布消息中的坐标，如果存在，则执行步骤105，否则执行步骤106；步骤105：接收到该发布消息的边缘节点选择一个报警表项，该表项的坐标等于该发布消息中的坐标，将该表项的生命周期设置为最大值，例如500ms，执行步骤107；步骤106：接收到该发布消息的边缘节点创建一个报警表项，该表项的坐标等于该发布消息中的坐标，将该表项的生命周期设置为最大值；步骤107：接收到该发布消息的边缘节点转发该发布消息，执行步骤103；步骤108：结束。报警节点通过上述过程发送报警消息在其他边缘节点建立自己的报警表项，这样，当边缘节点检测到异常时，可以选择距离最近的报警节点实现报警，进而实现实时处理，例如矿井瓦斯浓度超标，矿工会及时撤离矿井，上述过程中，报警表项通过生命周期来确保其有效性，从而实现了实时报警。图2为本发明所述的建立邻居表流程示意图。每个边缘节点保存一个邻居表，一个邻居表项包含坐标和生命周期；邻居消息包含消息ID和坐标；边缘节点ED1定期执行下述操作：步骤201：开始；步骤202：边缘节点ED1发送一个邻居消息，该消息的消息ID为2，坐标为自己的坐标；步骤203：接收到该邻居消息的边缘节点判断是否存在一个邻居表项，该表项的坐标等于该邻居消息中的坐标，如果存在，则执行步骤204，否则执行步骤205；步骤204：接收到该邻居消息的边缘节点选择一个邻居表项，该表项的坐标等于该邻居消息中的坐标，将该邻居表项的生命周期设置为最大值，执行步骤206；步骤205：接收到该邻居消息的边缘节点创建一个邻居表项，该表项的坐标等于该邻居消息中的坐标，将该邻居表项的生命周期设置为最大值；步骤206：结束。边缘节点通过上述过程发送邻居消息在其他边缘节点创建邻居表项，这样边缘节点通过邻居表项中的坐标可以建立到达目标节点的最优路由路径，从而提高数据性能。上述过程中，邻居表项通过生命周期来确保邻居表项的有效性，进而实现了数据通信的实时性和有效性。图3为本发明所述的检测流程示意图。出错消息包含消息ID，邻居表项，坐标；如果边缘节点ED1不是报警节点且检测到邻居表项NE1的生命周期衰减为0，则执行下述操作：步骤301：开始；步骤302：边缘节点ED1选择一个符和条件1的报警表项，选择一个邻居表项，该邻居表项的坐标与该报警表项的坐标之间的距离小于边缘节点ED1的坐标与该报警表项的坐标之间的距离，发送一个出错消息，该消息的消息ID为3，该邻居表项为表项NE1，坐标等该邻居表项中的坐标，删除邻居表项NE1；条件1：边缘节点ED1至少存在一个邻居表项，该邻居表项的坐标与该报警表项的坐标之间的距离小于边缘节点ED1的坐标与该报警表项的坐标之间的距离；步骤303：接收到出错消息的边缘节点判断自己是否为报警节点，如果是，则执行步骤306，否则执行步骤304；步骤304：接收到出错消息的边缘节点判断自己的坐标是否等于该出错消息中的坐标，如果等于，则执行步骤305，否则执行步骤306；步骤305：接收到出错消息的边缘节点选择一个报警表项，该表项的坐标距离自己最近，选择一个邻居表项，该表项的坐标与该报警表项中的坐标距离最近，将报警消息中的坐标设置为该邻居表项中的坐标，转发该报警消息，执行步骤303；步骤306：结束。边缘节点检测到邻居边缘节点出错后，通过上述过程发送出错消息向距离最近的报警节点发送出错信息，报警节点接收到出错消息后，实施报警操作以便工作人员进行及时维修和处理，进而确保数据通信正常实施。图4为本发明所述的建立本地表流程示意图。每个边缘节点保存一个本地表，一个本地表的表名为边缘节点的坐标值，一个本地表项包含全局前缀，数据和生命周期；创建消息包含消息ID；收集消息包含消息ID，数据和全局前缀；边缘节点ED1定期执行下述操作：步骤401：开始；步骤402：边缘节点ED1判断是否存在一个本地表，该表的表名等于自己的坐标值，如果存在，则执行步骤403，否则执行步骤404；步骤403：边缘节点ED1选择一个本地表，该表的表名等于自己的坐标值，清空该本地表，执行步骤405；步骤404：边缘节点ED1创建一个本地表，该表的表名等于自己的坐标值；步骤405：边缘节点ED1发送一个创建消息，该消息的消息ID为4；步骤406：接收到该创建消息的传感节点创建数据，发送一个收集消息，该消息的消息ID为5，数据为创建的数据，全局前缀为标识该创建的数据的全局前缀；步骤407：边缘节点ED1针对每个接收到的收集消息执行下述操作：判断是否存在一个本地表项，该表项的全局前缀等于该收集消息中的全局前缀，如果存在，则将该表项的生命周期设置为最大值，否则，创建一个本地表项，该表项的全局前缀和数据分别等于该收集消息中的全局前缀和数据，生命周期设置为最大生命周期；步骤408：结束。边缘节点通过上述过程发送创建消息和收集消息从邻居传感节点获取本地数据，并创建本地表，从而克服了传感节点资源有限的问题，本地表通过生命周期确保数据的实时性和有效性，从而确保了数据通信的实时性和有效性。图5为本发明所述的建立报警流程示意图。每个边缘节点保存一个推送表，一个推送表项包含序列号和生命周期；报警消息包含消息ID，序列号和本地表集合；如果边缘节点ED1检测到表名等于自己坐标的本地表的某些本地表项中的数据异常，例如瓦斯浓度超过阈值，则执行下述操作：步骤501：开始；步骤502：边缘节点ED1产生一个随机数RN1，创建一个本地表，该表的表名为自己的坐标，将所有数据异常的本地表项加入到该本地表中，发送报警消息，该消息的消息ID为6，序列号为随机数RN1，本地表集合包含一个元素，即创建的本地表；步骤503：如果用户节点或者传感节点接收到该报警消息后，执行步骤508，否则执行步骤504；步骤504：接收到报警消息的边缘节点判断是否存在一个推送表项，该表项的序列号等于该报警消息中的序列号，如果存在，则执行步骤508，否则执行步骤505；步骤505：接收到报警消息的边缘节点创建一个推送表项，该表项的序列号等于该报警消息中的随机数，生命周期设置为最大值，判断表名为自己坐标的本地表是否存在至少一个本地表项，该表项中的数据存在异常，例如瓦斯浓度超过阈值，如果存在，则执行步骤506，否则执行步骤507；步骤506：接收到报警消息的边缘节点选中表名为自己坐标的本地表中所有数据异常的本地表项，创建一个本地表，该表的表名为自己的坐标，将选中的所有数据表项加入到该本地表中，将该本地表加入到报警消息中的本地表集合中；步骤507：接收到报警消息的边缘节点转发该报警消息，执行步骤503；步骤508：结束。边缘节点检测到数据异常后，通过上述过程发送报警消息，从而使网络中所有节点获取该异常数据，从而实施有效措施，例如当检测到瓦斯浓度高时，会发送上述报警消息从而使矿工及时撤离矿井。上述过程中，报警消息只通过边缘节点进行推送，同时实现了数据融合，从而增加了数据精确度，并节省了传感节点的电能，同时上述过程通过推送表来确保不重复发布报警消息，因此提高了数据推送的效率，降低了数据推送的代价和延迟。图6为本发明所述的获取全局前缀不为空的数据流程示意图。每个边缘节点保存一个订阅表，一个订阅表项包含全局前缀，局部前缀和生命周期；兴趣消息包含消息ID，全局前缀，本地前缀和坐标；数据消息包含消息ID，全局前缀，本地前缀和本地表；如果用户节点UN1通过下述过程获取全局前缀GP1标识的数据，该数据的创建地点坐标为LP1：步骤601：开始；步骤602：用户节点UN1发送兴趣消息，该消息的消息ID为7，全局前缀为GP1，本地前缀为LP1，坐标为空；步骤603：接收到该兴趣消息的边缘节点判断坐标是否为空，如果是，则执行步骤605，否则执行步骤604；步骤604：接收到该兴趣消息的边缘节点判断自己的坐标是否等于该兴趣消息中的坐标，如果是，则执行步骤605，否则执行步骤622；步骤605：接收到该兴趣消息的边缘节点判断是否存在一个本地表，该本地表的表名等于该兴趣消息中的本地前缀，如果存在，则执行步骤606，否则执行步骤609；步骤606：接收到该兴趣消息的边缘节点判断该兴趣消息的全局前缀是否为空，如果是，则执行步骤607，否则执行步骤608；步骤607：接收到该兴趣消息的边缘节点选择一个本地表，该本地表的表名等于该兴趣消息中的本地前缀，发送一个数据消息，该消息的消息ID为8，全局前缀和本地前缀分别等于该兴趣消息中的全局前缀和本地前缀，本地表为选中的本地表，执行步骤613；步骤608：接收到该兴趣消息的边缘节点选择一个本地表，该本地表的表名等于该兴趣消息中的本地前缀，从该本地表中选择一个本地表项，该表项的全局前缀等于该兴趣消息中的全局前缀，发送一个数据消息，该消息的消息ID为8，全局前缀和本地前缀分别等于该兴趣消息中的全局前缀和本地前缀，本地表只包含选中的本地表项，执行步骤613；步骤609：接收到该兴趣消息的边缘节点判断是否存在一个订阅表项，该表项的全局前缀和局部前缀分别等于该兴趣消息中的全局前缀和局部前缀，如果存在，则执行步骤613，否则执行步骤610；步骤610：接收到该兴趣消息的边缘节点创建一个订阅表项，该表项的全局前缀和局部前缀分别等于该兴趣消息中的全局前缀和局部前缀，生命周期设置为最大值，该边缘节点判断该兴趣消息的全局前缀是否为空，如果是，则执行步骤612，否则执行步骤611；步骤611：接收到该兴趣消息的边缘节点判断是否存在一个订阅表项，该表项的全局前缀为空且局部前缀等于该兴趣消息中的局部前缀，如果存在，则执行步骤613，否则执行步骤612；步骤612：接收到该兴趣消息的边缘节点选择一个邻居表项，该表项的坐标与该兴趣消息中的局部前缀距离最近，将该兴趣消息的坐标设置为该邻居表项的坐标，转发该兴趣消息，执行步骤603；步骤613：如果用户节点或者传感节点接收到该数据消息，则执行步骤622，否则执行步骤614；步骤614：接收到该数据消息的边缘节点判断该数据消息中的全局前缀是否为空，如果是，则执行步骤617，否则执行步骤615；步骤615：接收到该数据消息的边缘节点判断是否存在一个订阅表项，该表项的全局前缀和局部前缀分别等于该数据消息中的全局前缀和局部前缀，如果存在，则执行步骤616，否则执行步骤622；步骤616：接收到该数据消息的边缘节点选择一个订阅表项，该表项的全局前缀和局部前缀分别等于该数据消息中的全局前缀和局部前缀，删除该表项，转发该数据消息，执行步骤613；步骤617：接收到该数据消息的边缘节点保存该数据消息中的本地表，判断是否存在一个订阅表项，该表项的全局前缀和局部前缀分别等于该数据消息中的全局前缀和局部前缀，如果存在，则执行步骤618，否则执行步骤619；步骤618：接收到该数据消息的边缘节点选择一个订阅表项，该表项的全局前缀和局部前缀分别等于该数据消息中的全局前缀和局部前缀，删除该表项，转发该数据消息；步骤619：接收到该数据消息的边缘节点判断是否存在一个订阅表项，该表项的全局前缀不等于空，且局部前缀等于该数据消息中的局部前缀，如果存在，则执行步骤620，否则执行步骤613；步骤620：接收到该数据消息的边缘节点判断选择所有全局前缀不等于空，且局部前缀等于该数据消息中的局部前缀的订阅表项，针对每个选择的订阅表项SE1执行下述操作：从数据消息中的本地表中选择一个本地表项，该表项的全局前缀等于订阅表项SE1中的全局前缀，发送一个数据消息，该消息的消息ID为8，全局前缀和本地前缀分别等于该订阅表项SE1的全局前缀和本地前缀，本地表只包含选中的本地表项；步骤621：接收到该数据消息的边缘节点选择所有全局前缀不等于空，且局部前缀等于该数据消息中的局部前缀的订阅表项，删除这些表项，执行步骤613；步骤622：结束。用户节点通过上述过程可以获取与特定坐标关联的数据从而实现对数据的实时监测。上述过程中，多个用户通过订阅表可以通过一次通信过程实现数据共享，同时，上述过程通过邻居表能够从距离最近的边缘节点获取数据，从而降低了数据通信延迟和代价，进一步提高了数据监测效率。图7为本发明所述的获取全局前缀为空的数据流程示意图。如果用户节点UN1通过下述过程获取创建地点坐标为LP1的所有数据：步骤701：开始；步骤702：用户节点UN1发送兴趣消息，该消息的消息ID为7，全局前缀为空，本地前缀为LP1，坐标为空；步骤703：接收到该兴趣消息的边缘节点判断坐标是否为空，如果是，则执行步骤705，否则执行步骤704；步骤704：接收到该兴趣消息的边缘节点判断自己的坐标是否等于该兴趣消息中的坐标，如果是，则执行步骤705，否则执行步骤722；步骤705：接收到该兴趣消息的边缘节点判断坐标是否存在一个本地表，该本地表的表名等于该兴趣消息中的本地前缀，如果存在，则执行步骤706，否则执行步骤709；步骤706：接收到该兴趣消息的边缘节点判断该兴趣消息的全局前缀是否为空，如果是，则执行步骤707，否则执行步骤708；步骤707：接收到该兴趣消息的边缘节点选择一个本地表，该本地表的表名等于该兴趣消息中的本地前缀，发送一个数据消息，该消息的消息ID为8，全局前缀和本地前缀分别等于该兴趣消息中的全局前缀和本地前缀，本地表为选中的本地表，执行步骤713；步骤708：接收到该兴趣消息的边缘节点选择一个本地表，该本地表的表名等于该兴趣消息中的本地前缀，从该本地表中选择一个本地表项，该表项的全局前缀等于该兴趣消息中的全局前缀，发送一个数据消息，该消息的消息ID为8，全局前缀和本地前缀分别等于该兴趣消息中的全局前缀和本地前缀，本地表只包含选中的本地表项，执行步骤713；步骤709：接收到该兴趣消息的边缘节点判断是否存在一个订阅表项，该表项的全局前缀和局部前缀分别等于该兴趣消息中的全局前缀和局部前缀，如果存在，则执行步骤713，否则执行步骤710；步骤710：接收到该兴趣消息的边缘节点创建一个订阅表项，该表项的全局前缀和局部前缀分别等于该兴趣消息中的全局前缀和局部前缀，生命周期设置为最大值，该边缘节点判断该兴趣消息的全局前缀是否为空，如果是，则执行步骤712，否则执行步骤711；步骤711：接收到该兴趣消息的边缘节点判断是否存在一个订阅表项，该表项的全局前缀为空且局部前缀等于该兴趣消息中的局部前缀，如果存在，则执行步骤713，否则执行步骤712；步骤712：接收到该兴趣消息的边缘节点选择一个邻居表项，该表项的坐标与该兴趣消息中的局部前缀距离最近，将该兴趣消息的坐标设置为该邻居表项的坐标，转发该兴趣消息，执行步骤703；步骤713：如果用户节点或者传感节点接收到该数据消息，则执行步骤722，否则执行步骤714；步骤714：接收到该数据消息的边缘节点判断该数据消息中的全局前缀是否为空，如果是，则执行步骤717，否则执行步骤715；步骤715：接收到该数据消息的边缘节点判断是否存在一个订阅表项，该表项的全局前缀和局部前缀分别等于该数据消息中的全局前缀和局部前缀，如果存在，则执行步骤716，否则执行步骤722；步骤716：接收到该数据消息的边缘节点选择一个订阅表项，该表项的全局前缀和局部前缀分别等于该数据消息中的全局前缀和局部前缀，删除该表项，转发该数据消息，执行步骤713；步骤717：接收到该数据消息的边缘节点保存该数据消息中的本地表，判断是否存在一个订阅表项，该表项的全局前缀和局部前缀分别等于该数据消息中的全局前缀和局部前缀，如果存在，则执行步骤718，否则执行步骤719；步骤718：接收到该数据消息的边缘节点选择一个订阅表项，该表项的全局前缀和局部前缀分别等于该数据消息中的全局前缀和局部前缀，删除该表项，转发该数据消息；步骤719：接收到该数据消息的边缘节点判断是否存在一个订阅表项，该表项的全局前缀不等于空，且局部前缀等于该数据消息中的局部前缀，如果存在，则执行步骤720，否则执行步骤713；步骤720：接收到该数据消息的边缘节点判断选择所有全局前缀不等于空，且局部前缀等于该数据消息中的局部前缀的订阅表项，针对每个选中的订阅表项SE1执行下述操作：从数据消息中的本地表中选择一个本地表项，该表项的全局前缀等于订阅表项SE1中的全局前缀，发送一个数据消息，该消息的消息ID为8，全局前缀和本地前缀分别等于该订阅表项SE1的全局前缀和本地前缀，本地表只包含选中的本地表项；步骤721：接收到该数据消息的边缘节点选择所有全局前缀不等于空，且局部前缀等于该数据消息中的局部前缀的订阅表项，删除这些表项，执行步骤713；步骤722：结束。用户节点通过上述过程可以获取与特定坐标关联的所有监测数据从而实现对地点的实时监测。上述过程中，多个用户通过订阅表可以通过一次通信过程实现数据共享，同时，上述过程通过邻居表能够从距离最近的边缘节点获取数据，从而降低了数据通信延迟和代价，进一步提高了数据监测效率。实施例1基于表1的仿真参数，本实施例模拟了本发明中的一种智能物联网系统的实现方法。报警节点AD1启动后，执行步骤101-108建立报警表，例如报警表项的生命周期为500ms。边缘节点ED1启动后，执行步骤201-206建立邻居表，例如邻居表项的生命周围1000ms。如果边缘节点ED1不是报警节点且检测到邻居表项NE1的生命周期衰减为0，则执行步骤301-306实施检测操作。边缘节点ED1定期执行步骤401-408建立本地表，例如本地表项的全局前缀是瓦斯浓度。如果边缘节点ED1检测数据异常，例如瓦斯浓度超过阈值，则执行步骤501-508实施报警操作。如果用户节点UN1想获取全局前缀GP1标识的数据，该数据的创建地点坐标为LP1，则执行步骤601-622获取目标数据。如果用户节点UN1想获取创建地点坐标为LP1的所有数据，则执行步骤701-722。性能分析如下：当用户节点与保存数据的边缘节点距离较远时，用户节点获取数据的成功率有所下降，当用户节点与保存数据的边缘节点距离较近时，用户节点获取数据的成功率有所上升，用户节点获取数据的平均成功率为96.7%。本发明提供了一种智能物联网系统的实现方法的思路，具体实现该技术方案的方法和途径很多，以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本发明的保护范围。本实施例中未明确的各组成部份均可用现有技术加以实现。
