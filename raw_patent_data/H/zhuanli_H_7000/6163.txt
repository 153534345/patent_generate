标题title
样本标识的对齐方法、装置、电子设备及存储介质
摘要abst
本申请提供了一种样本标识的对齐方法、装置、电子设备及存储介质；方法包括：针对多个第一数据样本，分别对每个第一数据样本的第一样本标识进行加密，得到多个第一加密标识；生成多个第一加密标识对应的索引组，索引组中包括至少一个子索引组，子索引组中的索引用于区分相同的第一加密标识；将多个第一加密标识以及索引组发送至接收方；第一加密标识以及索引组，用于供接收方基于索引组，从多个第一加密标识以及多个第二加密标识中选取得到目标样本标识；接收接收方发送的目标样本标识，并根据目标样本标识以及多个第一加密标识，确定对齐后的样本标识。通过本申请，能够提高样本对齐的速度。
权利要求书clms
1.一种样本标识的对齐方法，其特征在于，所述方法包括：针对多个第一数据样本，分别对每个所述第一数据样本的第一样本标识进行加密，得到多个第一加密标识；当所述多个第一加密标识中存在相同的第一加密标识时，生成多个所述第一加密标识对应的索引组，所述索引组中包括至少一个子索引组，所述子索引组中的索引用于区分相同的第一加密标识；将所述多个第一加密标识以及所述索引组发送至接收方；所述第一加密标识以及所述索引组，用于供所述接收方基于所述索引组，从所述多个第一加密标识以及多个第二加密标识中选取得到目标样本标识；其中，相同的所述目标样本标识所对应的索引相同，所述第二加密标识为，对所述接收方的第二样本标识进行加密所得到；接收所述接收方发送的所述目标样本标识，并根据所述目标样本标识以及所述多个第一加密标识，确定对齐后的样本标识。2.如权利要求1所述的方法，其特征在于，所述生成多个所述第一加密标识对应的索引组，包括：对多个所述第一加密标识进行标识组划分，得到第一加密标识组及第二加密标识组；其中，所述第一加密标识组中的所述第一加密标识相同，所述第二加密标识组中的所述第一加密标识互不相同；分别为所述第一加密标识组中的第一加密标识以及所述第二加密标识组中的第一加密标识，添加对应的索引，得到多个所述第一加密标识对应的索引组。3.如权利要求2所述的方法，其特征在于，所述分别为所述第一加密标识组中的第一加密标识以及所述第二加密标识组中的第一加密标识，添加对应的索引，得到多个所述第一加密标识对应的索引组，包括：为所述第一加密标识组中的每个所述第一加密标识添加不同的索引，得到所述第一加密标识组对应的子索引组；为所述第二加密标识组中的每个所述第一加密标识添加相同的索引；根据每个所述第一加密标识组对应的所述子索引组，以及每个所述第二加密标识组中的索引，构建得到多个所述第一加密标识对应的索引组。4.如权利要求3所述的方法，其特征在于，所述为所述第一加密标识组中的每个所述第一加密标识添加不同的索引，得到所述第一加密标识组对应的子索引组，包括：对所述第一加密标识组中的各所述第一加密标识进行排序，得到第一加密标识序列；基于所述第一加密标识序列中各所述第一加密标识的顺序，为各所述第一加密标识依次添加从小到大排列或从大到小排列的索引，得到所述第一加密标识组对应的子索引组。5.如权利要求3所述的方法，其特征在于，所述为所述第一加密标识组中的每个所述第一加密标识添加不同的索引，得到所述第一加密标识组对应的子索引组，包括：为所述第一加密标识组中的每个所述第一加密标识，随机添加不同的索引，得到所述第一加密标识组对应的子索引组。6.如权利要求1所述的方法，其特征在于，所述生成多个所述第一加密标识对应的索引组，包括：为每个所述第一加密标识添加索引；其中，相同的所述第一加密标识对应的第一索引不同；所述多个第一加密标识中除去相同的所述第一加密标识以外的其他第一加密标识对应的第二索引相同；所述第二索引与多个所述第一索引中的至少一个所述第一索引相同；根据所述第一索引和所述第二索引，构建得到多个所述第一加密标识对应的索引组。7.如权利要求1所述的方法，其特征在于，所述生成多个所述第一加密标识对应的索引组，包括：为相同的第一加密标识添加不同的索引，得到相应的子索引组；根据至少一个所述子索引组，生成多个所述第一加密标识对应的索引组。8.如权利要求1所述的方法，其特征在于，所述根据所述目标样本标识以及所述多个第一加密标识，确定对齐后的样本标识，包括：对所述目标样本标识以及所述多个第一加密标识进行求交，得到对齐后的样本标识。9.一种样本标识的对齐方法，其特征在于，所述方法包括：针对多个第二数据样本，分别对每个所述第二数据样本的第二样本标识进行加密，得到多个第二加密标识；接收发送方发送的多个第一加密标识以及索引组；所述第一加密标识为，对所述发送方的第一样本标识进行加密所得到；当所述多个第一加密标识中存在相同的第一加密标识时，所述索引组包括至少一个子索引组，所述子索引组中的索引用于区分相同的第一加密标识；基于所述索引组，从所述多个第一加密标识以及所述多个第二加密标识中选取得到目标样本标识；其中，相同的所述目标样本标识所对应的索引相同；向所述发送方发送所述目标样本标识；所述目标样本标识，用于供所述发送方根据所述目标样本标识以及所述多个第一加密标识，确定对齐后的样本标识。10.如权利要求9所述的方法，其特征在于，所述基于所述索引组，从所述多个第一加密标识以及所述多个第二加密标识中选取得到目标样本标识，包括：对所述多个第一加密标识以及所述多个第二加密标识进行求交，得到对齐后的样本标识；所述样本标识的索引与所述样本标识对应的所述第一加密标识的索引相同；基于所述索引组，对所述样本标识进行过滤，得到至少一个目标样本标识。11.如权利要求10所述的方法，其特征在于，在所述子索引组中的各所述索引为基于初始数字从小到大依次排列的情况下，所述基于所述索引组，对所述样本标识进行过滤，得到至少一个目标样本标识，包括：从所述样本标识中过滤掉大于所述初始数字的索引对应的所述样本标识，得到至少一个目标样本标识。12.一种样本标识的对齐装置，其特征在于，所述装置包括：第一加密模块，用于针对多个第一数据样本，分别对每个所述第一数据样本的第一样本标识进行加密，得到多个第一加密标识；索引生成模块，用于当所述多个第一加密标识中存在相同的第一加密标识时，生成多个所述第一加密标识对应的索引组，所述索引组中包括至少一个子索引组，所述子索引组中的索引用于区分相同的第一加密标识；第一标识发送模块，用于将所述多个第一加密标识以及所述索引组发送至接收方；所述第一加密标识以及所述索引组，用于供所述接收方基于所述索引组，从所述多个第一加密标识以及多个第二加密标识中选取得到目标样本标识；其中，相同的所述目标样本标识所对应的索引相同，所述第二加密标识为，对所述接收方的第二样本标识进行加密所得到；样本标识确定模块，用于接收所述接收方发送的所述目标样本标识，并根据所述目标样本标识以及所述多个第一加密标识，确定对齐后的样本标识。13.一种样本标识的对齐装置，其特征在于，所述装置包括：第二加密模块，用于针对多个第二数据样本，分别对每个所述第二数据样本的第二样本标识进行加密，得到多个第二加密标识；索引接收模块，用于接收发送方发送的多个第一加密标识以及索引组；所述第一加密标识为，对所述发送方的第一样本标识进行加密所得到；当所述多个第一加密标识中存在相同的第一加密标识时，所述索引组包括至少一个子索引组，所述子索引组中的索引用于区分相同的第一加密标识；标识选取模块，用于基于所述索引组，从所述多个第一加密标识以及所述多个第二加密标识中选取得到目标样本标识；其中，相同的所述目标样本标识所对应的索引相同；第二标识发送模块，用于向所述发送方发送所述目标样本标识；所述目标样本标识，用于供所述发送方根据所述目标样本标识以及所述多个第一加密标识，确定对齐后的样本标识。14.一种电子设备，其特征在于，所述电子设备包括：存储器，用于存储计算机可执行指令；处理器，用于执行所述存储器中存储的计算机可执行指令或者计算机程序时，实现权利要求1至8任一项所述的样本标识的对齐方法或权利要求9至11任一项所述的样本标识的对齐方法。15.一种计算机可读存储介质，存储有计算机可执行指令或者计算机程序，其特征在于，所述计算机可执行指令或者计算机程序被处理器执行时实现权利要求1至8任一项所述的样本标识的对齐方法或权利要求9至11任一项所述的样本标识的对齐方法。16.一种计算机程序产品，包括计算机可执行指令或计算机程序，其特征在于，所述计算机可执行指令或计算机程序被处理器执行时实现权利要求1至8任一项所述的样本标识的对齐方法或权利要求9至11任一项所述的样本标识的对齐方法。
说明书desc
技术领域本申请涉及数据处理技术领域，尤其涉及一种样本标识的对齐方法、装置、电子设备及存储介质。背景技术安全多方计算方法大体上可以分为两类，一类是基于噪音的计算方法，以差分隐私为代表；另一类是基于密码学的计算方法，将原数据编码或者加密，使得人们很难从加密后的数据还原出原始数据，其中，不经意传输算法较为常见。但是当多方的数据中存在重复求交key的时候，使用上述方法进行样本对齐的速度降低。发明内容本申请实施例提供一种样本标识的对齐方法、装置、电子设备及存储介质，能够提高样本对齐的速度。本申请实施例的技术方案是这样实现的：本申请实施例提供一种样本标识的对齐方法，所述方法包括：针对多个第一数据样本，分别对每个所述第一数据样本的第一样本标识进行加密，得到多个第一加密标识；当所述多个第一加密标识中存在相同的第一加密标识时，生成多个所述第一加密标识对应的索引组，所述索引组中包括至少一个子索引组，所述子索引组中的索引用于区分相同的第一加密标识；将所述多个第一加密标识以及所述索引组发送至接收方；所述第一加密标识以及所述索引组，用于供所述接收方基于所述索引组，从所述多个第一加密标识以及多个第二加密标识中选取得到目标样本标识；其中，相同的所述目标样本标识所对应的索引相同，所述第二加密标识为，对所述接收方的第二样本标识进行加密所得到；接收所述接收方发送的所述目标样本标识，并根据所述目标样本标识以及所述多个第一加密标识，确定对齐后的样本标识。本申请实施例提供一种样本标识的对齐方法，所述方法包括：针对多个第二数据样本，分别对每个所述第二数据样本的第二样本标识进行加密，得到多个第二加密标识；接收发送方发送的多个第一加密标识以及索引组；所述第一加密标识为，对所述发送方的第一样本标识进行加密所得到；当所述多个第一加密标识中存在相同的第一加密标识时，所述索引组包括至少一个子索引组，所述子索引组中的索引用于区分相同的第一加密标识；基于所述索引组，从所述多个第一加密标识以及所述多个第二加密标识中选取得到目标样本标识；其中，相同的所述目标样本标识所对应的索引相同；向所述发送方发送所述目标样本标识；所述目标样本标识，用于供所述发送方根据所述目标样本标识以及所述多个第一加密标识，确定对齐后的样本标识。本申请实施例提供一种样本标识的对齐装置，包括：第一加密模块，用于针对多个第一数据样本，分别对每个所述第一数据样本的第一样本标识进行加密，得到多个第一加密标识；索引生成模块，用于当所述多个第一加密标识中存在相同的第一加密标识时，生成多个所述第一加密标识对应的索引组，所述索引组中包括至少一个子索引组，所述子索引组中的索引用于区分相同的第加密标识；第一标识发送模块，用于将所述多个第一加密标识以及所述索引组发送至接收方；所述第一加密标识以及所述索引组，用于供所述接收方基于所述索引组，从所述多个第一加密标识以及多个第二加密标识中选取得到目标样本标识；其中，相同的所述目标样本标识所对应的索引相同，所述第二加密标识为，对所述接收方的第二样本标识进行加密所得到；样本标识确定模块，用于接收所述接收方发送的所述目标样本标识，并根据所述目标样本标识以及所述多个第一加密标识，确定对齐后的样本标识。上述方案中，所述索引生成模块，还用于对多个所述第一加密标识进行标识组划分，得到第一加密标识组及第二加密标识组；其中，所述第一加密标识组中的所述第一加密标识相同，所述第二加密标识组中的所述第一加密标识互不相同；分别为所述第一加密标识组中的第一加密标识以及所述第二加密标识组中的第一加密标识，添加对应的索引，得到多个所述第一加密标识对应的索引组。上述方案中，所述索引生成模块，还用于为所述第一加密标识组中的每个所述第一加密标识添加不同的索引，得到所述第一加密标识组对应的子索引组；为所述第二加密标识组中的每个所述第一加密标识添加相同的索引；根据每个所述第一加密标识组对应的所述子索引组，以及每个所述第二加密标识组中的索引，构建得到多个所述第一加密标识对应的索引组。上述方案中，所述索引生成模块，还用于对所述第一加密标识组中的各所述第一加密标识进行排序，得到第一加密标识序列；基于所述第一加密标识序列中各所述第一加密标识的顺序，为各所述第一加密标识依次添加从小到大排列或从大到小排列的索引，得到所述第一加密标识组对应的子索引组。上述方案中，所述索引生成模块，还用于为所述第一加密标识组中的每个所述第一加密标识，随机添加不同的索引，得到所述第一加密标识组对应的子索引组。上述方案中，所述索引生成模块，还用于为每个所述第一加密标识添加索引；其中，相同的所述第一加密标识对应的第一索引不同；所述多个第一加密标识中除去相同的所述第一加密标识以外的其他第一加密标识对应的第二索引相同；所述第二索引与多个所述第一索引中的至少一个所述第一索引相同；根据所述第一索引和所述第二索引，构建得到多个所述第一加密标识对应的索引组。上述方案中，所述索引生成模块，还用于为相同的第一加密标识添加不同的索引，得到相应的子索引组；根据至少一个所述子索引组，生成多个所述第一加密标识对应的索引组。上述方案中，所述样本标识确定模块，还用于对所述目标样本标识以及所述多个第一加密标识进行求交，得到对齐后的样本标识。本申请实施例提供一种样本标识的对齐装置，包括：第二加密模块，用于针对多个第二数据样本，分别对每个所述第二数据样本的第二样本标识进行加密，得到多个第二加密标识；索引接收模块，用于接收发送方发送的多个第一加密标识以及索引组；所述第一加密标识为，对所述发送方的第一样本标识进行加密所得到；当所述多个第一加密标识中存在相同的第一加密标识时，所述索引组包括至少一个子索引组，所述子索引组中的索引用于区分相同的第一加密标识；标识选取模块，用于基于所述索引组，从所述多个第一加密标识以及所述多个第二加密标识中选取得到目标样本标识；其中，相同的所述目标样本标识所对应的索引相同；第二标识发送模块，用于向所述发送方发送所述目标样本标识；所述目标样本标识，用于供所述发送方根据所述目标样本标识以及所述多个第一加密标识，确定对齐后的样本标识。上述方案中，所述标识选取模块，还用于对所述多个第一加密标识以及所述多个第二加密标识进行求交，得到对齐后的样本标识；所述样本标识的索引与所述样本标识对应的所述第一加密标识的索引相同；基于所述索引组，对所述样本标识进行过滤，得到至少一个目标样本标识。上述方案中，所述标识选取模块，还用于在所述子索引组中的各所述索引为基于初始数字从小到大依次排列的情况下，从所述样本标识中过滤掉大于所述初始数字的索引对应的所述样本标识，得到至少一个目标样本标识。本申请实施例提供一种电子设备，所述电子设备包括：存储器，用于存储计算机可执行指令；处理器，用于执行所述存储器中存储的计算机可执行指令时，实现本申请实施例提供的样本标识的对齐方法。本申请实施例提供一种计算机可读存储介质，存储有计算机程序或计算机可执行指令，用于被处理器执行时实现本申请实施例提供的样本标识的对齐方法。本申请实施例提供一种计算机程序产品，包括计算机程序或计算机可执行指令，述计算机程序或计算机可执行指令被处理器执行时，实现本申请实施例提供的样本标识的对齐方法。本申请实施例具有以下有益效果：本申请实施例将第一样本标识加密得到第一加密标识，第二样本标识加密得到第二加密标识，可以在样本对齐期间，确保双方不暴露自己的原始数据。本申请实施例为第一加密标识添加对应的索引组，将第一加密标识和索引组一起发送至接收方，接收方可以基于索引组从多个第一加密标识以及多个第二加密标识中选取得到目标样本标识，由于索引组包括至少一个子索引组，子索引组中的索引用于区分重复的第一加密标识，接收方可以基于索引组去除重复的数据得到目标样本标识，进而基于接收方发送的目标样本标识和第一加密标识可以确定对齐后的样本标识。当本申请实施例应用在安全样本对齐PSI算法的场景中时，若双方数据中对齐key都有重复数据，可以提高样本对齐的速度。附图说明图1是本申请实施例提供的样本标识的对齐系统架构的结构示意图；图2A是本申请实施例提供的样本标识的对齐装置的结构示意图一；图2B是本申请实施例提供的样本标识的对齐装置的结构示意图二；图3A是本申请实施例提供的样本标识的对齐方法的流程示意图一；图3B是本申请实施例提供的样本标识的对齐方法的流程示意图二；图3C是本申请实施例提供的样本标识的对齐方法的流程示意图三；图3D是本申请实施例提供的样本标识的对齐方法的流程示意图四；图3E是本申请实施例提供的样本标识的对齐方法的流程示意图五；图3F是本申请实施例提供的样本标识的对齐方法的流程示意图六；图4A是本申请实施例提供的样本标识的对齐方法的流程示意图七；图4B是本申请实施例提供的样本标识的对齐方法的流程示意图八；图5是本申请实施例提供的样本标识的对齐方法的流程示意图九；图6是本申请实施例提供的样本标识的对齐方法的应用环境图。具体实施方式为了使本申请的目的、技术方案和优点更加清楚，下面将结合附图对本申请作进一步地详细描述，所描述的实施例不应视为对本申请的限制，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其它实施例，都属于本申请保护的范围。在以下的描述中，涉及到“一些实施例”，其描述了所有可能实施例的子集，但是可以理解，“一些实施例”可以是所有可能实施例的相同子集或不同子集，并且可以在不冲突的情况下相互结合。在以下的描述中，所涉及的术语“第一第二第三”仅仅是是区别类似的对象，不代表针对对象的特定排序，可以理解地，“第一第二第三”在允许的情况下可以互换特定的顺序或先后次序，以使这里描述的本申请实施例能够以除了在这里图示或描述的以外的顺序实施。除非另有定义，本申请实施例所使用的所有的技术和科学术语与所属技术领域的技术人员通常理解的含义相同。本申请实施例中所使用的术语只是为了描述本申请实施例的目的，不是旨在限制本申请。对本申请实施例进行进一步详细说明之前，对本申请实施例中涉及的名词和术语进行说明，本申请实施例中涉及的名词和术语适用于如下的解释。1）安全多方计算，是指多个参与方在不透露各自数据的前提下，按照约定的安全计算协议，协同完成某个共同的计算任务。2）不经意传输算法，指的是发送方A有n个消息，接收方B希望收到A中的k个消息，不经意传输算法保证A不知道B想要的是哪k个消息，B也不知道A中除k个消息之外的其他消息。3）纵向联邦学习，也称为样本对齐的联邦学习，其本质是特征的联合，即纵向联邦学习参与方的训练样本重叠很多，但各样本的数据特征重叠很少。纵向联邦学习的一般过程为：首先对参与方数据进行加密样本对齐，获得重叠的样本数据；中心节点生成秘钥对，并向各参与方发送公钥用以加密需要传输的数据；参与方各自初始化和自己相关的模型参数，然后在本地对所选出的样本数据进行训练，分别训练出和自己相关的特征中间结果；各参与方将训练出的特征中间结果基于公钥进行加密后进行交互；各参与方基于交互得到的加密中间结果继续进行训练，并将训练后的模型参数发送给中心节点；中心节点进行解密后分别将各自的模型参数再返回给各参与方；各参与方更新各自的模型参数。在整个过程中，各参与方都不知道另一方的数据和特征，且训练结束后参与方只得到和自己相关的模型参数。4）隐私集合求交，是多方安全计算领域中的经典问题，它要求参与方在互相不公开本地集合的前提下，共同计算得出多个参与方的集合的交集，且不能向任何参与方泄露交集以外的信息。在纵向联邦学习场景中，PSI也被称为安全样本对齐或者数据库撞库，是指多方在进行样本对齐的过程中，各方不会获取其他方除交集之外的任何信息，即各参与方需要首先求出自己的训练样本ID集合之间的交集，基于计算得到的训练样本ID交集进行后续的纵向联邦模型训练。5）样本标识的对齐，也被称为加密实体对齐。其中，标识为参与方中唯一标识数据的字段，可以理解为主键key，例如id、身份证、手机号。样本标识对齐的过程为根据两方选择的数据和标识，找到两方数据集共有的记录，按一样的顺序排列存储为对齐结果。例如：进行纵向联邦训练的A方和B方公司的用户群体不同，使用一种基于加密的用户ID对齐技术，来确保A方和B方不需要暴露各自的原始数据便可以对齐共同用户。安全多方计算起源于1982年姚期智的百万富翁问题，该问题讨论了两个百万富翁Alice和Bob，他们希望知道他们中谁更富有，但是不透露他们的实际财富。百万富翁问题是密码学中的一个重要问题，其解决方案被应用于电子商务和数据挖掘中。多方安全计算方法大体上可以分为两类，一类是基于噪音的，以差分隐私为代表；另一类是基于密码学的，将原数据编码或者加密，使得其他用户很难从加密后的数据还原出原始数据，该类主要包括：同态加密、不经意传输、混淆电路、密钥共享等方法。安全多方计算是电子选举、门限签名以及电子拍卖等诸多应用的密码学基础。OT是一种密码学协议，是混淆电路背后的密码学思想，其解决的问题是：假设A有n份数据，B想知道其中的一个/＞，通过OT协议，B获得了/＞，但不知道，同时A不知道/＞。OT算法的形式有1-out-of-n和k-out-of-n等。在实际应用中，OT算法的实现方式有多种，例如可以基于离散对数、以及基于RSA原理实现OT算法。相关技术中，基于OT算法来进行安全样本对齐是最常见也是性能最好的技术，尤其是当双方数据要对齐的key中无重复数据时，性能比较好。但是当多方的数据中存在重复求交key的时候，该方法的性能无法满足需求，样本对齐的速度大大降低。基于相关技术中所存在的上述至少一个问题，本申请实施例提供一种样本标识的对齐方法、装置、设备、计算机可读存储介质和计算机程序产品，能够在多个参与方中存在重复数据时，提高样本对齐的速度，下面说明本申请实施例提供的电子设备的示例性应用。在一种实现方式中，本申请实施例提供的电子设备可以实施为终端，也可以实施为服务器。在一种实现方式中，本申请实施例提供的电子设备可以实施为笔记本电脑，平板电脑，台式计算机，移动电话，便携式音乐播放器，个人数字助理，专用消息设备，便携式游戏设备，智能机器人，智能家电和智能车载设备等任意的具备数据处理功能的终端；在另一种实现方式中，本申请实施例提供的电子设备还可以实施为服务器，其中，服务器可以是独立的物理服务器，也可以是多个物理服务器构成的服务器集群或者分布式系统，还可以是提供云服务、云数据库、云计算、云函数、云存储、网络服务、云通信、中间件服务、域名服务、安全服务、内容分发网络、以及大数据和人工智能平台等基础云计算服务的云服务器。终端以及服务器可以通过有线或无线通信方式进行直接或间接地连接，本申请实施例中不做限制。下面，将说明电子设备实施为服务器时的示例性应用。参见图1，图1是本申请实施例提供的样本标识的对齐系统100的架构示意图，为实现支撑一个样本标识的对齐应用，终端400-1通过网络300-1连接服务器200-1，终端400-2通过网络300-2连接服务器200-2，网络300-1和网络300-2可以是广域网或者局域网，又或者是二者的组合。在进行双方的安全样本对齐时，用户可以分别通过终端400-1和终端400-2输入需求进行样本对齐的操作，终端400-1响应于需求进行样本对齐的操作生成样本标识的对齐请求，并通过网络300-1将样本标识的对齐请求发送给服务器200-1。终端400-2响应于需求进行样本对齐的操作生成样本标识的对齐请求，并通过网络300-2将样本标识的对齐请求发送给服务器200-2。服务器200-1在接收到样本标识的对齐请求后，响应于样本标识的对齐请求，针对多个第一数据样本，分别对每个第一数据样本的第一样本标识进行加密，得到多个第一加密标识；当多个第一加密标识中存在相同的第一加密标识时，生成多个第一加密标识对应的索引组，索引组中包括至少一个子索引组，子索引组中的索引用于区分相同的第一加密标识；将多个第一加密标识以及索引组发送至接收方。服务器200-2在接收到样本标识的对齐请求后，响应于样本标识的对齐请求，针对多个第二数据样本，分别对每个第二数据样本的第二样本标识进行加密，得到多个第二加密标识；在接收到服务器200-1发送的多个第一加密标识以及索引组后，基于索引组，从多个第一加密标识以及多个第二加密标识中选取得到目标样本标识；其中，相同的目标样本标识所对应的索引相同；将目标样本标识返回至服务器200-1。服务器200-1接收接收方发送的目标样本标识，并根据目标样本标识以及多个第一加密标识，确定对齐后的样本标识。在一些实施例中，还可以由终端400-1和终端400-2执行本申请实施例的样本标识的对齐方法，也就是说，用户可以分别通过终端400-1和终端400-2输入需求进行样本对齐的操作，终端400-1响应于需求进行样本对齐的操作针对多个第一数据样本，分别对每个第一数据样本的第一样本标识进行加密，得到多个第一加密标识；当多个第一加密标识中存在相同的第一加密标识时，生成多个第一加密标识对应的索引组；将多个第一加密标识以及索引组发送至终端400-2。终端400-2在接收到终端400-1发送的多个第一加密标识以及索引组后，基于索引组，从多个第一加密标识以及多个第二加密标识中选取得到目标样本标识；将目标样本标识返回至终端400-1。终端400-1接收终端400-2发送的目标样本标识，并根据目标样本标识以及多个第一加密标识，确定对齐后的样本标识。参见图2A，图2A是本申请实施例提供的样本标识的对齐方法的终端400-1的结构示意图，图2A所示的终端400-1包括：至少一个处理器410、存储器450、至少一个网络接口420和用户接口430。终端400-1中的各个组件通过总线系统440耦合在一起。可理解，总线系统440用于实现这些组件之间的连接通信。总线系统440除包括数据总线之外，还包括电源总线、控制总线和状态信号总线。但是为了清楚说明起见，在图2A中将各种总线都标为总线系统440。处理器410可以是一种集成电路芯片，具有信号的处理能力，例如通用处理器、数字信号处理器，或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等，其中，通用处理器可以是微处理器或者任何常规的处理器等。用户接口430包括使得能够呈现媒体内容的一个或多个输出装置431，包括一个或多个扬声器和/或一个或多个视觉显示屏。用户接口430还包括一个或多个输入装置432，包括有助于用户输入的用户接口部件，比如键盘、鼠标、麦克风、触屏显示屏、摄像头、其他输入按钮和控件。存储器450可以是可移除的，不可移除的或其组合。示例性的硬件设备包括固态存储器，硬盘驱动器，光盘驱动器等。存储器450可选地包括在物理位置上远离处理器410的一个或多个存储设备。存储器450包括易失性存储器或非易失性存储器，也可包括易失性和非易失性存储器两者。非易失性存储器可以是只读存储器，易失性存储器可以是随机存取存储器。本申请实施例描述的存储器450旨在包括任意适合类型的存储器。在一些实施例中，存储器450能够存储数据以支持各种操作，这些数据的示例包括程序、模块和数据结构或者其子集或超集，下面示例性说明。操作系统451，包括用于处理各种基本系统服务和执行硬件相关任务的系统程序，例如框架层、核心库层、驱动层等，用于实现各种基础业务以及处理基于硬件的任务；网络通信模块452，用于经由一个或多个网络接口420到达其他电子设备，示例性的网络接口420包括：蓝牙、无线相容性认证、和通用串行总线等；呈现模块453，用于经由一个或多个与用户接口430相关联的输出装置431使得能够呈现信息；输入处理模块454，用于对一个或多个来自一个或多个输入装置432之一的一个或多个用户输入或互动进行检测以及翻译所检测的输入或互动。在一些实施例中，本申请实施例提供的用户终端400-1中的样本标识的对齐装置可以采用软件方式实现，图2A示出了存储在存储器450中的样本标识的对齐装置455A，其可以是程序和插件等形式的软件，包括以下软件模块：第一加密模块4551A、索引生成模块4552A、第一标识发送模块4553A和样本标识确定模块4554A，这些模块是逻辑上的，因此根据所实现的功能可以进行任意的组合或进一步拆分。将在下文中说明各个模块的功能。在另一些实施例中，如图2B所示，本申请实施例提供用户终端400-2中的样本标识的对齐装置455B可以采用软件方式实现，其可以是程序和插件等形式的软件，包括以下软件模块：第二加密模块4551B、索引接收模块4552B、标识选取模块4553B以及第二标识发送模块4554B，这些模块是逻辑上的，因此根据所实现的功能可以进行任意的组合或进一步拆分。将在下文中说明各个模块的功能。在另一些实施例中，本申请实施例提供的装置可以采用硬件方式实现，作为示例，本申请实施例提供的装置可以是采用硬件译码处理器形式的处理器，其被编程以执行本申请实施例提供的样本标识的对齐方法，例如，硬件译码处理器形式的处理器可以采用一个或多个应用专用集成电路、数字信号处理器、可编程逻辑器件、复杂可编程逻辑器件、现场可编程门阵列或其他电子元件。本申请各实施例提供的样本标识的对齐方法可以由电子设备来执行，其中，该电子设备可以是服务器也可以是终端，即本申请各实施例的样本标识的对齐方法可以通过服务器来执行，也可以通过终端来执行，或者也可以通过服务器与终端之间交互执行。图3A是本申请实施例提供的样本标识的对齐方法的一个可选的流程示意图，下面将结合图3A示出的步骤进行说明，如图3A所示，以样本标识的对齐方法的执行主体为服务器为例进行说明，方法包括以下步骤S101至步骤S104：在步骤S101中，针对多个第一数据样本，分别对每个第一数据样本的第一样本标识进行加密，得到多个第一加密标识。在一些实施例中，第一数据样本为安全样本对齐PSI过程中一个参与方包含的数据样本。第一数据样本可以包括唯一的第一样本标识以及至少一个数据特征。第一样本标识为唯一标识第一数据样本的字段。第一加密标识为第一样本标识经过加密后生成的掩码id。以参与方A方为例，A方的第一数据样本如表1所示，加密后的A方的第一数据样本如表2所示。其中，_id为第一样本标识，也即在PSI过程中双方求交的key；af1、af2以及af3都为对应的数据特征，_mask_id为第一加密标识。表1 A方数据样本表2 加密后的A方数据样本需要说明的是，本申请实施例对第一样本标识进行加密得到第一加密标识的具体方法不作限定。在一些实施例中，可以利用OPRF-PSI算法分别对每个第一数据样本的第一样本标识进行加密，得到多个第一加密标识。其中，OPRF为不经意伪随机函数。还可以利用基于哈希函数的PSI算法、基于不经意传输的PSI算法、基于同态加密的PSI算法、基于差分隐私的PSI算法等对第一样本标识进行加密。在步骤S102中，当多个第一加密标识中存在相同的第一加密标识时，生成多个第一加密标识对应的索引组，索引组中包括至少一个子索引组，子索引组中的索引用于区分相同的第一加密标识。在一些实施例中，在存在相同的第一加密标识时，可以对相同的第一加密标识添加不同的索引，得到至少一个子索引组。子索引组中每个索引对应一个相同的第一加密标识，每个第一加密标识对应的索引不同。可以从多个第一加密标识中筛选出至少一组相同的第一加密标识，子索引组的数量与相同的第一加密标识的组数相同。根据子索引组构建多个第一加密标识对应的索引组。在一些实施例中，除了对相同的第一加密标识添加不同的索引，得到子索引组之外，还可以对其他单独的第一加密标识添加索引。各单独的第一加密标识添加的索引可以相同，也可以不同。各单独的第一加密标识添加的索引可以与子索引组中的至少一个索引相同。在一些实施例中，参见图3B，图3A示出的步骤S102可以通过以下步骤S1021A至步骤S1022A实现，下面具体说明。在步骤S1021A中，对多个第一加密标识进行标识组划分，得到第一加密标识组及第二加密标识组。其中，第一加密标识组中的第一加密标识相同，第二加密标识组中的第一加密标识互不相同。本申请实施例中，标识组划分的依据为第一加密标识是否相同。将多个相同的第一加密标识划分为一个第一加密标识组。将不存在与之相同的其他第一加密标识划分为一个第二加密标识组。第一加密标识组的数量为至少一个。第二加密标识组的数量可以为0或1。当所有的第一加密标识都存在相同的第一加密标识时，第二加密标识组的数量为0。在步骤S1022A中，分别为第一加密标识组中的第一加密标识以及第二加密标识组中的第一加密标识，添加对应的索引，得到多个第一加密标识对应的索引组。本申请实施例中，可以为第一加密标识组中的第一加密标识添加不同的索引，得到对应的子索引组。对第二加密标识组中的第一加密标识添加索引。根据第一加密标识组对应的子索引组，以及第二加密标识组对应的索引，构建多个第一加密标识对应的索引组。本申请实施例通过对多个第一加密标识进行标识组划分，以将相同的第一加密标识和不同的第一加密标识分开成组，提高索引添加的效率。在一些实施例中，参见图3C，图3B示出的步骤S1022A可以通过以下步骤S10221A至步骤S10223A实现，下面具体说明。在步骤S10221A中，为第一加密标识组中的每个第一加密标识添加不同的索引，得到第一加密标识组对应的子索引组。本申请实施例中，对第一加密标识组中的每个第一加密标识的索引添加规则不加以限定。在步骤S10222A中，为第二加密标识组中的每个第一加密标识添加相同的索引。本申请实施例中，可以为第二加密标识组中互补相同的第一加密标识添加相同的索引。第二加密标识组对应的索引可以与第一加密标识组中的各索引不同。第二加密标识组对应的索引也可以与第一加密标识组中的至少一个索引相同，便于后续的过滤处理。在步骤S10223A中，根据每个第一加密标识组对应的子索引组，以及每个第二加密标识组中的索引，构建得到多个第一加密标识对应的索引组。本申请实施例中，多个子索引组与第二加密标识组中的各索引一起组成多个第一加密标识对应的索引组。在一些实施例中，参见图3D，图3C示出的步骤S10221A可以通过以下步骤S102211A至步骤S102212A实现，下面具体说明。在步骤S102211A中，对第一加密标识组中的各第一加密标识进行排序，得到第一加密标识序列。在一些实施例中，对第一加密标识组中的各第一加密标识的排序方法不作限定。示例性的，可以对第一加密标识组中的各第一加密标识随机排列，得到第一加密标识序列。在步骤S102212A中，基于第一加密标识序列中各第一加密标识的顺序，为各第一加密标识依次添加从小到大排列或从大到小排列的索引，得到第一加密标识组对应的子索引组。在一些实施例中，索引可以为阿拉伯数字。得到第一加密标识序列后，可以按照阿拉伯数字的大小，从小到大排列或从大到小排列依次为第一加密标识序列中的各第一加密标识添加对应的索引，得到第一加密标识组对应的子索引组。若按从小到大排列规则添加索引，每个子索引组中的最小的索引相同，例如都为1。若按从大到小排列规则添加索引，每个子索引组中的最大的索引相同，例如都为100。本申请实施例通过对相同的各第一加密标识进行排序，基于顺序依次添加从小到大排列或从大到小排列的索引，提高了索引的规范性，以简化后续的过滤筛选。在另一些实施例中，图3C示出的步骤S10221A可以通过以下方法实现：为第一加密标识组中的每个第一加密标识，随机添加不同的索引，得到第一加密标识组对应的子索引组。本申请实施例中，对索引的具体内容不作限定。示例性的，索引可以为阿拉伯数字、英文字母、希腊字母等其中的一项。各子索引组中索引的添加规则可以相同，例如都为从A开始的英文字母，便于后续的过滤处理。在一些实施例中，参见图3E，图3A示出的步骤S102可以通过以下步骤S1021B至步骤S1022B实现，下面具体说明。在步骤S1021B中，为每个第一加密标识添加索引；其中，相同的第一加密标识对应的第一索引不同；多个第一加密标识中除去相同的第一加密标识以外的其他第一加密标识对应的第二索引相同；第二索引与多个第一索引中的至少一个第一索引相同。本申请实施例中，为多个第一加密标识中相同的第一加密标识添加不同的第一索引，为其他单独的第一加密标识添加相同的第二索引。第二索引与多个第一索引中的至少一个第一索引相同，以便于后续基于该相同的第一索引和第二索引进行过滤去重。以参与方A方为例，其第一样本数据加密且添加索引后如表3所示。其中，_mask_idex为索引。对于相同的第一加密标识xxx，添加的第一索引依次为1、2；对于单独的第一加密标识www和yyy，添加相同的第二索引1。表3 添加索引后的A方数据在步骤S1022B中，根据第一索引和第二索引，构建得到多个第一加密标识对应的索引组。本申请实施例中，多个第一索引和第二索引共同组成第一加密标识对应的索引组。本申请实施例通过直接对各个第一加密标识添加索引，免去分组的过程，简化了算法。在一些实施例中，参见图3F，图3A示出的步骤S102可以通过以下步骤S1021C至步骤S1022C实现，下面具体说明。在步骤S1021C中，为相同的第一加密标识添加不同的索引，得到相应的子索引组。在一些实施例中，可以仅仅为相同的第一加密标识添加不同的索引，得到相应的子索引组。多个第一加密标识中其他单独的第一加密标识不额外添加索引，可以默认为空值。在步骤S1022C中，根据至少一个子索引组，生成多个第一加密标识对应的索引组。本申请实施例通过只对相同的第一加密标识添加索引，减少了需要处理的数据量，提高样本对齐速度。在步骤S103中，将多个第一加密标识以及索引组发送至接收方。其中，第一加密标识以及索引组，用于供接收方基于索引组，从多个第一加密标识以及多个第二加密标识中选取得到目标样本标识。其中，相同的目标样本标识所对应的索引相同，第二加密标识为，对接收方的第二样本标识进行加密所得到。继续参见图3A，其中，在进行安全样本对齐的过程中，可以将数据量较少的一方作为发送方，发送方包括第一数据样本。将数据量较多的一方作为接收方，接收方包括第二数据样本。第二数据样本可以包括唯一的第二样本标识以及至少一个数据特征。第二样本标识为唯一标识第二数据样本的字段。在一些实施例中，将多个第一加密标识以及索引组发送至接收方后，接收方可以对第一加密标识和第二加密标识进行求交后，再基于索引组中的索引过滤掉重复的数据，得到目标样本标识。目标样本标识的数量为至少一个。在步骤S104中，接收接收方发送的目标样本标识，并根据目标样本标识以及多个第一加密标识，确定对齐后的样本标识。在一些实施例中，图3A示出的步骤S104可以通过以下方法实现：对目标样本标识以及多个第一加密标识进行求交，得到对齐后的样本标识。本申请实施例中，求交是指用一个第一加密标识所对应的一行第一数据样本，与一个目标样本标识所对应的一行第二数据样本组合得到一行新的数据样本。但需要注意的是，安全样本对齐作为一种隐私集合求交方法，参与双方并不能互相得知具体的数据特征。也即，求交的本质仅仅是对第一加密标识和目标样本标识的求交。例如参与方A方对齐后的样本标识仅仅只包括A方自己的数据特征，B方的数据特征是空缺的。数据的求交对齐是样本标识对齐后的后续步骤，本申请实施例在此不加以赘述。本申请实施例在安全样本对齐PSI算法中，当双方数据中对齐key都有重复数据时，提高了样本对齐的速度。参见图4A，图4A是本申请另一个实施例提供的样本标识的对齐方法的流程示意图，将结合图4A示出的步骤进行说明。在步骤S201中，针对多个第二数据样本，分别对每个第二数据样本的第二样本标识进行加密，得到多个第二加密标识。示例性的，参与方A方和参与方B方进行安全样本对齐，A方的数据量较少，选择A方作为发送方，B方作为接收方，A方数据集中的数据即为第一数据样本，B方数据集中的数据即为第二数据样本。B方的原始数据可以参见下列表4，加密后的B方数据可以参见下列表5，其中_id为第二样本标识，bf1、bf2都为对应的数据特征，_mask_id为第二加密标识。表4 B方数据样本表5 加密后的B方数据样本本申请实施例中，对第二数据样本的第二样本标识进行加密，得到多个第二加密标识的方法与第一样本标识的加密方法一致，在此不再赘述。在步骤S202中，接收发送方发送的多个第一加密标识以及索引组。其中，第一加密标识为，对发送方的第一样本标识进行加密所得到。当多个第一加密标识中存在相同的第一加密标识时，索引组包括至少一个子索引组，子索引组中的索引用于区分相同的第一加密标识。本申请实施例中，发送方添加索引的过程已经在前面详细描述，在此不再赘述。在步骤S203中，基于索引组，从多个第一加密标识以及多个第二加密标识中选取得到目标样本标识。其中，相同的目标样本标识所对应的索引相同。本申请实施例中，可以先对多个第一加密标识以及多个第二加密标识进行求交，再基于索引组中的索引，按照预设的过滤策略，对求交后的标识进行过滤选取，得到至少一个目标样本标识。预设的过滤策略随索引的添加方式而改变。在一些实施例中，参见图4B，图4A示出的步骤S203可以通过以下步骤S2031至步骤S2032实现，下面具体说明。在步骤S2031中，对多个第一加密标识以及多个第二加密标识进行求交，得到对齐后的样本标识。样本标识的索引与样本标识对应的第一加密标识的索引相同。本申请实施例中，求交是对第一加密标识和与第一加密标识相同的第二加密标识进行求交，只保留参与方双方共同具有的加密标识。针对一组相同的第一加密标识和第二加密标识，求交对齐后的样本标识的个数，为第一加密标识的数量与第二加密标识的数量的乘积。索引跟随对应的第一加密标识一起移动。示例性的，参与方A和参与方B标识求交后的数据为以下表6。其中，A方和B方共同具有的加密标识为xxx和yyy，因此求交后的数据样本中只包括xxx和yyy的加密标识。A方原始数据中存在相同的两个第一加密标识xxx，索引分别为1和2。B方原始数据中也存在相同的第二加密标识xxx。求交过程即为A方中索引为1的第一加密标识xxx组合B方中的一条二加密标识xxx，索引为1的第一加密标识xxx再组合B方中剩余的另一条二加密标识xxx，依次类推。表6 求交后的B方数据样本在步骤S2032中，基于索引组，对样本标识进行过滤，得到至少一个目标样本标识。本申请实施例中，基于索引组中的索引，按照预设的过滤策略，对求交后的样本标识进行过滤选取，得到至少一个目标样本标识。预设的过滤策略随索引的添加方式而改变。在一些实施例中，图4B示出的步骤S2032可以通过以下方法实现：在子索引组中的各索引为基于初始数字从小到大依次排列的情况下，从样本标识中过滤掉大于初始数字的索引对应的样本标识，得到至少一个目标样本标识。本申请实施例中，若发送方添加索引时，为多个第一加密标识中相同的第一加密标识添都基于初始数字从小到大依次排列添加对应的索引，为其他单独的第一加密标识添加相同的初始数字作为索引。则预设的过滤策略可以为过滤掉大于初始数字的索引，以保证只保留索引为初始数字的目标样本标识，去掉重复数据。该种方式得到的目标样本标识的索引相同。示例性的，以上述表3为例，初始数字为1，为相同的第一加密标识xxx，基于1从小到大依次排列添加对应的索引。A方存在两个相同的第一加密标识xxx，其对应的索引为1和2。A方存在其他单独的第一加密标识www和yyy，都用初始数字1作为索引。与B方求交后得到表6，将其中_mask_index大于1的记录过滤掉，得到以下表7。表7 B方过滤后的目标样本标识在另一些实施例中，若发送方添加索引时，索引为随机添加的英文字母或者希腊字母等等，则预设的过滤策略可以为针对每组相同的样本标识，随机选取其中一个样本标识作为目标样本标识，针对其他每个单独的样本标识直接作为目标样本标识。在另一些实施例中，若发送方添加索引时，仅仅只为相同的第一加密标识添加了索引，其他默认为空值。则预设的过滤策略可以为默认保留不携带索引的样本标识，对于携带索引的样本标识依旧可以采样上述几种方法过滤处理。在步骤S204中，向发送方发送目标样本标识。其中，目标样本标识，用于供发送方根据目标样本标识以及多个第一加密标识，确定对齐后的样本标识。继续参见图4A，发送方可以对多个目标样本标识以及多个第一加密标识进行求交，得到对齐后的样本标识。本申请实施例中，发送方得到的样本标识与接收方得到的样本标识相同。求交的过程与前述步骤一致，在此不再赘述。示例性的，发送方求交后的数据样本可以参见下列表8。表8 求交后的A方数据样本本申请实施例将第一样本标识加密得到第一加密标识，第二样本标识加密得到第二加密标识，可以在样本对齐期间，确保双方不暴露自己的原始数据。本申请实施例为第一加密标识添加对应的索引组，将第一加密标识和索引组一起发送至接收方，接收方可以基于索引组从多个第一加密标识以及多个第二加密标识中选取得到目标样本标识，由于索引组包括至少一个子索引组，子索引组中的索引用于区分重复的第一加密标识，接收方可以基于索引组去除重复的数据得到目标样本标识，进而基于接收方发送的目标样本标识和第一加密标识可以确定对齐后的样本标识。本申请实施例在安全样本对齐PSI算法中，当双方数据中对齐key都有重复数据时，提高了样本对齐的速度。下面将结合样本标识的对齐系统中的发送方A方和接收方B方之间的交互对本申请实施例中的样本标识的对齐方法进行说明。需要说明的是，这里的样本标识的对齐方法与上述实施例中由服务器执行的样本标识的对齐方法实质上相同，并且，有些步骤既可以由终端来执行也可以由服务器来执行，因此，对于本实施例中与上述实施例中内容相同但执行主体不同的步骤，本实施例只是示例性说明，在实现的过程中，可以由任意一个执行主体来执行，本申请实施例对此不做限定。A方可以为终端400-1或服务器200-1，B方可以为终端400-2或服务器200-2。图5是本申请实施例提供的样本标识的对齐方法的另一个可选的流程示意图，如图5所示，方法包括以下步骤S301至步骤S307：步骤S301，A方分别对每个第一数据样本的第一样本标识进行加密，得到多个第一加密标识。步骤S302，A方生成多个第一加密标识对应的索引组。步骤S303，A方向B方发送多个第一加密标识以及索引组。步骤S304，B方分别对每个第二数据样本的第二样本标识进行加密，得到多个第二加密标识。步骤S305，B方基于索引组，从多个第一加密标识以及多个第二加密标识中选取得到目标样本标识。步骤306，B方向A方发送目标样本标识。步骤307，A方根据目标样本标识以及多个第一加密标识，确定对齐后的样本标识。在另一个实施例中，还可以选择不添加索引的方式实现样本标识的对齐方法。在A方加密获得表2，B方加密获得表5后，A方和B方可以分别对自己的重复数据进行压缩得到对应的表9和表10。表9 压缩后的A方数据表10 压缩后的B方数据其中，_mask_id是经过OPRF-PSI算法后生成的掩码id，和求交key对应，_cnt是求交key出现的次数，然后A、B方分别将自己的_mask_id和_cnt发送给对方，最后得到双方交集之后的数据参加以下表11。表11 A方与B方交集后的数据下面，将说明本申请实施例在一个实际的应用场景中的示例性应用。本申请实施例是在联邦建模的场景下实现的，联邦建模的工作流中的第一步骤就是进行安全样本对齐，即PSI算法，如图6所示。参见图6，虫洞依赖为一个对工作流进行流程管控的插件或程序，可以用于调控PSI虫洞依赖、训练虫洞依赖、预测虫洞依赖三个过程的开始和结束。每个虫洞依赖的作用为保证单独一个工作流的运行。具体的，PSI虫洞依赖begin代表联邦建模的第一个步骤的开启。Guest为联邦建模的主机方，Host为联邦建模的从机方，二者共同作为参与方实现联邦建模。FL_KOT_PSI_Guest是主机方Guest的PSI过程节点，FL_KOT_PSI_Host是从机方Host的PSI过程节点。PSI虫洞依赖begin与FL_KOT_PSI_Guest以及FL_KOT_PSI_Host连接，PSI虫洞依赖begin运行后，管控只有FL_KOT_PSI_Guest和FL_KOT_PSI_Host两个节点进行安全样本对齐，其他节点停止运行。本申请实施例提供的样本标识的对齐方法即分别在FL_KOT_PSI_Guest和FL_KOT_PSI_Host两个节点中实现，以提高主机方Guest和从机方Host的数据出现重复时的求交效率，得到最终的训练样本。安全样本对齐完成后，PSI虫洞依赖end控制安全样本对齐流程结束。此时，训练虫洞依赖开始运行。训练虫洞依赖与GBDT_guest_train和GBDT_host_train两个节点连接。GBDT_guest_train为主机方Guest样本对齐后的模型训练过程节点，GBDT_host_train为从机方Host样本对齐后的模型训练过程节点。训练虫洞依赖开始运行，调控只有与之相连的GBDT_guest_train和GBDT_host_train两个节点基于FL_KOT_PSI_Guest和FL_KOT_PSI_Host安全样本对齐后得到的训练样本进行模型训练，其他节点停止工作。训练虫洞依赖结束后，开启预测虫洞依赖，以使GBDT_guest_train和GBDT_host_train两个节点训练后得到的共同模型，基于不同的数据输出以下各个节点的预测数据：GBDT_guest_pred、GBDT_guest_pred2、GBDT_host_pred以及GBDT_host_pred2。其中，GBDT_guest_pred、GBDT_guest_pred2分别为用不同的主机方Guest的数据进行预测得到的数据，GBDT_host_pred以及GBDT_host_pred2分别为用不同的从机方host的数据进行预测得到的数据。在一种基于OPRF-PSI算法的安全样本对齐方法中，在遇到有重复数据的时候，双方需要对各自重复数据对应的mask_id进行计数，然后再进行重复求交key进行对齐的时候对计数进行展开并对齐，性能较低。本申请不需要对重复数据进行计数，能高效解决重复数据对齐的问题，具体说明如下：A方原始的第一样本数据为表1，第一样本数据的第一样本标识经过KOT-PST算法之后，添加对应的索引，得到表3。具体的，对相同的第一加密标识xxx从1开始依次增加索引，对其他不同的第一加密标识都添加索引1。B方原始的第一样本数据为表4，第二样本数据的第二样本标识经过KOT-PST算法之后，得到表5。其中，_mask_id是经过KOT-PSI算法后生成的掩码id，和求交key对应，_mask_index是每个求交key的索引，A方将自己的_mask_id和_mask_index发送给B方，B方收到后和自己的_mask_id进行求交，并携带上A方的_mask_index得到表6。B方得到上述求交结果后，将_mask_index大于1的记录过滤掉，得到表7的目标样本标识。然后B方将目标样本标识发送至A方，A方用自己的_mask_id和收到的_mask_id求交，得到最终的求交结果表8。本申请实施例高效解决了安全样本对齐中存在重复求交key时性能低的问题。本申请实施例提供的样本标识的对齐方法，基于某应用金融1000万、10亿等级别的数据进行测试，在双方样本存在大量重复key等情况下，可以有60%以上的性能提升。对于公司级联邦学习解决方案PowerFL项目各联邦学习组件，如联邦GBDT、LR、DNN等模型建模之前均会进行安全样本对齐工作，本申请实施例提出样本标识的对齐方法，作为一种高效对齐重复求交key的实现方案可以融入到公司PowerFL Oteam代码仓库中，并在PowerFL-SQL中应用，大大提升业务性能。可以理解的是，在本申请实施例中，涉及到用户信息等相关的数据，当本申请实施例运用到具体产品或技术中时，需要获得用户许可或者同意，且相关数据的收集、使用和处理需要遵守相关国家和地区的相关法律法规和标准。下面继续说明本申请实施例提供的样本标识的对齐装置455A的实施为软件模块的示例性结构，在一些实施例中，如图2A所示，样本标识的对齐装置455A中的软件模块可以包括：第一加密模块4551A，用于针对多个第一数据样本，分别对每个第一数据样本的第一样本标识进行加密，得到多个第一加密标识。索引生成模块4552A，用于当多个第一加密标识中存在相同的第一加密标识时，生成多个第一加密标识对应的索引组，索引组中包括至少一个子索引组，子索引组中的索引用于区分相同的第加密标识。第一标识发送模块4553A，用于将多个第一加密标识以及索引组发送至接收方；第一加密标识以及索引组，用于供接收方基于索引组，从多个第一加密标识以及多个第二加密标识中选取得到目标样本标识；其中，相同的目标样本标识所对应的索引相同，第二加密标识为，对接收方的第二样本标识进行加密所得到。样本标识确定模块4554A，用于接收接收方发送的目标样本标识，并根据目标样本标识以及多个第一加密标识，确定对齐后的样本标识。在一些实施例中，索引生成模块4552A，还用于对多个第一加密标识进行标识组划分，得到第一加密标识组及第二加密标识组；其中，第一加密标识组中的第一加密标识相同，第二加密标识组中的第一加密标识互不相同；分别为第一加密标识组中的第一加密标识以及第二加密标识组中的第一加密标识，添加对应的索引，得到多个第一加密标识对应的索引组。在一些实施例中，索引生成模块4552A，还用于为第一加密标识组中的每个第一加密标识添加不同的索引，得到第一加密标识组对应的子索引组；为第二加密标识组中的每个第一加密标识添加相同的索引；根据每个第一加密标识组对应的子索引组，以及每个第二加密标识组中的索引，构建得到多个第一加密标识对应的索引组。在一些实施例中，索引生成模块4552A，还用于对第一加密标识组中的各第一加密标识进行排序，得到第一加密标识序列；基于第一加密标识序列中各第一加密标识的顺序，为各第一加密标识依次添加从小到大排列或从大到小排列的索引，得到第一加密标识组对应的子索引组。在一些实施例中，索引生成模块4552A，还用于为第一加密标识组中的每个第一加密标识，随机添加不同的索引，得到第一加密标识组对应的子索引组。在一些实施例中，索引生成模块4552A，还用于为每个第一加密标识添加索引；其中，相同的第一加密标识对应的第一索引不同；多个第一加密标识中除去相同的第一加密标识以外的其他第一加密标识对应的第二索引相同；第二索引与多个第一索引中的至少一个第一索引相同；根据第一索引和第二索引，构建得到多个第一加密标识对应的索引组。在一些实施例中，索引生成模块4552A，还用于为相同的第一加密标识添加不同的索引，得到相应的子索引组；根据至少一个子索引组，生成多个第一加密标识对应的索引组。在一些实施例中，样本标识确定模块4554A，还用于对目标样本标识以及多个第一加密标识进行求交，得到对齐后的样本标识。如图2B所示，在本申请另一个实施例提供的信息推荐装置455B中，软件模块可以包括：第二加密模块4551B，用于针对多个第二数据样本，分别对每个第二数据样本的第二样本标识进行加密，得到多个第二加密标识。索引接收模块4552B，用于接收发送方发送的多个第一加密标识以及索引组；第一加密标识为，对发送方的第一样本标识进行加密所得到；当多个第一加密标识中存在相同的第一加密标识时，索引组包括至少一个子索引组，子索引组中的索引用于区分相同的第一加密标识。标识选取模块4553B，用于基于索引组，从多个第一加密标识以及多个第二加密标识中选取得到目标样本标识；其中，相同的目标样本标识所对应的索引相同。第二标识发送模块4554B，用于向发送方发送目标样本标识；目标样本标识，用于供发送方根据目标样本标识以及多个第一加密标识，确定对齐后的样本标识。在一些实施例中，标识选取模块4553B，还用于对多个第一加密标识以及多个第二加密标识进行求交，得到对齐后的样本标识；样本标识的索引与样本标识对应的第一加密标识的索引相同；基于索引组，对样本标识进行过滤，得到至少一个目标样本标识。在一些实施例中，标识选取模块4553B，还用于在子索引组中的各索引为基于初始数字从小到大依次排列的情况下，从样本标识中过滤掉大于初始数字的索引对应的样本标识，得到至少一个目标样本标识。本申请实施例提供了一种计算机程序产品，该计算机程序产品包括计算机程序或计算机可执行指令，该计算机程序或计算机可执行指令存储在计算机可读存储介质中。电子设备的处理器从计算机可读存储介质读取该计算机可执行指令，处理器执行该计算机可执行指令，使得该电子设备执行本申请实施例上述的样本标识的对齐方法。本申请实施例提供一种存储有计算机可执行指令的计算机可读存储介质，其中存储有计算机可执行指令或者计算机程序，当计算机可执行指令或者计算机程序被处理器执行时，将引起处理器执行本申请实施例提供的样本标识的对齐方法，例如，如图3A示出的样本标识的对齐方法。在一些实施例中，计算机可读存储介质可以是RAM、ROM、闪存、磁表面存储器、光盘、或CD-ROM等存储器；也可以是包括上述存储器之一或任意组合的各种设备。在一些实施例中，计算机可执行指令可以采用程序、软件、软件模块、脚本或代码的形式，按任意形式的编程语言来编写，并且其可按任意形式部署，包括被部署为独立的程序或者被部署为模块、组件、子例程或者适合在计算环境中使用的其它单元。作为示例，计算机可执行指令可以但不一定对应于文件系统中的文件，可以可被存储在保存其它程序或数据的文件的一部分，例如，存储在超文本标记语言文档中的一个或多个脚本中，存储在专用于所讨论的程序的单个文件中，或者，存储在多个协同文件中。作为示例，计算机可执行指令可被部署为在一个电子设备上执行，或者在位于一个地点的多个电子设备上执行，又或者，在分布在多个地点且通过通信网络互连的多个电子设备上执行。综上所述，通过本申请实施例在样本对齐期间，确保双方不暴露自己的原始数据的同时，当双方数据中对齐key都有重复数据时，提高了样本对齐的速度。以上所述，仅为本申请的实施例而已，并非用于限定本申请的保护范围。凡在本申请的精神和范围之内所作的任何修改、等同替换和改进等，均包含在本申请的保范围之内。
