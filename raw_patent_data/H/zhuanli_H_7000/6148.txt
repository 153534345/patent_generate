标题title
基于DMD的DVS等效帧频检测方法
摘要abst
本发明涉及动态视觉传感器技术领域，具体提供一种基于DMD的DVS等效帧频检测方法，利用恒定光强的光线照射DMD，利用DMD高时间分辨率的特点，将DMD的出射光以固定的光强变化频率投射到DVS图像传感器中，实现DVS图像传感器在全画幅0至15KHz范围内任意固定频率下的等效帧频测试，满足DVS超高等效帧频的测试需求。本发明只需要对恒定光线进行一次反射和接收，能有效地减少信号因光源截止频率而损失的问题，并且不需要通过控制系统同时触发DMD与DVS，简化了操作方式。
权利要求书clms
1.一种基于DMD的DVS等效帧频检测方法，其特征在于，包括以下步骤：S1：利用恒定光强的光线照射DMD，通过调节DMD的驱动信号，使经过DMD反射后的光线以固定的光强变化频率投射到DVS中；S2：DVS记录DMD反射光线的事件流信息，其中，i表示不同的事件信息，p表示对应事件的极性，包括光线亮度由高到低和由低到高，/＞表示对应事件的位置坐标，/＞表示对应事件的时间戳；S3：将事件流信息进行可视化，将作为颜色信息，在三维空间绘制/＞的散点图；S4：统计固定时间间隔内散点图中的事件数，计算相邻事件数峰值之间的时间间隔，统计时间间隔的众数，众数的倒数即为DVS的等效帧频。2.如权利要求1所述的基于DMD的DVS等效帧频检测方法，其特征在于，利用LED光源提供恒定光强的光线；设置匀光片和准直透镜对光线进行匀光和准直；设置滤光片对光线进行滤光；设置TIR棱镜将光线照射在DMD上，并消除杂散光。3.如权利要求2所述的基于DMD的DVS等效帧频检测方法，其特征在于，DMD包括多个可翻转不同角度的微反射镜单元，通过调节DMD的驱动信号，使被DMD反射的光线以不同角度出射。4.如权利要求3所述的基于DMD的DVS等效帧频检测方法，其特征在于，通过调节DMD的驱动信号，使光线经过TIR棱镜垂直出射至DVS中，DVS对该光线进行成像，或者光线经TIR棱镜折射到DVS外部，DVS不对该光线进行成像。5.如权利要求1所述的基于DMD的DVS等效帧频检测方法，其特征在于，通过调节DMD的驱动信号，经过DMD反射后，光线光强变化频率为0至15KHz。6.如权利要求1所述的基于DMD的DVS等效帧频检测方法，其特征在于，通过对比DVS的等效帧频和DMD反射光线的光强变化频率，评价DVS的等效帧频性能。
说明书desc
技术领域本发明涉及动态视觉传感器技术领域，具体提供一种基于DMD的DVS等效帧频检测方法。背景技术DVS是一种对光强变化产生响应的传感器，当光强变化超过一定阈值时即可以输出一个事件。DVS采用异步数据流输出，与传统“帧”和“曝光”的成像模式不同，在等效帧频测试过程中难以像传统高速相机采用同步信号控制传感器，在单位时间内输出固定数量图像的方式。同时，若使用变化电压控制的LED光源，则会受限于电压上升或下降时间，无法实现超高帧频的测试，并且光源高频闪烁产生的光信号稳定性较差，不能很好地验证DVS高时间分辨率的特性。传统的光源进行频率闪烁变化时，由于存在一定的光强上升时间，即由暗到完全亮的所产生的时间，会引起频率的误差，而当频率较高的时候，若闪烁时间小于等于光强上升时间时，光源还没有完全稳定时就变暗了，导致DVS接收的光亮度不足，即会产生丢帧的现象，降低了验证的准确性。因此，如何精准量化DVS的等效帧频是DVS图像传感器性能指标测试中的一项重要工作。发明内容本发明为解决上述问题，提供了一种基于DMD的DVS等效帧频检测方法，通过控制DMD上微镜单元的摆动，改变出射光线的角度，使DVS靶面上的光以固定的光强频率变化，实现DVS等效帧频测试。本发明提供的基于DMD的DVS等效帧频检测方法，包括以下步骤：S1：利用恒定光强的光线照射DMD，通过调节DMD的驱动信号，使经过DMD反射后的光线以固定的光强变化频率投射到DVS中；S2：DVS记录DMD反射光线的事件流信息，其中，i表示不同的事件信息，p表示对应事件的极性，包括光线亮度由高到低和由低到高，/＞表示对应事件的位置坐标，/＞表示对应事件的时间戳；S3：将事件流信息进行可视化，将作为颜色信息，在三维空间绘制/＞的散点图；S4：统计固定时间间隔内散点图中的事件数，计算相邻事件数峰值之间的时间间隔，统计时间间隔的众数，众数的倒数即为DVS的等效帧频。优选的，利用LED光源提供恒定光强的光线；设置匀光片和准直透镜对光线进行匀光和准直；设置滤光片对光线进行滤光；设置TIR棱镜将光线照射在DMD上，并消除杂散光。优选的，DMD包括多个可翻转不同角度的微反射镜单元，通过调节DMD的驱动信号，使被DMD反射的光线以不同角度出射。优选的，通过调节DMD的驱动信号，使光线经过TIR棱镜垂直出射至DVS中，DVS对该光线进行成像，或者光线经TIR棱镜折射到DVS外部，DVS不对该光线进行成像。优选的，通过调节DMD的驱动信号，经过DMD反射后，光线光强变化频率为0至15KHz。优选的，通过对比DVS的等效帧频和DMD反射光线的光强变化频率，评价DVS的等效帧频性能。与现有技术相比，本发明能够取得如下有益效果：本发明采用DMD提供固定的光强变化频率的光线，满足了DVS超高等效帧频的测试需求，避免了传统方法中光源自身进行频闪而带来的光信号稳定性差的问题。本发明不仅可以测试DVS的全帧等效帧率，而且可通过DMD调制进入DVS中的光强范围，进而测试DVS的开窗等效帧频；并且测试过程中只需要对恒定光线进行一次反射和接收，能有效地减少信号光线因光源截止频率而损失的问题，此外，DMD与DVS无需进行同步触发控制，简化了操作方式，易于更换被测DVS。附图说明图1是根据本发明实施例提供的基于DMD的DVS等效帧频检测的光路图；图2是根据本发明实施例提供的可视化散点图；图3是根据本发明实施例提供的DVS事件统计图。其中的附图标记包括：LED光源1、匀光及准直单元2、滤光片3、TIR棱镜4、DMD5、投影镜头6、DVS7。具体实施方式在下文中，将参考附图描述本发明的实施例。在下面的描述中，相同的模块使用相同的附图标记表示。在相同的附图标记的情况下，它们的名称和功能也相同。因此，将不重复其详细描述。为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及具体实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅用以解释本发明，而不构成对本发明的限制。本发明实施例提供了一种基于DMD的DVS等效帧频检测方法，主要包括以下步骤：S1：如图1所示，首先需要进行测试系统的硬件搭建，测试系统具体包括：LED光源1、匀光及准直单元2、滤光片3、TIR棱镜4、DMD5、投影镜头6和DVS7，其中，LED光源1用于生成稳定光强的光，也可将LED光源替换为其他能够生成稳定光强的光源。由于LED光源生成的光是点光源，需要将其调整为平行光，因此在传输光路上设置有匀光及准直单元2，LED光源1设置在匀光及准直单元2的焦点位置上。匀光及准直单元2由匀光片和准直透镜构成，匀光片使光线均匀射入，准直透镜将点光源准直成平行光。作为一种优选的实施例，也可利用平行光管代替LED光源1和匀光及准直单元2，通过平行光管直接产生强度稳定的平行光。在平行光的传输光路上，设置有滤光片3，滤光片3具有选择性地透过一定范围内的特定波长光线，并吸收或者衰减其他波长光线。滤光片3是通过在滤光片的基材中加入特殊染料或在表面蒸镀光学膜制成，其中，特殊染料或光学膜具有特定的光学性质，可以选择性地吸收或反射特定波长范围的光线，以精确选择小范围波段光波通过。在本实施例中，滤光片3可透过420nm~800nm的可见光谱段。经过滤光后的光线被TIR棱镜4改变方向，入射至DMD5的表面，再被DMD5反射进入TIR棱镜4。TIR棱镜4在测试系统中主要起到转向和消除杂光的作用。具体的，TIR棱镜4将光线照射在DMD5的表面上，DMD5对光线进行调制。DMD5包括多个可翻转的微反射镜单元，每一个微反射镜单元都是一个独立的个体，并且可以翻转不同的角度，通过微镜单元可以使入射的光线呈现不同的角度射出，通过控制微镜单元摆动控制出射光线的角度，进而改变照射在DVS7上的光强，具体在DVS7处反映为对应的数字图像像素的亮暗程度。在DMD5的调制过程中，对DMD5的驱动信号进行调节，当DMD5处于“开”状态时，光线经过TIR棱镜4垂直出射，经过投影镜头6照射到被测的DVS7上。当DMD5处于“关”状态时，DMD5反射的光线经过TIR棱镜4折射出去，不通过投影镜头6输出，因此，DVS7不对该光线成像。通过DMD5的调控，将光线以固定的光强变化频率投射到DVS中，在DVS7中可以看到DMD5的按照特定频率闪烁。由于DMD5的精度高，可以很好地输出更高频的信号，通过调节驱动信号可以使DMD5按照0至15KHz之间的任意固定频率进行摆动，实现了DVS7在全画幅0至15KHz范围内任意固定频率下的等效帧频测试，满足DVS7超高等效帧频的测试需求。在本实施例中，不需要控制系统同步控制DMD5与DVS7，可通过异步信号进行异步控制。作为一种优选的实施例，改变投影镜头6的位置，将投影测试的方法，改为拍摄测试的方法，给DVS7增加拍摄镜头，利用DVS7和拍摄镜头对DMD5进行直接拍摄。S2：DVS7对DMD5反射光线的定频闪烁进行成像，由DVS7记录测试过程中的光强交替变化的视频文件。将视频文件进行解码成csv格式文件，获得事件流信息，其中，DVS7的每次光强相应记为一个时间，i为事件编号，用于表示不同的事件信息；p表示对应事件的极性，包括0和1，0表示光线亮度由高到低，1表示光线亮度由低到高；/＞表示对应事件的位置坐标，对应每帧视频文件中的像素位置；/＞表示对应事件的时间戳。S3：如图2所示，将事件流信息进行可视化，以/＞为坐标点，/＞为颜色信息，在三维空间坐标系中绘制事件流信息的散点图，即事件可视化拟合图像。S4：以固定时间间隔将散点图分为多组，并对每组中的事件个数进行统计，并依据统计结果绘制如图3所示的单位时间戳事件数统计图，统计图中每个事件数量尖峰的时间戳，并计算相邻事件数峰值之间的时间间隔，统计时间间隔的众数，计算该众数的倒数即为DVS7的等效帧频。需要注意的是，峰值事件数量应当大于低谷事件数量的5倍，且持续时间小于50us。在处理较为简单的事件流数据时，也可简化时间统计和等效帧频计算的过程。除此之外，还可以将计算获得的DVS7的等效帧频与DMD5反射光线的光强变化频率进行对比，根据差值评价DVS7的等效帧频性能。作为一种优选的实施例，在统计过程中，可能会存在时间间隔极小的两个时间戳，可以将两个时间戳计算平均值并取整作为新的时间戳。作为一种优选的实施例，可以对DMD5的驱动信号进行调控，使其反射出的光线具有更高的闪烁频率，以测试DVS7在更高频率下的等效帧频，当DVS7无法响应时，这时达到了DVS7的截止频率。通过多次测试可以完成DVS7全画幅0至15KHz范围内任意固定频率下的等效帧频测试。作为一种优选的实施例，通过设置感兴趣区域，对DVS7的部分像素进行帧频测试，以满足DVS7的开窗测试应用需求。尽管上面已经示出和描述了本发明的实施例，可以理解的是，上述实施例是示例性的，不能理解为对本发明的限制。本领域的普通技术人员在本发明的范围内可以对上述实施例进行变化、修改、替换和变型。以上本发明的具体实施方式，并不构成对本发明保护范围的限定。任何根据本发明的技术构思所做出的各种其他相应的改变与变形，均应包含在本发明权利要求的保护范围内。
