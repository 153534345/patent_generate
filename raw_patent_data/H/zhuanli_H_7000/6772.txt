标题title
基于CAN总线的设备入网方法、装置、设备及介质
摘要abst
本申请提供一种基于CAN总线的设备入网方法、装置、设备及介质，在该方法中，通过待入网CAN设备在与CAN总线连接并上电时，确定控制器局域网络中是否存在已入网CAN设备；若存在已入网CAN设备，进一步确定待入网CAN设备的波特率与控制器局域网络的波特率是否相同；若二者不相同，则控制待入网CAN设备进入休眠状态，不接入控制器局域网络。本方案通过在控制器局域网络中存在已入网CAN设备，且待入网CAN设备的波特率与控制器局域网络的波特率不相同时，控制待入网CAN设备进入休眠状态，有效提高了控制器局域网络的安全性。
权利要求书clms
1.一种基于CAN总线的设备入网方法，其特征在于，应用于待入网CAN设备，所述方法包括：所述待入网CAN设备在与CAN总线连接并上电时，确定控制器局域网络中是否存在已入网CAN设备；若确定出所述控制器局域网络中存在已入网CAN设备，确定所述待入网CAN设备的波特率与所述控制器局域网络的波特率是否相同；若确定出所述待入网CAN设备的波特率与所述控制器局域网络的波特率不相同，则控制所述待入网CAN设备进入休眠状态，不接入所述控制器局域网络。2.根据权利要求1所述的方法，其特征在于，所述确定控制器局域网络中是否存在已入网CAN设备，包括：确定在预设第一时长内是否接收到联网消息，所述联网消息包括所述控制器局域网络的波特率，所述联网消息为所述控制器局域网络中身份标识为主机的已入网CAN设备发送的；若在所述预设第一时长内接收到所述联网消息，则确定出所述控制器局域网络中存在已入网CAN设备；若在所述预设第一时长内未接收到所述联网消息，则确定出所述控制器局域网络中不存在已入网CAN设备。3.根据权利要求2所述的方法，其特征在于，所述方法还包括：若确定出所述待入网CAN设备的波特率与所述控制器局域网络的波特率相同，则接入所述控制器局域网络。4.根据权利要求3所述的方法，其特征在于，所述联网消息还包括身份标识码，所述联网消息中的身份标识码为所述控制器局域网络中身份标识为主机的已入网CAN设备的身份标识码，所述方法还包括：将所述待入网CAN设备的身份标识设置为从机；若所述待入网CAN设备的身份标识码小于所述联网消息中的身份标识码，则将所述待入网CAN设备的身份标识设置为主机。5.根据权利要求1所述的方法，其特征在于，所述方法还包括：若确定出所述控制器局域网络中不存在已入网CAN设备，则将所述待入网CAN设备的波特率，作为所述控制器局域网络的波特率，并进行组网；将所述待入网CAN设备的身份标识设置为主机。6.根据权利要求4或5所述的方法，其特征在于，所述方法还包括：接收新入网CAN设备发送的主从机转换请求，所述主从机转换请求包括所述新入网CAN设备的身份标识码；若所述待入网CAN设备的身份标识码大于或等于所述新入网CAN设备的身份标识码，则将所述待入网CAN设备的身份标识设置为从机。7.根据权利要求3所述的方法，其特征在于，所述方法还包括：在所述待入网CAN设备的身份标识为主机时，对于所述控制器局域网中每个身份标识为从机的CAN设备，根据所述身份标识为从机的CAN设备的身份标识码对应的预设第二时长，向所述身份标识为从机的CAN设备发送心跳消息，其中，预设第二时长与身份标识码的大小成正比；在所述待入网CAN设备的身份标识为从机时，在接收到身份标识为主机的CAN设备发送的心跳消息后，若在预设第三时长内未再次接收到心跳消息，则将所述待入网CAN设备的身份标识设置为主机。8.一种基于CAN总线的设备入网装置，其特征在于，包括：处理模块，用于：待入网CAN设备在与CAN总线连接并上电时，确定控制器局域网络中是否存在已入网CAN设备；若确定出所述控制器局域网络中存在已入网CAN设备，确定所述待入网CAN设备的波特率与所述控制器局域网络的波特率是否相同；控制模块，用于若确定出所述待入网CAN设备的波特率与所述控制器局域网络的波特率不相同，则控制所述待入网CAN设备进入休眠状态，不接入所述控制器局域网络。9.一种电子设备，其特征在于，包括：处理器，存储器，通信接口；所述存储器用于存储所述处理器的可执行指令；其中，所述处理器配置为经由执行所述可执行指令来执行权利要求1至7任一项所述的基于CAN总线的设备入网方法。10.一种可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至7任一项所述的基于CAN总线的设备入网方法。
说明书desc
技术领域本申请涉及通信领域，尤其涉及一种基于控制器局域网络总线的设备入网方法、装置、设备及介质。背景技术随着科技的发展，控制器局域网络总线是国际上应用最广泛的现场总线之一，因其高可靠性和良好的错误检测能力在汽车制造、自动控制、航空航天、航海、过程工业、机械工业、纺织机械、农用机械、机器人、数控机床等众多领域得到应用。现有技术中，各种传感器以及控制器等CAN设备与CAN总线连接后，可完成CAN通讯组网。在一个控制器局域网络中，各CAN设备的波特率是相同的，可使得各设备之间完成通讯。当一个新的CAN设备入网时，若该CAN设备的波特率与控制器局域网络的波特率不同，会造成CAN总线关闭，控制器局域网络中的各CAN设备之间无法完成通信，控制器局域网络瘫痪。综上所述，现有的控制器局域网络入网方法，在CAN设备入网时，若其波特率与控制器局域网络的波特率不同，会导致控制器局域网络瘫痪，控制器局域网络的安全性较低。发明内容本申请实施例提供一种基于CAN总线的设备入网方法、装置、设备及介质，用于解决现有的控制器局域网络入网方法，在CAN设备入网时，若其波特率与控制器局域网络的波特率不同，会导致控制器局域网络瘫痪的问题。第一方面，本申请实施例提供一种基于CAN总线的设备入网方法，应用于待入网CAN设备，所述方法包括：所述待入网CAN设备在与CAN总线连接并上电时，确定控制器局域网络中是否存在已入网CAN设备；若确定出所述控制器局域网络中存在已入网CAN设备，确定所述待入网CAN设备的波特率与所述控制器局域网络的波特率是否相同；若确定出所述待入网CAN设备的波特率与所述控制器局域网络的波特率不相同，则控制所述待入网CAN设备进入休眠状态，不接入所述控制器局域网络。在一种具体实施方式中，所述确定控制器局域网络中是否存在已入网CAN设备，包括：确定在预设第一时长内是否接收到联网消息，所述联网消息包括所述控制器局域网络的波特率，所述联网消息为所述控制器局域网络中身份标识为主机的已入网CAN设备发送的；若在所述预设第一时长内接收到所述联网消息，则确定出所述控制器局域网络中存在已入网CAN设备；若在所述预设第一时长内未接收到所述联网消息，则确定出所述控制器局域网络中不存在已入网CAN设备。在一种具体实施方式中，所述方法还包括：若确定出所述待入网CAN设备的波特率与所述控制器局域网络的波特率相同，则接入所述控制器局域网络。在一种具体实施方式中，所述联网消息还包括身份标识码，所述联网消息中的身份标识码为所述控制器局域网络中身份标识为主机的已入网CAN设备的身份标识码，所述方法还包括：将所述待入网CAN设备的身份标识设置为从机；若所述待入网CAN设备的身份标识码小于所述联网消息中的身份标识码，则将所述待入网CAN设备的身份标识设置为主机。在一种具体实施方式中，所述方法还包括：若确定出所述控制器局域网络中不存在已入网CAN设备，则将所述待入网CAN设备的波特率，作为所述控制器局域网络的波特率，并进行组网；将所述待入网CAN设备的身份标识设置为主机。在一种具体实施方式中，所述方法还包括：接收新入网CAN设备发送的主从机转换请求，所述主从机转换请求包括所述新入网CAN设备的身份标识码；若所述待入网CAN设备的身份标识码大于或等于所述新入网CAN设备的身份标识码，则将所述待入网CAN设备的身份标识设置为从机。在一种具体实施方式中，所述方法还包括：在所述待入网CAN设备的身份标识为主机时，对于所述控制器局域网中每个身份标识为从机的CAN设备，根据所述身份标识为从机的CAN设备的身份标识码对应的预设第二时长，向所述身份标识为从机的CAN设备发送心跳消息，其中，预设第二时长与身份标识码的大小成正比；在所述待入网CAN设备的身份标识为从机时，在接收到身份标识为主机的CAN设备发送的心跳消息后，若在预设第三时长内未再次接收到心跳消息，则将所述待入网CAN设备的身份标识设置为主机。第二方面，本申请实施例提供一种基于CAN总线的设备入网装置，包括：处理模块，用于：待入网CAN设备在与CAN总线连接并上电时，确定控制器局域网络中是否存在已入网CAN设备；若确定出所述控制器局域网络中存在已入网CAN设备，确定所述待入网CAN设备的波特率与所述控制器局域网络的波特率是否相同；控制模块，用于若确定出所述待入网CAN设备的波特率与所述控制器局域网络的波特率不相同，则控制所述待入网CAN设备进入休眠状态，不接入所述控制器局域网络。第三方面，本申请实施例提供一种电子设备，包括：处理器，存储器，通信接口；所述存储器用于存储所述处理器的可执行指令；其中，所述处理器配置为经由执行所述可执行指令来执行第一方面任一项所述的基于CAN总线的设备入网方法。第四方面，本申请实施例提供一种可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现第一方面任一项所述的基于CAN总线的设备入网方法。本申请实施例提供的基于CAN总线的设备入网方法、装置、设备及介质，通过待入网CAN设备在与CAN总线连接并上电时，确定控制器局域网络中是否存在已入网CAN设备；若存在已入网CAN设备，进一步确定待入网CAN设备的波特率与控制器局域网络的波特率是否相同；若二者不相同，则控制待入网CAN设备进入休眠状态，不接入控制器局域网络。本方案通过在控制器局域网络中存在已入网CAN设备，且待入网CAN设备的波特率与控制器局域网络的波特率不相同时，控制待入网CAN设备进入休眠状态，有效提高了控制器局域网络的安全性。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本申请提供的基于CAN总线的设备入网方法实施例一的流程示意图；图2为本申请提供的基于CAN总线的设备入网方法实施例二的流程示意图；图3为本申请提供的基于CAN总线的设备入网方法实施例三的流程示意图；图4为本申请提供的基于CAN总线的设备入网方法实施例四的流程示意图；图5为本申请提供的基于CAN总线的设备入网装置实施例的结构示意图；图6为本申请提供的一种电子设备的结构示意图。具体实施方式为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在根据本实施例的启示下作出的所有其他实施例，都属于本申请保护的范围。本申请的说明书和权利要求书及上述附图中的术语“第一”、“第二”、“第三”“第四”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本申请的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。随着科技的发展，控制器局域网络作为一种有效支持分布式控制系统的串行通信网络，受到人们的喜爱。CAN总线是在20世纪80年代专门为汽车行业开发的一种串行通信总线。由于其高性能、高可靠性以及独特的设计而越来越受到人们的重视，被广泛应用于诸多领域。现有技术中，CAN设备与CAN总线连接完成CAN通讯组网后，为了使得各设备之间进行通讯，各CAN设备的波特率需要设置为相同的波特率。当一个新的CAN设备入网时，若该CAN设备的波特率与控制器局域网络的波特率不同，会造成CAN总线关闭，控制器局域网络中的各CAN设备之间无法完成通信，导致控制器局域网络瘫痪，控制器局域网络的安全性较低的问题。针对现有技术中存在的问题，发明人在对基于CAN总线的设备入网方法进行研究的过程中发现，在待入网CAN设备在入网前，若确定出其波特率与控制器局域网络的波特率不同，使其进入休眠状态，从而不会影响控制器局域网络的运行。待入网CAN设备在与CAN总线连接并上电时，首先确定控制器局域网络中是否存在已入网CAN设备；若存在已入网CAN设备，进一步确定待入网CAN设备的波特率与控制器局域网络的波特率是否相同；若二者不相同，则控制待入网CAN设备进入休眠状态，不接入控制器局域网络，保证了控制器局域网络的正常运行，提高了控制器局域网络的安全性。基于上述发明构思，设计了本申请中的基于CAN总线的设备入网方案。下面对本申请提供的基于CAN总线的设备入网方法的应用场景进行示例说明。示例性的，在该应用场景中，一个水泵房中，存在多个水泵，每个水泵与用于控制水泵的控制器相连接，每个控制器与CAN总线连接，构成控制器局域网络。在该控制器局域网络正常运行过程中，水泵房中新安装了一个水泵和其对应的控制器，为了使得对该水泵进行控制，需要将该水泵对应的控制器接入控制器局域网络。该控制器作为待接入CAN设备，在与CAN总线连接并上电时，检测控制器局域网络中是否存在已入网CAN设备。在确定出控制器局域网络中存在已入网CAN设备时，进一步确定该控制器的波特率与控制器局域网络的波特率是否相同。若二者相同，该控制器接入控制器局域网络，以便后续通过该控制器对水泵进行控制。若二者不相同，则控制该控制器进入休眠状态，不接入控制器局域网络，防止控制器对控制器局域网络产生影响，提高控制器局域网络的安全性。需要说明的是，控制器局域网络中的各设备通过双绞屏蔽线以“手拉手”方式连接，可减小环境干扰，降低成本。需要说明的是，上述场景仅是本申请实施例提供的一种应用场景的示例，本申请实施例不对该场景中包括的各种设备的实际形态进行限定，也不对设备之间的交互方式进行限定，在方案的具体应用中，可以根据实际需求设定。下面，通过具体实施例对本申请的技术方案进行详细说明。需要说明的是，下面这几个具体的实施例可以相互结合，对于相同或相似的概念或过程可能在某些实施例中不再赘述。图1为本申请提供的基于CAN总线的设备入网方法实施例一的流程示意图，本申请实施例对待入网CAN设备准备入网时，确定出控制器局域网络中存在已入网CAN设备，且待入网CAN设备的波特率与控制器局域网络的波特率不相同，进入休眠状态的情况进行说明。本实施例中的方法可以通过软件、硬件或者软硬件结合的方式来实现。如图1所示，该基于CAN总线的设备入网方法具体包括以下步骤：S101：待入网CAN设备在与CAN总线连接并上电时，确定控制器局域网络中是否存在已入网CAN设备。待入网CAN设备想要接入控制器局域网络时，需要工作人员将该待入网CAN设备与CAN总线连接，并进行上电。在本步骤中，待入网CAN设备在与CAN总线连接并上电时，首先确定控制器局域网络中是否存在已入网CAN设备，以便后续根据确定结果，确定待入网CAN设备是否可接入网络。具体的，控制器局域网络中身份标识为主机的已入网CAN设备，会定期发送联网消息，联网消息包括控制器局域网络的波特率。与CAN总线连接的设备都可以接收到该联网消息，所以待入网CAN设备可确定在预设第一时长内是否接收到联网消息。若在预设第一时长内接收到联网消息，则确定出控制器局域网络中存在已入网CAN设备；若在预设第一时长内未接收到联网消息，则确定出控制器局域网络中不存在已入网CAN设备。需要说明的是，预设第一时长可以是1秒、3秒，还可以是5秒，本申请实施例不对预设第一时长进行限定，可根据实际情况进行设置。S102：若确定出控制器局域网络中存在已入网CAN设备，确定待入网CAN设备的波特率与控制器局域网络的波特率是否相同。在本步骤中，待入网CAN设备确定出控制器局域网络中存在已入网CAN设备时，为了保证待入网CAN设备接入控制器局域网络，不会造成控制器局域网络的瘫痪，还需要确定待入网CAN设备的波特率与控制器局域网络的波特率是否相同。由于联网消息包括控制器局域网络的波特率，所以待入网CAN设备可将控制器局域网络的波特率与待入网CAN设备的波特率进行直接比较。S103：若确定出待入网CAN设备的波特率与控制器局域网络的波特率不相同，则控制待入网CAN设备进入休眠状态，不接入控制器局域网络。在本步骤中，待入网CAN设备确定出待入网CAN设备的波特率与控制器局域网络的波特率不相同时，若将该待入网CAN设备接入控制器局域网络，会造成控制器局域网络的瘫痪，所以控制待入网CAN设备进入休眠状态，不接入控制器局域网络。需要说明的是，控制器局域网络中身份标识为主机的已入网CAN设备，还可称为：主机。若主机中存储有该待入网CAN设备的信息，在该待入网CAN设备未接入控制器局域网络时，主机可检测到该待入网CAN设备未接入控制器局域网络，进而将该待入网CAN设备的信息发送至控制器局域网络中的上位机，或者直接发送至工作人员的终端设备，以便工作人员调整该待入网CAN设备的波特率或者调整控制器局域网络的波特率，进而该待入网CAN设备可重新入网。若主机中未存储该待入网CAN设备的信息，在该待入网CAN设备未接入控制器局域网络时，该待入网CAN设备可向工作人员的终端设备发送未接入提示消息，以便工作人员调整该待入网CAN设备的波特率或者调整控制器局域网络的波特率，进而该待入网CAN设备可重新入网。本实施例提供的基于CAN总线的设备入网方法，待入网CAN设备在与CAN总线连接并上电时，确定控制器局域网络中是否存在已入网CAN设备；若控制器局域网络中存在已入网CAN设备，进而确定待入网CAN设备的波特率与控制器局域网络的波特率是否相同；若二者不相同，则控制待入网CAN设备进入休眠状态，不接入控制器局域网络。相较于现有技术中待入网CAN设备可直接接入控制器局域网络，本方案在控制器局域网络中存在已入网CAN设备，且待入网CAN设备的波特率与控制器局域网络的波特率不相同时，控制待入网CAN设备进入休眠状态，可保证控制器局域网络正常运行，有效提高了控制器局域网络的安全性。图2为本申请提供的基于CAN总线的设备入网方法实施例二的流程示意图，在上述实施例的基础上，本申请实施例对控制器局域网络中存在已入网CAN设备，且待入网CAN设备的波特率与控制器局域网络的波特率相同时，待入网CAN设备接入控制器局域网络，进而确定身份标识的情况进行说明。如图2所示，该基于CAN总线的设备入网方法具体包括以下步骤：S201：若确定出待入网CAN设备的波特率与控制器局域网络的波特率相同，则接入控制器局域网络。在本步骤中，待入网CAN设备在确定出控制器局域网络中存在已入网CAN设备，进而还确定出待入网CAN设备的波特率与控制器局域网络总线的波特率相同时，说明该待入网CAN设备接入控制器局域网络后，可正常与控制器局域网络中的其他设备进行通讯，不会造成控制器局域网络的瘫痪，所以该待入网CAN设备接入控制器局域网络。S202：将待入网CAN设备的身份标识设置为从机。在本步骤中，由于在一个控制器局域网络中只存在一个主机，对于控制器局域网络中身份标识为从机的已入网CAN设备，还可称为：从机，从机之间不可以直接通讯，从机与主机之间可直接通讯，主机负责接收、获取从机的数据，从机负责接收来自主机的命令、数据等。所以在待入网CAN设备接入控制器局域网络中时，由于当前控制器局域网络中存在主机，为了保证控制器局域网络的正常运行，需要将待入网CAN设备的身份标识设置为从机。S203：若待入网CAN设备的身份标识码小于联网消息中的身份标识码，则将待入网CAN设备的身份标识设置为主机。在本步骤中，每当控制器局域网络中有新设备接入后，会重新确定一次控制器局域网络中的主机，以便确保一个控制器局域网络中只存在一个主机，且主机的身份标识码为控制器局域网络包括的所有设备的ID中最小的。所以待入网CAN设备以从机的身份标识接入控制器局域网络中后，由于联网消息还包括ID，联网消息中的ID为控制器局域网络中身份标识为主机的已入网CAN设备的ID，并且由于联网消息中的ID为当前主机的ID，所以在该待入网CAN设备接入CAN前，主机的ID是控制器局域网络包括的设备的ID中最小的，所以可判断待入网CAN设备的ID是否小于联网消息中的ID，即可确定待入网CAN设备的身份标识。若待入网CAN设备的ID小于联网消息中的ID，则将待入网CAN设备的身份标识设置为主机。需要说明的是，待入网CAN设备在以从机的身份标识接入控制器局域网络中时，还会向主机发送主从机转换请求，主从机转换请求包括待入网CAN设备的ID，主机可判断出其ID大于待入网CAN设备的ID，该主机将自己的身份标识设置为从机。若待入网CAN设备的ID大于或等于联网消息中的ID，则将保持待入网CAN设备的身份标识不变，仍为从机。本实施例提供的基于CAN总线的设备入网方法，通过在控制器局域网络中存在已入网CAN设备，且待入网CAN设备的波特率与控制器局域网络的波特率相同的情况下，待入网CAN设备接入控制器局域网络，进而根据身份标识码确定身份标识，保证了控制器局域网络的正常运行，提高了CAN的安全性。图3为本申请提供的基于CAN总线的设备入网方法实施例三的流程示意图，在上述实施例的基础上，本申请实施例对控制器局域网络中不存在已入网CAN设备时，待入网CAN设备进行组网的情况进行说明。如图3所示，该基于CAN总线的设备入网方法具体包括以下步骤：S301：若确定出控制器局域网络中不存在已入网CAN设备，则将待入网CAN设备的波特率，作为控制器局域网络的波特率，并进行组网。在本步骤中，待入网CAN设备在与CAN总线连接并上电时，首先确定控制器局域网络中是否存在已入网CAN设备，若确定出控制器局域网络中不存在已入网CAN设备，说明待入网CAN设备无需考虑波特率是否与控制器局域网络的波特率是否相同，直接进行组网即可，不会造成控制器局域网络的瘫痪，将待入网CAN设备的波特率，作为控制器局域网络的波特率，并进行组网。S302：将待入网CAN设备的身份标识设置为主机。在本步骤中，待入网CAN设备组网成功后，为了保证控制器局域网络的正常运行，需要将待入网CAN设备的身份标识设置为主机。本实施例提供的基于CAN总线的设备入网方法，通过在控制器局域网络中不存在已入网CAN设备的情况下，待入网CAN设备以自身的波特率进行组网，并将其身份标识设置为主机，保证了控制器局域网络的正常运行，提高了控制器局域网络的安全性。图4为本申请提供的基于CAN总线的设备入网方法实施例四的流程示意图，在上述实施例的基础上，本申请实施例对待入网CAN设备接入控制器局域网络，并且身份标识为主机的情况下，有新入网CAN设备接入控制器局域网络时，更新待入网CAN设备的身份标识的情况进行说明。如图4所示，该基于CAN总线的设备入网方法具体包括以下步骤：S401：接收新入网CAN设备发送的主从机转换请求。在本步骤中，待入网CAN设备接入控制器局域网络，并且身份标识为主机后，若有新的CAN设备接入控制器局域网络，也就是新入网CAN设备接入控制器局域网络，新入网CAN设备会通过CAN总线向当前的主机，也就是待入网CAN设备发送主从机转换请求，主从机转换请求包括新入网CAN设备的ID。待入网CAN设备即可接收新入网CAN设备发送的主从机转换请求。S402：若待入网CAN设备的身份标识码大于或等于新入网CAN设备的身份标识码，则将待入网CAN设备的身份标识设置为从机。在本步骤中，为了确保一个控制器局域网络中只存在一个主机，待入网CAN设备会判断待入网CAN设备的ID是否大于或等于新入网CAN设备的ID，若待入网CAN设备的ID大于或等于新入网CAN设备的ID，则将待入网CAN设备的身份标识设置为从机。需要说明的是，新入网CAN设备在以从机的身份标识接入控制器局域网络中后，可根据接收到的联网消息，确定出待入网CAN设备的ID大于或等于新入网CAN设备的ID，新入网CAN设备将其自身的身份标识设置为主机。若待入网CAN设备的ID小于新入网CAN设备的ID，则保证待入网CAN设备的身份标识不变，仍为主机。本实施例提供的基于CAN总线的设备入网方法，通过在待入网CAN设备接入控制器局域网络，并且身份标识为主机的情况下，有新入网CAN设备接入控制器局域网络时，更新待入网CAN设备的身份标识，保证了控制器局域网络的正常运行，提高了控制器局域网络的安全性。下面对本申请提供的待入网CAN设备的身份标识为主机时，向从机发送心跳消息，以及待入网CAN设备的身份标识为从机，主机退出控制器局域网络时，更新待入网CAN设备的身份标识的情况进行说明。在待入网CAN设备的身份标识为主机时，为了使得从机能够知晓主机没有出现问题，仍在正常运行，对于控制器局域网中每个身份标识为从机的CAN设备，根据身份标识为从机的CAN设备的身份标识码对应的预设第二时长，向身份标识为从机的CAN设备发送心跳消息，也就是每间隔预设第二时长，发送一次心跳消息，其中，预设第二时长与身份标识码的大小成正比。示例性的，在控制器局域网络中，包括一个主机和三个从机，三个从机的ID分别为005、006、007。005对应的预设第二时长为1秒，006对应的预设第二时长为2秒，007对应的预设第二时长为3秒，ID越小，对应的预设第二时长越短，主机每间隔1秒向ID为005的从机发送一次心跳消息，主机每间隔2秒向ID为006的从机发送一次心跳消息，主机每间隔3秒向ID为007的从机发送一次心跳消息。需要说明的是，上述例子仅是对主机发送心跳消息的情况进行示例，本申请实施例不对ID、预设第二时长等进行限定，可根据实际情况进行确定。在待入网CAN设备的身份标识为从机时，为了使得在主机出现问题，退出控制器局域网络时，有新的主机被确定出来，保证控制器局域网络的正常运行，待入网CAN设备在接收到身份标识为主机的CAN设备发送的心跳消息后，若在预设第三时长内未再次接收到心跳消息，则将待入网CAN设备的身份标识设置为主机。由于主机发送心跳消息是根据从机的ID对应的预设第二时长，每预设第二时长，发送一次心跳消息，并且ID越小，对应的预设第二时长越短，所以CAN包括的从机中，ID最小的从机会最先确定出接收主机发送的心跳消息后，在预设第三时长内未再次接收到心跳消息，此时ID最小的从机，也就是将待入网CAN设备，将其自身的身份标识设置为主机，进而向控制器局域网络中的从机发送心跳消息，以便从机不会更改自身的身份标识。需要说明的是，预设第三时长可以是1秒、3秒，还可以是7秒，本申请实施例不对运输和第三时长进行限定，可根据实际情况进行设置。本实施例提供的基于CAN总线的设备入网方法，通过主机定期向从机发送心跳消息，并且在主机退出控制器局域网络的情况下，从机可根据是否再次接收到心跳消息，修改自身的身份标识，确保控制器局域网络中有主机存在，保证了控制器局域网络的正常运行，提高了控制器局域网络的安全。下面对本申请提供的控制器局域网络可实现联动修改参数和状态的情况进行说明。在控制器局域网络中，主机中存储有各从机的参数之间的联动关系，以及状态之间的联动关系，在其中一个从机的参数，和/或，状态发生变化时，该从机将变化的参数，和/或，状态发送至主机，主机根据存储的联动关系，确定出其他从机中需要修改的参数，和/或，状态，以及修改后的参数值，和/或，修改后的状态，进而向对应的从机发送修改命令，修改命令中包括修改项，以及修改后的参数值，和/或，修改后的状态，以便从机修改参数，和/或，状态。示例性的，控制器局域网络中包括一个主机和三个从机，三个从机分别为从机A、从机B、从机C。主机中存储三个从机的参数之间的联动关系为：从机A的水泵阀门开度＝从机B的水泵阀门开度的1/2＝从机C的水泵阀门开度的1/4。当前从机A的水泵阀门开度为2％，当前从机B的水泵阀门开度为4％，当前从机C的水泵阀门开度为8％，当从机A的水泵阀门开度修改为3％时，从机A将修改后的水泵阀门开度发送至主机，主机可确定出从机B的修改后的水泵阀门开度为6％，从机C的修改后的水泵阀门开度为12％。主机向从机B发送修改命令，修改命令中的修改项为水泵阀门开度，修改命令中的修改后的参数值为6％，从机B即可将水泵阀门开度修改为6％。主机向从机C发送修改命令，修改命令中的修改项为水泵阀门开度，修改命令中的修改后的参数值为12％，从机C即可将水泵阀门开度修改为12％。本实施例提供的基于CAN总线的设备入网方法，通过主机联动修改设备参数或状态，可提高修改效率。下面对本申请提供的主机将各从机的设备信息发送至上位机的情况进行说明。在控制器局域网络中，包括一个身份标识为从机的设备，该设备为上位机，并且可将上位机的ID设置为很大的ID，以确保上位机不会成为主机。主机还可以通过RS232/485通讯，将组网信息，以及从机的设备信息发送至上位机，以便用户查看。另外，上位机可设置在与其他从机和主机较远的位置，用户可通过上位机向主机发送控制指令，从而实现远程控制。本实施例提供的基于CAN总线的设备入网方法，在其他从机及主机所处的环境恶劣的情况下，通过上位机可实现远程控制，有效提高了用户的人身安全，也提高了控制效率。下述为本申请装置实施例，可以用于执行本申请方法实施例。对于本申请装置实施例中未披露的细节，请参照本申请方法实施例。图5为本申请提供的基于CAN总线的设备入网装置实施例的结构示意图；如图5所示，该基于CAN总线的设备入网装置50包括：处理模块51，用于：待入网CAN设备在与CAN总线连接并上电时，确定控制器局域网络中是否存在已入网CAN设备；若确定出所述控制器局域网络中存在已入网CAN设备，确定所述待入网CAN设备的波特率与所述控制器局域网络的波特率是否相同；控制模块52，用于若确定出所述待入网CAN设备的波特率与所述控制器局域网络的波特率不相同，则控制所述待入网CAN设备进入休眠状态，不接入所述控制器局域网络。进一步地，所述处理模块51，具体用于：确定在预设第一时长内是否接收到联网消息，所述联网消息包括所述控制器局域网络的波特率，所述联网消息为所述控制器局域网络中身份标识为主机的已入网CAN设备发送的；若在所述预设第一时长内接收到所述联网消息，则确定出所述控制器局域网络中存在已入网CAN设备；若在所述预设第一时长内未接收到所述联网消息，则确定出所述控制器局域网络中不存在已入网CAN设备。进一步地，所述控制模块52，还用于：若确定出所述待入网CAN设备的波特率与所述控制器局域网络的波特率相同，则接入所述控制器局域网络。进一步地，所述联网消息还包括身份标识码，所述联网消息中的身份标识码为所述控制器局域网络中身份标识为主机的已入网CAN设备的身份标识码，所述处理模块51，还用于：将所述待入网CAN设备的身份标识设置为从机；若所述待入网CAN设备的身份标识码小于所述联网消息中的身份标识码，则将所述待入网CAN设备的身份标识设置为主机。进一步地，所述处理模块51，还用于：若确定出所述控制器局域网络中不存在已入网CAN设备，则将所述待入网CAN设备的波特率，作为所述控制器局域网络的波特率，并进行组网；将所述待入网CAN设备的身份标识设置为主机。接收模块53，用于接收新入网CAN设备发送的主从机转换请求，所述主从机转换请求包括所述新入网CAN设备的身份标识码；进一步地，所述处理模块51，还用于：若所述待入网CAN设备的身份标识码大于或等于所述新入网CAN设备的身份标识码，则将所述待入网CAN设备的身份标识设置为从机。发送模块54，还用于：在所述待入网CAN设备的身份标识为主机时，对于所述控制器局域网中每个身份标识为从机的CAN设备，根据所述身份标识为从机的CAN设备的身份标识码对应的预设第二时长，向所述身份标识为从机的CAN设备发送心跳消息，其中，预设第二时长与身份标识码的大小成正比；进一步地，所述处理模块51，还用于：在所述待入网CAN设备的身份标识为从机时，在接收到身份标识为主机的CAN设备发送的心跳消息后，若在预设第三时长内未再次接收到心跳消息，则将所述待入网CAN设备的身份标识设置为主机。本实施例提供的基于CAN总线的设备入网装置，用于执行前述任一方法实施例中的技术方案，其实现原理和技术效果类似，在此不再赘述。图6为本申请提供的一种电子设备的结构示意图。如图6所示，该电子设备60包括：处理器61，存储器62，以及通信接口63；所述存储器62用于存储所述处理器61的可执行指令；其中，所述处理器61配置为经由执行所述可执行指令来执行前述任一方法实施例中的技术方案。可选的，存储器62既可以是独立的，也可以跟处理器61集成在一起。可选的，通信接口63具体可以通过收发器实现。通信接口用于实现数据库访问装置与其他设备之间的通信。存储器可能包含随机存取存储器，也可能还包括非易失性存储器，例如至少一个磁盘存储器。上述的处理器可以是通用处理器，包括中央处理器CPU、网络处理器等；还可以是数字信号处理器DSP、专用集成电路ASIC、现场可编程门阵列FPGA或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。该电子设备用于执行前述任一方法实施例中的技术方案，其实现原理和技术效果类似，在此不再赘述。本申请实施例还提供一种可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现前述任一实施例提供的技术方案。本申请实施例还提供一种计算机程序产品，包括计算机程序，所述计算机程序被处理器执行时用于实现前述任一方法实施例提供的技术方案。本领域普通技术人员可以理解：实现上述各方法实施例的全部或部分步骤可以通过程序指令相关的硬件来完成。前述的程序可以存储于一计算机可读取存储介质中。该程序在执行时，执行包括上述各方法实施例的步骤；而前述的存储介质包括：ROM、RAM、磁碟或者光盘等各种可以存储程序代码的介质。最后应说明的是：以上各实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述各实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或对其中部分或全部技术特征进行等同替换；而这些修改或替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的范围。
