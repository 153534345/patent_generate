标题title
离散无线传感专网智能气体检测系统
摘要abst
本发明公开了离散无线传感专网智能气体检测系统，包括离散无线传感专网、网关和管理平台，所述离散无线传感专网包括若干离散子网，所述离散子网包括边缘路由、若干个路由器、若干个联络器和若干个气体探测器，所述气体探测器、路由器和边缘路由之间通信连接；所述联络器和边缘路由之间设有子网内通道，所述联络器通过子网内通道将传统网络与离散无线传感专网进行数据传输。本发明构建了离散无线传感专网气体监测模块与其他网络技术和不同管理平台接驳的技术路线，提供了新的智能气体监控数据流传递机制和新的管理手段，提供了新的气体监测解决方案，提高系统的传输能力、智能程度、续航时间和拓展能力。
权利要求书clms
1.离散无线传感专网智能气体检测系统，其特征在于，用于规模化智能气体检测，包括离散无线传感专网和管理平台，所述离散无线传感专网包括网关和若干离散子网，所述离散子网包括边缘路由、若干个路由器、若干个联络器和若干个气体探测器，所述气体探测器、路由器和边缘路由之间通信连接；所述联络器和边缘路由之间设有子网内通道，所述联络器通过子网内通道将传统网络与离散无线传感专网进行数据传输；所述离散无线传感专网和离散子网采用多网关协同技术；所述路由器包括数据平面、准数据平面和应用程序控制平面，当路由器的数据平面收到报文时，将其送往准数据平面，准数据平面根据报文的目标终点将其送入应用层界面进行进一步处理，或立即执行分类、标记和区别处理程序，然后将报文送入数据平面发送；所述联络器包括MCU、传感网模块、网络模块、Memory、LCD、LED、JTAG和Power管理；所述传感网模块通过SPI界面与MCU交流，所述网络模块通过Uart界面与MCU交流，所述Memory、LCD、LED、JTAG和Power管理均通过GPIO与MCU连接；所述MCU统一管理、协调联络器的功能，同时在数据传递过程中扮演传感网模块和网络模块之间的桥梁；每个气体探测器拥有一个属于自己的群落标识，将气体探测器根据其立足的视野或某一视野下的共同特性将气体探测器分为若干群落集合，同一群落集合内的群落标识相同，所述群落集合包括气体群落、网络群落、管控群落、区域群落、守望群落，所述守望群落具有守望群落唤醒机制。2.根据权利要求1所述的离散无线传感专网智能气体检测系统，其特征在于，若干个所述离散子网分布在不同区域或相同区域的不同位置，所述离散无线传感专网内采用非透明传输，离散子网之间通过桥梁网络建立的虚拟通道进行数据传输。3.根据权利要求1所述的离散无线传感专网智能气体检测系统，其特征在于，所述数据平面包括数据层和物理层，所述数据平面为快通道，用于实时接收和输出送往其他节点的数据包，包括接收和输出其他节点的用户数据；所述准数据平面包括准数据层和网络层，所述准数据平面为准快通道；所述应用程序控制平面包括应用层界面，所述应用程序控制平面为慢通道，用于处理消化控制数据和终止于本节点的用户数据包；所述节点是一个连接点，表示一个再分发点或一个通信端点，包括边缘路由、路由器、气体探测器。4.根据权利要求3所述的离散无线传感专网智能气体检测系统，其特征在于，当准快通道接收到快通道输入的报文时，首先判断报文的目标终点；若报文目标终点为非本节点时，立即执行分类、标记和区别处理程序，然后酌情注入快通道加以发送；若报文目标终点为本节点时，报文转送应用程序控制平面进一步处理；同时，本节点应用程序控制平面产生的报文可随时注入数据平面进入发送程序；所述执行分类、标记和区别处理程序包括根据报文的性质，按序接收或抛弃快通道传输的报文。5.根据权利要求1所述的离散无线传感专网智能气体检测系统，其特征在于，以离散无线传感专网为骨干网，通过联络器与其他网络技术进行接驳，所述其他网络技术包括常规以太网、WIFI、移动技术、传统工业网络技术，数据传输过程中采用非透明传输；在管理平台，通过OPC与传统DCS系统或其他用户系统接驳；在离散无线传感专网的网关或离散子网的边缘路由出口，可接驳Ethernet、WIFI、移动4G/5G，数据传输过程中采用透明传输。6.根据权利要求1所述的离散无线传感专网智能气体检测系统，其特征在于，所述子网内通道位于离散子网内部，作为联络器与边缘路由之间的数据传输通道，所述联络器从不同的传统网络接收数据包，注入离散子网内通道；所述联络器从子网内通道接收来自边缘路由的数据包，传送到不同的传统网络。7.根据权利要求6所述的离散无线传感专网智能气体检测系统，其特征在于，所述联络器的数据传输方法包括：当联络器中的网络模块接收到来自传统网络的无线数据包后，且无线数据包的到达目标地址必须经由离散无线传感网时，将无线数据包送往联络器的MCU处理，MCU将其注入传感网模块，该模块于是启动无线发射，将数据送入子网内通道，数据包经子网内通道输入边缘路由；当联络器的传感网模块从子网内通道接收到来自边缘路由的数据包，且数据包的到达目标地址必须经由Ethernet，WIFI或4G/5G网络时，传感网模块将数据包传递给MCU，MUC将数据包转送给相应网络模块，然后通过有线/无线网络，输出数据包。8.根据权利要求1所述的离散无线传感专网智能气体检测系统，其特征在于，所述气体群落为探测相同目标气体或气体类型的气体探测器集合；每个目标气体拥有一个气体类型ID；所述网络群落为支持相同网络技术的气体探测器或设备集合，每种网络技术拥有一个网络ID；所述管控群落为管理分组属于同一组别的气体探测器集合，每个小组拥有一个管控ID；所述区域群落为部署于特定物理区域的气体探测器集合，每个区域拥有一个区域ID；所述守望群落为探测相同目标气体且安装于同一个物理区域的相邻气体探测器集合，每个守望群落拥有一个守望ID。9.根据权利要求1所述的离散无线传感专网智能气体检测系统，其特征在于，所述守望群落唤醒机制的具体步骤包括：S51、当其中一个气体探测器收集环境样本后发现气体浓度异常，并确认其是否存在异常，若确认存在异常则跳转至步骤S52，若确认不存在异常则跳转值步骤S56；S52、立即提高监测频度，并启动守望群落唤醒机制；S53、该气体探测器以多播方式递送唤醒报文给守望群落中的其他气体探测器；S54、群落中的其他气体探测器被唤醒后立即调整频度加强监测；S55、确认是否存在异常，若确认存在异常则重复步骤S52-S54直至确认环境正常，若确认不存在异常则跳转值步骤S56；S56、系统回归正常状态。10.根据权利要求9所述的离散无线传感专网智能气体检测系统，其特征在于，当步骤S51或步骤S54中气体探测器检测气体浓度超过阈值时，即刻发送报文向管理平台报警。
说明书desc
技术领域本发明涉及气体泄漏检测、环保气体检测及工业安全互联网领域，具体涉及离散无线传感专网智能气体检测系统。背景技术工业发展大潮给工业监测、环境保护、公共安全等领域带来了空前挑战。有毒有害和易爆易燃气体泄漏引发的事故，大气和水系污染频繁发生，传统有线部署监测方法覆盖面有限，于防爆区内布线，实施起来工程大，灵活性低，难以支撑新的需求。无线产品具有先天优势，然而目前市场上的无线气体探测器存在不少技术瓶颈，难以大规模普及。其中基于移动通讯的气体探测器，私密性低，能耗高，需要外部电源并定期充值。由此，无线自组网技术和相关智能技术在该领域迎来了新的契机。无线自组网技术属于物联网范畴，后者也是近年来国内外活跃的信息技术领域之一。物联网在工业监测、环境保护、公共安全等领域的应用具有标志意义。在环保领域，传感器、RFID等相关技术在污染源自动监控、环境在线监测等系统的建设中扮演重要角色。虽然我国物联网领域已呈现初步繁荣景象，然而，从核心技术，实际应用等方面进行深度探索，不难发现，在物联网各个领域包括气体探测和环保安全领域仍处于探索阶段，相关研发工作缺乏实质突破，应用案例水准有待提高。目前市场上基于无线自组网的气体监测解决方案难以大规模普及，存在诸多问题，综合起来存在如下技术瓶颈：1.系统可扩展性局限，灵活性低，气体探测器数量和物理覆盖面小；2.系统脆弱，可靠性低，网关失能可导致整个系统瘫痪；3.所有报文采取简单一刀切的处理方式。冲突发生时，关键报文淹没于普通数据中，被提早丢弃；4.延长气体探测器电池待机时间和保持气体探测频度相互冲突，顾此失彼；5.由于气体种类繁多，网络技术各异，气体探测器安装区域和管控分组可能存在交集，不同问题不同视野，纳入一体化平台后，难以实现有序管理。上述不同方面呈现的痛点，有其独立的一面，也相互关联。如系统可靠性低，必将制约系统的扩展；而系统扩展，设备增多，无疑进一步加剧网络和网关的压力，致使数据丢失愈加频繁。另一方面，系统可靠性低，工作效率低下，也将加剧电能损耗。同时，如果缺乏有效的管理机制，管理效能低下，易致系统失序，扩展更加困难。现有技术中，中国专利CN202111002213.4公开了一种离散无线传感专网、系统及其数据传输方式，该技术建立了一个跨区域的离散式传感专网，能够覆盖不同物理区域的节点，拓展了传感网覆盖的范围和节点数量。同时，在不改变传感网低功耗低带宽和节点间传输距离的条件下，实现位于不同城市、不同省份的异地覆盖功能，从而大幅度升级了传感网的功能，提高了节点数量的可扩展性，为各类传感网应用提供了强大的功能选项。由于传感网或自组网属于PAN微网，具有低功耗，低频宽，低成本的特点，资源极其有限，难以展开冗余网关、QoS、优先级传输等技术手段。目前市场上的同类产品，包括中国专利CN202111002213.4提供的离散无线传感专网中均没有提供这些技术，这是上述技术瓶颈2，3存在的深层原因。本申请结合上述离散无线传感专网，以独特的系列创新技术，提供了新的气体监测解决方案。在提供备用网关、智能传输、网络扩展等离散传感网新功能的同时，全面提升系统的智能程度、续航时间和拓展能力，优化管理机制，为实现大规模监控带来了契机，对本领域技术人员来说是至关重要的。发明内容本发明的发明目的是提供离散无线传感专网智能气体检测系统，构建了离散无线传感专网气体监测模块与其他网络技术和不同管理平台接驳的技术路线，提供了离散无线传感专网之多网关协同技术，新的智能气体监控数据流传递机制和新的管理手段。为达到上述发明目的，本发明采用的技术方案是：离散无线传感专网智能气体检测系统，用于规模化智能气体检测，包括离散无线传感专网和管理平台，所述离散无线传感专网包括网关和若干离散子网，所述离散子网包括边缘路由、若干个路由器、若干个联络器和若干个气体探测器，所述气体探测器、路由器和边缘路由之间通信连接；所述联络器和边缘路由之间设有子网内通道，所述联络器通过子网内通道将传统网络与离散无线传感专网进行数据传输；所述离散无线传感专网和离散子网采用多网关协同技术；所述路由器包括数据平面、准数据平面和应用程序控制平面，当路由器的数据平面收到报文时，将其送往准数据平面，准数据平面根据报文的目标终点将其送入应用层界面进行进一步处理，或立即执行分类、标记和区别处理程序，然后将报文送入数据平面发送；所述联络器包括MCU、传感网模块、网络模块、Memory、LCD、LED、JTAG和Power管理；所述传感网模块通过SPI界面与MCU交流，所述网络模块通过Uart界面与MCU交流，所述Memory、LCD、LED、JTAG和Power管理均通过GPIO与MCU连接；所述MCU统一管理、协调联络器的功能，同时在数据传递过程中扮演传感网模块和网络模块之间的桥梁；每个气体探测器拥有一个属于自己的群落标识，将气体探测器根据其立足的视野或某一视野下的共同特性将气体探测器分为若干群落集合，同一群落集合内的群落标识相同，所述群落集合包括气体群落、网络群落、管控群落、区域群落、守望群落，所述守望群落具有守望群落唤醒机制。上文中，所述报文也可以为数据包。优选地，若干个所述离散子网分布在不同区域或相同区域的不同位置，所述离散无线传感专网内采用非透明传输，离散子网之间通过桥梁网络建立的虚拟通道进行数据传输。优选地，所述数据平面包括数据层和物理层，所述数据平面为快通道，用于实时接收和输出送往其他节点的数据包，包括接收和输出其他节点的用户数据；所述准数据平面包括准数据层和网络层，所述准数据平面为准快通道；所述应用程序控制平面包括应用层界面，所述应用程序控制平面为慢通道，用于处理消化控制数据和终止于本节点的用户数据包；所述节点是一个连接点，表示一个再分发点或一个通信端点，包括边缘路由、路由器、气体探测器。现有技术中，常规路由器内部架构包括控制平面和数据平面；就数据流处理程序而言，前者也称慢通道，负责处理消化控制数据和终止于本机的用户数据包；后者也称快通道，实时输出送往其他节点的数据包，尤其是源自其他节点的用户数据；常规传感网也如此。快通道的传输过程高度依赖路由器的硬件结构,而传感路由器因资源局限，其快通道只能提供一刀切的数据包处理方式，当路由器接收到报文，缓冲区数据溢出时，重要报文可能淹没于普通数据中丢失，或在数据包发生碰撞时丢失，无法进行数据包的分类标记工作,或区别处理接收到的报文；为了在数据包传输过程中实现气体监测报文的分类，标记和区别处理功能，本申请引入了准数据平面的机制，所述准数据平面承担了由传统传感网中数据平面完成的传输工作，准数据层的传输工作由高层软件实施，可顺利实现报文的分类、标记、区别处理工作，但其代价是传输速率改变，但气体监测过程中，由于其项目特性，可以容忍由准数据平面带来的速度变化。优选地，当准快通道接收到快通道输入的报文时，首先判断报文的目标终点；若报文目标终点为非本节点时，立即执行分类、标记和区别处理程序，然后酌情注入快通道加以发送；若报文目标终点为本节点时，报文转送应用程序控制平面进一步处理；同时，本节点应用程序控制平面产生的报文可随时注入数据平面进入发送程序；所述执行分类、标记和区别处理程序包括根据报文的性质，按序接收或抛弃快通道传输的报文。优选地，所述准快通道根据报文性质按序接收或抛弃气体探测器发送的数据包的方法包括以下步骤：S01、设置数据缓冲区，根据报文性质在数据缓冲区内设置若干个队列，队列可头尾双向操作，队列包括高报队列、中报队列、低报队列、普通队列和管理队列；S02、在每个节点发送数据包前，按报文性质进行分类并标记报文；S03、准数据平面接收到数据包后，将报文按类别送入缓冲区中相应的队列；S04、报文发送时，按照高报队列、中报队列、低报队列、普通队列和管理队列的顺序发送，队列中的报文遵循先进先出，时间优先原则发射；S05、当缓冲区溢出，需要丢弃数据包，按照普通队列、管理队列、低报队列、中报队列、高报队列的顺序丢弃，队列中的报文遵循后进先出原则丢弃。优选地，队列的头部按先进先出发送，队列的尾部按后进先出丢弃。优选地，根据实际运用中遇到的情况，数据包类型定义如下：高报数据包：报告高度或严重气体泄漏的报文，简称高报报文；中报数据包：报告中度或较严重气体泄漏的报文，简称中报报文；低报数据包：报告低浓度或较轻气体泄漏的报文，简称低报报文；普通数据包：报告正常或无气体泄漏的报文，简称普通报文；管理数据包：网络管控或控制平面报文，简称管理报文。上文中，气体泄漏的程度根据泄漏气体的种类及对应的泄漏值进行分级，各个气体泄漏的程度分别设置泄漏阈值。优选地，高报队列，高报报文入列；中报队列，中报报文入列；低报队列，低报报文入列；普通队列，普通报文入列；管理队列，管理报文入列；发送时，从上到下按照高报报文、中报报文、低报报文、普通报文和管理报文依序发送，然后每个队列中的报文按照最先到达的优先发送。优选地，报文的丢弃按照普通报文、管理报文、低报报文、中报报文和高报报文的顺序发送，然后每个队列中的报文按照最晚到达的优先发送；由于管理报文的特殊性，需要丢弃时，需要晚于普通报文。目前市场上的自组网系统中，基本采取单一网关技术，一旦网关失能，整个自组网瘫痪，因而系统脆弱，可靠性低下。本申请所采用的网关包括主网关和备用网关，所述主网关向管理平台递送数据包；当管理中心发现传输失败后，触发启动备用网关，接手主网关功能。优选地，所述网关的数据传输方法包括：S11、执行主网关和备用网关设置工作：管理平台必须确立主网关和备用网关，然后通知被授权的主网关和备用网关，两者接收命令后，分别于所在离散无线传感专网广播自己的网络地址，该网每个气体探测器和路由器将关于主网关和备用网关的地址加入路由表，使主网关就位，将主网关作为工作网关，备用网关进入备用状态；离散无线传感专网正式进入工作状态；S12、管理平台启动主网关和计时器并按时更新，开始接收监控报文。上文中，步骤S12中，如果管理平台在某一时段，计时期满后，没有从主网关接收到任何报文，意味着主网关失能，管理平台遂启动备用网关流程。优选地，启动所述备用网关的步骤包括：S21、所述管理平台首先通过备用网关向离散无线传感专网广播启用备用网关的命令；S22、所有气体探测器接到命令后，立即切换主网关和备用网关，将备用网关转换成工作网关，将主网关转换成备用网关；S23、离散无线传感专网恢复正常工作状态，所有报文通过备用网关传递给管理平台。优选地，在离散子网中，所述边缘路由包括主边缘路由和备用边缘路由；所述边缘路由的传输方法包括：S31、执行主边缘路由和备用边缘路由设置工作：管理平台必须确立主边缘路由和备用边缘路由，然后通知被授权的主边缘路由和备用边缘路由，两者接收命令后，分别于所在离散子网广播自己的网络地址，该网每个气体探测器和路由器将关于主边缘路由和备用边缘路由的地址加入路由表，使主边缘路由就位，将主边缘路由作为工作网关，备用边缘路由进入备用状态；离散无线传感专网正式进入工作状态；S32、管理平台启动主边缘路由和计时器并按时更新，开始接收监控报文。上文中，步骤S32中，如果管理平台在某一时段，计时期满后，没有从主边缘路由接收到任何报文，意味着主边缘路由失能，管理平台遂启动备用边缘路由流程。优选地，启动所述备用边缘路由的步骤包括：S41、所述管理平台首先通过备用边缘路由向离散子网广播启用备用边缘路由的命令；S42、所有气体探测器接到命令后，立即切换主边缘路由和备用边缘路由，将备用边缘路由转换成工作网关，将主边缘路由转换成备用边缘路由；S43、离散子网恢复正常工作状态，所有报文通过备用边缘路由传递给管理平台。本申请以离散无线传感专网为骨干网，通过联络器与其他网络技术进行接驳，所述其他网络技术包括常规以太网、WIFI、移动技术、传统工业网络技术，数据传输过程中采用非透明传输；在管理平台，通过OPC与传统DCS系统或其他用户系统接驳；在离散无线传感专网的网关或离散子网的边缘路由出口，可接驳Ethernet、WIFI、移动4G/5G，数据传输过程中采用透明传输。上文中，为了与以太网、WIFI等网络技术接驳,本发明设置联络器，该设备是一个特殊路由，其具有原离散传感网路由的功能,同时拥有以太网、WIFI硬件模块和软件界面；当联络器接收到来自以太网、WIFI的数据,能有效解析，形成新的报文，并注入离散无线传感专网或离散子网。优选地，所述子网内通道位于离散子网内部，作为联络器与边缘路由之间的数据传输通道，所述联络器从不同的传统网络接收数据包，注入离散子网内通道；所述联络器从子网内通道接收来自边缘路由的数据包，传送到不同的传统网络。优选地，所述联络器的数据传输方法包括：当联络器中的网络模块接收到来自传统网络的无线数据包，且无线数据包的到达目标地址必须经由离散无线传感网时，将无线数据包送往联络器的MCU处理，MCU将其注入传感网模块，该模块于是启动无线发射，将数据送入子网内通道，数据包经子网内通道输入边缘路由；当联络器的传感网模块从子网内通道接收到来自边缘路由的数据包，且数据包的到达目标地址必须经由Ethernet，WIFI或4G/5G网络时，传感网模块将数据包传递给MCU，MUC将数据包转送给相应网络模块，然后通过有线/无线网络，输出数据包。优选地，MCU将无线数据包注入传感网模块的过程依据内部可靠传输协议，传感网模块将数据包传递给MCU的过程依据内部可靠传输协议。优选地，所述气体探测器同时具有4-20mA，Modbus RS485接口，以此与传统工业网络接驳。气体探测器的有线网络传输功能与无线传输功能相互独立，两者互不干扰，分属不同模块，接驳不同的管理平台；两套系统同时存在，相互冗余，极大增强了系统的可靠性。在管理平台，本发明通过OPC与传统DCS系统或其他用户系统接驳。离散无线传感专网的网关数据流入IoT服务器，该服务器同时作为OPC服务器的客户端，通过OPC DA链接输送数据至OPC服务器。优选地，离散无线传感专网气体监测系统可监测数百种甚至更多气体，其中牵涉多种网络技术，具体包括以太网，WIFI，4G/5G，Lora，Modbus，4-20mA。气体探测器可部署在不同物理区域，但逻辑上安装于相同和不同物理区域的气体探测器可归并于同一管控区域或不同管控区域，允许空间交错。优选地，所述气体群落为探测相同目标气体或气体类型的气体探测器集合；每个目标气体拥有一个气体类型ID；所述网络群落为支持相同网络技术的气体探测器或设备集合，每种网络技术拥有一个网络ID；所述管控群落为管理分组属于同一组别的气体探测器集合，每个小组拥有一个管控ID；所述区域群落为部署于特定物理区域的气体探测器集合，每个区域拥有一个区域ID；所述守望群落为探测相同目标气体且安装于同一个物理区域的相邻气体探测器集合，每个守望群落拥有一个守望ID。优选地，以一个气体探测器集合为例，该气体探测器集合中的设备分别监测的目标气体包括NH3、CO、HCN、H2S；支持网络群落中的网络技术包括WIFI、离散传感网、以太网和移动网络；分属的物理区域群落包括A1、A2、A3和A4；分属的管控群落包括M1、M2、M3和M4。对气体探测器集合中每个气体探测器分属的群落集合制作表格。上文中，所述管理平台记录并维护上述表格，围绕不同群落的管理工作作为抓手有序展开。所述群落集合的配置方法包括：管理平台通过网关向所有气体探测器和相关设备发布群落标识和群落多播地址，气体探测器据此绑定相应群落标识和群落多播地址并广告多播地址，气体探测器接收群落多播地址后，更新路由表，使多播地址就位。现有技术中，一般来说，增加气体探测器的睡眠时长，将延长电池续航时间，同时也增加气体泄漏时漏报的风险。就是说，延长气体探测器电池待机时间和及时提供气体泄漏报警的初衷冲突。然而，工业防爆现场无法频繁开启仪表，更换电池。基于电池供电的物联网无线气体探测器，如何在提供实时探测功能的前提下挖掘潜力，最大程度延长续航时间，是该领域面临的挑战之一。本发明利用智能技术，利用守望群落集合，提供新的机制，通过群落内部独立仪表之间的对话支撑续航时间，在进一步提高气体探测器续航时间的同时，最小程度影响气体泄漏报警的实时性，是一个新的尝试。在群落框架下，更多智能技术和新功能有待发掘。优选地，所述守望群落唤醒机制的具体步骤包括：S51、当其中一个气体探测器收集环境样本后发现气体浓度异常，并确认其是否存在异常，若确认存在异常则跳转至步骤S52，若确认不存在异常则跳转值步骤S56；S52、立即提高监测频度，并启动守望群落唤醒机制；S53、该气体探测器以多播方式递送唤醒报文给守望群落中的其他气体探测器；S54、群落中的其他气体探测器被唤醒后立即调整频度加强监测；S55、确认是否存在异常，若确认存在异常则重复步骤S52-S54直至确认环境正常，若确认不存在异常则跳转值步骤S56；S56、系统回归正常状态。优选地，当步骤S51或步骤S54中气体探测器检测气体浓度超过阈值时，即刻发送报文向管理平台报警。由于上述技术方案运用，本发明与现有技术相比具有下列优点：1.本发明实现了离散无线传感专网、其他网络技术和不同管理平台接驳，设计了新的智能气体监控数据流传递机制和新的管理手段，其可将现场探测收集到的气体浓度转换成数字信号，传送到位于安全区的监控中心，以达到监测有毒有害、易爆易燃气体泄漏的目的，显著提高了系统的可靠性，灵活性；提高了系统的传输能力、智能程度、续航时间和拓展能力；优化了管理机制；2.本发明在离散无线传感专网和离散子网中，通过采用非透明传输的准数据平面，对离散无线传感专网和离散子网中，流动的气体监测报文进行分类并标记；在传输过程中，当面临资源竞争时，允许路由器根据报文性质，进行一定程度的干预，从而区别对待接收到的报文；避免现有技术中简单化无差别的处理方式对重要报文造成的影响；3.本发明通过联络器和子网内通道实现离散无线传感专网与传统网络技术接驳，联络器将源自不同传统网络的数据进行解析并通过子网内通道注入离散无线传感专网，将离散无线传感专网中的数据通过子网内通道输送至不同的传统网络中；4.本发明通过引入群落集合，对气体探测器根据视野和特性进行分类，方便管理平台管理，解决了现有技术中各种元素纵横交错无法有序管理的技术问题；通过守望群落，提供新的机制，在进一步提高气体探测器续航时间的同时，最小程度影响气体泄漏报警的实时性，解决了现有技术中气体探测器的睡眠时间和电池续航时间增长与气体泄漏时报警实时性无法同时实现的技术缺陷；5.本发明能够通过提供离散无线传感专网之多网关协同技术，当管理中心发现传输失败后，触发启动备用网关，接手主网关，使系统得以正常工作；6.本发明所采用的的系统和数据传输方法简单易行，成本较低，适于推广应用。附图说明图1是实施例一中常规传感网中路由器的报文传递示意图；图2是实施例一中离散传感专网中路由器的报文传递示意图；图3是实施例一中离散无线传感专网气体监测系统报文发射顺序示意图；图4是实施例一中离散无线传感专网气体监测系统报文丢弃顺序示意图；图5是实施例一中离散无线传感专网气体监测系统之多网关协同技术示意图；图6是实施例一中离散无线传感专网气体监测系统备用网关设置/启用流程图；图7是实施例一中离散无线传感专网气体监测系统一种扩展性示意图；图8是实施例一中联络器内部硬件结构示意图；图9是实施例一中联络器内部数据传输示意图；图10是实施例一中离散无线传感专网气体监测系统另一种扩展性示意图；图11是实施例一中离散无线传感专网气体监测系统群落管理示意图；图12是实施例一中离散无线传感专网气体监测系统群落设置流程图；图13是实施例一中离散无线传感专网气体监测系统守望群落唤醒示意图；图14是实施例一中离散无线传感专网气体监测系统守望群落启用流程示意图；图15是实施例二中智能离散传感专网气体监测系统的结构示意图。具体实施方式下面结合附图及实施例对本发明作进一步描述：实施例一本实施例涉及离散无线传感专网智能气体检测系统，用于规模化智能气体检测，包括离散无线传感专网和管理平台，所述离散无线传感专网包括网关和若干离散子网，所述离散子网包括边缘路由、若干个路由器、若干个联络器和若干个气体探测器，所述气体探测器、路由器和边缘路由之间通信连接；所述联络器和边缘路由之间设有子网内通道，所述联络器通过子网内通道将传统网络与离散无线传感专网进行数据传输；所述离散无线传感专网和离散子网采用多网关协同技术。上文中，当离散无线传感专网运用于气体检测领域时，称为智能离散气体监测传感专网；当离散子网运用于气体检测领域时，称为智能离散气体监测传感子网。如图1所示，现有技术中，常规路由器内部架构包括控制平面和数据平面；就数据流处理程序而言，前者也称慢通道，负责处理消化控制数据和终止于本机的用户数据包；后者也称快通道，实时输出送往其他节点的数据包，尤其是源自其他节点的用户数据；常规传感网也如此。快通道的传输过程高度依赖路由器的硬件结构,而传感路由器因资源局限，其快通道只能提供一刀切的数据包处理方式，当路由器接收到报文，缓冲区数据溢出时，重要报文可能淹没于普通数据中丢失，或在数据包发生碰撞时丢失，无法进行数据包的分类标记工作,或区别处理接收到的报文；为了在数据包传输过程中实现气体监测报文的分类，标记和区别处理功能，本申请引入了准数据平面的机制，所述准数据平面承担了由传统传感网中数据平面完成的传输工作，准数据层的传输工作由高层软件实施，可顺利实现报文的分类、标记、区别处理工作，但其代价是传输速率改变，但气体监测过程中，由于其项目特性，可以容忍由准数据平面带来的速度变化。如图2所示，本申请所述路由器包括数据平面、准数据平面和应用程序控制平面，当路由器的数据平面收到报文时，将其送往准数据平面，准数据平面根据报文的目标终点将其送入应用层界面进行进一步处理，或立即执行分类、标记和区别处理程序，然后将报文送入数据平面发送。上文中，所述报文也可以为数据包。优选地，所述数据平面包括数据层和物理层，所述数据平面为快通道，用于实时接收和输出送往其他节点的数据包，包括接收和输出其他节点的用户数据；所述准数据平面包括准数据层和网络层，所述准数据平面为准快通道；所述应用程序控制平面包括应用层界面，所述应用程序控制平面为慢通道，用于处理消化控制数据和终止于本节点的用户数据包；所述节点是一个连接点，表示一个再分发点或一个通信端点，包括边缘路由、路由器、气体探测器。优选地，当准快通道接收到快通道输入的报文时，首先判断报文的目标终点；若报文目标终点为非本节点时，立即执行分类、标记和区别处理程序，然后酌情注入快通道加以发送；若报文目标终点为本节点时，报文转送应用程序控制平面进一步处理；同时，本节点应用程序控制平面产生的报文可随时注入数据平面进入发送程序；所述执行分类、标记和区别处理程序包括根据报文的性质，按序接收或抛弃快通道传输的报文。如图3和图4所示，所述准快通道根据报文性质按序接收或抛弃气体探测器发送的数据包的方法包括以下步骤：S01、设置数据缓冲区，根据报文性质在数据缓冲区内设置若干个队列，队列可头尾双向操作，队列包括高报队列、中报队列、低报队列、普通队列和管理队列；S02、在每个节点发送数据包前，按报文性质进行分类并标记报文；S03、准数据平面接收到数据包后，将报文按类别送入缓冲区中相应的队列；S04、报文发送时，按照高报队列、中报队列、低报队列、普通队列和管理队列的顺序发送，队列中的报文遵循先进先出，时间优先原则发射；S05、当缓冲区溢出，需要丢弃数据包，按照普通队列、管理队列、低报队列、中报队列、高报队列的顺序丢弃，队列中的报文遵循后进先出原则丢弃。优选地，队列的头部按先进先出发送，队列的尾部按后进先出丢弃。优选地，根据实际运用中遇到的情况，数据包类型定义如下：高报数据包：报告高度或严重气体泄漏的报文，简称高报报文；中报数据包：报告中度或较严重气体泄漏的报文，简称中报报文；低报数据包：报告低浓度或较轻气体泄漏的报文，简称低报报文；普通数据包：报告正常或无气体泄漏的报文，简称普通报文；管理数据包：网络管控或控制平面报文，简称管理报文。优选地，高报队列，高报报文入列；中报队列，中报报文入列；低报队列，低报报文入列；普通队列，普通报文入列；管理队列，管理报文入列；发送时，从上到下按照高报报文、中报报文、低报报文、普通报文和管理报文依序发送，然后每个队列中的报文按照最先到达的优先发送。优选地，报文的丢弃按照普通报文、管理报文、低报报文、中报报文和高报报文的顺序发送，然后每个队列中的报文按照最晚到达的优先发送；由于管理报文的特殊性，需要丢弃时，需要晚于普通报文。目前市场上的自组网系统中，基本采取单一网关技术，一旦网关失能，整个自组网瘫痪，因而系统脆弱，可靠性低下。如图5所示，本实施例所采用的网关包括主网关和备用网关，所述主网关向管理平台递送数据包；当管理中心发现传输失败后，触发启动备用网关，接手主网关功能。如图6所示，所述网关的数据传输方法包括：S11、执行主网关和备用网关设置工作：管理平台必须确立主网关和备用网关，然后通知被授权的主网关和备用网关，两者接收命令后，分别于所在离散无线传感专网广播自己的网络地址，该网每个气体探测器和路由器将关于主网关和备用网关的地址加入路由表，使主网关就位，将主网关作为工作网关，备用网关进入备用状态；离散无线传感专网正式进入工作状态；S12、管理平台启动主网关和计时器并按时更新，开始接收监控报文。上文中，步骤S12中，如果管理平台在某一时段，计时期满后，没有从主网关接收到任何报文，意味着主网关失能，管理平台遂启动备用网关流程。优选地，启动所述备用网关的步骤包括：S21、所述管理平台首先通过备用网关向离散无线传感专网广播启用备用网关的命令；S22、所有气体探测器接到命令后，立即切换主网关和备用网关，将备用网关转换成工作网关，将主网关转换成备用网关；S23、离散无线传感专网恢复正常工作状态，所有报文通过备用网关传递给管理平台。优选地，在离散子网中，所述边缘路由包括主边缘路由和备用边缘路由；所述边缘路由的传输方法包括：S31、执行主边缘路由和备用边缘路由设置工作：管理平台必须确立主边缘路由和备用边缘路由，然后通知被授权的主边缘路由和备用边缘路由，两者接收命令后，分别于所在离散子网广播自己的网络地址，该网每个气体探测器和路由器将关于主边缘路由和备用边缘路由的地址加入路由表，使主边缘路由就位，将主边缘路由作为工作网关，备用边缘路由进入备用状态；离散无线传感专网正式进入工作状态；S32、管理平台启动主边缘路由和计时器并按时更新，开始接收监控报文。上文中，步骤S32中，如果管理平台在某一时段，计时期满后，没有从主边缘路由接收到任何报文，意味着主边缘路由失能，管理平台遂启动备用边缘路由流程。优选地，启动所述备用边缘路由的步骤包括：S41、所述管理平台首先通过备用边缘路由向离散子网广播启用备用边缘路由的命令；S42、所有气体探测器接到命令后，立即切换主边缘路由和备用边缘路由，将备用边缘路由转换成工作网关，将主边缘路由转换成备用边缘路由；S43、离散子网恢复正常工作状态，所有报文通过备用边缘路由传递给管理平台。如图7所示，本申请以离散无线传感专网为骨干网，通过联络器与其他网络技术进行接驳，所述其他网络技术包括常规以太网、WIFI、移动技术、传统工业网络技术，数据传输过程中采用非透明传输；如图10所示，在管理平台，通过OPC与传统DCS系统或其他用户系统接驳；在离散无线传感专网的网关或离散子网的边缘路由出口，可接驳Ethernet、WIFI、移动4G/5G，数据传输过程中采用透明传输。优选地，若干个所述离散子网分布在不同区域或相同区域的不同位置，所述离散无线传感专网内采用非透明传输，离散子网之间通过桥梁网络建立的虚拟通道进行数据传输。上文中，为了与以太网、WIFI等网络技术接驳,本发明设置联络器，该设备是一个特殊路由，其具有原离散传感网路由的功能,同时拥有以太网、WIFI硬件模块和软件界面；当联络器接收到来自以太网、WIFI的数据,能有效解析，形成新的报文，并注入离散无线传感专网或离散子网。优选地，所述子网内通道位于离散子网内部，作为联络器与边缘路由之间的数据传输通道，所述联络器从不同的传统网络接收数据包，注入离散子网内通道；所述联络器从子网内通道接收来自边缘路由的数据包，传送到不同的传统网络。如图8所示，所述联络器包括MCU、传感网模块、网络模块、Memory、LCD、LED、JTAG和Power管理；所述传感网模块通过SPI界面与MCU交流，所述网络模块通过Uart界面与MCU交流，所述Memory、LCD、LED、JTAG和Power管理均通过GPIO与MCU连接；所述MCU统一管理、协调联络器的功能，同时在数据传递过程中扮演传感网模块和网络模块之间的桥梁。如图9所示，所述联络器的数据传输方法包括：当联络器中的网络模块接收到来自传统网络的无线数据包，且无线数据包的到达目标地址必须经由离散无线传感网时，将无线数据包送往联络器的MCU处理，MCU将其注入传感网模块，该模块于是启动无线发射，将数据送入子网内通道，数据包经子网内通道输入边缘路由；当联络器的传感网模块从子网内通道接收到来自边缘路由的数据包，且数据包的到达目标地址必须经由Ethernet，WIFI或4G/5G网络时，传感网模块将数据包传递给MCU，MUC将数据包转送给相应网络模块，然后通过有线/无线网络，输出数据包。优选地，MCU将无线数据包注入传感网模块的过程依据内部可靠传输协议，传感网模块将数据包传递给MCU的过程依据内部可靠传输协议。如图10所示，所述气体探测器同时具有4-20mA，Modbus RS485接口，以此与传统工业网络接驳。气体探测器的有线网络传输功能与无线传输功能相互独立，两者互不干扰，分属不同模块，接驳不同的管理平台；两套系统同时存在，相互冗余，极大增强了系统的可靠性。在管理平台，本发明通过OPC与传统DCS系统或其他用户系统接驳。离散无线传感专网的网关数据流入IoT服务器，该服务器同时作为OPC服务器的客户端，通过OPC DA链接输送数据至OPC服务器。优选地，离散无线传感专网气体监测系统可监测数百种甚至更多气体，其中牵涉多种网络技术，具体包括以太网，WIFI，4G/5G，Lora，Modbus，4-20mA。气体探测器可部署在不同物理区域，但逻辑上安装于相同和不同物理区域的气体探测器可归并于同一管控区域或不同管控区域，允许空间交错。如图11所示，每个气体探测器拥有一个属于自己的群落标识，将气体探测器根据其立足的视野或某一视野下的共同特性将气体探测器分为若干群落集合，同一群落集合内的群落标识相同，所述群落集合包括气体群落、网络群落、管控群落、区域群落、守望群落，所述守望群落具有守望群落唤醒机制。优选地，所述气体群落为探测相同目标气体或气体类型的气体探测器集合；每个目标气体拥有一个气体类型ID；所述网络群落为支持相同网络技术的气体探测器或设备集合，每种网络技术拥有一个网络ID；所述管控群落为管理分组属于同一组别的气体探测器集合，每个小组拥有一个管控ID；所述区域群落为部署于特定物理区域的气体探测器集合，每个区域拥有一个区域ID；所述守望群落为探测相同目标气体且安装于同一个物理区域的相邻气体探测器集合，每个守望群落拥有一个守望ID。优选地，以一个气体探测器集合为例，该气体探测器集合中的设备分别监测的目标气体包括NH3、CO、HCN、H2S；支持网络群落中的网络技术包括WIFI、离散传感网、以太网和移动网络；分属的物理区域群落包括A1、A2、A3和A4；分属的管控群落包括M1、M2、M3和M4。下表罗列了上述气体探测器集合中，每个气体探测器分属的群落集合。探测器编号气体群落网络群落区域群落管控群落守望群落1NH3WIFIA1M1W32NH3WIFIA1M1W33C0离散A2M1N/A4NH3WIFIA1M2W35HCN以太A2M2N/A6C0以太A2M1N/A7C0移动A2M1N/A8HCN离散A3M2W29HCN离散A3M3W210H2S离散A4M3W111HCN离散A3M4W212H2S离散A4M4W113H2S离散A4M4W1如图12所示，所述管理平台记录并维护上述表格，围绕不同群落的管理工作作为抓手有序展开。所述群落集合的配置方法包括：管理平台通过网关向所有气体探测器和相关设备发布群落标识和群落多播地址，气体探测器据此绑定相应群落标识和群落多播地址并广告多播地址，气体探测器接收群落多播地址后，更新路由表，使多播地址就位。现有技术中，一般来说，增加气体探测器的睡眠时长，将延长电池续航时间，同时也增加气体泄漏时漏报的风险。就是说，延长气体探测器电池待机时间和及时提供气体泄漏报警的初衷冲突。然而，工业防爆现场无法频繁开启仪表，更换电池。基于电池供电的物联网无线气体探测器，如何在提供实时探测功能的前提下挖掘潜力，最大程度延长续航时间，是该领域面临的挑战之一。本发明利用智能技术，利用守望群落集合，提供新的机制，通过群落内部独立仪表之间的对话支撑续航时间，在进一步提高气体探测器续航时间的同时，最小程度影响气体泄漏报警的实时性，是一个新的尝试。在群落框架下，更多智能技术和新功能有待发掘。如图13所示，本实施例中，气体探测器CO-1、CO-2和CO-3监测相同目标气体一氧化碳，乃部署于同一个物理区域的相邻气体探测器集合，所以可配置成守望群落。假设气体探测器CO-1和CO-3在之前监测采样过程中，没有发现泄漏情况，为了延长续航时间，进入睡眠周期。当气体探测器CO-2采样后发现CO浓度升高，为了及时监测和捕捉该区域气体泄漏情况，遂触发守望群落唤醒机制，以多播方式传递唤醒报文给附近守望群落中的其他气体探测器，以加强监测频度，确保及时发现和报告该区域的气体泄漏情。如图14所示，所述守望群落唤醒机制的具体步骤包括：S51、当其中一个气体探测器收集环境样本后发现气体浓度异常，并确认其是否存在异常，若确认存在异常则跳转至步骤S52，若确认不存在异常则跳转值步骤S56；S52、立即提高监测频度，并启动守望群落唤醒机制；S53、该气体探测器以多播方式递送唤醒报文给守望群落中的其他气体探测器；S54、群落中的其他气体探测器被唤醒后立即调整频度加强监测；S55、确认是否存在异常，若确认存在异常则重复步骤S52-S54直至确认环境正常，若确认不存在异常则跳转值步骤S56；S56、系统回归正常状态。优选地，当步骤S51或步骤S54中气体探测器检测气体浓度超过阈值时，即刻发送报文向管理平台报警。实施例二本实施例是在上述实施例一的基础上进行的，与上述实施例相同之处不予赘述。如图15所示，本实施例涉及一种智能离散传感专网气体监测系统，部署在防爆监控现场，离散无线传感专网由一系列气体探测器和若干路由器所组成；其中气体探测器包括硫化氢探测器、一氧化碳探测器和氰化氢探测器。这里，硫化氢探测器H2S-1，H2S-2，H2S-3，H2S-4和H2S-5探测相同目标气体硫化氢且部署于同一物理区域，位置相邻。根据本发明提供的机制，这些探测器可配置成守望群落。假设探测器H2S-3采样后发现H2S浓度升高，达到事先设定的守望阈值，可触发守望群落唤醒机制，以多播方式传递唤醒报文给群落中的其他探测器，以加强监测频度，确保及时发现和捕捉该区域发生的潜在气体泄漏情况。本实施例采用网关协同技术，本实施例中网关A和网关B互为备份网关，一旦对方失能，在管理平台协调下，接管对方的工作。网关A和网关B同时部署在监控现场附近的防爆工作室中，通过工作室的网络端口，所有监控数据经由常规网络，进入物联网服务器。该服务器里运行的管理平台直接支持IoT客户端，同时通过OPC链接与OPC服务器共享监控数据，OPC服务器用来支持OPC客户端。本实施例利用本发明提供的报文分类传输技术，采用非透明传输，最大程度保证了重要报文传输的可靠性和及时性。传输过程中，当面临资源竞争时，首先丢弃普通报文，确保重要报文安全到达目的地。本实施例中网关A和网关B相互备份，避免了单一网关失能的风险；守望群落中的探测器相互协作，极大提高了对有毒气体的监控强度。在管理中心，通过OPC链接IoT服务器和OPC服务器，使监控数据在服务IoT客户端的同时，照顾传统监控平台，服务传统工业客户端。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本发明。对上述实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本发明的精神或范围的情况下，在其它实施例中实现。因此，本发明将不会被限制于本文所示的上述实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
