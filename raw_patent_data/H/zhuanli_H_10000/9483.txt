标题title
基于物联网的服务通信方法、装置、设备及介质
摘要abst
本申请公开了一种基于物联网的服务通信方法、装置、设备及介质，该方法运用于物联网领域。该方法应用于云端服务器，该方法包括：接收物联网客户端发送的边缘端服务器的名称；通过与所述边缘端服务器的名称对应的长连接，向所述边缘端服务器发送请求消息；所述请求消息用于向所述边缘端服务器请求目标服务，所述长连接是用于连接所述云端服务器和所述边缘端服务器的连接；解析由所述边缘端服务器返回的处理结果，获得响应内容；将所述响应内容发送给所述物联网客户端。该方法不需要云端服务器获取边缘端服务器的地址和端口就可以访问目标内容，通信效率较高。
权利要求书clms
1.一种基于物联网的服务通信方法，其特征在于，应用于云端服务器，所述方法包括：接收用户客户端发送的边缘端服务器的名称；通过与所述边缘端服务器的名称对应的长连接，向所述边缘端服务器发送请求消息；所述请求消息用于向所述边缘端服务器请求目标服务，所述长连接是用于连接所述云端服务器和所述边缘端服务器的连接；解析由所述边缘端服务器返回的处理结果，获得响应内容；将所述响应内容发送给所述物联网客户端。2.根据权利要求1所述的方法，其特征在于，所述接收物联网客户端发送的边缘端服务器的名称，包括：接收所述物联网客户端发送的服务请求；根据所述服务请求确定所述物联网客户端的类型；在所述物联网客户端是本地物联网客户端的情况下，从所述服务请求中提取服务名称；根据所述服务名称确定所述边缘端服务器的名称；在所述物联网客户端是所述云端服务器上的云端物联网客户端的情况下，从所述服务请求中提取所述边缘端服务器的名称。3.根据权利要求2所述的方法，其特征在于，所述根据所述服务名称确定所述边缘端服务器的名称，包括：基于第一对应关系，确定与所述服务名称和所述第一对应关系对应的所述边缘端服务器的名称，所述第一对应关系包括所述服务名称和所述边缘端服务器的名称之间的对应关系。4.根据权利要求2所述的方法，其特征在于，所述方法还包括：从所述服务请求中提取所述服务名称；从至少两个候选请求内容中，确定与所述边缘端服务器的名称和所述服务名称对应的目标请求内容；封装所述边缘端服务器的名称、所述服务名称和所述目标请求内容，生成所述请求消息；其中，所述边缘端服务器根据所述目标请求内容生成所述响应内容。5.根据权利要求1至4任一所述的方法，其特征在于，所述方法还包括：在所述边缘端服务器通过所述云端服务器的地址连接到所述云端服务器的情况下，记录所述边缘端服务器对应的所述长连接；部署所述目标服务到所述边缘端服务器；定义并记录所述边缘端服务器对应的服务路径，所述服务路径包括所述边缘端服务器的名称和所述服务名称。6.一种基于物联网的服务通信方法，其特征在于，应用于边缘端服务器，所述方法包括：响应于通过与所述边缘端服务器的名称对应的长连接接收到云端服务器发送的请求消息，解析所述请求消息，得到服务名称和目标请求内容，所述长连接用于连接所述云端服务器和边缘端服务器；在至少两个所述候选服务端中，确定与所述服务名称对应的目标服务；通过所述目标服务根据所述目标请求内容生成响应内容；通过所述目标服务封装所述响应内容，生成处理结果；通过长连接将所述处理结果发送给所述云端服务器。7.一种基于物联网的服务通信装置，其特征在于，所述装置包括云端服务器，所述装置包括：第一接收模块，用于接收物联网客户端发送的边缘端服务器的名称；第一发送模块，用于通过与所述边缘端服务器的名称对应的长连接，向所述边缘端服务器发送请求消息；所述请求消息用于向所述边缘端服务器请求目标服务，所述长连接是用于连接所述云端服务器和所述边缘端服务器的连接；解析模块，用于解析由所述边缘端服务器返回的处理结果，获得响应内容；所述第一发送模块，还用于将所述响应内容发送给所述物联网客户端。8.一种基于物联网的服务通信装置，其特征在于，所述装置包括边缘端服务器，所述装置包括：第二接收模块，用于响应于通过与所述边缘端服务器的名称对应的长连接接收到云端服务器发送的请求消息，解析所述请求消息，得到服务名称和请求内容，所述长连接用于连接所述云端服务器和边缘端服务器；处理模块，用于在至少两个所述候选服务端中，确定与所述服务名称对应的目标服务；所述处理模块，用于通过所述目标服务根据所述请求内容生成响应内容；所述处理模块，还用于通过所述目标服务封装所述响应内容，生成处理结果；第二发送模块，用于通过长连接将所述处理结果发送给所述云端服务器。9.一种计算机设备，其特征在于，所述计算机设备包括：处理器和存储器，所述存储器中存储有至少一条指令、至少一段程序、代码集或指令集，所述至少一条指令、所述至少一段程序、所述代码集或指令集由所述处理器加载并执行以实现如权利要求1至5中任一项所述的基于物联网的服务通信方法，或，如权利要求6所述的基于物联网的服务通信方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质中存储有至少一条程序代码，所述程序代码由处理器加载并执行以实现如权利要求1至5中任一项所述的基于物联网的服务通信方法，或，如权利要求6所述的基于物联网的服务通信方法。
说明书desc
技术领域本申请涉及物联网领域，特别涉及一种基于物联网的服务通信方法、装置、设备及介质。背景技术云端服务器通过Internet对外提供服务。云端服务器一般拥有公网IP，云端服务器指集成有多种服务的平台，用户可以在云端服务器上获取需要的服务，边缘端服务器指靠近物或数据源头的终端上的客户端，边缘端服务器能够快速提取数据源头的数据并提供服务。相关技术中，云端服务器会向边缘端服务器发布一个服务，并指定该服务在边缘端服务器的端口和地址。当需要使用该服务时，边缘端服务器会向云端服务器报告边缘端服务器的地址。云端服务器通过边缘端服务器的地址和服务的端口地址访问该服务。但是边缘端服务器向云端服务器报告的地址可能是个局域网IP，导致云端服务器无法通过边缘端服务器的地址和端口访问相应服务。发明内容本申请实施例提供了一种基于物联网的服务通信方法、装置、设备及介质，该方法为云端服务器提供了访问边缘端服务器的长连接，使得云端服务器可以直接访问边缘端服务器。所述技术方案如下：根据本申请的一个方面，提供了一种基于物联网的服务通信方法，应用于云端服务器中，该方法包括：接收物联网客户端发送的边缘端服务器的名称；通过与所述边缘端服务器的名称对应的长连接，向所述边缘端服务器发送请求消息；所述请求消息用于向所述边缘端服务器请求目标服务，所述长连接是用于连接所述云端服务器和所述边缘端服务器的连接；解析由所述边缘端服务器返回的处理结果，获得响应内容；将所述响应内容发送给所述物联网客户端。根据本申请的一个方面，提供了一种基于物联网的服务通信装置，该装置包括云端服务器，该装置包括：第一接收模块，用于接收物联网客户端发送的边缘端服务器的名称；第一发送模块，用于通过与所述边缘端服务器的名称对应的长连接，向所述边缘端服务器发送请求消息；所述请求消息用于向所述边缘端服务器请求目标服务，所述长连接是用于连接所述云端服务器和所述边缘端服务器的连接；第一解析模块，用于解析由所述边缘端服务器返回的处理结果，获得响应内容；所述第一发送模块，还用于将所述响应内容发送给所述物联网客户端。在本申请的一个可选设计中，所述第一接收模块，还用于接收所述物联网客户端发送的服务请求。所述第一解析模块，还用于根据所述服务请求确定所述物联网客户端的类型；在所述物联网客户端是本地物联网客户端的情况下，从所述服务请求中提取服务名称；根据所述服务名称确定所述边缘端服务器的名称；在所述物联网客户端是所述云端服务器上的云端物联网客户端的情况下，从所述服务请求中提取所述边缘端服务器的名称。在本申请的一个可选设计中，所述第一解析模块，还用于基于第一对应关系，确定与所述服务名称和所述第一对应关系对应的所述边缘端服务器的名称，所述第一对应关系包括所述服务名称和所述边缘端服务器的名称之间的对应关系。在本申请的一个可选设计中，所述第一发送模块，还用于将所述边缘端服务器的名称与所述服务名称之间的第二对应关系发送给所述云端物联网客户端。在本申请的一个可选设计中，所述第一解析模块，还用于从所述服务请求中提取所述服务名称；从至少两个候选请求内容中，确定与所述边缘端服务器的名称和所述服务名称对应的目标请求内容；封装所述边缘端服务器的名称、所述服务名称和所述目标请求内容，生成所述请求消息；其中，所述边缘端服务器根据所述目标请求内容生成所述响应内容。在本申请的一个可选设计中，所述装置还包括第一注册模块；所述第一注册模块，用于在所述边缘端服务器通过所述云端服务器的地址连接到所述云端服务器的情况下，记录所述边缘端服务器对应的所述长连接；部署所述目标服务到所述边缘端服务器；定义并记录所述边缘端服务器对应的服务路径，所述服务路径包括所述边缘端服务器的名称和所述服务名称。根据本申请的一个方面，提供了一种基于物联网的服务通信方法，应用于边缘端服务器，该方法包括：响应于通过与所述边缘端服务器的名称对应的长连接接收到云端服务器发送的请求消息，解析所述请求消息，得到服务名称和目标请求内容，所述长连接用于连接所述云端服务器和边缘端服务器，；在至少两个所述候选服务端中，确定与所述服务名称对应的目标服务；通过所述目标服务根据所述目标请求内容生成响应内容；通过所述目标服务封装所述响应内容，生成处理结果；通过长连接将所述处理结果发送给所述云端服务器。根据本申请的一个方面，提供了一种基于物联网的服务通信装置，该装置包括边缘端服务器，该装置包括：第一接收模块，用于接收物联网客户端发送的边缘端服务器的名称；第一发送模块，用于通过与所述边缘端服务器的名称对应的长连接，向所述边缘端服务器发送请求消息；所述请求消息用于向所述边缘端服务器请求目标服务，所述长连接是用于连接所述云端服务器和所述边缘端服务器的连接；第二解析模块，用于解析由所述边缘端服务器返回的处理结果，获得响应内容；所述第一发送模块，还用于将所述响应内容发送给所述物联网客户端。在本申请的一个可选设计中，所述装置还包括第二注册模块。所述第二注册模块，用于通过所述云端服务器的地址连接到所述云端服务器；在所述云端服务器部署所述目标服务的情况下，记录所述目标服务和所述目标服务的服务名称。在本申请的一个可选设计中，所述第二解析模块，还用于在所述长连接中断的情况下，通过所述云端服务器的地址重新连接到所述云端服务器；和所述云端服务器再次建立所述长连接。根据本申请的另一方面，提供了一种计算机设备，该计算机设备包括：处理器和存储器，存储器中存储有至少一条指令、至少一段程序、代码集或指令集，至少一条指令、至少一段程序、代码集或指令集由处理器加载并执行以实现如上方面所述的基于物联网的服务通信方法。根据本申请的另一方面，提供了一种计算机存储介质，计算机可读存储介质中存储有至少一条程序代码，程序代码由处理器加载并执行以实现如上方面所述的基于物联网的服务通信方法。根据本申请的另一方面，提供了一种计算机程序产品或计算机程序，上述计算机程序产品或计算机程序包括计算机指令，上述计算机指令存储在计算机可读存储介质中。计算机设备的处理器从上述计算机可读存储介质读取上述计算机指令，上述处理器执行上述计算机指令，使得上述计算机设备执行如上方面所述的基于物联网的服务通信方法。本申请实施例提供的技术方案带来的有益效果至少包括：云端服务器和边缘端服务器之间通过长连接保持连接，使得云端服务器可以直接向边缘端服务器发起网络连接，并通过边缘端服务器访问相应的目标内容。不需要云端服务器获取边缘端服务器的地址和端口就可以访问目标内容，通信效率较高。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是根据一示例性实施例提供的计算机系统的结构示意图；图2是根据一示例性实施例提供的一种基于物联网的服务通信方法的流程图；图3是根据一示例性实施例提供的一种基于物联网的服务通信方法的流程图；图4是根据一示例性实施例提供的一种基于物联网的服务通信方法的流程图；图5是根据一示例性实施例提供的一种基于物联网的服务通信装置的结构示意图；图6是根据一示例性实施例提供的一种基于物联网的服务通信装置的结构示意图；图7是本申请一个实施例提供的计算机设备的结构示意图。具体实施方式为使本申请的目的、技术方案和优点更加清楚，下面将结合附图对本申请实施方式作进一步地详细描述。首先，对本申请实施例中涉及的名词进行介绍：物联网：指通过各种信息传感器、射频识别技术、全球定位系统、红外感应器、激光扫描器等各种装置与技术，实时采集任何需要监控、连接、互动的物体或过程，采集其声、光、热、电、力学、化学、生物、位置等各种需要的信息，通过各类可能的网络接入，实现物与物、物与人的泛在连接，实现对物品和过程的智能化感知、识别和管理。云端服务器：用于提供监控、存储、分析等数据服务，以及保障客户的业务数据安全的计算机集群，拥有公网IP。其中，公网IP指暴露在Internet公网上的IP地址，公网及局域网上的所有终端均可通过公网IP发起连接请求。边缘端服务器：是指在靠近物或数据源头的计算机设备，只拥有局域网IP。其中，相同局域网内的终端可通过局域网IP发起连接请求。边缘计算则是指是指在靠近物或数据源头的一侧的边缘端服务器，采用网络、计算、存储、应用核心能力为一体的开放平台，就近提供最近端服务。长链接：指可以连续发送多个数据包的连接。长链接在一次数据传输完成后，不会自动断开。Websocket：是一种在单个TCP连接上进行全双工通信的协议。云端服务器和边缘端服务器只需要完成一次握手，两者之间就直接可以创建持久性的连接，并进行双向数据传输。服务请求：指物联网客户端向云端服务器发送请求所需要的连接。示例性的，当物联网客户端是本地物联网客户端时，服务请求可表示为＜云端服务器的域名＞/＜服务名称＞。当物联网客户端是云端物联网客户端时，服务请求可表示为＜云端服务器的域名＞/＜边缘端服务器的名称＞/＜服务名称＞。图1示出了本申请一个示例性实施例提供的计算机系统的结构示意图。计算机系统100包括：物联网客户端120、云端服务器140和边缘端服务器160。物联网客户端120是在终端上运行的应用程序。该应用程序可以是app中的小程序，也可以是专门的应用程序，也可以是网页客户端。上述终端是智能手机、平板电脑、电子书阅读器、MP3播放器、MP4播放器、膝上型便携计算机和台式计算机中的至少一种。物联网客户端120通过无线网络或有线网络与云端服务器140相连。云端服务器140可以是独立的物理服务器，也可以是多个物理服务器构成的服务器集群或者分布式系统，还可以是提供云服务、云数据库、云计算、云函数、云存储、网络服务、云通信、中间件服务、域名服务、安全服务、CDN、以及大数据和人工智能平台等基础云计算服务的云服务器。云端服务器140通过长连接与边缘端服务器160相连。边缘端服务器160是指靠近物或数据源头的一侧的计算机设备。边缘端服务器160可以是独立的物理服务器，也可以是多个物理服务器构成的服务器集群或者分布式系统，还可以是提供云服务、云数据库、云计算、云函数、云存储、网络服务、云通信、中间件服务、域名服务、安全服务、CDN、以及大数据和人工智能平台等基础云计算服务的云服务器。在一个具体的实施例中，边缘端服务器160包括网关161和候选服务器162，网关161用于实现云端服务器140和边缘端服务器160之间的相互连接，候选服务器162用于提供边缘端服务器支持的边缘计算服务。图2示出了本申请一个示例性实施例提供的基于物联网的服务通信的流程示意图。该方法可由图1所示的云端服务器140执行，该方法包括以下步骤：步骤202：接收物联网客户端发送的边缘端服务器的名称。物联网客户端可以本地物联网客户端，也可以是云端物联网客户端。本地物联网客户端指位于用户所持终端上的客户端，云端物联网客户端指位于云端服务器上的应用程序。在物联网客户端不同时，获取边缘服务器的名称也不同。示例性的，该步骤包括以下子步骤：1、接收物联网客户端发送的服务请求。服务请求用于物联网客户端向云端服务器请求目标服务。2、根据服务请求确定物联网客户端的类型。在本实施例的一种可选实施方式中，根据服务请求的发送路径确定物联网客户端的类型。发送路径指物联网客户端向云端服务器发送服务请求时的IP地址。可选地，响应于接收到物联网客户端的服务请求，解析服务请求的发送路径，得到服务路径的发送地址；根据发送地址确定物联网客户端的类型。在本实施例的一种可选实施方式中，根据服务请求的携带内容确定物联网客户端的类型。示例性的，当物联网客户端是本地物联网客户端时，服务请求可表示为＜云端服务器的域名＞/＜服务名称＞。当物联网客户端是云端物联网客户端时，服务请求可表示为＜云端服务器的域名＞/＜边缘端服务器的名称＞/＜服务名称＞。因此，响应于服务请求携带边缘端服务器的名称，确定物联网客户端是云端物联网客户端；响应于服务请求不携带边缘端服务器的名称，确定物联网客户端是本地物联网客户端。在物联网客户端是云端物联网客户端的情况下，为了通知物联网客户端边缘端服务器的名称与服务名称之间的对应关系，可以事先将边缘端服务器的名称与服务名称之间的第二对应关系发送给云端物联网客户端。3、在物联网客户端是本地物联网客户端的情况下，从服务请求中提取服务名称；根据服务名称确定边缘端服务器的名称。示例性的，在物联网客户端是本地物联网客户端的情况下，服务请求可表示为＜云端服务器的域名＞/＜服务名称＞，此时，需要云端服务器通过其他途径获知边缘端服务器的名称。可选地，基于第一对应关系，确定与服务名称和第一对应关系对应的边缘端服务器的名称，第一对应关系包括服务名称和边缘端服务器的名称之间的对应关系。例如，现有第一对应关系如下：“服务A-边缘端服务器1”、“服务B-边缘端服务器2”、“服务C-边缘端服务器3”，当确定服务请求携带的服务名称是服务B，确定服务B对应边缘端服务器2。可选地，第一对应关系是以表格的形式存储在云端服务器上的。4、在物联网客户端是云端服务器上的云端物联网客户端的情况下，从服务请求中提取边缘端服务器的名称。示例性的，在物联网客户端是云端物联网客户端的情况下，服务请求可表示为＜云端服务器的域名＞/＜边缘端服务器的名称＞/＜服务名称＞，此时，服务请求已经包括了边缘端服务器的名称，故可以直接从服务请求中提取到边缘端服务器的名称。步骤204：通过与边缘端服务器的名称对应的长连接，向边缘端服务器发送请求消息；请求消息用于向边缘端服务器请求目标服务，长连接是用于连接云端服务器和边缘端服务器的连接。目标服务是由用户自行确定的。不同的边缘端服务器的名称对应不同的长连接，例如，边缘端服务器A对应长连接1，边缘端服务器B对应长连接2。可选地，使用Websocket连接云端服务器和边缘端服务器。步骤206：解析由边缘端服务器返回的处理结果，获得响应内容。在本申请实施例中，响应内容指由边缘端服务器计算得到的服务结果。其中，处理结果是通过长连接有边缘端服务器发送给云端服务器的。示例性的，处理结果表示为＜边缘端服务器的名称＞/＜服务名称＞+响应内容。解析处理结果可直接得到响应内容。步骤208：将响应内容发送给物联网客户端。在本实施例的一种可选实现方式中，根据处理结果中的边缘端服务器的名称，确定物联网客户端；将响应内容发送给物联网客户端。在云端服务器接收物联网客户端的服务请求时，云端服务器可以记录服务请求中的边缘端客户端的名称和物联网客户端之间的对应关系，当云端服务器接收到处理结果后，解析该处理结果，得到边缘端客户端的名称，并根据边缘端服务器的名称确定与处理结果对应的物联网客户端。在本实施例的一种可选实现方式中，根据处理结果中的服务名称，确定物联网客户端；将响应内容发送给物联网客户端。在云端服务器接收物联网客户端的服务请求时，云端服务器可以记录服务请求中的服务名称和物联网客户端之间的对应关系，当云端服务器接收到处理结果后，解析该处理结果，得到服务名称，并根据服务名称确定与处理结果对应的物联网客户端。在本实施例的一种可选实现方式中，根据处理结果中的边缘端服务器的名称和服务名称，确定物联网客户端；将响应内容发送给物联网客户端。在云端服务器接收物联网客户端的服务请求时，云端服务器可以记录物联网客户端和服务请求中的服务名称与边缘端客户端的名称之间的对应关系，当云端服务器接收到处理结果后，解析该处理结果，得到服务名称与边缘端客户端的名称，并根据服务名称与边缘端客户端的名称确定与处理结果对应的物联网客户端。综上所述，本实施例中云端服务器和边缘端服务器之间通过长连接保持连接，使得云端服务器可以直接向边缘端服务器发起网络连接，并通过边缘端服务器访问相应的目标内容。不需要云端服务器获取边缘端服务器的地址和端口就可以访问目标内容，通信效率较高。图3示出了本申请一个示例性实施例提供的基于物联网的服务通信的流程示意图。该方法可由图1所示的计算机系统执行，该方法包括以下步骤：步骤301：边缘端服务器通过云端服务器的地址连接到云端服务器。边缘端服务器通过云端服务器的公网地址连接到云端服务器，通过长连接或websocket与云端服务器保持连接。步骤302：云端服务器记录边缘端服务器对应的长连接。在边缘端服务器通过云端服务器的地址连接到云端服务器的情况下，云端服务器记录边缘端服务器对应的长连接。或者，在边缘端服务器通过云端服务器的地址连接到云端服务器的情况下，云端服务器记录边缘端服务器对应的websocket。示例性的，在本申请的一种可选实现方式中，使用表格记录边缘端服务器和长连接之间的对应关系，如表1所示：表1边缘端服务器和长连接之间的对应关系边缘端服务器长连接边缘端服务器A长连接1边缘端服务器B长连接2边缘端服务器C长连接3边缘端服务器D长连接4步骤303：云端服务器部署目标服务到边缘端服务器。可选地，云端服务器部署候选服务到边缘端服务器中的候选服务端中。目标服务是候选服务中的一个服务。步骤304：云端服务器定义并记录边缘端服务器对应的服务路径。服务路径包括边缘端服务器的名称和服务名称。示例性的，在本申请的一种可选实现方式中，使用表格记录边缘端服务器和服务路径之间的对应关系，如表2所示：表2边缘端服务器和服务路径之间的对应关系边缘端服务器服务路径边缘端服务器的名称服务名称边缘端服务器A服务路径1名称A服务α边缘端服务器B服务路径2名称B服务β边缘端服务器C服务路径3名称C服务γ边缘端服务器D服务路径4名称D服务δ示例性的，云端服务器定义并记录边缘端服务器对应的服务路径表示为＜边缘端服务器的名称＞/＜服务名称＞。步骤305：边缘端服务器记录目标服务和目标服务的服务名称。需要说明的是，步骤304和步骤305不分先后顺序，可以先执行步骤304，后执行步骤305；也可以先执行步骤305，后执行步骤304.步骤306：物联网客户端向云端服务器发送服务请求。示例性的，在物联网客户端是云端服务器上的云端物联网客户端的情况下，物联网客户端通过地址＜云端域名＞/＜边缘端名称＞/＜服务名称＞，向云端服务器发送服务请求。步骤307：云端服务器根据服务请求确定边缘端服务器的名称。在物联网客户端是本地物联网客户端的情况下，从服务请求中提取服务名称；根据服务名称确定边缘端服务器的名称。在物联网客户端是云端服务器上的云端物联网客户端的情况下，从服务请求中提取边缘端服务器的名称。步骤308：云端服务器确定边缘端服务器的名称对应的长连接。不同的边缘端服务器的名称对应不同的长连接，例如，边缘端服务器A对应长连接1，边缘端服务器B对应长连接2。可选地，使用websocket连接云端服务器和边缘端服务器。步骤309：云端服务器通过长连接向边缘端客户端发送请求消息。可选地，云端服务器通过websocket向边缘端客户端发送请求消息。示例性的，该步骤包括以下子步骤：1、从服务请求中提取服务名称。示例性的，当物联网客户端是本地物联网客户端时，服务请求可表示为＜云端服务器的域名＞/＜服务名称＞。当物联网客户端是云端物联网客户端时，服务请求可表示为＜云端服务器的域名＞/＜边缘端服务器的名称＞/＜服务名称＞。2、从至少两个候选请求内容中，确定与边缘端服务器的名称和服务名称对应的目标请求内容。在本申请中的一个可选实现方式中，云端服务器中存储有与边缘端服务器的名称和服务名称对应的目标请求内容以及边缘端服务器的名称、服务名称和目标请求内容之间的对应关系。例如，云端服务器中存储有“边缘端服务器1-服务名称1-请求内容1”、“边缘端服务1-服务名称2-请求内容2”、“边缘端服务器2-服务名称3-请求内容3”等对应关系，云端服务器可根据边缘端服务器的名称和服务名称确定目标请求内容。可选地，候选请求内容包括边缘端服务器提供服务对应的指令。示例性的，云端服务器中存储有“边缘端服务器1-请求内容1-指令1”、“边缘端服务器2-请求内容2-指令2”，其中，指令1用于边缘端服务器接入设备，指令2用于边缘端服务器同步数据。可选地，目标请求内容是数据种类。示例性的，候选请求内容的数据种类包括时间类数据、温度类数据和类数据，将候选请求内容中的时间类数据作为目标请求内容，边缘端服务器在接收到目标请求内容后，会根据目标请求内容获取时间类数据，并从边缘端服务器的存储器中选出时间类数据。可选地，目标请求内容是函数公式。示例性的，云端服务器将目标请求内容对应的函数公式发送给边缘端服务器，边缘端服务器在接收到目标请求内容后，会根据将目标请求内容对应的函数公式进行计算。可选地，目标请求内容是数据组合。示例性的，候选请求内容包括数据组合A、数据组合B和数据组合C，其中，数据组合A包括数据1和数据2，数据组合B包括数据1和数据3，数据组合C包括数据2和数据4。3、封装边缘端服务器的名称、服务名称和目标请求内容，生成请求消息。其中，边缘端服务器根据目标请求内容生成响应内容。示例性的，云端服务器生成的请求消息表示为＜边缘端服务器的名称＞/＜服务名称＞+请求内容。步骤310：边缘端服务器解析请求消息，得到服务名称和目标请求内容。边缘端服务器包括网关和候选服务端。具体的，边缘端服务器中的网关解析请求消息，得到服务名称和请求内容。步骤311：边缘端服务器在至少两个候选服务端中，确定与服务名称对应的目标服务。边缘端服务器中的不同的候选服务端可以实现不同的服务，比如，候选服务器端1可以实现服务A，候选服务端2可以实现服务B，边缘端服务器解析请求消息得到服务A，确定目标服务是候选服务端1上的服务。步骤312：边缘端服务器通过目标服务根据目标请求内容生成响应内容。响应内容指由边缘端服务器计算得到的服务结果。步骤313：边缘端服务器通过目标服务封装响应内容，生成处理结果。示例性的，边缘端服务器通过目标服务封装响应内容、边缘端服务器的名称和服务名称，生成处理结果，处理结果表示为＜边缘端服务器的名称＞/＜服务名称＞+响应内容。步骤314：边缘端服务器通过长连接将处理结果发送给云端服务器。在长连接中断的情况下，通过云端服务器的地址重新连接到云端服务器；和云端服务器再次建立长连接。步骤315：云端服务器解析由边缘端服务器返回的处理结果，获得响应内容。示例性的，云端服务器解析由边缘端服务器返回的处理结果，得到响应内容、边缘端服务器的名称和服务名称。步骤316：云端服务器将响应内容发送给物联网客户端。在本实施例的一种可选实现方式中，根据处理结果中的边缘端服务器的名称，确定物联网客户端；将响应内容发送给物联网客户端。在本实施例的一种可选实现方式中，根据处理结果中的服务名称，确定物联网客户端；将响应内容发送给物联网客户端。在本实施例的一种可选实现方式中，根据处理结果中的边缘端服务器的名称和服务名称，确定物联网客户端；将响应内容发送给物联网客户端。综上所述，本实施例中云端服务器和边缘端服务器之间通过长连接保持连接，使得云端服务器可以直接向边缘端服务器发起网络连接，并通过边缘端服务器访问相应的目标内容。不需要云端服务器获取边缘端服务器的地址和端口就可以访问目标内容，通信效率较高。且，云端服务器请求边缘端服务器的方式不需要获取边缘端服务器的地址和端口，请求都是通过云端服务器代理，根据路径不同请求不同边缘端服务器上的服务。图4示出了本申请一个示例性实施例提供的基于物联网的服务通信的流程示意图。该方法可由图1所示的边缘端服务器160执行，该方法包括以下步骤：步骤402：响应于通过与边缘端服务器的名称对应的长连接接收到云端服务器发送的请求消息，解析请求消息，得到服务名称和目标请求内容，长连接用于连接云端服务器和边缘端服务器。边缘端服务器包括网关和候选服务端。具体的，边缘端服务器中的网关解析请求消息，得到服务名称和请求内容。步骤404：在至少两个候选服务端中，确定与服务名称对应的目标服务。边缘端服务器中的不同的候选服务端可以实现不同的服务，比如，候选服务器端1可以实现服务A，候选服务端2可以实现服务B，边缘端服务器解析请求消息得到服务A，确定目标服务是候选服务端1上的服务。步骤406：通过目标服务根据目标请求内容生成响应内容。响应内容指由边缘端服务器计算得到的服务结果。例如，计算目标请求内容的和，生成响应内容。步骤408：通过目标服务封装响应内容，生成处理结果。示例性的，边缘端服务器通过目标服务封装响应内容、边缘端服务器的名称和服务名称，生成处理结果，处理结果表示为＜边缘端服务器的名称＞/＜服务名称＞+响应内容。步骤410：通过长连接将处理结果发送给云端服务器。在长连接中断的情况下，通过云端服务器的地址重新连接到云端服务器；和云端服务器再次建立长连接。综上所述，本实施例提供了一种在边缘端服务器中确定目标服务的方法，云端服务器和边缘端服务器之间通过长连接保持连接，使得云端服务器可以直接向边缘端服务器发起网络连接，并通过边缘端服务器访问相应的目标内容。不需要云端服务器获取边缘端服务器的地址和端口就可以访问目标内容，通信效率较高。下面为本申请的装置实施例，对于装置实施例中未详细描述的细节，可以结合参考上述方法实施例中相应的记载，本文不再赘述。图5示出了本申请的一个示例性实施例提供的基于物联网的服务通信的结构示意图。该装置可以通过软件、硬件或者两者的结合实现成为计算机设备的全部或一部分，该装置500包括云端服务器，该装置500包括：第一接收模块501，用于接收物联网客户端发送的边缘端服务器的名称；第一发送模块502，用于通过与所述边缘端服务器的名称对应的长连接，向所述边缘端服务器发送请求消息；所述请求消息用于向所述边缘端服务器请求目标服务，所述长连接是用于连接所述云端服务器和所述边缘端服务器的连接；第一解析模块503，用于解析由所述边缘端服务器返回的处理结果，获得响应内容；所述第一发送模块502，还用于将所述响应内容发送给所述物联网客户端。在本申请的一个可选设计中，所述第一接收模块501，还用于接收所述物联网客户端发送的服务请求。所述第一解析模块503，还用于根据所述服务请求确定所述物联网客户端的类型；在所述物联网客户端是本地物联网客户端的情况下，从所述服务请求中提取服务名称；根据所述服务名称确定所述边缘端服务器的名称；在所述物联网客户端是所述云端服务器上的云端物联网客户端的情况下，从所述服务请求中提取所述边缘端服务器的名称。在本申请的一个可选设计中，所述第一解析模块503，还用于基于第一对应关系，确定与所述服务名称和所述第一对应关系对应的所述边缘端服务器的名称，所述第一对应关系包括所述服务名称和所述边缘端服务器的名称之间的对应关系。在本申请的一个可选设计中，所述第一发送模块502，还用于将所述边缘端服务器的名称与所述服务名称之间的第二对应关系发送给所述云端物联网客户端。在本申请的一个可选设计中，所述第一解析模块503，还用于从所述服务请求中提取所述服务名称；从至少两个候选请求内容中，确定与所述边缘端服务器的名称和所述服务名称对应的目标请求内容；封装所述边缘端服务器的名称、所述服务名称和所述目标请求内容，生成所述请求消息；其中，所述边缘端服务器根据所述目标请求内容生成所述响应内容。在本申请的一个可选设计中，所述装置还包括第一注册模块504；所述第一注册模块504，用于在所述边缘端服务器通过所述云端服务器的地址连接到所述云端服务器的情况下，记录所述边缘端服务器对应的所述长连接；部署所述目标服务到所述边缘端服务器；定义并记录所述边缘端服务器对应的服务路径，所述服务路径包括所述边缘端服务器的名称和所述服务名称。综上所述，本实施例中云端服务器和边缘端服务器之间通过长连接保持连接，使得云端服务器可以直接向边缘端服务器发起网络连接，并通过边缘端服务器访问相应的目标内容。不需要云端服务器获取边缘端服务器的地址和端口就可以访问目标内容，通信效率较高。下面为本申请的装置实施例，对于装置实施例中未详细描述的细节，可以结合参考上述方法实施例中相应的记载，本文不再赘述。图6示出了本申请的一个示例性实施例提供的基于物联网的服务通信的结构示意图。该装置可以通过软件、硬件或者两者的结合实现成为计算机设备的全部或一部分，该装置600包括边缘端服务器，该装置600包括：第二接收模块601，用于接收物联网客户端发送的边缘端服务器的名称；第二发送模块602，用于通过与所述边缘端服务器的名称对应的长连接，向所述边缘端服务器发送请求消息；所述请求消息用于向所述边缘端服务器请求目标服务，所述长连接是用于连接所述云端服务器和所述边缘端服务器的连接；第二解析模块603，用于解析由所述边缘端服务器返回的处理结果，获得响应内容；所述第二发送模块602，还用于将所述响应内容发送给所述物联网客户端。在本申请的一个可选设计中，所述装置还包括第二注册模块603。所述第二注册模块603，用于通过所述云端服务器的地址连接到所述云端服务器；在所述云端服务器部署所述目标服务的情况下，记录所述目标服务和所述目标服务的服务名称。在本申请的一个可选设计中，所述第二解析模块603，还用于在所述长连接中断的情况下，通过所述云端服务器的地址重新连接到所述云端服务器；和所述云端服务器再次建立所述长连接。综上所述，本实施例提供了一种在边缘端服务器中确定目标服务的方法，云端服务器和边缘端服务器之间通过长连接保持连接，使得云端服务器可以直接向边缘端服务器发起网络连接，并通过边缘端服务器访问相应的目标内容。不需要云端服务器获取边缘端服务器的地址和端口就可以访问目标内容，通信效率较高。图7是根据一示例性实施例示出的一种计算机设备的结构示意图。所述计算机设备700包括中央处理单元701、包括随机存取存储器702和只读存储器703的系统存储器704，以及连接系统存储器704和中央处理单元701的系统总线705。所述计算机设备700还包括帮助计算机设备内的各个器件之间传输信息的基本输入/输出系统706，和用于存储操作系统713、应用程序714和其他程序模块715的大容量存储设备707。所述基本输入/输出系统706包括有用于显示信息的显示器708和用于用户输入信息的诸如鼠标、键盘之类的输入设备709。其中所述显示器708和输入设备709都通过连接到系统总线705的输入输出控制器710连接到中央处理单元701。所述基本输入/输出系统706还可以包括输入输出控制器710以用于接收和处理来自键盘、鼠标、或电子触控笔等多个其他设备的输入。类似地，输入输出控制器710还提供输出到显示屏、打印机或其他类型的输出设备。所述大容量存储设备707通过连接到系统总线705的大容量存储控制器连接到中央处理单元701。所述大容量存储设备707及其相关联的计算机设备可读介质为计算机设备700提供非易失性存储。也就是说，所述大容量存储设备707可以包括诸如硬盘或者只读光盘驱动器之类的计算机设备可读介质。不失一般性，所述计算机设备可读介质可以包括计算机设备存储介质和通信介质。计算机设备存储介质包括以用于存储诸如计算机设备可读指令、数据结构、程序模块或其他数据等信息的任何方法或技术实现的易失性和非易失性、可移动和不可移动介质。计算机设备存储介质包括RAM、ROM、可擦除可编程只读存储器、带电可擦可编程只读存储器，CD-ROM、数字视频光盘或其他光学存储、磁带盒、磁带、磁盘存储或其他磁性存储设备。当然，本领域技术人员可知所述计算机设备存储介质不局限于上述几种。上述的系统存储器704和大容量存储设备707可以统称为存储器。根据本公开的各种实施例，所述计算机设备700还可以通过诸如因特网等网络连接到网络上的远程计算机设备运行。也即计算机设备700可以通过连接在所述系统总线705上的网络接口单元712连接到网络711，或者说，也可以使用网络接口单元712来连接到其他类型的网络或远程计算机设备系统。所述存储器还包括一个或者一个以上的程序，所述一个或者一个以上程序存储于存储器中，中央处理器701通过执行该一个或一个以上程序来实现上述基于物联网的服务通信方法。在示例性实施例中，还提供了一种计算机可读存储介质，所述计算机可读存储介质中存储有至少一条指令、至少一段程序、代码集或指令集，所述至少一条指令、所述至少一段程序、所述代码集或指令集由处理器加载并执行以实现上述各个方法实施例提供的基于物联网的服务通信方法。本申请还提供一种计算机可读存储介质，所述存储介质中存储有至少一条指令、至少一段程序、代码集或指令集，所述至少一条指令、所述至少一段程序、所述代码集或指令集由所述处理器加载并执行以实现上述方法实施例提供的基于物联网的服务通信方法。可选地，本申请还提供了一种包含指令的计算机程序产品，当其在计算机设备上运行时，使得计算机设备执行上述各方面所述的基于物联网的服务通信方法。上述本申请实施例序号仅仅为了描述，不代表实施例的优劣。本领域普通技术人员可以理解实现上述实施例的全部或部分步骤可以通过硬件来完成，也可以通过程序来指令相关的硬件完成，所述的程序可以存储于一种计算机可读存储介质中，上述提到的存储介质可以是只读存储器，磁盘或光盘等。以上所述仅为本申请的可选实施例，并不用以限制本申请，凡在本申请的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。
