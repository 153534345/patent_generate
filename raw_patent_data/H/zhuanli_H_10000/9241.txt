标题title
一种传输多优先级数据帧的方法
摘要abst
本发明公开了一种传输多优先级数据帧的方法，用于通过传输系统传输数据帧，所述传输系统包括第一传输终端、第二传输终端、传输通道，第一传输终端通过传输通道将数据帧发送给第二传输终端，所述数据帧分为一个或多个数据块在预设时间片传输，数据块分为甲优先级数据块、其他优先级数据块和无效数据块，数据帧分为甲优先级数据帧和其他优先级数据帧，没有甲优先级数据帧和其他优先级数据帧时，在预设时间片传输无效数据块，数据块中包含优先级字段，优先级字段为比特序列A或B的数据块为甲优先级数据块，优先级字段为比特序列C或D的数据块为其他优先级数据块，优先级字段为比特序列I的数据块为无效数据块。
权利要求书clms
1.一种传输多优先级数据帧的方法，用于通过传输系统传输数据帧，所述传输系统包括第一传输终端、第二传输终端、传输通道，第一传输终端通过传输通道将数据帧发送给第二传输终端，其特征在于：所述数据帧分为一个或多个数据块在预设时间片传输，所述数据块分为甲优先级数据块、其他优先级数据块和无效数据块，所述数据帧分为甲优先级数据帧和其他优先级数据帧，所述甲优先级数据帧分为一个或多个甲优先级数据块传输，所述其他优先级数据帧分为一个或多个其他优先级数据块传输，没有甲优先级数据帧和其他优先级数据帧时，在预设时间片传输无效数据块，所述数据块中包含优先级字段，优先级字段择一地为互不相同的比特序列A、B、C、D、I，优先级字段为比特序列A或B的数据块为甲优先级数据块，优先级字段为比特序列C或D的数据块为其他优先级数据块，优先级字段为比特序列I的数据块为无效数据块。2.根据权利要求1所述的一种传输多优先级数据帧的方法，其特征在于：所述数据块的长度相同。3.根据权利要求2所述的一种传输多优先级数据帧的方法，其特征在于：所述数据块的长度为66比特或者34比特。4.根据权利要求1所述的一种传输多优先级数据帧的方法，其特征在于：所述比特序列A和B的长度为2比特。5.根据权利要求1所述的一种传输多优先级数据帧的方法，其特征在于：所述比特序列D的长度为2比特。6.根据权利要求1所述的一种传输多优先级数据帧的方法，其特征在于：在一个所述数据块的传输过程中，不允许插入其他数据。7.根据权利要求1所述的一种传输多优先级数据帧的方法，其特征在于：当传输每一个甲优先级数据帧时，用比特序列A作为该数据帧中的第1个数据块的优先级字段，用比特序列B作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段。8.根据权利要求1所述的一种传输多优先级数据帧的方法，其特征在于：当传输一个甲优先级数据帧时，用比特序列A作为该数据帧中的所有数据块的优先级字段，当传输下一个甲优先级数据帧时，用比特序列B作为该数据帧中的所有数据块的优先级字段，所述比特序列A和B交替使用传输相邻的甲优先级数据帧。9.根据权利要求1所述的一种传输多优先级数据帧的方法，其特征在于：所述其他优先级是指与甲优先级不同优先级的乙优先级，其他优先级数据帧是指乙优先级数据帧，其他优先级数据块是指乙优先级数据块，在一个数据帧的传输过程中，允许插入较高优先级的数据帧，在一个数据帧的传输过程中，不允许插入同等或较低优先级的数据帧。10.根据权利要求9所述的一种传输多优先级数据帧的方法，其特征在于：当传输每一个乙优先级数据帧时，用比特序列C作为该数据帧中的第1个数据块的优先级字段，用比特序列D作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段。11.根据权利要求9所述的一种传输多优先级数据帧的方法，其特征在于：当传输一个乙优先级数据帧时，用比特序列C作为该数据帧中的所有数据块的优先级字段，当传输下一个乙优先级数据帧时，用比特序列D作为该数据帧中的所有数据块的优先级字段，所述比特序列C和比特序列D交替使用传输相邻的乙优先级数据帧。12.根据权利要求1所述的一种传输多优先级数据帧的方法，其特征在于：所述其他优先级是指乙优先级和丙优先级，其他优先级数据帧是指乙优先级数据帧和丙优先级数据帧，其他优先级数据块是指乙优先级数据块和丙优先级数据块，甲优先级、乙优先级及丙优先级的优先级互不相同，在一个数据帧的传输过程中，允许插入较高优先级的数据帧，在一个数据帧的传输过程中，不允许插入同等或较低优先级的数据帧。13.根据权利要求12所述的一种传输多优先级数据帧的方法，其特征在于：所述比特序列C由3个互不相同的比特序列E、F、G代替，比特序列A、B、D、E、F、G、I互不相同,当传输每一个乙优先级数据帧时，用比特序列E作为该数据帧中的第1个数据块的优先级字段，用比特序列D作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段，当传输每一个丙优先级数据帧时，用比特序列F作为该数据帧中的第1个数据块的优先级字段，用比特序列G作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段。14.根据权利要求12所述的一种传输多优先级数据帧的方法，其特征在于：所述比特序列C由3个互不相同的比特序列E、F、G代替，比特序列A、B、D、E、F、G、I互不相同,当传输每一个乙优先级数据帧时，用比特序列E作为该数据帧中的第1个数据块的优先级字段，用比特序列D作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段，当传输一个丙优先级数据帧时，用比特序列F作为该数据帧中的所有数据块的优先级字段，当传输下一个丙优先级数据帧时，用比特序列G作为该数据帧中的所有数据块的优先级字段，所述比特序列F和比特序列G交替使用传输相邻的丙优先级数据帧。15.根据权利要求12所述的一种传输多优先级数据帧的方法，其特征在于：所述比特序列C由2个互不相同的比特序列E、F代替，比特序列A、B、D、E、F、I互不相同,当传输每一个乙优先级数据帧时，用比特序列E作为该数据帧中的第1个数据块的优先级字段，用比特序列D作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段，所述丙优先级的数据帧只含有一个数据块，当传输每一个丙优先级数据帧时，用比特序列F分别作为该数据帧中的唯一数据块的优先级字段。16.根据权利要求1所述的一种传输多优先级数据帧的方法，其特征在于：所述其他优先级是指P2、P3至Pn优先级，n为大于3的整数，其他优先级数据帧是指P2、P3至Pn优先级数据帧，其他优先级数据块是指P2、P3至Pn优先级数据块，甲优先级、P2、P3至Pn优先级的优先级互不相同，在一个数据帧的传输过程中，允许插入较高优先级的数据帧，在一个数据帧的传输过程中，不允许插入同等或较低优先级的数据帧。17.根据权利要求1所述的一种传输多优先级数据帧的方法，其特征在于：所述预设时间片为预设固定时间片。18.根据权利要求1所述的一种传输多优先级数据帧的方法，其特征在于：所述预设时间片为预设集合时间片。
说明书desc
技术领域本发明涉及通信技术领域，具体涉及一种传输多优先级数据帧的方法。背景技术在通信系统中，采用分层的结构进行数据传输是常用的方法，例如介质访问控制层、物理层等。当发送端的介质访问控制层将数据帧发送给物理层后，被切分为若干数据块进行传输，当这些数据块经过传输通道到达接收端后，需要在接收端的介质访问控制层得到与发送端相同的数据帧。因此，发送端需要对数据块进行标识，以便接收端对不同的数据块进行组合，从而得到数据帧。同时，在一些应用场合中需要传输不同优先级的数据，例如在音视频通信系统中，时序控制命令往往具有较高优先级，视频和音频信号的优先级低于时序控制命令，而其他一些数据，例如日志信息、对固件进行远程更新的数据等，这些数据对实时性要求不高，往往具有更低的优先级。具有不同优先级的数据帧被切分为若干数据块进行传输时，不同优先级数据帧的数据块混杂在一起，更增加了接收端恢复数据帧的难度。目前常采用在数据块中添加字段的方法，以便在接收端恢复数据帧，具体方法有：1.在数据块中添加帧序号字段，对数据块属于哪一个数据帧进行标识；2.在数据块中添加块序号字段，对属于同一数据帧的数据块进行计数；3.在数据块中添加边界标识字段，对组成数据帧的第一个数据块、最后一个数据块以及中间的数据块进行标识。前两个方法需要占用较多的带宽传输帧序号字段或块序号字段。第三个方法中的边界标识字段未对数据块所属数据帧的优先级进行明确标识，当通信信道可靠性不高或校验码对数据的保护能力不强时，容易造成数据块的丢失。当组成数据帧的第一个数据块或最后一个数据块丢失，且不同优先级数据帧的数据块混杂在一起传输时，在接收端不仅会导致丢失的数据块所属的数据帧无法正确接收，且可能会导致后续多个数据帧也无法正确接收。因此，有必要研究一种传输多优先级数据帧的方法，通过在数据块中添加优先级字段，在占用较少传输带宽的情况下，既可以对数据块所属数据帧的边界进行标识，又可以明确指示数据帧的优先级，以提高数据传输的可靠性。发明内容一种传输多优先级数据帧的方法，用于通过传输系统传输数据帧，所述传输系统包括第一传输终端、第二传输终端、传输通道，第一传输终端通过传输通道将数据帧发送给第二传输终端，所述数据帧分为一个或多个数据块在预设时间片传输，所述数据块分为甲优先级数据块、其他优先级数据块和无效数据块，所述数据帧分为甲优先级数据帧和其他优先级数据帧，所述甲优先级数据帧分为一个或多个甲优先级数据块传输，所述其他优先级数据帧分为一个或多个其他优先级数据块传输，没有甲优先级数据帧和其他优先级数据帧时，在预设时间片传输无效数据块，所述数据块中包含优先级字段，所述优先级字段择一地为互不相同的比特序列A、B、C、D、I，优先级字段为比特序列A或B的数据块为甲优先级数据块，优先级字段为比特序列C或D的数据块为其他优先级数据块，优先级字段为比特序列I的数据块为无效数据块。优选地，所述数据块的数据长度相同，为66比特或者34比特。所述比特序列A、B、D的长度为2比特。在一个所述数据块的传输过程中，不允许插入其他数据。优选地，当传输每一个甲优先级数据帧时，用比特序列A作为该数据帧中的第1个数据块的优先级字段，用比特序列B作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段。优选地，当传输一个甲优先级数据帧时，用比特序列A作为该数据帧中的所有数据块的优先级字段，当传输下一个甲优先级数据帧时，用比特序列B作为该数据帧中的所有数据块的优先级字段，所述比特序列A和B交替使用传输相邻的甲优先级数据帧。优选地，所述其他优先级是指与甲优先级不同优先级的乙优先级，其他优先级数据帧是指乙优先级数据帧，其他优先级数据块是指乙优先级数据块，在一个数据帧的传输过程中，允许插入较高优先级的数据帧，不允许插入同等或较低优先级的数据帧。当传输每一个乙优先级数据帧时，用比特序列C作为该数据帧中的第1个数据块的优先级字段，用比特序列D作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段。优选地，所述其他优先级是指与甲优先级不同优先级的乙优先级，其他优先级数据帧是指乙优先级数据帧，其他优先级数据块是指乙优先级数据块，在一个数据帧的传输过程中，允许插入较高优先级的数据帧，不允许插入同等或较低优先级的数据帧。当传输一个乙优先级数据帧时，用比特序列C作为该数据帧中的所有数据块的优先级字段，当传输下一个乙优先级数据帧时，用比特序列D作为该数据帧中的所有数据块的优先级字段，所述比特序列C和比特序列D交替使用传输相邻的乙优先级数据帧。优选地，所述其他优先级是指乙优先级和丙优先级，其他优先级数据帧是指乙优先级数据帧和丙优先级数据帧，其他优先级数据块是指乙优先级数据块和丙优先级数据块，甲优先级、乙优先级及丙优先级的优先级互不相同，在一个数据帧的传输过程中，允许插入较高优先级的数据帧，不允许插入同等或较低优先级的数据帧。所述比特序列C由3个互不相同的比特序列E、F、G代替，比特序列A、B、D、E、F、G、I互不相同。当传输每一个乙优先级数据帧时，用比特序列E作为该数据帧中的第1个数据块的优先级字段，用比特序列D作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段，当传输每一个丙优先级数据帧时，用比特序列F作为该数据帧中的第1个数据块的优先级字段，用比特序列G作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段。优选地，所述其他优先级是指乙优先级和丙优先级，其他优先级数据帧是指乙优先级数据帧和丙优先级数据帧，其他优先级数据块是指乙优先级数据块和丙优先级数据块，甲优先级、乙优先级及丙优先级的优先级互不相同，在一个数据帧的传输过程中，允许插入较高优先级的数据帧，不允许插入同等或较低优先级的数据帧。所述比特序列C由3个互不相同的比特序列E、F、G代替，比特序列A、B、D、E、F、G、I互不相同。当传输每一个乙优先级数据帧时，用比特序列E作为该数据帧中的第1个数据块的优先级字段，用比特序列D作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段，当传输一个丙优先级数据帧时，用比特序列F作为该数据帧中的所有数据块的优先级字段，当传输下一个丙优先级数据帧时，用比特序列G作为该数据帧中的所有数据块的优先级字段，所述比特序列F和比特序列G交替使用传输相邻的丙优先级数据帧。优选地，所述其他优先级是指乙优先级和丙优先级，其他优先级数据帧是指乙优先级数据帧和丙优先级数据帧，其他优先级数据块是指乙优先级数据块和丙优先级数据块，甲优先级、乙优先级及丙优先级的优先级互不相同，在一个数据帧的传输过程中，允许插入较高优先级的数据帧，不允许插入同等或较低优先级的数据帧。所述比特序列C由2个互不相同的比特序列E、F代替，比特序列A、B、D、E、F、I互不相同。当传输每一个乙优先级数据帧时，用比特序列E作为该数据帧中的第1个数据块的优先级字段，用比特序列D作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段，所述丙优先级的数据帧只含有一个数据块，当传输每一个丙优先级数据帧时，用比特序列F分别作为该数据帧中的唯一数据块的优先级字段。优选地，所述其他优先级是指P2、P3至Pn优先级，n为大于3的整数，其他优先级数据帧是指P2、P3至Pn优先级数据帧，其他优先级数据块是指P2、P3至Pn优先级数据块，甲优先级、P2、P3至Pn优先级的优先级互不相同，在一个数据帧的传输过程中，允许插入较高优先级的数据帧，不允许插入同等或较低优先级的数据帧。优选地，所述预设时间片为预设固定时间片。优选地，所述预设时间片为预设集合时间片。本发明的有益效果是：本发明一种传输多优先级数据帧的方法，通过在数据块中添加优先级字段，在占用较少传输带宽的情况下，既可以对数据块所属数据帧的边界进行标识，又可以明确指示数据帧的优先级，以提高数据传输的可靠性。附图说明图1是本发明一种传输多优先级数据帧的方法的传输系统框图及数据帧的传输结构示意图；图2是本发明一种传输多优先级数据帧的方法中，数据块的一种结构图及数据块集合的一种结构图；图3是本发明一种传输多优先级数据帧的方法中，甲优先级数据帧的一种传输结构示意图；图4是本发明一种传输多优先级数据帧的方法中，甲优先级数据帧的另一种传输结构示意图；图5是本发明一种传输多优先级数据帧的方法中，乙优先级数据帧的一种传输结构示意图；图6是本发明一种传输多优先级数据帧的方法中，乙优先级数据帧的另一种传输结构示意图；图7是本发明一种传输多优先级数据帧的方法中，甲优先级数据帧和乙优先级数据帧的一种传输结构示意图；图8是本发明一种传输多优先级数据帧的方法中，乙优先级数据帧和丙优先级数据帧的一种传输结构示意图；图9是本发明一种传输多优先级数据帧的方法中，乙优先级数据帧和丙优先级数据帧的另一种传输结构示意图；图10是本发明一种传输多优先级数据帧的方法中，乙优先级数据帧和丙优先级数据帧的再一种传输结构示意图；图11是本发明一种传输多优先级数据帧的方法中，甲优先级数据帧、乙优先级数据帧和丙优先级数据帧的一种传输结构示意图；其中：1第一传输终端2第二传输终端3传输通道具体实施方式下面将结合附图对本发明实施例中的技术方案进行清楚、完整地描述，可以理解的是，所描述的实施例仅是本发明的一部分实施例，而不是全部实施例。基于本发明的实施例，本领域技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。如图1所示，在本发明一种传输多优先级数据帧的方法的一个应用实施例中，所述传输多优先级数据帧的方法用于通过传输系统传输具有不同优先级的多个数据帧，所述传输系统包括第一传输终端1、第二传输终端2、传输通道3，第一传输终端1通过传输通道3将数据帧发送给第二传输终端2。一个数据帧可分为一个或多个数据块传输，但一个数据块只能用以传输来自一个数据帧中的数据。本发明中，如果一个数据块用以传输来自一个数据帧中的数据，称这个数据块属于这个数据帧，或这个数据块为这个数据帧的数据块。本发明中，一个数据块传输结束后，可以立即开始下一个数据块的传输；也可以间隔一段时间后，再开始下一个数据块的传输，在这种情况下，两个数据块之间可以传输其他数据；但一个数据块的传输不能被打断，一个数据块的传输在时间上是连续的，也即在一个数据块的传输过程中，不允许插入其他数据。如图2所示，本应用实施例中，数据块包含优先级字段PR、载荷字段PL，载荷字段PL用以承载数据帧中的数据，数据帧中的数据将填充到载荷字段PL，优先级字段PR用以表示该数据块所属数据帧的优先级,一个数据帧分为一个或多个数据块传输。由若干数据块B1、数据块B2、……、数据块Bk组成，并添加数据头H、校验码SC后，形成数据块集合，其中数据头H中可包含数据块集合的类型、长度、序号等信息，校验码SC可以是检错码或纠错码或既包含检错码也包含纠错码，用于对数据块集合进行检错或纠错。本应用实施例中，在传输通道3上每传输n个数据块集合，将插入一个同步块，用以在接收端对时钟或数据进行同步。传输通道3上按照时间顺序依次传输同步块S1、数据块集合F11、F12、……、F1n、同步块S2、数据块集合F21、F22、……、F2n、……。以上关于数据块集合和同步块的描述仅为本发明较佳的实施方式，但本发明的保护范围并不受其限制。在本发明的其他实施例中，数据块集合可以包含，也可以不包含数据头H或校验码SC；一个数据块集合中可以包含一个或多个数据块；在传输通道3上也可以不传输同步块；数据块之间也可以传输其他数据如表示控制信息或空闲的数据等。本发明中，数据块分为甲优先级数据块、其他优先级数据块和无效数据块，所述数据帧分为甲优先级数据帧和其他优先级数据帧，所述甲优先级数据帧分为一个或多个甲优先级数据块传输，所述其他优先级数据帧分为一个或多个其他优先级数据块传输，没有甲优先级数据帧和其他优先级数据帧时，在预设时间片传输无效数据块。优先级字段PR择一地为互不相同的比特序列A、B、C、D、I，优先级字段PR为比特序列A或B的数据块为甲优先级数据块，优先级字段PR为比特序列C或D的数据块为其他优先级数据块，优先级字段PR为比特序列I的数据块为无效数据块。本发明中，比特序列A、B、C、D、I可以分别为二进制序列“01”、“10”、“110”、“00”、“111”，比特序列A、B、D长度为2比特。在本发明中，A、B、C、D、I也可以为互不相同的其他比特序列。本发明中，第一传输终端1将数据帧分为一个或多个数据块在预设时间片传输，一个预设时间片传输一个数据块，第二传输终端2在预设时间片接收数据块，在预设时间片，即使没有数据帧需要传输，第一传输终端1也需要传输数据块，第一传输终端1在没有数据帧时在预设时间片传输无效数据块,无效数据块不含有数据帧中的数据。如图2所示实施例中，各个数据块的长度可以相同,一般常用的长度为66比特或34比特，各个数据块的长度也可以不相同，或数据块的长度相同但不为66比特或34比特。当数据块的长度为66比特时，优先级字段为A、B、D的数据块其载荷字段为8个字节共64比特，当数据块的长度为34比特时，优先级字段为A、B、D的数据块其载荷字段为4个字节共32比特，8个字节或4个字节的载荷字段便于承载数字系统中的以8-bit字节为基础的数据内容。如图2所示实施例中，数据块、数据头H、校验码SC、同步块的长度，一个数据块集合中数据块的数量及两个同步块之间数据块集合的数量在传输过程中可以为定值，但也可以按照第一传输终端1与第二传输终端2之间协议约定变化。如图2所示实施例中，如果数据块、数据头H、校验码SC、同步块的长度，一个数据块集合中数据块的数量及两个同步块之间数据块集合的数量在传输过程中为定值，或者虽然变化但其变化方法为第一传输终端1与第二传输终端2所预先共知，则第二传输终端2通过同步机制同步后，就可以按照预设的时间片接收数据块，第二传输终端2在同步后可以通过计数器计数到预设时间点来确定所述预设时间片。本发明中，可以通过计数器计数确定的预设时间片为预设固定时间片。图2所示的同步块可以用于同步机制，在一个实施例中，同步块含有同步序列，第二传输终端2通过识别同步块中的同步序列来实现同步。为了降低带宽开销，可以减少发送同步块的频率，而一个特例是同步块只在传输开始前一次性传输，从而最大限度的减低同步的带宽开销。本发明也可以选择其他的同步机制，本发明不限制同步机制的选择。使用预设固定时间片进行传输的一个优势是，可以最大限度的减低带宽开销，例如为了减低带宽开销，可以只在传输开始前进行一次同步，而在正常数据传输中，只传输数据块，不传输其他数据内容，即如图2所示的数据头H、校验码SC、同步块都不需要传输。在另一个预设时间片实现方法中，如图2所示的数据头H可以用于标识数据块集合的开始，而数据块集合含有一组2个或更多的预设时间片用于传输2个或更多的数据块，第二传输终端2通过识别数据头H而不是通过计数器计数确定一组2个或更多的预设时间片的起始位置。本发明中，通过数据头H来标识的预设时间片为预设集合时间片。本发明中，第一传输终端1将数据帧分为一个或多个数据块在预设时间片传输，所述预设时间片为预设固定时间片或预设集合时间片。预设集合时间片的每一组2个或更多的预设时间片需要传输一个数据头H，为了降低带宽开销，数据头H可以只用于标识一组2个或更多的预设时间片的起始位置，而不含有其他功能，从而可以减小数据头H长度，但数据头H长度再小，相比预设固定时间片方式还是增加了带宽开销。但从另外一个方面看，预设集合时间片中的数据头H为一组2个或更多的预设时间片所共有，如果一组中的预设时间片数量较多，则平均到每个预设时间片所传输的数据块的带宽开销要远小于常见的每个数据块都带有起始标识的方式。如图3所示，在本发明的一个应用实施例中，甲优先级数据帧1、甲优先级数据帧2、甲优先级数据帧3按顺序在预设时间片传输，其数据块的PR字段为比特序列A和B。如图3所示，当传输每一个甲优先级数据帧时，用比特序列A作为该数据帧中的第1个数据块的优先级字段，用比特序列B作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段。如图3所示，当没有数据帧时在预设时间片传输无效数据块。如图4所示，在本发明的另一个应用实施例中，甲优先级数据帧1、甲优先级数据帧2、甲优先级数据帧3按顺序在预设时间片传输，其数据块的PR字段为比特序列A和B。如图4所示，当传输一个甲优先级数据帧时，用比特序列A作为该数据帧中的所有数据块的优先级字段，当传输下一个甲优先级数据帧时，用比特序列B作为该数据帧中的所有数据块的优先级字段，比特序列A和B交替使用传输相邻的甲优先级数据帧。如图4所示，当没有数据帧时在预设时间片传输无效数据块。在本发明中，优先级字段PR为比特序列C或D的数据块为其他优先级数据块，在图5、图6及图7所示实施例中，其他优先级是指与甲优先级不同优先级的乙优先级，其他优先级数据帧是指乙优先级数据帧，其他优先级数据块是指乙优先级数据块，乙优先级数据块PR字段为比特序列C和D。如图5所示，在本发明的一个应用实施例中，乙优先级数据帧1、乙优先级数据帧2、乙优先级数据帧3按顺序在预设时间片传输，其数据块的PR字段为比特序列C和D。如图5所示，当传输每一个乙优先级数据帧时，用比特序列C作为该数据帧中的第1个数据块的优先级字段，用比特序列D作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段。如图5所示，当没有数据帧时在预设时间片传输无效数据块。如图6所示，在本发明的另一个应用实施例中，乙优先级数据帧1、乙优先级数据帧2、乙优先级数据帧3按顺序在预设时间片传输，其数据块的PR字段为比特序列C和D。如图6所示，当传输一个乙优先级数据帧时，用比特序列C作为该数据帧中的所有数据块的优先级字段，当传输下一个乙优先级数据帧时，用比特序列D作为该数据帧中的所有数据块的优先级字段，比特序列C和D交替使用传输相邻的乙优先级数据帧。如图6所示，当没有数据帧时在预设时间片传输无效数据块。本发明中，在一个数据帧的传输过程中，允许插入较高优先级的数据帧，不允许插入同等或较低优先级的数据帧。如图7所示，为一个同时传输甲优先级数据帧与乙优先级数据帧的实施例，在图7所示实施例中，甲优先级的优先级高于乙优先级，在其他实施例中，也可以为甲优先级的优先级低于乙优先级。如图7所示，比特序列A和B表示甲优先级数据帧1、甲优先级数据帧2、甲优先级数据帧3的方法采用图4所示的方法，比特序列C和D表示乙优先级数据帧1、乙优先级数据帧2、乙优先级数据帧3的方法采用图5所示的方法。开始传输乙优先级数据帧1后，在传输乙优先级数据帧1的第2个乙优先级数据块时，甲优先级数据帧1申请发送，由于甲优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧1的下一个数据块，而是开始发送甲优先级数据帧1的数据块；当甲优先级数据帧1的所有数据块发送完毕后，才能继续发送乙优先级数据帧1剩余的数据块。乙优先级数据帧1发送完毕后发送乙优先级数据帧2，乙优先级数据帧2发送完毕后发送乙优先级数据帧3。在传输乙优先级数据帧3的第1个乙优先级数据块时，甲优先级数据帧2申请发送，由于甲优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧3的下一个数据块，而是开始发送甲优先级数据帧2的数据块；当甲优先级数据帧2的所有数据块发送完毕后，才能继续发送乙优先级数据帧3的第2个乙优先级数据块。在传输乙优先级数据帧3的第2个乙优先级数据块时，甲优先级数据帧3申请发送，由于甲优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧3的下一个数据块，而是开始发送甲优先级数据帧3的数据块；当甲优先级数据帧3的所有数据块发送完毕后，才能继续发送乙优先级数据帧3剩余的数据块。如图7所示，当没有数据帧时在预设时间片传输无效数据块。在本发明中，优先级字段PR为比特序列C或D的数据块为其他优先级数据块，在图8、图9所示实施例中，其他优先级是指乙优先级和丙优先级，其他优先级数据帧是指乙优先级数据帧和丙优先级数据帧，其他优先级数据块是指乙优先级数据块和丙优先级数据块，甲优先级、乙优先级及丙优先级的优先级互不相同。在图8、图9所示实施例中，比特序列C由3个互不相同的比特序列E、F、G代替，从而优先级字段PR为比特序列E、F、G或D的数据块为其他优先级数据块，即优先级字段PR为比特序列E、F、G或D的数据块为乙优先级数据块和丙优先级数据块，比特序列A、B、D、E、F、G、I互不相同。本发明中，比特序列E、F、G可以分别为二进制序列“11000”、“11001”、“11010”。在本发明中，E、F、G也可以为互不相同的其他比特序列。如图8所示，为一个同时传输乙优先级数据帧与丙优先级数据帧的实施例，在图8所示实施例中，丙优先级的优先级高于乙优先级，在其他实施例中，也可以为丙优先级的优先级低于乙优先级。如图8所示，乙优先级数据帧1、乙优先级数据帧2、乙优先级数据帧3的数据块的PR字段为比特序列E和D，表示乙优先级，当传输每一个乙优先级数据帧时，用比特序列E作为该数据帧中的第1个数据块的优先级字段，用比特序列D作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段。如图8所示，丙优先级数据帧1、丙优先级数据帧2、丙优先级数据帧3的数据块的PR字段为比特序列F和G，表示丙优先级，当传输每一个丙优先级数据帧时，用比特序列F作为该数据帧中的第1个数据块的优先级字段，用比特序列G作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段。开始传输乙优先级数据帧1后，在传输乙优先级数据帧1的第2个乙优先级数据块时，丙优先级数据帧1申请发送，由于丙优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧1的下一个数据块，而是开始发送丙优先级数据帧1的数据块；当丙优先级数据帧1的所有数据块发送完毕后，才能继续发送乙优先级数据帧1剩余的数据块。乙优先级数据帧1发送完毕后发送乙优先级数据帧2，乙优先级数据帧2发送完毕后发送乙优先级数据帧3，在传输乙优先级数据帧3的第1个乙优先级数据块时，丙优先级数据帧2申请发送，由于丙优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧3的下一个数据块，而是开始发送丙优先级数据帧2的数据块；当丙优先级数据帧2的所有数据块发送完毕后，才能继续发送乙优先级数据帧3的第2个乙优先级数据块。在传输乙优先级数据帧3的第2个乙优先级数据块时，丙优先级数据帧3申请发送，由于丙优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧3的下一个数据块，而是开始发送丙优先级数据帧3的数据块；当丙优先级数据帧3的所有数据块发送完毕后，才能继续发送乙优先级数据帧3剩余的数据块。如图8所示，当没有数据帧时在预设时间片传输无效数据块。如图9所示，为一个同时传输乙优先级数据帧与丙优先级数据帧的实施例，在图9所示实施例中，丙优先级的优先级高于乙优先级，在其他实施例中，也可以为丙优先级的优先级低于乙优先级。如图9所示，乙优先级数据帧1、乙优先级数据帧2、乙优先级数据帧3的数据块的PR字段为比特序列E和D，表示乙优先级，当传输每一个乙优先级数据帧时，用比特序列E作为该数据帧中的第1个数据块的优先级字段，用比特序列D作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段。如图9所示，丙优先级数据帧1、丙优先级数据帧2、丙优先级数据帧3的数据块的PR字段为比特序列F和G，表示丙优先级，当传输一个丙优先级数据帧时，用比特序列F作为该数据帧中的所有数据块的优先级字段，当传输下一个丙优先级数据帧时，用比特序列G作为该数据帧中的所有数据块的优先级字段，比特序列F和G交替使用传输相邻的丙优先级数据帧。开始传输乙优先级数据帧1后，在传输乙优先级数据帧1的第2个乙优先级数据块时，丙优先级数据帧1申请发送，由于丙优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧1的下一个数据块，而是开始发送丙优先级数据帧1的数据块；当丙优先级数据帧1的所有数据块发送完毕后，才能继续发送乙优先级数据帧1剩余的数据块。乙优先级数据帧1发送完毕后发送乙优先级数据帧2，乙优先级数据帧2发送完毕后发送乙优先级数据帧3，在传输乙优先级数据帧3的第1个乙优先级数据块时，丙优先级数据帧2申请发送，由于丙优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧3的下一个数据块，而是开始发送丙优先级数据帧2的数据块；当丙优先级数据帧2的所有数据块发送完毕后，才能继续发送乙优先级数据帧3的第2个乙优先级数据块。在传输乙优先级数据帧3的第2个乙优先级数据块时，丙优先级数据帧3申请发送，由于丙优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧3的下一个数据块，而是开始发送丙优先级数据帧3的数据块；当丙优先级数据帧3的所有数据块发送完毕后，才能继续发送乙优先级数据帧3剩余的数据块。如图9所示，当没有数据帧时在预设时间片传输无效数据块。在本发明中，优先级字段PR为比特序列C或D的数据块为其他优先级数据块，在图10、图11所示实施例中，其他优先级是指乙优先级和丙优先级，其他优先级数据帧是指乙优先级数据帧和丙优先级数据帧，其他优先级数据块是指乙优先级数据块和丙优先级数据块，甲优先级、乙优先级及丙优先级的优先级互不相同。在图10、图11所示实施例中，比特序列C由2个互不相同的比特序列E、F代替，从而优先级字段PR为比特序列E、F或D的数据块为其他优先级数据块，即优先级字段PR为比特序列E、F或D的数据块为乙优先级数据块和丙优先级数据块，比特序列A、B、D、E、F、I互不相同。本发明中，比特序列E、F可以分别为二进制序列“11000”、“11001”。在本发明中，E、F也可以为互不相同的其他比特序列。如图10所示，为一个同时传输乙优先级数据帧与丙优先级数据帧的实施例，在图10所示实施例中，丙优先级的优先级高于乙优先级，在其他实施例中，也可以为丙优先级的优先级低于乙优先级。如图10所示，乙优先级数据帧1、乙优先级数据帧2、乙优先级数据帧3、乙优先级数据帧4的数据块的PR字段为比特序列E和D，表示乙优先级，当传输每一个乙优先级数据帧时，用比特序列E作为该数据帧中的第1个数据块的优先级字段，用比特序列D作为该数据帧中的除第1个数据块之外的其他数据块的优先级字段。如图10所示，丙优先级的数据帧只含有一个数据块，丙优先级数据帧1、丙优先级数据帧2、丙优先级数据帧3、丙优先级数据帧4的数据块的PR字段为比特序列F表示丙优先级，当传输一个丙优先级数据帧时，用比特序列F作为该数据帧中的唯一数据块的优先级字段。开始传输乙优先级数据帧1后，在传输乙优先级数据帧1的第2个乙优先级数据块时，丙优先级数据帧1申请发送，由于丙优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧1的下一个数据块，而是开始发送丙优先级数据帧1的唯一数据块；在传输丙优先级数据帧1的唯一数据块时，丙优先级数据帧2申请发送，当丙优先级数据帧1的唯一数据块发送完毕后，开始发送丙优先级数据帧2的唯一数据块；当丙优先级数据帧2的唯一数据块发送完毕后，才能继续发送乙优先级数据帧1剩余的数据块。乙优先级数据帧1发送完毕后发送乙优先级数据帧2，乙优先级数据帧2发送完毕后发送乙优先级数据帧3，在传输乙优先级数据帧3的第1个乙优先级数据块时，丙优先级数据帧3申请发送，由于丙优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧3的下一个数据块，而是开始发送丙优先级数据帧3的唯一数据块；当丙优先级数据帧3的唯一数据块发送完毕后，才能继续发送乙优先级数据帧3剩余的数据块。在传输乙优先级数据帧3的最后一个乙优先级数据块时，乙优先级数据帧4和丙优先级数据帧4同时申请发送，由于丙优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据帧3的最后一个乙优先级数据块发送完毕后，开始发送丙优先级数据帧4的唯一数据块；当丙优先级数据帧4的唯一数据块发送完毕后，才能发送乙优先级数据帧4的数据块。如图10所示，当没有数据帧时在预设时间片传输无效数据块。如图11所示，为一个同时传输甲优先级数据帧、乙优先级数据帧和丙优先级数据帧的实施例，在图11所示实施例中，丙优先级的优先级高于甲优先级，甲优先级的优先级高于乙优先级，在其他实施例中，甲优先级、乙优先级和丙优先级之间的优先级关系也可以为其他顺序。如图11所示，比特序列A和B表示甲优先级数据帧1、甲优先级数据帧2、甲优先级数据帧3的方法采用图4所示的方法，比特序列E和D表示乙优先级数据帧1、乙优先级数据帧2的方法采用图10所示的方法，丙优先级的数据帧只含有一个数据块，比特序列F表示丙优先级数据帧1、丙优先级数据帧2、丙优先级数据帧3、丙优先级数据帧4的方法采用图10所示的方法。开始传输乙优先级数据帧1后，在传输乙优先级数据帧1的第1个乙优先级数据块时，甲优先级数据帧1申请发送，由于甲优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧1的下一个数据块，而是开始发送甲优先级数据帧1的数据块；在传输甲优先级数据帧1的第1个甲优先级数据块时，丙优先级数据帧1申请发送，由于丙优先级数据帧的优先级高于甲优先级数据帧，因此当前正在发送的甲优先级数据块发送完毕后，不再发送甲优先级数据帧1的下一个数据块，而是开始发送丙优先级数据帧1的唯一数据块；当丙优先级数据帧1的唯一数据块发送完毕后，才能继续发送甲优先级数据帧1剩余的数据块；当甲优先级数据帧1的所有数据块发送完毕后，才能继续发送乙优先级数据帧1的第2个乙优先级数据块。在传输乙优先级数据帧1的第2个乙优先级数据块时，甲优先级数据帧2申请发送，由于甲优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧1的下一个数据块，而是开始发送甲优先级数据帧2的数据块；在传输甲优先级数据帧2的第2个甲优先级数据块时，丙优先级数据帧2申请发送，由于丙优先级数据帧的优先级高于甲优先级数据帧，因此当前正在发送的甲优先级数据块发送完毕后，不再发送甲优先级数据帧2的下一个数据块，而是开始发送丙优先级数据帧2的唯一数据块；当丙优先级数据帧2的唯一数据块发送完毕后，才能继续发送甲优先级数据帧2剩余的数据块；当甲优先级数据帧2的所有数据块发送完毕后，才能继续发送乙优先级数据帧1剩余的数据块。乙优先级数据帧1发送完毕后发送乙优先级数据帧2，在传输乙优先级数据帧2的第2个乙优先级数据块时，丙优先级数据帧3申请发送，由于丙优先级数据帧的优先级高于乙优先级数据帧，因此当前正在发送的乙优先级数据块发送完毕后，不再发送乙优先级数据帧2的下一个数据块，而是开始发送丙优先级数据帧3的唯一数据块；当丙优先级数据帧3的唯一数据块发送完毕后，才能继续发送乙优先级数据帧2剩余的数据块。在传输乙优先级数据帧2的最后一个乙优先级数据块时，甲优先级数据帧3和丙优先级数据帧4同时申请发送，由于丙优先级数据帧的优先级高于甲优先级数据帧，因此当前正在发送的乙优先级数据帧2的最后一个乙优先级数据块发送完毕后，开始发送丙优先级数据帧4的唯一数据块；当丙优先级数据帧4的唯一数据块发送完毕后，才能发送甲优先级数据帧3的数据块。如图11所示，当没有数据帧时在预设时间片传输无效数据块。当数据帧的不同优先级数量大于3时，本发明中所述其他优先级是指P2、P3至Pn优先级，n为大于3的整数，甲优先级、P2、P3至Pn优先级的优先级互不相同，其他优先级数据帧是指P2、P3至Pn优先级数据帧，其他优先级数据块是指P2、P3至Pn优先级数据块。本发明中表示其他优先级的优先级字段PR为比特序列C或D，当数据帧的不同优先级数量大于3时，比特序列C为相应的多个比特序列代替，并且与D一并用于表示P2、P3至Pn优先级，这些代替比特序列C的比特序列互不相同，这些代替比特序列C的比特序列与比特序列A、B、D、I也互不相同。在一个数据帧的传输过程中，允许插入较高优先级的数据帧，不允许插入同等或较低优先级的数据帧。以上所述，仅为本发明较佳的实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到的变化或替换，都应该涵盖在本发明的保护范围之内。
