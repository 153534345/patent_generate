标题title
时间获取方法及相关装置和设备、计算机可读存储介质
摘要abst
本申请提供了一种时间获取方法及相关装置和设备、计算机可读存储介质。该方法包括：终端设备通过移动网络或其他方式获取时间作为所述终端设备的本地时间，当所述终端设备接收到时间获取指令时，解析从基站发送的有效系统帧号得到所述有效系统帧号对应的高精度第一时间F。所述终端设备利用所述第一时间F更新所述终端设备的本地时间，由于所述第一时间F的精度比原有的所述终端设备的本地时间高。因此，通过本申请获取时间的方法大大提高了所述终端设备的时间精度。
权利要求书clms
1.一种时间获取的方法，其特征在于，应用于终端设备，包括：接收时间获取指令；响应所述时间获取指令，通过解析基站发送的有效系统帧号，得到第一时间F；将所述终端设备本地时间更新为所述第一时间F。2.根据权利要求1所述的方法，其特征在于，所述通过解析基站发送的有效系统帧号，得到所述第一时间F，包括：基于绝对时间以及从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数，得到第二时间F1；基于一个系统帧的长度以及基站发送的所述有效系统帧号，得到第三时间F2；结合所述第二时间F1和所述第三时间F2，得到所述第一时间F。3.根据权利要求2所述的方法，其特征在于，所述结合所述第二时间F1和所述第三时间F2，得到所述第一时间F，包括：根据公式F＝F1+F2，得到所述第一时间F；其中，F1＝S+X*h*z；F2＝Framenumber*z；其中，S为绝对时间，所述S以毫秒为单位；X为从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数；所述h为系统帧号循环一次的帧数；所述z为一个系统帧的长度，所述z以毫秒为单位；Framenumber为所述有效系统帧号。4.根据权利要求2所述的方法，其特征在于，所述结合所述第二时间F1和所述第三时间F2，得到所述第一时间F，包括：根据公式F＝F1+F2+F3，得到所述第一时间F；其中，F1＝S+X*h*z；F2＝Framenumber*z；F3＝Subframenumber*y；其中，S为绝对时间，所述S以毫秒为单位；X为从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数；所述h为系统帧号循环一次的帧数；所述z为一个系统帧对应的长度，所述z以毫秒为单位；Framenumber为所述有效系统帧号；F3为基于一个系统子帧的长度以及基站发送的所述有效系统子帧号，得到的第四时间F3；Subframenumber为所述有效系统子帧号；y为所述系统子帧的长度，所述y以毫秒为单位。5.根据权利要求3或4所述的方法，其特征在于，从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数X，包括：X＝floor{/h*z}；其中，所述C为从所述绝对时间开始到所述终端设备的调整时间的时长，所述C以毫秒为单位；所述调整时间为所述终端设备的本地时间加上第一时长的k的时间；所述第一时长k为所述终端设备的本地时间与所述第一时间F的误差范围；所述h为系统帧号循环一次的帧数；所述z为一个系统帧的长度，所述z以毫秒为单位。6.根据权利要求4所述的方法，其特征在于，所述系统子帧号，对应基于子载波间隔得出的一个子帧长度，并以固定周期循环递增。7.根据权利要求1-6任一项所述的方法，其特征在于，还包括判断接收到的系统帧号的保存时长是否超过时间阈值，所述有效系统帧号为保存时长不超过所述时间阈值的系统帧号。8.一种时间获取装置，其特征在于，包括：时间获取指令接收单元，用于接收时间获取指令；系统帧号解析单元，用于响应所述时间获取指令，通过解析基站发送的有效系统帧号，得到第一时间F；时间更新单元，用于将所述终端设备本地时间更新为所述第一时间F。9.根据权利要求8所述的时间获取装置，其特征在于，所述系统帧号解析单元包括：第一解析单元，用于基于绝对时间以及从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数，得到第二时间F1；第二解析单元，用于基于一个系统帧的长度以及基站发送的所述有效系统帧号，得到第三时间F2；结合单元，用于结合所述第二时间F1和所述第三时间F2，得到所述第一时间。10.根据权利要求9所述的时间获取装置，其特征在于，所述结合单元具体用于：根据公式F＝F1+F2，得到所述第一时间F；其中，F1＝S+X*h*z；F2＝Framenumber*z；其中，S为绝对时间，所述S以毫秒为单位；X为从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数；所述h为系统帧号循环一次的帧数；所述z为一个系统帧的长度，所述z以毫秒为单位；Framenumber为所述有效系统帧号。11.根据权利要求8-10任一项所述的时间获取装置，其特征在于，所述时间获取装置，还包括：系统帧号判断单元，用于判断接收到的系统帧号的保存时长是否超过时间阈值，所述有效系统帧号为保存时长不超过所述时间阈值的系统帧号。12.一种终端设备，其特征在于，包括：处理器和存储器；其中，所述存储器用于存储程序代码，所述处理器用于调用所述存储器存储的程序代码，执行如权利要求1-7任意一项所述的方法。13.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机程序，该计算机程序被处理器执行时，实现如权利要求1-7任意一项所述方法。
说明书desc
技术领域本申请实施例涉及通信技术领域，尤其涉及一种时间获取方法及相关装置和设备、计算机可读存储介质。背景技术随着智能终端如智能手机的应用越来越广泛，智能终端已成为物联网的中心，现有的终端设备的时间精度已经不能满足用户需求，有一些特殊的纪念时刻需要更高的时间精度，未来更多设备的互联和交互也需要更高精度的时间信息支撑。目前，智能终端授时的方式主要有两种。一种是智能终端通过移动网络时间获取，如通过时间同步协议、网络标识和时区等。以智能终端通过时间同步协议NTP时间获取为例，时间同步服务器通过网络时间协议为网络中的所有终端设备提供时间基准。但由于终端设备获取时间要经过基站、互联网、节点、NTP服务器等路径，经过路径多，获取的时间精度不高，通过移动网络获取时间的方式，终端设备获取的时间与协调世界时UTC相比，会存在1～2s的误差。另外一种授时方式是通过全球定位系统授时，手机终端通过内置的GNSS授时模块与卫星交互，从而获得较高精度的时间。由于终端设备必须内置相应的GNSS授时模块，并与卫星交互才能从GNSS获取时间。此外，由于GPS信号存在遮挡的问题，需要在室外开阔的地方才能获取准确的时间。因此，智能终端通过GNSS获取时间的方式应用场景有限。发明内容本申请实施例所要解决的技术问题在于，提供一种时间获取方法及相关装置和设备、计算机可读存储介质，能够有效提高终端设备的时间精度，并且应用场景广泛。第一方面，本申请实施例提供了一种时间获取的方法，应用于终端设备，可包括：所述终端设备接收时间获取指令；所述终端设备响应所述时间获取指令，通过解析基站发送的有效系统帧号，得到第一时间F；所述终端设备将本地时间更新为所述第一时间F。本申请实施例，终端设备接收从基站发送的有效系统帧号，结合所述有效系统帧号和终端设备的本地时间，通过相关的时间转换函数计算出第一时间F。所得到的第一时间F的精度比终端设备通过移动网络获取时间的精度更高，终端设备将第一时间F更新为本地时间后，其时间精度也随之提高了。由于无需通过GNSS来授时，避免了通过GNSS获取时间方式的应用场景有限的技术问题，使得该方法应用场景广泛。在一种可能的实现方式中，所述通过解析基站发送的有效系统帧号，得到所述第一时间F，包括：基于绝对时间以及从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数，得到第二时间F1；基于一个系统帧的长度以及基站发送的所述有效系统帧号，得到第三时间F2；结合所述第二时间F1和所述第三时间F2，得到所述第一时间F。本申请实施例，第二时间F1表示的是，从绝对时间开始到终端设备本地时间，系统帧号循环X次后对应的时间；第三时间F2表示的是，终端设备接收到的有效系统帧号对应的时长；第一时间F表示的是，移动终端基于所述第二时间F1和所述第三时间F2，所得到的系统帧号对应的精确时间。其中，所述终端设备的本地时间指的是终端设备未更新之前的时间，终端设备获取本地时间的方式可以通过移动网络、GNSS等多种方式。在一种可能的实现方式中，所述结合所述第二时间F1和所述第三时间F2，得到所述第一时间F，包括：根据公式F＝F1+F2，得到所述第一时间F；其中，F1＝S+X*h*z；F2＝Framenumber*z；其中，S为绝对时间，所述S以毫秒为单位；X为从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数；所述h为系统帧号循环一次的帧数；所述z为一个系统帧的长度，所述z以毫秒为单位；Framenumber为所述有效系统帧号。本申请实施例，S表示的绝对时间是预先配置的时间基准，本申请实施例预设这个时间基准为1986/01/01 00:00:00。通过绝对时间S、从绝对时间开始到终端设备本地时间，系统帧号循环的次数X以及系统帧号和系统帧的长度计算出从绝对时间开始到终端设备本地时间，系统帧号循环X次后对应的时间F1；再通过终端设备接收到的有效系统帧号以及系统帧长度，计算出终端设备接收到的有效系统帧号对应的时长F2；再结合F1、F2得到系统帧号对应的精确时间。在本实施例中，有效系统帧号解析出的时间精度与系统帧长度相同。在一种可能的实现方式中，所述结合所述第二时间F1和所述第三时间F2，得到所述第一时间F，包括：根据公式F＝F1+F2+F3，得到所述第一时间F；其中，F1＝S+X*h*z；F2＝Framenumber*z；F3＝Subframenumber*y；其中，S为绝对时间，所述S以毫秒为单位；X为从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数；所述h为系统帧号循环一次的帧数；所述z为一个系统帧对应的长度，所述z以毫秒为单位；Framenumber为所述有效系统帧号；F3为基于一个系统子帧的长度以及基站发送的所述有效系统子帧号，得到的第四时间F3；Subframenumber为所述有效系统子帧号；y为所述系统子帧的长度，所述y以毫秒为单位。本申请实施例，S表示的绝对时间是预先配置的时间基准，本申请实施例预设这个时间基准为1986/01/01 00:00:00。通过绝对时间S、从绝对时间开始到终端设备本地时间，系统帧号循环的次数X以及系统帧号和系统帧的长度，计算出从绝对时间开始到终端设备本地时间，系统帧号循环X次后对应的时间F1；再通过终端设备接收到的有效系统帧号以及系统帧长度计算出终端设备接收到的有效系统帧号对应的时长F2；通过系统子帧号以及子帧长度计算出有效系统子帧号对应的时长F3；再结合F1、F2、F3得到系统帧号对应的精确时间。在本实施例中，有效系统帧号解析出的时间精度与子帧长度相同。在一种可能的实现方式中，从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数X，包括：X＝floor{/h*z}；其中，所述C为从所述绝对时间开始到所述终端设备的调整时间的时长，所述C以毫秒为单位；所述调整时间为所述终端设备的本地时间加上第一时长k的时间；所述第一时长k为所述终端设备的本地时间与所述第一时间F的误差范围；所述h为系统帧号循环一次的帧数；所述z为一个系统帧对应的长度，所述z以毫秒为单位。本申请实施例，第一时长k为所述终端设备的本地时间与所述第一时间F的误差范围，第一时长k一般为2000毫秒；调整时间的时长C的计算公式为C＝N+k-S，所述N为终端设备通过移动网络获取的本地时间，N以毫秒为单位；S为绝对时间，S表示的绝对时间是预先配置的时间基准，所述S以毫秒为单位。在一种可能的实现方式中，所述系统子帧号，对应基于子载波间隔得出的一个子帧长度，并以固定周期循环递增。本申请实施例，系统子帧号对应一个子帧长度，子帧长度与子载波的间隔有关，在5G NR系统中，子载波的间隔可以为3.75KHz、15KHz、30KHz、60KHz、120KHz…，对应的子帧长度分别为4ms、1ms、0.5ms、0.25ms、0.125ms…，子载波的间隔不同，子帧号Subframenumber对应的子帧长度也不同，有效系统帧号解析出的时间的精度与子帧长度相同，例如，系统帧的长度为10ms，子载波间隔为30KHz时，对应的子帧长度为每帧0.5ms，一个系统帧有20个子帧,系统子帧号以20帧为周期，重复递增。由于在本实施例中，有效系统帧号解析出的时间精度与子帧长度相同，因此，有效系统帧号解析出的第一时间F的精度达到0.5ms。在一种可能的实现方式中，所述终端设备判断接收到的系统帧号的保存时长是否超过时间阈值，所述有效系统帧号为保存时长不超过所述时间阈值的系统帧号。本申请实施例，终端设备可以通过设立时间阈值来对接收到的系统帧号进行性筛选，以便终端设备选择最合适的系统帧号进行解析；对于无效的系统帧号，终端设备会对其丢弃，等待下一个有效系统帧号。在一种可能的实现方式中，所述终端设备接收时间获取指令包括：所述终端设备按周期或按至少一个预设时刻接收所述时间获取指令。本申请实施例，终端设备可以设置一个定时机制，设置一个或多个固定时刻，终端设备在设置的固定时刻解析从基站发送的系统帧号，所述固定时刻可以由用户自行设定，也可以在终端设备出厂前终端设备系统设置。终端设备也可以通过设置解析系统帧号的时间间隔，来实现终端设备对系统帧号的周期性解析，所述时间间隔可以由用户自行设定，也可以在终端设备出厂前终端设备系统设置。终端设备在解析系统帧号之前会接收一个时间获取指令作为触控信号来触发终端设备解析系统帧号。在终端设备解析系统帧号的时刻，终端设备会接收到时间获取指令，然后触发终端设备对系统帧号进行解析。在本实施例中，为终端设备解析基站发送的系统帧号及其子帧号提供了具体时间的触发条件，保证了终端设备可以在低能耗的情况下确保时间精度。在一种可能的实现方式中，所述终端设备接收时间获取指令包括：所述终端设备接收输入的触控信号。本申请实施例，终端设备的传感器接收用户点击终端设备屏幕上的时间更新控键，即接收到触控信号，接收到的所述触控信号即为所述时间获取指令。终端设备接收到触控信号后对所述有效系统帧号进行解析，得到所述第一时间F。第二方面，本申请实施例提供了一种时间获取装置，可包括：时间获取指令接收单元，用于所述终端设备解析所述有效系统帧号之前接收时间获取指令；系统帧号解析单元，用于所述终端设备将所述有效系统帧号解析为第一时间F；时间更新单元，用于将所述终端设备将本地时间更新为所述第一时间F。在一种可能的实现方式中，所述时间获取装置，还包括：系统帧号判断单元，用于判断接收到的系统帧号的保存时长是否超过时间阈值，所述有效系统帧号为保存时长不超过所述时间阈值的系统帧号。在一种可能的实现方式中，所述系统帧号解析单元包括：第一解析单元，用于基于绝对时间以及从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数，得到第二时间F1；第二解析单元，用于基于一个系统帧的长度以及基站发送的所述有效系统帧号，得到第三时间F2；结合单元，用于结合所述第二时间F1和所述第三时间F2，得到所述第一时间。在一种可能的实现方式中，所述结合单元具体用于：根据公式F＝F1+F2，得到所述第一时间F；其中，F1＝S+X*h*z；F2＝Framenumber*z；其中，S为绝对时间，所述S以毫秒为单位；X为从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数；所述h为系统帧号循环一次的帧数；所述z为一个系统帧的长度，所述z以毫秒为单位；Framenumber为所述有效系统帧号。在一种可能的实现方式中，所述结合单元具体用于：根据公式F＝F1+F2+F3，得到所述第一时间F；其中，F1＝S+X*h*z；F2＝Framenumber*z；F3＝Subframenumber*y；其中，S为绝对时间，所述S以毫秒为单位；X为从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数；所述h为系统帧号循环一次的帧数；所述z为一个系统帧对应的长度，所述z以毫秒为单位；Framenumber为所述有效系统帧号；F3为基于一个系统子帧的长度以及接收到的基站发送的所述有效系统子帧号，得到第四时间F3；Subframenumber为所述有效系统子帧号；y为所述系统子帧的长度，所述y以毫秒为单位。在一种可能的实现方式中，所述时间获取装置，还包括：系统帧号循环次数计算单元，用于计算从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数X，包括：X＝floor{/h*z}；其中，所述h为系统帧号循环一次的帧数；所述z为一个系统帧对应的长度，所述z以毫秒为单位；所述C为从所述绝对时间开始到所述终端设备的调整时间的时长，所述C以毫秒为单位；所述调整时间为所述终端设备的本地时间加上第一时长的k的时间；所述第一时长k为所述终端设备的本地时间与所述第一时间F的误差范围。在一种可能的实现方式中，所述时间获取装置，还包括：触发单元，用于用户点击终端设备屏幕上的时间更新功能控键，终端设备上的传感器接收到用户的触控信号，并将触控信号作为时间获取指令发送给所述时间获取装置的系统帧号解析单元，所述系统帧号解析单元接收到所述时间获取命令后，即可解析有效系统帧号及其子帧号，得到所述第一时间F。第三方面，本申请实施例提供了一种终端设备，可包括：处理器和存储器；其中，所述存储器用于存储程序代码，所述处理器用于调用所述存储器存储的程序代码，执行上述第一方面及其各种可能的实现方式中的时间获取方法。第四方面，本申请实施例提供一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，该计算机程序被处理器执行时，实现上述第一方面及其各种可能的实现方式中的时间获取方法。第五方面，本实施例提供了一种计算机程序，该计算机程序包括指令，当所述计算机程序被计算机执行时，使得终端设备可以执行上述第一方面及其各种可能的实现方式中终端设备所执行的流程。附图说明下面对本申请实施例用到的附图进行介绍。图1是本申请实施例提供的一种终端设备时间获取系统架构示意图；图2是本申请实施例提供的一种时间获取方法流程图；图3是本申请实施例提供的一种系统帧结构示意图；图4是本申请实施例提供的终端设备本地时间取值范围图；图5是本申请实施例提供的一种时间获取装置结构示意图；图6是本申请实施例提供的一种时间获取装置的系统帧号解析单元结构示意图；图7是本申请实施例提供的一种终端设备的结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述。显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。在本文中提及“实施例”意味着，结合实施例描述的特定特征、结构或者特性可以包含在本实施例申请的至少一个实施例中。在说明书中的各个位置出现该短语并不一定均是相同的实施例，也不是与其它实施例互斥的独立的或是备选的实施例。本领域技术人员可以显式地和隐式地理解的是，本文所描述的实施例可以与其它实施例相结合。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。本申请的说明书和权利要求书及所述附图中术语“第一”、“第二”、“第三”等是区别于不同的对象，而不是用于描述特定顺序。此外，术语“包括”和“具有”以及它们的任何变形，意图在于覆盖不排他的包含。例如，包含了一系列步骤或单元，或者可选地，还包括没有列出的步骤或单元，或者可选地还包括这些过程、方法、产品或设备固有的其它步骤或单元。附图中仅示出了与本申请相关的部分而非全部内容。在更加详细地讨论示例性实施例之前，应当提到的是，一些示例性实施例被描述成作为流程图描绘的处理或方法。虽然流程图将各项操作描述成顺序的处理，但是其中的许多操作可以并行地、并发地或者同时实施。此外，各项操作的顺序可以被重新安排。当其操作完成时所述处理可以被终止，但是还可以具有未包括在附图中的附加步骤。所述处理可以对应于方法、函数、规程、子例程、子程序等等。在本说明书中使用的术语“部件”、“模块”、“系统”、“单元”等用于表示计算机相关的实体、硬件、固件、硬件和软件的组合、软件或执行中的软件。例如，单元可以是但不限于在处理器上运行的进程、处理器、对象、可执行文件、执行线程、程序和/或分布在两个或更多个计算机之间。此外，这些单元可从在上面存储有各种数据结构的各种计算机可读介质执行。单元，可例如，根据具有一个或多个数据分组的信号通过本地和/或远程进程来通信。首先，对本申请中的部分用语进行解释说明，以便本领域技术人员理解。协调时间时是以原子时秒长为基础，在时刻上尽量接近于世界时的一种时间计量系统。这套时间系统被应用于许多互联网和万维网的标准中，例如，网络时间协议就是协调世界时在互联网中使用的一种方式。网络时间协议是用来使终端设备时间同步化的一种协议。网络时间协议可以使终端设备对其时钟源进行时间同步化。为适应网络的层次结构，网络时间协议采用层次式时间分布模型，包括主时间服务器、从时间服务器及节点间的传输路径。主时间服务器为高精度同步时钟源，从时间服务器经由主时间服务器获得同步时间。时间按时间服务器的等级传播，按照离外部UTC源的远近将所有服务器归入不同的Stratun中，Stratun-1在顶层，有外部UTC接入，而Stratun-2则从Stratun-1时间获取，Stratun-3从Stratun-2时间获取，以此类推。但是，Stratun层的总数限制在15层以内，所有时间同步服务器在逻辑上形成阶梯式的架构相互连接，主时间服务器位于Stratun-1层，是整个系统的基础。5G NR新空口系统，是基于OFDM的全新空口设计的全球性5G标准，也是下一代非常重要的蜂窝移动技术基础，5G技术将实现超低时延、高可靠性。NR涉及一种基于正交频分复用的新无线标准。OFDM指的是一种数字多载波调制方法。随着3GPP采用这一标准之后，NR这一术语被沿用下来，成为5G的另一个代称。为了便于理解本申请实施例，下面先对本申请实施例所基于的其中一种系统架构进行描述。请参见图1，图1是本申请实施例提供的一种终端设备时间获取的系统架构示意图。该系统架构中可以包括终端设备、基站、全球卫星导航系统GNSS和网络时间获取的相关装置。其中，终端设备的数量可以为一个或者多个，终端设备可以通过和基站通信进而接入网络。基站的内置授时模块可以通过全球卫星导航系统GNSS获取高精度的参考时间。例如，每位用户都有一部可以与基站进行信息传送的智能手机，用户的智能手机与基站进行通信，通过基站接入互联网，智能手机解析时间同步服务器NTP服务器的地址，NTP服务器基于网络时间协议为所有接入网络的智能手机提供时间，智能手机将获取的网络时间作为本地时间。则智能手机获取高精度的时间的流程如下：基站通过内置的授时模块从GPS卫星获取高精度的时间，并向智能手机发送系统帧号，其中，系统帧号携带有基站获取的时间信息。智能手机根据用户点击智能手机屏幕上的时间更新功能控键，接收时间获取指令；或者按照预设频率，周期性地接收时间获取指令；或者在一个或一个以上的固定时刻接收时间获取指令。智能手机在接收到时间获取的指令后，解析和基站进行通信时基站发送的系统帧号，得到高精度时间，并将其更新为智能手机的本地时间。需要说明的是，本申请实施例中的终端设备可以包括但不限于手机、平板电脑、桌面型、膝上型、笔记本电脑、超级移动个人计算机、手持计算机、上网本、个人数字助理、可穿戴电子设备、虚拟现实设备、车载设备等电子设备。通过上述智能手机时间获取的方式，可以让手机获取高精度的时间。传统终端设备通过移动网络以及时间网络协议时间获取的方法，时钟信息经过的路径长，另外，考虑网络的延时等因素，终端设备获取的时间往往精度不高。上述智能手机获取时间的方式，智能手机直接与基站进行通信，系统帧号传输路径少，通过解析基站发送到终端设备的系统帧号，直接获取基站通过全球卫星导航系统等高精度时钟源获取的高精度时间，从而提高了智能手机时间精度。请参阅图2，图2是本申请实施例提供的一种时间获取方法的流程图。如图2所示，该时间获取的方法包括以下几个步骤。步骤S201：终端设备通过内置的授时模块获取时间，并将其作为终端设备本地时间N。具体地，终端设备内置的授时模块可让终端设备通过移动网络获取时间，也可以让终端设备通过其他方式从其他时间源获取时间。终端设备通过移动网络时间获取可以通过网络时间协议、网络标识和时区机制等方式，本实施例以终端设备通过网络时间协议NTP时间获取为例。终端设备可以在以下情况通过移动网络时间获取，即：终端设备开机后时间获取、终端设备按照系统的预设频率周期性的时间获取、终端设备在预先设置的时刻时间获取。终端设备首先与基站进行通信，由于基站与核心网连接，因此，终端设备通过与基站通信就可以接入互联网。时间同步服务器也接入了互联网，通过内置的授时模块从卫星或者其它高精度的时钟源获取协调世界时UTC。终端设备在接入互联网后解析时间服务器的地址，然后，时间同步服务器基于网络时间协议NTP为已接入网络的终端设备提供时间基准，终端设备由此从时间同步服务器获取时间，并将获取的时间作为终端设备的本地时间。其中，终端设备可以是用户设备、接入终端、UE单元、UE站、移动站、移动台、远方站、远程终端、移动设备、UE终端、终端、无线通信设备、UE代理或UE装置等。接入终端可以是蜂窝电话、无绳电话、会话启动协议电话、无线本地环路站、个人数字处理、具有无线功能的手持设备、计算机设备或连接到无线调制解调器的其它处理设备、车载设备、可穿戴设备、5G网络中的终端或者未来演进的公共陆地网络中的终端等。步骤S202：基站通过内置授时模块从全球卫星导航系统GNSS或其他高精度时间源获取高精度时间X1。本实施例以基站向全球定位系统GPS获取高精度协调世界时UTC为例。具体地，GPS向基站授时是利用GPS卫星搭载的高精度原子钟产生基准信号和时间标准，提供覆盖全球的时间服务，其授时精度高达20亿分之一秒。GPS授时系统主要利用GPS精确对时的特点来实现对基站的统一对时。基站内置授时模块中的GPS接收器在任意时刻能同时接受其视野范围内4-8颗卫星信号，经解码和处理后提取并输出两种时间信号，包括：时间间隔为1s的脉冲信号，其脉冲前沿与国际标准时间的同步误差不超过1μs。其中，脉冲信号PPS一秒钟发送一个，其作用是用其脉冲的上升沿来表示整秒的时刻，精度可以达到ns级，没有累计误差。经串行口输出的PPS脉冲前沿对应的国际标准时间和日期代码。步骤S203：基站与终端设备通信，基站发送给终端设备的信息中包括系统帧、系统帧号以及系统帧的子帧号。具体地，系统帧号的结构和相关特点如图3所示。基站发出的系统帧号按照一个绝对时间，以1024帧为周期重复递增，即：系统帧号以0,1,2……1023的顺序循环递增。每个系统帧号对应的系统帧的长度为10ms，那么，系统帧号循环一次的周期为10240ms。其中，所述绝对时间是是预先配置的时间基准，假设预先配置的时间基准是1986/01/01 00:00:00。相对于4G，5G由于要支持更多的应用场景，特别是超高可靠低时延服务，因此，5G需要比LTE更短的帧结构。在LTE/LTE-A中，子载波的间隔是固定的15KHz，5G NR系统定义最基本的子载波的间隔为15KHz，并且，可以灵活扩展。其中，可以灵活扩展的意思是，5G NR系统的子载波间隔可由以下公式得出：15*KHz，m{-2,0,1,2…5}通过上述公式可知，子载波的间隔可以为3.75KHz、7.5KHz、15KHz、30KHz、60KHz、120KHz…，子帧长度与子载波间隔的对应关系表如下表1所示：表1由于，终端设备解析从基站发送的有效系统帧号所得到的时间，其时间精度与子帧长度相同。因此，子载波间隔越大，子帧号对应的子帧长度就越小，所得到的时间精度就越大。基站向终端设备发送的系统帧号及其子帧号的计算是基于绝对时间和基站通过内置的授时系统从GPS得到的高精度的时间X1计算得出的。例如，首先，基站通过内置授时模块向GPS获取当前时间为X1，绝对时间为1986/01/01 00:00:00。然后，将X1和绝对时间都统一单位为ms，求出X1和绝对时间的模值M。然后，将X1和绝对时间的模值M对系统帧号的重复周期10240ms进行求余运算，得到余值Y2。然后，将余值Y2除以一个系统帧的时隙10ms得到数值Y3。最后，将数值Y3进行取整得到系统帧号Framenumber。对于子帧号的计算则是基于子载波间隔对应的子帧长度，以及数值Y2计算得出。首先，Y2对一个系统帧的周期10ms进行求余运算得到余值H1。然后余值H1除以子帧长度y得到数值H2。最后，对数值H2取整，得到子帧号Subframenumber。基站将计算出的系统帧号Framenumber和子帧号Subframenumber发送给终端设备。步骤S204：终端设备接收时间获取指令。具体地，终端设备按照预设频率周期性地对系统帧号进行解析，得到高精度的系统帧号解析后的时间。也就是说，该终端设备是按照预设频率周期性的去更新本地时间。这个预设频率可以由用户自行设定，也可以在终端设备出厂前终端设备系统设置。那么，在该终端设备获知到达一个周期时，终端设备就会执行本申请的时间获取方法。例如，计时器计时到达一个周期的时刻，会向终端设备的系统帧号解析单元发送脉冲信号，接收到脉冲信号后，终端设备进行系统帧号的解析，进而更新终端设备的本地时间；计时器发送的脉冲信号就相当于时间获取指令，触发终端设备解析系统帧号。可选地，终端设备还可以设置一个定时机制，设置一个或多个固定时刻，终端设备在设置的固定时刻解析从基站接收到的系统帧号，所述固定时刻可以由用户自行设定，也可以在终端设备出厂前终端设备系统设置。那么，在该终端设备获知到达预设时刻时，终端设备就会执行本申请的时间获取方法。例如，定时器定时到达预设时刻时，会向终端设备的系统帧号解析单元发送脉冲信号，接收到脉冲信号后，终端设备进行系统帧号的解析，进而更新终端设备的本地时间；定时器发送的脉冲信号就相当于时间获取指令，触发终端设备解析系统帧号。可选地，终端设备还可以根据用户点击终端设备屏幕上的时间更新功能控键，那么该终端设备即接收时间获取指令。例如，终端设备的传感器接收到用户点击终端设备屏幕的触控信号，传感器将触控信号发送给终端设备的系统帧号解析单元，接收到触控信号后，终端设备进行系统帧号的解析，进而更新终端设备的本地时间；传感器发送的触控信号相当于时间获取指令，触发终端设备解析系统帧号。以上三种方式可以单独实施，也可以结合实施。因此，在本实施例中，时间获取的指令为终端设备解析基站发送的有效系统帧号及其子帧号提供了具体时间的触发条件，保证了终端设备可以在低能耗的情况下确保时间精度。步骤S205：设置时间阈值，判断系统帧号及其子帧号的有效性。具体地，终端设备设置时间阈值，判断终端设备从基站接收到的系统帧号Framenumber及其子帧号Subframenumber的保存时间是否超过时间阈值，来判断接收到的系统帧号及其子帧号的有效性。当系统帧号及其子帧号保存时长不超过时间阈值时，为有效系统帧号，反之，为无效系统帧号。当终端设备接收到无效系统帧号后，终端设备会丢弃无效系统帧号，等待下一个有效系统帧号。例如，时间阈值k为0.2ms，从终端设备接收到基站发送的系统帧号的时间开始算起，若接收后，系统帧号及其子帧号保存的时长在0.2ms以内，终端设备判断其为有效帧号。反之，终端设备判断其为无效帧号。步骤S206：终端设备解析基站发送的所述有效系统帧号，得到系统帧号对应的高精度时间。具体地，将所述系统帧号解析得到的时间分为三个过程。首先，基于绝对时间、从绝对时间到终端设备本地时间系统帧号循环的次数X、系统帧号循环一次的帧数以及系统帧的长度，得到第二时间F1。第二时间F1表示的是，从绝对时间到终端设备本地时间，系统帧号循环X次后对应的时间。其中，F1＝S+X*h*z。其中，S表示绝对时间，以毫秒为单位，绝对时间S是预先配置的时间基准，本实施例以预先配置的时间基准是1986/01/01 00:00:00为例；X表示自绝对时间开始，到终端设备通过移动网络获取的本地时间期间，系统帧号重复的次数；h为系统帧号循环一次的帧数，本实施例以系统帧号循环一次的帧数为1024帧为例；z为一个系统帧的长度，所述z以毫秒为单位，本实施例以一个系统帧的长度为10ms为例；Framenumber表示系统帧号。从绝对时间到终端设备通过移动网络获取的本地时间期间，系统帧号重复的次数X的计算方式如下。终端设备通过移动网络获取本地时间为N，与基站系统帧号对应的第一时间F误差范围为2s，可以得出下列不等式：F-2000＜N*1000＜F+2000，即：S+X*1024*10+Framenumber*10-2000＜N*1000＜S+X*1024*10+Framenumber*10+2000示意图如图4所示，图4是本申请实施例提供的终端设备本地时间的取值范围图。由此，可以推导出X为满足下列两个不等式的整数：X*10240＜*1000- S-Framenumber*10公式1X*10240＞*1000- S-Framenumber*10公式2如果终端设备的本地时间N或者Framenumber的精度不满足上述要求，会导致满足公式1和公式2的整数X不存在，只要终端设备的本地时间N和第一时间F的误差范围为2s，则联立公式1和公式2可以得出：X＝floor{，所得到的时间精度越大。在本实施例中，由于系统子帧的长度为1ms，因此，第一时间F的精度为1ms。步骤S207：终端设备将解析系统帧号所得到的时间更新为终端设备本地时间。终端设备将基站发送的有效系统帧号解析后，得到的是一个高精度的时间。终端设备将得到的有效系统帧号的时间更新为终端设备当前的本地时间，替换终端设备原有的通过移动网络获取的时间值，并将更新后的时间展现在终端设备的显示屏上，反馈给用户。终端设备在接收用户的触控信号后，解析基站发送的有效系统帧号，并将更新后的系统帧号对应的高精度时间显示在显示屏上，并将时间更新完成的消息反馈给用户，其中，时间更新完成的消息包括：语音消息、文本消息中的任意一种。本申请实施例，通过终端设备解析基站发送的系统帧号，系统帧号包含基站当前从高精度时间源获取的高精度时间，获取第一时间F。第一时间F为终端设备解析从基站发送的系统帧号，得到的高精度时间。终端设备按周期或按至少一个预设时刻接收到时间获取指令，在接收到时间获取指令之后，终端设备对基站发送的系统有效帧号进行判断，判断是否为有效帧号，对于无效的系统帧号终端设备将其丢弃，等待下一个有效系统帧号。终端设备确定有效系统帧号之后，基于绝对时间、有效系统帧号以及终端设备的本地时间计算出从绝对时间到终端设备本地时间系统帧号循环的次数。然后，终端设备基于绝对时间、循环次数、系统帧号循环一次的帧数、以及系统帧长度计算出第二时间；基于系统帧号、系统帧长度计算出第三时间；基于第二时间和第三时间得到第一时间，并将终端设备的本地时间更新为第一时间，将第一时间显示在显示屏上。如果终端设备接收到用户触控信号，终端设备除了按上述方法对系统帧号进行解析，得到第一时间F后，除了将更新后的时间显示在显示屏上，终端设备还会发送时间更新完成类似的消息反馈给用户，用以告知用户时间更新完成。本实施例的方法，基站发送的系统帧号携带基站获取的高精度时间的信息，终端设备通过解析系统帧号得到的时间实际上是基站通过内置模块向其它高精度时钟源获取的时间，这个时间与终端设备通过移动网络获取的时间相比，精度高。因此，终端设备更新本地时间后，也提高了时间精度。上述详细阐述了本申请实施例的方法，下面提供了本申请实施例的相关装置。请参见图5，图5是本申请实施例提供的一种时间获取装置的结构示意图，该时间获取装置50可以包括时间获取指令接收单元501、系统帧号解析单元502和时间更新单元503，其中，各个单元的详细描述如下：时间获取指令接收单元501，用于接收时间获取指令；系统帧号解析单元502，用于响应所述时间获取指令，通过解析基站发送的有效系统帧号，得到第一时间F；时间更新单元503，用于将所述终端设备本地时间更新为所述第一时间F。在一种可能的实现方式中，所述时间获取装置还可以包括：网络时间获取单元504，用于通过移动网络时间获取作为当前的本地时间。在一种可能的实现方式中，所述时间获取装置还可以包括：触发单元505，用于接收输入的触控信号，该输入控制信号即为时间获取指令。在一种可能的实现方式中，所述时间获取装置还包括：系统帧号判断单元506，用于判断从基站接收到的系统帧号及其子帧号保存时间是否超过时间阈值i，来判断接收到的系统帧号及其子帧号的有效性。在一种可能的实现方式中，所述时间获取装置还包括：系统帧号循环次数计算单元507，用于计算从所述绝对时间开始到终端设备本地时间，系统帧号所循环的次数X，包括：X＝floor{/h*z}；其中，所述h为系统帧号循环一次的帧数；所述z为一个系统帧对应的长度，所述z以毫秒为单位；所述C为从所述绝对时间开始到所述终端设备的调整时间的时长，所述C以毫秒为单位；所述调整时间为所述终端设备的本地时间加上第一时长的k的时间；所述第一时长k为所述终端设备的本地时间与所述第一时间F的误差范围。请参见图6，图6是本申请实施例提供的一种时间获取装置的系统帧号解析单元的结构示意图，该系统帧号解析单元502包括第一解析单元5021、第二解析单元5022和结合单元5023，其中各个单元详细描述如下：第一解析单元5021，用于基于绝对时间，以及从绝对时间开始到终端设备本地时间，系统帧号所循环的次数，得到第二时间F1，其函数表达式为F1＝S+X*h*z；其中，S为绝对时间，S以毫秒为单位；X为从绝对时间开始到终端设备本地时间系统帧号所循环的次数；h为系统帧号循环一次的帧数；z为一个系统帧对应的长度，z以毫秒为单位。第二解析单元5022，用于基于一个系统帧的长度以及接收到的基站发送的有效系统帧号，得到第三时间F2，其函数表达式为F2＝Framenumber*z；结合单元5023，用于基于第二时间F1和所述第三时间F2，得到的系统帧号对应的时间。可以理解的是，时间获取装置50中各个单元的描述还可以对应时间获取方法的实施例，这里不再一一详述。请参见图7，图7是本申请实施例提供的一种终端设备的结构示意图，该终端设备70可以包括处理器701和存储器702，其中，各个单元的详细描述如下。存储器702用于存储程序代码，存储器702可以是只读存储器或可存储静态信息和指令的其它类型的静态存储设备，随机存储器或者可存储信息和指令的其它类型的动态存储设备，也可以是电可擦可编程只读存储器、只读光盘或其它光盘存储、光碟存储、磁盘存储介质或者其它磁存储设备、或者能够用于携带或存储具有指令或数据结构形式的期望的程序代码并能够由计算机存取的任何其它介质，但不限于于此。存储器可以是独立存在，通过总线于处理器相连接。存储器可以和处理器集成在一起。处理器701用于调用存储器存储的程序代码执行如下步骤：接收时间获取指令；响应所述时间获取指令，通过解析接收到的基站发送的有效系统帧号，得到第一时间F；将本地时间更新为所述第一时间F。处理器701可以是通用中央处理器，微处理器，特定应用集成电路，或一个或多个用于控制以上方案程序执行的集成电路。在一种可能的实现方式中，处理器701，还用于：基于绝对时间以及从所述绝对时间开始到所述终端设备本地时间，系统帧号所循环的次数，得到第二时间F1；基于一个系统帧的长度以及接收到的基站发送的所述有效系统帧号，得到第三时间F2；结合所述第二时间F1和所述第三时间F2，得到所述第一时间F。在一种可能的实现方式中，处理器701，还用于：根据从所述绝对时间开始到所述终端设备的调整时间的时长、所述有效系统帧号，得到从所述绝对时间开始到所述终端设备本地时间系统帧号所循环的次数X，X的计算公式为：X＝floor{/h*z}；其中，所述C为从所述绝对时间开始到所述终端设备的调整时间的时长，所述C以毫秒为单位；所述调整时间为所述终端设备的本地时间加上第一时长的k的时间；所述第一时长k为所述终端设备的本地时间与所述第一时间F的误差范围；Framenumber为所述有效系统帧号；所述h为系统帧号循环一次的帧数；所述z为一个系统帧对应的长度，所述z以毫秒为单位。在一种可能的实现方式中，处理器701，还用于：根据公式F1＝S+X*h*z，得到所述第二时间F1；其中S为绝对时间，所述S以毫秒为单位；根据公式F2＝Framenumber*z得到所述第三时间F2；根据公式F＝F1+F2，得到所述第一时间。在一种可能的实现方式中，处理器701，还用于：根据公式F1＝S+X*h*z，得到所述第二时间F1；根据公式F2＝Framenumber*z得到所述第三时间F2；根据公式F3＝Subframenumber*y，得到所述第四时间F3；其中，Subframenumber为所述有效系统子帧号；y为所述系统子帧对应的长度，所述y以毫秒为单位。根据公式F＝F1+F2+F3，得到所述第一时间。在一种可能的实现方式中，处理器701，还用于：判断接收到的系统帧号的保存时长是否超过时间阈值，所述有效系统帧号为保存时长不超过所述时间阈值的系统帧号。需要说明的是，本申请实施例中所描述的终端设备70中各功能单元的功能可参见上述图2中所述的方法实施例中步骤S201-S206的相关描述，此处不再赘述。本申请实施例还提供一种计算机可读存储介质，其中，该计算机可读存储介质可存储有程序，该程序执行时包括上述方法实施例中记载的任意一种时间获取的方法的部分或全部步骤。本申请实施例还提供一种计算机程序，该计算机程序包括指令，当该计算机程序被计算机执行时，使得计算机可以执行任意一种时间获取的方法的部分或全部步骤。需要说明的是，对于前述各方法实施例，为了简单描述，故将其都表达为一系列的动作组合，但是本领域的技术人员应该知悉，本申请并不受所描述的动作顺序的限制，因为依据本申请，某些步骤可能可以采用其它顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于优选实施例，所涉及的动作和模块并不一定是本申请所必须的。在本申请所提供的几个实施例中，应该理解到，所揭露的装置，可通过其它方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如上述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。上述作为分离部件说明的单元可以是或者不是也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，既可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以是两个或两个以上单元集成在一个单元中。上述集成单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。上述集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读存储介质中。基于这样理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例上述方法的全部或部分步骤。其中，前述的存储介质可包括：U盘、移动硬盘、磁碟、光盘、只读存储器或者随机存取存储器等各种可以存储程序代码的介质。以上所述，以上实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围。
