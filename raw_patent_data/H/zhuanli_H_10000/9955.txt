标题title
电机的弱磁控制方法、装置、电机控制器及电机控制系统
摘要abst
本发明公开了一种电机的弱磁控制方法、装置、电机控制器、电机控制系统及介质，方法包括：获取直流母线电压，并确定交流输入电压的相位；根据直流母线电压确定直流母线电压的最大值和最小值，并根据最大值和最小值确定直流母线电压的平均值；根据对电机进行控制的参考电压幅值和平均值确定弱磁平均电流，并根据弱磁平均电流、对电机进行控制的参考电流的限幅值、最大值和最小值、以及交流输入电压的相位确定弱磁补偿电流；根据弱磁平均电流和弱磁补偿电流对电机进行弱磁控制。进而能够跟踪直流母线电压的波动，准确地对电机进行弱磁控制，有利于提高电机的运行范围以及高速运行时的带载能力。
权利要求书clms
1.一种电机的弱磁控制方法，其特征在于，所述方法包括：获取直流母线电压，并确定交流输入电压的相位；根据所述直流母线电压确定所述直流母线电压的最大值和最小值，并根据所述最大值和最小值确定所述直流母线电压的平均值；根据对所述电机进行控制的参考电压幅值和所述平均值确定弱磁平均电流，并根据所述弱磁平均电流、对所述电机进行控制的参考电流的限幅值、所述最大值和最小值、以及所述交流输入电压的相位确定弱磁补偿电流；根据所述弱磁平均电流和所述弱磁补偿电流对所述电机进行弱磁控制。2.根据权利要求1所述的方法，其特征在于，确定交流输入电压的相位，包括：获取所述交流输入电压；通过单相锁相环对所述交流输入电压进行锁相处理，获得所述交流输入电压的相位。3.根据权利要求1所述的方法，其特征在于，根据所述直流母线电压确定所述直流母线电压的最大值和最小值，包括：根据所述直流母线电压计算在二倍频交流电压频率下每个周期的所述直流母线电压的最大值和最小值。4.根据权利要求1-3中任一项所述的方法，其特征在于，所述弱磁平均电流通过以下公式计算：其中，Id_avg表示所述弱磁平均电流，Vdc_avg表示所述平均值，Vs_ref表示所述参考电压幅值，s为拉普拉斯算子，Kp为比例增益系数，Ki为积分系数。5.根据权利要求1-3中任一项所述的方法，其特征在于，所述弱磁补偿电流通过以下公式计算：其中，Id_com表示所述弱磁补偿电流，Vdc_max表示所述最大值，Vdc_min表示所述最小值，Id_avg表示所述弱磁平均电流，Id_lim表示所述参考电流的限幅值，θac表示所述交流输入电压的相位。6.根据权利要求1-3中任一项所述的方法，其特征在于，根据所述弱磁平均电流和所述弱磁补偿电流对所述电机进行弱磁控制，包括：计算所述弱磁平均电流与所述弱磁补偿电流之间的差值，作为弱磁控制电流；根据所述弱磁控制电流对所述电机进行弱磁控制。7.根据权利要求1-3中任一项所述的方法，其特征在于，所述参考电流的限幅值根据以下步骤确定：确定所述参考电流；将所述参考电流的幅值限制到预设幅值，以作为所述参考电流的限幅值。8.一种计算机可读存储介质，其特征在于，其上存储有电机的弱磁控制程序，该电机的弱磁控制程序被处理器执行时实现如权利要求1-7中任一项所述的电机的弱磁控制方法。9.一种电机控制器，其特征在于，包括存储器、处理器及存储在存储器上并可在处理器上运行的电机的弱磁控制程序，所述处理器执行所述电机的弱磁控制程序时，实现如权利要求1-7中任一项所述的电机的弱磁控制方法。10.一种电机的弱磁控制装置，其特征在于，所述装置包括：获取模块，用于获取直流母线电压；第一确定模块，用于确定交流输入电压的相位；第二确定模块，用于根据所述直流母线电压确定所述直流母线电压的最大值和最小值，并根据所述最大值和最小值确定所述直流母线电压的平均值；第三确定模块，用于根据对所述电机进行控制的参考电压幅值和所述平均值确定弱磁平均电流，并根据所述弱磁平均电流、对所述电机进行控制的参考电流的限幅值、所述最大值和最小值、以及所述交流输入电压的相位确定弱磁补偿电流；控制模块，用于根据所述弱磁平均电流和所述弱磁补偿电流对所述电机进行弱磁控制。11.一种电机控制系统，其特征在于，包括：第一电压检测电路，用于检测直流母线电压；第二电压检测电路，用于检测交流输入电压；电机控制器，用于根据所述交流输入电压确定所述交流输入电压的相位，并根据所述直流母线电压确定所述直流母线电压的最大值和最小值，以及根据所述最大值和最小值确定所述直流母线电压的平均值；所述电机控制器还用于，根据对所述电机进行控制的参考电压幅值和所述平均值确定弱磁平均电流，并根据所述弱磁平均电流、对所述电机进行控制的参考电流的限幅值、所述最大值和最小值、以及所述交流输入电压的相位确定弱磁补偿电流，以及根据所述弱磁平均电流和所述弱磁补偿电流对所述电机进行弱磁控制。12.根据权利要求11所述的系统，其特征在于，所述电机控制器通过单相锁相环对所述交流输入电压进行锁相处理，获得所述交流输入电压的相位。13.根据权利要求11所述的系统，其特征在于，所述电机控制器还用于，根据所述直流母线电压计算在二倍频交流电压频率下每个周期的所述直流母线电压的最大值和最小值。14.根据权利要求11-13中任一项所述的系统，其特征在于，所述电机控制器通过以下公式计算所述弱磁平均电流：其中，Id_avg表示所述弱磁平均电流，Vdc_avg表示所述平均值，Vs_ref表示所述参考电压幅值，s为拉普拉斯算子，Kp为比例增益系数，Ki为积分系数。15.根据权利要求11-13中任一项所述的系统，其特征在于，所述电机控制器通过以下公式计算所述弱磁补偿电流：其中，Id_com表示所述弱磁补偿电流，Vdc_max表示所述最大值，Vdc_min表示所述最小值，Id_avg表示所述弱磁平均电流，Id_lim表示所述参考电流的限幅值，θac表示所述交流输入电压的相位。16.根据权利要求11-13中任一项所述的系统，其特征在于，所述电机控制器还用于，计算所述弱磁平均电流与所述弱磁补偿电流之间的差值，作为弱磁控制电流；根据所述弱磁控制电流对所述电机进行弱磁控制。
说明书desc
技术领域本发明涉及电机控制技术领域，尤其涉及一种电机的弱磁控制方法、装置、电机控制器、电机控制系统及介质。背景技术在无电解电容的电机控制系统中，采用小容量薄膜电容代替电解电容，由于薄膜电容难以维持直流母线电压恒定，直流母线电压将以电网频率二倍频波动，当直流母线电压跌落到较低水平时，需要通过弱磁控制提高电机的输出能力。相关技术中的弱磁控制策略基于直流母线电压反馈弱磁，在直流母线电压波动时，由于比例积分调节器响应较慢，无法及时响应直流母线电压的波动，导致高速运行时弱磁控制困难，电机高速运行时带载能力弱。因此，优化无电解电容电机控制系统中的弱磁控制策略，对于提高电机的运行范围以及高速运行时的带载能力，具有工程和实践意义。发明内容本发明旨在至少在一定程度上解决相关技术中的技术问题之一。为此，本发明的一个目的在于提出一种电机的弱磁控制方法，该弱磁控制方法优化了无电解电容的电机控制系统中的弱磁控制策略，能够在直流母线电压周期性跌落时准确进行弱磁控制，能够提升电机高速运行时的带载能力。本发明的第二个目的在于提出一种计算机可读存储介质。本发明的第三个目的在于提出一种电机控制器。本发明的第四个目的在于提出一种电机的弱磁控制装置。本发明的第五个目的在于提出一种电机控制系统。为达上述目的，本发明第一方面实施例提出了一种电机的弱磁控制方法，该方法包括：获取直流母线电压，并确定交流输入电压的相位；根据所述直流母线电压确定所述直流母线电压的最大值和最小值，并根据所述最大值和最小值确定所述直流母线电压的平均值；根据对所述电机进行控制的参考电压幅值和所述平均值确定弱磁平均电流，并根据所述弱磁平均电流、对所述电机进行控制的参考电流的限幅值、所述最大值和最小值、以及所述交流输入电压的相位确定弱磁补偿电流；根据所述弱磁平均电流和所述弱磁补偿电流对所述电机进行弱磁控制。根据本发明实施例的电机的弱磁控制方法，能够跟踪直流母线电压的波动，准确地对电机进行弱磁控制，有利于提高电机的运行范围以及高速运行时的带载能力。在一个实施例中，确定交流输入电压的相位，包括：获取所述交流输入电压；通过单相锁相环对所述交流输入电压进行锁相处理，获得所述交流输入电压的相位。在一个实施例中，根据所述直流母线电压确定所述直流母线电压的最大值和最小值，包括：根据所述直流母线电压计算在二倍频交流电压频率下每个周期的所述直流母线电压的最大值和最小值。在一个实施例中，所述弱磁平均电流通过以下公式计算：其中，Id_avg表示所述弱磁平均电流，Vdc_avg表示所述平均值，Vs_ref表示所述参考电压幅值，s为拉普拉斯算子，Kp为比例增益系数，Ki为积分系数。在一个实施例中，所述弱磁补偿电流通过以下公式计算：其中，Id_com表示所述弱磁补偿电流，Vdc_max表示所述最大值，Vdc_min表示所述最小值，Id_avg表示所述弱磁平均电流，Id_lim表示所述参考电流的限幅值，θac表示所述交流输入电压的相位。在一个实施例中，根据所述弱磁平均电流和所述弱磁补偿电流对所述电机进行弱磁控制，包括：计算所述弱磁平均电流与所述弱磁补偿电流之间的差值，作为弱磁控制电流；根据所述弱磁控制电流对所述电机进行弱磁控制。在一个实施例中，所述参考电流的限幅值根据以下步骤确定：确定所述参考电流；将所述参考电流的幅值限制到预设幅值，以作为所述参考电流的限幅值。为达上述目的，本发明第二方面实施例提出了一种计算机可读存储介质，其上存储有电机的弱磁控制程序，该电机的弱磁控制程序被处理器执行时实现上述任一实施例的电机的弱磁控制方法。根据本发明实施例的计算机可读存储介质，能够跟踪直流母线电压的波动，准确地对电机进行弱磁控制，有利于提高电机的运行范围以及高速运行时的带载能力。为达上述目的，本发明第三方面实施例提出了一种电机控制器，电机控制器包括存储器、处理器及存储在存储器上并可在处理器上运行的电机的弱磁控制程序，所述处理器执行所述电机的弱磁控制程序时，实现上述任一实施例的电机的弱磁控制方法。根据本发明实施例的电机控制器，能够跟踪直流母线电压的波动，准确地对电机进行弱磁控制，有利于提高电机的运行范围以及高速运行时的带载能力。为达上述目的，本发明第四方面实施例提出了一种电机的弱磁控制装置，该装置包括获取模块、第一确定模块、第二确定模块、第三确定模块和控制模块。获取模块用于获取直流母线电压。第一确定模块用于确定交流输入电压的相位。第二确定模块用于根据所述直流母线电压确定所述直流母线电压的最大值和最小值，并根据所述最大值和最小值确定所述直流母线电压的平均值。第三确定模块用于根据对所述电机进行控制的参考电压幅值和所述平均值确定弱磁平均电流，并根据所述弱磁平均电流、对所述电机进行控制的参考电流的限幅值、所述最大值和最小值、以及所述交流输入电压的相位确定弱磁补偿电流。控制模块用于根据所述弱磁平均电流和所述弱磁补偿电流对所述电机进行弱磁控制。根据本发明实施例的电机的弱磁控制装置，能够跟踪直流母线电压的波动，准确地对电机进行弱磁控制，有利于提高电机的运行范围以及高速运行时的带载能力。为达上述目的，本发明第五方面实施例提出了一种电机控制系统，电机控制系统包括第一电压检测电路、第二电压检测电路和电机控制器。第一电压检测电路用于检测直流母线电压。第二电压检测电路用于检测交流输入电压。电机控制器用于根据所述交流输入电压确定所述交流输入电压的相位，并根据所述直流母线电压确定所述直流母线电压的最大值和最小值，以及根据所述最大值和最小值确定所述直流母线电压的平均值。所述电机控制器还用于根据对所述电机进行控制的参考电压幅值和所述平均值确定弱磁平均电流，并根据所述弱磁平均电流、对所述电机进行控制的参考电流的限幅值、所述最大值和最小值、以及所述交流输入电压的相位确定弱磁补偿电流，以及根据所述弱磁平均电流和所述弱磁补偿电流对所述电机进行弱磁控制。根据本发明实施例的电机控制系统，能够跟踪直流母线电压的波动，准确地对电机进行弱磁控制，有利于提高电机的运行范围以及高速运行时的带载能力。在一个实施例中，所述电机控制器通过单相锁相环对所述交流输入电压进行锁相处理，获得所述交流输入电压的相位。在一个实施例中，所述电机控制器还用于，根据所述直流母线电压计算在二倍频交流电压频率下每个周期的所述直流母线电压的最大值和最小值。在一个实施例中，所述电机控制器通过以下公式计算所述弱磁平均电流：其中，Id_avg表示所述弱磁平均电流，Vdc_avg表示所述平均值，Vs_ref表示所述参考电压幅值，s为拉普拉斯算子，Kp为比例增益系数，Ki为积分系数。在一个实施例中，所述电机控制器通过以下公式计算所述弱磁补偿电流：其中，Id_com表示所述弱磁补偿电流，Vdc_max表示所述最大值，Vdc_min表示所述最小值，Id_avg表示所述弱磁平均电流，Id_lim表示所述参考电流的限幅值，θac表示所述交流输入电压的相位。在一个实施例中，所述电机控制器还用于，计算所述弱磁平均电流与所述弱磁补偿电流之间的差值，作为弱磁控制电流；根据所述弱磁控制电流对所述电机进行弱磁控制。本发明附加的方面和优点将在下面的描述中部分给出，部分将从下面的描述中变得明显，或通过本发明的实践了解到。附图说明本申请的上述和/或附加的方面和优点从结合下面附图对实施方式的描述中将变得明显和容易理解，其中：图1是根据本发明一个实施例的电机的弱磁控制方法的流程示意图；图2是根据本发明另一个实施例的电机的弱磁控制方法的流程示意图；图3是根据本发明又一个实施例的电机的弱磁控制方法的流程示意图；图4是根据本发明再一个实施例的电机的弱磁控制方法的流程示意图；图5是根据本发明一个实施例的电机控制器的结构框图；图6是根据本发明一个实施例的电机的弱磁控制装置的结构框图；图7是根据本发明一个实施例的电机控制系统的结构框图。具体实施方式下面详细描述本发明的实施例，实施例的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施例是示例性的，旨在用于解释本发明，而不能理解为对本发明的限制。为清楚说明本发明实施例的电机的弱磁控制方法、装置、电机控制器、电机控制系统及介质，下面结合图1所示的电机的弱磁控制方法的流程示意图进行描述。如图1所示，本申请实施例的电机的弱磁控制方法包括以下步骤：S11：获取直流母线电压，并确定交流输入电压的相位；S13：根据直流母线电压确定直流母线电压的最大值和最小值，并根据最大值和最小值确定直流母线电压的平均值；S15：根据对电机进行控制的参考电压幅值和平均值确定弱磁平均电流，并根据弱磁平均电流、对电机进行控制的参考电流的限幅值、最大值和最小值、以及交流输入电压的相位确定弱磁补偿电流；S17：根据弱磁平均电流和弱磁补偿电流对电机进行弱磁控制。根据本发明实施例的电机的弱磁控制方法，能够跟踪直流母线电压的波动，准确地对电机进行弱磁控制，有利于提高电机的运行范围以及高速运行时的带载能力。可以理解，在直流母线电压是直流量的情况下，采用同样是直流量的弱磁控制电流对直流母线电压进行跟踪，可以达到较好的弱磁控制效果。而在直流母线电压波动时，可以采用保持弱磁控制电流与直流母线电压一起波动的方式进行弱磁控制，从而达到较好的弱磁控制效果。在相关技术中，首先，实时获取当前直流母线电压和参考电压幅值，然后，计算当前直流母线电压和参考电压幅值的差值，最后，采用比例积分调节器直接对该差值进行比例积分处理以得到用于对电机实施弱磁控制的弱磁控制电流。但是，在当前直流母线电压波动时，由于比例积分调节器响应较慢，无法及时响应直流母线电压的波动。也即是说，相关技术中的弱磁控制策略无法及时确定弱磁控制电流，在相关技术中，存在高速运行时难以准确进行电机的弱磁控制的技术问题。而在本发明实施例的弱磁控制方法中，不采用比例积分调节器直接对当前直流母线电压和参考电压幅值的差值进行比例积分处理的方式对电机实施弱磁控制，而是根据直流母线电压的平均值和参考电压幅值计算弱磁平均电流，然后采用弱磁补偿电流对弱磁平均电流进行调整从而得到用于对电机实施弱磁控制的弱磁控制电流，由于弱磁补偿电流能够实时与直流母线电压一起波动，根据弱磁补偿电流得到的弱磁控制电流也可以实时与直流母线电压一起波动，因此本发明实施例的弱磁控制方法能够准确跟踪直流母线电压的波动，进而保证弱磁控制效果。具体地，电机可包括永磁同步电机。可以理解，永磁同步电机在高速运行时，永磁同步电机的永磁体对应有磁链，由于永磁同步电机的转速等于控制电压除以磁链，如果磁链过大，那么在控制电压有限的情况下，永磁同步电机的转速无法继续提升。为了减小磁链，可以在永磁同步电机的d轴注入负值的弱磁控制电流，这个弱磁控制电流可以减小永磁同步电机整体的磁链的幅值，从而达到弱磁控制的效果；同时，由于磁链减小，永磁同步电机的转速可以提升，也即永磁同步电机的运行范围得到提高；进一步地，由于电机的转矩输出能力与永磁同步电机的q轴电流有关，在d轴注入负值的弱磁控制电流之后，q轴电流的输出范围可以增大，从而可以提高永磁同步电机的转矩输出能力，也即提升永磁同步电机高速运行时的带载能力。直流母线电压，可以理解为网侧交流电压经整流后提供给逆变器驱动电机的母线电压，也即无电解电容的电机控制系统中薄膜电容或者陶瓷电容两端的电压。在某些实施例中，可以通过第一电压检测电路实时采集直流母线电压。第一电压检测电路可以通过集成在PCB板上的一些模块/元器件构成。交流输入电压，可以理解为经过电路端口滤波后的实时网侧交流输入电压。可以按照预设采样频率对直流母线电压的电压值进行采集，以获得多个直流母线电压的电压值。在获得多个直流母线电压的电压值之后，可以通过计算的方式获得多个直流母线电压中的最大值和最小值。直流母线电压的平均值可通过以下公式进行计算：Vdc_avg＝/2，其中，Vdc_avg表示直流母线电压的平均值，Vdc_max表示直流母线电压的最大值，Vdc_min表示直流母线电压的最小值。参考电压幅值，可以理解为电机的控制过程中生成的电压控制指令中的参数。可以理解，在某些实施方式中，通过控制d轴电流和控制q轴电流的方式控制电机，而在控制d轴电流和q轴电流之前需要生成电压控制指令，进而在生成电压控制指令之后根据电压控制指令控制d轴电流和q轴电流以控制电机运行。在电机运行过程中，参考电压幅值是动态变化的、实时生成的，可以通过模块间的数据交流直接确定当前时刻的参考电压幅值。在某些实施例中，参考电压幅值可以通过以下公式进行计算：其中，Vs_ref为参考电压幅值，Ud表示d轴电压，Uq表示q轴电压。在某些实施例中，参考电压幅值可以通过空间矢量调制进行调节。参考电流的限幅值，可以理解为弱磁控制电流能够达到的最小的负值。参考电流的限幅值由电机自身的属性决定，可以理解为电机的特征电流，每个电机的参考电流的限幅值可能不同。在某些实施例中，参考电流的限幅值可以根据永磁同步电机的永磁体磁链和d轴电感确定。请参阅图2，图2为本发明一个实施例的电机的弱磁控制方法的流程示意图，在一个实施例中，步骤S11中的“确定交流输入电压的相位”包括：S21：获取交流输入电压；S23：通过单相锁相环对交流输入电压进行锁相处理，获得交流输入电压的相位。如此，能够方便快速地得到交流输入电压的相位。具体地，在某些实施例中，可以通过第二电压检测电路实时采集交流输入电压。可以理解的是，在其他实施例中，还可以通过插值和过零点检测等方法实时获取交流输入电压的相位，在此不作限定。在一个实施例中，步骤S13中的“根据直流母线电压确定直流母线电压的最大值和最小值”包括：根据直流母线电压计算在二倍频交流电压频率下每个周期的直流母线电压的最大值和最小值。如此，可以基于直流母线电压的最小值和直流母线电压的最大值获得基本恒定的直流母线电压的平均值。可以理解，在无电解电容的电机控制系统中，直流母线电压是按照二倍于电网交流输入电压频率进行波动的，在每个周期内，直流母线电压的最小值基本相同，并且直流母线电压的最大值也基本相同，这样，根据每个周期内的最小值和最大值确定的直流母线电压也基本相等。在一个例子中，直流母线电压的最大值Vdc_max可以通过以下公式进行计算：Vdc_max＝max，其中，max可以理解为用于求取最大值的函数，Vdc表示在二倍频交流电压频率下采集的直流母线电压。直流母线电压的最小值Vdc_min可以通过以下公式进行计算：Vdc_min＝min，其中，min可以理解为用于求取最小值的函数，Vdc表示在二倍频交流电压频率下采集的直流母线电压。在一个例子中，可以对采集到的一个周期内的多个直流母线电压进行排序，然后确定多个直流母线电压中的最小值和最大值。在一个例子中，电网交流输入电压频率为50Hz，则二倍频交流电压频率为100Hz。在一个实施例中，弱磁平均电流通过以下公式计算：其中，Id_avg表示弱磁平均电流，Vdc_avg表示平均值，Vs_ref表示参考电压幅值，s为拉普拉斯算子，Kp为比例增益系数，Ki为积分系数。如此，采用比例积分调节器对直流母线电压的平均值和参考电压幅值的差值进行比例积分处理，可以快速、稳定的得到弱磁平均电流。可以理解，在相关技术中，采用比例积分调节器直接对当前直流母线电压和参考电压幅值的差值进行比例积分处理，并将处理得到的电流值直接用于弱磁控制，由于当前直流母线电压是波动的，比例积分调节器的响应较慢，无法实时跟踪当前直流母线电压的波动，导致弱磁控制效果较差，而在本发明的技术方案中，考虑线性调制的情况，采用比例积分调节器对倍的直流母线电压的平均值和参考电压幅值的差值进行比例积分处理，并将处理得到的电流值作为弱磁平均电流，由于直流母线电压的平均值基本不变，比例积分调节器的响应迅速，可以快速得到弱磁平均电流。弱磁平均电流相当于求出的偏置。计算得到的弱磁平均电流是负值。弱磁平均电流可以理解为直流量，可以理解为一条平线，进一步地，本发明的目的在于将这条平线转化为正弦的形状，从而实现与直流母线电压一起波动。上述比例增益系数Kp和积分系数Ki可以预先人为设置或者通过实验进行标定，从而在计算弱磁平均电流时，可以直接读取存储的相关数据以确定比例增益系数Kp和积分系数Ki，并快速计算出弱磁平均电流。在一个实施例中，弱磁补偿电流通过以下公式计算：其中，Id_com表示弱磁补偿电流，Vdc_max表示最大值，Vdc_min表示最小值，Id_avg表示弱磁平均电流，Id_lim表示参考电流的限幅值，θac表示交流输入电压的相位。如此，在弱磁平均电流的基础上乘以电压系数和相位系数，将原本的直线转化成电压频率为100Hz的波形，从而有利于对直流母线电压的波动进行跟踪。具体地，1-|sinθac|可以看作相位系数，θac从0°至180°变化，可以将直线转化为正弦曲线。可以看作电压系数，电压系数可以决定正弦曲线的上下限，电压系数与直流母线电压的最小值和直流母线电压的最小值相关。弱磁平均电流不会低于参考电流的限幅值，若弱磁平均电流达到参考电流的限幅值，即弱磁平均电流等于参考电流的限幅值，则弱磁补偿电流等于零。请参阅图3，图3为本发明一个实施例的电机的弱磁控制方法的流程示意图，在一个实施例中，步骤S17包括：S171：计算弱磁平均电流与弱磁补偿电流之间的差值，作为弱磁控制电流；S173：根据弱磁控制电流对电机进行弱磁控制。如此，在直流母线电压波动时弱磁控制电流能够准确跟踪，有利于提高电机的运行范围以及高速运行时的带载能力。具体地，弱磁控制电流为负值，将弱磁控制电流设置为电机的d轴电流，可以对电机实施弱磁控制。在某些实施例中，弱磁控制电流可通过以下公式进行计算：Id_fw＝Id_avg-Id_com，其中，Id_fw为弱磁控制电流，Id_avg为弱磁平均电流，Id_com为弱磁补偿电流。可以理解，采用弱磁平均电流减去弱磁补偿电流以得到弱磁控制电流，可以保证得到的弱磁控制电流为负值。在一个例子中，在弱磁补偿电流的电压系数和相位系数均取最大值的情况下，弱磁补偿电流即等于弱磁平均电流减去参考电流的限幅值，进而采用弱磁平均电流减去弱磁补偿电流，可得到弱磁控制电流等于参考电流的限幅值。请参阅图4，图4为本发明一个实施例的电机的弱磁控制方法的流程示意图，在一个实施例中，参考电流的限幅值根据以下步骤确定：S31：确定参考电流；S33：将参考电流的幅值限制到预设幅值，以作为参考电流的限幅值。具体地，若参考电流的幅值小于预设阈值，则将参考电流的幅值调整为预设阈值；若参考电流的幅值大于等于预设阈值，则保持参考电流的幅值不变。为了实现上述实施例，本发明实施例还提出一种计算机可读存储介质，其上存储有电机的弱磁控制程序，该电机的弱磁控制程序被处理器执行时实现上述任一实施例的电机的弱磁控制方法。根据本发明实施例的计算机可读存储介质，能够跟踪直流母线电压的波动，准确地对电机进行弱磁控制，有利于提高电机的运行范围以及高速运行时的带载能力。在一个例子中，在处理器执行该程序的情况下，能够实现上述步骤S11、步骤S13、步骤S15和步骤S17。在一个例子中，在处理器执行该程序的情况下，能够实现上述步骤S21和步骤S23。在一个例子中，在处理器执行该程序的情况下，能够实现上述步骤S171和步骤S173。在一个例子中，在处理器执行该程序的情况下，能够实现上述步骤S31和步骤S33。为了实现上述实施例，本发明实施例还提出一种电机控制器，图5是根据本发明一个实施例的电机控制器的结构示意图。如图5所示，本发明提出的电机控制器10包括存储器12、处理器14及存储在存储器12上并可在处理器14上运行的电机的弱磁控制程序16，处理器14执行电机的弱磁控制程序16时，实现上述任一实施例的电机的弱磁控制方法。根据本发明实施例的电机控制器10，能够跟踪直流母线电压的波动，准确地对电机进行弱磁控制，有利于提高电机的运行范围以及高速运行时的带载能力。在一个例子中，在处理器14执行该程序16的情况下，能够实现上述步骤S11、步骤S13、步骤S15和步骤S17。在一个例子中，在处理器14执行该程序16的情况下，能够实现上述步骤S21和步骤S23。在一个例子中，在处理器14执行该程序16的情况下，能够实现上述步骤S171和步骤S173。在一个例子中，在处理器14执行该程序16的情况下，能够实现上述步骤S31和步骤S33。需要指出的是，上述对弱磁控制方法的实施方式和有益效果的解释说明，也适应本发明的电机控制器10，为避免冗余，在此不作详细展开。为了实现上述实施例，本发明实施例还提出一种电机的弱磁控制装置，图6是根据本发明一个实施例的电机的弱磁控制装置的结构示意图。如图6所示，本发明提出的电机的弱磁控制装置20包括获取模块21、第一确定模块23、第二确定模块25、第三确定模块27和控制模块29。获取模块21用于获取直流母线电压。第一确定模块23用于确定交流输入电压的相位。第二确定模块25用于根据直流母线电压确定直流母线电压的最大值和最小值，并根据最大值和最小值确定直流母线电压的平均值。第三确定模块27用于根据对电机进行控制的参考电压幅值和平均值确定弱磁平均电流，并根据弱磁平均电流、对电机进行控制的参考电流的限幅值、最大值和最小值、以及交流输入电压的相位确定弱磁补偿电流。控制模块29用于根据弱磁平均电流和弱磁补偿电流对电机进行弱磁控制。根据本发明实施例的电机的弱磁控制装置20，能够跟踪直流母线电压的波动，准确地对电机进行弱磁控制，有利于提高电机的运行范围以及高速运行时的带载能力。可以理解，在直流母线电压是直流量的情况下，采用同样是直流量的弱磁控制电流对直流母线电压进行跟踪，可以达到较好的弱磁控制效果。而在直流母线电压波动时，可以采用保持弱磁控制电流与直流母线电压一起波动的方式进行弱磁控制，从而达到较好的弱磁控制效果。在相关技术中，首先，实时获取当前直流母线电压和参考电压幅值，然后，计算当前直流母线电压和参考电压幅值的差值，最后，采用比例积分调节器直接对该差值进行比例积分处理以得到用于对电机实施弱磁控制的弱磁控制电流。但是，在当前直流母线电压波动时，由于比例积分调节器响应较慢，无法及时响应直流母线电压的波动。也即是说，相关技术中的弱磁控制装置无法及时确定弱磁控制电流，在相关技术中，存在高速运行时难以准确进行电机的弱磁控制的技术问题。而在本发明实施例的弱磁控制装置20中，不采用比例积分调节器直接对当前直流母线电压和参考电压幅值的差值进行比例积分处理的方式对电机实施弱磁控制，而是根据直流母线电压的平均值和参考电压幅值计算弱磁平均电流，然后采用弱磁补偿电流对弱磁平均电流进行调整从而得到用于对电机实施弱磁控制的弱磁控制电流，由于弱磁补偿电流能够实时与直流母线电压一起波动，根据弱磁补偿电流得到的弱磁控制电流也可以实时与直流母线电压一起波动，因此本发明实施例的弱磁控制装置能够准确跟踪直流母线电压的波动，进而保证弱磁控制效果。具体地，电机可包括永磁同步电机。可以理解，永磁同步电机在高速运行时，永磁同步电机的永磁体对应有磁链，由于永磁同步电机的转速等于控制电压除以磁链，如果磁链过大，那么在控制电压有限的情况下，永磁同步电机的转速无法继续提升。为了减小磁链，可以在永磁同步电机的d轴注入负值的弱磁控制电流，这个弱磁控制电流可以减小永磁同步电机整体的磁链的幅值，从而达到弱磁控制的效果；同时，由于磁链减小，永磁同步电机的转速可以提升，也即永磁同步电机的运行范围得到提高；进一步地，由于电机的转矩输出能力与永磁同步电机的q轴电流有关，在d轴注入负值的弱磁控制电流之后，q轴电流的输出范围可以增大，从而可以提高永磁同步电机的转矩输出能力，也即提升永磁同步电机高速运行时的带载能力。直流母线电压，可以理解为网侧交流电压经整流后提供给逆变器驱动电机的母线电压，也即无电解电容的电机控制系统中薄膜电容或者陶瓷电容两端的电压。在某些实施例中，可以通过第一电压检测电路实时采集直流母线电压。第一电压检测电路可以通过集成在PCB板上的一些模块/元器件构成。交流输入电压，可以理解为经过电路端口滤波后的实时网侧交流输入电压。可以按照预设采样频率对直流母线电压的电压值进行采集，以获得多个直流母线电压的电压值。在获得多个直流母线电压的电压值之后，可以通过计算的方式获得多个直流母线电压中的最大值和最小值。直流母线电压的平均值可通过以下公式进行计算：Vdc_avg＝/2，其中，Vdc_avg表示直流母线电压的平均值，Vdc_max表示直流母线电压的最大值，Vdc_min表示直流母线电压的最小值。参考电压幅值，可以理解为电机的控制过程中生成的电压控制指令中的参数。可以理解，在某些实施方式中，通过控制d轴电流和控制q轴电流的方式控制电机，而在控制d轴电流和q轴电流之前需要生成电压控制指令，进而在生成电压控制指令之后根据电压控制指令控制d轴电流和q轴电流以控制电机运行。在电机运行过程中，参考电压幅值是动态变化的、实时生成的，可以通过模块间的数据交流直接确定当前时刻的参考电压幅值。在某些实施例中，参考电压幅值可以通过以下公式进行计算：其中，Vs_ref为参考电压幅值，Ud表示d轴电压，Uq表示q轴电压。在某些实施例中，参考电压幅值可以通过空间矢量调制进行调节。参考电流的限幅值，可以理解为弱磁控制电流能够达到的最小的负值。参考电流的限幅值由电机自身的属性决定，可以理解为电机的特征电流，每个电机的参考电流的限幅值可能不同。在某些实施例中，参考电流的限幅值可以根据永磁同步电机的永磁体磁链和d轴电感确定。在一个实施例中，第一确定模块23还用于获取交流输入电压，及用于通过单相锁相环对交流输入电压进行锁相处理，获得交流输入电压的相位。如此，能够方便快速地得到交流输入电压的相位。具体地，在某些实施例中，可以通过第二电压检测电路实时采集交流输入电压。可以理解的是，在其他实施例中，还可以通过插值和过零点检测等方法实时获取交流输入电压的相位，在此不作限定。在一个实施例中，第二确定模块25还用于根据直流母线电压计算在二倍频交流电压频率下每个周期的直流母线电压的最大值和最小值。如此，可以基于直流母线电压的最小值和直流母线电压的最大值获得基本恒定的直流母线电压的平均值。可以理解，在无电解电容的电机控制系统中，直流母线电压是按照二倍于电网交流输入电压频率进行波动的，在每个周期内，直流母线电压的最小值基本相同，并且直流母线电压的最大值也基本相同，这样，根据每个周期内的最小值和最大值确定的直流母线电压也基本相等。在一个例子中，直流母线电压的最大值Vdc_max可以通过以下公式进行计算：Vdc_max＝max，其中，max可以理解为用于求取最大值的函数，Vdc表示在二倍频交流电压频率下采集的直流母线电压。直流母线电压的最小值Vdc_min可以通过以下公式进行计算：Vdc_min＝min，其中，min可以理解为用于求取最小值的函数，Vdc表示在二倍频交流电压频率下采集的直流母线电压。在一个例子中，可以对采集到的一个周期内的多个直流母线电压进行排序，然后确定多个直流母线电压中的最小值和最大值。在一个例子中，电网交流输入电压频率为50Hz，则二倍频交流电压频率为100Hz。在一个实施例中，第三确定模块27用于通过以下公式计算弱磁平均电流：其中，Id_avg表示弱磁平均电流，Vdc_avg表示平均值，Vs_ref表示参考电压幅值，s为拉普拉斯算子，Kp为比例增益系数，Ki为积分系数。如此，采用比例积分调节器对直流母线电压的平均值和参考电压幅值的差值进行比例积分处理，可以快速、稳定的得到弱磁平均电流。可以理解，在相关技术中，采用比例积分调节器直接对当前直流母线电压和参考电压幅值的差值进行比例积分处理，并将处理得到的电流值直接用于弱磁控制，由于当前直流母线电压是波动的，比例积分调节器的响应较慢，无法实时跟踪当前直流母线电压的波动，导致弱磁控制效果较差，而在本发明的技术方案中，考虑线性调制的情况，采用比例积分调节器对倍的直流母线电压的平均值和参考电压幅值的差值进行比例积分处理，并将处理得到的电流值作为弱磁平均电流，由于直流母线电压的平均值基本不变，比例积分调节器的响应迅速，可以快速得到弱磁平均电流。弱磁平均电流相当于求出的偏置。计算得到的弱磁平均电流是负值。弱磁平均电流可以理解为直流量，可以理解为一条平线，进一步地，本发明的目的在于将这条平线转化为正弦的形状，从而实现与直流母线电压一起波动。上述比例增益系数Kp和积分系数Ki可以预先人为设置或者通过实验进行标定，从而在计算弱磁平均电流时，可以直接读取存储的相关数据以确定比例增益系数Kp和积分系数Ki，并快速计算出弱磁平均电流。在一个实施例中，第三确定模块27用于通过以下公式计算弱磁补偿电流：其中，Id_com表示弱磁补偿电流，Vdc_max表示最大值，Vdc_min表示最小值，Id_avg表示弱磁平均电流，Id_lim表示参考电流的限幅值，θac表示交流输入电压的相位。如此，在弱磁平均电流的基础上乘以电压系数和相位系数，将原本的直线转化成电压频率为100Hz的波形，从而有利于对直流母线电压的波动进行跟踪。具体地，1-|sinθac|可以看作相位系数，θac从0°至180°变化，可以将直线转化为正弦曲线。可以看作电压系数，电压系数可以决定正弦曲线的上下限，电压系数与直流母线电压的最小值和直流母线电压的最小值相关。弱磁平均电流不会低于参考电流的限幅值，若弱磁平均电流达到参考电流的限幅值，即弱磁平均电流等于参考电流的限幅值，则弱磁补偿电流等于零。在一个实施例中，控制模块29包括计算单元和控制单元。计算单元用于计算弱磁平均电流与弱磁补偿电流之间的差值，作为弱磁控制电流。控制单元用于根据弱磁控制电流对电机进行弱磁控制。如此，在直流母线电压波动时弱磁控制电流能够准确跟踪，有利于提高电机的运行范围以及高速运行时的带载能力。具体地，弱磁控制电流为负值，将弱磁控制电流设置为电机的d轴电流，可以对电机实施弱磁控制。在某些实施例中，弱磁控制电流可通过以下公式进行计算：Id_fw＝Id_avg-Id_com，其中，Id_fw为弱磁控制电流，Id_avg为弱磁平均电流，Id_com为弱磁补偿电流。可以理解，采用弱磁平均电流减去弱磁补偿电流以得到弱磁控制电流，可以保证得到的弱磁控制电流为负值。在一个例子中，在弱磁补偿电流的电压系数和相位系数均取最大值的情况下，弱磁补偿电流即等于弱磁平均电流减去参考电流的限幅值，进而采用弱磁平均电流减去弱磁补偿电流，可得到弱磁控制电流等于参考电流的限幅值。在一个实施例中，电机的弱磁控制装置20还包括第四确定模块和限制模块。第四确定模块用于确定参考电流。限制模块用于将参考电流的幅值限制到预设幅值，以作为参考电流的限幅值。具体地，若参考电流的幅值小于预设阈值，则将参考电流的幅值调整为预设阈值；若参考电流的幅值大于等于预设阈值，则保持参考电流的幅值不变。为了实现上述实施例，本发明实施例还提出一种电机控制系统，图7是根据本发明一个实施例的电机控制系统的结构示意图。如图7所示，本发明提出的电机控制系统100包括第一电压检测电路101、第二电压检测电路103和电机控制器105。第一电压检测电路101用于检测直流母线电压。第二电压检测电路103用于检测交流输入电压。电机控制器105用于根据交流输入电压确定交流输入电压的相位，并根据直流母线电压确定直流母线电压的最大值和最小值，以及根据最大值和最小值确定直流母线电压的平均值。电机控制器还用于根据对电机进行控制的参考电压幅值和平均值确定弱磁平均电流，并根据弱磁平均电流、对电机进行控制的参考电流的限幅值、最大值和最小值、以及交流输入电压的相位确定弱磁补偿电流，以及根据弱磁平均电流和弱磁补偿电流对电机进行弱磁控制。根据本发明实施例的电机控制系统100，能够跟踪直流母线电压的波动，准确地对电机进行弱磁控制，有利于提高电机的运行范围以及高速运行时的带载能力。可以理解，在直流母线电压是直流量的情况下，采用同样是直流量的弱磁控制电流对直流母线电压进行跟踪，可以达到较好的弱磁控制效果。而在直流母线电压波动时，可以采用保持弱磁控制电流与直流母线电压一起波动的方式进行弱磁控制，从而达到较好的弱磁控制效果。在相关技术中，首先，实时获取当前直流母线电压和参考电压幅值，然后，计算当前直流母线电压和参考电压幅值的差值，最后，采用比例积分调节器直接对该差值进行比例积分处理以得到用于对电机实施弱磁控制的弱磁控制电流。但是，在当前直流母线电压波动时，由于比例积分调节器响应较慢，无法及时响应直流母线电压的波动。也即是说，相关技术中的电机控制系统无法及时确定弱磁控制电流，在相关技术中，存在高速运行时难以准确进行电机的弱磁控制的技术问题。而在本发明实施例的电机控制系统100中，不采用比例积分调节器直接对当前直流母线电压和参考电压幅值的差值进行比例积分处理的方式对电机实施弱磁控制，而是根据直流母线电压的平均值和参考电压幅值计算弱磁平均电流，然后采用弱磁补偿电流对弱磁平均电流进行调整从而得到用于对电机实施弱磁控制的弱磁控制电流，由于弱磁补偿电流能够实时与直流母线电压一起波动，根据弱磁补偿电流得到的弱磁控制电流也可以实时与直流母线电压一起波动，因此本发明实施例的电机控制系统100能够准确跟踪直流母线电压的波动，进而保证弱磁控制效果。具体地，电机可包括永磁同步电机。可以理解，永磁同步电机在高速运行时，永磁同步电机的永磁体对应有磁链，由于永磁同步电机的转速等于控制电压除以磁链，如果磁链过大，那么在控制电压有限的情况下，永磁同步电机的转速无法继续提升。为了减小磁链，可以在永磁同步电机的d轴注入负值的弱磁控制电流，这个弱磁控制电流可以减小永磁同步电机整体的磁链的幅值，从而达到弱磁控制的效果；同时，由于磁链减小，永磁同步电机的转速可以提升，也即永磁同步电机的运行范围得到提高；进一步地，由于电机的转矩输出能力与永磁同步电机的q轴电流有关，在d轴注入负值的弱磁控制电流之后，q轴电流的输出范围可以增大，从而可以提高永磁同步电机的转矩输出能力，也即提升永磁同步电机高速运行时的带载能力。直流母线电压，可以理解为网侧交流电压经整流后提供给逆变器驱动电机的母线电压，也即无电解电容的电机控制系统中薄膜电容或者陶瓷电容两端的电压。在某些实施例中，可以通过第一电压检测电路实时采集直流母线电压。第一电压检测电路可以通过集成在PCB板上的一些模块/元器件构成。交流输入电压，可以理解为经过电路端口滤波后的实时网侧交流输入电压。可以按照预设采样频率对直流母线电压的电压值进行采集，以获得多个直流母线电压的电压值。在获得多个直流母线电压的电压值之后，可以通过计算的方式获得多个直流母线电压中的最大值和最小值。直流母线电压的平均值可通过以下公式进行计算：Vdc_avg＝/2，其中，Vdc_avg表示直流母线电压的平均值，Vdc_max表示直流母线电压的最大值，Vdc_min表示直流母线电压的最小值。参考电压幅值，可以理解为电机的控制过程中生成的电压控制指令中的参数。可以理解，在某些实施方式中，通过控制d轴电流和控制q轴电流的方式控制电机，而在控制d轴电流和q轴电流之前需要生成电压控制指令，进而在生成电压控制指令之后根据电压控制指令控制d轴电流和q轴电流以控制电机运行。在电机运行过程中，参考电压幅值是动态变化的、实时生成的，可以通过模块间的数据交流直接确定当前时刻的参考电压幅值。在某些实施例中，参考电压幅值可以通过以下公式进行计算：其中，Vs_ref为参考电压幅值，Ud表示d轴电压，Uq表示q轴电压。在某些实施例中，参考电压幅值可以通过空间矢量调制进行调节。参考电流的限幅值，可以理解为弱磁控制电流能够达到的最小的负值。参考电流的限幅值由电机自身的属性决定，可以理解为电机的特征电流，每个电机的参考电流的限幅值可能不同。在某些实施例中，参考电流的限幅值可以根据永磁同步电机的永磁体磁链和d轴电感确定。在一个实施例中，电机控制器105通过单相锁相环对交流输入电压进行锁相处理，获得交流输入电压的相位。如此，能够方便快速地得到交流输入电压的相位。具体地，在某些实施例中，可以通过第二电压检测电路实时采集交流输入电压。可以理解的是，在其他实施例中，还可以通过插值和过零点检测等方法实时获取交流输入电压的相位，在此不作限定。在一个实施例中，电机控制器105还用于，根据直流母线电压计算在二倍频交流电压频率下每个周期的直流母线电压的最大值和最小值。如此，可以基于直流母线电压的最小值和直流母线电压的最大值获得基本恒定的直流母线电压的平均值。可以理解，在无电解电容的电机控制系统中，直流母线电压是按照二倍于电网交流输入电压频率进行波动的，在每个周期内，直流母线电压的最小值基本相同，并且直流母线电压的最大值也基本相同，这样，根据每个周期内的最小值和最大值确定的直流母线电压也基本相等。在一个例子中，直流母线电压的最大值Vdc_max可以通过以下公式进行计算：Vdc_max＝max，其中，max可以理解为用于求取最大值的函数，Vdc表示在二倍频交流电压频率下采集的直流母线电压。直流母线电压的最小值Vdc_min可以通过以下公式进行计算：Vdc_min＝min，其中，min可以理解为用于求取最小值的函数，Vdc表示在二倍频交流电压频率下采集的直流母线电压。在一个例子中，可以对采集到的一个周期内的多个直流母线电压进行排序，然后确定多个直流母线电压中的最小值和最大值。在一个例子中，电网交流输入电压频率为50Hz，则二倍频交流电压频率为100Hz。在一个实施例中，电机控制器105通过以下公式计算弱磁平均电流：其中，Id_avg表示弱磁平均电流，Vdc_avg表示平均值，Vs_ref表示参考电压幅值，s为拉普拉斯算子，Kp为比例增益系数，Ki为积分系数。如此，采用比例积分调节器对直流母线电压的平均值和参考电压幅值的差值进行比例积分处理，可以快速、稳定的得到弱磁平均电流。可以理解，在相关技术中，采用比例积分调节器直接对当前直流母线电压和参考电压幅值的差值进行比例积分处理，并将处理得到的电流值直接用于弱磁控制，由于当前直流母线电压是波动的，比例积分调节器的响应较慢，无法实时跟踪当前直流母线电压的波动，导致弱磁控制效果较差，而在本发明的技术方案中，考虑线性调制的情况，采用比例积分调节器对倍的直流母线电压的平均值和参考电压幅值的差值进行比例积分处理，并将处理得到的电流值作为弱磁平均电流，由于直流母线电压的平均值基本不变，比例积分调节器的响应迅速，可以快速得到弱磁平均电流。弱磁平均电流相当于求出的偏置。计算得到的弱磁平均电流是负值。弱磁平均电流可以理解为直流量，可以理解为一条平线，进一步地，本发明的目的在于将这条平线转化为正弦的形状，从而实现与直流母线电压一起波动。上述比例增益系数Kp和积分系数Ki可以预先人为设置或者通过实验进行标定，从而在计算弱磁平均电流时，可以直接读取存储的相关数据以确定比例增益系数Kp和积分系数Ki，并快速计算出弱磁平均电流。在一个实施例中，电机控制器105通过以下公式计算弱磁补偿电流：其中，Id_com表示弱磁补偿电流，Vdc_max表示最大值，Vdc_min表示最小值，Id_avg表示弱磁平均电流，Id_lim表示参考电流的限幅值，θac表示交流输入电压的相位。如此，在弱磁平均电流的基础上乘以电压系数和相位系数，将原本的直线转化成电压频率为100Hz的波形，从而有利于对直流母线电压的波动进行跟踪。具体地，1-|sinθac|可以看作相位系数，θac从0°至180°变化，可以将直线转化为正弦曲线。可以看作电压系数，电压系数可以决定正弦曲线的上下限，电压系数与直流母线电压的最小值和直流母线电压的最小值相关。弱磁平均电流不会低于参考电流的限幅值，若弱磁平均电流达到参考电流的限幅值，即弱磁平均电流等于参考电流的限幅值，则弱磁补偿电流等于零。在一个实施例中，电机控制器105还用于，计算弱磁平均电流与弱磁补偿电流之间的差值，作为弱磁控制电流；根据弱磁控制电流对电机进行弱磁控制。如此，在直流母线电压波动时弱磁控制电流能够准确跟踪，有利于提高电机的运行范围以及高速运行时的带载能力。具体地，弱磁控制电流为负值，将弱磁控制电流设置为电机的d轴电流，可以对电机实施弱磁控制。在某些实施例中，弱磁控制电流可通过以下公式进行计算：Id_fw＝Id_avg-Id_com，其中，Id_fw为弱磁控制电流，Id_avg为弱磁平均电流，Id_com为弱磁补偿电流。可以理解，采用弱磁平均电流减去弱磁补偿电流以得到弱磁控制电流，可以保证得到的弱磁控制电流为负值。在一个例子中，在弱磁补偿电流的电压系数和相位系数均取最大值的情况下，弱磁补偿电流即等于弱磁平均电流减去参考电流的限幅值，进而采用弱磁平均电流减去弱磁补偿电流，可得到弱磁控制电流等于参考电流的限幅值。本领域内的技术人员应明白，本发明的实施例可提供为方法、系统、或计算机程序产品。因此，本发明可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本发明是参照根据本发明实施例的方法、设备、和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。在本说明书的描述中，参考术语“一个实施例”、“一些实施例”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。此外，本发明实施例中所使用的“第一”、“第二”等术语，仅用于描述目的，而不可以理解为指示或者暗示相对重要性，或者隐含指明本实施例中所指示的技术特征数量。由此，本发明实施例中限定有“第一”、“第二”等术语的特征，可以明确或者隐含地表示该实施例中包括至少一个该特征。在本发明的描述中，词语“多个”的含义是至少两个或者两个及以上，例如两个、三个、四个等，除非实施例中另有明确具体的限定。在本发明中，除非另有明确的规定和限定，第一特征在第二特征“上”或“下”可以是第一和第二特征直接接触，或第一和第二特征通过中间媒介间接接触。而且，第一特征在第二特征“之上”、“上方”和“上面”可是第一特征在第二特征正上方或斜上方，或仅仅表示第一特征水平高度高于第二特征。第一特征在第二特征“之下”、“下方”和“下面”可以是第一特征在第二特征正下方或斜下方，或仅仅表示第一特征水平高度小于第二特征。尽管上面已经示出和描述了本发明的实施例，可以理解的是，上述实施例是示例性的，不能理解为对本发明的限制，本领域的普通技术人员在本发明的范围内可以对上述实施例进行变化、修改、替换和变型。
