标题title
智能家居设备离线控制方法、系统、设备、服务器、介质
摘要abst
本发明提供了智能家居设备离线控制方法、系统、设备、服务器、介质，所述方法应用于智能家居设备组，智能家居设备组包括两台以上的智能家居设备，两台以上的智能家居设备通过路由器实现与设备服务器的通信连接，方法包括：智能家居设备判断其自身与路由器的连接状态；与路由器连接异常的智能家居设备记为离线设备，离线设备监听智能家居设备组内的数据包；与路由器连接正常的智能家居设备记为在线设备，在线设备用于接收设备服务器发送的操作指令，当确认操作指令为转发指令后，将转发指令以数据报文广播的形式给发送给离线设备，以对离线设备进行控制。本发明在目标智能家居设备意外离线的状态下，依然可以通过用户终端进行控制。
权利要求书clms
1.一种智能家居设备离线控制方法，应用于智能家居设备组，其特征在于，所述智能家居设备组包括两台以上的智能家居设备，两台以上的智能家居设备通过路由器联网，实现与设备服务器的通信连接，所述方法包括：智能家居设备判断其自身与路由器的连接状态；与路由器连接异常的智能家居设备记为离线设备，离线设备监听智能家居设备组内的数据包；与路由器连接正常的智能家居设备记为在线设备，所述在线设备用于接收设备服务器发送的操作指令，当确认操作指令为转发指令后，将转发指令以数据报文广播的形式给发送给离线设备，以对离线设备进行控制。2.根据权利要求1所述的一种智能家居设备离线控制方法，其特征在于，包括以下步骤：步骤S1：离线设备进入监听模式，监听空口包，每间隔第一预设时间切换一次信道，进行全信道轮询；步骤S2：在线设备接收到设备服务器发送的操作指令，并判断操作指令是否包括转发指令；步骤S3：若是，在线设备进入监听模式，并进行数据报文广播；步骤S4：所述离线设备监测到在线设备的广播数据包后，判断自身是否是转发指令的目标智能家居设备；步骤S5：若是，离线设备锁定当前信道，并与监测到的在线设备在当前信道进行数据交互，按照操作指令中的功能控制指令执行控制，将执行控制的结果返回给在线设备；步骤S6：所述在线设备接收到离线设备执行控制的结果后，将控制结果返回给设备服务器。3.根据权利要求1所述的一种智能家居设备离线控制方法，其特征在于，所述操作指令为二进制数据，其至少包括由前四位bit组成的第一数据结构，第一数据结构用以表征指令类型。4.根据权利要求3所述的一种智能家居设备离线控制方法，其特征在于，操作指令为N字节长度的二进制数据，其包括第一数据结构，并还包括如下两部分数据结构：第二数据结构，包括指令类型后的若干位bit，用于表征设备识别信息；第三数据结构，包括第二数据结构后的其余bit，用以表征相应功能控制指令。5.一种智能家居设备离线控制方法，应用于设备服务器，其特征在于，所述方法包括：接收用户终端发送的操作命令，并将操作命令转化为包含控制指令的操作指令发送给目标智能家居设备，当包含控制指令的操作指令发送失败或者超时时，将控制指令变更为转发指令，并将包含转发指令的操作指令发送给智能家居设备组里的在线设备，通过包含转发指令的操作指令对目标智能家居设备进行控制。6.如权利要求5所述的智能家居设备离线控制方法，其特征在于，所述方法包括以下步骤：步骤S01：所述设备服务器接收到用户终端发送的操作命令，将其转换为第一操作指令，所述第一操作指令中的指令类型为控制指令；步骤S02：将第一操作指令发送给目标智能家居设备，当发送失败或者超时时，将目标智能家居设备标记为离线设备；步骤S03：查询智能家居设备组内的智能家居设备，并获取在线智能家居设备列表，将在线的智能家居设备标记为在线设备；步骤S04：将第一操作指令或操作命令转换为第二操作指令，所述第二操作指令的指令类型为转发指令；步骤S05：将所述第二操作指令发送至其中一台在线设备，当发送失败或者超时时，将所述第二操作指令转发给另外一台在线设备，直至发送成功；步骤S06：接收在线设备返回的离线设备执行控制的结果，并将控制结果返回给用户终端。7.一种智能家居设备离线控制系统，用于执行如权利要求1-6中任一项所述的方法，其特征在于，所述系统包括：用户终端、设备服务器、智能家居设备组和路由器，所述用户终端与设备服务器通信连接，所述智能家居设备组包括两个以上的智能家居设备，所述智能家居设备通过路由器联网，实现与设备服务器的通信连接。8.一种智能家居设备，其特征在于，包括存储有计算机程序的计算机可读存储介质和处理器，所述计算机程序被所述处理器读取并运行时，实现如权利要求1-4中任一项所述的方法。9.一种设备服务器，其特征在于，包括存储有计算机程序的计算机可读存储介质和处理器，所述计算机程序被所述处理器读取并运行时，实现如权利要求5或6所述的方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机程序，所述计算机程序被处理器读取并运行时，实现如权利要求1-4中任一项所述的方法，和/或，实现如权利要求5或6所述的方法。
说明书desc
技术领域本发明涉及智能家居设备控制技术领域，具体而言，涉及智能家居设备离线控制方法、系统、设备、服务器、介质。背景技术智能家居设备通过家庭wifi路由器实现联网，通过用户终端进行控制，极大化地方便了用户的远程操控，但由于距离或信号或其他因素，智能家居设备经常与服务器断开连接，虽然智能家居设备设置有自动重连机制，但是如果多次连接失败，智能家居设备将处于离线状态，无法通过用户终端控制，需要人为将其重新加入家庭网络才可恢复控制，严重影响用户的使用体验。发明内容本发明要解决的技术问题是，现有技术中，智能家居设备处于离线状态时无法控制，需要人为将其重新加入网络才可恢复控制，严重影响用户的使用体验。为解决上述技术问题，本发明提出了一种智能家居设备离线控制方法，应用于智能家居设备组，所述智能家居设备组包括两台以上的智能家居设备，两台以上的智能家居设备通过路由器联网，实现与设备服务器的通信连接，所述方法包括：智能家居设备判断其自身与路由器的连接状态；与路由器连接异常的智能家居设备记为离线设备，离线设备监听智能家居设备组内的数据包；与路由器连接正常的智能家居设备记为在线设备，所述在线设备用于接收设备服务器发送的操作指令，当确认操作指令为转发指令后，将转发指令以数据报文广播的形式给发送给离线设备，以对离线设备进行控制。通过上述设置，使得用户可以对处于离线状态的智能家居设备进行控制，克服了现有技术中智能家居设备经常出现意外离线的情况，保证了用户的使用体验。进一步的，包括以下步骤：步骤S1：离线设备进入监听模式，监听空口包，每间隔第一预设时间切换一次信道，进行全信道轮询；步骤S2：在线设备接收到设备服务器发送的操作指令，并判断操作指令是否包括转发指令；步骤S3：若是，在线设备进入监听模式，并进行数据报文广播；步骤S4：所述离线设备监测到在线设备的广播数据包后，判断自身是否是转发指令的目标智能家居设备；步骤S5：若是，离线设备锁定当前信道，并与监测到的在线设备在当前信道进行数据交互，按照操作指令中的功能控制指令执行控制，将执行控制的结果返回给在线设备；步骤S6：所述在线设备接收到离线设备执行控制的结果后，将控制结果返回给设备服务器。该设置中，转发指令需要解析后确定是否需要转发，设备识别信息也需要解析之后以判定当前的设备是否为目标智能家居设备，相当于指令的解密校验环节，增加了操作的安全性，同时，所述离线设备在发现自身处于离线状态时即开启监听状态，通过全信道的轮询，确保可以在较短的时间内接收到转发指令，在确认转发指令指定的目标设备是自身的情况下，根据转发指令进行控制，实现了离线状态时的远程控制，避免了用户控制不成功带来的较差的使用体验。进一步的，所述操作指令为二进制数据，其至少包括由前四位bit组成的第一数据结构，第一数据结构用以表征指令类型。该设置可以使在线设备区分出针对离线设备的转发指令和针对自身的控制指令，从而使其在保证离线设备的可操控性的同时，自身也能顺利接受用户终端的控制。进一步的，操作指令为N字节长度的二进制数据，其包括第一数据结构，并还包括如下两部分数据结构：第二数据结构，包括指令类型后的若干位bit，用于表征设备识别信息；第三数据结构，包括第二数据结构后的其余bit，用以表征相应功能控制指令。所述设备识别信息用于目标智能居家设备的识别，以保证受控制设备的准确性，在部分可选的实施例中，所述设备识别信息包括加密token令牌，所述加密token令牌包括指令类型后的32位bit，所述智能家居设备通过加密token令牌的解密和识别，用以核对其是否为目标设备，保证了受控制设备的准确性，在所述设备识别信息后的其余bit，可以按需设置相应的功能控制指令。本发明还提出了另外一种智能家居设备离线控制方法，应用于设备服务器，所述方法包括：接收用户终端发送的操作命令，并将操作命令转化为包含控制指令的操作指令发送给目标智能家居设备，当包含控制指令的操作指令发送失败或者超时时，将控制指令变更为转发指令，并将包含转发指令的操作指令发送给智能家居设备组里的在线设备，通过包含转发指令的操作指令对目标智能家居设备进行控制。该设置无需向用户发送控制失败的信息，在用户不知情的情况下，通过在线设备实现了离线设备的控制，保证了用户的使用体验。进一步的，所述方法包括以下步骤：步骤S01：所述设备服务器接收到用户终端发送的操作命令，将其转换为第一操作指令，所述第一操作指令中的指令类型为控制指令；步骤S02：将第一操作指令发送给目标智能家居设备，当发送失败或者超时时，将目标智能家居设备标记为离线设备；步骤S03：查询智能家居设备组内的智能家居设备，并获取在线智能家居设备列表，将在线的智能家居设备标记为在线设备；步骤S04：将第一操作指令或操作命令转换为第二操作指令，所述第二操作指令的指令类型为转发指令；步骤S05：将所述第二操作指令发送至其中一台在线设备，当发送失败或者超时时，将所述第二操作指令转发给另外一台在线设备，直至发送成功；步骤S06：接收在线设备返回的离线设备执行控制的结果，并将控制结果返回给用户终端。设备服务器将发送失败或者超时的设备标记为离线设备时无需将其反馈给用户终端，只将离线设备执行控制的结果发送给客户，从而可以在用户不知情的情况下完成离线设备的远程控制，并使其获得了控制结果，保证了用户的使用体验。本发明还提供了一种智能家居设备离线控制系统，用于执行如上所述的方法，所述系统包括：用户终端、设备服务器、智能家居设备组和路由器，所述用户终端与设备服务器通信连接，所述智能家居设备组包括两个以上的智能家居设备，所述智能家居设备通过路由器联网，实现与设备服务器的通信连接。用户终端可以是如AndroidApp、iOS App、iPadApp、PC客户端、web端等的任意一种或多种用户客户端，用户可以通过用户终端管理控制自己的智能家居设备；设备服务器可以为Iot云服务器，其提供了设备接入，设备管理的能力，所述设备服务器通过物联网接入协议接入设备，维持成百上千万设备的长连接管理，其中也包含其他业务平台，如用户平台里维护着用户与设备的关系等数据，每个用户下有家庭这个概念，一个组下有不同的智能家居设备，所述设备服务器还提供了维护用户与智能家居设备之间各种数据状态信息的能力，且是用户终端与智能家居设备通信的桥梁；所述智能家居设备包括无线通信模块，所述无限通信模块可以是如Wi-Fi模块、蓝牙、NB-IoT、Cat.1中的任意一种或多种，其能够接收并解析执行设备服务器的各种操作指令，并返回执行结果；路由器可以是WIFI路由器，用于为支撑家居设备提供联网能力，以便与设备服务器通信连接。本发明还提供了一种智能家居设备，包括存储有计算机程序的计算机可读存储介质和处理器，所述计算机程序被所述处理器读取并运行时，实现如上所述的方法。本发明还提供了一种设备服务器，包括存储有计算机程序的计算机可读存储介质和处理器，所述计算机程序被所述处理器读取并运行时，实现如上所述的方法。本发明还提供了一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序被处理器读取并运行时，实现如上所述的方法。相对于现有技术而言，本发明所述的智能家居设备离线控制方法、系统、设备、服务器、介质具有以下有益效果：1)在目标智能家居设备意外离线的状态下，依然可以通过用户终端进行控制，保证了用户远程控制的便捷性；2)在整个控制执行的过程中用户无感知，用户不会因为智能家居设备的意外离线而获得较差的使用体验；3)操作指令的数据需要解密校验，具有较高的安全性。附图说明图1为本发明具体实施方式中所述的一种智能家居设备离线控制系统的整体逻辑构架图；图2为本发明实施例所述的一种智能家居设备离线控制方法的交互时序图；图3为本发明实施例所述的一种智能家居设备离线控制方法的流程图。附图标记说明：1-用户终端；2-设备服务器；3-路由器；4-离线设备；5-在线设备。具体实施方式为使本发明的上述目的、技术方案和优点更加清楚易懂，下面将结合附图及实施例，对本发明做进一步的详细说明。应当理解，本发明在此所描述的具体实施例仅是构成本发明的部分实施例，其仅用以解释本发明，并不构成对本发明的限定，在不冲突的情况下，本发明中的实施例及实施例中的特征可以相互组合。以下本发明将通过具体实施例的方式，着重对本发明所述的一种智能家居设备离线控制方法进行更为详尽的展开说明。实施例1参见图2-3所示，本发明提出了一种智能家居设备离线控制方法，应用于智能家居设备组，所述智能家居设备组包括两台以上的智能家居设备，两台以上的智能家居设备通过路由器3联网，实现与设备服务器2的通信连接，所述方法包括：智能家居设备判断其自身与路由器3的连接状态；与路由器3连接异常的智能家居设备记为离线设备4，离线设备4监听智能家居设备组内的数据包；与路由器连接正常的智能家居设备记为在线设备5，所述在线设备5用于接收设备服务器2发送的操作指令，当确认操作指令为转发指令后，将转发指令以数据报文广播的形式给发送给离线设备4，以对离线设备4进行控制。现有的用户终端1中，部分可以显示智能家居设备当前的连接状态，还有一部分不能显示，当用户终端1中不能显示智能家居设备连接状态，且用户在不知情的情况下通过用户终端1对离线的智能家居设备发出操作命令时，通过其他在线的智能居家设备接收到的转发指令，对目标智能家居设备进行控制，可以避免用户控制失败时较差的使用体验，而在用户终端1可以显示智能家居设备连接状态时，用户发出操作命令去控制一台离线设备4，并且出乎用户意料之外的控制成功，可以显著地提高用户的使用体验。具体的，当在线设备5接收到转发指令时，开启监听模式，并发送数据报文广播，当所述智能家居设备确认自身为离线设备4时，开启监听模式，监听空口包，可以实现在线设备5与离线设备4的通信连接，从而完成所述离线设备4的控制，有效地提升了用户的使用体验。应当理解，本控制方法适用于智能家居设备组中包括至少一台离线设备4和至少一台在线设备5的情况。通过上述设置，使得用户可以对处于离线状态的智能家居设备进行控制，克服了现有技术中智能家居设备经常出现意外离线的情况，保证了用户的使用体验。作为其中的一个实施例，所述控制方法包括如下步骤：步骤S1：离线设备4进入监听模式，监听空口包，每间隔第一预设时间切换一次信道，进行全信道轮询；步骤S2：在线设备5接收到设备服务器2发送的操作指令，并判断操作指令是否包括转发指令；步骤S3：若是，在线设备5进入监听模式，并进行数据报文广播；步骤S4：所述离线设备4监测到在线设备5的广播数据包后，判断自身是否是转发指令的目标智能家居设备；步骤S5：若是，离线设备4锁定当前信道，并与监测到的在线设备5在当前信道进行数据交互，按照操作指令中的功能控制指令执行控制，将执行控制的结果返回给在线设备5；步骤S6：所述在线设备5接收到离线设备4执行控制的结果后，将控制结果返回给设备服务器2。具体在本实施例中，判断操作指令是否包括转发指令包括：对操作指令中的指令类型进行解析和识别，以判定指令类型是否为转发指令。所述在线设备5的数据报文广播可以以802.11的beacom数据报文进行广播，对应地，所述离线设备4监听802.11的空口包，所述第一预设时间为预设值，取值在80～120ms，优选为100ms，所述全信道包括ch1至ch13。判断自身是否是转发指令的目标智能家居设备包括，对操作指令中的设备识别信息进行解析，和识别，以判定接收到转发指令的离线设备4是否为目标智能家居设备。该设置中，转发指令需要解析后确定是否需要转发，设备识别信息也需要解析之后以判定当前的设备是否为目标智能家居设备，相当于指令的解密校验环节，增加了操作的安全性，同时，所述离线设备4在发现自身处于离线状态时即开启监听状态，通过全信道的轮询，确保可以在较短的时间内接收到转发指令，在确认转发指令指定的目标设备是自身的情况下，根据转发指令进行控制，实现了离线状态时的远程控制，避免了用户控制不成功带来的较差的使用体验。作为本发明的一个实施例，操作指令为二进制数据，其至少包括由前四位bit组成的第一数据结构，第一数据结构用以表征指令类型。应当理解，根据操作指令的内容不同，操作指令可以表现为为不同字节长度的二进制数据，但不论是何种类型的操作指令，其均至少包括第一数据结构，进而在步骤S2中，可以很方便地根据第一数据结构判断操作指令是否为转发指令，从而使得在线设备5开启监听模式，并发送数据报文广播，以便控制离线设备4，其中指令类型可以为转发指令也可以为控制指令，所述控制指令用于控制在线设备5，所述在线设备5解析指令类型为控制指令后，进一步解析设备识别信息，当设备识别信息核对无误后，接收到操作指令的在线设备5按照指令内容执行控制，该设置可以使在线设备5区分出针对离线设备4的转发指令和针对自身的控制指令，从而使其在保证离线设备4的可操控性的同时，自身也能顺利接受用户终端1的控制。作为一个可选的实施例，操作指令为N字节长度的二进制数据，其包括第一数据结构，并还包括如下两部分数据结构：第二数据结构，包括指令类型后的若干位bit，用于表征设备识别信息；第三数据结构，包括第二数据结构后的其余bit，用以表征相应功能控制指令。所述设备识别信息用于目标智能居家设备的识别，以保证受控制设备的准确性，在部分可选的实施例中，所述设备识别信息包括加密token令牌，所述加密token令牌包括指令类型后的32位bit，所述智能家居设备通过加密token令牌的解密和识别，用以核对其是否为目标设备，保证了受控制设备的准确性，在所述设备识别信息后的其余bit，可以按需设置相应的功能控制指令，例如在一台智能空调的操作指令中，操作指令为16字节长度的二进制数据，其中前4位bit为类型指令，所述类型指令可以为转发指令或者控制指令，第5～36位bit为加密token令牌，用于识别目标设备，第37位bit为开/关机控制指令，第38～40位bit为空调控制模式指令，第41～43位bit为风速控制指令，第44～48位温度控制指令，其余bit为其他功能控制指令等，如果当前的控制指令信息不足以将剩余的bit完全利用，则其可以暂时空置，以便应对后续功能更多的智能家居设备时进行精准的控制。需要说明的是，上述智能空调的操作指令仅用于解释操作指令的构成，并不用于限定智能空调操作指令的具体数据结构。操作指令的上述结构包括了指令类型、设备识别信息和功能控制指令结构，先通过指令类型和设备识别信息确定目标设备，再通过控制功能信息进行相应的控制操作，当出现两台以上的离线设备4时也不会出现误操作，从而精准地实现离线设备4的控制。实施例2参见图2-3所示，本发明提出了另一种智能家居设备离线控制方法，应用于设备服务器2，所述方法包括：接收用户终端1发送的操作命令，并将操作命令转化为包含控制指令的操作指令发送给目标智能家居设备，当包含控制指令的操作指令发送失败或者超时时，将控制指令变更为转发指令，并将包含转发指令的操作指令发送给智能家居设备组里的在线设备5，通过包含转发指令的操作指令对目标智能家居设备进行控制。在本实施例中，当所述设备服务器2接收到用户终端1发出的操作命令时，将其转化为第一操作指令，第一操作指令的指令类型为控制指令，并将第一操作指令发送给目标设备，当向目标设备发送第一操作指令失败或者超时时，将第一操作指令或者操作命令转化为第二操作指令，第二操作指令的指令类型为转发指令，并将第二操作指令发送给智能家居设备组中其他的在线设备5，以便通过在线设备5实现离线设备4的控制。该设置无需向用户发送控制失败的信息，在用户不知情的情况下，通过在线设备5实现了离线设备4的控制，保证了用户的使用体验。作为本发明的一个实施例，所述方法包括以下步骤：步骤S01：所述设备服务器2接收到用户终端1发送的操作命令，将其转换为第一操作指令，所述第一操作指令中的指令类型为控制指令；步骤S02：将第一操作指令发送给目标智能家居设备，当发送失败或者超时时，将目标智能家居设备标记为离线设备4；步骤S03：查询智能家居设备组内的智能家居设备，并获取在线智能家居设备列表，将在线的智能家居设备标记为在线设备5；步骤S04：将第一操作指令或操作命令转换为第二操作指令，所述第二操作指令的指令类型为转发指令；步骤S05：将所述第二操作指令发送至其中一台在线设备5，当发送失败或者超时时，将所述第二操作指令转发给另外一台在线设备5，直至发送成功；步骤S06：接收在线设备5返回的离线设备4执行控制的结果，并将控制结果返回给用户终端1。需要说明的是，设备服务器2将发送失败或者超时的设备标记为离线设备4时无需将其反馈给用户终端1，只将离线设备4执行控制的结果发送给客户，从而可以在用户不知情的情况下完成离线设备4的远程控制，并使其获得了控制结果，保证了用户的使用体验。作为可选的实施例，当所述设备服务器2向在线设备5发送第二操作指令失败或超时时，设备服务器2可将该在线设备5进行标记，并在预设的时间段内不再向其发送第二操作指令，以免延长用户等待反馈的时间。实施例3参见图1所示，本实施例提供了一种智能家居设备离线控制系统，包括用户终端1、设备服务器2、智能家居设备组和路由器3，所述用户终端1与设备服务器2通信连接，所述智能家居设备组包括两个以上的智能家居设备，所述智能家居设备通过路由器3联网，实现与设备服务器2的通信连接，用于执行如实施例1和/或实施例2所述的控制方法。具体的，用户终端1可以是如AndroidApp、iOS App、iPadApp、PC客户端、web端等的任意一种或多种用户客户端，用户可以通过用户终端1管理控制自己的智能家居设备；设备服务器2可以为Iot云服务器，其提供了设备接入，设备管理的能力，所述设备服务器2通过物联网接入协议接入设备，维持成百上千万设备的长连接管理，其中也包含其他业务平台，如用户平台里维护着用户与设备的关系等数据，每个用户下有家庭这个概念，一个组下有不同的智能家居设备，所述设备服务器2还提供了维护用户与智能家居设备之间各种数据状态信息的能力，且是用户终端1与智能家居设备通信的桥梁；所述智能家居设备包括无线通信模块，所述无限通信模块可以是如Wi-Fi模块、蓝牙、NB-IoT、Cat.1中的任意一种或多种，其能够接收并解析执行设备服务器2的各种操作指令，并返回执行结果；路由器3可以是WIFI路由器，用于为支撑家居设备提供联网能力，以便与设备服务器2通信连接。作为其中一个可选的实施例，所述智能家居设备离线控制系统的控制方法包括：步骤S001：用户终端1发送操作命令至设备服务器2；步骤S002：设备服务器2将操作命令转化为第一操作指令，并将第一操作指令发送给目标设备；步骤S003：第一操作指令发送失败或者超时，将目标设备标记为离线设备4；步骤S004：获取目标设备所在的智能家居设备组中的在线设备5列表；步骤S005：将第一操作指令或操作命令转化为第二操作指令，并将第二操作指令发送给其中一台在线设备5；步骤S006：当第二操作指令发送失败或超时时，向另一台在线设备5发送第二操作指令；步骤S007：重复步骤S006，直至发送成功；步骤S008：接收到第二操作指令的在线设备5对第二操作指令进行解析，判断其指令类型是否为转发指令；步骤S009：S008的判断结果为是，则该在线设备5开启监听模式，并发送数据报文广播；步骤S010：离线设备4监测到数据报文广播，判断自身是否是转发指令的目标设备；步骤S011：S010的判断结果为是，离线设备4锁定当前信道，并与监测到的在线设备5在当前信道进行数据交互，并按照操作指令中的功能控制指令执行可控制，并将控制结果返回给在线设备5；步骤S012：在线设备5将接收到的控制结果返回给设备服务器2；步骤S013：设备服务器2将接收到的控制结果返回给用户终端1；其中，智能家居设备间隔预设时间判断其自身与路由器3的连接状态，当判断其自身与路由器3连接异常时，开启监听模式，监听空口包。实施例4参见图1-3所示，本实施例提供了一种智能家居设备，包括存储有计算机程序的计算机可读存储介质和处理器，所述计算机程序被所述处理器读取并运行时，实现如实施例1中所述的方法。实施例5参见图1-3所示，本实施例提供了一种设备服务器，包括存储有计算机程序的计算机可读存储介质和处理器，所述计算机程序被所述处理器读取并运行时，实现如实施例2中所述的方法。实施例6参见图1-3所示，本实施例提供了一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序被处理器读取并运行时，实现如实施例1中所述的方法，和/或实现实施例2中所述的方法。应当理解的是，实施例4、5、6中所提供的智能家居设备、涉笔服务器、计算机可读存储介质，均可以通过软硬件结合的方式来实现如实施例1中所述的方法。上述智能家居设备、计算机可读存储介质中的任意一个，其信息交互、执行过程等内容均可参见实施例1和/或实施例2中对于智能家居设备离线控制方法的叙述，在此不再一一赘述。虽然本发明披露如上，但本发明并非限定于此。任何本领域技术人员，在不脱离本发明的精神和范围内，均可作各种更动与修改，因此本发明的保护范围应当以权利要求所限定的范围为准。
