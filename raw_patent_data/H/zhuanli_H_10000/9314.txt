标题title
一种基于构网型变流器的储能系统控制方法及系统
摘要abst
本发明涉及一种基于构网型变流器的储能系统控制方法及系统，包括：在虚拟调频控制环节，基于电网实际频率获取附加参考功率；在虚拟惯量和阻尼控制环节，基于附加参考功率获取储能变流器输出的内电势虚拟相位角；在虚拟励磁控制环节，获取变流器输出的内电势幅值；在电压外环虚拟电路控制环节，基于内电势虚拟相位角和内电势幅值计算电流内环参考值；在电流内环控制环节，基于所述‑电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压；基于PWM发生器输出的触发脉冲对储能系统进行控制。本发明将储能变流器等效成具有同步发电机输出特性的可控电压源，能够更好地发挥储能系统功率吞吐灵活性优势，提升电网对于新能源发电的消纳水平。
权利要求书clms
1.一种基于构网型变流器的储能系统控制方法，其特征在于，所述方法包括：在虚拟调频控制环节，基于电网实际频率获取附加参考功率；在虚拟惯量和阻尼控制环节，基于所述附加参考功率获取储能变流器输出的内电势虚拟相位角；在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值；在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值；在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压；基于脉冲宽度调制PWM发生器根据所述参考电压输出的触发脉冲对储能系统进行控制。2.根据权利要求1所述的方法，其特征在于，所述在虚拟调频控制环节，基于电网实际频率获取附加参考功率，包括：在虚拟调频控制环节，将所述电网实际频率与预设参考频率进行比较，获取频率偏差绝对值；当所述频率偏差绝对值大于等于预设频率死区宽度阈值时，利用如下公式确定所述附加参考功率，包括：，其中，为附加参考功率；为预设参考频率；f为电网实际频率；为下垂系数。3.根据权利要求2所述的方法，其特征在于，所述方法还包括：当所述频率偏差绝对值小于预设频率死区宽度阈值时，确定所述附加参考功率为0。4.根据权利要求1所述的方法，其特征在于，所述在虚拟惯量和阻尼控制环节，基于所述附加参考功率获取储能变流器输出的内电势虚拟相位角，包括：，，其中，为储能变流器输出的内电势虚拟相位角；J为虚拟转动惯量；为变流器输出内电势虚拟角速度；为对应于传统同步机的输入机械功率；P为变流器实际输出有功功率；为等效虚拟阻尼系数；为系统额定角速度；为有功参考指令；为附加参考功率；为预设参考频率；f为电网实际频率；为下垂系数；D为虚拟阻尼系数；为隔直环节时间常数；和分别为第一移相环节时间常数和第二移相环节时间常数；为转速偏差放大倍数；S为拉普拉斯算子；t为时间。5.根据权利要求1所述的方法，其特征在于，所述在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值，包括：其中，为内电势幅值；K为调节器增益；为比例积分选择因子；和分别为第一电压调节器时间常数和第二电压调节器时间常数；为预设励磁调压器参考电压阈值；V为虚拟励磁调压器实际电压信号；为d轴的电流内环参考值；为滤波器时间常数；U为储能变流器端电压；为变流器输出端电流；为调差电阻，为调差电抗；j表示复数；为励磁绕组时间常数；为暂态电势；为与励磁电压呈线性关系的强制空载电动势；为同步电抗；为d轴暂态电抗；S为拉普拉斯算子。6.根据权利要求1所述的方法，其特征在于，所述在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值，包括：，其中，和分别为在d轴和q轴下的电流内环参考值；和分别为风机在d轴和q轴的虚拟内电势，，，为内电势幅值；和分别为风机在d轴和q轴的实测端电压；为支路总阻抗，R和X均为真实阻抗参数，和均为虚拟阻抗参数；j表示复数。7.根据权利要求1所述的方法，其特征在于，所述在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压，包括：在电流内环控制环节，基于所述电流内环参考值确定内电势控制输出信号，包括：，其中，和分别为在d轴和q轴下的内电势控制输出信号；和分别为在d轴和q轴下的变流器端电压；和分别为在d轴和q轴下变流器注入电网的电流实际值；和分别为在d轴和q轴下的电流内环参考值；为变流器输出内电势虚拟角速度；L为输出线路上的电感；和分别构成为在q轴和d轴下的电流状态反馈量；和均为PI控制参数；S为拉普拉斯算子；基于所述内电势虚拟相位角对所述内电势控制输出信号进行派克反变换，以获取三相静止坐标系下的参考电压。8.一种基于构网型变流器的储能系统控制系统，其特征在于，所述系统包括：虚拟调频控制模块，用于在虚拟调频控制环节，基于电网实际频率获取附加参考功率；虚拟惯量和阻尼控制模块，用于在虚拟惯量和阻尼控制环节，基于所述附加参考功率获取储能变流器输出的内电势虚拟相位角；虚拟励磁控制模块，用于在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值；电压外环虚拟电路控制模块，用于在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值；电流内环控制模块，用于在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压；脉冲控制模块，用于基于PWM发生器根据所述参考电压输出的触发脉冲对储能系统进行控制。9.根据权利要求8所述的系统，其特征在于，所述虚拟调频控制模块，具体用于在虚拟调频控制环节，将所述电网实际频率与预设参考频率进行比较，获取频率偏差绝对值；当所述频率偏差绝对值大于等于预设频率死区宽度阈值时，利用如下公式确定所述附加参考功率，包括：，其中，为附加参考功率；为预设参考频率；f为电网实际频率；为下垂系数。10.根据权利要求9所述的系统，其特征在于，所述虚拟调频控制模块，还用于当所述频率偏差绝对值小于预设频率死区宽度阈值时，确定所述附加参考功率为0。11.根据权利要求8所述的系统，其特征在于，所述虚拟惯量和阻尼控制模块，具体用于按照下述公式获取储能变流器输出的内电势虚拟相位角：，，其中，为储能变流器输出的内电势虚拟相位角；J为虚拟转动惯量；为变流器输出内电势虚拟角速度；为对应于传统同步机的输入机械功率；P为变流器实际输出有功功率；为等效虚拟阻尼系数；为系统额定角速度；为有功参考指令；为附加参考功率；为预设参考频率；f为电网实际频率；为下垂系数；D为虚拟阻尼系数；为隔直环节时间常数；和分别为第一移相环节时间常数和第二移相环节时间常数；为转速偏差放大倍数；S为拉普拉斯算子；t为时间。12.根据权利要求8所述的系统，其特征在于，所述虚拟励磁控制模块，在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值，包括：其中，为内电势幅值；K为调节器增益；为比例积分选择因子；和分别为第一电压调节器时间常数和第二电压调节器时间常数；为预设励磁调压器参考电压阈值；V为虚拟励磁调压器实际电压信号；为d轴的电流内环参考值；为滤波器时间常数；U为储能变流器端电压；为变流器输出端电流；为调差电阻，为调差电抗；j表示复数；为励磁绕组时间常数；为暂态电势；为与励磁电压呈线性关系的强制空载电动势；为同步电抗；为d轴暂态电抗；S为拉普拉斯算子。13.根据权利要求8所述的系统，其特征在于，所述电压外环虚拟电路控制模块，在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值，包括：，其中，和分别为在d轴和q轴下的电流内环参考值；和分别为风机在d轴和q轴的虚拟内电势，，，为内电势幅值；和分别为风机在d轴和q轴的实测端电压；为支路总阻抗，R和X均为真实阻抗参数，和均为虚拟阻抗参数；j表示复数。14.根据权利要求8所述的系统，其特征在于，所述电流内环控制模块，在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压，包括：在电流内环控制环节，基于所述电流内环参考值确定内电势控制输出信号，包括：，其中，和分别为在d轴和q轴下的内电势控制输出信号；和分别为在d轴和q轴下的变流器端电压；和分别为在d轴和q轴下变流器注入电网的电流实际值；和分别为在d轴和q轴下的电流内环参考值；为变流器输出内电势虚拟角速度；L为输出线路上的电感；和分别构成为在q轴和d轴下的电流状态反馈量；和均为PI控制参数；S为拉普拉斯算子；基于所述内电势虚拟相位角对所述内电势控制输出信号进行派克反变换，以获取三相静止坐标系下的参考电压。15.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，该程序被处理器执行时实现如权利要求1-7中任一项所述方法的步骤。16. 一种电子设备，其特征在于，包括：权利要求15中所述的计算机可读存储介质；以及一个或多个处理器，用于执行所述计算机可读存储介质中的程序。
说明书desc
技术领域本发明涉及新能源并网控制技术领域，并且更具体地，涉及一种基于构网型变流器的储能系统控制方法及系统。背景技术“碳达峰、碳中和”目标对于构建新型电力系统提出了新的要求，以光伏、风电为代表的新能源发电建设发展迅速。然而大规模新能源并网的出力间歇波动性与低阻尼低惯量问题给电力系统安全稳定运行带来了新的挑战。储能技术以其本身具有的灵活吞吐功率，长期储存能量等优点得到广泛应用。常见的储能技术包括机械储能、电磁储能和电化学储能等。储能变流器是储能系统的核心部分。对应于不同应用场景，储能变流器传统控制策略主要包括：恒功率控制、恒压恒频控制以及下垂控制。恒功率控制以变流器输出功率为控制目标，根据给定功率参考值进行控制，依赖锁相环，用于并网运行工况。恒压恒频控制以变流器端电压幅值与频率为控制目标，根据端电压幅值和相位的参考值进行控制，用于孤岛运行工况。下垂控制模拟同步发电机P-f、Q-U下垂特性，具有自主调节能力，可运行于并网与孤岛多种工况。传统的变流器控制策略，或依赖于锁相环并网，呈现电流源特性；或控制手段单一，使得系统呈现低惯量与欠阻尼状态。现有技术一的技术方案为：如图1所示，下垂控制以储能系统输出的电压幅值和频率作为参考对象，对储能系统输出的P和Q进行测量计算，借助Q-U和P-f解耦下的下垂特性进行电压U和频率f的调节，以维持系统的电压、频率平衡，典型控制如图1所示。下垂控制关系可表示为：，其中， f为逆变器输出频率， 为逆变器输出电压， 、 为逆变器实际输出功率， 为额定输出频率， 为额定输出电压， 、 为输出功率参考值，设 为P-f下垂控制系数， 为Q-U下垂控制系数。现有技术一的缺点为：下垂控制模仿了同步机P-f、Q-U的调压调频外特性，但没有体现同步发电机对系统惯量和阻尼贡献的内特性。使得并网系统惯量特性和阻尼特性较差，频率稳定效果一般，抗负载扰动能力较弱。因此，需要一种基于构网型变流器的储能系统控制方法。发明内容本发明提出一种基于构网型变流器的储能系统控制方法及系统，以解决如何基于构网型变流器进行储能系统控制的问题。为了解决上述问题，根据本发明的一个方面，提供了一种基于构网型变流器的储能系统控制方法，所述方法包括：在虚拟调频控制环节，基于电网实际频率获取附加参考功率；在虚拟惯量和阻尼控制环节，基于所述附加参考功率获取储能变流器输出的内电势虚拟相位角；在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值；在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值；在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压；基于PWM发生器根据所述参考电压输出的触发脉冲对储能系统进行控制。优选地，其中所述在虚拟调频控制环节，基于电网实际频率获取附加参考功率，包括：在虚拟调频控制环节，将所述电网实际频率与预设参考频率进行比较，获取频率偏差绝对值；当所述频率偏差绝对值大于等于预设频率死区宽度阈值时，利用如下公式确定所述附加参考功率，包括： ，其中， 为附加参考功率； 为预设参考频率； f为电网实际频率； 为下垂系数。优选地，其中所述方法还包括：当所述频率偏差绝对值小于预设频率死区宽度阈值时，确定所述附加参考功率为0。优选地，其中所述在虚拟惯量和阻尼控制环节，基于所述附加参考功率获取储能变流器输出的内电势虚拟相位角，包括：，，其中， 为储能变流器输出的内电势虚拟相位角； J为虚拟转动惯量； 为变流器输出内电势虚拟角速度； 为对应于传统同步机的输入机械功率； 为变流器实际输出有功功率； 为等效虚拟阻尼系数； 为系统额定角速度； 为有功参考指令； 为附加参考功率； 为预设参考频率；f 为电网实际频率； 为下垂系数； 为虚拟阻尼系数；为隔直环节时间常数； 和 分别为第一移相环节时间常数和第二移相环节时间常数；为转速偏差放大倍数；S为拉普拉斯算子；t为时间。优选地，其中所述在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值，包括：，，其中， 为内电势幅值； 为调节器增益； 为比例积分选择因子； 和 分别为第一电压调节器时间常数和第二电压调节器时间常数； 为预设励磁调压器参考电压阈值；V为虚拟励磁调压器实际电压信号； 为d轴的电流内环参考值； 为滤波器时间常数； 为储能变流器端电压； 为变流器输出端电流； 为调差电阻， 为调差电抗；j表示复数； 为励磁绕组时间常数； 为暂态电势； 为与励磁电压呈线性关系的强制空载电动势； 为同步电抗； 为d轴暂态电抗；S为拉普拉斯算子。优选地，其中所述在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值，包括：，其中， 和 分别为在d轴和q轴下的电流内环参考值；和分别为风机在d轴和q轴的虚拟内电势， ， ， 为内电势幅值；和分别为风机在d轴和q轴的实测端电压； 为支路总阻抗， 和 均为真实阻抗参数， 和 均为虚拟阻抗参数；j表示复数。优选地，其中所述在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压，包括：在电流内环控制环节，基于所述电流内环参考值确定内电势控制输出信号，包括：，其中， 和 分别为在d轴和q轴下的内电势控制输出信号； 和 分别为在d轴和q轴下的变流器端电压； 和 分别为在d轴和q轴下变流器注入电网的电流实际值； 和 分别为在d轴和q轴下的电流内环参考值； 为变流器输出内电势虚拟角速度；L为输出线路上的电感； 和 分别构成为在q轴和d轴下的电流状态反馈量； 和 均为PI控制参数；S为拉普拉斯算子；基于所述内电势虚拟相位角对所述内电势控制输出信号进行派克反变换，以获取三相静止坐标系下的参考电压。根据本发明的另一个方面，提供了一种基于构网型变流器的储能系统控制系统，所述系统包括：虚拟调频控制模块，用于在虚拟调频控制环节，基于电网实际频率获取附加参考功率；虚拟惯量和阻尼控制模块，用于在虚拟惯量和阻尼控制环节，基于所述附加参考功率获取储能变流器输出的内电势虚拟相位角；虚拟励磁控制模块，用于在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值；电压外环虚拟电路控制模块，用于在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值；电流内环控制模块，用于在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压；脉冲控制模块，用于基于PWM发生器根据所述参考电压输出的触发脉冲对储能系统进行控制。优选地，其中所述虚拟调频控制模块，具体用于在虚拟调频控制环节，将所述电网实际频率与预设参考频率进行比较，获取频率偏差绝对值；当所述频率偏差绝对值大于等于预设频率死区宽度阈值时，利用如下公式确定所述附加参考功率，包括：，其中， 为附加参考功率； 为预设参考频率； f为电网实际频率； 为下垂系数。优选地，其中所述虚拟调频控制模块，还用于：当所述频率偏差绝对值小于预设频率死区宽度阈值时，确定所述附加参考功率为0。优选地，其中所述虚拟惯量和阻尼控制模块，具体用于按照下述公式获取储能变流器输出的内电势虚拟相位角：，，其中， 为储能变流器输出的内电势虚拟相位角； J为虚拟转动惯量； 为变流器输出内电势虚拟角速度； 为对应于传统同步机的输入机械功率； 为变流器实际输出有功功率； 为等效虚拟阻尼系数； 为系统额定角速度； 为有功参考指令； 为附加参考功率； 为预设参考频率；f 为电网实际频率； 为下垂系数； 为虚拟阻尼系数；为隔直环节时间常数； 和 分别为第一移相环节时间常数和第二移相环节时间常数；为转速偏差放大倍数；S为拉普拉斯算子；t为时间。优选地，其中所述虚拟励磁控制模块，在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值，包括：，，其中， 为内电势幅值； 为调节器增益； 为比例积分选择因子； 和 分别为第一电压调节器时间常数和第二电压调节器时间常数； 为预设励磁调压器参考电压阈值；V为虚拟励磁调压器实际电压信号； 为d轴的电流内环参考值； 为滤波器时间常数； 为储能变流器端电压； 为变流器输出端电流； 为调差电阻， 为调差电抗；j表示复数； 为励磁绕组时间常数； 为暂态电势； 为与励磁电压呈线性关系的强制空载电动势； 为同步电抗； 为d轴暂态电抗；S为拉普拉斯算子。优选地，其中所述电压外环虚拟电路控制模块，在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值，包括：，其中， 和 分别为在d轴和q轴下的电流内环参考值；和分别为风机在d轴和q轴的虚拟内电势， ， ， 为内电势幅值；和分别为风机在d轴和q轴的实测端电压； 为支路总阻抗， 和 均为真实阻抗参数， 和 均为虚拟阻抗参数；j表示复数。优选地，其中所述电流内环控制模块，在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压，包括：在电流内环控制环节，基于所述电流内环参考值确定内电势控制输出信号，包括：，其中， 和 分别为在d轴和q轴下的内电势控制输出信号； 和 分别为在d轴和q轴下的变流器端电压； 和 分别为在d轴和q轴下变流器注入电网的电流实际值； 和 分别为在d轴和q轴下的电流内环参考值； 为变流器输出内电势虚拟角速度；L为输出线路上的电感； 和 分别构成为在q轴和d轴下的电流状态反馈量； 和 均为PI控制参数；S为拉普拉斯算子；基于所述内电势虚拟相位角对所述内电势控制输出信号进行派克反变换，以获取三相静止坐标系下的参考电压。基于本发明的另一方面，本发明提供一种计算机可读存储介质，其上存储有计算机程序，该程序被处理器执行时实现一种基于构网型变流器的储能系统控制方法中任一项的步骤。基于本发明的另一方面，本发明提供一种电子设备，包括：上述的计算机可读存储介质；以及一个或多个处理器，用于执行所述计算机可读存储介质中的程序。本发明提供了一种基于构网型变流器的储能系统控制方法及系统，包括：在虚拟调频控制环节，基于电网实际频率获取附加参考功率；在虚拟惯量和阻尼控制环节，基于所述附加参考功率获取储能变流器输出的内电势虚拟相位角；在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值；在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值；在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压；基于PWM发生器根据所述参考电压输出的触发脉冲对储能系统进行控制。本发明将储能变流器等效成具有同步发电机输出特性的可控电压源，通过虚拟调频控制、虚拟惯量和阻尼控制、在虚拟励磁控制、电压外环虚拟电路控制和电流内环控制获取参考电压，并将参考电压输出至PWM发生器，以根据PWM发生器根据所述参考电压输出的触发脉冲对储能系统进行控制，能够更好地发挥储能系统功率吞吐灵活性优势，有利于平抑风电、光伏等新能源发电输出功率的波动，提供新能源并网的调压、调频、惯量支撑服务，提升电网对于新能源发电的消纳水平，促进新能源的开发与利用。附图说明通过参考下面的附图，可以更为完整地理解本发明的示例性实施方式：图1为下垂控制框图；图2为根据本发明实施方式的基于构网型变流器的储能系统控制方法200的流程图；图3为根据本发明实施方式的基于构网型变流器的储能系统控制框图；图4为根据本发明实施方式的虚拟调频控制框图；图5为根据本发明实施方式的虚拟惯量和阻尼控制框图；图6为根据本发明实施方式的虚拟励磁控制框图；图7为根据本发明实施方式的虚拟电路控制框图；图8为根据本发明实施方式的电流内环控制框图；图9为根据本发明实施方式的基于构网型变流器的储能系统控制系统400的结构示意图。具体实施方式现在参考附图介绍本发明的示例性实施方式，然而，本发明可以用许多不同的形式来实施，并且不局限于此处描述的实施例，提供这些实施例是为了详尽地且完全地公开本发明，并且向所属技术领域的技术人员充分传达本发明的范围。对于表示在附图中的示例性实施方式中的术语并不是对本发明的限定。在附图中，相同的单元/元件使用相同的附图标记。除非另有说明，此处使用的术语对所属技术领域的技术人员具有通常的理解含义。另外，可以理解的是，以通常使用的词典限定的术语，应当被理解为与其相关领域的语境具有一致的含义，而不应该被理解为理想化的或过于正式的意义。传统的变流器控制策略，或依赖于锁相环并网，呈现电流源特性；或控制手段单一，使得系统呈现低惯量与欠阻尼状态。因此，借鉴同步发电机的机械方程和电磁方程，使储能系统模拟同步机的优良特性，把电网构造型并网变换技术应用到储能变流器控制中，实现对系统的自主化调压调频和功率控制具有重要意义。针对现有技术的不足，本发明提供了一种基于构网型变流器的储能系统控制方法，模拟同步发电机的无功调压、有功调频等特性，使储能系统提供电网需要的电压、频率和自主惯量支撑，更有利于平抑新能源出力波动，改善系统安全稳定运行问题。图2为根据本发明实施方式的基于构网型变流器的储能系统控制方法200的流程图。如图2所示，本发明实施方式提供的基于构网型变流器的储能系统控制方法，将储能变流器等效成具有同步发电机输出特性的可控电压源，通过虚拟调频控制、虚拟惯量和阻尼控制、在虚拟励磁控制、电压外环虚拟电路控制和电流内环控制获取参考电压，并将参考电压输出至PWM发生器，以根据PWM发生器根据所述参考电压输出的触发脉冲对储能系统进行控制，能够更好地发挥储能系统功率吞吐灵活性优势，有利于平抑风电、光伏等新能源发电输出功率的波动，提供新能源并网的调压、调频、惯量支撑服务，提升电网对于新能源发电的消纳水平，促进新能源的开发与利用。本发明实施方式提供的基于构网型变流器的储能系统控制方法200，从步骤201处开始，在步骤201，在虚拟调频控制环节，基于电网实际频率获取附加参考功率。优选地，其中所述在虚拟调频控制环节，基于电网实际频率获取附加参考功率，包括：在虚拟调频控制环节，将所述电网实际频率与预设参考频率进行比较，获取频率偏差绝对值；当所述频率偏差绝对值大于等于预设频率死区宽度阈值时，利用如下公式确定所述附加参考功率，包括： ，其中， 为附加参考功率； 为预设参考频率； f为电网实际频率； 为下垂系数。优选地，其中所述方法还包括：当所述频率偏差绝对值小于预设频率死区宽度阈值时，确定所述附加参考功率为0。如图3所示，在本发明中，基于构网型变流器的储能系统控制方法采用的策略依次为：虚拟调频控制、虚拟惯量和阻尼控制、虚拟励磁控制环节、外环虚拟电路控制、电流内环控制和脉冲控制。结合图3和图4所示，在本发明的实施方式中，在虚拟调频控制环节，模拟同步发电机组原动机的调速器特性，简化考虑其有功功率-频率特性。具体地，变流器检测电网实际频率，并与预设参考频率进行对比后，经过死区控制，在死区控制中，若频率偏差超过预设频率死区宽度阈值，则按实际偏差输出；否则输出为0。再将输出的频率偏差量乘以下垂系数，即可得到附加参考功率。储能变流器以此实现自主响应电力系统频率变化的一次调频。在本发明的实施方式中，虚拟调频控制模型表示如下：，其中， 为附加参考功率； 为预设参考频率； f为从网侧采集电压信号计算出的实测频率； 为预设频率死区宽度阈值； 为下垂系数，为适应储能运行条件灵活选取，如储能电池荷电状态SOC水平过高或过低时调节此系数，改变电池参加一次调频的能力，实现系统优化运行。若所述频率偏差绝对值小于预设频率死区宽度阈值，则频率偏差量输出0，相应地，可以得到附加参考功率为0。在步骤202，在虚拟惯量和阻尼控制环节，基于所述附加参考功率获取储能变流器输出的内电势虚拟相位角。优选地，其中所述在虚拟惯量和阻尼控制环节，基于所述附加参考功率获取储能变流器输出的内电势虚拟相位角，包括：，，其中， 为储能变流器输出的内电势虚拟相位角； J为虚拟转动惯量； 为变流器输出内电势虚拟角速度； 为对应于传统同步机的输入机械功率； 为变流器实际输出有功功率； 为等效虚拟阻尼系数； 为系统额定角速度； 为有功参考指令； 为附加参考功率； 为预设参考频率；f 为电网实际频率； 为下垂系数； 为虚拟阻尼系数；为隔直环节时间常数； 和 分别为第一移相环节时间常数和第二移相环节时间常数；为转速偏差放大倍数；S为拉普拉斯算子；t为时间。结合图3和图5所示，在本发明的实施方式中，在虚拟惯量和阻尼控制环节，模拟同步发电机转子运动方程，在控制中引入惯量与阻尼环节，增强变流器柔性并网特性。具体地，将虚拟调频控制环节得到的附加参考功率与有功参考指令之和作为变流器虚拟机械功率，将变流器实际输出有功功率作为虚拟电磁功率，二者之差经过惯量和阻尼控制环节后得到储能变流器虚拟转速，积分可得虚拟内电势虚拟相位角。控制模型表示如下：，其中， J为虚拟转动惯量，为适应储能运行条件灵活选取，如储能电池SOC水平过低时，应当减小 J，避免过度放电； 为变流器输出内电势虚拟角速度； 为对应于传统同步机的输入机械功率； 为变流器实际输出有功功率； 为等效虚拟阻尼系数； 为系统额定角速度； 为储能变流器输出的内电势虚拟相位角； 为有功参考指令； 为附加参考功率； 为下垂系数； 为预设参考频率；f 为实测频率；S为拉普拉斯算子。为增强虚拟阻尼控制能力， 由并联的两部分组成：，其中， 为虚拟阻尼系数， 为隔直环节时间常数， 和 分别为第一移相环节时间常数和第二移相环节时间常数， 为转速偏差放大倍数。在步骤203，在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值。优选地，其中所述在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值，包括：，，其中， 为内电势幅值； 为调节器增益； 为比例积分选择因子； 和 分别为第一电压调节器时间常数和第二电压调节器时间常数； 为预设励磁调压器参考电压阈值；V为虚拟励磁调压器实际电压信号； 为d轴的电流内环参考值； 为滤波器时间常数； 为储能变流器端电压； 为变流器输出端电流； 为调差电阻， 为调差电抗；j表示复数； 为励磁绕组时间常数； 为暂态电势； 为与励磁电压呈线性关系的强制空载电动势； 为同步电抗； 为d轴暂态电抗；S为拉普拉斯算子。结合图3和图6所示，在本发明的实施方式中，在虚拟励磁控制环节，模拟同步发电机励磁系统特性，并引入同步发电机三阶实用模型中的电磁方程以准确模拟励磁动态特性：，其中， 为励磁绕组时间常数； 为暂态电势； 为与励磁电压呈线性关系的强制空载电动势； 为d轴电流分量； 为同步电抗； 为d轴暂态电抗。首先采集储能变流器输出端电压与电流，经过调差环节后得到虚拟励磁调压器实际电压信号：，其中， 为计算得到的虚拟励磁调压器实际电压信号； 为滤波器时间常数； 为储能变流器端电压； 为变流器输出端电流； 为调差电阻， 为调差电抗，可使虚拟调节控制系统具有适当的调差特性。该调差环节的引入可以防止并联运行的发电设备同时调一个母线电压时引起振荡。之后将该电压信号实际值与参考值进行比较，采用串联PID控制方法调节虚拟励磁控制环节的增益及动态特性，控制模型表示如下：，其中， 为内电势幅值，对应暂态电势 ； 为调节器增益； 为比例积分选择因子； 、 为电压调节器时间常数； 为励磁调压器参考电压； 为计算得励磁调压器实际电压信号； 为d轴的电流内环参考值，对应于 。在步骤204，在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值。优选地，其中所述在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值，包括：，其中， 和 分别为在d轴和q轴下的电流内环参考值；和分别为风机在d轴和q轴的虚拟内电势， ， ， 为内电势幅值；和分别为风机在d轴和q轴的实测端电压； 为支路总阻抗， 和 均为真实阻抗参数， 和 均为虚拟阻抗参数；j表示复数。结合图3和图7所示，在本发明的实施方式中，在电压外环虚拟电路控制环节，由虚拟内电势 生成电流内环参考值。规定内电势在dq轴参考值为 和 ，并以虚拟相位角分解端电压 得到端电压dq轴分量 、 。计算参考电流得：，其中， 和 分别为在d轴和q轴下的电流内环参考值；和分别为风机在d轴和q轴的虚拟内电势， ， ， 为内电势幅值；和分别为风机在d轴和q轴的实测端电压； 为支路总阻抗， 和 均为真实阻抗参数， 和 均为虚拟阻抗参数；j表示复数。其中，电流限幅方法为等比例虚拟阻抗法，即设定虚拟阻抗与真实阻抗的夹角相同，幅值不同。计算如下：，其中， 为实际总电流值； 为总电流限幅值，根据系统侧交流电压的低压限流曲线确定。在步骤205，在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压。优选地，其中所述在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压，包括：在电流内环控制环节，基于所述电流内环参考值确定内电势控制输出信号，包括：，其中， 和 分别为在d轴和q轴下的内电势控制输出信号； 和 分别为在d轴和q轴下的变流器端电压； 和 分别为在d轴和q轴下变流器注入电网的电流实际值； 和 分别为在d轴和q轴下的电流内环参考值； 为变流器输出内电势虚拟角速度；L为输出线路上的电感； 和 分别构成为在q轴和d轴下的电流状态反馈量； 和 均为PI控制参数；S为拉普拉斯算子；基于所述内电势虚拟相位角对所述内电势控制输出信号进行派克反变换，以获取三相静止坐标系下的参考电压。在步骤206，基于PWM发生器根据所述参考电压输出的触发脉冲对储能系统进行控制。结合图3和图8所示，在本发明的实施方式中，在电流内环控制环节，采用电流内环控制实现对电流参考值快速无差跟踪。采集变流器输出电流实际值，与电流参考值作差后经过PI控制及交叉耦合项的前馈控制得到输出信号，控制方程如下所示：，其中， 、 分别为在d轴和q轴下的内电势控制输出信号； 、 分别为在d轴和q轴下的变流器端电压； 、 和 、 分别分别为在d轴和q轴下的变流器注入电网电流实际值和参考值； 、 为电流状态反馈量； 、 为PI控制参数。之后依据虚拟相位角 对内电势控制输出信号 、 进行派克反变换得到三相静止坐标系下的电压参考波。然后，再将电压参考波送至PWM发生器，用于生成满足控制需要的触发脉冲，从而完成整体输出控制。本发明的基于构网型变流器的储能系统控制方法，在储能系统变流器控制中引入基于三阶同步发电机模型的机械方程与电磁方程，实现有功-调频、无功-调压的构网型控制,使得储能变流器对外等效成可控电压源，有效平抑新能源发电功率波动，为具有低惯量、弱阻尼特点的新型电力系统提供电压、频率和惯量主动支撑。储能系统的研究与发展对于可再生能源开发与利用具有重要意义。基于储能系统自身功率吞吐的灵活性和可长期存储能量的特点，配合具有主动支撑能力的变流器控制策略，储能系统能够平抑新能源发电出力波动，对于系统频率与电压起到主动支撑作用，对电网的安全稳定运行产生积极影响。具有主动支撑能力的储能系统具有更独立灵活的控制手段和更宽广的控制范围，拥有极高的研究价值及工程应用前景。图9为根据本发明实施方式的基于构网型变流器的储能系统控制系统400的结构示意图。如图9所示，本发明实施方式提供的基于构网型变流器的储能系统控制系统400，包括：虚拟调频控制模块401、虚拟惯量和阻尼控制模块402、虚拟励磁控制模块403、电压外环虚拟电路控制模块404、电流内环控制模块405和脉冲控制模块406。优选地，所述虚拟调频控制模块401，用于在虚拟调频控制环节，基于电网实际频率获取附加参考功率。优选地，其中所述虚拟调频控制模块401，具体用于在虚拟调频控制环节，将所述电网实际频率与预设参考频率进行比较，获取频率偏差绝对值；当所述频率偏差绝对值大于等于预设频率死区宽度阈值时，利用如下公式确定所述附加参考功率，包括：，其中， 为附加参考功率； 为预设参考频率； f为电网实际频率； 为下垂系数。优选地，其中所述虚拟调频控制模块401，还用于：当所述频率偏差绝对值小于预设频率死区宽度阈值时，确定所述附加参考功率为0。优选地，所述虚拟惯量和阻尼控制模块402，用于在虚拟惯量和阻尼控制环节，基于所述附加参考功率获取储能变流器输出的内电势虚拟相位角。优选地，其中所述虚拟惯量和阻尼控制模块402，具体用于按照下述公式获取储能变流器输出的内电势虚拟相位角：，，其中， 为储能变流器输出的内电势虚拟相位角； J为虚拟转动惯量； 为变流器输出内电势虚拟角速度； 为对应于传统同步机的输入机械功率； 为变流器实际输出有功功率； 为等效虚拟阻尼系数； 为系统额定角速度； 为有功参考指令； 为附加参考功率； 为预设参考频率；f 为电网实际频率； 为下垂系数； 为虚拟阻尼系数；为隔直环节时间常数； 和 分别为第一移相环节时间常数和第二移相环节时间常数；为转速偏差放大倍数；S为拉普拉斯算子；t为时间。优选地，所述虚拟励磁控制模块403，用于在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值。优选地，其中所述虚拟励磁控制模块403，在虚拟励磁控制环节，基于储能变流器的输出端电压和输出端电流获取变流器输出的内电势幅值，包括：，，其中， 为内电势幅值； 为调节器增益； 为比例积分选择因子； 和 分别为第一电压调节器时间常数和第二电压调节器时间常数； 为预设励磁调压器参考电压阈值；V为虚拟励磁调压器实际电压信号； 为d轴的电流内环参考值； 为滤波器时间常数； 为储能变流器端电压； 为变流器输出端电流； 为调差电阻， 为调差电抗；j表示复数； 为励磁绕组时间常数； 为暂态电势； 为与励磁电压呈线性关系的强制空载电动势； 为同步电抗； 为d轴暂态电抗；S为拉普拉斯算子。优选地，所述电压外环虚拟电路控制模块404，用于在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值。优选地，其中所述电压外环虚拟电路控制模块404，在电压外环虚拟电路控制环节，基于所述内电势幅值计算电流内环参考值，包括：，其中， 和 分别为在d轴和q轴下的电流内环参考值；和分别为风机在d轴和q轴的虚拟内电势， ， ， 为内电势幅值；和分别为风机在d轴和q轴的实测端电压； 为支路总阻抗， 和 均为真实阻抗参数， 和 均为虚拟阻抗参数；j表示复数。优选地，所述电流内环控制模块405，用于在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压。优选地，其中所述电流内环控制模块405，在电流内环控制环节，基于所述电流内环参考值和内电势虚拟相位角确定三相静止坐标系下的参考电压，包括：在电流内环控制环节，基于所述电流内环参考值确定内电势控制输出信号，包括：，其中， 和 分别为在d轴和q轴下的内电势控制输出信号； 和 分别为在d轴和q轴下的变流器端电压； 和 分别为在d轴和q轴下变流器注入电网的电流实际值；和 分别为在d轴和q轴下的电流内环参考值； 为变流器输出内电势虚拟角速度；L为输出线路上的电感； 和 分别构成为在q轴和d轴下的电流状态反馈量； 和 均为PI控制参数；S为拉普拉斯算子；基于所述内电势虚拟相位角对所述内电势控制输出信号进行派克反变换，以获取三相静止坐标系下的参考电压。优选地，所述脉冲控制模块406，用于基于PWM发生器根据所述参考电压输出的触发脉冲对储能系统进行控制。本发明的实施例的基于构网型变流器的储能系统控制系统400与本发明的另一个实施例的基于构网型变流器的储能系统控制方法200相对应，在此不再赘述。基于本发明的另一方面，本发明提供一种计算机可读存储介质，其上存储有计算机程序，该程序被处理器执行时实现一种基于构网型变流器的储能系统控制方法中任一项的步骤。基于本发明的另一方面，本发明提供一种电子设备，包括：上述的计算机可读存储介质；以及一个或多个处理器，用于执行所述计算机可读存储介质中的程序。已经通过参考少量实施方式描述了本发明。然而，本领域技术人员所公知的，正如附带的专利权利要求所限定的，除了本发明以上公开的其他的实施例等同地落在本发明的范围内。通常地，在权利要求中使用的所有术语都根据他们在技术领域的通常含义被解释，除非在其中被另外明确地定义。所有的参考“一个/所述/该”都被开放地解释为所述装置、组件等中的至少一个实例，除非另外明确地说明。这里公开的任何方法的步骤都没必要以公开的准确的顺序运行，除非明确地说明。本领域内的技术人员应明白，本发明的实施例可提供为方法、系统、或计算机程序产品。因此，本发明可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本发明是参照根据本发明实施例的方法、设备、和计算机程序产品的流程图和／或方框图来描述的。应理解可由计算机程序指令实现流程图和／或方框图中的每一流程和／或方框、以及流程图和／或方框图中的流程和／或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的步骤。最后应当说明的是：以上实施例仅用以说明本发明的技术方案而非对其限制，尽管参照上述实施例对本发明进行了详细的说明，所属领域的普通技术人员应当理解：依然可以对本发明的具体实施方式进行修改或者等同替换，而未脱离本发明精神和范围的任何修改或者等同替换，其均应涵盖在本发明的权利要求保护范围之内。
