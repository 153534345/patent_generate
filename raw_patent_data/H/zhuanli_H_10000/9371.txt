标题title
起发一体航空发动机转速测量方法及装置
摘要abst
本发明公开了一种起发一体航空发动机转速测量方法，所述起发一体航空发动机包括与航空发动机同轴固连的无刷直流电机以及基于六步换向法对无刷直流电机进行控制的电机控制电路，电机控制电路包括由6个功率开关管所组成的三相逆变桥及其驱动电路；对电机控制电路中的直流母线电流进行采样并同时测量所述无刷直流电机的第一电机转速和第二电机转速；将直流母线电流采样值与预设阈值进行比较，当小于所述阈值时，将第一电机转速作为航空发动机转速输出，否则，将第二电机转速作为航空发动机转速输出。本发明还公开了一种起发一体航空发动机转速测量装置。相比现有技术本发明无需传感器，且可同时满足电动机状态和发电机状态的测速准确性。
权利要求书clms
1.一种起发一体航空发动机转速测量方法，所述起发一体航空发动机包括与航空发动机同轴固连的无刷直流电机以及基于六步换向法对所述无刷直流电机进行控制的电机控制电路，所述电机控制电路包括由6个功率开关管所组成的三相逆变桥及其驱动电路；其特征在于，对电机控制电路中的直流母线电流进行采样并同时测量所述无刷直流电机的第一电机转速和第二电机转速；将直流母线电流采样值与预设阈值进行比较，当小于所述阈值时，将第一电机转速作为航空发动机转速输出，否则，将第二电机转速作为航空发动机转速输出；其中，第二电机转速是根据无刷直流电机反电动势测得；第一电机转速采用以下方法得到：对三相逆变桥的6个功率开关管的驱动信号：A_H、A_L、B_H、B_L、C_H、C_L进行以下逻辑运算：T＝∪∪，然后对所生成的输出信号T进行三分频处理并使得所生成三分频信号的高电平上升沿与驱动信号A_L的上升沿同相，最后以所述三分频信号的周期作为无刷直流电机的电周期计算出无刷直流电机的第一电机转速。2.一种起发一体航空发动机转速测量装置，所述起发一体航空发动机包括与航空发动机同轴固连的无刷直流电机以及基于六步换向法对所述无刷直流电机进行控制的电机控制电路，所述电机控制电路包括由6个功率开关管所组成的三相逆变桥及其驱动电路；其特征在于，所述转速测量装置包括：第一电机转速测量单元，用于采用以下方法测量所述无刷直流电机的第一电机转速：对三相逆变桥的6个功率开关管的驱动信号：A_H、A_L、B_H、B_L、C_H、C_L进行以下逻辑运算：T＝∪∪，然后对所生成的输出信号T进行三分频处理并使得所生成三分频信号的高电平上升沿与驱动信号A_L的上升沿同相，最后以所述三分频信号的周期作为无刷直流电机的电周期计算出无刷直流电机的第一电机转速；第二电机转速测量单元，用于根据无刷直流电机反电动势测量所述无刷直流电机的第二电机转速；电机状态判断及自动切换模块，用于对电机控制电路中的直流母线电流进行采样并将直流母线电流采样值与预设阈值进行比较，当小于所述阈值时，将第一电机转速作为航空发动机转速输出，否则，将第二电机转速作为航空发动机转速输出。3.如权利要求2所述起发一体航空发动机转速测量装置，其特征在于，所述第一电机转速测量单元包括逻辑电路、三进制计数器、电压比较器；所述逻辑电路用于进行所述逻辑运算，其输出端同时与所述三进制计数器的时钟信号输入端以及所述电压比较器的正输入端连接，所述三进制计数器的输出端连接所述电压比较器的负输入端，所述电压比较器的输出端作为第一电机转速测量单元的输出端。4.如权利要求3所述起发一体航空发动机转速测量装置，其特征在于，所述逻辑电路包括第一～第九二极管以及第一～第四电阻；第一～第六二极管的负极与A_H、B_L、B_H、C_L、C_H、A_L一一对应连接，第一二极管的正极和第二二极管的正极同时连接第一电阻的一端、第七二极管的正极，第三二极管的正极和第四二极管的正极同时连接第二电阻的一端、第八二极管的正极，第五二极管的正极和第六二极管的正极同时连接第三电阻的一端、第九二极管的正极，第一电阻的另一端、第二电阻的另一端、第三电阻的另一端分别连接工作电源，第四电阻的一端同时连接第七二极管的负极、第八二极管的负极、第九二极管的负极并作为该逻辑电路的输出端，第四电阻的另一端接地。5.如权利要求2所述起发一体航空发动机转速测量装置，其特征在于，所述第二电机转速测量单元包括：一个N型MOSFET、一个P型MOSFET、一个运算放大器，两个缩小比例相同的电压缩小电路，以及一个电位约等于母线电压1/2倍的虚拟零点；其中一个电压缩小电路的输入端连接虚拟零点，其输出端连接运算放大器的反相输入端；另一个电压缩小电路的输入端连接所述无刷直流电机的其中一相，其输出端同时与N型MOSFET的栅极、P型MOSFET的栅极连接；N型MOSFET的源极、P型MOSFET的源极同时连接运算放大器的同相输入端，N型MOSFET的漏极连接工作电源，P型MOSFET的漏极接地。
说明书desc
技术领域本发明涉及航空发动机控制技术领域，尤其涉及一种起发一体航空发动机转速测量方法及装置。背景技术在航空发动机控制中，发动机转速是一个非常重要的被控量，对发动机的控制本质上是对其转速的控制，同时转速也是评价发动机性能的一个重要参数。因此，转速测量的准确性及稳定性，直接影响到发动机的控制效果。在起发一体航空发动机设计中，常常采用无刷直流电机作为起动发电机，航空发动机与无刷直流电机转轴固连，无刷直流电机在起动时拖动航空发动机叶片转动加速气流进入气路以向燃烧室供氧，航空发动机运行时拖转无刷直流电机向外输出电能。由于起发一体航空发动机的起动发电机与发动机固连，所以可以考虑通过测量无刷直流电机的转速来间接得到航空发动机转速。目前针对无刷直流电机两种运行状态下的测速方法有以下几类：1)光电机械传感器：如专利CN205539027U、CN214703899U、CN108683368A等，其转速测量依靠传感器，结构复杂，且增大了电机体积。2)反电动势测试法：如专利CN105634341A、CN101877566A等，其依靠采集三相电压换算为PWM信号，这种方法在发电机状态下相对稳定，但是在电动机状态下高频噪声、反激电压、强电流导线周围电磁干扰等问题严重，在实际测试中非常不稳定尤其是在低转速下更是难以捕获PWM信号，输出信号畸变严重。3)测速芯片换算法：如CN102916630A等，该方法主要是依据三相电压换算为转子位置信号，进而求出电机转速，该方法更适用于测量无刷直流电机转子位置，且需要依靠电机位置传感器。4)霍尔传感器逻辑运算法：如CN110417310B、CN111654210A等，该方法在电动机、发电机两种状态下利用霍尔传感器和MOSFET驱动逻辑计算转速，这种方法逻辑运算复杂且抗干扰能力较弱，当传感器失效或收到严重干扰时，复杂的逻辑运算会输出错误的信号从而严重影响控制效果，而且有感电机体积大，不适合作为起发一体航空发动机的起动机使用。对于起发一体航空发动机而言，总是希望起动电机的体积越小越好，体积过大会严重加大发动机装配难度以及降低进气道空气流通速率；其次，一般的测速方法都会选择霍尔传感器、编码器、位置传感器等，但航空发动机空中飞行时其工况不确定性较大，时常处于振动、高温等条件下，传感器可能会有失灵现象，在军事应用中更是要考虑电磁干扰问题，这对传感器的稳定性及装配时的固定性提出了较高的要求；因此，最好采用无传感器的测速方案。而现有无刷直流电机测速方案或者需要使用传感器，或者无法兼顾电动机状态和发电机状态的测速准确性，均无法满足起发一体航空发动机的测速要求。发明内容本发明所要解决的技术问题在于克服现有技术不足，提供一种起发一体航空发动机转速测量方法，通过测量无刷直流电机的转速来间接得到航空发动机转速，无需传感器，且可同时满足电动机状态和发电机状态的测速准确性。本发明具体采用以下技术方案解决上述技术问题：一种起发一体航空发动机转速测量方法，所述起发一体航空发动机包括与航空发动机同轴固连的无刷直流电机以及基于六步换向法对所述无刷直流电机进行控制的电机控制电路，所述电机控制电路包括由6个功率开关管所组成的三相逆变桥及其驱动电路；对电机控制电路中的直流母线电流进行采样并同时测量所述无刷直流电机的第一电机转速和第二电机转速；将直流母线电流采样值与预设阈值进行比较，当小于所述阈值时，将第一电机转速作为航空发动机转速输出，否则，将第二电机转速作为航空发动机转速输出；其中，第二电机转速是根据无刷直流电机反电动势测得；第一电机转速采用以下方法得到：对三相逆变桥的6个功率开关管的驱动信号：A_H、A_L、B_H、B_L、C_H、C_L进行以下逻辑运算：T＝∪∪，然后对所生成的输出信号T进行三分频处理并使得所生成三分频信号的高电平上升沿与驱动信号A_L的上升沿同相，最后以所述三分频信号的周期作为无刷直流电机的电周期计算出无刷直流电机的第一电机转速。基于同一发明构思还可以得到以下技术方案：一种起发一体航空发动机转速测量装置，所述起发一体航空发动机包括与航空发动机同轴固连的无刷直流电机以及基于六步换向法对所述无刷直流电机进行控制的电机控制电路，所述电机控制电路包括由6个功率开关管所组成的三相逆变桥及其驱动电路；所述转速测量装置包括：第一电机转速测量单元，用于采用以下方法测量所述无刷直流电机的第一电机转速：对三相逆变桥的6个功率开关管的驱动信号：A_H、A_L、B_H、B_L、C_H、C_L进行以下逻辑运算：T＝∪∪，然后对所生成的输出信号T进行三分频处理并使得所生成三分频信号的高电平上升沿与驱动信号A_L的上升沿同相，最后以所述三分频信号的周期作为无刷直流电机的电周期计算出无刷直流电机的第一电机转速；第二电机转速测量单元，用于根据无刷直流电机反电动势测量所述无刷直流电机的第二电机转速；电机状态判断及自动切换模块，用于对电机控制电路中的直流母线电流进行采样并将直流母线电流采样值与预设阈值进行比较，当小于所述阈值时，将第一电机转速作为航空发动机转速输出，否则，将第二电机转速作为航空发动机转速输出。优选地，所述第一电机转速测量单元包括逻辑电路、三进制计数器、电压比较器；所述逻辑电路用于进行所述逻辑运算，其输出端同时与所述三进制计数器的时钟信号输入端以及所述电压比较器的正输入端连接，所述三进制计数器的输出端连接所述电压比较器的负输入端，所述电压比较器的输出端作为第一电机转速测量单元的输出端。进一步优选地，所述逻辑电路包括第一～第九二极管以及第一～第四电阻；第一～第六二极管的负极与A_H、B_L、B_H、C_L、C_H、A_L一一对应连接，第一二极管的正极和第二二极管的正极同时连接第一电阻的一端、第七二极管的正极，第三二极管的正极和第四二极管的正极同时连接第二电阻的一端、第八二极管的正极，第五二极管的正极和第六二极管的正极同时连接第三电阻的一端、第九二极管的正极，第一电阻的另一端、第二电阻的另一端、第三电阻的另一端分别连接工作电源，第四电阻的一端同时连接第七二极管的负极、第八二极管的负极、第九二极管的负极并作为该逻辑电路的输出端，第四电阻的另一端接地。优选地，所述第二电机转速测量单元包括：一个N型MOSFET、一个P型MOSFET、一个运算放大器，两个缩小比例相同的电压缩小电路，以及一个电位约等于母线电压1/2倍的虚拟零点；其中一个电压缩小电路的输入端连接虚拟零点，其输出端连接运算放大器的反相输入端；另一个电压缩小电路的输入端连接所述无刷直流电机的其中一相，其输出端同时与N型MOSFET的栅极、P型MOSFET的栅极连接；N型MOSFET的源极、P型MOSFET的源极同时连接运算放大器的同相输入端，N型MOSFET的漏极连接工作电源，P型MOSFET的漏极接地。相比现有技术，本发明具有以下有益效果：本发明针对起发一体航空发动机的转速测量问题，通过测量无刷直流电机的转速来间接得到航空发动机转速，本发明采用两种无传感器测量方案同时进行电机转速测量，并根据电机工作状态的识别结果选择相应的测量通道结果输出，本发明技术方案无需传感器，且可同时满足电动机状态和发电机状态的测速准确性。附图说明图1为本发明起发一体航空发动机转速测量装置一个具体实施例的原理框图；图2为具体实施例中的电机控制电路图；图3为具体实施例中的电机状态判断模块电路图；图4为具体实施例中第一电机转速测量单元的电路图；图5为具体实施例中第二电机转速测量单元的电路图；图6为具体实施例中的自动切换模块的电路图。具体实施方式针对起发一体航空发动机的转速测量问题，基于航空发动机与无刷直流电机转轴固连的结构特点，本发明的解决思路是通过测量无刷直流电机的转速来间接得到航空发动机转速，这样，问题就转化为对无传感器无刷直流电机转速测量问题。起发一体航空发动机上的无刷直流电机具有以下特点：不需要非常精准的转速控制，在电动机状态下持续时间短、力矩大、电流强，短时间内需要带动叶片到达较高转速；当发动机点火成功后，由于燃油的做功，使得电动机的出力迅速减少进而快速由电动机状态变为发电机状态，并且发电机状态下电机的反电动势幅值范围大。这里便提出了三个难点：如何区分电动机状态和发电机状态并进行同步测速；在不增加软件算法和电动机成本的条件下，如何寻求在不同运行状态下以最优的测速方法实现无传感器测速，尤其是无刷直流电机驱动电路中，电机输入是一种PWM波，其软件控制逻辑未知；如何做到全过程测速即无需软件或人为切换电动机测速法和发电机测速法的条件下连续测速，发电机状态下反电动势幅值范围大，不能采用固定电阻分压加以限制，该如何限制电机反电动势幅值。为解决上述问题，本发明所提出的起发一体航空发动机转速测量方法，具体如下：所述起发一体航空发动机包括与航空发动机同轴固连的无刷直流电机以及基于六步换向法对所述无刷直流电机进行控制的电机控制电路，所述电机控制电路包括由6个功率开关管所组成的三相逆变桥及其驱动电路；对电机控制电路中的直流母线电流进行采样并同时测量所述无刷直流电机的第一电机转速和第二电机转速；将直流母线电流采样值与预设阈值进行比较，当小于所述阈值时，将第一电机转速作为航空发动机转速输出，否则，将第二电机转速作为航空发动机转速输出；其中，第二电机转速是根据无刷直流电机反电动势测得；第一电机转速采用以下方法得到：对三相逆变桥的6个功率开关管的驱动信号：A_H、A_L、B_H、B_L、C_H、C_L进行以下逻辑运算：T＝∪∪，然后对所生成的输出信号T进行三分频处理并使得所生成三分频信号的高电平上升沿与驱动信号A_L的上升沿同相，最后以所述三分频信号的周期作为无刷直流电机的电周期计算出无刷直流电机的第一电机转速。起发一体航空发动机转速测量装置，所述起发一体航空发动机包括与航空发动机同轴固连的无刷直流电机以及基于六步换向法对所述无刷直流电机进行控制的电机控制电路，所述电机控制电路包括由6个功率开关管所组成的三相逆变桥及其驱动电路；所述转速测量装置包括：第一电机转速测量单元，用于采用以下方法测量所述无刷直流电机的第一电机转速：对三相逆变桥的6个功率开关管的驱动信号：A_H、A_L、B_H、B_L、C_H、C_L进行以下逻辑运算：T＝∪∪，然后对所生成的输出信号T进行三分频处理并使得所生成三分频信号的高电平上升沿与驱动信号A_L的上升沿同相，最后以所述三分频信号的周期作为无刷直流电机的电周期计算出无刷直流电机的第一电机转速；第二电机转速测量单元，用于根据无刷直流电机反电动势测量所述无刷直流电机的第二电机转速；电机状态判断及自动切换模块，用于对电机控制电路中的直流母线电流进行采样并将直流母线电流采样值与预设阈值进行比较，当小于所述阈值时，将第一电机转速作为航空发动机转速输出，否则，将第二电机转速作为航空发动机转速输出。为了便于公众理解，下面通过一个具体实施例并结合附图来对本发明的技术方案进行详细说明：本实施例中起发一体航空发动机中的起动发电机为无刷直流电机，其电机控制电路的控制架构如图1中上部虚线框所示，电子控制器根据给定转速及实际转速通过PID算法控制PWM控制器生成PWM信号，并基于六步换向法，通过采集三相反电动势与过零比较法控制三相逆变桥的换向。本实施例中转速测量装置的基本结构如图1中下部虚线框所示，分别采集三相逆变桥的母线电流、六个MOSFET驱动信号及电机三相电压，然后分别输入电机状态判断及自动切换模块、电动机状态测速单元和发电机状态测速单元中。如图1所示，电动机状态测速单元包括逻辑电路、三进制计数器、电压比较器；所述逻辑电路用于对三相逆变桥的6个功率开关管的驱动信号：A_H、A_L、B_H、B_L、C_H、C_L进行以下逻辑运算：T＝∪∪，其输出端同时与所述三进制计数器的时钟信号输入端以及所述电压比较器的正输入端，所述三进制计数器的输出端连接所述电压比较器的负输入端，所述电压比较器的输出端作为第一电机转速测量单元的输出端，三进制计数器与电压比较器的作用是对所生成的输出信号T进行三分频处理并使得所生成三分频信号的高电平上升沿与驱动信号A_L的上升沿同相，这样，电压比较器输出的方波信号的周期即为电动机状态下的无刷直流电机的电周期，据此即可计算出无刷直流电机在电动机状态下的电机转速。发电机状态测速单元由钳位电路和迟滞比较器组成，将电机三相电压接为星型接法，星型连接所形成的虚拟零点作为迟滞比较器的参考电位；采集C相电压通过钳位电路后接到迟滞比较器的正端，当该相电压产生一个完整的梯形波时，迟滞比较器输出端输出一个方波信号，该方波信号的周期等于相电压周期即电周期，据此即可计算出无刷直流电机在发电机状态下的电机转速。电机状态判断及自动切换模块由电流采集芯片及其外围电路、电压比较器及电子开关同步器组成，其作用是将直流母线电流采样值与预设阈值进行比较，当小于所述阈值时，将电动机状态测速单元的测速结果作为航空发动机转速输出，否则，将发电机状态测速单元的测速结果作为航空发动机转速输出。本实施例中电机控制电路如图2所示，其由两个模块组成，一是开关电路，用来调节三相逆变桥输入电压的有效值从而控制电机转速；二是三相逆变桥，采用六步换向法驱动无刷直流电机。其中P型三极管Q7、P型MOS管Q8组成了PWM输出电路，通过控制Q7的开断可控制三项逆变桥的输入电压有效值，进而控制电机转速；后级电路为三相全控逆变桥，母线接串联一个二极管和采样电阻，二极管的作用是防止电机感应电动势过大烧坏电源即防止反向电流注入电源，采样电阻用来采集母线电流，进而判断电机运行状态。本实施例中电动机状态测速单元测速方案与CN102916630A、CN110417310B、CN111654210A等不同，该状态下的测速方法是通过采集六个MOSFET的驱动信号作为二分频逻辑电路的输入，将六个MOSFET编号为A_H、A_L、B_H、B_L、C_H、C_L，分为三组分别为A_H和B_L、B_H和C_L、C_H和A_H。三组的逻辑为：T＝∪∪该逻辑电路模块的输出为一个周期为T的方波信号，这个方波信号作为后面的三分频逻辑电路模块的输入信号。经过三分频模块后输出一个周期为T/3的方波信号，该信号周期等于电周期即电机转速的p倍，p为电机极对数且该方波的高电平上升沿与驱动信号上升沿同相。其具体电路如图3所示，该电路设计中没有直接采用六分频模块的原因是要保留正向电压输入时的驱动信号，目的是为了与发电机状态测速单元的输出同相。分为三组的目的是作为三进制计数器的输入，计数器电路逻辑如表1所示，其中，第一行表示六步换向的一个周期，第一列表示图3中对应标号位置的输出电平，数字1表示逻辑电平为“高”数字0表示逻辑电平为“低”。QA与QB的逻辑为“与非”，既QA和QB二者均为高电平输出时则向CLR输出一个低电平，该低电平立即将QA、QB清零。QA、QB后还有一个“或”门，“或”门输出接到电压比较器的负端，该比较器的另一端接计数器时钟输入。表1中在t4时刻Speed_M端输出高电平，该高电平持续时间为t5-t4，且该方波周期等于电机的电周期。除了三进制计数器能够作为本设计中的三分频模块，D触发器或JK触发器也能够实现三分频，但是考虑到器件越多延时越大，此处采用最简单的三进制计数器作为三分频模块。表1t1t2t3t4t5t6A组100000B组001000C组000010QA110000QB001100负111100正101010本实施例中发电机状态测速单元的设计思路是采集三相电动势与过零点进行比较从而判断电机转速，在电机转速较高且不再吸收功率时，电机所产生的反电动势波形比较平稳，三相反电动势A、B、C相产生相位互差120°的梯形波，该梯形波的周期能够反映电机转速。与专利CN105634341A、CN101877566A的方案不同，本设计中没有位置传感器、测速发电机的辅助。首先是设计一个虚拟零点作为参考点，再采集某一相电动势作为比较电压，通过过零比较器模块输出方波信号，该方波信号的周期就是电周期。这里需要解决的问题就是电压波动问题，虚拟零点的电位是波动的、反电动势电压也是波动的。本实施例中采用如图4所示的电路结构，可有效解决电压抖动问题。如图4所示，首先通过电阻R25、R26、R27设计一个虚拟零点，将该虚拟零点缩小五倍后作为电压比较器的负端输入。同理，将电机某一相也缩小相同倍数输入给Q14、Q15，Q14的S极与Q15的S极相连接在运放正端输入，基于运放“虚短、虚断”特性该点电位在Q14、Q15关断时保持虚拟零点电位。由于MOSFET的导通时栅极与源极要有一定的电位差，所以该模块能够滤除相电压在虚拟零点周围的抖动，设MOSFET的导通电压为UGS。当C相电压大于虚拟零点电位UGS时，Q15导通，电压比较器的正端输入为5V，Speed_G输出端为高电平；当C相电压小于虚拟零点电位UGS时，Q14导通，电压比较器的正端输入为0V，Speed_G输出端为低电平。R29的作用是为了在Q14导通时防止短路。此时电压比较器的Speed_G端输出方波信号且该方波信号周期等于电周期。本实施例中电机状态判断模块的电路如图5所示，其中电流采集模块使用电压采集芯片MAX4173采集母线电流，通过该电流判断电机的运行状态从而切换不同的测速方法。VCC_out点电位的计算公式如下：VCC_out＝gain·-)其中，gain为芯片固定增益值。VCC_out反映了电机吸收电源功率的能力，电流采集模块的输出与一个电压比较器相连，通过调节R10可以改变参考电位，当VCC_out小于该参考电位时即母线电流小于某一值时，可认为此时电动机已经不在从电池吸收电能，可以认为电机的运行状态由电动机切换到发电机状态。Choose点电位为高，表示电机处于电动机运行状态；Choose点电位为低，表示电机处于发电机运行状态。本实施例中自动切换模块的电路结构如图6所示，其设计思路是根据电机状态判断模块的输出信号Choose点电位来控制电子开关器件，从而切换信号输出通道。如图6所示，该自动切换模块由三极管Q11及P型MOSFET Q12、N型MOSFET Q13组成。该模块可以控制转速信号由谁给定，当电机运行状态判断模块Choose点输出电位为高时，Q11关断，Q12、Q13的栅极拉低，则Q12导通Q13关断，转速信号由电动机状态测速模块给定；当电机运行状态判断模块Choose点输出电位为低时，Q11导通，Q12、Q13的栅极拉高，则Q12关断Q13导通，转速信号由电动机状态测速模块给定。该切换装置使用电子开关控制输出信号的给定，对开断频率要求较高Q12、Q13应当使用高频低压MOS管，本发明中无论是电动机状态测速模块还是发电机测速模块输出方波周期均为电机的电周期，假设该装置输出方波频率为f，发动机转速为n，所使用的无刷直流电机的极对数为p，那么通过以下公式可求得发动机转速：其次，本实施例的电动机状态测速单元在电机C相电压波形正半周时给定高电平，在电机C相电压波形负半周给定低电平，发电机状态测速单元同样也在电机C相电压波形正半轴时给定高电平，在电机C相电压波形负半轴给定低电平。所以，通过上述自动切换模块可以实现电机两种运行状态下转速信号输出的平滑过渡。
