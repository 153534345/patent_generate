标题title
一种基于自动驾驶的通信方法、装置、系统、设备及介质
摘要abst
本申请提供一种基于自动驾驶的通信方法，所述方法包括：监听传输队列的入队事件；所述传输队列用于存储第一域中第一运行控制节点对应组件发送的第一数据；在监听到所述入队事件时，调用所述入队事件对应的第一回调函数，通过所述第一回调函数调用目标发送函数；通过所述目标发送函数将所述入队事件对应的目标第一数据从所述传输队列发送至所述第一运行控制节点对应的操作系统抽象层，以使得所述操作系统抽象层将所述目标第一数据发送给第二域中的第二运行控制节点；基于反应器模式建立自动驾驶的数据传输系统，实现了跨域运行控制节点间数据的通信，达到了低时延高并发的通信效果，不依赖任何收费软件协议和第三方库，便于自主开发和持续开发。
权利要求书clms
1.一种基于自动驾驶的通信方法，其特征在于，所述方法包括：监听传输队列的入队事件；所述传输队列用于存储第一域中第一运行控制节点对应组件发送的第一数据；在监听到所述入队事件时，调用所述入队事件对应的第一回调函数，通过所述第一回调函数调用目标发送函数；通过所述目标发送函数将所述入队事件对应的目标第一数据从所述传输队列发送至所述第一运行控制节点对应的操作系统抽象层，以使得所述操作系统抽象层将所述目标第一数据发送给第二域中的第二运行控制节点；其中，所述目标发送函数是同步非阻塞输入输出接口模型中封装的函数。2.根据权利要求1所述的一种基于自动驾驶的通信方法，其特征在于，所述方法还包括：监听所述操作系统抽象层的接收事件；所述接收事件指示接收到第二域中第二运行控制节点的第二数据；在监听到所述接收事件时，调用所述接收事件对应的第二回调函数，通过所述第二回调函数调用目标接收函数；通过所述目标接收函数将所述接收事件对应的目标第二数据从所述操作系统抽象层发送至传输接口，以使得所述传输接口将所述目标第二数据发送给所述第一运行控制节点中的组件；其中，所述目标接收函数是同步非阻塞输入输出接口模型中封装的函数。3.根据权利要求2所述的一种基于自动驾驶的通信方法，其特征在于，所述监听为循环监听，直至监听到目标事件时，调用所述目标事件对应的回调函数；所述目标事件为所述入队事件和所述接收事件中的任一事件。4.根据权利要求3所述的一种基于自动驾驶的通信方法，其特征在于，所述方法还包括：获取目标事件和与目标事件对应的回调函数；建立并存储所述目标事件和对应的回调函数的对应关系。5.根据权利要求1所述的一种基于自动驾驶的通信方法，其特征在于，所述操作系统抽象层通过操作系统协议栈将所述目标第一数据发送给第二域中的第二运行控制节点。6.根据权利要求2所述的一种基于自动驾驶的通信方法，其特征在于，所述接收事件对应的第二数据通过所述操作系统协议栈获取到。7.一种基于自动驾驶的通信装置，其特征在于，所述装置包括：监听模块，用于监听传输队列的入队事件；所述传输队列用于存储第一域中第一运行控制节点对应组件发送的第一数据；调用模块，用于在监听到所述入队事件时，调用所述入队事件对应的第一回调函数，通过所述第一回调函数调用目标发送函数；传输模块，用于通过所述目标发送函数将所述入队事件对应的目标第一数据从所述传输队列发送至所述第一运行控制节点对应的操作系统抽象层，以使得所述操作系统抽象层将所述目标第一数据发送给第二域中的第二运行控制节点；其中，所述目标发送函数是同步非阻塞输入输出接口模块中封装的函数。8.根据权利要求7所述的一种基于自动驾驶的通信装置，其特征在于，所述装置还包括：收集模块，用于获取目标事件和与目标事件对应的回调函数；建立并存储所述目标事件和对应的回调函数的对应关系。9.一种基于自动驾驶的通信系统，其特征在于，所述系统包括：至少两个跨域的运行控制节点，以及与每个所述跨域的运行控制节点对应的操作系统抽象层和操作系统；所述跨域的运行控制节点分别与对应的所述操作系统抽象层连接，所述操作系统抽象层与对应的所述操作系统连接；每个所述跨域的运行控制节点分别包括组件、传输接口、反应器和同步非阻塞输入输出接口模型；所述组件与所述传输接口连接，所述传输接口分别与所述反应器和所述同步非阻塞输入输出接口模型连接，所述反应器分别与所述同步非阻塞输入输出接口模型和所述操作系统抽象层连接，所述同步非阻塞输入输出接口模型与所述操作系统抽象层连接；不同域内的操作系统相互连接；跨域的运行控制节点内组件之间通信时，所述反应器：监听传输队列的入队事件；所述传输队列用于存储第一域中第一运行控制节点对应组件发送的第一数据；在监听到所述入队事件时，调用所述入队事件对应的第一回调函数，通过所述第一回调函数调用目标发送函数；通过所述目标发送函数将所述入队事件对应的目标第一数据从所述传输队列发送至所述第一运行控制节点对应的操作系统抽象层，以使得所述操作系统抽象层将所述目标第一数据发送给第二域中的第二运行控制节点；其中，所述目标发送函数是同步非阻塞输入输出接口模型中封装的函数。10.一种电子设备，其特征在于，包括处理器和存储器，所述存储器中存储有至少一条指令或者至少一段程序，所述至少一条指令或者所述至少一段程由所述处理器加载并执行以实现如权利要求1～6中任一项所述的基于自动驾驶的通信方法。11.一种计算机可读存储介质，所述存储介质中存储有至少一条指令或者至少一段程序，所述至少一条指令或者所述至少一段程序由处理器加载并执行以实现如权利要求1～6任一项所述的基于自动驾驶的通信方法。
说明书desc
技术领域本申请涉及自动驾驶技术领域，特别涉及一种基于自动驾驶的通信方法、装置、系统、设备及介质。背景技术现有的自动驾驶系统中通信中间件大部分是基于DDS实现的，DDS实现了分布式的实时通信协议，采用发布/订阅体系架构，强调以数据为中心，提供丰富的QoS服务质量策略，实现了数据中间层的访问，但是DDS也有其固有缺点，使用商业化的DDS不能实现自身平台商业利益最大化，而开源的DDS也是不能实现功能点全域自主开发，同时依赖第三方库众多，对迭代开发和升级造成影响，DDS中间件分布式的设计和依赖高层协议也带来了时延的增加。发明内容本申请为克服上述现有技术存在的缺陷而提供一种低时延高并发的基于自动驾驶的通信方法、装置、系统、设备及介质。为解决上述技术问题，本申请提供以下技术方案：根据本申请实施例的第一方面，提供了一种基于自动驾驶的通信方法，所述方法包括：监听传输队列的入队事件；所述传输队列用于存储第一域中第一运行控制节点对应组件发送的第一数据；在监听到所述入队事件时，调用所述入队事件对应的第一回调函数，通过所述第一回调函数调用目标发送函数；通过所述目标发送函数将所述入队事件对应的目标第一数据从所述传输队列发送至所述第一运行控制节点对应的操作系统抽象层，以使得所述操作系统抽象层将所述目标第一数据发送给第二域中的第二运行控制节点；其中，所述目标发送函数是同步非阻塞输入输出接口模型中封装的函数。在一个示例性的实施方式中，所述方法还包括：监听所述操作系统抽象层的接收事件；所述接收事件指示接收到第二域中第二运行控制节点的第二数据；在监听到所述接收事件时，调用所述接收事件对应的第二回调函数，通过所述第二回调函数调用目标接收函数；通过所述目标接收函数将所述接收事件对应的目标第二数据从所述操作系统抽象层发送至传输接口，以使得所述传输接口将所述目标第二数据发送给所述第一运行控制节点中的组件；其中，所述目标接收函数是同步非阻塞输入输出接口模型中封装的函数。在一个示例性的实施方式中，所述监听为循环监听，直至监听到目标事件时，调用所述目标事件对应的回调函数；所述目标事件为所述入队事件和所述接收事件中的任一事件。在一个示例性的实施方式中，所述方法还包括：获取目标事件和与目标事件对应的回调函数；建立并存储所述目标事件和对应的回调函数的对应关系。在一个示例性的实施方式中，所述操作系统抽象层通过操作系统协议栈将所述目标第一数据发送给第二域中的第二运行控制节点。在一个示例性的实施方式中，所述接收事件对应的第二数据通过所述操作系统协议栈获取到。根据本申请实施例的第二方面，提供了一种基于自动驾驶的通信装置，所述装置包括：监听模块，用于监听传输队列的入队事件；所述传输队列用于存储第一域中第一运行控制节点对应组件发送的第一数据；调用模块，用于在监听到所述入队事件时，调用所述入队事件对应的第一回调函数，通过所述第一回调函数调用目标发送函数；传输模块，用于通过所述目标发送函数将所述入队事件对应的目标第一数据从所述传输队列发送至所述第一运行控制节点对应的操作系统抽象层，以使得所述操作系统抽象层将所述目标第一数据发送给第二域中的第二运行控制节点；其中，所述目标发送函数是同步非阻塞输入输出接口模块中封装的函数。在一个示例性的实施方式中，所述装置还包括：监听模块，还用于监听所述操作系统抽象层的接收事件；所述接收事件指示接收到第二域中第二运行控制节点的第二数据；调用模块，还用于在监听到所述接收事件时，调用所述接收事件对应的第二回调函数，通过所述第二回调函数调用目标接收函数；传输模块，还用于通过所述目标接收函数将所述接收事件对应的目标第二数据从所述操作系统抽象层发送至传输接口，以使得所述传输接口将所述目标第二数据发送给所述第一运行控制节点中的组件；其中，所述目标接收函数是同步非阻塞输入输出接口模型中封装的函数。在一个示例性的实施方式中，所述装置还包括：收集模块，用于获取目标事件和与目标事件对应的回调函数；建立并存储所述目标事件和对应的回调函数的对应关系。根据本申请实施例的第三方面，提供了一种基于自动驾驶的通信系统，所述系统包括：至少两个跨域的运行控制节点，以及与每个所述跨域的运行控制节点对应的操作系统抽象层和操作系统；所述跨域的运行控制节点分别与对应的所述操作系统抽象层连接，所述操作系统抽象层与对应的所述操作系统连接；每个所述跨域的运行控制节点分别包括组件、传输接口、反应器和同步非阻塞输入输出接口模型；所述组件与所述传输接口连接，所述传输接口分别与所述反应器和所述同步非阻塞输入输出接口模型连接，所述反应器分别与所述同步非阻塞输入输出接口模型和所述操作系统抽象层连接，所述同步非阻塞输入输出接口模型与所述操作系统抽象层连接；不同域内的操作系统相互连接；跨域的运行控制节点内组件之间通信时，所述反应器：监听传输队列的入队事件；所述传输队列用于存储第一域中第一运行控制节点对应组件发送的第一数据；在监听到所述入队事件时，调用所述入队事件对应的第一回调函数，通过所述第一回调函数调用目标发送函数；通过所述目标发送函数将所述入队事件对应的目标第一数据从所述传输队列发送至所述第一运行控制节点对应的操作系统抽象层，以使得所述操作系统抽象层将所述目标第一数据发送给第二域中的第二运行控制节点；其中，所述目标发送函数是同步非阻塞输入输出接口模型中封装的函数。在一个示例性的实施方式中，所述反应器还包括：监听所述操作系统抽象层的接收事件；所述接收事件指示接收到第二域中第二运行控制节点的第二数据；在监听到所述接收事件时，调用所述接收事件对应的第二回调函数，通过所述第二回调函数调用目标接收函数；通过所述目标接收函数将所述接收事件对应的目标第二数据从所述操作系统抽象层发送至传输接口，以使得所述传输接口将所述目标第二数据发送给所述第一运行控制节点中的组件；其中，所述目标接收函数是同步非阻塞输入输出接口模型中封装的函数。根据本申请实施例的第四方面，提供了一种电子设备，包括处理器和存储器，所述存储器中存储有至少一条指令或者至少一段程序，所述至少一条指令或者所述至少一段程由所述处理器加载并执行以实现上述的基于自动驾驶的通信方法。根据本申请实施例的第五方面，提供了一种计算机可读存储介质，所述存储介质中存储有至少一条指令或者至少一段程序，所述至少一条指令或者所述至少一段程序由处理器加载并执行以实现上述的基于自动驾驶的通信方法。采用上述技术方案，本申请具有如下有益效果：本申请提供的一种基于自动驾驶的通信方法、装置、系统、设备及介质，基于反应器模式建立自动驾驶的数据传输系统，具备高效的监听分发机制，实现了跨域运行控制节点间数据的通信，达到了低时延高并发的通信效果，并且实现了全域自主开发，不依赖任何收费软件协议，不使用第三方库，便于自主开发和持续开发。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例提供的一种基于自动驾驶的通信方法的流程示意图；图2为本申请实施例提供的另一种基于自动驾驶的通信方法的流程示意图；图3为本申请实施例提供的一种基于自动驾驶的通信装置的结构框图；图4为本申请实施例提供的一种基于自动驾驶的通信系统的工作流程架构图；图5为本申请实施例提供的运行一种基于自动驾驶的通信方法的电子设备的硬件结构框图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述。显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有作出创造性劳动的前提下所获得的所有其他实施例，都属于本申请保护的范围。此处所称的“一个实施例”或“实施例”是指可包含于本申请至少一个实现方式中的特定特征、结构或特性。在本申请实施例的描述中，需要理解的是，术语“上”、“下”、“顶”、“底”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本申请和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本申请的限制。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含的包括一个或者更多个该特征。而且，术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本申请的实施例能够以除了在这里图示或描述的那些以外的顺序实施。在自动驾驶领域，基于域控制器的电子电气架构，其将整车的电子电气部件划分到诸如自动驾驶域、底盘域、动力域、车身域等几个域内，每个域内会有一个域控制器和与其通过网络相连的传感器、电控单元和执行器等电子部件，不同的域控制器之间通过网络相连。节点是自动驾驶各个域内一个独立的运行控制系统，组件是代表自动驾驶中的一个原子功能即一个最小应用，例如自动驾驶系统的传感器激光雷达、毫米波雷达、摄像头等都可以作为一个组件。每个域内节点中可以包含很多的组件。本发明主要实现的功能是实现跨域不同节点中组件之间的网络通信功能。在一个实施例中，本发明的具体应用场景请参阅图4，其所示为本申请实施例提供的一种基于自动驾驶的通信系统的工作流程架构图，该系统包括：多个跨域的运行控制节点，以及与多个跨域的运行控制节点对应的操作系统抽象层和操作系统；多个跨域的运行控制节点分别与对应的操作系统抽象层连接，操作系统抽象层与对应的操作系统连接；每个运行控制节点包括组件、传输接口、反应器和同步非阻塞输入输出接口模型；组件与传输接口连接，传输接口分别与反应器和同步非阻塞输入输出接口模型连接，反应器分别与同步非阻塞输入输出接口模型和操作系统抽象层连接，同步非阻塞输入输出接口模型与操作系统抽象层连接。不同域内的操作系统相互连接通信，多个跨域的运行控制节点通过传输接口、反应器和同步非阻塞输入输出接口模型的设置以实现跨域不同节点中组件之间的网络通信功能。基于上述自动驾驶的通信系统，以下介绍本申请一种基于自动驾驶的通信方法的具体实施例，请参阅图1，其所示为本申请实施例提供的一种基于自动驾驶的通信方法的流程示意图，本说明书提供了如实施例或流程图的方法操作步骤，但基于常规或者无创造性的劳动可以包括更多或者更少的操作步骤。实施例中列举的步骤顺序仅仅为众多步骤执行顺序中的一种方式，不代表唯一的执行顺序。在实际中的系统或服务器产品执行时，可以按照实施例或者附图所示的方法顺序执行或者并行执行。该基于自动驾驶的通信方法包括:步骤S101：监听传输队列的入队事件；传输队列用于存储第一域中第一运行控制节点对应组件发送的第一数据；步骤S102：在监听到入队事件时，调用入队事件对应的第一回调函数，通过第一回调函数调用目标发送函数；步骤S103：通过目标发送函数将入队事件对应的目标第一数据从传输队列发送至第一运行控制节点对应的操作系统抽象层，以使得操作系统抽象层将目标第一数据发送给第二域中的第二运行控制节点；其中，目标发送函数是同步非阻塞输入输出接口模型中封装的函数。在一个具体的实施例中，通过步骤S101监听传输队列的入队事件，其中，传输队列是传输接口中的队列，由传输接口进行维护，传输队列用于存储第一域中第一运行控制节点对应组件发送的第一数据，即当第一域中第一运行控制节点对应组件发送第一数据至传输队列时，触发入队事件，其中，组件用于存储需要传输的第一数据；在监听到入队事件时，执行步骤S102，用于调用入队事件对应的第一回调函数，再通过第一回调函数调用目标发送函数，其中，目标发送函数是同步非阻塞输入输出接口模型中封装的函数；再执行步骤S103，通过目标发送函数将入队事件对应的目标第一数据从传输队列发送至第一运行控制节点对应的操作系统抽象层，以使得操作系统抽象层将目标第一数据发送给第二域中的第二运行控制节点；通过步骤S101～S103，使得第一数据从第一域中第一运行控制节点发送至第二域中第二运行控制节点，完成跨域运行控制节点间的数据发送；该种基于自动驾驶的通信方法是基于反应器模式建立的数据传输系统，进行多个域控制器间的数据传输，在反应器模式下，当监听到有传感器数据触发入队事件时，就将入队事件插入就绪队列，再进行分发后通过调用对应的函数将数据从传输队列发送至与该域控制器对应的操作系统抽象层，该监听动作可同时监听该域控制器中多个传感器数据对应的入队事件，并在监听到不同的入队事件时，将多个入队事件插入就绪队列，再分别针对就绪队列中的多个入队事件进行分发后，通过调用分别与多个入队事件对应的函数，使不同的数据分别从传输队列发送至与该域控制器对应的操作系统抽象层，再通过该操作系统抽象层发送至其他域控制器，采用反应器模式联接多个域控制器间的数据传输，以反应器模式为纽带，便于数据在多个域控制器间进行实时高效的监听分发，该模式具备高效的监听分发机制，实现了高并发的跨域运行控制节点间的数据通信，又利用同步非阻塞输入输出接口模型，使得传输过程中的响应更快，具有低时延的特点，进而达到了低时延高并发的通信效果，并且该种基于自动驾驶的通信方法实现了全域自主开发，不依赖任何收费软件协议，且不使用第三方库，便于自主开发和持续开发。请参阅图2，其所示为本申请实施例提供的另一种基于自动驾驶的通信方法的流程示意图，该基于自动驾驶的通信方法还包括:步骤S201：监听操作系统抽象层的接收事件；接收事件指示接收到第二域中第二运行控制节点的第二数据；步骤S202：在监听到接收事件时，调用接收事件对应的第二回调函数，通过第二回调函数调用目标接收函数；步骤S203：通过目标接收函数将接收事件对应的目标第二数据从操作系统抽象层发送至传输接口，以使得传输接口将目标第二数据发送给第一运行控制节点中的组件；其中，目标接收函数是同步非阻塞输入输出接口模型中封装的函数。在一个具体的实施例中，通过步骤S201监听操作系统抽象层的接收事件，其中，接收事件指示接收到第二域中第二运行控制节点的第二数据，即当操作系统抽象层接收到第二域中第二运行控制节点的第二数据后，触发接收事件；在监听到接收事件时，执行步骤S202，用于调用接收事件对应的第二回调函数，再通过第二回调函数调用目标接收函数，其中，目标接收函数是同步非阻塞输入输出接口模型中封装的函数；再执行步骤S203，通过目标接收函数将接收事件对应的目标第二数据从操作系统抽象层发送至传输接口，以使得传输接口将目标第二数据发送给第一运行控制节点中的组件，在接收的过程中，目标第二数据由第一运行控制节点中的传输接口直接发送给第一运行控制节点中的组件，目标第二数据不进入传输接口中的传输队列；通过步骤S201～S203，使得第二数据从第二域中第二运行控制节点接收至第一域中第一运行控制节点，完成跨域运行控制节点间的数据接收；该种基于自动驾驶的通信方法是基于反应器模式建立的数据传输系统，进行多个域控制器间的数据传输，在反应器模式下，当监听到有传感器数据触发接收事件时，就将接收事件插入就绪队列，再进行分发后通过调用对应的函数将数据从该域控制器对应的操作系统抽象层发送至传输接口，此时，数据不入队列，该监听动作可同时监听该域控制器中多个传感器数据对应的接收事件，并在监听到不同的接收事件时，将多个接收事件插入就绪队列，再分别针对就绪队列中的多个接收事件进行分发后，通过调用分别与多个接收事件对应的函数，使不同的数据分别从该域控制器对应的操作系统抽象层接收至传输接口，完成数据的跨域接收，采用反应器模式联接多个域控制器间的数据传输，以反应器模式为纽带，便于数据在多个域控制器间进行实时高效的监听分发，该模式具备高效的监听分发机制，实现了高并发的跨域运行控制节点间的数据通信，又利用同步非阻塞输入输出接口模型，使得传输过程中的响应更快，具有低时延的特点，进而达到了低时延高并发的通信效果，并且该种基于自动驾驶的通信方法实现了全域自主开发，不依赖任何收费软件协议，且不使用第三方库，便于自主开发和持续开发。具体的，监听为循环监听，直至监听到目标事件时，调用目标事件对应的回调函数；目标事件为入队事件和接收事件中的任一事件。在一个具体的实施例中，循环监听事件；当监听到目标事件时，调用与目标事件相对应的回调函数，用于数据的发送或接收；当监听到的事件不是目标事件时，直接返回，等待下一循环，不会对线程的执行造成阻塞；当没有事件发生时，则会进行睡眠等待。具体的，本申请实施例还可以包括使目标事件和回调函数相对应的步骤，该步骤具体包括：获取目标事件和与目标事件对应的回调函数；建立并存储目标事件和对应的回调函数的对应关系。在一个具体的实施例中，获取目标事件和与目标事件对应的回调函数后，建立并存储目标事件和对应的回调函数的对应关系，以便于在监听到目标事件后即时调用该目标事件对应的回调函数，同时可有效避免回调函数的错误调用。具体的，操作系统抽象层通过操作系统协议栈将目标第一数据发送给第二域中的第二运行控制节点。在一个具体的实施例中，当操作系统抽象层把目标第一数据发送给操作系统协议栈后，在操作系统协议栈中触发可写事件，当监听到可写事件后，调用传输接口与可写事件对应的写函数，将目标第一数据从操作系统协议栈发送至操作系统，其中，监听为循环监听，直至监听到可写事件，才会调用与可写事件对应的写函数，用于目标第一数据的发送。具体的，接收事件对应的第二数据通过操作系统协议栈获取到。在一个具体的实施例中，当操作系统协议栈接收到第二数据后，在操作系统协议栈中触发可读事件，当监听到可读事件后，调用传输接口与可读事件对应的读函数，将第二数据从操作系统协议栈接收至操作系统抽象层，其中，监听为循环监听，直至监听到可读事件，才会调用与可读事件对应的读函数，用于第二数据的接收。由本申请实施例的上述技术方案可见，本申请实施例基于反应器模式建立自动驾驶的数据传输系统，具备高效的监听分发机制，实现了跨域运行控制节点间数据的通信，达到了低时延高并发的通信效果，并且实现了全域自主开发，不依赖任何收费软件协议，不使用第三方库，便于自主开发和持续开发。请参阅图3，其所示为本申请实施例提供的一种基于自动驾驶的通信装置的结构框图，该基于自动驾驶的通信装置包括：监听模块，用于监听传输队列的入队事件；传输队列用于存储第一域中第一运行控制节点对应组件发送的第一数据；调用模块，用于在监听到入队事件时，调用入队事件对应的第一回调函数，通过第一回调函数调用目标发送函数；传输模块，用于通过目标发送函数将入队事件对应的目标第一数据从传输队列发送至第一运行控制节点对应的操作系统抽象层，以使得操作系统抽象层将目标第一数据发送给第二域中的第二运行控制节点；其中，目标发送函数是同步非阻塞输入输出接口模块中封装的函数。在一个具体的实施例中，通过监听模块监听传输队列的入队事件，其中，传输队列是传输接口中的队列，由传输接口进行维护，传输队列用于存储第一域中第一运行控制节点对应组件发送的第一数据，即当第一域中第一运行控制节点对应组件发送第一数据至传输队列时，触发入队事件，其中，组件用于存储需要传输的第一数据；在监听到入队事件时，利用调用模块调用入队事件对应的第一回调函数，再通过第一回调函数调用目标发送函数，其中，目标发送函数是同步非阻塞输入输出接口模块中封装的函数；再利用传输模块通过目标发送函数将入队事件对应的目标第一数据从传输队列发送至第一运行控制节点对应的操作系统抽象层，以使得操作系统抽象层将目标第一数据发送给第二域中的第二运行控制节点；通过上述模块，使得第一数据从第一域中第一运行控制节点发送至第二域中第二运行控制节点，完成跨域运行控制节点间的数据发送；该种基于自动驾驶的通信装置是基于反应器模式建立的数据传输系统，进行多个域控制器间的数据传输，在反应器模式下，当监听到有传感器数据触发入队事件时，就将入队事件插入就绪队列，再进行分发后通过调用对应的函数将数据从传输队列发送至与该域控制器对应的操作系统抽象层，该监听动作可同时监听该域控制器中多个传感器数据对应的入队事件，并在监听到不同的入队事件时，将多个入队事件插入就绪队列，再分别针对就绪队列中的多个入队事件进行分发后，通过调用分别与多个入队事件对应的函数，使不同的数据分别从传输队列发送至与该域控制器对应的操作系统抽象层，再通过该操作系统抽象层发送至其他域控制器，采用反应器模式联接多个域控制器间的数据传输，以反应器模式为纽带，便于数据在多个域控制器间进行实时高效的监听分发，该模式具备高效的监听分发机制，实现了高并发的跨域运行控制节点间的数据通信，又利用同步非阻塞输入输出接口模块，使得传输过程中的响应更快，具有低时延的特点，进而达到了低时延高并发的通信效果，并且该种基于自动驾驶的通信装置实现了全域自主开发，不依赖任何收费软件协议，且不使用第三方库，便于自主开发和持续开发。具体的，本申请实施例还可以包括上述各模块用于数据接收的功能，具体包括：监听模块，还用于监听所述操作系统抽象层的接收事件；所述接收事件指示接收到第二域中第二运行控制节点的第二数据；调用模块，还用于在监听到所述接收事件时，调用所述接收事件对应的第二回调函数，通过所述第二回调函数调用目标接收函数；传输模块，还用于通过所述目标接收函数将所述接收事件对应的目标第二数据从所述操作系统抽象层发送至传输接口，以使得所述传输接口将所述目标第二数据发送给所述第一运行控制节点中的组件；其中，所述目标接收函数是同步非阻塞输入输出接口模型中封装的函数。在一个具体的实施例中，通过监听模块监听操作系统抽象层的接收事件，其中，接收事件指示接收到第二域中第二运行控制节点的第二数据，即当操作系统抽象层接收到第二域中第二运行控制节点的第二数据后，触发接收事件；在监听到接收事件时，利用调用模块调用接收事件对应的第二回调函数，再通过第二回调函数调用目标接收函数，其中，目标接收函数是同步非阻塞输入输出接口模块中封装的函数；再利用传输模块通过目标接收函数将接收事件对应的目标第二数据从操作系统抽象层发送至传输接口，以使得传输接口将目标第二数据发送给第一运行控制节点中的组件，在接收的过程中，目标第二数据由第一运行控制节点中的传输接口直接发送给第一运行控制节点中的组件，目标第二数据不进入传输接口中的传输队列；通过上述模块，使得第二数据从第二域中第二运行控制节点接收至第一域中第一运行控制节点，完成跨域运行控制节点间的数据接收；该种基于自动驾驶的通信装置是基于反应器模式建立的数据传输系统，进行多个域控制器间的数据传输，在反应器模式下，当监听到有传感器数据触发接收事件时，就将接收事件插入就绪队列，再进行分发后通过调用对应的函数将数据从该域控制器对应的操作系统抽象层发送至传输接口，此时，数据不入队列，该监听动作可同时监听该域控制器中多个传感器数据对应的接收事件，并在监听到不同的接收事件时，将多个接收事件插入就绪队列，再分别针对就绪队列中的多个接收事件进行分发后，通过调用分别与多个接收事件对应的函数，使不同的数据分别从该域控制器对应的操作系统抽象层接收至传输接口，完成数据的跨域接收，采用反应器模式联接多个域控制器间的数据传输，以反应器模式为纽带，便于数据在多个域控制器间进行实时高效的监听分发，该模式具备高效的监听分发机制，实现了高并发的跨域运行控制节点间的数据通信，又利用同步非阻塞输入输出接口模块，使得传输过程中的响应更快，具有低时延的特点，进而达到了低时延高并发的通信效果，并且该种基于自动驾驶的通信装置实现了全域自主开发，不依赖任何收费软件协议，且不使用第三方库，便于自主开发和持续开发。具体的，本申请实施例还可以包括收集目标事件和与目标事件对应的回调函数的模块，该模块具体包括：收集模块，用于获取目标事件和与目标事件对应的回调函数；建立并存储目标事件和对应的回调函数的对应关系。在一个具体的实施例中，收集模块在获取目标事件和与目标事件对应的回调函数后，建立并存储目标事件和对应的回调函数的对应关系，以便于在监听到目标事件后即时通过收集模块调用该目标事件对应的回调函数，并有效避免回调函数的错误调用。需要说明的是，上述实施例提供的装置，在实现其功能时，仅以上述各功能模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能模块完成，即将设备的内部结构划分成不同的功能模块，以完成以上描述的全部或者部分功能。另外，上述实施例提供的装置与方法实施例属于同一构思，其具体实现过程详见方法实施例，这里不再赘述。本申请实施例的基于自动驾驶的通信装置基于反应器模式建立自动驾驶的数据传输系统，具备高效的监听分发机制，实现了跨域运行控制节点间数据的通信，达到了低时延高并发的通信效果，并且实现了全域自主开发，不依赖任何收费软件协议，不使用第三方库，便于自主开发和持续开发。在一个具体的实施例中，请参阅图4，其所示为本申请实施例提供的一种基于自动驾驶的通信系统的工作流程架构图，该系统包括：至少两个跨域的运行控制节点，以及与每个跨域的运行控制节点对应的操作系统抽象层和操作系统；多个跨域运行控制节点分别与对应的操作系统抽象层连接，操作系统抽象层与对应的操作系统连接；每个运行控制节点分别包括组件、传输接口、反应器和同步非阻塞输入输出接口模型；组件与传输接口连接，传输接口分别与反应器和同步非阻塞输入输出接口模型连接，反应器分别与同步非阻塞输入输出接口模型和操作系统抽象层连接，同步非阻塞输入输出接口模型与操作系统抽象层连接；不同域内的操作系统相连接。在一个实施例中，反应器模块是一种实现高并发的网络设计模式，Reactor模块主线程实现接受工作者线程的网络事件和对应的handle函数注册，并循环监听网络事件到来。当Reactor主线程检测到工作者线程的网络事件的到来，就调用该网络事件对应的handle函数，通知工作者线程处理所属的网络事件。在一个实施例中，同步非阻塞输入输出接口模型封装了操作系统nonblockingsocket接口，例如实现connect、listen、read、write等功能。对于每个socket的建立都会将该socket的对应网络事件，例如可读事件、可写事件、连接事件等注册到反应器模块上，反应器模块会实现对该socket上的事件进行实时监听。同步非阻塞输入输出接口模型使得工作者线程在收发网络数据时，当未能取得网络资源后，将直接将返回，继续其它工作，不会对线程的执行造成阻塞而延迟。同时依托于反应器模块高效的监听分发机制，实现了系统的高效率、低延时通信性能。在一个实施例中，传输接口模块实现对消息的最高层发送接口封装，在传输接口中维护一个传输队列，该队列与一个casa_event事件关联。casa_event结构如下：typedefstructcasa_Event{intreadingFD；intwritingFD；char name；}casa_Event；casa_event结构中的readingFD、int、writingFD是无名管道的读写fd，将event与管道联系在一起，随后将读写fd注册到Reactor模块上进行监听，当有相应的事件到来时，就开始调用对应的handle函数。在transport发送队列中绑定的可写事件，当传输队列中有消息加入时，即触发可写事件，Reactor模块监听到对应fd可写事件后，就调用绑定的NIOsocket的接口回调函数，将数据发送到网络中。跨域的运行控制节点内组件之间通信时，所述反应器执行：监听传输队列的入队事件；所述传输队列用于存储第一域中第一运行控制节点对应组件发送的第一数据；在监听到所述入队事件时，调用所述入队事件对应的第一回调函数，通过所述第一回调函数调用目标发送函数；通过所述目标发送函数将所述入队事件对应的目标第一数据从所述传输队列发送至所述第一运行控制节点对应的操作系统抽象层，以使得所述操作系统抽象层将所述目标第一数据发送给第二域中的第二运行控制节点；其中，所述目标发送函数是同步非阻塞输入输出接口模型中封装的函数。在一个示例性的实施方式中，所述反应器还包括：监听所述操作系统抽象层的接收事件；所述接收事件指示接收到第二域中第二运行控制节点的第二数据；在监听到所述接收事件时，调用所述接收事件对应的第二回调函数，通过所述第二回调函数调用目标接收函数；通过所述目标接收函数将所述接收事件对应的目标第二数据从所述操作系统抽象层发送至传输接口，以使得所述传输接口将所述目标第二数据发送给所述第一运行控制节点中的组件；其中，所述目标接收函数是同步非阻塞输入输出接口模型中封装的函数。在一个具体的实施例中，以第三域中的第三运行控制节点和第四域中的第四运行控制节点中数据传输的工作流程为例，说明如下：①数据从第三域中的第三运行控制节点传输至第四域中的第四运行控制节点的发送流程，具体如下：在第三域中的第三运行控制节点中，第三组件将第三数据发送至第三传输接口；第三传输接口接收到第三数据后，将第三数据放入第三传输接口中的第三传输队列，触发第三入队事件；第三反应器进行循环监听，在监听到第三入队事件时，调用第三入队事件对应的第三反应器中的第三回调函数，通过第三回调函数调用第三同步非阻塞输入输出接口模型中封装的第三目标发送函数；通过第三目标发送函数将第三入队事件对应的目标第三数据从第三传输队列发送至第三运行控制节点对应的第三操作系统抽象层；第三操作系统抽象层通过第三操作系统协议栈将目标第三数据发送给第三操作系统；第三操作系统再将目标第三数据发送给第四域中第四运行控制节点对应的第四操作系统。②数据从第三域中的第三运行控制节点传输至第四域中的第四运行控制节点的接收流程，具体如下：第四域中第四运行控制节点对应的第四操作系统接收到目标第三数据后，通过第四操作系统协议栈接收至第四运行控制节点对应的第四操作系统抽象层，触发第四接收事件；第四反应器进行循环监听，在监听到第四接收事件时，调用第四接收事件对应的第四反应器中的第四回调函数，通过第四回调函数调用第四同步非阻塞输入输出接口模型中封装的第四目标接收函数；通过第四目标接收函数将第四接收事件对应的目标第三数据从第四操作系统抽象层发送至第四传输接口，此时，目标第三数据不入第四传输队列；第四传输接口将目标第三数据发送至第四运行控制节点中的第四组件。本申请实施例基于反应器模式建立自动驾驶的数据传输系统，具备高效的监听分发机制，实现了跨域运行控制节点间数据的通信，达到了低时延高并发的通信效果。与上述实施例提供的基于自动驾驶的通信方法相对应，本申请实施例还提供一种基于自动驾驶的通信装置，由于本申请实施例提供的基于自动驾驶的通信装置与上述实施例提供的基于自动驾驶的通信方法相对应，因此前述基于自动驾驶的通信方法的实施方式也适用于本实施例提供的基于自动驾驶的通信装置，在本实施例中不再详细描述。本申请实施例还提供了一种电子设备，包括处理器和存储器，存储器中存储有至少一条指令或者至少一段程序，至少一条指令或者至少一段程由处理器加载并执行以实现如上述方法实施例所提供的基于自动驾驶的通信方法。存储器可用于存储软件程序以及模块，处理器通过运行存储在存储器的软件程序以及模块，从而执行各种功能应用以及基于自动驾驶的通信。存储器可主要包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、功能所需的应用程序等；存储数据区可存储根据设备的使用所创建的数据等。此外，存储器可以包括高速随机存取存储器，还可以包括非易失性存储器，例如至少一个磁盘存储器件、闪存器件、或其他易失性固态存储器件。相应地，存储器还可以包括存储器控制器，以提供处理器对存储器的访问。本申请实施例所提供的方法实施例可以在计算机终端、服务器或者类似的运算装置中执行，即上述电子设备可以包括计算机终端、服务器或者类似的运算装置。图5是本申请实施例提供的运行一种基于自动驾驶的通信方法的电子设备的硬件结构框图，如图5所示，该电子设备的内部结构可包括但不限于：处理器、网络接口及存储器。其中，电子设备内的处理器、网络接口及存储器可通过总线或其他方式连接，在本说明书实施例所示图5中以通过总线连接为例。其中，处理器)是电子设备的计算核心以及控制核心。网络接口可选的可以包括标准的有线接口、无线接口。存储器是电子设备中的记忆设备，用于存放程序和数据。可以理解的是，此处的存储器可以是高速RAM存储设备，也可以是非不稳定的存储设备，例如至少一个磁盘存储设备；可选的还可以是至少一个位于远离前述处理器的存储装置。存储器提供存储空间，该存储空间存储了电子设备的操作系统，可包括但不限于：Windows系统，Linux，Android系统、IOS系统等等，本申请对此并不作限定；并且，在该存储空间中还存放了适于被处理器加载并执行的一条或一条以上的指令，这些指令可以是一个或一个以上的计算机程序。在本说明书实施例中，处理器加载并执行存储器中存放的一条或一条以上指令，以实现上述方法实施例提供的基于自动驾驶的通信方法。本申请实施例还提供了一种计算机可读存储介质，存储介质中存储有至少一条指令或者至少一段程序，至少一条指令或者至少一段程序由处理器加载并执行以实现方法实施例提供的基于自动驾驶的通信方法。可选地，在本实施例中，上述存储介质可以包括但不限于：U盘、只读存储器、随机存取存储器、移动硬盘、磁碟或者光盘等各种可以存储程序代码的介质。需要说明的是：上述本申请实施例先后顺序仅仅为了描述，不代表实施例的优劣。且上述对本说明书特定实施例进行了描述。其它实施例在所附权利要求书的范围内。在一些情况下，在权利要求书中记载的动作或步骤可以按照不同于实施例中的顺序来执行并且仍然可以实现期望的结果。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多基于自动驾驶的通信和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于装置实施例而言，由于其基本相似于方法实施例，所以描述的比较简单，相关之处参见方法实施例的部分说明即可。本领域普通技术人员可以理解实现上述实施例的全部或部分步骤可以通过硬件来完成，也可以通过程序来指令相关的硬件完成，的程序可以存储于一种计算机可读存储介质中，上述提到的存储介质可以是只读存储器，磁盘或光盘等。以上仅为本申请的较佳实施例，并不用以限制本申请，凡在本申请的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。
