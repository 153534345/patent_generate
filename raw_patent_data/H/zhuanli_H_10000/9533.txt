标题title
一种聚焦处理方法及装置、摄像装置和存储介质
摘要abst
本申请涉及一种聚焦处理方法及装置、摄像装置和存储介质，其中，所述方法包括：获取目标图像，并将所述目标图像划分成多个图像区块；分别确定所述多个图像区块的聚焦清晰度和区域属性，所述区域属性至少包括动态区域，其中，所述动态区域根据所述图像区块在前后帧图像中聚焦清晰度的变化程度确定；根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值；根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦位置。
权利要求书clms
1.一种聚焦处理方法，其特征在于，包括：获取目标图像，并将所述目标图像划分成多个图像区块；分别确定所述多个图像区块的聚焦清晰度和区域属性，所述区域属性至少包括动态区域，其中，所述动态区域根据所述图像区块在前后帧图像中聚焦清晰度的变化程度确定；根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值；根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦位置。2.根据权利要求1所述的方法，其特征在于，所述动态区域的区域属性按照下述方式确定：获取所述目标图像之前和/或之后的至少一个图像帧；确定所述目标图像及所述至少一个图像帧中同一位置处的图像块的聚焦清晰度的变化程度；在所述变化程度大于第二预设阈值的情况下，确定所述目标图像中所述位置处的图像区块的区域属性为动态区域。3.根据权利要求1所述的方法，其特征在于，所述根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值，包括：根据区域属性分别确定所述多个图像区块的权重；根据所述聚焦清晰度和所述权重，分别确定所述多个图像区块的聚焦评价值。4.根据权利要求1所述的方法，其特征在于，所述根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值，包括：确定所述目标图像所对应的拍摄场景；根据所述聚焦清晰度、所述区域属性和所述拍摄场景，分别确定所述多个图像区块的聚焦评价值。5.根据权利要求4所述的方法，其特征在于，根据所述聚焦清晰度、所述区域属性和所述拍摄场景，分别确定所述多个图像区块的聚焦评价值，包括：根据所述拍摄场景，分别确定不同的所述区域属性所对应的权重分值；根据不同的所述区域属性所对应的权重分值，确定所述聚焦清晰度的权重；根据所述聚焦清晰度和所述权重，分别确定所述多个图像区块的聚焦评价值。6.根据权利要求1所述的方法，其特征在于，所述根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值，包括：确定所述多个图像区块的聚焦清晰度的离散程度；在确定所述离散程度大于第一预设阈值的情况下，根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值。7.根据权利要求1所述的方法，其特征在于，所述根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦位置，包括：根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦评价值；在所述目标图像的聚焦评价值满足预设条件的情况下，确定所述目标图像的聚焦位置。8.根据权利要求7所述的方法，其特征在于，所述预设条件包括下述中的至少一种：所述目标图像的聚焦评价值大于预设评价值阈值；所述目标图像的聚焦评价值大于所述目标图像上一帧图像的聚焦评价值。9.一种聚焦处理装置，其特征在于，包括：图像获取模块，用于获取目标图像，并将所述目标图像划分成多个图像区块；区块信息获取模块，用于分别确定所述多个图像区块的聚焦清晰度和区域属性，所述区域属性至少包括动态区域，其中，所述动态区域根据所述图像区块在前后帧图像中聚焦清晰度的变化程度确定；评价值确定模块，用于根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值；聚焦位置确定模块，用于根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦位置。10.一种摄像装置，包括镜头组、图像传感器、存储器和处理器，其特征在于，所述存储器中存储有计算机程序，所述处理器被设置为运行所述计算机程序以执行权利要求1-6中任意一项所述的方法。11.一种非易失性计算机可读存储介质，其上存储有计算机程序指令，其特征在于，所述计算机程序指令被处理器执行时实现权利要求1-8中任意一项所述的方法。12.一种计算机程序产品，其特征在于，包括计算机可读代码，或者承载有计算机可读代码的非易失性计算机可读存储介质，当所述计算机可读代码在电子设备的处理器中运行时，所述电子设备中的处理器执行上述权利要求1-8中任意一项所述的方法。13.一种芯片，其特征在于，包括至少一个处理器，该处理器用于运行存储器中存储的计算机程序或计算机指令，以执行上述权利要求1-8中任意一项所述的方法。
说明书desc
技术领域本申请涉及成像技术领域，特别是涉及聚焦处理方法及装置、摄像装置和存储介质。背景技术自动聚焦是基于物体光反射的原理，利用摄像设备中的多个透镜采集物体的反射光，并将采集的光信号传递给摄像设备中的图像传感器。图像传感器根据所述光信号生成物体的原始图像，通过处理器对所述原始图像处理后，驱动对焦装置进行对焦的过程。相关技术中提出基于图像处理的自动聚焦技术，该技术的基本原理是预采集多个图像，且这些图像的聚焦位置不相同。然后，利用预设聚焦评价函数确定这些图像的评价值，最后，根据评价值确定合适的聚焦位置。上述技术方案需要采集多个图像，且需要计算这多个图像的评价值，处理效率较低。因此，相关技术中亟需一种高效且准确的聚焦处理方法。发明内容本申请实施例提供了一种聚焦处理方法、装置、电子设备和存储介质，以至少解决相关技术中聚焦处理方法处理效率较低的问题。第一方面，本申请实施例提供了一种聚焦处理方法，包括：获取目标图像，并将所述目标图像划分成多个图像区块；分别确定所述多个图像区块的聚焦清晰度和区域属性，所述区域属性至少包括动态区域，其中，所述动态区域根据所述图像区块在前后帧图像中聚焦清晰度的变化程度确定；根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值；根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦位置。可选的，在本申请的一个实施例中，所述动态区域的区域属性按照下述方式确定：获取所述目标图像之前和/或之后的至少一个图像帧；确定所述目标图像及所述至少一个图像帧中同一位置处的图像块的聚焦清晰度的变化程度；在所述变化程度大于第二预设阈值的情况下，确定所述目标图像中所述位置处的图像区块的区域属性为动态区域。可选的，在本申请的一个实施例中，所述根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值，包括：根据区域属性分别确定所述多个图像区块的权重；根据所述聚焦清晰度和所述权重，分别确定所述多个图像区块的聚焦评价值。可选的，在本申请的一个实施例中， 所述根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值，包括：确定所述目标图像所对应的拍摄场景；根据所述聚焦清晰度、所述区域属性和所述拍摄场景，分别确定所述多个图像区块的聚焦评价值。可选的，在本申请的一个实施例中，根据所述聚焦清晰度、所述区域属性和所述拍摄场景，分别确定所述多个图像区块的聚焦评价值，包括：根据所述拍摄场景，分别确定不同的所述区域属性所对应的权重分值；根据不同的所述区域属性所对应的权重分值，确定所述聚焦清晰度的权重；根据所述聚焦清晰度和所述权重，分别确定所述多个图像区块的聚焦评价值。可选的，在本申请的一个实施例中，所述根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值，包括：确定所述多个图像区块的聚焦清晰度的离散程度；在确定所述离散程度大于第一预设阈值的情况下，根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值。可选的，在本申请的一个实施例中，所述根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦位置，包括：根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦评价值；在所述目标图像的聚焦评价值满足预设条件的情况下，确定所述目标图像的聚焦位置。可选的，在本申请的一个实施例中，所述预设条件包括下述中的至少一种：所述目标图像的聚焦评价值大于预设评价值阈值；所述目标图像的聚焦评价值大于所述目标图像上一帧图像的聚焦评价值。第二方面，本申请实施例还提供一种聚焦处理装置，包括：图像获取模块，用于获取目标图像，并将所述目标图像划分成多个图像区块；区块信息获取模块，用于分别确定所述多个图像区块的聚焦清晰度和区域属性，所述区域属性至少包括动态区域，其中，所述动态区域根据所述图像区块在前后帧图像中聚焦清晰度的变化程度确定；评价值确定模块，用于根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值；聚焦位置确定模块，用于根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦位置。第三方面，一种摄像装置，包括镜头组、图像传感器、存储器和处理器，所述存储器中存储有计算机程序，所述处理器被设置为运行所述计算机程序以执行所述的聚焦处理方法。第四方面，一种非易失性计算机可读存储介质，其上存储有计算机程序指令，所述计算机程序指令被处理器执行时实现所述的聚焦处理方法。第五方面，一种计算机程序产品，包括计算机可读代码，或者承载有计算机可读代码的非易失性计算机可读存储介质，当所述计算机可读代码在电子设备的处理器中运行时，所述电子设备中的处理器执行所述的聚焦处理方法。第六方面，一种芯片，包括至少一个处理器，该处理器用于运行存储器中存储的计算机程序或计算机指令，以执行所述的聚焦处理方法。本申请的一个或多个实施例的细节在以下附图和描述中提出，以使本申请的其他特征、目的和优点更加简明易懂。本申请各个实施例提供的聚焦处理方法及装置、摄像装置和存储介质，可以对拍摄场景的目标图像进行聚焦处理即可确定所述目标图像中的聚焦位置，从处理成本来说，本申请实施例所提供的聚焦处理方法只需要对一张目标图像处理即可确定聚焦位置，处理成本较低、效率较高。具体从聚焦处理的实际过程来说，将所述目标图像划分成多个图像区块，并确定各个图像区块的聚焦清晰度和区域属性，并根据所述聚焦清晰度和所述区域属性，分别确定各个图像区块的聚焦评价值。赋予各个图像区块以区域属性，可以将区域属性作为一个重要的因素对图像区块能否成为聚焦位置产生影响，提升确定聚焦位置的准确性。另外，基于目标图像及其前后图像帧中图像区块聚焦清晰度的变化程度，确定出所述目标图像中具有动态区域属性的图形区块，具有较高的识别效率和识别准确性，并且符合摄像场景中对识别出动态区域的需求。附图说明此处所说明的附图用来提供对本申请的进一步理解，构成本申请的一部分，本申请的示意性实施例及其说明用于解释本申请，并不构成对本申请的不当限定。在附图中：图1是本申请实施例提供的一种应用场景示意图；图2是本申请实施例提供的聚焦处理方法的方法流程图；图3是本申请实施例提供的一种应用场景示意图；图4是本申请实施例提供的聚焦处理装置的模块结构示意图；图5是本申请实施例提供的处理设备的模块结构示意图；图6是本申请实施例提供的计算机程序产品的模块结构示意图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行描述和说明。应当理解，此处所描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。基于本申请提供的实施例，本领域普通技术人员在没有作出创造性劳动的前提下所获得的所有其他实施例，都属于本申请保护的范围。此外，还可以理解的是，虽然这种开发过程中所作出的努力可能是复杂并且冗长的，然而对于与本申请公开的内容相关的本领域的普通技术人员而言，在本申请揭露的技术内容的基础上进行的一些设计，制造或者生产等变更只是常规的技术手段，不应当理解为本申请公开的内容不充分。在本申请中提及“实施例”意味着，结合实施例描述的特定特征、结构或特性可以包含在本申请的至少一个实施例中。在说明书中的各个位置出现该短语并不一定均是指相同的实施例，也不是与其它实施例互斥的独立的或备选的实施例。本领域普通技术人员显式地和隐式地理解的是，本申请所描述的实施例在不冲突的情况下，可以与其它实施例相结合。除非另作定义，本申请所涉及的技术术语或者科学术语应当为本申请所属技术领域内具有一般技能的人士所理解的通常意义。本申请所涉及的“一”、“一个”、“一种”、“该”等类似词语并不表示数量限制，可表示单数或复数。本申请所涉及的术语“包括”、“包含”、“具有”以及它们任何变形，意图在于覆盖不排他的包含；例如包含了一系列步骤或模块的过程、方法、系统、产品或设备没有限定于已列出的步骤或单元，而是可以还包括没有列出的步骤或单元，或可以还包括对于这些过程、方法、产品或设备固有的其它步骤或单元。本申请所涉及的“连接”、“相连”、“耦接”等类似的词语并非限定于物理的或者机械的连接，而是可以包括电气的连接，不管是直接的还是间接的。本申请所涉及的“多个”是指大于或者等于两个。“和/或”描述关联对象的关联关系，表示可以存在三种关系，例如，“A和/或B”可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。本申请所涉及的术语“第一”、“第二”、“第三”等仅仅是区别类似的对象，不代表针对对象的特定排序。另外，为了更好的说明本申请，在下文的具体实施方式中给出了众多的具体细节。本领域技术人员应当理解，没有某些具体细节，本申请同样可以实施。在一些实例中，对于本领域技术人员熟知的装置、手段、元件和电路未作详细描述，以便于凸显本申请的主旨。为了清楚地示出本申请各个实施例的技术方案，下面通过图1对本申请实施例的应用环境进行说明。请参见图1，图1是本申请实施例提供的一种应用场景的示意图。图1展示了将本申请实施例所提供的聚焦处理方法应用于会议场景。具体来说，可以利用摄像装置101对会议场景进行聚焦处理，所述摄像装置101可以包括任何具有图像捕捉功能的电子设备，本申请在此不做限制。在会议场景中，可以包括参会人员、会议桌、笔记本等目标对象。本申请实施例提供一种聚焦处理装置103，所述聚焦处理装置103可以包括电子设备、非易失性计算机可读存储介质、计算机程序产品、芯片等多种形态。作为一种电子设备，所述聚焦处理装置与所述摄像装置101可以进行数据传输，并对所述摄像装置101所采集的目标图像进行处理。作为非易失性计算机可读存储介质、计算机程序产品、芯片，所述聚焦处理装置可以耦合于所述摄像装置101的内部，使得所述摄像装置101具备聚焦处理的功能，当然，还可以将所述聚焦处理装置设置于其他终端或者服务器或者云端中，通过网络传输等方式将摄像装置101所采集的目标图像发送至所述其他终端或者服务器或者云端，由所述其他终端或者服务器或者云端完成聚焦处理后，再将聚焦位置发送至所述摄像装置101。需要说明的是，本申请各个实施例所提供的聚焦处理方法和聚焦处理装置不仅可以对会议场景进行聚焦处理，还可以对人像场景、风景场景、食物场景、运动场景等多种不同的场景聚焦处理，本申请对应用场景不做任何限制。下面结合附图对本申请所述的聚焦处理方法进行详细的说明。图2是本申请提供的聚焦处理方法的一种实施例的流程示意图。虽然本申请提供了如下述实施例或附图所示的方法操作步骤，但基于常规或者无需创造性的劳动在所述方法中可以包括更多或者更少的操作步骤。在逻辑性上不存在必要因果关系的步骤中，这些步骤的执行顺序不限于本申请实施例提供的执行顺序。所述方法在实际中的聚焦处理过程中或者方法执行时，可以按照实施例或者附图所示的方法顺序执行或者并行执行。具体的，本申请提供的聚焦处理方法的一种实施例如图2所示，所述方法可以包括：S201：获取目标图像，并将所述目标图像划分成多个图像区块。本申请实施例中，可以在多种情况下获取所述目标图像，例如，可以在视频录制过程中，或者在拍照按下快门前，可以应用于任何需要聚焦的拍摄场景下，本申请中在此不做限制。在获取到所述目标图像之后，可以将所述目标图像划分成多个图像区块，例如将所述目标图像划分成M*N个图像区块。由于聚焦位置在所述目标图像是一个较小的图像区域，基于此，将所述目标图像划分成多个图像区块之后，再从所述多个图像区块中确定聚焦的位置，能够快速地确定聚焦位置。S203：分别确定所述多个图像区块的聚焦清晰度和区域属性，所述区域属性至少包括动态区域，其中，所述动态区域根据所述图像区块在前后帧图像中聚焦清晰度的变化程度确定。本申请实施例中，首先，可以分别确定所述多个图像区块的聚焦清晰度，如果将一个图像区块作为聚焦位置，那么，该图像区块需要满足清晰度要求，所述聚焦清晰度可以用于衡量对应的图像区块的清晰程度。在本申请的一个实施例中，可以利用二维高斯函数表示所述图像区块的聚焦清晰度。在一个示例中，图像区块的二维高斯函数可以表示为：其中，为所述图像区块的中心点，、是所述图像区块在水平方向和垂直方向上的标准差。当然，在其他实施例中，所述图像区块的聚焦清晰度还可以利用下述函数确定，例如Brenner梯度函数、Laplacian梯度函数、灰度方差、灰度方差乘积、方差函数、能量梯度函数、Vollath函数、熵函数等，本申请在此不做限制。本申请实施例中，所述区域属性可以包括所述图像区块所属的目标类别、图像类别等信息，其中，所述目标类别包括图像区块中目标对象的类别，如人脸、景物、食物、宠物等类别，所述图像类别可以包括所述图像区块在图像维度上的类别，具体可以根据图像参数确定，如感兴趣区域类别、静态类别、动态类别等等。所述区块属性及其判定方法可以是预先设置的。在本申请的一个实施例中，所述区域属性至少可以包括动态区域，所述动态区域可以根据所述图像区块在前后帧图像中聚焦清晰度的变化程度确定。在所述图像区块的区域属性包括动态区域的情况下，可以确定所述图像区块包括动态的目标对象，例如走动的行人等等。在本申请的一个实施例中，所述动态区域的区域属性按照下述方式确定：S301：获取所述目标图像之前和/或之后的至少一个图像帧；S303：确定所述目标图像及所述至少一个图像帧中同一位置处的图像块的聚焦清晰度的变化程度；S305：在所述变化程度大于第二预设阈值的情况下，确定所述目标图像中所述位置处的图像区块的区域属性为动态区域。本申请实施例中，首先获取所述目标图像的之前和/或之后的至少一个图像帧，。所述至少一个图像帧可以包括在所述目标图像之前所采集的至少一个图像帧和/或在所述目标图像之后所采集的至少一个图像帧。按照与对所述目标图像相同的处理方式，可以分别将所述至少一个图像帧划分成多个图像区块，所述图像区块的大小与对所述目标图像划分的图像区块大小相同。然后，分别确定所述至少一个图像帧中多个图像区块的聚焦清晰度。通过对比相同位置的图像区块的聚焦清晰度的变化程度，可以确定各个图像区块的区域属性是否包括动态区域。在确定所述聚焦清晰度的变换程度的情况下，在只有一个图像帧的情况下，所述变化程度可以包括同一位置的图像区块的聚焦清晰度的差值；在有多个图像帧的情况下，所述变化程度可以包括所述目标图像和所述多个图像帧中同一位置的图像区块的聚焦清晰度的标准差、方差等任何可用于衡量多个变量的离散程度的参数，本申请在此不做限制。在同一位置处的图像区块的聚焦清晰度的变换程度较大，例如大于第二预设阈值的情况下，可以确定所述位置处的图像区块的区域属性包括动态区域。当然，在其他实施例中，还可以通过基于Yolo模型的动态目标检测方法确定所述目标图像中动态目标，从而确定具有动态区域属性的图像区块，本申请对于确定具有动态区域属性的图像区块的方式不做限制。通过上述实施例，可以基于已经划分的图像区块和计算得到的聚焦清晰度，快速、准确地确定出所述目标图像中具有动态区域属性的图像区块。在其他实施例中，所述区域属性还可以包括感兴趣区域、人脸区域。所述感兴趣区域可以包括用户所选取的可作为聚焦位置的图像区域，例如，用户可以在取景框内选取所述感兴趣区域，具体是利用方框、圆、椭圆还是其他形状的边框选取，本申请在此不做限制。具体在确定所述感兴趣区域的过程中，可以接收用户在取景框内选取感兴趣区域的操作，响应于所述操作，可以确定用户所选取的感兴趣区域所覆盖的至少一个图像区块，并设置所述至少一个图像区块的区域属性包括感兴趣区域。在所述图像区块的区域属性包括人脸区域的情况下，可以确定所述图像区块包含人脸图像。具体在确定所述人脸区域的过程中，可以对所述目标图像进行人脸检测，在检测得到所述目标图像中包括人脸图像的情况下，可以确定所述人脸图像所覆盖的至少一个图像区块，并设置所述至少一个图像区块的区域属性包括人脸区域。需要说明的是，所述区域属性不限于上述感兴趣区域、人脸区域和动态区域，例如还可以包括景物区域、宠物面部区域等等，针对不同的应用场景，可以相应地设置与所述应用场景相匹配的区域属性，本申请在此不做限制。另外，对于同一个图像区块，可以对应有多个不同的区域属性，例如，一个图像区块，既可以具有感兴趣区域的区域属性，也可以具有人脸区域的区域属性。如图3所示的应用场景，图像区块301具有感兴趣区域和人脸区域两个区域属性，图像区块302具有人脸区域和动态区域两个区域属性，图像区块303具有动态区域的区域属性。S205：根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值。本申请实施例中，各个图像区块的聚焦评价值与所述图像区块的聚焦清晰度和区域属性相关联。在本申请的一个实施例中，可以根据所述区域属性确定各个图像区块的权重，具体来说，所述根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值，可以包括：S401：根据区域属性分别确定所述多个图像区块的权重；S403：根据所述聚焦清晰度和所述权重，分别确定所述多个图像区块的聚焦评价值。本申请实施例中，根据所述区域属性分别设置各个图像区块的权重，可以使得所述区域属性对图像区块能否成为聚焦位置产生影响。例如，本申请的一个实施例中，可以设置所述感兴趣区域、所述人脸区域与所述权重正相关，所述动态区域与所述权重负相关，也就是说，增加感兴趣区域、人脸区域对应的图像区块成为聚焦位置的概率，降低动态区域所对应的图像区块成为聚焦位置的概率。本申请各个实施例的聚焦处理方法尤其适用于会议场景的拍摄过程中，在会议场景中，参会人员的人脸图像应该成为聚焦位置，当然，用户选择了感兴趣区域，那么，感兴趣区域也可以成为聚焦位置，而会议中的动态区域由于其具有动态变化的特征，因此，不应该成为聚焦位置。在确定各个图像区块的聚焦清晰度和权重之后，可以根据所述聚焦清晰度和所述权重，确定所述图像区块的聚焦评价值。在其中的一个示例中，第i个图像区块的聚焦评价值可以表示为：其中，表示第i个图像区块的权重，表示第i个图像区块的聚焦清晰度。本申请实施例中，在确定所述权重的过程中，可以设置不同区域属性所对应的权重分值，例如，设置感兴趣区域对应的权重分值为a，人脸区域对应的权重分值为b，动态区域对应的权重分值为c，a, b, c均为正值。基于所述感兴趣区域、所述人脸区域与所述权重正相关，所述动态区域与所述权重负相关，在第i个图像区块具有感兴趣区域、人脸区域和动态区域的区域属性的情况下，其权重可以表示为： 当然，在其他实施例中，不同区域属性的权重分值也可以是动态调整的，例如，对于均具有人脸区域的两个图像区块，位于所述目标图像位置处的人脸区域的权重分值要高于位于其他位置处的人脸区域的权重分值。对于不同的拍摄场景，其区域属性的重要程度往往不相同，例如，对于人像拍摄模式，相比于其他区域属性，将人脸区域对应的图像区块作为聚焦位置比较合适，对于户外动态模式，相比于其他区域属性，将动态区域对应的图像区块作为聚焦位置比较合适。基于此，在本申请的一个实施例中，所述根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值，包括：S501：确定所述目标图像所对应的拍摄场景；S503：根据所述聚焦清晰度、所述区域属性和所述拍摄场景，分别确定所述多个图像区块的聚焦评价值。本申请实施例中，所述拍摄场景可以包括用户拍摄图像或者视频的主要目的，典型地，所述拍摄场景例如包括人像场景、风景场景、食物场景、运动场景、会议场景等。在一些实施例中，所述拍摄场景可以根据用户所选取的拍摄模式确定，在很多拍摄设备中，可以预先设定多个拍摄模式，如人像模式、美食模式、运动模式等，用户可以从中选取需要的拍摄模型。在其他实施例中，还可以对所述目标图像进行分析得到所述拍摄场景。具体来说，可以对所述目标图像进行目标检测，检测出目标对象的对象类别、数量、大小等参数，然后，可以根据上述参数确定所述目标对象所对应的拍摄场景。在一个示例中，在对所述目标图像进行目标检测，得到所述目标图像中包含人脸图像，且该人脸图像在整个目标图像中的占比大于预设占比阈值，那么，可以确定所述目标图像所对应的拍摄场景为人像场景。在确定所述目标图像所对应的拍摄场景之后，可以根据所述聚焦清晰度、所述区域属性和所述拍摄场景，分别确定所述多个图像区块的聚焦评价值。基于所述拍摄场景，可以确定各个区域属性所对应的权重分值，具体来说，根据所述聚焦清晰度、所述区域属性和所述拍摄场景，分别确定所述多个图像区块的聚焦评价值，可以包括：S601：根据所述拍摄场景，分别确定不同的所述区域属性所对应的权重分值；S603：根据不同的所述区域属性所对应的权重分值，分别确定所述多个图像区块的权重；S605：根据所述聚焦清晰度和所述权重，分别确定所述多个图像区块的聚焦评价值。本申请实施例中，在确定所述目标图像的拍摄场景之后，可以根据所述拍摄场景，分别确定不同的区域属性分别对应的权重分值。在一些具体的示例中，对于人像场景，可以设置人脸区域的权重分值最高，例如数值为8，设置感兴趣区域的权重分值为7，动态区域为-2。再如，对于风景场景，可以设置风景区域的权重分值最高，例如为数值8，设置感兴趣区域的权重分值为6，人脸区域为2，动态区域是-2。在确定各个区域属性对应的权重分值之后，可以分别确定所述多个图像区块的权重。例如，在确定图像区块所包括的区域属性之后，可以对这些区域属性对应的权重分值求和，确定所述图像区块所对应的权重。最后，可以按照上述公式确定各个图像区块的聚焦评价值。本申请实施例中，可以在所述目标图像的清晰度满足一定要求的情况下，再确定所述多个图像区块的聚焦评价值。基于此，在本申请的一个实施例中，所述根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值，可以包括：S701：确定所述多个图像区块的聚焦清晰度的离散程度；S703：在确定所述离散程度大于第一预设阈值的情况下，根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值。本申请实施例中，首先可以根据所述多个图像区块的聚焦清晰度的平均值，在所述平均值大于预设阈值的情况下，可以确定多个图像区块的聚焦清晰度的离散程度。在所述平均值大于预设阈值的情况下，可以表示所述目标图像的平均清晰度达到一定的要求。但是，即使对于平均清晰度达到一定要求的图像，也可以能出现虚焦现象的情况，虚焦现象是指整个目标图像都不清晰。基于此，可以利用所述聚焦清晰度的离散程度筛选出没有出现虚焦现象的图像。本申请实施例中，所述多个图像区块的聚焦清晰度的离散程度越大，表示不同图像区块的聚焦清晰度具有较大差异，那么，可以确定没有虚焦现象发生。在本申请的一个实施例中，所述离散程度可以包括标准差，具体可以利用下述表达式表示：其中，s表示多个图像区块的聚焦清晰度的方差，表示多个图像区块的聚焦清晰度的平均值，表示第i个图像区块的聚焦清晰度，n为图像区块的总数。S207：根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦位置。本申请实施例中，在分别确定所述多个图像区块的聚焦评价值之后，可以确定所述目标图像的聚焦位置。在本申请的一个实施例中，可以将聚焦评价值最高的图像区块作为所述目标图像的聚焦位置。在一种可能的实施例中，若有多个图像区块的聚焦评价值最高，且这些图像区块的位置很分散，那么，可以让用户指定对应的聚焦位置。具体来说，可以在摄像装置的取景框内突出显示聚焦评价值最高的多个图像区块，这样，用户可以自由选择聚焦位置。当然，在其他实施例中，还可以根据目标检测结果确定聚焦位置。例如，对于聚焦评价值最高的多个图像区块，如果检测到其中某一个图像区块中对应于人脸图像，可以将该图像区块作为聚焦位置。当然，还可以根据图像区块在所述目标图像中的位置，确定所述目标图像的聚焦位置。例如，对于位于所述目标图像中心位置的图像区块比位于边缘位置的图像区块更有可能成为所述目标图像的聚焦位置。本申请实施例中，还可以在所述目标图像的聚焦评价值满足预设条件的情况下，确定所述目标图像的聚焦位置。所述根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦位置，包括：S801：根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦评价值；S803：在所述目标图像的聚焦评价值满足预设条件的情况下，确定所述目标图像的聚焦位置。本申请实施例中，所述目标图像的聚焦评价值可以包括所述多个图像区块的聚焦评价值的和值，平均值等。所述预设条件包括下述中的至少一种：所述目标图像的聚焦评价值大于预设评价值阈值；所述目标图像的聚焦评价值大于所述目标图像上一帧图像的聚焦评价值。在其中的一个实施例中，在所述目标图像的聚焦评价值比较大的情况下，才确定在所述目标图像上选取聚焦位置；否则，可以不选取聚焦位置。在本申请的另一个实施例中，图像的聚焦评价值只有越来越好，那么，所述目标图像才有价值，否则，若比上一帧图像或者历史图像的聚焦评价值低的情况下，则可以不在所述目标图像上选取聚焦位置。本申请各个实施例提供的聚焦处理方法，可以对拍摄场景的目标图像进行聚焦处理即可确定所述目标图像中的聚焦位置，从处理成本来说，本申请实施例所提供的聚焦处理方法只需要对一张目标图像处理即可确定聚焦位置，处理成本较低、效率较高。具体从聚焦处理的实际过程来说，将所述目标图像划分成多个图像区块，并确定各个图像区块的聚焦清晰度和区域属性，并根据所述聚焦清晰度和所述区域属性，分别确定各个图像区块的聚焦评价值。赋予各个图像区块以区域属性，可以将区域属性作为一个重要的因素对图像区块能否成为聚焦位置产生影响，提升确定聚焦位置的准确性。另外，基于目标图像及其前后图像帧中图像区块聚焦清晰度的变化程度，确定出所述目标图像中具有动态区域属性的图形区块，具有较高的识别效率和识别准确性，并且符合摄像场景中对识别出动态区域的需求。本申请的实施例还提供了一种聚焦处理装置，如图4所示，所述聚焦处理模块400可以包括：图像获取模块401，用于获取目标图像，并将所述目标图像划分成多个图像区块；区块信息获取模块403，用于分别确定所述多个图像区块的聚焦清晰度和区域属性，所述区域属性至少包括动态区域，其中，所述动态区域根据所述图像区块在前后帧图像中聚焦清晰度的变化程度确定；评价值确定模块405，用于根据所述聚焦清晰度和所述区域属性，分别确定所述多个图像区块的聚焦评价值；聚焦位置确定模块407，用于根据所述多个图像区块的聚焦评价值，确定所述目标图像的聚焦位置。本申请的实施例还提供了一种摄像装置，包括镜头组、图像传感器、存储器和处理器，所述存储器中存储有计算机程序，所述处理器被设置为运行所述计算机程序以执行上述任一实施例所述的方法。其中，所述镜头组可以包括多个透镜，用于采集拍摄场景中目标对象反射的光信号，并将采集的光信号传递给图像传感器。图像传感器根据所述光信号生成目标对象的原始图像。本申请的实施例还提供了一种处理设备700，处理设备700可以是物理设备或物理设备集群，也可以是虚拟化的云设备，如云计算集群中的至少一个云计算设备。为了便于理解，本申请以处理设备700为独立的物理设备对该处理设备700的结构进行示例说明。如图5所示，处理设备700包括：处理器以及用于存储处理器可执行指令的存储器；其中，所述处理器被配置为执行所述指令时实现上述装置。处理设备700包括存储器701、处理器703、总线705和通信接口707。存储器701、处理器703和通信接口707之间通过总线701通信。总线705可以是外设部件互连标准总线或扩展工业标准结构总线等。总线可以分为地址总线、数据总线、控制总线等。为便于表示，图5中仅用一条粗线表示，但并不表示仅有一根总线或一种类别的总线。通信接口707用于与外部通信。其中，处理器703可以为中央处理器。存储器701可以包括易失性存储器，例如随机存取存储器。存储器701还可以包括非易失性存储器，例如只读存储器，快闪存储器，HDD或SSD。存储器701中存储有可执行代码，处理器703执行该可执行代码以执行前述测试场景构建方法。本申请的实施例提供了一种非易失性计算机可读存储介质，其上存储有计算机程序指令，所述计算机程序指令被处理器执行时实现上述方法。本申请的实施例提供了一种计算机程序产品，包括计算机可读代码，或者承载有计算机可读代码的非易失性计算机可读存储介质，当所述计算机可读代码在电子设备的处理器中运行时，所述电子设备中的处理器执行上述方法。计算机可读存储介质可以是可以保持和存储由指令执行设备使用的指令的有形设备。计算机可读存储介质例如可以是――但不限于――电存储设备、磁存储设备、光存储设备、电磁存储设备、半导体存储设备或者上述的任意合适的组合。计算机可读存储介质的更具体的例子包括：便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦式可编程只读存储器、静态随机存取存储器、便携式压缩盘只读存储器、数字多功能盘、记忆棒、软盘、机械编码设备、例如其上存储有指令的打孔卡或凹槽内凸起结构、以及上述的任意合适的组合。这里所描述的计算机可读程序指令或代码可以从计算机可读存储介质下载到各个计算/处理设备，或者通过网络、例如因特网、局域网、广域网和/或无线网下载到外部计算机或外部存储设备。网络可以包括铜传输电缆、光纤传输、无线传输、路由器、防火墙、交换机、网关计算机和/或边缘服务器。每个计算/处理设备中的网络适配卡或者网络接口从网络接收计算机可读程序指令，并转发该计算机可读程序指令，以供存储在各个计算/处理设备中的计算机可读存储介质中。用于执行本申请操作的计算机程序指令可以是汇编指令、指令集架构指令、机器指令、机器相关指令、微代码、固件指令、状态设置数据、或者以一种或多种编程语言的任意组合编写的源代码或目标代码，所述编程语言包括面向对象的编程语言—诸如Smalltalk、C++等，以及常规的过程式编程语言—诸如“C”语言或类似的编程语言。计算机可读程序指令可以完全地在用户计算机上执行、部分地在用户计算机上执行、作为一个独立的软件包执行、部分在用户计算机上部分在远程计算机上执行、或者完全在远程计算机或服务器上执行。在涉及远程计算机的情形中，远程计算机可以通过任意种类的网络—包括局域网或广域网—连接到用户计算机，或者，可以连接到外部计算机。在一些实施例中，通过利用计算机可读程序指令的状态信息来个性化定制电子电路，例如可编程逻辑电路、现场可编程门阵列或可编程逻辑阵列，该电子电路可以执行计算机可读程序指令，从而实现本申请的各个方面。在一些实施例中，所公开的方法可以实施为以机器可读格式被编码在计算机可读存储介质上的或者被编码在其它非瞬时性介质或者制品上的计算机程序指令。图6示意性地示出根据这里展示的至少一些实施例而布置的示例计算机程序产品的概念性局部视图，所述示例计算机程序产品包括用于在计算设备上执行计算机进程的计算机程序。在一个实施例中，示例计算机程序产品800是使用信号承载介质801来提供的。所述信号承载介质801可以包括一个或多个程序指令802，其当被一个或多个处理器运行时可以提供以上针对图1描述的功能或者部分功能。此外，图6中的程序指令802也描述示例指令。在一些示例中，信号承载介质801可以包含计算机可读介质803，诸如但不限于，硬盘驱动器、紧密盘、数字视频光盘、数字磁带、存储器、只读存储记忆体或随机存储记忆体等等。在一些实施方式中，信号承载介质801可以包含计算机可记录介质804，诸如但不限于，存储器、读/写CD、R/W DVD、等等。在一些实施方式中，信号承载介质801可以包含通信介质805,诸如但不限于，数字和/或模拟通信介质来传达。一个或多个程序指令802可以是，例如，计算机可执行指令或者逻辑实施指令。在一些示例中，诸如针对图2描述的计算设备的计算设备可以被配置为，响应于通过计算机可读介质803、计算机可记录介质804、和/或通信介质805中的一个或多个传达到计算设备的程序指令802，提供各种操作、功能、或者动作。应该理解，这里描述的布置仅仅是用于 示例的目的。因而，本领域技术人员将理解，其它布置和其它元素  能够被取而代之地使用，并且一些元素可以根据所期望的结果而一并省略。另外，所描述的元素中的许多是可以被实现为离散的或者分布式的组件的、或者以任何适当的组合和位置来结合其它组件实施的功能实体。附图中的流程图和框图显示了根据本申请的多个实施例的装置、系统、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段或指令的一部分，所述模块、程序段或指令的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个连续的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行相应的功能或动作的硬件）来实现，或者可以用硬件和软件的组合，如固件等来实现。尽管在此结合各实施例对本发明进行了描述，然而，在实施所要求保护的本发明过程中，本领域技术人员通过查看所述附图、公开内容、以及所附权利要求书，可理解并实现所述公开实施例的其它变化。在权利要求中，“包括”一词不排除其他组成部分或步骤，“一”或“一个”不排除多个的情况。单个处理器或其它单元可以实现权利要求中列举的若干项功能。相互不同的从属权利要求中记载了某些措施，但这并不表示这些措施不能组合起来产生良好的效果。以上已经描述了本申请的各实施例，上述说明是示例性的，并非穷尽性的，并且也不限于所披露的各实施例。在不偏离所说明的各实施例的范围和精神的情况下，对于本技术领域的普通技术人员来说许多修改和变更都是显而易见的。本文中所用术语的选择，旨在最好地解释各实施例的原理、实际应用或对市场中的技术的改进，或者使本技术领域的其它普通技术人员能理解本文披露的各实施例。
