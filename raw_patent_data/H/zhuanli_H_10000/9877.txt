标题title
一种自动电源切换装置及方法
摘要abst
本发明涉及一种自动电源切换装置及方法，涉及电源切换技术领域。包括第一切换电路、第二切换电路和采样判断电路；采样判断电路分别与电池、第一切换电路、第二切换电路连接，用于采集电池的输出电压得到采样电压信号，并判断采样电压信号是否低于电压设定下限值，并当采样电压信号低于电压设定下限值时，向第一切换电路输出控制信号，向第二切换电路输出控制信号和采样电压信号；当控制信号为高电平信号时第一切换电路工作；当控制信号为低电平信号时第二切换电路工作；第一切换电路用于采用市电电源为电池充电；第二切换电路用于根据采样电压信号采用发电机为电池充电。本发明通过不同级电量的电路之间的快速切换，实现不间断供电。
权利要求书clms
1.一种自动电源切换装置，其特征在于，所述自动电源切换装置包括第一切换电路、第二切换电路和采样判断电路；所述采样判断电路，分别与电池、所述第一切换电路、所述第二切换电路连接，用于：采集所述电池的输出电压以得到采样电压信号，并判断所述采样电压信号是否低于电压设定下限值；当所述采样电压信号低于所述电压设定下限值时，向所述第一切换电路输出控制信号，向所述第二切换电路输出所述控制信号和所述采样电压信号；其中，当所述控制信号为高电平信号时，所述第一切换电路工作；当所述控制信号为低电平信号时，所述第二切换电路工作；所述第一切换电路用于采用市电电源为所述电池充电；所述第二切换电路用于根据所述采样电压信号采用发电机为所述电池充电。2.根据权利要求1所述的自动电源切换装置，其特征在于，所述第一切换电路包括第一光耦、第二电阻、第四电阻、第六电阻、第二光耦、二极管、第一MOS管和第二MOS管；所述第一光耦的输入端通过第一接点与所述采样判断电路连接；所述第二电阻和所述第一MOS管分别并联在所述第一光耦的输出端；所述第二电阻的一端与所述市电电源连接，所述第二电阻的另一端通过所述第四电阻与接地端连接；所述第四电阻、所述第二MOS管和所述第二切换电路并联连接；所述第六电阻并联在所述第一MOS管的栅极和源极之间，所述第六电阻还并联在所述第二光耦的输出端；所述第二光耦的输入端通过第二接点与所述采样判断电路连接；所述第六电阻的一端通过所述二极管与所述电池连接，所述第六电阻的另一端接地。3.根据权利要求2所述的自动电源切换装置，其特征在于，所述第一切换电路还包括：第一稳压管，并联在所述第二MOS管的栅极和源极之间；第二稳压管，并联在所述第一MOS管的栅极和源极之间；第一电阻，串联在所述第一接点与所述第一光耦之间；第五电阻，串联在所述第二接点与所述第二光耦之间。4.根据权利要求2所述的自动电源切换装置，其特征在于，所述第一MOS管为N沟道MOS管，所述第二MOS管为P沟道MOS管。5.根据权利要求1所述的自动电源切换装置，其特征在于，所述第二切换电路包括第三光耦、第四光耦以及发动机启动回路；所述第三光耦的输出端、所述第四光耦的输出端以及发电机启动回路构成串联回路；所述第三光耦的输入端通过与所述采样判断电路连接，所述第三光耦用于根据所述采样电压信号接通或者断开所述串联回路；所述第四光耦的输入端与所述第一切换电路连接，所述第四光耦用于根据所述控制信号接通或者断开所述串联回路；所述发动机启动回路还与所述电池连接，所述发动机启动回路用于当所述串联回路接通时为所述电池充电。6.根据权利要求5所述的自动电源切换装置，其特征在于，所述第二切换电路还包括滞回比较器；所述第三光耦的输入端通过所述滞回比较器与所述采样判断电路连接，所述滞回比较器用于根据所述采样电压信号接通或者断开所述第三光耦，以使所述串联回路接通或者断开。7.根据权利要求1所述的自动电源切换装置，其特征在于，所述采样判断电路包括：采样电路，与所述电池连接，用于采集所述电池的输出电压以得到采样电压信号；单片机，分别与所述采样电路、所述第一切换电路和所述第二切换电路连接，用于：接收所述采样电压信号，并判断所述采样电压信号是否低于所述电压设定下限值；并当所述采样电压信号低于所述电压设定下限值时，向所述第一切换电路输出控制信号，向所述第二切换电路输出所述控制信号和所述采样电压信号；当所述采样电压信号高于电压设定上限值时，向所述第一切换电路输出第一控制信号。8.一种应用于权利要求1-7任意一项所述的自动电源切换装置的自动电源切换方法，其特征在于，所述自动电源切换方法包括：通过采样判断电路获取电池的输出电压以得到采样电压信号；判断所述采样电压信号是否低于电压设定下限值，得到第一判断结果；当所述第一判断结果为所述采样电压信号低于所述电压设定下限值时，向第一切换电路输出控制信号，向第二切换电路输出所述控制信号和所述采样电压信号，以使当所述控制信号为高电平信号时所述第一切换电路工作，当所述控制信号为低电平信号时所述第二切换电路工作；其中，所述第一切换电路用于采用市电电源为所述电池充电；所述第二切换电路用于根据所述采样电压信号采用发电机为所述电池充电。9.根据权利要求8所述的自动电源切换方法，其特征在于，所述当所述控制信号为高电平信号时所述第一切换电路工作，具体包括：当所述控制信号为高电平信号且所述采样电压信号低于所述电压设定下限值时，所述第一切换电路开始向所述电池充电；当所述采样电压信号高于电压设定上限值时，所述采样判断电路向所述第一切换电路发送第一控制信号，以使所述第一切换电路停止为所述电池充电。
说明书desc
技术领域本发明涉及电源切换技术领域，特别是涉及一种自动电源切换装置及方法。背景技术纯电动疫苗流动接种车上的车载疫苗冷藏箱等用电设备需即时供电，断电会影响接种车的正常工作，甚至会导致疫苗失效。接种车上用电设备的供电来源有动力电源，常用市电和UPS备用电源。为使接种车安全可靠的的工作，需对供电电源之间进行快速可靠的切换。现有技术中常用的切换电路有非常多，有的使用硬开关，切换速度慢；有的是只能用于同等级电量的电路切换，非常不方便。因此，亟需一种自动电源切换装置及方法，在电池快没电的时候快速的切换到其他电源供电，从而为疫苗接种车不间断供电。发明内容本发明的目的是提供一种自动电源切换装置及方法，通过不同级电量的电路之间的快速切换，实现不间断供电。为实现上述目的，本发明提供了如下方案：一种自动电源切换装置，包括第一切换电路、第二切换电路和采样判断电路；所述采样判断电路，分别与电池、所述第一切换电路、所述第二切换电路连接，用于：采集所述电池的输出电压以得到采样电压信号，并判断所述采样电压信号是否低于电压设定下限值；当所述采样电压信号低于所述电压设定下限值时，向所述第一切换电路输出控制信号，向所述第二切换电路输出所述控制信号和所述采样电压信号；其中，当所述控制信号为高电平信号时，所述第一切换电路工作；当所述控制信号为低电平信号时，所述第二切换电路工作；所述第一切换电路用于采用市电电源为所述电池充电；所述第二切换电路用于根据所述采样电压信号采用发电机为所述电池充电。可选地，所述第一切换电路包括第一光耦、第二电阻、第四电阻、第六电阻、第二光耦、二极管、第一MOS管和第二MOS管；所述第一光耦的输入端通过第一接点与所述采样判断电路连接；所述第二电阻和所述第一MOS管分别并联在所述第一光耦的输出端；所述第二电阻的一端与所述市电电源连接，所述第二电阻的另一端通过所述第四电阻与接地端连接；所述第四电阻、所述第二MOS管和所述第二切换电路并联连接；所述第六电阻并联在所述第一MOS管的栅极和源极之间，所述第六电阻还并联在所述第二光耦的输出端；所述第二光耦的输入端通过第二接点与所述采样判断电路连接；所述第六电阻的一端通过所述二极管与所述电池连接，所述第六电阻的另一端接地。可选地，所述第一切换电路还包括：第一稳压管，并联在所述第二MOS管的栅极和源极之间；第二稳压管，并联在所述第一MOS管的栅极和源极之间；第一电阻，串联在所述第一接点与所述第一光耦之间；第五电阻，串联在所述第二接点与所述第二光耦之间。可选地，所述第一MOS管为N沟道MOS管，所述第二MOS管为P沟道MOS管。可选地，所述第二切换电路包括第三光耦、第四光耦以及发动机启动回路；所述第三光耦的输出端、所述第四光耦的输出端以及发电机启动回路构成串联回路；所述第三光耦的输入端通过与所述采样判断电路连接，所述第三光耦用于根据所述采样电压信号接通或者断开所述串联回路；所述第四光耦的输入端与所述第一切换电路连接，所述第四光耦用于根据所述控制信号接通或者断开所述串联回路；所述发动机启动回路还与所述电池连接，所述发动机启动回路用于当所述串联回路接通时为所述电池充电。可选地，所述第二切换电路还包括滞回比较器；所述第三光耦的输入端通过所述滞回比较器与所述采样判断电路连接，所述滞回比较器用于根据所述采样电压信号接通或者断开所述第三光耦，以使所述串联回路接通或者断开。可选地，所述采样判断电路包括：采样电路，与所述电池连接，用于采集所述电池的输出电压以得到采样电压信号；单片机，分别与所述采样电路、所述第一切换电路和所述第二切换电路连接，用于：接收所述采样电压信号，并判断所述采样电压信号是否低于所述电压设定下限值；并当所述采样电压信号低于所述电压设定下限值时，向所述第一切换电路输出控制信号，向所述第二切换电路输出所述控制信号和所述采样电压信号；当所述采样电压信号高于电压设定上限值时，向所述第一切换电路输出第一控制信号。为达上述目的，本发明还提供了如下技术方案：一种自动电源切换方法，包括：通过采样判断电路获取电池的输出电压以得到采样电压信号；判断所述采样电压信号是否低于电压设定下限值，得到第一判断结果；当所述第一判断结果为所述采样电压信号低于所述电压设定下限值时，向第一切换电路输出控制信号，向第二切换电路输出所述控制信号和所述采样电压信号，以使当所述控制信号为高电平信号时所述第一切换电路工作，当所述控制信号为低电平信号时所述第二切换电路工作；其中，所述第一切换电路用于采用市电电源为所述电池充电；所述第二切换电路用于根据所述采样电压信号采用发电机为所述电池充电。可选地，所述当所述控制信号为高电平信号时所述第一切换电路工作，具体包括：当所述控制信号为高电平信号且所述采样电压信号低于所述电压设定下限值时，所述第一切换电路开始向所述电池充电；当所述采样电压信号高于电压设定上限值时，所述采样判断电路向所述第一切换电路发送第一控制信号，以使所述第一切换电路停止为所述电池充电。根据本发明提供的具体实施例，本发明公开了以下技术效果：通过采样判断电路采集电池的输出电压得到采样电压信号，并当采样电压信号低于电压设定下限值时，向第一切换电路输出控制信号，向第二控制电路输出控制信号和采样电压信号。当控制信号为高电平信号时，第一切换电路工作，第一切换电路采用市电电源为电池充电；当控制信号为低电平信号时，第二切换电路工作，第二切换电路根据采样电压信号采用发电机为电池充电。本发明在电池电压不符合供电要求时，利用高电平的控制信号快速切换至市电电源供电，利用低电平的控制信号快速切换至发动机发电，切换速度可达ms量级，大大提高了切换速度。此外，本发明能够在电池高电压、市电电网高电压以及发电机启动回路低电压三种不同电压量级间切换，实现不间断的供电。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明自动电源切换装置的结构示意图；图2为本发明自动电源切换装置的第一切换电路和采样电路的结构示意图；图3为本发明自动电源切换装置的第二切换电路的结构示意图；图4为本发明自动电源切换装置的单片机的电路结构示意图；图5为本发明自动电源切换方法的流程示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本发明的目的是提供一种自动电源切换装置及方法，在电池高电压、电网高电压和发动机启动回路低电压这三种不同电压量级间快速切换，实现不间断供电。为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。实施例一如图1所示，本实施例提供了一种自动电源切换装置，包括第一切换电路、第二切换电路和采样判断电路；所述采样判断电路，分别与电池、所述第一切换电路、所述第二切换电路连接，所述采样判断电路用于采集所述电池的输出电压以得到采样电压信号，并判断所述采样电压信号是否低于电压设定下限值；当所述采样电压信号低于所述电压设定下限值时，向所述第一切换电路输出控制信号，向所述第二切换电路输出所述控制信号和所述采样电压信号。其中，当所述控制信号为高电平信号时，所述第一切换电路工作；当所述控制信号为低电平信号时，所述第二切换电路工作；所述第一切换电路用于采用市电电源为所述电池充电，即所述第一切换电路为市电-电池切换电路；所述第二切换电路用于根据所述采样电压信号采用发电机为所述电池充电，即所述第二切换电路为发动机-电池切换电路。当所述采样电压信号高于所述电压设定下限值时，即为电池有电，由电池进行供电，采样判断电路不工作。如图1所示，采样判断电路包括采样电路和单片机。采样电路与所述电池连接，采样电路用于采集所述电池的输出电压以得到采样电压信号；单片机分别与所述采样电路、所述第一切换电路和所述第二切换电路连接，单片机用于接收所述采样电压信号，并判断所述采样电压信号是否处于设定电压阈值范围；并当所述采样电压信号低于所述电压设定下限值时，向所述第一切换电路输出控制信号，向所述第二切换电路输出所述控制信号和所述采样电压信号；当所述采样电压信号高于电压设定上限值时，向所述第一切换电路输出第一控制信号。如图4所示，所述单片机为STM8S903芯片，具体为型号为STM8S903K3T6C。单片机的端口2和端口3与晶振并联，晶振的一端通过第一电容与接地端连接，晶振的另一端通过第二电容与接地端连接，并且第一电容与第二电容并联。单片机的端口4接地，单片机的端口6连接直流电，单片机的端口PB4分别与采样电路、第二切换电路连接，单片机的端口PC5、端口PC4均与第一切换电路连接，且单片机经由单片机的端口PC5向第一切换电路发送控制信号，单片机的端口PC4向第一切换电路发送第一控制信号；又因为第二切换电路与第一切换电路连接，控制信号得以经由第一切换电路进入到第二切换电路。如图2所示，采样判断电路工作时，电池的输出电压由采样电路的电阻R13和电阻R8进行分压，采集电阻R8的电压得到采样电压信号V0，采样电压信号V0经电压跟随器输送到单片机的端口PB4口上。由电池特性可知，当电池电量即将使用完时，电池电压会骤降，直至为零；而电池充满后电压会达到一个最大值。因此，在单片机中设置一个电压下限阈值和一个上限阈值，当电池即将没电时，采集到的电压低于下限阈值，则由端口PC5输出一个高电平信号；当电池充满时，采集到的电压达到上限阈值，则由端口PC4输出一个高电平信号，进而通过端口PC4和端口PC5发出的信号来控制第一切换电路的开关。如图2所示，第一切换电路包括第一光耦U1、第二电阻R2、第四电阻R4、第六电阻R6、第二光耦U2、二极管D3、第一MOS管Q1和第二MOS管Q2；所述第一光耦的输入端通过第一接点P1与所述采样判断电路连接，具体地，第一光耦的输出端通过第一接点与单片机的端口PC5连接；所述第二电阻和所述第一MOS管分别并联在所述第一光耦的输出端，具体地，第一光耦的输出端分别与第一MOS管的漏极和源极连接，以保障充电后电池电压高于电压下限阈值时，市电电源仍能为电池充电；所述第二电阻的一端与所述市电电源连接，所述第二电阻的另一端通过所述第四电阻与接地端连接；所述第四电阻、所述第二MOS管和所述第二切换电路并联连接；所述第六电阻并联在所述第一MOS管的栅极和源极之间，所述第六电阻还并联在所述第二光耦的输出端，即第一MOS管的栅极和源极还与第二光耦的输出端连接，以保障充电后电池电压高于上限阈值时，市电电源停止为电池充电；第二光耦的输入端通过第二接点与所述采样判断电路连接，具体地，所述第二光耦的输入端通过第二接点与单片机的端口PC4连接；所述第六电阻的一端通过所述二极管与所述电池连接，所述第六电阻的另一端接地，具体地，所述第六电阻通过第七电阻R7接地；二极管的阳极与第六电阻连接，二极管的阴极分别与采样电路中的电阻R13、电池连接，以防止在电池不需要充电时，电池为第六电阻的两端提供一个压差，导致第一MOS管导通，然后第二MOS管导通，以致使市电电源给电池充电。具体地，所述第一切换电路还包括第一稳压管D1、第二稳压管D2、第一电阻R1和第五电阻R5；第一稳压管并联在所述第二MOS管的栅极和源极之间，第一稳压管用于钳位第二MOS管的驱动电压，保证第二MOS管可靠的工作；第二稳压管并联在所述第一MOS管的栅极和源极之间，第二稳压管用于钳位第一MOS管的驱动电压，保证第一MOS管可靠的工作；第一电阻串联在所述第一接点与所述第一光耦之间，第一电阻为限流电阻，保证第一光耦的驱动电流受控；第五电阻串联在所述第二接点与所述第二光耦之间，第五电阻为限流电阻，保证第二光耦的驱动电流受控。其中，所述第一MOS管为N沟道MOS管，所述第二MOS管为P沟道MOS管。第一切换电路的工作原理如下：当采样电压信号高于电压设定下限值时，单片机的端口PC5向第一切换电路输出低电平信号，即第一接点处为低电平，此时，第一光耦不工作，第二MOS管截止，此时由电池单独为用电设备供电。当采样电压信号低于电压设定下限值时，即当电池即将没电时，单片机的端口PC5向第一切换电路输出高电平信号，即第一接点处为高电平，第一光耦工作，将第二电阻短路，第四电阻的分压驱动第二MOS管导通，由市电电源为电池充电。当电池充电至采样电压信号高于电压设定下限值时，第一接点处变为低电平，第一光耦停止工作，但由于第一MOS管导通，第二电阻依旧被短路，第二MOS管仍然处于导通状态，市电电源继续为电池充电。当电池充电至采样电压信号高于电压设定上限值时，即电池充满电了，单片机的端口PC4向第一切换电路输出高电平信号，即第二接点处跳变为高电平，第二光耦开始工作，将第六电阻短路，使得第一MOS管截止，第二MOS管也截止，市电电源停止为电池充电，由电池单独为用电设备供电。如图3所示，第二切换电路包括第三光耦U3、第四光耦U4以及发动机启动回路；第三光耦的输出端、所述第四光耦的输出端以及发电机启动回路构成串联回路；所述第三光耦的输入端通过与所述采样判断电路连接，具体地，第三光耦的输入端与单片机的端口PB4连接；所述第三光耦用于根据所述采样电压信号接通或者断开所述串联回路，具体地，当采样电压信号低于电压设定下限值时，第三光耦接通串联回路，当采样电压信号高于电压设定上限值时，第三光耦断开串联回路。所述第四光耦的输入端与所述第一切换电路连接，具体地，第四光耦的输入端与第四电阻的一端连接，第四光耦的输入电压为第四电阻的分压，所述第四光耦用于根据所述控制信号接通或者断开所述串联回路，具体为第四光耦根据第四电阻的电压接通或断开串联回路；所述发动机启动回路还与所述电池连接，所述发动机启动回路用于当所述串联回路接通时为所述电池充电。具体地，所述第二切换电路还包括滞回比较器；所述第三光耦的输入端通过所述滞回比较器与所述采样判断电路连接，所述滞回比较器用于根据所述采样电压信号接通或者断开所述第三光耦，以使所述串联回路接通或者断开。第二切换电路的工作原理如下：当电池有电不需要充电时，即当采样电压信号高于电压设定上限值时，第三光耦断开串联回路。当电池没电时，即当采样电压信号低于电压设定下限值时，第三光耦接通串联回路；若此时有市电电源为电池充电，且第四电阻的电压经过电阻R10分压后大于VCC，则第四光耦不工作，串联回路断开，发电机无法为电池充电，此时由市电电源为电池充电；若此时没有市电电源为电池充电，且第四电阻的电压小于2VCC，第四光耦正常工作，串联回路接通，发电机为电池进行充电。本实施例具体应用到疫苗流动接种车上，疫苗流动接种车上的车载疫苗冷藏箱等用电设备需即时供电，断电会影响接种车的正常工作，甚至会导致疫苗失效。而本实施例提供的自动电源切换装置，能够对疫苗流动接种车上的车载电池、市电电网以及发电机三种电源进行快速切换，具体为在电池快没电的时候快速的切换到市电供电，在没有市电提供的情况下能快速的开启发电机发电，电池供电、市电供电、发电机发电这三者优先级顺序从高到低，供电需转换时三者能进行快速的切换，从而稳定为疫苗流动接种车上的用电设备提供电源，使接种车安全可靠的的工作。实施例二如图5所示，本实施例提供一种应用在实施例一所述装置的自动电源切换方法，包括：步骤100，通过采样判断电路获取电池的输出电压以得到采样电压信号。步骤200，判断所述采样电压信号是否低于电压设定下限值，得到第一判断结果。步骤300，当所述第一判断结果为所述采样电压信号低于所述电压设定下限值时，向第一切换电路输出控制信号，向第二切换电路输出所述控制信号和所述采样电压信号，以使当所述控制信号为高电平信号时所述第一切换电路工作，当所述控制信号为低电平信号时所述第二切换电路工作；其中，所述第一切换电路用于采用市电电源为所述电池充电；所述第二切换电路用于根据所述采样电压信号采用发电机为所述电池充电。具体地，所述当所述控制信号为高电平信号时所述第一切换电路工作，具体包括：当所述控制信号为高电平信号且所述采样电压信号低于所述电压设定下限值时，所述第一切换电路开始向所述电池充电；当所述采样电压信号高于电压设定上限值时，所述采样判断电路向所述第一切换电路发送第一控制信号，以使所述第一切换电路停止为所述电池充电。本发明通过动力电源、常用市电、发电机之间的快速切换，实现对纯电动疫苗流动接种车实现不间断的供电，使接种工作安全可靠的进行。并且，本申请通过电流通断对供电进行切换控制，切换速度可达到ms量级，而且可自动地在电池高电压、电网高电压和发电机启动回路低电压这种不同电压量级之间进行切换。相对于现有技术，本发明还具有以下优点：本发明自动电源切换装置的切换速度快，能达到毫秒量级，远快于硬开关的速度。本发明自动电源切换装置能按优先级顺序在电池，市电和发电机启动回路这不处于同一电压量级的三者之间进行自动的切换。本发明自动电源切换装置应用在纯电动接种车上，在电池快没电时切换成市电或发电机供电，但是当电池充满电后又能回到电池单独供电模式，在稳定可靠的前提下，又节约了能源。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处。综上所述，本说明书内容不应理解为对本发明的限制。
