标题title
一种适用于大规模光网络的毫秒级快速寻路方法
摘要abst
本发明公开了一种适用于大规模光网络的毫秒级快速寻路方法，包括根据光网络结构构建加权无向图，并进行预处理；基于预处理后的加权无向图，生成一条从信源到每个光节点的待选路径，构建可行解；若新的可行解改善了已有结果，则记为当前最优解，并记录相关光学参数及中继资源状态；持续迭代直到满足结束条件后，将评估为最优解的待选路径作为寻路结果。本发明对于单条业务的新到请求或修复请求，能在10毫秒以内找到一条满足所有光学约束的最小延迟端到端无环路径，且空间开销小、计算复杂度低、通用性强，适用于数百到数千节点的大规模光网络。
权利要求书clms
1.一种适用于大规模光网络的毫秒级快速寻路方法，其特征在于，包括以下步骤：S1、根据光网络结构构建加权无向图，并进行预处理；S2、基于预处理后的加权无向图，生成从信源到每个光节点的待选路径，构建可行解；S3、判断可行解是否改善了已有寻路结果；若是，则将该可行解记为当前节点的最优解，并更新相应光学参数及中继资源状态；否则忽略该可行解，跳转至步骤S2；S4、判断是否满足结束条件；若满足，则跳转至步骤S5；否则跳转至步骤S2；S5、将评估为最优解的待选路径作为寻路结果。2.根据权利要求1所述的适用于大规模光网络的毫秒级快速寻路方法，其特征在于，步骤S1中根据光网络结构构建加权无向图，具体包括：将光网络中的光节点作为加权无向图的节点；将光网络中两个光节点之间的光链路作为加权无向图的边；将光网络中两个光节点之间的光链路的通信时延作为加权无向图的边的权重。3.根据权利要求1或2所述的适用于大规模光网络的毫秒级快速寻路方法，其特征在于，步骤S1中对加权无向图进行预处理，具体包括：S1-1、遍历加权无向图中的每条边，判断所选取的边是否具有空闲的波长索引资源；若是，则保留所选取的边；否则删除所选取的边；S1-2、为每个光节点保持一组状态变量，用于记录相应的光学参数及中继资源状态，具体包括：最优通信时延、已启用的中继单板状态、可用的波长索引资源、光路损耗、及可用的中继单板资源；S1-3、定义一个全局堆结构，用于记录每个光节点当前最优解对应的通信时延；将信源节点放进该全局堆结构，其通信时延为0。4.根据权利要求1所述的适用于大规模光网络的毫秒级快速寻路方法，其特征在于，步骤S2中基于预处理后的加权无向图，生成从信源到每个光节点的待选路径，构建可行解，具体包括以下分步骤：S2-1、从全局堆结构中取出通信时延最小的节点，逐跳检查其每个相邻光节点关联的光链路状态，是否满足所有的光学约束；若满足，则将待选路径标记为该光节点的可行解；否则，跳转至步骤S2-2；S2-2、对于不满足光学约束的光节点，从其上一跳光节点的中继单板资源中选择一个可用的中继单板，设为启用状态，再次检查待选路径是否满足所有的光学约束；若满足，则将待选路径标记为该光节点的可行解；否则，若找不到可用的中继单板或中继单板启用后仍不满足光学约束，则将待选路径标记为不可行。5.根据权利要求1所述的适用于大规模光网络的毫秒级快速寻路方法，其特征在于，步骤S3中判断可行解是否改善了已有寻路结果；若是，则将该可行解记为当前节点的最优解，并更新相应光学参数及中继资源状态；否则忽略该可行解，具体包括以下分步骤：S3-1、沿该待选路径计算当前光节点的通信时延；S3-2、判断新的可行解是否小于当前光节点上已知的最优通信时延；若小于，则将该待选路径记为当前光节点的最优解，跳转至步骤S3-3；否则，忽略该待选路径，跳转至步骤S2；S3-3、沿该待选路径更新当前光节点的状态变量，并将当前光节点放入全局堆结构。6.根据权利要求5所述的适用于大规模光网络的毫秒级快速寻路方法，其特征在于，步骤S3-1中通信时延的计算方法具体为：S3-1-1、将相邻光链路上的通信时延加上上一跳光节点的状态变量中记录的通信时延；S3-1-2、判断步骤S2中是否有中继单板开启；若是，则再加上中继单板导致的时延；否则忽略。7.根据权利要求5所述的适用于大规模光网络的毫秒级快速寻路方法，其特征在于，步骤3-3中更新当前光节点的状态变量，具体包括：S3-3-1、将步骤S3-1中计算出的最优通信时延，记录到当前节点的状态变量中；S3-3-2、计算当前节点可用的中继单板资源，记录到当前节点的状态变量中；S3-3-3、判断步骤S2中是否有新的中继单板开启；若是，则跳转至步骤3-3-4；否则基于上一跳光节点上的状态变量计算其它状态变量；S3-3-4、基于新的中继单板所在节点的状态变量进行计算其它状态变量。8.根据权利要求7所述的适用于大规模光网络的毫秒级快速寻路方法，其特征在于，步骤3-3-2中计算当前节点可用的中继单板资源，记录到当前节点的状态变量中，具体包括以下分步骤：S3-3-2-1、将上一跳光节点的中继单板资源对应的堆栈进行复制，创建新的堆栈；S3-3-2-2、在新的堆栈中，对步骤S2中开启的中继单板进行出栈；S3-3-2-3、判断当前光节点上是否有空闲的中继单板可用；若是，则将该中继单板进行压栈；否则跳转至步骤S3-3-2-4；S3-3-2-4、将该堆栈记录到当前节点的状态变量中。9.根据权利要求7所述的适用于大规模光网络的毫秒级快速寻路方法，其特征在于，步骤S3-3-3中基于上一跳光节点上的状态变量计算其它状态变量，具体包括以下分步骤：S3-3-3-1、从上一跳光节点上的可用波长索引资源中，删除当前光链路上不可用的波长索引，记录到当前节点的状态变量中；S3-3-3-2、从上一跳光节点上的光路损耗中，加上当前光链路上的光路损耗，记录到当前节点的状态变量中。10.根据权利要求7所述的适用于大规模光网络的毫秒级快速寻路方法，其特征在于，步骤S3-3-4中基于新的中继单板所在节点的状态变量进行计算其它状态变量，具体包括以下分步骤：S3-3-4-1、沿着待选路径，从新的中继单板所在节点开始，从波长索引资源范围中，删除每条光链路上不可用的波长索引，记录到当前节点的状态变量中；S3-3-4-2、沿着待选路径，从新的中继单板所在节点开始，按光路损耗为0，加上途经的每条光链路上的光路损耗，记录到当前节点的状态变量中。
说明书desc
技术领域本发明涉及光网络路由优化技术领域，具体涉及一种适用于大规模光网络的毫秒级快速寻路方法。背景技术为每条业务快速计算最优路由是光网络运营中最重要任务的之一，也是光网络设计、规划和运营的众多研究中的关键问题。该问题在波分复用网络中，被称为路由和波长分配问题；在弹性光网络中，被称为路由和频谱分配问题；在考虑到信号调制的约束时，被称为路由、调制、和频谱分配问题。在其他光网络中存在相关问题，包括在光传输网络中用于虚拟和连续级联问题，及在空分复用网络中用于光纤芯分配问题。尽管工业界和学术界通常将RWA、RSA、RMSA作为不同的问题进行研究，他们共同的目标都是进行路由优化，主要区别是约束条件不同。比如，RWA是生成的路由须满足特定波长约束，RSA要求路由满足特定数量的连续波长约束，RMSA还进而增加了费用或距离约束。本专利把RWA、RSA、RMSA看作是具有不同约束的同一类问题进行求解。现有技术，对光网络的路由优化方案主要分为两类。一类是为所有业务的路由需求进行全网的路径整体优化。第二类是假定业务是一个一个逐个到达，每次只为单条业务生成最佳路径，或通过寻找新的路由为已存在业务提供路径修复功能。本专利仅考虑第二类情形，即为单条业务生成最佳路由的问题。对于较大规模的网络，如大于1000个节点的光网络，现有技术进行单条业务路由求解通常需要耗时在数秒或数十秒以上，无法满足高速通信的动态业务寻路要求。如，高速光网络典型业务的通信速度超过400Gbps，即便是业务中断0.01秒，也会导致超过4Gb的通信丢失，因而，业务寻路的求解耗时应在毫秒级或亚毫秒级才能满足高速光网络的实际要求。毫秒级时延的典型要求是求解耗时不超过0.01秒，亚毫秒级时延则要求耗时不超过0.001秒。发明内容针对现有技术中的上述不足，本发明提供了一种适用于大规模光网络的毫秒级快速寻路方法，旨在快速地为单条光通信业务找到一条满足波长一致性和光参非线性等所有光学约束的最小延迟端到端无环路径，以解决现有技术中存在的计算复杂度高、内存消耗大、且优化结果不理想的问题。为了达到上述发明目的，本发明采用的技术方案为：一种适用于大规模光网络的毫秒级快速寻路方法，包括以下步骤：S1、根据光网络结构构建加权无向图，并进行预处理；S2、基于预处理后的加权无向图，生成从信源到每个光节点的待选路径，构建可行解；S3、判断可行解是否改善了已有寻路结果；若是，则将该可行解记为当前节点的最优解，并更新相应光学参数及中继资源状态；否则忽略该可行解，跳转至步骤S2；S4、判断是否满足结束条件；若满足，则跳转至步骤S5；否则跳转至步骤S2；S5、将评估为最优解的待选路径作为寻路结果。进一步地，步骤S1中根据光网络结构构建加权无向图，具体包括：将光网络中的光节点作为加权无向图的节点；将光网络中两个光节点之间的光链路作为加权无向图的边；将光网络中两个光节点之间的光链路的通信时延作为加权无向图的边的权重。进一步地，步骤S1中对加权无向图进行预处理，具体包括：S1-1、遍历加权无向图中的每条边，判断所选取的边是否具有空闲的波长索引资源；若是，则保留所选取的边；否则删除所选取的边；S1-2、为每个光节点保持一组状态变量，用于记录相应的光学参数及中继资源状态，具体包括：最优通信时延、已启用的中继单板状态、可用的波长索引资源、光路损耗、及可用的中继单板资源；S1-3、定义一个全局堆结构，用于记录每个光节点当前最优解对应的通信时延；将信源节点放进该全局堆结构，其通信时延为0。进一步地，步骤S2中基于预处理后的加权无向图，生成从信源到每个光节点的待选路径，构建可行解，具体包括以下分步骤：S2-1、从全局堆结构中取出通信时延最小的节点，逐跳检查其每个相邻光节点关联的光链路状态，是否满足所有的光学约束；若满足，则将待选路径标记为该光节点的可行解；否则，跳转至步骤S2-2；S2-2、对于不满足光学约束的光节点，从其上一跳光节点的中继单板资源中选择一个可用的中继单板，设为启用状态，再次检查待选路径是否满足所有的光学约束；若满足，则将待选路径标记为该光节点的可行解；否则，若找不到可用的中继单板或中继单板启用后仍不满足光学约束，则将待选路径标记为不可行。进一步地，步骤S3中判断可行解是否改善了已有寻路结果；若是，则将该可行解记为当前节点的最优解，并更新相应光学参数及中继资源状态；否则忽略该可行解，具体包括以下分步骤：S3-1、沿该待选路径计算当前光节点的通信时延；S3-2、判断新的可行解是否小于当前光节点上已知的最优通信时延；若小于，则将该待选路径记为当前光节点的最优解，跳转至步骤S3-3；否则，忽略该待选路径，跳转至步骤S2；S3-3、沿该待选路径更新当前光节点的状态变量，并将当前光节点放入全局堆结构。进一步地，步骤S3-1中通信时延的计算方法具体为：S3-1-1、将相邻光链路上的通信时延加上上一跳光节点的状态变量中记录的通信时延；S3-1-2、判断步骤S2中是否有中继单板开启；若是，则再加上中继单板导致的时延；否则忽略。进一步地，步骤3-3中更新当前光节点的状态变量，具体包括：S3-3-1、将步骤S3-1中计算出的最优通信时延，记录到当前节点的状态变量中；S3-3-2、计算当前节点可用的中继单板资源，记录到当前节点的状态变量中；S3-3-3、判断步骤S2中是否有新的中继单板开启；若是，则跳转至步骤3-3-4；否则基于上一跳光节点上的状态变量计算其它状态变量；S3-3-4、基于新的中继单板所在节点的状态变量进行计算其它状态变量。进一步地，步骤3-3-2中计算当前节点可用的中继单板资源，记录到当前节点的状态变量中，具体包括以下分步骤：S3-3-2-1、将上一跳光节点的中继单板资源对应的堆栈进行复制，创建新的堆栈；S3-3-2-2、在新的堆栈中，对步骤S2中开启的中继单板进行出栈；S3-3-2-3、判断当前光节点上是否有空闲的中继单板可用；若是，则将该中继单板进行压栈；否则跳转至步骤S3-3-2-4；S3-3-2-4、将该堆栈记录到当前节点的状态变量中。进一步地，步骤S3-3-3中基于上一跳光节点上的状态变量计算其它状态变量，具体包括以下分步骤：S3-3-3-1、从上一跳光节点上的可用波长索引资源中，删除当前光链路上不可用的波长索引，记录到当前节点的状态变量中；S3-3-3-2、从上一跳光节点上的光路损耗中，加上当前光链路上的光路损耗，记录到当前节点的状态变量中。进一步地，步骤S3-3-4中基于新的中继单板所在节点的状态变量进行计算其它状态变量，具体包括以下分步骤：S3-3-4-1、沿着待选路径，从新的中继单板所在节点开始，从波长索引资源范围中，删除每条光链路上不可用的波长索引，记录到当前节点的状态变量中；S3-3-4-2、沿着待选路径，从新的中继单板所在节点开始，按光路损耗为0，加上途经的每条光链路上的光路损耗，记录到当前节点的状态变量中。本发明具有以下有益效果：本发明的一种适用于大规模光网络的毫秒级快速寻路方法，对于单条业务的新到请求或修复请求，能在10毫秒以内找到一条满足所有光学约束的最小延迟端到端无环路径，且空间开销小、计算复杂度低、通用性强，适用于数百到数千节点的大规模光网络。附图说明图1为本发明实施例提供的一种适用于大规模光网络的毫秒级快速寻路方法的流程示意图。具体实施方式下面对本发明的具体实施方式进行描述，以便于本技术领域的技术人员理解本发明，但应该清楚，本发明不限于具体实施方式的范围，对本技术领域的普通技术人员来讲，只要各种变化在所附的权利要求限定和确定的本发明的精神和范围内，这些变化是显而易见的，一切利用本发明构思的发明创造均在保护之列。本发明提出了一种适用于大规模光网络的毫秒级快速寻路方法，旨在快速地为单条光通信业务找到一条满足波长一致性和光参非线性等所有光学约束的最小延迟端到端无环路径。实施例1如图1所示，本发明实施例提供的一种适用于大规模光网络的毫秒级快速寻路方法，包括以下步骤S1至步骤S5：S1、根据光网络结构构建加权无向图，并进行预处理；在本实施例的步骤S1中，根据光网络结构构建加权无向图，具体包括：将光网络中的光节点作为加权无向图的节点；将光网络中两个光节点之间的光链路作为加权无向图的边；将光网络中两个光节点之间的光链路的通信时延作为加权无向图的边的权重。具体而言，光网络由光节点、光链路、光网络管理单元等构成。光节点，包括光接入节点和光交换节点。光链路指光通信的介质，可以光纤或无线光。将待求解光网络表示为无向图G，其中V为节点的集合，E为节点之间的链路的集合。每个光节点表示为一个节点，任意两个节点之间，若可以通过光链路相通，且不经过其它节点，则这两个节点之间存在一条边，这条边的权重表示为这两个节点间的距离或链路上的通信时延。两个节点间可以存在多条光链路。每条光通信业务定义为两个节点之间的光通信，这两个节点分别称为信源和信宿。寻路算法的目标是找到一条满足所有光学约束的从信源到信宿的最小延迟端到端无环路径。信源、信宿分别表示为SRC、DST。路径用位于其上的节点序列表示，如path＝表示由n个节点组成的路径。光交换节点可能含有中继单板。一个节点若含有中继单板，可选择开启或者不开启。开启的中继单板将路径分为多个子分段，即每个子分段的两端只能是信源、信宿或已开启的中继单板。寻路计算超时记为T，算法应在T时间内输出寻路结果。光网络管理单元负责寻路计算，通过管理接口收集网络状态信息，接收业务请求，并基于寻路计算结果调整网络到最佳状态。本发明在构建加权无向图后，对加权无向图进行预处理，具体包括：S1-1、遍历加权无向图中的每条边，判断所选取的边是否具有空闲的波长索引资源；若是，则保留所选取的边；否则删除所选取的边。本发明通过对加权无向图进行预处理，可以减少边的数量，有利于改善最短路径算法的计算性能。S1-2、为每个光节点保持一组状态变量，用于记录相应的光学参数及中继资源状态，具体包括：最优通信时延、已启用的中继单板状态、可用的波长索引资源、光路损耗、及可用的中继单板资源。最优通信时延，初始化为无穷大。已启用的中继单板状态，初始化为空集。可用的波长索引资源，初始化为取值范围内所有波长索引的集合。可用的中继单板资源，初始化为空的堆栈。S1-3、定义一个全局堆结构，用于记录每个光节点当前最优解对应的通信时延；将信源节点放进该全局堆结构，其通信时延为0。S2、基于预处理后的加权无向图，生成从信源到每个光节点的待选路径，构建可行解；在本实施例的步骤S2中，生成从信源到每个光节点的待选路径，构建可行解，具体包括以下分步骤S2-1至分步骤S2-2：S2-1、从全局堆结构中取出通信时延最小的一个节点，检查其每个相邻光节点关联的光链路状态，是否满足所有的光学约束；若满足，则将待选路径标记为该光节点的可行解；否则，跳转至步骤S2-2。在本实施例的步骤S2-1中满足所有的光学约束，具体为：满足以下所有条件：子分段上光信号的传播需使用共同的波长索引资源，即要求子分段路径上的多个链路可用波长索引资源交集不能为空；同一链路上，同时用到的多个波长索引应是连续的；每个子分段路径中的光路损耗不超过设定阈值。S2-2、对于不满足光学约束的光节点，从其上一跳光节点的中继单板资源中选择一个可用的中继单板，设为启用状态，再次检查待选路径是否满足所有的光学约束。若满足，则将待选路径标记为该光节点的可行解；否则，若找不到可用的中继单板或中继单板启用后仍不满足光学约束，则将待选路径标记为不可行。S3、判断可行解是否改善了已有寻路结果；若是，则将该可行解记为当前节点的最优解，并更新相应光学参数及中继资源状态；否则忽略该可行解，跳转至步骤S2；在本实施例的步骤S3中，若新的可行解改善了已有寻路结果，则记为当前节点的最优解，并更新相应光学参数及中继资源状态，具体包括以下分步骤S3-1至分步骤S3-3：S3-1、沿该待选路径计算当前光节点的通信时延；在本实施例的步骤S3-1中，通信时延的计算，具体包括以下分步骤S3-1-1至分步骤S3-1-2：S3-1-1、将相邻光链路上的通信时延，加上上一跳光节点的状态变量中的通信时延；S3-1-2、判断步骤S2中是否有中继单板开启；若是，则再加上中继单板导致的时延；否则忽略。S3-2、判断新的可行解是否小于当前光节点上已知的最优通信时延；若小于，则将该待选路径记为当前光节点的最优解，跳转至步骤S3-3；否则，忽略该待选路径，跳转至步骤S2；S3-3、沿该待选路径更新当前光节点的状态变量。在本实施例的步骤S3-3中，更新当前光节点的状态变量，具体包括以下分步骤S3-3-1至分步骤S3-3-2：S3-3-1、将步骤S3-1中计算出的最优通信时延，记录到当前节点的状态变量中；S3-3-2、计算当前节点可用的中继单板资源，记录到当前节点的状态变量中；在本实施例的步骤S3-3-2中，计算当前节点可用的中继单板资源，记录到当前节点的状态变量中，具体包括以下分步骤S3-3-2-1至分步骤S3-3-2-4：S3-3-2-1、将上一跳光节点的中继单板资源对应的堆栈进行复制，创建新的堆栈；S3-3-2-2、在新的堆栈中，对步骤S2中开启的中继单板进行出栈；S3-3-2-3、判断当前光节点上是否有空闲的中继单板可用；若是，则将该中继单板进行压栈；否则跳转至步骤S3-3-2-4；S3-3-2-4、将该堆栈记录到当前节点的状态变量里。S3-3-3、若步骤S2中没有开启新的中继单板，则基于上一跳光节点上的状态变量计算其它状态变量；跳转至步骤3-3-4；在本实施例的步骤S3-3-3中，基于上一跳光节点上的状态变量计算其它状态变量，具体包括以下分步骤S3-3-3-1至分步骤S3-3-3-2：S3-3-3-1、从上一跳光节点上的可用波长索引资源中，删除当前光链路上不可用的波长索引，记录到当前节点的状态变量中；S3-3-3-2、从上一跳光节点上的光路损耗中，加上当前光链路上的光路损耗，记录到当前节点的状态变量中；S3-3-4、基于新的中继单板所在节点的状态变量进行计算其它状态变量。在本实施例的步骤S3-3-4中基于新的中继单板所在节点的状态变量进行计算其它状态变量，具体包括分步骤S3-3-4-1至分步骤S3-3-4-2：S3-3-4-1、沿着待选路径，从新的中继单板所在节点开始，从波长索引资源范围中，去掉每条光链路上不可用的波长索引，记录到当前节点的状态变量中；S3-3-4-2、沿着待选路径，从新的中继单板所在节点开始，按光路损耗为0，加上途经的每条光链路上的光路损耗，记录到当前节点的状态变量中。S4、判断是否满足结束条件；若满足，则跳转至步骤S5；否则跳转至步骤S2；在本实施例的步骤S4中，判断待选路径是否满足结束条件，所述结束条件具体为：满足以下任一条件：寻路时间超过设定的最大超时阈值；信宿节点上取得最优解；全局堆结构已空。S5、将评估为最优解的待选路径作为寻路结果。在本实施例的步骤S5中，将信宿节点上记录的待选路径输出，作为寻路结果；当信宿节点上没有记录待选路径时，则报告寻路失败。实施例2基于上述实施例1描述的寻路方法，下面结合具体的应用场景进行说明。在130个节点、393条链路组成的光网络中，每条链路上的可用波长索引范围为。部分节点上包含有中继单板资源，一些业务已经占用了部分中继单板和光链路波长索引资源。光信号在每条链路上都经历相应的光路损耗及通信延迟。光信号经过节点时，若节点上有中继单板开启，则光路损耗清0，通信延迟为100，链路波长索引可以改变或不改变；若节点上没有中继单板或中继单板没有开启，则不产生通信延迟。业务的光学约束是：光信号在途径的每条链路上必须有空闲的波长索引资源，且从信源到信宿的过程中光路损耗的最大阈值应一直小于等于8。求某业务的最佳路由。执行S1，从无向图G中删除不满足资源约束的边，为寻路算法做好准备。一些边的所有波长索引资源都已被现有的业务占用，则通过从G中删除这些边，可以减少边的数量，有利于改善最短路径算法的计算性能。将Node 78放入全局堆结构，其通信时延为0。执行S2，从全局堆结构中取出Node 78，逐个检查其相邻的光节点及光链路。Node78有4个邻居，分别是Node 40、Node 43、Node 38、Node 42、Node84。Node 78与Node 42之间的光链路存在空闲的波长索引可用，光路损耗为1，通信延迟为12，满足光学约束，故待选路径为Node 42上的可行解。无需启用中继单板。执行S3时，由于Node 42上记录的最优通信延迟为无穷大，故待选路径为Node 42上的当前最优解。Node 78上记录的通信时延为0，光链路上的通信延迟为12，故Node 42上应记录的通信时延为12。Node 42上没有空闲的中继单板资源。由于步骤S2中没有开启新的中继单板，故基于上一跳光节点上的状态变量计算可用波长索引资源及光路损耗。Node 78上波长索引资源为96个，去掉光链路上已经占用的38个，故Node 42上应记录的波长索引资源为58个。Node 78上的光路损耗为0，加上光链路上的光路损耗1，故Node42上应记录的光路损耗为1。将Node 42放入全局堆结构，其通信时延为12。执行S4，由于不满足结束条件，故转到S2继续计算其它节点的最优解。直到，生成的待选路径为时，覆盖了信宿节点Node 84，满足结束条件，故转S5。执行S5，输出寻路结果为：，Node 84上记录的通信时延为40.73。寻路计算所耗时间为0.38毫秒，远低于10毫秒的超时阈值。实施例3基于上述实施例1描述的寻路方法，下面结合具体的应用场景进行说明。在与实施例2相同的场景中，求某业务的最佳路由。类似实施例2，通过执行S1、S2、S3、S4，从Node 21开始，为各个光节点构建可行解，记录最优解，并更新光学参数及中继资源状态。当遇到Node 36时，其待选路径为。Node 36的前一跳节点为Node 43，当前光链路上的光学损耗为1。Node 43上记录的光学损耗为8，加上光链路上的光学损耗，超过了光路损耗阈值。从Node43的状态变量得知，Node 43上含有一个空闲的中继单板，可以启用该中继单板。由于启用了Node 43上的中继单板，其光路损耗为0，加上光链路上的光路损耗1，满足光学约束中对光路损耗阈值的要求，故Node 36上应记录的光路损耗为1。Node 43上记录的通信延迟为173，当前光链路上的延迟为25，加上中继单板的延迟100，故Node 36上应记录的通信时延为298。将Node 36放入全局堆结构，其通信时延为298。待选路径覆盖了信宿节点Node 36，满足结束条件，故转S5。执行S5，输出寻路结果为：，中继单板位于Node 43。寻路计算所耗时间为0.86毫秒，远低于10毫秒的超时阈值。本发明是参照根据本发明实施例的方法、设备、和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。本发明中应用了具体实施例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处，综上所述，本说明书内容不应理解为对本发明的限制。本领域的普通技术人员将会意识到，这里所述的实施例是为了帮助读者理解本发明的原理，应被理解为本发明的保护范围并不局限于这样的特别陈述和实施例。本领域的普通技术人员可以根据本发明公开的这些技术启示做出各种不脱离本发明实质的其它各种具体变形和组合，这些变形和组合仍然在本发明的保护范围内。
