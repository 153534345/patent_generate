标题title
一种基于单基站的超宽带定位方法、装置、计算单元、系统
摘要abst
本发明实施例提供了一种基于单基站的超宽带定位方法、装置、计算单元、系统。其中，所述方法包括：获取所述定位基站测量得到的所述第一标签相对所述定位基站的第一距离和第一方位角、所述IMU模块测量得到的所述第一标签所处位置处的目标指纹以及所述第一标签的运动信息；根据所述运动信息进行轨迹预测，得到所述第一标签的第一预测位置；若根据所述第一距离和所述第一方位角确定出所述第一标签位于所述定位基站的非视距区域，按照预先建立的指纹与位置之间的对应关系，确定所述目标指纹对应的第二预测位置；根据所述第一预测位置和所述第二预测位置，确定所述第一标签所处的融合定位位置。可以实现通过单基站实现准确定位。
权利要求书clms
1.一种基于单基站的超宽带定位方法，其特征在于，应用于单基站定位系统中的计算单元，所述单基站系统包括一个定位基站和一个或多个第一标签，所述定位基站包括多个超宽带UWB天线，所述第一标签包括UWB模块和惯性测量单元IMU模块，所述IMU模块用于测量得到指纹以及所述第一标签的运动信息，所述UWB模块用于与基站通过UWB进行通信，所述定位基站用于通过所述多个UWB天线测量标签相对所述定位基站的距离和方位角，所述指纹用于表示预设信号的强度，所述预设信号的强度随空间的变化而变化，所述方法包括：获取所述定位基站测量得到的所述第一标签相对所述定位基站的第一距离和第一方位角、所述IMU模块测量得到的所述第一标签所处位置处的目标指纹以及所述第一标签的运动信息；根据所述运动信息进行轨迹预测，得到所述第一标签的第一预测位置；若根据所述第一距离和所述第一方位角确定出所述第一标签位于所述定位基站的非视距区域，按照预先建立的指纹与位置之间的对应关系，确定所述目标指纹对应的第二预测位置；根据所述第一预测位置和所述第二预测位置，确定所述第一标签所处的融合定位位置。2.根据权利要求1所述的方法，其特征在于，所述方法还包括：若根据所述距离和所述方位角确定出所述第一标签位于所述定位基站的视距区域，，根据所述第一预测位置、所述第一距离和所述第一方位角，确定所述第一标签所处的融合定位位置。3.根据权利要求1或2所述的方法，其特征在于，所述方法还包括：若所述融合定位位置的置信度大于预设置信度阈值，将所述目标指纹作为所述对应关系中所述融合定位位置对应的指纹。4.根据权利要求1所述的方法，其特征在于，所述对应关系通过以下方式建立：获取所有基站测量得到的第二标签相对每个基站的第二距离和第二方位角，第二标签的IMU模块测量得到的所述第二标签所处位置处的待构建指纹，所述所有基站至少包括所述定位基站；若根据所述第二距离和所述第二方位角确定出所述第二标签位于至少一个基站的视距区域内，根据目标基站测量得到的所述第二距离和所述第二方位角，确定所述第二标签所处的待构建位置，其中，所述第二标签位于所述目标基站的视距区域内；将所述待构建指纹确定为所述待构建定位位置对应的指纹。5.根据权利要求4所述的方法，其特征在于，所述方法还包括：若根据所述第二距离和所述第二方位角确定出所述第二标签位于所有基站的非视距区域，则增加至少一个新的辅助基站并返回执行所述获取所有基站测量得到的第二标签相对每个基站的第二距离和第二方位角的步骤，其中，所述辅助基站在建立完成所述对应关系后被撤销。6.根据权利要求1所述的方法，其特征在于，所述预设信号包括：磁场信号和/或蓝牙信号。7.一种基于单基站的超宽带定位装置，其特征在于，应用于单基站定位系统中的计算单元，所述单基站系统包括一个定位基站和一个或多个第一标签，所述定位基站包括多个超宽带UWB天线，所述第一标签包括UWB模块和惯性测量单元IMU模块，所述IMU模块用于测量得到指纹以及所述第一标签的运动信息，所述UWB模块用于与基站通过UWB进行通信，所述定位基站用于通过所述多个UWB天线测量标签相对所述定位基站的距离和方位角，所述指纹用于表示预设信号的强度，所述预设信号的强度随空间的变化而变化，所述装置包括：信息获取模块，用于获取所述定位基站测量得到的所述第一标签相对所述定位基站的第一距离和第一方位角、所述IMU模块测量得到的所述第一标签所处位置处的目标指纹以及所述第一标签的运动信息；轨迹预测模块，用于根据所述运动信息进行轨迹预测，得到所述第一标签的第一预测位置；指纹匹配模块，用于若根据所述第一距离和所述第一方位角确定出所述第一标签位于所述定位基站的非视距区域，按照预先建立的指纹与位置之间的对应关系，确定所述目标指纹对应的第二预测位置；融合定位模块，用于根据所述第一预测位置和所述第二预测位置，确定所述第一标签所处的融合定位位置。8.根据权利要求7所述的装置，其特征在于，所述融合定位模块，还用于若根据所述距离和所述方位角确定出所述第一标签位于所述定位基站的视距区域，，根据所述第一预测位置、所述第一距离和所述第一方位角，确定所述第一标签所处的融合定位位置。9.根据权利要求7或8所述的装置，其特征在于，所述装置还包括：指纹更新模块，用于若所述融合定位位置的置信度大于预设置信度阈值，将所述目标指纹作为所述对应关系中所述融合定位位置对应的指纹。10.根据权利要求7所述的装置，其特征在于，所述装置还包括关系构建模块，用于预先通过以下方式建立对应关系：获取所有基站测量得到的第二标签相对每个基站的第二距离和第二方位角，第二标签的IMU模块测量得到的所述第二标签所处位置处的待构建指纹，所述所有基站至少包括所述定位基站；若根据所述第二距离和所述第二方位角确定出所述第二标签位于至少一个基站的视距区域内，根据目标基站测量得到的所述第二距离和所述第二方位角，确定所述第二标签所处的待构建位置，其中，所述第二标签位于所述目标基站的视距区域内；将所述待构建指纹确定为所述待构建定位位置对应的指纹。11.根据权利要求10所述的装置，其特征在于，所述关系构建模块，还用于若根据所述第二距离和所述第二方位角确定出所述第二标签位于所有基站的非视距区域，则增加至少一个新的辅助基站并返回执行所述获取所有基站测量得到的第二标签相对每个基站的第二距离和第二方位角的步骤，其中，所述辅助基站在建立完成所述对应关系后被撤销。12.根据权利要求7所述的装置，其特征在于，所述预设信号包括：磁场信号和/或蓝牙信号。13.一种计算单元，其特征在于，包括：存储器，用于存放计算机程序；处理器，用于执行存储器上所存放的程序时，实现权利要求1-6任一所述的方法步骤。14.一种单基站定位系统，其特征在于，所述单基站定位系统包括一个定位基站、计算单元、一个或多个第一标签；所述定位基站包括多个UWB天线，所述定位基站用于通过所述多个UWB天线测量标签相对所述定位基站的距离和方位角；所述第一标签包括UWB模块和惯性测量单元IMU模块，所述IMU模块用于测量得到指纹以及所述第一标签的运动信息，所述UWB模块用于与基站通过UWB进行通信，所述指纹用于表示预设信号的强度，所述预设信号的强度随空间的变化而变化；所述计算单元，用于获取所述定位基站测量得到的所述第一标签相对所述定位基站的第一距离和第一方位角、所述IMU模块测量得到的所述第一标签所处位置处的目标指纹以及所述第一标签的运动信息；并且根据所述运动信息进行轨迹预测，得到所述第一标签的第一预测位置；并且若根据所述距离和所述方位角确定出所述第一标签位于所述定位基站的非视距区域，按照预先建立的指纹与位置之间的对应关系，确定所述目标指纹对应的第二预测位置；并且根据所述第一预测位置和所述第二预测位置，确定所述第一标签所处的融合定位位置。15.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质内存储有计算机程序，所述计算机程序被处理器执行时实现权利要求1-6任一所述的方法步骤。
说明书desc
技术领域本发明涉及通信技术领域，特别是涉及一种基于单基站的超宽带定位方法、装置、计算单元、系统。背景技术基站通过超宽带与标签进行通信连接，并根据通过UWB发送的信号以及标签通过UWB返回的信号，确定标签与基站之间的距离和相对基站的方位角，在基站位置已知的情况下，根据D和A则可以确定出标签所处的定位位置。但是，受限制于场景中存在的障碍物的信号的影响，一个基站仅能够准确定位位于部分区域的对象，而位于该部分区域之外的标签，该基站无法准确定位，本文中将该部分区域称为该基站的视距区域，而将该部分区域之外的其他区域称为该基站的非视距区域。为了避免因标签位于基站的非视距区域导致的无法准确定位，相关技术中可以在多个不同的位置分别部署多个基站，以使得场景中任一位置处于至少一个基站的视距区域内。但是该方案由于需要部署多个基站，导致硬件和部署成本较高。发明内容本发明实施例的目的在于提供一种基于单基站的超宽带定位方法、装置、计算单元、系统，以实现通过单基站实现准确定位。具体技术方案如下：在本发明实施例的第一方面，提供了一种基于单基站的超宽带定位方法，应用于单基站定位系统中的计算单元，所述单基站系统包括一个定位基站和一个或多个第一标签，所述定位基站包括多个超宽带UWB天线，所述第一标签包括UWB模块和惯性测量单元IMU模块，所述IMU模块用于测量得到指纹以及所述第一标签的运动信息，所述UWB模块用于与基站通过UWB进行通信，所述定位基站用于通过所述多个UWB天线测量标签相对所述定位基站的距离和方位角，所述指纹用于表示预设信号的强度，所述预设信号的强度随空间的变化而变化，所述方法包括：获取所述定位基站测量得到的所述第一标签相对所述定位基站的第一距离和第一方位角、所述IMU模块测量得到的所述第一标签所处位置处的目标指纹以及所述第一标签的运动信息；根据所述运动信息进行轨迹预测，得到所述第一标签的第一预测位置；若根据所述第一距离和所述第一方位角确定出所述第一标签位于所述定位基站的非视距区域，按照预先建立的指纹与位置之间的对应关系，确定所述目标指纹对应的第二预测位置；根据所述第一预测位置和所述第二预测位置，确定所述第一标签所处的融合定位位置。在一种可能的实施例中，所述方法还包括：若根据所述距离和所述方位角确定出所述第一标签位于所述定位基站的视距区域，，根据所述第一预测位置、所述第一距离和所述第一方位角，确定所述第一标签所处的融合定位位置。在一种可能的实施例中，所述方法还包括：若所述融合定位位置的置信度大于预设置信度阈值，将所述目标指纹作为所述对应关系中所述融合定位位置对应的指纹。在一种可能的实施例中，所述对应关系通过以下方式建立：获取所有基站测量得到的第二标签相对每个基站的第二距离和第二方位角，第二标签的IMU模块测量得到的所述第二标签所处位置处的待构建指纹，所述所有基站至少包括所述定位基站；若根据所述第二距离和所述第二方位角确定出所述第二标签位于至少一个基站的视距区域内，根据目标基站测量得到的所述第二距离和所述第二方位角，确定所述第二标签所处的待构建位置，其中，所述第二标签位于所述目标基站的视距区域内；将所述待构建指纹确定为所述待构建定位位置对应的指纹。在一种可能的实施例中，所述方法还包括：若根据所述第二距离和所述第二方位角确定出所述第二标签位于所有基站的非视距区域，则增加至少一个新的辅助基站并返回执行所述获取所有基站测量得到的第二标签相对每个基站的第二距离和第二方位角的步骤，其中，所述辅助基站在建立完成所述对应关系后被撤销。在一种可能的实施例中，所述预设信号包括：磁场信号和/或蓝牙信号。在本发明实施例的第二方面，提供了一种基于单基站的超宽带定位装置，应用于单基站定位系统中的计算单元，所述单基站系统包括一个定位基站和一个或多个第一标签，所述定位基站包括多个超宽带UWB天线，所述第一标签包括UWB模块和惯性测量单元IMU模块，所述IMU模块用于测量得到指纹以及所述第一标签的运动信息，所述UWB模块用于与基站通过UWB进行通信，所述定位基站用于通过所述多个UWB天线测量标签相对所述定位基站的距离和方位角，所述指纹用于表示预设信号的强度，所述预设信号的强度随空间的变化而变化，所述装置包括：信息获取模块，用于获取所述定位基站测量得到的所述第一标签相对所述定位基站的第一距离和第一方位角、所述IMU模块测量得到的所述第一标签所处位置处的目标指纹以及所述第一标签的运动信息；轨迹预测模块，用于根据所述运动信息进行轨迹预测，得到所述第一标签的第一预测位置；指纹匹配模块，用于若根据所述第一距离和所述第一方位角确定出所述第一标签位于所述定位基站的非视距区域，按照预先建立的指纹与位置之间的对应关系，确定所述目标指纹对应的第二预测位置；融合定位模块，用于根据所述第一预测位置和所述第二预测位置，确定所述第一标签所处的融合定位位置。在一种可能的实施例中，所述融合定位模块，还用于若根据所述距离和所述方位角确定出所述第一标签位于所述定位基站的视距区域，，根据所述第一预测位置、所述第一距离和所述第一方位角，确定所述第一标签所处的融合定位位置。在一种可能的实施例中，所述装置还包括：指纹更新模块，用于若所述融合定位位置的置信度大于预设置信度阈值，将所述目标指纹作为所述对应关系中所述融合定位位置对应的指纹。在一种可能的实施例中，所述装置还包括关系构建模块，用于预先通过以下方式建立对应关系：获取所有基站测量得到的第二标签相对每个基站的第二距离和第二方位角，第二标签的IMU模块测量得到的所述第二标签所处位置处的待构建指纹，所述所有基站至少包括所述定位基站；若根据所述第二距离和所述第二方位角确定出所述第二标签位于至少一个基站的视距区域内，根据目标基站测量得到的所述第二距离和所述第二方位角，确定所述第二标签所处的待构建位置，其中，所述第二标签位于所述目标基站的视距区域内；将所述待构建指纹确定为所述待构建定位位置对应的指纹。在一种可能的实施例中，所述关系构建模块，还用于若根据所述第二距离和所述第二方位角确定出所述第二标签位于所有基站的非视距区域，则增加至少一个新的辅助基站并返回执行所述获取所有基站测量得到的第二标签相对每个基站的第二距离和第二方位角的步骤，其中，所述辅助基站在建立完成所述对应关系后被撤销。在一种可能的实施例中，所述预设信号包括：磁场信号和/或蓝牙信号。在本发明实施例的第三方面，提供了一种计算单元，包括：存储器，用于存放计算机程序；处理器，用于执行存储器上所存放的程序时，实现上述第一方面任一所述的方法步骤。在本发明实施例的第四方面，提供了一种单基站定位系统，所述单基站定位系统包括一个定位基站、计算单元、一个或多个第一标签；所述定位基站包括多个UWB天线，所述定位基站用于通过所述多个UWB天线测量标签相对所述定位基站的距离和方位角；所述第一标签包括UWB模块和惯性测量单元IMU模块，所述IMU模块用于测量得到指纹以及所述第一标签的运动信息，所述UWB模块用于与基站通过UWB进行通信，所述指纹用于表示预设信号的强度，所述预设信号的强度随空间的变化而变化；所述计算单元，用于获取所述定位基站测量得到的所述第一标签相对所述定位基站的第一距离和第一方位角、所述IMU模块测量得到的所述第一标签所处位置处的目标指纹以及所述第一标签的运动信息；并且根据所述运动信息进行轨迹预测，得到所述第一标签的第一预测位置；并且若根据所述距离和所述方位角确定出所述第一标签位于所述定位基站的非视距区域，按照预先建立的指纹与位置之间的对应关系，确定所述目标指纹对应的第二预测位置；并且根据所述第一预测位置和所述第二预测位置，确定所述第一标签所处的融合定位位置。本发明实施例有益效果：本发明实施例提供的基于单基站的超宽带定位方法、装置、计算单元、系统，可以预先建立指纹与位置之间的对应关系，从而在第一标签位于定位基站非视距区域内导致难以通过UWB准确定位第一标签时，根据第一标签中的IMU模块在第一标签所处位置处采集到的目标指纹确定第二预测位置，并结合基于运动信息预测得到的第一预测位置，共同确定出第一标签所处的融合定位位置，由于融合定位位置是结合指纹匹配以及轨迹预测共同得到的，因此准确性相对较高，同时由于只需要一个定位基站，因此硬件和部署成本较低，即本发明实现了通过单基站实现对位于非视距区域内的标签准确定位，在能够准确定位第一标签的情况下，降低了硬件和部署成本。当然，实施本发明的任一产品或方法并不一定需要同时达到以上所述的所有优点。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，还可以根据这些附图获得其他的实施例。图1为本发明实施例提供的单基站定位系统的一种结构示意图；图2为本发明实施例提供的基于单基站的超宽带定位方法的一种流程示意图；图3a为本发明实施例提供的对应关系建立方法的一种流程示意图；图3b为本发明实施例提供的用于建立对应关系的指纹构建系统的一种结构示意图；图4为本发明实施例提供的基于单基站的超宽带定位装置的一种结构示意图；图5为本发明实施例提供的计算单元的一种结构示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员基于本申请所获得的所有其他实施例，都属于本发明保护的范围。为了更清楚的对本发明实施例提供的基于单基站的超宽带定位方法进行说明，下面将对本发明所应用于单基站定位系统进行说明，参见图1，图1所示为本发明实施例提供的单基站定位系统的一种结构示意图，包括：一个定位基站110、计算单元120以及第一标签130。第一标签130为任意可移动的、支持UWB、并且能够采集指纹以及自身的运动信息的电子设备，其中，第一标签130可移动是指标签能够自主移动或者在外部物体牵引下发生移动，示例性的，第一标签可以是可移动机器人，也可以是手环。第一标签130包括UWB模块、IMU模块。其中，UWB模块用于与定位基站110通过UWB进行通信，IMU模块用于测量得到指纹以及第一标签130的运动信息。指纹用于表示预设信号的强度，预设信号可以是任意信号，但是预设信号的强度应当随空间的变化而，例如由于地磁场的磁场强度、蓝牙信号的信号强度随着空间变化而变化，因此预设信号可以是磁场信号和/或蓝牙信号。运动信息用于表示第一标签130的运动状态，例如，运动信息可以用于表示第一标签130的速度、加速度、转向所经过的角度等。定位基站110包括多个UWB天线。定位基站110用于通过多个UWB天线与标签进行通信，从而测量得到标签相对定位基站的距离和方位角，并获取标签发送的标指纹以及运动信息。定位基站110将测量得到的第一标签130相对定位基站的第一距离、第一方位角，以及从第一标签130获取到目标指纹以及运动信息发送至计算单元120，其中，第一指纹为第一标签130的IMU模块在第一标签130所处位置处测量得到的，计算单元120用于根据接收到的第一距离、第一方位角、目标指纹以及运动信息对标签130进行定位。计算单元120可以是集成于定位基站110或第一标签130之上的，也可以是独立于定位基站110和第一标签130的，示例性的，计算单元120可以是集成于定位基站110或第一标签130中的一个芯片，计算单元120也可以是独立于定位基站110和第一标签130的一个服务器。受限制于场景中的障碍物，第一标签130可能处于定位基站110的非视距区域内，导致定位基站110测量得到的第一距离和第一方位角的置信度较低，因此仅根据第一距离和第一方位角难以准确确定出第一标签130所处的位置，即定位基站110难以通过UWB技术准确定位于非视距区域内的第一标签130所处的位置。相关技术中，可以部署更多的基站，以使得第一标签130总是位于至少一个基站的视距区域内，但是部署更多的基站将导致硬件和部署成本的上升。基于此，本发明实施例提供了一种基于单基站的超宽带定位方法，应用于前述计算单元，方法可以如图2所示，包括：S201，获取定位基站测量得到的第一标签相对定位基站的第一距离和第一方位角、IMU模块测量得到的第一标签所处位置处的目标指纹以及第一标签的的运动信息。S202，根据运动信息进行轨迹预测，得到第一标签的第一预测位置。S203，若根据第一距离和第一方位角确定出第一标签位于定位基站的非视距区域，按照预先建立的指纹与位置之间的对应关系，确定目标位置对应的第二预测位置。S204，根据第一预测位置和第二预测位置，确定第一标签所处的融合定位位置。选用该实施例，可以预先建立指纹与位置之间的对应关系，从而在第一标签位于定位基站非视距区域内导致难以通过UWB准确定位第一标签时，根据第一标签中的IMU模块在第一标签所处位置处采集到的目标指纹确定第二预测位置，并结合基于运动信息预测得到的第一预测位置，共同确定出第一标签所处的融合定位位置，由于融合定位位置是结合指纹匹配以及轨迹预测共同得到的，因此准确性相对较高，同时由于只需要一个定位基站，因此硬件和部署成本较低，即本发明实现了通过单基站实现对位于非视距区域内的标签准确定位，在能够准确定位第一标签的情况下，降低了硬件和部署成本。下面将分别对前述S201-S204进行说明：在S201中，第一标签可以为待定位对象本身，也可以设置于待定位对象上。如待定位对象为特定人员，则第一标签佩戴于该特定人员，通过对第一标签进行定位，即可实现对该特定人员的定位。定位基站测量得到第一距离和第一方位角时时第一标签所处的位置应当与第一标签中IMU模块采集到目标指纹以及运动信息时第一标签所处的位置相同。在S202中，运动信息能够反映出第一标签的运动状态，因此根据运动信息能够预测出第一标签的运动轨迹，从而预测得到第一标签所处的位置。示例性的，假设第一标签在t＝0时处于处，第一标签的运动状态表示第一标签朝着y轴正方向以v的速度匀速运动，并且当前时刻为t＝n，则可以预测得到第一标签当前所处的位置应当为。可以理解的是，受到各种因素的影响，如空转、累计误差等，第一标签实际的运动状态与运动信息所表示的运动状态往往存在一定差异，因此根据运动信息预测得到的第一预测位置与第一标签实际所处的位置可能存在一定的差异。无法直接将第一预测位置确定为第一标签所处的位置。在S203中，通过计算第一距离和第一方位角的置信度判断第一标签是否位于定位基站的非视距去，若第一距离和第一方位角的置信度高于预设阈值，则第一标签位于定位基站的视距区域内，反智，若第一距离和第一方位角的置信度不高于预设阈值，则第一标签位于定位基站的非视距区域内。第一距离和第一方位角的的置信度可以是由定位基站计算得到的，也可以是由计算单元计算得到的。第一距离的置信度用于表示第一距离等于第一标签相对定位基站的真实距离的概率，第一方位角的置信度用于表示第一方位角为第一标签相对定位基站的真实方位角的概率。第一距离和第一方位角的置信度可以是根据定位基站与第一标签之间的UWB连接的质量确定得到的，示例性的，若定位基站与第一标签之间的UWB连接的质量较低，则认为定位基站与第一标签之间的UWB连接受到障碍物的干扰，因此定位基站测量得到的第一超宽带定位位置的置信度较低，即第一标签此时位于定位基站的非视距区域内。置信度也可以是根据第一标签历史所处位置以及第一标签的移动能力确定得到的，示例性的，假设根据第一距离和第一方位角计算出的第一标签所处的定位位置相比于上一次第一标签所处的定位位置较远，而第一标签的移动能力较弱，则认为第一距离和第一方位角的置信度较低。对应关系可以是计算单元预先建立得到的，也可以是计算单元以外的其他电子设备预先建立的，本实施例对此不做任何限制，关于如何建立对应关系将在下文中进行说明，在此不再赘述。对应关系中任意位置对应的指纹应当满足一下条件：当第一标签位于该位置处时，第一标签的IMU采集到的指纹应当为该位置对应的指纹。受限制于所建立的对应关系的精确程度、指纹随空间变化的变化程度、采集到的指纹存在一定误差等因素，根据指纹匹配确定出的第二预测位置与第一标签实际所处的位置可能存在一定的差异。因此，无法直接将第二预测位置确定为第一标签所处的位置。在S204中，可以是将第一预测位置和第二预测位置加权平均，并将得到的平均位置作为第一标签所处的融合定位位置，也可以是以第二预测位置作为先验条件，计算通过轨迹预测得到的多个第一预测位置各自的置信度，将置信度最高的第一预测位置作为第一标签所处的融合定位位置。可以理解的是，由于融合定位位置是通过指纹匹配和轨迹预测共同得到的定位位置，因此相比于第一预测位置和第二预测位置，融合定位位置更接近于第一标签实际所处位置，因此可以将融合定位位置确定为第一标签所处的位置。前述S203、S204是在根据第一距离和第一方位角确定出第一标签位于定位基站的非视觉区域的情况下执行的，而对于根据第一距离和第一方位角确定出对于第一标签位于定位基站的视觉区域的情况，在一种可能的实施例中，认为此时定位基站的测量得到的第一距离和第一方位角是相对准确的，将根据第一距离和第一方位角计算出的定位位置确定为第一标签所处的位置。在另一种可能的实施例中，若根据第一距离和第一方位角确定出第一标签位于定位基站的视距区域内，则根据第一预测位置和第一距离和第一方位角，确定第一标签所处的融合定位位置。选用该实施例，在第一标签位于定位基站的视距区域内的情况下，结合轨迹预测和UWB技术共同定位得到第一标签所处的位置，可以进一步提高定位的准确性。根据第一预测位置、第一距离以及第一方位角计算第一标签所处的融合定位位置的方式根据应用场景的不同可以不同，示例性的，可以是根据第一距离和第一方位角计算出第一标签所处的第三预测位置，并计算第一预测位置和第三预测位置的平均位置，将计算得到的平均位置作为第一标签所处的融合定位位置，也可以是以第一距离和第一方位角作为先验条件，计算通过轨迹预测得到的多个第一预测位置各自的置信度，将置信度最高的第一预测位置作为第一标签所处的融合定位位置。在前述S204之后，还可以包括S205：若融合定位位置的置信度大于预设置信度阈值，将目标指纹作为对应关系中融合定位位置对应的指纹。其中，预设置信度阈值是根据用户的实际需求和/或经验设置的，本实施例对此不做任何限制。融合定位位置的置信度用于表示融合定位位置为第一标签实际所处的伪装的概率。若融合定位位置的置信度大于预设置信度阈值，则认为第一标签此时实际所处的位置即为融合定位位置，而目标指纹为第一标签中IMU模块在第一标签所处的位置处采集到的指纹，因此认为融合定位位置处采集到的指纹应当为目标指纹，因此将目标指纹作为对应关系中融合定位位置对应的指纹。可以理解的是，随着时间的变化在同一位置处采集到的指纹可能发生变化，示例性的，以指纹用于表示磁场信号的强度为例，在场景中新增铁磁性物体后，铁磁性物体将导致场景中的磁场发生变化，因此在新增铁磁性物体后，在一个位置处测量得到的磁场强度不等于对应关系中该位置对应的磁场强度，即预先建立的对应关系不准确，而不准确的对应关系将导致确定得到的第二预测位置不准确，进而导致对第一标签的定位不准确。而选用该实施例，能够自动地对对应关系进行更新，避免因对应关系不准确导致的定位不准确，即可以进一步提高定位的准确性。下面将对如何建立对应关系进行示例性说明，可以参见图3a，图3a所示为本发明实施例提供的对应关系建立方法的一种流程示意图，可以包括：S301，获取所有基站测量得到的第二标签相对每个基站的第二距离和第二方位角，第二标签的IMU模块测量得到的第二标签所处位置处的待构建指纹。其中，所有基站中至少包括定位基站，且包括的定位基站的数量为一个，并且所有基站中还可以包括一个或多个辅助基站，并且所有基站中也可以仅为一个定位基站。辅助基站仅用于建立对应关系，在对第一标签进行定位的过程中并不使用辅助基站，即在建立完成对应关系后将撤销所有辅助基站，仅保留定位基站。对于所有基站仅仅为一个定位基站的情况，用于构建对应关系的指纹构建系统如图1所示，而对于所有基站中包括辅助基站的情况，用于构建对应关系的指纹构建系统可以如图3b所示，图3b所示仅是指纹构建系统的一种结构示意图，在其他可能的实施例中，指纹构建系统中也可以包括两个或两个以上的辅助基站。第二标签与第一标签可以是相同的标签，也可以是不同的标签，但是第二标签也具备与第一标签相同的IMU模块和UWB模块。第二标签的IMU模块测量得到待构建指纹时第二标签所处的位置应当与所有基站测量得到第二距离和第二方位角时第二标签所处的位置相同。S302，若根据第二距离和第二方位角确定出第二标签位于至少一个基站的视距区域内，根据目标基站测量得到的第二距离和第二方位角，确定第二标签所处的待构建位置。其中，第二标签位于目标基站的视距区域内。根据第二距离和第二方位角判断第二标签是否位于基站的视距区域内的方式，与前述根据第一距离和第一方位角判断第一标签是否位于基站的视距区域的方式相同，在此不再赘述。若根据第二距离和第二方位角确定出第二标签位于至少一个基站的视距区域内，则认为至少一个基站测量得到的第二距离和第二方位角相对准确，此时认为根据目标基站测量得到的第二距离和第二方位确定出的待构建位置即为第二标签实际所处的位置。若根据第二距离和第二方位角确定出第二标签位于所有基站的非视距区域，则认为所有基站测量得到的第二距离和第二位置均不准确，根据任意基站测量得到的第二距离和第二位置均无法准确计算得到第二标签实际所处位置，为准确定位第二标签实际所处的位置，此时增加新的辅助基站，并返回执行前述S301的步骤。S303，将待构建指纹确定为待构建定位位置对应的指纹。根据应用场景的不同，可以通过不同的方式记录指纹与位置之间的对应关系，包括但不限于链表、文本、表格等，本实施例对此不做任何限制。示例性的，在一种可能的实施例中，可以将指纹作为键值，指纹对应的位置作为键值对应的值形成键值-值对，并将键值-值记录于指纹数据库中，在需要确定目标指纹对应的第二预测位置时，以目标指纹为索引检索指纹数据库，从而查找出与目标指纹对应的第二预测位置。选用该实施例，可以准确的建立对应关系。可以理解的是，为丰富位置与指纹之间的对应关系，需要建立指定区域内多个位置各自对应的指纹，其中，指定区域应当尽可能覆盖第一标签可能的移动范围。因此，在构建位置与指纹之间的对应关系时，第二标签在该指定区域内移动，并不断通过IMU模块在不同位置测量得到待构建指纹，直至遍历指定区域。并且每当第二标签测量得到待构建指纹，每个基站分别测量得到此时第二标签相对该基站的第二距离和第二方位角。从而得到多组待构建指纹、第二距离以及第二方位角，其中，每组待构建指纹、第二距离以及第二方位角是当第二标签处于同一位置时测量得到的。计算单元针对每组构建指纹、第二距离以及第二方位角执行前述S301-S303的步骤，从而确定出指定区域内多个位置各自对应的指纹。并且计算单元可以是在第二标签遍历指定区域后执行前述S301-S303的步骤，也可以是在第二标签遍历指定区域的过程中执行前述S301-S303的步骤。并且计算单元可以多次执行S301，每次执行S301时获取一组待构建指纹、第二距离以及第二方位角，计算单元也可以仅执行一次S301以获取每组待构建指纹、第二距离以及第二方位角。参见图4，图4所示为本发明实施例提供的基于单基站的超宽带定位装置的一种结构示意图，应用于单基站定位系统中的计算单元，所述单基站系统包括一个定位基站和一个或多个第一标签，所述定位基站包括多个超宽带UWB天线，所述第一标签包括UWB模块和惯性测量单元IMU模块，所述IMU模块用于测量得到指纹以及所述第一标签的运动信息，所述UWB模块用于与基站通过UWB进行通信，所述定位基站用于通过所述多个UWB天线测量标签相对所述定位基站的距离和方位角，所述指纹用于表示预设信号的强度，所述预设信号的强度随空间的变化而变化，所述装置包括：信息获取模块401，用于获取所述定位基站测量得到的所述第一标签相对所述定位基站的第一距离和第一方位角、所述IMU模块测量得到的所述第一标签所处位置处的目标指纹以及所述第一标签的运动信息；轨迹预测模块402，用于根据所述运动信息进行轨迹预测，得到所述第一标签的第一预测位置；指纹匹配模块403，用于若根据所述第一距离和所述第一方位角确定出所述第一标签位于所述定位基站的非视距区域，按照预先建立的指纹与位置之间的对应关系，确定所述目标指纹对应的第二预测位置；融合定位模块404，用于根据所述第一预测位置和所述第二预测位置，确定所述第一标签所处的融合定位位置在一种可能的实施例中，所述融合定位模块404，还用于若根据所述距离和所述方位角确定出所述第一标签位于所述定位基站的视距区域，，根据所述第一预测位置、所述第一距离和所述第一方位角，确定所述第一标签所处的融合定位位置。在一种可能的实施例中，所述装置还包括：指纹更新模块，用于若所述融合定位位置的置信度大于预设置信度阈值，将所述目标指纹作为所述对应关系中所述融合定位位置对应的指纹。在一种可能的实施例中，所述装置还包括关系构建模块，用于预先通过以下方式建立对应关系：获取所有基站测量得到的第二标签相对每个基站的第二距离和第二方位角，第二标签的IMU模块测量得到的所述第二标签所处位置处的待构建指纹，所述所有基站至少包括所述定位基站；若根据所述第二距离和所述第二方位角确定出所述第二标签位于至少一个基站的视距区域内，根据目标基站测量得到的所述第二距离和所述第二方位角，确定所述第二标签所处的待构建位置，其中，所述第二标签位于所述目标基站的视距区域内；将所述待构建指纹确定为所述待构建定位位置对应的指纹。在一种可能的实施例中，所述关系构建模块，还用于若根据所述第二距离和所述第二方位角确定出所述第二标签位于所有基站的非视距区域，则增加至少一个新的辅助基站并返回执行所述获取所有基站测量得到的第二标签相对每个基站的第二距离和第二方位角的步骤，其中，所述辅助基站在建立完成所述对应关系后被撤销。并且辅助基站应当包括至少两个UWB天线，且能够测量标签相对辅助基站的距离和方位角。在一种可能的实施例中，所述预设信号包括：磁场信号和/或蓝牙信号。本发明实施例还提供了一种电子设备，如图5所示，包括：存储器501，用于存放计算机程序；处理器502，用于执行存储器501上所存放的程序时，实现如下步骤：获取所述定位基站测量得到的所述第一标签相对所述定位基站的第一距离和第一方位角、所述IMU模块测量得到的所述第一标签所处位置处的目标指纹以及所述第一标签的运动信息；根据所述运动信息进行轨迹预测，得到所述第一标签的第一预测位置；若根据所述第一距离和所述第一方位角确定出所述第一标签位于所述定位基站的非视距区域，按照预先建立的指纹与位置之间的对应关系，确定所述目标指纹对应的第二预测位置；根据所述第一预测位置和所述第二预测位置，确定所述第一标签所处的融合定位位置。上述计算单元提到的存储器可以包括随机存取存储器，也可以包括非易失性存储器，例如至少一个磁盘存储器。可选的，存储器还可以是至少一个位于远离前述处理器的存储装置。上述的处理器可以是通用处理器，包括中央处理器、网络处理器等；还可以是数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。在本发明提供的又一实施例中，还提供了一种计算机可读存储介质，该计算机可读存储介质内存储有计算机程序，所述计算机程序被处理器执行时实现上述任一基于单基站的超宽带定位方法的步骤。在本发明提供的又一实施例中，还提供了一种包含指令的计算机程序产品，当其在计算机上运行时，使得计算机执行上述实施例中任一基于单基站的超宽带定位方法。在上述实施例中，可以全部或部分地通过软件、硬件、固件或者其任意组合来实现。当使用软件实现时，可以全部或部分地以计算机程序产品的形式实现。所述计算机程序产品包括一个或多个计算机指令。在计算机上加载和执行所述计算机程序指令时，全部或部分地产生按照本发明实施例所述的流程或功能。所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。所述计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，所述计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线)或无线方式向另一个网站站点、计算机、服务器或数据中心进行传输。所述计算机可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集成的服务器、数据中心等数据存储设备。所述可用介质可以是磁性介质，、光介质、或者半导体介质)等。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本说明书中的各个实施例均采用相关的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于装置、电子设备、计算机可读存储介质、计算机程序产品的实施例而言，由于其基本相似于方法实施例，所以描述的比较简单，相关之处参见方法实施例的部分说明即可。以上所述仅为本发明的较佳实施例，并非用于限定本发明的保护范围。凡在本发明的精神和原则之内所作的任何修改、等同替换、改进等，均包含在本发明的保护范围内。
