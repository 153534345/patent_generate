标题title
一种小区切换方法、装置和基站
摘要abst
本申请公开了一种小区切换方法、装置和基站，涉及通信技术领域。解决了现有技术中将信号强度最强的小区确定为目标小区进行小区切换时，可能造成终端存在掉话风险，不能确保终端业务连续性的问题。具体方案为：基站向终端发送测量配置，该测量配置用于终端进行邻区测量；基站接收来自终端的测量报告，该测量报告包括至少一个邻区的测量结果；基站在至少一个邻区中去除源小区对应的黑名单小区，得到至少一个候选邻区；该源小区为执行小区切换前终端连接的小区；基站根据至少一个候选邻区的测量结果和源小区对应的历史切换信息，确定至少一个候选邻区的切换优先级；基站按照至少一个候选邻区的切换优先级执行小区切换。
权利要求书clms
1.一种小区切换方法，其特征在于，所述方法包括：基站向终端发送测量配置，所述测量配置用于所述终端进行邻区测量；所述基站接收来自所述终端的测量报告，所述测量报告包括至少一个邻区的测量结果；所述基站在所述至少一个邻区中去除源小区对应的黑名单小区，得到至少一个候选邻区；所述源小区为执行小区切换前所述终端连接的小区；所述基站根据所述至少一个候选邻区的测量结果和所述源小区对应的历史切换信息，确定所述至少一个候选邻区的切换优先级；所述基站按照所述至少一个候选邻区的切换优先级执行小区切换。2.根据权利要求1所述的方法，其特征在于，所述方法还包括：在所述终端从所述源小区切换至目标小区时，所述终端每切换失败一次，所述基站将所述源小区切换至所述目标小区对应的历史切换失败次数加一；在所述源小区切换至所述目标小区对应的历史切换失败次数大于或等于预设阈值的情况下，所述基站确定所述目标小区为所述源小区对应的黑名单小区。3.根据权利要求2所述的方法，其特征在于，每个所述黑名单小区对应一个黑名单恢复定时器，在所述目标小区确定为黑名单小区时，所述目标小区对应的黑名单恢复定时器开始计时，在所述目标小区对应的黑名单恢复定时器的计时时长达到第一预设时长时，所述目标小区恢复为正常小区。4.根据权利要求1-3中任一项所述的方法，其特征在于，所述测量结果包括信号强度信息，所述源小区对应的历史切换信息包括所述源小区切换至至少一个邻区的历史切换失败次数，所述基站根据所述至少一个候选邻区的测量结果和源小区对应的历史切换信息，确定所述至少一个候选邻区的切换优先级，包括：根据所述至少一个候选邻区的信号强度信息得到所述至少一个候选邻区的信号强度分值；根据所述源小区切换至至少一个邻区的历史切换失败次数得到所述至少一个候选邻区的切换成功率分值；根据信号强度权重和切换成功率权重分别对所述信号强度分值和所述切换成功率分值进行加权并求和，得到所述至少一个候选邻区的切换优先级。5.根据权利要求4所述的方法，其特征在于，所述信号强度信息包括参考信号接收功率RSRP和信号与干扰加噪声比SINR。6.根据权利要求4所述的方法，其特征在于，所述源小区切换至至少一个邻区的历史切换失败次数包括第一切换失败次数和第二切换失败次数，所述第一切换失败次数包括所述邻区向所述源小区发送切换失败消息的次数，所述第二切换失败次数包括所述源小区过晚切换、过早切换和切换到的邻区为错误小区的次数。7.根据权利要求6所述的方法，其特征在于，所述根据所述源小区切换至至少一个邻区的历史切换失败次数得到所述至少一个候选邻区的切换成功率分值，包括：在第二预设时长内，根据所述源小区切换至所述候选邻区对应的所述第一切换失败次数的占比确定第一分值；在所述第二预设时长内，根据所述源小区切换至所述候选邻区对应的所述第二切换失败次数的占比确定第二分值；根据第一权重和第二权重分别对所述第一分值和所述第二分值进行加权并求和，得到所述候选邻区的切换成功率分值；所述第一权重小于所述第二权重。8.一种小区切换装置，其特征在于，所述小区切换装置包括收发单元和处理单元，所述收发单元，用于收发信息，或者用于与其他网元通信；所述处理单元，用于执行计算机程序指令，以实现如权利要求1-7中任一项所述的小区切换方法。9.一种基站，其特征在于，所述基站包括：处理器，用于执行指令，以实现如权利要求1-7中任一项所述的小区切换方法。10.一种计算机可读存储介质，所述计算机可读存储介质中具有计算机程序代码，其特征在于，当所述计算机程序代码在处理器上运行时，使得所述处理器执行如权利要求1-7中任一项所述的小区切换方法。11.一种计算机程序产品，其特征在于，所述计算机程序产品包括程序指令，所述程序指令被执行时，以实现如权利要求1-7中任一项所述的小区切换方法。
说明书desc
技术领域本申请涉及通信技术领域，尤其涉及一种小区切换方法、装置和基站。背景技术目前，终端在连接状态时，基站会给终端配置一个测量事件，当满足测量上报条件时，终端会给基站上报对应的测量报告。基站接收终端上报的测量报告后，可以将信号强度最强的小区确定为目标小区，并向终端发送用于指示终端切换至目标小区的切换消息，以使得终端切换至该目标小区。但是，如果信号最强的小区的负载较高，将导致小区切换失败的概率较高。如果信号最强的小区为不可用小区，将导致小区切换失败。因此，将信号强度最强的小区确定为目标小区进行小区切换，可能造成终端存在掉话风险，不能确保终端业务的连续性。发明内容本申请实施例提供一种小区切换方法、装置和基站，解决了仅依据信号强度最强的小区切换的情况下，切换失败率较高，终端存在掉话风险导致终端业务不连续的问题。为解决上述技术问题，本申请实施例提供如下技术方案：一方面，提供一种小区切换方法，该方法包括：首先基站向终端发送测量配置，该测量配置用于终端进行邻区测量；接着基站接收来自终端的测量报告，该测量报告包括至少一个邻区的测量结果；然后基站在至少一个邻区中去除源小区对应的黑名单小区，得到至少一个候选邻区；该源小区为执行小区切换前终端连接的小区；基站根据至少一个候选邻区的测量结果和源小区对应的历史切换信息，确定至少一个候选邻区的切换优先级；最后基站按照至少一个候选邻区的切换优先级执行小区切换。基于本方案，通过在至少一个邻区中去除黑名单小区得到候选邻区，并根据测量结果和历史切换信息确定候选邻区的切换优先级，再根据候选邻区的切换优先级从高到低执行小区切换直至终端切换成功，这样一来，能够降低小区切换失败概率和小区切换过程中UE掉话的风险，提高网络资源利用率和业务连续性，进而提高系统的稳定性。在一些实施例中，上述方法还包括：在终端从源小区切换至目标小区时，终端每切换失败一次，基站将源小区切换至目标小区对应的历史切换失败次数加一；在源小区切换至目标小区对应的历史切换失败次数大于或等于预设阈值的情况下，基站确定目标小区为源小区对应的黑名单小区。基于本方案，通过统计目标小区对应的历史失败次数并将历史失败次数大于或等于预设阈值的小区确定为所述源小区对应的黑名单小区，从而可以在基站收到测量报告时去除邻区列表中的黑名单小区，避免终端重复切换到不可用小区。在一些实施例中，上述每个黑名单小区对应一个黑名单恢复定时器，在目标小区确定为黑名单小区时，目标小区对应的黑名单恢复定时器开始计时，当恢复定时器的计时时长达到第一预设时长时，目标小区恢复为正常小区。基于本方案，通过为每个黑名单小区设置对应的黑名单恢复定时器，可以在该定时器的计时时长达到预设时长时将黑名单小区恢复为正常小区，这样能够避免目标小区已恢复正常时，服务小区还将其认定为黑名单小区。在一些实施例中，上述测量结果包括信号强度信息，源小区对应的历史切换信息包括源小区切换至至少一个邻区的历史切换失败次数，基站根据至少一个候选邻区的测量结果和源小区对应的历史切换信息，确定至少一个候选邻区的切换优先级，包括：根据至少一个候选邻区的信号强度信息得到至少一个候选邻区的信号强度分值；根据源小区切换至至少一个邻区的历史切换失败次数得到至少一个候选邻区的切换成功率分值；根据信号强度权重和切换成功率权重分别对信号强度分值和切换成功率分值进行加权并求和，得到至少一个候选邻区的切换优先级。基于本方案，通过综合考虑邻区参考信号强度和历史切换失败次数确定切换优先级，再按照该切换优先级执行小区切换时，能够提高切换成功率，确保小区切换过程中UE业务的连续性，进而提高系统的稳定性。在一些实施例中，信号强度信息包括参考信号接收功率和信号与干扰加噪声比。基于本方案，通过根据RSRP与SINR确定至少一个候选邻区的信号强度分值，能够更准确的衡量邻区的信号强度。在一些实施例中，源小区切换至至少一个邻区的历史切换失败次数包括第一切换失败次数和第二切换失败次数，第一切换失败次数包括邻区向源小区发送切换失败消息的次数，第二切换失败次数包括源小区过晚切换、过早切换和切换到的邻区为错误小区的次数。实际应用场景中，衡量小区间的区域合理性与配置合理性的关键失败次数统计是考虑异常情况下的次数，即第二失败次数所占的权重可以较大。在一些实施例中，上述根据源小区切换至至少一个邻区的历史切换失败次数得到至少一个候选邻区的切换成功率分值，包括：在第二预设时长内，根据源小区切换至候选邻区对应的第一切换失败次数的占比确定第一分值；在第二预设时长内，根据源小区切换至所述候选邻区对应的第二切换失败次数的占比确定第二分值；根据第一权重和第二权重分别对第一分值和第二分值进行加权并求和，得到候选邻区的切换成功率分值；第一权重小于第二权重。基于本方案，通过划分第一切换失败次数和第二切换失败次数，并未为第一失败次数和第二分配次数分配不同权重，其中第二分配次数权重比第二权重大。这样一来，能够更准确地计算目标小区的切换成功率，保证切换优先级的准确性，提高小区切换的成功率。再一方面，提供一种小区切换装置，该小区切换装置包括收发单元和处理单元；收发单元，用于收发信息，或者用于与其他网元通信；处理单元，用于执行计算机程序指令，以实现如上述任一方面所述的小区切换方法。另一方面，提供一种基站，该基站包括：处理器，用于执行指令，以实现上述任一方面所述的小区切换方法。又一方面，提供一种计算机可读存储介质，所述计算机可读存储介质中具有计算机程序代码，当所述计算机程序代码在处理器上运行时，使得所述处理器执行上述任一方面所述的小区切换方法。又一方面，提供一种计算机程序产品，所述计算机程序产品包括程序指令，所述程序指令被执行时，以实现上述任一方面所述的小区切换方法。附图说明为了更清楚地说明本申请实施例的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例提供的一种通信设备的框图；图2为本申请实施例提供的一种小区切换方法的流程图；图3为本申请实施例提供的另一种小区切换方法的流程图；图4为本申请实施例提供的一种小区切换方法的场景示意图；图5为本申请实施例提供的又一种小区切换方法的流程图；图6为本申请实施例提供的一种小区切换装置的结构图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。在本申请实施例中，为了便于清楚描述本申请实施例的技术方案，采用了“第一”、“第二”等字样对功能和作用基本相同的相同项或相似项进行区分。本领域技术人员可以理解“第一”、“第二”等字样并不对数量和执行次序进行限定，并且“第一”、“第二”等字样也并不限定一定不同。该“第一”、第二”描述的技术特征间无先后顺序或者大小顺序。在本申请实施例中，“示例性的”或者“例如”等词用于表示作例子、例证或说明。本申请实施例中被描述为“示例性的”或者“例如”的任何实施例或设计方案不应被解释为比其它实施例或设计方案更优选或更具优势。确切而言，使用“示例性的”或者“例如”等词旨在以具体方式呈现相关概念，便于理解。在本申请的描述中，除非另有说明，“/”表示前后关联的对象是一种“或”的关系，例如，A/B可以表示A或B；本申请中的“和/或”仅仅是一种描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况，其中A,B可以是单数或者复数。并且，在本申请的描述中，除非另有说明，“多个”是指两个或多于两个。“以下至少一项”或其类似表达，是指的这些项中的任意组合，包括单项或复数项的任意组合。例如，a，b，或c中的至少一项，可以表示：a，b，c，a-b，a-c，b-c，或a-b-c，其中a，b，c可以是单个，也可以是多个。在本申请实施例中，至少一个还可以描述为一个或多个，多个可以是两个、三个、四个或者更多个，本申请不做限制。为了解决将信号强度最强的小区确定为目标小区进行小区切换时，可能造成终端存在掉话风险，不能确保终端业务的连续性的问题，本申请实施例提供一种小区切换方法，能够降低小区切换失败概率和小区切换过程中终端掉话的风险，提高网络资源利用率和业务连续性，进而提高系统的稳定性。图1为本申请实施例提供的一种通信设备的结构图，该通信设备可以为下述实施例中的基站，或设置于基站中的芯片或装置，本申请实施例对此并不进行限定。如图1所示，该通信设备100包括至少一个处理器101，存储器102、收发器103以及通信总线104。下面结合图1对该通信设备的各个构成部件进行具体的介绍：处理器101是通信设备的控制中心，可以是一个处理器，也可以是多个处理元件的统称。例如，处理器101是一个中央处理器，也可以是特定集成电路，或者是被配置成实施本发明实施例的一个或多个集成电路，例如：一个或多个微处理器，或，一个或者多个现场可编程门阵列。其中，处理器101可以通过运行或执行存储在存储器102内的软件程序，以及调用存储在存储器102内的数据，执行通信设备的各种功能。在具体的实现中，作为一种实施例，处理器101可以包括一个或多个CPU，例如图1中所示的CPU0和CPU1。在具体实现中，作为一种实施例，通信设备可以包括多个处理器，例如图1中所示的处理器101和处理器105。这些处理器中的每一个可以是一个单核处理器，也可以是一个多核处理器。这里的处理器可以指一个或多个通信设备、电路、和/或用于处理数据的处理核。存储器102可以是只读存储器或可存储静态信息和指令的其他类型的静态存储通信设备，随机存取存储器或者可存储信息和指令的其他类型的动态存储通信设备，也可以是电可擦可编程只读存储器、只读光盘或其他光盘存储、光碟存储、磁盘存储介质或者其他磁存储通信设备、或者能够用于携带或存储具有指令或数据结构形式的期望的程序代码并能够由计算机存取的任何其他介质，但不限于此。存储器102可以是独立存在，通过通信总线104与处理器101相连接。存储器102也可以和处理器101集成在一起。其中，所述存储器102用于存储执行本发明方案的软件程序，并由处理器101来控制执行。收发器103，用于与其他通信设备之间进行通信。当然，收发器103还可以用于与通信网络通信，如以太网，无线接入网，无线局域网等。收发器103可以包括接收单元实现接收功能，以及发送单元实现发送功能。通信总线104，可以是工业标准体系结构总线、外部通信设备互连总线或扩展工业标准体系结构总线等。该总线可以分为地址总线、数据总线、控制总线等。为便于表示，图1中仅用一条粗线表示，但并不表示仅有一根总线或一种类型的总线。图1中示出的通信设备结构并不构成对通信设备的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件布置。图2为本申请实施例提供的一种小区切换方法的流程图，如图2所示，该小区切换方法包括步骤101-步骤108。步骤101、基站向终端发送测量配置。该测量配置用于终端进行邻区测量。测量配置可以携带在无线资源控制重配置消息中。在一些实施例中，测量配置用于终端对源小区对应的邻区进行测量。例如，测量配置用于终端为执行小区切换前，终端当前连接的小区的邻区进行测量。终端在连接状态时，基站会给终端配置一个测量事件，该测量事件可以包括但不限于定时器配置信息、服务小区的信号门限，以及邻区的信号门限、需要测量的频率、测量带宽、频率相关偏移量、小区列表和小区黑名单等。在一些实施例中，上述基站可以为源基站，该源基站为终端执行小区切换之前为终端提供服务的基站。当终端执行小区切换之后，为终端提供服务的基站可以称为目标基站，该源基站和目标基站可以为不同基站，也可以为同一个基站，本申请实施例对此并不限定。步骤102、终端接收测量配置。在一些实施例中，终端接收测量配置后可以向基站发送RRC重配置完成消息。步骤103、终端根据测量配置对邻区进行测量。终端接收到基站发送的测量配置之后，终端根据测量配置信息可以对邻区的信号强度等参数进行测量。例如，终端可以对邻区的参考信号接收功率、信号与干扰加噪声比等参数进行测量。RSRP是无线信号强度的关键参数以及物理层测量需求之一，是在某个符号内承载参考信号的所有资源粒子上接收到的信号功率的平均值。SINR是指接收到的有用信号的强度与收到的干扰信号的强度比值。步骤104、终端向基站发送测量报告。当满足测量上报条件时，终端向基站上报测量报告。例如，当终端测量到服务小区的信号强度和邻区的信号强度分别满足服务小区的信号门限和邻区的信号门限时，终端确定满足测量上报条件，终端向基站上报测量报告。测量报告包括各邻区的频率、各邻区的物理小区标识、各邻区的RSRP，以及各邻区的SINR等信息。本申请实施例对于测量报告中包括的具体参数内容并不限定。在一些实施例中，终端上报的测量报告中的PCI可能在服务小区的邻区列表中，也可能不在服务小区的邻区列表中。步骤105、基站接收测量报告。终端向基站发送测量报告之后，基站接收终端发送的测量报告。步骤106、基站在至少一个邻区中去除源小区对应的黑名单小区，得到至少一个候选邻区。该源小区为执行小区切换前终端连接的小区。上述至少一个邻区的频率可以与服务小区的频率相同。服务小区为终端切换之前接入的小区。在一些实施例中，基站接收测量报告后，可以根据测量报告中携带的各邻区的PCI，将与服务小区的邻区列表中的PCI和频率一致的邻区构建为步骤106中的至少一个邻区，并在该至少一个邻区中去除源小区对应的黑名单小区，得到至少一个候选邻区。服务小区的邻区列表可以是预先设置的，也可以是基站发现或添加的邻区。例如，以终端上报的测量报告中包括5个PCI，分别为PCI1至PCI5，其中PCI5不在服务小区的邻区列表中，PCI4为源小区对应的黑名单小区，PCI1至PCI3对应的物理小区的频率与服务小区的频率相同为例，基站在接收到终端上报的测量报告后，可以从PCI1至PCI5中去除黑名单小区PCI4以及不在服务小区的邻区列表中的PCI5，将PCI1至PCI3对应的物理小区确定为候选邻区。当终端从源小区切换至目标小区时，若历史切换失败次数大于或等于预设阈值，该目标小区为源小区对应的黑名单小区。在一些实施例中，基站可以通过黑名单小区确定规则确定源小区对应的黑名单小区，如图3所示，小区切换方法除包括步骤101-步骤108以外，还可以包括步骤109和步骤110，其中步骤109和步骤110可以为黑名单小区确定规则。步骤109、在终端从源小区切换至目标小区时，终端每切换失败一次，基站将源小区切换至该目标小区对应的历史切换失败次数加一。在一些示例中，当终端从源小区切换至目标小区时，源基站向目标基站发送切换请求，如果目标小区不接受任何协议数据单元会话资源，或者在准备切换过程中发生故障，则需要向接入与移动管理功能实体发送包括失败原因的切换失败消息。如果服务小区收到AMF回复的切换失败消息，基站将源小区切换至该目标小区对应的历史切换失败次数加1。如下表1所示，终端切换失败时的切换失败原因包括但不限于No radioresources available in target cell、Cell not available、Unknown target ID、Radio resources not available等原因。表1失败原因描述No radio resources available in target cell目标小区负载过高Cell not available小区不可用Unknown target ID目的小区不存在Radio resources not available无线资源不可用…………如图4所示，基站1下部署有频点F1，小区1，频点F2，小区2。基站2下部署有频点F3，小区3，频点F2，小区4。当终端1从图4中的小区2切换至小区4时，如果基站1收到失败原因为目标小区负载过高的切换失败消息，基站1将小区2切换至小区4对应的切换失败次数加1。当终端2从图4中的小区2切换至小区4时，如果基站1收到失败原因为小区不可用的切换失败消息，基站1将小区2切换至小区4对应的切换失败次数再加1。步骤110、在源小区切换至目标小区对应的历史切换失败次数大于或等于预设阈值的情况下，基站确定目标小区为源小区对应的黑名单小区。当源小区切换至目标小区对应的历史切换失败次数达到预设阈值FAILE_COUNT后，将该目标小区设置为源小区对应的黑名单小区。例如，当小区2切换至小区4对应的切换失败次数达到10时，将小区4确定为小区2对应的黑名单小区。本申请实施例对于预设阈值的具体数值并不限定，在此以预设阈值为10为例进行示例性说明。本申请实施例中每个源小区可以对应一个黑名单小区列表，每个源小区对应的黑名单列表可以包括一个黑名单小区，也可以包括多个黑名单小区，本申请对此并不限定。在基站接收来自终端的测量报告后，基站可以根据黑名单小区列表，将至少一个邻区中的黑名单小区过滤掉，得到至少一个候选邻区。该至少一个候选邻区为可接纳邻区。在一些实施例中，每个黑名单小区可以设置一个黑名单恢复定时器，在一个小区确定为黑名单小区时，将该黑名单小区对应的黑名单恢复定时器开始计时，在该黑名单小区对应的黑名单恢复定时器的计时时长达到第一预设时长时，将该黑名单小区恢复为正常小区。例如，以小区4对应的恢复时间为60分钟为例，当基站确定小区4为源小区对应的黑名单小区时，可以为小区4设置对应的黑名单恢复定时器并开始计时，当小区4对应的黑名单恢复定时器的计时时长达到60分钟时，将小区4恢复到正常邻区列表，避免邻区在已恢复正常的情况下，服务小区还将其认定为黑名单小区。不同黑名单小区对应的恢复时间可以相同，也可以不同，本申请实施例对此并不限定。本申请对于上述步骤109-步骤110，与步骤101-步骤108的先后执行顺序并不限定，图3仅是示例性说明。在一些实施例中，基站可以根据步骤109-步骤110确定源小区对应的黑名单小区，并在步骤106中根据确定的黑名单小区，将至少一个邻区中的黑名单小区去除。在一些实施例中，步骤109-步骤110可以与步骤101-步骤108同时进行。本申请通过在至少一个邻区中将黑名单小区去除，能够确保终端不会切换到不可用小区或切换成功率较低的小区。步骤107、基站根据至少一个候选邻区的测量结果和源小区对应的历史切换信息，确定至少一个候选邻区的切换优先级。至少一个候选邻区的测量结果包括信号强度信息，该信号强度信息包括但不限于RSRP和SINR。下述实施例以至少一个候选邻区的测量结果包括至少一个候选邻区的RSRP和SINR为例进行示例性说明。源小区对应的历史切换信息包括源小区切换至至少一个邻区的历史切换失败次数。该源小区切换至至少一个邻区的历史切换失败次数包括第一切换失败次数和第二切换失败次数，该第一切换失败次数和第二切换失败次数可以认为是不同维度的切换失败。第一切换失败次数包括邻区向源小区发送携带切换失败原因的切换失败消息的次数。该第一切换失败次数可以记为N1。例如，在正常切换流程中，目标小区每回复一次handover_failure并携带失败原因，该目标小区对应的第一切换失败次数N1加一。第二切换失败次数包括源小区过晚切换、过早切换和切换到的邻区为错误小区的次数。该第二切换失败次数可以记为N2。第二切换失败次数也可以认为是小区切换过程中发生切换异常的次数。源小区过晚切换是指终端在源小区内停留较长时间后，会出现无线链路失败，终端试图在另一个小区重新建立无线链路连接。即，终端在源小区发生了RLF，并且在RRC重建时，重建到非源小区，这种情况说明终端超出了源小区的信号覆盖范围。在一些示例中，当小区1接收来自小区2的终端的上下文检索请求，该上下文检索请求的请求原因为重建，且小区1存在该终端的上下文，且终端在小区1的停留时间超过门限值时，可以认为小区1到小区2过晚切换，小区1对应的第二失败切换次数累加1。过早切换是指终端从源小区成功切换到目标小区后不久发生RLF，或者在切换过程中发生切换失败，终端试图在源小区或其他小区中重新建立无线链路连接。即，终端从源小区切换到目标小区成功后，在目标小区只停留了很短的时间，就发生了RLF，在RRC连接重建时，重建回源小区或重建到其他小区。在一些示例中，当小区2接收到小区1的终端的上下文检索请求，该上下文检索请求的请求原因为重建，小区2存在该终端的上下文，且该终端从小区1切换至小区2，终端在小区2的停留时间小于门限值，则认为UE从小区1到小区2过早切换，小区2通过HANDOVER REPORT消息告知小区1，小区1接收到HANDOVER REPORT后，小区1对应的第二失败切换次数累加1。切换到错误小区是指从源小区成功切换到目标小区后不久发生RLF，或者在切换过程中发生切换失败，终端尝试在源小区和目标小区之外的小区中重新建立无线链路连接。在一些示例中，当小区2接收到小区3的终端的上下文检索请求，该上下文检索请求的请求原因为重建，小区2存在该终端的上下文，且该终端为从小区1到小区2的切换终端，且终端在小区2的停留时间小于门限值，则认为终端从小区1到小区2的切换为切换到错误小区，小区2通过HANDOVER REPORT消息告知小区1，小区1接收到HANDOVER REPORT后，小区2对应的第二失败切换次数累加1。在一些实施例中，如图5所示，上述步骤107中基站根据至少一个候选邻区的测量结果和源小区对应的历史切换信息，确定至少一个候选邻区的切换优先级，可以包括下述步骤1071-步骤1073。步骤1071、根据至少一个候选邻区的信号强度信息得到至少一个候选邻区的信号强度分值。在一些示例中，步骤1071可以根据终端上报的至少一个候选邻区的RSRP和SINR值的大小区间，划分分值阶梯，获得信号强度分值G1，信号强度越好，则分值越高。根据RSRP和SINR值的大小区间划分的分值阶梯可以如表2所示。表2RSRP大小SINR大小分值G1＞-85dBm＞2595-85～-95dBm16～2590-95～105dBm11～1580-105～115dBm3～1070＜-115dBm＜360步骤1072、根据源小区切换至至少一个邻区的历史切换失败次数得到至少一个候选邻区的切换成功率分值。上述步骤1072在计算至少一个候选邻区的切换成功率分值时，可以在第二预设时长内，根据源小区切换至候选邻区对应的第一切换失败次数的占比确定第一分值，根据所源小区切换至候选邻区对应的第二切换失败次数的占比确定第二分值，并根据第一权重和第二权重分别对第一分值和第二分值进行加权并求和，得到候选邻区的切换成功率分值G2。在一些示例中，衡量小区间的区域合理性与配置合理性的关键失败次数统计是考虑切换异常情况下的次数，因此可以第二切换失败次数对应的第二权重可以大于第一切换失败次数对应的第一权重。比如，第一权重F1可以为40％，第二权重F2可以为60％。上述源小区切换至候选邻区对应的第一切换失败次数记为N1，N1占比＝N1/服务小区向该邻区发起的切换准备次数，切换准备次数指服务小区向该邻区发送handoverrequest的次数。上述源小区切换至候选邻区对应的第二切换失败次数记为N2，N2占比＝N2/服务小区向该邻区发起的切换执行次数，切换执行次数指服务小区接收到邻区的handoverrequest acknowledge并向UE成功下发RRCReconfiguration消息的次数。在一些示例中，可以将失败次数的占比划分阶梯分值，失败比例越高，说明两小区之间的切换流程不稳定，分值越小。该阶梯分值如表3所示。表3切换失败次数占比分值＜0.05％1000.05％～0.1％900.1％～1％80％1～2％70＞2％60根据N1占比和N2占比，查找上述表3，可以得到第一分值S1和第二分值S2。根据第一权重F1和第二权重F2分别对第一分值S1和第二分值S2进行加权并求和，得到候选邻区的切换成功率分值G2，该切换成功率分值G2可以根据如下公式得到。步骤1073、根据信号强度权重和切换成功率权重分别对信号强度分值和切换成功率分值进行加权并求和，得到至少一个候选邻区的切换优先级。至少一个候选邻区的切换优先级G的数值越大，表示优先级越高。每个候选邻区的切换优先级G可以根据如下公式得到：其中，W1为信号强度权重，W2为切换成功率权重。本申请对于信号强度权重和切换成功率权重的具体数值并不限定，实际应用中可以根据具体场景进行设置。比如，信号强度权重可以设置为60％，切换成功率权重可以设置为40％。步骤108、基站按照至少一个候选邻区的切换优先级执行小区切换。基站可以按照至少一个候选邻区的切换优先级G的数值从高到低依次执行小区切换，直到终端成功切换到目标小区。比如，基站可以指示终端切换至至少一个候选邻区中切换优先级最高的邻区，若终端成功切换至该切换优先级最高的邻区，则结束。若终端未成功切换至该切换优先级最高的邻区，则基站可以指示终端切换至至少一个候选邻区中切换优先级第二高的邻区，依次类推直至终端切换成功。本申请提供的小区切换方法，通过在至少一个邻区中将黑名单小区去除，能够确保终端不会切换到不可用小区或切换成功率较低的小区。而且通过根据邻区信号强度和历史切换失败次数确定候选邻区的切换优先级，再根据该切换优先级从高到低执行小区切换，能够提高终端小区切换的成功率，确保小区切换过程中UE业务的连续性，进而提高系统的稳定性。上述主要从方法的角度对本申请实施例提供的方案进行了介绍。为了实现上述功能，其包含了执行各个功能相应的硬件结构和/或软件模块。本领域技术人员应该很容易意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，本申请能够以硬件或硬件和计算机软件的结合形式来实现。某个功能究竟以硬件还是计算机软件驱动硬件的方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。本申请实施例可以根据上述方法示例对计算机进行功能模块的划分，例如，可以对应各个功能划分各个功能模块，也可以将两个或两个以上的功能集成在一个处理模块中。上述集成的模块既可以采用硬件的形式实现，也可以采用软件功能模块的形式实现。需要说明的是，本申请实施例中对模块的划分是示意性的，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式。如图6所示，本申请实施例提供一种小区切换装置600。该小区切换装置600可以上述实施例中的基站或基站中的装置，例如芯片，小区切换装置600可以用于实现上述任一实施例涉及基站的方法和功能。该小区切换装置600可以包括通信单元601和处理单元602。通信单元601可用于支持小区切换装置600与终端之间进行通信。处理单元602用于对上述小区切换装置600的动作进行控制管理，用于执行上述实施例中由基站进行的处理。可选的，小区切换装置600还可以包括存储单元，处理单元602还可以执行存储在存储单元中的程序或指令，以使得小区切换装置600实现上述任一实施例所涉及的方法和功能。示例性的，上述通信单元601可以用于向终端发送测量配置，并接收来自终端的包括至少一个邻区的测量结果的测量报告。处理单元602可以用于在至少一个邻区中去除源小区对应的黑名单小区，得到至少一个候选邻区，并根据至少一个候选邻区的测量结果和源小区对应的历史切换信息，确定至少一个候选邻区的切换优先级，再按照至少一个候选邻区的切换优先级执行小区切换。上述处理单元602还用于在终端从源小区切换至目标小区时，终端每切换失败一次，处理单元602将源小区切换至目标小区对应的历史切换失败次数加一。在目标小区的历史切换失败次数大于或等于预设阈值的情况下，处理单元602确定目标小区为源小区对应的黑名单小区。在一些实施例中，每个黑名单小区对应一个黑名单恢复定时器，在目标小区确定为黑名单小区时，目标小区对应的黑名单恢复定时器开始计时，在目标小区对应的黑名单恢复定时器的计时时长达到第一预设时长时，目标小区恢复为正常小区。在一些实施例中，上述测量结果包括信号强度信息，源小区对应的历史切换信息包括源小区切换至至少一个邻区的历史切换失败次数，上述处理单元602具体用于根据至少一个候选邻区的信号强度信息得到至少一个候选邻区的信号强度分值，根据源小区切换至至少一个邻区的历史切换失败次数得到至少一个候选邻区的切换成功率分值，根据信号强度权重和切换成功率权重分别对信号强度分值和切换成功率分值进行加权并求和，得到至少一个候选邻区的切换优先级。上述信号强度信息包括但不限于参考信号接收功率RSRP和信号与干扰加噪声比SINR。在一些实施例中，上述源小区切换至至少一个邻区的历史切换失败次数包括第一切换失败次数和第二切换失败次数，第一切换失败次数包括邻区向源小区发送切换失败消息的次数，第二切换失败次数包括源小区过晚切换、过早切换和切换到的邻区为错误小区的次数。上述处理单元602具体还用于在第二预设时长内，根据源小区切换至候选邻区对应的第一切换失败次数的占比确定第一分值。在第二预设时长内，根据源小区切换至候选邻区对应的第二切换失败次数的占比确定第二分值。根据第一权重和第二权重分别对第一分值和第二分值进行加权并求和，得到候选邻区的切换成功率分值。该第一权重小于第二权重。示例性的，该小区切换装置600可以为图1所示的通信设备，处理单元602可以为图1中的处理器101、通信单元601可以为图1中的收发器103。可选的，该小区切换装置600还可以包括存储器，该存储器用于存储小区切换装置600执行上文所提供的任一小区切换方法所对应的程序代码和数据。上述图1涉及的各部件的所有相关内容的描述均可以援引到该小区切换装置600对应部件的功能描述，在此不再赘述。本申请实施例还提供一种基站，该基站包括处理器，该处理器用于执行计算机执行指令，以支持该基站实现图2、图3或图5所述的小区切换方法。可选的，该基站还可以包括收发器以及存储器，收发器，用于收发信息，或者用于与其他网元通信；存储器，用于存储计算机执行指令。本申请实施例还提供一种计算机可读存储介质，该计算机可读存储介质中存储有计算机程序代码，当上述处理器执行该计算机程序代码时，电子设备执行图2、图3或图5所述的小区切换方法。本申请实施例还提供一种计算机程序产品，该计算机程序产品包括指令，当指令在计算机上运行时，使得计算机执行上述图2、图3或图5所述的小区切换方法。结合本申请公开内容所描述的方法或者算法的步骤可以硬件的方式来实现，也可以是由处理器执行软件指令的方式来实现。软件指令可以由相应的软件模块组成，软件模块可以被存放于存储介质中。一种示例性的存储介质耦合至处理器，从而使处理器能够从该存储介质读取信息，且可向该存储介质写入信息。当然，存储介质也可以是处理器的组成部分，处理器和存储介质也可以作为分立组件存在于基站中。本领域技术人员应该可以意识到，在上述一个或多个示例中，本申请所描述的功能可以用硬件、软件、固件或它们的任意组合来实现。当使用软件实现时，可以将这些功能存储在计算机可读介质中或者作为计算机可读介质上的一个或多个指令或代码进行传输。计算机可读介质包括计算机可读存储介质和通信介质，其中通信介质包括便于从一个地方向另一个地方传送计算机程序的任何介质。存储介质可以是通用或专用计算机能够存取的任何可用介质。以上所述的具体实施方式，对本申请的目的、技术方案和有益效果进行了进一步详细说明，所应理解的是，以上所述仅为本申请的具体实施方式而已，并不用于限定本申请的保护范围，凡在本申请的技术方案的基础之上，所做的任何修改、等同替换、改进等，均应包括在本申请的保护范围之内。
