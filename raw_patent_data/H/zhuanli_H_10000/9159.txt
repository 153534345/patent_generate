标题title
一种无人艇导航方法
摘要abst
本发明公开了一种无人艇导航方法，使用IMU反馈的角度对无人艇进行航向角的闭环控制，引入UWB的定位数据，使无人艇先定当前角度航行一个时间间隔，记录下航行前和时间间隔后的位置坐标，通过两组坐标求解航行的真实角度值，使用卡尔曼滤波的方式融合IMU的陀螺仪数据和坐标点的角度值，最终使用串级积分分离PID算法进行无人艇的航向航速控制，使得无人艇航行过程的精确稳定。本发明通过卡尔曼滤波器融合IMU的漂移航向角度值与UWB的精确位置值，解决了水池条件下小型无人艇由于航向角漂移导致的导航困难问题。本发明硬件实现成本极低，是低成本无人艇水池导航实验较优选择。
权利要求书clms
1.一种无人艇导航方法，其特征在于，包括以下步骤：步骤一：在仅有IMU角度数据的前提下，对无人艇的航向角进行积分分离的PID控制算法，针对角度控制器和速度控制器分别设置阈值ε和整定参数kp，kd，ki，控制无人艇进行闭环状态下的直航；步骤二：对无人艇给定一个导航点集，所述点集包含无人艇航行需到经过的若干目标位置点，位置点坐标为，n＝1,2,3,…N，N为导航点集中目标位置点的数量；步骤三：取导航点集中的阶段目标位置点，若首次执行步骤三，初始化n＝1；步骤四：无人艇记录通过UWB模块得到当前位置点坐标和当前IMU输出的航向角ψimu_1，将此时的航向角ψimu_1作为目标航向角，进行无人艇闭环状态下的直航控制，直航时间间隔T，在T时间内，IMU的航向角数据零偏稳定性小于设定的精度因子；直航结束后，通过UWB模块得到T时间后当前位置点坐标，通过两次位置点坐标求得无人艇T时刻内的真实航行艏向ψr；步骤五：计算阶段目标位置点与当前位置点组成的方向向量角度ψt，由真实航行艏向ψr和方向向量角度ψt得到无人艇当前所需转动角度Δψt；步骤六：将转动角度Δψt作为指令输入无人艇的运动控制器，使得无人艇真实艏向ψr与阶段目标位置点对齐，记录当前真实艏向ψr为定向控制器的目标角度ψt，开启定向直航；步骤七：在直航过程中，利用卡尔曼滤波得到当前时刻k的航向角步骤八：计算艇体k时刻位置点和阶段目标位置点之间的距离dnk；步骤九：将步骤七得到的航向角作为指令输入至角度控制器，将步骤八得到的艇体k时刻位置点和目标点之间的距离dnk作为指令输入到速度控制器中，控制无人艇航行；步骤十：判断dnk是否为零，如果为零，则到达目标点，执行步骤十一；否则，返回步骤七；步骤十一：判断n＝N是否成立，如果成立，则导航过程结束；否则，令n＝n+1，返回步骤三。2.根据权利要求1所述的一种无人艇导航方法，其特征在于：步骤七所述利用卡尔曼滤波得到当前时刻k的航向角包括：通过UWB模块得到k-1时刻位置点坐标与当前k时刻位置点坐标并根据两个时刻位置点坐标计算运动矢量方向，在艇体直航没有飘角的情况下，认为此运动方向为艇体的艏向角观测值，记为αk；设滤波器输出的艇体航向角为在时间间隔Δt内IMU输出的航向的角速度为ωk-1，则艇体航向角的状态转移方程为：其中，为根据IMU输出的角速度预测的k时刻艇体航向状态转移，Δt为k-1时刻和k时刻的时间间隔；状态转移的协方差方程为：其中，为根据状态转移方程预测的协方差，A为状态转换矩阵，取，Q为状态转移过程的协方差；求出卡尔曼增益Kk为：其中H为状态空间到测量空间的转换矩阵，R为根据UWB模块的双标位置值，即k-1时刻位置点坐标和k时刻位置点坐标，测得的艏向角测量噪声，更新估计值和状态转移协方差，更新方程如下：其中，为k时刻滤波得到的航向角。3.根据权利要求1或2所述的一种无人艇导航方法，其特征在于：所述直航时间间隔T满足：其中，V为航行速度，L为艇长。
说明书desc
技术领域本发明属于机器人定位与导航技术领域，涉及一种无人艇导航方法，特别是一种基于UWB与IMU融合的无人艇导航方法。背景技术无人艇是一种具有一定自主能力，可在无人条件下自主航行并完成作业任务的水面运动平台，具备成本低廉，行动隐蔽，机动灵活等特点，可执行环境调查、搜救、物资运输等多种任务，被广泛应用于海洋调查研究中。惯性测量单元是测量物体三轴姿态角以及加速度的装置。经常用在需要进行运动控制的设备上，例如汽车和机器人上。在水池中进行无人艇导航控制时，惯性测量单元安装在无人艇上，由于加速度计对陀螺仪的融合滤波无法抵消掉IMU航向角的静态误差，随着无人艇的横摇纵摇，IMU的航向角漂移严重，无法独立满足无人艇在水池调试过程中的航向反馈需求，同时在水池中GPS定位信号也难以获得，而磁罗经受水池中金属结构物磁场干扰也无法有效使用，这些问题均导致无人艇艏向获取困难。超宽带技术是一种无线载波通信技术，它是利用纳秒级的非正弦波窄脉冲传输数据，因此其所占的频谱范围很宽。具有系统复杂度低，发射信号功率谱密度低，对信道衰落不敏感，截获能力低，定位精度高等优点。被广泛应用于小范围高精度定位。发明内容针对上述现有技术存在的问题和不足，本发明要解决的技术问题是提供一种基于UWB与IMU融合的无人艇导航方法，解决无人艇在水池实验中GPS定位信号难以获得，磁罗经受水池中金属结构物磁场干扰和单独的IMU航向角有漂移情况下导致的无人艇艏向获取困难的问题。为解决上述技术问题，本发明的一种无人艇导航方法，包括以下步骤：步骤一：在仅有IMU角度数据的前提下，对无人艇的航向角进行积分分离的PID控制算法，针对角度控制器和速度控制器分别设置阈值ε和整定参数kp，kd，ki，控制无人艇进行闭环状态下的直航；步骤二：对无人艇给定一个导航点集，所述点集包含无人艇航行需到经过的若干目标位置点，位置点坐标为，n＝1,2,3,…N，N为导航点集中目标位置点的数量；步骤三：取导航点集中的阶段目标位置点，若首次执行步骤三，初始化n＝1；步骤四：无人艇记录通过UWB模块得到当前位置点坐标和当前IMU输出的航向角ψimu_1，将此时的航向角ψimu_1作为目标航向角，进行无人艇闭环状态下的直航控制，直航时间间隔T，在T时间内，IMU的航向角数据零偏稳定性小于设定的精度因子；直航结束后，通过UWB模块得到T时间后当前位置点坐标，通过两次位置点坐标求得无人艇T时刻内的真实航行艏向ψr；步骤五：计算阶段目标位置点与当前位置点组成的方向向量角度ψt，由真实航行艏向ψr和方向向量角度ψt得到无人艇当前所需转动角度Δψt；步骤六：将转动角度Δψt作为指令输入无人艇的运动控制器，使得无人艇真实艏向ψr与阶段目标位置点对齐，记录当前真实艏向ψr为定向控制器的目标角度ψt，开启定向直航；步骤七：在直航过程中，利用卡尔曼滤波得到当前时刻k的航向角步骤八：计算艇体k时刻位置点和阶段目标位置点之间的距离dnk；步骤九：将步骤七得到的航向角作为指令输入至角度控制器，将步骤八得到的艇体k时刻位置点和目标点之间的距离dnk作为指令输入到速度控制器中，控制无人艇航行；步骤十：判断dnk是否为零，如果为零，则到达目标点，执行步骤十一；否则，返回步骤七；步骤十一：判断n＝N是否成立，如果成立，则导航过程结束；否则，令n＝n+1，返回步骤三。进一步的，步骤七中利用卡尔曼滤波得到当前时刻k的航向角包括：通过UWB模块得到k-1时刻位置点坐标与当前k时刻位置点坐标并根据两个时刻位置点坐标计算运动矢量方向，在艇体直航没有飘角的情况下，认为此运动方向为艇体的艏向角观测值，记为αk；设滤波器输出的艇体航向角为在时间间隔Δt内IMU输出的航向的角速度为ωk-1，则艇体航向角的状态转移方程为：其中，为根据IMU输出的角速度预测的k时刻艇体航向状态转移，Δt为k-1时刻和k时刻的时间间隔；状态转移的协方差方程为：其中，为根据状态转移方程预测的协方差，A为状态转换矩阵，取，Q为状态转移过程的协方差；求出卡尔曼增益Kk为：其中H为状态空间到测量空间的转换矩阵，R为根据UWB模块的双标位置值，即k-1时刻位置点坐标和k时刻位置点坐标，测得的艏向角测量噪声，更新估计值和状态转移协方差，更新方程如下：其中，为k时刻滤波得到的航向角。进一步的，直航时间间隔T满足：其中，V为航行速度，L为艇长。本发明的有益效果：使用IMU输出数据对无人艇进行基本的运动控制，在IMU有漂移的航向角控制基础上，加入UWB的不同时刻差分数据进行融合，从而达到修正航向角进而完成精确导航的目的。使用IMU反馈的角度对无人艇进行航向角的闭环控制，包括定角度航行和定角度旋转。在此基础上，引入UWB的定位数据，使无人艇先定当前角度航行一个时间间隔，记录下航行前和时间间隔后的位置坐标，通过两组坐标求解航行的真实角度值，使用卡尔曼滤波的方式融合IMU的陀螺仪数据和坐标点的角度值，最终使用串级积分分离PID算法进行无人艇的航向航速控制，使得无人艇航行过程的精确稳定。与现有技术相比，本发明通过卡尔曼滤波器融合IMU的漂移航向角度值与UWB的精确位置值，解决了水池条件下小型无人艇由于航向角漂移导致的导航困难问题。本发明硬件实现成本极低，是低成本无人艇水池导航实验较优选择。附图说明图1是使用UWB和IMU融合导航的航行示意图；图2是无人艇运动控制算法示意图；图3是融合导航算法流程图。具体实施方式下面结合说明书附图和实施例对本发明做进一步说明。本发明包括以下步骤：步骤一：在仅有IMU角度数据的前提下，对无人艇的航向角进行积分分离的PID控制算法，针对角度控制器和速度控制器分别设置阈值ε和整定参数kp，kd，ki，控制无人艇进行闭环状态下的直航；步骤二：对无人艇给定一个导航点集，所述点集包含无人艇航行需到经过的若干目标位置点，位置点坐标为，n＝1,2,3,…N，N为导航点集中目标位置点的数量；步骤三：取导航点集中的阶段目标位置点，初始化n＝1；步骤四：无人艇记录通过UWB模块得到当前位置点坐标和当前IMU输出的航向角ψimu_1，将此时的航向角ψimu_1作为目标航向角，进行无人艇闭环状态下的直航控制，直航时间间隔T，在T时间内，IMU的航向角数据零偏稳定性小于设定的精度因子；直航结束后，通过UWB模块得到T时间后当前位置点坐标，通过两次位置点坐标求得无人艇T时刻内的真实航行艏向ψr；步骤五：计算阶段目标位置点与当前位置点组成的方向向量角度ψt，由真实航行艏向ψr和方向向量角度ψt得到无人艇当前所需转动角度Δψt；步骤六：将转动角度Δψt作为指令输入无人艇的运动控制器，使得无人艇真实艏向ψr与阶段目标位置点对齐，记录当前真实艏向ψr为定向控制器的目标角度ψt，开启定向直航；步骤七：在直航过程中，利用卡尔曼滤波得到当前时刻k的航向角通过UWB模块得到k-1时刻位置点坐标与当前k时刻位置点坐标并根据两个时刻位置点坐标计算运动矢量方向，在艇体直航没有飘角的情况下，认为此运动方向为艇体的艏向角观测值，记为αk；设滤波器输出的艇体航向角为在时间间隔Δt内IMU输出的航向的角速度为ωk-1，则艇体航向角的状态转移方程为：其中，为根据IMU输出的角速度预测的k时刻艇体航向状态转移，Δt为k-1时刻和k时刻的时间间隔；状态转移的协方差方程为：其中，为根据状态转移方程预测的协方差，A为状态转换矩阵，取，Q为状态转移过程的协方差；求出卡尔曼增益Kk为：其中H为状态空间到测量空间的转换矩阵，R为根据UWB模块的双标位置值测得的艏向角测量噪声，更新估计值和状态转移协方差，更新方程如下：其中，为k时刻滤波得到的航向角。步骤八：计算艇体k时刻位置点和阶段目标位置点之间的距离dnk；步骤九：将步骤七得到的航向角作为指令输入至角度控制器，将步骤八得到的艇体k时刻位置点和目标点之间的距离dnk作为指令输入到速度控制器中，控制无人艇航行；步骤十：判断dnk是否为零，如果为零，则到达目标点，执行步骤十一；否则，返回步骤七；步骤十一：判断n＝N是否成立，如果成立，则导航过程结束；否则，令n＝n+1，返回步骤三。结合具体参数给出实施例。结合图1、2、3，本发明包括以下步骤：步骤一：在仅有IMU角度数据的前提下，对无人艇的航向角进行积分分离的PID控制算法，并根据实际情况设置阈值ε，整定参数kp,kd,ki。如图2所示，对无人艇的航向角和距离进行积分分离的PID控制算法，针对角度控制器和速度控制器分别设置阈值ε，当被控角度或距离偏差量小于阈值ε后，使用PID控制器，并调节k_p,k_i,k_d三个控制器参数，用于消除系统静差，提高控制精度。当被控角度或距离偏差量大于阈值ε后，使用PD控制器，并调节k_p,k_i,k_d三个控制器参数，用于避免产生过大的超调，又使系统有较快的控制响应。将角度控制器和速度控制器输入无人艇的推进器，完成无人艇的角度和速度控制。这两个控制器也将作为本算法后续步骤的执行前提。步骤二：在已取得闭环控制效果的基础上，对无人艇给定一个导航点集，点集包含无人艇所需航行到的若干目标位置点坐标，N为导航点集中的点个数。步骤三：取导航点集中的阶段目标位置点坐标。步骤四：无人艇记录下当前位置点坐标和当前IMU输出的航向角ψimu_1，将此时的航向角ψimu_1作为目标航向角，进行无人艇闭环状态下的直航控制，直航的时间间隔T。上式航行速度V和艇大小L有关，在T时间内，IMU的航向角数据基本准确。直航结束后，记录T时刻后当前位置点坐标。通过两次位置点坐标求得无人艇T时刻内的真实航行艏向ψr。位置点坐标通过UWB模块获得。步骤五：计算阶段目标位置点坐标与无人艇当前位置点坐标两点组成的方向向量角度ψt。由真实航行艏向ψr和方向向量角度ψt可得到无人艇当前所需转动角度Δψt，步骤六：对无人艇的运动控制器输入转动角度Δψt的指令，使得目标点位置在无人艇真实艏向ψr的射线方向上。记录当前真实艏向ψr为定向控制器的目标角度ψt，开启定向直航。步骤七：在直航过程中，周期性地计算k-1时刻位置坐标与当前k时刻位置点坐标的运动矢量方向，在艇体直航没有飘角的情况下，认为此运动方向为艇体的艏向角观测值，记为αt。设滤波器输出的艇体航向角为在某一时间间隔Δt，IMU输出的航向的角速度为ωk-1，则艇体航向角的状态转移方程为：其中，为根据IMU输出的角速度预测的艇体航向状态转移。而状态转移的协方差方程为：其中，为根据状态转移方程预测的协方差，A为状态转换矩阵，本算法取，Q为状态转移过程的协方差，初始取。因此求出卡尔曼增益Kk为：其中H为状态空间到测量空间的转换矩阵，取，R为根据UWB的双标位置值测得的艏向角测量噪声，初始取1°，求得增益后，即可更新估计值和状态转移协方差。更新方程如下：滤波得到的航向角作为艇航行过程中使用的角度，用于无人艇向目标点运动时的航向微调。步骤八：计算艇体当前位置点和目标点之间的距离dnt。步骤九：步骤四到七的无人艇IMU和UWB进行的艏向融合结果联合步骤八的无人艇位置偏差量信息，输入到角度偏差控制器和距离偏差控制器中，从而完成无人艇对导航点的航行控制过程。步骤十：循环执行步骤三至步骤九，直至导航点集被无人艇完成遍历航行后，导航过程结束。
