标题title
无线通信系统的波束成形方法、装置及存储介质
摘要abst
本发明实施例公开了一种无线通信系统的波束成形方法、装置及存储介质，属于波束成形的技术领域；其方法包括获取通信数据的波束方向；基于所述波束方向，从低主瓣增益波动的码本中调取指向方向与所述波束方向对应的码字，所述低主瓣增益波动的码本基于毫米波大规模阵列的阵列参数所构建的迭代参数进行迭代求解获得的；基于所述码字进行波束成形。由于码本为低主瓣增益波动的码本，因此在波束方向与实际波束方向之间有偏差时，仍然能够得到与实际波束成形增益较为接近的波束成形增益，提高了数据链路的鲁棒性，从而提高了无线通信系统的鲁棒性。
权利要求书clms
1.一种无线通信系统的波束成形方法，其特征在于，包括：获取通信数据的波束方向；基于所述波束方向，从低主瓣增益波动的码本中调取指向方向与所述波束方向对应的码字，所述低主瓣增益波动的码本基于毫米波大规模阵列的阵列参数所构建的迭代参数进行迭代求解获得的；基于所述码字进行波束成形。2.如权利要求1所述的无线通信系统的波束成形方法，其特征在于，在获取通信数据的波束方向之后，还包括：在未储存有所述低主瓣增益波动的码本时，生成所述低主瓣增益波动的码本；所述迭代参数包括平均增益变量、旋转矩阵变量、第一辅助变量和第二辅助变量；所述生成所述低主瓣增益波动的码本的步骤包括：获取毫米波大规模阵列的所述阵列参数；所述阵列参数包括码字指向角度、主瓣范围、大规模阵列的天线数和移相器的分辨率；基于所述阵列参数构建所述平均增益变量、所述旋转矩阵变量、所述第一辅助变量和所述第二辅助变量；对所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量依次迭代求解；在满足预设的迭代条件后，根据迭代结果生成码字并形成所述低主瓣增益波动的码本。3.如权利要求2所述的无线通信系统的波束成形方法，其特征在于，所述对所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量依次迭代求解的步骤包括：利用所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量构建优化条件；基于所述优化条件按轮次对所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量依次迭代求解。4.如权利要求3所述的无线通信系统的波束成形方法，其特征在于，所述利用所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量构建优化条件的步骤包括：基于上轮第一辅助变量、上轮旋转矩阵变量、上轮平均增益变量和上轮第二辅助变量得到第一优化条件；所述基于所述优化条件按轮次对所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量依次迭代求解的步骤包括：从所述第一优化条件中获得满足可行域的最小第一辅助变量，将所述最小第一辅助变量赋予给本轮第一辅助变量；在未从所述第一优化条件中获得满足所述可行域的所述第一辅助变量时，将所述上轮第一辅助变量赋予给本轮第一辅助变量；将所述第一优化条件中的所述上轮第一辅助变量替换为所述本轮第一辅助变量，得到第二优化条件；基于所述第二优化条件获得本轮旋转矩阵变量；将所述第二优化条件中的所述上轮旋转矩阵变量替换为所述本轮旋转矩阵变量，得到第三优化条件；从所述第三优化条件中获得最小平均增益变量，将所述最小平均增益变量赋予给本轮平均增益变量；基于所述上轮第二辅助变量、所述本轮平均增益变量和所述本轮旋转矩阵变量获得本轮第二辅助变量，并完成本轮迭代；在未满足所述迭代条件时进行下一轮迭代求解步骤。5.如权利要求4所述的无线通信系统的波束成形方法，其特征在于，所述基于所述第二优化条件获得本轮旋转矩阵变量的步骤包括：从所述第二优化条件中获得最小旋转矩阵变量，并将所述最小旋转矩阵变量赋予给当前初始旋转矩阵变量；根据所述当前初始旋转矩阵变量交替求取最小序列值和最小双积值；在满足预设的交替条件后，得到所述本轮旋转矩阵变量。6.如权利要求4所述的无线通信系统的波束成形方法，其特征在于，所述基于上轮第一辅助变量、上轮旋转矩阵变量、上轮平均增益变量和上轮第二辅助变量得到第一优化条件的步骤包括：根据所述上轮第二辅助变量、所述上轮平均增益变量和所述上轮旋转矩阵变量得到实部中间量；根据所述上轮第二辅助变量、所述上轮平均增益变量和所述上轮旋转矩阵变量得到虚部中间量；根据所述上轮第一辅助变量、所述实部中间量和所述虚部中间量得到所述第一优化条件。7.如权利要求4所述的无线通信系统的波束成形方法，其特征在于，所述优化条件中包含有步长；在所述从所述第三优化条件中获得最小平均增益变量，将所述最小平均增益变量赋予给本轮平均增益变量之后，还包括：根据所述本轮平均增益变量和所述本轮旋转矩阵变量得到第一步长中间量；根据上轮平均增益变量和所述上轮旋转矩阵变量得到第二步长中间量；将所述第一步长中间量与所述第二步长中间量作差后得到本轮步长；判断是否满足所述迭代条件的步骤包括：在迭代次数等于预设的迭代阈值时或所述本轮步长小于预设的步长阈值时，判定满足所述迭代条件。8.如权利要求2所述的无线通信系统的波束成形方法，其特征在于，所述基于所述阵列参数构建平均增益变量、旋转矩阵变量、第一辅助变量和第二辅助变量的步骤包括：基于所述码字指向角度获得角度控制参数；基于所述主瓣范围、所述天线数和所述角度控制参数获得主瓣宽度控制参数；根据所述天线数、所述角度控制参数和所述主瓣宽度控制参数构建ZC序列；获取样点个数；基于所述天线数、所述角度控制参数、所述主瓣宽度控制参数、所述ZC序列和所述样点个数获得所述平均增益变量；基于对角矩阵模型构建所述旋转矩阵变量；定义所述第一辅助变量；基于拉格朗日模型构建所述第二辅助变量。9.一种无线通信系统的波束成形装置，包括存储器和处理器，其特征在于，所述存储器中存储有无线通信系统的波束成形方法，所述处理器用于在执行所述无线通信系统的波束成形方法时采用权利要求1-8中任一种方法。10.一种存储介质，其特征在于，存储有能够被处理器加载并执行如权利要求1-8中任一种方法的计算机程序。
说明书desc
技术领域本发明涉及一种波束成形技术领域，尤其涉及一种无线通信系统的波束成形方法、装置及存储介质。背景技术波束成形是天线技术与数字信号处理技术的结合，用于定向信号的传输或接收。波束成形技术必须采用多天线系统，即无线通信系统中包含有多个天线，构成大规模阵列，而后方可进行波束成形。因波束成形改善了信噪比，提高了信号质量，得到了广泛使用。但由于大规模阵列的天线个数较多，在波束成形过程中，直接估计获得完整的信道状态矩阵计算量大，因此通常采用基于码本的模拟波束成形策略。具体的，先预设一些指向空间中特定方向的码字，所有码字集合组成码本。而后估计来波方向，在码本中查找指向该来波方向的码字即可，使复杂的矩阵计算转换为码本中的查找问题，降低了计算的复杂度。同时，由于每个码字的指向具有一定主瓣范围，即码字主瓣的空间覆盖范围。只要实际来波方向位于所选码字的主瓣范围内，均能够获得较高的波束成形增益，保证了无线通信系统的鲁棒性。在每个码字的主瓣范围内，波束成形增益均有所波动，如图1所示，纵坐标为波束增益，纵坐标的最大值为最大增益，最大增益减去3dB为最小主瓣增益，能够满足波束增益不小于最小主瓣增益的方向角度范围是主瓣范围。假设估计的来波方向为1方向，而实际的来波方向为2方向，由于1方向的波束成形增益与2方向的波束成形增益差值较大，因此实际得到的波束成形增益仍然较低。由此可知，码字在其主瓣范围内的波束成形增益平坦度尤为重要。为了将码字的主瓣增益，即主瓣范围内的波束成形增益维持在一恒定值，降低主瓣增益的波动，现有技术中采取预先定义主瓣增益，而后在主瓣范围内求解最小化实际增益与定义的主瓣增益之差，降低主瓣增益的波动。但由于主瓣增益是预先定义的，即固定值，而移相器的固定幅度约束又是一个非凸约束，因此需要松弛移相器的固定幅度约束，再转化为凸问题求解。固定的主瓣增益使得此种算法性能对设定的主瓣增益非常敏感，导致算法的鲁棒性下降，影响了无线通信数据链路的鲁棒性，进而降低了无线通信系统的鲁棒性。发明内容有鉴于此，本发明提供了一种无线通信系统的波束成形方法、装置及存储介质，用于解决现有技术中的无线通信系统鲁棒性差的问题。为达上述之一或部分或全部目的或是其他目的，本发明提出一种无线通信系统的波束成形方法、装置及存储介质，第一方面：一种无线通信系统的波束成形方法，包括：获取通信数据的波束方向；基于所述波束方向，从低主瓣增益波动的码本中调取指向方向与所述波束方向对应的码字，所述低主瓣增益波动的码本基于毫米波大规模阵列的阵列参数所构建的迭代参数进行迭代求解获得的；基于所述码字进行波束成形。优选地，在获取通信数据的波束方向之后，还包括：在未储存有所述低主瓣增益波动的码本时，生成所述低主瓣增益波动的码本；所述迭代参数包括平均增益变量、旋转矩阵变量、第一辅助变量和第二辅助变量；所述生成所述低主瓣增益波动的码本的步骤包括：获取毫米波大规模阵列的所述阵列参数；所述阵列参数包括码字指向角度、主瓣范围、大规模阵列的天线数和移相器的分辨率；基于所述阵列参数构建所述平均增益变量、所述旋转矩阵变量、所述第一辅助变量和所述第二辅助变量；对所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量依次迭代求解；在满足预设的迭代条件后，根据迭代结果生成码字并形成所述低主瓣增益波动的码本。优选地，所述对所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量依次迭代求解的步骤包括：利用所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量构建优化条件；基于所述优化条件按轮次对所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量依次迭代求解。优选地，所述利用所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量构建优化条件的步骤包括：基于上轮第一辅助变量、上轮旋转矩阵变量、上轮平均增益变量和上轮第二辅助变量得到第一优化条件KKT；所述基于所述优化条件按轮次对所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量依次迭代求解的步骤包括：从所述第一优化条件中获得满足可行域的最小第一辅助变量，将所述最小第一辅助变量赋予给本轮第一辅助变量；在未从所述第一优化条件中获得满足所述可行域的所述第一辅助变量时，将所述上轮第一辅助变量赋予给本轮第一辅助变量；将所述第一优化条件中的所述上轮第一辅助变量替换为所述本轮第一辅助变量，得到第二优化条件；基于所述第二优化条件获得本轮旋转矩阵变量；将所述第二优化条件中的所述上轮旋转矩阵变量替换为所述本轮旋转矩阵变量，得到第三优化条件；从所述第三优化条件中获得最小平均增益变量，将所述最小平均增益变量赋予给本轮平均增益变量；基于所述上轮第二辅助变量、所述本轮平均增益变量和所述本轮旋转矩阵变量获得本轮第二辅助变量，并完成本轮迭代；在未满足所述迭代条件时进行下一轮迭代求解步骤。优选地，所述基于所述第二优化条件获得本轮旋转矩阵变量的步骤包括：从所述第二优化条件中获得最小旋转矩阵变量，并将所述最小旋转矩阵变量赋予给当前初始旋转矩阵变量；根据所述当前初始旋转矩阵变量交替求取最小序列值和最小双积值；在满足预设的交替条件后，得到所述本轮旋转矩阵变量。优选地，所述基于上轮第一辅助变量、上轮旋转矩阵变量、上轮平均增益变量和上轮第二辅助变量得到第一优化条件的步骤包括：根据所述上轮第二辅助变量、所述上轮平均增益变量和所述上轮旋转矩阵变量得到实部中间量；根据所述上轮第二辅助变量、所述上轮平均增益变量和所述上轮旋转矩阵变量得到虚部中间量；根据所述上轮第一辅助变量、所述实部中间量和所述虚部中间量得到所述第一优化条件。优选地，所述优化条件中包含有步长；在所述从所述第三优化条件中获得最小平均增益变量，将所述最小平均增益变量赋予给本轮平均增益变量之后，还包括：根据所述本轮平均增益变量和所述本轮旋转矩阵变量得到第一步长中间量；根据上轮平均增益变量和所述上轮旋转矩阵变量得到第二步长中间量；将所述第一步长中间量与所述第二步长中间量作差后得到本轮步长；判断是否满足所述迭代条件的步骤包括：在迭代次数等于预设的迭代阈值时或所述本轮步长小于预设的步长阈值时，判定满足所述迭代条件。优选地，所述基于所述阵列参数构建平均增益变量、旋转矩阵变量、第一辅助变量和第二辅助变量的步骤包括：基于所述码字指向角度获得角度控制参数；基于所述主瓣范围、所述天线数和所述角度控制参数获得主瓣宽度控制参数；根据所述天线数、所述角度控制参数和所述主瓣宽度控制参数构建ZC序列；获取样点个数；基于所述天线数、所述角度控制参数、所述主瓣宽度控制参数、所述ZC序列和所述样点个数获得所述平均增益变量；基于对角矩阵模型构建所述旋转矩阵变量；定义所述第一辅助变量；基于拉格朗日模型构建所述第二辅助变量。优选地，所述基于所述阵列参数构建平均增益变量、旋转矩阵变量、第一辅助变量和第二辅助变量的步骤包括：基于所述码字指向角度获得角度控制参数；基于所述主瓣范围、所述天线数和所述角度控制参数获得主瓣宽度控制参数；根据所述天线数、所述角度控制参数和所述主瓣宽度控制参数构建ZC序列；获取样点个数；基于所述天线数、所述角度控制参数、所述主瓣宽度控制参数、所述ZC序列和所述样点个数获得所述平均增益变量；基于对角矩阵模型构建所述旋转矩阵变量；定义所述第一辅助变量；基于拉格朗日模型构建所述第二辅助变量。第二方面：一种无线通信系统的波束成形装置，包括存储器和处理器，所述存储器中存储有无线通信系统的波束成形方法，所述处理器用于在执行所述无线通信系统的波束成形方法时采用上述方法。第三方面：一种存储介质，存储有能够被处理器加载并执行上述方法的计算机程序。实施本发明实施例，将具有如下有益效果：通过毫米波大规模阵列的阵列参数构建出迭代参数，而后利用迭代参数迭代求解，使码本中每个码字的主瓣增益波动降低，从而使整个码本称为低主瓣增益波动的码本。在获得波束方向后，即估计的波束方向。根据波束方向选择码本中对应的码字，而后根据码字获得对应移相器的相位，通过移相器和相位产生指向方向与波束方向对应的波束，完成波束成形。由于码字的主瓣增益波动低，因此即使波束方向与实际的波束方向之间存在偏差，获得的波束成形增益与实际波束成形增益之间的差值也较小，提高了数据链路的鲁棒性，即提高了无线通信系统的鲁棒性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为现有技术中码字的波束成形增益曲线图。图2为一个实施例中无线通信系统的波束成形方法的整体流程图。图3为一个实施例中无线通信系统的波束成形方法中波束方向的示意图。图4为一个实施例中无线通信系统的波束成形方法的波束成形增益曲线图。图5为另一个实施例中无线通信系统的波束成形方法的整体流程图。图6为一个实施例中无线通信系统的波束成形方法中生成低主瓣增益波动的码本的流程图。图7为一个实施例中无线通信系统的波束成形方法中构建迭代参数的流程图。图8为一个实施例中无线通信系统的波束成形方法中迭代求解的流程图。图9为现有技术中码字的主瓣增益波动与本实施例中码字的主瓣增益波动之间的曲线对比图。图10为一个实施例中码字的主瓣增益波动在不同轮数的迭代求解后生成的曲线对比图。图11为一个实施例中无线通信系统的波束成形系统的结构框图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本申请实施例公开一种无线通信系统的波束成形方法，参照图2，在一实施例中，无线通信系统的波束成形方法包括：S100、获取通信数据的波束方向。通信数据指利用电磁波为载体进行传输的数据。在一应用场景中，通信系统为大规模阵列通信系统，电磁波为毫米波；波束方向指包含有通信数据的波束的来波方向或发射方向；为了便于理解，参照图3，在本应用场景中，通信系统共包含有256个天线，每个天线均对应有一个移相器，码本为码字的集合，每个码字对应一个移相器。波束方向在被技术人员、估测设备、估测算法或其组合估测得到后，即可获得波束方向。参照图2，S200、基于波束方向，从低主瓣增益波动的码本中调取指向方向与波束方向对应的码字。其中，低主瓣增益波动的码本基于毫米波大规模阵列的阵列参数所构建的迭代参数进行迭代求解获得的。每个码字均对应有主瓣指向和主瓣范围，例如在一应用场景中，码字的主瓣指向为15°，主瓣范围为7.5°至24.5°。步骤S200中的指向方向指主瓣范围，即判断码字的指向方向是否与波束方向对应，通过判断波束方向是否位于码字的主瓣范围内即可；若波束方向位于码字的主瓣范围内，则判定对应；否则，判定为非对应。因此，码本中的每个码字，主瓣指向和主瓣范围均为固定。在得知波束方向后，即可选择出对应指向方向的码字。即使波束方向与实际波束方向之间有偏差，但由于主瓣范围是范围值，只要实际波束方向位于所选码字的主瓣范围内，仍然能够得到较高的波束成形增益，提高了波束成形的灵活性。此外，由于码本基于迭代求解，降低了主瓣增益波动的幅度。因此，在波束方向与实际波束方向之间存在偏差时，受低主瓣增益波动影响，减小了估测的波束成形增益与实际波束成形增益之间的差值，提高了毫米波大规模阵列系统的鲁棒性。具体的，对比图1和图4中的主瓣增益曲线，在实际波束方向为1方向，估测的波束方向为2方向时，由于图4中的波束成形增益波动小，估测的波束方向的波束成形增益与实际波束方向的波束成形增益之间的差值更小，因此能够得到更稳定的波束成形增益。参照图2，S300、基于码字进行波束成形。由于已经选出对应的码字，根据码字改变对应移相器的相位，即可得到与波束方向对应的波束，即完成波束成形。在另一实施例中，参照图5，在S100之后，执行步骤T200。T200、判断是否储存有低主瓣增益波动的码本。即判断储存空间中或者指定的储存路径下，是否储存有低主瓣增益波动的码本。若是，则执行步骤S200；若否，则执行步骤T300。在步骤T300后，依次执行步骤S200和S300。T300、生成低主瓣增益波动的码本。主动生成低主瓣增益波动的码本，便于在波束成形时，得到的波束成形增益与实际波束成形增益之间的差值更小，从而有助于提高无线通信系统的鲁棒性。具体的，参照图6，在一实施例中，步骤T300包括：T310、获取毫米波大规模阵列的阵列参数。在一实施例中，阵列参数包括码字指向角度、主瓣范围、大规模阵列的天线数和移相器的分辨率。其中，码字指向角度和主瓣范围均为预设值，在一应用场景中，通常在0-90°范围内考虑码字的空间指向，即码字指向角度；并将此范围划分为整数个码字的覆盖范围，即码字的主瓣范围。为了便于理解，例如，在一个码本中，设定码字指向角度分别为15°、30°、45°、60°和75°，主瓣范围为15°。由于无线通信系统已经构建完成，因此大规模阵列的天线数和移相器的分辨率均为已知值。为了便于理解，在一应用场景中，天线数为256个；移相器的分辨率为2的5次幂。T320、基于阵列参数构建平均增益变量、旋转矩阵变量、第一辅助变量和第二辅助变量。即在一实施例中，迭代参数包括平均增益变量、旋转矩阵变量、第一辅助变量和第二辅助变量。为了便于理解和描述，在本实施例中，平均增益变量用c表示；旋转矩阵变量用A表示；第一辅助变量用v表示；第二辅助变量用λ表示。其中，旋转矩阵变量A和第二辅助变量λ均为向量。具体的，参照图7，在一实施例中，步骤T320包括：T321、基于码字指向角度获得角度控制参数。其中，角度控制参数用b表示。在一应用场景中，通过ψb＝sin-1b求得角度控制参数b；其中，ψb为码字指向角度。在ψb∈{15°、30°、45°、60°、75°}时，角度控制参数b∈{0.259,0.5,0.707,0.866,0.966}。T322、基于主瓣范围、天线数、角度控制参数获得主瓣宽度控制参数。其中，主瓣宽度控制参数用u表示。在一应用场景中，通过求得主瓣宽度控制参数u；其中，为主瓣范围；b为角度控制参数；u为主瓣宽度控制参数；Nt为天线数。将角度控制参数b＝0.259、主瓣范围天线数Nt＝256即可求得主瓣宽度控制参数u＝0.131。T323、根据天线数、角度控制参数和主瓣宽度控制参数构建ZC序列。其中，ZC序列指Zadoff-Chu序列。ZC序列用p表示；将天线数Nt、角度控制参数b和主瓣宽度控制参数u带入p中后，得到公式其中，n代表第n个的意思，n的最大值与天线数Nt相等。在一应用场景中，由于天线数Nt＝256，因此n的最大值为256，范围为1-256；j为虚数单位；在天线数Nt＝256时，能够获得256个p，得到一组ZC序列；其中，p为向量。T324、获取样点个数。样点个数用R表示。在一实施例中，样点个数通过公式计算获得；其中，RPS为移相器的分辨率。以RPS＝25为例，求出样点个数＝490。需要说明的是，样点个数R也可以取500，具体根据能承载的计算量决定，即R取值越大，计算精度越高，但计算量越大。因此，在能接受的计算量范围内，均可在计算结果的基础上，进行取整、约算。在另一实施例中，样点个数R为预设值，例如300、500、700。需要获取样点个数时，到预设的储存路径下调取即可。T325、基于天线数、角度控制参数、主瓣宽度控制参数、ZC序列和样点个数获得平均增益变量。在一实施例中，平均增益变量c根据公式计算获得。其中，g为有关p的增益函数；ψr为离散化角度。具体的，有关p的增益函数离散化角度a为引导向量，有H为矩阵共轭转置；T为矩阵转置。T326、基于对角矩阵模型构建旋转矩阵变量。其中，对角阵阵模型即diag函数，旋转矩阵变量需要说明的是，在一应用场景中，φ1至的初始值均为0，因此旋转矩阵变量A的初始值也为0。T327、定义第一辅助变量。第一辅助变量v代表当前的平均增益，即实际的平均增益。通过迭代计算第一辅助变量，降低了码字的主瓣增益波动。T328、基于拉格朗日模型构建第二辅助变量。拉格朗日模型即拉格朗日公式，具体的，第二辅助变量λ＝T。通过构建平均增益变量c、第一辅助变量v和第二辅助变量λ，使在进行迭代求解时，能够不断地更新平均增益变量c、第一辅助变量v和第二辅助变量λ，而不再根据固定的平均增益变量c求解优化主瓣范围内的主瓣增益波动，便于降低主瓣增益波动，从而提高数据链路的鲁棒性。需要说明的是，步骤T321-T323需按顺序执行，T324可以在任意节点执行，在执行结束T323和T324后，执行T325。T326、T327和T328彼此之间没有执行顺序要求，且每个步骤与其他步骤之间也没有执行顺序要求。参照图6，T330、对第一辅助变量、旋转矩阵变量、平均增益变量和第二辅助变量依次迭代求解。通过迭代求解，获得最优的结果，而非使用固定的值优化主瓣增益波动，有助于提高无线通信系统的鲁棒性。具体的，在一实施例中，步骤T330包括：T331、利用第一辅助变量、旋转矩阵变量、平均增益变量和第二辅助变量构建优化条件。在一应用场景中，优化条件为KKT条件。具体的，KKT条件其中，Re表示实部；Im表示虚部；ρ为步长；gA,ψr为有关A的增益函数，计算方式与有关p的增益函数g相同。通过迭代交替优化c,A,ν,λ四个变量，得到低主瓣增益波动的码字。具体的，构建优化条件的方式为：基于上轮第一辅助变量、上轮旋转矩阵变量、上轮平均增益变量和上轮第二辅助变量得到第一优化条件。即，根据上轮第二辅助变量、上轮平均增益变量和上轮旋转矩阵变量得到实部中间量。其中，实部中间量指根据上轮第二辅助变量、上轮平均增益变量和上轮旋转矩阵变量得到虚部中间量。其中，虚部中间量指根据上轮第一辅助变量、实部中间量和虚部中间量得到第一优化条件。需要说明的是，优化条件L也会随着平均增益变量c、旋转矩阵变量A、第一辅助变量v和第二辅助变量λ的更新而更新。在完成一轮迭代求解后，将得到的迭代求解结果带入到优化条件L中，以得到用于应用在下一轮迭代求解中的第一优化条件。即，第一优化条件指在完成一轮迭代求解后，将迭代求解结果带入到优化条件L中后，得到的优化条件。例如，在完成第一轮迭代求解后，将第一轮得到的平均增益变量c、旋转矩阵变量A、第一辅助变量v和第二辅助变量λ带入优化条件L公式中，得到用于在第二轮迭代求解时使用的第一优化条件；若第一轮迭代求解未开始，则将平均增益变量c的初始值，即步骤T325中求得的值带入带优化条件L公式中；将旋转矩阵变量A的初始值、第一辅助变量v的初始值和第二辅助变量λ的初始值带入到优化条件L公式中，求得首个第一优化条件。其中，旋转矩阵变量A的初始值、第一辅助变量v的初始值和第二辅助变量λ的初始值均为0。即进行了多少轮迭代求解，则会生成多少个第一优化条件。T332、基于优化条件按轮次对第一辅助变量、旋转矩阵变量、平均增益变量和第二辅助变量依次迭代求解。具体的，参照图8，步骤T332包括：T3321、从第一优化条件中获得满足可行域的最小第一辅助变量，将最小第一辅助变量赋予给本轮第一辅助变量。在一应用场景中，本轮第一辅助变量ν的更新公式为：其中，为可行域。即从第一优化条件中得到最小第一辅助变量，使得最小第一辅助变量满足可行域。需要说明的是，t代表迭代求解的轮数，t的初始值为0。即在t＝0时，代表第一轮迭代求解，在t＝2时，代表第二轮迭代求解，以此类推。在t＝0时，c即代表使用的是c的初始值，其他变量的情况均相同，不再赘述。T3322、在未从第一优化条件中获得满足可行域的第一辅助变量时，将上轮第一辅助变量赋予给本轮第一辅助变量。在一应用场景中，将步骤T3321和T3322整合后，即得到如下关系：其中，为在满足可行域时，计算得到的结果；若不满足可行域，则有ν＝v。为了便于理解，例如，在第一轮迭代求解时，如果第一优化条件中求得的最小第一辅助变量均不满足可行域，则令本轮第一辅助变量等于第一辅助变量的初始值。T3323、将第一优化条件中的上轮第一辅助变量替换为本轮第一辅助变量，得到第二优化条件。由于已经对第一辅助变量v进行了更新，即得到了本轮第一辅助变量的值，将本轮第一辅助变量、上轮旋转矩阵变量、上轮平均增益变量和上轮第二辅助变量带入到优化条件L公式中，得到第二优化条件。即其他三个变量没变，使本轮第一辅助变量替换掉了上轮第一辅助变量。其中，优化条件L公式指使用四个变量的初始值计算获得的优化条件，与第一优化条件可能相同，可能不同。且相同时，仅是在第一轮迭代开始时相同，与第二轮迭代求解以及之后轮次的迭代求解得到的第一优化条件均可能不同。具体的，第二优化条件为L,A,v,λ)；即其中，式中c,A,v,λ的值分别为对应的c,A,v,λ的值。T3324、基于第二优化条件获得本轮旋转矩阵变量。在一应用场景中，步骤T3324包括：从第二优化条件中获得最小旋转矩阵变量，并将最小旋转矩阵变量赋予给当前初始旋转矩阵变量。即从第二优化条件中找出最小的旋转矩阵变量A，并将该值赋予给当前初始旋转矩阵变量。具体的，通过A＝argminAL,A,v,λ)得到最小旋转矩阵变量，即得到当前初始旋转矩阵变量。根据当前初始旋转矩阵变量交替求取最小序列值和最小双积值。在一应用场景中，最小序列值根据式X：求得，最小双积值根据式Y：求得。其中，B＝；pA＝pA；*表示共轭；⊙表示哈达玛积；表示克罗内克积；Z的初始值均为零。所谓交替求取指将当前初始旋转矩阵变量带入到式X中，得到A的第一个值；将A的第一个值带入到式Y中，得到A的第二个值；再将A的第二个值带入到式X中得到A的第三个值；以此规则在式X和式Y之间不断更新A的值。由于式X和式Y均属于凸问题，因此可以直接求解。在满足预设的交替条件后，得到本轮旋转矩阵变量。在一应用场景中，交替条件为交替次数不大于5次。即在式X和式Y均计算过五次之后，判定满足交替条件，得到本轮旋转矩阵变量A。一方面，旋转矩阵变量A在每轮迭代求解过程中，会进行交替求解，提高了旋转矩阵变量A在每轮迭代求解过程中计算的精度，便于降低主瓣增益波动；另一方面，在交替求解过程中，使用的式X和式Y均为凸问题，可以直接求解，因此无需通过放松约束对旋转矩阵变量进行优化计算，提高了码字主瓣成形增益的稳定性。参照图8，T3325、将第二优化条件中的上轮旋转矩阵变量替换为本轮旋转矩阵变量，得到第三优化条件。具体的，第三优化条件为L,A,v,λ)；即T3326、从第三优化条件中获得最小平均增益变量，将最小平均增益变量赋予给本轮平均增益变量。即从第三优化条件中找出最小的平均增益变量c，并将该值赋予给本轮平均增益变量。具体的，通过c＝argmincL,A,ν,λ)得到最小平均增益变量，即得到本轮平均增益变量。T3327、基于上轮第二辅助变量、本轮平均增益变量和本轮旋转矩阵变量获得本轮第二辅助变量，并完成本轮迭代。具体的，通过实部公式得到本轮第二辅助变量的实部部分；通过虚部公式得到本轮第二辅助变量的虚部部分；而后整合得到本轮第二辅助变量。T3328、在为满足迭代条件时进行下一轮迭代求解步骤。即未满足迭代条件时，再次重复步骤T3321-T3327。需要注意的是，在重复步骤T3321-T3327之前，需将t的值加一。通过迭代求解，不断对平均增益变量c和第一辅助变量v求解，使实际的平均增益与计算的大的平均增益更为贴近，从而便于得到更为平稳的主瓣增益波动，提高无线通信系统的鲁棒性。在另一实施例中，在步骤T3326之后，结束本轮迭代之前，还包括：K3001、根据本轮平均增益变量和本轮旋转矩阵变量得到第一步长中间量。具体的，在一应用场景中，第一步长中间量＝c-g,ψr)。K3001、根据上轮平均增益变量和上轮旋转矩阵变量得到第二步长中间量。具体的，在一应用场景中，第二步长中间量＝c-g,ψr)。K3003、将第一步长中间量与第二步长中间量作差后得到本轮步长。即在每轮迭代求解过程中，同时对步长进行更新求解。优化条件中包含有步长这一特征，更新步长，便于提高优化条件更次更新的质量，从而得到主瓣增益波动更低的码字，提高无线系统的鲁棒性。参照图6，T340、在满足预设的迭代条件后，根据迭代结果生成码字并形成低主瓣增益波动的码本。每完成一轮迭代求解后，均判断是否满足迭代条件，若满足，则生成码字并形成低主瓣增益波动的码本；否则继续下一轮的迭代求解。在一实施例中，迭代条件包括迭代次数是否等于预设的迭代阈值以及本轮步长是否小于预设的步长阈值。若迭代次数等于迭代阈值，或者本轮步长小于步长阈值，则判定为满足迭代条件；否则，判定为不满足。其中，迭代次数即迭代轮数，在每完成一轮迭代时，迭代次数加一。迭代阈值根据计算量的承载能力制定，在本实施例中，迭代阈值设定为5，即对多进行五轮迭代求解。在其他实施例中，迭代阈值可以是10、20或100。步长阈值设定为即在步长时，判定本轮步长小于步长阈值。例如在天线数Nt＝256时，步长阈值为在结束迭代求解后，调取最后一轮中得出的旋转矩阵变量A的结果，由f＝pA得到码字；其中，f为码字，b为角度控制参数，p为ZC序列，A为最后一轮得出的旋转矩阵变量，T为迭代求解的轮数。需要说明的是，在一实施例中，通过将得到的码字转学d后，即可得到指向b+d方向的码字f。例如，在令b＝0时，获得指向0°的码字，取d∈{0.5,0.707,0.866,0.966}，则可以获得指向{30°、45°、60°、75°}的码字。此外，利用迭代次数未达到迭代阈值的码字，能够在部分天线因故障不能工作时，抵消产生的波束展宽，使波束成形更贴近期望值。具体的，例如在天线数量为256的大规模阵列中，若一般的天线因损坏而关闭，此时主瓣范围从设计值15°展宽为30°。如果使用T＝3的码字，则可使主瓣范围收窄为约22°，抵消部分波束展宽，使主瓣范围更贴近设计值。本实施例中的无线通信系统的波束成形方法的实施原理为：在储存有低主瓣增益波动的码本时，直接根据波束方向，从低主瓣增益波动的码本中调取对应的码字，再根据调取的码字更改无线通信系统中对应移相器的相位，从而形成波束，完成模拟波束成形。其中，低主瓣增益波动是基于毫米波大规模阵列的阵列参数所构建的迭代参数进行迭代求解获得的，通过迭代求解，不断对迭代参数进行更新，从而在每轮迭代结束时，均能够获得更贴近实际的迭代参数的参数值，从而降低主瓣增益波动，提高了数据链路的鲁棒性，进而提高了无线通信系统的鲁棒性。为了便于理解，参照图9，未采用迭代求解方式得到的波束增益的稳定性差于采用了迭代求解方式得到的波束增益；参照图10，进行了多次迭代求解的波束增益的稳定性优于次数相对较少迭代求解的波束增益。参照图11，本申请实施例还公开一种无线通信系统的波束成形系统，包括获取模块1，用于获取通信数据的波束方向；码字模块2，用于基于所述波束方向，从低主瓣增益波动的码本中调取指向方向与所述波束方向对应的码字，所述低主瓣增益波动的码本基于毫米波大规模阵列的阵列参数所构建的迭代参数进行迭代求解获得的；波束成形模块3，用于基于所述码字进行波束成形。此外，在未储存有低主瓣增益波动的码本时，所述系统还包括码本模块，用于生成低主瓣增益波动的码本。具体的，码本模块包括参数单元，用于获取毫米波大规模阵列的所述阵列参数；所述阵列参数包括码字指向角度、主瓣范围、大规模阵列的天线数和移相器的分辨率；构建单元，用于基于所述阵列参数构建所述平均增益变量、所述旋转矩阵变量、所述第一辅助变量和所述第二辅助变量；迭代单元，用于对所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量依次迭代求解；以及，输出单元，用于在满足预设的迭代条件后，根据迭代结果生成码字并形成所述低主瓣增益波动的码本。在一实施例中，构建单元包括获取子单元，用于基于所述码字指向角度获得角度控制参数；还用于基于所述主瓣范围、所述天线数和所述角度控制参数获得主瓣宽度控制参数；还用于获取样点个数。构建子单元，用于根据所述天线数、所述角度控制参数和所述主瓣宽度控制参数构建ZC序列；还用于基于所述天线数、所述角度控制参数、所述主瓣宽度控制参数、所述ZC序列和所述样点个数获得所述平均增益变量；还用于基于对角矩阵模型构建所述旋转矩阵变量、定义所述第一辅助变量以及基于拉格朗日模型构建所述第二辅助变量。在一实施例中，迭代单元包括优化条件子单元，用于利用所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量构建优化条件；以及，迭代子单元，用于基于所述优化条件按轮次对所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量依次迭代求解。其中，优化条件子单元在利用所述第一辅助变量、所述旋转矩阵变量、所述平均增益变量和所述第二辅助变量构建优化条件时，采用基于上轮第一辅助变量、上轮旋转矩阵变量、上轮平均增益变量和上轮第二辅助变量得到第一优化条件的方式实现。具体的，优化条件子单元包括实部中间量子单元，用于根据所述上轮第二辅助变量、所述上轮平均增益变量和所述上轮旋转矩阵变量得到实部中间量；虚部中间量子单元，用于根据所述上轮第二辅助变量、所述上轮平均增益变量和所述上轮旋转矩阵变量得到虚部中间量；以及，整合子单元，用于根据所述上轮第一辅助变量、所述实部中间量和所述虚部中间量得到所述第一优化条件。在一实施例中，迭代子单元包括第一子单元，用于从所述第一优化条件中获得满足可行域的最小第一辅助变量，将所述最小第一辅助变量赋予给本轮第一辅助变量；第二子单元，用于在未从所述第一优化条件中获得满足所述可行域的所述第一辅助变量时，将所述上轮第一辅助变量赋予给本轮第一辅助变量；第三子单元，用于将所述第一优化条件中的所述上轮第一辅助变量替换为所述本轮第一辅助变量，得到第二优化条件；第四子单元，用于基于所述第二优化条件获得本轮旋转矩阵变量；第五子单元，用于将所述第二优化条件中的所述上轮旋转矩阵变量替换为所述本轮旋转矩阵变量，得到第三优化条件；第六子单元，用于从所述第三优化条件中获得最小平均增益变量，将所述最小平均增益变量赋予给本轮平均增益变量；第七子单元，用于基于所述上轮第二辅助变量、所述本轮平均增益变量和所述本轮旋转矩阵变量获得本轮第二辅助变量，并完成本轮迭代；以及，第八子单元，用于在在未满足所述迭代条件时启动下一轮迭代求解步骤。其中，第四子单元包括初始值子单元，用于从所述第二优化条件中获得最小旋转矩阵变量，并将所述最小旋转矩阵变量赋予给当前初始旋转矩阵变量；交替子单元，用于根据所述当前初始旋转矩阵变量交替求取最小序列值和最小双积值；以及，终止子单元，用于在满足预设的交替条件后，得到所述本轮旋转矩阵变量。其中，迭代子单元还包括第九子单元，用于在第六子单元运作之后，根据所述本轮平均增益变量和所述本轮旋转矩阵变量得到第一步长中间量，再根据上轮平均增益变量和所述上轮旋转矩阵变量得到第二步长中间量，最后将所述第一步长中间量与所述第二步长中间量作差后得到本轮步长。在一实施例中，输出单元包括判断子单元，迭代次数是否等于预设的迭代阈值时或所述本轮步长是否小于预设的步长阈值；若是，则判定满足迭代条件。这里需要指出的是：以上应用于无线通信系统的波束成形系统实施例项的描述，与上述方法描述是类似的，具有同方法实施例相同的有益效果。对于本发明无线通信系统的波束成形系统实施例中未披露的技术细节，本领域的技术人员请参照本发明方法实施例的描述而理解。需要说明的是，本发明实施例中，如果以软件功能模块的形式实现上述方法，并作为独立的产品销售或使用时，也可以存储在一个计算机可读存储介质中。基于这样的理解，本发明实施例的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分。而前述的存储介质包括：U盘、移动硬盘、只读存储器、磁碟或者光盘等各种可以存储程序代码的介质。这样，本发明实施例不限制于任何特定的硬件和软件结合。相应地，本申请实施例还公开一种存储介质，存储有能够被处理器加载并执行上述方法的计算机程序。本申请实施例还公开一种无线通信系统的波束成形装置，包括存储器和处理器，存储器中存储有无线通信系统的波束成形方法；处理器用于在执行无线通信系统的波束成形方法时采用上述方法。以上应用于无线通信系统的波束成形装置和存储介质实施例的描述，与上述方法实施例的描述是类似的，具有同方法实施例相似的有益效果。对于本发明无线通信系统的波束成形装置和存储介质实施例中未披露的技术细节，请参照本发明方法实施例的描述而理解。应理解，说明书通篇中提到的“一个实施例”或“一实施例”意味着与实施例有关的特定特征、结构或特性包括在本发明的至少一个实施例中。因此，在整个说明书各处出现的“在一个实施例中”或“在一实施例中”未必一定指相同的实施例。此外，这些特定的特征、结构或特性可以任意适合的方式结合在一个或多个实施例中。应理解，在本发明的各种实施例中，上述各过程的序号的大小并不意味着执行顺序的先后，各过程的执行顺序应以其功能和内在逻辑确定，而不应对本发明实施例的实施过程构成任何限定。上述本发明实施例序号仅仅为了描述，不代表实施例的优劣。在本发明所提供的几个实施例中，应该理解到，所揭露的设备和方法，可以通过其它的方式实现。以上所描述的设备实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，如：多个单元或组件可以结合，或可以集成到另一个系统，或一些特征可以忽略，或不执行。另外，所显示或讨论的各组成部分相互之间的耦合、或直接耦合、或通信连接可以是通过一些接口，设备或单元的间接耦合或通信连接，可以是电性的、机械的或其它形式的。上述作为分离部件说明的单元可以是、或也可以不是物理上分开的，作为单元显示的部件可以是、或也可以不是物理单元；既可以位于一个地方，也可以分布到多个网络单元上；可以根据实际的需要选择其中的部分或全部单元来实现本实施例方案的目的。另外，在本发明各实施例中的各功能单元可以全部集成在一个处理单元中，也可以是各单元分别单独作为一个单元，也可以两个或两个以上单元集成在一个单元中；上述集成的单元既可以采用硬件的形式实现，也可以采用硬件加软件功能单元的形式实现。本领域普通技术人员可以理解：实现上述方法实施例的全部或部分步骤可以通过程序指令相关的硬件来完成，前述的程序可以存储于计算机可读存储介质中，该程序在执行时，执行包括上述方法实施例的步骤；而前述的存储介质包括：移动存储设备、ROM、磁碟或者光盘等各种可以存储程序代码的介质。或者，本发明上述集成的单元如果以软件功能模块的形式实现并作为独立的产品销售或使用时，也可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明实施例的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台设备执行本发明各个实施例所述方法的全部或部分。而前述的存储介质包括：移动存储设备、ROM、磁碟或者光盘等各种可以存储程序代码的介质。以上所揭露的仅为本发明较佳实施例而已，当然不能以此来限定本发明之权利范围，因此依本发明权利要求所作的等同变化，仍属本发明所涵盖的范围。
