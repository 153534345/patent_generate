标题title
基于节点权重构建二叉树的方法及二叉树的更新方法
摘要abst
基于节点权重构建二叉树的方法及二叉树的更新方法，属于无线多跳网络领域。解决了现有无线多跳网络路由方法中采用随机的方式构造的二叉树，存在双亲节点的缓存资源以及电量资源容易被耗尽，且存在消息的递交率低，影响网络整体性能的缺陷。本发明先根据各节点当前的状态，计算网络中所有节点的权重值；再根据网络中各节点的权重值的排位确定节点在二叉树中的身份类型；将各双亲节点与其所对应的左孩子节点间、以及各双亲节点与其所对应的右孩子节点间进行连接，形成初始二叉树；再设置初始二叉树中各边的边权重值；最后给初始二叉树中各节点分配初始位图，更新双亲节点的位图信息，从而完成对二叉树的构建。本发明主要应用在无线多跳网络领域。
权利要求书clms
1.基于节点权重构建二叉树的方法，其特征在于，该方法包括如下步骤：S1、根据各节点当前的状态，计算网络中所有节点的权重值；其中，节点当前的状态包括节点转发消息的次数、节点剩余缓存和节点剩余电量；所述的网络为无线多跳网络；S2、根据网络中各节点的权重值的排位确定节点在二叉树中的身份类型；其中，节点身份类型包括双亲节点和孩子节点，且孩子节点包括左孩子节点和右孩子节点；S3、将各双亲节点与其所对应的左孩子节点间、以及各双亲节点与其所对应的右孩子节点间进行连接，形成初始二叉树；S4、设置初始二叉树中各边的边权重值；S5、给初始二叉树中的每一个节点分配一个初始位图，并利用每个孩子节点的初始位图中的信息、以及该孩子节点与其所对应的双亲节点间的边的边权重值，对其所对应的双亲节点的位图进行更新，从而完成对二叉树的构建。2.根据权利要求1所述的基于节点权重构建二叉树的方法，其特征在于，步骤S1、根据各节点当前的状态，计算网络中所有节点的权重值的实现方式为：对于网络中的任意节点node，计算节点node的权重值S采用公式一实现，具体为，S＝α×Deltimes+β×Buffsize+γ×Battpower；其中，Deltimes为节点i转发消息的次数；i为节点的编号；Buffsize为节点i剩余缓存大小；Battpower为节点i剩余电量的大小；α、β、γ均为调节系数，且α+β+γ＝1。3.根据权利要求1所述的基于节点权重构建二叉树的方法，其特征在于，步骤S2、根据网络中各节点的权重值的排位确定各节点在二叉树中的身份类型的实现方式为：S21、对网络中所有节点的权重值按照从小到大的顺序进行排序；S22、按照节点序号从大到小的顺序，依次令各节点作为双亲节点，且每个双亲节点对其左孩子节点和右孩子节点的选择方式相同，从而完成对所有节点身份类型的确定；其中，每个双亲节点对其左孩子节点和右孩子节点的选择方式具体为：当节点node作为双亲节点时，选择节点node和节点node分别作为双亲节点node的左孩子节点和右孩子节点；n为节点的编号。4.根据权利要求1所述的基于节点权重构建二叉树的方法，其特征在于，步骤S1中、节点转发消息的次数为节点本身属性。5.根据权利要求1所述的基于节点权重构建二叉树的方法，其特征在于，步骤S4中、设置初始二叉树中各边的边权重值的实现方式为：将初始二叉树中各双亲节点与其所对应的左孩子节点间的边的边权重值设置为0，还将二叉树中各双亲节点与其所对应的右孩子节点间的边的边权重值设置为1。6.根据权利要求1所述的基于节点权重构建二叉树的方法，其特征在于，每个节点的位图中包括多个位置，且该多个位置由左至右依次排序，每个位置与该位置序号相同的节点相关联；每个节点中位置的个数与网络中节点的个数相同；每个位置包括两个存储单元，其中，左边存储单元称为计数器，用于存储当前左边存储单元所在的节点到达与当前左边存储单元所在的位置序号相同的节点的步数；右边的存储单元称为足迹存储器，用于存储当前右边存储单元所在的节点到达与当前右边存储单元所在的位置序号相同的节点间边的边权重值。7.根据权利要求6所述的基于节点权重构建二叉树的方法，其特征在于，每个节点所对应的初始位图中的信息为：与当前节点序号相同的位置的计数器中存储数字0；与当前节点序号相同的位置的足迹存储器中存储数字1；当前节点中剩余位置的计数器和足迹存储器均存储数字0。8.二叉树的更新方法，该二叉树是采用权利要求1所述的基于节点权重构建二叉树的方法获得的，其特征在于，该更新方法的具体过程为：当网络中所构建完成的二叉树的生命时长为T时，检测网络中所有节点的当前状态，利用基于节点权重构建二叉树的方法，对网络中的所有节点进行构造，获得新的二叉树，从而完成对二叉树的更新。
说明书desc
技术领域本发明属于无线多跳网络领域，具体涉及一种基于节点权重构建二叉树的方法和无线多跳网中二叉树的更新方法。背景技术随着无线通信技术的快速发展以及智能终端设备的迅速普及，人们对无线网络的要求也不断提高。无线多跳网络以其分布式运行、立体化组网以及扩展性强等特点成为连接人与物、人与人和物与物之间的桥梁，已被广泛应用于日常生活的各个领域。从无线多跳网络诞生以来，路由协议作为组网的关键技术之一，一直受到国内外研究人员的高度关注。在无线多跳网络中，节点在传递消息过程中通常不依赖预先部署的基础设施，而是让节点充当路由器，将消息传输到目的节点。然而，由于无线多跳网络自身独有的一些特点，例如：节点的移动性、网络拓扑动态变化、节点资源有限以及带宽有限等为路由方法的设计带来了极大的挑战。因此，面向无线多跳网络设计高效的路由方法，以此提高网络性能是无线多跳网络研究过程中亟需解决的关键问题之一。目前国内外研究人员已经针对无线多跳网络提出了大量的路由方法，其中Derakhshanfard等人提出一种Opportunistic routing in wireless networks usingbitmap-based weighted tree方法，该方法利用网络中的节点随机构造一棵二叉树，将边权重值0和1分别分配给二叉树的双亲节点与左孩子节点连接的边和双亲节点与右孩子节点连接的边。给二叉树中的每一个节点分配初始位图，并通过从孩子节点收集相应的位图信息以及与孩子节点关联的边的边权重值更新每个双亲节点的位图信息。当有消息发送到二叉树中的某个节点时，将该消息以位图的形式存储在二叉树节点中，并将消息的位图与其所在节点的位图的对应位相乘。如果对应位相乘结果均为0，则目的节点不在当前节点子目录中。此时，消息发送到更高的并且能够到达目的节点的双亲节点。如果对应位相乘结果不均为0，则目的节点在当前节点子目录中，根据位图对应位相乘得到的结果，选择下一个中继节点。该方法能够有效的保障网络的递交率以及时延，但是该方法在构造二叉树时，采用随机的方式构造二叉树容易使得缓存资源或者电量资源较少的节点充当双亲节点。在消息被转发的过程中，双亲节点转发消息的次数要多于孩子节点，使得双亲节点的缓存资源以及电量资源很容易被耗尽，从而影响网络的整体性能。除此之外，在构造二叉树的过程中，没有将节点转发消息的次数作为构造二叉树的依据，容易使得转发消息能力不高的节点作为根节点或双亲节点，从而降低了消息的递交率并增加时延。因此，针对以上缺陷亟需解决。发明内容本发明目的是为了解决现有无线多跳网络路由方法中采用随机的方式构造的二叉树，存在双亲节点的缓存资源以及电量资源容易被耗尽，且存在消息的递交率低，影响网络整体性能的缺陷；因此，本发明提供了一种基于节点权重构建二叉树的方法及二叉树的更新方法。基于节点权重构建二叉树的方法，该方法包括如下步骤：S1、根据各节点当前的状态，计算网络中所有节点的权重值；其中，节点当前的状态包括节点转发消息的次数、节点剩余缓存和节点剩余电量；所述的网络为无线多跳网络；S2、根据网络中各节点的权重值的排位确定各节点在二叉树中的身份类型；其中，节点身份类型包括双亲节点和孩子节点，且孩子节点包括左孩子节点和右孩子节点；S3、将各双亲节点与其所对应的左孩子节点间、以及各双亲节点与其所对应的右孩子节点间进行连接，形成初始二叉树；S4、设置初始二叉树中各边的边权重值；S5、给初始二叉树中的每一个节点分配一个初始位图，并利用每个孩子节点的初始位图中的信息、以及该孩子节点与其所对应的双亲节点间的边的边权重值，对其所对应的双亲节点的位图进行更新，从而完成对二叉树的构建。本发明带来的有益效果是：在无线多跳网络中可周期性的构造二叉树，使得能够根据网络的资源状况以及节点的属性构造有助于提高网络性能的二叉树，避免资源消耗过多的节点或者转发能力不高的节点一直执行转发消息任务，从而影响网络的整体性能。在构造二叉树的过程中，综合考虑了节点的缓存及电量等属性，使得缓存资源或者电量资源较多的节点充当双亲节点，从而避免了经过多次消息转发后，双亲节点的缓存资源以及电量资源被耗尽，从而影响整体的网络性能。在构造二叉树的过程中，将转发消息次数作为构造二叉树的依据，使得转发次数较高的节点作为双亲节点，能够有效的提高消息的递交率并降低时延。附图说明图1是具体实施方式一所述基于节点权重构建二叉树的方法的流程图；图2是节点个数为8时，无线多跳网络路由中各节点的示意图；图3是节点数为8时，所形成的初始二叉树的结构示意图；图4是节点数为8时，二叉树的各边的边权重分配图；图5是节点数为8时，分配初始位图后的初始二叉树结构示意图；图6是节点数为8时，对双亲节点位图信息进行更新后的二叉树结构示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动的前提下所获得的所有其他实施例，都属于本发明保护的范围。需要说明的是，在不冲突的情况下，本发明中的实施例及实施例中的特征可以相互组合。具体实施方式一：下面结合图1、图4和图5说明本实施方式，本实施方式所述的基于节点权重构建二叉树的方法，该方法包括如下步骤：S1、根据各节点当前的状态，计算网络中所有节点的权重值；其中，节点当前的状态包括节点转发消息的次数、节点剩余缓存和节点剩余电量；所述的网络为无线多跳网络；S2、根据网络中各节点的权重值的排位确定各节点在二叉树中的身份类型；其中，节点身份类型包括双亲节点和孩子节点，且孩子节点包括左孩子节点和右孩子节点；S3、将各双亲节点与其所对应的左孩子节点间、以及各双亲节点与其所对应的右孩子节点间进行连接，形成初始二叉树；S4、设置初始二叉树中各边的边权重值；具体参见图4；S5、给初始二叉树中的每一个节点分配一个初始位图，并利用每个孩子节点的初始位图中的信息、以及该孩子节点与其所对应的双亲节点间的边的边权重值，对其所对应的双亲节点的位图进行更新，从而完成对二叉树的构建，参见图5。本实施方式中的对给初始二叉树中的每一个节点分配一个初始位图、及对双亲节点的位图进行更新的过程是采用现有技术中的节点位图分配方法实现的。在构造二叉树的过程中，根据节点转发消息次数、节点的剩余缓存以及节点的剩余电量作为依据，根据上述依据对网络中的节点权重进行计算，根据权重值的排位确定节点在二叉树中的身份类型，从而构建精确的二叉树，上述在构造二叉树的过程中，综合考虑了节点的缓存及电量等属性，使得缓存资源或者电量资源较多的节点充当双亲节点，从而避免了经过多次消息转发后，双亲节点的缓存资源以及电量资源被耗尽，从而影响整体的网络性能的缺陷，提高了网络整体性能，进而提高消息的递交率并降低时延。进一步的，步骤S1、根据各节点当前的状态，计算网络中所有节点的权重值的实现方式为：对于网络中的任意节点node，计算节点node的权重值S采用公式一实现，具体为，S＝α×Deltimes+β×Buffsize+γ×Battpower；其中，Deltimes为节点i转发消息的次数；i为节点的编号；Buffsize为节点i剩余缓存大小；Battpower为节点i剩余电量的大小；α、β、γ均为调节系数，且α+β+γ＝1。更进一步的，具体参见图2和图3，步骤S2、根据网络中各节点的权重值的排位确定各节点在二叉树中的身份类型的实现方式为：S21、对网络中所有节点的权重值按照从小到大的顺序进行排序；S22、按照节点序号从大到小的顺序，依次令各节点作为双亲节点，且每个双亲节点对其左孩子节点和右孩子节点的选择方式相同，从而完成对所有节点身份类型的确定；其中，每个双亲节点对其左孩子节点和右孩子节点的选择方式具体为：当节点node作为双亲节点时，选择节点node和节点node分别作为双亲节点node的左孩子节点和右孩子节点；n为节点的编号。具体应用时，以8个节点为例，具体参见图3，按照节点序号从大到小的顺序，依次令各节点作为双亲节点，从而完成对所有节点身份类型的确定的具体过程为：首先，将序号最大的节点node作为二叉树的根节点，该节点还作为二叉树的双亲节点；其次、当节点node作为双亲节点时，选择出节点node和节点node分别作为双亲节点node的左孩子节点和右孩子节点；当节点node作为双亲节点时，选择节点node和节点node分别作为双亲节点node的左孩子节点和右孩子节点；当节点node作为双亲节点时，选择节点node和节点node分别作为双亲节点node的左孩子节点和右孩子节点；按照以上方式以此类推，直至所有节点身份类型确认完成。本优选的实施方式中，节点位图更新方法为现有技术中对节点位图进行更新的方法。更进一步的，步骤S1中、节点转发消息的次数为节点本身属性。每个节点转发消息的次数在某一时刻为定值，随着时间的推移而变化。更进一步的，具体参见图4，步骤S4中、设置初始二叉树中各边的边权重值的实现方式为：将初始二叉树中各双亲节点与其所对应的左孩子节点间的边的边权重值设置为0，还将二叉树中各双亲节点与其所对应的右孩子节点间的边的边权重值设置为1。更进一步的，每个节点的位图中包括多个位置，且该多个位置由左至右依次排序，每个位置与该位置序号相同的节点相关联；每个节点中位置的个数与网络中节点的个数相同；每个位置包括两个存储单元，其中，左边存储单元称为计数器，用于存储当前左边存储单元所在的节点到达与当前左边存储单元所在的位置序号相同的节点的步数；右边的存储单元称为足迹存储器，用于存储当前右边存储单元所在的节点到达与当前右边存储单元所在的位置序号相同的节点间边的边权重值。更进一步的，每个节点所对应的初始位图中的信息为：与当前节点序号相同的位置的计数器中存储数字0；与当前节点序号相同的位置的足迹存储器中存储数字1；当前节点中剩余位置的计数器和足迹存储器均存储数字0。具体实施方式二：本实施方式所述的二叉树的更新方法，该二叉树是采用具体实施方式一所述的基于节点权重构建二叉树的方法获得的，该更新方法的具体过程为：当网络中所构建完成的二叉树的生命时长为T时，检测网络中所有节点的当前状态，利用基于节点权重构建二叉树的方法，对网络中的所有节点进行构造，获得新的二叉树，从而完成对二叉树的更新。具体应用时，由于在无线多跳网络中节点数量是一定的，随着时间推移，各节点的资源状态发生变化，通过更新二叉树，对网络中各节点权重重新排位，让资源更好的节点，在二叉树中充当更重要角色，故对网络中二叉树进行不断更新。在无线多跳网络中可周期性的构造二叉树，使得能够根据网络的资源状况以及节点的属性构造有助于提高网络性能的二叉树，避免资源消耗过多的节点或者转发能力不高的节点一直执行转发消息任务，从而影响网络的整体性能。具体应用时，构造二叉树的具体过程为：以图2所示为例，假设网络中有8个节点，8个节点权重值由小到大排序，依次为分别为node，node，...，node。该排序的序号也为节点编号的排序序号。选取节点node作为二叉树的第一个双亲节点。在剩余节点中选择出节点node和节点node分别作为节点node的左孩子节点和右孩子节点；选择节点node和节点node分别作为节点node的左孩子节点和右孩子节点；选择节点node和节点node分别作为节点node的左孩子节点和右孩子节点；选择节点node作为节点node的左孩子节点，初始二叉树结构如图3所示。将边权重值0和边权重值1分别分配给初始二叉树的双亲节点与左孩子节点连接的边和双亲节点与右孩子节点连接的边，如图4所示。给初始二叉树中的每一个节点分配初始位图，如图5所示。每个节点的初始位图中位置的数量和节点的数量相同，位图用于表示到达某个节点的路径。位图由要存储数字的位置组成，位置的数量取决于节点的数量。例如，当网络中有8个节点时，则位图也将包含8个位置。这些位置中的每一个都与特定节点相关联并代表网络中的一个节点。例如，初始位图中，从左至右的第一个位置与编号1的节点node关联。每个位置有2个存储单元组成，左边存储单元称为计数器，记录到达与该位置编号1关联的节点的步数。右边的存储单元被称为足迹存储器，记录了到与该位置编号1关联的节点的路径需要经过相应边的边权重值。由于每个位置与网络中的一个节点相关联，因此在初始状态下，每个节点将数字0放置在其自身所关联的位置的计数器中，并将数字1放置在其自身所关联的位置的足迹存储器中，其余节点所关联的位置的计数器和足迹存储器均放0。通过从孩子节点收集相应的位图信息以及与孩子节点关联的边的边权重更新每个双亲节点的位图信息。更新后的位图如图6所示。利用本发明构建的二叉树进行消息传递，是本领域的现有技术；如果有消息发送到二叉树中某个节点，将该消息以位图的形式存储在二叉树节点中。假设节点node有消息需要发送给节点node，则该消息的位图形式可表示为00 1100 00 00 00 00 00。将消息的位图00 11 00 00 00 00 00 00与节点node的位图的对应位相乘，如果对应位相乘结果均为0，则表示目的节点node不在当前节点node子目录中。在这种情况下，消息发送到更高一层的双亲节点，直到通过该双亲节点能够到达目的节点。当消息被发送给节点node时，将该消息的位图00 11 00 00 00 00 00 00与节点node的位图的对应位相乘，结果为00 21 00 00 00 00 00 00，对应位相乘结果不均为0，则表明目的节点node在节点node子目录中，需要2步并且经过边权重为1的边能够到达目的节点。虽然在本文中参照了特定的实施方式来描述本发明，但是应该理解的是，这些实施例仅仅是本发明的原理和应用的示例。因此应该理解的是，可以对示例性的实施例进行许多修改，并且可以设计出其他的布置，只要不偏离所附权利要求所限定的本发明的精神和范围。应该理解的是，可以通过不同于原始权利要求所描述的方式来结合不同的从属权利要求和本文中所述的特征。还可以理解的是，结合单独实施例所描述的特征可以使用在其他所述实施例中。
