标题title
一种告警短信转语音提醒的方法及系统
摘要abst
一种告警短信转语音提醒的方法及系统，告警语音服务器上保存有告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，包括有：告警语音服务器监测告警短信接收号码处于无法接收短信状态时，在短信号码所属HLR上将短信号码的路由地址更新为告警语音服务器地址；短信中心接收告警短信，查询短信号码所属HLR，获取告警语音服务器地址，然后将告警短信转发至告警语音服务器；告警语音服务器接收告警短信，查询获得告警短信关联的语音提醒号码和语音提醒内容，然后向语音提醒号码发起语音呼叫，并在接通后播放语音提醒内容。本发明属于信息技术领域，能将告警短信转化成语音提醒，从而及时有效的通知维护人员。
权利要求书clms
1.一种告警短信转语音提醒的方法，其特征在于，告警语音服务器上保存有告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，包括有：步骤一、告警语音服务器监测告警短信接收号码的状态，当告警短信接收号码处于无法接收短信状态时，在告警短信接收号码所属HLR上将告警短信接收号码的路由地址更新为告警语音服务器的地址；步骤二、短信中心接收告警短信，查询告警短信接收号码所属HLR，获取告警语音服务器的地址，然后将告警短信转发至告警语音服务器；步骤三、告警语音服务器接收短信中心转发来的告警短信，查询获得告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，然后向查询到的语音提醒号码发起语音呼叫，并在呼叫接通后播放相应的语音提醒内容。2.根据权利要求1所述的方法，其特征在于，步骤一包括有：步骤11、告警语音服务器定时向告警短信接收号码所属HLR发送MAP_SEND_ROUTING_INFO_FOR_SM消息，以查询获得告警短信接收号码的用户漫游VMSC地址，然后向用户漫游VMSC地址下发哑短信，并判断哑短信是否下发失败，如果是，则继续下一步；如果否，则本流程结束；步骤12、告警语音服务器向告警短信接收号码所属HLR发送MAP_UPDATE_LOCATION消息，以将告警短信接收号码的路由地址更新为告警语音服务器的地址。3.根据权利要求1所述的方法，其特征在于，步骤三包括有：步骤31、告警语音服务器接收短信中心转发来的告警短信，查询告警短信的发送号码、接收号码和短信内容所关联的语音提醒号码和语音提醒内容，然后查找在当前时间之前的一段时间间隔内是否存在有向相同的语音提醒号码发起过相同语音提醒内容的历史呼叫，如果是，则继续步骤32；如果否，则继续步骤33；步骤32、告警语音服务器判断查找到的历史呼叫是否接通，如果是，则本流程结束，如果否，则继续步骤33；步骤33、告警语音服务器通过INVITE消息，向语音提醒号码发起语音呼叫，然后判断本次呼叫是否接通，如果是，则播放相应的语音提醒内容；如果否，则等待一段时间后再重新向语音提醒号码发起语音呼叫，直至呼叫接通。4.根据权利要求1所述的方法，其特征在于，步骤三还包括有：告警语音服务器接收维护人员在语音提醒内容播放过程中的返回信息，返回信息包括立刻处理、无法处理、通知其他号码，若返回信息是通知其他号码时，则继续向返回的其他号码发起语音呼叫，当呼叫被接通后，播放语音提醒内容。5.一种告警短信转语音提醒的系统，其特征在于，包含有告警语音服务器，所述告警语音服务器上保存有告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，其中，告警语音服务器进一步包括有：短信号码监测装置，监测告警短信接收号码的状态，当告警短信接收号码处于无法接收短信状态时，在告警短信接收号码所属HLR上将告警短信接收号码的路由地址更新为告警语音服务器的地址；短信转语音提醒装置，接收短信中心转发来的告警短信，查询获得告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，然后向查询到的语音提醒号码发起语音呼叫，并在呼叫接通后播放相应的语音提醒内容。6.根据权利要求5所述的系统，其特征在于，短信号码监测装置进一步包括有：号码状态监测单元，定时向告警短信接收号码所属HLR发送MAP_SEND_ROUTING_INFO_FOR_SM消息，以查询获得告警短信接收号码的用户漫游VMSC地址，然后向用户漫游VMSC地址下发哑短信，并判断哑短信是否下发失败，如果是，则表示告警短信接收号码处于无法接收短信状态，通知号码路由地址更新单元；号码路由地址更新单元，当收到号码状态监测单元的通知消息时，向告警短信接收号码所属HLR发送MAP_UPDATE_LOCATION消息，以将告警短信接收号码的路由地址更新为告警语音服务器的地址。7.根据权利要求5所述的系统，其特征在于，告警语音服务器的短信转语音提醒装置包括有：防语音轰炸单元，查询告警短信的发送号码、接收号码和短信内容所关联的语音提醒号码和语音提醒内容，然后查找在当前时间之前的一段时间间隔内是否存在有向相同的语音提醒号码发起过相同语音提醒内容的历史呼叫，如果存在历史呼叫、且该历史呼叫已接通，则停止对该告警短信的处理；如果不存在历史呼叫，或者存在历史呼叫、但该历史呼叫未接通，则通过INVITE消息，向语音提醒号码发起语音呼叫，并在呼叫接通后播放相应的语音提醒内容，若本次呼叫未接通，等待一段时间后再重新向语音提醒号码发起语音呼叫，直至呼叫接通。8.根据权利要求5所述的系统，其特征在于，告警语音服务器的短信转语音提醒装置包括有：转接号码处理单元，接收维护人员在语音提醒内容播放过程中的返回信息，返回信息包括立刻处理、无法处理、通知其他号码，若返回信息是通知其他号码时，则继续向返回的其他号码发起语音呼叫，当呼叫被接通后，播放语音提醒内容。
说明书desc
技术领域本发明涉及一种告警短信转语音提醒的方法及系统，属于信息技术领域。背景技术为保障业务可靠性，现有的信息系统在运行中一旦检测发现故障，需要向维护人员立即告警，以通知维护人员及时解决故障。由于受系统或者部署环境所限，当前的一些告警系统仅具备告警短信这一功能，但使用告警短信存在易于被手机拦截、易于忽略的问题，往往会导致故障不能被及时排查解决。因此，针对仅有告警短信功能的告警系统，如何将告警短信转化成语音提醒，从而及时有效的通知维护人员，已成为现有技术中亟待解决的技术问题之一。发明内容有鉴于此，本发明的目的是提供一种告警短信转语音提醒的方法及系统，针对仅有告警短信功能的告警系统，能将告警短信转化成语音提醒，从而及时有效的通知维护人员。为了达到上述目的，本发明提供了一种告警短信转语音提醒的方法，告警语音服务器上保存有告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，包括有：步骤一、告警语音服务器监测告警短信接收号码的状态，当告警短信接收号码处于无法接收短信状态时，在告警短信接收号码所属HLR上将告警短信接收号码的路由地址更新为告警语音服务器的地址；步骤二、短信中心接收告警短信，查询告警短信接收号码所属HLR，获取告警语音服务器的地址，然后将告警短信转发至告警语音服务器；步骤三、告警语音服务器接收短信中心转发来的告警短信，查询获得告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，然后向查询到的语音提醒号码发起语音呼叫，并在呼叫接通后播放相应的语音提醒内容。为了达到上述目的，本发明还提供了一种告警短信转语音提醒的系统，包含有告警语音服务器，所述告警语音服务器上保存有告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，其中，告警语音服务器进一步包括有：短信号码监测装置，监测告警短信接收号码的状态，当告警短信接收号码处于无法接收短信状态时，在告警短信接收号码所属HLR上将告警短信接收号码的路由地址更新为告警语音服务器的地址；短信转语音提醒装置，接收短信中心转发来的告警短信，查询获得告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，然后向查询到的语音提醒号码发起语音呼叫，并在呼叫接通后播放相应的语音提醒内容。与现有技术相比，本发明的有益效果是：本发明针对仅有告警短信功能的告警系统，在移动网络中设置告警语音服务器，当告警短信接收号码处于关机或飞行状态时，告警语音服务器从短信中心获取告警短信，然后向告警短信接收号码关联的多个语音提醒号码发起语音呼叫，从而对现有告警系统无需任何改造，只需将告警短信接收号码关机或设置成飞行状态、并借助运营商网络，就可以实现告警短信转语音功能，及时有效的通知维护人员来解决故障；相比于短信告警方式，本发明将短信转成语音提醒，通过语音呼叫是否接通来实时确认维护人员是否已收到提醒信息，当呼叫未接通时，还会持续发起语音提醒，直至维护人员接通来电，从而避免告警被忽略；本发明的语音告警还具有防轰炸逻辑，在保障功能前提下，可以有效降低对维护人员的骚扰。附图说明图1是本发明一种告警短信转语音提醒的方法的流程图。图2是步骤三的具体流程图。图3是本发明一个实施例的信令交互流程图。具体实施方式为使本发明的目的、技术方案和优点更加清楚，下面结合附图对本发明作进一步的详细描述。如图1所示，本发明一种告警短信转语音提醒的方法，告警语音服务器上保存有告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，包括有：步骤一、告警语音服务器监测告警短信接收号码的状态，当告警短信接收号码处于无法接收短信状态时，在告警短信接收号码所属HLR上将告警短信接收号码的路由地址更新为告警语音服务器的地址，所述无法接收短信状态包括但不限于关机或飞行状态；步骤二、短信中心接收告警短信，查询告警短信接收号码所属HLR，获取告警语音服务器的地址，然后将告警短信转发至告警语音服务器；步骤三、告警语音服务器接收短信中心转发来的告警短信，查询获得告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，然后向查询到的语音提醒号码发起语音呼叫，并在呼叫接通后播放相应的语音提醒内容。步骤一中，告警语音服务器可以定时监测告警短信接收号码是否处于关机或者飞行等不可接收短信状态中，当告警短信接收号码无法接收短信时，将告警短信转为语音提醒。步骤一进一步包括有：步骤11、告警语音服务器定时向告警短信接收号码所属HLR发送MAP_SEND_ROUTING_INFO_FOR_SM消息，以查询获得告警短信接收号码的用户漫游VMSC地址，然后向用户漫游VMSC地址下发哑短信，并判断哑短信是否下发失败，如果是，则表示告警短信接收号码处于无法接收短信状态，继续下一步；如果否，则表示告警短信接收号码处于可接收短信状态，本流程结束；步骤12、告警语音服务器向告警短信接收号码所属HLR发送MAP_UPDATE_LOCATION消息，以将告警短信接收号码的路由地址更新为告警语音服务器的地址。告警语音服务器可以将告警短信的发送号码、接收号码和短信内容关键字组合作为匹配规则，每条匹配规则对应多个语音提醒号码和相应的语音提醒内容，这样，步骤三中，告警语音服务器根据匹配规则，获取告警短信所关联的多个语音提醒号码和语音提醒内容。为保障维护人员一定能够接听到告警语音提醒，本发明当语音接通失败后，还会再次发起语音呼叫，直至维护人员接听到告警语音提醒。同时，告警短信服务器还有可能会多次下发告警短信，如果这些告警短信都转成告警语音，就会对维护人员造成语音轰炸，从而使得维护人员的手机无法正常使用。如图2所示，为了防止给维护人员造成语音轰炸，步骤三还可以包括有：步骤31、告警语音服务器接收短信中心转发来的告警短信，查询告警短信的发送号码、接收号码和短信内容所关联的语音提醒号码和语音提醒内容，然后查找在当前时间之前的一段时间间隔内是否存在有向相同的语音提醒号码发起过相同语音提醒内容的历史呼叫，如果是，则继续步骤32；如果否，则继续步骤33；步骤32、告警语音服务器判断查找到的历史呼叫是否接通？如果是，则本流程结束，如果否，则继续步骤33；步骤33、告警语音服务器通过INVITE消息，向语音提醒号码发起语音呼叫，然后判断本次呼叫是否接通？如果是，则播放相应的语音提醒内容；如果否，则等待一段时间后再重新向语音提醒号码发起语音呼叫，直至呼叫接通。若维护人员在接收到告警语音服务器的语音告警时不能及时处理故障，本发明还提供转接号码处理的功能，当维护人员提供转接号码后，告警语音服务器将对转接号码继续发起语音呼叫，从而提醒人员及时解决故障。步骤三还可以包括有：告警语音服务器接收维护人员在语音提醒内容播放过程中的返回信息，返回信息包括立刻处理、无法处理、通知其他号码等，若返回信息是通知其他号码时，则继续向返回的其他号码发起语音呼叫，当呼叫被接通后，播放语音提醒内容。图3示出了本发明一个实施例的信令交互流程图。如图3所示，与告警短信接收号码A相关联的语音提醒号码包括有B和C，本发明的信令交互流程如下：步骤a1-4:告警语音服务器通过MAP_SEND_ROUTING_INFO_FOR_SM消息和下发哑短信，监测发现告警短信接收号码A的状态处于关机状态；步骤a5-8：告警语音服务器通过MAP_UPDATE_LOCATION消息，在告警短信接收号码A所属HLR上将告警短信接收号码A的路由地址更新为告警语音服务器的地址；步骤a9-13：短信中心接收告警短信，查询告警短信接收号码A所属HLR，获取告警语音服务器的地址，然后将告警短信转发至告警语音服务器；步骤a14：告警语音服务器查询获得告警短信接收号码A相关联的语音提醒号码是B和C；步骤a15-16:告警语音服务器向语音提醒号码B发起语音呼叫；步骤a17-18:告警语音服务器向语音提醒号码C发起语音呼叫；步骤a19:告警语音服务器在语音接通后,向语音提醒号码B放音。步骤a20:告警语音服务器在语音接通后,向语音提醒号码C放音。本发明一种告警短信转语音提醒的系统，包含有告警语音服务器，所述告警语音服务器上保存有告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，其中，告警语音服务器进一步包括有：短信号码监测装置，监测告警短信接收号码的状态，当告警短信接收号码处于无法接收短信状态时，在告警短信接收号码所属HLR上将告警短信接收号码的路由地址更新为告警语音服务器的地址，所述无法接收短信状态包括但不限于关机或飞行状态；短信转语音提醒装置，接收短信中心转发来的告警短信，查询获得告警短信的发送号码、接收号码和短信内容相关联的语音提醒号码和语音提醒内容，然后向查询到的语音提醒号码发起语音呼叫，并在呼叫接通后播放相应的语音提醒内容。短信号码监测装置可以进一步包括有：号码状态监测单元，定时向告警短信接收号码所属HLR发送MAP_SEND_ROUTING_INFO_FOR_SM消息，以查询获得告警短信接收号码的用户漫游VMSC地址，然后向用户漫游VMSC地址下发哑短信，并判断哑短信是否下发失败，如果是，则表示告警短信接收号码处于无法接收短信状态，通知号码路由地址更新单元；号码路由地址更新单元，当收到号码状态监测单元的通知消息时，向告警短信接收号码所属HLR发送MAP_UPDATE_LOCATION消息，以将告警短信接收号码的路由地址更新为告警语音服务器的地址。告警语音服务器的短信转语音提醒装置还可以包括有：防语音轰炸单元，查询告警短信的发送号码、接收号码和短信内容所关联的语音提醒号码和语音提醒内容，然后查找在当前时间之前的一段时间间隔内是否存在有向相同的语音提醒号码发起过相同语音提醒内容的历史呼叫，如果存在历史呼叫、且该历史呼叫已接通，则停止对该告警短信的处理；如果不存在历史呼叫，或者存在历史呼叫、但该历史呼叫未接通，则通过INVITE消息，向语音提醒号码发起语音呼叫，并在呼叫接通后播放相应的语音提醒内容，若本次呼叫未接通，等待一段时间后再重新向语音提醒号码发起语音呼叫，直至呼叫接通；转接号码处理单元，接收维护人员在语音提醒内容播放过程中的返回信息，返回信息包括立刻处理、无法处理、通知其他号码等，若返回信息是通知其他号码时，则继续向返回的其他号码发起语音呼叫，当呼叫被接通后，播放语音提醒内容。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本发明保护的范围之内。
