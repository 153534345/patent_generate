标题title
一种云网超宽带质量监测方法及装置
摘要abst
本发明公开一种云网超宽带质量监测方法及装置，其中，该方法包括：提供云网超宽带业务端到端视图；IPoE通道的业务开通测试验收；提供单用户的质差查询接口，查询是否存在质差以及是否存在质差群障；提供网络状态的一键判障，区分群体质差判断和单用户质差判断。该方法及装置实现云网超宽带网络部分一键判障，区分群障质差判断和单用户质差判断，并给超宽业务平台提供质差查询接口，反馈用户质差判断情况，同时提供针对云网超宽带的全程端到端视图功能。
权利要求书clms
1.一种云网超宽带质量监测方法，其特征在于，该方法包括：提供云网超宽带业务端到端视图；IPoE通道的业务开通测试验收；提供单用户的质差查询接口，查询是否存在质差以及是否存在质差群障；提供网络状态的一键判障，区分群体质差判断和单用户质差判断。2.根据权利要求1所述的云网超宽带质量监测方法，其特征在于，提供云网超宽带业务端到端视图，包括：采集各系统网络资源数据，通过稽核算法，生成云网超宽带业务资源树；通过业务账号查询端到端业务，显示在视图上。3.根据权利要求1所述的云网超宽带质量监测方法，其特征在于，IPoE通道的业务开通测试验收，包括：通过云网超宽带与其对应PPPoE账号，调度ITMS测速接口进行仿真测速；获取连续调度的测速结果进行比对，若IPoE的上下行带宽都比PPPoE大，且云网超带宽的上下行测速带宽达到签约带宽的90％，则判定为达标。4.根据权利要求3所述的云网超宽带质量监测方法，其特征在于，所述ITMS测速接口是由触发测速与测速结果查询接口封装成的一个接口，供外部系统调度。5.根据权利要求1所述的云网超宽带质量监测方法，其特征在于，所述单用户的质差查询接口通过IPoE WAN口IP，其NAT后的IP+端口，或者云网超宽带用户账号进行调度，返回当前用户的质差判断查询情况；同时，通过是否调度网元质量以及配置检查开关，进行查询的选择。6.根据权利要求1所述的云网超宽带质量监测方法，其特征在于，所述单用户的质差查询接口的逻辑如下：接收到质差查询请求后，调度应用终端内置的应用探针，查看应用是否存在质差；若不存在质差，则返回应用良好提醒，若存在质差，则通过用户账号查询用户群障表，查询是否存在群障；若存在质差群障，则返回群障信息，接口调度结束；若不存在质差群障，则获取BAS接口下所有云网超宽带用户账号一级IPoE WAN口IP，再调度所有应用探针和网络探针，对获取到的实时查询结果进行汇总分析；对获取到的网络探针数据，判断本云网超宽带用户账号是否有质差，若该账号不存在质差，则返回该账号无质差情况；若该账号存在质差，则通过所有已经质差查询且与报障账号同二级OBD、一级OBD和OLT设备进行质差群障判断，若存在质差群障，则对群障点进行网络检测，同时判断是否是新群体质差群障，是则将该新群体质差群障入到用户群障表中；若不存在质差群障，则对该账号所在网络进行状态、业务配置以及性能进行检测，并对故障点进行故障提醒，提出处理建议。7.根据权利要求1所述的云网超宽带质量监测方法，其特征在于，所述群体质差判断逻辑如下：全量主动监测：检查用户群障表内是否存在对应网元，是否存在质差群障，若不存在，则将群障信息入到用户群障表，同时将群障信息关联的用户入到用户群障表，若为新群体质差群障，同时查询质差网元的指标信息，并入到用户群障表，生成“超宽带质差群障告警”，进行告警派发；实时群体质差判断：当质差查询界面或者调度质差查询接口进行质差查询，若实时查询到质差群障，且用户群障表中不存在对应的质差群障，则将该质差群障的群障信息入到用户群障表，同时将群障信息关联的用户入到用户群障表。8.根据权利要求1所述的云网超宽带质量监测方法，其特征在于，所述单用户质差判断逻辑如下：对于群障分析时单个用户质差，质差查询界面或者调度质差查询接口进行质差查询，结合单用户转发路径和路径上的网元网管，采集转发端口上的性能数据，逐层判定是否发生网络的拥堵，导致用户访问应用的质差。9.一种云网超宽带质量监测装置，其特征在于，该装置包括：业务端到端视图模块，用于提供云网超宽带业务端到端视图；开通测试验收模块，用于IPoE通道的业务开通测试验收；质差查询接口模块，用于提供单用户的质差查询接口，查询是否存在质差以及是否存在质差群障；网络状态监测模块，用于提供网络状态的一键判障，区分群体质差判断和单用户质差判断。10.根据权利要求9所述的云网超宽带质量监测装置，其特征在于，所述业务端到端视图模块，具体用于：采集各系统网络资源数据，通过稽核算法，生成云网超宽带业务资源树；通过业务账号查询端到端业务，显示在视图上。11.根据权利要求9所述的云网超宽带质量监测装置，其特征在于，所述开通测试验收模块，具体用于：通过云网超宽带与其对应PPPoE账号，调度ITMS测速接口进行仿真测速；获取连续调度的测速结果进行比对，若IPoE的上下行带宽都比PPPoE大，且云网超带宽的上下行测速带宽达到签约带宽的90％，则判定为达标。12.根据权利要求11所述的云网超宽带质量监测装置，其特征在于，所述ITMS测速接口是由触发测速与测速结果查询接口封装成的一个接口，供外部系统调度。13.根据权利要求9所述的云网超宽带质量监测装置，其特征在于，所述单用户的质差查询接口通过IPoE WAN口IP，其NAT后的IP+端口，或者云网超宽带用户账号进行调度，返回当前用户的质差判断查询情况；同时，通过是否调度网元质量以及配置检查开关，进行查询的选择。14.根据权利要求9所述的云网超宽带质量监测装置，其特征在于，所述单用户的质差查询接口的逻辑如下：接收到质差查询请求后，调度应用终端内置的应用探针，查看应用是否存在质差；若不存在质差，则返回应用良好提醒，若存在质差，则通过用户账号查询用户群障表，查询是否存在群障；若存在质差群障，则返回群障信息，接口调度结束；若不存在质差群障，则获取BAS接口下所有云网超宽带用户账号一级IPoE WAN口IP，再调度所有应用探针和网络探针，对获取到的实时查询结果进行汇总分析；对获取到的网络探针数据，判断本云网超宽带用户账号是否有质差，若该账号不存在质差，则返回该账号无质差情况；若该账号存在质差，则通过所有已经质差查询且与报障账号同二级OBD、一级OBD和OLT设备进行质差群障判断，若存在质差群障，则对群障点进行网络检测，同时判断是否是新群体质差群障，是则将该新群体质差群障入到用户群障表中；若不存在质差群障，则对该账号所在网络进行状态、业务配置以及性能进行检测，并对故障点进行故障提醒，提出处理建议。15.根据权利要求9所述的云网超宽带质量监测装置，其特征在于，所述群体质差判断逻辑如下：全量主动监测：检查用户群障表内是否存在对应网元，是否存在质差群障，若不存在，则将群障信息入到用户群障表，同时将群障信息关联的用户入到用户群障表，若为新群体质差群障，同时查询质差网元的指标信息，并入到用户群障表，生成“超宽带质差群障告警”，进行告警派发；实时群体质差判断：当质差查询界面或者调度质差查询接口进行质差查询，若实时查询到质差群障，且用户群障表中不存在对应的质差群障，则将该质差群障的群障信息入到用户群障表，同时将群障信息关联的用户入到用户群障表。16.根据权利要求9所述的云网超宽带质量监测装置，其特征在于，所述单用户质差判断逻辑如下：对于群障分析时单个用户质差，质差查询界面或者调度质差查询接口进行质差查询，结合单用户转发路径和路径上的网元网管，采集转发端口上的性能数据，逐层判定是否发生网络的拥堵，导致用户访问应用的质差。17.一种计算机设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1-8任一项所述方法。18.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有执行权利要求1-8任一项所述方法的计算机程序。
说明书desc
技术领域本发明涉及云网超宽带业务领域，尤其是一种云网超宽带质量监测方法及装置。背景技术在千兆宽带业务出现后，用户对带宽的需求已经不再强烈，带宽能力的提升对于普通互联网业务的用户感知提升帮助不大。千兆宽带业务需要有高带宽和高价值的业务进行填充。目前业内已经出现Cloud VR、8K视频和云游戏等对网络带宽和转发质量有较高要求的应用，这些应用对带宽的要求和对网络转发质量的要求大大提升，如何满足此类业务的承载要求，是千兆业务价值填充中必须解决的问题。在这种背景下，云网超宽带业务应运而生，云网超宽带主要承载电信自营与合作的高带宽应用，如：4K、8K视频，Cloud VR和云盘等。云网超宽带从家庭网络、终端、承载网络、边缘云和天翼云等多个环节为用户提供保障。云网超宽带主要面向光宽业务组网场景，其整体架构如图1所示：光宽用户在现有拨号上网带宽之外，构建有QoS保障的转发路径，能够实现电信自有边缘云资源及其应用的加速访问。云网超宽带基础承载网络与现有宽带拨号上网业务的基础承载网络是同一张网络，通过在家庭网关上增加一个虚拟的IPoE WAN口，在接入网和城域网部署独立的业务VLAN和QoS/CoS配置，形成承载质量差异于普通宽带拨号上网的承载通道。因此，云网超宽带产品的基础网络运维体系，与普通宽带拨号上网运维体系保持一致。同时由于云网超宽带产品提供网络质量保障，因此需要在传统的运维体系中补充质量监测与质差定界的技术手段和流程。发明内容针对上述情况，本发明提供一种云网超宽带质量监测方法及装置，实现云网超宽带网络部分一键判障，区分群障质差判断和单用户质差判断，并给超宽业务平台提供质差查询接口，反馈用户质差判断情况，同时提供针对云网超宽带的全程端到端视图功能。为实现上述目的，本发明采用下述技术方案：在本发明一实施例中，提出了一种云网超宽带质量监测方法，该方法包括：提供云网超宽带业务端到端视图；IPoE通道的业务开通测试验收；提供单用户的质差查询接口，查询是否存在质差以及是否存在质差群障；提供网络状态的一键判障，区分群体质差判断和单用户质差判断。进一步地，提供云网超宽带业务端到端视图，包括：采集各系统网络资源数据，通过稽核算法，生成云网超宽带业务资源树；通过业务账号查询端到端业务，显示在视图上。进一步地，IPoE通道的业务开通测试验收，包括：通过云网超宽带与其对应PPPoE账号，调度ITMS测速接口进行仿真测速；获取连续调度的测速结果进行比对，若IPoE的上下行带宽都比PPPoE大，且云网超带宽的上下行测速带宽达到签约带宽的90％，则判定为达标。进一步地，ITMS测速接口是由触发测速与测速结果查询接口封装成的一个接口，供外部系统调度。进一步地，单用户的质差查询接口通过IPoE WAN口IP，其NAT后的IP+端口，或者云网超宽带用户账号进行调度，返回当前用户的质差判断查询情况；同时，通过是否调度网元质量以及配置检查开关，进行查询的选择。进一步地，单用户的质差查询接口的逻辑如下：接收到质差查询请求后，调度应用终端内置的应用探针，查看应用是否存在质差；若不存在质差，则返回应用良好提醒，若存在质差，则通过用户账号查询用户群障表，查询是否存在群障；若存在质差群障，则返回群障信息，接口调度结束；若不存在质差群障，则获取BAS接口下所有云网超宽带用户账号一级IPoE WAN口IP，再调度所有应用探针和网络探针，对获取到的实时查询结果进行汇总分析；对获取到的网络探针数据，判断本云网超宽带用户账号是否有质差，若该账号不存在质差，则返回该账号无质差情况；若该账号存在质差，则通过所有已经质差查询且与报障账号同二级OBD、一级OBD和OLT设备进行质差群障判断，若存在质差群障，则对群障点进行网络检测，同时判断是否是新群体质差群障，是则将该新群体质差群障入到用户群障表中；若不存在质差群障，则对该账号所在网络进行状态、业务配置以及性能进行检测，并对故障点进行故障提醒，提出处理建议。进一步地，群体质差判断逻辑如下：全量主动监测：检查用户群障表内是否存在对应网元，是否存在质差群障，若不存在，则将群障信息入到用户群障表，同时将群障信息关联的用户入到用户群障表，若为新群体质差群障，同时查询质差网元的指标信息，并入到用户群障表，生成“超宽带质差群障告警”，进行告警派发；实时群体质差判断：当质差查询界面或者调度质差查询接口进行质差查询，若实时查询到质差群障，且用户群障表中不存在对应的质差群障，则将该质差群障的群障信息入到用户群障表，同时将群障信息关联的用户入到用户群障表。进一步地，单用户质差判断逻辑如下：对于群障分析时单个用户质差，质差查询界面或者调度质差查询接口进行质差查询，结合单用户转发路径和路径上的网元网管，采集转发端口上的性能数据，逐层判定是否发生网络的拥堵，导致用户访问应用的质差。在本发明一实施例中，还提出了一种云网超宽带质量监测装置，该装置包括：业务端到端视图模块，用于提供云网超宽带业务端到端视图；开通测试验收模块，用于IPoE通道的业务开通测试验收；质差查询接口模块，用于提供单用户的质差查询接口，查询是否存在质差以及是否存在质差群障；网络状态监测模块，用于提供网络状态的一键判障，区分群体质差判断和单用户质差判断。进一步地，业务端到端视图模块，具体用于：采集各系统网络资源数据，通过稽核算法，生成云网超宽带业务资源树；通过业务账号查询端到端业务，显示在视图上。进一步地，开通测试验收模块，具体用于：通过云网超宽带与其对应PPPoE账号，调度ITMS测速接口进行仿真测速；获取连续调度的测速结果进行比对，若IPoE的上下行带宽都比PPPoE大，且云网超带宽的上下行测速带宽达到签约带宽的90％，则判定为达标。进一步地，ITMS测速接口是由触发测速与测速结果查询接口封装成的一个接口，供外部系统调度。进一步地，单用户的质差查询接口通过IPoE WAN口IP，其NAT后的IP+端口，或者云网超宽带用户账号进行调度，返回当前用户的质差判断查询情况；同时，通过是否调度网元质量以及配置检查开关，进行查询的选择。进一步地，单用户的质差查询接口的逻辑如下：接收到质差查询请求后，调度应用终端内置的应用探针，查看应用是否存在质差；若不存在质差，则返回应用良好提醒，若存在质差，则通过用户账号查询用户群障表，查询是否存在群障；若存在质差群障，则返回群障信息，接口调度结束；若不存在质差群障，则获取BAS接口下所有云网超宽带用户账号一级IPoE WAN口IP，再调度所有应用探针和网络探针，对获取到的实时查询结果进行汇总分析；对获取到的网络探针数据，判断本云网超宽带用户账号是否有质差，若该账号不存在质差，则返回该账号无质差情况；若该账号存在质差，则通过所有已经质差查询且与报障账号同二级OBD、一级OBD和OLT设备进行质差群障判断，若存在质差群障，则对群障点进行网络检测，同时判断是否是新群体质差群障，是则将该新群体质差群障入到用户群障表中；若不存在质差群障，则对该账号所在网络进行状态、业务配置以及性能进行检测，并对故障点进行故障提醒，提出处理建议。进一步地，群体质差判断逻辑如下：全量主动监测：检查用户群障表内是否存在对应网元，是否存在质差群障，若不存在，则将群障信息入到用户群障表，同时将群障信息关联的用户入到用户群障表，若为新群体质差群障，同时查询质差网元的指标信息，并入到用户群障表，生成“超宽带质差群障告警”，进行告警派发；实时群体质差判断：当质差查询界面或者调度质差查询接口进行质差查询，若实时查询到质差群障，且用户群障表中不存在对应的质差群障，则将该质差群障的群障信息入到用户群障表，同时将群障信息关联的用户入到用户群障表。进一步地，单用户质差判断逻辑如下：对于群障分析时单个用户质差，质差查询界面或者调度质差查询接口进行质差查询，结合单用户转发路径和路径上的网元网管，采集转发端口上的性能数据，逐层判定是否发生网络的拥堵，导致用户访问应用的质差。在本发明一实施例中，还提出了一种计算机设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，处理器执行计算机程序时实现前述云网超宽带质量监测方法。在本发明一实施例中，还提出了一种计算机可读存储介质，计算机可读存储介质存储有执行云网超宽带质量监测方法的计算机程序。有益效果：1、本发明面向新型的云网超宽带业务提供业务端到端的可视化视图，分网络段监控呈现业务状态。2、本发明提供实时网络状态监测，并且主动进行业务的群障分析，多种群障情况分析，区分质差群障分析以及业务中断群障分析，使得业务群障能第一时间准确反馈到运维人员。3、本发明提供多维度的面向用户的质差情况查询，并将查询结果对外提供，包含质差结论、群障信息、网络状态检查结论和处理建议等；4、本发明针对单用户的故障分析，覆盖网络端到端的各个网元情况、系统情况和网络质量情况等分析判断，诊断原理合理，诊断结果准确。附图说明图1是云网超宽带承载总体架构图；图2是本发明一实施例的质量监测与质差定界的总体技术架构图；图3是本发明一实施例的云网超宽带质量监测方法流程示意图；图4是本发明一实施例的云网超宽带业务端到端视图；图5是本发明一实施例的网络状态监测的质差判断流程图；图6是本发明一实施例的网络状态监测的数据模型图；图7是本发明一实施例的群障查看界面图；图8是本发明一实施例的单用户质差判定框图；图9是本发明一实施例的监控系统内质差查询界面图；图10是本发明一实施例的云网超宽带质量监测装置结构示意图；图11是本发明一实施例的计算机设备结构示意图。具体实施方式下面将参考若干示例性实施方式来描述本发明的原理和精神，应当理解，给出这些实施方式仅仅是为了使本领域技术人员能够更好地理解进而实现本发明，而并非以任何方式限制本发明的范围。相反，提供这些实施方式是为了使本公开更加透彻和完整，并且能够将本公开的范围完整地传达给本领域的技术人员。本领域技术人员知道，本发明的实施方式可以实现为一种系统、装置、设备、方法或计算机程序产品。因此，本公开可以具体实现为以下形式，即：完全的硬件、完全的软件，或者硬件和软件结合的形式。根据本发明的实施方式，提出了一种云网超宽带质量监测方法及装置，为了实现支撑网络部分的故障、网络承载质量的运维保障，包括：业务开通的IPoE通道连通性故障的处理，网络层面单个用户的故障处理，网络承载的群障处理，以及用户业务质差的网络状态监测等工作，实现云网超宽带质量检测，支撑云网超宽带的正常运营运维。下面参考本发明的若干代表性实施方式，详细阐释本发明的原理和精神。图3是本发明一实施例的云网超宽带质量监测方法流程示意图。如图3所示，该方法包括：S1、云网超宽带业务端到端视图1、功能说明：系统收敛IP网管、PON网管、AAA系统、ITMS系统和资源系统等网络资源数据，通过稽核算法实现超宽带业务资源树生成，通过页面输入业务账号，可以查询端到端业务，如图4所示。通过输入业务账号关联得到业务类型，若没有关联到业务类型，则输入的业务账号没有用户信息。点击查询，查询用户资源树信息，显示在视图上，分别点击应用信息线路以及网元，显示相关信息，存在的网元即显示对应图标。2、操作说明：点击应用信息线路：显示应用信息，包括应用名称等。点击用户，显示用户信息：用户账号、区域、账号类型、接入类型、对应PPPoE账号、对应itv账号、带宽、安装地址、开户时间和业务到期时间。点击HGW，显示家庭网关信息：MDU名称、MDU类型、MDU MAC、LOID、MDU下联端口名称和ONU ID。点击OBD，显示一级分光器信息：分光器1名称、分光器下联端口名称和分光器上联端口名称；如果多级分光器会显示多级OBD。点击OLT，显示OLT信息：OLT名称、PON类型、OLT型号、OLTIP、OLT下联端口、OLT上联端口、宽带SVLAN和宽带CVLAN。点击BRAS，显示主BAS信息：主BAS名称、主BASIP地址和主BAS下联端口。点击CR，显示内容同BRAS。S2、IPoE通道的业务开通测试验收调度ITMS测速接口进行测速，获取测速结果判断业务开通是否达标，具体如下：通过云网超宽带与云网超宽带对应的PPPoE业务账号，调度ITMS测速接口进行仿真测速，获取连续调度的测速结果进行比对，需要IPoE的上下行带宽都比PPPoE大，且超带宽的上下行测速带宽要达到签约带宽的90％，判定为达标；签约带宽从开通数据内获取。1、触发测速调用ITMS提供的测速功能；请求url：POST http://ip:port/basePath/SimulationSpeed2、测速结果查询触发返回后即可调度查询测速结果接口；请求url：GET http://ip:port/basePath/SimulationSpeed？UserInfoType＝xx&amp;Use rInfo＝xx3、提供给外部系统的测速调度将触发测速与测速结果查询封装成一个接口，提供给外部系统调度；请求url：POST http://ip:port/service/interfaceS3、质差查询接口，查询是否存在质差以及是否存在质差群障北向提供单用户的质差查询接口，如图2所示，接口入参：原要求IPoE WAN口IP，或者其NAT后的IP+端口，或者超宽带用户账号，而实际要求超宽带账号即可，以及增加是否需要调度网元质量以及配置检查开关，该接口暂定提供给智慧营维调用。接口要求：返回当前用户的质差判断查询情况，返回内容包含质差结论、群障信息、网络状态检查结论和处理建议。接口逻辑：在质量监控系统接收到质差查询请求后，调度应用终端内置的应用探针，查看应用是否存在质差；若不存在质差，则返回应用良好提醒，若存在质差，则通过用户账号查询用户群障表，查询是否存在群障；若存在质差群障，则返回群障信息，接口调度结束；若不存在质差群障，则获取BAS接口下所有云网超宽带用户账号一级IPoE WAN口IP，再调度所有应用探针和网络探针，对获取到的实时查询结果进行汇总分析，实时查询结果返回时间不能超过30秒；对获取到的网络探针数据，判断本云网超宽带用户账号是否有质差，若该账号不存在质差，则返回该账号无质差情况；若该账号存在质差，则通过所有已经质差查询且与报障账号同二级OBD、一级OBD即PON口和OLT设备等维度下进行质差群障判断，若存在质差群障，则对群障点进行自主监控的网络检测，如查询端口上的流量、带宽使用率、丢包情况等，同时判断是否是新群体质差群障，是则将该新群体质差群障入到用户群障表中；若不存在质差群障，则对该账号所在网络进行状态、业务配置以及性能进行检测，并对故障点进行故障提醒，提出处理建议。S4、网络状态的一键判障，区分群体质差判断和单用户质差判断系统提供一键判障功能，判障分为群体质差判断和单用户质差判断，其主要流程如图5所示：用户投诉质差处理系统接收到用户投诉，获取应用层探针数据，发起网端质量监测查询和云、边端质量监测查询，根据五元组关联线路信息，查询指定设备端口监测数据，根据网络指标关联应用质量的算法，判断是否质差，返回网络侧质差判定结果，包含具体指标、资源竞争的IP组等信息给用户投诉质差处理系统。1、数据模型故障分析数据需要从号码百事通、佰特、ITMS、PON网管、城域网网管、AAA和云端网管，获取批量与实时数据进行业务与网络质量分析，如图6所示。2、群障质差判断云网超宽带群障分为两种情况：质差群障和业务中断群障。针对质差群障，会出现大面积质量下降的用户投诉或者大量应用探针发生质差告警，此时网络侧网管系统不一定有明显的告警信息，需要质量监测系统根据用户账号，或者探针IP地址反查IPoE通道的线路绑定信息，同时进行转发路径的关联，大量转发路径的交汇点指向的设备，可以判定为质差设备；通过调用该台设备的网管性能信息，可以进行群体质差的分析。针对业务中断群障，可以结合省内专业运维系统的相关告警信息，实现设备故障中断的定位后，根据设备故障点对应的超宽带业务对应的路径信息，提前进行故障保障拦截。质差群障分析全量主动监测从号码百事通系统获取业务探针最新全量性能数据；从柏特系统获取网络探针最新全量性能数据；从佰特系统获取的数据有以下两种：从PON网管获取OBD质差和PON口质差数据。质差群障判断逻辑：检查用户群障表内是否存在对应网元，是否存在质差群障，若没有，则将群障信息入到用户群障表，同时将群障信息关联的用户同样入到用户群障表，若为新群体质差群障，同时查询质差网元的流量、光功率、工作状态等信息，如网元为PON口，则获取PON口工作状态、与PON口间的流量、带宽利用率、PON口CRC变化量；若为OLT设备，则查看OLT工作状态、上联口流量、带宽利用率、CRC变化情况，将这些指标情况同样写入到用户群障表内；若为新群体质差群障，通过PON网管生成“超宽带质差群障告警”，进行告警派发。实时质差群障判断当有页面或者质差查询接口调度的质差查询，若实时查询到质差群障，若用户群障表内没有对应的群障，则需要将群障信息入到用户群障内。业务中断群障分析从PON网管、IP网管获取告警列表，形成故障点的群障信息，且群障影响到的超宽带用户同样入到用户群障表内，用于质差查询接口与检测系统内页面查询质差情况功能进行群障获取。3、单用户质差分析对于存在质差的非质差群障的用户：若检测到用户所在网络存在故障，则不处理；若检测到用户所在网络存在质差群障，则需要对用户进行完整网络检测，如光衰不达标、端口状态异常、带宽异常等。4、群障管理群障管理分为主动分析质差群障与同步的质差群障。主动分析质差群障：对主动分析生成的质差群障，需要每10分钟对存在群障的用户进行应用探针数据的重新获取，重新分析群障是否依然存在，若依然存在则不处理；若群障已经不存在，则需要进行群障修改状态以及更新修复时间。同步的质差群障：每5分钟检测PON网管以及IP网管内该群障是否存在，若依然存在则不做任何处理，若群障已经不存在，则将该群障从用户群障表内删除。5、群障查看界面对存在质差的用户，提供用户质差查询页面，如图7所示，页面内需要包含地市、超宽带业务账号、群体故障类型、群体状态、群障发生开始时间、群障发生结束时间、群障恢复开始时间，群障恢复结束时间、群障资源和群障管理者等。超宽带业务账号和群障资源字段为模糊匹配。群障管理者为精确匹配。群体故障类型：有群体质差以及群体故障，群体质差表示通过网络探针数据分析的群体质差，群体故障表示从PON以及IP网管同步的故障信息。6、单用户质差实时判定对于单用户质差，结合单用户转发路径和路径上的网元网管，采集转发端口上的流量、带宽使用率、丢包情况，队列使用率和突发情况等，逐层判定是否发生网络的拥堵，导致用户访问应用的质差。单用户质差判定如图8所示：单一用户质差由应用探针发出，网络探针首先采用小流量测试验证IPoE WAN口到边缘云的连通性和基本时延、丢包性能等，如发现质量较差，则根据IPoE WAN口IP检索质量监控系统，获取此IP相关的各层面网元监测数据，同时获取与此IP同端口的IPoE业务数量；通过综合分析业务使用情况和网管监测数据，判断疑似的质差点；联动业务调度系统不再调度该路径上的业务进入IPoE通道；同时监测该路径上的IPoE业务质量是否不再劣化或者有所恢复。单用户质差触发认为有三个触发入口：群障分析时单个用户质差；监控功能内提供界面进行单个质差检查；质差查询接口调度触发质差判定。7、监控系统内质差查询界面原型功能说明：通过输入业务账户提供一键诊断，并输出诊断结论及预处理建议，提高运维人员预处理效率和准确率。界面说明：如图9所示，进入云网超宽带质量监测功能，可输入业务账号，有业务资源树TOPO图、诊断总结论以及处理建议、各诊断点的详细情况。通过输入账号关联得到业务类型，若没有关联到业务类型，则输入账号没有用户信息。关联到业务类型“云网超宽带”后，点击“诊断”按钮，能够进行进行一键诊断。点击诊断时，TOPO图内的图标灰色显示，当某个网元的原子能力全部返回，则网元以及左右的链路高亮，表示该点已经诊断完，同样，详细信息已经获取到返回的能力接口，也需要即时显示，不需要等到全部能力返回才显示。操作说明：业务账号、IPOE地址输入框：系统默认填充，不支持修改。TOPO显示：显示CRM设备名称、BAS名称、端口、交换机名称、OLT名称、分光器、ONU名称实时状态及链接关系。设备或者线路异常用户红色显示，正常用绿色显示，可以清晰定位故障点。诊断结论：显示给运维人员参考的内容，指导客户人员操作。预处理建议：对于比较明确的故障位置时，给出准确的统一答复口径，用以快速拦截投诉。通过输入业务账号诊断以后，通过故障现象给出诊断结论及预处理建议。详细信息内按网络位置进行区分模块显示诊断详细结果：分为应用质差、网络质差、业务平台信检测、用户线路检测、网络线路检测和配置规范检查。详情中显示每个诊断能力的调度情况，每个诊断能力的信息包括序号、能力名称、能力耗时、能力调度结果、查看详情、操作，能力的调度结果处正价图标表示结果，如分为诊断正常，诊断可疑，诊断故障。调度完全正常且能力内结果没有故障，为绿色。能力调度失败为黄色。能力调度成功但内部数据存在故障，则为红色。应用质差：显示用户的应用质差情况。网络质差：显示网络质差探针的数据信息，内含调度AAA、调度网络探针能力。业务平台：调度。输入超宽带业务账号后，显示业务类型为超宽带业务。故障场景可选。单用户判定通过调度ITMS、IPTV系统、AAA、IP、PON、号码百事通、柏特、云管平台能力即时数据获取接口进行数据整合分析单用户质差。是否存在群障需增加查看配置能力通过业务账号，查询用户群障表内是否存在网络质量故障，若存在群障，提醒群障信息。群障来源：保障功能诊断得到的群障，如网络侧的故障。IP网管告警：通过同步IP网管故障记录。群障质差分析：通过。群障清楚机制，每5分钟定期扫描IP网管内故障情况，若已经不存在则群障已经修复。需要说明的是，尽管在上述实施例及附图中以特定顺序描述了本发明方法的操作，但是，这并非要求或者暗示必须按照该特定顺序来执行这些操作，或是必须执行全部所示的操作才能实现期望的结果。附加地或备选地，可以省略某些步骤，将多个步骤合并为一个步骤执行，和/或将一个步骤分解为多个步骤执行。为了对上述基于新型城域网拓扑快速生成功能配置的方法进行更为清楚的解释，下面结合一个具体的实施例来进行说明，然而值得注意的是该实施例仅是为了更好地说明本发明，并不构成对本发明不当的限定。诊断一、用户业务状态查询从AAA获取。诊断二、用户在线状态与在线信息查询与AAA系统对接。诊断三：查询AAA获取认证失败原因与AAA系统对接，通过超宽带账号或者PPPoE业务账号获取。诊断四：用户应用质差查询调度应用探针获取数据。诊断五：机顶盒状态IPTV系统提供能力，查看机顶盒状态，通过itv业务账号查询。诊断六：查询AAA系统，获取异常下线原因与AAA系统对接，通过超宽带账号或者PPPoE业务账号获取。诊断七、网络质量监控情况指标获取接口通过超宽带业务账号调度质差查询接口，获取用户网络质差以及群体质差情况。诊断八：网关在线状态查询调度ITMS接口：GET GET http://ip:port/basePath/GatewayDevState？UserInfoType＝1&amp;User Info＝02519274638&amp;StateType＝DevOnlineTime获取光猫链接状态：Unconfigured:不可用状态Connecting:连接中Connected:已连接PendingDisconnect:即将断开连接Disconnecting:正在断开连接Disconnected:连接已断开。诊断九：光猫LAN口状态查询调度ITMS接口：GET http://ip:port/basePath/GatewayDevState？UserInfoType＝1&amp;User Info＝02519274638&amp;StateType＝LANPortState获取光猫下LAN口状态，LAN1和4口为上网业务，LAN2口为链接机顶盒；获取LAN口的协商带宽，协商带宽需要为1000兆以上；若用户的设备为100兆口，可以查看得到端口协商带宽为100。诊断十：网关类型查询调度ITMS接口：GEThttp://ip:port/basePath/DevBasicInfo？UserInfoType＝1&amp;User Info＝02519274638&amp;InfoType＝DevSN查询网关类型：1：天翼网关1.0；2：天翼网关2.0；3：天翼网关3.0；4：千兆网关；5：融合终端；6：e8-C网关；7：e8-B网关；99：其它；其中：千兆网关是指部署在10G PON网络的10G-EPON网关以及XG-PON网关，融合终端是融合机顶盒模块的三合一网关。需要为天翼网关3.0一级千兆网关才支持超宽带业务。诊断十一：OLT设备相关状态查询PON网管提供能力；OLT设备状态：是否在线；PON口状态：是否up；PON口与ONU的收发光：可判断上下行光衰；PON板卡状态：是否up；PON口CRC增量：OLT上行口CRC增量；PON口流量：PON口最近的流速；OLT上行口流量：PON口最近的流速；ONU状态采集：ONU的各类状态；PON口下所有ONU状态：分析群障，如一级OBD群障，光纤故障。诊断十二：交换机相关状态查询IP网管提供；交换机设备状态：是否在线；上下行端口状态：端口UP、DOWN；端口流量：上下行端口最近流量；端口CRC增量：需要时间间隔，耗时会长，不确定是否需要具备。诊断十三：BAS/MSE/SR设备祥光状态检查IP网管提供；BAS设备状态：是否在线；BAS下行口状态：BAS下行口最近流量；BAS下行口CRC增量。诊断十四：CR设备的端口流量下行到BAS口与到云的端口流量情况查询诊断十五：云平台网络质量查询云平台提供能力；云平台链路端口实时流量、CRC增量；云平台链路端口实时CRC增量；用户对应VPC服务器CPU利用率、内存利用率、硬盘使用情况、硬盘IO；诊断十六：IPOE配置规范查询检查OLT 47通道配置情况查询。通过ITMS获取数据，查看HGW是否下发细路由，若没有下发，则结论为未配置细路由。基于同一发明构思，本发明还提出一种云网超宽带质量监测装置。该装置的实施可以参见上述方法的实施，重复之处不再赘述。以下所使用的术语“模块”，可以是实现预定功能的软件和/或硬件的组合。尽管以下实施例所描述的装置较佳地以软件来实现，但是硬件，或者软件和硬件的组合的实现也是可能并被构想的。图10是本发明一实施例的云网超宽带质量监测装置结构示意图。如图10所示，该装置包括：业务端到端视图模块101，用于提供云网超宽带业务端到端视图；具体如下：采集各系统网络资源数据，通过稽核算法，生成云网超宽带业务资源树；通过业务账号查询端到端业务，显示在视图上。开通测试验收模块102，用于IPoE通道的业务开通测试验收；具体如下：通过云网超宽带与其对应PPPoE账号，调度ITMS测速接口进行仿真测速；获取连续调度的测速结果进行比对，若IPoE的上下行带宽都比PPPoE大，且云网超带宽的上下行测速带宽达到签约带宽的90％，则判定为达标；ITMS测速接口是由触发测速与测速结果查询接口封装成的一个接口，供外部系统调度。质差查询接口模块103，用于提供单用户的质差查询接口，查询是否存在质差以及是否存在质差群障；用户的质差查询接口通过IPoE WAN口IP，其NAT后的IP+端口，或者云网超宽带用户账号进行调度，返回当前用户的质差判断查询情况；同时，通过是否调度网元质量以及配置检查开关，进行查询的选择；单用户的质差查询接口的逻辑如下：接收到质差查询请求后，调度应用终端内置的应用探针，查看应用是否存在质差；若不存在质差，则返回应用良好提醒，若存在质差，则通过用户账号查询用户群障表，查询是否存在群障；若存在质差群障，则返回群障信息，接口调度结束；若不存在质差群障，则获取BAS接口下所有云网超宽带用户账号一级IPoE WAN口IP，再调度所有应用探针，对获取到的实时查询结果进行汇总分析；对获取到的实时查询结果，判断本云网超宽带用户账号是否有质差，若该账号不存在质差，则返回该账号无质差情况；若该账号存在质差，则通过所有已经质差查询且与报障账号同二级OBD、一级OBD和OLT设备进行质差群障判断，若存在质差群障，则对群障点进行网络检测，同时判断是否是新群体质差群障，是则将该新群体质差群障入到用户群障表中；若不存在质差群障，则对该账号所在网络进行状态、业务配置以及性能进行检测，并对故障点进行故障提醒，提出处理建议。网络状态监测模块104，用于提供网络状态的一键判障，区分群体质差判断和单用户质差判断；群体质差判断逻辑如下：全量主动监测：检查用户群障表内是否存在对应网元，是否存在质差群障，若不存在，则将群障信息入到用户群障表，同时将群障信息关联的用户入到用户群障表，若为新群体质差群障，同时查询质差网元的指标信息，并入到用户群障表，生成“超宽带质差群障告警”，进行告警派发；实时群体质差判断：当质差查询界面或者调度质差查询接口进行质差查询，若实时查询到质差群障，且用户群障表中不存在对应的质差群障，则将该质差群障的群障信息入到用户群障表，同时将群障信息关联的用户入到用户群障表；单用户质差判断逻辑如下：对于群障分析时单个用户质差，质差查询界面或者调度质差查询接口进行质差查询，结合单用户转发路径和路径上的网元网管，采集转发端口上的性能数据，逐层判定是否发生网络的拥堵，导致用户访问应用的质差。应当注意，尽管在上文详细描述中提及了云网超宽带质量监测装置的若干模块，但是这种划分仅仅是示例性的并非强制性的。实际上，根据本发明的实施方式，上文描述的两个或更多模块的特征和功能可以在一个模块中具体化。反之，上文描述的一个模块的特征和功能可以进一步划分为由多个模块来具体化。基于前述发明构思，如图11所示，本发明还提出一种计算机设备200，包括存储器210、处理器220及存储在存储器210上并可在处理器220上运行的计算机程序230，处理器220执行计算机程序230时实现前述云网超宽带质量监测方法。基于前述发明构思，本发明还提出一种计算机可读存储介质，计算机可读存储介质存储有执行前述云网超宽带质量监测方法的计算机程序。本发明提出的云网超宽带质量监测方法及装置，面向新型的云网超宽带业务提供业务端到端的可视化视图，分网络段监控呈现业务状态；实时网络状态监测，并且主动进行业务的群障分析，多种群障情况分析，区分质差群障分析以及业务中断群障分析，使得业务群障能第一时间准确反馈到运维人员；多维度的面向用户的质差情况查询，并将查询结果对外提供，包含质差结论、群障信息、网络状态检查结论、处理建议等；针对单用户的故障分析，覆盖网络端到端的各个网元情况、系统情况、网络质量情况等分析判断，诊断原理合理，诊断结果准确。上述方案中涉及到的术语解释如下：IPoE：IP over Ethernet以太网IP接入；PPPoE：PPP over Ethernet以太网PPP接入；QoS：Qualification of Service业务质量；BRAS：Broadband Remote Access Server宽带接入服务器；CR：Core Router核心路由器；DHCP：Dynamic Host Configuration Protocol动态主机配置协议；DHCP PD：Dynamic Host Configuration Protocol prefix delegation动态主机配置协议前缀代理；ND：Neighbor Discovery邻居发现；WAN：Wide Area Network广域网；LAN：Local Area Network局域网；IPP：IP preferance IP优先级；CVLAN：Custom VLAN用户VLAN；SVLAN：Service VLAN业务VLAN；QoS：Quality of Service服务质量；CoS：Class of Service服务分类；Radius：Remote Authentication Dial In User Service远程用户拨号认证服务；MSE：多服务边缘设备；VR：虚拟现实；HGW：家庭网关；LOID号：电信公司给每一位用户的一个注册码；ITMS：Integrated Terminal Management System终端综合管理系统；虽然已经参考若干具体实施方式描述了本发明的精神和原理，但是应该理解，本发明并不限于所公开的具体实施方式，对各方面的划分也不意味着这些方面中的特征不能组合以进行受益，这种划分仅是为了表述的方便。本发明旨在涵盖所附权利要求的精神和范围内所包含的各种修改和等同布置。对本发明保护范围的限制，所属领域技术人员应该明白，在本发明的技术方案的基础上，本领域技术人员不需要付出创造性劳动即可做出的各种修改或变形仍在本发明的保护范围以内。
