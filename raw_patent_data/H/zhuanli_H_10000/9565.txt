标题title
一种视频录制方法及电子设备
摘要abst
本申请涉及终端技术领域，公开了一种视频录制方法及电子设备，用以降低小视频的制作门槛，提高小视频的制作效率。该方法包括：电子设备检测到用于开启视频录制的第一操作；所述电子设备响应于所述第一操作，开启视频录制；当在录制的音频中检测到第一词库中的第一关键词时，所述电子设备将在检测到所述第一关键词之后录制的第一数量的视频帧替换为所述第一关键词关联的图片或动画。
权利要求书clms
1.一种视频录制方法，其特征在于，包括：电子设备检测到用于开启视频录制的第一操作；所述电子设备响应于所述第一操作，开启视频录制；当在录制的音频中检测到第一词库中的第一关键词时，所述电子设备将在检测到所述第一关键词之后录制的第一数量的视频帧替换为所述第一关键词关联的图片或动画。2.如权利要求1所述的方法，其特征在于，所述第一数量的视频帧替换为所述第一关键词关联的图片或动画包括：所述电子设备检测到用于将所述第一关键词关联的图片或动画替换为用户提供的图片或动画的第二操作；所述电子设备响应于所述第二操作，将所述第一关键词关联的图片或动画替换为所述用户提供的图片或动画。3.如权利要求1或2所述的方法，其特征在于，所述方法还包括：所述电子设备检测到用于调整所述图片或动画在录制的视频中的起始位置或结束位置的第三操作；所述电子设备响应于所述第三操作，调整所述图片或动画在所述录制的视频中的起始位置或结束位置。4.如权利要求1-3中任一项所述的方法，其特征在于，所述方法还包括：当在录制的音频中检测到第二词库中的第二关键词时，所述电子设备将在检测到所述第二关键词之后录制的第二数量的音频帧替换为所述第二关键词关联的音频特效，或将包含所述第二关键词的第三数量的音频帧替换为所述第二关键词关联的音频特效。5.如权利要求1-4中任一项所述的方法，其特征在于，所述方法还包括：当在录制的视频中检测到手势库中的关键手势时，所述电子设备在以检测到所述关键手势的视频帧为开始的包含所述关键手势的第四数量的视频帧中添加所述关键手势关联的视频特效。6.如权利要求1-5中任一项所述的方法，其特征在于，所述方法还包括：所述电子设备检测到用于开启快录的第四操作；所述电子设备响应于所述第四操作，根据快录倍数间隔丢弃录制的视频和音频中的视频帧和音频帧。7.如权利要求1-5中任一项所述的方法，其特征在于，所述方法还包括：所述电子设备检测到用于开启慢录的第五操作；所述电子设备响应于所述第五操作，根据慢录倍数调整录制的视频和音频中的视频帧和音频帧的切换速率。8.一种电子设备，其特征在于，所述电子设备包括处理器和存储器；所述存储器中存储有计算机程序；当所述计算机程序被执行时，使得所述电子设备执行如权利要求1-7中任一项所述的方法。9.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质包括计算机程序，当所述计算机程序在电子设备上运行时，使得所述电子设备执行如权利要求1-7中任一项所述的方法。10.一种芯片，其特征在于，所述芯片与电子设备中的存储器耦合，使得所述芯片在运行时调用所述存储器中存储的计算机程序，实现如权利要求1-7中任一项所述的方法。
说明书desc
相关申请的交叉引用本申请要求在2020年10月22日提交中华人民共和国知识产权局、申请号为202011142469.0、发明名称为“一种录像方法及电子设备”的中国专利申请的优先权，其全部内容通过引用结合在本申请中。技术领域本申请实施例涉及终端技术领域，尤其涉及一种视频录制方法及电子设备。背景技术随着自媒体等新媒体平台的兴起，小视频分享已经成为一种新的社交休闲方式。目前小视频制作需求量很大，小视频制作时需要穿插各种图片、动画等，但是这些图片、动画等通常都是在小视频录制完成后，由编辑人员通过视频处理软件对录制的视频文件后期编辑实现。而通过视频处理软件对视频文件进行后期编辑使用门槛高、工作量大，小视频的制作不够便捷、高效，影响用户体验。发明内容本申请实施例提供一种视频录制方法及电子设备，用以解决小视频制作门槛高、不够便捷、高效的问题。第一方面，本申请实施例提供一种视频录制方法，包括：电子设备检测到用于开启视频录制的第一操作；所述电子设备响应于所述第一操作，开启视频录制；当在录制的音频中检测到第一词库中的第一关键词时，所述电子设备将在检测到所述第一关键词之后录制的第一数量的视频帧替换为所述第一关键词关联的图片或动画。在本申请实施例中，电子设备在进行视频录制时，可以对录制的音频中是否存在第一关键词进行实时检测，并在录制的音频中检测到第一关键词时，将在检测到第一关键词之后录制的第一数量的视频帧替换为第一关键词关联的图片或动画，实现了对视频的边录边编辑，并且可以无需用户操作，降低了小视频的制作门槛，有利于提高小视频的制作效率以及用户体验。在一种可能的设计中，所述第一数量的视频帧替换为所述第一关键词关联的图片或动画包括：所述电子设备检测到用于将所述第一关键词关联的图片或动画替换为用户提供的图片或动画的第二操作；所述电子设备响应于所述第二操作，将所述第一关键词关联的图片或动画替换为所述用户提供的图片或动画。上述设计中，电子设备可以根据用户的操作，在视频中穿插相应的图片或动画，有利于满足用户的个性化需求，提高用户体验。在一种可能的设计中，所述方法还包括：所述电子设备检测到用于调整所述图片或动画在录制的视频中的起始位置或结束位置的第三操作；所述电子设备响应于所述第三操作，调整所述图片或动画在录制的视频中的起始位置或结束位置。上述设计中，用户可以直接在录制的视频中调整穿插的图片或动画的起始位置或结束位置，降低了用户对视频进行编辑的门槛，有利于提高小视频制作效率。在一种可能的设计中，所述方法还包括：当在录制的音频中检测到第二词库中的第二关键词时，所述电子设备将在检测到所述第二关键词之后录制的第二数量的音频帧替换为所述第二关键词关联的音频特效，或将包含所述第二关键词的第三数量的音频帧替换为所述第二关键词关联的音频特效。上述设计中，在视频录制时，电子设备还可以自动进行音频特效的添加，有利于降低小视频的制作门槛，提高小视频的制作效率。在一种可能的设计中，所述方法还包括：当在录制的视频中检测到手势库中的关键手势时，所述电子设备在以检测到所述关键手势的视频帧为开始的包含所述关键手势的第四数量的视频帧中添加所述关键手势关联的视频特效。上述设计中，在视频录制时，电子设备还可以自动进行视频特效的添加，有利于降低小视频的制作门槛，提高小视频的制作效率。在一种可能的设计中，所述方法还包括：所述电子设备检测到用于开启快录的第四操作；所述电子设备响应于所述第四操作，根据快录倍数间隔丢弃录制的视频和音频中的视频帧和音频帧。在一种可能的设计中，所述方法还包括：所述电子设备检测到用于开启慢录的第五操作；所述电子设备响应于所述第五操作，根据慢录倍数调整录制的视频和音频中的视频帧和音频帧的切换速率。第二方面，本申请实施例提供一种电子设备，所述电子设备包括执行上述第一方面或者第一方面的任一种可能的设计的方法的模块/单元；这些模块/单元可以通过硬件实现，也可以通过硬件执行相应的软件实现。第三方面，本申请实施例提供一种电子设备，所述电子设备包括存储器和处理器，所述存储器中存储有计算机程序；当所述计算机程序被所述处理器执行时，使得所述电子设备执行上述第一方面或者第一方面的任一种可能的设计的方法。第四方面，本申请实施例提供一种计算机可读存储介质，所述计算机可读存储介质包括计算机程序，当计算机程序在电子设备上运行时，使得所述电子设备执行上述第一方面或者第一方面的任一种可能的设计的方法。第五方面，本申请实施例提供一种计算机程序产品，当其在电子设备上运行时，使得所述电子设备执行上述第一方面或者第一方面的任一种可能的设计的方法。第六方面，本申请实施例提供的一种芯片，用于从存储器中调用并运行所述存储器中存储的计算机程序，执行上述第一方面或者第一方面的任一种可能的设计的方法。上述第二方面至第六方面所能达到的技术效果请参照上述第一方面所能达到的技术效果，这里不再重复赘述。附图说明图1为本申请实施例提供的视频录制示意图；图2为本申请实施例提供的电子设备结构示意图；图3为本申请实施例提供的界面示意图；图4为本申请实施例提供的视频录制效果示意图之一；图5为本申请实施例提供的关键词检测示意图；图6为本申请实施例提供的视频录制过程中穿插图片或动画过程示意图；图7为本申请实施例提供的视频编辑界面示意图；图8为本申请实施例提供的视频录制效果示意图之二；图9为本申请实施例提供的视频录制过程中穿插音频特效过程示意图；图10为本申请实施例提供的视频录制过程中添加视频特效过程示意图之一；图11为本申请实施例提供的视频帧上添加视频特效的示意图之一；图12为本申请实施例提供的视频帧上添加视频特效的示意图之二；图13为本申请实施例提供的视频录制过程中添加视频特效过程示意图之二；图14为本申请实施例提供的视频录制过程中添加视频特效过程示意图之三；图15为本申请实施例的电子设备的结构示意图。具体实施方式目前，电子设备可以通过应用程序为用户提供相应的功能。例如，电子设备可以通过视频录制应用为用户提供视频录制等功能。通常，用户可以对视频录制应用操作，使得电子设备可以响应于用户对视频录制应用的操作，录制视频。并在视频录制结束后，电子设备将录制的视频以视频文件的形式存储。然后，用户再使用电子设备对存储的视频文件进行后期处理，如将图片、动画等穿插到视频中。在一些实施例中，电子设备可以响应于用户对视频编辑软件的操作，对视频录制应用录制的视频进行后期编辑，将图片、动画等穿插到视频中。例如，如图1所示，视频录制应用响应于接收到的用户的录制视频的操作，启动摄像头和麦克风，并将相应的视频录制参数传递给视频处理组件、相应的音频录制参数传递给音频处理组件。由摄像头进行视频图像采集，然后由视频处理组件根据视频录制参数，对采集的图像进行处理，录制视频；由麦克风进行声音信号采集，然后由音频处理组件根据音频录制参数，对采集的声音信号进行处理，录制音频，将录制的视频和录制的音频进行合成得到包含视频和音频的视频文件。但是视频文件中不包括用户需要的图片、动画、音频特效等。最后，电子设备对上述得到的视频文件进行后期处理，将图片、动画、音频特效等编辑到视频文件中，从而得到用户需要的小视频。然而，由于图1所示的视频录制方法中，需要通过视频编辑软件后期处理才能得到用户需要的包含图片、动画、音频特效等的小视频，而视频编辑软件使用门槛高、工作量大，很多用户不熟悉、甚至不会使用，导致小视频的制作不够便捷、高效。有鉴于此，本申请实施例提供了一种视频录制方法，使得电子设备可以在视频录制的过程中穿插相应的图片、动画、音频特效等，实现对视频的边录制边编辑，从而可以在视频录制结束后，得到用户需要的小视频，有助于简化实现方式，便于用户使用，提高用户体验。下面将结合附图，对本申请实施例中的技术方案进行清楚、完整地描述。为了便于本领域技术人员理解，首先对本申请实施例中的部分用语进行解释说明。1)、音素，音素是根据语音的自然属性划分出来的最小语音单位，依据音节里的发音动作来分析，一个动作构成一个音素，如b、p、m、f等。音节在语音学上指一个或数个音素组成的语音结构基本单位，在汉语中一般一个汉字的读音即为一个音节，如“普通话”，由三个音节组成，可分解成“p，u，t，o，ng，h，u，a”八个音素。2)、声学模型和语言模型，声学模型是语音识别系统中最为重要的部分之一，是把语音的声学特征对应到音素的模型。语言模型，是描述词汇概率分布的模型，反映语言识别时用词的概率分布的模型，语言模型在语音识别、机器翻译等领域得到了广泛应用。例如，利用语言模型能够得到语音识别多种假设词序列中可能性最大的一个词序列，比如：利用语音模型，可以在发音序列可以满足的语句或者单词序列构成的空间中，搜索概率最高的语句或者单词序列。常用的语言模型包括n-gram lm等。另外，应理解，本申请实施例中“至少一个”是指一个或者多个。“多个”是指两个或两个以上。“和/或”，描述关联对象的关联关系，表示可以存在三种关系。例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B的三种情况。其中A、B可以是单数或者复数。字符“/”一般表示前后关联对象是一种“或”的关系。“以下至少一个”或其类似表达，是指的这些项中的任意组合，包括单项或复数项的任意组合。例如，a、b或c中的至少一项，可以表示：a，b，c，a和b，a和c，b和c，或a、b和c七种情况。其中a、b、c中的每一个本身可以是元素，也可以是包含一个或多个元素的集合。在本申请中，“示例的”、“在一些实施例中”、“在另一些实施例中”等用于表示作例子、例证或说明。本申请中被描述为“示例”的任何实施例或设计方案不应被解释为比其它实施例或设计方案更优选或更具优势。确切而言，使用示例的一词旨在以具体方式呈现概念。需要指出的是，本申请实施例中涉及的“第一”、“第二”等词汇，仅用于区分描述的目的，而不能理解为指示或暗示相对重要性，也不能理解为指示或暗示顺序。本申请实施例的电子设备可以为便携式终端，例如手机、平板电脑、便携式计算机、可穿戴式电子设备等。示例性的，便携式终端包括但不限于搭载鸿蒙或其他操作系统。此外，本申请实施例的电子设备还可以不是便携式终端，例如台式计算机等，对此不作限定。示例的，如图2所示，为本申请实施例的一种电子设备的硬件结构示意图。具体的，如图所示，电子设备包括处理器110、外部存储器接口120、内部存储器121、通用串行总线接口130、充电管理模块140、电源管理模块141、电池142、天线1、天线2、移动通信模块150、无线通信模块160、音频模块170、扬声器170A、受话器170B、麦克风170C、耳机接口170D、传感器模块180、按键190、马达191、指示器192、摄像头193、显示屏194、以及用户标识模块卡接口195等。其中，传感器模块180可以包括压力传感器、陀螺仪传感器、气压传感器、磁传感器、加速度传感器、距离传感器、接近光传感器、指纹传感器、温度传感器、触摸传感器、环境光传感器、骨传导传感器等。处理器110可以包括一个或多个处理单元。例如：处理器110可以包括应用处理器、调制解调器、图形处理器、图像信号处理器、控制器、视频编解码器、数字信号处理器、基带处理器、和/或神经网络处理器等。其中，不同的处理单元可以是独立的器件，或者，两个或更多个不同的处理单元也可以集成在一个器件中。处理器110中还可以设置存储器，用于存储计算机程序和/或数据。在一些实施例中，处理器110中的存储器为高速缓冲存储器。该存储器可以保存处理器110刚用过或循环使用的计算机程序和/或数据。如果处理器110需要再次使用该计算机程序和/或数据，可从所述存储器中直接调用。避免了重复存取，减少了处理器110的等待时间，因而提高了系统的效率。在一些实施例中，处理器110可以包括一个或多个接口。例如，处理器110包括通用串行总线接口130、用户标识模块接口195。再例如，处理器110还可以包括集成电路接口、集成电路内置音频接口、脉冲编码调制接口、通用异步收发传输器接口、移动产业处理器接口、和/或通用输入输出接口等。可以理解的是，本申请实施例示意的各模块间的接口连接关系，只是示意性说明，并不构成对电子设备的结构限定。在本申请另一些实施例中，电子设备也可以采用上述实施例中不同的接口连接方式，或多种接口连接方式的组合。USB接口130是符合USB标准规范的接口，具体可以是Mini USB接口、Micro USB接口、USB Type C接口等。USB接口130可以用于连接充电器为电子设备充电，也可以用于电子设备与外围设备之间传输数据。也可以用于连接耳机，通过耳机播放音频。该接口还可以用于连接其他电子设备，例如增强现实设备等。SIM卡接口195用于连接SIM卡。SIM卡可以通过插入SIM卡接口195，或从SIM卡接口195拔出，实现和电子设备的接触和分离。电子设备可以支持2个或N个SIM卡接口，N为大于2的正整数。SIM卡接口195可以支持Nano SIM卡、Micro SIM卡、SIM卡等。同一个SIM卡接口195可以同时插入多张卡。所述多张卡的类型可以相同，也可以不同。SIM卡接口195也可以兼容不同类型的SIM卡。SIM卡接口195也可以兼容外部存储卡。电子设备通过SIM卡和网络交互，实现通话以及数据通信等功能。在一些实施例中，电子设备采用eSIM，即：嵌入式SIM卡。eSIM卡可以嵌在电子设备中，不能和电子设备分离。充电管理模块140用于从充电器接收充电输入。其中，充电器可以是无线充电器，也可以是有线充电器。在一些有线充电的实施例中，充电管理模块140可以通过USB接口130接收有线充电器的充电输入。在一些无线充电的实施例中，充电管理模块140可以通过电子设备的无线充电线圈接收无线充电输入。充电管理模块140为电池142充电的同时，还可以通过电源管理模块141为电子设备供电。电源管理模块141用于连接电池142、充电管理模块140与处理器110。电源管理模块141接收电池142和/或充电管理模块140的输入，为处理器110、内部存储器121、外部存储器、显示屏194、摄像头193和无线通信模块160等供电。电源管理模块141还可以用于监测电池容量、电池循环次数、电池健康状态等参数。在其他一些实施例中，电源管理模块141也可以设置于处理器110中。在另一些实施例中，电源管理模块141和充电管理模块140也可以设置于同一个器件中。电子设备的无线通信功能可以通过天线1、天线2、移动通信模块150、无线通信模块160、调制解调器以及基带处理器等实现。天线1和天线2用于发射和接收电磁波信号。电子设备中的每个天线可用于覆盖单个或多个通信频带。不同的天线还可以复用，以提高天线的利用率。例如：可以将天线1复用为无线局域网的分集天线。在另外一些实施例中，天线可以和调谐开关结合使用。移动通信模块150可以提供应用在电子设备上的包括2G/3G/4G/5G/等制式的无线通信的解决方案。移动通信模块150可以包括至少一个滤波器、开关、功率放大器、低噪声放大器等。无线通信模块160包括可以提供应用在电子设备上的包括无线局域网、蓝牙、全球导航卫星系统、调频、近距离无线通信技术、红外技术等无线通信的解决方案。在一些实施例中，电子设备的天线1和移动通信模块150耦合，天线2和无线通信模块160耦合，使得电子设备可以通过无线通信技术与网络以及其他设备通信。所述无线通信技术可以包括全球移动通讯系统、通用分组无线服务、码分多址接入、宽带码分多址、时分码分多址、长期演进、BT、GNSS、WLAN、NFC、FM和/或IR技术等。所述GNSS可以包括全球卫星定位系统、全球导航卫星系统、北斗卫星导航系统、准天顶卫星系统和/或星基增强系统。电子设备通过GPU、显示屏194以及应用处理器等实现显示功能。显示屏194用于显示图像、视频等。显示屏194包括显示面板。显示面板可以采用液晶显示屏、有机发光二极管、有源矩阵有机发光二极体或主动矩阵有机发光二极体、柔性发光二极管、Miniled、MicroLed、Micro-oLed、量子点发光二极管等。在一些实施例中，电子设备可以包括1个或N个显示屏194，N为大于1的正整数。电子设备可以通过ISP、摄像头193、视频编解码器、GPU、显示屏194以及应用处理器等实现拍摄功能。ISP用于处理摄像头193反馈的数据。例如，拍照时，打开快门，光线通过镜头被传递到摄像头感光元件上，光信号转换为电信号，摄像头感光元件将所述电信号传递给ISP处理，转化为肉眼可见的图像。ISP还可以对图像的噪点，亮度，肤色进行算法优化。ISP还可以对拍摄场景的曝光、色温等参数优化。在一些实施例中，ISP可以设置在摄像头193中。摄像头193用于捕获静态图像或视频。物体通过镜头生成光学图像投射到感光元件。感光元件可以是电荷耦合器件或互补金属氧化物半导体光电晶体管。感光元件把光信号转换成电信号，之后将电信号传递给ISP转换成数字图像信号。ISP将数字图像信号输出到DSP加工处理。DSP将数字图像信号转换成标准的RGB，YUV等格式的图像信号。在一些实施例中，电子设备可以包括1个或N个摄像头193，N为大于1的正整数。外部存储器接口120可以用于连接外部存储卡，例如Micro SD卡，实现扩展电子设备的存储能力。外部存储卡通过外部存储器接口120与处理器110通信，实现数据存储功能。例如将音频、视频等文件保存在外部存储卡中。内部存储器121包括运行内存和内置存储器。其中，运行内存可以用于存储计算机程序和/或数据等。处理器110通过运行存储在运行内存的计算机程序，从而执行电子设备的各种功能应用以及数据处理。例如，运行内存可以包括高速随机存取存储器。而内置存储器又可以称之为内置外存等，可以用于存储计算机程序和/或数据。例如，内置存储器可以存储操作系统、应用程序等。电子设备通常将内置存储器中的计算机程序和/或数据加载到运行内存后，使得处理器110运行相应的计算机程序和/或数据，实现相应的功能。此外，内部存储器121可以包括非易失性存储器，例如至少一个磁盘存储器件、闪存器件、通用闪存存储器等。电子设备可以通过音频模块170、扬声器170A、受话器170B、麦克风170C、耳机接口170D、以及应用处理器等实现音频功能。例如音乐播放、录音等。按键190包括开机键、音量键等。按键190可以是机械按键。也可以是触摸式按键。电子设备可以接收按键输入，产生与电子设备的用户设置以及功能控制有关的键信号输入。马达191可以产生振动提示。马达191可以用于来电振动提示，也可以用于触摸振动反馈。例如，作用于不同应用的触摸操作，可以对应不同的振动反馈效果。作用于显示屏194不同区域的触摸操作，马达191也可对应不同的振动反馈效果。不同的应用场景也可以对应不同的振动反馈效果。触摸振动反馈效果还可以支持自定义。指示器192可以是指示灯，可以用于指示充电状态、电量变化，也可以用于指示消息、未接来电、通知等。可以理解的是，本申请实施例示意的结构并不构成对电子设备的具体限定。在本申请另一些实施例中，电子设备可以包括比图示更多或更少的部件，或者组合某些部件，或者拆分某些部件，或者不同的部件布置。图示的部件可以以硬件，软件或软件和硬件的组合实现。下面结合视频录制过程中穿插或添加图片、动画、音频特效等场景，对本申请实施例的视频录制过程进行详细介绍。场景一：视频录制过程中穿插视频内容相关的图片或动画等。以支持视频“边录制边编辑”的视频录制应用为例，如图3所示，为电子设备显示界面300。界面300为视频录制应用的视频录制界面，包括图像预览框301、视频录制模式选择菜单302和虚拟按键303。其中，图像预览框301用于预览摄像头采集的图像。虚拟按键303用于控制启动或停止视频录制。视频录制模式选择菜单302用于选择视频录制模式，本申请实施例以边录制边编辑模式为例进行说明。可以理解的是，视频录制应用的视频录制界面上还可以包括其它控件，例如用于控制前后摄像头切换的虚拟按键等。将电子设备的摄像头对准讲述人后，电子设备中的视频录制应用可以响应于用户录制视频的操作，启动摄像头和麦克风，并将相应的视频录制参数传递给视频处理组件、相应的音频录制参数传递给音频处理组件，开启视频录制。由摄像头进行视频图像采集，然后由视频处理组件根据视频录制参数，对采集的图像进行处理，录制视频；由麦克风进行声音信号采集，然后由音频处理组件根据音频录制参数，对采集的声音信号进行处理，录制音频，通过对录制的视频和音频合成得到视频文件。在进行视频录制的同时，视频录制应用会对录制的音频进行实时检测，即实时检测讲述人讲述的内容，如果在录制的音频中检测到第一词库中的任一第一关键词，视频录制应用获取该第一关键词关联的图片或动画，将在检测到该第一关键词之后录制的部分视频帧替换为该第一关键词关联的图片或动画。如图4所示，电子设备的摄像头对准讲述人后，电子设备中的视频录制应用可以响应于用户录制视频的操作，开启视频录制。开启视频录制后，录制的视频中首先显示的是讲述人视角，随着讲述人的讲述，当视频录制应用检测到录制的音频中出现第一词库中的第一关键词1时，电子设备可以获取第一关键词1关联的图片或动画，将检测到第一关键词1的录制时刻之后录制的部分视频帧，替换为第一关键词1关联的图片或动画，电子设备显示第一关键词1关联的图片或动画；电子设备显示完第一关键词1关联的图片或动画后，切换回讲述人视角，随着讲述人的继续讲述，当视频录制应用检测到录制的音频中出现第一词库中的第一关键词2时，电子设备获取第一关键词2关联的图片或动画，将检测到第一关键词2的录制时刻之后录制的部分视频帧，替换为第一关键词2关联的图片或动画，电子设备显示第一关键词2关联的图片或动画，电子设备显示完第一关键词2关联的图片或动画后，切换回讲述人视角，以此类推，直至视频录制结束。需要理解的是，视频录制应用中维护有与图片或动画关联的第一词库，第一词库中存储有一个或多个与图片或动画关联的第一关键词，如倒计时、鼓掌等关键词，其中第一词库中的第一关键词可以由视频录制应用从视频录制应用对应的应用服务器获取，也可以由用户自行配置，本申请实施例不做限定。具体的，视频录制应用实时检测录制的音频中是否包含第一词库中的第一关键词，可采取如下方式：如图5所示，以当前录制时刻为00:01:10为例，视频录制应用可以在录制的音频中抽取以当前录制时刻为结束的设定时长的音频帧，如抽取录制的音频中录制时刻为00:01:07-00:01:10的音频帧，提取抽取的音频帧的声学特征，将声学特征输入到声学模型进行处理，得到声学特征对应的音素序列，通过语言模型对得到的音素序列进行处理得到音素序列对应的词语。视频录制应用搜索、识别得到的词语是否属于第一词库中的第一关键词，如果是，则确定检测到第一词库中的第一关键词，否则，不做处理。如图6所示，当视频录制应用检测到录制的音频中出现第一词库中的第一关键词时，视频录制应用可以从云上获取该第一关键词关联的图片或动画，如从视频录制应用对应的应用服务器上获取该第一关键词关联的图片或动画，在图片或动画搜索引擎上搜索与该第一关键词匹配度最高的图片或动画等。视频录制应用获取到该第一关键词关联的图片或动画后，视频录制应用将当前录制时刻之后录制的部分视频帧替换为该第一关键词关联的图片或动画。其中，如果与第一关键词关联的是动画，视频录制应用可以将当前录制时刻之后录制的与该动画相同数量的视频帧替换为该动画的视频帧，如果与第一关键词关联的是图片，视频录制应用可以将当前录制时刻之后录制的设定数量的视频帧替换为第一关键词关联的图片。另外，对于第一关键词关联的图片或动画，视频录制应用还可以记录替换的图片或动画的起始位置和结束位置，并保存被图片或动画替换的视频帧。在视频录制完成后，用户还可以调整第一关键词关联的图片或动画在录制的视频中的起始位置和/或结束位置等。如图7所示，在视频录制完成后，视频录制应用可以进入视频编辑界面，视频录制应用展示录制的视频，用户可以通过拖动第一关键词关联的图片或动画的起始位置和/或结束位置，决定第一关键词关联的图片或动画在录制的视频中的起始位置和/或结束位置，并可通过双击第一关键词关联的图片或动画，进入第一关键词关联的图片或动画替换界面，视频录制应用可以显示电子设备的相册里保存的图片或动画供用户选择，用户选择后，将录制的视频中相应的图片或动画替换为用户选择的图片或动画。另外，用户也可以通过长按第一关键词关联的图片或动画直接取消第一关键词关联的图片或动画，将第一关键词关联的图片或动画恢复为录制的视频中被图片或动画替换的视频帧。用户编辑完成后，如视频录制应用超过设定时长未检测到用户的操作后，视频录制应用可以弹出编辑完成确认界面。如果用户选择确定，则视频录制应用清除掉图片或动画的起始位置和结束位置的标志位保证和其它视频应用的兼容性，如果用户选择取消，则返回可供用户可对录制的视频编辑的界面，并重新计算未检测到用户的操作的时长。如图8所示，讲述人口述：“给大家几秒钟的时间思考一下”后，视频录制应用检测到第一关键词“给大家几秒钟”，这时在后面的视频中会出现与“给大家几秒钟”关联的倒计时动画，如将“倒计时开始”的图片，显示一秒钟之后，进入到倒计时的界面，倒计时结束之后回归到讲述人视角。场景二：视频录制过程中穿插音频特效等。在视频录制应用中还可以维护有与音频特效关联的第二词库，第二词库中存储有一个或多个与音频特效关联的第二关键词，如钱、大风等关键词，其中第二词库中的第二关键词可以由视频录制应用从视频录制应用对应的应用服务器获取，也可以由用户自行配置，本申请实施例不做限定。其中，视频录制应用实时检测录制的音频中是否包含第二词库中的第二关键词的实现，可以参照上述视频录制应用实时检测录制的音频中是否包含第一词库中的第一关键词的实现，不再进行赘述。如图9所示，当视频录制应用检测到录制的音频中出现第二词库中的第二关键词时，视频录制应用可以从云上获取该第二关键词关联的音频特效，如从视频录制应用对应的应用服务器上获取该第二关键词关联的音频特效，在音频特效搜索引擎上搜索与该第二关键词匹配度最高的音频特效等。视频录制应用获取到该第二关键词关联的音频特效后，视频录制应用将当前录制时刻之后录制的部分音频帧替换为该第二关键词关联的音频帧。其中，视频录制应用可以将当前录制时刻之后与该音频特效相同数量的音频帧替换为该音频特效的音频帧。作为一种示例，如果讲述人讲述“花费xxx钱”，视频录制应用检测到第二关键词“钱”时，会加上音频特效“哗啦啦”的钱币声音。另外，考虑到录制的音频中可能会出现如“谩骂”等需要屏蔽“BI”掉的第二关键词，在维护的与音频特效关联的第二词库中，对于存储的每个第二关键词还可以保存有第二关键词的类型，例如：类型A的第二关键词为非敏感的关键词，类型B的第二关键词为敏感的关键词。对于类型A的第二关键词，当视频录制应用检测到录制的音频中出现类型A的第二关键词后，将检测到类型A的第二关键词之后录制的部分音频帧替换为该第二关键词关联的音频特效；对于类型B的第二关键词，当视频录制应用检测到录制的音频中出现类型B的第二关键词后，将包含类型B的第二关键词的部分音频帧替换为该第二关键词关联的音频特效。其中对于类型B的第二关键词关联的音频特效可以是无声特效、或者其它屏蔽音效，以实现对敏感的第二关键词的屏蔽。场景三：视频录制过程中添加视频特效。在视频录制应用中还可以维护有与视频特效关联的手势库。其中，手势库中的关键手势可以由视频录制应用从视频录制应用对应的应用服务器获取。视频录制应用对录制的视频进行实时检测，实时检测录制的视频中是否包含手势库中的关键手势。具体的，视频录制应用实时检测录制的视频中是否包含手势库中的手势，可采取如下方式：如图10所示，仍以当前录制时刻为00:01:10为例，视频录制应用可以抽取当前录制时刻的视频帧，识别当前录制时刻的视频帧中是否存在与手势库的关键手势相匹配的图像区域，如果存在与手势库中的关键手势匹配的图像区域，确定当前录制时刻的视频帧中存在关键手势，视频录制应用将当前录制时刻的视频帧缓存至视频缓冲队列，并将当前录制时刻的视频帧之后录制的包含该关键手势的视频帧缓存至视频缓冲队列，直至录制的视频帧中不再包含该关键手势为止。另外，在检测到当前录制时刻的视频帧中存在关键手势后，视频录制应用会弹出在该视频帧中添加了关键手势对应的视频特效的预览界面，供用户对视频特效进行调整。例如：对于关键词显示、特效文字、水印等视频特效，用户可以拖拽视频特效到预览的任何位置，用户还可以通过双击视频特效进行选定，长按视频特效进行取消等。在用户选定视频特效后，视频录制应用会根据为该视频帧添加的视频特效，为该视频帧之后视频缓冲队列中缓存的包含上述关键手势的视频帧分别添加相同的视频特效，并对添加了视频特效的视频帧进行纹理混合，如使用开放图形库进行纹理混合，生成具有新纹理的视频帧，从而将视频特效添加至视频中。如图11所示，如果视频录制应用，在录制的视频中实时检测到双手展开的关键手势后，视频录制应用会对当前录制时刻之后录制的设定时长的音频帧进行检测，检测音频帧中是否包含关键词，如检测音频帧中是否包含第三词库中的第三关键词，或检测音频帧中是否如包含第一词库和/或第二词库中的第一关键词和/或第二关键词等，如果包含关键词，以包含的关键词为“好物、分享”分例，视频录制应用会弹出在检测到双手展开的关键手势的视频帧上添加了关键词“好物、分享”的预览界面，同时会将检测到双手展开的关键手势的视频帧以及该视频帧之后包括双手展开的关键手势的视频帧缓存至视频缓冲队列中。用户可以在预览界面拖拽“好物、分享”改变其位置，双击“好物、分享”即选定。视频录制应用会根据“好物、分享”在该视频帧中的位置，为该视频帧之后视频缓冲队列中缓存的包含双手展开的关键手势的视频帧分别添加关键词“好物、分享”，并对添加了关键词“好物、分享”的视频帧进行纹理混合，生成具有新纹理的视频帧，从而将关键词“好物、分享”添加至视频中。如图12所示的预览界面，视频录制应用在录制的视频中实时检测到竖大拇指的关键手势后，会在弹出在检测到竖大拇指的关键手势的视频帧上添加了特效文字“棒棒哒”的预览界面，用户可以在预览界面拖拽“棒棒哒”改变“棒棒哒”的位置，双击“棒棒哒”即选定特效文字。在另一种可能的实施中，如图13所示，在检测到当前录制时刻的视频帧中存在关键手势后，视频录制应用会记录当前录制时刻的视频帧对应的时间戳，并弹出在该视频帧上添加关键手势对应的视频特效的预览界面，供用户对视频特效进行调整。在用户选定视频特效后，视频录制应用根据该视频帧对应的时间戳，以该视频帧为开始，读取并检测该视频帧之后的包含该关键手势的视频帧，直至视频帧中不再包含该关键手势为止。并根据为该视频帧添加的视频特效，为该视频帧之后包含该关键手势的视频帧分别添加该视频特效，并对添加了视频特效的视频帧进行纹理混合，如使用OpenGL进行纹理混合，生成具有新纹理的视频帧，从而将视频特效添加至视频中。在又一种可能的实施中，如图14所示，视频录制应用在检测到录制的视频中包含手势库中的关键手势后，可以记录录制的视频中检测到关键手势的视频帧的时间戳以及对应的关键手势到视频特效选择位图中，用户可以在视频录制完成后，通过视频特效选择位图选择需要编辑的视频帧的时间戳，进入添加视频特效的预览界面，在用户在预览界面选定视频特效后，视频录制应用会根据为该视频帧添加的视频特效，为该视频帧之后包含该关键手势的视频帧分别添加该视频特效，并对添加了视频特效的视频帧进行混合，生成具有新纹理的视频帧，从而将视频特效添加至视频中。需要理解的是，如果视频文件不是以帧数据形式存在，视频录制应用可以通过编解码器，将视频文件中的部分或全部数据解码为帧数据形式，并在对帧数据处理完成后再通过编解码器编码还原。此外，视频录制应用还可以响应用户快录的操作，根据快录倍数，间隔丢弃录制视频和音频中的视频帧和音频帧；还可以响应用户慢录的操作，根据慢录倍数，调整录制的视频和音频中的视频帧和音频帧的切换速率。需要说明的是，在本申请实施例中，视频录制结束可以是用户通过操作触发的，也可以是电子设备在启动视频录制达到预设时长后，自动结束的，对此不作限定。上述各场景视频录制过程中穿插或添加图片、动画、音频特效的实现可以单独使用，也可以相互结合使用，以实现不同的技术效果，对此不作限定。另外，本申请实施例中涉及的视频录制场景，不仅限于电子设备通过视频录制应用对外界目标进行视频录制的场景，如对讲述人进行视频录制；还包括电子设备通过视频录制应用进行录屏等场景，如在用户进行视频通话时，电子设备通过视频录制应用对电子设备的屏幕以及用户的通话内容进行录制等。应理解，上述是以视频录制应用为例对本申请实施例视频录制方法进行介绍的，本申请实施例不限定使用视频录制应用，上述视频录制方法还可以应用于短视频应用等，对此不作限定。上述本申请提供的实施例中，从电子设备作为执行主体的角度对本申请实施例提供的方法进行了介绍。为了实现上述本申请实施例提供的方法中的各功能，电子设备可以包括硬件结构和/或软件模块，以硬件结构、软件模块、或硬件结构加软件模块的形式来实现上述各功能。上述各功能中的某个功能以硬件结构、软件模块、还是硬件结构加软件模块的方式来执行，取决于技术方案的特定应用和设计约束条件。本申请实施例还提供了一种电子设备，如图15所示，包括一个或多个处理器1501、一个或多个存储器1502。存储器1502中存储有一个或多个计算机程序，当该一个或多个计算机程序被处理器1501执行时，使得电子设备执行本申请实施例提供的视频录制方法。进一步的，在一些实施例中，该电子设备还可以包括摄像头1503和麦克风1504。在另一些实施例中，该电子设备还可以包括显示屏1505，用于显示图形用户界面，例如媒体应用的界面。示例的，显示屏1505包括显示面板。显示面板可以采用液晶显示屏，有机发光二极管，有源矩阵有机发光二极体或主动矩阵有机发光二极体，柔性发光二极管，Miniled，MicroLed，Micro-oLed，量子点发光二极管等。此外，本申请实施例中的电子设备还可以包括扬声器、触摸传感器等，对此不作限定。本申请实施例中不限定上述处理器1501、存储器1502、摄像头1503、麦克风1504和显示屏1505之间的连接介质。例如，本申请实施例中处理器1501、存储器1502、摄像头1503、麦克风1504和显示屏1505之间可以通过总线连接，所述总线可以分为地址总线、数据总线、控制总线等。在本申请实施例中，处理器可以是通用处理器、数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件，可以实现或者执行本申请实施例中的公开的各方法、步骤及逻辑框图。通用处理器可以是微处理器或者任何常规的处理器等。结合本申请实施例所公开的方法的步骤可以直接体现为硬件处理器执行完成，或者用处理器中的硬件及软件模块组合执行完成。在本申请实施例中，存储器可以是非易失性存储器，比如硬盘或固态硬盘等，还可以是易失性存储器，例如随机存取存储器。存储器是能够用于携带或存储具有指令或数据结构形式的期望的程序代码并能够由计算机存取的任何其他介质，但不限于此。本申请实施例中的存储器还可以是电路或者其它任意能够实现存储功能的装置，用于存储程序指令和/或数据。以上实施例中所用，根据上下文，术语“当…时”或“当…后”可以被解释为意思是“如果…”或“在…后”或“响应于确定…”或“响应于检测到…”。类似地，根据上下文，短语“在确定…时”或“如果检测到”可以被解释为意思是“如果确定…”或“响应于确定…”或“在检测到时”或“响应于检测到”。在上述实施例中，可以全部或部分地通过软件、硬件、固件或者其任意组合来实现。当使用软件实现时，可以全部或部分地以计算机程序产品的形式实现。所述计算机程序产品包括一个或多个计算机指令。在计算机上加载和执行所述计算机程序指令时，全部或部分地产生按照本发明实施例所述的流程或功能。所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。所述计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，所述计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线)或无线方式向另一个网站站点、计算机、服务器或数据中心进行传输。所述计算机可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集成的服务器、数据中心等数据存储设备。所述可用介质可以是磁性介质，、光介质、或者半导体介质)等。在不冲突的情况下，以上各实施例的方案都可以组合使用。需要指出的是，本专利申请文件的一部分包含受著作权保护的内容。除了对专利局的专利文件或记录的专利文档内容制作副本以外，著作权人保留著作权。
