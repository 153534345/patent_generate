标题title
实例配置更新方法、装置、设备、存储介质及程序产品
摘要abst
本公开提供了实例配置更新方法、相关装置及计算机程序产品，涉及内容分发网络、集群配置等媒体云技术领域。该方法包括：针对节点包括的多个服务器，基于一致性哈希确定代表服务器；针对服务器上运行的多个实例，基于一致性哈希确定服务器代表实例，并将代表服务器的服务器代表实例确定为节点代表实例；向服务器普通实例下发用于指示仅向同服务器的服务器代表实例发起配置更新请求的第一控制参数；向服务器代表实例下发用于指示仅向节点代表实例发起配置更新请求的第二控制参数。该方法通过发起对象的转移极大的减少了控制台处理请求的数量，而更少的请求处理数量也将缩短处理等待耗时、缩短新配置的生效耗时。
权利要求书clms
1.一种实例配置更新方法，包括：针对节点包括的多个服务器，基于一致性哈希确定代表服务器；针对所述服务器上运行的多个实例，基于一致性哈希确定服务器代表实例，并将所述代表服务器的服务器代表实例确定为节点代表实例；向非所述服务器代表实例的服务器普通实例下发第一控制参数；其中，所述第一控制参数用于指示所述服务器普通实例仅向同服务器的服务器代表实例发起配置更新请求；向所述服务器代表实例下发第二控制参数；其中，所述第二控制参数用于指示所述服务器代表实例仅向所述节点代表实例发起配置更新请求。2.根据权利要求1所述的方法，还包括：响应于所述节点代表实例未设置配置更新请求的默认发起对象，向所述节点代表实例下发第三控制参数；其中，所述第三控制参数用于指示所述节点代表实例仅向控制台发起配置更新请求。3.根据权利要求1所述的方法，其中，所述针对节点包括的多个服务器，基于一致性哈希确定代表服务器，包括：针对节点包括的多个服务器，确定预设的服务器设定值在基于在线服务器数量构建的第一哈希环上的第一实际位置；将所述第一实际位置对应的服务器确定为所述代表服务器。4.根据权利要求1所述的方法，其中，所述针对所述服务器上运行的多个实例，基于一致性哈希确定服务器代表实例，包括：针对所述服务器上运行的多个实例，确定预设的实例设定值在基于在线实例数量构建的第二哈希环上的第二实际位置；将所述第二实例位置对应的实例确定为所述服务器代表实例。5.根据权利要求1-4任一项所述的方法，还包括：响应于节点包括的服务器数量超过预设的第一数量阈值，通过增加所述代表服务器的数量或增加所述代表服务器内的服务器代表实例的数量的方式，增加所述节点代表实例的数量；将多个所述节点代表实例的工作方式设置为主从模式。6.根据权利要求1-4任一项所述的方法，还包括：响应于所述服务器上运行的实例数量超过预设的第二数量阈值，增加所述服务器内的服务器代表实例的数量；将多个所述服务器代表实例的工作方式设置为主从模式。7.一种实例配置更新装置，包括：代表服务器确定单元，被配置成针对节点包括的多个服务器，基于一致性哈希确定代表服务器；代表实例确定单元，被配置成针对所述服务器上运行的多个实例，基于一致性哈希确定服务器代表实例，并将所述代表服务器的服务器代表实例确定为节点代表实例；第一控制参数下发单元，被配置成向非所述服务器代表实例的服务器普通实例下发第一控制参数；其中，所述第一控制参数用于指示所述服务器普通实例仅向同服务器的服务器代表实例发起配置更新请求；第二控制参数下发单元，被配置成向所述服务器代表实例下发第二控制参数；其中，所述第二控制参数用于指示所述服务器代表实例仅向所述节点代表实例发起配置更新请求。8.根据权利要求7所述的装置，还包括：第三控制参数下发单元，被配置成响应于所述节点代表实例未设置配置更新请求的默认发起对象，向所述节点代表实例下发第三控制参数；其中，所述第三控制参数用于指示使所述节点代表实例仅向控制台发起配置更新请求。9.根据权利要求7所述的装置，其中，所述代表服务器确定单元被进一步配置成：针对节点包括的多个服务器，确定预设的服务器设定值在基于在线服务器数量构建的第一哈希环上的第一实际位置；将所述第一实际位置对应的服务器确定为所述代表服务器。10.根据权利要求1所述的装置，其中，所述代表实例确定单元包括被配置成针对所述服务器上运行的多个实例，基于一致性哈希确定服务器代表实例的服务器代表实例确定子单元，所述服务器代表实例确定子单元被进一步配置成：针对所述服务器上运行的多个实例，确定预设的实例设定值在基于在线实例数量构建的第二哈希环上的第二实际位置；将所述第二实例位置对应的实例确定为所述服务器代表实例。11.根据权利要求7-10任一项所述的装置，还包括：节点代表实例增加单元，被配置成响应于节点包括的服务器数量超过预设的第一数量阈值，通过增加所述代表服务器的数量或增加所述代表服务器内的服务器代表实例的数量的方式，增加所述节点代表实例的数量；节点代表实例工作方式设置单元，被配置成将多个所述节点代表实例的工作方式设置为主从模式。12.根据权利要求7-10任一项所述的装置，还包括：服务器代表实例增加单元，被配置成响应于所述服务器上运行的实例数量超过预设的第二数量阈值，增加所述服务器内的服务器代表实例的数量；服务器代表实例工作方式设置单元，被配置成将多个所述服务器代表实例的工作方式设置为主从模式。13.一种请求处理系统，包括：代表选取及控制参数下发装置，用于针对节点包括的多个服务器，基于一致性哈希确定代表服务器；针对所述服务器上运行的多个实例，基于一致性哈希确定服务器代表实例，并将所述代表服务器的服务器代表实例确定为节点代表实例；向非所述服务器代表实例的服务器普通实例下发第一控制参数；向所述服务器代表实例下发第二控制参数；所述服务器普通实例，用于根据接收到的第一控制参数仅向同服务器的服务器代表实例发起配置更新请求；所述服务器代表实例，用于根据接收到的第二控制参数仅向所述节点代表实例发起配置更新请求。14.一种电子设备，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-6中任一项所述的实例配置更新方法。15.一种存储有计算机指令的非瞬时计算机可读存储介质，所述计算机指令用于使所述计算机执行权利要求1-6中任一项所述的实例配置更新方法。16.一种计算机程序产品，包括计算机程序，所述计算机程序被处理器执行时实现根据权利要求1-6中任一项所述实例配置更新方法的步骤。
说明书desc
技术领域本公开涉及数据处理技术领域，具体涉及内容分发网络、集群配置等媒体云技术领域，尤其涉及一种实例配置更新方法、装置、电子设备、计算机可读存储介质及计算机程序产品。背景技术CDN依靠部署在各地的边缘服务器，通过控制中心的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。构成CDN的每个节点通常包括多个服务器，而为了提高服务器的性能利用率，通常通过虚拟化技术根据服务器资源创建出多个业务实例。对于每一个实例，考虑到业务灵活性的需要，实例中很多业务参数并非硬编码，而是通过动态配置下发的方式来确定。每一个实例出于保证配置最新的需要，都会不定期地去控制中心 拉取最新的配置，即每个实例发起配置请求的对象均为控制中心。发明内容本公开实施例提出了一种实例配置更新方法、装置、电子设备、计算机可读存储介质及计算机程序产品。第一方面，本公开实施例提出了一种实例配置更新方法，包括：针对节点包括的多个服务器，基于一致性哈希确定代表服务器；针对服务器上运行的多个实例，基于一致性哈希确定服务器代表实例，并将代表服务器的服务器代表实例确定为节点代表实例；向非服务器代表实例的服务器普通实例下发第一控制参数；其中，第一控制参数用于指示服务器普通实例仅向同服务器的服务器代表实例发起配置更新请求；向服务器代表实例下发第二控制参数；其中，第二控制参数用于指示服务器代表实例仅向节点代表实例发起配置更新请求。第二方面，本公开实施例提出了一种实例配置更新装置，包括：代表服务器确定单元，被配置成针对节点包括的多个服务器，基于一致性哈希确定代表服务器；代表实例确定单元，被配置成针对服务器上运行的多个实例，基于一致性哈希确定服务器代表实例，并将代表服务器的服务器代表实例确定为节点代表实例；第一控制参数下发单元，被配置成向非服务器代表实例的服务器普通实例下发第一控制参数；其中，第一控制参数用于指示服务器普通实例仅向同服务器的服务器代表实例发起配置更新请求；第二控制参数下发单元，被配置成向服务器代表实例下发第二控制参数；其中，第二控制参数用于指示服务器代表实例仅向节点代表实例发起配置更新请求。第三方面，本公开实施例提供了一种电子设备，该电子设备包括：至少一个处理器；以及与至少一个处理器通信连接的存储器；其中，存储器存储有可被至少一个处理器执行的指令，该指令被至少一个处理器执行，以使至少一个处理器执行时能够实现如第一方面中任一实现方式描述的实例配置更新方法。第四方面，本公开实施例提供了一种存储有计算机指令的非瞬时计算机可读存储介质，该计算机指令用于使计算机执行时能够实现如第一方面中任一实现方式描述的实例配置更新方法。第五方面，本公开实施例提供了一种包括计算机程序的计算机程序产品，该计算机程序在被处理器执行时能够实现如第一方面中任一实现方式描述的实例配置更新方法。本公开实施例通过基于一致性哈希的方式，得以在每个CDN节点包含的多个服务器中选取出代表服务器、在相同服务器承载的多个实例中选取出服务器代表实例和节点代表实例，并通过向不同的实例下发不同的控制参数，将不同实例发起配置请求的对象进行调整，即服务器内的普通实例仅向服务器代表实例发起配置更新请求、服务器代表实例仅向节点代表实例发起配置更新请求，因此仅剩节点代表实例会向控制台发起配置更新请求，即通过发起对象的转移，极大的减少了控制台处理请求的数量，而更少的请求处理数量也将缩短处理等待耗时、缩短新配置的生效耗时。应当理解，本部分所描述的内容并非旨在标识本公开的实施例的关键或重要特征，也不用于限制本公开的范围。本公开的其它特征将通过以下的说明书而变得容易理解。附图说明通过阅读参照以下附图所作的对非限制性实施例所作的详细描述，本公开的其它特征、目的和优点将会变得更明显：图1是本公开可以应用于其中的示例性系统架构；图2为本公开实施例提供的一种实例配置更新方法的流程图；图3为本公开实施例提供的另一种实例配置更新方法的流程图；图4为本公开实施例提供的一种实例配置更新装置的结构框图；图5为本公开实施例提供的一种适用于执行实例配置更新方法的电子设备的结构示意图。具体实施方式以下结合附图对本公开的示范性实施例做出说明，其中包括本公开实施例的各种细节以助于理解，应当将它们认为仅仅是示范性的。因此，本领域普通技术人员应当认识到，可以对这里描述的实施例做出各种改变和修改，而不会背离本公开的范围和精神。同样，为了清楚和简明，以下的描述中省略了对公知功能和结构的描述。需要说明的是，在不冲突的情况下，本公开中的实施例及实施例中的特征可以相互组合。本公开的技术方案中，所涉及的用户个人信息的收集、存储、使用、加工、传输、提供和公开等处理，均符合相关法律法规的规定，且不违背公序良俗。图1示出了可以应用本公开的实例配置更新方法、装置、电子设备及计算机可读存储介质的实施例的示例性系统架构100。如图1所示，系统架构100可以为包括多个节点的CDN，示例性的包括控制台101、第一节点102和第二节点103。其中，第一节点102和第二节点102均包括3台服务器，即第一节点包括服务器A、B、C，第二节点103包括服务器X、Y、Z，这6台服务器由同样承载有n个实例，分别以“服务器名-1～n的编号”的规则命名。每个节点和每个服务器上均可以安装有各种应用来实现各种功能，例如用于在服务器内的各实例间确定服务器代表实例、用于在节点内的各服务器间确定代表服务器的代表选取应用，用于各实例之间进行数据通信的数据传输应用、即时通讯类应用等。控制台101、第一节点102、第二节点103以及节点内包含的多台服务器可以是硬件，也可以是软件。当其为硬件时，可以实现成多个服务器组成的分布式服务器集群，也可以实现成单个服务器；当其为软件时，可以实现成多个软件或软件模块，也可以实现成单个软件或软件模块，在此不做具体限定。为了明确每个实例发起配置更新的对象，每个服务器可以通过运行该代表选取应用来实现如下技术效果：首先，针对节点包括的多个服务器，基于一致性哈希确定代表服务器；然后，针对服务器上运行的多个实例，基于一致性哈希确定服务器代表实例，并将代表服务器的服务器代表实例确定为节点代表实例；接下来，向非服务器代表实例的服务器普通实例下发第一控制参数、向服务器代表实例下发第二控制参数，进一步的，在通过向服务器普通实例下发第一控制参数后，服务器普通实例将根据生效的第一控制参数仅向同服务器的服务器代表实例发起配置更新请求；在通过向服务器代表实例下发第二控制参数后，服务器代表实例将根据生效的第二控制参数仅向节点代表实例发起配置更新请求。而节点代表实例将仍根据默认的控制参数向控制台发起配置更新请求。进而实现配置更新请求的发起对象的调整，而不再均为控制台。应该理解，图1中的控制台、节点、服务器、实例的数目仅仅是示意性的。根据实现需要，可以具有任意数目的控制台、节点、服务器、实例。请参考图2，图2为本公开实施例提供的一种实例配置更新方法的流程图，其中流程200包括以下步骤：步骤201：针对节点包括的多个服务器，基于一致性哈希确定代表服务器；本步骤旨在由实例配置更新方法的执行主体基于一致性哈希在节点内的多个服务器中确定用于代表该节点的代表服务器。一致性哈希算法将整个哈希值空间映射成一个虚拟的圆环，整个哈希空间的取值范围为0～232-1。整个空间按顺时针方向组织。0～232-1在零点中方向重合。接下来使用如下算法对服务请求进行映射，将服务请求使用哈希算法算出对应的hash值，然后根据hash值的位置沿圆环顺时针查找，第一台遇到的服务器就是所对应的处理请求服务器。当增加一台新的服务器，受影响的数据仅仅是新添加的服务器到其环空间中前一台的服务器之间的数据，其他都不会受到影响。综上所述，一致性哈希算法对于节点的增减都只需重定位环空间中的一小部分数据，具有较好的容错性和可扩展性。步骤202：针对服务器上运行的多个实例，基于一致性哈希确定服务器代表实例，并将代表服务器的服务器代表实例确定为节点代表实例；在步骤201的基础上，本步骤旨在由上述执行主体基于一致性哈希在服务器中的多个实例中确定用于代表该服务器的服务器代表实例，以及基于将代表服务器的服务器代表实例确定为节点代表实例。即代表服务器中的服务器代表实例是相对于代表服务器内的其它实例而言的，节点代表实例则是相当于节点内其它服务器的服务器代表实例而言的。区别于通过一致性哈希确定代表服务器的方式，确定服务器代表实例则只需要将构建哈希环的服务器数量改为实例数量即可，在根据服务请求算hash值时也需要变更为与实例相关的请求或其它参数。步骤203：向非服务器代表实例的服务器普通实例下发第一控制参数；在步骤202的基础上，本步骤旨在由上述执行主体向非服务器代表实例的服务器普通实例下发第一控制参数，以使服务器普通实例在生效的第一控制参数的指导下仅向同服务器的服务器代表实例发起配置更新请求。即可以理解为：第一控制参数用于指示将服务器普通实例的配置更新请求的发起对象调整为同服务器的服务器代表实例，而不再是控制台。步骤204：向服务器代表实例下发第二控制参数。在步骤202的基础上，本步骤旨在由上述执行主体向服务器代表实例下发第二控制参数，以使服务器代表实例在生效的第二控制参数的指导下仅向节点代表实例发起配置更新请求。即可以理解为：第二控制参数用于指示将服务器代表实例的配置更新请求的发起对象调整为代表服务器中的节点代表实例，而不再是控制台。本公开实施例提供的实例配置更新方法，通过基于一致性哈希的方式，得以在每个CDN节点包含的多个服务器中选取出代表服务器、在相同服务器承载的多个实例中选取出服务器代表实例和节点代表实例，并通过向不同的实例下发不同的控制参数，将不同实例发起配置请求的对象进行调整，即服务器内的普通实例仅向服务器代表实例发起配置更新请求、服务器代表实例仅向节点代表实例发起配置更新请求，因此仅剩节点代表实例会向控制台发起配置更新请求，即通过发起对象的转移，极大的减少了控制台处理请求的数量，而更少的请求处理数量也将缩短处理等待耗时、缩短新配置的生效耗时。请参考图3，图3为本公开实施例提供的另一种实例配置更新方法的流程图，其中流程300包括以下步骤：步骤301：针对节点包括的多个服务器，确定预设的服务器设定值在基于在线服务器数量构建的第一哈希环上的第一实际位置；步骤302：将第一实际位置对应的服务器确定为代表服务器；针对步骤201提供的上位方案，本实施例通过步骤301-步骤302提供了一种具体的下位实现方案，即通过预设的服务器设定值来在基于在线服务器数量构建的第一哈希环上的第一实际位置。该方式使得在线服务器数量不变的情况下，按照相同的服务器设定值将保持第一实际位置相同，进而使得每次确定出的代表服务器相同，而代表服务器的保持性也将尽可能的避免其他非代表服务器从代表服务器中获取信息的连贯性、一致性，有利于保持配置最新。步骤303：针对服务器上运行的多个实例，确定预设的实例设定值在基于在线实例数量构建的第二哈希环上的第二实际位置；步骤304：将第二实例位置对应的实例确定为服务器代表实例；针对步骤202提供的上位方案，本实施例通过步骤303-步骤304提供了一种具体的下位实现方案，即通过预设的实例设定值来在基于在线实例数量构建的第二哈希环上的第二实际位置。与步骤301-步骤302类似，只不过由于代表对象由服务器变更为实例，因此也需要基于不同的设定值来实现代表实例的连贯性。需要说明的是，若代表服务器或代表实例因异常掉线，哈希环将因数量变更在相同的设定值的情况下将另一服务器或另一实例确定为新的代表服务器或代表实例，也能够实现代表服务器或代表实例的替换。若因异常掉线的代表服务器或代表实例再次上限，基于相同的设定值将再次将其重新确定为代表服务器或代表实例，进而实现代表服务器和代表实例的连贯性、一致性，有利于保持配置最新。步骤305：向非服务器代表实例的服务器普通实例下发第一控制参数；步骤306：向服务器代表实例下发第二控制参数；以上步骤305-306与如图2所示的步骤203-204一致，相同部分内容请参见上一实施例的相应部分，此处不再进行赘述。步骤307：响应于节点代表实例未设置配置更新请求的默认发起对象，向节点代表实例下发第三控制参数。本步骤旨在针对节点代表实例未设置配置更新请求的默认发起对象的情况，该情况通常出现在CDN内各节点的控制参数初次配置之前，即当前的节点代表实例还未进行默认发起对象的配置，因此需要向节点代表实例下发第三控制参数，即第三控制参数用于指示节点代表实例仅向控制台发起配置更新请求。区别于流程200，本实施例通过步骤301-步骤302和步骤303-步骤304，提供了基于固定的设定值来保持代表服务器或代表实例的实现方案，以避免基于动态设定值使得代表服务器或代表实例频繁变更所带来的问题；同时，还通过步骤307考虑到节点的控制参数还未经初次配置的情况，通过下发第三控制参数使节点代表实例仅向控制台发起配置更新请求，进而在节点代表实例从控制台获取到最新配置的情况下，其它实例根据第一控制参数、第二控制参数将能够依次获取到最新配置。应当理解的是，步骤301-步骤302、步骤303-步骤304，以及步骤307 之间并不存在因果和依赖关系，完全可以结合流程200形成不同的实施例，本实施例仅作为一个同时包含有上述三部分优选实现方案的优选实施例存在。在上述任意实施例的基础上，针对节点包括的服务器数量超过预设的第一数量阈值的情况，还可以通过增加代表服务器的数量或增加代表服务器内的服务器代表实例的数量的方式，来增加节点代表实例的数量，并通过将多个节点代表实例的工作方式设置为主从模式来保证正常工作。即通过增加节点代表实例的方式来避免单一的节点代表实例承担过大的请求处理压力。同理，针对服务器上运行的实例数量超过预设的第二数量阈值的情况，还可以增加服务器内的服务器代表实例的数量，并通过将多个服务器代表实例的工作方式设置为主从模式来保证正常工作。即通过增加服务器代表实例的方式来避免单一的服务器代表实例承担过大的请求处理压力。为加深理解，本公开还结合一个具体应用场景，给出了一种具体的实现方案，请参见如图1：1)通过基于服务器设定值的一致性哈希，将第一节点中的服务器B 确定为第一代表服务器、将第二节点中的服务器Y确定为第二代表服务器；2)通过基于实例设定值的一致性哈希，将各服务器中的编号为1的实例确定为服务器代表实例，服务器内的其余实例确定为服务器普通实例，并将第一代表服务器和第二代表服务器的编号为1的服务器代表实例分别确定为第一节点代表实例和第二节点代表实例；3)向服务器普通实例下发第一控制参数、向服务器代表实例下发第二控制参数、向节点代表实例下发第三控制参数；4)服务器普通实例根据生效的第一控制参数向服务器代表实例发起配置更新请求、相同节点下的服务器代表实例根据生效的第二控制参数向节点代表实例发起配置更新请求、每个节点的节点代表实例根据生效的第三控制参数向CDN的控制台发起配置更新请求。经过上述调整，控制台在单位时间内要处理的请求数量将从数十万量级降低到了数百量级，因此节点代表实例的配置请求间隔可以大大减少，缩短新配置在CDN上生效的时间。同时，控制台在下发配置文件时可以下发最新的配置文件本身和时间戳。当CDN实例发送拉取配置请求时，会携带自身所拥有配置的时间戳，控制台比对请求携带的时间戳和当前最新配置时间戳，如果相同，则直接返回304状态码表示对方配置已是最新；如果请求时间戳小于当前最新时间戳，则说明对方拥有的是旧版本配置，控制台会根据旧版时间戳找到该请求发送方所拥有的配置版本，通过差别算法，计算最新版本配置和旧版本配置的文件差异，并将差异描述文件下发给请求方。请求方在拿到差异描述文件后，和本地旧版配置文件进行更新运算，得到最新配置文件进行配置，即通过增量更新的方式减少数据传输量。进一步参考图4，作为对上述各图所示方法的实现，本公开提供了一种实例配置更新装置的一个实施例，该装置实施例与图2所示的方法实施例相对应，该装置具体可以应用于各种电子设备中。如图4所示，本实施例的实例配置更新装置400可以包括：代表服务器确定单元401、代表实例确定单元402、第一控制参数下发单元403、第二控制参数下发单元404。其中，代表服务器确定单元401，被配置成针对节点包括的多个服务器，基于一致性哈希确定代表服务器；代表实例确定单元402，被配置成针对服务器上运行的多个实例，基于一致性哈希确定服务器代表实例，并将代表服务器的服务器代表实例确定为节点代表实例；第一控制参数下发单元403，被配置成向非服务器代表实例的服务器普通实例下发第一控制参数；其中，第一控制参数用于指示服务器普通实例仅向同服务器的服务器代表实例发起配置更新请求；第二控制参数下发单元404，被配置成向服务器代表实例下发第二控制参数；其中，第二控制参数用于指示服务器代表实例仅向节点代表实例发起配置更新请求。在本实施例中，实例配置更新装置400中：代表服务器确定单元401、代表实例确定单元402、第一控制参数下发单元403、第二控制参数下发单元404的具体处理及其所带来的技术效果可分别参考图2对应实施例中的步骤201-204的相关说明，在此不再赘述。在本实施例的一些可选的实现方式中，实例配置更新装置400还可以包括：第三控制参数下发单元，被配置成响应于节点代表实例未设置配置更新请求的默认发起对象，向节点代表实例下发第三控制参数；其中，第三控制参数用于指示节点代表实例仅向控制台发起配置更新请求。在本实施例的一些可选的实现方式中，代表服务器确定单元401可以被进一步配置成：针对节点包括的多个服务器，确定预设的服务器设定值在基于在线服务器数量构建的第一哈希环上的第一实际位置；将第一实际位置对应的服务器确定为代表服务器。在本实施例的一些可选的实现方式中，代表实例确定单元402可以包括被配置成针对服务器上运行的多个实例，基于一致性哈希确定服务器代表实例的服务器代表实例确定子单元，服务器代表实例确定子单元可以被进一步配置成：针对服务器上运行的多个实例，确定预设的实例设定值在基于在线实例数量构建的第二哈希环上的第二实际位置；将第二实例位置对应的实例确定为服务器代表实例。在本实施例的一些可选的实现方式中，实例配置更新装置400还可以包括：节点代表实例增加单元，被配置成响应于节点包括的服务器数量超过预设的第一数量阈值，通过增加代表服务器的数量或增加代表服务器内的服务器代表实例的数量的方式，增加节点代表实例的数量；节点代表实例工作方式设置单元，被配置成将多个节点代表实例的工作方式设置为主从模式。在本实施例的一些可选的实现方式中，实例配置更新装置400还可以包括：服务器代表实例增加单元，被配置成响应于服务器上运行的实例数量超过预设的第二数量阈值，增加服务器内的服务器代表实例的数量；服务器代表实例工作方式设置单元，被配置成将多个服务器代表实例的工作方式设置为主从模式。本实施例作为对应于上述方法实施例的装置实施例存在，本实施例提供的实例配置更新装置通过基于一致性哈希的方式，得以在每个CDN 节点包含的多个服务器中选取出代表服务器、在相同服务器承载的多个实例中选取出服务器代表实例和节点代表实例，并通过向不同的实例下发不同的控制参数，将不同实例发起配置请求的对象进行调整，即服务器内的普通实例仅向服务器代表实例发起配置更新请求、服务器代表实例仅向节点代表实例发起配置更新请求，因此仅剩节点代表实例会向控制台发起配置更新请求，即通过发起对象的转移，极大的减少了控制台处理请求的数量，而更少的请求处理数量也将缩短处理等待耗时、缩短新配置的生效耗时。根据本公开的实施例，本公开还提供了一种电子设备，该电子设备包括：至少一个处理器；以及与至少一个处理器通信连接的存储器；其中，存储器存储有可被至少一个处理器执行的指令，该指令被至少一个处理器执行，以使至少一个处理器执行时能够实现上述任意实施例所描述的实例配置更新方法。根据本公开的实施例，本公开还提供了一种可读存储介质，该可读存储介质存储有计算机指令，该计算机指令用于使计算机执行时能够实现上述任意实施例所描述的实例配置更新方法。根据本公开的实施例，本公开还提供了一种计算机程序产品，该计算机程序在被处理器执行时能够实现上述任意实施例所描述的实例配置更新方法。图5示出了可以用来实施本公开的实施例的示例电子设备500的示意性框图。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本公开的实现。如图5所示，设备500包括计算单元501，其可以根据存储在只读存储器502中的计算机程序或者从存储单元508加载到随机访问存储器503中的计算机程序，来执行各种适当的动作和处理。在RAM 503中，还可存储设备500操作所需的各种程序和数据。计算单元501、ROM 502以及RAM 503通过总线504彼此相连。输入/输出 接口505也连接至总线504。设备500中的多个部件连接至I/O接口505，包括：输入单元506，例如键盘、鼠标等；输出单元507，例如各种类型的显示器、扬声器等；存储单元508，例如磁盘、光盘等；以及通信单元509，例如网卡、调制解调器、无线通信收发机等。通信单元509允许设备500通过诸如因特网的计算机网络和/或各种电信网络与其他设备交换信息/数据。计算单元501可以是各种具有处理和计算能力的通用和/或专用处理组件。计算单元501的一些示例包括但不限于中央处理单元、图形处理单元、各种专用的人工智能计算芯片、各种运行机器学习模型算法的计算单元、数字信号处理器、以及任何适当的处理器、控制器、微控制器等。计算单元501执行上文所描述的各个方法和处理，例如实例配置更新方法。例如，在一些实施例中，实例配置更新方法可被实现为计算机软件程序，其被有形地包含于机器可读介质，例如存储单元508。在一些实施例中，计算机程序的部分或者全部可以经由ROM 502和/或通信单元509而被载入和/或安装到设备500上。当计算机程序加载到RAM 503并由计算单元501执行时，可以执行上文描述的实例配置更新方法的一个或多个步骤。备选地，在其他实施例中，计算单元501可以通过其他任何适当的方式 而被配置为执行实例配置更新方法。本文中以上描述的系统和技术的各种实施方式可以在数字电子电路系统、集成电路系统、场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、负载可编程逻辑设备、计算机硬件、固件、软件、和/或它们的组合中实现。这些各种实施方式可以包括：实施在一个或者多个计算机程序中，该一个或者多个计算机程序可在包括至少一个可编程处理器的可编程系统上执行和/或解释，该可编程处理器可以是专用或者通用可编程处理器，可以从存储系统、至少一个输入装置、和至少一个输出装置接收数据和指令，并且将数据和指令传输至该存储系统、该至少一个输入装置、和该至少一个输出装置。用于实施本公开的方法的程序代码可以采用一个或多个编程语言的任何组合来编写。这些程序代码可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器或控制器，使得程序代码当由处理器或控制器执行时使流程图和/或框图中所规定的功能/操作被实施。程序代码可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本公开的上下文中，机器可读介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的程序。机器可读介质可以是机器可读信号介质或机器可读储存介质。机器可读介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。为了提供与用户的交互，可以在计算机上实施此处描述的系统和技术，该计算机具有：用于向用户显示信息的显示装置或者LCD监视器)；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给计算机。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网 和互联网。计算机系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。服务器可以是云服务器，又称为云计算服务器或云主机，是云计算服务体系中的一项主机产品，以解决传统物理主机与虚拟专用服务器服务中存在的管理难度大，业务扩展性弱的缺陷。根据本公开实施例的技术方案，通过基于一致性哈希的方式，得以在每个CDN节点包含的多个服务器中选取出代表服务器、在相同服务器承载的多个实例中选取出服务器代表实例和节点代表实例，并通过向不同的实例下发不同的控制参数，将不同实例发起配置请求的对象进行调整，即服务器内的普通实例仅向服务器代表实例发起配置更新请求、服务器代表实例仅向节点代表实例发起配置更新请求，因此仅剩节点代表实例会向控制台发起配置更新请求，即通过发起对象的转移，极大的减少了控制台处理请求的数量，而更少的请求处理数量也将缩短处理等待耗时、缩短新配置的生效耗时。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本发公开中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本公开公开的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本公开保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本公开的精神和原则之内所作的修改、等同替换和改进等，均应包含在本公开保护范围之内。
