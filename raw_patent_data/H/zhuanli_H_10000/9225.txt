标题title
一种通过电声测试设备测试ENC降噪效果的方法及系统
摘要abst
本发明提供了一种通过电声测试设备测试ENC降噪效果的方法及系统。该方案包括获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据；获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号；获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻；进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值；获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值；进行在线评估，判断是否停止当前的降噪调整任务。该方案通过对耳机、麦克环境声与人声的学习和对比，实现在线的智能ENC测试和降噪。
权利要求书clms
1.一种通过电声测试设备测试ENC降噪效果的方法，其特征在于，该方法包括：获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据；获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号；获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻；根据所述前段噪音和后段噪音进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值；获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值；获取所述标准人工嘴数据、所述耳机人工嘴数据、所述第一粉澡波动、所述第二粉澡波动，进行在线评估，判断是否停止当前的降噪调整任务。2.如权利要求1所述的一种通过电声测试设备测试ENC降噪效果的方法，其特征在于，所述获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据，具体包括：获取全部人声数据库，随机提取其中的第一人声语音；根据所述第一人声语音通过人工嘴播放；通过标准麦克风和蓝牙耳机同时录制，将标准麦克风录制的信号保存为标准人声信号，将蓝牙耳机录制的信号保存为耳机人声信号。3.如权利要求2所述的一种通过电声测试设备测试ENC降噪效果的方法，其特征在于，所述获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号，具体包括：获取全部环境数据库，随机提取第一噪声语音和第二噪声语音，其中，所述第一噪声语音为建筑噪声时序，所述第二噪声语音为交通噪声时序；获取全部环境数据库，随机提取第三噪声语音，其中，所述第三噪声语音为生活噪声时序；将所述第一噪声语音和所述第二噪声语音按时间融合为前段噪音；将所述第三噪声语音作为后段噪音；通过标准麦克风和蓝牙耳机对所述前段噪音和所述后段噪音组成一组数据同时录制，将所述标准麦克风录制的信号保存为标准噪声信号，将蓝牙耳机录制的信号保存为所述耳机噪声信号。4.如权利要求3所述的一种通过电声测试设备测试ENC降噪效果的方法，其特征在于，所述获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻，具体包括：设置预设建筑采样系数和预设交通采样系数；提取所述耳机噪声信号为噪声时序数据，对所述噪声时序数据提取每个时间点对应的所述交通噪声时序、所述建筑噪声时序和所述生活噪声时序；利用第一计算公式计算所述第一粉澡波动；利用第二计算公式计算所述第二粉澡波动；根据所述噪声时序数据利用第三计算公式计算所述环境替换时刻；所述第一计算公式为：其中，Ji为第i个所述建筑噪声时序，Pi为第i个所述交通噪声时序，n1为预设前段采样数，k1为预设建筑采样系数，k2位预设交通采样系数，Sf为所述第一粉澡波动；所述第二计算公式为：其中，lj为第j个所述生活噪声时序，n2为预设后段采样数，Sl为所述第二粉澡波动；所述第三计算公式为：其中，Ti＝1为第1个建筑噪声时序的对应时标，Ti＝n1为第n1个所述建筑噪声时序的对应时标，Tj＝1为第1个所述建筑噪声时序的对应时标，Tj＝n2为第n2个所述建筑噪声时序的对应时标，TP为所述环境替换时刻。5.如权利要求1所述的一种通过电声测试设备测试ENC降噪效果的方法，其特征在于，所述根据所述前段噪音和后段噪音进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值，具体包括：设置所述第一录波比例和第二录波比例；根据所述前段噪音和所述后段噪音利用第四计算公式计算录波差值；根据录波差值利用第五计算公式提取所述第一录波比例的最优值；利用第六计算公式预估所述下十时刻录波差值；所述第四计算公式为：其中，CZ为录波差值，B1为所述第一录波比例，B2为第二录波比例，ck和mk依次为前段噪音中第k个实测值和录波值，cz和mz依次为后段噪音中第k个实测值和所述录波值；所述第五计算公式为：B1＝argmin其中，B1为所述第一录波比例，argmin为取最小值时对应B1参数的函数；所述第六计算公式为：其中，CZ10为所述下十时刻录波差值，CZP为前p个历史录波差值，xp为预测差值系数。6.如权利要求1所述的一种通过电声测试设备测试ENC降噪效果的方法，其特征在于，所述获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值，具体包括：对所述前段噪音和所述后段噪音按照所述环境替换时刻先后播放，作为第一语音；将所述单一人声语音作为第二语音；将所述第一语音和所述第二语音同时播放，并通过标准麦克风和蓝牙耳机同时录制；录制过程中，标准麦克风形成所述实测值，蓝牙耳机形成所述标准值。7.如权利要求1所述的一种通过电声测试设备测试ENC降噪效果的方法，其特征在于，所述获取所述标准人工嘴数据、所述耳机人工嘴数据、所述第一粉澡波动、所述第二粉澡波动，进行在线评估，判断是否停止当前的降噪调整任务，具体包括：获取所述标准人工嘴数据和所述耳机人工嘴数据，将所述标准人工嘴数据和所述耳机人工嘴数据差值的绝对值作为声音特征波动参数；判断所述下十时刻录波差值是否大于预设值，若不大于则发出停止降噪调整命令，若大于则获取所述第一粉澡波动和所述第二粉澡波动，利用第七计算公式计算环境降噪评价参数；获取所述标准值和所述实测值，计算实测混合差值；判断所述实测混合差值与所述环境降噪评价参数的大小关系，并将该大小关系发出；判断所述实测混合差值低于所述环境降噪评价参数，则发出停止降噪调整命令；若所述实测混合差值不低于所述环境降噪评价参数，则继续从人声数据库和环境数据库中获取数据，并发出继续降噪调整命令；所述第七计算公式为：K＝BR-Sl+Sf其中，K为所述环境降噪评价参数，BR为所述声音特征波动参数，Sf为所述第一粉澡波动，Sl为所述第二粉澡波动。8.一种通过电声测试设备测试ENC降噪效果的系统，其特征在于，该系统包括：第一播放模块，用于获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据；第二播放模块，用于获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号；噪声监测模块，用于获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻；预测评估模块，用于根据所述前段噪音和后段噪音进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值；第三播放模块，用于获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值；环境评价模块，用于获取所述标准人工嘴数据、所述耳机人工嘴数据、所述第一粉澡波动、所述第二粉澡波动，进行在线评估，判断是否停止当前的降噪调整任务。9.一种计算机可读存储介质，其上存储计算机程序指令，其特征在于，所述计算机程序指令在被处理器执行时实现如权利要求1-7中任一项所述的方法。10.一种电子设备，包括存储器和处理器，其特征在于，所述存储器用于存储一条或多条计算机程序降噪测试指令，其中，所述一条或多条计算机程序指令被所述处理器执行以实现如权利要求1-7任一项所述的方法。
说明书desc
技术领域本发明涉及降噪测试技术领域，更具体地，涉及一种通过电声测试设备测试ENC降噪效果的方法及系统。背景技术通过电声测试设备进行环境噪声的测试和降噪，对于提升耳机性能有重要作用。在ENC过程中，通过使用双麦克风阵列，进行具体的环境噪声的滤除和选择，这个过程中，其中一个麦克风负责接收说话的声音，另一个则负责撷取外在环境的声音。在本发明技术之前，现有技术采用的常规测试ENC，需要仿真嘴1播放人声语音信号，仿真嘴2播放粉噪，通过SPP指令打开蓝牙耳机的ENC降噪开关，同时播放两个音源，录一次声音；关闭蓝牙耳机的ENC降噪开关，同时播放两个音源，再录一次声音，两次录音文件同时放到Adobe Audition中进行处理分析，得到两条曲线的差值即是ENC降噪效果；此外，当无法打开和关闭蓝牙耳机的ENC降噪开关时，则无法测试ENC降噪效果，需要找到另一种方法来测试ENC降噪效果。发明内容鉴于上述问题，本发明提出了一种通过电声测试设备测试ENC降噪效果的方法及系统，通过实施进行对应耳机和麦克环境声与人声的学习和对比，实现在线的智能的ENC测试和降噪。根据本发明实施例第一方面，提供一种通过电声测试设备测试ENC降噪效果的方法。在一个或多个实施例中，优选地，所述一种通过电声测试设备测试ENC降噪效果的方法包括：获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据；获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号；获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻；根据所述前段噪音和后段噪音进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值；获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值；获取所述标准人工嘴数据、所述耳机人工嘴数据、所述第一粉澡波动、所述第二粉澡波动，进行在线评估，判断是否停止当前的降噪调整任务。在一个或多个实施例中，优选地，所述获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据，具体包括：获取全部人声数据库，随机提取其中的第一人声语音；根据所述第一人声语音通过人工嘴播放；通过标准麦克风和蓝牙耳机同时录制，将标准麦克风录制的信号保存为标准人声信号，将蓝牙耳机录制的信号保存为耳机人声信号。在一个或多个实施例中，优选地，所述获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号，具体包括：获取全部环境数据库，随机提取第一噪声语音和第二噪声语音，其中，所述第一噪声语音为建筑噪声时序，所述第二噪声语音为交通噪声时序；获取全部环境数据库，随机提取第三噪声语音，其中，所述第三噪声语音为生活噪声时序；将所述第一噪声语音和所述第二噪声语音按时间融合为前段噪音；将所述第三噪声语音作为后段噪音；通过标准麦克风和蓝牙耳机对所述前段噪音和所述后段噪音组成一组数据同时录制，将所述标准麦克风录制的信号保存为标准噪声信号，将蓝牙耳机录制的信号保存为所述耳机噪声信号。在一个或多个实施例中，优选地，所述获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻，具体包括：设置预设建筑采样系数和预设交通采样系数；提取所述耳机噪声信号为噪声时序数据，对所述噪声时序数据提取每个时间点对应的所述交通噪声时序、所述建筑噪声时序和所述生活噪声时序；利用第一计算公式计算所述第一粉澡波动；利用第二计算公式计算所述第二粉澡波动；根据所述噪声时序数据利用第三计算公式计算所述环境替换时刻；所述第一计算公式为：其中，Ji为第i个所述建筑噪声时序，Pi为第i个所述交通噪声时序，n1为预设前段采样数，k1为预设建筑采样系数，k2位预设交通采样系数，Sf为所述第一粉澡波动；所述第二计算公式为：其中，lj为第j个所述生活噪声时序，n2为预设后段采样数，Sl为所述第二粉澡波动；所述第三计算公式为：其中，Ti＝1为第1个建筑噪声时序的对应时标，Ti＝n1为第n1个所述建筑噪声时序的对应时标，Tj＝1为第1个所述建筑噪声时序的对应时标，Tj＝n2为第n2个所述建筑噪声时序的对应时标，TP为所述环境替换时刻。在一个或多个实施例中，优选地，所述根据所述前段噪音和后段噪音进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值，具体包括：设置所述第一录波比例和第二录波比例；根据所述前段噪音和所述后段噪音利用第四计算公式计算录波差值；根据录波差值利用第五计算公式提取所述第一录波比例的最优值；利用第六计算公式预估所述下十时刻录波差值；所述第四计算公式为：其中，CZ为录波差值，B1为所述第一录波比例，B2为第二录波比例，ck和mk依次为前段噪音中第k个实测值和录波值，cz和mz依次为后段噪音中第k个实测值和所述录波值；所述第五计算公式为：B1＝argmin其中，B1为所述第一录波比例，argmin为取最小值时对应B1参数的函数；所述第六计算公式为：其中，CZ10为所述下十时刻录波差值，CZP为前p个历史录波差值，xp为预测差值系数。在一个或多个实施例中，优选地，所述获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值，具体包括：对所述前段噪音和所述后段噪音按照所述环境替换时刻先后播放，作为第一语音；将所述单一人声语音作为第二语音；将所述第一语音和所述第二语音同时播放，并通过标准麦克风和蓝牙耳机同时录制；录制过程中，标准麦克风形成所述实测值，蓝牙耳机形成所述标准值。在一个或多个实施例中，优选地，所述获取所述标准人工嘴数据、所述耳机人工嘴数据、所述第一粉澡波动、所述第二粉澡波动，进行在线评估，判断是否停止当前的降噪调整任务，具体包括：获取所述标准人工嘴数据和所述耳机人工嘴数据，将所述标准人工嘴数据和所述耳机人工嘴数据差值的绝对值作为声音特征波动参数；判断所述下十时刻录波差值是否大于预设值，若不大于则发出停止降噪调整命令，若大于则获取所述第一粉澡波动和所述第二粉澡波动，利用第七计算公式计算环境降噪评价参数；获取所述标准值和所述实测值，计算实测混合差值；判断所述实测混合差值与所述环境降噪评价参数的大小关系，并将该大小关系发出；判断所述实测混合差值低于所述环境降噪评价参数，则发出停止降噪调整命令；若所述实测混合差值不低于所述环境降噪评价参数，则继续从人声数据库和环境数据库中获取数据，并发出继续降噪调整命令；所述第七计算公式为：K＝BR-Sl+Sf其中，K为所述环境降噪评价参数，BR为所述声音特征波动参数，Sf为所述第一粉澡波动，Sl为所述第二粉澡波动。根据本发明实施例第二方面，提供一种通过电声测试设备测试ENC降噪效果的系统。在一个或多个实施例中，优选地，所述一种通过电声测试设备测试ENC降噪效果的系统包括：第一播放模块，用于获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据；第二播放模块，用于获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号；噪声监测模块，用于获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻；预测评估模块，用于根据所述前段噪音和后段噪音进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值；第三播放模块，用于获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值；环境评价模块，用于获取所述标准人工嘴数据、所述耳机人工嘴数据、所述第一粉澡波动、所述第二粉澡波动，进行在线评估，判断是否停止当前的降噪调整任务。根据本发明实施例第三方面，提供一种计算机可读存储介质，其上存储计算机程序指令，所述计算机程序指令在被处理器执行时实现如本发明实施例第一方面中任一项所述的方法。根据本发明实施例第四方面，提供一种电子设备，包括存储器和处理器，所述存储器用于存储一条或多条计算机程序指令，其中，所述一条或多条计算机程序指令被所述处理器执行以实现本发明实施例第一方面中任一项所述的方法。本发明的实施例提供的技术方案可以包括以下有益效果：本发明方案中，通过在线提取随机的噪声进行环境切换情况下的自动ENC学习，提升降噪的环境适应能力。在本发明方案中，通过进行对于录波比例和录波差值的在线运算，结合标准值和混合值，进行停止或继续降噪命令发出。本发明的其它特征和优点将在随后的说明书中阐述，并且，部分地从说明书中变得显而易见，或者通过实施本发明而了解。本发明的目的和其他优点可通过在所写的说明书、权利要求书、以及附图中所特别指出的结构来实现和获得。下面通过附图和实施例，对本发明的技术方案做进一步的详细描述。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法的流程图。图2是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法中的获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据的流程图。图3是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法中的获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号的流程图。图4是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法中的获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻的流程图。图5是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法中的根据所述前段噪音和后段噪音进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值的流程图。图6是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法中的获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值的流程图。图7是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法中的获取所述标准人工嘴数据、所述耳机人工嘴数据、所述第一粉澡波动、所述第二粉澡波动，进行在线评估，判断是否停止当前的降噪调整任务的流程图。图8是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的系统的结构图。图9是本发明一个实施例中一种电子设备的结构图。具体实施方式在本发明的说明书和权利要求书及上述附图中的描述的一些流程中，包含了按照特定顺序出现的多个操作，但是应该清楚了解，这些操作可以不按照其在本文中出现的顺序来执行或并行执行，操作的序号如101、102等，仅仅是用于区分开各个不同的操作，序号本身不代表任何的执行顺序。另外，这些流程可以包括更多或更少的操作，并且这些操作可以按顺序执行或并行执行。需要说明的是，本文中的“第一”、“第二”等描述，是用于区分不同的消息、设备、模块等，不代表先后顺序，也不限定“第一”和“第二”是不同的类型。下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。通过电声测试设备进行环境噪声的测试和降噪，对于提升耳机性能有重要作用。在ENC过程中，通过使用双麦克风阵列，进行具体的环境噪声的滤除和选择，这个过程中，其中一个麦克风负责接收说话的声音，另一个则负责撷取外在环境的声音。在本发明技术之前，现有技术采用的常规测试ENC，需要仿真嘴1播放人声语音信号，仿真嘴2播放粉噪，通过SPP指令打开蓝牙耳机的ENC降噪开关，同时播放两个音源，录一次声音；关闭蓝牙耳机的ENC降噪开关，同时播放两个音源，再录一次声音，两次录音文件同时放到Adobe Audition中进行处理分析，得到两条曲线的差值即是ENC降噪效果；此外，当无法打开和关闭蓝牙耳机的ENC降噪开关时，则无法测试ENC降噪效果，需要找到另一种方法来测试ENC降噪效果。本发明实施例中，提供了一种通过电声测试设备测试ENC降噪效果的方法及系统。该方案通过实施进行对应耳机和麦克环境声与人声的学习和对比，实现在线的智能的ENC测试和降噪。根据本发明实施例第一方面，提供一种通过电声测试设备测试ENC降噪效果的方法。图1是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法的流程图。在一个或多个实施例中，优选地，所述一种通过电声测试设备测试ENC降噪效果的方法包括：S101、获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据；S102、获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号；S103、获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻；S104、根据所述前段噪音和后段噪音进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值；S105、获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值；S106、获取所述标准人工嘴数据、所述耳机人工嘴数据、所述第一粉澡波动、所述第二粉澡波动，进行在线评估，判断是否停止当前的降噪调整任务。在本发明实施例中，为实现上述流程，需要准备部分设备用于测试，前期布置的配置包括：第一仿真嘴、测试分析系统、B&amp;K4191自由场传声器、第二仿真嘴、功率放大器、声卡、蓝牙端口、被测的ENC降噪功能的蓝牙耳机；具体的连接关系为：第一仿真嘴和第二仿真嘴通过功率放大器连接到声卡，此外，B&amp;K4191自由场传声器与声卡电连接，声卡与电脑电连接，测试分析系统控制所述第一仿真嘴和所述第二仿真嘴和蓝牙耳机，并获取录音文件，所述被测的ENC降噪功能的蓝牙耳机通过蓝牙端口连接到电脑。图2是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法中的获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据的流程图。如图2所示，在一个或多个实施例中，优选地，所述获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据，具体包括：S201、获取全部人声数据库，随机提取其中的第一人声语音；S202、根据所述第一人声语音通过人工嘴播放；S203、通过标准麦克风和蓝牙耳机同时录制，将标准麦克风录制的信号保存为标准人声信号，将蓝牙耳机录制的信号保存为耳机人声信号；在本发明实施例中，为了能够进行有效的在线的耳机采集中噪声的信息处理和信息获取，在进行测试之前，首先开展了标准麦克和人声信号的同时录制，将标准麦克的数据作为实施的准确数据，而将耳机人声信号作为需要评估的数据输入。图3是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法中的获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号的流程图。如图3所示，在一个或多个实施例中，优选地，所述获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号，具体包括：S301、获取全部环境数据库，随机提取第一噪声语音和第二噪声语音，其中，所述第一噪声语音为建筑噪声时序，所述第二噪声语音为交通噪声时序；S302、获取全部环境数据库，随机提取第三噪声语音，其中，所述第三噪声语音为生活噪声时序；S303、将所述第一噪声语音和所述第二噪声语音按时间融合为前段噪音；S304、将所述第三噪声语音作为后段噪音；S305、通过标准麦克风和蓝牙耳机对所述前段噪音和所述后段噪音组成一组数据同时录制，将所述标准麦克风录制的信号保存为标准噪声信号，将蓝牙耳机录制的信号保存为所述耳机噪声信号。在本发明实施例中，为了能够进行标准的快速的耳机的噪声信号的处理，在进行随机的噪声信号生成后，通过一次性的噪声融合，实现对于真正的蓝牙耳机信息的快速测试。图4是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法中的获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻的流程图。如图4所示，在一个或多个实施例中，优选地，所述获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻，具体包括：S401、设置预设建筑采样系数和预设交通采样系数；S402、提取所述耳机噪声信号为噪声时序数据，对所述噪声时序数据提取每个时间点对应的所述交通噪声时序、所述建筑噪声时序和所述生活噪声时序；S403、利用第一计算公式计算所述第一粉澡波动；S404、利用第二计算公式计算所述第二粉澡波动；S405、根据所述噪声时序数据利用第三计算公式计算所述环境替换时刻；所述第一计算公式为：其中，Ji为第i个所述建筑噪声时序，Pi为第i个所述交通噪声时序，n1为预设前段采样数，k1为预设建筑采样系数，k2位预设交通采样系数，Sf为所述第一粉澡波动；所述第二计算公式为：其中，lj为第j个所述生活噪声时序，n2为预设后段采样数，Sl为所述第二粉澡波动；所述第三计算公式为：其中，Ti＝1为第1个建筑噪声时序的对应时标，Ti＝n1为第n1个所述建筑噪声时序的对应时标，Tj＝1为第1个所述建筑噪声时序的对应时标，Tj＝n2为第n2个所述建筑噪声时序的对应时标，TP为所述环境替换时刻。在本发明实施例中，在进行噪声评价之前，首先获取了初始获得的噪声原始信息，进行了在线的评估，评估包括两个方面，一方面是前段噪声的波动，另一方面是后段噪声的波动，通过两方面的波动结合了具体的环境切换的时间点，这个时间点作为后续进行环境噪声滤除能力的一个设定指标，确认在哪种环境噪声切换情况下学习获得的结果更加准确，则采用此种比例进行降噪分析。图5是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法中的根据所述前段噪音和后段噪音进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值的流程图。如图5所示，在一个或多个实施例中，优选地，所述根据所述前段噪音和后段噪音进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值，具体包括：S501、设置所述第一录波比例和第二录波比例；S502、根据所述前段噪音和所述后段噪音利用第四计算公式计算录波差值；S503、根据录波差值利用第五计算公式提取所述第一录波比例的最优值；S504、利用第六计算公式预估所述下十时刻录波差值；所述第四计算公式为：其中，CZ为录波差值，B1为所述第一录波比例，B2为第二录波比例，ck和mk依次为前段噪音中第k个实测值和录波值，cz和mz依次为后段噪音中第k个实测值和所述录波值；所述第五计算公式为：B1＝argmin其中，B1为所述第一录波比例，argmin为取最小值时对应B1参数的函数；所述第六计算公式为：其中，CZ10为所述下十时刻录波差值，CZP为前p个历史录波差值，xp为预测差值系数。在本发明实施例中，为了能够在线的调整前段噪声和后段噪声的比例进行调整，并给出未来一段时间的录波差值，这种预测一定程度的保证了在当前和未来一段时间对于噪声的滤除能力，进而实现高效的限制对于耳机的录波能力。图6是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法中的获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值的流程图。如图6所示，在一个或多个实施例中，优选地，所述获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值，具体包括：S601、对所述前段噪音和所述后段噪音按照所述环境替换时刻先后播放，作为第一语音；S602、将所述单一人声语音作为第二语音；S603、将所述第一语音和所述第二语音同时播放，并通过标准麦克风和蓝牙耳机同时录制；S604、录制过程中，标准麦克风形成所述实测值，蓝牙耳机形成所述标准值。由于直接录制获得的标准值和实测值中同时含有噪音和人声语音，能够有效的评估在混杂环境噪音情况下产生的实际的录波情况效果如何。。图7是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的方法中的获取所述标准人工嘴数据、所述耳机人工嘴数据、所述第一粉澡波动、所述第二粉澡波动，进行在线评估，判断是否停止当前的降噪调整任务的流程图。如图7所示，在一个或多个实施例中，优选地，所述获取所述标准人工嘴数据、所述耳机人工嘴数据、所述第一粉澡波动、所述第二粉澡波动，进行在线评估，判断是否停止当前的降噪调整任务，具体包括：S701、获取所述标准人工嘴数据和所述耳机人工嘴数据，将所述标准人工嘴数据和所述耳机人工嘴数据差值的绝对值作为声音特征波动参数；S702、判断所述下十时刻录波差值是否大于预设值，若不大于则发出停止降噪调整命令，若大于则获取所述第一粉澡波动和所述第二粉澡波动，利用第七计算公式计算环境降噪评价参数；S703、获取所述标准值和所述实测值，计算实测混合差值；S704、判断所述实测混合差值与所述环境降噪评价参数的大小关系，并将该大小关系发出；S705、判断所述实测混合差值低于所述环境降噪评价参数，则发出停止降噪调整命令；S706、若所述实测混合差值不低于所述环境降噪评价参数，则继续从人声数据库和环境数据库中获取数据，并发出继续降噪调整命令；所述第七计算公式为：K＝BR-Sl+Sf其中，K为所述环境降噪评价参数，BR为所述声音特征波动参数，Sf为所述第一粉澡波动，Sl为所述第二粉澡波动。在本发明实施例中，在最后测试完成后，根据环境降噪的水平和声音特征波动的情况，自动的进行了当前降噪水平的评估，当降噪的能量不足时，利用结合了人声数据和环境降噪数据的结合的环境降噪评价参数，进行在线控制是否继续噪声调整任务。根据本发明实施例第二方面，提供一种通过电声测试设备测试ENC降噪效果的系统。图8是本发明一个实施例的一种通过电声测试设备测试ENC降噪效果的系统的结构图。在一个或多个实施例中，优选地，所述一种通过电声测试设备测试ENC降噪效果的系统包括：第一播放模块801，用于获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据；第二播放模块802，用于获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号；噪声监测模块803，用于获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻；预测评估模块804，用于根据所述前段噪音和后段噪音进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值；第三播放模块805，用于获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值；环境评价模块806，用于获取所述标准人工嘴数据、所述耳机人工嘴数据、所述第一粉澡波动、所述第二粉澡波动，进行在线评估，判断是否停止当前的降噪调整任务。在本发明实施例中，通过模块化方式进行对于全面的方法的设计，设计中对于全部的模块均采用了自动化的设置方式，不会因为每次配置环境的不同而产生不同，因此，能够满足对于不同场景下的有效进行环境降噪，也包括如何进行在无法连接蓝牙环境下的降噪测试。根据本发明实施例第三方面，提供一种计算机可读存储介质，其上存储计算机程序指令，所述计算机程序指令在被处理器执行时实现如本发明实施例第一方面中任一项所述的方法。根据本发明实施例第四方面，提供一种电子设备。图9是本发明一个实施例中一种电子设备的结构图。图9所示的电子设备为通用一种通过电声测试设备测试ENC降噪效果装置。该电子设备可以是智能手机、平板电脑等设备。如示，电子设备900包括处理器901和存储器902。其中，处理器901与存储器902电性连接。处理器901是终端900的控制中心，利用各种接口和线路连接整个终端的各个部分，通过运行或调用存储在存储器902内的计算机程序，以及调用存储在存储器902内的数据，执行终端的各种功能和处理数据，从而对终端进行整体监控。在本实施例中，电子设备900中的处理器901会按照如下的步骤，将一个或一个以上的计算机程序的进程对应的指令加载到存储器902中，并由处理器901来运行存储在存储器902中的计算机程序，从而实现各种功能：获取全部人声数据库，提取单一人声语音播放后，生成标准人工嘴数据和耳机人工嘴数据；获取全部环境数据库，提取前段噪音和后段噪音，并融合生成为标准噪声信号和耳机噪声信号；获取所述耳机噪声信号，并根据噪声的时序提取第一粉澡波动、第二粉澡波动和环境替换时刻；根据所述前段噪音和后段噪音进行在线的录波比例调整和未来时刻的噪声预测，生成第一录波比例和下十时刻录波差值；获取所述单一人声语音、前段噪音、后段噪音，同时播放录制形成标准值和实测值；获取所述标准人工嘴数据、所述耳机人工嘴数据、所述第一粉澡波动、所述第二粉澡波动，进行在线评估，判断是否停止当前的降噪调整任务。存储器902可用于存储计算机程序和数据。存储器902存储的计算机程序中包含有可在处理器中执行的指令。计算机程序可以组成各种功能模块。处理器901通过调用存储在存储器902的计算机程序，从而执行各种功能应用以及数据处理。本发明的实施例提供的技术方案可以包括以下有益效果：本发明方案中，通过在线提取随机的噪声进行环境切换情况下的自动ENC学习，提升降噪的环境适应能力。在本发明方案中，通过进行对于录波比例和录波差值的在线运算，结合标准值和混合值，进行停止或继续降噪命令发出。本领域内的技术人员应明白，本发明的实施例可提供为方法、系统、或计算机程序产品。因此，本发明可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本发明是参照根据本发明实施例的方法、设备、和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。显然，本领域的技术人员可以对本发明进行各种改动和变型而不脱离本发明的精神和范围。这样，倘若本发明的这些修改和变型属于本发明权利要求及其等同技术的范围之内，则本发明也意图包含这些改动和变型在内。
