标题title
单电阻三相电流重构方法、设备及计算机可读存储介质
摘要abst
本发明公开了一种单电阻三相电流重构方法、设备及计算机可读存储介质，所述单电阻三相电流重构方法包括：接收逆变器三相高电平导通时间，根据预设测量开窗相、预设开窗时间以及所述三相高电平导通时间实时获取三相剩余高电平导通时间；根据所述预设测量开窗相、所述预设开窗时间以及所述三相剩余高电平导通时间经由驱动信号模块生成逆变器驱动信号驱动逆变器工作；在所述预设开窗时间采集流经所述逆变器测量电阻上的电流，基于采集的电流和三相绕组之间的电流关系获取每一相的相电流值。本发明消除传统采样方式的非观测区域，将整个电压矢量空间的相电流重构逻辑统一，使得采样电流连续性好、近似载波周期的平均电流，可用于高性能电机控制。
权利要求书clms
1.一种单电阻三相电流重构方法，其特征在于，所述单电阻三相电流重构方法包括：接收逆变器三相高电平导通时间，根据预设测量开窗相、预设开窗时间以及所述三相高电平导通时间实时获取三相剩余高电平导通时间；根据所述预设测量开窗相、所述预设开窗时间以及所述三相剩余高电平导通时间经由驱动信号模块生成逆变器驱动信号驱动逆变器工作；在所述预设开窗时间采集流经所述逆变器测量电阻上的电流，基于采集的电流和三相绕组之间的电流关系获取每一相的相电流值。2.如权利要求1所述的单电阻三相电流重构方法，其特征在于，所述预设测量开窗相包括U开窗相和V开窗相，所述预设开窗时间包括第一开窗时间和第二开窗时间，所述根据预设测量开窗相、预设开窗时间以及所述三相高电平导通时间实时获取三相剩余高电平导通时间的步骤包括：将所述三相高电平导通时间中U相的高电平导通时间去除与所述U开窗相对应的所述第一开窗时间，得到第一剩余高电平导通时间；将所述三相高电平导通时间中V相的高电平导通时间去除与所述V开窗相对应的所述第二开窗时间，得到第二剩余高电平导通时间；将所述三相高电平导通时间中W相的高电平导通时间作为第三剩余高电平导通时间；其中，三相剩余高电平导通时间包括所述第一剩余高电平导通时间、所述第二剩余高电平导通时间和所述第三剩余高电平导通时间。3.如权利要求2所述的单电阻三相电流重构方法，其特征在于，所述根据所述预设测量开窗相、所述预设开窗时间以及所述三相剩余高电平导通时间经由驱动信号模块生成逆变器驱动信号驱动逆变器工作的步骤包括：根据所述预设开窗时间生成所述驱动信号模块的定时器的第一比较值和第二比较值；根据所述三相剩余高电平导通时间生成所述定时器的第三比较值、第四比较值和第五比较值；根据所述预设测量开窗相，将所述第一比较值、所述第二比较值、所述第三比较值、所述第四比较值和所述第五比较值输入所述定时器的输出模块，生成所述逆变器的驱动信号；所述驱动信号经过驱动电路驱动所述逆变器工作。4.如权利要求3所述的单电阻三相电流重构方法，其特征在于，所述根据所述预设开窗时间生成所述驱动信号模块的定时器的第一比较值和第二比较值包括：根据所述第一开窗时间、所述定时器的载波周期时间以及所述定时器的计数最大值生成所述第一比较值；根据所述第二开窗时间、所述载波周期时间以及所述计数最大值生成所述第二比较值。5.如权利要求3所述的单电阻三相电流重构方法，其特征在于，所述根据所述三相剩余高电平导通时间生成所述定时器的第三比较值、第四比较值和第五比较值的步骤包括：根据所述第一剩余高电平导通时间、所述定时器的载波周期时间以及所述定时器的计数最大值生成所述第三比较值；根据所述第二剩余高电平导通时间、所述载波周期时间以及所述计数最大值生成所述第四比较值；根据所述第三剩余高电平导通时间、所述载波周期时间以及所述计数最大值生成所述第五比较值。6.如权利要求3所述的单电阻三相电流重构方法，其特征在于，所述将所述第一比较值、所述第二比较值、所述第三比较值、所述第四比较值和所述第五比较值输入所述定时器的输出模块，生成所述逆变器的驱动信号的步骤包括：将所述第一比较值和所述第三比较值输入至与所述U相对应的定时器输出模块生成第一输出信号；将所述第二比较值和所述第四比较值输入至与所述V相对应的定时器输出模块生成第三输出信号；将所述第五比较值输入至与所述W相对应的定时器输出模块生成第五输出信号；基于逆变器信号的死区插入和信号的互补原则，根据所述第一输出信号生成第二输出信号，根据所述第三输出信号生成第四输出信号，根据所述第五输出信号生成第六输出信号；其中，所述逆变器的驱动信号包括所述第一输出信号、所述第二输出信号、所述第三输出信号、所述第四输出信号、所述第五输出信号、所述第六输出信号。7.如权利要求2所述的单电阻三相电流重构方法，其特征在于，所述在所述预设开窗时间采集流经所述逆变器测量电阻上的电流，基于采集的电流和三相绕组之间的电流关系获取每一相的相电流值的步骤包括：在所述第一开窗时间触发ADC采集，采集流经所述测量电阻得到第一电流值；在所述第二开窗时间触发ADC采集，采集流经所述测量电阻得到第二电流值；根据所述第一电流值、所述第二电流值，基于三相绕组之间的电流关系获取三相电流值。8.如权利要求2所述的单电阻三相电流重构方法，其特征在于，所述第一开窗时间和所述第二开窗时间均大于预设最小开窗时间，其中，所述预设最小开窗时间由预防相桥臂直通死区时间、测量电阻电流建立时间以及ADC转换时间组成。9.一种单电阻三相电流重构设备，其特征在于，所述单电阻三相电流重构设备包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的单电阻三相电流重构程序，所述单电阻三相电流重构程序被所述处理器执行时实现如权利要求1至8中任一项所述的单电阻三相电流重构方法的步骤。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储有单电阻三相电流重构程序，所述单电阻三相电流重构程序被处理器执行时实现如权利要求1至8中任一项所述的单电阻三相电流重构方法的步骤。
说明书desc
技术领域本发明涉及电机相电流测量领域，尤其涉及一种单电阻三相电流重构方法、设备及计算机可读存储介质。背景技术在电机的高性能控制中，电机相电流采样值作为控制器以及保护模块的输入，是整个电机驱动系统的重要环节。精确的电流采样是电机高效、稳定运行的前提。在注重成本的商用电机驱动产品中，单电阻采样由于其低廉的成本以及简单的结构受到广泛的青睐。然而，由于该采样方式只能在逆变器输出电压为非零矢量时才能获取相电流，因此，当参考电压矢量位于低调制度区域以及扇区切换区域，该方法会由于有效矢量太短而导致无法检测准确的相电流，低调制度区域以及扇区切换区域共同构成了非观测区域。针对无法检测准确的相电流的问题，传统的单电阻采样方法在参考电压位于上述非观测区域时，采用将输出电压移相的方式，获取足够长时间的非零电压矢量，从而采集相电流信息。然而，由于移相、扇区切换导致采样电流并非一个载波周期的平均电流以及采样电流的非连续性，对电机的高性能控制带来不利影响。上述内容仅用于辅助理解本发明的技术方案，并不代表承认上述内容是现有技术。发明内容本发明的主要目的在于提供一种单电阻三相电流重构方法，旨在解决传统的单电阻采样方法因移相、扇区切换导致采样电流并非一个载波周期的平均电流以及采样电流的非连续性，对电机的高性能控制带来不利影响的技术问题。为实现上述目的，本发明提供一种单电阻三相电流重构方法，所述单电阻三相电流重构方法包括：接收逆变器三相高电平导通时间，根据预设测量开窗相、预设开窗时间以及所述三相高电平导通时间实时获取三相剩余高电平导通时间；根据所述预设测量开窗相、所述预设开窗时间以及所述三相剩余高电平导通时间经由驱动信号模块生成逆变器驱动信号驱动逆变器工作；在所述预设开窗时间采集流经所述逆变器测量电阻上的电流，基于采集的电流和三相绕组之间的电流关系获取每一相的相电流值。进一步的，所述预设测量开窗相包括U开窗相和V开窗相，所述预设开窗时间包括第一开窗时间和第二开窗时间，所述根据预设测量开窗相、预设开窗时间以及所述三相高电平导通时间实时获取三相剩余高电平导通时间的步骤包括：将所述三相高电平导通时间中U相的高电平导通时间去除与所述U开窗相对应的第一开窗时间，得到第一剩余高电平导通时间；将所述三相高电平导通时间中V相的高电平导通时间去除与所述V开窗相对应的第二开窗时间，得到第二剩余高电平导通时间；将所述三相高电平导通时间中W相的高电平导通时间作为第三剩余高电平导通时间；其中，三相剩余高电平导通时间包括所述第一剩余高电平导通时间、所述第二剩余高电平导通时间和所述第三剩余高电平导通时间。进一步的，所述根据所述预设测量开窗相、所述预设开窗时间以及所述三相剩余高电平导通时间经由驱动信号模块生成逆变器驱动信号驱动逆变器工作的步骤包括：根据所述预设开窗时间生成所述驱动信号模块的定时器的第一比较值和第二比较值；根据所述三相剩余高电平导通时间生成所述定时器的第三比较值、第四比较值和第五比较值；根据所述预设测量开窗相，将所述第一比较值、所述第二比较值、所述第三比较值、所述第四比较值和所述第五比较值输入所述定时器的输出模块，生成所述逆变器的驱动信号；所述驱动信号经过驱动电路驱动所述逆变器工作。进一步的，所述根据所述预设开窗时间生成所述驱动信号模块的定时器的第一比较值和第二比较值包括：根据所述第一开窗时间、所述定时器的载波周期时间以及所述定时器的计数最大值生成所述第一比较值；根据所述第二开窗时间、所述载波周期时间以及所述计数最大值生成所述第二比较值。进一步的，所述根据所述三相剩余高电平导通时间生成所述定时器的第三比较值、第四比较值和第五比较值的步骤包括：根据所述第一剩余高电平导通时间、所述定时器的载波周期时间以及所述定时器的计数最大值生成所述第三比较值；根据所述第二剩余高电平导通时间、所述载波周期时间以及所述计数最大值生成所述第四比较值；根据所述第三剩余高电平导通时间、所述载波周期时间以及所述计数最大值生成所述第五比较值。进一步的，将所述第一比较值、所述第二比较值、所述第三比较值、所述第四比较值和所述第五比较值输入所述定时器的输出模块，生成所述逆变器的驱动信号的步骤包括：将所述第一比较值和所述第三比较值输入至与所述U相对应的定时器输出模块生成第一输出信号；将所述第二比较值和所述第四比较值输入至与所述V相对应的定时器输出模块生成第三输出信号；将所述第五比较值输入至与所述W相对应的定时器输出模块生成第五输出信号；基于逆变器信号的死区插入和信号的互补原则，根据所述第一输出信号生成第二输出信号，根据所述第三输出信号生成第四输出信号，根据所述第五输出信号生成第六输出信号；其中，所述逆变器的驱动信号包括所述第一输出信号、所述第二输出信号、所述第三输出信号、所述第四输出信号、所述第五输出信号、所述第六输出信号。进一步的，所述在所述预设开窗时间采集流经所述逆变器测量电阻上的电流，基于采集的电流和三相绕组之间的电流关系获取每一相的相电流值的步骤包括：在所述第一开窗时间触发ADC采集，采集流经所述测量电阻得到第一电流值；在所述第二开窗时间触发ADC采集，采集流经所述测量电阻得到第二电流值；根据所述第一电流值、所述第二电流值，基于三相绕组之间的电流关系获取三相电流值。进一步的，所述第一开窗时间和所述第二开窗时间均大于预设最小开窗时间，其中，所述预设最小开窗时间由预防相桥臂直通死区时间、测量电阻电流建立时间以及ADC转换时间组成。此外，为实现上述目的，本发明还提供一种单电阻三相电流重构设备，所述单电阻三相电流重构设备包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的单电阻三相电流重构程序，所述单电阻三相电流重构程序被所述处理器执行时实现如上所述的单电阻三相电流重构方法的步骤。此外，为实现上述目的，本发明还提供一种计算可读存储介质，所述计算可读存储介质上存储有单电阻三相电流重构程序，所述单电阻三相电流重构程序被处理器执行时实现如上所述的单电阻三相电流重构方法的步骤。本发明实施例提出的一种单电阻三相电流重构设备，通过直接预设测量窗口的方式，消除了传统单电阻采样方式的非观测区域，将整个电压矢量空间的相电流重构逻辑统一，使得采样电流连续性好、近似于载波周期的平均电流，可用于高性能的电机控制。附图说明图1是本发明实施例方案涉及的硬件运行环境的设备结构示意图；图2为本发明单电阻三相电流重构方法中第一实施例涉及电机的模块结构示意图；图3为本发明单电阻三相电流重构方法中第一实施例的流程示意图；图4为本发明单电阻三相电流重构方法中定时器的输出模块产生的输出信号波形图。本发明目的的实现、功能特点及优点将结合实施例，参照附图做进一步说明。具体实施方式应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。如图1所示，图1是本发明实施例方案涉及的硬件运行环境的设备结构示意图。本发明实施例设备可以是永磁同步电机，也可以是其他具有存储功能的电机，还可以是具有数据接收、数据处理和数据输出的电子设备。如图1所示，该设备可以包括：处理器1001，例如CPU，网络接口1004，用户接口1003，存储器1005，通信总线1002。其中，通信总线1002用于实现这些组件之间的连接通信。用户接口1003可以包括显示屏、输入单元比如键盘，可选用户接口1003还可以包括标准的有线接口、无线接口。网络接口1004可选的可以包括标准的有线接口、无线接口。存储器1005可以是高速RAM存储器，也可以是稳定的存储器，例如磁盘存储器。存储器1005可选的还可以是独立于前述处理器1001的存储装置。可选地，设备还可以包括摄像头、RF电路，传感器、音频电路、WiFi模块等等。其中，传感器比如光传感器、运动传感器以及其他传感器。具体地，光传感器可包括环境光传感器及接近传感器，其中，环境光传感器可根据环境光线的明暗来调节显示屏的亮度，接近传感器可在移动终端移动到耳边时，关闭显示屏和/或背光。作为运动传感器的一种，重力加速度传感器可检测各个方向上加速度的大小，静止时可检测出重力的大小及方向，可用于识别移动终端姿态的应用、振动识别相关功能等；当然，移动终端还可配置陀螺仪、气压计、湿度计、温度计、红外线传感器等其他传感器，在此不再赘述。本领域技术人员可以理解，图1中示出的设备结构并不构成对设备的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件布置。如图1所示，作为一种计算机存储介质的存储器1005中可以包括操作系统、网络通信模块、用户接口模块以及单电阻三相电流重构程序。在图1所示的设备中，网络接口1004主要用于连接后台服务器，与后台服务器进行数据通信；用户接口1003主要用于连接客户端，与客户端进行数据通信；而处理器1001可以用于调用存储器1005中存储的单电阻三相电流重构程序，并执行以下操作：接收逆变器三相高电平导通时间，根据预设测量开窗相、预设开窗时间以及所述三相高电平导通时间实时获取三相剩余高电平导通时间；根据所述预设测量开窗相、所述预设开窗时间以及所述三相剩余高电平导通时间经由驱动信号模块生成逆变器驱动信号驱动逆变器工作；在所述预设开窗时间采集流经所述逆变器测量电阻上的电流，基于采集的电流和三相绕组之间的电流关系获取每一相的相电流值。进一步地，处理器1001可以调用存储器1005中存储的单电阻三相电流重构程序，还执行以下操作：所述预设测量开窗相包括U开窗相和V开窗相，所述预设开窗时间包括第一开窗时间和第二开窗时间，所述根据预设测量开窗相、预设开窗时间以及所述三相高电平导通时间实时获取三相剩余高电平导通时间的步骤包括：将所述三相高电平导通时间中U相的高电平导通时间去除与所述U开窗相对应的所述第一开窗时间，得到第一剩余高电平导通时间；将所述三相高电平导通时间中V相的高电平导通时间去除与所述V开窗相对应的所述第二开窗时间，得到第二剩余高电平导通时间；将所述三相高电平导通时间中W相的高电平导通时间作为第三剩余高电平导通时间；其中，三相剩余高电平导通时间包括所述第一剩余高电平导通时间、所述第二剩余高电平导通时间和所述第三剩余高电平导通时间。进一步地，处理器1001可以调用存储器1005中存储的单电阻三相电流重构程序，还执行以下操作：所述根据所述预设测量开窗相、所述预设开窗时间以及所述三相剩余高电平导通时间经由驱动信号模块生成逆变器驱动信号驱动逆变器工作的步骤包括：根据所述预设开窗时间生成所述驱动信号模块的定时器的第一比较值和第二比较值；根据所述三相剩余高电平导通时间生成所述定时器的第三比较值、第四比较值和第五比较值；根据所述预设测量开窗相，将所述第一比较值、所述第二比较值、所述第三比较值、所述第四比较值和所述第五比较值输入所述定时器的输出模块，生成所述逆变器的驱动信号；所述驱动信号经过驱动电路驱动所述逆变器工作。进一步地，处理器1001可以调用存储器1005中存储的单电阻三相电流重构程序，还执行以下操作：所述根据所述预设开窗时间生成所述驱动信号模块的定时器的第一比较值和第二比较值包括：根据所述第一开窗时间、所述定时器的载波周期时间以及所述定时器的计数最大值生成所述第一比较值；根据所述第二开窗时间、所述载波周期时间以及所述计数最大值生成所述第二比较值。进一步地，处理器1001可以调用存储器1005中存储的单电阻三相电流重构程序，还执行以下操作：所述根据所述三相剩余高电平导通时间生成所述定时器的第三比较值、第四比较值和第五比较值的步骤包括：根据所述第一剩余高电平导通时间、所述定时器的载波周期时间以及所述定时器的计数最大值生成所述第三比较值；根据所述第二剩余高电平导通时间、所述载波周期时间以及所述计数最大值生成所述第四比较值；根据所述第三剩余高电平导通时间、所述载波周期时间以及所述计数最大值生成所述第五比较值。进一步地，处理器1001可以调用存储器1005中存储的单电阻三相电流重构程序，还执行以下操作：所述根据所述预设测量开窗相，将所述第一比较值、所述第二比较值、所述第三比较值、所述第四比较值和所述第五比较值输入所述定时器的输出模块，生成所述逆变器的驱动信号的步骤包括：将所述第一比较值和所述第三比较值输入至与所述U相对应的定时器输出模块生成第一输出信号；将所述第二比较值和所述第四比较值输入至与所述V相对应的定时器输出模块生成第三输出信号；将所述第五比较值输入至与所述W相对应的定时器输出模块生成第五输出信号；基于逆变器信号的死区插入和信号的互补原则，根据所述第一输出信号生成第二输出信号，根据所述第三输出信号生成第四输出信号，根据所述第五输出信号生成第六输出信号；其中，所述逆变器的驱动信号包括所述第一输出信号、所述第二输出信号、所述第三输出信号、所述第四输出信号、所述第五输出信号、所述第六输出信号。进一步地，处理器1001可以调用存储器1005中存储的单电阻三相电流重构程序，还执行以下操作：所述在所述预设开窗时间采集流经所述逆变器测量电阻上的电流，基于采集的电流和三相绕组之间的电流关系获取每一相的相电流值的步骤包括：在所述第一开窗时间触发ADC采集，采集流经所述测量电阻得到第一电流值；在所述第二开窗时间触发ADC采集，采集流经所述测量电阻得到第二电流值；根据所述第一电流值、所述第二电流值，基于三相绕组之间的电流关系获取三相电流值。进一步地，所述第一开窗时间和所述第二开窗时间均大于预设最小开窗时间，其中，所述预设最小开窗时间由预防相桥臂直通死区时间、测量电阻电流建立时间以及ADC转换时间组成。本实施例提出的相电流重构方法可以应用于永磁同步电机，具体的，参照图2，图2为本发明相电流重构方法一实施例涉及的模块结构示意图，主要包括直流电源、逆变器，放大电路、ADC模块、控制器以及永磁同步电机。控制器根据采集的三相电流信息生成具有测量窗口的输出信号，驱动逆变器工作使电机运行，采样电阻电压经由放大电路放大送入ADC模块，控制器在测量窗口内触发ADC模块采集采样电阻上的电流信息，根据采集的两次信息实现对电机三相电流的检测。本实施例提供的相电流重构方法也可以应用于其他拓扑结构的电机上，在此不作具体限制。参照图3，本发明单电阻三相电流重构方法中的第一实施例，所述单电阻三相电流重构方法包括：步骤S10，接收逆变器三相高电平导通时间，根据预设测量开窗相、预设开窗时间以及所述三相高电平导通时间实时获取三相剩余高电平导通时间；本实施例中，三相高电平导通时间由控制器根据检测的三相电流值经过一系列运算获得。由于程序初始运行时无法获得三相电流值，因此默认电流的初始值为零，后续使用实时检测的三相电流值作为控制器的输入。预测测量的开窗相由开发人员需要采集的相电流决定，流经采样电阻电流代表的相电流值与开窗相的关系如表1所示。表1开窗相UUVVVWWUW测量电阻电流ia-icib-iaic-ib 进一步的，所述预设测量开窗相包括U开窗相和V开窗相，所述预设开窗时间包括第一开窗时间和第二开窗时间，所述根据预设测量开窗相、预设开窗时间以及所述三相高电平导通时间实时获取三相剩余高电平导通时间的步骤包括：步骤S11，将所述三相高电平导通时间中U相的高电平导通时间去除与所述U开窗相对应的所述第一开窗时间，得到第一剩余高电平导通时间；步骤S12，将所述三相高电平导通时间中V相的高电平导通时间去除与所述V开窗相对应的所述第二开窗时间，得到第二剩余高电平导通时间；步骤S13，将所述三相高电平导通时间中W相的高电平导通时间作为第三剩余高电平导通时间；其中，三相剩余高电平导通时间包括所述第一剩余高电平导通时间、所述第二剩余高电平导通时间和所述第三剩余高电平导通时间。可以理解的是，开发人员在选择开窗相，如选择U开窗相和V开窗相时为不同两相，如表1所示，若两开窗相为U开窗相和V开窗相，则通过测量电阻得到的电流为ia与ib，同时，两开窗相还可以选择为U开窗相和W开窗相、V开窗相和W开窗相、U开窗相和UV开窗相等，此处不再赘述。但若选择的开窗相为U开窗相、VW开窗相，则检测的电流为ia、-ia，无法完成相电流重构。同样的，具体的，第一开窗时间和第二开窗时间，开发人员可根据实际需求选择，且开窗相与开窗时间对应，同时所述第一开窗时间和所述第二开窗时间均大于预设最小开窗时间，其中，所述预设最小开窗时间由预防相桥臂直通死区时间、测量电阻电流建立时间以及ADC转换时间组成，预设最小开窗时间的计算公式如下：其中，Tdead为预防相桥臂直通的死区时间，Tset为电阻上的电流建立时间，TADCcon为ADC转换时间，Tmin为预设最小开窗时间。根据高电平导通时间不变原则，将三相高电平导通时间去掉测量开窗时间之后得到三相剩余导通的高电平导通时间，以维持控制电机的量不变。具体的，U相存在U开窗相，将U相的相高电平导通时间去除掉第一开窗时间，得到第一剩余高电平导通时间，即U相所对应的剩余高电平导通时间。同理，第二剩余高电平导通时间即为V相高电平导通时间去除掉第二开窗时间；第三剩余高电平导通时间则直接为W相的高电平导通时间。基于上述例子，当两开窗相为U开窗相和V开窗相，且U开窗相对应第一开窗时间，V开窗相对应第二开窗时间，则三相剩余高电平导通时间计算公式如下：其中，T*U、T*V、T*W分别对应第一剩余高电平导通时间、第二剩余高电平导通时间、第三剩余高电平导通时间，TU、TV、TW分别对应U相的高电平导通时间、V相的高电平导通时间、W相的高电平导通时间，所述接收的三相高电平导通时间，Twindow1为第一开窗时间，Twindow2为第二开窗时间。需要注意的是，上述三相剩余高电平导通时间计算公式与开窗相有关。若开窗相为V开窗相与VW开窗相，则V相的剩余导通时间为该相高电平导通时间去除掉第一开窗时间和第二开窗时间，W相的剩余导通时间为该相高电平导通时间去除掉第二开窗时间，U相的剩余导通时间与该相的高电平导通时间相同，可以理解的是，技术人员可根据上述例子，针对不同开窗相的得到不同三相剩余导通的高电平导通时间的计算公式。步骤S20，根据所述预设测量开窗相、所述预设开窗时间以及所述三相剩余高电平导通时间经由驱动信号模块生成逆变器驱动信号驱动逆变器工作；本实施例中，逆变器驱动信号经过驱动电路驱动功率器件工作，完成对电机的控制。进一步的，所述根据所述预设测量开窗相、所述预设开窗时间以及所述三相剩余高电平导通时间经由驱动信号模块生成逆变器驱动信号驱动逆变器工作的步骤包括：步骤S21，根据所述预设开窗时间生成所述驱动信号模块的定时器的第一比较值和第二比较值；进一步的，根据所述第一开窗时间、所述定时器的载波周期时间以及所述定时器的计数最大值生成所述第一比较值；根据所述第二开窗时间、所述载波周期时间以及所述计数最大值生成所述第二比较值。具体的，将第一开窗时间在定时器的载波周期时间中的占比值与定时器的计数最大值的积作为所述第一比较值，其中，参照图4所示，图4中包括定时器的载波和定时器的计数最大值，而定时器的载波周期时间即为图4中Ts。同样的，将第二开窗时间在定时器的载波周期时间中的占比值与定时器的计数最大值的积作为所述第二比较值。步骤S22，根据所述三相剩余高电平导通时间生成所述定时器的第三比较值、第四比较值和第五比较值；进一步的，根据所述第一剩余高电平导通时间、所述定时器的载波周期时间以及所述定时器的计数最大值生成所述第三比较值；根据所述第二剩余高电平导通时间、所述载波周期时间以及所述计数最大值生成所述第四比较值；根据所述第三剩余高电平导通时间、所述载波周期时间以及所述计数最大值生成所述第五比较值。具体的，得到第一剩余高电平导通时间在载波周期时间的占比值，将1减去占比值后与定时器的计数最大值的积作为所述第三比较值。同样的第四比较值和第五比较值的生成方式可参照第三比较值，此处不再赘述。此外，上述第一比较值和第二比较值的计算公式如下：其中，Twindow1为第一开窗时间，Twindow2为第二开窗时间，Nmax为定时器计数最大值，Ts为载波周期时间，Ncom1为第一比较值，Ncom2为第二比较值，如图4所示。同样的，若基于上述例子两开窗相为U开窗相和V开窗相，则第三比较值、第四比较值和第五比较值计算公式如下：其中，T*U、T*V、T*W分别对应第一剩余高电平导通时间、第二剩余高电平导通时间、第三剩余高电平导通时间，Ts为载波周期时间，Nmax为定时器计数最大值，Ncom3、Ncom4、Ncom5分别为第三比较值、第四比较值、第五比较值。此外，定义Ncommax为上述Ncom1与Ncom2中的最大值，若上述Ncom3、Ncom4或Ncom5任意一个小于Ncommax时，则对应的小于Ncommax的Ncom3、Ncom4或Ncom5等于Ncommax，例如根据上述公式求得的Ncom3、Ncom4或Ncom5中Ncom5小于Ncommax，则第三比较值、第四比较值、第五比较值对应为Ncom3、Ncom4和Ncommax。可以理解的是，当Twindow1与Twindow2设置的越大时，Ncom1与Ncom2的值越大，对Ncom3、Ncom4与Ncom5的限制就越大。因此，开发人员在设置Twindow1与Twindow2需要设置的足够小以保证电压的正常输出。步骤S23，根据所述预设测量开窗相，将所述第一比较值、所述第二比较值、所述第三比较值、所述第四比较值和所述第五比较值输入所述定时器的输出模块，生成所述逆变器的驱动信号；进一步的，将所述第一比较值和所述第三比较值输入至与所述U相对应的定时器输出模块生成第一输出信号；将所述第二比较值和所述第四比较值输入至与所述V相对应的定时器输出模块生成第三输出信号；将所述第五比较值输入至与所述W相对应的定时器输出模块生成第五输出信号；基于逆变器信号的死区插入和信号的互补原则，根据所述第一输出信号生成第二输出信号，根据所述第三输出信号生成第四输出信号，根据所述第五输出信号生成第六输出信号；其中，所述逆变器的驱动信号包括所述第一输出信号、所述第二输出信号、所述第三输出信号、所述第四输出信号、所述第五输出信号、所述第六输出信号。定时器的输出模块根据五个比较值产生输出信号波形图如图4所示，具体的，如基于上述上例子两开窗相选择U开窗相和V开窗相且分别对应第一开窗时间和第二开窗时间，将第一比较值、第三比较值送入U相定时器输出模块，在定时器向上计数并与第三比较值相等时，输出模块输出的第一输出信号变为高电平。在定时器向下计数并与第三比较值匹相同时，第一输出信号变为低电平。在定时器向下计数并与第一比较值相等时，第一输出信号变为高电平。在定时器计数值为零时，第一输出信号变为低电平。将第二比较值、第四比较值送入V相定时器输出模块，在定时器计数值为零时，第三输出信号变为高电平。在定时器向上计数并与第二比较值相等时，第三输出信号变为低电平。在定时器向上计数并与第四比较值相等时，第三输出信号变为高电平。在定时器向下计数并与第四比较值相等时，第三输出信号变为低电平。将定时器第五比较值送入W相定时器输出模块，在定时器向上计数并与第五比较值相等时，第五输出信号变为高电平。在定时器向下计数并与第五比较值相等时，第五输出信号变为低电平。上述信号的互补原则即为第一输出信号与第二输出信号相反，第三输出信号与第四输出信号相反，第五输出信号与第六输出信号相反，例如，第一输出信号为高电平则第二输出信号则为负高电平。同时，为预防相桥臂直通，则在基于互补原则得到的第二输出信号、第四输出信号和第六输出信号基础上加上死区时间。可以理解的是，定时器第一比较值、第二比较值等比较值送入的定时器输出模块会随着开窗相的选择发生改变。如，选择V开窗相和U开窗相且分别对应第一开窗时间和第二开窗时间，则将定时器第一比较值送入V相定时器输出模块，定时器第二比较值送入U相定时器输出模块；选择UV开窗相和U开窗相且分别对应第一开窗时间和第二开窗时间，则将定时器第一比较值、定时器第二比较值送入U相定时器输出模块，第二比较值送入V相定时器输出模块，具体的，不同开窗相情况下的比较值与其输入的相的对应关系可参上述例子，此处不再赘述。步骤S24，所述驱动信号经过驱动电路驱动所述逆变器工作。在本实施例中，若两开窗相为U开窗相和V开窗相，则第一输出信号、第三输出信号、第五输出信号经过驱动电路分别对应驱动U相上桥、V相上桥、W相上桥，第二输出信号、第四输出信号、第六输出信号经过驱动电路分别对应驱动U相下桥、V相下桥、W相下桥，从而最终驱动逆变器工作。步骤S30，在所述预设开窗时间采集流经所述逆变器测量电阻上的电流，基于采集的电流和三相绕组之间的电流关系获取每一相的相电流值。进一步的，在所述第一开窗时间触发ADC采集，采集流经所述测量电阻得到第一电流值；在所述第二开窗时间触发ADC采集，采集流经所述测量电阻得到第二电流值；根据所述第一电流值、第二电流值，基于三相绕组之间的电流关系获取三相电流值。可以理解的是，在本实施例中，逆变器所接收的六个输出信号是依据开发人员预设的开窗相和开窗时间所生成的，因此，若两开窗相为U开窗和V开窗相分别对应第一开窗时间和第二开窗时间，当到达第一开窗时间时触发ADC采集，对测量电阻上的电流进行采集得到第一电流值，第一电流值实际则为ia，当到达第二开窗时间触发ADC采集，对测量电阻上的电流进行采集得到第二电流值，第二电流值实际则为ib。三相绕组之间的电流关系为ia + ib + ic = 0，因此，ic =﹣ia﹣ib，至此基于单电阻的三相电流重构完成。本实施例通过直接预设测量窗口的方式，消除了传统单电阻采样方式的非观测区域，将整个电压矢量空间的相电流重构逻辑统一，使得采样电流连续性好、近似于载波周期的平均电流，可用于高性能的电机控制。此外，本实施例还提供一种单电阻三相电流重构设备，所述单电阻三相电流重构设备包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的单电阻三相电流重构程序，所述单电阻三相电流重构程序被所述处理器执行时实现如上所述的单电阻三相电流重构方法的步骤。本发明单电阻三相电流重构设备的具体实施方式与上述单电阻三相电流重构方法各实施例基本相同，在此不再赘述。此外，本实施例还提供一种计算可读存储介质，所述计算可读存储介质上存储有单电阻三相电流重构程序，所述单电阻三相电流重构程序被处理器执行时实现如上所述的单电阻三相电流重构方法的步骤。本发明介质具体实施方式与上述单电阻三相电流重构方法各实施例基本相同，在此不再赘述。需要说明的是，在本文中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者系统不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者系统所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括该要素的过程、方法、物品或者系统中还存在另外的相同要素。上述本发明实施例序号仅仅为了描述，不代表实施例的优劣。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到上述实施例方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在如上所述的一个存储介质中，包括若干指令用以使得一台终端设备执行本发明各个实施例所述的方法。以上仅为本发明的优选实施例，并非因此限制本发明的专利范围，凡是利用本发明说明书及附图内容所作的等效结构或等效流程变换，或直接或间接运用在其他相关的技术领域，均同理包括在本发明的专利保护范围内。
