标题title
一种服务器资源的调度方法及系统
摘要abst
本发明涉及服务器运维技术领域，具体涉及一种服务器资源的调度方法，具体包括：步骤S1：获取已执行应用实例的至少一个服务器的空闲的硬件资源和应用实例的所需的硬件资源；步骤S2：判断空闲的硬件资源是否大于所需的硬件资源；若是，返回步骤S1；若否，转向步骤S3；步骤S3：采用一扩容方法自服务器资源池中选择一服务器，并将应用实例分配至服务器，随后返回步骤S1。本发明的有益效果在于：通过获取应用实例的所需资源有效判断出未来一时间段内维持应用实例正常工作所需的硬件资源，进而实现在短时间内对服务器的有效调度。可根据突发流量的变化情况及时增加或减少用于运行某一应用实例的服务器数量，提高服务器系统整体的利用率。
权利要求书clms
1.一种服务器资源的调度方法，其特征在于，适用于一服务器资源池，所述服务器资源池中设置有多个服务器，所述服务器用于执行至少一个应用实例，所述应用实例运行于至少一个所述服务器上；则所述调度方法包括一用于向运行中的所述应用实例分配所述服务器的分配方法，所述分配方法具体包括：步骤S1：获取已执行所述应用实例的至少一个所述服务器的空闲的硬件资源和所述应用实例的所需的所述硬件资源；步骤S2：判断空闲的所述硬件资源是否大于所需的所述硬件资源；若是，返回所述步骤S1；若否，转向步骤S3；步骤S3：采用一扩容方法自所述服务器资源池中选择一服务器，并将所述应用实例分配至所述服务器，随后返回所述步骤S1。2.根据权利要求1所述的调度方法，其特征在于，所述扩容方法包括：步骤A1：获取当前服务器资源池中的多个所述服务器的空闲的所述硬件资源；步骤A2：根据所述服务器的空闲的硬件资源和所述应用实例的所需的硬件资源选择至少两个可以用于执行所述应用实例的服务器；步骤A3：采用一服务器评分方法选择评分最高的服务器作为用于执行所述用于实例的服务器。3.根据权利要求2所述的调度方法，其特征在于，所述步骤A2还包括：当可以用于执行所述应用实例的服务器的数量少于两个时，发出一预警信息至运维人员。4.根据权利要求2所述的调度方法，其特征在于，所述硬件资源包括：处理器空闲率、内存空闲率、硬盘空闲率、网络带宽空闲率；则所述步骤A3包括：步骤A31：根据所述处理器空闲率、所述内存空闲率、所述硬盘空闲率、所述网络带宽空闲率分别计算生成处理器资源评分、内存资源评分、硬盘资源评分和网络资源评分；步骤A32：根据所述处理器资源评分、所述内存资源评分、所述硬盘资源评分和所述网络资源评分生成所述服务器的服务器评分；步骤A33：根据所述服务器评分对多个所述服务器由高至低依次排序，以输出所述评分最高的服务器。5.根据权利要求1所述的调度方法，其特征在于，所述调度方法还包括采用一第一缩容方法或第二缩容方法自所述服务器上停止所述应用实例；则所述第一缩容方法包括：获取运行中的多个所述应用实例占用的所述硬件资源和多个所述应用实例的运行时间；根据所述应用实例占用硬件资源生成实例硬件占用评分；根据所述运行时间对所述应用实例进行排序生成实例排序结果；根据所述实例排序结果生成实例时间评分；根据所述实例时间评分和所述实例硬件占用评分生成实例评分；根据所述实例评分停止该服务器上的所述应用实例；所述第二缩容方法包括：根据一预设的实例缩容规则自所述服务器上停止所述应用实例。6.一种服务器资源的调度系统，其特征在于，用于实施如权利要求1-5任意一项所述的调度方法，其特征在于，包括：采集模块，所述采集模块连接所述服务器资源池，获取所述服务器资源池中的空闲资源和应用实例的占用资源，所述采集模块还采集所述应用实例的访问量；分析模块，所述分析模块连接所述采集模块，根据所述应用实例的所述占用资源和所述访问量判断是否需要进行扩容或缩容；调度模块，所述调度模块连接所述分析模块，并根据所述分析模块的输出结果将所述服务器分配至所述应用实例，或从所述服务器中停止所述应用实例；反馈模块，所述反馈模块连接所述采集模块、所述分析模块和所述调度模块，用于显示所述空闲资源、所述应用实例、所述占用资源和所述调度模块的调度结果。7.根据权利要求6所述的调度系统，其特征在于，所述采集模块包括：流量监控子模块，所述流量监控子模块连接一外部的路由设备，自所述路由设备中获取所述应用实例的访问量；硬件统计子模块，所述硬件统计子模块连接所述服务器资源池，所述硬件统计子模块自所述服务器资源池中获取所述服务器的硬件资源；实例统计子模块，所述实例统计子模块连接所述服务器资源池，所述实例统计子模块自所述服务器资源池中采集所述应用实例的占用资源。8.根据权利要求6所述的调度系统，其特征在于，所述分析模块包括：规则配置子模块，所述规则配置子模块中预设有至少一个预警规则；匹配子模块，所述匹配子模块连接所述采集模块和所述规则配置子模块，判断所述访问量、所述占用资源、所述空闲资源是否符合所述预警规则，并生成匹配结果。9.根据权利要求6所述的调度系统，其特征在于，所述调度模块包括：扩容子模块，所述扩容子模块连接所述服务器资源池和所述分析模块，所述扩容子模块根据一预设的扩容规则将所述应用实例分配至所述服务器；缩容子模块，所述缩容子模块连接所述服务器资源池和所述分析模块，所述缩容子模块根据一预设的缩容规则自所述服务器中停止所述应用实例；第一通知子模块，所述第一通知子模块连接所述扩容子模块和所述缩容子模块，所述第一通知子模块根据所述扩容子模块的输出结果，或所述缩容子模块的输出结果生成所述调度结果。10.根据权利要求9所述的调度系统，其特征在于，所述反馈模块包括：显示子模块，所述显示子模块连接一外部的显示屏，所述显示屏用于显示所述空闲资源、所述应用实例、所述占用资源和所述调度模块的调度结果；第二通知子模块，所述第二通知子模块连接所述调度模块和外部的终端设备，用于根据所述调度模块的调度结果向所述终端设备发送通知信息。
说明书desc
技术领域本发明涉及服务器运维技术领域，具体涉及一种服务器资源的调度方法。背景技术随着互联网业务规模的逐渐扩展和实际经营业务的需要，互联网企业往往需要在高并发和存在突发流量的情况下为用户提供正常服务。并发，是操作系统领域的一个概念，指的是一段时间内多任务流交替执行的现象。当互联网企业基于业务需要，在短时间内为大量用户提供互联网服务时，其网关设备和后端服务器往往会承担大量的访问请求，进而使得访问请求的数量超过了通常情况下的服务器承载上限，进而影响到互联网业务的正常进行。通常情况下，伴随着业务扩展或是特定的业务节点，互联网企业会适应性增加服务器数量以提高其负载上限，进而避免高并发或突发流量对互联网业务造成的影响。但是，在闲时或通常情况下部署过多的服务器会带来运维成本的上升。因此，通过设置服务器调度系统在业务正常运行时实现对服务器资源的动态调控便具有了极大的经济价值。现有技术中对服务器的调度通常是依赖于人为进行操作，其扩容时间较长，使得整体的调度过程响应不够及时，无法有效应对突发流量。发明内容针对现有技术中存在的上述问题，现提供一种服务器资源的调度方法。具体技术方案如下：一种服务器资源的调度方法，适用于一服务器资源池，所述服务器资源池中设置有多个服务器，所述服务器用于执行至少一个应用实例，所述应用实例运行于至少一个所述服务器上；则所述调度方法包括一用于向运行中的所述应用实例分配所述服务器的分配方法，所述分配方法具体包括：步骤S1：获取已执行所述应用实例的至少一个所述服务器的空闲的硬件资源和所述应用实例的所需的所述硬件资源；步骤S2：判断空闲的所述硬件资源是否大于所需的所述硬件资源；若是，返回所述步骤S1；若否，转向步骤S3；步骤S3：采用一扩容方法自所述服务器资源池中选择一服务器，并将所述应用实例分配至所述服务器，随后返回所述步骤S1。优选地，所述扩容方法包括：步骤A1：获取当前服务器资源池中的多个所述服务器的空闲的所述硬件资源；步骤A2：根据所述服务器的空闲的硬件资源和所述应用实例的所需的硬件资源选择至少两个可以用于执行所述应用实例的服务器；步骤A3：采用一服务器评分方法选择评分最高的服务器作为用于执行所述用于实例的服务器。优选地，所述步骤A2还包括：当可以用于执行所述应用实例的服务器的数量少于两个时，发出一预警信息至运维人员。优选地，所述硬件资源包括：处理器空闲率、内存空闲率、硬盘空闲率、网络带宽空闲率；则所述步骤A3包括：步骤A31：根据所述处理器空闲率、所述内存空闲率、所述硬盘空闲率、所述网络带宽空闲率分别计算生成处理器资源评分、内存资源评分、硬盘资源评分和网络资源评分；步骤A32：根据所述处理器资源评分、所述内存资源评分、所述硬盘资源评分和所述网络资源评分生成所述服务器的服务器评分；步骤A33：根据所述服务器评分对多个所述服务器由高至低依次排序，以输出所述评分最高的服务器。优选地，所述调度方法还包括采用一第一缩容方法或第二缩容方法自所述服务器上停止所述应用实例则所述第一缩容方法包括：获取运行中的多个所述应用实例占用的所述硬件资源和多个所述应用实例的运行时间；根据所述应用实例占用硬件资源生成实例硬件占用评分；根据所述运行时间对所述应用实例进行排序生成实例排序结果；根据所述实例排序结果生成实例时间评分；根据所述实例时间评分和所述实例硬件占用评分生成实例评分；根据所述实例评分停止该服务器上的所述应用实例；所述第二缩容方法包括：根据一预设的实例缩容规则自所述服务器上停止所述应用实例。一种服务器资源的调度系统，用于实施上述的调度方法，其特征在于，包括：采集模块，所述采集模块连接所述服务器资源池，获取所述服务器资源池中的空闲资源和应用实例的占用资源，所述采集模块还采集所述应用实例的访问量；分析模块，所述分析模块连接所述采集模块，根据所述应用实例的所述占用资源和所述访问量判断是否需要进行扩容或缩容；调度模块，所述调度模块连接所述分析模块，并根据所述分析模块的输出结果将所述服务器分配至所述应用实例，或从所述服务器中停止所述应用实例；反馈模块，所述反馈模块连接所述采集模块、所述分析模块和所述调度模块，用于显示所述空闲资源、所述应用实例、所述占用资源和所述调度模块的调度结果。优选地，所述采集模块包括：流量监控子模块，所述流量监控子模块连接一外部的路由设备，自所述路由设备中获取所述应用实例的访问量；硬件统计子模块，所述硬件统计子模块连接所述服务器资源池，所述硬件统计子模块自所述服务器资源池中获取所述服务器的硬件资源；实例统计子模块，所述实例统计子模块连接所述服务器资源池，所述实例统计子模块自所述服务器资源池中采集所述应用实例的占用资源。优选地，所述分析模块包括：规则配置子模块，所述规则配置子模块中预设有至少一个预警规则；匹配子模块，所述匹配子模块连接所述采集模块和所述规则配置子模块，判断所述访问量、所述占用资源、所述空闲资源是否符合所述预警规则，并生成匹配结果。优选地，所述调度模块包括：扩容子模块，所述扩容子模块连接所述服务器资源池和所述分析模块，所述扩容子模块根据一预设的扩容规则将所述应用实例分配至所述服务器；缩容子模块，所述缩容子模块连接所述服务器资源池和所述分析模块，所述缩容子模块根据一预设的缩容规则自所述服务器中停止所述应用实例；第一通知子模块，所述通知子模块连接所述扩容子模块和所述缩容子模块，所述第一通知子模块根据所述扩容子模块的输出结果，或所述缩容子模块的输出结果生成所述调度结果。优选地，所述反馈模块包括：显示子模块，所述显示子模块连接一外部的显示屏，所述显示屏用于显示所述空闲资源、所述应用实例、所述占用资源和所述调度模块的调度结果；第二通知子模块，所述通知子模块连接所述调度模块和外部的终端设备，用于根据所述调度模块的调度结果向所述终端设备发送通知信息。上述技术方案具有如下优点或有益效果：通过获取应用实例的所需资源有效判断出未来一时间段内维持应用实例正常工作所需的硬件资源，进而实现在短时间内对服务器的有效调度。可根据突发流量的变化情况及时增加或减少用于运行某一应用实例的服务器数量，提高服务器系统整体的利用率。附图说明参考所附附图，以更加充分的描述本发明的实施例。然而，所附附图仅用于说明和阐述，并不构成对本发明范围的限制。图1为本发明实施例的分配方法示意图；图2为本发明实施例的扩容方法示意图；图3为本发明实施例的步骤A3子步骤示意图；图4为本发明实施例的第一缩容方法示意图；图5为本发明实施例的系统原理框图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动的前提下所获得的所有其他实施例，都属于本发明保护的范围。需要说明的是，在不冲突的情况下，本发明中的实施例及实施例中的特征可以相互组合。下面结合附图和具体实施例对本发明作进一步说明，但不作为本发明的限定。本发明包括：一种服务器资源的调度方法，适用于一服务器资源池，服务器资源池中设置有多个服务器，服务器用于执行至少一个应用实例，应用实例运行于至少一个服务器上；则调度方法包括一用于向运行中的应用实例分配服务器的分配方法，如图1所示，分配方法具体包括：步骤S1：获取已执行应用实例的至少一个服务器的空闲的硬件资源和应用实例的所需的硬件资源；步骤S2：判断空闲的硬件资源是否大于所需的硬件资源；若是，返回步骤S1；若否，转向步骤S3；步骤S3：采用一扩容方法自服务器资源池中选择一服务器，并将应用实例分配至服务器，随后返回步骤S1。具体地，针对现有技术中对于应用实例采用人工扩容方法响应速度较慢，不能很好地响应突发流量的问题，本申请文件提供一种调度方法。其在具体实施时作为软件实施例部署于一服务器或其他计算机设备中，通过连接网关、路由或负载均衡设备等获取到访问相应应用实例的访问请求，进而推测应用实例在未来某一时间段内的所需资源，并根据预测结果对用于执行该应用实例的服务器进行扩容或缩容。应用实例在实施过程中通常表现为服务器操作系统中的进程、服务或其他计算机程序，用于互联网企业向用户提供互联网服务。应用实例的占用资源指用于该应用实例正常运行所需的硬件资源，包括处理器空闲率、内存空闲率、硬盘空闲率、网络带宽空闲率等。服务器资源池在实施例中可表现为云服务商提供的服务器集群或是用户自行构建的私有云。服务器资源池内的每台服务器所具有的硬件未必相同，每台服务器的具体硬件配置和当前的空闲硬件资源采用一物理机列表的形式存储于服务器资源池中，以供调度方法作为判断和调度的依据。在一种较优的实施例中，如图2所示，扩容方法包括：步骤A1：获取当前服务器资源池中的多个服务器的空闲的硬件资源；步骤A2：根据服务器的空闲的硬件资源和应用实例的所需的硬件资源选择至少两个可以用于执行应用实例的服务器；步骤A3：采用一服务器评分方法选择评分最高的服务器作为用于执行用于实例的服务器。在一种较优的实施例中，步骤A2还包括：当可以用于执行应用实例的服务器的数量少于两个时，发出一预警信息至运维人员，用于提醒运维人员对服务器资源池进行硬件扩容或缩减部分应用实例。具体地，扩容方法在中包括一预选步骤。当需要对应用实例进行扩容时，通过调取服务器资源池的物理机列表以获取服务器硬件资源池中的所有服务器的当前空闲硬件资源的状况，并筛选出可用于执行应用实例的服务器。筛选条件为“与”关系，即该服务器的当前空闲硬件资源必须同时满足用于执行该应用实例的处理器空闲率、内存空闲率、硬盘空闲率和网络带宽空闲率。而当选择出的服务器数量少于两个时，表明当前服务器资源池中服务器负载接近于上限，应当添加新的服务器，或缩减部分应用实例以释放服务器的硬件资源。在一种较优的实施例中，硬件资源包括：处理器空闲率、内存空闲率、硬盘空闲率、网络带宽空闲率；如图3所示，则步骤A3包括：步骤A31：根据处理器空闲率、内存空闲率、硬盘空闲率、网络带宽空闲率分别计算生成处理器资源评分、内存资源评分、硬盘资源评分和网络资源评分；步骤A32：根据处理器资源评分、内存资源评分、硬盘资源评分和网络资源评分生成服务器的服务器评分；步骤A33：根据服务器评分对多个服务器由高至低依次排序，以输出评分最高的服务器。具体地，在一种实施例中，服务器评分的计算方法包括：当处理器空闲率大于50％时，处理器资源评分为10分；当处理器空闲率小于50％且大于20％时，处理器资源评分为5分；当处理器空闲率小于20％时，处理器资源评分为0分。当内存空闲率大于50％时，内存资源评分为10分；当内存空闲率小于50％且大于20％时，内存资源评分为5分；当内存空闲率小于20％时，内存资源评分为0分。当硬盘空闲率大于50％时，硬盘资源评分为10分；当硬盘空闲率小于50％且大于20％时，硬盘资源评分为5分；当硬盘空闲率小于20％时，硬盘资源评分为0分。当网络带宽空闲率大于50％时，网络资源评分为10分；当网络带宽空闲率小于50％且大于20％时，网络资源评分为5分；当网络带宽空闲率小于20％时，网络资源评分为0分。在一种较优的实施例中，调度方法还包括采用一第一缩容方法或第二缩容方法自服务器上停止应用实例；如图4所示，则第一缩容方法包括：获取运行中的多个应用实例占用的硬件资源和多个应用实例的运行时间；根据应用实例占用硬件资源生成实例硬件占用评分；根据运行时间对应用实例进行排序生成实例排序结果；根据实例排序结果生成实例时间评分；根据实例时间评分和实例硬件占用评分生成实例评分；根据实例评分停止该服务器上的应用实例；第二缩容方法包括：根据一预设的实例缩容规则自服务器上停止应用实例。具体地，在实际实施过程中，实例时间评分和实例硬件占用评分的生成过程之间的先后顺序并不进行限定，其可以是以顺序执行、相反方向执行或同时执行。作为可选的实施方式，实例时间评分的计算方法如下：选取服务运行时间最长的应用实例，记录其实例时间评分为1分；选取最早生成的应用实例，记录其实例时间评分为20分。作为可选的实施方式，实例硬件占用评分的计算方法如下；当应用实例的内存占用率超过85％，记录其实例评分为100；当应用实例的内存占用率大于70％小于85％，对其实例硬件占用评分增加10分；当应用实例的内存占用率大于50％小于70％，对其实例硬件占用评分增加5分；当应用实例的内存占用率小于50％，对其实例硬件占用评分增加1分。当应用实例的处理器占用率超过85％，记录其实例评分为100；当应用实例的处理器占用率大于50％小于85％，对其实例硬件占用评分增加10分；当应用实例的处理器占用率小于50％，对其实例硬件占用评分增加1分。当应用实例的硬盘占用率超过85％，记录其实例评分为100；当应用实例的硬盘占用率大于70％小于85％，对其实例硬件占用评分增加10分；当应用实例的硬盘占用率大于50％小于70％，对其实例硬件占用评分增加5分；当应用实例的硬盘占用率小于50％，对其实例硬件占用评分增加1分。当应用实例的网络带宽占用率超过85％，记录其实例评分为100；当应用实例的网络带宽占用率大于50％小于85％，对其实例硬件占用评分增加10分；当应用实例的网络带宽占用率小于50％，对其实例硬件占用评分增加1分。一种服务器资源的调度系统，用于实施上述的调度方法，如图5所示，包括：采集模块1，采集模块1连接服务器资源池A，获取服务器资源池A中的空闲资源和应用实例的占用资源，采集模块1还采集应用实例的访问量；分析模块2，分析模块2连接采集模块1，根据应用实例的占用资源和访问量判断是否需要进行扩容或缩容；调度模块3，调度模块3连接分析模块2，并根据分析模块2的输出结果将服务器分配至应用实例，或从服务器中停止应用实例；反馈模块4，反馈模块3连接采集模块1、分析模块2和调度模块3，用于显示空闲资源、应用实例、占用资源和调度模块的调度结果。在一种较优的实施例中，采集模块1包括：流量监控子模块11，流量监控子模块11连接一外部的路由设备B，自路由设备B中获取应用实例的访问量；硬件统计子模块12，硬件统计子模块12连接服务器资源池A，硬件统计子模块自服务器资源池A中获取服务器的硬件资源；实例统计子模块13，实例统计子模块13连接服务器资源池A，实例统计子模块13自服务器资源池A中采集应用实例的占用资源。在一种较优的实施例中，分析模块2包括：规则配置子模块21，规则配置子模块21中预设有至少一个预警规则；匹配子模块22，匹配子模块22连接采集模块1和规则配置子模块21，判断访问量、占用资源、空闲资源是否符合预警规则，并生成匹配结果。在一种较优的实施例中，调度模块3包括：扩容子模块31，扩容子模块31连接服务器资源池A和分析模块2，扩容子模块31根据一预设的扩容规则将应用实例分配至服务器；缩容子模块32，缩容子模块32连接服务器资源池A和分析模块2，缩容子模块根据一预设的缩容规则自服务器中停止应用实例；第一通知子模块33，第一通知子模块33连接扩容子模块31和缩容子模块32，第一通知子模块33根据扩容子模块31的输出结果，或缩容子模块32的输出结果生成调度结果。在一种较优的实施例中，反馈模块4包括：显示子模块41，显示子模块41连接一外部的显示屏，显示屏用于显示空闲资源、应用实例、占用资源和调度模块的调度结果；第二通知子模块42，第二通知子模块42连接调度模块3和外部的终端设备C，用于根据调度模块的调度结果向终端设备发送通知信息。本发明的有益效果在于：通过获取应用实例的所需资源有效判断出未来一时间段内维持应用实例正常工作所需的硬件资源，进而实现在短时间内对服务器的有效调度。可根据突发流量的变化情况及时增加或减少用于运行某一应用实例的服务器数量，提高服务器系统整体的利用率。以上仅为本发明较佳的实施例，并非因此限制本发明的实施方式及保护范围，对于本领域技术人员而言，应当能够意识到凡运用本发明说明书及图示内容所作出的等同替换和显而易见的变化所得到的方案，均应当包含在本发明的保护范围内。
