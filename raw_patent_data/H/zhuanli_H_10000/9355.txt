标题title
基于FlexE和SPN技术的电力业务网络切片时延计算方法及装置
摘要abst
本发明提供一种基于FlexE和SPN技术的电力业务网络切片时延计算方法及装置，通过电力通信传输网络拓扑和FlexE/SPN的转发特性构建虚拟的网络模型，形成以虚拟子拓扑、虚拟节点、虚拟端口和虚拟链路构成的具象化电网；基于FlexE时隙化交换技术和SPN转发技术，提出电力业务网络切片时延模型，引入节点类型、通道类型、业务包长度、设备类型、接口速率和链路长度六个因素，基于不同网络切片方案和不同虚拟子拓扑，构建与各种因素组合对应的节点时延信息表、光纤长度信息表和控制器端路径时延表，精细化的模拟现网时延特征，并将源宿节点之间最短传输路径拆解为源节点、宿节点、起始链路、结束链路和转发路径五部分，直接查询和计算各部分的时延值累加，快速精准得到网络切片实例端到端时延值。
权利要求书clms
1.一种基于FlexE和SPN技术的电力业务网络切片时延计算方法，其特征在于，包括：初始化虚拟网络模型，所述虚拟网络包含至少一个虚拟子拓扑，所述虚拟子拓扑由多个虚拟节点构成，各虚拟节点通过虚拟端口进行业务接入并通过虚拟链路连接；各虚拟节点以服务提供商边缘节点或服务提供商核心节点的形式连入不同的虚拟子拓扑，作为所述服务提供商核心节点的虚拟节点采用FlexE 5G通道、MTN 10M通道交叉的硬切片承载方案转发，或基于FlexE 5G通道交叉和分组交换的软切片承载方案转发；对所述服务提供商边缘节点，以及两种转发形式的提供商核心节点分别配置时延模型计算时延值，以基于所述虚拟网络模型构建节点时延信息表，用于记载各虚拟节点的时延值；基于所述虚拟网络模型构建光纤长度信息表，用于记载所述虚拟网络模型中各虚拟节点间链路的光纤长度；基于所述虚拟网络模型构建路径时延表，用于记载在各独立的虚拟子拓扑中，各虚拟节点作为服务提供商核心节点进行网络内连接时起始端节点与结束端节点之间所有虚拟节点和链路的时延值；获取目标业务网络切片上用于接入的源节点和用于接出的宿节点，基于预设最短路径算法获取所述源节点和所述宿节点之间的最短传输路径，标记所述最短传输路径上与所述源节点连接的节点为起始端节点，标记所述最短传输路径上与所述宿节点连接的节点为结束端节点，标记所述起始端节点与所述源节点之间的链路为起始链路，标记所述结束端节点与所述宿节点间的链路为结束链路；标记所述最短传输路径上所述起始端节点与所述结束端节点之间的所有虚拟节点和链路为转发路径；查询所述节点时延信息表获取所述源节点和所述宿节点作为服务提供商边缘节点的时延值，查询所述光纤长度信息表获取所述起始链路和所述结束链路的光纤长度并计算相应的时延值；判断所述转发路径是否跨多个虚拟子拓扑，当所述源节点和所述宿节点在同一虚拟子拓扑内时，查询所述路径时延表获取所述转发路径对应的时延值，将所述源节点、所述宿节点、所述起始链路、所述结束链路和所述转发路径的时延值累加得到目标业务网络切片时延；当所述源节点和所述宿节点跨多个虚拟子拓扑时，将所述转发路径按照经过的各虚拟子拓扑划分为多个转发子路径，查询所述路径时延表获取各转发子路径的传输时延，将所述源节点、所述宿节点、所述起始链路、所述结束链路和所述转发子路径的时延值累加得到目标业务网络切片时延。2.根据权利要求1所述的基于FlexE和SPN技术的电力业务网络切片时延计算方法，其特征在于，所述节点时延信息表用于记载各虚拟节点作为服务提供商边缘节点或服务提供商核心节点时，在不同通道类型、设备类型、接口速率以及业务包长度组下对应的节点时延值；所述设备类型包括框式设备或盒式设备；所述路径时延表用于记载在各独立的虚拟子拓扑中，各虚拟节点作为服务提供商核心节点进行网络内连接时，不同通道类型、设备类型、业务包长度组合和路径组合下不同起始端节点与结束端节点之间所有虚拟节点和链路整体的时延值。3.根据权利要求1所述的基于FlexE和SPN技术的电力业务网络切片时延计算方法，其特征在于，对所述服务提供商边缘节点，以及两种转发形式的提供商核心节点分别配置时延模型计算时延值中，所述服务提供商边缘节点PE的时延值TPe计算式为：TPe＝T1+T2+T3+T4+T5+T6；其中，T1表示分组报文通过UNI接口进入所述服务提供商边缘节点PE的时延值，T2表示所述分组报文在所述服务提供商边缘节点PE中经报文缓存、流量监管与转发查表处理的时延值；T3表示所述服务提供商边缘节点PE中交换网信元切片与重组处理的时延值；T4表示所述服务提供商边缘节点PE中下行调度处理的时延值；T5表示所述服务提供商边缘节点PE的FlexE/MTN封装映射处理中MAC子层的处理时延值；T6表示所述服务提供商边缘节点PE的FlexE/MTN封装映射处理中从Path子层到光模块的处理时延值；采用FlexE 5G通道、MTN 10M通道交叉的硬切片承载方案转发的服务提供商核心节点P-L1的时延值TP-L1计算式为：TP-L1＝T1′+T2′+T3′；其中，T1′表示上行MTN接口时隙表中恢复出MTN Path层66B码块的时延值，T2′表示在所述服务提供商核心节点P-L1中交换网信元切片和矩阵交叉的时延值；T3′表示在所述服务提供商核心节点P-L1中下行映射复用到接口时隙分配表中传送加上频率适配的时延值；基于FlexE 5G通道交叉和分组交换的软切片承载方案转发的服务提供商核心节点P-L2的时延值TP-L2计算式为：TP-L2＝T1”+T2”+T3”+T4”+T5”+T6”；其中，T1”表示所述服务提供商核心节点P-L2中上行MTN接口时隙表中恢复出5GClient MAC报文的时延值；T2”表示所述分组报文在所述服务提供商核心节点P-L2中经报文缓存、流量监管与转发查表处理的时延值；T3”表示所述服务提供商核心节点P-L2中交换网信元切片与重组处理的时延值；T4”表示所述服务提供商核心节点P-L2中下行调度处理的时延值；T5”表示所述服务提供商核心节点P-L2的FlexE/MTN封装映射处理中MAC子层的处理时延值；T6”表示所述服务提供商核心节点P-L2的FlexE/MTN封装映射处理中从Path子层到光模块的时延值；所述节点时延信息表包括各虚拟节点作为服务提供商边缘节点时的PE节点时延信息表和作为服务提供商核心节点时的P节点时延信息表，所述P节点时延信息表分为按照硬切片承载方案转发的P-L1时延表和按照软切片承载方案转发的P-L2时延表。4.根据权利要求1所述的基于FlexE和SPN技术的电力业务网络切片时延计算方法，其特征在于，查询所述光纤长度信息表获取所述起始链路和所述结束链路的光纤长度并计算相应的时延值，计算式为：T＝costn*5us/km；其中，T表示第n条链路的传输时延，costn表示第n条链路的光纤长度；当所述源节点和所述宿节点在同一虚拟子拓扑内时，将所述源节点、所述宿节点、所述起始链路、所述结束链路和所述转发路径的时延值累加得到目标业务网络切片时延，计算式为：T＝T′+T+T+T+T；其中，PE1和PE2是表示在同一虚拟子拓扑下作为所述源节点和所述宿节点的两个服务提供商边缘节点，T表示所述源节点的时延值，T表示所述宿节点的时延值；T′表示所述转发路径的时延；T表示所述起始链路的时延，T表示所述结束链路的时延。5.根据权利要求1所述的基于FlexE和SPN技术的电力业务网络切片时延计算方法，其特征在于，当所述源节点和所述宿节点跨多个虚拟子拓扑时，将所述转发路径按照经过的各虚拟子拓扑划分为多个转发子路径，查询所述路径时延表获取各转发子路径的传输时延，将所述源节点、所述宿节点、所述起始链路、所述结束链路和所述转发子路径的时延值累加得到目标业务网络切片时延，包括：遍历查询所述转发路径上的各虚拟节点的信息表，获取各虚拟节点所属虚拟子拓扑的ID信息，通过判断所述转发路径上前后虚拟节点之间所属虚拟子拓扑的关联关系，获得多个转发子路径以及前后转发子路径之间的相交节点；查询所述节点时延信息表获得各所述相交节点作为服务提供商核心节点时的时延值；将所述源节点、所述宿节点、所述起始链路、所述结束链路和所述转发子路径的时延值累加得到目标业务网络切片时延，计算式为：其中，PE1和PE2是表示在同一虚拟子拓扑下作为所述源节点和所述宿节点的两个服务提供商边缘节点，T表示所述源节点的时延值，T表示所述宿节点的时延值；Ti表示第i条转发子路径的时延；Pm表示第m个转发子路径与第m+1个转发子路径之间的相交节点，T表示第m个转发子路径与第m+1个转发子路径之间的相交节点的时延值；T表示所述起始链路的时延，T表示所述结束链路的时延。6.根据权利要求1所述的基于FlexE和SPN技术的电力业务网络切片时延计算方法，其特征在于，所述预设最短路径算法为Diikstra算法、Bellman-ford算法或Floyd算法。7.根据权利要求1所述的基于FlexE和SPN技术的电力业务网络切片时延计算方法，其特征在于，所述路径时延表对每个传输路径的转发特性配置基于FlexE 5G通道和MTN 10M通道交叉的硬切片技术的第一类路径时延表和/或基于FlexE 5G通道交叉和分组交换的软切片技术的第二类路径时延表，所述第一类路径时延表记录起始端节点、结束端节点、通道类型、路径和相应的时延值，所述第二类路径时延表记录起始端节点、结束端节点、通道类型、业务包长度、路径和相应的时延值。8.根据权利要求1所述的基于FlexE和SPN技术的电力业务网络切片时延计算方法，其特征在于，将所述电力业务划分为至少包含智能分布式配电自动化、用电负荷需求响应控制和分布式能源调控的安全I区，至少包含高级计量、同步相量测量、移动现场施工作业管控和应急现场自组网应用的安全II区，至少包含变电站巡检、输电线路巡检和配电房视频综合监控的安全III区，至少办公信息化、视频会议的安全IV区，其中，对于所述安全I区和所述安全II区的电力业务采用硬切片承载方案进行模拟，对于所述安全III区和所述安全IV区的电力业务采用软切片承载方案进行模拟。9.一种基于FlexE和SPN技术的电力业务网络切片时延计算设备，其特征在于，包括：虚拟网络初始化模块，用于初始化虚拟网络模型，所述虚拟网络包含至少一个虚拟子拓扑，所述虚拟子拓扑由多个虚拟节点构成，各虚拟节点通过虚拟端口进行业务接入并通过虚拟链路连接；各虚拟节点以服务提供商边缘节点或服务提供商核心节点的形式连入不同的虚拟子拓扑，作为所述服务提供商核心节点的虚拟节点采用FlexE 5G通道、MTN 10M通道交叉的硬切片承载方案转发，或基于FlexE 5G通道交叉和分组交换的软切片承载方案转发；时延信息表构建模块，用于对所述服务提供商边缘节点，以及两种转发形式的提供商核心节点分别配置时延模型计算时延值，以基于所述虚拟网络模型构建节点时延信息表，记载各虚拟节点的时延值；光纤长度信息表构建模块，用于构建所述光纤长度信息表以记载所述虚拟网络模型中各虚拟节点间链路的光纤长度；路径时延表构建模块，用于构建所述路径时延表以记载在各独立的虚拟子拓扑中，各虚拟节点作为服务提供商核心节点进行网络内连接时起始端节点与结束端节点之间所有虚拟节点和链路的时延值；网络切片时延计算模块，以获取目标业务网络切片上用于接入的源节点和用于接出的宿节点，基于预设最短路径算法获取所述源节点和所述宿节点之间的最短传输路径，标记所述最短传输路径上与所述源节点连接的节点为起始端节点，标记所述最短传输路径上与所述宿节点连接的节点为结束端节点，标记所述起始端节点与所述源节点之间的链路为起始链路，标记所述结束端节点与所述宿节点间的链路为结束链路；标记所述最短传输路径上所述起始端节点与所述结束端节点之间的所有虚拟节点和链路为转发路径；查询所述节点时延信息表获取所述源节点和所述宿节点作为服务提供商边缘节点的时延值，查询所述光纤长度信息表获取所述起始链路和所述结束链路的光纤长度并计算相应的时延值；判断所述转发路径是否跨多个虚拟子拓扑，当所述源节点和所述宿节点在同一虚拟子拓扑内时，查询所述路径时延表获取所述转发路径对应的时延值，将所述源节点、所述宿节点、所述起始链路、所述结束链路和所述转发路径的时延值累加得到目标业务网络切片时延；当所述源节点和所述宿节点跨多个虚拟子拓扑时，将所述转发路径按照经过的各虚拟子拓扑划分为多个转发子路径，查询所述路径时延表获取各转发子路径的传输时延，将所述源节点、所述宿节点、所述起始链路、所述结束链路和所述转发子路径的时延值累加得到目标业务网络切片时延。10.根据权利要求9所述的基于FlexE和SPN技术的电力业务网络切片时延计算设备，其特征在于，所述节点时延信息表用于记载各虚拟节点作为服务提供商边缘节点或服务提供商核心节点时，在不同通道类型、设备类型、接口速率以及业务包长度组下对应的节点时延值；所述设备类型包括框式设备或盒式设备；所述路径时延表用于记载在各独立的虚拟子拓扑中，各虚拟节点作为服务提供商核心节点进行网络内连接时，不同通道类型、设备类型、业务包长度组合和路径组合下不同起始端节点与结束端节点之间所有虚拟节点和链路整体的时延值。11.根据权利要求9所述的基于FlexE和SPN技术的电力业务网络切片时延计算设备，其特征在于，所述时延信息表构建模块对所述服务提供商边缘节点PE的时延值TPe计算式为：TPe＝T1+T2+T3+T4+T5+T6；其中，T1表示分组报文通过UNI接口进入所述服务提供商边缘节点PE的时延值，T2表示所述分组报文在所述服务提供商边缘节点PE中经报文缓存、流量监管与转发查表处理的时延值；T3表示所述服务提供商边缘节点PE中交换网信元切片与重组处理的时延值；T4表示所述服务提供商边缘节点PE中下行调度处理的时延值；T5表示所述服务提供商边缘节点PE的FlexE/MTN封装映射处理中MAC子层的处理时延值；T6表示所述服务提供商边缘节点PE的FlexE/MTN封装映射处理中从Path子层到光模块的处理时延值；所述时延信息表构建模块对采用FlexE 5G通道、MTN 10M通道交叉的硬切片承载方案转发的服务提供商核心节点P-L1的时延值TP-L1计算式为：TP-L1＝T1′+T2′+T3′；其中，T1′表示上行MTN接口时隙表中恢复出MTN Path层66B码块的时延值，T2′表示在所述服务提供商核心节点P-L1中交换网信元切片和矩阵交叉的时延值；T3′表示在所述服务提供商核心节点P-L1中下行映射复用到接口时隙分配表中传送加上频率适配的时延值；所述时延信息表构建模块对基于FlexE 5G通道交叉和分组交换的软切片承载方案转发的服务提供商核心节点P-L2的时延值TP-L2计算式为：TP-L2＝T1”+T2”+T3”+T4”+T5”+T6”；其中，T1”表示所述服务提供商核心节点P-L2中上行MTN接口时隙表中恢复出5GClient MAC报文的时延值；T2”表示所述分组报文在所述服务提供商核心节点P-L2中经报文缓存、流量监管与转发查表处理的时延值；T3”表示所述服务提供商核心节点P-L2中交换网信元切片与重组处理的时延值；T4”表示所述服务提供商核心节点P-L2中下行调度处理的时延值；T5”表示所述服务提供商核心节点P-L2的FlexE/MTN封装映射处理中MAC子层的处理时延值；T6”表示所述服务提供商核心节点P-L2的FlexE/MTN封装映射处理中从Path子层到光模块的时延值；所述节点时延信息表包括各虚拟节点作为服务提供商边缘节点时的PE节点时延信息表和作为服务提供商核心节点时的P节点时延信息表，所述P节点时延信息表分为按照硬切片承载方案转发的P-L1时延表和按照软切片承载方案转发的P-L2时延表。12.一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求1至8任一项所述方法的步骤。
说明书desc
技术领域本发明涉及电力通信技术领域，尤其涉及一种基于FlexE和SPN技术的电力业务网络切片时延计算方法及装置。背景技术现阶段，智能电网已成为电力行业发展的共同选择，各国纷纷制定规划、政策，加快 推进智能电网技术和产业发展。电力通信网作为支撑智能电网发展的重要基础设施，保证 了各类电力业务的安全性、实时性、准确性和可靠性要求。随着5G技术的快速发展，超高带宽、超低时延以及超大规模连接的特性为垂直行业 应用带来了更多可能，网络切片技术通过对网络资源的分割来满足不同业务的承载需求， 并保证服务的SLA。在电力网络通过划分不同的网络切片，来保障不同 的智能电网业务的SLA，保障不同业务承载的隔离性、安全性和可靠性。智能电网各种业务存在差异化需求，如隔离需求和时延、带宽、可靠性等SLA需求。在确定性时延场景，由于该场景对承载时延提出比较严格的要求，需要通过切片网络来保证，通过对网络的切片，将需要低时延保障的业务划入单独切片中。为满足电力业务精细化的时延要求，有必要在网络切片预编排阶段，明确切片实例时延，为真正的网络切片实施提供可靠依据。因此，亟需一种网络切片时延计算方法，针对复杂的电力网络业务需求进行快速时延计算。发明内容鉴于此，本发明实施例提供了一种基于FlexE和SPN技术的电力业务网络切片时延计算方法及装置，以消除或改善现有技术中存在的一个或更多个缺陷，解决网络切片预编排对切片实例时延的计算要求，以及智能电力网络复杂业务情景下时延计算准确度低、速度慢的问题。本发明的技术方案如下：一方面，本发明提供基于FlexE和SPN技术的电力业务网络切片时延计算方法，包括：初始化虚拟网络模型，所述虚拟网络包含至少一个虚拟子拓扑，所述虚拟子拓扑由多 个虚拟节点构成，各虚拟节点通过虚拟端口进行业务接入并通过虚拟链路连接；各虚拟节 点以服务提供商边缘节点或服务提供商核心节点的形式连入不同的虚拟子拓扑，作为所述 服务提供商核心节点的虚拟节点采用FlexE 5G通道、MTN 10M通道交叉的硬切片承载方 案转发，或基于FlexE 5G通道交叉和分组交换的软切片承载方案转发；对所述服务提供商边缘节点，以及两种转发形式的提供商核心节点分别配置时延模型 计算时延值，以基于所述虚拟网络模型构建节点时延信息表，用于记载各虚拟节点的时延 值；基于所述虚拟网络模型构建光纤长度信息表，用于记载所述虚拟网络模型中各虚拟节 点间链路的光纤长度；基于所述虚拟网络模型构建路径时延表，用于记载在各独立的虚拟子拓扑中，各虚拟 节点作为服务提供商核心节点进行网络内连接时起始端节点与结束端节点之间所有虚拟 节点和链路的时延值；获取目标业务网络切片上用于接入的源节点和用于接出的宿节点，基于预设最短路径 算法获取所述源节点和所述宿节点之间的最短传输路径，标记所述最短传输路径上与所述 源节点连接的节点为起始端节点，标记所述最短传输路径上与所述宿节点连接的节点为结 束端节点，标记所述起始端节点与所述源节点之间的链路为起始链路，标记所述结束端节 点与所述宿节点间的链路为结束链路；标记所述最短传输路径上所述起始端节点与所述结 束端节点之间的所有虚拟节点和链路为转发路径；查询所述节点时延信息表获取所述源节点和所述宿节点作为服务提供商边缘节点的 时延值，查询所述光纤长度信息表获取所述起始链路和所述结束链路的光纤长度并计算相 应的时延值；判断所述转发路径是否跨多个虚拟子拓扑，当所述源节点和所述宿节点在同 一虚拟子拓扑内时，查询所述路径时延表获取所述转发路径对应的时延值，将所述源节点、 所述宿节点、所述起始链路、所述结束链路和所述转发路径的时延值累加得到目标业务网 络切片时延；当所述源节点和所述宿节点跨多个虚拟子拓扑时，将所述转发路径按照经过 的各虚拟子拓扑划分为多个转发子路径，查询所述路径时延表获取各转发子路径的传输时 延，将所述源节点、所述宿节点、所述起始链路、所述结束链路和所述转发子路径的时延 值累加得到目标业务网络切片时延。在一些实施例中，所述节点时延信息表用于记载各虚拟节点作为服务提供商边缘节点 或服务提供商核心节点时，在不同通道类型、设备类型、接口速率以及业务包长度组下对 应的节点时延值；所述设备类型包括框式设备或盒式设备；所述路径时延表用于记载在各独立的虚拟子拓扑中，各虚拟节点作为服务提供商核心 节点进行网络内连接时，不同通道类型、设备类型、业务包长度组合和路径组合下不同起 始端节点与结束端节点之间所有虚拟节点和链路整体的时延值。在一些实施例中，对所述 服务提供商边缘节点，以及两种转发形式的提供商核心节点分别配置时延模型计算时延值 中，所述服务提供商边缘节点PE的时延值TPe计算式为：TPe＝T1+T2+T3+T4+T5+T6；其中，T1表示分组报文通过UNI接口进入所述服务提供商边缘节点PE的时延值，T2表示所述分组报文在所述服务提供商边缘节点PE中经报文缓存、流量监管与转发查 表处理的时延值；T3表示所述服务提供商边缘节点PE中交换网信元切片与重组处理的 时延值；T4表示所述服务提供商边缘节点PE中下行调度处理的时延值；T5表示所述服 务提供商边缘节点PE的FlexE/MTN封装映射处理中MAC子层的处理时延值；T6表示 所述服务提供商边缘节点PE的FlexE/MTN封装映射处理中从Path子层到光模块的处理 时延值；采用FlexE 5G通道、MTN 10M通道交叉的硬切片承载方案转发的服务提供商核心节 点P-L1的时延值TP-L1计算式为：TP-L1＝T1′+T2′+T3′；其中，T1′表示上行MTN接口时隙表中恢复出MTN Path层66B码块的时延值，T2′表示在所述服务提供商核心节点P-L1中交换网信元切片和矩阵交叉的时延值；T3′表示在所述服务提供商核心节点P-L1中下行映射复用到接口时隙分配表中传送加上频率适配的时延值；基于FlexE 5G通道交叉和分组交换的软切片承载方案转发的服务提供商核心节点 P-L2的时延值TP-L2计算式为：TP-L2＝T1”+T2”+T3”+T4”+T5”+T6”；其中，T1”表示所述服务提供商核心节点P-L2中上行MTN接口时隙表中恢复出5GClient MAC报文的时延值；T2”表示所述分组报文在所述服务提供商核心节点P-L2中经 报文缓存、流量监管与转发查表处理的时延值；T3”表示所述服务提供商核心节点P-L2 中中交换网信元切片与重组处理的时延值；T4”表示所述服务提供商核心节点P-L2中下 行调度处理的时延值；T5”表示所述服务提供商核心节点P-L2的FlexE/MTN封装映射处 理中MAC子层的处理时延值；T6”表示所述服务提供商核心节点P-L2的FlexE/MTN封 装映射处理中从Path子层到光模块的时延值；所述节点时延信息表包括各虚拟节点作为服务提供商边缘节点时的PE节点时延信息 表和作为服务提供商核心节点时的P节点时延信息表，所述P节点时延信息表分为按照 硬切片承载方案转发的P-L1时延表和按照软切片承载方案转发的P-L2时延表。在一些实施例中，查询所述光纤长度信息表获取所述起始链路和所述结束链路的光纤 长度并计算相应的时延值，计算式为：T＝costn*5us/km；其中，T表示第n条链路的传输时延，costn表示第n条链路的光纤长度。当所述源节点和所述宿节点在同一虚拟子拓扑内时，将所述源节点、所述宿节点、所 述起始链路、所述结束链路和所述转发路径的时延值累加得到目标业务网络切片时延，计 算式为：T＝T’+T+T+T+T；其中，PE1和PE2是表示在同一虚拟子拓扑下作为所述源节点和所述宿节点的两个服务提供商边缘节点，T表示所述源节点的时延值，T表示所述宿节点的时延值；T’表示所述转发路径的时延；T表示所述起始链路的时延，T表示 所述结束链路的时延。在一些实施例中，当所述源节点和所述宿节点跨多个虚拟子拓扑时，将所述转发路径 按照经过的各虚拟子拓扑划分为多个转发子路径，查询所述路径时延表获取各转发子路径 的传输时延，将所述源节点、所述宿节点、所述起始链路、所述结束链路和所述转发子路 径的时延值累加得到目标业务网络切片时延，包括：遍历查询所述转发路径上的各虚拟节点的信息表，获取各虚拟节点所属虚拟子拓扑的 ID信息，通过判断所述转发路径上前后虚拟节点之间所属虚拟子拓扑的关联关系，获得 多个转发子路径以及前后转发子路径之间的相交节点；查询所述节点时延信息表获得各所述相交节点作为服务提供商核心节点时的时延值；将所述源节点、所述宿节点、所述起始链路、所述结束链路和所述转发子路径的时延 值累加得到目标业务网络切片时延，计算式为：其中，PE1和PE2是表示在同一虚拟子拓扑下作为所述源节点和所述宿节点的两个服务提供商边缘节点，T表示所述源节点的时延值，T表示所述宿节点的时延值；Ti表示第i条转发子路径的时延；Pm表示第m个转发子路径与第m+1个转发子路径 之间的相交节点，T表示第m个转发子路径与第m+1个转发子路径之间的相交节点 的时延值；T表示所述起始链路的时延，T表示所述结束链路的时延。在一些实施例中，所述预设最短路径算法为Dijkstra算法、Bellman-ford算法或Floyd 算法。在一些实施例中，所述路径时延表对每个传输路径的转发特性配置基于FlexE 5G通 道和MTN 10M通道交叉的硬切片技术的第一类路径时延表和/或基于FlexE 5G通道交叉和分组交换的软切片技术的第二类路径时延表，所述第一类路径时延表记录起始端节点、结束端节点、通道类型、路径和相应的时延值，所述第二类路径时延表记录起始端节点、 结束端节点、通道类型、业务包长度、路径和相应的时延值。在一些实施例中，将所述电力业务划分为至少包含智能分布式配电自动化、用电负荷 需求响应控制和分布式能源调控的安全I区，至少包含高级计量、同步相量测量、移动现 场施工作业管控和应急现场自组网应用的安全II区，至少包含变电站巡检、输电线路巡检和配电房视频综合监控的安全III区，至少办公信息化、视频会议的安全IV区，其中， 对于所述安全I区和所述安全II区的电力业务采用硬切片承载方案进行模拟，对于所述安 全III区和所述安全IV区的电力业务采用软切片承载方案进行模拟。另一方面，本发明还提供一种基于FlexE和SPN技术的电力业务网络切片时延计算设备，包括：虚拟网络初始化模块，用于初始化虚拟网络模型，所述虚拟网络包含至少一个虚拟子 拓扑，所述虚拟子拓扑由多个虚拟节点构成，各虚拟节点通过虚拟端口进行业务接入并通 过虚拟链路连接；各虚拟节点以服务提供商边缘节点或服务提供商核心节点的形式连入不 同的虚拟子拓扑，作为所述服务提供商核心节点的虚拟节点采用FlexE 5G通道、MTN 10M 通道交叉的硬切片承载方案转发，或基于FlexE 5G通道交叉和分组交换的软切片承载方 案转发；时延信息表构建模块，用于对所述服务提供商边缘节点，以及两种转发形式的提供商 核心节点分别配置时延模型计算时延值，以基于所述虚拟网络模型构建节点时延信息表， 记载各虚拟节点的时延值；光纤长度信息表构建模块，用于构建所述光纤长度信息表以记载所述虚拟网络模型中 各虚拟节点间链路的光纤长度；路径时延表构建模块，用于构建所述路径时延表以记载在各独立的虚拟子拓扑中，各 虚拟节点作为服务提供商核心节点进行网络内连接时起始端节点与结束端节点之间所有 虚拟节点和链路的时延值；网络切片时延计算模块，以获取目标业务网络切片上用于接入的源节点和用于接出的 宿节点，基于预设最短路径算法获取所述源节点和所述宿节点之间的最短传输路径，标记 所述最短传输路径上与所述源节点连接的节点为起始端节点，标记所述最短传输路径上与 所述宿节点连接的节点为结束端节点，标记所述起始端节点与所述源节点之间的链路为起 始链路，标记所述结束端节点与所述宿节点间的链路为结束链路；标记所述最短传输路径 上所述起始端节点与所述结束端节点之间的所有虚拟节点和链路为转发路径；查询所述节 点时延信息表获取所述源节点和所述宿节点作为服务提供商边缘节点的时延值，查询所述 光纤长度信息表获取所述起始链路和所述结束链路的光纤长度并计算相应的时延值；判断 所述转发路径是否跨多个虚拟子拓扑，当所述源节点和所述宿节点在同一虚拟子拓扑内时， 查询所述路径时延表获取所述转发路径对应的时延值，将所述源节点、所述宿节点、所述 起始链路、所述结束链路和所述转发路径的时延值累加得到目标业务网络切片时延；当所 述源节点和所述宿节点跨多个虚拟子拓扑时，将所述转发路径按照经过的各虚拟子拓扑划 分为多个转发子路径，查询所述路径时延表获取各转发子路径的传输时延，将所述源节点、 所述宿节点、所述起始链路、所述结束链路和所述转发子路径的时延值累加得到目标业务 网络切片时延。在一些实施例中，所述节点时延信息表用于记载各虚拟节点作为服务提供商边缘节点 或服务提供商核心节点时，在不同通道类型、设备类型、接口速率以及业务包长度组下对 应的节点时延值；所述设备类型包括框式设备或盒式设备；所述路径时延表用于记载在各独立的虚拟子拓扑中，各虚拟节点作为服务提供商核心 节点进行网络内连接时，不同通道类型、设备类型、业务包长度组合和路径组合下不同起 始端节点与结束端节点之间所有虚拟节点和链路整体的时延值。在一些实施例中，所述时延信息表构建模块对所述服务提供商边缘节点PE的时延值 TPe计算式为：TPe＝T1+T2+T3+T4+T5+T6；其中，T1表示分组报文通过UNI接口进入所述服务提供商边缘节点PE的时延值，T2表示所述分组报文在所述服务提供商边缘节点PE中经报文缓存、流量监管与转发查 表处理的时延值；T3表示所述服务提供商边缘节点PE中交换网信元切片与重组处理的 时延值；T4表示所述服务提供商边缘节点PE中下行调度处理的时延值；T5表示所述服 务提供商边缘节点PE的FlexE/MTN封装映射处理中MAC子层的处理时延值；T6表示 所述服务提供商边缘节点PE的FlexE/MTN封装映射处理中从Path子层到光模块的处理 时延值；所述时延信息表构建模块对采用FlexE 5G通道、MTN 10M通道交叉的硬切片承载方 案转发的服务提供商核心节点P-L1的时延值TP-L1计算式为：TP-L1＝T1′+T2′+T3′；其中，T1′表示上行MTN接口时隙表中恢复出MTN Path层66B码块的时延值，T2′表示在所述服务提供商核心节点P-L1中交换网信元切片和矩阵交叉的时延值；T3′表示在所述服务提供商核心节点P-L1中下行映射复用到接口时隙分配表中传送加上频率适配的时延值；所述时延信息表构建模块对基于FlexE 5G通道交叉和分组交换的软切片承载方案转 发的服务提供商核心节点P-L2的时延值TP-L2计算式为：TP-L2＝T1”+T2”+T3”+T4”+T5”+T6”；其中，T1”表示所述服务提供商核心节点P-L2中上行MTN接口时隙表中恢复出5GClient MAC报文的时延值；T2”表示所述分组报文在所述服务提供商核心节点P-L2中经 报文缓存、流量监管与转发查表处理的时延值；T3”表示所述服务提供商核心节点P-L2 中交换网信元切片与重组处理的时延值；T4”表示所述服务提供商核心节点P-L2中下行 调度处理的时延值；T5”表示所述服务提供商核心节点P-L2的FlexE/MTN封装映射处理 中MAC子层的处理时延值；T6”表示所述服务提供商核心节点P-L2的FlexE/MTN封装 映射处理中从Path子层到光模块的时延值；所述节点时延信息表包括各虚拟节点作为服务提供商边缘节点时的PE节点时延信息 表和作为服务提供商核心节点时的P节点时延信息表，所述P节点时延信息表分为按照 硬切片承载方案转发的P-L1时延表和按照软切片承载方案转发的P-L2时延表。另一方面，本发明还提供一种电子设备，包括存储器、处理器及存储在存储器上并可 在处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如上述方法 的步骤。本发明的有益效果至少是：所述基于FlexE和SPN技术的电力业务网络切片时延计算方法及装置中，通过电力通信传输网络拓扑和FlexE/SPN的转发特性构建虚拟的网络模型，形成以虚拟子拓扑、虚拟节点、虚拟端口和虚拟链路构成的具象化电网；基于FlexE时隙化交换技术和SPN转 发技术，提出电力业务网络切片时延模型，引入节点类型、通道类型、业务包长度、设备 类型、接口速率和链路长度六个因素，基于不同网络切片方案和不同虚拟子拓扑，构建与 各种因素组合对应的节点时延信息表、光纤长度信息表和控制器端路径时延表，精细化的 模拟现网时延特征，并将源宿节点之间最短传输路径拆解为源节点、宿节点、起始链路、 结束链路和转发路径五部分，直接查询和计算各部分的时延值累加，快速精准得到网络切 片实例端到端时延值。本发明的附加优点、目的，以及特征将在下面的描述中将部分地加以阐述，且将对于 本领域普通技术人员在研究下文后部分地变得明显，或者可以根据本发明的实践而获知。 本发明的目的和其它优点可以通过在书面说明及其权利要求书以及附图中具体指出的结 构实现到并获得。本领域技术人员将会理解的是，能够用本发明实现的目的和优点不限于以上具体所述， 并且根据以下详细说明将更清楚地理解本发明能够实现的上述和其他目的。附图说明此处所说明的附图用来提供对本发明的进一步理解，构成本申请的一部分，并不构成 对本发明的限定。在附图中：图1为本发明一实施例中所述基于FlexE和SPN技术的电力业务网络切片时延计算方法的流程示意图；图2为本发明一实施例中所述基于FlexE和SPN技术的电力业务网络切片时延计算方法中构建的虚拟网络模型中虚拟子拓扑、虚拟节点、虚拟端口和虚拟链路；图3为本发明一实施例中所述基于FlexE和SPN技术的电力业务网络切片时延计算方法中采用的硬切片承载方案和软切片承载方案示例；图4为本发明一实施例中跨两个虚拟子拓扑的网络切片实例的端到端传输路径示意 图；图5为本发明一实施例中网络拓扑汇聚环和接入环相交的结构示意图；图6为本发明一实施例中切片实例转发时延计算流程示意图；图7为本发明一实施例中转发横跨多个虚拟子拓扑时路径时延计算方法流程示意图；图8为本发明一实施例中分组报文在PE vNode中转发流程示意图；图9为本发明一实施例中分组报文在基于L1转发的P vNode中转发流程示意图；图10为本发明一实施例中分组报文在基于L2转发的P vNode中转发流程示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚明白，下面结合实施方式和附图，对本 发明做进一步详细说明。在此，本发明的示意性实施方式及其说明用于解释本发明，但并 不作为对本发明的限定。在此，还需要说明的是，为了避免因不必要的细节而模糊了本发明，在附图中仅仅示 出了与根据本发明的方案密切相关的结构和/或处理步骤，而省略了与本发明关系不大的 其他细节。应该强调，术语“包括/包含”在本文使用时指特征、要素、步骤或组件的存在，但并不排除一个或更多个其它特征、要素、步骤或组件的存在或附加。在此，还需要说明的是，如果没有特殊说明，术语“连接”在本文不仅可以指直接连接，也可以表示存在中间物的间接连接。智能电网业务需求广泛，包含了智能分布式配电自动化、用电负荷需求响应控制、分 布式能源调控等生产控制类业务；高级计量、同步相量测量、移动现场施工作业管控、应急现场自组网应用等生产非控制类业务；以及变电站巡检、输 电线路巡检、配电房视频综合监控和办公信息化、视频会议等管理信息业 务，不同业务对转发时延、带宽、可靠性及安全隔离要求不尽相同。FlexE技术重用了现有IEEE 802.3以太网物理层标准，在MAC/PCS逻辑层通过轻量级增强，实现灵活的多速率接口，并与IP技术实现无缝对接，在IP/Ethernet技术体系下 较好地满足了大带宽、灵活速率以及通道隔离等需求。由于采用基于时隙的数据块交换技术，在转发时延方面单节点时延达到μs级，可以满足电网控制类业务毫秒级低时延和微 秒级高精度网络授时需求；由于不同的业务通过不同的时隙进行隔离，相互之间不会产生 影响，这种“硬隔离”非常易于实现网络切片。采用FlexE链路接口技术的网络设备包括SPN、路由器和OTN设备， 其中SPN设备进一步还支持MTN 10M小颗粒通道技术，非常适合用来承载小带宽且需 硬隔离的电力安全I区/II区业务。一方面，本发明提供一种基于FlexE和SPN技术的电力业务网络切片时延计算方法， 如图1所示，包括步骤S101～S105：步骤S101：根据电力业务的网络拓扑和FlexE/SPN的转发特性，初始化虚拟网络模型，虚拟网络包含至少一个虚拟子拓扑，虚拟子拓扑由多个虚拟节点构成，各虚拟节点通过虚拟端口进行业务接入并通过虚拟链路连接；各虚拟节点以服务提供商边缘节点或服务提供商核心节点的形式连入不同的虚拟子拓扑，作为服务提供商核心节点的虚拟节点采用FlexE 5G通道、MTN 10M通道交叉的硬切片承载方案转发，或基于FlexE 5G通道交叉 和分组交换的软切片承载方案转发。步骤S102：对服务提供商边缘节点，以及两种转发形式的提供商核心节点分别配置 时延模型计算时延值，以基于虚拟网络模型构建节点时延信息表，节点时延信息表用于记 载各虚拟节点作为服务提供商边缘节点或服务提供商核心节点，在不同通道类型、设备类 型、接口速率以及业务包长度组下对应的节点时延值；所述设备类型包括框式设备或盒式 设备。步骤S103：基于虚拟网络模型构建光纤长度信息表，用于记载虚拟网络模型中各节 点间链路的光纤长度，用于根据光纤长度计算在相应链路中的传输时延。步骤S104：基于虚拟网络模型构建路径时延表，路径时延表用于记载在各独立的虚 拟子拓扑中，各虚拟节点作为服务提供商核心节点进行网络内连接时，不同通道类型、设 备类型、业务包长度组合和路径组合下不同起始端节点与结束端节点之间所有虚拟节点和 链路整体的时延值。步骤S105：获取目标业务网络切片上用于接入的源节点和用于接出的宿节点，基于 预设最短路径算法获取源节点和宿节点之间的最短传输路径，标记最短传输路径上与源节 点连接的节点为起始端节点，标记最短传输路径上与宿节点连接的节点为结束端节点，标 记起始端节点与源节点之间的链路为起始链路，标记结束端节点与宿节点间的链路为结束 链路；标记最短传输路径上起始端节点与结束端节点之间的所有虚拟节点和链路为转发路 径。步骤S106：查询节点时延信息表获取源节点和宿节点作为服务提供商边缘节点的时 延值，查询光纤长度信息表获取起始链路和结束链路的光纤长度并计算相应的时延值；判 断转发路径是否跨多个虚拟子拓扑，当源节点和所述宿节点在同一虚拟子拓扑内时，查询 路径时延表获取转发路径对应的时延值，将源节点、宿节点、起始链路、结束链路和转发路径的时延值累加得到目标业务网络切片时延；当源节点和宿节点跨多个虚拟子拓扑时，将转发路径按照经过的各虚拟子拓扑划分为多个转发子路径，查询路径时延表获取各转发子路径的传输时延，将源节点、宿节点、起始链路、结束链路和转发子路径的时延值累加 得到目标业务网络切片时延。在步骤S101中，面向网络切片预编排的切片实例时延计算过程中，首先基于电力网 络实际所采用的网络拓扑结构和所采用的FlexE/SPN技术的转发特性，初始化虚拟网络模 型。虚拟网络模型中包含4类对象：虚拟子拓扑，记为vTopo；虚拟节点，记为vNode； 虚拟端口，记为vPort；虚拟链路，记为vLink。具体的，对虚拟网络模型中的4类对象进行如下定义：网络中的虚拟子拓扑vTopo，根据控制器的算力能力，可选取网络中适当数量的且较 为独立的节点和连接形成子拓扑，使在子拓扑中进行各类表项的生成和刷新时间可为接受。 子拓扑的选取一般可为单接入环、单汇聚环、单核心环或节点数量不多的接入汇聚环。虚拟节点vNode，代表网络拓扑中的节点信息，基于节点在网络中的位置和功能划分 为服务提供商边缘节点和服务提供商核心节点，并向下关联vPort 模型。虚拟端口vPort，代表网络节点的两侧端口，分为用于客户业务接入的UNI用户侧网络接口，和用于网络节点互联的NNI 网络和网络接口。其中，PE节点具有UNI和NNI vPort属性，P节点仅具有NNIvPort 属性。虚拟链路vLink，代表网络节点间的物理连接，对于光纤链路，具有光纤长度属性。在一个虚拟网络模型中，各虚拟节点可以根据业务需求的不同作为PE节点或P节点， 根据实际应用需求的差异构建不同的相互交错的虚拟子拓扑网络。具体的，如图2所示，本发明所构建的虚拟网络中的4类对象的层次和关联关系表现 为：在虚拟网络模型下包含至少一个虚拟子拓扑，每个虚拟子拓扑由虚拟节点组成，并通 过虚拟链路进行链接；虚拟节点分为用于用户接入的服务提供商边缘节点PE以及用于网 络内功能实现的服务提供商核心节点P。其中，PE节点由于承载接入工作，一方面设置UNI接口用于用户的连入，另一方面还设置NNI接口用于连接P节点。而P节点作为网 络内部用于功能实现的节点，仅设置NNI接口。进一步的，4类网络模型对象初始化形成模型，要求记载的内容包括：对于虚拟子拓扑，记载子拓扑ID信息作为唯一标识；记载子拓扑层级，包括：核心层、汇聚层和接入层；子拓扑类型，包括：环形、链型、星型或网状。对于虚拟节点，记载节点ID作为唯一标识，记载所属子拓扑ID和设备类型。其中，设备类型包括：框式设备和盒式设备。其中，盒式设备的外观体积较小，部分采用插卡式 结构，分为主控板卡和接入板卡；部分采用非插卡式结构，即端口固定。接入板卡和固定 端口只用做业务接入，业务处理和数据转发均在主控板卡或主控模块进行。框式设备：采用框架结构的网络设备，接入端口多，转发容量大，一般具备主控板卡、 业务板卡、交换网板等功能性板卡，通过框架上的背板总线进行互连通信，一般业务板卡 也具备转发处理功能。框式设备主要由业务板卡进行业务转发处理，可称为分布式架构；盒式设备主要由主 控集中进行业务转发处理，称为集中式架构。对于虚拟端口，记载端口ID作为唯一标识；记载端口类型，包括：以太网物理口、SDH物理口、PDH物理口、FlexE物理口、MTN物理口；记载端口标称速率，如：2M、 100M、155M、1G、10G、25G、50G、100G、200G。虚拟链路，记载链路ID作为唯一标识；记载链路源网元ID、链路宿网元ID、链路 源端口ID、链路宿端口ID、链路代价Cost。基于虚拟网络模型的结构，引入对时延存在重要影响的至少6个因素：节点类型、通 道类型、接口速率、业务包长度、设备类型、链路长度。其中，虚拟节点类型分为服务提供商边缘节点PE vNode、基于L1转发的服务提供商核心节点P vNode和基于L2转发的服务提供商核心节点P vNode三种类型。具体的，PE vNode用于客户业务接入，客户业务报文从UNI接口进入，首先进行分组报文处理，经过报文缓存、流分类、流量监管等处理后，查询转发表项，封装 MPLS-TP/SR/VLAN隧道标签和找到出接口，再经交换网定长/变长信元切片、信元重组 后进入下行拥塞管理和流量整形等调度处理，分组报文映射进MTN Client的逻辑MAC、 码块转换后作为MTNClient适配进MTN Path层、映射复用到MTN Section层的接口时 隙分配表中传送；基于MTN10M的硬切片转发，需要进行两级映射，分组报文经过映射 进MTN 10M Client的逻辑MAC、码块转换后作为MTN 10M Client适配进MTN 10M Path 层、通过时隙映射复用到5GClient、适配进MTN Path层、映射复用到MTN Section层的 接口时隙分配表中传送，如图8所示：对服务提供商边缘节点，以及两种转发形式的提供商核心节点分别配置时延模型计算 时延值中，服务提供商边缘节点PE的时延值TPe计算式为：TPe＝T1+T2+T3+T4+T5+T6； 其中，T1表示分组报文通过UNI接口进入服务提供商边缘节点PE的时延值，T2表示所述分组报文在服务提供商边缘节点PE中经报文缓存、流量监管与转发查表处理的时延值，在无报文突发情况下约为1us；T3表示服务提供商边缘节点PE中交换网信元切片 与重组处理的时延值，受芯片选型、信元长度、调度算法等产品实现因素的影响，各类型 节点设备处理时间存在差异；T4表示服务提供商边缘节点PE中下行调度处理的时延值， 根据产品具体实现的队列缓存深度、调度周期等因素存在差异，整体处理时间约为7-13us； T5表示所述服务提供商边缘节点PE的FlexE/MTN封装映射处理中MAC子层的处理时 延值；T6表示所述服务提供商边缘节点PE的FlexE/MTN封装映射处理中从Path子层到 光模块的处理时延值，5G转发约为1us，10M转发经过两级映射，10M Client适配时隙 映射复用到5GClient时延较小可不考虑，因此10M转发也约为1us。其中，报文长度应 为比特值。如图9所示，基于L1转发的服务提供商核心节点P vNode，基于FlexE 5G和MTN 10M通道交叉的硬切片承载方案，网络侧P vNode均采用FlexE/MTN时隙交叉技术，标 记为L1转发。具体的，上行MTN接口时隙表中恢复出MTN Path层66B码块、通过66B 码块序列交叉、下行映射复用到接口时隙分配表中传送。基于5G的硬切片转发，上行从 MTN接口时隙表中恢复出MTN 5G通道层66B码块、经过码块交叉矩阵、下行映射复用 到出接口的时隙表中传送；基于MTN 10M硬切片转发，上行从MTN接口时隙表中恢复 出MTN 5G通道层、解复用从对应时隙中恢复MTN 10M通道层、经过码块交叉矩阵、 下行通过时隙映射复用适配MTN 5G通道层、映射复用到出接口的时隙表中传送。对于 不同类型节点设备，如框式设备，在码块序列交叉时还需进行交换网信元切片。采用FlexE 5G通道、MTN 10M通道交叉的硬切片承载方案转发的服务提供商核心节 点P-L1的时延值TP-L1计算式为：TP-L1＝T1′+T2′+T3′；其中，T1′表示上行MTN接口时隙表中恢复出MTN Path层66B码块的时延值，约1us，10M转发还需包含MTN Path层解复用从对应时隙中恢复MTN 10M通道层的时延 值，约2.6us；T2′表示在服务提供商核心节点P-L1中交换网信元切片和矩阵交叉的时延 值；T3′表示在服务提供商核心节点P-L1中下行映射复用到接口时隙分配表中传送加上频 率适配的时延值；如图10所示，基于L2转发的服务提供商核心节点P vNode，采用FlexE 5G通道交叉和分组交换处理的软切片承载方案，在电力业务应用时，先进行5G通道的硬切片，再 在通道内进行基于VPN的软隔离划分，P vNode在入口方向首先终结FlexE 5G颗粒封装 映射，恢复分组业务报文，进行基于VPN技术的分组标签交换，具体处理与PE节点处 理流程中缓存至队列调度部分相同，在出口方向再次恢复FlexE 5G颗粒映射封装，继续 下一跳转发，由于涉及到分组报文处理属于L2转发。基于FlexE 5G通道交叉和分组交换的软切片承载方案转发的服务提供商核心节点 P-L2的时延值TP-L2计算式为：TP-L2＝T1”+T2”+T3”+T4”+T5”+T6”；其中，T1”表示所述服务提供商核心节点P-L2中上行MTN接口时隙表中恢复出5GClient MAC报文的时延值；T2”表示所述分组报文在所述服务提供商核心节点P-L2中经 报文缓存、流量监管与转发查表处理的时延值；T3”表示所述服务提供商核心节点P-L2 中中交换网信元切片与重组处理的时延值；T4”表示所述服务提供商核心节点P-L2中下 行调度处理的时延值；T5”表示所述服务提供商核心节点P-L2的FlexE/MTN封装映射处 理中MAC子层的处理时延值；T6”表示所述服务提供商核心节点P-L2的FlexE/MTN封 装映射处理中从Path子层到光模块的时延值。如图3所示，在硬切片承载方案图3和图3中，PE vNode基于L2转发，P vNode基于L1转发；在软切片承载方案图3中，PE vNode和P vNode均基于L2转 发。通道类型指以5G或10M颗粒为基础的不同通道带宽，其与P节点转发时延成反比，通道带宽越大，P节点转发时延越小。根据电力业务模型需求，通道类型一般选取10M、 50M、100M、1000M和5G等带宽。接口速率对时延的影响与不采用FlexE通道交叉技术的传统分组交换技术类似，接口 速率越大，节点转发时延越小；由于两种方案网络侧均为FlexE/MTN通道，因此接口速率的影响主要为UNI接口对PE vNode转发时延的影响，且影响关系为反比，即接口速率 越大，时延越小。对于业务包长度，FlexE接口技术在以太网的MAC层与PHY层之间增加了FlexEshim 层，以64/66B数据块做为基本逻辑单元，并采用类似于TDM时分复用的分发机制，转发时延不受客户业务报文长度影响。因此，业务包长度长度主要影响分组处理流程部分的时间，即主要影响L2节点的转发处理时延，影响关系为正比，即客户业务数 据包长度越大，时延越大。另外由于大部分电力业务的数据包长度较为固定，为避免数据 表项过于庞大，将业务包长归类为small-packet、mid-packet、large-packet三种；设备类型分为框式设备和盒式设备，盒式设备采用集中式架构，转发时延与框式设备 的插卡分布式架构相比更优。链路长度，现网光纤链路传输也是一个影响时延的重要因素，光纤的传输时延为5us/km。基于前文上述方法构建的虚拟网络模型，示例性的给出一个网络切片实例的端到端传输路径如图4所示，其中，Pm表示两个虚拟子拓扑的相交节点。如传输路径所示，该切片实例端到端转发时延的构成，主要分为节点时延和链路传输 时延，通过累加的形式就可以得到最终的总时延。在步骤S102～S104中，通过构建节点时延信息表用于记录各虚拟节点在不同因素配 置条件下的时延信息表，具体的，对于所构建的虚拟网络模型，其中的每个节点在不同的 虚拟子拓扑中可以作为PE节点也可以作为P节点。而在引入至少包含通道类型、设备类型、接口速率以及业务包长度的影响因素后，记载不同组合条件下的节点时延值。具体的，针对PE节点、L1转发方案下P节点以及L2转发方案下P节点分别构建时延信息表。在一些实施例中，节点时延信息表包括各虚拟节点作为服务提供商边缘节点时的PE 节点时延信息表和作为服务提供商核心节点时的P节点时延信息表，P节点时延信息表分 为按照硬切片承载方案转发的P-L1节点时延表和按照软切片承载方案转发的P-L2节点时延表。示例性的，给出PE节点时延信息表如表1，P-L1节点时延表如表2，P-L2节点 时延表如表3。表1 PE节点时延信息表表2 P-L1节点时延信息表表3 P-L2节点时延信息表对于光纤长度信息表用于记载不同虚拟节点之间链路的光纤传输距离，并应用于计算 光纤距离产生的时延。路径时延表用于记载各虚拟节点作为服务提供商核心节点，即作为P节点进行网络 内连接时，所形成的传输路径上所有虚拟节点和链路的总时延值。实例性的，如图5所示， 设置接入环1为vTopo1，汇聚环1为vTopo2，对于一条网络内的转发路径路上，所有虚拟节点均作为P节点进行传输，这里需要说明的是，网络内的转发路径上并不包含用于 接入的PE节点。所以，在接入环1内以NE-5-4为起始端节点，以NE-2-4为结束端节点， 存在多条路径如：-，或--- --。又如汇聚环1中，NE-2-4为起始端节点，以NE-2-2为结束端节 点，存在多条路径如：--，或--。 在以L1进行传输的情况下，记录起始端节点、结束端节点、通道类型、路径和相应的时 延。在以L2进行传输的情况下，记录起始端节点、结束端节点、通道类型、业务包长度、 路径和相应的时延。在步骤S105和S106中，在一些实施例中，步骤S105中，预设最短路径算法为Dijkstra 算法、Bellman-ford算法或Floyd算法。将源节点和宿节点之间完整的最短传输路径进行拆分，源节点和宿节点作为接入业务 的PE节点，单独查节点时延信息表获得。标记最短传输路径上与源节点连接的节点为起 始端节点，标记最短传输路径上与宿节点连接的节点为结束端节点，起始端节点与结束端 节点之间的虚拟节点均为P节点，起始端节点与结束端节点之间的延迟可以通过路径时延表查询得到。起始端节点与源节点之间的第一链路通过查询光纤长度信息表得到光纤长度后计算相应的时延值，同理，结束端节点与宿节点之间的第二链路通过查询光纤长度信息表得到光纤长度后计算相应的时延值。在一些实施例中，步骤S106中，查询所述光纤长度信息表获取所述起始链路和所述 结束链路的光纤长度并计算相应的时延值，计算式为：T＝costn*5us/km； 其中，T表示第n条链路的传输时延，costn表示第n条链路的光纤长度。在本发明中，路径时延表是针对每个虚拟子拓扑分别建立的，所以在进行时延计算的 过程中，需要区分起始端节点与结束端节点在同一虚拟子拓扑和跨多个虚拟子拓扑的情况。 当起始端节点与结束端节点在同一虚拟子拓扑中时，转发路径可以直接通过一次查表得到， 将源节点、宿节点、起始链路、结束链路和转发路径的时延值直接累加可以得到目标业务 网络切片时延。而对于跨多个虚拟子拓扑的情况，转发路径按照经过的各虚拟子拓扑划分 为多个转发子路径，在查表和累加的过程中，相邻转发子路径之间的相交节点会被重复累 加2次，所以需要进行一次减除。在一些实施例中，当源节点和宿节点在同一虚拟子拓扑内时，将源节点、宿节点、起 始链路、结束链路和转发路径的时延值累加得到目标业务网络切片时延，计算式为：T＝T’+T+T+T+T； 其中，PE1和PE2是表示在同一虚拟子拓扑下作为源节点和宿节点的两个服务提供商边缘节点，T表示源节点的时延值，T表示宿节点的时延值；T’表示转发 路径的时延；T表示起始链路的时延，T表示结束链路的时延。在一些实施例中，当源节点和宿节点跨多个虚拟子拓扑时，将转发路径按照经过的各 虚拟子拓扑划分为多个转发子路径，查询路径时延表获取各转发子路径的传输时延，将源 节点、宿节点、起始链路、结束链路和转发子路径的时延值累加得到目标业务网络切片时 延，包括：步骤S201：遍历查询转发路径上的各虚拟节点的信息表，获取各虚拟节点所属虚拟 子拓扑的ID信息，通过判断转发路径上前后虚拟节点之间所属虚拟子拓扑的关联关系，获得多个转发子路径以及前后转发子路径之间的相交节点。步骤S202：查询节点时延信息表获得各相交节点作为服务提供商核心节点时的时延 值。步骤S203：将源节点、宿节点、起始链路、结束链路和转发子路径的时延值累加得到目标业务网络切片时延，计算式为：其中，PE1和PE2是表示在同一虚拟子拓扑下作为所述源节点和所述宿节点的两个服务提供商边缘节点，T表示所述源节点的时延值，T表示所述宿节点的时延值；Ti表示第i条转发子路径的时延；Pm表示第m个转发子路径与第m+1个转发子路径 之间的相交节点，T表示第m个转发子路径与第m+1个转发子路径之间的相交节点 的时延值；T表示所述起始链路的时延，T表示所述结束链路的时延。在一些实施例中，路径时延表对每个传输路径的转发特性配置基于FlexE 5G通道和 MTN 10M通道交叉的硬切片技术的第一类路径时延表和/或基于FlexE 5G通道交叉和分组交换的软切片技术的第二类路径时延表，第一类路径时延表记录源节点、宿节点、通道类型、路径和相应的时延值，第二类路径时延表记录源节点、宿节点、通道类型、业务包 长度、路径和相应的时延值。在一些实施例中，将电力业务划分为至少包含智能分布式配电自动化、用电负荷需求 响应控制和分布式能源调控的安全I区，至少包含高级计量、同步相量测量、移动现场施 工作业管控和应急现场自组网应用的安全II区，至少包含变电站巡检、输电线路巡检和配电房视频综合监控的安全III区，至少办公信息化、视频会议的安全IV区，其中，对 于安全I区和安全II区的电力业务采用硬切片承载方案进行模拟，对于安全III区和安全 IV区的电力业务采用软切片承载方案进行模拟。另一方面，本发明还提供一种基于FlexE和SPN技术的电力业务网络切片时延计算设备，包括：虚拟网络初始化模块，用于初始化虚拟网络模型，虚拟网络包含至少一个虚拟子拓扑， 所述虚拟子拓扑由多个虚拟节点构成，各虚拟节点通过虚拟端口进行业务接入并通过虚拟 链路连接；各虚拟节点以服务提供商边缘节点或服务提供商核心节点的形式连入不同的虚 拟子拓扑，作为服务提供商核心节点的虚拟节点采用FlexE 5G通道、MTN 10M通道交叉 的硬切片承载方案转发，或基于FlexE 5G通道交叉和分组交换的软切片承载方案转发；时延信息表构建模块，用于对服务提供商边缘节点，以及两种转发形式的提供商核心 节点分别配置时延模型计算时延值，以基于虚拟网络模型构建节点时延信息表，记载各虚 拟节点的时延值；光纤长度信息表构建模块，用于构建光纤长度信息表以记载虚拟网络模型中各虚拟节 点间链路的光纤长度；路径时延表构建模块，用于构建路径时延表以记载在各独立的虚拟子拓扑中，各虚拟 节点作为服务提供商核心节点进行网络内连接时起始端节点与结束端节点之间所有虚拟 节点和链路的时延值；网络切片时延计算模块，以获取目标业务网络切片上用于接入的源节点和用于接出的 宿节点，基于预设最短路径算法获取源节点和宿节点之间的最短传输路径，标记最短传输 路径上与源节点连接的节点为起始端节点，标记最短传输路径上与宿节点连接的节点为结 束端节点，标记起始端节点与源节点之间的链路为起始链路，标记结束端节点与宿节点间 的链路为结束链路；标记最短传输路径上起始端节点与结束端节点之间的所有虚拟节点和 链路为转发路径；查询节点时延信息表获取源节点和宿节点作为服务提供商边缘节点的时 延值，查询光纤长度信息表获取起始链路和结束链路的光纤长度并计算相应的时延值；判 断转发路径是否跨多个虚拟子拓扑，当源节点和宿节点在同一虚拟子拓扑内时，查询路径 时延表获取转发路径对应的时延值，将源节点、宿节点、起始链路、结束链路和转发路径 的时延值累加得到目标业务网络切片时延；当源节点和宿节点跨多个虚拟子拓扑时，将转 发路径按照经过的各虚拟子拓扑划分为多个转发子路径，查询路径时延表获取各转发子路 径的传输时延，将源节点、宿节点、起始链路、结束链路和转发子路径的时延值累加得到 目标业务网络切片时延。在一些实施例中，节点时延信息表用于记载各虚拟节点作为服务提供商边缘节点或服 务提供商核心节点时，在不同通道类型、设备类型、接口速率以及业务包长度组下对应的 节点时延值；设备类型包括框式设备或盒式设备；路径时延表用于记载在各独立的虚拟子拓扑中，各虚拟节点作为服务提供商核心节点 进行网络内连接时，不同通道类型、设备类型、业务包长度组合和路径组合下不同起始端 节点与结束端节点之间所有虚拟节点和链路整体的时延值。在一些实施例中，时延信息表构建模块对服务提供商边缘节点PE的时延值TPe计算式可以参照前文中的式1至3。时延信息表构建模块对采用FlexE 5G通道、MTN 10M通道交叉的硬切片承载方案转 发的服务提供商核心节点P-L1的时延值TP-L1计算式可以参照前文中的式4。时延信息表构建模块对基于FlexE 5G通道交叉和分组交换的软切片承载方案转发的 服务提供商核心节点P-L2的时延值TP-L2计算式可以参照前文中的式5和6。进一步的，节点时延信息表包括各虚拟节点作为服务提供商边缘节点时的PE节点时 延信息表和作为服务提供商核心节点时的P节点时延信息表，P节点时延信息表分为按照 硬切片承载方案转发的P-L1时延表和按照软切片承载方案转发的P-L2时延表。另一方面，本发明还提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如上述方法的步骤。另一方面，本发明还提供一种计算机可读存储介质，其上存储有计算机程序，其特征 在于，该程序被处理器执行时实现上述方法的步骤。下面结合以具体实施例对本发明进行说明：电力通信骨干传输网的节点数众多，对于一个中等规模的市级电力通信传输网节点数 约为350-400个，承载的各类电力业务总数在近万条。网络编排软件在进行批量业务仿真 时，如果按照逐节点逐链路累加的方式计算切片实例的时延，会耗费大量的时间，影响仿 真结果呈现的实时性。因此预设节点时延信息表和控制器端路径时延表，在初始化阶段即 为两个表项存储预置的时延信息值，提升时延计算速度。构建节点时延信息表，根据时延模型节点类型的划分，分为PE节点时延信息表、P-L1 节点时延信息表、P-L2节点时延信息表,在每vNode节点上存储，存储对象包括：UNI 接口速率、FlexE/MTN通道类型、业务包长度、时延值，如表1、2和3所示。构建光纤长度信息表，记录各链路的cost属性以表征光纤传输距离，因此可以通过 cost属性取值来计算光纤传输时延。构建路径时延表，路径时延表基于虚拟子拓扑生成，存储对象包括：起始端节点、结束端节点、通道类型、路径和时延值。对于跨子拓扑的切片路径需要确定相交 节点，并以相交节点为分界分别查找各子拓扑的路径时延表。如图5所示为网络拓扑的汇 聚环和接入环相交的场景，可以划分为两个子拓扑，接入环1为vTopo1，汇聚环1为vTopo2， 分别形成的路径时延表，示例性的，参照表4、5、6和7中的示例，其中L1为硬切片承 载转发表，L2为软切片承载转发表。表4 vTopo1-L1路径时延表信息表5 vTopo1-L2路径时延表信息表6 vTopo2-L1路径时延表信息表7 vTopo2-L2路径时延表信息如图6所示，对切片实例转发时延进行计算；步骤1)：业务仿真编排输入，相关信息包括业务源宿节点、业务接入端口以及业务类型。所有业务类型在仿真系统中预置，关联网络切片类型、通道带宽和业务包长类型；步骤2)：业务类型判定；步骤3)：对于生产I/II区业务，采用和标记为硬切片承载方案；对于生产III/IV区业 务，采用和标记为软切片承载方案，仿真系统分别计算符合路由策略的切片转发最短路径；步骤4)：拆解最短路径为源节点PE1、宿节点PE2、起始链路link1、结束链路linkn+1 和转发路径{P1-Pn}五部分；步骤5)：判断源节点和宿节点，即PE1和PE2是否在同一vTopo，方法为以PE1和 PE2为索引分别查找虚拟节点信息表中记载的各虚拟节点所属虚拟子拓扑的标识信息，记 为topo-id，取值相同即在同一子拓扑、取值不同即不在同一子拓扑；步骤6)：在同一子拓扑，以转发路径{P1-Pn}为索引查找P1节点所属的vTopo的路径时延表，硬切片方案查找vTopo-L1表、软切片方案查找vTopo-L2表，获取时延值T’； 不在同一子拓扑，以转发路径{P1-Pn}为索引通过跨多vTopo路径时延计算方法，获取时 延值T’；步骤7)：查找光纤长度信息表，获取起始链路link1和结束链路linkn+1的cost值，计算T、T；T＝costn*5us/km； 其中，T表示第n条链路的传输时延，costn表示第n条链路的光纤长度。步骤8)：分别查找PE1和PE2的PE节点时延信息表，获取时延值T和T；步骤9)：切片实例的端到端业务时延计算：T＝T’+T+T+T+T； 其中，PE1和PE2是表示在同一虚拟子拓扑下作为源节点和宿节点的两个服务提供商边缘节点，T表示源节点的时延值，T表示宿节点的时延值；T’表示转发 路径的时延；T表示起始链路的时延，T表示结束链路的时延。其中，如图7所示，当PE1和PE2不在同一虚拟子拓扑时，转发路径跨多个vTopo， 具体的路径时延计算方法如下，需要说明的是，路径时延是起始端节点与结束端节点之间 的所有虚拟节点和链路的时延：步骤1)：初始信息为转发路径路径{P1-Pn}；步骤2)：计算路径节点数量n，当n＝1时，执行步骤3；当n＝2时，执行步骤14； 当n≥3时，执行步骤4；步骤3)：n＝1时，查询P1节点时延表，P1节点时延即为传输链路径时延；步骤4)：n≥3时，设Pa为路径节点，初始情况Pa＝P2；步骤5)：通过查询vNode信息表获取Pa所属子拓扑的topo-id，即topo-id；步骤6)：判断topo-id是否唯一，唯一执行步骤7，不唯一执行步骤8；步骤7)：设下一节点为Pa，继续执行步骤5，即找到存在于多个子拓扑的节点；步骤8)：获取Pa前后相邻节点的子拓扑信息，topo-id和topo-id；步骤9)：判断topo-id与topo-id是否相同，相同继续判断下一节点，执行步骤7，不同执行步骤10；步骤10)：Pa即为相交节点，确定路径所属子拓扑topo-id和topo-id；步骤11)：分别查找所有子拓扑的路径时延表，获取路径时延值，为T’、T’；步骤12)：查找所有相交节点Pa的节点时延信息表，硬切片方案查找P-L1表，软切片方案查找P-L2表，获取时延值T；步骤13)：计算传输链P1-Pn路径时延T’＝T’+T’-T；步骤14)：n＝2时，查询P1的子拓扑信息，topo-id；步骤15)：以{P1-P2}为索引查找topo-id的路径时延表，即为传输链路径时延。本发明提出的技术方案，是面向电力通信传输网络拓扑仿真，提出虚拟网络模型和网 络模型对象，网络模型对象具体为虚拟子拓扑vTopo、虚拟节点vNode、虚拟端口vPort、 虚拟链路vLink，设置的模型对象信息表可存储拓扑、节点、端口和链路信息，通过网络 模型对象的实施可模拟电力业务的网络拓扑，将网络拓扑具象化。再是基于FlexE时隙化 交换技术和SPN转发技术，提出电力业务网络切片时延模型，和影响网络切片时延的六 个影响因素：节点类型、通道类型、接口速率、客户业务包长度、设备类型、链路长度， 通过设置节点时延信息表和控制器端路径时延表，可快速精准的进行切片实例时延的计算。根据电力业务属性，区分硬切片承载和软切片承载方案，通过设置不同的时延信息表，并充分考虑不同功能节点、通道类型、接口速率、客户业务包长度、设备类型转发时延的差 别设置不同的表项，达到精准计算的效果。本实施例通过创建路径时延表可有效减少查表次数，达到快速计算的目的，对比不采 用路径时延表和采用路径时延表两种方式下端到端时延计算的过程及查询表项耗时情况：以图4为例，假设系统查询一次节点时延信息表、光纤长度信息表和路径时延表的时 间一致，均为t：不采用路径时延表方式：图4中切片实例的端到端传输路径存在2个PE节点、n个 P节点，需要查询次节点时延信息表，时间为*t；另外存在条互 连链路，需要查询次光纤长度信息表，时间为*t，因此该种方式下时延计 算总查表时间为T＝*t+*t＝*t。采用路径时延表方式：图4中切片实例的端到端传输路径存在2个PE节点、2个子拓扑、1个相交P节点，需要查询2次PE节点时延信息表，2次路径时延表，1次处于相 交点的P节点时延信息表，总时间为5*t；另外需要查询PE节点与子拓扑间互连链路的 传输时延，即需要查询2次光纤长度信息表，时间为2*t，因此该种方式下时延计算的总 时间为T＝5*t+2*t＝7*t。当n≥3时，即转发路径上存在3个及以上P节点时，采用路径时延表方式计算切片实例端到端时延即优于不采用路径时延表方式。实际上在电力通信传输网拓扑中，绝大多数厂站到中心站的跳数都远远超过5跳，因此采用存储路径时延表方式可以有效节省时延计算过程中查表的时间，达到快速计算的目的。最后是提出面向硬切片和软切片承载方案的网络切片实例时延计算方法，特别提出当 路径存在多个虚拟子拓扑相交情况下的路径时延计算方法，可完成不同承载方案、不同拓 扑类型的切片实例端到端时延计算。本发明总体为在网络切片预编排阶段，提供网络切片实例端到端时延计算的整体解决 方案，且较传统方式，可达到快速精准的计算效果，满足电力业务精细化的时延要求，为 真正的网络切片实施提供可靠依据。综上所述，所述基于FlexE和SPN技术的电力业务网络切片时延计算方法及装置中， 通过电力通信传输网络拓扑和FlexE/SPN的转发特性构建虚拟的网络模型，形成以虚拟子 拓扑、虚拟节点、虚拟端口和虚拟链路构成的具象化电网；基于FlexE时隙化交换技术和 SPN转发技术，提出电力业务网络切片时延模型，引入节点类型、通道类型、业务包长度、设备类型、接口速率和链路长度六个因素，基于不同网络切片方案和不同虚拟子拓扑，构建与各种因素组合对应的节点时延信息表、光纤长度信息表和控制器端路径时延表，精细化的模拟现网时延特征，并将源宿节点之间最短传输路径拆解为源节点、宿节点、起始链路、结束链路和转发路径五部分，直接查询和计算各部分的时延值累加，快速精准得到网络切片实例端到端时延值。本领域普通技术人员应该可以明白，结合本文中所公开的实施方式描述的各示例性的 组成部分、系统和方法，能够以硬件、软件或者二者的结合来实现。具体究竟以硬件还是 软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个 特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本发明的范 围。当以硬件方式实现时，其可以例如是电子电路、专用集成电路、适当的固件、 插件、功能卡等等。当以软件方式实现时，本发明的元素是被用于执行所需任务的程序或 者代码段。程序或者代码段可以存储在机器可读介质中，或者通过载波中携带的数据信号 在传输介质或者通信链路上传送。“机器可读介质”可以包括能够存储或传输信息的任何 介质。机器可读介质的例子包括电子电路、半导体存储器设备、ROM、闪存、可擦除ROM、软盘、CD-ROM、光盘、硬盘、光纤介质、射频链路，等等。代码段 可以经由诸如因特网、内联网等的计算机网络被下载。还需要说明的是，本发明中提及的示例性实施例，基于一系列的步骤或者装置描述一 些方法或系统。但是，本发明不局限于上述步骤的顺序，也就是说，可以按照实施例中提 及的顺序执行步骤，也可以不同于实施例中的顺序，或者若干步骤同时执行。本发明中，针对一个实施方式描述和/或例示的特征，可以在一个或更多个其它实施 方式中以相同方式或以类似方式使用，和/或与其他实施方式的特征相结合或代替其他实 施方式的特征。以上所述仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人 员来说，本发明实施例可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任 何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
