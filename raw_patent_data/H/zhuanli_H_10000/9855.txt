标题title
一种田园综合体发电系统装置及控制方法
摘要abst
本发明涉及太阳能装置领域，具体涉及一种田园综合体发电系统装置及控制方法，光伏板用于接收太阳能，并对两组集成电池串进行充电，输出滤波器用于输出两组集成电池串的电能，通过上位机可以对整个装置进行控制，具体方式为，集成电池单元用于使用光伏板进行充电，然后在需要的时候放电，采样单元用于采集光伏板输入电压、电流和交流电输出的电压、电流以及集成电池串中各个蓄电池的电压、充放电电流和电容C的电压、充放电电流，并检测输入和输出是否过流，故障检测单元用于检测集成电池单元是否故障，并分别上传数据到上位机中，从而将充电系统和放电系统集成到一起，体积减小，更加方便使用。
权利要求书clms
1.一种田园综合体发电系统装置，其特征在于，包括光伏板、两组集成电池串、输出滤波器和上位机，所述集成电池串包括多个集成电池模块、第一单片机和光纤接口，所述集成电池模块包括采样单元、故障检测单元、驱动电路和集成电池单元，所述采样单元和所述故障检测单元分别与所述集成电池单元连接，所述驱动电路与所述集成电池单元连接，所述第一单片机分别与多个所述采样单元、多个所述故障检测单元和多个所述驱动电路连接，所述光纤接口与所述第一单片机和所述上位机连接，多个所述集成电池模块串联；两组所述集成电池串对称设置，所述光伏板与两组所述集成电池串连接；所述输出滤波器与两组所述集成电池串连接。2.如权利要求1所述的一种田园综合体发电系统装置，其特征在于，所述采样单元包括电流传感器、过流检测器、过压检测器和电压传感器。3.如权利要求1所述的一种田园综合体发电系统装置，其特征在于，所述集成电池单元包括蓄电池、第一功率开关管Q1、第二功率开关管Q2、第三功率开关管Q3、第四功率开关管Q4、第五功率开关管Q5、第六功率开关管Q6、电容C、第一电感L0、第二电感L1，所述蓄电池的正极与所述第一功率开关管Q1的漏极连接，所述第一功率开关管Q1的源极和所述第二电感L1的一端连接，所述第二电感L1的另一端与所述第三功率开关管Q3的源极连接，所述第三功率开光管Q3的漏极与所述第五功率开关管Q5的漏极连接，所述第五功率开关管Q5的源极与所述第一电感L0连接，所述第二功率开关管Q2的源极与所述蓄电池的负极连接，所述第二功率开关管Q2的漏极与所述第一功率开关管Q1的源极连接，所述第四功率开关管Q4的源极与所述蓄电池的负极连接，所述第四功率开关管Q4的漏极与所述第三功率开关管Q3的源极连接，所述电容的一端与所述蓄电池的负极连接，所述电容C的另一端与所述第三功率开关管Q3的漏极连接，所述第六功率开关管Q6的源极与所述蓄电池的负极连接，所述第六功率开关管Q6的漏极与所述第五功率开关管Q5的源极连接。4.如权利要求1所述的一种田园综合体发电系统装置，其特征在于，所述上位机包括第二单片机、AD芯片、按键和显示器，所述第二单片机通过所述光纤接口与所述第一单片机连接，所述按键和所述显示器与所述第二单片机连接，所述AD芯片与所述第二单片机连接。5.一种田园综合体发电系统装置的充电控制方法，应用于如权利要求3所述的田园综合体发电系统装置，其特征在于，包括：获取电压采样数据；判断集成电池串是否故障，若故障则进行故障提示，若没有故障则进行充电；充电时Q6导通，Q5关断，此时电感L0储能，电容C旁路；Q5导通，Q6关断使电感L0电压与AB端直流堆叠；电容C被升压充电；若蓄电池充满则结束充电，若蓄电池没充满则采用电容C对蓄电池充电。6.如权利要求5所述的一种田园综合体发电系统装置的充电控制方法，其特征在于，所述若蓄电池没充满则采用电容C对蓄电池充电的具体步骤是：若蓄电池电压大于电容电压，则Q2和Q3导通，Q1和Q4关断，L1储能，然后Q1和Q3导通，Q2和Q4关断，C和L1电压堆叠使得电容C升压对蓄电池充电；若蓄电池电压小于电容电压，则Q1和Q 3导通，Q2和Q4关断，L1储能，Q1和Q4导通，Q2和Q3关断，L1续流，电容C降压给蓄电池充电。7.一种田园综合体发电系统装置的放电控制方法，应用于如权利要求3所述的田园综合体发电系统装置，其特征在于，包括：获取电压采样数据；判断集成电池串是否故障，若故障则进行故障提示，若没有故障则进行放电；判断电容C放电电压和功率是否充足，若充足就通过电容C放电，此时Q1、Q2、Q3、Q4关断，采用正弦波脉宽调制控制Q5和Q6使电容放电，若不充足则采用蓄电池和电容C共同放电；采用正弦波脉宽调制控制Q5和Q6；通过输出滤波器输出交流电。8.如权利要求7所述的一种田园综合体发电系统装置的放电控制方法，其特征在于，所述采用蓄电池和电容C共同放电的具体步骤是：蓄电池升压放电时，Q1和Q4导通，Q2和Q3关断，L1储能、Q1和Q3导通，Q2和Q4关断，C和L1电压堆叠进行放电；蓄电池降压放电时，Q1和Q3导通，Q2和Q4关断，C和L1储能，Q2和Q3导通，Q1和Q4关断使C和L1电压并联进行放电。
说明书desc
技术领域本发明涉及太阳能装置领域，尤其涉及一种田园综合体发电系统装置及控制方法。背景技术传统的发电系统对不同等级电压输入兼容性较低，为输出高质量交流电往往需要较高的开关频率，造成开关损耗大；直流母线输入端电压较高时，需要安装大容量高压电容器组，要滤除交流电输出端的大量高次谐波需要安装体积较大的滤波器，这些都需要较高成本和较大的体积；同时充电系统和放电系统分开，充电模块通常采用降压充电，造成输入电压低于电池电压时无法充电，系统模块化集成程度低，使得在出现故障时不利于检修。发明内容本发明的目的在于提供一种田园综合体发电系统装置及控制方法，旨在提高系统集成化程度，更加方便使用。为实现上述目的，第一方面，本发明提供了一种田园综合体发电系统装置，包括光伏板、两组集成电池串、输出滤波器和上位机，所述集成电池串包括多个集成电池模块、第一单片机和光纤接口，所述集成电池模块包括采样单元、故障检测单元、驱动电路和集成电池单元，所述采样单元和所述故障检测单元分别与所述集成电池单元连接，所述驱动电路与所述集成电池单元连接，所述第一单片机分别与多个所述采样单元、多个所述故障检测单元和多个所述驱动电路连接，所述光纤接口与所述第一单片机和所述上位机连接，多个所述集成电池模块串联；两组所述集成电池串对称设置，所述光伏板与两组所述集成电池串连接；所述输出滤波器与两组所述集成电池串连接。其中，所述采样单元包括电流传感器、过流检测器、过压检测器和电压传感器。其中，所述集成电池单元包括蓄电池、第一功率开关管Q1、第二功率开关管Q2、第三功率开关管Q3、第四功率开关管Q4、第五功率开关管Q5、第六功率开关管Q6、电容C、第一电感L0、第二电感L1，所述蓄电池的正极与所述第一功率开关管Q1的漏极连接，所述第一功率开关管Q1的源极和所述第二电感L1的一端连接，所述第二电感L1的另一端与所述第三功率开关管Q3的源极连接，所述第三功率开光管Q3的漏极与所述第五功率开关管Q5的漏极连接，所述第五功率开关管Q5的源极与所述第一电感L0连接，所述第二功率开关管 Q2的源极与所述蓄电池的负极连接，所述第二功率开关管Q2的漏极与所述第一功率开关管Q1的源极连接，所述第四功率开关管Q4的源极与所述蓄电池的负极连接，所述第四功率开关管Q4的漏极与所述第三功率开关管Q3的源极连接，所述电容的一端与所述蓄电池的负极连接，所述电容C的另一端与所述第三功率开关管Q3的漏极连接，所述第六功率开关管Q6的源极与所述蓄电池的负极连接，所述第六功率开关管Q6的漏极与所述第五功率开关管Q5的源极连接。其中，所述上位机包括第二单片机、AD芯片、按键和显示器，所述第二单片机通过所述光纤接口与所述第一单片机连接，所述按键和所述显示器与所述第二单片机连接，所述AD芯片与所述第二单片机连接，光纤接口和所述第二单片机连接，第一单片机和第二单片机通过光纤连接进行通信。第二方面，本发明提供一种田园综合体发电系统装置的充电控制方法，包括：获取电压采样数据；判断集成电池串是否故障，若故障则进行故障提示，若没有故障则进行充电；充电时Q6导通，Q5关断，此时电感L0储能，电容C旁路；Q5导通，Q6关断使电感L0电压与AB端直流堆叠；电容C被升压充电；若蓄电池充满则结束充电，若蓄电池没充满则采用电容C对蓄电池充电。所述若蓄电池没充满则采用电容C对蓄电池充电的具体步骤是：若蓄电池电压大于电容电压，则Q2和Q3导通，Q1和Q4关断，L1储能，然后Q1和Q3导通，Q2和Q4关断，C和L1电压堆叠使得电容C升压对蓄电池充电；若蓄电池电压小于电容电压，则Q1和Q 3导通，Q2和Q4关断，L1储能， Q1和Q4导通，Q2和Q3关断，L1续流，电容C降压给蓄电池充电。第三方面，本发明提供一种田园综合体发电系统装置的放电控制方法，包括：获取电压采样数据；判断集成电池串是否故障，若故障则进行故障提示，若没有故障则进行放电；判断电容C放电电压和功率是否充足，若充足就通过电容C放电，若不充足则采用蓄电池和电容C共同放电；采用正弦波脉宽调制控制Q5和Q6；通过输出滤波器输出交流电。所述采用蓄电池和电容C共同放电的具体步骤是：蓄电池升压放电时，Q1和Q4导通，Q2和Q3关断，L1储能、Q1和Q3 导通，Q2和Q4关断，C和L1电压堆叠进行放电；蓄电池降压放电时，Q1和Q3导通，Q2和Q4关断，C和L1储能，Q2和 Q3导通，Q1和Q4关断使C和L1电压并联进行放电。本发明的一种田园综合体发电系统装置及控制方法，所述光伏板用于接收太阳能，并对两组所述集成电池串进行充电，所述输出滤波器用于输出两组所述集成电池串的电能，通过所述上位机可以对整个装置进行控制，具体方式为，所述集成电池单元用于使用光伏板进行充电，然后在需要的时候放电，所述采样单元用于采集光伏板输入电压、电流和交流电输出的电压、电流以及集成电池串中各个蓄电池的电压、充放电电流和电容C的电压、充放电电流，并检测输入和输出是否过流，所述故障检测单元用于检测所述集成电池单元是否故障，并分别上传数据到所述上位机中，从而将充电系统和放电系统集成到一起，体积减小，能将光伏板输入的直流电压存储，放电时输出交流电压。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明的一种田园综合体发电系统装置的结构图；图2是本发明的上位机的结构图；图3是本发明的集成电池模块的结构图；图4是本发明的一种田园综合体发电系统装置的一种实施例结构图；图5是本发明的一种田园综合体发电系统装置的充电控制方法的第一部分；图6是本发明的一种田园综合体发电系统装置的充电控制方法的第二部分；图7是本发明的一种田园综合体发电系统装置的放电控制方法的第一部分；图8是本发明的一种田园综合体发电系统装置的放电控制方法的第二部分。1-光伏板、2-集成电池串、3-输出滤波器、4-上位机、21-集成电池模块、22- 第一单片机、23-光纤接口、41-第二单片机、42-AD芯片、43-按键、44-显示器、 211-采样单元、212-故障检测单元、213-驱动电路、214-集成电池单元。具体实施方式下面详细描述本发明的实施例，所述实施例的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施例是示例性的，旨在用于解释本发明，而不能理解为对本发明的限制。请参阅图1～图4，第一方面，本发明提供一种田园综合体发电系统装置，包括：光伏板1、两组集成电池串2、输出滤波器3和上位机4，所述集成电池串2包括多个集成电池模块21、第一单片机22和光纤接口23，所述集成电池模块21包括采样单元211、故障检测单元212、驱动电路213和集成电池单元 214，所述采样单元211和所述故障检测单元212分别与所述集成电池单元214 连接，所述驱动电路213与所述集成电池单元214连接，所述第一单片机22分别与多个所述采样单元211、多个所述故障检测单元212和多个所述驱动电路 213连接，所述光纤接口23与所述第一单片机22和所述上位机4连接，多个所述集成电池模块21串联；两组所述集成电池串2对称设置，所述光伏板1与两组所述集成电池串2 连接；所述输出滤波器3与两组所述集成电池串2连接。在本实施方式中，所述光伏板1用于接收太阳能，并对两组所述集成电池串2进行充电，所述输出滤波器3用于输出两组所述集成电池串2的电能，通过所述上位机4可以对整个装置进行控制，具体方式为，所述集成电池单元214 用于使用光伏板1进行充电，然后在需要的时候放电，所述采样单元211用于采集光伏板1输入电压、电流和交流电输出的电压、电流以及集成电池串中各个蓄电池的电压、充放电电流和电容C的电压、充放电电流，并检测输入和输出是否过流，所述故障检测单元212用于检测所述集成电池单元214是否故障，并分别上传数据到所述上位机4中，从而将充电系统和放电系统集成到一起，体积减小，能将光伏板1输入的直流电压存储，放电时输出交流电压。进一步的，所述采样单元211包括电流传感器、过流检测器、过压检测器和电压传感器。在本实施方式中，通过电流传感器、过流检测器、过压检测器和电压传感器可以分别对光伏板1输入电压、电流和交流电输出的电压、电流以及集成电池串中各个蓄电池的电压、充放电电流和电容C的电压、充放电电流，并检测输入和输出是否过流进行检测。进一步的，所述集成电池单元214包括蓄电池、第一功率开关管Q1、第二功率开关管Q2、第三功率开关管Q3、第四功率开关管Q4、第五功率开关管Q5、第六功率开关管Q6、电容C、第一电感L0、第二电感L1，所述蓄电池的正极与所述第一功率开关管Q1的漏极连接，所述第一功率开关管Q1的源极和所述第二电感L1的一端连接，所述第二电感L1的另一端与所述第三功率开关管Q3 的源极连接，所述第三功率开光管Q3的漏极与所述第五功率开关管Q5的漏极连接，所述第五功率开关管Q5的源极与所述第一电感L0连接，所述第二功率开关管Q2的源极与所述蓄电池的负极连接，所述第二功率开关管Q2的漏极与所述第一功率开关管Q1的源极连接，所述第四功率开关管Q4的源极与所述蓄电池的负极连接，所述第四功率开关管Q4的漏极与所述第三功率开关管Q3的源极连接，所述电容的一端与所述蓄电池的负极连接，所述电容C的另一端与所述第三功率开关管Q3的漏极连接，所述第六功率开关管Q6的源极与所述蓄电池的负极连接，所述第六功率开关管Q6的漏极与所述第五功率开关管Q5的源极连接。在本实施方式中，集成电池模块21充电过程：集成电池模块21AB端输入直流时，通过控制Q6导通、Q5关断，电流流经L0、Q6，电感储能，电容C 被旁路；Q5导通、Q6关断，电感极性突变，电感电压与输入直流电压串联，电压升高给电容C充电，给电容C充电电压大小和控制Q5、Q6的PWM占空比有关。AB端直流电压与电容C电压关系，给电容C充电后，此时分蓄电池电压是否充满两种情况。蓄电池电压充满时，Q1、Q2、Q3、Q4关断，电容C不对蓄电池充电。当蓄电池电压未充满时，又分蓄电池电压大于电容C电压和蓄电池电压小于电容C电压两种情况。情况1：当蓄电池电压大于电容C电压时，电容C需要升压给蓄电池充电。电容C升压充电控制方法是：当Q2、Q3导通，Q1、Q4关断，电容C电压流经电感L1和Q2，电感L1电流不断增加，电感L1储存能量。Q1、Q3导通，Q2、Q4关断时，电感极性突变，电容C电压和电感L1电压堆叠，电压升高并共同向蓄电池提供能量，实现电容C升压给蓄电池充电。电容C电压与蓄电池电压关系，。情况2：当蓄电池电压小于电容C电压时，电容需要降压给蓄电池充电。电容C降压充电控制方法是：当Q1、Q3导通，Q2、Q4关断，电容C电压流经电感L1和Q1，电感L1电流不断增加，电感L1储存能量，蓄电池能量由电容C提供。Q1、Q4导通，Q2、Q3关断时，电感极性突变，电感L1电压向蓄电池提供能量，实现电容C降压给蓄电池充电。电容C电压与蓄电池电压关系，集成电池放电过程：集成电池模块21放电又分只有电容C放电或电容C和蓄电池共同放电两种情况，这两种情况取决于只由电容C放电时是否能为输出端负载提供足够的电压和功率，若电容C放电能为输出负载提供足够的电压和功率，则只由电容C放电，否则电容C和蓄电池共同放电。AB端交流电压与电容C端电压关系，情况1：只有电容C放电，Q1、Q2、Q3、Q4关断，采用正弦波脉宽调制 控制Q5、Q6，A、B端就能输出正弦交流信号。原理是在采样控制理论中有一个重要的结论，冲量相等而形状不同的窄脉冲加在具有惯性的环节上时，其效果基本相同。冲量即指窄脉冲的面积。这里所说的效果基本相同，是指环节的输出响应波形基本相同。如果把各输出波形用傅里叶变换分析，则其低频段非常接近，仅在高段略有差异。上述原理可以称之为面积等效原理，它是PWM控制技术的重要理论基础。情况2：由蓄电池和电容C共同放电时又分蓄电池升压放电和蓄电池降压放电两种情况。蓄电池升压放电控制方法是，当Q1、Q4导通，Q2、Q3关断，蓄电池电压流经电感L1和Q4，电感L1电流不断增加，电感L1储存能量。Q1、Q3导通，Q2、Q4关断时，电感极性突变，蓄电池电压和电感L1电压堆叠，电容C端电压升高，对Q5、Q6采用SPWM控制后共同向AB输出端提供能量，实现蓄电池升压放电。电容C电压与蓄电池电压关系蓄电池降压放电控制方法是：当Q1、Q3导通，Q2、Q4关断，蓄电池电压流经Q1、电感L1和Q3，电感L1电流不断增加，电容C、电感L1储存能量，A、 B输出端能量由蓄电池提供。Q2、Q3导通，Q1、Q4关断时，电感极性突变，电容C、电感L1电压并联，对Q5、Q6采用SPWM控制后电容C、电感L1电压共同向AB输出端提供能量，实现蓄电池降压放电。电容C电压与蓄电池电压关系进一步的，所述上位机4包括第二单片机41、AD芯片42、按键43和显示器44，所述第二单片机41通过所述光纤接口与所述第一单片机22连接，所述按键43和所述显示器44与所述第二单片机41连接，所述AD芯片42与所述第二单片机41连接。在本实施方式中，采样单元211作用是采集光伏板1的光伏电压、电流和交流电输出的电压、电流以及集成电池串中各个蓄电池的电压、充放电电流和电容C的电压、充放电电流，并检测输入和输出是否过流，将采集的结果通过数据接口传给AD芯片42。AD芯片42的作用是将采样模块的数据通过模数转换后传给第二单片机41，按键43和显示器44是人机交互的中介，通过按键43 对系统参数进行设置，系统将处理的数据结果通过显示屏显示。光纤接口23使第一单片机和第二单片机通过光电感应进行通信，光纤通信有传输距离远、传输速度快、损耗低和抗干扰能力强等优点，确保第二单片机41与各个集成电池串2的第一单片机通信稳定。第二方面，请参阅图5和图6，本发明还提供一种田园综合体发电系统装置的充电控制方法，包括：S101获取电压采样数据；通过采样单元211可以获取电压采样数据。S102判断集成电池串2是否故障判断集成电池串2是否故障的方法是检测Q1、Q2、Q3、Q4、Q5、Q6源极与漏极是否开路或者短路，以及Q1、Q2、Q3、Q4、Q5、Q6是否过热，若故障则进行故障提示，若没有故障则进行充电；S103充电时Q6导通，Q5关断，此时电感L0储能，电容C旁路；S104Q5导通，Q6关断使电感L0电压与AB端直流堆叠；S105电容C被升压充电；S106若蓄电池充满则结束充电，若蓄电池没充满则采用电池C对蓄电池充电。具体步骤是：若蓄电池电压大于电容电压，则Q2和Q3导通，Q1和Q4关断，L1储能，然后Q1和Q3导通，Q2和Q4关断，C和L1电压堆叠使得电容C升压对蓄电池充电；若蓄电池电压小于电容电压，则Q1和Q 3导通，Q2和Q4关断，L1储能， Q1和Q4导通，Q2和Q3关断，L1续流，电容C降压给蓄电池充电。第三方面，请参阅图7和图8，本发明还提供一种田园综合体发电系统装置的放电控制方法，包括：S201获取电压采样数据；S202判断集成电池串2是否故障，若故障则进行故障提示，若没有故障则进行放电；S203判断电容C放电电压和功率是否充足，若充足就通过电容C放电，若不充足则采用蓄电池和电容C共同放电；具体步骤是：蓄电池升压放电时，Q1和Q4导通，Q2和Q3关断，L1储能，Q1和Q3 导通，Q2和Q4关断，C和L1电压堆叠进行放电；蓄电池降压放电时，Q1和Q3导通，Q2和Q4关断，C和L1储能，Q2和 Q3导通，Q1和Q4关断使C和L1电压并联进行放电。S204采用正弦波脉宽调制控制Q5和Q6；S205通过输出滤波器3输出交流电。本发明具有以下优点：1.电池模块充电系统和放电系统集成一起，体积减小，能将光伏板1输入的直流电压存储，放电时输出交流电压；2.集成电池单元214的AB端只要存在直流电压都能将直流电压存储，即先将直流电压存储在电容C，电容C电压与蓄电池电压比较，电容C电压小于蓄电池电压时，电容C升压给蓄电池充电，电容C电压大于蓄电池电压时，电容 C降压给蓄电池充电；3.集成电池模块21放电时若电容C能够输出足够的电压和功率时只有电容 C放电，蓄电池不放电，蓄电池保持能量，当电容C的电压和功率不充足时由电容C和蓄电池放电，蓄电池可以根据放电需要选择升压放电和降压放电；4.输出交流电方法是通过控制各个集成电池模块21输出顺序将各个集成电池模块21的交流电压堆叠输出，各个集成电池模块21中的功率开关管开关频率随着堆叠数量增多而降低，以减小功率开关管开关损耗；5.根据电池串联分压原理，通过增加集成电池模块21堆叠数量，提高系统耐压值，可以适用不同电压等级的能源输入和不同等级的功率输出；6.系统模块化程度高，各个集成电池模块21间采用分散控制、智能管理，具有安装方便、利于检修特点。以上所揭露的仅为本发明一种较佳实施例而已，当然不能以此来限定本发明之权利范围，本领域普通技术人员可以理解实现上述实施例的全部或部分流程，并依本发明权利要求所作的等同变化，仍属于发明所涵盖的范围。
