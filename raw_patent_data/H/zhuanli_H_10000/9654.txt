标题title
一种承载多业务的PCM复接设备及通信系统
摘要abst
本发明公开了一种承载多业务的PCM复接设备，包括微处理器、现场可编程门阵列模块、网络接口模块、上行E1接口模块和下行E1接口模块；现场可编程门阵列模块包括配置模块和业务处理模块，网络接口模块与微处理器和配置模块相连，上行E1接口模块与业务处理模块相连，配置模块与微处理器和业务处理模块相连，业务处理模块与配置模块、网络接口模块、上行E1接口模块和下行E1接口模块相连；其中，配置模块用于决定时隙的分配规则；业务处理模块用于实现PCM复接设备的所述电路业务和所述网络业务的数据传输。本发明实现在同一台PCM复接设备中能够同时承载并灵活配置电路业务和网络业务，提高E1链路时隙的利用率，提供丰富多样的增值业务。
权利要求书clms
1.一种承载多业务的PCM复接设备，其特征在于，包括：微处理器、现场可编程门阵列模块、网络接口模块、上行E1接口模块和下行E1接口模块；所述现场可编程门阵列模块包括配置模块和业务处理模块，所述网络接口模块与所述微处理器和所述配置模块相连，所述上行E1接口模块与所述业务处理模块相连，所述配置模块与所述微处理器和所述业务处理模块相连，所述业务处理模块与所述配置模块、所述网络接口模块、所述上行E1接口模块和所述下行E1接口模块相连；其中：所述配置模块，用于决定时隙的分配规则，配置所述电路业务和所述网络业务所占用的时隙；所述业务处理模块，用于实现所述PCM复接设备的所述电路业务和所述网络业务的数据传输；所述网络接口模块，用于接收网络数据；所述上行E1接口模块，包括一个或两个上行E1接口，用于通过所述上行E1接口接收数据；所述下行E1接口模块，包括32个下行所述E1接口，用于通过所述下行E1接口接收数据。2.根据权利要求1所述的PCM复接设备，其特征在于，所述业务处理模块包括时隙交换矩阵模块、时隙复用模块、时隙解复用模块、IPOE接收模块和IPOE发送模块。3.根据权利要求2所述的PCM复接设备，其特征在于，所述网络接口模块与所述IPOE的接收模块相连，所述上行E1接口模块与所述时隙交换矩阵相连，所述下行E1接口模块与所述时隙复用模块相连，所述配置模块与所述时隙交换矩阵模块、所述IPOE接收模块、所述时隙复用模块、所述IPOE发送模块和所述时隙解复用模块相连，所述时隙交换矩阵模块与所述时隙复用模块相连，所述时隙复用模块与所述IPOE模块相连，所述时隙解复用模块与所述时隙交换矩阵模块和所述IPOE发送模块相连。4.根据权利要求3所述的PCM复接设备，其特征在于，所述时隙交换矩阵模块，用于在所述上行E1接口模块向所述下行接口模块传输数据时，将所述上行E1接口模块中的全部时隙交换到所述下行E1接口模块的时隙中，在所述下行E1接口模块向上行E1接口模块传输数据时，将所述多个下行E1接口模块的所述电源电路业务占用的时隙汇接成一个或两个所述上行E1接口模块占用的时隙；所述时隙复用模块，用于将从所述时隙交换矩阵模块和所述IPOE接收模块接收的所述电路业务和所述网络业务使用的时隙复接到一条E1链路上，并发送到所述下行E1接口模块；所述时隙解复用模块，用于将从所述下行E1接口模块接收的时隙分为所述电路业务和所述网络业务使用的时隙，并分别发送给所述时隙交换矩阵模块和所述IPOE发送模块；所述IPOE接收模块，用于将从所述网络接口模块接收到的符合标准以太网协议的数据包转换为E1链路传输的协议包，并通过所述设置的包过滤规则，确定所述数据包的目的E1接口；所述IPOE发送模块，用于将E1链路传输的协议包转换为符合标准以太网协议的数据包，并向所述网络接口发送。5.根据权利要求1所述的PCM复接设备，其特征在于，所述网络接口模块包括物理层芯片和网络芯片，所述现场可编程门阵列模块与所述网络芯片通过预设总线连接，所述网络芯片将符合预设网络协议的数据包发送给所述IPOE接收模块。6.一种通信系统，其特征在于，包括两台如权利要求1至5任一项所述的PCM复接设备；其中，第一台所述PCM复接设备为局端设备，第二台所述PCM复接设备为站端设备。7.根据权利要求6所述的通信系统，其特征在于，所述局端设备通过下行E1接口模块与所述站端设备的上行E1接口模块相连，并通过所述下行E1接口模块发送带有同步字的帧数据给所述站端设备，与所述站端设备完成同步。8.根据权利要求7所述的通信系统，其特征在于，所述帧数据包括两种类型，分别是奇数帧和偶数帧。9.根据权利要求8所述的通信系统，其特征在于，在所述局端设备与所述站端设备完成同步后，所述局端设备将配置的IPOE占用时隙发送给所述站端设备，与所述站端设备协商所述IPOE占用时隙。10.根据权利要求1至5任一项所述的PCM复接设备，其特征在于，在所述下行E1接口模块中，除所述电路业务占用的时隙外，所述下行E1接口的剩余时隙形成网络通道，并通过所述时隙解复用模块和所述IPOE发送模块将所述网络通道发送给所述网络接口模块，所述网络接口模块通过所述网络通道与连接的所述局部设备的交换机进行通信。
说明书desc
技术领域本发明涉及通信技术领域，尤其涉及一种承载多业务的PCM复接设备及通信系统。背景技术在电力调度通信网中，变电站、电厂、供电局等站点主要利用局端设备调度交换机，并通过PCM复接设备延伸放号后实现通信。但是在现有技术中，PCM复接设备存在以下缺点：1)现有的国外及原国内主流PCM复接设备厂商已不再生产PCM复接设备，PCM复接设备暴露出故障率高、维护困难、供货不足的情况；2)除原来的电路业务以外，大部分PCM复接设备厂商不擅长IP和电路交换机的相关技术领域；3)不能提供几十个站点的E1中部分时隙汇接成为一个或两个E1通道的功能。E1是一种同轴电缆接口标准，一般是2.048Mbit/s的速率，帧长为256bit，分为32个时隙，通过E1来传输IP协议，简称IPOE，主要用来承载网络业务，但是，在现有技术中，IPOE设备存在以下缺点：1)IPoE设备厂家不擅长电路交换的相关产品领域，无法提供电路业务，给客户的原有设备延续生命；2)大部分IPoE设备都是将1个E1通道转换到一个网口进行传输，不能实现将多个IPoE通道汇聚到一个网口进行输出。综上所述，两者都不能提供一整套完整的通信技术解决方案，设备的功能单一，不能针对不同应用场景进行灵活配置。发明内容针对现有技术存在的问题，本发明的目的在于提供一种承载多业务的PCM复接设备及通信系统，实现在同一台PCM复接设备中能够同时承载电路业务和网络业务，并且能够根据不同场景灵活配置上述业务的占用时隙，提高E1链路时隙的利用率，实现将多个下行E1接口模块的电路业务占用的时隙汇接成一个或两个上行E1接口模块占用的时隙，并且能够实现将下行E1接口的剩余时隙形成的几十个网络通道汇聚成为多个上行网络接口，提供丰富多样的增值业务。为实现上述发明目的，本发明采用下述的技术方案：一种承载多业务的PCM复接设备，包括：微处理器、现场可编程门阵列模块、网络接口模块、上行E1接口模块和下行E1接口模块；所述现场可编程门阵列模块包括配置模块和业务处理模块，所述网络接口模块与所述微处理器和所述配置模块相连，所述上行E1接口模块与所述业务处理模块相连，所述配置模块与所述微处理器和所述业务处理模块相连，所述业务处理模块与所述配置模块、所述网络接口模块、所述上行E1接口模块和所述下行E1接口模块相连；其中：所述配置模块，用于接收所述微处理器的指令来配置电路业务和网络业务所占用的时隙；所述业务处理模块，用于实现所述PCM复接设备的所述电路业务和所述网络业务的数据传输；所述网络接口模块，用于接收网络数据；所述上行E1接口模块，包括一个或两个上行E1接口，用于通过所述上行E1接口接收数据；所述下行E1接口模块，包括32个下行所述E1接口，用于通过所述下行E1接口接收数据。进一步的，所述业务处理模块包括时隙交换矩阵模块、时隙复用模块、时隙解复用模块、IPOE接收模块和IPOE发送模块。进一步的，所述网络接口模块与所述IPOE的接收模块相连，所述上行E1接口模块与所述时隙交换矩阵相连，所述下行E1接口模块与所述时隙复用模块相连；所述配置模块与所述时隙交换矩阵模块、所述IPOE接收模块、所述时隙复用模块、所述IPOE发送模块和所述时隙解复用模块相连，所述时隙交换矩阵模块与所述时隙复用模块相连，所述时隙复用模块与所述IPOE模块相连，所述时隙解复用模块与所述时隙交换矩阵模块和所述IPOE发送模块相连；其中：进一步的，所述时隙交换矩阵模块，用于在所述上行E1接口模块向所述下行接口模块传输数据时，将所述上行E1接口模块中的全部时隙交换到所述下行E1接口模块的时隙中，在所述下行E1接口模块向上行E1接口模块传输数据时，将所述多个下行E1接口模块的所述电源电路业务占用的时隙汇接成一个或两个所述上行E1接口模块占用的时隙；所述时隙复用模块，用于将从所述时隙交换矩阵模块和所述IPOE接收模块接收的所述电路业务和所述网络业务使用的时隙复接到一条E1链路上，并发送到所述下行E1接口模块；所述时隙解复用模块，用于将从所述下行E1接口模块接收的时隙分为所述电路业务和所述网络业务使用的时隙，并分别发送给所述时隙交换矩阵模块和所述IPOE发送模块；所述IPOE接收模块，用于将从所述网络接口模块接收到的符合标准以太网协议的数据包转换为E1链路传输的协议包，并通过所述设置的包过滤规则，确定所述数据包的目的E1接口；所述IPOE发送模块，用于将E1链路传输的协议包转换为符合标准以太网协议的数据包，并向所述网络接口发送。进一步的，所述网络接口模块包括物理层芯片和网络芯片，所述现场可编程门阵列模块与所述网络芯片通过预设总线连接，所述网络芯片将符合预设网络协议的数据包发送给所述IPOE接收模块。进一步的，在所述下行E1接口模块中，除所述电路业务占用的时隙外，所述下行E1接口的剩余时隙形成网络通道，并通过所述时隙解复用模块和所述IPOE发送模块将所述网络通道发送给所述网络接口模块，所述网络接口模块通过所述网络通道与连接的所述局部设备的交换机进行通信。作为本发明的优选实施例，，本发明还提供了一种通信系统，包括两台上述的PCM复接设备；其中，第一台所述PCM复接设备为局端设备，第二台所述PCM复接设备为站端设备。进一步的，所述局端设备通过下行E1接口模块与所述站端设备的上行E1接口模块相连，并通过所述下行E1接口模块发送带有同步字的帧数据给所述站端设备，与所述站端设备完成同步。进一步的，所述帧数据包括两种类型，分别是奇数帧和偶数帧。进一步的，在所述局端设备与所述站端设备完成同步后，所述局端设备将配置的IPOE占用时隙发送给所述站端设备，与所述站端设备协商所述IPOE占用时隙。进一步的，在所述下行E1接口模块中，除所述电路业务占用的时隙外，所述下行E1接口的剩余时隙形成网络通道，并通过所述时隙解复用模块和所述IPOE发送模块将所述网络通道发送给所述网络接口模块，所述网络接口模块通过所述网络通道与连接的所述局部设备的交换机进行通信。与现有技术相比，本发明实施例公开的一种承载多业务的PCM复接设备及通信系统，通过在PCM复接设备中引入IPOE技术，实现在同一台复接设备中能够同时承载电路业务和网络业务，并且能够根据不同场景灵活配置电路业务和网络业务的占用时隙，提高E1链路时隙的利用率，实现将多个下行E1接口模块的电路业务占用的时隙汇接成一个或两个上行E1接口模块占用的时隙，将下行E1接口的剩余时隙形成的几十个网络通道汇聚成为多个上行网络接口，从而提供丰富多样的增值业务。附图说明图1是本发明实施例提供的一种承载多业务的PCM复接设备的结构示意图；图2是本发明实施例提供的一种承载多业务的PCM复接设备的模块连接示意图；图3是本发明实施例提供的一种通信系统的连接示意图；图4是本发明实施例提供的一种承载多业务的PCM复接设备的上行E1接口时隙复用到下行E1接口时隙的原理示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。参见图1，是本发明实施例提供的一种承载多业务的PCM复接设备的结构示意图，主要包括以下模块：微处理器、现场可编程门阵列模块、网络接口模块、上行E1接口模块和下行E1接口模块。现场可编程门阵列模块包括配置模块和业务处理模块，网络接口模块与微处理器和配置模块相连，上行E1接口模块与业务处理模块相连，配置模块与微处理器和业务处理模块相连，业务处理模块与配置模块、网络接口模块、上行E1接口模块和下行E1接口模块相连。其中，配置模块，用于接收微处理器的指令来配置电路业务和网络业务所占用的时隙；业务处理模块，用于实现PCM复接设备的电路业务和网络业务的数据传输；网络接口模块，用于接收网络数据；上行E1接口模块，包括一个或两个上行E1接口，用于通过上行E1接口接收数据；下行E1接口模块，包括32个下行E1接口，用于通过下行E1接口接收数据。本发明实施例公开的一种承载多业务的PCM复接设备，通过在PCM复接设备中引入IPOE技术，实现在同一台复接设备中能够同时承载电路业务和网络业务，并且能够根据不同场景灵活配置电路业务和网络业务的占用时隙，提高E1链路时隙的利用率，实现将多个下行E1接口模块的电路业务占用的时隙汇接成一个或两个上行E1接口模块占用的时隙，将下行E1接口的剩余时隙形成的几十个网络通道汇聚成为多个上行网络接口，从而提供丰富多样的增值业务。参见图2，是本发明实施例提供的一种承载多业务的PCM复接设备的模块连接示意图。进一步的，业务处理模块包括时隙交换矩阵模块、时隙复用模块、时隙解复用模块、IPOE接收模块和IPOE发送模块。网络接口模块与IPOE的接收模块相连，上行E1接口模块与时隙交换矩阵相连，下行E1接口模块与时隙复用模块相连；配置模块与时隙交换矩阵模块、IPOE接收模块、时隙复用模块、IPOE发送模块和时隙解复用模块相连，时隙交换矩阵模块与时隙复用模块相连，时隙复用模块与IPOE模块相连，时隙解复用模块与时隙交换矩阵模块和IPOE发送模块相连。进一步的，时隙交换矩阵模块，用于在上行E1接口模块向下行接口模块传输数据时，将上行E1接口模块中的全部时隙交换到下行E1接口模块的时隙中，在下行E1接口模块向上行E1接口模块传输数据时，将多个下行E1接口模块的电路业务占用的时隙汇接成一个或两个上行E1接口模块占用的时隙。时隙复用模块，用于将从时隙交换矩阵模块和IPOE接收模块接收的电路业务和网络业务使用的时隙复接到一条E1链路上，并发送到下行E1接口模块。时隙解复用模块，用于将从下行E1接口模块接收的时隙分为电路业务和网络业务使用的时隙，并分别发送给时隙交换矩阵模块和IPOE发送模块。IPOE接收模块，用于将从网络接口模块接收到的符合标准以太网协议的数据包转换为E1链路传输的协议包，并通过设置的包过滤规则，确定数据包的目的E1接口。IPOE发送模块，用于将E1链路传输的协议包转换为符合标准以太网协议的数据包，并向网络接口发送。进一步的，网络接口模块包括物理层芯片和网络芯片，现场可编程门阵列模块与网络芯片通过预设总线连接，网络芯片将符合预设网络协议的数据包发送给IPOE接收模块。需要说明的是，在具体实施时，预设总线和预设网络协议可以是根据实际需要进行限定，仅需保证预设总线和预设网络协议能够满足上述数据传输要求即可，在此不做限制。在一个具体的实施方式中，网络接口模块包括物理层芯片和网络芯片，现场可编程门阵列模块与网络芯片通过GMII总线连接，网络芯片将符合标准以太网协议的数据包发送给IPOE接收模块。值得说明的是，本实施例中通过业务处理模块实现与配置模块、网络接口模块、上行E1接口模块和下行E1接口模块的通信连接，实现在同一台复接设备中能够同时承载电路业务和网络业务。参见图3，是本发明实施例提供的一种通信系统的连接示意图。通信系统包括两台上述的PCM复接设备，；其中，第一台PCM复接设备为局端设备，第二台PCM复接设备为站端设备。示例性地，局端一般是对放置在通信局、中心局等场所中的设备的称谓，站端是针对放置在场站、电厂等末端设备的称谓。进一步的，局端设备通过下行E1接口模块与站端设备的上行E1接口模块相连，并通过下行E1接口模块发送带有同步字的帧数据给站端设备，与站端设备完成同步。进一步的，帧数据包括两种类型，分别是奇数帧和偶数帧。进一步的，在局端设备与站端设备完成同步后，局端设备将配置的IPOE占用时隙发送给站端设备，与站端设备协商IPOE占用时隙。本发明实施例公开的一种通信系统，通过设置两台PCM复接设备，其中一台PCM复接设备为局端设备，另一台PCM复接设备为站端设备，实现两台PCM复接设备之间的电路业务和网络业务的通信任务，并且能够根据不同场景灵活配置电路业务和网络业务的占用时隙，提高E1链路时隙的利用率，实现将多个下行E1接口模块的电路业务占用的时隙汇接成一个或两个上行E1接口模块占用的时隙，将下行E1接口的剩余时隙形成的几十个网络通道汇聚成为多个上行网络接口，从而提供丰富多样的增值业务。示例性地，在PCM复接设备中，电路业务和网络业务所占用的时隙主要的配置过程如下：局端设备通过网络协议发送包含占用时隙信息的数据包给网络接口模块的物理层芯片，再通过网络芯片将数据包发送给微处理器，微处理器从收到的数据包中解析得到各个下行E1接口中电路业务占用时隙数量，然后将上述得到的时隙数量通过配置模块写入时隙复用模块和时隙交换矩阵中，时隙复用模块将接收到的时隙数量通过下行E1接口模块，配置下行E1接口模块的下行E1接口的电路业务所占用的时隙，并通过带同步字的帧数据发送给站端设备，站端设备在接收到数据后，与局端设备完成同步，且接收到局端设备的下行E1接口电路业务占用的时隙数量，在配置好局端设备的下行E1接口模块的下行E1接口的电路业务所占用的时隙后，通过计算网络业务所占用的时隙数量，就可以将计算得到的时隙数量用来承载网络业务。其中，计算网络业务所占用的时隙的方法为：一个E1通道上的数据位32个时隙，其中1个为同步时隙，再得知了电路业务所占用的时隙数量后，用总的32个时隙减去1个同步时隙，再减去电路业务占用的时隙数量，即为网络业务所占用的时隙数量。进一步的，局端设备通过下行E1接口模块发送的带同步字的帧数据有两种类型，分别是奇数帧和偶数帧，在E1通道中，采用成帧方式进行数据的传输，其中E1通道数据分为32个时隙，第0个时隙作为帧同步时隙，帧同步时隙的比特位分布如下面的表1所示。表1表格中，注1、注2、注3和注4的意思分别是：注1：Si在ITU建议中作为国际用途保留字，实际中一般用作CRC校验。注2：奇数帧的比特2固定为1，以避免出现伪同步码。注3：奇数帧的比特3的A1作为指示远端告警信息，正常时为0，出现告警信息时为1。注4：利用Sa4到Sa8比特位，局端设备与站端设备进行IPOE占用时隙的协商。将站端设备与局端设备的同步信息及占用时隙的信息存储在E1通道中原有的帧同步时隙中，而不用占用其它时隙的资源。进一步的，在PCM复接设备中，将从上行E1接口模块向下行E1接口模块的数据传输过程如下：微处理器将从上行E1接口模块接收到的电路业务所占用的时隙数量，通过时隙交换矩阵将上行E1接口模块中的E1接口中的全部时隙交换到对应的下行E1接口模块的E1接口的时隙上，其中，在上述的配置过程中，配置模块已经提前将各个下行E1接口中电路业务需要占用的时隙数量告知给了时隙交换矩阵，这样时隙交换矩阵就能将上行E1接口中的全部时隙准确的分配到各个不同的下行E1接口中。如图4所示，为本发明实施例提供的一种承载多业务的PCM复接设备的上行E1接口时隙复用到下行E1接口时隙的原理示意图，上行E1接口模块的E1接口的全部时隙都是用来作为电路业务，将上行E1接口占用的时隙复用到下行E1接口模块的E1接口的对应时隙上，则其它的时隙可以用来作为网络业务所占用的时隙。进一步的，在PCM复接设备中，从网络数据接口向下行E1接口模块传输数据的过程如下：网络接口接收外部数据包，通过网络芯片发送到IPOE接收模块，IPOE接收模块在接收到数据包后将符合标准以太网协议的数据包转换为在E1链路上传输的数据包，然后通过设置的数据包的过滤规则，获取数据包中的目的MAC地址，并对每一个下行E1接口模块的E1接口口中存储的MAC地址表进行检索匹配，如果发现有匹配的MAC地址，则向此MAC地址对应的E1接口发送数据包，如果没有发现匹配，则向所有的E1接口广播网络数据包。进一步的，在PCM复接设备中，从下行E1接口模块向上行E1接口模块和网络接口模块传输数据的过程如下：下行E1接口模块的E1接口在接收到数据后，将数据发送给时隙解复用模块，时隙解复用模块将一条E1链路上的时隙，分为电路业务使用的时隙和网络业务使用的时隙，分别发送给时隙交换矩阵和IPOE发送模块。时隙交换矩阵将接收到的电路业务占用的时隙发送给上行E1接口模块，上行E1接口模块连接到局部交换机，可提供原有的电路业务。IPOE发送模块将接收到的网络业务占用的时隙发送给网络接口模块。进一步的，在下行E1接口模块中，除电路业务占用的时隙外，下行E1接口的剩余时隙形成网络通道，并通过时隙解复用模块和IPOE发送模块将网络通道发送给网络接口模块，网络接口模块通过网络通道与连接的局部设备的交换机进行通信。综上所述，本发明实施例公开的一种承载多业务的PCM复接设备及通信系统，包括现场可编程门阵列模块、微处理器、网络接口模块、上行E1接口模块和下行E1接口模块；现场可编程门阵列模块包括配置模块和业务处理模块，网络接口模块与微处理器和配置模块相连，上行E1接口模块与业务处理模块相连，配置模块与微处理器和业务处理模块相连，业务处理模块与配置模块、网络接口模块、上行E1接口模块和下行E1接口模块相连；其中，配置模块，用于决定时隙的分配规则；业务处理模块，用于实现PCM复接设备的电路业务和网络业务的数据传输；网络接口模块，用于接收网络数据；上行E1接口模块，包括一个或两个上行E1接口，用于通过上行E1接口接收数据；下行E1接口模块，包括32个下行E1接口，用于通过下行E1接口接收数据。通过在PCM复接设备中引入IPOE技术，能够实现在同一台PCM复接设备中同时承载电路业务和网络业务，根据不同场景灵活配置电路业务和网络业务的占用时隙，提高E1链路时隙的利用率，并且能够将多个下行E1接口模块的电路业务占用的时隙汇接成一个或两个上行E1接口模块占用的时隙，将下行E1接口模块的剩余时隙形成的多个网络通道汇聚成为多个上行网络接口，通过上行网络接口模块连接到局端网络交换机，提供丰富多样的增值业务。以上所述是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也视为本发明的保护范围。
