标题title
基于区块链的订阅信息分发系统
摘要abst
本发明涉及信息技术领域，具体涉及一种基于区块链的订阅信息分发系统，包括信息源单元、订阅单元和智能合约单元，接收用户的订阅请求，将时钟与订阅时长相符的栏标识及整数n发送给用户，将信息包使用对称加密算法加密，将密文信息包上传区块链存储，生成一元多项式经过提示栏中的m个样本点钟的n个，计算样本距离，样本距离最小的一元多项式即为当前信息类别在当前加密栏的加密多项式，使用加密多项式加密秘钥Key，将密文Key写入公示栏，用户获得样本距离最小的一元多项式作为复原多项式，获得明文Key，使用明文Key解密密文信息包。本发明的实质性效果是：能够管控信息的扩散范围，提高订阅信息的安全性。
权利要求书clms
1.基于区块链的订阅信息分发系统，其特征在于，包括信息源单元、订阅单元和智能合约单元，所述智能合约单元在区块链上发布智能合约，所述智能合约包括若干个加密栏，所述加密栏包括栏标识、时钟、提示栏和公示栏，所述提示栏展示m个样本点，i∈，所述时钟为倒计时时钟，当时钟倒计时至0时，所述加密栏更新提示栏，并重置时钟，所述订阅单元为每个加密栏关联一个整数n，所述订阅单元接收用户的订阅请求，根据用户的订阅时长，将时钟与订阅时长相符的加密栏的栏标识及相应的整数n发送给用户，所述信息源单元周期性产生待分发的信息包，将信息包使用对称加密算法加密，获得密文信息包，将密文信息包上传区块链存储，对称算法加密使用秘钥记为秘钥Key，选择一个提示栏，获得提示栏所在加密栏关联的整数n，生成一元多项式，所述一元多项式经过提示栏中的m个样本点钟的n个，计算剩余m-n个样本点与所述一元多项式的距离，距离和记为样本距离，穷举过m个样本点中的n个样本点的一元多项式，并分别计算每个一元多项式的样本距离，样本距离最小的一元多项式即为当前信息类别在当前加密栏的加密多项式，使用加密多项式加密秘钥Key，将密文Key写入公示栏，用户读取提示栏和公示栏，穷举过提示栏中m个样本点中的n个一元多项式，获得样本距离最小的一元多项式作为复原多项式，使用复原多项式解密公示栏的密文Key，获得明文Key，使用明文Key解密密文信息包，获得明文信息包。2.根据权利要求1所述的基于区块链的订阅信息分发系统，其特征在于，所述订阅单元为每个加密栏关联一个整数s，所述信息源单元穷举过m个样本点中的n个样本点的一元多项式，并分别计算每个一元多项式的样本距离，将一元多项式按照样本距离升序排列，获得序号s对应的一元多项式作为加密多项式，用户读取提示栏和公示栏，穷举过提示栏中m个样本点中的n个一元多项式，按照样本距离升序排列，序号s对应的一元多项式作为复原多项式。3.根据权利要求1或2所述的基于区块链的订阅信息分发系统，其特征在于，所述信息源单元周期性产生多个信息类别的待分发的信息包，所述订阅单元为每个加密栏关联多个整数n，多个整数n分别对应多个信息类别，根据用户订阅的信息类别和订阅时长，为用户提供对应的整数n，所述信息源任选一个信息类别，生成秘钥Key，使用Key加密当前选中类别的信息包并上传区块链存储，使用当前信息类别在每个加密栏对应的整数n，获得相应的加密多项式，生成密文Key，将密文Key写入相应加密栏的公示栏，更换信息类别，获得更换后的信息类别在每个加密栏的整数n，获得整数n对应的加密多项式，记为别类加密多项式，使用别类加密多项式解密公示栏记录的密文Key，获得结果记为别类秘钥Key，使用别类秘钥Key加密对应信息类别的信息包，获得密文信息包并上传区块链存储，不断更换信息类别，直到全部信息类别的信息包均被加密并上传区块链存储。4.根据权利要求3所述的基于区块链的订阅信息分发系统，其特征在于，所述订阅单元为每个加密栏关联多个整数n和整数s的组合，多个分别对应多个信息类别，根据用户订阅的信息类别和订阅时长，为用户提供对应的。5.根据权利要求1或2所述的基于区块链的订阅信息分发系统，其特征在于，所述信息源使用加密多项式加密秘钥Key时，执行以下步骤：将秘钥Key转换为二进制流，按预设规则补位后，截断为若干个预设长度的二进制段，将二进制段转换为整数D；生成数据组合 ，bi为正整数，使得D=∑^bi*floor*f+△，其中i∈，△为修正值，floor为向下取证函数；将数据组合按顺序组合作为密文Key。6.根据权利要求5所述的基于区块链的订阅信息分发系统，其特征在于，所述信息源为每个加密栏生成自变量x取值集合；所述信息源计算当前加密函数在自变量x取值集合下的函数值，将函数值与自变量x的取值关联，作为速查表；所述信息源对秘钥Key进行加密时，查询速查表，选取N个函数值并相应生成N个bi的值，使∑^bi*floor*f与D的差值处于预设范围内。
说明书desc
技术领域本发明涉及信息技术领域，具体涉及一种基于区块链的订阅信息分发系统。背景技术信息订阅服务就是一种采用信息推送的方式，根据用户自定义的订阅信息向固定的用户群体推送信息包括：资讯信息，博客或微博，新闻组的讨论邮件等内容的一种互联网服务。订阅了互联网内容提供方内容的用户，可以在以后通过客户端收到互联网内容提供方提供的内容。但目前的订阅信息大多为不需要进行保密或者扩散范围管控的信息。对于有保密性要求，需要进行扩散范围管控的信息订阅，现有技术尚无法提供相关技术方案。为此需要研究新的订阅信息分发技术。发明内容本发明要解决的技术问题是：目前缺乏能够限制订阅信息查阅时限方案的技术问题。提出了一种基于区块链的订阅信息分发系统，能够限制订阅信息的查阅时限。为解决上述技术问题，本发明所采取的技术方案为：基于区块链的订阅信息分发系统，包括信息源单元、订阅单元和智能合约单元，所述智能合约单元在区块链上发布智能合约，所述智能合约包括若干个加密栏，所述加密栏包括栏标识、时钟、提示栏和公示栏，所述提示栏展示m个样本点，i∈，所述时钟为倒计时时钟，当时钟倒计时至0时，所述加密栏更新提示栏，并重置时钟，所述订阅单元为每个加密栏关联一个整数n，所述订阅单元接收用户的订阅请求，根据用户的订阅时长，将时钟与订阅时长相符的加密栏的栏标识及相应的整数n发送给用户，所述信息源单元周期性产生待分发的信息包，将信息包使用对称加密算法加密，获得密文信息包，将密文信息包上传区块链存储，对称算法加密使用秘钥记为秘钥Key，选择一个提示栏，获得提示栏所在加密栏关联的整数n，生成一元多项式，所述一元多项式经过提示栏中的m个样本点钟的n个，计算剩余m-n个样本点与所述一元多项式的距离，距离和记为样本距离，穷举过m个样本点中的n个样本点的一元多项式，并分别计算每个一元多项式的样本距离，样本距离最小的一元多项式即为当前信息类别在当前加密栏的加密多项式，使用加密多项式加密秘钥Key，将密文Key写入公示栏，用户读取提示栏和公示栏，穷举过提示栏中m个样本点中的n个一元多项式，获得样本距离最小的一元多项式作为复原多项式，使用复原多项式解密公示栏的密文Key，获得明文Key，使用明文Key解密密文信息包，获得明文信息包。作为优选，所述订阅单元为每个加密栏关联一个整数s，所述信息源单元穷举过m个样本点中的n个样本点的一元多项式，并分别计算每个一元多项式的样本距离，将一元多项式按照样本距离升序排列，获得序号s对应的一元多项式作为加密多项式，用户读取提示栏和公示栏，穷举过提示栏中m个样本点中的n个一元多项式，按照样本距离升序排列，序号s对应的一元多项式作为复原多项式。作为优选，所述信息源单元周期性产生多个信息类别的待分发的信息包，所述订阅单元为每个加密栏关联多个整数n，多个整数n分别对应多个信息类别，根据用户订阅的信息类别和订阅时长，为用户提供对应的整数n，所述信息源任选一个信息类别，生成秘钥Key，使用Key加密当前选中类别的信息包并上传区块链存储，使用当前信息类别在每个加密栏对应的整数n，获得相应的加密多项式，生成密文Key，将密文Key写入相应加密栏的公示栏，更换信息类别，获得更换后的信息类别在每个加密栏的整数n，获得整数n对应的加密多项式，记为别类加密多项式，使用别类加密多项式解密公示栏记录的密文Key，获得结果记为别类秘钥Key，使用别类秘钥Key加密对应信息类别的信息包，获得密文信息包并上传区块链存储，不断更换信息类别，直到全部信息类别的信息包均被加密并上传区块链存储。作为优选，所述订阅单元为每个加密栏关联多个整数n和整数s的组合，多个分别对应多个信息类别，根据用户订阅的信息类别和订阅时长，为用户提供对应的。作为优选，所述信息源使用加密多项式加密秘钥Key时，执行以下步骤：将秘钥Key转换为二进制流，按预设规则补位后，截断为若干个预设长度的二进制段，将二进制段转换为整数D；生成数据组合 ，bi为正整数，使得D=∑^bi*floor*f+△，其中i∈，△为修正值，floor为向下取证函数；将数据组合按顺序组合作为密文Key。作为优选，所述信息源为每个加密栏生成自变量x取值集合；所述信息源计算当前加密函数在自变量x取值集合下的函数值，将函数值与自变量x的取值关联，作为速查表；所述信息源对秘钥Key进行加密时，查询速查表，选取N个函数值并相应生成N个bi的值，使∑^bi*floor*f与D的差值处于预设范围内。本发明的实质性效果是：限制了用户查阅订阅信息的时限，能够管控信息的扩散范围，提高订阅信息的安全性，适合需要限制扩散范围的订阅信息的分发；通过改进的限时加密算法，提高了限时加解密的效率。附图说明图1为实施例一订阅信息分发系统示意图。图2为实施例一加密多项式获取方法示意图。图3为实施例二多信息类别分发对应加密多项式获取方法示意图。其中：10、区块链，20、信息源单元，21、密文信息包，22、秘钥Key，30、智能合约单元，40、订阅单元，50、用户。具体实施方式下面通过具体实施例，并结合附图，对本发明的具体实施方式作进一步具体说明。实施例一：基于区块链的订阅信息分发系统，请参阅附图1，包括信息源单元20、订阅单元40和智能合约单元30，智能合约单元30在区块链10上发布智能合约，智能合约包括若干个加密栏，如表1所示，加密栏包括栏标识、时钟、提示栏和公示栏，提示栏展示m个样本点，i∈，时钟为倒计时时钟，当时钟倒计时至0时，加密栏更新提示栏，并重置时钟。如加密栏1的时钟1记载时间为1d，d表示天，即第二天加密栏1的公示栏1内容即会被更新。而后时钟1会被重置为60d，相应的其他加密栏的时钟都会减1，订阅单元40为每个加密栏关联一个整数n，订阅单元40接收用户50的订阅请求，根据用户50的订阅时长，将时钟与订阅时长相符的加密栏的栏标识及相应的整数n发送给用户50，信息源单元20周期性产生待分发的信息包，将信息包使用对称加密算法加密，获得密文信息包21，将密文信息包21上传区块链10存储，对称算法加密使用秘钥记为秘钥Key22，选择一个提示栏，获得提示栏所在加密栏关联的整数n，生成一元多项式，一元多项式经过提示栏中的m个样本点钟的n个，计算剩余m-n个样本点与一元多项式的距离，距离和记为样本距离，穷举过m个样本点中的n个样本点的一元多项式，并分别计算每个一元多项式的样本距离，样本距离最小的一元多项式即为当前信息类别在当前加密栏的加密多项式，使用加密多项式加密秘钥Key22，将密文Key写入公示栏，用户50读取提示栏和公示栏，穷举过提示栏中m个样本点中的n个一元多项式，获得样本距离最小的一元多项式作为复原多项式，使用复原多项式解密公示栏的密文Key，获得明文Key，使用明文Key解密密文信息包21，获得明文信息包。表1 智能合约记载信息加密栏1{栏标识1,时钟1,提示栏1,公示栏1}加密栏2{栏标识2,时钟2,提示栏2,公示栏2}……加密栏60{栏标识60,时钟60,提示栏60,公示栏60}采用本实施例记载方案，将信息包加密后，上传区块链10一次即可。用户50自行从区块链10上下载密文信息包21。秘钥Key22则需要被加密60次，即每个加密栏都需要进行一次秘钥Key22的加密，将60个密文Key全部上传区块链10存储，用户50下载自己对应的密文Key，并结合对应的加密栏解密即可。若未获得正确的n值，则通过m个样本点能够复原出m个一元多项式。为提高限时加密的安全性，公示栏应公开多个样本点，如公开512个或者1024个样本点。但即便增加样本点数量，密文Key也容易被穷举尝试的方式破解。因此本实施例提供了具体的实施方案，以避免加密多项式容易被穷举攻击的问题。请参阅附图2，包括：步骤A01）订阅单元40为每个加密栏关联一个整数s；步骤A02）信息源单元20穷举过m个样本点中的n个样本点的一元多项式，并分别计算每个一元多项式的样本距离；步骤A03）将一元多项式按照样本距离升序排列；步骤A04）获得序号s对应的一元多项式作为加密多项式；步骤A05）用户50读取提示栏和公示栏，穷举过提示栏中m个样本点中的n个一元多项式，按照样本距离升序排列；步骤A06）序号s对应的一元多项式作为复原多项式。对于公示栏m=6个样本点时，能够产生共64个可能的一元多项式。当公示栏公开1024个样本点时，能够产生2^1024个一元多项式，数量极大，显著提高了穷举破解的难度。信息源使用加密多项式加密秘钥Key22时，执行以下步骤：将秘钥Key22转换为二进制流，按预设规则补位后，截断为若干个预设长度的二进制段，将二进制段转换为整数D；生成数据组合 ，bi为正整数，使得D=∑^bi*floor*f+△，其中i∈，△为修正值，floor为向下取证函数；将数据组合按顺序组合作为密文Key。如秘钥Key22为“EuWk”，在ASCII编码下，将字符串EuWk转为二进制为：01000101 01110101 01010111 01101011，按照2字节的长度截断为两个整数，分别为D1=17781，D2=22379。一元多项式f为：f=15*x^2-32*x+64。则D1可以表示为D1=6*f+f+844，对应的数据组合为。同样的方式能够获得整数D2的数据组合。每个整数的数据组合是不唯一的。为提高使用一元多项式f加解密的效率，信息源为每个加密栏生成自变量x取值集合；信息源计算当前加密函数在自变量x取值集合下的函数值，将函数值与自变量x的取值关联，作为速查表；信息源对秘钥Key22进行加密时，查询速查表，选取N个函数值并相应生成N个bi的值，使∑^bi*floor*f与D的差值处于预设范围内。本实施例中为加解密仓2设置的自变量x取值集合为{2,4,7}，一元多项式f为：f=7*x^2+12*x-4，则相应的函数值为{48,156,423}，速查表如表2所示。表2 本实施例提供的速查表自变量x一元多项式f函数值24841567423通过使用{48,156,423}中的值，进行带系数的求和计算，再加上修正值△，能够表示任意的整数D，完成信息的加密过程。本发明的实质性效果是：限制了用户查阅订阅信息的时限，能够管控信息的扩散范围，提高订阅信息的安全性，适合需要限制扩散范围的订阅信息的分发；通过改进的限时加密算法，提高了限时加解密的效率。实施例二：基于区块链的订阅信息分发系统，本实施例考虑当信息源单元20产生多个信息类别的信息包时，每个信息包对应不同的用户50群体。采用实施例一记载方案时，将会导致相同订阅时长的用户50之间能够解密未订阅的其他类别的信息包，造成信息包的意外扩散。为每个信息类别发布一个智能合约的成本抬高。为此，本实施例提供了新的技术方案，能够使不同信息类别的信息包使用相同的智能合约，同时使信息包仅能够被相应的用户50解密。请参阅附图3，包括：步骤B01）信息源单元20周期性产生多个信息类别的待分发的信息包；步骤B02）订阅单元40为每个加密栏关联多个整数n，多个整数n分别对应多个信息类别；步骤B03）根据用户50订阅的信息类别和订阅时长，为用户50提供对应的整数n；步骤B04）信息源任选一个信息类别，生成秘钥Key22，使用Key加密当前选中类别的信息包并上传区块链10存储；步骤B05）使用当前信息类别在每个加密栏对应的整数n，获得相应的加密多项式；步骤B06）生成密文Key，将密文Key写入相应加密栏的公示栏；步骤B07）更换信息类别，获得更换后的信息类别在每个加密栏的整数n；步骤B08）获得整数n对应的加密多项式，记为别类加密多项式；步骤B09）使用别类加密多项式解密公示栏记录的密文Key，获得结果记为别类秘钥Key22；步骤B10）使用别类秘钥Key22加密对应信息类别的信息包，获得密文信息包21并上传区块链10存储；步骤B11）不断更换信息类别，直到全部信息类别的信息包均被加密并上传区块链10存储。如公示栏30公开了4个样本点：、、和。信息源单元20周期性产生两个类别的信息包，分别为行业调查报告和产品A供货商及报价表。为行业调查报告的用户50分配的n=2，为产品A供货商及报价表的用户50分配的n=3，订阅时长均为30天。均选择了加密栏30的栏标识发送给用户50。则为行业调查报告的用户50生成的一元多项式数量为6个，一元多项式及对应的样本距离如表3所示。表3 n=2时的一元多项式及样本距离表序号一元多项式样本距离1y=4x+81223y=10x+28163y=4.8x+6.410.44y=3x+12185y=5x+4106y=7x+-2038选择其中样本距离最小的一元多项式作为加密多项式，则加密多项式为y=5x+4。对于产品A供货商及报价表，对应的n=3，则能够生成4个一元多项式，如表4所示。表4 n=3时的一元多项式及样本距离表序号一元多项式样本距离1-0.5/3*x^2+5*x+20/321.320.1*x^2+3.4*x+8.86.431.1/3*x^2-1/3*x+15.24.340.5*x^2-3*x+288选择样本距离最小的一元多项式作为加密多项式，则加密多项式为1.1/3*x^2-1/3*x+15.2。由于两个用户50群体相互之间并不知晓互相的的n的值，因此用户50仅能解密自己订阅的信息包，却无法获得另一个信息类别的信息包。本实施例中举例的样本点数量较少，实施时应增加样本点的数量。为进一步提高每个加密栏能够容纳的信息类别的种类，订阅单元40为每个加密栏关联多个整数n和整数s的组合，多个分别对应多个信息类别，根据用户50订阅的信息类别和订阅时长，为用户50提供对应的。本实施例能够与实施例一同时实施。借助加密栏关联多个整数n和整数s的组合，每个组合对应一种信息类别的信息包，能够使同一个加密栏同时为多个用户50群体提供加密服务，且不同用户50群体之间，不会产生干扰和影响。提高了智能合约能够提供限时加密服务的用户50数量。以上所述的实施例只是本发明的一种较佳的方案，并非对本发明作任何形式上的限制，在不超出权利要求所记载的技术方案的前提下还有其它的变体及改型。
