标题title
一种智能设备的自动搜索方法及装置
摘要abst
本发明提供了一种智能设备的自动搜索方法及装置，包括：接收主机号探测请求；判断主机号探测请求中第一IP的类型是否为主机号探测类型；若是获取连接成功的第二智能设备的第二IP；确定第二IP中拨号连接时间距离当前时间最近的主机号为目标主机号，确定已拨号连接成功的主机号中与目标主机号的主机号最小差值；确定主机号最小差值对应的主机号与目标主机号的主机号数量是否与同本地交换机连接的智能设备数量相同；若相同，将主机号最小差值对应的主机号和目标主机号中较小一者的后一位主机号为起始主机号；根据起始主机号和网络号重新确定各智能设备的目标IP；发送用于响应主机号探测请求的包括目标IP的响应协议消息到本地交换机。
权利要求书clms
1.一种智能设备的自动搜索方法，其特征在于，应用于路由器，所述方法包括：接收本地交换机发送的主机号探测请求，所述主机号探测请求是所述本地交换机根据用户在第一智能设备上手动输入的第一互联网协议地址IP生成的，所述第一智能设备与所述路由器通过所述本地交换机间接通信；判断所述第一互联网协议地址IP的类型是否为主机号探测类型；在所述第一互联网协议地址IP的类型为所述主机号探测类型的情况下，获取所述本地交换机中已拨号连接成功的第二智能设备的第二互联网协议地址IP；确定所述第二互联网协议地址IP中拨号连接时间距离当前时间最近的主机号为目标主机号，并确定所述路由器中已拨号连接成功的主机号中与所述目标主机号之间的主机号最小差值；确定所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量是否与同所述本地交换机连接的智能设备的数量相同，其中，所述同所述本地交换机连接的智能设备包括所述第一智能设备和所述第二智能设备；在所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量相同的情况下，将所述主机号最小差值对应的主机号和所述目标主机号中较小一者的后一位主机号为起始主机号；至少根据所述起始主机号以及所述路由器的网络号，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址IP；发送用于响应所述主机号探测请求的响应协议消息到所述本地交换机，使得所述本地交换机在接收到所述路由器发送的所述响应协议消息后，将包括所述目标互联网协议地址的所述响应协议消息发送至各所述智能设备，以使所述智能设备根据接收到的所述响应协议消息中的目标互联网协议地址拨号连接。2.如权利要求1所述的方法，其特征在于，所述至少根据所述起始主机号以及所述路由器的网络号，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址，包括：根据所述起始主机号、所述路由器的网络号以及所述第二智能设备与所述本地交换机的拨号连接时间，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址。3.如权利要求2所述的方法，其特征在于，所述根据所述起始主机号、所述路由器的网络号以及所述第二智能设备与所述本地交换机的拨号连接时间，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址，包括：根据所述起始主机号以及所述路由器的网络号，生成所述第二智能设备中与所述本地交换机的拨号连接时间距离当前时间最远的智能设备的目标互联网协议地址；循环执行：将所述起始主机号的后一位主机号作为新的起始主机号，将所述第二智能设备中未重新确定互联网协议地址，且与所述本地交换机的拨号连接时间距离当前时间最远的智能设备作为目标智能设备；并，根据所述新的起始主机号以及所述路由器的网络号，生成所述目标智能设备的目标互联网协议地址，直到确定出所述第二智能设备中与所述本地交换机的拨号连接时间距离当前时间最近的智能设备的目标互联网协议地址；根据所述距离当前时间最近的智能设备的目标互联网协议地址的主机号的后一位主机号以及所述路由器的网络号，生成所述第一智能设备的目标互联网协议地址。4.如权利要求1-3中任一项所述的方法，其特征在于，所述方法还包括：在所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量不相同的情况下，确定所述路由器中已拨号连接成功的主机号中与所述目标主机号之间的主机号次小差值；确定所述主机号次小差值对应的主机号与所述目标主机号之间的主机号的数量是否与同所述本地交换机连接的智能设备的数量相同；在所述主机号次小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量相同的情况下，将所述主机号次小差值对应的主机号和所述目标主机号中较小一者的后一位主机号为起始主机号。5.一种智能设备的自动搜索装置，其特征在于，应用于路由器，所述装置包括：接收模块，用于接收本地交换机发送的主机号探测请求，所述主机号探测请求是所述本地交换机根据用户在第一智能设备上手动输入的第一互联网协议地址IP生成的，所述第一智能设备与所述路由器通过所述本地交换机间接通信；判断模块，用于判断所述第一互联网协议地址IP的类型是否为主机号探测类型；获取模块，用于在所述第一互联网协议地址IP的类型为所述主机号探测类型的情况下，获取所述本地交换机中已拨号连接成功的第二智能设备的第二互联网协议地址IP；第一确定模块，用于确定所述第二互联网协议地址IP中拨号连接时间距离当前时间最近的主机号为目标主机号，并确定所述路由器中已拨号连接成功的主机号中与所述目标主机号之间的主机号最小差值；第二确定模块，用于确定所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量是否与同所述本地交换机连接的智能设备的数量相同，其中，所述同所述本地交换机连接的智能设备包括所述第一智能设备和所述第二智能设备；第三确定模块，用于在所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量相同的情况下，将所述主机号最小差值对应的主机号和所述目标主机号中较小一者的后一位主机号为起始主机号；第四确定模块，用于至少根据所述起始主机号以及所述路由器的网络号，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址IP；发送模块，用于发送用于响应所述主机号探测请求的响应协议消息到所述本地交换机，使得所述本地交换机在接收到所述路由器发送的所述响应协议消息后，将包括所述目标互联网协议地址的所述响应协议消息发送至各所述智能设备，以使所述智能设备根据接收到的所述响应协议消息中的目标互联网协议地址拨号连接。6.如权利要求5所述的装置，其特征在于，所述第四确定模块，用于：根据所述起始主机号、所述路由器的网络号以及所述第二智能设备与所述本地交换机的拨号连接时间，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址。7.如权利要求6所述的装置，其特征在于，所述第四确定模块，用于：根据所述起始主机号以及所述路由器的网络号，生成所述第二智能设备中与所述本地交换机的拨号连接时间距离当前时间最远的智能设备的目标互联网协议地址；循环执行：将所述起始主机号的后一位主机号作为新的起始主机号，将所述第二智能设备中未重新确定互联网协议地址，且与所述本地交换机的拨号连接时间距离当前时间最远的智能设备作为目标智能设备；并，根据所述新的起始主机号以及所述路由器的网络号，生成所述目标智能设备的目标互联网协议地址，直到确定出所述第二智能设备中与所述本地交换机的拨号连接时间距离当前时间最近的智能设备的目标互联网协议地址；根据所述距离当前时间最近的智能设备的目标互联网协议地址的主机号的后一位主机号以及所述路由器的网络号，生成所述第一智能设备的目标互联网协议地址。8.如权利要求5-7中任一项所述的装置，其特征在于，所述装置还包括：第五确定模块，用于在所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量不相同的情况下，确定所述路由器中已拨号连接成功的主机号中与所述目标主机号之间的主机号次小差值；第六确定模块，用于确定所述主机号次小差值对应的主机号与所述目标主机号之间的主机号的数量是否与同所述本地交换机连接的智能设备的数量相同；第七确定模块，用于在所述主机号次小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量相同的情况下，将所述主机号次小差值对应的主机号和所述目标主机号中较小一者的后一位主机号为起始主机号。
说明书desc
技术领域本发明涉及通信技术领域，特别涉及为一种智能设备的自动搜索方法及装置。背景技术智能设备能够通过路由器等局域网设备提供的网络服务连接到网上的所有计算机网络实现相互通信，是通过路由器分配的IP。在智能设备请求接入路由器时，智能设备能够通过自动获取的方式从路由器获得一个可用IP。但是，由于网络或者设备兼容性等问题时，智能设备常出现自动获取IP失败，导致无法上网。相关场景中，当智能设备自动获取IP失败时，通常通过手动配置IP的方式，使得智能设备能够分配到一个IP，并通过地址保留的方式，保持该智能设备通过该IP与计算机网络通信。然而，在多个智能设备出现IP自动获取失败的情况下，尤其是在局域网中，需要人为查看已占用IP和可用IP，然后从可用IP中手动对每一个智能设备手动配置IP。导致便捷性和灵活性较低。针对相关技术中智能设备自动获取IP失败时，手动配置IP，导致便捷性和灵活性较低的问题，目前尚未提出有效的解决方案。发明内容本发明旨在解决智能设备自动获取IP失败时，手动配置IP，导致便捷性和灵活性较低的技术问题，提供一种智能设备的自动搜索方法及装置。本发明为解决技术问题采用如下技术手段：第一方面，提供一种智能设备的自动搜索方法，应用于路由器，所述方法包括：接收本地交换机发送的主机号探测请求，所述主机号探测请求是所述本地交换机根据用户在第一智能设备上手动输入的第一互联网协议地址IP生成的，所述第一智能设备与所述路由器通过所述本地交换机间接通信；判断所述第一互联网协议地址IP的类型是否为主机号探测类型；在所述第一互联网协议地址IP的类型为所述主机号探测类型的情况下，获取所述本地交换机中已拨号连接成功的第二智能设备的第二互联网协议地址IP；确定所述第二互联网协议地址IP中拨号连接时间距离当前时间最近的主机号为目标主机号，并确定所述路由器中已拨号连接成功的主机号中与所述目标主机号之间的主机号最小差值；确定所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量是否与同所述本地交换机连接的智能设备的数量相同，其中，所述同所述本地交换机连接的智能设备包括所述第一智能设备和所述第二智能设备；在所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量相同的情况下，将所述主机号最小差值对应的主机号和所述目标主机号中较小一者的后一位主机号为起始主机号；至少根据所述起始主机号以及所述路由器的网络号，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址IP；发送用于响应所述主机号探测请求的响应协议消息到所述本地交换机，使得所述本地交换机在接收到所述路由器发送的所述响应协议消息后，将包括所述目标互联网协议地址的所述响应协议消息发送至各所述智能设备，以使所述智能设备根据接收到的所述响应协议消息中的目标互联网协议地址拨号连接。可选地，所述至少根据所述起始主机号以及所述路由器的网络号，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址，包括：根据所述起始主机号、所述路由器的网络号以及所述第二智能设备与所述本地交换机的拨号连接时间，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址。可选地，所述根据所述起始主机号、所述路由器的网络号以及所述第二智能设备与所述本地交换机的拨号连接时间，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址，包括：根据所述起始主机号以及所述路由器的网络号，生成所述第二智能设备中与所述本地交换机的拨号连接时间距离当前时间最远的智能设备的目标互联网协议地址；循环执行：将所述起始主机号的后一位主机号作为新的起始主机号，将所述第二智能设备中未重新确定互联网协议地址，且与所述本地交换机的拨号连接时间距离当前时间最远的智能设备作为目标智能设备；并，根据所述新的起始主机号以及所述路由器的网络号，生成所述目标智能设备的目标互联网协议地址，直到确定出所述第二智能设备中与所述本地交换机的拨号连接时间距离当前时间最近的智能设备的目标互联网协议地址；根据所述距离当前时间最近的智能设备的目标互联网协议地址的主机号的后一位主机号以及所述路由器的网络号，生成所述第一智能设备的目标互联网协议地址。可选地，所述方法还包括：在所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量不相同的情况下，确定所述路由器中已拨号连接成功的主机号中与所述目标主机号之间的主机号次小差值；确定所述主机号次小差值对应的主机号与所述目标主机号之间的主机号的数量是否与同所述本地交换机连接的智能设备的数量相同；在所述主机号次小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量相同的情况下，将所述主机号次小差值对应的主机号和所述目标主机号中较小一者的后一位主机号为起始主机号。第二方面，提供一种智能设备的自动搜索装置，应用于路由器，所述装置包括：接收模块，用于接收本地交换机发送的主机号探测请求，所述主机号探测请求是所述本地交换机根据用户在第一智能设备上手动输入的第一互联网协议地址IP生成的，所述第一智能设备与所述路由器通过所述本地交换机间接通信；判断模块，用于判断所述第一互联网协议地址IP的类型是否为主机号探测类型；获取模块，用于在所述第一互联网协议地址IP的类型为所述主机号探测类型的情况下，获取所述本地交换机中已拨号连接成功的第二智能设备的第二互联网协议地址IP；第一确定模块，用于确定所述第二互联网协议地址IP中拨号连接时间距离当前时间最近的主机号为目标主机号，并确定所述路由器中已拨号连接成功的主机号中与所述目标主机号之间的主机号最小差值；第二确定模块，用于确定所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量是否与同所述本地交换机连接的智能设备的数量相同，其中，所述同所述本地交换机连接的智能设备包括所述第一智能设备和所述第二智能设备；第三确定模块，用于在所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量相同的情况下，将所述主机号最小差值对应的主机号和所述目标主机号中较小一者的后一位主机号为起始主机号；第四确定模块，用于至少根据所述起始主机号以及所述路由器的网络号，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址IP；发送模块，用于发送用于响应所述主机号探测请求的响应协议消息到所述本地交换机，使得所述本地交换机在接收到所述路由器发送的所述响应协议消息后，将包括所述目标互联网协议地址的所述响应协议消息发送至各所述智能设备，以使所述智能设备根据接收到的所述响应协议消息中的目标互联网协议地址拨号连接。可选地，所述第四确定模块，用于：根据所述起始主机号、所述路由器的网络号以及所述第二智能设备与所述本地交换机的拨号连接时间，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址。可选地，所述第四确定模块，用于：根据所述起始主机号以及所述路由器的网络号，生成所述第二智能设备中与所述本地交换机的拨号连接时间距离当前时间最远的智能设备的目标互联网协议地址；循环执行：将所述起始主机号的后一位主机号作为新的起始主机号，将所述第二智能设备中未重新确定互联网协议地址，且与所述本地交换机的拨号连接时间距离当前时间最远的智能设备作为目标智能设备；并，根据所述新的起始主机号以及所述路由器的网络号，生成所述目标智能设备的目标互联网协议地址，直到确定出所述第二智能设备中与所述本地交换机的拨号连接时间距离当前时间最近的智能设备的目标互联网协议地址；根据所述距离当前时间最近的智能设备的目标互联网协议地址的主机号的后一位主机号以及所述路由器的网络号，生成所述第一智能设备的目标互联网协议地址。可选地，所述装置还包括：第五确定模块，用于在所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量不相同的情况下，确定所述路由器中已拨号连接成功的主机号中与所述目标主机号之间的主机号次小差值；第六确定模块，用于确定所述主机号次小差值对应的主机号与所述目标主机号之间的主机号的数量是否与同所述本地交换机连接的智能设备的数量相同；第七确定模块，用于在所述主机号次小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量相同的情况下，将所述主机号次小差值对应的主机号和所述目标主机号中较小一者的后一位主机号为起始主机号。有益效果：通过接收主机号探测请求；判断主机号探测请求中第一IP的类型是否为主机号探测类型；若是获取连接成功的第二智能设备的第二IP；确定第二IP中拨号连接时间距离当前时间最近的主机号为目标主机号，确定已拨号连接成功的主机号中与目标主机号的主机号最小差值；确定主机号最小差值对应的主机号与目标主机号的主机号数量是否与同本地交换机连接的智能设备数量相同；若相同，将主机号最小差值对应的主机号和目标主机号中较小一者的后一位主机号为起始主机号；根据起始主机号和网络号重新确定各智能设备的目标IP；发送用于响应主机号探测请求的包括目标IP的响应协议消息到本地交换机。可以便捷地从路由器中未使用的主机号中，确定针对同本地交换机连接的智能设备的目标IP，提高了自动获取IP失败情况下，手动配置智能设备IP的灵活性和便捷性。图1为本发明智能设备的自动搜索方法一个实施例的流程图；图2为本发明智能设备的自动搜索装置一个实施例的框图。本发明为目的实现、功能特点及优点将结合实施例，参照附图做进一步说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。下面将结合本发明的实施例中的附图，对本发明的实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明的一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。参考附图1，为本发明一实施例中的智能设备的自动搜索方法的流程图，如图1所示，所述方法包括：在步骤S11中，接收本地交换机发送的主机号探测请求，所述主机号探测请求是所述本地交换机根据用户在第一智能设备上手动输入的第一互联网协议地址IP生成的，所述第一智能设备与所述路由器通过所述本地交换机间接通信；在步骤S12中，判断所述第一互联网协议地址IP的类型是否为主机号探测类型；在步骤S13中，在所述第一互联网协议地址IP的类型为所述主机号探测类型的情况下，获取所述本地交换机中已拨号连接成功的第二智能设备的第二互联网协议地址IP；在步骤S14中，确定所述第二互联网协议地址IP中拨号连接时间距离当前时间最近的主机号为目标主机号，并确定所述路由器中已拨号连接成功的主机号中与所述目标主机号之间的主机号最小差值；在步骤S15中，确定所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量是否与同所述本地交换机连接的智能设备的数量相同，其中，所述同所述本地交换机连接的智能设备包括所述第一智能设备和所述第二智能设备；在步骤S16中，在所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量相同的情况下，将所述主机号最小差值对应的主机号和所述目标主机号中较小一者的后一位主机号为起始主机号；在步骤S17中，至少根据所述起始主机号以及所述路由器的网络号，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址IP；在步骤S18中，发送用于响应所述主机号探测请求的响应协议消息到所述本地交换机，使得所述本地交换机在接收到所述路由器发送的所述响应协议消息后，将包括所述目标互联网协议地址的所述响应协议消息发送至各所述智能设备，以使所述智能设备根据接收到的所述响应协议消息中的目标互联网协议地址拨号连接。通过接收主机号探测请求；判断主机号探测请求中第一IP的类型是否为主机号探测类型；若是获取连接成功的第二智能设备的第二IP；确定第二IP中拨号连接时间距离当前时间最近的主机号为目标主机号，确定已拨号连接成功的主机号中与目标主机号的主机号最小差值；确定主机号最小差值对应的主机号与目标主机号的主机号数量是否与同本地交换机连接的智能设备数量相同；若相同，将主机号最小差值对应的主机号和目标主机号中较小一者的后一位主机号为起始主机号；根据起始主机号和网络号重新确定各智能设备的目标IP；发送用于响应主机号探测请求的包括目标IP的响应协议消息到本地交换机。可以便捷地从路由器中未使用的主机号中，确定针对同本地交换机连接的智能设备的目标IP，提高了自动获取IP失败情况下，手动配置智能设备IP的灵活性和便捷性。可选地，在步骤S17中，所述至少根据所述起始主机号以及所述路由器的网络号，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址，包括：根据所述起始主机号、所述路由器的网络号以及所述第二智能设备与所述本地交换机的拨号连接时间，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址。可选地，所述根据所述起始主机号、所述路由器的网络号以及所述第二智能设备与所述本地交换机的拨号连接时间，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址，包括：根据所述起始主机号以及所述路由器的网络号，生成所述第二智能设备中与所述本地交换机的拨号连接时间距离当前时间最远的智能设备的目标互联网协议地址；循环执行：将所述起始主机号的后一位主机号作为新的起始主机号，将所述第二智能设备中未重新确定互联网协议地址，且与所述本地交换机的拨号连接时间距离当前时间最远的智能设备作为目标智能设备；并，根据所述新的起始主机号以及所述路由器的网络号，生成所述目标智能设备的目标互联网协议地址，直到确定出所述第二智能设备中与所述本地交换机的拨号连接时间距离当前时间最近的智能设备的目标互联网协议地址；根据所述距离当前时间最近的智能设备的目标互联网协议地址的主机号的后一位主机号以及所述路由器的网络号，生成所述第一智能设备的目标互联网协议地址。可选地，所述方法还包括：在所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量不相同的情况下，确定所述路由器中已拨号连接成功的主机号中与所述目标主机号之间的主机号次小差值；确定所述主机号次小差值对应的主机号与所述目标主机号之间的主机号的数量是否与同所述本地交换机连接的智能设备的数量相同；在所述主机号次小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量相同的情况下，将所述主机号次小差值对应的主机号和所述目标主机号中较小一者的后一位主机号为起始主机号。基于相同的发明构思，本发明实施例还提供一种智能设备的自动搜索装置，应用于路由器，参见图2所示，所述装置包括：接收模块110，用于接收本地交换机发送的主机号探测请求，所述主机号探测请求是所述本地交换机根据用户在第一智能设备上手动输入的第一互联网协议地址IP生成的，所述第一智能设备与所述路由器通过所述本地交换机间接通信；判断模块120，用于判断所述第一互联网协议地址IP的类型是否为主机号探测类型；获取模块130，用于在所述第一互联网协议地址IP的类型为所述主机号探测类型的情况下，获取所述本地交换机中已拨号连接成功的第二智能设备的第二互联网协议地址IP；第一确定模块140，用于确定所述第二互联网协议地址IP中拨号连接时间距离当前时间最近的主机号为目标主机号，并确定所述路由器中已拨号连接成功的主机号中与所述目标主机号之间的主机号最小差值；第二确定模块150，用于确定所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量是否与同所述本地交换机连接的智能设备的数量相同，其中，所述同所述本地交换机连接的智能设备包括所述第一智能设备和所述第二智能设备；第三确定模块160，用于在所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量相同的情况下，将所述主机号最小差值对应的主机号和所述目标主机号中较小一者的后一位主机号为起始主机号；第四确定模块170，用于至少根据所述起始主机号以及所述路由器的网络号，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址IP；发送模块180，用于发送用于响应所述主机号探测请求的响应协议消息到所述本地交换机，使得所述本地交换机在接收到所述路由器发送的所述响应协议消息后，将包括所述目标互联网协议地址的所述响应协议消息发送至各所述智能设备，以使所述智能设备根据接收到的所述响应协议消息中的目标互联网协议地址拨号连接。可选地，所述第四确定模块170，用于：根据所述起始主机号、所述路由器的网络号以及所述第二智能设备与所述本地交换机的拨号连接时间，重新确定所述同所述本地交换机连接的各所述智能设备的目标互联网协议地址。可选地，所述第四确定模块170，用于：根据所述起始主机号以及所述路由器的网络号，生成所述第二智能设备中与所述本地交换机的拨号连接时间距离当前时间最远的智能设备的目标互联网协议地址；循环执行：将所述起始主机号的后一位主机号作为新的起始主机号，将所述第二智能设备中未重新确定互联网协议地址，且与所述本地交换机的拨号连接时间距离当前时间最远的智能设备作为目标智能设备；并，根据所述新的起始主机号以及所述路由器的网络号，生成所述目标智能设备的目标互联网协议地址，直到确定出所述第二智能设备中与所述本地交换机的拨号连接时间距离当前时间最近的智能设备的目标互联网协议地址；根据所述距离当前时间最近的智能设备的目标互联网协议地址的主机号的后一位主机号以及所述路由器的网络号，生成所述第一智能设备的目标互联网协议地址。可选地，所述装置还包括：第五确定模块，用于在所述主机号最小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量不相同的情况下，确定所述路由器中已拨号连接成功的主机号中与所述目标主机号之间的主机号次小差值；第六确定模块，用于确定所述主机号次小差值对应的主机号与所述目标主机号之间的主机号的数量是否与同所述本地交换机连接的智能设备的数量相同；第七确定模块，用于在所述主机号次小差值对应的主机号与所述目标主机号之间的主机号的数量与同所述本地交换机连接的智能设备的数量相同的情况下，将所述主机号次小差值对应的主机号和所述目标主机号中较小一者的后一位主机号为起始主机号。尽管已经示出和描述了本发明的实施例，对于本领域的普通技术人员而言，可以理解在不脱离本发明的原理和精神的情况下可以对这些实施例进行多种变化、修改、替换和变型，本发明的范围由所附权利要求及其等同物限定。
