标题title
移动终端的通讯方法、装置、核心网设备及系统
摘要abst
本发明实施例涉及通信技术领域，特别涉及一种移动终端的通讯方法、装置、核心网设备及系统。其中，方法包括：确定第一移动终端在通讯时的第一网络信号质量和第二移动终端在通讯时的第二网络信号质量；其中，第一移动终端和第二移动终端进行相互通讯；在第一网络信号质量和第二网络信号质量不同时，对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流；其中，第一语音数据流是由第一移动终端和第二移动终端中的发送端发出的，第一语音数据流和第二语音数据流均包括多个语音数据包；将第二语音数据流发送给第一移动终端和第二移动终端中的接收端。本方案，可以保证所有的移动终端的通话质量。
权利要求书clms
1.一种移动终端的通讯方法，其特征在于，应用于核心网设备，包括：确定第一移动终端在通讯时的第一网络信号质量和第二移动终端在通讯时的第二网络信号质量；其中，所述第一移动终端和所述第二移动终端进行相互通讯；在所述第一网络信号质量和所述第二网络信号质量不同时，对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流；其中，所述第一语音数据流是由所述第一移动终端和所述第二移动终端中的发送端发出的，所述第一语音数据流和所述第二语音数据流均包括多个语音数据包；将所述第二语音数据流发送给所述第一移动终端和所述第二移动终端中的接收端。2.根据权利要求1所述的方法，其特征在于，所述确定第一移动终端在通讯时的第一网络信号质量和第二移动终端在通讯时的第二网络信号质量，包括：基于获取到的由不同移动终端发送的心跳包，确定各移动终端的网络信号质量；接收第一移动终端向第二移动终端发起的呼叫请求；其中，所述呼叫请求中携带有所述第一移动终端的第一标识和所述第二移动终端的第二标识；基于各移动终端的网络信号质量和所述第一标识，确定所述第一移动终端在通讯时的第一网络信号质量；基于所述第二标识，确定所述第二移动终端在通讯时的第二网络信号质量。3.根据权利要求2所述的方法，其特征在于，所述基于所述第二标识，确定所述第二移动终端在通讯时的第二网络信号质量，包括：基于各移动终端的网络信号质量和所述第二标识，确定所述第二移动终端在通讯时的第二网络信号质量。4.根据权利要求2所述的方法，其特征在于，所述基于所述第二标识，确定所述第二移动终端在通讯时的第二网络信号质量，包括：向所述第二移动终端发送测试包；响应于接收到由所述第二移动终端发来的所述测试包，确定所述测试包的发送时刻和接收时刻的时差；基于所述时差，确定所述第二移动终端在通讯时的第二网络信号质量。5.根据权利要求1-4中任一项所述的方法，其特征在于，所述编码格式包括带宽和相邻两个所述语音数据包之间的时间间隔。6.根据权利要求5所述的方法，其特征在于，在所述第一网络信号质量高于所述第二网络信号质量时，所述对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流，包括：针对接收到的每一条完整的第一语音数据流，减小所述第一语音数据流的带宽和增大所述第一语音数据流的相邻两个所述语音数据包之间的时间间隔，得到与所述第一语音数据流对应的第二语音数据流。7.根据权利要求5所述的方法，其特征在于，在所述第一网络信号质量低于所述第二网络信号质量时，所述对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流，包括：针对接收到的每一条完整的第一语音数据流，增大所述第一语音数据流的带宽和减小所述第一语音数据流的相邻两个所述语音数据包之间的时间间隔，得到与所述第一语音数据流对应的第二语音数据流。8.一种移动终端的通讯装置，其特征在于，应用于核心网设备，包括：确定模块，用于确定第一移动终端在通讯时的第一网络信号质量和第二移动终端在通讯时的第二网络信号质量；其中，所述第一移动终端和所述第二移动终端进行相互通讯；处理模块，用于在所述第一网络信号质量和所述第二网络信号质量不同时，对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流；其中，所述第一语音数据流是由所述第一移动终端和所述第二移动终端中的发送端发出的，所述第一语音数据流和所述第二语音数据流均包括多个语音数据包；发送模块，用于将所述第二语音数据流发送给所述第一移动终端和所述第二移动终端中的接收端。9.一种核心网设备，包括存储器和处理器，所述存储器中存储有计算机程序，所述处理器执行所述计算机程序时，实现如权利要求1-7中任一项所述的方法。10.一种移动终端的通讯系统，其特征在于，包括第一移动终端、第二移动终端和如权利要求9所述的核心网设备，所述第一移动终端和所述第二移动终端分别与所述核心网设备进行通讯。
说明书desc
技术领域本发明实施例涉及通信技术领域，特别涉及一种移动终端的通讯方法、装置、核心网设备及系统。背景技术在移动终端之间进行通讯时，移动终端之间的通话质量受限于每个移动终端所处区域的网络信号质量。相关技术中，移动终端通常设置一种通讯模式，即发送/接收高质量编码格式的语音数据包，或者发送/接收低质量编码格式的语音数据包。然而，上述相关技术难以保证所有的移动终端的通话质量。发明内容为了解决相关技术难以保证所有的移动终端的通话质量的问题，本发明实施例提供了一种移动终端的通讯方法、装置、核心网设备及系统。第一方面，本发明实施例提供了一种移动终端的通讯方法，应用于核心网设备，包括：确定第一移动终端在通讯时的第一网络信号质量和第二移动终端在通讯时的第二网络信号质量；其中，所述第一移动终端和所述第二移动终端进行相互通讯；在所述第一网络信号质量和所述第二网络信号质量不同时，对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流；其中，所述第一语音数据流是由所述第一移动终端和所述第二移动终端中的发送端发出的，所述第一语音数据流和所述第二语音数据流均包括多个语音数据包；将所述第二语音数据流发送给所述第一移动终端和所述第二移动终端中的接收端。在一种可能的设计中，所述确定第一移动终端在通讯时的第一网络信号质量和第二移动终端在通讯时的第二网络信号质量，包括：基于获取到的由不同移动终端发送的心跳包，确定各移动终端的网络信号质量；接收第一移动终端向第二移动终端发起的呼叫请求；其中，所述呼叫请求中携带有所述第一移动终端的第一标识和所述第二移动终端的第二标识；基于各移动终端的网络信号质量和所述第一标识，确定所述第一移动终端在通讯时的第一网络信号质量；基于所述第二标识，确定所述第二移动终端在通讯时的第二网络信号质量。在一种可能的设计中，所述基于所述第二标识，确定所述第二移动终端在通讯时的第二网络信号质量，包括：基于各移动终端的网络信号质量和所述第二标识，确定所述第二移动终端在通讯时的第二网络信号质量。在一种可能的设计中，所述基于所述第二标识，确定所述第二移动终端在通讯时的第二网络信号质量，包括：向所述第二移动终端发送测试包；响应于接收到由所述第二移动终端发来的所述测试包，确定所述测试包的发送时刻和接收时刻的时差；基于所述时差，确定所述第二移动终端在通讯时的第二网络信号质量。在一种可能的设计中，所述编码格式包括带宽和相邻两个所述语音数据包之间的时间间隔。在一种可能的设计中，在所述第一网络信号质量高于所述第二网络信号质量时，所述对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流，包括：针对接收到的每一条完整的第一语音数据流，减小所述第一语音数据流的带宽和增大所述第一语音数据流的相邻两个所述语音数据包之间的时间间隔，得到与所述第一语音数据流对应的第二语音数据流。在一种可能的设计中，在所述第一网络信号质量低于所述第二网络信号质量时，所述对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流，包括：针对接收到的每一条完整的第一语音数据流，增大所述第一语音数据流的带宽和减小所述第一语音数据流的相邻两个所述语音数据包之间的时间间隔，得到与所述第一语音数据流对应的第二语音数据流。第二方面，本发明实施例还提供了一种移动终端的通讯装置，应用于核心网设备，包括：确定模块，用于确定第一移动终端在通讯时的第一网络信号质量和第二移动终端在通讯时的第二网络信号质量；其中，所述第一移动终端和所述第二移动终端进行相互通讯；处理模块，用于在所述第一网络信号质量和所述第二网络信号质量不同时，对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流；其中，所述第一语音数据流是由所述第一移动终端和所述第二移动终端中的发送端发出的，所述第一语音数据流和所述第二语音数据流均包括多个语音数据包；发送模块，用于将所述第二语音数据流发送给所述第一移动终端和所述第二移动终端中的接收端。第三方面，本发明实施例还提供了一种核心网设备，包括存储器和处理器，所述存储器中存储有计算机程序，所述处理器执行所述计算机程序时，实现本说明书任一实施例所述的方法。第四方面，本发明实施例还提供了一种移动终端的通讯系统，包括第一移动终端、第二移动终端和如第三方面所述的核心网设备，所述第一移动终端和所述第二移动终端分别与所述核心网设备进行通讯。本发明实施例提供了一种移动终端的通讯方法、装置、核心网设备及系统，首先确定正在通讯的第一移动终端的第一网络信号质量和第二移动终端的第二网络信号质量，当第一网络信号质量和第二网络信号质量不同时，对接收到的第一移动终端和第二移动终端中的发送端发出的第一语音数据流的编码格式进行处理，来得到适应第一移动终端和第二移动终端中的接收端的网络信号质量的第二语音数据流，如此来保证所有的移动终端的通话质量。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明一实施例提供的一种移动终端的通讯方法流程图；图2是本发明一实施例提供的一种三端交互图；图3是本发明一实施例提供的另一种三端交互图；图4是本发明一实施例提供的另一种移动终端的通讯方法流程图；图5是本发明一实施例提供的又一种移动终端的通讯方法流程图；图6是本发明一实施例提供的一种核心网设备的硬件架构图；图7是本发明一实施例提供的一种移动终端的通讯装置结构图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例，基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都属于本发明保护的范围。如前所述，在相关技术中，移动终端通常设置一种通讯模式，即发送/接收高质量编码格式的语音数据包，或者发送/接收低质量编码格式的语音数据包。由于每个移动终端所处区域的网络信号质量各有不同且具有随机性，如果不同移动终端在通讯时的网络信号质量是不同的，这就难以保证所有的移动终端的通话质量。为了解决上述技术问题，发明人可以考虑设置核心网设备，使核心网设备根据第一移动终端和第二移动终端各自的网络信号质量，来调整第一移动终端和第二移动终端中的发送端发出的第一语音数据流的编码格式，并将调整第一语音数据流后得到的第二语音数据流发送给第一移动终端和第二移动终端中的接收端，以此来保证所有的移动终端的通话质量。下面描述以上构思的具体实现方式。请参考图1，本发明实施例提供了一种移动终端的通讯方法，应用于核心网设备，该方法包括：步骤100：确定第一移动终端在通讯时的第一网络信号质量和第二移动终端在通讯时的第二网络信号质量；其中，第一移动终端和第二移动终端进行相互通讯；步骤102：在第一网络信号质量和第二网络信号质量不同时，对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流；其中，第一语音数据流是由第一移动终端和第二移动终端中的发送端发出的，第一语音数据流和第二语音数据流均包括多个语音数据包；步骤104：将第二语音数据流发送给第一移动终端和第二移动终端中的接收端。本发明实施例中，首先确定正在通讯的第一移动终端的第一网络信号质量和第二移动终端的第二网络信号质量，当第一网络信号质量和第二网络信号质量不同时，对接收到的第一移动终端和第二移动终端中的发送端发出的第一语音数据流的编码格式进行处理，得到适应第一移动终端和第二移动终端中的接收端的网络信号质量的第二语音数据流，如此来保证所有的移动终端的通话质量。下面描述图1所示的各个步骤的执行方式。针对步骤100：需要说明的是，本步骤中第一移动终端在通讯时的第一网络信号质量和第二移动终端在通讯时的第二网络信号质量均是在二者进行通讯前上报给核心网设备的。例如，第一移动终端和第二移动终端在未通讯时的网络信号质量可以事先以一定时间周期发送心跳包的方式上报给核心网设备；再例如，第一移动终端在未通讯时的第一网络信号质量可以事先以一定时间周期发送心跳包的方式上报给核心网设备，而第二移动终端的第二网络信号质量可以等到核心网设备接收到由第一移动终端发起的呼叫请求时，由核心网设备向第二移动终端发送用于测试第二网络信号质量的测试包，以根据核心网设备发送该测试包和接收到该测试包的时差来确定的。在一些实施方式中，步骤100可以包括：基于获取到的由不同移动终端发送的心跳包，确定各移动终端的网络信号质量；接收第一移动终端向第二移动终端发起的呼叫请求；其中，呼叫请求中携带有第一移动终端的第一标识和第二移动终端的第二标识；基于各移动终端的网络信号质量和第一标识，确定第一移动终端在通讯时的第一网络信号质量；基于第二标识，确定第二移动终端在通讯时的第二网络信号质量。在本实施例中，不同移动终端以一定的时间周期向核心网设备发送心跳包，来实时更新各移动终端的网络信号质量，当核心网设备接收到第一移动终端向第二移动终端发起的呼叫请求时，核心网设备根据呼叫请求中的第一标识，从各移动终端的网络信号质量中确定出第一移动终端最近一次更新的网络信号质量，并将其确定为第一移动终端在通讯时的第一网络信号质量。在确定第一网络信号质量之后，再基于呼叫请求中的第二标识，确定出第二移动终端在通讯时的第二网络信号质量。在步骤100中，本发明实施例提供了两种确定第二网络信号质量的方式，下面对这两种方式进行描述。方式一：在方式一中，步骤“基于第二标识，确定第二移动终端在通讯时的第二网络信号质量”可以包括：基于各移动终端的网络信号质量和第二标识，确定第二移动终端在通讯时的第二网络信号质量。在本实施例中，核心网设备根据呼叫请求中的第二标识，从各移动终端的网络信号质量中确定出第二移动终端最近一次更新的网络信号质量，并将其确定为第二移动终端在通讯时的第二网络信号质量。方式二：在方式二中，步骤“基于第二标识，确定第二移动终端在通讯时的第二网络信号质量”可以包括：向第二移动终端发送测试包；响应于接收到由第二移动终端发来的测试包，确定测试包的发送时刻和接收时刻的时差；基于时差，确定第二移动终端在通讯时的第二网络信号质量。在本实施例中，核心网设备通过第二标识识别出第二移动终端之后，向第二移动终端发送测试包，然后在第二移动终端接收到测试包后，第二移动终端再将测试包返回给核心网设备，根据测试包在核心网设备的发送时刻和接收时刻的时差，来确定第二移动终端在通讯时的第二网络信号质量。针对步骤102：需要说明的是，在一些实施方式中，编码格式包括带宽和相邻两个语音数据包之间的时间间隔。在本实施例中，通过改变第一语音数据流的带宽和相邻两个语音数据包之间的时间间隔，来得到适应接收端的网络信号质量的第二语音数据流，进而保证所有的移动终端的通话质量。在步骤102中，本发明实施例提供了“在第一网络信号质量高于第二网络信号质量时”，和“在第一网络信号质量低于第二网络信号质量时”的两种情况，下面对这两种情况下得到第二语音数据流的方式进行描述。情况一：在情况一中，在第一网络信号质量高于第二网络信号质量时，步骤“对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流”可以包括：针对接收到的每一条完整的第一语音数据流，减小第一语音数据流的带宽和增大第一语音数据流的相邻两个语音数据包之间的时间间隔，得到与第一语音数据流对应的第二语音数据流。在本实施例中，可以通过以下公式来得到与第一语音数据流对应的第二语音数据流的带宽：其中，V2为第二语音数据流的带宽，单位为kbit/s；V1为第一语音数据流的带宽，单位为kbit/s；R1为第一网络信号质量中心跳包在第一移动终端和核心网设备的往返时间，单位为s；R2为第二网络信号质量中测试包或心跳包在第二移动终端和核心网设备的往返时间，单位为s；k1为第一网络信号质量中发送心跳包时的数据传输速率，单位为kbit/s；k2为第二网络信号质量中发送测试包或心跳包时的数据传输速率，单位为kbit/s。在本实施例中，可以通过以下公式来得到与第一语音数据流对应的第二语音数据流的相邻两个语音数据包之间的时间间隔：其中，T2为第二语音数据流的相邻两个语音数据包之间的时间间隔，单位为s；V1为第一语音数据流的相邻两个语音数据包之间的时间间隔，单位为s；R1为第一网络信号质量中心跳包在第一移动终端和核心网设备的往返时间，单位为s；R2为第二网络信号质量中测试包或心跳包在第二移动终端和核心网设备的往返时间，单位为s；k1为第一网络信号质量中发送心跳包时的数据传输速率，单位为kbit/s；k2为第二网络信号质量中发送测试包或心跳包时的数据传输速率，单位为kbit/s。举例来说，可以将高质量编码格式为带宽23.05kbit/s，相邻两个语音数据包之间的时间间隔为20ms的第一语音数据流，转换为低质量编码格式为带宽6.60kbit/s，相邻两个语音数据包之间的时间间隔为60ms的第二语音数据流。在本实施例中，在第一网络信号质量高于第二网络信号质量时，针对接收到的每一条完整的第一语音数据流，通过减小第一语音数据流的带宽和增大第一语音数据流的相邻两个语音数据包之间的时间间隔，来得到相较于第一语音数据流质量较低的第二语音数据流，以避免处于第二网络信号质量下的第二移动终端在通讯时出现丢字、语音断断续续的情况，以此来保证所有的移动终端的通话质量。需要说明的是，第一语音数据流是由第一移动终端和第二移动终端中的发送端发出的，可以理解，在第一网络信号质量高于第二网络信号质量时，若第一语音数据流是由处于第二网络信号质量的第二移动终端发出的，那么可以利用上述两个公式，来增加第一语音数据流的带宽和减小第一语音数据流的相邻两个语音数据包之间的时间间隔，以此得到相较于第一语音数据流质量较高的第二语音数据流，以避免处于第一网络信号质量下的第一移动终端在通讯时的音质效果牺牲较大的情况，以此来保证所有的移动终端的通话质量。情况二：在情况二中，在第一网络信号质量低于第二网络信号质量时，步骤“对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流”可以包括：针对接收到的每一条完整的第一语音数据流，增大第一语音数据流的带宽和减小第一语音数据流的相邻两个语音数据包之间的时间间隔，得到与第一语音数据流对应的第二语音数据流。在本实施例中，可以通过与情况一相同的公式来得到第二语音数据流的带宽和相邻两个语音数据包之间的时间间隔。举例来说，可以将低质量编码格式为带宽6.60kbit/s，相邻两个语音数据包之间的时间间隔为60ms的第一语音数据流，转换为高质量编码格式为带宽23.05kbit/s，相邻两个语音数据包之间的时间间隔为20ms的第二语音数据流。在本实施例中，在第一网络信号质量低于第二网络信号质量时，针对接收到的每一条完整的第一语音数据流，通过增大第一语音数据流的带宽和减小第一语音数据流的相邻两个语音数据包之间的时间间隔，来得到相较于第一语音数据流质量较高的第二语音数据流，以避免处于第二网络信号质量下的第二移动终端在通讯时的音质效果牺牲较大的情况，以此来保证所有的移动终端的通话质量。需要说明的是，第一语音数据流是由第一移动终端和第二移动终端中的发送端发出的，可以理解，在第一网络信号质量低于第二网络信号质量时，若第一语音数据流是由处于第二网络信号质量的第二移动终端发出的，那么可以利用上述两个公式，来减小第一语音数据流的带宽和增大第一语音数据流的相邻两个语音数据包之间的时间间隔，以此得到相较于第一语音数据流质量较低的第二语音数据流，以避免处于第一网络信号质量下的第一移动终端在通讯时出现丢字、语音断断续续的情况，以此来保证所有的移动终端的通话质量。针对步骤104：在本实施例中，可以将步骤102中依据第一网络信号质量和第二网络信号质量而获得的与第一语音数据流对应的第二语音数据流，发送给第一移动终端和第二移动终端中的接收端，来保证处于不同网络信号质量下的移动终端的通话质量，提升用户体验。在本步骤中，针对方式一和方式二，分别提供了如图2和图3所示的第一移动终端、第二移动终端和核心网设备的三端交互图。下面分别对图2和图3进行说明。例如，如图2所示为本实施例提供的一种三端交互图，各移动终端基于一定时间周期向核心网设备发送心跳包，以此来上报各移动终端的网络信号质量，当第一移动终端发起呼叫请求时，核心网设备将第一移动终端最近一次上报的网络信号质量确定为第一网络信号质量；接着，核心网设备将呼叫请求发送给第二移动终端，并将第二移动终端最近一次上报的网络信号质量确定为第二网络信号质量；然后，核心网设备将第二移动终端发来的呼叫响应发送给第一移动终端；当第一移动终端接收到呼叫响应时，代表第一移动终端和第二移动终端可以开始通讯，此时第一移动终端向核心网设备发送第一语音数据流，核心网设备根据第一网络信号质量和第二网络信号质量，来将第一语音数据流处理为第二语音数据流，并将第二语音数据流发送给第二移动终端，使第二移动终端的通讯质量得到保证；之后，第二移动终端可以向核心网设备发送新的第一语音数据流，核心网设备将新的第一语音数据流处理为新的第二语音数据流发送给第一移动终端，以此来实现第一移动终端和第二移动终端的相互通讯，并且可以保证所有的移动终端的通话质量。再例如，如图3所示为本实施例提供的另一种三端交互图，各移动终端基于一定时间周期向核心网设备发送心跳包，以此来上报各移动终端的网络信号质量，当第一移动终端发起呼叫请求时，核心网设备将第一移动终端最近一次上报的网络信号质量确定为第一网络信号质量；接着，核心网设备将呼叫请求发送给第二移动终端，并向第二移动终端发送测试包，核心网设备根据测试包的发送时刻和接收时刻的时差，来确定第二移动终端在通讯时的第二网络信号质量；然后，核心网设备将第二移动终端发来的呼叫响应发送给第一移动终端；当第一移动终端接收到呼叫响应时，代表第一移动终端和第二移动终端可以开始通讯，此时第一移动终端向核心网设备发送第一语音数据流，核心网设备根据第一网络信号质量和第二网络信号质量，来将第一语音数据流处理为第二语音数据流，并将第二语音数据流发送给第二移动终端，使第二移动终端的通讯质量得到保证；之后，第二移动终端可以向核心网设备发送新的第一语音数据流，核心网设备将新的第一语音数据流处理为新的第二语音数据流发送给第一移动终端，以此来实现第一移动终端和第二移动终端的相互通讯，并且可以保证所有的移动终端的通话质量。图4示出根据另一个实施例的移动终端的通讯方法的流程图。参见图4，该方法应用于核心网设备，包括：步骤400：基于获取到的由不同移动终端发送的心跳包，确定各移动终端的网络信号质量；步骤402：接收第一移动终端向第二移动终端发起的呼叫请求；其中，呼叫请求中携带有第一移动终端的第一标识和第二移动终端的第二标识；步骤404：基于各移动终端的网络信号质量和第一标识，确定第一移动终端在通讯时的第一网络信号质量；步骤406：基于各移动终端的网络信号质量和第二标识，确定第二移动终端在通讯时的第二网络信号质量；步骤408：在第一网络信号质量高于第二网络信号质量时，针对接收到的每一条完整的第一语音数据流，减小第一语音数据流的带宽和增大第一语音数据流的相邻两个语音数据包之间的时间间隔，得到与第一语音数据流对应的第二语音数据流；步骤410：在第一网络信号质量低于第二网络信号质量时，针对接收到的每一条完整的第一语音数据流，增大第一语音数据流的带宽和减小第一语音数据流的相邻两个语音数据包之间的时间间隔，得到与第一语音数据流对应的第二语音数据流；步骤412：将第二语音数据流发送给第一移动终端和第二移动终端中的接收端。图5示出根据又一个实施例的移动终端的通讯方法的流程图。参见图3，该方法应用于核心网设备，包括：步骤500：基于获取到的由不同移动终端发送的心跳包，确定各移动终端的网络信号质量；步骤502：接收第一移动终端向第二移动终端发起的呼叫请求；其中，呼叫请求中携带有第一移动终端的第一标识和第二移动终端的第二标识；步骤504：基于各移动终端的网络信号质量和第一标识，确定第一移动终端在通讯时的第一网络信号质量；步骤506：向第二移动终端发送测试包；步骤508：响应于接收到由第二移动终端发来的测试包，确定测试包的发送时刻和接收时刻的时差；步骤510：基于时差，确定第二移动终端在通讯时的第二网络信号质量；步骤512：在第一网络信号质量高于第二网络信号质量时，针对接收到的每一条完整的第一语音数据流，减小第一语音数据流的带宽和增大第一语音数据流的相邻两个语音数据包之间的时间间隔，得到与第一语音数据流对应的第二语音数据流；步骤514：在第一网络信号质量低于第二网络信号质量时，针对接收到的每一条完整的第一语音数据流，增大第一语音数据流的带宽和减小第一语音数据流的相邻两个语音数据包之间的时间间隔，得到与第一语音数据流对应的第二语音数据流；步骤516：将第二语音数据流发送给第一移动终端和第二移动终端中的接收端。如图6、图7所示，本发明实施例提供了一种移动终端的通讯装置。装置实施例可以通过软件实现，也可以通过硬件或者软硬件结合的方式实现。从硬件层面而言，如图6所示，为本发明实施例提供的一种移动终端的通讯装置所在电子设备的一种硬件架构图，除了图6所示的处理器、内存、网络接口、以及非易失性存储器之外，实施例中装置所在的电子设备通常还可以包括其他硬件，如负责处理报文的转发芯片等等。以软件实现为例，如图7所示，作为一个逻辑意义上的装置，是通过其所在电子设备的CPU将非易失性存储器中对应的计算机程序读取到内存中运行形成的。如图7所示，本实施例提供的一种移动终端的通讯装置，应用于核心网设备，包括：确定模块700，用于确定第一移动终端在通讯时的第一网络信号质量和第二移动终端在通讯时的第二网络信号质量；其中，第一移动终端和第二移动终端进行相互通讯；处理模块701，用于在第一网络信号质量和第二网络信号质量不同时，对接收到的第一语音数据流的编码格式进行处理，得到第二语音数据流；其中，第一语音数据流是由第一移动终端和第二移动终端中的发送端发出的，第一语音数据流和第二语音数据流均包括多个语音数据包；发送模块702，用于将第二语音数据流发送给第一移动终端和第二移动终端中的接收端。在本发明的一个实施例中，确定模块700，用于执行如下操作：基于获取到的由不同移动终端发送的心跳包，确定各移动终端的网络信号质量；接收第一移动终端向第二移动终端发起的呼叫请求；其中，呼叫请求中携带有第一移动终端的第一标识和第二移动终端的第二标识；基于各移动终端的网络信号质量和第一标识，确定第一移动终端在通讯时的第一网络信号质量；基于第二标识，确定第二移动终端在通讯时的第二网络信号质量。在本发明的一个实施例中，确定模块700，在执行基于第二标识，确定第二移动终端在通讯时的第二网络信号质量时，用于执行如下操作：基于各移动终端的网络信号质量和第二标识，确定第二移动终端在通讯时的第二网络信号质量。在本发明的一个实施例中，确定模块700，在执行基于第二标识，确定第二移动终端在通讯时的第二网络信号质量时，用于执行如下操作：向第二移动终端发送测试包；响应于接收到由第二移动终端发来的测试包，确定测试包的发送时刻和接收时刻的时差；基于时差，确定第二移动终端在通讯时的第二网络信号质量。在本发明的一个实施例中，处理模块701中的编码格式包括带宽和相邻两个语音数据包之间的时间间隔。在本发明的一个实施例中，处理模块701，在第一网络信号质量高于第二网络信号质量时，用于执行如下操作：针对接收到的每一条完整的第一语音数据流，减小第一语音数据流的带宽和增大第一语音数据流的相邻两个语音数据包之间的时间间隔，得到与第一语音数据流对应的第二语音数据流。在本发明的一个实施例中，处理模块701，在第一网络信号质量低于第二网络信号质量时，用于执行如下操作：针对接收到的每一条完整的第一语音数据流，增大第一语音数据流的带宽和减小第一语音数据流的相邻两个语音数据包之间的时间间隔，得到与第一语音数据流对应的第二语音数据流。可以理解的是，本发明实施例示意的结构并不构成对一种移动终端的通讯装置的具体限定。在本发明的另一些实施例中，一种移动终端的通讯装置可以包括比图示更多或者更少的部件，或者组合某些部件，或者拆分某些部件，或者不同的部件布置。图示的部件可以以硬件、软件或者软件和硬件的组合来实现。上述装置内的各模块之间的信息交互、执行过程等内容，由于与本发明方法实施例基于同一构思，具体内容可参见本发明方法实施例中的叙述，此处不再赘述。本发明实施例还提供了一种核心网设备，包括存储器和处理器，所述存储器中存储有计算机程序，所述处理器执行所述计算机程序时，实现本发明任一实施例中的一种移动终端的通讯方法。本发明实施例还提供了一种移动终端的通讯系统，包括第一移动终端、第二移动终端和如本发明任一实施例中的核心网设备，第一移动终端和第二移动终端分别与核心网设备进行通讯。综上所述，本发明实施例至少具有如下有益效果：1、在本发明的一个实施例中，先确定正在通讯的第一移动终端的第一网络信号质量和第二移动终端的第二网络信号质量，当第一网络信号质量和第二网络信号质量不同时，对接收到的第一移动终端和第二移动终端中的发送端发出的第一语音数据流的编码格式进行处理，来得到适应第一移动终端和第二移动终端中的接收端的网络信号质量的第二语音数据流，如此来保证所有的移动终端的通话质量。2、在本发明的一个实施例中，不同移动终端以一定的时间周期向核心网设备发送心跳包，来实时更新各移动终端的网络信号质量，当核心网设备接收到第一移动终端向第二移动终端发起的呼叫请求时，核心网设备根据呼叫请求中的第一标识，从各移动终端的网络信号质量中确定出第一移动终端最近一次更新的网络信号质量，并将其确定为第一移动终端在通讯时的第一网络信号质量。在确定第一网络信号质量之后，再基于呼叫请求中的第二标识，确定出第二移动终端在通讯时的第二网络信号质量。3、在本发明的一个实施例中，在本实施例中，核心网设备通过第二标识识别出第二移动终端之后，向第二移动终端发送测试包，然后在第二移动终端接收到测试包后，第二移动终端再将测试包返回给核心网设备，根据测试包在核心网设备的发送时刻和接收时刻的时差，来确定第二移动终端在通讯时的第二网络信号质量。4、在本发明的一个实施例中，在第一网络信号质量高于第二网络信号质量时，针对接收到的每一条完整的第一语音数据流，通过减小第一语音数据流的带宽和增大第一语音数据流的相邻两个语音数据包之间的时间间隔，来得到相较于第一语音数据流质量较低的第二语音数据流，以避免处于第二网络信号质量下的第二移动终端在通讯时出现丢字、语音断断续续的情况，以此来保证所有的移动终端的通话质量。5、在本发明的一个实施例中，在第一网络信号质量低于第二网络信号质量时，针对接收到的每一条完整的第一语音数据流，通过增大第一语音数据流的带宽和减小第一语音数据流的相邻两个语音数据包之间的时间间隔，来得到相较于第一语音数据流质量较高的第二语音数据流，以避免处于第二网络信号质量下的第二移动终端在通讯时的音质效果牺牲较大的情况，以此来保证所有的移动终端的通话质量。需要说明的是，在本文中，诸如第一和第二之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个…”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同因素。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
