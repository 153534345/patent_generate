标题title
自适应地设置分辨率的方法及图像解码装置
摘要abst
公开了一种自适应地设置分辨率的方法和视频解码装置。根据本发明的一个实施方式，以图片为单位自适应地设置分辨率的方法包括以下步骤：从比特流解码最大分辨率信息；从比特流解码关于当前图片的分辨率信息；以及基于最大分辨率信息或分辨率信息设置当前图片的分辨率，其中，分辨率信息的大小小于或等于最大分辨率信息的大小。
权利要求书clms
1.一种以每个图片为基础自适应地设置分辨率的方法，所述方法包括以下步骤：从比特流解码最大分辨率信息；从所述比特流解码当前图片的分辨率信息；以及基于所述最大分辨率信息或所述当前图片的分辨率信息设置所述当前图片的分辨率，其中，所述当前图片的分辨率信息具有小于或等于所述最大分辨率信息的大小。2.根据权利要求1所述的方法，其中，所述当前图片的分辨率信息包括以下中的至少一者：解码图片的分辨率信息，所述解码图片的分辨率信息指定所述当前图片的重构图片的分辨率；参考图片的分辨率信息，所述参考图片的分辨率信息指定所述当前图片的重构图片被存储作为用于预测下一图片的参考图片的分辨率；以及输出图片的分辨率信息，所述输出图片的分辨率信息指定将所述当前图片的重构图片作为输出图片输出的分辨率。3.根据权利要求1所述的方法，其中，所述最大分辨率信息是从所述比特流的序列参数集SPS解码的，并且其中，所述当前图片的分辨率信息是从所述比特流的图片参数集PPS、图片级标题、切片标题和图块组标题中的至少一者解码的。4.根据权利要求1所述的方法，所述方法还包括以下步骤：当作为所述当前图片的重构图片的解码图片的分辨率与所述当前图片内的当前块所参考的参考图片的分辨率彼此不同时，基于所述当前图片的分辨率和所述参考图片的分辨率对所述当前块的运动向量进行缩放，并且基于所述当前图片的分辨率和所述参考图片的分辨率对所述参考图片中的由缩放后的运动向量指示的参考块内的样本的值进行缩放。5.根据权利要求4所述的方法，其中，当包括在所述比特流中的启用标志指示应用了缩放时，执行所述缩放。6.根据权利要求4所述的方法，其中，当执行所述缩放时，在帧间预测解码方法中，TMV、DMVR、PROF和BDOF的应用关闭。7.一种以每个图片为基础自适应地设置分辨率的视频解码装置，所述视频解码装置包括：解码单元，所述解码单元被配置为从比特流解码最大分辨率信息和当前图片的分辨率信息；以及控制单元，所述控制单元被配置为基于所述最大分辨率信息或所述当前图片的分辨率信息设置所述当前图片的分辨率，其中，所述当前图片的分辨率信息具有小于或等于所述最大分辨率信息的大小。8.根据权利要求7所述的视频解码装置，其中，所述当前图片的分辨率信息包括以下中的至少一者：解码图片的分辨率信息，所述解码图片的分辨率信息指定所述当前图片的重构图片的分辨率；参考图片的分辨率信息，所述参考图片的分辨率信息指定所述当前图片的重构图片被存储作为用于预测下一图片的参考图片的分辨率；以及输出图片的分辨率信息，所述输出图片的分辨率信息指定将所述当前图片的重构图片作为输出图片输出的分辨率。9.根据权利要求7所述的视频解码装置，其中，所述解码单元从所述比特流的序列参数集SPS解码所述最大分辨率信息，并且从所述比特流的图片参数集PPS、图片级标题、切片标题和图块组标题中的至少一者解码所述当前图片的分辨率信息。10.根据权利要求7所述的视频解码装置，其中，当作为所述当前图片的重构图片的解码图片的分辨率与所述当前图片内的当前块所参考的参考图片的分辨率彼此不同时，所述控制单元基于所述当前图片的分辨率和所述参考图片的分辨率对所述当前块的运动向量进行缩放，并且基于所述当前图片的分辨率和所述参考图片的分辨率对所述参考图片内的由缩放后的运动向量指示的参考块中的样本的值进行缩放。11.根据权利要求10所述的视频解码装置，其中，当包括在所述比特流中的启用标志指示应用了缩放时，所述控制单元执行所述缩放。12.根据权利要求10所述的视频解码装置，其中，当执行所述缩放时，在帧间预测解码方法中，TMV、DMVR、PROF和BDOF的应用关闭。13.一种以图片为单位自适应地设置分辨率的视频编码装置，所述视频编码装置包括：控制单元，所述控制单元被配置为设置最大分辨率和当前图片的分辨率；以及编码单元，所述编码单元被配置为对表示最大分辨率的最大分辨率信息进行编码，并从比特流对当前图片的分辨率信息进行编码，其中，所述当前图片的分辨率信息具有小于或等于所述最大分辨率信息的大小。
说明书desc
技术领域本公开涉及视频的编码和解码，更具体地，涉及一种通过基于每个图片自适应地设置序列的分辨率来提高编码和解码效率的自适应地设置分辨率的方法和视频解码装置。背景技术由于视频数据的量通常大于语音数据或静止图像数据的量，因此在不进行压缩处理的情况下存储或传输视频数据需要包括存储器在内的大量硬件资源。因此，在存储或传输视频数据时，通常使用编码器对视频数据进行压缩以进行存储或传输。然后，解码器接收压缩后的视频数据，并对视频数据进行解压缩和再现。视频的压缩技术包括H.264/AVC和高效视频编码，与H.264/AVC相比，HEVC的编码效率提高了约40％。然而，对于视频数据来说，图片大小、分辨率和帧率都在逐渐增加，并且相应地要编码的数据量也正在增加。因此，需要一种比现有压缩技术具有更好编码效率和更高图像质量的新压缩技术。发明内容技术问题本公开提供一种改进的视频编解码技术以满足上述需求。具体地，本公开的一个方面涉及通过自适应地设置分辨率的各种方法来提高编码和解码效率的技术。技术方案根据本公开的一个方面，提供了一种以每个图片为基础自适应地设置分辨率的方法，该方法包括：从比特流解码最大分辨率信息；从比特流解码当前图片的分辨率信息；以及基于最大分辨率信息或当前图片的分辨率信息设置当前图片的分辨率。当前图片的分辨率信息具有小于或等于最大分辨率信息的大小。根据本公开的另一个方面，提供了一种以每个图片为基础自适应地设置分辨率的视频解码装置，该装置包括：解码单元，所述解码单元被配置为从比特流解码最大分辨率信息和当前图片的分辨率信息；以及控制单元，所述控制单元被配置为基于最大分辨率信息或当前图片的分辨率信息设置当前图片的分辨率。当前图片的分辨率信息具有小于或等于最大分辨率信息的大小。有益效果如上所述，根据本公开的一个实施方式，由于可以为一个序列自适应地设置分辨率，因此可以提供一种更适合多样化服务条件的视频编码/解码方法。此外，根据本公开的另一实施方式，在具有平滑纹理的图片的情况下，可以通过1/2的下采样来实现编码和解码。附图说明图1是能够实现本公开的技术的视频编码装置的示例性框图。图2示例性地示出了使用QTBTTT结构的块划分结构。图3示例性地示出了多个帧内预测模式。图4是能够实现本公开的技术的视频解码装置的示例性框图。图5是用于描述各种图片类型的图。图6是用于解释本公开的一个实施方式的流程图。图7至图10是用于解释本公开的各种实施方式的流程图。图11至图13是用于解释本公开的使用候选分辨率的各种实施方式的流程图。图14至图17是用于解释本公开的用于重采样的各种实施方式的流程图。具体实施方式在下文中，将参照附图来详细地描述本发明的一些实施方式。应当注意的是，在各个附图中向组成元件添加附图标记时，相同的附图标记表示相同的元件，尽管这些元件在不同的附图中示出。此外，在本公开的以下描述中，将省略在此并入的已知功能和配置的详细描述，以避免模糊本公开的主题。图1是能够实现本公开的技术的视频编码装置的示例性框图。在下文中，将参考图1描述视频编码装置和该装置的元件。视频编码装置包括块分割器110、预测器120、减法器130、变换器140、量化器145、编码器150、逆量化器160、逆变换器165、加法器170、滤波器单元180和存储器190。视频编码装置的每个元件可以用硬件或软件或者硬件和软件的组合来实现。各个元件的功能可以用软件来实现，并且可以实现微处理器来执行与各个元件对应的软件功能。一个视频由多个图片组成。每个图片被分割成多个区域，并对每个区域执行编码。例如，一个图片被分割成一个或更多个图块和/或切片。这里，一个或更多个图块可以被定义为图块组。每个图块或切片被分割成一个或更多个编码树单元。每个CTU以树结构分割成一个或更多个编码单元。应用于各CU的信息被编码为CU的语法，并且共同应用于一个CTU中包括的CU的信息被编码为CTU的语法。此外，共同应用于一个图块中的所有块的信息被编码为图块的语法或被编码为作为多个图块的集合的图块组的语法，并且应用于构成一个图片的所有块的信息被编码在图片参数集或图片标题中。此外，由多个图片共同参考的信息被编码在序列参数集中。另外，由一个或更多个SPS共同引用的信息被编码在视频参数集中。块分割器110确定编码树单元的大小。关于CTU的大小的信息被编码为SPS或PPS的语法，并且被发送到视频解码装置。块分割器110将构成视频的每个图片分割成具有预定大小的多个CTU，并且然后使用树结构递归地分割CTU。在树结构中，叶节点用作编码单元，所述编码单元是编码的基本单元。树结构可以是四叉树、二叉树、三叉树或者由QT结构、BT结构和TT结构中的两个或更多个的组合而形成的结构，在四叉树中，一个节点被分割成四个大小相同的子节点，在二叉树中，一个节点被分割成两个子节点，在三叉树中，一个节点以1:2:1的比例被分割成三个子节点。例如，可以使用QTBT结构或QTBTTT结构。这里，BTTT可以统称为多类型树。图2示出了QTBTTT分割树结构。如图2所示，CTU最初可能会以QT结构被分割。QT分割可以重复进行，直到分割块的大小达到QT中允许的叶节点的最小块大小。指示QT结构的每个节点是否被分割成下层的四个节点的第一标志被编码器150编码并用信号发送给视频解码装置。当QT的叶节点不大于BT中允许的根节点的最大块大小时，可以进一步以BT结构或TT结构中的一个或更多个进行分割。在BT结构和/或TT结构中，可以有多个分割方向。例如，可能有两个方向，所述两个方向是节点的块的水平分割和垂直分割。如图2所示，当MTT分割开始时，由编码器150对指示节点是否被分割的第二标志、指示分割方向的标志、和/或指示分割类型的标志进行编码并用信号发送给视频解码装置。作为树结构的另一示例，当使用QTBTTT结构分割块时，由编码器150对与指示块已被分割的CU分割标志和指示分割类型是否为QT分割的QT分割标志有关的信息进行编码并用信号发送给视频解码装置。当split_cu_flag的值指示块尚未被分割时，该节点的块成为分割树结构中的叶节点并用作编码单元，所述编码单元是编码的基本单位。当split_cu_flag的值指示块尚未被分割时，通过split_qt_flag的值来区分分割类型是QT还是MTT。当分割类型为QT时，没有附加信息。当分割类型是MTT时，指示MTT分割方向的标志和/或指示MTT分割类型的标志由编码器150进行编码并用信号发送给视频解码装置。作为树结构的另一示例，当使用QTBT时，可能有两种分割类型，所述两种分割类型是将节点的块水平分割和垂直分割为相同的大小的两个块。指示BT结构的每个节点是否被分割成下层的块的分割标志和指示分割类型的分割类型信息由编码器150进行编码并发送到视频解码装置。还可以有将节点的块分割成两个不对称的块的其它类型。非对称分割类型可以包括将一个块以1:3的大小比例分割成两个矩形块的类型以及对角分割节点的一个块的类型。根据CTU的QTBT或QTBTTT分割，CU可以具有各种大小。在下文中，与要编码或解码的CU对应的块可以被称为“当前块”。预测器120预测当前块以生成预测块。预测器120包括帧内预测器122和帧间预测器124。一般而言，图片中的每个当前块可以被预测性地编码。可以使用帧内预测技术或帧间预测技术来执行当前块的预测)。帧间预测包括单向预测和双向预测二者。帧内预测器122使用位于包括当前块的当前图片中的当前块周围的像素来预测当前块中的像素。根据预测方向有多种帧内预测模式。例如，如图3所示，多个帧内预测模式可以包括非定向模式和65个定向模式，所述非定向模式包括平面模式和DC模式。对于每个预测模式，相邻像素和要使用的等式被不同地定义。帧内预测器122可以确定在对当前块进行编码时要使用的帧内预测模式。在一些示例中，帧内预测器122可以使用若干帧内预测模式对当前块进行编码并且从测试模式中选择适当的帧内预测模式以供使用。例如，帧内预测器122可以使用若干测试帧内预测模式的率失真分析来计算率失真值，并且可以在测试模式当中选择具有最佳率失真特性的帧内预测模式。帧内预测器122从多个帧内预测模式当中选择一种帧内预测模式，并使用相邻像素和根据所选择的帧内预测模式确定的等式来预测当前块。关于所选择的帧内预测模式的信息由编码器150进行编码并且被发送到视频解码装置。帧间预测器124通过运动补偿过程产生当前块的预测块。帧间预测器在比当前图片更早编码和解码的参考图片中搜索与当前块最相似的块，并基于搜索到的块生成当前块的预测块。然后，帧间预测器生成与当前图片中的当前块与参考图片中的预测块之间的位移对应的运动向量。通常，对亮度分量进行运动估计，对于亮度分量和色度分量二者均使用基于亮度分量计算出的运动向量。包括关于用于预测当前块的参考图片的信息和关于运动向量的信息的运动信息由编码器150进行编码并被发送到视频解码装置。减法器130通过从当前块中减去由帧内预测器122或帧间预测器124生成的预测块来生成残差块。变换器140将在空间域中具有像素值的残差块中的残差信号变换为频域中的变换系数。变换器140可以使用当前块的总大小作为变换单元来变换残差块中的残差信号。另选地，变换器可以将残差块分割成变换区域和非变换区域的子块，并且仅使用变换区域的子块作为变换单元对残差信号进行变换。这里，变换区域子块可以是基于水平轴的尺寸比为1:1的两个矩形块中的一者。在这种情况下，指示仅子块已被变换的标志、方向信息和/或位置信息由编码器150进行编码并用信号发送给视频解码装置。另外，变换区域子块的大小可以具有基于水平轴线的1:3的大小比。在这种情况下，用于区分分割的标志被编码器150附加地编码且用信号发送给视频解码装置。量化器145对从变换器140输出的变换系数进行量化，并将量化后的变换系数输出到编码器150。编码器150通过使用诸如基于上下文的自适应二进制算术码的编码方法对量化后的变换系数进行编码来生成比特流。编码器150对诸如与块分割相关的CTU大小、CU分割标志、QT分割标志、MTT分割方向和MTT分割类型等信息进行编码，使得视频解码装置以与视频编码装置相同的方式分割块。此外，编码器150对关于指示当前块是通过帧内预测还是通过帧间预测编码的预测类型的信息进行编码，并且根据预测类型对帧内预测信息或帧间预测信息进行编码。逆量化器160对从量化器145输出的量化变换系数进行逆量化以生成变换系数。逆变换器165将从逆量化器160输出的变换系数从频域变换到空间域并重构残差块。加法器170将重构的残差块与预测器120生成的预测块相加以重构当前块。重构的当前块中的像素用作下一个块的帧内预测的参考像素。滤波器单元180对重构像素进行滤波以减少由于基于块的预测和变换/量化而产生的块伪影、振铃伪影和模糊伪影。滤波器单元180可以包括去块滤波器182和样本自适应偏移滤波器184。去块滤波器180对重构块之间的边界进行滤波以去除由逐块编码/解码而引起的块伪影，并且SAO滤波器184另外对去块滤波后的视频进行滤波。SAO滤波器184是用于补偿由有损编码引起的重构像素与原始像素之间的差异的滤波器。通过去块滤波器182和SAO滤波器184进行滤波的重构块被存储在存储器190中。一旦一个图片中的所有块都被重构，重构的图片就被用作用于对要编码的下一个图片中的块进行帧间预测的参考图片。尽管图1中未示出，视频编码装置还可以包括控制单元，所述控制单元被配置为以每个图片为基础设置分辨率并执行缩放或重采样。该控制单元可以与图1所示的子组件一起以相同的物理配置来实现，或者可以以与图1所示的子组件不同的物理配置来实现。稍后将描述控制单元的细节。图4是能够实现本公开的技术的视频解码装置的示例性功能框图。在下文中，将参考图4描述视频解码装置和该装置的元件。视频解码装置可以包括解码器410、逆量化器420、逆变换器430、预测器440、加法器450、滤波器单元460和存储器470。类似于图1的视频编码装置，视频解码装置的各个元件可以被实现为硬件或软件，或者可以被实现为硬件和软件的组合。另外，各个元件的功能可以被实现为软件，并且可以实现微处理器来执行与各个元件对应的软件的功能。解码器410通过对从视频编码装置接收的比特流进行解码并提取与块分割相关的信息来确定要解码的当前块，并且提取重构当前块所需的预测信息和关于残差信号的信息。解码器410从序列参数集或图片参数集中提取关于CTU大小的信息，确定CTU的大小，并将图片分割成所确定大小的CTU。然后，解码器确定CTU为最上层，并提取关于CTU的分割信息以使用树结构对CTU进行分割。例如，当使用QTBTTT结构分割CTU时，首先提取与QT分割相关的第一个标志，并将每个节点分割成下层的四个节点。然后，对于与QT的叶节点对应的节点，提取与MTT分割相关的第二标志以及关于分割方向和/或分割类型的信息，并且叶节点以MTT结构被分割。这样，QT的叶节点下面的每个节点都以BT或TT结构被递归地分割。作为另一示例，当使用QTBTTT结构分割CTU时，首先提取指示CU是否被分割的CU分割标志。如果对应的块被分割，则提取QT分割标志。当分割类型不是QT而是MTT时，指示MTT分割方向的标志和/或指示MTT分割类型的标志被另外地提取。在分割过程中，每个节点可能会进行零次或更多次递归QT分割，并且然后再进行零次或更多次递归MTT分割。例如，CTU可能立即被MTT-分割，也可能只是多次QT-分割。作为另一示例，当使用QTBT结构分割CTU时，首先提取与和QT分割相关的第一个标志，并将每个节点分割成下层的四个节点。对于与QT的叶节点对应的节点，提取指示节点是否进一步被BT分割的split_flag和分割方向信息。在确定要通过树结构分割对当前块进行解码时，解码器410提取与指示当前块是经历帧内预测还是帧间预测的预测类型有关的信息。当预测类型信息指示帧内预测时，解码器410提取当前块的帧内预测信息的语法元素。当预测类型信息指示帧间预测时，解码器410提取帧间预测信息的语法元素和由运动向量参考的参考图片。解码器410提取与当前块的量化后的变换系数有关的信息作为关于残差信号的信息。逆量化器420对量化后的变换系数进行逆量化，并将逆量化后的变换系数从频域逆变换到空间域，以重构残差信号来生成当前块的残差块。另外，当逆变换器430仅对变换块的部分区域进行逆变换时，指示仅变换块的子块已被变换的标志和关于子块的方向信息和/或子块位置信息被提取。然后，通过将子块的变换系数从频域逆变换到空间域来重构残差信号。对于没有被逆变换的区域，残差信号用“0”填充。从而，创建了当前块的最终残差块。预测器440可以包括帧内预测器442和帧间预测器444。在当前块的预测类型是帧内预测时激活帧内预测器442，在当前块的预测类型是帧间预测时激活帧间预测器444。帧内预测器442基于从解码器410提取的帧内预测模式的语法元素确定多个帧内预测模式当中当前块的帧内预测模式，并根据帧内预测模式基于围绕当前块的参考像素预测当前块。帧间预测器444基于从解码器410提取的帧内预测模式的语法元素来确定当前块的运动向量和运动向量所参考的参考图片，并基于运动向量和参考图片来预测当前块。加法器450通过将从逆变换器输出的残差块和从帧间预测器或帧内预测器输出的预测块相加来重构当前块。重构的当前块中的像素用作稍后要解码的块的帧内预测的参考像素。滤波器单元460可以包括去块滤波器462和SAO滤波器464。去块滤波器462对重构块之间的边界执行去块滤波以去除由逐块解码引起的块伪影。SAO滤波器464在去块滤波之后对重构块执行附加滤波，以补偿重构像素与原始像素之间的由于有损编码而引起的差异。通过去块滤波器462和SAO滤波器464进行滤波的重构块被存储在存储器470中。当一个图片中的所有块都被重构时，重构的图片被用作用于对随后要编码的下一个图片中的块进行帧间预测的参考图片。尽管图4中未示出，但是视频解码装置还可以包括控制单元，所述控制单元用于以每个图片为基础设置分辨率并执行缩放或重采样。该控制单元可以与图4所示的子组件一起以相同的物理配置来实现，或者可以以与图4所示的子组件不同的物理配置来实现。稍后将描述控制单元的细节。另外，包括在视频解码装置中的控制单元是在其功能方面与包括在视频编码装置中的上述控制单元对应的部件。在下文中，为了简单区分视频解码装置中包括的控制单元和视频编码装置中包括的控制单元，视频解码装置中包括的控制单元将被称为“解码控制单元”，而视频编码装置中包括的控制单元将被称为“编码控制单元”。在HEVC标准中，序列的分辨率信息被记录在序列参数集中并被用信号发送。也就是说，序列的分辨率信息是以每序列为基础设置的。如表1所示，序列的分辨率信息以亮度样本为基础用图片宽度和图片高度来描述。这种常规方法不适用于需要各种分辨率的服务情况，因为为一个序列设置或指定了一个分辨率。本公开提出了通过以包括在一个序列中的子单元为单位自适应地设置分辨率来解决上述问题的方法。设置分辨率的子单元可以是包含在一个序列中的图片、切片或图块组。在本说明书中，所提出的方法将集中于以每个图片为基础设置分辨率的实施方式来描述。图片类型设置分辨率的图片类型可以分为诸如原始图片、解码图片、参考图片和输出图片的四种类型。原始图片可以是指视频编码装置要编码的图片。原始图片的分辨率可以是对应序列可以具有的最大分辨率。因此，关于原始图片的分辨率的信息可以是最大分辨率信息。此外，最大分辨率信息可以是解码图片可以具有的最大分辨率。解码图片、参考图片和输出图片可以根据解码过程进行分类，并且在图5中示出了用于描述这些图片的图。解码图片可以是对与要重构的目标图片对应的当前图片应用解码过程的结果。也就是说，解码图片可以是重构的当前图片。参考图片可以是存储在缓冲器或存储器470中用于预测要在当前图片之后重构的图片的解码图片。输出图片可以是从视频解码装置输出的解码图片，以用于图片的输出或显示。例如，在当前图片为第t个图片时，当前图片的解码过程中使用的分辨率信息可以是解码图片的分辨率信息。参考图片的分辨率信息可以指示在当前图像被重构之后将当前图片的重构图片存储在缓冲器中以用作后面的图片个图片)的参考图片的分辨率。接下来，在当前图片为第个图片时，当前图片的分辨率信息可以为解码图片的分辨率信息。在这种情况下，如果在帧间预测时将第t个图片用作参考图片，则将第个解码图片的分辨率信息和第t个参考图片的分辨率信息相互比较。此外，在输出存储在缓冲器中的第t个图片的情况下，将第t个解码图片的分辨率信息和第t个输出图片的分辨率信息相互比较。下面将描述如上所述基于图片类型设置分辨率的本公开的示例。视频编码装置可以设置分辨率。要设置的分辨率可以包括最大分辨率信息和当前图片的分辨率信息。这里，当前图片的分辨率信息可以指解码图片、参考图片和输出图片的分辨率，并且可以以每个图片为基础设置分辨率。视频编码装置可以对最大分辨率信息进行编码并将其用信号发送给视频解码装置。视频解码装置可以从比特流解码最大分辨率信息。最大分辨率信息可以在比特流的SPS中定义并且用信号发送。最大分辨率信息可以表示为max_width_in_luma_samples和max_height_in_luma_samples，或者可以表示为pic_width_max_in_luma_samples和pic_height_max_in_luma_samples。视频编码装置可以对当前图片的分辨率信息进行编码并将其用信号发送给视频解码装置。视频解码装置可以从比特流解码当前图片的分辨率信息。当前图片的分辨率信息可以在比特流的图片参数集、图片级标题、切片标题和图块组标题中的至少一者中定义和用信号发送。由于最大分辨率信息是当前图片可以具有的最大分辨率，因此当前图片的分辨率信息可以具有小于或等于最大分辨率信息的大小或值。当前图片的分辨率信息可以包括一种或更多种图片类型的分辨率信息。具体地，分辨率信息可以包括解码图片的分辨率信息、参考图片的分辨率信息以及输出图片的分辨率信息中的至少一者，所述解码图片的分辨率信息是当前图片已经被重构时的分辨率信息，所述参考图片的分辨率信息是当解码图片被存储以用于下一图片的预测时的分辨率信息，所述输出图片的分辨率信息是输出解码图片时的分辨率信息。视频解码装置可以基于最大分辨率信息或当前图片的分辨率信息来设置当前图片的分辨率。根据一个实施方式，本公开提出的自适应地设置分辨率的方法可以以单独的模式来实现。可以使用启用标志来确定是否启用/禁用自适应分辨率设置模式。如果adaptive_resolution_enabled_flag＝1或ref_pic_resampling_enabled_flag＝1，则可以启用自适应分辨率设置模式，并且如果adaptive_resolution_enabled_flag＝0或ref_pic_resampling_enabled_flag＝0，则可以禁用自适应分辨率设置模式。ref_pic_resampling_enabled_flag＝1可以指示由于启用了自适应分辨率设置模式，在当前图片和参考图片之间分辨率可能不同，所以需要以当前图片为基础对参考图片进行缩放/重采样。反之，在ref_pic_resampling_enabled_flag＝0时，禁用自适应分辨率设置模式且在当前图片和参考图片之间分辨率相同，所以不需要基于当前图片对参考图片进行缩放/重采样。换句话说，如果ref_pic_resampling_enabled_flag＝0，则当前图片的分辨率信息可以与最大分辨率信息相同。可以在SPS中定义启用标志并用信号发送启用标志。示例1示例1涉及通过显式地用信号发送所有最大分辨率信息、解码图片的分辨率信息、参考图片的分辨率信息和输出图片的分辨率信息来设置分辨率的方法。最大分辨率信息视频编码装置可以一起用信号发送最大分辨率信息与启用标志。此外，当启用标志指示激活时，可以用信号发送最大分辨率信息。在表3中，在sps_adaptive_resolution_enabled_flag＝0或ref_pic_resampling_enabled_flag＝0的情况下用信号发送的pic_width_in_luma_samples和pic_height_in_luma_samples表示与常规方法一样以每序列为基础设置的分辨率信息。在表2所示的情况下，视频解码装置从比特流解码sps_adaptive_resolution_enabled_flag和最大分辨率信息，并在sps_adaptive_resolution_enabled_flag＝1或ref_pic_resampling_enabled_flag＝1的情况下利用max_width_in_luma_samples和max_height_in_luma_samples来设置当前图片的分辨率。在表3的实例中，视频解码装置可以从比特流解码sps_adaptive_resolution_enabled_flag。在sps_adaptive_resolution_enabled_flag＝1的情况下，可以从比特流解码max_width_in_luma_samples和max_height_in_luma_samples。在sps_adaptive_resolution_enabled_flag＝0的情况下，可以从比特流解码以每序列为基础设置的分辨率信息。解码图片的分辨率信息当sps_adaptive_resolution_enabled_flag＝1时，视频编码装置用信号发送解码图片的分辨率信息，另选地，当sps_adaptive_resolution_enabled_flag＝1且解码图片的分辨率与最大分辨率不同时，视频编码装置用信号发送分辨率信息。在表5中，pic_resolution_same_as_max_resolution_flag是指示解码图片的分辨率是否等于最大分辨率的标志。pic_resolution_same_as_max_resolution_flag＝1指示解码图片的分辨率等于最大分辨率，而pic_resolution_same_as_max_resolution_flag＝0指示解码图片的分辨率与最大分辨率不同。如表4所示，在sps_adaptive_resolution_enabled_flag＝1的情况下，视频解码装置可以从码流解码解码图片的分辨率信息。在这种情况下，可以基于解码图片的分辨率信息来设置解码图片的分辨率。另一方面，如果sps_adaptive_resolution_enabled_flag＝0，则禁用自适应分辨率设置模式，使得解码图片的分辨率可以与常规方法一样以每序列为基础设置。在表5的实例中，视频解码装置可以从比特流解码sps_adaptive_resolution_enabled_flag。在sps_adaptive_resolution_enabled_flag＝1的情况下，可以从比特流解码pic_resolution_same_as_max_resolution_flag，并且在pic_resolution_same_as_max_resolution_flag＝0的情况下，可以从比特流解码分辨率信息。在这种情况下，可以基于解码图片的分辨率信息来设置解码图片的分辨率。如果sps_adaptive_resolution_enabled_flag＝0或ref_pic_resampling_enabled_flag＝0，则禁用自适应分辨率设置模式，使得解码图片的分辨率可以与常规方法一样以每序列为基础设置。如果pic_resolution_same_as_max_resolution_flag＝1，则由于解码图片的分辨率信息没有被解码，所以可以基于最大分辨率信息来设置解码图片的分辨率。参考图片的分辨率信息在sps_adaptive_resolution_enabled_flag＝1的情况下，视频编码装置可以用信号发送参考图片的分辨率信息，另选地，在sps_adaptive_resolution_enabled_flag等于1且参考图片的分辨率与最大分辨率或解码图片的分辨率不同时，视频编码装置可以用信号发送分辨率信息。在表7中，ref_pic_resolution_same_as_pic_resolution_flag是指示参考图片的分辨率是否等于解码图片的分辨率的标志。ref_pic_resolution_same_as_pic_resolution_flag＝1指示参考图片的分辨率与解码图片的分辨率相同，ref_pic_resolution_same_as_pic_resolution_flag＝0指示参考图片的分辨率与解码图片的分辨率不同。如表6所示，在sps_adaptive_resolution_enabled_flag＝1的情况下，视频解码装置可以从比特流解码参考图片的分辨率信息。在这种情况下，可以基于参考图片的分辨率信息来设置解码图片的分辨率。另一方面，如果sps_adaptive_resolution_enabled_flag＝0，则参考图片的分辨率可以与常规方法一样以每序列为基础设置。在表7的实例中，视频解码装置可以从比特流解码sps_adaptive_resolution_enabled_flag。在sps_adaptive_resolution_enabled_flag＝1的情况下，可以从比特流解码ref_pic_resolution_same_as_pic_resolution_flag，并且在ref_pic_resolution_same_as_pic_resolution_flag＝0的情况下，可以从比特流解码参考图片的分辨率信息。在这种情况下，可以基于参考图片的分辨率信息来设置参考图片的分辨率。如果sps_adaptive_resolution_enabled_flag＝0，则可以与常规方法一样以每序列为基础设置参考图片的分辨率。如果ref_pic_resolution_same_as_pic_resolution_flag＝1，则可以基于最大分辨率信息来设置参考图片的分辨率。输出图片的分辨率信息当sps_adaptive_resolution_enabled_flag＝1时，视频编码装置可以用信号发送输出图片的分辨率信息，另选地，当sps_adaptive_resolution_enabled_flag＝1且输出图片的分辨率与最大分辨率不同时，视频编码装置可以用信号发送分辨率信息。在表8和表9中，示出了输出图片的分辨率信息在SPS的位置定义，但是如上所述，输出图片的分辨率信息可以在PPS、图片级标题和切片标题的一个或更多个位置定义。在表9中，output_pic_resolution_same_as_max_resolution_flag是指示输出图片的分辨率是否等于最大分辨率的标志。output_pic_resolution_same_as_max_resolution_flag＝1指示输出图片的分辨率等于最大分辨率，output_pic_resolution_same_as_max_resolution_flag＝0指示输出图片的分辨率与最大分辨率不同。在表8的实例中，在sps_adaptive_resolution_enabled_flag＝1的情况下，视频解码装置可以从比特流解码输出图片的分辨率信息。在这种情况下，可以基于输出图片的分辨率信息来设置输出图片的分辨率。另一方面，如果sps_adaptive_resolution_enabled_flag＝0，则输出图片的分辨率可以与常规方法一样以每序列为基础设置。在表9的实例中，视频解码装置可以从比特流解码sps_adaptive_resolution_enabled_flag。在sps_adaptive_resolution_enabled_flag＝1的情况下，可以从比特流解码output_pic_resolution_same_as_max_resolution_flag，并且在output_pic_resolution_same_as_max_resolution_flag＝0的情况下，可以从比特流解码输出图片的分辨率信息。在这种情况下，可以基于输出图片的分辨率信息来设置输出图片的分辨率。如果sps_adaptive_resolution_enabled_flag＝0，则可以与常规方法一样以每序列为基础设置输出图片的分辨率。如果output_pic_resolution_same_as_max_resolution_flag＝1，则可以基于最大分辨率信息来设置输出图片的分辨率。示例2示例2涉及在解码图片、参考图片和输出图片中的两者或更多者具有相同分辨率的前提下设置分辨率的方法。可以以与示例1中所述相同的方式用信号发送最大分辨率信息并对最大分辨率信息进行解码。示例2-1示例2-1涉及在解码图片、参考图片和输出图片都具有相同分辨率的前提下用信号发送分辨率信息的方法。由于解码图片、参考图片和输出图片具有相同的分辨率，因此视频编码装置可以仅用信号发送解码图片的分辨率信息、参考图片的分辨率信息和输出图片的分辨率信息中的一者。仅用信号发送解码图片的分辨率信息的示例与表4或表5中所示的示例相同，仅用信号发送参考图片的分辨率信息的示例与表6或表7中所示的示例相同，并且仅用信号发送输出图像的分辨率信息的示例与表8或表9中所示的示例相同。例如，在表4的实例中，在sps_adaptive_resolution_enabled_flag＝1的情况下，视频解码装置可以从比特流解码解码图片的分辨率信息。在这种情况下，可以基于解码图片的分辨率信息来设置解码图片的分辨率。此外，由于解码图片的分辨率信息也可以用作参考图片的分辨率信息和输出图片的分辨率信息，所以参考图片的分辨率和输出图片的分辨率也可以基于解码图片的分辨率信息设置。作为另一示例，在表5的实例中，视频解码装置可以从比特流解码sps_adaptive_resolution_enabled_flag，并且在sps_adaptive_resolution_enabled_flag＝1的情况下可以从比特流解码pic_resolution_same_as_max_resolution_flag，并且在pic_resolution_same_as_max_resolution_flag＝0的情况下可以从比特流解码解码图片的分辨率信息。在这种情况下，不仅解码图片的分辨率，而且参考图片的分辨率和输出图片的分辨率可以基于解码图片的分辨率信息来设置。示例2-2示例2-2涉及在解码图片和输出图片具有相同分辨率的前提下用信号发送分辨率信息的方法。由于解码图片和输出图片具有相同的分辨率，因此视频编码装置可以仅用信号发送解码图片的分辨率信息和输出图片的分辨率信息中的一者。仅用信号发送解码图片的分辨率信息的示例与表4或表5中所示的示例相同，仅用信号发送输出图片的分辨率信息的示例与表8或表9中所示的示例相同。另外，可以与表6或表9中所示的示例相同地用信号发送参考图片的分辨率信息。例如，在表4的实例中，在sps_adaptive_resolution_enabled_flag＝1的情况下，视频解码装置可以从比特流解码解码图片的分辨率信息。在这种情况下，可以基于解码图片的分辨率信息来设置解码图片的分辨率。此外，由于解码图片的分辨率信息可以用作输出图片的分辨率信息，所以可以基于解码图片的分辨率信息来设置输出图片的分辨率。作为另一示例，在表5的实例中，视频解码装置可以从比特流解码sps_adaptive_resolution_enabled_flag，并且在sps_adaptive_resolution_enabled_flag＝1的情况下可以从比特流解码pic_resolution_same_as_max_resolution_flag，并且在pic_resolution_same_as_max_resolution_flag＝0的情况下可以从比特流解码解码图片的分辨率信息。在这种情况下，不仅可以基于解码图片的分辨率信息设置解码图片的分辨率，还可以基于解码图片的分辨率信息设置输出图片的分辨率。基于参考图片的分辨率信息设置参考图片的分辨率的方法可以与示例1中描述的示例相同。根据一个实施方式，在示例2-2中，还可以进一步假设参考图片的分辨率等于最大分辨率。视频编码装置不用信号发送参考图片的分辨率信息，并且视频解码装置可以基于最大分辨率信息来设置参考图片的分辨率。示例2-3示例2-3涉及在参考图片和输出图片具有相同分辨率的前提下用信号发送分辨率信息的方法。由于参考图片和输出图片具有相同的分辨率，因此视频编码装置可以仅用信号发送参考图片的分辨率信息和输出图片的分辨率信息中的一者。仅用信号发送参考图片的分辨率信息的示例与表6或表7中所示的示例相同，仅用信号发送输出图片的分辨率信息的示例与表8或表9中的示例相同。另外，可以与表4或表5中所示的示例相同地用信号发送解码图片的分辨率信息。例如，在表6的实例中，在sps_adaptive_resolution_enabled_flag＝1的情况下，视频解码装置可以从比特流解码参考图片的分辨率信息。在这种情况下，可以基于参考图片的分辨率信息来设置参考图片的分辨率。此外，由于参考图片的分辨率信息可以用作输出图片的分辨率信息，所以可以基于参考图片的分辨率信息来设置输出图片的分辨率。作为另一示例，在表7的实例中，视频解码装置可以从比特流解码sps_adaptive_resolution_enabled_flag，并且在sps_adaptive_resolution_enabled_flag＝1的情况下，可以从比特流解码ref_pic_resolution_same_as_pic_resolution_flag，并且在ref_pic_resolution_same_as_pic_resolution_flag＝0的情况下，可以从比特流解码参考图片的分辨率信息。在这种情况下，基于参考图片的分辨率信息，不仅可以设置参考图片的分辨率，还可以设置输出图片的分辨率。基于解码图片的分辨率信息设置解码图片的分辨率的方法可以与示例1中描述的示例相同。根据一个实施方式，在示例2-3中，还可以进一步假设解码图片的分辨率等于最大分辨率。在这种情况下，视频编码装置不用信号发送解码图片的分辨率信息，并且视频解码装置可以基于最大分辨率信息来设置解码图片的分辨率。示例2-4示例2-4涉及在解码图片和参考图片具有相同分辨率的前提下用信号发送分辨率信息的方法。由于解码图片和参考图片具有相同的分辨率，因此视频编码装置可以仅用信号发送解码图片的分辨率信息和参考图片的分辨率信息中的一者。仅用信号发送解码图片的分辨率信息的示例与表4或表5中所示的示例相同，并且仅用信号发送参考图片的分辨率信息的示例与表6或表7中的示例相同。另外，可以与表8或表9中所示的示例相同地用信号发送输出图片的分辨率信息。例如，在表4的实例中，在sps_adaptive_resolution_enabled_flag＝1的情况下，视频解码装置可以从比特流解码解码图片的分辨率信息。根据一个实施方式，无论sps_adaptive_resolution_enabled_flag的值如何，视频解码装置都可以从比特流解码解码图片的分辨率信息。在这种情况下，可以基于解码图片的分辨率信息来设置解码图片的分辨率。此外，由于解码图片的分辨率信息也可以用作参考图片的分辨率信息，所以参考图片的分辨率可以基于解码图像的分辨率信息设置。作为另一示例，在表5的实例中，视频解码装置可以从比特流解码sps_adaptive_resolution_enabled_flag，并且在sps_adaptive_resolution_enabled_flag＝1的情况下可以从比特流解码pic_resolution_same_as_max_resolution_flag，并且在pic_resolution_same_as_max_resolution_flag＝0的情况下可以从比特流解码解码图片的分辨率信息。在这种情况下，基于解码图片的分辨率信息，不仅可以设置解码图片的分辨率，还可以设置参考文件图片的分辨率。基于输出图片的分辨率信息设置输出图片的分辨率的方法可以与示例1中描述的示例相同。根据一个实施方式，在示例2-4中，还可以进一步假设输出图片的分辨率等于最大分辨率。视频编码装置不用信号发送输出图片的分辨率信息，并且视频解码装置可以基于最大分辨率信息来设置输出图片的分辨率。示例3示例3涉及使用候选分辨率设置分辨率的方法。候选分辨率可以是可以设置为当前图片分辨率的候选。候选分辨率可以是解码图片、参考图片或输出图片中的样本的数量，即，可以以样本或像素为单位表示。例如，当最大分辨率为1920x1080时，候选分辨率可以是、等。根据一个实施方式，候选分辨率可以是指示当前图片的分辨率相对于最大分辨率信息的大小的比率。例如，候选分辨率的比率可以是1、1/2等。一个或更个候选分辨率可以构成候选分辨率列表。候选列表可以针对图片的编码/解码的每个过程来配置，或者可以在视频编码/解码装置中预先定义。在前一种情况下，可以将用于构建候选列表的语法元素从视频编码装置用信号发送给视频解码装置。可以在SPS中定义用于构建候选列表的语法元素。也就是说，可以以每序列为基础配置候选列表。可以将候选列表中包括的候选分辨率中的一者设置为当前图片的分辨率。要被设置为当前图片的分辨率的候选分辨率可以是由指示信息指示的候选分辨率。指示信息可以是指示任一候选分辨率的索引或者可以包括多个语法元素。指示信息可以在PPS、切片标题和图块组标题中的一个或更多个位置处定义，并且从视频编码装置用信号发送给视频解码装置。示例3-1示例3-1涉及针对图片的编码/解码的每个过程构建候选列表的方法，候选分辨率为样本的数量，并且索引用作指示信息。视频编码装置可以对用于构建候选列表的语法元素进行编码并用信号发送。如表10所示，用于构建候选列表的语法元素可以包括指示候选列表中包括的候选分辨率的数量的语法元素和由num_pic_size_in_luma_samples_minus1指示的每个候选分辨率的样本的数量。视频解码装置可以从比特流解码启用信息，并且在sps_adaptive_resolution_enabled_flag＝1或ref_pic_resampling_enabled_flag＝1的情况下，可以从比特流解码num_pic_size_in_min。此外，视频解码装置可以将pic_width_in_luma_samples和pic_height_in_luma_samples解码比由num_pic_size_in_luma_samples_minus1指示的数量多“+1”。此后，可以基于用于构建候选列表的语法元素来构建候选列表。如表11所示，视频编码装置可以对候选列表中包括的候选分辨率当中的被确定为当前图片的分辨率的一个候选分辨率的索引进行编码并用信号发送。在sps_adaptive_resolution_enabled_flag＝1或ref_pic_resampling_enabled_flag＝1的情况下，视频解码装置可以从比特流解码pic_size_in_luma_samples_idx。此外，视频解码装置可以基于解码后的pic_size_in_luma_samples_idx所指示的候选分辨率来设置当前图片的分辨率。示例3-2示例3-2涉及针对图片的编码/解码的每个过程构建候选列表的方法，其中，候选分辨率为相对于最大分辨率的比率，并且索引用作指示信息。视频编码装置可以对用于构建候选列表的语法元素进行编码并用信号发送。如表12所示，用于构建候选列表的语法元素可以包括指示候选列表中包括的候选分辨率比率的数量的语法元素和由num_pic_size_ratio_minus1指示的每个候选分辨率的比率。视频解码装置可以从比特流解码启用信息，并且在sps_adaptive_resolution_enabled_flag＝1或ref_pic_resampling_enabled_flag＝1的情况下，可以从比特流解码num_pic_size_ratio_minus1。此外，视频解码装置可以将pic_size_ratio解码比由num_pic_size_ratio_minus1指示的数量多“+1”。此后，可以基于用于构建候选列表的语法元素来构建候选列表。如表13所示，视频编码装置可以对候选列表中包括的候选分辨率比率当中的被确定为当前图片的分辨率的一个候选分辨率比率的索引进行编码并用信号发送。在sps_adaptive_resolution_enabled_flag＝1或ref_pic_resampling_enabled_flag＝1的情况下，视频解码装置可以从比特流解码pic_size_ratio_idx。此外，视频解码装置可以基于解码后的pic_size_ratio_idx指示的候选分辨率比率来设置当前图片的分辨率。示例3-3示例3-3涉及一种在视频编解码装置中预定义候选分辨率并且将索引用作指示信息的方法。由于预先定义了候选分辨率，因此可以不执行在实施方式3-1和3-2中描述的用信号发送用于构建候选列表的语法元素的过程和构造候选列表的过程。因此，可以仅执行将索引作为指示信息用信号发送的过程以及将由索引指示的候选分辨率设置为当前图片的分辨率的过程。如表11或表13所示，视频编码装置可以对候选分辨率当中的被设置为当前图片的分辨率的候选分辨率的索引进行编码并用信号发送。视频解码装置可以从比特流解码pic_size_in_luma_samples_idx或pic_size_ratio_idx，并基于pic_size_in_luma_samples_idx或pic_size_ratio_idx所指示的候选分辨率设置当前图片的分辨率。示例3-4示例3-4涉及一种在视频编码/解码装置中预定义三个候选分辨率并且使用包括多个语法元素的指示信息的方法。候选分辨率可以包括第一候选分辨率、第二候选分辨率和第三候选分辨率。候选分辨率可以是示例3-1中的样本的数量，也可以是示例3-2中的比率。构成指示信息的多个语法元素可以包括指示当前图片的分辨率是否对应于第一候选分辨率的第一指示信息以及指示当前图片的分辨率对应于第二候选分辨率和第三候选分辨率当中的哪一个候选分辨率的第二指示信息。在第一指示信息指示当前图片的分辨率与第一候选分辨率不对应的情况下，可以从视频编码装置用信号发送第二指示信息并且可以由视频解码装置解码第二指示信息。表14和图13示出了第一候选分辨率具有比率1、第二候选分辨率具有比率2/3并且第三候选分辨率具有比率1/2的示例。如表14所示，视频编码装置可以确定当前图片的分辨率是否对应于与最大分辨率的比率为1，并且可以将结果作为第一指示信息用信号发送。在这种情况下，pic_size_same_as_org_pic_flag＝1)可以指示当前图片的分辨率与最大分辨率的比率为1)，并且pic_size_same_as_org_pic_flag＝0)可以指示当前图片的分辨率与最大分辨率的比率不为1。在pic_size_same_as_org_pic_flag＝0的情况下，视频编码装置可以确定当前图片的分辨率是否对应于与最大分辨率的比率为1/2，并且可以将结果作为第二指示信息用信号发送。half_pic_size_flag＝1可以指示当前图片的分辨率与最大分辨率的比率为1/2，并且half_pic_size_flag＝0可以指示当前图片的分辨率与最大分辨率的比率不为1/2。视频解码装置可以从比特流解码启用信息，并且在sps_adaptive_resolution_enabled_flag＝1或ref_pic_resampling_enabled_flag＝1的情况下，可以从比特流解码pic_size_same_as_org_pic_flag。在pic_size_same_as_org_pic_flag＝1的情况下，当前图片的分辨率可以被设置为与最大分辨率相同的值。另一方面，在pic_size_same_as_org_pic_flag＝0的情况下，视频解码装置还可以从比特流解码half_pic_size_flag。在half_pic_size_flag＝1的情况下，当前图片的分辨率可以被设置为最大分辨率的1/2。当half_pic_size_flag＝0时，当前图片的分辨率可以被设置为最大分辨率的2/3的值。示例4示例4涉及对以每个块为基础设置的分辨率进行重采样的方法。可以在解码控制单元中执行重采样或缩放。当使用本公开的方法为原始图片、解码图片、参考图片和输出图片设置不同的分辨率时，可能需要重采样过程来补偿分辨率失配。重采样可以包括上采样和下采样。在以下情况下可能需要重采样过程：1)在当前图片的分辨率和参考图片的分辨率彼此不同时，2)在解码图片的分辨率和输出图片的分辨率彼此不同时，3)在输出图片的分辨率和参考图片的分辨率不同时，以及4)在当前图片的分辨率和并置图片的分辨率不同时。1)在当前图片的分辨率和参考图片的分辨率彼此不同时在帧间预测中，视频解码装置可以确定具有当前块的当前图片的分辨率和当前块要参考的参考图片的分辨率是否彼此不同。帧间预测所需的运动信息可以包括参考图片和运动向量，并且可以基于参考图片的分辨率和当前图片的分辨率对运动向量和参考块进行重采样。换句话说，可以基于参考图片的分辨率和当前图片的分辨率对由当前块的运动向量指示的位置和参考块中位于该位置处的样本进行重采样。根据一个实施方式，在当前图片参考多个参考图片时，可以在生成/配置参考图片列表的过程期间根据当前图片的分辨率和每个参考图片的分辨率确定是否存在重采样和/或重采样因子/比率。在当前图片的分辨率和参考图片的分辨率不同时，视频解码装置可以根据参考图片的分辨率与当前图片的分辨率的比率对当前块的运动向量进行缩放，并且然后根据当前块的分辨率对参考图片内的参考块的分辨率进行重采样。如果当前图片的分辨率和参考图片的分辨率相同，则不进行重采样过程，或者可以以设置为“1”的重采样比率对运动向量和参考块进行重采样过程。2)在解码图片的分辨率和输出图片的分辨率彼此不同时当试图输出输出图片以进行显示时，视频解码装置可以确定存储在缓冲器中的解码图片的分辨率和输出图片的分辨率值)是否彼此不同。当解码图片的分辨率和输出图片的分辨率彼此不同时，视频解码装置可以根据解码图片的分辨率和输出图片的分辨率之间的比率对解码图片进行重采样。重采样的解码图片可以作为输出图片输出。在这种情况下，缓冲区中不存在输出图片，并且缓冲区中解码图片的内容不会改变。如果解码图片的分辨率和输出图片的分辨率相同，则可以不进行重采样过程。3)在输出图片的分辨率和参考图片的分辨率彼此不同时当试图输出输出图片以供显示时，视频解码装置可以确定存储在缓冲器中的参考图片的分辨率和输出图片的分辨率是否彼此不同。当参考图片的分辨率和输出图片的分辨率彼此不同时，视频解码装置可以根据参考图片的分辨率和输出图片的分辨率之间的比率对参考图片进行重采样。重采样的参考图片可以作为输出图片输出。在这种情况下，缓冲区中不存在输出图片，并且缓冲区中参考图片的内容不会改变。如果参考图片的分辨率和输出图片的分辨率相同)，则可以不进行重采样过程。4)在当前图片的分辨率和并置图片的分辨率彼此不同时为了获得当前块的暂时MV，视频解码装置参考位于当前图片的并置图片集内的给定位置处的并置块的运动信息。在这种情况下，视频解码装置可以确定包含当前块的当前图片的分辨率是否不同于预测当前块时要参考的并置图片的分辨率。该过程可以是确定在当前块中设置的参考图片的分辨率和并置图片的分辨率是否彼此不同的过程。在当前图片的分辨率和并置图片的分辨率不同时，视频解码装置可以根据并置图片的分辨率与当前图片的分辨率之间的比率对并置块的运动向量进行缩放。如果当前图片的分辨率和并置图片的分辨率相同，则可以不进行重采样过程，或者以设置为“1”的重采样比率对运动向量和参考块执行重采样过程。根据一个实施方式，在当前块的参考图片集的分辨率和并置图片的分辨率彼此不同时，视频解码装置可以根据并置图片的分辨率与参考图片的分辨率之间的比率对并置块的运动向量MV进行缩放。如果参考图片的分辨率和并置图片的分辨率相同，则可以不执行重采样过程，或者可以以设置为“1”的重采样比率执行运动向量和参考块的重采样过程。另外，由于分辨率差异而导致的重采样过程可以与由于poc差异而导致的缩放过程一起执行。用于解释由于poc差异而导致的缩放过程的示例在图17中示出。“curr pic”指示当前图片，“curr block”指示当前块，“col pic”指示并置图片，而“col block”指示并置块。“currRef pic”指示由curr pic中的curr block参考的参考图片，而“colRef pic”指示由col pic中的col block参考的参考图片。currRef pic可以由在AMVP模式的情况下显式地用信号发送的参考图片索引值指定，并且在合并模式的情况下可以是参考图片列表中的第0个参考图片。col pic可以由一个索引值指定，该索引值在切片中显式地用信号发送。指示预测方向的标志也可以与collocated_ref_idx一起用信号发送。例如，如果collocated_from_10_flag的值为“开启”且collocated_ref_idx值为“1”，则可以将列表中的第一参考图片指定为“col pic”。当指定col pic时，可以得到与curr block对应的col block。colblock可以是col pic中的与curr pic中curr block的位置位于相同位置的块。基于colblock的位置，curr block的TMV可以从BR位置处的块或CT位置处的块的运动信息得到。为了得到TMV，可以使用“curr pic”和“currRef pic”之间的poc差异以及“colpic”和“colRef pic”之间的poc差异。在这种情况下，如前所述，当curr pic的分辨率和col pic的分辨率彼此不同时，还可以根据col picture的分辨率和curr picture的分辨率之间的比率执行对BR块或CT块的MV进行重采样的过程。另选地，当curr pic的分辨率和col pic的分辨率彼此不同时，还可以根据col picture的分辨率和currRef picture的分辨率之间的比率执行对BR块或CT块的MV进行重采样的过程。另选地，当currRef pic的分辨率和col pic的分辨率彼此不同时，可以不将TMV添加到候选MV列表中。也就是说，当currRef pic的分辨率和col pic的分辨率彼此不同时，TMV功能可以是“关闭”。根据一个实施方式，在当前图片的分辨率和当前块的参考图片的分辨率彼此不同时，参考参考图片的一些帧间编码/解码方法可以是“关闭”。例如，在当前图片的分辨率和当前块的参考图片的分辨率彼此不同时，DMVR、PROF和BDOF可以是“关闭”。尽管出于例示目的已经描述了本发明的示例性实施方式，但是本领域技术人员将理解，在不背离本发明的理念和范围的情况下可以进行各种修改和变化。因此，为了简洁和清楚起见，已经描述了示例性实施方式。因此，本领域普通技术人员将理解本公开的范围不限于以上明确描述的实施方式，而是包括权利要求和其等同物在内。相关申请的交叉引用本申请要求于2019年6月28日在韩国提交的申请号为10-2019-0078364的专利申请和于2019年11月28日在韩国提交的申请号为10-2019-0155645的专利申请的优先权，所述专利申请在此通过引用整体并入本文中。
