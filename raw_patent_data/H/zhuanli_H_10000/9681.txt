标题title
无刷直流电机反电动势过零点检测方法
摘要abst
本发明公开了一种无刷直流电机反电动势过零点检测方法，通过计时单元同步PWM周期中断，同时ADC模块开始采集无刷直流电机内部A、B、C三相相电压，在PWM‑ON阶段计算出ADC模块采集三相相电压的次数，根据采集次数以及ADC模块采集的两导通相相电压及第三相反电动势，在PWM上升沿或下降沿中比较第三相反电动势与两导通相线电压一半的大小，判断第三相反电动势是否过零点。本发明不仅在PWM‑ON阶段检测第三相反电动势是否过零点，而且还在PWM‑OFF阶段引入反电动势过零预判程序，极好地解决了第三相反电动势过零点发生在PWM‑OFF阶段内无法被检测到的问题，极大地提高了无刷直流电机换相精度，进而提高电机效率及其稳定性。
权利要求书clms
1.一种无刷直流电机反电动势过零点检测方法，其特征在于：用于检测悬空相反电动势过零点，包括如下步骤：S1：计时单元同步PWM周期中断，同时ADC模块开始采集无刷直流电机A、B、C三相相电压，其中，无刷直流电机采用“两相导通三相六状态”方式运行，每个工作状态只有两相导通，第三相为悬空相；S2：进入PWM-ON时间段，所述ADC模块采集两导通相相电压及悬空相反电动势，并存储于存储单元中；S3：在PWM-ON时间段，根据悬空相反电动势处于上升沿阶段或下降沿阶段，通过运算模块比较所述ADC模块采集的最后一次悬空相反电动势与两导通相线电压一半的大小，判断出悬空相反电动势是否过零，若已过零，则进入过零处理程序，完毕后返回S1；若未过零，进入PWM-OFF时间段的反电动势过零预判程序；S4：进入反电动势过零预判程序：以所述PWM-ON时间段内所述ADC模块采集的最后两次悬空相反电动势差值为基准，通过所述运算模块计算出在所述ADC模块在PWM-ON时间段内采集最后一次悬空相反电动势所在的时间点到达悬空相反电动势等于两导通相线电压一半的时间点之间，所述ADC模块需采集三相相电压的次数；S5：通过运算模块比较所述ADC模块需采集三相相电压的次数与所述ADC模块在PWM-OFF时间段预采集三相相电压的次数，判断出悬空相反电动势是否在PWM-OFF阶段中过零，完毕后返回S1。2.根据权利要求1所述的无刷直流电机反电动势过零点检测方法，其特征在于：所述步骤S1中，所述计时单元读取PWM-ON持续时间T1、PWM-OFF持续时间T2及所述ADC模块采集无刷直流电机A、B、C三相相电压的中断周期t；所述步骤S2中，通过所述运算模块调用所述计时单元中的T1数值，以公式“N=T1/t”计算出所述ADC模块在T1时间段内需采集所述三相相电压的次数N；所述步骤S3中，当N=1时，所述ADC模块仅采集一次三相相电压，在所述悬空相反电动势处于上升沿阶段中，若悬空相反电动势大于等于两导通相线电压一半时，则进入过零处理程序，完毕后返回S1，若悬空相反电动势小于两导通相线电压一半时，直接返回S1；在悬空相反电动势处于下降沿阶段中，若悬空相反电动势小于等于两导通相线电压一半时，进入过零处理程序，完毕后返回S1，若悬空相反电动势大于两导通相线电压一半时，直接返回S1；当N≥2时，在所述悬空相反电动势处于上升沿阶段中，当所述ADC模块采集的最后一次悬空相反电动势大于等于两导通相线电压一半时，判断出悬空相反电动势已过零，进入过零处理程序，完毕后返回S1；当所述ADC模块采集的最后一次悬空相反电动势小于两导通相线电压一半时，进入S4；在所述悬空相反电动势处于下降沿阶段中，当所述ADC模块采集的最后一次悬空相反电动势小于等于两导通相线电压一半时，判断出悬空相反电动势已过零，进入过零处理程序，完毕后返回S1；当所述ADC模块采集的最后一次悬空相反电动势大于两导通相线电压一半时，进入S4；所述步骤S4中，通过所述运算模块调用所述计时单元中的T2数值，以公式“P=T2/t”计算出所述ADC模块在T2时间段内预采集三相相电压的次数P，以所述PWM-ON时间段内所述ADC模块采集的最后两次悬空相反电动势差值的绝对值Vt为基准，计算出所述ADC模块在PWM-ON时间段内采集最后一次悬空相反电动势所在的时间点到达悬空相反电动势等于两导通相线电压一半的时间点之间，所述ADC模块需采集三相相电压的次数Q，其中，Q等于所述ADC模块在PWM-ON时间段内采集最后一次悬空相反电动势与两导通相线电压一半差值的绝对值，再除以Vt；所述步骤S5中，当Q＞P时，返回S1；当Q≤P时，判断出悬空相反电动势在PWM-OFF阶段中过零，且得知所述ADC模块在PWM-OFF阶段采集悬空相反电动势在第Q次中断发生反电动势过零，进入过零处理程序，完毕后返回S1。3.根据权利要求2所述的无刷直流电机悬空相反电动势过零点检测方法，其特征在于：该方法基于无刷直流电机反电动势过零点检测电路，此电路包括直流电源、三相逆变器、无刷直流电机及控制器，所述直流电源与所述三相逆变器电连接并用于驱动所述无刷直流电机，所述控制器通过功率驱动模块与所述三相逆变器电连接，用于控制所述无刷直流电机进行换相。4.根据权利要求3所述的无刷直流电机悬空相反电动势过零点检测方法，其特征在于：所述控制器包括所述ADC模块、与所述ADC模块电连接的所述存储单元、与所述存储单元电连接的所述运算模块、与所述运算模块电连接的PWM控制模块及所述计时单元，所述ADC模块与所述三相逆变器电连接，用于采集所述无刷直流电机在一个PWM周期内两导通相相电压及悬空相反电动势，并存储于所述存储单元中；所述运算模块，用于判断所述PWM周期内的悬空相反电动势过零点，并将反电动势过零信号传递至所述PWM控制模块中；所述PWM控制模块电连接于所述功率驱动模块，用于控制所述三相逆变器的开关管通断以驱动无刷直流电机运行；所述计时单元电连接于所述PWM控制模块及所述ADC模块，用于读取所述PWM控制模块中的PWM波占空比数据，并记下PWM-ON持续时间T1，PWM-OFF持续时间T2，并用于控制所述ADC模块采集三相相电压时中断周期t。5.根据权利要求4所述的无刷直流电机悬空相反电动势过零点检测方法，其特征在于：所述ADC模块通过电压采样电路与所述三相逆变器电连接，所述三相逆变器包括上桥开关管Q1～Q3、下桥开关管Q4～Q6，所述上桥开关管Q1～Q3漏极均电连接于直流电源正极，所述下桥开关管Q4～Q6源极均电连接于直流电源负极，所述上桥开关管Q1源极电连接于A相，所述上桥开关管Q2源极电连接于B相，所述上桥开关管Q3源极电连接于C相，所述上桥开关管Q1～Q3、下桥开关管Q4～Q6的栅极均电连接于功率驱动模块；所述电压采样电路包括分压电阻R1～ R6，所述分压电阻R1与所述分压电阻R2串联，且所述分压电阻R1上端电连接于所述开关管Q1源极与所述A相之间，所述分压电阻R2下端接地；所述分压电阻R3与所述分压电阻R4串联，且所述分压电阻R3上端电连接于所述开关管Q2源极与所述B相之间，所述分压电阻R4下端接地；所述分压电阻R5与所述分压电阻R6串联，且所述分压电阻R5上端电连接于所述开关管Q3源极与所述C相之间，所述分压电阻R6下端接地；所述分压电阻R1与R2之间、R3与R4之间、R5与R6之间均电连接于所述ADC模块。6.根据权利要求5所述的无刷直流电机悬空相反电动势过零点检测方法，其特征在于：所述ADC模块通过采集所述A相、B相及C相经过分压电阻R1～R6分压后的相电压UaN、UbN及UcN，计算出所述A相、B相及C相的实际相电压UAN、UBN、UCN存储于存储单元中，所述两导通相线电压的一半为：∣UAN-UBN∣/2或∣UAN-UCN∣/2或∣UBN-UCN∣/2。7.根据权利要求1所述的无刷直流电机悬空相反电动势过零点检测方法，其特征在于：所述同步PWM周期中断为PWM波每次均以高电平状态启动，即以PWM-ON状态开启所述ADC模块采集两导通相相电压及悬空相反电动势，所述PWM波每次开启时，步骤S1～S5中所有数据重置清零。8.根据权利要求1或2所述的无刷直流电机悬空相反电动势过零点检测方法，其特征在于：所述过零处理程序为所述无刷直流电机A相、B相、C相三相进行换相操作，即在所述运算模块检测到悬空相反电动势过零点后，根据换相点滞后过零点30°电角度，所述计时单元设置对应的延迟时间，当延迟时间到达后，电机换相进入下一个工作状态。9.根据权利要求2所述的无刷直流电机反电动势过零点检测方法，其特征在于：所述控制器采用MCU控制器。10.根据权利要求2所述的无刷直流电机反电动势过零点检测方法，其特征在于：所述中断周期t为等时间间隔。
说明书desc
【技术领域】本发明涉及无刷电机领域，尤其涉及一种无刷直流电机反电动势过零点检测方法。【背景技术】在无刷直流电机无传感器驱动控制技术领域中，无刷直流电机的运行过程可包括转子预定位阶段、低速运行阶段和中高速运行阶段。现有技术中，一般通过检测悬空相反电动势是否过零，来进行换相操作：采用ADC模块在每个PWM控制周期采样一次无刷直流电机悬空相的相电压，然后将采样结果与参考电压进行比较判断是否发生过零。由于反电动势在PWM-ON中明显存在，ADC模块只在PWM-ON阶段中采集，一旦反电动势真实过零点发生在PWM-OFF时，会发生过零点时间判断的滞后，尤其是在无刷直流电机高速运行过程中，一个换相间隔内的PWM周期的个数较少，反电势过零检测滞后可能会导致无刷直流电机换相滞后，极易引起电机效率的降低甚至造成电机失步后异常停机。因此，有必要设计一种无刷直流电机反电动势过零点检测方法，以解决上述问题。【发明内容】针对现有技术的不足，本发明的目的在于提供一种无刷直流电机反电动势过零点检测方法，用于检测悬空相反电动势过零点。为实现上述目的，本发明采用如下技术方案：一种无刷直流电机反电动势过零点检测方法，用于检测悬空相反电动势过零点，包括如下步骤：S1：计时单元同步PWM周期中断，同时ADC模块开始采集无刷直流电机内部A、B、C三相相电压，其中，无刷直流电机采用“两相导通三相六状态”方式运行，每个工作状态只有两相导通，第三相处于悬空状态；S2：进入PWM-ON时间段，所述ADC模块采集两导通相相电压及悬空相反电动势，并存储于存储单元中；S3：在PWM-ON时间段，根据悬空相反电动势处于上升沿阶段或下降沿阶段，通过运算模块比较所述ADC模块采集的最后一次悬空相反电动势与两导通相线电压一半的大小，判断出悬空相反电动势是否过零，若已过零，则进入过零处理程序，完毕后返回S1；若未过零，进入PWM-OFF时间段的反电动势过零预判程序；S4：进入反电动势过零预判程序：以所述PWM-ON时间段内所述ADC模块采集的最后两次悬空相反电动势差值为基准，通过所述运算模块计算出：在所述ADC模块在PWM-ON时间段内采集最后一次悬空相反电动势所在的时间点到达悬空相反电动势等于两导通相线电压一半的时间点之间，所述ADC模块需采集三相相电压的次数；S5：通过运算模块比较所述ADC模块需采集三相相电压的次数与所述ADC模块在PWM-OFF时间段预采集三相相电压的次数，判断出悬空相反电动势是否在PWM-OFF阶段中过零，完毕后返回S1。进一步地，所述步骤S1中，所述计时单元读取PWM-ON持续时间T1、PWM-OFF持续时间T2及所述ADC模块采集无刷直流电机A、B、C三相相电压的中断周期t；所述步骤S2中，通过所述运算模块调用所述计时单元中的T1数值，以公式“N=T1/t”计算出所述ADC模块在T1时间段内需采集所述三相相电压的次数N；所述步骤S3中，当N=1时，所述ADC模块仅采集一次三相相电压，在所述悬空相反电动势处于上升沿阶段中，若悬空相反电动势大于等于两导通相线电压一半时，则进入过零处理程序，完毕后返回S1，若悬空相反电动势小于两导通相线电压一半时，直接返回S1；在悬空相反电动势处于下降沿阶段中，若悬空相反电动势小于等于两导通相线电压一半时，进入过零处理程序，完毕后返回S1，若悬空相反电动势大于两导通相线电压一半时，直接返回S1；当N≥2时，在所述悬空相反电动势处于上升沿阶段中，当所述ADC模块采集的最后一次悬空相反电动势大于等于两导通相线电压一半时，判断出悬空相反电动势已过零，进入过零处理程序，完毕后返回S1；当所述ADC模块采集的最后一次悬空相反电动势小于两导通相线电压一半时，进入S4；在所述悬空相反电动势处于下降沿阶段中，当所述ADC模块采集的最后一次悬空相反电动势小于等于两导通相线电压一半时，判断出悬空相反电动势已过零，进入过零处理程序，完毕后返回S1；当所述ADC模块采集的最后一次悬空相反电动势大于两导通相线电压一半时，进入S4；所述步骤S4中，通过所述运算模块调用所述计时单元中的T2数值，以公式“P=T2/t”计算出所述ADC模块在T2时间段内预采集三相相电压的次数P，以所述PWM-ON时间段内所述ADC模块采集的最后两次悬空相反电动势差值的绝对值Vt为基准，计算出所述ADC模块在PWM-ON时间段内采集最后一次悬空相反电动势所在的时间点到达悬空相反电动势等于两导通相线电压一半的时间点之间，所述ADC模块需采集三相相电压的次数Q，其中，Q等于所述ADC模块在PWM-ON时间段内采集最后一次悬空相反电动势与两导通相线电压一半差值的绝对值，再除以Vt；所述步骤S5中，当Q＞P时，返回S1；当Q≤P时，判断出悬空相反电动势在PWM-OFF阶段中过零，且得知所述ADC模块在PWM-OFF阶段采集悬空相反电动势在第Q次中断发生反电动势过零，进入过零处理程序，完毕后返回S1。进一步地，该方法基于无刷直流电机反电动势过零点检测电路，此电路包括直流电源、三相逆变器、无刷直流电机及控制器，所述直流电源与所述三相逆变器电连接并用于驱动所述无刷直流电机，所述控制器通过功率驱动模块与所述三相逆变器电连接，用于控制所述无刷直流电机进行换相。进一步地，所述控制器包括所述ADC模块、与所述ADC模块电连接的所述存储单元、与所述存储单元电连接的所述运算模块、与所述运算模块电连接的PWM控制模块及所述计时单元，所述ADC模块与所述三相逆变器电连接，用于采集所述无刷直流电机在一个PWM周期内两导通相相电压及悬空相反电动势，并存储于所述存储单元中；所述运算模块，用于判断所述PWM周期内的悬空相反电动势过零点，并将反电动势过零信号传递至所述PWM控制模块中；所述PWM控制模块电连接于所述功率驱动模块，用于控制所述三相逆变器的开关管通断以驱动无刷直流电机运行；所述计时单元电连接于所述PWM控制模块及所述ADC模块，用于读取所述PWM控制模块中的PWM波占空比数据，并记下PWM-ON持续时间T1，PWM-OFF持续时间T2，并用于控制所述ADC模块采集三相相电压时中断周期t。进一步地，所述ADC模块通过电压采样电路与所述三相逆变器电连接，所述三相逆变器包括上桥开关管Q1～Q3、下桥开关管Q4～Q6，所述上桥开关管Q1～Q3漏极均电连接于直流电源正极，所述下桥开关管Q4～Q6源极均电连接于直流电源负极，所述上桥开关管Q1源极电连接于A相，所述上桥开关管Q2源极电连接于B相，所述上桥开关管Q3源极电连接于C相，所述上桥开关管Q1～Q3、下桥开关管Q4～Q6的栅极均电连接于功率驱动模块；所述电压采样电路包括分压电阻R1～ R6，所述分压电阻R1与所述分压电阻R2串联，且所述分压电阻R1上端电连接于所述开关管Q1源极与所述A相之间，所述分压电阻R2下端接地；所述分压电阻R3与所述分压电阻R4串联，且所述分压电阻R3上端电连接于所述开关管Q2源极与所述B相之间，所述分压电阻R4下端接地；所述分压电阻R5与所述分压电阻R6串联，且所述分压电阻R5上端电连接于所述开关管Q3源极与所述C相之间，所述分压电阻R6下端接地；所述分压电阻R1与R2之间、R3与R4之间、R5与R6之间均电连接于所述ADC模块。进一步地，所述ADC模块通过采集所述A相、B相及C相经过分压电阻R1～R6分压后的相电压UaN、UbN及UcN，计算出所述A相、B相及C相的实际相电压UAN、UBN、UCN存储于存储单元中，所述两导通相线电压的一半为：∣UAN-UBN∣/2或∣UAN-UCN∣/2或∣UBN-UCN∣/2。进一步地，所述同步PWM周期中断为PWM波每次均以高电平状态启动，即以PWM-ON状态开启所述ADC模块采集两导通相相电压及悬空相反电动势，所述PWM波每次开启时，步骤S1～S5中所有数据重置清零。进一步地，所述过零处理程序为所述无刷直流电机A相、B相、C相三相进行换相操作，即在所述运算模块检测到悬空相反电动势过零点后，根据换相点滞后过零点30°电角度，所述计时单元设置对应的延迟时间，当延迟时间到达后，电机换相进入下一个工作状态。优选地，所述控制器采用MCU控制器。优选地，所述中断周期t为等时间间隔。与现有技术相比，本发明具有如下有益效果：本发明改变常规无刷直流电机反电动势过零检测方式，不仅在PWM-ON阶段检测悬空相反电动势是否过零点，而且还在PWM-OFF阶段引入反电动势过零预判程序判断出悬空相反电动势是否在PWM-OFF阶段过零，极好地解决了悬空相反电动势过零点发生在PWM-OFF阶段内无法被检测到的问题，极大地提高了无刷直流电机换相精度，进而提高电机效率的稳定性，不易造成电机失步而异常停机。【附图说明】下面结合附图对本发明的具体实施方式做进一步详细的说明：图1是本发明无刷直流电机悬空相反电动势过零点检测电路图；图2为本发明无刷直流电机悬空相反电动势过零点检测流程图；图3为本发明无刷直流电机悬空相反电动势预判程序流程图；图4是本发明无刷直流电机悬空相C相反电动势过零点位于上升沿且在PWM-ON阶段的周期相电压波形图；图5是本发明无刷直流电机悬空相C相反电动势过零点位于下降沿且在PWM-ON阶段的周期端电压波形图；图6是本发明无刷直流电机悬空相C相反电动势过零点位于上升沿且在PWM-OFF阶段的周期端电压波形图；图7是本发明无刷直流电机悬空相C相反电动势过零点位于下降沿且在PWM-OFF阶段的周期端电压波形图；图8是本发明图6中 ADC模块采集无刷直流电机三相相电压局部放大图；图中附图标记的含义：1、控制器 2、计时单元 3、运算模块 4、ADC模块 5、存储单元 6、直流电源 7、三相逆变器 8、无刷直流电机 9、功率驱动模块 10、PWM控制模块 11、电压采样电路【具体实施方式】下面结合附图和实施方式对本发明作进一步详细说明。在本发明中使用的术语是仅仅出于描述特定实施例的目的，而非旨在限制本发明。例如下述的“上”、“下”等指示方位或位置关系的词语仅基于附图所示的方位或位置关系，仅为了便于描述本发明和简化描述，而不是指示或暗示所指的电子元件必须具有特定的方位或以特定的方位构造和操作，因此不能理解为对本发明的限制。如图1至图3所示一种无刷直流电机反电动势过零点检测方法，用于检测悬空相反电动势过零点，包括如下步骤：S1：计时单元22同步PWM周期中断，同时ADC模块4开始采集无刷直流电机8内部A、B、C三相相电压，其中，无刷直流电机采用“两相导通三相六状态”方式运行，每个工作状态只有两相导通，第三相为悬空相；S2：进入PWM-ON时间段，所述ADC模块4采集两导通相相电压及悬空相反电动势，并存储于存储单元5中；S3：在PWM-ON时间段，根据悬空相反电动势处于上升沿阶段或下降沿阶段，通过运算模块3比较所述ADC模块4采集的最后一次悬空相反电动势与两导通相线电压一半的大小，判断出悬空相反电动势是否过零，若已过零，则进入过零处理程序，完毕后返回S1；若未过零，进入PWM-OFF时间段的反电动势过零预判程序；S4：进入反电动势过零预判程序：以所述PWM-ON时间段内所述ADC模块4采集的最后两次悬空相反电动势差值为基准，通过所述运算模块3计算出：在所述ADC模块4在PWM-ON时间段内采集最后一次悬空相反电动势所在的时间点到达悬空相反电动势等于两导通相线电压一半的时间点之间，所述ADC模块4需采集三相相电压的次数；S5：通过运算模块3比较所述ADC模块4需采集三相相电压的次数与所述ADC模块4在PWM-OFF时间段预采集三相相电压的次数，判断出悬空相反电动势是否在PWM-OFF阶段中过零，完毕后返回S1。其中，在所述步骤S1中，所述计时单元2读取PWM-ON持续时间T1、PWM-OFF持续时间T2及所述ADC模块4采集无刷直流电机8内部A、B、C三相相电压的中断周期t；在所述步骤S2中，通过所述运算模块3调用所述计时单元2中的T1数值，以公式“N=T1/t”计算出所述ADC模块4在T1时间段内需采集所述三相相电压的次数N；在所述步骤S3中，当N=1时，所述ADC模块4仅采集一次三相相电压，在所述悬空相反电动势处于上升沿阶段中，若悬空相反电动势大于等于两导通相线电压一半时，则进入过零处理程序，完毕后返回S1，若悬空相反电动势小于两导通相线电压一半时，直接返回S1；在悬空相反电动势处于下降沿阶段中，若悬空相反电动势小于等于两导通相线电压一半时，进入过零处理程序，完毕后返回S1，若悬空相反电动势大于两导通相线电压一半时，直接返回S1；当N≥2时，在所述悬空相反电动势处于上升沿阶段中，当所述ADC模块4采集的最后一次悬空相反电动势大于等于两导通相线电压一半时，判断出悬空相反电动势已过零，进入过零处理程序，完毕后返回S1；当所述ADC模块4采集的最后一次悬空相反电动势小于两导通相线电压一半时，进入S4；在所述悬空相反电动势处于下降沿阶段中，当所述ADC模块4采集的最后一次悬空相反电动势小于等于两导通相线电压一半时，判断出悬空相反电动势已过零，进入过零处理程序，完毕后返回S1；当所述ADC模块4采集的最后一次悬空相反电动势大于两导通相线电压一半时，进入S4；在所述步骤S4中，通过所述运算模块3调用所述计时单元2中的T2数值，以公式“P=T2/t”计算出所述ADC模块4在T2时间段内预采集三相相电压的次数P，以所述PWM-ON时间段内所述ADC模块4采集的最后两次悬空相反电动势差值的绝对值Vt为基准，计算出所述ADC模块4在PWM-ON时间段内采集最后一次悬空相反电动势所在的时间点到达悬空相反电动势等于两导通相线电压一半的时间点之间，所述ADC模块4需采集三相相电压的次数Q，其中，Q等于所述ADC模块4在PWM-ON时间段内采集最后一次悬空相反电动势与两导通相线电压一半差值的绝对值，再除以Vt；在所述步骤S5中，当Q＞P时，返回S1；当Q≤P时，判断出悬空相反电动势在PWM-OFF阶段中过零，且得知所述ADC模块4在PWM-OFF阶段采集悬空相反电动势在第Q次中断发生反电动势过零，进入过零处理程序，完毕后返回S1。以上S1～S5的检测方法基于无刷直流电机8反电动势过零点检测电路，此电路包括直流电源6、三相逆变器7、无刷直流电机8及控制器1，所述直流电源6与所述三相逆变器7电连接并用于驱动所述无刷直流电机8，所述控制器1通过功率驱动模块9与所述三相逆变器7电连接，用于控制所述无刷直流电机8进行换相。所述控制器1包括所述ADC模块4、与所述ADC模块4电连接的所述存储单元5、与所述存储单元5电连接的所述运算模块3、与所述运算模块3电连接的PWM控制模块10及所述计时单元2，所述ADC模块4与所述三相逆变器7电连接，用于采集所述无刷直流电机8在一个PWM周期内两导通相相电压及悬空相反电动势，并存储于所述存储单元5中；所述运算模块3，用于判断所述PWM周期内的悬空相反电动势过零点，并将反电动势过零信号传递至所述PWM控制模块10中；所述PWM控制模块10电连接于所述功率驱动模块9，用于控制所述三相逆变器7的开关管通断以驱动无刷直流电机8运行；所述计时单元2电连接于所述PWM控制模块10及所述ADC模块4，用于读取所述PWM控制模块10中的PWM波占空比数据，并记下PWM-ON持续时间T1，PWM-OFF持续时间T2，并用于控制所述ADC模块4采集三相相电压时中断周期t。所述ADC模块4通过电压采样电路11与所述三相逆变器7电连接，所述三相逆变器7包括上桥开关管Q1～Q3、下桥开关管Q4～Q6，所述上桥开关管Q1～Q3漏极均电连接于直流电源6正极，所述下桥开关管Q4～Q6源极均电连接于直流电源6负极，所述上桥开关管Q1源极电连接于A相，所述上桥开关管Q2源极电连接于B相，所述上桥开关管Q3源极电连接于C相，所述上桥开关管Q1～Q3、下桥开关管Q4～Q6的栅极均电连接于功率驱动模块9；所述电压采样电路11包括分压电阻R1～ R6，所述分压电阻R1与所述分压电阻R2串联，且所述分压电阻R1上端电连接于所述开关管Q1源极与所述A相之间，所述分压电阻R2下端接地；所述分压电阻R3与所述分压电阻R4串联，且所述分压电阻R3上端电连接于所述开关管Q2源极与所述B相之间，所述分压电阻R4下端接地；所述分压电阻R5与所述分压电阻R6串联，且所述分压电阻R5上端电连接于所述开关管Q3源极与所述C相之间，所述分压电阻R6下端接地；所述分压电阻R1与R2之间、R3与R4之间、R5与R6之间均电连接于所述ADC模块4。所述ADC模块4通过采集所述A相、B相及C相经过分压电阻R1～R6分压后的相电压UaN、UbN及UcN，计算出所述A相、B相及C相的实际相电压UAN、UBN、UCN存储于存储单元5中，其中UAN=UaN*/R2、UBN=UbN*/R2、UCN= UcN*/R2，所述两导通相线电压的一半为：∣UAN-UBN∣/2或∣UAN-UCN∣/2或∣UBN-UCN∣/2。所述同步PWM周期中断为PWM波每次均以高电平状态启动，即以PWM-ON状态开启所述ADC模块4采集两导通相相电压及悬空相反电动势，所述PWM波每次开启时，步骤S1～S5中所有数据重置清零。所述过零处理程序为所述无刷直流电机8A相、B相、C相三相进行换相操作，即在所述运算模块3检测到悬空相反电动势过零点后，根据换相点滞后过零点30°电角度，所述计时单元2设置对应的延迟时间，当延迟时间到达后，电机换相进入下一个工作状态，所述控制器1采用MCU控制器1。本发明的工作原理：C相反电动势过零点在PWM-ON阶段1、C相反电动势处于上升沿阶段中设PWM-ON持续时间50us、PWM-OFF持续时间50us及ADC模块4采集电机内部A、B、C三相相电压的中断周期10us；在PWM-ON阶段，计算出所述ADC模块4在50us时间段内采集三相相电压的次数N=T1/t=5次；所述ADC模块4在PWM-ON阶段采集三次三相相电压，所述存储单元5存储所述ADC模块4采集第四次与第五次C相反电动势及第五次A相相电压与B相相电压，记为UA5=56V、UB5=2V、UC4=30V及UC5=32V，则AB导通相线电压一半为/2=27V；由UC4=19V、UC5=21V判断出C相反电动势处于上升沿阶段中，又由于UC5＞/2，判断出C相反电动势已过零，直接进入过零处理程序，完毕后返回S1。2、C相反电动势处于下降沿阶段中设PWM-ON持续时间50us、PWM-OFF持续时间50us及ADC模块4采集电机内部A、B、C三相相电压的中断周期10us；在PWM-ON阶段，计算出所述ADC模块4在50us时间段内预采集三相相电压的次数N =T1/t=5次；所述ADC模块4在PWM-ON阶段采集三次三相相电压，所述存储单元5存储所述ADC模块4采集第四次与第五次C相反电动势及第五次A相相电压与B相相电压，记为UA5=56V、UB5=2V、UC4=26V及UC5=24V，则AB导通相线电压一半为/2=27V；由UC4=26V、UC5=24V判断出C相反电动势处于下降沿阶段中，又由于UC5＜/2，判断出C相反电动势已过零，直接进入过零处理程序，完毕后返回S1。C相反电动势过零点在PWM-OFF阶段1、C相反电动势处于上升沿阶段中设PWM-ON持续时间40us、PWM-OFF持续时间60us及ADC模块采集电机内部A、B、C三相相电压的中断周期10us；在PWM-ON阶段，计算出所述ADC模块4在40us时间段内预采集三相相电压的次数N =T1/t=4次；所述ADC模块4在PWM-ON阶段采集三次三相相电压，所述存储单元5存储所述ADC模块4采集第三次与第四次C相反电动势及第四次A相相电压与B相相电压，记为UA4=56V、UB4=2V、UC3=19V及UC4=21V，则AB导通相线电压一半为/2=27V；由UC3=19V、UC4=21V判断出C相反电动势处于上升沿阶段中，又由UC4＜/2时，进入PWM-OFF时间段T2的反电动势过零预判程序；进入反电动势过零预判程序：计算出所述ADC模块4在T2时间段内预采集电压的次数P=T2/t=6次；以所述PWM-ON时间段T1内所述ADC模块4采集的最后两次C相反电动势差值Vt=UC4-UC3=2V为基准，计算出所述ADC模块4采集UC4所在的时间点距离到达AB导通相线电压一半/2=27V时的所述ADC模块4预采集三相相电压的次数Q=/2-UC4）/Vt=3次；由于Q＜P，则判断出C相反电动势在PWM-OFF阶段中过零，且得知所述ADC模块4在PWM-OFF阶段采集C相反电动势第3次中断发生反电动势过零，在第3次中断时间点进入过零处理程序，完毕后返回S1；若在PWM-OFF阶段未引入反电动势过零预判程序，则反电动势过零点的判断将滞后一个PWM-OFF的时间，即在下一个PWM周期中断同步时，在PWM波起始点H才能检测到。2、C相反电动势处于下降沿阶段中设PWM-ON持续时间40us、PWM-OFF持续时间60us及ADC模块采集电机内部A、B、C三相相电压的中断周期10us；在PWM-ON阶段，计算出所述ADC模块4在40us时间段内预采集三相相电压的次数N =T1/t=4次；所述ADC模块4在PWM-ON阶段采集三次三相相电压，所述存储单元5存储所述ADC模块4采集第三次与第四次C相反电动势及第四次A相相电压与B相相电压，记为UA4=56V、UB4=2V、UC3=35V及UC4=33V，则AB导通相线电压一半为/2=27V；由UC3=35V、UC4=33V判断出C相反电动势处于下降沿阶段中，由于 UC4＞/2时，进入PWM-OFF时间段T2的反电动势过零预判程序；进入反电动势过零预判程序：计算出所述ADC模块4在T2时间段内预采集三相相电压的次数P=T2/t=6次；以所述PWM-ON时间段T1内所述ADC模块4采集的最后两次C相反电动势差值Vt=UC3-UC4=2V为基准，计算出所述ADC模块4采集UC4所在的时间点距离到达AB导通相线电压一半/2=27V时的所述ADC模块4预采集三相电压的次数Q=/2）/Vt=3次；由于Q＜P，则判断出C相反电动势在PWM-OFF阶段中过零，且得知所述ADC模块4在PWM-OFF阶段采集C相反电动势第3次中断发生反电动势过零，在第3次中断时间点进入过零处理程序，完毕后返回S1；若在PWM-OFF阶段未引入反电动势过零预判程序，则反电动势过零点的判断将滞后一个PWM-OFF的时间，即在下一个PWM周期中断同步时，在PWM波起始点L才能检测到。除此之外，接下来的BA相导通、C相悬空或AC相导通、B相悬空或CA相导通、B相悬空或BC相导通、A相悬空或CB相导通、A相悬空的检测方法均按照S1～S5的步骤进行检测。综上所述，本发明改变常规无刷直流电机反电动势过零检测方式，不仅在PWM-ON阶段检测悬空相反电动势是否过零点，而且还在PWM-OFF阶段引入反电动势过零预判程序：以所述PWM-ON时间段内所述ADC模块4采集的最后两次悬空相反电动势差值的绝对值Vt为基准，计算出所述ADC模块4在PWM-ON时间段内采集最后一次悬空相反电动势所在的时间点到达悬空相反电动势等于两导通相线电压一半的时间点之间，所述ADC模块4需采集三相相电压的次数，再与ADC模块4在PWM-OFF阶段内预采集三相相电压的次数作比较，判断出悬空相反电动势是否在PWM-OFF阶段过零，极好地解决了悬空相反电动势过零点发生在PWM-OFF阶段内无法被检测到的问题，极大地提高了无刷直流电机换相精度，进而提高电机效率的稳定性，不易造成电机失步而异常停机。本发明不局限于上述具体实施方式，本领域普通技术人员可以很容易地理解到，在不脱离本发明原理和范畴的前提下，本发明的无刷直流电机反电动势过零点检测方法还有其他很多的替代方案，本发明的保护范围以权利要求书的内容为准。
