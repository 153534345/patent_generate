标题title
一种应用于监管场景的分布式数据存储方法及解密方法
摘要abst
本发明涉及一种数据存储与解密方法，属于信息处理技术领域，具体是涉及一种应用于监管场景的分布式数据存储方法及解密方法。包括：终端设备将监控视频数据分割成N份切片数据；使用私钥e对所述切片数据进行计算，生成加密数据集合Pn；将所述加密数据集合Pn的元素分布式存储于分布式系统的不同节点中；基于所述加密数据集合Pn生成与所述加密数据集合Pn对应的哈希值Hn；构建分布式哈希表，将哈希表上传到区块链系统。因此，相对于现有技术，本发明的优点是：可以有效解决可信监管与视频防泄露问题，并且实现简单，可靠性高。
权利要求书clms
1.一种应用于监管场景的分布式数据存储方法，其特征在于，包括：终端设备将监控视频数据分割成N份切片数据；使用私钥e对所述切片数据进行计算，生成加密数据集合Pn；将所述加密数据集合Pn的元素分布式存储于分布式系统的不同节点中；基于所述加密数据集合Pn生成与所述加密数据集合Pn对应的哈希值Hn；构建分布式哈希表，将哈希表上传到区块链系统。2.根据权利要求1所述的一种应用于监管场景的分布式数据存储方法，其特征在于，包括：通过SM2算法生成公钥E与私钥e。3.根据权利要求1所述的一种应用于监管场景的分布式数据存储方法，其特征在于，根据私钥e采用SM4算法对切片数据分别进行计算，生成加密数据Pi。4.根据权利要求1所述的一种应用于监管场景的分布式数据存储方法，其特征在于，采用纠删码算法根据预设的m个冗余值将加密数据Pn存储在分布式系统中的k+m个节点中的一个上，其中，K为分布式节点数量，m为分布式冗余节点数量。5.根据权利要求1所述的一种应用于监管场景的分布式数据存储方法，其特征在于，所述构建分布式哈希表，将哈希表上传到区块链系统包括：使用SM3算法，对Pn进行计算生成对应哈希值Hi；使用SM4算法基于私钥e对切片数据进行计算，生成加密数据Pi；以Hi和Pi为键值对生成哈希表；构建分布式哈希表，其中，key为Hi，值为Pi。6.一种应用于监管场景的分布式数据解密方法，其特征在于，将监控视频数据分割成N份切片数据后使用私钥e生成加密数据集合Pn；将所述加密数据集合Pn的元素分布式存储于分布式系统的不同节点中；基于所述加密数据集合Pn生成与所述加密数据集合Pn对应的哈希值Hn；构建分布式哈希表，将哈希表上传到区块链系统；在播放时，从区块链系统拿到分布式哈希表，并通过SM4算法以及预先获得的私钥对分布式哈希表进行解密得到解密后的切片数据。7.根据权利要求6所述的一种应用于监管场景的分布式数据解密方法，其特征在于，所述私钥通过SM2算法生成，并且视频请求方通过智能合约系统从被监控方获得私钥。
说明书desc
技术领域本发明涉及一种数据存储与解密方法，属于信息处理技术领域，具体是涉及一种应用于监管场景的分布式数据存储方法及解密方法。背景技术在安全生产监督管理场景下，监管部门需要对企业涉及安全隐患及重点部位进行视频监控，而这种监控与企业关于自身流程工艺的企业机密在视频安全防泄漏方面的存在一定冲突，如何解决可信监管与视频防泄露问题，是当前迫切需要解决的技术问题。发明内容以下给出一个或多个方面的简要概述以提供对这些方面的基本理解。此概述不是所有构想到的方面的详尽综览，并且既非旨在指认出所有方面的关键性或决定性要素亦非试图界定任何或所有方面的范围。其唯一的目的是要以简化形式给出一个或多个方面的一些概念以为稍后给出的更加详细的描述之序。本发明主要的目的是解决现有技术中所存在的上述的技术问题，提供了一种应用于监管场景的分布式数据存储方法及解密方法。该系统及方法能够有效解决可信监管与视频防泄露问题。为解决上述问题，本发明的方案是：一种应用于监管场景的分布式数据存储方法，包括：终端设备将监控视频数据分割成N份切片数据；使用私钥e对所述切片数据进行计算，生成加密数据集合Pn；将所述加密数据集合Pn的元素分布式存储于分布式系统的不同节点中；基于所述加密数据集合Pn生成与所述加密数据集合Pn对应的哈希值Hn；构建分布式哈希表，将哈希表上传到区块链系统。优选的，上述的一种应用于监管场景的分布式数据存储方法，包括：通过SM2算法生成公钥E与私钥e。优选的，上述的一种应用于监管场景的分布式数据存储方法，根据私钥e采用SM4算法对切片数据分别进行计算，生成加密数据Pi。优选的，上述的一种应用于监管场景的分布式数据存储方法，采用纠删码算法根据预设的m个冗余值将加密数据Pn存储在分布式系统中的k+m个节点中的一个上，其中，K为分布式节点数量，m为分布式冗余节点数量。优选的，上述的一种应用于监管场景的分布式数据存储方法，所述构建分布式哈希表，将哈希表上传到区块链系统包括：使用SM3算法，对Pn进行计算生成对应哈希值Hi；使用SM4算法基于私钥e对切片数据进行计算，生成加密数据Pi；以Hi和Pi为键值对生成哈希表；构建分布式哈希表，其中，key为Hi，值为Pi。一种应用于监管场景的分布式数据解密方法，将监控视频数据分割成N份切片数据后使用私钥e生成加密数据集合Pn；将所述加密数据集合Pn的元素分布式存储于分布式系统的不同节点中；基于所述加密数据集合Pn生成与所述加密数据集合Pn对应的哈希值Hn；构建分布式哈希表，将哈希表上传到区块链系统；在播放时，从区块链系统拿到分布式哈希表，并通过SM4算法以及预先获得的私钥对分布式哈希表进行解密得到解密后的切片数据。优选的，上述的一种应用于监管场景的分布式数据解密方法，所述私钥通过SM2算法生成，并且视频请求方通过智能合约系统从被监控方获得私钥。因此，相对于现有技术，本发明的优点是：可以有效解决可信监管与视频防泄露问题，并且实现简单，可靠性高。附图说明并入本文并形成说明书的一部分的附图例示了本发明的实施例，并且附图与说明书一起进一步用于解释本发明的原理以及使得所属领域技术人员能够制作和使用本公开。图1例示了本发明实施例中的流程图；将参照附图描述本发明的实施例。具体实施方式本实施例提供了一种应用于监管场景的分布式数据存储方法，包括：终端设备将监控视频数据分割成N份切片数据；使用私钥e对所述切片数据进行计算，生成加密数据集合Pn；将所述加密数据集合Pn的元素分布式存储于分布式系统的不同节点中；基于所述加密数据集合Pn生成与所述加密数据集合Pn对应的哈希值Hn；构建分布式哈希表，将哈希表上传到区块链系统；其中，构建分布式哈希表，将哈希表上传到区块链系统包括：使用SM3算法，对Pn进行计算生成对应哈希值Hi；使用SM4算法基于私钥e对切片数据进行计算，生成加密数据Pi；以Hi和Pi为键值对生成哈希表；构建分布式哈希表，其中，key为Hi，值为Pi。本实施例中，通过SM2算法生成公钥E与私钥e，根据私钥e采用SM4算法对切片数据分别进行计算，生成加密数据Pi。本实施例中，采用纠删码算法根据预设的m个冗余值将加密数据Pn存储在分布式系统中的k+m个节点中的一个上，其中，K为分布式节点数量，m为分布式冗余节点数量。本实施例还提供了一种应用于监管场景的分布式数据解密方法，包括：将监控视频数据分割成N份切片数据后使用私钥e生成加密数据集合Pn；将所述加密数据集合Pn的元素分布式存储于分布式系统的不同节点中；基于所述加密数据集合Pn生成与所述加密数据集合Pn对应的哈希值Hn；构建分布式哈希表，将哈希表上传到区块链系统；在播放时，从区块链系统拿到分布式哈希表，并通过SM4算法以及预先获得的私钥对分布式哈希表进行解密得到解密后的切片数据。其中，所述私钥通过SM2算法生成，并且视频请求方通过智能合约系统从被监控方获得私钥。下面结合附图1对本实施进一步的说明。如图1所示，本发明实施例所提供的一种应用于监管场景的分布式数据存储方法，包括以下步骤：S1:终端设备根据SM2算法生成公钥E与私钥e；SM2作为非对称算法在本实施例中用于生成公私钥对；在本实施例中，作为优选方式，可以选择SM3算法作为杂凑算法计算哈希，采用SM4处法作对称加密。S2：当出现预警信息时，采集终端设备对监控视频数据根据256KB切片成N份；S3，根据私钥e用SM4算法对切片数据进行计算生成Pi，N个切片数据加密后生成的加密数据构成加密数据集合Pn；S4，分布式系统根据冗余值m与纠删码算法f将加密数据集合Pn分布式存储在k+m个节点上，目的是单个节点没有完整数据；其中，k为分布式节点个数；m默认值为3，可根据安全要求进行配置。S5，使用SM3算法，基于集合Pn进行计算生成对应哈希值集合Hn；S6，构建分布式哈希表，key为Hi，Value是Pi，总数为n，将哈希表上传到区块链系统；其中，哈希表的总数n即为切片数量N，Hi是将单个切片通过SM3计算得到的哈希值，Pi即为切片经SM4加密后的数据，也即加密数据集合Pn的一个元素，哈希表以Key-Value键值对存储，类似于Map存储结构。其中，i＜＝n。S7，监管端发起数据访问时，从区块链系统拿到分布式哈希表，由于Pn被加密，监管端无法进行数据解密；S8,通过智能合约等待被监管端提供采集设备私钥，私钥上传后通过SM4算法对分布式哈希表进行解密得到解密后的切片数据；S9，对解密后的数据切片进行合并播放。通过以上描述可知，本实施例的分布式数据存储方法主要应用于监管场景下被监管机构授权访问监控视频。例如在安全生产监督管理场景下，监管部门对企业的涉及安全隐患及重点部位进行视频监控，与企业关于自身流程工艺的企业机密在视频安全防泄漏方面的冲突，结合AI智能分析技术，创新的提出利用分布式数据存储方法解决可信监管及视频防泄露问题。本实施例中，尽管为使解释简单化将上述方法图示并描述为一系列动作，但是应理解并领会，这些方法不受动作的次序所限，因为根据一个或多个实施例，一些动作可按不同次序发生和/或与来自本文中图示和描述或本文中未图示和描述但本领域技术人员可以理解的其他动作并发地发生。本领域技术人员将进一步领会，结合本文中所公开的实施例来描述的各种解说性逻辑板块、模块、电路、和算法步骤可实现为电子硬件、计算机软件、或这两者的组合。为清楚地解说硬件与软件的这一可互换性，各种解说性组件、框、模块、电路、和步骤在上面是以其功能性的形式作一般化描述的。此类功能性是被实现为硬件还是软件取决于具体应用和施加于整体系统的设计约束。技术人员对于每种特定应用可用不同的方式来实现所描述的功能性，但这样的实现决策不应被解读成导致脱离了本发明的范围。注意到，说明书中对“一个实施例”、“实施例”、“示例实施例”、“一些实施例”等的引用指示所描述的实施例可以包括特定特征、结构或特性，但是每个实施例可以不必包括所述特定特征、结构或特性。而且，这样的短语不必指代同一实施例。此外，当结合实施例描述特定特征、结构或特性时，无论是否明确描述，结合其他实施例来实现这样的特征、结构或特性将在所属领域的技术人员的知识范围内。提供对本公开的先前描述是为使得本领域任何技术人员皆能够制作或使用本公开。对本公开的各种修改对本领域技术人员来说都将是显而易见的，且本文中所定义的普适原理可被应用到其他变体而不会脱离本公开的精神或范围。由此，本公开并非旨在被限定于本文中所描述的示例和设计，而是应被授予与本文中所公开的原理和新颖性特征相一致的最广范围。
