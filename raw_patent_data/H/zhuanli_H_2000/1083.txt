标题title
一种基于视频预测的Wi-Fi QoS保障方法
摘要abst
本发明公开了一种基于视频预测的Wi‑Fi QoS保障方法，属于无线通信技术领域，包括如下步骤：获取当前播放视频的播放信息，与数据库对比，获取下一时刻的视频流量信息；基于下一时刻的视频流信息，对信道资源进行抢占式的竞争，直接发送下一时刻的视频流至播放部或将信道的接入时间赋予给发送节点，发送节点接入信道将视频流传输至播放部；下一时刻的视频流信息包括下一时刻的流量时间序列以及流量信息，本发明改善了传统QoS都是基于统计模型下的服务保障机制，对于流量本身更加准确，避免服务过多和服务不够，提供相对最优的服务保障机制。本发明可以显著改善无线音视频传输场景下的性能，提供更好的延迟特性。
权利要求书clms
1.一种基于视频预测的Wi-Fi QoS保障方法，其特征在于，包括：获取当前播放视频的播放信息，与数据库中的视频信息对比，获取下一时刻的视频流信息；基于下一时刻的视频流信息，对信道资源进行抢占式的竞争，直接发送下一时刻的视频流信息至播放部或将信道的接入时间赋予给发送节点，发送节点接入信道将视频流传输至播放部；所述下一时刻的视频流信息包括下一时刻的流量时间序列以及流量信息。2.如权利要求1所述的一种基于视频预测的Wi-Fi QoS保障方法，其特征在于，在发送节点可以控制的情况下，通过发送节点可直接获取当前播放视频的播放信息，所述播放信息包括视频名以及播放时刻；将播放信息与数据库对比，获取下一时刻的流量时间序列以及流量信息；根据下一时刻流量时间序列，以最高优先级抢占信道，在发送视频的时间节点将下一时刻的视频流直接发送给播放部。3.如权利要求1所述的一种基于视频预测的Wi-Fi QoS保障方法，其特征在于，在发送节点不可控制的情况下，通过以下方法来获取当前播放视频的播放信息；部署一无线控制部，无线控制部持续获取网络流量，监控无线网络信息，提取突发流量的特征时间序列，并通过神经网络训练模型进行匹配识别，判断当前播放视频的播放信息。4.如权利要求3所述的一种基于视频预测的Wi-Fi QoS保障方法，其特征在于，所述神经网络训练模型的设计方法如下：构建一包括N部视频的数据库，模拟无线传输过程，提取无线传输过程中突发视频流量请求的时间点，获得突发视频流量请求的特征时间序列、每个突发视频流量请求的时间点所对应的视频以及视频的播放时刻；将上述参数放入神经网络中训练，直至神经网络训练收敛，得到神经网络训练模型，将该神经网络训练模型部署于无线控制部上。5.如权利要求1所述的一种基于视频预测的Wi-Fi QoS保障方法，其特征在于，无线控制部从下一时刻的视频流信息中得到待发送视频的时间节点，对信道资源进行抢占式的竞争，基于不同的Wi-Fi标准选取如下方式中的一个来将接入信道时间赋予发送节点；方式一：在竞争完成后，无线控制部发送RDG字段标注为1的单播无线帧至发送节点，发送节点接收该单播无线帧并反馈MorePPDU字段标注为1的单播无线帧给AP，发送节点接入信道并执行数据传输，直至竞争所获得的传输时间结束；方式二：在竞争完成后，无线控制部直接发送QTP setup，为发送节点立刻分配接入时间，该QTPsetup通过将其他节点设置为NAV信道忙状态，仅让发送节点接入信道，发送接入信道并执行数据传输，直至竞争所获得的传输时间结束。6.如权利要求5所述的一种基于视频预测的Wi-Fi QoS保障方法，其特征在于，若无线数据链路支持Wi-Fi6协议，则采用上述方式二，若不支持Wi-Fi6协议，则采用上述方式一。7.如权利要求3所述的一种基于视频预测的Wi-Fi QoS保障方法，其特征在于，若识别到网络中有多个无线视频流量，无线控制部发送Trigger帧，Trigger帧按照多个无线视频流量的待发送的视频缓存大小的比例来分配RU空间，发送节点根据RU的指示接入信道进行数据传输，直至接入时间结束。
说明书desc
技术领域本发明涉及无线通信技术领域，特别涉及一种基于视频预测的Wi-Fi QoS保障方法。背景技术无线网络采用基于CSMA/CA的竞争机制，在CSMA/CA竞争过程中，节点需要先竞争，后传输；在竞争过程中，采用的竞争参数不同，其竞争获取信道的概率就不同；竞争参数主要包含了AIFS，CW,以及TXOP传输时间；因此，无线的QoS服务保障主要是通过设置这三个参数来进行设置；如图1所示，无线QoS首先会根据业务流量类型，这个类型可以通过其他层的QoS相关字段来进行映射，比如上层的DSCP，或者有线侧的VLAN优先级等，然后不同的优先级会被分配到不同的缓存进行存储；如图2所示，在通过缓存将不同的数据包分类后，然后在竞争过程中，为不同的缓存队列分配不同的竞争参数，最终实现Qos的功能，传统的QoS是让节点自己选择合适的竞争参数，从而竞争信道，获取发送机会的，难以实现稳定快速的数据传输。发明内容本发明提供一种基于视频预测的Wi-Fi QoS保障方法，可以解决背景技术中所指出的问题。一种基于视频预测的Wi-Fi QoS保障方法，包括：获取当前播放视频的播放信息，与数据库中的视频信息对比，获取下一时刻的视频流信息。基于下一时刻的视频流信息，对信道资源进行抢占式的竞争，直接发送下一时刻的视频流信息至播放部或将信道的接入时间赋予给发送节点，发送节点接入信道将视频流传输至播放部。所述下一时刻的视频流信息包括下一时刻的流量时间序列以及流量信息。在发送节点可以控制的情况下，通过发送节点可直接获取当前播放视频的播放信息，所述播放信息包括视频名以及播放时刻。将播放信息与数据库对比，获取下一时刻的流量时间序列以及流量信息。根据下一时刻流量时间序列，以最高优先级抢占信道，在发送视频的时间节点将下一时刻的视频流信息直接发送给播放部。在发送节点不可控制的情况下，通过以下方法来获取当前播放视频的播放信息。部署一无线控制部，无线控制部持续获取网络流量，监控无线网络信息，提取突发流量的特征时间序列，并通过神经网络训练模型进行匹配识别，判断当前播放视频的播放信息。所述神经网络训练模型的设计方法如下：构建一包括N部视频的数据库，模拟无线传输过程，提取无线传输过程中突发视频流量请求的时间点，获得突发视频流量请求的特征时间序列、每个突发视频流量请求的时间点所对应的视频以及视频的播放时刻。将上述参数放入神经网络中训练，直至神经网络训练收敛，得到神经网络训练模型，将该神经网络训练模型部署于无线控制部上。无线控制部从下一时刻的视频流信息中得到待发送视频的时间节点，对信道资源进行抢占式的竞争，基于不同的Wi-Fi标准选取如下方式中的一个来将接入信道时间赋予发送节点。方式一：在竞争完成后，无线控制部发送RDG字段标注为1的单播无线帧至发送节点，发送节点接收该单播无线帧并反馈MorePPDU字段标注为1的单播无线帧给AP，发送节点接入信道并执行数据传输，直至竞争所获得的传输时间结束。方式二：在竞争完成后，无线控制部直接发送QTP setup，为发送节点立刻分配接入时间，该QTP setup通过将其他节点设置为NAV信道忙状态，仅让发送节点接入信道，发送接入信道并执行数据传输，直至竞争所获得的传输时间结束。若无线数据链路支持Wi-Fi6协议，则采用上述方式二，若不支持Wi-Fi6协议，则采用上述方式一。若识别到网络中有多个无线视频流量信息，无线控制部发送Trigger帧，Trigger帧按照多个无线视频流量的待发送的视频缓存大小的比例来分配RU空间，发送节点根据RU的指示接入信道进行数据传输，直至接入时间结束。与现有技术相比，本发明的有益效果是：本发明改善了传统QoS都是基于统计模型下的服务保障机制，对于流量本身更加准确，避免服务过多和服务不够，提供相对最优的服务保障机制。本发明可以显著改善无线音视频传输场景下的性能，提供更好的延迟特性。附图说明图1为现有无线QoS工作原理图。图2为现有技术中为不同缓存队列分配不同竞争参数的示意图。图3为本发明的实施例一的系统架构图。图4为本发明基于实施例一系统加工的工作流程图。图5为本发明的实施例二的系统架构图。图6为视频传输技术的原理图。图7为本发明的神经网络训练参数提取示意图。图8为本发明的神经网络模块示意图。图9为本发明采用RDG方式将接入时间赋予节点的工作流程图。图10为本发明采用QTP方式将接入时间赋予节点的方式。图11为存在多视频流信息时的OFDMA的工作流程图。图12为本发明基于实施例二的系统架构的工作流程图。具体实施方式下面结合附图，对本发明的一个具体实施方式进行详细描述，但应当理解本发明的保护范围并不受具体实施方式的限制。实施例一如图3至图4所示，本发明实施例提供的一种基于视频预测的Wi-Fi QoS保障方法，基于如图3所示的架构，该包括无线接入点、无线终端以及数据链路，本实施例中的无线接入点为发送节点，无线终端为播放终端，该架构的无线接入点可以控制，那么通过修改无线接入点上的算法，来控制无线的竞争和分配信道的过程，从而对无线数据链路进行控制，因为无线接入点可控，则可从无线接入点获取当前播放视频的播放信息，包括但不限于视频播放内容、数据包待发送的情况以及播放时刻这些相应的信息。如图4所示，数据库中的所有信息是已知的，那么将上述播放信息与数据库中的视频信息、视频序列等信息进行对比，可以获取下一时刻的视频流量信息，视频流量信息包括下一时刻的流量时间序列以及流量信息，那么就知道在何时发送视频流信息，那么就可以根据情况来给无线接入点分配信道进行数据传输以及传输时间。本实施例采用先抢占，再赋予的方式，为节点提供QoS接入功能，现有的QoS是让节点自己选择合适的竞争参数，从而竞争信道，获取发送机会的；而对于这种基于预测的确定性的流量传输场景而言，由于已知流量在什么时刻会进行发送，那么就针对这个时间点，直接划分一次传输机会，而不需要依靠节点自己进行竞争。无线接入点通过QoS Null帧抢占信道；无线接入点采用最高优先级的竞争参数，即选择随机数为0，无需回退；另外只需要检测PIFS时间即可接入信道；在该优先级的情况下，无线接入点几乎可以绝对抢占到信道；首先无线接入点根据待发送视频的时间节点，对信道资源进行抢占式的竞争；那么无线接入点可以直接发送视频流给无线终端。实施例二如图5-图12，本发明实施例提供的一种基于视频预测的Wi-Fi QoS保障方法，基于如图5所示的架构，该架构包括无线接入点、无线终端以及数据链路，由于无线接入点不可控制，那么无法直接获取当前视频的播放信息，因此增加一无线控制部，无线控制部用于识别无线网络场景下的视频流量之类的特征，又因为该无线网络场景下是单播加密传输，且无线控制部未加入该无线网络的视频传输识别机制中，所以无法通过数据包的方式来进行视频信息获取，因此本实施例提供如下识别机制来进行视频识别。如图6所示，图6描述了视频传输技术的基本原理，目前视频传输都是先周期性的缓存一段信息到接收方，比如每分钟缓存一定的信息，然后在这个缓存周期没有到点的时候，终端会依靠本地的缓存进行视频的播放，如果在这时刻内，剩余缓存的数据量小于阈值的话，那么终端会向服务器主动请求一些突发情况的缓存，以填充本地缓存内容可以支持剩余时间内的播放内容，如果在该时刻内，剩余流量没有小于缓存的话，那么终端则无需向服务器请求缓存，直接消耗并播放本地的缓存内容即可，直到周期到达，获得下一次缓存。然而，之所以存在以上这种设计，是因为在视频传输的场景中，其流量大小是动态变化的，如果是纯粹静态的场景下，始终按照固定流量，周期缓存即可，但是在视频传输场景下，流量大小和视频编码的内容息息相关，如果是一个图像变化非常快速的场景，那么信息量很多，在相同的缓存下，相对保存的视频时间就较短，反之在图像变化很慢的场景下，比如静态的场景，那么就和图片一样，相同的缓存能够保持较长的播放时间，。因此，不同视频在执行突发流量请求的大小和时机都会存在不同，这会与视频内容本身有主要关联，这也同时从侧面为每一个视频，以及每一个播放的位置，构造了一个特殊的身份标识。如图7所示，本实施例结合视频数据库构造一份训练数据，在该数据库中，包含了n部视频，模拟无线传输过程，将整个视频对应无线传输过程中的时间序列提取出来，这里的时间序列对应前面所述的突发流量请求，由于一个视频包含了很多个缓存周期，因此，这里获得的突发流量请求的特征也是一个时间序列，其对应整个视频的时域信息。如图8所示，将所得到的上述信息输入特征时间序列，对应视频，和相应的时刻信息放到一个深度神经网络中进行训练，直到这个神经网络训练收敛，得到神经网络训练模型。神经网络模块的训练和识别均采用图8所示的模块；当输入输出固定的情况下，训练神经网络的参数；当神经网络的参数固定的情况下，输入参数，获得输出结果。后续将该模型部署到无线控制部的节点上；该节点就持续的捕获网络流量，并且监控无线网络信息，将这些信息来进行提取，并且将这些流量对应的特征时间序列输入到构造的神经网络中进行匹配识别，已判断当前播放是视频信息和播放的时间节点。图12中为本实施例在图5中架构下进行QOS保障的流程。本实施例还提出一种先抢占，再赋予的方式，为节点提供QoS接入功能，传统的QoS是让节点自己选择合适的竞争参数，从而竞争信道，获取发送机会的，而对于本实施例的这种基于预测的确定性的流量传输场景而言，由于已知流量在什么时刻会进行发送，那么就针对这个时间点，直接划分一次传输机会，而不需要依靠节点自己进行竞争。在本实施例中，首先由无线控制部通过QoS Null帧抢占信道；无线控制部采用最高优先级的竞争参数，即选择随机数为0，无需回退；另外只需要检测PIFS时间即可接入信道；在该优先级的情况下，无线控制部几乎可以绝对抢占到信道；首先抢占者根据待发送视频的时间节点，对信道资源进行抢占式的竞争；将信道的接入时间赋予给发送节点。本实施例还提供如下两种将接入时间赋予节点的方式，选用方式之前先对无线通信链路所支持的协议进行判断，若支持Wi-Fi6则采用第二种方式，若不支持Wi-Fi6则采用第一种方式。方式一：如图9所示，第一种方式是通过RDG的方式。在竞争完成后，抢占者通过RDG的方式，将信道资源赋予需要发送的节点。这里赋予采用RDG的机制，可以将竞争所获得的传输时间赋予节点。此时无线控制部首先发送一个单播无线帧，在帧中的RDG字段标注1，即表示将该时间片赋予特定节点。此后节点反馈一个单播无线帧给AP，并在MorePPDU字段标注1，表示接收该时间片的分配。然后节点即可接入信道并执行数据传输，直到TXOP传输时间结束。方式二：如图10所示，第二种方式是通过QTP的方式。当竞争完成后，抢占者直接发送QTP Setup为节点立刻分配接入时间，这个QTP Setup会通过设置NAV，将其他节点都设置为NAV信道忙状态，并且只让特定的节点接入信道。此后，节点对应接入信道进行数据传输，直到QTP时间结束。如图11所示，如果此时在网络中识别有多个无线视频流量信息的时候，那么可以采用OFDMA的方式来进行多个无线流量的并行传输，此时无线控制这或无线接入点会发送Trigger帧同时对于无线信道接入，以及对应的OFDMA RU进行分配。Trigger帧可以控制无线信道接入的时长，RU分配的大小以及对应节点。此时，抢占者可以根据并发的视频流数量，以及待发送的视频缓存大小，按照比例分配RU。如果视频流待发送的缓存大小较多，那么就分配较大的RU空间，如果缓存较小，那么就分配较小的RU空间。此后，节点根据RU的指示进行无线接入即可，直到OFDMA接入时间结束。对于本领域技术人员而言，显然本发明不限于上述示范性实施例的细节，而且在不背离本发明的精神和基本特征的情况下，能够以其他的具体形式实现本发明。因此，无论从哪一点来看，均应将实施例看作是示范性的，而且是非限制性的，本发明的范围由所附权利要求而不是上述说明限定，因此旨在将落在权利要求的等同要件的含义和范围内的所有变化囊括在本发明内。不应将权利要求中的任何附图标记视为限制所涉及的权利要求。此外，应当理解，虽然本说明书按照实施方式加以描述，但并非每个实施方式仅包含一个独立的技术方案，说明书的这种叙述方式仅仅为清楚起见，本领域技术人员应当将说明书作为一个整体，各实施例中的技术方案也可以经适当组合，形成本领域技术人员可以理解的其他实施方式。
