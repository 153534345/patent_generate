标题title
一种降低服务器压力的软件更新方法、系统和存储介质
摘要abst
本发明提供了一种降低服务器压力的软件更新方法、系统和存储介质，通过对服务器端网络性能和在线用户数量进行分析，对在线用户进行分组和按时间进行编号；然后，根据分组和时间编号依次对在线用户下发应用程序更新指令，执行更新文件传输操作；在保持现有服务器和网络带宽性能的前提下，通过把控更新文件传输的情况，达到在不提高企业成本的条件下降低企业服务器短时压力的效果，防止网络阻塞及无响应情况的出现。另外，根据更新文件的传输情况调整传输速状态，用以提高用户的使用体验。
权利要求书clms
1.一种降低服务器压力的软件更新方法，其特征在于，所述方法包括：获取第一网络带宽信息；根据第一网络带宽信息和预设的第一传输速度信息，得到第一传输数量信息；获取第一用户数量信息；根据第一用户数量信息和第一传输数量信息的大小关系，设置第一传输速度信息或进入分组传输模式；判断进入分组传输模式时，根据第一用户数量信息和第一传输数量信息对用户进行分组；获得更新文件大小信息；根据更新文件大小信息和第一传输速度得到第一传输时间信息；根据第一传输时间信息和第一传输数量信息，对每组用户进行编号；根据编号依次向用户发送更新指令。2.根据权利要求1所述的一种降低服务器压力的软件更新方法，其特征在于，所述根据第一用户数量信息和第一传输数量信息的大小关系，设置第一传输速度信息或进入分组传输模式，具体为：判断所述第一用户数量信息是否超过所述第一传输数量信息；若超过，进入所述分组传输模式；若不超过，根据第一网络带宽信息和第一用户数量信息，调整第一传输速度信息，向用户发送更新指令。3.根据权利要求1所述的一种降低服务器压力的软件更新方法，其特征在于，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，具体为：判断进入所述分组传输模式时，根据所述第一用户数量信息为用户配置随机码；根据所述随机码对用户进行排序；根据所述第一传输数量信息对排序的用户进行分组。4.根据权利要求1所述的一种降低服务器压力的软件更新方法，其特征在于，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，具体为：判断进入所述分组传输模式时，获取用户在线时长信息；根据所述在线时长信息对用户进行排序；根据第一传输数量信息对排序的用户进行分组。5.根据权利要求1所述的一种降低服务器压力的软件更新方法，其特征在于，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，还包括：判断进入所述分组传输模式时，获取用户的IP地址信息；根据所述IP地址信息得到用户所在的区域信息；根据用户的所在的区域信息对用户进行分组。6.根据权利要求1所述的一种降低服务器压力的软件更新方法，其特征在于，所述根据第一传输时间信息和第一传输数量信息，对每组用户进行编号，具体为：根据所述第一传输时间信息和所述第一传输数量信息，得到时间间隔信息；根据时间间隔信息依次对每组用户标注时间编号；其中，时间编号才用向上或向下取整的方式。7.一种降低服务器压力的软件更新系统，其特征在于，所述系统包括存储器和处理器，所述存储器中包括降低服务器压力的软件更新方法程序，所述降低服务器压力的软件更新方法程序被所述处理器执行时实现如下步骤：获取第一网络带宽信息；根据第一网络带宽信息和预设的第一传输速度信息，得到第一传输数量信息；获取第一用户数量信息；根据第一用户数量信息和第一传输数量信息的大小关系，设置第一传输速度信息或进入分组传输模式；判断进入分组传输模式时，根据第一用户数量信息和第一传输数量信息对用户进行分组；获得更新文件大小信息；根据更新文件大小信息和第一传输速度得到第一传输时间信息；根据第一传输时间信息和第一传输数量信息，对每组用户进行编号；根据编号依次向用户发送更新指令。8.根据权利要求7所述的一种降低服务器压力的软件更新系统，其特征在于，所述根据第一用户数量信息和第一传输数量信息的大小关系，设置第一传输速度信息或进入分组传输模式，具体为：判断所述第一用户数量信息是否超过所述第一传输数量信息；若超过，进入所述分组传输模式；若不超过，根据第一网络带宽信息和第一用户数量信息，调整第一传输速度信息，向用户发送更新指令。9.根据权利要求7所述的一种降低服务器压力的软件更新系统，其特征在于，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，具体为：判断进入所述分组传输模式时，根据所述第一用户数量信息为用户配置随机码；根据所述随机码对用户进行排序；根据所述第一传输数量信息对排序的用户进行分组。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机可读存储介质中包括一种降低服务器压力的软件更新方法程序，所述降低服务器压力的软件更新方法程序被处理器执行时，实现如权利要求1至6中任一项所述的降低服务器压力的软件更新方法的步骤。
说明书desc
技术领域本发明涉及软件更新领域，更具体地，涉及一种降低服务器压力的软件更新方法、系统和存储介质。背景技术随着网络技术的飞速进步和应用普及，应用程序远程更新升级功能日益普遍。应用程序更新的原理为用户端下载更新的文件，然后安装并替换旧文件的过程。目前，对于正在使用应用程序的在线用户，会收到来自服务器的应用程序更新指令，用以允许在线用户更新应用程序。但是，服务器发布应用程序更新提醒时，可能存在大量的在线用户同时下载更新文件的情况。然后，大部分企业受限于服务器和网络带宽的性能，对于短时间突然增多的应用程序更新文件下载请求，服务器很有可能因为短时间承载过大的传输压力导致响应缓慢或无法响应，从而严重影响在线用户的体验。然而，如果提升服务器性能，例如设立中心化调度服务器，或提升网络性能，如购买更大带宽的网络，都会大大增加企业的成本。因此，亟需一种既能保证服务器传输更新文件时不发生堵塞影响用户体验，又能达到不增加企业运营成本的软件更新技术。发明内容鉴于上述问题，本发明的目的在于提供一种降低服务器压力的软件更新方法、系统和存储介质，在面对大量在线用户需要下载应用程序更新的情况下，以不改变企业服务器及网络性能为前提，通过分配更新文件开始传输时间的方式，达到降低企业服务器短时压力的效果，从而不影响用户对应用软件的使用体验。本发明第一方面提供了一种降低服务器压力的软件更新方法，所述方法包括：获取第一网络带宽信息；根据第一网络带宽信息和预设的第一传输速度信息，得到第一传输数量信息；获取第一用户数量信息；根据第一用户数量信息和第一传输数量信息的大小关系，设置第一传输速度信息或进入分组传输模式；判断进入分组传输模式时，根据第一用户数量信息和第一传输数量信息对用户进行分组；获得更新文件大小信息；根据更新文件大小信息和第一传输速度得到第一传输时间信息；根据第一传输时间信息和第一传输数量信息，对每组用户进行编号；根据编号依次向用户发送更新指令。本方案中，所述根据第一用户数量信息和第一传输数量信息的大小关系，设置第一传输速度信息或进入分组传输模式，具体为：判断所述第一用户数量信息是否超过所述第一传输数量信息；若超过，进入所述分组传输模式；若不超过，根据第一网络带宽信息和第一用户数量信息，调整第一传输速度信息，向用户发送更新指令。本方案中，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，具体为：判断进入所述分组传输模式时，根据所述第一用户数量信息为用户配置随机码；根据所述随机码对用户进行排序；根据所述第一传输数量信息对排序的用户进行分组。本方案中，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，具体为：判断进入所述分组传输模式时，获取用户在线时长信息；根据所述在线时长信息对用户进行排序；根据第一传输数量信息对排序的用户进行分组。本方案中，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，还包括：判断进入所述分组传输模式时，获取用户的IP地址信息；根据所述IP地址信息得到用户所在的区域信息；根据用户的所在的区域信息对用户进行分组。本方案中，所述根据第一传输时间信息和第一传输数量信息，对每组用户进行编号，具体为：根据所述第一传输时间信息和所述第一传输数量信息，得到时间间隔信息；根据时间间隔信息依次对每组用户标注时间编号；其中，时间编号才用向上或向下取整的方式。本发明第二方面提供了一种低功耗定位系统，包括降低服务器压力的软件更新方法程序，所述降低服务器压力的软件更新方法程序被所述处理器执行时实现如下步骤：获取第一网络带宽信息；根据第一网络带宽信息和预设的第一传输速度信息，得到第一传输数量信息；获取第一用户数量信息；根据第一用户数量信息和第一传输数量信息的大小关系，设置第一传输速度信息或进入分组传输模式；判断进入分组传输模式时，根据第一用户数量信息和第一传输数量信息对用户进行分组；获得更新文件大小信息；根据更新文件大小信息和第一传输速度得到第一传输时间信息；根据第一传输时间信息和第一传输数量信息，对每组用户进行编号；根据编号依次向用户发送更新指令。本方案中，所述根据第一用户数量信息和第一传输数量信息的大小关系，设置第一传输速度信息或进入分组传输模式，具体为：判断所述第一用户数量信息是否超过所述第一传输数量信息；若超过，进入所述分组传输模式；若不超过，根据第一网络带宽信息和第一用户数量信息，调整第一传输速度信息，向用户发送更新指令。本方案中，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，具体为：判断进入所述分组传输模式时，根据所述第一用户数量信息为用户配置随机码；根据所述随机码对用户进行排序；根据所述第一传输数量信息对排序的用户进行分组。本发明第三方面提供了一种计算机可读存储介质，所述计算机可读存储介质中包括一种降低服务器压力的软件更新方法程序，所述降低服务器压力的软件更新方法程序被处理器执行时，实现如上述任一项所述的降低服务器压力的软件更新方法的步骤。本发明提供了一种降低服务器压力的软件更新方法、系统和存储介质，通过对服务器端网络性能和在线用户数量进行分析，对在线用户进行分组和按时间进行编号；然后，根据分组和时间编号依次对在线用户下发应用程序更新指令，执行更新文件传输操作；在保持现有服务器和网络带宽性能的前提下，通过把控更新文件传输的情况，达到在不提高企业成本的条件下降低企业服务器短时压力的效果，防止网络阻塞及无响应情况的出现。另外，根据更新文件的传输情况调整传输速状态，用以提高用户的使用体验。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本发明的某些实施例，因此不应被看作是对范围的限定。图1示出了本发明一种降低服务器压力的软件更新方法的流程图；图2示出了本发明提供的根据用户数量判断工作模式的流程图；图3示出了本发明提供的一种分组传输模式的实施的流程图；图4示出了本发明一种低功耗定位系统的框图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。除非另有定义，本发明实施例使用的所有术语 具有与本发明所属领域的普通技术人员共同理解的相同含义。还应当理解，诸如在通常字典里定义的那些术语应当被解释为具有与它们在相关技术的上下文中的含义相一致的含义，而不应用理想化或极度形式化的意义来解释，除非本发明实施例明确地这样定义。本发明实施例中使用的“第一”、“第二”以及类似的词语并不表示任何顺序、数量或者重要性，而只是用来区分不同的组成部分。“一个”、“一”或者“该”等类似词语也不表示数量限制，而是表示存在至少一个。同样，“包括”或者“包含”等类似的词语意指出现该词前面的元件或者物件涵盖出现在该词后面列举的元件或者物件及其等同，而不排除其他元件或者物件。“连接”或者“相连”等类似的词语并非限定于物理的或者机械的连接，而是可以包括电性的连接，不管是直接的还是间接的。本发明实施例的方法前面或后面的步骤不一定按照顺序来精确的进行。相反，可以按照倒序或同时处理各种步骤。同时，也可以将其他操作添加到这些过程中，或从这些过程移除某一步或数步。另外，在本发明各个实施例中的各功能模块可以集成在一起形成一个独立的部分，也可以是各个模块单独存在，也可以两个或两个以上模块集成形成一个独立的部分。图1示出了本发明一种降低服务器压力的软件更新方法的流程图。如图1所示，本发明公开了一种降低服务器压力的软件更新方法，具体包括：S102，获取第一网络带宽信息；S104，根据第一网络带宽信息和预设的第一传输速度信息，得到第一传输数量信息；S106，获取第一用户数量信息；S108，根据第一用户数量信息和第一传输数量信息的大小关系，设置第一传输速度信息或进入分组传输模式；S110，判断进入分组传输模式时，根据第一用户数量信息和第一传输数量信息对用户进行分组；S112，获得更新文件大小信息；S114，根据更新文件大小信息和第一传输速度得到第一传输时间信息；S116，根据第一传输时间信息和第一传输数量信息，对每组用户进行编号；S118，根据编号依次向用户发送更新指令。需要说明的是，网络带宽是指在单位时间内能传输的数据量，一般指的是1秒钟所传输的数据量，第一网络带宽信息是服务器所的网络所允许的网络带宽；预设的第一传输速度信息是根据大部分用户网络环境预设的在单位时间内用户应用程序与服务器之间传输的数据量；第一传输数量信息是指服务器所允许的同时进行更新文件传输时的用户数量。首先，根据服务器第一网络带宽信息和预设第一传输速度信息，得到在预设的第一传输速度下，服务器当前带宽可允许的同时进行更新文件传输的用户数量，也就是并发用户数量。第一用户数量信息是当前在线使用应用程序的用户数量，也就是在线用户数量。根据并发用户数量和在线用户数量的大小关系，判断是否进入分组传输模式。当进入分组传输模式时，根据并发用户数量和在线用户数量对用户进行分组。以每组用户数量不超过并发数量为前提，对在线用户进行分组，例如，并发用户数量为1000，在线用户数量为2500，则至少需要分成3组。然后，根据更新文件大小信息，也就是更新文件的数据总量，计算在第一传输速度下所需要的传输时间。第一传输时间信息为更新文件在第一传输速度下完成传输所需要的时间，即传输完成时间。根据并发用户数量和传输完成时间，计算间隔时间，再依照间隔时间对组内用户进行编号。例如，并发用户数量为1000，传输完成时间为30000毫秒，则时间间隔为30毫秒，依照时间对每组用户进行编号为30毫秒、60毫秒、90毫秒……。时间编号是服务器向组内每个用户发送更新指令的时间点，在第一个传输完成时间周期内，服务器按照时间编号向第一组用户依次发送更新指令；在第二个传输完成时间期内，服务器按照时间编号向第二组用户依次发送更新指令；以次类推，直至服务器完成所有组别用户的更新指令发送操作。以第一传输速度作为数据传输速度上限，进行更新文件的数据传输。图2示出了本发明提供的根据用户数量判断工作模式的流程图。根据本发明实施例，如图2所示，所述根据第一用户数量信息和第一传输数量信息的大小关系，设置第一传输速度信息或进入分组传输模式，具体为：S202，判断所述第一用户数量信息是否超过所述第一传输数量信息；S204，若超过，进入所述分组传输模式；S206，若不超过，根据第一网络带宽信息和第一用户数量信息，调整第一传输速度信息，向用户发送更新指令。需要说明的是，第一传输速度信息是根据大部分用户网络环境预设的在单位时间内用户应用程序与服务器之间传输的数据量，也就是预设的平均传输速度；第一用户数量信息是当前在线使用应用程序的用户数量，也就是在线用户数量；第一传输数量信息是指服务器所允许的同时进行更新文件传输时的用户数量，也就是并发用户数量。当在线用户数量超过并发用户数量时，表明服务器网络性能不能满足所有在线用户同时进行更新文件的数据传输，所以需要对在线用户进行分组更新。通过限制每组同时更新的用户数量低于并发用户数量，用于保证网络性能不出现堵塞或无响应状态，提高在线用户的更新体验。当在线用户数量不超过并发用户数量时，表明服务器网络性能满足当前所有在线用户同时进行更新文件的数据传输。计算出当前服务器网络带宽对于当前在线用户数量同时传输数据时的传输速度，使用该传输速度调整第一传输速度后，服务器可以同时向在线用户发出更新指令，并以调整后的第一传输速度作为数据传输速度上限，进行更新文件的数据传输。图3示出了本发明提供的一种分组传输模式的实施的流程图。根据本发明实施例，如图3所示，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，具体为：S302，判断进入所述分组传输模式时，根据所述第一用户数量信息为用户配置随机码；S304，根据所述随机码对用户进行排序；S306，根据所述第一传输数量信息对排序的用户进行分组。需要说明的是，第一用户数量信息是当前在线使用应用程序的用户数量，也就是在线用户数量；第一传输数量信息是指服务器所允许的同时进行更新文件传输时的用户数量，也就是并发用户数量。当判断进入所述分组传输模式时，根据在线用户数量为生成随机码，并向每位在线用户进行配置。例如，当在线用户数量为1234时，则为每位用户在1至1234之间随机选择一个值进行配置，通常而言，这类型的配置是为每位用户配置各不相同的随机码。向每位用户配置随机码后，用户依据随机码进行排序，排序规则包括不限于升序、降序等。然后，以并发用户数量为界设置一组用户数量，对排序后的用户进行分组。例如，在线用户数量为1234，并发用户数量为1000，此时将排序后第1位至第1000位用户设置为第一组、第1001至第1234位用户设置为第二组。根据本发明实施例，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，具体为：判断进入所述分组传输模式时，获取用户在线时长信息；根据所述在线时长信息对用户进行排序；根据第一传输数量信息对排序的用户进行分组。需要说明的是，第一用户数量信息是当前在线使用应用程序的用户数量，也就是在线用户数量；第一传输数量信息是指服务器所允许的同时进行更新文件传输时的用户数量，也就是并发用户数量。当判断进入所述分组传输模式时，服务器获取每位在线用户的在线时长。在线时长可以是此次使用应用程序的时长、可以是累计使用应用程序的总时长、可以是预设时间内使用应用程序的总时长，例如3天内、7天内使用应用程序的时长。依据在线时长的长短，依照降序的方式进行排序，然后，以并发用户数量为界设置一组用户数量，对排序后的用户进行分组。在线时长可表示用户对应用程序的使用频率，为高频使用者优先推送更新升级消息。根据本发明实施例，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，还包括：判断进入所述分组传输模式时，获取用户的IP地址信息；根据所述IP地址信息得到用户所在的区域信息；根据用户的所在的区域信息对用户进行分组。需要说明的是，第一用户数量信息是当前在线使用应用程序的用户数量，也就是在线用户数量；第一传输数量信息是指服务器所允许的同时进行更新文件传输时的用户数量，也就是并发用户数量。当判断进入所述分组传输模式时，服务器获取每位在线用户的IP地址信息，根据IP地址信息可查询到用户所在的区域。例如，在中国境内，可通过用户的IP地址查询到用户所在的省份、城市。然后，依据区域对用户进行分组，使得同一区域的用户尽量得到相近的更新推荐时间。根据本发明实施例，所述根据第一传输时间信息和第一传输数量信息，对每组用户进行编号，具体为：根据所述第一传输时间信息和所述第一传输数量信息，得到时间间隔信息；根据时间间隔信息依次对每组用户标注时间编号；其中，时间编号才用向上或向下取整的方式。需要说明的是，第一传输数量信息是指服务器所允许的同时进行更新文件传输时的用户数量，即并发用户数量；第一传输时间信息为更新文件在第一传输速度下完成传输所需要的时间，即传输完成时间。根据并发用户数量和传输完成时间，计算间隔时间，再依照间隔时间对组内用户进行编号。例如，并发用户数量为1000，传输完成时间为30000毫秒，则时间间隔为30毫秒，依照时间对每组进行编号为30毫秒、60毫秒、90毫秒……。通常而言，时间编号是以毫秒为单位、或者以每10毫秒为单位，进行向上或向下取整。值得一提的是，还包括：当分组完成编号后，获取第一用户数量信息；当第一用户数量信息大于完成分组编号的用户数量时，为部分用户配置分组和编号。需要说明的是，第一用户数量信息是当前在线使用应用程序的用户数量，也就是在线用户数量。当分组完成编号后，再次获取当前在线用户数量，如果当前在线用户数量比已分组编号的在线用户数量大，说明分组编号完成后有其他用户登录使用应用程序。此时，为这些用户配置依据所采用的分组编号规则分组和编号。例如，若是采用随机码规则或在线时长规则分组编号的，对于后登录的在线用户在最后一个分组在按登录进行编号；若是采用区域分配规则分组编号的，对于后登录的在线用户依据所在区域进行分组。值得一提的是，还包括：获取第二用户数量信息和各个用户的第二传输速度信息；根据第二用户信息和第二传输速度信息，得到第二网络带宽信息；判断第二网络带宽信息是否低于第一网络带宽信息；若低于，根据各个用户的第二传输速度信息调整传输速度。需要说明的是，第二用户数量信息是正在进行更新文件数据传输的用户数量；第二传输速度信息是各个用户由自身网络性能所得到的实际传输速度；第二网络带宽信息是当前正在进行更新文件数据传输的用户所占用的服务器的实际网络带宽；第一网络带宽信息是服务器所的网络所允许的网络带宽。当实际占用的网络带宽低于允许的网络带宽，表示服务器还可接受更大传输压力。可根据每个用户的实际传输速度进行调整，增加部分用户的传输速度上限，以降低文件传输的时间。值得一提的是，还包括：获得更新文件大小信息；根据更新文件大小信息和第一传输速度得到第一传输时间信息；判断第一传输时间信息是否大于预设的时间阈值；若是，进入预更新模式；根据网络带宽信息和第一用户数量信息调整第一传输速度信息，并向用户发送预更新指令。需要说明的是，据更新文件大小信息，也就是更新文件的数据总量，计算在第一传输速度下所需要的传输时间。第一传输时间信息为更新文件在第一传输速度下完成传输所需要的时间，即传输完成时间。当传输完成时间大于预设的时间阈值时，表示更新文件数据量大，需要长时间才能完成传输，若应用软件是设置为更新过程中不能使用的情况，传输时间长势必会造成影响用户使用应用软件。当检测到文件传输所需时间大于预设的时间阈值时，则根据在线用户数量计算出服务器网络带宽所允许的传输速度。服务器向所有在线用户发送预更新指令，即按照所允许的传输速度为上限，在应用程序后台进行文件下载。预更新指令对于用户而言，有网络资源耗费低，传输时间长的特点，且更新文件数据传输过程中不影响应用程序的正常使用。图4示出了本发明一种低功耗定位系统的框图。如图4所示，本发明公开了一种低功耗定位系统4，包括存储器41和处理器42，所述存储器中包括降低服务器压力的软件更新方法程序，所述降低服务器压力的软件更新方法程序被所述处理器执行时实现如下步骤：获取第一网络带宽信息；根据第一网络带宽信息和预设的第一传输速度信息，得到第一传输数量信息；获取第一用户数量信息；根据第一用户数量信息和第一传输数量信息的大小关系，设置第一传输速度信息或进入分组传输模式；判断进入分组传输模式时，根据第一用户数量信息和第一传输数量信息对用户进行分组；获得更新文件大小信息；根据更新文件大小信息和第一传输速度得到第一传输时间信息；根据第一传输时间信息和第一传输数量信息，对每组用户进行编号；根据编号依次向用户发送更新指令。需要说明的是，网络带宽信息是指在单位时间内能传输的数据量，一般指的是1秒钟所传输的数据量，第一网络带宽信息是服务器所的网络所允许的网络带宽；预设的第一传输速度信息是根据大部分用户网络环境预设的在单位时间内用户应用程序与服务器之间传输的数据量；第一传输数量信息是指服务器所允许的同时进行更新文件传输时的用户数量。首先，根据服务器第一网络带宽信息和预设第一传输速度信息，得到在预设的第一传输速度下，服务器当前带宽可允许的同时进行更新文件传输的用户数量，也就是并发用户数量。第一用户数量信息是当前在线使用应用程序的用户数量，也就是在线用户数量。根据并发用户数量和在线用户数量的大小关系，判断是否进入分组传输模式。当进入分组传输模式时，根据并发用户数量和在线用户数量对用户进行分组。以每组用户数量不超过并发数量为前提，对在线用户进行分组，例如，并发用户数量为1000，在线用户数量为2500，则至少需要分成3组。然后，根据更新文件大小信息，也就是更新文件的数据总量，计算在第一传输速度下所需要的传输时间。第一传输时间信息为更新文件在第一传输速度下完成传输所需要的时间，即传输完成时间。根据并发用户数量和传输完成时间，计算间隔时间，再依照间隔时间对组内用户进行编号。例如，并发用户数量为1000，传输完成时间为30000毫秒，则时间间隔为30毫秒，依照时间对每组用户进行编号为30毫秒、60毫秒、90毫秒……。时间编号是服务器向组内每个用户发送更新指令的时间点，在第一个传输完成时间周期内，服务器按照时间编号向第一组用户依次发送更新指令；在第二个传输完成时间期内，服务器按照时间编号向第二组用户依次发送更新指令；以次类推，直至服务器完成所有组别用户的更新指令发送操作。以第一传输速度作为数据传输速度上限，进行更新文件的数据传输。根据本发明实施例，所述根据第一用户数量信息和第一传输数量信息的大小关系，设置第一传输速度信息或进入分组传输模式，具体为：判断所述第一用户数量信息是否超过所述第一传输数量信息；若超过，进入所述分组传输模式；若不超过，根据第一网络带宽信息和第一用户数量信息，调整第一传输速度信息，向用户发送更新指令。需要说明的是，第一传输速度信息是根据大部分用户网络环境预设的在单位时间内用户应用程序与服务器之间传输的数据量，也就是预设的平均传输速度；第一用户数量信息是当前在线使用应用程序的用户数量，也就是在线用户数量；第一传输数量信息是指服务器所允许的同时进行更新文件传输时的用户数量，也就是并发用户数量。当在线用户数量超过并发用户数量时，表明服务器网络性能不能满足所有在线用户同时进行更新文件的数据传输，所以需要对在线用户进行分组更新。通过限制每组同时更新的用户数量低于并发用户数量，用于保证网络性能不出现堵塞或无响应状态，提高在线用户的更新体验。当在线用户数量不超过并发用户数量时，表明服务器网络性能满足当前所有在线用户同时进行更新文件的数据传输。计算出当前服务器网络带宽对于当前在线用户数量同时传输数据时的传输速度，使用该传输速度调整第一传输速度后，服务器可以同时向在线用户发出更新指令，并以调整后的第一传输速度作为数据传输速度上限，进行更新文件的数据传输。根据本发明实施例，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，具体为：判断进入所述分组传输模式时，根据所述第一用户数量信息为用户配置随机码；根据所述随机码对用户进行排序；根据所述第一传输数量信息对排序的用户进行分组。需要说明的是，第一用户数量信息是当前在线使用应用程序的用户数量，也就是在线用户数量；第一传输数量信息是指服务器所允许的同时进行更新文件传输时的用户数量，也就是并发用户数量。当判断进入所述分组传输模式时，根据在线用户数量为生成随机码，并向每位在线用户进行配置。例如，当在线用户数量为1234时，则为每位用户在1至1234之间随机选择一个值进行配置，通常而言，这类型的配置是为每位用户配置各不相同的随机码。向每位用户配置随机码后，用户依据随机码进行排序，排序规则包括不限于升序、降序等。然后，以并发用户数量为界设置一组用户数量，对排序后的用户进行分组。例如，在线用户数量为1234，并发用户数量为1000，此时将排序后第1位至第1000位用户设置为第一组、第1001至第1234位用户设置为第二组。根据本发明实施例，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，具体为：判断进入所述分组传输模式时，获取用户在线时长信息；根据所述在线时长信息对用户进行排序；根据第一传输数量信息对排序的用户进行分组。需要说明的是，第一用户数量信息是当前在线使用应用程序的用户数量，也就是在线用户数量；第一传输数量信息是指服务器所允许的同时进行更新文件传输时的用户数量，也就是并发用户数量。当判断进入所述分组传输模式时，服务器获取每位在线用户的在线时长。在线时长可以是此次使用应用程序的时长、可以是累计使用应用程序的总时长、可以是预设时间内使用应用程序的总时长，例如3天内、7天内使用应用程序的时长。依据在线时长的长短，依照降序的方式进行排序，然后，以并发用户数量为界设置一组用户数量，对排序后的用户进行分组。在线时长可表示用户对应用程序的使用频率，为高频使用者优先推送更新升级消息。根据本发明实施例，所述判断进入分组传输模式时，根据第一用户信息和第一传输数量信息对用户进行分组，还包括：判断进入所述分组传输模式时，获取用户的IP地址信息；根据所述IP地址信息得到用户所在的区域信息；根据用户的所在的区域信息对用户进行分组。需要说明的是，第一用户数量信息是当前在线使用应用程序的用户数量，也就是在线用户数量；第一传输数量信息是指服务器所允许的同时进行更新文件传输时的用户数量，也就是并发用户数量。当判断进入所述分组传输模式时，服务器获取每位在线用户的IP地址信息，根据IP地址信息可查询到用户所在的区域。例如，在中国境内，可通过用户的IP地址查询到用户所在的省份、城市。然后，依据区域对用户进行分组，使得同一区域的用户尽量得到相近的更新推荐时间。根据本发明实施例，所述根据第一传输时间信息和第一传输数量信息，对每组用户进行编号，具体为：根据所述第一传输时间信息和所述第一传输数量信息，得到时间间隔信息；根据时间间隔信息依次对每组用户标注时间编号；其中，时间编号才用向上或向下取整的方式。需要说明的是，第一传输数量信息是指服务器所允许的同时进行更新文件传输时的用户数量，即并发用户数量；第一传输时间信息为更新文件在第一传输速度下完成传输所需要的时间，即传输完成时间。根据并发用户数量和传输完成时间，计算间隔时间，再依照间隔时间对组内用户进行编号。例如，并发用户数量为1000，传输完成时间为30000毫秒，则时间间隔为30毫秒，依照时间对每组进行编号为30毫秒、60毫秒、90毫秒……。通常而言，时间编号是以毫秒为单位、或者以每10毫秒为单位，进行向上或向下取整。值得一提的是，还包括：当分组完成编号后，获取第一用户数量信息；当第一用户数量信息大于完成分组编号的用户数量时，为部分用户配置分组和编号。需要说明的是，第一用户数量信息是当前在线使用应用程序的用户数量，也就是在线用户数量。当分组完成编号后，再次获取当前在线用户数量，如果当前在线用户数量比已分组编号的在线用户数量大，说明分组编号完成后有其他用户登录使用应用程序。此时，为这些用户配置依据所采用的分组编号规则分组和编号。例如，若是采用随机码规则或在线时长规则分组编号的，对于后登录的在线用户在最后一个分组在按登录进行编号；若是采用区域分配规则分组编号的，对于后登录的在线用户依据所在区域进行分组。值得一提的是，还包括：获取第二用户数量信息和各个用户的第二传输速度信息；根据第二用户信息和第二传输速度信息，得到第二网络带宽信息；判断第二网络带宽信息是否低于第一网络带宽信息；若低于，根据各个用户的第二传输速度信息调整传输速度。需要说明的是，第二用户数量信息是正在进行更新文件数据传输的用户数量；第二传输速度信息是各个用户由自身网络性能所得到的实际传输速度；第二网络带宽信息是当前正在进行更新文件数据传输的用户所占用的服务器的实际网络带宽；第一网络带宽信息是服务器所的网络所允许的网络带宽。当实际占用的网络带宽低于允许的网络带宽，表示服务器还可接受更大传输压力。可根据每个用户的实际传输速度进行调整，增加部分用户的传输速度上限，以降低文件传输的时间。值得一提的是，还包括：获得更新文件大小信息；根据更新文件大小信息和第一传输速度得到第一传输时间信息；判断第一传输时间信息是否大于预设的时间阈值；若是，进入预更新模式；根据网络带宽信息和第一用户数量信息调整第一传输速度信息，并向用户发送预更新指令。需要说明的是，据更新文件大小信息，也就是更新文件的数据总量，计算在第一传输速度下所需要的传输时间。第一传输时间信息为更新文件在第一传输速度下完成传输所需要的时间，即传输完成时间。当传输完成时间大于预设的时间阈值时，表示更新文件数据量大，需要长时间才能完成传输，若应用软件是设置为更新过程中不能使用的情况，传输时间长势必会造成影响用户使用应用软件。当检测到文件传输所需时间大于预设的时间阈值时，则根据在线用户数量计算出服务器网络带宽所允许的传输速度。服务器向所有在线用户发送预更新指令，即按照所允许的传输速度为上限，在应用程序后台进行文件下载。预更新指令对于用户而言，有网络资源耗费低，传输时间长的特点，且更新文件数据传输过程中不影响应用程序的正常使用。本发明第三方面提供了一种计算机可读存储介质，所述计算机可读存储介质中包括一种降低服务器压力的软件更新方法程序，所述降低服务器压力的软件更新方法程序被处理器执行时，实现如上述任一项所述的降低服务器压力的软件更新方法的步骤。本发明提供了一种降低服务器压力的软件更新方法、系统和存储介质，通过对服务器端网络性能和在线用户数量进行分析，对在线用户进行分组和按时间进行编号；然后，根据分组和时间编号依次对在线用户下发应用程序更新指令，执行更新文件传输操作；在保持现有服务器和网络带宽性能的前提下，通过把控更新文件传输的情况，达到在不提高企业成本的条件下降低企业服务器短时压力的效果，防止网络阻塞及无响应情况的出现。另外，根据更新文件的传输情况调整传输速状态，用以提高用户的使用体验。所述功能如果以软件功能模块的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上所述仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
