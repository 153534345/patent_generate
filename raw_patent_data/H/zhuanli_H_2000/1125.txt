标题title
一种客户端漫游的方法、装置及电子设备
摘要abst
本申请实施例提供一种客户端漫游的方法、装置及电子设备。在本实施例中，向客户端当前接入的第一UP设备发送网段路由，以在第一UP设备被配置的第一网段和漫游至的目标UP设备被配置的第二网段相同时，将报文通过第一UP设备与第二UP设备之间的第一传输隧道传输；向第一UP设备发送主机路由，以在客户端未发生漫游时直接转发报文；在目标UP设备与第一UP设备之间存在第二传输隧道且第二网段和第一网段不同时，向第一UP设备发送第一路由信息由第一UP设备生成第一主机隧道路由，以通过第二传输隧道传输报文，在客户端漫游时，不需要CP设备一直发送控制信息，避免了客户端数量多且客户端频繁上下线时影响CP设备处理性能的问题。
权利要求书clms
1.一种客户端漫游的方法，其特征在于，所述方法应用于虚拟宽带远程接入服务器vBRAS组网中的控制平面CP设备，所述CP设备与所述vBRAS组网中的至少两个用户平面UP设备连接；所述方法包括：当接收到目标客户端的上线请求后，向所述目标客户端当前接入的第一主接口所属的第一UP设备发送网段路由，所述网段路由包括指示标记以及出接口，所述指示标记用于指示所述第一UP设备是否发布所述网段路由；所述网段路由还用于在本地未匹配到所述目标客户端的主机路由且所述第一UP设备被配置的第一网段和目标UP设备被配置的第二网段相同时，通过所述出接口指示的第一传输隧道，向第一备接口所属的第二UP设备发送接收到的报文；所述目标UP设备为所述目标客户端漫游后接入的UP设备，所述第一备接口为所述第一主接口的备接口；当监控到所述目标客户端从所述第一主接口上线成功时，向所述第一UP设备发送所述主机路由，所述主机路由用于指示在所述目标客户端未发生漫游时，由所述第一UP设备将所述报文通过所述第一主接口转发至所述目标客户端；在监控到所述目标客户端从所述第一主接口漫游至所述目标UP设备的目标主接口后，若确定出所述目标UP设备与所述第一UP设备之间存在第二传输隧道且所述第二网段和所述第一网段不同，向所述第一UP设备发送第一路由信息，以由所述第一UP设备基于所述第一路由信息生成第一主机隧道路由，所述第一主机隧道路由用于指示将所述报文通过所述第二传输隧道发送至所述目标UP设备。2.根据权利要求1所述的方法，其特征在于，在监控到所述目标客户端从所述第一主接口漫游至所述目标UP设备的目标主接口后，所述方法还包括：若确定出所述目标UP设备与所述第一UP设备之间不存在所述第二传输隧道，则向所述目标UP设备发送控制信号，以使得所述目标UP设备基于所述控制信号向网络侧的路由器发布所述目标客户端的主机路由，所述主机路由用于指示所述路由器将所述报文发送至所述目标主接口所属的目标UP设备。3.根据权利要求1所述的方法，其特征在于，所述第二UP设备被配置第一网段；所述方法还包括：在监控到所述第一主接口和所述第一备接口发生主备切换事件时，若所述目标UP设备与所述第二UP设备之间存在第三传输隧道且所述第二网段和所述第一网段不同，则向所述第二UP设备发送第二路由信息，以由第二UP设备基于所述第二路由信息生成第二主机隧道路由，所述第二主机隧道路由用于指示将所述报文通过所述第三传输隧道发送至所述目标UP设备。4.根据权利要求1所述的方法，其特征在于，第三UP设备包括所述目标主接口的目标备接口，所述目标备接口被配置第二网段；所述方法还包括：在监控到所述目标备接口和所述目标主接口发生主备切换事件时，若所述第三UP设备与所述第一UP设备之间存在第四传输隧道且所述第二网段和所述第一网段不同，则向所述第一UP设备发送第三路由信息，以由第一UP设备基于所述第三路由信息生成第三主机隧道路由，所述第三主机隧道路由用于指示将所述报文通过所述第四传输隧道发送至所述第三UP设备。5.根据权利要求3所述的方法，其特征在于，第三UP设备包括所述目标主接口的目标备接口，所述目标备接口被配置第二网段；所述方法还包括：在监控到所述目标备接口和所述目标主接口发生主备切换事件时，若所述第三UP设备与所述第二UP设备之间存在第五传输隧道且所述第二网段和所述第一网段不同，则向所述第二UP设备发送第四路由信息，以由所述第二UP设备基于所述第四路由信息生成第四主机隧道路由，所述第四主机隧道路由用于指示将所述报文通过所述第五传输隧道发生至所述第三UP设备。6.根据权利要求2所述的方法，其特征在于，第三UP设备包括所述目标主接口的目标备接口，所述目标备接口被配置第二网段；所述方法还包括：在监控到所述目标备接口和所述目标主接口发生主备切换事件时，若所述第三UP设备与所述第一UP设备之间不存在第三传输隧道，则向所述第三UP设备发送控制信息，以控制所述第三UP设备将所述目标客户端的主机路由发布至所述网络侧的路由器，以使得所述报文被传输至所述第三UP设备，由所述第三UP设备将所述报文发送至所述目标客户端；向所述目标UP设备发送控制信息，以控制所述目标UP设备撤销发布所述目标客户端的主机路由。7.一种客户端漫游的方法，其特征在于，所述方法应用于虚拟宽带远程接入服务器vBRAS组网中的用户平面UP设备，所述UP设备与至少一个其他UP设备均与所述vBRAS组网中的控制平面CP设备连接，第一目标客户端当前接入本UP设备的第一主接口，所述方法包括：接收所述CP设备下发的网段路由，所述网段路由是所述CP设备接收到所述第一目标客户端发送的上线请求后下发，所述网段路由包括指示标记以及出接口，所述指示标记用于指示本UP设备是否发布所述网段路由；所述网段路由还用于在本地未匹配到所述第一目标客户端的主机路由且本UP设备被配置的第一网段和目标UP设备被配置的第二网段相同时，通过所述出接口指示的第一传输隧道，向第一备接口所属的第二UP设备发送接收到的报文；所述目标UP设备为所述第一目标客户端漫游后接入的UP设备，所述第一备接口为所述第一主接口的备接口；接收所述CP设备下发的第一目标客户端的主机路由，所述主机路由是所述CP设备在监控到所述第一目标客户端从所述第一主接口上线成功时下发，所述主机路由用于指示在所述第一目标客户端未发生漫游时，将所述报文通过所述第一主接口转发至所述第一目标客户端；接收所述CP设备发送的第一路由信息，并基于接收到的所述第一路由信息生成第一主机隧道路由；所述第一主机隧道路由用于指示在所述第一网段和所述第二网段不同时，将所述报文通过第二传输隧道发送至所述目标UP设备；所述第一路由信息是在所述CP设备监控到所述第一目标客户端从本UP设备漫游到所述目标UP设备、且本UP设备与所述目标UP设备之间存在第二传输通道时下发。8.根据权利要求7所述的方法，其特征在于，所述方法还包括：接收所述CP设备发送的主机路由删除指令，所述主机路由删除指令是所述CP设备监控到所述第一目标客户端发生漫游时发送；根据所述主机路由删除指令，删除对应的所述第一目标客户端的主机路由。9.根据权利要求7所述的方法，其特征在于，所述方法还包括：接收所述CP设备发送的主机隧道路由删除指令，所述主机隧道路由删除指令是所述CP设备监控到所述第一目标客户端从所述目标UP设备漫游至除所述目标UP设备之外的其他UP设备时发送；根据所述主机路由删除指令，删除对应的目标主机隧道路由。10.根据权利要求7所述的方法，其特征在于，所述方法还包括：接收所述CP设备发送的第一控制信号，所述第一控制信号是所述CP设备监控到第二目标客户端漫游至本UP设备、且所述第二目标客户端漫游前接入的UP设备与本UP设备之间不存在传输隧道时发送的；所述第一控制信号用于指示本UP设备向网络侧的路由器发布所述第二目标客户端的主机路由；基于所述第一控制信号向网络侧的路由器发布所述第二目标客户端的主机路由，以使所述路由器将目的IP地址为所述第二目标客户端的IP地址的报文发送至本UP设备。11.根据权利要求10所述的方法，其特征在于，所述方法还包括：接收所述CP设备发送的第二控制信号，所述第二控制信号是所述CP设备在监控到所述第一备接口和所述第一主接口发生主备切换事件，且所述第二UP设备与所述第二目标客户端漫游前接入的UP设备之间不存在第三传输隧道时发送的；所述第二控制信号用于指示本UP设备撤销发布所述第二目标客户端的主机路由；基于所述第二控制信号撤销发布所述第二目标客户端的主机路由。12.一种客户端漫游的装置，其特征在于，所述装置应用于虚拟宽带远程接入服务器vBRAS组网中的控制平面CP设备，所述CP设备与所述vBRAS组网中的至少两个用户平面UP设备连接；所述装置包括：网段路由发送模块，用于当接收到目标客户端的上线请求后，向所述目标客户端当前接入的第一主接口所属的第一UP设备发送网段路由，所述网段路由包括指示标记以及出接口，所述指示标记用于指示所述第一UP设备是否发布所述网段路由；所述网段路由还用于在本地未匹配到所述目标客户端的主机路由且所述第一UP设备被配置的第一网段和目标UP设备被配置的第二网段相同时，通过所述出接口指示的第一传输隧道，向第一备接口所属的第二UP设备发送接收到的报文；所述目标UP设备为所述目标客户端漫游后接入的UP设备，所述第一备接口为所述第一主接口的备接口；主机路由发送模块，用于当监控到所述目标客户端从所述第一主接口上线成功时，向所述第一UP设备发送所述主机路由，所述主机路由用于指示在所述目标客户端未发生漫游时，由所述第一UP设备将所述报文通过所述第一主接口转发至所述目标客户端；第一路由信息发送模块，用于在监控到所述目标客户端从所述第一主接口漫游至所述目标UP设备的目标主接口后，若确定出所述目标UP设备与所述第一UP设备之间存在第二传输隧道且所述目标UP设备被配置的第二网段和所述第一UP设备被配置的第一网段不同，向所述第一UP设备发送第一路由信息，以由所述第一UP设备基于所述第一路由信息生成第一主机隧道路由，所述第一主机隧道路由用于指示将所述报文通过所述第二传输隧道发送至所述目标UP设备。13.一种客户端漫游的装置，其特征在于，所述装置应用于虚拟宽带远程接入服务器vBRAS组网中的用户平面UP设备，所述UP设备与至少一个其他UP设备均与所述vBRAS组网中的控制平面CP设备连接，第一目标客户端当前接入本UP设备的第一主接口，所述装置包括：网段路由接收模块，用于接收所述CP设备下发的网段路由，所述网段路由是所述CP设备接收到所述第一目标客户端发送的上线请求后下发，所述网段路由包括指示标记以及出接口，所述指示标记用于指示本UP设备是否发布所述网段路由；所述网段路由还用于在本地未匹配到所述第一目标客户端的主机路由且本UP设备被配置的第一网段和目标UP设备被配置的第二网段相同时，通过所述出接口指示的第一传输隧道，向第一备接口所属的第二UP设备发送接收到的报文；所述目标UP设备为所述第一目标客户端漫游后接入的UP设备，所述第一备接口为所述第一主接口的备接口；主机路由接收模块，用于接收所述CP设备下发的第一目标客户端的主机路由，所述主机路由是所述CP设备在监控到所述第一目标客户端从所述第一主接口上线成功时下发，所述主机路由用于指示在所述第一目标客户端未发生漫游时，将所述报文通过所述第一主接口转发至所述第一目标客户端；主机隧道路由生成模块，用于接收所述CP设备发送的第一路由信息，并基于接收到的所述第一路由信息生成第一主机隧道路由；所述第一主机隧道路由用于指示在所述第一网段和所述第二网段不同时，将所述报文通过第二传输隧道发送至所述目标UP设备；所述第一路由信息是在所述CP设备监控到所述第一目标客户端从本UP设备漫游到所述目标UP设备、且本UP设备与所述目标UP设备之间存在第二传输通道时下发。
说明书desc
技术领域本申请涉及通信领域，尤其涉及一种客户端漫游的方法、装置及电子设备。背景技术在虚拟宽带远程接入服务器转发与控制分离的组网中，包括控制平面设备，该CP设备管理了多个用户平面设备。若客户端从其中一个UP设备上线，CP设备控制第一UP设备发布客户端的主机路由，以使得网络侧访问客户端的报文被传输至该第一UP设备，由该第一UP设备将报文转发至客户端。而当客户端从第一UP设备漫游到另一个UP设备时，CP设备控制第一UP设备撤销发布客户端的主机路由，并且控制第二UP设备发布客户端的主机路由，以使得报文被传输至该第二UP设备，由该第二UP设备将报文转发至客户端。这样，当客户端的数量很多并且各客户端频繁的上线和下线时，会影响CP设备的处理性能。发明内容有鉴于此，本申请实施例提供一种客户端漫游的方法、装置及电子设备，以避免客户端的数量很多且各客户端频繁的上线和下线时影响CP设备的处理性能的问题。根据本申请实施例的第一方面，提供一种客户端漫游的方法，所述方法应用于虚拟宽带远程接入服务器vBRAS组网中的控制平面CP设备，所述CP设备与所述vBRAS组网中的至少两个用户平面UP设备连接；所述方法包括：当接收到目标客户端的上线请求后，向所述当前接入的第一主接口所属的第一UP设备发送网段路由，所述网段路由包括指示标记以及出接口，所述指示标记用于指示所述第一UP设备是否发布所述网段路由；所述网段路由还用于在本地未匹配到所述目标客户端的主机路由且所述第一UP设备被配置的第一网段和目标UP设备被配置的第二网段相同时，通过所述出接口指示的第一传输隧道，向第一备接口所属的第二UP设备发送接收到的报文；所述目标UP设备为所述目标客户端漫游后接入的UP设备，所述第一备接口为所述第一主接口的备接口；当监控到所述目标客户端从所述第一主接口上线成功时，向所述第一UP设备发送所述主机路由，所述主机路由用于指示在所述目标客户端未发生漫游时，由所述第一UP设备将所述报文通过所述第一主接口转发至所述目标客户端；在监控到所述目标客户端从所述第一主接口漫游至所述目标UP设备的目标主接口后，若确定出所述目标UP设备与所述第一UP设备之间存在第二传输隧道且所述目标UP设备被配置的第二网段和所述第一UP设备被配置的第一网段不同，向所述第一UP设备发送第一路由信息，以由所述第一UP设备基于所述第一路由信息生成第一主机隧道路由，所述第一主机隧道路由用于指示将所述报文通过所述第二传输隧道发送至所述目标UP设备。根据本申请实施例的第二方面，提供一种客户端漫游的方法，所述方法应用于虚拟宽带远程接入服务器vBRAS组网中的用户平面UP设备，所述UP设备与至少一个其他UP设备均与所述vBRAS组网中的控制平面CP设备连接，第一目标客户端当前接入本UP设备的第一主接口，所述方法包括：接收所述CP设备下发的网段路由，所述网段路由是所述CP设备接收到所述第一目标客户端发送的上线请求后下发，所述网段路由包括指示标记以及出接口，所述指示标记用于指示本UP设备是否发布所述网段路由；所述网段路由还用于在本地未匹配到所述第一目标客户端的主机路由且本UP设备被配置的第一网段和目标UP设备被配置的第二网段相同时，通过所述出接口指示的第一传输隧道，向第一备接口所属的第二UP设备发送接收到的报文；所述目标UP设备为所述第一目标客户端漫游后接入的UP设备，所述第一备接口为所述第一主接口的备接口；接收所述CP设备下发的第一目标客户端的主机路由，所述主机路由是所述CP设备在监控到所述第一目标客户端从所述第一主接口上线成功时下发，所述主机路由用于指示在所述第一目标客户端未发生漫游时，将所述报文通过所述第一主接口转发至所述第一目标客户端；接收所述CP设备发送的第一路由信息，并基于接收到的所述第一路由信息生成第一主机隧道路由；所述第一主机隧道路由用于指示在所述第一网段和所述第二网段不同时，将所述报文通过所述第二传输隧道发送至所述目标UP设备；所述第一路由信息是在所述CP设备监控到所述第一目标客户端从本UP设备漫游到所述目标UP设备、且本UP设备与所述目标UP设备之间存在第二传输通道时下发。根据本申请实施例的第三方面，提供一种客户端漫游的装置，所述装置应用于虚拟宽带远程接入服务器vBRAS组网中的控制平面CP设备，所述CP设备与所述vBRAS组网中的至少两个用户平面UP设备连接；所述装置包括：网段路由发送模块，用于当接收到目标客户端的上线请求后，向所述目标客户端当前接入的第一主接口所属的第一UP设备发送网段路由，所述网段路由包括指示标记以及出接口，所述指示标记用于指示所述第一UP设备是否发布所述网段路由；所述网段路由还用于在本地未匹配到所述目标客户端的主机路由且所述第一UP设备被配置的第一网段和目标UP设备被配置的第二网段相同时，通过所述出接口指示的第一传输隧道，向第一备接口所属的第二UP设备发送接收到的报文；所述目标UP设备为所述目标客户端漫游后接入的UP设备，所述第一备接口为所述第一主接口的备接口；主机路由发送模块，用于当监控到所述目标客户端从所述第一主接口上线成功时，向所述第一UP设备发送所述主机路由，所述主机路由用于指示在所述目标客户端未发生漫游时，由所述第一UP设备将所述报文通过所述第一主接口转发至所述目标客户端；第一路由信息发送模块，用于在监控到所述目标客户端从所述第一主接口漫游至所述目标UP设备的目标主接口后，若确定出所述目标UP设备与所述第一UP设备之间存在第二传输隧道且所述目标UP设备被配置的第二网段和所述第一UP设备被配置的第一网段不同，向所述第一UP设备发送第一路由信息，以由所述第一UP设备基于所述第一路由信息生成第一主机隧道路由，所述第一主机隧道路由用于指示将所述报文通过所述第二传输隧道发送至所述目标UP设备。根据本申请实施例的第四方面，提供一种客户端漫游的装置，所述装置应用于虚拟宽带远程接入服务器vBRAS组网中的用户平面UP设备，所述UP设备与至少一个其他UP设备均与所述vBRAS组网中的控制平面CP设备连接，第一目标客户端当前接入本UP设备的第一主接口，所述装置包括：网段路由接收模块，用于接收所述CP设备下发的网段路由，所述网段路由是所述CP设备接收到所述第一目标客户端发送的上线请求后下发，所述网段路由包括指示标记以及出接口，所述指示标记用于指示本UP设备是否发布所述网段路由；所述网段路由还用于在本地未匹配到所述第一目标客户端的主机路由且本UP设备被配置的第一网段和目标UP设备被配置的第二网段相同时，通过所述出接口指示的第一传输隧道，向第一备接口所属的第二UP设备发送接收到的报文；所述目标UP设备为所述第一目标客户端漫游后接入的UP设备，所述第一备接口为所述第一主接口的备接口；主机路由接收模块，用于接收所述CP设备下发的第一目标客户端的主机路由，所述主机路由是所述CP设备在监控到所述第一目标客户端从所述第一主接口上线成功时下发，所述主机路由用于指示在所述第一目标客户端未发生漫游时，将所述报文通过所述第一主接口转发至所述第一目标客户端；主机隧道路由生成模块，用于接收所述CP设备发送的第一路由信息，并基于接收到的所述第一路由信息生成第一主机隧道路由；所述第一主机隧道路由用于指示在所述第一网段和所述第二网段不同时，将所述报文通过所述第二传输隧道发送至所述目标UP设备；所述第一路由信息是在所述CP设备监控到所述第一目标客户端从本UP设备漫游到所述目标UP设备、且本UP设备与所述目标UP设备之间存在第二传输通道时下发。根据本申请实施例的第五方面，提供一种电子设备，电子设备包括：处理器和存储器；其中，所述存储器，用于存储机器可执行指令；所述处理器，用于读取并执行所述存储器存储的机器可执行指令，以实现如第一方面或第二方面所述的方法。本申请实施例提供的技术方案可以包括以下有益效果：本申请实施例中，通过向目标客户端当前接入的第一主接口所属的第一UP设备发送网段路由，以在第一UP设备被配置的第一网段和目标客户端漫游至的目标UP设备被配置的第二网段相同时，将报文发送至第一UP设备与第一备接口所属的第二UP设备之间的第一传输隧道；向第一UP设备发送主机路由，以在目标客户端未发生漫游时，由第一UP设备将报文转发至目标客户端；在目标UP设备与第一UP设备之间存在第二传输隧道且第二网段和第一网段不同时，向第一UP设备发送第一路由信息，以由第一UP设备生成第一主机隧道路由，以通过第二传输隧道传输报文，在客户端漫游时，不需要CP设备一直发送控制信息，避免了客户端的数量很多且各客户端频繁的上线和下线时影响CP设备的处理性能的问题。附图说明图1a是本申请实施例示出的一种vBRAS转控分离组网的示例图。图1b是本申请实施例示出的一种vBRAS转控分离功能划分的示例图。图2是本申请实施例示出的一种接口备份的示例图。图3是本申请实施例示出的一种客户端上线的交互图。图4是本申请实施例示出的一种客户端漫游的方法的流程图。图5是本申请实施例示出的另一种客户端漫游的方法的流程图。图6是本申请实施例示出的一种客户端漫游的装置的框图。图7是本申请实施例示出的另一种客户端漫游的装置的框图。图8是本申请实施例示出的电子设备的一种硬件结构图。具体实施方式这里将详细地对示例性实施例进行说明，其示例表示在附图中。下面的描述涉及附图时，除非另有表示，不同附图中的相同数字表示相同或相似的要素。以下示例性实施例中所描述的实施方式并不代表与本申请相一致的所有实施方式。相反，它们仅是与如所附权利要求书中所详述的、本申请的一些方面相一致的装置和方法的例子。在本申请使用的术语是仅仅出于描述特定实施例的目的，而非旨在限制本申请。在本申请和所附权利要求书中所使用的单数形式的“一种”、“所述”和“该”也旨在包括多数形式，除非上下文清楚地表示其他含义。还应当理解，本文中使用的术语“和/或”是指并包含一个或多个相关联的列出项目的任何或所有可能组合。应当理解，尽管在本申请可能采用术语第一、第二、第三等来描述各种信息，但这些信息不应限于这些术语。这些术语仅用来将同一类型的信息彼此区分开。例如，在不脱离本申请范围的情况下，第一信息也可以被称为第二信息，类似地，第二信息也可以被称为第一信息。取决于语境，如在此所使用的词语“如果”可以被解释成为“在……时”或“当……时”或“响应于确定”。接下来对本说明书实施例进行详细说明。图1a所示为虚拟宽带远程接入服务器转发与控制分离的组网，该vBRAS转发与控制分离的组网是基于网络功能虚拟化标准架构设计的，该vBRAS转发与控制分离的组网是将传统BRAS的网络功能抽象成单个软件实体部署在x86服务器上的。如图1a所示，该vBRAS转发与控制分离的组网包括：vBRAS-CP设备和vBRAS-UP设备，其中，CP设备部署在x86服务器上，负责完成用户身份认证、IP地址分配和管理等控制平面功能。UP设备负责完成客户端数据流量的转发和流量控制等转发平面功能。在本实施例中，vBRAS-UP设备可以由物理设备担任，例如，路由器等，由于路由器具有转发性能强的特点，可以用来处理大流量需求的业务，这里，大流量需求的业务例如可以为：宽带上网、交互式电视IPTV等；vBRAS-UP设备也可以由虚拟设备担任，例如，部署在x86服务器上的虚拟设备，由于x86服务器具有计算能力强的特点，可以用来处理小流量需求的业务，这里，小流量需求的业务例如可以为：终端综合管理系统ITMS、基于IP的语音传输VoIP等，本申请实施例对该UP设备不作具体限定，可以根据实际情况确定。需要说明的是，当vBRAS-UP设备由虚拟设备担任时，多个UP设备可以部署在同一个x86服务器上，也可以部署在不同的x86服务器上，本申请实施例并不具体限定。除了图1a所示的vBRAS-CP设备和vBRAS-UP设备外，还包括业务系统，业务系统由AAA服务器、DHCP服务器和Portal服务器等各种不同业务类型的服务器组成，为用户提供认证、授权、计费、地址分配以及安全策略控制等业务功能。还如图1a所示，控制平面和转发平面之间存在如下三种类型的通信通道：管理通道：使用NETCONF连接作为CP设备和UP设备之间的管理通道，实现CP设备向UP设备查询数据、下发配置等功能，这里，下发配置功能例如可以为：创建子接口、下发BRAS业务配置等。控制通道：当路由器或vBRAS担任UP设备时，使用CUSP通道作为CP和UP之间的控制通道，实现业务表项下发、查询以及接口资源信息上报等功能。三层交换机担任UP设备时，使用网络通信协议OpenFlow通道作为CP设备和UP设备之间的控制通道，实现业务表项下发、查询以及接口资源信息上报等功能。协议通道：使用GPE类型的虚拟扩展局域网VXLAN隧道作为CP设备和UP设备之间的协议通道，实现动态主机配置协议DHCP、地址解析协议ARP、基于以太网的点对点通讯协议PPPoE等协议报文交互。VXLAN GPE隧道是一种扩展的VXLAN隧道，在VXLAN头中可以携带更丰富的信息，如接口类型、接口编号以及VLAN等信息，以便CP设备根据这些信息完成对客户端的合法性验证和IP地址分配等工作。至此，完成图1a所示vBRAS转发与控制分离的组网的描述。图1b所示为vBRAS转发与控制分离功能划分示例图，如图1b所示，vBRAS-CP设备可以实现用户接入控制功能、用户连接管理功能、认证授权计费功能、统一配置管理功能、地址管理、功能以及UP管理功能等。其中，用户接入控制功能指的是处理vBRAS-UP设备上送的用户PPPoE或IPoE等接入协议报文，完成用户接入控制。用户管理功能包含用户表项管理功能和用户策略管理功能；用户表项管理功能指的是vBRAS-CP设备生成用户session表项并下发给vBRAS-UP设备，用于指导用户侧流量转发；用户策略管理功能是指对用户的认证、计费、授权、地址分配、QoS等相关策略的管理。认证授权计费功能指的是由vBRAS-CP设备和AAA服务器配合，共同完成对接入用户的认证、授权和计费。统一配置管理功能指的是由vBRAS-CP设备统一完成BRAS业务的相关配置，并自动下发给其管理的所有vBRAS-UP设备。地址管理功能指的是由vBRAS-CP设备对其拥有的IP地址资源进行统一的管理。UP管理功能包括对vBRAS-UP加入/退出的管理以及vBRAS-CP和vBRAS-UP间通信通道的管理。vBRAS-UP设备定位为三层网络边缘及用户策略执行部件，主要包含流量转发、QoS、流量统计等转发平面功能。在本实施例中，vBRAS转发与控制分离组网中，UP备份指的是CP设备根据UP设备的接口状态、管理通道的状态决定UP设备上接口的主备状态，实现当主用UP设备或者主接口故障时，能够快速将客户端的业务切换至备用UP设备或者备接口，保证业务不中断。这里，主接口指的是用于承接客户端业务的接口，主接口所在的UP设备为主用UP设备。备接口为主接口的备份接口，备接口所在的UP设备为备用UP设备，当主接口故障后，备接口接替主接口转发客户端的流量，当主接口恢复，流量从备接口回切至主接口，保证客户端流量不会长时间中断。需要说明的是，主接口和备接口是CP设备配置好的，CP设备配置好各个UP设备的接口状态后，将各个接口的状态下发给UP设备，以使得UP设备的各个接口对应运行。在本实施例中，主接口和备接口的备份方法有很多种，例如，1：1热备模式、N：1温备模式、1：N温备负载分担模式。这里，1：1热备模式指的是一个主接口对应一个备接口；N：1温备模式指的是N个主接口对应一个备接口；1：N温备负载分担模式指的是N+1个主接口，没有备接口，N+1个主接口两两之间互为备份。需要说明的是，下面实施例中仅以主接口和备接口的备份方法为1:1热备模式为例进行描述。下面结合图2所示的接口备份的示例图对接口备份进行描述：管理人员可以在CP设备上依据需求创建不同的UP备份模板，这里，UP备份策略模板包括：主接口和备接口。例如，如2所示，UP设备UP A、UP B和UP C加入同一UP备份组。管理员在CP设备上配置UP备份策略模板1和UP备份策略模板2。在UP备份策略模板1中主接口为Interface A1，备接口为Interface B1。在UP备份策略模板2中主接口为Interface B2，备接口为Interface C1。在UP备份策略模板1中，如果主接口Interface A1故障，则由备接口为Interface B1接替其工作，处理用户业务；在UP备份策略模板2中，如果主接口InterfaceB2故障，则由备接口为Interface C1接替其工作，处理用户业务。下面对客户端的上线过程进行描述，如图3所示，DHCP客户端向UP设备发送DHCP发现报文，UP设备收到DHCP发现报文后，在报文中插入Option82字段后发送至CP设备，CP设备接收到插入了Option82字段后的DHCP发现报文后，向AAA服务器发送访问请求，该访问请求中可与携带用户名、口令等，以由AAA服务器对DHCP客户端进行认证，认证通过时，AAA服务器向CP设备反馈访问接受的响应报文，该响应报文中可以携带服务配置文件，CP设备接收到响应报文后，授权IPoE会话。然后CP设备向DHCP服务器发送DHCP发现报文，DHCP服务器向CP设备反馈DHCP应答报文，该DHCP应答报文中携带分配给DHCP客户端的IP地址。当完成DHCP交互后和），IPoE会话建立完成，DHCP客户端上线完成。如图4所示，图4是本申请实施例示出的一种客户端漫游的方法的流程图，该客户端漫游的方法应用于虚拟宽带远程接入服务器vBRAS组网中的控制平面CP设备，CP设备与vBRAS组网中的至少两个用户平面UP设备连接；该客户端漫游的方法包括以下步骤：S410：当接收到目标客户端的上线请求后，向目标客户端当前接入的第一主接口所属的第一UP设备发送网段路由。示例性地，在本实施例中，目标客户端的上线请求可以为DHCP发现报文，该上线请求可以通过vBRAS组网中的第一UP设备发送至本CP设备，这里，第一UP设备可以为任一vBRAS组网中的UP设备。目标客户端从第一UP设备的第一主接口接入，这里，第一主接口可以为第一UP设备上的任一主接口，第一主接口的备接口为第一备接口，第一备接口所属的UP设备为不同于第一UP设备的第二UP设备。在本实施例中，网段路由包括指示标记和出接口，上述指示标记用于指示第一UP设备是否要发布该网段路由，若指示标记指示要发布网段路由，则将该网段路由发布出去，以使得目的IP地址在该网段路由所指示的网段中的报文被传输至第一UP设备。该网段路由还用于在本地未匹配到目标客户端的主机路由、并且第一UP设备被配置的第一网段和目标客户端漫游至的目标主接口所属的目标UP设备被配置的第二网段相同时，通过上述出接口指示的第一传输隧道，向第一备接口所属的第二UP设备发送接收到的报文。这里，报文指的是从互联网侧访问目标客户端的流量，例如，视频流量等等，本申请实施例并不具体限定。在本实施例中，目标UP设备为所述目标客户端漫游后接入的UP设备，目标主接口所属的目标UP设备可以为第一UP设备，也可以为不同于第一UP设备的其他UP设备，本申请实施例并不具体限定。在本实施例中，目标UP设备以及目标主接口的备接口所属的UP设备被配置第二网段。本步骤S410中，当接收到目标客户端的上线请求后，向第一UP设备和第二UP设备发送网段路由，这里，网段路由可以包括：分配给第一UP设备和第二UP设备的第一网段、出接口、cost值以及指示标记，本申请实施例对网段路由不作具体限定。需要说明的是，CP设备向第一UP设备和第二UP设备发送的网段路由的cost值和指示标记不同，发向第一UP设备的网段路由的cost值小于发向第二UP设备的网段路由的cost值；发向第一UP设备的网段路由的指示标记用于指示对外发布网段路由；发向第二UP设备的网段路由的指示标记用于指示不对外发布网段路由。S420：当监控到目标客户端从第一主接口上线成功时，向第一UP设备发送主机路由。示例性地，在本实施例中，基于上述DHCP客户端上线过程的描述，在目标客户端通过验证以及获取到被分配的IP地址后，就认为该目标客户端上线成功，当CP设备监控到目标客户端从第一主接口上线成功时，就向第一UP设备发送主机路由。这里，主机路由用于指示在目标客户端未发生漫游时，由第一UP设备将接收到的报文通过第一主接口转发至目标客户端，主机路由用于说明到目标客户端的报文从哪个接口出去，当目标客户端从第一主接口上线成功时，主机路由的出接口即为第一主接口。S430：在监控到目标客户端从第一主接口漫游至目标UP设备的目标主接口后，若确定出目标UP设备与第一UP设备之间存在第二传输隧道且目标UP设备被配置的第二网段和第一UP设备被配置的第一网段不同，向第一UP设备发送第一路由信息，以由第一UP设备基于第一路由信息生成第一主机隧道路由，第一主机隧道路由用于指示将报文通过第二传输隧道发送至目标UP设备。示例性地，在本实施例中，目标UP设备与第一UP设备之间的第二传输隧道是提前构建好的，该第二传输隧道是虚拟隧道。在本实施例中，本步骤S430中，CP设备在确定出目标UP设备与第一UP设备之间存在第二传输隧道且目标UP设备被配置的第二网段和第一UP设备被配置的第一网段不同时，向第一UP设备发送第一路由信息，这里，第一路由信息中，目的地址为目标客户端的IP地址，掩码为目标客户端的掩码。第一UP设备接收到第一路由信息后，可以基于该第一路由信息生成第一主机隧道路由，第一主机隧道路由用于指示将报文通过第二传输隧道发送至目标UP设备。至此，完成图4流程。通过图4流程可以看出，通过向目标客户端当前接入的第一主接口所属的第一UP设备发送网段路由，以在第一UP设备被配置的第一网段和目标客户端漫游至的目标UP设备被配置的第二网段相同时，将报文发送至第一UP设备与第一备接口所属的第二UP设备之间的第一传输隧道；向第一UP设备发送主机路由，以在目标客户端未发生漫游时，由第一UP设备将报文转发至目标客户端；在目标UP设备与第一UP设备之间存在第二传输隧道且第二网段和第一网段不同时，向第一UP设备发送第一路由信息，以由第一UP设备生成第一主机隧道路由，以通过第二传输隧道传输报文，在客户端漫游时，不需要CP设备一直发送控制信息，避免了客户端的数量很多且各客户端频繁的上线和下线时影响CP设备的处理性能的问题。作为本申请实施例一个可选实施方式，在监控到目标客户端从第一主接口漫游至目标UP设备的目标主接口后，该客户端漫游的方法还包括：若确定出目标UP设备与第一UP设备之间不存在第二传输隧道，则向目标UP设备发送控制信号，以使得目标UP设备基于控制信号向网络侧的路由器发布目标客户端的主机路由，主机路由用于指示路由器将报文发送至目标主接口所属的目标UP设备。示例性地，在本实施例中，若确定出目标UP设备与第一UP设备之间不存在第二传输隧道，则报文无法通过网段路由被传输到目标UP设备，此时需要向目标UP设备发送控制信号，以使得目标UP设备基于控制信号将目标客户端的主机路由发送至网络侧的路由器，以使得路由器基于目标客户端的主机路由将接收到的报文发送至目标UP设备，由目标UP设备将报文转发至目标客户端，即实现通过主机路由的方案将报文传输到目标UP设备，再由目标UP设备将报文转发至目标客户端。作为本申请实施例一个可选实施方式，第二UP设备被配置第一网段；该客户端漫游的方法还包括：在监控到第一主接口和第一备接口发生主备切换事件时，若目标UP设备与第二UP设备之间存在第三传输隧道且第二网段和第一网段不同，则向第二UP设备发送第二路由信息，以由第二UP设备基于第二路由信息生成第二主机隧道路由，第二主机隧道路由用于指示将报文通过第三传输隧道发送至目标UP设备；第二路由信息中，目的地址为目标客户端的IP地址，掩码为目标客户端的掩码。示例性地，在本实施例中，考虑到主备接口可能会发生切换，因此，CP设备需要监控第一主接口和第一备接口的状态，当监控到第一主接口和第一备接口发生主备切换事件时，若发现目标UP设备与第二UP设备之间存在第三传输隧道且第二网段和第一网段不同，即无法通过网段路由将报文发送至目标UP设备，则向第二UP设备发送第二路由信息，以由第二UP设备基于第二路由信息生成第二主机隧道路由，这里，第二路由信息中，目的地址为目标客户端的IP地址，掩码为目标客户端的掩码。同样的，CP设备也需要监控目标主接口和目标备接口的状态，在监控到目标备接口和目标主接口发生主备切换事件时，若发现目标备接口所属的第三UP设备与第一UP设备之间存在第四传输隧道且第二网段和第一网段不同，则向第一UP设备发送第三路由信息，以由第一UP设备基于第三路由信息生成第三主机隧道路由，第三主机隧道路由用于指示将报文通过第四传输隧道发送至第三UP设备；这里，第三路由信息中，目的地址为目标客户端的IP地址，掩码为目标客户端的掩码。在在监控到第一主接口和第一备接口发生主备切换事件后，又监控到目标备接口和目标主接口发生主备切换事件时，若发现目标备接口所属的第三UP设备与第二UP设备之间存在第五传输隧道且第二网段和第一网段不同，则向第二UP设备发送第四路由信息，以由第二UP设备基于第四路由信息生成第四主机隧道路由，第四主机隧道路由用于指示将报文通过第五传输隧道发送至第三UP设备；这里，第四路由信息中，目的地址为目标客户端的IP地址，掩码为目标客户端的掩码。作为本申请实施例一个可选实施方式，目标主接口被配置的备接口为目标备接口，目标备接口被配置第二网段；该客户端漫游的方法还包括：在监控到目标备接口和目标主接口发生主备切换事件时，若目标备接口所属的第三UP设备与第一UP设备之间不存在第三传输隧道，则向第三UP设备发送控制信息，以控制第三UP设备将目标客户端的主机路由发布至网络侧的路由器，以使得报文被传输至第三UP设备，由第三UP设备将报文发送至目标客户端；向目标UP设备发送控制信息，以控制目标UP设备撤销发布目标客户端的主机路由。如图5所示，图5是本申请实施例示出的一种客户端漫游的方法的流程图，该客户端漫游的方法应用于虚拟宽带远程接入服务器vBRAS组网中的用户平面UP设备，UP设备与至少一个其他UP设备均与vBRAS组网中的控制平面CP设备连接，第一目标客户端当前接入本UP设备的第一主接口，该客户端漫游的方法包括以下步骤：S510：接收CP设备下发的网段路由，网段路由是CP设备接收到第一目标客户端发送的上线请求后下发，网段路由包括指示标记以及出接口，指示标记用于指示本UP设备是否发布网段路由；网段路由还用于在本地未匹配到第一目标客户端的主机路由且本UP设备被配置的第一网段和目标UP设备被配置的第二网段相同时，通过出接口指示的第一传输隧道，向第一备接口所属的第二UP设备发送接收到的报文；目标UP设备为第一目标客户端漫游后接入的UP设备，第一备接口为第一主接口的备接口。S520：接收CP设备下发的第一目标客户端的主机路由，主机路由是CP设备在监控到第一目标客户端从第一主接口上线成功时下发，主机路由用于指示在第一目标客户端未发生漫游时，将报文通过第一主接口转发至第一目标客户端。S530：接收CP设备发送的第一路由信息，并基于接收到的第一路由信息生成第一主机隧道路由；第一主机隧道路由用于指示在第一网段和第二网段不同时，将报文通过第二传输隧道发送至目标UP设备；第一路由信息是在CP设备监控到第一目标客户端从本UP设备漫游到目标UP设备、且本UP设备与目标UP设备之间存在第二传输通道时下发；第一路由信息中，目的地址为目标客户端的IP地址，掩码为目标客户端的掩码。具体实施方式参见上面执行主体为CP设备的方法实施例，这里不再赘述。在本实施例中，当UP设备接收到报文时，依据该报文的目的地址匹配路由，若匹配到32位主机路由，则依据该主机路由将报文发送至客户端；若未匹配到主机路由，但可以匹配到24位的网段路由，则依据网段路由将报文发送至传输隧道；若未匹配到主机路由，但匹配到32位的主机隧道路由，则依据主机隧道路由将报文传输至传输隧道。作为本申请实施例一个可选实施方式，该客户端漫游的方法还包括：首先，接收CP设备发送的主机路由删除指令；其次，根据主机路由删除指令，删除对应的第一目标客户端的主机路由。示例性地，在本实施例中，主机路由删除指令是CP设备监控到第一目标客户端发生漫游时发送的，本UP设备在接收到CP设备发送的主机路由删除指令时，基于该主机路由删除指令，删除对应的第一目标客户端的主机路由。作为本申请实施例一个可选实施方式，该客户端漫游的方法还包括：首先，接收CP设备发送的主机隧道路由删除指令；其次，根据主机路由删除指令，删除对应的目标主机隧道路由。示例性地，在本实施例中，主机隧道路由删除指令是CP设备监控到第一目标客户端从目标UP设备漫游至除目标UP设备之外的其他UP设备时发送的，本UP设备在CP设备发送的主机隧道路由删除指令时，基于主机路由删除指令，删除对应的目标主机隧道路由。作为本申请实施例一个可选实施方式，该客户端漫游的方法还包括：首先，接收CP设备发送的第一控制信号；示例性地，在本实施例中，第一控制信号是CP设备监控到第二目标客户端漫游至本UP设备、且第二目标客户端漫游前接入的UP设备与本UP设备之间不存在传输隧道时发送的；第一控制信号用于指示本UP设备向网络侧的路由器发布第二目标客户端的主机路由。其次，基于第一控制信号向网络侧的路由器发布第二目标客户端的主机路由，以使路由器将目的IP地址为第二目标客户端的IP地址的报文发送至本UP设备。作为本申请实施例一个可选实施方式，该客户端漫游的方法还包括：首先，接收CP设备发送的第二控制信号。示例性地，在本实施例中，第二控制信号是CP设备在监控到第一备接口和第一主接口发生主备切换事件，且第二UP设备与第二目标客户端漫游前接入的UP设备之间不存在第三传输隧道时发送的；第二控制信号用于指示本UP设备撤销发布第二目标客户端的主机路由。其次，基于第二控制信号撤销发布第二目标客户端的主机路由。下面对客户端漫游的各种情况进行举例描述：客户端初次上线，通过网段路由的方法将网络侧访问客户端的报文传输至客户端初次上线的接口所属的UP设备，比如客户端从第一UP设备的第一主接口上线，UPA的Interface A1和UPB的Interface B1是一对主备接口，CP设备基于下发给UPA和UPB的网段路由中的网段给该客户端分配一个IP地址，并在客户端上线成功后，将客户端的用户表项和主机路由下发至UPA，这里，用户表项记载了客户端的IP地址、MAC地址等等，本申请实施例并不具体限定。需要说明的是，CP设备下发给UPA和UPB的网段路由中，除了cost值，其他的都一样，这里，UPA的网段路由的cost值小于UPB的网段路由的cost值。客户端上线后，漫游后的接口所在UP设备属于网段对应的主备UP，且漫游后的接口所在UP设备与UPA之间有传输隧道时：例如，CP上设置的UP备份策略模板如下：UP备份策略模板1UPA的Interface A1UPB的Interface B1UP备份策略模板2UPB的Interface B2UPC的Interface C1UP备份策略模板3UPA的Interface A3UPC的Interface C3客户端漫游到UPB的Interface B2此时目的IP地址在该网段的报文被引流到UPA，UPA上没有该客户端的主机路由，报文被通过UPA和UPB之间的传输隧道引流到UPB，UPB上有该客户端的主机路由，报文被发给该客户端。客户端漫游到UPA的Interface A3此时目的IP地址在该网段的报文被引流到UPA，UPA上有该客户端的主机路由，报文被发给该客户端。客户端上线后，漫游后的接口所在UP设备属于网段对应的主备UP，且漫游后的接口所在UP设备与UPA之间没有传输隧道时：例如，CP上设置的UP备份策略模板如下：UP备份策略模板1UPA的Interface A1UPB的Interface B1UP备份策略模板2UPB的Interface B2UPC的Interface C1UP备份策略模板3UPA的Interface A3UPC的Interface C3客户端漫游到UPB的Interface B2此时目的IP地址在该网段的报文被引流到UPA，UPA上没有该客户端的主机路由，由于UPA与UPB之间没有传输隧道，所以报文无法被引到UPB， CP设备需要通知UPB发布该客户端的主机路由，确保报文被引流到UPB。客户端漫游到UPA的Interface A3此时目的IP地址在该网段的报文被引流到UPA，UPA上有该客户端的主机路由，报文被发给该客户端。当客户端漫游到UPA的Interface A3后，发生UP主备切换，客户端接入至UPC上CP需要通知UPC发布该客户端的主机路由，确保报文被引流到UPC上。综上所属，在客户端漫游后所接入的UP设备与漫游前所接入的UP设备之间无传输隧道时，若客户端漫游后所接入的UP设备不等于网段所属UP设备中cost小的UP设备时，需要发布主机路由；当客户端漫游后所接入的UP设备等于网段所属UP设备中cost小的UP设备时,无需额外处理。客户端上线后，漫游后的接口所在UP设备不属于网段对应的主备UP，且漫游后的接口所在UP设备与UPA之间有传输隧道时：例如，CP上设置的UP备份策略模板如下：UP备份策略模板1UPA的Interface A1UPB的Interface B1UP备份策略模板2UPC的Interface C2UPD的Interface D2客户端初始上线接口是UPA的Interface A1，网段路由下发给 UPA和UPB，其中，UPA的网段路由cost值小于UPB的网段路由cost值。客户端漫游到UPC的Interface C2此时目的IP地址在该网段的报文被引流到UPA，该网段的流量被引流到UPA，UPA上没有该客户端的主机路由，需要UPA到UPC的路由将流量引流到UPC，CP设备在UPA下发路由信息，路由信息中，目的IP地址和掩码是该客户端的IP地址和掩码，下一跳是UPA与UPC建立的传输隧道，UPA接收到路由信息后，基于该路由信息构建主机隧道路由，该主机隧道无需对外发布。考虑到UPA的Interface A1和UPB的Interface B1可能发生主备切换,导致网段在UPA和UPB上网段路由的cost值发生倒换，CP设备在UPB也下发路由信息，路由信息中，目的IP地址和掩码是该客户端的IP地址和掩码，下一跳是UPB与UPC建立的传输隧道。考虑到UPC的Interface C2和UPD的Interface D2发生主备切换，客户端切换到UPD上，CP设备在UPA下发路由信息，路由信息中，目的IP地址和掩码是该客户端的IP地址和掩码，下一跳是UPA与UPD建立的传输隧道。CP设备在UPB也下发路由信息，路由信息中，目的IP地址和掩码是该客户端的IP地址和掩码，下一跳是UPB与UPD建立的传输隧道。当报文被引到UPA或UPB之后，通过已建立的主机隧道路由，可以被引流到UPD，UPD上有客户端的主机路由，进而报文被发给客户端。综上所述，在客户端漫游后所接入的UP设备与漫游前所接入的UP设备之间有传输隧道时，客户端漫游后接入的UP设备不属于网段对应的主备UP设备，在网段对应的主备UP上下发路由信息，以将网络侧的流量引到客户端漫游后接入的UP设备。客户端上线后，漫游后的接口所在UP设备不属于网段对应的主备UP，且漫游后的接口所在UP设备与UPA之间没有传输隧道时：例如，CP上设置的UP备份策略模板如下：UP备份策略模板1UPA的Interface A1UPB的Interface B1UP备份策略模板2UPC的Interface C2UPD的Interface D2客户端漫游到UPC的Interface C2CP设备需要通知UPC发布该客户端的主机路由，确保报文被引流到UPC。UPC的Interface C2和UPD的Interface D2发生主备切换,客户端切换到UPD上。CP设备需要通知UPD发布该客户端的主机路由，UPC撤销发布的主机路由，确保报文被引流到UPD上。综上所述，在客户端漫游后所接入的UP设备与漫游前所接入的UP设备之间无传输隧道时，客户端漫游后接入的UP设备不属于网段对应的主备UP设备，通知客户端漫游后接入的UP设备发布主机路由。基于上述描述，vBRAS转控分离组网中，支持客户端在同UP设备的不同接口间、不同UP设备间进行漫游，这里的漫游可以包括使用DHCP报文和IP流量漫游；并且在有传输隧道的情况下，客户端无需发布主机路由，只有当漫游后所在UP设备不属于网段对应的主备UP时，才需要在主备UP上下发主机隧道将网络侧流量引流到用户所在UP设备，该主机隧道无需对外发布，不增加UP上联的路由器的压力；在无传输隧道的情况下，只有当漫游后所在UP设备不等于网段路由cost小的UP时，才需要发布主机路由，按照最小化原则进行主机路由发布。与前述方法的实施例相对应，本申请实施例还提供了装置及其所应用的终端的实施例。如图6所示，图6是本申请实施例示出的一种客户端漫游的装置的框图，上述客户端漫游的装置应用于虚拟宽带远程接入服务器vBRAS组网中的控制平面CP设备，CP设备与vBRAS组网中的至少两个用户平面UP设备连接；上述客户端漫游的装置包括：网段路由发送模块，用于当接收到目标客户端的上线请求后，向目标客户端当前接入的第一主接口所属的第一UP设备发送网段路由，网段路由包括指示标记以及出接口，指示标记用于指示第一UP设备是否发布网段路由；网段路由还用于在本地未匹配到目标客户端的主机路由且第一UP设备被配置的第一网段和目标UP设备被配置的第二网段相同时，通过出接口指示的第一传输隧道，向第一备接口所属的第二UP设备发送接收到的报文；目标UP设备为目标客户端漫游后接入的UP设备，第一备接口为第一主接口的备接口；主机路由发送模块，用于当监控到目标客户端从第一主接口上线成功时，向第一UP设备发送主机路由，主机路由用于指示在目标客户端未发生漫游时，由第一UP设备将报文通过第一主接口转发至目标客户端；第一路由信息发送模块，用于在监控到目标客户端从第一主接口漫游至目标UP设备的目标主接口后，若确定出目标UP设备与第一UP设备之间存在第二传输隧道且目标UP设备被配置的第二网段和第一UP设备被配置的第一网段不同，向第一UP设备发送第一路由信息，以由第一UP设备基于第一路由信息生成第一主机隧道路由，第一主机隧道路由用于指示将报文发送至第二传输隧道。作为本申请实施例一个可选实施方式，该客户端漫游的装置还包括：控制信号发送模块，用于在监控到目标客户端从当前接入的第一主接口漫游至目标主接口后，若确定出目标UP设备与第一UP设备之间不存在第二传输隧道，则向目标UP设备发送控制信号，以由目标UP设备基于控制信号发布目标客户端的主机路由，以使得目标UP设备将基于主机路由接收到的报文转发至目标客户端。作为本申请实施例一个可选实施方式，第二UP设备被配置第一网段；该客户端漫游的装置还包括：第一切换模块，用于在监控到第一主接口和第一备接口发生主备切换事件时，若目标UP设备与第二UP设备之间存在第三传输隧道且第二网段和第一网段不同，则向第二UP设备发送第二路由信息，以由第二UP设备基于第二路由信息生成第二主机隧道路由，第二主机隧道路由用于指示将报文发送至第三传输隧道。作为本申请实施例一个可选实施方式，第三UP设备包括所述目标主接口的目标备接口，目标备接口被配置第二网段；该客户端漫游的装置还包括：第二切换模块，用于在监控到目标备接口和目标主接口发生主备切换事件时，若第三UP设备与第一UP设备之间存在第四传输隧道且第二网段和第一网段不同，则向第一UP设备发送第三路由信息，以由第一UP设备基于第三路由信息生成第三主机隧道路由，第三主机隧道路由用于指示将报文发送至第四传输隧道。作为本申请实施例一个可选实施方式，第三UP设备包括所述目标主接口的目标备接口，目标备接口被配置第二网段；该客户端漫游的装置还包括：第三切换模块，用于在监控到目标备接口和目标主接口发生主备切换事件时，若第三UP设备与第二UP设备之间存在第五传输隧道且第二网段和第一网段不同，则向第二UP设备发送第四路由信息，以由第二UP设备基于第四路由信息生成第四主机隧道路由，第四主机隧道路由用于指示将报文发送至第五传输隧道。作为本申请实施例一个可选实施方式，第三UP设备包括目标主接口的目标备接口，目标备接口被配置第二网段；该客户端漫游的装置还包括：第四切换模块，用于在监控到目标备接口和目标主接口发生主备切换事件时，若第三UP设备与第一UP设备之间不存在第三传输隧道，则向第三UP设备发送控制信息，以控制第三UP设备将目标客户端的主机路由发布至网络侧的路由器，以使得报文被传输至第三UP设备，由第三UP设备将报文发送至目标客户端；第一撤销模块，用于向目标UP设备发送控制信息，以控制目标UP设备撤销发布目标客户端的主机路由。至此，完成图6所示装置的描述。如图7所示，图7是本申请实施例示出的一种客户端漫游的装置的框图，上述客户端漫游的装置应用于虚拟宽带远程接入服务器vBRAS组网中的用户平面UP设备，UP设备与至少一个其他UP设备均与vBRAS组网中的控制平面CP设备连接，第一目标客户端当前接入本UP设备的第一主接口，上述客户端漫游的装置包括：网段路由接收模块，用于接收CP设备下发的网段路由，网段路由是CP设备接收到第一目标客户端发送的上线请求后下发，网段路由包括指示标记以及出接口，指示标记用于指示本UP设备是否发布网段路由；网段路由还用于在本地未匹配到第一目标客户端的主机路由且本UP设备被配置的第一网段和目标UP设备被配置的第二网段相同时，通过出接口指示的第一传输隧道，向第一备接口所属的第二UP设备发送接收到的报文；目标UP设备为第一目标客户端漫游后接入的UP设备，第一备接口为第一主接口的备接口；主机路由接收模块，用于接收CP设备下发的第一目标客户端的主机路由，主机路由是CP设备在监控到第一目标客户端从第一主接口上线成功时下发，主机路由用于指示在第一目标客户端未发生漫游时，将报文通过第一主接口发送至第一目标客户端；主机隧道路由生成模块，用于接收CP设备发送的第一路由信息，并基于接收到的第一路由信息生成第一主机隧道路由；第一主机隧道路由用于指示在第一网段和第二网段不同时，将报文通过第二传输隧道发送至第一目标UP设备；第一路由信息是在CP设备监控到第一目标客户端从本UP设备漫游到目标UP设备、且本UP设备与目标UP设备之间存在第二传输通道时下发。作为本申请实施例一个可选实施方式，该客户端漫游的装置还包括：主机路由删除指令接收模块，用于接收CP设备发送的主机路由删除指令，主机路由删除指令是CP设备监控到第一目标客户端发生漫游时发送；主机路由删除模块，用于根据删除主机路由删除指令，删除对应的第一目标客户端的主机路由。作为本申请实施例一个可选实施方式，该客户端漫游的装置还包括：主机隧道路由删除指令接收模块，用于接收CP设备发送的主机隧道路由删除指令，主机隧道路由删除指令是CP设备监控到第一目标客户端从目标UP设备漫游至除目标UP设备之外的其他UP设备时发送；主机隧道路由删除模块，用于根据主机路由删除指令，删除对应的目标主机隧道路由。作为本申请实施例一个可选实施方式，该客户端漫游的装置还包括：第一控制信号接收模块，用于接收CP设备发送的第一控制信号，第一控制信号是CP设备监控到第二目标客户端漫游至本UP设备、且第二目标客户端漫游前接入的UP设备与本UP设备之间不存在传输隧道时发送的；第一控制信号用于指示本UP设备向网络侧的路由器发布第二目标客户端的主机路由。主机路由发布模块，用于基于第一控制信号向网络侧的路由器发布第二目标客户端的主机路由，以使路由器将目的IP地址为第二目标客户端的IP地址的报文发送至本UP设备。作为本申请实施例一个可选实施方式，该客户端漫游的装置还包括：第二控制信号接收模块，用于接收CP设备发送的第二控制信号，第二控制信号是CP设备在监控到第一备接口和第一主接口发生主备切换事件，且第二UP设备与第二目标客户端漫游前接入的UP设备之间不存在第三传输隧道时发送的；第二控制信号用于指示本UP设备撤销发布第二目标客户端的主机路由；第二撤销模块，用于基于第二控制信号撤销发布第二目标客户端的主机路由。至此，完成图7所示装置的描述。对于装置实施例而言，由于其基本对应于方法实施例，所以相关之处参见方法实施例的部分说明即可。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的模块可以是或者也可以不是物理上分开的，作为模块显示的部件可以是或者也可以不是物理模块，即可以位于一个地方，或者也可以分布到多个网络模块上。可以根据实际的需要选择其中的部分或者全部模块来实现本说明书方案的目的。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。对应地，本申请实施例还提供了图6所示装置或者图7所示装置的硬件结构图，具体如图8所示，该电子设备可以为上述实施方法的设备。如图8所示，该硬件结构包括：处理器和存储器。其中，所述存储器，用于存储机器可执行指令；所述处理器，用于读取并执行所述存储器存储的机器可执行指令，以实现如上所示的所对应的客户端漫游的方法实施例。作为一个实施例，存储器可以是任何电子、磁性、光学或其它物理存储装置，可以包含或存储信息，如可执行指令、数据，等等。例如，存储器可以是：易失存储器、非易失性存储器或者类似的存储介质。具体地，存储器可以是RAM、闪存、存储驱动器、固态硬盘、任何类型的存储盘，或者类似的存储介质，或者它们的组合。至此，完成图8所示电子设备的描述。上述对本说明书特定实施例进行了描述。其它实施例在所附权利要求书的范围内。在一些情况下，在权利要求书中记载的动作或步骤可以按照不同于实施例中的顺序来执行并且仍然可以实现期望的结果。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本领域技术人员在考虑说明书及实践这里申请的发明后，将容易想到本说明书的其它实施方案。本说明书旨在涵盖本说明书的任何变型、用途或者适应性变化，这些变型、用途或者适应性变化遵循本说明书的一般性原理并包括本说明书未申请的本技术领域中的公知常识或惯用技术手段。说明书和实施例仅被视为示例性的，本说明书的真正范围和精神由下面的权利要求指出。应当理解的是，本说明书并不局限于上面已经描述并在附图中示出的精确结构，并且可以在不脱离其范围进行各种修改和改变。本说明书的范围仅由所附的权利要求来限制。以上所述仅为本说明书的较佳实施例而已，并不用以限制本说明书，凡在本说明书的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本说明书保护的范围之内。
