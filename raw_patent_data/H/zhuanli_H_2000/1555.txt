标题title
一种光储直柔微电网智能管理系统
摘要abst
本发明涉及数据处理技术领域，具体涉及一种光储直柔微电网智能管理系统，包括：负载数据序列获取模块、第一时间权重系数获取模块、优化路径获取模块以及异常检测智能管理模块；采集每条线路在每个检测周期内的负载数据序列；根据负载数据序列得到标准负载数据序列；根据标准负载数据序列得到时间偏移量；根据时间偏移量得到第一时间权重系数；获取DTW距离矩阵；根据第一时间权重系数对DTW距离矩阵进行加权得到优化路径；根据优化路径得到目标元素以及第二目标元素，从而得到异常负载数据，进行智能管理。本发明提高了异常监测的准确性，进而精确得到每个存在异常的负载数据。
权利要求书clms
1.一种光储直柔微电网智能管理系统，其特征在于，该系统包括以下模块：负载数据序列获取模块，用于采集每个光储直柔建筑每条线路在每个检测周期内的若干负载数据序列，所述负载数据序列中包含多个负载数据；第一时间权重系数获取模块，用于根据同一线路不同检测周期内的负载数据序列，得到每个负载数据序列对应的标准负载数据序列；根据负载数据序列与标准负载数据序列对应的时间段，得到每个负载数据序列的时间偏移量；根据时间偏移量得到每个负载数据的第一时间权重系数；优化路径获取模块，用于根据负载数据序列与标准负载数据序列构建若干DTW距离矩阵，所述DTW距离矩阵包含多个元素；根据第一时间权重系数对DTW距离矩阵中每个元素进行加权，得到每个元素的加权欧式距离；根据加权欧式距离得到若干DTW距离调节矩阵；根据DTW距离调节矩阵得到每个DTW距离调节矩阵的优化路径；异常检测智能管理模块，用于根据优化路径得到若干目标元素以及第二目标元素；根据目标元素的加权欧式距离以及第二目标元素的加权欧式距离，得到每个目标元素的异常程度；对异常程度进行筛选得到异常负载数据，根据异常负载数据进行智能管理。2.根据权利要求1所述一种光储直柔微电网智能管理系统，其特征在于，所述根据同一线路不同检测周期内的负载数据序列，得到每个负载数据序列对应的标准负载数据序列，包括的具体方法为：将任意一个光储直柔建筑任意一条线路记为目标线路，将目标线路的任意一个负载数据序列记为目标负载数据序列，获取目标负载数据序列所包含的时刻，将所有时刻组成的集合记为目标负载数据序列的时刻集合，获取目标线路每个负载数据序列的时刻集合；将目标线路最近一个检测周期内的任意一个负载数据序列记为第二目标负载数据序列，获取第二目标负载数据序列与除最近一个检测周期以外的其他每个检测周期内每个负载数据序列在时刻集合上的交集元素数量，将除最近一个检测周期以外的其他每个检测周期内交集元素数量最大的负载数据序列记为第二目标负载数据序列在每个检测周期的参考负载数据序列；将第二目标负载数据序列与所有参考负载数据序列作为一组，记为第二目标负载数据序列的参考组；获取参考组中元素数量最大的负载数据序列，记为第二目标负载数据序列的标准参考负载序列，标准参考负载序列的元素数量记为第二目标负载数据序列的标准数量；将标准参考负载序列中任意一个元素记为参考元素，获取参考元素在不同检测周期内相同时刻的所有负载数据的均值，将均值记为参考元素的标准负载数据，获取标准参考负载序列中每个元素的标准负载数据，对标准参考负载序列中每个元素都替换为对应的标准负载数据，替换后的序列记为第二目标负载数据序列的参考组中每个负载数据序列的标准负载数据序列；获取目标线路最近一个检测周期内每个负载数据序列的参考组，根据参考组得到目标线路每个负载数据序列的标准负载数据序列；获取每个光储直柔建筑每条线路每个负载数据序列的标准负载数据序列。3.根据权利要求1所述一种光储直柔微电网智能管理系统，其特征在于，所述根据负载数据序列与标准负载数据序列对应的时间段，得到每个负载数据序列的时间偏移量，包括的具体方法为：将任意一个光储直柔建筑任意一条线路记为目标线路，对于目标线路的任意一个负载数据序列，将目标线路的标准负载数据序列对应时间段的第一个时刻记为参考第一时刻；将目标线路的标准负载数据序列对应时间段的最后一个时刻记为参考第二时刻；将负载数据序列对应时间段的第一个时刻记为目标第一时刻；将负载数据序列对应时间段的最后一个时刻记为目标第二时刻；将参考第一时刻与目标第一时刻差值的绝对值记为第一绝对值；将参考第二时刻与目标第二时刻差值的绝对值记为第二绝对值；将第一绝对值与第二绝对值的和记为负载数据序列的时间偏移量；获取每个目标线路的每个负载数据序列的时间偏移量。4.根据权利要求1所述一种光储直柔微电网智能管理系统，其特征在于，所述根据时间偏移量得到每个负载数据的第一时间权重系数，包括的具体方法为：将任意一个光储直柔建筑任意一条线路记为目标线路，对于目标线路的任意一个负载数据序列，根据负载数据序列与目标线路的标准负载数据序列构建二维坐标系，横坐标表示负载数据的序号或者标准负载数据的序号，纵坐标表示负载数据的数值或者标准负载数据的数值；对于负载数据序列的任意一个负载数据，获取负载数据与光储直柔建筑的所有标准负载数据的欧式距离；式中，表示负载数据的第/＞个第一时间权重系数；/＞表示负载数据与第/＞个标准负载数据之间的欧式距离；/＞表示/＞输入标准高斯函数后得到的数值；/＞表示负载数据序列的时间偏移量；/＞表示以自然常数为底的指数函数；获取每个负载数据的第一时间权重系数。5.根据权利要求1所述一种光储直柔微电网智能管理系统，其特征在于，所述根据负载数据序列与标准负载数据序列构建若干DTW距离矩阵，包括的具体方法为：对于任意一个负载数据序列，将负载数据序列作为DTW距离矩阵的横向序列，将对应的标准负载数据序列作为DTW距离矩阵的纵向序列，根据DTW距离矩阵的横向序列以及DTW距离矩阵的纵向序列构建DTW距离矩阵；获取若干DTW距离矩阵。6.根据权利要求1所述一种光储直柔微电网智能管理系统，其特征在于，所述根据第一时间权重系数对DTW距离矩阵中每个元素进行加权，得到每个元素的加权欧式距离，包括的具体方法为：对于任意一个DTW距离矩阵的任意一个元素，式中，表示元素的加权欧式距离；/＞表示元素对应的欧式距离；/＞表示元素对应的第一时间权重系数；获取每个元素的加权欧式距离。7.根据权利要求1所述一种光储直柔微电网智能管理系统，其特征在于，所述根据加权欧式距离得到若干DTW距离调节矩阵，包括的具体方法为：对于任意一个DTW距离矩阵，在DTW距离矩阵中所有元素的加权欧式距离后，将DTW距离矩阵记为DTW距离调节矩阵；获取若干DTW距离调节矩阵。8.根据权利要求1所述一种光储直柔微电网智能管理系统，其特征在于，所述根据DTW距离调节矩阵得到每个DTW距离调节矩阵的优化路径，包括的具体方法为：对于任意一个DTW距离调节矩阵，根据竖直向上以及右上角的DTW路径方向得到DTW距离调节矩阵的DTW路径，记为DTW距离调节矩阵的优化路径；获取每个DTW距离调节矩阵的优化路径。9.根据权利要求1所述一种光储直柔微电网智能管理系统，其特征在于，所述根据优化路径得到若干目标元素以及第二目标元素，包括的具体方法为：对于任意一个DTW距离调节矩阵，将DTW距离调节矩阵的优化路径上的每个元素记为目标元素；将任意一个目标元素记为第一目标元素，将在第一目标元素的竖直方向上，将除第一目标元素以外的目标元素记为第一目标元素的第二目标元素；获取若干目标元素以及第二目标元素。10.根据权利要求1所述一种光储直柔微电网智能管理系统，其特征在于，所述根据目标元素的加权欧式距离以及第二目标元素的加权欧式距离，得到每个目标元素的异常程度，包括的具体方法为：对于任意一个目标元素，式中，表示目标元素的初始异常程度；/＞表示目标元素的加权欧式距离；/＞表示目标元素的第二目标元素数量；/＞表示目标元素的第/＞个第二目标元素的加权欧式距离；/＞表示超参数；获取所有目标元素的初始异常程度，将所有目标元素的初始异常程度输入sigmoid函数，将输出后的每个目标元素的初始异常程度记为每个目标元素的异常程度。
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及一种光储直柔微电网智能管理系统。背景技术光储直柔微电网是一种新型的电网系统，系统核心是将光伏直流建筑本身的刚性负荷转变为柔性负荷，对光储直柔微电网的发电侧、储能侧及需求侧进行智能控制；电网系统根据监测的负载数据进行智能管理，而当监测的负载数据波动过大且数据量过度增长时，会对光储直柔微电网的智能管理效率产生较大的影响。因此需要对光储直柔建筑的负载数据进行异常监测，从而保证光储直柔微电网智能管理系统的智能管理效率。传统方法通过DTW算法得到每个负载数据序列与标准负载数据序列之间的相似度，通过对相似度进行判断得到存在异常情况的负载数据序列；但由于负载数据会受设备差异等因素产生时间偏移，使DTW距离矩阵中对应元素存在偏移误差，从而降低异常监测的准确性，进而无法精确得到异常负载数据的位置。发明内容本发明提供一种光储直柔微电网智能管理系统，以解决现有的问题：由于负载数据会受设备差异等因素产生时间偏移，使DTW距离矩阵中对应元素存在偏移误差，从而降低通过DTW算法获取负载数据序列与标准负载数据序列之间的相似度进行异常监测的准确性，进而无法精确得到异常负载数据的位置。本发明的一种光储直柔微电网智能管理系统采用如下技术方案：本发明一个实施例提供了一种光储直柔微电网智能管理系统，该系统包括以下模块：负载数据序列获取模块，用于采集每个光储直柔建筑每条线路在每个检测周期内的若干负载数据序列，所述负载数据序列中包含多个负载数据；第一时间权重系数获取模块，用于根据同一线路不同检测周期内的负载数据序列，得到每个负载数据序列对应的标准负载数据序列；根据负载数据序列与标准负载数据序列对应的时间段，得到每个负载数据序列的时间偏移量；根据时间偏移量得到每个负载数据的第一时间权重系数；优化路径获取模块，用于根据负载数据序列与标准负载数据序列构建若干DTW距离矩阵，所述DTW距离矩阵包含多个元素；根据第一时间权重系数对DTW距离矩阵中每个元素进行加权，得到每个元素的加权欧式距离；根据加权欧式距离得到若干DTW距离调节矩阵；根据DTW距离调节矩阵得到每个DTW距离调节矩阵的优化路径；异常检测智能管理模块，用于根据优化路径得到若干目标元素以及第二目标元素；根据目标元素的加权欧式距离以及第二目标元素的加权欧式距离，得到每个目标元素的异常程度；对异常程度进行筛选得到异常负载数据，根据异常负载数据进行智能管理。优选的，所述根据同一线路不同检测周期内的负载数据序列，得到每个负载数据序列对应的标准负载数据序列，包括的具体方法为：将任意一个光储直柔建筑任意一条线路记为目标线路，将目标线路的任意一个负载数据序列记为目标负载数据序列，获取目标负载数据序列所包含的时刻，将所有时刻组成的集合记为目标负载数据序列的时刻集合，获取目标线路每个负载数据序列的时刻集合；将目标线路最近一个检测周期内的任意一个负载数据序列记为第二目标负载数据序列，获取第二目标负载数据序列与除最近一个检测周期以外的其他每个检测周期内每个负载数据序列在时刻集合上的交集元素数量，将除最近一个检测周期以外的其他每个检测周期内交集元素数量最大的负载数据序列记为第二目标负载数据序列在每个检测周期的参考负载数据序列；将第二目标负载数据序列与所有参考负载数据序列作为一组，记为第二目标负载数据序列的参考组；获取参考组中元素数量最大的负载数据序列，记为第二目标负载数据序列的标准参考负载序列，标准参考负载序列的元素数量记为第二目标负载数据序列的标准数量；将标准参考负载序列中任意一个元素记为参考元素，获取参考元素在不同检测周期内相同时刻的所有负载数据的均值，将均值记为参考元素的标准负载数据，获取标准参考负载序列中每个元素的标准负载数据，对标准参考负载序列中每个元素都替换为对应的标准负载数据，替换后的序列记为第二目标负载数据序列的参考组中每个负载数据序列的标准负载数据序列；获取目标线路最近一个检测周期内每个负载数据序列的参考组，根据参考组得到目标线路每个负载数据序列的标准负载数据序列；获取每个光储直柔建筑每条线路每个负载数据序列的标准负载数据序列。优选的，所述根据负载数据序列与标准负载数据序列对应的时间段，得到每个负载数据序列的时间偏移量，包括的具体方法为：将任意一个光储直柔建筑任意一条线路记为目标线路，对于目标线路的任意一个负载数据序列，将目标线路的标准负载数据序列对应时间段的第一个时刻记为参考第一时刻；将目标线路的标准负载数据序列对应时间段的最后一个时刻记为参考第二时刻；将负载数据序列对应时间段的第一个时刻记为目标第一时刻；将负载数据序列对应时间段的最后一个时刻记为目标第二时刻；将参考第一时刻与目标第一时刻差值的绝对值记为第一绝对值；将参考第二时刻与目标第二时刻差值的绝对值记为第二绝对值；将第一绝对值与第二绝对值的和记为负载数据序列的时间偏移量；获取每个目标线路的每个负载数据序列的时间偏移量。优选的，所述根据时间偏移量得到每个负载数据的第一时间权重系数，包括的具体方法为：将任意一个光储直柔建筑任意一条线路记为目标线路，对于目标线路的任意一个负载数据序列，根据负载数据序列与目标线路的标准负载数据序列构建二维坐标系，横坐标表示负载数据的序号或者标准负载数据的序号，纵坐标表示负载数据的数值或者标准负载数据的数值；对于负载数据序列的任意一个负载数据，获取负载数据与光储直柔建筑的所有标准负载数据的欧式距离；式中，表示负载数据的第/＞个第一时间权重系数；/＞表示负载数据与第/＞个标准负载数据之间的欧式距离；/＞表示/＞输入标准高斯函数后得到的数值；/＞表示负载数据序列的时间偏移量；/＞表示以自然常数为底的指数函数；获取每个负载数据的第一时间权重系数。优选的，所述根据负载数据序列与标准负载数据序列构建若干DTW距离矩阵，包括的具体方法为：对于任意一个负载数据序列，将负载数据序列作为DTW距离矩阵的横向序列，将对应的标准负载数据序列作为DTW距离矩阵的纵向序列，根据DTW距离矩阵的横向序列以及DTW距离矩阵的纵向序列构建DTW距离矩阵；获取若干DTW距离矩阵。优选的，所述根据第一时间权重系数对DTW距离矩阵中每个元素进行加权，得到每个元素的加权欧式距离，包括的具体方法为：对于任意一个DTW距离矩阵的任意一个元素，式中，表示元素的加权欧式距离；表示元素对应的欧式距离；/＞表示元素对应的第一时间权重系数；获取每个元素的加权欧式距离。优选的，所述根据加权欧式距离得到若干DTW距离调节矩阵，包括的具体方法为：对于任意一个DTW距离矩阵，在DTW距离矩阵中所有元素的加权欧式距离后，将DTW距离矩阵记为DTW距离调节矩阵；获取若干DTW距离调节矩阵。优选的，所述根据DTW距离调节矩阵得到每个DTW距离调节矩阵的优化路径，包括的具体方法为：对于任意一个DTW距离调节矩阵，根据竖直向上以及右上角的DTW路径方向得到DTW距离调节矩阵的DTW路径，记为DTW距离调节矩阵的优化路径；获取每个DTW距离调节矩阵的优化路径。优选的，所述根据优化路径得到若干目标元素以及第二目标元素，包括的具体方法为：对于任意一个DTW距离调节矩阵，将DTW距离调节矩阵的优化路径上的每个元素记为目标元素；将任意一个目标元素记为第一目标元素，将在第一目标元素的竖直方向上，将除第一目标元素以外的目标元素记为第一目标元素的第二目标元素；获取若干目标元素以及第二目标元素。优选的，所述根据目标元素的加权欧式距离以及第二目标元素的加权欧式距离，得到每个目标元素的异常程度，包括的具体方法为：对于任意一个目标元素，式中，表示目标元素的初始异常程度；/＞表示目标元素的加权欧式距离；/＞表示目标元素的第二目标元素数量；/＞表示目标元素的第/＞个第二目标元素的加权欧式距离；/＞表示超参数；获取所有目标元素的初始异常程度，将所有目标元素的初始异常程度输入sigmoid函数，将输出后的每个目标元素的初始异常程度记为每个目标元素的异常程度。本发明的技术方案的有益效果是：通过不同检测周期内负载数据序列的对应时间段得到标准负载数据序列，根据标准负载数据序列与负载数据序列得到负载数据的第一时间权重系数，根据第一时间权重系数对DTW距离矩阵的元素进行加权得到优化路径，根据优化路径获取目标元素的异常程度，从而得到异常负载数据；相较于现有技术仅根据DTW算法得到每个负载数据序列与标准负载数据序列之间的相似度，通过对相似度进行判断得到存在异常情况的负载数据序列；提高了异常监测的准确性，并且精确得到每个存在异常的负载数据。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明一种光储直柔微电网智能管理系统的结构框图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种光储直柔微电网智能管理系统，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种光储直柔微电网智能管理系统的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种光储直柔微电网智能管理系统的结构框图，该系统包括以下模块：负载数据序列获取模块101，采集所有光储直柔建筑的若干负载数据序列。需要说明的是，传统方法通过DTW算法得到每个负载数据序列与标准负载数据序列之间的相似度，通过对相似度进行判断得到存在异常情况的负载数据序列；但由于负载数据会受设备差异等因素产生时间偏移，使DTW距离矩阵中对应元素存在偏移误差，从而降低异常监测的准确性，进而无法精确到异常负载数据的位置，为此，本实施例提出了一种光储直柔微电网智能管理系统。进一步需要说明的是，光储直柔建筑在不同的使用场景中对应的用户不一样，例如：在部分写字楼区域，一个光储直柔建筑中每条线路对应一个用户或者多条线路对应一个用户；在居民楼区域，一个光储直柔建筑对应一个用户，一个光储直柔建筑中每条线路对应同一个用户的一个设备或者多条线路对应同一个用户的一个设备。为了实现本实施例提出的一种光储直柔微电网智能管理系统，本实施例以一个光储直柔建筑对应一个用户，一个光储直柔建筑中每条线路对应同一个用户的一个设备的情况为例进行叙述，首先需要采集负载数据序列，具体过程为：以一天作为一个检测周期，每条线路工作时每隔1秒使用功率传感器采集一次若干光储直柔建筑的每条线路工作时的功率数据，共采集七天。以任意一个光储直柔建筑为例，将该光储直柔建筑在每个检测周期内，每条线路采集到的功率数据记为负载数据，则可以得到每条线路每个检测周期内的多段负载数据，将每段负载数据按照采集时间顺序排列构成的序列记为负载数据序列，则得到了每条线路每个检测周期内的若干负载数据序列，其中每个负载数据对应一个时刻，每个负载数据序列对应一条线路在一个检测周期内的一段工作时间；获取每个光储直柔建筑每条线路在每个检测周期内的若干负载数据序列。获取所有光储直柔建筑的若干负载数据序列。至此，通过上述方法得到所有光储直柔建筑的若干负载数据序列。第一时间权重系数获取模块102，根据同一线路不同检测周期内的负载数据序列，获取每个负载数据序列对应的标准负载数据序列；根据负载数据序列与标准负载数据序列对应的时间段，得到每个负载数据序列的时间偏移量；根据时间偏移量得到负载数据的第一时间权重系数。需要说明的是，由于同一个光储直柔建筑对应的用户具有较为固定稳定的用电习惯与用电策略，所以在每日相同时间段内的负载数据会趋近一致；但获取的负载数据本身会因设备差异以及用户个体习惯差异的原因，会使用户相同用电行为的负载数据之间存在时间偏移以及幅值的变化，从而对同种用电行为的负载数据的异常检测产生干扰；为此，本实施例通过分析负载数据序列之间的相似度以及时间偏移，构建第一时间权重系数对调整对应的负载数据序列；进而进行更精准的异常判断，完成负载数据的异常检测。进一步需要说明的是，在构建第一时间权重系数的过程中，由于负载数据序列之间存在时间偏移，会影响负载数据序列异常检测的准确性，所以首先需要根据时间偏移判断负载数据序列之间相似度的置信程度，从而获取对应的时间权重系数。具体的，以任意一个光储直柔建筑任意一条线路为例，对于该条线路的任意一个负载数据序列，获取该负载数据序列所包含的时刻，将所有时刻组成的集合作为该负载数据序列的时刻集合，获取该条线路每个负载数据序列的时刻集合；对于该条线路最近一个检测周期内的任意一个负载数据序列，获取该负载数据序列与其他检测周期内每个负载数据序列在时刻集合上的交集元素数量，将其他每个检测周期内交集元素数量最大的负载数据序列作为该负载数据序列在每个检测周期的参考负载数据序列，将该负载数据序列与所有参考负载数据序列作为一组，记为该负载数据序列的参考组；获取参考组中元素数量最大的负载数据序列，记为该负载数据序列的标准参考负载序列，标准参考负载序列的元素数量记为该负载数据序列的标准数量；对于标准参考负载序列中任意一个元素，获取该元素在不同检测周期内相同时刻的所有负载数据的均值，将均值记为该元素的标准负载数据，对标准参考负载序列中每个元素都替换为对应的标准负载数据，替换后的序列记为该负载数据序列的参考组中每个负载数据序列的标准负载数据序列；按照上述方法获取该条线路最近一个检测周期内每个负载数据序列的参考组，并得到该条线路每个负载数据序列的标准负载数据序列；获取每个光储直柔建筑每条线路每个负载数据序列的标准负载数据序列。特殊的，由于标准负载数据序列基于最近一个检测周期内的负载数据序列进行获取，因此对于任意一条线路，可能存在其他检测周期内的负载数据序列不属于任意一个参考组，即这些负载数据序列对应工作的时间段，在最近一个周期内对应时间段该条线路没有工作，因此没有相应的负载数据序列，则这些负载数据序列与最近一个周期内的负载数据序列在时刻集合上不存在交集或交集元素数量较少；对于这些负载数据序列，获取其中对应检测周期最近的若干负载数据序列，并按照上述方法从这些负载数据序列中构建参考组，并得到参考组中每个负载数据序列的标准负载数据序列；若仍有未归入参考组的负载数据序列，则按照上述方法继续获取对应检测周期最近的负载数据序列，并获取参考组及标准负载数据序列，直到对该条线路所有的负载数据序列都获取到标准负载数据序列；对所有光储直柔建筑每条线路每个负载数据序列都获取到标准负载数据序列。进一步的，以任意一个光储直柔建筑任意一条线路的任意一个负载数据序列为例，将该条线路的标准负载数据序列对应时间段的第一个时刻记为参考第一时刻；将该条线路的标准负载数据序列对应时间段的最后一个时刻记为参考第二时刻；将该负载数据序列对应时间段的第一个时刻记为目标第一时刻；将该负载数据序列对应时间段的最后一个时刻记为目标第二时刻；将参考第一时刻与目标第一时刻差值的绝对值记为第一绝对值；将参考第二时刻与目标第二时刻差值的绝对值记为第二绝对值；将第一绝对值与第二绝对值的和记为该负载数据序列的时间偏移量；获取该条线路的所有负载数据序列的时间偏移量。进一步的，以任意一个负载数据序列为例，根据该负载数据序列与该条线路的标准负载数据序列构建二维坐标系，横坐标表示负载数据的序号或者标准负载数据的序号，纵坐标表示负载数据的数值或者标准负载数据的数值；以该负载数据序列的任意一个负载数据为例，根据该负载数据与该光储直柔建筑的所有标准负载数据的欧式距离，得到该负载数据的第一时间权重系数；其中欧式距离的获取是公知技术，本实施例不进行叙述；该负载数据的第一时间权重系数的计算方法为：式中，表示该负载数据与第/＞个标准负载数据之间的时间权重系数，记为该负载数据的第/＞个第一时间权重系数；/＞表示该负载数据与第/＞个标准负载数据之间的欧式距离；表示/＞输入标准高斯函数后得到的数值；/＞表示该负载数据序列的时间偏移量；/＞表示以自然常数为底的指数函数；本实施例采用/＞函数来呈现反比例关系及归一化处理，实施者可根据实际情况选择反比例函数及归一化函数；其中时间偏移量越大，欧式距离越大，对应的标准高斯函数的数值越大时，负载数据与标准负载数据在后续匹配的可能性就越小，相应的第一时间权重系数就越小。获取该负载数据序列中每个负载数据的若干第一时间权重系数；获取每个负载数据序列的时间偏移量，以及其中每个负载数据的若干第一时间权重系数；其中标准高斯函数是公知技术，本实施例不进行叙述；需要说明的是，每个负载数据均与对应的标准负载数据序列中每个标准负载数据获取了一个第一时间权重系数，则每个负载数据均有若干第一时间权重系数。至此，通过上述方法得到获取所有负载数据序列中所有负载数据的第一时间权重系数。优化路径获取模块103，根据负载数据序列与标准负载数据序列构建DTW距离矩阵；根据第一时间权重系数对DTW距离矩阵中每个元素进行加权，得到若干加权欧式距离，根据加权欧式距离得到优化路径。需要说明的是，根据获取的第一时间权重系数，对负载数据序列以及对应标准负载数据序列的DTW距离矩阵内若干元素进行加权，限制负载数据序列的相似度匹配幅度，获得修正后的累积DTW距离矩阵。由于DTW距离矩阵对于负载数据序列的时间偏移量以及异常负载数据存在较大的敏感性，主要表现在负载数据序列的拉伸或缩小过程中，所以本实施例仅对负载数据进行变换，标准用电负载数据不进行变换，以此限制匹配幅度，避免异常负载数据对DTW路径获得的过度影响。进一步需要说明的是，在根据第一时间权重系数对DTW距离矩阵的所有元素进行加权后，获取对应的DTW路径，从而得到对应元素的异常程度；而在获取DTW路径的过程中，传统DTW算法会从水平向右、竖直向上、右上角这三个方向上分别寻找对应欧式距离最小的元素，作为下一个DTW路径点；若出现水平向右的方向出现多个DTW路径点，会使获取的DTW距离中存在同一个标准负载数据对应多个负载数据的情况，会使负载数据序列存在较大的时间偏移；为此，本实施例从竖直向上、右上角这两个方向上分别寻找对应欧式距离最小的元素，作为下一个DTW路径点，从而得到优化后的DTW距离，消除负载数据序列存在较大的时间偏移的问题，避免影响最终异常检测的结果。具体的，以任意一个负载数据序列为例，将该负载数据序列作为DTW距离矩阵的横向序列，将对应的标准负载数据序列作为DTW距离矩阵的纵向序列，根据DTW距离矩阵的横向序列以及DTW距离矩阵的纵向序列构建DTW距离矩阵；根据第一时间权重系数对该DTW距离矩阵中每个元素进行加权，得到每个元素的加权欧式距离；其中DTW距离矩阵的构建是DTW算法的公知内容，本实施例不进行叙述；DTW距离矩阵中每个元素对应一个第一时间权重系数，每个负载数据序列对应一个DTW距离矩阵。以该DTW距离矩阵中任意一个元素为例，该元素的加权欧式距离的计算方法为：式中，表示该元素的加权欧式距离；/＞表示该元素对应的欧式距离；/＞表示该元素对应的第一时间权重系数；通过第一权重系数对欧式距离进行修正，得到加权欧式距离，使负载数据与标准负载数据的时间点匹配过程中考虑时间偏移量带来的影响，降低时间偏移量对于欧式距离的影响。进一步的，获取该DTW距离矩阵中所有元素的加权欧式距离后，将该DTW距离矩阵记为DTW距离调节矩阵，获取所有DTW距离调节矩阵；以任意一个DTW距离调节矩阵为例，根据竖直向上以及右上角的DTW路径方向得到该DTW距离调节矩阵的DTW路径，记为优化路径；获取所有DTW距离调节矩阵的优化路径；其中DTW路径的获取是DTW算法的公知内容，本实施例不进行叙述。至此，通过上述方法得到所有DTW距离调节矩阵的优化路径。异常检测智能管理模块104，根据优化路径得到目标元素的异常程度；对异常程度进行筛选的得到异常负载数据，根据异常负载数据进行智能管理。具体的，以任意一个DTW距离调节矩阵为例，将该DTW距离调节矩阵的优化路径上的每个元素记为目标元素；以任意一个目标元素为例，将在该目标元素的竖直方向上除该目标元素以外的目标元素记为该目标元素的第二目标元素；根据该目标元素的加权欧式距离以及对应的第二目标元素得到该目标元素的异常程度；其中每个优化路径对应若干目标元素，每个目标元素对应的第二目标元素数量不唯一；该目标元素的异常程度的计算方法为：式中，表示该目标元素的初始异常程度；/＞表示该目标元素的加权欧式距离；/＞表示该目标元素的第二目标元素数量；/＞表示该目标元素的第/＞个第二目标元素的加权欧式距离；/＞表示超参数，用于防止初始异常程度为0，本实施例预设/＞；其中第二目标元素数量越多，表明目标元素匹配到的标准负载数据数量越多，同时加权欧式距离越大，相应目标元素对应负载数据发生异常的可能性越大，说明初始异常程度越大。获取所有目标元素的初始异常程度，将所有目标元素的初始异常程度输入sigmoid函数处理，将处理后的每个目标元素的初始异常程度记为每个目标元素的异常程度，本实施例采用sigmoid函数进行归一化处理，实施者可根据实际情况设置归一化函数。进一步的，预设一个异常程度阈值T2，其中本实施例以T2=0.75为例进行叙述，本实施例不进行具体限定，其中T2可根据具体实施情况而定。以任意一个目标元素为例，若该目标元素的异常程度大于异常程度阈值T2，则该目标元素对应的负载数据记为异常负载数据；若该目标元素的异常程度小于等于异常程度阈值T2，不做任何处理。获取该DTW距离调节矩阵的所有异常负载数据；获取所有DTW距离调节矩阵的所有异常负载数据；获取每个光储直柔建筑每条线路的所有异常负载数据。进一步的，将每个光储直柔建筑的所有异常负载数据输入预测模块，进行异常预警与能量调度调整；则在每一天结束后，按照上述方法可以对当天的负载数据获取异常负载数据，从而完成光储直柔微电网的智能管理。至此，本实施例完成。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
