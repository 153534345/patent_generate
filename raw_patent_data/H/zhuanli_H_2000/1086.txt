标题title
一种用于抽取数据的方法及系统
摘要abst
本发明一种用于抽取数据的方法及系统，属于数据采集技术领域。本发明方法，包括：基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，并为所述基站采集的采集数据添加时间信息，得到带时间信息的采集数据；基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据；根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取。本发明可以根据网络传输带宽对数据进行抽取，降低了数据传输的压力，避免了数据积压，且由于数据时间经过了纠正，根据时间进行抽取可以保证抽取出的数据在同一时间范围内。
权利要求书clms
1.一种用于抽取数据的方法，其特征在于，所述方法包括：基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，并为所述基站采集的采集数据添加时间信息，得到带时间信息的采集数据；基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据；根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取。2.根据权利要求1所述的方法，其特征在于，所述时间信息为秒内纳秒值和UTC秒值。3.根据权利要求1所述的方法，其特征在于，所述基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，包括：针对本地时钟的振荡周期进行时钟计数，得到时钟计数值，同步触发基站的数据采集信号，所述数据采集信号用于控制基站采集数据，同步基于北斗授时模块发出UTC秒值和秒脉冲；通过本地时钟接收所述秒脉冲，在本地时钟接收秒脉冲后，清空当前的时钟计数值，并针对本地时钟的振荡周期进行重新时钟计数，得到时钟计数值；所述时钟计数值达到时钟标称主频率值时，计数不再增加；基于时钟标称周期和时钟计数值，计算得到秒内纳秒值，计算公式如下：nsInSec = n×T其中，nsInSec为秒内纳秒值，n为时钟计数值，T为时钟标称周期。4.根据权利要求1所述的方法，其特征在于，所述基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据，包括：确定待估计的状态量，所述待估计的状态量为采样点的采样时间的真实时间和本地时钟真实振荡周期；将所述采样点的测试时间ttest作为观测值，输入滤波器中进行迭代计算，待所述滤波器收敛后，得到时钟周期最佳估计值；所述迭代计算公式，如下：ttest=utcs×109 + ntest×Tout其中，ttest为采样点的测试时间，utcs为UTC秒值，ntest=n= nsInSec/T，Tout为当前卡尔曼算法滤波器输出的时钟周期最佳估计值，nsInSec为秒内纳秒值，n为时钟计数值，T为时钟标称周期；基于时钟周期最佳估计值，得到待估计的状态量；基于所述待估计的状态量，纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据。5.根据权利要求1所述的方法，其特征在于，所述根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取，以得到目标数据，包括：根据需要目标数据的主站，确定所需数据帧长，根据所述目标数据所需帧长，采样率和网络传输带宽，确定向所述主站每秒发送目标数据的数据帧数；所述数据帧数的计算公式如下：F=ceil其中，F为数据帧数，BW为网络传输带宽，L为所需数据帧长；若F≥1，且，则每秒在样本数据中抽取一次数据，每次抽取F帧数据发送至主站，S为采样率；当F＜1，且N×S≥L则每N秒在样本数据中抽取一次数据，N取N×F≥1的最小值，每次抽取1帧数据发送至主站；若采样率S，既不满足N×S≥L也不满足S≥F×L，则不在样本数据中抽取数据。6.一种用于抽取数据的系统，其特征在于，所述系统包括：数据采集单元，用于基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，并为所述基站采集的采集数据添加时间信息，得到带时间信息的采集数据；修正单元，用于基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据；数据抽取单元，用于根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取。7.根据权利要求6所述的系统，其特征在于，所述时间信息为秒内纳秒值和UTC秒值。8.根据权利要求6所述的系统，其特征在于，所述数据采集单元基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，包括：针对本地时钟的振荡周期进行时钟计数，得到时钟计数值，同步触发基站的数据采集信号，所述数据采集信号用于控制基站采集数据，同步基于北斗授时模块发出UTC秒值和秒脉冲；通过本地时钟接收所述秒脉冲，在本地时钟接收秒脉冲后，清空当前的时钟计数值，并针对本地时钟的振荡周期进行重新时钟计数，得到时钟计数值；所述时钟计数值达到时钟标称主频率值时，计数不再增加；基于时钟标称周期和时钟计数值，计算得到秒内纳秒值，计算公式如下：nsInSec = n×T其中，nsInSec为秒内纳秒值，n为时钟计数值，T为时钟标称周期。9.根据权利要求6所述的系统，其特征在于，所述修正单元基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据，包括：确定待估计的状态量，所述待估计的状态量为采样点的采样时间的真实时间和本地时钟真实振荡周期；将所述采样点的测试时间ttest作为观测值，输入滤波器中进行迭代计算，待所述滤波器收敛后，得到时钟周期最佳估计值；所述迭代计算公式，如下：ttest=utcs×109 + ntest×Tout其中，ttest为采样点的测试时间，utcs为UTC秒值，ntest=n= nsInSec/T，Tout为当前卡尔曼算法滤波器输出的时钟周期最佳估计值，nsInSec为秒内纳秒值，n为时钟计数值，T为时钟标称周期；基于时钟周期最佳估计值，得到待估计的状态量；基于所述待估计的状态量，纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据。10.根据权利要求6所述的系统，其特征在于，所述数据抽取单元根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取，以得到目标数据，包括：根据需要目标数据的主站，确定所需数据帧长，根据所述目标数据所需帧长，采样率和网络传输带宽，确定向所述主站每秒发送目标数据的数据帧数；所述数据帧数的计算公式如下：F=ceil其中，F为数据帧数，BW为网络传输带宽，L为所需数据帧长；若F≥1，且，则每秒在样本数据中抽取一次数据，每次抽取F帧数据发送至主站，S为采样率；当F＜1，且N×S≥L则每N秒在样本数据中抽取一次数据，N取N×F≥1的最小值，每次抽取1帧数据发送至主站；若采样率S，既不满足N×S≥L也不满足S≥F×L，则不在样本数据中抽取数据。
说明书desc
技术领域本发明涉及数据采集技术领域，并且更具体地，涉及一种用于抽取数据的方法及系统。背景技术在TDOA定位或其他阵列中，各基站将带有时间信息的采样数据传输至主站进行数据处理，采样数据的采样率及时间信息都来源于基站的本地时钟。受时钟漂移等因素的影响，各基站的本地时钟会存在一定的差异，导致采样数据的时间信息及采样率不准确，影响定位精度。目前普遍采用时钟同步的方式来消除各基站时钟的差异，当基站间采用有线方式传输数据时，各基站的本地时钟通过同步控制器进行同步；采用无线方式传输数据时，基站间通过周期性的时钟信息交互来达到时钟同步。当基站为车辆或其他可移动平台时，受部署环境限制，无法采用有线的方式连接。采用移动网络连接时存在以下问题，首先是时钟同步的效果会受到网络质量的影响，且频繁的信息交互会占用一定的网络资源。其次是移动网络传输速率低，无法满足高采样率数据的传输需求。发明内容针对上述问题，本发明提出了一种用于抽取数据的方法，包括：基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，并为所述基站采集的采集数据添加时间信息，得到带时间信息的采集数据；基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据；根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取。可选的，时间信息为秒内纳秒值和UTC秒值。可选的，基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，包括：针对本地时钟的振荡周期进行时钟计数，得到时钟计数值，同步触发基站的数据采集信号，所述数据采集信号用于控制基站采集数据，同步基于北斗授时模块发出UTC秒值和秒脉冲；通过本地时钟接收所述秒脉冲，在本地时钟接收秒脉冲后，清空当前的时钟计数值，并针对本地时钟的振荡周期进行重新时钟计数，得到时钟计数值；所述时钟计数值达到时钟标称主频率值时，计数不再增加；基于时钟标称周期和时钟计数值，计算得到秒内纳秒值，计算公式如下：nsInSec = n×T其中，nsInSec为秒内纳秒值，n为时钟计数值，T为时钟标称周期。可选的，基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据，包括：确定待估计的状态量，所述待估计的状态量为采样点的采样时间的真实时间和本地时钟真实振荡周期；将所述采样点的测试时间ttest作为观测值，输入滤波器中进行迭代计算，待所述滤波器收敛后，得到时钟周期最佳估计值；所述迭代计算公式，如下：ttest=utcs×109 + ntest×Tout其中，ttest为采样点的测试时间，utcs为UTC秒值，ntest=n= nsInSec/T，Tout为当前卡尔曼算法滤波器输出的时钟周期最佳估计值，nsInSec为秒内纳秒值，n为时钟计数值，T为时钟标称周期；基于时钟周期最佳估计值，得到待估计的状态量；基于所述待估计的状态量，纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据。可选的，根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取，以得到目标数据，包括：根据需要目标数据的主站，确定所需数据帧长，根据所述目标数据所需帧长，采样率和网络传输带宽，确定向所述主站每秒发送目标数据的数据帧数；所述数据帧数的计算公式如下：F=ceil其中，F为数据帧数，BW为网络传输带宽，L为所需数据帧长；若F≥1，且，则每秒在样本数据中抽取一次数据，每次抽取F帧数据发送至主站，S为采样率；当F＜1，且N×S≥L则每N秒在样本数据中抽取一次数据，N取N×F≥1的最小值，每次抽取1帧数据发送至主站；若采样率S，既不满足N×S≥L也不满足S≥F×L，则不在样本数据中抽取数据。再一方面，本发明还提供了一种用于抽取数据的系统，包括：数据采集单元，用于基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，并为所述基站采集的采集数据添加时间信息，得到带时间信息的采集数据；修正单元，用于基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据；数据抽取单元，用于根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取。可选的，时间信息为秒内纳秒值和UTC秒值。可选的，数据采集单元基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，包括：针对本地时钟的振荡周期进行时钟计数，得到时钟计数值，同步触发基站的数据采集信号，所述数据采集信号用于控制基站采集数据，同步基于北斗授时模块发出UTC秒值和秒脉冲；通过本地时钟接收所述秒脉冲，在本地时钟接收秒脉冲后，清空当前的时钟计数值，并针对本地时钟的振荡周期进行重新时钟计数，得到时钟计数值；所述时钟计数值达到时钟标称主频率值时，计数不再增加；基于时钟标称周期和时钟计数值，计算得到秒内纳秒值，计算公式如下：nsInSec = n×T其中，nsInSec为秒内纳秒值，n为时钟计数值，T为时钟标称周期。可选的，修正单元基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据，包括：确定待估计的状态量，所述待估计的状态量为采样点的采样时间的真实时间和本地时钟真实振荡周期；将所述采样点的测试时间ttest作为观测值，输入滤波器中进行迭代计算，待所述滤波器收敛后，得到时钟周期最佳估计值；所述迭代计算公式，如下：ttest=utcs×109 + ntest×Tout其中，ttest为采样点的测试时间，utcs为UTC秒值，ntest=n= nsInSec/T，Tout为当前卡尔曼算法滤波器输出的时钟周期最佳估计值，nsInSec为秒内纳秒值，n为时钟计数值，T为时钟标称周期；基于时钟周期最佳估计值，得到待估计的状态量；基于所述待估计的状态量，纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据。可选的，数据抽取单元根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取，以得到目标数据，包括：根据需要目标数据的主站，确定所需数据帧长，根据所述目标数据所需帧长，采样率和网络传输带宽，确定向所述主站每秒发送目标数据的数据帧数；所述数据帧数的计算公式如下：F=ceil其中，F为数据帧数，BW为网络传输带宽，L为所需数据帧长；若F≥1，且，则每秒在样本数据中抽取一次数据，每次抽取F帧数据发送至主站，S为采样率；当F＜1，且N×S≥L则每N秒在样本数据中抽取一次数据，N取N×F≥1的最小值，每次抽取1帧数据发送至主站；若采样率S，既不满足N×S≥L也不满足S≥F×L，则不在样本数据中抽取数据。与现有技术相比，本发明的有益效果为：本发明提出了一种用于抽取数据的方法，包括：基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，并为所述基站采集的采集数据添加时间信息，得到带时间信息的采集数据；基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据；根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取。本发明可以根据网络传输带宽对数据进行抽取，降低了数据传输的压力，避免了数据积压，且由于数据时间经过了纠正，根据时间进行抽取可以保证抽取出的数据在同一时间范围内。附图说明图1为本发明实施例1的流程示意图；图2为本发明实施例1的原理示意图；图3为本发明实施例1抽取数据流程示意图；图4为本发明实施例4的结构示意图。具体实施方式现在参考附图介绍本发明的示例性实施方式，然而，本发明可以用许多不同的形式来实施，并且不局限于此处描述的实施例，提供这些实施例是为了详尽地且完全地公开本发明，并且向所属技术领域的技术人员充分传达本发明的范围。对于表示在附图中的示例性实施方式中的术语并不是对本发明的限定。在附图中，相同的单元/元件使用相同的附图标记。除非另有说明，此处使用的术语对所属技术领域的技术人员具有通常的理解含义。另外，可以理解的是，以通常使用的词典限定的术语，应当被理解为与其相关领域的语境具有一致的含义，而不应该被理解为理想化的或过于正式的意义。本发明提供的方法适用于基站之间通过有线或移动网络的方式进行通信的情况，主要技术原理如下：首先各基站通过本站的北斗授时模块及本地时钟获取数据时间信息，再利用卡尔曼滤波纠正由于时钟漂移导致的时间误差及采样率误差，最后根据数据的采样率、所需数据帧长以及网络传输带宽对数据进行自适应抽取，降低传输的数据量；基于上述说明，对本发明进行实施；实施例1：本发明提出了一种用于抽取数据的方法s100，如图1所示，其原理如图2所示，包括：步骤s101，基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，并为所述基站采集的采集数据添加时间信息，得到带时间信息的采集数据；步骤s102，基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据；步骤s103，根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取。其中，时间信息为秒内纳秒值和UTC秒值。步骤s101中，基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，包括：针对本地时钟的振荡周期进行时钟计数，得到时钟计数值，同步触发基站的数据采集信号，所述数据采集信号用于控制基站采集数据，同步基于北斗授时模块发出UTC秒值和秒脉冲；通过本地时钟接收所述秒脉冲，在本地时钟接收秒脉冲后，清空当前的时钟计数值，并针对本地时钟的振荡周期进行重新时钟计数，得到时钟计数值；所述时钟计数值达到时钟标称主频率值时，计数不再增加；基于时钟标称周期和时钟计数值，计算得到秒内纳秒值，计算公式如下：nsInSec = n×T其中，nsInSec为秒内纳秒值，n为时钟计数值，T为时钟标称周期。步骤s102中，基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据，包括：确定待估计的状态量，所述待估计的状态量为采样点的采样时间的真实时间和本地时钟真实振荡周期；将所述采样点的测试时间ttest作为观测值，输入滤波器中进行迭代计算，待所述滤波器收敛后，得到时钟周期最佳估计值；所述迭代计算公式，如下：ttest=utcs×109 + ntest×Tout其中，ttest为采样点的测试时间，utcs为UTC秒值，ntest=n= nsInSec/T，Tout为当前卡尔曼算法滤波器输出的时钟周期最佳估计值，nsInSec为秒内纳秒值，n为时钟计数值，T为时钟标称周期；基于时钟周期最佳估计值，得到待估计的状态量；基于所述待估计的状态量，纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据。步骤s103中，根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取，以得到目标数据，如图3所示，包括：根据需要目标数据的主站，确定所需数据帧长，根据所述目标数据所需帧长，采样率和网络传输带宽，确定向所述主站每秒发送目标数据的数据帧数；所述数据帧数的计算公式如下：F=ceil其中，F为数据帧数，BW为网络传输带宽，L为所需数据帧长；若F≥1，且，则每秒在样本数据中抽取一次数据，每次抽取F帧数据发送至主站，S为采样率；当F＜1，且N×S≥L则每N秒在样本数据中抽取一次数据，N取N×F≥1的最小值，每次抽取1帧数据发送至主站；若采样率S，既不满足N×S≥L也不满足S≥F×L，则不在样本数据中抽取数据。实施例2：本发明提出了一种用于抽取数据的方法s200，包括：步骤s201，基于基站北斗授时模块以及本地时钟，获取基站采集数据时的秒内纳秒值和UTC秒值，并为所述基站采集的采集数据添加秒内纳秒值和UTC秒值，目标采集数据；步骤s202，基于卡尔曼滤波算法，根据所述时间信息纠正所述目标采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据；步骤s203，根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取。步骤s201中，数据中各采样点的时间由UTC秒值和秒内纳秒值构成，其中UTC秒值通过北斗授时模块直接获得；秒内纳秒值由北斗授时模块的秒脉冲输出及本地时钟共同获得；基站设备对本地时钟的振荡周期数进行计数，设某采样时刻该计数为n，时钟标称周期为T，则秒内纳秒值nsInSec = n×T，当接收到北斗模块的秒脉冲输出后，清空当前计数并重新开始计数，当计数值达到时钟标称主频率值时，计数不再增加。步骤s202，利用卡尔曼滤波来修正由于本地时钟漂移引起的时间误差及采样率误差，卡尔曼滤波中待估计的状态量为各采样点对应的时间真实treal和本地时钟真实振荡周期Treal，设时钟的标称频率为M，则每经过M个采样点，将该点的时间ttest作为观测值输入滤波器中，ttest=utcs×109 + ntest×Tout，其中utcs为数据时间的UTC秒，计数ntest=nsInSec/T，Tout为当前滤波器输出的时钟周期最佳估计值。当滤波器收敛后，滤波器给出的最佳估计值中即包含纠正后的样点时间treal以及时钟真实的振荡周期Treal。根据此样点纠正后的时间以及时钟真实的振荡周期，纠正其余样点的时间。本发明中数据的采样时钟使用的是同一个本地时钟，根据估计出的时钟真实振荡周期，可以获得数据真实的采样率。步骤s203中，为了降低传输的数据量，对数据进行自适应的抽取。由于主站计算所需的每帧数据长度固定为L，首先根据网络带宽BW及数据采样率S计算每秒需要发送的数据帧数F，F=ceil，当F≥1，则每秒抽取一次，每次抽取F帧发送；当F＜1，则每N秒抽取一次，N取满足N×F≥1的最小值，每次抽取1帧发送；若当前采样率过低，如图3所示，既不满足N×S≥L也不满足S≥F×L，无法达到上述抽取要求，则不进行抽取。实施例3：本发明提出了一种用于抽取数据的方法s300，包括：步骤s301，基于基站北斗授时模块以及本地时钟，获取基站采集数据时的秒内纳秒值和UTC秒值，并为所述基站采集的采集数据添加秒内纳秒值和UTC秒值，目标采集数据；步骤s302，基于卡尔曼滤波算法，根据所述时间信息纠正所述目标采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据；步骤s303，根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取。步骤s301中，数据中各采样点的时间由UTC秒值和秒内纳秒值构成，其中UTC秒值通过北斗授时模块直接获得；秒内纳秒值由北斗授时模块的秒脉冲输出及本地时钟共同获得；基站设备对本地时钟的振荡周期数进行计数，设某采样时刻该计数为n，时钟标称周期为T，则秒内纳秒值nsInSec = n×T，当接收到北斗模块的秒脉冲输出后，清空当前计数并重新开始计数，当计数值达到时钟标称主频率值时，计数不再增加。步骤s302，利用卡尔曼滤波来修正由于本地时钟漂移引起的时间误差及采样率误差，卡尔曼滤波中待估计的状态量为各采样点对应的时间真实treal和本地时钟真实振荡周期Treal，设时钟的标称频率为M，则每经过M个采样点，将该点的时间ttest作为观测值输入滤波器中，ttest=utcs×109 + ntest×Tout，其中utcs为数据时间的UTC秒，计数ntest=nsInSec/T，Tout为当前滤波器输出的时钟周期最佳估计值。当滤波器收敛后，滤波器给出的最佳估计值中即包含纠正后的样点时间treal以及时钟真实的振荡周期Treal。根据此样点纠正后的时间以及时钟真实的振荡周期，纠正其余样点的时间。步骤s303中，由于主站计算所需的每帧数据长度固定为L，首先根据网络带宽BW及数据采样率S计算每秒需要发送的数据帧数F，F=ceil，当F≥1，则每秒抽取一次，每次抽取F帧发送；当F＜1，则每N秒抽取一次，N取满足N×F≥1的最小值，每次抽取1帧发送；若当前采样率过低，如图3所示，既不满足N×S≥L也不满足S≥F×L，无法达到上述抽取要求，则不进行抽取。为使各基站抽取后的数据均在同一时间范围内，数据抽取的起始位置均取数据时间跨秒后的第一个采样点。实施例4：本发明还提供了一种用于抽取数据的系统400，如图4所示，包括：数据采集单元401，用于基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，并为所述基站采集的采集数据添加时间信息，得到带时间信息的采集数据；修正单元402，用于基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据；数据抽取单元403，用于根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取。其中，时间信息为秒内纳秒值和UTC秒值。其中，数据采集单元401基于基站北斗授时模块以及本地时钟，获取基站采集数据时的时间信息，包括：针对本地时钟的振荡周期进行时钟计数，得到时钟计数值，同步触发基站的数据采集信号，所述数据采集信号用于控制基站采集数据，同步基于北斗授时模块发出UTC秒值和秒脉冲；通过本地时钟接收所述秒脉冲，在本地时钟接收秒脉冲后，清空当前的时钟计数值，并针对本地时钟的振荡周期进行重新时钟计数，得到时钟计数值；所述时钟计数值达到时钟标称主频率值时，计数不再增加；基于时钟标称周期和时钟计数值，计算得到秒内纳秒值，计算公式如下：nsInSec = n×T其中，nsInSec为秒内纳秒值，n为时钟计数值，T为时钟标称周期。其中，修正单元402基于卡尔曼滤波算法，根据所述时间信息纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据，包括：确定待估计的状态量，所述待估计的状态量为采样点的采样时间的真实时间和本地时钟真实振荡周期；将所述采样点的测试时间ttest作为观测值，输入滤波器中进行迭代计算，待所述滤波器收敛后，得到时钟周期最佳估计值；所述迭代计算公式，如下：ttest=utcs×109 + ntest×Tout其中，ttest为采样点的测试时间，utcs为UTC秒值，ntest=n= nsInSec/T，Tout为当前卡尔曼算法滤波器输出的时钟周期最佳估计值，nsInSec为秒内纳秒值，n为时钟计数值，T为时钟标称周期；基于时钟周期最佳估计值，得到待估计的状态量；基于所述待估计的状态量，纠正所述带时间信息的采集数据，因所述本地时钟漂移引起的时间误差及采样率误差，以得到样本数据。其中，数据抽取单元403根据样本数据的采样率，所需数据帧长和网络传输带宽，对样本数据进行抽取，以得到目标数据，包括：根据需要目标数据的主站，确定所需数据帧长，根据所述目标数据所需帧长，采样率和网络传输带宽，确定向所述主站每秒发送目标数据的数据帧数；所述数据帧数的计算公式如下：F=ceil其中，F为数据帧数，BW为网络传输带宽，L为所需数据帧长；若F≥1，且，则每秒在样本数据中抽取一次数据，每次抽取F帧数据发送至主站，S为采样率；当F＜1，且N×S≥L则每N秒在样本数据中抽取一次数据，N取N×F≥1的最小值，每次抽取1帧数据发送至主站；若采样率S，既不满足N×S≥L也不满足S≥F×L，则不在样本数据中抽取数据。本发明数据的准确时间通过本地北斗授时模块及本地时钟获得并经过卡尔曼滤波纠正，各基站间不需要进行时钟同步；卡尔曼滤波算法给出了时钟的真实周期，由于数据采集使用相同的本地时钟，因此获得了数据的真实采样率，有助于提高后续TDOA计算的精度；根据网络带宽对数据进行自适应抽取，降低了数据传输压力，避免数据积压，由于数据时间经过纠正，根据时间进行抽取可以保证抽取出的数据在同一时间范围内。本领域内的技术人员应明白，本发明的实施例可提供为方法、系统、或计算机程序产品。因此，本发明可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本发明实施例中的方案可以采用各种计算机语言实现，例如，面向对象的程序设计语言Java和直译式脚本语言JavaScript等。本发明是参照根据本发明实施例的方法、设备、和计算机程序产品的流程图和／或方框图来描述的。应理解可由计算机程序指令实现流程图和／或方框图中的每一流程和／或方框、以及流程图和／或方框图中的流程和／或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的步骤。尽管已描述了本发明的优选实施例，但本领域内的技术人员一旦得知了基本创造性概念，则可对这些实施例作出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本发明范围的所有变更和修改。显然，本领域的技术人员可以对本发明进行各种改动和变型而不脱离本发明的精神和范围。这样，倘若本发明的这些修改和变型属于本发明权利要求及其等同技术的范围之内，则本发明也意图包含这些改动和变型在内。
