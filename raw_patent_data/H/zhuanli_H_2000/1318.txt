标题title
一种兼容多种协议的充电器的电路及控制方法
摘要abst
本发明提供的一种兼容多种协议的充电器的电路及控制方法，可以为用户的不同的智能设备进行充电，根据通信过程自动判断智能设备是否为快充设备，若为快充设备，自动适配快充协议，激活设备的快充功能，并为设备设置输出合适的功率进行电量补充；若为普通设备，通过调整输出以安全的电压和电流为设备充电，提升用户的使用体验。另外，还通过传感器获取电路的温度等状态信息，调整输出状态用以确保电路的安全性以及减少不必要的电能损耗。
权利要求书clms
1.一种兼容多种协议的充电器的电路，其特征在于，所述兼容多种协议的充电器的电路包括：输入诱导单元、电压保护单元、可调稳压单元、快充管理单元、降压单元、限流单元、温度检测单元、处理器，其中，所述输入诱导单元，与输入电源通信连接，用于调节所述充电器的电路所获得的输入功率；所述电压保护单元，设置于输入电源与所述可调稳压单元之间；所述可调稳压单元，包括一个输入端和一个输出端；所述可调稳压单元的输入端与所述电压保护单元连接；所述可调稳压单元用于保持输出恒定电压，并通过所述处理器调节恒定电压的第一电压值，所述可调稳压单元向所述快充管理单元和所述降压单元提供电压；所述快充管理单元，与第一充电目标和所述处理器通信连接，用调节向充电目标的充电功率；所述降压单元，包括一个输入端和一个输出端；所述降压单元的输入端与所述可调稳压单元接连，所述降压单元用于提供恒定电压，输出符合第二充电目标的第二电压值；所述限流单元，包括一个输入端和一个输出端；所述限流单元输入端与所述降压单元连接，所述限流单元用于调整对第二充电目标的输出功率；所述温度检测单元，用于获取所述充电器的电路温度信息，根据温度信息调节对第一充电目标或第二充电目标的输出功率。2.根据权利要求1所述的兼容多种协议的充电器的电路，其特征在于，所述输入诱导单元，包括：快充诱导协议芯片IC2、匹配电阻R21、匹配电阻R22；所述快充诱导协议芯片的通道一配置引脚与所述匹配电阻R21的一端连接，所述匹配电阻R21的另一端与输入电源的通道一配置引脚连接；所述快充诱导协议芯片的配置二配置引脚与所述匹配电阻R22的一端连接，所述匹配电阻R22的另一端与输入电源的通道二配置引脚连接；所述快充诱导协议芯片的数据引脚DP和数据引脚DN分别与输入电源的数据引脚DP和数据引脚DN连接；所述快充诱导协议芯片的电源引脚接入5V电平，所述快充诱导协议芯片的地引脚接地。3.根据权利要求1所述的兼容多种协议的充电器的电路，其特征在于，所述可调稳压单元，包括：可调稳压芯片IC3、反馈电阻R31、反馈电阻R32；所述可调稳压芯片的输入引脚Vin接入经过所述电压保护单元的电源VCC1；所述可调稳压芯片的使能引脚En接入处理器的第一使能引脚MCU-En1；所述可调稳压芯片的输出引脚Vout设置输出电平VCC2，并连接所述反馈电阻R31的一端，所述反馈电阻R31的另一端接入所述可调稳压芯片的反馈引脚FB；所述可调稳压芯片的反馈引脚还连接所述反馈电阻R32的一端，所述反馈电阻R32的另一端接入所述可调稳压芯片的地引脚GND，并接入地电平。4.根据权利要求1所述的兼容多种协议的充电器的电路，其特征在于，所述快充管理单元，包括：快充管理芯片IC4、场效应管Q4、匹配电阻R41、极性电容C41、极性电容C42；所述快充管理芯片IC4的电源输入引脚VIN接入所述可调稳压芯片的输出引脚Vout设置的输出电平VCC2，并连接所述场效应管Q4的漏极，并连接所述极性电容C41，所述极性电容C41的另一端接地；所述快充管理芯片的控制引脚LSG连接匹配电阻R41的一端，所述匹配电阻R41的另一端接入所述场效应管Q4的栅极；所述快充管理芯片的电源输出总线引脚VBUS连接场效应管Q4的源极，并且作为输出电源连接第一充电目标的电源引脚；所述场效应管Q4的栅极和源极分别连接极性电容C2的两端；所述快充管理芯片的通信数据引脚SDA和通信时钟引脚SCL分别与处理器的通信数据引脚MCU-SDA和通信时钟引脚MCU-SCL连接；所述快充管理芯片的数据引脚DP和数据引脚DN分别与第一充电目标的数据引脚DP和数据引脚DN链接。5.根据权利要求1所述的兼容多种协议的充电器的电路，其特征在于，所述降压单元、所述限流单元，包括：降压芯片IC5、限流芯片IC6、功率电感L5、反馈电阻R51、反馈电阻R52、反馈电阻R53、极性电容C51、极性电容C52；所述降压芯片的电源输入引脚Vin接入所述可调稳压芯片的输出引脚Vout设置的输出电平VCC2；所述降压芯片的使能引脚En接入处理器的第二使能引脚MCU-En2；所述降压芯片的输出引脚Vout连接反馈电阻R51的一端，所述反馈电阻R51的另一端接入所述降压芯片的反馈引脚FB，所述降压芯片的反馈引脚FB连接反馈电阻R52，反馈电阻R52另一端接入所述降压芯片的地引脚GND，并接入地电平；所述功率电感L5的一端连接所述降压芯片的输出引见Vout，另一端连接所述限流芯片的电源输入引脚Vin；所述限流芯片的反馈引脚FLG连接所述反馈电阻R53的一端，所述反馈电阻R53的另一端连接所述限流芯片的电源输入引脚Vin；所述极性电容C51一端连接所述限流芯片的电源输入引脚Vin，另一端接地；所述极性电容C52一端连接所述限流芯片的输出引脚Vout，另一端接地；所述限流芯片的输出引脚Vout作为输出电源连接第二充电目标的电源引脚。6.一种兼容多种协议的充电器的控制方法，应用于权利要求1-5任一所述的兼容多种协议的充电器的电路中，其特征在于，包括：获取快充协议信息；根据快充协议信息，分析充电目标是否为快充设备，得到第一电压信息；根据第一电压信息，得到第一温度阈值信息；获取温度信息；根据温度信息与第一温度阈值信息的关系，得到第二电压信息；根据第二电压信息，调整输出电压。7.根据权利要求6所述的一种兼容多种协议的充电器的控制方法，其特征在于，所述根据快充协议信息，分析充电目标是否为快充设备，得到第一电压信息，具体为：根据所述快充协议信息，判断充电目标是否为快充设备；若是，根据快充协议信息中的功率信息，设置第一电压信息；若否，将第一电压信息设置为默认普通充电的电压信息；所述快充协议信息包括，目标信息、功率信息。8.根据权利要求6所述的一种兼容多种协议的充电器的控制方法，其特征在于，所述根据第一电压信息，得到第一温度阈值信息，具体为：根据第一电压信息，查表获得第一温度阈值信息；所述第一温度阈值信息为在第一电压信息的工作状态下，充电器所允许的最高工作温度值。9.根据权利要求6所述的一种兼容多种协议的充电器的控制方法，其特征在于，所述根据温度信息与第一温度阈值信息的关系，得到第二电压信息，具体为：判断所述温度信息与第一温度阈值信息的大小关系；若所述温度信息不超过第一温度阈值信息，根据第一电压信息设置第二电压信息；若所述温度信息超过第一温度阈值信息，根据预设的电压差值信息设置第二电压信息。10.根据权利要求6所述的一种兼容多种协议的充电器的控制方法，其特征在于，所述根据第二电压信息，调整输出电压，具体为：根据第二电压信息，得到反馈电阻的阻值信息；根据所述阻值信息，通过预设的通信指令调整数字可调变阻器的电阻值，用以调整输出电压。
说明书desc
技术领域本发明属于充电器控制领域，更具体的，本发明公开了一种兼容多种协议的充电器的电路及控制方法。背景技术随着充电技术的普及，尤其是快充技术的日益发展，以及用户手中的智能设备的数量逐渐增多，兼容多种设备的充电配件成为了厂商们的研发对象。由于快充行业内没有统一的共识，逐渐衍生出了高通QuickCharge、联发科Pump Express、华为FastCharge Protoco和USB PD等快充协议。目前手机端存在的主流快充协议包括USB PD、QC、AFC、FCP、SCP、VOOC、PE、FlashCharge等。只有智能设备与充电器通信正常，才能激活智能设备的快速充电功能，这就导致了个充电器无法适配不同型号的智能设备所对应的快充协议。此外，用户手中除了有允许快充的智能设备，也存在如智能手表、耳机等需要普通充电速度的设备。为应对用户手中多种多样的智能设备，需要设计兼容多种协议和设备的充电器，以提升用户体验。发明内容鉴于上述问题，本发明的目的在于提供一种兼容多种快充协议的充电器的电路及控制方法，可适配多种智能设备的充电需求。当识别为允许快充的设备时，自动适配对应协议，用以激活智能设备的快充功能；当识别为普通充电设备时，通过调整输出确保以安全的输出为智能设备充电。从而使用户仅需配备一个充电器，即可适配手上多种智能设备的充电需求，提升使用体验。为了实现上述目的，本发明第一方面提供了一种兼容多种协议的充电器的电路，所述兼容多种协议的充电器的电路包括：一种兼容多种协议的充电器的电路，其特征在于，所述兼容多种协议的充电器的电路包括：输入诱导单元、电压保护单元、可调稳压单元、快充管理单元、降压单元、限流单元、温度检测单元、处理器，其中，所述输入诱导单元，与输入电源通信连接，用于调节所述充电器的电路所获得的输入功率；所述电压保护单元，设置于输入电源与所述可调稳压单元之间；所述可调稳压单元，包括一个输入端和一个输出端；所述可调稳压单元的输入端与所述电压保护单元连接；所述可调稳压单元用于保持输出恒定电压，并通过所述处理器调节恒定电压的第一电压值，所述可调稳压单元向所述快充管理单元和所述降压单元提供电压；所述快充管理单元，与第一充电目标和所述处理器通信连接，用调节向充电目标的充电功率；所述降压单元，包括一个输入端和一个输出端；所述降压单元的输入端与所述可调稳压单元接连，所述降压单元用于提供恒定电压，输出符合第二充电目标的第二电压值；所述限流单元，包括一个输入端和一个输出端；所述限流单元输入端与所述降压单元连接，所述限流单元用于调整对第二充电目标的输出功率；所述温度检测单元，用于获取所述充电器的电路温度信息，根据温度信息调节对第一充电目标或第二充电目标的输出功率。本方案中，所述输入诱导单元，包括：所述快充诱导协议芯片的通道一配置引脚与所述匹配电阻R21的一端连接，所述匹配电阻R21的另一端与输入电源的通道一配置引脚连接；所述快充诱导协议芯片的配置二配置引脚与所述匹配电阻R22的一端连接，所述匹配电阻R22的另一端与输入电源的通道二配置引脚连接；所述快充诱导协议芯片的数据引脚DP和数据引脚DN分别与输入电源的数据引脚DP和数据引脚DN连接；所述快充诱导协议芯片的电源引脚接入5V电平，所述快充诱导协议芯片的地引脚接地。在本方案中，所述可调稳压单元，包括：可调稳压芯片IC3、反馈电阻R31、反馈电阻R32；所述可调稳压芯片的输入引脚Vin接入经过所述电压保护单元的电源VCC1；所述可调稳压芯片的使能引脚En接入处理器的第一使能引脚MCU-En1；所述可调稳压芯片的输出引脚Vout设置输出电平VCC2，并连接所述反馈电阻R31的一端，所述反馈电阻R31的另一端接入所述可调稳压芯片的反馈引脚FB；所述可调稳压芯片的反馈引脚还连接所述反馈电阻R32的一端，所述反馈电阻R32的另一端接入所述可调稳压芯片的地引脚GND，并接入地电平。在本方案中，所述快充管理单元，包括：快充管理芯片IC4、场效应管Q4、匹配电阻R41、极性电容C41、极性电容C42；所述快充管理芯片IC4的电源输入引脚VIN接入所述可调稳压芯片的输出引脚Vout设置的输出电平VCC2，并连接所述场效应管Q4的漏极，并连接所述极性电容C41，所述极性电容C41的另一端接地；所述快充管理芯片的控制引脚LSG连接匹配电阻R41的一端，所述匹配电阻R41的另一端接入所述场效应管Q4的栅极；所述快充管理芯片的电源输出总线引脚VBUS连接场效应管Q4的源极，并且作为输出电源连接第一充电目标的电源引脚；所述场效应管Q4的栅极和源极分别连接极性电容C2的两端；所述快充管理芯片的通信数据引脚SDA和通信时钟引脚SCL分别与处理器的通信数据引脚MCU-SDA和通信时钟引脚MCU-SCL连接；所述快充管理芯片的数据引脚DP和数据引脚DN分别与第一充电目标的数据引脚DP和数据引脚DN链接。在本方案中，所述降压单元、所述限流单元，包括：降压芯片IC5、限流芯片IC6、功率电感L5、反馈电阻R51、反馈电阻R52、反馈电阻R53、极性电容C51、极性电容C52；所述降压芯片的电源输入引脚Vin接入所述可调稳压芯片的输出引脚Vout设置的输出电平VCC2；所述降压芯片的使能引脚En接入处理器的第二使能引脚MCU-En2；所述降压芯片的输出引脚Vout连接反馈电阻R51的一端，所述反馈电阻R51的另一端接入所述降压芯片的反馈引脚FB，所述降压芯片的反馈引脚FB连接反馈电阻R52，反馈电阻R52另一端接入所述降压芯片的地引脚GND，并接入地电平；所述功率电感L5的一端连接所述降压芯片的输出引见Vout，另一端连接所述限流芯片的电源输入引脚Vin；所述限流芯片的反馈引脚FLG连接所述反馈电阻R53的一端，所述反馈电阻R53的另一端连接所述限流芯片的电源输入引脚Vin；所述极性电容C51一端连接所述限流芯片的电源输入引脚Vin，另一端接地；所述极性电容C52一端连接所述限流芯片的输出引脚Vout，另一端接地；所述限流芯片的输出引脚Vout作为输出电源连接第二充电目标的电源引脚。本发明第二方面还提供一种方法，应用于上述任一所述的电路中，具体包括：获取快充协议信息；根据快充协议信息，分析充电目标是否为快充设备，得到第一电压信息；根据第一电压信息，得到第一温度阈值信息；获取温度信息；根据温度信息与第一温度阈值信息的关系，得到第二电压信息；根据第二电压信息，调整输出电压。在本方案中，所述根据快充协议信息，分析充电目标是否为快充设备，得到第一电压信息，具体为：根据所述快充协议信息，判断充电目标是否为快充设备；若是，根据快充协议信息中的功率信息，设置第一电压信息；若否，将第一电压信息设置为默认普通充电的电压信息；所述快充协议信息包括，目标信息、功率信息。在本方案中，所述根据第一电压信息，得到第一温度阈值信息，具体为：根据第一电压信息，查表获得第一温度阈值信息；所述第一温度阈值信息为在第一电压信息的工作状态下，充电器所允许的最高工作温度值。在本方案中，所述根据温度信息与第一温度阈值信息的关系，得到第二电压信息，具体为：判断所述温度信息与第一温度阈值信息的大小关系；若所述温度信息不超过第一温度阈值信息，根据第一电压信息设置第二电压信息；若所述温度信息超过第一温度阈值信息，根据预设的电压差值信息设置第二电压信息。在本方案中，所述根据第二电压信息，调整输出电压，具体为：根据第二电压信息，得到反馈电阻的阻值信息；根据所述阻值信息，通过预设的通信指令调整数字可调变阻器的电阻值，用以调整输出电压。本发明提供的一种兼容多种协议的充电器的电路及控制方法，可以为用户的不同的智能设备进行充电，根据通信过程自动判断智能设备是否为快充设备，若为快充设备，自动适配快充协议，激活设备的快充功能，并为设备设置输出合适的功率进行电量补充；若为普通设备，通过调整输出以安全的电压和电流为设备充电，提升用户的使用体验。另外，还通过传感器获取电路的温度等状态信息，调整输出状态用以确保电路的安全性以及减少不必要的电能损耗。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本发明的某些实施例，因此不应被看作是对范围的限定。图1示出了本发明实施例提供的所述兼容多种协议的充电器的电路的结构框图；图2示出了本发明实施例提供的所述输入诱导单元的一种电路连接结构图；图3示出了本发明实施例提供的所述可调稳压单元的一种电路连接结构图；图4示出了本发明实施例提供的所述快充管理单元的一种电路连接结构图；图5示出了本发明实施例提供的所述降压单元和所述限流单元的一种电路连接结构图；图6示出了本发明实施例提供的所述兼容多种协议的充电器的控制方法的一种示意图；图7示出了本发明实施例提供的获取所述第一电压信息的流程图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。除非另有定义，本发明实施例使用的所有术语 具有与本发明所属领域的普通技术人员共同理解的相同含义。还应当理解，诸如在通常字典里定义的那些术语应当被解释为具有与它们在相关技术的上下文中的含义相一致的含义，而不应用理想化或极度形式化的意义来解释，除非本发明实施例明确地这样定义。本发明实施例中使用的“第一”、“第二”以及类似的词语并不表示任何顺序、数量或者重要性，而只是用来区分不同的组成部分。“一个”、“一”或者“该”等类似词语也不表示数量限制，而是表示存在至少一个。同样，“包括”或者“包含”等类似的词语意指出现该词前面的元件或者物件涵盖出现在该词后面列举的元件或者物件及其等同，而不排除其他元件或者物件。“连接”或者“相连”等类似的词语并非限定于物理的或者机械的连接，而是可以包括电性的连接，不管是直接的还是间接的。本发明实施例的方法前面或后面的步骤不一定按照顺序来精确的进行。相反，可以按照倒序或同时处理各种步骤。同时，也可以将其他操作添加到这些过程中，或从这些过程移除某一步或数步。图1示出了本发明实施例提供的所述兼容多种协议的充电器的电路的结构框图。如图1所示，本发明公开了一种兼容多种协议的充电器的电路，包括：输入诱导单元102、电压保护单元104、可调稳压单元106、快充管理单元108、降压单元110、限流单元112、温度检测单元114、处理器，其中，所述输入诱导单元102，与输入电源通信连接，用于调节所述充电器的电路所获得的输入功率；所述电压保护单元104，设置于输入电源与所述可调稳压单元之间；所述可调稳压单元106，包括一个输入端和一个输出端；所述可调稳压单元的输入端与所述电压保护单元连接；所述可调稳压单元用于保持输出恒定电压，并通过所述处理器调节恒定电压的第一电压值，所述可调稳压单元向所述快充管理单元和所述降压单元提供电压；所述快充管理单元108，与第一充电目标和所述处理器通信连接，用调节向充电目标的充电功率；所述降压单元110，包括一个输入端和一个输出端；所述降压单元的输入端与所述可调稳压单元接连，所述降压单元用于提供恒定电压，输出符合第二充电目标的第二电压值；所述限流单元112，包括一个输入端和一个输出端；所述限流单元输入端与所述降压单元连接，所述限流单元用于调整对第二充电目标的输出功率；所述温度检测单元114，用于获取所述充电器的电路温度信息，根据温度信息调节对第一充电目标或第二充电目标的输出功率。需要说明的是，处理器作为控制电路的核心，用于收集各个单元所反馈的信息，并根据信息控制各个单元的工作状态。输入诱导单元102与输入电源通信连接，输入电源一般为适配器。输入诱导单元通过通信协议与适配器通信，通过发送不同功率输入需求的通信指令，诱导适配器向充电器电路输出对应的电压或功率。当诱导适配器输出9V、12V等高电压时配以大功率输出给充电器电路进行供电，是作为充电器电路给快充智能设备提供快充服务时的保障。电压保护单元104设置于输入电源与可调稳压单元106之间，也就是说设置于适配器与充电器电路之间，用于防止外部突然输入瞬间的高压，烧坏充电器电路的元器件。可调稳压单元106接收来自通过电压保护单元104的电源输入，通过可调稳压单元106内部的可调稳压芯片向充电器电路输出恒定的电压，尤其是为快充管理单元108和降压单元110提供恒定的电源支持。处理器根据输入诱导单元102通信后所得到的目标电压值，设置可调稳压单元106内部的可调稳压芯片，使其输出接近目标电压值的电压。快充管理单元108包括了多协议芯片，可支持多种快充协议，例如常用的QC3.0、PD3.0、华为FCP、三星AFC、苹果Apple 2.4A等,可很好地兼容市面上多数智能设备的快充需求。第一充电目标为具有快充功能的智能设备，通常指手机、平板等，快充管理单元108与快充智能设备连接后，识别快充智能设备的快充协议，并选择对应协议的指令与快充智能设备通信，激活快充智能设备的快充服务功能，加快充电速度，提升用户体验感。降压单元110的输入端连接可调稳压单元106的输出端，降压单元110将可调稳压单元106输出的恒定电压调整至符合普通智能设备充电所需的电压值，通常是5V。第二充电目标为适配常用充电电压和电流的普通设备，通常指智能手表、无线耳机等。降压单元110的输出端连接所述限流单元112的输入端，通过限流单元102调整充电器电路对普通设备的输出电流，通常而言输出电流设置在0.5A至2A范围内，起到控制充电功率的效果。也就是说，通过降压单元110和限流单元112可以为接入到充电器电路中的普通设备提供一个安全稳定的充电功率。温度检测单元114包括温度传感器，用于采集充电器电路的温度信息，也就是反应出充电器电路的芯片、电容、电阻等元器件的工作温度。根据电路元器件的工作温度，调整充电器对智能设备的充电状态，用以保证充电器电路工作在安全的环境下。图2示出了本发明实施例提供的所述输入诱导单元的一种电路连接结构图。根据本发明实施例，所述输入诱导单元，包括：快充诱导协议芯片IC2、匹配电阻R21、匹配电阻R22；所述快充诱导协议芯片的通道一配置引脚与所述匹配电阻R21的一端连接，所述匹配电阻R21的另一端与输入电源的通道一配置引脚连接；所述快充诱导协议芯片的配置二配置引脚与所述匹配电阻R22的一端连接，所述匹配电阻R22的另一端与输入电源的通道二配置引脚连接；所述快充诱导协议芯片的数据引脚DP和数据引脚DN分别与输入电源的数据引脚DP和数据引脚DN连接；所述快充诱导协议芯片的电源引脚接入5V电平，所述快充诱导协议芯片的地引脚接地。需要说明的是，作为一种实施方式，快充诱导协议芯片IC2可选用CR6125B芯片，CR6125B芯片是一款电压诱导芯片。适配器默认状态下只会输出5V的电压，只有启动的快充协议，适配器才会输出9V、12V等高电压。电压诱导芯片在与适配器通信时，启用快充协议，使得适配器认为目标设备需要进行快充服务，即输出快充的高电压。图2展示了CR6125B芯片的核心引脚的连接情况。芯片需要5V的电压供电。芯片通过通道一配置引脚、通道二配置引脚、数据引脚DP和数据引脚DN与适配器端连接，芯片与适配器通信，用于启动快充协议，诱导适配器输出高电压。匹配电阻R21和匹配电阻R22能够稳定通信引脚上的电平，减少信号噪声。图3示出了本发明实施例提供的所述可调稳压单元的一种电路连接结构图。根据本发明实施例，所述可调稳压单元，包括：可调稳压芯片IC3、反馈电阻R31、反馈电阻R32；所述可调稳压芯片的输入引脚Vin接入经过所述电压保护单元的电源VCC1；所述可调稳压芯片的使能引脚En接入处理器的第一使能引脚MCU-En1；所述可调稳压芯片的输出引脚Vout设置输出电平VCC2，并连接所述反馈电阻R31的一端，所述反馈电阻R31的另一端接入所述可调稳压芯片的反馈引脚FB；所述可调稳压芯片的反馈引脚还连接所述反馈电阻R32的一端，所述反馈电阻R32的另一端接入所述可调稳压芯片的地引脚GND，并接入地电平。需要说明的是，稳压芯片是一种集成电路芯片，用于稳定电源电压并确保在不同负载条件下输出恒定电压。稳压芯片可以根据电源电压变化自动调节电流，以保持输出电压不变。其中，可调稳压芯片是根据反馈信号调整稳压输出值的芯片。本发明实施例中展示一种可调稳压芯片的工作电路，通过反馈电阻R31和反馈电阻R32分压后的电压值接入反馈引脚FB，反馈引脚FB根据实时电压值调整稳压输出值。也就是说，通过调整反馈电阻R31和电阻R2的电阻值，以调整反馈引脚FB电压值，即可达到调整稳压输出值的目的。值得一提的是，还包括：所述反馈电阻R31、所述反馈电阻R32至少一个是数字可调变阻器，通过预设的指令调整数字可调变阻器的电阻值；反馈电阻R31和反馈电阻R32为一个或多个电阻器连接组成，连接方式为串联或并联。需要说明的是，处理器通过预设的指令，可实时对数字可调变阻器的电阻值进行调整。处理器的使能信号作为一种实施方式，反馈电阻R31、反馈电阻R32为一个或多个电阻器串联组成，使调节阻值范围的增大，起到增大输出功率调节范围的效果。例如反馈电阻R31是由一个可调变阻器和一个固定阻值电阻器串联而成，其中可调变阻器的调节范围是0-100个阻值单位，固定阻值电阻器的阻值是50个阻值单位，二者串联后的阻值范围是50-150个阻值单位。作为一种实施方式，反馈电阻R31、反馈电阻R32为一个或多个电阻器串联组成，使调节输出精度提高，起到提高输出功率调节精度的效果。例如假设可调变阻器的调节等级为100级，对于一个调节范围为0-200个阻值单位的可调变阻器而言，其调节步进是2个阻值单位；使用两个调节范围为0-100个阻值单位的可调变阻器串联，组合后的调节范围是0-200个阻值单位，其调节步进是1个阻值单位。图4示出了本发明实施例提供的所述快充管理单元的一种电路连接结构图。根据本发明实施例，所述快充管理单元 包括：快充管理芯片IC4、场效应管Q4、匹配电阻R41、极性电容C41、极性电容C42；所述快充管理芯片IC4的电源输入引脚VIN接入所述可调稳压芯片的输出引脚Vout设置的输出电平VCC2，并连接所述场效应管Q4的漏极，并连接所述极性电容C41，所述极性电容C41的另一端接地；所述快充管理芯片的控制引脚LSG连接匹配电阻R41的一端，所述匹配电阻R41的另一端接入所述场效应管Q4的栅极；所述快充管理芯片的电源输出总线引脚VBUS连接场效应管Q4的源极，并且作为输出电源连接第一充电目标的电源引脚；所述场效应管Q4的栅极和源极分别连接极性电容C2的两端；所述快充管理芯片的通信数据引脚SDA和通信时钟引脚SCL分别与处理器的通信数据引脚MCU-SDA和通信时钟引脚MCU-SCL连接；所述快充管理芯片的数据引脚DP和数据引脚DN分别与第一充电目标的数据引脚DP和数据引脚DN链接。需要说明的是，作为一种实施方式，快充管理芯片IC4可选用IM2406芯片，IM2406芯片是一款高度集成的快充管理芯片。快充管理芯片IC4可支持多种快充协议，包括但不限于QC3.0、PD3.0、华为FCP、三星AFC、苹果Apple 2.4A等,用于与快充智能设备通信，并激活快充智能设备的快充服务，使快充智能设备开启快速充电的功能。图4展示了IM2406芯片的核心引脚的连接情况。其中，VCC-2是可调稳压芯片输出的足以支持快充服务的电压值。快充管理芯片的控制引脚LSG通过场效应管Q4控制快充管理芯片对快充智能设备的供电情况：当控制引脚LSG设置为低电平时，即场效应管Q4栅极和源极之间的电压小于场效应管的导通阈值时，场效应管Q4处于截止状态，VCC-2不向快充智能设备提供电源；当控制引脚LSG设置为高电平时，即场效应管Q4栅极和源极之间的电压大于场效应管的导通阈值时，场效应管Q4处于导通状态，VCC-2不向快充智能设备提供电源。快充管理芯片的通信数据引脚SDA和通信时钟引脚SCL分别与处理器的通信数据引脚MCU-SDA和通信时钟引脚MCU-SCL连接，通过通信引脚传输快充管理芯片的状态和接收来自处理器的控制指令。图5示出了本发明实施例提供的所述降压单元和所述限流单元的一种电路连接结构图。根据本发明实施例，所述降压单元、所述限流单元 包括：降压芯片IC5、限流芯片IC6、功率电感L5、反馈电阻R51、反馈电阻R52、反馈电阻R53、极性电容C51、极性电容C52；所述降压芯片的电源输入引脚Vin接入所述可调稳压芯片的输出引脚Vout设置的输出电平VCC2；所述降压芯片的使能引脚En接入处理器的第二使能引脚MCU-En2；所述降压芯片的输出引脚Vout连接反馈电阻R51的一端，所述反馈电阻R51的另一端接入所述降压芯片的反馈引脚FB，所述降压芯片的反馈引脚FB连接反馈电阻R52，反馈电阻R52另一端接入所述降压芯片的地引脚GND，并接入地电平；所述功率电感L5的一端连接所述降压芯片的输出引见Vout，另一端连接所述限流芯片的电源输入引脚Vin；所述限流芯片的反馈引脚FLG连接所述反馈电阻R53的一端，所述反馈电阻R53的另一端连接所述限流芯片的电源输入引脚Vin；所述极性电容C51一端连接所述限流芯片的电源输入引脚Vin，另一端接地；所述极性电容C52一端连接所述限流芯片的输出引脚Vout，另一端接地；所述限流芯片的输出引脚Vout作为输出电源连接第二充电目标的电源引脚。需要说明的是，降压芯片是稳压芯片的一种。稳压芯片是一种集成电路芯片，用于稳定电源电压并确保在不同负载条件下输出恒定电压。稳压芯片可以根据电源电压变化自动调节电流，以保持输出电压不变。其中，可调稳压芯片是根据反馈信号调整稳压输出值的芯片。本发明实施例中展示一种可调降压芯片的工作电路，通过反馈电阻R51和反馈电阻R52分压后的电压值接入反馈引脚FB，反馈引脚FB根据实时电压值调整稳压输出值。也就是说，通过调整反馈电阻R51和电阻52的电阻值，以调整反馈引脚FB电压值，即可达到调整稳压输出值的目的。限流芯片具有调整和限制电流的作用，以保护电路防止过载和短路的作用。本发明实施例中展示一种限流芯片的工作电路，通过反馈电阻R53调节限流芯片的电流限制值。也就是说，通过调整反馈电阻R53的电阻值，以调整芯片对外部输出电流值的大小。值得一提的是，还包括：所述反馈电阻R51、所述反馈电阻R52至少一个是数字可调变阻器，所述反馈电阻R53为数字可调变阻器，通过预设的指令调整数字可调变阻器的电阻值；反馈电阻R51、反馈电阻R52和反馈电阻R53为一个或多个电阻器连接组成，连接方式为串联或并联。需要说明的是，处理器通过预设的指令，可实时对数字可调变阻器的电阻值进行调整。作为一种实施方式，反馈电阻R51、反馈电阻R52、反馈电阻R53为一个或多个电阻器串联组成，使调节阻值范围的增大，起到增大输出功率调节范围的效果。例如反馈电阻R51是由一个可调变阻器和一个固定阻值电阻器串联而成，其中可调变阻器的调节范围是0-100个阻值单位，固定阻值电阻器的阻值是50个阻值单位，二者串联后的阻值范围是50-150个阻值单位。作为一种实施方式，反馈电阻R51、反馈电阻R52、反馈电阻R53为一个或多个电阻器串联组成，使调节输出精度提高，起到提高输出功率调节精度的效果。例如假设可调变阻器的调节等级为100级，对于一个调节范围为0-200个阻值单位的可调变阻器而言，其调节步进是2个阻值单位；使用两个调节范围为0-100个阻值单位的可调变阻器串联，组合后的调节范围是0-200个阻值单位，其调节步进是1个阻值单位。图6示出了本发明实施例提供的所述兼容多种协议的充电器的控制方法的一种示意图。如图6所示，本发明第二方面公开了兼容多种协议的充电器的控制方法，包括：S602，获取快充协议信息；S604，根据快充协议信息，分析充电目标是否为快充设备，得到第一电压信息；S606，根据第一电压信息，得到第一温度阈值信息；S608，获取温度信息；S610，根据温度信息与第一温度阈值信息的关系，得到第二电压信息；S612，根据第二电压信息，调整输出电压。需要说明的是，处理器通过快充管理单元，与充电设备进行通信。快充管理单元使用预存储的各个快充协议分别与充电设备进行通信，若使用快充协议的通信握手正常，表示充电设备为充电器电路可支持的快充设备，并通过快充协议获取充电的第一电压信息；若使用快充协议的通信握手均失败，表示该充电设备不是可支持的快充设备，并选择采用默认充电的第一电压信息。其中，第一电压信息是充电输出的电压设置参数。例如，快充管理单元依次使用预存储的QC3.0、PD3.0、华为FCP、三星AFC、苹果Apple 2.4A等协议与充电设备进行通信握手。假如，快充管理单元使用PD3.0协议与充电设备进行通信握手成功通过，表示该充电设备为使用PD3.0协议的快充设备，通过PD3.0协议与快充设备进行通信，获取快充的第一电压信息作为输出电压的设置参数。假如，快充管理单元依次使用所有存储的通信协议均无法与充电设备握手成功，则表示该设备不是当前充电器电路所支持的快充设备，并按照默认的第一电压信息即5V电压设置充电电压输出的设置参数。然后，根据所获得的第一电压信息，通过预先存储在处理器中的电压与温度对应表中查询出第一电压信息所对应的第一温度阈值信息，其中，第一温度阈值信息是作为工作温度参考基准温度值，用于计算当前温度值与工作温度的温差值。通过温度传感器获取充电器电路的温度信息，计算温度信息与第一温度阈值的差值，即是温度差值。根据预设于处理其中的温差值与输出电压的对应表中，并以第一电压信息为参考电压，获取当前温差值时候的输出电压，即第二电压信息。其中，第二电压信息为向充电设备输出的电压值。例如，当第一电压信息为9V，且所获得温度阈值为40℃时，当充电器的温度值低于40℃时，表示温度未超过安全工作电压，则第二电压信息可设置为9V；当充电器的温度值高于40℃时，则表示温度已超过安全工作电压，需要通过降压的方式降低充电功率，减少热量的产生，即可依据高于阈值的温度值调整电压，如，若当前温度值为42℃则第二电压信息可设置为8V；若当前温度值为45℃则第二电压信息可设置为6V。最后，根据第二电压信息，调整可调稳压单元或降压单元，实现对充电设备的充电电压的调整。图7示出了本发明实施例提供的获取所述第一电压信息的流程图。根据本发明实施例，所述根据快充协议信息，分析充电目标是否为快充设备，得到第一电压信息，具体为：S702，根据所述快充协议信息，分析充电目标是否为快充设备，S704，若是，根据快充协议信息中的功率信息，设置第一电压信息；S706，若否，将第一电压信息设置为默认普通充电的电压信息；需要说明的是，所述快充协议信息包括，目标信息、功率信息。目标信息是区分充电设备是否为充电器电路可支持的快充设备；功率信息为充电设备的充电电压和充电电流。处理器通过快充管理单元，使用预存储的各个快充协议分别与充电设备进行通信，若使用快充协议的通信握手正常，表示充电设备为充电器电路可支持的快充设备；若使用快充协议的通信握手均失败，表示该充电设备不是可支持的快充设备。当处理器通过快充管理单元与充电设备握手成功，即充电设备为可支持的快充设备时，处理器通过快充管理单元使用对应的快充协议通信，获取充电功率信息，然后，将功率信息中的电压信息，设置为第一电压信息。当处理器通过快充管理单元与充电设备握手失败，即充电设备不是可支持的快充设备时，将第一电压信息设置为默认普通充电的电压信息，也就是5V。根据本发明实施例，所述根据温度信息与第一温度阈值信息的关系，得到第二电压信息，具体为：判断所述温度信息与第一温度阈值信息的大小关系；若所述温度信息不超过第一温度阈值信息，根据第一电压信息设置第二电压信息；若所述温度信息超过第一温度阈值信息，根据预设的电压差值信息设置第二电压信息。需要说明的是，判断温度信息与第一温度阈值的大小关系，即判断充电器电路的温度值是否超过安全工作的温度值。当充电器电路的温度值不高于安全工作温度时，表示可依照预设的电压进行充电，也就是按照第一电压信息设置第二电压信息。例如，若第一电压信息为9V的快充电压，则第二电压信息可设置为9V。当充电器电路的温度值高于安全工作温度时，表示充电器电路需要通过降低充电输出功率的方式降低温度，以确保电路的安全与稳定。此时，先计算充电器电路的温度值与阈值温度的温差值，依据温差值与预设的温差值与输出电压的对应表中，获取电压调整值，然后根据第一电压信息调整第二电压信息。例如，当第一电压信息为9V，且所获得温度阈值为40℃时，若当前温度值为42℃，也就是温差值为2℃，通过查表可知需要降低1V的输出电压，则第二电压信息可设置为8V；若当前温度值为45℃，也就是温差值为5℃，通过查表可知需要降低3V的输出电压，则第二电压信息可设置为6V。根据本发明实施例，所述根据第二电压信息，调整输出电压，具体为：根据第二电压信息，得到反馈电阻的阻值信息；根据所述阻值信息，通过预设的通信指令调整数字可调变阻器的电阻值，用以调整输出电压。需要说明的是，依据可调稳压芯片的特性，其输出电压是由反馈电阻的比值计算获得，也就是说依据反馈电阻R31的阻值与反馈电阻R32的阻值的比值，计算的到可调稳压单元的输出电压。处理器通过预设的指令，可实时对数字可调变阻器的电阻值进行调整。也就是说，处理器可依据所需要输出的电压值，计算出反馈电阻R31的阻值与反馈电阻R32的阻值的比值；然后，再计算出数字可调变阻器所需要的调整值；最后，根据预设的指令对数字可调变阻器的阻值进行调整，达到调整输出电压的效果。值得一提的是，还包括：判断温度信息是否超过预设的安全温度阈值；若超过，根据预设的保护电压信息设置第二电压信息。需要说明的是，预设的安全温度阈值为充电器电路工作的极限温度值，也就是说，当温度值高于极限温度值时，充电器电路就存在烧毁的风险。当温度信息高于安全温度阈值时候，将第二电压信息设置为保护电压。其中，保护电压通常是0V，也就是使充电器电路停止向充电设备进行电能的传输，以达到降温及保护电路和设备的效果。值得一提的是，还包括：根据所述快充协议信息，得到充电目标为第二充电设备时；调整所述快充管理单元的所述快充管理芯片通信激活周期。需要说明的是，当处理器通过快充管理单元，判断充电目标为第二充电设备时，也就是充电设备是充电器电路不支持的快充设备时，处理器会降低快充管理芯片的通信激活周期，已达到降低不必要的通信损耗。快充管理芯片会不断更换快充协议，尝试与充电设备进行通信握手。前期为保证识别的效率，尝试握手的通信发送频率较高，当已判断充电目标为第二充电设备时，即可降低发送频率，以达到降低处理器算力损耗的目的。值得一提的是，还包括：根据所述快充协议信息，得到充电目标为第一充电设备时；禁止所述降压单元的所述降压芯片使能。需要说明的是，当处理器通过快充管理单元，判断充电目标为第一充电设备时，也就是充电设备是充电器电路支持的快充设备时，此时，降压单元不参与设备充电的工作。可通过禁止降压单元的工作使能，关闭降压单元的工作状态，从而避免了降压单元的电能损耗。综上所述，本发明提供的一种兼容多种协议的充电器的电路及控制方法，可以为用户的不同的智能设备进行充电，根据通信过程自动判断智能设备是否为快充设备，若为快充设备，自动适配快充协议，激活设备的快充功能，并为设备设置输出合适的功率进行电量补充；若为普通设备，通过调整输出以安全的电压和电流为设备充电，提升用户的使用体验。另外，还通过传感器获取电路的温度等状态信息，调整输出状态用以确保电路的安全性以及减少不必要的电能损耗。另外，在本发明各个实施例中的各功能模块可以集成在一起形成一个独立的部分，也可以是各个模块单独存在，也可以两个或两个以上模块集成形成一个独立的部分。所述功能如果以软件功能模块的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上所述仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
