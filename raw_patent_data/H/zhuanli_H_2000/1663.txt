标题title
MPLS-VPN Qos路由选择方法、装置及设备
摘要abst
本申请提供一种MPLS‑VPN Qos路由选择方法、装置及设备，该方法包括：获取源网络节点与目的网络节点之间的目标路径，基于目标路径生成MPLS‑VPN路由，目标路径经过源网络节点、中间网络节点和目的网络节点；若中间网络节点对应至少两个下游网络节点，基于QoS参数确定本中间网络节点与该下游网络节点的第一信息强度；采用花朵授粉算法确定本中间网络节点与该下游网络节点的第二信息强度；基于第一信息强度和第二信息强度确定目标信息强度；基于本中间网络节点与每个下游网络节点的目标信息强度选取最优下游网络节点；基于本中间网络节点与最优下游网络节点之间的路径生成目标路径。通过本申请方案，能够提高目标路径的服务质量。
权利要求书clms
1.一种MPLS-VPN Qos路由选择方法，其特征在于，所述方法包括：获取源网络节点与目的网络节点之间的目标路径，基于所述目标路径生成MPLS-VPN路由，所述MPLS-VPN路由用于传输源网络节点与目的网络节点之间的数据报文；其中，所述目标路径至少经过源网络节点、至少一个中间网络节点和目的网络节点，针对每个中间网络节点：若所述中间网络节点对应至少两个下游网络节点，针对每个下游网络节点，基于QoS参数确定本中间网络节点与该下游网络节点的第一信息强度；基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法确定本中间网络节点与该下游网络节点的第二信息强度；基于所述第一信息强度和所述第二信息强度确定本中间网络节点与该下游网络节点的目标信息强度；基于本中间网络节点与每个下游网络节点的目标信息强度，从所述至少两个下游网络节点中选取本中间网络节点对应的最优下游网络节点；基于本中间网络节点与最优下游网络节点之间的路径生成所述目标路径。2.根据权利要求1所述的方法，其特征在于，所述基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法确定本中间网络节点与该下游网络节点的第二信息强度，包括：为该下游网络节点生成位于指定数值区间的随机数；若所述随机数小于已配置的切换概率，基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的局部搜索确定所述第二信息强度；若所述随机数大于等于所述切换概率，基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的全局搜索确定所述第二信息强度。3.根据权利要求2所述的方法，其特征在于，所述基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的局部搜索确定所述第二信息强度，包括：基于本中间网络节点与上游网络节点的目标信息强度、服从均匀分布的随机数、从已有信息强度中随机选取的两个信息强度，确定所述第二信息强度；所述基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的全局搜索确定所述第二信息强度，包括：基于本中间网络节点与上游网络节点的目标信息强度、已配置的授粉强度向量、已有信息强度中的最优信息强度，确定所述第二信息强度。4.根据权利要求1所述的方法，其特征在于，所述QoS参数包括本中间网络节点与该下游网络节点之间的路径对应的链路性能参数、该下游网络节点对应的安全参数；所述基于QoS参数确定本中间网络节点与该下游网络节点的第一信息强度，包括：基于所述链路性能参数确定第一分数值，基于所述安全参数确定第二分数值，并对所述第一分数值和所述第二分数值进行加权得到所述第一信息强度；其中，所述链路性能参数包括以下至少一种：带宽、延时、抖动、丢包率；所述安全参数包括以下至少一种：安全节点类型、节点域类型；所述安全节点类型表示该下游网络节点是安全节点或者不是安全节点；所述节点域类型表示该下游网络节点属于节点域或者不属于节点域。5.根据权利要求4所述的方法，其特征在于，所述基于所述链路性能参数确定第一分数值包括：若所述链路性能参数包括带宽、延时、抖动和丢包率，将带宽代入预设第一函数得到带宽分数，带宽越大则带宽分数越大；将延时代入预设第二函数得到延时分数，延时越大则延时分数越小；将抖动代入预设第三函数得到抖动分数，抖动越大则抖动分数越小；将丢包率代入预设第四函数得到丢包率分数，丢包率越大则丢包率分数越小；对带宽分数、延时分数、抖动分数和丢包率分数进行加权得到第一分数值；所述基于所述安全参数确定第二分数值包括：若所述安全参数包括安全节点类型和节点域类型，则确定安全节点分数和节点域分数，对所述安全节点分数和所述节点域分数进行加权得到第二分数值；其中，在安全节点类型表示该下游网络节点是安全节点时，所述安全节点分数为第一取值，在安全节点类型表示该下游网络节点不是安全节点时，所述安全节点分数为第二取值，所述第一取值大于所述第二取值；在节点域类型表示该下游网络节点属于节点域时，所述节点域分数为第三取值，在节点域类型表示该下游网络节点不属于节点域时，所述节点域分数为第四取值，所述第三取值大于所述第四取值。6.根据权利要求1-5任一项所述的方法，其特征在于，所述基于所述第一信息强度和所述第二信息强度确定本中间网络节点与该下游网络节点的目标信息强度，包括：若所述第一信息强度优于所述第二信息强度，将所述第一信息强度确定为所述目标信息强度；或者，若所述第二信息强度优于所述第一信息强度，将所述第二信息强度确定为所述目标信息强度。7.根据权利要求1所述的方法，其特征在于，所述方法还包括：针对源网络节点，若所述源网络节点对应至少两个下游网络节点，针对每个下游网络节点，基于QoS参数确定所述源网络节点与该下游网络节点的目标信息强度；基于所述源网络节点与每个下游网络节点的目标信息强度，从所述至少两个下游网络节点中选取所述源网络节点对应的最优下游网络节点；基于所述源网络节点与最优下游网络节点之间的路径生成所述目标路径。8.一种MPLS-VPN Qos路由选择装置，其特征在于，所述装置包括：获取模块，用于获取源网络节点与目的网络节点之间的目标路径；生成模块，用于基于所述目标路径生成MPLS-VPN路由，且所述MPLS-VPN路由用于传输源网络节点与目的网络节点之间的数据报文；其中，所述目标路径至少经过源网络节点、至少一个中间网络节点和目的网络节点，针对每个中间网络节点，所述获取模块具体用于：若所述中间网络节点对应至少两个下游网络节点，针对每个下游网络节点，基于QoS参数确定本中间网络节点与该下游网络节点的第一信息强度；基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法确定本中间网络节点与该下游网络节点的第二信息强度；基于所述第一信息强度和所述第二信息强度确定本中间网络节点与该下游网络节点的目标信息强度；基于本中间网络节点与每个下游网络节点的目标信息强度，从所述至少两个下游网络节点中选取本中间网络节点对应的最优下游网络节点；基于本中间网络节点与最优下游网络节点之间的路径生成所述目标路径。9.根据权利要求8所述的装置，其特征在于，其中，所述获取模块基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法确定本中间网络节点与该下游网络节点的第二信息强度时具体用于：为该下游网络节点生成位于指定数值区间的随机数；若所述随机数小于已配置的切换概率，基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的局部搜索确定所述第二信息强度；若所述随机数大于等于所述切换概率，基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的全局搜索确定所述第二信息强度；其中，所述获取模块基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的局部搜索确定所述第二信息强度时具体用于：基于本中间网络节点与上游网络节点的目标信息强度、服从均匀分布的随机数、从已有信息强度中随机选取的两个信息强度，确定所述第二信息强度；其中，所述获取模块基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的全局搜索确定所述第二信息强度时具体用于：基于本中间网络节点与上游网络节点的目标信息强度、已配置的授粉强度向量、已有信息强度中的最优信息强度，确定所述第二信息强度；其中，所述QoS参数包括本中间网络节点与该下游网络节点之间的路径对应的链路性能参数、该下游网络节点对应的安全参数；所述获取模块基于QoS参数确定本中间网络节点与该下游网络节点的第一信息强度时具体用于：基于所述链路性能参数确定第一分数值，基于所述安全参数确定第二分数值，并对所述第一分数值和所述第二分数值进行加权得到所述第一信息强度；其中，所述链路性能参数包括以下至少一种：带宽、延时、抖动、丢包率；所述安全参数包括以下至少一种：安全节点类型、节点域类型；所述安全节点类型表示该下游网络节点是安全节点或者不是安全节点；所述节点域类型表示该下游网络节点属于节点域或者不属于节点域；所述获取模块基于所述链路性能参数确定第一分数值时具体用于：若所述链路性能参数包括带宽、延时、抖动和丢包率，将带宽代入预设第一函数得到带宽分数，带宽越大则带宽分数越大；将延时代入预设第二函数得到延时分数，延时越大则延时分数越小；将抖动代入预设第三函数得到抖动分数，抖动越大则抖动分数越小；将丢包率代入预设第四函数得到丢包率分数，丢包率越大则丢包率分数越小；对带宽分数、延时分数、抖动分数和丢包率分数进行加权得到第一分数值；所述获取模块基于所述安全参数确定第二分数值时具体用于：若所述安全参数包括安全节点类型和节点域类型，则确定安全节点分数和节点域分数，对所述安全节点分数和所述节点域分数进行加权得到第二分数值；在安全节点类型表示该下游网络节点是安全节点时，所述安全节点分数为第一取值，在安全节点类型表示该下游网络节点不是安全节点时，所述安全节点分数为第二取值，所述第一取值大于所述第二取值；在节点域类型表示该下游网络节点属于节点域时，所述节点域分数为第三取值，在节点域类型表示该下游网络节点不属于节点域时，所述节点域分数为第四取值，所述第三取值大于所述第四取值；其中，所述获取模块基于所述第一信息强度和所述第二信息强度确定本中间网络节点与该下游网络节点的目标信息强度时具体用于：若第一信息强度优于第二信息强度，将所述第一信息强度确定为目标信息强度；或者，若第二信息强度优于第一信息强度，将所述第二信息强度确定为目标信息强度；其中，针对源网络节点，所述获取模块获取源网络节点与目的网络节点之间的目标路径时具体用于：若所述源网络节点对应至少两个下游网络节点，针对每个下游网络节点，基于QoS参数确定所述源网络节点与该下游网络节点的目标信息强度；基于所述源网络节点与每个下游网络节点的目标信息强度，从所述至少两个下游网络节点中选取所述源网络节点对应的最优下游网络节点；基于所述源网络节点与最优下游网络节点之间的路径生成所述目标路径。10.一种电子设备，其特征在于，包括：处理器和机器可读存储介质，所述机器可读存储介质存储有能够被所述处理器执行的机器可执行指令；所述处理器用于执行机器可执行指令，以实现权利要求1-7任一所述的方法。
说明书desc
技术领域本申请涉及通信技术领域，尤其是涉及一种MPLS-VPN Qos路由选择方法、装置及设备。背景技术MPLS是使用MPLS标签进行IP报文转发的技术，MPLS标签是短的长度固定的数值，在IP报文的头部携带MPLS标签。MPLS是面向连接的技术，通过LDP建立LSP，在IP报文转发过程中，在源网络节点对IP报文进行分类，根据分类结果选择相应LSP，在IP报文添加相应的MPLS标签。中间网络节点在接收到IP报文后，根据头部携带的MPLS标签进行IP报文转发，而不再通过IP地址进行IP报文转发。在目的网络节点或者倒数第二跳网络节点弹出MPLS标签，还原为IP报文进行转发。MPLS VPN是基于MPLS技术的IP-VPN，通过MPLS转发基于VPN的IP报文，即源网络节点在基于VPN的IP报文添加MPLS标签，中间网络节点根据MPLS标签对基于VPN的IP报文进行转发，目的网络节点弹出MPLS标签，还原为基于VPN的IP报文进行转发。为了实现MPLS VPN，需要在源网络节点与目的网络节点之间选取转发路径，基于该转发路径生成MPLS-VPN路由，继而基于MPLS-VPN路由为基于VPN的IP报文添加MPLS标签。但是，应该如何在源网络节点与目的网络节点之间选取转发路径，在相关技术中没有合理的实现方式，即选取的转发路径存在质量较差等问题。比如说，在基于该转发路径传输基于VPN的IP报文时，存在延时较大、丢包率较高等问题，导致报文的传输质量较差，用户体验较差。发明内容有鉴于此，本申请实施例提供一种MPLS-VPN Qos路由选择方法、装置及设备，能够提高目标路径的服务质量。本申请提供一种MPLS-VPN Qos路由选择方法，所述方法包括：获取源网络节点与目的网络节点之间的目标路径，基于所述目标路径生成MPLS-VPN路由，所述MPLS-VPN路由用于传输源网络节点与目的网络节点之间的数据报文；其中，所述目标路径至少经过源网络节点、至少一个中间网络节点和目的网络节点，针对每个中间网络节点：若所述中间网络节点对应至少两个下游网络节点，针对每个下游网络节点，基于QoS参数确定本中间网络节点与该下游网络节点的第一信息强度；基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法确定本中间网络节点与该下游网络节点的第二信息强度；基于所述第一信息强度和所述第二信息强度确定本中间网络节点与该下游网络节点的目标信息强度；基于本中间网络节点与每个下游网络节点的目标信息强度，从所述至少两个下游网络节点中选取本中间网络节点对应的最优下游网络节点；基于本中间网络节点与最优下游网络节点之间的路径生成所述目标路径。本申请提供一种MPLS-VPN Qos路由选择装置，所述装置包括：获取模块，用于获取源网络节点与目的网络节点之间的目标路径；生成模块，用于基于所述目标路径生成MPLS-VPN路由，且所述MPLS-VPN路由用于传输源网络节点与目的网络节点之间的数据报文；其中，所述目标路径至少经过源网络节点、至少一个中间网络节点和目的网络节点，针对每个中间网络节点，所述获取模块具体用于：若所述中间网络节点对应至少两个下游网络节点，针对每个下游网络节点，基于QoS参数确定本中间网络节点与该下游网络节点的第一信息强度；基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法确定本中间网络节点与该下游网络节点的第二信息强度；基于所述第一信息强度和所述第二信息强度确定本中间网络节点与该下游网络节点的目标信息强度；基于本中间网络节点与每个下游网络节点的目标信息强度，从所述至少两个下游网络节点中选取本中间网络节点对应的最优下游网络节点；基于本中间网络节点与最优下游网络节点之间的路径生成所述目标路径。本申请提供一种电子设备，包括处理器和机器可读存储介质，机器可读存储介质存储有能够被处理器执行的机器可执行指令；处理器用于执行机器可执行指令，以实现上述的MPLS-VPN Qos路由选择方法。本申请提供一种机器可读存储介质，所述机器可读存储介质存储有能够被处理器执行的机器可执行指令；其中，所述处理器用于执行所述机器可执行指令，以实现上述的MPLS-VPN Qos路由选择方法。本申请提供一种计算机程序，所述计算机程序存储于机器可读存储介质，当处理器执行所述机器可读存储介质中的所述计算机程序时，促使所述处理器实现上述的MPLS-VPN Qos路由选择方法。由以上技术方案可见，本申请实施例中，基于QoS参数确定本中间网络节点与下游网络节点的第一信息强度，采用花朵授粉算法确定本中间网络节点与下游网络节点的第二信息强度，基于第一信息强度和第二信息强度确定本中间网络节点与下游网络节点的目标信息强度，基于目标信息强度选取最优下游网络节点，基于本中间网络节点与最优下游网络节点之间的路径生成目标路径，继而基于QoS参数和花朵授粉算法生成目标路径，提供一种基于花朵授粉算法和QoS参数的目标路径选取方法，能够在源网络节点与目的网络节点之间选取出合适的转发路径，能够提高目标路径的服务质量，即选取的目标路径不存在质量较差等问题。比如说，在基于该目标路径传输基于VPN的IP报文时，不存在延时较大、丢包率较高等问题，报文的传输质量较好，用户体验较好，优化MPLS-VPN路由的选择。附图说明为了更加清楚地说明本申请实施例或者现有技术中的技术方案，下面将对本申请实施例或者现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请中记载的一些实施例，对于本领域普通技术人员来讲，还可以根据本申请实施例的这些附图获得其他的附图。图1是MPLS-VPN Qos路由选择方法的流程示意图；图2是本申请一种实施方式中的应用场景示意图；图3是MPLS-VPN Qos路由选择方法的流程示意图；图4是MPLS-VPN Qos路由选择方法的流程示意图；图5是MPLS-VPN Qos路由选择装置的结构示意图；图6是本申请一种实施方式中的电子设备的硬件结构图。具体实施方式在本申请实施例使用的术语仅仅是出于描述特定实施例的目的，而非限制本申请。本申请和权利要求书中所使用的单数形式的“一种”、“所述”和“该”也旨在包括多数形式，除非上下文清楚地表示其它含义。还应当理解，本文中使用的术语“和/或”是指包含一个或多个相关联的列出项目的任何或所有可能组合。应当理解，尽管在本申请实施例可能采用术语第一、第二、第三等来描述各种信息，但这些信息不应限于这些术语。这些术语仅用来将同一类型的信息彼此区分开。例如，在不脱离本申请范围的情况下，第一信息也可以被称为第二信息，类似地，第二信息也可以被称为第一信息。取决于语境，此外，所使用的词语“如果”可以被解释成为“在……时”或“当……时”或“响应于确定”。本申请实施例中提出一种MPLS-VPN Qos路由选择方法，该方法可以包括：获取源网络节点与目的网络节点之间的目标路径，基于目标路径生成MPLS-VPN路由，且MPLS-VPN路由用于传输源网络节点与目的网络节点之间的数据报文。示例性的，目标路径至少经过源网络节点、至少一个中间网络节点和目的网络节点，为了获取源网络节点与目的网络节点之间的目标路径，参见图1所示，为该方法的流程示意图，该方法可以包括：步骤101、针对每个中间网络节点，若本中间网络节点对应至少两个下游网络节点，针对每个下游网络节点，基于QoS参数确定本中间网络节点与该下游网络节点的第一信息强度；基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法确定本中间网络节点与该下游网络节点的第二信息强度。步骤102、针对每个下游网络节点，基于本中间网络节点与该下游网络节点的第一信息强度以及本中间网络节点与该下游网络节点的第二信息强度，确定本中间网络节点与该下游网络节点的目标信息强度。步骤103、基于本中间网络节点与每个下游网络节点的目标信息强度，从至少两个下游网络节点中选取本中间网络节点对应的最优下游网络节点。步骤104、基于本中间网络节点与最优下游网络节点之间的路径生成目标路径，即，目标路径可以包括本中间网络节点与最优下游网络节点之间的路径。示例性的，基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法确定本中间网络节点与该下游网络节点的第二信息强度，可以包括但不限于：为该下游网络节点生成位于指定数值区间的随机数；若该随机数小于已配置的切换概率，则可以基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的局部搜索确定第二信息强度；或者，若该随机数大于等于该切换概率，则可以基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的全局搜索确定第二信息强度。示例性的，基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的局部搜索确定第二信息强度，可以包括但不限于：基于本中间网络节点与上游网络节点的目标信息强度、服从均匀分布的随机数、从已有信息强度中随机选取的两个信息强度，确定第二信息强度。示例性的，基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的全局搜索确定第二信息强度，可以包括但不限于：基于本中间网络节点与上游网络节点的目标信息强度、已配置的授粉强度向量、已有信息强度中的最优信息强度，确定第二信息强度。示例性的，QoS参数可以包括本中间网络节点与该下游网络节点之间的路径对应的链路性能参数、该下游网络节点对应的安全参数。基于QoS参数确定本中间网络节点与该下游网络节点的第一信息强度，可以包括但不限于：基于链路性能参数确定第一分数值，基于安全参数确定第二分数值，并对第一分数值和第二分数值进行加权得到第一信息强度。其中，链路性能参数包括以下至少一种：带宽、延时、抖动、丢包率；安全参数包括以下至少一种：安全节点类型、节点域类型；安全节点类型表示该下游网络节点是安全节点或者不是安全节点；节点域类型表示该下游网络节点属于节点域或者不属于节点域。示例性的，基于链路性能参数确定第一分数值，可以包括但不限于：若该链路性能参数包括带宽、延时、抖动和丢包率，则将该带宽代入预设第一函数得到带宽分数，该带宽越大则该带宽分数越大；将该延时代入预设第二函数得到延时分数，该延时越大则该延时分数越小；将该抖动代入预设第三函数得到抖动分数，该抖动越大则该抖动分数越小；将该丢包率代入预设第四函数得到丢包率分数，该丢包率越大则该丢包率分数越小；对该带宽分数、该延时分数、该抖动分数和该丢包率分数进行加权得到该第一分数值。示例性的，基于安全参数确定第二分数值，可以包括但不限于：若该安全参数包括安全节点类型和节点域类型，则可以确定安全节点分数和节点域分数，对该安全节点分数和该节点域分数进行加权得到该第二分数值。其中，在该安全节点类型表示该下游网络节点是安全节点时，该安全节点分数为第一取值，在该安全节点类型表示该下游网络节点不是安全节点时，该安全节点分数为第二取值，第一取值可以大于第二取值。在该节点域类型表示该下游网络节点属于节点域时，该节点域分数为第三取值，在该节点域类型表示该下游网络节点不属于节点域时，该节点域分数为第四取值，第三取值可以大于第四取值。示例性的，基于本中间网络节点与该下游网络节点的第一信息强度以及本中间网络节点与该下游网络节点的第二信息强度，确定本中间网络节点与该下游网络节点的目标信息强度，可以包括但不限于：若该第一信息强度优于该第二信息强度，则可以将该第一信息强度确定为目标信息强度；或者，若该第二信息强度优于该第一信息强度，则可以将该第二信息强度确定为目标信息强度。示例性的，为了获取源网络节点与目的网络节点之间的目标路径，针对源网络节点，若源网络节点对应至少两个下游网络节点，那么，针对每个下游网络节点，可以基于QoS参数确定源网络节点与该下游网络节点的目标信息强度；基于源网络节点与每个下游网络节点的目标信息强度，可以从至少两个下游网络节点中选取源网络节点对应的最优下游网络节点；基于源网络节点与最优下游网络节点之间的路径生成目标路径，即目标路径可以包括源网络节点与最优下游网络节点之间的路径。由以上技术方案可见，本实施例中，基于QoS参数确定本中间网络节点与下游网络节点的第一信息强度，采用花朵授粉算法确定本中间网络节点与下游网络节点的第二信息强度，基于第一信息强度和第二信息强度确定本中间网络节点与下游网络节点的目标信息强度，基于目标信息强度选取最优下游网络节点，基于本中间网络节点与最优下游网络节点之间的路径生成目标路径，继而基于QoS参数和花朵授粉算法生成目标路径，提供一种基于花朵授粉算法和QoS参数的目标路径选取方法，能够在源网络节点与目的网络节点之间选取出合适的目标路径，能够提高目标路径的服务质量，即目标路径不存在质量较差等问题。在基于目标路径传输基于VPN的IP报文时，不存在延时较大、丢包率较高等问题，报文传输质量较好，用户体验较好，优化MPLS-VPN路由的选择。以下结合具体应用场景，对本申请实施例的技术方案进行说明。MPLS-VPN是指采用MPLS技术在宽带IP网络上构建企业IP专网，实现跨地域、安全、高速、可靠的数据、语音、图像等多业务通信，并结合差别服务、流量工程等技术，将公众网可靠的性能、良好的扩展性、丰富的功能与专用网的安全、灵活、高效结合在一起。MPLS VPN是基于MPLS技术的IP-VPN，通过MPLS转发基于VPN的IP报文，即源网络节点在基于VPN的IP报文添加MPLS标签，中间网络节点根据MPLS标签对基于VPN的IP报文进行转发，目的网络节点弹出MPLS标签，还原为基于VPN的IP报文进行转发。为了实现MPLS VPN，需要在源网络节点与目的网络节点之间选取转发路径，基于该转发路径生成MPLS-VPN路由。但是，应该如何在源网络节点与目的网络节点之间选取转发路径，在相关技术中没有合理的实现方式，即转发路径存在质量较差、浪费资源开销、降低VPN整体使用效率等问题。针对上述发现，本申请实施例中提出了一种MPLS-VPN Qos路由选择方法，是一种基于花朵授粉算法和QoS的MPLS-VPN路由选择，可以基于QoS参数和花朵授粉算法生成目标路径，从而在源网络节点与目的网络节点之间选取出合适的目标路径，能够提高目标路径的服务质量，减少资源开销，提高VPN整体使用效率，用户体验较好。其中，花朵授粉算法是一种新型群智能算法，是一种新型启发式优化算法，具有结构简单、参数少、鲁棒性较强、且性能稳定等特点。QoS是指一个网络能够利用各种基础技术，为指定的网络通信提供更好的服务能力，是网络的一种安全机制，是用来解决网络延迟和阻塞等问题的一种技术。示例性的，MPLS-VPN Qos路由选择方法，可以应用于MPLS网络，也可以应用于其它网络，对此不做限制，以MPLS网络为例进行说明。参见图2所示，为本申请实施例的应用场景示意图，源网络节点与目的网络节点之间存在多个中间网络节点，比如说，中间网络节点1-中间网络节点8。可以将源网络节点与中间网络节点1之间的路径记为路径a1，将源网络节点与中间网络节点2之间的路径记为路径a2，将源网络节点与中间网络节点3之间的路径记为路径a3，以此类推，各路径可以参见图2所示。其中，源网络节点可以为路由器或者交换机，各中间网络节点可以为路由器或者交换机，目的网络节点可以为路由器或者交换机，对此不做限制。在一种可能的实施方式中，为了获取源网络节点与目的网络节点之间的目标路径，针对源网络节点，需要为源网络节点选取转发路径，且目标路径可以包括该转发路径。比如说，若源网络节点只对应一个下游网络节点，则源网络节点与该下游网络节点之间的路径可以作为源网络节点的转发路径，即，目标路径可以包括源网络节点与该下游网络节点之间的路径。又例如，若源网络节点对应至少两个下游网络节点，则可以从所有下游网络节点中确定最优下游网络节点，源网络节点与该最优下游网络节点之间的路径作为源网络节点的转发路径，即，目标路径包括源网络节点与该最优下游网络节点之间的路径。参见图2所示，源网络节点对应3个下游网络节点，如中间网络节点1、中间网络节点2和中间网络节点3，从这些下游网络节点中选取最优下游网络节点，如中间网络节点1，目标路径包括源网络节点与中间网络节点1之间的路径a1。本申请实施例中提出一种MPLS-VPN Qos路由选择方法，该方法用于获取源网络节点与目的网络节点之间的目标路径。为了获取源网络节点与目的网络节点之间的目标路径，针对源网络节点，若源网络节点对应至少两个下游网络节点，则可以从所有下游网络节点中选取最优下游网络节点，基于源网络节点与该最优下游网络节点之间的路径生成目标路径。参见图3所示，为该方法的流程示意图，该方法可以应用于源网络节点，也可以应用于管理设备，该方法可以包括：步骤301、针对每个下游网络节点，基于QoS参数确定源网络节点与该下游网络节点的目标信息强度。其中，QoS参数可以包括源网络节点与该下游网络节点之间的路径对应的链路性能参数、该下游网络节点对应的安全参数。示例性的，为了确定目标信息强度，需要考虑链路性能参数和下游网络节点对应的安全参数，从而将下游网络节点对应的安全参数结合到路径选择过程，即下游网络节点对应的安全参数作为QoS参数参与到路径选择，从而考虑实际使用中的网络安全问题，将网络节点的安全性作为路径选择因素。示例性的，针对每个下游网络节点，基于QoS参数确定源网络节点与该下游网络节点的目标信息强度，可以包括以下步骤。当然，这里只是确定目标信息强度的示例，对此不做限制，只要目标信息强度与QoS参数有关即可。步骤3011、基于该链路性能参数确定第一分数值。其中，若该链路性能参数越优，则第一分数值越大，若该链路性能参数越差，则第一分数值越小。示例性的，该链路性能参数可以包括但不限于以下至少一种：带宽、延时、抖动、丢包率，当然，上述只是几个示例，对此不做限制。其中，带宽表示源网络节点与该下游网络节点之间的路径的带宽，当带宽越大时，表示该路径的带宽条件越好，该路径越应该被选取为目标路径，当带宽越小时，表示该路径的带宽条件越差，该路径越不应该被选取为目标路径。延时表示源网络节点与该下游网络节点之间的路径的延时，当延时越大时，表示该路径的延时条件越差，该路径越不应该被选取为目标路径，当延时越小时，表示该路径的延时条件越好，该路径越应该被选取为目标路径。抖动表示源网络节点与该下游网络节点之间的路径的抖动，当抖动越大时，表示该路径的抖动条件越差，该路径越不应该被选取为目标路径，当抖动越小时，表示该路径的抖动条件越好，该路径越应该被选取为目标路径。丢包率表示源网络节点与该下游网络节点之间的路径的丢包率，当丢包率越大时，表示该路径的丢包率条件越差，该路径越不应该被选取为目标路径，当丢包率越小时，表示该路径的丢包率条件越好，该路径越应该被选取为目标路径。示例性的，若该链路性能参数包括带宽，则可以将该带宽代入预设第一函数得到带宽分数，该带宽越大则该带宽分数越大，该带宽越小则该带宽分数越小。其中，预设第一函数可以根据经验配置，预设第一函数的输入为带宽值，预设第一函数的输出为带宽分数，对此预设第一函数不做限制，只要能够表示带宽值与带宽分数之间的关系即可，且带宽越大时带宽分数越大。比如说，若带宽大于阈值A1，则该带宽对应的带宽分数为第一数值，第一数值表示带宽分数的最大值，如100等。若带宽小于阈值A2，且阈值A2小于阈值A1，则该带宽对应的带宽分数为第二数值，第二数值表示带宽分数的最小值，如0等。若带宽小于等于阈值A1，且大于等于阈值A2，则该带宽对应的带宽分数小于第一数值，且大于第二数值，在该带宽越大时，该带宽对应的带宽分数也越大。又例如，若带宽小于阈值A2，则该带宽对应的带宽分数为第二数值，第二数值表示带宽分数的最小值，如0等。若带宽大于等于阈值A2，则该带宽对应的带宽分数大于第二数值，在该带宽越大时，该带宽对应的带宽分数也越大。示例性的，若该链路性能参数包括延时，则可以将该延时代入预设第二函数得到延时分数，该延时越大则该延时分数越小，该延时越小则该延时分数越大。其中，预设第二函数可以根据经验配置，预设第二函数的输入为延时值，预设第二函数的输出为延时分数，对此预设第二函数不做限制，只要能够表示延时值与延时分数之间的关系即可，且延时越大时该延时分数越小。比如说，若延时大于阈值B1，则该延时对应的延时分数为第三数值，第三数值表示延时分数的最小值，如0等。若延时小于阈值B2，且阈值B2小于阈值B1，则该延时对应的延时分数为第四数值，第四数值表示延时分数的最大值，如100等。若延时小于等于阈值B1，且大于等于阈值B2，则该延时对应的延时分数大于第三数值，且小于第四数值，在该延时越大时，该延时对应的延时分数会越小。又例如，若延时大于阈值B1，则该延时对应的延时分数为第三数值，第三数值表示延时分数的最小值，如0等。若延时小于等于阈值B1，则该延时对应的延时分数大于第三数值，在该延时越大时，该延时对应的延时分数会越小。示例性的，若该链路性能参数包括抖动，则可以将该抖动代入预设第三函数得到抖动分数，该抖动越大则该抖动分数越小，该抖动越小则该抖动分数越大。其中，预设第三函数可以根据经验配置，预设第三函数的输入为抖动值，预设第三函数的输出为抖动分数，对此预设第三函数不做限制，只要能够表示抖动值与抖动分数之间的关系即可，且抖动越大时该抖动分数越小。比如说，若抖动大于阈值C1，则该抖动对应的抖动分数为第五数值，第五数值表示抖动分数的最小值，如0等。若抖动小于阈值C2，则该抖动对应的抖动分数为第六数值，第六数值表示抖动分数的最大值，如100等。若抖动小于等于阈值C1，且大于等于阈值C2，则该抖动对应的抖动分数大于第五数值，且小于第六数值，在该抖动越大时，该抖动对应的抖动分数会越小。又例如，若抖动大于阈值C1，则该抖动对应的抖动分数为第五数值，第五数值表示抖动分数的最小值，如0等。若抖动小于等于阈值C1，则该抖动对应的抖动分数大于第五数值，在该抖动越大时，该抖动对应的抖动分数会越小。示例性的，若该链路性能参数包括丢包率，则将该丢包率代入预设第四函数得到丢包率分数，该丢包率越大则丢包率分数越小，该丢包率越小则丢包率分数越大。预设第四函数可以根据经验配置，预设第四函数的输入为丢包率值，预设第四函数的输出为丢包率分数，对此预设第四函数不做限制，只要能够表示丢包率值与丢包率分数之间的关系即可，且丢包率越大时该丢包率分数越小。比如说，若丢包率大于阈值D1，则丢包率分数为第七数值，第七数值表示丢包率分数的最小值，如0等。若丢包率小于阈值D2，则丢包率分数为第八数值，第八数值表示丢包率分数的最大值，如100等。若丢包率小于等于阈值D1，且大于等于阈值D2，则该丢包率对应的丢包率分数大于第七数值，且小于第八数值，在该丢包率越大时，该丢包率对应的丢包率分数会越小。又例如，若丢包率大于阈值D1，则丢包率分数为第七数值，第七数值表示丢包率分数的最小值，如0等。若丢包率小于等于阈值D1，则丢包率分数大于第七数值，在该丢包率越大时，该丢包率对应的丢包率分数会越小。在一种可能的实施方式中，若该链路性能参数包括带宽、延时、抖动、丢包率，则可以对该带宽分数、该延时分数、该抖动分数和该丢包率分数进行加权得到该第一分数值，不同参数对应的权重可以相同，也可以不同，如带宽对应的权重、延时对应的权重、抖动对应的权重、丢包率对应的权重均相同，或者，带宽对应的权重与延时对应的权重相同，带宽对应的权重与抖动对应的权重不同，带宽对应的权重与丢包率对应的权重不同等，对此不做限制。又例如，若该链路性能参数包括带宽、延时、抖动，则对该带宽分数、该延时分数和该抖动分数进行加权得到该第一分数值。又例如，若该链路性能参数包括带宽、抖动，则对该带宽分数和该抖动分数进行加权得到该第一分数值，以此类推。步骤3012、基于该安全参数确定第二分数值。其中，若该安全参数越优，则该第二分数值越大，若该安全参数越差，则该第二分数值越小。示例性的，该安全参数可以包括但不限于以下至少一种：安全节点类型、节点域类型，当然，上述只是安全参数的几个示例，对此不做限制。其中，安全节点类型用于表示该下游网络节点是安全节点或者不是安全节点。比如说，可以获取该下游网络节点的节点可信度，若节点可信度大于阈值，则确定该下游网络节点是安全节点，否则，确定该下游网络节点不是安全节点。又例如，可以获取该下游网络节点的物理安全限制，并基于该物理安全限制确定该下游网络节点是安全节点或者不是安全节点。又例如，可以获取该下游网络节点的网络安全评估结果，并基于该网络安全评估结果确定该下游网络节点是安全节点或者不是安全节点。当然，上述只是几个示例，对此安全节点类型的确定方式不做限制。其中，节点域类型用于表示该下游网络节点属于节点域或者不属于节点域。比如说，预先划分节点域，该节点域包括多个网络节点，属于节点域的网络节点的安全性比较高，不属于节点域的网络节点的安全性比较低。比如说，预先配置属于节点域的网络节点的IP地址，这样，若该下游网络节点的IP地址为节点域内网络节点的IP地址，则该下游网络节点属于节点域，若该下游网络节点的IP地址不为节点域内网络节点的IP地址，则该下游网络节点不属于节点域。示例性的，若该安全参数包括安全节点类型，则确定安全节点分数。其中，在该安全节点类型表示该下游网络节点是安全节点时，该安全节点分数为第一取值，第一取值为安全节点分数的最大值，如100等。在该安全节点类型表示该下游网络节点不是安全节点时，该安全节点分数为第二取值，第二取值为安全节点分数的最小值，如0等，显然，第一取值可以大于第二取值。示例性的，若该安全参数包括节点域类型，则可以确定节点域分数。其中，在该节点域类型用于表示该下游网络节点属于节点域时，该节点域分数为第三取值，第三取值为节点域分数的最大值，如100等。在该节点域类型用于表示该下游网络节点不属于节点域时，该节点域分数为第四取值，第四取值为节点域分数的最小值，如0等，显然，第三取值可以大于第四取值。在一种可能的实施方式中，若该安全参数包括安全节点类型和节点域类型，则可以对该安全节点分数和该节点域分数进行加权得到该第二分数值，安全节点类型对应的权重与节点域类型对应的权重可以相同，也可以不同。又例如，若该安全参数包括安全节点类型，则该安全节点分数可以为该第二分数值，若该安全参数包括节点域类型，则该节点域分数可以为该第二分数值。步骤3013、对第一分数值和第二分数值进行加权得到目标信息强度。比如说，可以采用如下公式确定目标信息强度：T=T1*W1+T2*W2，T用于表示目标信息强度，T1用于表示第一分数值，W1用于表示第一分数值对应的权重系数，T2用于表示第二分数值，W2用于表示第二分数值对应的权重系数。其中，W1与W2可以相同，也可以不同。显然，若第一分数值越大，则目标信息强度越大，若第二分数值越大，则目标信息强度越大。至此，可以得到源网络节点与下游网络节点的目标信息强度。步骤302、基于源网络节点与每个下游网络节点的目标信息强度，从源网络节点对应的所有下游网络节点中选取源网络节点对应的最优下游网络节点。比如说，可以将最大目标信息强度对应的下游网络节点作为最优下游网络节点。比如说，参见图2所示，基于步骤301，可以得到源网络节点与中间网络节点1的目标信息强度1、源网络节点与中间网络节点2的目标信息强度2、源网络节点与中间网络节点3的目标信息强度3，基于此，若目标信息强度1为最大目标信息强度，则可以将中间网络节点1作为最优下游网络节点。步骤303、基于源网络节点与最优下游网络节点之间的路径生成目标路径，即目标路径可以包括源网络节点与最优下游网络节点之间的路径。比如说，若中间网络节点1作为最优下游网络节点，则目标路径可以包括路径a1。在一种可能的实施方式中，为了获取源网络节点与目的网络节点之间的目标路径，针对中间网络节点，需要为该中间网络节点选取转发路径，且目标路径可以包括该转发路径。比如说，若该中间网络节点只对应一个下游网络节点，则该中间网络节点与该下游网络节点之间的路径可以作为该中间网络节点的转发路径，即，目标路径可以包括该中间网络节点与该下游网络节点之间的路径。又例如，若该中间网络节点对应至少两个下游网络节点，则从所有下游网络节点中确定最优下游网络节点，该中间网络节点与该最优下游网络节点之间的路径作为该中间网络节点的转发路径，即，目标路径包括该中间网络节点与该最优下游网络节点之间的路径。参见图2所示，假设目标路径包括路径a1，则目标路径会经过中间网络节点1，需要为中间网络节点1选取转发路径，但是，由于目标路径不会经过路径a2和路径a3，因此，不需要为中间网络节点2和中间网络节点3选取转发路径。由于中间网络节点1对应2个下游网络节点，如中间网络节点4和中间网络节点5，从这些下游网络节点中选取最优下游网络节点，如中间网络节点4，目标路径包括中间网络节点1与中间网络节点4之间的路径a4。目标路径包括路径a4，目标路径会经过中间网络节点4，需要为中间网络节点4选取转发路径，但是，由于目标路径不会经过路径a5，因此，不需要为中间网络节点5选取转发路径。由于中间网络节点4对应1个下游网络节点，因此，将中间网络节点4与目的网络节点之间的路径作为转发路径，即目标路径包括中间网络节点4与目的网络节点之间的路径a10。本申请实施例中提出一种MPLS-VPN Qos路由选择方法，该方法用于获取源网络节点与目的网络节点之间的目标路径。为了获取源网络节点与目的网络节点之间的目标路径，针对每个中间网络节点，若本中间网络节点对应至少两个下游网络节点，则从所有下游网络节点中选取最优下游网络节点，基于本中间网络节点与该最优下游网络节点之间的路径生成目标路径。参见图4所示，为该方法的流程示意图，该方法可以应用于本中间网络节点，也可以应用于源网络节点，还可以应用于管理设备，该方法可以包括：步骤401、针对每个下游网络节点，基于QoS参数确定本中间网络节点与该下游网络节点的第一信息强度。其中，QoS参数包括本中间网络节点与该下游网络节点之间的路径对应的链路性能参数、该下游网络节点对应的安全参数。示例性的，可以基于该链路性能参数确定第一分数值，基于该安全参数确定第二分数值，并对该第一分数值和该第二分数值进行加权得到该第一信息强度。其中，若该链路性能参数越优，则该第一分数值越大，若该链路性能参数越差，则该第一分数值越小。若该安全参数越优，则该第二分数值越大，若该安全参数越差，则该第二分数值越小。若该第一分数值越大，则该第一信息强度越大，若该第二分数值越大，则该第一信息强度越大。示例性的，该链路性能参数可以包括但不限于以下至少一种：带宽、延时、抖动、丢包率。该安全参数可以包括但不限于以下至少一种：安全节点类型、节点域类型。其中，安全节点类型表示该下游网络节点是安全节点或者不是安全节点；节点域类型表示该下游网络节点属于节点域或者不属于节点域。示例性的，步骤401的实现过程可以参见步骤301，在此不再重复赘述。步骤402、基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法确定本中间网络节点与该下游网络节点的第二信息强度。示例性的，可以将本中间网络节点与上游网络节点的目标信息强度作为花朵授粉算法的输入，基于花朵授粉算法进行处理，得到本中间网络节点与该下游网络节点的第二信息强度，即第二信息强度作为花朵授粉算法的输出。比如说，在确定本中间网络节点1与中间网络节点4的第二信息强度时，可以将本中间网络节点1与上游网络节点的目标信息强度作为花朵授粉算法的输入，基于花朵授粉算法进行处理，得到本中间网络节点1与中间网络节点4的第二信息强度1。在确定本中间网络节点1与中间网络节点5的第二信息强度时，可以将本中间网络节点1与源网络节点的目标信息强度作为花朵授粉算法的输入，基于花朵授粉算法进行处理，得到本中间网络节点1与中间网络节点5的第二信息强度2。虽然花朵授粉算法的输入相同，但是，第二信息强度1与第二信息强度2可能相同，也可能不同，与花朵授粉算法的处理过程相关。示例性的，针对步骤402，第二信息强度的确定方式可以包括：步骤4021、为该下游网络节点生成位于指定数值区间的随机数。比如说，指定数值区间可以根据经验配置，如等，为中间网络节点4生成位于的随机数K1，为中间网络节点5生成位于的随机数K2。步骤4022、若该随机数小于切换概率，则基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的局部搜索确定第二信息强度。示例性的，切换概率p用于改变花朵授粉算法的授粉方式，在授粉方式为自花授粉时，则采用花朵授粉算法的局部搜索确定第二信息强度，在授粉方式为异花授粉时，则采用花朵授粉算法的全局搜索确定第二信息强度。切换概率p可以根据经验配置，且切换概率p位于指定数值区间，如切换概率p位于，如切换概率p可以为0.5、0.6、0.3等，对此不做限制。示例性的，若下游网络节点对应的随机数小于切换概率p，则花朵授粉算法的授粉方式为自花授粉，即采用花朵授粉算法的局部搜索确定第二信息强度，该过程映射为局部搜索过程，也就是说，基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的局部搜索确定第二信息强度。比如说，在采用花朵授粉算法的局部搜索确定第二信息强度时，可以基于本中间网络节点与上游网络节点的目标信息强度、服从均匀分布的随机数、从已有信息强度中随机选取的两个信息强度，确定第二信息强度。在一种可能的实施方式中，可以采用如下公式确定第二信息强度，当然，如下公式只是一个示例，对此不做限制，只要第二信息强度与目标信息强度有关即可。y=x+i*公式在公式中，y表示本中间网络节点与该下游网络节点的第二信息强度。x表示本中间网络节点与上游网络节点的目标信息强度，如本中间网络节点1与源网络节点的目标信息强度。i表示服从均匀分布的随机数，如上服从均匀分布的随机数。x1和x2是从已有信息强度中随机选取的两个信息强度，是异于目标信息强度x的两个信息强度。比如说，x1可以是源网络节点与中间网络节点2的目标信息强度，x2可以是源网络节点与中间网络节点3的目标信息强度。在得到多个信息强度之后，可以从多个已有信息强度中随机选取两个信息强度，将这两个信息强度作为x1和x2，只要x1与目标信息强度x不同，且x2与目标信息强度x不同即可。步骤4023、若该随机数大于等于切换概率，则基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的全局搜索确定第二信息强度。示例性的，若下游网络节点对应的随机数大于等于切换概率p，则花朵授粉算法的授粉方式为异花授粉，即采用花朵授粉算法的全局搜索确定第二信息强度，该过程映射为全局搜索过程，也就是说，基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的全局搜索确定第二信息强度。比如说，在采用花朵授粉算法的全局搜索确定第二信息强度时，可以基于本中间网络节点与上游网络节点的目标信息强度、已配置的授粉强度向量、已有信息强度中的最优信息强度，确定第二信息强度。在一种可能的实施方式中，可以采用如下公式确定第二信息强度，当然，如下公式只是一个示例，对此不做限制，只要第二信息强度与目标信息强度有关即可。y=x+L*公式在公式中，y表示本中间网络节点与该下游网络节点的第二信息强度。x表示本中间网络节点与上游网络节点的目标信息强度，如本中间网络节点1与源网络节点的目标信息强度。L表示已配置的授粉强度向量，可以是D维的授粉强度向量，该授粉强度向量的每一维均是服从levy分布的随机数，即先获取服从levy分布的D个随机数，然后，将D个随机数组成D维的授粉强度向量，对此不做限制。g表示已有信息强度中的最优信息强度，比如说，在得到多个信息强度之后，可以从多个已有信息强度中选取最优信息强度g，如可以将最大信息强度作为最优信息强度g，也可以将其它信息强度作为最优信息强度g，关于如何从已有信息强度中选取最优信息强度g不做限制。至此，成功确定本中间网络节点与下游网络节点的第二信息强度。步骤403、针对每个下游网络节点，基于本中间网络节点与该下游网络节点的第一信息强度以及本中间网络节点与该下游网络节点的第二信息强度，确定本中间网络节点与该下游网络节点的目标信息强度。示例性的，若该第一信息强度优于该第二信息强度，则可以将该第一信息强度确定为目标信息强度；或者，若该第二信息强度优于该第一信息强度，则可以将该第二信息强度确定为目标信息强度。比如说，若该第一信息强度大于该第二信息强度，则将该第一信息强度确定为目标信息强度；或者，若该第二信息强度大于该第一信息强度，则可以将该第二信息强度确定为目标信息强度。示例性的，若该第一信息强度等于该第二信息强度，则可以将该第一信息强度确定为目标信息强度，也可以将该第二信息强度确定为目标信息强度。步骤404、基于本中间网络节点与每个下游网络节点的目标信息强度，从本中间网络节点对应的所有下游网络节点中选取本中间网络节点对应的最优下游网络节点，如将最大目标信息强度对应的下游网络节点作为最优下游网络节点。比如说，参见图2所示，基于步骤401-步骤403，可以得到本中间网络节点1与中间网络节点4的目标信息强度4、本中间网络节点1与中间网络节点5的目标信息强度5，基于此，若目标信息强度4为最大目标信息强度，则可以将中间网络节点4作为本中间网络节点1对应的最优下游网络节点。步骤405、基于本中间网络节点与最优下游网络节点之间的路径生成目标路径，即目标路径可以包括本中间网络节点与最优下游网络节点之间的路径。比如说，若中间网络节点4作为最优下游网络节点，则目标路径可以包括路径a4。综上所述，在针对源网络节点和中间网络节点进行上述处理后，就可以得到目标路径，目标路径可以经过源网络节点、至少一个中间网络节点和目的网络节点，比如说，目标路径可以经过源网络节点、中间网络节点1、中间网络节点4和目的网络节点，即目标路径可以包括路径a1、路径a4和路径a10，由路径a1、路径a4和路径a10组成目标路径。示例性的，在得到源网络节点与目的网络节点之间的目标路径之后，就可以基于目标路径生成MPLS-VPN路由，且MPLS-VPN路由用于传输源网络节点与目的网络节点之间的数据报文，关于MPLS-VPN路由的生成方式不做限制。比如说，基于源网络节点与目的网络节点之间的目标路径，可以为目标路径对应的每个网络节点分配MPLS标签，基于这些MPLS标签生成MPLS-VPN路由。基于MPLS-VPN路由，可以在源网络节点与目的网络节点之间传输数据报文，即基于MPLS标签传输数据报文。比如说，源网络节点基于MPLS标签将数据报文发送给中间网络节点1，中间网络节点1基于MPLS标签将数据报文发送给中间网络节点4，中间网络节点4基于MPLS标签将数据报文发送给目的网络节点，然后，目的网络节点基于数据报文的IP地址转发数据报文。在一种可能的实施方式中，在选取某个中间网络节点作为最优下游网络节点之后，若该中间网络节点未对应下游网络节点，即没有从该中间网络节点到达目的网络节点的路径，则需要进行回退处理，即由上游网络节点从该中间网络节点之外的其它网络节点中重新选取最优下游网络节点。比如说，源网络节点将中间网络节点1作为最优下游网络节点之后，若中间网络节点1对应下游网络节点，则中间网络节点1采用图4所示流程选取中间网络节点1的最优下游网络节点。若中间网络节点1未对应下游网络节点，则由中间网络节点1的上游网络节点从中间网络节点2和中间网络节点3中重新选取最优下游网络节点，选取方式参见图3所示流程，在此不再赘述。又例如，中间网络节点1将中间网络节点4作为最优下游网络节点之后，若中间网络节点4对应下游网络节点，则中间网络节点4采用图4所示流程选取中间网络节点4的最优下游网络节点。若中间网络节点4未对应下游网络节点，则由中间网络节点4的上游网络节点从中间网络节点4之外的其它中间网络节点中重新选取最优下游网络节点，选取方式参见图4所示流程，在此不再赘述。针对每个中间网络节点，该中间网络节点对应下游网络节点是指：若该中间网络节点与后面中间网络节点之间存在转发路径，且该转发路径满足约束条件，则将后面中间网络节点作为该中间网络节点对应下游网络节点，若该转发路径不满足约束条件，则后面中间网络节点不作为该中间网络节点对应下游网络节点。显然，若该中间网络节点与所有后面中间网络节点之间的转发路径均不满足约束条件，则表示该中间网络节点未对应下游网络节点，否则，若该中间网络节点与至少一个后面中间网络节点之间的转发路径满足约束条件，则表示该中间网络节点对应下游网络节点，采用图4所示流程选取最优下游网络节点。示例性的，若该转发路径的带宽不满足约束条件，如该转发路径的带宽小于某个阈值，则表示该转发路径不满足约束条件。若该转发路径的延时不满足约束条件，如该转发路径的延时大于某个阈值，则表示该转发路径不满足约束条件。若该转发路径的抖动不满足约束条件，如该转发路径的抖动大于某个阈值，则表示该转发路径不满足约束条件。若该转发路径的丢包率不满足约束条件，如该转发路径的丢包率大于某个阈值，则表示该转发路径不满足约束条件。若该中间网络节点的后面中间网络节点不属于节点域，则表示该转发路径不满足约束条件。当然，上述只是约束条件的几个示例，对此约束条件不做限制。反之，若未出现上述情况，则表示该转发路径满足约束条件，可以作为下游网络节点。由以上技术方案可见，本申请实施例中，提供一种基于花朵授粉算法和QoS参数的目标路径选取方法，能够在源网络节点与目的网络节点之间选取出合适的目标路径，能够提高目标路径的服务质量。在基于目标路径传输基于VPN的IP报文时，不存在延时较大、丢包率较高等问题，报文传输质量较好，用户体验较好，优化MPLS-VPN路由的选择。基于花朵授粉群智能优化算法来调度网络资源，优化MPLS-VPN的QoS路由选择。引入安全因素作为新的约束条件，使得建立更具有安全性的MPLS-VPN路由通道，可以应用于安全网络隧道。比如说，针对源网络节点与目的网络节点之间传输的每个数据报文，均可以触发目标路径选取，基于花朵授粉算法和QoS参数选取的目标路径，能够将大量数据报文均衡到源网络节点与目的网络节点之间的多个路径，从而使得多个路径传输数据报文时，不存在延时较大、丢包率较高等问题，报文传输质量较好。基于与上述方法同样的申请构思，本申请实施例中提出一种MPLS-VPN Qos路由选择装置，参见图5所示，为所述装置的结构示意图，所述装置可以包括：获取模块51，用于获取源网络节点与目的网络节点之间的目标路径；生成模块52，用于基于所述目标路径生成MPLS-VPN路由，且所述MPLS-VPN路由用于传输源网络节点与目的网络节点之间的数据报文；其中，所述目标路径至少经过源网络节点、至少一个中间网络节点和目的网络节点，针对每个中间网络节点，所述获取模块51具体用于：若所述中间网络节点对应至少两个下游网络节点，针对每个下游网络节点，基于QoS参数确定本中间网络节点与该下游网络节点的第一信息强度；基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法确定本中间网络节点与该下游网络节点的第二信息强度；基于所述第一信息强度和所述第二信息强度确定本中间网络节点与该下游网络节点的目标信息强度；基于本中间网络节点与每个下游网络节点的目标信息强度，从所述至少两个下游网络节点中选取本中间网络节点对应的最优下游网络节点；基于本中间网络节点与最优下游网络节点之间的路径生成所述目标路径。示例性的，所述获取模块51基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法确定本中间网络节点与该下游网络节点的第二信息强度时具体用于：为该下游网络节点生成位于指定数值区间的随机数；若所述随机数小于已配置的切换概率，基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的局部搜索确定所述第二信息强度；若所述随机数大于等于所述切换概率，基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的全局搜索确定所述第二信息强度。示例性的，所述获取模块51基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的局部搜索确定所述第二信息强度时具体用于：基于本中间网络节点与上游网络节点的目标信息强度、服从均匀分布的随机数、从已有信息强度中随机选取的两个信息强度，确定所述第二信息强度。示例性的，所述获取模块51基于本中间网络节点与上游网络节点的目标信息强度，采用花朵授粉算法的全局搜索确定所述第二信息强度时具体用于：基于本中间网络节点与上游网络节点的目标信息强度、已配置的授粉强度向量、已有信息强度中的最优信息强度，确定所述第二信息强度。示例性的，所述QoS参数包括本中间网络节点与该下游网络节点之间的路径对应的链路性能参数、该下游网络节点对应的安全参数；所述获取模块51基于QoS参数确定本中间网络节点与该下游网络节点的第一信息强度时具体用于：基于所述链路性能参数确定第一分数值，基于所述安全参数确定第二分数值，并对所述第一分数值和所述第二分数值进行加权得到所述第一信息强度。示例性的，所述链路性能参数包括以下至少一种：带宽、延时、抖动、丢包率；所述安全参数包括以下至少一种：安全节点类型、节点域类型；所述安全节点类型表示该下游网络节点是安全节点或者不是安全节点；所述节点域类型表示该下游网络节点属于节点域或者不属于节点域；所述获取模块51基于所述链路性能参数确定第一分数值时具体用于：若所述链路性能参数包括带宽、延时、抖动和丢包率，将带宽代入预设第一函数得到带宽分数，带宽越大则带宽分数越大；将延时代入预设第二函数得到延时分数，延时越大则延时分数越小；将抖动代入预设第三函数得到抖动分数，抖动越大则抖动分数越小；将丢包率代入预设第四函数得到丢包率分数，丢包率越大则丢包率分数越小；对带宽分数、延时分数、抖动分数和丢包率分数进行加权得到第一分数值；所述获取模块51基于所述安全参数确定第二分数值时具体用于：若所述安全参数包括安全节点类型和节点域类型，则确定安全节点分数和节点域分数，对所述安全节点分数和所述节点域分数进行加权得到第二分数值；在安全节点类型表示该下游网络节点是安全节点时，所述安全节点分数为第一取值，在安全节点类型表示该下游网络节点不是安全节点时，所述安全节点分数为第二取值，所述第一取值大于所述第二取值；在节点域类型表示该下游网络节点属于节点域时，所述节点域分数为第三取值，在节点域类型表示该下游网络节点不属于节点域时，所述节点域分数为第四取值，所述第三取值大于所述第四取值。示例性的，所述获取模块51基于所述第一信息强度和所述第二信息强度确定本中间网络节点与该下游网络节点的目标信息强度时具体用于：若第一信息强度优于第二信息强度，将所述第一信息强度确定为目标信息强度；或者，若第二信息强度优于第一信息强度，将所述第二信息强度确定为目标信息强度。其中，针对源网络节点，所述获取模块51获取源网络节点与目的网络节点之间的目标路径时具体用于：若所述源网络节点对应至少两个下游网络节点，针对每个下游网络节点，基于QoS参数确定所述源网络节点与该下游网络节点的目标信息强度；基于所述源网络节点与每个下游网络节点的目标信息强度，从所述至少两个下游网络节点中选取所述源网络节点对应的最优下游网络节点；基于所述源网络节点与最优下游网络节点之间的路径生成所述目标路径。基于与上述方法同样的申请构思，本申请实施例提出一种电子设备，参见图6所示，包括处理器61和机器可读存储介质62，机器可读存储介质62存储有能够被处理器61执行的机器可执行指令；处理器61用于执行机器可执行指令，以实现上述MPLS-VPN Qos路由选择方法。基于与上述方法同样的申请构思，本申请实施例还提供一种机器可读存储介质，机器可读存储介质上存储有若干计算机指令，计算机指令被处理器执行时，能够实现上述示例的MPLS-VPN Qos路由选择方法。其中，上述机器可读存储介质可以是任何电子、磁性、光学或其它物理存储装置，可以包含或存储信息，如可执行指令、数据，等等。例如，机器可读存储介质可以是：RAM、易失存储器、非易失性存储器、闪存、存储驱动器、固态硬盘、任何类型的存储盘，或者类似的存储介质，或者它们的组合。上述实施例阐明的系统、装置、模块或单元，具体可以由计算机实体实现，或者由具有某种功能的产品来实现。一种典型的实现设备为计算机，计算机的具体形式可以是个人计算机、膝上型计算机、蜂窝电话、相机电话、智能电话、个人数字助理、媒体播放器、导航设备、电子邮件收发设备、游戏控制台、平板计算机、可穿戴设备或者这些设备中的任意几种设备的组合。为了描述的方便，描述以上装置时以功能分为各种单元分别描述。当然，在实施本申请时可以把各单元的功能在同一个或多个软件和/或硬件中实现。本领域内的技术人员应明白，本申请的实施例可提供为方法、系统、或计算机程序产品。因此，本申请可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本申请实施例可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本申请是参照根据本申请实施例的方法、设备、和计算机程序产品的流程图和/或方框图来描述的。应理解可以由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其它可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其它可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。而且，这些计算机程序指令也可以存储在能引导计算机或其它可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或者多个流程和/或方框图一个方框或者多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其它可编程数据处理设备上，使得在计算机或者其它可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其它可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤。以上所述仅为本申请的实施例而已，并不用于限制本申请。对于本领域技术人员来说，本申请可以有各种更改和变化。凡在本申请的精神和原理之内所作的任何修改、等同替换、改进等，均应包含在本申请的权利要求范围之内。
