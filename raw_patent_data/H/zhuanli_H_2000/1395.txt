标题title
一种智能化仓库的视频监控方法及装置
摘要abst
本申请提供了一种智能化仓库的视频监控方法及装置，涉及智能仓库领域，目的是为了解决现有的仓库中，粮食是否被运送到正确的仓库需要由人工进行监督，易出错的问题。该方法包括：响应于从第一摄像头发来的第一原始图像中提取到粮食图像，根据粮食图像判断粮食种类是否与第一摄像头相关联；若无法根据粮食图像判断粮食种类是否与第一摄像头相关联，则从第二摄像头发来的第二原始图像中提取到粮食图像，并根据粮食图像判断粮食种类是否与第一摄像头相关联；以及在粮食种类与第一摄像头关联的情况下，记录粮食种类的信息、粮食进入仓库的时间以及第一摄像头。本发明利用常规的监控摄像头对粮食是否进入正确的仓库进行智能化监控，不易出错。
权利要求书clms
1.一种智能化仓库的视频监控方法，其特征在于，包括：响应于从第一摄像头发来的第一原始图像中提取粮食图像，根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联；若无法根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联，则从第二摄像头发来的第二原始图像中提取粮食图像，并根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联；以及在所述粮食种类与所述第一摄像头的ID相关联的情况下，记录所述粮食种类的信息、粮食进入仓库的时间以及所述第一摄像头的ID。2. 如权利要求1所述的方法，其特征在于，所述根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联包括：从所述粮食图像中提取文字；以及将提取到的文字与预设的与所述第一摄像头的ID相关联的文字信息进行比较，若提取到的文字与所述文字信息一致，则表示所述粮食种类与所述第一摄像头的ID相关联。3.如权利要求1所述的方法，其特征在于，所述方法还包括：当从第一摄像头发来的第一原始图像中提取到粮食图像时，向所述第二摄像头发送触发信号，以使所述第二摄像头开始采集图像。4.如权利要求1至3中任一项所述的方法，其特征在于，所述方法还包括：将从当前第一原始图像中提取到的粮食图像与从上一帧第一原始图像中提取到的粮食图像进行比对，若二者一致，并且二者在各自第一原始图像中的位置一致，则对所述上一帧第一原始图像做标记，所述上一帧第一原始图像将用于粮食种类的判断。5.如权利要求1至3中任一项所述的方法，其特征在于，所述方法还包括：对所述粮食图像进行跟踪，将跟踪到的第一帧含有完整粮食图的第一原始图像做标记，该第一原始图像将用于粮食种类的判断。6.如权利要求1所述的方法，其特征在于，所述方法还包括：若所述粮食种类与所述第一摄像头的ID为非关联，则发出警报。7. 如权利要求6所述的方法，其特征在于，所述方法还包括：判断所述粮食种类是否与其他仓库的第一摄像头的ID相关联，以及在所述粮食种类与其他仓库的第一摄像头的ID相关联时，发出提示信号。8.一种智能化仓库的视频监控装置，其特征在于，包括：第一判断模块，适于响应于从第一摄像头发来的第一原始图像中提取到粮食图像，根据所述粮食图像判断粮食种类是否与所述第一摄像头的监控区域相关联；第二判断模块，若无法根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联，则从第二摄像头发来的第二原始图像中提取到粮食图像，并根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联；以及记录模块，适于在所述粮食种类与所述第一摄像头的监控区域相关联的情况下，记录所述粮食种类的信息、粮食进入仓库的时间以及所述第一摄像头的ID。9.一种电子设备，其特征在于，包括：存储器；处理器；以及计算机程序；其中，所述计算机程序存储在所述存储器中，并被配置为由所述处理器执行以实现如权利要求1至7中任一项所述的方法。10.计算机可读存储介质，其特征在于，其上存储有计算机程序；所述计算机程序被处理器执行以实现如权利要求1至7中任一项所述的方法。
说明书desc
技术领域本发明涉及智能仓库领域，尤其是智能仓库的视频监控技术。背景技术智能仓库包括多个仓库，为了存储不同种类的粮食，各个仓库的温度、湿度、通风等环境指标会有所差异。粮食运往仓库的过程中，如果由于各种原因导致粮食被运送到错误的仓库，则粮食的品质会受到影响，容易变质。而粮食是否被运送到正确的仓库通常由人工进行监督，易出错。发明内容为了解决上述技术缺陷，本申请实施例提供了一种智能化仓库的视频监控方法及装置。本申请第一方面实施例提供一种智能化仓库的视频监控方法，包括：响应于从第一摄像头发来的第一原始图像中提取到粮食图像，根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联；若无法根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联，则从第二摄像头发来的第二原始图像中提取到粮食图像，并根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联；以及在所述粮食种类与所述第一摄像头的ID相关联的情况下，记录所述粮食种类的信息、粮食进入仓库的时间以及所述第一摄像头的ID。在其中一种可能的实现方式中，所述根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联包括：从所述粮食图像中提取文字；以及将提取到的文字与预设的与所述第一摄像头相关联的文字信息进行比较，若提取到的文字与所述文字信息一致，则表示所述粮食种类与所述第一摄像头的ID相关联。在其中一种可能的实现方式中，所述方法还包括：当从第一摄像头发来的第一原始图像中提取到粮食图像时，向所述第二摄像头发送触发信号，以使所述第二摄像头开始采集图像。在其中一种可能的实现方式中，所述方法还包括：将从当前第一原始图像中提取到的粮食图像与从上一帧第一原始图像中提取到的粮食图像进行比对，若二者一致，并且二者在各自第一原始图像中的位置一致，则对所述上一帧第一原始图像做标记，所述上一帧第一原始图像将用于粮食种类的判断。在其中一种可能的实现方式中，所述方法还包括：对所述粮食图像进行跟踪，将跟踪到的第一帧含有完整粮食图的第一原始图像做标记，该第一原始图像将用于粮食种类的判断。在其中一种可能的实现方式中，所述方法还包括：若所述粮食种类与所述第一摄像头的ID为非关联，则发出警报。在其中一种可能的实现方式中，所述方法还包括：判断所述粮食种类是否与其他仓库的第一摄像头的ID相关联，以及在所述粮食种类与其他仓库的第一摄像头的ID相关联时，发出提示信号。本申请第二方面实施例还提供了一种智能化仓库的视频监控装置，包括：第一判断模块，适于响应于从第一摄像头发来的第一原始图像中提取粮食图像，根据所述粮食图像判断粮食种类是否与所述第一摄像头的监控区域相关联；第二判断模块，若无法根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联，则从第二摄像头发来的第二原始图像中提取粮食图像，并根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联；以及记录模块，适于在所述粮食种类与所述第一摄像头的监控区域相关联的情况下，记录所述粮食种类的信息、粮食进入仓库的时间以及所述第一摄像头的ID。本申请第三方面实施例还提供了一种电子设备，包括：至少一个处理器和存储有计算机程序的存储器；当计算机程序被处理器读取并执行时，使得电子设备执行如上的智能化仓库的视频监控方法。本申请第四方面实施例还提供了一种存储有计算机程序的可读存储介质，当计算机程序被电子设备读取并执行时，使得电子设备执行如上的智能化仓库的视频监控方法。本申请实施例中提供的智能化仓库的视频监控方法及装置，利用常规的监控摄像头，通过智能化手段实现粮食进入仓库过程的监控，对粮食是否进入正确的仓库进行判断，判断效率高且不易出错。附图说明图1为根据本发明一个实施例的智能化仓库的视频监控系统的应用场景示意图；图2为根据本发明一个实施例的电子设备200的示意图；图3为根据本发明一个实施例的智能化仓库的视频监控方法300的流程图；图4为根据本发明一个实施例的智能化仓库的视频监控装置400的结构示意图。具体实施方式为了使本申请实施例中的技术方案及优点更加清楚明白，以下结合附图对本申请的示例性实施例进行进一步详细的说明，显然，所描述的实施例仅是本申请的一部分实施例，而不是所有实施例的穷举。需要说明的是，在不冲突的情况下，本申请中的实施例及实施例中的特征可以相互组合。图1为根据本发明一个实施例的智能化仓库的视频监控系统的应用场景示意图。如图1所示，本实施例中，智能化仓库的每个仓库对应一个传送带A，用于将粮食C运送到仓库入口。传送带A传输方向的前端是中转台，粮食C在传送带A的带动下向仓库入口方向移动，移动到传送带A端部时自动下落至中转台B上，再由工作人员将粮食C从中转台B移动至仓库内部。中转台B的台面由透明材料制成，例如玻璃等。视频监控系统100包括两个摄像头，即图1中的第一摄像头110和第二摄像头120。第一摄像头110布置在中转台B上方，可作为常规的监控摄像头使用；第二摄像头120布置在中转台B下方，用于拍摄上方图像。第一摄像头110和第二摄像头120的视野范围均需覆盖完整的中转台B。第一摄像头110和第二摄像头120拍摄的图像传输至服务器130，服务器130将按照本发明实施例的智能化仓库的视频监控方法的流程对中转台上的粮食进行监控。服务器130可采用电子设备实现，本申请提供的智能化仓库的视频监控方法在电子设备中执行。电子设备可以是任意具有存储和计算能力的设备。图2示出了根据本发明一个实施例的电子设备200的示意图。需要说明的是，图2所示的电子设备200仅为一个示例，在实践中，用于实施本发明的智能化仓库的视频监控方法的电子设备可以是任意型号的设备，其硬件配置情况可以与图2所示的电子设备200相同，也可以与图2所示的电子设备200不同。实践中用于实施本发明的智能化仓库的视频监控方法的电子设备可以对图2所示的电子设备200的硬件组件进行增加或删减，本发明对电子设备的具体硬件配置情况不做限制。如图2所示，电子设备200典型地包括一个或者多个处理器210、存储器220以及若干个接口230。其中，若干个接口230分别用于连接摄像头、输入设备、输出设备以及显示设备。在根据本发明的电子设备200中，处理器210从存储器220中读取指令，该指令可以指示处理器210执行本发明的智能化仓库的视频监控方法300。根据本发明实施例的一种智能化仓库的视频监控方法300包括：响应于从第一摄像头发来的第一原始图像中提取到粮食图像，根据粮食图像判断粮食种类是否与第一摄像头的ID相关联；若无法根据粮食图像判断粮食种类是否与第一摄像头的ID相关联，则根据第二摄像头发来的第二原始图像判断粮食种类是否与第一摄像头的ID相关联；以及在粮食种类与所述第一摄像头的ID相关联的情况下，记录粮食种类的信息、粮食进入仓库的时间以及第一摄像头的ID。图3示出了根据本发明一个实施例的智能化仓库的视频监控方法300的流程图，方法300在电子设备中执行。方法300得以被执行的前提是，用户在电子设备200中创建设备信息表格，设备信息表格存储在存储器220中。设备信息表格记录了每个仓库的编号、以及每个仓库的第一摄像头110和第二摄像头120的ID。在粮食运送到某个仓库之前，用户在电子设备200中创建一个入库信息表格，入库信息表格的内容包含该仓库的编号、以及该仓库的第一摄像头110和第二摄像头120的ID，该仓库的编号、以及该仓库的第一摄像头110和第二摄像头120的ID这些信息之间相互关联。在确定了仓库编号的前提下，可以根据仓库编号从设备信息表格中查找与该仓库对应的第一摄像头110和第二摄像头120的ID。接下来，用户需要在入库信息表格里输入即将运送至每个该仓库的粮食种类和粮食名称，粮食名称是指粮食包装袋上印刷的粮食全称。如图3所示，方法300始于步骤S310。在步骤S310中，响应于从第一摄像头110发来的第一原始图像中提取粮食图像，根据粮食图像判断粮食种类是否与第一摄像头110的ID相关联。第一摄像头110拍摄到的图像称为第一原始图像，第二摄像头120拍摄到的图像称为第二原始图像。当粮食从传送带A运输至中转台B时，能够从第一摄像头110拍摄到的第一原始图像中提取到清晰的粮食包装袋的图像，不同粮食的包装袋会存在一定差异，例如尺寸、颜色、图案以及文字等，其中，图案或文字特征较为明显，根据图案或文字来判断相对容易实现，判断结果也相对准确一些。判断出粮食种类后，需要根据粮食图像判断粮食种类是否与第一摄像头110的ID相关联，具体方法为：在入库信息表格中查找与第一摄像头110的ID相关联的粮食种类，将判断出的粮食种类与从入库信息表格中查找到的粮食种类进行比对，判断二者是否一致，若一致，则表示中转台B上的粮食种类与第一摄像头110的ID相关联。如果粮食包装袋上的文字或图案朝下，则无法根据第一原始图像来判断粮食种类，此时，进入步骤S320。在步骤S320中，从第二摄像头发来的第二原始图像中提取粮食图像，并根据粮食图像判断粮食种类是否与第一摄像头的ID相关联，判断方法同上。接下来，在步骤S330中，若粮食种类与第一摄像头110的ID相关联，则记录所述粮食种类的信息、粮食进入仓库的时间以及所述第一摄像头的ID。由于一个入库信息表格只对应一个仓库，并且入库信息表格中已经记录了仓库的编号、粮食种类以及第一摄像头的ID，因此，在此步骤中，只需要在入库信息表格中记录粮食进入仓库的时间即可，粮食进入仓库的时间是指第一原始图像的拍摄时间。方法300能够利用常规的监控摄像头判断粮食是否正确的仓库，全程智能化，不易出错，并且效率高、不影响正常作业流程。在一种实现方式中，第一摄像头110与第二摄像头120按照相同的频率拍摄图像。当第一摄像头110和第二摄像头120的视野范围内未出现粮食图像时，第一摄像头110和第二摄像头120可以作为普通的监控摄像头使用，当监控视野范围内出现了粮食图像时，电子设备200开始执行方法300。常规的监控摄像头的图像采集频率为25~30帧/秒，假设电子设备200在第一摄像头110发来的某张第一原始图像中提取到了清晰的粮食图像，该第一原始图像的图像采集时间是t，但是无法根据该粮食图像判断粮食种类，那么接下来要根据第二摄像头120发来的第二原始图像判断粮食种类，第二原始图像的采集时刻应当被包含在一个时间段内，而这个时间段是包含了t在内的一段时间，一段时间的具体时长可根据摄像头的图像采集频率、通常情况下传送带上两袋粮食的间距、以及传送带的传输速度等因素来确定，这样能够确保第二原始图像与第一原始图像拍摄的是同一袋粮食。在另一种实现方式中，第一摄像头110仍然按照25~30帧/秒的频率采集图像，当第一摄像头110的视野范围内未出现粮食图像时，第一摄像头110可以作为普通的监控摄像头使用，当第一摄像头110的监控视野范围内出现了粮食图像时，电子设备200向第二摄像头120发送触发信号，第二摄像头120接收到触发信号后开始按照25~30帧/秒的频率采集图像，图像采集时长可根据实际情况确定，例如0.3秒左右，在第一摄像头110已经拍摄到清晰的粮食图像的前提下，第二摄像头120用0.2至0.3秒的时间能够拍摄到5至9帧图像，完全能够拍摄到清晰的粮食图像。第二摄像头120在满足触发条件下开始采集图像，在未满足触发条件下处于待机状态，这种实现方式能够明显降低摄像头的耗电量。在第三种实现方式中，第一摄像头110和第二摄像头120的主要功能是用来监控粮食是否进入正确的仓库，第一摄像头110和第二摄像头120的图像采集频率可以设置得低一些，例如10帧/秒，该频率足以保证粮食进入中转台上至被工作人员搬运走的时间段内摄像头能够采集到清晰的粮食图像。在一种实现方式中，方法300根据粮食图像中的文字来判断粮食种类。具体如下：从粮食图像中提取文字，提取文字是指从粮食图像中识别出文字，然后根据识别出的文字与预设的与第一摄像头的ID相关联的文字信息进行比较，预设的与第一摄像头的ID相关联的文字信息是指用户在入库信息表格里输入的粮食种类和粮食名称。例如，用户在入库信息表格里输入的粮食种类为“大米”、粮食名称为“稻花香”，将从粮食图像中识别出的文字与“大米”和“稻花香”进行比对，若比对结果为与粮食种类或粮食名称中的任何一个一致，则表示粮食种类与第一摄像头的ID相关联。若步骤S310的判断结果为粮食种类不与第一摄像头的ID相关联，则通过报警装置发出警报，以提示工作人员粮食进入错误的仓库。报警装置可以采用摄像头内置的语音装置实现。进一步地，如果判断结果为粮食种类不与第一摄像头的ID相关联，那么判断粮食种类是否与其他仓库相关联。例如，一袋大米被放置在错误的传送带上，进入了存储白面的仓库，当识别到该大米与该仓库不相关联时，进一步判断大米是否与其他仓库相关联，假设判断结果为与某个存储大米的仓库相关联，那么报警装置发出提示音，提示工作人员应将粮食放入某关联仓库。对于图像采集频率较高的摄像头，可以对粮食进行跟踪，跟踪时间为从粮食开始进入中转台粮食至完全离开中转台。假设在此时间段内第一摄像头110共采集了N张图像，其中，第1至第m张图像中的粮食图像不完整，从第m+1至第 k张图像中的粮食图像是完整的，第k+1至第N张图像中的粮食图像不完整，那么，电子设备200应当对第m张图像做标记，并根据第m张图像判断粮食种类是否与第一摄像头的ID相关联，对于第m+1至第N张图像只提取粮食图像用于跟踪，除此之外不做任何处理。对于图像采集频率较低的摄像头，将从当前第一原始图像中提取到的粮食图像与从上一帧第一原始图像中提取到的粮食图像进行比对，若二者一致，并且二者在各自第一原始图像中的位置一致，则对所述上一帧第一原始图像做标记。对图像做标记的目的是记录一系列图像中的一张有效图像，有效图像将用于判断粮食种类。粮食进入仓库的时间以有效图像的采集时间为准。记录有效图像能够避免重复对同一袋粮食的多张原始图像进行粮食种类判断，节约计算资源，并且能够根据有效图像的数量记录进入仓库的粮食数量。本发明的实施例还提供了一种智能化仓库的视频监控400，该装置能够执行如上文所描述的智能化仓库的视频监控300的各步骤处理。下面，结合图4来描述上述装置400。如图4所示，装置400包括第一判断模块410、第二判断模块420、以及记录模块430。第一判断模块410适于响应于从第一摄像头发来的第一原始图像中提取粮食图像，根据所述粮食图像判断粮食种类是否与所述第一摄像头的监控区域相关联。第二判断模块420若无法根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联，则从第二摄像头发来的第二原始图像中提取粮食图像，并根据所述粮食图像判断粮食种类是否与所述第一摄像头的ID相关联。记录模块430适于在所述粮食种类与所述第一摄像头的监控区域相关联的情况下，记录所述粮食种类的信息、粮食进入仓库的时间以及所述第一摄像头的ID。作为本发明的优选实施例，所述第一判断模块410和第二判断模块420通过以下步骤判断粮食种类是否与所述第一摄像头的ID相关联：从所述粮食图像中提取文字；以及将提取到的文字与预设的与所述第一摄像头的ID相关联的文字信息进行比较，若提取到的文字与所述文字信息一致，则表示所述粮食种类与所述第一摄像头的ID相关联。作为本发明的优选实施例，所述装置400还包括触发单元；所述触发单元适于当从第一摄像头发来的第一原始图像中提取到粮食图像时，向所述第二摄像头发送触发信号，以使所述第二摄像头开始采集图像。作为本发明的优选实施例，所述装置500还包括第一标记模块；所述第一标记模块适于将从当前第一原始图像中提取到的粮食图像与从上一帧第一原始图像中提取到的粮食图像进行比对，若二者一致，并且二者在各自第一原始图像中的位置一致，则对所述上一帧第一原始图像做标记，所述上一帧第一原始图像将用于粮食种类的判断。作为本发明的优选实施例，所述装置500还包括第二标记模块；所述第二标记模块适于对所述粮食图像进行跟踪，将跟踪到的第一帧含有完整粮食图的第一原始图像做标记，该第一原始图像将用于粮食种类的判断。作为本发明的优选实施例，所述第一判断模块410和第二判断模块420还适于在所述粮食种类与所述第一摄像头的ID为非关联时，发出警报。作为本发明的优选实施例，所述装置500还包括提示模块；所述提示模块适于判断所述粮食种类是否与其他仓库的第一摄像头的ID相关联，以及在所述粮食种类与其他仓库的第一摄像头的ID相关联时，发出提示信号。本发明实施例描述的各种技术可结合硬件、软件，或者软硬件的组合一起实现。此外，使用序数词“第一”、“第二”等等来描述普通对象仅仅表示涉及类似对象的不同实例，并且并不意图暗示这样被描述的对象必须具有时间上、空间上、排序方面或者以任意其它方式的给定顺序。尽管根据有限数量的实施例描述了本发明，但是受益于上面的描述，本技术领域内的技术人员明白，在由此描述的本发明的范围内，可以设想其它实施例。显然，本领域的技术人员可以对本申请进行各种改动和变型而不脱离本申请的精神和范围。这样，倘若本申请的这些修改和变型属于本申请权利要求及其等同技术的范围之内，则本申请也意图包含这些改动和变型在内。
