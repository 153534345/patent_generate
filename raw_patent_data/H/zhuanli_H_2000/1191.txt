标题title
一种电力载波与无线融合的双模通讯方法及系统
摘要abst
本发明属于通信技术领域，公开了一种电力载波与无线融合的双模通讯方法及系统：建立发送端到接收端的N条传输路径；发送端通过无线电向接收端发送第一测试帧，获取每条传输路径上第一测试帧的传输时间，将传输时间最短的路径作为最佳传输路径；第i个终端通过电力线和无线电向第i+1个终端发送第二测试帧，将传输稳定性最高的通信路径作为最佳通信路径；建立发送端到接收端的第一通信路径；监测第j个路径段的第一平均传输速度，第一平均传输速度满足预设条件时，继续使用最佳通信路径进行通信，当第一平均传输速度不满足预设条件时，切换通信路径，使用切换后的通信路径进行通信。本发明解决了双模通讯传输效率低的问题。
权利要求书clms
1.一种电力载波与无线融合的双模通讯方法，其特征在于，包括如下步骤：步骤1、建立发送端到接收端的N条传输路径；步骤2、所述发送端通过无线电向所述接收端发送第一测试帧，获取每条传输路径上所述接收端接收到所述第一测试帧的数据传输时间，将所述数据传输时间最短的传输路径作为最佳传输路径；步骤3、将所述最佳传输路径中第i个终端到第i+1个终端的路径定义为第i个路径段，所述第i个终端分别通过电力线和无线电向所述第i+1个终端发送第二测试帧，将传输稳定性最高的通信路径作为所述第i个路径段的最佳通信路径，其中，所述最佳传输路径中终端的数量为M，i为1～的正整数，所述通信路径包括电力线通信路径和无线通信路径；步骤4、获取所述最佳传输路径中所有路径段的所述最佳通信路径，基于所述所有路径段的所述最佳通信路径建立所述发送端到所述接收端的第一通信路径；步骤5、实时监测所述第一通信路径中第j个路径段的第一平均传输速度，当所述第j个路径段的第一平均传输速度满足预设条件时，继续使用所述第j个路径段的所述最佳通信路径进行通信，当所述第j个路径段的第一平均传输速度不满足预设条件时，切换所述第j个路径段的所述最佳通信路径，所述第j个路径段使用切换后的通信路径进行通信，其中，j为1～的正整数。2.根据权利要求1所述的一种电力载波与无线融合的双模通讯方法，其特征在于，所述步骤1中，所述传输路径的建立步骤为：步骤11、所述发送端通过无线电向所述发送端的邻居终端发送路径建立请求，所述路径建立请求包括所述发送端的无线电连接标识、电力线连接标识、第一设备标识和所述接收端的第二设备标识；步骤12、将所述发送端定义为上游节点，将所述发送端的邻居终端定义为下游节点；步骤13、判断所述下游节点的地址注册表中是否存储有所述上游节点的无线电连接标识，若有，则发送响应信息，所述上游节点和所述下游节点之间建立无线通信路径；步骤14、若没有，则对所述上游节点进行认证，认证通过后，将所述上游节点的无线电连接标识、电力线连接标识和设备标识存储在所述下游节点的地址注册表中，随后返回所述步骤13；步骤15、判断所述第二设备标识与所述下游节点的设备标识是否一致，若一致，则所述传输路径建立完成；步骤16、若不一致，则将所述下游节点作为上游节点，将所述下游节点的邻居终端作为下游节点，返回所述步骤13，直到所述传输路径建立完成。3.根据权利要求2所述的一种电力载波与无线融合的双模通讯方法，其特征在于，所述步骤1之前，还包括如下步骤：所述上游节点通过电力线将所述上游节点的设备标识发送给所述下游节点；所述下游节点基于所述上游节点的设备标识和所述下游节点的设备标识生成认证码，并将所述认证码存储在终端认证表中；所述下游节点通过电力线将所述认证码发送给所述上游节点。4.根据权利要求3所述的一种电力载波与无线融合的双模通讯方法，其特征在于，所述步骤14中，对所述上游节点进行认证包括：所述下游节点获取所述上游节点的设备标识和所述认证码；基于所述上游节点的设备标识查找所述终端认证表，若所述终端认证表中存储有所述认证码，则认证通过。5.根据权利要求1所述的一种电力载波与无线融合的双模通讯方法，其特征在于，所述步骤5中，当所述第j个路径段的第一平均传输速度满足预设条件时，继续使用所述第j个路径段的所述最佳通信路径进行通信，当所述第j个路径段的第一平均传输速度不满足预设条件时，切换所述第j个路径段的所述最佳通信路径包括：步骤51、判断所述第一平均传输速度是否大于等于预设值；步骤52、当所述第一平均传输速度大于等于所述预设值时，继续使用所述第j个路径段的所述最佳通信路径进行通信；步骤53、当所述第一平均传输速度小于所述预设值时，使用所述第j个路径段的另一通信路径发送第三测试帧，并计算所述另一通信路径的第二平均传输速度；步骤54、当所述第二平均传输速度大于等于所述预设值时，所述第j个路径段使用所述另一通信路径进行通信；当所述第二平均传输速度小于所述预设值时，同时使用所述最佳通信路径和所述另一通信路径进行通信。6.根据权利要求5所述的一种电力载波与无线融合的双模通讯方法，其特征在于，将所述最佳传输路径上的G个终端设置为数据缓存点，所述发送端向所述接收端发送第一数据的过程中，将所述第一数据存储在所述数据缓存点；若任一数据缓存点接收到所述第一数据时发现数据缺失，则通知所述任一数据缓存点的前一个数据缓存点重新发送数据。7.根据权利要求6所述的一种电力载波与无线融合的双模通讯方法，其特征在于，所述任一数据缓存点接收到所述第一数据时发现数据缺失，则通知所述任一数据缓存点的前一个数据缓存点重新发送数据包括：获取所述任一数据缓存点与所述前一个数据缓存点之间传输速度最快和传输稳定性最高的两条通信路径，将传输速度最快的线路设置为第一线路，稳定性最高的线路设置为第二线路；若所述第一线路和所述第二线路不是同一条线路，则所述前一个数据缓存点将所述第一数据发送给所述任一数据缓存点之前，将所述第一数据拆分为第一数据块和第二数据块，并基于所述第一数据块和所述第二数据块使用布尔运算生成第三数据块，将所述第一数据块、所述第二数据块和所述第三数据块合并为第二数据，并将所述第二数据存储在所述前一个数据缓存点的数据存储表中，随后所述前一个数据缓存点通过所述第一线路发送所述第一数据，通过所述第二线路将所述第二数据发送给所述任一数据缓存点；若所述第一线路和所述第二线路是同一条线路，则所述前一个数据缓存点直接通过所述第一线路重新发送所述第二数据；所述任一数据缓存点接收到所述第一数据和所述第二数据后，若所述第一数据完整，则保留所述第一数据，若所述第一数据缺失，则从所述第二数据中提取所述第一数据块和所述第二数据块，并基于所述第一数据块和所述第二数据块生成所述第一数据，随后将所述第一数据和所述第二数据存储在所述任一数据缓存点的数据存储表中。8.一种电力载波与无线融合的双模通讯系统，用于实现如权利要求1至7任一项所述的电力载波与无线融合的双模通讯方法，其特征在于，包括路径建立模块、路径选择模块、通信路径选择模块、通信路径确定模块和通信监测模块；所述路径建立模块，用于建立发送端到接收端的N条传输路径；所述路径选择模块，用于通过无线电向所述接收端发送第一测试帧，获取每条传输路径上所述接收端接收到所述第一测试帧的数据传输时间，将所述数据传输时间最短的传输路径作为最佳传输路径；所述通信路径选择模块，用于将所述最佳传输路径中第i个终端到第i+1个终端的路径定义为第i个路径段，所述第i个终端分别通过电力线和无线电向所述第i+1个终端发送第二测试帧，将传输稳定性最高的通信路径作为所述第i个路径段的最佳通信路径，其中，所述最佳传输路径中终端的数量为M，i为1～的正整数，所述通信路径包括电力线通信路径和无线通信路径；所述通信路径确定模块，用于获取所述最佳传输路径中所有路径段的所述最佳通信路径，基于所述所有路径段的所述最佳通信路径建立所述发送端到所述接收端的第一通信路径；所述通信监测模块，用于实时监测所述第一通信路径中第j个路径段的第一平均传输速度，当所述第j个路径段的第一平均传输速度满足预设条件时，继续使用所述第j个路径段的所述最佳通信路径进行通信，当所述第j个路径段的第一平均传输速度不满足预设条件时，切换所述第j个路径段的所述最佳通信路径，所述第j个路径段使用切换后的通信路径进行通信，其中，j为1～的正整数。
说明书desc
技术领域本发明属于通信技术领域，具体涉及一种电力载波与无线融合的双模通讯方法及系统。背景技术电力载波通信以电力线为载波信号的传输媒介的电力系统通信，线路相对安全，不易被损坏，但在通信过程中，电力载波通信的质量会受到如线路噪声干扰强、输入阻抗的时变性、信号衰减等因素的影响。无线通信是指多个节点间不经由导体或缆线传播进行的远距离传输通信，具有便捷、无需布线等特点，但是遇到障碍物时，信号穿透障碍物能力差，信号衰减比较严重。如何能充分结合电力载波和无线各自的优点，使两种不同通信方式可以互为备用，弥补单模通信手段的不足，通过双模通信方式进行高效混合组网，以提升网络通信的稳定性和可靠性，是一个重要的研究方向。现有技术中，比如中国专利CN115664464A，公开了一种宽带电力载波与RF双模通信系统，载波信号处理单元为主通讯通道，无线信号处理单元为辅通讯通道，主通讯通道出现传输错误时，辅通讯通道开启传输。该方法将电力载波通信作为主要通信通道，将无线通信作为辅通信通道，优先启用主要通信通道，主要通信通道出现错误时启用辅通信通道，没有考虑数据传输速度和数据传输稳定性。再比如中国专利CN111465068B，公开了一种电力线载波与无线双模融合的通信方法，网络层选出包含电力线载波通信信道和无线通信信道的最优路由表路径；在形成路由表的过程中，网络层不会刻意区分电力线载波通信信道或无线通信信道，而是根据通信成功率、通信层级、通信延迟等指标进行路由表路径的优选，因此路由表中最终记录的优选路径有可能是全部均落在电力线载波通信信道的路径。该方法根据最优路由表进行数据传输，在数据传输过程不能根据通信路径的实际情况调整通信路径。因此，提供一种电力载波与无线融合的双模通讯方法及系统，以同时保证数据传输的传输速度和稳定性，提高数据传输效率，是亟待解决的问题。发明内容针对上述提出的技术问题，本发明提供一种电力载波与无线融合的双模通讯方法及系统。第一方面，本发明提供了一种电力载波与无线融合的双模通讯方法，该方法包括如下步骤：步骤1、建立发送端到接收端的N条传输路径；步骤2、发送端通过无线电向接收端发送第一测试帧，获取每条传输路径上接收端接收到第一测试帧的数据传输时间，将数据传输时间最短的传输路径作为最佳传输路径；步骤3、将最佳传输路径中第i个终端到第i+1个终端的路径定义为第i个路径段，第i个终端分别通过电力线和无线电向第i+1个终端发送第二测试帧，将传输稳定性最高的通信路径作为第i个路径段的最佳通信路径，其中，最佳传输路径中终端的数量为M，i为1～的正整数，通信路径包括电力线通信路径和无线通信路径；步骤4、获取最佳传输路径中所有路径段的最佳通信路径，基于所有路径段的最佳通信路径建立发送端到接收端的第一通信路径；步骤5、实时监测第一通信路径中第j个路径段的第一平均传输速度，当第j个路径段的第一平均传输速度满足预设条件时，继续使用第j个路径段的最佳通信路径进行通信，当第j个路径段的第一平均传输速度不满足预设条件时，切换第j个路径段的最佳通信路径，第j个路径段使用切换后的通信路径进行通信，其中，j为1～的正整数。具体地，步骤1中，传输路径的建立步骤为：步骤11、发送端通过无线电向发送端的邻居终端发送路径建立请求，路径建立请求包括发送端的无线电连接标识、电力线连接标识、第一设备标识和接收端的第二设备标识；步骤12、将发送端定义为上游节点，将发送端的邻居终端定义为下游节点；步骤13、判断下游节点的地址注册表中是否存储有上游节点的无线电连接标识，若有，则发送响应信息，上游节点和下游节点之间建立无线通信路径；步骤14、若没有，则对上游节点进行认证，认证通过后，将上游节点的无线电连接标识、电力线连接标识和设备标识存储在下游节点的地址注册表中，随后返回步骤13；步骤15、判断第二设备标识与下游节点的设备标识是否一致，若一致，则传输路径建立完成；步骤16、若不一致，则将下游节点作为上游节点，将下游节点的邻居终端作为下游节点，返回步骤13，直到传输路径建立完成。具体地，步骤1之前，还包括如下步骤：上游节点通过电力线将上游节点的设备标识发送给下游节点；下游节点基于上游节点的设备标识和下游节点的设备标识生成认证码，并将认证码存储在终端认证表中；下游节点通过电力线将认证码发送给上游节点。具体地，步骤14中，对上游节点进行认证包括：下游节点获取上游节点的设备标识和认证码；基于上游节点的设备标识查找终端认证表，若终端认证表中存储有认证码，则认证通过。具体地，步骤5中，当第j个路径段的第一平均传输速度满足预设条件时，继续使用第j个路径段的最佳通信路径进行通信，当第j个路径段的第一平均传输速度不满足预设条件时，切换第j个路径段的最佳通信路径包括：步骤51、判断第一平均传输速度是否大于等于预设值；步骤52、当第一平均传输速度大于等于预设值时，继续使用第j个路径段的最佳通信路径进行通信；步骤53、当第一平均传输速度小于预设值时，使用第j个路径段的另一通信路径发送第三测试帧，并计算另一通信路径的第二平均传输速度；步骤54、当第二平均传输速度大于等于预设值时，第j个路径段使用另一通信路径进行通信；当第二平均传输速度小于预设值时，同时使用最佳通信路径和另一通信路径进行通信。具体地，将最佳传输路径上的G个终端设置为数据缓存点，发送端向接收端发送第一数据的过程中，将第一数据存储在数据缓存点；若任一数据缓存点接收到第一数据时发现数据缺失，则通知任一数据缓存点的前一个数据缓存点重新发送数据。具体地，任一数据缓存点接收到第一数据时发现数据缺失，则通知任一数据缓存点的前一个数据缓存点重新发送数据包括：获取任一数据缓存点与前一个数据缓存点之间传输速度最快和传输稳定性最高的两条通信路径，将传输速度最快的线路设置为第一线路，稳定性最高的线路设置为第二线路；若第一线路和第二线路不是同一条线路，则前一个数据缓存点将第一数据发送给任一数据缓存点之前，将第一数据拆分为第一数据块和第二数据块，并基于第一数据块和第二数据块使用布尔运算生成第三数据块，将第一数据块、第二数据块和第三数据块合并为第二数据，并将第二数据存储在前一个数据缓存点的数据存储表中，随后前一个数据缓存点通过第一线路发送第一数据，通过第二线路将第二数据发送给任一数据缓存点；若第一线路和第二线路是同一条线路，则前一个数据缓存点直接通过第一线路重新发送第二数据；任一数据缓存点接收到第一数据和第二数据后，若第一数据完整，则保留第一数据，若第一数据缺失，则从第二数据中提取第一数据块和第二数据块，并基于第一数据块和第二数据块生成第一数据，随后将第一数据和第二数据存储在任一数据缓存点的数据存储表中。第二方面，本发明还提供了一种电力载波与无线融合的双模通讯系统，该系统包括：路径建立模块、路径选择模块、通信路径选择模块、通信路径确定模块和通信监测模块；路径建立模块，用于建立发送端到接收端的N条传输路径；路径选择模块，用于通过无线电向接收端发送第一测试帧，获取每条传输路径上接收端接收到第一测试帧的数据传输时间，将数据传输时间最短的传输路径作为最佳传输路径；通信路径选择模块，用于将最佳传输路径中第i个终端到第i+1个终端的路径定义为第i个路径段，第i个终端分别通过电力线和无线电向第i+1个终端发送第二测试帧，将传输稳定性最高的通信路径作为第i个路径段的最佳通信路径，其中，最佳传输路径中终端的数量为M，i为1～的正整数，通信路径包括电力线通信路径和无线通信路径；通信路径确定模块，用于获取最佳传输路径中所有路径段的最佳通信路径，基于所有路径段的最佳通信路径建立发送端到接收端的第一通信路径；通信监测模块，用于实时监测第一通信路径中第j个路径段的第一平均传输速度，当第j个路径段的第一平均传输速度满足预设条件时，继续使用第j个路径段的最佳通信路径进行通信，当第j个路径段的第一平均传输速度不满足预设条件时，切换第j个路径段的最佳通信路径，第j个路径段使用切换后的通信路径进行通信，其中，j为1～的正整数。本发明公开一种电力载波与无线融合的双模通讯方法及系统，建立发送端到接收端的多条传输路径，再通过无线电向接收端发送一个测试帧，选择数据传输时间最短的路径作为发送端到接收端的最佳传输路径，针对上述最佳传输路径中的任一段路径，分别通过电力线和无线电在任一路径段上发送第二测试帧，选择传输稳定性最高的通信路径作为上述任一路径段的最佳通信路径，基于所有路径段的最佳通信路径建立发送端到接收端的第一通信路径，由此建立的第一通信路径，可以在保证数据传输速度的同时，保证数据传输的稳定性，提高了数据传输效率。同时，在数据传输过程中，实时监测任一路径段上数据传输的平均传输速度，当上述平均传输速度不满足预设条件时，切换上述任一段的通信路径，进一步保证了数据传输速度和稳定性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据提供的附图获得其他的附图。图1为本发明的一种电力载波与无线融合的双模通讯方法的流程图；图2为本发明的一种电力载波与无线融合的双模通讯系统的结构示意图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明经行进一步的详细说明。显然，此处所描述的具体实施例仅仅用于解释本发明，是本发明的一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术普通人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都属于本发明保护的范围。需要说明，若本发明实施例中有涉及“第一”、 “第二”等的描述，则该“第一”、 “第二”等的描述仅用于描述目的，而不能理解为指示或暗示其相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、 “第二”的特征可以明示或者隐含地包括至少一个该特征。另外，各个实施例之间的技术方案可以相互结合，但是必须是以本领域普通技术人员能够实现为基础，当技术方案的结合出现相互矛盾或无法实现时应当认为这种技术方案的结合不存在，也不在本发明要求的保护范围之内。图1所示是本发明提供的一种电力载波与无线融合的双模通讯方法的一个实施例的流程图，该流程图具体包括：步骤1、建立发送端到接收端的N条传输路径。在建立传输路径之前，获取数据传输网络的网络拓扑。具体地，步骤1中，传输路径的建立步骤为：步骤11、发送端通过无线电向发送端的邻居终端发送路径建立请求，路径建立请求包括发送端的无线电连接标识、电力线连接标识、第一设备标识和接收端的第二设备标识。步骤12、将发送端定义为上游节点，将发送端的邻居终端定义为下游节点。步骤13、判断下游节点的地址注册表中是否存储有上游节点的无线电连接标识，若有，则发送响应信息，上游节点和下游节点之间建立无线通信路径。步骤14、若没有，则对上游节点进行认证，认证通过后，将上游节点的无线电连接标识、电力线连接标识和设备标识存储在下游节点的地址注册表中，随后返回步骤13。步骤15、判断第二设备标识与下游节点的设备标识是否一致，若一致，则传输路径建立完成。步骤16、若不一致，则将下游节点作为上游节点，将下游节点的邻居终端作为下游节点，返回步骤13，直到传输路径建立完成。无线电数据传输速度快，因此，通过无线电建立传输路径。优选地，设备识别码为终端序列号，任一终端的无线电连接标识为所述任一终端的无线连接模块识别信息，任一终端的电力线连接标识为所述任一终端的电力线连接模块识别信息。示例性地，终端的设备标识为abc，该终端的无线电连接标识为W_abc，该终端的电力线连接标识为P_abc。当上游节点通过无线电向下游节点发送路径建立请求时，将该上游节点的无线电连接标识、电力线连接标识、设备标识发送给所述下游节点。下游节点接收到请求后，根据上游节点的设备标识判断地址注册表中是否存储有该上游节点的无线电连接标识，若存储有该上游节点的无线电连接标识，说明下游节点对该上游节点进行过认证，两者之间建立过通信，则直接发送响应信息，通过下游节点的无线连接模块和上游节点的无线连接模块建立上游节点和下游节点之间的无线通信路径。若没有存储该上游节点的无线电连接标识，说明下游节点和上游节点之间没有建立过通信，先对该上游节点进行认证，随后再建立两者之间的无线通信路径。不需要通过管理设备对网络拓扑中的每个终端进行认证，使相邻终端之间相互认证，可以减轻管理设备的任务量，减轻网络负担。具体地，步骤1之前，还包括如下步骤：上游节点通过电力线将上游节点的设备标识发送给下游节点；下游节点基于上游节点的设备标识和下游节点的设备标识生成认证码，并将认证码存储在终端认证表中；下游节点通过电力线将认证码发送给上游节点。优选地，在网络拓扑生成之后，各节点通过电力线将该节点的设备标识发送给邻居节点，由邻居节点生成认证码，并保存在邻居节点的终端认证表中，用于对该节点进行认证。通过电力线交换认证码，可以快速、便捷地进行通信终端间的无线通信认证，确保无线通信的安全性。具体地，步骤14中，对上游节点进行认证包括：下游节点获取上游节点的设备标识和认证码；基于上游节点的设备标识查找终端认证表，若终端认证表中存储有认证码，则认证通过。步骤2、发送端通过无线电向接收端发送第一测试帧，获取每条传输路径上接收端接收到第一测试帧的数据传输时间，将数据传输时间最短的传输路径作为最佳传输路径。步骤3、将最佳传输路径中第i个终端到第i+1个终端的路径定义为第i个路径段，第i个终端分别通过电力线和无线电向第i+1个终端发送第二测试帧，将传输稳定性最高的通信路径作为第i个路径段的最佳通信路径，其中，最佳传输路径中终端的数量为M，i为1～的正整数，通信路径包括电力线通信路径和无线通信路径。最佳传输路径的任意两个终端之间，既可以通过电力线进行通信，也可以通过无线电进行通信。在确定任意两个终端间的最佳通信路径时，任意两个终端中的上游节点分别通过电力线和无线电向下游节点发送第二测试帧，并计算通过电力线传输上述第二测试帧的稳定性和通过无线电发送上述第二测试帧的稳定性，将稳定性最高的通信路径作为上述任意两个终端间的最佳通信路径。步骤4、获取最佳传输路径中所有路径段的最佳通信路径，基于所有路径段的最佳通信路径建立发送端到接收端的第一通信路径。第一通信路径中可能全部是电力线通信路径，可能全部是无线通信路径，也可能是电力线通信路径和无线通信路径的混合路径。示例性地，最佳通信路径为A-B-C-D，当第一通信路径中全部是电力线通信路径时，A通过电力线通信路径将数据发送给B，B通过电力线通信路径将数据发送给C，C通过电力线通信路径将数据发送给D；当第一通信路径中全部是无线通信路径时，A通过无线通信路径将数据发送给B，B通过无线通信路径将数据发送给C，C通过无线通信路径将数据发送给D；当第一通信路径是电力线通信路径和无线通信路径的混合路径时，A通过无线通信路径将数据发送给B，B通过电力线通信路径将数据发送给C，C再通过无线通信路径将数据发送给D。步骤5、实时监测第一通信路径中第j个路径段的第一平均传输速度，当第j个路径段的第一平均传输速度满足预设条件时，继续使用第j个路径段的最佳通信路径进行通信，当第j个路径段的第一平均传输速度不满足预设条件时，切换第j个路径段的最佳通信路径，第j个路径段使用切换后的通信路径进行通信，其中，j为1～的正整数。具体地，步骤5中，当第j个路径段的第一平均传输速度满足预设条件时，继续使用第j个路径段的最佳通信路径进行通信，当第j个路径段的第一平均传输速度不满足预设条件时，切换第j个路径段的最佳通信路径包括：步骤51、判断第一平均传输速度是否大于等于预设值。步骤52、当第一平均传输速度大于等于预设值时，继续使用第j个路径段的最佳通信路径进行通信。步骤53、当第一平均传输速度小于预设值时，使用第j个路径段的另一通信路径发送第三测试帧，并计算另一通信路径的第二平均传输速度。步骤54、当第二平均传输速度大于等于预设值时，第j个路径段使用另一通信路径进行通信；当第二平均传输速度小于预设值时，同时使用最佳通信路径和另一通信路径进行通信。预设值可以根据本领域技术人员的经验或可以根据实际应用场景进行设置，本申请实施例对此并不限定。优选地，任意一个路径段选定通信路径后，将另一个通信路径对应的连接模块关闭，可以减少能量消耗。示例性地，任一路径段选定通过无线通信路径进行通信后，关闭电力线连接模块。如果选定的通信路径的第一平均传输速度小于预设值时，则激活另一通信路径，通过另一通信路径发送第三测试帧。当两条通信路径的平均传输速度都小于预设值时，同时通过两条通信路径进行数据传输，可以提高数据传输的稳定性。优选地，第一测试帧、第二测试帧和第三测试帧可以相同，也可以不相同。具体地，将最佳传输路径上的G个终端设置为数据缓存点，发送端向接收端发送第一数据的过程中，将第一数据存储在数据缓存点；若任一数据缓存点接收到第一数据时发现数据缺失，则通知任一数据缓存点的前一个数据缓存点重新发送数据。优选地，根据最佳传输路径上终端的数量设置数据缓存点的数量。示例性，最佳传输路径上有10个终端，则数据缓存点的数量为1；最佳传输路径上有10个终端，则数据缓存点的数量为3。最佳通信路径上数据缓存点的数量可以根据本领域技术人员的经验或可以根据实际应用场景进行设置，本申请实施例对此并不限定。示例性地，最佳传输路径为A-B-C-D-E-F，其中，C和E为数据缓存点，终端E接收到数据时发现数据缺失，则通知终端C重新发送数据。在传输路径上设置数据缓存点，并在数据缓存点处判断数据的完整性，若不完整，则通知最近的数据缓存点重发数据，可以提高数据传输的准确率和传输效率。基于此，可以避免数据到达接收端时才发现错误并通知重传，既耽误时间，又浪费网络资源。具体地，任一数据缓存点接收到第一数据时发现数据缺失，则通知任一数据缓存点的前一个数据缓存点重新发送数据包括：获取任一数据缓存点与前一个数据缓存点之间传输速度最快和传输稳定性最高的两条通信路径，将传输速度最快的线路设置为第一线路，稳定性最高的线路设置为第二线路；若第一线路和第二线路不是同一条线路，则前一个数据缓存点将第一数据发送给任一数据缓存点之前，将第一数据拆分为第一数据块和第二数据块，并基于第一数据块和第二数据块使用布尔运算生成第三数据块，将第一数据块、第二数据块和第三数据块合并为第二数据，并将第二数据存储在前一个数据缓存点的数据存储表中，随后前一个数据缓存点通过第一线路发送第一数据，通过第二线路将第二数据发送给任一数据缓存点；若第一线路和第二线路是同一条线路，则前一个数据缓存点直接通过第一线路重新发送第二数据；任一数据缓存点接收到第一数据和第二数据后，若第一数据完整，则保留第一数据，若第一数据缺失，则从第二数据中提取第一数据块和第二数据块，并基于第一数据块和第二数据块生成第一数据，随后将第一数据和第二数据存储在任一数据缓存点的数据存储表中。当任一数据缓存点接收到数据并发现数据缺失时，该任一数据缓存点的前一个数据缓存点将第一数据拆分为第一数据块和第二数据块，基于第一数据块和第二数据块使用布尔运算生成第三数据块，并将第一数据块、第二数据块和第三数据块合并为第二数据，随后通过第二线路将所述第二数据发送给所述任一数据缓存点。基于此，若任一数据缓存点接收到第二数据后，发现第一数据块丢失，则可以通过第二数据块和第三数据块计算得到第一数据块，并基于第一数据块和第二数据块生成要传输的第一数据。任一数据缓存点接收到第二数据后，还原生成第一数据，并存储所述第一数据和所述第二数据，随后继续转发所述第一数据。当该数据缓存点的下一个数据缓存点接收到第一数据时发现数据缺失，则该数据缓存点直接发送所述第二数据；若没有发送数据缺失的情况，则该下一个数据缓存点继续转发所述第一数据。另外，当第一线路和第二线路不是同一条线路时，例如第一线路是无线传输，第二线路是电力传输，那么当检测到数据缺失时，发送端的缓存点再次通过第一线路发送第一数据，通过第二线路发送第二数据，由于第一线路的传输速度快，且第一数据的数据量小于第二数据，使得接收端首先接收到第一数据，并对第一数据进行解析，若第一数据完整，则就以较短的时间内，使得接收端获得完整的第一数据；若检测到接收的第一数据不完整时，此时第二数据到达，由于第二线路相比于第一线路的稳定性更高，因此其出错的几率较低，并且第二数据存在冗余数据，其数据部分丢失后也可以恢复，因此，当再次发送的第一数据缺失后，再进行解析第二数据，从而保证再次传输时可以获得完整的数据。若所述第一线路和所述第二线路是同一条线路，表明其中一条线路速度快且传输稳定，因此直接发送第二数据，使得接收端可以较快、且较稳定的接收到第二数据中存储的两个数据块。图2所示是本发明提供的一种电力载波与无线融合的双模通讯系统的一个实施例的结构示意图。如图2所示，该系统包括：路径建立模块10、路径选择模块20、通信路径选择模块30、通信路径确定模块40和通信监测模块50。路径建立模块10，用于建立发送端到接收端的N条传输路径。路径选择模块20，用于通过无线电向接收端发送第一测试帧，获取每条传输路径上接收端接收到第一测试帧的数据传输时间，将数据传输时间最短的传输路径作为最佳传输路径。通信路径选择模块30，用于将最佳传输路径中第i个终端到第i+1个终端的路径定义为第i个路径段，第i个终端分别通过电力线和无线电向第i+1个终端发送第二测试帧，将传输稳定性最高的通信路径作为第i个路径段的最佳通信路径，其中，最佳传输路径中终端的数量为M，i为1～的正整数，通信路径包括电力线通信路径和无线通信路径。通信路径确定模块40，用于获取最佳传输路径中所有路径段的最佳通信路径，基于所有路径段的最佳通信路径建立发送端到接收端的第一通信路径。通信监测模块50，用于实时监测第一通信路径中第j个路径段的第一平均传输速度，当第j个路径段的第一平均传输速度满足预设条件时，继续使用第j个路径段的最佳通信路径进行通信，当第j个路径段的第一平均传输速度不满足预设条件时，切换第j个路径段的最佳通信路径，第j个路径段使用切换后的通信路径进行通信，其中，j为1～的正整数。发送端具有路径建立模块、路径选择模块、通信路径选择模块、通信路径确定模块和通信监测模块。传输路径上的每个中继终端都具有通信路径选择模块和通信监测模块。应该理解的是，虽然本发明各实施例的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，各实施例中的至少一部分步骤可以包括多个子步骤或者多个阶段，这些子步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些子步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤的子步骤或者阶段的至少一部分轮流或者交替地执行。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，上述的程序可存储于一个非易失性计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、存储、数据库或其它介质的任何引用，均可包括非易失性和/或易失性存储器。非易失性存储器可包括只读存储器、可编程ROM、电可编程ROM、电可擦除可编程ROM或闪存。易失性存储器可包括随机存取存储器或者外部高速缓冲存储器。作为说明而非局限，RAM以多种形式可得，诸如静态RAM、动态RAM、同步DRAM、双数据率SDRAM、增强型SDRAM、同步链路DRAM、存储器总线直接RAM、直接存储器总线动态RAM、以及存储器总线动态RAM等。以上上述的实施例仅表达了本发明的实施优选方式，其描述较为具体和详细，但并不能因此而理解为对本发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干变形和改进，这些都属于本发明的保护范围。因此，本发明专利的保护范围应以所附权利要求为准。
