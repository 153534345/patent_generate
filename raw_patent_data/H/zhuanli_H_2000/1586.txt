标题title
一种基于路由寻址的密钥分发网络组建方法
摘要abst
本发明公开了一种基于路由寻址的密钥分发网络组建方法。所述方法包括：S1.本地节点通过配置加载节点所在域的子网掩码和父域的子网掩码；S2.本地节点和相邻节点对接后，双方各自生成一条链路状态信息并保存；S3.单个节点内的所有链路状态信息定时向该节点所在父域内的其他节点泛洪；S4.处理密钥路由信息，使路由消息通过节点进入到量子密钥分发网络；S5.判断节点是否为边界节点，如果该节点为普通节点，则执行步骤S6；如果该节点为边界节点，则执行步骤S7；S6.根据最短路径算法寻找路由转发下一跳节点；S7.发送消息至下一节点；S8.判断是否为目的节点，如果是，则消息被消费；如果否，则执行步骤S6。
权利要求书clms
1.一种基于路由寻址的密钥分发网络组建方法，其特征在于，所述方法包括：S1.本地节点通过配置加载节点所在域的子网掩码和父域的子网掩码；S2.本地节点和相邻节点对接后，双方各自生成一条链路状态信息并保存；S3.单个节点内的所有链路状态信息定时向该节点所在父域内的其他节点泛洪；S4.处理密钥路由信息，使路由消息通过节点进入到量子密钥分发网络；S5.判断节点是否为边界节点，如果该节点为普通节点，则执行步骤S6；如果该节点为边界节点，则执行步骤S7；S6.根据最短路径算法寻找路由转发下一跳节点；S7.发送消息至下一节点；S8.判断是否为目的节点，如果是，则消息被消费；如果否，则执行步骤S6。2.根据权利要求1所述的一种基于路由寻址的密钥分发网络组建方法，其特征在于，所述步骤S2中，所述链路状态信息包括本地节点和相邻节点的地址、子网掩码、父域掩码和链路密钥池内密钥量大小。3.根据权利要求2所述的一种基于路由寻址的密钥分发网络组建方法，其特征在于，节点的地址为该节点在网络拓扑中的唯一标识；链路密钥池代表链路两端节点同步密钥后的密钥容器。4.根据权利要求1所述的一种基于路由寻址的密钥分发网络组建方法，其特征在于，所述步骤S3包括：使同一父域内的所有节点同步属于该父域内的所有链路状态信息。5.根据权利要求1所述的一种基于路由寻址的密钥分发网络组建方法，其特征在于，所述步骤S4中，所述密钥路由消息是由上层应用发出，用于分发量子密钥的路由消息，该消息通过与上层应用对接的本地节点进入量子密钥分发网络，通过路由发送至目的节点。6.根据权利要求1所述的一种基于路由寻址的密钥分发网络组建方法，其特征在于，所述步骤S5包括：如果该节点有且仅有一个节点与其相连，则该节点为边界节点，其余节点均为普通节点。7.根据权利要求1所述的一种基于路由寻址的密钥分发网络组建方法，其特征在于，所述步骤S6包括：当前节点向相邻节点发送密钥消息时，当前节点的路由模块查询本地缓存的所有链路状态信息，寻找所述当前节点所在最小域和其父域，之后查询所述当前节点所在且与相邻节点所在域同级别的兄弟域，在所有兄弟域组成的无向图中，通过最短路径算法寻找所述兄弟域到相邻节点所在域的最短路径的下一跳所在域，查询所述兄弟域到所述下一跳所在域的边界路由器，根据链路状态信息中保存的当前密钥量的大小，选择密钥量多的路径，对比该路径的发送节点地址和自身节点地址，如果一致，则发送消息，如果不一致，则将该路径的发送节点作为新一轮寻路的目的节点，重复上述寻路过程。8.根据权利要求7所述的一种基于路由寻址的密钥分发网络组建方法，其特征在于，所述最短路径算法包括迪杰斯特拉算法、贝尔曼-福特算法、弗洛伊德算法、插点法、贝尔曼-福特算法的队列优化算法中的任意一种。9.根据权利要求1所述的一种基于路由寻址的密钥分发网络组建方法，其特征在于，所述步骤S6包括：当前节点向相邻节点发送密钥消息时，如果所述当前节点为边界节点，则消息从边界节点发送时，不需要经过寻路算法计算路径，直接根据自身缓存的链路状态信息，将消息转发至所述边界节点的相邻节点。
说明书desc
技术领域本发明涉及量子密钥分发技术领域，具体为一种基于路由寻址的密钥分发网络组建方法。背景技术随着量子信息技术的发展，量子密钥分发技术应运而生。借助量子密钥分发技术，通信双方可以在普通网络信道上建立安全的密钥分发通道，从而在安全密钥的生产过程中密钥不会被第三方窃取。现有的量子密钥分发技术对量子态的传输依靠对光子进行编码、传输、测量实现。其过程需要传输量子信号，将量子信号与经典信号在现有的经典光网络中融合传输，从而降低部署成本，推进量子密钥分发技术的部署。现有技术中，CN110086713A公开了一种用于广域量子密钥分配网络的分域路由方法，提出了一种基于软件定义光网络的广域量子密钥分配网络的分域架构，并提出了基于密钥资源均衡的域内路由算法以及基于M条随机路径的域间路由算法。CN112332984A公开了一种基于SDN的广域量子密钥分发路由方法，通过多种选路指标进行路由选择，降低域内量子密钥分发阻塞率，实现域内量子密钥均衡分发。CN112910639A公开了一种多域场景下的量子加密业务传输方法，其响应于根据接收到的业务传输请求中携带的源节点和目的节点的信息而确定源节点和目的节点不是处于同一域，基于源节点所在的第一域内的第一节点网络拓扑信息、目的节点所在的第二域内的第二节点网络拓扑信息以及第一域与第二域之间的域间虚拟网络拓扑信息，选择从源节点到目的节点的跨域链路，从预先构建的全局量子密钥池中检索出与所述跨域链路对应的第一量子密钥资源，使用第一量子密钥资源，进行业务传输请求指示的业务通过所述跨域链路的加密传输。但是，现有技术涉及到域间通信需要子控制器将拓扑信息上报到总控制器，由总控制器计算路由最优路径，如果总控制器工作不稳定或遭遇攻击则整个路由网络瘫痪，缺乏稳定性和安全性；路由路径由总控制器根据上报时的网络拓扑状态计算而成，信息在路由途中所经过的节点其密钥剩余量会产生波动，先前计算的最优路径无法适应当前的网络拓扑环境变化，缺乏灵活性。因此，如何克服上述缺陷，实现量子密钥传输网络稳定安全可靠和路由寻路灵活适应当前网络拓扑下量子密钥存量波动,成为本技术领域亟待解决的课题。发明内容为克服上述现有技术的不足，本发明提供了一种基于路由寻址的密钥分发网络组建方法，具体采用如下技术方案：一种基于路由寻址的密钥分发网络组建方法，其特征在于，所述方法包括：S1.本地节点通过配置加载节点所在域的子网掩码和父域的子网掩码；S2.本地节点和相邻节点对接后，双方各自生成一条链路状态信息并保存；S3.单个节点内的所有链路状态信息定时向该节点所在父域内的其他节点泛洪；S4.处理密钥路由信息，使路由消息通过节点进入到量子密钥分发网络；S5.判断节点是否为边界节点，如果该节点为普通节点，则执行步骤S6；如果该节点为边界节点，则执行步骤S7；S6.根据最短路径算法寻找路由转发下一跳节点；S7.发送消息至下一节点；S8.判断是否为目的节点，如果是，则消息被消费；如果否，则执行步骤S6。进一步，所述步骤S2中，所述链路状态信息包括本地节点和相邻节点的地址、子网掩码、父域掩码和链路密钥池内密钥量大小。进一步，节点的地址为该节点在网络拓扑中的唯一标识；链路密钥池代表链路两端节点同步密钥后的密钥容器。进一步，所述步骤S3包括：使同一父域内的所有节点同步属于该父域内的所有链路状态信息。进一步，所述步骤S4中，所述密钥路由消息是由上层应用发出，用于分发量子密钥的路由消息，该消息通过与上层应用对接的本地节点进入量子密钥分发网络，通过路由发送至目的节点。进一步，所述步骤S5包括：如果该节点有且仅有一个节点于其相连，则该节点为边界节点，其余节点均为普通节点。进一步，所述步骤S6包括：当前节点向相邻节点发送密钥消息时，当前节点的路由模块查询本地缓存的所有链路状态信息，寻找所述当前节点所在最小域和其父域，之后查询所述当前节点所在且与相邻节点所在域同级别的兄弟域，在所有兄弟域组成的无向图中，通过最短路径算法寻找所述兄弟域到相邻节点所在域的最短路径的下一跳所在域，查询所述兄弟域到所述下一跳所在域的边界路由器，根据链路状态信息中保存的当前密钥量的大小，选择密钥量多的路径，对比该路径的发送节点地址和自身节点地址，如果一致，则发送消息，如果不一致，则将该路径的发送节点作为新一轮寻路的目的节点，重复上述寻路过程。进一步，所述最短路径算法包括迪杰斯特拉算法、贝尔曼-福特算法、弗洛伊德算法、插点法、贝尔曼-福特算法的队列优化算法中的任意一种。进一步，所述步骤S6包括：当前节点向相邻节点发送密钥消息时，如果所述当前节点为边界节点，则消息从边界节点发送时，不需要经过寻路算法计算路径，直接根据自身缓存的链路状态信息，将消息转发至所述边界节点的相邻节点。本发明的一种基于路由寻址的密钥分发网络组建方法，基于路由寻址组网技术解决了密钥消息在量子密钥分发网络中传输速度低和传输稳定性差的问题，解决了量子密钥分发网络部署中心化的问题，提供了密钥消息在网络传输过程中寻找最优路径的能力，提高了路由寻址速度和网络传输效率。附图说明图1为本发明的方法流程图。图2为本发明的节点示意图。图3为本发明的量子密钥分发网络示意图。具体实施方式下面结合附图对本发明作进一步描述。以下实施例仅用于更加清楚地说明本发明的技术方案，而不能以此来限制本发明的保护范围。应该指出，以下详细说明都是示例性的，旨在对本申请提供进一步的说明。除非另有指明，本文使用的所有技术和科学术语具有与本申请所属技术领域的普通技术人员通常理解的相同含义。需要注意的是，这里所使用的术语仅是为了描述具体实施方式，而非意图限制根据本申请的示例性实施方式。如在这里所使用的，除非上下文另外明确指出，否则单数形式也意图包括复数形式，此外，还应当理解的是，当在本说明书中使用术语“包含”和/或“包括”时，其指明存在特征、步骤、操作、器件、组件和/或它们的组合。参见附图1所示，本发明的具体实施例涉及一种基于路由寻址的量子密钥分发网络组建方法，包括如下步骤：S1.本地节点通过配置加载节点所在域的子网掩码和父域的子网掩码。基于附图2，以R6为例，R6和R1的链路所在最小父域Area1的子网掩码为24，自身所在域子网掩码为32；R6和R11的链路所在最小父域Area3的子网掩码为16，自身所在域Area1的子网掩码为24；R6和R2的链路同R6和R1的链路相似，所在最小父域Area1的子网掩码为24，自身所在域子网掩码为32。因此R6的节点配置为{{peername:R1;parentMaskLength:24;selfMaskLength:32;defaultFalg:true},{peername:R2;parentMaskLength:24;selfMaskLength:32;defaultFalg:true},{peername:R11;parentMaskLength:16;selfMaskLength:24;defaultFalg:false}}。S2.本地节点和目的节点对接后，双方各自生成一条链路状态信息并保存。所述链路状态信息包括本地节点和目的节点的地址、子网掩码、父域掩码和该链路密钥池内密钥量大小等。节点地址为该节点在网络拓扑中的唯一标识。链路密钥池代表链路两端节点同步密钥后的密钥容器。密钥池中存放密钥的长度即为密钥量大小。基于附图2，以R6为例，本地节点为R6，目的节点为R11。Area1的域地址为192.168.1.0，Area2的域地址为192.168.2.0，Area3的域地址为192.168.0.0。R6的地址配置为192.168.1.2，R11的地址配置为192.168.2.2。R6和R11的链路密钥池的密钥量为1024，则R6和R11产生的链路状态信息为{AID:192.168.1.2,BID:192.168.2.2,aSelfMaskLength:24,bSelfMaskLength:24,parentMaskLength:16,KR:1024}。AID是本地节点的地址，BID是目的节点的地址，aSelfMaskLength是本地节点所在的域地址，bSelfMaskLength是目的节点所在的域地址，parentMaskLength是链路的父域地址，在该例中是Area3，KR是链路密钥池的密钥量。S3.单个节点内的所有链路状态信息定时向该节点所在父域内的其他节点泛洪。通过该步骤，使同一父域内的所有节点同步属于该域内的所有链路状态信息；参见附图2所示，其中R1-R5链路和R5-R6链路所属直接父域为Area1，则链路在泛洪时，R1、R5、R6三个节点都会缓存R1-R5和R1-R6这两条链路状态信息。R11-R15链路所属直接父域为Area2，则链路在泛洪时，R11和R15节点会缓存R11-R15链路状态信息。R6-R11链路所属直接父域为Area3，而Area1和Area2均为Area3的子域，因此Area1和Area2中所有节点均会缓存R6-R11链路状态信息。S4.处理密钥路由信息，使路由消息通过节点进入到量子密钥分发网络。密钥路由消息是由上层应用发出，用于分发量子密钥的路由消息。该消息通过与上层应用对接的本地节点进入量子密钥分发网络，通过路由发送至目的节点。S5.判断节点是否为边界节点。如果该节点为普通节点，则执行步骤S6；如果该节点为边界节点，则执行步骤S7。在网络拓扑中，如果该节点有且仅有一个节点于其相连，则该节点为边界节点，其余节点均为普通节点。一个节点是否为边界节点可以从节点配置中体现，以S1中R6的配置文件为例，defaultFalg值为true则该节点为边界节点，defaultFalg值为false则该节点为普通节点。S6.根据最短路径算法寻找路由转发下一跳节点。参照附图3所示，当R1节点向R6节点发送密钥消息时，R1节点的路由模块查询本地缓存的所有链路状态信息，寻找R6节点所在最小域Area5和其父域Area6；之后查询自身节点所在且与Area5同级别的兄弟域Area3；在Area3的所有兄弟域组成的无向图中，通过最短路径算法寻找Area3到Area5的最短路径的下一跳为Area4；查询Area3到Area4的边界路由器，发现有R3-R10和R4-R10两条链路状态信息，根据链路状态信息中保存的当前密钥量的大小，选择密钥量多的路径。对比该路径的发送节点地址和自身节点地址，如果一致，则发送消息；如果不一致，则将该路径的发送节点作为新一轮寻路的目的节点，重复上述寻路过程。如果定义R6为边界节点，则消息从R6发送时，不需要经过寻路算法计算路径，直接根据自身缓存的链路状态信息，将消息转发至R8节点。最短路径算法可通过Dijkstra算法、Bellman-Ford算法、Floyd算法和SPFA算法等任意一种最短路径算法实现。S7.发送消息至下一节点。如果该节点为边界节点，则不需要通过寻路算法计算，路由消息直接发送至指定的相邻节点。S8.判断是否为目的节点，如果是，则消息被消费；如果否，则执行步骤S6。消息通过节点路由转发至下一节点，如果下一节点不是目的节点则跳转至步骤S6，如果下一节点为目的节点，则消息被目的节点消费。本发明通过组建量子密钥分发网络，实现长远距离节点和复杂网络拓扑通过量子密钥分发网络同步密钥；通过采用路由寻址组网技术，计算消息在复杂网络拓扑中从发送端到接收端的最优传输路径；通过网络地址和子网掩码定义父子域；域内节点通过泛洪维护本节点的链路状态列表；通过最优路径算法计算消息在域内的传输路径。本发明组建的量子密钥分发网络可以通过泛洪实现域内链路状态信息传播，动态适应复杂网络拓扑中量子密钥的数量波动，实现去中心化的网络组建，提高量子密钥分发网络的安全性和稳定性；本发明采用路由寻址组网技术，计算消息在网络拓扑中从发送端到接收端的最优传输路径，提高了密钥消息在量子密钥分发网络中的传输速度。如上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明技术原理的前提下，还可以做出若干改进和变形，这些改进和变形也应视为本发明的保护范围。
