标题title
一种车联网量子密钥加密通信的仿真测试系统
摘要abst
本发明属于车联网技术领域，尤其涉及一种车联网量子密钥加密通信的仿真测试系统，包括：进行通信交互的车辆测试子系统和云端测试子系统；车辆测试子系统包括电子控制器模拟模块、车辆数据处理模块和车辆密钥管理模块，所述电子控制器模拟模块用于模拟车辆行驶，并将行车数据输出至车辆数据处理模块；车辆数据处理模块调用所述车辆密钥管理模块中的密钥和加密函数将接收到的行车数据加密成车辆密文后发送至云端测试子系统；云端测试子系统包括云端通信模块、云端数据处理模块、云端密钥模块以及云端数据库。本发明的仿真测试系统能够大大降低了对于加密通信方法的测试成本，提高加密通信方法的测试效率。
权利要求书clms
1.一种车联网量子密钥加密通信的仿真测试系统，其特征在于，包括：进行通信交互的车辆测试子系统和云端测试子系统；车辆测试子系统包括电子控制器模拟模块、车辆数据处理模块和车辆密钥管理模块，所述电子控制器模拟模块用于模拟车辆行驶，并将行车数据输出至车辆数据处理模块；所述车辆数据处理模块调用所述车辆密钥管理模块中的密钥和加密函数将接收到的行车数据加密成车辆密文后发送至云端测试子系统；云端测试子系统包括云端通信模块、云端数据处理模块、云端密钥模块以及云端数据库，所述云端通信模块用于接收车辆测试子系统发送来的车辆密文，并将车辆密文发送至云端数据处理模块，或用来发送云端数据处理模块生成的云端密文；云端数据库内存储密钥、加密函数和映射关系；云端密钥模块生成云端密钥并储于云端数据库内，且云端密钥模块将云端数据库内的对应密钥、加密函数调用给云端数据处理模块；云端数据处理模块使用云端密钥模块提供的对应密钥、加密函数对车辆密文进行解密和计算处理，并将计算生成的明文加密成云端密文后发送至云端通信模块。2.根据权利要求1所述的仿真测试系统，其特征在于：所述电子控制器模拟模块内搭载Prescan软件和/或SUMO软件来进行车辆的模拟驾驶，产生行车数据；电子控制器模拟模块内还包括若干个并行的传输单元，一个传输单元采集并传输一辆测试车辆的行车数据，各传输单元采集行车数据并打包传输至车辆数据处理模块中。3.根据权利要求2所述的仿真测试系统，其特征在于：所述传输单元包括顺序连接的采集子单元、打包子单元、时间控制子单元以及发送子单元；所述采集子单元包括一个输入端口和若干个输出端口，行车数据从输入端口进入采集子单元，各输出端口只输出一种数据，输出端口与打包子单元相连接；所述打包子单元用于将输出端口的数据打包成数据包，并输送至时间控制子单元内；所述时间控制子单元内将设定时间间隔后的时刻所收到的数据包传输至发送子单元内，其余时刻时间控制子单元若接收到数据包，则丢弃；发送子单元内预先设定好数据包的接收地址和接收端口，发送子单元收到数据包后立刻将数据包发送至对应的接收地址和接收端口。4.根据权利要求3所述的仿真测试系统，其特征在于：所述车辆数据处理模块包括数据接收单元、数据加密单元、数据解密单元、数据发送单元、数据计算单元；数据接收单元包括车辆数据处理模块服务器上的各端口，数据接收单元中的端口接收所述发送子单元所发送来的数据包，并将数据包直接发送至数据加密单元；或数据接收单元将接收到的数据包发送至数据计算单元；或数据接收单元将接收到的云端密文发送至数据解密单元；当数据接收单元将接收到的数据包直接发送至数据加密单元时，数据加密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将接收到的数据包加密成车辆密文后，传输至数据发送单元；当数据接收单元将接收到的数据包发送至数据计算单元，数据计算单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系计算出相应的车联网请求信息，并将车联网请求信息传输至数据加密单元，数据加密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将接收到的车联网请求信息加密成车辆密文后，传输至数据发送单元；当数据接收单元接收到的是云端密文时，数据接收单元将云端密文发送至数据解密单元，数据解密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将云端密文解密成明文，并将解密后得到的明文发送至数据计算单元作为反馈；数据计算单元对收到的明文进行计算处理，并基于计算处理的结果调整各车辆传输单元采集所输出的数据类型；数据计算单元对数据接收单元传送来的新的数据包进行计算处理，生成新一轮车联网请求信息并传输至数据加密单元，数据加密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将新一轮车联网请求信息加密成车辆密文后，传输至数据发送单元；数据发送单元通过MQTT通信协议将车辆密文发送至通信接收方。5.根据权利要求4所述的仿真测试系统，其特征在于：云端通信模块包括云端接收单元和云端发送单元，云端接收单元通过MQTT通信协议接收车辆测试子系统中数据发送单元发送来的车辆密文，并将车辆密文传输至云端数据处理模块中；云端发送单元通过MQTT通信协议来将云端数据处理模块生成的云端密文发送至车辆数据处理模块内的数据接收单元；云端密钥模块包括云端密钥生成单元和云端密钥管理单元，云端密钥生成单元通过量子随机数发生器生成云端密钥，并将生成的云端密钥传输至云端密钥管理单元；云端密钥管理单元将云端密钥、加密函数存储在云端数据库内，并对云端数据库内存储的各种密钥、加密函数以及映射关系进行调用。6.根据权利要求5所述的仿真测试系统，其特征在于：云端数据处理模块包括云端解密单元、云端加密单元和云端计算单元；云端解密单元接收云端接收单元发送来的车辆密文后，通过云端密钥管理单元调用云端数据库内的对应密钥对车辆密文进行解密，并将解密后得到的明文传送到云端计算单元；云端计算单元通过云端密钥管理单元调用云端数据库内的对应密钥、加密函数和绑定关系对明文进行身份验证、计算处理后得到相应的车联网服务信息，并将车联网服务信息传输至云端加密单元；云端加密单元通过云端密钥管理单元调用云端数据库内的对应密钥、加密函数来将车联网服务信息加密成云端密文，并传送至云端发送单元。7.根据权利要求5或6所述的仿真测试系统，其特征在于：仿真测试系统还包括与车辆测试子系统、云端测试子系统进行信息交互的路端测试子系统；车辆数据处理模块中的数据接收单元还接收路端测试子系统发来的路端密文，数据解密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系来将路端密文解密成明文，并将明文发送至数据计算单元，数据计算单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系对收到的明文进行计算处理，并基于计算处理的结果调整各车辆传输单元采集所输出的数据类型；数据计算单元对数据接收单元传送来的新的数据包进行计算处理，生成新一轮车联网请求信息并传输至数据加密单元，数据加密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将新一轮车联网请求信息加密成车辆密文后，传输至数据发送单元；车辆数据处理模块中的数据发送单元通过MQTT通信协议将车辆密文发送至路端测试子系统中；云端接收单元还接收路端测试子系统发来的路端密文；云端发送单元也向路端测试子系统发送云端密文。8.根据权利要求7所述的仿真测试系统，其特征在于：路端测试子系统包括路端传输单元、路端数据处理模块、路端密钥管理模块以及路端通信模块；路端通信模块包括路端发送单元和路端接收单元，路端接收单元通过MQTT通信协议接收车辆测试子系统中的数据发送单元发送来的车辆密文，或接收云端发送单元发送来的云端密文，并将接收到的密文输至路端数据处理模块中；路端发送单元通过MQTT通信协议来将路端数据处理模块中产生的路端密文发送至车辆测试子系统中的数据接收单元或云端测试子系统中的云端接收单元；若干个路端传输单元采集并传输电子控制器模拟模块中Prescan和/或SUMO中产生的场景数据，并传送至路端数据处理模块；路端数据处理模块调用路端密钥管理模块内存储的对应密钥、加密函数、映射关系来对数据进行计算处理。9.根据权利要求8所述的仿真测试系统，其特征在于：所述路端数据处理模块包括路端解密单元、路端加密单元和路端计算单元；路端接收单元将云端密文或车辆密文传送到路端解密单元内，路端解密单元调用路端密钥管理模块内存储的对应密钥、加密函数、映射关系来解密接收到的车辆密文或是云端密文，并将解密后得到的明文发送至路端计算单元；路端计算单元调用路端密钥管理模块内存储的对应密钥、加密函数、映射关系，对收到的明文进行计算处理，并根据计算处理的结果调整路端测试子系统中传输单元采集的场景数据、输出的场景数据；传输单元将场景数据输出至路端加密单元，路端加密单元调用路端密钥管理模块内存储的对应密钥、加密函数、映射关系来将收到的场景数据加密成路端密文，传送至路端发送单元。10.据权利要求9所述的仿真测试系统，其特征在于：路端计算单元将接收到的明文中的新密钥传送至路端密钥管理模块中进行存储。
说明书desc
技术领域本发明属于车联网技术领域，尤其涉及一种车联网量子密钥加密通信的仿真测试系统。背景技术车联网技术通过车辆搭载传感器、控制器等装置，融合通信技术，实现车辆与X的信息交换与共享。车联网技术是实现车辆复杂环境感知、智能决策、协同控制等功能的基石。通信作为车联网的重要环节，车联网需要通过安全可靠的信息传输机制来确保通信安全进而确保车辆安全、交通安全、人身安全，所以如何保障通信安全就成为车联网技术领域中的研究热点。现有技术中常通过使用各种加密算法来加密通信网络来保障车联网通信安全，即通信发起端将明文通过特定的加密函数被加密为密文后发出，通信接收端解密后才能得到明文消息。但近年来，随着各种超级计算机的出现，许多较为简单的加密算法被破解。为了保证车联网通信的安全性，技术人员从各方面对加密算法进行改进，例如增加加密算法的密钥长度、使用多种加密算法相结合的加密体系，或是生成量子随机数作为真随机数密钥等等。这些改进后的加密算法在提高安全性的同时，也会带来巨大的通信开销、计算开销以及内存占用的问题。新的通信加密算法需要在正式投入使用前，需要先进行测试，确认能够正常使用该加密算法的车辆最低配置、该加密算法在不同规模/场景车联网中的使用情况等。使用真车来进行测试，成本太高；并且在真实场景中进行例如自动驾驶功能的测试时，若因加密通信而产生的巨大的资源消耗，致使车辆应用卡顿，无法预判路况，就有可能造成严重的交通事故，严重威胁到人身安全，造成巨大经济损失。发明内容本发明的目的是克服上述现有技术的不足，提供一种车联网量子密钥加密通信的仿真测试系统，能够对车联网的加密通信方法进行高效、低成本的仿真测试。为实现上述目的，本发明采用了以下技术方案：一种车联网量子密钥加密通信的仿真测试系统，包括：进行通信交互的车辆测试子系统和云端测试子系统；车辆测试子系统包括电子控制器模拟模块、车辆数据处理模块和车辆密钥管理模块，所述电子控制器模拟模块用于模拟车辆行驶，并将行车数据输出至车辆数据处理模块；所述车辆数据处理模块调用所述车辆密钥管理模块中的密钥和加密函数将接收到的行车数据加密成车辆密文后发送至云端测试子系统；云端测试子系统包括云端通信模块、云端数据处理模块、云端密钥模块以及云端数据库，所述云端通信模块用于接收车辆测试子系统发送来的车辆密文，并将车辆密文发送至云端数据处理模块，或用来发送云端数据处理模块生成的云端密文；云端数据库内存储密钥、加密函数和映射关系；云端密钥模块生成云端密钥并储于云端数据库内，且云端密钥模块将云端数据库内的对应密钥、加密函数调用给云端数据处理模块；云端数据处理模块使用云端密钥模块提供的对应密钥、加密函数对车辆密文进行解密和计算处理，并将计算生成的明文加密成云端密文后发送至云端通信模块。优选的，所述电子控制器模拟模块内搭载Prescan软件和/或SUMO软件来进行车辆的模拟驾驶，产生行车数据；电子控制器模拟模块内还包括若干个并行的传输单元，一个传输单元采集并传输一辆测试车辆的行车数据，各传输单元采集行车数据并打包传输至车辆数据处理模块中。优选的，所述传输单元包括顺序连接的采集子单元、打包子单元、时间控制子单元以及发送子单元；所述采集子单元包括一个输入端口和若干个输出端口，行车数据从输入端口进入采集子单元，各输出端口只输出一种数据，输出端口与打包子单元相连接；所述打包子单元用于将输出端口的数据打包成数据包，并输送至时间控制子单元内；所述时间控制子单元内将设定时间间隔后的时刻所收到的数据包传输至发送子单元内，其余时刻时间控制子单元若接收到数据包，则丢弃；发送子单元内预先设定好数据包的接收地址和接收端口，发送子单元收到数据包后立刻将数据包发送至对应的接收地址和接收端口。优选的，所述车辆数据处理模块包括数据接收单元、数据加密单元、数据解密单元、数据发送单元、数据计算单元；数据接收单元包括车辆数据处理模块服务器上的各端口，数据接收单元中的端口接收所述发送子单元所发送来的数据包，并将数据包直接发送至数据加密单元；或数据接收单元将接收到的数据包发送至数据计算单元；或数据接收单元将接收到的云端密文发送至数据解密单元；当数据接收单元将接收到的数据包直接发送至数据加密单元时，数据加密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将接收到的数据包加密成车辆密文后，传输至数据发送单元；当数据接收单元将接收到的数据包发送至数据计算单元，数据计算单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系计算出相应的车联网请求信息，并将车联网请求信息传输至数据加密单元，数据加密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将接收到的车联网请求信息加密成车辆密文后，传输至数据发送单元；当数据接收单元接收到的是云端密文时，数据接收单元将云端密文发送至数据解密单元，数据解密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将云端密文解密成明文，并将解密后得到的明文发送至数据计算单元作为反馈；数据计算单元对收到的明文进行计算处理，并基于计算处理的结果调整各车辆传输单元采集所输出的数据类型；数据计算单元对数据接收单元传送来的新的数据包进行计算处理，生成新一轮车联网请求信息并传输至数据加密单元，数据加密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将新一轮车联网请求信息加密成车辆密文后，传输至数据发送单元；数据发送单元通过MQTT通信协议将车辆密文发送至通信接收方。优选的，云端通信模块包括云端接收单元和云端发送单元，云端接收单元通过MQTT通信协议接收车辆测试子系统中数据发送单元发送来的车辆密文，并将车辆密文传输至云端数据处理模块中；云端发送单元通过MQTT通信协议来将云端数据处理模块生成的云端密文发送至车辆数据处理模块内的数据接收单元；云端密钥模块包括云端密钥生成单元和云端密钥管理单元，云端密钥生成单元通过量子随机数发生器生成云端密钥，并将生成的云端密钥传输至云端密钥管理单元；云端密钥管理单元将云端密钥、加密函数存储在云端数据库内，并对云端数据库内存储的各种密钥、加密函数以及映射关系进行调用。优选的，云端数据处理模块包括云端解密单元、云端加密单元和云端计算单元；云端解密单元接收云端接收单元发送来的车辆密文后，通过云端密钥管理单元调用云端数据库内的对应密钥对车辆密文进行解密，并将解密后得到的明文传送到云端计算单元；云端计算单元通过云端密钥管理单元调用云端数据库内的对应密钥、加密函数和绑定关系对明文进行身份验证、计算处理后得到相应的车联网服务信息，并将车联网服务信息传输至云端加密单元；云端加密单元通过云端密钥管理单元调用云端数据库内的对应密钥、加密函数来将车联网服务信息加密成云端密文，并传送至云端发送单元。优选的，仿真测试系统还包括与车辆测试子系统、云端测试子系统进行信息交互的路端测试子系统；车辆数据处理模块中的数据接收单元还接收路端测试子系统发来的路端密文，数据解密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系来将路端密文解密成明文，并将明文发送至数据计算单元，数据计算单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系对收到的明文进行计算处理，并基于计算处理的结果调整各车辆传输单元采集所输出的数据类型；数据计算单元对数据接收单元传送来的新的数据包进行计算处理，生成新一轮车联网请求信息并传输至数据加密单元，数据加密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将新一轮车联网请求信息加密成车辆密文后，传输至数据发送单元；车辆数据处理模块中的数据发送单元通过MQTT通信协议将车辆密文发送至路端测试子系统中；云端接收单元还接收路端测试子系统发来的路端密文；云端发送单元也向路端测试子系统发送云端密文。优选的，路端测试子系统包括路端传输单元、路端数据处理模块、路端密钥管理模块以及路端通信模块；路端通信模块包括路端发送单元和路端接收单元，路端接收单元通过MQTT通信协议接收车辆测试子系统中的数据发送单元发送来的车辆密文，或接收云端发送单元发送来的云端密文，并将接收到的密文输至路端数据处理模块中；路端发送单元通过MQTT通信协议来将路端数据处理模块中产生的路端密文发送至车辆测试子系统中的数据接收单元或云端测试子系统中的云端接收单元；若干个路端传输单元采集并传输电子控制器模拟模块中Prescan和/或SUMO中产生的场景数据，并传送至路端数据处理模块；路端数据处理模块调用路端密钥管理模块内存储的对应密钥、加密函数、映射关系来对数据进行计算处理。优选的，所述路端数据处理模块包括路端解密单元、路端加密单元和路端计算单元；路端接收单元将云端密文或车辆密文传送到路端解密单元内，路端解密单元调用路端密钥管理模块内存储的对应密钥、加密函数、映射关系来解密接收到的车辆密文或是云端密文，并将解密后得到的明文发送至路端计算单元；路端计算单元调用路端密钥管理模块内存储的对应密钥、加密函数、映射关系，对收到的明文进行计算处理，并根据计算处理的结果调整路端测试子系统中传输单元采集的场景数据、输出的场景数据；传输单元将场景数据输出至路端加密单元，路端加密单元调用路端密钥管理模块内存储的对应密钥、加密函数、映射关系来将收到的场景数据加密成路端密文，传送至路端发送单元。优选的，路端计算单元将接收到的明文中的新密钥传送至路端密钥管理模块中进行存储。本发明的有益效果在于：本发明的车联网量子密钥加密通信的仿真测试系统通过车辆测试子系统来模拟不同数量的测试车辆与不同测试场景；并且车辆测试子系统通过搭载Prescan、SUMO模拟出各种测试车辆和测试场景，再通过Simulink建立的传输单元，直接获取Prescan和SUMO中产生的行车数据，代替了车辆电子控制器单元的真实硬件，实现对特定加密通信方法进行测试的同时，大大降低了对于加密通信方法的测试成本，提高加密通信方法的测试效率。本发明中车辆测试子系统通过搭载Prescan、SUMO模拟出各种测试场景，可以测试出当前的加密通信方法是否可以顺利地应用于各种车辆行驶场景中；车辆测试子系统还可以通过Prescan、SUMO模拟出当前加密通信方法是否可以顺利地使用在特定型号的车辆上，即测定出可以顺利使用当前加密通信方法的车辆的软、硬件最低标准，作为当前加密通信算法通用性与普适性评价的重要参考；Prescan、SUMO模拟出各种随机测试场景，增加当前车联网加密算法使用场景的随机性，更贴近现实。本发明车辆测试子系统还可以通过Prescan、SUMO改变测试车辆的数量，即改变测试车辆规模，通过分析不同规模车辆与云端之间使用当前加密通信算法所对应的通信开销、计算开销，测定各云端服务器所能够服务的车辆最大数量，或各云端服务器所能提供最优服务的车辆最大数量，这些标定是当前加密通信算法的经济性、实用性评价的重要参考；增加传输单元中与打包子单元所连接的输出端口数量，即增加数据包内的数据量，可以加使用当前加密通信算法所进行加解密的数据量，增大通信开销与计算开销，本发明可以将车联网通信加密算法在大规模车云数据中进行测试。本发明本发明的车辆测试子系统改变车辆规模、使用不同的通信加密算法进行仿真测试，可以测试出与本发明中的云端测试子系统配置相同的云端服务器的抗压能力、稳定性以及最大数据吞吐量，促进云端服务器的研发工作，提供更好地车联网服务。本发明本发明包含路端测试子系统，更贴近现实中的车辆网使用场景；同时路端测试子系统可根据测试需求决定是否参与仿真测试，使对通信加密方法的测试更为灵活多样。本发明中路端测试子系统通过传输单元直接采集车辆测试子系统中Prescan、SUMO模拟出的场景数据，不仅保证了路端测试子系统所采集的场景数据与车辆测试子系统中测试车辆所在的场景一致，完全还原了真实的多个路侧单元采集路况等场景数据的功能；并且本发明不需要任何真实的路侧单元硬件参与仿真测试，进一步降低了对通信加密方法进行仿真测试的成本。本发明的仿真测试系统在不同车辆网场景下，测试出各种通信加密算法与量子密钥结合的加解密速度、加解密性能的稳定性，为车联网在不同场景中选择最优通信加密算法的研究领域开疆扩土；本发明中引入了路端测试子系统对通信加密方法进行测试，增加了数据量，进一步增加了通信开销与计算开销的量级，可以在本发明的仿真测试中观测到测试量级的提升对于通信加密方法性能的影响，并使对当前通信加密方法的测试可以更为真实地反应出极端条件下的通信加密方法与本发明仿真测试系统中配置相同的云端、车辆、路侧单元的适配程度，为后续通信加密方法的优化、真实路侧单元的设置规划、云端服务器的服务对象规划奠定基础。附图说明图1为本发明的第一种车联网量子密钥加密通信的仿真测试系统的模块架构示意图；图2为本发明的车辆传输单元或路端传输单元中的信号传输示意图；图3为本发明的第二种车联网量子密钥加密通信的仿真测试系统的模块架构示意图。具体实施方式为使本发明的技术方案更加清晰明确，下面结合附图对本发明进行清楚、完整地描述，本领域普通技术人员在没有做出创造性劳动前提下对本发明技术方案的技术特征进行等价替换和常规推理得出的方案均落入本发明的保护范围。实施例1如图1所示，为本发明的第一种车联网量子密钥加密通信的仿真测试系统，包括车辆测试子系统和云端测试子系统，车辆测试子系统与云端测试子系统之间进行车联网信息交互。1、车辆测试子系统车辆测试子系统包括电子控制器模拟模块、车辆数据处理模块、车辆密钥管理模块。电子控制器模拟模块用于模拟车辆行驶，并采集行车数据输出至车辆数据处理模块，车辆数据处理模块使用车辆密钥管理模拟提供的量子密钥和加密函数将接收到的行车数据进行加密后发送至云端测试子系统。电子控制器模拟模块内搭载Prescan软件和SUMO软件来进行车辆的模拟驾驶，并联合Simulink仿真获取车辆在模拟驾驶中的行车数据。Prescan是一款来实现对无人驾驶车辆进行软件在环、硬件在环检测的软件，可以生成各种测试场景和测试车辆；SUMO是一款交通仿真软件，可以生成交通流，电子控制器模拟单元通过Prescan软件和SUMO软件搭建出车辆驾驶过程中的各种场景，来进行车辆的模拟驾驶。将测试场景的数据定义为场景数据，如自然环境、道路情况等。将测试车辆在模拟驾驶中产生的数据定义为驾驶数据，如实时车速、油箱油量、所在位置等。将测试车辆本身所固有的信息定义为车辆数据，如车辆型号、车辆尺寸等。场景数据、驾驶数据和车辆数据都属于行车数据。因为Prescan和SUMO不具备将行车数据输出的功能，所以电子控制器模拟模块内使用Simulink搭建车辆传输单元，该车辆传输单元基于TCP/IP传输协议，将Prescan和SUMO中产生的行车数据打包传输至车辆数据处理模块中。电子控制器模拟模块中包含若干个并行的车辆传输单元，一个车辆传输单元用来传输一辆测试车辆的行车数据，即本电子控制器模拟模块可以同时输出一个测试场景中的多个测试车辆的行车数据。如图2所示，为传输单元中的信号传输示意图。传输单元包括顺序连接的采集子单元、打包子单元、时间控制子单元以及发送子单元。采集子单元包括一个输入端口和若干个输出端口，行车数据从输入端口进入采集子单元后，从对应的输出端口输出，各输出端口只输出一种数据；部分输出端口与打包子单元相连接，将数据输出至打包子单元中进行打包，打包后的数据包被输送至时间控制子单元内。时间控制子单元将特定时间间隔后的时刻所收到的数据包传输至发送子单元内，在其他时刻若时间控制子单元若接收到数据包，则丢弃。发送子单元内预先设定好数据包的接收地址和接收端口，发送子单元收到数据包后就立刻将数据包发送至对应的接收地址和接收端口。在本实施例的图2中，采集子单元包括13个输出端口，从上至下依次输出：x；y；z；Rotx；Roty；Rotz；GPS lat；GPSlong；GPSalt；Velocity；Heading；Yaw rate；Timestamp。本实施例选择GPS lat、GPS long、GPS alt、Velocity、Heading、Yaw rate的输出端口与打包子单元相连接。采集子单元的输出端口还可以输出测试场景的自然环境、测试场景的路况、测试车辆的执行动作等。采集子单元的输出端口数量、输出数据类型由技术人员在测试前预先设定好，这不作为对本发明的限制。预先设定好部分或全部输出端口与打包子单元相连接。时间控制子单元内设置有时钟信号源可以产生时钟信号，时钟信号的高低电平分布时间是技术人员预先设定好的，高电平时，时间控制子单元与发送子单元之间为通路，该时刻时间控制子单元内的数据包可以被传输至发送子单元内，低电平时，时间控制子单元丢弃接收到的数据包。发送子单元中需要预先设定好数据包的接收地址和接收端口，本发明中的接收地址为车辆数据处理模块的服务器地址，接收端口为车辆数据处理模块服务器上的一个端口。一个接收地址上存在不少于一个端口。在真实车辆中有许多的ECU，各个ECU利用传感器监测车内状态、获取车辆周围的环境数据，并总线进行数据交换，来判断车辆状态以及司机的意图并通过执行器来操控汽车。本发明中的电子控制器模拟模块通过搭载Prescan、SUMO模拟出各种测试车辆和测试场景，再通过Simulink建立的车辆传输单元，直接获取Prescan和SUMO中产生的行车数据，并打包发送至车辆数据处理模块。相较于现有技术中的硬件在环测试系统，本发明直接采集Prescan和SUMO所产生的行车数据至车辆数据处理模块，以软件替代测试车辆中的真实传感器、ECU、执行器等硬件采集并上传数据的功能，不需要任何真实的ECU硬件，节约了成本；并且本发明的电子控制器模拟模块通过搭载软件，替代了使用大量的真实车辆在不同场景中的测试，进一步降低了车联网通信加密测试的经济成本、节约了人力。如图1所示，车辆密钥管理模块可以被充注密钥，且车辆密钥管理模块还可以接收并存储云端测试子系统下发的云端密钥、加密函数、映射关系，以便于车辆数据处理模块调用。映射关系指的是各种密钥、加密函数和各车辆数据之间的绑定关系。车辆密钥管理模块内还设置有量子密服引擎，可根据需要生成量子随机数作为车端密钥。车辆密钥管理模块内不止包括车端密钥，还包括云端密钥等其他密钥。车辆数据处理模块包括数据接收单元、数据加密单元、数据解密单元、数据发送单元、数据计算单元。数据接收单元由车辆数据处理模块服务器上各端口构成，这些端口为TCP服务端。数据接收单元包括两种接收不同数据的端口：用来接收车辆传输单元所发送来的数据包的端口、用来接收云端测试子系统下发的云端密文的端口。其中，用来接收传输单元所发送来的数据包的端口里，一个端口只接收一个对应车辆传输单元所发送来的数据包。各数据接收单元内的时间控制子单元可根据测试需求设定发送数据包的时间间隔，数据接收单元内的端口接收各车辆传输单元数据包的过程互不干扰。数据接收单元将接收到的数据包直接发送至数据加密单元；或数据接收单元将接收到的数据包发送至数据计算单元；或数据接收单元将接收到的云端密文发送至数据解密单元。为便于区分，数据接收单元将接收到的数据包直接发送至数据加密单元或数据接收单元将接收到的数据包发送至数据计算单元，使用实线表示数据传输流向；数据接收单元将接收到的云端密文发送至数据解密单元，使用点划线“﹎﹎﹎”表示；调用关系用虚线表示。当数据接收单元将接收到的数据包直接发送至数据加密单元时，数据加密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将接收到的数据包加密成车辆密文后，传输至数据发送单元。当数据接收单元将接收到的数据包发送至数据计算单元，数据计算单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系计算出相应的车联网请求信息，将车联网请求信息传输至数据加密单元，数据加密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将接收到的车联网请求信息加密成车辆密文后，传输至数据发送单元。车联网请求信息的内容可以是身份认证请求、通信请求、密钥请求、路线规划请求等。当数据接收单元接收到的是云端密文时，数据接收单元将云端密文发送至数据解密单元，数据解密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系来解密接收到的云端密文，并将解密后得到的明文发送至数据计算单元作为反馈；数据计算单元对收到的明文进行计算处理，并基于计算处理的结果调整各车辆传输单元采集所输出的数据类型，并根据数据接收单元传送来的新的数据包，数据计算单元对数据接收单元传送来的新的数据包进行计算处理，生成新一轮车联网请求信息并传输至数据加密单元，数据加密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系将新一轮车联网请求信息加密成车辆密文后，传输至数据发送单元。数据解密单元在将云端密文解密成明文后，发送至数据计算单元的过程中，若明文中存在新的密钥信息，数据计算单元会将新的密钥传送至车辆密钥管理模块中进行存储，以备调用，该数据传输流向未在图1中画出。例如数据计算单元内的明文中包含一个云端密钥，该云端密钥在车辆密钥管理模块内从未出现过，并用于后续的车辆和云端之间真实建立通信过程中的信息加解密，则数据计算单元将这个新的密钥传送至车辆密钥管理模块中进行存储，以备调用。数据发送单元通过MQTT通信协议将车辆密文发送至云端测试子系统。MQTT通信协议用于在低带宽和高延迟的不可靠网络中进行相对可靠的数据传输。车辆数据处理模块具有无线通信能力，通过调用车辆密钥管理模块将电子控制器模拟模块发送来的数据包加密成车辆密文后发送至通信接收方，或对接收到的云端密文进行解密。其中，通信接收方包括但不限于云端通信模块。2、云端测试子系统云端测试子系统包括云端通信模块、云端密钥模块、云端数据处理模块、云端数据库。云端通信模块包括云端接收单元和云端发送单元，云端接收单元通过MQTT通信协议接收车辆测试子系统发送来的车辆密文，并将车辆密文传输至云端数据处理模块中。云端发送单元通过MQTT通信协议来将云端密文发送至车辆测试子系统中。云端密钥模块包括云端密钥生成单元和云端密钥管理单元。云端密钥生成单元通过量子随机数发生器生成云端密钥，并将生成的云端密钥传输至云端密钥管理单元。云端密钥管理单元负责将云端密钥、加密函数存储在云端数据库内，或是对云端数据库内的对应的密钥、加密函数以及各密钥、加密函数和各车辆数据的映射关系进行调用。云端数据库内的密钥不仅包括云端密钥，还包括车辆上传的车端密钥等。云端数据处理模块包括云端解密单元、云端加密单元、云端计算单元。云端解密单元接收云端接收单元发送来的车辆密文后，通过云端密钥管理单元调用云端数据库内的对应密钥对车辆密文进行解密，并将解密后得到的明文传送到云端计算单元；云端计算单元对明文进行身份验证，验证过程中可以通过云端密钥管理单元调用云端数据库内的对应密钥、加密函数和各测试车辆的绑定关系来协助验证，云端计算单元根据验证合格的明文进行分析、计算、处理后，得到相应的车联网服务信息，将车联网服务信息传输至云端加密单元；若云端计算单元中存在新的密钥信息，云端计算单元会将新的密钥传送至云端密钥管理单元，再由云端密钥管理单元将该新密钥存储至云端数据库内以备调用，该数据传输流向未在图1中画出。例如，云端计算单元中存在新的密钥信息的情况与上述的数据计算单元内明文中包括新的密钥的情况类似，这里不再重复解释。当明文消息是路线规划请求时，云端计算单元生成的车联网服务信息内容就是路线规划；同理，当明文消息是身份认证请求时，云端计算单元就生成相应身份认证内容的车联网服务信息。云端计算单元基于行车数据获得车辆的经纬度、海拔高度、速度和航向角，通过分析经纬度，可以获得测试车辆的实时地理位置，预测该车辆到达目的地的时间，并结合行车数据预测车辆行驶过程中的交通拥挤程度，向测试车辆发布换道或避让信息；或云端计算单元通过分析被测车辆的速度，结合测试场景的限速信息，向测试车辆发布限速预警，并对测试车辆进行监管；或云端计算单元通过分析测试车辆的航向角，判定测试车辆是否处于危险状态，是否需要进行紧急救助等。这些均属于车联网服务信息的内容。云端加密单元通过云端密钥管理单元调用云端数据库内的对应密钥、加密函数来将车联网服务信息进行加密成云端密文，并传送至云端发送单元；云端发送单元将云端密文发送至车辆测试子系统中的数据接收单元中。云端数据库内存储各种密钥、加密函数和车辆数据的绑定关系。云端数据库内的绑定关系一部分是被预先充注到云端数据库内的，一部分绑定关系是云端数据处理模块在处理数据的过程中生成并存储的。下面对上述车联网量子密钥加密通信的仿真测试系统的使用方法进行描述：使用场景：需要对车联网通信加密方法F1在云端和车辆的通信过程中进行测试。S1，将通信加密方法F1的预置密钥、预置加密函数预先充注进车辆密钥管理模块和云端数据库，在数据计算单元和云端计算单元中预设好通信加密方法F1；S2，在电子控制器模拟模块中预设好测试场景和测试车辆，在车辆传输单元中预设好采集的行车数据，开始通信加密方法F1的仿真测试；S3，车辆测试子系统与云端测试子系统进行信息交互，包括基于通信加密方法F1的身份认证过程与会话过程等；S4，改变电子控制器模拟模块中的测试场景和测试车辆的数量、型号，得到车辆测试子系统与云端测试子系统不同的通信开销、计算开销和内存占用情况；S5，根据通信开销、计算开销和内存占用情况这些性能数据，来调整使用通信加密方法F1的车辆和云端参数。本发明具备以下五个方面的优点：一、本发明的车联网量子密钥加密通信的仿真测试系统通过车辆测试子系统来模拟不同数量的测试车辆与不同测试场景；并且车辆测试子系统通过搭载Prescan、SUMO模拟出各种测试车辆和测试场景，再通过Simulink建立的车辆传输单元，直接获取Prescan和SUMO中产生的行车数据，代替了车辆电子控制器单元的真实硬件，实现对特定加密通信方法进行测试的同时，大大降低了对于加密通信方法的测试成本，提高加密通信方法的测试效率。二、车辆测试子系统通过搭载Prescan、SUMO模拟出各种测试场景，可以测试出当前的加密通信方法是否可以顺利地应用于各种车辆行驶场景中；车辆测试子系统还可以通过Prescan、SUMO模拟出当前加密通信方法是否可以顺利地使用在特定型号的车辆上，即测定出可以顺利使用当前加密通信方法的车辆的软、硬件最低标准，作为当前加密通信算法通用性与普适性评价的重要参考；Prescan、SUMO模拟出各种随机测试场景，增加当前车联网加密算法使用场景的随机性，更贴近现实。三、车辆测试子系统还可以通过Prescan、SUMO改变测试车辆的数量，即改变测试车辆规模，通过分析不同规模车辆与云端之间使用当前加密通信算法所对应的通信开销、计算开销，测定各云端服务器所能够服务的车辆最大数量，或各云端服务器所能提供最优服务的车辆最大数量，这些标定是当前加密通信算法的经济性、实用性评价的重要参考；增加车辆传输单元中与打包子单元所连接的输出端口数量，即增加数据包内的数据量，可以加使用当前加密通信算法所进行加解密的数据量，增大通信开销与计算开销，本发明可以将车联网通信加密算法在大规模车云数据中进行测试。四、本发明的车辆测试子系统改变车辆规模、使用不同的通信加密算法进行仿真测试，可以测试出与本发明中的云端测试子系统配置相同的云端服务器的抗压能力、稳定性以及最大数据吞吐量，促进云端服务器的研发工作，提供更好的车联网服务。五、本发明的仿真测试系统对车联网加密通信算法使用过中的各种相关标定进行了测定与摸底，在不同车辆网场景下，测试出各种通信加密算法与量子密钥结合的加解密速度、加解密性能的稳定性，为车联网在不同场景中选择最优通信加密算法的研究领域开疆扩土；本发明的仿真测试系统可以测试同一指标下的不同量级对于同一通信加密算法的性能影响，反映出进行测试的车联网加密算法的不足之处，也促进了车联网加密通信算法的优化。实施例2如图3所示，为本发明的第二种车联网量子密钥加密通信的仿真测试系统，包括进行信息交互的车辆测试子系统、云端测试子系统以及路端测试子系统。本实施例与实施例1的区别在于，车辆测试子系统中产生的场景数据不再通过电子控制器模拟模块中所设置的车辆传输单元，被加密传送至云端测试子系统中，而是被传输至路端测试子系统中，模拟现实中用于对路况、交通流等场景数据进行监测的路侧单元。实际的路侧单元安装于路侧杆件上，与路侧感知设备、交通信号灯、电子标牌、摄像头等终端通信，实现车路、车云互联互通的功能。本实施例中的车辆测试子系统、云端测试子系统与实施例1的模块构成基本相同，仅在数据传输部分有不同，相同部分不再赘述，下面仅描述不同的部分：1、车辆测试子系统本实施例中，车辆传输单元只采集和传输驾驶数据和车辆数据，不采集场景数据。车辆数据处理模块中的数据接收单元还接收路端测试子系统发来的路端密文。当数据接收单元接收到的是路端密文时，数据接收单元将路端密文发送至数据解密单元，数据解密单元调用车辆密钥管理模块内存储的对应密钥、加密函数、映射关系来解密接收到的路端密文，并将解密后得到的明文发送至数据计算单元作为反馈；数据计算单元对收到的明文进行计算处理，生成下一轮车联网请求信息并传输至数据加密单元。数据解密单元将路端密文解密成明文后，发送至数据计算单元，若明文中存在新的密钥信息，数据计算单元会将新的密钥传送至车辆密钥管理模块中进行存储，以备调用，该数据传输流向未在图3中画出。车辆数据处理模块中的数据发送单元通过MQTT通信协议将车辆密文发送至路端测试子系统中的路端接收单元。2、云端测试子系统云端接收单元还接收路端测试子系统发来的路端密文。云端发送单元也向路端测试子系统发送云端密文。3、路端测试子系统路端测试子系统包括路端传输单元、路端数据处理模块、路端密钥管理模块以及路端通信模块。路端通信模块包括路端发送单元和路端接收单元，路端接收单元通过MQTT通信协议接收车辆测试子系统中的数据发送单元发送来的车辆密文，或接收云端发送单元发送来的云端密文，并将接收到的密文输至路端数据处理模块中的路端解密单元；路端发送单元通过MQTT通信协议来将路端密文发送至车辆测试子系统中的数据接收单元或云端测试子系统中的云端接收单元。路端测试子系统中包含若干个路端传输单元，一个路端传输单元表示一个路侧单元设备进行场景数据采集所用的传感器等硬件总和。路端传输单元的具体架构和功能如图2所示，与实施例1中车辆传输单元相同，已在实施例1中详细描述，这里不再赘述。路端测试子系统中的路端传输单元采集和传输电子控制器模拟模块中Prescan和SUMO中产生的场景数据，各路端传输单元采集测试场景中不同地点的场景数据后，传送至路端加密单元中。路端密钥管理模块内存储各种密钥、加密函数、映射关系，以供路端数据处理单元进行调用。路端密钥管理模块内存储的密钥包括云端发送来的云端密钥，也可以存储来自车辆的车端密钥。路端数据处理模块包括路端解密单元、路端加密单元、路端计算单元。路端解密单元调用路端密钥管理模块内存储的密钥、加密函数、映射关系来解密接收到的车辆密文或是云端密文，并将解密后得到的明文发送至路端计算单元，路端计算单元调用路端密钥管理模块内存储的对应密钥、加密函数、映射关系，对收到的明文进行计算处理，并根据计算处理的结果调整路端传输单元采集的具体场景数据、输出的具体场景数据、采集频率等。路端解密单元将云端密文或车辆密文解密成明文后，发送至路端计算单元，若明文中存在新的密钥信息，路端计算单元会将新的密钥传送至路端密钥管理模块中进行存储，以备调用，该数据传输流向未在图3中画出。路端加密单元调用路端密钥管理模块内存储密钥、加密函数、映射关系来将收到的场景数据加密成路端密文，传送至路端发送单元。为便于区分，车辆测试子系统中的数据接收单元将接收到的数据包直接发送至数据加密单元或数据接收单元将接收到的数据包发送至数据计算单元，使用实线表示数据传输流向；数据接收单元将接收到的云端密文或路端密文发送至数据解密单元，使用点划线“﹎﹎﹎”表示；调用关系用虚线表示。下面结合场景对本实施例的车联网量子密钥加密通信的仿真测试系统的使用方法进行描述：需要对车联网通信加密方法F2在云端、车辆、路侧单元的通信过程中进行测试。测试前，将通信加密方法F2中需要预先充注的认证密钥K1、公钥P1、私钥P2、加密函数等充注在车辆测试子系统、云端测试子系统以及路端测试子系统中。车辆测试子系统中的电子控制器模拟模块通过Prescan和SUMO搭建车辆运行的仿真场景，车辆传输单元将Prescan和SUMO中产生的驾驶数据和车辆数据传输至车辆数据处理模块中。车辆数据处理模块中的车辆密钥管理模块使用认证密钥K1将数据和公钥P1进行加密后生成进行身份认证的车辆密文M1，并发送至云端测试子系统内。云端测试子系统内使用相应的认证密钥K1对车辆密文M1进行解密，得到公钥P1和驾驶数据、车辆数据的明文，并将明文传送至云端计算单元，以进行身份认证。云端计算单元的身份认证通过后，云端密钥生成单元生成会话密钥K3，并使用公钥P1加密会话密钥K3后返回车辆测试子系统中，车辆测试子系统使用对应的私钥P2解密，即可在数据计算单元中得到会话密钥P3，并存储于车辆密钥管理模块中。车辆测试子系统可以使用会话密钥K3与云端测试子系统建立正式的通信交互。路端测试子系统以相同的方式获取会话密钥K3，这里不再赘述。云端测试子系统为车辆测试子系统提供车辆网服务：车辆A希望以最快的速度到达目的地，于是车辆测试子系统中生成最快到达目的地的道路规划申请，并在数据加密单元中使用会话密钥K3后发送至云端测试子系统内。云端测试子系统接收到该道路规划申请后，使用会话密钥K3解密后，经云端计算单元的计算处理，得知车辆测试子系统中的车辆A希望以最快的速度到达目的地；云端计算单元生成采集场景数据的指令，并在云端加密单元内使用会话密钥K3加密后发送至路端测试子系统内。路端测试子系统使用会话密钥K3解密后，经路端计算单元的计算处理，得知云端希望得到车辆A到达目的地可能经过的路线上所有的路侧单元每隔10秒采集一次路况和气象。路端计算单元根据云端指令控制相应路端测试子系统内的路端传输单元采集特定的场景数据，即路况和气象，路端测试子系统使用会话密钥K3将路况信息加密后发送至云端测试子系统内。云端测试子系统不断地根据路端测试子系统上传的场景数据、车辆测试子系统所上传的车辆A的车辆数据和驾驶数据，预测车辆A途径中间地点的时间，以及该中间地点的交通拥挤程度，以便提前告知车辆A换道，并为车辆A重新规划最优道路。以上为仿真测试系统的使用方法中对车联网通信加密方法F2进行仿真测试的一个测试场景，不作为对本发明的限制。在通信过程中，云端测试子系统、路端测试子系统和车辆测试子系统之间存在大量的数据会被加密上传以及被接收后解密，技术人员可以根据本发明仿真测试系统在不同场景中的测试，得到云端测试子系统、路端测试子系统和车辆测试子系统不同的通信开销、计算开销和内存占用情况这些性能数据，并根据这些性能数据来进行通信加密方法F2的优化，在实施例1的基础上还具备为优化现实中路侧单元的布置密度、布置方式提供参考的优点。本发明在实施例1的基础上还具备以下三个优点：一、本发明包含路端测试子系统，更贴近现实中的车辆网使用场景；同时路端测试子系统可根据测试需求决定是否参与仿真测试，使对通信加密方法的测试更为灵活多样。二、路端测试子系统通过路端传输单元直接采集车辆测试子系统中Prescan、SUMO模拟出的场景数据，不仅保证了路端测试子系统所采集的场景数据与车辆测试子系统中测试车辆所在的场景一致，完全还原了真实的多个路侧单元采集路况等场景数据的功能；并且本发明不需要任何真实的路侧单元硬件参与仿真测试，进一步降低了对通信加密方法进行仿真测试的成本。三、本发明中引入了路端测试子系统对通信加密方法进行测试，增加了数据量，进一步增加了通信开销与计算开销的量级，可以在本发明的仿真测试中观测到测试量级的提升对于通信加密方法性能的影响，使对当前通信加密方法的测试可以更为真实地反应出极端条件下的通信加密方法与本发明仿真测试系统中配置相同的云端、车辆、路侧单元的适配程度，为后续通信加密方法的优化、真实路侧单元的设置规划、云端服务器的服务对象规划奠定基础。本发明未详细描述的技术、形状、构造部分均为公知技术。
