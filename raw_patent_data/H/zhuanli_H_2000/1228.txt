标题title
负载均衡系统中的主动健康检查方法、装置、设备及介质
摘要abst
本发明公开了一种负载均衡系统中的主动健康检查方法、装置、设备及介质，包括：获取后端服务器的健康状态变化，当感知到后端服务器发生上报状态变化时，将当前产生的上报变化信息同步至RS状态管理模块；判断是否到达下一次检查间隔，根据预设间隔检查周期算法对下一次检查间隔进行实时更新以动态调整检查间隔；基于当前后端服务器的健康状态信息以及更新后的检查间隔信息判断当下是否执行探测动作。基于当前后端服务器自身的状态反馈以及主动健康检查的历史结果，动态调整检查间隔，来决定下一次发送探测请求的时间点，这样一定程度上缓减负载均衡器以及后端服务器的探测压力，并且可以及时探测到状态的改变。
权利要求书clms
1.一种负载均衡系统中的主动健康检查方法，其特征在于，包括：从负载均衡系统向后端服务器发送主动探测请求，获取后端服务器健康状态变化并将后端服务器的健康状态信息同步上报至主动健康检查模块，对后端服务器的健康状态进行管理；所述后端服务器的健康状态至少包括网卡状态和服务端口的状态；获取后端服务器的健康状态变化，当负载均衡系统感知到所述后端服务器发生上报状态变化时，将当前产生的上报变化信息同步至RS状态管理模块，并传输至主动健康管理模块；接收后端服务器的健康状态历史结果，并判断是否到达下一次检查间隔，在到达该检查间隔时，根据预设间隔检查周期算法对下一次检查间隔进行实时更新以动态调整检查间隔；基于当前后端服务器的健康状态信息以及更新后的检查间隔信息判断当下是否执行探测动作。2.如权利要求1所述的负载均衡系统中的主动健康检查方法，其特征在于，所述判断是否到达下一次检查间隔，在到达该检查间隔时，根据预设间隔检查周期算法对下一次检查间隔进行实时更新以动态调整检查间隔包括：将预设的探测周期时间划分为第一检查时段、第二检查时段、第三检查时段和第四检查时段；在所述第一检查时段按照起始检查间隔进行慢启动检查，在当前时段连续检查结果均相同，且连续检查达到预设的第一探测轮次阈值时，对下一次检查间隔进行第一次更新，且更新的检查间隔呈缓慢增长趋势；在到达所述第二检查时段时，按照当前更新后的检查间隔进行下一阶段的检查，在当前时段连续检查结果均相同，且连续检查达到预设的第二探测轮次阈值时，对下一次检查间隔进行第二次更新，且更新的检查间隔呈指数级增长趋势；在到达所述第三检查时段时，按照当前更新后的检查间隔进行下一阶段的检查，在当前时段连续检查结果均相同，且连续检查达到预设的第三探测轮次阈值时，对下一次检查间隔进行第三次更新，且更新的检查间隔呈预设间隔量增长趋势；在达到所述第四检查时段时，则在下一次探测轮次中初始化至慢启动检查阶段继续循环；其中，所述第一检查时段为起始检查间隔，所述第四检查时段为预设的探测周期时间阈值。3.如权利要求2所述的负载均衡系统中的主动健康检查方法，其特征在于，所述第一探测轮次阈值＞所述第二探测轮次阈值＞所述第三探测轮次阈值＞所述第四探测轮次阈值，且从第一检查时段至所述第四检查时段的探测轮次数量依次减小。4.如权利要求2所述的负载均衡系统中的主动健康检查方法，其特征在于，当从第一检查时段至所述第四检查时段任意时段探测得到连续检查结果不相同时，显示当前后端服务器的健康状态发生改变，则重新初始化进入慢启动检查阶段。5.如权利要求1所述的负载均衡系统中的主动健康检查方法，其特征在于，所述基于当前后端服务器的健康状态信息以及更新后的检查间隔信息判断当下是否执行探测动作包括：判断是否到达预设的检查间隔，若到达预设的检查间隔而触发的探测请求，则根据检查间隔管理模块的预设间隔检查周期算法进行下一次的间隔更新；和/或，当后端服务器的健康状态发生变化而触发主动健康检查模块进行判断是否需要立刻进行探测请求，则对下一次的检查间隔进行重置并初始化；其中，后端服务器的健康状态发生变化包括配置有icmp检查且后端相关地址状态发生变化、配置有http、tcp以及udp检查且后端相关端口发生变化。6.如权利要求5所述的负载均衡系统中的主动健康检查方法，其特征在于，所述基于当前后端服务器的健康状态信息以及更新后的检查间隔信息判断当下是否执行探测动作进一步包括：当后端服务器的健康状态发生变化的情况下，将变化信息分别传输至ICMP端口进行检查和TCP端口进行检查；判断相应的地址状态和端口状态是否发生变化；在相应的地址状态和端口状态发生变化时，将检查间隔更新至初始化时间。7.如权利要求1所述的负载均衡系统中的主动健康检查方法，其特征在于，所述判断是否到达下一次检查间隔，在到达该检查间隔时，根据预设间隔检查周期算法对下一次检查间隔进行实时更新以动态调整检查间隔进一步包括：同步启动被动检查机制，在当前检查间隔大于预设的检查间隔阈值的情况下，如果后端服务器的健康状态为正常，且后端服务器处理业务请求连续失败的次数超出请求失败阈值时，则将当前后端服务器的健康状态改变为失败。8.一种负载均衡系统中的主动健康检查装置，其特征在于，包括：RS状态管理模块，用于从负载均衡系统向后端服务器发送主动探测请求，获取后端服务器健康状态变化并将后端服务器的健康状态信息同步上报至主动健康检查模块，对后端服务器的健康状态进行管理；所述后端服务器的健康状态至少包括网卡状态和服务端口的状态；获取后端服务器的健康状态变化，当负载均衡系统感知到所述后端服务器发生上报状态变化时，将当前产生的上报变化信息同步至RS状态管理模块，并传输至主动健康管理模块；检查间隔管理模块，用于接收后端服务器的健康状态历史结果，并判断是否到达下一次检查间隔，在到达该检查间隔时，根据预设间隔检查周期算法对下一次检查间隔进行实时更新以动态调整检查间隔；主动健康检查模块，用于基于当前后端服务器的健康状态信息以及更新后的检查间隔信息判断当下是否执行探测动作。9.一种电子设备，其特征在于，包括：存储器，所述存储器用于存储处理程序；处理器，所述处理器执行所述处理程序时实现如权利要求1至7中任意一项所述的负载均衡系统中的主动健康检查方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储有处理程序，所述处理程序被处理器执行时实现如权利要求1至7中任意一项所述的负载均衡系统中的主动健康检查方法。
说明书desc
技术领域本发明涉及负载均衡技术领域，尤其涉及一种负载均衡系统中的主动健康检查方法、装置、设备及介质。背景技术健康检查是负载均衡服务中非常重要的功能之一。负载均衡系统持续周期性地向RS发送主动探测请求，在RS为正常的状态下，如果连续探测失败的次数到达一定的阈值，则改变RS的健康状态为失败；在RS为失败的状态下，如果连续探测成功的次数到达一定的阈值，则改变RS的健康状态为正常。而决定探测请求发送的参数有三个：重试次数，响应超时时间，以及检查间隔，其中上述三个参数都是固定的。参见附图1所示，显示的是一次从健康检查失败到健康检查成功的全过程。可以看到三个阶段：1、健康检查从成功转变成失败。2、周期性检查，没有发生状态改变。3、健康检查状态从失败转变成成功。尤其在周期性探测的过程中，可以看到，检查间隔直接决定了感知状态变化的及时性。对于主动健康检查来说，从现有方案中的时序图中可以看到，在每次重试的检查间隔，尤其是周期性的探测里，是有可能发生状态改变的，而由于固定的参数设置，如果检查间隔设置过大，可能导致这个状态的改变无法及时的被感知到。想要及时感知到后端服务器的状态，可以通过降低响应时间的方法，也就是提高发送探测请求的频率，但会出现如下缺陷：1、增大负载均衡系统发送探测请求的压力。2、增大RS的压力。在软件负载均衡场景下，一个负载均衡集群可能由几十个节点构成。尤其是对于七层负载均衡场景，单个负载均衡节点的容量较小，单个集群可达到数百个节点。在这种情况下，如果继续使用主动健康检查机制，持续的健康检查探测请求会对下游的后端服务器产生很大的压力。鉴于此，有必要提出一种负载均衡系统中的主动健康检查方法克服上述缺陷。发明内容本发明的目的是提供一种负载均衡系统中的主动健康检查方法、装置、设备及介质，基于当前后端服务器自身的状态反馈以及主动健康检查的历史结果，动态调整检查间隔，来决定下一次发送探测请求的时间点，这样可以一定程度上缓减负载均衡器以及后端服务器的探测压力，并且可以及时探测到状态的改变。本发明提供了一种负载均衡系统中的主动健康检查方法，包括：从负载均衡系统向后端服务器发送主动探测请求，获取后端服务器健康状态变化并将后端服务器的健康状态信息同步上报至主动健康检查模块，对后端服务器的健康状态进行管理；所述后端服务器的健康状态至少包括网卡状态和服务端口的状态；获取后端服务器的健康状态变化，当负载均衡系统感知到所述后端服务器发生上报状态变化时，将当前产生的上报变化信息同步至RS状态管理模块，并传输至主动健康管理模块；接收后端服务器的健康状态历史结果，并判断是否到达下一次检查间隔，在到达该检查间隔时，根据预设间隔检查周期算法对下一次检查间隔进行实时更新以动态调整检查间隔；基于当前后端服务器的健康状态信息以及更新后的检查间隔信息判断当下是否执行探测动作。作为优选地，所述判断是否到达下一次检查间隔，在到达该检查间隔时，根据预设间隔检查周期算法对下一次检查间隔进行实时更新以动态调整检查间隔包括：将预设的探测周期时间划分为第一检查时段、第二检查时段、第三检查时段和第四检查时段；在所述第一检查时段按照起始检查间隔进行慢启动检查，在当前时段连续检查结果均相同，且连续检查达到预设的第一探测轮次阈值时，对下一次检查间隔进行第一次更新，且更新的检查间隔呈缓慢增长趋势；在到达所述第二检查时段时，按照当前更新后的检查间隔进行下一阶段的检查，在当前时段连续检查结果均相同，且连续检查达到预设的第二探测轮次阈值时，对下一次检查间隔进行第二次更新，且更新的检查间隔呈指数级增长趋势；在到达所述第三检查时段时，按照当前更新后的检查间隔进行下一阶段的检查，在当前时段连续检查结果均相同，且连续检查达到预设的第三探测轮次阈值时，对下一次检查间隔进行第三次更新，且更新的检查间隔呈预设间隔量增长趋势；在达到所述第四检查时段时，则在下一次探测轮次中初始化至慢启动检查阶段继续循环；其中，所述第一检查时段为起始检查间隔，所述第四检查时段为预设的探测周期时间阈值。作为优选地，所述第一探测轮次阈值＞所述第二探测轮次阈值＞所述第三探测轮次阈值＞所述第四探测轮次阈值，且从第一检查时段至所述第四检查时段的探测轮次数量依次减小。作为优选地，当从第一检查时段至所述第四检查时段任意时段探测得到连续检查结果不相同时，显示当前后端服务器的健康状态发生改变，则重新初始化进入慢启动检查阶段。作为优选地，所述基于当前后端服务器的健康状态信息以及更新后的检查间隔信息判断当下是否执行探测动作包括：判断是否到达预设的检查间隔，若到达预设的检查间隔而触发的探测请求，则根据检查间隔管理模块的预设间隔检查周期算法进行下一次的间隔更新；和/或，当后端服务器的健康状态发生变化而触发主动健康检查模块进行判断是否需要立刻进行探测请求，则对下一次的检查间隔进行重置并初始化；其中，后端服务器的健康状态发生变化包括配置有icmp检查且后端相关地址状态发生变化、配置有http、tcp以及udp检查且后端相关端口发生变化。作为优选地，所述基于当前后端服务器的健康状态信息以及更新后的检查间隔信息判断当下是否执行探测动作进一步包括：当后端服务器的健康状态发生变化的情况下，将变化信息分别传输至ICMP端口进行检查和TCP端口进行检查；判断相应的地址状态和端口状态是否发生变化；在相应的地址状态和端口状态发生变化时，将检查间隔更新至初始化时间。作为优选地，所述判断是否到达下一次检查间隔，在到达该检查间隔时，根据预设间隔检查周期算法对下一次检查间隔进行实时更新以动态调整检查间隔进一步包括：同步启动被动检查机制，在当前检查间隔大于预设的检查间隔阈值的情况下，如果后端服务器的健康状态为正常，且后端服务器处理业务请求连续失败的次数超出请求失败阈值时，则将当前后端服务器的健康状态改变为失败。本发明还提供了一种负载均衡系统中的主动健康检查装置，包括：RS状态管理模块，用于从负载均衡系统向后端服务器发送主动探测请求，获取后端服务器健康状态变化并将后端服务器的健康状态信息同步上报至主动健康检查模块，对后端服务器的健康状态进行管理；所述后端服务器的健康状态至少包括网卡状态和服务端口的状态；获取后端服务器的健康状态变化，当负载均衡系统感知到所述后端服务器发生上报状态变化时，将当前产生的上报变化信息同步至RS状态管理模块，并传输至主动健康管理模块；检查间隔管理模块，用于接收后端服务器的健康状态历史结果，并判断是否到达下一次检查间隔，在到达该检查间隔时，根据预设间隔检查周期算法对下一次检查间隔进行实时更新以动态调整检查间隔；主动健康检查模块，用于基于当前后端服务器的健康状态信息以及更新后的检查间隔信息判断当下是否执行探测动作。本发明还提供了一种电子设备，包括：存储器，所述存储器用于存储处理程序；处理器，所述处理器执行所述处理程序时实现如本发明实施例所述的负载均衡系统中的主动健康检查方法。本发明还提供了一种计算机可读存储介质，所述计算机可读存储介质上存储有处理程序，所述处理程序被处理器执行时实现如本发明实施例所述的负载均衡系统中的主动健康检查方法。针对现有技术，本发明具有如下的有益效果：本发明所提供的负载均衡系统中的主动健康检查方法是基于当前后端服务器自身的状态反馈以及主动健康检查的历史结果，动态调整检查间隔，来决定下一次发送探测请求的时间点，这样可以一定程度上缓减负载均衡器以及后端服务器的探测压力，并且可以及时探测到状态的改变，实现负载均衡器的自适应。附图说明图1为本发明背景技术中的从健康检查失败到健康检查成功的全过程示例图；图2为本发明一实施例中所述负载均衡系统中的主动健康检查方法的流程图；图3为本发明一实施例中预设间隔检查周期算法分析图；图4为本发明一实施例中预设间隔检查周期算法流程示意图；图5为本发明一实施例中基于当前后端服务器的健康状态信息以及更新后的检查间隔信息判断当下是否执行探测动作具体过程示例图；图6为本发明一实施例中所述负载均衡系统中的主动健康检查装置的总体架构图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例一如图2所示，本发明提供了一种负载均衡系统中的主动健康检查方法，包括：S1：从负载均衡系统向后端服务器发送主动探测请求，获取后端服务器健康状态变化并将后端服务器的健康状态信息同步上报至主动健康检查模块，对后端服务器的健康状态进行管理；所述后端服务器的健康状态至少包括网卡状态和服务端口的状态；本实施例采用的负载均衡系统可以是LB:Load Balancer负载均衡器，将请求分散到某个集群中的可用服务器上，来缓解单个服务器的压力。RS：处理具体请求的后端服务器。S2：获取后端服务器的健康状态变化，当负载均衡系统感知到所述后端服务器发生上报状态变化时，将当前产生的上报变化信息同步至RS状态管理模块，并传输至主动健康管理模块；有利于后端服务器的状态同步机制，以及负载均衡内部对状态的管理。本实施采用的RS状态管理模块用于管理来自于后端服务器的状态反馈内容。对于四层负载均衡来说，一般有几种健康检查模式：HTTP检查，TCP检查，UDP检查以及ICMP检查。对于ICMP检查来说，服务器的地址是否能够被正常被访问，绝大程序上决定了ICMP的检查结果。对于其他三种，不仅需要服务器地址可达，服务的端口也要能被正常访问，是检查成功的基本条件。因此，如果在负载均衡器内及时感知到后端服务器自身相关状态变化，比周期性的检查获取状态转化要更及时跟准确。对于后端服务器来说，只需要在每次网卡状态以及服务端口发生变化后，将这些信息同步到状态管理模块即可，而无须周期性的同步。RS状态管理模块要做的事情是管理来自后端服务器上报的状态，以及通知主动健康检查模块，由其决定是否发起主动探测请求。S3：接收后端服务器的健康状态历史结果，并判断是否到达下一次检查间隔，在到达该检查间隔时，根据预设间隔检查周期算法对下一次检查间隔进行实时更新以动态调整检查间隔；这样计算每个健康检查器下一次的检查间隔，而不是以固定间隔周期的方式进行探测，解决固定间隔产生的负载均衡系统发送探测请求的压力增大、RS的压力增大等问题。为了实现检查间隔实时计算更新的机制，避免对系统造成过多的压力步骤S3具体包括：将预设的探测周期时间划分为第一检查时段、第二检查时段、第三检查时段和第四检查时段；参见附图3所示，图中描述的检查间隔算法主要分为四部分：1，第一检查时段为缓慢增长期。2，第二检查时段为指数增长期。3，第三检查时段位加法增长期。4，第四检查时段位恢复到原始状态。本实施例预设的探测周期时间为60s，正常情况下每60s为一周期。在所述第一检查时段按照起始检查间隔进行慢启动检查，在当前时段连续检查结果均相同，且连续检查达到预设的第一探测轮次阈值时，对下一次检查间隔进行第一次更新，且更新的检查间隔呈缓慢增长趋势；可以理解为，在所述第一检查时段中进行的缓慢增长，即是检查间隔只增加1秒。上述对下一次检查间隔进行第一次更新对检查间隔不止一次更新，具体步骤如下：第一步，起始检查间隔为2秒，如果连续四次检查结果都是成功或者失败，则在第五次的时候，检查间隔更新为3秒。第二步，如果第5次开始连续四次检查结果都是成功或者失败，则更新检查间隔为4秒。在到达所述第二检查时段时，按照当前更新后的检查间隔进行下一阶段的检查，在当前时段连续检查结果均相同，且连续检查达到预设的第二探测轮次阈值时，对下一次检查间隔进行第二次更新，且更新的检查间隔呈指数级增长趋势；可以理解为，本实施例采用的指数级增长为检查间隔按2n更新。具体第三步，与第一、二步同理，从第7次开始，如果连续四次检查结果都是成功或者失败，则接下来的检查间隔时间进行指数级增加。第四步，在指数级增大阶段，一共有三种检查间隔：8秒和16秒，32秒。每种检查间隔可持续三个探测轮次。在到达所述第三检查时段时，按照当前更新后的检查间隔进行下一阶段的检查，在当前时段连续检查结果均相同，且连续检查达到预设的第三探测轮次阈值时，对下一次检查间隔进行第三次更新，且更新的检查间隔呈预设间隔量增长趋势；可以理解为，本实施例采用的预设间隔量增长，即加法增长：检查间隔+预设固定增长时间，预设固定增长时间如探测间隔更新方式为增加4秒。具体第五步，进入到加法增大阶段，也就是接下来的探测间隔更新方式为增加4秒。每种检查间隔可持续两个探测轮次。在达到所述第四检查时段时，则在下一次探测轮次中初始化至慢启动检查阶段继续循环；可以理解为，第六步，一旦检查间隔达到60s，则在下一个探测轮次里恢复到第一个步骤。以此循环。其中，所述第一检查时段为起始检查间隔，所述第四检查时段为预设的探测周期时间阈值。所述第一探测轮次阈值＞所述第二探测轮次阈值＞所述第三探测轮次阈值＞所述第四探测轮次阈值，且从第一检查时段至所述第四检查时段的探测轮次数量依次减小。当从第一检查时段至所述第四检查时段任意时段探测得到连续检查结果不相同时，显示当前后端服务器的健康状态发生改变，则重新初始化进入慢启动检查阶段。上述算法正常运行的前提都是：探测的结果一致，都是成功或者都是失败。一旦发生状态改变，则重新进入到检查间隔的“缓慢增加阶段”。具体过程如图4所示。该方案下的检查间隔为：。而现有技术周期性探测请求方案的检查间隔为：，每种间隔探测3次。如果一共持续了60秒，按现有方案是探测60次，而按本发明实施例方案为探测36次，明显探测次数减少，缓解频繁探测产生的压力。上述方式明显减轻了探测压力，但是，可以看到，在一个变化周期内，越到后期，检查间隔时间会越来越大。为了及时感知到后端服务器的健康状态，本发明实施例设计在指数级增大阶段以及加法增大阶段同时启动被动检查机制，来辅助解决由于长时间的检查间隔导致后端服务器的健康状态无法被及时感知的情况。具体步骤：同步启动被动检查机制，在当前检查间隔大于预设的检查间隔阈值的情况下，如果后端服务器的健康状态为正常，且后端服务器处理业务请求连续失败的次数超出请求失败阈值时，则将当前后端服务器的健康状态改变为失败。可以理解为，被动检查机制的具体实现方案为：在大于8秒的检查间隔周期内，如果后端服务器为正常的状态，且如果后端服务器处理业务请求连续失败的次数超过一定阈值，则改变后端服务器的健康状态为失败。S4：所述基于当前后端服务器的健康状态信息以及更新后的检查间隔信息判断当下是否执行探测动作，可以理解为，主动健康检查是否发起探测，是由动态更新的检查间隔以及后端服务器的状态来决定，参见图5所示，具体包括：判断是否到达预设的检查间隔，若到达预设的检查间隔而触发的探测请求，则根据检查间隔管理模块的预设间隔检查周期算法进行下一次的间隔更新；和/或，当后端服务器的健康状态发生变化而触发主动健康检查模块进行判断是否需要立刻进行探测请求，则对下一次的检查间隔进行重置并初始化；其中，后端服务器的健康状态发生变化包括配置有icmp检查且后端相关地址状态发生变化、配置有http、tcp以及udp检查且后端相关端口发生变化。当后端服务器的健康状态发生变化的情况下，将变化信息分别传输至ICMP端口进行检查和TCP端口进行检查；判断相应的地址状态和端口状态是否发生变化；在相应的地址状态和端口状态发生变化时，将检查间隔更新至初始化时间。本领域技术人员可以理解，本实施例基于RS状态管理模块以及检查间隔管理模块的信息，来决定当下是否发起探测请求。具体的过程如下，首先在主动健康检查模块中，自身维护一个定时器，根据检查间隔模块管理的检查间隔，进行周期性地触发探测请求。此外，在RS状态管理模块中，一旦发生后端服务器状态的改变，则触发主动健康检查模块进行判断是否需要立刻进行探测请求。如果配置有相关的icmp检查且相关后端地址状态发生变化，则触发探测请求。同理，如果配置有http，tcp以及udp检查且后端相关端口发生变化，也需要触发探测请求。最后，只是触发了探测请求，需要更新之后的检查间隔。如果是由于RS状态发生变化而触发的探测，则下一次的检查间隔重置为2秒。如果是到达检查间隔而触发的探测请求，则根据检查间隔管理模块的算法进行下一次的间隔更新即可。实施例二基于相同的构思，如图6所示，本发明提供了一种负载均衡系统中的主动健康检查装置，包括：RS状态管理模块，用于从负载均衡系统向后端服务器发送主动探测请求，获取后端服务器健康状态变化并将后端服务器的健康状态信息同步上报至主动健康检查模块，对后端服务器的健康状态进行管理；所述后端服务器的健康状态至少包括网卡状态和服务端口的状态；获取后端服务器的健康状态变化，当负载均衡系统感知到所述后端服务器发生上报状态变化时，将当前产生的上报变化信息同步至RS状态管理模块，并传输至主动健康管理模块，有利于后端服务器的状态同步机制，以及负载均衡内部对状态的管理；检查间隔管理模块，用于接收后端服务器的健康状态历史结果，并判断是否到达下一次检查间隔，在到达该检查间隔时，根据预设间隔检查周期算法对下一次检查间隔进行实时更新以动态调整检查间隔；检查间隔实时计算更新的机制，避免对系统造成过多的压力，主动健康检查模块，用于基于当前后端服务器的健康状态信息以及更新后的检查间隔信息判断当下是否执行探测动作，主动健康检查是否发起探测，是由动态更新的检查间隔以及后端服务器的状态来决定。本发明实施例整个架构主要分为三个过程：1，后端服务器上报网卡状态以及服务端口的状态。2，检查间隔管理模块：管理一段时间内的健康检查结果，进行下一次检查间隔时间的计算。3，主动健康检查模块根据后端服务器的状态以及当前的计算到的检查间隔时间，决定此刻是否需要发起探测请求。上述获取模块、RS状态管理模块、检查间隔管理模块、检查间隔管理模块的具体内容及实现方法，均如实施例一中所述，在此不再赘述。实施例三基于相同的构思，本发明所提供的一种电子设备，包括：存储器，所述存储器用于存储处理程序；处理器，所述处理器执行所述处理程序时实现如本发明实施例所述的负载均衡系统中的主动健康检查方法。本发明所提供的一种可读存储介质，所述可读存储介质上存储有处理程序，所述处理程序被处理器执行时实现如本发明实施例所述的负载均衡系统中的主动健康检查方法。该一种负载均衡系统中的主动健康检查设备可因配置或性能不同而产生比较大的差异，可以包括一个或一个以上处理器和存储器，一个或一个以上存储应用程序或数据的存储介质。其中，存储器和存储介质可以是短暂存储或持久存储。存储在存储介质的程序可以包括一个或一个以上模块，每个模块可以包括对一种负载均衡系统中的主动健康检查设备中的一系列指令操作。进一步地，处理器可以设置为与存储介质通信，在负载均衡系统中的主动健康检查的设备上执行存储介质中的一系列指令操作。一种负载均衡系统中的主动健康检查设备还可以包括一个或一个以上电源，一个或一个以上有线或无线网络接口，一个或一个以上输入输出接口，和/或，一个或一个以上操作系统，例如Windows Serve、Vista等等。本发明还提供了一种计算机可读存储介质，所述计算机可读存储介质上存储有计算机程序，所述计算机程序被一个或多个处理器执行时，实现如本发明实施例一中的负载均衡系统中的主动健康检查方法。实施例二中的模块如果以软件功能模块的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件的形式体现出来，该计算机可读存储介质可以为非易失性计算机可读存储介质，该计算机可读存储介质也可以为易失性计算机可读存储介质。该计算机可读存储介质中存储有指令，当该指令在计算机上运行时，使得计算机执行实施例一中负载均衡系统中的主动健康检查的步骤。本领域技术人员可以理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件的形式体现出来，该计算机软件存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器ROM、随机存取存储器RAM、磁碟或者光盘等各种可以存储程序代码的介质。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的设备的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
