标题title
基于SMF集合的VN组通信方法、系统和存储介质
摘要abst
本发明公开了一种基于SMF集合的VN组通信方法、系统和存储介质，可应用于5G通信技术领域。本发明通过在用户终端的PDU会话建立且SMF集合不支持该用户终端所属VN组通信时，通过SMF集合向AMF发起用于表征所述SMF集合不支持所述用户终端所属VN组通信的第一通知指令，使得AMF根据VN组标识选取中间SMF后，中间SMF根据该用户终端的位置信息和VN组标识选取中间UPF，以通过中间UPF建立该用户终端的VN组通信隧道，同时中间SMF还会建立VN组内其他用户终端指向该用户终端的VN组通信隧道，从而可以有效降低业务复杂度和传输时延，提高不同VN组的隔离性和服务精度。
权利要求书clms
1.一种基于SMF集合的VN组通信方法，其特征在于，包括以下步骤：当第一用户终端的PDU会话建立且SMF集合不支持所述第一用户终端所属VN组通信，所述SMF集合向AMF发起第一通知指令，所述第一通知指令用于表征所述SMF集合不支持所述用户终端所属VN组通信；AMF根据VN组标识选取中间SMF；中间SMF根据所述第一用户终端的位置信息和所述VN组标识选取中间UPF，以通过所述中间UPF建立所述第一用户终端的VN组通信隧道；中间SMF建立所述VN组内第二用户终端指向所述第一用户终端的VN组通信隧道。2.根据权利要求1所述的一种基于SMF集合的VN组通信方法，其特征在于，所述中间SMF根据所述第一用户终端的位置信息和所述VN组标识选取中间UPF，包括：AMF向所述中间SMF发送会话建立请求，所述会话建立请求中携带所述VN组的标识；中间SMF根据所述会话建立请求选取中间UPF。3.根据权利要求1所述的一种基于SMF集合的VN组通信方法，其特征在于，所述中间UPF建立所述第一用户终端的VN组通信隧道，包括：中间SMF与所述中间UPF建立会话后，向所述AMF发送会话建立响应；AMF根据所述会话建立响应向基站发送修改指令，以使所述基站根据所述修改指令将上行隧道端点修改为所述中间UPF。4.根据权利要求3所述的一种基于SMF集合的VN组通信方法，其特征在于，所述中间SMF与所述中间UPF建立会话后，向所述AMF发送会话建立响应，包括：中间SMF与所述中间UPF建立会话后，向SMF集合发送会话建立请求；SMF集合向多个UPF发起会话更改请求，并接收UPF多个UPF完成更改的指令后，向所述中间SMF返回会话建立响应；中间SMF向所述AMF发送会话建立响应。5.根据权利要求4所述的一种基于SMF集合的VN组通信方法，其特征在于，在所述向所述中间SMF返回会话建立响应后，所述方法还包括以下步骤：中间SMF向中间UPF发送会话更改请求，所述会话更改请求用于请求中间UPF的上行对端指向多个UPF。6.根据权利要求3所述的一种基于SMF集合的VN组通信方法，其特征在于，所述会话建立响应包括多个UPF对接中间UPF的上行隧道端点信息和基站的下行隧道端点信息。7.一种基于SMF集合的VN组通信系统，其特征在于，包括：第一模块，用于当第一用户终端的PDU会话建立且SMF集合不支持所述第一用户终端所属VN组通信，所述SMF集合向AMF发起第一通知指令，所述第一通知指令用于表征所述SMF集合不支持所述用户终端所属VN组通信；第二模块，用于AMF根据VN组标识选取中间SMF；第三模块，用于中间SMF根据所述第一用户终端的位置信息和所述VN组标识选取中间UPF，以通过所述中间UPF建立所述第一用户终端的VN组通信隧道；第四模块，用于中间SMF建立所述VN组内第二用户终端指向所述第一用户终端的VN组通信隧道。8.根据权利要求7所述的一种基于SMF集合的VN组通信系统，其特征在于，所述中间UPF建立所述第一用户终端的VN组通信隧道，包括：中间SMF与所述中间UPF建立会话后，向所述AMF发送会话建立响应；AMF根据所述会话建立响应向基站发送修改指令，以使所述基站根据所述修改指令将上行隧道端点修改为所述中间UPF。9.一种基于SMF集合的VN组通信系统，其特征在于，包括：至少一个存储器，用于存储程序；至少一个处理器，用于加载所述程序以执行如权利要求1-6任一项所述的基于SMF集合的VN组通信方法。10.一种存储介质，其特征在于，其中存储有计算机可执行的程序，所述计算机可执行的程序被处理器执行时用于实现如权利要求1-6任一项所述的基于SMF集合的VN组通信方法。
说明书desc
技术领域本发明涉及5G通信技术领域，尤其是一种基于SMF集合的VN组通信方法、系统和存储介质。背景技术相关技术中，在现有SMF集合场景下VN组通信中，对于同一个VN组的用户终端，为保证用户终端不同的数据业务需求，用户终端的数据链路可能不在同一个UPF上，导致用户终端的VN组通信隧道分散于不同的UPF上，提高了业务复杂度，隔离性较差，无法控制每个VN组服务的精度。并且，由于SMF集合服务范围较广，UPF间的VN组传输隧道存在时延较高，传输效率较低的问题。发明内容本发明旨在至少解决现有技术中存在的技术问题之一。为此，本发明提出一种基于SMF集合的VN组通信方法、系统和存储介质，能够降低业务复杂度和传输时延，提高不同VN组的隔离性和服务精度。一方面，本发明实施例提供了一种基于SMF集合的VN组通信方法，包括以下步骤：当第一用户终端的PDU会话建立且SMF集合不支持所述第一用户终端所属VN组通信，所述SMF集合向AMF发起第一通知指令，所述第一通知指令用于表征所述SMF集合不支持所述用户终端所属VN组通信；AMF根据VN组标识选取中间SMF；中间SMF根据所述第一用户终端的位置信息和所述VN组标识选取中间UPF，以通过所述中间UPF建立所述第一用户终端的VN组通信隧道；中间SMF建立所述VN组内第二用户终端指向所述第一用户终端的VN组通信隧道。在一些实施例中，所述中间SMF根据所述第一用户终端的位置信息和所述VN组标识选取中间UPF，包括：AMF向所述中间SMF发送会话建立请求，所述会话建立请求中携带所述VN组的标识；中间SMF根据所述会话建立请求选取中间UPF。在一些实施例中，所述中间UPF建立所述第一用户终端的VN组通信隧道，包括：中间SMF与所述中间UPF建立会话后，向所述AMF发送会话建立响应；AMF根据所述会话建立响应向基站发送修改指令，以使所述基站根据所述修改指令将上行隧道端点修改为所述中间UPF。在一些实施例中，所述中间SMF与所述中间UPF建立会话后，向所述AMF发送会话建立响应，包括：中间SMF与所述中间UPF建立会话后，向SMF集合发送会话建立请求；SMF集合向多个UPF发起会话更改请求，并接收UPF多个UPF完成更改的指令后，向所述中间SMF返回会话建立响应；中间SMF向所述AMF发送会话建立响应。在一些实施例中，在所述向所述中间SMF返回会话建立响应后，所述方法还包括以下步骤：中间SMF向中间UPF发送会话更改请求，所述会话更改请求用于请求中间UPF的上行对端指向多个UPF。在一些实施例中，所述会话建立响应包括多个UPF对接中间UPF的上行隧道端点信息和基站的下行隧道端点信息。另一方面，本发明实施例提供了一种基于SMF集合的VN组通信系统，包括：第一模块，用于当第一用户终端的PDU会话建立且SMF集合不支持所述第一用户终端所属VN组通信，所述SMF集合向AMF发起第一通知指令，所述第一通知指令用于表征所述SMF集合不支持所述用户终端所属VN组通信；第二模块，用于AMF根据VN组标识选取中间SMF；第三模块，用于中间SMF根据所述第一用户终端的位置信息和所述VN组标识选取中间UPF，以通过所述中间UPF建立所述第一用户终端的VN组通信隧道；第四模块，用于中间SMF建立所述VN组内第二用户终端指向所述第一用户终端的VN组通信隧道。在一些实施例中，所述中间UPF建立所述第一用户终端的VN组通信隧道，包括：中间SMF与所述中间UPF建立会话后，向所述AMF发送会话建立响应；AMF根据所述会话建立响应向基站发送修改指令，以使所述基站根据所述修改指令将上行隧道端点修改为所述中间UPF。另一方面，本发明实施例提供了一种基于SMF集合的VN组通信系统，包括：至少一个存储器，用于存储程序；至少一个处理器，用于加载所述程序以执行所述的基于SMF集合的VN组通信方法。另一方面，本发明实施例提供了一种存储介质，其中存储有计算机可执行的程序，所述计算机可执行的程序被处理器执行时用于实现所述的基于SMF集合的VN组通信方法。本发明实施例提供的一种基于SMF集合的VN组通信方法，具有如下有益效果：本实施例通过在用户终端的PDU会话建立且SMF集合不支持该用户终端所属VN组通信时，通过SMF集合向AMF发起用于表征所述SMF集合不支持所述用户终端所属VN组通信的第一通知指令，使得AMF根据VN组标识选取中间SMF后，中间SMF根据该用户终端的位置信息和VN组标识选取中间UPF，以通过中间UPF建立该用户终端的VN组通信隧道，同时中间SMF还会建立VN组内其他用户终端指向该用户终端的VN组通信隧道，从而可以有效降低业务复杂度和传输时延，提高不同VN组的隔离性和服务精度。本发明的附加方面和优点将在下面的描述中部分给出，部分将从下面的描述中变得明显，或通过本发明的实践了解到。附图说明下面结合附图和实施例对本发明做进一步的说明，其中：图1为本发明实施例一种基于SMF集合的VN组通信方法的流程图；图2为本发明实施例一种基于SMF集合的VN组通信方法的应用示意图；图3为本发明实施例一种本地转发架构示意图；图4为本发明实施例一种N19转发架构示意图。具体实施方式下面详细描述本发明的实施例，所述实施例的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施例是示例性的，仅用于解释本发明，而不能理解为对本发明的限制。在本发明的描述中，若干的含义是一个以上，多个的含义是两个以上，大于、小于、超过等理解为不包括本数，以上、以下、以内等理解为包括本数。如果有描述到第一、第二只是用于区分技术特征为目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量或者隐含指明所指示的技术特征的先后关系。本发明的描述中，除非另有明确的限定，设置、安装、连接等词语应做广义理解，所属技术领域技术人员可以结合技术方案的具体内容合理确定上述词语在本发明中的具体含义。本发明的描述中，参考术语“一个实施例”、“一些实施例”、“示意性实施例”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。在进行具体实施例的阐述之前，对本申请实施例涉及的术语进行如下解释：UE：英文解释为User Equipment，中文解释为用户设备。用户设备可以是手机、平板电脑、笔记本电脑或其他设备。RAN：英文全称为Radio Access Network，中文解释为无线接入网，相当于基站。其起到接口作用，能是用户能够方便和经济地享用各种宽屏多媒体信息。AMF：英文全称为Access and Mobility Management Function，中文解释为接入和移动性管理功能网元，其功能包括连接管理、可达性管理、流动性管理、接入授权等。SMF：英文全称为Session Management Function，中文解释为会话管理功能网元，其功能包括会话管理，例如会话建立、修改和释放等，包括UPF和AN节点之间的通道维护等。I-SMF：英文全称为Intermediate SMF，中文解释为中间SMF。UPF：英文全称为User plane Function，中文解释为用户平面功能网元，其功能包括外部PDU与数据网络互连的会话点、分组路由和转发，例如支持上行链路分类器以将业务流路由到数据网络的实例。I-UPF：英文全称为Intermediate UPF，中文解释为中间UPF。DN：英文全称为Data Network，中文解释为数据网络，比如运营商业务、互联网或第三方业务等。在5G移动通信网络中，用户终端通过连接基站接入核心网，从而能够访问数据网络。对于某些特定群体，如工厂、学校、园区、矿区等等，存在群体内部通信的需求，但采用第三方服务器进行通信的方式，第三方服务器需要中转群体用户间的通信消息，存在通信路程较长、无法满足多用户及高并发数据传输的问题；同时，采用第三方服务器也会产生额外的成本，相关自定义需求可能无法满足。因此，3GPP推出了5G VN组通信方案。在5G VN组通信中，群组即VN组。对于VN组用户，在开户时会预先设定每个用户所属的VN组标识；用户终端通过基站接入核心网时，核心网会为用户终端建立VN组通信隧道，该通信隧道能够转发该用户终端到相同VN组内其他用户终端的通信数据。通过5GVN组通信方法，抛弃了第三方服务器的处理，在核心网内部进行数据转发，缩短了VN组用户通信路程，提高了数据传输效率。SMF集合，即多个SMF网元的集合，具有多实例、会话上下文共享的特性，能够支持同一集合内SMF实例间会话冗余倒换，同时在线业务不受影响，新建业务正常处理的功能。在SMF集合通信场景下，SMF集合管理着多个UPF，负责用户终端的数据转发业务。在SMF集合场景下的VN组通信中，SMF集合向UPF为VN组内每个用户终端建立VN组通信隧道，VN组内每个用户终端的通信数据就通过VN组通信隧道在UPF间转发，从而达到VN组内用户终端通信的目的。基于此，参照图1，本发明实施例提供了一种基于SMF集合的VN组通信方法，本实施的方法包括但不限于以下步骤：步骤S110、当第一用户终端的PDU会话建立且SMF集合不支持所述第一用户终端所属VN组通信，SMF集合向AMF发起第一通知指令，其中，第一通知指令用于表征所述SMF集合不支持所述用户终端所属VN组通信；步骤S120、AMF根据VN组标识选取中间SMF；步骤S130、中间SMF根据第一用户终端的位置信息和VN组标识选取中间UPF，以通过中间UPF建立所述第一用户终端的VN组通信隧道；步骤S140、中间SMF建立VN组内第二用户终端指向第一用户终端的VN组通信隧道。在本申请实施例中，在中间SMF根据所述第一用户终端的位置信息和所述VN组标识选取中间UPF时，可以通过AMF向中间SMF发送携带所述VN组的标识的会话建立请求后，以使中间SMF根据会话建立请求选取中间UPF。在本申请实施例中，在中间UPF建立第一用户终端的VN组通信隧道时，可以通过中间SMF与中间UPF建立会话后，向AMF发送会话建立响应，以使AMF根据会话建立响应向基站发送修改指令，基站根据修改指令将上行隧道端点修改为中间UPF。具体地，在中间SMF与中间UPF建立会话后，向AMF发送会话建立响应时，中间SMF与中间UPF建立会话后，向SMF集合发送会话建立请求，以使SMF集合向多个UPF发起会话更改请求，并接收UPF多个UPF完成更改的指令后，向中间SMF返回会话建立响应，使得中间SMF向AMF发送会话建立响应。其中，会话建立响应包括多个UPF对接中间UPF的上行隧道端点信息和基站的下行隧道端点信息。可以理解的是，本实施例在向中间SMF返回会话建立响应后，中间SMF向中间UPF发送用于请求中间UPF的上行对端指向多个UPF的会话更改请求。在一些实施中，将本申请实施例的方法应用于图2所示交互图时，包括但不限于以下步骤：步骤1、VN组用户终端PDU会话已建立，并且SMF集合不支持该VN组；步骤2、SMF集合向AMF发起SM上下文通知消息，该通知消息用于表征SMF集合不支持该用户终端的VN组通信；步骤3、AMF根据该用户终端的VN组标识，选择一个中间SMF；步骤4、AMF向I-SMF发起会话建立请求，请求创建会话管理上下文；步骤5、I-SMF根据用户终端的VN组标识，选择一个中间UPF；步骤6、I-SMF向I-UPF建立N4会话，建立对接RAN的上行隧道端点与对接UPF的下行隧道端点信息；I-UPF向I-SMF返回N4会话响应；步骤7、I-SMF向SMF集合发送会话建立请求，该请求携带了I-UPF对接UPF的下行隧道端点信息；步骤8、SMF Sets向UPF发起N4会话更改，更改UPF的下行对端指向I-UPF；步骤9、SMF Sets向I-SMF返回会话建立响应，消息中包含了UPF对接I-UPF的上行隧道端点信息；以及AN的下行隧道端点信息；步骤10.1、I-SMF向I-UPF发起N4会话更改，请求更改I-UPF的上行对端指向UPF，同时为用户终端建立指向VN组内其他用户终端的通信隧道；步骤10.2、I-SMF向I-UPF发起N4会话更改，请求建立VN组内其他用户终端指向该用户终端的通信隧道；步骤11、I-SMF向AMF返回会话创建响应，响应中携带了I-UPF的上行隧道端点信息；步骤12、AMF通知基站I-UPF上行隧道端点信息。基于该实施例的通信过程，本实施例的用户终端上行数据路径为：UE→RAN→I-UPF→UPF→DN；本实施例的用户终端下行数据路径为：DN→UPF→I-UPF→AN→UE。可以理解的是，将本实施例的方法应用于图3所示的本地转发架构时，VN组内通信路径的本地转发路径为：UE1→RAN→I-UPF→RAN→UE2。将本实施例的方法应用于图4所示的N19转发架构时，VN组内通信路径的N19转发路径为：UE1→RAN→I-UPF→I-UPF→RAN→UE2。示例性地，当用户终端示例如表1所示：表1用户终端所属的VN组标识所在区域UE1001AUE2002BUE3001AUE4002C………………SMF示例如表2所示：表2SMF名称支持的VN组SMF1001SMF2002UPF示例如表3所示：表3UPF名称支持的区域UPF1A、BUPF2C对于表1-表3的示例：本地交换时，用户终端UE1属于VN组001，处在A区域中，因此AMF选择SMF1作为I-SMF，SMF1选择UPF1作为I-UPF，为用户终端UE1建立VN组通信隧道；用户终端UE3属于VN组001，处在A区域中，因此AMF选择SMF1作为I-SMF，SMF1选择UPF1作为I-UPF，为用户终端UE3建立VN组通信隧道；因此，本地交换时的数据转发流向为：用户终端UE1与用户终端UE3的数据仅在UPF1上进行交换。N19交换时，用户终端UE2数据VN组002，处在B区域，AMF选择SMF2作为I-SMF，SMF2选择UPF1作为I-UPF，为用户终端UE2建立VN组通信隧道；用户终端UE4数据VN组002，处在C区域，AMF选择SMF2作为I-SMF，SMF2选择UPF2作为I-UPF，为用户终端UE4建立VN组通信隧道；因此，N19交换时的数据转发流向为：用户终端UE2与用户终端UE4的数据在UPF1与UPF2间进行交换。综上所述，本实施例针对SMF集合场景的VN组通信，通过加入了I-SMF的方法，提高了对VN组用户的管理以及不同VN组间的隔离性，降低业务复杂度；同时，由于I-SMF、I-UPF等网元更靠近接入侧，提高了VN用户终端间数据传输的速率，降低VN组数据传输时延。此外，也能够保证用户终端原有数据业务不受VN组通信业务影响，提高对用户终端的服务精度与质量。本发明实施例提供了一种基于SMF集合的VN组通信系统，包括：第一模块，用于当第一用户终端的PDU会话建立且SMF集合不支持第一用户终端所属VN组通信，SMF集合向AMF发起第一通知指令，其中，第一通知指令用于表征所述SMF集合不支持所述用户终端所属VN组通信；第二模块，用于AMF根据VN组标识选取中间SMF；第三模块，用于中间SMF根据第一用户终端的位置信息和VN组标识选取中间UPF，以通过中间UPF建立所述第一用户终端的VN组通信隧道；第四模块，用于中间SMF建立VN组内第二用户终端指向第一用户终端的VN组通信隧道。本发明方法实施例的内容均适用于本系统实施例，本系统实施例所具体实现的功能与上述方法实施例相同，并且达到的有益效果与上述方法达到的有益效果也相同。本发明实施例提供了一种基于SMF集合的VN组通信系统，包括：至少一个存储器，用于存储程序；至少一个处理器，用于加载所述程序以执行图1所示的基于SMF集合的VN组通信方法。本发明方法实施例的内容均适用于本系统实施例，本系统实施例所具体实现的功能与上述方法实施例相同，并且达到的有益效果与上述方法达到的有益效果也相同。本发明实施例提供了一种存储介质，其中存储有计算机可执行的程序，所述计算机可执行的程序被处理器执行时用于实现图1所示的基于SMF集合的VN组通信方法。本发明实施例还提供了一种计算机程序产品或计算机程序，该计算机程序产品或计算机程序包括计算机指令，该计算机指令存储在计算机可读存介质中。计算机设备的处理器可以从计算机可读存储介质读取该计算机指令，处理器执行该计算机指令，使得该计算机设备执行图1所示的基于SMF集合的VN组通信方法。上面结合附图对本发明实施例作了详细说明，但是本发明不限于上述实施例，在所属技术领域普通技术人员所具备的知识范围内，还可以在不脱离本发明宗旨的前提下作出各种变化。此外，在不冲突的情况下，本发明的实施例及实施例中的特征可以相互组合。
