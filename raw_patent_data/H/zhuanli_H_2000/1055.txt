标题title
视频处理方法、设备及存储介质
摘要abst
本申请提供一种视频处理方法、设备及存储介质，涉及终端技术领域。该方法包括：电子设备检测到播放目标应用中视频的操作时，执行对目标应用是否有权限使用第一视频服务的权限校验，第一视频服务是电子设备提供的用于优化视频画质的服务。若电子设备确定目标应用有权限使用第一视频服务，则调用第一视频服务的各项能力，对目标应用中的视频的画质进行优化处理，使得目标应用充分利用设备的显示引擎能力，提升用户观看视频的体验。
权利要求书clms
1.一种视频处理方法，其特征在于，应用于电子设备，所述方法包括：检测到播放目标应用中视频的操作，所述电子设备验证所述目标应用是否有权限使用第一视频服务，所述第一视频服务为所述电子设备提供的用于优化视频播放效果的服务；若所述目标应用有权限使用所述第一视频服务，所述电子设备调用所述第一视频服务的各项能力，对所述目标应用中的所述视频的画质进行优化处理。2.根据权利要求1所述的方法，其特征在于，检测到播放目标视频的操作，包括：检测到开启所述目标应用的第一操作；或者检测到开启所述目标应用的第一操作，并检测到开启所述目标应用中的所述目标视频的第二操作。3.根据权利要求1或2所述的方法，其特征在于，所述电子设备验证所述目标应用是否有权限使用所述第一视频服务，包括：所述电子设备向云端服务器发送第一请求，所述第一请求用于请求验证所述目标应用是否有权限使用所述第一视频服务；所述电子设备接收来自所述云端服务器的第一响应，所述第一响应用于指示所述目标应用有权限使用所述第一视频服务，或者指示所述目标应用没有权限使用所述第一视频服务。4.根据权利要求3所述的方法，其特征在于，所述第一请求包括所述目标应用的第一标识，所述目标应用的第二标识的至少一项；所述第一标识用于指示所述目标应用的名称，所述第二标识为所述云端服务器为所述目标应用分配的标识。5.根据权利要求1至4任一项所述的方法，其特征在于，所述电子设备调用所述第一视频服务的各项能力之前，所述方法还包括：所述电子设备创建所述第一视频服务；所述电子设备初始化所述第一视频服务。6.根据权利要求1至5任一项所述的方法，其特征在于，所述电子设备验证所述目标应用是否有权限使用所述第一视频服务之前，所述方法还包括：所述电子设备创建、初始化第二视频服务，所述第二视频服务是创建所述第一视频服务的基础性服务。7.根据权利要求1至6任一项所述的方法，其特征在于，所述方法还包括：检测到关闭所述目标应用中所述视频的第三操作，所述电子设备注销所述第一视频服务。8.根据权利要求1至7任一项所述的方法，其特征在于，所述方法还包括：检测到关闭所述目标应用的第四操作，所述电子设备注销所述第二视频服务。9.根据权利要求1至8任一项所述的方法，其特征在于，所述第一视频服务的各项能力包括以下至少一项：对高动态范围HDR视频的亮度的调节能力；对所述HDR视频的色彩的调节能力；对所述HDR视频对应的图层的亮度的调节能力；对所述HDR视频对应的图层的色彩的调节能力。10.一种电子设备，其特征在于，所述电子设备包括：存储器和处理器，所述处理器用于调用所述存储器中的计算机程序，以执行如权利要求1至9任一项所述的方法。11.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机指令，当所述计算机指令在电子设备上运行时，使得所述电子设备执行如权利要求1至9任一项所述的方法。12.一种芯片，其特征在于，所述芯片包括处理器，所述处理器用于调用存储器中的计算机程序，以执行如权利要求1至9任一项所述的方法。
说明书desc
技术领域本申请涉及终端技术领域，尤其涉及视频处理方法、设备及存储介质。背景技术高动态范围视频，相比常规视频，可以提供更多的动态范围和图像细节，为视频画面带来更丰富的色彩和更生动自然的细节表现，使得视频画面更接近人眼所见。为提升用户观看视频的体验，多数手机、平板电脑等电子设备支持播放HDR视频。然而，用户在使用第三方应用播放视频时，设备暂不支持第三方应用根据设备播放视频的实际显示效果，对视频相关参数进行调节，造成用户使用体验欠佳。发明内容本申请实施例提供一种视频处理方法、设备及存储介质，使得应用能够使用设备的显示引擎能力以优化视频画质。第一方面，本申请实施例提出一种视频处理方法，应用于电子设备，在该方法中，电子设备检测到播放目标应用中视频的操作，验证目标应用是否有权限使用第一视频服务，第一视频服务为电子设备提供的用于优化视频播放效果的服务；若目标应用有权限使用第一视频服务，电子设备调用第一视频服务的各项能力，对目标应用中的视频的画质进行优化处理。本实施例中，第一视频服务可对应图7所示的视频增强服务，视频增强服务包括例如高动态范围HDR视频增强服务。目标应用可以是具备视频播放能力的应用，例如视频类应用，游戏类应用，社交类应用，购物类应用等第三方应用。上述方案示出了用户在触发播放目标应用中的视频时，电子设备通过验证目标应用是否有权限使用设备的显示引擎能力，确定是否调用设备的显示引擎能力对该目标应用的视频画质进行优化处理，以解决目前第三方应用无法充分利用设备显示引擎能力的问题，提升用户观看视频的体验。在第一方面的一个可选实施例中，检测到播放目标视频的操作，包括：检测到开启目标应用的第一操作；或者，检测到开启目标应用的第一操作，并检测到开启目标应用中的目标视频的第二操作。上述方案示出了两种具体的应用场景：一种场景中，用户点击打开目标应用，目标应用的显示界面提供多个视频资源，用户可点击观看显示界面中的任一视频资源，在用户点击任一视频资源时，触发设备验证目标应用是否有权限使用第一视频服务。另一种场景中，用户点击打开目标应用，目标应用直接播放某一视频资源，如短视频，此时触发设备验证目标应用是否有权限使用第一视频服务。在第一方面的一个可选实施例中，电子设备验证目标应用是否有权限使用第一视频服务，包括：电子设备向云端服务器发送第一请求，第一请求用于请求验证目标应用是否有权限使用第一视频服务；电子设备接收来自云端服务器的第一响应，第一响应用于指示目标应用有权限使用第一视频服务，或者指示目标应用没有权限使用第一视频服务。本实施例中，云端服务器可以是电子设备的云端服务器，云端服务器可用于为目标应用分配使用电子设备显示引擎能力的权限标识，如下述的第二标识，云端服务器还用于校验某一目标应用是否有权限使用电子设备的显示引擎能力。显示引擎能力包括第一视频服务的各项能力，如HDR视频增强，HDR Vivid等。上述方案示出了电子设备通过云端服务器验证目标应用是否有权限使用当前设备的第一视频服务，以提升该应用视频播放的画质。在第一方面的一个可选实施例中，第一请求包括目标应用的第一标识，目标应用的第二标识的至少一项；第一标识用于指示目标应用的名称，第二标识为云端服务器为目标应用分配的标识。本实施例中，目标应用的名称也可称为目标应用的包名。第一请求包括第一标识，第二标识的至少一项，云端服务器可通过本地查询，确定是否目标应用是否有权限使用设备的第一视频服务，若本地存储有对目标应用的分配记录，如记录了目标应用的第一标识和第二标识的对应关系，则确定目标应用有权限使用设备的第一视频服务。在第一方面的一个可选实施例中，电子设备调用第一视频服务的各项能力之前，方法还包括：电子设备创建第一视频服务；电子设备初始化第一视频服务。本实施例中，校验第一视频服务，即验证目标应用是否有权限使用第一视频服务，发生在创建第一视频服务的过程中，具体可参照附图9。上述方案示出了在电子设备调用第一视频服务的各项能力之前，设备需要完成对第一视频服务的创建、初始化和鉴权，以便应用能够使用设备的显示引擎能力。在第一方面的一个可选实施例中，电子设备验证目标应用是否有权限使用第一视频服务之前，还包括：电子设备创建和初始化第二视频服务，第二视频服务是创建第一视频服务的基础性服务。本实施例中，第二视频服务可对应图7所示的视频基础服务，第二视频服务可用于管理第一视频服务的多种能力。上述方案示出的对第二视频服务的创建和初始化，是应用使用第一视频服务的前提，只有在完成第二视频服务的创建和初始化后，才能够使用第一视频服务的各项能力。在第一方面的一个可选实施例中，还包括：检测到关闭目标应用中视频的第三操作，电子设备注销第一视频服务。上述方案示出了注销第一视频服务的触发条件，以释放设备内存空间，节省设备资源。在第一方面的一个可选实施例中，还包括：检测到关闭目标应用的第四操作，电子设备注销第二视频服务。上述方案示出了注销第二视频服务的触发条件，以释放设备内存空间，节省设备资源。在第一方面的一个可选实施例中，第一视频服务的各项能力包括以下至少一项：对高动态范围HDR视频的亮度的调节能力；对HDR视频的色彩的调节能力；对HDR视频对应的图层的亮度的调节能力；对HDR视频对应的图层的色彩的调节能力。第二方面，本申请实施例提供了一种电子设备，电子设备包括：存储器和处理器，所述处理器用于调用所述存储器中的计算机程序，以执行如第一方面任一项所述的方法。第三方面，本申请实施例提供了一种计算机可读存储介质，计算机可读存储介质存储有计算机指令，当计算机指令在电子设备上运行时，使得电子设备执行如第一方面任一项所述的方法。第四方面，本申请实施例提供了一种芯片，芯片包括处理器，处理器用于调用存储器中的计算机程序，以执行如第一方面任一项所述的方法。第五方面，一种计算机程序产品，包括计算机程序，当计算机程序被运行时，使得计算机执行如第一方面任一项所述的方法。应当理解的是，本申请的第二方面至第五方面与本申请的第一方面的技术方案相对应，各方面及对应的可行实施方式所取得的有益效果相似，不再赘述。附图说明图1为本申请实施例提供的视频处理方法的一种场景示意图；图2为本申请实施例提供的视频处理方法的一种场景示意图；图3为本申请实施例提供的一种电子设备的结构示意图；图4为本申请实施例提供的一种电子设备的软件结构框图；图5为本申请实施例提供的申请设备显示引擎能力的流程示意图；图6为本申请实施例提供的应用权限校验的流程示意图；图7为本申请实施例提供的一种视频处理方法的流程示意图；图8为本申请实施例提供的一种视频处理方法的流程示意图；图9为本申请实施例提供的一种视频处理方法的流程示意图；图10为本申请实施例提供的一种视频处理方法的流程示意图；图11为本申请实施例提供的一种视频处理方法的流程示意图；图12为本申请实施例提供的一种视频处理方法的流程示意图；图13为本申请实施例提供的一种电子设备的结构示意图；图14为本申请实施例提供的一种芯片的结构示意图。具体实施方式为了便于清楚描述本申请实施例的技术方案，在本申请的实施例中，采用了“第一”、“第二”等字样对功能和作用基本相同的相同项或相似项进行区分。例如，第一操作，第二操作，第三操作和第四操作仅仅是为了区分不同的操作。又例如，第一视频服务和第二视频服务仅仅是为了区分不同的视频服务。再例如，第一标识和第二标识仅仅是为了区分不同的标识。本领域技术人员可以理解“第一”、“第二”等字样并不对数量和执行次序进行限定，并且“第一”、“第二”等字样也并不限定一定不同。需要说明的是，本申请实施例中，“示例性的”或者“例如”等词用于表示作例子、例证或说明。本申请中被描述为“示例性的”或者“例如”的任何实施例或设计方案不应被解释为比其他实施例或设计方案更优选或更具优势。确切而言，使用“示例性的”或者“例如”等词旨在以具体方式呈现相关概念。本申请实施例中，“至少一个”是指一个或者多个，“多个”是指两个或两个以上。“和/或”，描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示单独存在A，同时存在A和B，单独存在B的情况，其中A，B可以是单数或者复数。字符“/”一般表示前后关联对象是一种“或”的关系。“以下至少一项”或其类似表达，是指的这些项中的任意组合，包括单项或复数项的任意组合。例如，a，b或c中的至少一项，可以表示a，b，c，a-b，a-c，b-c或a-b-c，其中a，b，c可以是单个，也可以是多个。如前文所述，目前设备制造商的硬件能力，如HDR视频的显示能力，无法被应用厂商充分利用，这将影响用户观看视频的体验。示例性的，当用户使用第三方应用观看HDR视频时，无法根据硬件设备的实际显示效果进行视频参数调节。为了充分利用设备的硬件能力，提升用户观看HDR视频的体验，本申请实施例提出一种视频处理方法，其主要思路如下：设备制造商的云端服务器为第三方应用开放如HDR视频的显示能力，使得第三方应用能够在用户播放应用中的HDR视频时，使用到设备底层的显示引擎能力，以调节视频相关参数，提升视频播放效果。基于第三方应用开发者权限申请，云端服务器可为第三方应用分配相应的标识，该标识指示第三方应用能够使用设备的HDR视频的显示能力。在用户在第三方应用中点击播放某一HDR视频时，可触发第三方应用创建视频服务软件开发工具包，第三方应用通过视频服务SDK与设备应用程序框架层的视频相关的服务进行交互，包括如创建视频基础服务、初始化视频基础服务、视频增强服务的鉴权、注册和使用视频增强服务等交互过程，实现利用设备底层的显示引擎能力提升视频播放效果。上述方案解决了第三方应用厂商无法充分利用设备屏幕显示能力的痛点。本申请实施例提供的视频处理方法，可以应用在具备显示功能的电子设备中。电子设备也可以称为终端、用户设备、移动台、移动终端等。电子设备可以是手机、折叠屏手机、智能电视、穿戴式设备、平板电脑、带无线收发功能的电脑、虚拟现实终端设备、增强现实终端设备、工业控制中的无线终端、无人驾驶中的无线终端、远程手术中的无线终端、智能电网中的无线终端、运输安全中的无线终端、智慧城市中的无线终端、智慧家庭中的无线终端等等。本申请的实施例对电子设备所采用的具体技术和具体设备形态不做限定。在介绍本申请技术方案之前，首先对本申请实施例中涉及的部分用语进行解释说明，以便本领域技术人员理解。HDR Vivid，一种高动态范围的视频技术标准，与传统技术相比，HDRVivid让用户在影像中看到更逼真的画面、更丰富的色彩还原、更深邃的暗部细节及更精妙的亮部处理。Texture view，可以将内容流直接投影到视图中，可以用于实现实时预览等功能，支持移动、旋转、缩放动画，支持截图，但必须在硬件加速的窗口中使用，占用内存比Surface view高。Surface view，使用双缓冲机制，播放视频时画面更流程，可以在一个独立的线程中进行图形绘制，不会影响主线程。色域，用于描述不同显示设备，或者不同标准所使用或规定的颜色范围。色域映射，两个不同色域之间构建的映射。p3色域，一种显示标准。下面以电子设备为手机为例进行示例说明，该示例并不构成对本申请实施例的限定。示例性的，图1为本申请实施例提供的视频处理方法的一种场景示意图。参照图1，用户点击图1中a所示的手机主界面上的第三方视频类应用A的图标，进入图1中b所示的应用A的显示界面，用户可在该显示界面浏览各类视频，包括例如应用A向用户推荐的视频、用户在应用A中的视频观看记录等。当用户点击应用A的显示界面中的视频3，将触发执行本申请实施例提供的视频处理方案，包括视频服务的创建、初始化、鉴权、注册和使用等。若应用A具有使用手机显示引擎能力的权限，应用A使用手机显示引擎能力后，图1中c所示的视频3的画质将得到显著提升。示例性的，图2为本申请实施例提供的视频处理方法的一种场景示意图。参照图2，用户点击图2中a所示的手机主界面上的第三方短视频类应用B的图标，进入图2中b所示的短视频播放界面，用户在该播放界面上观看应用B为其推荐的第一条短视频a。本实施例中，当用户点击应用B的图标，将触发执行本申请实施例提供的视频处理方案，包括视频服务的创建、初始化、鉴权、注册和使用等。若应用B具有使用手机显示引擎能力的权限，应用B使用手机显示引擎能力后，图2中b所示的短视频a的画质将得到显著提升。需要说明的是，上述两个示例中的应用均为第三方视频类应用，本申请实施例对第三方应用的类型并不限定，只要该第三方应用能够提供视频播放功能即可。在一些实施例中，第三方应用还可以是例如社交类应用、游戏类应用、购物类应用等，用户在第三方应用中点击播放某视频时，可触发执行本申请实施例提供的视频处理方案。为了能够更好地理解本申请实施例，下面对本申请实施例的电子设备的结构进行介绍。示例性的，图3为本申请实施例提供的一种电子设备的结构示意图。如图3所示，电子设备300可以包括：处理器310，外部存储器接口320，内部存储器321，天线1，天线2，移动通信模块350，无线通信模块360，传感器380，摄像头393以及显示屏394等。可以理解的是，本实施例示意的结构并不构成对电子设备300的具体限定。在另一些实施例中，电子设备300可以包括比图示更多或更少的部件，或者组合某些部件，或者拆分某些部件，或者不同的部件布置。图示的部件可以以硬件，软件，或软件和硬件的组合实现。处理器310可以包括一个或多个处理单元，例如：处理器310可以包括应用处理器，调制解调处理器，图形处理器，图像信号处理器，控制器，视频编解码器，数字信号处理器，基带处理器，显示处理单元，和/或神经网络处理器等。其中，不同的处理单元可以是独立的器件，也可以集成在一个或多个处理器中。可以理解的是，本发明实施例示意的各模块间的接口连接关系，只是示意性说明，并不构成对电子设备300的结构限定。在另一些实施例中，电子设备300也可以采用不同的接口连接方式，或多种接口连接方式的组合。外部存储器接口320可以用于连接外部存储卡，例如Micro SD卡，实现扩展电子设备300的存储能力。外部存储卡通过外部存储器接口320与处理器310通信，实现数据存储功能。例如，将视频等数据文件保存在外部存储卡中。内部存储器321可以用于存储一个或多个计算机程序，该一个或多个计算机程序包括指令。处理器310可以通过运行存储在内部存储器321的上述指令，从而使得电子设备300执行各种功能应用以及数据处理等。内部存储器321可以包括存储程序区和存储数据区。其中，存储程序区可存储操作系统；该存储程序区还可以存储一个或多个应用程序等。存储数据区可存储电子设备300使用过程中所创建的数据等。电子设备300的无线通信功能可以通过天线1，天线2，移动通信模块350，无线通信模块360，调制解调处理器以及基带处理器等实现。移动通信模块350提供应用在电子设备300上的包括2G/3G/4G/5G等无线通信的解决方案。无线通信模块360可以提供应用在电子设备300上的包括无线局域网，蓝牙，全球导航卫星系统，调频，NFC，红外技术等无线通信的解决方案。在本申请实施例中，电子设备300可以通过移动通信模块350或无线通信模块360与云端服务器通信连接，以校验电子设备300的第三方应用是否有权限使用电子设备300的显示引擎能力。电子设备300通过GPU，显示屏394，以及应用处理器等可以实现显示功能。GPU为图像处理的微处理器，连接显示屏394和应用处理器。GPU用于执行数学和几何计算，用于图形渲染。处理器310可包括一个或多个GPU，其执行指令以生成或改变显示信息。显示屏394用于显示图像、视频等。显示屏394包括显示面板。显示面板可以采用液晶显示屏，有机发光二极管，有源矩阵有机发光二极体或主动矩阵有机发光二极体，柔性发光二极管，Miniled，MicroLed，Micro-oLed，量子点发光二极管等。在一些实施例中，显示屏394为一种可折叠的柔性屏幕，显示屏394可称为折叠屏，折叠屏包括第一屏和第二屏，折叠屏可沿着折叠边进行展开或折叠，形成第一屏和第二屏。电子设备300可以通过ISP，一个或多个摄像头393，视频编解码器，GPU，一个或多个显示屏394以及应用处理器等实现拍摄功能。视频编解码器用于对数字视频压缩或解压缩。电子设备300可以支持一种或多种视频编解码器。这样，电子设备300可以播放或录制多种编码格式的视频，例如：动态图像专家组1，MPEG2，MPEG3，MPEG4等。传感器380可以包括压力传感器380A，触摸传感器380K，环境光传感器380L等。压力传感器380A用于感受压力信号，可以将压力信号转换成电信号。在一些实施例中，压力传感器380A可以设置于显示屏394。触摸传感器380K，也称“触控器件”。触摸传感器380K可以设置于显示屏394，由触摸传感器380K与显示屏394组成触摸屏，也称“触控屏”。触摸传感器380K用于检测作用于其上或附近的触摸操作。触摸传感器可以将检测到的触摸操作传递给应用处理器，以确定触摸事件类型。可以通过显示屏394提供与触摸操作相关的视觉输出。在另一些实施例中，触摸传感器380K也可以设置于电子设备300的表面，与显示屏394所处的位置不同。环境光传感器380L用于感知环境光亮度。电子设备300可以根据感知的环境光亮度自适应调节显示屏394亮度。环境光传感器380L也可用于拍摄时自动调节白平衡。另外，在上述部件之上，运行有操作系统。例如iOS操作系统，Android开源操作系统，Windows操作系统等。在操作系统上可以安装运行应用程序，如视频类应用程序等。电子设备300的操作系统可以采用分层架构，事件驱动架构，微核架构，微服务架构，或云架构。本申请实施例以分层架构的软件系统为Android系统为例，示例性说明电子设备的软件结构。图4为本申请实施例提供的一种电子设备的软件结构框图。分层架构将电子设备的软件系统分成若干个层，每一层都有清晰的角色和分工。层与层之间通过软件接口通信。在一些实施例中，可以将Android系统分为四层，分别为应用程序层、应用程序框架层、安卓运行时和系统库，以及内核层。应理解，图4中仅示出与本申请实施例的用于视频处理方法相关的功能模块，在实践中，电子设备中可包括更多或更少的功能模块，或者部分功能模块也可以被其它功能模块替代。应用程序层可以包括一系列应用程序包。如图4所示，应用程序层中包括应用A、应用B和视频服务应用。应用A和应用B具备视频播放能力，例如视频类第三方应用，能够为用户提供视频资源。视频服务应用具备亮度信息管理、色彩信息管理、视频图层管理和客户端异常处理等功能，亮度信息管理可用于调节如应用A或应用B中视频亮度，色彩信息管理可用于调节如应用A或应用B中视频的色彩显示，视频图层管理可用于管理和调节视频对应图层的相关参数，客户端异常处理可用于在设备显示引擎服务异常时通知应用，还可用于监听媒体鉴权服务是否正常。在一些实施例中，应用程序层还可以包括其他应用程序，例如相机，图库，日历，通话，蓝牙，音乐，短消息等应用程序。应用程序框架层为应用程序层的应用程序提供应用编程接口和编程框架。应用程序框架层包括一些预先定义的函数。如图4所示，应用程序框架层可以包括媒体鉴权服务，云端鉴权服务和应用框架。媒体鉴权服务包括视频服务，视频服务具备应用并发策略和应用鉴权的功能。应用并发策略包括：协调、调度设备中多个应用使能设备显示引擎能力的策略。例如，图4中应用A播放某视频时，用户切换至应用B观看短视频，此时可通过视频服务实现应用B使能设备显示引擎能力。应用鉴权包括：视频服务接收来自应用程序层的某应用的视频服务权限校验请求，视频服务可通过查询权限校验的历史记录，或者通过与云端鉴权服务交互，获知该应用是否有权限使用设备的显示引擎能力。在一些实施例中，媒体鉴权服务还可以包括音频服务，音频服务包括如耳返服务等。云端鉴权服务可用于向云端服务器发起权限校验请求，以获知某应用是否有权限使用设备的显示引擎能力。应用框架中包括显示引擎服务，显示引擎服务具备亮度信息管理，色彩信息管理和图层信息管理等功能。在一些实施例中，应用程序框架层还可以包括电源管理服务、活动管理器、窗口管理器，内容提供器，视图系统，电话管理器，资源管理器，通知管理器等，本申请实施例对此不作任何限制。安卓运行时包括核心库和虚拟机。Android runtime负责安卓系统的调度和管理。核心库包含两部分：一部分是java语言需要调用的功能函数，另一部分是安卓的核心库。应用程序层和应用程序框架层运行在虚拟机中。虚拟机将应用程序层和应用程序框架层的java文件执行为二进制文件。虚拟机用于执行对象生命周期的管理，堆栈管理，线程管理，安全和异常的管理，以及垃圾回收等功能。系统库可以包括多个功能模块。例如：表面管理器，媒体库，三维3D图形处理库，二维2D图形引擎等。表面管理器用于对显示子系统进行管理，并且为多个应用程序提供了2D和3D图层的融合。媒体库支持多种常用的音频，视频格式回放和录制，以及静态图像文件等。媒体库可以支持多种音视频编码格式。三维图形处理库用于实现三维图形绘图，图像渲染，合成，和图层处理等。2D图形引擎是2D绘图的绘图引擎。内核层是硬件和软件之间的层。内核层包含例如显示驱动，音频驱动，摄像头驱动，传感器驱动等，本申请实施例对此不做任何限制。需要说明的是，本申请实施例虽然以Android系统为例进行说明，但其基本原理同样适用于iOS或Windows等操作系统的电子设备。下面以具体地实施例对本申请的技术方案以及本申请的技术方案如何解决上述技术问题进行详细说明。下面这几个具体的实施例可以独立实现，也可以相互结合，对于相同或相似的概念或过程可能在某些实施例中不再赘述。为了实现第三方应用能够使用设备底层的显示引擎能力，在第三方应用更新上线之前，第三方应用的开发者可通过电子设备访问设备制造商的云端服务器，以申请使用设备显示引擎能力的权限。示例性的，图5为本申请实施例提供的申请设备显示引擎能力的流程示意图，如图5所示，开发者通过电子设备登录云端服务器，向云端服务器发送权限申请请求，例如，权限申请请求用于请求为应用A申请视频服务使用权限。云端服务器向电子设备返回权限申请响应，权限申请响应中携带云端服务器为应用A分配的标识，该标识可用于指示应用A能够使用设备的显示引擎能力。在开发者为第三方应用申请好使用设备显示引擎能力的权限后，用户在使用第三方应用播放视频时，可通过附图6所示的流程进行权限校验，在校验成功后，使用设备显示引擎能力，实现对当前播放的视频画质的提升。示例性的，图6为本申请实施例提供的应用权限校验的流程示意图。如图6所示，应用A已获知云端为其分配的应用程序标识，当用户播放应用A提供的视频时，应用A向媒体鉴权服务发送权限校验请求，权限校验请求中携带app id。媒体鉴权服务器将权限校验请求发送至云端鉴权服务，云端鉴权服务获知应用A的app id后，可向云端服务器发起权限校验。经云端服务器校验后，云端鉴权服务接收云端服务器返回的校验结果，云端鉴权服务器向媒体鉴权服务发送校验结果，完成对应用A的鉴权。权限校验成功后，应用A可使用设备显示引擎能力优化当前播放的视频画质。此外，完成权限校验后，媒体鉴权服务可存储应用A权限校验的相关信息，以便后续查询。需要指出的是，电子设备开机后，用户开启应用A且点击播放某视频后，可触发上述应用权限校验流程。在另一些场景中，用户开启应用A且点击播放某一条视频后，切换至其他应用，此时应用A在后台运行，当用户再次切换回应用A时，用户点击播放另一条视频时，无需执行上述应用权限校验流程。在另一些场景中，用户在应用A播放某一条视频后，关闭该视频，并点击播放另一条视频时，也无需执行上述应用权限校验流程。除非，应用A被用户关闭，在重新开启且点击播放某一条视频时，才需要再次执行上述应用权限校验流程。这样，可以降低设备功耗。在一些实施例中，用户开启应用A后，可触发上述应用权限校验流程，即无需在用户点击播放某一条视频时才执行应用权限校验流程。本实施例中，应用A可对应如短视频类应用，开启短视频类应用时，直接播放短视频。基于上述实施例可知，电子设备上电后，用户在首次开启应用A，或者，首次点击应用A中的视频，需执行上述应用权限校验流程，该流程是应用A使用设备显示引擎能力的前提。除了上述应用权限校验流程之外，还包括其他流程，例如视频服务的创建、初始化、注册等。下面结合附图7-附图12对视频处理方案的全流程进行详细介绍。示例性的，图7为本申请实施例提供的一种视频处理方法的流程示意图。如图7所示，本实施例的视频处理方法，包括以下步骤：S701.应用创建视频基础服务。应用可以是具有视频播放功能的第三方应用，例如视频类，社交类，游戏类，购物类第三方应用，对此本实施例不作任何限制。图7中，在电子设备上电后，用户首次点击应用A中的目标视频，或者，首次开启应用A，应用A可通过视频服务SDK创建视频基础服务。目标视频可以是应用A为用户推荐的视频，或者，用户历史播放记录中的视频等。视频服务SDK可对应图4所示的视频服务应用。应理解，已获取云端服务器权限的应用都可以通过视频服务SDK与应用程序框架层的媒体鉴权服务，云端鉴权服务，显示引擎服务等进行信息交互。视频基础服务是视频服务的其中一种，视频基础服务可用于管理视频增强服务的多种能力。此外，视频服务还包括视频增强服务，视频增强服务包括如HDR视频增强，HDRVivid等多种能力，HDR视频增强包括亮度监听与调节，色彩调节等。视频增强服务是由视频基础服务创建，视频增强服务和视频基础服务在功能上是独立运作的。应理解，随着视频技术的发展，可以不断扩充视频增强服务的能力。应用创建视频基础服务包括创建视频基础服务客户端，视频基础服务客户端可以看作是视频基础服务的实例对象。视频基础服务客户端将设置状态回调监听器，并交由视频服务管理模块进行监听器的管理，监听器用于向应用通知状态，如通知视频基础服务创建成功，通知初始化视频基础服务成功等。S702.应用通过与媒体鉴权服务交互，初始化视频基础服务。应用在完成创建视频基础服务后，将进行初始化视频基础服务，以获知当前设备支持哪些视频增强服务的能力，如是否支持HDR Vivid能力，是否支持HDR视频增强能力等。应用在获知当前设备支持的视频增强服务的能力后，即可创建视频增强服务的相关能力。S703.应用通过与媒体鉴权服务，云端鉴权服务交互，完成视频增强服务的鉴权流程。应用在获知当前设备支持的视频增强服务有哪些能力后，可创建视频增强服务的相关能力，在创建视频增强服务的相关能力之前，需要先完成视频增强服务的鉴权流程，鉴权流程即校验应用是否有权限使用设备的视频增强服务。鉴权流程涉及云端鉴权服务与设备的云端服务器的交互，具体可参照前文图6实施例。在云端鉴权服务确定应用有权限使用设备的视频增强服务后，可通过媒体鉴权服务通知应用执行S704。S704.应用通过与媒体鉴权服务，显示引擎服务交互，注册并使用视频增强服务的各项能力。其中，视频增强服务的各项能力包括如HDR视频增强，HDR Vivid等，HDR视频增强包括亮度监听与调节，色彩调节等。参照附图6，媒体鉴权服务可存储应用权限校验的相关信息，这里的相关信息包括云端服务为应用分配的app id，还包括该应用能够使用的视频增强服务的各项能力的接口信息。媒体鉴权服务可用于管理所有的接口信息。应用可通过媒体鉴权服务调用视频增强服务的各项能力的接口，向显示引擎服务发起注册和使用视频增强服务的各项能力的请求，以实现应用使用设备的显示引擎能力调节视频画质的目的。S705.应用通过与媒体鉴权服务，显示引擎服务交互，注销视频增强服务的各项能力。图7中，当用户关闭应用A中的目标视频时，应用A可通过与媒体鉴权服务，显示引擎服务交互，以注销视频增强服务的各项能力。与S704类似，应用可通过媒体鉴权服务调用视频增强服务的各项能力的接口，向显示引擎服务发起注销视频增强服务的各项能力的请求，以停止使用设备的显示引擎能力。S706.应用注销视频增强服务。S707.应用注销视频基础服务。图7中，当用户关闭应用A时，应用A依次注销视频增强服务，视频基础服务。本实施例示出的视频处理方法，描述了设备上电后，用户首次点击播放某第三方应用中的任意一条视频时，或者用户首次点击打开短视频应用时，应用如何使用设备显示引擎能力的处理过程，该过程涉及视频基础服务的创建和初始化，视频增强服务的鉴权、注册和使用。同时，还描述了用户关闭应用中的视频后，应用需要注销视频增强服务的各项能力，并且在用户关闭应用后，依次注销视频增强服务和视频基础服务。上述方案使得应用能够充分使用设备的显示引擎能力，以提升应用视频画面的显示效果，带给用户更优质的视频观看体验。图8为本申请实施例提供的一种视频处理方法的流程示意图。本实施例涉及图7中的S701和S702，如图8所示，S701创建视频基础服务，可以包括以下步骤：S7011.应用向视频基础服务客户端发送指示，指示创建视频基础服务。S7012.视频基础服务客户端向视频服务管理模块发送指示，指示设置状态回调监听器。S7013.视频服务管理模块管理监听器。S7014.视频服务管理模块通过监听器向视频基础服务客户端发送通知，通知视频基础服务创建成功。S7015.视频基础服务客户端向应用发送通知，通知视频基础服务创建成功。应用包括视频服务SDK，视频服务SDK包括视频基础服务客户端和视频服务管理模块，基础服务客户端和视频服务管理模块均位于应用程序层。本实施例中，应用通过视频基础服务器客户端和视频服务管理模块完成视频基础服务的创建。监听器可以看作是视频服务管理模块中的一个子模块，在本实施例中，监听器用于向应用通知视频基础服务的创建是否成功。视频服务管理模块除了参与创建视频基础服务，管理监听器之外，还参与创建、初始化和鉴权视频增强服务。如图8所示，S702初始化视频基础服务，可以包括以下步骤：S7021.应用向视频基础服务客户端发送指示，指示初始化视频基础服务。S7022.视频基础服务客户端执行初始化视频基础服务，查询相关能力，并提供相关能力的接口信息。S7023.视频服务管理模块通过与媒体鉴权服务中的视频基础服务交互，绑定视频基础服务。S7024a.视频服务管理模块向视频基础服务客户端通知视频基础服务绑定成功。S7024b.视频基础服务客户端向应用通知视频基础服务绑定成功。若成功绑定视频基础服务，还可以执行以下步骤：S7025a.视频基础服务向视频服务管理模块发送通知，通知成功绑定视频基础服务。通知成功绑定视频基础服务即通知视频基础服务初始化成功。S7025b.视频服务管理模块通过监听器向应用发送通知，通知视频基础服务初始化成功。应用在完成视频基础服务创建后，进行视频基础服务客户端的初始化，视频基础服务客户端通过视频服务管理模块进行异步初始化视频基础服务。这里的异步可以理解为：视频服务管理模块在执行S7023后就执行S7024a，而不是等待视频基础服务向其返回服务绑定成功后再执行S7024a。S7024a和S7025b是相对独立的两个步骤，也即视频服务管理模块返回已绑定视频基础服务与视频基础服务是否初始化成功并无关联。当视频基础服务初始化成功后，媒体鉴权服务中的视频基础服务将通知视频服务管理模块，视频服务管理模块告知监听器初始化成功，并通过监听器告知应用视频基础服务初始化成功。至此，应用可以使用视频基础服务客户端的能力，例如当前设备是否支持HDR Vivid能力，是否支持HDR视频增强能力等。本实施例中，应用通过视频基础服务器客户端和视频服务管理模块，与应用程序框架层的媒体鉴权服务交互，完成视频基础服务的初始化。本实施例示出的视频处理方法，涉及视频基础服务的创建和初始化过程，视频基础服务的创建和初始化过程是应用使用设备视频增强服务的前提，只有在完成视频基础服务的创建和初始化之后，才能够使用视频增强服务的各项能力。图9为本申请实施例提供的一种视频处理方法的流程示意图。本实施例涉及图7中的S703，如图9所示，S703视频增强服务的鉴权流程，可以包括以下步骤：S7031.应用向视频基础服务客户端查询是否支持视频增强服务。若视频基础服务客户端确定支持视频增强服务，则执行S7032。S7032.应用向视频基础服务客户端发送指示，指示创建视频增强服务。S7033.视频基础服务客户端实例化视频增强服务客户端。实例化视频增强服务客户端可以理解为创建视频增强服务客户端。视频增强服务客户端位于应用程序层。S7034.视频增强服务客户端向视频服务管理模块发送指示，指示创建视频增强服务。创建视频增强服务的过程包括初始化和鉴权视频增强服务。S7035.视频服务管理模块通过与媒体鉴权服务中的视频增强服务交互，绑定视频增强服务。S7036a.视频服务管理模块向视频增强服务客户端通知视频增强服务绑定成功。S7036b.视频增强服务客户端向视频基础服务客户端通知视频增强服务绑定成功。S7036c.视频基础服务客户端向应用通知视频增强服务绑定成功。在S7035之后，还包括以下步骤：S7037a.视频增强服务向云端鉴权服务发送权限校验请求。权限校验请求用于请求校验应用是否有权限使用设备的视频增强服务。S7037b.云端鉴权服务向视频增强服务返回权限校验结果。权限校验结果用于指示应用有或没有权限使用视频增强服务。需要说明的是，云端鉴权服务需要通过与设备的云端服务器交互，获取权限校验结果，具体可参照前文图6实施例。S7038.视频增强服务管理权限校验结果。若权限校验结果指示应用有权限使用视频增强服务，还可以执行以下步骤：S7039a.视频增强服务向视频服务管理模块发送通知，通知成功绑定视频增强服务。S7039b.视频服务管理模块通过监听器向应用发送通知，通知视频增强服务创建成功。本实施例中，视频增强服务可以是HDR视频增强服务。当需要使用HDR视频增强能力时，应用需要先查询当前设备是否支持该能力，若不支持则中止所有后续调用，若支持HDR视频增强能力，则应用可以通过视频基础服务客户端创建视频增强服务。视频基础服务客户端首先会实例化HDR视频增强服务客户端，并通过视频服务管理模块绑定HDR视频增强服务，绑定成功后将进行HDR视频增强服务的初始化并进行应用的权限校验。HDR视频增强服务向云端鉴权服务发送权限校验请求，该请求包括应用的包名和app id，云端鉴权服务再向云端服务器发送权限校验请求，获取权限校验结果，并将权限校验结果最终返回给HDR视频增强服务，HDR视频增强服务向视频服务管理模块发送通知，以便视频服务管理模块将HDR视频增强服务初始化成功的状态通知给状态监听器，最终告知给应用，应用收到初始化成功的消息后便可以使能HDR视频增强的相关能力。本实施例示出的视频处理方法，涉及视频增强服务的鉴权过程，应用只有在具备使用设备的视频增强服务的权限时，才可以使能视频增强服务的各项能力，因此，在完成视频基础服务的创建和初始化之后，需要校验应用是否有权限使用视频增强服务。图10为本申请实施例提供的一种视频处理方法的流程示意图。本实施例涉及图7中的S704，如图10所示，S704注册并使用视频增强服务的各项能力，可以包括以下步骤：S7041.应用通过视频增强服务客户端使能Texture/Surface view的HDR视频增强能力。应用通过调用视频增强服务客户端的接口，通知视频增强服务客户端使能Texture/Surface view的HDR视频增强能力。S7042.视频增强服务客户端向视频增强服务查询是否有权限使用Texture/Surface view的HDR视频增强能力。若视频增强服务确定有权限使用Texture/Surface view的HDR视频增强能力，则执行S7043。S7043.视频增强服务向显示引擎服务发送指示，指示使能Texture/Surface view的HDR视频增强能力。至此，应用即可使用设备的HDR视频增强能力，以提升视频画质。S7044a.显示引擎服务向视频增强服务发送通知，通知可使用Texture/Surfaceview的HDR视频增强能力。S7044b.视频增强服务向视频增强服务客户端发送通知，通知可使用Texture/Surface view的HDR视频增强能力。S7044c.视频增强服务客户端向应用发送通知，通知可使用Texture/Surfaceview的HDR视频增强能力。应用使用设备Texture/Surface view的HDR视频增强能力后，设备的图形处理器GPU将对单图层Surface view进行渲染，以提高指定的图层屏幕亮度，将该图层屏幕的色域固定为标准p3色域。在一些实施例中，还可以通过注册亮度监听能力，实时获取图层亮度变化，根据图层亮度变化实现动态色域映射调节，提升视频画质。注册亮度监听能力，可以包括以下步骤：S7045.应用向视频增强服务客户端发送指示，指示注册亮度监听能力。S7046.视频增强服务客户端向视频增强服务查询是否有权限使用亮度监听能力。若视频增强服务确定有权限使用亮度监听能力，则执行S7047。S7047.视频增强服务向显示引擎服务注册亮度监听能力。至此，应用即可使用设备的亮度监听能力，以调整屏幕的显示亮度。S7048a.显示引擎服务向视频增强服务发送通知，通知亮度监听能力注册成功。S7048b.视频增强服务向视频增强服务客户端发送通知，通知亮度监听能力注册成功。S7048c.视频增强服务客户端向应用发送通知，通过亮度监听能力注册成功。本实施例中，视频增强服务可以是HDR视频增强服务。应用获知HDR视频增强服务创建成功后，可通过HDR视频增强客户端使能Texture/Surface view的HDR视频增强能力，HDR视频增强客户端将调用HDR视频增强服务查询当前应用是否有权限，HDR视频增强服务通过权限管理控制是否有权限，若有权限则调用显示引擎服务进行Texture/Surface view的HDR视频增强，以提升屏幕亮度，实现色彩模式的转换，视频标准p3色域。使能HDR视频增强能力后，应用还可以通过HDR视频增强客户端注册亮度监听能力，注册流程与使能HDR视频增强能力一致。亮度监听能力注册成功后，应用将实时获取屏幕亮度信息，并可以根据亮度动态调整视频的显示效果。本实施例示出的视频处理方法，主要涉及视频增强服务的各项能力的注册过程。在确定应用具有使用视频增强服务权限的前提下，应用可以向显示引擎服务发起注册视频增强服务的各项能力，以便使用视频增强服务的各项能力来提升应用中视频画面的显示效果。图11为本申请实施例提供的一种视频处理方法的流程示意图。本实施例涉及图7中的S705，如图11所示，S705注销视频增强服务的各项能力，可以包括以下步骤：S7051.应用通过视频增强服务客户端关闭Texture/Surface view的HDR视频增强能力。应用通过调用视频增强服务客户端的接口，通知视频增强服务客户端注销Texture/Surface view的HDR视频增强能力。S7052.视频增强服务客户端向视频增强服务查询是否有权限关闭Texture/Surface view的HDR视频增强能力。若视频增强服务确定有权限关闭Texture/Surface view的HDR视频增强能力，则执行S7053。S7053.视频增强服务向显示引擎服务发送指示，指示关闭Texture/Surface view的HDR视频增强能力。S7054a.显示引擎服务向视频增强服务发送通知，通知Texture/Surface view的HDR视频增强能力已关闭。S7054b.视频增强服务项视频增强服务客户端发送通知，通知Texture/Surfaceview的HDR视频增强能力已关闭。S7054c.视频增强服务客户端向应用发送通知，通知Texture/Surface view的HDR视频增强能力已关闭。在一些实施例中，还需要注销视频增强服务的亮度监听能力，可以包括以下步骤：S7055.应用通过视频增强服务客户端注销亮度监听能力。S7056.视频增强服务客户端向视频增强服务查询是否有权限注销亮度监听能力。若视频增强服务确定有权限注销亮度监听能力，则执行S7057。S7057.视频增强服务向显示引擎服务发送指示，指示注销亮度监听能力。S7058a.显示引擎服务向视频增强服务发送通知，通知亮度监听能力已注销。S7058b.视频增强服务项视频增强服务客户端发送通知，通知亮度监听能力已注销。S7058c.视频增强服务客户端向应用发送通知，通知亮度监听能力已注销。本实施例中，当用户关闭应用的某一视频播放时，应用需要及时调用关闭HDR视频增强能力接口，以注销HDR视频增强能力，以及调用注销亮度监听接口，以注销亮度监听能力。本实施例示出的视频处理方法，涉及视频增强服务的各项能力的注销过程。在用户关闭应用当前播放的视频时，应用可发起注销视频增强服务的各项能力，以释放设备内存空间，节省设备资源。在一些实施例中，当用户关闭应用时，还需要及时调用HDR视频增强客户端注销HDR视频增强能力，以及调用视频基础服务客户端注销视频基础服务，释放设备内存空间，节省设备资源。基于上述各实施例，下面结合一个具体实施例完整描述本申请的视频处理方案。图12为本申请实施例提供的一种视频处理方法的流程示意图。如图12所示，本实施例的视频处理方法，包括以下步骤：S7011.应用向视频基础服务客户端发送指示，指示创建视频基础服务。S7012.视频基础服务客户端向视频服务管理模块发送指示，指示设置状态回调监听器。S7013.视频服务管理模块管理监听器。S7014.视频服务管理模块通过监听器向视频基础服务客户端发送通知，通知视频基础服务创建成功。S7015.视频基础服务客户端向应用发送通知，通知视频基础服务创建成功。在视频基础服务创建成功后，执行以下步骤：S7021.应用向视频基础服务客户端发送指示，指示初始化视频基础服务。S7022.视频基础服务客户端执行初始化视频基础服务，查询相关能力，并提供相关能力的接口信息。S7023.视频服务管理模块通过与媒体鉴权服务中的视频基础服务交互，绑定视频基础服务。S7024a.视频服务管理模块向视频基础服务客户端通知视频基础服务绑定成功。S7024b.视频基础服务客户端向应用通知视频基础服务绑定成功。若视频基础服务初始化成功，则执行以下步骤：S7025a.视频基础服务向视频服务管理模块发送通知，通知视频基础服务初始化成功。S7025b.视频服务管理模块通过监听器向应用发送通知，通知视频基础服务初始化成功。在一些实施例中，在视频基础服务初始化成功后，还可以执行以下步骤：S1210.应用使用HDR Vivid接口。应用通过视频基础服务客户端调用HDR Vivid接口。S1220.视频基础服务客户端查询是否具有HDR Vivid能力。视频基础服务客户端通过与视频基础服务交互，查询是否具有HDR Vivid能力。若视频基础服务查询到HDR Vivid能力，则执行S1230。S1230.视频基础服务向视频基础服务客户端发送通知，通知成功查询到HDRVivid能力。S1240.视频基础服务客户端向应用发送通知，通知成功查询到HDR Vivid能力。至此，应用可以使用设备的HDR Vivid能力，以提升视频画质。在一些实施例中，在视频基础服务初始化成功后，除了执行上述S1210至S1240外，还可以执行以下步骤：S7031.应用向视频基础服务客户端查询是否支持视频增强服务。若视频基础服务客户端确定支持视频增强服务，则执行S7032。S7032.应用向视频基础服务客户端发送指示，指示创建视频增强服务。S7033.视频基础服务客户端实例化视频增强服务客户端。S7034.视频增强服务客户端向视频服务管理模块发送指示，指示创建视频增强服务。S7035.视频服务管理模块通过与媒体鉴权服务中的视频增强服务交互，绑定视频增强服务。S7036a.视频服务管理模块向视频增强服务客户端通知视频增强服务绑定成功。S7036b.视频增强服务客户端向视频基础服务客户端通知视频增强服务绑定成功。S7036c.视频基础服务客户端向应用通知视频增强服务绑定成功。在S7035之后，还包括以下步骤：S7037a.视频增强服务向云端鉴权服务发送权限校验请求。权限校验请求用于请求校验应用是否有权限使用设备的视频增强服务。S7037b.云端鉴权服务向视频增强服务返回权限校验结果。权限校验结果用于指示应用有或没有权限使用视频增强服务。S7038.视频增强服务管理权限校验结果。若权限校验结果指示应用有权限使用视频增强服务，还可以执行以下步骤：S7039a.视频增强服务向视频服务管理模块发送通知，通知视频增强服务创建成功。S7039b.视频服务管理模块通过监听器向应用发送通知，通知视频增强服务创建成功。在视频增强服务创建成功后，还可以执行以下步骤：S7041.应用通过视频增强服务客户端使能Texture/Surface view的HDR视频增强能力。S7042.视频增强服务客户端向视频增强服务查询是否有权限使用Texture/Surface view的HDR视频增强能力。若视频增强服务确定有权限使用Texture/Surface view的HDR视频增强能力，则执行S7043。S7043.视频增强服务向显示引擎服务发送指示，指示使能Texture/Surface view的HDR视频增强能力。S7044a.显示引擎服务向视频增强服务发送通知，通知可使用Texture/Surfaceview的HDR视频增强能力。S7044b.视频增强服务向视频增强服务客户端发送通知，通知可使用Texture/Surface view的HDR视频增强能力。S7044c.视频增强服务客户端向应用发送通知，通知可使用Texture/Surfaceview的HDR视频增强能力。S7045.应用向视频增强服务客户端发送指示，指示注册亮度监听能力。S7046.视频增强服务客户端向视频增强服务查询是否有权限使用亮度监听能力。若视频增强服务确定有权限使用亮度监听能力，则执行S7047。S7047.视频增强服务向显示引擎服务注册亮度监听能力。S7048a.显示引擎服务向视频增强服务发送通知，通知亮度监听能力注册成功。S7048b.视频增强服务向视频增强服务客户端发送通知，通知亮度监听能力注册成功。S7048c.视频增强服务客户端向应用发送通知，通过亮度监听能力注册成功。需要说明的是，本实施例对于应用使能Texture/Surface view的HDR视频增强能力，以及应用注册亮度监听能力的执行顺序不作限定，上述执行顺序仅作为示例。在一些实施例中，当用户关闭应用中的视频时，可以执行以下步骤：S7051.应用通过视频增强服务客户端关闭Texture/Surface view的HDR视频增强能力。S7052.视频增强服务客户端向视频增强服务查询是否有权限关闭Texture/Surface view的HDR视频增强能力。若视频增强服务确定有权限关闭Texture/Surface view的HDR视频增强能力，则执行S7053。S7053.视频增强服务向显示引擎服务发送指示，指示关闭Texture/Surface view的HDR视频增强能力。S7054a.显示引擎服务向视频增强服务发送通知，通知Texture/Surface view的HDR视频增强能力已关闭。S7054b.视频增强服务项视频增强服务客户端发送通知，通知Texture/Surfaceview的HDR视频增强能力已关闭。S7054c.视频增强服务客户端向应用发送通知，通知Texture/Surface view的HDR视频增强能力已关闭。S7055.应用通过视频增强服务客户端注销亮度监听能力。S7056.视频增强服务客户端向视频增强服务查询是否有权限注销亮度监听能力。若视频增强服务确定有权限注销亮度监听能力，则执行S7057。S7057.视频增强服务向显示引擎服务发送指示，指示注销亮度监听能力。S7058a.显示引擎服务向视频增强服务发送通知，通知亮度监听能力已注销。S7058b.视频增强服务项视频增强服务客户端发送通知，通知亮度监听能力已注销。S7058c.视频增强服务客户端向应用发送通知，通知亮度监听能力已注销。需要说明的是，本实施例对于应用关闭Texture/Surface view的HDR视频增强能力，以及应用注销亮度监听能力的执行顺序不作限定，上述执行顺序仅作为示例。在一些实施例中，当用户关闭应用时，可以执行以下步骤：S7061.应用向视频增强服务客户端发送指示，指示注销视频增强服务。S7062.视频增强服务客户端向应用发送通知，通知视频增强服务已注销。S7071.应用向视频基础服务客户端发送指示，指示注销视频基础服务。S7072.视频基础服务客户端向应用发送通知，通知视频基础服务已注销。本实施例示出的视频处理方法中的各个步骤可参见图7至图11的说明，此处不再赘述。本申请实施例提出一种视频处理方法，应用于电子设备，在该方法中，电子设备检测到播放目标应用中视频的操作，验证目标应用是否有权限使用第一视频服务，第一视频服务为电子设备提供的用于优化视频播放效果的服务；若目标应用有权限使用第一视频服务，电子设备调用第一视频服务的各项能力，对目标应用中的视频的画质进行优化处理。本实施例中，第一视频服务可对应图7所示的视频增强服务，视频增强服务包括例如高动态范围HDR视频增强服务。目标应用可以是具备视频播放能力的应用，例如视频类应用，游戏类应用，社交类应用，购物类应用等第三方应用。本实施例示出了用户在触发播放目标应用中的视频时，电子设备通过验证目标应用是否有权限使用设备的显示引擎能力，确定是否调用设备的显示引擎能力对该目标应用的视频画质进行优化处理，以解决目前第三方应用无法充分利用设备显示引擎能力的问题，提升用户观看视频的体验。在一些实施例中，检测到播放目标视频的操作，包括：检测到开启目标应用的第一操作；或者，检测到开启目标应用的第一操作，并检测到开启目标应用中的目标视频的第二操作。本实施例示出了两种具体的应用场景：一种场景中，用户点击打开目标应用，目标应用的显示界面提供多个视频资源，用户可点击观看显示界面中的任一视频资源，在用户点击任一视频资源时，触发设备验证目标应用是否有权限使用第一视频服务。另一种场景中，用户点击打开目标应用，目标应用直接播放某一视频资源，如短视频，此时触发设备验证目标应用是否有权限使用第一视频服务。在一些实施例中，电子设备验证目标应用是否有权限使用第一视频服务，包括：电子设备向云端服务器发送第一请求，第一请求用于请求验证目标应用是否有权限使用第一视频服务；电子设备接收来自云端服务器的第一响应，第一响应用于指示目标应用有权限使用第一视频服务，或者指示目标应用没有权限使用第一视频服务。本实施例中，云端服务器可以是电子设备的云端服务器，云端服务器可用于为目标应用分配使用电子设备显示引擎能力的权限标识，如下述的第二标识，云端服务器还用于校验某一目标应用是否有权限使用电子设备的显示引擎能力。显示引擎能力包括第一视频服务的各项能力，如HDR视频增强，HDR Vivid等。本实施例示出了电子设备通过云端服务器验证目标应用是否有权限使用当前设备的第一视频服务，以提升该应用视频播放的画质。在一些实施例中，第一请求包括目标应用的第一标识，目标应用的第二标识的至少一项；第一标识用于指示目标应用的名称，第二标识为云端服务器为目标应用分配的标识。本实施例中，目标应用的名称也可称为目标应用的包名。第一请求包括第一标识，第二标识的至少一项，云端服务器可通过本地查询，确定是否目标应用是否有权限使用设备的第一视频服务，若本地存储有对目标应用的分配记录，如记录了目标应用的第一标识和第二标识的对应关系，则确定目标应用有权限使用设备的第一视频服务。在一些实施例中，电子设备调用第一视频服务的各项能力之前，视频处理方法还包括：电子设备创建第一视频服务；电子设备初始化第一视频服务。本实施例中，校验第一视频服务，即验证目标应用是否有权限使用第一视频服务，发生在创建第一视频服务的过程中，具体可参照附图9。本实施例示出了在电子设备调用第一视频服务的各项能力之前，设备需要完成对第一视频服务的创建、初始化和鉴权，以便应用能够使用设备的显示引擎能力。在一些实施例中，电子设备验证目标应用是否有权限使用第一视频服务之前，视频处理方法还包括：电子设备创建和初始化第二视频服务，第二视频服务是创建第一视频服务的基础性服务。本实施例中，第二视频服务可对应图7所示的视频基础服务，第二视频服务可用于管理第一视频服务的多种能力。本实施例示出的对第二视频服务的创建和初始化，是应用使用第一视频服务的前提，只有在完成第二视频服务的创建和初始化后，才能够使用第一视频服务的各项能力。在一些实施例中，检测到关闭目标应用中视频的第三操作，电子设备注销第一视频服务。本实施例示出了注销第一视频服务的触发条件，以释放设备内存空间，节省设备资源。在一些实施例中，检测到关闭目标应用的第四操作，电子设备注销第二视频服务。本实施例示出了注销第二视频服务的触发条件，以释放设备内存空间，节省设备资源。在一些实施例中，第一视频服务的各项能力包括以下至少一项：对高动态范围HDR视频的亮度的调节能力；对HDR视频的色彩的调节能力；对HDR视频对应的图层的亮度的调节能力；对HDR视频对应的图层的色彩的调节能力。本申请实施例还提供一种电子设备，该电子设备可以是终端设备也可以是内置于终端设备的电路设备。该电子设备可以用于执行上述方法实施例中的方法或步骤。图13为本申请实施例提供的一种电子设备的结构示意图，如图13所示，电子设备包括处理器1301，通信线路1304以及至少一个通信接口。处理器1301可以是一个通用中央处理器，微处理器，特定应用集成电路，或一个或多个用于控制本申请方案程序执行的集成电路。通信线路1304可包括在上述组件之间传送信息的电路。通信接口1303，使用任何收发器一类的装置，用于与其他设备或通信网络通信，如以太网，无线局域网等。在一些实施例中，电子设备还可以包括存储器1302。存储器1302可以是只读存储器或可存储静态信息和指令的其他类型的静态存储设备，随机存取存储器或者可存储信息和指令的其他类型的动态存储设备，也可以是电可擦可编程只读存储器、只读光盘或其他光盘存储、光碟存储、磁盘存储介质或者其他磁存储设备、或者能够用于携带或存储具有指令或数据结构形式的期望的程序代码并能够由计算机存取的任何其他介质，但不限于此。存储器可以是独立存在，通过通信线路1304与处理器相连接。存储器也可以和处理器集成在一起。存储器1302用于存储执行本申请方案的计算机执行指令，并由处理器1301来控制执行。处理器1301用于执行存储器1302中存储的计算机执行指令，从而实现本申请实施例所提供的视频处理方法。本申请实施例中的计算机执行指令也可以称之为应用程序代码，本申请实施例对此不作具体限定。作为一种示例，处理器1301可以包括一个或多个CPU，例如图13中的CPU0和CPU1。作为一种示例，电子设备可以包括多个处理器，例如图13中的处理器1301和处理器1305。这些处理器中的每一个可以是一个单核处理器，也可以是一个多核处理器。这里的处理器可以指一个或多个设备、电路、和/或用于处理数据的处理核。在一些实施例中，电子设备还可以包括显示屏1306，显示屏1306用于播放处理后的视频。图14为本申请实施例提供的一种芯片的结构示意图。如图14所示，芯片1400包括一个或两个以上处理器1420和通信接口1430。在一些实施例中，存储器1440存储了如下的元素：可执行模块或者数据结构，或者，可执行模块或者数据结构的子集，或者，可执行模块或者数据结构的扩展集。本申请实施例中，存储器1440可以包括只读存储器和随机存取存储器，并向处理器1420提供指令和数据。存储器1440的一部分还可以包括非易失性随机存取存储器。本申请实施例中，存储器1440、通信接口1430以及存储器1440通过总线系统1410耦合在一起。其中，总线系统1410除包括数据总线之外，还可以包括电源总线、控制总线和状态信号总线等。为了便于描述，在图14中将各种总线都标为总线系统1410。上述本申请实施例描述的方法可以应用于处理器1420中，或者由处理器1420实现。处理器1420可能是一种集成电路芯片，具有信号的处理能力。在实现过程中，上述方法的各步骤可以通过处理器1420中的硬件的集成逻辑电路或者软件形式的指令完成。上述的处理器1420可以是通用处理器、数字信号处理器、专用集成电路、现成可编程门阵列或者其他可编程逻辑器件、分立门、晶体管逻辑器件或分立硬件组件，处理器1420可以实现或者执行本发明实施例中的公开的各方法、步骤及逻辑框图。上述实施例中，存储器存储的供处理器执行的指令可以以计算机程序产品的形式实现。计算机程序产品可以是事先写入在存储器中，也可以是以软件形式下载并安装在存储器中。本申请实施例还提供一种计算机程序产品，计算机程序产品包括一个或多个计算机指令。在电子设备上加载和执行计算机程序指令时，使得电子设备执行上述实施例中的技术方案，其实现原理和技术效果与上述相关实施例类似，此处不再赘述。计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一计算机可读存储介质传输，例如，计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线或无线方式向另一个网站站点、计算机、服务器或数据中心进行传输。本申请实施例还提供了一种计算机可读存储介质，计算机可读存储介质存储有计算机指令，当所述计算机指令在电子设备上运行时，使得所述电子设备执行上述实施例中的技术方案，其实现原理和技术效果与上述相关实施例类似，此处不再赘述。计算机可读存储介质可以包括计算机存储介质和通信介质，还可以包括任何可以将计算机程序从一个地方传送到另一个地方的介质。计算机可读存储介质可以包括：紧凑型光盘只读储存器CD-ROM、RAM、ROM、EEPROM或其它光盘存储器；计算机可读存储介质可以包括磁盘存储器或其它磁盘存储设备。而且，任何连接线也可以被适当地称为计算机可读存储介质。例如，如果使用同轴电缆，光纤电缆，双绞线，DSL或无线技术从网站，服务器或其它远程源传输软件，则同轴电缆，光纤电缆，双绞线，DSL或诸如红外，无线电和微波之类的无线技术包括在介质的定义中。如本文所使用的磁盘和光盘包括光盘，激光盘，光盘，数字通用光盘，软盘和蓝光盘，其中磁盘通常以磁性方式再现数据，而光盘利用激光光学地再现数据。以上，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以权利要求的保护范围为准。
