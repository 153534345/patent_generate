标题title
一种高速编织机智能控制方法及系统
摘要abst
本发明涉及编织机智能控制技术领域，具体涉及一种高速编织机智能控制方法及系统。该方法首先获取编织线缆图像，构建局部搜索窗口和邻域窗口；构建局部搜索窗口对应的局部高斯曲线，构建编织线缆图像对应的全局高斯曲线，确定局部高斯曲线与全局高斯曲线的偏移程度；基于偏移程度对局部搜索窗口进行聚类处理，得到多个窗口聚类簇；根据窗口聚类簇内各局部搜索窗口对应的偏移程度、相似程度和局部搜索窗口内邻域窗口的灰度变化程度确定邻域窗口的高斯权重；基于高斯权重对图像滤波得到滤波线缆图像，得到编织节距，基于编织节距控制编织机。本发明进行局部分析增加了算法灵活性，并且能够较好的滤除图像噪声，保留图像的有效信息。
权利要求书clms
1.一种高速编织机智能控制方法，其特征在于，该方法包括以下步骤：获取编织线缆图像，并构建局部搜索窗口和邻域窗口；其中，邻域窗口的尺寸小于局部搜索窗口；根据邻域窗口中像素点的像素值差异确定邻域窗口的灰度变化程度；根据任意两个邻域窗口对应的灰度变化程度的差异确定局部相似映射值；基于每个局部搜索窗口内邻域窗口间灰度变化程度的差异和对应的局部相似映射值构建高斯曲线，作为局部高斯曲线，基于所有局部搜索窗口内邻域窗口间灰度变化程度的差异和对应的局部相似映射值构建高斯曲线，作为全局高斯曲线，确定局部高斯曲线与全局高斯曲线的偏移程度；基于所述偏移程度对局部搜索窗口进行聚类处理，得到多个窗口聚类簇；根据窗口聚类簇内各局部搜索窗口对应的偏移程度、相似程度和局部搜索窗口内邻域窗口的灰度变化程度确定邻域窗口的高斯权重；基于各邻域窗口对应的高斯权重对编织线缆图像进行滤波，得到滤波线缆图像；基于所述滤波线缆图像得到编织节距，基于所述编织节距控制编织机。2.根据权利要求1所述的一种高速编织机智能控制方法，其特征在于，所述根据邻域窗口中像素点的像素值差异确定邻域窗口的灰度变化程度，包括：获取邻域窗口内所有像素点的像素值均值；计算像素值均值与邻域窗口内所有像素点的像素值的差值绝对值的均值，作为差异均值；将所述像素值均值和所述差异均值的乘积作为邻域窗口的灰度变化程度。3.根据权利要求1所述的一种高速编织机智能控制方法，其特征在于，所述根据任意两个邻域窗口对应的灰度变化程度的差异确定局部相似映射值，包括：对于局部搜索窗口内任意两个邻域窗口，将两个邻域窗口的灰度变化程度的差值绝对值，作为变化差异；对所述变化差异进行反比例归一化映射，将映射值作为两个邻域窗口对应的局部相似映射值。4.根据权利要求1所述的一种高速编织机智能控制方法，其特征在于，所述确定局部高斯曲线与全局高斯曲线的偏移程度，包括：将每个局部搜索窗口内每两个邻域窗口对应的灰度变化程度的均值，作为局部搜索窗口的局部均值；将局部搜索窗口的局部均值作为分子，将编织线缆图像中所有局部搜索窗口的局部均值的均值作为分母，以分子和分母的比值作为局部搜索窗口的偏移权重；将局部搜索窗口对应的局部高斯曲线和全局高斯曲线的最大幅值的差值的平方，作为第一偏差值；将局部高斯曲线和全局高斯曲线的最大幅值对应的横坐标的差值的平方，作为第二偏差值；将第一偏差值和第二偏差值的和值的算术平方根作为局部搜索窗口对应的函数偏差值；根据局部搜索窗口对应的所述偏移权重和函数偏差值确定局部搜索窗口对应的局部高斯曲线和全局高斯曲线的偏移程度；所述偏移权重、所述函数偏差值均与偏移程度呈正相关。5.根据权利要求1所述的一种高速编织机智能控制方法，其特征在于，所述高斯权重的计算公式为：其中，Mdtj为第d个窗口聚类簇内第t个局部搜索窗口中第j个邻域窗口的高斯权重；m为第d个窗口聚类簇内的局部搜索窗口的数量；Wdt为第d个窗口聚类簇内第t个局部搜索窗口对应的偏移程度；fda为第d个聚类簇内第a个局部搜索窗口内所有邻域窗口的局部相似映射值的均值；fdb为第d个聚类簇内第b个局部搜索窗口内所有邻域窗口的局部相似映射值的均值；Hdtj为第d个窗口聚类簇的第t个局部搜索窗口中第j个邻域窗口的灰度变化程度；J为第d个窗口聚类簇的第t个局部搜索窗口中邻域窗口的数量。6.根据权利要求1所述的一种高速编织机智能控制方法，其特征在于，所述基于所述滤波线缆图像得到编织节距，包括：获取所述滤波线缆图像中的编织丝边缘，确定边缘中编织丝节点之间的距离，得到对应的编织目数；获取编织机对应的编织机总锭子数，根据所述编织机总锭子数和所述编织目数得到编织节距。7.根据权利要求1所述的一种高速编织机智能控制方法，其特征在于，所述基于每个局部搜索窗口内邻域窗口间灰度变化程度的差异和对应的局部相似映射值构建高斯曲线，作为局部高斯曲线，包括：将局部搜索窗口内每两个邻域窗口对应的灰度变化程度的差值作为局部高斯函数的自变量，将两个邻域窗口对应的局部相似映射值作为局部高斯函数的因变量，局部高斯曲线为局部高斯函数对应的高斯曲线。8.根据权利要求1所述的一种高速编织机智能控制方法，其特征在于，所述基于所述编织节距控制编织机，包括：当得到的编织节距大于理想编织节距时，对编织机进行编织丝增加股数的控制操作；当得到的编织节距小于理想编织节距时，对编织机进行编织丝减少股数的控制操作。9.一种高速编织机智能控制系统，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1～8任意一项所述一种高速编织机智能控制方法的步骤。
说明书desc
技术领域本发明涉及编织机智能控制技术领域，具体涉及一种高速编织机智能控制方法及系统。背景技术中型高速编织机主要适用于编织数据通信线缆、控制线缆、数字线缆、音频线缆等各种线缆的网状屏蔽层，部分线缆为了有更好的屏蔽效果，需进行两次编织，形成两层屏蔽层。但现有中型高速编织机由于结构设计原因，一次只能编织一层屏蔽层，而且编织机芯与牵引是机械传动，编织节距是通过改变两者间的传动齿轮齿数比来调节的。线缆若要形成两道屏蔽层，需依次完成两次放线、编织、牵引、收线的过程，这增加了线缆损伤的风险，降低线缆产品质量，并且由于收、放线耗时长，导致生产效率低下，操作劳动强度大。在对编织节距进行调整时，需要采集编织效果的图像，然后根据编织节点之间的距离来进行节距的调节。但是在采集图像时通常环境较为复杂，会有较多的噪声，因此为了准确的识别出节点之间的距离，需要对采集到的图像进行去噪。在现有技术中，对图像去噪的算法较多，其中非局部均值滤波算法具有很好的去噪效果，该算法利用图像中的所有像素点，这些像素点根据某种相似度进行加权平均。使得滤波后的图像清晰度更高，而且不丢失细节。但是非局部均值滤波算法需要在整个图像范围内判断像素间的相似度，也就是说，对每个像素点进行处理时，都要计算像素点与图像中其他所有像素点间的相似度，计算任务量较大，会出现算法的运行速度太慢，耗时长的问题。发明内容为了解决非局部均值滤波算法对图像进行滤波，计算任务量大的技术问题，本发明的目的在于提供一种高速编织机智能控制方法及系统，所采用的技术方案具体如下：第一方面，本发明一个实施例提供了一种高速编织机智能控制方法，该方法包括以下步骤：获取编织线缆图像，并构建局部搜索窗口和邻域窗口；其中，邻域窗口的尺寸小于局部搜索窗口；根据邻域窗口中像素点的像素值差异确定邻域窗口的灰度变化程度；根据任意两个邻域窗口对应的灰度变化程度的差异确定局部相似映射值；基于每个局部搜索窗口内邻域窗口间灰度变化程度的差异和对应的局部相似映射值构建高斯曲线，作为局部高斯曲线，基于所有局部搜索窗口内邻域窗口间灰度变化程度的差异和对应的局部相似映射值构建高斯曲线，作为全局高斯曲线，确定局部高斯曲线与全局高斯曲线的偏移程度；基于所述偏移程度对局部搜索窗口进行聚类处理，得到多个窗口聚类簇；根据窗口聚类簇内各局部搜索窗口对应的偏移程度、相似程度和局部搜索窗口内邻域窗口的灰度变化程度确定邻域窗口的高斯权重；基于各邻域窗口对应的高斯权重对编织线缆图像进行滤波，得到滤波线缆图像；基于所述滤波线缆图像得到编织节距，基于所述编织节距控制编织机。优选的，所述根据邻域窗口中像素点的像素值差异确定邻域窗口的灰度变化程度，包括：获取邻域窗口内所有像素点的像素值均值；计算像素值均值与邻域窗口内所有像素点的像素值的差值绝对值的均值，作为差异均值；将所述像素值均值和所述差异均值的乘积作为邻域窗口的灰度变化程度。优选的，所述根据任意两个邻域窗口对应的灰度变化程度的差异确定局部相似映射值，包括：对于局部搜索窗口内任意两个邻域窗口，将两个邻域窗口的灰度变化程度的差值绝对值，作为变化差异；对所述变化差异进行反比例归一化映射，将映射值作为两个邻域窗口对应的局部相似映射值。优选的，所述确定局部高斯曲线与全局高斯曲线的偏移程度，包括：将每个局部搜索窗口内每两个邻域窗口对应的灰度变化程度的均值，作为局部搜索窗口的局部均值；将局部搜索窗口的局部均值作为分子，将编织线缆图像中所有局部搜索窗口的局部均值的均值作为分母，以分子和分母的比值作为局部搜索窗口的偏移权重；将局部搜索窗口对应的局部高斯曲线和全局高斯曲线的最大幅值的差值的平方，作为第一偏差值；将局部高斯曲线和全局高斯曲线的最大幅值对应的横坐标的差值的平方，作为第二偏差值；将第一偏差值和第二偏差值的和值的算术平方根作为局部搜索窗口对应的函数偏差值；根据局部搜索窗口对应的所述偏移权重和函数偏差值确定局部搜索窗口对应的局部高斯曲线和全局高斯曲线的偏移程度；所述偏移权重、所述函数偏差值均与偏移程度呈正相关。优选的，所述高斯权重的计算公式为：其中，Mdtj为第d个窗口聚类簇内第t个局部搜索窗口中第j个邻域窗口的高斯权重；m为第d个窗口聚类簇内的局部搜索窗口的数量；Wdt为第d个窗口聚类簇内第t个局部搜索窗口对应的偏移程度；fda为第d个聚类簇内第a个局部搜索窗口内所有邻域窗口的局部相似映射值的均值；fdb为第d个聚类簇内第b个局部搜索窗口内所有邻域窗口的局部相似映射值的均值；Hdtj为第d个窗口聚类簇的第t个局部搜索窗口中第j个邻域窗口的灰度变化程度；J为第d个窗口聚类簇的第t个局部搜索窗口中邻域窗口的数量。优选的，所述基于所述滤波线缆图像得到编织节距，包括：获取所述滤波线缆图像中的编织丝边缘，确定边缘中编织丝节点之间的距离，得到对应的编织目数；获取编织机对应的编织机总锭子数，根据所述编织机总锭子数和所述编织目数得到编织节距。优选的，所述基于每个局部搜索窗口内邻域窗口间灰度变化程度的差异和对应的局部相似映射值构建高斯曲线，作为局部高斯曲线，包括：将局部搜索窗口内每两个邻域窗口对应的灰度变化程度的差值作为局部高斯函数的自变量，将两个邻域窗口对应的局部相似映射值作为局部高斯函数的因变量，局部高斯曲线为局部高斯函数对应的高斯曲线。优选的，所述基于所述编织节距控制编织机，包括：当得到的编织节距大于理想编织节距时，对编织机进行编织丝增加股数的控制操作；当得到的编织节距小于理想编织节距时，对编织机进行编织丝减少股数的控制操作。第二方面，本发明一个实施例提供了一种高速编织机智能控制系统，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述一种高速编织机智能控制方法。本发明实施例至少具有如下有益效果：本发明构建邻域窗口和局部搜索窗口，在确定邻域窗口的灰度变化程度之后；根据局部搜索窗口内任意两个邻域窗口对应的灰度变化程度的差异确定局部相似映射值；灰度变化程度反映了邻近像素点之间的灰度变化情况，实现了对像素点的局部分析，而局部相似映射值和灰度变化程度的差异之间的关系反映了局部搜索窗口内任意两个邻域窗口中灰度变化情况的相关联程度，实现了对相邻的窗口之间的灰度变化情况的分析。构建局部搜索窗口对应的局部高斯曲线和全局对应的全局高斯曲线，根据局部高斯曲线与全局高斯曲线的偏移情况实现对局部搜索窗口的分类，将较为相似的局部搜索窗口划分至同一窗口聚类簇中；确定邻域窗口的高斯权重，实现对每个邻域窗口进行高斯权重自适应分配，进而基于高斯权重进行滤波得到滤波线缆图像，实现编织节距的获取，最后基于编织节距准确控制编织机。本发明根据局部进行分析，能够有效的节省了算法在计算像素点间的相似度时的耗时长的问题，增加了算法灵活性，并且能够较好的滤除图像噪声，保留图像的有效信息。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例所提供的一种高速编织机智能控制方法的方法流程图；图2为本发明一个实施例所提供的编织机编织的效果的示意图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种高速编织机智能控制方法及系统，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。本发明实施例提供了一种高速编织机智能控制方法及系统的具体实施方法，该方法适用于编织机编织场景。为了解决在对高速编织机进行控制时，需要通过图像来获得编织机的编织节距，但是受到采集环境的影响，需要对得到的图像进行去噪处理，在通过非局部均值滤波算法进行去噪时，每处理一个像素点都需要计算它与图像中所有像素点之间的相似度，存在运行速度太慢，耗费时间较长的问题。本发明根据局部进行分析，能够有效的节省了算法在计算像素点间的相似度时的耗时长的问题，增加了算法灵活性，并且能够较好的滤除图像噪声，保留图像的有效信息。下面结合附图具体的说明本发明所提供的一种高速编织机智能控制方法及系统的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种高速编织机智能控制方法的方法流程图，该方法包括以下步骤：步骤S100，获取编织线缆图像，并构建局部搜索窗口和邻域窗口；其中，邻域窗口的尺寸小于局部搜索窗口。本发明的主要目的是为了对编织机编织的线缆图像进行去噪，因此首先需要采集高速编织机编织的初始线缆图像，在采集初始线缆图像时，通过在编织机的上方安装高速CCD工业相机，每间隔1分钟的时间采集一次编织好的初始线缆图像，采集初始线缆图像时需要清晰的获得编织节点。该初始线缆图像为RGB图像，进一步的对初始线缆图像进行灰度化，将得到的灰度图像作为编织线缆图像，然后将获得编织线缆图像传输到控制系统中。需要说明的是对初始线缆图像进行灰度化是为了便于后续对线缆图像的分析计算。图像视频去噪的最终目的是改善给定的图像，解决实际图像由于噪声干扰而导致图像质量下降的问题。通过去噪技术可以有效地提高图像质量，增大信噪比，更好的体现原来图像所携带的信息，在现有的去噪算法中，有的去噪算法在低维信号图像处理中取得较好的效果，却不适用于高维信号图像处理；或者去噪效果较好，却丢失部分图像边缘信息。非局部均值滤波算法在对图像进行去噪时，通过计算当前滤波点的邻域块与邻域窗口内其它点的邻域块的相似度来计算权重，相似度越大则权重越大。该算法需要在整个图像范围内判断像素间的相似度，也就是说每处理一个像素点时，都要计算它与图像中所有像素点间的相似度，导致计算量很大，因此本发明对去噪技术进行改进，减少计算量，提高去噪的效率。首先构建两种搜索窗口：局部搜索窗口和邻域窗口。其中，邻域窗口小于局部搜索窗口。在本发明实施例中将大小为24*24的搜索窗口定义为局部搜索窗口，将大小为3*3的搜索窗口定义为邻域窗口，在其他实施例中实施者可以根据实际情况调整该取值。例如也可以将5*5大小的搜索窗口作为邻域窗口，将25*25大小的搜索窗口作为局部搜索窗口。邻域窗口包含在局部搜索窗口内，实现对像素点进行局部匹配，而局部搜索窗口是对整幅图像进行遍历，来反映局部像素点的变化。定义两种搜索窗口的目的是为了通过像素搜索来确定局部窗口的噪声影响程度，然后对相似局部区域进行匹配，那么在进行匹配的时候就能够获得全局的噪声影响程度，从而减小像素点的搜索次数，进而减小算法迭代过程的冗余。步骤S200，根据邻域窗口中像素点的像素值差异确定邻域窗口的灰度变化程度；根据任意两个邻域窗口对应的灰度变化程度的差异确定局部相似映射值。在进行像素搜索的时候，局部搜索窗口从编织线缆图像的左上侧开始遍历，邻域窗口在局部搜索窗口的内部进行像素点搜索，遍历局部搜索窗口的每一个像素点。在进行遍历时，计算每一个邻域窗口的灰度变化程度。故计算像素点的邻域窗口的灰度变化程度，也可以说是根据编织线缆图像中每个像素点与邻域内像素点的像素值差异确定灰度变化程度。该灰度变化程度的获取方法为：获取邻域窗口内所有像素点的像素值均值；计算像素值均值与邻域窗口内所有像素点的像素值的差值绝对值的均值，作为差异均值；将所述像素值均值和所述差异均值的乘积作为邻域窗口的灰度变化程度。该灰度变化程度的计算公式为：其中，Htj为第t个局部搜索窗口中第j个邻域窗口的灰度变化程度；为第t个局部搜索窗口中第j个邻域窗口内像素点的像素值均值；/＞为第t个局部搜索窗口中第j个邻域窗口对应的差异均值，也可以说是第t个局部搜索窗口中第j个邻域窗口内所有像素点的像素值和像素值均值的差值绝对值的均值；/＞为第t个局部搜索窗口中第j个邻域窗口内第i个像素点的灰度值。由于本发明实施例中的邻域窗口的大小为3*3，也即邻域窗口内有9个像素点，故邻域窗口内像素点的数量为9。该灰度变化程度的计算公式中将像素值均值作为邻域窗口灰度值差异的权重。因为在后续进行邻域窗口的匹配时，需要精确的反映每个邻域窗口内像素值的变化情况，故进一步的通过反映邻域窗口内像素值的灰度变化。计算灰度变化程度的目的是为了后续构建局部搜索窗口的映射关系。通过邻域窗口对局部搜索窗口进行遍历，然后根据邻域窗口间的灰度变化程度对局部搜索窗口进行函数映射，获得每一个局部搜索窗口的映射集合。具体的：基于构建好的局部搜索窗口，根据局部搜索窗口内任意两个邻域窗口对应的灰度变化程度确定局部相似映射值。其中，局部相似映射值的获取方法为：对于局部搜索窗口内任意两个邻域窗口，将两个邻域窗口的灰度变化程度的差值绝对值，作为变化差异；对所述变化差异进行反比例归一化映射，将映射值作为两个邻域窗口对应的局部相似映射值。该局部相似映射值的计算公式为：其中，ft为第t个局部搜索窗口中邻域窗口j1与邻域窗口j2对应的局部相似映射值；e为自然常数；Htj1为第t个局部搜索窗口中邻域窗口j1的灰度变化程度；Htj2为第t个局部搜索窗口中邻域窗口j2的灰度变化程度；|Htj1-Htj2|为第t个局部搜索窗口中邻域窗口j1与邻域窗口j2对应的变化差异。获取局部搜索窗口内任意两个邻域窗口对应一个局部相似映射值，局部搜索窗口中对应的所有局部相似映射值构成一个映射集合。变化差异|Htj1-Htj2|反映了局部搜索窗口中两个邻域窗口灰度变化程度的差异，计算变化差异的目的是为了判断两个邻域窗口的相似程度，若变化差异越趋近于0，则其相似度越大。其中通过指数函数对变化差异进行反比例归一化映射，使得变化差异越接近于0时，其相似度越接近于1，对应的得到的局部相似映射值越接近于1，使得变化差异越大时，其相似度越接近于0，对应的得到的局部相似映射值越接近于0，指数函数y＝e-x在x＝0时取得最大值1，在本发明实施例中x即为变化差异。获取每个局部搜索窗口对应的映射集合，由所有局部搜索窗口内的映射集合组成一个函数集合。后续对集合进行分析，获取不同区域的噪声程度。步骤S300，基于每个局部搜索窗口内邻域窗口间灰度变化程度的差异和对应的局部相似映射值构建高斯曲线，作为局部高斯曲线，基于所有局部搜索窗口内邻域窗口间灰度变化程度的差异和对应的局部相似映射值构建高斯曲线，作为全局高斯曲线，确定局部高斯曲线与全局高斯曲线的偏移程度。根据高速编织机编织的效果来看，因为高速编织机编织的图像是菱形块状的，每个菱形块节点之间的距离叫做编织节距。对于编织线缆图像中的每个小菱形来说，噪声含量可能较大，但对于整个编织线缆图像来说，单个小菱形的噪声对整个图像影响不大，即整个图像是最接近无噪的情况，因此可以根据局部与整体的关系，来获得噪声的影响程度，即局部越接近整体，局部噪声含量越小。请参阅图2，图2为编织机编织效果的示意图。因为噪声会影响对节点的识别，并且不同的菱形区域其噪声的影响程度是不相同的，因此可以根据构建的局部搜索窗口与邻域窗口的关系来判断每个菱形的噪声影响程度。因此根据上述获得的映射集合和函数集合来进行判断噪声的分布。本发明通过构建邻域窗口与局部搜索窗口之间的映射关系，来反映邻域窗口间的相关性，那么在对整张编织线缆图像进行分析时，可以通过分析整张编织线缆图像与各局部搜索窗口间的关系来获得噪声的影响程度。因为每一个局部搜索窗口包含的像素点都是整幅图像的一部分，噪声的分布是呈现高斯分布的，那么整幅图像包含多少个局部搜索窗口就会有多少个高斯函数，每个高斯函数对应一个高斯曲线。并且根据每一个搜索窗口构建的映射集合是对全局的噪声描述，其也是呈现高斯分布的。那么此时根据每一个局部搜索窗口的高斯函数与全局的高斯函数来确定邻域间的相似性权重。不同的局部搜索窗口其高斯曲线的分布是不同的，影响高斯曲线的分布主要是图像的灰度差异，因此根据各个局部搜索窗口与全局图像对应的高斯曲线之间的差异来确定相似的局部搜索窗口。基于局部搜索窗口内邻域窗口的灰度变化程度和局部相似映射值构建高斯曲线，作为局部高斯曲线，具体的：将局部搜索窗口内每两个邻域窗口对应的灰度变化程度的差值作为高斯曲线的自变量，将两个邻域窗口对应的局部相似映射值作为高斯曲线的因变量，局部高斯曲线为局部高斯函数对应的高斯曲线。其中，每个局部搜索窗口对应一个局部高斯函数，每个局部高斯函数有对应的高斯曲线。基于所有局部搜索窗口内邻域窗口的灰度变化程度和局部相似映射值构建高斯曲线，作为全局高斯曲线，具体的：将所有局部搜索窗口内每两个邻域窗口对应的灰度变化程度的差值作为全局高斯曲线的自变量，将两个邻域窗口对应的局部相似映射值作为全局高斯曲线的因变量，全局高斯曲线为全局高斯函数对应的高斯曲线。在本发明实施例中编织线缆图像即代表全局图像，故全局高斯曲线也即为编织线缆图像对应的全局高斯曲线。局部高斯函数反映的是局部搜索窗口内灰度任意两个邻域窗口对应的灰度变化程度的差值和局部相似映射值的局部对应关系，而全局高斯函数反映的是编织线缆图像中所有局部搜索窗口内任意两个邻域窗口对应的灰度变化程度的差值和局部相似映射值的整体对应关系。在计算不同局部搜索窗口之间的相似性时，通过各局部搜索窗口高斯曲线与编织线缆图像的高斯曲线的偏移程度来进行判断。因为越靠近全局图像的曲线说明其灰度变化越相近，那么所得到的高斯参数大小也是趋近相等的，而不同曲线之间的分布就表示了噪声的影响程度，因此根据高斯曲线的分布来获得相似的局部搜索窗口。故进一步的，根据局部高斯曲线和全局高斯曲线的偏移情况确定偏移程度，具体的：将每个局部搜索窗口内每两个邻域窗口对应的灰度变化程度的均值，作为局部搜索窗口的局部均值；将局部搜索窗口的局部均值作为分子，将编织线缆图像中所有局部搜索窗口的局部均值的均值作为分母，以分子和分母的比值作为局部搜索窗口的偏移权重。将局部搜索窗口对应的局部高斯曲线和全局高斯曲线的最大幅值的差值的平方，作为第一偏差值；将局部高斯曲线和全局高斯曲线的最大幅值对应的横坐标的差值的平方，作为第二偏差值；将第一偏差值和第二偏差值的和值的算术平方根作为局部搜索窗口对应的函数偏差值；根据局部搜索窗口对应的所述偏移权重和函数偏差值确定局部搜索窗口对应的局部高斯曲线和全局高斯曲线的偏移程度。其中，所述偏移权重、所述函数偏差值均与偏移程度呈正相关。作为本发明的一个实施例，偏移程度可以为偏移权重和函数偏差值的乘积。该偏移程度的计算公式为：其中，Wt表示第t个局部搜索窗口对应的局部高斯曲线与编织线缆图像对应的全局高斯曲线的偏移程度；Ht为第t个局部搜索窗口对应的局部均值；H为编织线缆图像中所有局部搜索窗口的局部均值的均值；为第t个局部搜索窗口对应的偏移权重；maxYt为第t个局部搜索窗口对应的局部高斯曲线的最大幅值；maxY为全局高斯曲线的最大幅值；2为第t个局部搜索窗口对应的第一偏差值；Xt为第t个局部搜索窗口对应的局部高斯曲线的最大幅值对应的横坐标；X为全局高斯曲线的最大幅值对应的横坐标；2为第t个局部搜索窗口对应的第二偏差值；/＞为第t个局部搜索窗口对应的函数偏差值。在偏移程度的计算公式中，使用全局高斯曲线的最大幅值，也即全局高斯曲线中的最高点作为偏移程度的一个参考因子是因为全局高斯曲线中最高点相当于特征点，特征点的变化最能体现噪声变化。偏移权重表示的是第t个局部搜索窗口与编织线缆图像的灰度差异，因为编织线缆图像的灰度差异越小，则对应的偏移权重越大，也可以说是越接近于1，则局部搜索窗口内像素点的变化与编织线缆图像中像素点的变化越相似。函数偏差值反映的是局部高斯曲线和全局高斯曲线的偏移程度，在这里直接将峰值点距离也作为一个参考因子用来反映两条曲线的偏移程度。将偏移权重和函数偏差值相乘得到偏移程度的逻辑是因为在进行高斯曲线拟合时是根据每个局部区域内邻域窗口之间的相似性得到的，并不能表示其局部搜索窗口与编织线缆图像的灰度差异，因此这里乘上能够反映局部搜索窗口与编织线缆图像的灰度变化程度的偏移权重，使得更准确的表示第t个局部搜索窗口高斯函数曲线与编织线缆图像的偏移程度。作为本发明的另一个实施例，偏移程度可以为偏移权重和归一化后的函数偏差值的和值。作为本发明的其他实施例，还可以对函数偏差值进行正相关映射，将正相关映射之后的函数偏差值和偏移权重的乘积作为偏移程度。通过比较各局部搜索窗口的局部高斯曲线与编织线缆图像的全局高斯曲线的偏移程度来反映不同局部搜索窗口的噪声影响程度，不同局部搜索窗口的噪声影响程度也就是编织线缆图像中不同菱形区域的噪声影响程度。通过偏移程度能够整体的评价编织图像中噪声的影响程度，根据噪声的影响程度对编织线缆图像进行去噪时，能够节省非局部均值滤波算法计算像素点之间的相似性的搜索时间。步骤S400，基于所述偏移程度对局部搜索窗口进行聚类处理，得到多个窗口聚类簇；根据窗口聚类簇内各局部搜索窗口对应的偏移程度、相似程度和局部搜索窗口内邻域窗口的灰度变化程度确定邻域窗口的高斯权重；基于各邻域窗口对应的高斯权重对编织线缆图像进行滤波，得到滤波线缆图像。根据获得的每个局部搜索窗口与编织线缆图像的偏移程度来获得局部搜索窗口之间的相似性，作为本发明的一个实施例可以将偏移程度直接作为局部搜索窗口对应的相似性。作为本发明的另一个实施例还可以对偏移程度进行正相关归一化映射，将映射值作为相似性。对获得的偏移程度进行层次聚类，获得不同偏移程度的局部搜索窗口的窗口聚类簇。可以采用多种方法，基于根据偏移程度得到的相似性对局部搜索窗口进行聚类，作为本发明的一个实施例可以将每个局部搜索窗口作为一个节点，利用K-means算法基于得到的相似性对多个局部搜索窗口进行聚类，得到多个窗口聚类簇。在本发明实施例中K的取值为5，在其他实施例中K的取值由实施者根据实际情况进行调节。在同一窗口聚类簇中的局部搜索窗口的偏移程度相近，因此同一窗口聚类簇内的局部搜索窗口的噪声影响程度相近，则根据每一个窗口聚类簇中局部搜索窗口的变化以及邻域窗口的灰度变化程度来获得局部搜索窗口内邻域窗口的高斯权重。具体的：根据窗口聚类簇内各局部搜索窗口对应的偏移程度、相似程度和局部搜索窗口内邻域窗口的灰度变化程度确定邻域窗口的高斯权重。所述高斯权重的计算公式为：其中，Mdtj为第d个窗口聚类簇内第t个局部搜索窗口中第j个邻域窗口的高斯权重；m为第d个窗口聚类簇内的局部搜索窗口的数量；Wdt为第d个窗口聚类簇内第t个局部搜索窗口对应的偏移程度；fda为第d个聚类簇内第a个局部搜索窗口内所有邻域窗口的局部相似映射值的均值；fdb为第d个聚类簇内第b个局部搜索窗口内所有邻域窗口的局部相似映射值的均值；Hdtj为第d个窗口聚类簇的第t个局部搜索窗口中第j个邻域窗口的灰度变化程度；J为第d个窗口聚类簇的第t个局部搜索窗口中邻域窗口的数量。其中，高斯权重的计算公式中为第d个窗口聚类簇内局部搜索窗口对应的偏移程度的均值，偏移程度的均值越大，反映该窗口聚类簇内的局部搜索窗口的噪声影响程度越大，则对应的高斯权重也越大。fda-fdb表示第d个聚类簇内第a个局部搜素窗口和第b个局部搜素窗口的相似度差异，该相似度差异越小，反映该窗口聚类簇内所有像素点的灰度变化较小，则对其分配的高斯权重较小。/＞表示对窗口聚类簇内的所有局部搜索窗口的相似度差异进行叠加求平均。/＞反映了第d个窗口聚类簇的第t个局部搜索窗口中第j个邻域窗口的灰度变化程度相对于局部搜索窗口内所有邻域窗口的灰度变化程度的占比。该灰度变化程度可以反映邻域窗口的噪声影响程度，因为不同的邻域窗口对应的噪声影响程度不同，其对应的灰度变化程度的取值也不同，故可以将邻域窗口对应的灰度变化程度的占比作为高斯权重的分配系数，邻域窗口内灰度变化程度越大，则对其分配的高斯权重也越大。在得到各窗口聚类簇对应的高斯权重之后，基于高斯权重对编织线缆图像进行滤波，得到滤波线缆图像，以实现对编织线缆图像进行滤波的目的。在本发明实施例中基于高斯权重对编织线缆图像进行非局部均值滤波，作为本发明的另一个实施例，还可以基于高斯权重对编织线缆图像进行高斯滤波。在基于高斯权重对编织线缆图像进行滤波之前，对计算得到的各邻域窗口的高斯权重进行处理，使得同一窗口聚类簇内像素点的高斯权重之和为1。如第d个窗口聚类簇第t个局部搜索窗口中第j个邻域窗口的高斯权重Mdtj需要除上所属的第d个窗口聚类簇内所有像素点的高斯权重之和，以实现归一化的目的。将邻域窗口对应的高斯权重作为邻域窗口内各像素点的高斯权重，也即属于同一个邻域窗口内的像素点的高斯权重相同，也即邻域窗口内每个像素点的高斯权重均相同。如第d个窗口聚类簇第t个局部搜索窗口中第j个邻域窗口中每个像素点的高斯权重均为Mdtj，得到进行归一化处理后的高斯权重其中，Mdtj'为归一化处理后的第d个窗口聚类簇中第t个局部搜索窗口中第j个邻域窗口的高斯权重，该第d个窗口聚类簇中第t个局部搜索窗口中第j个邻域窗口内每个像素点的告诉权重也即为Mdtj'；Mdtj为第d个窗口聚类簇中第t个局部搜索窗口中第j个邻域窗口的高斯权重；vj为第d个窗口聚类簇中第t个局部搜索窗口中第j个邻域窗口内的像素点数量；J为第d个窗口聚类簇中第t个局部搜索窗口内的邻域窗口的数量；T为第d个窗口聚类簇中局部搜索窗口的数量。基于高斯权重对窗口聚类簇内的像素点进行滤波，滤波的计算公式为：其中，Ip'为第p个像素点滤波后的像素值；Mp'为第p个像素点对应的高斯权重，也即第p个像素点所属的邻域窗口对应的高斯权重；P为第p个像素点所属的窗口聚类簇内像素点的数量，也即第p个像素点所属的窗口聚类簇内所有局部搜索窗口内像素点的数量之和；Ip为第p个像素点滤波前的像素值。需要说明的是，该滤波公式为非均值局部滤波公式，为本领域技术人员的公知技术，在此不再赘述。得到每个像素点对应的滤波后的像素值，进一步将各像素点的像素值更新为滤波后的像素值，得到滤波线缆图像。步骤S500，基于所述滤波线缆图像得到编织节距，基于所述编织节距控制编织机。通过上述方法获得滤波后的滤波线缆图像，然后对滤波线缆图像利用canny边缘检测算法检测编织丝，得到滤波线缆图像中的编织丝边缘，该编织丝边缘也即指滤波线缆图像中的编织丝。在获得编织丝边缘之后，确定每个编织丝节点之间的距离，得到对应的编织目数。需要说明的是确定编织丝节点的方法有多种，如将两条编织线交叉点处直接作为编织丝节点，在本发明实施例中不再对其进行限定。其中，编织目数为沿着线缆方向，1英寸的长度里有几个交叉点，即为几目，也即1英寸的长度内的交叉点的数量为编织目数。同时，获取编织机总锭子数，根据编织机总锭子数和编织目数，得到滤波线缆图像对应的编织节距。需要说明的是编织机总锭子数是提前人为设定好的数值，可以直接得到。该编织节距的计算公式为：其中，τ为编织节距，ω为编织机总锭子数，γ表示编织目数。需要说明的是，该编织节距的计算公式为现有公式，不再进行赘述。当得到的编织节距大于理想编织节距时，对编织机进行编织丝增加股数的控制操作，即暂停高速编织机的工作对高速编织机的编织丝增加股数，每次增加预设数量股，以实现调小编织节距，实现了根据得到的编织节距对编织机进行控制的目的。其中，增加编织丝的股数是为了达到增大编织目数的目的，在编织机总锭子数固定的情况下，编织目数和编织节距呈负相关关系，故这里通过增大编织目数，以实现对编织节距的减小，使减小后的编织节距更接近于理想编织节距。需要说明的是预设数量股是由实施者根据实际情况调节的，在不同的实施例中所需的预设数量股也不相同，在本发明实施例中预设数量为1，故每次增加一股编织丝。在本发明实施例中理想编织节距是由实施者对编织节距的需求进行设定的，如当实施者需要编织节距为10的线缆时，则对应的理想编织节距为10，由于不同的实施场景中对理想编织节距的需求不同，故在此不再对理想编织节距做具体的限定。当得到的编织节距小于理想编织节距时，对编织机进行编织丝减少股数的控制操作，即暂停高速编织机的工作对高速编织机的编织丝减少股数，每次减少预设数量股，以实现调大编织节距。当得到的编织节距等于理想编织节距时，不再对编织机进行后续控制操作。综上所述，本发明涉及编织机智能控制技术领域。该方法基于编织线缆图像构建局部搜索窗口和邻域窗口，确定邻域窗口的灰度变化程度；根据局部搜索窗口内任意两个邻域窗口对应的灰度变化程度的差异确定局部相似映射值；基于局部搜索窗口内邻域窗口间灰度变化程度的差异和对应的局部相似映射值构建高斯曲线，作为局部高斯曲线，基于所有局部搜索窗口内邻域窗口间灰度变化程度的差异和对应的局部相似映射值构建高斯曲线，作为全局高斯曲线，确定局部高斯曲线与全局高斯曲线的偏移程度；基于所述偏移程度对局部搜索窗口进行聚类处理，得到多个窗口聚类簇；根据窗口聚类簇内各局部搜索窗口对应的偏移程度、相似程度和局部搜索窗口内邻域窗口的灰度变化程度确定邻域窗口的高斯权重；基于各邻域窗口对应的高斯权重对编织线缆图像进行滤波，得到滤波线缆图像；基于所述滤波线缆图像得到编织节距，基于所述编织节距控制编织机。本发明是根据局部进行分析，能够有效的节省了算法在计算像素点间的相似度时的耗时长的问题，增加了算法灵活性，并且能够较好的滤除图像噪声，保留图像的有效信息。本发明实施例还提出了一种高速编织机智能控制系统，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述方法的步骤。由于一种高速编织机智能控制方法在上述给出了详细描述，不再赘述。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。
