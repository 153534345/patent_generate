标题title
一种保护隐私的密文云数据统计分析系统及方法
摘要abst
本申请公开了一种保护隐私的密文云数据统计分析系统及方法，涉及密文处理技术领域。所述的系统包括可信机构、数据源集合、控制中心、云服务器以及数据请求者集合。所述的方法包括如下步骤：进行系统初始化；进行实体注册，得到所有实体的注册信息；进行数据采集，并对密文数据进行签名；进行签名验证，并将密文数据发送至云服务器；进行数据存储；进行数据查询，得到查询的密文结果；进行数据计算，得到密文数据计算结果；进行数据统计分析，得到对应的数据统计分析结果。本发明解决了现有技术存在的效率低下、可扩展性差、无法进行多样化数据分析以及计算开销大的问题。
权利要求书clms
1.一种保护隐私的密文云数据统计分析系统，其特征在于：包括可信机构、数据源集合、控制中心、云服务器以及数据请求者集合，所述的可信机构分别与数据源集合、控制中心、云服务器以及数据请求者集合连接，所述的数据源集合包括若干数据采集终端，且数据采集终端一一对应的设置于互联网的用户侧，所述的数据请求者集合包括若干数据请求终端，且数据请求终端一一对应的设置于互联网的查询侧，所述的控制中心分别与数据源集合、云服务器以及数据请求者集合连接，所述的云服务器与数据请求者集合连接；可信机构，用于生成密钥及公共参数，将密钥发布至控制中心和云服务器，并将公共参数发布至系统的其它实体；对系统的其它实体进行注册，得到对应的注册信息，并将注册信息发送至系统对应的实体；数据源集合，用于在每个数据采集时间点，采集互联网的用户侧的互联网数据，并根据公共参数对互联网数据进行加密，得到密文数据；根据对应的数据采集终端的注册信息，对密文数据进行签名，得到对应的密文签名数据，并将密文数据及密文签名数据发送至控制中心；控制中心，用于根据系统的实体的签名数据，进行签名验证；存储密文数据，并将密文数据发送至云服务器；云服务器，用于存储密钥和密文数据；根据查询请求，进行数据查询，得到查询的密文结果；根据密钥对密文数据进行解密；根据查询的密文结果，使用云服务器进行数据计算，得到密文数据计算结果；根据云服务器的注册信息，对密文数据计算结果进行签名，得到对应的计算结果签名数据，并将密文数据计算结果及计算结果签名数据发送至数据请求终端；数据请求者集合，用于生成查询请求，根据对应的数据请求终端的注册信息，对查询请求进行签名，得到对应的查询签名数据，并将查询请求及查询签名数据发送至云服务器；根据密文数据计算结果，进行统计数据分析，得到对应的数据统计分析结果。2.根据权利要求1所述的一种保护隐私的密文云数据统计分析系统，其特征在于：所述的云服务器包括第一云服务器和第二云服务器，所述的第一云服务器分别与可信机构、第二云服务器、控制中心以及数据请求者集合中所有数据请求终端连接，所述的第二云服务器分别与可信机构和数据请求者集合中所有数据请求终端连接。3.一种保护隐私的密文云数据统计分析方法，基于如权利要求1-2任一所述的密文云数据统计分析系统，其特征在于：所述的方法包括如下步骤：进行系统初始化：使用可信机构生成密钥及公共参数，将密钥发布至控制中心和云服务器，并将公共参数发布至系统的其它实体；进行实体注册：根据系统的其它实体发送的对应的ID，使用可信机构分别对系统的其它实体进行注册，得到对应的注册信息，并将注册信息发送至系统对应的实体；进行数据采集：数据源集合注册成功后，在每个数据采集时间点，使用数据采集终端采集互联网的对应用户侧的互联网数据，并根据公共参数对互联网数据进行加密，得到密文数据；根据对应的数据采集终端的注册信息，对密文数据进行签名，得到对应的密文签名数据，并将密文数据及密文签名数据发送至控制中心；进行签名验证：控制中心注册成功后，使用控制中心对数据采集终端的密文签名数据进行批量签名验证，签名验证通过后，存储对应的密文数据，并将密文数据发送至云服务器；进行数据存储：云服务器注册成功后，使用云服务器存储密钥和密文数据；进行数据查询：数据请求者集合注册成功后，基于数据请求终端生成查询请求；根据对应的数据请求终端的注册信息，对查询请求进行签名，得到对应的查询签名数据，并将查询请求及查询签名数据发送至云服务器；根据数据请求终端的查询签名数据，进行签名验证；签名验证通过后，根据查询请求，使用云服务器进行数据查询，得到查询的密文结果；进行数据计算：根据密钥和查询的密文结果，使用云服务器进行数据计算，得到密文数据计算结果；根据云服务器的注册信息，对密文数据计算结果进行签名，得到对应的计算结果签名数据，并将密文数据计算结果及计算结果签名数据发送至数据请求终端；进行数据统计分析：使用控制中心对计算结果签名数据进行签名验证，签名验证通过后，根据密文数据计算结果，使用数据请求终端进行数据统计分析，得到对应的数据统计分析结果。4.根据权利要求3所述的一种保护隐私的密文云数据统计分析方法，其特征在于：所述的查询请求包括时间范围信息和目标区域信息。5.根据权利要求4所述的一种保护隐私的密文云数据统计分析方法，其特征在于：使用可信机构生成密钥及公共参数，包括如下步骤：使用可信机构选择对称同态加密算法的安全参数；根据安全参数，使用对称同态加密算法，生成密钥及公共参数。6.根据权利要求5所述的一种保护隐私的密文云数据统计分析方法，其特征在于：数据源集合进行实体注册时，还包括如下步骤：使用数据采集终端采集空间范围数据；根据公共参数对数据采集终端的空间范围数据进行加密，得到加密后空间范围数据，将加密后空间范围数据发送至可信机构；根据密钥，使用可信机构对加密后空间范围数据进行解密，得到解密后空间范围数据；根据解密后空间范围数据，对数据源集合进行区域划分，得到区域划分信息；将区域划分信息及加密后空间范围数据发送至控制中心和云服务器。7.根据权利要求6所述的一种保护隐私的密文云数据统计分析方法，其特征在于：根据查询请求，使用云服务器进行数据查询，得到查询的密文结果，包括如下步骤：使用第一云服务器接收数据请求者集合发送的查询请求；根据查询请求中的目标区域信息，使用第一云服务器匹配对应的区域划分信息，得到对应的数据源匹配区域；根据查询请求中的时间范围信息，使用第一云服务器筛选数据源匹配区域中对应的数据采集终端的密文数据，得到匹配的密文数据，并将匹配的密文数据发送至第二云服务器；根据密钥，使用第二云服务器对匹配的密文数据进行解密，得到匹配的解密数据；根据匹配的解密数据是否符合查询请求的要求，生成对应的随机密文值，并将随机密文值发送至第一云服务器；根据随机密文值，使用第一云服务器将匹配的密文数据进行重新编号，得到查询的密文结果。8.根据权利要求3所述的一种保护隐私的密文云数据统计分析方法，其特征在于：所述的数据计算包括最大值计算、最小值计算、求和计算、聚合计算以及总聚合计算，所述的密文数据计算结果包括最大值计算结果、最小值计算结果、求和计算结果、聚合计算结果以及总聚合计算结果。9.根据权利要求8所述的一种保护隐私的密文云数据统计分析方法，其特征在于：所述的数据统计分析包括最大值统计分析、最小值统计分析、用户数统计分析、均值统计分析以及方差统计分析，所述的数据统计分析结果包括最大值统计分析结果、最小值统计分析结果、用户数统计分析结果、均值统计分析结果以及方差统计分析结果。
说明书desc
技术领域本发明属于密文处理技术领域，具体涉及一种保护隐私的密文云数据统计分析系统及方法。背景技术在云计算环境下，用户可以将数据存储在云端并在云端进行处理和分析。但是，这种数据处理方式可能会暴露用户的隐私信息，因为云服务提供商可以访问这些数据。因此，保护云数据的隐私性成为一个重要的问题。传统的加密技术通常需要将数据解密后才能进行处理和分析，这样可能会暴露用户的隐私信息。而基于同态加密的密文处理技术可以在不解密数据的情况下进行数据处理和分析，从而保护用户的隐私。然而，现有的同态加密技术在处理和分析大规模云数据时存在效率低下和可扩展性差等问题，限制了其在实际应用中的使用。并且，现有的基于差分隐私方案中接收的数据为聚合值，无法获取单个用户原始数据的具体值，进而无法对用户数据进行多样化数据分析。最后，现有方案能够支持的数据分析类型比较单一，通常只能进行求和分析，即使部分方案可对数据进行多样化分析，但存在计算开销大的问题。发明内容为了解决现有技术存在的效率低下、可扩展性差、无法进行多样化数据分析以及计算开销大的问题，本发明目的在于提供一种保护隐私的密文云数据统计分析系统及方法。本发明所采用的技术方案为：一种保护隐私的密文云数据统计分析系统，包括可信机构、数据源集合、控制中心、云服务器以及数据请求者集合，可信机构分别与数据源集合、控制中心、云服务器以及数据请求者集合连接，数据源集合包括若干数据采集终端，且数据采集终端一一对应的设置于互联网的用户侧，数据请求者集合包括若干数据请求终端，且数据请求终端一一对应的设置于互联网的查询侧，控制中心分别与数据源集合、云服务器以及数据请求者集合连接，云服务器与数据请求者集合连接；可信机构，用于生成密钥及公共参数，将密钥发布至控制中心和云服务器，并将公共参数发布至系统的其它实体；对系统的其它实体进行注册，得到对应的注册信息，并将注册信息发送至系统对应的实体；数据源集合，用于在每个数据采集时间点，采集互联网的用户侧的互联网数据，并根据公共参数对互联网数据进行加密，得到密文数据；根据对应的数据采集终端的注册信息，对密文数据进行签名，得到对应的密文签名数据，并将密文数据及密文签名数据发送至控制中心；控制中心，用于根据系统的实体的签名数据，进行签名验证；存储密文数据，并将密文数据发送至云服务器；云服务器，用于存储密钥和密文数据；根据查询请求，进行数据查询，得到查询的密文结果；根据密钥对密文数据进行解密；根据查询的密文结果，使用云服务器进行数据计算，得到密文数据计算结果；根据云服务器的注册信息，对密文数据计算结果进行签名，得到对应的计算结果签名数据，并将密文数据计算结果及计算结果签名数据发送至数据请求终端；数据请求者集合，用于生成查询请求，根据对应的数据请求终端的注册信息，对查询请求进行签名，得到对应的查询签名数据，并将查询请求及查询签名数据发送至云服务器；根据密文数据计算结果，进行统计数据分析，得到对应的数据统计分析结果。进一步地，云服务器包括第一云服务器和第二云服务器，第一云服务器分别与可信机构、第二云服务器、控制中心以及数据请求者集合中所有数据请求终端连接，第二云服务器分别与可信机构和数据请求者集合中所有数据请求终端连接。一种保护隐私的密文云数据统计分析方法，基于密文云数据统计分析系统，方法包括如下步骤：进行系统初始化：使用可信机构生成密钥及公共参数，将密钥发布至控制中心和云服务器，并将公共参数发布至系统的其它实体；进行实体注册：根据系统的其它实体发送的对应的ID，使用可信机构分别对系统的其它实体进行注册，得到对应的注册信息，并将注册信息发送至系统对应的实体；进行数据采集：数据源集合注册成功后，在每个数据采集时间点，使用数据采集终端采集互联网的对应用户侧的互联网数据，并根据公共参数对互联网数据进行加密，得到密文数据；根据对应的数据采集终端的注册信息，对密文数据进行签名，得到对应的密文签名数据，并将密文数据及密文签名数据发送至控制中心；进行签名验证：控制中心注册成功后，使用控制中心对数据采集终端的密文签名数据进行批量签名验证，签名验证通过后，存储对应的密文数据，并将密文数据发送至云服务器；进行数据存储：云服务器注册成功后，使用云服务器存储密钥和密文数据；进行数据查询：数据请求者集合注册成功后，基于数据请求终端生成查询请求；根据对应的数据请求终端的注册信息，对查询请求进行签名，得到对应的查询签名数据，并将查询请求及查询签名数据发送至云服务器；根据数据请求终端的查询签名数据，进行签名验证；签名验证通过后，根据查询请求，使用云服务器进行数据查询，得到查询的密文结果；进行数据计算：根据密钥和查询的密文结果，使用云服务器进行数据计算，得到密文数据计算结果；根据云服务器的注册信息，对密文数据计算结果进行签名，得到对应的计算结果签名数据，并将密文数据计算结果及计算结果签名数据发送至数据请求终端；进行数据统计分析：使用控制中心对计算结果签名数据进行签名验证，签名验证通过后，根据密文数据计算结果，使用数据请求终端进行数据统计分析，得到对应的数据统计分析结果。进一步地，查询请求包括时间范围信息和目标区域信息。进一步地，使用可信机构生成密钥及公共参数，包括如下步骤：使用可信机构选择对称同态加密算法的安全参数；根据安全参数，使用对称同态加密算法，生成密钥及公共参数。进一步地，数据源集合进行实体注册时，还包括如下步骤：使用数据采集终端采集空间范围数据；根据公共参数对数据采集终端的空间范围数据进行加密，得到加密后空间范围数据，将加密后空间范围数据发送至可信机构；根据密钥，使用可信机构对加密后空间范围数据进行解密，得到解密后空间范围数据；根据解密后空间范围数据，对数据源集合进行区域划分，得到区域划分信息；将区域划分信息及加密后空间范围数据发送至控制中心和云服务器。进一步地，根据查询请求，使用云服务器进行数据查询，得到查询的密文结果，包括如下步骤：使用第一云服务器接收数据请求者集合发送的查询请求；根据查询请求中的目标区域信息，使用第一云服务器匹配对应的区域划分信息，得到对应的数据源匹配区域；根据查询请求中的时间范围信息，使用第一云服务器筛选数据源匹配区域中对应的数据采集终端的密文数据，得到匹配的密文数据，并将匹配的密文数据发送至第二云服务器；根据密钥，使用第二云服务器对匹配的密文数据进行解密，得到匹配的解密数据；根据匹配的解密数据是否符合查询请求的要求，生成对应的随机密文值，并将随机密文值发送至第一云服务器；根据随机密文值，使用第一云服务器将匹配的密文数据进行重新编号，得到查询的密文结果。进一步地，数据计算包括最大值计算、最小值计算、求和计算、聚合计算以及总聚合计算，密文数据计算结果包括最大值计算结果、最小值计算结果、求和计算结果、聚合计算结果以及总聚合计算结果。进一步地，数据统计分析包括最大值统计分析、最小值统计分析、用户数统计分析、均值统计分析以及方差统计分析，数据统计分析结果包括最大值统计分析结果、最小值统计分析结果、用户数统计分析结果、均值统计分析结果以及方差统计分析结果。本发明的有益效果为：本发明提供的一种保护隐私的密文云数据统计分析系统及方法，采用对称同态加密技术和基于身份的数字签名技术，在满足差分隐私要求的前提下，提高了对大规模云数据的处理分析效率，增强了可扩展性；并且提供查询功能，根据数据请求终端的查询请求，对密文云数据进行一系列的数据计算，为后续的数据统计分析作出数据支撑，实现了低计算开销的多样化数据分析，提高了实用性。本发明的其他有益效果将在具体实施方式中进一步进行说明。附图说明图1是本发明中保护隐私的密文云数据统计分析系统的结构框图。图2是本发明中保护隐私的密文云数据统计分析方法的流程框图。具体实施方式下面结合附图及具体实施例对本发明做进一步阐释。实施例1：如图1所示，本实施例提供一种保护隐私的密文云数据统计分析系统，包括可信机构TA、数据源集合S、控制中心CC、云服务器CS以及数据请求者集合U，可信机构TA分别与数据源集合S、控制中心CC、云服务器CS以及数据请求者集合U连接，数据源集合S包括若干数据采集终端，其中，/＞为数据采集终端指示量，且数据采集终端一一对应的设置于互联网的用户侧，数据请求者集合U包括若干数据请求终端/＞，其中，/＞为数据请求终端指示量，且数据请求终端一一对应的设置于互联网的查询侧，控制中心CC分别与数据源集合S、云服务器CS以及数据请求者集合U连接，云服务器CS与数据请求者集合U连接；可信机构TA，用于生成密钥及公共参数，将密钥发布至控制中心CC和云服务器CS，并将公共参数发布至系统的其它实体；对系统的其它实体进行注册，得到对应的注册信息，并将注册信息发送至系统对应的实体；数据源集合S，用于在每个数据采集时间点，采集互联网的用户侧的互联网数据，并根据公共参数对互联网数据进行加密，得到密文数据；根据对应的数据采集终端的注册信息，对密文数据进行签名，得到对应的密文签名数据，并将密文数据及密文签名数据发送至控制中心CC；控制中心CC，用于根据系统的实体的签名数据，进行签名验证；存储密文数据，并将密文数据发送至云服务器CS；云服务器CS，用于存储密钥和密文数据；根据查询请求，进行数据查询，得到查询的密文结果；根据密钥对密文数据进行解密；根据查询的密文结果，使用云服务器CS进行数据计算，得到密文数据计算结果；根据云服务器的注册信息，对密文数据计算结果进行签名，得到对应的计算结果签名数据，并将密文数据计算结果及计算结果签名数据发送至数据请求终端；数据请求者集合U，用于生成查询请求，根据对应的数据请求终端的注册信息，对查询请求进行签名，得到对应的查询签名数据，并将查询请求及查询签名数据发送至云服务器CS；根据密文数据计算结果，进行统计数据分析，得到对应的数据统计分析结果。作为优选，云服务器CS包括第一云服务器CS1和第二云服务器CS2，第一云服务器CS1分别与可信机构TA、第二云服务器CS2、控制中心CC以及数据请求者集合U中所有数据请求终端连接，第二云服务器CS2分别与可信机构TA和数据请求者集合U中所有数据请求终端/＞连接；第一云服务器CS1，用于接收控制中心CC发送的密文数据，存储密文数据；接收数据请求者集合U发送的查询请求；根据查询请求，进行数据查询，得到查询的密文结果；将查询的密文结果发送至第二云服务器CS2；根据查询的密文结果，进行数据计算，得到密文数据计算结果；根据云服务器的注册信息，对密文数据计算结果进行签名，得到对应的计算结果签名数据，并将密文数据计算结果及计算结果签名数据发送至数据请求终端；第二云服务器CS2，用于接收可信机构TA发送的密钥，根据密钥对密文数据进行解密；根据查询的密文结果，进行数据计算，得到密文数据计算结果；根据云服务器的注册信息，对密文数据计算结果进行签名，得到对应的计算结果签名数据，并将密文数据计算结果及计算结果签名数据发送至数据请求终端。实施例2：如图2所示，本实施例提供一种保护隐私的密文云数据统计分析方法，基于密文云数据统计分析系统，方法包括如下步骤：进行系统初始化：使用可信机构TA生成密钥及公共参数，包括如下步骤：使用可信机构TA选择对称同态加密算法的安全参数；根据安全参数，使用对称同态加密算法，生成密钥sk及公共参数/＞，其中，sk为主密钥，/＞和/＞均为/＞=/＞=/＞素数，/＞为/＞=/＞的随机数，/＞为公共参数，/＞为素域基点，/＞为公钥，/＞为素数阶，/＞和/＞均为哈希函数；公共参数还包括初始密文值；计算公式为：式中，、/＞均为/＞的随机数；/＞、/＞均为/＞的随机数；将密钥发布至控制中心CC和云服务器CS，并将公共参数发布至系统的其它实体；进行实体注册：根据系统的其它实体发送的对应的ID，使用可信机构TA分别对系统的其它实体进行注册，得到对应的注册信息，并将注册信息发送至系统对应的实体；实体注册的公式为：式中，为随机数；/＞为注册信息；/＞为注册参数；/＞为注册ID，ID表示唯一标识；数据源集合进行实体注册时，其中，/＞为数据源集合总数，还包括如下步骤：使用数据采集终端采集空间范围数据；根据公共参数对数据采集终端的空间范围数据进行加密，空间范围数据包括数据采集终端的位置信息和采集数据设置的最小和最大的空间可见范围/＞，其中，/＞为得到加密后空间范围数据，将加密后空间范围数据/＞发送至可信机构TA，其中，/＞为数据采集终端的身份编号；根据密钥，使用可信机构TA对加密后空间范围数据进行解密，得到解密后空间范围数据；根据解密后空间范围数据，对数据源集合进行区域划分，得到区域划分信息，其中，j为区域指示量；将区域划分信息及加密后空间范围数据/＞发送至控制中心CC和云服务器CS；进行数据采集：数据源集合注册成功后，在每个数据采集时间点，使用数据采集终端采集互联网的对应用户侧的互联网数据，并根据公共参数对互联网数据进行加密，得到密文数据；根据对应的数据采集终端的注册信息，对密文数据进行签名，得到对应的密文签名数据，并将密文数据及密文签名数据发送至控制中心CC；签名的公式为：式中，为随机数；/＞为签名数据；/＞、/＞和/＞均为签名参数；/＞为密文数据；进行签名验证：控制中心注册CC注册成功后，使用控制中心CC对数据采集终端的密文签名数据进行批量签名验证，签名验证通过后，存储对应的密文数据，并将密文数据发送至云服务器CS；进行批量签名验证的公式为：式中，为签名验证实体指示量；n为实体总数；/＞为签名验证参数；/＞和/＞均为签名参数；/＞为注册参数；/＞为密文数据；/＞为对应的实体ID编号；/＞表示验证是否相等；进行单体签名验证的公式为：式中，和/＞均为签名参数；/＞为注册参数；/＞为密文数据；/＞为对应的实体ID编号；进行数据存储：云服务器CS注册成功后，使用云服务器CS存储密钥和密文数据；进行数据查询：数据请求者集合注册成功后，其中，N为数据请求者集合总数，基于数据请求终端生成查询请求；查询请求包括时间范围信息和目标区域信息；根据对应的数据请求终端的注册信息/＞，对查询请求进行签名，得到对应的查询签名数据，并将查询请求及查询签名数据发送至云服务器CS；对查询请求进行签名的公式为：式中，为随机数；/＞为时间戳；/＞为查询请求，且/＞；为查询签名数据；/＞和/＞均为签名参数；/＞为注册参数；/＞为注册ID；根据数据请求终端的查询签名数据，进行签名验证；签名验证通过后，根据查询请求，使用云服务器CS进行数据查询，得到查询的密文结果，包括如下步骤：使用第一云服务器CS1接收数据请求者集合U发送的查询请求；根据查询请求中的目标区域信息，使用第一云服务器CS1匹配对应的区域划分信息，得到对应的数据源匹配区域；根据查询请求中的时间范围信息，使用第一云服务器CS1筛选数据源匹配区域中对应的数据采集终端的密文数据，得到匹配的密文数据，其中，/＞为在t数据采集时间点数据采集终端的密文数据，/＞为时间范围信息中开始数据采集时间点，/＞为时间范围信息中结束数据采集时间点；根据第一云服务器CS1的注册信息，对匹配的密文数据进行签名，得到对应的匹配密文签名数据/＞，并将匹配的密文数据及匹配密文签名数据发送至第二云服务器CS2；使用控制中心CC对匹配密文签名数据进行签名验证，签名验证通过后，根据密钥，使用第二云服务器CS2对匹配的密文数据进行解密，得到匹配的解密数据；根据匹配的解密数据是否符合查询请求的要求，生成对应的随机密文值；若符合要求，随机密文值，否则/＞，其中，/＞、为公共参数中初始密文值/＞、/＞在随机数/＞下使用对称同态加密算法的加密结果；根据第二云服务器CS2的注册信息，对随机密文值/＞|/＞进行签名，得到对应的随机密文值签名数据，并将随机密文值及随机密文值签名数据发送至第一云服务器CS1；使用控制中心CC对随机密文值签名数据进行签名验证，签名验证通过后，根据随机密文值，使用第一云服务器CS1将匹配的密文数据进行重新编号，得到查询的密文结果|/＞，其中，/＞为数据采集频率，/＞为重新编号的随机密文值，/＞为重新编号的密文数据，/＞为重新编号的密文数据指示量，/＞为重新编号的密文数据总数，/＞为目标区域信息/＞部署的数据采集终端总数；进行数据计算：根据密钥和查询的密文结果，使用云服务器CS进行数据计算，数据计算包括最大值计算、最小值计算、求和计算、聚合计算以及总聚合计算，得到密文数据计算结果，密文数据计算结果包括最大值计算结果、最小值计算结果、求和计算结果、聚合计算结果以及总聚合计算结果；最大/最小值计算包括如下步骤：根据查询的密文结果|/＞，使用第一云服务器CS1进行计算，得到/＞，即数据集/＞；根据密钥，使用第一云服务器CS1对数据集进行二次加密，公式为：式中，为二次加密后密文数据；使用第一云服务器CS1进行基于身份的数字签名，并将二次加密后密文数据及签名数据发送至第二云服务器CS2；验证签名后，根据密钥，使用第二云服务器CS2对二次加密后密文数据进行解密，得到解密结果/＞；使用第二云服务器CS2将最大/最小值数据标记为，并获取/＞的最大/最小值密文值/＞；对最大/最小值密文值进行基于身份的数字签名，并将最大/最小值密文值及签名数据发送至第一云服务器CS1；验证签名后，使用第一云服务器CS1计算最大/最小值对应的密文信息，得到最大/最小值对应的；加入随机数噪声，对/＞进行模糊，得到/＞；通过同态计算加入噪声，避免第二云服务器CS2直接解密密文数据；根据，使用第一云服务器CS1进行数据计算，得到第一最大/最小值计算结果，并将/＞及签名数据发送至第二云服务器CS2和数据请求终端/＞；使用第一云服务器CS1进行基于身份的数字签名，并将及签名数据发送至第二云服务器CS2；验证签名后，使用第二云服务器CS2对进行解密，得到/＞；使用第二云服务器CS2进行数据计算，得到第二最大/最小值计算结果，并将/＞及签名数据发送至数据请求终端/＞；求和计算包括如下步骤：使用第一云服务器CS1对随机密文值|/＞进行求和计算，得到；使用第一云服务器CS1加入随机数噪声，对/＞进行模糊，得到/＞；根据2，使用第一云服务器CS1进行数据计算，得到第一求和计算结果/＞，并将/＞、/＞及签名数据发送至第二云服务器CS2和数据请求终端/＞；验证签名后，使用第二云服务器CS2对进行解密，得到/＞；使用第二云服务器CS2进行数据计算，得到第二求和计算结果，并将/＞及签名数据发送至数据请求终端/＞；聚合计算包括如下步骤：根据求和计算得到的，对数据集/＞进行聚合，得到/＞；使用第一云服务器CS1加入随机数噪声，对/＞和/＞进行模糊，得到/＞和/＞=/＞，将/＞、/＞及签名数据发送至第二云服务器CS2；根据，使用第一云服务器CS1进行数据计算，得到第一聚合计算结果/＞，将/＞及签名数据发送至数据请求终端/＞；验证签名后，使用第二云服务器CS2对和/＞进行解密，得到/＞和/＞；使用第二云服务器CS2进行数据计算，得到第二聚合计算结果和/＞，并将/＞、/＞及签名数据发送至数据请求终端/＞；总聚合计算包括如下步骤：根据求和计算得到的和聚合计算得到的/＞，进行进一步计算，得到；对所有进行总聚合计算，得到/＞；使用第一云服务器CS1加入随机数噪声，获取对应的/＞"、/＞'以及/＞=，并将密文数据/＞及签名数据发送至第二云服务器CS2；使用第一云服务器CS1进行数据计算，得到第一总聚合计算结果，并将/＞及签名数据发送至数据请求终端/＞；验证签名后，按照上述方法，使用第二云服务器CS2对进行解密，并使用第二云服务器CS2进行数据计算，得到第二聚合计算结果/＞、/＞以及/＞，并将/＞、/＞、/＞及签名数据发送至数据请求终端/＞；进行数据统计分析：使用控制中心CC对计算结果签名数据进行签名验证，签名验证通过后，根据密文数据计算结果，使用数据请求终端进行数据统计分析，数据统计分析包括最大值统计分析、最小值统计分析、用户数统计分析、均值统计分析以及方差统计分析，得到对应的数据统计分析结果，数据统计分析结果包括最大值统计分析结果、最小值统计分析结果、用户数统计分析结果、均值统计分析结果以及方差统计分析结果；最大/最小值统计分析的公式为：式中，为最大/最小值统计分析结果；用户数统计分析的公式为：式中，为用户数统计分析结果；均值统计分析的公式为：式中，为均值统计分析结果；方差统计分析的公式为：式中，为方差统计分析结果。本发明提供的一种保护隐私的密文云数据统计分析系统及方法，采用对称同态加密技术和基于身份的数字签名技术，在满足差分隐私要求的前提下，提高了对大规模云数据的处理分析效率，增强了可扩展性；并且提供查询功能，根据数据请求终端的查询请求，对密文云数据进行一系列的数据计算，为后续的数据统计分析作出数据支撑，实现了低计算开销的多样化数据分析，提高了实用性。本发明不局限于上述可选的实施方式，任何人在本发明的启示下都可得出其他各种形式的产品。上述具体实施方式不应理解成对本发明的保护范围的限制，本发明的保护范围应当以权利要求书中界定的为准，并且说明书可以用于解释权利要求书。
