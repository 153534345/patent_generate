标题title
转塔式MiniLED贴片设备的位置偏差补偿方法
摘要abst
本发明涉及一种转塔式MiniLED贴片设备的位置偏差补偿方法，包括：步骤1、建立PCB板坐标系OA，计算XY全局坐标系与OA坐标系之间的角度偏差θ；步骤2、将PCB板移动到预设的位置，将第一颗MiniLED放置在PCB板上，通过视觉计算第一颗MiniLED的理想放置位置与当前该第一颗MiniLED在PCB板上实际放置位置的位置偏差，进而计算PCB板的位置偏差，PCB板按照PCB板的位置偏差进行移动补偿；步骤3、根据角度偏差θ，计算当前MiniLED的应放料位置；计算由于MiniLED在吸嘴的角度和位置偏差，造成的MiniLED的吸嘴偏差；根据当前MiniLED的应放料位置以及MiniLED的吸嘴偏差，计算PCB板的移动位置；步骤4、由运动控制系统控制PCB板的运动电机，由运动电机控制PCB板补偿相应的位置，进行当前MiniLED的放置。
权利要求书clms
1.一种转塔式MiniLED贴片设备的位置偏差补偿方法，其特征在于，包括：步骤1、建立PCB板坐标系OA，计算XY全局坐标系与OA坐标系之间的角度偏差θ；步骤2、将PCB板移动到预设的位置，将第一颗MiniLED放置在PCB板上，通过视觉计算第一颗MiniLED的理想放置位置与当前该第一颗MiniLED在PCB板上实际放置位置的位置偏差，进而计算PCB板的位置偏差，PCB板按照PCB板的位置偏差进行移动补偿；步骤3、根据角度偏差θ，计算当前MiniLED的应放料位置；计算由于MiniLED在吸嘴的角度和位置偏差，造成的当前MiniLED的吸嘴偏差；根据当前MiniLED的应放料位置以及当前MiniLED的吸嘴偏差，计算PCB板的移动位置；步骤4、根据PCB板的移动位置，由运动控制系统控制PCB板的运动电机，使得PCB板补偿相应的位置，再进行当前MiniLED的放置，并判断是否还需继续进行MiniLED的放置，如果是，则转步骤3，否则，结束。2.如权利要求1所述的方法，其特征在于，建立PCB板坐标系OA包括：选择三个Mark点，以选择的三个Mark点中相邻的点两两相连，形成彼此垂直的两条线YA-OA以及XA-OA，建立PCB板坐标系OA；建立XY全局坐标系包括：X轴电机和Y轴电机回零之后的电机轴交点作为XY全局坐标系原点，Y轴电机的轴与XY全局坐标系的Y轴平行，X轴电机的轴与XY全局坐标系的X轴平行。3.如权利要求1所述的方法，其特征在于，沿着OA坐标系的XA轴方向选取两个贴片点和，计算XY全局坐标系与OA坐标系之间的角度偏差θ包括：θ = arctan/abs)。4.如权利要求1所述的方法，其特征在于，该预设的位置为PCB板上第一颗MiniLED的理想放置位置附近。5.如权利要求4所述的方法，其特征在于，PCB板的位置偏差为PCB板坐标系或XY全局坐标系下的位置偏差；将PCB板移动补偿后的MiniLED位置在XY全局坐标系的位置进行记录，作为第一颗MiniLED的XY全局坐标系下的MiniLED位置，并结合前MiniLED的PCB板的角度偏差，以计算当前MiniLED的应放料位置。6.如权利要求3所述的方法，其特征在于，MiniLED的吸嘴偏差包括：设底部视觉坐标系为OB，吸嘴坐标系OC；吸嘴坐标系OC旋转θB角度后的坐标系为OD坐标系，OD坐标系和OB坐标系平行；当前MiniLED在OD坐标系下的坐标为：其中，当前MiniLED在OC坐标系下的坐标；OD坐标系原点在OB坐标系下的坐标为：其中，吸嘴的轨迹半径为r；当前MiniLED在OB坐标系下，当前MiniLED的吸嘴偏差包括：。7.如权利要求6所述的方法，其特征在于，根据当前MiniLED的应放料位置以及当前MiniLED的吸嘴偏差，计算PCB板的移动位置包括：计算当前MiniLED的PCB板的角度偏差包括：其中，rowno是PCB板中MiniLED放置的行数，width表示行方向间距，colno是PCB板中MiniLED放置的列数，length表示列方向间距；计算理想MiniLED位置，包括：X = Xwork+ Xpcb+PX；Y = Ywork+ Ypcb +PY；根据理想MiniLED位置，计算PCB板的移动位置。8.如权利要求3所述的方法，其特征在于，该两个贴片点为沿着OA坐标系的XA轴方向相互距离大于一定阈值的两个点。9.如权利要求6所述的方法，其特征在于，吸嘴在OB坐标系下，通过模板匹配，得到MiniLED在底部视觉坐标系下的位置N1；吸嘴旋转180度后，通过模板匹配计算MiniLED在底部视觉坐标系下的位置N2；N1和N2的连线是吸嘴轨迹圆的直径，进而得到吸嘴的轨迹半径为r；通过模板匹配计算θB角。10.如权利要求1所述的方法，其特征在于，如果PCB板的尺寸和结构相同，则每次更换PCB板后，从步骤3开始进行PCB板的偏差移动补偿。
说明书desc
技术领域本发明涉及MiniLED贴片技术，尤其涉及一种转塔式MiniLED贴片设备的位置偏差补偿方法。背景技术外形尺寸介于0.2~1.6mm之间的直显MiniLED灯珠，普遍应用于各种高清显示屏以及各种电子设备中。随着MiniLED的应用越来越广泛，对于MiniLED的生产工艺和生产设备的要求也越来越高，由此转塔式的MiniLED贴片设备由于其生产效率高，占地面积小的优点在MiniLED的生产制造领域得到了广泛的应用。对于转塔式的MiniLED贴片设备，由于贴装速度很快，抓取MiniLED的机械手需要高频率对MiniLED进行抓取，受限于设备本身的精度，抓取到的MiniLED的实际位置和角度，与贴片所需的理想位置和角度往往存在偏差，这就需要对MiniLED的位置和角度进行相应的补偿。现有的补偿方法都是基于较大尺寸的LED进行，随着MiniLED越来越小型化的生产需求，现有的针对较大尺寸的LED的生产以及误差补偿方法已经无法满足要求。发明内容本发明的目的在于提供一种转塔式MiniLED贴片设备的位置偏差补偿方法，用于解决上述现有技术的转塔式MiniLED贴片设备的贴片误差问题。本发明一种转塔式MiniLED贴片设备的位置偏差补偿方法，其中，包括：步骤1、建立PCB板坐标系OA，计算XY全局坐标系与OA坐标系之间的角度偏差θ；步骤2、将PCB板移动到预设的位置，将第一颗MiniLED放置在PCB板上，通过视觉计算第一颗MiniLED的理想放置位置与当前该第一颗MiniLED在PCB板上实际放置位置的位置偏差，进而计算PCB板的位置偏差，PCB板按照PCB板的位置偏差进行移动补偿；步骤3、根据角度偏差θ，计算当前MiniLED的应放料位置；计算由于MiniLED在吸嘴的角度和位置偏差，造成的当前MiniLED的吸嘴偏差；根据当前MiniLED的应放料位置以及当前MiniLED的吸嘴偏差，计算PCB板的移动位置；步骤4、根据PCB板的移动位置，由运动控制系统控制PCB板的运动电机，使得PCB板补偿相应的位置，再进行当前MiniLED的放置，并判断是否还需继续进行MiniLED的放置，如果是，则转步骤3，否则，结束。根据本发明的转塔式MiniLED贴片设备的位置偏差补偿方法的一实施例，其中，建立PCB板坐标系OA包括：选择三个Mark点，以选择的三个Mark点中相邻的点两两相连，形成彼此垂直的两条线YA-OA以及XA-OA，建立PCB板坐标系OA；建立XY全局坐标系包括：X轴电机和Y轴电机回零之后的电机轴交点作为XY全局坐标系原点，Y轴电机的轴与XY全局坐标系的Y轴平行，X轴电机的轴与XY全局坐标系的X轴平行。根据本发明的转塔式MiniLED贴片设备的位置偏差补偿方法的一实施例，其中，沿着OA坐标系的XA轴方向选取两个贴片点和，计算XY全局坐标系与OA坐标系之间的角度偏差θ包括：θ = arctan/abs)。根据本发明的转塔式MiniLED贴片设备的位置偏差补偿方法的一实施例，其中，该预设的位置为PCB板上第一颗MiniLED的理想放置位置附近。根据本发明的转塔式MiniLED贴片设备的位置偏差补偿方法的一实施例，其中，PCB板的位置偏差为PCB板坐标系或XY全局坐标系下的位置偏差；将PCB板移动补偿后的MiniLED位置在XY全局坐标系的位置进行记录，作为第一颗MiniLED的XY全局坐标系下的MiniLED位置，并结合前MiniLED的PCB板的角度偏差，以计算当前MiniLED的应放料位置。根据本发明的转塔式MiniLED贴片设备的位置偏差补偿方法的一实施例，其中，MiniLED的吸嘴偏差包括：设底部视觉坐标系为OB，吸嘴坐标系OC；吸嘴坐标系OC旋转θB角度后的坐标系为OD坐标系，OD坐标系和OB坐标系平行；当前MiniLED在OD坐标系下的坐标：；其中，当前MiniLED在OC坐标系下的坐标；OD坐标系原点在OB坐标系下的坐标为：XOCB= r*sin；YOCB= r-r*cos；其中，吸嘴的轨迹半径为r；当前MiniLED在OB坐标系下，当前MiniLED的吸嘴偏差包括：根据本发明的转塔式MiniLED贴片设备的位置偏差补偿方法的一实施例，其中，根据当前MiniLED的应放料位置以及当前MiniLED的吸嘴偏差，计算PCB板的移动位置包括：计算当前MiniLED的PCB板的角度偏差包括：其中，rowno是PCB板中MiniLED放置的行数，width表示行方向间距，colno是PCB板中MiniLED放置的列数，length表示列方向间距；计算理想MiniLED位置，包括：X =Xwork+ Xpcb+PX；Y = Ywork+ Ypcb+PY；根据理想MiniLED位置，计算PCB板的移动位置。根据本发明的转塔式MiniLED贴片设备的位置偏差补偿方法的一实施例，其中，该两个贴片点为沿着OA坐标系的XA轴方向相互距离大于一定阈值的两个点。根据本发明的转塔式MiniLED贴片设备的位置偏差补偿方法的一实施例，其中，吸嘴在OB坐标系下，通过模板匹配，得到MiniLED在底部视觉坐标系下的位置N1；吸嘴旋转180度后，通过模板匹配计算MiniLED在底部视觉坐标系下的位置N2；N1和N2的连线是吸嘴轨迹圆的直径，进而得到吸嘴的轨迹半径为r；通过模板匹配计算θB角。根据本发明的转塔式MiniLED贴片设备的位置偏差补偿方法的一实施例，其中，如果PCB板的尺寸和结构相同，则每次更换PCB板后，从步骤3开始进行PCB板的偏差移动补偿。本发明的转塔式MiniLED贴片设备的位置偏差补偿方法，通过对MiniLED在吸嘴上的偏差进行补偿以及对PCB板的角度差引起的位置偏差进行补偿，进而控制PCB板通过运动控制补偿一定的位置，无需通过复杂的运动控制，就可以使得MiniLED的贴片更为精确，误差更小。附图说明图1所示为PCB基板的示意图；图2所示为PCB基板的运动机构示意图；图3所示为PCB板坐标系的示意图；图4所示为PCB板坐标系与XY全局坐标系角度偏差示意图；图5所示为PCB板坐标系下理想MiniLED位置与实际MiniLED位置的偏差示意图；图6为吸嘴坐标系的示意图；图7为吸嘴轨迹示意图；图8为吸嘴的安装结构示意图；图9是视觉坐标系下MiniLED的状态示意图；图10所示为位置偏差的计算过程示意图；图11所示为MiniLED的贴片补偿的示意图。具体实施方式为使本发明的目的、内容、和优点更加清楚，下面结合附图和实施例，对本发明的具体实施方式作进一步详细描述。经过发明人的长期实践发现MiniLED在PCB板的贴片过程，受限于装置本身的精度，虽然现有的LED贴片方式能够满足一定尺寸的LED的贴片，但对于贴片精度要求较高的MiniLED贴片，贴片精度往往并不理想。经过发明人对转塔式MiniLED贴片设备的仔细试验发现，影响转塔式MiniLED贴片设备的MiniLED贴片精度的因素主要在于两点，一个是更换PCB板后，第一次MiniLED贴片前，PCB板的位置精度存在偏差。另一个，则是由于转塔式MiniLED一般采用吸嘴的方式吸取MiniLED，吸嘴在转动过程中由于吸嘴的微小动作，造成吸嘴上的MiniLED也存在一定的偏差。虽然从单独来看，造成的偏差并不明显，但以上两种偏差的相互叠加，可能对MiniLED贴片精度产生意料之外的影响。故发明人经过大量实验和计算设计了转塔式MiniLED贴片设备的位置偏差补偿方法，通过对MiniLED在吸嘴上的偏差进行补偿以及对PCB板的角度差引起的位置偏差进行协调计算和统一补偿，再通过运动控制PCB板进行运动控制，使得MiniLED的放置更为精确。图1所示为PCB基板的示意图，图2所示为PCB基板的运动机构示意图，如图1以及图2所示，本发明对PCB板的角度差引起的位置偏差进行补偿计算，包括：通过视觉系统的摄像头拍摄PCB基板，在PCB基板的四个角的Mark点中任意取三个Mark点，作为拍摄点；如图2所示，建立基准XY全局坐标系，X电机和Y轴电机回零之后的两个电机轴交点作为XY全局坐标系原点，XY轴电机的Y轴与XY全局坐标系的Y轴平行，XY轴电机的X轴与XY全局坐标系的X轴平行；图3所示为PCB板坐标系的示意图，建立PCB板坐标系包括：以选择的三个Mark点相邻的点两两相连，形成彼此垂直的两条线YA-OA以及XA-OA，建立PCB板坐标系OA；计算XY全局坐标系与OA坐标系之间的角度偏差θ，包括：沿着OA坐标系的XA方向选取两个MiniLED贴片点P1和P2，在OA坐标系下的坐标为,，其中两个贴片点P1和P2选择相互距离距离较长的两个点，例如可以选择PCB板边界上的点。计算XY全局坐标系与OA坐标系之间的角度偏差包括：θ = arctan/abs)；将PCB平板移动到预设的位置，其中，预设定位置可以选择为PCB板上第一颗MiniLED位置附近。图4所示为PCB板坐标系与XY全局坐标系角度偏差示意图，图5所示为PCB板坐标系下理想MiniLED位置与实际MiniLED位置的偏差示意图，如图4以及图5所示，通过视觉计算第一颗MiniLED的理想位置与放置在预设定位置的MiniLED的偏差，具体可以包括：拍摄第一个MiniLED位置，计算PCB板坐标系或XY全局坐标系下，较优选择XY全局坐标系下，理想MiniLED位置与实际MiniLED位置的偏差；将PCB基板按照偏差值进行移动补偿，以将PCB基板的第一颗MiniLED位置对应吸嘴的理想MiniLED位置；将当前理想MiniLED位置在XY全局坐标系的位置进行记录，作为第一颗MiniLED的XY全局坐标系下的位置。其中，每次更换PCB板后，如果PCB板的尺寸或结构不变，则每次确定MiniLED放置在PCB板的理想位置时，可以直接采用前次计算结果，将PCB基板的第一颗MiniLED位置对应吸嘴的理想MiniLED位置。图6为吸嘴坐标系的示意图，图7为吸嘴轨迹示意图，图8为吸嘴的安装结构示意图，图9是视觉坐标系下MiniLED的状态，如图6至图9所示，对吸嘴引起的偏差进行补偿计算，拍摄当前MiniLED在吸嘴上的图片，计算吸嘴上的MiniLED的角度和位置偏差，通过旋转手臂来进行角度纠正。由于安装误差以及加工精度的影响，导致吸嘴在旋转时存在偏心，图6中的角度θ即为吸嘴造成的MiniLED的角度偏差。发明人发现，由于偏心的存在，吸嘴的轨迹是一个圆形，旋转会导致位置偏差的变化。其中，设吸嘴的轨迹半径为r，具体数值可以通过视觉计算，如图9所示，LED有旋转角度的偏差，可以通过吸嘴的手臂电机旋转θB来补偿角度。r的计算过程包括：吸嘴在底部视觉坐标系OB下，通过模板匹配，得到MiniLED中心点在底部视觉坐标系OB下的位置N1，吸嘴旋转180度后，通过模板匹配计算MiniLED中心点在底部视觉坐标系OB下的位置N2。前后两个MiniLED中心点N1和N2的连线就是旋转圆的直径，基于此计算得到吸嘴的轨迹半径r。图10所示为位置偏差的计算过程示意图，如图10所示，MiniLED在吸嘴在旋转θB角度后位置偏差的计算过程，包括：底部视觉坐标系OB，吸嘴坐标系为OC。坐标系OB与吸嘴坐标系OC在吸嘴开始旋转之前重合。建立OD坐标系，OD坐标系和底部视觉坐标系OB平行，OD坐标系原点和吸嘴坐标系OC的原点重合。吸嘴旋转θB角度，θB角度为MiniLED在底部坐标系下的角度偏差，其中，θB角可以通过模板匹配算法计算获得。坐标系OC可以旋转θB角度，以纠正MiniLED的角度偏差，计算过程可以如下：MiniLED中心点的整体偏移 = MiniLED在OD下的坐标 + OD坐标系原点在OB坐标系下的坐标；MiniLED在OD坐标系下的坐标计算为：yC和xC为MiniLED中心点在OC坐标系下的坐标值；OD坐标系原点在OB坐标系下的坐标计算为：最后得到MiniLED在视觉坐标系OB下，相对于底部视觉坐标系OB原点的整体偏移，即MiniLED在吸嘴上的偏差，计算公式包括：根据XY全局坐标系与OA坐标系之间的角度偏差θ，计算吸嘴上的MiniLED，在XY全局坐标系下的当前MiniLED的放料位置，其中XY全局坐标系下的MiniLED的放料位置为第一颗MiniLED的XY全局坐标系下的位置加上当前MiniLED在PCB板上的偏差值；根据XY全局坐标系下的MiniLED放料位置以及MiniLED在吸嘴上的偏差，计算PCB板的移动位置，使得PCB板移动后，MiniLED能够放置在理想位置。图11所示为MiniLED的贴片补偿的示意图，如图11所示，以P点作为PCB板上的MiniLED的放料位置为例，PCB板中P点的偏差计算包括：rowno表示是PCB板中MiniLED放置的位置行数，width表示行方向间距，colno是PCB板中MiniLED放置的位置列数，length表示列方向间距。则MiniLED理想放料位置计算包括：X = Xwork+Xpcb+PX；Y = Ywork+Ypcb+PY；得到MiniLED理想放料位置后，将MiniLED理想放料位置发送给运动控制系统，由运动控制系统将控制指令发送给给PCB板的横向电机和纵向电机，横向电机和纵向电机控制PCB板补偿相应的距离，以完成位置偏差补偿，以将MiniLED放置在PCB板的MiniLED理想放料位置。对于每个MiniLED重复确定并放置在PCB板的MiniLED理想放料位置，直至PCB板贴满MiniLED。本发明一种转塔式MiniLED贴片设备的位置偏差补偿方法，MiniLED在吸嘴上的偏差计算是通过底部视觉获得角度和位置偏差，再通过旋转电机修正角度，由于偏心的存在，角度旋转会引起MiniLED位置的变化，计算角度修正后导致的位置偏差，并通过移动PCB板来进行补偿。PCB板的偏差主要是板的整体倾斜导致的，可以通过二维坐标变换获得偏差后的位置，通过以上两处偏差的补偿可以获得正确的MiniLED贴片位置。从而使得MiniLED的贴片更为精确，误差更小。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明技术原理的前提下，还可以做出若干改进和变形，这些改进和变形也应视为本发明的保护范围。
