标题title
一种面向卫星激光通信的IQ时延标校方法和装置
摘要abst
本发明公开了一种面向卫星激光通信的IQ时延标校方法和装置，该方法包括：设置发送端的调制方式为BPSK，对各第一IQ基带数据进行互相关运算，得到第一互相关结果，并根据第一互相关结果确定接收IQ时延；设置发送端的调制方式为QPSK，对各第二IQ基带数据进行互相关运算，得到第二互相关结果，并根据第二互相结果确定发送IQ时延；根据接收IQ时延和发送IQ时延确定IQ时延标校结果，以此在不同调制方式下对采集到的多个基带信号进行互相关运算，实现准确的确定接收IQ时延和发送IQ时延，从而实现准确的对卫星激光通信中IQ时延进行标校。
权利要求书clms
1.一种面向卫星激光通信的IQ时延标校方法，其特征在于，所述方法包括：步骤S1，设置发送端的调制方式为BPSK，使所述发送端向接收端发送调制后的第一光信号，并在所述接收端对与所述第一光信号对应的接收基带信号进行采样，得到预设数量的第一IQ基带数据；步骤S2，对各所述第一IQ基带数据进行互相关运算，得到第一互相关结果，并根据所述第一互相关结果确定接收IQ时延；步骤S3，设置所述发送端的调制方式为QPSK，使所述发送端向所述接收端发送调制后的第二光信号，并在所述接收端对与所述第二光信号对应的接收基带信号进行采样，得到所述预设数量的第二IQ基带数据；步骤S4，对各所述第二IQ基带数据进行互相关运算，得到第二互相关结果，并根据所述第二互相结果确定发送IQ时延；步骤S5，根据所述接收IQ时延和所述发送IQ时延确定IQ时延标校结果。2.如权利要求1所述的方法，其特征在于，所述根据所述第一互相关结果确定接收IQ时延，包括：将所述第一互相关结果作为第一目标互相关结果，将所述第一IQ基带数据作为目标IQ基带数据，并执行：步骤S201，根据所述第一目标互相关结果中各互相关值确定第一最大互相关值；步骤S202，根据所述第一最大互相关值，以及与所述第一最大互相关值对应的最大值参数确定时延粗估计值；步骤S203，基于所述时延粗估计值对各所述目标IQ基带数据进行时延补偿，得到预设数量的第三IQ基带数据；步骤S204，对各所述第三IQ基带数据进行互相关运算，得到第二目标互相关结果，根据所述第二目标互相关结果中各互相关值确定第二最大互相关值；步骤S205，根据所述第二最大互相关值，以及与所述第二最大互相关值对应的最大值参数确定时延精估计值；步骤S206，根据所述时延粗估计值与所述时延精估计值之和确定所述接收IQ时延；其中，所述最大值参数包括目标序号、左次大值和右次大值，各互相关值均带有序号，所述目标序号是从各互相关值的序号中确定的，所述左次大值是与所述目标序号的左侧相邻序号对应的互相关值，所述右次大值是与所述目标序号的右侧相邻序号对应的互相关值。3.如权利要求2所述的方法，其特征在于，所述根据所述第二互相结果确定发送IQ时延，包括：步骤S401，确定所述第二互相关结果中峰簇的个数，其中，所述峰簇中包括多个连续的高于预设低门限的互相关值，且所述峰簇中存在至少一个高于预设高门限的互相关值；步骤S402，若所述个数为0，或，所述个数为1且所述接收IQ时延的绝对值大于第一预设个数的采样周期，将所述发送端的Q路数字时延量作为所述发送IQ时延；步骤S403，若所述个数为1且所述接收IQ时延的绝对值不大于所述第一预设个数的采样周期，则将所述Q路数字时延量延时第二预设个数的系统钟，并返回所述步骤S3，得到新的第二互相关结果，并返回所述步骤S401；步骤S404，若所述个数不小于2，对各所述峰簇中的最大值进行比较，选取最大的两个峰簇作为第一峰簇和第二峰簇；步骤S405，将所述第一峰簇中的最大值作为所述第一最大互相关值，并执行所述步骤S202，得到第一时延粗估计值，将所述第二峰簇中的最大值作为所述第一最大互相关值，并执行所述步骤S202，得到第二时延粗估计值；步骤S406，确定所述第一时延粗估计值和所述第二时延粗估计值之间的第一差值；步骤S407，若所述第一差值的绝对值小于第二预设个数的采样周期，则将所述Q路数字时延量延时所述第二预设个数的系统钟，并返回所述步骤S3，得到新的第二互相关结果，并返回所述步骤S401；步骤S408，若所述第一差值的绝对值不小于所述第二预设个数的采样周期，根据所述第一时延粗估计值与所述第二时延粗估计值之和确定发送IQ时延估计值，并根据第一时延粗估计值与所述第二时延粗估计值之差确定接收IQ时延估计值；步骤S409，确定所述接收IQ时延估计值与所述接收IQ时延之间的第二差值；步骤S410，若所述第二差值的绝对值小于所述第一预设个数的采样周期，将所述第二IQ基带数据作为所述目标IQ基带数据，将所述第一时延粗估计值作为所述时延粗估计值，并执行所述步骤S203-所述步骤S205，得到新的时延精估计值，执行步骤S412；步骤S411，若所述第二差值的绝对值不小于所述第一预设个数的采样周期，确定本轮估计错误，返回所述步骤S1；步骤S412，将所述新的时延精估计值、所述Q路数字时延量和所述第一时延粗估计值相加，并减去所述接收IQ时延，得到所述发送IQ时延。4.如权利要求2所述的方法，其特征在于，所述发送端和所述接收端均设置在同一个卫星或均设置在同一个地面站，或，所述发送端设置在卫星且所述接收端设置在地面站，其中，若所述发送端和所述接收端均设置在同一个卫星或均设置在同一个地面站，所述预设数量为N，所述第一最大互相关值为所述第一目标互相关结果中各互相关值的最大值，所述第二最大互相关值为所述第二目标互相关结果中各互相关值的最大值；若所述发送端设置在卫星且所述接收端设置在地面站，所述预设数量为N×M，所述第一最大互相关值为各第一累加值中的最大值，其中，分别对每N个所述目标IQ基带数据进行互相关运算，得到M组相关结果，并对各组相关结果中同一位置上各互相关值的绝对值进行非相干累加，得到2N-1个所述第一累加值，或，所述预设数量为N，所述第一最大互相关值为所述第一目标互相关结果中各互相关值的最大值；若所述发送端设置在卫星且所述接收端设置在地面站，所述预设数量为N×M，所述第二最大互相关值为各第二累加值中的最大值，其中，分别对每N个所述第三IQ基带数据进行互相关运算，得到M组相关结果，并对各组相关结果中同一位置上各互相关值的绝对值进行非相干累加，得到2N-1个所述第二累加值，或，所述预设数量为N，所述第二最大互相关值为所述第二目标互相关结果中各互相关值的最大值。5.如权利要求4所述的方法，其特征在于，若所述发送端和所述接收端均设置在同一个卫星或均设置在同一个地面站，预先设置信号激光器、分束器和移相器，所述信号激光器输出光信号经过分束器后分为两路，一路作为所述发送端进行调制所需的信号光，另一路经所述移相器后作为所述接收端所需的本振光，在使发送端向接收端发送调制后的第一光信号之前，所述方法还包括：步骤S601，设置所述移相器的偏置电压为0；步骤S602，在所述接收端对接收基带信号进行采样，得到预设数量的第四IQ基带数据，对各所述第四IQ基带数据进行互相关运算，得到第三互相关结果；步骤S603，根据所述第三互相关结果中各互相关值确定第三最大互相关值，记录所述移相器的当前偏置电压和所述第三最大互相关值；步骤S604，判断所述当前偏置电压是否小于预设最大偏置电压，若是执行步骤S605，否则执行步骤S606；步骤S605，根据所述当前偏置电压与预设步进值的和确定新的当前偏置电压，并将所述移相器的偏置电压设置为所述新的当前偏置电压，并返回所述步骤S602；步骤S606，确定各所述第三最大互相关值中的最大相关值和最小相关值，并将与所述最大相关值对应的当前偏置电压作为最大电压，将与所述最小相关值对应的当前偏置电压作为最小电压，根据所述最大电压与所述最小电压的差值确定所述移相器的半波电压；步骤S607，根据所述半波电压和所述最小电压将所述移相器的相移设置为预设相移。6.如权利要求4所述的方法，其特征在于，若所述发送端设置在卫星且所述接收端设置在地面站，且所述预设数量为N×M，所述方法还包括：在设置发送端的调制方式为BPSK之前，确定所述发送端中信号激光器和所述接收端中本振激光器之间的频偏，并基于所述频偏与多普勒信号之和对所述接收端的接收频率进行频偏补偿；其中，，/＞，/＞为数据采样率，/＞为进行频偏补偿后的残留频率偏差。7.如权利要求4所述的方法，其特征在于，若所述发送端设置在卫星且所述接收端设置在地面站，且所述预设数量为N，所述方法还包括：在设置发送端的调制方式为BPSK之前，确定所述发送端中信号激光器和所述接收端中本振激光器之间的频偏，并基于所述频偏与多普勒信号之和对所述接收端的接收频率进行频偏补偿；在设置发送端的调制方式为BPSK，使发送端向接收端发送调制后的第一光信号之后，确定所述接收端接收到的I路基带信号和Q路基带信号之间的第一相位差，若所述第一相位差与的差值的绝对值小于预设阈值，开始在所述接收端对与所述第一光信号对应的接收基带信号进行采样；在设置所述发送端的调制方式为QPSK，使所述发送端向所述接收端发送调制后的第二光信号之后，确定所述接收端接收到的I路基带信号和Q路基带信号之间的第二相位差，若所述第二相位差的绝对值小于所述预设阈值，开始在所述接收端对与所述第二光信号对应的接收基带信号进行采样。8.一种面向卫星激光通信的IQ时延标校装置，其特征在于，所述装置包括：第一采样模块，用于执行步骤S1，设置发送端的调制方式为BPSK，使所述发送端向接收端发送调制后的第一光信号，并在所述接收端对与所述第一光信号对应的接收基带信号进行采样，得到预设数量的第一IQ基带数据；第一运算模块，用于执行步骤S2，对各所述第一IQ基带数据进行互相关运算，得到第一互相关结果，并根据所述第一互相关结果确定接收IQ时延；第二采样模块，用于执行步骤S3，设置所述发送端的调制方式为QPSK，使所述发送端向所述接收端发送调制后的第二光信号，在所述接收端对与所述第二光信号对应的接收基带信号进行采样，得到所述预设数量的第二IQ基带数据；第二运算模块，用于执行步骤S4，对各所述第二IQ基带数据进行互相关运算，得到第二互相关结果，并根据所述第二互相结果确定发送IQ时延；确定模块，用于执行步骤S5，根据所述接收IQ时延和所述发送IQ时延确定IQ时延标校结果。9.一种电子设备，其特征在于，包括：处理器；以及存储器，用于存储所述处理器的可执行指令；其中，所述处理器配置为经由执行所述可执行指令来执行权利要求 1～7中任意一项所述的面向卫星激光通信的IQ时延标校方法。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1～7中任意一项所述的面向卫星激光通信的IQ时延标校方法。
说明书desc
技术领域本申请涉及卫星激光通信技术领域，更具体地，涉及一种面向卫星激光通信的IQ时延标校方法和装置。背景技术在无线通信系统中，由发送端和接收端两部分组成。在发送端，需要将待传输数据调制到载波上，通过射频无线信号传输信息；在接收端，需要将射频信号下变频到零频，再进行解调，恢复出原始数据。一般采用超外差的形式，且采用数字中频技术，即在发送端先将信号数字基带信号调制到中频，通过DAC输出后，再模拟调制到射频；在接收端，先将射频信号模拟下变频到中频，ADC采样后，再将中频信号进行数字下变频，得到数字基带信号。然而，在高速数据通信中，受到DAC和ADC带宽和采样率的限制，数字中频技术不再适用。在模拟中频技术中，将数字基带信号的I路和Q路通过2个DAC输出，由正交调制器完成模拟中频调制；接收端配备有正交解调器，将信号下变频到基带，再使用2个ADC完成I路信号和Q路信号的采样。发送端设备中，FPGA产生的高速基带IQ信号通过两路高速接口输出给IQ调制器完成光调制。由于GTH或DAC器件的差异性、滤波器群时延不一致性，以及I路和Q路传输线长不完全等长，会导致调制输出的光信号存在发送IQ时延。接收端设备中，接收光信号经过90°光混频器和平衡探测器后转为I路和Q路基带信号，并通过同轴电缆和两路高速ADC采样后进行解调译码。由于同轴电缆线长的不一致、ADC器件的差异性、滤波器群时延不一致性，导致ADC采样的数字信号存在接收IQ时延。发送和接收IQ时延的存在会增加系统的误码率，降低系统的性能，甚至无法解调。因此，需要对系统中的IQ时延进行估计和校正。信号经过发送IQ时延，再经过信道的影响和接收IQ时延后，信号畸变异常严重，且畸变过程异常复杂，使得IQ时延校正难度大、校正性能差。因此，如何准确的对卫星激光通信中IQ时延进行标校，是目前有待解决的技术问题。发明内容本申请实施例提出了一种面向卫星激光通信的IQ时延标校方法和装置，用以实现准确的对卫星激光通信中IQ时延进行标校。第一方面，提供一种面向卫星激光通信的IQ时延标校方法，所述方法包括：步骤S1，设置发送端的调制方式为BPSK，使所述发送端向接收端发送调制后的第一光信号，并在所述接收端对与所述第一光信号对应的接收基带信号进行采样，得到预设数量的第一IQ基带数据；步骤S2，对各所述第一IQ基带数据进行互相关运算，得到第一互相关结果，并根据所述第一互相关结果确定接收IQ时延；步骤S3，设置所述发送端的调制方式为QPSK，使所述发送端向所述接收端发送调制后的第二光信号，并在所述接收端对与所述第二光信号对应的接收基带信号进行采样，得到所述预设数量的第二IQ基带数据；步骤S4，对各所述第二IQ基带数据进行互相关运算，得到第二互相关结果，并根据所述第二互相结果确定发送IQ时延；步骤S5，根据所述接收IQ时延和所述发送IQ时延确定IQ时延标校结果。第二方面，提供一种面向卫星激光通信的IQ时延标校装置，所述装置包括：第一采样模块，用于执行步骤S1，设置发送端的调制方式为BPSK，使所述发送端向接收端发送调制后的第一光信号，并在所述接收端对与所述第一光信号对应的接收基带信号进行采样，得到预设数量的第一IQ基带数据；第一运算模块，用于执行步骤S2，对各所述第一IQ基带数据进行互相关运算，得到第一互相关结果，并根据所述第一互相关结果确定接收IQ时延；第二采样模块，用于执行步骤S3，设置所述发送端的调制方式为QPSK，使所述发送端向所述接收端发送调制后的第二光信号，在所述接收端对与所述第二光信号对应的接收基带信号进行采样，得到所述预设数量的第二IQ基带数据；第二运算模块，用于执行步骤S4，对各所述第二IQ基带数据进行互相关运算，得到第二互相关结果，并根据所述第二互相结果确定发送IQ时延；确定模块，用于执行步骤S5，根据所述接收IQ时延和所述发送IQ时延确定IQ时延标校结果。第三方面，提供一种电子设备，包括：处理器；以及存储器，用于存储所述处理器的可执行指令；其中，所述处理器配置为经由执行所述可执行指令来执行第一方面所述的面向卫星激光通信的IQ时延标校方法。第四方面，提供一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现第一方面所述的面向卫星激光通信的IQ时延标校方法。通过应用以上技术方案，设置发送端的调制方式为BPSK，使发送端向接收端发送调制后的第一光信号，并在接收端对与第一光信号对应的接收基带信号进行采样，得到预设数量的第一IQ基带数据；对各第一IQ基带数据进行互相关运算，得到第一互相关结果，并根据第一互相关结果确定接收IQ时延。设置发送端的调制方式为QPSK，使发送端向接收端发送调制后的第二光信号，并在接收端对与第二光信号对应的接收基带信号进行采样，得到预设数量的第二IQ基带数据；对各第二IQ基带数据进行互相关运算，得到第二互相关结果，并根据第二互相结果确定发送IQ时延；根据接收IQ时延和发送IQ时延确定IQ时延标校结果，以此在不同调制方式下对采集到的多个基带信号进行互相关运算，实现准确的确定接收IQ时延和发送IQ时延，从而实现准确的对卫星激光通信中IQ时延进行标校。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1示出了本发明实施例提出的一种面向卫星激光通信的IQ时延标校方法的流程示意图；图2示出了本发明实施例中确定接收IQ时延的流程示意图；图3示出了本发明实施例中确定发送IQ时延的流程示意图；图4示出了本发明实施例中峰簇的原理示意图；图5示出了本发明实施例中收发自闭环标校的原理示意图；图6示出了本发明实施例中设置移相器的相移的流程示意图；图7示出了本发明实施例中星地远端标校的原理示意图；图8示出了本发明实施例中发送IQ时延估计实测结果示意图；图9示出了本发明实施例中接收IQ时延估计实测结果示意图；图10示出了本发明实施例中一种面向卫星激光通信的IQ时延标校装置的结构示意图；图11示出了本发明实施例中一种电子设备的结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。需要说明的是，本领域技术人员在考虑说明书及实践这里公开的发明后，将容易想到本申请的其它实施方案。本申请旨在涵盖本申请的任何变型、用途或者适应性变化，这些变型、用途或者适应性变化遵循本申请的一般性原理并包括本申请未公开的本技术领域中的公知常识或惯用技术手段。说明书和实施例仅被视为示例性的，本申请的真正范围和精神由权利要求部分指出。应当理解的是，本申请并不局限于下面已经描述并在附图中示出的精确结构，并且可以在不脱离其范围进行各种修改和改变。本申请的范围仅由所附的权利要求来限制。本申请可用于众多通用或专用的计算装置环境或配置中。例如：个人计算机、服务器计算机、手持设备或便携式设备、平板型设备、多处理器装置、包括以上任何装置或设备的分布式计算环境等等。本申请可以在由计算机执行的计算机可执行指令的一般上下文中描述，例如程序模块。一般地，程序模块包括执行特定任务或实现特定抽象数据类型的例程、程序、对象、组件、数据结构等等。也可以在分布式计算环境中实践本申请，在这些分布式计算环境中，由通过通信网络而被连接的远程处理设备来执行任务。在分布式计算环境中，程序模块可以位于包括存储设备在内的本地和远程计算机存储介质中。本申请实施例提供一种面向卫星激光通信的IQ时延标校方法，如图1所示，该方法包括以下步骤：步骤S1，设置发送端的调制方式为BPSK，使所述发送端向接收端发送调制后的第一光信号，并在所述接收端对与所述第一光信号对应的接收基带信号进行采样，得到预设数量的第一IQ基带数据。本实施例中，通过发送端和接收端进行IQ时延标校，在发送端，由FPGA完成数据编码组帧后，产生I路基带信号和Q路基带信号，然后送给IQ调制器完成光调制，输出调制光信号。在接收端，接收光信号经过90°光混频器和平衡探测器后，输出I路基带信号和Q路基带信号，经过不同延时传输后，送入FPGA中完成解调、译码和帧同步等处理。先设置发送端的调制方式为BPSK，使发送端的Q路基带信号为0。使发送端向接收端发送调制后的第一光信号，并在接收端对与所述第一光信号对应的接收基带信号进行ADC采样，得到预设数量的第一IQ基带数据，每个第一IQ基带数据包括I路基带信号和Q路基带信号。步骤S2，对各所述第一IQ基带数据进行互相关运算，得到第一互相关结果，并根据所述第一互相关结果确定接收IQ时延。获取第一IQ基带数据后，基于互相关函数对各第一IQ基带数据进行互相关运算，得到第一互相关结果，然后根据第一互相关结果确定接收IQ时延，例如可根据第一互相结果中峰值的位置确定接收IQ时延。步骤S3，设置所述发送端的调制方式为QPSK，使所述发送端向所述接收端发送调制后的第二光信号，并在所述接收端对与所述第二光信号对应的接收基带信号进行采样，得到所述预设数量的第二IQ基带数据。重新对发送端的调制方式进行设置，将发送端的调制方式设置为QPSK，使发送端的I路基带信号和Q路基带信号相等。使发送端向接收端发送调制后的第二光信号，并在接收端对与第二光信号对应的接收基带信号进行ADC采样，得到预设数量的第二IQ基带数据，每个第二IQ基带数据包括I路基带信号和Q路基带信号。步骤S4，对各所述第二IQ基带数据进行互相关运算，得到第二互相关结果，并根据所述第二互相结果确定发送IQ时延。在获取第二IQ基带数据后，基于互相关函数对各第二IQ基带数据进行互相关运算，得到第二互相关结果，并根据第二互相结果确定发送IQ时延，例如可根据第二互相结果中峰值的位置确定发送IQ时延。步骤S5，根据所述接收IQ时延和所述发送IQ时延确定IQ时延标校结果。在确定接收IQ时延和发送IQ时延后，将接收IQ时延和发送IQ时延作为IQ时延标校结果并输出。通过应用以上技术方案，设置发送端的调制方式为BPSK，使发送端向接收端发送调制后的第一光信号，并在接收端对与第一光信号对应的接收基带信号进行采样，得到预设数量的第一IQ基带数据；对各第一IQ基带数据进行互相关运算，得到第一互相关结果，并根据第一互相关结果确定接收IQ时延。设置发送端的调制方式为QPSK，使发送端向接收端发送调制后的第二光信号，并在接收端对与第二光信号对应的接收基带信号进行采样，得到预设数量的第二IQ基带数据；对各第二IQ基带数据进行互相关运算，得到第二互相关结果，并根据第二互相结果确定发送IQ时延；根据接收IQ时延和发送IQ时延确定IQ时延标校结果，以此在不同调制方式下对采集到的多个基带信号进行互相关运算，实现准确的确定接收IQ时延和发送IQ时延，从而实现准确的对卫星激光通信中IQ时延进行标校。在本申请一些实施例中，所述根据所述第一互相关结果确定接收IQ时延，包括：将所述第一互相关结果作为第一目标互相关结果，将所述第一IQ基带数据作为目标IQ基带数据，如图2所示，并执行以下步骤：步骤S201，根据所述第一目标互相关结果中各互相关值确定第一最大互相关值。本实施例中，根据互相关结果中出现的峰值，实现对收发IQ时延的估计。具体的，第一目标互相关结果中包括多个互相关值，根据各互相关值确定第一最大互相关值。在本申请一些实施例中，通过公式一对N个目标IQ基带数据进行互相关运算，确定第一目标互相关结果，公式一具体为：；其中，为第一目标互相关结果，N为进行互相关运算的目标IQ基带数据的数量，每个目标IQ基带数据包括I路基带信号/＞和Q路基带信号/＞，n为目标IQ基带数据的序号，/＞，/＞表示共轭，/＞表示/＞的共轭，m为互相关值的序号，第一目标互相关结果中包括2N-1个互相关值。步骤S202，根据所述第一最大互相关值，以及与所述第一最大互相关值对应的最大值参数确定时延粗估计值。本实施例中，在确定第一最大互相关值后，根据第一最大互相关值和相应的最大值参数对接收时延进行粗估计，确定时延粗估计值。其中，最大值参数包括目标序号、左次大值和右次大值，各互相关值均带有序号，目标序号是从各互相关值的序号中确定的，左次大值是与目标序号的左侧相邻序号对应的互相关值，右次大值是与目标序号的右侧相邻序号对应的互相关值。在本申请一些实施例中，若第一最大互相关值为，左次大值为/＞，右次大值为/＞，目标序号为/＞，则/＞，/＞，/＞，，通过公式二确定时延粗估计值，公式二具体为：；其中，为时延粗估计值，/＞为采样周期。本实施例中，时延粗估计值包括整数时延和小数时延，最大估计误差约0.05的采样周期，例如，对于10G的采样率，粗估计最大误差小于5ps，根据目标序号可估计出整数时延为，根据第一最大互相关值、左次大值和右次大值可估计出小数时延，从而提高了时延粗估计值的准确性。步骤S203，基于所述时延粗估计值对各所述目标IQ基带数据进行时延补偿，得到预设数量的第三IQ基带数据。本实施例中，在获取时延粗估计值后，基于时延粗估计值对各目标IQ基带数据进行时延补偿，得到预设数量的第三IQ基带数据。具体的，先对目标IQ基带数据中的I路基带信号和Q路基带信号/＞进行整数延时补偿，补偿后的信号为：；其中，为对I路基带信号/＞进行整数延时补偿后的信号，/＞为对Q路基带信号/＞进行整数延时补偿后的信号。其次进行小数延时补偿，可以采用Farrow滤波或多相滤波完成，补偿后的信号为：；第三IQ基带数据包括I路基带信号和Q路基带信号/＞。步骤S204，对各所述第三IQ基带数据进行互相关运算，得到第二目标互相关结果，根据所述第二目标互相关结果中各互相关值确定第二最大互相关值。本实施例中，基于互相关函数对第三IQ基带数据进行互相关运算，并根据得到的第二目标互相关结果中各互相关值确定第二最大互相关值。在本申请一些实施例中，通过公式三对N个第三IQ基带数据进行互相关运算，确定第二目标互相关结果，公式三具体为：；步骤S205，根据所述第二最大互相关值，以及与所述第二最大互相关值对应的最大值参数确定时延精估计值。本实施例中，在确定第二最大互相关值后，根据第二最大互相关值和相应的最大值参数对接收时延进行精估计，确定时延精估计值。在本申请一些实施例中，若第二最大互相关值为，相应的，左次大值为/＞，右次大值为/＞，目标序号为/＞，则/＞，/＞，/＞，，通过公式四确定时延精估计值/＞，公式四具体为：；步骤S206，根据所述时延粗估计值与所述时延精估计值之和确定所述接收IQ时延。在获取时延粗估计值与时延精估计值后，将两者相加，得到接收IQ时延，即：。通过采用粗精两步迭代运算确定接收IQ时延，进一步提高了IQ时延的标校精度。在本申请一些实施例中，所述根据所述第二互相结果确定发送IQ时延，如图3所示，包括以下步骤：步骤S401，确定所述第二互相关结果中峰簇的个数，其中，所述峰簇中包括多个连续的高于预设低门限的互相关值，且所述峰簇中存在至少一个高于预设高门限的互相关值。在确定发送IQ时延时，需要考虑第二互相关结果中峰簇的个数，预先设置预设低门限和预设高门限，峰簇中包括多个连续的高于预设低门限的互相关值，且峰簇中存在至少一个高于预设高门限的互相关值，举例来说，如图4所示，假设N=30，预设低门限为15，预设高门限为25，则根据判断准则，存在3个峰簇，即峰簇1、峰簇2和峰簇3。步骤S402，若所述个数为0，或，所述个数为1且所述接收IQ时延的绝对值大于第一预设个数的采样周期，将所述发送端的Q路数字时延量作为所述发送IQ时延。在开始进行标校时，预先设置发送端的Q路数字时延量，例如，可将Q路数字时延量的初始值设置为0。若峰簇的个数为0，或者，峰簇的个数为1且接收IQ时延的绝对值大于第一预设个数的采样周期，则将发送端的Q路数字时延量作为发送IQ时延。可选的，第一预设个数可以为0.5。步骤S403，若所述个数为1且所述接收IQ时延的绝对值不大于所述第一预设个数的采样周期，则将所述Q路数字时延量延时第二预设个数的系统钟，并返回所述步骤S3，得到新的第二互相关结果。若峰簇的个数为1且接收IQ时延的绝对值不大于第一预设个数的采样周期，则将Q路数字时延量延时第二预设个数的系统钟，并返回步骤S3，重新进行采样和互相关计算，得到新的第二互相关结果，并返回步骤S401。可选的，第二预设个数为2。步骤S404，若所述个数不小于2，对各所述峰簇中的最大值进行比较，选取最大的两个峰簇作为第一峰簇和第二峰簇。若峰簇的个数不小于2，则对各峰簇中的最大值进行比较，取最大的两个峰簇作为第一峰簇和第二峰簇，例如，如图4所示，选取峰簇2和峰簇3作为第一峰簇和第二峰簇。步骤S405，将所述第一峰簇中的最大值作为所述第一最大互相关值，并执行所述步骤S202，得到第一时延粗估计值，将所述第二峰簇中的最大值作为所述第一最大互相关值，并执行所述步骤S202，得到第二时延粗估计值。在确定第一峰簇和第二峰簇之后，分别根据第一峰簇和第二峰簇中的最大相关值进行时延粗估计，具体的，将第一峰簇中的最大值作为第一最大互相关值，并执行步骤S202，得到第一时延粗估计值；将第二峰簇中的最大值作为第一最大互相关值，并执行步骤S202，得到第二时延粗估计值/＞，具体过程可参考上述对步骤S202的描述，在此不再赘述。步骤S406，确定所述第一时延粗估计值和所述第二时延粗估计值之间的第一差值。步骤S407，若所述第一差值的绝对值小于第二预设个数的采样周期，则将所述Q路数字时延量延时所述第二预设个数的系统钟，并返回所述步骤S3，得到新的第二互相关结果。若第一差值的绝对值小于第二预设个数的采样周期，则将Q路数字时延量延时第二预设个数的系统钟，并返回步骤S3，重新进行采样和互相关计算，得到新的第二互相关结果，并返回步骤S401。可选的，第二预设个数为2，第一差值的绝对值小于第二预设个数的采样周期即：。步骤S408，若所述第一差值的绝对值不小于所述第二预设个数的采样周期，根据所述第一时延粗估计值与所述第二时延粗估计值之和确定发送IQ时延估计值，并根据第一时延粗估计值与所述第二时延粗估计值之差确定接收IQ时延估计值。若所述第一差值的绝对值不小于第二预设个数的采样周期，根据第一时延粗估计值与第二时延粗估计值之和确定发送IQ时延估计值，根据第一时延粗估计值与第二时延粗估计值之差确定接收IQ时延估计值/＞，即：。步骤S409，确定所述接收IQ时延估计值与所述接收IQ时延之间的第二差值。在确定接收IQ时延估计值之后，确定接收IQ时延估计值与接收IQ时延之间的第二差值。步骤S410，若所述第二差值的绝对值小于所述第一预设个数的采样周期，将所述第二IQ基带数据作为所述目标IQ基带数据，将所述第一时延粗估计值作为所述时延粗估计值，并执行所述步骤S203-所述步骤S205，得到新的时延精估计值。若第二差值的绝对值小于第一预设个数的采样周期，则进行时延精估计，具体的，将第二IQ基带数据作为目标IQ基带数据，将第一时延粗估计值作为时延粗估计值，并执行步骤S203-步骤S205，得到新的时延精估计值，具体过程可参考上述对步骤S203-步骤S205的描述，在此不再赘述，然后执行步骤S412。步骤S411，若所述第二差值的绝对值不小于所述第一预设个数的采样周期，确定本轮估计错误，返回所述步骤S1。若第二差值的绝对值不小于第一预设个数的采样周期，说明本轮估计错误，返回步骤S1，重新进行估计。步骤S412，将所述新的时延精估计值、所述Q路数字时延量和所述第一时延粗估计值相加，并减去所述接收IQ时延，得到所述发送IQ时延。具体的，设发送IQ时延为，Q路数字时延量为/＞，则：。通过采用粗精两步迭代运算确定发送IQ时延，进一步提高了IQ时延的标校精度。在本申请一些实施例中，所述发送端和所述接收端均设置在同一个卫星或均设置在同一个地面站，或，所述发送端设置在卫星且所述接收端设置在地面站，其中，若所述发送端和所述接收端均设置在同一个卫星或均设置在同一个地面站，所述预设数量为N，所述第一最大互相关值为所述第一目标互相关结果中各互相关值的最大值，所述第二最大互相关值为所述第二目标互相关结果中各互相关值的最大值；若所述发送端设置在卫星且所述接收端设置在地面站，所述预设数量为N×M，所述第一最大互相关值为各第一累加值中的最大值，其中，分别对每N个所述目标IQ基带数据进行互相关运算，得到M组相关结果，并对各组相关结果中同一位置上各互相关值的绝对值进行非相干累加，得到2N-1个所述第一累加值，或，所述预设数量为N，所述第一最大互相关值为所述第一目标互相关结果中各互相关值的最大值；若所述发送端设置在卫星且所述接收端设置在地面站，所述预设数量为N×M，所述第二最大互相关值为各第二累加值中的最大值，其中，分别对每N个所述第三IQ基带数据进行互相关运算，得到M组相关结果，并对各组相关结果中同一位置上各互相关值的绝对值进行非相干累加，得到2N-1个所述第二累加值，或，所述预设数量为N，所述第二最大互相关值为所述第二目标互相关结果中各互相关值的最大值。本实施例中，可通过两种方式进行IQ时延标校，一种是收发自闭环标校，如图5所示，即发送端和接收端均设置在同一个卫星或均设置在同一个地面站，另一种是星地远端标校，如图7所示，即发送端设置在卫星且接收端设置在地面站。若采用收发自闭环标校，则预设数量为N，第一最大互相关值为第一目标互相关结果中各互相关值的最大值，第二最大互相关值为第二目标互相关结果中各互相关值的最大值。若采用星地远端标校，则预设数量可以为N×M，第一最大互相关值为各第一累加值中的最大值，其中，分别对每N个目标IQ基带数据进行互相关运算，得到M组相关结果，并对各组相关结果中同一位置上各互相关值的绝对值进行非相干累加，得到2N-1个第一累加值。第二最大互相关值为各第二累加值中的最大值，其中，分别对每N个第三IQ基带数据进行互相关运算，得到M组相关结果，并对各组相关结果中同一位置上各互相关值的绝对值进行非相干累加，得到2N-1个第二累加值。星地远端标校时，卫星端的信号激光器和地面端的接收本振激光器存在频偏，且光信号经过下行链路后存在多普勒，则收发载波相位差随时间变化。在相关计算采样数据时间段t内，若/＞，则会引起相关峰消失。为了能有效检测相关峰，需要保证数据采样时间段内/＞不为0。通过将多次互相关计算结果进行非相干累加，可以降低/＞出现的概率，从而降低了收发载波相位差/＞对相关峰的影响，从而进一步提高了标校精度。若采用星地远端标校，预设数量还可以为N，第一最大互相关值为第一目标互相关结果中各互相关值的最大值，第二最大互相关值为第二目标互相关结果中各互相关值的最大值。通过采用收发自闭环标校和星地远端标校方式进行IQ时延标校，提高了标校精度和适用性。在本申请一些实施例中，若所述发送端和所述接收端均设置在同一个卫星或均设置在同一个地面站，如图5所示，预先设置信号激光器、分束器和移相器，所述信号激光器输出光信号经过分束器后分为两路，一路作为所述发送端进行调制所需的信号光，另一路经所述移相器后作为所述接收端所需的本振光，在使发送端向接收端发送调制后的第一光信号之前，如图6所示，该方法还包括以下步骤：步骤S601，设置所述移相器的偏置电压为0。为了实现良好的标校性能，需要通过移相器使本振光和信号光之间的相位差大于8°，其中，45°时最佳，因此需要设置移相器的相移。先设置移相器的偏置电压为0，后续通过在多个偏置电压下的互相关计算结果确定移相器的半波电压，并根据半波电压设置移相器的相移。步骤S602，在所述接收端对接收基带信号进行采样，得到预设数量的第四IQ基带数据，对各所述第四IQ基带数据进行互相关运算，得到第三互相关结果。本步骤中，可将第四IQ基带数据作为目标IQ基带数据，可通过公式一对N个目标IQ基带数据进行相关运算，并将公式一中的作为第三互相关结果，即：；步骤S603，根据所述第三互相关结果中各互相关值确定第三最大互相关值，记录所述移相器的当前偏置电压和所述第三最大互相关值。将第三互相关结果中各互相关值的最大值作为第三最大互相关值，记录移相器的当前偏置电压和第三最大互相关值/＞，其中，/＞。步骤S604，判断所述当前偏置电压是否小于预设最大偏置电压，若是执行步骤S605，否则执行步骤S606。步骤S605，根据所述当前偏置电压与预设步进值的和确定新的当前偏置电压，并将所述移相器的偏置电压设置为所述新的当前偏置电压，并返回所述步骤S602。若当前偏置电压小于预设最大偏置电压，则根据当前偏置电压与预设步进值的和确定新的当前偏置电压/＞，即：/＞，并将移相器的偏置电压设置为新的当前偏置电压，并返回步骤S602，通过此过程，可得到多个第三最大互相关值/＞。步骤S606，确定各所述第三最大互相关值中的最大相关值和最小相关值，并将与所述最大相关值对应的当前偏置电压作为最大电压，将与所述最小相关值对应的当前偏置电压作为最小电压，根据所述最大电压与所述最小电压的差值确定所述移相器的半波电压。若当前偏置电压不小于预设最大偏置电压，确定各第三最大互相关值中的最大相关值和最小相关值，将与最大相关值对应的当前偏置电压作为最大电压/＞，将与最小相关值对应的当前偏置电压作为最小电压/＞，根据最大电压/＞与最小电压/＞的差值确定移相器的半波电压/＞，即：/＞。步骤S607，根据所述半波电压和所述最小电压将所述移相器的相移设置为预设相移。在确定移相器的半波电压后，根据半波电压和最小电压将移相器的相移设置为预设相移。可选的，预设相移为π/4，此时，移相器的偏置电压为：。以此通过在使发送端向接收端发送调制后的第一光信号之前，对移相器的相移进行设置，提高了标校时的抗噪能力，保证了良好的标校性能。在本申请一些实施例中，若所述发送端设置在卫星且所述接收端设置在地面站，且所述预设数量为N×M，所述方法还包括：在设置发送端的调制方式为BPSK之前，确定所述发送端中信号激光器和所述接收端中本振激光器之间的频偏，并基于所述频偏与多普勒信号之和对所述接收端的接收频率进行频偏补偿；其中，，/＞，其中，/＞为数据采样率，/＞为进行频偏补偿后的残留频率偏差。本实施例中，由于星地远端标校时，卫星端的信号激光器和地面端的接收本振激光器存在频偏，且光信号经过下行链路后存在多普勒，因此，为了保证IQ时延的准确性，在设置发送端的调制方式为BPSK之前，确定发送端中信号激光器和接收端中本振激光器之间的频偏，并基于频偏与多普勒信号之和对接收端的接收频率进行频偏补偿，进行频偏补偿后，得到残留频率偏差，其中，确定频偏与多普勒信号之和，并减去接收端的接收频率后为残留频率偏差。由于需要分别对每N个目标IQ基带数据进行互相关运算，每N个目标IQ基带数据对应的数据长度内的相位变化需小于180°，小于45°时性能更佳，设为数据采样率，/＞为进行频偏补偿后的残留频率偏差，则需满足：，即N存在上限，需小于/＞。另外，由于频偏引起相位随时间旋转，通过M次互相关运算，并进行非相干累加，可降低收发载波相位差的影响，从而得到相关峰值。为了保证IQ时延的准确性，需满足：，即非相干累加次数存在下限，需大于/＞。在本申请一些实施例中，若所述发送端设置在卫星且所述接收端设置在地面站，且所述预设数量为N，所述方法还包括：在设置发送端的调制方式为BPSK之前，确定所述发送端中信号激光器和所述接收端中本振激光器之间的频偏，并基于所述频偏与多普勒信号之和对所述接收端的接收频率进行频偏补偿；在设置发送端的调制方式为BPSK，使发送端向接收端发送调制后的第一光信号之后，确定所述接收端接收到的I路基带信号和Q路基带信号之间的第一相位差，若所述第一相位差与的差值的绝对值小于预设阈值，开始在所述接收端对与所述第一光信号对应的接收基带信号进行采样；在设置所述发送端的调制方式为QPSK，使所述发送端向所述接收端发送调制后的第二光信号之后，确定所述接收端接收到的I路基带信号和Q路基带信号之间的第二相位差，若所述第二相位差的绝对值小于所述预设阈值，开始在所述接收端对与所述第二光信号对应的接收基带信号进行采样。本实施例中，由于星地远端标校时，卫星端的信号激光器和地面端的接收本振激光器存在频偏，且光信号经过下行链路后存在多普勒，收发载波相位差随时间变化。因此，为了保证IQ时延的准确性，设置发送端的调制方式为BPSK之前，确定发送端中信号激光器和接收端中本振激光器之间的频偏，并基于频偏与多普勒信号之和对接收端的接收频率进行频偏补偿。作为上述非相干累加方式的替代方式，通过求解IQ基带信号的相位差，获取相关峰计算所需要的数据段。具体的，在设置发送端的调制方式为BPSK，使发送端向接收端发送调制后的第一光信号之后，确定接收端接收到的I路基带信号和Q路基带信号之间的第一相位差，若第一相位差在左右时，开始在接收端对与第一光信号对应的接收基带信号进行采样。在设置发送端的调制方式为QPSK，使发送端向接收端发送调制后的第二光信号之后，确定接收端接收到的I路基带信号和Q路基带信号之间的第二相位差，若第二相位差在0左右时，开始在接收端对与第二光信号对应的接收基带信号进行采样，从而进一步提高了标记精度。如图8所示为发送IQ时延估计实测结果示意图，如图9所示为接收IQ时延估计实测结果示意图，其中采样率为10GHz，符号速率为5Gsps，N为1024。设备上电后进行连续多次IQ时延标校，然后等待设备稳定后，再连续进行多次标校。从图8和图9中可以看出，上电稳定后，每次标校出来的结果接近且稳定，因此，本方案能有效估计出发送IQ时延和接收IQ时延。通过应用以上技术方案，与现有技术相比，存在以下有益效果：适用性强、功能强。本申请实施例可同时完成发送IQ时延和接收IQ时延的标校。抗噪能力强、性能好。本申请实施例采用多个点进行互相关运算，寻找相关峰，抗噪能力强，在低信噪比下，均能有效获取峰值，性能好。标校精度高。本申请实施例采用粗精两步迭代运算，理论分析粗估计精度达0.05个采样周期，精估计精度达0.005个采样周期，具有极高的标校精度。标校时间短。设备稳定后，采集1024个数即可完成收发IQ时延标校。实测标校时间为：10GHz的采样率，1024个数的采集时间为0.1024us；数据传输时间为50us；采用C语言完成收发IQ时延标校，统计1000次，计算出单次标校时间为478.6951us。因此收发IQ时延标校总时间为528.7975us，标校时间极短，效率高。与本申请实施例中的一种面向卫星激光通信的IQ时延标校方法相对应，本申请实施例还提出了一种面向卫星激光通信的IQ时延标校装置，如图10所示，所述装置包括：第一采样模块901，用于执行步骤S1，设置发送端的调制方式为BPSK，使所述发送端向接收端发送调制后的第一光信号，并在所述接收端对与所述第一光信号对应的接收基带信号进行采样，得到预设数量的第一IQ基带数据；第一运算模块902，用于执行步骤S2，对各所述第一IQ基带数据进行互相关运算，得到第一互相关结果，并根据所述第一互相关结果确定接收IQ时延；第二采样模块903，用于执行步骤S3，设置所述发送端的调制方式为QPSK，使所述发送端向所述接收端发送调制后的第二光信号，在所述接收端对与所述第二光信号对应的接收基带信号进行采样，得到所述预设数量的第二IQ基带数据；第二运算模块904，用于执行步骤S4，对各所述第二IQ基带数据进行互相关运算，得到第二互相关结果，并根据所述第二互相结果确定发送IQ时延；确定模块905，用于执行步骤S5，根据所述接收IQ时延和所述发送IQ时延确定IQ时延标校结果。本发明实施例还提供了一种电子设备，如图11所示，包括处理器101、通信接口102、存储器103和通信总线104，其中，处理器101，通信接口102，存储器103通过通信总线104完成相互间的通信，存储器103，用于存储处理器的可执行指令；处理器101，被配置为经由执行所述可执行指令来执行：步骤S1，设置发送端的调制方式为BPSK，使所述发送端向接收端发送调制后的第一光信号，并在所述接收端对与所述第一光信号对应的接收基带信号进行采样，得到预设数量的第一IQ基带数据；步骤S2，对各所述第一IQ基带数据进行互相关运算，得到第一互相关结果，并根据所述第一互相关结果确定接收IQ时延；步骤S3，设置所述发送端的调制方式为QPSK，使所述发送端向所述接收端发送调制后的第二光信号，并在所述接收端对与所述第二光信号对应的接收基带信号进行采样，得到所述预设数量的第二IQ基带数据；步骤S4，对各所述第二IQ基带数据进行互相关运算，得到第二互相关结果，并根据所述第二互相结果确定发送IQ时延；步骤S5，根据所述接收IQ时延和所述发送IQ时延确定IQ时延标校结果。上述通信总线可以是PCI 总线或EISA 总线等。该通信总线可以分为地址总线、数据总线、控制总线等。为便于表示，图中仅用一条粗线表示，但并不表示仅有一根总线或一种类型的总线。通信接口用于上述终端与其他设备之间的通信。存储器可以包括RAM ，也可以包括非易失性存储器，例如至少一个磁盘存储器。可选的，存储器还可以是至少一个位于远离前述处理器的存储装置。上述的处理器可以是通用处理器，包括CPU 、NP 等；还可以是DSP 、ASIC 、FPGA 或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。在本发明提供的又一实施例中，还提供了一种计算机可读存储介质，该计算机可读存储介质中存储有计算机程序，所述计算机程序被处理器执行时实现如上所述的面向卫星激光通信的IQ时延标校方法。在本发明提供的又一实施例中，还提供了一种包含指令的计算机程序产品，当其在计算机上运行时，使得计算机执行如上所述的面向卫星激光通信的IQ时延标校方法。在上述实施例中，可以全部或部分地通过软件、硬件、固件或者其任意组合来实现。当使用软件实现时，可以全部或部分地以计算机程序产品的形式实现。所述计算机程序产品包括一个或多个计算机指令。在计算机上加载和执行所述计算机程序指令时，全部或部分地产生按照本发明实施例所述的流程或功能。所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。所述计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，所述计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线或无线方式向另一个网站站点、计算机、服务器或数据中心进行传输。所述计算机可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集成的服务器、数据中心等数据存储设备。所述可用介质可以是磁性介质，、光介质、或者半导体介质等。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本说明书中的各个实施例均采用相关的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述仅为本发明的较佳实施例而已，并非用于限定本发明的保护范围。凡在本发明的精神和原则之内所作的任何修改、等同替换、改进等，均包含在本发明的保护范围内。
