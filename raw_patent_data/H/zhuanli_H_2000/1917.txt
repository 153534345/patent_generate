标题title
业务瓶颈节点的确定方法、装置、电子设备及存储介质
摘要abst
本发明提供一种业务瓶颈节点的确定方法、装置、电子设备及存储介质，方法包括：接收用户通过交互端发送的待校验业务信息；根据所述待校验业务信息，确定待校验业务的业务执行链路中的节点为目标节点；提取各所述目标节点在预设的第一时间段内的运行耗时数据；根据全部所述运行耗时数据，确定所述待校验业务的运行特征矩阵；根据所述运行特征矩阵，确定所述待校验业务中的瓶颈节点。本发明由运行特征矩阵确定瓶颈节点，避免了现有技术直接解算方式确定瓶颈节点对算力资源投入的高要求；通过避免直接解算所需的大量计算耗时，本发明实施例能够高效率地确定瓶颈节点。
权利要求书clms
1.一种业务瓶颈节点的确定方法，其特征在于，包括：接收用户通过交互端发送的待校验业务信息；根据所述待校验业务信息，确定待校验业务的业务执行链路中的节点为目标节点；提取各所述目标节点在预设的第一时间段内的运行耗时数据；根据全部所述运行耗时数据，确定所述待校验业务的运行特征矩阵；根据所述运行特征矩阵，确定所述待校验业务中的瓶颈节点。2.根据权利要求1所述的业务瓶颈节点的确定方法，其特征在于：所述第一时间段至少包括一个自然日；所述运行耗时数据包括：每个小时的第一耗时值，以及每一自然日的第二耗时值；根据全部所述运行耗时数据，确定所述待校验业务的运行特征矩阵，包括：根据所述第一耗时值及所述第二耗时值，确定时序特征矩阵，及确定时序趋势特征矩阵；根据所述时序特征矩阵及所述时序趋势特征矩阵，确定所述运行特征矩阵。3.根据权利要求2所述的业务瓶颈节点的确定方法，其特征在于：所述第一耗时值的数值等于第一P99值，所述第一P99值为大于或者等于同一小时内99%的运行耗时值的数值；所述第二耗时值的数值等于第二P99值，所述第二P99值为大于或者等于同一自然日内99%的运行耗时值的数值。4.根据权利要求2所述的业务瓶颈节点的确定方法，其特征在于：所述第一耗时值的数值等于以下任一数值：同一小时内运行耗时值的平均值、同一小时内运行耗时值的最大值、同一小时内运行耗时值的最小值；所述第二耗时值的数值等于以下任一数值：同一自然日内运行耗时值的平均值、同一自然日内运行耗时值的最大值、同一自然日内运行耗时值的最小值。5.根据权利要求1所述的业务瓶颈节点的确定方法，其特征在于：根据所述运行特征矩阵，确定所述待校验业务中的瓶颈节点，之后包括：根据所述瓶颈节点生成告警信息，并将所述告警信息发送至所述交互端。6.一种业务瓶颈节点的确定装置，其特征在于，包括：接收模块，用于接收用户通过交互端发送的待校验业务信息；第一执行模块，用于根据所述待校验业务信息，确定待校验业务的业务执行链路中的节点为目标节点；提取模块，用于提取各所述目标节点在预设的第一时间段内的运行耗时数据；第二执行模块，用于根据全部所述运行耗时数据，确定所述待校验业务的运行特征矩阵；所述第二执行模块，还用于根据所述运行特征矩阵，确定所述待校验业务中的瓶颈节点。7.根据权利要求6所述的业务瓶颈节点的确定装置，其特征在于：所述第一时间段至少包括一个自然日；所述运行耗时数据包括：每个小时的第一耗时值，以及每一自然日的第二耗时值；所述第二执行模块，还用于根据所述第一耗时值及所述第二耗时值，确定时序特征矩阵，及确定时序趋势特征矩阵；所述第二执行模块，还用于根据所述时序特征矩阵及所述时序趋势特征矩阵，确定所述运行特征矩阵。8.根据权利要求6所述的业务瓶颈节点的确定装置，其特征在于，还包括：告警模块，用于根据所述瓶颈节点生成告警信息，并将所述告警信息发送至所述交互端。9.一种电子设备，其特征在于：包括处理器，存储器及存储在所述存储器上并可在所述处理器上运行的程序或指令，所述程序或指令被所述处理器执行时实现如权利要求1至5中任一项所述的业务瓶颈节点的确定方法中的步骤。10.一种可读存储介质，其特征在于：所述可读存储介质上存储程序或指令，所述程序或指令被处理器执行时实现如权利要求1至5中任一项所述的业务瓶颈节点的确定方法中的步骤。
说明书desc
技术领域本发明实施例涉及业务运行监测技术领域，尤其涉及一种业务瓶颈节点的确定方法、装置、电子设备及存储介质。背景技术在线交易业务底层的软件架构在不断扩张，分布式系统变得日趋复杂，越来越多的组件开始走向分布式化，如微服务、消息收发、分布式数据库、分布式缓存、分布式对象存储、跨域调用，这些组件共同构成了繁杂的分布式网络。当前，对于业务性能优化主要针对业务瓶颈节点，而业务瓶颈节点在越来越复杂的网络下难以被确定。例如，在完成一笔交易的过程中，用户只是在页面上点击支付按钮，然而一个简单的点击操作，背后是由十几个甚至数十个的微服务业务节点去共同完成的。现有的业务瓶颈节点的确定方法为：通过直接解算全部节点运行耗时的方式确定瓶颈节点，所需要的算力资源多；且需要的解算耗时长，确定瓶颈节点的效率低。发明内容本发明实施例提供一种业务瓶颈节点的确定方法、装置、电子设备及存储介质，以解决现有的业务瓶颈节点的确定方法为：通过直接解算全部节点运行耗时的方式确定瓶颈节点，所需要的算力资源多；且需要的解算耗时长，确定瓶颈节点的效率低的问题。为了解决上述技术问题，本发明是这样实现的：第一方面，本发明实施例提供了一种业务瓶颈节点的确定方法，包括：接收用户通过交互端发送的待校验业务信息；根据所述待校验业务信息，确定待校验业务的业务执行链路中的节点为目标节点；提取各所述目标节点在预设的第一时间段内的运行耗时数据；根据全部所述运行耗时数据，确定所述待校验业务的运行特征矩阵；根据所述运行特征矩阵，确定所述待校验业务中的瓶颈节点。可选地，所述第一时间段至少包括一个自然日；所述运行耗时数据包括：每个小时的第一耗时值，以及每一自然日的第二耗时值；根据全部所述运行耗时数据，确定所述待校验业务的运行特征矩阵，包括：根据所述第一耗时值及所述第二耗时值，确定时序特征矩阵，及确定时序趋势特征矩阵；根据所述时序特征矩阵及所述时序趋势特征矩阵，确定所述运行特征矩阵。可选地，所述第一耗时值的数值等于第一P99值，所述第一P99值为大于或者等于同一小时内99%的运行耗时值的数值；所述第二耗时值的数值等于第二P99值，所述第二P99值为大于或者等于同一自然日内99%的运行耗时值的数值。可选地，所述第一耗时值的数值等于以下任一数值：同一小时内运行耗时值的平均值、同一小时内运行耗时值的最大值、同一小时内运行耗时值的最小值；所述第二耗时值的数值等于以下任一数值：同一自然日内运行耗时值的平均值、同一自然日内运行耗时值的最大值、同一自然日内运行耗时值的最小值。可选地，根据所述运行特征矩阵，确定所述待校验业务中的瓶颈节点，之后包括：根据所述瓶颈节点生成告警信息，并将所述告警信息发送至所述交互端。第二方面，本发明实施例提供了一种业务瓶颈节点的确定装置，包括：接收模块，用于接收用户通过交互端发送的待校验业务信息；第一执行模块，用于根据所述待校验业务信息，确定待校验业务的业务执行链路中的节点为目标节点；提取模块，用于提取各所述目标节点在预设的第一时间段内的运行耗时数据；第二执行模块，用于根据全部所述运行耗时数据，确定所述待校验业务的运行特征矩阵；所述第二执行模块，还用于根据所述运行特征矩阵，确定所述待校验业务中的瓶颈节点。可选地，所述第一时间段至少包括一个自然日；所述运行耗时数据包括：每个小时的第一耗时值，以及每一自然日的第二耗时值；所述第二执行模块，还用于根据所述第一耗时值及所述第二耗时值，确定时序特征矩阵，及确定时序趋势特征矩阵；所述第二执行模块，还用于根据所述时序特征矩阵及所述时序趋势特征矩阵，确定所述运行特征矩阵。可选地，还包括：告警模块，用于根据所述瓶颈节点生成告警信息，并将所述告警信息发送至所述交互端。第三方面，本发明实施例提供了一种电子设备，包括处理器，存储器及存储在所述存储器上并可在所述处理器上运行的程序或指令，所述程序或指令被所述处理器执行时实现如第一方面中任一项所述的业务瓶颈节点的确定方法中的步骤。第四方面，本发明实施例提供了一种可读存储介质，所述可读存储介质上存储程序或指令，所述程序或指令被处理器执行时实现如第一方面中任一项所述的业务瓶颈节点的确定方法中的步骤。本发明实施例中，通过接收用户通过交互端发送的待校验业务信息；根据待校验业务信息，确定待校验业务的业务执行链路中的节点为目标节点，缩小了确定瓶颈节点的节点范围，前期通过缩减确定瓶颈节点的节点范围，有利于降低后期确定瓶颈节点所需的算力资源投入；确定目标节点，再从目标节点的范围内确定瓶颈节点，也有利于高准确度地确定瓶颈节点。提取各目标节点在预设的第一时间段内的运行耗时数据；根据全部运行耗时数据，确定待校验业务的运行特征矩阵；进一步地，根据运行特征矩阵，确定待校验业务中的瓶颈节点。本发明实施例，由运行特征矩阵确定瓶颈节点，避免了现有技术直接解算方式确定瓶颈节点对算力资源投入的高要求；通过避免直接解算所需的大量计算耗时，本发明实施例能够高效率地确定瓶颈节点。附图说明通过阅读下文优选实施方式的详细描述，各种其他的优点和益处对于本领域普通技术人员将变得清楚明了。附图仅用于示出优选实施方式的目的，而并不认为是对本发明的限制。而且在整个附图中，用相同的参考符号表示相同的部件。在附图中：图1为本发明实施例业务瓶颈节点的确定方法的流程示意图之一；图2为业务节点耗时P99小时表的示意图；图3为业务节点耗时P99天表的示意图；图4为本发明实施例业务瓶颈节点的确定方法的流程示意图之二；图5为运行特征矩阵示意图；图6为业务节点P99耗时每日最大瓶颈记录表的示意图；图7为本发明实施例业务瓶颈节点的确定装置的原理框图；图8为本发明实施例电子设备的原理框图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本发明实施例提供了一种业务瓶颈节点的确定方法，参见图1所示，图1为本发明实施例业务瓶颈节点的确定方法的流程示意图之一，包括：步骤11：接收用户通过交互端发送的待校验业务信息；步骤12：根据待校验业务信息，确定待校验业务的业务执行链路中的节点为目标节点；步骤13：提取各目标节点在预设的第一时间段内的运行耗时数据；步骤14：根据全部运行耗时数据，确定待校验业务的运行特征矩阵；步骤15：根据运行特征矩阵，确定待校验业务中的瓶颈节点。本发明的一些实施例中，可选地，步骤11及12，用户通过发送待校验业务信息指定待校验业务，确定待校验业务的业务执行链路中的节点为目标节点。示例性的，待校验业务可以是结算业务；对应地，结算业务的业务执行链路中包括：接收请求、要素认证、账号校验、风控校验、税务校验、账务处理、通道路由及出款结算，共8个节点。本发明的一些实施例中，运行耗时数据可以是各目标节点的运行耗时值。运行耗时值可以是目标节点在第一时间段内的每个自然日的运行耗时值，可以是目标节点在第一时间段内的每小时的运行耗时值，也可以是目标节点第一时间段内的每分钟的运行耗时值。具体到运行耗时值的取值上，可以是以下任一值：平均值、P99、最大值及最小值。以下结合示例进行说明：以一天为指定周期，小时为时间单位，业务节点耗时的P99数据预处理为例，介绍业务瓶颈节点的确定步骤1）至5）：1）参见图2所示，读取业务节点耗时P99小时表，从0点至24点依次读取8个节点的耗时的P99值，得到二维数据集合SetP99H。图2中，业务节点耗时P99小时表记录了一个自然日内各业务节点耗时的P99值，包括了日期、小时以及8个节点的耗时P99值。本示例中，二维数据集合SetP99H=,……,]。2）参见图3所示，根据业务节点耗时P99天表，读取指定日期8个节点的当天耗时的P99值，得到集合SetP99D。图3中，以自然日为单位，业务节点耗时P99天表记录了各业务节点耗时的P99值。具体地，业务节点耗时P99天表具体包括了：日期，及与日期对应的各节点的耗时P99值。根据业务节点耗时P99天表，读取指定日期8个节点的当天耗时的P99值，即：根据第一时间段对应的日期，从业务节点耗时P99天表读取与该日期对应的8个节点的运行耗时值。本示例中，SetP99D=。3）计算P99值的时序相对大小特征矩阵SetP99ComT，计算步骤A1至A7如下：A1、设j代表SetP99D的下标，即数组位置，j的初始值为0，最大值为7；A2、读取SetP99D,即在SetP99D处于位置j的数据的值；A3、设i代表SetP99H的横坐标，则i，j为SetP99H的位置坐标，i的初始值为0，最大值为23；A4、读取SetP99H,并判断SetP99H是否大于SetP99D；A5、若大于，则SetP99ComT=1，若不大于，则SetP99ComT=0；A6、将i=i+1，回到步骤A4，直至i大于23；A7、将j=j+1，回到步骤A2，直至j大于7。4）计算P99的时序增序特征矩阵SetP99IncT，计算步骤B1至B6如下：B1、设i，j代表SetP99H的坐标，i初始值为0，最大值为23，j初始值为0，最大值为7；B2、读取SetP99H，判断i是否等于0；B3、若等于0，则读取SetP99D，并判断SetP99H是否大于SetP99D，若是，则SetP99IncT=1,若否，则SetP99IncT=0；B4、若不等于0，则读取SetP99H，并判断SetP99H是否大于SetP99H，若是，则SetP99IncT=1,若否，则SetP99IncT=0；B5、将j=j+1，回到步骤B2，直到j大于7；B6、将i=i+1，j=0，回到步骤B2，直到i大于23，结束流程。5）根据时序相对大小特征矩阵SetP99ComT和时序增序特征矩阵SetP99IncT，计算二维瓶颈矩阵，确定瓶颈节点。计算二维瓶颈矩阵的步骤C1至C4如下：C1、用SetP99BlockT表示二维瓶颈矩阵，设i，j代表SetP99ComT、SetP99IncT和SetP99BlockT的坐标，i初始值为0，最大值为23，j初始值为0，最大值为7；C2、读取SetP99ComT和SetP99IncT，并且将二者做“逻辑与”操作的值作为对应SetP99BlockT的值，即SetP99BlockT= SetP99ComT&amp;&amp;SetP99IncT；C3、将j=j+1，回到步骤C2，直至j大于7；C4、将i=i+1，j=0，回到步骤C2，直至i大于23，结束流程。二维瓶颈矩阵SetP99BlockT中，数值为1的节点表征瓶颈节点，数值为0的节点表征目标节点但非瓶颈节点。二维瓶颈矩阵SetP99BlockT中，行表示时间序列，列表示业务节点序列。由此，通过二维瓶颈矩阵SetP99BlockT即可确定瓶颈节点。本发明实施例中，通过接收用户通过交互端发送的待校验业务信息；根据待校验业务信息，确定待校验业务的业务执行链路中的节点为目标节点，缩小了确定瓶颈节点的节点范围，前期通过缩减确定瓶颈节点的节点范围，有利于降低后期确定瓶颈节点所需的算力资源投入；确定目标节点，再从目标节点的范围内确定瓶颈节点，也有利于高准确度地确定瓶颈节点。提取各目标节点在预设的第一时间段内的运行耗时数据；根据全部运行耗时数据，确定待校验业务的运行特征矩阵；进一步地，根据运行特征矩阵，确定待校验业务中的瓶颈节点。本发明实施例，由运行特征矩阵确定瓶颈节点，避免了现有技术直接解算方式确定瓶颈节点对算力资源投入的高要求；通过避免直接解算所需的大量计算耗时，本发明实施例能够高效率地确定瓶颈节点。本发明的一些实施例中，可选地，第一时间段至少包括一个自然日；运行耗时数据包括：每个小时的第一耗时值，以及每一自然日的第二耗时值；参见图4所示，图4为本发明实施例业务瓶颈节点的确定方法的流程示意图之二，根据全部运行耗时数据，确定待校验业务的运行特征矩阵，包括：步骤21：根据第一耗时值及第二耗时值，确定时序特征矩阵，及确定时序趋势特征矩阵；步骤22：根据时序特征矩阵及时序趋势特征矩阵，确定运行特征矩阵。以下结合示例进行说明：以一天为指定周期，小时为时间单位，业务节点耗时的P99数据预处理为例，介绍业务瓶颈节点的确定步骤1）至5）：1）参见图2所示，读取业务节点耗时P99小时表，从0点至24点依次读取8个节点的耗时的P99值，得到二维数据集合SetP99H。图2中，业务节点耗时P99小时表记录了一个自然日内各业务节点耗时的P99值，包括了日期、小时以及8个节点的耗时P99值。本示例中，二维数据集合SetP99H=,……,]。2）参见图3所示，根据业务节点耗时P99天表，读取指定日期8个节点的当天耗时的P99值，得到集合SetP99D。图3中，以自然日为单位，业务节点耗时P99天表记录了各业务节点耗时的P99值。具体地，业务节点耗时P99天表具体包括了：日期，及与日期对应的各节点的耗时P99值。根据业务节点耗时P99天表，读取指定日期8个节点的当天耗时的P99值，即：根据第一时间段对应的日期，从业务节点耗时P99天表读取与该日期对应的8个节点的运行耗时值。本示例中，SetP99D=。3）计算P99值的时序相对大小特征矩阵SetP99ComT，计算步骤A1至A7如下：A1、设j代表SetP99D的下标，即数组位置，j的初始值为0，最大值为7；A2、读取SetP99D,即在SetP99D处于位置j的数据的值；A3、设i代表SetP99H的横坐标，则i，j为SetP99H的位置坐标，i的初始值为0，最大值为23；A4、读取SetP99H,并判断SetP99H是否大于SetP99D；A5、若大于，则SetP99ComT=1，若不大于，则SetP99ComT=0；A6、将i=i+1，回到步骤A4，直至i大于23；A7、将j=j+1，回到步骤A2，直至j大于7。4）计算P99的时序增序特征矩阵SetP99IncT，计算步骤B1至B6如下：B1、设i，j代表SetP99H的坐标，i初始值为0，最大值为23，j初始值为0，最大值为7；B2、读取SetP99H，判断i是否等于0；B3、若等于0，则读取SetP99D，并判断SetP99H是否大于SetP99D，若是，则SetP99IncT=1,若否，则SetP99IncT=0；B4、若不等于0，则读取SetP99H，并判断SetP99H是否大于SetP99H，若是，则SetP99IncT=1,若否，则SetP99IncT=0；B5、将j=j+1，回到步骤B2，直到j大于7；B6、将i=i+1，j=0，回到步骤B2，直到i大于23，结束流程。5）根据时序相对大小特征矩阵SetP99ComT和时序增序特征矩阵SetP99IncT，计算二维瓶颈矩阵，确定瓶颈节点。计算二维瓶颈矩阵的步骤C1至C4如下：C1、用SetP99BlockT表示二维瓶颈矩阵，设i，j代表SetP99ComT、SetP99IncT和SetP99BlockT的坐标，i初始值为0，最大值为23，j初始值为0，最大值为7；C2、读取SetP99ComT和SetP99IncT，并且将二者做“逻辑与”操作的值作为对应SetP99BlockT的值，即SetP99BlockT= SetP99ComT&amp;&amp;SetP99IncT；C3、将j=j+1，回到步骤C2，直至j大于7；C4、将i=i+1，j=0，回到步骤C2，直至i大于23，结束流程。二维瓶颈矩阵SetP99BlockT中，数值为1的节点表征瓶颈节点，数值为0的节点表征目标节点但非瓶颈节点。二维瓶颈矩阵SetP99BlockT中，行表示时间序列，列表示业务节点序列。由此，通过二维瓶颈矩阵SetP99BlockT即可确定瓶颈节点。本发明实施例中，通过根据第一耗时值及第二耗时值，确定时序特征矩阵，及确定时序趋势特征矩阵；时序特征矩阵为由耗时值相对大小确定的特征矩阵，而时序趋势特征矩阵为由耗时值变化趋势确定的特征矩阵，从耗时值相对大小及耗时值变化趋势两个维度出发，根据时序特征矩阵及时序趋势特征矩阵确定运行特征矩阵，能确保运行特征矩阵准确反映待校验业务的运行特性，保障高准确地确定瓶颈节点。本发明的一些实施例中，可选地，第一耗时值的数值等于第一P99值，第一P99值为大于或者等于同一小时内99%的运行耗时值的数值；第二耗时值的数值等于第二P99值，第二P99值为大于或者等于同一自然日内99%的运行耗时值的数值。本发明实施例中，第一P99值计算的具体步骤可以为：同一小时内，目标节点的耗时值为t1、t2、……、tn从小到大排列，n为正整数且n≥2；其中，99%的耗时值都在x秒内，x就是第一P99值。示例性的，待校验业务可以是结算业务；对应地，结算业务的业务执行链路中包括：接收请求、要素认证、账号校验、风控校验、税务校验、账务处理、通道路由及出款结算，共8个节点，则本示例中的n=8。本发明实施例中，第二P99值计算的具体步骤可以为：同一自然日内，目标节点的耗时值为k1、k2、……、km从小到大排列，m为正整数且m≥2；其中，99%的耗时值都在s秒内，s就是第二P99值。示例性的，待校验业务可以是结算业务；对应地，结算业务的业务执行链路中包括：接收请求、要素认证、账号校验、风控校验、税务校验、账务处理、通道路由及出款结算，共8个节点，则本示例中的m=8。本发明实施例中，通过第一耗时值的数值等于第一P99值，第二耗时值的数值等于第二P99值，优化了耗时值的选定，能够确保高准确度的运行特征矩阵。示例性的，支付业务与收款业务等钱款交易类型的业务，P99值能够更好地反映收支业务特性，避免由于均值忽视耗时值变化规律的影响造成的运行特征矩阵高误差的问题，也能避免由于最大值及最小值过度放大极端个例造成的运行特征矩阵高误差的问题。本发明的一些实施例中，可选地，第一耗时值的数值等于以下任一数值：同一小时内运行耗时值的平均值、同一小时内运行耗时值的最大值、同一小时内运行耗时值的最小值；第二耗时值的数值等于以下任一数值：同一自然日内运行耗时值的平均值、同一自然日内运行耗时值的最大值、同一自然日内运行耗时值的最小值。本发明实施例中，用户可以根据所设定的待校验业务的业务规律，确定第一耗时值选取何种类型数值，以及确定第二耗时值选取何种类型数值，有利于提高运行特征矩阵计算的准确性和灵活度，使得运行特征矩阵更加完善地反映待校验业务的业务特性。示例性的，支付业务与收款业务等钱款交易类型的业务，P99值能够更好地反映收支业务特性，避免由于均值忽视耗时值变化规律的影响造成的运行特征矩阵高误差的问题，也能避免由于最大值及最小值过度放大极端个例造成的运行特征矩阵高误差的问题。本发明的一些实施例中，可选地，根据运行特征矩阵，确定待校验业务中的瓶颈节点，之后包括：根据瓶颈节点生成告警信息，并将告警信息发送至交互端。本发明的一些实施例中，可选地，根据所述运行特征矩阵，确定所述待校验业务中的瓶颈节点，包括：根据所述运行特征矩阵，确定最大瓶颈。在前文示例中步骤1）至5）的基础上，本示例还包括：6）进一步根据二维瓶颈矩阵，识别最大瓶颈。最大瓶颈：在时间序列和业务节点序列两个方向上，最大的相邻瓶颈的瓶颈值之和。在二维瓶颈矩阵中，瓶颈节点的瓶颈值为1，目标节点但非瓶颈节点的瓶颈值为0，由此，在二维瓶颈矩阵中的最大瓶颈即为：横向和纵向方向上相邻的数值为1的单元格的最大数目。示例性地，参见图5所述，相邻瓶颈即图中加粗黑线所围合的区域内的瓶颈节点，共有7个相邻的瓶颈节点，其能达到的最大的和值为7，故本示例中的最大瓶颈为7。识别最大瓶颈的步骤D1至D4如下：D1、初始化最大瓶颈ans为0，最大瓶颈坐标队列blockQ；D2、对于SetP99BlockT中的每个位置，执行以下a至d步骤：a、始化当前瓶颈cur为0，以及两个空队列queue1和queue2；b、将当前位置坐标入队queue1；c、当队列queue1不为空时，执行以下i至iv步骤：i、取出队列queue1的队首元素，作为cur_i和cur_j；ii、如果cur_i和cur_j超出了数组边界，或者SetP99BlockT的值不为1，则跳过该位置；iii、否则，将当前位置标记为已访问，即将SetP99BlockT的值设为0，并将当前瓶颈cur加1，并将入队queue2；iv、将当前位置的四邻域中的所有值为1的位置，进入队queue1；d、更新最大瓶颈ans为当前瓶颈cur和ans中的较大值，即ans=max，且若cur大于ans时，更新blockQ为queue2，即blockQ=queue2；D3、重复步骤D2，直到遍历完所有位置；D4、存储并输出最大瓶颈ans和最大瓶颈坐标队列blockQ。以上依据业务节点P99耗时得出的二维瓶颈矩阵、最大瓶颈和最大瓶所处位置。示例性的，参见图5所述，最大瓶所处位置，图5中加粗黑线所围合的区域内的每个瓶颈节点的位置均为最大瓶颈所处位置坐标，及列坐标）。本发明的一些实施例中，可选地，根据所述运行特征矩阵，确定所述待校验业务中的瓶颈节点，包括：根据所述运行特征矩阵，确定最大瓶颈；根据运行特征矩阵，确定待校验业务中的瓶颈节点，之后包括：根据最大瓶颈生成第一告警信息，并将第一告警信息发送至交互端。在前文示例中步骤1）至6）的基础上，本示例还包括：7）风险预警判断已识别的最大瓶颈、二维瓶颈矩阵是否符合风险预警条件，若符合则向相应的企业微信群发送预警消息。风险预警可以包括以下7-1及7-2两部分：7-1、最大瓶颈预警判断业务节点P99耗时的最大瓶颈是否超过了预设的报警阈值，若超过的了报警阈值，则向企业微信群发送一条预警消息，消息内容包括预警类型，依据数据类型，报警阈值，当前值，例如“【最大瓶颈预警】依据数据类型：业务耗时P99，报警阈值：5，当前值：7”；7-2、最大瓶颈30日递增预警，具体包括以下E1至E8步骤：E1、参见图6所示，读取业务节点P99耗时每日最大瓶颈记录表，获取T-30至T-1日30条最大瓶颈记录集合Set30；E2、建立一个辅助的数据集B和用来标记数据集B末尾元素下标的变量end；E3、遍历数据集Set30中的所有元素，对一个元素x，做判断：E4、如果x大于B，则将x追加到数据集B的末尾，end=end+1；E5、如果x小于B，则遍历B中查找第一个大于x的元素B，并用x替换B的值，即B=x；E6、回到步骤E3，直到遍历完集合set的所有元素，设集合B的长度为N，判断N是否大于20：E7、若大于20，则结束流程；E8、若不大于20，则向企业微信群发送一条预警消息，消息内容包括预警类型，依据数据类型，报警阈值，当前值，例如“【最大瓶颈30日递增预警】依据数据类型：业务耗时P99，报警阈值：20，当前值：21”。参见图6所示，每日最大瓶颈记录表包括了日期、类型、最大瓶颈值、生成日期字段。本发明实施例提供了一种业务瓶颈节点的确定装置，参见图7所示，图7为本发明实施例业务瓶颈节点的确定装置的原理框图，业务瓶颈节点的确定装置60包括：接收模块61，用于接收用户通过交互端发送的待校验业务信息；第一执行模块62，用于根据所述待校验业务信息，确定待校验业务的业务执行链路中的节点为目标节点；提取模块63，用于提取各所述目标节点在预设的第一时间段内的运行耗时数据；第二执行模块64，用于根据全部所述运行耗时数据，确定所述待校验业务的运行特征矩阵；所述第二执行模块64，还用于根据所述运行特征矩阵，确定所述待校验业务中的瓶颈节点。本发明的一些实施例中，可选地，所述第一时间段至少包括一个自然日；所述运行耗时数据包括：每个小时的第一耗时值，以及每一自然日的第二耗时值；所述第二执行模块64，还用于根据所述第一耗时值及所述第二耗时值，确定时序特征矩阵，及确定时序趋势特征矩阵；所述第二执行模块64，还用于根据所述时序特征矩阵及所述时序趋势特征矩阵，确定所述运行特征矩阵。本发明的一些实施例中，可选地，所述第一耗时值的数值等于第一P99值，所述第一P99值为大于或者等于同一小时内99%的运行耗时值的数值；所述第二耗时值的数值等于第二P99值，所述第二P99值为大于或者等于同一自然日内99%的运行耗时值的数值。本发明的一些实施例中，可选地，所述第一耗时值的数值等于以下任一数值：同一小时内运行耗时值的平均值、同一小时内运行耗时值的最大值、同一小时内运行耗时值的最小值；所述第二耗时值的数值等于以下任一数值：同一自然日内运行耗时值的平均值、同一自然日内运行耗时值的最大值、同一自然日内运行耗时值的最小值。本发明的一些实施例中，可选地，业务瓶颈节点的确定装置60还包括：告警模块，用于根据所述瓶颈节点生成告警信息，并将所述告警信息发送至所述交互端。本申请实施例提供的业务瓶颈节点的确定装置能够实现图1至图6的方法实施例实现的各个过程，并达到相同的技术效果，为避免重复，这里不再赘述。本发明实施例提供了一种电子设备70，参见图8所示，图8为本发明实施例电子设备70的原理框图，包括处理器71，存储器72及存储在存储器72上并可在处理器71上运行的程序或指令，程序或指令被处理器执行时实现本发明的任一项业务瓶颈节点的确定方法中的步骤。本发明实施例提供了一种可读存储介质，可读存储介质上存储程序或指令，程序或指令被处理器执行时实现如上述任一项的业务瓶颈节点的确定方法的实施例的各个过程，且能达到相同的技术效果，为避免重复，这里不再赘述。其中，所述的可读存储介质，如只读存储器、随机存取存储器、磁碟或者光盘等。上面结合附图对本发明的实施例进行了描述，但是本发明并不局限于上述的具体实施方式，上述的具体实施方式仅仅是示意性的，而不是限制性的，本领域的普通技术人员在本发明的启示下，在不脱离本发明宗旨和权利要求所保护的范围情况下，还可做出很多形式，均属于本发明的保护之内。
