标题title
领域知识约束下深度特征融合的光伏发电功率预测方法
摘要abst
本发明涉及光伏功率预测领域，公开了领域知识约束下深度特征融合的光伏发电功率预测方法。通过收集与光伏发电相关的历史数据，进行原理分析优选光伏发电领域知识，利用滑动窗口特征扩增机制对原始数据进行特征扩增，构建并行特征提取网络捕获其短期和长期依赖关系。然后，使用特征交互和特征交叉融合模块有效地融合局部和全局信息。最后，将领域知识引入预测模型中，利用理论知识指导模型训练，这一举措在一定程度上提高了模型的物理可解释性和准确性，很好地解决了功率预测不准确和不合理问题。
权利要求书clms
1.领域知识约束下深度特征融合的光伏发电功率预测方法，其特征在于，包括以下步骤：步骤S10、收集与光伏发电相关的历史数据，包括气象数据、光伏板参数、发电功率、太阳辐射，并进行数据清洗；分析光伏组件的温度效应、光伏系统的并网接入以及光伏发电的物理原理提取领域知识约束；步骤S20、将收集到的数据输入特征扩增模块；利用滑动窗口特征扩增机制提取每个窗口内数据中的整体趋势特征，并对所提取的特征进行串行连接，以增加特征数量；步骤S30、设计并行特征提取网络，包括两个子网络CNN和Transformer，子网络1提取关键局部特征，子网络2提取总体全局特征；利用线性自注意力机制与卷积位置编码构建特征交互模块，通过对特征缩放、拼接与线性化构建特征交叉融合模块，有效融合从两个框架主干提取的特征信息；步骤S40、根据光伏发电机理，挖掘光伏发电领域知识，构建激活函数和损失函数实现领域知识约束，采用随机梯度下降法更新模型参数以得到最优学习参数。2.根据权利要求1所述的领域知识约束下深度特征融合的光伏发电功率预测方法，其特征在于，所述步骤S20中，滑动窗口特征扩增机制具体设计为：首先，设为第/＞个时间点的时序数据，其中/＞，其中/＞为时序数据的长度；其次，设置单个窗口大小为/＞，按照窗口大小对数据进行划分，得到窗口/＞，定义为/＞，其中/＞为窗口集合，/＞为窗口数量；然后，设置滑动步长为/＞，其中/＞，对于每个窗口内的数据样本，采用平均值提取特征；最后，将相邻窗口内提取的特征进行串行连接。3.根据权利要求1所述的领域知识约束下深度特征融合的光伏发电功率预测方法，其特征在于，所述步骤S30中，利用构建的并行特征提取网络获得数据局部特征和全局特征，通过线性自注意力机制实现两个网络特征之间的交互式传播，引入卷积位置编码查询交互信息，定义为：其中，表示特征交互模块，/＞由输入序列进行线性变换得到，为线性注意力对输入序列中不同位置的信息关注和提取，具体为：其中，为/＞的维度，对/＞进行/＞操作，将其转化为概率分布，/＞为转置运算，通过转置/＞与/＞进行点积运算，将每个键的权重分配给对应的值；利用查询交互信息，具体为：其中，为Hadamard乘积，/＞为深度可分离卷积函数，为深度可分离卷积后的值向量；特征交叉融合模块定义为：其中，为交叉融合后的特征，/＞为注意力系数，/＞、/＞分别为低尺度特征图和高尺度特征图，/＞对/＞进行上采样操作，/＞为串行拼接函数，/＞为卷积函数，/＞为批量归一化函数，/＞为激活函数，通过点乘/＞将/＞缩放，并与/＞串行拼接，利用/＞对串行拼接后的特征进行卷积操作，通过/＞操作来规范化特征图中的每个通道，并使用/＞对经过批归一化后的特征图进行非线性激活。4.根据权利要求1所述的领域知识约束下深度特征融合的光伏发电功率预测方法，其特征在于，所述步骤S40中，经过原理分析利用激活函数实现正约束，具体为：其中，为注入正约束后的预测值，/＞为无约束预测值，/＞为输入数据，定义为/＞，其中/＞为样本集合，/＞为样本数量，/＞为样本维度，/＞为可学习参数，通过随机梯度下降法更新/＞得到最优学习参数，/＞为激活函数；根据光伏组件的温度效应分析，使用损失函数实现区间约束，模型损失函数为：其中， 、/＞为权重，/＞为无约束预测损失项，具体为：其中，为样本数量，/＞为真实值，/＞为无约束预测值；/＞为区间约束惩罚项，具体为：其中，、/＞为发电功率最大值、最小值，利用/＞函数限制模型输出落入范围。
说明书desc
技术领域本发明属于光伏功率预测技术领域，尤其领域知识约束下深度特征融合的光伏发电功率预测方法。背景技术在全球能源转型的大背景下，光伏发电技术将成为未来最主要的新能源发电技术之一。然而，由于光伏发电受天气条件、太阳高度角、太阳辐射强度、温度、湿度影响，光伏发电功率具有明显的间歇性、波动性，这导致其发电输出不稳定。因此，提高光伏发电功率预测的准确性具有重要的实际意义。目前，光伏系统发电功率预测方法主要基于机器学习、深度学习等人工智能技术进行研究。其中，传统方法包括：利用支持向量机、随机森林、差分整合移动平均自回归模型进行预测。另外，大量学者对光伏发电功率组合预测方法也进行了大量研究，如：CNN-LSTM组合预测方法、Stacking预测方法、XGBoost-LSTM组合预测模型。传统方法的预测精度较低，组合预测方法在预测准确性上有一定的提高，但是忽略了数据之间的短期与长期依赖关系，且都没有结合光伏系统的实际情况，考虑预测结果是否合理。因此，利用深度特征融合挖掘与光伏发电相关数据之间的短期与长期依赖关系，对解决目前预测结果精度较低具有重要意义。同时，通过原理分析考虑太阳辐射、天气条件、光伏组件特性因素之间的相互作用以挖掘领域知识，并将这些领域知识纳入模型的训练过程，提高模型的物理可解释性和准确性，可以为光伏发电系统的优化和管理提供更可靠的工具。发明内容本发明旨在提供一种领域知识约束下深度特征融合的光伏发电功率预测方法，以实现光伏发电功率准确预测。步骤1：领域知识约束下深度特征融合的光伏发电功率预测方法，包括以下步骤：步骤S10、收集与光伏发电相关的历史数据，包括气象数据、光伏板参数、发电功率、太阳辐射，并进行数据清洗；进一步考虑光伏发电的机理和特性，分析光伏组件的温度效应、光伏系统的并网接入以及光伏发电的物理原理以确定领域知识约束；步骤S20、将收集到的数据输入特征扩增模块；利用滑动窗口特征扩增机制提取每个窗口内数据中的整体趋势特征，并对所提取的特征进行串行连接，以增加特征数量；步骤S30、设计并行特征提取网络，包括两个子网络CNN和Transformer，子网络1提取关键局部特征，子网络2提取总体全局特征；利用线性自注意力机制与卷积位置编码构建特征交互模块，通过对特征缩放、拼接与线性化构建特征交叉融合模块，有效融合从两个框架主干提取的特征信息；步骤S40、根据光伏发电机理，挖掘光伏发电领域知识，构建激活函数和损失函数实现领域知识约束，采用随机梯度下降法更新模型参数以得到最优学习参数。步骤2：根据步骤1所述的领域知识约束下深度特征融合的光伏发电功率预测方法，所述步骤S20中，滑动窗口特征扩增机制具体设计为：首先，设为第/＞个时间点的时序数据，其中/＞，其中/＞为时序数据的长度；其次，设置单个窗口大小为/＞，按照窗口大小对数据进行划分，得到窗口/＞，定义为/＞，其中/＞为窗口集合，/＞为窗口数量；然后，设置滑动步长为/＞，其中/＞，对于每个窗口内的数据样本，采用平均值提取与光伏发电功率相关的时间序列数据中的整体趋势信息，分析数据的长期变化和趋势走向，实现对异常值的平滑处理，减少噪声影响；最后，将相邻窗口内提取的特征进行串行连接，实现特征扩增。步骤3：根据步骤1所述的领域知识约束下深度特征融合的光伏发电功率预测方法，所述步骤S30中，利用构建的并行特征提取网络获得数据局部特征和全局特征，通过线性自注意力机制实现两个网络特征之间的交互式传播，引入卷积位置编码查询交互信息，定义为：其中，表示特征交互模块，/＞由输入序列进行线性变换得到，/＞为线性注意力对输入序列中不同位置的信息关注和提取，具体为：其中，为/＞的维度，对/＞进行/＞操作，将其转化为概率分布，/＞为转置运算，通过转置/＞与/＞进行点积运算，将每个键的权重分配给对应的值；利用查询交互信息，具体为：其中，为Hadamard乘积，/＞为深度可分离卷积函数，为深度可分离卷积后的值向量；特征交叉融合模块定义为：其中，为交叉融合后的特征，/＞为注意力系数，/＞、/＞分别为低尺度特征图和高尺度特征图，/＞对/＞进行上采样操作，/＞为串行拼接函数，/＞为卷积函数，/＞为批量归一化函数，/＞为激活函数，通过点乘/＞将/＞缩放，并与串行拼接，利用/＞对拼接后的特征进行卷积操作，通过/＞操作来规范化特征图中的每个通道，并使用/＞对经过批归一化后的特征图进行非线性激活。步骤4：根据步骤1所述的领域知识约束下深度特征融合的光伏发电功率预测方法，所述步骤S40中，经过原理分析利用激活函数实现正约束，具体为：其中，为注入正约束后的预测值，/＞为无约束预测值，/＞为输入数据，定义为/＞，其中/＞为样本集合，/＞为样本数量，/＞为样本维度，/＞为可学习参数，通过随机梯度下降法更新/＞得到最优学习参数，/＞为激活函数，利用/＞函数防止预测结果生成负值；根据光伏组件的温度效应分析，使用损失函数实现区间约束，模型损失函数为：其中， 、/＞为权重，/＞，初始值设置为0.5，后续可通过是否违反区间约束并包含比真实值更大的误差来进行调整；/＞为无约束预测损失项，具体为：，/＞为样本数量，/＞为真实值，/＞为无约束预测值；/＞为区间约束惩罚项，具体为：其中，、/＞为发电功率最大值、最小值，利用/＞函数限制模型输出落入/＞范围；在训练过程中，通过调整权重使损失函数最小化，从而提高模型的准确性。本发明的有益效果如下：本项发明通过原理分析，在光伏发电功率预测模型中引入领域知识，这一举措对于光伏发电产业实际意义。利用理论指导模型训练，在一定程度上提高了模型的物理可解释性和准确性，从而提供了更准确、合理的预测结果。同时，本发明合理运用并行特征提取网络以并行地方式捕获数据的短期和长期依赖关系，并通过自我注意力线性化实现两个网络的特征之间的交互式传播。此外，通过利用特征交叉融合模块探索数据全局-局部信息，实现光伏发电功率的准确、合理预测。附图说明图1为算法体系结构；图2为特征交互-交叉融合图示。具体实施方式以下结合附图对本发明的实施例进行详细说明，但是本发明可以由权利要求限定和覆盖的多种不同方式实施。在领域知识的约束下，本发明通过特征融合，利用数据的全局-局部信息，进行光伏发电功率预测。首先收集与光伏发电相关的历史数据，包括气象数据、光伏板参数、发电功率、太阳辐射，数据清洗后进行原理分析优选光伏发电领域知识；其次，利用滑动窗口特征扩增机制对收集的数据进行特征扩增；然后，采用并行特征提取网络提取局部、全局特征，并利用特征交互模块与特征交叉融合模块实现特征融合，以探索全局-局部信息；最后，根据原理分析，将领域知识注入预测模型，通过指导模型训练过程提高预测结果的准确性与合理性。步骤1：领域知识约束下深度特征融合的光伏发电功率预测方法，如图1所示，示出了所述领域知识约束下深度特征融合的光伏发电功率预测方法的算法体系结构，包括以下步骤：步骤S10、收集与光伏发电相关的历史数据，包括气象数据、光伏板参数、发电功率、太阳辐射，并进行数据清洗；进一步考虑光伏发电的机理和特性，分析光伏组件的温度效应、光伏系统的并网接入以及光伏发电的物理原理以确定领域知识约束；步骤S20、将收集到的数据输入特征扩增模块；利用滑动窗口特征扩增机制提取每个窗口内数据中的整体趋势特征，并对所提取的特征进行串行连接，以增加特征数量；步骤S30、设计并行特征提取网络，包括两个子网络CNN和Transformer，子网络1提取关键局部特征，子网络2提取总体全局特征；利用线性自注意力机制与卷积位置编码构建特征交互模块，通过对特征缩放、拼接与线性化构建特征交叉融合模块，有效融合从两个框架主干提取的特征信息；步骤S40、根据光伏发电机理，挖掘光伏发电领域知识，构建激活函数和损失函数实现领域知识约束，采用随机梯度下降法更新模型参数以得到最优学习参数。步骤2：根据步骤1所述的领域知识约束下深度特征融合的光伏发电功率预测方法，所述步骤S20中，滑动窗口特征扩增机制具体设计为：首先，设为第/＞个时间点的时序数据，其中/＞，其中/＞为时序数据的长度；其次，设置单个窗口大小为/＞，按照窗口大小对数据进行划分，得到窗口/＞，定义为/＞，其中/＞为窗口集合，/＞为窗口数量；然后，设置滑动步长为/＞，其中/＞，对于每个窗口内的数据样本，采用平均值提取特征，实现对异常值的平滑处理，减少噪声影响；最后，将相邻窗口内提取的特征进行拼接，以实现特征的扩增。步骤3：根据步骤1所述的领域知识约束下深度特征融合的光伏发电功率预测方法，所述步骤S30中，利用构建的并行特征提取网络获得数据局部特征和全局特征；图2是本申请示出的特征交互-交叉融合图示，如图2所示，为了有效融合数据的局部特征和全局特征，构建特征交互模块与特征交叉融合模块，其构建方法包括：通过线性自我注意力机制实现两个网络特征之间的交互式传播，定义为：其中，表示特征交互模块，/＞由输入序列进行线性变换得到，/＞为线性注意力对输入序列中不同位置的信息关注和提取，具体为：其中，为/＞的维度，对/＞进行/＞操作，将其转化为概率分布，/＞为转置运算，通过转置/＞与/＞进行点积运算，将每个键的权重分配给对应的值；引入卷积位置编码查询交互信息，具体为：其中，为查询得到的交互信息，/＞为Hadamard乘积，为深度可分离卷积函数，/＞为深度可分离卷积后的值向量；特征交叉融合模块定义为：其中，为交叉融合后的特征，/＞为注意力系数，/＞、/＞分别为低尺度特征图和高尺度特征图，/＞对/＞进行上采样操作，/＞为串行拼接函数，/＞为卷积函数，/＞为批量归一化函数，/＞为激活函数，通过点乘/＞将/＞缩放，并与串行拼接，利用/＞对拼接后的特征进行卷积操作，通过/＞操作来规范化特征图中的每个通道，并使用/＞对经过批归一化后的特征图进行非线性激活。步骤4：根据步骤1所述的领域知识约束下深度特征融合的光伏发电功率预测方法，所述步骤S40中，经过原理分析利用激活函数实现正约束，具体为：其中，为注入正约束后的预测值，/＞为无约束预测值，/＞为输入数据，定义为/＞，其中/＞为样本集合，/＞为样本数量，/＞为样本维度，/＞为可学习参数，通过随机梯度下降法更新/＞得到最优学习参数，/＞为激活函数，利用/＞函数防止预测结果生成负值；根据光伏组件的温度效应分析，使用损失函数实现区间约束，模型损失函数为：其中， 、/＞为权重，/＞，初始值设置为0.5，后续可通过是否违反区间约束并包含比真实值更大的误差来进行调整；/＞为无约束预测损失项，具体为：，/＞为样本数量，/＞为真实值，/＞为无约束预测值；/＞为区间约束惩罚项，具体为：其中，、/＞为发电功率最大值、最小值，利用/＞函数限制模型输出落入/＞范围；在训练过程中，通过调整权重使损失函数最小化，从而提高模型的准确性。上述内容仅代表本发明的实施方式，而非对发明的保护范围进行限制。任何以本发明说明书和附图中所描述的内容为基础进行的等效结构或等效流程变换，以及在其他相关技术领域中的直接或间接应用，都属于本发明所要保护的范围。
