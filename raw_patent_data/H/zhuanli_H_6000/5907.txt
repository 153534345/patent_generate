标题title
一种新能源车动力控制方法及装置
摘要abst
本发明涉及新能源车电机控制领域，具体而言，涉及一种新能源车动力控制方法及装置。根据电机转速得到第一目标控制频率；根据电机电流矢量幅值得到第二目标控制频率；根据所述第一目标控制频率和所述第二目标控制频率得到第三目标控制频率；根据所述第三目标控制频率作为电机控制系统运行频率。这样就解决了电机低速小扭矩运行时，系统控制能力过剩，徒增电机控制器开关损耗，减少开关管器件寿命的问题。
权利要求书clms
1.一种新能源车动力控制方法，其特征在于，所述新能源车动力控制方法包括：根据电机转速得到第一目标控制频率；根据电机电流矢量幅值得到第二目标控制频率；根据所述第一目标控制频率和所述第二目标控制频率得到第三目标控制频率；根据所述第三目标控制频率作为电机控制系统运行频率；设定转速识别区间，所述转速识别区间包括设定的最小识别转速和最大识别转速，当电机转速位于转速识别区间内时，根据电机转速变化趋势按照第一规则得到第一目标控制频率；当电机转速位于转速识别区间外时，根据所述电机转速按照第二规则得到第一目标控制频率。2.根据权利要求1所述的一种新能源车动力控制方法，其特征在于，所述第一规则是：将所述转速识别区间按照第三规则划分n个子转速识别区间，设定每个子转速识别区间的控制频率系数，根据电机转速所在的第n个子转速识别区间得到转速控制频率系数。3.根据权利要求2所述的一种新能源车动力控制方法，其特征在于，根据电机的极对数、所述电机转速、所述转速控制频率系数得到所述第一目标控制频率。4.根据权利要求2所述的一种新能源车动力控制方法，其特征在于，所述第三规则是：当所述电机转速变化趋势处于上升状态时，将最小识别转速和最大识别转速之间划分为n个子转速识别区间；当所述电机转速变化趋势处于下降状态时，将最小识别转速和最大识别转速之间划分为n个子转速识别区间，下降状态的第n个转速识别区间，相比上升状态的第n个转速识别区间增加转速偏移量Δ。5.根据权利要求1所述的一种新能源车动力控制方法，其特征在于，所述第二规则是：当电机转速小于所述最小识别转速时，第一目标控制频率系数为最小识别转速对应的控制频率系数；当电机转速大于所述最大识别转速时，第一目标控制频率系数/＞为最大识别转速对应的控制频率系数。6.根据权利要求1所述的一种新能源车动力控制方法，其特征在于，根据电机电流矢量幅值、电流门限值和电流矢量幅值系数按照第四规则得到第二目标控制频率，根据第一轴目标电流和第二轴目标电流按照第五规则得到电机电流矢量幅值。7.根据权利要求6所述的一种新能源车动力控制方法，其特征在于，所述第四规则是：设定电流门限值，当电机电流矢量幅值小于等于设定电流门限值时，第二目标控制频率取零；当电机电流矢量幅值大于设定电流门限值时，根据电机电流矢量幅值和电流门限值得到电流矢量差值，根据电流矢量差值和电流矢量幅值系数的乘积得到第二目标控制频率。8.根据权利要求6所述的一种新能源车动力控制方法，其特征在于，所述第五规则是：所述电机电流矢量幅值是第一轴目标电流和第二轴目标电流的平方和的平方根。9.根据权利要求1所述的一种新能源车动力控制方法，其特征在于，当第一目标控制频率和第二目标控制频率之和小于等于最大识别转速时的控制频率时，第三目标控制频率为第一目标控制频率和第二目标控制频率之和；当第一目标控制频率和第二目标控制频率之和大于最大识别转速时的控制频率时，第三目标控制频率为最大识别转速时的控制频率。
说明书desc
技术领域本发明涉及新能源车电机控制领域，具体而言，涉及一种新能源车动力控制方法及装置。背景技术永磁同步电动机具有结构紧凑、功率密度高等优点，还具有良好的调速性能，广泛应用于电动汽车驱动系统中。然而车辆在实际道路行驶过程中工况复杂多变，如果驱动系统控制软件以单一固定控制频率运行，在电机低速小扭矩运行时，系统控制能力过剩，徒增电机控制器开关损耗，减少了开关管器件寿命，因此需要一种动态的自适应的电机控制频率调整策略满足电动汽车多变的行驶工况。发明内容为解决电机低速小扭矩运行时，系统控制能力过剩，徒增电机控制器开关损耗，减少开关管器件寿命的问题，本发明提供了一种新能源车动力控制方法。第一方面，本发明提供了一种新能源车动力控制方法，包括：根据电机转速得到第一目标控制频率；根据电机电流矢量幅值得到第二目标控制频率；根据所述第一目标控制频率和所述第二目标控制频率得到第三目标控制频率；根据所述第三目标控制频率作为电机控制系统运行频率；设定转速识别区间，所述转速识别区间包括设定的最小识别转速和最大识别转速，当电机转速位于转速识别区间内时，根据电机转速变化趋势按照第一规则得到第一目标控制频率；当电机转速位于转速识别区间外时，根据所述电机转速按照第二规则得到第一目标控制频率。在一些实施例中，所述第一规则是：将所述转速识别区间按照第三规则划分n个子转速识别区间，设定每个子转速识别区间的控制频率系数，根据电机转速所在的第n个子转速识别区间得到转速控制频率系数。在一些实施例中，根据电机的极对数、所述电机转速、所述转速控制频率系数得到所述第一目标控制频率。在一些实施例中，所述第三规则是：当所述电机转速变化趋势处于上升状态时，将最小识别转速和最大识别转速之间划分为n个子转速识别区间；当所述电机转速变化趋势处于下降状态时，将最小识别转速和最大识别转速之间划分为n个子转速识别区间，下降状态的第n个转速识别区间，相比上升状态的第n个转速识别区间增加转速偏移量Δ。在一些实施例中，所述第二规则是：当电机转速小于所述最小识别转速时，第一目标控制频率系数为最小识别转速对应的控制频率系数；当电机转速大于所述最大识别转速时，第一目标控制频率系数/＞为最大识别转速对应的控制频率系数。在一些实施例中，根据电机电流矢量幅值、电流门限值和电流矢量幅值系数按照第四规则得到第二目标控制频率，根据第一轴目标电流和第二轴目标电流按照第五规则得到电机电流矢量幅值。在一些实施例中，所述第四规则是：设定电流门限值，当电机电流矢量幅值小于等于设定电流门限值时，第二目标控制频率取零；当电机电流矢量幅值大于设定电流门限值时，根据电机电流矢量幅值和电流门限值得到电流矢量差值，根据电流矢量差值和电流矢量幅值系数的乘积得到第二目标控制频率。在一些实施例中，所述第五规则是：所述电机电流矢量幅值是第一轴目标电流和第二轴目标电流的平方和的平方根。在一些实施例中，当第一目标控制频率和第二目标控制频率之和小于等于最大识别转速时的控制频率时，第三目标控制频率为第一目标控制频率和第二目标控制频率之和；当第一目标控制频率和第二目标控制频率之和大于最大识别转速时的控制频率时，第三目标控制频率为最大识别转速时的控制频率。第二方面，本发明提供一种电子设备，包括：存储器，用于存储指令；以及处理器，用于调用所述存储器存储的指令执行上述中任一项所述新能源车动力控制方法。在一些实施例中，一种计算机可读存储介质，存储有指令，所述指令被处理器执行时，上述任一项所述新能源车动力控制方法。为解决电机低速小扭矩运行时，系统控制能力过剩，徒增电机控制器开关损耗，减少开关管器件寿命的问题，本发明有以下优点：通过对永磁同步电机运行过程中控制频率的实时动态调整，本发明实现了永磁同步电机系统在低速小电流时以较低控制频率运行，在高速大电流时以较高控制频率运行，兼顾电流大小与频率的变化，在保证系统稳定的同时，减小了电机控制器开关管开关频率，增加了开关管寿命，减小了开关损耗，提高了永磁同步电机系统效率。附图说明图1示出了一种实施例的新能源车动力控制方法示意图；图2示出了一种实施例的新能源车动力控制方法数据传输示意图；图3 示出了一种实施例的新能源车动力控制方法电机各个转速分段内目标控制频率变化示意图；图4 示出了一种实施例的新能源车动力控制方法控制频率动态变化示意图；图5 示例了一种实施例的新能源车动力控制方法在整个工作区域内控制频率动态变化情况示意图；图6 示出了一种实施例的新能源车动力控制方法采用控制频率动态方法前后效率分布对比图；图7 示出了一种实施例的新能源车动力控制方法控制频率动态调整系统的结构框图。具体实施方式现在将参照若干示例性实施例来论述本公开的内容。应当理解，论述了这些实施例仅是为了使得本领域普通技术人员能够更好地理解且因此实现本公开的内容，而不是暗示对本公开的范围的任何限制。如本文中所使用的，术语“包括”及其变体要被解读为意味着“包括但不限于”的开放式术语。术语“基于”要被解读为“至少部分地基于”。术语“一个实施例”和“一种实施例”要被解读为“至少一个实施例”。术语“另一个实施例”要被解读为“至少一个其他实施例”。术语“上”、“下”、“左”、“右”、“前”、“后”、“顶”、“底”、“内”、“外”、“竖直”、“水平”、“横向”、“纵向”等指示的方位或位置关系为基于附图所示的方位或位置关系。这些术语主要是为了更好地描述本申请及其实施例，并非用于限定所指示的装置、元件或组成部分必须具有特定方位，或以特定方位进行构造和操作。并且，上述部分术语除了可以用于表示方位或位置关系以外，还可能用于表示其他含义，例如术语“上”在某些情况下也可能用于表示某种依附关系或连接关系。对于本领域普通技术人员而言，可以根据具体情况理解这些术语在本申请中的具体含义。此外，术语“安装”、“设置”、“设有”、“连接”、“相连”应做广义理解。例如，可以是固定连接，可拆卸连接，或整体式构造；可以是机械连接，或电连接；可以是直接相连，或者是通过中间媒介间接相连，又或者是两个装置、元件或组成部分之间内部的连通。对于本领域普通技术人员而言，可以根据具体情况理解上述术语在本申请中的具体含义。此外，术语“第一”、“第二”等主要是用于区分不同的装置、元件或组成部分，并非用于表明或暗示所指示装置、元件或组成部分的相对重要性和数量。除非另有说明，“多个”的含义为两个或两个以上。本实施例公开了一种新能源车动力控制方法，如图1和图2所示，可以包括：根据电机转速得到第一目标控制频率；根据电机电流矢量幅值得到第二目标控制频率；根据第一目标控制频率和所述第二目标控制频率得到第三目标控制频率；根据第三目标控制频率作为电机控制系统运行频率。在本实施例中，新能源车动力控制方法可以包括：步骤S101：依据永磁同步电机实时转速映射得到第一目标控制频率；步骤S102：依据永磁同步电机实时电流矢量幅值映射得到第二目标控制频率；步骤S103：将第一目标控制频率与第二目标控制频率叠加后，经过大小限制后输出目标控制频率，作为控制系统下一周期的控制频率。在一些实施例中，设定转速识别区间，转速识别区间包括设定的最小识别转速和最大识别转速，当电机转速位于转速识别区间内时，根据电机转速变化趋势按照第一规则得到第一目标控制频率；当电机转速位于转速识别区间外时，根据电机转速按照第二规则得到第一目标控制频率。进一步地，在本实施例中，在永磁同步电机允许的工作转速区间内设置最小识别转速与最大识别转速/＞，当转速/＞小于最小识别转速/＞时，第一目标控制频率为最小控制频率/＞；当转速/＞大于最大识别转速/＞时，第一目标控制频率为最大控制频率/＞；在一些实施例中，第一规则是：将转速识别区间按照第三规则划分n个子转速识别区间，设定每个子转速识别区间的控制频率系数，根据电机转速所在的第n个子转速识别区间得到转速控制频率系数。进一步地，在本实施例中，采用两种划分方式将最小识别转速与最大识别转速之间划分n个子转速识别区间。在一些实施例中，根据电机的极对数、电机转速、转速控制频率系数得到第一目标控制频率。进一步地，在本实施例中，两种分段方式下的第个分段内电机转速与控制频率的映射关系均为：；其中为第一目标控制频率；p为电机的极对数；Spd为电机转速；/＞为转速控制频率系数。在一些实施例中，第三规则是：当电机转速变化趋势处于上升状态时，将最小识别转速和最大识别转速之间划分为n个子转速识别区间；当电机转速变化趋势处于下降状态时，将最小识别转速和最大识别转速之间划分为n个子转速识别区间，下降状态的第n个转速识别区间，相比上升状态的第n个转速识别区间增加转速偏移量Δ。在本实施例中，分段方式一分段点的集合为，记为转速变化趋势处于上升状态时的分段方式；分段方式二的分段点集合为，记为转速变化趋势处于下降状态时的分段方式，/＞为转速偏移量，电机转速变化趋势处于上升状态时由分段方式一判断当前电机转速所处的分段，电机转速变化趋势处于下降状态时由分段方式二判断当前电机转速所处的分段。在一些实施例中，第二规则是：当电机转速小于最小识别转速时，第一目标控制频率系数为最小识别转速对应的控制频率系数；当电机转速大于最大识别转速时，第一目标控制频率系数/＞为最大识别转速对应的控制频率系数。在本实施例中，当为第一目标控制频率；p为电机的极对数；Spd为电机转速；/＞为转速控制频率系数，在各分段内保持不变，并且满足：当电机转速Spd小于时，/＞；当电机转速Spd大于时，/＞；在一些实施例中，根据电机电流矢量幅值、电流门限值和电流矢量幅值系数按照第四规则得到第二目标控制频率，根据第一轴目标电流和第二轴目标电流按照第五规则得到电机电流矢量幅值。在本实施例中，设置由电流矢量幅值判断进入变频状态的电流门限，当永磁同步电机电流矢量实时值/＞大于/＞时，/＞与控制频率的映射关系为：其中为第二目标控制频率；/＞为永磁同步电机电流矢量幅值的最大值；/＞为电流矢量幅值系数。在一些实施例中，第四规则是：设定电流门限值，当电机电流矢量幅值小于等于设定电流门限值时，第二目标控制频率取零；当电机电流矢量幅值大于设定电流门限值时，根据电机电流矢量幅值和电流门限值得到电流矢量差值，根据电流矢量差值和电流矢量幅值系数的乘积得到第二目标控制频率。在本实施例中，最终输出的目标控制频率，如果/＞，则将目标控制频率限值在/＞。在一些实施例中，第五规则是：电机电流矢量幅值是第一轴目标电流和第二轴目标电流的平方和的平方根。在本实施例中，在永磁同步电机矢量控制系统中，由目标扭矩经过扭矩电流关系转换得到第一轴目标电流ID以及第二轴目标电流IQ。具体的，上述永磁同步电机电流矢量实时值采用。在一些实施例中，当第一目标控制频率和第二目标控制频率之和小于等于最大识别转速时的控制频率时，第三目标控制频率为第一目标控制频率和第二目标控制频率之和；当第一目标控制频率和第二目标控制频率之和大于最大识别转速时的控制频率时，第三目标控制频率为最大识别转速时的控制频率。在本实施例中，如图7所示，参数获取模块101用于获取控制系统的输入变量，包括电机转速以及第一、第二轴目标电流。第一判断模块102用于依据电机转速判断是否进入变频控制状态一。第一计算模块103用于依据电机转速判断进入变频控制状态一后，根据电机转速的变化方向以及所处的分段区间映射得到第一目标控制频率。第二判断模块104用于依据永磁同步电机电流矢量幅值判断是否进入变频状态二。第二计算模块105用于依据电流矢量幅值判断进入变频控制状态二后，根据电流矢量幅值映射得到第二目标控制频率。第三计算模块106用于计算并限幅输出第三目标控制频率。在一些实施例中，本发明提供一种电子设备，包括：存储器，用于存储指令；以及处理器，用于调用存储器存储的指令执行上述任一项新能源车动力控制方法。在一些实施例中，一种计算机可读存储介质，存储有指令，指令被处理器执行时，上述任一项新能源车动力控制方法。本领域的普通技术人员可以理解，上述各实施方式是实现本公开的具体案例，而在实际应用中，可以在形式上和细节上对其作各种改变，而不偏离本公开的精神和范围。
