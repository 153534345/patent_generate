标题title
直播视频人物跟踪方法、装置、设备及存储介质
摘要abst
本申请涉及一种直播视频人物跟踪方法、装置、设备及存储介质，属于网络直播技术领域。本申请根据目标人物的人体关键部位的倾斜角度信息来确定目标人物的人体关键部位的移动情况，当目标人物的人体关键部位的倾斜角度信息在预设的活动角度范围内，直接根据根据第一视频帧的目标人物识别信息，确定下一视频帧中第一目标人物标识的显示位置，在下一视频帧中显示第一目标人物标识，无需对直播视频中的每一个视频帧进行人体检测，提高直播视频目标人物跟踪效率。
权利要求书clms
1.一种直播视频人物跟踪方法，其特征在于，所述方法包括：获取第一视频帧的目标人物识别信息及第一目标人物标识；其中，所述目标人物识别信息用于确定第一视频帧中目标人物所在位置；获取与所述第一视频帧紧邻的下一视频帧；获取所述第一视频帧中目标人物的人体关键部位的人体轮廓关键点的位置信息；其中，所述人体关键部位为活动自由度高于预设阈值的人体部位；根据所述人体关键部位的人体轮廓关键点的位置信息，获取目标人物的人体关键部位的倾斜角度信息；若所述目标人物的人体关键部位的倾斜角度信息在预设的活动角度范围内，根据所述第一视频帧的目标人物识别信息，确定下一视频帧中第一目标人物标识的显示位置，在所述下一视频帧显示所述第一目标人物标识。2.根据权利要求1所述的直播视频人物跟踪方法，其特征在于，还包括以下步骤：若所述目标人物的人体关键部位的倾斜角度信息超过预设的活动角度范围，获取所述下一视频帧中目标人物所在位置的位置信息及第二目标人物标识；根据所述下一视频帧中目标人物所在位置的位置信息，在下一视频帧中的目标人物所在位置显示所述第二目标人物标识。3.根据权利要求1所述的直播视频人物跟踪方法，其特征在于，还包括以下步骤：若所述目标人物的人体关键部位的倾斜角度信息超过预设的活动角度范围，获取第二目标人物标识；其中，所述第二目标人物标识与所述第一目标人物标识不同；根据所述第一视频帧的目标人物识别信息，确定下一视频帧中第二目标人物标识的显示位置，在所述下一视频帧显示所述第二目标人物标识。4.根据权利要求2-3任一项所述的直播视频人物跟踪方法，其特征在于，所述获取第二目标人物标识的步骤包括：根据所述目标人物的人体关键部位的倾斜角度信息，确定所述目标人物的移动方向信息；按照预设的尺寸调整规则及所述目标人物的移动方向信息，沿所述目标人物的移动方向拉伸所述第一目标人物标识，获取第二目标人物标识。5.根据权利要求1所述的直播视频人物跟踪方法，其特征在于，所述人体轮廓关键点至少为两个，所述获取目标人物的人体关键部位的倾斜角度信息的步骤包括：根据所述至少两个人体轮廓关键点的位置信息，构建用于表征人体关键部位的伸展方向的第一线条；获取所述第一线条与水平线形成的夹角。6.根据权利要求5所述的直播视频人物跟踪方法，其特征在于，所述获取所述第一线条与水平线形成的夹角的步骤包括：获取第一线条的第一端点的位置信息和第二端点的位置信息；θ0＝arctan/abs)其中，θ0为第一线条与水平线形成的夹角，为第一端点的位置信息，为第二端点的位置信息。7.根据权利要求4所述的直播视频人物跟踪方法，其特征在于，当所述人体轮廓关键点至少为三个时，所述获取目标人物的人体关键部位的倾斜角度信息的步骤包括：根据每两个相邻的人体轮廓关键点的位置信息，构建多条分线条；获取每一条分线条与水平线的夹角并相加，得到第一线条与水平线形成的夹角。8.一种直播视频人物跟踪装置，其特征在于，所述装置包括：识别信息获取模块，用于获取第一视频帧的目标人物识别信息及第一目标人物标识；其中，所述目标人物识别信息用于确定第一视频帧中目标人物所在位置；下一视频帧获取模块，用于获取与所述第一视频帧紧邻的下一视频帧；位置信息获取模块，用于获取所述第一视频帧中目标人物的人体关键部位的人体轮廓关键点的位置信息；其中，所述人体关键部位为活动自由度高于预设阈值的人体部位；角度信息获取模块，用于根据所述人体关键部位的人体轮廓关键点的位置信息，获取目标人物的人体关键部位的倾斜角度信息；标识模块，用于若所述目标人物的人体关键部位的倾斜角度信息在预设的活动角度范围内，根据所述第一视频帧的目标人物识别信息，确定下一视频帧中第一目标人物标识的显示位置，在所述下一视频帧显示所述第一目标人物标识。9.一种电子设备，其特征在于，包括：处理器和存储器；其中，所述存储器存储有计算机程序，所述计算机程序适于由所述处理器加载并执行如权利要求1至7中任意一项所述的直播视频人物跟踪方法。10.一种计算机可读存储介质，其上储存有计算机程序，其特征在于，该计算机程序被处理器执行时实现如权利要求1至7中任意一项所述的直播视频人物跟踪方法。
说明书desc
技术领域本申请涉及网络直播技术领域，特别是涉及一种直播视频人物跟踪方法、装置、设备及存储介质。背景技术随着互联网技术的发展，在直播间观看主播的直播视频逐渐成为人们的日常娱乐活动。直播平台作为主播和观众之间的媒介，主播通过摄像头等设备将直播视频数据上传至直播平台，然后由直播平台发送观众的客户端进行播放观看。主播在直播过程中，可以对直播画面显示的人物形象添加相应的特效，以提高观众的观看体验，但是，在添加特效过程，往往需要对每一视频帧均进行人体检测，再根据每一帧的人体检测结果对显示的人物形象进行相应的调整，人物跟踪效率较低。发明内容基于此，本申请的目的在于，提供一种直播视频人物跟踪方法、装置、设备及存储介质，提出一种直播视频人物跟踪方法，可以提高直播视频人物跟踪效率。根据本申请实施例的第一方面，提供一种直播视频人物跟踪方法，所述直播视频人物跟踪方法包括：获取第一视频帧的目标人物识别信息及第一目标人物标识；其中，所述目标人物识别信息用于确定第一视频帧中目标人物所在位置；获取与所述第一视频帧紧邻的下一视频帧；获取所述第一视频帧中目标人物的人体关键部位的人体轮廓关键点的位置信息；其中，所述人体关键部位为活动自由度高于预设阈值的人体部位；根据所述人体关键部位的人体轮廓关键点的位置信息，获取目标人物的人体关键部位的倾斜角度信息；若所述目标人物的人体关键部位的倾斜角度信息在预设的活动角度范围内，根据所述第一视频帧的目标人物识别信息，确定下一视频帧中第一目标人物标识的显示位置，在所述下一视频帧显示所述第一目标人物标识。根据本申请实施例的第二方面，提供一种直播视频人物跟踪装置，所述装置包括：识别信息获取模块，用于获取第一视频帧的目标人物识别信息及第一目标人物标识；其中，所述目标人物识别信息用于确定第一视频帧中目标人物所在位置；下一视频帧获取模块，用于获取与所述第一视频帧紧邻的下一视频帧；位置信息获取模块，用于获取所述第一视频帧中目标人物的人体关键部位的人体轮廓关键点的位置信息；其中，所述人体关键部位为活动自由度高于预设阈值的人体部位；角度信息获取模块，用于根据所述人体关键部位的人体轮廓关键点的位置信息，获取目标人物的人体关键部位的倾斜角度信息；标识模块，用于若所述目标人物的人体关键部位的倾斜角度信息在预设的活动角度范围内，根据所述第一视频帧的目标人物识别信息，确定下一视频帧中第一目标人物标识的显示位置，在所述下一视频帧显示所述第一目标人物标识。识别信息获取模块根据本申请实施例的第三方面，提供一种电子设备，包括：处理器和存储器；其中，所述存储器存储有计算机程序，所述计算机程序适于由所述处理器加载并执行任意一项所述的直播视频人物跟踪方法。根据本申请实施例的第四方面，提供一种计算机可读存储介质，其上储存有计算机程序，该计算机程序被处理器执行时实现任意一项所述的直播视频人物跟踪方法。本申请中，根据目标人物的人体关键部位的倾斜角度信息来确定目标人物的人体关键部位的移动情况，当目标人物的人体关键部位的倾斜角度信息在预设的活动角度范围内，直接根据第一视频帧的目标人物识别信息，确定下一视频帧中第一目标人物标识的显示位置，在下一视频帧中的对应位置显示第一目标人物标识，无需对直播视频中的每一个视频帧进行人体检测，提高直播视频目标人物跟踪效率。应当理解的是，以上的一般描述和后文的细节描述仅是示例性和解释性的，并不能限制本申请。为了更好地理解和实施，下面结合附图详细说明本申请。附图说明图1为本申请一个实施例提供的一种直播视频人物跟踪方法的应用环境的示意图；图2为本申请一个实施例提供的一种直播视频人物跟踪的示意图；图3为本申请一个实施例提供的一种直播视频人物跟踪方法的流程图；图4为本申请一个实施例提供的人体轮廓采样点的示例图；图5为本申请另一个实施例提供的一种直播视频人物跟踪方法的流程图；图6为本申请另一个实施例提供的一种直播视频人物跟踪方法的流程图；图7为本申请一个实施例提供的获取目标人物的人体关键部位的倾斜角度信息的示意图；图8为本申请一个实施例提供的一种直播视频人物跟踪的示意图；图9为本申请一个实施例提供的一种直播视频人物跟踪的示意图；图10为本申请一个实施例提供的一种直播视频人物跟踪装置的结构示意图；图11为本申请一个实施例提供的一种电子设备的结构示意图。具体实施方式为使本申请的目的、技术方案和优点更加清楚，下面将结合附图对本申请实施例方式作进一步地详细描述。应当明确，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其它实施例，都属于本申请保护的范围。下面的描述涉及附图时，除非另有表示，不同附图中的相同数字表示相同或相似的要素。以下示例性实施例中所描述的实施方式并不代表与本申请相一致的所有实施方式。相反，它们仅是如所附权利要求书中所详述的、本申请的一些方面相一致的装置和方法的例子。在本申请的描述中，需要理解的是，术语“第一”、“第二”、“第三”等仅用于区别类似的对象，而不必用于描述特定的顺序或先后次序，也不能理解为指示或暗示相对重要性。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本申请中的具体含义。在本申请和所附权利要求书中所使用的单数形式的“一种”、“所述”和“该”也旨在包括多数形式，除非上下文清楚地表示其他含义。在此所使用的词语“如果”/“若”可以被解释成为“在……时”或“当……时”或“响应于确定”。此外，在本申请的描述中，除非另有说明，“多个”是指两个或两个以上。“和/或”，描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。字符“/”一般表示前后关联对象是一种“或”的关系。本领域技术人员可以理解，本申请所使用的“客户端”、“终端”、“终端设备”既包括无线信号接收器的设备，其仅具备无发射能力的无线信号接收器的设备，又包括接收和发射硬件的设备，其具有能够在双向通信链路上，进行双向通信的接收和发射硬件的设备。这种设备可以包括：蜂窝或其他诸如个人计算机、平板电脑之类的通信设备，其具有单线路显示器或多线路显示器或没有多线路显示器的蜂窝或其他通信设备；PCS，其可以组合语音、数据处理、传真和/或数据通信能力；PDA，其可以包括射频接收器、寻呼机、互联网/内联网访问、网络浏览器、记事本、日历和/或GPS接收器；常规膝上型和/或掌上型计算机或其他设备，其具有和/或包括射频接收器的常规膝上型和/或掌上型计算机或其他设备。这里所使用的“客户端”、“终端”、“终端设备”可以是便携式、可运输、安装在交通工具中的，或者适合于和/或配置为在本地运行，和/或以分布形式，运行在地球和/或空间的任何其他位置运行。这里所使用的“客户端”、“终端”、“终端设备”还可以是通信终端、上网终端、音乐/视频播放终端，例如可以是PDA、MID和/或具有音乐/视频播放功能的移动电话，也可以是智能电视、机顶盒等设备。本申请所称的“服务器”、“客户端”、“服务节点”等名称所指向的硬件，本质上是具备个人计算机等效能力的计算机设备，为具有中央处理器、存储器、输入设备以及输出设备等冯诺依曼原理所揭示的必要构件的硬件装置，计算机程序存储于其存储器中，中央处理器将存储在外存中的程序调入内存中运行，执行程序中的指令，与输入输出设备交互，借此完成特定的功能。需要指出的是，本申请所称的“服务器”这一概念，同理也可扩展到适用于服务器机群的情况。依据本领域技术人员所理解的网络部署原理，所述各服务器应是逻辑上的划分，在物理空间上，这些服务器既可以是互相独立但可通过接口调用的，也可以是集成到一台物理计算机或一套计算机机群的。本领域技术人员应当理解这一变通，而不应以此约束本申请的网络部署方式的实施方式。请参阅图1，图1为本申请一个实施例提供的一种直播视频人物跟踪方法的应用场景示意图，该应用场景包括本申请实施例提供的主播端20、服务器端10和观众端30。主播端20与观众端30通过服务器端10进行交互。其中，主播端20是指发送网络直播视频的一端，通常来说是网络直播中主播所采用的观众端。观众端30是指接收和观看网络直播视频的一端，通常来说是网络直播中观看视频的观众所采用的观众端。主播端20和所述观众端30所指向的硬件，本质上是指计算机设备，具体地，如图1所示，其可以是智能手机、智能交互平板和个人计算机等类型的计算机设备。主播端20和所述观众端30均可以通过公知的网络接入方式接入互联网，与服务器端10建立数据通信链路。服务器端10作为一个业务服务器，其可以负责进一步连接起相关音频数据服务器、视频流服务器以及其他提供相关支持的服务器等，以此构成逻辑上相关联的服务机群，来为相关的终端设备，例如图1中所示的主播端20和观众端30提供服务。在直播间内，主播与观众之间可通过语音、视频、文字等公知的线上交互方式来实现互动，一般是主播用户以音视频流的形式为观众表演节目，并且在互动过程中还可产生经济交易行为。当然，本申请实施例的直播视频人物跟踪方法也可推广到其他相关场景中，例如：短视频以及其他任何需要对视频中的目标对象进行跟踪的场景。具体地，观众观看直播的过程如下：观众可以点击访问安装在观众端30上的直播应用程序，并选择进入任意一个直播间，触发观众端30为该观众加载直播间界面，该直播间界面内包括若干交互组件，通过加载这些交互组件可以使观众在直播间内观看直播，并进行多种线上互动。在直播过程中，主播可以对直播画面显示的人物添加相应的特效，以提高观众观看直播的体验，但是，若要对直播间界面的目标人物添加特效，由于直播间内目标人物随时可能移动，因此需要实时检测和追踪目标人物所在的位置，在追踪目标人物时，可以采用如图2所示的人物检测框401在直播画面中框选出目标人物，以标识目标人物在直播间中的所在的位置。当目标人物发生移动时，往往需要重新识别目标人物所在的位置，采用人物检测框401重新框住目标人物，以实现对该目标人物进行追踪，现有技术在对视频中移动的目标人物进行追踪时，往往通过对每一视频帧进行人体检测，再根据每一帧的人体检测结果对显示的目标人物进行标识，跟踪效率较低。因此，请参阅图3，本申请实施例提供一种直播视频人物跟踪方法，包括如下步骤：S101：获取获取第一视频帧的目标人物识别信息及第一目标人物标识；其中，所述目标人物识别信息用于确定第一视频帧中目标人物所在位置；通常情况下，主播端在开播后，利用主播端的自带摄像头或者与主播端建立数据连接的外接摄像头采集直播视频，该直播视频中包括若干帧直播画面。第一视频帧可以为直播视频包含有目标人物的某一帧直播画面。在一个实施例中，第一视频帧可以是当前时间点的直播画面；在另一个实施例中，第一视频帧也可以是指直播视频中首次出现目标人物的直播画面，具体地，可以采用人体检测技术检测直播视频的每一帧直播画面，根据检测出目标人物的视频帧的时间顺序，确定第一次出现目标人物的直播画面，将该直播画面作为第一视频帧。目标人物识别信息用于确定第一视频帧中目标人物所在位置；当第一视频帧为直播视频中的某一帧直播画面时，目标人物可以是指直播间的主播或嘉宾。具体地，可以采用现有的人体检测技术对第一视频帧的目标人物进行人体检测，得到第一视频帧的目标人物识别信息。其中，目标人物识别信息可以是第一视频帧的目标人物所在某个区域的区域信息，例如，当采用现有的人体包围框检测算法对第一视频帧的目标人物进行人体检测时，目标人物识别信息可以包括生成的人体包围框的尺寸以及位置等信息。第一目标人物标识可以为用户预先设置的用于确定直播间中目标人物所在位置的图形、图标等标识。或者，在一个实施例中，第一目标人物标识为可以根据第一视频帧的目标人物识别信息生成的可以覆盖直播间内的目标人物所在区域的图形或图标等标识。例如，如图2所示，在本申请实施例中，第一目标人物标识可以为用于框住目标人物所有部位的最小包围矩形框。在一个实施例中，当第一视频帧为包含目标人物的直播画面时，也可以根据第一视频帧的目标人物识别信息，生成的可以覆盖直播间内的目标人物所在区域的图形或图标等标识，在第一视频帧中显示对应的目标人物标识；例如，目标人物标识可以为用于框住目标人物所有部位的最小包围矩形框。其中，目标人物标识的尺寸及在第一视频帧中显示的位置可以根据第一视频帧的目标人物识别信息以及用户需求进行设置。通过对直播视频中含有目标人物的视频帧显示对应的目标人物标识，利用目标人物标识即可实现直播视频的目标人物的动态跟踪。S102：获取与所述第一视频帧紧邻的下一视频帧；S103：获取所述第一视频帧中目标人物的人体关键部位的人体轮廓关键点的位置信息；现有的人体检测技术在人体的手腕、手臂等经常活动的部位容易出现检测失误，例如在手臂水平伸展时容易出现检测不准确，导致生成的人体检测框在手腕、小手臂等部位截断，影响目标人物跟踪的准确性。因此，针对上述问题，本申请实施例通过获取目标人物的人体关键部位的位置信息，并进一步根据人体关键部位的人体轮廓关键点的位置信息来确定下一视频帧的目标人物标识显示方式，提高目标人物跟踪的准确性。其中，所述人体轮廓关键点为人体关键部位的人体轮廓采样点，其中，人体轮廓采样点可以根据直播图像所包含的人体的部位，通过人工标注的方式得到。在一个优选的实施例中，人体轮廓采样点可以为如图4所示的围绕人体，涉及人体各部位的64个采样点。人体关键部位为活动自由度高于预设阈值的人体部位，人体关键部位可以可以根据人体的日常活动情况进行确定。其中，人体关键部位越经常活动，其对应的活动自由度越高；例如，人体关键部位可以是手腕、手臂等经常活动的部位。具体地，人体关键部位可以为手腕或者小臂。如图4所示，当人体关键部位为小臂，人体轮廓关键点可以包括左手小臂部分的人体轮廓采样点以及右手小臂部分的人体轮廓采样点。在一个实施例中，人体轮廓关键点的位置信息可以利用现有的轮廓点检测算法，识别第一视频帧中目标人物的人体关键部位的人体轮廓关键点得到。优选地，在本申请实施例中，先基于第一视频帧的目标人物识别信息，确定目标人物所在区域，利用人体轮廓点检测模型检测目标人物所在区域，获取所有的人体轮廓采样点的位置信息，再进一步获取人体轮廓关键点的位置信息。通过先确定目标人物所在区域，再获取人体轮廓采样点以及人体轮廓关键点，可以有效提高人体轮廓关键点的定位精度，提高目标人物跟踪准确性。S104：根据所述人体关键部位的人体轮廓关键点的位置信息，获取目标人物的人体关键部位的倾斜角度信息；人体关键部位的倾斜角度可以是指根据人体轮廓关键点构建的线段与水平线形成的夹角，其中，人体轮廓关键点至少为两个，根据人体轮廓关键点构建的线段可用于确定人体关键部位的运动方向。其中，获取目标人物的人体关键部位的倾斜角度信息可以根据人体轮廓关键点的位置信息，构建用于表征人体关键部位的运动方向的线条，基于三角函数原理，求取该线条与水平线形成的夹角，得到目标人物的人体关键部位的倾斜角度信息。具体地，获取目标人物的人体关键部位的倾斜角度信息的步骤包括：根据所述至少两个人体轮廓关键点的位置信息，构建用于表征人体关键部位的伸展方向的第一线条；获取所述第一线条与水平线形成的夹角。在一个实施例中，在构建用于表征人体关键部位的伸展方向的第一线条时，可以直接对人体轮廓关键点进行连线的方式得到第一线条。若是直接对人体轮廓关键点进行连线的方式得到第一线条，则第一线条的第一端点和第二端点即为连线的两个人体轮廓关键点的位置信息，具体地，获取所述第一线条与水平线形成的夹角的步骤包括：获取第一线条的第一端点的位置信息和第二端点的位置信息；θ0＝arctan/abs)其中，θ0为第一线条与水平线形成的夹角，为第一端点的位置信息，为第二端点的位置信息。在一个实施例中，当人体轮廓关键点为关键部位上的多个人体轮廓采样点时，可以根据多个人体轮廓关键点构建多条线条，分别计算每条线条与水平线的夹角，通过对每条线条与水平线的夹角进行相加或者求平均的方式，得到第一线条与水平线形成的夹角。具体地，在本申请实施例中，当所述人体轮廓关键点至少为三个时，所述获取目标人物的人体关键部位的倾斜角度信息的步骤包括：根据每两个相邻的人体轮廓关键点的位置信息，构建多条分线条；获取每一条分线条与水平线的夹角并相加，得到第一线条与水平线形成的夹角。分线条可以为每两个相邻的人体轮廓关键点之间的连线，其中，每一条分线条与水平线的夹角可以根据上述公式得到，在此不再赘述。由于本案中的人体轮廓关键点为人体关键部位的轮廓的采样点，其人体轮廓采样点通常包括关键部位两侧的人体轮廓采样点，关键部位两侧的轮廓采样点可能随肌肉的走向存在一定的偏差，若是单纯以一侧的人体轮廓采样点构建第一线条，则可能影响人体关键部位的伸展方向的判断；若对关键部位两侧的人体轮廓采样点均构建线条并计算线条与水平线形成的夹角，则计算的数据量较大。因此，在一个优选的实施例中，所述人体轮廓关键点至少为四个，且其中每两个人体轮廓关键点相对设置，第一线条的第一端点和第二端点为其中一组相对设置的两个人体轮廓关键点的中点，第一线条的第二端点为另一组相对设置的两个人体轮廓关键点的中点。所述构建用于表征人体关键部位的伸展方向的第一线条的步骤具体包括：获取相对设置的人体轮廓关键点的中点的位置信息，根据相对设置的人体轮廓关键点的中点的位置信息，构建用于表征人体关键部位的伸展方向的第一线条。通过连接相对设置的位于关键部位两侧的人体轮廓关键点的中点，得到表征人体关键部位的伸展方向的第一线条，避免由于关键部位两侧人体轮廓采样点的走向不一致影响人体关键部位的伸展方向的判断，可以有效提高直播视频人物跟踪的准确性。S105：若所述目标人物的人体关键部位的倾斜角度信息在预设的活动角度范围内，根据所述第一视频帧的目标人物识别信息，确定下一视频帧中第一目标人物标识的显示位置，在所述下一视频帧显示所述第一目标人物标识。活动角度范围可以根据用户的实际需求进行设置；例如，可以设置活动角度范围为小于某个预设夹角阈值，例如60°。当第一线条与水平线形成的夹角小于或等于预设夹角阈值，则确定目标人物的人体关键部位的倾斜角度信息在预设的活动角度范围内，根据第一视频帧的目标人物识别信息，确定下一视频帧中第一目标人物标识的显示位置并显示第一目标人物标识；若第一线条与水平线形成的夹角大于预设夹角阈值，则确定目标人物的移动轨迹信息超过预设的活动角度范围。根据第一视频帧的目标人物识别信息，确定下一视频帧中第一目标人物标识的显示位置可以是根据目标人物识别信息，确定下一视频帧第一目标人物标识所要包围的位置，从而确定第一目标人物标识在下一视频帧的显示位置，例如，可以根据第一视频帧的人体检测结果，确定人体检测框所要包围的位置，在下一视频帧中显示可以框住目标人物所有部位的人体检测框。本申请实施例中的目标人物的人体关键部位为活动自由度高的人体部位，由目标人物的人体关键部位的活动情况来确定目标人物的活动情况，根据目标人物的活动情况确定是否可以根据第一视频帧的目标人物识别信息来确定下一视频帧的第一目标人物标识的显示位置，无需对下一视频帧进行人体检测，降低人体轮廓检测频率。在一个可选的实施例中，直播视频人物跟踪方法的执行主体可以为主播端，在另一个可选的实施例中，直播视频人物跟踪方法的执行主体也可以为服务器。本申请中根据目标人物的人体关键部位的倾斜角度信息来确定目标人物的人体关键部位的移动情况，当目标人物的人体关键部位的倾斜角度信息在预设的活动角度范围内，直接根据第一视频帧的目标人物识别信息，在下一视频帧中的对应位置显示第一目标人物标识，无需对直播视频中的每一个视频帧进行人体检测，提高直播视频目标人物跟踪效率。例如，当关键部位为左手臂，根据左手臂上的人体轮廓关键点的位置信息，确定左手臂的伸展角度，根据左手臂的伸展角度确定是否目标人物的左手臂的伸展状况是否超出原来第一目标人物标识可以覆盖的范围，若目标人物的左手臂的伸展状况仍在第一目标人物标识可以覆盖的范围内，则直接根据第一视频帧的目标人物识别信息，确定下一视频帧中第一目标人物标识的显示位置，在下一视频帧中的对应位置显示第一目标人物标识。当目标人物的人体关键部位的倾斜角度信息超过预设的活动角度范围，则需要调整下一视频帧中的目标人物标识，使下一视频帧中显示的目标人物标识可以覆盖移动后的目标人物所在的位置。本申请的直播视频人物跟踪方法可以随人体分割功能集成到人体特效产品客户端的电子设备)中，或者随动作识别功能集成到动作识别的应用产品中，以提升直播的观看趣味性和用户体验。如图5所示，在一个可选的实施例中，直播视频人物跟踪方法还包括以下步骤：S201：若所述目标人物的人体关键部位的倾斜角度信息超过预设的活动角度范围，获取所述下一视频帧中目标人物所在位置的位置信息及第二目标人物标识；下一视频帧中目标人物所在位置的位置信息可以利用现有的人体检测技术得到。第二目标人物标识可以为用户预先设置的用于确定直播间中目标人物所在位置的图形、图标等标识。需要说明的是，在本申请实施例中，第二目标人物标识与第一目标人物标识不同。其中，第二目标人物标识与第一目标人物标识可以为不同的图形或图标，或者，第二目标人物标识可以与第一目标人物标识可以为相同的图形或图标，但是，第二目标人物标识可以与第一目标人物标识的尺寸不同；S202：根据所述下一视频帧中目标人物所在位置的位置信息，在下一视频帧中的目标人物所在位置显示所述第二目标人物标识。在该实施例中，利用人体检测技术获取下一视频帧中目标人物所在位置，在下一视频帧的对应位置显示预设的第二目标人物标识，实现直播视频中目标人物的跟踪。现有的人体检测技术，在检测到人体手腕、小臂等关键部位容易出现检测异常，若是直接根据人体检测结果在直播视频中利用人体检测框标识目标人物，则往往会在人体手腕、小臂等关键部位出现截断，影响对直播视频的后续处理。因此，针对上述问题，如图6所示，在一个优选的实施例中，直播视频人物跟踪方法还包括以下步骤：S301：若所述目标人物的人体关键部位的倾斜角度信息超过预设的活动角度范围，获取第二目标人物标识；S302：根据所述第一视频帧的目标人物识别信息，确定下一视频帧中第二目标人物标识的显示位置，在所述下一视频帧显示所述第二目标人物标识。在该实施例中，第二目标人物标识的显示位置根据第一视频帧的目标人物识别信息确定，当第一视频帧中显示有第一目标人物标识，且第一目标人物标识的显示位置同样是根据第一视频帧的目标人物识别信息确定时，第二目标人物标识的显示位置可以与第一目标人物标识的显示位置相同。当目标人物的人体关键部位的倾斜角度信息超过预设的活动角度范围，根据第一视频帧的目标人物识别信息，确定下一视频帧中第二目标人物标识的显示位置，在下一视频帧中的对应位置显示不同的第二目标人物标识。其中，第二目标人物标识可以覆盖直播间内的目标人物所在区域，例如，第二目标人物标识可以为用于框住目标人物所有部位的最小包围矩形框。当目标人物的发生进行大幅度的移动，可以通过获取尺寸更大或者更小的第二目标人物标识，以实现直播视频内目标人物的跟踪。可选的，所述获取第二目标人物标识的步骤包括：根据所述目标人物的人体关键部位的倾斜角度信息，确定所述目标人物的移动方向信息；按照预设的尺寸调整规则及所述目标人物的移动方向信息，沿所述目标人物的移动方向拉伸所述第一目标人物标识，获取第二目标人物标识。在该实施例中，第二目标人物标识与第一目标人物标识可以为相同的图形或图标，但是，第二目标人物标识可以与第一目标人物标识的尺寸不同。进一步地，第二目标人物标识与第一目标人物标识为人体检测框，该人体检测框为用于框住目标人物所有部位的最小包围矩形框。预设的尺寸调整规则可用于确定第一目标人物标识的拉伸尺度，例如，当第一目标人物标识为人体检测框，预设的尺寸调整规则可用于确定人体检测框的外扩长度。例如，当人体关键部位为手臂，可以设置外扩长度为人体检测框外扩的宽度的目标倍数，目标倍数可以根据实际应用需求进行设置，例如目标倍数可以为0.1倍。当目标人物的人体关键部位的倾斜角度信息超过预设的活动角度范围，根据超过预设的活动角度范围的具体人体关键部位，确定目标人物的移动方向信息；例如，当左手臂的倾斜角度信息超过预设的活动角度范围，则确定目标人物进行了左手臂水平伸展动作。可以理解的是，当此时目标人物进行了左手臂水平伸展等动作之后，原来的第一目标人物标识已经无法覆盖水平伸展后的左手臂，因此，需要沿左手臂移动方向拉伸第一目标人物标识，使其可以覆盖水平伸展的左手臂。以下以手臂作为人体关键部位，对本申请实施例中直播视频人物跟踪方法进行具体说明：如图7所示，左手臂部分的人体轮廓关键点包括上侧的人体轮廓采样点以及下侧的人体轮廓采样点。获取每两个相对设置的人体轮廓关键点的中点，根据中点构建表征左手臂的伸展方向的线条，例如的中点以及的中点，构建分线条L0，同样地，根据的中点以及的中点构建分线条L1，根据的中点以及的中点构建分线条L2。基于三角函数，分别计算分线条L0-L2与水平线形成的夹角。以分线条L0为例，分线条L0两端的端点可以根据两个相对设置的人体轮廓关键点计算得到，在此，假设分线条L0两端的端点的坐标分别为和，其中，可以根据人体轮廓关键点的位置信息计算得到，可以根据人体轮廓关键点的位置信息计算得到。按照以下方式，计算分线条L0与水平线形成的夹角：θ0＝arctan/abs)其中，θ0为分线条L0与水平线形成的夹角，为分线条L0的第一端点的位置信息，为分线条L0的第二端点的位置信息。基于同样的方式可以得到分线条L1与水平线形成的夹角θ1以及分线条L1与水平线形成的夹角θ2，按照下述方式，计算得到第一线条与水平线形成的夹角：θ＝θ0+θ1+θ2其中，θ为第一线条与水平线形成的夹角。在本申请实施例中，假设活动角度范围为小于60°，当θ≤60°，确定目标人物的手臂没有进行水平伸展，此时，直接根据第一视频帧的目标人物识别信息，在下一视频帧显示人体检测框；当θ＞60°，确定目标人物的左手臂发生了水平伸展，此时，需要对人体检测框进行拉伸，使其能覆盖水平伸展后的左手臂。基于同样的原理，可以对图7中右手臂上侧的人体轮廓关键点以及右手臂下侧的人体轮廓关键点，获取每两个相对设置的人体轮廓关键点的中点，根据中点构建表征右手臂的伸展方向的分线条R0、R1和R2，并求取分线条R0、R1和R2与水平线形成的夹角，得到表征右手臂的伸展方向的第一线条与水平线的夹角，根据第一线条与水平线的夹角与活动角度范围进行比较，从而确定目标人物的右手臂是否发生了水平伸展。其中，分线条R0、R1和R2与水平线的夹角以及表征右手臂的伸展方向的第一线条与水平线的夹角的计算方式与上述实施例中的左手臂的计算方式相同，在此不再赘述。根据目标人物左右手臂的水平伸展情况，调整视频帧中的人体检测框的显示方式。具体地，如图8所示，其为本申请一个实施例中直播视频人物跟踪的示意图；其中，图为第一视频帧的显示画面，第一视频帧包括人体检测框401，图为与第一视频帧紧邻的下一视频帧的显示画面。在一个实施例中，若经过上述步骤后确定目标人物的左手臂发生了水平伸展，此时，在下一视频帧显示人体检测框402。其中，人体检测框402根据人体检测框401沿左侧外扩后得到的可以覆盖目标水平伸展后的左手臂的人体检测框。如图9所示，其为本申请另一个实施例中直播视频人物跟踪方法的显示示意图；其中，图为第一视频帧的显示画面，第一视频帧包括人体检测框401，图为与第一视频帧紧邻的下一视频帧的显示画面。在一个实施例中，若经过上述步骤后确定目标人物的左右手臂均发生了水平伸展，此时，在下一视频帧显示人体检测框403。其中，人体检测框403根据人体检测框401沿左右两侧外扩后得到的可以覆盖目标水平伸展后的手臂的人体检测框。需要说明的是，需要说明的是，上述实施例只是示例性的说明，不应对本公开的功能和范围造成限制。本领域技术人员可以结合本申请的上述内容检测人体的其它关键部位的活动情况，调整下一视频帧的目标人物标识的显示方式，以实现直播视频对象的跟踪。本申请实施例中，根据手臂等关键部位的伸展情况来确定是否需要调整目标人物标识的的尺寸，当目标人物出现大幅度的移动时，根据前后视频帧的目标人物移动信息，调整目标人物标识的尺寸，以实现直播视频目标人物的及时跟踪，提高人体轮廓检测的准确性；并且，当目标人物未出现大幅度的移动时，则直接根据上一视频帧的目标人物识别信息，在下一视频帧中标识目标人物，无需对每一个视频帧进行人体检测，提高直播视频目标人物的跟踪效率。如图10所示，本申请实施例还提供一种直播视频人物跟踪装置，该装置可以通过软件、硬件或两者的结合实现成为计算机设备的全部或一部分。该装置包括：识别信息获取模块501，用于获取第一视频帧的目标人物识别信息及第一目标人物标识；其中，所述目标人物识别信息用于确定第一视频帧中目标人物所在位置；下一视频帧获取模块502，用于获取与所述第一视频帧紧邻的下一视频帧；位置信息获取模块503，用于获取所述第一视频帧中目标人物的人体关键部位的人体轮廓关键点的位置信息；其中，所述人体关键部位为活动自由度高于预设阈值的人体部位；角度信息获取模块504，用于根据所述人体关键部位的人体轮廓关键点的位置信息，获取目标人物的人体关键部位的倾斜角度信息；标识模块505，用于若所述目标人物的人体关键部位的倾斜角度信息在预设的活动角度范围内，根据所述第一视频帧的目标人物识别信息，确定下一视频帧中第一目标人物标识的显示位置，在所述下一视频帧显示所述第一目标人物标识。需要说明的是，上述实施例提供的直播视频人物跟踪装置在执行直播视频人物跟踪方法时，仅以上述各功能模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能模块完成，即将设备的内部结构划分为不同的功能模块，以完成以上描述的全部或者部分功能。另外，上述实施例提供的直播视频人物跟踪装置与直播视频人物跟踪方法属于同一构思，其体现实现过程详见方法实施例，这里不再赘述。本实施例提供一种电子设备，可以用于执行本申请实施例的直播视频人物跟踪方法的全部或部分步骤。对于本实施例中未披露的细节，请参照本申请的方法实施例。请参阅图11，图11为本申请实施例提供的电子设备的结构示意图。所述电子设备600可以但不限于是各种服务器、个人计算机、笔记本电脑、智能手机、平板电脑等设备的一个或多个的组合。在本申请较佳实施例中，所述电子设备600包括存储器601、至少一个处理器602、至少一条通信总线603及收发器604。本领域技术人员应该了解，图11示出的电子设备的结构并不构成本申请实施例的限定，既可以是总线型结构，也可以是星形结构，所述电子设备600还可以包括比图示更多或更少的其他硬件或者软件，或者不同的部件布置。在一些实施例中，所述电子设备600是一种能够按照事先设定或存储的指令，自动进行数值计算和/或信息处理的设备，其硬件包括但不限于微处理器、专用集成电路、可编程门阵列、数字处理器及嵌入式设备等。所述电子设备600还可包括客户设备，所述客户设备包括但不限于任何一种可与客户通过键盘、鼠标、遥控器、触摸板或声控设备等方式进行人机交互的电子产品，例如，个人计算机、平板电脑、智能手机、数码相机等。需要说明的是，所述电子设备600仅为举例，其他现有的或今后可能出现的电子产品如可适应于本申请，也应包含在本申请的保护范围以内，并以引用方式包含于此。在一些实施例中，所述存储器601中存储有计算机程序，所述计算机程序被所述至少一个处理器602执行时实现如所述实施例一的直播视频人物跟踪方法中的全部或者部分步骤。所述存储器601包括只读存储器、可编程只读存储器、可擦除可编程只读存储器、一次可编程只读存储器、电子擦除式可复写只读存储器、只读光盘或其他光盘存储器、磁盘存储器、磁带存储器、或者能够用于携带或存储数据的计算机可读的任何其他介质。在一些实施例中，所述至少一个处理器602是所述电子设备600的控制核心，利用各种接口和线路连接整个电子设备600的各个部件，通过运行或执行存储在所述存储器601内的程序或者模块，以及调用存储在所述存储器601内的数据，以执行电子设备600的各种功能和处理数据。例如，所述至少一个处理器602执行所述存储器中存储的计算机程序时实现本申请实施例中所述的直播视频人物跟踪方法的全部或者部分步骤；或者实现直播视频人物跟踪装置的全部或者部分功能。所述至少一个处理器602可以由集成电路组成，例如可以由单个封装的集成电路所组成，也可以是由多个相同功能或不同功能封装的集成电路所组成，包括一个或者多个中央处理器、微处理器、数字处理芯片、图形处理器及各种控制芯片的组合等。在一些实施例中，所述至少一条通信总线603被设置为实现所述存储器601以及所述至少一个处理器602等之间的连接通信。所述电子设备600还可以包括多种传感器、蓝牙模块、Wi-Fi模块等，在此不再赘述。本实施例提供一种计算机可读存储介质，其上储存有计算机程序，所述指令适于由处理器加载并执行本申请实施例一的直播视频人物跟踪方法，具体执行过程可以参见实施例一的具体说明，在此不进行赘述。对于设备实施例而言，由于其基本对应于方法实施例，所以相关之处参见方法实施例的部分说明即可。以上所描述的设备实施例仅仅是示意性的，其中所述作为分离部件说明的组件可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本申请方案的目的。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。本领域内的技术人员应明白，本申请的实施例可提供为方法、系统、或计算机程序产品。因此，本申请可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本申请可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本申请是参照根据本申请实施例的方法、设备、和计算机程序产品的流程图和/或方框图来描述的。应理解可由计算机程序指令实现流程图和/或方框图中的每一流程和/或方框、以及流程图和/或方框图中的流程和/或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的装置。以上仅为本申请的实施例而已，并不用于限制本申请。对于本领域技术人员来说，本申请可以有各种更改和变化。凡在本申请的精神和原理之内所作的任何修改、等同替换、改进等，均应包含在本申请的权利要求范围之内。
