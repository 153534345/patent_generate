标题title
一种谐振变换器的软启动控制电路、芯片及控制方法
摘要abst
本申请涉及开关电源技术领域，特别涉及一种谐振变换器的软启动控制电路、芯片及控制方法。所述软启动控制电路，包括：第一电路，采集谐振变换器的谐振电容电压，得到谐振电容电压采样信号并输出；采样所述谐振变换器的输出电压，设定所述谐振电容电压采样信号的比较阈值，输出高侧阈值信号和低侧阈值信号；第二电路，接受软启动工作阶段控制模块的控制，根据所述谐振电容电压采样信号、高侧阈值信号和低侧阈值信号，输出高侧驱动信号和低侧驱动信号；软启动工作阶段控制模块，用于控制所述第一电路和第二电路的工作，对软启动的各个阶段进行状态检测和模式控制。本申请的谐振变换器的软启动控制电路在谐振变换器软启动全阶段无信号突变。
权利要求书clms
1.一种谐振变换器的软启动控制电路，其特征在于，包括：第一电路，采集谐振变换器的谐振电容电压，得到谐振电容电压采样信号并输出；采样所述谐振变换器的输出电压，设定所述谐振电容电压采样信号的比较阈值，输出高侧阈值信号和低侧阈值信号；第二电路，接受软启动工作阶段控制模块的控制，根据所述谐振电容电压采样信号、高侧阈值信号和低侧阈值信号，输出高侧驱动信号和低侧驱动信号；软启动工作阶段控制模块，用于控制所述第一电路和第二电路的工作，对软启动的各个阶段进行状态检测和模式控制。2.根据权利要求1所述的谐振变换器的软启动控制电路，其特征在于，所述第一电路，根据所述谐振电容电压采样信号，生成谐振电容电压比较信号；检测所述谐振电容电压比较信号，输出标志信号和计数值。3.根据权利要求2所述的谐振变换器的软启动控制电路，其特征在于，所述第二电路，接受软启动工作阶段控制模块的控制，设定软启动时的高侧导通时间起始值、高低侧导通时间最大值和高低侧导通时间最小值，根据所述谐振电容电压采样信号、高侧阈值信号和低侧阈值信号，生成高侧功率管关断信号和低侧功率管关断信号；根据所述高侧功率管关断信号、所述低侧功率管关断信号、所述高侧导通时间起始值、所述高低侧导通时间最大值和所述高低侧导通时间最小值，输出高侧驱动信号和低侧驱动信号。4.根据权利要求3所述的谐振变换器的软启动控制电路，其特征在于，所述软启动工作阶段控制模块，在第一时间段控制所述第一电路将所述谐振电容电压采样信号调整至设定的中心值调节电压初值；以在第二时间段控制所述第一电路设定并输出高侧阈值信号和低侧阈值信号，控制所述第二电路设定高侧导通时间起始值、高低侧导通时间最大值和高低侧导通时间最小值；以在第三时间段控制所述第二电路增大高侧导通时间到接收到高侧功率管关断信号为止；以在第四时间段控制所述第一电路增大高侧阈值信号，并以同等幅度减小低侧阈值信号。5.根据权利要求4所述的谐振变换器的软启动控制电路，其特征在于，所述高侧驱动信号，用于驱动所述谐振变换器的高侧功率管；所述低侧驱动信号，用于驱动所述谐振变换器的低侧功率管。6.根据权利要求4所述的谐振变换器的软启动控制电路，其特征在于，所述第一电路，包括：电容电压采样模块，采集所述谐振电容电压，生成所述谐振电容电压采样信号并输出；输出采样及补偿电路，对所述谐振变换器的输出电压进行采样及补偿，生成输出补偿信号；电容电压均值检测及控制模块，根据所述谐振电容电压采样信号，生成谐振电容电压比较信号；电容电压阈值及初值控制运算模块，设定谐振电容电压采样信号的比较阈值，输出高侧阈值信号和低侧阈值信号；高低电平检测模块，检测所述谐振电容电压比较信号的高低电平时长，输出反应高低电平时长相等的标志信号；边沿检测及计数模块，检测所述谐振电容电压比较信号的下降沿，并输出计数值。7.根据权利要求6所述的谐振变换器的软启动控制电路，其特征在于，所述第一电路，还包括：隔离电路，将原、副边隔离，将所述输出补偿信号传输到原边形成输出反馈信号。8.根据权利要求6所述的谐振变换器的软启动控制电路，其特征在于，所述电容电压均值检测及控制模块，输出电流调节信号，调节所述谐振电容电压采样信号的中心值。9.根据权利要求7所述的谐振变换器的软启动控制电路，其特征在于，所述电容电压阈值及初值控制运算模块，设定中心值调节电压初值，并根据所述反馈信号计算电压阈值差值。10.根据权利要求4所述的谐振变换器的软启动控制电路，其特征在于，所述第二电路，包括：阈值比较电路，比较所述谐振电容电压采样信号、高侧阈值信号和低侧阈值信号，生成高侧功率管关断信号和低侧功率管关断信号；导通时间控制及运算模块，接受所述软启动工作阶段控制模块的控制，设定软启动高侧导通时间起始值，以及高低侧导通时间最大值和高低侧导通时间最小值；PWM开关控制模块，接收所述高侧功率管关断信号、低侧功率管关断信号、高侧导通时间起始值、高低侧导通时间最大值和高低侧导通时间最小值，生成高侧驱动控制信号和低侧驱动控制信号；驱动电路，根据所述高侧驱动控制信号和低侧驱动控制信号，生成并输出高侧驱动信号和低侧驱动信号。11.根据权利要求4所述的谐振变换器的软启动控制电路，其特征在于，所述第一时间段为从软启动开始到第一设定时间结束的时间段；所述第二时间段为所述第一时间段后，所述计数值达到设定值，或到第二设定时间结束的时间段；所述第三时间段为所述第二时间段后，所述标志信号有效前的时间段；第四时间段为所述第三时间段后，高侧阈值信号和低侧阈值信号差值大于由反馈信号计算得到的电压阈值差值前的时间段。12.一种谐振变换器的软启动控制芯片，其特征在于，包括权利要求1-11中任一项所述的谐振变换器的软启动控制电路。13.一种谐振变换器的软启动控制方法，所述方法应用于权利要求1-11中任一项所述的谐振变换器的软启动控制电路，包括：控制第一电路将谐振电容电压采样信号调整至设定的中心值调节电压初值；控制第一电路设定并输出高侧阈值信号和低侧阈值信号，控制所述第二电路设定高侧导通时间起始值、高低侧导通时间最大值和高低侧导通时间最小值；控制第二电路增大高侧导通时间到接收到高侧功率管关断信号为止；控制所述第一电路增大高侧阈值信号，并以同等幅度减小低侧阈值信号。14.根据权利要求13所述的谐振变换器的软启动控制方法，其特征在于，还包括：采集谐振变换器的谐振电容电压，得到谐振电容电压采样信号并输出的步骤。15.根据权利要求13所述的谐振变换器的软启动控制方法，其特征在于，还包括：对谐振变换器的输出电压进行采样及补偿，生成输出补偿信号的步骤。
说明书desc
技术领域本申请涉及开关电源技术领域，特别是涉及电源方向的一种谐振变换器的软启动控制电路、芯片及控制方法。背景技术谐振变换器相对硬开关PWM调制变换器，具有开关频率高、开关损耗小、效率高、重量轻、体积小、电磁干扰噪声小、开关应力小等优点。其因为可以实现全负载范围内原边功率管的零电压导通和副边功率管的零电流关断，以及具有高效率、高频率等优良特性，被广泛应用于各种应用场合。然而，谐振变换器本身的谐振特性使得谐振变换器在启动时存在较大的电压电流应力，给系统应用带来很大的影响。软启动技术是有效减小谐振变换器电压电流应力最常用的方法。目前现有技术中的软启动方法主要有降频软启动法、变占空比软启动法和最优轨迹软启动法，然而降频软启动法和变占空比软启动法都会出现电压电流突变的情况影响电路稳定性且死区时间长，而最优轨迹软启动法控制复杂，计算量大，对模数转换器和数字微处理器的性能要求较高。并且需要对谐振电流和谐振电压做到高频高精度采样，易受外部噪声干扰。因此，亟需一种能够避免启动过程中电压电流突变，不会影响电路稳定性的一种谐振变换器的软启动控制电路、芯片及方法。发明内容为了解决现有技术存在的不足，本申请的目的在于提供一种谐振变换器的软启动控制电路、芯片及方法，能够避免启动过程中电压电流突变，不会影响电路稳定性。为实现上述目的，本申请提供一种谐振变换器的软启动控制电路，包括：第一电路，采集谐振变换器的谐振电容电压，得到谐振电容电压采样信号并输出；采样所述谐振变换器的输出电压，设定所述谐振电容电压采样信号的比较阈值，输出高侧阈值信号和低侧阈值信号；第二电路，接受软启动工作阶段控制模块的控制，根据所述谐振电容电压采样信号、高侧阈值信号和低侧阈值信号，输出高侧驱动信号和低侧驱动信号；软启动工作阶段控制模块，用于控制所述第一电路和第二电路的工作，对软启动的各个阶段进行状态检测和模式控制。进一步地，所述第一电路，根据所述谐振电容电压采样信号，生成谐振电容电压比较信号；检测所述谐振电容电压比较信号，输出标志信号和计数值。进一步地，所述第二电路，接受软启动工作阶段控制模块的控制，设定软启动时的高侧导通时间起始值、高低侧导通时间最大值和高低侧导通时间最小值，根据所述谐振电容电压采样信号、高侧阈值信号和低侧阈值信号，生成高侧功率管关断信号和低侧功率管关断信号；根据所述高侧功率管关断信号、所述低侧功率管关断信号、所述高侧导通时间起始值、所述高低侧导通时间最大值和所述高低侧导通时间最小值，输出高侧驱动信号和低侧驱动信号。进一步地，所述软启动工作阶段控制模块，在第一时间段控制所述第一电路将所述谐振电容电压采样信号调整至设定的中心值调节电压初值；以在第二时间段控制所述第一电路设定并输出高侧阈值信号和低侧阈值信号，控制所述第二电路设定高侧导通时间起始值、高低侧导通时间最大值和高低侧导通时间最小值；以在第三时间段控制所述第二电路增大高侧导通时间到接收到高侧功率管关断信号为止；以在第四时间段控制所述第一电路增大高侧阈值信号，并以同等幅度减小低侧阈值信号。进一步地，所述高侧驱动信号，用于驱动所述谐振变换器的高侧功率管；所述低侧驱动信号，用于驱动所述谐振变换器的低侧功率管。进一步地，所述第一电路，包括：电容电压采样模块，采集所述谐振电容电压，生成所述谐振电容电压采样信号并输出；输出采样及补偿电路，对所述谐振变换器的输出电压进行采样及补偿，生成输出补偿信号；电容电压均值检测及控制模块，根据所述谐振电容电压采样信号，生成谐振电容电压比较信号；电容电压阈值及初值控制运算模块，设定谐振电容电压采样信号的比较阈值，输出高侧阈值信号和低侧阈值信号；高低电平检测模块，检测所述谐振电容电压比较信号的高低电平时长，输出反应高低电平时长相等的标志信号；边沿检测及计数模块，检测所述电容电压比较信号的下降沿，并输出计数值。进一步地，所述第一电路，还包括：隔离电路，将原、副边隔离，将所述输出补偿信号传输到原边形成输出反馈信号。进一步地，所述电容电压均值检测及控制模块，输出电流调节信号，调节所述谐振电容电压采样信号的中心值。进一步地，所述电容电压阈值及初值控制运算模块，设定中心值调节电压初值，并根据所述反馈信号计算电压阈值差值。进一步地，所述第二电路，包括：阈值比较电路，比较所述谐振电容电压采样信号、高侧阈值信号和低侧阈值信号，生成高侧功率管关断信号和低侧功率管关断信号；导通时间控制及运算模块，接受所述软启动工作阶段控制模块的控制，设定软启动高侧导通时间起始值，以及高低侧导通时间最大值和高低侧导通时间最小值；PWM开关控制模块，接收所述高侧功率管关断信号、低侧功率管关断信号、高侧导通时间起始值、高低侧导通时间最大值和高低侧导通时间最小值，生成高侧驱动控制信号和低侧驱动控制信号；驱动电路，根据所述高侧驱动控制信号和低侧驱动控制信号，生成并输出高侧驱动信号和低侧驱动信号。更进一步地，所述第一时间段为从软启动开始到第一设定时间结束的时间段；所述第二时间段为所述第一时间段后，所述计数值达到设定值，或到第二设定时间结束的时间段；所述第三时间段为所述第二时间段后，所述标志信号有效前的时间段；第四时间段为所述第三时间段后，高侧阈值信号和低侧阈值信号差值大于由反馈信号计算得到的电压阈值差值前的时间段。为实现上述目的，本申请还提供一种谐振变换器的软启动控制芯片，包括，如上所述的一种谐振变换器的软启动控制电路。为实现上述目的，本申请还提供一种谐振变换器的软启动控制方法，所述方法应用于上述的谐振变换器的软启动控制电路包括：控制第一电路将谐振电容电压采样信号调整至设定的中心值调节电压初值；控制第一电路设定并输出高侧阈值信号和低侧阈值信号，控制所述第二电路设定高侧导通时间起始值、高低侧导通时间最大值和高低侧导通时间最小值；控制第二电路增大高侧导通时间到接收到高侧功率管关断信号为止；控制所述第一电路增大高侧阈值信号，并以同等幅度减小低侧阈值信号。进一步地，还包括：采集谐振变换器的谐振电容电压，得到谐振电容电压采样信号并输出的步骤。控制第一电路将谐振电容电压采样信号调整至设定的中心值调节电压初值；控制第一电路设定并输出高侧阈值信号和低侧阈值信号，控制所述第二电路设定高侧导通时间起始值、高低侧导通时间最大值和高低侧导通时间最小值；控制第二电路增大高侧导通时间到接收到高侧功率管关断信号为止；控制所述第一电路增大高侧阈值信号，并以同等幅度减小低侧阈值信号。进一步地，还包括：采集谐振变换器的谐振电容电压，得到谐振电容电压采样信号并输出的步骤。更进一步地，还包括：对谐振变换器的输出电压进行采样及补偿，生成输出补偿信号的步骤。本申请的一种谐振变换器的软启动控制电路与现有技术相比，具有如下有益效果：在软启动全阶段电压电流顺滑稳定变化，无信号突变；能够满足电容电压各种起始条件，避免启动时刻电容电压存在残压情况，增强系统稳定性；能够满足各种负载启动工况，通过设定前三个阶段的设定时长及第四阶段的阈值增大步长调节启动时间；能够在软启动过程内实现功率管的零电压导通，避免功率管硬开关，降低电压应力。本申请的其它特征和优点将在随后的说明书中阐述，并且，部分地从说明书中变得显而易见，或者通过实施本申请而了解。附图说明附图用来提供对本申请的进一步理解，并且构成说明书的一部分，并与本申请的实施例一起，用于解释本申请，并不构成对本申请的限制。在附图中：图1为本申请实施例1提供的谐振变换器的软启动控制电路的结构示意图；图2为本申请实施例2提供的谐振变换器的软启动控制电路的结构示意图；图3为本申请实施例2阈值比较电路、电容电压采样模块和电容电压均值检测及控制模块的结构示意图；图4为本申请实施例2的软启动控制及工作波形示意图；图5为中心值调节电压初值高于稳定值时的工作波形示意图；图6为中心值调节电压初值等于稳定值时的工作波形示意图；图7为中心值调节电压初值小于稳定值时的工作波形示意图。具体实施方式下面将参照附图更详细地描述本申请的实施例。虽然附图中显示了本申请的某些实施例，然而应当理解的是，本申请可以通过各种形式来实现，而且不应该被解释为限于这里阐述的实施例，相反提供这些实施例是为了更加透彻和完整地理解本申请。应当理解的是，本申请的附图及实施例仅用于示例性作用，并非用于限制本申请的保护范围。应当理解，本申请的方法实施方式中记载的各个步骤可以按照不同的顺序执行，和/或并行执行。此外，方法实施方式可以包括附加的步骤和/或省略执行示出的步骤。本申请的范围在此方面不受限制。本文使用的术语“包括”及其变形是开放性包括，即“包括但不限于”。术语“基于”是“至少部分地基于”。术语“一个实施例”表示“至少一个实施例”；术语“另一实施例”表示“至少一个另外的实施例”；术语“一些实施例”表示“至少一些实施例”。其他术语的相关定义将在下文描述中给出。需要注意，本申请中提及的“一个”、“多个”的修饰是示意性而非限制性的，本领域技术人员应当理解，除非在上下文另有明确指出，否则应该理解为“一个或多个”。“多个”应理解为两个或以上。谐振变换器本身的谐振特性使得谐振变换器在启动时存在较大的电压电流应力，会给系统应用带来很大的影响。因此多使用软启动技术来有效减小谐振变换器电压电流应力，现有的软启动技术主要有降频软启动法、变占空比软启动法和最优轨迹软启动法。其中，降频软启动法，是以高于稳态频率数倍的起始频率启动，然后频率逐渐降低使输出电压升高。但是，这种方法常需要启动频率大于很多倍的稳态频率才能使电压电流应力以较小值缓慢上升，当启动频率较低时，仍然存在较大的电压电流应力陡变。在软启动结束时还会由于增益变化带来电压电流的突变，影响环路稳定性。并且，软启动开始后一段时间内，功率管零电压导通可能无法实现。变占空比软启动法，是通过起始时刻以较小占空比开始，然后不断增加，使输出电压缓慢上升。这种方法虽然使启动时的电压电流应力缓慢增加，且控制方式简单，但也同样存在和降频软启动类似的问题，比如起始时功率管零电压导通可能无法实现，软启动结束时控制参数的变化容易带来控制环路的不稳定，以及电压电流尖峰的突变。并且，软启动起始阶段，死区时间较长，容易使系统进入容性工作区。最优轨迹软启动法，出自最优状态轨迹法控制，其将谐振电流和谐振电压以极坐标形式表示可将谐振变换器的工作状态用类圆形曲线表达，通过监控谐振电流和电压的状态，改变高低侧的导通时间和死区时间，可以改变不同负载下的轨迹波形。在启动时刻以最优轨迹法控制谐振电压和电流在一个周期的变化量，即可使输出电压缓慢增加，又能避免电压电流应力。但是，该方法控制复杂，计算量大，对模数转换器和数字微处理器的性能要求较高。并且需要对谐振电流和谐振电压做到高频高精度采样，易受外部噪声干扰。综上，三种软启动方法中，降频软启动法和变占空比软启动法都会出现电压电流突变的情况影响电路稳定性且死区时间长，而最优轨迹软启动法控制复杂，计算量大，对模数转换器和数字微处理器的性能要求较高。并且需要对谐振电流和谐振电压做到高频高精度采样，易受外部噪声干扰。因此，发明人提供了一种能够避免启动过程中电压电流突变，不会影响电路稳定性的软启动控制电路及软启动方法。下面，将参考附图详细地说明本申请的实施例。实施例1本申请的一个实施例，提供了一种谐振变换器的软启动控制电路，用于在降低谐振变换器启动过程中的电压电流应力，使输出电压缓慢上升至参考值的同时，实现功率管逐周期零电压导通特性，避免功率管硬开关和启动结束时刻的突变，提高系统稳定性。图1为本申请实施例1提供的谐振变换器的软启动控制电路的结构示意图，如图1所示，本申请的谐振变换器的软启动控制电路，包括：第一电路100，用于采集谐振变换器400的谐振电容电压Vcr，得到谐振电容电压采样信号Vcr_sns并输出；对谐振电容电压采样信号Vcr_sns的中心值进行调节；对谐振变换器400的输出电压Vo采样及补偿；设定并输出高侧阈值信号Vcr_hs和低侧阈值信号Vcr_ls；对谐振电容电压采样信号Vcr_sns进行比较分析，生成谐振电容电压比较信号Vcr_mid_cmp；检测所述谐振电容电压比较信号Vcr_mid_cmp的高低电平时长，输出能反应高低电平时长近似相等的标志信号Vcr_high_low_blc；检测所述谐振电容电压比较信号Vcr_mid_cmp的下降沿，并输出计数值Ncr_mid_cmpn。本申请的第一电路100，具有电压偏移功能，能将采集到的交流电压的中心值偏移到需要的电压值上。第二电路200，分别与第一电路100、软启动工作阶段控制模块300连接，接受软启动工作阶段控制模块300的控制，设定软启动时的高侧导通时间起始值ontime_hs_set，以及高低侧导通时间的最大值ontime_max和最小值ontime_min；对谐振电容电压采样信号Vcr_sns、高侧阈值信号Vcr_hs和低侧阈值信号Vcr_ls进行比较，分别生成高侧功率管关断信号vth_hs_off和低侧功率管关断信号vtl_ls_off；根据高侧功率管关断信号vth_hs_off、低侧功率管关断信号vtl_ls_off、高侧导通时间起始值ontime_hs_set、高低侧导通时间的最大值ontime_max和最小值ontime_min，输出高侧驱动信号和低侧驱动信号，高侧驱动信号用于驱动所述谐振变换器400的高侧功率管，低侧驱动信号用于驱动谐振变换器400的低侧功率管。软启动工作阶段控制模块300，分别与第一电路100和第二电路200连接，用于控制第一电路100和第二电路200，以在第一时间段控制第一电路100将谐振电容电压采样信号Vcr_sns调整至设定值；以在第二时间段控制第一电路100设定并输出高侧阈值信号Vcr_hs和低侧阈值信号Vcr_ls，控制第二电路200设定软启动时的高侧导通时间起始值ontime_hs_set、高低侧导通时间的最大值ontime_max和最小值ontime_min；以在第三时间段控制第二电路200增大高侧导通时间起始值ontime_hs_set至接收到高侧功率管关断信号vth_hs_off为止；以在第四时间段控制第一电路100增大高侧阈值信号Vcr_hs，并以同等幅度减小低侧阈值信号Vcr_ls。实施例2本申请的一个实施例，提供了一种谐振变换器的软启动控制电路，用于在降低谐振变换器启动过程中的电压电流应力，使输出电压缓慢上升至参考值的同时，实现功率管逐周期零电压导通特性，避免功率管硬开关和启动结束时刻的突变，提高系统稳定性。本申请实施例中，谐振变换器400以LLC半桥谐振变换器为例进行说明，本申请的谐振变换器的软启动控制电路的谐振变换器400并不限于LLC半桥谐振变换器。下面对本申请的谐振变换器的软启动控制电路进行说明，图2为本申请实施例2提供的谐振变换器的软启动控制电路的结构示意图，如图2所示，本申请的谐振变换器的软启动控制电路，包括：LLC半桥谐振变换器400由输入源Vin、两个功率管Q1和Q2、变压器Tr、漏感Lr、励磁电感Lm、谐振电容Cr，整流二极管Ds1和Ds2，输出电容Co和输出电阻RL组成。其中，漏感Lr和励磁电感Lm可集成成进变压器Tr中。本申请LLC半桥谐振变换器400的输出端包括谐振电容电压Vcr和输出电压Vo。第一电路100，用于采样所述谐振变换器400的谐振电容电压得到谐振电容电压采样信号Vcr_sns并输出，对谐振电容电压采样信号Vcr_sns的中心值进行调整，设定并输出高侧阈值信号Vcr_hs和低侧阈值信号Vcr_ls；在本实施方式中，第一电路100，包括：电容电压采样模块101，用于采集谐振电容电压Vcr，为谐振电容电压采样信号Vcr_sns并输出。示例性的，电容电压采样模块101的具体电路如图3所示，电容电压采样模块101，通过电容电阻网络将谐振电容电压分压Vcr后得到谐振电容电压采样信号Vcr_sns。电容电压均值检测及控制模块102，用于对谐振电容电压采样信号Vcr_sns进行比较分析后，产生谐振电容电压比较信号Vcr_mid_cmp；接收谐振电容电压中心值调节信号Vcr_mid_regu_dig，输出电流调节信号Icr_mid_regu对谐振电容电压采样信号Vcr_sns的中心值进行调节。本申请实施例中，电容电压均值检测及控制模块102，带有电压偏移功能，能将采集到的交流电压的中心值偏移到需要的电压值上。示例性的，电容电压均值检测及控制模块102具体电路如图3所示，根据谐振电容电压比较信号Vcr_mid_cmp的高低电平时长，改变谐振电容电压中心值调节信号Vcr_mid_regu_dig的大小，经过DAC输出到压控电流源后改变电流调节信号Icr_mid_regu的大小。当Vcr_mid_cmp高电平时长长于低电平时长时，减小谐振电容电压中心值调节信号Vcr_mid_regu_dig，电流调节信号Icr_mid_regu随之降低，电流调节信号Icr_mid_regu叠加到电容电压采样模块101中的下端电阻后使电容电压采样信号Vcr_sns随着降低；反之，当高电平时长短于低电平时长时，增大谐振电容电压中心值调节信号Vcr_mid_regu_dig，电流调节信号Icr_mid_regu随之增大，电流调节信号Icr_mid_regu叠加到电容电压采样模块101中的下端电阻后使电容电压采样信号Vcr_sns随着增加。通过多个周期的反复自适应调节，可将Vcr_mid_cmp调节到谐振电容电压初始设定值。谐振电容电压初始设定值可通过选择信号Vcr_sns_init_sel信号选择为谐振电容电压中心值调节电压初值Vcr_sns_init或谐振电容电压中心稳定值Vcr_mid_stable。高低电平检测模块103，用于检测谐振电容电压比较信号Vcr_mid_cmp的高低电平时长，并比较二者的大小，输出能反应高低电平时长近似相等的标志信号Vcr_high_low_blc至软启动工作阶段控制模块300。边沿检测及计数模块104，用于检测谐振电容电压比较信号Vcr_mid_cmp的下降沿，并输出计数值Ncr_mid_cmpn至软启动工作阶段控制模块300。输出采样及补偿电路105，用于对谐振变换器400的输出电压Vo采样及补偿，产生输出补偿信号Vout_comp；隔离电路106，用于将原副边隔离，接收所述输出补偿信号Vout_comp形成输出反馈信号Vfb。电容电压阈值及初值控制运算模块107，用于设定谐振电容电压采样信号Vcr_sns的比较阈值，并输出高侧阈值信号Vcr_hs和低侧阈值信号Vcr_ls，设定中心值调节电压初值Vcr_sns_init；并接收反馈信号Vfb计算电压阈值差值。可以理解的是，中心值调节电压初值Vcr_sns_init用于设定谐振电容电压采样信号Vcr_sns在软启动第一时间段的稳定位置，当然，该功能生效需要与电容电压均值检测及控制模块102中的选择信号Vcr_sns_init_sel相互配合。需要说明的是，电压阈值差值用于闭环环路控制。第二电路200，分别与第一电路100、软启动工作阶段控制模块300连接，接受软启动工作阶段控制模块300的控制，设定软启动时的高侧导通时长ontime_hs_set，以及高低侧导通时间的最大值ontime_max和最小值ontime_min；对谐振电容电压采样信号Vcr_sns、高侧阈值信号Vcr_hs和低侧阈值信号Vcr_ls进行比较，分别生成高侧功率管关断信号vth_hs_off和低侧功率管关断信号vtl_ls_off；根据高侧功率管关断信号vth_hs_off、低侧功率管关断信号vtl_ls_off、高侧导通时长ontime_hs_set、高低侧导通时间的最大值ontime_max和最小值ontime_min，输出高侧驱动信号和低侧驱动信号，高侧驱动信号用于驱动所述谐振变换器400的高侧功率管，低侧驱动信号用于驱动谐振变换器400的低侧功率管。在本实施方式中，第二电路200，包括：导通时间控制及运算模块201，接受软启动工作阶段控制模块300的控制，设定软启动时的高侧导通时长ontime_hs_set，以及高低侧导通时间的最大值ontime_max和最小值ontime_min。阈值比较电路202，接收谐振电容电压采样信号Vcr_sns、高侧阈值信号Vcr_hs和低侧阈值信号Vcr_ls并比较，分别产生高侧功率管关断信号vth_hs_off和低侧功率管关断信号vtl_ls_off。示例性的，阈值比较电路202的具体电路如图3所示，阈值比较电路202由两个比较器组成，第一比较器用于输出高侧功率管关断信号vth_hs_off，第二比较器用于输出低侧功率管关断信号vtl_ls_off。当谐振电容电压采样信号Vcr_sns高于高侧阈值信号Vcr_hs，第一比较输出高电平信号，反之输出低电平信号；当谐振电容电压采样信号Vcr_sns低于低侧阈值信号Vcr_ls，第二比较输出高电平信号，反之输出低电平信号；通过检测高侧功率管关断信号vth_hs_off和低侧功率管关断信号vtl_ls_off的高电平状态，即可用于高低侧功率管的关断控制。PWM开关控制模块203，用于接收所述高侧功率管关断信号vth_hs_off、低侧功率管关断信号vtl_ls_off、高侧导通时间起始值ontime_hs_set、高低侧导通时间最大值ontime_max和高低侧导通时间最小值ontime_min，产生高侧驱动控制信号gatehs_pre和低侧驱动控制信号gatels_pre；在本实施方式中，PWM开关控制模块203内部具有高低侧死区设定功能，或根据外部零电压导通检测功能实现自适应死区插入。在本实施方式中，高低侧功率管的开关过程如下：高侧功率管的关断时刻在不同阶段分别受高侧功率管关断信号vth_hs_off和高侧导通时间起始值ontime_hs_set初始值控制，并同时受高低侧导通时间最小值ontime_min和导通时间最大值ontime_max限制。高侧关断经过死区时间或零电压导通信号有效时低侧功率管开启。低侧功率管的关断时刻同时受低侧功率管关断信号vtl_ls_off、高低侧导通时间最小值ontime_min和导通时间最大值ontime_max控制。低侧关断经过死区时间或零电压导通信号有效时高侧功率管开启。驱动电路204，与PWM开关控制模块203连接，用于接收高侧驱动控制信号gatehs_pre和低侧驱动控制信号gatels_pre，输出高侧驱动信号gatehs和低侧驱动信号gatels。软启动工作阶段控制模块300，分别与第一电路100和第二电路200连接，用于控制所述第一电路100和第二电路200，以在第一时间段控制第一电路100将所述谐振电容电压采样信号Vcr_sns调整至设定的中心值调节电压初值Vcr_sns_init；以在第二时间段控制第一电路100设定并输出高侧阈值信号Vcr_hs和低侧阈值信号Vcr_ls，控制第二电路200设定软启动时的高侧导通时间起始值ontime_hs_set的起始值、导通时间最大值ontime_max和导通时间最小值ontime_min；以在第三时间段控制第二电路200增大高侧导通时间起始值ontime_hs_set到接收到高侧功率管关断信号vth_hs_off为止；以在第四时间段控制第一电路100增大高侧阈值信号Vcr_hs，并以同等幅度减小低侧阈值信号Vcr_ls，两个阈值增大和减小的量在一个周期内完全一样。该阶段中高低侧功率管受高低侧功率管关断信号Vtl_ls_off控制关断。在本实施方式中，第一时间段为从软启动开始到第一设定时间tss_stage1结束的时间段；第二时间段为所述第一时间段后，计数值Ncr_mid_cmpn达到设定值n，或到第二设定时间结束的时间段；第三时间段为所述第二时间段后，标志信号Vcr_high_low_blc有效前的时间段, 或到第三设定时间结束的时间段；第四时间段为第三时间段后，高侧阈值信号Vcr_hs和低侧阈值信号Vcr_ls差值大于由反馈信号Vfb计算得到的电压阈值差值前的时间段。参阅图4，本申请的谐振变换器的软启动控制电路的工作过程及工作波形如下：第一时间段，软启动起始时，软启动工作阶段控制模块300输出第一控制信号ss_stage1_flag，控制电容电压阈值及初值控制运算模块107设定中心值调节电压初值Vcr_sns_init，控制电容电压均值检测及控制模块102设定电流调节信号Icr_mid_regu的初值，并根据谐振电容电压比较信号Vcr_mid_cmp的高低电平时长情况开始调节电流调节信号Icr_mid_regu的大小，将谐振电容电压采样信号Vcr_sns的中心值调节到设定的中心值调节电压初值Vcr_sns_init。当该阶段定时器大于设定的第一设定时间tss_stage1时，该阶段结束，进入第二时间段。如图4所示，第一时间段，即电容电压采样值预充电阶段，该阶段软启动信号soft_start信号拉高，ss_stage1_flag第一控制信号拉高，谐振电容电压采样信号Vcr_sns为0，谐振电容电压比较信号Vcr_mid_cmp设定值为0，Icr_mid_regu从开始增大，Vcr_sns上升，当上升到Vcr_sns_init时保持恒定。该阶段中驱动不发，当时长大于第一设定时间tss_stage1时，第一时间段结束。参阅图5-7，在第一时间段，可以根据不同情况对中心值调节电压初值Vcr_sns_init进行设定，中心值调节电压初值Vcr_sns_init可高于、等于、小于稳定值Vcr_mid_init。在第二时间段时，均可实现平滑过渡，无电压电路突变产生。第二时间段，软启动工作阶段控制模块300输出第二控制信号ss_stage2_flag，控制导通时间控制及运算模块201，设定高侧导通时间起始值ontime_hs_set、高低侧导通时间最小值ontime_min和高低侧导通时间最大值ontime_max；控制电容电压阈值及初值控制运算模块107设定高侧阈值信号Vcr_hs和低侧阈值信号Vcr_ls。该阶段中，PWM开关控制模块203通过接收信号开始产生高侧驱动控制信号gatehs_pre及低侧驱动控制信号gatels_pre。高侧功率管的关断受高侧导通时间起始值ontime_hs_set、高低侧导通时间最小值ontime_min和高低侧导通时间最大值ontime_max决定，低侧功率管的关断时刻受低侧功率管关断信号vtl_hs_off、高低侧导通时间最小值ontime_min和高低侧导通时间最大值ontime_max决定。当软启动工作阶段控制模块300检测到边沿检测及计数模块104输出的计数值Ncr_mid_cmpn达到设定值n或当该阶段定时器大于设定的第二设定时间tss_stage2时，该阶段结束，进入第三阶段。如图4所示，第二时间段即电容电压采样值谷底矫正阶段，该阶段第二控制信号ss_stage2_flag拉高，驱动开始发波，高侧功率管关断时刻主要受高侧导通时间起始值ontime_hs_set决定，低侧关断时刻受低侧功率管关断信号vtl_ls_off控制。该阶段中高侧导通时间起始值ontime_hs_set保持不变。当检测到计数值Ncr_mid_cmpn等于设定值n或定时器计数时长大于第二设定时间tss_stage2时，该阶段结束。第三时间段，软启动工作阶段控制模块300输出第三控制信号ss_stage3_flag，控制导通时间控制及运算模块201增大高侧导通时间起始值ontime_hs_set，当增大到高侧功率管关断信号vth_hs_off信号比高侧导通时间设定信号提前到达时不再增大，以高侧功率管关断信号vth_hs_off信号关断高侧功率管。低侧功率管控制逻辑不变。该时间段通过检测高低电平检测模块103输出的标志信号vcr_high_low_blc是否有效，判定是否结束该阶段。当该信号有效时或是否为定时器时长大于设定时长tss_stage3时，该阶段结束，进入第四阶段。如图4所示，第三时间段即电容电压采样值中心平衡阶段，该阶段第三控制信号ss_stage3_flag拉高，软启动工作阶段控制模块300控制增大高侧导通时间起始值ontime_hs_set，低侧控制逻辑不变。当检测到高侧功率管关断信号vth_hs_off比高侧导通时间起始值ontime_hs_set先到达时，高侧导通时间起始值ontime_hs_set停止增加，此后，高侧功率管的关断时刻受高侧功率管关断信号vth_hs_off控制。当检测标志信号vcr_high_low_blc有效时，该时间段结束。第四时间段，软启动工作阶段控制模块300输出第四控制信号ss_stage4_flag，控制电容电压阈值及初值控制运算模块107开始增大高侧阈值信号Vcr_hs，减小低侧阈值信号Vcr_ls，两个阈值增大和减小的量在一个周期内完全一样。该阶段中高低侧功率管受高低侧功率管关断信号控制关断。随着两个阈值差值的增加，输出功率增大，输出电压缓慢上升。待高低侧电压阈值差值大于由反馈信号VFB计算得到的电压阈值差值时，软启动结束，环路开始闭环控制，稳定输出电压。如图4所示，第四时间段即电容电压阈值增加阶段，该阶段软启动工作阶段控制模块300控制同时从中心值增大高侧阈值Vcr_hs和减小低侧阈值Vcr_ls，待阈值电压增大到大于由反馈信号Vfb计算得到的电压阈值差值时，软启动结束，此后由控制环路接管，开始闭环控制，稳定输出电压。实施例3本申请的一个实施例，提供了一种谐振变换器的软启动控制芯片，包括，如上所述的谐振变换器的软启动控制电路。以上描述仅为本申请的部分实施例以及对所运用技术原理的说明。本领域技术人员应当理解，本申请中所涉及的公开范围，并不限于上述技术特征的特定组合而成的技术方案，同时也应涵盖在不脱离上述公开构思的情况下，由上述技术特征或其等同特征进行任意组合而形成的其它技术方案。例如上述特征与本申请中公开的具有类似功能的技术特征进行互相替换而形成的技术方案。此外，虽然采用特定次序描绘了各操作，但是这不应当理解为要求这些操作以所示出的特定次序或以顺序次序来执行。在一定环境下，多任务和并行处理可能是有利的。同样地，虽然在上面论述中包含了若干具体实现细节，但是这些不应当被解释为对本申请的范围的限制。在单独的实施例的上下文中描述的某些特征还可以组合地实现在单个实施例中。相反地，在单个实施例的上下文中描述的各种特征也可以单独地或以任何合适的子组合的方式实现在多个实施例中。尽管已经采用特定于结构特征和/或方法逻辑动作的语言描述了本主题，但是应当理解所附权利要求书中所限定的主题未必局限于上面描述的特定特征或动作。相反，上面所描述的特定特征和动作仅仅是实现权利要求书的示例形式。
