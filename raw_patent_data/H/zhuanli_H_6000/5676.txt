标题title
一种时间同步误差确定方法以及系统、设备、存储介质
摘要abst
本申请涉及一种时间同步误差确定方法以及系统、设备、存储介质，包括：获取目标采样脉冲的时间戳，目标采样脉冲的时间戳通过目标采样脉冲所属的抽取周期内授时源抽取的第一个采样脉冲的时间戳以及目标采样脉冲与所属的抽取周期内授时源抽取的第一个采样脉冲之间的时间间隔确定，时间间隔通过抽取周期以及所属的抽取周期内授时源抽取的采样脉冲确定；获取第一开关的信号传输的延迟时间；获取目标采样脉冲对应的目标数据包的同步时间戳；根据目标采样脉冲的时间戳、延迟时间以及目标数据包的同步时间戳确定设备模组的时间同步误差。上述方法无需引入专用仪器即可确定设备模组的时间同步误差，减少对其它高精度仪器仪表的依赖。
权利要求书clms
1.一种设备模组的时间同步误差确定方法，其特征在于，所述设备模组与授时源电信连接，所述设备模组接收所述授时源的各个时刻的授时信息并基于所述各个时刻的授时信息将同步时间戳封装到各数据包，所述授时源基于抽取周期并通过第一开关对所述设备模组输出的各数据包对应的采样脉冲进行抽取并对抽取的采样脉冲进行时间戳打标；所述方法包括：获取目标采样脉冲的时间戳，所述目标采样脉冲的时间戳通过所述目标采样脉冲所属的抽取周期内所述授时源抽取的第一个采样脉冲的时间戳以及所述目标采样脉冲与所述所属的抽取周期内所述授时源抽取的第一个采样脉冲之间的时间间隔确定，所述时间间隔通过所述抽取周期以及所述所属的抽取周期内授时源抽取的采样脉冲确定；获取所述第一开关的信号传输的延迟时间；获取所述目标采样脉冲对应的目标数据包的同步时间戳；根据所述目标采样脉冲的时间戳、所述延迟时间以及所述目标数据包的同步时间戳确定所述设备模组的时间同步误差。2.根据权利要求1所述的方法，其特征在于，所述目标采样脉冲所属的抽取周期内所述授时源抽取的第一个采样脉冲的时间戳为所述授时源抽取到所述目标采样脉冲所属的抽取周期内第一个采样脉冲时的授时信息确定。3.根据权利要求1或2所述的方法，其特征在于，所述设备模组与处理器连接，所述处理器中的定时器在所述第一开关每次打开时重新计数且输出重新计数之前的计数值，并在所述抽取周期内捕获到各采样脉冲时输出对应的计数值；所述方法还包括：获取所述所属的抽取周期内所述授时源抽取的第一个采样脉冲对应的定时器的第一计数值、所述目标采样脉冲对应的定时器的第二计数值，以及所述所属的抽取周期的下一抽取周期的第一个采样脉冲对应的定时器的第三计数值、所述下一抽取周期的第一开关打开时对应的定时器的第四计数值；获取所述第二计数值和所述第一计数值的差值，得到第一计算值；获取所述第四计数值和所述第三计数值的和值，并计算所述和值与所述第一计数值的差值，得到第二计算值；获取所述第一计算值与所述第二计算值的比值；获取所述比值与所述抽取周期的乘积，得到乘积值，所述乘积值为所述时间间隔；根据所述乘积值与所述所属的抽取周期内所述授时源抽取的第一个采样脉冲的时间戳的和值，确定所述目标采样脉冲的时间戳。4.根据权利要求1所述的方法，其特征在于，所述根据所述目标采样脉冲的时间戳、所述延迟时间以及所述目标数据包的同步时间戳确定所述设备模组的时间同步误差，包括：计算所述目标采样脉冲的时间戳与所述延迟时间的和值；计算所述目标采样脉冲的时间戳与所述延迟时间的和值与所述目标数据包的同步时间戳的差值；根据所述差值确定所述设备模组的时间同步误差。5.根据权利要求1所述的方法，其特征在于，所述授时源抽取采样脉冲的抽取频率小于所述设备模组输出的采样脉冲的频率；和/或，所述设备模组为传感器模组。6.一种设备模组的时间同步误差确定系统，其特征在于，所述时间同步误差确定系统包括授时源、第一开关和处理器；所述设备模组与所述授时源电信连接，所述设备模组接收所述授时源的各个时刻的授时信息并基于所述各个时刻的授时信息将同步时间戳封装到各数据包；所述授时源与所述第一开关电信连接，所述第一开关与所述设备模组电信连接，所述授时源基于抽取周期并通过所述第一开关对所述设备模组输出的各数据包对应的采样脉冲进行抽取，并对抽取的采样脉冲进行时间戳打标；所述处理器用于获取目标采样脉冲的时间戳，所述目标采样脉冲的时间戳通过所述目标采样脉冲所属的抽取周期内所述授时源抽取的第一个采样脉冲的时间戳以及所述目标采样脉冲与所述所属的抽取周期内所述授时源抽取的第一个采样脉冲之间的时间间隔确定，所述时间间隔通过所述抽取周期以及所述所属的抽取周期内授时源抽取的采样脉冲确定，获取所述第一开关的信号传输的延迟时间，获取所述目标采样脉冲对应的目标数据包的同步时间戳，根据所述目标采样脉冲的时间戳、所述延迟时间以及所述目标数据包的同步时间戳确定所述设备模组的时间同步误差。7.根据权利要求6所述的时间同步误差确定系统，其特征在于，所述设备模组与所述处理器连接，所述处理器中的定时器在所述第一开关每次打开时重新计数且输出重新计数之前的计数值，并在所述抽取周期内捕获到各采样脉冲时输出对应的计数值；所述处理器用于获取所述所属的抽取周期内所述授时源抽取的第一个采样脉冲对应的定时器的第一计数值、所述目标采样脉冲对应的定时器的第二计数值，以及所述所属的抽取周期的下一抽取周期的第一个采样脉冲对应的定时器的第三计数值、所述下一抽取周期的第一开关打开时对应的定时器的第四计数值；获取所述第二计数值和所述第一计数值的差值，得到第一计算值；获取所述第四计数值和所述第三计数值的和值，并计算所述和值与所述第一计数值的差值，得到第二计算值；获取所述第一计算值与所述第二计算值的比值；获取所述比值与所述抽取周期的乘积，得到乘积值，所述乘积值为所述时间间隔；根据所述乘积值与所述所属的抽取周期内所述授时源抽取的第一个采样脉冲的时间戳的和值，确定所述目标采样脉冲的时间戳。8.根据权利要求7所述的时间同步误差确定系统，其特征在于，所述时间同步误差确定系统还包括数据存储设备；所述处理器用于将所述定时器输出的各个计数值存储到所述数据存储设备；所述授时源将抽取的采样脉冲的时间戳存储到所述数据存储设备；所述设备模组将各数据包的同步时间戳存储到所述数据存储设备；所述处理器从所述数据存储设备中读取各采样脉冲对应的定时器的计数值、每次第一开关打开时对应的定时器的计数值以及所述授时源抽取的采样脉冲的时间戳、所述各数据包的同步时间戳。9.根据权利要求8所述的时间同步误差确定系统，其特征在于，所述时间同步误差确定系统还包括第二开关，所述第二开关与所述设备模组电信连接，所述第二开关还与所述数据存储设备电信连接，所述第二开关还与所述处理器连接；所述处理器用于根据所述抽取周期控制所述第一开关的开启与关闭；所述处理器用于在首次开启所述第一开关时控制所述第二开关开启；所述设备模组在所述第二开关开启时，将各数据包的同步时间戳存储到所述数据存储设备；所述授时源在所述第一开关开启时对所述设备模组输出的各数据包对应的采样脉冲进行抽取。10.一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的嵌入式程序，其特征在于，所述处理器执行所述嵌入式程序时实现权利要求1至5中任一项所述方法的步骤。11.一种可读存储介质，其上存储有嵌入式程序，其特征在于，所述嵌入式程序被处理器执行时实现权利要求1至5中任一项所述方法的步骤。
说明书desc
技术领域本申请涉及时间同步处理技术领域，特别是涉及一种设备模组的时间同步误差确定方法、时间同步误差确定系统和电子设备、存储介质。背景技术时间同步误差测量是为了确定不同时钟之间的时间一致性和稳定性而进行的过程。在许多应用中，例如通信网络、自动驾驶车辆和无人飞行器、科学实验等，各个设备或系统需要保持高度准确的时间同步，以确保数据的一致性、事件的顺序性和系统的可靠性。通过时间同步误差测量，不仅可以了解时钟漂移和抖动的程度并采取相应的校正措施，而且可以帮助测量和补偿传输延迟，以实现设备之间的时间一致性。针对高频率信号的时间同步误差测量，一般采用高精度的频率计数器和时钟分析仪。这些设备通常提供对高频率信号进行准确测量和分析的功能。频率计数器和时钟分析仪通常具有较高的采样率，能够处理高频率信号。它们可以测量和分析信号的频率、周期、脉冲宽度等参数，以评估时钟同步的精度。但是频率计数器和时钟分析仪通常具备较为复杂的设置和操作流程。正确配置和操作这些设备可能需要一定的专业知识和技能。同时频率计数器和时钟分析仪作为专业的测量和分析设备，其价格较高。因此，采用专用仪器通常具有较高的成本和使用复杂度，不仅要付出高昂的设备仪器购买成本，评估时针对较高的数据频率还需要设计较为复杂的测试方案并遵守严格的操作时序，且需要控制不同设备之间的时钟误差。另外针对频率不是特别稳定的信号以及过程中会出现一定随机性的突发信号，其测试方案往往就很难制定，操作过程对时序的要求以及后续数据分析的过程都相对困难。发明内容基于此，有必要针对上述技术问题，提供一种设备模组的时间同步误差确定方法、时间同步误差确定系统和电子设备、存储介质，无需引入专用仪器即可实现对设备模组的时间同步误差的确定，方法简便易操作，极大的减少了对其它高精度仪器仪表的依赖。一种设备模组的时间同步误差确定方法，设备模组与授时源电信连接，设备模组接收授时源的各个时刻的授时信息并基于各个时刻的授时信息将同步时间戳封装到各数据包，授时源基于抽取周期并通过第一开关对设备模组输出的各数据包对应的采样脉冲进行抽取并对抽取的采样脉冲进行时间戳打标；一种设备模组的时间同步误差确定方法包括：获取目标采样脉冲的时间戳，目标采样脉冲的时间戳通过目标采样脉冲所属的抽取周期内授时源抽取的第一个采样脉冲的时间戳以及目标采样脉冲与所属的抽取周期内授时源抽取的第一个采样脉冲之间的时间间隔确定，时间间隔通过抽取周期以及所属的抽取周期内授时源抽取的采样脉冲确定；获取第一开关的信号传输的延迟时间；获取目标采样脉冲对应的目标数据包的同步时间戳；根据目标采样脉冲的时间戳、延迟时间以及目标数据包的同步时间戳确定设备模组的时间同步误差。在其中一个实施例中，目标采样脉冲所属的抽取周期内授时源抽取的第一个采样脉冲的时间戳为授时源抽取到目标采样脉冲所属的抽取周期内第一个采样脉冲时的授时信息确定。在其中一个实施例中，设备模组与处理器连接，设备模组与处理器连接，处理器中的定时器在第一开关每次打开时重新计数且输出重新计数之前的计数值，并在抽取周期内捕获到各采样脉冲时输出对应的计数值；一种设备模组的时间同步误差确定方法还包括：获取所属的抽取周期内授时源抽取的第一个采样脉冲对应的定时器的第一计数值、目标采样脉冲对应的定时器的第二计数值，以及所属的抽取周期的下一抽取周期的第一个采样脉冲对应的定时器的第三计数值、下一抽取周期的第一开关打开时对应的定时器的第四计数值；获取第二计数值和第一计数值的差值，得到第一计算值；获取第四计数值和第三计数值的和值，并计算和值与第一计数值的差值，得到第二计算值；获取第一计算值与第二计算值的比值；获取比值与抽取周期的乘积，得到乘积值，乘积值为时间间隔；根据乘积值与所属的抽取周期内授时源抽取的第一个采样脉冲的时间戳的和值，确定目标采样脉冲的时间戳。在其中一个实施例中，根据目标采样脉冲的时间戳、延迟时间以及目标数据包的同步时间戳确定设备模组的时间同步误差，包括：计算目标采样脉冲的时间戳与延迟时间的和值；计算目标采样脉冲的时间戳与延迟时间的和值与目标数据包的同步时间戳的差值；根据差值确定设备模组的时间同步误差。在其中一个实施例中，授时源抽取采样脉冲的抽取频率小于设备模组输出的采样脉冲的频率；和/或，设备模组为传感器模组。一种设备模组的时间同步误差确定系统，时间同步误差确定系统包括授时源、第一开关和处理器；设备模组与授时源电信连接，设备模组接收授时源的各个时刻的授时信息并基于各个时刻的授时信息将同步时间戳封装到各数据包；授时源与第一开关电信连接，第一开关与设备模组电信连接，授时源基于抽取周期并通过第一开关对设备模组输出的各数据包对应的采样脉冲进行抽取，并对抽取的采样脉冲进行时间戳打标；处理器用于获取目标采样脉冲的时间戳，目标采样脉冲的时间戳通过目标采样脉冲所属的抽取周期内授时源抽取的第一个采样脉冲的时间戳以及目标采样脉冲与所属的抽取周期内授时源抽取的第一个采样脉冲之间的时间间隔确定，时间间隔通过抽取周期以及所属的抽取周期内授时源抽取的采样脉冲确定，获取第一开关的信号传输的延迟时间，获取目标采样脉冲对应的目标数据包的同步时间戳，根据目标采样脉冲的时间戳、延迟时间以及目标数据包的同步时间戳确定设备模组的时间同步误差。在其中一个实施例中，设备模组与处理器连接，处理器中的定时器在第一开关每次打开时重新计数且输出重新计数之前的计数值，并在抽取周期内捕获到各采样脉冲时输出对应的计数值；处理器用于获取所属的抽取周期内授时源抽取的第一个采样脉冲对应的定时器的第一计数值、目标采样脉冲对应的定时器的第二计数值，以及所属的抽取周期的下一抽取周期的第一个采样脉冲对应的定时器的第三计数值、下一抽取周期的第一开关打开时对应的定时器的第四计数值；获取第二计数值和第一计数值的差值，得到第一计算值；获取第四计数值和第三计数值的和值，并计算和值与第一计数值的差值，得到第二计算值；获取第一计算值与第二计算值的比值；获取比值与抽取周期的乘积，得到乘积值，乘积值为时间间隔；根据乘积值与所属的抽取周期内授时源抽取的第一个采样脉冲的时间戳的和值，确定目标采样脉冲的时间戳。在其中一个实施例中，时间同步误差确定系统还包括数据存储设备；处理器用于将定时器输出的各个计数值存储到数据存储设备；授时源将抽取的采样脉冲的时间戳存储到数据存储设备；设备模组将各数据包的同步时间戳存储到数据存储设备；处理器从数据存储设备中读取各采样脉冲对应的定时器的计数值、每次第一开关打开时对应的定时器的计数值以及授时源抽取的采样脉冲的时间戳、各数据包的同步时间戳。在其中一个实施例中，时间同步误差确定系统还包括第二开关，第二开关与设备模组电信连接，第二开关还与数据存储设备电信连接，第二开关还与处理器连接；处理器用于根据抽取周期控制第一开关的开启与关闭；处理器用于在首次开启第一开关时控制第二开关开启；设备模组在第二开关开启时，将各数据包的同步时间戳存储到数据存储设备；授时源在第一开关开启时对设备模组输出的各数据包对应的采样脉冲进行抽取。一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的嵌入式程序，处理器执行嵌入式程序时实现上述实施例中任一项方法的步骤。一种可读存储介质，其上存储有嵌入式程序，嵌入式程序被处理器执行时实现上述实施例中任一项方法的步骤。上述一种设备模组的时间同步误差确定方法、时间同步误差确定系统和电子设备、存储介质，设备模组的授时源为设备模组提供授时信息，并且授时源还基于抽取周期并通过第一开关对设备模组输出的各数据包对应的采样脉冲进行抽取并对抽取的采样脉冲进行时间戳打标。在实现设备模组的时间同步误差确定时，获取目标采样脉冲的时间戳，目标采样脉冲的时间戳通过授时源的抽取周期以及目标采样脉冲所属的抽取周期内授时源抽取的第一个采样脉冲的时间戳、目标采样脉冲所属的抽取周期内采样脉冲的脉冲计数值、目标采样脉冲与目标采样脉冲所属的抽取周期内授时源抽取的第一个采样脉冲之间的脉冲计数值确定获取第一开关的信号传输的延迟时间，获取目标采样脉冲对应的目标数据包的同步时间戳，根据目标采样脉冲的时间戳、延迟时间以及目标数据包的同步时间戳确定设备模组的时间同步误差。因此，授时源作为设备模组的授时基准，同时又作为时间同步误差的评估基准，可以降低不同基准因时钟误差对同步时间误差的评估精度造成的影响。此外，只需借助外部第一开关对设备模组进行抽帧，即可实现同步时间误差的计算，无需引入专用仪器即可实现对设备模组的时间同步误差的确定，方法简便易操作，极大的减少了对其它高精度仪器仪表的依赖。附图说明图1为一个实施例中一种设备模组的时间同步误差确定系统的结构框图；图2为一个具体实施例中一种设备模组的时间同步误差确定系统的结构框图；图3为一个实施例中传感器模组输出的采样脉冲、电子开关1和电子开关2的开关状态、GNSS板卡抽取的采样脉冲以及处理器的脉冲计数值、传感器数据的同步时间戳随时间变化的状态示意图；图4为一个实施例中一种设备模组的时间同步误差确定方法的流程示意图；具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。本申请提供的一种设备模组的时间同步误差确定系统。在一个实施例中，如图1所示，一种设备模组的时间同步误差确定系统包括授时源101、第一开关102和处理器103；设备模组20与授时源101电信连接，设备模组20接收授时源101的各个时刻的授时信息并基于各个时刻的授时信息将同步时间戳封装到各数据包；授时源101与第一开关102电信连接，第一开关102与设备模20组电信连接，授时源101基于抽取周期并通过第一开关102对设备模组20输出的各数据包对应的采样脉冲进行抽取，并对抽取的采样脉冲进行时间戳打标；处理器103用于获取目标采样脉冲的时间戳，目标采样脉冲的时间戳通过目标采样脉冲所属的抽取周期内授时源抽取的第一个采样脉冲的时间戳以及目标采样脉冲与所属的抽取周期内授时源抽取的第一个采样脉冲之间的时间间隔确定，时间间隔通过抽取周期以及所属的抽取周期内授时源抽取的采样脉冲确定，获取第一开关的信号传输的延迟时间，获取目标采样脉冲对应的目标数据包的同步时间戳，根据目标采样脉冲的时间戳、延迟时间以及目标数据包的同步时间戳确定设备模组的时间同步误差。在一个实施例中，如图1所示，设备模组20与处理器103连接，处理器103中的定时器在第一开关每次打开时重新计数且输出重新计数之前的计数值，并在抽取周期内捕获到各采样脉冲时输出对应的计数值；处理器103用于获取所属的抽取周期内授时源101抽取的第一个采样脉冲对应的定时器的第一计数值、目标采样脉冲对应的定时器的第二计数值，以及所属的抽取周期的下一抽取周期的第一个采样脉冲对应的定时器的第三计数值、下一抽取周期的第一开关打开时对应的定时器的第四计数值；获取第二计数值和第一计数值的差值，得到第一计算值；获取第四计数值和第三计数值的和值，并计算和值与第一计数值的差值，得到第二计算值；获取第一计算值与第二计算值的比值；获取比值与抽取周期的乘积，得到乘积值，乘积值为时间间隔；根据乘积值与所属的抽取周期内授时源抽取的第一个采样脉冲的时间戳的和值，确定目标采样脉冲的时间戳。在一个示例中，如图1所示，时间同步误差确定系统还包括数据存储设备105；处理器103用于将定时器输出的各个计数值存储到数据存储设备105；授时源101将抽取的采样脉冲的时间戳存储到数据存储设备105；设备模组20将各数据包的同步时间戳存储到数据存储设备105；处理器103从数据存储设备105中读取各采样脉冲对应的定时器的计数值、每次第一开关打开时对应的定时器的计数值以及授时源抽取的采样脉冲的时间戳、各数据包的同步时间戳。其中，时间同步误差确定系统还包括第二开关104，第二开关104与设备模组20电信连接，第二开关104还与数据存储设备105电信连接，第二开关104还与处理器103连接；处理器103用于根据抽取周期控制第一开关的开启与关闭；处理器103用于在首次开启第一开关102时控制第二开关104开启；设备模组20在第二开关104开启时，将各数据包的同步时间戳存储到数据存储设备105；授时源101在第一开关102开启时对设备模组20输出的各数据包对应的采样脉冲进行抽取。该实施例中，如图2所示，设备模组20为传感器模组，授时源101为GNSS板卡。本实施例的基础是利用一个具有外部事件输入的低刷新率的GNSS板卡，搭配一个处理器并结合处理器的短时高精度的定时器对传感器模组的每个数据包对应的采样脉冲进行捕获和计数，同时控制外围的电子开关1，即第一开关，借助处理器和电子开关1将传感器模组输出的高频率的采样脉冲按一定顺序抽帧，将其分频为小于GNSS板卡的接入信号的频率。例如，GNSS板卡的输出频率小于5Hz，限制输入GNSS板卡的采样脉冲的频率小于5Hz。然后根据GNSS板卡输出的每个采样脉冲的时间戳以及处理器的计数值和运行时钟频率计算还原出高频率的传感器模组的每包传感器数据对应的精确时间戳，最后将原始传感器数据输出的同步时间戳与还原后的精确时间戳对比，评估传感器模组的时间同步误差。具体地，如图2所示，GNSS板卡作为给传感器模组的授时源，为传感器模组提供同步时间和用于同步的基准脉冲信号，即秒脉冲。同时GNSS板卡可以接入不大于5Hz的采样脉冲，即采样间隔≥0.2秒，并将捕获到采样脉冲的上升或下降沿的时间戳输出。由于传感器模组的授时源以及捕获传感器模组的采样脉冲的时间源都是GNSS板卡，而实践中的线缆传输路径非常短，因此传输延迟误差基本可以忽略。电子开关1的传输延迟可通过器件手册查询得到，记为。如图2所示，第二开关为电子开关2。电子开关1和电子开关2受处理器发出的控制信号1和控制信号2控制，在初始状态下都处于关闭状态。电子开关1可按一定规则通断以将传感器模组的高频率的采样脉冲进行抽帧，具体的开关时刻根据处理器接收到或发出时的每个采样脉冲的时间间隔来确定，以保证抽帧后的采样脉冲的频率不高于GNSS板卡的最大允许输入频率。电子开关2则配合电子开关1在其第一次打开时同时打开，并一直保持打开状态，直到测试结束时与电子开关1同时关闭以保证记录的数据可以直接对齐。其中，传感器模组输出的采样脉冲、电子开关1和电子开关2的开关状态、GNSS板卡抽取的采样脉冲以及处理器的定时器输出的计数值、传感器数据的同步时间戳随时间的变化状态参见图3所示。设置处理器的内部高精度定时器溢出周期大于200毫秒，并确保定时器每个计数值的时间分辨率小于10纳秒，每次电子开关1打开时定时器清零并记录清零前的计数值，并且记录每个定时器周期内每个采样脉冲捕获时定时器的计数值。GNSS板卡输出的抽帧的采样脉冲的基准时间戳记为/＞，根据以下公式计算得到GNSS板卡抽帧前每个采样脉冲精确的时间戳/＞：；……；。其中，如图3所示，表示第n次抽取周期内第个采样脉冲在抽帧前的时间戳；/＞表示GNSS板卡输出的第n次抽取周期内第1个采样脉冲的时间戳；表示第n次从抽取周期内电子开关1打开时定时器清零前记录的计数值；/＞表示第n次抽取周期内定时器重新开始计数后第1个采样脉冲到来时的定时器计数值；表示第n次抽取周期内定时器在清零后第m个采样脉冲。如上，目标采样脉冲为第m个采样脉冲，目标采样脉冲对应的定时器的第二计数值为，所属的抽取周期内授时源101抽取的第一个采样脉冲对应的定时器的第一计数值为/＞，所属的抽取周期的下一抽取周期的第一个采样脉冲对应的定时器的第三计数值为, 下一抽取周期的第一开关打开时对应的定时器的第四计数值为/＞。抽取周期通过/＞确定。所属的抽取周期内授时源抽取的第一个采样脉冲的时间戳为/＞。目标采样脉冲的时间戳为/＞。进而，对比时间戳以评估传感器模组的时间精度。具体地，由于被测传感器模组输出的传感器数据的同步时间戳为，链路中电子开关1的延迟为/＞，上述公式计算得出传感器模组的每个采样脉冲精确的时间戳/＞，即得到被测传感器模组的时间同步的误差/＞：；…；。上述一种设备模组的时间同步误差确定系统，使用较低价值的GNSS板卡及外围控制设备、记录设备即可实现对高频率的传感器数据的时间戳精度的精确评估，极大的减少了对其它高精度仪器仪表的依赖。此外，通过控制电子开关对高频采样脉冲进行有序抽帧的方式来获取低频率的采样脉冲的准确时间戳，进而根据定时器对原始采样脉冲的分割计数来还原每个采样脉冲的准确时间，方法简便易操作,并且对规则采样和不规则采样均有效。本申请还提供一种设备模组的时间同步误差确定方法，应用于图1所示的处理器。如图4所示，一种设备模组的时间同步误差确定方法包括以下步骤：S402,获取目标采样脉冲的时间戳，目标采样脉冲的时间戳通过目标采样脉冲所属的抽取周期内授时源抽取的第一个采样脉冲的时间戳以及目标采样脉冲与所属的抽取周期内授时源抽取的第一个采样脉冲之间的时间间隔确定，时间间隔通过抽取周期以及所属的抽取周期内授时源抽取的采样脉冲确定。本实施中，参见图1所示，目标采样脉冲为设备模组输出的任一采样脉冲。目标采样脉冲的时间戳指的是设备模组输出目标采样脉冲时的时间戳。其中，设备模组与处理器连接，处理器中的定时器在第一开关每次打开时重新计数且输出重新计数之前的计数值，并在抽取周期内捕获到各采样脉冲时输出对应的计数值。目标采样脉冲的时间戳确定方式为：获取所属的抽取周期内授时源抽取的第一个采样脉冲对应的定时器的第一计数值、目标采样脉冲对应的定时器的第二计数值，以及所属的抽取周期的下一抽取周期的第一个采样脉冲对应的定时器的第三计数值、下一抽取周期的第一开关打开时对应的定时器的第四计数值；获取第二计数值和第一计数值的差值，得到第一计算值；获取第四计数值和第三计数值的和值，并计算和值与第一计数值的差值，得到第二计算值；获取第一计算值与第二计算值的比值；获取比值与抽取周期的乘积，得到乘积值，乘积值为时间间隔；根据乘积值与所属的抽取周期内授时源抽取的第一个采样脉冲的时间戳的和值，确定目标采样脉冲的时间戳。具体地，通过处理器中的定时器对采样脉冲进行计数。设置处理器的内部高精度定时器溢出周期大于200毫秒，并确保定时器每个计数的时间分辨率小于10纳秒，每次电子开关1打开时定时器清零并记录清零前的计数，并且记录每个定时器周期内每个采样脉冲捕获时定时器的计数值。例如，如上实施例所述，目标采样脉冲的时间戳为，/＞的计算公式如下所示：。因此，采用处理器的定时器对高刷新率的传感器模组的采样脉冲进行精细计数分割，借助了其计数的相对准确性高的特点，单位时间内分割越精细，分辨率和精度越高。S404,获取第一开关的信号传输的延迟时间。本实施例中，第一开关存在信号传输延迟，因此授时源抽取到采样脉冲时存在时间延迟。第一开关的传输延迟可通过器件手册查询得到，记为。S406,获取目标采样脉冲对应的目标数据包的同步时间戳。本实施例中，设备模组输出数据包同时输出数据包对应的采样脉冲。因此可确定目标采样脉冲对应的目标数据包。设备模组为输出的数据包打上同步时间戳，以便于下游设备通过数据包中的同步时间戳进行数据对齐。S408,根据目标采样脉冲的时间戳、延迟时间以及目标数据包的同步时间戳确定设备模组的时间同步误差。本实施例中，通过目标采样脉冲的时间戳和延迟时间可确定设备模组输出目标采样脉冲时的时间戳。通过设备模组输出目标采样脉冲时的时间戳和输出数据包中的同步时间戳，可确定设备模组的时间同步误差。其中，授时源抽取采样脉冲的抽取频率小于设备模组输出的采样脉冲的频率；和/或，设备模组为传感器模组。具体地，如图2所示，授时源为低刷新率的GNSS板卡，其输出频率5Hz以内即可。设备模组为高频率的传感器模组。GNSS板卡抽取采样脉冲的抽取频率小于传感器模组输出的采样脉冲的频率。如图2所示，GNSS板卡搭配一个处理器并结合处理器的短时高精度定时器对传感器模组的每个数据包对应的采样脉冲进行捕获和计数，同时控制外围的电子开关1，借助处理器和电子开关1将高频率的传感器模组的采样脉冲按一定顺序抽帧分频，将抽帧的采样脉冲输入到GNSS板卡的外部事件输入接口中。然后根据GNSS板卡输出的每个采样脉冲的时间戳以及处理器中定时器的计数值和运行时钟频率计算还原出高频率的传感器模组的每数据包对应的精确时间戳，最后对比来评估传感器模组的时间同步误差。因此，将GNSS板卡既作为传感器模组的授时基准，同时又作为评估传感器模组的时间基准，降低不同基准间因时钟误差对评估精度造成的影响。此外，采用处理器的定时器对高刷新率的传感器模组的采样脉冲进行精细计数分割，借助了其计数的相对准确性高的特点，单位时间内分割越精细，分辨率和精度越高。在一个示例中，根据目标采样脉冲的时间戳、延迟时间以及目标数据包的同步时间戳确定设备模组的时间同步误差，包括：计算目标采样脉冲的时间戳与延迟时间的和值；计算目标采样脉冲的时间戳与延迟时间的和值与目标数据包的同步时间戳的差值；根据差值确定设备模组的时间同步误差。具体地，如上述实施例，可通过下述公式计算得到设备模组的时间同步误差：。上述一种设备模组的时间同步误差确定方法，使用较低价值的GNSS板卡及外围控制设备、记录设备即可实现对高频率的传感器数据的时间戳精度的精确评估，极大的减少了对其它高精度仪器仪表的依赖。此外，通过控制电子开关对高频采样脉冲进行有序抽帧的方式来获取低频率的采样脉冲的准确时间戳，进而根据定时器对原始采样脉冲的分割计数来还原每个采样脉冲的准确时间，方法简便易操作,并且对规则采样和不规则采样均有效。应该理解的是，虽然流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，附图中的至少一部分步骤可以包括多个子步骤或者多个阶段，这些子步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些子步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤的子步骤或者阶段的至少一部分轮流或者交替地执行。在一个实施例中，提供了一种可读存储介质，其上存储有嵌入式程序，嵌入式程序被处理器执行时实现上述任一实施例所述的一种设备模组的时间同步误差确定方法。在一个实施例中，提供了一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的嵌入式程序，处理器执行嵌入式程序时实现上述任一实施例所述的一种设备模组的时间同步误差确定方法。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过嵌入式程序来指令相关的硬件来完成，所述的嵌入式程序可存储于一非易失性计算机可读取存储介质中，该嵌入式程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、存储、数据库或其它介质的任何引用，均可包括非易失性和/或易失性存储器。非易失性存储器可包括只读存储器、可编程ROM、电可编程ROM、电可擦除可编程ROM或闪存。易失性存储器可包括随机存取存储器或者外部高速缓冲存储器。作为说明而非局限，RAM以多种形式可得，诸如静态RAM、动态RAM、同步DRAM、双数据率SDRAM、增强型SDRAM、同步链路 DRAM、存储器总线直接RAM、直接存储器总线动态RAM、以及存储器总线动态RAM等。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请专利的保护范围应以所附权利要求为准。
