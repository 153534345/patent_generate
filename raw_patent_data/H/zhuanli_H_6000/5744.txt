标题title
一种基于电源等级量化降低WiFi功耗的方法和装置
摘要abst
本发明公开了一种基于电源等级量化降低WiFi功耗的方法和装置，所述方法包括：在WiFi基带处于广播阶段时，通过预设的FEM电源管理器将FEM电源设置为最大值；在WiFi基带处于非广播阶段时，获取STA的信号强度和信噪比；将信号强度和信噪比与预设的对照表进行对比，分别获得信号强度对应的第一电源值和信噪比对应的第二电源值，通过FEM电源管理器将FEM电源设置为第一电源值和第二电源值中的较大值。本发明提出一种基于电源等级量化降低WiFi功耗的方法和装置，通过两种FEM电源调整方案，对WiFi中AP侧的运行形成了全方位的功耗降低布局，能够解决无法通过恰当的电源管理方法降低WiFi中AP侧的整体功耗的问题。
权利要求书clms
1.一种基于电源等级量化降低WiFi功耗的方法，其特征在于，包括：在WiFi基带处于广播阶段时，通过预设的FEM电源管理器将所述FEM电源设置为最大值；在所述WiFi基带处于非广播阶段时，获取STA的信号强度和信噪比；将所述信号强度和信噪比与预设的对照表进行对比，分别获得所述信号强度对应的第一电源值和所述信噪比对应的第二电源值，通过所述FEM电源管理器将所述FEM电源设置为所述第一电源值和所述第二电源值中的较大值。2.如权利要求1所述的一种基于电源等级量化降低WiFi功耗的方法，其特征在于，获取STA的信号强度和信噪比，具体为：从所述WiFi基带中的调试解调模块，获取所述WiFi基带所连接的所述STA的所述信号强度和信噪比；其中，所述信号强度和信噪比是所述调试解调模块根据芯片中的第一预设算法对射频调制信号进行计算得到的，所述射频调制信号是调试解调器从所述STA中获取的。3.如权利要求1所述的一种基于电源等级量化降低WiFi功耗的方法，其特征在于，在所述通过所述FEM电源管理器将所述FEM电源设置为所述第一电源值和所述第二电源值中的较大值之后，还包括：获取在所述WiFi基带处于非广播阶段时所述FEM电源调整前后的丢包率，若所述丢包率超过预设值，使用所述FEM电源管理器将所述FEM电源调高，直到所述丢包率在所述预设值的范围之内。4.如权利要求3所述的一种基于电源等级量化降低WiFi功耗的方法，其特征在于，获取在所述WiFi基带处于非广播阶段时所述FEM电源调整前后的丢包率，具体为：在所述WiFi基带处于非广播阶段时，通过网络包处理模块根据第二预设算法计算得到所述WiFi基带所在的数字通信系统的出错包，根据所述出错包统计得到在预设周期内所述FEM电源调整前后的所述丢包率；其中，所述网络包处理模块是所述WiFi基带解调后的数字处理模块，并且是所述WiFi基带所在OSI架构中的一个物理层网元。5.如权利要求3所述的一种基于电源等级量化降低WiFi功耗的方法，其特征在于，使用所述FEM电源管理器将所述FEM电源调高，直到所述丢包率在所述预设值的范围之内，具体为：使用所述FEM电源管理器将所述FEM电源调高，直到所述丢包率在所述预设值的范围之内；若所述丢包率无法控制在所述预设值的范围之内，则通过所述FEM电源管理器将所述FEM电源设置为最大值。6.如权利要求1所述的一种基于电源等级量化降低WiFi功耗的方法，其特征在于，在WiFi基带处于广播阶段时，具体为：从所述WiFi基带获取IO通知，若所述IO通知为高电平，则确定所述WiFi基带处于广播阶段。7.如权利要求1所述的一种基于电源等级量化降低WiFi功耗的方法，其特征在于，所述对照表具体为：从所述WiFi基带获取所连接所述STA的历史信号强度集和历史信噪比集，并获取所述历史信号强度集和历史信噪比集对应的硬件电源集；将所述历史信号强度集和历史信噪比集划分为若干等级，得到两个单侧划分集；将所述两个单侧划分集中的数据与所述硬件电源集中的数据进行一一对应，得到两个对应表格，由所述两个对应表格构成所述对照表。8.如权利要求1所述的一种基于电源等级量化降低WiFi功耗的方法，其特征在于，所述FEM电源管理器包括电源反馈链路的反馈电阻和组合元集，所述组合元集包括若干组合元，所述组合元集中的每个组合元包括一个MOS管和一个电阻；其中，所述反馈电阻与所述组合元集并联；所述每个组合元中的所述MOS管和所述电阻串联。9.如权利要求1所述的一种基于电源等级量化降低WiFi功耗的方法，其特征在于，所述FEM电源管理器还用于：通过预设的若干GPIO控制线控制组合元集中若干MOS管的导通与断开。10.一种基于电源等级量化降低WiFi功耗的装置，其特征在于，包括第一调整模块和第二调整模块；其中，所述第一调整模块，用于在WiFi基带处于广播阶段时，通过预设的FEM电源管理器将所述FEM电源设置为最大值；所述第二调整模块，用于在所述WiFi基带处于非广播阶段时，获取STA的信号强度和信噪比；将所述信号强度和信噪比与预设的对照表进行对比，分别获得所述信号强度对应的第一电源值和所述信噪比对应的第二电源值，通过所述FEM电源管理器将所述FEM电源设置为所述第一电源值和所述第二电源值中的较大值。
说明书desc
技术领域本发明涉及无线通信技术领域，特别是涉及一种基于电源等级量化降低WiFi功耗的方法和装置。背景技术目前市场上的消费电子产品，总体上向着智能化、可便携化的方向发展，WiFi对于工作和日常生活来说具有举足轻重的作用，WiFi作为当前无线局域网应用的主要技术，按照应用场景可划分为STA和AP，其中STA是无线局域网应用终端，应用如手机等产品中，AP则是网络接入终端，通常为多个STA提供无线网络接入，应用于如路由器等产品中。对于STA类的产品，常规硬件设计是在无数据流量的时候，将WiFi模块设置成休眠状态来降低功耗；但对于AP类的产品，因为STA接入在时间和空间上的不确定性，AP类的产品必须时刻提供完整性能的无线网络覆盖，以保证良好的客户体验；而且，硬件设计时，还会在每一个射频通路上增加一个FEM模块，来提升产品的无线覆盖范围，因为FEM模块是射频PA、LNA和RFSW的集合，其功耗很高，通常占到整个WiFi模块功耗的30%，如果WiFi模块支持MIMO技术，这个占比还会升高到45%以上；目前对于WiFi中AP侧的降低能耗方法还处于探索阶段，主要是通过全网静默模式来降低电源的使用效能，使得所有节点都保持很低的功耗。但是全网静默模式会导致每次通信前都需要重建无线网络，带来额外的延迟，造成无线容易丢包、速度慢、漫游效果差等不良影响，因此现有技术无法有效地降低WiFi中AP侧的整体功耗。发明内容本发明提供一种基于电源等级量化降低WiFi功耗的方法和装置，以解决无法通过恰当的电源管理方法降低WiFi中AP侧的整体功耗的问题。为了解决上述问题，本发明提供了一种基于电源等级量化降低WiFi功耗的方法，包括：在WiFi基带处于广播阶段时，通过预设的FEM电源管理器将所述FEM电源设置为最大值；在所述WiFi基带处于非广播阶段时，获取STA的信号强度和信噪比；将所述信号强度和信噪比与预设的对照表进行对比，分别获得所述信号强度对应的第一电源值和所述信噪比对应的第二电源值，通过所述FEM电源管理器将所述FEM电源设置为所述第一电源值和所述第二电源值中的较大值。本发明针对降低WiFi中AP侧的整体功耗，提供了两种方案；一种方案是在WiFi基带处于广播阶段时，将FEM电源设置为最大值，因为WiFi基带会按照一定的周期发送Beacon广播信号，该广播信息应尽可能的大，才能保证最佳的网络覆盖效果，因此在该情况下，将FEM电源设置为最大值，能够满足WiFi基带的广播需求。另一种方案是在WiFi基带处于非广播阶段时，将FEM电源设置为信号强度和信噪比对应的第一电源值和第二电源值中的较大值，由于第一电源值和第二电源值能够反映出当前无线信道质量，因此通过该调整方式，能够满足WiFi基带所在数字通信系统的正常运行需求。相比于现有技术，本发明通过两种方案，对WiFi中AP侧的运行形成了全方位的功耗降低布局；由于AP类的产品，并不需要时刻工作在最佳信号覆盖的状态，只需要保证广播信号的最佳覆盖，以及在连接STA清单中，保证信号最弱的STA有良好的数据通信质量即可，因此在WiFi基带处于广播阶段时，直接将FEM电源设置为最大值，能够满足WiFi基带的广播需求；在WiFi基带处于非广播阶段时，将FEM电源设置为信号强度和信噪比所对应电源值中的较大值，能够保证STA有良好的数据通信质量，满足WiFi基带所在数字通信系统的正常运行需求，所以能够解决无法通过恰当的电源管理方法降低WiFi中AP侧的整体功耗的问题。作为优选方案，获取STA的信号强度和信噪比，具体为：从所述WiFi基带中的调试解调模块，获取所述WiFi基带所连接的所述STA的所述信号强度和信噪比；其中，所述信号强度和信噪比是所述调试解调模块根据芯片中的第一预设算法对射频调制信号进行计算得到的，所述射频调制信号是调试解调器从所述STA中获取的。本优选方案中，因为WiFi是TDD无线通信系统，根据TDD无线信道的互易性，可以从STA发送过来的射频调制信号质量计算得到信号强度和信噪比，即评估出当前无线信道质量，并以此为根据，命令FEM电源管理模块做出FEM电源调整。作为优选方案，在所述通过所述FEM电源管理器将所述FEM电源设置为所述第一电源值和所述第二电源值中的较大值之后，还包括：获取在所述WiFi基带处于非广播阶段时所述FEM电源调整前后的丢包率，若所述丢包率超过预设值，使用所述FEM电源管理器将所述FEM电源调高，直到所述丢包率在所述预设值的范围之内。本优选方案通过将丢包率控制在预设值范围之内的方式，可以解决在通过控制FEM电源以降低WiFi中AP侧的整体功耗时，电压较低影响了通信质量的问题，使WiFi网络维持在一个稳定健康运行的水平。作为优选方案，获取在所述WiFi基带处于非广播阶段时所述FEM电源调整前后的丢包率，具体为：在所述WiFi基带处于非广播阶段时，通过网络包处理模块根据第二预设算法计算得到所述WiFi基带所在的数字通信系统的出错包，根据所述出错包统计得到在预设周期内所述FEM电源调整前后的所述丢包率；其中，所述网络包处理模块是所述WiFi基带解调后的数字处理模块，并且是所述WiFi基带所在OSI架构中的一个物理层网元。本优选方案中的网络包处理模块是WiFi基带解调后的数字处理模块，在OSI架构中，属于物理层的一个网元，会计算出错包，并向WiFi基带模块发送包确认指令或包重传指令，因此网络包处理模块可以统计出一定周期内的丢包率；丢包率高可能会导致WiFi网络中的延迟、网络应用异常、数据丢失，甚至造成网络不可用，所以可以通过控制丢包率使WiFi网络维持在一个稳定健康运行的水平，避免对FEM电源进行调整后导致不良影响的发生，能够保障在降低WiFi功耗的同时，维持WiFi基带所在数字通信系统的稳定。作为优选方案，使用所述FEM电源管理器将所述FEM电源调高，直到所述丢包率在所述预设值的范围之内，具体为：使用所述FEM电源管理器将所述FEM电源调高，直到所述丢包率在所述预设值的范围之内；若所述丢包率无法控制在所述预设值的范围之内，则通过所述FEM电源管理器将所述FEM电源设置为最大值。本优选方案提供了多种针对丢包率的解决方法。丢包率高，说明本方案在通过控制FEM电源以降低WiFi中AP侧的整体功耗时，电压较低影响了通信质量，因此在丢包率无法控制在预设值的范围之内时，通过将FEM电源设置为最大值，进而提升电压，能够将丢包率降到最低。作为优选方案，在WiFi基带处于广播阶段时，具体为：从所述WiFi基带获取IO通知，若所述IO通知为高电平，则确定所述WiFi基带处于广播阶段。本优选方案提供了WiFi基带是否处于广播阶段的判断方法，若IO通知是高电平，FEM电源管理器会获悉这是WiFi基带将要开启广播阶段的广播请求，因此通过对IO通知是否为高电平的判断，能够确定WiFi基带是否处于广播阶段。作为优选方案，所述对照表具体为：从所述WiFi基带获取所连接所述STA的历史信号强度集和历史信噪比集，并获取所述历史信号强度集和历史信噪比集对应的硬件电源集；将所述历史信号强度集和历史信噪比集划分为若干等级，得到两个单侧划分集；将所述两个单侧划分集中的数据与所述硬件电源集中的数据进行一一对应，得到两个对应表格，由所述两个对应表格构成所述对照表。本优选方案的对照表是根据历史信号强度集、历史信噪比集和硬件电源集划分而来的，通过对照表的形式能够直观有效地呈现出信号强度和硬件电源的关系、信噪比和硬件电源的关系，因此在实际应用时，能够根据对照表快速获得信号强度对应的第一电源值和信噪比对应的第二电源值。作为优选方案，所述FEM电源管理器包括电源反馈链路的反馈电阻和组合元集，所述组合元集包括若干组合元，所述组合元集中的每个组合元包括一个MOS管和一个电阻；其中，所述反馈电阻与所述组合元集并联；所述每个组合元中的所述MOS管和所述电阻串联。本优选方案在FEM电源中电源反馈链路的电阻上并联组合元集，组成了电源反馈等级量化电路；一个MOS管和一个电阻串联组成一个组合元，多个组合元并联后即可通过改变反馈电阻值，将输出电源划分为多个等级，实现输出电压等级量化。作为优选方案，所述FEM电源管理器还用于：通过预设的若干GPIO控制线控制组合元集中若干MOS管的导通与断开。本优选方案通过若干GPIO控制线控制对应的MOS管的导通与断开，即可产生不同的FEM供电电压，使得FEM电源管理器的操作简单，通过控制不同MOS管导通与断开的方式即可实现提供不同的FEM供电电压，能够节省电压调节时间，快速达到降低WiFi功耗的目的。本发明还提供了一种基于电源等级量化降低WiFi功耗的装置，包括第一调整模块和第二调整模块；其中，所述第一调整模块，用于在WiFi基带处于广播阶段时，通过预设的FEM电源管理器将所述FEM电源设置为最大值；所述第二调整模块，用于在所述WiFi基带处于非广播阶段时，获取STA的信号强度和信噪比；将所述信号强度和信噪比与预设的对照表进行对比，分别获得所述信号强度对应的第一电源值和所述信噪比对应的第二电源值，通过所述FEM电源管理器将所述FEM电源设置为所述第一电源值和所述第二电源值中的较大值。作为优选方案，所述第二调整模块包括信息获取单元；所述信息获取单元，用于从所述WiFi基带中的调试解调模块，获取所述WiFi基带所连接的所述STA的所述信号强度和信噪比；其中，所述信号强度和信噪比是所述调试解调模块根据芯片中的第一预设算法对射频调制信号进行计算得到的，所述射频调制信号是所述调试解调器从所述STA中获取的。作为优选方案，所述第二调整模块还包括修整单元；所述修整单元，用于获取在所述WiFi基带处于非广播阶段时所述FEM电源调整前后的丢包率，若所述丢包率超过预设值，使用所述FEM电源管理器将所述FEM电源调高，直到所述丢包率在所述预设值的范围之内。作为优选方案，所述修整单元包括第一子单元；所述第一子单元，用于在所述WiFi基带处于非广播阶段时，通过网络包处理模块根据第二预设算法计算得到所述WiFi基带所在的数字通信系统的出错包，根据所述出错包统计得到在预设周期内所述FEM电源调整前后的所述丢包率；其中，所述网络包处理模块是所述WiFi基带解调后的数字处理模块，并且是所述WiFi基带所在OSI架构中的一个物理层网元。作为优选方案，所述修整单元包括第二子单元和第三子单元；其中，所述第二子单元，用于使用所述FEM电源管理器将所述FEM电源调高，直到所述丢包率在所述预设值的范围之内；所述第三子单元，用于若所述丢包率无法控制在所述预设值的范围之内，则通过所述FEM电源管理器将所述FEM电源设置为最大值。作为优选方案，所述第一调整模块包括阶段判断单元；所述阶段判断单元，用于从所述WiFi基带获取IO通知，若所述IO通知为高电平，则确定所述WiFi基带处于广播阶段。作为优选方案，所述对照表具体为：从所述WiFi基带获取所连接所述STA的历史信号强度集和历史信噪比集，并获取所述历史信号强度集和历史信噪比集对应的硬件电源集；将所述历史信号强度集和历史信噪比集划分为若干等级，得到两个单侧划分集；将所述两个单侧划分集中的数据与所述硬件电源集中的数据进行一一对应，得到两个对应表格，由所述两个对应表格构成所述对照表。作为优选方案，所述FEM电源管理器包括电源反馈链路的反馈电阻和组合元集，所述组合元集包括若干组合元，所述组合元集中的每个组合元包括一个MOS管和一个电阻；其中，所述反馈电阻与所述组合元集并联；所述每个组合元中的所述MOS管和所述电阻串联。作为优选方案，所述FEM电源管理器还用于：通过预设的若干GPIO控制线控制所述组合元集中若干MOS管的导通与断开。附图说明图1是本发明实施例提供的一种基于电源等级量化降低WiFi功耗的方法的流程示意图；图2是本发明实施例提供的FEM电源管理器示意图；图3是本发明实施例提供的基于电源等级量化降低WiFi功耗的原理图；图4是本发明实施例提供的一种基于电源等级量化降低WiFi功耗的装置的结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。在本申请的描述中，需要理解的是，术语“第一”、“第二”和“第三”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”和“第三”的特征可以明示或者隐含地包括一个或者多个该特征。在本申请的描述中，除非另有说明，“若干”的含义是两个或两个以上。本发明实施例所描述的一种基于电源等级量化降低WiFi功耗的方法可以应用于放装型无线AP、墙面式无线AP、智分型无线AP等AP类的产品中，例如RG-WS6008、W30EAX3000、GR-1800AX等。在本申请的描述中，需要说明的是，AP是AccessPoint的缩写，即无线接入点，它用于无线网络的无线交换机，也是无线网络的核心。STA是Station的缩写，在无线局域网中一般为客户端，每一个连接到无线网络中的终端都可称为一个站点。实施例一：请参阅图1，本发明的实施例提供了一种基于电源等级量化降低WiFi功耗的方法，包括S1~S2，具体实施步骤如下：S1、在WiFi基带处于广播阶段时，通过预设的FEM电源管理器将FEM电源设置为最大值。在本发明实施例步骤S1中，S1包括S1.1~S1.3，具体为：S1.1、从WiFi基带获取IO通知。本实施例提供了WiFi基带是否处于广播阶段的判断方法，若IO通知是高电平，FEM电源管理器会获悉这是WiFi基带将要开启广播阶段的广播请求，因此通过对IO通知是否为高电平的判断，能够确定WiFi基带是否处于广播阶段。S1.2、对步骤S1.1从WiFi基带获取的IO通知进行判断，若IO通知为高电平，则确定WiFi基带处于广播阶段。S1.3、在WiFi基带处于广播阶段时，通过预设的FEM电源管理器将FEM电源设置为最大值。其中，FEM电源管理器的构建过程具体为：FEM电源管理器包括电源反馈链路的反馈电阻和组合元集，组合元集包括若干组合元，组合元集中的每个组合元包括一个MOS管和一个电阻；其中，反馈电阻与组合元集并联，每个组合元中的MOS管和电阻串联，通过预设的若干GPIO控制线控制组合元集中若干MOS管的导通与断开。为应用本发明实施例，请参阅图2，本发明实施例提供了FEM电源管理器示意图，举例了在本实施例所述的FEM电源管理器构建原理下的其中一种FEM电源管理器的构建过程。图2中的第一模块是一款典型的DCDC电路，其输出电压Vo = Vfb / R3*。第二模块表示电源反馈等级量化的结构，如第二模块所示，在电源反馈链路的电阻R3上，并联若干个电阻和MOS管的组合元集，组成电源反馈等级量化电路，其中，每个MOS管都受FEM电源管理模块引出的GPIO控制线控制。在图2中，电路的MOS管导通时，与反馈电阻R3并联，改变了反馈参考量，从而实现FEM电源输出电源Vo的变化。如图2中第二模块所示，有4个组合元，每个组合元有通、断两个状态，假设参考电压Vfb为0.6V，那么，Vo可以输出1.85V~5.1V之间的16个电源等级，即：FEM电源管理器可以输出1.85V~5.1V之间的16个电源等级。本实施例是直接通过FEM电源管理器将FEM电源设置为最大值，因为在传统框架中，WiFi基带会按照一定的周期，发送Beacon广播信号，向周边的STA广播包含SSID在内的AP信息，广播信息应尽可能的大，才能保证最佳的网络覆盖，因此通过将FEM电源设置为最大值的方式，能够保证广播信号经过FEM内的PA后，不会过饱和失真。并且，本实施例在FEM电源中电源反馈链路的电阻上并联组合元集，组成了电源反馈等级量化电路；一个MOS管和一个电阻串联组成一个组合元，多个组合元并联后即可通过改变反馈电阻值，将输出电源划分为多个等级，实现输出电压等级量化。通过若干GPIO控制线控制对应的MOS管的导通与断开，即可产生不同的FEM供电电压，使得FEM电源管理器的操作简单，通过控制不同MOS管导通与断开的方式即可实现提供不同的FEM供电电压，能够节省电压调节时间，快速达到降低WiFi功耗的目的。S2、在WiFi基带处于非广播阶段时，获取STA的信号强度和信噪比；将信号强度和信噪比与预设的对照表进行对比，分别获得信号强度对应的第一电源值和信噪比对应的第二电源值，通过FEM电源管理器将FEM电源设置为第一电源值和第二电源值中的较大值。在本发明实施例步骤S2中，S2包括S2.1~S2.5，具体为：S2.1、对步骤S1.1从WiFi基带获取的IO通知进行判断，若IO通知为低电平，则确定WiFi基带处于非广播阶段。S2.2、在WiFi基带处于非广播阶段时，从WiFi基带中的调试解调模块，获取WiFi基带所连接的STA的信号强度和信噪比；其中，信号强度和信噪比是调试解调模块根据芯片中的第一预设算法对射频调制信号进行计算得到的，射频调制信号是调试解调器从STA中获取的。调试解调模块是WiFi基带内所包含的调试解调模组，会根据芯片设计的算法计算得出当前接收的模拟信号的信号强度和信噪比。本实施例中，因为WiFi是TDD无线通信系统，根据TDD无线信道的互易性，可以从STA发送过来的射频调制信号质量计算得到信号强度和信噪比，即评估出当前无线信道质量，并以此为根据，命令FEM电源管理模块做出FEM电源调整。S2.3、将信号强度和信噪比与预设的对照表进行对比，分别获得信号强度对应的第一电源值A和信噪比对应的第二电源值B，通过FEM电源管理器将FEM电源设置为第一电源值A和第二电源值B中的较大值max。其中，对照表的构建过程具体为：从WiFi基带获取所连接STA的历史信号强度集和历史信噪比集，并获取历史信号强度集和历史信噪比集对应的硬件电源集；将历史信号强度集和历史信噪比集划分为若干等级，得到两个单侧划分集；将两个单侧划分集中的数据与硬件电源集中的数据进行一一对应，得到两个对应表格，由两个对应表格构成对照表。本实施例针对的是WiFi基带处于非广播阶段的情况，此时不需要考虑WiFi基带发送Beacon广播信号的需求，因此可以根据系统的实际需求，动态调整FEM电源。此时通过将FEM电源设置为信号强度和信噪比所对应电源值中的较大值，能够保证STA有良好的数据通信质量，满足WiFi基带所在数字通信系统的正常运行需求，该方式既能降低WiFi中AP侧的整体功耗，又能保证WiFi基带所在数字通信系统的正常运转。并且，本实施例中的对照表是根据历史信号强度集、历史信噪比集和硬件电源集划分而来的，通过对照表的形式能够直观有效地呈现出信号强度和硬件电源的关系、信噪比和硬件电源的关系，因此在实际应用时，能够根据对照表快速获得信号强度对应的第一电源值和信噪比对应的第二电源值。S2.4、在IO通知为低电平，即WiFi基带处于非广播阶段时，通过网络包处理模块根据数字通信系统的差错控制算法计算得到WiFi基带所在的数字通信系统的出错包，根据出错包统计得到在预设周期内FEM电源调整前后的丢包率；其中，网络包处理模块是WiFi基带解调后的数字处理模块，并且是WiFi基带所在OSI架构中的一个物理层网元。本实施例中的网络包处理模块是WiFi基带解调后的数字处理模块，在OSI架构中，属于物理层的一个网元，会计算出错包，并向WiFi基带模块发送包确认指令或包重传指令，因此网络包处理模块可以统计出一定周期内的丢包率；丢包率高可能会导致WiFi网络中的延迟、网络应用异常、数据丢失，甚至造成网络不可用，所以可以通过控制丢包率使WiFi网络维持在一个稳定健康运行的水平，避免对FEM电源进行调整后导致不良影响的发生，能够保障在降低WiFi功耗的同时，维持WiFi基带所在数字通信系统的稳定。S2.5、若丢包率超过2%，使用FEM电源管理器将FEM电源调高，直到丢包率在2%的范围之内；若丢包率无法控制在2%的范围之内，则通过FEM电源管理器将FEM电源设置为最大值。本实施例通过将丢包率控制在2%范围之内的方式，可以解决在通过控制FEM电源以降低WiFi中AP侧的整体功耗时，电压较低影响了通信质量的问题，使WiFi网络维持在一个稳定健康运行的水平，在现实通信中，存在各种各样的使用场景，该方式能够进一步保证电源调整后的通信质量。此外，本实施例提供了多种针对丢包率的解决方法。丢包率高，说明本方案在通过控制FEM电源以降低WiFi中AP侧的整体功耗时，电压较低影响了通信质量，因此在丢包率无法控制在预设值的范围之内时，通过将FEM电源设置为最大值，到达硬件设计的最大值，进而提升电压，能够将丢包率降到最低。为应用本发明实施例，请参阅图3，图3是本发明实施例提供的基于电源等级量化降低WiFi功耗的原理图。图3中的第三模块表示AP类产品传统框架，其中包含网络包处理模块、WiFi基带和WiFi FEM模块，用来提供完整性能的无线网络覆盖。图3中的FEM电源可调模块是指上述实施例中的FEM电源管理器，核心是一个电阻反馈式的DCDC电源电路。FEM电源管理模块是指上述实施例中对于WiFi基带是否处于广播阶段的一个需求汇总方式，负责汇总FEM电源需求，再根据预设其中的MOS管控制与对照表，动态调整FEM电源。WiFi评估模块是指在上述实施例中的WiFi基带处于非广播阶段时，将FEM电源设置为第一电源值和第二电源值中的较大值以及设置降低丢包率的方式，其核心作用是整机评估WiFi当前工作状态，然后做出合理的判断，根据判断，命令FEM电源管理模块做出相应的电源调整。其中，FEM电源可调模块、FEM电源管理模块、WiFi评估模块和第三模块中各设备之间的箭头，表示了彼此的交互方式，共同协作以实现本发明实施例所述的一种基于电源等级量化降低WiFi功耗的方法。总体来看，本发明实施例具有如下有益效果：本实施例针对降低WiFi中AP侧的整体功耗，提供了两种方案，对WiFi中AP侧的运行形成了全方位的功耗降低布局；一种方案是在WiFi基带处于广播阶段时，将FEM电源设置为最大值，因为WiFi基带会按照一定的周期发送Beacon广播信号，该广播信息应尽可能的大，才能保证最佳的网络覆盖效果，因此在该情况下，将FEM电源设置为最大值，能够满足WiFi基带的广播需求。另一种方案是在WiFi基带处于非广播阶段时，将FEM电源设置为信号强度和信噪比对应的第一电源值和第二电源值中的较大值，由于第一电源值和第二电源值能够反映出当前无线信道质量，因此通过该调整方式，能够满足WiFi基带所在数字通信系统的正常运行需求；并且，通过将丢包率控制在预设值范围之内的方式，可以解决在通过控制FEM电源以降低WiFi中AP侧的整体功耗时，电压较低影响了通信质量的问题，使WiFi网络维持在一个稳定健康运行的水平。由于AP类的产品并不需要时刻工作在最佳信号覆盖的状态，只需要保证广播信号的最佳覆盖，以及在连接STA清单中，信号最弱的STA有良好的数据通信质量即可。因此在实际应用中，在WiFi基带处于广播阶段时，将FEM电源设置为最大值；在WiFi基带处于非广播阶段时，只需要保证信号最弱的STA有良好的数据通信质量，往往不需要AP类产品工作在最佳信号覆盖的状态；在这种情况下，WiFi的射频信号并不强，不需要FEM工作在额定电压即能保证射频信号无失真放大。根据P=U*I，FEM工作电压的降低，可以直接降低了WiFi模块的整体功耗。实施例二：请参阅图4，本发明的实施例提供了一种基于电源等级量化降低WiFi功耗的装置，包括第一调整模块10和第二调整模块20；其中，第一调整模块10，用于在WiFi基带处于广播阶段时，通过预设的FEM电源管理器将FEM电源设置为最大值；第二调整模块20，用于在WiFi基带处于非广播阶段时，获取STA的信号强度和信噪比；将信号强度和信噪比与预设的对照表进行对比，分别获得信号强度对应的第一电源值和信噪比对应的第二电源值，通过FEM电源管理器将FEM电源设置为第一电源值和第二电源值中的较大值。在一个实施例中，第一调整模块10包括通知获取单元、阶段判断单元和第一调整单元；其中，通知获取单元，用于从WiFi基带获取IO通知。本实施例提供了WiFi基带是否处于广播阶段的判断方法，若IO通知是高电平，FEM电源管理器会获悉这是WiFi基带将要开启广播阶段的广播请求，因此通过对IO通知是否为高电平的判断，能够确定WiFi基带是否处于广播阶段。阶段判断单元，用于对步骤S1.1从WiFi基带获取的IO通知进行判断，若IO通知为高电平，则确定WiFi基带处于广播阶段。第一调整单元，用于在WiFi基带处于广播阶段时，通过预设的FEM电源管理器将FEM电源设置为最大值。其中，FEM电源管理器的构建过程具体为：FEM电源管理器包括电源反馈链路的反馈电阻和组合元集，组合元集包括若干组合元，组合元集中的每个组合元包括一个MOS管和一个电阻；其中，反馈电阻与组合元集并联，每个组合元中的MOS管和电阻串联，通过预设的若干GPIO控制线控制组合元集中若干MOS管的导通与断开。为应用本发明实施例，请参阅图2，本发明实施例提供了FEM电源管理器示意图。图2中的第一模块是一款典型的DCDC电路，其输出电压Vo = Vfb / R3*。第二模块表示电源反馈等级量化的结构，如第二模块所示，在电源反馈链路的电阻R3上，并联若干个电阻和MOS管的组合元集，组成电源反馈等级量化电路，其中，每个MOS管都受FEM电源管理模块引出的GPIO控制线控制。在图2中，电路的MOS管导通时，与反馈电阻R3并联，改变了反馈参考量，从而实现FEM电源输出电源Vo的变化。如图2中第二模块所示，有4个组合元，每个组合元有通、断两个状态，假设参考电压Vfb为0.6V，那么，Vo可以输出1.85V~5.1V之间的16个电源等级，即：FEM电源管理器可以输出1.85V~5.1V之间的16个电源等级。本实施例是直接通过FEM电源管理器将FEM电源设置为最大值，因为在传统框架中，WiFi基带会按照一定的周期，发送Beacon广播信号，向周边的STA广播包含SSID在内的AP信息，广播信息应尽可能的大，才能保证最佳的网络覆盖，因此通过将FEM电源设置为最大值的方式，能够保证广播信号经过FEM内的PA后，不会过饱和失真。并且，本实施例在FEM电源中电源反馈链路的电阻上并联组合元集，组成了电源反馈等级量化电路；一个MOS管和一个电阻串联组成一个组合元，多个组合元并联后即可通过改变反馈电阻值，将输出电源划分为多个等级，实现输出电压等级量化。通过若干GPIO控制线控制对应的MOS管的导通与断开，即可产生不同的FEM供电电压，使得FEM电源管理器的操作简单，通过控制不同MOS管导通与断开的方式即可实现提供不同的FEM供电电压，能够节省电压调节时间，快速达到降低WiFi功耗的目的。在一个实施例中，第二调整模块20包括阶段判别单元、信息获取单元、第二调整单元、修整单元；其中，修整单元包括第一子单元、第二子单元和第三子单元；其中，阶段判别单元，用于对步骤S1.1从WiFi基带获取的IO通知进行判断，若IO通知为低电平，则确定WiFi基带处于非广播阶段。信息获取单元，用于在WiFi基带处于非广播阶段时，从WiFi基带中的调试解调模块，获取WiFi基带所连接的STA的信号强度和信噪比；其中，信号强度和信噪比是调试解调模块根据芯片中的第一预设算法对射频调制信号进行计算得到的，射频调制信号是调试解调器从STA中获取的。调试解调模块是WiFi基带内所包含的调试解调模组，会根据芯片设计的算法计算得出当前接收的模拟信号的信号强度和信噪比。本实施例中，因为WiFi是TDD无线通信系统，根据TDD无线信道的互易性，可以从STA发送过来的射频调制信号质量计算得到信号强度和信噪比，即评估出当前无线信道质量，并以此为根据，命令FEM电源管理模块做出FEM电源调整。第二调整单元，用于将信号强度和信噪比与预设的对照表进行对比，分别获得信号强度对应的第一电源值A1和信噪比对应的第二电源值B1，通过FEM电源管理器将FEM电源设置为第一电源值A1和第二电源值B1中的较大值max。其中，对照表的构建过程具体为：从WiFi基带获取所连接STA的历史信号强度集和历史信噪比集，并获取历史信号强度集和历史信噪比集对应的硬件电源集；将历史信号强度集和历史信噪比集划分为若干等级，得到两个单侧划分集；将两个单侧划分集中的数据与硬件电源集中的数据进行一一对应，得到两个对应表格，由两个对应表格构成对照表。本实施例针对的是WiFi基带处于非广播阶段的情况，此时不需要考虑WiFi基带发送Beacon广播信号的需求，因此可以根据系统的实际需求，动态调整FEM电源。此时通过将FEM电源设置为信号强度和信噪比所对应电源值中的较大值，能够保证STA有良好的数据通信质量，满足WiFi基带所在数字通信系统的正常运行需求，该方式既能降低WiFi中AP侧的整体功耗，又能保证WiFi基带所在数字通信系统的正常运转。并且，本实施例中的对照表是根据历史信号强度集、历史信噪比集和硬件电源集划分而来的，通过对照表的形式能够直观有效地呈现出信号强度和硬件电源的关系、信噪比和硬件电源的关系，因此在实际应用时，能够根据对照表快速获得信号强度对应的第一电源值和信噪比对应的第二电源值。第一子单元，用于在IO通知为低电平，即WiFi基带处于非广播阶段时，通过网络包处理模块根据数字通信系统的差错控制算法计算得到WiFi基带所在的数字通信系统的出错包，根据出错包统计得到在预设周期内FEM电源调整前后的丢包率；其中，网络包处理模块是WiFi基带解调后的数字处理模块，并且是WiFi基带所在OSI架构中的一个物理层网元。本实施例中的网络包处理模块是WiFi基带解调后的数字处理模块，在OSI架构中，属于物理层的一个网元，会计算出错包，并向WiFi基带模块发送包确认指令或包重传指令，因此网络包处理模块可以统计出一定周期内的丢包率；丢包率高可能会导致WiFi网络中的延迟、网络应用异常、数据丢失，甚至造成网络不可用，所以可以通过控制丢包率使WiFi网络维持在一个稳定健康运行的水平，避免对FEM电源进行调整后导致不良影响的发生，能够保障在降低WiFi功耗的同时，维持WiFi基带所在数字通信系统的稳定。第二子单元，用于若丢包率超过2%，使用FEM电源管理器将FEM电源调高，直到丢包率在2%的范围之内；第三子单元，用于若丢包率无法控制在2%的范围之内，则通过FEM电源管理器将FEM电源设置为最大值。本实施例通过将丢包率控制在2%范围之内的方式，可以解决在通过控制FEM电源以降低WiFi中AP侧的整体功耗时，电压较低影响了通信质量的问题，使WiFi网络维持在一个稳定健康运行的水平，在现实通信中，存在各种各样的使用场景，该方式能够进一步保证电源调整后的通信质量。此外，本实施例提供了多种针对丢包率的解决方法。丢包率高，说明本方案在通过控制FEM电源以降低WiFi中AP侧的整体功耗时，电压较低影响了通信质量，因此在丢包率无法控制在预设值的范围之内时，通过将FEM电源设置为最大值，到达硬件设计的最大值，进而提升电压，能够将丢包率降到最低。为应用本发明实施例，请参阅图3，图3是本发明实施例提供的基于电源等级量化降低WiFi功耗的原理图。图3中的第三模块表示AP类产品传统框架，其中包含网络包处理模块、WiFi基带和WiFi FEM模块，用来提供完整性能的无线网络覆盖。图3中的FEM电源可调模块是指上述实施例中的FEM电源管理器，核心是一个电阻反馈式的DCDC电源电路。FEM电源管理模块是指上述实施例中对于WiFi基带是否处于广播阶段的一个需求汇总方式，负责汇总FEM电源需求，再根据预设其中的MOS管控制与对照表，动态调整FEM电源。WiFi评估模块是指在上述实施例中的WiFi基带处于非广播阶段时，将FEM电源设置为第一电源值和第二电源值中的较大值以及设置降低丢包率的方式，其核心作用是整机评估WiFi当前工作状态，然后做出合理的判断，根据判断，命令FEM电源管理模块做出相应的电源调整。其中，FEM电源可调模块、FEM电源管理模块、WiFi评估模块和第三模块中各设备之间的箭头，表示了彼此的交互方式，共同协作以实现本发明实施例所述的一种基于电源等级量化降低WiFi功耗的装置。本装置具有如下有益效果：本装置针对降低WiFi中AP侧的整体功耗，提供了两种方案；一种方案是在WiFi基带处于广播阶段时，将FEM电源设置为最大值，因为WiFi基带会按照一定的周期发送Beacon广播信号，该广播信息应尽可能的大，才能保证最佳的网络覆盖效果，因此在该情况下，将FEM电源设置为最大值，能够满足WiFi基带的广播需求。另一种方案是在WiFi基带处于非广播阶段时，将FEM电源设置为信号强度和信噪比对应的第一电源值和第二电源值中的较大值，由于第一电源值和第二电源值能够反映出当前无线信道质量，因此通过该调整方式，能够满足WiFi基带所在数字通信系统的正常运行需求；并且，通过将丢包率控制在预设值范围之内的方式，可以解决在通过控制FEM电源以降低WiFi中AP侧的整体功耗时，电压较低影响了通信质量的问题，使WiFi网络维持在一个稳定健康运行的水平。实施例三：本发明实施例提供了一种计算机可读存储介质，所述计算机可读存储介质包括存储的计算机程序，其中，在所述计算机程序运行时控制所述计算机可读存储介质所在设备执行所述的一种基于电源等级量化降低WiFi功耗的方法；其中，所述一种基于电源等级量化降低WiFi功耗的方法如果以软件功能单元的形式实现并作为独立的产品使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明实现上述实施例方法中的全部或部分流程，也可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一计算机可读存储介质中，该计算机程序在被处理器执行时，可实现上述各个方法实施例的步骤。其中，所述计算机程序包括计算机程序代码，所述计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。所述计算机可读介质可以包括：能够携带所述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质等。以上是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也视为本发明的保护范围。
