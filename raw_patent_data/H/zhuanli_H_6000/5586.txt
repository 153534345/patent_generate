标题title
一种图片压缩方法及装置
摘要abst
本说明书实施例公开了一种图片压缩方法及装置，方法包括：将待处理图片输入内容识别模型，输出待处理图片的内容输入信息，将待处理图片输入类型识别模型，输出待处理图片的文件类型输入信息；将文件类型输入信息和内容输入信息输入图片生成模型，输出符合第一图像大小阈值的处理后图片；根据处理后图片的文件类型，进行压缩，以得到符合第二图像大小阈值的压缩图片。装置基于方法实现。
权利要求书clms
1.一种图片压缩方法，其特征在于，包括：将待处理图片输入内容识别模型，输出待处理图片的内容输入信息，将待处理图片输入类型识别模型，输出待处理图片的文件类型输入信息；将文件类型输入信息和内容输入信息输入图片生成模型，输出符合第一图像大小阈值的处理后图片；根据处理后图片的文件类型，进行压缩，以得到符合第二图像大小阈值的压缩图片；其中，所述第二图像大小阈值＜所述第一图像大小阈值＜待处理图片的原始图像大小阈值；所述内容识别模型通过如下训练过程获得：利用历史原图和标注内容输入信息，对内容识别模型进行训练；训练过程中，利用第一损失函数计算内容识别模型基于历史原图输出的历史内容输入信息与标注内容输入信息之间的第一损失值；所述类型识别模型通过如下训练过程获得：利用历史原图和标注类型输入信息，对类型识别模型进行训练；训练过程中，利用第二损失函数计算类型识别模型基于历史原图输出的历史类型输入信息与标注类型输入信息之间的第二损失值；所述图片生成模型通过如下训练过程获得：利用历史原图、标注输入信息，对图片生成模型进行训练；所述标注输入信息包括标注类型输入信息和标注内容输入信息；训练过程中，利用第三损失函数计算图片生成模型基于历史输入信息生成的历史图片与历史原图之间的第三损失值；所述内容识别模型、所述类型识别模型、所述图片生成模型合并训练，当第一损失值、第二损失值、第三损失值均满足收敛条件时，则输出训练好的内容识别模型、类型识别模型、图片生成模型。2.根据权利要求1所述的方法，其特征在于，所述内容识别模型、所述类型识别模型、所述图片生成模型配置于服务器端；所述方法在服务器端执行，将压缩图片发送给终端设备；或者，所述待处理图片的处理流程在服务器端执行，所述处理后图片的压缩流程在终端设备端执行。3.根据权利要求1所述的方法，其特征在于，方法还包括：在所述将待处理图片输入内容识别模型前，识别待处理图片中是否包含人像，若是，则将待处理图片分割为人像图片和不包含人像的待处理图片，之后将不包含人像的待处理图片输入内容识别模型；若否，则将待处理图片输入内容识别模型；在所述将文件类型输入信息和内容输入信息输入图片生成模型，输出符合第一图像大小阈值的处理后图片后，当判断处理后图片所对应的待处理图片进行过分割处理时，根据不包含人像的待处理图片与处理后图片之间的像素比，将分割得到的人像图片进行转化，得到压缩后的人像图片；之后，将不包含人像的待处理图片所对应的处理后图片与压缩后的人像图片进行叠加，生成新的待处理图片；所述新的待处理图片进行根据文件类型压缩的压缩流程。4.根据权利要求3所述的方法，其特征在于，方法还包括：在识别获得人像时，对人像所在区域进行背景填充，并识别获得人像所在区域位于整个待处理图片上的空间位置；在进行图片叠加流程时，根据不包含人像的待处理图片与处理后图片之间的像素比，将人像所在区域位于整个待处理图片上的空间位置转化为人像图片叠加到不包含人像的待处理图片所对应的处理后图片上的空间位置。5.根据权利要求3所述的方法，其特征在于，方法还包括：在识别获得人像时，对人像所在区域进行空白填充；在进行图片叠加流程时，获取处理后图片中的空白区域，将压缩后的人像图片叠加到空白区域。6.根据权利要求1或3所述的方法，其特征在于，所述根据处理后图片的文件类型，进行压缩，以得到符合第二图像大小阈值的压缩图片，包括：基于文件类型输入信息，从文件类型库中获取对应文件类型的压缩基数和第二图像大小阈值；基于压缩基数、第二图像大小阈值和第一图像大小阈值，计算压缩质量；基于压缩质量和压缩基数，进行图片压缩。7.根据权利要求1所述的方法，其特征在于，方法还包括：在所述根据处理后图片的文件类型，进行压缩，以得到符合第二图像大小阈值的压缩图片之后，将符合第二图像大小阈值的压缩图片、符合第一图像大小阈值的处理后图片与待处理图片一一对应存储在图片存储库内。8.一种图片压缩装置，其特征在于，包括：模型识别模块，用于将待处理图片输入内容识别模型，输出待处理图片的内容输入信息，将待处理图片输入类型识别模型，输出待处理图片的文件类型输入信息；第一处理模块，用于将文件类型输入信息和内容输入信息输入图片生成模型，输出符合第一图像大小阈值的处理后图片；第二处理模块，用于根据处理后图片的文件类型，进行压缩，以得到符合第二图像大小阈值的压缩图片；其中，所述第二图像大小阈值＜所述第一图像大小阈值＜待处理图片的原始图像大小阈值；模型训练模块，用于训练所述内容识别模型、所述类型识别模型、图片生成模型；训练过程如下：利用历史原图和标注内容输入信息，对内容识别模型进行训练；训练过程中，利用第一损失函数计算内容识别模型基于历史原图输出的历史内容输入信息与标注内容输入信息之间的第一损失值；利用历史原图和标注类型输入信息，对类型识别模型进行训练；训练过程中，利用第二损失函数计算类型识别模型基于历史原图输出的历史类型输入信息与标注类型输入信息之间的第二损失值；利用历史原图、标注输入信息，对图片生成模型进行训练；所述标注输入信息包括标注类型输入信息和标注内容输入信息；训练过程中，利用第三损失函数计算图片生成模型基于历史输入信息生成的历史图片与历史原图之间的第三损失值；所述内容识别模型、所述类型识别模型、所述图片生成模型合并训练，当第一损失值、第二损失值、第三损失值均满足收敛条件时，则输出训练好的内容识别模型、类型识别模型、图片生成模型。9.根据权利要求8所述的装置，其特征在于，还包括：人像识别模块，用于在将待处理图片输入内容识别模型前，识别待处理图片中是否包含人像，若是，则触发图像分割模块工作，若否，则将待处理图片发送给模型识别模块的内容识别模型；图像分割模块，用于将待处理图片分割为人像图片和不包含人像的待处理图片，之后将不包含人像的待处理图片发送给模型识别模块的内容识别模型；所述第一处理模块，在所述将文件类型输入信息和内容输入信息输入图片生成模型，输出符合第一图像大小阈值的处理后图片后，还用于当判断处理后图片所对应的待处理图片进行过分割处理时，根据不包含人像的待处理图片与处理后图片之间的像素比，将分割得到的人像图片进行转化，得到压缩后的人像图片；之后，将不包含人像的待处理图片所对应的处理后图片与压缩后的人像图片进行叠加，生成新的待处理图片并发送给所述第二处理模块。10.根据权利要求8所述的装置，其特征在于，还包括：图片存储库，用于将符合第二图像大小阈值的压缩图片、符合第一图像大小阈值的处理后图片与待处理图片一一对应存储。
说明书desc
技术领域本说明书的一个或多个实施例涉及图片处理技术领域，特别的涉及一种图片压缩方法及装置。背景技术随着互联网技术和图像处理技术的发展，图像处理技术的应用场景也越来越多。图片附件上传和查看功能经常涉及到图像的处理。现有图像压缩处理效果不佳，由于要符合上传文件大小要求，压缩后图像的质量清晰度不够高。若采用高精度的图像压缩算法，则对终端设备处理能力有一定要求。也就是说，当终端设备处理性能不够高时，终端设备在执行图像压缩时，会影响其他处理任务的处理效率。发明内容本说明书一个或多个实施例描述了一种图片压缩方法及装置，能够实现图片较高质量的压缩。第一方面，本说明书实施例提供了一种图片压缩方法，包括：将待处理图片输入内容识别模型，输出待处理图片的内容输入信息，将待处理图片输入类型识别模型，输出待处理图片的文件类型输入信息；将文件类型输入信息和内容输入信息输入图片生成模型，输出符合第一图像大小阈值的处理后图片；根据处理后图片的文件类型，进行压缩，以得到符合第二图像大小阈值的压缩图片；其中，所述第二图像大小阈值＜所述第一图像大小阈值＜待处理图片的原始图像大小阈值；所述内容识别模型通过如下训练过程获得：利用历史原图和标注内容输入信息，对内容识别模型进行训练；训练过程中，利用第一损失函数计算内容识别模型基于历史原图输出的历史内容输入信息与标注内容输入信息之间的第一损失值；所述类型识别模型通过如下训练过程获得：利用历史原图和标注类型输入信息，对类型识别模型进行训练；训练过程中，利用第二损失函数计算类型识别模型基于历史原图输出的历史类型输入信息与标注类型输入信息之间的第二损失值；所述图片生成模型通过如下训练过程获得：利用历史原图、标注输入信息，对图片生成模型进行训练；所述标注输入信息包括标注类型输入信息和标注内容输入信息；训练过程中，利用第三损失函数计算图片生成模型基于历史输入信息生成的历史图片与历史原图之间的第三损失值;所述内容识别模型、所述类型识别模型、所述图片生成模型合并训练，当第一损失值、第二损失值、第三损失值均满足收敛条件时，则输出训练好的内容识别模型、类型识别模型、图片生成模型。在一些实施例中，所述内容识别模型、所述类型识别模型、所述图片生成模型配置于服务器端；所述方法在服务器端执行，将压缩图片发送给终端设备；或者，所述待处理图片的处理流程在服务器端执行，所述处理后图片的压缩流程在终端设备端执行。在一些实施例中，在将待处理图片输入内容识别模型前，识别待处理图片中是否包含图形，若是，当图形为圆形或椭圆形或长方形或正方形，且图形为红色或蓝色时，从待处理图片中截取该图形所在区域并形成待处理图片的附件图；所述附件图与对应待处理图片进行关联标记；若否，则将待处理图片输入内容识别模型。在一些实施例中，方法还包括：在所述将待处理图片输入内容识别模型前，识别待处理图片中是否包含人像，若是，则将待处理图片分割为人像图片和不包含人像的待处理图片，之后将不包含人像的待处理图片输入内容识别模型；若否，则将待处理图片输入内容识别模型；在所述将文件类型输入信息和内容输入信息输入图片生成模型，输出符合第一图像大小阈值的处理后图片后，当判断处理后图片所对应的待处理图片进行过分割处理时，根据不包含人像的待处理图片与处理后图片之间的像素比，将分割得到的人像图片进行转化，得到压缩后的人像图片；之后，将不包含人像的待处理图片所对应的处理后图片与压缩后的人像图片进行叠加，生成新的待处理图片；所述新的待处理图片进行根据文件类型压缩的压缩流程。在一些实施例中，方法还包括：在识别获得人像时，对人像所在区域进行背景填充，并识别获得人像所在区域位于整个待处理图片上的空间位置；在进行图片叠加流程时，根据不包含人像的待处理图片与处理后图片之间的像素比，将人像所在区域位于整个待处理图片上的空间位置转化为人像图片叠加到不包含人像的待处理图片所对应的处理后图片上的空间位置。在一些实施例中，方法还包括：在识别获得人像时，对人像所在区域进行空白填充；在进行图片叠加流程时，获取处理后图片中的空白区域，将压缩后的人像图片叠加到空白区域。在一些实施例中，所述根据处理后图片的文件类型，进行压缩，以得到符合第二图像大小阈值的压缩图片，包括：基于文件类型输入信息，从文件类型库中获取对应文件类型的压缩基数和第二图像大小阈值；基于压缩基数、第二图像大小阈值和第一图像大小阈值，计算压缩质量；基于压缩质量和压缩基数，进行图片压缩。在一些实施例中，方法还包括：在所述根据处理后图片的文件类型，进行压缩，以得到符合第二图像大小阈值的压缩图片之后，将符合第二图像大小阈值的压缩图片、符合第一图像大小阈值的处理后图片与待处理图片一一对应存储在图片存储库内。第二方面，本说明书实施例提供了一种图片压缩装置，包括：模型识别模块，用于将待处理图片输入内容识别模型，输出待处理图片的内容输入信息，将待处理图片输入类型识别模型，输出待处理图片的文件类型输入信息；第一处理模块，用于将文件类型输入信息和内容输入信息输入图片生成模型，输出符合第一图像大小阈值的处理后图片；第二处理模块，用于根据处理后图片的文件类型，进行压缩，以得到符合第二图像大小阈值的压缩图片；其中，所述第二图像大小阈值＜所述第一图像大小阈值＜待处理图片的原始图像大小阈值；模型训练模块，用于训练所述内容识别模型、所述类型识别模型、图片生成模型；训练过程如下：利用历史原图和标注内容输入信息，对内容识别模型进行训练；训练过程中，利用第一损失函数计算内容识别模型基于历史原图输出的历史内容输入信息与标注内容输入信息之间的第一损失值；利用历史原图和标注类型输入信息，对类型识别模型进行训练；训练过程中，利用第二损失函数计算类型识别模型基于历史原图输出的历史类型输入信息与标注类型输入信息之间的第二损失值；利用历史原图、标注输入信息，对图片生成模型进行训练；所述标注输入信息包括标注类型输入信息和标注内容输入信息；训练过程中，利用第三损失函数计算图片生成模型基于历史输入信息生成的历史图片与历史原图之间的第三损失值；所述内容识别模型、所述类型识别模型、所述图片生成模型合并训练，当第一损失值、第二损失值、第三损失值均满足收敛条件时，则输出训练好的内容识别模型、类型识别模型、图片生成模型。在一些实施例中，所述装置还包括：人像识别模块，用于在将待处理图片输入内容识别模型前，识别待处理图片中是否包含人像，若是，则触发图像分割模块工作，若否，则将待处理图片发送给模型识别模块的内容识别模型；图像分割模块，用于将待处理图片分割为人像图片和不包含人像的待处理图片，之后将不包含人像的待处理图片发送给模型识别模块的内容识别模型；所述第一处理模块，在所述将文件类型输入信息和内容输入信息输入图片生成模型，输出符合第一图像大小阈值的处理后图片后，还用于当判断处理后图片所对应的待处理图片进行过分割处理时，根据不包含人像的待处理图片与处理后图片之间的像素比，将分割得到的人像图片进行转化，得到压缩后的人像图片；之后，将不包含人像的待处理图片所对应的处理后图片与压缩后的人像图片进行叠加，生成新的待处理图片并发送给所述第二处理模块。在一些实施例中，所述装置还包括：图片存储库，用于将符合第二图像大小阈值的压缩图片、符合第一图像大小阈值的处理后图片与待处理图片一一对应存储。本说明书一些实施例提供的技术方案带来的有益效果至少包括：在本说明书一个或多个实施例中，利用识别模型对待处理图片进行内容和类型两方面信息的识别，并基于内容和类型两方面信息，利用图像生成模型，生成符合第一图像大小阈值的图片；此过程中利用AI模型对原图像大小的待处理图片进行信息提取以生成与待处理图片内容和类型一致的较小图像大小的处理后图片，生成的图片不仅尺寸进行了缩小同时还原了原图像的所有信息；进一步，对生成的图片以第二图像大小阈值为目标进行压缩，无需复杂高精度的压缩方法实现，只需要简单压缩实现即可；同时两次递进式压缩方式，可提高图像压缩精度；另外，本说明书实施例压缩方法可全程在服务器端执行，或将两次压缩分别在服务器端和终端设备处执行，大大提高了终端设备处理性能。附图说明为了更清楚地说明本说明书实施例中的技术方案，下面将对实施例中所需使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本说明书的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本说明书实施例提供的一种图片处理方法在实际应用场景下的使用示意图；图2为本说明书实施例提供的一种图片处理方法的流程图；图3为本说明书实施例提供的一种图片处理装置的结构框图。具体实施方式下面将结合本说明书实施例中的附图，对本说明书实施例中的技术方案进行清楚、完整地描述。本发明中的说明书和权利要求书及上述附图中的术语“第一”、“第二”、“第三”等是用于区别不同对象，而不是用于描述特定顺序。此外，术语“包括”和“具有”以及它们任何变形，意图在于覆盖不排他的包含。例如包含了一系列步骤或单元的过程、方法、系统、产品或设备没有限定于已列出的步骤或单元，而是可选地还包括没有列出的步骤或单元，或可选地还包括对于这些过程、方法、产品或设备固有的其他步骤或单元。本说明书实施例提出了一种图片压缩方法，利用配置于服务器的模型采集图片信息并生成尺寸较小的图片，之后进行简单压缩，在不占用终端设备大量计算资源下，获得小尺寸且图像质量高的压缩图片。请参阅图2，图2示出了本说明书实施例提供的一种图片压缩方法的流程图。如图2所示，该图片压缩方法具体可以包括以下步骤：步骤102，将待处理图片输入内容识别模型，输出待处理图片的内容输入信息，将待处理图片输入类型识别模型，输出待处理图片的文件类型输入信息；步骤104，将文件类型输入信息和内容输入信息输入图片生成模型，输出符合第一图像大小阈值的处理后图片；步骤106，根据处理后图片的文件类型，进行压缩，以得到符合第二图像大小阈值的压缩图片；其中，所述第二图像大小阈值＜所述第一图像大小阈值＜待处理图片的原始图像大小阈值。本说明书实施例的方法可在服务器端执行，服务器端接收从终端设备端上传的待处理图片并利用配置在服务器端的内容识别模型、类型识别模型、图片生成模型对待处理图片进行小尺寸图片转化，之后基于文件类型对图片进行简单压缩。在服务器完成上述流程后，将压缩图片返回给终端设备，终端设备存储压缩图片并显示给用户。本说明书实施例的方法可分成两个环节，分别在服务器端和终端设备端执行。具体地，步骤102~步骤104在服务器端执行，步骤106在终端设备端执行。服务器端接收从终端设备端上传的待处理图片并利用配置在服务器端的内容识别模型、类型识别模型、图片生成模型对待处理图片进行小尺寸图片转化。之后，将处理好的图片发送给终端设备，终端设备基于文件类型对处理后图片进行简单压缩，将获得的压缩图片存储并显示给用户。图1示出了服务器100与终端设备200之间的通信架构，本说明书实施例的方法在此架构下完成上述流程。在详细描述流程前，先对用到的模型进行说明。所述内容识别模型、所述类型识别模型、所述图片生成模型配置在服务器端。上述模型可在投入本说明书实施例的压缩方法前训练完毕，可在服务器处训练完成。所述训练基于包括历史原图、标注输入信息的训练样本进行。所述历史原图包括内容信息和类型信息。一般上传的图片为各类文件或证件。所述图片的内容信息主要指图片中的文字信息，所述类型信息主要指图片所属哪一个文件或证件，即文件名或证件名。所述标注输入信息包括标注内容输入信息、标注类型输入信息。标注输入信息可通过人工或机器通过关键字段的方式进行标记。例如，当图片为身份证时，标注内容输入信息为姓名张三，性别男，出生年月1990年10月2日，居住地址杭州市开发区东方小区1单元X幢102室，身份证号33XXXXXXXXXXXX0001；标注类型输入信息为身份证。又例如，当图片为房产证时，标注内容输入信息为房产证编号000102X，产权人张三，房产地址杭州市开发区东方小区1单元X幢102室，房屋建筑面积102.3平，产权证时间2011年1月2日；标注类型输入信息为房产证。所述内容识别模型通过如下训练过程获得：利用历史原图和标注内容输入信息，对内容识别模型进行训练；训练过程中，利用第一损失函数计算内容识别模型基于历史原图输出的历史内容输入信息与标注内容输入信息之间的第一损失值；所述类型识别模型通过如下训练过程获得：利用历史原图和标注类型输入信息，对类型识别模型进行训练；训练过程中，利用第二损失函数计算类型识别模型基于历史原图输出的历史类型输入信息与标注类型输入信息之间的第二损失值；所述图片生成模型通过如下训练过程获得：用历史原图、标注输入信息，对图片生成模型进行训练；所述标注输入信息包括标注类型输入信息和标注内容输入信息；训练过程中，利用第三损失函数计算图片生成模型基于历史输入信息生成的历史图片与历史原图之间的第三损失值；所述内容识别模型、所述类型识别模型、所述图片生成模型合并训练，当第一损失值、第二损失值、第三损失值均满足收敛条件时，则输出训练好的内容识别模型、类型识别模型、图片生成模型。其中，内容识别模型和类型识别模型可采用反解模型，如caption模型。输入历史原图至内容识别模型，内容识别模型输出历史内容输入信息。输入历史原图至类型识别模型，类型识别模型输出历史类型输入信息。图片生成模型为AIGC模型，用于基于输入信息生成符合描述的图片。输入历史输入信息至图片生成模型，图片生成模型生成历史图片。所述第一损失函数、所述第二损失函数、所述第三损失函数可选用距离损失函数。利用损失函数计算损失值，该损失值用于表征模型输出的预测值与标注的实际值之间的差异程度。当损失值趋近于零时，则训练达到收敛，否则继续更新权重参数进行训练，直至收敛。第一、第二损失函数主要用于计算预测的输入信息与标注的输入信息之间的损失值，第三损失函数主要用于计算预测的图片与原图之间的损失值。接下来，将详细说明各个步骤。在步骤102中，利用已训练好的内容识别模型和类型识别模型对待处理图片进行识别。待处理图片分别输入内容识别模型和类型识别模型，内容识别模型输出内容输入信息，类型识别模型输出文件类型输入信息。在步骤104中，利用已训练好的图片生成模型进行图片生成。将步骤102获得的内容输入信息和文件类型输入信息作为prompt输入到图片生成模型，图片生成模型生成比待处理图的图像大小小的处理后图片。所述处理后图片大程度还原了待处理图片的内容和类型信息。值得注意的是，所述处理后图片并不是1：1还原待处理图片的信息，即处理后图片并非原图。处理后图片还需通过步骤106进行压缩处理，最终在终端设备处显示。上述处理目的，能使压缩后的图片质量较高且不影响终端设备处理速度之外，所述压缩图片因不是原件而无法被不法分子在终端设备处二次利用。为便于追溯图片的真实性，本说明书实施例方法还包括：将符合第二图像大小阈值的压缩图片、符合第一图像大小阈值的处理后图片与待处理图片一一对应存储在图片存储库内。所述图片存储库可配置在服务器端，其访问权限仅限后台管理员访问。这样，一方面可追溯图片的真实性，一方面不占用终端设备的计算资源。在步骤106中，由于不同的文件类型，若采用同一标准去压缩，则可能导致具有较多内容信息的文件被压缩后，无法清楚浏览。为此，根据文件类型进行符合该文件压缩后质量要求的压缩。具体地，所述根据处理后图片的文件类型，进行压缩，以得到符合第二图像大小阈值的压缩图片，包括：步骤1061，基于文件类型输入信息，从文件类型库中获取对应文件类型的压缩基数和第二图像大小阈值；获取从步骤102得到的文件类型输入信息。所述文件类型库可配置在服务器，当步骤106在终端设备执行时，可调用服务器中的文件类型库执行步骤1061，或者将获取指令发送给服务器，服务器依据该获取指令从文件类型库中，基于文件类型输入信息，获取相关信息，之后反馈给终端设备。所述文件类型库还可配置在终端设备，终端设备执行步骤1061。所述文件类型库按照文件类型、压缩基数、第二图像大小阈值的形式一一对应存储。所述文件类型按照文件名区别，例如，文件类型可以为身份证、房产证等。文件类型输入信息一般为文件名。为此，无需再对待处理图片进行字段识别来判断文件类型，直接可利用步骤102得到文件类型输入信息即可确定文件类型。每个文件类型具有特定的压缩基数和第二图像大小阈值。步骤1063，基于压缩基数和第二图像大小阈值，计算压缩质量；先利用公式，计算压缩的质量等级。假定质量等级分为100个等级。Rn为压缩的质量等级，n为质量等级对应的编号，S为处理后图片的大小，W为该文件类型下的第二图像大小阈值中的宽像素值，H为该文件类型下的第二图像大小阈值中的长像素值。接着，利用公式，计算压缩质量q。步骤1065，基于压缩质量和压缩基数，进行图片压缩。利用图像处理工具类，如Thumbnails类对处理图片进行压缩。本说明书实施例方法利用步骤102~步骤104，对待处理图片进行无差异转化处理，即任何一个文件类型转化为第一图像大小阈值后，其图片质量较好。此图片新生成的过程，可去除原图中不必要的信息以及噪声。之后，利用步骤106根据文件类型，进行针对性的压缩。值得注意的是，本说明书实施例涉及对文件图片新生成和压缩，旨在形成清晰质量且不占用终端资源的的图片，供用户审阅信息。该压缩图片在具体手续办理时仅做参考，真实文件可从服务器获取。考虑到有些文件除了包含文字信息外，还包含图形信息，例如人像照片、公章、其他背景图形等。考虑到其他背景图形对于展示文件信息的意义不大，且背景图形往往与对应文件出具单位相关，无法在标准文件中进行统一示出。为此，本说明书实施例方法并未考虑其他背景图形。针对其他图形信息，本说明书实施例方法进行特定处理。当图形信息为公章时，本说明书实施例方法还包括：在将待处理图片输入内容识别模型前，识别待处理图片中是否包含图形，若是，当图形为圆形或椭圆形或长方形或正方形，且图形为红色或蓝色时，从待处理图片中截取该图形所在区域并形成待处理图片的附件图，所述附件图与对应待处理图片进行关联标记；之后将待处理图片输入内容识别模型；若否，则将待处理图片输入内容识别模型。上述图形识别过程在服务器处执行。当服务器执行完步骤106后，对该附件图进行剪裁、压缩处理，以获得只包含公章图形的压缩图片。压缩附件图随同压缩图反馈给终端设备并在终端设备显示。或者，当服务器执行完步骤104后，对该附件图进行剪裁、压缩处理，以获得只包含公章图形的压缩图片。压缩附件图随同处理后图片反馈给终端设备，终端设备执行步骤106。或者，当服务器执行完步骤104后，将附件图随同处理后图片发送给终端设备，终端设备执行步骤106，还对该附件图进行剪裁、压缩处理，以获得只包含公章图形的压缩图片。其中，所述附件图、压缩附件图对应存储在图片存储库内的待处理图片处。步骤106处理获得的压缩图片和压缩附件图可以以主件和附件的形式在终端设备处存储并显示，也可以利用图片处理工具，将压缩附件图与压缩图片进行叠加合成。当图形信息为人像照片时，本说明书实施例方法还包括：在所述将待处理图片输入内容识别模型前，识别待处理图片中是否包含人像，若是，则将待处理图片分割为人像图片和不包含人像的待处理图片，之后将不包含人像的待处理图片输入内容识别模型；若否，则将待处理图片输入内容识别模型。所述待处理图片分割后的人像图片和不包含人像的待处理图片一一对应存储在图片存储库中。在此示例下，在执行步骤104之后且在步骤106之前，方法还包括：当判断处理后图片所对应的待处理图片进行过分割处理时，根据不包含人像的待处理图片与处理后图片之间的像素比，将分割得到的人像图片进行转化，得到压缩后的人像图片；之后，将不包含人像的待处理图片所对应的处理后图片与压缩后的人像图片进行叠加，生成新的待处理图片。步骤106对新的待处理图片进行压缩。其中，在一实施方式下，上述识别待处理图片中包含人像时的流程为：在识别获得人像时，对人像所在区域进行背景填充，并识别获得人像所在区域位于整个待处理图片上的空间位置。在进行图片叠加流程时，根据不包含人像的待处理图片与处理后图片之间的像素比，将人像所在区域位于整个待处理图片上的空间位置转化为人像图片叠加到不包含人像的待处理图片所对应的处理后图片上的空间位置。在另一实施方式下，上述识别待处理图片中包含人像时的流程为：在识别获得人像时，对人像所在区域进行空白填充。在进行图片叠加流程时，获取处理后图片中的空白区域，将压缩后的人像图片叠加到空白区域。其中，所述分割处理的判断可查询图片存储库内的信息确定，当待处理图片对应条目下还存储有人像图片和不包含人像的待处理图片时，则确定该待处理图片进行过分割；或者，在图片存储库内对进行过分割处理的待处理图片进行标记，当识别到该待处理图片具有分割标记时，则确定该待处理图片进行过分割。请参阅图3示出的本说明书实施例的一种图片压缩装置的结构示意图。如图3所示，该图片压缩装置1000至少可以包括模型识别模块1001、第一处理模块1002、第二处理模块1003，其中：所述模型识别模块1001，用于将待处理图片输入内容识别模型，输出待处理图片的内容输入信息，将待处理图片输入类型识别模型，输出待处理图片的文件类型输入信息；所述第一处理模块1002，用于将文件类型输入信息和内容输入信息输入图片生成模型，输出符合第一图像大小阈值的处理后图片；所述第二处理模块1003，用于根据处理后图片的文件类型，进行压缩，以得到符合第二图像大小阈值的压缩图片；其中，所述第二图像大小阈值＜所述第一图像大小阈值＜待处理图片的原始图像大小阈值。本说明书实施例的装置利用配置于服务器的模型采集图片信息并生成尺寸较小的图片，之后进行简单压缩，在不占用终端设备大量计算资源下，获得小尺寸且图像质量高的压缩图片。本说明书实施例的装置还包括模型训练装置，用于训练所述内容识别模型、所述类型识别模型、图片生成模型；训练过程如下：利用历史原图和标注内容输入信息，对内容识别模型进行训练；训练过程中，利用第一损失函数计算内容识别模型基于历史原图输出的历史内容输入信息与标注内容输入信息之间的第一损失值；利用历史原图和标注类型输入信息，对类型识别模型进行训练；训练过程中，利用第二损失函数计算类型识别模型基于历史原图输出的历史类型输入信息与标注类型输入信息之间的第二损失值；利用历史原图、标注输入信息，对图片生成模型进行训练；所述标注输入信息包括标注类型输入信息和标注内容输入信息；训练过程中，利用第三损失函数计算图片生成模型基于历史输入信息生成的历史图片与历史原图之间的第三损失值；所述内容识别模型、所述类型识别模型、所述图片生成模型合并训练，当第一损失值、第二损失值、第三损失值均满足收敛条件时，则输出训练好的内容识别模型、类型识别模型、图片生成模型。所述内容识别模型、所述类型识别模型、所述图片生成模型配置在服务器端。上述模型可在投入本说明书实施例的压缩方法前训练完毕，可在服务器处训练完成。所述训练基于包括历史原图、标注输入信息的训练样本进行。所述历史原图包括内容信息和类型信息。一般上传的图片为各类文件或证件。所述图片的内容信息主要指图片中的文字信息，所述类型信息主要指图片所属哪一个文件或证件，即文件名或证件名。所述标注输入信息包括标注内容输入信息、标注类型输入信息。标注输入信息可通过人工或机器通过关键字段的方式进行标记。内容识别模型和类型识别模型可采用反解模型，如caption模型。输入历史原图至内容识别模型，内容识别模型输出历史内容输入信息。输入历史原图至类型识别模型，类型识别模型输出历史类型输入信息。图片生成模型为AIGC模型，用于基于输入信息生成符合描述的图片。输入历史输入信息至图片生成模型，图片生成模型生成历史图片。所述第一损失函数、所述第二损失函数、所述第三损失函数可选用距离损失函数。利用损失函数计算损失值，该损失值用于表征模型输出的预测值与标注的实际值之间的差异程度。当损失值趋近于零时，则训练达到收敛，否则继续更新权重参数进行训练，直至收敛。第一、第二损失函数主要用于计算预测的输入信息与标注的输入信息之间的损失值，第三损失函数主要用于计算预测的图片与原图之间的损失值。本说明书实施例的装置还包括存储模块，配置有图片存储库和文件类型库。所述图片存储库用于存储待处理图片、符合第一图像大小阈值的处理后图片、符合第二图像大小阈值的压缩图片。所述文件类型库存储文件类型、压缩基数、第二图像大小阈值。本说明书实施例的装置还包括人像识别模块和图像分割模块。所述人像识别模块，用于在将待处理图片输入内容识别模型前，识别待处理图片中是否包含人像，若是，则触发图像分割模块工作，若否，则将待处理图片发送给模型识别模块的内容识别模型；所述图像分割模块，用于将待处理图片分割为人像图片和不包含人像的待处理图片，之后将不包含人像的待处理图片发送给模型识别模块的内容识别模型。所述第一处理模块，在所述将文件类型输入信息和内容输入信息输入图片生成模型，输出符合第一图像大小阈值的处理后图片后，还用于当判断处理后图片所对应的待处理图片进行过分割处理时，根据不包含人像的待处理图片与处理后图片之间的像素比，将分割得到的人像图片进行转化，得到压缩后的人像图片；之后，将不包含人像的待处理图片所对应的处理后图片与压缩后的人像图片进行叠加，生成新的待处理图片并发送给所述第二处理模块。本说明书实施例的装置还包括图形识别模块，用于在将待处理图片输入内容识别模型前，识别待处理图片中是否包含图形，若是，当图形为圆形或椭圆形或长方形或正方形，且图形为红色或蓝色时，从待处理图片中截取该图形所在区域并形成待处理图片的附件图；所述附件图与对应待处理图片进行关联标记；之后，将待处理图片输入内容识别模型；若否，则将待处理图片输入内容识别模型。以上所述的实施例仅仅是本发明的优选实施例方式进行描述，并非对本发明的范围进行限定，在不脱离本发明的设计精神的前提下，本领域普通技术人员对本发明的技术方案作出的各种变形及改进，均应落入本发明的权利要求书确定的保护范围内。
