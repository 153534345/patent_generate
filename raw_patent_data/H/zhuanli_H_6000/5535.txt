标题title
基于强化学习的锂电池智能充电控制方法
摘要abst
本发明涉及锂电池充电技术领域，具体涉及一种基于强化学习的锂电池智能充电控制方法，包括：S1.分析锂电池的结构，建立电池模型；S2.对状态变量、策略网络和价值网络进行初始化，并设置奖励函数；S3.将状态变量输入至策略网络中迭代训练，得到目标策略网络模型；S4.将待充电锂电池的初始状态输入目标策略网络模型，获取充电策略。本发明的锂电池智能充电控制方法，能够针对不同初始状态输出适配的充电策略，也能够满足在指定时间下的充电，泛化性较强；同时，采用本充电控制方法进行充电能够减小极化电压并且降低电池内温，从而能够延长锂电池的使用寿命，增大电池的充放电循环次数。
权利要求书clms
1.一种基于强化学习的锂电池智能充电控制方法，其特征在于，依次包括如下步骤：S1.分析锂电池的结构，建立锂电池的等效电路模型和热传递模型，并建立状态转移方程；S2.对状态变量进行初始化，所述状态变量包括荷电状态、极化电压、电池内温、电池表温、输出电压和充电时间；对策略网络和价值网络进行初始化，并设置奖励函数；S3.将状态变量输入至策略网络中，从策略网络的输出结果中采样动作，利用价值网络对策略网络的动作进行评价，更新状态转移方程，利用奖励函数分别计算策略网络的损失函数和价值网络的损失函数，根据损失函数更新网络参数，循环操作直至得到目标策略网络模型；S4.将待充电锂电池的初始状态输入目标策略网络模型，获取充电策略。2.根据权利要求1所述的基于强化学习的锂电池智能充电控制方法，其特征在于，步骤S2中，所述奖励函数为温度奖励函数、充电速度奖励函数和温升速度奖励函数之和。3.根据权利要求2所述的基于强化学习的锂电池智能充电控制方法，其特征在于，t时刻的温度奖励函数rtemt为：；其中，Temmax表示温度的上限值，Tem表示t时刻的温度；t时刻的充电速度奖励函数rst为：；其中，soc表示t时刻的荷电状态；t时刻的温升速度奖励函数rtspeedt为：；t时刻的奖励函数rewardt为：。4.根据权利要求3所述的基于强化学习的锂电池智能充电控制方法，其特征在于，步骤S3中，策略网络的损失函数a_loss为：；其中，表示重要性权值，/＞表示优势函数，ε表示截断因子；价值网络的损失函数c_loss为：；的计算公式如下：；其中，θ表示新策略网络的参数，θold表示旧策略网络的参数，at表示t时刻的动作电流，st表示t时刻的状态量；的计算公式如下：；其中，γ表示折扣因子，表示t时刻的价值函数。5.根据权利要求1至4任一项所述的基于强化学习的锂电池智能充电控制方法，其特征在于，步骤S3中，策略网络的动作采样过程如下：策略网络输出均值和方差，根据所述均值和方差生成正态分布，然后从所述正态分布中脉冲采样动作。6.根据权利要求5所述的基于强化学习的锂电池智能充电控制方法，其特征在于，所述脉冲采样动作的时间间隔为5s。7.根据权利要求1至4任一项所述的基于强化学习的锂电池智能充电控制方法，其特征在于，步骤S3中，通过梯度的反向传播以及梯度下降完成网络参数的更新。
说明书desc
技术领域本发明涉及锂电池充电技术领域，尤其涉及一种基于强化学习的锂电池智能充电控制方法。背景技术“双碳”目标的提出，促进了风能、太阳能等新能源的发展，而新能源发电的稳定离不开储能设备。电动汽车也需要储能设备才能正常运转，而电动汽车的里程焦虑严重制约了电动汽车的发展。锂电池由于其体积小、能量密度大等优点被广泛应用于新能源发电和电动汽车中，因此，确保锂电池安全快速地充电成为了当前的研究热点。现有的锂电池充电方法存在如下缺陷：第一，对于不同的电池初始状态以及充电要求皆采用同样的充电策略，泛化性差，不利于电池的使用和电池寿命的保障；第二，在电池充电过程中，极化电压较高，使得锂电池内部的电解液反应加剧，从而使得析气现象严重，造成极板腐蚀加剧，进而使得电池的寿命降低；第三，在电解液反应的过程中，会散发较大的热量，导致电池内部温升较大，不利于电池的使用。发明内容为克服现有锂电池充电方法存在的泛化性差、极化电压较高、电池内部温升较高的技术缺陷，本发明提供了一种基于强化学习的锂电池智能充电控制方法。本发明提供的基于强化学习的锂电池智能充电控制方法，依次包括如下步骤：S1.分析锂电池的结构，建立锂电池的等效电路模型和热传递模型，并建立状态转移方程；S2.对状态变量进行初始化，所述状态变量包括荷电状态、极化电压、电池内温、电池表温、输出电压和充电时间；对策略网络和价值网络进行初始化，并设置奖励函数；S3. 将状态变量输入至策略网络中，从策略网络的输出结果中采样动作，利用价值网络对策略网络的动作进行评价，更新状态转移方程，利用奖励函数分别计算策略网络的损失函数和价值网络的损失函数，根据损失函数更新网络参数，循环操作直至得到目标策略网络模型；S4.将待充电锂电池的初始状态输入目标策略网络模型，获取充电策略。可选的，步骤S2中，所述奖励函数为温度奖励函数、充电速度奖励函数和温升速度奖励函数之和。可选的，t时刻的温度奖励函数rtemt为：；其中，Temmax表示温度的上限值，Tem表示t时刻的温度；t时刻的充电速度奖励函数rst为：；其中，soc表示t时刻的荷电状态；t时刻的温升速度奖励函数rtspeedt为：；t时刻的奖励函数rewardt为：。可选的，步骤S3中，策略网络的损失函数a_loss为：；其中，表示重要性权值，表示优势函数，ε表示截断因子；价值网络的损失函数c_loss为：；的计算公式如下：；其中，θ表示新策略网络的参数，θold表示旧策略网络的参数，at表示t时刻的动作电流，st表示t时刻的状态量；的计算公式如下：；其中，γ表示折扣因子，表示t时刻的价值函数。可选的，步骤S3中，策略网络的动作采样过程如下：策略网络输出均值和方差，根据所述均值和方差生成正态分布，然后从所述正态分布中脉冲采样动作。可选的，所述脉冲采样动作的时间间隔为5s。可选的，步骤S3中，通过梯度的反向传播以及梯度下降完成网络参数的更新。本发明提供的技术方案与现有技术相比具有如下优点：本发明提供的基于强化学习的锂电池智能充电控制方法，通过优化后的策略网络，一方面能够针对不同初始状态输出适配的充电策略，另一方面也能够满足在指定时间下的充电，泛化性较强；同时，采用本充电控制方法进行充电能够减小极化电压并且降低电池内温，从而能够延长锂电池的使用寿命，增大电池的充放电循环次数。附图说明此处的附图被并入说明书中并构成本说明书的一部分，示出了符合本发明的实施例，并与说明书一起用于解释本发明的原理。为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，对于本领域普通技术人员而言，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1表示本发明实施例中锂电池智能充电控制方法的流程图；图2表示本发明实施例中等效电路模型的示意图；图3表示在工况一下采用本发明实施例锂电池智能充电控制方法进行充电的充电策略示意图；图4表示在工况一下采用本发明实施例锂电池智能充电控制方法进行充电的荷电状态变化曲线图；图5表示在工况一下采用本发明实施例锂电池智能充电控制方法进行充电的极化电压变化曲线图；图6表示在工况一下采用本发明实施例锂电池智能充电控制方法进行充电的电池内温变化曲线图；图7表示在工况一下采用现有锂电池充电控制方法进行充电的充电策略示意图；图8表示在工况一下采用现有锂电池充电控制方法进行充电的荷电状态变化曲线图；图9表示在工况一下采用现有锂电池充电控制方法进行充电的极化电压变化曲线图；图10表示在工况一下采用现有锂电池充电控制方法进行充电的电池内温变化曲线图；图11表示在工况二下采用本发明实施例锂电池智能充电控制方法进行充电的充电策略示意图；图12表示在工况二下采用本发明实施例锂电池智能充电控制方法进行充电的荷电状态变化曲线图；图13表示在工况二下采用本发明实施例锂电池智能充电控制方法进行充电的极化电压变化曲线图；图14表示在工况二下采用本发明实施例锂电池智能充电控制方法进行充电的电池内温变化曲线图；图15表示在工况二下采用现有锂电池充电控制方法进行充电的充电策略示意图；图16表示在工况二下采用现有锂电池充电控制方法进行充电的荷电状态变化曲线图；图17表示在工况二下采用现有锂电池充电控制方法进行充电的极化电压变化曲线图；图18表示在工况二下采用现有锂电池充电控制方法进行充电的电池内温变化曲线图。具体实施方式为了能够更清楚地理解本发明的上述目的、特征和优点，下面将对本发明的方案进行进一步描述。需要说明的是，在不冲突的情况下，本发明的实施例及实施例中的特征可以相互组合。在下面的描述中阐述了很多具体细节以便于充分理解本发明，但本发明还可以采用其他不同于在此描述的方式来实施；显然，说明书中的实施例只是本发明的一部分实施例，而不是全部的实施例。下面结合附图对本发明的具体实施例进行详细说明。参照图1，本实施例提供一种基于强化学习的锂电池智能充电控制方法，包括步骤S1至S4。本实施例中，采用近端策略优化算法对锂电池的充电过程加以控制。S1.分析锂电池的结构，建立锂电池的等效电路模型和热传递模型，并建立状态转移方程。容易理解的，锂电池由正极、隔膜、负极、电解液和电池外壳组成。以正极采用磷酸铁锂、负极采用石墨为例：充电时，磷酸铁锂晶体表面存在大量的Li+，这些Li+首先迁移至磷酸铁锂晶体表面，接着在电场力作用下依次通过电解液、隔膜、电解液到达石墨晶体表面，最终进入石墨晶格中。在此过程中，正极中的电子也同时发生变化，首先经过导电体到达正极的铝箔集电极，接着依次通过正极耳、正极极柱、外电路、负极极柱、负极耳、负极铜箔集流体、导电体，最终到达石墨负极，使得石墨负极的电荷状态重新恢复至平衡状态。由于磷酸铁锂晶格本身嵌着Li+，Li+离开后则变为磷酸铁。如图2所示，本实施例所建立的等效电路模型为一阶RC等效电路图，根据基尔霍夫定律，得出本等效电路模型的表达式为：；其中，soc表示t时刻的荷电状态，i表示t时刻的电流，Ts表示采样时间，Cn表示电池容量，up表示t时刻的极化电压，v表示t时刻的输出电压，OCV表示开路电压，R代表欧姆内阻，a1和b1为参数；；其中，tin表示t时刻的电池内温；；其中，R1和C1分别为等效电路模型中的电阻和电容，用于捕捉电池的松弛过程，即描述电池充放电过程中电压的渐变特性，反映充电过程中的极化现象。需要说明的是，电池内外热传递包括热传导、热对流和热辐射，但以热传导为主要形式，所以本实施例将热传导作为电池内部与电池外壳之间以及电池外壳与环境之间的唯一热传递方式，并且在电池内温和电池表温皆是均匀的前提条件下，建立简化的热传递模型，其表达式为：；其中，C1、C2分别表示电池内部的热容量和电池外壳的热容量，tin表示电池内温，tf表示电池表温，tamb表示环境温度，Q表示R产生的欧姆热，k1表示电池内部与电池外壳之间的热传导系数，k2表示电池外壳与环境之间的热传导系数。状态转移方程为：；；；其中，action表示动作电流。S2.对状态变量进行初始化，状态变量包括荷电状态、极化电压、电池内温、电池表温、输出电压和充电时间，即：；对策略网络和价值网络进行初始化，并设置奖励函数。本实施例中，荷电状态的初始值为0.1-0.4之间的一个随机数，极化电压的初始值为0，电池内温的初始值为15℃-35℃之间的一个随机温度，电池表温与电池内温取相同的值，输出电压的初始值为3.6V，充电时间的初始值为600s-1800s之间的一个随机时长。本实施例中，奖励函数为温度奖励函数、充电速度奖励函数和温升速度奖励函数之和。具体的，t时刻的温度奖励函数rtemt为：；其中，Temmax表示温度的上限值，Tem表示t时刻的温度；t时刻的充电速度奖励函数rst为：；其中，soc表示t时刻的荷电状态；t时刻的温升速度奖励函数rtspeedt为：；t时刻的奖励函数rewardt为：。S3. 将状态变量输入至策略网络中，从策略网络的输出结果中采样动作，利用价值网络对策略网络的动作进行评价，更新状态转移方程，利用奖励函数分别计算策略网络的损失函数和价值网络的损失函数，根据损失函数更新网络参数，循环操作直至得到目标策略网络模型。本实施例中，策略网络的动作采样过程如下：策略网络输出均值和方差，根据均值和方差生成正态分布，然后从正态分布中脉冲采样动作。具体的，脉冲采样动作的时间间隔为5s。本实施例中，通过梯度的反向传播以及梯度下降完成网络参数的更新。本实施例中，策略网络的损失函数a_loss为：；其中，表示重要性权值，表示优势函数，ε表示截断因子；价值网络的损失函数c_loss为：；的计算公式如下：；其中，θ表示新策略网络的参数，θold表示旧策略网络的参数，at表示t时刻的动作电流，st表示t时刻的状态量；的计算公式如下：；其中，γ表示折扣因子，表示t时刻的价值函数。S4.将待充电锂电池的初始状态输入目标策略网络模型，获取充电策略。下面结合两个具体工况对本实施例锂电池智能充电控制方法的应用及效果进行说明。工况一：荷电状态的初始值为0.2，极化电压的初始值为0，电池内温的初始值和电池表温的初始值皆为15℃，充电时间的初始值为1400s。图3至图6分别表示采用本实施例锂电池智能充电控制方法进行充电的充电策略示意图、荷电状态变化曲线图、极化电压变化曲线图和电池内温变化曲线图；图7至图10分别表示采用现有锂电池智能充电控制方法进行充电的充电策略示意图、荷电状态变化曲线图、极化电压变化曲线图和电池内温变化曲线图。对比图4和图8可以得出，在1400s时，采用本实施例锂电池智能充电控制方法所充电量相对较多；对比图5和图9可以得出，采用本实施例锂电池智能充电控制方法充电时极化电压的值能够控制在相对较小的范围内；对比图6和图10可以得出，采用本实施例锂电池智能充电控制方法充电时电池内温相对较低。工况二：荷电状态的初始值为0.4，极化电压的初始值为0，电池内温的初始值和电池表温的初始值皆为25℃，充电时间的初始值为1200s。图11至图14分别表示采用本实施例锂电池智能充电控制方法进行充电的充电策略示意图、荷电状态变化曲线图、极化电压变化曲线图和电池内温变化曲线图；图15至图18分别表示采用现有锂电池智能充电控制方法进行充电的充电策略示意图、荷电状态变化曲线图、极化电压变化曲线图和电池内温变化曲线图。对比图13和图17可以得出，采用本实施例锂电池智能充电控制方法充电时极化电压的值能够控制在相对较小的范围内；对比图14和图18可以得出，采用本实施例锂电池智能充电控制方法充电时电池内温相对较低。另外，根据图5、图6、图13和图14可以得出，采用本实施例锂电池智能充电控制方法在不同的工况下都能够给出合适的充电策略，使得电池内温和极化电压皆处于合理范围内，泛化性较强。以上所述仅是本发明的具体实施方式，使本领域技术人员能够理解或实现本发明。尽管参照前述各实施例进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分或者全部技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离各实施例技术方案的范围，其均应涵盖权利要求书的保护范围中。
