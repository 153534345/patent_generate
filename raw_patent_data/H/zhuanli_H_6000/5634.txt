标题title
一种跟踪支架系统调试方法
摘要abst
本发明适用于光伏电站跟踪支架技术领域，提供了一种跟踪支架系统调试方法，包括以下步骤：对跟踪支架系统的通讯箱NCU和控制箱TCU进行参数预设置，对每个光伏子阵内的每套光伏跟踪支架阵列进行编号标记处理；获取光伏场区的航拍图像，对航拍图像进行识别处理，获取光伏跟踪支架阵列的边框尺寸及相对位置信息；通过通讯箱NCU分别下发命令给每台控制箱TCU，将每台控制箱控制的光伏跟踪支架阵列分别调整为不同跟踪角度；获取调整角度完成后的光伏跟踪支架阵列的边框尺寸，计算旋转角度；通过旋转角度与通讯箱NCU下发给控制箱TCU的调整角度进行对比，使得光伏跟踪支架阵列与控制箱建立关联关系，如此，能够提升调试效率与准确性。
权利要求书clms
1.一种跟踪支架系统调试方法，其特征在于，所述方法包括以下步骤：对跟踪支架系统的通讯箱NCU和控制箱TCU进行参数预设置，预设置内容包括通讯箱NCU的通讯ID信息和控制箱TCU的控制ID信息，设置同个光伏子阵内通讯箱NCU与控制箱TCU之间的对应关系；获取光伏跟踪支架安装现场的平面图像，对平面图像中每个光伏子阵内的每套光伏跟踪支架阵列进行编号标记处理；在同个光伏子阵内，通过通讯箱NCU下发命令至控制箱TCU，使得光伏子阵内光伏跟踪支架阵列调整角度至放平状态；获取光伏场区的航拍图像，对航拍图像进行识别处理，获取光伏跟踪支架阵列的边框尺寸及相对位置信息；通过通讯箱NCU分别下发命令给每台控制箱TCU，将每台控制箱TCU控制的光伏跟踪支架阵列分别调整为不同跟踪角度；获取调整角度完成后的光伏跟踪支架阵列的边框尺寸，计算旋转角度；通过旋转角度与通讯箱NCU下发给控制箱TCU的调整角度进行对比，确定光伏跟踪支架阵列编号与控制ID信息的对应关系，使得光伏跟踪支架阵列与控制箱TCU建立关联关系。2.根据权利要求1所述的跟踪支架系统调试方法，其特征在于，通过通讯箱NCU下发命令至控制箱TCU，使得光伏子阵内光伏跟踪支架阵列调整角度至放平状态的步骤之后，所述方法还包括：当检测到通讯箱NCU下发命令至控制箱TCU后立即开始计时以得到第一时间；当判断到第一时间等于预设时间间隔，则获取光伏场区的航拍图像，基于所述光伏场区的航拍图像判断多个光伏子阵内的光伏跟踪支架阵列中，是否至少存在一个光伏跟踪支架阵列处于未放平状态；若是，则检测通讯箱NCU与多个控制箱TCU之间对应的多条数据通讯协议是否存在中断；当判断到通讯箱NCU与多个控制箱TCU之间对应的多条数据通讯协议均不存在中断，则基于所述光伏场区的航拍图像，确定处于未放平状态的光伏跟踪支架阵列编号，并进行人工检修；当判断到通讯箱NCU与多个控制箱TCU之间对应的多条数据通讯协议中存在中断，则确认存在中断的数据通讯协议对应的通讯故障控制箱ID，根据通讯故障控制箱ID查找确定对应的通讯故障光伏跟踪支架阵列编号，并从处于未放平状态的光伏跟踪支架阵列编号中排除通讯故障光伏跟踪支架阵列编号后进行人工检修。3.根据权利要求2所述的跟踪支架系统调试方法，其特征在于，对跟踪支架系统的通讯箱NCU和控制箱TCU进行参数预设置时，首先确定同个光伏子阵中通讯箱NCU和控制箱TCU的数量，通讯ID信息和控制ID信息通过软件烧录的方式进行设置；一个所述光伏子阵内包括1台通讯箱NCU以及多台控制箱TCU，1台通讯箱NCU与多台控制箱TCU之间通信连接。4.根据权利要求3所述的跟踪支架系统调试方法，其特征在于，所述获取光伏场区的航拍图像，对航拍图像进行识别处理，获取光伏跟踪支架阵列的边框尺寸及相对位置信息的步骤，具体包括：接收通过无人机拍摄得到的光伏场区的航拍图像；将所述航拍图像通过建模技术，生成光伏场区的正射影像图；基于光伏场区的正射影像图，对图像中光伏跟踪支架阵列的边框和颜色进行特征识别，将识别后的光伏跟踪支架阵列进行边框尺寸和相对位置坐标提取。5.根据权利要求4所述的跟踪支架系统调试方法，其特征在于，对光伏跟踪支架阵列的边框和颜色进行特征识别时，通过深度学习网络模型进行特征识别，深度学习网络模型包括卷积神经网络算法。6.根据权利要求5所述的跟踪支架系统调试方法，其特征在于，将每台控制箱TCU控制的光伏跟踪支架阵列分别调整为不同跟踪角度时，不同跟踪角度之间的步长间隔大于设定角度差，以使得图像识别准确；所述方法还包括：通过通讯箱NCU批量修改控制箱TCU的控制ID信息，将每个光伏子阵中的控制ID信息按光伏跟踪支架阵列布局进行顺序排列。7.根据权利要求6所述的跟踪支架系统调试方法，其特征在于，所述方法还包括：对光伏电站中所有光伏子阵进行关联调试后，全部接入监控后台进行统调；所述对航拍图像进行识别处理的步骤在图像识别处理单元中执行。8.根据权利要求7所述的跟踪支架系统调试方法，其特征在于，所述图像识别处理单元具体包括：高清图片输入模块，用于接收通过无人机拍摄得到的光伏场区的航拍图像；航拍图像处理模块，用于将所述航拍图像通过建模技术，生成光伏场区的正射影像图；光伏跟踪支架阵列识别提取模块，用于基于光伏场区的正射影像图，对图像中光伏跟踪支架阵列的边框和颜色进行特征识别，将识别后的光伏跟踪支架阵列进行边框尺寸和相对位置坐标提取；光伏跟踪支架阵列角度计算模块，用于提取两次得到跟踪支架旋转角度前后的边框尺寸L1和L2，计算旋转角度；光伏跟踪支架阵列角度计算模块，用于导出每个光伏跟踪支架阵列的旋转角度。9.根据权利要求8所述的跟踪支架系统调试方法，其特征在于，通过一支架系统控制完成指数来进行评估整个跟踪支架系统的控制性能，支架系统控制完成指数的计算公式表示为：；其中，表示支架系统控制完成指数，/＞表示支架系统控制完成指数的基准值，/＞表示旋转角度与控制箱TCU的调整角度相吻合匹配项的得分系数，/＞表示旋转角度与控制箱TCU的调整角度相吻合匹配项的权重因子，/＞表示旋转角度与控制箱TCU的调整角度相吻合匹配的光伏跟踪支架阵列数量，/＞表示光伏跟踪支架阵列的总数量，/＞表示旋转角度与控制箱TCU的调整角度存在角度偏差项的得分系数，/＞表示旋转角度与控制箱TCU的调整角度存在角度偏差项的权重因子，/＞表示旋转角度与控制箱TCU的调整角度存在角度偏差的第/＞个光伏跟踪支架阵列的偏差角度，/＞表示最大偏差角度，/＞表示旋转角度与控制箱TCU的调整角度存在角度偏差的光伏跟踪支架阵列的总数量。
说明书desc
技术领域本发明涉及光伏电站跟踪支架技术领域，具体是涉及一种跟踪支架系统调试方法。背景技术目前光伏跟踪支架系统调试需要工程师前往现场对每套跟踪系统控制箱逐一进行参数设置，步骤繁琐不简便，而且光伏场区涉及范围广，调试效率很低；另外，对于农光互补和渔光互补等项目，支架离地高，现场环境复杂，存在安全风险。现有技术的另一种方法：在总平图中对每套支架系统进行编号，在出厂前预设置跟踪系统通讯箱NCU和控制箱TCU参数，现场安装时将通讯箱NCU和控制箱TCU按照指定位置进行安装，但这样对现场挑战很大，准确性低，难以实现。因此，需要提供一种跟踪支架系统调试方法，旨在解决上述问题。发明内容针对现有技术存在的不足，本发明的目的在于提供一种跟踪支架系统调试方法，以解决上述背景技术中存在的问题。本发明提出一种跟踪支架系统调试方法，所述方法包括以下步骤：对跟踪支架系统的通讯箱NCU和控制箱TCU进行参数预设置，预设置内容包括通讯箱NCU的通讯ID信息和控制箱TCU的控制ID信息，设置同个光伏子阵内通讯箱NCU与控制箱TCU之间的对应关系；获取光伏跟踪支架安装现场的平面图像，对平面图像中每个光伏子阵内的每套光伏跟踪支架阵列进行编号标记处理；在同个光伏子阵内，通过通讯箱NCU下发命令至控制箱TCU，使得光伏子阵内光伏跟踪支架阵列调整角度至放平状态；获取光伏场区的航拍图像，对航拍图像进行识别处理，获取光伏跟踪支架阵列的边框尺寸及相对位置信息；通过通讯箱NCU分别下发命令给每台控制箱TCU，将每台控制箱TCU控制的光伏跟踪支架阵列分别调整为不同跟踪角度；获取调整角度完成后的光伏跟踪支架阵列的边框尺寸，计算旋转角度；通过旋转角度与通讯箱NCU下发给控制箱TCU的调整角度进行对比，确定光伏跟踪支架阵列编号与控制ID信息的对应关系，使得光伏跟踪支架阵列与控制箱TCU建立关联关系。作为本发明进一步的方案：对跟踪支架系统的通讯箱NCU和控制箱TCU进行参数预设置时，首先确定同个光伏子阵中通讯箱NCU和控制箱TCU的数量，通讯ID信息和控制ID信息通过软件烧录的方式进行设置。作为本发明进一步的方案：一个所述光伏子阵内包括1台通讯箱NCU以及多台控制箱TCU，1台通讯箱NCU与多台控制箱TCU之间通信连接。作为本发明进一步的方案：所述对航拍图像进行识别处理，获取光伏跟踪支架阵列的边框尺寸及相对位置信息的步骤，具体包括：接收通过无人机拍摄得到的光伏场区的航拍图像；将所述航拍图像通过建模技术，生成光伏场区的正射影像图；通过图像对光伏跟踪支架阵列的边框和颜色进行特征识别，将识别后的光伏跟踪支架阵列进行边框尺寸和相对位置坐标提取；提取两次得到跟踪支架旋转角度前后的边框尺寸L1和L2，计算旋转角度；导出每个光伏跟踪支架阵列的旋转角度。作为本发明进一步的方案：对光伏跟踪支架阵列的边框和颜色进行特征识别时，通过深度学习网络模型进行特征识别，深度学习网络模型包括卷积神经网络算法。作为本发明进一步的方案：将每台控制箱TCU控制的光伏跟踪支架阵列分别调整为不同跟踪角度时，不同跟踪角度之间的步长间隔大于设定角度差，以使得图像识别准确。作为本发明进一步的方案：所述方法还包括：通过通讯箱NCU批量修改控制箱TCU的控制ID信息，将每个光伏子阵中的控制ID信息按光伏跟踪支架阵列布局进行顺序排列。作为本发明进一步的方案：所述方法还包括：对光伏电站中所有光伏子阵进行关联调试后，全部接入监控后台进行统调。作为本发明进一步的方案：所述对航拍图像进行识别处理的步骤在图像识别处理单元中执行。作为本发明进一步的方案：所述图像识别处理单元具体包括：高清图片输入模块，用于接收通过无人机拍摄得到的光伏场区的航拍图像；航拍图像处理模块，用于将所述航拍图像通过建模技术，生成光伏场区的正射影像图；光伏跟踪支架阵列识别提取模块，用于通过图像对光伏跟踪支架阵列的边框和颜色进行特征识别，将识别后的光伏跟踪支架阵列进行边框尺寸和相对位置坐标提取；光伏跟踪支架阵列角度计算模块，用于提取两次得到跟踪支架旋转角度前后的边框尺寸L1和L2，计算旋转角度；光伏跟踪支架阵列角度计算模块，用于导出每个光伏跟踪支架阵列的旋转角度。与现有技术相比，本发明的有益效果是：本发明通过对通讯箱NCU和控制箱TCU进行出厂预设置，现场安装完成后，通过通讯箱NCU下发命令给控制箱TCU，调整跟踪支架阵列的跟踪角度，利用航拍图像，进行图像识别处理，获取现场每套光伏跟踪支架阵列的对应跟踪角度及相对位置信息，并与通讯箱NCU下发给控制箱TCU的调整角度比对，建立光伏跟踪支架阵列与控制箱TCU的关联关系，自动完成调试，省却工程师去现场对每套跟踪系统进行逐一调试，提升调试效率与准确性，且不会产生人身安全风险。附图说明图1为一种跟踪支架系统调试方法的流程图。图2为一种跟踪支架系统调试方法中光伏子阵的示意图。图3为一种跟踪支架系统调试方法中光伏跟踪支架阵列角度调整示意图。具体实施方式为了使本发明的目的、技术方案及优点更加清晰，以下结合附图及具体实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。以下结合具体实施例对本发明的具体实现进行详细描述。如图1和图2所示，本发明实施例提供了一种跟踪支架系统调试方法，所述方法包括以下步骤：S100，对跟踪支架系统的通讯箱NCU和控制箱TCU进行参数预设置，设置同个光伏子阵内通讯箱NCU与控制箱TCU之间的对应关系。本发明实施例中，在出厂前对跟踪支架系统通讯箱NCU和控制箱TCU进行参数预设置，预设置内容包括通讯箱NCU的通讯ID信息和控制箱TCU的控制ID信息。其中，同个光伏子阵内的通讯箱NCU需与控制箱TCU设置对应关系，以保证后续现场通讯箱NCU与控制箱TCU能配对，进行有线或者无线通讯连接，此时每个光伏子阵内的通讯箱NCU与控制箱TCU只有所属关系，但并不知道控制箱TCU在现场实际的物理位置，因此需要一种方法方便简捷获取控制箱TCU在现场的实际物理位置，并与每套光伏跟踪支架阵列一一对应。此外，对跟踪支架系统的通讯箱NCU和控制箱TCU进行参数预设置时，首先确定同个光伏子阵中通讯箱NCU和控制箱TCU的数量，通讯ID信息和控制ID信息通过软件烧录的方式进行设置。S200，获取光伏跟踪支架安装现场的平面图像，对平面图像中每个光伏子阵内的每套光伏跟踪支架阵列进行编号标记处理。在本步骤中，一个所述光伏子阵内包括1台通讯箱NCU以及多台控制箱TCU，1台通讯箱NCU与多台控制箱TCU之间通信连接。对平面图像中每个光伏子阵内的每套光伏跟踪支架阵列进行编号标记处理时，可以按照排列顺序依次将光伏跟踪支架阵列编号为A1、A2、A3、…、An。S300，在同个光伏子阵内，通过通讯箱NCU下发命令至控制箱TCU，使得光伏子阵内光伏跟踪支架阵列调整角度至放平状态。作为另一优选实施例，在实际应用中，由于光伏子阵内的光伏跟踪支架阵列有可能会发生机械故障，因此可在调整角度至放平状态的这一操作中进行故障的检测，以便进行及时检修。在本发明中，具体包括如下步骤：S301，当检测到通讯箱NCU下发命令至控制箱TCU后立即开始计时以得到第一时间；S302，当判断到第一时间等于预设时间间隔，则获取光伏场区的航拍图像，基于所述光伏场区的航拍图像判断多个光伏子阵内的光伏跟踪支架阵列中，是否至少存在一个光伏跟踪支架阵列处于未放平状态；S303，若是，则检测通讯箱NCU与多个控制箱TCU之间对应的多条数据通讯协议是否存在中断；S304，当判断到通讯箱NCU与多个控制箱TCU之间对应的多条数据通讯协议均不存在中断，则基于所述光伏场区的航拍图像，确定处于未放平状态的光伏跟踪支架阵列编号，并进行人工检修；S305，当判断到通讯箱NCU与多个控制箱TCU之间对应的多条数据通讯协议中存在中断，则确认存在中断的数据通讯协议对应的通讯故障控制箱ID，根据通讯故障控制箱ID查找确定对应的通讯故障光伏跟踪支架阵列编号，并从处于未放平状态的光伏跟踪支架阵列编号中排除通讯故障光伏跟踪支架阵列编号后进行人工检修。S400，获取光伏场区的航拍图像，对航拍图像进行识别处理，获取光伏跟踪支架阵列的边框尺寸及相对位置信息。如图3所示，本发明实施例中，所述获取光伏场区的航拍图像，对航拍图像进行识别处理，获取光伏跟踪支架阵列的边框尺寸及相对位置信息的步骤，具体包括：S401，接收通过无人机拍摄得到的光伏场区的航拍图像；S402，将所述航拍图像通过建模技术，生成光伏场区的正射影像图；S403，基于光伏场区的正射影像图，对图像中光伏跟踪支架阵列的边框和颜色进行特征识别，将识别后的光伏跟踪支架阵列进行边框尺寸和相对位置坐标提取；在此需要说明的是，对于南北向平单轴跟踪支架对应提取宽度尺寸，即东西向尺寸。然后可将识别后结果与现场实际平面图像进行校核，以增加识别准确率。在此需要补充说明的是，对光伏跟踪支架阵列的边框和颜色进行特征识别时，通过深度学习网络模型进行特征识别，深度学习网络模型包括卷积神经网络算法。S500，通过通讯箱NCU分别下发命令给每台控制箱TCU，将每台控制箱TCU控制的光伏跟踪支架阵列分别调整为不同跟踪角度。本发明实施例中，通过通讯箱NCU分别下发命令给每台控制箱TCU，将每台控制箱TCU控制的光伏跟踪支架阵列分别调整为不同跟踪角度时。其中，不同跟踪角度之间的步长间隔大于设定角度差，以使得图像识别更加准确。S600，获取调整角度完成后的光伏跟踪支架阵列的边框尺寸，计算旋转角度。在本步骤中，提取两次以分别得到跟踪支架旋转角度前后的第一边框尺寸L1与第二边框尺寸L2，并基于第一边框尺寸与第二边框尺寸计算得到光伏组件的旋转角度。进一步的，最后导出每个光伏跟踪支架阵列的旋转角度，用于后续光伏跟踪支架阵列与控制箱TCU关联关系的建立。S700，通过旋转角度与通讯箱NCU下发给控制箱TCU的调整角度进行对比，确定光伏跟踪支架阵列编号与控制ID信息的对应关系，使得光伏跟踪支架阵列与控制箱TCU建立关联关系。在本步骤中，确定光伏跟踪支架阵列编号与控制ID信息的对应关系，使得光伏跟踪支架阵列与控制箱TCU建立关联关系，关联关系如下表所示：在本发明中，所述方法还包括：通过通讯箱NCU批量修改控制箱TCU的控制ID信息，将每个光伏子阵中的控制ID信息按光伏跟踪支架阵列布局进行顺序排列，如此，方便后续运维调试工作。最后对光伏电站中所有光伏子阵进行关联调试后，全部接入监控后台进行统调。在本发明中，为了评估整个跟踪支架系统的控制性能，需要通过能够实现旋转角度与控制箱TCU的调整角度相吻合匹配的光伏跟踪支架阵列的数量来计算。具体的，通过一支架系统控制完成指数来进行评估整个跟踪支架系统的控制性能，支架系统控制完成指数的计算公式表示为：；其中，表示支架系统控制完成指数，/＞表示支架系统控制完成指数的基准值，表示旋转角度与控制箱TCU的调整角度相吻合匹配项的得分系数，/＞表示旋转角度与控制箱TCU的调整角度相吻合匹配项的权重因子，/＞表示旋转角度与控制箱TCU的调整角度相吻合匹配的光伏跟踪支架阵列数量，/＞表示光伏跟踪支架阵列的总数量，/＞表示旋转角度与控制箱TCU的调整角度存在角度偏差项的得分系数，/＞表示旋转角度与控制箱TCU的调整角度存在角度偏差项的权重因子，/＞表示旋转角度与控制箱TCU的调整角度存在角度偏差的第/＞个光伏跟踪支架阵列的偏差角度，/＞表示最大偏差角度，/＞表示旋转角度与控制箱TCU的调整角度存在角度偏差的光伏跟踪支架阵列的总数量。作为本发明一个优选的实施例，所述对航拍图像进行识别处理的步骤在图像识别处理单元中执行，所述图像识别处理单元具体包括：高清图片输入模块，用于接收通过无人机拍摄得到的光伏场区的航拍图像；航拍图像处理模块，用于将所述航拍图像通过建模技术，生成光伏场区的正射影像图；光伏跟踪支架阵列识别提取模块，用于通过图像对光伏跟踪支架阵列的边框和颜色进行特征识别，将识别后的光伏跟踪支架阵列进行边框尺寸和相对位置坐标提取；光伏跟踪支架阵列角度计算模块，用于提取两次得到跟踪支架旋转角度前后的边框尺寸L1和L2，计算旋转角度；光伏跟踪支架阵列角度计算模块，用于导出每个光伏跟踪支架阵列的旋转角度。以上仅对本发明的较佳实施例进行了详细叙述，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明的保护范围之内。应该理解的是，虽然本发明各实施例的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，各实施例中的至少一部分步骤可以包括多个子步骤或者多个阶段，这些子步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些子步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤的子步骤或者阶段的至少一部分轮流或者交替地执行。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的程序可存储于一非易失性计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、存储、数据库或其它介质的任何引用，均可包括非易失性和/或易失性存储器。非易失性存储器可包括只读存储器、可编程ROM、电可编程ROM、电可擦除可编程ROM或闪存。易失性存储器可包括随机存取存储器或者外部高速缓冲存储器。作为说明而非局限，RAM以多种形式可得，诸如静态RAM、动态RAM、同步DRAM、双数据率SDRAM、增强型SDRAM、同步链路 DRAM、存储器总线直接RAM、直接存储器总线动态RAM、以及存储器总线动态RAM等。本领域技术人员在考虑说明书及实施例处的公开后，将容易想到本公开的其它实施方案。本申请旨在涵盖本公开的任何变型、用途或者适应性变化，这些变型、用途或者适应性变化遵循本公开的一般性原理并包括本公开未公开的本技术领域中的公知常识或惯用技术手段。说明书和实施例仅被视为示例性的，本公开的真正范围和精神由权利要求指出。
