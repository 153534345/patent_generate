标题title
一种工艺角失配校准电路架构及电子器件
摘要abst
本发明涉及校准电路架构技术领域，尤其涉及一种工艺角失配校准电路架构及电子器件，所述电路架构包括：参考电压产生电路，用于产生并输出参考电压；电流产生电路，与所述参考电压产生电路的输出端电性连接，所述电流产生电路用于产生并输出电流。通过参考参考电压产生电路产生参考电压、通过电流产生电路产生电流经开关电容积分电路以产生一个高比特数高精度码字，通过码字映射之后输出低比特数码字给相应电路模块使用。在电路模块用于校准的电阻电容阵列面积不增大的条件下，提高了工艺角的校准精度，满足绝大部分工艺敏感的高精度模拟芯片的工艺稳定要求。
权利要求书clms
1.一种工艺角失配校准电路架构，其特征在于，包括：参考电压产生电路，用于产生并输出参考电压；电流产生电路，与所述参考电压产生电路的输出端电性连接，所述电流产生电路用于产生并输出电流；开关电容积分电路，与所述参考电压产生电路和电流产生电路分别连接；码字输出和映射电路，所述码字输出和映射电路的输入端与所述开关电容积分电路的输出端电性连接，所述码字输出和映射电路的输出端连接目标电路；所述码字输出和映射电路用于输出码字以提供给目标电路。2.根据权利要求1所述的电路架构，其特征在于，参考电压产生电路包括：带隙基准电路、第二电阻和第三电阻；所述带隙基准电路的输出端依次连接第二电阻、第三电阻后接地；所述带隙基准电路产生第一参考电压VREF后经所述第二电阻分压得到第二参考电压VCOM。3.根据权利要求2所述的电路架构，其特征在于，所述电流产生电路包括：第二运算放大器、第一电阻、第一开关元件和第一MOS管、第二MOS管；所述第一MOS管和所述第二MOS管的源极分别与电源VDD电性连接；所述第一MOS管的漏极与第一电阻、第一开关元件电性连接后接地；所述第二运算放大器的正极输入端与所述第一MOS管的漏极、所述第一电阻电性连接；所述第二运算放大器的正极输入端与所述带隙基准电路产生第一参考电压VREF电性连接；所述第二运算放大器的输出端分别与所述第一MOS管和所述第二MOS管的栅极电性连接；所述第二MOS管的漏极为所述电流产生电路的输出端，用于输出电流。4.根据权利要求3所述的电路架构，其特征在于，所述开关电容积分电路包括：第一运算放大器、第一至第二电容、第二至第七开关和反相器INV；第一电容的一侧与第二开关、第四开关电性连接，另一侧与第三开关和第五开关电性连接；所述第二电容的一侧与第三开关、第六开关、所述第七开关和所述第一运算放大器的负极输入端电性连接；另一侧与所述第七开关和所述第一运算放大器的输出端电性连接；所述第一运算放大器的输出端为所述开关电容积分电路的输出端，用于输出电压VO；所述第一运算放大器的正极输入端与所述第五开关、所述第四开关和所述参考电压产生电路输出的第二参考电压VCOM电性连接。5.根据权利要求4所述的电路架构，其特征在于，所述开关电容积分电路还包括：反相器；所述反相器的输入端与所述第二开关、所述第五开关电性连接，所述反相器的输出端与第四开关、所述第五开关电性连接。6.根据权利要求5所述的电路架构，其特征在于，所述码字输出和映射电路包括：依次连接的比较器、数字控制模块和码字映射模块；所述数字控制模块与第一至第三输入信号连接，所述第三输入信号还与所述反相器电性连接。7.根据权利要求6所述的电路架构，其特征在于，所述比较器的输入端与所述开关电容积分的输出端、所述第二参考电压VCOM电性连接；所述比较器的输出端与所述数字控制模块电性连接以生成并输出CMP_OUT信号至所述数字控制模块。8.根据权利要求7所述的电路架构，其特征在于，所述数字控制模块内部带有计数器，数字控制模块输入与时钟电路电性连接；所述数字控制模块用于输出使能信号以控制第一运算放大器、所述第二运算放大器、所述比较器和所述第一开关切换工作状态，所述数字控制模块还用于输出校准控制时序信号及第一比特数码字信号。9.根据权利要求8所述的电路架构，其特征在于，所述码字映射模块的输入端与所述数字控制模块的输出端连接，所述码字映射模块的输出端与目标电路架构电性连接；所述码字映射模块接收所述第一比特数码字信号、预设置控制信号，在根据预设规则对所述第一比特数码字信号处理后输出目标比特数码字信号至目标电路架构。10.一种电子器件，其特征在于，包括芯片，所述芯片上集成有如权利要求1-9任一项所述的电路架构。
说明书desc
技术领域本发明涉及校准电路架构技术领域，尤其是涉及一种工艺角失配校准电路架构及电子器件。背景技术随着芯片制造工艺的不断发展，先进制程芯片内各电路模块会随着工艺角波动而极大地恶化自身性能，因此需要相应的电路模块去校准工艺失配带来的影响。现在的工艺角失配校准技术一般是校准电阻电容后直接送到相应电路模块使用。但一般出于面积或者功耗考量，实际电路模块所用的电阻电容阵列比特数较小，调整范围有限，经过工艺校准后还是存在一定误差，精度不够高。发明内容有鉴于此，本发明的目的在于提供一种工艺角失配校准电路架构及电子器件，可以在不增加电路模块电阻电容阵列面积的条件下，提高电路工艺角的校准精度。第一方面，本发明实施例提供了一种工艺角失配校准电路架构，包括：参考电压产生电路，用于产生并输出参考电压；电流产生电路，与所述参考电压产生电路的输出端电性连接，所述电流产生电路用于产生并输出电流；开关电容积分电路，与所述参考电压产生电路和电流产生电路分别连接；码字输出和映射电路，所述码字输出和映射电路的输入端与所述开关电容积分电路的输出端电性连接，所述码字输出和映射电路的输出端连接目标电路；所述码字输出和映射电路用于输出码字以提供给目标电路。结合第一方面，参考电压产生电路包括：带隙基准电路、第二电阻和第三电阻；所述带隙基准电路的输出端依次连接第二电阻、第三电阻后接地；所述带隙基准电路产生第一参考电压VREF后经所述第二电阻分压得到第二参考电压VCOM。结合第一方面，所述电流产生电路包括：第二运算放大器、第一电阻、第一开关元件和第一MOS管、第二MOS管；所述第一MOS管和所述第二MOS管的源极分别与电源VDD电性连接；所述第一MOS管的漏极与第一电阻、第一开关元件电性连接后接地；所述第二运算放大器的正极输入端与所述第一MOS管的漏极、所述第一电阻电性连接；所述第二运算放大器的正极输入端与所述带隙基准电路产生第一参考电压VREF电性连接；所述第二运算放大器的输出端分别与所述第一MOS管和所述第二MOS管的栅极电性连接；所述第二MOS管的漏极为所述电流产生电路的输出端，用于输出电流。结合第一方面，所述开关电容积分电路包括：第一运算放大器、第一至第二电容、第二至第七开关和反相器INV；所述第一电容的一侧与所述第二开关、第四开关电性连接，另一侧与第三开关和第五开关电性连接；所述第二电容的一侧与第三开关、第六开关、所述第七开关和所述第一运算放大器的负极输入端电性连接；另一侧与所述第七开关和所述第一运算放大器的输出端电性连接；所述第一运算放大器的输出端为所述开关电容积分电路的输出端，用于输出电压VO；所述第一运算放大器的正极输入端与所述第五开关、所述第四开关和所述参考电压产生电路输出的第二参考电压VCOM电性连接。结合第一方面，所述开关电容积分电路还包括：反相器；所述反相器的输入端与所述第二开关、所述第五开关电性连接，所述反相器的输出端与第四开关、所述第五开关电性连接。结合第一方面，所述码字输出和映射电路包括：依次连接的比较器、数字控制模块和码字映射模块；所述数字控制模块与第一至第三输入信号连接，所述第三输入信号还与所述反相器电性连接。结合第一方面，所述比较器的输入端与所述开关电容积分的输出端、所述第二参考电压VCOM电性连接；所述比较器的输出端与所述数字控制模块电性连接以生成并输出CMP_OUT信号至所述数字控制模块。结合第一方面，所述数字控制模块内部带有计数器，数字控制模块输入与时钟电路电性连接；所述数字控制模块用于输出使能信号以控制第一运算放大器、所述第二运算放大器、所述比较器和所述第一开关切换工作状态，所述数字控制模块还用于输出校准控制时序信号及第一比特数码字CODE0。结合第一方面，所述码字映射模块的输入端与所述数字控制模块的输出端连接，所述码字映射模块的输出端与目标电路架构电性连接；所述码字映射模块接收所述第一比特数码字信号、预设置控制信号，在根据预设规则对所述第一比特数码字信号处理后输出目标比特数码字信号至目标电路架构。第二方面本申请提供一种电子器件，包括芯片，所述芯片上集成有如上述的电路架构。本发明实施例带来了以下有益效果：本发明提供了一种工艺角失配校准电路架构及电子器件，所述电路架构包括：参考电压产生电路，用于产生并输出参考电压；电流产生电路，与所述参考电压产生电路的输出端电性连接，所述电流产生电路用于产生并输出电流；开关电容积分电路，与所述参考电压产生电路和电流产生电路分别连接；码字输出和映射电路，所述码字输出和映射电路的输入端与所述开关电容积分电路的输出端电性连接，所述码字输出和映射电路的输出端连接目标电路；所述码字输出和映射电路用于输出码字以提供给目标电路。通过参考参考电压产生电路产生参考电压、通过电流产生电路产生电流经开关电容积分电路以产生一个高比特数高精度码字，通过码字映射之后输出低比特数码字给相应电路模块使用。在电路模块用于校准的电阻电容阵列面积不增大的条件下，提高了工艺角的校准精度，满足绝大部分工艺敏感的高精度模拟芯片的工艺稳定要求。本发明的其他特征和优点将在随后的说明书中阐述，并且，部分地从说明书中变得显而易见，或者通过实施本发明而了解。本发明的目的和其他优点在说明书、权利要求书以及附图中所特别指出的结构来实现和获得。为使本发明的上述目的、特征和优点能更明显易懂，下文特举较佳实施例，并配合所附附图，作详细说明如下。附图说明为了更清楚地说明本发明具体实施方式或现有技术中的技术方案，下面将对具体实施方式或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施方式，对于本领域技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例提供的工艺角失配校准电路架构示意图；图2为本发明实施例提供的工艺角失配校准电路架构应用时序图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合附图对本发明的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。为了便于对本实施例进行理解，下面先对本申请设计的技术用语进行简单介绍。使能：是指负责控制信号的输入和输出，通俗点说就是一个“允许”信号，进给使能也就是允许进给的信号，也就是说当进给使能信号有效的时候电机才能转动。开关电容积分电路，使用开关不断切换电容的充电和放电状态，来模拟电阻的作用；等效电阻值，可以由开关频率来设定，用于滤波器中，可以方便的调节滤波器的截止频率。带隙英文为bandgap，在日常使用，我们也称为BG。带隙基准电路主要目的是产生与温度无关的基准。VREF，参考电压，指电路中一个与负载、功率供给、温度漂移、时间等无关，能保持始终恒定的一个电压。参考电压可以被用于电源供应系统的稳压器，模拟数字转换器和数字模拟转换器，以及许多其他测量、控制系统。在介绍了本申请涉及的技术用语后，接下来，对本申请实施例的应用场景和设计思想进行简单介绍。现在的工艺角失配校准技术一般是校准电阻电容后直接送到相应电路模块使用。但一般出于面积或者功耗考量，实际电路模块所用的电阻电容阵列比特数较小，调整范围有限，经过工艺校准后还是存在一定误差，精度不够高。基于此本申请提供一种工艺角失配校准电路架构，以在不增加电路模块电阻电容阵列面积的条件下，提高电路工艺角的校准精度。实施例1结合图1所示，本申请提供一种工艺角失配校准电路架构，该电路架构包括：参考电压产生电路1、电流产生电路2、开关电容积分电路3和码字输出和映射电路4。参考电压产生电路1用于产生并输出参考电压。电流产生电路2与参考电压产生电路1的输出端电性连接，电流产生电路2用于产生并输出电流。开关电容积分电路3与参考电压产生电路1和电流产生电路2分别连接。码字输出和映射电路4的输入端与开关电容积分电路3的输出端电性连接，码字输出和映射电路4的输出端连接目标电路；码字输出和映射电路4用于输出码字以提供给目标电路。结合第一方面，参考电压产生电路包括：带隙基准电路、第二电阻和第三电阻；带隙基准电路的输出端依次连接第二电阻、第三电阻后接地。带隙基准电路产生第一参考电压VREF后经第二电阻分压得到第二参考电压VCOM。结合第一方面，电流产生电路2包括：第二运算放大器、第一电阻、第一开关元件和第一MOS管、第二MOS管。第一MOS管M1和第二MOS管M2的源极分别与电源VDD电性连接；第一MOS管M1的漏极与第一电阻R1、第一开关元件S1电性连接后接地。第二运算放大器OP2的正极输入端与第一MOS管M1的漏极、第一电阻R1电性连接；第二运算放大器OP2的正极输入端与带隙基准电路BG产生第一参考电压VREF电性连接；第二运算放大器OP2的输出端分别与第一MOS管M1和第二MOS管M2的栅极电性连接。第二MOS管M2的漏极为电流产生电路的输出端，用于输出电流。结合第一方面，开关电容积分电路3包括：第一运算放大器、第一至第二电容、第二至第七开关；第一电容的一侧与第二开关、第四开关电性连接，另一侧与第三开关和第五开关电性连接；第二电容的一侧与第三开关S3、第六开关、第七开关S7和第一运算放大器的负极输入端电性连接；另一侧与第七开关S7和第一运算放大器OP1的输出端电性连接；第一运算放大器OP1的输出端为开关电容积分电路3的输出端，用于输出电压VO；第一运算放大器OP1的正极输入端与第五开关S5、第四开关S4和参考电压产生电路1输出的第二参考电压VCOM电性连接。结合第一方面，所述开关电容积分电路3还包括：反相器。所述反相器INV的输入端与所述第二开关S2、所述第五开关S5电性连接，所述反相器INV的输出端与第四开关S4、所述第五开关S5电性连接。结合第一方面，码字输出和映射电路4包括：依次连接的比较器、数字控制模块41和码字映射模块42；数字控制模块41与第一至第三输入信号连接，第三输入信号还与反相器电性连接。结合第一方面，比较器CMP的输入端与所述开关电容积分3的输出端、第二参考电压VCOM电性连接；比较器CMP的输出端与数字控制模块41电性连接以生成并输出CMP_OUT信号至数字控制模块41。结合第一方面，数字控制模块41内部带有计数器，数字控制模块41输入与时钟电路电性连接；数字控制模块41用于输出使能信号以控制第一运算放大器OP1、第二运算放大器OP2、比较器CMP和第一开关S1切换工作状态，数字控制模块41还用于输出校准控制时序信号及第一比特数码字CODE0。结合第一方面，码字映射模块42的输入端与数字控制模块41的输出端连接，码字映射模块42的输出端与目标电路架构电性连接；码字映射模块42接收第一比特数码字信号、预设置控制信号，在根据预设规则对第一比特数码字信号处理后输出目标比特数码字信号至目标电路架构。结合图1所示，为本技术原理的一个具体实施方案。下面运用公式推导形式说明本技术的原理。结合图2中时序图所示，在校准阶段，EN0使能为高电平，第一运算放大器OP1、第二运算放大器运放OP2、比较器CMP和第一开关S1使能打开。在0~T1时段，φ1、为高电平，φ2、φ3为低电平，此时第三开关S3、第四开关S4、第七开关S7导通，第二开关S2、第五开关S5、第六开关S6断开，第一运算放大器运放OP1接成单位增益负反馈形式，第二电容C2上电荷清空，第一运算运放OP1输出电压V0为：V0=VCOM。在T1~T2时段，第二电容C2导通φ2、为高电平，φ1、φ3为低电平，第三开关S3、第四开关S4、第六开关S6导通，第二开关S2、第五开关S5、第七开关S7断开，电流产生电路2产生的高精度电流IREF流过第六开关S6给第二电容C2充电，经过T1~T2的N个时钟周期TCLK后，第一运算放大器OP1输出电压V0下降电压幅度/＞。在T2~T3时间段，φ1、φ2为低电平，φ3按周期TCLK开始翻转，第二开关S2、第三开关S3、第四开关S4、第五开关S5、第一电容C1、第二电容C2和第一运算放大器OP1构成了一个同相开关电容积分器，每个时钟周期内第一运算放大器OP1输出电压V0上升一个电压阶梯C2。从φ3开始翻转时，数字控制模块41内部计数器开始计数，V0逐渐增大直至等于VCOM，此时比较器CMP翻转，计数器停止计数，易知此时计数值。在T3~T4时间段，第一运算放大器OP1输出电压V0仍继续增大，但数字控制模块41内比较器CMP已停止计数。T4时间段之后，校准使能信号EN0为低电平，校准结束。为保持高精度，数字控制模块41输出码字CODE0比特位数高，数值较大，无法直接给相应电路模块使用，需通过码字映射模块处理码字CODE0。CODE0先和一个定值a1相乘，线性缩小后得到码字CODE1；之后与外部可调的变量a2相乘，放缩得到码字CODE2；再和一个定值b1作差得到码字CODE3；最后与一个外部可调的变量b2相加得到码字RC_CODE，最终的输出码字RC_CODE提供给相应电路模块使用。其中，a1、a2、b1、b2根据实际应用场景设定。第二方面，本申请提供一种电子器件，包括芯片，该芯片上集成上述的电路架构。本发明实施例所提供的 的计算机程序产品，包括存储了程序代码的计算机可读存储介质，所述程序代码包括的指令可用于执行前面方法实施例中所述的方法，具体实现可参见方法实施例，在此不再赘述。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的系统和装置的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。另外，在本发明实施例的描述中，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通。对于本领域技术人员而言，可以具体情况理解上述术语在本发明中的具体含义。所述功能如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。在本发明的描述中，需要说明的是，术语“中心”、“上”、“下”、“左”、“右”、“竖直”、“水平”、“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。此外，术语“第一”、“第二”、“第三”仅用于描述目的，而不能理解为指示或暗示相对重要性。最后应说明的是：以上实施例，仅为本发明的具体实施方式，用以说明本发明的技术方案，而非对其限制，本发明的保护范围并不局限于此，尽管参照前述实施例对本发明进行了详细的说明，本领域技术人员应当理解：任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，其依然可以对前述实施例所记载的技术方案进行修改或可轻易想到变化，或者对其中部分技术特征进行等同替换；而这些修改、变化或者替换，并不使相应技术方案的本质脱离本发明实施例技术方案的精神和范围，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以权利要求的保护范围为准。
