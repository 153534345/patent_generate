标题title
一种汽车车载音响喇叭自适应音场调节方法
摘要abst
本发明涉及音场调节技术领域，具体涉及一种汽车车载音响喇叭自适应音场调节方法，采集车内各音频信号数据序列；根据音频信号数据序列及对应频域音频特征向量之间的关系得到音频相似度；构建车载音频噪声包含度及车载音频听感度，进而计算车载音响喇叭音频噪声影响度；计算乘坐人员的车内交流模糊度及车载音响喇叭综合干扰距离；基于此计算人员交流音频干扰度；根据车载音响喇叭音频噪声影响度及人员交流音频干扰度得到增益系数调节指数；计算下一时刻车载音响喇叭音频播放音量的增益系数，完成车载音响喇叭的自适应音场调节。从而实现汽车喇叭音响音场的自适应调节，保证车载音响调节效果。
权利要求书clms
1.一种汽车车载音响喇叭自适应音场调节方法，其特征在于，该方法包括以下步骤：采集车内各车载麦克风的声音信号获取各音频信号数据序列；获取音频信号数据序列的频域音频特征向量；根据不同音频信号数据序列及对应频域音频特征向量之间的关系得到不同音频信号数据序列之间的音频相似度；根据各车载音响喇叭音频信号序列之间的关系得到车载音频噪声包含度及车载音频听感度；根据车载音频噪声包含度及车载音频听感度得到车载音响喇叭音频噪声影响度；根据各声源与各麦克风的俯仰角、方位角之间的差异得到声源归属度；根据声源归属度提取各乘坐人员音频信号数据序列；根据车内乘坐人员的音频信号数据序列及其他各音频信号数据序列之间的音频相似度得到乘坐人员的车内交流模糊度；根据乘坐人员与车内各麦克风之间的空间距离得到车载音响喇叭综合干扰距离；将车内所有参与交流的乘坐人员的车内交流模糊度与车载音响喇叭综合干扰距离比值均值的归一化值作为人员交流音频干扰度；根据当前采集周期内车载音响喇叭音频噪声影响度及人员交流音频干扰度得到下一时刻车载音响喇叭音频播放音量的增益系数调节指数；利用动态范围控制算法计算当前时刻车载音响喇叭音频播放音量的增益系数，将当前时刻所述增益系数与增益系数调节指数的乘积作为下一时刻车载音响喇叭音频播放音量的增益系数，完成车载音响喇叭的自适应音场调节。2.如权利要求1所述的一种汽车车载音响喇叭自适应音场调节方法，其特征在于，所述获取音频信号序列的频域音频特征向量，包括：对各音频信号数据序列进行快速傅里叶变换得到各频域音频信号序列；将各频域音频信号序列的最大值、最小值、峰峰值、均值、峭度值以及裕度值组成各音频信号数据序列的频域音频特征向量。3.如权利要求2所述的一种汽车车载音响喇叭自适应音场调节方法，其特征在于，所述根据不同音频信号数据序列及对应频域音频特征向量之间的关系得到不同音频信号数据序列之间的音频相似度，包括：对于两个不同的音频信号数据序列；获取两个音频信号数据序列的频域音频特征向量之间的欧式距离，计算两个音频信号数据序列之间的DTW距离，将所述欧式距离与所述DTW距离乘积的倒数作为两个音频信号数据序列之间的音频相似度。4.如权利要求3所述的一种汽车车载音响喇叭自适应音场调节方法，其特征在于，所述根据各车载音响喇叭音频信号序列之间的关系得到车载音频噪声包含度及车载音频听感度，包括：获取音频信号数据序列中各采样点振幅与去噪后音频信号数据序列中对应各采样点振幅差值绝对值，计算各采样点的所述差值绝对值与各采样点振幅的比值，将音频信号数据序列中所有采样点的所述比值的均值作为音频信号数据序列的车载音频噪声包含度；将去噪后音频信号数据序列与车内所有麦克风音频信号数据序列之间的音频相似度的均值作为音频信号数据序列的车载音频听感度。5.如权利要求4所述的一种汽车车载音响喇叭自适应音场调节方法，其特征在于，所述根据车载音频噪声包含度及车载音频听感度得到车载音响喇叭音频噪声影响度，包括：将车内所有车载音响喇叭音频信号数据序列的车载音频噪声包含度与车载音频听感度的比值归一化值的均值作为车载音响喇叭音频噪声影响度。6.如权利要求1所述的一种汽车车载音响喇叭自适应音场调节方法，其特征在于，所述根据各声源与各麦克风的俯仰角、方位角之间的差异得到声源归属度，包括：采用多重信号分类的DOA估计算法获取车内各声源以及各声源的俯仰角及方位角，并获取各麦克风的俯仰角及方位角；将声源与麦克风的俯仰角差值绝对值的倒数与声源与麦克风的方位角差值绝对值的倒数的乘积作为声源相对于麦克风的声源归属度。7.如权利要求6所述的一种汽车车载音响喇叭自适应音场调节方法，其特征在于，所述根据声源归属度提取各乘坐人员音频信号数据序列，包括：对于各声源，获取与声源对应的声源归属度最大对应的麦克风位置，作为声源的归属位置，将所有声源归属位置中除去车载音响喇叭所在位置所得到的各位置对应的音频信号数据序列作为各乘坐人员的音频信号数据序列。8.如权利要求7所述的一种汽车车载音响喇叭自适应音场调节方法，其特征在于，所述根据车内乘坐人员的音频信号数据序列及其他各音频信号数据序列之间的音频相似度得到乘坐人员的车内交流模糊度，包括：对于同一采集周期，其中声源数量记为K，车载音响喇叭数量记为M；若K=M，则乘坐人员的车内交流模糊度为0；若K＞M，则乘坐人员的车内交流模糊度为车内乘坐人员音频信号数据序列与其他所有音频信号数据序列之间音频相似度均值的倒数。9.如权利要求8所述的一种汽车车载音响喇叭自适应音场调节方法，其特征在于，所述根据乘坐人员与车内各麦克风之间的空间距离得到车载音响喇叭综合干扰距离，包括：获取车内各麦克风的空间坐标向量，所述空间坐标向量为，其中，为麦克风坐标，/＞分别为麦克风俯仰角、方位角，计算乘坐人员所在座位麦克风的空间坐标向量与车内所有麦克风空间坐标向量之间欧式距离的均值，将所述均值作为车载音响喇叭综合干扰距离。10.如权利要求9所述的一种汽车车载音响喇叭自适应音场调节方法，其特征在于，所述下一时刻车载音响喇叭音频播放音量的增益系数调节指数为当前采集周期内车载音响喇叭音频噪声影响度与人员交流音频干扰度的比值。
说明书desc
技术领域本申请涉及音场调节技术领域，具体涉及一种汽车车载音响喇叭自适应音场调节方法。背景技术汽车车载音响喇叭是为汽车内部提供音频播放功能的设备，可以播放音乐、提供语音提示、实现通话功能，并为驾驶人员和乘客提供更加愉悦和安全的音频体验。但是，汽车内部的空间通常是有限的，并且在不同的驾驶条件下，如高速公路、城市道路，车内的音频环境会发生变化，如果不对车载音响喇叭的音场进行调节，就会降低车内音频的质量和均匀性，使得某些区域可能听到过于强烈或模糊的声音，而其余区域可能听不到清晰的声音，导致驾驶者在行驶过程中难以辨识重要的信息，如车辆警示声、导航提示，从而影响驾驶的便利性和安全性，因此需要对汽车车载音响喇叭的音场进行自适应调节，以及时的提高车内音频的可辨识度，给驾驶人员提供良好的音频体验和驾驶安全性。动态范围控制算法是一种信号幅度调节算法，将输入音频信号的动态范围映射到指定的动态范围，可以使声音听起来更加的柔和或更大声，被广泛应用于音频信号处理。传统的动态范围控制算法的参数通常是固定的，使得其增益系数的值也是定值，这会造成输出音频信号的音量限制在一个固定的范围内，虽然会使音频在播放时具有一定的平衡和一致性，但是当音频环境发生改变时，固定的增益系数会造成音频的输出音量过低或过高，比如在高噪音环境下，过小的输出音量无法减轻噪声的干扰，导致音频质量的下降，或者在安静的环境下，过大的输出音量，会影响用户的听觉体验。综上所述，本发明提出一种汽车车载音响喇叭自适应音场调节方法，采集用于调节汽车车载音响喇叭音场的相关数据，根据汽车在行驶过程中使用汽车车载音响喇叭播放音频时，汽车中的音频信号的分布情况以及乘坐人员之间的交流情况，构建车载音响喇叭音频噪声影响度以及车载音响喇叭音频噪声影响度，基于车载音响喇叭音频噪声影响度以及车载音响喇叭音频噪声影响度，计算汽车车载音响喇叭播放音频时各个时刻的增益系数调节指数，进而完成对汽车车载音响喇叭音场的自适应调节。发明内容为了解决上述技术问题，本发明提供一种汽车车载音响喇叭自适应音场调节方法，以解决现有的问题。本发明的一种汽车车载音响喇叭自适应音场调节方法采用如下技术方案：本发明一个实施例提供了一种汽车车载音响喇叭自适应音场调节方法，该方法包括以下步骤：采集车内各车载麦克风的声音信号获取各音频信号数据序列；获取音频信号数据序列的频域音频特征向量；根据不同音频信号数据序列及对应频域音频特征向量之间的关系得到不同音频信号数据序列之间的音频相似度；根据各车载音响喇叭音频信号序列之间的关系得到车载音频噪声包含度及车载音频听感度；根据车载音频噪声包含度及车载音频听感度得到车载音响喇叭音频噪声影响度；根据各声源与各麦克风的俯仰角、方位角之间的差异得到声源归属度；根据声源归属度提取各乘坐人员音频信号数据序列；根据车内乘坐人员的音频信号数据序列及其他各音频信号数据序列之间的音频相似度得到乘坐人员的车内交流模糊度；根据乘坐人员与车内各麦克风之间的空间距离得到车载音响喇叭综合干扰距离；将车内所有参与交流的乘坐人员的车内交流模糊度与车载音响喇叭综合干扰距离比值均值的归一化值作为人员交流音频干扰度；根据当前采集周期内车载音响喇叭音频噪声影响度及人员交流音频干扰度得到下一时刻车载音响喇叭音频播放音量的增益系数调节指数；利用动态范围控制算法计算当前时刻车载音响喇叭音频播放音量的增益系数，将当前时刻所述增益系数与增益系数调节指数的乘积作为下一时刻车载音响喇叭音频播放音量的增益系数，完成车载音响喇叭的自适应音场调节。进一步地，所述获取音频信号序列的频域音频特征向量，包括：对各音频信号数据序列进行快速傅里叶变换得到各频域音频信号序列；将各频域音频信号序列的最大值、最小值、峰峰值、均值、峭度值以及裕度值组成各音频信号数据序列的频域音频特征向量。进一步地，所述根据不同音频信号数据序列及对应频域音频特征向量之间的关系得到不同音频信号数据序列之间的音频相似度，包括：对于两个不同的音频信号数据序列；获取两个音频信号数据序列的频域音频特征向量之间的欧式距离，计算两个音频信号数据序列之间的DTW距离，将所述欧式距离与所述DTW距离乘积的倒数作为两个音频信号数据序列之间的音频相似度。进一步地，所述根据各车载音响喇叭音频信号序列之间的关系得到车载音频噪声包含度及车载音频听感度，包括：获取音频信号数据序列中各采样点振幅与去噪后音频信号数据序列中对应各采样点振幅差值绝对值，计算各采样点的所述差值绝对值与各采样点振幅的比值，将音频信号数据序列中所有采样点的所述比值的均值作为音频信号数据序列的车载音频噪声包含度；将去噪后音频信号数据序列与车内所有麦克风音频信号数据序列之间的音频相似度的均值作为音频信号数据序列的车载音频听感度。进一步地，所述根据车载音频噪声包含度及车载音频听感度得到车载音响喇叭音频噪声影响度，包括：将车内所有车载音响喇叭音频信号数据序列的车载音频噪声包含度与车载音频听感度的比值归一化值的均值作为车载音响喇叭音频噪声影响度。进一步地，所述根据各声源与各麦克风的俯仰角、方位角之间的差异得到声源归属度，包括：采用多重信号分类的DOA估计算法获取车内各声源以及各声源的俯仰角及方位角，并获取各麦克风的俯仰角及方位角；将声源与麦克风的俯仰角差值绝对值的倒数与声源与麦克风的方位角差值绝对值的倒数的乘积作为声源相对于麦克风的声源归属度。进一步地，所述根据声源归属度提取各乘坐人员音频信号数据序列，包括：对于各声源，获取与声源对应的声源归属度最大对应的麦克风位置，作为声源的归属位置，将所有声源归属位置中除去车载音响喇叭所在位置所得到的各位置对应的音频信号数据序列作为各乘坐人员的音频信号数据序列。进一步地，所述根据车内乘坐人员的音频信号数据序列及其他各音频信号数据序列之间的音频相似度得到乘坐人员的车内交流模糊度，包括：对于同一采集周期，其中声源数量记为K，车载音响喇叭数量记为M；若K=M，则乘坐人员的车内交流模糊度为0；若K＞M，则乘坐人员的车内交流模糊度为车内乘坐人员音频信号数据序列与其他所有音频信号数据序列之间音频相似度均值的倒数。进一步地，所述根据乘坐人员与车内各麦克风之间的空间距离得到车载音响喇叭综合干扰距离，包括：获取车内各麦克风的空间坐标向量，所述空间坐标向量为，其中，为麦克风坐标，/＞分别为麦克风俯仰角、方位角，计算乘坐人员所在座位麦克风的空间坐标向量与车内所有麦克风空间坐标向量之间欧式距离的均值，将所述均值作为车载音响喇叭综合干扰距离。进一步地，所述下一时刻车载音响喇叭音频播放音量的增益系数调节指数为当前采集周期内车载音响喇叭音频噪声影响度与人员交流音频干扰度的比值。本发明至少具有如下有益效果：本发明提出一种汽车车载音响喇叭自适应音场调节方法，针对传统的动态范围控制算法不能自适应的调节增益系数，而导致音频的输出音量在复杂场景下过高或过低而影响用户听觉体验的问题，本发明基于汽车车载音响喇叭播放音频时汽车中音频信号的分布情况，构建车载音频噪声包含度以及车内乘坐人员的车载音频听感度，以获取车载音响喇叭音频噪声影响度，对车载音响喇叭音频噪声影响度较大时刻的增益系数赋予较大的值，降低汽车内噪声对车内播放的音频的影响程度，以提高汽车内乘坐的人员对播放的音频的体验感；进一步，本发明基于车内乘坐人员交流时的音频信号的分布情况，构建乘坐人员的车内交流模糊度和车载音响喇叭综合干扰距离来得到汽车内的人员交流音频干扰度，对车内播放的音频对汽车内乘坐的人员交流时干扰程度较大的时刻赋予较小的值，来确保车内播放的音频声音不会过于突出，从而保证车内人员交流的清晰度和顺畅性，基于车载音响喇叭音频噪声影响度和人员交流音频干扰度，得到车载音响喇叭播放音频时各个时刻的增益系数调节指数，进而计算用于调节车载音响喇叭播放音频的音量的增益系数，使得车载音响喇叭播放音频的音量调节结果更适合当前的场景，提高了车内乘坐人员的听觉体验。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明提供的一种汽车车载音响喇叭自适应音场调节方法的流程图；图2为汽车内部音频采集示意图；图3为增益系数更新示意图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种汽车车载音响喇叭自适应音场调节方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种汽车车载音响喇叭自适应音场调节方法的具体方案。本发明一个实施例提供的一种汽车车载音响喇叭自适应音场调节方法，具体的，提供了如下的一种汽车车载音响喇叭自适应音场调节方法，请参阅图1，该方法包括以下步骤：步骤S001，采集用于调节汽车车载音响喇叭音场的相关数据。用于音场调节的参数通常包括音响喇叭的音量、音色以及音场的位置、宽度、深度。对于汽车的车载音响喇叭，其音场的位置、宽度、深度一般是在对车载音响喇叭进行安装和调校时确定的，无法在汽车行驶的过程中进行自适应变化。而相对于音色，车载音响喇叭的音量能更好地提高驾驶人员在行驶过程中对重要音频信息的辨识能力，因此本实施例通过自适应的调节车载音响喇叭的音场中的音量参数，来给驾驶人员提供良好的音频体验和驾驶安全性。获取汽车内部安装的车载音响喇叭的数量，在汽车的各个座位的预设位置处分别安装一个麦克风，麦克风的数量记为/＞，在汽车内部的中心位置安装麦克风阵列，麦克风阵列中阵元麦克风的数量记为/＞，本实施例使用的是平面麦克风阵列，并在车载音响播放音频时使用麦克风以及麦克风阵列对汽车内的声音信号进行实时采集，每个声音信号采集周期中的采集时长记为/＞，声音信号的采样频率和量化长度分别取经验值为/＞和，其中车载音响喇叭的数量/＞、麦克风的数量/＞、麦克风阵列中阵元的数量/＞以及采集时长/＞由实施者自行定义，本实施例中设置为/＞、/＞、/＞、/＞。各个采集周期具体指的是：比如第1s到第10s为第一个采集周期，第2s到第11s为第二个采集周期，以此类推。得到各个周期中各个麦克风接收的音频信号数据序列和各个阵元麦克风接收的音频信号数据序列/＞，音频信号数据序列中的各个数据点的值分别表示音频信号在各个采样时刻上的振幅。由于音频信号经常会出现频谱倾斜现象，因此使用一阶FIR高通滤波器对所有的音频信号数据序列/＞、/＞分别进行预加重处理，以平衡音频信号的频谱，分别得到预加重后的音频信号数据序列/＞、/＞，其中高通滤波器系数取经验值0.97，基于高通滤波器的预加重处理为公知技术，不再赘述。对所有的音频信号数据序列/＞、/＞分别进行加窗分帧处理，以获得短时声音信号，减少声音信号的阶段效应，每个音频信号数据序列/＞、/＞分别得到/＞帧短时音频信号数据序列/＞、/＞，其中选择汉宁窗作为窗函数，采用重叠分帧的方式，每一帧采样点的数量设置为256，相邻帧之间的重叠度设置为50%，窗函数中的参数设置为0.46，加窗分帧处理为公知技术，不再赘述。汽车内部音频采集示意图具体如图2所示，图2中标记1表示麦克风阵列，数量为1，2表示车载音响喇叭，数量为6，标记3表示汽车座位，数量为4，标记4表示麦克风，数量为4。以麦克风阵列的中心为原点构建一个空间坐标系和一个球坐标系，分别获取各个阵元麦克风、麦克风以及车载音响喇叭在空间坐标系下的空间坐标向量以及在球坐标系下的俯仰角/＞和方位角/＞。得到麦克风阵列中各个阵元麦克风的阵列几何信息向量/＞。得到第个麦克风在第/＞个采集周期接收的音频信号在第/＞帧对应的短时音频信号数据序列/＞，以及麦克风阵列在第/＞个采集周期接收的音频信号在第/＞帧对应的音频信号矩阵/＞，其中/＞表示麦克风阵列中的第/＞个单元麦克风在第个采集周期接收的音频信号在第/＞帧对应的音频信号数据序列，音频信号矩阵/＞如下所示：上述矩阵中：表示麦克风阵列中的第/＞个单元麦克风在第/＞个采集周期接收的音频信号在第/＞帧对应的音频信号数据序列中的第/＞个采样点的值；/＞表示上述设置的每一帧中采样点的数量，即/＞。至此，可获取用于调节汽车车载音响喇叭音场的相关数据。步骤S002：构建车载音响喇叭音频噪声影响度以及车载音响喇叭音频噪声影响度，基于车载音响喇叭音频噪声影响度以及车载音响喇叭音频噪声影响度，计算汽车车载音响喇叭播放音频时各个时刻的增益系数调节指数。在汽车行驶的过程中，车载音响喇叭播放的音频会受到噪声的干扰，并且车载音响喇叭播放的音频也会干扰车内人员之间的交流，因此本实施例通过车内噪声对车载音响喇叭播放的音频的影响程度以及播放的音频对车内人员交流时的干扰程度来自适应的获取动态范围控制算法中的增益系数。具体的，首先分离出麦克风阵列接收的各个车载音响喇叭播放的音频信号和车内各个人员交流时发出的音频信号。使用基于盖尔圆盘定理的信源估计算法对麦克风阵列的音频信号矩阵进行处理，得到当前汽车内声源的个数/＞，即车载音响喇叭的个数与车内说话人员的个数之和，其中基于盖尔圆盘定理的信源估计算法为公知技术，不再赘述。使用基于独立成分分析的盲源分离算法对麦克风阵列的音频信号矩阵/＞进行处理，得到个独立音频信号数据序列/＞，即各个车载音响喇叭播放的音频信号和车内各个人员交流时的音频信号对应的音频信号数据序列。需要说明的是，独立成分分析的盲源分离算法为现有公知技术，本实施例在此不做相关赘述。使用快速傅里叶变换对所有的音频信号数据序列和独立音频信号数据序列/＞分别进行处理，分别得到对应的频域上的音频信号序列，记为频域音频信号序列/＞，序列/＞中的元素表示音频信号中对应频率分量振幅的幅值，其中快速傅里叶变化为公知技术，不再赘述。对得到的所有频域音频信号序列/＞分别提取对应的频域音频特征向量，具体的，以音频信号数据序列/＞对应的频域音频信号序列/＞为例，计算频域音频信号序列/＞上的最大值/＞、最小值/＞、峰峰值/＞、均值/＞、峭度值/＞、裕度值/＞这6个特征值，得到频域音频信号序列/＞对应的频域音频特征向量/＞，其中这6个特征值的计算为公知技术，不再赘述。进而，本实施例根据各音频信号数据序列及频域音频特征向量之间的关系，计算各个音频信号数据序列之间的音频相似度/＞：上式中：表示第/＞个和第/＞个音频信号数据序列之间的音频相似度；/＞表示这两个音频信号数据序列对应的频域音频特征向量/＞之间的欧式距离，用来反应这两个音频信号在频域上的相似性；/＞表示这两个音频信号数据序列之间的/＞距离，用来反应这两个音频信号在时域上的相似性，其中/＞算法为公知技术，不再赘述；/＞、/＞均表示调参常数，用来防止/＞、/＞值为0，其中/＞、/＞均取经验值为1，实施者可自行选取设定。的值越小，表示第/＞个和第/＞个音频信号在频域上的分布特征越相似，的值越小，表示这两个音频信号在时域上的分布特征越相似，说明这两个音频信号所处的噪声环境越相似，并且越具有相似的频率范围和音频内容，即/＞的值越大。则车载音响的/＞个喇叭对应的音频信号数据序列之间具有较高的音频相似度，这是因为车载音响的喇叭播放的是同一个音频，具有相同的频率范围和音频内容和相似的噪音环境，而车载音响的喇叭对应的音频信号数据序列与车内人员对应的音频信号数据序列之间具有较小的音频相似度，这是因为车载音响的喇叭播放的音频一般带有音效、音乐等元素或者是合成的电子音，与车内人员说话产生的音频信号之间在音频信号的频率和内容上具有较大的差异。计算所有的独立音频信号数据序列之间的音频相似度，筛选出其中音频相似度最大的/＞个独立音频信号数据序列/＞，/＞取经验值为6，即/＞个车载音响喇叭所播放的音频对应的音频信号数据序列，记为车载音响喇叭音频信号数据序列/＞。使用维纳滤波算法对所有的车载音响喇叭音频信号数据序列/＞分别进行去噪处理，得到去噪处理后的车载音响喇叭音频信号数据序列/＞，其中维纳滤波算法为公知技术，不再赘述。得到该汽车的车载音响喇叭播放的音频在第/＞个采集周期内被汽车内噪声影响的程度，即车载音响喇叭音频噪声影响度/＞，其计算方法为：上式中：表示在第/＞个采集周期内第/＞个车载音响喇叭播放的音频信号的强度与其所包含的噪声信号的强度之间的相对强度关系，其中音频信号的强度指的是音频信号在其频域内的振幅幅值的分布情况，用来表示第/＞个车载音响喇叭播放的音频信号中噪声信号的包含程度，记为车载音频噪声包含度；/＞表示在第/＞个采集周期内第/＞个车载音响喇叭音频信号数据序列/＞中的第/＞个采样点对应的振幅；/＞表示在第/＞个采集周期内车载音响喇叭音频信号数据序列/＞去噪后得到的音频信号数据序列中的第/＞个采样信号对应的振幅；/＞表示车载音响喇叭音频信号数据序列/＞中所包含的采集信号的数量。在第个采集周期内的第/＞个车载音响喇叭音频信号数据序列/＞中各个采样信号的振幅在去噪前后的变化越大，即/＞的值越大，表示在第/＞个采集周期内该车载音响喇叭播放的音频信号中包含噪声的程度越大，即/＞的值越大，说明该车载音响喇叭播放的音频信号在第/＞个采集周期内被汽车内噪声干扰的程度越大，即/＞的值越大。表示第/＞个车载音响喇叭在第/＞个采集周期内的车载音频听感度，用来表示该喇叭播放的音频信号在汽车内各个座位上的感知程度；/＞表示音频信号数据序列对应的去噪后的音频信号数据序列；/＞表示汽车中第/＞个座位上的麦克风在第/＞个采集周期内接收到的音频信号数据序列，用来表示该座位上乘坐的人员听到的车载音响播放的音频信号；/＞表示在第/＞个采集周期内，这两个音频信号数据序列之间的音频相似度；/＞表示汽车中座位的个数，即麦克风的个数。在第个采集周期内，第/＞个车载音响喇叭播放的音频信号与汽车中各个座位上听到的音频信号之间的相似度越高，即/＞的值越大，表示汽车中各个座位上听到的该车载音响喇叭播放的音频信号越清晰，质量越好，说明汽车内乘坐的人员对该车载音响喇叭播放的音频的体验感越好，即/＞的值越大。而汽车内乘坐的人员对该喇叭播放的音频的体验感越好，说明该车载音响喇叭播放的音频信号受到汽车内噪声干扰的程度越小，即/＞的值越小。表示汽车的车载音响喇叭播放的音频在第/＞个采集周期内的车载音响喇叭音频噪声影响度；/＞表示车载音响喇叭的个数；/＞表示调参常数，用来防止分母为0，其中取经验值为1；/＞为归一化函数，作用为对括号内的数值进行归一化。在第个采集周期内，汽车的各个车载音响喇叭播放的音频信号中噪声的包含程度越大，即/＞的值越大，并且汽车内乘坐的人员对各个车载音响喇叭播放的音频的体验感越差，即/＞的值越小，说明汽车的车载音响喇叭播放的音频被汽车内噪声的影响程度越大，即/＞的值越大，则此时应提高汽车的各个车载音响喇叭在下个采集周期内音频播放的音量，即增大动态范围控制算法的增益系数，以提高车载音响喇叭播放的音频信号在各个频段上的振幅，来降低车载音响喇叭播放的音频信号中噪声的包含度以及增强车内乘坐人员对音频内容的感知程度。其次，获取车载音响喇叭播放的音频对车内人员交流时的干扰程度。具体的，使用基于的/＞估计算法对第/＞个采集周期内的麦克风阵列的音频信号矩阵/＞以及各个阵元麦克风的空间坐标向量/＞进行处理，其中该算法中先验信号数目的值为/＞，阵元数目的值为/＞，得到第/＞个采集周期内汽车中/＞个声源在球坐标系下的俯仰角/＞和方位角/＞的值，基于的/＞估计算法为公知技术，用于估计信号源的方向或位置，具体过程本实施例在此不做赘述。分别计算这/＞个声源相对于汽车中各个座位上的乘坐人员以及各个车载音响喇叭的声源归属度/＞，声源归属度/＞的计算方法为：上式中：表示第/＞个声源相对于第/＞个麦克风所在的位置的声源归属度；/＞、/＞分别表示第/＞个声源对应的俯仰角和方位角；/＞、/＞分别表示/＞个麦克风或者车载音响喇叭对应的俯仰角和方位角；/＞、/＞均表示调参常数，用来防止分母为0，其中/＞、/＞均取经验值为1。第个声源与第/＞个麦克风或者车载音响喇叭的俯仰角以及方位角之间的差值越小，表示声源归属度/＞的值越大，说明第/＞个独立音频信号数据序列/＞对应的声源越可能是第/＞个座位上的乘坐人员或者车载音响喇叭。基于这个声源相对于各个座位上的乘坐人员以及各个车载音响喇叭的声源归属度/＞，将与声源对应的声源归属度最大的位置作为声源的声源归属位置，得到这个独立音频信号数据序列/＞对应的声源归属位置，除去其中归属/＞个车载音响喇叭的独立音频信号数据序列/＞，得到剩余的/＞个归属乘坐人员的独立音频信号数据序列/＞，记为乘坐人员音频信号数据序列/＞，并得到各个乘坐人员音频信号数据序列/＞对应的麦克风接收的音频信号数据序列/＞。得到车内的乘坐人员在第个采集周期内进行交流时受到车载音响喇叭播放的音频的干扰程度，即人员交流音频干扰度/＞，其计算方法为：上式中：表示在第/＞个采集周期车内进行交流的人员中第/＞个乘坐人员的车内交流模糊度；/＞表示在第/＞个采集周期第/＞个乘坐人员对应的乘坐人员音频信号数据序列；/＞表示第/＞个采集周期内除了/＞对应的麦克风接收的音频信号数据序列之外的第/＞个麦克风接收的音频信号数据序列；/＞表示这两个音频信号数据序列之间的音频相似度；/＞表示车内座位的个数，即麦克风的个数；/＞表示对/＞中的数取倒数；/＞表示车载音响喇叭的个数；/＞表示在该采集周期内汽车中声源的个数；表示在该采集周期内汽车中没有人员说话，则将此时的车内人员交流模糊度/＞的值赋值为0。在第个采集周期内，第/＞个乘坐人员的乘坐人员音频信号数据序列与其余座位上麦克风接收的音频信号数据序列之间的相似度越低，即/＞的值越小，表示在其余座位上的乘坐人员听到第/＞个乘坐人员发出的音频信号的内容越模糊，则/＞的值越大，说明在此采集周期内，车内乘坐人员之间的交流受到车载音响喇叭播放的音频的影响越大，即/＞的值越大。表示在第/＞个采集周期内第/＞个乘坐人员的乘坐人员音频信号数据序列的车载音响喇叭综合干扰距离；/＞表示该乘坐人员所在座位的麦克风对应的空间坐标向量；/＞表示第/＞个车载音响喇叭对应的空间坐标向量；/＞表示这两个向量之间的欧式距离；/＞表示车载音响喇叭的个数。其中，所述空间坐标向量为/＞，具体获取方法通过上述过程提取，在此不做赘述。在第个采集周期内，第/＞个乘坐人员与车内各个车载音响喇叭之间的距离越小，即/＞的值越小，表示该乘坐人员越靠近车载音响喇叭，并且靠近该乘坐人员的车载音响喇叭的数量越多，则/＞的值越小。而/＞的值越小，说明该乘坐人员受到车载音响喇叭的影响越明显，包括听觉上的干扰和交流之间的困难，则/＞的值越大。/＞表示车内的乘坐人员在第/＞个采集周期内进行交流时的人员交流音频干扰度；/＞表示在第/＞个采集周期内汽车内进行交流的乘坐人员的个数；/＞表示调参常数，用来防止分母为0，其中/＞取经验值为1；/＞为归一化函数，作用为对括号内的数值进行归一化。在第个采集周期内，汽车内进行交流的各个人员的车内交流模糊度越大，即的值越大，并且他们的车载音响喇叭综合干扰距离越小，即/＞的值越小，说明汽车内的乘坐人员在第/＞个采集周期内进行交流时，被车载音响喇叭播放的音频的干扰程度越大，即/＞的值越大，则此时应降低汽车的各个车载音响喇叭在下个采集周期内音频播放的音量，即减小动态范围控制算法的增益系数，以提高车内人员进行交流时的听觉体验。进一步的，得到第个时刻的车载音响喇叭的音频播放音量对应的增益系数调节指数/＞，其计算方法为：上式中：、/＞分别表示在第/＞个采集周期内的车载音响喇叭音频噪声影响度和人员交流音频干扰度；/＞、/＞均表示增益系数调节指数/＞的值域控制参数，即增益系数调节程度的控制参数，其中/＞、/＞均取经验值为1，则/＞的值域为/＞。的值越大，表示第/＞个采集周期内的车载音响喇叭播放的音频受到车内噪声的影响程度越大，因此需要增大增益系数来放大车载音响喇叭播放的音频信号的幅度，以提高音频信号的清晰度和可听性，则第/＞个时刻对应的增益系数的值应越大，即/＞的值越大；/＞的值越大，表示第/＞个采集周期内的车载音响喇叭播放的音频对车内人员之间的语言交流造成的干扰越大，因此需要降低增益系数来确保车载音响喇叭播放的音频声音不会过于突出，从而保证车内人员交流的清晰度和顺畅性，则第/＞个时刻对应的增益系数的值应越小，即/＞的值越小。步骤S003，基于增益系数调节指数完成对汽车车载音响喇叭音场的自适应调节。利用动态范围控制算法计算汽车的车载音响喇叭的音频播放音量对应的增益系数，其中动态范围控制算法中的参数：压缩比、阈值、攻击时间、释放时间、补偿增益、拐点宽度、输入输出增益限制分别取经验值为：Ratio=1：1、Threshold=-15dB、Attack Time=0.004s、Release Time=0.1s、make-up Gain=1dB、Kneewide=0、Input Gain Limiting=-6dB、Output Gain Limiting=-3dB。需要说明的是，各参数的取值实施者可自行设定，本实施例对此不做特殊限制。基于上述动态范围控制算法所得到的增益系数和增益系数调节指数/＞得到用于调节第/＞个时刻的车载音响喇叭的音频播放音量的增益系数/＞：对第个时刻的车载音响喇叭播放的音频应用增益系数/＞，来对第个时刻的车载音响喇叭播放的音频进行音量的调节，完成对汽车车载音响喇叭的自适应调节。增益系数自适应更新具体过程如图3所示。综上所述，本发明实施例提出一种汽车车载音响喇叭自适应音场调节方法，针对传统的动态范围控制算法不能自适应的调节增益系数，而导致音频的输出音量在复杂场景下过高或过低而影响用户听觉体验的问题，本发明实施例基于汽车车载音响喇叭播放音频时汽车中音频信号的分布情况，构建车载音频噪声包含度以及车内乘坐人员的车载音频听感度，以获取车载音响喇叭音频噪声影响度，对车载音响喇叭音频噪声影响度较大时刻的增益系数赋予较大的值，降低汽车内噪声对车内播放的音频的影响程度，以提高汽车内乘坐的人员对播放的音频的体验感；进一步，本发明实施例基于车内乘坐人员交流时的音频信号的分布情况，构建乘坐人员的车内交流模糊度和车载音响喇叭综合干扰距离来得到汽车内的人员交流音频干扰度，对车内播放的音频对汽车内乘坐的人员交流时干扰程度较大的时刻赋予较小的值，来确保车内播放的音频声音不会过于突出，从而保证车内人员交流的清晰度和顺畅性，基于车载音响喇叭音频噪声影响度和人员交流音频干扰度，得到车载音响喇叭播放音频时各个时刻的增益系数调节指数，进而计算用于调节车载音响喇叭播放音频的音量的增益系数，使得车载音响喇叭播放音频的音量调节结果更适合当前的场景，提高了车内乘坐人员的听觉体验。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。且上述对本说明书特定实施例进行了描述。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同或相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述实施例仅用以说明本申请的技术方案，而非对其限制；对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的范围，均应包含在本申请的保护范围之内。
