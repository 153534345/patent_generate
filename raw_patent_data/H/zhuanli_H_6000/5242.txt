标题title
一种配置表项的方法及设备
摘要abst
本申请提供了一种配置表项的方法及设备，其中该方法包括重启并运行已生成的运行启动文件；执行运行启动文件中的最高优先级执行序号的接入控制表的新增指令，配置硬件接入控制表项；执行运行启动文件中的中间优先级执行序号的策略路由的新增指令，配置硬件策略路由表项；执行运行启动文件中的最低优先级执行序号的模块化服务质量命令的新增指令，配置模块化服务质量命令表项。
权利要求书clms
1.一种配置表项的方法，其特征在于，所述方法包括，重启并运行已生成的运行启动文件；执行所述运行启动文件中的最高优先级执行序号的接入控制表的新增指令，配置硬件接入控制表项；执行所述运行启动文件中的中间优先级执行序号的策略路由的新增指令，配置硬件策略路由表项；执行所述运行启动文件中的最低优先级执行序号的模块化服务质量命令的新增指令，配置模块化服务质量命令表项。2.根据权利要求1所述的方法，其特征在于，所述重启并运行已生成的运行启动文件之前，所述方法还包括，生成具有执行序号优先级由高到低的所述接入控制表的新增指令、所述策略路由的新增指令、所述模块化服务质量命令新增指令的所述运行启动文件；保存所述运行启动文件。3.根据权利要求1所述的方法，其特征在于，所述生成具有执行序号优先级由高到低的所述接入控制表的新增指令、所述策略路由的新增指令、所述模块化服务质量命令新增指令的所述运行启动文件包括：识别配置文件的接入控制表的新增指令的配置时间戳、策略路由的新增指令的配置时间戳、模块化服务质量命令的新增指令的配置时间戳；为具有最早配置时间戳的所述接入控制表的新增指令分配最高优先级的执行序号；为具有中间配置时间戳的所述策略路由的新增指令分配中间优先级的执行序号，为具有最晚配置时间戳的所述模块化服务质量命令的新增指令分配最低优先级的执行序号。4.根据权利要求3所述的方法，其特征在于，所述识别配置文件的接入控制表的新增指令的配置时间戳、策略路由的新增指令的配置时间戳、模块化服务质量命令的新增指令的配置时间戳之前，所述方法还包括：配置所述配置文件的接入控制表的新增指令并记录第一时间戳；配置所述配置文件的策略路由的新增指令并记录第二时间戳；配置所述配置文件的模块化服务质量命令的新增指令并记录第三时间戳；所述第一时间戳为所述最早配置时间戳；所述第二时间戳为所述中间配置时间戳；所述第三时间戳为所述最晚配置时间戳。5.一种配置表项的设备，其特征在于，所述设备包括处理器和存储器；所述存储器用于存储处理器可执行指令；所述处理器执行所述处理器可执行指令用于执行以下处理，重启并运行已生成的运行启动文件；执行所述运行启动文件中的最高优先级执行序号的接入控制表的新增指令，配置硬件接入控制表项；执行所述运行启动文件中的中间优先级执行序号的策略路由的新增指令，配置硬件策略路由表项；执行所述运行启动文件中的最低优先级执行序号的模块化服务质量命令的新增指令，配置模块化服务质量命令表项。6.根据权利要求5所述的设备，其特征在于，所述处理器执行所述处理器可执行指令执行重启并运行已生成的运行启动文件的处理之前，所述处理器执行所述处理器执行指令还执行以下处理，生成具有执行序号优先级由高到低的所述接入控制表的新增指令、所述策略路由的新增指令、所述模块化服务质量命令新增指令的所述运行启动文件；保存所述运行启动文件。7.根据权利要求6所述的设备，其特征在于，所述处理器执行所述处理器可执行指令用以执行所述生成具有执行序号优先级由高到低的所述接入控制表的新增指令、所述策略路由的新增指令、所述模块化服务质量命令新增指令的所述运行启动文件的处理包括：识别配置文件的接入控制表的新增指令的配置时间戳、策略路由的新增指令的配置时间戳、模块化服务质量命令的新增指令的配置时间戳；为具有最早配置时间戳的所述接入控制表的新增指令分配最高优先级的执行序号；为具有中间配置时间戳的所述策略路由的新增指令分配中间优先级的执行序号，为具有最晚配置时间戳的所述模块化服务质量命令的新增指令分配最低优先级的执行序号。8.根据权利要求7所述的设备，其特征在于，所述处理器执行所述处理器可执行指令执行所述识别配置文件的接入控制表的新增指令的配置时间戳、策略路由的新增指令的配置时间戳、模块化服务质量命令的新增指令的配置时间戳之前，所述处理器执行所述处理器可执行指令还执行以下处理，配置所述配置文件的接入控制表的新增指令并记录第一时间戳；配置所述配置文件的策略路由的新增指令并记录第二时间戳；配置所述配置文件的模块化服务质量命令的新增指令并记录第三时间戳；所述第一时间戳为所述最早配置时间戳；所述第二时间戳为所述中间配置时间戳；所述第三时间戳为所述最晚配置时间戳。
说明书desc
技术领域本申请涉及通信技术，特别涉及一种配置表项的方法及设备。背景技术ACL是一或多条规则的集合，用于识别报文流。ACL表项包括描述报文匹配条件的判断语句，这些条件可以是报文的源地址、目的地址、端口号等。网络设备在不同的策略中对ACL进行调用，起到匹配流量进而执行相应动作的作用。PBR调用ACL表项从而根据用户指定的策略执行路由转发。每个策略路由可以由包含一个或者多个节点。每个节点由节点编号来标识。节点编号越小节点的优先级越高，优先级高的节点优先被执行。策略路由的各节点应用不同的接入控制表项。图1所示为已有的PBR调用ACL表项方式之一的示意图，标识为PBR1的策略路由2048个节点组成，节点0引用的ACL 3000的表项由3002条规则组成MQC包含三个要素：流分类、流行为、策略。用户通过MQC将指定的类和流行为绑定起来；支持动态修改流分类、流行为、策略内容；支持动态修改ACL配置内容。MQC与PBR都需要流分类处理过程中调用ACL进行流量匹配；在新增ACL表项、PBR、MQC时，需要保证先新增ACL、然后新增PBR、最后新增MQC。但是，由于执行新增ACL、PBR、MQC的指令被配置在通信设备的配置文件，这些新增指令被保存到需要在重启后执行的运行文件时无法保证这些新增指令的执行顺序；设备重启后执行运行文件时庚无法依序执行新增ACL、PBR、MQC的指令，ACL表项乱序，PBR和MQC调用失败，转发和数据处理也会失败，导致网络业务终端，重新测试调试设置这些新增ACL、PBR、MQC指令时需要耗费大量时间。发明内容本申请的目的提供一种配置表项的方法及设备，确保依序配置硬件ACL表项以及PBR、MQC依序可靠调用硬件ACL表项。为实现上述目的，本申请提供了一种配置表项的方法，该方法包括，重启并运行已生成的运行启动文件；执行运行启动文件中的最高优先级执行序号的接入控制表的新增指令，配置硬件接入控制表项；执行运行启动文件中的中间优先级执行序号的策略路由的新增指令，配置硬件策略路由表项；执行运行启动文件中的最低优先级执行序号的模块化服务质量命令的新增指令，配置模块化服务质量命令表项。为实现上述目的，本申请还提供了一种配置表项的设备，该设备包括处理器和存储器；存储器用于存储处理器可执行指令；处理器执行处理器可执行指令用于执行以下处理，重启并运行已生成的运行启动文件；执行运行启动文件中的最高优先级执行序号的接入控制表的新增指令，配置硬件接入控制表项；执行运行启动文件中的中间优先级执行序号的策略路由的新增指令，配置硬件策略路由表项；执行运行启动文件中的最低优先级执行序号的模块化服务质量命令的新增指令，配置模块化服务质量命令表项。本申请有益效果在于，通信设备重启后执行运行文件时根据执行序号的优先级依序执行ACL、PBR、MQC的新增指令，确保依序配置通信设备的交换芯片的硬件ACL表项、PBR表项、MQC信息。附图说明图1所示为已有的PBR调用ACL表项方式之一的示意图；图2所示为本申请提供的配置表项的方法实施例的流程示意图；图3所示为本申请提供的配置表项的另一方法实施例的流程示意图；图4所示为本申请提供的配置表项的设备实施例的示意图。具体实施方式将以多个附图所示的多个例子进行详细说明。在以下详细描述中，多个具体细节用于提供对本申请的全面理解。实例中没有详细地描述已知的方法、步骤、组件以及电路，以免使这些例子的难于理解。使用的术语中，术语“包括”表示包括但不限于；术语“含有”表示包括但不限于；术语“以上”、“以内”以及“以下”包含本数；术语“大于”、“小于”表示不包含本数。术语“基于”表示至少基于其中一部分。图2所示为本申请提供的配置表项的方法实施例的流程示意图；步骤201，重启并运行已生成的运行启动文件；步骤202，执行运行启动文件中的最高优先级执行序号的接入控制表的新增指令，配置硬件接入控制表项；步骤203，执行运行启动文件中的中间优先级执行序号的策略路由的新增指令，配置硬件策略路由表项；步骤204，执行运行启动文件中的最低优先级执行序号的模块化服务质量命令的新增指令，配置模块化服务质量命令表项。图2所示实施例有益效果在于，通信设备重启后执行运行文件时根据执行序号的优先级依序执行ACL、PBR、MQC的新增指令，确保依序配置通信设备的交换芯片的硬件ACL表项、PBR表项、MQC信息。图3所示为本申请提供的配置表项的另一方法实施例的流程示意图；步骤301，配置配置文件的ACL的新增指令并记录第一时间戳；步骤302，配置配置文件的PBR的新增指令并记录第二时间戳；步骤303，配置配置文件的模块化服务质量命令的新增指令并记录第三时间戳；第一时间戳T1早于第二时间戳T2，第二时间戳T2早于第三时间戳T3。步骤304，生成具有执行序号优先级由高到低的接入控制表的新增指令、策略路由的新增指令、模块化服务质量命令新增指令的运行启动文件；本申请中，通信设备识别配置文件中的接入控制表的新增指令的配置时间戳T1、策略路由的新增指令的配置时间戳T2、模块化服务质量命令的新增指令的配置时间戳T3；为配置文件中，配置时间戳T1为标记序号的ACL的新增指令分配最高优先级的执行序号S1；为配置时间戳T2为标记序号的策略路由的新增指令分配中间优先级的执行序号S2，配置时间戳T3为标记序号的模块化服务质量命令的新增指令分配最低优先级的执行序号。步骤305，保存运行启动文件。步骤306，重启并运行已生成的运行启动文件；步骤307，执行运行启动文件中的最高优先级执行序号的接入控制表的新增指令，配置硬件接入控制表项；步骤308，执行运行启动文件中的中间优先级执行序号的策略路由的新增指令，配置硬件策略路由表项；步骤309，执行运行启动文件中的最低优先级执行序号的模块化服务质量命令的新增指令，配置模块化服务质量命令表项。图3所示实例的有益效果在于，不仅避免通信设备中交换芯片的硬件ACL表项乱序，还能保证交换芯片优先为PBR调用硬件ACL表项处理报文后，再为MQC调用硬件ACL表项，确保了硬件ACL表项、PBR表项和MQC信息正常处理报文。图4所示为本申请提供的配置表项的设备实施例的示意图。该设备包括处理器、存储器以及通信接口；存储器用于存储处理器可执行指令；处理器执行处理器可执行指令用于执行，重启并运行已生成的运行启动文件；执行运行启动文件中的最高优先级执行序号的接入控制表的新增指令，配置硬件接入控制表项；执行运行启动文件中的中间优先级执行序号的策略路由的新增指令，配置硬件策略路由表项；执行运行启动文件中的最低优先级执行序号的模块化服务质量命令的新增指令，配置模块化服务质量命令表项。处理器执行处理器可执行指令执行重启并运行已生成的运行启动文件的处理之前，处理器执行处理器执行指令还执行生成具有执行序号优先级由高到低的接入控制表的新增指令、策略路由的新增指令、模块化服务质量命令新增指令的运行启动文件；保存运行启动文件。处理器执行处理器可执行指令执行生成具有执行序号优先级由高到低的接入控制表的新增指令、策略路由的新增指令、模块化服务质量命令新增指令的运行启动文件的处理包括：识别配置文件的接入控制表的新增指令的配置时间戳、策略路由的新增指令的配置时间戳、模块化服务质量命令的新增指令的配置时间戳；为具有最早配置时间戳的接入控制表的新增指令分配最高优先级的执行序号；为具有中间配置时间戳的策略路由的新增指令分配中间优先级的执行序号，为具有最晚配置时间戳的模块化服务质量命令的新增指令分配最低优先级的执行序号。处理器执行处理器可执行指令执行识别配置文件的接入控制表的新增指令的配置时间戳、策略路由的新增指令的配置时间戳、模块化服务质量命令的新增指令的配置时间戳之前，处理器执行处理器可执行指令还执行，配置配置文件的接入控制表的新增指令并记录第一时间戳；配置配置文件的策略路由的新增指令并记录第二时间戳；配置配置文件的模块化服务质量命令的新增指令并记录第三时间戳；第一时间戳为最早配置时间戳；第二时间戳为中间配置时间戳；第三时间戳为最晚配置时间戳。以上仅为本申请的较佳实施例而已，并不用以限制本申请，凡在本申请的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本申请保护的范围之内。
