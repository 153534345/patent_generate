标题title
一种基于双模通信模块的通信控制方法及系统
摘要abst
本发明公开一种基于双模通信模块的通信控制方法及系统，涉及电力载波通信技术领域，采用双模通信模块进行电力数据通信，所述双模通信模块包括HPLC宽带载波模块、HRF微功率无线模块和基于芯片的通信控制模块；本发明以HPLC宽带载波模块的高速载波通信为主，HRF微功率无线模块的高速无线通信为辅；在双模同时通信时段，HPLC宽带载波模块和HRF微功率无线模块均工作，远端服务器计算HPLC宽带载波模块的丢包率，若丢包率大于设定的丢包率阈值，输出载波通信异常结果，报警提醒工作人员进行及时检修，采用HRF微功率无线模块临时代替HPLC宽带载波模块进行电力运行数据的采集，大幅提升电力数据采集的可靠性。
权利要求书clms
1.一种基于双模通信模块的通信控制方法，其特征在于：采用双模通信模块进行电力数据通信，所述双模通信模块包括HPLC宽带载波模块、HRF微功率无线模块和基于芯片的通信控制模块；通信控制模块控制HPLC宽带载波模块和HRF微功率无线模块的方法是：在24小时内，设置载波通信时段和双模同时通信时段，在载波通信时段通信控制模块控制HPLC宽带载波模块的数据输入端采集电力设备的电力运行数据，并进行载波调制，HPLC宽带载波模块的载波通信输出端将载波信号通过电力线传输给电力载波信号解调模块，电力载波信号解调模块解调载波信号后将电力运行数据包传输给远端服务器；在双模同时通信时段通信控制模块控制HPLC宽带载波模块和HRF微功率无线模块同时工作，同时采集电力设备的电力运行数据，HPLC宽带载波模块采用载波通信形式将电力运行数据传输给远端服务器，HRF微功率无线模块采用无线通信模式将电力设备的电力运行数据传输给远端服务器；设定丢包率阈值，远端服务器分别解析双模通信的电力运行数据，并进行数据完整性对比，基于HRF微功率无线模块传输的电力运行数据作为标准数据，计算HPLC宽带载波模块所传输电力运行数据的丢包率，若计算丢包率超过丢包率阈值则输出载波通信异常结果，远端服务器进行报警并反馈给通信控制模块，在检修前，通信控制模块控制HRF微功率无线模块在载波通信时段和双模同时通信时段持续进行无线电力通信。2.根据权利要求1所述的一种基于双模通信模块的通信控制方法，其特征在于：载波通信时段是凌晨四点到第二天凌晨三点，双模同时通信时段是凌晨三点到四点。3.根据权利要求2所述的一种基于双模通信模块的通信控制方法，其特征在于：在载波通信时段，通信控制模块控制HPLC宽带载波模块每隔两分钟采集电力设备的电力运行数据；在双模同时通信时段，通信控制模块分别控制HPLC宽带载波模块和HRF微功率无线模块每隔两分钟同时采集电力设备的电力运行数据，远端服务器接收到HPLC宽带载波模块传输电力设备的电力运行数据包，解析后按照时间节点顺序分别记为Ca1、Ca2、……、Ca31，解析HRF微功率无线模块无线传输的电力设备的电力运行数据包，分别记为W1、W2、……、W31。4.根据权利要求3所述的一种基于双模通信模块的通信控制方法，其特征在于：每个采集时间节点的电力运行数据包均附加时间节点数据。5.根据权利要求4所述的一种基于双模通信模块的通信控制方法，其特征在于：远端服务器对数据完整性对比的方法是：解调双模同时通信时段HPLC宽带载波模块输出的载波信号数据包，记为Carr1、Carr2、……、Carrn，n代表按照时间顺序收到的载波信号数据包数量，解析双模同时通信时段HRF微功率无线模块无线传输的电力运行数据包，分别记为W1、W2、……、W31；计算整体丢包率，计算公式为；其中是整体丢包率；计算分时段丢包率，统计解析时间节点为凌晨三点到凌晨三点二十分的载波信号数据包数量为w，上述时间节点不包括凌晨三点二十分，分时段丢包率计算公式为；统计解析时间节点为凌晨三点二十分到凌晨三点四十分之间的载波信号数据包数量为x，上述时间节点包括凌晨三点二十分，不包括凌晨三点四十分，分时段丢包率计算公式为：；统计解析时间节点为凌晨三点四十分到凌晨四点之间的载波信号数据包数量为y，上述时间节点包括凌晨三点四十分和凌晨四点，分时段丢包率计算公式为：；设置整体丢包率阈值a和分时段丢包率阈值/＞b，若/＞＞/＞a，或/＞＞/＞b，或/＞＞/＞b，或/＞＞/＞b，输出载波通信异常结果。6.根据权利要求5所述的一种基于双模通信模块的通信控制方法，其特征在于：在丢包率计算前先判断Carr1的时间节点是否为凌晨三点，同时Carrn的时间节点是否为凌晨四点，若是再计算整体丢包率和分时段丢包率；否则输出载波通信异常结果。7.一种基于双模通信模块的通信控制系统，其特征在于：包括双模通信模块、电力线、电力载波信号解调模块、服务器端HRF无线模块和远端服务器，所述双模通信模块包括HPLC宽带载波模块、HRF微功率无线模块和基于芯片的通信控制模块，HPLC宽带载波模块和HRF微功率无线模块的数据输入端分别与电力设备的电力运行数据输出端通信连接，HPLC宽带载波模块的载波信号输出端通过电力线与电力载波信号解调模块通信连接，电力载波信号解调模块的数据输出端与远端服务器通信连接，HRF微功率无线模块与服务器端HRF无线模块无线组网，将电力设备的电力运行数据无线传输给服务器端HRF无线模块，服务器端HRF无线模块的数据输出端与远端服务器通信连接，远端服务器设置采用权利要求6所述通信控制方法设计的控制程序，远端服务器运行控制程序，在载波通信时段解析HPLC宽带载波模块通过电力线传输的电力设备的电力运行数据进行存储记录，当判断载波通信强干扰时，通过服务器端HRF无线模块与HRF微功率无线模块通信，实现与通信控制模块交互判断结果数据，通信控制模块控制HRF微功率无线模块在载波通信时段和双模同时通信时段持续进行无线电力通信。8.根据权利要求7所述的一种基于双模通信模块的通信控制系统，其特征在于：还包括声光报警器，所述远端服务器控制声光报警器的执行动作。9.根据权利要求8所述的一种基于双模通信模块的通信控制系统，其特征在于：还包括复位按钮，所述复位按钮与通信控制模块通信连接，在工作人员接收到报警信息后进行干扰检修处置后，用于复位通信控制模块的控制模式。10.根据权利要求9所述的一种基于双模通信模块的通信控制系统，其特征在于：还包括显示屏，所述远端服务器控制显示屏的显示内容。
说明书desc
技术领域本发明涉及电力载波通信技术领域，尤其是涉及一种基于双模通信模块的通信控制方法及系统。背景技术HPLC宽带载波通信技术即高速电力线载波通信，是一种在低压电力线上进行高速数据传输的技术。HPLC技术采用了正交频分复用技术，频段使用2MHz至12MHz，相比于传统的低速窄带电力线载波技术，其具有更大的带宽和更高的传输速率，能够满足低压电力线载波通信更高的需求。公开号为CN116545477A的中国发明专利申请公开了一种基于HPLC的通信方法及装置，其说明书中提出HPLC信号经过变压器时，信号衰减过大，导致信号失真，传输失败。变压器限制了HPLC的传输距离和传输范围的技术问题；通过设置HPLC设备，并与变压器的高压侧和低压侧连接，如此在接收到HPLC信号后，HPLC设备可以实现跨越变压器的信号转发，避免了变压器对HPLC信号的影响。进一步的，HPLC设备基于目标电力线的长度，确定HPLC信号的转发功率，保证了目标电力线上对端设备可以正常接收HPLC设备转发的HPLC信号，保证了HPLC信号的正常传输。上述技术方案一定程度解决其背景技术里提出的HPLC信号衰减、传输距离和范围受限的问题，但是效果实际上通过功率的调整对抗变压器的强干扰效果一般，且功率的频繁调整会影响到设备的稳定性。发明内容为了解决上述技术问题，本发明提供一种基于双模通信模块的通信控制方法及系统。采用如下的技术方案：一种基于双模通信模块的通信控制方法，采用双模通信模块进行电力数据通信，所述双模通信模块包括HPLC宽带载波模块、HRF微功率无线模块和基于芯片的通信控制模块；通信控制模块控制HPLC宽带载波模块和HRF微功率无线模块的方法是：在24小时内，设置载波通信时段和双模同时通信时段，在载波通信时段通信控制模块控制HPLC宽带载波模块的数据输入端采集电力设备的电力运行数据，并进行载波调制，HPLC宽带载波模块的载波通信输出端将载波信号通过电力线传输给电力载波信号解调模块，电力载波信号解调模块解调载波信号后将电力运行数据包传输给远端服务器；在双模同时通信时段通信控制模块控制HPLC宽带载波模块和HRF微功率无线模块同时工作，同时采集电力设备的电力运行数据，HPLC宽带载波模块采用载波通信形式将电力运行数据传输给远端服务器，HRF微功率无线模块采用无线通信模式将电力设备的电力运行数据传输给远端服务器；设定丢包率阈值，远端服务器分别解析双模通信的电力运行数据，并进行数据完整性对比，基于HRF微功率无线模块传输的电力运行数据作为标准数据，计算HPLC宽带载波模块所传输电力运行数据的丢包率，若计算丢包率超过丢包率阈值则输出载波通信异常结果，远端服务器进行报警并反馈给通信控制模块，在检修前，通信控制模块控制HRF微功率无线模块在载波通信时段和双模同时通信时段持续进行无线电力通信。通过采用上述技术方案，采用载波加无线的双模低压集抄通信方式来对电力设备进行电力运行数据的采集，具体的电力设备可以是智能电表等，根据设计要求，可以设定时间进行电力数据的采集；电力设备的电力运行数据采用双模通信模块实现，通信介质为电力线的高速载波和高速无线，载波和无线两种通讯方式信道特性完全不同，应用时以HPLC宽带载波模块的高速载波通信为主，HRF微功率无线模块的高速无线通信为辅，在具体运行时，由于HPLC宽带载波模块的载波信号会经过变压器，在变压器的干扰下会出现失真丢包现象，而高速无线传输受到供电和网络架构等影响，并不适用于电力数据采集的长期工作，却适合作为高速载波的辅助通信模式；具体使用时，在24小时内，设置载波通信时段和双模同时通信时段，在载波通信时段时，通信控制模块控制HPLC宽带载波模块进行电力数据采集工作，HRF微功率无线模块处于休眠待机状态；在双模同时通信时段，HPLC宽带载波模块和HRF微功率无线模块均工作，这时远端服务器接收到的电力运行数据是双份的，HRF微功率无线模块采集的数据作为标准数据，计算HPLC宽带载波模块的丢包率，若丢包率大于设定的丢包率阈值，远端服务器会输出HPLC宽带载波模块的载波通信异常结果，进行报警提醒工作人员进行及时检修，此时认为HPLC宽带载波模块的载波信号通信出现异常，异常的产生可能是外部干扰源，也可能是电力线内临时增加的电力设备，包括临时增加的变压器等对HPLC宽带载波模块现在的通信波段产生了干扰，工作人员检修时可以采用变化通信波段的形式来降低通信干扰，还可以通过对干扰源进行处置；在判断载波通信异常结果到完成检修之间，为了电力运行数据采集不间断，采用HRF微功率无线模块临时代替HPLC宽带载波模块进行电力运行数据的采集，并进行高速无线传输，直到完成检修，大幅提升电力数据采集的可靠性。可选的，载波通信时段是凌晨四点到第二天凌晨三点，双模同时通信时段是凌晨三点到四点。通过采用上述技术方案，HRF微功率无线模块的主要功能是采集和传输标准数据，选择在凌晨三点到四点的时间段来进行传输，受到外部环境干扰的程度最低。可选的，在载波通信时段，通信控制模块控制HPLC宽带载波模块每隔两分钟采集电力设备的电力运行数据；在双模同时通信时段，通信控制模块分别控制HPLC宽带载波模块和HRF微功率无线模块每隔两分钟同时采集电力设备的电力运行数据，远端服务器接收到HPLC宽带载波模块传输电力设备的电力运行数据包，解析后按照时间节点顺序分别记为Ca1、Ca2、……、Ca31，解析HRF微功率无线模块无线传输的电力设备的电力运行数据包，分别记为W1、W2、……、W31。通过采用上述技术方案，每隔两分钟采集一个电力运行数据，一个小时内，包括开始和结束的时间节点，共采集31个数据包，可以便于后续对丢包率的计算。可选的，每个采集时间节点的电力运行数据包均附加时间节点数据。通过采用上述技术方案，时间节点数据能辅助在丢包率计算时进行分时段计算，以及判断开始和结束的关键时间节点数据，还能为数据包内的数据附加时间数据。可选的，远端服务器对数据完整性对比的方法是：解调双模同时通信时段HPLC宽带载波模块输出的载波信号数据包，记为Carr1、Carr2、……、Carrn，n代表按照时间顺序收到的载波信号数据包数量，解析双模同时通信时段HRF微功率无线模块无线传输的电力运行数据包，分别记为W1、W2、……、W31；计算整体丢包率，计算公式为；其中是整体丢包率；计算分时段丢包率，统计解析时间节点为凌晨三点到凌晨三点二十分的载波信号数据包数量为w，上述时间节点不包括凌晨三点二十分，分时段丢包率计算公式为；统计解析时间节点为凌晨三点二十分到凌晨三点四十分之间的载波信号数据包数量为x，上述时间节点包括凌晨三点二十分，不包括凌晨三点四十分，分时段丢包率计算公式为：；统计解析时间节点为凌晨三点四十分到凌晨四点之间的载波信号数据包数量为y，上述时间节点包括凌晨三点四十分和凌晨四点，分时段丢包率计算公式为：；设置整体丢包率阈值a和分时段丢包率阈值/＞b，若/＞＞/＞a，或＞/＞b，或/＞＞/＞b，或/＞＞/＞b，输出载波通信异常结果。可选的，在丢包率计算前先判断Carr1的时间节点是否为凌晨三点，同时Carrn的时间节点是否为凌晨四点，若是再计算整体丢包率和分时段丢包率；否则输出载波通信异常结果。通过采用上述技术方案，远端服务器一般是具有一定算力的服务器计算机，对数据完整性对比分为三个阶段，开始时需要判断双模同时通信时段通过载波通信第一个收到数据包Carr1的时间节点是否为凌晨三点，同时通过载波通信收到的最后一个数据包Carrn的时间节点是否为凌晨四点，若都是，那么可以继续进行丢包率的计算，否则认为关键时间节点的数据包存在丢失，那么直接可以认为载波通信异常；在计算丢包率时，可以先计算整体的丢包率，设置整体丢包率阈值a，若整体丢包率/＞大于整体丢包率阈值/＞a，那么就可以直接判断载波通信异常；若整体丢包率在允许范围内，那么就需要计算分时段丢包率，分时段丢包率将一个小时分成三个时间段，来分别计算分时段丢包率，分时段丢包率能反映丢包的集中程度，若某个时间段存在分时段丢包率大于分时段丢包率阈值b，同样需要输出载波通信异常的判断结果。一种基于双模通信模块的通信控制系统，包括双模通信模块、电力线、电力载波信号解调模块、服务器端HRF无线模块和远端服务器，所述双模通信模块包括HPLC宽带载波模块、HRF微功率无线模块和基于芯片的通信控制模块，HPLC宽带载波模块和HRF微功率无线模块的数据输入端分别与电力设备的电力运行数据输出端通信连接，HPLC宽带载波模块的载波信号输出端通过电力线与电力载波信号解调模块通信连接，电力载波信号解调模块的数据输出端与远端服务器通信连接，HRF微功率无线模块与服务器端HRF无线模块无线组网，将电力设备的电力运行数据无线传输给服务器端HRF无线模块，服务器端HRF无线模块的数据输出端与远端服务器通信连接，远端服务器设置采用一种基于双模通信模块的通信控制方法设计的控制程序，远端服务器运行控制程序，在载波通信时段解析HPLC宽带载波模块通过电力线传输的电力设备的电力运行数据进行存储记录，当判断载波通信强干扰时，通过服务器端HRF无线模块与HRF微功率无线模块通信，实现与通信控制模块交互判断结果数据，通信控制模块控制HRF微功率无线模块在载波通信时段和双模同时通信时段持续进行无线电力通信。可选的，还包括声光报警器，所述远端服务器控制声光报警器的执行动作。可选的，还包括复位按钮，所述复位按钮与通信控制模块通信连接，在工作人员接收到报警信息后进行干扰检修处置后，用于复位通信控制模块的控制模式。可选的，还包括显示屏，所述远端服务器控制显示屏的显示内容。通过采用上述技术方案，远端服务器工作时，可以将解析的电力运行数据通过显示屏进行显示，当输出载波通信异常的具体双模通信模块时，控制声光报警器进行报警，工作人员及时观看显示屏显示的载波通信异常数据，及时来到载波通信异常的具体双模通信模块对应的电力设备处进行异常处置，当处置完成后，通过操作复位按钮使通信控制模块进入正常的双模通信模式，保证电力设备的电力运行数据采集的稳定性。综上所述，本发明包括以下至少一种有益技术效果：本发明能提供一种基于双模通信模块的通信控制方法及系统，电力设备的电力运行数据采用双模通信模块实现，通信介质为电力线的高速载波和高速无线，以HPLC宽带载波模块的高速载波通信为主，HRF微功率无线模块的高速无线通信为辅；设置载波通信时段和双模同时通信时段，在载波通信时段时，通信控制模块控制HPLC宽带载波模块进行电力数据采集工作，HRF微功率无线模块处于休眠待机状态；在双模同时通信时段，HPLC宽带载波模块和HRF微功率无线模块均工作，这时远端服务器接收到HRF微功率无线模块采集的数据作为标准数据，计算HPLC宽带载波模块的丢包率，若丢包率大于设定的丢包率阈值，远端服务器输出HPLC宽带载波模块的载波通信异常结果，进行报警提醒工作人员进行及时检修；在判断载波通信异常结果到完成检修之间采用HRF微功率无线模块临时代替HPLC宽带载波模块进行电力运行数据的采集，直到完成检修，大幅提升电力数据采集的可靠性。附图说明图1是本发明一种基于双模通信模块的通信控制系统的电器件连接原理示意图；图2是本发明一种基于双模通信模块的通信控制系统双模通信模块的电器件连接原理示意图。附图标记说明：1、HPLC宽带载波模块；2、HRF微功率无线模块；3、通信控制模块；100、电力设备；101、电力线；102、电力载波信号解调模块；103、服务器端HRF无线模块；104、远端服务器；106、声光报警器；107、复位按钮；108、显示屏。具体实施方式以下结合附图对本发明作进一步详细说明。本发明实施例公开一种基于双模通信模块的通信控制方法及系统。参照图1和图2，一种基于双模通信模块的通信控制方法，采用双模通信模块进行电力数据通信，双模通信模块包括HPLC宽带载波模块1、HRF微功率无线模块2和基于芯片的通信控制模块3；通信控制模块3控制HPLC宽带载波模块1和HRF微功率无线模块2的方法是：在24小时内，设置载波通信时段和双模同时通信时段，在载波通信时段通信控制模块3控制HPLC宽带载波模块1的数据输入端采集电力设备100的电力运行数据，并进行载波调制，HPLC宽带载波模块1的载波通信输出端将载波信号通过电力线101传输给电力载波信号解调模块102，电力载波信号解调模块102解调载波信号后将电力运行数据包传输给远端服务器104；在双模同时通信时段通信控制模块3控制HPLC宽带载波模块1和HRF微功率无线模块2同时工作，同时采集电力设备100的电力运行数据，HPLC宽带载波模块1采用载波通信形式将电力运行数据传输给远端服务器104，HRF微功率无线模块2采用无线通信模式将电力设备100的电力运行数据传输给远端服务器104；设定丢包率阈值，远端服务器104分别解析双模通信的电力运行数据，并进行数据完整性对比，基于HRF微功率无线模块2传输的电力运行数据作为标准数据，计算HPLC宽带载波模块1传输电力运行数据的丢包率，若计算丢包率超过丢包率阈值则输出载波通信异常结果，远端服务器104进行报警并反馈给通信控制模块3，在检修前，通信控制模块3控制HRF微功率无线模块2在载波通信时段和双模同时通信时段持续进行无线电力通信。采用载波加无线的双模低压集抄通信方式来对电力设备100进行电力运行数据的采集，具体的电力设备100进可以是智能电表等，根据设计要求，可以设定时间进行电力数据的采集；电力设备100的电力运行数据采用双模通信模块实现，通信介质为电力线101的高速载波和高速无线，载波和无线两种通讯方式信道特性完全不同，应用时以HPLC宽带载波模块1的高速载波通信为主，HRF微功率无线模块2的高速无线通信为辅，在具体运行时，由于HPLC宽带载波模块1的载波信号会经过变压器，在变压器的干扰下会出现失真丢包现象，而高速无线传输受到供电和网络架构等影响，并不适用于电力数据采集的长期工作，却适合作为高速载波的辅助通信模式；具体使用时，在24小时内，设置载波通信时段和双模同时通信时段，在载波通信时段时，通信控制模块3控制HPLC宽带载波模块1进行电力数据采集工作，HRF微功率无线模块2处于休眠待机状态；在双模同时通信时段，HPLC宽带载波模块1和HRF微功率无线模块2均工作，这时远端服务器104接收到的电力运行数据是双份的，HRF微功率无线模块2采集的数据作为标准数据，计算HPLC宽带载波模块1的丢包率，若丢包率大于设定的丢包率阈值，远端服务器104会输出HPLC宽带载波模块1的载波通信异常结果，进行报警提醒工作人员进行及时检修，此时认为HPLC宽带载波模块1的载波信号通信出现异常，异常的产生可能是外部干扰源，也可能是电力线101内临时增加的电力设备，包括临时增加的变压器等对HPLC宽带载波模块1现在的通信波段产生了干扰，工作人员检修时可以采用变化通信波段的形式来降低通信干扰，还可以通过对干扰源进行处置；在判断载波通信异常结果到完成检修之间，为了电力运行数据采集不间断，采用HRF微功率无线模块2临时代替HPLC宽带载波模块1进行电力运行数据的采集，并进行高速无线传输，直到完成检修，大幅提升电力数据采集的可靠性。载波通信时段是凌晨四点到第二天凌晨三点，双模同时通信时段是凌晨三点到四点。HRF微功率无线模块2的主要功能是采集和传输标准数据，选择在凌晨三点到四点的时间段来进行传输，受到外部环境干扰的程度最低。在载波通信时段，通信控制模块3控制HPLC宽带载波模块1每隔两分钟采集电力设备100的电力运行数据；在双模同时通信时段，通信控制模块3分别控制HPLC宽带载波模块1和HRF微功率无线模块2每隔两分钟同时采集电力设备100的电力运行数据，远端服务器104接收到HPLC宽带载波模块1传输电力设备100的电力运行数据包，解析后按照时间节点顺序分别记为Ca1、Ca2、……、Ca31，解析HRF微功率无线模块2无线传输的电力设备100的电力运行数据包，分别记为W1、W2、……、W31。每隔两分钟采集一个电力运行数据，一个小时内，包括开始和结束的时间节点，共采集31个数据包，可以便于后续对丢包率的计算。每个采集时间节点的电力运行数据包均附加时间节点数据。时间节点数据能辅助在丢包率计算时进行分时段计算，以及判断开始和结束的关键时间节点数据，还能为数据包内的数据附加时间数据。远端服务器104对数据完整性对比的方法是：解调双模同时通信时段HPLC宽带载波模块1输出的载波信号数据包，记为Carr1、Carr2、……、Carrn，n代表按照时间顺序收到的载波信号数据包数量，解析双模同时通信时段HRF微功率无线模块2无线传输的电力运行数据包，分别记为W1、W2、……、W31；计算整体丢包率，计算公式为；其中是整体丢包率；计算分时段丢包率，统计解析时间节点为凌晨三点到凌晨三点二十分的载波信号数据包数量为w，上述时间节点不包括凌晨三点二十分，分时段丢包率计算公式为；统计解析时间节点为凌晨三点二十分到凌晨三点四十分之间的载波信号数据包数量为x，上述时间节点包括凌晨三点二十分，不包括凌晨三点四十分，分时段丢包率计算公式为：；统计解析时间节点为凌晨三点四十分到凌晨四点之间的载波信号数据包数量为y，上述时间节点包括凌晨三点四十分和凌晨四点，分时段丢包率计算公式为：；设置整体丢包率阈值a和分时段丢包率阈值/＞b，若/＞＞/＞a，或＞/＞b，或/＞＞/＞b，或/＞＞/＞b，输出载波通信异常结果。在丢包率计算前先判断Carr1的时间节点是否为凌晨三点，同时Carrn的时间节点是否为凌晨四点，若是再计算整体丢包率和分时段丢包率；否则输出载波通信异常结果。远端服务器104一般是具有一定算力的服务器计算机，对数据完整性对比分为三个阶段，开始时需要判断双模同时通信时段通过载波通信第一个收到数据包Carr1的时间节点是否为凌晨三点，同时通过载波通信收到的最后一个数据包Carrn的时间节点是否为凌晨四点，若都是，那么可以继续进行丢包率的计算，否则认为关键时间节点的数据包存在丢失，那么直接可以认为载波通信异常；在计算丢包率时，可以先计算整体的丢包率，设置整体丢包率阈值a，若整体丢包率/＞大于整体丢包率阈值/＞a，那么就可以直接判断载波通信异常；若整体丢包率在允许范围内，那么就需要计算分时段丢包率，分时段丢包率将一个小时分成三个时间段，来分别计算分时段丢包率，分时段丢包率能反映丢包的集中程度，若某个时间段存在分时段丢包率大于分时段丢包率阈值b，同样需要输出载波通信异常的判断结果。一种基于双模通信模块的通信控制系统，包括双模通信模块、电力线101、电力载波信号解调模块102、服务器端HRF无线模块103和远端服务器104，双模通信模块包括HPLC宽带载波模块1、HRF微功率无线模块2和基于芯片的通信控制模块3，HPLC宽带载波模块1和HRF微功率无线模块2的数据输入端分别与电力设备100的电力运行数据输出端通信连接，HPLC宽带载波模块1的载波信号输出端通过电力线101与电力载波信号解调模块102通信连接，电力载波信号解调模块102的数据输出端与远端服务器104通信连接，HRF微功率无线模块2与服务器端HRF无线模块103无线组网，将电力设备100的电力运行数据无线传输给服务器端HRF无线模块103，服务器端HRF无线模块103的数据输出端与远端服务器104通信连接，远端服务器104设置采用一种基于双模通信模块的通信控制方法设计的控制程序，远端服务器104运行控制程序，在载波通信时段解析HPLC宽带载波模块1通过电力线101传输的电力设备100的电力运行数据进行存储记录，当判断载波通信强干扰时，通过服务器端HRF无线模块103与HRF微功率无线模块2通信，实现与通信控制模块3交互判断结果数据，通信控制模块3控制HRF微功率无线模块2在载波通信时段和双模同时通信时段持续进行无线电力通信。还包括声光报警器106，远端服务器104控制声光报警器106的执行动作。还包括复位按钮107，复位按钮107与通信控制模块3通信连接，在工作人员接收到报警信息后进行干扰检修处置后，用于复位通信控制模块3的控制模式。还包括显示屏108，远端服务器104控制显示屏108的显示内容。远端服务器104工作时，可以将解析的电力运行数据通过显示屏108进行显示，当输出载波通信异常的具体双模通信模块时，控制声光报警器106进行报警，工作人员及时观看显示屏108显示的载波通信异常数据，及时来到载波通信异常的具体双模通信模块对应的电力设备100处进行异常处置，当处置完成后，通过操作复位按钮107使通信控制模块3进入正常的双模通信模式，保证电力设备100的电力运行数据采集的稳定性。以下通过具体的实施案例来说明一种基于双模通信模块的通信控制方法及系统的实施原理：在具体的电能表运行数据采集应用中，在24小时内，设置载波通信时段和双模同时通信时段，载波通信时段是凌晨四点到第二天凌晨三点，双模同时通信时段是凌晨三点到四点。在载波通信时段通信控制模块3控制HPLC宽带载波模块1的数据输入端采集电力设备100的电力运行数据，并进行载波调制，HPLC宽带载波模块1的载波通信输出端将载波信号通过电力线101传输给电力载波信号解调模块102，电力载波信号解调模块102解调载波信号后将电力运行数据包传输给远端服务器104；在双模同时通信时段通信控制模块3控制HPLC宽带载波模块1和HRF微功率无线模块2同时工作，同时采集电力设备100的电力运行数据，HPLC宽带载波模块1采用载波通信形式将电力运行数据传输给远端服务器104，HRF微功率无线模块2采用无线通信模式将电力设备100的电力运行数据传输给远端服务器104；在某工作日，解调双模同时通信时段HPLC宽带载波模块1输出的载波信号数据包，记为Carr1、Carr2、……、Carr28，解析双模同时通信时段HRF微功率无线模块2无线传输的电力运行数据包，分别记为W1、W2、……、W31；在丢包率计算前先判断Carr1的时间节点数据为凌晨三点，Carr28的时间节点为凌晨四点；继续计算整体丢包率，计算公式为=0.0968；整体丢包率阈值a为0.1，/＞小于/＞a；则继续计算分时段丢包率，统计解析时间节点为凌晨三点到凌晨三点二十分的载波信号数据包数量为9，分时段丢包率计算公式为=0.1；统计解析时间节点为凌晨三点二十分到凌晨三点四十分之间的载波信号数据包数量为10，上述时间节点包括凌晨三点二十分，不包括凌晨三点四十分，分时段丢包率计算公式为：=0；统计解析时间节点为凌晨三点四十分到凌晨四点之间的载波信号数据包数量为9，上述时间节点包括凌晨三点四十分和凌晨四点，分时段丢包率计算公式为：=0.1818；设置分时段丢包率阈值b=0.1，此时在凌晨三点四十分到凌晨四点之间的，分时段丢包率/＞＞/＞b，输出载波通信异常结果。远端服务器104通过显示屏108进行显示载波通信异常结果对应的电能表位置和异常数据，控制声光报警器106进行报警，工作人员及时观看显示屏108显示的载波通信异常数据，及时来到载波通信异常的电能表处进行异常处置，当处置完成后，通过操作复位按钮107使通信控制模块3进入正常的双模通信模式，保证电能表的电力运行数据采集的稳定性。以上均为本发明的较佳实施例，并非以此限制本发明的保护范围，故：凡依本发明的结构、形状、原理所做的等效变化，均应涵盖于本发明的保护范围之内。
