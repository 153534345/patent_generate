标题title
一种用于服务器的融合供电系统
摘要abst
本发明涉及服务器技术领域。本发明公开了一种用于服务器的融合供电系统，包括：主板，主板包括多个主板连接器，与主板连接器连接的合路开关电路，与合路开关电路连接的优先级控制单元和主板电压调整器；与对应的主板连接器连接的扩展板，扩展板包括电源单元；与对应的主板连接器连接的多个供电设备；优先级控制单元配置为预先配置与主板连接的电源单元和供电设备的优先级，基于电源单元和供电设备的优先级控制合路开关电路以选择电源单元或对应的供电设备对主板电压调整器进行供电。通过本发明的方案，能够适应不同的应用场景，并且在不同场景中有且仅有唯一供电来源。
权利要求书clms
1.一种用于服务器的融合供电系统，其特征在于，包括：主板，所述主板包括多个主板连接器，与所述主板连接器连接的合路开关电路，与所述合路开关电路连接的优先级控制单元和主板电压调整器；与对应的主板连接器连接的扩展板，所述扩展板包括电源单元；与对应的主板连接器连接的多个供电设备；所述优先级控制单元配置为预先配置与所述主板连接的电源单元和供电设备的优先级，基于所述电源单元和所述供电设备的优先级控制所述合路开关电路以选择所述电源单元或对应的供电设备对所述主板电压调整器进行供电。2.根据权利要求1所述的融合供电系统，其特征在于，所述合路开关电路包括：多个合路电子开关，所述合路电子开关通过主板连接器与所述供电设备连接，所述合路电子开关、所述主板连接器与所述供电设备一一对应；与所述合路电子开关连接的融合合路电子开关，所述融合合路电子开关与所述主板电压调整器连接。3.根据权利要求2所述的融合供电系统，其特征在于，所述扩展板包括：扩展板连接器，所述扩展板连接器分别与所述对应的主板连接器和所述电源单元连接，其中，所述扩展板连接器为带在位信号的扩展板连接器或不带在位信号的扩展板连接器。4.根据权利要求3所述的融合供电系统，其特征在于，所述不带在位信号的扩展板连接器分别与所述对应的主板连接器和所述电源单元连接；所述合路开关电路还包括与所述不带在位信号的扩展板连接器连接的合路电子开关。5.根据权利要求2所述的融合供电系统，其特征在于，在服务器上电后，所述优先级控制单元配置为：判断所述电源单元是否接入所述主板；若是所述电源单元接入所述主板，则生成强制关断信号以强制断开所有的供电设备对所述主板的供电；判断所述电源单元输出的电压是否满足预设要求；若是所述电源单元输出的电压满足预设要求，则打开所述融合合路电子开关以通过所述电源单元为所述主板电压调整单元进行供电。6.根据权利要求5所述的融合供电系统，其特征在于，还包括多个供电管理单元，与供电设备对应的主板连接器通过对应的供电管理单元与对应的合路电子开关连接。7.根据权利要求6所述的融合供电系统，其特征在于，所述优先级控制单元进一步配置为：若是所述电源单元未接入所述主板，则按照优先级由高到低的顺序依次判断是否有供电设备接入所述主板；若是有所述供电设备接入所述主板，则生成强制关断信号以强制断开比当前供电设备的优先级低的供电设备对所述主板的供电；打开所述供电管理单元和对应的合路电子开关，并向所述服务器发送当前供电设备正常信号；在所述合路开关电路中，判断所述对应的合路电子开关与所述融合合路电子开关连接的公共端的电压是否满足预设要求；若是所述公共端的电压满足要求，则打开所述融合合路电子开关以通过所述当前供电设备对所述主板电压调整器进行供电。8.根据权利要求7所述的融合供电系统，其特征在于，打开所述供电管理单元和对应的合路电子开关，包括：延迟第一预设时间后，判断所述当前供电设备输出的电压是否满足预设要求；若所述当前供电设备输出的电压满足预设要求，则打开所述供电管理单元和对应的合路电子开关。9.根据权利要求7所述的融合供电系统，其特征在于，所述优先级控制单元进一步配置为：判断所述融合合路电子开关与所述主板电压调整器之间的电压是否满足预设要求；若所述融合合路电子开关与所述主板电压调整器之间的电压满足预设要求，则向所述服务器发送主板电压调整器供电正常信号；若所述融合合路电子开关与所述主板电压调整器之间的电压不满足预设要求，则向所述服务器发送主板电压调整器供电故障信号。10.根据权利要求7所述的融合供电系统，其特征在于，在所述供电设备对所述主板电压调整器进行供电后，所述优先级控制单元配置为：获取当前供电设备的优先级；基于所述当前供电设备的优先级判断是否触发仲裁；若是所述当前供电设备的优先级触发仲裁，则监测比所述当前供电设备的优先级高的供电设备的输出电压；响应于所述输出电压高于阈值，关闭与所述当前供电设备对应的合路电子开关，并在延迟第二预设时间后，依次打开所述供电管理单元和所述比所述当前供电设备的优先级高的供电设备对应的合路电子开关以通过所述比当前供电设备优先级高的供电设备对所述主板电压调整器进行供电。
说明书desc
技术领域本发明涉及服务器技术领域，尤其涉及一种用于服务器的融合供电系统。背景技术随着物联网的大规模应用，在靠近物或数据源头一侧产生庞大的本地数据任务，加重了云端处理的难度，边缘计算技术随之得到广泛应用。这意味着许多控制将通过本地设备实现而无需交由云端，处理过程将在本地服务器的边缘计算层完成。因此需要部署大量边缘微服务器。这无疑将大大提升数据的处理效率，减轻云端的负荷。边缘微服务器更加靠近用户，还可为用户提供更快的响应，将需求在边缘侧解决。然而，边缘侧存在复杂多样的实际应用场景，不同的应用场景供电设备不尽相同。现有边缘计算供电设备单一很难广泛应用于全球各种复杂应用场景。如图1所示，为现有边缘微服务器供电系统示意图。1a为各种供电输入形式，包括适配器、电池组、AC-DC、DC-DC等其他供电设备。1b为连接器，连接供电设备与边缘微服务器。1c为边缘微服务器等边缘设备。现有技术仅能满足单一场景应用，不能满足复杂多变的应用场景，不利于边缘设备推广。为此，本发明提出一种边缘微服务器融合供电系统，既然满足工业场景，PoE供电场景，也能满足室内户外多种复杂场景，加速边缘计算设备广泛部署。发明内容有鉴于此，本发明提出了一种用于服务器的融合供电系统，解决了现有边缘服务器供电系统仅能满足单一应用场景的问题，实现了不同优先级的供电来源能够唯一的接入边缘服务器，并对其进行供电。基于上述目的，本发明实施例的一方面提供了一种用于服务器的融合供电系统，融合供电系统具体包括：主板，所述主板包括多个主板连接器，与所述主板连接器连接的合路开关电路，与所述合路开关电路连接的优先级控制单元和主板电压调整器；与对应的主板连接器连接的扩展板，所述扩展板包括电源单元；与对应的主板连接器连接的多个供电设备；所述优先级控制单元配置为预先配置与所述主板连接的电源单元和供电设备的优先级，基于所述电源单元和所述供电设备的优先级控制所述合路开关电路以选择所述电源单元或对应的供电设备对所述主板电压调整器进行供电。在一些实施方式中，所述合路开关电路包括：多个合路电子开关，所述合路电子开关通过主板连接器与所述供电设备连接，所述合路电子开关、所述主板连接器与所述供电设备一一对应；与所述合路电子开关连接的融合合路电子开关，所述融合合路电子开关与所述主板电压调整器连接。在一些实施方式中，所述扩展板包括：扩展板连接器，所述扩展板连接器分别与所述对应的主板连接器和所述电源单元连接，其中，所述扩展板连接器为带在位信号的扩展板连接器或不带在位信号的扩展板连接器。在一些实施方式中，所述不带在位信号的扩展板连接器分别与所述对应的主板连接器和所述电源单元连接；所述合路开关电路还包括与所述不带在位信号的扩展板连接器连接的合路电子开关。在一些实施方式中，在服务器上电后，所述优先级控制单元配置为：判断所述电源单元是否接入所述主板；若是所述电源单元接入所述主板，则生成强制关断信号以强制断开所有的供电设备对所述主板的供电；判断所述电源单元输出的电压是否满足预设要求；若是所述电源单元输出的电压满足预设要求，则打开所述融合合路电子开关以通过所述电源单元为所述主板电压调整单元进行供电。在一些实施方式中，还包括多个供电管理单元，与供电设备对应的主板连接器通过对应的供电管理单元与对应的合路电子开关连接。在一些实施方式中，所述优先级控制单元进一步配置为：若是所述电源单元未接入所述主板，则按照优先级由高到低的顺序依次判断是否有供电设备接入所述主板；若是有所述供电设备接入所述主板，则生成强制关断信号以强制断开比当前供电设备的优先级低的供电设备对所述主板的供电；打开所述供电管理单元和对应的合路电子开关，并向所述服务器发送当前供电设备正常信号；在所述合路开关电路中，判断所述对应的合路电子开关与所述融合合路电子开关连接的公共端的电压是否满足预设要求；若是所述公共端的电压满足要求，则打开所述融合合路电子开关以通过所述当前供电设备对所述主板电压调整器进行供电。在一些实施方式中，打开所述供电管理单元和对应的合路电子开关，包括：延迟第一预设时间后，判断所述当前供电设备输出的电压是否满足预设要求；若所述当前供电设备输出的电压满足预设要求，则打开所述供电管理单元和对应的合路电子开关。在一些实施方式中，所述优先级控制单元进一步配置为：判断所述融合合路电子开关与所述主板电压调整器之间的电压是否满足预设要求；若所述融合合路电子开关与所述主板电压调整器之间的电压满足预设要求，则向所述服务器发送主板电压调整器供电正常信号；若所述融合合路电子开关与所述主板电压调整器之间的电压不满足预设要求，则向所述服务器发送主板电压调整器供电故障信号。在一些实施方式中，在所述供电设备对所述主板电压调整器进行供电后，所述优先级控制单元配置为：获取当前供电设备的优先级；基于所述当前供电设备的优先级判断是否触发仲裁；若是所述当前供电设备的优先级触发仲裁，则监测比所述当前供电设备的优先级高的供电设备的输出电压；响应于所述输出电压高于阈值，关闭与所述当前供电设备对应的合路电子开关，并在延迟第二预设时间后，依次打开所述供电管理单元和所述比所述当前供电设备的优先级高的供电设备对应的合路电子开关以通过所述比当前供电设备优先级高的供电设备对所述主板电压调整器进行供电。本发明至少具有以下有益技术效果：通过优先级控制单元配置与主板连接的电源单元和供电设备的优先级，基于电源单元和供电设备的优先级控制合路开关电路以选择电源单元或对应的供电设备对主板电压调整器进行供电。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的实施例。图1为现有边缘服务器供电系统的结构示意图；图2为本发明提供的用于服务器的融合供电系统的一实施例的示意图；图3为本发明提供的用于边缘服务器的融合供电系统的一实施例的结构示意图；图4为本发明提供的优先级控制单元对如图3所示的融合供电系统进行供电控制的一实施例的流程框图；图5为本发明提供的优先级控制单元对如图3所示的融合供电系统在第三优先级工业供电正常供电情况下进行仲裁的一实施例的流程框图；图6为本发明提供的优先级控制单元对如图3所示的融合供电系统在第四优先级PoE正常供电情况下进行仲裁的一实施例的流程框图。具体实施方式为使本发明的目的、技术方案和优点更加清楚明白，以下结合具体实施例，并参照附图，对本发明实施例进一步详细说明。需要说明的是，本发明实施例中所有使用“第一”和“第二”的表述均是为了区分两个相同名称非相同的实体或者非相同的参量，可见“第一”“第二”仅为了表述的方便，不应理解为对本发明实施例的限定，后续实施例对此不再一一说明。基于上述目的，本发明实施例的第一个方面，提出了一种用于服务器的融合供电系统的实施例。如图2所示，融合供电系统具体包括：主板10，所述主板10包括多个主板连接器100，与所述主板连接器100连接的合路开关电路110，与所述合路开关电路110连接的优先级控制单元120和主板电压调整器130；与对应的主板连接器100连接的扩展板20，所述扩展板20包括电源单元200；与对应的主板连接器100连接的多个供电设备30；所述优先级控制单元120配置为预先配置与所述主板连接的电源单元200和供电设备30的优先级，基于所述电源单元200和所述供电设备30的优先级控制所述合路开关电路110以选择所述电源单元200或对应的供电设备30对所述主板电压调整器130进行供电。本实施例的融合供电设备适用于服务器，尤其是边缘服务器等边缘设备。扩展板用于扩展主板的功能，扩展板上包括扩展板电压调整器、存储器、网卡、PCIE接口等，主要用于数据中心。电压调整器用于为主板或扩展板上的各个硬件设备供电，电压调整器的输入电压包括但不限于12V；包括但不限于由隔离和非隔离电源、线性电源并联串联组成。本实施例分别用主板电压调整器和扩展板电压调整器来区分设置于主板上的电压调整器和扩展板上的电压调整器。电源单元，所述的电源单元包含但不限于AC-DC电源、高压直流电源。PSU输入包含但不限于220Vac市电输入、高压直流电输入。PSU输出电压包含但不限于12V直流电压。供电设备，包括可以给服务器提供供电的设备，包括适配器、电池组、工业供电、PoE等各种供电设备。合路开关电路包含但不限于二极管构成的合路电路、MOSFET构成的合路电路、二极管与MOSFET混合串并联合路电路、借用其他部分电路等效而来的合路电路、类MOSFET开关器件以及结构件形成的合路电路。例如合路开关电路由多个MOSFET开关器件组成，每个MOSFET开关器件对应于一个供电设备，合路开关电路用于接收优先级控制单元的信号以相应地控制供电设备与主板电压调整期的导通或断开。通过优先级控制单元配置各种供电设备和扩展板上的电源单元的优先级，实现唯一优先级供电控制逻辑，保障边缘微服务器的融合供电系统按照既定的优先级顺序供电，在不同场景中有且仅有唯一供电来源。一旦有其中一种供电来源通过对应的连接器端口接入，其他供电将会被强制关闭。优选地，将扩展板上的供电单元设置为最高优先级，供电设备的优先级根据实际应用场景，可以自定义。通过融合不同供电接口形式电气规格的供电来源可以适用不同工作场景下配置的有限供电形式。本发明实施例的融合供电系统，通过优先级控制单元配置与主板连接的电源单元和供电设备的优先级，基于电源单元和供电设备的优先级控制合路开关电路以选择电源单元或对应的供电设备对主板电压调整器进行供电。在一些实施方式中，所述合路开关电路包括：多个合路电子开关，所述合路电子开关通过主板连接器与所述供电设备连接，所述合路电子开关、所述主板连接器与所述供电设备一一对应；与所述合路电子开关连接的融合合路电子开关，所述融合合路电子开关与所述主板电压调整器连接。在一些实施方式中，所述扩展板包括：扩展板连接器，所述扩展板连接器分别与所述对应的主板连接器和所述电源单元连接，其中，所述扩展板连接器为带在位信号的扩展板连接器或不带在位信号的扩展板连接器。在一些实施方式中，所述不带在位信号的扩展板连接器分别与所述对应的主板连接器和所述电源单元连接；所述合路开关电路还包括与所述不带在位信号的扩展板连接器连接的合路电子开关。如图3所示，为本发明提供的用于边缘服务器的融合供电系统的一实施例的结构示意图。融合供电系统具体包括：主板，主板包括多个主板连接器，与主板连接器连接的合路开关电路，与合路开关电路连接的优先级控制单元和主板电压调整器VR1；与主板连接的扩展板，扩展板包括PSU、分别与PSU连接的扩展板连接器J0、扩展板电压调整单元VR0；与主板连接的多个供电设备，分别为：适配器、PoE、工业供电、电池组；PSU、适配器、PoE、工业供电、电池组分别通过对应的主板连接器J1、J2、J3、J4连接到主板。主板可以单独作为产品满足实际要求工作；主板与扩展板组装成为整体作为产品满足实际要求工作，主板与扩展板组合为整体后，J2、J3、J4被拆除或遮挡阻止PSU以外的所有电接入。主板和扩展板的PSU通过连接器J0和连接器J1相连接，实现对插。优先级控制单元配置PSU、适配器、PoE、工业供电、电池组的优先级，例如，PSU为第一优先级、适配器为第二优先级、PoE为第四优先级、工业供电为第三优先级。通过实现唯一优先级供电控制逻辑控制合路开关电路，保障供电来源设备按照既定的优先级顺序对服务器的主板进行供电，且在不同场景中有且仅有唯一供电来源。PSU包含但不限于AC-DC电源、高压直流电源。PSU输入包含但不限于220Vac市电输入、高压直流电输入。PSU输出电压包含但不限于12V直流电压，PSU输出12V电压通过连接器J0和J1为边缘微服务器的主板供电，同时也为扩展板电压调整单元VR0供电。电源模块VR0包含但不限于由隔离和非隔离电源、线性电源并联串联组成；电源模块VR0包含但不限于12V直流电压输入，本发明实施例的电源模块VR0的输入电压包含但不限于12V直流电压。所包含的边缘微服务器主板供电系统由连接器J1、J2、J3、J4，热插拔电路H0、H1，整流电路，DC-DC电源模块M0、M1，合路电子开关S1-S4组成的合路开关电路，优先级控制电路，VR1组成。合路开关电路包含但不限于二极管构成的合路电路、MOSFET构成的合路电路、二极管与MOSFET混合串并联合路电路、借用其他部分电路等效而来的合路电路、类MOSFET开关器件以及结构件形成的合路电路。合路开关电路中的每一个合路电子开关均与对应的主板连接器连接以串联连接至对应的供电来源，每一个合路电子开关的并联，并且输出端均连接到融合合路电子开关的输入端，融合合路电子开关的输出端连接到主板电压调整器。优先级控制单元包含但不限于由基础逻辑控制电路、单片机、CPLD、具有逻辑控制功能的集成芯片构成。多种类型供电来源经合路开关电路融合后给主板电压调整器VR1供电，由优先级控制电路根据实际需求设计控制各供电的优先级以及供电逻辑和供电仲裁。主板连接器J1，连接扩展板连接器J0和合路开关电路的S4，实现扩展板的PSU以第一优先级接入。扩展板连接器J0如不带在位信号，在合路开关电路中还包括开关S0，主板连接器J1通过合路开关电路的S0连接到合路开关电路的S4，此时需通过优先级控制单元检测PSU输出到连接器J1与开关S0之间电压来实现PSU以第一优先级进行供电，例如，采用PSU输出电压高于3.3V，控制开关S1-S3断开实现PSU第一优先级供电；扩展板连接器J0连接器J1如带在位信号，在位信号会传递给主板连接器J1，此时无需检测PSU输出到主板的电压，通过优先级控制单元控制开关S1-S3断开来实现PSU以第一优先级供电，此时合路开关电路中不包含开关S0。PSU实现第一优先级供电后，打开合路供电开关S4为主板电压调整器VR1进行供电。主板连接器J2，符合边缘微服务器所配适配器接口类型。主板连接器J2实现适配器接入边缘微服务器并对边缘微服务器进行供电。主板连接器J3，符合边缘微服务器PoE供电的接口类型，包含但不限于RJ45连接器以及其衍生类型。PoE供电实现边缘微服务器被识别握手成功后，通过RJ45端口主板连接器J3给边缘微服务器供电，提供电压幅值范围包含但不限于36-60V。主板连接器J4，符合边缘微服务器工业供电、电池组供电或者其他供电的接口类型，包含但不限于防水连接器。实现工业供电接入边缘微服务器。工业供电输出给边缘微服务器的电压为直流电压，此直流电压范围为9V-60V。优先级控制单元配合合路开关电路实现不同优先级的唯一供电，将优先级定义为：PSU为第一优先级、适配器为第二优先级、PoE为第四优先级、工业供电为第三优先级。第一优先级＞第二优先级＞第三优先级＞第四优先级，扩展板连接器J1为不带在位信号连接器。具体过程如下：若是优先级控制单元监测到当前接入边缘服务器的供电来源为第一优先级的PSU，则生成强制关断信号以断开开关S1-S3，并打开开关S4实现PSU对主板电压调整期VR1的供电并且防止其他供电来源对误插到边缘服务器上。若是优先级控制单元监测到当前接入边缘服务器的供电来源为第二优先级的适配器，则生成强制关断信号以断开开关S2和S3，并打开开关S4实现适配器对主板电压调整期VR1的供电并且防止其他供电来源对误插到边缘服务器上。同时优先级控制单元监测是否有比当前优先级高的供电设备接入，若是有比当前优先级高的供电设备接入，则生成强制关断信号，强制断开当前优先级高的供电设备，本实施例中为适配器，对主板电压调整期VR1的供电并打开合路开关电路中比当前优先级高的供电设备对应的合路开关以通过比当前优先级高的供电设备对主板电压调整期VR1进行供电。若是优先级控制单元监测到当前接入边缘服务器的供电来源为第三优先级的工业供电，则生成强制关断信号以断开开关S2，并打开开关S4实现工业供电对主板电压调整期VR1的供电并且防止其他供电来源对误插到边缘服务器上。同时优先级控制单元监测是否有比当前优先级高的供电设备接入，若是有比当前优先级高的供电设备接入，则生成强制关断信号，强制断开工业供电对主板电压调整期VR1的供电并打开合路开关电路中比当前优先级高的供电设备对应的合路开关以通过比当前优先级高的供电设备对主板电压调整期VR1进行供电。若是优先级控制单元监测到当前接入边缘服务器的供电来源为最低优先级的PoE，则生成强制关断信号以断开关S1-S3，并打开开关S4实现PSU对主板电压调整期VR1的供电并且防止其他供电来源对误插到边缘服务器上。同时优先级控制单元监测是否有比当前优先级高的供电设备接入，若是有比当前优先级高的供电设备接入，则生成强制关断信号，强制断开PoE对主板电压调整期VR1的供电并打开合路开关电路中比当前优先级高的供电设备对应的合路开关以通过比当前优先级高的供电设备对主板电压调整期VR1进行供电。在一些实施方式中，在服务器上电后，所述优先级控制单元配置为：判断所述电源单元是否接入所述主板；若是所述电源单元接入所述主板，则生成强制关断信号以强制断开所有的供电设备对所述主板的供电；判断所述电源单元输出的电压是否满足预设要求；若是所述电源单元输出的电压满足预设要求，则打开所述融合合路电子开关以通过所述电源单元为所述主板电压调整单元进行供电。在一些实施方式中，还包括多个供电管理单元，与供电设备对应的主板连接器通过对应的供电管理单元与对应的合路电子开关连接。供电管理单元用于对主板上的主板连接器、合路开关电路和主板电压调整器和优先级控制单元进行电压保护和/或电压转换。供电管理单元由热插拔电路、DC-DC、AC-DC、整流电路中的任意一个或多个组合而成，具体根据供电设备的种类而定。结合图3，主板连接器J2连接适配器输出和热插拔电路H0输入，热插拔电路H0输出连接合路电子开关S1、实现适配器对主板电压调整期VR1的供电。主板连接器J3连接PoE和整流电路，PoE输出的电压经整流电路后再输入到DC-DC变换器M0再到合路电子开关S3，实现PoE供电对主板电压调整期VR1的供电。主板连接器J4连接工业供电输出和热插拔电路H1输入，经热插拔电路H1输出后到DC-DC变换器M1再到合路电子开关S3，实现工业供电对主板电压调整期VR1的供电。其中，热插拔电路包含但不限于分立开关器构成的和芯片集成内置的单开关、双开关、多开关、开关与二极管混合等形式。整流电路包含但不限于无源桥堆、有源桥、无桥整流、图腾无桥等可以现实交流到直流变化的检测控制电路。DC-DC电源包含但不限于隔离和非隔离电源变换器，包含但不限于模块电源和分立器件构成的电源，包含但不限于正激类变换器。热插拔H0和开关S1可以采用分立器件方案，也可以采用二者集成的设计方案。RJ45连接器通常自带热插拔功能，如采用不带热插拔功能RJ45类型连接器，需匹配相应的热插拔电路，再经整流电路，再经DC-DC电源转换后，通过合路开关电路参与合路。连接器J3连接PoE供电和整流电路，整流后再输入到DC-DC变换器再到合路开关S3，实现边缘微服务器PoE供电接入。在一些实施方式中，所述优先级控制单元进一步配置为：若是所述电源单元未接入所述主板，则按照优先级由高到低的顺序依次判断是否有供电设备接入所述主板；若是有所述供电设备接入所述主板，则生成强制关断信号以强制断开比当前供电设备的优先级低的供电设备对所述主板的供电；打开所述供电管理单元和对应的合路电子开关，并向所述服务器发送当前供电设备正常信号；在所述合路开关电路中，判断所述对应的合路电子开关与所述融合合路电子开关连接的公共端的电压是否满足预设要求；若是所述公共端的电压满足要求，则打开所述融合合路电子开关以通过所述当前供电设备对所述主板电压调整器进行供电。在一些实施方式中，打开所述供电管理单元和对应的合路电子开关，包括：延迟第一预设时间后，判断所述当前供电设备输出的电压是否满足预设要求；若所述当前供电设备输出的电压满足预设要求，则打开所述供电管理单元和对应的合路电子开关。在一些实施方式中，所述优先级控制单元进一步配置为：判断所述融合合路电子开关与所述主板电压调整器之间的电压是否满足预设要求；若所述融合合路电子开关与所述主板电压调整器之间的电压满足预设要求，则向所述服务器发送主板电压调整器供电正常信号；若所述融合合路电子开关与所述主板电压调整器之间的电压不满足预设要求，则向所述服务器发送主板电压调整器供电故障信号。如图4所示，为本发明提供的优先级控制单元对如图3所示的融合供电系统进行供电控制的流程框图。扩展板连接器J0带在位信号，服务器上电后，优先级供电控制单元执行以下步骤：第一优先级PSU供电，通过J0在位信号是否接入J1判断PSU是否接入供电。J0在位信号是否接入J1为是，产生强制关断信号强制关断S1，S2，S3，H0，H1，M0，M1，禁止其他优先级供电来源接入；否则进入第二优先级适配供电接入判断。第一优先级PSU供电接入，强制关断S1，S2，S3，H0，H1，M0，M1后，判断公共母线A点电压是否高于设定值。A点电压是否高于设定值为是，打开融合合路电子开关S4为主板VR1供电，否则报PSU供电故障，并返回开始。第一优先级PSU供电接入，强制关断S1，S2，S3，H0，M0，M1；A点电压高于设定值，打开S4为主板电压调整器VR1供电。检测G点电压是否高于设定值。G点电压是否高于设定值为是，产生主板电压调整器供电正常信号PG4上报服务器，否则报告供电异常给服务器，并返回开始。第一优先级PSU供电，通过J0在位信号是否接入J1判断PSU是否接入供电。J0在位信号是否接入J1为否，进入第二优先级适配供电接入判断。第二优先级适配器供电，通过检测B点电压是否高于设定值判断适配器是否接入供电。B点电压是否高于设定值为是，产生强制关断信号强制关断S2，S3，M0，M1，禁止其他优先级供电源接入；否则进入第三优先级工业供电接入判断。第二优先级适配器供电接入，B点电压高于设定值，强制关断S2，S3，M0，M1；延迟，通过检测B点电压是否高于设定值判断是否打开H0，S1。B点电压是否高于设定值为是，打开H0，S1，产生适配器供电正常信号PG1上报服务器；否则上报服务器适配器供电故障，返回开始。第二优先级适配器供电接入，B点电压高于设定值，强制关断S2，S3，M0，M1；延迟，B点电压高于设定值，打开H0，S1，产生适配器供电正常信号PG1上报服务器。判断公共母线A点电压是否高于设定值。A点电压是否高于设定值为是，打开融合合路电子开关S4为主板VR1供电；否则上报热插拔H0故障，并返回开始。第二优先级适配器供电接入，B点电压高于设定值，强制关断S2，S3，M0，M1；延迟，B点电压高于设定值，打开H0，S1，产生适配器供电正常信号PG1上报服务器；A点电压高于设定值，打开S4为主板VR1供电；检测G点电压是否高于设定值。G点电压是否高于设定值为是，产生主板电压调整器供电正常信号PG4上报服务器，否则报供电异常，并返回开始。第一优先级PSU供电，通过J0在位信号是否接入J1判断PSU是否接入供电，J0在位信号是否接入J1为否，进入第二优先级适配供电接入判断；第二优先级适配器供电，通过检测B点电压是否高于设定值判断适配器是否接入供电，B点电压是否高于设定值为否，进入第三优先级工业供电接入判断。第三优先级工业供电，通过检测C点电压是否高于设定值判断工业供电是否接入供电。C点电压是否高于设定值为是，产生强制关断信号强制关断S1，S2，H0，M0，禁止其他优先级供电源接入；否则进入第四优先级PoE握手判断。第三优先级工业供电供电接入，C点电压高于设定值，强制关断S1，S2，H0，M0；延迟，通过检测C点电压是否高于设定值判断是否打开H1，M1，S3。C点电压是否高于设定值为是，打开H1，M1，S3，产生工业供电供电正常信号PG2上报服务器；否则上报服务器工业供电故障，返回开始。第三优先级工业供电接入，C点电压高于设定值，强制关断S1，S2，H0，M0；延迟，C点电压高于设定值，打开H1，M1，S3，产生工业供电供电正常信号PG2上报服务器。判断公共母线A点电压是否高于设定值。A点电压是否高于设定值为是，打开融合合路电子开关S4为主板VR1供电；否则上报热插拔H1、DC-DC电源模块M1故障，并返回开始。第三优先级工业供电接入，C点电压高于设定值，强制关断S1，S2，H0，M0；延迟，C点电压高于设定值，打开H1，M1，S3，产生工业供电供电正常信号PG2上报服务器；A点电压高于设定值，打开S4为主板VR1供电；检测G点电压是否高于设定值。G点电压是否高于设定值为是，产生主板电压调整器供电正常信号PG4上报服务器，否则报供电异常，并返回开始。第一优先级PSU供电，通过J0在位信号是否接入J1判断PSU是否接入供电，J0在位信号是否接入J1为否，进入第二优先级适配供电接入判断；第二优先级适配器供电，通过检测B点电压是否高于设定值判断适配器是否接入供电，B点电压是否高于设定值为否，进入第三优先级工业供电接入判断；第三优先级工业供电，通过检测C点电压是否高于设定值判断适配器是否接入供电，C点电压是否高于设定值为否，进入第四优先级PoE握手判断；第四优先级PoE，通过PoE握手集成芯片识别探测判断握手是否成功。握手是否成功为是，进入PoE供电接入检测；否则，报PoE握手失败，返回开始。第四优先级PoE，通过PoE握手集成芯片识别探测握手成功，进入PoE供电，通过检测D点电压是否高于设定值判断是否接入供电。D点电压是否高于设定值为是，产生强制关断信号强制关断H0，S1，H1，M1，S3，禁止其他优先级供电源接入；否则，报PoE供电故障返回开始。第四优先级PoE，通过PoE握手集成芯片识别探测握手成功，进入PoE供电；D点电压高于设定值，强制关断H0，S1，H1，M1，S3；延迟，通过检测D点电压是否高于设定值判断是否打开M0，S2。D点电压是否高于设定值为是，打开M0，S2，产生PoE供电正常信号PG3上报服务器；否则上报服务器PoE整流故障，返回开始。第四优先级PoE，通过PoE握手集成芯片识别探测握手成功，进入PoE供电；D点电压高于设定值，强制关断H0，S1，H1，M1，S3；延迟，D点电压高于设定值，打开M0，S2，产生PoE供电正常信号PG3上报服务器。判断公共母线A点电压是否高于设定值。A点电压是否高于设定值为是，打开融合合路电子开关S4为主板VR1供电；否则上报DC-DC电源模块M0、S2故障，并返回开始。第四优先级PoE，通过PoE握手集成芯片识别探测握手成功，进入PoE供电；D点电压高于设定值，强制关断H0，S1，H1，M1，S3；延迟，D点电压高于设定值，打开M0，S2，产生PoE供电正常信号PG3上报服务器；A点电压高于设定值，打开S4为主板VR1供电；检测G点电压是否高于设定值。G点电压是否高于设定值为是，产生主板电压调整器供电正常信号PG4上报服务器，否则报供电异常，并返回开始。本实施例中的延迟时间一般为10ms～100ms，但不限于此。电压的设定值，为同一条的通路不同点的电压设定值相同或逐渐升高。在上述优先级控制单元每次将供电设备或电源单元或主板电压调整器供电异常信息上报给服务器后，都返回到最高优先级的电源单元重新进行供电接入判断。当同样的异常信息连接几次上报服务器后，管理人员通知维修人员对融合供电系统进行检修。上述过程为优先级控制单元的唯一优先级供电控制逻辑，因PSU供电设定为最高优先级，且只要PSU供电接入，扩展板结构上遮挡主板其他优先级供电来源接入连接器接口，使得其他优先级供电来源因扩展板PSU供电存在而无法接入。PSU为最高优先级接入时，优先级控制单元产生主板电压调整器供电正常信号PG4和PSU供电正常信号PG0；第二优先级适配器正常接入供电时，优先级控制单元产生主板电压调整器供电正常信号PG4和适配器供电正常信号PG1；第三优先级工业供电正常接入供电时，优先级控制单元产生主板电压调整器供电正常信号PG4和工业供电供电正常信号PG2；第四优先级PoE正常接入供电时，优先级控制单元产生主板电压调整器供电正常信号PG4和PoE供电正常信号PG3。由此可见只要有供电来源正常接入系统，系统供电正常一定会产生PG4信号和与此供电来源相对应的PGx信号。由此，可以将PGx信号设置为高电平。在一些实施方式中，在所述供电设备对所述主板电压调整器进行供电后，所述优先级控制单元配置为：获取当前供电设备的优先级；基于所述当前供电设备的优先级判断是否触发仲裁；若是所述当前供电设备的优先级触发仲裁，则监测比所述当前供电设备的优先级高的供电设备的输出电压；响应于所述输出电压高于阈值，关闭与所述当前供电设备对应的合路电子开关，并在延迟第二预设时间后，依次打开所述供电管理单元和所述比所述当前供电设备的优先级高的供电设备对应的合路电子开关以通过所述比当前供电设备优先级高的供电设备对所述主板电压调整器进行供电。融合供电系统通过唯一优先级供电控制逻辑，为各种不同供电来源既定了优先级，实现了各优先级供电来源中任何一种供电来源接入到服务器均可成为唯一供电来源。为因误操作导致的高优先级供电来源后接入提供了基础条件，使高优先级后接入仲裁逻辑实现成为可能。由此也说明，误操作情况下，低优先级的供电来源即便接入也处于无效状态，只有高优先级供电来源后接入才会触发仲裁逻辑。服务器不可避免部分或全部供电接口物理结构连接器接口同时外漏的情况，无法避免边使用者误操作使用，造成不同供电来源同时或先后接入的实际情况。采用高优先级后接入仲裁逻辑确保后接入的高优先级供电来源优先供电，或同时供电接入的供电源按照既定优先级供电。一旦有其中一种规定允许的供电来源通过对应的连接器端口接入，其他供电将会被强制关断，已接入的供电来源产生对应的工作正常指示信号PG后，同时有或后有其他供电来源接入情况下，通过高优先级后接入仲裁逻辑实现唯一高优先级供电。后入高优先级供电来源被检测到后，启动仲裁逻辑，控制供电开关系统，实现后入高优先级供电无缝切入。后入低优先级供电无法启动，只有后入高优先级供电才会触发仲裁逻辑。以此确保服务器以既定优先级的供电设备供电并适应不同应用场景。结合图3，本实施例以四个供电来源设定优先级来阐述，预先将优先级定义为PSU为第一优先级、适配器为第二优先级、PoE为第四优先级、工业供电为第三优先级。第一优先级＞第二优先级＞第三优先级＞第四优先级，扩展板连接器J1为不带在位信号连接器。扩展板接入后仅存在PSU供电接口和PoE接口外漏，其他接口均被遮挡，其他优先级供电来源无法接入，但PSU供电的优先级设为最高，因此不存在误操作插入情况，因此不触发仲裁逻辑，因此仅存在第二、第三和第四优先级接口同时外漏导致误操作插入情况。又因为等级高的供电来源正常供电情况下，低等级供电来源接入不具备仲裁逻辑触发条件，因此第二优先级适配器正常供电情况下不存在仲裁逻辑触发条件。综上，本实施例就第三优先级工业供电或第四优先级PoE正常供电情况下，触发仲裁逻辑进行说明。如图5所示，为本发明提供的优先级控制单元对如图3所示的融合供电系统在第三优先级工业供电正常供电情况下进行仲裁的一实施例的流程框图。具体的仲裁过程如下：当第三优先级工业供电接入供电正常，产生PG2和PG4状态指示信号，均为高电平。PG2和PG4做与逻辑，输出逻辑高，高优先级后接入仲裁逻辑开始。第三优先级工业供电正常，第二优先级适配器供电插入判断。通过检测B点电压是否高于设定值判断适配器是否接入供电。B点电压是否高于设定值为否，继续监测，并上报服务器无第二优先级适配器供电插入，不具备触发仲裁逻辑。B点电压是否高于设定值为是，断开S3，使其处于二极管单相导通状态，防止反灌发生，通过体二极管或并联二极管继续为主板电压调整器供电；延迟，打开H0。通过检测B1点电压是否高于设定值判断热插拔集成芯片H0是否正常工作。B1点电压是否高于设定值为否，上报服务器热插拔集成芯片H0故障，不具供电切入条件，关闭H0，延迟，打开S3，循环判断，确认热插拔集成芯片H0异常，上报服务器，终止仲裁逻辑。B1点电压是否高于设定值为是，断开H1、M1，强制第三优先级工业供电关断下电；通过S1体二极管或并联二极管为主板电压调整器供电，延迟，打开S1，产生第二优先级适配器供电正常状态信号PG1。至此，完成后插入第二优先级适配器供电与第三优先级工业供电无缝切换，第三优先级工业供电处于无效状态，第二优先级适配器供电为主板电压调整器提供供电，高优先级后接入仲裁逻辑结束。如图6所示，为本发明提供的优先级控制单元对如图3所示的融合供电系统在第四优先级PoE正常供电情况下进行仲裁的一实施例的流程框图。具体的仲裁过程如下：第四优先级PoE接入，存在适配器和工业供电后插入触发仲裁逻辑两种情况。两种或多种情况下，可以由高优先级到低优先级检测仲裁，也可以由低优先级到高优先级检测仲裁。本实施例仅以由高优先级到低优先级触发仲裁的具体过程进行说明。具体的仲裁过程如下：当第四优先级PoE接入供电正常，产生PG3和PG4状态指示信号，均为高电平。PG3和PG4做与逻辑，输出逻辑高，触发高优先级后接入仲裁逻辑。第四优先级PoE正常供电，第二优先级适配器供电插入判断。通过检测B点电压是否高于设定值判断适配器是否接入供电。B点电压是否高于设定值为否，继续监测，并上报服务器无第二优先级适配器供电插入，转入第三优先级工业供电插入判断仲裁。B点电压是否高于设定值为是，关闭S2，使其处于二极管单相导通状态，防止反灌发生，通过体二极管或并联二极管继续为主板电压调整器供电；延迟，打开H0。通过检测B1点电压是否高于设定值判断热插拔集成芯片H0是否正常工作。B1点电压是否高于设定值为否，上报服务器热插拔集成芯片H0故障，不具供电切入条件，关闭H0，延迟，打开S2，循环判断，确认热插拔集成芯片H0异常，上报服务器，转入第三优先级工业供电插入判断。B1点电压是否高于设定值为是，断开M0，强制第四优先级PoE关断下电，系统通过S1体二极管或并联二极管为主板电压调整器供电，延迟，打开S1，产生第二优先级适配器供电正常状态信号PG1。至此，完成后插入第二优先级适配器供电与第四优先级PoE无缝切换，第四优先级PoE处于无效状态，由第二优先级适配器供电为主板电压调整器提供供电，高优先级后接入仲裁逻辑结束。第四优先级PoE正常，但B点电压低于设定值或者B1点电压低于设定值上报热插拔H0等线路存在故障，第二优先级适配器供电无法切入，由第二优先级适配器插入判断转入第三优先级工业供电插入判断。通过检测C点电压是否高于设定值判断第三优先级工业供电是否接入供电。C点电压是否高于设定值为否，继续监测，并上报服务器无第三优先级工业供电供电插入，不触发仲裁逻辑。C点电压是否高于设定值为是，关闭S2，使其处于二极管单相导通状态，防止反灌发生，通过体二极管或并联二极管继续为主板电压调整器供电；延迟，打开H1、M1。通过检测C1点电压是否高于设定值判断H1是否正常工作。C1点电压是否高于设定值为否，上报服务器H1故障，不具供电切入条件，断开H1、M1，延迟，打开S2，循环判断，确认热插拔集成芯片H1异常，上报服务器，终止仲裁逻辑。C1点电压是否高于设定值为是，关闭M0，强制第四优先级PoE关断下电，通过S3体二极管或并联二极管为主板电压调整器供电，延迟，打开S3，产生第三优先级工业供电供电正常状态信号PG2。至此，完成后插入第三优先级工业供电与第四优先级PoE无缝切换，第四优先级PoE处于无效状态，第三优先级工业供电为主板电压调整器提供供电，高优先级后接入仲裁逻辑结束。最后需要说明的是，本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，可以通过计算机程序来指令相关硬件来完成，程序可存储于一计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，程序的存储介质可为磁碟、光盘、只读存储记忆体或随机存储记忆体等。上述计算机程序的实施例，可以达到与之对应的前述任意方法实施例相同或者相类似的效果。本领域技术人员还将明白的是，结合这里的公开所描述的各种示例性逻辑块、模块、电路和算法步骤可以被实现为电子硬件、计算机软件或两者的组合。为了清楚地说明硬件和软件的这种可互换性，已经就各种示意性组件、方块、模块、电路和步骤的功能对其进行了一般性的描述。这种功能是被实现为软件还是被实现为硬件取决于具体应用以及施加给整个系统的设计约束。本领域技术人员可以针对每种具体应用以各种方式来实现的功能，但是这种实现决定不应被解释为导致脱离本发明实施例公开的范围。以上是本发明公开的示例性实施例，但是应当注意，在不背离权利要求限定的本发明实施例公开的范围的前提下，可以进行多种改变和修改。根据这里描述的公开实施例的方法权利要求的功能、步骤和/或动作不需以任何特定顺序执行。此外，尽管本发明实施例公开的元素可以以个体形式描述或要求，但除非明确限制为单数，也可以理解为多个。应当理解的是，在本文中使用的，除非上下文清楚地支持例外情况，单数形式“一个”旨在也包括复数形式。还应当理解的是，在本文中使用的“和/或”是指包括一个或者一个以上相关联地列出的项目的任意和所有可能组合。上述本发明实施例公开实施例序号仅仅为了描述，不代表实施例的优劣。本领域普通技术人员可以理解实现上述实施例的全部或部分步骤可以通过硬件来完成，也可以通过程序来指令相关的硬件完成，程序可以存储于一种计算机可读存储介质中，上述提到的存储介质可以是只读存储器，磁盘或光盘等。所属领域的普通技术人员应当理解：以上任何实施例的讨论仅为示例性的，并非旨在暗示本发明实施例公开的范围被限于这些例子；在本发明实施例的思路下，以上实施例或者不同实施例中的技术特征之间也可以进行组合，并存在如上的本发明实施例的不同方面的许多其它变化，为了简明它们没有在细节中提供。因此，凡在本发明实施例的精神和原则之内，所做的任何省略、修改、等同替换、改进等，均应包含在本发明实施例的保护范围之内。
