标题title
一种用于地下洞室多出入口对象实时统计的系统
摘要abst
本发明提供一种用于地下洞室多出入口对象实时统计的系统，所述系统包括蓝牙信标、蓝牙定位基站、边缘计算网关和物联网平台，所述蓝牙信标由人员、物资或车辆携带，存储有人员、物资或车辆的识别信息，所述蓝牙定位基站通过天线识别环境中的蓝牙信标并读取信息，蓝牙定位基站与边缘计算网关信号相连，所述边缘计算网关用于连接和协调外挂在边缘计算网关下的蓝牙定位基站、物联网平台之间的通信和数据处理，物联网平台用于收集来自边缘计算网关的数据并进行存储，对收集到的数据进行分析和处理，实现实时监测、预测分析和决策支持，本发明能够显著提高地下洞室施工环境中对于人员、物资和车辆的管理效率。
权利要求书clms
1.一种用于地下洞室多出入口对象实时统计的系统，其特征在于，所述系统包括蓝牙信标、蓝牙定位基站、边缘计算网关和物联网平台，所述蓝牙信标由人员、物资或车辆携带，存储有人员、物资或车辆的识别信息，所述蓝牙定位基站通过天线识别环境中的蓝牙信标并读取信息，蓝牙定位基站与边缘计算网关信号相连，所述边缘计算网关用于连接和协调外挂在边缘计算网关下的蓝牙定位基站、物联网平台之间的通信和数据处理，物联网平台用于收集来自边缘计算网关的数据并进行存储，对收集到的数据进行分析和处理，实现实时监测、预测分析和决策支持。2.根据权利要求1所述的一种用于地下洞室多出入口对象实时统计的系统，其特征在于，所述蓝牙定位基站包括至少3个蓝牙信号接收源，所述蓝牙信号接收源设置于地下洞室出入口处，相邻的两个蓝牙信号接收源之间的距离为50米。3.根据权利要求2所述的一种用于地下洞室多出入口对象实时统计的系统，其特征在于，所述蓝牙定位基站具体用于按照以下步骤识别环境中的蓝牙信标并读取信息：S101、蓝牙定位基站软件参数初始化，加载以太网驱动和蓝牙信号接收驱动；S102、蓝牙定位基站不断轮询判断是否接收到蓝牙信标广播的蓝牙信号，若接收到蓝牙信号，则将读取到的蓝牙信标信息进行缓存；S103、蓝牙定位基站判断缓存中是否有新增的蓝牙信标信息，将新增的蓝牙信标信息放入软件解析接口，对蓝牙信标信息携带的信息进行解析；S104、蓝牙定位基站将对蓝牙信标信息解析后获得的信息组包并传输到边缘计算网关。4.根据权利要求3所述的一种用于地下洞室多出入口对象实时统计的系统，其特征在于，步骤S103中，蓝牙定位基站在对蓝牙信标信息携带的信息进行解析前，判断蓝牙信标信息携带的广播UUID是否为预先约定的UUID，若不是则舍弃该蓝牙信标信息，若是则对蓝牙信标信息携带的信息进行解析。5.根据权利要求2所述的一种用于地下洞室多出入口对象实时统计的系统，其特征在于，所述边缘计算网关具体用于对蓝牙定位基站上传的消息进行处理，判断蓝牙定位基站识别到的蓝牙信标的出入方向，具体包括以下步骤：S201、边缘计算网关软件参数初始化，加载用于通讯的驱动；S202、边缘计算网关定时轮询判断是否接收到蓝牙定位基站上传的消息，若有，则将接收到的消息进行缓存；S203、边缘计算网关判断缓存中是否有新增的消息，若有，则根据新增消息对蓝牙信标的移动方向进行计算分析；S204、边缘计算网关将上一步骤的计算分析结果组包并传输到物联网平台。6.根据权利要求5所述的一种用于地下洞室多出入口对象实时统计的系统，其特征在于，边缘计算网关根据新增消息对蓝牙信标的移动方向进行计算分析，具体为：将新增消息中所携带的蓝牙定位基站接收蓝牙信标信号强度数据代入距离计算公式中，计算蓝牙信标与不同蓝牙信号接收源之间的距离，判断蓝牙信标的位置，模拟出蓝牙信标下一时刻可能会出现的位置，通过对下一时刻实际接收到的蓝牙信标RSSI信号强度值进行校准，排除误判信息，根据持续性蓝牙信标运动轨迹判断蓝牙信标的移动方向。7.根据权利要求1所述的一种用于地下洞室多出入口对象实时统计的系统，其特征在于，所述物联网平台具体包括：数据接收模块，用于接收各个边缘计算网关上传的数据，将所接收到的数据存储到云端或者本地数据库；第一分析模块，用于根据边缘计算网关上传的蓝牙信标信息及其移动方向信息，分析蓝牙信标对应的人员、物资或车辆在地下洞室中的进出事件，所述进出事件包括进出方向、进出位置、进出时间，将人员、物资和车辆的进出事件进行记录并存储到云端或本地数据库；第二分析模块，用于根据云端或本地数据库中不同人员、物资和车辆的进出事件，分析人员、物资、车辆的进出频率，根据人员、物资、车辆的调度计划、进出事件和进出频率分析异常进出事件；第三分析模块，用于根据人员、物资、车辆的调度目标、调度计划、进出事件、异常进出事件生成调度提示和辅助调度建议；可视化模块，用于将人员、物资和车辆的进出事件、进出频率、异常进出事件、调度目标达成进度、调度提示和辅助调度建议进行可视化展示。
说明书desc
技术领域本发明涉及出入口对象统计技术领域，尤其涉及一种用于地下洞室多出入口对象实时统计的系统。背景技术在地下工程开展中，往往多个洞室的施工工程同时进行，施工人员数量众多且分布广泛，大量物资存放地点较为分散，用于人员调度、物资运输、施工起重、挖掘等的车辆在多个洞室行驶，引起人员身份精确识别、物资规范管理、车辆合理调度问题。目前在地下洞室中，对于人员的识别一般是通过在洞口位置安装道闸，让进出人员使用NFC卡片在每个道闸处进行识别以登记人员进出情况，由于NFC卡片是一种物理卡片，用户存在丢失或损坏卡片的情况，同时NFC卡片识别需要物理接触才能识别，对用户的使用体验造成一定的不便。对于物资的识别一般是将条形码、二维码贴纸粘贴在物资表面，人为使用读写器识别和登记物资，由于物资会存放在不同的洞室中，存放地点较为分散，当物资更换存放地点时，需要工作人员及时用扫码枪识别物资的条形码/二维码记录存放位置的变更，而在地下环境中物资存放地点变更的信息由于网络问题难以及时上传到云端，对物资的管理造成不便。在车辆的识别中，目前是利用安装在地下洞室进出口处的摄像头对车辆的外形、车牌号等进行识别，由于摄像头一般仅架设在进出地下工程的主通道上，在地下工程多洞室进出口处，由于环境较暗，进出车辆较多，不会架设用于识别车辆的摄像头，导致只能了解车辆的施工区域，而无法具体统计不同施工车辆具体处于哪个洞室，给施工车辆的管理带来不便。发明内容鉴于此，本发明的目的在于提供一种用于地下洞室多出入口对象实时统计的系统，以解决目前在地下施工工程中对于人员、物资和车辆的管理存在不便的问题。为实现上述发明目的，本发明提供一种用于地下洞室多出入口对象实时统计的系统，所述系统包括蓝牙信标、蓝牙定位基站、边缘计算网关和物联网平台，所述蓝牙信标由人员、物资或车辆携带，存储有人员、物资或车辆的识别信息，所述蓝牙定位基站通过天线识别环境中的蓝牙信标并读取信息，蓝牙定位基站与边缘计算网关信号相连，所述边缘计算网关用于连接和协调外挂在边缘计算网关下的蓝牙定位基站、物联网平台之间的通信和数据处理，物联网平台用于收集来自边缘计算网关的数据并进行存储，对收集到的数据进行分析和处理，实现实时监测、预测分析和决策支持。进一步的，所述蓝牙定位基站包括至少3个蓝牙信号接收源，所述蓝牙信号接收源设置于地下洞室出入口处，相邻的两个蓝牙信号接收源之间的距离为50米。进一步的，所述蓝牙定位基站具体用于按照以下步骤识别环境中的蓝牙信标并读取信息：S101、蓝牙定位基站软件参数初始化，加载以太网驱动和蓝牙信号接收驱动；S102、蓝牙定位基站不断轮询判断是否接收到蓝牙信标广播的蓝牙信号，若接收到蓝牙信号，则将读取到的蓝牙信标信息进行缓存；S103、蓝牙定位基站判断缓存中是否有新增的蓝牙信标信息，将新增的蓝牙信标信息放入软件解析接口，对蓝牙信标信息携带的信息进行解析；S104、蓝牙定位基站将对蓝牙信标信息解析后获得的信息组包并传输到边缘计算网关。进一步的，步骤S103中，蓝牙定位基站在对蓝牙信标信息携带的信息进行解析前，判断蓝牙信标信息携带的广播UUID是否为预先约定的UUID，若不是则舍弃该蓝牙信标信息，若是则对蓝牙信标信息携带的信息进行解析。进一步的，所述边缘计算网关具体用于对蓝牙定位基站上传的消息进行处理，判断蓝牙定位基站识别到的蓝牙信标的出入方向，具体包括以下步骤：S201、边缘计算网关软件参数初始化，加载用于通讯的驱动；S202、边缘计算网关定时轮询判断是否接收到蓝牙定位基站上传的消息，若有，则将接收到的消息进行缓存；S203、边缘计算网关判断缓存中是否有新增的消息，若有，则根据新增消息对蓝牙信标的移动方向进行计算分析；S204、边缘计算网关将上一步骤的计算分析结果组包并传输到物联网平台。进一步的，边缘计算网关根据新增消息对蓝牙信标的移动方向进行计算分析，具体为：将新增消息中所携带的蓝牙定位基站接收蓝牙信标信号强度数据代入距离计算公式中，计算蓝牙信标与不同蓝牙信号接收源之间的距离，判断蓝牙信标的位置，模拟出蓝牙信标下一时刻可能会出现的位置，通过对下一时刻实际接收到的蓝牙信标RSSI信号强度值进行校准，排除误判信息，根据持续性蓝牙信标运动轨迹判断蓝牙信标的移动方向。进一步的，所述物联网平台具体包括：数据接收模块，用于接收各个边缘计算网关上传的数据，将所接收到的数据存储到云端或者本地数据库；第一分析模块，用于根据边缘计算网关上传的蓝牙信标信息及其移动方向信息，分析蓝牙信标对应的人员、物资或车辆在地下洞室中的进出事件，所述进出事件包括进出方向、进出位置、进出时间，将人员、物资和车辆的进出事件进行记录并存储到云端或本地数据库；第二分析模块，用于根据云端或本地数据库中不同人员、物资和车辆的进出事件，分析人员、物资、车辆的进出频率，根据人员、物资、车辆的调度计划、进出事件和进出频率分析异常进出事件；第三分析模块，用于根据人员、物资、车辆的调度目标、调度计划、进出事件、异常进出事件生成调度提示和辅助调度建议；可视化模块，用于将人员、物资和车辆的进出事件、进出频率、异常进出事件、调度目标达成进度、调度提示和辅助调度建议进行可视化展示。与现有技术相比，本发明的有益效果是：本发明提供的一种用于地下洞室多出入口对象实时统计的系统，通过蓝牙定位基站无线识别人员、物资和车辆上的蓝牙信标，由边缘计算网关分析外挂在其下的蓝牙定位基站上传的识别数据，统计人员、物资和车辆的具体状态，从而不需要物理接触识别人员，不需要工作人员亲自进行识别物资操作，对于车辆的识别不受环境亮度影响，能够显著提高地下洞室施工环境中对于人员、物资和车辆的管理效率。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的优选实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明实施例提供的一种用于地下洞室多出入口对象实时统计的系统整体结构示意图。图2是本发明实施例提供的蓝牙定位基站识别流程示意图。图3是本发明实施例提供的边缘计算网关判断蓝牙信标出入方向流程示意图。图4是本发明实施例提供的物联网平台整体结构示意图。图中，1蓝牙信标，2蓝牙定位基站，3边缘计算网关，4物联网平台，401数据接收模块，402第一分析模块，403第二分析模块，404第三分析模块，405可视化模块。具体实施方式以下结合附图对本发明的原理和特征进行描述，所列举实施例只用于解释本发明，并非用于限定本发明的范围。参照图1，本实施例提供一种用于地下洞室多出入口对象实时统计的系统，所述系统包括蓝牙信标1、蓝牙定位基站2、边缘计算网关3和物联网平台4。蓝牙信标1由人员、物资或车辆携带，其中存储有相应的人员、物资或车辆的识别信息，具有小型化和低功耗的特点，以固定的时间间隔对外发送蓝牙广播信号。蓝牙定位基站2通过2.4G蓝牙天线识别环境中的蓝牙信标1并读取蓝牙信标1存储的信息。蓝牙定位基站2与边缘计算网关3可以通过实体超五类网线实现信号相连。边缘计算网关2用于连接和协调外挂在其下的蓝牙定位基站2和物联网平台4之间的通信和数据处理。边缘计算网关2可以从连接的蓝牙定位基站2中收集数据，并将其存储在本地，并进行一定程度的数据分析和处理，例如数据过滤、聚合、压缩等，从而减少对物联网平台4计算资源的以来和提高响应速度，减少边缘计算网关3上传数据的延迟和带宽消耗。边缘计算网关3通过与物联网平台4的交互，实现对边缘计算网关3、蓝牙定位基站2的远程监控和控制，使得用户可以随时随地监测地下多洞室环境中人员、物资和车辆的状态和行为，并进行远程调度协调。边缘计算网关3与物联网平台4之间可以通过以太网或无线4G/5G的方式进行通讯。物联网平台4用于收集来自边缘计算网关3的数据并进行存储，对收集到的数据进行分析和处理，实现实时监测、预测分析和决策支持。所述系统中，边缘计算网关3的联网方式灵活，能够适应各种应用场景，部署带有微型服务器的边缘计算网关3可以自行计算大部分数据，减少对物联网平台4的依赖，大大降低了设备成本、维护成本。且边缘计算网关3的体积小，放置占用面积小。边缘计算网关3与蓝牙定位基站2之间只需铺设以太网网线，同时系统供电只需单独给边缘计算网关3、蓝牙定位基站2铺设电源线即可。所述系统整体架构具有轻量化的特点，能够减轻日常巡检的工作量，并提高维护时对系统运行情况的排查速度。本实施例中，蓝牙定位基站2通过外挂的蓝牙信号接收源来接收环境中的蓝牙信标1的广播信息，以确定自身与蓝牙信标1的相对位置。越靠近蓝牙信号接收源，蓝牙信标1广播信号的强度越强。当蓝牙定位基站2在外挂一个蓝牙信号接收源时，蓝牙定位基站2传输到边缘计算网关3的蓝牙信标1信息只是一个蓝牙信号接收源接收到的信息，此时边缘计算网关3只能分析出蓝牙信标1经过蓝牙信号接收源的检测范围，无法判断蓝牙信标1具体的进出方向。而当蓝牙定位基站2外挂两个蓝牙信号接收源时，蓝牙定位基站2传输到边缘计算网关3的蓝牙信标1信息是两个蓝牙信号接收源接收到的信息，能够让边缘计算网关2分析出蓝牙信标1经过蓝牙信号接收源的检测范围，判断出蓝牙信标1具体的进出方向，由于蓝牙信号接收源之间需要间隔一定距离，不同蓝牙信号接收源接收同一个蓝牙信标1的信号强度波峰波谷交叉，但是因为需要间隔布置，会出现蓝牙信标1广播信号丢失问题，导致边缘计算网关3判断蓝牙信标1的进出方向出现较大偏差。而蓝牙定位基站2外挂三个蓝牙信号接收源时，蓝牙定位基站2传输到边缘计算网关3的蓝牙信标1信息是三个蓝牙信号接收源接收到的信息，能够让边缘计算网关2分析出蓝牙信标1经过蓝牙信号接收源的检测范围，判断出蓝牙信标1具体的进出方向，即使间隔布置蓝牙信号接收源可能会出现蓝牙信标1广播信号丢失问题，由于多增加了一个蓝牙信号接收源，增大了检测范围，能够提高边缘计算网关3对蓝牙信标1进出方向判断的准确性。因此本实施例中蓝牙定位基站2至少包括3个蓝牙信号接收源，蓝牙信号接收源设置于地下洞室出入口处，相邻的两个蓝牙信号接收源之间的距离为50米。参照图2，蓝牙定位基站2具体用于按照以下步骤识别环境中的蓝牙信标并读取信息：S101、蓝牙定位基站2软件参数初始化，加载用于与边缘计算网关3通讯的以太网驱动和蓝牙信号接收驱动。S102、蓝牙定位基站2不断轮询判断是否接收到蓝牙信标1广播的蓝牙信号，若接收到蓝牙信号，则将读取到的蓝牙信标信息进行缓存。S103、蓝牙定位基站2判断缓存中是否有新增的蓝牙信标信息，将新增的蓝牙信标信息放入软件解析接口，对蓝牙信标信息携带的信息进行解析。蓝牙信标信息携带的信息包括蓝牙信标1的电池电量、使用时长、对应的人员/物资/车辆识别信息等。S104、蓝牙定位基站2将对蓝牙信标信息解析后获得的信息组包并传输到边缘计算网关3。作为一种优选的示例，步骤S103中，蓝牙定位基站2在对蓝牙信标信息携带的信息进行解析前，判断蓝牙信标信息携带的广播UUID是否为预先约定的UUID，若不是则舍弃该蓝牙信标信息，若是则对蓝牙信标信息携带的信息进行解析。参照图3，边缘计算网关3具体用于对蓝牙定位基站2上传的消息进行处理，判断蓝牙定位基站2识别到的蓝牙信标1的出入方向，具体包括以下步骤：S201、边缘计算网关3软件参数初始化，加载用于与蓝牙定位基站2通讯的驱动。S202、边缘计算网关3定时轮询判断是否接收到蓝牙定位基站2上传的消息，若有，则将接收到的消息进行缓存。S203、边缘计算网关3判断缓存中是否有新增的消息，若有，则根据新增消息对蓝牙信标1的移动方向进行计算分析。S204、边缘计算网关3将上一步骤的计算分析结果组包并传输到物联网平台4。步骤S203中，边缘计算网关3根据新增消息对蓝牙信标1的移动方向进行计算分析，具体为：将新增消息中所携带的蓝牙定位基站2接收蓝牙信标信号强度数据代入距离计算公式中，计算蓝牙信标1与不同蓝牙信号接收源之间的距离，判断蓝牙信标1的位置，模拟出蓝牙信标1下一时刻可能会出现的位置，通过对下一时刻实际接收到的蓝牙信标RSSI信号强度值进行校准，排除误判信息，根据持续性蓝牙信标运动轨迹判断蓝牙信标1的移动方向。距离计算公式如下所示：d = 10^ - A) / )其中，d为计算所得距离，RSSI为接收信号强度，abs表示求绝对值，A为发射端和接收端相隔1米时的信号强度，n为环境衰减因子。以蓝牙定位基站2外挂3个蓝牙信号接收源为例，3个蓝牙信号接收源分别为第一接收源、第二接收源和第三接收源，其中第一接收源相对靠近地下洞室出入口外，第三接收源相对靠近地下洞室出入口内，第二接收源处于第一接收源和第三接收源中间。边缘计算网关3对蓝牙信标移动方向的判断逻辑如下：当蓝牙信标1的移动方向为进入地下洞室时，例如蓝牙信标1依次经过第一接收源、第二接收源和第三接收源，最后在第三接收源处离开有效检测范围，则有以下情况：①蓝牙信标1同一时刻内，第一接收源先接收到蓝牙信标1的RSSI信号，在该阶段第一接收源 RSSI信号强度最大，判断为蓝牙信标1在第一接收源检测范围内；②蓝牙信标1移动中，第一接收源接收到蓝牙信标1的RSSI信号强度值逐渐变大，在这个过程第二接收源也接收到蓝牙信标1的RSSI信号，判断为蓝牙信标1在第一接收源和第二接收源之间检测范围内；③蓝牙信标1移动中，第一接收源接收到蓝牙信标1的RSSI信号强度值逐渐变小，第二接收源接收到蓝牙信标1的RSSI信号强度值逐渐变大，第三接收源也接收到蓝牙信标1的RSSI信号，且在同一时间中蓝牙信标1强度中，第一接收源接收到的RSSI 强度值大于第三接收源接收到的RSSI 强度值，判断为蓝牙信标1在第三接收源和第二接收源之间检测范围内；④蓝牙信标1移动中，第一接收源接收到蓝牙信标的RSSI信号强度值逐渐变小，第二接收源接收到蓝牙信标1的RSSI信号强度值逐渐变小，甚至第一接收源、第二接收源无法接收到该蓝牙信标1广播的信息，第三接收源接收到蓝牙信标1的RSSI信号强度值逐渐变大，判断为蓝牙信标1在第三接收源检测范围内；⑤蓝牙信标1移动中，持续一段时间，三台蓝牙信号接收源均接收不到该蓝牙信标1广播的信息，且最后一次判断在第三接收源检测范围内，所以判断蓝牙信标1的最终移动方向为进入。当蓝牙信标1的移动方向为进入地下洞室时，例如蓝牙信标1先经过第三接收源，再经过第二接收源，最后在第三接收源离开有效检测范围，则有以下情况：①蓝牙信标1同一时刻内，第三接收源先接收到蓝牙信标1的RSSI信号，在该阶段第三接收源RSSI信号强度最大，判断为在蓝牙信标1第三接收源检测范围内；②蓝牙信标1移动中，第三接收源接收到蓝牙信标1的RSSI信号强度值逐渐变大，在这个过程第二接收源也接收到蓝牙信标1的RSSI信号，判断为蓝牙信标1在第三接收源和第二接收源之间检测范围内；③蓝牙信标1移动中，若是蓝牙信标1在第三接收源和第二接收源之间检测范围内，第三接收源接收到蓝牙信标1的RSSI信号强度值达到最大后逐渐变小，第二接收源接收到蓝牙信标1的RSSI信号强度值逐渐变大，判断蓝牙信标1还在第三接收源和第二接收源之间检测范围内；④蓝牙信标1移动中，第三接收源接收到蓝牙信标1的RSSI信号强度值又逐渐变大，第二接收源接收到蓝牙信标1的RSSI信号强度值逐渐变小，甚至第二接收源无法接收到该蓝牙信标1广播的信息，判断为蓝牙信标在第三接收源检测范围内；⑤蓝牙信标1移动中，持续一段时间，三台蓝牙信号接收源均接收不到该蓝牙信标1广播的信息，且最后一次判断在第三接收源检测范围内，所以判断蓝牙信标最终方向为进入。若蓝牙信标1的移动方向为进入，且蓝牙信标1先经过第三接收源，最后在第三接收源离开有效检测范围，一直只有第三接收源接收到蓝牙信标1的广播信号，持续一段时间，三台蓝牙信号接收源均接收不到该蓝牙信标1广播的信息，且最后一次判断在第三接收源检测范围内，所以判断蓝牙信标1的最终移动方向为进入。当蓝牙信标1的移动方向为离开地下洞室时，例如蓝牙信标1先经过第三接收源，再经过第二接收源、最后在第一接收源离开有效检测范围，则有以下情况：①蓝牙信标1同一时刻内，第三接收源先接收到蓝牙信标1的RSSI信号，在该阶段第三接收源RSSI信号强度最大，判断为蓝牙信标1在第三接收源检测范围内；②蓝牙信标1移动中，第三接收源接收到蓝牙信标1的RSSI信号强度值逐渐变大，在这个过程第二接收源也接收到蓝牙信标1的RSSI信号，判断为蓝牙信标1在第三接收源和第二接收源之间检测范围内；③蓝牙信标1移动中，第三接收源接收到蓝牙信标1的RSSI信号强度值逐渐变小，第二接收源接收到蓝牙信标1的RSSI信号强度值逐渐变大，第一接收源也接收到蓝牙信标1的RSSI信号，且在同一时间中蓝牙信标1强度中，第三接收源接收到的RSSI 强度值小于第一接收源接收到的RSSI 强度值，判断为蓝牙信标1在第三接收源和第二接收源之间检测范围内；④蓝牙信标1移动中，第三接收源接收到蓝牙信标1的RSSI信号强度值逐渐变小，第二接收源接收到蓝牙信标1的RSSI信号强度值逐渐变小，甚至第三接收源、第二接收源无法接收到该蓝牙信标1广播的信息，第一接收源接收到蓝牙信标1的RSSI信号强度值逐渐变大，判断为蓝牙信标1在第一接收源检测范围内；⑤蓝牙信标1移动中，持续一段时间，三台蓝牙信号接收源均接收不到该蓝牙信标1广播的信息，且最后一次判断在第一接收源检测范围内，所以判断蓝牙信标1的最终移动方向为离开。当蓝牙信标1的移动方向为离开时，例如蓝牙信标1先经过第一接收源，再经过第二接收源，最后在第一接收源离开有效检测范围，若为以下情况则判断为离开：①蓝牙信标1同一时刻内，第一接收源先接收到蓝牙信标1的RSSI信号，在该阶段第一接收源RSSI信号强度最大，判断为蓝牙信标1在第一接收源检测范围内；②蓝牙信标1移动中，第一接收源接收到蓝牙信标1的RSSI信号强度值逐渐变大，在这个过程第二接收源也接收到蓝牙信标1的RSSI信号，判断为蓝牙信标1在第一接收源和第二接收源之间检测范围内；③蓝牙信标1移动中，若是蓝牙信标1在第一接收源和第二接收源之间检测范围内，第一接收源接收到蓝牙信标1的RSSI信号强度值达到最大后逐渐变小，第二接收源接收到蓝牙信标1的RSSI信号强度值逐渐变大，判断蓝牙信标1还在第一接收源和第二接收源之间检测范围内；④蓝牙信标1移动中，第一接收源接收到蓝牙信标1的RSSI信号强度值又逐渐变大，第二接收源接收到蓝牙信标1的RSSI信号强度值逐渐变小，甚至第二接收源无法接收到该蓝牙信标1广播的信息，判断为蓝牙信标1在第一接收源检测范围内；⑤蓝牙信标1移动中，持续一段时间，三台蓝牙信号接收源均接收不到该蓝牙信标1广播的信息，且最后一次判断在第一接收源检测范围内，所以判断蓝牙信标1最终方向为离开。当蓝牙信标1的移动方向为离开，例如蓝牙信标1先经过第一接收源，最后在第一接收源离开有效检测范围，一直只有第一接收源接收到蓝牙信标1的广播信号，持续一段时间，三台蓝牙信号接收源均接收不到该蓝牙信标1广播的信息，且最后一次判断在第一接收源检测范围内，所以判断蓝牙信标1的最终移动方向为离开。参照图4，所述物联网平台4具体包括数据接收模块401、第一分析模块402、第二分析模块403、第三分析模块404和可视化模块405。其中，数据接收模块401用于接收各个边缘计算网关3上传的数据，将所接收到的数据存储到云端或者本地数据库。第一分析模块402用于根据边缘计算网关3上传的蓝牙信标1信息及其移动方向信息，分析蓝牙信标1对应的人员、物资或车辆在地下洞室中的进出事件，所述进出事件包括进出方向、进出位置、进出时间，将人员、物资和车辆的进出事件进行记录并存储到云端或本地数据库。第二分析模块403用于根据云端或本地数据库中不同人员、物资和车辆的进出事件，分析人员、物资、车辆的进出频率，根据人员、物资、车辆的调度计划、进出事件和进出频率分析异常进出事件。第二分析模块403可以根据人员、物资、车辆的进出事件和进出频率判断是否符合调度计划安排，若出现不符合调度计划的进出事件，则将其标记为异常进出事件。第三分析模块404用于根据人员、物资、车辆的调度目标、调度计划、进出事件、异常进出事件生成调度提示和辅助调度建议。例如，第三分析模块404根据物资的调度目标、调度计划和进出事件、异常进度事件分析相应物资的调度进度，生成调度提示内容，并根据调度计划的完成情况和异常进出事件生成相应的辅助调度建议，为调度人员提供数据支撑和决策参考，提高调度效率。可视化模块405用于将人员、物资和车辆的进出事件、进出频率、异常进出事件、调度目标达成进度、调度提示和辅助调度建议进行可视化展示。以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
