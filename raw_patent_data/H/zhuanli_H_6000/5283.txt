标题title
一种交叉口公交车辆信号优先效果评价方法
摘要abst
本发明公开了一种交叉口公交车辆信号优先效果评价方法，通过采集获取GPS、RFID、视频检测器在公交线路所有交叉口附近的车辆定位数据，基于多个数据源，克服了各种车辆检测定位方式的不足；把得到的三种不同聚类结果采用集成学习中Voting投票方法，将组合票数高的作为判断车辆在交叉口是否停车的最终结果，减少了单种数据源聚类结果的误差，提高了聚类结果的准确度；基于公交车辆交叉口信号优先响应数据，将交叉口平均停车延误时间、公交车辆交叉口不停车通过率、主动优先不停车通过率作为交叉口信号优先评价的三项指标，通过公交优先控制主机进行综合研判，给予公交车辆合理的交叉口优先通行策略，最终以此对信号优先效果进行评价。
权利要求书clms
1.一种交叉口公交车辆信号优先效果评价方法，其特征在于，包括如下步骤：步骤1、沿公交线路方向按交叉口顺序事先采集交叉口定位坐标数据集合：Lc＝{,,…,}，其中m为公交线路交叉口的数量；建立速度时空分布信息表Vts：根据公交车辆在交叉口的行驶状态，不同交叉口附近会采集不同数量的时空定位信息，n表示每个交叉口附近采集的时空定位数量，N表示公交线路m个交叉口附近采集的速度时空分布点位数量总和，N＝∑n，用于存储不同时间、不同交叉口附近进出口点位的车速信息，数据结构为Vts＝{,,…,}；步骤2、获取公交车辆经过所有交叉口附近的GPS定位数据、RFID定位数据、视频检测器定位数据，并将获取的数据集分别采用不同的聚类算法建模，识别公交车辆运行通过全程各个交叉口的密集和稀疏区域，过滤离群点，通过聚类簇判断车辆在各个交叉口是否停车；步骤3、把得到的三种不同聚类结果采用集成学习中Voting投票方法，将组合票数高的作为判断公交车辆在交叉口是否停车的最终结果；步骤4、基于公交车辆交叉口信号优先响应数据，采用决策树CART分类算法对车辆通过方式进行分类，判断整个模型的分类结果，包括被动优先不停车通过、主动优先不停车通过、被动优先停车通过、主动优先停车通过；步骤5、计算交叉口平均停车延误时间、公交车辆交叉口不停车通过率、主动优先不停车通过率，作为交叉口信号优先评价的三项指标。2.如权利要求1所述的一种交叉口公交车辆信号优先效果评价方法，其特征在于：所述GPS定位数据包括车辆编号、时间、纬度、经度、瞬时车速、方位角、上下行标识、线路ID；所述RFID定位数据包括车辆编号、时间、纬度、经度、瞬时车速、方位角、线路ID；所述视频检测器定位数据包括车辆编号、时间、纬度、经度、瞬时车速、方位角、上下行标识、线路ID。3.如权利要求1所述的一种交叉口公交车辆信号优先效果评价方法，其特征在于：所述步骤2中将获取的GPS定位数据、RFID定位数据和视频检测器定位数据分别通过基于密度的DBSCAN算法、基于网格的CLIQUE聚类算法和基于滑动窗口的均值漂移聚类算法建模，判断车辆在各个交叉口是否停车。4.如权利要求1所述的一种交叉口公交车辆信号优先效果评价方法，其特征在于，所述步骤2中采用基于密度的DBSCAN算法对获取的GPS定位数据进行建模，判断车辆在各个交叉口是否停车，具体包括如下步骤：步骤1_GPS：获取公交车辆不同时间运行通过线路所有交叉口附近的GPS定位数据向量集合Gi，Gi＝{Gi1,Gi2,…,Gin}＝{,,…,}，i＝1,2,…,m；其中Gi表示第i个交叉口附近的n个定位数据点组成的向量，m为公交线路交叉口的数量，n为公交车辆经过交叉口附近获取的定位数据个数；步骤2_GPS：采用基于密度的DBSCAN聚类算法，识别公交车辆运行通过全程各个交叉口的密集和稀疏区域，过滤离群点，通过聚类簇判断车辆在各个交叉口是否停车；步骤3_GPS：将步骤1_GPS中Gi定位数据点、以及邻域半径ε、形成簇类所需的最小样本个数Pmin作为3个输入数据；步骤4_GPS：计算所有的样本点的ε邻域包含的点数目，如果第i个交叉口的ε邻域里有超过Pmin个点，则创建一个以Ci为核心点的新簇；步骤5_GPS：反复寻找所述核心点直接密度可达的点，并将其加入到相应的簇，对于核心点发生“密度相连”状况的簇，给予合并；步骤6_GPS：当没有新的点可以被添加到任何簇时，算法结束；步骤7_GPS：输出划分的簇对应的交叉口编号向量GCi＝{Gc1,Gc2,…,Gcm}，如果第i个交叉口没有生成聚类簇，则用Gci＝0表示车辆不停车通过该交叉口，如果第i个交叉口生成聚类簇，则用Gci＝1表示车辆停车通过该交叉口；从速度时空分布信息表Vts中查找所述簇中车辆到达和离开交叉口的时间tGa、tGd，且速度等于0的两个点位Gi、Gi，并输出停车通过该交叉口后的第一个噪声点Gi、速度vGip、时间tGip；步骤8_GPS：统计所有交叉口划分的聚类簇数量即公交车辆运行通过全程在交叉口的停车次数GK，则不停车次数为m-GK。5.如权利要求1所述的一种交叉口公交车辆信号优先效果评价方法，其特征在于，所述步骤2中采用基于网格的CLIQUE聚类算法对获取的RFID定位数据进行建模，判断车辆在各个交叉口是否停车，具体包括如下步骤：步骤1_RFID：获取公交车辆不同时间运行通过线路所有交叉口附近的RFID定位数据向量集合Ri，Ri＝{Ri1,Ri2,…,Rin}＝{,,…,},i＝1,2,…,m；其中Ri表示第i个交叉口附近的n个定位数据点组成的向量，m为公交线路交叉口的数量，n为公交车辆经过交叉口附近获取的定位数据个数；步骤2_RFID：采用基于网格的CLIQUE聚类算法，识别公交车辆运行通过全程各个交叉口的密集和稀疏区域，过滤离群点，通过聚类簇判断车辆在各个交叉口是否停车；步骤3_RFID：输入步骤1_RFID中Ri定位数据，输入网格的步长w并划分网格单元；输入密度的阈值，网格中对象数量大于等于该阈值表示该网格为稠密网格；计算每个网格的密度，根据给定的阈值判定网格单元是否稠密；步骤4_RFID：合并相邻稠密的网格单元，识别为簇，直到不再有这样的网格被发现为止；步骤5_RFID：输出划分的簇对应的交叉口编号向量RCi＝{RC1,RC2,…,RCm}，如果第i个交叉口没有生成聚类簇，则用RCi＝0表示车辆不停车通过该交叉口，如果第i个交叉口生成聚类簇，则用RCi＝1表示车辆停车通过该交叉口；从速度时空分布信息表中查找所述簇中车辆到达和离开交叉口的时间tRa、tRd，且速度等于0的两个点位Ri、Ri，并输出停车通过该交叉口后的第一个噪声点Ri、速度vRip、时间tRip；步骤6_RFID：统计所有交叉口划分的聚类簇数量即公交车辆运行通过全程在交叉口的停车次数RK，则不停车次数为m-RK。6.如权利要求1所述的一种交叉口公交车辆信号优先效果评价方法，其特征在于，所述步骤2中采用基于滑动窗口的均值漂移聚类算法对获取的视频检测器数据进行建模，判断车辆在各个交叉口是否停车，具体包括如下步骤：步骤1_VIDEO：获取公交车辆不同时间运行通过线路所有交叉口附近的视频检测器定位数据向量集合Vi，Vi＝{Vi1,Vi2,…,Vin}＝{,,…,},i＝1,2,…,m；其中Vi表示第i个交叉口附近的n个定位数据点组成的向量，m为公交线路交叉口的数量，n为公交车辆经过交叉口附近获取的定位数据个数；步骤2_VIDEO：采用基于滑动窗口的均值漂移聚类算法，识别公交车辆运行通过全程各个交叉口的密集和稀疏区域，过滤离群点，通过聚类簇判断车辆在各个交叉口是否停车；步骤3_VIDEO：输入步骤1_VIDEO中Vi定位数据，输入滑动窗口半径r，以随机选取的中心点C半径为r的圆形滑动窗口开始滑动；步骤4_VIDEO：每一次滑动到新的区域，计算滑动窗口内的均值作为中心点，滑动窗口内的点的数量为窗口内的密度，在每一次移动中，窗口会向密度更高的区域移动；步骤5_VIDEO：移动窗口，计算窗口内的中心点以及窗口内的密度，直到没有方向在窗口内可以容纳更多的点，即一直移动到圆内密度不再增加为止；步骤6_VIDEO：所述步骤3_VIDEO、步骤4_VIDEO、步骤5_VIDEO会产生很多个滑动窗口，当多个滑动窗口重叠时，保留包含最多点的窗口，然后根据数据点所在的滑动窗口进行聚类；步骤7_VIDEO：输出划分的簇对应的交叉口编号向量VCi＝{VC1,VC2,…,VCm}，如果第i个交叉口没有生成聚类簇，则用VCi＝0表示车辆不停车通过该交叉口，如果第i个交叉口生成聚类簇，则用VCi＝1表示车辆停车通过该交叉口，从速度时空分布信息表中查找所述簇中车辆到达和离开交叉口的时间tVa、tVd，且速度等于0的两个点位Vi、Vi，并输出停车通过该交叉口后的第一个噪声点Vi、速度vVip、时间tVip；步骤8_VIDEO：统计所有交叉口划分的聚类簇数量即公交车辆运行通过全程在交叉口的停车次数VK，则不停车次数为m-VK。7.如权利要求1所述的一种交叉口公交车辆信号优先效果评价方法，其特征在于：所述步骤3中通过使用Voting投票表决共识函数整合所述步骤2中得到的三类不同的聚类结果，得到公交车辆在各个交叉口是否停车的最终结果FCi＝{FC1,FC2,…,FCm}；如果第i个交叉口没有生成聚类簇，则用FCi＝0表示车辆不停车通过该交叉口；如果第i个交叉口生成聚类簇，则用FCi＝1表示车辆停车通过该交叉口，从速度时空分布信息表中查找该簇中到达和离开交叉口的时间tFa、tFd，且速度等于0的两个点位Fi、Fi，并输出停车通过该交叉口后的第一个噪声点Fi、速度vFip、时间tFip；统计所有交叉口划分的聚类簇数量即公交车辆运行通过全程在交叉口的停车通过次数FK，则不停车通过次数为m-FK。8.如权利要求1所述的一种交叉口公交车辆信号优先效果评价方法，其特征在于：所述步骤4中信号优先响应数据包括交叉口编号、行驶方向、车辆编号、车辆在各个交叉口是否停车、运行速度、到达交叉口时间、离开交叉口时间、优先响应开始时间、优先类型、优先是否被响应、优先实际执行时间，将信号优先响应数据作为特征向量输入，其中车辆在各个交叉口是否停车、优先是否被响应采用决策树CART分类算法，判断整个模型的分类结果。9.如权利要求1所述的一种交叉口公交车辆信号优先效果评价方法，其特征在于，所述步骤5具体包括如下步骤：步骤5.1、分别计算每一组特征车辆在各个交叉口是否停车、优先是否被响应的Gini系数增益，用Gini系数最小化准则来进行特征选择，取Gini系数增益值最大的属性作为决策树的根节点属性；递归计算，最终构建二叉决策树，然后利用生成的CART分类树做预测分类，基于步骤4中的特征向量输入，获得公交车辆不同时间不同车次在线路各个交叉口的通过类型，公交车辆通过交叉口被分类为被动优先不停车通过Fpppi、主动优先不停车通过Fappi、被动优先停车通过Fppsi、主动优先停车通过Fapsi，并统计得到主动优先停车通过次数主动优先不停车通过次数步骤5.2、从步骤1_GPS，步骤1_RFID和步骤1_Video开始，获取公交车辆不同时间不同车次运行通过线路所有交叉口附近的上下行数据；步骤5.3、公交车辆经过交叉口的延误发生在车辆驶入交叉口范围到驶离交叉口的过程中，车辆在交叉口实际消耗的时间减去车辆不停车通过交叉口所需的时间，即为单个交叉口单车延误时间Δdij，式中，tr为车辆经过交叉口的实际行驶时间，L为交叉口的长度，简化为沿公交线路开行方向从Fi至Fi的距离；vFip为车辆经过交叉口自由行驶的速度，简化为按照驶离出口的速度；tFip为车辆驶离交叉口出口范围的第一个时间点，tFa为车辆驶入交叉口附近范围内的第一个时间点；步骤5.4、计算全日单个交叉口的平均延误时间：步骤5.5、计算d天内每辆车运行全程上下行各个交叉口的平均延误时间：式中，j表示公交车辆班次数，i表示线路交叉口数量，假设整日公交车辆营运班次数为s，交叉口总数量为m；步骤5.6、计算d天内公交车辆平均不停车通过率：交叉口不停车通过率，包括自然状态不停车通过率和主动优先车辆不停车通过率，式中，j表示公交车辆班次数，i表示线路交叉口数量，假设整日公交车辆营运班次数为s，交叉口总数量为m；步骤5.7、计算交叉口主动优先车辆不停车通过率：式中，j表示公交车辆班次数，i表示线路交叉口数量，假设整日公交车辆营运班次数为s，交叉口总数量为m。10.如权利要求9所述的一种交叉口公交车辆信号优先效果评价方法，其特征在于：所述决策树的根节点选取规则如下：根据Gini系数公式其中样本D＝{车辆在各个交叉口是否停车，优先是否被响应}，Z为每一组特征的类别个数，Pi为第i个类别的概率，计算：Gini＝1-{2+2+2+2}＝0.75Gini＝1-{2+2}＝0.5Gini＝1-{2+2}＝0.5根据特征A＝{“车辆在各个交叉口是否停车”或“优先是否被响应”}的某个值a＝{“是”或“否”}，计算车辆在交叉口是否停车的Gini系数，Gini＝0.5*0.5+0.5*0.5＝0.5同理，对于优先是否被响应这个属性，按照它划分后计算优先是否被响应的Gini系数，Gini＝0.5*0.5+0.5*0.5＝0.5ΔGini＝Gini-Gini＝0.25ΔGini＝Gini-Gini＝0.25根据计算结果，随机选择车辆在各个交叉口是否停车或者优先是否被响应任意一个作为根节点。
说明书desc
技术领域本发明涉及一种交叉口公交车辆信号优先效果评价方法，尤其是一种基于多源数据的交叉口公交车辆信号优先效果评价方法。背景技术公交信号优先指的是在信号控制交叉口给予公交车辆相对于其他车辆的优先权，这种优先不应导致相应的信号机脱离正常运行状态，包括被动优先、主动优先、实时优先以及与不同设施相结合的信号优先控制策略。公交信号优先是提高公交系统运行速度和可靠性的重要手段，有效提高了公交车的通行质量，但是目前缺乏有效的公交信号优先效果评价方法，因此从某种程度上阻碍了公交信号优先的进一步优化。发明内容本发明要解决的技术问题是：现有技术缺乏有效的公交信号优先效果评价方法。为了解决上述问题，本发明的技术方案是提供了一种交叉口公交车辆信号优先效果评价方法，其特征在于，包括如下步骤：步骤1、沿公交线路方向按交叉口顺序事先采集交叉口定位坐标数据集合：Lc＝{,,…,}，其中m为公交线路交叉口的数量；建立速度时空分布信息表Vts：根据公交车辆在交叉口的行驶状态，不同交叉口附近会采集不同数量的时空定位信息，n表示每个交叉口附近采集的时空定位数量，N表示公交线路m个交叉口附近采集的速度时空分布点位数量总和，N＝∑n，用于存储不同时间、不同交叉口附近进出口点位的车速信息，数据结构为Vts＝{,,…,}；步骤2、获取公交车辆经过所有交叉口附近的GPS定位数据、RFID定位数据、视频检测器定位数据，并将获取的数据集分别采用不同的聚类算法建模，识别公交车辆运行通过全程各个交叉口的密集和稀疏区域，过滤离群点，通过聚类簇判断车辆在各个交叉口是否停车；步骤3、把得到的三种不同聚类结果采用集成学习中Voting投票方法，将组合票数高的作为判断公交车辆在交叉口是否停车的最终结果；步骤4、基于公交车辆交叉口信号优先响应数据，采用决策树CART分类算法对车辆通过方式进行分类，判断整个模型的分类结果，包括被动优先不停车通过、主动优先不停车通过、被动优先停车通过、主动优先停车通过；步骤5、计算交叉口平均停车延误时间、公交车辆交叉口不停车通过率、主动优先不停车通过率，作为交叉口信号优先评价的三项指标。优选地，所述GPS定位数据包括车辆编号、时间、纬度、经度、瞬时车速、方位角、上下行标识、线路ID；所述RFID定位数据包括车辆编号、时间、纬度、经度、瞬时车速、方位角、线路ID；所述视频检测器定位数据包括车辆编号、时间、纬度、经度、瞬时车速、方位角、上下行标识、线路ID。优选地，所述步骤2中将获取的GPS定位数据、RFID定位数据和视频检测器定位数据分别通过基于密度的DBSCAN算法、基于网格的CLIQUE聚类算法和基于滑动窗口的均值漂移聚类算法建模，判断车辆在各个交叉口是否停车。优选地，所述步骤2中采用基于密度的DBSCAN算法对获取的GPS定位数据进行建模，判断车辆在各个交叉口是否停车，具体包括如下步骤：步骤1_GPS：获取公交车辆不同时间运行通过线路所有交叉口附近的GPS定位数据向量集合Gi，Gi＝{Gi1,Gi2,…,Gin}＝{,,…,}，i＝1,2,…,m；其中Gi表示第i个交叉口附近的n个定位数据点组成的向量，m为公交线路交叉口的数量，n为公交车辆经过交叉口附近获取的定位数据个数；步骤2_GPS：采用基于密度的DBSCAN聚类算法，识别公交车辆运行通过全程各个交叉口的密集和稀疏区域，过滤离群点，通过聚类簇判断车辆在各个交叉口是否停车；步骤3_GPS：将步骤1_GPS中Gi定位数据点、以及邻域半径ε、形成簇类所需的最小样本个数Pmin作为3个输入数据；步骤4_GPS：计算所有的样本点的ε邻域包含的点数目，如果第i个交叉口的ε邻域里有超过Pmin个点，则创建一个以Ci为核心点的新簇；步骤5_GPS：反复寻找所述核心点直接密度可达的点，并将其加入到相应的簇，对于核心点发生“密度相连”状况的簇，给予合并；步骤6_GPS：当没有新的点可以被添加到任何簇时，算法结束；步骤7_GPS：输出划分的簇对应的交叉口编号向量GCi＝{Gc1，Gc2，…，Gcm}，如果第i个交叉口没有生成聚类簇，则用Gci＝0表示车辆不停车通过该交叉口，如果第i个交叉口生成聚类簇，则用Gci＝1表示车辆停车通过该交叉口；从速度时空分布信息表Vts中查找所述簇中车辆到达和离开交叉口的时间tGa、tGd，且速度等于0的两个点位Gi、Gi，并输出停车通过该交叉口后的第一个噪声点Gi、速度vGip、时间tGip；步骤8_GPS：统计所有交叉口划分的聚类簇数量即公交车辆运行通过全程在交叉口的停车次数GK，则不停车次数为m-GK。优选地，所述步骤2中采用基于网格的CLIQUE聚类算法对获取的RFID定位数据进行建模，判断车辆在各个交叉口是否停车，具体包括如下步骤：步骤1_RFID：获取公交车辆不同时间运行通过线路所有交叉口附近的RFID定位数据向量集合Ri，Ri＝{Ri1，Ri2，…，Rin}＝{，，...，}，i＝1，2，...，m；其中Ri表示第i个交叉口附近的n个定位数据点组成的向量，m为公交线路交叉口的数量，n为公交车辆经过交叉口附近获取的定位数据个数；步骤2_RFID：采用基于网格的CLIQUE聚类算法，识别公交车辆运行通过全程各个交叉口的密集和稀疏区域，过滤离群点，通过聚类簇判断车辆在各个交叉口是否停车；步骤3_RFID：输入步骤1_RFID中Ri定位数据，输入网格的步长w并划分网格单元；输入密度的阈值，网格中对象数量大于等于该阈值表示该网格为稠密网格；计算每个网格的密度，根据给定的阈值判定网格单元是否稠密；步骤4_RFID：合并相邻稠密的网格单元，识别为簇，直到不再有这样的网格被发现为止；步骤5_RFID：输出划分的簇对应的交叉口编号向量RCi＝{RC1，RC2，…，RCm}，如果第i个交叉口没有生成聚类簇，则用RCi＝0表示车辆不停车通过该交叉口，如果第i个交叉口生成聚类簇，则用RCi＝1表示车辆停车通过该交叉口；从速度时空分布信息表中查找所述簇中车辆到达和离开交叉口的时间tRa、tRd，且速度等于0的两个点位Ri、Ri，并输出停车通过该交叉口后的第一个噪声点Ri、速度vRip、时间tRip；步骤6_RFID：统计所有交叉口划分的聚类簇数量即公交车辆运行通过全程在交叉口的停车次数RK，则不停车次数为m-RK。优选地，所述步骤2中采用基于滑动窗口的均值漂移聚类算法对获取的视频检测器数据进行建模，判断车辆在各个交叉口是否停车，具体包括如下步骤：步骤1_VIDEO：获取公交车辆不同时间运行通过线路所有交叉口附近的视频检测器定位数据向量集合Vi，Vi＝{Vi1，Vi2，…，Vin}＝{，，...，}，i＝1，2，...，m；其中Vi表示第i个交叉口附近的n个定位数据点组成的向量，m为公交线路交叉口的数量，n为公交车辆经过交叉口附近获取的定位数据个数；步骤2_VIDEO：采用基于滑动窗口的均值漂移聚类算法，识别公交车辆运行通过全程各个交叉口的密集和稀疏区域，过滤离群点，通过聚类簇判断车辆在各个交叉口是否停车；步骤3_VIDEO：输入步骤1_VIDEO中Vi定位数据，输入滑动窗口半径r，以随机选取的中心点C半径为r的圆形滑动窗口开始滑动；步骤4_VIDEO：每一次滑动到新的区域，计算滑动窗口内的均值作为中心点，滑动窗口内的点的数量为窗口内的密度，在每一次移动中，窗口会向密度更高的区域移动；步骤5_VIDEO：移动窗口，计算窗口内的中心点以及窗口内的密度，直到没有方向在窗口内可以容纳更多的点，即一直移动到圆内密度不再增加为止；步骤6_VIDEO：所述步骤3_VIDEO、步骤4_VIDEO、步骤5_VIDEO会产生很多个滑动窗口，当多个滑动窗口重叠时，保留包含最多点的窗口，然后根据数据点所在的滑动窗口进行聚类；步骤7_VIDEO：输出划分的簇对应的交叉口编号向量VCi＝{VC1，VC2…，VCm}，如果第i个交叉口没有生成聚类簇，则用VCi＝0表示车辆不停车通过该交叉口，如果第i个交叉口生成聚类簇，则用VCi＝1表示车辆停车通过该交叉口，从速度时空分布信息表中查找所述簇中车辆到达和离开交叉口的时间tVa、tVd，且速度等于0的两个点位Vi、Vi，并输出停车通过该交叉口后的第一个噪声点Vi、速度VVip、时间tVip；步骤8_VIDEO：统计所有交叉口划分的聚类簇数量即公交车辆运行通过全程在交叉口的停车次数VK，则不停车次数为m-VK。优选地，所述步骤3中通过使用Voting投票表决共识函数整合所述步骤2中得到的三类不同的聚类结果，得到公交车辆在各个交叉口是否停车的最终结果FCi＝{FC1，FC2，…，FCm}；如果第i个交叉口没有生成聚类簇，则用FCi＝0表示车辆不停车通过该交叉口；如果第i个交叉口生成聚类簇，则用FCi＝1表示车辆停车通过该交叉口，从速度时空分布信息表中查找该簇中到达和离开交叉口的时间tFa、tFd，且速度等于0的两个点位Fi、Fi，并输出停车通过该交叉口后的第一个噪声点Fi、速度vFip、时间tFip；统计所有交叉口划分的聚类簇数量即公交车辆运行通过全程在交叉口的停车通过次数FK，则不停车通过次数为m-FK。优选地，所述步骤4中信号优先响应数据包括交叉口编号、行驶方向、车辆编号、车辆在各个交叉口是否停车、运行速度、到达交叉口时间、离开交叉口时间、优先响应开始时间、优先类型、优先是否被响应、优先实际执行时间，将信号优先响应数据作为特征向量输入，其中车辆在各个交叉口是否停车、优先是否被响应采用决策树CART分类算法，判断整个模型的分类结果。优选地，所述步骤5具体包括如下步骤：步骤5.1、分别计算每一组特征车辆在各个交叉口是否停车、优先是否被响应的Gini系数增益，用Gini系数最小化准则来进行特征选择，取Gini系数增益值最大的属性作为决策树的根节点属性；递归计算，最终构建二叉决策树，然后利用生成的CART分类树做预测分类，基于步骤4中的特征向量输入，获得公交车辆不同时间不同车次在线路各个交叉口的通过类型，公交车辆通过交叉口被分类为被动优先不停车通过Fpppi、主动优先不停车通过Fappi、被动优先停车通过Fppsi、主动优先停车通过Fapsi，并统计得到主动优先停车通过次数主动优先不停车通过次数步骤5.2、从步骤1_GPS，步骤1_RFID和步骤1_Video开始，获取公交车辆不同时间不同车次运行通过线路所有交叉口附近的上下行数据；步骤5.3、公交车辆经过交叉口的延误发生在车辆驶入交叉口范围到驶离交叉口的过程中，车辆在交叉口实际消耗的时间减去车辆不停车通过交叉口所需的时间，即为单个交叉口单车延误时间Δdij，式中，tr为车辆经过交叉口的实际行驶时间，L为交叉口的长度，简化为沿公交线路开行方向从Fi至Fi的距离；vFip为车辆经过交叉口自由行驶的速度，简化为按照驶离出口的速度；tFip为车辆驶离交叉口出口范围的第一个时间点，tFa为车辆驶入交叉口附近范围内的第一个时间点；步骤5.4、计算全日单个交叉口的平均延误时间：步骤5.5、计算d天内每辆车运行全程上下行各个交叉口的平均延误时间：式中，j表示公交车辆班次数，i表示线路交叉口数量，假设整日公交车辆营运班次数为s，交叉口总数量为m；步骤5.6、计算d天内公交车辆平均不停车通过率：交叉口不停车通过率，包括自然状态不停车通过率和主动优先车辆不停车通过率，式中，j表示公交车辆班次数，i表示线路交叉口数量，假设整日公交车辆营运班次数为s，交叉口总数量为m；步骤5.7、计算交叉口主动优先车辆不停车通过率：式中，j表示公交车辆班次数，i表示线路交叉口数量，假设整日公交车辆营运班次数为s，交叉口总数量为m。优选地，所述决策树的根节点选取规则如下：根据Gini系数公式其中样本D＝{车辆在各个交叉口是否停车，优先是否被响应}，Z为每一组特征的类别个数，Pi为第i个类别的概率，计算：Gini＝1-{2+2+2+2}＝0.75Gini＝1-{2+2}＝0.5Gini＝1-{2+2}＝0.5根据特征A＝{“车辆在各个交叉口是否停车”或“优先是否被响应”}的某个值a＝{“是”或“否”}，计算车辆在交叉口是否停车的Gini系数，Gini＝0.5*0.5+0.5*0.5＝0.5同理，对于优先是否被响应这个属性，按照它划分后计算优先是否被响应的Gini系数，Gini＝0.5*0.5+0.5*0.5＝0.5ΔGini＝Gini-Gini＝0.25ΔGini＝Gini-Gini＝0.25根据计算结果，随机选择车辆在各个交叉口是否停车或者优先是否被响应任意一个作为根节点。与现有技术相比，本发明的有益效果是：本发明通过采集获取GPS、RFID、视频检测器在公交线路所有交叉口附近的车辆定位数据，基于多个数据源，克服了各种车辆检测定位方式的不足；把得到的三种不同聚类结果采用集成学习中Voting投票方法，将组合票数高的作为判断车辆在交叉口是否停车的最终结果，减少了单种数据源聚类结果的误差，提高了聚类结果的准确度；基于公交车辆交叉口信号优先响应数据，将交叉口平均停车延误时间、公交车辆交叉口不停车通过率、主动优先不停车通过率作为交叉口信号优先评价的三项指标，通过公交优先控制主机进行综合研判，给予公交车辆合理的交叉口优先通行策略，最终以此对信号优先效果进行评价，弥补了现有技术的不足。附图说明图1为GPS定位样例数据图；图2为RFID定位样例数据图；图3为视频检测器定位样例数据图；图4为信号优先响应样例数据图；图5为本发明一种交叉口公交车辆信号优先效果评价方法流程图；图6为公交信号优先控制子系统架构图。具体实施方式为使本发明更明显易懂，兹以优选实施例，并配合附图作详细说明如下。本发明基于公交相关信息，发明了一种交叉口公交车辆信号优先效果评价方法。通过采集获取GPS、RFID、视频检测器在公交线路所有交叉口附近的车辆定位数据，将这三类不同数据集分别用不同的聚类算法建模，识别密集的和稀疏的区域。把得到的三种不同聚类结果采用集成学习中Voting投票方法，将组合票数高的作为判断车辆在交叉口是否停车的最终结果。基于公交车辆交叉口信号优先响应数据，采用决策树CART分类算法对车辆通过方式进行分类，包括不停车通过、停车通过。将交叉口平均停车延误时间、公交车辆交叉口不停车通过率、主动优先不停车通过率作为交叉口信号优先评价的三项指标，采用车辆平均停车延误时间作为信号交叉口服务水平的划分标准。交叉口公交车辆定位技术采用车载GPS、RFID或视频检测器定位技术中的一种，来检测车辆交叉口附近的位置与状态，结合从路口信号中心系统获取的红绿灯状态；从公交调度系统获取的公交车辆运行状态，如线路编号、上下行行驶方向、车辆编号、晚点与否、满载率等实时营运信息，通过公交优先控制主机进行综合研判，给予公交车辆合理的交叉口优先通行策略，最终以此对信号优先效果进行评价。一、数据源种类：GPS、RFID、视频检测器。车载GPS定位：GPS车辆定位系统对公交车辆运行状态进行实时定位，记录了公交车辆在每个采集点的时间、位置和速度等信息。将车辆实时信息发送至运营调度中心和驾驶室显示屏，方便及时调整车辆运行状况。具有全天候监测、全天时运行和全球性覆盖的特点。RFID定位：RFID车辆检测系统主要车载电子标签、RFID阅读器及天线单元、无线地磁感应器与无线地磁接收器等部分组成。运用RFID射频通讯技术，通过布设多个检测器，反复校正公交车辆位置，对公交车辆进行准确定位和身份识别。视频检测器：视频车辆检测系统主要由视频车辆检测摄像机、控制主机、补光灯、通讯设备、室外机箱组成。系统通过视频分析、图像处理等技术自动完成检测区域内公交车辆卡口照片抓拍、车牌识别、不同时刻位置及速度测定等信息，由控制主机通过有线网络传输给信号优先控制主机，用以综合研判公交优先策略，实现公交优先的功能。二、特点及数据结构1、GPS：优点：全球全天候定位，定位精度高，采集点密集。更适用于视野开阔、障碍物较少的区域。缺点：受气候、遮挡物等影响，存在数据丢失、定位偏移、数据传输延迟等现象。基本数据结构：如表1所示。表1样例数据：如图1所示。2、RFID优点：RFID定位精度相对GPS较高，不受气候的影响。缺点：作用距离短，对布设位置及角度要求较高。读取准确率不稳定，存在误读漏读的现象。基本数据结构：如表2所示。数据类型含义CARNUMVARchar2车辆编号GATHERTIMETIMESTAMP时间LATITUDEVARchar2纬度LONGITUDEVARchar2经度INSTANTSPEEDNUMBER瞬时车速AZIMUTHNUMBER方位角LINENOVARchar2线路ID表2样例数据：如图2所示。3、视频检测器优点：定位精度较高，采集信息量大，准确，直观可靠，安装调试维护方便。缺点：视频检测结果容易受到环境因素的影响。基本数据结构：如表3所示。表3样例数据：如图3所示。4、信号优先响应基本数据结构：如表4所示。表4样例数据：如图4所示。三、公交车辆信号优先效果评价方法1、方法流程图：如图5所示。2、步骤描述：算法前置条件：营运状态下公交车辆的开行方向：上行、下行。步骤1、采集上下行线路交叉口进出口点位集合{Lc}：沿公交线路方向按交叉口顺序，事先采集交叉口定位坐标数据集合：Lc＝{,,…,}，其中m为公交线路交叉口的数量。建立速度时空分布信息表{Vts}：根据公交车辆在交叉口的行驶状态，不同交叉口附近会采集不同数量的时空定位信息，n表示每个交叉口附近采集的时空定位数量，N表示公交线路m个交叉口附近采集的速度时空分布点位数量总和，N＝∑n。该表存储不同时间，不同交叉口附近进出口点位的车速信息，数据结构为：Vts＝{,,…,}。步骤2、获取公交车辆经过所有交叉口附近的GPS定位数据、RFID定位数据、视频检测器定位数据，并将获取的数据集分别采用不同的聚类算法建模，识别公交车辆运行通过全程各个交叉口的密集和稀疏区域，过滤离群点，通过聚类簇判断车辆在各个交叉口是否停车。1)通过GPS定位数据判断车辆在各个交叉口是否停车，包括如下步骤：步骤1_GPS：获取公交车辆不同时间运行通过线路所有交叉口附近的GPS定位数据向量集合，然后至步骤2_GPS；Gi＝{Gi1,Gi2,…,Gin}＝{,,…,},i＝1,2,…,m；上述公式中：Gi表示第i个交叉口附近的n个定位数据点组成的向量。m为公交线路交叉口的数量，n为公交车辆经过交叉口附近获取的定位数据个数；步骤2_GPS：停车线之前，如果车辆在交叉口停车，定位点会比较密集，可聚类框定合适的范围。如果未停车直接通过，定位点会比较稀疏。停车线之后，定位点会比较稀疏，可过滤掉。采用基于密度的DBSCAN聚类算法，识别公交车辆运行通过全程各个交叉口的密集和稀疏区域，过滤离群点，通过聚类簇判断车辆在各个交叉口是否停车。然后至步骤3_GPS；步骤3_GPS：将步骤1_GPS中Gi定位数据点、以及邻域半径ε、形成簇类所需的最小样本个数Pmin作为3个输入数据。其中邻域参数ε和Pmin的参数设置方法为：ε邻域用K-距离曲线得到，计算每个样本与所有样本的距离，选择K个最近邻域距离并从大到小排序，得到K-距离曲线，曲线拐点对应的距离设置为ε，如果-距离曲线和k-距离曲线没有明显差异，那么Pmin设置为k值。然后进入步骤4_GPS；步骤4_GPS：计算所有的样本点的ε邻域包含的点数目，如果第i个交叉口的ε邻域里有超过Pmin个点，则创建一个以Ci为核心点的新簇。然后进入步骤5_GPS；步骤5_GPS：反复寻找这些核心点直接密度可达的点，将其加入到相应的簇，对于核心点发生“密度相连”状况的簇，给予合并。然后至步骤6_GPS；步骤6_GPS：当没有新的点可以被添加到任何簇时，算法结束。则至步骤7_GPS；步骤7_GPS：输出划分的簇对应的交叉口编号向量GCi＝{Gc1，Gc2，...，Gcm}，如果第i个交叉口没有生成聚类簇，则用Gci＝0表示车辆不停车通过该交叉口。如果第i个交叉口生成聚类簇，则用Gci＝1表示车辆停车通过该交叉口，从速度时空分布信息表中查找该簇中到达和离开交叉口的时间tGa、tGd，且速度等于0的两个点位Gi、Gi，并输出停车通过该交叉口后的第一个噪声点Gi、速度vGip、时间tGip。然后至步骤8_GPS；步骤8_GPS：统计所有交叉口划分的聚类簇数量即公交车辆运行通过全程在交叉口的停车次数GK，不停车次数为m-GK。2)通过RFID定位数据判断车辆在各个交叉口是否停车，包括如下步骤：步骤1_RFID：获取公交车辆不同时间运行通过线路所有交叉口附近的RFID定位数据向量集合，然后至步骤2_RFID；Ri＝{Ri1，Ri2，…，Rin}＝{，，…，}，i＝1，2，…，m；上述公式中：Ri表示第i个交叉口附近的n个定位数据点组成的向量。m为公交线路交叉口的数量，n为公交车辆经过交叉口附近获取的定位数据个数；步骤2_RFID：停车线之前，如果车辆在交叉口停车，定位点会比较密集，可聚类框定合适的范围。如果未停车直接通过，定位点会比较稀疏。停车线之后，定位点会比较稀疏，可过滤掉。采用基于网格的CLIQUE聚类算法，识别公交车辆运行通过全程各个交叉口的密集和稀疏区域，过滤离群点，通过聚类簇判断车辆在各个交叉口是否停车。然后至步骤3_RFID；步骤3_RFID：输入步骤1_RFID中Ri定位数据，输入网格的步长w并划分网格单元；输入密度的阈值，网格中对象数量大于等于该阈值表示该网格为稠密网格。计算每个网格的密度，根据给定的阈值判定网格单元是否稠密。然后进入步骤4_RFID；步骤4_RFID：合并相邻稠密的网格单元，识别为簇。直到不再有这样的网格被发现为止。然后至步骤5_RFID；步骤5_RFID：输出划分的簇对应的交叉口编号向量RCi＝{RC1，RC2，…，RCm}，如果第i个交叉口没有生成聚类簇，则用RCi＝0表示车辆不停车通过该交叉口。如果第i个交叉口生成聚类簇，则用RCi＝1表示车辆停车通过该交叉口，从速度时空分布信息表中查找该簇中到达和离开交叉口的时间tRa、tRd，且速度等于0的两个点位Ri、Ri，并输出停车通过该交叉口后的第一个噪声点Ri、速度vRip、时间tRip。然后至步骤6_RFID；步骤6_RFID：统计所有交叉口划分的聚类簇数量即公交车辆运行通过全程在交叉口的停车次数RK，不停车次数为m-RK。3)通过视频检测器定位数据判断车辆在各个交叉口是否停车，包括如下步骤：步骤1_VIDEO：获取公交车辆不同时间运行通过线路所有交叉口附近的视频检测器定位数据向量集合，然后至步骤2_VIDEO；Vi＝{Vi1，Vi2，…，Vin}＝{，，...，}，i＝1，2，...，m；上述公式中：Vi表示第i个交叉口附近的n个定位数据点组成的向量。m为公交线路交叉口的数量，n为公交车辆经过交叉口附近获取的定位数据个数；步骤2_VIDEO：停车线之前，如果车辆在交叉口停车，定位点会比较密集，可聚类框定合适的范围。如果未停车直接通过，定位点会比较稀疏。停车线之后，定位点会比较稀疏，可过滤掉。采用基于滑动窗口的均值漂移聚类算法，识别公交车辆运行通过全程各个交叉口的密集和稀疏区域，过滤离群点，通过聚类簇判断车辆在各个交叉口是否停车。然后至步骤3_VIDEO；步骤3_VIDEO：输入步骤1_VIDEO中Vi定位数据，输入滑动窗口半径r，以随机选取的中心点C半径为r的圆形滑动窗口开始滑动。然后进入步骤4_VIDEO；步骤4_VIDEO：每一次滑动到新的区域，计算滑动窗口内的均值来作为中心点，滑动窗口内的点的数量为窗口内的密度。在每一次移动中，窗口会向密度更高的区域移动。然后进入步骤5_VIDEO；步骤5_VIDEO：移动窗口，计算窗口内的中心点以及窗口内的密度，直到没有方向在窗口内可以容纳更多的点，即一直移动到圆内密度不再增加为止。然后至步骤6_VIDEO；步骤6_VIDEO：步骤3，4，5会产生很多个滑动窗口，当多个滑动窗口重叠时，保留包含最多点的窗口，然后根据数据点所在的滑动窗口进行聚类。则至步骤7_VIDEO；步骤7_VIDEO：输出划分的簇对应的交叉口编号向量VCi＝{VC1，VC2，...，VCm}，如果第i个交叉口没有生成聚类簇，则用VCi＝0表示车辆不停车通过该交叉口。如果第i个交叉口生成聚类簇，则用VCi＝1表示车辆停车通过该交叉口，从速度时空分布信息表中查找该簇中到达和离开交叉口的时间tVa、tVd，且速度等于0的两个点位Vi、Vi，并输出停车通过该交叉口后的第一个噪声点Vi、速度vVip、时间tVip。然后至步骤8_VIDEO；步骤8_VIDEO：统计所有交叉口划分的聚类簇数量即公交车辆运行通过全程在交叉口的停车次数VK，不停车次数为m-VK。步骤3、组合上述三类数据源，通过应用不同聚类学习器，获得三类不同的聚类结果，然后构建异质集成学习，通过使用Voting投票表决共识函数整合上述所得聚类结果，得到公交车辆在各个交叉口是否停车的最终结果FCi＝{FC1，FC2，…，FCm}，提高聚类的质量。如果第i个交叉口没有生成聚类簇，则用FCi＝0表示车辆不停车通过该交叉口。如果第i个交叉口生成聚类簇，则用FCi＝1表示车辆停车通过该交叉口，从速度时空分布信息表中查找该簇中到达和离开交叉口的时间tFa、tFd，且速度等于0的两个点位Fi、Fi，并输出停车通过该交叉口后的第一个噪声点Fi、速度vFip、时间tFip。统计所有交叉口划分的聚类簇数量即公交车辆运行通过全程在交叉口的停车通过次数FK，不停车通过次数为m-FK。步骤4、将交叉口编号、行驶方向、车辆编号、车辆在各个交叉口是否停车，运行速度、到达交叉口时间、离开交叉口时间、优先响应开始时间、优先类型、优先是否被响应、优先实际执行时间等数据作为特征向量输入，其中车辆在各个交叉口是否停车，优先是否被响应采用决策树CART分类算法，判断整个模型的分类结果，包括被动优先不停车通过Fpppi、主动优先不停车通过Fappi、被动优先停车通过Fppsi、主动优先停车通过Fapsi。下面表格中数据集D的属性有2个，分别是车辆在各个交叉口是否停车、优先是否被响应。“通过类型”属于分类的结果。车辆在各个交叉口是否停车优先是否被响应通过类型是是主动优先停车通过是否被动优先停车通过否是主动优先不停车通过否否被动优先不停车通过步骤5、计算交叉口平均停车延误时间、公交车辆交叉口不停车通过率、主动优先不停车通过率，作为交叉口信号优先评价的三项指标。步骤5.1、分别计算每一组特征{“车辆在各个交叉口是否停车”或“优先是否被响应”}的Gini系数增益来确定决策树划分的优先规则。用Gini系数最小化准则来进行特征选择，取Gini系数增益值最大的属性作为决策树的根节点属性。规则如下：当一列特征有Z个类别，第i个类别的概率为Pi，其Gini系数公式为：对于样本D＝{车辆在各个交叉口是否停车，优先是否被响应}，如果根据特征A＝{“车辆在各个交叉口是否停车”或“优先是否被响应”}的某个值a＝{“是”或“否”}，把D分为D1和D2两部分，则在特征A的条件下，Gini系数计算公式为：ΔGini＝Gini-GiniA对于车辆在各个交叉口是否停车这个属性，按照它划分后的Gini系数计算如下：分类结果车辆在交叉口停车车辆在交叉口不停车主动优先停车通过10被动优先停车通过10主动优先不停车通过01被动优先不停车通过01Gini＝1-2-2-2-2＝0.75Gini＝1-2-2＝0.5Gini＝1-2-2＝0.5Gini＝0.5*0.5+0.5*0.5＝0.5同理，对于优先是否被响应这个属性，按照它划分后计算Gini＝0.5。ΔGini＝Gini-Gini＝0.25ΔGini＝Gini-Gini＝0.25这两个特征的增益都为0.25，所以随机选择车辆在各个交叉口是否停车或者优先是否被响应的任意一个作为根节点。递归计算，最终构建二叉决策树，然后利用生成的CART分类树做预测分类，基于步骤4中的特征向量输入，获得公交车辆不同时间不同车次在线路各个交叉口的通过类型，公交车辆通过交叉口被分类为被动优先不停车通过Fpppi、主动优先不停车通过Fappi、被动优先停车通过Fppsi、主动优先停车通过Fapsi。并统计得到主动优先停车通过次数主动优先不停车通过次数步骤5.2、获取公交车辆不同时间不同车次运行通过线路所有交叉口附近的上下行数据，从步骤1_GPS，步骤1_RFID和步骤1_Video开始。步骤5.3、公交车辆经过交叉口的延误发生在车辆驶入交叉口范围到驶离交叉口的过程中，车辆在交叉口实际消耗的时间减去车辆不停车通过交叉口所需的时间，即为单个交叉口单车延误时间Δdij。式中，tr为车辆经过交叉口的实际行驶时间，L为交叉口的长度，简化为沿公交线路开行方向从Fi至Fi的距离。vFip为车辆经过交叉口自由行驶的速度。tFip为车辆驶离交叉口出口范围的第一个时间点。tFa为车辆驶入交叉口附近范围内的第一个时间点。步骤5.4、计算全日单个交叉口的平均延误时间：步骤5.5、计算d天内每辆车运行全程上下行各个交叉口的平均延误时间：式中，j表示公交车辆班次数，i表示线路交叉口数量，假设整日公交车辆营运班次数为s，交叉口总数量为m。采用以车辆平均停车延误作为划分信号交叉口服务水平的划分标准。信号优先服务水平指日均每辆车在每个路口的平均停车延误，其服务水平标准见表5：服务水平每辆车停车延误服务水平每辆车停车延误A≤5.0D25.1-40.0B5.1-15.0E40.1-60.0C15.1-25.0F＞60.0表5步骤5.6、计算d天内公交车辆平均不停车通过率：交叉口不停车通过率，包括自然状态不停车通过率和主动优先车辆不停车通过率。式中，j表示公交车辆班次数，i表示线路交叉口数量，假设整日公交车辆营运班次数为s，交叉口总数量为m。步骤5.7、计算交叉口主动优先车辆不停车通过率：式中，j表示公交车辆班次数，i表示线路交叉口数量，假设整日公交车辆营运班次数为s，交叉口总数量为m。
