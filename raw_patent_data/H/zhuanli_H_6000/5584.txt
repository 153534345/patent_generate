标题title
具有仲裁机制的RS485中继电路
摘要abst
本申请公开了一种具有仲裁机制的RS485中继电路，其包括：第一RS485控制器、第二RS485控制器、第一延时切换电路、第二延时切换电路，以及，仲裁电路，所述第一延时切换电路连接于所述第一RS485控制器，所述第二延时切换电路连接于所述第二RS485控制器；所述仲裁电路电连接于所述第一RS485控制器、所述第二RS485控制器、所述第一延时切换电路和所述第二延时切换电路；其中，所述仲裁电路用于分别接收来自所述第一RS485控制器的第一信号和来自所述第二RS485的第二信号；还进一步用于基于所述第一信号和所述第二信号，通过低电平抢先仲裁机制生成第一仲裁信号和第二仲裁信号，并通过所述第一仲裁信号和第二仲裁信号分别驱动所述第二延时切换电路和所述第一延时切换电路。
权利要求书clms
1.一种具有仲裁机制的RS485中继电路，其特征在于，包括：第一RS485控制器、第二RS485控制器、第一延时切换电路、第二延时切换电路，以及，仲裁电路，所述第一延时切换电路连接于所述第一RS485控制器，所述第二延时切换电路连接于所述第二RS485控制器；所述仲裁电路电连接于所述第一RS485控制器、所述第二RS485控制器、所述第一延时切换电路和所述第二延时切换电路；其中，所述仲裁电路用于分别接收来自所述第一RS485控制器的第一信号和来自所述第二RS485的第二信号；还进一步用于基于所述第一信号和所述第二信号，通过低电平抢先仲裁机制生成第一仲裁信号和第二仲裁信号，并通过所述第一仲裁信号和第二仲裁信号分别驱动所述第二延时切换电路和所述第一延时切换电路。2.根据权利要求1所述的具有仲裁机制的RS485中继电路，其特征在于，所述仲裁电路包括至少一JK触发器，所述JK触发器用于在所述第一RS485控制器和所述第二RS485控制器没有收到外部信号时基于所述第一信号和所述第二信号获得高电平的第一仲裁信号和高电平的第二仲裁信号。3.根据权利要求2所述的具有仲裁机制的RS485中继电路，其特征在于，所述JK触发器包括第一非门电路、第一与非门电路、第二非门电路和第二与非门电路；所述第一非门电路用于将高电平的所述第一信号转换为低电平的第一中间信号，所述第一与非门电路用于在所述第一RS485控制器没有收到外部信号时将低电平的所述第一中间信号强制转换为高电平的所述第一仲裁信号，所述第二非门电路用于将高电平的所述第二信号转换为低电平的第二中间信号，所述第二与非门电路用于在所述第二RS485控制器没有收到外部信号时将低电平的所述第二中间信号强制转换为高电平的所述第二仲裁信号。4.根据权利要求2所述的具有仲裁机制的RS485中继电路，其特征在于，所述第一延时切换电路包括第一PNP型三极管和第一RC电路，所述第二延时切换电路包括第二PNP型三极管和第二RC电路，所述第一延时切换电路用于基于所述第二仲裁信号生成第一使能信号，所述第二延时切换电路用于基于所述第一仲裁信号生成第二使能信号；所述第一延时切换电路用于在接收到高电平的所述第二仲裁信号后向所述第一RS485控制器输出低电平的所述第一使能信号，使得所述第一RS485控制器处于接收状态；所述第二延时切换电路用于在接收到高电平的所述第一仲裁信号后向所述第二RS485控制器输出低电平的所述第二使能信号，使得所述第二RS485控制器处于接收状态。5.根据权利要求1所述的具有仲裁机制的RS485中继电路，其特征在于，所述第一RS485控制器用于接收到低电平差分信号时将其接收到的所述低电平差分信号转换为低电平的所述第一信号，所述仲裁电路包括至少一JK触发器，所述JK触发器用于在所述第一RS485控制器先于所述第二RS485控制器接收到所述低电平差分信号时基于所述第一信号和所述第二信号获得低电平的第一仲裁信号和高电平的第二仲裁信号。6.根据权利要求5所述的具有仲裁机制的RS485中继电路，其特征在于，所述JK触发器包括第一非门电路、第一与非门电路、第二非门电路和第二与非门电路；所述第二非门电路用于将高电平的所述第二信号转换为低电平的第二中间信号，所述第二与非门电路用于在所述第二RS485控制器没有收到外部信号时将低电平的所述第二中间信号强制转换为高电平的所述第二仲裁信号；所述第一非门电路用于将低电平的所述第一信号转换为高电平的第一中间信号，所述第一与非门电路用于在所述第一RS485控制器接收到所述低电平差分信号时对高电平的所述第一中间信号与所述第二与非门电路输出的高电平的所述第二仲裁信号做与非运算，并将高电平的所述第一中间信号转换为低电平的所述第一仲裁信号。7.根据权利要求5所述的具有仲裁机制的RS485中继电路，其特征在于，所述第一延时切换电路包括第一PNP型三极管和第一RC电路，所述第二延时切换电路包括第二PNP型三极管和第二RC电路，所述第一延时切换电路用于基于所述第二仲裁信号生成第一使能信号，所述第二延时切换电路用于基于所述第一仲裁信号生成第二使能信号；所述第一延时切换电路用于在接收到高电平的所述第二仲裁信号后向所述第一RS485控制器输出低电平的所述第一使能信号，使得所述第一RS485控制器处于接收状态；所述第二延时切换电路用于在接收到低电平的所述第一仲裁信号后向所述第二RS485控制器输出高电平的所述第二使能信号，使得所述第二RS485控制器处于发送状态。8.根据权利要求7所述的具有仲裁机制的RS485中继电路，其特征在于，所述第一RS485控制器用于在预设延时时间内接收到高电平差分信号时将其接收到的所述高电平差分信号转换为高电平的所述第一信号，所述仲裁电路包括至少一JK触发器，所述JK触发器用于在所述第一RS485控制器接收到所述高电平差分信号时基于所述第一信号和所述第二信号获得高电平的第一仲裁信号和高电平的第二仲裁信号。9.根据权利要求8所述的具有仲裁机制的RS485中继电路，其特征在于，所述JK触发器包括第一非门电路、第一与非门电路、第二非门电路和第二与非门电路；所述第一非门电路用于将高电平的所述第一信号转换为低电平的第一中间信号，所述第一与非门电路用于在所述第一RS485控制器在预设延时时间内接收到高电平差分信号时将低电平的所述第一中间信号强制转换为高电平的所述第一仲裁信号，所述第二非门电路用于将高电平的所述第二信号转换为低电平的第二中间信号，所述第二与非门电路用于在所述第二RS485控制器没有收到外部信号时将低电平的所述第二中间信号强制转换为高电平的所述第二仲裁信号。10.根据权利要求9所述的具有仲裁机制的RS485中继电路，其特征在于，所述第一延时切换电路用于基于所述第二仲裁信号生成第一使能信号，所述第二延时切换电路用于基于所述第一仲裁信号生成第二使能信号；所述第一延时切换电路用于在接收到高电平的所述第二仲裁信号后向所述第一RS485控制器输出低电平的所述第一使能信号，使得所述第一RS485控制器处于接收状态；所述第二延时切换电路用于在所述第一RS485控制器在预设延时时间内接收到高电平差分信号时继续向所述第二RS485控制器输出高电平的所述第二使能信号，使得所述第二RS485控制器处于发送状态。
说明书desc
技术领域本申请涉及RS485中继电路技术领域，具体涉及一种具有仲裁机制的RS485中继电路。背景技术RS485中继器是RS485总线数据中继通信产品，常用于两个节点之间物理信号的双向转发工作。RS485中继器可以延长RS485总线的通信距离，增强RS485总线设备数目，其在工业控制自动化、工业集散分布系统、道路交通控制自动化等领域均有广泛应用。随着对现场控制精度要求的不断提高，数据网络设备站点的扩充，数据流、系统范围和规模的不断扩大，特别是对于一些多主机总线系统而言，中继器的快速响应和切换更为重要。传统的中继器切换响应不足且不支持竞争机制，容易造成数据的丢失，从而导致RS485总线数据的不稳定，容易给整个系统带来安全隐患。发明内容本申请的一优势在于提供了一种具有仲裁机制的RS485中继电路，其中，所述具有仲裁机制的RS485中继电路能够实现RS485中继器快速仲裁和自动切换。本申请的另一优势在于提供了一种具有仲裁机制的RS485中继电路，其中，所述具有仲裁机制的RS485中继电路通过低电平抢先仲裁机制避免两个RS485控制器同时处于发送状态。具体地，所述具有仲裁机制的RS485中继电路将首先收到低电平差分信号的RS485控制器锁定至信号接收状态，实现仲裁抢先，避免两个RS485控制器双向发送数据，相互影响。根据本申请的一个方面，提供了一种具有仲裁机制的RS485中继电路，其包括：第一RS485控制器、第二RS485控制器、第一延时切换电路、第二延时切换电路，以及，仲裁电路，所述第一延时切换电路连接于所述第一RS485控制器，所述第二延时切换电路连接于所述第二RS485控制器；所述仲裁电路电连接于所述第一RS485控制器、所述第二RS485控制器、所述第一延时切换电路和所述第二延时切换电路；其中，所述仲裁电路用于分别接收来自所述第一RS485控制器的第一信号和来自所述第二RS485的第二信号；还进一步用于基于所述第一信号和所述第二信号，通过低电平抢先仲裁机制生成第一仲裁信号和第二仲裁信号，并通过所述第一仲裁信号和第二仲裁信号分别驱动所述第二延时切换电路和所述第一延时切换电路。在根据本申请所述的具有仲裁机制的RS485中继电路的一实施方式中，所述仲裁电路包括至少一JK触发器，所述JK触发器用于在所述第一RS485控制器和所述第二RS485控制器没有收到外部信号时基于所述第一信号和所述第二信号获得高电平的第一仲裁信号和高电平的第二仲裁信号。在根据本申请所述的具有仲裁机制的RS485中继电路的一实施方式中，所述JK触发器包括第一非门电路、第一与非门电路、第二非门电路和第二与非门电路；所述第一非门电路用于将高电平的所述第一信号转换为低电平的第一中间信号，所述第一与非门电路用于在所述第一RS485控制器没有收到外部信号时将低电平的所述第一中间信号强制转换为高电平的所述第一仲裁信号，所述第二非门电路用于将高电平的所述第二信号转换为低电平的第二中间信号，所述第二与非门电路用于在所述第二RS485控制器没有收到外部信号时将低电平的所述第二中间信号强制转换为高电平的所述第二仲裁信号。在根据本申请所述的具有仲裁机制的RS485中继电路的一实施方式中，所述第一延时切换电路包括第一PNP型三极管和第一RC电路，所述第二延时切换电路包括第二PNP型三极管和第二RC电路，所述第一延时切换电路用于基于所述第二仲裁信号生成第一使能信号，所述第二延时切换电路用于基于所述第一仲裁信号生成第二使能信号；所述第一延时切换电路用于在接收到高电平的所述第二仲裁信号后向所述第一RS485控制器输出低电平的所述第一使能信号，使得所述第一RS485控制器处于接收状态；所述第二延时切换电路用于在接收到高电平的所述第一仲裁信号后向所述第二RS485控制器输出低电平的所述第二使能信号，使得所述第二RS485控制器处于接收状态。在根据本申请所述的具有仲裁机制的RS485中继电路的一实施方式中，所述第一RS485控制器用于接收到低电平差分信号时将其接收到的所述低电平差分信号转换为低电平的所述第一信号，所述仲裁电路包括至少一JK触发器，所述JK触发器用于在所述第一RS485控制器先于所述第二RS485控制器接收到所述低电平差分信号时基于所述第一信号和所述第二信号获得低电平的第一仲裁信号和高电平的第二仲裁信号。在根据本申请所述的具有仲裁机制的RS485中继电路的一实施方式中，所述JK触发器包括第一非门电路、第一与非门电路、第二非门电路和第二与非门电路；所述第二非门电路用于将高电平的所述第二信号转换为低电平的第二中间信号，所述第二与非门电路用于在所述第二RS485控制器没有收到外部信号时将低电平的所述第二中间信号强制转换为高电平的所述第二仲裁信号；所述第一非门电路用于将低电平的所述第一信号转换为高电平的第一中间信号，所述第一与非门电路用于在所述第一RS485控制器接收到所述低电平差分信号时对高电平的所述第一中间信号与所述第二与非门电路输出的高电平的所述第二仲裁信号做与非运算，并将高电平的所述第一中间信号转换为低电平的所述第一仲裁信号。在根据本申请所述的具有仲裁机制的RS485中继电路的一实施方式中，所述第一延时切换电路包括第一PNP型三极管和第一RC电路，所述第二延时切换电路包括第二PNP型三极管和第二RC电路，所述第一延时切换电路用于基于所述第二仲裁信号生成第一使能信号，所述第二延时切换电路用于基于所述第一仲裁信号生成第二使能信号；所述第一延时切换电路用于在接收到高电平的所述第二仲裁信号后向所述第一RS485控制器输出低电平的所述第一使能信号，使得所述第一RS485控制器处于接收状态；所述第二延时切换电路用于在接收到低电平的所述第一仲裁信号后向所述第二RS485控制器输出高电平的所述第二使能信号，使得所述第二RS485控制器处于发送状态。在根据本申请所述的具有仲裁机制的RS485中继电路的一实施方式中，所述第一RS485控制器用于在预设延时时间内接收到高电平差分信号时将其接收到的所述高电平差分信号转换为高电平的所述第一信号，所述仲裁电路包括至少一JK触发器，所述JK触发器用于在所述第一RS485控制器接收到所述高电平差分信号时基于所述第一信号和所述第二信号获得高电平的第一仲裁信号和高电平的第二仲裁信号。在根据本申请所述的具有仲裁机制的RS485中继电路的一实施方式中，所述JK触发器包括第一非门电路、第一与非门电路、第二非门电路和第二与非门电路；所述第一非门电路用于将高电平的所述第一信号转换为低电平的第一中间信号，所述第一与非门电路用于在所述第一RS485控制器在预设延时时间内接收到高电平差分信号时将低电平的所述第一中间信号强制转换为高电平的所述第一仲裁信号，所述第二非门电路用于将高电平的所述第二信号转换为低电平的第二中间信号，所述第二与非门电路用于在所述第二RS485控制器没有收到外部信号时将低电平的所述第二中间信号强制转换为高电平的所述第二仲裁信号。在根据本申请所述的具有仲裁机制的RS485中继电路的一实施方式中，所述第一延时切换电路用于基于所述第二仲裁信号生成第一使能信号，所述第二延时切换电路用于基于所述第一仲裁信号生成第二使能信号；所述第一延时切换电路用于在接收到高电平的所述第二仲裁信号后向所述第一RS485控制器输出低电平的所述第一使能信号，使得所述第一RS485控制器处于接收状态；所述第二延时切换电路用于在所述第一RS485控制器在预设延时时间内接收到高电平差分信号时继续向所述第二RS485控制器输出高电平的所述第二使能信号，使得所述第二RS485控制器处于发送状态。通过对随后的描述和附图的理解，本申请进一步的目的和优势将得以充分体现。本申请的这些和其它目的、特点和优势，通过下述的详细说明，附图和权利要求得以充分体现。附图说明通过结合附图对本申请实施例进行更详细的描述，本申请的上述以及其他目的、特征和优势将变得更加明显。附图用来提供对本申请实施例的进一步理解，并且构成说明书的一部分，与本申请实施例一起用于解释本申请，并不构成对本申请的限制。在附图中，相同的参考标号通常代表相同部件或步骤。图1图示了根据本申请实施例的具有仲裁机制的RS485中继电路的结构框图示意图。图2图示了根据本申请实施例的具有仲裁机制的RS485中继电路的具体示例的示意图。图3图示了根据本申请实施例的具有仲裁机制的RS485中继电路的仲裁电路的示意图。图4图示了根据本申请实施例的具有仲裁机制的RS485中继电路的第一延时切换电路的示意图。图5图示了根据本申请实施例的具有仲裁机制的RS485中继电路的第二延时切换电路的示意图。图6图示了根据本申请实施例的具有仲裁机制的RS485中继电路的各个位置的电信号波形示意图。具体实施方式下面，将参考附图详细地描述根据本申请的示例实施例。显然，所描述的实施例仅仅是本申请的一部分实施例，而不是本申请的全部实施例，应理解，本申请不受这里描述的示例实施例的限制。可以理解的是，术语“一”应理解为“至少一”或“一个或多个”，即在一个实施例中，一个元件的数量可以为一个，而在另外的实施例中，该元件的数量可以为多个，术语“一”不能理解为对数量的限制。“多个”指大于等于两个。虽然比如“第一”、“第二”等的序数将用于描述各种组件，但是在这里不限制那些组件。该术语仅用于区分一个组件与另一组件。例如，第一组件可以被称为第二组件，且同样地，第二组件也可以被称为第一组件，而不脱离本申请构思的教导。在此使用的术语“和/或”包括一个或多个关联的列出的项目的任何和全部组合。在这里使用的术语仅用于描述各种实施例的目的且不意在限制。如在此使用的，单数形式意也包括复数形式，除非上下文清楚地指示例外。另外将理解术语“包括”和/或“具有”当在该说明书中使用时指定所述的特征、数目、步骤、操作、组件、元件或其组合的存在，而不排除一个或多个其它特征、数目、步骤、操作、组件、元件或其组的存在或者附加。申请概述：如前所述，随着对现场控制精度要求的不断提高，数据网络设备站点的扩充，数据流、系统范围和规模的不断扩大，特别是对于一些多主机总线系统而言，中继器的快速响应和切换更为重要。传统的中继器切换响应不足且不支持竞争机制，容易造成数据的丢失，从而导致RS485总线数据的不稳定，容易给整个系统带来安全隐患。本申请的发明人发现，当多个控制器接收到外部信号后，多个控制器可能相互发送信号，如果中继器切换响应不足且不支持竞争机制，多个控制器相互发送信号会相互影响，数据传输不稳定，容易造成数据的丢失。基于此，本申请的发明人提出一种低电平抢先仲裁机制，避免两个RS485控制器同时处于发送状态。具体地，将首先收到低电平差分信号的RS485控制器锁定至信号接收状态，实现仲裁抢先，避免两个RS485控制器双向发送数据，相互影响。相应地，本申请提出一种具有仲裁机制的RS485中继电路，其包括：第一RS485控制器、第二RS485控制器、第一延时切换电路、第二延时切换电路，以及，仲裁电路，所述第一延时切换电路连接于所述第一RS485控制器，所述第二延时切换电路连接于所述第二RS485控制器；所述仲裁电路电连接于所述第一RS485控制器、所述第二RS485控制器、所述第一延时切换电路和所述第二延时切换电路；其中，所述仲裁电路用于分别接收来自所述第一RS485控制器的第一信号和来自所述第二RS485的第二信号；还进一步用于基于所述第一信号和所述第二信号，通过低电平抢先仲裁机制生成第一仲裁信号和第二仲裁信号，并通过所述第一仲裁信号和第二仲裁信号分别驱动所述第二延时切换电路和所述第一延时切换电路。示意性具有仲裁机制的RS485中继电路：如图1至图6所示，根据本申请实施例所述的具有仲裁机制的RS485中继电路。具体地，如图1和图2所示，所述具有仲裁机制的RS485中继电路，包括：第一RS485控制器、第二RS485控制器、第一延时切换电路、第二延时切换电路，以及，仲裁电路，所述第一延时切换电路连接于所述第一RS485控制器，所述第二延时切换电路连接于所述第二RS485控制器；所述仲裁电路电连接于所述第一RS485控制器、所述第二RS485控制器、所述第一延时切换电路和所述第二延时切换电路。所述仲裁电路用于分别接收来自所述第一RS485控制器的第一信号和来自所述第二RS485的第二信号；还进一步用于基于所述第一信号和所述第二信号，通过低电平抢先仲裁机制生成第一仲裁信号和第二仲裁信号，并通过所述第一仲裁信号和第二仲裁信号分别驱动所述第二延时切换电路和所述第一延时切换电路。具体地，所述第一RS485控制器，简称RS485控制器1，具有接口A1、接口B1、接口RX1、接口TX1。所述接口A1和接口B1用于接收差分信号，实现差分传输。所述接口RX1和所述接口TX1用于接收或发送信号。所述第二RS控制器，简称RS485控制器2，具有接口A2、接口B2、接口RX2、接口TX2。所述接口A2和接口B2用于接收差分信号，实现差分传输。所述接口RX2和所述接口TX2用于接收或发送信号。所述第一延时切换电路具有接口EN1。所述接口EN1用于输出使能信号。如图4所示，所述第一延时切换电路包括第一PNP型三极管，简称PNP1。所述第一延时切换电路还包括第一RC电路。所述第一PNP型三极管具有基极和集电极。所述第一RC电路包括相互并联的第一电阻和第一电容。所述第一电阻和所述第一电容相互并联，且并联于所述第一PNP型三极管的基极和集电极之间。所述第二延时切换电路具有接口EN2。所述接口EN2用于输出使能信号。如图5所示，所述第二延时切换电路包括第二PNP型三极管，简称PNP2。所述第二延时切换电路还包括第二RC电路。所述第二PNP型三极管具有基极和集电极。所述第二RC电路包括相互并联的第二电阻和第二电容。所述第二电阻和所述第二电容相互并联，且并联于所述第二PNP型三极管的基极和集电极之间。所述仲裁电路包括至少一JK触发器。所述JK触发器设置有互锁电路。所述仲裁电路采用由非门电路和与非门电路组成的JK触发器来实现低电平抢先仲裁机制。具体地，所述JK触发器的互锁电路包括第一非门电路、第一与非门电路、第二非门电路和第二与非门电路。所述第一非门电路和所述第一与非门电路串联形成第一逻辑支路，所述第二非门电路和所述第二非门电路串联形成第二逻辑支路，所述第一逻辑支路并联于所述第二逻辑电路。如图3所示，所述第一非门电路包括第一二极管，简称，N1。所述第一与非门电路包括第一三极管，简称G1。所述第一二极管的正极连接于所述第一RS485控制器的接口RX1，所述第一二极管的负极连接于所述第一三极管。所述第二非门电路包括第二二极管，简称，N2。所述第二与非门电路包括第二三极管，简称G2。所述第二二极管的正极连接于所述第二RS485控制器的接口RX2，所述第二二极管的负极连接于所述第二三极管。所述具有仲裁机制的RS485中继电路能够通过所述仲裁电路JK触发器的互锁电路实现低电平抢先仲裁机制，并通过第一延时切换电路和第二延时切换电路控制RS485收发控制信号实现收发自动切换；同时通过RC延时切换电路，即，第一延时切换电路和第二延时切换电路增加一个额外的高电平强输出状态来实现远距离通信。在信号传输过程中，所述第一RS485控制器通过所述接口A1和接口B1接收外部差分信号，通过所述接口RX1向所述仲裁电路发送所述第一信号。所述第二RS485控制器通过所述接口A2和接口B2接收外部差分信号，通过所述接口RX2向所述仲裁电路发送所述第二信号。所述第一延时切换电路通过所述接口EN1向所述第一RS485控制器发送第一使能信号，所述第二延时切换电路通过所述接口EN2向所述第二RS485控制器发送第二使能信号。当中继器两端均未收到外部信号时，即，当所述第一RS485控制器和所述第二RS485控制器均没有收到外部信号时，所述第一RS485控制器的接口RX1和所述第二RS485控制器的接口RX2均保持高电平。所述第一RS485控制器的接口RX1经过“非门”N1产生低电平强制驱动“与非门”G1输出Q1为高电平。同理，所述第二RS485控制器的接口RX2高电平强制驱动“与非门”G2输出Q2为高电平。相应地，所述JK触发器用于在所述第一RS485控制器和所述第二RS485控制器没有收到外部信号时基于所述第一信号和所述第二信号获得高电平的第一仲裁信号和高电平的第二仲裁信号。具体地，所述第一非门电路用于将高电平的所述第一信号转换为低电平的第一中间信号，所述第一与非门电路用于在所述第一RS485控制器没有收到外部信号时将低电平的所述第一中间信号强制转换为高电平的所述第一仲裁信号，所述第二非门电路用于将高电平的所述第二信号转换为低电平的第二中间信号，所述第二与非门电路用于在所述第二RS485控制器没有收到外部信号时将低电平的所述第二中间信号强制转换为高电平的所述第二仲裁信号。Q1高电平将关断所述第二延时切换电路的PNP2，所述第二延时切换电路的接口EN2将下拉为低电平，使RS485控制器2(REN2/TEN2）禁止发送而处于接收状态。同理Q2高电平将关断所述第一延时切换电路的PNP1，所述第一延时切换电路的接口EN1将下拉为低电平，使RS485控制器1(REN1/TEN1）禁止发送而处于接收状态。此时，中继器两端，即，所述第一RS485控制器和所述第二RS485控制器均处于接收状态，即，空闲状态。相应地，所述第一延时切换电路用于基于所述第二仲裁信号生成第一使能信号，所述第二延时切换电路用于基于所述第一仲裁信号生成第二使能信号。进一步地，所述第一延时切换电路用于在接收到高电平的所述第二仲裁信号后向所述第一RS485控制器输出低电平的所述第一使能信号，使得所述第一RS485控制器处于接收状态；所述第二延时切换电路用于在接收到高电平的所述第一仲裁信号后向所述第二RS485控制器输出低电平的所述第二使能信号，使得所述第二RS485控制器处于接收状态。空闲状态下，若RS485控制器1首先收到外部低电平差分信号，处于接收状态的RS485控制器1输出RX1转换为低电平。RX1经过“非门”N1产生高电平和来自“与非门”G2的高电平Q2做“与非”运算后，Q1输出为低电平。相应地，所述第一RS485控制器用于接收到低电平差分信号时将其接收到的所述低电平差分信号转换为低电平的所述第一信号。所述仲裁电路的所述JK触发器用于在所述第一RS485控制器先于所述第二RS485控制器接收到所述低电平差分信号时基于所述第一信号和所述第二信号获得低电平的第一仲裁信号和高电平的第二仲裁信号。具体地，所述第二非门电路用于将高电平的所述第二信号转换为低电平的所述第二中间信号，所述第二与非门电路用于在所述第二RS485控制器没有收到外部信号时将低电平的所述第二中间信号强制转换为高电平的所述第二仲裁信号；所述第一非门电路用于将低电平的所述第一信号转换为高电平的第一中间信号，所述第一与非门电路用于在所述第一RS485控制器接收到所述低电平差分信号时对高电平的所述第一中间信号与所述第二与非门电路输出的高电平的所述第二仲裁信号做与非运算，并将高电平的所述第一中间信号转换为低电平的所述第一仲裁信号。Q1低电平会立即开启所述第二延时切换电路的PNP2，使能RS485控制器2(REN2/TEN2）发送。RS485控制器1从接口RX1发送的数据，即，所述第一信号立即传输至所述RS485控制器2的接口TX2，并由所述RS485控制器2的接口TX2转发出去。此时由于Q1处于低电平，作用到“与非门”G2，强制Q2保持为高电平。从而保证RS485控制器1强制处于接收状态，而不再受到RS485控制器2的接口RX2状态影响。具有仲裁机制的RS485中继电路处于从1到2的低电平中继状态。相应地，所述第一延时切换电路用于在所述第二RS485控制器没有收到外部信号时在接收到高电平的所述第二仲裁信号后向所述第一RS485控制器输出低电平的所述第一使能信号，使得所述第一RS485控制器处于接收状态；所述第二延时切换电路用于在接收到低电平的所述第一仲裁信号后向所述第二RS485控制器输出高电平的所述第二使能信号，使得所述第二RS485控制器处于发送状态。当RS485控制器1再次收到外部高电平差分信号，处于接收状态的RS485控制器1的接口RX1输出转换为高电平，接口RX1经过“非门”N1产生低电平强制输出Q1为高电平。相应地，所述第一RS485控制器用于在预设延时时间内接收到高电平差分信号时将其接收到的所述高电平差分信号转换为高电平的所述第一信号。所述仲裁电路的所述JK触发器用于在所述第一RS485控制器接收到所述高电平差分信号时基于所述第一信号和所述第二信号获得高电平的第一仲裁信号和高电平的第二仲裁信号。具体地，所述第一非门电路用于将高电平的所述第一信号转换为低电平的第一中间信号，所述第一与非门电路用于在所述第一RS485控制器在预设延时时间内接收到高电平差分信号时将低电平的所述第一中间信号强制转换为高电平的所述第一仲裁信号，所述第二非门电路用于将高电平的所述第二信号转换为低电平的所述第二中间信号，所述第二与非门电路用于在所述第二RS485控制器没有收到外部信号时将低电平的所述第二中间信号强制转换为高电平的所述第二仲裁信号。延时切换电路2由于第二RC电路延时的影响仍保持接口EN2为高电平状态。RS485控制器1的接口RX1发出的高电平信号，即，第一信号会立即通过RS485控制器的接口TX2发送出去。具有仲裁机制的RS485中继电路处于从1到2的高电平中继状态。同时由于RS485控制器2处于接收禁止状态，上拉电阻R2使接口RX2处于高电平，经过“非门”N2和“与非门”G1强制Q1保持高电平。通过延时切换电路1锁定RS485控制器1为接收状态。相应地，所述第二延时切换电路用于在所述第一RS485控制器在预设延时时间内接收到高电平差分信号时向所述第二RS485控制器继续输出高电平的所述第二使能信号，使得所述第二RS485控制器处于发送状态。延时时间结束后，RS485控制器1仍没有低电平再次出现，则延时切换电路2将通过RC放电恢复为低电平，RS485控制器2将转换为接收状态。中继器恢复空闲状态。若RS485控制器2无外部信号输入，接口RX2将维持为高电平，根据前述分析，具有仲裁机制的RS485中继电路将恢复为双向输入的空闲状态。若RS485控制器1有外部信号输入且为低电平，此电路将装换为电路处于从2到1的低电平中继状态，如图6所示。相应地，所述第一RS485控制器用于在预设延时时间内没有接收到低电平差分信号时输出高电平的所述第一信号，所述第二RS485控制器用于在其没有收到外部信号时输出高电平的所述第二信号。所述仲裁电路的所述JK触发器用于在所述第一RS485控制器接收到高平差分信号后在预设延时时间内没有接收到低电平差分信号时基于所述第一信号和所述第二信号获得高电平的第一仲裁信号和高电平的第二仲裁信号。具体地，所述第一非门电路用于将高电平的所述第一信号转换为低电平的第一中间信号，所述第一与非门电路用于在所述第一RS485控制器在预设延时时间内没有接收到低电平差分信号时将低电平的所述第一中间信号强制转换为高电平的所述第一仲裁信号，所述第二非门电路用于将高电平的所述第二信号转换为低电平的所述第二中间信号，所述第二与非门电路用于在所述第二RS485控制器没有收到外部信号时将低电平的所述第二中间信号强制转换为高电平的所述第二仲裁信号。所述第二延时切换电路用于在所述第一RS485控制器在预设延时时间内没有接收到低电平差分信号时向所述第二RS485控制器输出低电平的所述第二使能信号，使得所述第二RS485控制器处于接收状态。所述第一RS485控制器用于在预设延时时间内接收到低电平差分信号时输出低电平的所述第一信号。所述仲裁电路的所述JK触发器用于在所述第一RS485控制器接收到低平差分信号后在预设延时时间内接收到低电平差分信号时基于所述第一信号和所述第二信号获得低电平的第一仲裁信号和高电平的第二仲裁信号。具体地，所述第一非门电路用于将低电平的所述第一信号转换为高电平的第一中间信号，所述第一与非门电路用于在所述第一RS485控制器在预设延时时间内接收到低电平差分信号时将高电平的所述第一中间信号转换为低电平的所述第一仲裁信号。所述第二延时切换电路还用于在所述第一RS485控制器在预设延时时间内接收到低电平差分信号时向所述第二RS485控制器输出高电平的所述第二使能信号，使得所述第二RS485控制器处于接收状态。由“与非门”组成的JK触发器，使得Q1和Q2不会同时出现低电平， 保证RS485控制器1和RS485控制器2不会同时处于发送状态。当中继器两侧同时收到外部低电平时，首先收到低电平的RS485控制器将立即锁定收到状态，从而实现仲裁抢先，避免双向发送数据的互相影响。综上，基于本申请实施例的具有仲裁机制的RS485中继电路被阐明。所述具有仲裁机制的RS485中继电路通过低电平抢先仲裁机制避免两个RS485控制器同时处于发送状态，能够实现RS485中继器快速仲裁和自动切换。以上对本申请及其实施方式进行了描述，这种描述没有限制性，附图中所示的也只是本申请的实施方式之一，实际的结构并不局限于此。总而言之如果本领域的普通技术人员受其启示，在不脱离本申请创造宗旨的情况下，不经创造性地设计出与该技术方案相似的结构方式及实施例，均应属于本申请的保护范围。
