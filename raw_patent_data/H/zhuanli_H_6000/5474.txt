标题title
基于信令数据的大规模人员典型停留地识别方法及系统
摘要abst
本发明涉及一种基于信令数据的大规模人员典型停留地识别方法及系统，其方法包括：S1：对用户手机基站的信令数据进行预处理，筛选不同时间段的信令数据，得到筛选后的信令数据；S2：根据筛选后的信令数据，计算用户在某个日期的不同时间段与基站通讯的通讯范围框，计算该用户的疑似停留地的经纬度坐标；并将疑似停留地划分为疑似居住地和作地；S3：将疑似居住地和工作地映射到空间网格，并将同一空间网格中的疑似居住地或工作地进行聚合后得到其经纬度坐标；S4：计算每个用户的相邻居住地或工作地之间的距离，如果小于阈值则进行合并，最终确定每个用户的居住地和工作地的经纬度坐标。本发明的方法以快速有效地识别典型停留地。
权利要求书clms
1.一种基于信令数据的大规模人员典型停留地识别方法，其特征在于，包括：步骤S1：对用户手机基站的信令数据进行预处理，筛选不同时间段的所述信令数据，得到筛选后的信令数据；步骤S2：根据所述筛选后的信令数据，计算用户在日期/＞的时间段/＞与基站通讯的通讯范围框/＞，并根据/＞与基站通讯的时长，计算该用户在日期/＞在时间段/＞的疑似停留地的经纬度坐标；根据时间段/＞的不同，将所述疑似停留地划分为疑似居住地和疑似工作地；步骤S3：将所述疑似居住地和所述疑似工作地映射到空间网格中，并将同一空间网格中的所述疑似居住地或所述疑似工作地进行聚合，得到居住地或工作地的经纬度坐标；步骤S4：计算每个用户的相邻居住地或工作地之间的距离，如果小于阈值则进行合并，最终确定每个用户的居住地和工作地的经纬度坐标。2.根据权利要求1所述的基于信令数据的大规模人员典型停留地识别方法，其特征在于，所述步骤S1：对用户手机基站的信令数据进行预处理，筛选不同时间段的所述信令数据，得到筛选后的信令数据，具体包括：步骤S11：获取用户手机基站的信令数据，包括：终端imsi、手机号msisdn、基站编号laccell、基站纬度latitude、基站经度longitude、基站通讯开始时间procedureStartTime、基站通讯结束时间procedureEndTime；过滤其中包含空值的信令数据；步骤S12：根据procedureStartTime以及procedureEndTime，在预设的一个或多个时间段内筛选所述信令数据，得到筛选后的信令数据用于计算用户的停留点。3.根据权利要求2所述的基于信令数据的大规模人员典型停留地识别方法，其特征在于，所述步骤S2：根据所述筛选后的信令数据，计算用户在日期/＞的时间段/＞与基站通讯的通讯范围框/＞，并根据/＞与基站通讯的时长，计算该用户在日期/＞在时间段/＞的疑似停留地的经纬度坐标；根据时间段/＞的不同，将所述疑似停留地划分为疑似居住地和疑似工作地，具体包括：步骤S21：计算用户，在日期/＞的时间段/＞的通讯范围框/＞，其中，/＞由时间段/＞内与之通讯的所有基站的最小和最大经纬度坐标组成：；步骤S22：如果的中最大和最小经纬度差值大于阈值，表示该用户/＞在日期/＞中的第/＞个时间段在运动中，并未停留，将其过滤掉；步骤S23：在通讯范围框中，该用户/＞在日期/＞中时间段/＞可能与/＞个基站通讯，其坐标分别为/＞，计算每一个基站/＞通讯停留时间：/＞；以时间权重计算通讯范围框中疑似停留点/＞的经纬度坐标：；步骤S24：将所述疑似停留点根据时间段/＞的不同，划分为疑似居住地和疑似工作地/＞。4.根据权利要求3所述的基于信令数据的大规模人员典型停留地识别方法，其特征在于，所述步骤S3：将所述疑似居住地和所述疑似工作地映射到空间网格中，并将同一空间网格中的所述疑似居住地或所述疑似工作地进行聚合，得到居住地或工作地的经纬度坐标，具体包括：步骤S31：将用户在日期/＞的/＞和/＞的经纬度坐标映射成空间网格的编码，构建多日网格集合：/＞，并记录每个网格/＞的映射次数/＞；每一个网格/＞中对应/＞天的疑似居住地/＞或疑似工作地/＞；步骤S32：针对用户，将其对应的网格集合/＞，按照每一个网格的映射次数/＞按照降序排序，得到该用户的第一居住地或工作地网格，第二居住地或工作地网格，以此类推；步骤S33：对于用户的第k个网格，计算其对应的居住地或工作地经纬度坐标分别为或/＞，该结果即为用户/＞的第v个居住地或工作地/＞的经纬度坐标。5.根据权利要求4所述的基于信令数据的大规模人员典型停留地识别方法，其特征在于，所述步骤S4：计算每个用户的相邻居住地或工作地之间的距离，如果小于阈值则进行合并，最终确定每个用户的居住地和工作地的经纬度坐标，具体包括：步骤S41：计算每个用户的每一个居住地或工作地与该用户其余居住地或工作地的距离，如果距离小于阈值，则认定二者相邻，转至步骤S42，否则不需要处理；步骤S42：对于相邻的两个居住地或工作地，将其对应的网格进行合并，执行步骤S32和S33，计算出合并后居住地或工作地的经纬度，直到该用户所有的居住地或工作地均不相邻，从而得到用户最终的居住地或工作地。6.一种基于信令数据的大规模人员典型停留地识别系统，其特征在于，包括下述模块：预处理模块，用于对用户手机基站的信令数据进行预处理，筛选不同时间段的所述信令数据，得到筛选后的信令数据；计算疑似停留地模块，用于根据所述筛选后的信令数据，计算用户在日期/＞的时间段与基站通讯的通讯范围框/＞，并根据/＞与基站通讯的时长，计算该用户在日期在时间段/＞的疑似停留地的经纬度坐标；根据时间段/＞的不同，将所述疑似停留地划分为疑似居住地和疑似工作地；计算停留地模块，用于将所述疑似居住地和所述疑似工作地映射到空间网格中，并将同一空间网格中的所述疑似居住地或所述疑似工作地进行聚合，得到居住地或工作地的经纬度坐标；合并停留地模块，用于计算每个用户的相邻居住地或工作地之间的距离，如果小于阈值则进行合并，最终确定每个用户的居住地和工作地的经纬度坐标。
说明书desc
技术领域本发明涉及通讯领域，具体涉及一种基于信令数据的大规模人员典型停留地识别方法及系统。背景技术典型停留地是居民连续、经常停留出现的活动范围，以工作地和居住地为主，对分析用户出行目的、发现用户出行规律具有重要意义。在时间尺度上，典型停留地呈现长期性和规律性的特点；在空间尺度上，典型停留地是用户最频繁出现的区域，也是多种活动区域最频繁的重叠区域。基于本研究所定义的典型停留地，目前采用信令数据的居住地、工作地识别主要采用时序数据聚类的方法：利用用户唯一标识对数据源进行分组；对数据源进行邻域分析，对每一个停留点构建一个邻域集合；采用空间聚类算法对上述停留点及其邻域集合进行聚类分组；通过聚类结果，进一步分析计算得到用户的典型停留地。目前，上述识别方法最大的问题是：聚类算法需要多轮迭代才能计算出聚类分组结果，这对于将识别算法应用到千万级甚至更大数量级的城市/省份中，算法的运行效率是灾难性。因此，如何能快速有效地识别典型停留地成为一个亟待解决的问题。发明内容为了解决上述技术问题，本发明提供一种基于信令数据的大规模人员典型停留地识别方法及系统。本发明技术解决方案为：一种基于信令数据的大规模人员典型停留地识别方法，包括：步骤S1：对用户手机基站的信令数据进行预处理，筛选不同时间段的所述信令数据，得到筛选后的信令数据；步骤S2：根据所述筛选后的信令数据，计算用户在日期/＞的时间段/＞与基站通讯的通讯范围框/＞，并根据/＞与基站通讯的时长，计算该用户在日期/＞在时间段/＞的疑似停留地的经纬度坐标；根据时间段/＞的不同，将所述疑似停留地划分为疑似居住地和疑似工作地；步骤S3：将所述疑似居住地和所述疑似工作地映射到空间网格中，并将同一空间网格中的所述疑似居住地或所述疑似工作地进行聚合，得到居住地或工作地的经纬度坐标；步骤S4：计算每个用户的相邻居住地或工作地之间的距离，如果小于阈值则进行合并，最终确定每个用户的居住地和工作地的经纬度坐标。本发明与现有技术相比，具有以下优点：本发明公开了一种基于信令数据的大规模人员典型停留地识别方法，采用流式处理计算流程，显著提高了识别算法的运行效率，能够轻松应用在千万级甚至更大数量级的城市/省份中；同时得益于算法的高效性，本发明的方法能够支持一个月甚至更长时间跨度的信令数据用于计算典型停留地，这对于典型停留地的挖掘具有更大的意义。附图说明图1为本发明实施例中一种基于信令数据的大规模人员典型停留地识别方法的流程图；图2为本发明实施例中一种基于信令数据的大规模人员典型停留地识别系统的结构框图。具体实施方式本发明提供了一种基于信令数据的大规模人员典型停留地识别方法，可以快速有效地识别典型停留地。为了使本发明的目的、技术方案及优点更加清楚，以下通过具体实施，并结合附图，对本发明进一步详细说明。实施例一如图1所示，本发明实施例提供的一种基于信令数据的大规模人员典型停留地识别方法，包括下述步骤：步骤S1：对用户手机基站的信令数据进行预处理，筛选不同时间段的信令数据，得到筛选后的信令数据；步骤S2：根据筛选后的信令数据，计算用户在日期/＞的时间段/＞与基站通讯的通讯范围框/＞，并根据/＞与基站通讯的时长，计算该用户在日期/＞在时间段/＞的疑似停留地的经纬度坐标；根据时间段/＞的不同，将疑似停留地划分为疑似居住地和疑似工作地；步骤S3：将疑似居住地和疑似工作地映射到空间网格中，并将同一空间网格中的疑似居住地或疑似工作地进行聚合，得到居住地或工作地的经纬度坐标；步骤S4：计算每个用户的相邻居住地或工作地之间的距离，如果小于阈值则进行合并，最终确定每个用户的居住地和工作地的经纬度坐标。在一个实施例中，上述步骤S1：对用户手机基站的信令数据进行预处理，筛选不同时间段的信令数据，得到筛选后的信令数据，具体包括：步骤S11：获取用户手机基站的信令数据，包括：终端imsi、手机号msisdn、基站编号laccell、基站纬度latitude、基站经度longitude、基站通讯开始时间procedureStartTime、基站通讯结束时间procedureEndTime；过滤其中包含空值的信令数据；获取用户手机基站的信令数据后，为了防止其中的空值对算法稳定性、准确性造成影响，需要对上述7个字段对应的数据进行空值过滤，过滤掉包含空值的数据；步骤S12：根据procedureStartTime以及procedureEndTime，在预设的一个或多个时间段内筛选信令数据，得到筛选后的信令数据用于计算用户的停留点；本发明实施例根据基站通讯开始时间procedureStartTime以及基站通讯结束时间procedureEndTime，筛选出位于时间段1、时间段2、时间段3的信令数据，具体筛选规则以时间段1为例：。位于时间段1的信令数据用于计算用户居住地；位于时间段2和时间段3的信令数据用于计算工作地。在一个实施例中，上述步骤S2：根据筛选后的信令数据，计算用户在日期/＞的时间段/＞与基站通讯的通讯范围框/＞，并根据/＞与基站通讯的时长，计算该用户在日期/＞在时间段/＞的疑似停留地的经纬度坐标；根据时间段/＞的不同，将疑似停留地划分为疑似居住地和疑似工作地，具体包括：步骤S21：计算用户，在日期/＞的时间段/＞的通讯范围框/＞，其中，/＞由时间段/＞内与之通讯的所有基站的最小和最大经纬度坐标组成：；在本发明实施例中，计算用户在日期/＞中三个时间段的通讯范围框，分别为/＞，/＞，/＞，每一个通讯框都由其时间段内与之通讯的所有基站中的最小最大经纬度坐标组成；步骤S22：如果的中最大和最小经纬度差值大于阈值，表示该用户/＞在日期/＞中的第/＞个时间段在运动中，并未停留，将其过滤掉；在本发明实施例中，将阈值设为，即当通讯范围框/＞中最大和最小经纬度跨度均大于/＞，则将其过滤掉；步骤S23：在通讯范围框中，该用户/＞在日期/＞中时间段/＞可能与/＞个基站通讯，其坐标分别为/＞，计算每一个基站/＞通讯停留时间：/＞；以时间权重计算通讯范围框中疑似停留点/＞的经纬度坐标：；步骤S24：将疑似停留点根据时间段/＞的不同，划分为疑似居住地和疑似工作地/＞。在本发明实施中，使用时间段1的疑似停留点作为用户/＞在日期/＞的疑似居住地/＞，使用时间段2和时间段3一起计算的疑似停留地/＞作为用户在日期/＞的疑似工作地/＞。在一个实施例中，上述步骤S3：将疑似居住地和疑似工作地映射到空间网格中，并将同一空间网格中的疑似居住地或疑似工作地进行聚合，得到居住地或工作地的经纬度坐标，具体包括：步骤S31：将用户在日期/＞的/＞和/＞的经纬度坐标映射成空间网格的编码，构建多日网格集合：/＞，并记录每个网格/＞的映射次数/＞；每一个网格/＞中对应/＞天的疑似居住地/＞或疑似工作地/＞；将用户在日期/＞的疑似居住地/＞经纬度坐标和疑似工作地经纬度坐标转换成Geohash网格编码，得到每一个用户的多日网格集合；在转换映射的同时，统计每一个网格/＞被转换映射的次数，每一个网格/＞中对应/＞天的疑似居住地/＞或疑似工作地；步骤S32：针对用户，将其对应的网格集合/＞，按照每一个网格的映射次数/＞按照降序排序，得到该用户的第一居住地或工作地网格，第二居住地或工作地网格，以此类推；步骤S33：对于用户的第k个网格，计算其对应的居住地或工作地经纬度坐标分别为/＞或/＞，该结果即为用户/＞的第v个居住地/＞或工作地/＞的经纬度坐标。通过计算每一个网格中所有疑似居住地和疑似工作地的平均坐标/＞或/＞作为该网格对应的居住地或工作地经纬度坐标。在一个实施例中，上述步骤S4：计算每个用户的相邻居住地或工作地之间的距离，如果小于阈值则进行合并，最终确定每个用户的居住地和工作地的经纬度坐标，具体包括：步骤S41：计算每个用户的每一个居住地或工作地与该用户其余居住地或工作地的距离，如果距离小于阈值，则认定二者相邻，转至步骤S42，否则不需要处理；遍历每个用户的所有居住地或工作地/＞，计算每一个居住地/＞或工作地/＞与该用户其余居住地/＞或工作地/＞的距离。如果距离小于阈值，本发明实施例的阈值设为1KM，则认定该用户第i个居住地或工作地与第j个居住地或工作地相邻，需要进一步合并处理；步骤S42：对于相邻的两个居住地或工作地，将其对应的网格进行合并，执行步骤S32和S33，计算出合并后居住地或工作地的经纬度，直到该用户所有的居住地或工作地均不相邻。将需要合并的第i个与第j个居住地或工作地原本对应的第i个和第j个网格进行合并，重新执行步骤S32和步骤S33，计算出新的居住地/工作地经纬度。重复步骤S41，直至用户对应的所有居住地或工作地两两均不相邻。实施例二如图2所示，本发明实施例提供了一种基于信令数据的大规模人员典型停留地识别系统，包括下述模块：预处理模块51，用于对用户手机基站的信令数据进行预处理，筛选不同时间段的信令数据，得到筛选后的信令数据；计算疑似停留地模块52，用于根据筛选后的信令数据，计算用户在日期/＞的时间段/＞与基站通讯的通讯范围框/＞，并根据/＞与基站通讯的时长，计算该用户在日期/＞在时间段/＞的疑似停留地的经纬度坐标；根据时间段/＞的不同，将疑似停留地划分为疑似居住地和疑似工作地；计算停留地模块53，用于将疑似居住地和疑似工作地映射到空间网格中，并将同一空间网格中的疑似居住地或疑似工作地进行聚合，得到居住地或工作地的经纬度坐标；合并停留地模块54，用于计算每个用户的相邻居住地或工作地之间的距离，如果小于阈值则进行合并，最终确定每个用户的居住地和工作地的经纬度坐标。提供以上实施例仅仅是为了描述本发明的目的，而并非要限制本发明的范围。本发明的范围由所附权利要求限定。不脱离本发明的精神和原理而做出的各种等同替换和修改，均应涵盖在本发明的范围之内。
