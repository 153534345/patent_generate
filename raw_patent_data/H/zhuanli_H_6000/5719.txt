标题title
一种最优量化位数的模数转换器
摘要abst
本申请公开了一种最优量化位数的模数转换器，属于信号处理领域，包括：放大单元，用于放大输入信号的幅度；调制单元，用于将输入信号从模拟信号转换为数字信号；控制单元，所述控制单元包括滤波单元、计算单元和判断单元，所述滤波单元用于滤除输入信号中的噪声；所述计算单元用于计算滤波后输入信号的量化位数和输出速度；所述判断单元用于循环判断所述量化位数和输出速度。通过设置量化位数和输出速度的范围判断信号的精度和速度是否满足要求，先对不满足量化位数要求的输入信号循环抽取调节，再选取设置范围内的输出速度，最后将其存储并输出。通过上述模数转换器，能根据所需的精度和速度对信号进行自适应调节，从而使其输出最优量化位数。
权利要求书clms
1.一种最优量化位数的模数转换器，其特征在于，包括：放大单元，用于放大输入信号的幅度；调制单元，用于将输入信号从模拟信号转换为数字信号；控制单元，所述控制单元包括滤波单元、计算单元和判断单元，所述滤波单元用于滤除输入信号中存在的噪声；所述计算单元用于计算经过所述滤波单元后输入信号的量化位数和输出速度，所述判断单元用于循环判断所述量化位数和所述输出速度。2.根据权利要求1所述的一种最优量化位数的模数转换器，其特征在于，所述滤波单元包括对输入信号进行积分、抽取、滑动平均步骤。3.根据权利要求1所述的一种最优量化位数的模数转换器，其特征在于，通过所述计算单元计算输入信号的信噪比，根据所述信噪比计算输入信号的量化位数，再根据所述量化位数计算输入信号的输出速度。4.根据权利要求1所述的一种最优量化位数的模数转换器，其特征在于，预先设置输入信号量化位数的范围，所述判断单元根据设置的量化位数范围循环判断所述量化位数是否处于量化位数范围内，对未处于量化位数范围内的输入信号通过所述滤波单元进行调节。5.根据权利要求4所述的一种最优量化位数的模数转换器，其特征在于，通过调节所述滤波单元中的抽取个数改变输入信号的量化位数，直至使所述量化位数在设置的量化位数范围内。6.根据权利要求5所述的一种最优量化位数的模数转换器，其特征在于，预先设置输出速度的范围，所述判断单元根据设置的输出速度范围判断所述量化位数下的输出速度是否处于输出速度范围内，选取符合输出速度范围的输出速度。7.根据权利要求1所述的一种最优量化位数的模数转换器，其特征在于，所述模数转换器还包括存储单元，所述存储单元用于将输入信号最终的所述量化位数和所述输出速度存储并输出。8.根据权利要求1所述的一种最优量化位数的模数转换器，其特征在于，所述调制单元为sigma-delta调制器。9.根据权利要求1所述的一种最优量化位数的模数转换器，其特征在于，在所述调制单元中还包括输出时钟引脚，根据所述输出时钟引脚有序地输出信号时序。
说明书desc
技术领域本申请涉及信号处理领域，具体而言，特别涉及一种最优量化位数的模数转换器。背景技术模数转换器一般指将模拟信号转变为数字信号的电子元件，而其中的sigma-delta ADC通常是由模拟调制器和降采样抽取滤波器组成，对输入信号进行采样，采样后的信号通过调制器处理后转换为数字信号。信号经过传统的模数转换器调制后通常其量化位数为固定值，即信号的精度和速度为不可调的。模数转换器在信号处理过程中，由于信号中含有噪声，需要通过模数转换器中的滤波器进行信号调制，但现有的滤波器实际上都会导致噪声无法完全滤除，从而导致采样信号通过滤波器后精度会产生影响。且由于信号在采样周期内的采样值是不固定的，采样周期过长会引起有效信号的严重丢失，从而使信号质量变差；采样周期过短会导致两次采样值的变化量太小，浪费资源。因此实现精度和速度自定义调节的过程是亟不可待的问题。发明内容基于现有技术的不足，针对现有模数转换器信号量化位数不可调的问题，本申请提供了一种最优量化位数的模数转换器，包括：放大单元，用于放大输入信号的幅度；调制单元，用于将输入信号从模拟信号转换为数字信号；控制单元，所述控制单元包括滤波单元、计算单元和判断单元，所述滤波单元用于滤除输入信号中存在的噪声；所述计算单元用于计算经过所述滤波单元后输入信号的量化位数和输出速度，所述判断单元用于循环判断所述量化位数和所述输出速度。可选地，所述滤波单元包括对输入信号进行积分、抽取、滑动平均步骤。可选地，通过所述计算单元计算输入信号的信噪比，根据所述信噪比计算输入信号的量化位数，再根据所述量化位数计算输入信号的输出速度。可选地，预先设置输入信号量化位数的范围，所述判断单元根据设置的量化位数范围循环判断所述量化位数是否处于量化位数范围内，对未处于量化位数范围内的输入信号通过所述滤波单元进行调节。可选地，通过调节所述滤波单元中的抽取个数改变输入信号的量化位数，直至使所述量化位数在设置的量化位数范围内。可选地，预先设置输出速度的范围，所述判断单元根据设置的输出速度范围判断所述量化位数下的输出速度是否处于输出速度范围内，选取符合输出速度范围的输出速度。可选地，所述模数转换器还包括存储单元，所述存储单元用于将输入信号最终的所述量化位数和所述输出速度存储并输出。可选地，所述调制单元为sigma-delta调制器。可选地，在所述调制单元中还包括输出时钟引脚，根据所述输出时钟引脚有序地输出信号时序。本申请的有益效果是：本申请提出了一种最优量化位数的模数转换器，包括：放大单元，用于放大输入信号的幅度；调制单元，用于将输入信号从模拟信号转换为数字信号；控制单元，所述控制单元包括滤波单元、计算单元和判断单元，所述滤波单元用于滤除输入信号中存在的噪声；所述计算单元用于计算经过滤波单元后输入信号的量化位数和输出速度，所述判断单元用于循环判断所述量化位数和输出速度。用户设置信号量化位数和输出速度的期望范围，通过上述模数转换器进行自适应调节，提高模数转换器输出精度和速度的性能，使其能够自定义输出速度和精度，从而拓宽了其应用场景。附图说明此处所说明的附图用来提供对本申请的进一步理解，构成本申请的一部分，本申请的示意性实施例及其说明用于解释本申请，并不构成对本申请的不当限定。在附图中：图1是一种最优量化位数的模数转换器结构示意图；图2是根据本申请实施例仿真的输入信号波形图；图3是根据本申请实施例仿真的输入信号经过调制器后的示意图；图4为根据本申请实施例仿真的经过CIC滤波器后信号的功率频谱图；图5根据本申请实施例提供的一种自适应调节抽取个数的趋势图。其中，上述附图包括以下附图标记：1-运算放大器，2-sigma-delta调制器，3-CIC滤波器，4-积分器，5-抽取器，6-滑动平均滤波器，7-比较器，8-精度寄存器，9-速度寄存器，10-输出时钟引脚，11-MCU。具体实施方式为了使本技术领域的人员更好地理解本申请方案，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述。显然，所描述的实施例仅仅是本申请一部分的实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本申请保护的范围。需要说明的是，本申请的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本申请的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。本申请提出了一种最优量化位数的模数转换器，如图1所示，在一种实施方式中，包括：放大单元、调制单元、控制单元，在控制单元里包括滤波单元、计算单元、判断单元。在此申请中放大单元为运算放大器1，用于放大输入信号的幅度；调制单元为sigma-delta 调制器2，用于将输入信号从模拟信号转换为数字信号，调制器可以采用一阶sigam-delta调制器，多阶sigma-delta调制器、MASH结构sigma-delta调制器中的至少一个，在此申请中不做具体限制。其中，在sigma-delta调制器2中还包括输出时钟引脚10，可以输出信号的传输时序，将数字信号周期性地发送出去。控制单元在此申请中具体为MCU11，其中MCU中包含的滤波单元在此申请中具体为CIC滤波器3，在CIC滤波器中包括积分器4、抽取器5、滑动平均滤波器6，对信号进行积分、抽取、滑动平均步骤，用于滤除信号中的干扰噪声。MCU中还包括计算单元，用户通过MCU中的计算单元计算输入信号的信噪比，再根据信噪比计算信号的量化位数，再根据量化位数计算信号的输出速度。MCU中还包括判断单元，判断单元在此申请中为比较器7，比较器根据计算后的量化位数和输出速度判断是否需要通过CIC滤波进行调节。在上述模数转换器中还包括存储单元，具体体现为包括精度寄存器8和速度寄存器9，用于将处理后信号的精度和速度进行存储并输出。基于上述实施例中提出的一种最优量化位数的模数转换器，具体原理体现为：外部输入信号通过运算放大器将信号幅度放大，再将放大的信号接入sigma-delta调制器的输入端，经过sigma-delta调制器转换为一个1bite 流的数字信号，由此实现模拟信号转换为数字信号。此时通过sigma-delta调制器的输出端将当前数字信号传输至CIC滤波器，通过CIC滤波器对信号进行噪声滤除。其中经过CIC滤波器进行噪声滤除的过程包括：先通过积分器对数字信号进行积分，可以去除信号中的高频噪声部分，使信号变得平缓；再对信号进行降采样抽取，可以降低信号的输出速率；最后经过滑动平均滤波平滑输入信号的变化，得到最终信号。在对输入信号进行处理完成后，通过MCU中的计算单元计算当前信号的量化位数和输出速度。具体的计算方法包括：首先对信号进行傅里叶变换计算得到功率谱密度函数，并寻找功率谱密度函数的最大值波段，将该波段的值进行平方即为有效信号功率Ps，将功率谱密度函数进行积分即为信号总功率Pa，取信号总功率的一半减去有效信号功率即为噪声功率Pn，再根据公式计算出信号的信噪比。 SNR=10log10 其中SNR为信噪比，Ps为有效信号功率，Pn为噪声功率。在计算完成信噪比后，根据公式计算量化位数。ENOB=/6.02dB其中ENOB为量化位数，SNR为信噪比。在计算完成量化位数后，根据奈奎斯特定理可得到当前采样速率为输入信号速率的两倍，即为fs，输入信号速率为sigma-delta调制器的输出速率，且输出速率为固定值，具体视选择的sigma-delta调制器而定，在此申请中不做具体限制。再根据公式计算信号的输出速度。fn=fs/ENOB 其中，fn为信号的输出速度，fs为信号的采样速率，ENOB为量化位数。一种示例性地，用户设置精度和速度要求，即量化位数以及输出速度的需求范围，如设置精度为13位、误差在0.5位时，设置速度为不大于20khz，根据上述计算可以得到当前信号的输出速度和量化位数。此时通过比较器比较当前信号的量化位数是否在设置的精度范围内，如果量化位数在当前设置范围内，则将当前量化位数存储至精度寄存器中，再通过计算单元计算当前精度下的输出速度，比较器根据设置的速度范围比较输出速度是否在设置范围内，如果速度在范围内，则选取最接近的速度将其存储至速度寄存器中；如果速度未在设置范围内，则选取精度最接近的信号，并将上述寄存器中的精度及速度进行输出。如果精度未处于当前设置范围内，软件通过调节CIC滤波器中的抽取器，自适应调节抽取个数，调节完成后根据上述计算方法，重新计算当前信号的量化位数以及输出速度，再通过比较器循环比较调节后信号的量化位数和输出速度，直至最终信号符合设置的精度和速度范围，并将其存储至精度寄存器和速度寄存器中进行输出。针对上述实施例中对抽取个数进行调节量化位数的过程，如图2-图5所示为仿真结果，如图2所示为输入信号波形图，设置输入信号频率为10KHZ，幅值为4Vpp，偏移为2.5V的正弦信号，输入信号由信号发生器产生。图3是逻辑分析仪采集的1bite流数字信号示意图，上述输入信号经过运算放大器放大后连接调制器的输入端，在经过3阶sigma-delta调制器调制后通过调制器的输出端输出1bite流的数字信号。将上述调制后的输入信号保存并导入仿真软件中，其中在此实施例中CIC滤波器中包括的积分器为三阶迭代积分器，n倍降采样抽取，后置带宽为5的滑动平均滤波器，滤除输入信号中存在的噪声。在将信号经过CIC滤波器进行数据滤波后，使用傅里叶变换计算当前波形的有效幅值和噪声谐波，如图4所示为输入信号经过CIC滤波器后的频谱图，根据频谱图以及上述公式计算输入信号的量化位数和输出速度。基于上述仿真结果，如图5所示为量化位数随抽取个数改变的趋势图，如图5所示，预先设置精度不小于13位时,当抽取个数为30时，经过CIC滤波器处理后的量化位数为12.75，小于设置范围内的量化位数，抽取个数较低，需要增加抽取个数。当抽取个数为46时，经过CIC滤波器处理后的量化位数为13.4，满足量化位数的设置范围。预先设置速度为10khz，误差2khz，此时计算当前量化位数下的输出速度，经过比较符合范围，因此将当前精度及速度进行输出。根据仿真结果得到可以通过自适应调节抽取个数，从而改变精度以及速度，使其满足用户需求。综上所述，在对信号的精度及速度有需求时，可以通过上述模数转换器软件定义其中的抽取个数，从而自适应调节量化位数及输出速度，可以使模数转换器应用于多种场景中，灵活地调节信号的精度和速度。上述本申请实施例序号仅仅为了描述，不代表实施例的优劣。在本申请的上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述的部分，可以参见其他实施例的相关描述。在本申请所提供的几个实施例中，应该理解到，所揭露的技术内容，可通过其它的方式实现。其中，以上所描述的装置实施例仅仅是示意性的，例如所述单元的划分，可以为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，单元或模块的间接耦合或通信连接，可以是电性或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。以上所述仅是本申请的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本申请原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本申请的保护范围。
