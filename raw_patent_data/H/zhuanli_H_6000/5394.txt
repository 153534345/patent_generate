标题title
双模式输出的数模转换电路及数模转换芯片
摘要abst
本申请涉及一种双模式输出的数模转换电路及数模转换芯片，所述电路包括依次连接的电流调制电路、低通滤波电路和复用放大电路，所述电流调制电路基于数字信号对预先生成的基准电流进行调制，输出调制电流；所述低通滤波电路用于对所述调制电流进行滤波，输出对应的直流电流；所述复用放大电路用于基于模式控制信号切换为电流放大电路或电压放大电路，并将所述直流电流放大为对应的模拟电流或模拟电压输出，所述模拟电流的最小输出值大于0A，所述模拟电压的最小输出值为0V，实现同时兼容电流模式和电压模式的输出，解决了在模拟电压最小输出值为0V时要求模拟电流最小输出值为0A导致的电流模式和电压模式无法同时兼容的问题。
权利要求书clms
1.一种双模式输出的数模转换电路，其特征在于，所述电路包括依次连接的电流调制电路、低通滤波电路和复用放大电路，所述电流调制电路基于数字信号对预先生成的基准电流进行调制，输出调制电流；所述低通滤波电路用于对所述调制电流进行滤波，输出对应的直流电流；所述复用放大电路用于基于模式控制信号切换为电流放大电路或电压放大电路，并将所述直流电流放大为对应的模拟电流或模拟电压输出，所述模拟电流的最小输出值大于0A，所述模拟电压的最小输出值为0V。2.根据权利要求1所述的电路，其特征在于，所述复用放大电路包括运算放大器U1、开关电路、电流辅助电路和电压辅助电路；所述开关电路用于基于所述模式控制信号，控制所述电流辅助电路、电压辅助电路与所述运算放大器U1之间导通或断开；所述电流辅助电路用于确定所述模拟电流相对于所述直流电流的放大倍数；所述电压辅助电路用于确定所述模拟电压相对于所述直流电流的放大倍数和平移系数，所述平移系数用于在所述直流电流大于0A的情况下将所述模拟电压的最小输出值限定为0V。3.根据权利要求2所述的电路，其特征在于，所述开关电路包括单刀双掷开关S4和单刀双掷开关S5；在所述模式控制信号为电压模式时，所述电压辅助电路的一端通过所述单刀双掷开关S5与所述运算放大器U1的反相输入端连接，所述电压辅助电路的另一端通过所述单刀双掷开关S4与所述运算放大器U1的输出端和所述模拟电压的输出端连接。4.根据权利要求3所述的电路，其特征在于，所述电压辅助电路包括电阻R3、R4、R5、R6，所述电阻R4的一端连接所述单刀双掷开关S4，所述电阻R4的另一端连接所述电阻R3的一端和所述电阻R5的一端，所述电阻R3的另一端接地，所述电阻R5的另一端连接所述电阻R6的一端和所述单刀双掷开关S5，所述电阻R6的另一端连接基准电压的输出端。5.根据权利要求3所述的电路，其特征在于，所述电流辅助电路包括MOS管Q1，在所述模式控制信号为电流模式时，所述MOS管Q1的栅极通过所述单刀双掷开关S4连接所述运算放大器U1的输出端，所述运算放大器U1的反相输入端通过所述单刀双掷开关S5接地。6.根据权利要求5所述的电路，其特征在于，所述开关电路包括单刀单掷开关S3、S6，所述电流辅助电路包括电阻R1、R2，所述单刀单掷开关S6的一端连接所述MOS管Q1的源极并接地，所述单刀单掷开关S6的另一端连接所述MOS管Q1的栅极，所述MOS管Q1的漏极连接供电电源端；所述单刀单掷开关S3的一端连接所述运算放大器U1的同相输入端，所述单刀单掷开关S3的另一端连接所述电阻R2的一端，所述电阻R2的另一端连接所述模拟电流输出端和所述电阻R1的一端，所述电阻R1的另一端接地；在所述模式控制信号为电流模式时，所述单刀单掷开关S3导通且S6断开，所述MOS管Q1导通，所述电流辅助电路用于将所述直流电流放大为所述模拟电流输出。7.根据权利要求2所述的电路，其特征在于，所述开关电路包括单刀单掷开关S7，所述电压辅助电路包括电阻R8，所述单刀单掷开关S7一端接地，所述单刀单掷开关S7另一端连接所述电阻R8的一端，所述电阻R8的另一端连接所述直流电流的输出端；在所述模式控制信号为电压模式时，所述单刀单掷开关S7导通，所述电压辅助电路用于将所述直流电流转换为对应的直流电压并输入所述运算放大器U1。8.根据权利要求1所述的电路，其特征在于，所述电流调制电路包括开关电流调制器，所述直流电流的大小基于所述基准电流和所述开关电流调制器的调制系数的乘积确定。9.根据权利要求1所述的电路，其特征在于，所述电路还包括与所述电流调制电路连接的电流基准电路，所述电流基准电路包括运算放大器U2、MOS管PM4、电阻Rx、Ry和R7；所述电阻Rx、R7的一端连接基准电压的输出端，所述电阻Rx的另一端连接所述运算放大器U2的反相输入端和所述电阻Ry的一端，所述电阻Ry的另一端接地；所述电阻R7的另一端连接所述运算放大器U2的同相输入端和所述MOS管PM4的源极，所述MOS管PM4的栅极连接所述运算放大器U2的输出端，所述MOS管PM4的漏极连接所述基准电流的输出端；所述基准电流的大小基于所述基准电压以及所述电阻Rx、Ry和R7的阻值确定。10.一种数模转换芯片，其特征在于，所述数模转换芯片包括如权利要求1至权利要求9中任一所述的双模式输出的数模转换电路。
说明书desc
技术领域本申请涉及数模转换技术领域，特别是涉及一种双模式输出的数模转换电路及数模转换芯片。背景技术高性能的电流模式和电压模式输出数字模拟转换器在工业领域中被广泛应用。现有技术采用开关电流调制方式对电流基准进行调制，实现低非线性的调制电流输出，然后通过低通滤波器对调试电流输出进行滤波以获取其中的直流电流分量，之后通过电流放大器放大至相应电流量程的DAC电流模式输出，以实现免非线性校准的电流模式输出DAC。然而，由于工业应用中通常要求DAC电压模式输出从0V开始输出，如果通过普通的电压比例放大器放大输出，必然要求电流基准调制输出电流从0A开始，这样开关电流调制及后续的低通滤波器结构将无法满足此种输出要求，无法实现同时兼容DAC电压模式和电流模式输出的复用设计。发明内容在本实施例中提供了一种双模式输出的数模转换电路及数模转换芯片，以解决相关技术中存在的无法实现同时兼容DAC电压模式和电流模式输出的复用设计的问题。第一个方面，在本实施例中提供了一种双模式输出的数模转换电路，所述电路包括依次连接的电流调制电路、低通滤波电路和复用放大电路，所述电流调制电路基于数字信号对预先生成的基准电流进行调制，输出调制电流；所述低通滤波电路用于对所述调制电流进行滤波，输出对应的直流电流；所述复用放大电路用于基于模式控制信号切换为电流放大电路或电压放大电路，并将所述直流电流放大为对应的模拟电流或模拟电压输出，所述模拟电流的最小输出值大于0A，所述模拟电压的最小输出值为0V。在其中的一些实施例中，所述复用放大电路包括运算放大器U1、开关电路、电流辅助电路和电压辅助电路；所述开关电路用于基于所述模式控制信号，控制所述电流辅助电路、电压辅助电路与所述运算放大器U1之间导通或断开；所述电流辅助电路用于确定所述模拟电流相对于所述直流电流的放大倍数；所述电压辅助电路用于确定所述模拟电压相对于所述直流电流的放大倍数和平移系数，所述平移系数用于在所述直流电流大于0A的情况下将所述模拟电压的最小输出值限定为0V。在其中的一些实施例中，所述开关电路包括单刀双掷开关S4和单刀双掷开关S5；在所述模式控制信号为电压模式时，所述电压辅助电路的一端通过所述单刀双掷开关S5与所述运算放大器U1的反相输入端连接，所述电压辅助电路的另一端通过所述单刀双掷开关S4与所述运算放大器U1的输出端和所述模拟电压的输出端连接。在其中的一些实施例中，所述电压辅助电路包括电阻R3、R4、R5、R6，所述电阻R4的一端连接所述单刀双掷开关S4，所述电阻R4的另一端连接所述电阻R3的一端和所述电阻R5的一端，所述电阻R3的另一端接地，所述电阻R5的另一端连接所述电阻R6的一端和所述单刀双掷开关S5，所述电阻R6的另一端连接基准电压的输出端。在其中的一些实施例中，所述电流辅助电路包括MOS管Q1，在所述模式控制信号为电流模式时，所述MOS管Q1的栅极通过所述单刀双掷开关S4连接所述运算放大器U1的输出端，所述运算放大器U1的反相输入端通过所述单刀双掷开关S5接地。在其中的一些实施例中，所述开关电路包括单刀单掷开关S3、S6，所述电流辅助电路包括电阻R1、R2，所述单刀单掷开关S6的一端连接所述MOS管Q1的源极并接地，所述单刀单掷开关S6的另一端连接所述MOS管Q1的栅极，所述MOS管Q1的漏极连接供电电源端；所述单刀单掷开关S3的一端连接所述运算放大器U1的同相输入端，所述单刀单掷开关S3的另一端连接所述电阻R2的一端，所述电阻R2的另一端连接所述模拟电流输出端和所述电阻R1的一端，所述电阻R1的另一端接地；在所述模式控制信号为电流模式时，所述单刀单掷开关S3导通且S6断开，所述MOS管Q1导通，所述电流辅助电路用于将所述直流电流放大为所述模拟电流输出。在其中的一些实施例中，所述开关电路包括单刀单掷开关S7，所述电压辅助电路包括电阻R8，所述单刀单掷开关S7一端接地，所述单刀单掷开关S7另一端连接所述电阻R8的一端，所述电阻R8的另一端连接所述直流电流的输出端；在所述模式控制信号为电压模式时，所述单刀单掷开关S7导通，所述电压辅助电路用于将所述直流电流转换为对应的直流电压并输入所述运算放大器U1。在其中的一些实施例中，所述电流调制电路包括开关电流调制器，所述直流电流的大小基于所述基准电流和所述开关电流调制器的调制系数的乘积确定。在其中的一些实施例中，所述电路还包括与所述电流调制电路连接的电流基准电路，所述电流基准电路包括运算放大器U2、MOS管PM4、电阻Rx、Ry和R7；所述电阻Rx、R7的一端连接基准电压的输出端，所述电阻Rx的另一端连接所述运算放大器U2的反相输入端和所述电阻Ry的一端，所述电阻Ry的另一端接地；所述电阻R7的另一端连接所述运算放大器U2的同相输入端和所述MOS管PM4的源极，所述MOS管PM4的栅极连接所述运算放大器U2的输出端，所述MOS管PM4的漏极连接所述基准电流的输出端；所述基准电流的大小基于所述基准电压以及所述电阻Rx、Ry和R7的阻值确定。第二个方面，在本实施例中提供了一种数模转换芯片，所述数模转换芯片包括第一个方面所述的双模式输出的数模转换电路。与相关技术相比，在本实施例中提供的双模式输出的数模转换电路，通过电流调制电路基于数字信号对预先生成的基准电流进行调制，输出调制电流，实现低非线性的调制电流输出；通过低通滤波电路对该调制电流进行滤波，输出对应的直流电流，获取调制电流的直流分量；通过复用放大电路基于模式控制信号切换为电流放大电路或电压放大电路，并将直流电流放大为对应的模拟电流或模拟电压输出，实现同时兼容电流模式和电压模式的输出，且该模拟电流的最小输出值大于0A，该模拟电压的最小输出值为0V，解决了在模拟电压最小输出值为0V时要求模拟电流最小输出值为0A导致的电流模式和电压模式无法同时兼容的问题。本申请的一个或多个实施例的细节在以下附图和描述中提出，以使本申请的其他特征、目的和优点更加简明易懂。附图说明此处所说明的附图用来提供对本申请的进一步理解，构成本申请的一部分，本申请的示意性实施例及其说明用于解释本申请，并不构成对本申请的不当限定。在附图中：图1是本申请一些实施例的双模式输出的数模转换电路的结构框图；图2是本申请一些实施例的复用放大电路的结构示意图；图3是本申请一些实施例的开关电路与电压辅助电路的连接示意图；图4是本申请一些实施例的开关电路与电压辅助电路的电路拓扑连接图；图5是本申请另一些实施例的开关电路与电压辅助电路的电路拓扑连接图；图6是本申请一些实施例的电流基准电路的电路拓扑连接图；图7是本申请一些实施例的开关电路与电流调制电路的连接示意图；图8是本申请另一些实施例的开关电路与电流辅助电路的连接示意图；图9是本申请一些优选实施例的双模式输出的数模转换电路的电路拓扑示意图。具体实施方式为更清楚地理解本申请的目的、技术方案和优点，下面结合附图和实施例，对本申请进行了描述和说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。除另作定义外，本申请所涉及的技术术语或者科学术语应具有本申请所属技术领域具备一般技能的人所理解的一般含义。在本申请中的“一”、“一个”、“一种”、“该”、“这些”等类似的词并不表示数量上的限制，它们可以是单数或者复数。在本申请中所涉及的术语“包括”、“包含”、“具有”及其任何变体，其目的是涵盖不排他的包含；例如，包含一系列步骤或模块的过程、方法和系统、产品或设备并未限定于列出的步骤或模块，而可包括未列出的步骤或模块，或者可包括这些过程、方法、产品或设备固有的其他步骤或模块。在本申请中所涉及的“连接”、“相连”、“耦接”等类似的词语并不限定于物理的或机械连接，而可以包括电气连接，无论是直接连接还是间接连接。在本申请中所涉及的“多个”是指两个或两个以上。“和/或”描述关联对象的关联关系，表示可以存在三种关系，例如，“A和/或B”可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。通常情况下，字符“/”表示前后关联的对象是一种“或”的关系。在本申请中所涉及的术语“第一”、“第二”、“第三”等，只是对相似对象进行区分，并不代表针对对象的特定排序。请参阅图1所示，为本申请一些实施例的双模式输出的数模转换电路的结构框图。该双模式输出的数模转换电路包括依次连接的电流调制电路102、低通滤波电路103和复用放大电路104。电流调制电路102基于数字信号DS对预先生成的基准电流Ir进行调制，输出调制电流IMOD；低通滤波电路103用于对调制电流IMOD进行滤波，输出对应的直流电流IDAC；复用放大电路104用于基于模式控制信号Mctr切换为电流放大电路或电压放大电路，并将直流电流IDAC放大为对应的模拟电流ILOOP或模拟电压VOUT输出，其中模拟电流ILOOP的最小输出值大于0A，模拟电压VOUT的最小输出值为0V。本领域普通技术人员可以理解，图1所示的结构仅为示意，其并不对上述双模式输出的数模转换电路的结构造成限制。例如，双模式输出的数模转换电路还可包括比图1中所示更多或者更少的组件，或者具有与图1所示出的不同配置。例如，双模式输出的数模转换电路还可以包括用于生成基准电流Ir的电流基准电路。本实施例中，基准电流Ir可以由图1中未示出的电流基准电路生成，并输入电流调制电路102。基准电流Ir的大小可预先确定，并基于基准电流Ir的值确定电流基准电路的器件参数。电流调制电路102可以采用开关电流调制的方式，基于数字信号DS对基准电流Ir进行调制，输出调制电流IMOD。其中数字信号DS是指DAC码值信息。在一些实施例中，电流调制电路包括开关电流调制器，开关电流调制器可以包括Sigma-Delta调制器，得到包含DAC码值信息的高线性度开关电流IMOD。其中高线性度是指调制电流IMOD与基准电流Ir存在线性关系。低通滤波电路103可以包括RC滤波电路，对调制电流IMOD进行滤波后得到开关电流的直流分量直流电流IDAC，其中直流电流IDAC与基准电流Ir也存在线性关系。直流电流IDAC的大小基于基准电流IDAC和开关电流调制器的调制系数k的乘积确定，可用下式表示：IDAC= k × Ir，0＜k＜1其中，k表示Sigma-Delta调制系数。复用放大电路104可以包括可控开关器件，基于模式控制信号Mctr控制可控开关器件导通或关断，以使复用放大电路104在电流放大电路和电压放大电路之间进行切换。当模式控制信号Mctr为电流模式DAI时，复用放大电路104切换为电流放大电路，将直流电流IDAC放大为模拟电流ILOOP；当模式控制信号Mctr为电压模式DAV时，复用放大电路104切换为电压放大电路，将直流电流IDAC放大为模拟电压VOUT。其中模拟电流ILOOP和模拟电压VOUT均保持了Sigma-Delta调制系数k的高线性度。其中，模拟电流的最小输出值大于0A，模拟电压的最小输出值可以为0V。现有技术的兼容电流模式和电压模式输出的数模转换电路，在将直流电流放大为模拟电流或模拟电压的过程中，由于模拟电压与模拟电流之间存在线性对应关系，当模拟电流的最小输出值大于0A时，其模拟电压的最小输出值通常大于0V，无法满足模拟电压最小值为0V的应用需求。而本实施例中，在复用放大电路104切换为电压放大电路后，通过电压放大电路中的电路拓扑结构，对直流电流IDAC放大并进行处理，将模拟电压VOUT的最小输出值限定在0V，实现兼容电流模式和电压模式的双模式输出。本实施例中的双模式输出的数模转换电路，通过电流调制电路基于数字信号对预先生成的基准电流进行调制，输出调制电流，实现低非线性的调制电流输出；通过低通滤波电路对该调制电流进行滤波，输出对应的直流电流，获取调制电流的直流分量；通过复用放大电路基于模式控制信号切换为电流放大电路或电压放大电路，并将直流电流放大为对应的模拟电流或模拟电压输出，实现同时兼容电流模式和电压模式的输出，且该模拟电流的最小输出值大于0A，该模拟电压的最小输出值为0V，解决了在模拟电压最小输出值为0V时要求模拟电流最小输出值为0A导致的电流模式和电压模式无法同时兼容的问题。在一些实施例中，图2是本申请一些实施例的复用放大电路的结构示意图，如图2所示，复用放大电路104包括运算放大器U1、开关电路104a、电流辅助电路104c和电压辅助电路104b。其中，开关电路104a用于基于模式控制信号Mctr，控制电流辅助电路104c、电压辅助电路104b与运算放大器U1之间导通或断开；电流辅助电路104c用于确定模拟电流ILOOP相对于直流电流IDAC的放大倍数；电压辅助电路104b用于确定模拟电压VOUT相对于直流电流IDAC的放大倍数和平移系数，该平移系数用于将模拟电压的输出值范围整体向下平移，在直流电流大于0A的情况下将模拟电压的最小输出值限定为0V。开关电路104a中包括可控开关器件，当接收到的模式控制信号Mctr为电流模式DAI时，控制电流辅助电路104c与运算放大器U1导通，并控制电压辅助电路104b与运算放大器U1断开；当接收到的模式控制信号Mctr为电压模式DAV时则进行相反的控制。电流辅助电路104c可以包括反馈电阻等器件，当电流辅助电路104c与运算放大器U1导通时，运算放大器U1根据电流辅助电路104c中的器件参数例如电阻的阻值，获取模拟电流ILOOP相对于直流电流IDAC的放大倍数。类似地，当电压辅助电路104b与运算放大器U1导通时，运算放大器U1根据电流电压辅助电路104b中的器件参数例如电阻的阻值，获取模拟电压VOUT相对于直流电流IDAC的放大倍数和平移系数。本实施例中的双模式输出的数模转换电路，通过开关电路控制电流辅助电路、电压辅助电路与运算放大器的导通和断开，通过运算放大器实现对直流电流的放大，通过电流辅助电路确定模拟电流的放大倍数，以及通过电压辅助电路确定模拟电压的放大倍数和平移系数，实现了同时兼容电流模式和电压模式的输出并将模拟电压的输出值范围整体向下平移，以将模拟电压的最小输出值限定为0V，满足实际应用需求。在一些实施例中，图3是本申请一些实施例的开关电路与电压辅助电路的连接示意图，如图3所示，开关电路104a包括单刀双掷开关S4和单刀双掷开关S5；在模式控制信号Mctr为电压模式DAV时，电压辅助电路104b的一端通过单刀双掷开关S5与运算放大器U1的反相输入端连接，电压辅助电路104b的另一端通过单刀双掷开关S4与运算放大器U1的输出端和模拟电压的输出端VOUT连接。本实施例中，电压辅助电路104b包括电阻网络。该电阻网络可包括多个电阻以及参考电源端和接地端，其中参考电源端的电压根据需求设定。当模式控制信号Mctr为电压模式DAV时，电压辅助电路104b作为反馈电阻网络连接在运算放大器U1的反相输入端与输出端之间，运算放大器U1的同相输入端为由直流电流IDAC获取的目标电压VINP的输入端。此时，模拟电压VOUT相对于直流电流的放大倍数和平移系数基于电压辅助电路104b中各电阻的阻值和电阻网络的拓扑关系确定。在一些具体的实施例中，图4是本申请一些实施例的开关电路与电压辅助电路的电路拓扑连接图，如图4所示，电压辅助电路104b包括电阻R3、R4、R5、R6，电阻R4的一端连接单刀双掷开关S4，电阻R4的另一端连接电阻R3的一端和电阻R5的一端，电阻R3的另一端接地，电阻R5的另一端连接电阻R6的一端和单刀双掷开关S5，电阻R6的另一端连接基准电压VREF的输出端。运算放大器U1的同相输入端连接电阻R11的一端，电阻R11的另一端连接由直流电流IDAC获取的直流电压VDAC的输出端。直流电压VDAC通过放大器U1、基准电压VREF和由电阻R3、R4、R5、R6构成的电阻网络实现直流电压的放大输出，得到模拟电压VOUT，VOUT的值可用下述公式计算：式1或式2其中，,。根据式2可知，由于-VREF×β2项的存在，当直流电压VDAC的最小值大于0时，可以实现模拟电压VOUT等于0的电压输出，避免了直流电压VDAC的最小值等于0的要求，进而避免了Sigma-Delta调制器调制输出的直流电流IDAC最小值为0A的要求，使得Sigma-Delta调制器也适合DAC电压模式输出。进一步地，在一些实施例中，图5是本申请另一些实施例的开关电路与电压辅助电路的电路拓扑连接图，如图5所示，开关电路104a还包括单刀单掷开关S7，电压辅助电路104b包括电阻R8，单刀单掷开关S7一端接地，单刀单掷开关S7另一端连接电阻R8的一端，电阻R8的另一端连接直流电流IDAC的输出端。在模式控制信号Mctr为电压模式DAV时，单刀单掷开关S7导通，电压辅助电路104b用于将直流电流IDAC转换为对应的直流电压VDAC并输入运算放大器U1。此时直流电流IDAC流经电阻R8产生对应的直流电压VDAC，直流电压VDAC可用下式计算：VDAC= IDAC×R8 = k×Ir×R8式3可以看出，直流电压VDAC与调制系数k、基准电流Ir之间存在线性对应关系，保持了Sigma-Delta调制系数的高线性度。在模式控制信号Mctr为电流模式DAI时，单刀单掷开关S7断开，电压辅助电路104b断开，无法生成直流电压VDAC。进一步地，可通过电流基准电路生成基准电流Ir。图6是本申请一些实施例的电流基准电路的电路拓扑连接图，如图6所示，电流基准电路101包括运算放大器U2、MOS管PM4、电阻Rx、Ry和R7。其中，电阻Rx、R7的一端连接基准电压VREF的输出端，电阻Rx的另一端连接运算放大器U2的反相输入端和电阻Ry的一端，电阻Ry的另一端接地；电阻R7的另一端连接运算放大器U2的同相输入端和MOS管PM4的源极，MOS管PM4的栅极连接运算放大器U2的输出端，MOS管PM4的漏极连接基准电流Ir的输出端。基准电流Ir的大小基于基准电压VREF以及电阻Rx、Ry和R7的阻值确定。具体地，基准电流Ir可通过下式计算：Ir = m×VREF/R7，其中m=Rx/将上式代入式3可得：VDAC= IDAC×R8 = k×Ir×R8= k×m×VREF×R8/R7令n= R8/R7，则VDAC= k×m×n×VREF将上式代入式2，可得可以看出，模拟电压VOUT保持了Sigma-Delta调制系数的高线性度。在一些实施例中，图7是本申请一些实施例的开关电路与电流辅助电路的连接示意图，如图7所示，电流辅助电路104c包括MOS管Q1，在模式控制信号为电流模式DAI时，MOS管Q1的栅极通过单刀双掷开关S4连接运算放大器U1的输出端，运算放大器U1的反相输入端通过单刀双掷开关S5接地。电流辅助电路104c还包括电阻R1、R2，电阻R2的一端连接直流电流IDAC的输入端，电阻R2的另一端连接模拟电流ILOOP输出端和电阻R1的一端，电阻R1的另一端连接MOS管Q1的源极并接地，MOS管Q1的漏极连接供电电源端VDD。当模式控制信号为电流模式DAI时，直流电流IDAC流经电阻R2并通过运算放大器U1和电阻R1放大，从模拟电流ILOOP输出端输出，模拟电流ILOOP的大小可通过下式计算：ILOOP= α×IDAC= α×k×Ir其中，α=/R1。可以看出，模拟电流ILOOP保持了Sigma-Delta调制系数的高线性度。在进一步的实施例中，图8是本申请另一些实施例的开关电路与电流辅助电路的连接示意图，如图8所示，开关电路104a还包括单刀单掷开关S3、S6，单刀单掷开关S6的一端连接MOS管Q1的源极并接地，单刀单掷开关S6的另一端连接MOS管Q1的栅极，单刀单掷开关S3的一端连接运算放大器U1的同相输入端，单刀单掷开关S3的另一端连接电阻R2的一端。在模式控制信号为电流模式DAI时，单刀单掷开关S3导通且S6断开，MOS管Q1导通，电流辅助电路104c将直流电流IDAC放大为模拟电流ILOOP输出。在模式控制信号为电压模式DAV时，单刀单掷开关S3断开且S6导通，MOS管Q1断开，电流辅助电路104c断开，无法对直流电流IDAC进行放大。下面通过优选实施例对本实施例进行描述和说明。图9是本申请一些优选实施例的双模式输出的数模转换电路的电路拓扑示意图，如图9所示，电流调制电路102包括Sigma-Delta调制器，以及MOS管S1、S2，实现基于基准电流Ir对数字信号的调制，并输出调制电流IMOD。低通滤波电路103包括电阻R9、R10，电容C1、C2、C3，构成RC滤波电路，输出调制电流IMOD的直流分量，直流电流IDAC。其余电流基准电路101和复用放大电路104的作用已在前述实施例中描述，在此不再赘述。此外，在本实施例中还可以提供一种数模转换芯片。该数模转换芯片包括上述实施例中所述的双模式输出的数模转换电路，以实现同时兼容电流模式和电压模式的输出，且该模拟电流的最小输出值大于0A，该模拟电压的最小输出值为0V，解决了在模拟电压最小输出值为0V时要求模拟电流最小输出值为0A导致的电流模式和电压模式无法同时兼容的问题。需要说明的是，在本实施例中的具体示例可以参考上述实施例及可选实施方式中所描述的示例，在本实施例中不再赘述。应该明白的是，这里描述的具体实施例只是用来解释这个应用，而不是用来对它进行限定。根据本申请提供的实施例，本领域普通技术人员在不进行创造性劳动的情况下得到的所有其它实施例，均属本申请保护范围。显然，附图只是本申请的一些例子或实施例，对本领域的普通技术人员来说，也可以根据这些附图将本申请适用于其他类似情况，但无需付出创造性劳动。另外，可以理解的是，尽管在此开发过程中所做的工作可能是复杂和漫长的，但是，对于本领域的普通技术人员来说，根据本申请披露的技术内容进行的某些设计、制造或生产等更改仅是常规的技术手段，不应被视为本申请公开的内容不足。“实施例”一词在本申请中指的是结合实施例描述的具体特征、结构或特性可以包括在本申请的至少一个实施例中。该短语出现在说明书中的各个位置并不一定意味着相同的实施例，也不意味着与其它实施例相互排斥而具有独立性或可供选择。本领域的普通技术人员能够清楚或隐含地理解的是，本申请中描述的实施例在没有冲突的情况下，可以与其它实施例结合。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对专利保护范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请的保护范围应以所附权利要求为准。
