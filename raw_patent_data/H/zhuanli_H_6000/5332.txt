标题title
云存储资源访问方法、装置、设备及存储介质
摘要abst
本申请提供一种云存储资源访问方法、装置、设备及存储介质，该方法终端设备获取访问虚拟机的报文负载；对报文负载进行加密处理，得到加密报文负载；根据加密报文负载，生成访问报文；将访问报文发送至目的物理机，以使目的物理机对加密报文负载进行解密处理，得到报文负载，根据访问报文和报文负载生成转发报文，将转发报文通过目的虚拟机对应的虚拟机网卡发送至目的虚拟机；接收目的物理机发送的响应报文，其中，响应报文为目的物理机在接收到目的虚拟机通过虚拟机网卡返回的加密返回报文后，对加密返回报文进行封装处理得到的；对响应报文进行解密处理，得到返回报文。
权利要求书clms
1.一种云存储资源访问方法，其特征在于，应用于终端设备，所述方法包括：获取访问虚拟机的报文负载；对所述报文负载进行加密处理，得到加密报文负载；根据所述加密报文负载，生成访问报文；将所述访问报文发送至目的物理机，以使所述目的物理机对所述加密报文负载进行解密处理，得到所述报文负载，根据所述访问报文和所述报文负载生成转发报文，将所述转发报文通过目的虚拟机对应的虚拟机网卡发送至所述目的虚拟机；接收所述目的物理机发送的响应报文，其中，所述响应报文为所述目的物理机在接收到所述目的虚拟机通过所述虚拟机网卡返回的加密返回报文后，对所述加密返回报文进行封装处理得到的，所述加密返回报文为所述目的虚拟机根据所述转发报文生成返回报文后，采用所述终端设备的设备密钥对所述返回报文加密得到的；对所述响应报文进行解密处理，得到所述返回报文。2.根据权利要求1所述的方法，其特征在于，所述报文负载中包括访问目的地址和内容负载，所述访问目的地址包括目的物理机的网卡地址和目的虚拟机在所述目的物理机的私网地址；相应的，所述对所述报文负载进行加密处理，得到加密报文负载，包括：对所述内容负载进行加密处理，得到内容加密负载；将所述访问目的地址和所述内容加密负载进行合并处理，得到加密报文负载。3.根据权利要求1或2所述的方法，其特征在于，所述根据所述加密报文负载，生成访问报文，包括：将所述终端设备的地址确定为访问报文的源地址，将所述目的物理机的网卡地址确定为所述访问报文的目的地址；将所述访问报文的源地址和所述访问报文的目的地址确定为访问报文的报文头，将所述加密报文负载确定为访问报文的负载，根据所述访问报文的报文头和所述访问报文的负载生成访问报文。4.根据权利要求1或2所述的方法，其特征在于，所述对所述响应报文进行解密处理，得到所述返回报文，包括：根据所述终端设备中存储的设备密钥，对所述响应报文进行解密处理，得到所述返回报文。5.一种云存储资源访问方法，其特征在于，应用于目的物理机，所述方法包括：接收终端设备发送的访问报文，其中，所述访问报文为所述终端设备获取访问虚拟机的报文负载，对所述报文负载进行加密处理，得到加密报文负载后，根据所述加密报文负载生成的；对所述加密报文负载进行解密处理，得到所述报文负载；根据所述访问报文和所述报文负载生成转发报文；将所述转发报文通过目的虚拟机对应的虚拟机网卡发送至所述目的虚拟机，以使所述目的虚拟机根据所述转发报文生成返回报文，采用所述终端设备的设备密钥对所述返回报文加密，得到加密返回报文；接收所述目的虚拟机通过所述虚拟机网卡返回的加密返回报文；对所述加密返回报文进行封装处理，得到响应报文；将所述响应报文发送至所述终端设备，以使所述终端设备对所述响应报文进行解密处理，得到所述返回报文。6.根据权利要求5所述的方法，其特征在于，所述对所述加密报文负载进行解密处理，得到所述报文负载，包括：根据所述终端设备的设备标识，在密钥数据库中进行查询，确定所述终端设备的设备密钥；根据所述设备密钥，对所述加密报文负载进行解密处理，得到所述报文负载。7.根据权利要求5或6所述的方法，其特征在于，所述报文负载中包括访问目的地址和内容负载，所述访问目的地址包括目的物理机的网卡地址和目的虚拟机在所述目的物理机的私网地址，所述访问报文中包括所述终端设备的地址；相应地，所述根据所述访问报文和所述报文负载生成转发报文，包括：将所述终端设备的地址确定为转发报文的源地址，将所述目的虚拟机在所述目的物理机的私网地址确定为所述转发报文的目的地址；将所述转发报文的源地址和所述转发报文的目的地址确定为转发报文的报文头，将所述报文负载确定为转发报文的报文负载，根据所述转发报文的报文头和所述访问报文的报文负载生成转发报文。8.根据权利要求7所述的方法，其特征在于，所述对所述加密返回报文进行封装处理，得到响应报文，包括：根据所述终端设备的地址、所述目的物理机的网卡地址和目的虚拟机在所述目的物理机的私网地址，对所述加密返回报文进行封装处理，得到响应报文。9.一种云存储资源访问设备，其特征在于，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行如权利要求1至4中任一项所述的云存储资源访问方法，或权利要求5至8中任一项所述的云存储资源访问方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质中存储有计算机执行指令，所述计算机执行指令被处理器执行时用于实现如权利要求1至4中任一项所述的云存储资源访问方法，或权利要求5至8中任一项所述的云存储资源访问方法。
说明书desc
技术领域本申请涉及云服务器技术领域，尤其涉及一种云存储资源访问方法、装置、设备及存储介质。背景技术云存储是一种网上在线存储的模式，即把数据存放在通常由第三方托管的多台虚拟服务器，而非专属的服务器上。托管公司运营大型的数据中心，需要数据存储托管的人，则通过向其购买或租赁存储空间的方式，来满足数据存储的需求。数据中心运营商根据客户的需求，在后端准备存储虚拟化的资源，为用户提供虚拟机资源，并将其以存储资源池的方式提供，用户便可自行使用此存储资源池来存放文件或对象。相关技术中，用户访问虚拟机的资源时，需要通过虚拟机所在的物理机发起访问，通过虚拟机所在物理机的网关，访问租用的虚拟机。然而，现有技术用户无法通过自己的终端设备访问虚拟机资源，云存储资源访问方式的灵活性差、安全性差。发明内容本申请提供一种云存储资源访问方法、装置、设备及存储介质，以解决现有技术用户无法通过自己的终端设备访问虚拟机资源，云存储资源访问方式的灵活性差、安全性差的技术问题。第一方面，本申请提供云存储资源访问方法，应用于终端设备，所述方法包括：获取访问虚拟机的报文负载；对所述报文负载进行加密处理，得到加密报文负载；根据所述加密报文负载，生成访问报文；将所述访问报文发送至所述目的物理机，以使所述目的物理机对所述加密报文负载进行解密处理，得到所述报文负载，根据所述访问报文和所述报文负载生成转发报文，将所述转发报文通过目的虚拟机对应的虚拟机网卡发送至所述目的虚拟机；接收所述目的物理机发送的响应报文，其中，所述响应报文为所述目的物理机在接收到所述目的虚拟机通过所述虚拟机网卡返回的加密返回报文后，对所述加密返回报文进行封装处理得到的，所述加密返回报文为所述目的虚拟机根据所述转发报文生成返回报文后，采用所述终端设备的设备密钥对所述返回报文加密得到的；对所述响应报文进行解密处理，得到所述返回报文。本申请提供了一种安全可靠的云存储资源访问方法，用户可通过自己的终端设备访问云存储资源，分别在终端设备端和终端设备对应的虚拟机所在物理机端增加加密功能，终端设备在发起访问时，首先对报文负载进行加密处理，得到加密报文负载，根据加密报文负载、访问的目的虚拟机的地址以及目的虚拟机所在目的物理机的地址，能够通过目的物理机向目的虚拟机发起访问，目的物理机执行加密及转发操作，并将目的虚拟机返回的报文进行封装处理后返回至终端设备，进而了实现终端设备向目的虚拟机的访问，用户无需登录物理机，通过自己的终端设备即可访问云存储资源，提高了云存储资源访问方式的灵活性，且加密传输提高了云资源访问的安全性。可选地，所述报文负载中包括访问目的地址和内容负载，所述访问目的地址包括目的物理机的网卡地址和目的虚拟机在所述目的物理机的私网地址；相应的，所述对所述报文负载进行加密处理，得到加密报文负载，包括：对所述内容负载进行加密处理，得到内容加密负载；将所述访问目的地址和所述内容加密负载进行合并处理，得到加密报文负载。这里，本申请中终端设备发起访问的报文负载中包括访问目的地址和内容负载，访问目的地址用于指示虚拟机的地址，以实现对目的虚拟机的访问，内容负载用于指示访问的具体内容，终端设备针对内容负载进行加密处理，能够有效提高云存储资源访问的安全性，提高了用户体验。可选地，所述根据所述加密报文负载，生成访问报文，包括：将所述终端设备的地址确定为访问报文的源地址，将所述目的物理机的网卡地址确定为所述访问报文的目的地址；将所述访问报文的源地址和所述访问报文的目的地址确定为访问报文的报文头，将所述加密报文负载确定为访问报文的负载，根据所述访问报文的报文头和所述访问报文的负载生成访问报文。其中，本申请中的终端设备根据终端设备的地址、目的物理机的网卡地址以及加密报文负载生成访问报文，能够准确指示访问的目的物理机及目的虚拟机，准确向提供云存储资源的目的虚拟机发起了访问，实现了在用户的终端设备对云存储资源的访问。可选地，所述对所述响应报文进行解密处理，得到所述返回报文，包括：根据所述终端设备中存储的设备密钥，对所述响应报文进行解密处理，得到所述返回报文。这里，本申请在加密时，可采用终端设备中存储的设备密钥，终端设备可通过自己的设备密钥对响应报文进行解密处理，得到返回报文，针对每个终端设备均采用自己的密钥进行加密和解密，密钥不易泄露，进一步地提高了云存储资源访问的安全性。第二方面，本申请提供了一种云存储资源访问方法，应用于目的物理机，所述方法包括：接收终端设备发送的访问报文，其中，所述访问报文为所述终端设备获取访问虚拟机的报文负载，对所述报文负载进行加密处理，得到加密报文负载后，根据所述加密报文负载生成的；对所述加密报文负载进行解密处理，得到所述报文负载；根据所述访问报文和所述报文负载生成转发报文；将所述转发报文通过目的虚拟机对应的虚拟机网卡发送至所述目的虚拟机，以使所述目的虚拟机根据所述转发报文生成返回报文，采用所述终端设备的设备密钥对所述返回报文加密，得到加密返回报文；接收所述目的虚拟机通过所述虚拟机网卡返回的加密返回报文；对所述加密返回报文进行封装处理，得到响应报文；将所述响应报文发送至所述终端设备，以使所述终端设备对所述响应报文进行解密处理，得到所述返回报文。其中，本申请中的目的物理机用于运行虚拟机的功能，且为用户的终端设备提供访问报文的转发以及返回报文的转发等，并执行报文的加密解密功能，通过物理机的转发及加密解密，实现了用户通过终端设备对云存储资源的安全访问。可选地，所述对所述加密报文负载进行解密处理，得到所述报文负载，包括：根据所述终端设备的设备标识，在密钥数据库中进行查询，确定所述终端设备的设备密钥；根据所述设备密钥，对所述加密报文负载进行解密处理，得到所述报文负载。这里，物理机中存储有终端设备的设备密钥，能够针对每个终端设备，通过存储的与终端设备对应的设备密钥，对报文实现解密及加密处理，进一步地提高了云存储资源访问的安全性。可选地，所述报文负载中包括访问目的地址和内容负载，所述访问目的地址包括目的物理机的网卡地址和目的虚拟机在所述目的物理机的私网地址，所述访问报文中包括所述终端设备的地址；相应地，所述根据所述访问报文和所述报文负载生成转发报文，包括：将所述终端设备的地址确定为转发报文的源地址，将所述目的虚拟机在所述目的物理机的私网地址确定为所述转发报文的目的地址；将所述转发报文的源地址和所述转发报文的目的地址确定为转发报文的报文头，将所述报文负载确定为转发报文的报文负载，根据所述转发报文的报文头和所述访问报文的报文负载生成转发报文。其中，本申请的物理机通过目的虚拟机在所述目的物理机的私网地址及报文负载，生成转发报文，实现了对用户访问报文的精准转发，进一步地提高了云存储资源访问的可靠性。可选地，所述对所述加密返回报文进行封装处理，得到响应报文，包括：根据所述终端设备的地址、所述目的物理机的网卡地址和目的虚拟机在所述目的物理机的私网地址，对所述加密返回报文进行封装处理，得到响应报文。第三方面，本申请提供了一种云存储资源访问装置，应用于终端设备，所述装置包括：获取模块，用于获取访问虚拟机的报文负载；第一加密模块，用于对所述报文负载进行加密处理，得到加密报文负载；第一生成模块，用于根据所述加密报文负载，生成访问报文；第一处理模块，用于将所述访问报文发送至所述目的物理机，以使所述目的物理机对所述加密报文负载进行解密处理，得到所述报文负载，根据所述访问报文和所述报文负载生成转发报文，将所述转发报文通过目的虚拟机对应的虚拟机网卡发送至所述目的虚拟机；第一接收模块，用于接收所述目的物理机发送的响应报文，其中，所述响应报文为所述目的物理机在接收到所述目的虚拟机通过所述虚拟机网卡返回的加密返回报文后，对所述加密返回报文进行封装处理得到的，所述加密返回报文为所述目的虚拟机根据所述转发报文生成返回报文后，采用所述终端设备的设备密钥对所述返回报文加密得到的；第一解密模块，用于对所述响应报文进行解密处理，得到所述返回报文。可选地，所述报文负载中包括访问目的地址和内容负载，所述访问目的地址包括目的物理机的网卡地址和目的虚拟机在所述目的物理机的私网地址；相应的，所述第一加密模块具体用于：对所述内容负载进行加密处理，得到内容加密负载；将所述访问目的地址和所述内容加密负载进行合并处理，得到加密报文负载。可选地，所述第一生成模块具体用于：将所述终端设备的地址确定为访问报文的源地址，将所述目的物理机的网卡地址确定为所述访问报文的目的地址；将所述访问报文的源地址和所述访问报文的目的地址确定为访问报文的报文头，将所述加密报文负载确定为访问报文的负载，根据所述访问报文的报文头和所述访问报文的负载生成访问报文。可选地，所述第一解密模块具体用于：根据所述终端设备中存储的设备密钥，对所述响应报文进行解密处理，得到所述返回报文。第四方面，本申请提供了一种云存储资源访问装置，应用于目的物理机，所述装置包括：第二接收模块，用于接收终端设备发送的访问报文，其中，所述访问报文为所述终端设备获取访问虚拟机的报文负载，对所述报文负载进行加密处理，得到加密报文负载后，根据所述加密报文负载生成的；第二解密模块，用于对所述加密报文负载进行解密处理，得到所述报文负载；第二生成模块，用于根据所述访问报文和所述报文负载生成转发报文；第二处理模块，用于将所述转发报文通过目的虚拟机对应的虚拟机网卡发送至所述目的虚拟机，以使所述目的虚拟机根据所述转发报文生成返回报文，采用所述终端设备的设备密钥对所述返回报文加密，得到加密返回报文；第三接收模块，用于接收所述目的虚拟机通过所述虚拟机网卡返回的加密返回报文；第三处理模块，用于对所述加密返回报文进行封装处理，得到响应报文；第四处理模块，用于将所述响应报文发送至所述终端设备，以使所述终端设备对所述响应报文进行解密处理，得到所述返回报文。可选地，所述第二解密模块具体用于：根据所述终端设备的设备标识，在密钥数据库中进行查询，确定所述终端设备的设备密钥；根据所述设备密钥，对所述加密报文负载进行解密处理，得到所述报文负载。可选地，所述报文负载中包括访问目的地址和内容负载，所述访问目的地址包括目的物理机的网卡地址和目的虚拟机在所述目的物理机的私网地址，所述访问报文中包括所述终端设备的地址；相应地，所述第二生成模块具体用于：将所述终端设备的地址确定为转发报文的源地址，将所述目的虚拟机在所述目的物理机的私网地址确定为所述转发报文的目的地址；将所述转发报文的源地址和所述转发报文的目的地址确定为转发报文的报文头，将所述报文负载确定为转发报文的报文负载，根据所述转发报文的报文头和所述访问报文的报文负载生成转发报文。可选地，所述第三处理模块具体用于：根据所述终端设备的地址、所述目的物理机的网卡地址和目的虚拟机在所述目的物理机的私网地址，对所述加密返回报文进行封装处理，得到响应报文。第五方面，本申请提供一种云存储资源访问设备，包括：至少一个处理器和存储器；所述存储器存储计算机执行指令；所述至少一个处理器执行所述存储器存储的计算机执行指令，使得所述至少一个处理器执行如上第一方面以及第一方面各种可能的设计所述的云存储资源访问方法。第六方面，本申请提供一种计算机可读存储介质，所述计算机可读存储介质中存储有计算机执行指令，当处理器执行所述计算机执行指令时，实现如上第一方面以及第一方面各种可能的设计所述的云存储资源访问方法。第七方面，本申请提供一种计算机程序产品，包括计算机程序，所述计算机程序被处理器执行时，实现如上第一方面以及第一方面各种可能的设计所述的云存储资源访问方法。第八方面，本申请提供一种云存储资源访问设备，包括：至少一个处理器和存储器；所述存储器存储计算机执行指令；所述至少一个处理器执行所述存储器存储的计算机执行指令，使得所述至少一个处理器执行如上第二方面以及第二方面各种可能的设计所述的云存储资源访问方法。第九方面，本申请提供一种计算机可读存储介质，所述计算机可读存储介质中存储有计算机执行指令，当处理器执行所述计算机执行指令时，实现如上第二方面以及第二方面各种可能的设计所述的云存储资源访问方法。第十方面，本申请提供一种计算机程序产品，包括计算机程序，所述计算机程序被处理器执行时，实现如上第二方面以及第二方面各种可能的设计所述的云存储资源访问方法。本申请提供的云存储资源访问方法、装置、设备及存储介质，其中该方法用户可通过自己的终端设备访问云存储资源，分别在终端设备端和终端设备对应的虚拟机所在物理机端增加加密功能，终端设备在发起访问时，首先对报文负载进行加密处理，得到加密报文负载，根据加密报文负载、访问的目的虚拟机的地址以及目的虚拟机所在目的物理机的地址，能够通过目的物理机向目的虚拟机发起访问，目的物理机执行加密及转发操作，并将目的虚拟机返回的报文进行封装处理后返回至终端设备，进而了实现终端设备向目的虚拟机的访问，用户无需登录物理机，通过自己的终端设备即可访问云存储资源，提高了云存储资源访问方式的灵活性，且加密传输提高了云资源访问的安全性。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例提供的一种云存储资源访问方法系统架构示意图；图2为本申请实施例提供的一种云存储资源访问方法的流程示意图；图3为本申请实施例提供的另一种云存储资源访问方法的流程示意图；图4为本申请实施例提供的一种访问报文的结构示意图；图5为本申请实施例提供的一种转发报文的结构示意图；图6为本申请实施例提供的一种加密返回报文的结构示意图；图7为本申请实施例提供的一种响应报文的结构示意图；图8为本申请实施例提供的一种云存储资源访问装置的结构示意图；图9为本申请实施例提供的一种云存储资源访问设备的结构示意图。通过上述附图，已示出本公开明确的实施例，后文中将有更详细的描述。这些附图和文字描述并不是为了通过任何方式限制本公开构思的范围，而是通过参考特定实施例为本领域技术人员说明本公开的概念。具体实施方式这里将详细地对示例性实施例进行说明，其示例表示在附图中。下面的描述涉及附图时，除非另有表示，不同附图中的相同数字表示相同或相似的要素。以下示例性实施例中所描述的实施方式并不代表与本公开相一致的所有实施方式。相反，它们仅是与如所附权利要求书中所详述的、本公开的一些方面相一致的装置和方法的例子。本申请的说明书和权利要求书及上述附图中的术语“第一”、“第二”、“第三”及“第四”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本申请的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。需要说明的是，本申请所涉及的用户信息和数据，均为经用户授权或者经过各方充分授权的信息和数据，并且相关数据的收集、使用和处理需要遵守相关法律法规和标准，并提供有相应的操作入口，供用户选择授权或者拒绝。云存储是在云计算概念上延伸和衍生发展出来的一个新的概念。云计算是分布式处理、并行处理和网格计算的发展，是通过网络将庞大的计算处理程序自动分拆成无数个较小的子程序，再交由多部服务器所组成的庞大系统经计算分析之后将处理结果回传给用户。通过云计算技术，网络服务提供者可以在数秒之内，处理数以千万计甚至亿计的信息，达到和”超级计算机”同样强大的网络服务。云存储的概念与云计算类似，它是指通过集群应用、网格技术或分布式文件系统等功能，网络中大量各种不同类型的存储设备通过应用软件集合起来协同工作，共同对外提供数据存储和业务访问功能的一个系统，保证数据的安全性，并节约存储空间。简单来说，云存储就是将储存资源放到云上供人存取的一种新兴方案。使用者可以在任何时间、任何地方，通过任何可连网的装置连接到云上方便地存取数据。托管公司运营大型的数据中心，需要数据存储托管的人，则通过向其购买或租赁存储空间的方式，来满足数据存储的需求。数据中心运营商根据客户的需求，在后端准备存储虚拟化的资源，为用户提供虚拟机资源，并将其以存储资源池的方式提供，用户便可自行使用此存储资源池来存放文件或对象。相关技术中，用户访问虚拟机的资源时，需要通过虚拟机所在的物理机发起访问，通过虚拟机所在物理机的网关，访问租用的虚拟机。现有技术中，为了实现云存储访问的安全性，在虚拟机中针对不同租户的虚拟机增加vNICa和加密模块，其中，vNICa指针对不同虚拟机的网卡。上述方案在虚拟机中针对不同租户的虚拟机增加vNICa和加密模块主要是为了解决同一租户的虚拟机间进行通信时候的安全保证。但是当该租户在公网利用自己的机器例如用户的终端设备，想访问物理机上的自己虚拟机上资源时，还没有解决方案。综上，现有技术用户无法通过自己的终端设备访问虚拟机资源，云存储资源访问方式的灵活性差、安全性差。为了解决上述技术问题，本申请实施例提供一种云存储资源访问方法、装置、设备及存储介质，该方法用户可通过自己的终端设备访问云存储资源，分别在终端设备端和终端设备对应的虚拟机所在物理机端增加加密功能，终端设备在发起访问时，首先对报文负载进行加密处理，得到加密报文负载，根据加密报文负载、访问的目的虚拟机的地址以及目的虚拟机所在目的物理机的地址，能够通过目的物理机向目的虚拟机发起访问，目的物理机执行加密及转发操作，并将目的虚拟机返回的报文进行封装处理后返回至终端设备。可选的，图1为本申请实施例提供的一种云存储资源访问系统架构示意图。其中，本申请实施例的云存储资源访问系统架构包括物理机101和终端设备102。物理机101和终端设备102可以实现通信连接。其中，物理机101为终端设备租用的目的虚拟机所在的目的物理机。其中，物理机101中能够运行多个虚拟机，通过虚拟机为用户提供云存储资源。用户可通过访问虚拟机使用云存储资源，本申请实施例中以物理机中包括4个虚拟机为例，如图1所示，物理机101中包括第一虚拟机1011、第二虚拟机1012、第三虚拟机1013和第四虚拟机1014。第一虚拟机1011也命名为VMa1，第二虚拟机1012也命名为VMb1，第三虚拟机1013也命名为VMa2，第四虚拟机1014也命名为VMb2，通过以上名称可以看出，VMa1和VMa2为用户a租用的虚拟机，用户a可以使用VMa1和VMa2上的云存储资源，VMb1和VMb2为用户b租用的虚拟机，用户b可以使用VMb1和VMb2上的云存储资源。物理机101中还包括物理机的网关1015，网关1015可实现物理机101的通信功能。网关1015设置于硬件平台层。物理机101中还包括第一虚拟机网关1016和第二虚拟机网关1017，第一虚拟机网关1016也称为vNICa，为VMa1和VMa2提供通信功能，第二虚拟机网关1017也称为vNICb，为VMb1和VMb2提供通信功能。第一虚拟机网关1016和第二虚拟机网关1017设置于操作系统层。物理机101中还包括物理机的加密模块1018，终端设备102中还包括终端设备的加密模块1021，可执行加密和解密功能。可选地，物理机中还可以包括虚拟机监视器等结构，不在图中示出。可选地，物理机的加密模块1018中保存有所有终端设备的终端密钥。可选地，每个终端设备的加密模块中都保存有自己的终端密钥。可以理解的是，上述任意结构、模块的个数及具体的组成均可以根据实际情况确定，图1仅是示意性地。可以理解的是，本申请实施例示意的结构并不构成对云存储资源访问系统架构的具体限定。在本申请另一些可行的实施方式中，上述架构可以包括比图示更多或更少的部件，或者组合某些部件，或者拆分某些部件，或者不同的部件布置，具体可根据实际应用场景确定，在此不做限制。图1所示的部件可以以硬件，软件，或软件与硬件的组合实现。可选地，物理机及终端设备均可以包括处理器或处理设备。应理解，上述处理设备可以通过处理器读取存储器中的指令并执行指令的方式实现，也可以通过芯片电路实现。另外，本申请实施例描述的网络架构以及业务场景是为了更加清楚的说明本申请实施例的技术方案，并不构成对于本申请实施例提供的技术方案的限定，本领域普通技术人员可知，随着网络架构的演变和新业务场景的出现，本申请实施例提供的技术方案对于类似的技术问题，同样适用。下面以具体地实施例对本申请的技术方案以及本申请的技术方案如何解决上述技术问题进行详细说明。下面这几个具体的实施例可以相互结合，对于相同或相似的概念或过程可能在某些实施例中不再赘述。下面将结合附图，对本申请的实施例进行描述。图2为本申请实施例提供的一种云存储资源访问方法的流程示意图，本申请实施例可以应用于图1中的终端设备102，具体执行主体可以根据实际应用场景确定。如图2所示，该方法包括如下步骤：S201：获取访问虚拟机的报文负载。其中，报文负载可以通过用户在终端设备上的访问请求或访问操作获取。S202：对报文负载进行加密处理，得到加密报文负载。可选地，报文负载中包括访问目的地址和内容负载，访问目的地址包括目的物理机的网卡地址和目的虚拟机在目的物理机的私网地址；相应的，对报文负载进行加密处理，得到加密报文负载，包括：对内容负载进行加密处理，得到内容加密负载；将访问目的地址和内容加密负载进行合并处理，得到加密报文负载。可选地，通过终端设备的设备密钥对内容负载进行加密处理。这里，本申请实施例中终端设备发起访问的报文负载中包括访问目的地址和内容负载，访问目的地址用于指示虚拟机的地址，以实现对目的虚拟机的访问，内容负载用于指示访问的具体内容，终端设备针对内容负载进行加密处理，能够有效提高云存储资源访问的安全性，提高了用户体验。S203：根据加密报文负载，生成访问报文。可选地，根据加密报文负载，生成访问报文，包括：将终端设备的地址确定为访问报文的源地址，将目的物理机的网卡地址确定为访问报文的目的地址；将访问报文的源地址和访问报文的目的地址确定为访问报文的报文头，将加密报文负载确定为访问报文的负载，根据访问报文的报文头和访问报文的负载生成访问报文。其中，本申请实施例中的终端设备根据终端设备的地址、目的物理机的网卡地址以及加密报文负载生成访问报文，能够准确指示访问的目的物理机及目的虚拟机，准确向提供云存储资源的目的虚拟机发起了访问，实现了在用户的终端设备对云存储资源的访问。S204：将访问报文发送至目的物理机，以使目的物理机对加密报文负载进行解密处理，得到报文负载，根据访问报文和报文负载生成转发报文，将转发报文通过目的虚拟机对应的虚拟机网卡发送至目的虚拟机。S205：接收目的物理机发送的响应报文。其中，响应报文为目的物理机在接收到目的虚拟机通过虚拟机网卡返回的加密返回报文后，对加密返回报文进行封装处理得到的。加密返回报文为目的虚拟机根据转发报文生成返回报文后，采用终端设备的设备密钥对返回报文加密得到的。S206：对响应报文进行解密处理，得到返回报文。可选地，对响应报文进行解密处理，得到返回报文，包括：根据终端设备中存储的设备密钥，对响应报文进行解密处理，得到返回报文。这里，本申请实施例在加密时，可采用终端设备中存储的设备密钥，终端设备可通过自己的设备密钥对响应报文进行解密处理，得到返回报文，针对每个终端设备均采用自己的密钥进行加密和解密，密钥不易泄露，进一步地提高了云存储资源访问的安全性。本申请实施例提供了一种安全可靠的云存储资源访问方法，用户可通过自己的终端设备访问云存储资源，分别在终端设备端和终端设备对应的虚拟机所在物理机端增加加密功能，终端设备在发起访问时，首先对报文负载进行加密处理，得到加密报文负载，根据加密报文负载、访问的目的虚拟机的地址以及目的虚拟机所在目的物理机的地址，能够通过目的物理机向目的虚拟机发起访问，目的物理机执行加密及转发操作，并将目的虚拟机返回的报文进行封装处理后返回至终端设备，进而了实现终端设备向目的虚拟机的访问，用户无需登录物理机，通过自己的终端设备即可访问云存储资源，提高了云存储资源访问方式的灵活性，且加密传输提高了云资源访问的安全性。图3为本申请实施例提供的另一种云存储资源访问方法的流程示意图，本申请实施例的执行主体为目的物理机，可以应用于图1中的物理机101，该物理机101为用户终端对应的虚拟机所在的物理机，具体执行主体可以根据实际应用场景确定。如图3所示，该方法包括如下步骤：S301：接收终端设备发送的访问报文。其中，访问报文为终端设备获取访问虚拟机的报文负载，对报文负载进行加密处理，得到加密报文负载后，根据加密报文负载生成的。S302：对加密报文负载进行解密处理，得到报文负载。这里，通过访问报文获取加密报文负载。可选地，对加密报文负载进行解密处理，得到报文负载，包括：根据终端设备的设备标识，在密钥数据库中进行查询，确定终端设备的设备密钥；根据设备密钥，对加密报文负载进行解密处理，得到报文负载。这里，物理机中存储有终端设备的设备密钥，能够针对每个终端设备，通过存储的与终端设备对应的设备密钥，对报文实现解密及加密处理，进一步地提高了云存储资源访问的安全性。S303：根据访问报文和报文负载生成转发报文。可选地，报文负载中包括访问目的地址和内容负载，访问目的地址包括目的物理机的网卡地址和目的虚拟机在目的物理机的私网地址，访问报文中包括终端设备的地址；相应地，根据访问报文和报文负载生成转发报文，包括：将终端设备的地址确定为转发报文的源地址，将目的虚拟机在目的物理机的私网地址确定为转发报文的目的地址；将转发报文的源地址和转发报文的目的地址确定为转发报文的报文头，将报文负载确定为转发报文的报文负载，根据转发报文的报文头和访问报文的报文负载生成转发报文。其中，本申请实施例的物理机通过目的虚拟机在目的物理机的私网地址及报文负载，生成转发报文，实现了对用户访问报文的精准转发，进一步地提高了云存储资源访问的可靠性。S304：将转发报文通过目的虚拟机对应的虚拟机网卡发送至目的虚拟机，以使目的虚拟机根据转发报文生成返回报文，采用终端设备的设备密钥对返回报文加密，得到加密返回报文。S305：接收目的虚拟机通过虚拟机网卡返回的加密返回报文。S306：对加密返回报文进行封装处理，得到响应报文。可选地，对加密返回报文进行封装处理，得到响应报文，包括：根据终端设备的地址、目的物理机的网卡地址和目的虚拟机在目的物理机的私网地址，对加密返回报文进行封装处理，得到响应报文。S307：将响应报文发送至终端设备，以使终端设备对响应报文进行解密处理，得到返回报文。其中，本申请实施例中的目的物理机用于运行虚拟机的功能，且为用户的终端设备提供访问报文的转发以及返回报文的转发等，并执行报文的加密解密功能，通过物理机的转发及加密解密，实现了用户通过终端设备对云存储资源的安全访问。在一种可能的实现方式中，本申请实施例提供了一种云存储资源访问方法，具体实现过程如下：步骤一：租户终端即用户的终端设备a通过自身的加密模块将要发送的报文负载进行加密后发送到物理机M的NIC上，该报文源地址为a的IP地址，目的地址为M的NIC的地址，该报文的负载的相关字段表示该报文的目的地址为M里的VMa1，也就是说相关字段表明目的地址是物理机M的的地址和VMa1在物理机M中的私网地址。其中，报文负载的内容负载为AAA。示范性地，图4为本申请实施例提供的一种访问报文的结构示意图，可以理解的是，本申请实施例中的任意报文的结构示意图均为示范性的。步骤二：NIC根据报文负载中的真实的目的地址，知道该报文为租户a的终端发送给租户a的VMa1的报文，于是将该报文发送到解密模块进行解密后发送到vNICa，vNICa接收到该报文后将其解密后转发给VMa1，即发送转发报文。示范性地，图5为本申请实施例提供的一种转发报文的结构示意图，可以理解的是，本申请实施例中的任意报文的结构示意图均为示范性的。步骤三：VMa1将自己回发的报文发送给vNICa，即发送加密返回报文，该报文的负载部分用终端设备的设备密钥KEY-a进行加密，加密后的报文发送给M的NIC，报文的源地址为VMa1的私网地址，目的地址为a的IP地址。示范性地，图6为本申请实施例提供的一种加密返回报文的结构示意图，可以理解的是，本申请实施例中的任意报文的结构示意图均为示范性的。步骤四：M的NIC收到该报文后，将该报文进行二次封装，原报文的源地址部分在VMa1的私网地址的前面添加M的NIC的IP地址，其他部分不变，以上的整体作为新报文的负载，新报文的源地址为M的NIC的IP地址，目的地址为a的IP地址，形成响应报文，发送给a。示范性地，图7为本申请实施例提供的一种响应报文的结构示意图，可以理解的是，本申请实施例中的任意报文的结构示意图均为示范性的。步骤五：a收到该报文后，根据其负载部分得知该报文为M里的VMa1发送给自己的。将其加密部分进行解密。通过上述方法，不需要云侧的投资，用户的终端设备上增加相应的模块，需要对每个用户所使用的终端进行该模块的预装和该用户的密钥的写入。当用户密钥更改时，需要自身终端和物理机里的加密模块的密钥同时更改不过由于终端侧和物理机侧都对报文进行了加密，尤其是对于非使用运营商提供的虚拟专用网络通道的用户来说，这样更好的保证了网络传输过程中的安全，避免了被截获内容等问题，进一步地提高了云存储资源访问的安全性。图8为本申请实施例提供的一种云存储资源访问装置的结构示意图，应用于云存储资源访问设备，可以为图1中的终端设备102，如图8所示，本申请实施例的装置包括：获取模块801、第一加密模块802、第一生成模块803、第一处理模块804、第一接收模块805和第一解密模块806。这里的云存储资源访问装置可以是服务器或者终端设备，或者是实现服务器或者终端设备的功能的芯片或者集成电路。这里需要说明的是，获取模块801、第一加密模块802、第一生成模块803、第一处理模块804、第一接收模块805和第一解密模块806的划分只是一种逻辑功能的划分，物理上两者可以是集成的，也可以是独立的。其中，获取模块，用于获取访问虚拟机的报文负载；第一加密模块，用于对报文负载进行加密处理，得到加密报文负载；第一生成模块，用于根据加密报文负载，生成访问报文；第一处理模块，用于将访问报文发送至目的物理机，以使目的物理机对加密报文负载进行解密处理，得到报文负载，根据访问报文和报文负载生成转发报文，将转发报文通过目的虚拟机对应的虚拟机网卡发送至目的虚拟机；第一接收模块，用于接收目的物理机发送的响应报文，其中，响应报文为目的物理机在接收到目的虚拟机通过虚拟机网卡返回的加密返回报文后，对加密返回报文进行封装处理得到的，加密返回报文为目的虚拟机根据转发报文生成返回报文后，采用终端设备的设备密钥对返回报文加密得到的；第一解密模块，用于对响应报文进行解密处理，得到返回报文。可选地，报文负载中包括访问目的地址和内容负载，访问目的地址包括目的物理机的网卡地址和目的虚拟机在目的物理机的私网地址；相应的，第一加密模块具体用于：对内容负载进行加密处理，得到内容加密负载；将访问目的地址和内容加密负载进行合并处理，得到加密报文负载。可选地，第一生成模块具体用于：将终端设备的地址确定为访问报文的源地址，将目的物理机的网卡地址确定为访问报文的目的地址；将访问报文的源地址和访问报文的目的地址确定为访问报文的报文头，将加密报文负载确定为访问报文的负载，根据访问报文的报文头和访问报文的负载生成访问报文。可选地，第一解密模块具体用于：根据终端设备中存储的设备密钥，对响应报文进行解密处理，得到返回报文。本申请实施例还提供一种云存储资源访问装置，应用于云存储资源访问设备，可以为图1中的物理机101，本申请实施例的装置包括：第二接收模块、第二解密模块、第二生成模块、第二处理模块、第三接收模块、第三处理模块和第四处理模块。这里的云存储资源访问装置可以是服务器或者终端设备，或者是实现服务器或者终端设备的功能的芯片或者集成电路。这里需要说明的是，：第二接收模块、第二解密模块、第二生成模块、第二处理模块、第三接收模块、第三处理模块和第四处理模块的划分只是一种逻辑功能的划分，物理上两者可以是集成的，也可以是独立的。其中，第二接收模块，用于接收终端设备发送的访问报文，其中，访问报文为终端设备获取访问虚拟机的报文负载，对报文负载进行加密处理，得到加密报文负载后，根据加密报文负载生成的；第二解密模块，用于对加密报文负载进行解密处理，得到报文负载；第二生成模块，用于根据访问报文和报文负载生成转发报文；第二处理模块，用于将转发报文通过目的虚拟机对应的虚拟机网卡发送至目的虚拟机，以使目的虚拟机根据转发报文生成返回报文，采用终端设备的设备密钥对返回报文加密，得到加密返回报文；第三接收模块，用于接收目的虚拟机通过虚拟机网卡返回的加密返回报文；第三处理模块，用于对加密返回报文进行封装处理，得到响应报文；第四处理模块，用于将响应报文发送至终端设备，以使终端设备对响应报文进行解密处理，得到返回报文。可选地，第二解密模块具体用于：根据终端设备的设备标识，在密钥数据库中进行查询，确定终端设备的设备密钥；根据设备密钥，对加密报文负载进行解密处理，得到报文负载。可选地，报文负载中包括访问目的地址和内容负载，访问目的地址包括目的物理机的网卡地址和目的虚拟机在目的物理机的私网地址，访问报文中包括终端设备的地址；相应地，第二生成模块具体用于：将终端设备的地址确定为转发报文的源地址，将目的虚拟机在目的物理机的私网地址确定为转发报文的目的地址；将转发报文的源地址和转发报文的目的地址确定为转发报文的报文头，将报文负载确定为转发报文的报文负载，根据转发报文的报文头和访问报文的报文负载生成转发报文。可选地，第三处理模块具体用于：根据终端设备的地址、目的物理机的网卡地址和目的虚拟机在目的物理机的私网地址，对加密返回报文进行封装处理，得到响应报文。参考图9，其示出了适于用来实现本公开实施例的云存储资源访问设备的结构示意图，这里的云存储资源访问设备为云存储资源访问设备，可以为物理机或终端设备，其中，物理机可以为服务器。其中，终端设备可以包括但不限于诸如移动电话、笔记本电脑、数字广播接收器、个人数字助理、平板电脑、便携式多媒体播放器、车载终端等等的移动终端以及诸如数字TV、台式计算机等等的固定终端。图9示出的云存储资源访问设备仅仅是一个示例，不应对本公开实施例的功能和使用范围带来任何限制。如图9所示，云存储资源访问设备可以包括处理装置901，其可以根据存储在只读存储器902中的程序或者从存储装置908加载到随机访问存储器903中的程序而执行各种适当的动作和处理。在RAM 903中，还存储有云存储资源访问设备操作所需的各种程序和数据。处理装置901、ROM 902以及RAM 903通过总线904彼此相连。输入/输出接口905也连接至总线904。通常，以下装置可以连接至I/O接口905：包括例如触摸屏、触摸板、键盘、鼠标、摄像头、麦克风、加速度计、陀螺仪等的输入装置906；包括例如液晶显示器、扬声器、振动器等的输出装置907；包括例如磁带、硬盘等的存储装置908；以及通信装置909。通信装置909可以允许云存储资源访问设备与其他设备进行无线或有线通信以交换数据。虽然图9示出了具有各种装置的云存储资源访问设备，但是应理解的是，并不要求实施或具备所有示出的装置。可以替代地实施或具备更多或更少的装置。特别地，根据本公开的实施例，上文参考流程图描述的过程可以被实现为计算机软件程序。例如，本公开的实施例包括一种计算机程序产品，其包括承载在计算机可读介质上的计算机程序，该计算机程序包含用于执行流程图所示的方法的程序代码。在这样的实施例中，该计算机程序可以通过通信装置909从网络上被下载和安装，或者从存储装置908被安装，或者从ROM 902被安装。在该计算机程序被处理装置901执行时，执行本公开实施例的方法中限定的上述功能。需要说明的是，本公开上述的计算机可读介质可以是计算机可读信号介质或者计算机可读存储介质或者是上述两者的任意组合。计算机可读存储介质例如可以是——但不限于——电、磁、光、电磁、红外线、或半导体的系统、装置或器件，或者任意以上的组合。计算机可读存储介质的更具体的例子可以包括但不限于：具有一个或多个导线的电连接、便携式计算机磁盘、硬盘、随机访问存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑磁盘只读存储器、光存储器件、磁存储器件、或者上述的任意合适的组合。在本公开中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用。而在本公开中，计算机可读信号介质可以包括在基带中或者作为载波一部分传播的数据信号，其中承载了计算机可读的程序代码。这种传播的数据信号可以采用多种形式，包括但不限于电磁信号、光信号或上述的任意合适的组合。计算机可读信号介质还可以是计算机可读存储介质以外的任何计算机可读介质，该计算机可读信号介质可以发送、传播或者传输用于由指令执行系统、装置或者器件使用或者与其结合使用的程序。计算机可读介质上包含的程序代码可以用任何适当的介质传输，包括但不限于：电线、光缆、RF等等，或者上述的任意合适的组合。上述计算机可读介质可以是上述云存储资源访问设备中所包含的；也可以是单独存在，而未装配入该云存储资源访问设备中。上述计算机可读介质承载有一个或者多个程序，当上述一个或者多个程序被该云存储资源访问设备执行时，使得该云存储资源访问设备执行上述实施例所示的方法。可以以一种或多种程序设计语言或其组合来编写用于执行本公开的操作的计算机程序代码，上述程序设计语言包括面向对象的程序设计语言—诸如Java、Smalltalk、C++，还包括常规的过程式程序设计语言—诸如“C”语言或类似的程序设计语言。程序代码可以完全地在用户计算机上执行、部分地在用户计算机上执行、作为一个独立的软件包执行、部分在用户计算机上部分在远程计算机上执行、或者完全在远程计算机或服务器上执行。在涉及远程计算机的情形中，远程计算机可以通过任意种类的网络——包括局域网或广域网—连接到用户计算机，或者，可以连接到外部计算机。在本申请所提供的几个实施例中，应该理解到，所揭露的系统，装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。本领域技术人员在考虑说明书及实践这里公开的申请后，将容易想到本公开的其它实施方案。本申请旨在涵盖本公开的任何变型、用途或者适应性变化，这些变型、用途或者适应性变化遵循本公开的一般性原理并包括本公开未公开的本技术领域中的公知常识或惯用技术手段。说明书和实施例仅被视为示例性的，本公开的真正范围和精神由下面的权利要求书指出。应当理解的是，本公开并不局限于上面已经描述并在附图中示出的精确结构，并且可以在不脱离其范围进行各种修改和改变。本公开的范围仅由所附的权利要求书来限制。
