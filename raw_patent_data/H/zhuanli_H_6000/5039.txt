标题title
一种投屏控制方法
摘要abst
本发明提供投屏控制方法，通过设置目标终端的最大分屏数量，并根据请求端的类型以及当前分屏数量来决定分屏后的显示界面的类型及显示规则，实现了同时存在多个投屏时控制方法的智能化，提高了用户体验和驾驶安全性。
权利要求书clms
1.一种投屏控制方法，其特征在于，包括：步骤1、设置目标终端的最大分屏数量；步骤2、接受至少一个请求端的投屏请求，将投屏界面以全屏方式显示在目标终端上；步骤3、根据所述最大分屏数量，读取目标终端当前运行的应用程序对应的各级分屏人机交互界面，保存到显示缓存中；步骤4、接收请求端发起的分屏请求，判断所述请求端是否为投屏端，是则进入步骤5，否则进入步骤7；步骤5、判断目标终端程序界面是否已显示，是则发出分屏失败的信息，否则进入下一步；步骤6、判断当前分屏数量是否达到最大分屏数量，是则以第一预设规则显示目标终端程序界面，否则以第二预设规则显示目标终端程序界面；步骤7、判断当前分屏数量是否达到最大分屏数量，是则以第三预设规则显示所述请求端的投屏界面，否则以第四预设规则显示所述请求端的投屏界面。2.根据权利要求1所述的投屏控制方法，其特征在于，所述第一预设规则为：步骤A1、判断所述请求端是否为优先请求端，是则进入步骤A2，否则进入步骤A4；步骤A2、获取目前所有普通投屏界面的内容类型，根据预先设定的内容类型优先级确定其中优先级最低的普通投屏界面；步骤A3、从所述显示缓存中读取目标终端当前运行的应用程序或默认应用程序的最大级分屏人机交互界面，覆盖所述优先级最低的普通投屏界面，并将界面焦点切换到目标终端程序界面；步骤A4、依次向目前所有普通投屏端发起退出投屏的请求，如果在预设时间内有退出投屏的普通投屏端，则从所述显示缓存中读取目标终端当前运行的应用程序或默认应用程序的最大级分屏人机交互界面，替换所述退出投屏的普通投屏端的投屏界面，并将界面焦点切换到目标终端程序界面；如果没有任何普通投屏端退出投屏，则发出投屏请求失败的信息。3.根据权利要求1所述的投屏控制方法，其特征在于，所述第二预设规则为：步骤B1、获取目前分屏数量k，确定本次分屏数量为k+1；步骤B2、从缓存中读取与所述本次分屏数量对应的目标终端程序的分屏人机交互界面，在预设分屏位置显示，并将界面焦点切换到目标终端程序界面。4.根据权利要求1所述的投屏控制方法，其特征在于，所述第三预设规则为：步骤C1、判断所述请求端是否为优先请求端，是则进入步骤C2，否则进入步骤C4；步骤C2、获取目前所有普通投屏界面的内容类型，根据预先设定的内容类型优先级确定其中优先级最低的普通投屏界面；步骤C3、用所述优先请求端的投屏界面覆盖所述优先级最低的普通投屏界面，并将界面焦点切换到所述优先请求端的投屏界面；步骤C4、依次向目前所有普通投屏端发起退出投屏的请求，如果在预设时间内有退出投屏的普通投屏端，则用所述请求端的投屏界面替换所述退出投屏的投屏端的普通投屏界面，并将界面焦点切换到所述请求端的投屏界面；如果没有任何投屏端退出投屏，则发出投屏请求失败的信息。5.根据权利要求1所述的投屏控制方法，其特征在于，所述第四预设规则为：步骤D1、获取目前分屏数量k，确定本次分屏数量为k+1；步骤D2、将所述请求端的投屏界面在预设分屏位置显示，并将界面焦点切换到所述发起分屏请求的请求端的投屏界面。6.根据权利要求2或4所述的投屏控制方法，其特征在于，所述预设时间为1～5秒。7.根据权利要求3或5所述的投屏控制方法，其特征在于，所述预设分屏位置为最右侧、最左侧、最顶端、最低端中的其中一个。8.根据权利要求1所述的投屏控制方法，其特征在于，所述步骤1包括：步骤201、存储信任的请求端对应的识别特征信息，并将其中一个请求端设置为优先请求端；步骤202、当监测到车门解锁后，启动目标终端，开启目标终端的WIFI，并控制所述目标终端的WIFI进入探针模式；步骤203、所述目标终端的WIFI嗅探周围的请求端，如果探测到所述信任的请求端，则控制目标终端的WIFI进入AP模式，与所述请求端建立WIFI连接；步骤204、接受所述请求端发起的投屏请求，判断所述请求端是否包含优先请求端，是则将优先请求端的投屏界面以全屏方式显示，否则将第一个发起的投屏请求的请求端的投屏界面以全屏方式显示。9.根据权利要求2、4、8任一项所述的投屏控制方法，其特征在于，所述为优先请求端为驾驶员的请求端。10.根据权利要求1所述的投屏控制方法，其特征在于，在所述步骤7之后还包括：步骤8、当检测到倒车信号时，保存目标终端当前的投屏界面状态后隐藏所有投屏界面，将倒车影像全屏显示，当检测到倒车结束后，恢复保存的投屏界面状态。
说明书desc
技术领域本发明涉及双机互动技术领域，尤其涉及一种投屏控制方法。背景技术投屏是将一个显示终端屏幕上显示的界面映射到另外一个显示终端屏幕上。目前，将移动终端投屏到车载信息终端的显示屏上，主要是利用移动终端的在线导航功能。当移动终端投屏后，将占据车载信息终端的整个屏幕，如果用户想要切换到车载信息终端的人机交互界面执行某些操作，只能先退出移动终端投屏，操作完成后再把移动终端投屏到车载信息终端上，这个过程非常繁琐，效率低。并且，目前的投屏技术只能同时投屏一个移动终端，无法两个以上的移动终端同时进行投屏，在某些场景下用户体验不佳。发明内容本发明提供一种投屏控制方法，旨在解决现有技术中的缺陷，实现同时存在多个投屏时控制方法的智能化，提高了用户体验和驾驶安全性。为达到上述目的，本发明所采取的技术方案为：本发明提供一种投屏控制方法，包括：步骤1、设置目标终端的最大分屏数量；步骤2、接受至少一个请求端的投屏请求，将投屏界面以全屏方式显示在目标终端上；步骤3、根据所述最大分屏数量，读取目标终端当前运行的应用程序对应的各级分屏人机交互界面，保存到显示缓存中；步骤4、接收请求端发起的分屏请求，判断所述请求端是否为投屏端，是则进入步骤5，否则进入步骤7；步骤5、判断目标终端程序界面是否已显示，是则发出分屏失败的信息，否则进入下一步；步骤6、判断当前分屏数量是否达到最大分屏数量，是则以第一预设规则显示目标终端程序界面，否则以第二预设规则显示目标终端程序界面；步骤7、判断当前分屏数量是否达到最大分屏数量，是则以第三预设规则显示所述请求端的投屏界面，否则以第四预设规则显示所述请求端的投屏界面。具体地，所述第一预设规则为：步骤A1、判断所述请求端是否为优先请求端，是则进入步骤A2，否则进入步骤A4；步骤A2、获取目前所有普通投屏界面的内容类型，根据预先设定的内容类型优先级确定其中优先级最低的普通投屏界面；步骤A3、从所述显示缓存中读取目标终端当前运行的应用程序或默认应用程序的最大级分屏人机交互界面，覆盖所述优先级最低的普通投屏界面，并将界面焦点切换到目标终端程序界面；步骤A4、依次向目前所有普通投屏端发起退出投屏的请求，如果在预设时间内有退出投屏的普通投屏端，则从所述显示缓存中读取目标终端当前运行的应用程序或默认应用程序的最大级分屏人机交互界面，替换所述退出投屏的普通投屏端的投屏界面，并将界面焦点切换到目标终端程序界面；如果没有任何普通投屏端退出投屏，则发出投屏请求失败的信息。具体地，所述第二预设规则为：步骤B1、获取目前分屏数量k，确定本次分屏数量为k+1；步骤B2、从缓存中读取与所述本次分屏数量对应的目标终端程序的分屏人机交互界面，在预设分屏位置显示，并将界面焦点切换到目标终端程序界面。具体地，所述第三预设规则为：步骤C1、判断所述请求端是否为优先请求端，是则进入步骤C2，否则进入步骤C4；步骤C2、获取目前所有普通投屏界面的内容类型，根据预先设定的内容类型优先级确定其中优先级最低的普通投屏界面；步骤C3、用所述优先请求端的投屏界面覆盖所述优先级最低的普通投屏界面，并将界面焦点切换到所述优先请求端的投屏界面；步骤C4、依次向目前所有普通投屏端发起退出投屏的请求，如果在预设时间内有退出投屏的普通投屏端，则用所述请求端的投屏界面替换所述退出投屏的投屏端的普通投屏界面，并将界面焦点切换到所述请求端的投屏界面；如果没有任何投屏端退出投屏，则发出投屏请求失败的信息。具体地，所述第四预设规则为：步骤D1、获取目前分屏数量k，确定本次分屏数量为k+1；步骤D2、将所述请求端的投屏界面在预设分屏位置显示，并将界面焦点切换到所述发起分屏请求的请求端的投屏界面。具体地，所述为优先请求端为驾驶员的请求端。具体地，所述预设时间为1～5秒。具体地，所述预设分屏位置为最右侧、最左侧、最顶端、最低端中的其中一个。具体地，所述步骤2包括：步骤201、存储信任的请求端对应的识别特征信息，并将其中一个请求端设置为优先请求端；步骤202、当监测到车门解锁后，启动目标终端，开启目标终端的WIFI，并控制所述目标终端的WIFI进入探针模式；步骤203、所述目标终端的WIFI嗅探周围的请求端，如果探测到所述信任的请求端，则控制目标终端的WIFI进入AP模式，与所述请求端建立WIFI连接；步骤204、接受所述请求端发起的投屏请求，判断所述请求端是否包含优先请求端，是则将优先请求端的投屏界面以全屏方式显示，否则将第一个发起的投屏请求的请求端的投屏界面以全屏方式显示。进一步地，在所述步骤7之后还包括：步骤8、当检测到倒车信号时，保存目标终端当前的投屏界面状态后隐藏所有投屏界面，将倒车影像全屏显示，当检测到倒车结束后，恢复保存的投屏界面状态。本发明的有益效果在于：本发明通过设置目标终端的最大分屏数量，并根据请求端的类型以及当前分屏数量来决定分屏后的显示界面的类型及显示规则，实现了同时存在多个投屏时控制方法的智能化，提高了用户体验和驾驶安全性。附图说明图1是本发明的投屏控制方法的流程示意图；图2是本发明的在分屏数量达到最大时优先投屏端分屏示意图；图3是本发明的在分屏数量达到最大时普通投屏端分屏示意图；图4是本发明的在分屏数量未达到最大时投屏端分屏示意图；图5是本发明的在分屏数量达到最大时优先请求端分屏示意图；图6是本发明的在分屏数量达到最大时普通请求端分屏示意图；图7是本发明的在分屏数量未达到最大时普通请求端分屏示意图。具体实施方式下面结合附图具体阐明本发明的实施方式，附图仅供参考和说明使用，不构成对本发明专利保护范围的限制。实施例1如图1所示，本实施例提供一种投屏控制方法，包括：步骤1、设置目标终端的最大分屏数量。在本实施例中，所述目标终端为车载信息终端。为保证各投屏的显示效果，同时兼顾系统开销，目标终端的最大分屏数量m应根据目标终端的显示屏尺寸、分辨率以及系统的处理能力来决定，一般不宜超过10个。例如，如果目标终端的显示屏是17寸，通常以3个比较合适，即允许显示3个分屏。步骤2、接受至少一个请求端的投屏请求，将投屏界面以全屏方式显示在目标终端上。在本实施例中，所述请求端是指发起投屏请求的终端，例如手机等。在本实施例中，所述请求端通过WIFI投屏到目标终端。容易理解，所述请求端与目标终端也可以通过有线或其它无线方式连接。步骤3、根据所述最大分屏数量，读取目标终端当前运行的应用程序对应的各级分屏人机交互界面，保存到显示缓存中。将预先制作好的各应用程序对应的各级分屏人机交互界面进行存储，在确定最大分屏数量m后，即可读取对应的各级分屏人机交互界面。最大分屏数量m对应的分屏称为最大级分屏。例如，如果当前目标终端运行的应用程序是收音，最大分屏数量m为3，则读取收音的2分屏、3分屏两种人机交互界面到显示缓存中。步骤4、接收请求端发起的分屏请求，判断所述请求端是否为投屏端，是则进入步骤5，否则进入步骤7。分屏请求的实现方式包括但不限于：在所述请求端上输入特定的手势、触摸分屏图标，或者输入分屏语音指令。在本实施例中，所述投屏端为已将自身界面投屏到目标终端的终端。步骤5、判断目标终端程序界面是否已显示，是则发出分屏失败的信息，否则进入下一步。步骤6、判断当前分屏数量是否达到最大分屏数量，是则以第一预设规则显示目标终端程序界面，否则以第二预设规则显示目标终端程序界面。在本实施例中，所述第一预设规则为：步骤A1、判断所述请求端是否为优先投屏端，是则进入步骤A2，否则进入步骤A4。在本实施例中，所述优先投屏端是优先请求端在将界面投屏到目标终端后的对应状态。与之对应，普通投屏端是普通请求端在将界面投屏到目标终端后对应的状态。也就是说，投屏端在发起投屏请求时也是一个请求端。步骤A2、获取目前所有普通投屏界面的内容类型，根据预先设定的内容类型优先级确定其中优先级最低的普通投屏界面。在本实施例中，所述普通投屏界面是指普通投屏端的投屏界面。步骤A3、从所述显示缓存中读取目标终端当前运行的应用程序或默认应用程序的最大级分屏人机交互界面，覆盖所述优先级最低的普通投屏界面，并将界面焦点切换到目标终端程序界面。例如，如图2所示，目前目标终端显示屏是3分屏，普通投屏界面A、B分别显示音乐、导航，事先设定的优先级是导航、音乐，此时优先请求端发起分屏请求，那么就用3分屏的目标终端程序界面覆盖普通投屏界面A。步骤A4、依次向目前所有普通投屏端发起退出投屏的请求，如果在预设时间内有退出投屏的普通投屏端，则从所述显示缓存中读取目标终端当前运行的应用程序或默认应用程序的最大级分屏人机交互界面，替换所述退出投屏的普通投屏端的投屏界面，并将界面焦点切换到目标终端程序界面；如果没有任何普通投屏端退出投屏，则发出投屏请求失败的信息。在本实施例中，所述预设时间为1～5秒。例如，如图3所示，目前目标终端显示屏是3分屏，普通投屏端A、B的投屏界面分别显示音乐、导航，此时请求端A发起分屏请求，那么依次向目前已投屏的投屏端询问是否退出投屏，如果普通投屏端B接受退出投屏，则用3分屏的目标终端程序界面替换普通投屏端B的投屏界面。在本实施例中，所述第二预设规则为：步骤B1、获取目前分屏数量k，确定本次分屏数量为k+1。步骤B2、从缓存中读取与所述本次分屏数量对应的目标终端程序的分屏人机交互界面，在预设分屏位置显示，并将界面焦点切换到目标终端程序界面。在本实施例中，所述预设分屏位置为最右侧、最左侧、最顶端、最低端中的其中一个。如图4所示，目前目标终端显示屏是2分屏，优先投屏端投屏界面显示在左侧，普通投屏界面A显示在右侧。如果请求端A再次发起分屏请求，由于普通投屏界面A已显示，但目标终端程序界面没有显示，则从缓存中读取3分屏的目标终端程序界面，显示在右侧，并将界面焦点切换到目标终端程序界面步骤7、判断当前分屏数量是否达到最大分屏数量，是则以第三预设规则显示所述请求端的投屏界面，否则以第四预设规则显示所述请求端的投屏界面。在本实施例中，所述第三预设规则为：步骤C1、判断所述请求端是否为优先请求端，是则进入步骤C2，否则进入步骤C4。在本实施例中，所述为优先请求端为驾驶员的请求端；与之对应，驾驶员之外的请求端为普通请求端；步骤C2、获取目前所有普通投屏界面的内容类型，根据预先设定的内容类型优先级确定其中优先级最低的普通投屏界面。步骤C3、用所述优先请求端的投屏界面覆盖所述优先级最低的普通投屏界面，并将界面焦点切换到所述优先请求端的投屏界面。例如，如图5所示，目前目标终端显示屏是3分屏，普通投屏界面A、B、C分别显示音乐、导航、主页面，事先设定的优先级是导航、主页面、音乐，此时优先请求端发起分屏请求，那么就用优先请求端的投屏界面覆盖普通投屏界面A。步骤C4、依次向目前所有普通投屏端发起退出投屏的请求，如果在预设时间内有退出投屏的普通投屏端，则用所述请求端的投屏界面替换所述退出投屏的投屏端的普通投屏界面，并将界面焦点切换到所述请求端的投屏界面；如果没有任何投屏端退出投屏，则发出投屏请求失败的信息。例如，如图6所示，目前目标终端显示屏是3分屏，普通投屏界面B分别显示视频，此时请求端D发起分屏请求，那么向普通投屏端B询问是否退出投屏，如果普通投屏端B接受退出投屏，则将用请求端D的投屏界面替换普通投屏界面B。在本实施例中，所述第四预设规则为：步骤D1、获取目前分屏数量k，确定本次分屏数量为k+1。步骤D2、将所述请求端的投屏界面在预设分屏位置显示，并将界面焦点切换到所述发起分屏请求的请求端的投屏界面。在本实施例中，所述预设分屏位置为最右侧、最左侧、最顶端、最低端中的其中一个。如图7所示，目前目标终端显示屏是2分屏，优先投屏端投屏界面显示在左侧，普通投屏界面A显示在右侧。如果请求端B发起分屏请求，由于请求端B的投屏界面还没有显示，则将本次分屏个数确定为3，将请求端B的投屏界面在最右侧的分屏中进行显示，并将界面焦点切换到普通投屏界面B。实施例2与实施例1不同的是，本实施例提供实施例1中所述步骤2的一种具体实现方法：步骤201、存储信任的请求端对应的识别特征信息，并将其中一个请求端设置为优先请求端。在本实施例中，所述识别特征信息为WIFI MAC地址、IMEI等。步骤202、当监测到车门解锁后，启动目标终端，开启目标终端的WIFI，并控制所述目标终端的WIFI进入探针模式。步骤203、所述目标终端的WIFI嗅探周围的请求端，如果探测到所述信任的请求端，则控制目标终端的WIFI进入AP模式，与所述请求端建立WIFI连接。AP是Access Point的缩写，意即无线接入点，AP模式就是无线接入点模式。步骤204、接受所述请求端发起的投屏请求，判断所述请求端是否包含优先请求端，是则将优先请求端的投屏界面以全屏方式显示，否则将第一个发起的投屏请求的请求端的投屏界面以全屏方式显示。实施例3与实施例1不同的是，在实施例中所述步骤7之后还包括：步骤8、当检测到倒车信号时，保存目标终端当前的投屏界面状态后隐藏所有投屏界面，将倒车影像全屏显示，当检测到倒车结束后，恢复保存的投屏界面状态。以上所揭露的仅为本发明的较佳实施例，不能以此来限定本发明的权利保护范围，因此依本发明申请专利范围所作的等同变化，仍属本发明所涵盖的范围。
