标题title
基于蜂窝网络的持续部署方法、系统及相关设备
摘要abst
本发明适用于互联网技术领域，尤其涉及一种基于蜂窝网络的持续部署方法、系统及相关设备，所述持续部署方法包括：在服务器端部署虚拟化服务器，并在目标服务器处于隔离网络的客户端部署实体节点；基于所述虚拟化服务器，在所述服务器端编译得到待部署数据包；在所述实体节点与所述虚拟化服务器之间基于蜂窝网络建立加密网络传输通道；基于所述加密网络传输通道，通过所述实体节点获取所述虚拟化服务器中的所述待部署数据包；利用所述实体节点将所述待部署数据包部署于所述客户端的目标服务器中，以完成持续部署流程。本发明节省了运维资源，降低了系统压力，且保证了远程持续部署过程中服务器端与客户端网络的保密性，降低了网络安全风险。
权利要求书clms
1.一种基于蜂窝网络的持续部署方法，其特征在于，所述持续部署方法包括以下步骤：S1、在服务器端部署虚拟化服务器，并在目标服务器处于隔离网络的客户端部署实体节点；S2、在所述服务器端基于所述虚拟化服务器编译得到待部署数据包；S3、在所述实体节点与所述虚拟化服务器之间基于蜂窝网络建立加密网络传输通道；S4、基于所述加密网络传输通道，通过所述实体节点获取所述虚拟化服务器中的所述待部署数据包；S5、利用所述实体节点将所述待部署数据包部署于所述客户端的目标服务器中，以完成持续部署。2.如权利要求1所述的基于蜂窝网络的持续部署方法，其特征在于，所述虚拟化服务器包括代码仓库服务器、发布服务器、编译节点服务器和产品库服务器，所述实体节点作为所述发布服务器发布数据的交付节点。3.如权利要求2所述的基于蜂窝网络的持续部署方法，其特征在于，步骤S2包括以下子步骤：S21、通过所述发布服务器从所述代码仓库服务器中获取待部署项目代码；S22、通过所述发布服务器将所述待部署项目代码转存至所述编译节点服务器；S23、通过所述编译节点服务器将所述待部署项目代码编译构建得到所述待部署数据包，并将所述待部署数据包保存至所述产品库服务器中。4.如权利要求3所述的基于蜂窝网络的持续部署方法，其特征在于，步骤S23中将所述待部署数据包保存至所述产品库服务器的步骤前，还包括步骤：对所述待部署数据包进行提测，提测包括部署数据的功能测试、性能测试、归档，并在提测通过后进行所述待部署数据包的保存；若提测不通过，则返回步骤S21。5.如权利要求1所述的基于蜂窝网络的持续部署方法，其特征在于，步骤S4还包括以下步骤：所述实体节点在得到所述待部署数据包后断开蜂窝网络。6.如权利要求1所述的基于蜂窝网络的持续部署方法，其特征在于，步骤S5包括以下子步骤：通过所述实体节点与所述目标服务器建立本地网络连接；通过所述实体节点将所述待部署数据包部署于所述目标服务器。7.如权利要求1所述的基于蜂窝网络的持续部署方法，其特征在于，所述加密网络传输通道基于软件定义广域网。8.一种基于蜂窝网络的持续部署系统，其特征在于，包括：初始化模块，用于在服务器端部署虚拟化服务器，并在目标服务器处于隔离网络的客户端部署实体节点；集成模块，用于在所述服务器端基于所述虚拟化服务器编译得到待部署数据包；通信模块，用于在所述实体节点与所述虚拟化服务器之间基于蜂窝网络建立加密网络传输通道；传输模块，用于基于所述加密网络传输通道，通过所述实体节点获取所述虚拟化服务器中的所述待部署数据包；交付模块，用于利用所述实体节点将所述待部署数据包部署于所述客户端的目标服务器中，以完成持续部署流程。9.一种计算机设备，其特征在于，包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的基于蜂窝网络的持续部署程序，所述处理器执行所述基于蜂窝网络的持续部署程序时实现如权利要求1-7中任意一项所述的基于蜂窝网络的持续部署方法中的步骤。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储有基于蜂窝网络的持续部署程序，所述基于蜂窝网络的持续部署程序被处理器执行时实现如权利要求1-7中任意一项所述的基于蜂窝网络的持续部署方法中的步骤。
说明书desc
技术领域本发明适用于互联网技术领域，尤其涉及一种基于蜂窝网络的持续部署方法、系统及相关设备。背景技术持续部署指的是将已编译完成的代码尽快向可运行的开发/测试节交付的过程。现有技术的持续部署方案的网络拓扑图如图1所示，持续部署流程的内部网络通常包括由代码仓库服务器、发布服务器、编译节点服务器和产品库服务器组成，发布服务器从代码仓库服务器上拉取项目代码，随后发布服务器将拉取到的代码转存至编译节点服务器，编译节点服务器将代码编译构建并将产出的部署包进行提测，测试通过后部署包进入到产品库服务器，发布服务器获取产品库里的部署包，再通过交换机、路由器的内部网络，连接至有线互联网部署至目标服务器，至此一次完整的持续部署流程完成。然而，上述过程中存在一定的弊端导致持续部署流程存在效率和安全问题：首先，代码仓库服务器、发布服务器、编译节点服务器和产品库服务器分别用于不同功能，数量上无法精简，导致服务器硬件资源占用过大，可能故障的点位较多，服务器运维压力大；第二，持续部署流程依赖于有线互联网与目标服务器连接，在有线互联网断开的情况下，无法正常进行代码部署工作；第三，目标服务器所在网络处于隔离状态时，无法进行部署包的发布；第四，基于第三点，从目标服务器远程连接到部署发布服务器以进行部署包获取时，内部网络存在安全风险。因此，有必要提出一种新的持续部署方法以解决上述问题。发明内容本发明提供一种基于蜂窝网络的持续部署方法、系统及相关设备，旨在解决现有技术存在的服务器资源压力大、远程部署场景下的连接性及安全性问题。为解决上述技术问题，第一方面，本发明提供一种基于蜂窝网络的持续部署方法，所述持续部署方法包括以下步骤：S1、在服务器端部署虚拟化服务器，并在目标服务器处于隔离网络的客户端部署实体节点；S2、在所述服务器端基于所述虚拟化服务器编译得到待部署数据包；S3、在所述实体节点与所述虚拟化服务器之间基于蜂窝网络建立加密网络传输通道；S4、基于所述加密网络传输通道，通过所述实体节点获取所述虚拟化服务器中的所述待部署数据包；S5、利用所述实体节点将所述待部署数据包部署于所述客户端的目标服务器中，以完成持续部署流程。更进一步地，所述虚拟化服务器包括代码仓库服务器、发布服务器、编译节点服务器和产品库服务器，所述实体节点作为所述发布服务器发布数据的交付节点。更进一步地，步骤S2包括以下子步骤：S21、通过所述发布服务器从所述代码仓库服务器中获取待部署项目代码；S22、通过所述发布服务器将所述待部署项目代码转存至所述编译节点服务器；S23、通过所述编译节点服务器将所述待部署项目代码编译构建得到所述待部署数据包，并将所述待部署数据包保存至所述产品库服务器中。更进一步地，步骤S23中将所述待部署数据包保存至所述产品库服务器的步骤前，还包括步骤：对所述待部署数据包进行提测，提测包括部署数据的功能测试、性能测试、归档，并在提测通过后进行所述待部署数据包的保存；若提测不通过，则返回步骤S21。更进一步地，步骤S4还包括以下步骤：所述实体节点在得到所述待部署数据包后断开蜂窝网络。更进一步地，步骤S5包括以下子步骤：通过所述实体节点与所述目标服务器建立本地网络连接；通过所述实体节点将所述待部署数据包部署于所述目标服务器。更进一步地，所述加密网络传输通道基于软件定义广域网。第二方面，本发明还提供一种基于蜂窝网络的持续部署系统，包括：初始化模块，用于在服务器端部署虚拟化服务器并在目标服务器处于隔离网络的客户端部署实体节点；集成模块，用于在所述服务器端基于所述虚拟化服务器编译得到待部署数据包；通信模块，用于在所述实体节点与所述虚拟化服务器之间基于蜂窝网络建立加密网络传输通道；传输模块，用于基于所述加密网络传输通道，通过所述实体节点获取所述虚拟化服务器中的所述待部署数据包；交付模块，用于利用所述实体节点将所述待部署数据包部署于所述客户端的目标服务器中，以完成持续部署流程。第三方面，本发明还提供一种计算机设备，包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的基于蜂窝网络的持续部署程序，所述处理器执行所述基于蜂窝网络的持续部署程序时实现如上述实施例中任意一项所述的基于蜂窝网络的持续部署方法中的步骤。第四方面，本发明还提供一种计算机可读存储介质，所述计算机可读存储介质上存储有基于蜂窝网络的持续部署程序，所述基于蜂窝网络的持续部署程序被处理器执行时实现如上述实施例中任意一项所述的基于蜂窝网络的持续部署方法中的步骤。本发明所达到的有益效果，在于提出了一种基于虚拟化、蜂窝网络以及加密通信实现的远程持续部署方法，该方法结合虚拟化技术将服务器资源进行整合，节省了运维资源，降低了系统压力；在远程持续部署的场景下，结合蜂窝网络和加密通信实现了服务器与节点之间部署数据的传输，保证了服务器端与客户端网络的保密性，降低了网络安全风险。附图说明图1是现有技术持续部署方案的网络拓扑图；图2是本发明实施例提供的基于蜂窝网络的持续部署方法的步骤流程框图；图3是本发明实施例提供的基于蜂窝网络的持续部署方法的网络拓扑图；图4是本发明实施例提供的基于蜂窝网络的持续部署系统的结构示意图；图5是本发明实施例提供的计算机设备的结构示意图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。本发明实施例提供一种持续部署方法，请参照图2，图2是本发明实施例提供的基于蜂窝网络的持续部署方法的步骤流程框图，所述持续部署方法包括以下步骤：S1、在服务器端部署虚拟化服务器，并在目标服务器处于隔离网络的客户端部署实体节点。具体的，本发明实施例讨论的是一种目标服务器处于隔离网络时的持续部署方法，隔离网络可以是多种形式的，最典型的隔离网络是不接入互联网的、具有一定保密级的物理隔离网络，常见于企业等设施的内部网络。本发明实施例中的网络环境拓扑如图3所示，在这样的场景下，现有技术的持续部署方案因为无法在服务器所处的网络通过互联网链路连接至隔离网络中的目标服务器，因此无法完成数据部署流程。本发明实施例中的所述虚拟化服务器包括代码仓库服务器、发布服务器、编译节点服务器和产品库服务器，所述实体节点作为所述发布服务器发布数据的交付节点。所述虚拟化服务器是基于PVE虚拟化技术实现的。本发明实施例中，通过一台高性能的服务器设备将多台服务器通过虚拟机的方式运行于所述虚拟化服务器中，这样的方式在节省了硬件资源的同时，能够便于运维人员管理服务器的计算资源，降低运维压力。所述实体节点可以是移动式的便携式计算机设备。具体的，本发明实施例以Jenkins持续集成工具为示例进行说明，Jenkins持续集成工具是一种基于Java语言的、以网络服务的形式，通过所述发布服务器提供持续部署服务的工具，而所述实体节点作为Jenkins服务的交付节点部署于客户端，以便于后续部署步骤的执行。一般的，如图3所示，服务器端和客户端是区别开来的网络环境，不同的网络环境的出入口是不同的，对于服务器端来说，为了能够正常提供服务，其网络中还会包括交换机、路由器等网络设备，其中交换机用于所述虚拟化服务器的内部网络数据传输，而路由器用于实现互联网数据与内部网络数据之间的传输，在需要的情况下，路由器根据其连接的网络类型可以设置多个出口至互联网。而隔离网络由于其特殊性，本发明实施例中并不讨论隔离网络如何连接至互联网的情况。S2、在所述服务器端基于所述虚拟化服务器编译得到待部署数据包。本发明实施例将现有的持续部署的步骤分为持续集成和持续交付两个阶段。步骤S2对应其中的持续集成阶段，首先对具体的待部署数据包进行编译。步骤S2包括以下子步骤：S21、通过所述发布服务器从所述代码仓库服务器上获取待部署项目代码；S22、通过所述发布服务器将所述待部署项目代码转存至所述编译节点服务器；S23、通过所述编译节点服务器将所述待部署项目代码编译构建得到所述待部署数据包，并将所述待部署数据包保存至所述产品库服务器中。所述待部署数据包是持续集成阶段的最终产品，在持续集成阶段结束时，所述待部署数据包保存于所述产品库服务器中，待发布至需要的客户端设备上。步骤S23中将所述待部署数据包保存至所述产品库服务器的步骤前，还包括步骤：对所述待部署数据包进行提测，提测包括部署数据的功能测试、性能测试、归档，并在提测通过后进行所述待部署数据包的保存；若提测不通过，则返回步骤S21。提测流程是编译环节的必要流程，在持续部署的过程中，任何即将发布至客户端设备的数据都需要经过功能和性能的测试，以避免影响实际的生产工作。S3、在所述实体节点与所述虚拟化服务器之间基于蜂窝网络建立加密网络传输通道。所述加密网络传输通道基于软件定义广域网。软件定义广域网是一种更为安全的网络通信技术，其基于广域网的数据链路、并能够基于软件进行配置，运维人员可以根据该技术将广域网连接和功能整合并虚拟化成集中式的策略，以简化复杂广域网络拓扑的部署和管理。这种技术可通过广域网将两个不同的网络打通，并建立点对点的传输通道，实现非专线的网络连接，软件定义广域网技术的优点是不会将网络两端暴露业务端口在公网上，从而降低网络安全风险。本发明实施例中，基于蜂窝网络建立所述加密网络传输通道，蜂窝网络可以是4G、5G等由运营商提供的商用网络，一方面，蜂窝网络相较于有线互联网更具有便携性和冗余性的优势；另一方面，基于蜂窝网络实现软件定义广域网的连接，能够适合所述实体节点与所述虚拟化服务器之间的网络拓扑形式，由于所述实体节点具有可移动性质，在多个实体节点需要构建所述加密网络传输通道的情况下，从技术角度也更易于实现。也就是说，基于所述加密网络传输通道，部署于客户端的所述实体节点与所述虚拟化服务器所在的服务器端之间可以视为内部网络的拓扑，其安全性得到提高，避免了所述实体节点使用互联网链路连接服务器端导致的公网安全性问题。需要指出的是，虽然本发明实施例以服务器端和客户端之间的互联网有线链路断开的情况为例进行方案说明，但基于软件定义广域网这一技术，在服务器端和客户端之间具有包括有线链路在内的其他数据连接方式的前提下，所述实体节点与所述虚拟化服务器之间也可以基于软件定义广域网技术实现所述加密网络传输通道，并完成后续的持续交付流程。S4、基于所述加密网络传输通道，通过所述实体节点获取所述虚拟化服务器中的所述待部署数据包。步骤S4还包括以下步骤：所述实体节点在得到所述待部署数据包后断开蜂窝网络。所述实体节点主要用于执行持续交付阶段的流程，由于所述实体节点与所述虚拟化服务器之间在整个流程中仅存在从所述产品库服务器获取所述待部署数据包这一数据读取流程，因此为了提高数据传输的安全性，所述实体节点在得到所述待部署数据包后可以断开蜂窝网络，以切断所述加密网络传输通道。S5、利用所述实体节点将所述待部署数据包部署于所述客户端的目标服务器中，以完成持续部署流程。具体的，步骤S5对应持续交付阶段的流程，由于本发明实施例讨论的是目标服务器处于隔离网络的情况，因此部署于所述客户端的所述实体节点可以通过非互联网连接的方式对隔离网络进行访问，访问方式可以是连接隔离网络中的无线局域网、或者是通过实体的网络线路。步骤S5包括以下子步骤：通过所述实体节点与所述目标服务器建立本地网络连接；通过所述实体节点将所述待部署数据包部署于所述目标服务器。对于客户端而言，所述实体节点通过物理连接的方式与所述目标服务器建立本地网络连接，并且在先前步骤中，所述实体节点将与所述虚拟化服务器之间的所述加密网络传输通道进行了断开，因此从隔离网络安全性的角度，所述实体节点并不会在部署过程中与互联网产生连接，从隔离网络规定和数据传输安全性的角度也能够实现正常的持续交付流程。在将所述待部署数据包部署于所述目标服务器后，对于单次待部署数据的发布、部署的持续部署流程结束。本发明所达到的有益效果，在于提出了一种基于虚拟化、蜂窝网络以及加密通信实现的远程持续部署方法，该方法结合虚拟化技术将服务器资源进行整合，节省了运维资源，降低了系统压力；在远程持续部署的场景下，结合蜂窝网络和加密通信实现了服务器与节点之间部署数据的传输，保证了服务器端与客户端网络的保密性，降低了网络安全风险。本发明实施例还提供一种基于蜂窝网络的持续部署系统200，请参照图4，图4是本发明实施例提供的基于蜂窝网络的持续部署系统的结构示意图，所述基于蜂窝网络的持续部署系统200包括：初始化模块201，用于在服务器端部署虚拟化服务器并在目标服务器处于隔离网络的客户端部署实体节点；集成模块202，用于在所述服务器端基于所述虚拟化服务器编译得到待部署数据包；通信模块203，用于在所述实体节点与所述虚拟化服务器之间基于蜂窝网络建立加密网络传输通道；传输模块204，用于基于所述加密网络传输通道，通过所述实体节点获取所述虚拟化服务器中的所述待部署数据包；交付模块205，用于利用所述实体节点将所述待部署数据包部署于所述客户端的目标服务器中，以完成持续部署流程。所述持续部署系统200能够实现如上述实施例中的基于蜂窝网络的持续部署方法中的步骤，且能实现同样的技术效果，参上述实施例中的描述，此处不再赘述。本发明实施例还提供一种计算机设备，请参照图5，图5是本发明实施例提供的计算机设备的结构示意图，所述计算机设备300包括：存储器302、处理器301及存储在所述存储器302上并可在所述处理器301上运行的基于蜂窝网络的持续部署程序。所述处理器301调用所述存储器302存储的基于蜂窝网络的持续部署程序，执行本发明实施例提供的基于蜂窝网络的持续部署方法中的步骤，请结合图2，具体包括以下步骤：S1、在服务器端部署虚拟化服务器，并在目标服务器处于隔离网络的客户端部署实体节点。所述虚拟化服务器包括代码仓库服务器、发布服务器、编译节点服务器和产品库服务器，所述实体节点作为所述发布服务器发布数据的交付节点。S2、基于所述虚拟化服务器，在所述服务器端编译得到待部署数据包。步骤S2包括以下子步骤：S21、通过所述发布服务器从所述代码仓库服务器上中获取部署项目代码；S22、通过所述发布服务器将所述待部署项目代码转存至所述编译节点服务器；S23、通过所述编译节点服务器将所述待部署项目代码编译构建得到所述待部署数据包，并将所述待部署数据包保存至所述产品库服务器中。步骤S23中将所述待部署数据包保存至所述产品库服务器的步骤前，还包括步骤：对所述待部署数据包进行提测，提测包括部署数据的功能测试、性能测试、归档，并在提测通过后进行所述待部署数据包的保存；若提测不通过，则返回步骤S21。S3、在所述实体节点与所述虚拟化服务器之间基于蜂窝网络建立加密网络传输通道。所述加密网络传输通道基于软件定义广域网。S4、基于所述加密网络传输通道，通过所述实体节点获取所述虚拟化服务器中的所述待部署数据包。步骤S4还包括以下步骤：所述实体节点在得到所述待部署数据包后断开蜂窝网络。S5、利用所述实体节点将所述待部署数据包部署于所述客户端的目标服务器中，以完成持续部署流程。步骤S5包括以下子步骤：通过所述实体节点与所述目标服务器建立本地网络连接；通过所述实体节点将所述待部署数据包部署于所述目标服务器。本发明实施例提供的计算机设备300能够实现如上述实施例中的基于蜂窝网络的持续部署方法中的步骤，且能实现同样的技术效果，参上述实施例中的描述，此处不再赘述。本发明实施例还提供一种计算机可读存储介质，所述计算机可读存储介质上存储有基于蜂窝网络的持续部署程序，该基于蜂窝网络的持续部署程序被处理器执行时实现本发明实施例提供的基于蜂窝网络的持续部署方法中的各个过程及步骤，且能实现相同的技术效果，为避免重复，这里不再赘述。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过基于蜂窝网络的持续部署程序来指令相关的硬件来完成，所述的程序可存储于一计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，所述的存储介质可为磁碟、光盘、只读存储记忆体或随机存取存储器等。需要说明的是，在本文中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者装置不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者装置所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括该要素的过程、方法、物品或者装置中还存在另外的相同要素。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到上述实施例方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台终端执行本发明各个实施例所述的方法。上面结合附图对本发明的实施例进行了描述，所揭露的仅为本发明较佳实施例而已，但是本发明并不局限于上述的具体实施方式，上述的具体实施方式仅仅是示意性的，而不是限制性的，本领域的普通技术人员在本发明的启示下，在不脱离本发明宗旨和权利要求所保护的范围情况下，还可做出很多形式用等同变化，均属于本发明的保护之内。
