标题title
一种定向分发消息的方法、装置及计算机设备
摘要abst
本发明公开一种定向分发消息的方法、装置及计算机设备，其中，方法包括：基于消息请求包，生成各消息详情表；将各目标消息标识按照先后顺序存放在目标消息队列中；获取目标用户发送的目标拉取指令，目标拉取指令包括第一时刻拉取的第一目标消息的第一记录标识，和第二时刻拉取的第二目标消息，第一时刻与第二时刻相邻；通过预设确认机制向目标用户发送第一目标消息或第二目标消息。本发明可以定向同时向不同批量的目标用户分发目标消息，有利于节约带宽，同时，基于预设确认机制，结合各次目标用户携带的目标拉取指令灵活执行不同分发策略，满足了用户的不同需求，也保证了各次目标用户拉取目标信息的可达性以及准确性，最终提高了消息分发效率。
权利要求书clms
1.一种的定向分发消息的方法，其特征在于，包括如下步骤：基于目标用户发送的消息请求包，生成各消息详情表，所述各消息详情表包括与之对应的各目标消息标识、各目标消息内容和各分发目标数量；将所述各目标消息标识按照先后顺序存放在目标消息队列中；获取目标用户发送的目标拉取指令，所述目标拉取指令包括第一时刻拉取的第一目标消息的第一记录标识，和第二时刻拉取的第二目标消息，所述第一时刻与所述第二时刻相邻；根据所述各目标消息标识、所述各消息详情表和所述目标拉取指令，通过预设确认机制向目标用户发送第一目标消息或第二目标消息。2.根据权利要求1所述的定向分发消息的方法，其特征在于，根据所述各目标消息标识、所述各消息详情表和所述目标拉取指令，通过预设确认机制向目标用户发送第一目标消息或第二目标消息，包括:确认是否生成第一时刻的第一目标缓冲列表；当没有生成第一时刻的第一目标缓冲列表，通过目标消息队列中各目标消息标识从各消息详情表中查找第二目标消息；生成第二时刻的第二目标缓冲列表，所述第二目标缓冲列表包括第二记录标识和第二目标消息对应的各目标消息标识；将所述第二目标消息和所述第二记录标识发送给目标用户。3.根据权利要求2所述的定向分发消息的方法，其特征在于，当生成第一时刻的第一目标缓冲列表，通过如下步骤执行：确认第一目标缓冲列表中第一记录标识与所述目标拉取指令中第一记录标识的信息是否一致；若信息一致，基于第一目标缓冲列表中第一目标消息对应的各目标消息标识，对各消息详情表中分发目标数量按照递减方式计数直到分发目标数量为零时，删除第一目标消息对应的各消息详情表，当完成递减方式计数操作后再删除第一目标缓冲列表；基于目标消息队列中第二目标消息对应的各目标消息标识，从各消息详情表中查找第二目标消息；生成第二时刻的第二目标缓冲列表，所述第二目标缓冲列表包括第二记录标识和第二目标消息对应的各目标消息标识；将所述第二目标消息和第二记录标识发送给目标用户；若信息不一致，基于第一目标缓冲列表中第一目标消息对应的各目标消息标识，从各消息详情表中查找第一目标消息；将所述第一目标消息和第一记录标识发送给目标用户。4.根据权利要求1所述的定向分发消息的方法，其特征在于，还包括：若目标用户在预设时间内未拉取所述各消息详情表中各目标消息内容，自动删除该所述各消息详情表。5.根据权利要求1至4中任一项所述的定向分发消息的方法，其特征在于，所述第一目标消息和所述第二目标消息包括CDN节点数据刷新消息和/或CDN节点数据配置消息和/或CDN节点数据分发消息和/或CDN节点数据通信消息中的一种或几种。6.根据权利要求1至4中任一项所述的定向分发消息的方法，其特征在于，由所述目标用户确定各次时间拉取第一目标消息或第二目标消息的第一预设数量。7.根据权利要求6中任一项所述的定向分发消息的方法，其特征在于，各次时间拉取所述第一目标消息或所述第二目标消息的所述目标用户为第二预设数量。8.一种的定向分发消息的装置，其特征在于，包括如下模块：消息列表生成模块，用于基于目标用户发送的消息请求包，生成各消息详情表，所述各消息详情表包括与之对应的各目标消息标识、各目标消息内容和各分发目标数量；消息标号存放模块，用于将所述各目标消息标识按照先后顺序存放在目标消息队列中；拉取指令获取模块，用于获取目标用户发送的目标拉取指令，所述目标拉取指令包括第一时刻拉取的第一目标消息的第一记录标识，和第二时刻拉取的第二目标消息，所述第一时刻与所述第二时刻相邻；定向发送模块，用于根据所述各目标消息标识、所述各消息详情表和所述目标拉取指令，通过预设确认机制向目标用户发送第一目标消息或第二目标消息。9.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机指令，所述计算机指令用于使所述计算机执行权利要求1至7中任一项所述的定向分发消息的方法。10.一种计算机设备，其特征在于，包括：存储器和处理器，所述存储器和所述处理器之间互相通信连接，所述存储器中存储有计算机指令，所述处理器通过执行所述计算机指令，从而执行权利要求1至7中任一项所述的定向分发消息的方法。
说明书desc
技术领域本发明涉及物联网消息任务分发技术领域，具体涉及一种定向分发消息的方法、装置及计算机设备。背景技术随着物联网技术的快速发展，相应出现海量消息需要实时分发以增强用户体验。相关技术中，主要基于消息队列利用单播或广播的方式分发不同消息，由于，单播是按照逐条对应的方式，将各条消息分发给指定的目标用户，若基于多消息队列或多topic分发机制通知指定的多个目标用户，各消息队列或各topic缓冲表中又分别包含各自的消息内容，显然，造成资源浪费。而广播是将目标消息发送给订阅该目标消息的全部用户，显然，该方式无法指定向目标用户单独分发消息，还会增加带宽浪费。因此，上述两种消息分发方式适用范围均有限，导致无法灵活更改分发机制，无法满足用户的不同需求。发明内容因此，本发明要解决的技术问题在于克服现有技术中的无法指定向目标用户单独分发消息，还会增加带宽浪费，分发方式适用范围均有限，无法灵活更改分发机制，无法满足用户的不同需求的问题，从而提供一种定向分发消息的方法、装置及计算机设备。根据第一方面，本发明实施例提供一种的定向分发消息的方法，包括如下步骤：基于目标用户发送的消息请求包，生成各消息详情表，所述各消息详情表包括与之对应的各目标消息标识、各目标消息内容和各分发目标数量；将所述各目标消息标识按照先后顺序存放在目标消息队列中；获取目标用户发送的目标拉取指令，所述目标拉取指令包括第一时刻拉取的第一目标消息的第一记录标识，和第二时刻拉取的第二目标消息，所述第一时刻与所述第二时刻相邻；根据所述各目标消息标识、所述各消息详情表和所述目标拉取指令，通过预设确认机制向目标用户发送第一目标消息或第二目标消息。在一种实施方式中，根据所述各目标消息标识、所述各消息详情表和所述目标拉取指令，通过预设确认机制向目标用户发送第一目标消息或第二目标消息，包括:确认是否生成第一时刻的第一目标缓冲列表；当没有生成第一时刻的第一目标缓冲列表，通过目标消息队列中各目标消息标识从各消息详情表中查找第二目标消息；生成第二时刻的第二目标缓冲列表，所述第二目标缓冲列表包括第二记录标识和第二目标消息对应的各目标消息标识；将所述第二目标消息和所述第二记录标识发送给目标用户。在一种实施方式中，当生成第一时刻的第一目标缓冲列表，通过如下步骤执行：确认第一目标缓冲列表中第一记录标识与所述目标拉取指令中第一记录标识的信息是否一致；若信息一致，基于第一目标缓冲列表中第一目标消息对应的各目标消息标识，对各消息详情表中分发目标数量按照递减方式计数直到分发目标数量为零时，删除第一目标消息对应的各消息详情表，当完成递减方式计数操作后再删除第一目标缓冲列表；基于目标消息队列中第二目标消息对应的各目标消息标识，从各消息详情表中查找第二目标消息；生成第二时刻的第二目标缓冲列表，所述第二目标缓冲列表包括第二记录标识和第二目标消息对应的各目标消息标识；将所述第二目标消息和第二记录标识发送给目标用户；若信息不一致，基于第一目标缓冲列表中第一目标消息对应的各目标消息标识，从各消息详情表中查找第一目标消息；将所述第一目标消息和第一记录标识发送给目标用户。在一种实施方式中，所述的定向分发消息的方法，还包括：若目标用户在预设时间内未拉取所述各消息详情表中各目标消息内容，自动删除该所述各消息详情表。在一种实施方式中，所述第一目标消息和所述第二目标消息包括CDN节点数据刷新消息和/或CDN节点数据配置消息和/或CDN节点数据分发消息和/或CDN节点数据通信消息中的一种或几种。在一种实施方式中，由所述目标用户确定各次时间拉取第一目标消息或第二目标消息的第一预设数量。在一种实施方式中，各次时间拉取所述第一目标消息或所述第二目标消息的所述目标用户为第二预设数量。根据第三方面，本发明实施例还提供一种的定向分发消息的装置，包括如下模块：消息列表生成模块，用于基于目标用户发送的消息请求包，生成各消息详情表，所述各消息详情表包括与之对应的各目标消息标识、各目标消息内容和各分发目标数量；消息标号存放模块，用于将所述各目标消息标识按照先后顺序存放在目标消息队列中；拉取指令获取模块，用于获取目标用户发送的目标拉取指令，所述目标拉取指令包括第一时刻拉取的第一目标消息的第一记录标识，和第二时刻拉取的第二目标消息，所述第一时刻与所述第二时刻相邻；定向发送模块，用于根据所述各目标消息标识、所述各消息详情表和所述目标拉取指令，通过预设确认机制向目标用户发送第一目标消息或第二目标消息。根据第四方面，本发明实施例还提供一种计算机可读存储介质，所述计算机可读存储介质存储有计算机指令，所述计算机指令用于使所述计算机执行第一方面或第一方面任一实施方式中所述的定向分发消息的方法。根据第五方面，本发明实施例还提供一种计算机设备，包括：存储器和处理器，所述存储器和所述处理器之间互相通信连接，所述存储器中存储有计算机指令，所述处理器通过执行所述计算机指令，从而执行第一方面或第一方面任一实施方式所述的定向分发消息的方法。本发明技术方案，具有如下优点本发明公开一种定向分发消息的方法、装置及计算机设备，其中，方法包括如下步骤：基于目标用户发送的消息请求包，生成各消息详情表，各消息详情表包括与之对应的各目标消息标识、各目标消息内容和各分发目标数量；将各目标消息标识按照先后顺序存放在目标消息队列中；获取目标用户发送的目标拉取指令，目标拉取指令包括第一时刻拉取的第一目标消息的第一记录标识，和第二时刻拉取的第二目标消息，第一时刻与第二时刻相邻；根据各目标消息标识、各消息详情表和目标拉取指令，通过预设确认机制向目标用户发送第一目标消息或第二目标消息。本发明可以定向同时向不同批量的目标用户分发目标消息，有利于节约带宽，同时，基于预设确认机制，结合各次时间目标用户携带的目标拉取指令灵活执行不同分发策略，满足了用户的不同需求，也保证了各次时间目标用户拉取目标信息的可达性以及准确性，最终提高了消息分发效率。附图说明为了更清楚地说明本发明具体实施方式或现有技术中的技术方案，下面将对具体实施方式或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施方式，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例中定向分发消息的方法的一个具体示例的流程图；图2为本发明实施例中定向分发消息的机制内部架构的一示意图；图3为本发明实施例中定向分发消息的机制内部架构另一示意图；图4为本发明实施例中定向分发消息的方法的另一个具体示例的流程图；图5为本发明实施例中定向分发消息的机制内部架构另一示意图；图6为本发明实施例中定向分发消息的装置的结构框图；图7为本发明实施例中计算机设备的硬件示意图。具体实施方式下面将结合附图对本发明的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本发明的描述中，需要说明的是，术语“中心”、“上”、“下”、“左”、“右”、“竖直”、“水平”、“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。此外，术语“第一”、“第二”、“第三”仅用于描述目的，而不能理解为指示或暗示相对重要性。在本发明的描述中，需要说明的是，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，还可以是两个元件内部的连通，可以是无线连接，也可以是有线连接。对于本领域的普通技术人员而言，可以具体情况理解上述术语在本发明中的具体含义。此外，下面所描述的本发明不同实施方式中所涉及的技术特征只要彼此之间未构成冲突就可以相互结合。本发明实施例提供一种的定向分发消息的方法，可以应用于物联网中CDN节点消息的定向分发场景，当然还可以是其它物联网应用场景下的消息分发场景。如图1所示，该方法包括如下步骤：步骤S11：基于目标用户发送的消息请求包，生成各消息详情表，各消息详情表包括与之对应的各目标消息标识、各目标消息内容和各分发目标数量。此处的消息请求包如图2所示，通过生产者基于rabbitMQ或者接口消息包接收目标用户发送的消息请求包发送到本发明实施例中消息存储单元中存储，该消息请求包包括目标用户topic列表和具体内容消息，该目标用户topic列表中记录目标用户的信息，该具体内容信息为该目标用户想要获取的具体消息。例如：目标用户topic列表记录张明、刘强、赵晨的信息，则具体内容消息分别为张明、刘强、赵晨想要获取的目标消息。上述中的各消息详情表可用msgTableID表示，代表目标消息的消息详情，各消息详情表包括消息详情与消息实体，如图3所示，各消息详情表分别用msgTableID1、msgTableID2、msgTableID3表示以及还可以继续往后表达成千上百条消息。在图3中，各msgTableID中包括各目标消息内容和各分发目标数量，例如：msgTableID1表示CDN节点数据刷新的一条消息，该条目标消息内容则为该条CDN节点数据刷新的具体文字内容，而各分发目标数量为该条CDN节点数据刷新可以向具体哪些目标用户发送，统计出目标用户的数量。其中，各消息详情表分别对应一个目标消息标识，即ID号，为了确保各消息详情表的唯一性。在图3中，可以看出msgTableID1、msgTableID2、msgTableID3，各消息详情表按序标号。通过步骤S11，可以将成千上百的目标消息按照消息标号排序，以便有序进行消息定向分发，并且将各消息详情表标注对应的目标消息标识使其具备唯一性，以免消息查找错误。步骤S12：将各目标消息标识按照先后顺序存放在目标消息队列中。此处的目标消息队列可以用topic队列表示，在图2或图3中，分别为topic1队列、topic2队列、topic3队列……。因此，在步骤S12中，可以用许多个目标消息队列存放各目标消息标识，每个目标消息队列中存放的各目标消息标识分别按照先后顺序排放，例如：每个目标消息队列可以最大存放的数量为50，则每个目标消息队列均可以存放50个msgTableID，每个目标消息队列存放原则均相同。步骤S12中的目标消息队列可以通过消息分流单元存储。通过步骤S12，只存放各目标消息标识，并不将各目标消息标识对应的目标消息内容和分发目标数量一起存放，显然，避免过多数据占用资源，进而节约能耗，减少数据开销。步骤S13：获取目标用户发送的目标拉取指令，目标拉取指令包括第一时刻拉取的第一目标消息的第一记录标识，和第二时刻拉取的第二目标消息，第一时刻与第二时刻相邻。目标用户发送的目标拉取指令即目标用户计划调用的具体消息和上次时间所拉取的标识信息。在一种实施方式中，由目标用户确定各次时间拉取第一目标消息或第二目标消息的第一预设数量。该第一预设数量可以由目标用户根据自身情况灵活设定，通常情况下，该第一预设数量小于或等于本方法控制机制预先设定的消息数量的上限值。上述中的第一记录标识表示目标用户第一时刻拉取第一目标消息的记录标识。其中，若第二时刻为当前时刻，则第一时刻则为当前时刻的上一时刻，例如：当前时刻用T2表示，即第二时刻，则第一时刻可以用T1表示；例如：当前时刻用T3表示，即第二时刻，则第一时刻可以用T2表示。例如：当前时刻用T4表示，即第二时刻，则第一时刻可以用T3表示；例如：当前时刻T5表示，则第二时刻，则第一时刻可以用T4表示。总而言之，第一时刻和第二时刻可以表示相邻的任两个时刻。因此，本发明实施例中的定向分发消息的方法，可以在不同时间多次向目标用户定向分发目标消息。在一种具体实施方式中，由各次时间拉取第一目标消息或第二目标消息的目标用户为第二预设数量。具体在图2中可以看出看出，存在多个目标用户，即图2中多个消息消费者，可以看出多个消息消费者同时拉取多条第一目标消息或第二目标消息。因此，本发明实施例中的定向分发消息的方法，支持同时向批量目标用户分发目标消息，可以节约带宽，第二预设数量根据实际情况灵活设置，根据可支持各次时间的用户数量而定，进而满足批量用户需求。通过上述步骤S13，在目标拉取指令中加载第一时刻拉取的第一目标消息的第一记录标识，可以基于第一记录标识确认是否给目标用户分发第二时刻即当前时刻所要拉取的第二目标消息，有利于保证上一时刻接收目标消息的可达性。步骤S14：根据各目标消息标识、各消息详情表和目标拉取指令，通过预设确认机制向目标用户发送第一目标消息或第二目标消息。此处的预设确认机制包括两种不同的分发情形，均是在各目标消息标识、各消息详情表和目标拉取指令的基础上执行，如下陈述，即如图4所示。在一具体实施方式中，在图4中，上述步骤S14，根据各目标消息标识、各消息详情表和目标拉取指令，通过预设确认机制向目标用户发送第一目标消息或第二目标消息，包括:步骤S41：确认是否生成第一时刻的第一目标缓冲列表。此处，第一时刻的第一目标缓冲列表，即当前时刻的上一时刻的目标缓冲列表，在图3中，目标缓冲列表可以用topic1缓存表，topic2缓存表、topic3缓存表表示。若第二时刻用T2表示，即当前时刻，则第一时刻用T1表示，第一目标缓冲列表用topic1缓冲表表示；若第二时刻用T3表示，即当前时刻，则第一时刻用T2表示，则第一目标缓冲列表用topic2表示，同理，以此类推，在此不再赘述。此处的topic1缓冲表、topic2缓冲表以及topic3缓冲表通过消息存储单元存储。步骤S42：当没有生成第一时刻的第一目标缓冲列表，通过目标消息队列中各目标消息标识从各消息详情表中查找第二目标消息。例如：目标用户初次发送目标拉取指令时，就没有生成第一时刻的第一目标缓冲列表，此时，第一时刻的第一目标消息的第一记录标识会记录目标用户初次拉取目标消息。因此，在步骤S52，由于尚未形成目标缓冲列表，在图2中，消息存储单元尚未形成目标缓冲列表，可以从topic1队列或topic2队列或topic3队列中，通过各目标消息标识msgTableID1、msgTableID2、msgTableID3，从各消息详情表中查找相应的第二目标消息，即当前时刻目标用户所需拉取的目标消息。在此处，若topic队列中存放的各目标消息号不够目标用户需要的N条第二目标消息，则将N条目标消息号对应的各目标消息内容全部返回。步骤S43：生成第二时刻的第二目标缓冲列表，第二目标缓冲列表包括第二记录标识和第二目标消息对应的各目标消息标识。在上述步骤S42的基础上，还需生成第二时刻的第二目标缓冲列表，即当前时刻的目标缓冲列表，该目标缓冲列表包括当前时刻对应的记录标识和目标消息标识。例如：当前时刻为T2，则第二记录标识为T2，目标消息标识为msgTableID2，将T2和msgTableID2一起存储在topic2缓冲表中；例如：当前时刻为T3，则第二记录标识为T3，目标消息标识为msgTableID3，将T3和msgTableID3一起存储在topic3缓冲表中.步骤S44：将第二目标消息和第二记录标识发送给目标用户。当前时刻为T2，第二目标消息为msgTableID2消息详情表中的消息内容和第二记录标识T2包装好数据一起发送给目标用户。通过上述步骤S41-步骤S44，当目标用户初次拉取目标消息时，尚未形成上一时刻的目标缓冲列表，可以基于目标消息队列中存放的各消息标号从各消息详情表中查找相应的目标消息内容，进而实现定向对批量目标用户分发目标消息，同时，只需基于目标消息队列查找目标消息标识调取相应目标消息，进而减少了带宽浪费，节约数据开销，提高了消息分发效率。在另一具体实施方式中，在图4中，上述步骤S14，根据各目标消息标识、各消息详情表和目标拉取指令，通过预设确认机制向目标用户发送第一目标消息或第二目标消息，当生成第一时刻的第一目标缓冲列表，通过如下步骤执行：步骤S45：确认第一目标缓冲列表中第一记录标识与目标拉取指令中第一记录标识的信息是否一致。例如：第一目标缓冲列表中第一记录标识为T1，目标拉取指令中第一记录标识为T1，为了区分，第一目标缓冲列表中第一记录标识用T1＇表示，确认T1与T1＇的信息是否一致；例如：第一目标缓冲列表中第一记录标识T2，目标拉取指令中第一记录标识为T2，为了区分，第一目标缓冲列表中第一记录标识用T2＇表示，确认T2与T2＇的信息是否一致；例如：目标拉取指令中第一记录标识为T3，为了区分，第一目标缓冲列表中第一记录标识用T3＇表示，确认T3与T3＇的信息是否一致.。通过匹配T1与T1＇或T2与T2＇或T3与T3＇，保证了信息确认的准确性。步骤S46：基于第一目标缓冲列表中第一目标消息对应的各目标消息标识，对各消息详情表中分发目标数量按照递减方式计数直到分发目标数量为零时，删除第一目标消息对应的各消息详情表，当完成递减方式计数操作后再删除第一目标缓冲列表。若信息一致，意味着目标用户成功消费了上一时刻的目标消息，即消息成功抵达，此时，可以给本次前来的目标用户分发当前时刻所要拉取的目标消息。在图3中，例如：第一目标缓冲列表中可以为topic1缓冲表、topic2缓冲表、topic3缓冲表表示，分别基于topic1缓冲表、topic2缓冲表、topic3缓冲表中存放的各消息标号中，从各消息详情表中的目标消息分发数量中按照逐次递减方式计数，直到各消息详情表中的分发目标数量为零时，删除上一时刻的第一目标消息对应的各消息详情表，当完成递减方式计数操作后再删除第一目标缓冲列表。由于动作延时，需要间隔一定时间相继删除各消息详情表及其对应的第一目标缓冲列表。因为，上一时刻的目标消息已被目标用户成功消费，即时相继删除相应的各消息详情表、目标缓存列表，避免上一时刻相关的数据占用内存，有利于增强带宽，提高运行速度。步骤S47：基于目标消息队列中第二目标消息对应的各目标消息标识，从各消息详情表中查找第二目标消息。在上述步骤S46的基础上，基于目标消息队列中的第二目标消息的各目标消息标识，即当前时刻的目标消息的各目标消息标识，从各消息详情表查找第二目标消息，按照一一对应关系，相应查找目标用户所需拉取的目标消息，保证了目标消息分发的准确性。在此处，若topic队列中存放的各目标消息号不够目标用户需要的N条第二目标消息，则将N条目标消息号对应的各目标消息内容全部返回。步骤S48：生成第二时刻的第二目标缓冲列表，第二目标缓冲列表包括第二记录标识和第二目标消息对应的各目标消息标识。生成第二时刻的第二目标缓冲列表，即当前时刻的topic缓冲表，为了确保用户在下一时刻拉取目标消息。步骤S49：将第二目标消息和第二记录标识发送给目标用户。将当前时刻的第二目标消息和第二记录标识发送给目标用户，确保用户在消费本次当前时刻的目标消息的同时，以便下次前来拉取下一时刻的目标消息。步骤S50：若信息不一致，基于第一目标缓冲列表中第一目标消息对应的各目标消息标识，从各消息详情表中查找第一目标消息。步骤S51：将第一目标消息和第一记录标识发送给目标用户。例如：第一目标缓冲列表中第一记录标识为T1，目标拉取指令中第一记录标识为T1，为了区分，第一目标缓冲列表中第一记录标识用T1＇表示，确认T1与T1＇的信息是否一致，当T1与T1＇的信息不一致，说明目标用户没有成功消费上一时刻的目标消息，即该目标消息没有被目标用户成功接收，当前时刻仍需向本次的目标用户发送上一时刻的目标消息和第一记录标识。若当T1与T1＇的信息一直不一致，那一直向目标用户发送上一时刻的目标消息和第一记录标识，直到目标用户成功接收第一目标消息为止。因此，可以保证目标消息实时被目标用户成功消费。在一种实施方式中，本发明实施例中的定向分发消息的方法，还包括：若目标用户在预设时间内未拉取各消息详情表中各目标消息内容，自动删除该各消息详情表。该预设时间可以根据实际情况灵活设置。例如：目标用户很长时间都没有拉取各消息详情表中各目标消息内容，说明该消息内容已没有任何目标用户关注，可以即时删除该消息详情表，以免占用内存空间，进而节约数据开销。如图5所示，为本发明实施例中的定向分发消息的方法的各次时间目标用户拉取目标消息的动态示意图。在一种实施方式中，本发明实施例中的定向分发消息的方法，第一目标消息和第二目标消息包括CDN节点数据刷新消息和/或CDN节点数据配置消息和/或CDN节点数据分发消息和/或CDN节点数据通信消息中的一种或几种。例如：目标用户在各次时间拉取的第一目标消息或第二目标消息可以是互联网消息中的任何一种或几种，即支持向批量目标用户分发不同类型的消息任务。本发明实施例的目标用户代表在各次时间前来拉取的批量目标用户，相邻任两时刻的第一目标消息和第二目标消息为第一预设数量。因此，本发明实施例通过执行上述步骤，可以定向同时向不同批量的目标用户分发目标消息，有利于节约带宽，同时，基于预设确认机制，结合各次时间目标用户携带的目标拉取指令灵活执行不同分发策略，满足了用户的不同需求，也保证了各次时间目标用户拉取目标信息的可达性以及准确性，最终提高了消息分发效率。基于相同构思，如图6所示，本发明实施例还提供一种的定向分发消息的装置，包括如下模块：消息列表生成模块61，用于基于目标用户发送的消息请求包，生成各消息详情表，各消息详情表包括与之对应的各目标消息标识、各目标消息内容和各分发目标数量；消息标号存放模块62，用于将各目标消息标识按照先后顺序存放在目标消息队列中；拉取指令获取模块63，用于获取目标用户发送的目标拉取指令，目标拉取指令包括第一时刻拉取的第一目标消息的第一记录标识，和第二时刻拉取的第二目标消息，第一时刻与第二时刻相邻；定向发送模块64，用于根据各目标消息标识、各消息详情表和目标拉取指令，通过预设确认机制向目标用户发送第一目标消息或第二目标消息。在一种实施方式中，定向发送模块64，包括:第一确认子模块，用于确认是否生成第一时刻的第一目标缓冲列表；第一查找子模块，用于当没有生成第一时刻的第一目标缓冲列表，通过目标消息队列中各目标消息标识从各消息详情表中查找第二目标消息；第一生成子模块，用于生成第二时刻的第二目标缓冲列表，第二目标缓冲列表包括第二记录标识和第二目标消息对应的各目标消息标识；将第二目标消息和第二记录标识发送给目标用户。在一种实施方式中，本发明实施例中的定向分发消息的装置，当生成第一时刻的第一目标缓冲列表，通过如下模块执行：第二确认子模块，用于确认第一目标缓冲列表中第一记录标识与目标拉取指令中第一记录标识的信息是否一致；计数删除子模块，用于若信息一致，基于第一目标缓冲列表中第一目标消息对应的各目标消息标识，对各消息详情表中分发目标数量按照递减方式计数直到分发目标数量为零时，删除第一目标消息对应的各消息详情表，当完成递减方式计数操作后再删除第一目标缓冲列表；第二查找子模块，用于基于目标消息队列中第二目标消息对应的各目标消息标识，从各消息详情表中查找第二目标消息；第二生成子模块，用于生成第二时刻的第二目标缓冲列表，第二目标缓冲列表包括第二记录标识和第二目标消息对应的各目标消息标识；第一发送子模块，用于将第二目标消息和第二记录标识发送给目标用户；第三查找子模块，用于若信息不一致，基于第一目标缓冲列表中第一目标消息对应的各目标消息标识，从各消息详情表中查找第一目标消息；第二发送子模块，用于将第一目标消息和第一记录标识发送给目标用户。在一种实施方式中，本发明实施例中的定向分发消息的装置，还包括：信息清除模块，用于若目标用户在预设时间内未拉取各消息详情表中各目标消息内容，自动删除该各消息详情表。在一种实施方式中，本发明实施例中的定向分发消息的装置，第一目标消息和第二目标消息包括CDN节点数据刷新消息和/或CDN节点数据配置消息和/或CDN节点数据分发消息和/或CDN节点数据通信消息中的一种或几种。在一种实施方式中，本发明实施例的定向分发消息的装置，由目标用户确定各次时间拉取第一目标消息或第二目标消息的第一预设数量。本发明实施例中的定向分发消息的装置，各次时间拉取第一目标消息或第二目标消息的目标用户为第二预设数量。基于相同构思，本发明实施例还提供本发明实施例还提供了一种计算机设备，如图7所示，该计算机设备可以包括处理器71、存储器72，其中处理器71、存储器72可以通过总线或者其他方式连接，图7中以通过总线连接为例。处理器71可以为中央处理器。处理器71还可以为其他通用处理器、数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等芯片，或者上述各类芯片的组合。存储器72作为一种非暂态计算机可读存储介质，可用于存储非暂态软件程序、非暂态计算机可执行程序以及模块。处理器71通过运行存储在存储器72中的非暂态软件程序、指令以及模块，从而执行处理器的各种功能应用以及数据处理，即实现上述实施例中的定向分发消息的方法。存储器72可以包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需要的应用程序；存储数据区可存储处理器71所创建的数据等。此外，存储器72可以包括高速随机存取存储器，还可以包括非暂态存储器，例如至少一个磁盘存储器件、闪存器件、或其他非暂态固态存储器件。在一些实施例中，存储器72可选包括相对于处理器71远程设置的存储器，这些远程存储器可以通过网络连接至处理器71。上述网络的实例包括但不限于电网、互联网、企业内部网、局域网、移动通信网及其组合。所述一个或者多个模块存储在所述存储器72中，当被所述处理器71执行时，执行附图所示实施例中的定向分发消息的方法。上述计算机设备具体细节可以对应参阅附图所示的实施例中对应的相关描述和效果进行理解，此处不再赘述。本领域技术人员可以理解，实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的程序可存储于一计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，所述存储介质可为磁碟、光盘、只读存储记忆体、随机存储记忆体、快闪存储器、硬盘或固态硬盘等；所述存储介质还可以包括上述种类的存储器的组合。显然，上述实施例仅仅是为清楚地说明所作的举例，而并非对实施方式的限定。对于所属领域的普通技术人员来说，在上述说明的基础上还可以做出其它不同形式的变化或变动。这里无需也无法对所有的实施方式予以穷举。而由此所引伸出的显而易见的变化或变动仍处于本发明创造的保护范围之中。
