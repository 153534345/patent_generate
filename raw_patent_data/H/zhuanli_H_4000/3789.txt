标题title
一种基于课后托管的通讯方法、装置、设备及存储介质
摘要abst
本发明公开了一种基于课后托管的通信方法、装置、设备及存储介质，该方法包括：分别与表示摄像头的第一用户、身份为家长的第二用户建立好友关系；当预约课后托管的课程时，登记负责课程所处场所的第一用户，由第二用户申报参加课程的、身份为学生的第三用户；当开展课后托管的课程时，接收负责课程所处场所的第一用户发送的、用于记录课程的进度的第一即时通讯消息；对第一即时通讯消息执行规范化处理，得到第二即时通讯消息；将第二即时通讯消息发送至第二用户，以通知第三用户参与课程的进度。家长可迅速了解课后托管的情况，可以避免家长在接学生放学的过程中与不同的教师通讯的频次，大大提升了效率。
权利要求书clms
1.一种基于课后托管的通讯方法，其特征在于，应用于即时通讯系统中的虚拟机器人，所述方法包括：分别与表示摄像头的第一用户、身份为家长的第二用户建立好友关系；当预约课后托管的课程时，登记负责所述课程所处场所的所述第一用户，由所述第二用户申报参加所述课程的、身份为学生的第三用户；当开展课后托管的课程时，接收负责所述课程所处场所的所述第一用户发送的、用于记录所述课程的进度的第一即时通讯消息；对所述第一即时通讯消息执行规范化处理，得到第二即时通讯消息；将所述第二即时通讯消息发送至所述第二用户，以通知所述第三用户参与所述课程的进度。2.根据权利要求1所述的方法，其特征在于，所述对所述第一即时通讯消息执行规范化处理，得到第二即时通讯消息，包括：从所述第一即时通讯消息中提取由所述摄像头采集的第一视频数据与音频数据；在所述第一视频数据执行人脸识别，得到多个第一人脸数据；对所述音频数据执行语音识别，得到文本信息；若在第一时刻中所述第一人脸数据包含负责所述课程的、身份为教师的第四用户，且所述文本信息中包含表示上课的关键词，则生成表示所述课程开始的第二即时通讯消息；若在第二时刻中所述第一人脸数据未包含所述第四用户，且所述文本信息中包含表示下课的关键词，则生成表示所述课程结束的第二即时通讯消息，所述第二时刻晚于所述第一时刻。3.根据权利要求2所述的方法，其特征在于，所述对所述第一即时通讯消息执行规范化处理，得到第二即时通讯消息，还包括：若所述第一人脸数据中包含所述第三用户，则生成表示所述第三用户参与所述课程的第二即时通讯消息；在所述第一视频数据中提取具有所述第三用户的所述第一人脸数据的原始图像数据；在所述原始图像数据中对除所述第三用户的所述第一人脸数据之外的其他所述第一人脸数据进行模糊处理，得到目标图像数据；将所述目标图像数据封装至第二即时通讯消息中。4.根据权利要求3所述的方法，其特征在于，所述在所述第一视频数据中提取具有所述第三用户的所述第一人脸数据的原始图像数据，包括：在所述第一视频数据的各帧原始图像数据中统计表示所述第三用户的所述第一人脸数据的第一面积；在所述第一视频数据中标记所述第一面积最大的k帧所述原始图像数据；对所述第一视频数据添加窗口，并滑动所述窗口；若所述窗口具有至少两帧所述原始图像数据，则将除首帧所述原始图像数据之外的其他所述原始图像数据去除标记；在所述第一视频数据中提取剩余标记的所述原始图像数据。5.根据权利要求1-4中任一项所述的方法，其特征在于，还包括：接收负责接送区的所述第一用户发送的、用于表示接送所述第三用户的进度的第三即时通讯消息；对所述第三即时通讯消息执行规范化处理，得到第四即时通讯消息；将所述第四即时通讯消息发送至所述第二用户，以通知接送所述第三用户的进度。6.根据权利要求5所述的方法，其特征在于，所述接送区包括等待区、目标线；所述对所述第三即时通讯消息执行规范化处理，得到第四即时通讯消息，包括：从所述第三即时通讯消息中提取由所述摄像头采集的第二视频数据；在所述第二视频数据中识别位于校园内的等待区、位于校门口的目标线；在所述第二视频数据检测多个第二人脸数据与骨骼关键点；若在第三时刻中所述第二人脸数据包含所述第三用户，且所述第三用户对应的所述骨骼关键点投影至所述等待区内，则生成表示所述第三用户等待接送的第四即时通讯消息；若在第四时刻中所述第二人脸数据包含所述第三用户，且所述第三用户对应的所述骨骼关键点跨越所述目标线，则生成表示所述第三用户已接送的第四即时通讯消息，所述第四时刻晚于所述第三时刻。7.根据权利要求6所述的方法，其特征在于，所述在所述第二视频数据中识别位于校园内的等待区、位于校门口的目标线，包括：在所述第二视频数据中提取指定的色彩分量；对所述色彩分量执行二值化处理，得到多个候选区域数据；统计所述候选区域的第二面积、长度；若所述第二面积大于或等于第一几何阈值，则确定所述候选区域为表示位于校园内的等待区的第一目标区域；若所述第二面积大于或等于第二几何阈值、且小于所述第一几何阈值，所述长度大于或等于第三几何阈值，则确定所述候选区域为表示位于校门口的目标线的第二目标区域；校对所述第一目标区域与所述第二目标区域之间的空间关系；若空间关系为所述第二目标区域与所述第一目标区域之间的差距大于第四几何阈值，则确定所述第一目标区域与所述第二目标区域均有效。8.一种基于课后托管的通讯装置，其特征在于，应用于即时通讯系统中的虚拟机器人，所述装置包括：好友建立模块，用于分别与表示摄像头的第一用户、身份为家长的第二用户建立好友关系；托管预约模块，用于当预约课后托管的课程时，登记负责所述课程所处场所的所述第一用户，由所述第二用户申报参加所述课程的、身份为学生的第三用户；第一消息接收模块，用于当开展课后托管的课程时，接收负责所述课程所处场所的所述第一用户发送的、用于记录所述课程的进度的第一即时通讯消息；第二消息接收模块，用于对所述第一即时通讯消息执行规范化处理，得到第二即时通讯消息；第二消息发送模块，用于将所述第二即时通讯消息发送至所述第二用户，以通知所述第三用户参与所述课程的进度。9.一种电子设备，其特征在于，所述电子设备包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-7中任一项所述的基于课后托管的通讯方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机程序，所述计算机程序用于使处理器执行时实现权利要求1-7中任一项所述的基于课后托管的通讯方法。
说明书desc
技术领域本发明涉及教育的技术领域，尤其涉及一种基于课后托管的通讯方法、装置、设备及存储介质。背景技术由于中小学、幼儿园普遍在下午3点半前后放学，家长因为工作等事情容易陷入接孩子放学的难题，因此，一些学校实行课后托管，为学生在放学后提供体育、文艺、科普等内容的托管服务。由于很多课后托管的课程是临时组班，管理课后托管的课程的教师容易出现变动，家长下班的情况也并不一致，因而家长在接学生放学的过程中，家长往往频繁与不同的教师通讯，从而了解课后托管的情况，效率较低。发明内容本发明提供了一种基于课后托管的通讯方法、装置、设备及存储介质，以解决提高课后托管的通讯效率。根据本发明的一方面，提供了一种基于课后托管的通讯方法，应用于即时通讯系统中的虚拟机器人，所述方法包括：分别与表示摄像头的第一用户、身份为家长的第二用户建立好友关系；当预约课后托管的课程时，登记负责所述课程所处场所的所述第一用户，由所述第二用户申报参加所述课程的、身份为学生的第三用户；当开展课后托管的课程时，接收负责所述课程所处场所的所述第一用户发送的、用于记录所述课程的进度的第一即时通讯消息；对所述第一即时通讯消息执行规范化处理，得到第二即时通讯消息；将所述第二即时通讯消息发送至所述第二用户，以通知所述第三用户参与所述课程的进度。可选地，所述对所述第一即时通讯消息执行规范化处理，得到第二即时通讯消息，包括：从所述第一即时通讯消息中提取由所述摄像头采集的第一视频数据与音频数据；在所述第一视频数据执行人脸识别，得到多个第一人脸数据；对所述音频数据执行语音识别，得到文本信息；若在第一时刻中所述第一人脸数据包含负责所述课程的、身份为教师的第四用户，且所述文本信息中包含表示上课的关键词，则生成表示所述课程开始的第二即时通讯消息；若在第二时刻中所述第一人脸数据未包含所述第四用户，且所述文本信息中包含表示下课的关键词，则生成表示所述课程结束的第二即时通讯消息，所述第二时刻晚于所述第一时刻。可选地，所述对所述第一即时通讯消息执行规范化处理，得到第二即时通讯消息，还包括：若所述第一人脸数据中包含所述第三用户，则生成表示所述第三用户参与所述课程的第二即时通讯消息；在所述第一视频数据中提取具有所述第三用户的所述第一人脸数据的原始图像数据；在所述原始图像数据中对除所述第三用户的所述第一人脸数据之外的其他所述第一人脸数据进行模糊处理，得到目标图像数据；将所述目标图像数据封装至第二即时通讯消息中。可选地，所述在所述第一视频数据中提取具有所述第三用户的所述第一人脸数据的原始图像数据，包括：在所述第一视频数据的各帧原始图像数据中统计表示所述第三用户的所述第一人脸数据的第一面积；在所述第一视频数据中标记所述第一面积最大的k帧所述原始图像数据；对所述第一视频数据添加窗口，并滑动所述窗口；若所述窗口具有至少两帧所述原始图像数据，则将除首帧所述原始图像数据之外的其他所述原始图像数据去除标记；在所述第一视频数据中提取剩余标记的所述原始图像数据。可选地，还包括：接收负责接送区的所述第一用户发送的、用于表示接送所述第三用户的进度的第三即时通讯消息；对所述第三即时通讯消息执行规范化处理，得到第四即时通讯消息；将所述第四即时通讯消息发送至所述第二用户，以通知接送所述第三用户的进度。可选地，所述接送区包括等待区、目标线；所述对所述第三即时通讯消息执行规范化处理，得到第四即时通讯消息，包括：从所述第三即时通讯消息中提取由所述摄像头采集的第二视频数据；在所述第二视频数据中识别位于校园内的等待区、位于校门口的目标线；在所述第二视频数据检测多个第二人脸数据与骨骼关键点；若在第三时刻中所述第二人脸数据包含所述第三用户，且所述第三用户对应的所述骨骼关键点投影至所述等待区内，则生成表示所述第三用户等待接送的第四即时通讯消息；若在第四时刻中所述第二人脸数据包含所述第三用户，且所述第三用户对应的所述骨骼关键点跨越所述目标线，则生成表示所述第三用户已接送的第四即时通讯消息，所述第四时刻晚于所述第三时刻。可选地，所述在所述第二视频数据中识别位于校园内的等待区、位于校门口的目标线，包括：在所述第二视频数据中提取指定的色彩分量；对所述色彩分量执行二值化处理，得到多个候选区域数据；统计所述候选区域的第二面积、长度；若所述第二面积大于或等于第一几何阈值，则确定所述候选区域为表示位于校园内的等待区的第一目标区域；若所述第二面积大于或等于第二几何阈值、且小于所述第一几何阈值，所述长度大于或等于第三几何阈值，则确定所述候选区域为表示位于校门口的目标线的第二目标区域；校对所述第一目标区域与所述第二目标区域之间的空间关系；若空间关系为所述第二目标区域与所述第一目标区域之间的差距大于第四几何阈值，则确定所述第一目标区域与所述第二目标区域均有效。根据本发明的另一方面，提供了一种基于课后托管的通讯装置，应用于即时通讯系统中的虚拟机器人，所述装置包括：好友建立模块，用于分别与表示摄像头的第一用户、身份为家长的第二用户建立好友关系；托管预约模块，用于当预约课后托管的课程时，登记负责所述课程所处场所的所述第一用户，由所述第二用户申报参加所述课程的、身份为学生的第三用户；第一消息接收模块，用于当开展课后托管的课程时，接收负责所述课程所处场所的所述第一用户发送的、用于记录所述课程的进度的第一即时通讯消息；第二消息接收模块，用于对所述第一即时通讯消息执行规范化处理，得到第二即时通讯消息；第二消息发送模块，用于将所述第二即时通讯消息发送至所述第二用户，以通知所述第三用户参与所述课程的进度。可选地，所述第二消息接收模块还用于：从所述第一即时通讯消息中提取由所述摄像头采集的第一视频数据与音频数据；在所述第一视频数据执行人脸识别，得到多个第一人脸数据；对所述音频数据执行语音识别，得到文本信息；若在第一时刻中所述第一人脸数据包含负责所述课程的、身份为教师的第四用户，且所述文本信息中包含表示上课的关键词，则生成表示所述课程开始的第二即时通讯消息；若在第二时刻中所述第一人脸数据未包含所述第四用户，且所述文本信息中包含表示下课的关键词，则生成表示所述课程结束的第二即时通讯消息，所述第二时刻晚于所述第一时刻。可选地，所述第二消息接收模块还用于：若所述第一人脸数据中包含所述第三用户，则生成表示所述第三用户参与所述课程的第二即时通讯消息；在所述第一视频数据中提取具有所述第三用户的所述第一人脸数据的原始图像数据；在所述原始图像数据中对除所述第三用户的所述第一人脸数据之外的其他所述第一人脸数据进行模糊处理，得到目标图像数据；将所述目标图像数据封装至第二即时通讯消息中。可选地，所述第二消息接收模块还用于：在所述第一视频数据的各帧原始图像数据中统计表示所述第三用户的所述第一人脸数据的第一面积；在所述第一视频数据中标记所述第一面积最大的k帧所述原始图像数据；对所述第一视频数据添加窗口，并滑动所述窗口；若所述窗口具有至少两帧所述原始图像数据，则将除首帧所述原始图像数据之外的其他所述原始图像数据去除标记；在所述第一视频数据中提取剩余标记的所述原始图像数据。可选地，还包括：第三消息接收模块，用于接收负责接送区的所述第一用户发送的、用于表示接送所述第三用户的进度的第三即时通讯消息；第四消息生成模块，用于对所述第三即时通讯消息执行规范化处理，得到第四即时通讯消息；第四消息发送模块，用于将所述第四即时通讯消息发送至所述第二用户，以通知接送所述第三用户的进度。可选地，所述第四消息生成模块还用于：从所述第三即时通讯消息中提取由所述摄像头采集的第二视频数据；在所述第二视频数据中识别位于校园内的等待区、位于校门口的目标线；在所述第二视频数据检测多个第二人脸数据与骨骼关键点；若在第三时刻中所述第二人脸数据包含所述第三用户，且所述第三用户对应的所述骨骼关键点投影至所述等待区内，则生成表示所述第三用户等待接送的第四即时通讯消息；若在第四时刻中所述第二人脸数据包含所述第三用户，且所述第三用户对应的所述骨骼关键点跨越所述目标线，则生成表示所述第三用户已接送的第四即时通讯消息，所述第四时刻晚于所述第三时刻。可选地，所述第四消息生成模块还用于：在所述第二视频数据中提取指定的色彩分量；对所述色彩分量执行二值化处理，得到多个候选区域数据；统计所述候选区域的第二面积、长度；若所述第二面积大于或等于第一几何阈值，则确定所述候选区域为表示位于校园内的等待区的第一目标区域；若所述第二面积大于或等于第二几何阈值、且小于所述第一几何阈值，所述长度大于或等于第三几何阈值，则确定所述候选区域为表示位于校门口的目标线的第二目标区域；校对所述第一目标区域与所述第二目标区域之间的空间关系；若空间关系为所述第二目标区域与所述第一目标区域之间的差距大于第四几何阈值，则确定所述第一目标区域与所述第二目标区域均有效。根据本发明的另一方面，提供了一种电子设备，所述电子设备包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够执行本发明任一实施例所述的基于课后托管的通讯方法。根据本发明的另一方面，提供了一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序用于使处理器执行时实现本发明任一实施例所述的基于课后托管的通讯方法。本实施例应用于即时通讯系统中的虚拟机器人，分别与表示摄像头的第一用户、身份为家长的第二用户建立好友关系；当预约课后托管的课程时，登记负责课程所处场所的第一用户，由第二用户申报参加课程的、身份为学生的第三用户；当开展课后托管的课程时，接收负责课程所处场所的第一用户发送的、用于记录课程的进度的第一即时通讯消息；对第一即时通讯消息执行规范化处理，得到第二即时通讯消息；将第二即时通讯消息发送至第二用户，以通知第三用户参与课程的进度。虚拟机器人根据摄像头采集的实际场景检测学生参与课后托管的主要节点，主动通过即时通讯系统通知家长，家长可迅速了解课后托管的情况，可以避免家长在接学生放学的过程中与不同的教师通讯的频次，大大提升了效率。应当理解，本部分所描述的内容并非旨在标识本发明的实施例的关键或重要特征，也不用于限制本发明的范围。本发明的其它特征将通过以下的说明书而变得容易理解。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是根据本发明实施例一提供的一种基于课后托管的通讯方法的流程图；图2是根据本发明实施例二提供的一种基于课后托管的通讯方法的流程图；图3是根据本发明实施例三提供的一种基于课后托管的通讯装置的结构示意图；图4是实现本发明实施例的基于课后托管的通讯方法的电子设备的结构示意图。具体实施方式为了使本技术领域的人员更好地理解本发明方案，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分的实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本发明保护的范围。需要说明的是，本发明的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本发明的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。实施例一图1为本发明实施例一提供的一种基于课后托管的通讯方法的流程图，该方法可以由基于课后托管的通讯装置来执行，该基于课后托管的通讯装置可以采用硬件和/或软件的形式实现，该基于课后托管的通讯装置可配置于电子设备中。本实施例可以应用于即时通讯系统中的虚拟机器人，该虚拟机器人可至少向用户提供辅助课后托管的预约、进度提示等服务，方便家长接学生放学。在即时通讯系统中，可向虚拟机器人分配账号、密码等信息，视为用户，并对其进行身份认证，由学校的工作人员负责维护虚拟机器人的代码。如图1所示，该方法包括：步骤101、分别与表示摄像头的第一用户、身份为家长的第二用户建立好友关系。在本实施例中，在学校的各个场所内部署有摄像头，在即时通讯系统中，可对该摄像头分配账号、密码等信息，视为第一用户，在定向邀请等情况下，虚拟机器人可添加该第一用户为好友，从而与第一用户建立好友关系。此外，身份为家长的第二用户可在即时通讯系统中注册，并通过定向邀请等方式添加虚拟机器人为好友，从而与虚拟机器人建立好友关系。步骤102、当预约课后托管的课程时，登记负责课程所处场所的第一用户，由第二用户申报参加课程的、身份为学生的第三用户。在开展课后托管的课程之前，通常对课后托管的各项事务进行预约。一方面，规划不同课后托管的场所，学校的工作人员寻找负责该场所的摄像头，从而登记该摄像头对应的第一用户。另一方面，可以针对不同课后托管的课程创建报名表格，以即时通讯消息的方式推送至第二用户，第二用户在报名表格中登记身份为学生的第三用户并缴费，从而申请参加该课后托管的课程，经学校的工作人员审核之后，确定该第三用户申请参加课后托管的课程成功。一般情况下，该家长为该学生的监护人，如父亲、母亲、爷爷、奶奶等。步骤103、当开展课后托管的课程时，接收负责课程所处场所的第一用户发送的、用于记录课程的进度的第一即时通讯消息。在开展课后托管时，学生到达指定的场所，在教师的指引下参加相应的课程。此时，不同的摄像头会在其所处场所采集视频数据、音频数据，将该视频数据、音频数据封装至第一即时通讯消息中，并通过即时通讯系统传输至虚拟机器人。视频数据、音频数据的内容均为学生参与课后托管的课程，因而第一即时通讯消息记录了课程的进度。由于视频数据、音频数据的数据量均较大，为了降低带宽的占用，减少虚拟机器人的处理量，摄像头并非持续以流的形式传输视频数据、音频数据，而是间歇性传输视频数据、音频数据，即间歇性传输第一即时通讯消息。进一步而言，在课后托管的课程开始阶段、结束阶段均以第一频率传输第一即时通讯消息，在课后托管的课程中间阶段均以第二频率传输第一即时通讯消息，其中，第一频率高于第二频率。步骤104、对第一即时通讯消息执行规范化处理，得到第二即时通讯消息。摄像头生成的第一即时通讯消息中主要包含视频数据、音频数据，虽然视频数据、音频数据可体现学生参与课后托管的课程的进度，但是原始的视频数据、音频数据并不符合家长的阅读习惯，同时，原始的视频数据、音频数据容易泄露学生的隐私，因而，对第一即时通讯消息执行规范化处理，得到符合家长的阅读习惯的第二即时通讯消息，保护学生的隐私。在本发明的一个实施例中，步骤104可以包括如下步骤：步骤10411、从第一即时通讯消息中提取由摄像头采集的第一视频数据与音频数据。虚拟机器人解析第一即时通讯消息，从中提取由摄像头采集的视频数据与音频数据，为便于区分，在学生开展课后托管的场所中提取的视频数据可记为第一视频数据。步骤10412、在第一视频数据执行人脸识别，得到多个第一人脸数据。在各个用户注册使用课后托管的服务时，可注册其人脸数据。针对第一视频数据，可以间隔预定的时长抽取原始图像数据，从而降低运算量，通过几何特征、初级神经网络、深度学习等方法在这些原始图像数据执行人脸识别，得到多个标记身份的人脸数据，记为第一人脸数据。步骤10413、对音频数据执行语音识别，得到文本信息。针对音频数据，可以对音频数据执行语音识别，得到文本信息。所谓语音识别，就是将一段语音数据转换成相对应的文本信息，主要包含特征提取、声学模型、语言模型以及字典与解码四大部分，此外为了更有效地提取特征往往还需要对所采集到的声音信号进行滤波、分帧等音频数据预处理工作，将需要分析的音频信号从原始的音频数据中合适地提取出来；特征提取工作将音频数据从时域转换到频域，为声学模型提供合适的特征向量；声学模型中再根据声学特性计算每一个特征向量在声学特征上的得分；而语言模型则根据语言学相关的理论，计算该声音信号对应可能词组序列的概率；最后根据已有的字典，对词组序列进行解码，得到最后可能的文本表示。步骤10414、若在第一时刻中第一人脸数据包含负责课程的、身份为教师的第四用户，且文本信息中包含表示上课的关键词，则生成表示课程开始的第二即时通讯消息。虚拟机器人预先收集表示上课的关键词，如上课、课堂开始等，针对开始阶段分钟)的第一即时通讯消息，可遍历第一人脸数据的身份、将表示上课的关键词与文本信息进行匹配。如果在第一时刻中第一人脸数据包含负责课程的、身份为教师的第四用户，且文本信息中包含表示上课的关键词，则生成表示课后托管的课程开始的第二即时通讯消息。此时，课后托管的课程的开始阶段结束，摄像头可降低采集视频数据、音频数据的频率。步骤10415、若在第二时刻中第一人脸数据未包含第四用户，且文本信息中包含表示下课的关键词，则生成表示课程结束的第二即时通讯消息。虚拟机器人预先收集表示下课的关键词，如下课、课堂结束等，针对结束阶段分钟)的第一即时通讯消息，可遍历第一人脸数据的身份、将表示下课的关键词与文本信息进行匹配。若在第二时刻中第一人脸数据未包含第四用户，且文本信息中包含表示下课的关键词，则生成表示课后托管的课程结束的第二即时通讯消息。其中，第一时刻属于开始阶段的时刻，第二时刻属于结束阶段的时刻，因而第二时刻晚于第一时刻。在本发明的一个实施例中，步骤104还可以包括如下步骤：步骤10421、若第一人脸数据中包含第三用户，则生成表示第三用户参与课程的第二即时通讯消息。在开始阶段、中间阶段与结束阶段中的任一阶段，如果遍历到任一第一人脸数据的身份为学生，则虚拟机器人可以生成表示第三用户参与课程的第二即时通讯消息。步骤10422、在第一视频数据中提取具有第三用户的第一人脸数据的原始图像数据。虚拟机器人遍历第一视频数据中各帧原始图像数据，可通过随机、显著性等方式从中提取多帧具有第三用户的第一人脸数据的原始图像数据。在具体实现中，在第一视频数据的各帧原始图像数据中统计表示第三用户的第一人脸数据的第一面积，在视频数据中标记第一面积最大的k帧原始图像数据。对第一视频数据添加窗口，并按照预设的步长滑动窗口。在每次滑动窗口的过程中，检测该窗口内是否具有已标记的、第一面积最大的k帧原始图像数据。若窗口内无已标记的帧原始图像数据，则继续滑动窗口。若窗口内具有一帧已标记的原始图像数据，则维持标记，继续滑动窗口。若窗口具有至少两帧已标记的原始图像数据，则将除首帧已标记的原始图像数据之外的其他已标记的原始图像数据去除标记。当滑动完成时，在第一视频数据中提取剩余标记的原始图像数据，这样子，可以尽可能打散原始图像数据，从而更充分体现课后托管的过程。步骤10423、在原始图像数据中对除第三用户的第一人脸数据之外的其他第一人脸数据进行模糊处理，得到目标图像数据。步骤10424、将目标图像数据封装至第二即时通讯消息中。在提取的原始图像数据中，查询除第三用户的第一人脸数据之外的其他第一人脸数据，对其他第一人脸数据进行模糊处理，得到目标图像数据，并将目标图像数据封装至第二即时通讯消息中，从而保护其他用户的隐私。步骤105、将第二即时通讯消息发送至第二用户，以通知第三用户参与课程的进度。在即时通讯系统中，虚拟机器人将第二即时通讯消息发送至第二用户，从而向第二用户通知第三用户参与课程的进度。本实施例应用于即时通讯系统中的虚拟机器人，分别与表示摄像头的第一用户、身份为家长的第二用户建立好友关系；当预约课后托管的课程时，登记负责课程所处场所的第一用户，由第二用户申报参加课程的、身份为学生的第三用户；当开展课后托管的课程时，接收负责课程所处场所的第一用户发送的、用于记录课程的进度的第一即时通讯消息；对第一即时通讯消息执行规范化处理，得到第二即时通讯消息；将第二即时通讯消息发送至第二用户，以通知第三用户参与课程的进度。虚拟机器人根据摄像头采集的实际场景检测学生参与课后托管的主要节点，主动通过即时通讯系统通知家长，家长可迅速了解课后托管的情况，可以避免家长在接学生放学的过程中与不同的教师通讯的频次，大大提升了效率。实施例二图2为本发明实施例二提供的一种基于课后托管的通讯方法的流程图，本实施例在上述实施例的基础上增加了接送通知的操作。如图2所示，该方法包括：步骤201、分别与表示摄像头的第一用户、身份为家长的第二用户建立好友关系。步骤202、当预约课后托管的课程时，登记负责课程所处场所的第一用户，由第二用户申报参加课程的、身份为学生的第三用户。步骤203、当开展课后托管的课程时，接收负责课程所处场所的第一用户发送的、用于记录课程的进度的第一即时通讯消息。步骤204、对第一即时通讯消息执行规范化处理，得到第二即时通讯消息。步骤205、将第二即时通讯消息发送至第二用户，以通知第三用户参与课程的进度。步骤206、接收负责接送区的第一用户发送的、用于表示接送第三用户的进度的第三即时通讯消息。在课后托管结束时，学生离开指定的场所，到达校园中的接送区，该接送区为家长接送学生的场所。此时，负责接送区的摄像头会在其所处场所采集视频数据、音频数据，将该视频数据、音频数据封装至第三即时通讯消息中，并通过即时通讯系统传输至虚拟机器人。视频数据、音频数据的内容均为学生在接送时的情况，因而第三即时通讯消息记录了接送第三用户的进度。虽然视频数据、音频数据的数据量均较大，但是接送学生的过程较为重要，摄像头可以以持续以流的形式传输视频数据、音频数据，即持续性传输第三即时通讯消息。步骤207、对第三即时通讯消息执行规范化处理，得到第四即时通讯消息。摄像头生成的第三即时通讯消息中主要包含视频数据、音频数据，虽然视频数据、音频数据可体现接送学生的进度，但是原始的视频数据、音频数据并不符合家长的阅读习惯，因而，对第三即时通讯消息执行规范化处理，得到符合家长的阅读习惯的第四即时通讯消息。在本发明的一个实施例中，步骤207可以包括如下步骤：步骤2071、从第三即时通讯消息中提取由摄像头采集的第二视频数据。虚拟机器人解析第三即时通讯消息，从中提取由摄像头采集的视频数据，为便于区分，在接送区中提取的视频数据可记为第二视频数据。步骤2072、在第二视频数据中识别位于校园内的等待区、位于校门口的目标线。在本实施例中，接送区包括等待区、目标线，可以预先在校园内接近校门口的区域设置等待区，在校门口设置目标线，等待区、目标线为具有特定颜色、形状等特征的物体，例如，等待区为红色的矩形物，目标线为红色的条状物。针对第二视频数据，可以间隔预定的时长抽取原始图像数据，从而降低运算量，根据这些物体的颜色、形状等特性在原始图像数据中检测等待区、目标线。步骤2073、在第二视频数据检测多个第二人脸数据与骨骼关键点。通过几何特征、初级神经网络、深度学习等方法在原始图像数据执行人脸识别，得到多个标记身份的人脸数据，记为第二人脸数据。此外，通过AlphaPose、pytorch-openpose、PoseC3D、ST-GCN、MobilePose等算法在原始图像数据中检测骨骼关键点。进一步而言，第二人脸数据与骨骼关键点可以关联至同一用户。在具体实现中，第二视频数据的原始图像数据通常为RGB颜色空间，因而可在第二视频数据的原始图像数据中提取指定的色彩分量，如红色分量。对色彩分量执行二值化处理，得到多个候选区域数据。统计各个候选区域的第二面积、长度。若第二面积大于或等于第一几何阈值，表示第二面积较大，则确定候选区域为表示位于校园内的等待区的第一目标区域。若第二面积大于或等于第二几何阈值、且小于第一几何阈值，长度大于或等于第三几何阈值，表示第二面积较小，长度较长，则确定候选区域为表示位于校门口的目标线的第二目标区域。校对第一目标区域与第二目标区域之间的空间关系。若空间关系为第二目标区域与第一目标区域之间的差距大于第四几何阈值，表示第一目标区域与第二目标区域之间的差距加大，则确定第一目标区域与第二目标区域均有效。步骤2074、若在第三时刻中第二人脸数据包含第三用户，且第三用户对应的骨骼关键点投影至等待区内，则生成表示第三用户等待接送的第四即时通讯消息。针对第三即时通讯消息，可遍历第二人脸数据的身份，如果在第三时刻中第二人脸数据包含学生，则可以将第三用户对应的骨骼关键点投影至地面，如果第三用户对应的骨骼关键点投影至地面的等待区内，则生成表示第三用户等待接送的第四即时通讯消息。步骤2075、若在第四时刻中第二人脸数据包含第三用户，且第三用户对应的骨骼关键点跨越目标线，则生成表示第三用户已接送的第四即时通讯消息。针对第三即时通讯消息，可继续遍历第二人脸数据的身份，如果在第四时刻中第二人脸数据包含学生，则可以将第三用户对应的骨骼关键点投影至地面，如果第三用户对应的骨骼关键点投影至地面的目标线外，即学生跨越目标线，则生成表示第三用户已接送的第四即时通讯消息。其中，第四时刻与第三时刻属于相对的时刻，第四时刻晚于第三时刻。步骤208、将第四即时通讯消息发送至第二用户，以通知接送第三用户的进度。在即时通讯系统中，虚拟机器人将第四即时通讯消息发送至第二用户，从而向第二用户通知接送第三用户的进度。实施例三图3为本发明实施例三提供的一种基于课后托管的通讯装置的结构示意图。如图3所示，应用于即时通讯系统中的虚拟机器人，该装置包括：好友建立模块301，用于分别与表示摄像头的第一用户、身份为家长的第二用户建立好友关系；托管预约模块302，用于当预约课后托管的课程时，登记负责所述课程所处场所的所述第一用户，由所述第二用户申报参加所述课程的、身份为学生的第三用户；第一消息接收模块303，用于当开展课后托管的课程时，接收负责所述课程所处场所的所述第一用户发送的、用于记录所述课程的进度的第一即时通讯消息；第二消息接收模块304，用于对所述第一即时通讯消息执行规范化处理，得到第二即时通讯消息；第二消息发送模块305，用于将所述第二即时通讯消息发送至所述第二用户，以通知所述第三用户参与所述课程的进度。在本发明的一个实施例中，所述第二消息接收模块304还用于：从所述第一即时通讯消息中提取由所述摄像头采集的第一视频数据与音频数据；在所述第一视频数据执行人脸识别，得到多个第一人脸数据；对所述音频数据执行语音识别，得到文本信息；若在第一时刻中所述第一人脸数据包含负责所述课程的、身份为教师的第四用户，且所述文本信息中包含表示上课的关键词，则生成表示所述课程开始的第二即时通讯消息；若在第二时刻中所述第一人脸数据未包含所述第四用户，且所述文本信息中包含表示下课的关键词，则生成表示所述课程结束的第二即时通讯消息，所述第二时刻晚于所述第一时刻。在本发明的一个实施例中，所述第二消息接收模块304还用于：若所述第一人脸数据中包含所述第三用户，则生成表示所述第三用户参与所述课程的第二即时通讯消息；在所述第一视频数据中提取具有所述第三用户的所述第一人脸数据的原始图像数据；在所述原始图像数据中对除所述第三用户的所述第一人脸数据之外的其他所述第一人脸数据进行模糊处理，得到目标图像数据；将所述目标图像数据封装至第二即时通讯消息中。在本发明的一个实施例中，所述第二消息接收模块304还用于：在所述第一视频数据的各帧原始图像数据中统计表示所述第三用户的所述第一人脸数据的第一面积；在所述第一视频数据中标记所述第一面积最大的k帧所述原始图像数据；对所述第一视频数据添加窗口，并滑动所述窗口；若所述窗口具有至少两帧所述原始图像数据，则将除首帧所述原始图像数据之外的其他所述原始图像数据去除标记；在所述第一视频数据中提取剩余标记的所述原始图像数据。在本发明的一个实施例中，还包括：第三消息接收模块，用于接收负责接送区的所述第一用户发送的、用于表示接送所述第三用户的进度的第三即时通讯消息；第四消息生成模块，用于对所述第三即时通讯消息执行规范化处理，得到第四即时通讯消息；第四消息发送模块，用于将所述第四即时通讯消息发送至所述第二用户，以通知接送所述第三用户的进度。在本发明的一个实施例中，所述第四消息生成模块还用于：从所述第三即时通讯消息中提取由所述摄像头采集的第二视频数据；在所述第二视频数据中识别位于校园内的等待区、位于校门口的目标线；在所述第二视频数据检测多个第二人脸数据与骨骼关键点；若在第三时刻中所述第二人脸数据包含所述第三用户，且所述第三用户对应的所述骨骼关键点投影至所述等待区内，则生成表示所述第三用户等待接送的第四即时通讯消息；若在第四时刻中所述第二人脸数据包含所述第三用户，且所述第三用户对应的所述骨骼关键点跨越所述目标线，则生成表示所述第三用户已接送的第四即时通讯消息，所述第四时刻晚于所述第三时刻。在本发明的一个实施例中，所述第四消息生成模块还用于：在所述第二视频数据中提取指定的色彩分量；对所述色彩分量执行二值化处理，得到多个候选区域数据；统计所述候选区域的第二面积、长度；若所述第二面积大于或等于第一几何阈值，则确定所述候选区域为表示位于校园内的等待区的第一目标区域；若所述第二面积大于或等于第二几何阈值、且小于所述第一几何阈值，所述长度大于或等于第三几何阈值，则确定所述候选区域为表示位于校门口的目标线的第二目标区域；校对所述第一目标区域与所述第二目标区域之间的空间关系；若空间关系为所述第二目标区域与所述第一目标区域之间的差距大于第四几何阈值，则确定所述第一目标区域与所述第二目标区域均有效。本发明实施例所提供的基于课后托管的通讯装置可执行本发明任意实施例所提供的基于课后托管的通讯方法，具备执行基于课后托管的通讯方法相应的功能模块和有益效果。实施例四图4示出了可以用来实施本发明的实施例的电子设备10的结构示意图。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本发明的实现。如图4所示，电子设备10包括至少一个处理器11，以及与至少一个处理器11通信连接的存储器，如只读存储器12、随机访问存储器13等，其中，存储器存储有可被至少一个处理器执行的计算机程序，处理器11可以根据存储在只读存储器12中的计算机程序或者从存储单元18加载到随机访问存储器13中的计算机程序，来执行各种适当的动作和处理。在RAM 13中，还可存储电子设备10操作所需的各种程序和数据。处理器11、ROM 12以及RAM 13通过总线14彼此相连。输入/输出接口15也连接至总线14。电子设备10中的多个部件连接至I/O接口15，包括：输入单元16，例如键盘、鼠标等；输出单元17，例如各种类型的显示器、扬声器等；存储单元18，例如磁盘、光盘等；以及通信单元19，例如网卡、调制解调器、无线通信收发机等。通信单元19允许电子设备10通过诸如因特网的计算机网络和/或各种电信网络与其他设备交换信息/数据。处理器11可以是各种具有处理和计算能力的通用和/或专用处理组件。处理器11的一些示例包括但不限于中央处理单元、图形处理单元、各种专用的人工智能计算芯片、各种运行机器学习模型算法的处理器、数字信号处理器、以及任何适当的处理器、控制器、微控制器等。处理器11执行上文所描述的各个方法和处理，例如基于课后托管的通讯方法。在一些实施例中，基于课后托管的通讯方法可被实现为计算机程序，其被有形地包含于计算机可读存储介质，例如存储单元18。在一些实施例中，计算机程序的部分或者全部可以经由ROM 12和/或通信单元19而被载入和/或安装到电子设备10上。当计算机程序加载到RAM 13并由处理器11执行时，可以执行上文描述的基于课后托管的通讯方法的一个或多个步骤。备选地，在其他实施例中，处理器11可以通过其他任何适当的方式而被配置为执行基于课后托管的通讯方法。本文中以上描述的系统和技术的各种实施方式可以在数字电子电路系统、集成电路系统、场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、负载可编程逻辑设备、计算机硬件、固件、软件、和/或它们的组合中实现。这些各种实施方式可以包括：实施在一个或者多个计算机程序中，该一个或者多个计算机程序可在包括至少一个可编程处理器的可编程系统上执行和/或解释，该可编程处理器可以是专用或者通用可编程处理器，可以从存储系统、至少一个输入装置、和至少一个输出装置接收数据和指令，并且将数据和指令传输至该存储系统、该至少一个输入装置、和该至少一个输出装置。用于实施本发明的方法的计算机程序可以采用一个或多个编程语言的任何组合来编写。这些计算机程序可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器，使得计算机程序当由处理器执行时使流程图和/或框图中所规定的功能/操作被实施。计算机程序可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本发明的上下文中，计算机可读存储介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的计算机程序。计算机可读存储介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。备选地，计算机可读存储介质可以是机器可读信号介质。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。为了提供与用户的交互，可以在电子设备上实施此处描述的系统和技术，该电子设备具有：用于向用户显示信息的显示装置或者LCD监视器)；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给电子设备。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网、区块链网络和互联网。计算系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。服务器可以是云服务器，又称为云计算服务器或云主机，是云计算服务体系中的一项主机产品，以解决了传统物理主机与VPS服务中，存在的管理难度大，业务扩展性弱的缺陷。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本发明中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本发明的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本发明保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本发明的精神和原则之内所作的修改、等同替换和改进等，均应包含在本发明保护范围之内。
