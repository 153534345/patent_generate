标题title
一种压力实时监测反馈的贴片系统及监测控制方法
摘要abst
本发明公开了一种压力实时监测反馈的贴片系统及监测控制方法，属于电子元器件贴装的技术领域。包括：具有实时感应贴片压力的压力传感器，以及实时获取贴片组件所在位置的光栅尺。实时采集信息并实时反馈至上位机，基于实时采集的信息做适应性贴片状态调整。解决了现有贴片过程中柔性贴片头无法实时采集并反馈贴片的瞬时压力值，导致贴片系统无法保持恒定贴片压力的问题，实现高精度，高质量的电阻贴片。
权利要求书clms
1.一种压力实时监测反馈的贴片系统，包括：执行单元、以及与执行单元存在通信关系的控制单元；其特征在于，所述执行单元包括：基座，安装于所述基座上的动力源，传动连接于所述动力源的压力传感器，与所述压力传感器存在连接关系的贴片组件，以及设于所述基座上的光栅尺和图像采集装置；所述控制单元包括：控制器，电连接于所述控制器输出端的驱动器，电连接于所述控制器输入端的信号放大器；其中，所述光栅尺和图像采集装置同时电连接于所述控制器的输入端，所述驱动器的输出端连接于所述动力源，所述信号放大器的输出端连接于所述压力传感器。2.根据权利要求1所述的一种压力实时监测反馈的贴片系统，其特征在于，所述动力源包括：伺服电机，固定于所述基座的外侧；所述伺服电机的输出轴连接有联轴器，所述伺服电机线连接于所述驱动器；滚珠丝杠，设于所述基座内且连接于所述联轴器；所述滚珠丝杠上传动连接有滑块；移动件，固定于所述滑块；所述移动件被设置为安装压力传感器和光栅读数头，所述光栅读数头与所述光栅尺相适配。3.根据权利要求2所述的一种压力实时监测反馈的贴片系统，其特征在于，所述贴片组件包括：连接件，固定于所述压力传感器；所述连接件与所述移动件为相背设置，在外力的作用，连接件与移动件之间相互挤压；中空电机，安装于所述连接件上；所述中空电机的输入端和输出端均内有连接套；吸嘴和气管接口，通过对应的连接套分别设于中空电机的输出端和输入端。4.根据权利要求1所述的一种压力实时监测反馈的贴片系统，其特征在于，所述图像采集装置至少包括：相机，所述相机具有镜头。5.根据权利要求1所述的一种压力实时监测反馈的贴片系统，其特征在于，所述控制单元还包括：电源，同时电连接于控制器、驱动器以及信号放大器；上位机，连接于所述控制器。6.基于权利要求1至5中任意一项所述的贴片系统的压力实时监测控制方法，其特征在于，至少包括以下步骤：基于加工工位确定初始位置，所述初始位置与加工工位之间存在预定距离；贴片组件吸取所需贴片，转移至初始位置处；于初始位置处对加工工位进行拍摄得到点位图像，将所述点位图像进行分析处理得到待加工点坐标，基于所述待加工点坐标确定贴片所需的预期位置；动力源进入位置控制模式：将贴片组件移动至预期位置；预先设置贴片压力范围，动力源切换至力控制模式：将实时贴片压力值控制在所述贴片压力范围内，并持续预定时间段；动力源再次切换至位置控制模式：贴片组件返回至初始位置，贴片完成；压力传感器和光栅读数头分别将实时压力值和实际位移值输送至上位机，实现贴片组件的力闭环控制和位置闭环控制；基于所述力闭环控制和位置闭环控制上位机实时向动力源输出贴片组件的位移输出值，基于实时更新的位移输出值完成位置控制模式和力控制模式之间的切换。7.根据权利要求6所述的压力实时监测控制方法，其特征在于，所述位置闭环控制的控制流程具体如下：设定预期位置为Xr，贴片组件的实时位置为Xm，则实时位移差值为E，E=Xm-Xr；定义当前环境为一阶弹簧，Xe表示环境的位置信息，Ke表示环境刚度，则计算得到在此环境下，贴片组件时的实时预期压力Fe，Fe=Ke；定义贴片压力范围的最小值为Fd，基于所述实时预期压力Fe得到实时压力差值△F，△F=Fe-Fd；基于实时压力差值和实时位移差值得到位移调整量，即动力源的位移输出值Xc，Xc=Xm=Xr+E=Xr+△F•K，K为Z轴方向的阻抗系数。8.根据权利要求6所述的压力实时监测控制方法，其特征在于，所述力闭环控制的控制流程具体如下：将贴片压力范围转化为模糊领域，取贴片压力范围的中间值作为预期贴片压力值，基于压力传感器获取实时贴片压力值，计算得到实时压力差值e和差值变化率ec ，t为时间点；将实时压力差值e和差值变化率ec 作为模糊控制的输入，通过以下公式计算比例项、积分项和微分项的对应变化量：，，；；式中，表示控制器的输出信号，、和分别为比例项、积分项和微分项的初始参数；基于以下公式计算得到更新后的比例项、积分项和微分项参数：；；；基于实时更新后的比例项、积分项和微分项参数调整控制器的输出信号。9.根据权利要求6所述的压力实时监测控制方法，其特征在于，若在预定时间段内，实时贴片压力值大于贴片压力范围的最大值，则动力源则切换至休眠状态。10.根据权利要求6所述的压力实时监测控制方法，其特征在于，所述点位图像和待加工点坐标的获取流程如下：在离线状态对相机的内参数和外参数分别进行标定，基于所述内参数、外参数得到畸变系数以及相机坐标系相对于贴片末端坐标系的位移，拍摄图像得到点位图像；对所述点位图像至少进行形态学处理、滤波处理，运用模板匹配进行特别识别，得到待加工点位置；将所述待加工点位置转到世界坐标系下得到待加工点坐标。
说明书desc
技术领域本发明属于电子元器件贴装的技术领域，特别是涉及一种压力实时监测反馈的贴片系统及监测控制方法。背景技术贴片头是贴片机实现贴装功能的关键部件，其功能是通过θ-Z运动从中拾取元件并把元件准确贴放在PCB的设定位置上。贴放时，为了保证元器件与焊盘上的悍膏良好粘结接，需要一定的贴装力，通过调节Z轴位移量来控制弹簧的压缩量，进而实现控制贴片力。目前，大部分贴片机的贴片末端，都采用柔性装置来控制贴片末端的压力，如中国专利CN114222443A提出了一种可360°旋转的高拾取效率的柔性贴片头结构，通过贴片头芯轴在空气轴承中的上下移动，以及贴片头芯轴顶端的环形弹片组在垂直方向上的弹性变形，来吸吸收芯片对吸嘴的反作用力，控制吸嘴与芯片间的接触力，以提高贴片精度。如中国专利CN110167327A提出了一种为控制作用元件的贴装力的可气动操控弹簧元件，通过精确地检测弹簧变位值获取贴装力的大小，根据通过电机电流对套筒进行Z轴方向的引动来停止作用于元件的贴装力。但是这些贴片头依旧采用简单的吸嘴上弹簧的弹性变形来解决贴片压力控制的问题，无法实时检测并将压力值传递给上位机。因此，这种柔性贴片结构存在以下缺陷：为了确保芯片接触时不损坏芯片，只能以尽可能低的速度实现贴片过程，导致贴片效率较低；另外，这种柔性贴片头无法实时采集并反馈贴片的瞬时压力值，面对不同工况下贴片末端移动速度的选取波动较大，高精度且重复性较高的贴片过程难以保证；同时，通过检测反馈的电流值来间接估计力的方式并不够准确，这使得芯片贴装系统无法保持恒定的贴片压力，严重影响了贴片的准确性。发明内容本发明为解决背景技术中存在的技术问题，提供了一种压力实时监测反馈的贴片系统及监测控制方法。本发明采用以下技术方案：一种压力实时监测反馈的贴片系统，包括：执行单元、以及与执行单元存在通信关系的控制单元；所述执行单元包括：基座，安装于所述基座上的动力源，传动连接于所述动力源的压力传感器，与所述压力传感器存在连接关系的贴片组件，以及设于所述基座上的光栅尺和图像采集装置；所述控制单元包括：控制器，电连接于所述控制器输出端的驱动器，电连接于所述控制器输入端的信号放大器；其中，所述光栅尺和图像采集装置同时电连接于所述控制器的输入端，所述驱动器的输出端连接于所述动力源，所述信号放大器的输出端连接于所述压力传感器。在进一步的实施例中，所述动力源包括：伺服电机，固定于所述基座的外侧；所述伺服电机的输出轴连接有联轴器，所述伺服电机线连接于所述驱动器；滚珠丝杠，设于所述基座内且连接于所述联轴器；所述滚珠丝杠上传动连接有滑块；移动件，固定于所述滑块；所述移动件被设置为安装压力传感器和光栅读数头，所述光栅读数头与所述光栅尺相适配。在进一步的实施例中，所述贴片组件包括：连接件，固定于所述压力传感器；所述连接件与所述移动件为相背设置，在外力的作用，连接件与移动件之间相互挤压；中空电机，安装于所述连接件上；所述中空电机的输入端和输出端均内有连接套；吸嘴和气管接口，通过对应的连接套分别设于中空电机的输出端和输入端。在进一步的实施例中，所述图像采集装置至少包括：相机，所述相机具有镜头。在进一步的实施例中，所述控制单元还包括：电源，同时电连接于控制器、驱动器以及信号放大器；上位机，连接于所述控制器。基于如上所述的贴片系统的压力实时监测控制方法，至少包括以下步骤：基于加工工位确定初始位置，所述初始位置与加工工位之间存在预定距离；贴片组件吸取所需贴片，转移至初始位置处；于初始位置处对加工工位进行拍摄得到点位图像，将所述点位图像进行分析处理得到待加工点坐标，基于所述待加工点坐标确定贴片所需的预期位置；动力源进入位置控制模式：将贴片组件移动至预期位置；预先设置贴片压力范围，动力源切换至力控制模式：将实时贴片压力值控制在所述贴片压力范围内，并持续预定时间段；动力源再次切换至位置控制模式：贴片组件返回至初始位置，贴片完成；压力传感器和光栅读数头分别将实时压力值和实际位移值输送至上位机，实现贴片组件的力闭环控制和位置闭环控制；基于所述力闭环控制和位置闭环控制上位机实时向动力源输出贴片组件的位移输出值，基于实时更新的位移输出值完成位置控制模式和力控制模式之间的切换。在进一步的实施例中，所述位置闭环控制的控制流程具体如下：设定预期位置为Xr，贴片组件的实时位置为Xm，则实时位移差值为E，E=Xm-Xr；定义当前环境为一阶弹簧，Xe表示环境的位置信息，Ke表示环境刚度，则计算得到在此环境下，贴片组件时的实时预期压力Fe，Fe=Ke；定义贴片压力范围的最小值为Fd，基于所述实时预期压力Fe得到实时压力差值△F，△F=Fe-Fd；基于实时压力差值和实时位移差值得到位移调整量，即动力源的位移输出值Xc，Xc=Xm=Xr+E=Xr+△F•K，K为Z轴方向的阻抗系数。在进一步的实施例中，所述力闭环控制的控制流程具体如下：所述力闭环控制的控制流程具体如下：将贴片压力范围转化为模糊领域，取贴片压力范围的中间值作为预期贴片压力值，基于压力传感器获取实时贴片压力值，计算得到实时压力差值e和差值变化率ec，t为时间点；将实时压力差值e和差值变化率ec 作为模糊控制的输入，通过以下公式计算为比例项、积分项和微分项的对应变化量：，，；；式中，表示控制器的输出信号，、和分别为比例项、积分项和微分项的初始参数；基于以下公式计算得到更新后的比例项、积分项和微分项参数：；；；基于实时更新后的比例项、积分项和微分项参数调整控制器的输出信号。在进一步的实施例中，若在预定时间段内，若实时贴片压力值大于贴片压力范围的最大值，则动力源则切换至休眠状态。在进一步的实施例中，所述点位图像和待加工点坐标的获取流程如下：在离线状态对相机的内参数和外参数分别进行标定，基于所述内参数、外参数得到畸变系数以及相机坐标系相对于贴片末端坐标系的位移，拍摄图像得到点位图像；对所述点位图像至少进行形态学处理、滤波处理，运用模板匹配进行特别识别，得到待加工点位置；将所述待加工点位置转到世界坐标系下得到待加工点坐标。本发明的有益效果：本发明公开了一种系统，通过在贴片头上设置有连接板，在连接板之间设有三维压力传感器，可以实时检测贴片过程中的力，使得贴片头具有良好的力感和力控制性能。通过设置压力传感器并实时输出，一方面可以实现力闭环控制，另一方面将力控制模式与位置控制模式的切换条件设置为判断贴片接触力的阈值，避免由于阈值设置不当导致贴片失败，甚至造成设备损坏。本发明在贴片头末端安装有相机，在贴片之前可以先通过视觉定位确定待加工点位置，提高贴片的准确率。由于贴片头本身具有欠阻尼特性，传统PID控算法存在很大局限性，所以提出了一种模糊PID控制的力/位置混合全闭环控制算法，满足贴片头高精度，高质量贴装的需求。在贴片头末端安装有光栅尺，其上的光栅读数头可以将贴片头移动的实时位置反馈回上位机，实现对于贴片过程的精准位置闭环控制。附图说明图1为实施例1的结构示意图。图2为实施例1的连接关系图。图3为实施例2的监测控制流程图。图1至图3中的各标注为：吸嘴1、连接套一2、中空电机3、连接套二4、气管接口5、光栅尺6、联轴器7、伺服电机8、滚珠丝杠9、基座10、相机11、移动件12、滑块13、压力传感器14、连接件15、电源16、驱动器17、信号放大器18、控制器19、上位机20。具体实施方式实施例1本实施例为解决上述技术问题，提供了一种压力实时监测反馈的贴片系统，如图1和图2所示，包括执行单元和控制单元，其中执行单元与控制单元之间存在通信关系。如图1所示，执行单元包括：内部为镂空结构的基座10，其顶端安装有动力源，其两侧分别设置有光栅尺6和图像采集装置。动力源上传动连接有压力传感器14，压力传感器14上设置有贴片组件。在进一步的实施例中，动力源包括：固定在基座10外侧的伺服电机8。伺服电机8的输出轴上设置有联轴器7，联轴器7的输出端连接有滚珠丝杠9，滚珠丝杠9位于镂空结构内。滚珠丝杠9上传动连接有滑块13，滑块13上固定有移动件12。移动件12则是用于安装压力传感器14和光栅读数头，所述光栅读数头与所述光栅尺6相适配。当移动件12在伺服电机8的作用下移动时，对应的光栅读数头会相对光栅尺6移动，并在光栅尺6上指出实时读数，即为贴片组件的实时位置。在进一步的实施例中，贴片组件包括：连接于压力传感器14的连接件15，连接件15与移动件12分别位于压力传感器14的两相对的面，在本实施例中为顶面和底面。当连接件15和移动件12相互挤压时，压力传感器14受到挤压，即产生压力值，为实时贴片压力。还包括：固定在连接件15上的中空电机3，中空电机3的输入端和输出端分别内嵌有连接套一2和连接套二4，连接套一2用于安装吸嘴1，则连接套二4用于安装气管接口5，其中气管接口5则是用于调控吸嘴1内的压强，用于控制吸嘴1吸附/释放贴片。在进一步的实施例中，为了能够更好的获取工位情况以及高精度确定待加工点所在的位置，图像采集装置包括：相机11，所述相机11具有镜头。即使用相机11镜头去获取工位情况，并基于获取到的工位情况确定待加工点坐标，详情可见实施例2。在进一步的实施例中，为了对执行单元更好的控制，以及控制单元的信息有效的交互，控制单元包括：控制器19，电连接于所述控制器19输出端的驱动器17，电连接于所述控制器19输入端的信号放大器18；其中，所述光栅尺6和图像采集装置同时电连接于所述控制器19的输入端，所述驱动器17的输出端连接于所述动力源，所述信号放大器18的输出端连接于所述压力传感器14。在本实施例中，压力传感器14、控制器19、驱动器17以及信号放大器18均为现有型号，压力传感器14选用圆柱式压力传感器14JTY-Z05，控制器19选用倍福CX5120控制器19，驱动器17选用倍福AX5000系列驱动器17，信号放大器18选用倍福M9110-002信号放大器18。控制单元还包括：电源16，同时电连接于控制器19、驱动器17以及信号放大器18；直流电源16为驱动器17、信号放大器18和控制器19提供直流电。上位机20，连接于所述控制器19。本实施例的压力实时监测反馈的贴片系统的工作原理：伺服电机8带动滚珠丝杠9转动，滑块13随着移动，当吸嘴1吸附芯片后进行贴片时，待加工工件给与贴片组件向上的力，结合滑块13向下移动，使连接件15和移动件12之间形成挤压力。光栅读数头采集实时位置、压力传感器14获取实时贴片压力，分别将实时位置和实时贴片压力反馈给上位机20；上位机20基于实时位置和实时贴片压力向控制器19输出位移输出值。实施例2基于实施例1公开的贴片系统，本实施例公开了压力实时监测控制方法，如图3所示，包括以下步骤：步骤一、基于加工工位确定初始位置，所述初始位置与加工工位之间存在预定距离，在本实施例中，初始位置设置在加工工位正上方的50mm处。贴片组件吸取贴片，并在外力的作用下转移至初始位置，于初始位置处，相机对加工工位进行拍摄得到点位图像，将所述点位图像进行分析处理得到待加工点坐标，基于所述待加工点坐标的z值确定贴片所需的预期位置。在本实施例中，预期位置的定义如下：当贴片组件处于该位置进行贴片时，压力传感器所采集到的实时贴片压力值在预定时间内属于允许的贴片压力范围内，即为最佳的贴片位置。步骤二、动力源进入位置控制模式：将贴片组件移动至预期位置；即在该模式下，伺服电机带动滚珠丝杠自转，驱动滑块以及安装在滑块上的贴片组件移动，使贴片组件从初始位置移动到预期位置，在最佳贴片位置处准备贴片处理。在这个阶段，压力传感器所采集的数值为实时压力值；步骤三、预先设置贴片压力范围，动力源切换至力控制模式：将实时贴片压力值控制在所述贴片压力范围内，并持续预定时间段；换言之，所述贴预先设置贴片压力范围为贴片时允许或者所需的范围值。预定时间段为预先设定好的满足贴片需求的时长，取决于贴片、待加工点的自身性能以及贴片压力。在这个阶段，压力所采集的数值为实时贴片压力值；步骤四、动力源进入位置控制模式：将贴片组件移动至初始位置。在执行步骤二至步骤四时，不管驱动源处于何种模式，都涉及到伺服电机的输出指令，以满足各模式所需的移动量或者移动值。与此同时，压力传感器需要实时监控各阶段的数值，比如，当处于位置控制模式时，贴片组件提供的压力不符合贴片需求，但是需要通过贴片组件的实时移动保证贴片组件移动到预期位置时恰好实时压力值达到预定贴片压力范围的最小值，即实时压力值随着贴片组件的向下移动而逐渐增大。当贴片组件移动到预期位置后，位置控制模式下的移动量或移动速度已经不再适用，因为在贴片组件达到预期位置之前，其需求是通过贴片组件的移动量在短时间内将实时压力值增大至预定贴片压力范围内。而开始贴片后，其需求是保证贴片压力值的稳定性，不易持续增大甚至超出预定贴片压力范围的最大值，换言之，即力控制模式下的压力传感器所采集到的数值的波动值属于预定贴片压力范围内。故在此切换至力控制模式。而在实际操作时，存在三方面的数值，第一是理想值，第二是实际值，最后是基于实际值生成的输出值，输出值用于在执行单元执行后得到理想值。因此，如果需要做到高精度的调控以达到高质量的贴片需求，因此需要最大程度的降低三者之间的误差。故在本实施例中，压力传感器和光栅读数头分别将实时压力值和实际位移值输送至上位机，实现贴片组件的力闭环控制和位置闭环控制；基于所述力闭环控制和位置闭环控制上位机实时向动力源输出贴片组件的位移输出值，基于实时更新的位移输出值完成位置控制模式和力控制模式之间的切换。具体的，位置闭环控制的控制流程具体如下：设定预期位置为Xr，贴片组件的实时位置为Xm，则实时位移差值为E，E=Xm-Xr；定义当前环境为一阶弹簧，Xe表示环境的位置信息即为待加工点所在的位置信息，Ke表示环境刚度，则计算得到在此环境下，贴片组件时的实时预期压力Fe，Fe=Ke；在本实施例中，将环境看作是一阶弹簧的目的在于可以引入系数Ke表示环境刚度，来计算出贴片压力值Fe。定义贴片压力范围的最小值为Fd，基于所述实时预期压力Fe得到实时压力差值△F，△F=Fe-Fd；基于实时压力差值和实时位移差值得到位移调整量，即动力源的位移输出值Xc，Xc=Xm=Xr+E=Xr+△F•K，K为Z轴方向的阻抗系数。力闭环控制的控制流程具体如下：所述力闭环控制的控制流程具体如下：将贴片压力范围转化为模糊领域，取贴片压力范围的中间值作为预期贴片压力值，基于压力传感器获取实时贴片压力值，计算得到实时压力差值e和差值变化率ec ，t为时间点；将实时压力差值e和差值变化率ec 作为模糊控制的输入，通过以下公式计算为比例项、积分项和微分项的对应变化量：，，；；式中，表示控制器的输出信号，、和分别为比例项、积分项和微分项的初始参数；基于以下公式计算得到更新后的比例项、积分项和微分项参数：；；；基于实时更新后的比例项、积分项和微分项参数调整控制器的输出信号。在进一步的实施例中，需要进一步说明的是，点位图像和待加工点坐标的获取流程如下：在离线状态对相机的内参数和外参数分别进行标定，基于所述内参数、外参数得到畸变系数以及相机坐标系相对于贴片末端坐标系的位移，拍摄图像得到点位图像；对所述点位图像至少进行形态学处理、滤波处理，运用模板匹配进行特别识别，得到待加工点位置；将所述待加工点位置转到世界坐标系下得到待加工点坐标。在进一步的实施例中，本实施例选用的待加工工件为长方形焊盘，待加工点的点位尺寸在毫米级别，因此采用基于灰度值的模板匹配。在另一个实施例中，当贴片时，若在预定时间段内，实时贴片压力值大于贴片压力范围的最大值，则动力源则切换至休眠状态。即当压力传感器采集到的赎数据大于贴片压力范围的最大值，即立刻停止贴片组件的移动，动力源暂停工作。
