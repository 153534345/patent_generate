标题title
一种基于BGP实现EIP智能接入的系统和方法
摘要abst
本发明涉及OVN技术领域，提供一种基于BGP实现EIP智能接入的系统和方法，本发明的系统包括：路由聚合模块，用于将EIP网段发布至物理网络交换机，修改发布至物理网络交换机的EIP网段，接收从物理网络交换机发送的流量后将流量转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器；物理网络交换机，用于向路由聚合模块发送流量以及接收虚拟路由器从路由聚合模块转发的流量；虚拟路由器，用于发布EIP路由下一跳地址，将路由聚合模块的流量转发至物理网络交换机。本发明基于BGP实现EIP智能接入的系统和方法，可以增加可售卖的EIP地址数量，实现虚拟网络与物理网络解耦，增加虚拟路由器的扩展能力。
权利要求书clms
1.一种基于BGP实现EIP智能接入的系统，其特征在于，所述系统，包括：路由聚合模块，用于将EIP网段发布至物理网络交换机，修改发布至物理网络交换机的EIP网段，接收从物理网络交换机发送的流量后将流量转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器；物理网络交换机，用于向路由聚合模块发送流量以及接收虚拟路由器从路由聚合模块转发的流量；虚拟路由器，用于发布EIP路由下一跳地址，将路由聚合模块的流量转发至物理网络交换机。2.根据权利要求1所述的基于BGP实现EIP智能接入的系统，其特征在于，路由聚合模块用于：通过BGP协议将EIP网段发布到物理网络交换机以及通过BGP协议修改发布至物理网络交换机的EIP网段。3.根据权利要求1所述的基于BGP实现EIP智能接入的系统，其特征在于，路由聚合模块用于：接收从物理网络交换机发送的流量，通过隧道协议将流量的报文封装，将封装后的报文转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器。4.根据权利要求1所述的基于BGP实现EIP智能接入的系统，其特征在于，虚拟路由器发布的EIP路由下一跳地址为路由聚合模块的地址。5.一种基于BGP实现EIP智能接入的方法，其特征在于，所述方法，包括：通过路由聚合模块将EIP网段发布至物理网络交换机以及修改发布至物理网络交换机的的EIP网段；通过虚拟路由器发布EIP路由下一跳地址为路由聚合模块的地址；通过路由聚合模块接收物理网络交换机发送的流量，并对接收的流量封装处理后转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器。6.根据权利要求5所述的基于BGP实现EIP智能接入的方法，其特征在于，路由聚合模块通过BGP协议将EIP网段发布到物理网络交换机以及通过BGP协议修改发布至物理网络交换机的EIP网段。7.根据权利要求5所述的基于BGP实现EIP智能接入的方法，其特征在于，路由聚合模块接收从物理网络交换机发送的流量，通过隧道协议将流量的报文封装，将封装后的报文转发至虚拟路由器。8.根据权利要求7所述的基于BGP实现EIP智能接入的方法，其特征在于，将封装后的报文转发至虚拟路由器，包括：将封装后的报文转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器。9.一种终端设备，其特征在于，所述终端设备包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述处理器执行所述程序时实现权利要求5-8中任一项所述方法的步骤。
说明书desc
技术领域本发明涉及OVN技术领域，尤其涉及一种基于BGP实现EIP智能接入的系统和方法。背景技术Open Virtual Network是OpenvSwitch项目组为OVS开发的SDN控制器，提供虚拟网络抽象功能，例如虚拟L2和L3、安全组和DHCP服务等。OVN的EIP功能，通过OVN的三层网关功能实现。如图1所示，在物理网路交换机上一个内网地址、一个EIP地址；在虚拟路由器上，配置默认路由下一跳为物理交换机内网地址。从虚拟路由器发出的流量，根据路由规则转发到物理网络交换机。从物理网络进入的流量，通过直连路由转发到虚拟路由器。在实际应用中，物理网络进入的流量通过直连路由转发存在以下不足：1.需要在物理网络交换机占用一个EIP地址，减少了可以售卖的EIP地址数量；2.所有的虚拟路由器必须在连接在同一个物理网络交换机下，影响虚拟路由器的扩展能力；3.新增EIP地址段后，需要手动修改物理网络交换机配置。因此，如何提供一种更加经济、便捷和实用的EIP接入方法，成为亟待解决的技术问题。发明内容有鉴于此，本发明通过增加路由聚合模块，提供一种基于BGP实现EIP智能接入的系统和方法。一方面，本发明提供一种基于BGP实现EIP智能接入的系统，包括：路由聚合模块，用于将EIP网段发布至物理网络交换机，修改发布至物理网络交换机的EIP网段，接收从物理网络交换机发送的流量后将流量转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器；物理网络交换机，用于向路由聚合模块发送流量以及接收虚拟路由器从路由聚合模块转发的流量；虚拟路由器，用于发布EIP路由下一跳地址，将路由聚合模块的流量转发至物理网络交换机。进一步地，本发明基于BGP实现EIP智能接入的系统中，路由聚合模块用于：通过BGP协议将EIP网段发布到物理网络交换机以及通过BGP协议修改发布至物理网络交换机的EIP网段。进一步地，本发明基于BGP实现EIP智能接入的系统中，路由聚合模块用于：接收从物理网络交换机发送的流量，通过隧道协议将流量的报文封装，将封装后的报文转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器。进一步地，本发明基于BGP实现EIP智能接入的系统中，虚拟路由器发布的EIP路由下一跳地址为路由聚合模块的地址。另一方面，本发明提供一种基于BGP实现EIP智能接入的方法，包括：通过路由聚合模块将EIP网段发布至物理网络交换机以及修改发布至物理网络交换机的的EIP网段；通过虚拟路由器发布EIP路由下一跳地址为路由聚合模块的地址；通过路由聚合模块接收物理网络交换机发送的流量，并对接收的流量封装处理后转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器。进一步地，本发明基于BGP实现EIP智能接入的方法中，路由聚合模块通过BGP协议将EIP网段发布到物理网络交换机以及通过BGP协议修改发布至物理网络交换机的EIP网段。进一步地，本发明基于BGP实现EIP智能接入的方法，其特征在于，路由聚合模块接收从物理网络交换机发送的流量，通过隧道协议将流量的报文封装，将封装后的报文转发至虚拟路由器。进一步地，本发明基于BGP实现EIP智能接入的方法，其特征在于，将封装后的报文转发至虚拟路由器，包括：将封装后的报文转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器。最后，本发明还提供一种终端设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述处理器执行所述程序时实现所述方法的步骤。本发明基于BGP实现EIP智能接入的系统和方法，具有以下有益效果：1.避免了在物理网络交换机上占用一个EIP地址，增加可以售卖的EIP地址数量；2.不需要手动修改物理网络交换机配置，直接通过BGP协议修改EIP网段，可以实现虚拟网络与物理网络解耦。3.虚拟路由器不需要与路由聚合模块处于同一物理网络交换机下，增加虚拟路由器的扩展能力。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它的附图。图1为现有技术中EIP接入的系统的架构图。图2为本发明示例性第一实施例的基于BGP实现EIP智能接入的系统的架构图。具体实施方式下面结合附图对本发明实施例进行详细描述。需说明的是，在不冲突的情况下，以下实施例及实施例中的特征可以相互组合；并且，基于本公开中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本公开保护的范围。需要说明的是，下文描述在所附权利要求书的范围内的实施例的各种方面。应显而易见，本文中所描述的方面可体现于广泛多种形式中，且本文中所描述的任何特定结构及/或功能仅为说明性的。基于本公开，所属领域的技术人员应了解，本文中所描述的一个方面可与任何其它方面独立地实施，且可以各种方式组合这些方面中的两者或两者以上。举例来说，可使用本文中所阐述的任何数目个方面来实施设备及/或实践方法。另外，可使用除了本文中所阐述的方面中的一或多者之外的其它结构及/或功能性实施此设备及/或实践此方法。以下各实施例中涉及的名词解释如下：EIP：弹性公网IP，是与用户账户相关联的IP地址，可以灵活地绑定及解绑到用户的任何一台云服务器、弹性裸金属服务器、负载均衡等资源。用户可以快速地将EIP地址重新映射到账户中的另一个云服务器、裸金属服务器、负载均衡等资源，屏蔽实例故障。BGP：边界网关协议，是互联网上一个核心的去中心化自治路由协议，它通过维护IP路由表或“前缀”表来实现自治系统之间的可达性，属于矢量路由协议。图2为根据本发明示例性第一实施例的一种基于BGP实现EIP智能接入的系统的架构图，如图2所示，本实施例的系统，包括：路由聚合模块，用于将EIP网段发布至物理网络交换机，修改发布至物理网络交换机的EIP网段，接收从物理网络交换机发送的流量后将流量转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器；物理网络交换机，用于向路由聚合模块发送流量以及接收虚拟路由器从路由聚合模块转发的流量；虚拟路由器，用于发布EIP路由下一跳地址，将路由聚合模块的流量转发至物理网络交换机。在实际应用中，本实施例系统中，路由聚合模块通过BGP协议将EIP网段发布到物理网络交换机以及通过BGP协议修改发布至物理网络交换机的EIP网段。不需要手动修改物理网络交换机配置，直接通过BGP协议修改EIP网段，可以实现虚拟网络与物理网络解耦。在实际应用中，本实施例系统中，路由聚合模块接收从物理网络交换机发送的流量，通过隧道协议将流量的报文封装，将封装后的报文转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器。虚拟路由器不需要与路由聚合模块处于同一物理网络交换机下，增加了虚拟路由器的扩展能力。在实际应用中，本实施例系统中，虚拟路由器发布的EIP路由下一跳地址为路由聚合模块的地址。发布的EIP路由下一跳为路由聚合模块，从物理网络进入的流量，根据发布的路由转发规则，将流量转发到路由聚合模块。本发明示例性第二实施例提供一种基于BGP实现EIP智能接入的方法，本实施例的方法，包括：通过路由聚合模块将EIP网段发布至物理网络交换机以及修改发布至物理网络交换机的的EIP网段；通过虚拟路由器发布EIP路由下一跳地址为路由聚合模块的地址；通过路由聚合模块接收物理网络交换机发送的流量，并对接收的流量封装处理后转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器。本实施例方法中，路由聚合模块通过BGP协议将EIP网段发布到物理网络交换机以及通过BGP协议修改发布至物理网络交换机的EIP网段。本实施例方法中，路由聚合模块接收从物理网络交换机发送的流量，通过隧道协议将流量的报文封装，将封装后的报文转发至同一物理网络交换机或不同物理网络交换机下的虚拟路由器。最后，本发明还提供一种终端设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述处理器执行所述程序时实现所述方法的步骤。该终端设备具有上述基于BGP实现EIP智能接入的系统和方法相应的技术效果。以上所述，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到的变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以权利要求的保护范围为准。
