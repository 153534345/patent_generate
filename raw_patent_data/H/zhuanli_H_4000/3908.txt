标题title
一种基于双光纤的音视频传输方法及系统
摘要abst
本发明公开了一种基于双光纤的音视频传输方法及系统，该方法通过对输入的音视频数据进行无损无压缩编码，保证了图像和音频质量，并将得到的音视频编码数据进行复制相同的两路视频编码数据，并基于双光纤将两路视频编码数据发送到音视频解码设备；并在音视频解码设备接收到两路音视频编码数据后，实时检测主备链路的链路状态，当主链路恢复正常时，选取主链路对应的主音视频编码数据进行解码处理：当主链路异常时自动切换到备链路，实现自动检测异常，并自动切换到备链路，且实现切换过程中无缝切换，避免出现音视频中断的情况，保证传输的可靠性。
权利要求书clms
1.一种基于双光纤的音视频传输方法，其特征在于，包括：控制音视频编码设备对获取的音视频数据进行编码处理，得到音视频编码数据，并将所述音视频编码数据进行复制，得到第一音视频编码数据和第二音视频编码数据，并基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备；控制音视频解码设备接收所述第一音视频编码数据和所述第二音视频编码数据，并将所述第一音视频编码数据设置为主音视频编码数据，所述第二音视频编码数据设置为备音视频编码数据；获取所述主音视频编码数据对应的主链路状态，以及所述备音视频编码数据对应的备链路状态，实时判断所述主链路状态和所述备链路状态是否异常；当所述主链路状态正常时，对所述主音视频编码数据进行解码处理；当所述主链路状态异常、所述备链路状态正常时，则将主音视频编码数据切换为所述备音视频编码数据，并对所述备音视频编码数据进行解码处理，直至生成音视频解码数据，并输出所述音视频数据。2.如权利要求1所述的一种基于双光纤的音视频传输方法，其特征在于，基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备，具体包括：控制音视频编码设备中的高速接口发送处理模块分别将所述第一音视频编码数据和所述第二音视频编码数据发送到对应的第一编码端光模块和第二编码端光模块，以使所述第一编码端光模块和所述第二编码端光模块分别基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备中的第一解码端光模块和第二解码端光模块；控制音视频解码设备中的高速接口接收处理模块接收所述第一解码端光模块和所述第二解码端光模块中的所述第一音视频编码数据和所述第二音视频编码数据。3.如权利要求1所述的一种基于双光纤的音视频传输方法，其特征在于，实时判断所述主链路状态和所述备链路状态是否异常，具体包括：获取所述主音视频编码数据对应的第一解码状态指示信号，将所述第一解码状态指示信号与预设解码异常状态指示信号进行对比；若所述第一解码状态指示信号与所述预设解码异常状态指示信号相同，则认为所述主音视频编码数据对应的链路状态异常，否则，则认为所述主音视频编码数据对应的链路正常；获取所述备音视频编码数据对应的第二解码状态指示信号，将所述第二解码状态指示信号与预设解码异常状态指示信号进行对比；若所述第二解码状态指示信号与所述预设解码异常状态指示信号相同，则认为所述备音视频编码数据对应的链路状态异常，否则，则认为所述备音视频编码数据对应的链路正常。4.如权利要求1所述的一种基于双光纤的音视频传输方法，其特征在于，控制音视频编码设备对获取的音视频数据进行编码处理，得到音视频编码数据，具体包括：获取音频源设备中的音源数据，对所述音源数据设置音源指示标签，得到音频编码数据；获取视频源设备中的视频数据，对所述视频数据设置视频指示标签；得到视频编码数据。5.如权利要求4所述的一种基于双光纤的音视频传输方法，其特征在于，将所述音视频编码数据进行复制，得到第一音视频编码数据和第二音视频编码数据，具体包括：实时监控视频缓存队列中的视频缓存量和音频缓存队列中的音频缓存量，并将所述视频缓存量和所述音频缓存量进行对比；当所述视频缓存量大于或等于所述音频缓存量时，先读取所述视频缓存队列中的视频编码数据，并将所述视频编码数据复制成相同的第一视频编码数据和第二视频编码数据；当所述视频缓存量小于所述音频缓存量时，先读取所述音频缓存队列中的音频编码数据，并将所述音频编码数据复制成相同的第一音频编码数据和第二音频编码数据。6.一种基于双光纤的音视频传输系统，其特征在于，包括：音视频编码设备和音视频解码设备；其中，所述音视频编码设备，用于对获取的音视频数据进行编码处理，得到音视频编码数据，并将所述音视频编码数据进行复制，得到第一音视频编码数据和第二音视频编码数据，并基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备；所述音视频解码设备，用于接收所述第一音视频编码数据和所述第二音视频编码数据，并将所述第一音视频编码数据设置为主音视频编码数据，所述第二音视频编码数据设置为备音视频编码数据；所述音视频解码设备，还用于获取所述主音视频编码数据对应的主链路状态，以及所述备音视频编码数据对应的备链路状态，实时判断所述主链路状态和所述备链路状态是否异常；所述音视频解码设备，还用于当所述主链路状态正常时，对所述主音视频编码数据进行解码处理；当所述主链路状态异常、所述备链路状态正常时，则将主音视频编码数据切换为所述备音视频编码数据，并对所述备音视频编码数据进行解码处理，直至生成音视频解码数据，并输出所述音视频数据。7.如权利要求6所述的一种基于双光纤的音视频传输系统，其特征在于，还包括：音频源设备、视频源设备、音频输出设备和显示设备；其中，所述音视频编码设备通过3.5mm音频输入线与所述音频源设备相连接，所述音视频编码设备通过HDMI视频输入线与所述视频源设备相连接，所述音视频编码设备通过主光纤和备光纤和所述音视频解码设备相连接，所述音视频解码设备通过HDMI视频输出线与所述显示设备相连接，所述音视频解码设备通过3.5mm音频输出线与所述音频输出设备相连接。8.如权利要求6所述的一种基于双光纤的音视频传输系统，其特征在于，所述音视频编码设备包括第一FPGA芯片、第一编码端光模块、第二编码端光模块、第一电源模块和第一开关按钮，其中，所述第一FPGA芯片包括音频无损编码处理模块、视频无损编码处理模块和高速接口发送处理模块。9.如权利要求8所述的一种基于双光纤的音视频传输系统，其特征在于，所述音视频解码设备包括第二FPGA芯片、第一解码端光模块、第二编码端光模块、第二电源模块和第二开关按钮，其中，所述第二FPGA芯片包括音频解码处理模块、视频解码处理模块、主备链路切换处理模块和高速接口接收处理模块。10.如权利要求9所述的一种基于双光纤的音视频传输系统，其特征在于，还包括：第一3.5mm音频接口、第一HDMI接口、第一电源接口、第二3.5mm音频接口、第二HDMI接口和第二电源接口；其中，所述第一3.5mm音频接口与所述音频无损编码处理模块相连接，所述第一HDMI接口与所述视频无损编码处理模块相连接，所述第一电源接口与所述第一电源模块相连接；所述第二3.5mm音频接口与所述音频解码处理模块相连接，所述第二HDMI接口与所述视频解码处理模块相连接，所述第二电源接口与所述第二电源模块相连接。
说明书desc
技术领域本发明涉及大数据的技术领域，特别是涉及一种基于双光纤的音视频传输方法及系统。背景技术随着自动化和科技的快速发展，人们对音视频的传输显示、智能控制和安防监控的要求不断加强，除了满足基本功能需求之外，也逐渐注重音视频的同步性，音视频的质量，音视频的传输距离，音视频传输的可靠性等。如今市面上音视频编解码传输终端设备大多数通过单根网线和网络包的方式进行音视频的远距离传输，该网络传输方法步骤为:编码端设备通过HDMI线及3.5mm线对输入的音视频数据进行了音视频有损压缩，压缩后再通过网络包的形式以单根网线为传输介质发送到解码端，解码端再对网络包进行解码，解码出音视频流后再通过HDMI线和3.5mm线发送到显示设备。该处理系统由于对数据进行了有损压缩会导致传输过程中大大降低了音视频的质量，且网线传输距离有限，当网线损坏或网络不稳定时解码端无法对音视频流正确解码导致音视频输出异常。发明内容本发明要解决的技术问题是：提供一种基于双光纤的音视频传输方法及系统，提高音视频传输稳定性。为了解决上述技术问题，本发明提供了一种基于双光纤的音视频传输方法，包括：控制音视频编码设备对获取的音视频数据进行编码处理，得到音视频编码数据，并将所述音视频编码数据进行复制，得到第一音视频编码数据和第二音视频编码数据，并基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备；控制音视频解码设备接收所述第一音视频编码数据和所述第二音视频编码数据，并将所述第一音视频编码数据设置为主音视频编码数据，所述第二音视频编码数据设置为备音视频编码数据；获取所述主音视频编码数据对应的主链路状态，以及所述备音视频编码数据对应的备链路状态，实时判断所述主链路状态和所述备链路状态是否异常；当所述主链路状态正常时，对所述主音视频编码数据进行解码处理；当所述主链路状态异常、所述备链路状态正常时，则将主音视频编码数据切换为所述备音视频编码数据，并对所述备音视频编码数据进行解码处理，直至生成音视频解码数据，并输出所述音视频数据。在一种可能的实现方式中，基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备，具体包括：控制音视频编码设备中的高速接口发送处理模块分别将所述第一音视频编码数据和所述第二音视频编码数据发送到对应的第一编码端光模块和第二编码端光模块，以使所述第一编码端光模块和所述第二编码端光模块基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备中的第一解码端光模块和第二解码端光模块；控制音视频解码设备中的高速接口接收处理模块接收所述第一解码端光模块和所述第二解码端光模块中的所述第一音视频编码数据和所述第二音视频编码数据。在一种可能的实现方式中，实时判断所述主链路状态和所述备链路状态是否异常，具体包括：获取所述主音视频编码数据对应的第一解码状态指示信号，将所述第一解码状态指示信号与预设解码异常状态指示信号进行对比；若所述第一解码状态指示信号与所述预设解码异常状态指示信号相同，则认为所述主音视频编码数据对应的链路状态异常，否则，则认为所述主音视频编码数据对应的链路正常；获取所述备音视频编码数据对应的第二解码状态指示信号，将所述第二解码状态指示信号与预设解码异常状态指示信号进行对比；若所述第二解码状态指示信号与所述预设解码异常状态指示信号相同，则认为所述备音视频编码数据对应的链路状态异常，否则，则认为所述备音视频编码数据对应的链路正常。在一种可能的实现方式中，控制音视频编码设备对获取的音视频数据进行编码处理，得到音视频编码数据，具体包括：获取音频源设备中的音源数据，对所述音源数据设置音源指示标签，得到音频编码数据；获取视频源设备中的视频数据，对所述视频数据设置视频指示标签；得到视频编码数据。在一种可能的实现方式中，将所述音视频编码数据进行复制，得到第一音视频编码数据和第二音视频编码数据，具体包括：实时监控视频缓存队列中的视频缓存量和音频缓存队列中的音频缓存量，并将所述视频缓存量和所述音频缓存量进行对比；当所述视频缓存量大于或等于所述音频缓存量时，先读取所述视频缓存队列中的视频编码数据，并将所述视频编码数据复制成相同的第一视频编码数据和第二视频编码数据；当所述视频缓存量小于所述音频缓存量时，先读取所述音频缓存队列中的音频编码数据，并将所述音频编码数据复制成相同的第一音频编码数据和第二音频编码数据。本发明还提供了一种基于双光纤的音视频传输系统，包括：音视频编码设备和音视频解码设备；其中，所述音视频编码设备，用于对获取的音视频数据进行编码处理，得到音视频编码数据，并将所述音视频编码数据进行复制，得到第一音视频编码数据和第二音视频编码数据，并基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备；所述音视频解码设备，用于接收所述第一音视频编码数据和所述第二音视频编码数据，并将所述第一音视频编码数据设置为主音视频编码数据，所述第二音视频编码数据设置为备音视频编码数据；所述音视频解码设备，还用于获取所述主音视频编码数据对应的主链路状态，以及所述备音视频编码数据对应的备链路状态，实时判断所述主链路状态和所述备链路状态是否异常；所述音视频解码设备，还用于当所述主链路状态正常时，对所述主音视频编码数据进行解码处理；当所述主链路状态异常、所述备链路状态正常时，则将主音视频编码数据切换为所述备音视频编码数据，并对所述备音视频编码数据进行解码处理，直至生成音视频解码数据，并输出所述音视频数据。在一种可能的实现方式中，所述音视频编码设备，用于基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备，具体包括：控制高速接口发送处理模块分别将所述第一音视频编码数据和所述第二音视频编码数据发送到对应的第一编码端光模块和第二编码端光模块，以使所述第一编码端光模块和所述第二编码端光模块基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备中的第一解码端光模块和第二解码端光模块，并使音视频解码设备中的高速接口接收处理模块接收所述第一解码端光模块和所述第二解码端光模块中的所述第一音视频编码数据和所述第二音视频编码数据。在一种可能的实现方式中，所述音视频解码设备，用于实时判断所述主链路状态和所述备链路状态是否异常，具体包括：获取所述主音视频编码数据对应的第一解码状态指示信号，将所述第一解码状态指示信号与预设解码异常状态指示信号进行对比；若所述第一解码状态指示信号与所述预设解码异常状态指示信号相同，则认为所述主音视频编码数据对应的链路状态异常，否则，则认为所述主音视频编码数据对应的链路正常；获取所述备音视频编码数据对应的第二解码状态指示信号，将所述第二解码状态指示信号与预设解码异常状态指示信号进行对比；若所述第二解码状态指示信号与所述预设解码异常状态指示信号相同，则认为所述备音视频编码数据对应的链路状态异常，否则，则认为所述备音视频编码数据对应的链路正常。在一种可能的实现方式中，所述音视频编码设备，用于对获取的音视频数据进行编码处理，得到音视频编码数据，具体包括：获取音频源设备中的音源数据，对所述音源数据设置音源指示标签，得到音频编码数据；获取视频源设备中的视频数据，对所述视频数据设置视频指示标签；得到视频编码数据。在一种可能的实现方式中，所述音视频编码设备，用于将所述音视频编码数据进行复制，得到第一音视频编码数据和第二音视频编码数据，具体包括：实时监控视频缓存队列中的视频缓存量和音频缓存队列中的音频缓存量，并将所述视频缓存量和所述音频缓存量进行对比；当所述视频缓存量大于或等于所述音频缓存量时，优选读取所述视频缓存队列中的视频编码数据，并将所述视频编码数据复制成相同的第一视频编码数据和第二视频编码数据；当所述视频缓存量小于所述音频缓存量时，优选读取所述音频缓存队列中的音频编码数据，并将所述音频编码数据复制成相同的第一音频编码数据和第二音频编码数据。本发明提供的一种基于双光纤的音视频传输系统，还包括：音频源设备、视频源设备、音频输出设备和显示设备；其中，所述音视频编码设备通过3.5mm音频输入线与所述音频源设备相连接，所述音视频编码设备通过HDMI视频输入线与所述视频源设备相连接，所述音视频编码设备通过主光纤和备光纤和所述音视频解码设备相连接，所述音视频解码设备通过HDMI视频输出线与所述显示设备相连接，所述音视频解码设备通过3.5mm音频输出线与所述音频输出设备相连接。在一种可能的实现方式中，所述音视频编码设备包括第一FPGA芯片、第一编码端光模块、第二编码端光模块、第一电源模块和第一开关按钮，其中，所述第一FPGA芯片包括音频无损编码处理模块、视频无损编码处理模块和高速接口发送处理模块。在一种可能的实现方式中，所述音视频解码设备包括第二FPGA芯片、第一解码端光模块、第二编码端光模块、第二电源模块和第二开关按钮，其中，所述第二FPGA芯片包括音频解码处理模块、视频解码处理模块、主备链路切换处理模块和高速接口接收处理模块。本发明提供的一种基于双光纤的音视频传输系统，还包括：第一3.5mm音频接口、第一HDMI接口、第一电源接口、第二3.5mm音频接口、第二HDMI接口和第二电源接口；其中，所述第一3.5mm音频接口与所述音频无损编码处理模块相连接，所述第一HDMI接口与所述视频无损编码处理模块相连接，所述第一电源接口与所述第一电源模块相连接；所述第二3.5mm音频接口与所述音频解码处理模块相连接，所述第二HDMI接口与所述视频解码处理模块相连接，所述第二电源接口与所述第二电源模块相连接。本发明实施例一种基于双光纤的音视频传输方法及系统，与现有技术相比，具有如下有益效果：通过对输入的音视频数据进行无损无压缩编码，保证了图像和音频质量，并将得到的音视频编码数据进行复制相同的两路视频编码数据，并基于双光纤将两路视频编码数据发送到音视频解码设备；并在音视频解码设备接收到两路音视频编码数据后，实时检测主备链路的链路状态，当主链路恢复正常时，选取主链路对应的主音视频编码数据进行解码处理：当主链路异常时自动切换到备链路，实现自动检测异常，并自动切换到备链路，且实现切换过程中无缝切换，避免出现音视频中断的情况，保证传输的可靠性。附图说明图1是本发明提供的一种基于双光纤的音视频传输方法的一种实施例的流程示意图；图2是本发明提供的一种基于双光纤的音视频传输系统的一种实施例的硬件设备连接示意图；图3是本发明四实施例提供的音视频编码设备的设备接口功能模块结构示意图；图4是本发明四实施例提供的音视频解码设备的设备接口功能模块结构示意图。具体实施方式下面将结合本发明中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例1参见图1，图1是本发明提供的一种基于双光纤的音视频传输方法的一种实施例的流程示意图，如图1所示，该方法包括步骤101-步骤104，具体如下：步骤101：控制音视频编码设备对获取的音视频数据进行编码处理，得到音视频编码数据，并将所述音视频编码数据进行复制，得到第一音视频编码数据和第二音视频编码数据，并基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备。一实施例中，音视频编码设备通过3.55mm音频输入线与音频源设备相连接，以使所述音视频编码设备获取音频源设备中的音源数据；同时，所述，音视频编码设备通过HDMI视频输入线与视频源设备相连接，以使所述音视频编码设备获取视频源设备中的视频数据。一实施例中，音视频编码设备在获取到所述音源数据和所述视频数据后，对所述音源数据设置音源指示标签，得到音频编码数据，对所述视频数据设置视频指示标签，得到视频编码数据，已实现对所述音源数据和所述视频数据进行无压缩无损编码处理。具体的，对于视频数据，音视频编码设备会对HDMI视频输入线输入的视频数据添加一个比特位0作为视频指示标签，该标签用于区别该数据是视频数据还是音频数据，并将添加了视频指示标签位0后的视频编码数据存放到视频缓存队列中，并等待被读取发送。对于音频数据，音视频编码设备会对3.5mm音源输入线输入的音频数据添加一个比特位1作为音频指示标签，该标签用于区别该数据是音频数据还是视频数据，并将添加了音频指示标签位1后的音频数据存放到音频缓存队列中，并等待被读取发送。由于上述在对音视频数据进行编码时，仅对音视频数据添加了一个比特位的数据，并没有损坏或修改源数据，因此该音视频编码过程为无压缩无损编码，能保证视频图像和音频的质量。一实施例中，在对音视频数据进行编码后，音视频编码设备还需要从音视频缓存队列中将所述音视频编码数据提取出来并进行复制，得到第一音视频编码数据和第二音视频编码数据。具体的，音视频编码设备实时监控视频缓存队列中的视频缓存量和音频缓存队列中的音频缓存量，并将所述视频缓存量和所述音频缓存量进行对比。当所述视频缓存量大于或等于所述音频缓存量时，优先读取所述视频缓存队列中的视频编码数据，并将所述视频编码数据复制成两路一模一样的数据流，得到第一视频编码数据和第二视频编码数据；再读取所述音频缓存队列中的音频编码数据，并将所述音频编码数据复制成两路一模一样的数据流，得到第一音频编码数据和第二音频编码数据。当所述视频缓存量小于所述音频缓存量时，优先读取所述音频缓存队列中的音频编码数据，并将所述音频编码数据复制成两路一模一样的数据流，得到第一音频编码数据和第二音频编码数据；再读取所述视频缓存队列中的视频编码数据，并将所述视频编码数据复制成两路一模一样的数据流，得到第一视频编码数据和第二视频编码数据。一实施例中，还基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备。控制音视频编码设备中的高速接口发送处理模块分别将所述第一音视频编码数据和所述第二音视频编码数据发送到对应的第一编码端光模块和第二编码端光模块，以使所述第一编码端光模块和所述第二编码端光模块分别基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备中的第一解码端光模块和第二解码端光模块。具体的，由于音视频编码设备中包括FPGA芯片，且所述FPGA芯片内部自带的两路12.5Gb速率的高速接口发送处理模块，通过将所述第一音视频编码数据和所述第二音视频编码数据分别送到FPGA内部自带的两路12.5Gb速率的高速接口发送处理模块中，FPGA内部自带的每路高速接口发送处理模块会将并行的第一音视频编码数据和第二音视频编码数据先经过8B10B编码，再经过并行转串行的方式，最终以12.5Gb速率的串行的第一音视频编码数据和第二音视频编码数据发送到两个硬件第一编码端光模块和第二编码端光模块中，8B10B编码也是无损可逆的编码，所以整个编码过程都是无损的。第一编码端光模块和第二编码端光模块再通过第一光纤线和第二光纤线和音视频解码设备的第一解码端光模块和光第二解码端模块连接起来，以使将将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备中的第一解码端光模块和第二解码端光模块。步骤102：控制音视频解码设备接收所述第一音视频编码数据和所述第二音视频编码数据，并将所述第一音视频编码数据设置为主音视频编码数据，所述第二音视频编码数据设置为备音视频编码数据。一实施例中，音视频解码设备在接收到第一音视频编码数据和第二音视频编码数据后，由于第一音视频编码数据和第二音视频编码数据都是相同的数据流，因此，本实施例中，将所述第一音视频编码数据和所述第二音视频编码数据任一设置为主音视频编码数据或备音视频编码数据。具体的，将第一音视频编码数据设置为主音视频编码数据，将第二音视频编码数据设置为备音视频编码数据。优选的，也可以将第二音视频编码数据设置为主音视频编码数据，将第一音视频编码数据设置为备音视频编码数据。步骤103：获取所述主音视频编码数据对应的主链路状态，以及所述备音视频编码数据对应的备链路状态，实时判断所述主链路状态和所述备链路状态是否异常。步骤104：当所述主链路状态正常时，对所述主音视频编码数据进行解码处理；当所述主链路状态异常、所述备链路状态正常时，则将主音视频编码数据切换为所述备音视频编码数据，并对所述备音视频编码数据进行解码处理，直至生成音视频解码数据，并输出所述音视频数据。一实施例中，音视频解码设备还包括第二FPGA芯片，所述第二FPGA芯片内部自带的两路12.5Gb高速接口接收处理模块。在音视频编码设备将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备的第一解码端光模块和第二解码端光模块中时，基于第一解码端光模块和第二解码端光模块与两路12.5Gb高速接口接收处理模块的连接关系，两路12.5Gb高速接口接收处理模块会同时对两路12.5Gb速率的串行的第一音视频编码数据和第二音视频编码数据进行串行转并行处理，以使将串行的第一音视频编码数据和第二音视频编码数据转换为并行的第一音视频编码数据和第二音视频编码数据，在对转换后的并行的第一音视频编码数据和第二音视频编码数据进行10B8B的逆解码处理。一实施例中，音视频解码设备在对第一音视频编码数据和第二音视频编码数据进行解码处理时，由于将第一音视频编码数据设置为主音视频编码数据，以及将第二音视频编码数据设置为备音视频编码数据，因此，还将接收主音视频编码数据的解码端光模块设置主光模块，将接收备音视频编码数据的解码端光模块设置为备光模块。一实施例中，音视频解码设备中的第二FPGA芯片会实时对主光模块和备光模块对应的链路的状态都进行监控，即对主音视频编码数据对应的主链路状态及备音视频编码数据对应的备链路状态进行实时监控。一实施例中，判断所述主音视频编码数据对应的链路状态是否异常；通过获取所述主音视频编码数据对应的第一解码状态指示信号，将所述第一解码状态指示信号与预设解码异常状态指示信号进行对比；若所述第一解码状态指示信号与所述预设解码异常状态指示信号相同，则认为所述主音视频编码数据对应的链路状态异常，否则，则认为所述主音视频编码数据对应的链路正常。一实施例中，判断所述备音视频编码数据对应的链路状态是否异常；通过获取所述备音视频编码数据对应的第二解码状态指示信号，将所述第二解码状态指示信号与预设解码异常状态指示信号进行对比；若所述第二解码状态指示信号与所述预设解码异常状态指示信号相同，则认为所述备音视频编码数据对应的链路状态异常，否则，则认为所述备音视频编码数据对应的链路正常。具体的，预设解码异常状态指示信号为第二FPGA芯片自带的12.5G高速接口接收处理模块中的8B10B解码状态指示信号RXSTATUS，其中，8B10B解码状态指示信号的状态包括5种：1）、000b: Received data OK；2）、001b: 1 SKP added；3）、010b: 1 SKP removed；4）、011b: Receiver detected；5）、100b: 8B/10B decode error。其中，前4种都为通信解码正常，当状态为100b时代表8B10解码异常，FPGA程序判定该链路通信异常或有误码。根据状态指示信号，第二FPGA芯片会实时对主备链路的两类状态指示信号都进行监控，当12.5G高速接口接收处理模块RXSTATUS=100b时代表当前链路通信异常，反之通信正常。第二FPGA芯片内部使用两个寄存器对检测到的主链路状态和备链路状态进行寄存用于表示主备链路检测到的状态；其中，link_m=1代表主链路正常，link_m=0代表主链路异常；link_s=1代表备链路正常，link_s=0代表备链路异常。一实施例中，对状态指示信号进行实时监控后，当主链路状态存在异常且备链路正常时，第二FPGA芯片会切换选择使用备链路的备音视频编码数据进行音视频数据解码处理，并在检测到主链路恢复正常后，重新切换选择主链路的主音视频编码数据进行音视频数据解码处理，通过实时异常检测及切换数据流的方法实现了主链路异常时无缝切换到备链路，以使最终恢复出两路带有标签位的无损音视频数据流，其中，所述两路带有标签比特位的无损音视频数据流为无损音频数据和无损视频数据。一实施例中，对于解码出来的两路带有标签比特位的无损音视频数据，获取所述标签比特位，若标签比特位为0则代表该无损音视频数据为无损视频数据，对该无损视频数据去除标签比特位后，再将该无损视频数据送到视频缓存队列中，当视频显示时序到来时，将视频缓存队列中的无损视频数据按顺序读出并输出到HDMI视频输出接口及显示设备；若标签比特位为1则代表该无损音视频数据为无损音频数据，将该无损音视频数据去除标签比特位后，再将该无损音频数据送到音频缓存队列中，当音频输出时序到来时，将音频缓存队列中的无损音频数据按顺序读出并输出到3.5mm音频输出接口。一实施例中，由于实时检测到所述主链路状态异常或恢复正常时，需要将音视频编码数据从主链路切换到备链路或者从备链路重新切换回主链路时，音视频编码数据中的视频编码数据会出现不完整性，因此为了实现视频图像的无缝切换，还需要获取音视频编码数据中的视频编码数据，对所述视频编码数据进行处理。一实施例中，对于音视频编码设备，在向所述音视频解码设备发送所述视频编码数据时，还对所述视频编码数据中的每帧图像编码数据进行循环冗余校验，得到第一循环冗余校验数据，并将所述第一循环冗余校验数据添加到对应的帧图像编码数据中，以使将所述第一循环冗余校验数据发送给所述音视频解码设备。对于音视频解码设备，在接收到音视频解码数据发送的视频编码数据后，对所述视频编码数据中的每帧图像编码数据进行循环冗余校验，得到第二循环冗余校验数据，并将所述第二循环冗余校验数据与所述第一循环冗余校验数据进行对比，若所述第二循环冗余校验数据与所述第一循环冗余校验数据相等，则认为接收到的视频编码数据中的帧图像编码数据完整且正确；若所述第二循环冗余校验数据与所述第一循环冗余校验数据不相等，则认为接收到的视频编码数据中的帧图像编码数据不完整。具体的，音视频编码设备发送视频数据时，将计算出来的第一循环冗余校验数据放置对应的帧图像数据的帧尾；音视频解码设备在接接收到视频编码数据后，会将接收的每帧图像数据写入DDR，其中DDR有两段独立空间缓存2帧的图像数据，并对每帧图像数据进行循环冗余校验计算，计算完一帧图像的第二循环冗余校验数据后，再和帧尾的第一循环冗余校验数据进行对比，若两者对比相等，则将视频编码数据从DDR中读取出来显示；而主备链路存在切换时，切换瞬间由于造成图像不完整性，导致两者对比不相等，当两者对比不相等时，则该帧图像数据不会从DDR中读取出来显示，而是读取上一帧的图像数据，实现一帧的图像冻结，从而保证图像显示的完整性，而下一帧接收的数据将会覆盖不完整帧图像在DDR中的缓存空间，当下一完整帧覆盖了上一不完整帧图像后，FPGA才会将该完整帧读取出来并显示，因此，在主备切换时会有一帧的图像冻结，但由于人眼难以识别一帧的差异视觉上会认为图像连续无缝，实现图像的无缝切换处理。综上，本发明提供的一种基于双光纤的音视频传输方法，通过音视频编码设备中的FPGA芯片对输入的音视频数据进行无损无压缩编码，保证了图像和音频质量，编码后的音视频编码数据复制成两路相同的数据流，两路相同的数据流再通过FPGA芯片内部自带的12.5Gb高速接口发送处理模块分别发送到音视频编码设备中的两个编码端光模块，音视频编码设备中的两个编码端光模块再通过两条光纤线连接解码端的两个解码端光模块，以使音视频解码设备中的FPGA芯片通过内部自带的12.5Gb高速接口接收处理模块接收两路音视频编码数据，同时实时检测主备链路的链路状态，再选择其中一路作为数据解码：当主链路异常时自动切换到备链路，当主链路恢复正常时又自动切换回主链路，实现自动检测异常，并自动切换到备链路，且实现切换过程中无缝切换。解码后的音视频数据分别通过3.5mm接口和HDMI接口发送出去，避免出现音视频中断的情况，保证传输的可靠性。实施例2参见图2，图2是本发明提供的一种基于双光纤的音视频传输系统的一种实施例的硬件设备连接示意图，如图2所示，该系统包括音视频编码设备201和音视频解码设备202，还包括：音频源设备203、视频源设备204、音频输出设备205和显示设备206；其中，所述音视频编码设备201通过3.5mm音频输入线与所述音频源设备203相连接，所述音视频编码设备201通过HDMI视频输入线与所述视频源设备204相连接，所述音视频编码设备201通过主光纤和备光纤和所述音视频解码设备202相连接，所述音视频解码设备202通过HDMI视频输出线与所述显示设备206相连接，所述音视频解码设备202通过3.5mm音频输出线与所述音频输出设备205相连接。一实施例中，如图3所示，图3是音视频编码设备的设备接口功能模块结构示意图。所述音视频编码设备201包括第一FPGA芯片、第一编码端光模块、第二编码端光模块、第一电源模块和第一开关按钮，其中，所述第一FPGA芯片包括音频无损编码处理模块、视频无损编码处理模块和高速接口发送处理模块。一实施例中，所述音视频编码设备201，还包括：第一3.5mm音频接口、第一HDMI接口和第一电源接口；其中，所述第一3.5mm音频接口与所述音频无损编码处理模块相连接，所述第一HDMI接口与所述视频无损编码处理模块相连接，所述第一电源接口与所述第一电源模块相连接。一实施例中，如图4所示，图4是音视频解码设备的设备接口功能模块结构示意图。所述音视频解码设备202包括第二FPGA芯片、第一解码端光模块、第二编码端光模块、第二电源模块和第二开关按钮，其中，所述第二FPGA芯片包括音频解码处理模块、视频解码处理模块、主备链路切换处理模块和高速接口接收处理模块。一实施例中，所述音视频解码设备202还包括：第二3.5mm音频接口、第二HDMI接口和第二电源接口，其中，所述第二3.5mm音频接口与所述音频解码处理模块相连接，所述第二HDMI接口与所述视频解码处理模块相连接，所述第二电源接口与所述第二电源模块相连接。一实施例中，所述第一解码端光模块通过第一光纤线和所述第一解码端光模块相连接，所述第二解码端光模块通过第二光纤先和所述第二解码端光模块相连接；其中，所述第一光纤线可以设置为主光纤线，当所述第一光纤线设置为主光纤线时，设置第二光纤线为备光纤线；所述第一光纤线也可设置为备光纤线，当所述第一光纤线设置为备光纤线时，第二光纤线设置为主光纤线。一实施例中，所述第一FPGA芯片中还包括第一FLASH闪存，所述第二FPGA芯片中还包括第二FLASH闪存和DDR帧缓存；其中，所述第一FLASH闪存和所述第二FLASH闪存分别用于存储对应的FPGA程序，所述DDR帧缓存用处存储帧图像数据。一实施例中，由于音视频解码设备和音视频编码设备都带有电源模块和一个开关按钮，每个开关按钮控制着电源输入是否与电源供电模块导通，当按下开关按钮时，所述电源输入将与电源供电模块导通并开始给对应的设备供电，设备供电后FPGA芯片会从FLASH闪存中加载已固化好的FPGA程序，FPGA程序加载完成后设备功能运行。一实施例中，所述音视频编码设备，用于对获取的音视频数据进行编码处理，得到音视频编码数据，并将所述音视频编码数据进行复制，得到第一音视频编码数据和第二音视频编码数据，并基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备；一实施例中，所述音视频解码设备，用于接收所述第一音视频编码数据和所述第二音视频编码数据，并将所述第一音视频编码数据设置为主音视频编码数据，所述第二音视频编码数据设置为备音视频编码数据。一实施例中，所述音视频解码设备，还用于获取所述主音视频编码数据对应的主链路状态，以及所述备音视频编码数据对应的备链路状态，实时判断所述主链路状态和所述备链路状态是否异常。一实施例中，所述音视频解码设备，还用于当所述主链路状态正常时，对所述主音视频编码数据进行解码处理；当所述主链路状态异常、所述备链路状态正常时，则将主音视频编码数据切换为所述备音视频编码数据，并对所述备音视频编码数据进行解码处理，直至生成音视频解码数据，并输出所述音视频数据。一实施例中，所述音视频编码设备，用于基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备，具体的，控制高速接口发送处理模块分别将所述第一音视频编码数据和所述第二音视频编码数据发送到对应的第一编码端光模块和第二编码端光模块，以使所述第一编码端光模块和所述第二编码端光模块基于双光纤将所述第一音视频编码数据和所述第二音视频编码数据发送到音视频解码设备中的第一解码端光模块和第二解码端光模块，并使音视频解码设备中的高速接口接收处理模块接收所述第一解码端光模块和所述第二解码端光模块中的所述第一音视频编码数据和所述第二音视频编码数据。一实施例中，所述音视频解码设备，用于实时判断所述主链路状态和所述备链路状态是否异常；具体的，获取所述主音视频编码数据对应的第一解码状态指示信号，将所述第一解码状态指示信号与预设解码异常状态指示信号进行对比；若所述第一解码状态指示信号与所述预设解码异常状态指示信号相同，则认为所述主音视频编码数据对应的链路状态异常，否则，则认为所述主音视频编码数据对应的链路正常；获取所述备音视频编码数据对应的第二解码状态指示信号，将所述第二解码状态指示信号与预设解码异常状态指示信号进行对比；若所述第二解码状态指示信号与所述预设解码异常状态指示信号相同，则认为所述备音视频编码数据对应的链路状态异常，否则，则认为所述备音视频编码数据对应的链路正常。一实施例中，所述音视频编码设备，用于对获取的音视频数据进行编码处理，得到音视频编码数据；具体的，获取音频源设备中的音源数据，对所述音源数据设置音源指示标签，得到音频编码数据；获取视频源设备中的视频数据，对所述视频数据设置视频指示标签；得到视频编码数据。一实施例中，所述音视频编码设备，用于将所述音视频编码数据进行复制，得到第一音视频编码数据和第二音视频编码数据；具体的，监控视频缓存队列中的视频缓存量和音频缓存队列中的音频缓存量，并将所述视频缓存量和所述音频缓存量进行对比；当所述视频缓存量大于或等于所述音频缓存量时，优选读取所述视频缓存队列中的视频编码数据，并将所述视频编码数据复制成相同的第一视频编码数据和第二视频编码数据；当所述视频缓存量小于所述音频缓存量时，优选读取所述音频缓存队列中的音频编码数据，并将所述音频编码数据复制成相同的第一音频编码数据和第二音频编码数据。所属领域的技术人员可以清楚的了解到，为描述的方便和简洁，上述描述的系统的具体工作过程，可以参考前述方法实施例中的对应过程，在此不在赘述。综上，本发明提供了一种基于双光纤的音视频传输方法及系统，该方法通过对输入的音视频数据进行无损无压缩编码，保证了图像和音频质量，并将得到的音视频编码数据进行复制相同的两路视频编码数据，并基于双光纤将两路视频编码数据发送到音视频解码设备；并在音视频解码设备接收到两路音视频编码数据后，实时检测主备链路的链路状态，当主链路恢复正常时，选取主链路对应的主音视频编码数据进行解码处理：当主链路异常时自动切换到备链路，实现自动检测异常，并自动切换到备链路，且实现切换过程中无缝切换，避免出现音视频中断的情况，保证传输的可靠性。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明技术原理的前提下，还可以做出若干改进和替换，这些改进和替换也应视为本发明的保护范围。
