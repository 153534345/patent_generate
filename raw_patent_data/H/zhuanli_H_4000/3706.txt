标题title
基于I-V特性曲线的光伏组件电流失配故障诊断方法
摘要abst
本发明提供了一种基于I‑V特性曲线的光伏组件电流失配故障诊断方法，属于光伏发电技术领域。该故障诊断方法首先获取光伏组件的I‑V输出特性曲线数据，然后对I‑V输出特性曲线数据进行平滑处理以消除异常数据值，以光伏组件平滑后的I‑V特性曲线上每相邻两点构成直线，计算每相邻两直线间的夹角，得到光伏组件电流失配故障特征值，通过判断电流失配故障特征值的最小值与给定阈值的关系诊断电流失配故障。本发明利用光伏组件I‑V特性曲线可以简单快捷地诊断出电流失配故障，适用于具备光伏组件I‑V扫描功能的光伏系统，可以有效预防电流失配故障带来的危害，有利于提高光伏系统的可靠性和发电效率。
权利要求书clms
1.一种基于I-V特性曲线的光伏组件电流失配故障诊断方法，该故障诊断方法涉及的光伏组件为光伏组串中的一个，所述光伏组串由多个结构相同的光伏组件串联而成，每个光伏组件由三个结构相同的光伏子串串联构成，每个光伏子串包括c个光伏电池单元和一个旁路二极管，c个光伏电池单元串联后与旁路二极管反并联；所述故障诊断方法，其特征在于，包括以下步骤：步骤1，先通过带有I-V扫描功能的优化器获取光伏组件的I-V输出特性曲线上的电压-电流数据，得到n组数据，然后对该n组数据按照电压值从大到小依次进行排序，得到排序后的n组数据，将排序后的n组数据组成一个集合G1，G1＝，其中，Ui为排序电压，Ii为与排序电压Ui对应的排序电流，i为排序序号，i＝0，1...n-1；在集合G1的n组数据中，U0＝VOC，I0＝0且Un-1＝0，In-1＝ISC，其中，VOC为光伏组件的开路电压，ISC为光伏组件的短路电流；步骤2，令集合G1中的n个排序电压Ui的值保持不变，对集合G1中的n个排序电流Ii进行N轮平滑处理，其中N为正整数，具体如下：定义步骤1得到的排序电流Ii为0轮平滑排序电流，并改写为I0i，定义经过j轮平滑处理后得到的排序电流为j轮平滑排序电流Iji，其中，j＝1，2...N，i＝0，1...n-1；以0轮平滑排序电流I0i为起点，按照j＝1，2...N的顺序依次对前一轮平滑处理后的电流进行平滑处理，j轮平滑排序电流Iji的赋值规则如下：当排序序号i＝1至n-2时，若满足I≤Ii≤I，则Iji＝Ii；若不满足I≤Ii≤I，则当排序序号i＝0时，则Ij0＝I0；当排序序号i＝n-1时，则Ij＝In-1；N轮平滑处理完成后，得到n个N轮平滑排序电流INi，将该n个N轮平滑排序电流INi赋值到集合G1中，并将赋值后的集合G1记为集合G2，G2＝，其中，Is_i为平滑电流，Us_i为与平滑电流Is_i对应的平滑电压，Us_i＝Ui，Is_i＝INi，i＝0，1...n-1；步骤3，根据步骤2得到的集合G2中的n组数据，以平滑电压Us_i为横轴，以平滑电流Is_i为纵轴，在平面坐标系中找到与n组数据对应的n个数据点，并连接成为一条I-V特性曲线；步骤4，对步骤3得到的I-V特性曲线进行电流失配诊断，具体包括以下步骤：步骤4.1，在步骤3所述的平面坐标系上，作步骤3得到的n个数据点中的每两个相邻数据点之间的连线，共得到n-1条直线，记n-1条直线中的任意一条直线为直线Lt，按照平滑电压由小向大方向排序，将该n-1条直线组成一个集合G3，G3＝，其中t＝1，2，...，n-1；将直线Lt的左端数据点记为起点，右端数据点记为终点，并将直线Lt的斜率记为kt，斜率kt的计算式为：其中，Is_t为直线Lt终点处的平滑电流，Is_t-1为直线Lt-1终点处的平滑电流，Us_t为直线Lt终点处的平滑电压，Us_t-1为直线Lt-1终点处的平滑电压；步骤4.2，按照t＝1，2，...，n-1的顺序，计算集合G3中每相邻两条直线Lt之间的夹角，共得到n-2个夹角，记n-2个夹角中的任意一个为夹角θm，m＝1，2，...，n-2，将组成夹角θm的两条直线分别记为前一直线Lm和后一直线Lm+1，夹角θm的计算式为：其中，km为前一直线Lm的斜率，km+1为后一直线Lm+1的斜率；步骤4.3，定义X为夹角θm的符号函数，m＝1，2，...，n-2，符号函数X的表达式为：定义电流失配特征值F，m＝1，2，...，n-2，电流失配特征值F的计算式为：F＝θmX通过计算共得到n-2个电流失配特征值F，取其中的最小值记为最小电流失配特征值Fmin；步骤4.4，根据步骤4.3得到的最小电流失配特征值Fmin和预先给定的阈值ε，进行电流失配诊断，具体的：若Fmin＜ε，则该光伏组件I-V特性曲线存在异常下凹拐点，该光伏组件存在电流失配；若Fmin≥ε，则该光伏组件不存在电流失配。
说明书desc
技术领域本发明涉及光伏组件故障诊断方法，具体是涉及一种基于I-V特性曲线的光伏组件电流失配故障诊断方法，属于光伏发电技术领域。背景技术在光伏装机容量迅猛增长的大背景下，人们也越来越意识到光伏电站的运行维护技术至关重要。光伏组件作为光伏发电系统中的基础性关键装备，其可靠运行直接决定了系统的能效水平和运营利润。由于实际光伏电站应用于地势或环境相对复杂的场景，光伏组件受环境外因及运行工况影响极易诱发各类缺陷或故障。光伏组件常见的阴影遮挡、热斑、玻璃碎裂等故障会使得光伏组件发生电流失配，I-V特性曲线出现下凹拐点，不仅严重影响光伏组件的输出功率，严重情况下会引发火灾等安全问题。因此，实现光伏组件电流失配故障的在线诊断，可以有效预防电流失配故障带来的危害，有利于提高光伏系统的可靠性和发电效率。文献“Photovoltaic fault detection algorithm based on theoreticalcurves modelling and fuzzy classification system”.《Energy》，2017，140：276-290.提出一种通过对光伏组件理论I-V曲线建模并采用模糊分类的故障诊断方法，能够准确识别出光伏组件存在的故障，但是该方法建模过程复杂，且故障诊断的准确率高度依赖于模型。中国发明专利文献《一种基于K近邻和IV曲线的光伏阵列故障诊断方法》提出一种基于IV曲线提取故障特征并通过K近邻分类算法进行故障诊断的方法，但是该方法依赖于先验知识，且需要大量训练数据。中国发明专利文献《光伏组件故障诊断方法、边缘计算处理装置和逆变器》提出一种通过选取参考IV曲线和其他IV曲线进行对比的方法来诊断光伏组件故障，该方法依赖于参考曲线的选取，且参考曲线的选取过程复杂，诊断过程较为耗时。综上所述，现有技术中还存在着以下问题：1、光伏组件建模过程复杂，参数辨识困难，故障诊断结果依赖于模型精度；2、需要先验知识及大量训练数据，算法实现难度大；3、判别方法复杂，诊断过程较为耗时。发明内容本发明的目的在于克服现有技术中存在的问题，具体的，提供一种基于I-V曲线的光伏组件电流失配故障诊断方法，能够简单便捷地诊断出光伏组件的电流失配故障，可有效避免故障造成的危害，提高光伏系统运行的安全性和可靠性。为达到上述目的，本发明提供了一种基于I-V特性曲线的光伏组件电流失配故障诊断方法，该故障诊断方法涉及的光伏组件为光伏组串中的一个，所述光伏组串由多个结构相同的光伏组件串联而成，每个光伏组件由三个结构相同的光伏子串串联构成，每个光伏子串包括c个光伏电池单元和一个旁路二极管，c个光伏电池单元串联后与旁路二极管反并联；所述故障诊断方法，包括以下步骤：步骤1，先通过带有I-V扫描功能的优化器获取光伏组件的I-V输出特性曲线上的电压-电流数据，得到n组数据，然后对该n组数据按照电压值从大到小依次进行排序，得到排序后的n组数据，将排序后的n组数据组成一个集合G1，G1＝，其中，Ui为排序电压，Ii为与排序电压Ui对应的排序电流，i为排序序号，i＝0，1...n-1；在集合G1的n组数据中，U0＝VOC，I0＝0且Un-1＝0，In-1＝ISC，其中，VOC为光伏组件的开路电压，ISC为光伏组件的短路电流；步骤2，令集合G1中的n个排序电压Ui的值保持不变，对集合G1中的n个排序电流Ii进行N轮平滑处理，其中N为正整数，具体如下：定义步骤1得到的排序电流Ii为0轮平滑排序电流，并改写为I0i，定义经过j轮平滑处理后得到的排序电流为j轮平滑排序电流Iji，其中，j＝1，2...N，i＝0，1...n-1；以0轮平滑排序电流I0i为起点，按照j＝1，2...N的顺序依次对前一轮平滑处理后的电流进行平滑处理，j轮平滑排序电流Iji的赋值规则如下：当排序序号i＝1至n-2时，若满足I≤Ii≤I，则Iji＝Ii；若不满足I≤Ii≤I，则当排序序号i＝0时，则Ij0＝I0；当排序序号i＝n-1时，则Ij＝In-1；N轮平滑处理完成后，得到n个N轮平滑排序电流INi，将该n个N轮平滑排序电流INi赋值到集合G1中，并将赋值后的集合G1记为集合G2，G2＝，其中，Is_i为平滑电流，Us_i为与平滑电流Is_i对应的平滑电压，Us_i＝Ui，Is_i＝INi，i＝0，1...n-1；步骤3，根据步骤2得到的集合G2中的n组数据，以平滑电压Us_i为横轴，以平滑电流Is_i为纵轴，在平面坐标系中找到与n组数据对应的n个数据点，并连接成为一条I-V特性曲线；步骤4，对步骤3得到的I-V特性曲线进行电流失配诊断，具体包括以下步骤：步骤4.1，在步骤3所述的平面坐标系上，作步骤3得到的n个数据点中的每两个相邻数据点之间的连线，共得到n-1条直线，记n-1条直线中的任意一条直线为直线Lt，按照平滑电压由小向大方向排序，将该n-1条直线组成一个集合G3，G3＝，其中t＝1，2，...，n-1；将直线Lt的左端数据点记为起点，右端数据点记为终点，并将直线Lt的斜率记为kt，斜率kt的计算式为：其中，Is_t为直线Lt终点处的平滑电流，Is_t-1为直线Lt-1终点处的平滑电流，Us_t为直线Lt终点处的平滑电压，Us_t-1为直线Lt-1终点处的平滑电压；步骤4.2，按照t＝1，2，...，n-1的顺序，计算集合G3中每相邻两条直线Lt之间的夹角，共得到n-2个夹角，记n-2个夹角中的任意一个为夹角θm，m＝1，2，...，n-2，将组成夹角θm的两条直线分别记为前一直线Lm和后一直线Lm+1，夹角θm的计算式为：其中，km为前一直线Lm的斜率，km+1为后一直线Lm+1的斜率；步骤4.3，定义X为夹角θm的符号函数，m＝1，2，...，n-2，符号函数X的表达式为：定义电流失配特征值F，m＝1，2，...，n-2，电流失配特征值F的计算式为：F＝θmX通过计算共得到n-2个电流失配特征值F，取其中的最小值记为最小电流失配特征值Fmin；步骤4.4，根据步骤4.3得到的最小电流失配特征值Fmin和预先给定的阈值ε，进行电流失配诊断，具体的：若Fmin＜ε，则该光伏组件I-V特性曲线存在异常下凹拐点，该光伏组件存在电流失配；若Fmin≥ε，则该光伏组件不存在电流失配。与现有技术相比，本发明的有益效果是：1、可简单快捷的诊断出光伏组件的电流失配故障；2、无需额外设备，不依赖模型和环境参数，经济便捷；3、可实时在线诊断并为运维人员提供告警；4、可实际应用于具有光伏组件I-V扫描功能的光伏阵列，提高光伏系统的发电效率和可靠性。附图说明图1为本发明实施例中光伏组件结构示意图；图2为本发明光伏组件电流失配故障诊断方法的流程图；图3为光伏组件I-V特性曲线存在异常点的I-V特性曲线图；图4为光伏组件平滑处理后的I-V特性曲线图；图5为光伏组件存在电流失配故障的I-V特性曲线图；图6为本发明光伏组件电流失配故障诊断方法示意图；图7为光伏组件不存在电流失配故障时本发明光伏组件电流失配故障诊断方法步骤4的示意图；图8为光伏组件存在电流失配故障时本发明光伏组件电流失配故障诊断方法步骤4的示意图。具体实施方式下面结合具体实施例和附图对本发明作进一步的说明：图1为本发明实施例中光伏组件结构示意图，由图1可见，该故障诊断方法涉及的光伏组件为光伏组串中的一个，所述光伏组串由多个结构相同的光伏组件串联而成，每个光伏组件由三个结构相同的光伏子串串联构成，每个光伏子串包括c个光伏电池单元和一个旁路二极管，c个光伏电池单元串联后与旁路二极管反并联。在本实施例中，c＝20。图2为本发明光伏组件电流失配故障诊断方法的流程图。由该图可见，本发明所述基于I-V特性曲线的光伏组件电流失配故障诊断方法，包括以下步骤：步骤1，先通过带有I-V扫描功能的优化器获取光伏组件的I-V输出特性曲线上的电压-电流数据，得到n组数据，然后对该n组数据按照电压值从大到小依次进行排序，得到排序后的n组数据，将排序后的n组数据组成一个集合G1，G1＝，其中，Ui为排序电压，Ii为与排序电压Ui对应的排序电流，i为排序序号，i＝0，1...n-1；在集合G1的n组数据中，U0＝VOC，I0＝0且Un-1＝0，In-1＝ISC，其中，VOC为光伏组件的开路电压，ISC为光伏组件的短路电流。步骤2，令集合G1中的n个排序电压Ui的值保持不变，对集合G1中的n个排序电流Ii进行N轮平滑处理，其中N为正整数，具体如下：定义步骤1得到的排序电流Ii为0轮平滑排序电流，并改写为I0i，定义经过j轮平滑处理后得到的排序电流为j轮平滑排序电流Iji，其中，j＝1，2...N，i＝0，1...n-1；以0轮平滑排序电流I0i为起点，按照j＝1，2...N的顺序依次对前一轮平滑处理后的电流进行平滑处理，j轮平滑排序电流Iji的赋值规则如下：当排序序号i＝1至n-2时，若满足I≤Ii≤I，则Iji＝Ii；若不满足I≤Ii≤I，则当排序序号i＝0时，则Ij0＝I0；当排序序号i＝n-1时，则Ij＝In-1；N轮平滑处理完成后，得到n个N轮平滑排序电流INi，将该n个N轮平滑排序电流INi赋值到集合G1中，并将赋值后的集合G1记为集合G2，G2＝，其中，Is_i为平滑电流，Us_i为与平滑电流Is_i对应的平滑电压，Us_i＝Ui，Is_i＝INi，i＝0，1...n-1。图3为光伏组件I-V特性曲线存在异常点的I-V特性曲线图，横坐标轴为光伏组件的电压，纵坐标轴为光伏组件的电流，由优化器获取的光伏组件I-V数据可能存在数据的异常，如异常的上凸点或下凹点，使用原始I-V数据会影响故障诊断结果，因此需要对光伏组件I-V特性曲线中的异常值进行平滑处理。图4为光伏组件平滑处理后的I-V特性曲线图，横坐标轴为光伏组件的电压，纵坐标轴为光伏组件的电流，针对图3中出现的光伏组件I-V特性曲线中的异常值，对其进行N轮平滑处理，由图4可见，经过N轮平滑处理后，可以消除I-V特性曲线上的异常值，得到较为平滑的I-V特性曲线，用于后续的电流失配故障诊断。本实施例中平滑处理轮数N＝3。步骤3，根据步骤2得到的集合G2中的n组数据，以平滑电压Us_i为横轴，以平滑电流Is_i为纵轴，在平面坐标系中找到与n组数据对应的n个数据点，并连接成为一条I-V特性曲线。步骤4，对步骤3得到的I-V特性曲线进行电流失配诊断，具体包括以下步骤：步骤4.1，在步骤3所述的平面坐标系上，作步骤3得到的n个数据点中的每两个相邻数据点之间的连线，共得到n-1条直线，记n-1条直线中的任意一条直线为直线Lt，按照平滑电压由小向大方向排序，将该n-1条直线组成一个集合G3，G3＝，其中t＝1，2，...，n-1；将直线Lt的左端数据点记为起点，右端数据点记为终点，并将直线Lt的斜率记为kt，斜率kt的计算式为：其中，Is_t为直线Lt终点处的平滑电流，Is_t-1为直线Lt-1终点处的平滑电流，Us_t为直线Lt终点处的平滑电压，Us_t-1为直线Lt-1终点处的平滑电压；步骤4.2，按照t＝1，2，...，n-1的顺序，计算集合G3中每相邻两条直线Lt之间的夹角，共得到n-2个夹角，记n-2个夹角中的任意一个为夹角θm，m＝1，2，...，n-2，将组成夹角θm的两条直线分别记为前一直线Lm和后一直线Lm+1，夹角θm的计算式为：其中，km为前一直线Lm的斜率，km+1为后一直线Lm+1的斜率；步骤4.3，定义X为夹角θm的符号函数，m＝1，2，...，n-2，符号函数X的表达式为：定义电流失配特征值F，m＝1，2，...，n-2，电流失配特征值F的计算式为：F＝θmX通过计算共得到n-2个电流失配特征值F，取其中的最小值记为最小电流失配特征值Fmin；步骤4.4，根据步骤4.3得到的最小电流失配特征值Fmin和预先给定的阈值ε，进行电流失配诊断，具体的：若Fmin＜ε，则该光伏组件I-V特性曲线存在异常下凹拐点，该光伏组件存在电流失配；若Fmin≥ε，则该光伏组件不存在电流失配。图5为光伏组件存在电流失配故障的I-V特性曲线图，当光伏组件中存在阴影遮挡、热斑、玻璃碎裂故障时，此时光伏组件发生电流失配故障，失配光伏组件的I-V特性曲线较正常光伏组件I-V特性曲线发生改变，即失配光伏组件的I-V特性曲线出现下凹的拐点。图6为本发明光伏组件电流失配故障诊断方法示意图，其中横坐标轴为光伏组件的电压，纵坐标轴为光伏组件的电流，根据光伏组件I-V特性曲线上每相邻两点构成的直线求取每相邻两直线间的夹角，进一步计算电流失配特征值，通过判断最小电流失配特征值Fmin和给定的阈值ε的大小关系即可判断光伏组件中是否存在电流失配故障。图7为光伏组件不存在电流失配故障时本发明光伏组件电流失配故障诊断方法步骤4的示意图，其中横坐标轴为光伏组件的电压，纵坐标轴为光伏组件的电流，由图7可见，当光伏组件中不存在电流失配时，其电流失配特征值F的最小值Fmin在0值附近，F无明显的负跃变，且并未超过给定的阈值ε，该光伏组件不存在电流失配故障。图8为光伏组件存在电流失配故障时本发明光伏组件电流失配故障诊断方法步骤4的示意图，以阴影遮挡的光伏组件I-V特性曲线为例，如图8所示，当光伏组件中存在电流失配时，其I-V特性曲线出现下凹的拐点，设I-V特性曲线上的下凹的拐点坐标为，直线La和直线La+1之间的夹角为θa，由于直线La的斜率ka小于直线La+1的斜率ka+1，所以夹角θa的符号函数X＝-1，电流失配特征值F在I-V特性曲线的下凹拐点处发生明显的负跃变，且F的最小值Fmin明显小于不存在电流失配故障的情况，此时，最小电流失配特征值Fmin小于给定的阈值ε，该光伏组件存在电流失配故障。
