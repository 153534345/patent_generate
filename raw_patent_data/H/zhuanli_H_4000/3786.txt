标题title
一种基于边缘计算及虚拟化技术的数控机床数据采集方法
摘要abst
本申请涉及一种基于边缘计算及虚拟化技术的数控机床数据采集方法，所述方法包括：创建数控机床设备的虚拟化层，并在所述虚拟化层上分别部署CNC系统与边缘计算平台；创建所述边缘计算平台所对应的OPC UA客户端，并在所述CNC系统上创建与所述OPC UA客户端进行通信的OPC UA服务器；所述OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并以消息通知的形式，按照定期发布间隔发送至所述OPC UA客户端。相比现有技术，本发明能够充分利用当前数控机床的算力资源，并且减少了工控网络改造和维护成本，满足了实际应用需求。
权利要求书clms
1.一种基于边缘计算及虚拟化技术的数控机床数据采集方法，其特征在于，所述方法包括以下步骤：创建数控机床设备的虚拟化层，并在所述虚拟化层上分别部署CNC系统与边缘计算平台；创建所述边缘计算平台所对应的OPC UA客户端，并在所述CNC系统上创建与所述OPCUA客户端进行通信的OPC UA服务器；所述OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并以消息通知的形式，按照定期发布间隔发送至所述OPC UA客户端。2.根据权利要求1所述的基于边缘计算及虚拟化技术的数控机床数据采集方法，其特征在于，创建数控机床设备的虚拟化层，并在所述虚拟化层上分别部署CNC系统与边缘计算平台，具体包括：获取所述数控机床设备的物理层，在所述数控机床的物理层上创建虚拟化层；在所述虚拟化层上分别创建第一虚拟机及第二虚拟机，并在所述第一虚拟机上部署CNC系统，在所述第二虚拟机上部署边缘计算平台；其中，所述CNC系统用于对所述数控机床设备进行运行控制，所述边缘计算平台用于适配CNC系统协议并在采集机床工作状态数据后，将机床工作状态数据同步至云服务端。3.根据权利要求1所述的基于边缘计算及虚拟化技术的数控机床数据采集方法，其特征在于，所述OPC UA客户端通过OPC UA适配器与所述OPC UA服务器建立连接、保持会话、以及订阅获得数控机床设备的机床工作状态数据；其中，所述数控机床设备的机床工作状态数据包括实时监控工艺参数、历史数据、过程数据及刀具数据。4.根据权利要求2所述的基于边缘计算及虚拟化技术的数控机床数据采集方法，其特征在于，所述OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并以消息通知的形式，按照定期发布间隔发送至所述OPC UA客户端，具体包括：所述OPC UA客户端基于OPC UA协议，从所述OPC UA服务器订阅实时采集到的所述数控机床设备的机床作状态数据；所述OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并将所述机床工作状态数据存放至OPC UA客户端的消息缓存队列中；以消息通知的形式，将所述数控机床设备的机床工作状态数据，按照定期发布间隔发送至所述OPC UA客户端。5.根据权利要求4所述的基于边缘计算及虚拟化技术的数控机床数据采集方法，其特征在于，所述方法还包括：所述OPC UA客户端按照OPC UA数据模型，对接收到的所述数控机床设备的机床工作状态数据进行逐条解析与数据处理；将进行数据处理后的所述机床工作状态数据发送至所述边缘计算平台，所述边缘计算平台按需将所述数控机床设备的工作状态数据入库持久化存储。6.根据权利要求5所述的基于边缘计算及虚拟化技术的数控机床数据采集方法，其特征在于，所述边缘计算平台包括第一MQTT客户端、以及与所述第一MQTT客户端通信的MQTT消息服务模块；所述云服务端包括第二MQTT客户端，所述方法还包括：所述第一MQTT客户端接收经OPC UA客户端进行数据处理后所述机床工作状态数据，并将进行数据处理后的所述机床工作状态数据发送至所述MQTT消息服务模块；所述第二MQTT客户端通过TLS加密通道，实时获取所述数控机床设备的机床工作状态数据，并在云服务端校验后持久化存储到大数据平台。7.根据权利要求6所述的基于边缘计算及虚拟化技术的数控机床数据采集方法，其特征在于，所述边缘计算平台还包括数据Web服务模块，所述云服务端还包括一HTTP客户端；所述方法还包括：所述云服务端通过HTTP客户端调用查询接口，并通过查询接口向所述Web服务模块发送查询请求信息；所述Web服务模块根据所述查询请求信息，将符合条件的所述数控机床设备的机床工作状态数据通过TLS加密通道传输至云服务端，并在云服务端校验后持久化存储到大数据平台。8.一种基于边缘计算及虚拟化技术的数控机床数据采集系统，其特征在于，所述系统包括：数控机床设备，用于创建数控机床设备的虚拟化层，并在所述虚拟化层上分别部署CNC系统与边缘计算平台；虚拟网络，用于在所述边缘计算平台上创建OPC UA客户端，并在所述CNC系统上创建与所述OPC UA客户端进行通信的OPC UA服务器；OPC UA服务器，用于以固定采样频率读取所述数控机床设备的机床工作状态数据，并以消息通知的形式，按照定期发布间隔发送至所述OPC UA客户端。9.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质包括存储的计算机程序；其中，所述计算机程序在运行时控制所述计算机可读存储介质所在的设备执行如权利要求1至7任意一项所述的基于边缘计算及虚拟化技术的数控机床数据采集方法。10.一种工业设备，其特征在于，包括处理器、存储器以及存储在所述存储器中且被配置为由所述处理器执行的计算机程序，所述处理器在执行所述计算机程序时实现如权利要求1至7任意一项所述的基于边缘计算及虚拟化技术的数控机床数据采集方法。
说明书desc
技术领域本申请涉及工业技术领域，特别是涉及一种基于边缘计算及虚拟化技术的数控机床数据采集方法、系统、存储介质及工业设备。背景技术随着信息化与工业化的深度融合，信息技术渗透到了工业企业产业链的各个环节，推动了以“智能化生产、个性化定制、网络化协同和服务化延伸”为代表的新兴智能制造模式的发展，其核心是基于海量工业数据的全面感知。工业数据采集可以实现对生产现场各种工业数据的实时采集和整理，为企业上层信息系统提供大量工业数据，通过对积累沉淀的工业大数据的深入挖掘，实现生产过程优化和智能化决策。数控机床是工业生产中的重要单元，数控机床数据采集也是工业数据采集的重要环节。与当下流行的工业数据采集流程相同，数控机床数据采集流程可划分设备接入、协议解析与转换、边缘数据处理、边云数据同步四个主要步骤。一般的数控机床数据采集方法通过改造工业控制网络，在工业总线上加装数据采集卡实现机床设备连接和协议解析与转换，并另外安装边缘计算网关等边缘智能设备进行边缘数据处理，最后将边缘处理过的数据通过接口或文件的方式传输到云服务端。该类方法需要在一定程度上改造工业控制网络，并在数控机床外围引入新的硬件设备辅助数据采集，导致数据采集成本较高且提高了后续运维的复杂性。因此，亟需提供一种能够充分利用当前数控机床的算力资源，并且减少了工控网络改造和维护成本的方案。发明内容基于此，有必要针对上述技术问题，提供一种能够充分利用当前数控机床的算力资源，并且减少了工控网络改造和维护成本的基于边缘计算及虚拟化技术的数控机床数据采集方法、系统、介质及设备。本发明实施例提供了一种基于边缘计算及虚拟化技术的数控机床数据采集方法，所述方法包括以下步骤：创建数控机床设备的虚拟化层，并在所述虚拟化层上分别部署CNC系统与边缘计算平台；创建所述边缘计算平台所对应的OPC UA客户端，并在所述CNC系统上创建与所述OPC UA客户端进行通信的OPC UA服务器；所述OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并以消息通知的形式，按照定期发布间隔发送至所述OPC UA客户端。进一步地，创建数控机床设备的虚拟化层，并在所述虚拟化层上分别部署CNC系统与边缘计算平台，具体包括：获取所述数控机床设备的物理层，在所述数控机床的物理层上创建虚拟化层；在所述虚拟化层上分别创建第一虚拟机及第二虚拟机，并在所述第一虚拟机上部署CNC系统，在所述第二虚拟机上部署边缘计算平台；其中，所述CNC系统用于对所述数控机床设备进行运行控制，所述边缘计算平台用于适配CNC系统协议并在采集机床工作状态数据后，将机床工作状态数据同步至云服务端。进一步地，所述OPC UA客户端通过OPC UA适配器与所述OPC UA服务器建立连接、保持会话、以及订阅获得数控机床设备的机床工作状态数据；其中，所述数控机床设备的机床工作状态数据包括实时监控工艺参数、历史数据、过程数据及刀具数据。进一步地，所述OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并以消息通知的形式，按照定期发布间隔发送至所述OPC UA客户端，具体包括：所述OPC UA客户端基于OPC UA协议，从所述OPC UA服务器订阅实时采集到的所述数控机床设备的机床作状态数据；所述OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并将所述机床工作状态数据存放至OPC UA客户端的消息缓存队列中；以消息通知的形式，将所述数控机床设备的机床工作状态数据，按照定期发布间隔发送至所述OPC UA客户端。进一步地，所述方法还包括：所述OPC UA客户端按照OPC UA数据模型，对接收到的所述数控机床设备的机床工作状态数据进行逐条解析与数据处理；将进行数据处理后的所述机床工作状态数据发送至所述边缘计算平台，所述边缘计算平台按需将所述数控机床设备的工作状态数据入库持久化存储。进一步地，所述边缘计算平台包括第一MQTT客户端、以及与所述第一MQTT客户端通信的MQTT消息服务模块；所述云服务端包括第二MQTT客户端，所述方法还包括：所述第一MQTT客户端接收经OPC UA客户端进行数据处理后所述机床工作状态数据，并将进行数据处理后的所述机床工作状态数据发送至所述MQTT消息服务模块；所述第二MQTT客户端通过TLS加密通道，实时获取所述数控机床设备的机床工作状态数据，并在云服务端校验后持久化存储到大数据平台。进一步地，所述边缘计算平台还包括数据Web服务模块，所述云服务端还包括一HTTP客户端；所述方法还包括：所述云服务端通过HTTP客户端调用查询接口，并通过查询接口向所述Web服务模块发送查询请求信息；所述Web服务模块根据所述查询请求信息，将符合条件的所述数控机床设备的机床工作状态数据通过TLS加密通道传输至云服务端，并在云服务端校验后持久化存储到大数据平台。本发明的另一实施例提出一种基于边缘计算及虚拟化技术的数控机床数据采集系统，所述系统包括：数控机床设备，用于创建所述数控机床设备的虚拟化层，并在所述虚拟化层上分别部署CNC系统与边缘计算平台；虚拟网络，用于在所述边缘计算平台上创建OPC UA客户端，并在所述CNC系统上创建与所述OPC UA客户端进行通信的OPC UA服务器；OPC UA服务器，用于以固定采样频率读取所述数控机床设备的机床工作状态数据，并以消息通知的形式，按照定期发布间隔发送至所述OPC UA客户端。本发明的另一个实施例还提出一种计算机可读存储介质，所述计算机可读存储介质包括存储的计算机程序；其中，所述计算机程序在运行时控制所述计算机可读存储介质所在的设备执行如上所述的基于边缘计算及虚拟化技术的数控机床数据采集方法。本发明的另一个实施例还提出一种工业设备，包括处理器、存储器以及存储在所述存储器中且被配置为由所述处理器执行的计算机程序，所述处理器在执行所述计算机程序时实现如上所述的基于边缘计算及虚拟化技术的数控机床数据采集方法。上述基于边缘计算及虚拟化技术的数控机床数据采集方法，首先创建数控机床设备的虚拟化层，并在所述虚拟化层上分别部署CNC系统与边缘计算平台；创建所述边缘计算平台所对应的OPC UA客户端，并在所述CNC系统上创建与所述OPC UA客户端进行通信的OPCUA服务器；所述OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并以消息通知的形式，按照定期发布间隔发送至所述OPC UA客户端。相比现有技术，本发明能够充分利用当前数控机床的算力资源，并且减少了工控网络改造和维护成本，满足了实际应用需求。附图说明图1为本发明实施例提供的基于边缘计算及虚拟化技术的数控机床数据采集方法的流程示意图；图2为本发明实施例提供的基于边缘计算及虚拟化技术的数控机床数据采集系统的结构框图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本技术领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。需要说明的是，文中的步骤编号，仅为了方便具体实施例的解释，不作为限定步骤执行先后顺序的作用。本实施例提供的方法可以由相关的服务器执行，且下文均以服务器作为执行主体为例进行说明。如图1所示，本发明实施例提供的基于边缘计算及虚拟化技术的数控机床数据采集方法，所述方法包括步骤S11至步骤S13：步骤S11，创建数控机床设备的虚拟化层，并在所述虚拟化层上分别部署CNC系统与边缘计算平台。如上所述，本发明的整体架构主要包括数控机床设备及云服务端；其中，所述数控机床设备主要包括工控模块及机床加工模块，所述CNC系统与边缘计算平台分别部署于所述工控模块上。进一步地，针对所述工控模块，首先获取所述数控机床设备中工控模块的物理层，采用虚拟化技术将所述工控模块进行虚拟化，并在所述物理层上创建所述工控模块虚拟化后所对应的虚拟化层。然后，在所述虚拟化层上分别创建第一虚拟机及第二虚拟机，并在所述第一虚拟机上部署CNC系统，在所述第二虚拟机上部署边缘计算平台，从而使所述CNC系统与边缘计算平台处于同一本地虚拟网络中，可相互通信，避免机床工作状态数据的跨网段传输，在同一局域网中即可实现机床工作状态数据的采集和处理，保障了数据采集的实时性和安全性。其中，所述CNC系统用于对所述数控机床设备进行运行控制，所述边缘计算平台用于适配CNC系统协议并在采集机床工作状态数据后，将机床工作状态数据同步至云服务端。从逻辑层面看，本发明的整体系统架构可分为“端-边-云”三层架构，“端”即CNC系统，“边”即边缘计算平台，“云”云服务端。在本发明环境下，“边”和“端”是靠近的，物理上部署于同一硬件环境，处于同一虚拟局域网，网络状况好且稳定，可保障数据传输的实时性、稳定性和可靠性；“边”和“云”则是分开的，通过复杂的广域网连接通信，通过多种数据同步方法保障数据传输的实时性、稳定性和可靠性。步骤S12，创建所述边缘计算平台所对应的OPC UA客户端，并在所述CNC系统上创建与所述OPC UA客户端进行通信的OPC UA服务器。如上所述，在所述边缘计算平台上创建OPC UA客户端，在所述CNC系统上创建与所述OPC UA客户端进行通信的OPC UA服务器。所述OPC UA客户端通过OPC UA适配器与所述OPC UA服务器建立连接、保持会话、以及订阅获得数控机床设备的机床工作状态数据。其中，所述边缘计算平台与CNC系统基于OPC UA协议进行通信，从所述OPC UA服务器订阅实时采集到的所述数控机床设备的机床作状态数据。所述OPC UA服务器用于描述CNC系统与OPC UA客户端交换数据，OPC UA服务器与OPC UA客户端通过会话通讯。步骤S13，所述OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并以消息通知的形式，按照定期发布间隔发送至所述OPC UA客户端。具体的，所述OPC UA服务和OPC UA客户端之间使用订阅模式，OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并将所述机床工作状态数据存放至OPC UA客户端的消息缓存队列中，然后以消息通知的形式，将所述数控机床设备的机床工作状态数据，按照定期发布间隔发送至所述OPC UA客户端。可以理解的，若采样间隔短于发布间隔，机床工作状态数据可暂存于队列，直至发布间隔到来再发送出去。OPC UA 服务器定周期地发送保持活动消息，向对应的OPC UA客户端指示连接仍然活跃。同时，本发明的OPC UA客户端除了与OPC UA服务器建立连接、保持会话及订阅获得采集数据外，还负责将从机床加工模块采集而来的消息数据进行预处理，包括转换数据格式、空值处理及语义转换等。其中，所述数控机床设备的机床工作状态数据包括实时监控工艺参数、历史数据、过程数据及刀具数据。所述实时监控工艺参数包括进给F、转速S、功率POWER及程序PROGRAM；所述历史数据包括机床操作履历、报警履历、及加工工件数量；所述过程数据包括坐标、伺服轴电流Ⅰ及行程；所述刀具数据包括刀具号、刀具库容量、刀具切削时间及刀具装载时间。可以理解的，本实施例中，从OPC UA服务器订阅得到的机床工作状态数据首先将存放到OPC UA客户端消息缓存队列，然后由OPC UA客户端基于OPC UA服务器定义的OPC UA数据模型对消息数据逐条解析，按照OPC UA数据模型节点层级结构，对节点属性信息如地址空间、数值类型、标识信息等进行处理，对节点对应的数值内容进行转换处理，形成层级清晰、语义可读的键值对组合，满足后续边缘计算平台与云服务端同步数据的格式要求。优选的，在其他实施例中，所述边缘计算平台包括第一MQTT客户端、以及与所述第一MQTT客户端通信的MQTT消息服务模块；所述云服务端包括第二MQTT客户端，所述方法还包括：所述第一MQTT客户端接收经OPC UA客户端进行数据处理后所述机床工作状态数据，并将进行数据处理后的所述机床工作状态数据发送至所述MQTT消息服务模块；所述第二MQTT客户端通过TLS加密通道与所述MQTT消息服务模块进行通信，从所述MQTT消息服务模块中实时获取所述数控机床设备的机床工作状态数据，并在云服务端校验后持久化存储到大数据平台。可以理解的，边缘计算平台内置MQTT消息服务模块，机床工作状态数据经过采集、处理并校验后，使用第一MQTT客户端发送到MQTT消息服务队列；此时，云服务端内置第二MQTT客户端通过订阅此类消息，经TLS加密通道实时获取机床工作状态数据，并在云服务端校验后持久化存储到大数据平台，供后续分析应用。优选的，在其他实施例中，所述边缘计算平台还包括数据Web服务模块，所述云服务端还包括一HTTP客户端；所述方法还包括：所述云服务端通过HTTP客户端调用查询接口，并通过查询接口向所述Web服务模块发送查询请求信息；所述Web服务模块根据所述查询请求信息，将符合条件的所述数控机床设备的机床工作状态数据通过TLS加密通道传输至云服务端，并在云服务端校验后持久化存储到大数据平台。可以理解的，边缘计算平台从CNC系统获取机床工作状态数据后，经处理校验后以时间序列格式暂存到本地数据库，内置数据Web服务模块，对外提供数据查询服务；云服务端可使用HTTP客户端调用查询接口，设定数据查询条件，如时间范围、属性字段等，经TLS加密后获取机床工作状态数据并持久到大数据平台。在此还需要说明的是，本发明利用当前数控机床设备中工控模块充沛的算力资源，基于虚拟化技术实现在工控模块上运行多个虚拟机，构建虚拟化网络；CNC系统及其依赖的Windows系统部署于一个虚拟机上，边缘计算平台及其依赖的Linux系统则部署于另一个虚拟机上；同时基于边缘计算技术实时、稳定、高效地从CNC系统采集机床工作状态数据数据并同步到云服务端。与传统数控机床数采方法相比，充分利用了当前数控机床设备中工控模块的算力资源，并且减少了工控网络改造和维护成本，更加便捷、高效地进行机床数据采集。具体技术优点如下：通过虚拟化技术提升数控机床设备中工业模块资源使用和调度效率，避免计算资源浪费，实现CNC系统和边缘计算平台同机部署运行。与传统数控机床设备的机床工作状态数据采集方法需要额外引入数据采集卡、边缘计算网关等设备相比，本发明方法将边缘计算平台和CNC系统部署于同一台设备上，降低了环境改造和升级运维成本，同时简化了数据采集网络布线。边缘计算平台与CNC系统部署于同一计算环境，处于同一虚拟局域网，两系统间数据传输时延低，同时采用高效的发布/订阅数据交换模式，保障了机床工作状态数据边缘采集的实时性。边缘计算平台采集数控机床设备的机床工作状态数据后，将数据存储到本地，能够缓解异常情况下数据丢失问题，保障数据采集的可靠性。基于“云-边-端”三层架构的机床数据采集体系中，边缘计算平台与CNC系统处于同一设备，能够有效隔离外部安全攻击；边缘计算平台与云服务端之间采用TLS加密传输，有效保障了数据采集传输安全。边缘计算平台与数控机床CNC系统之间，基于OPC UA协议，实现机床工作状态数据实时、规范采集。上述基于边缘计算及虚拟化技术的数控机床数据采集方法，首先创建数控机床设备的虚拟化层，并在所述虚拟化层上分别部署CNC系统与边缘计算平台；创建所述边缘计算平台所对应的OPC UA客户端，并在所述CNC系统上创建与所述OPC UA客户端进行通信的OPCUA服务器；所述OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并以消息通知的形式，按照定期发布间隔发送至所述OPC UA客户端。相比现有技术，本发明能够充分利用当前数控机床的算力资源，并且减少了工控网络改造和维护成本，满足了实际应用需求。应该理解的是，虽然上述流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，上述流程图中的至少一部分步骤可以包括多个子步骤或者多个阶段，这些子步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些子步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤的子步骤或者阶段的至少一部分轮流或者交替地执行。请参阅图2，本发明提供还提供了一种基于边缘计算及虚拟化技术的数控机床数据采集系统，所述系统包括：数控机床设备21，用于创建所述数控机床设备的虚拟化层，并在所述虚拟化层上分别部署CNC系统与边缘计算平台。具体的，获取所述数控机床设备的物理层，在所述数控机床的物理层上创建虚拟化层；在所述虚拟化层上分别创建第一虚拟机及第二虚拟机，并在所述第一虚拟机上部署CNC系统，在所述第二虚拟机上部署边缘计算平台；其中，所述CNC系统用于对所述数控机床设备进行运行控制，所述边缘计算平台用于适配CNC系统协议并在采集机床工作状态数据后，将机床工作状态数据同步至云服务端。虚拟网络22，用于在所述边缘计算平台上创建OPC UA客户端，并在所述CNC系统上创建与所述OPC UA客户端进行通信的OPC UA服务器。其中，所述OPC UA客户端通过OPC UA适配器与所述OPC UA服务器建立连接、保持会话、以及订阅获得数控机床设备的机床工作状态数据；其中，所述数控机床设备的机床工作状态数据包括实时监控工艺参数、历史数据、过程。OPC UA服务器23，用于以固定采样频率读取所述数控机床设备的机床工作状态数据，并以消息通知的形式，按照定期发布间隔发送至所述OPC UA客户端。具体的，所述OPC UA客户端基于OPC UA协议，从所述OPC UA服务器订阅实时采集到的所述数控机床设备的机床作状态数据；所述OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并将所述机床工作状态数据存放至OPC UA客户端的消息缓存队列中；以消息通知的形式，将所述数控机床设备的机床工作状态数据，按照定期发布间隔发送至所述OPC UA客户端。进一步地，所述OPC UA客户端按照OPC UA数据模型，对接收到的所述数控机床设备的机床工作状态数据进行逐条解析与数据处理；将进行数据处理后的所述机床工作状态数据发送至所述边缘计算平台，所述边缘计算平台按需将所述数控机床设备的工作状态数据入库持久化存储。进一步地，所述边缘计算平台包括第一MQTT客户端、以及与所述第一MQTT客户端通信的MQTT消息服务模块；所述云服务端包括第二MQTT客户端，所述第一MQTT客户端接收经OPC UA客户端进行数据处理后所述机床工作状态数据，并将进行数据处理后的所述机床工作状态数据发送至所述MQTT消息服务模块；所述第二MQTT客户端通过TLS加密通道，实时获取所述数控机床设备的机床工作状态数据，并在云服务端校验后持久化存储到大数据平台。进一步地，所述边缘计算平台还包括数据Web服务模块，所述云服务端还包括一HTTP客户端；所述云服务端通过HTTP客户端调用查询接口，并通过查询接口向所述Web服务模块发送查询请求信息；所述Web服务模块根据所述查询请求信息，将符合条件的所述数控机床设备的机床工作状态数据通过TLS加密通道传输至云服务端，并在云服务端校验后持久化存储到大数据平台。本发明实施例所提供的基于边缘计算及虚拟化技术的数控机床数据采集系统，首先创建数控机床设备的虚拟化层，并在所述虚拟化层上分别部署CNC系统与边缘计算平台；创建所述边缘计算平台所对应的OPC UA客户端，并在所述CNC系统上创建与所述OPC UA客户端进行通信的OPC UA服务器；所述OPC UA服务器以固定采样频率读取所述数控机床设备的机床工作状态数据，并以消息通知的形式，按照定期发布间隔发送至所述OPC UA客户端。相比现有技术，本发明能够充分利用当前数控机床的算力资源，并且减少了工控网络改造和维护成本，满足了实际应用需求。本发明实施例还提供了一种计算机可读存储介质，所述计算机可读存储介质包括存储的计算机程序；其中，所述计算机程序在运行时控制所述计算机可读存储介质所在的设备执行如上所述的基于边缘计算及虚拟化技术的数控机床数据采集方法。本发明实施例还提供了一种工业设备，所述工业设备包括处理器、存储器以及存储在所述存储器中且被配置为由所述处理器执行的计算机程序，所述处理器在执行所述计算机程序时实现如上所述的基于边缘计算及虚拟化技术的数控机床数据采集方法。优选地，所述计算机程序可以被分割成一个或多个模块/单元，所述一个或者多个模块/单元被存储在所述存储器中，并由所述处理器执行，以完成本发明。所述一个或多个模块/单元可以是能够完成特定功能的一系列计算机程序指令段，该指令段用于描述所述计算机程序在所述工业设备中的执行过程。所述处理器可以是中央处理单元，还可以是其他通用处理器、数字信号处理器、专用集成电路、现成可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等，通用处理器可以是微处理器，或者所述处理器也可以是任何常规的处理器，所述处理器是所述工业设备的控制中心，利用各种接口和线路连接所述工业设备的各个部分。所述存储器主要包括程序存储区和数据存储区，其中，程序存储区可存储操作系统、至少一个功能所需的应用程序等，数据存储区可存储相关数据等。此外，所述存储器可以是高速随机存取存储器，还可以是非易失性存储器，例如插接式硬盘，智能存储卡、安全数字卡和闪存卡等，或所述存储器也可以是其他易失性固态存储器件。需要说明的是，上述工业设备可包括，但不仅限于，处理器、存储器，本领域技术人员可以理解，该工业设备还可以包括比上述更多或更少的部件，或者组合某些部件，或者不同的部件。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明技术原理的前提下，还可以做出若干改进和变形，这些改进和变形也应视为本发明的保护范围。
