标题title
一种永磁同步电机转子位置检测装置及方法
摘要abst
本发明公开了一种永磁同步电机转子位置检测装置，包括：第一霍尔传感器、第二霍尔传感器、异或门、锁相回路、控制器；第一霍尔传感器、第二霍尔传感器围绕永磁同步电机的同一定子绕组有相位差的进行设置，用于检测永磁同步电机的转子区间信息和转向信息；异或门分别与第一霍尔传感器、第二霍尔传感器连接，用于对霍尔传感器的采样信号进行倍频；控制器分别与异或门、第一霍尔传感器、第二霍尔传感器连接，控制器根据采样信号产生拟合信号；锁相回路与控制器连接，锁相回路根据拟合信号产生永磁同步电机转子位置信号。本发明使用锁相回路对拟合的反电动势曲线进行了相位同步，测算最终的转子位置，有效降低测算误差，提高了精确度。
权利要求书clms
1.一种永磁同步电机转子位置检测装置，其特征在于，包括：第一霍尔传感器、第二霍尔传感器、异或门、锁相回路、控制器；所述第一霍尔传感器、第二霍尔传感器围绕永磁同步电机的同一定子绕组有相位差的进行设置，用于检测所述永磁同步电机的转子区间信息和转向信息；所述异或门分别与所述第一霍尔传感器、第二霍尔传感器连接，用于对霍尔传感器的采样信号进行倍频；所述控制器分别与所述异或门、第一霍尔传感器、第二霍尔传感器连接，所述控制器根据采样信号产生拟合信号；所述锁相回路与所述控制器连接，所述锁相回路根据拟合信号产生永磁同步电机转子位置信号。2.如权利要求1所述的永磁同步电机转子位置检测装置，其特征在于，所述第一霍尔传感器与第二霍尔传感器的相位差为90°。3.如权利要求1所述的永磁同步电机转子位置检测装置，其特征在于，所述第一霍尔传感器设置于永磁同步电机的一相定子绕组逆时针或顺时针90°位置；所述第二霍尔传感器设置于永磁同步电机的同一相定子绕组逆时针或顺时针180°位置。4.一种永磁同步电机转子位置检测装置的检测方法，适用于如权利要求1-3中任一所述的永磁同步电机转子位置检测装置的检测装置，其特征在于，所述永磁同步电机转子位置检测装置的检测方法包括如下步骤：步骤1：获取永磁同步电机转子的区间信息和转向信息；步骤2：根据区间信息和转向信息拟合反电动势曲线；步骤3：根据反电动势曲线计算永磁同步电机转子当前位置。5.如权利要求4所述的永磁同步电机转子位置检测装置的检测方法，其特征在于，所述步骤1的具体方法如下：步骤11：在一个电周期内将0°～360°均分为数个霍尔区间；步骤12：将两个霍尔传感器的所有输出状态进行组合构成状态组，将所有状态组构成状态集；步骤13：将数个霍尔区间与状态集中的状态组一一对应；步骤14：当霍尔传感器输出状态变化时，获取当前输出状态对应的状态集中的状态组，根据状态组获取对应的霍尔区间，根据当前霍尔区间与上一霍尔区间获取转子转动方向，根据转动方向产生转向信息；根据当前霍尔期间产生区间信息。6.如权利要求4所述的永磁同步电机转子位置检测装置的检测方法，其特征在于，所述步骤2的具体步骤如下：步骤21：将上一旋转周期时长作为当前旋转周期时长；步骤22：根据转子已转过的霍尔区间的持续时间对当前旋转周期时长进行更新，其中通过异或门输出的方波信号频率获取转子转过霍尔区间的持续时间；步骤23：当转子为正向转动时，根据如下公式拟合反电动势：当转子为反向转动时，根据如下公式拟合反电动势：其中，Aα为所拟合的第一霍尔传感器对应的反电动势；Aβ为第二霍尔传感器对应的反电动势；t为当前旋转周期内的转子已旋转的时长，t在0～T之间；；T为当前旋转周期时长。7.如权利要求6所述的永磁同步电机转子位置检测装置的检测方法，其特征在于，所述根据转子已转过的霍尔区间的持续时间对当前旋转周期时长进行更新的方法如下：T＝T0+++…+其中，T为当前旋转周期时长；T0为上一旋转周期时长；t为转子所经过的一个霍尔区间的持续时间；t’为上一旋转周期内与t相同霍尔区间的持续时间；n为转子已经转过的霍尔区间个数。8.如权利要求4所述的永磁同步电机转子位置检测装置的检测方法，其特征在于，所述步骤3的具体步骤如下：步骤31：将反电动势曲线经过锁相回路运算获得差频项，具体公式如下：其中，ε为差频项，为上一轮计算得到的转子位置；步骤32：将差频项经过环路滤波器LF运算获得转速差，具体公式如下：Δω＝ε*其中，s为微分算子，Kp为比例系数，Ki为积分系数；步骤33：将转速差经过压控动作器VOC运算获得永磁同步电机转子当前位置，具体公式如下：其中，s为微分算子，转子当前位置。
说明书desc
技术领域本发明涉及永磁同步电机技术领域，具体涉及一种永磁同步电机转子位置检测装置及方法。背景技术永磁同步电机具有效率高，响应快，噪音小等优点。因此，永磁同步电机已经在越来越多的行业广泛应用。传统的永磁同步电机转子位置检测方法包括：反电动势法、电感法、磁链法、观测器法以及卡尔曼滤波器法。对于采用位置传感器的转子位置检测方法，除了开关型霍尔传感器，其他几种位置传感器价格都偏高，不适用于对成本要求较高的运动控制领域。而当前无位置传感器技术在理论和技术上不够完善，会影响到电机的起动转矩、起动电流，影响低速运行时的平稳性，所以一般要对起动时刻的位置预估值单独处理以实现电机的可靠起动，这就会增加系统的成本，并且可靠性和开发难度也是需要考虑的因素。发明内容本发明提供了一种永磁同步电机转子位置检测装置及方法，以解决现有技术中永磁同步电机转子位置检测方法实现困难、精度不高的问题。本发明提供了一种永磁同步电机转子位置检测装置，包括：第一霍尔传感器、第二霍尔传感器、异或门、锁相回路、控制器；所述第一霍尔传感器、第二霍尔传感器围绕永磁同步电机的同一定子绕组有相位差的进行设置，用于检测所述永磁同步电机的转子区间信息和转向信息；所述异或门分别与所述第一霍尔传感器、第二霍尔传感器连接，用于对霍尔传感器的采样信号进行倍频；所述控制器分别与所述异或门、第一霍尔传感器、第二霍尔传感器连接，所述控制器根据采样信号产生拟合信号；所述锁相回路与所述控制器连接，所述锁相回路根据拟合信号产生永磁同步电机转子位置信号。进一步地，所述第一霍尔传感器与第二霍尔传感器的相位差为90°进一步地，所述第一霍尔传感器设置于永磁同步电机的一相定子绕组逆时针或顺时针90°位置；所述第二霍尔传感器设置于永磁同步电机的同一相定子绕组逆时针或顺时针180°位置。本发明还提供了一种永磁同步电机转子位置检测装置的检测方法，包括如下步骤：步骤1：获取永磁同步电机转子的区间信息和转向信息；步骤2：根据区间信息和转向信息拟合反电动势曲线；步骤3：根据反电动势曲线计算永磁同步电机转子当前位置。进一步地，所述步骤1的具体方法如下：步骤11：在一个电周期内将0°～360°均分为数个霍尔区间；步骤12：将两个霍尔传感器的所有输出状态进行组合构成状态组，将所有状态组构成状态集；步骤13：将数个霍尔区间与状态集中的状态组一一对应；步骤14：当霍尔传感器输出状态变化时，获取当前输出状态对应的状态集中的状态组，根据状态组获取对应的霍尔区间，根据当前霍尔区间与上一霍尔区间获取转子转动方向，根据转动方向产生转向信息；根据当前霍尔期间产生区间信息。进一步地，所述步骤2的具体步骤如下：步骤21：将上一旋转周期时长作为当前旋转周期时长；步骤22：根据转子已转过的霍尔区间的持续时间对当前旋转周期时长进行更新，其中通过异或门输出的方波信号频率获取转子转过霍尔区间的持续时间；步骤23：当转子为正向转动时，根据如下公式拟合反电动势：当转子为反向转动时，根据如下公式拟合反电动势：其中，Aα为所拟合的第一霍尔传感器对应的反电动势；Aβ为第二霍尔传感器对应的反电动势；t为当前旋转周期内的转子已旋转的时长，t在0～T之间；；T为当前旋转周期时长。进一步地，所述根据转子已转过的霍尔区间的持续时间对当前旋转周期时长进行更新的方法如下：T＝T0+++…+其中，T为当前旋转周期时长；T0为上一旋转周期时长；t为转子所经过的一个霍尔区间的持续时间；t’为上一旋转周期内与t相同霍尔区间的持续时间；n为转子已经转过的霍尔区间个数。进一步地，所述步骤3的具体步骤如下：步骤31：将反电动势曲线经过锁相回路运算获得差频项，具体公式如下：其中，ε为差频项，为上一轮计算得到的转子位置。步骤32：将差频项经过环路滤波器LF运算获得转速差，具体公式如下：Δω＝ε*其中，s为微分算子，Kp为比例系数，Ki为积分系数。步骤33：将转速差经过压控动作器VOC运算获得永磁同步电机转子当前位置，具体公式如下：其中，s为微分算子，转子当前位置。本发明的有益效果：1、本发明利用两相霍尔传感器代替传统三相霍尔传感器来检测永磁同步电机转子位置的方法，降低了设备的成本；2、本发明使用异或门对霍尔传感器的采样信号进行倍频，提高了设备在测算转子位置时的精确度；3、本发明使用锁相回路对拟合的反电动势曲线进行了相位同步，测算最终的转子位置，有效降低测算误差，提高了精确度。附图说明通过参考附图会更加清楚的理解本发明的特征和优点，附图是示意性的而不应理解为对本发明进行任何限制，在附图中：图1为本发明具体实施的电路结构示意图；图2为本发明具体实施的方法流程图；图3为本发明的两相霍尔传感器采样信号示意图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本发明实施例提供本发明提供了一种永磁同步电机转子位置检测装置，包括：第一霍尔传感器、第二霍尔传感器、异或门、锁相回路、控制器；所述第一霍尔传感器、第二霍尔传感器围绕永磁同步电机的同一定子绕组有相位差的进行设置，用于检测所述永磁同步电机的转子区间信息和转向信息，具体的所述第一霍尔传感器设置于永磁同步电机的一相定子绕组逆时针或顺时针90°位置；所述第二霍尔传感器设置于永磁同步电机的同一相定子绕组逆时针或顺时针180°位置，所述第一霍尔传感器与第二霍尔传感器的相位差为90°；所述异或门分别与所述第一霍尔传感器、第二霍尔传感器连接，用于对霍尔传感器的采样信号进行倍频；所述控制器分别与所述异或门、第一霍尔传感器、第二霍尔传感器连接，所述控制器根据采样信号产生拟合信号；所述锁相回路与所述控制器连接，所述锁相回路根据拟合信号产生永磁同步电机转子位置信号。如图1所示，异或门包括引脚Y1～Y3；控制器包括引脚P1～P6；锁相回路包括输入端X1、X2和输出端X3；第一霍尔传感器的输出脚A分别和异或门引脚Y1、控制器引脚P1相连；第二霍尔传感器的输出脚B分别和异或门引脚Y2、控制器引脚P2相连；异或门引脚Y3和控制器引脚P3相连；控制器引脚P4、P5、P6分别和锁相回路输出端X3、输入端X1、X2相连。如图2、3所示，本发明实施例提供了一种永磁同步电机转子位置检测装置的检测方法，适用于上述永磁同步电机转子位置检测装置，包括如下步骤：步骤S1：获取永磁同步电机转子的区间信息和转向信息；具体过程如下：步骤S11：在一个电周期内将0°～360°均分为数个霍尔区间；步骤S12：将两个霍尔传感器的所有输出状态进行组合构成状态组，将所有状态组构成状态集；步骤S13：将数个霍尔区间与状态集中的状态组一一对应；步骤S14：当霍尔传感器输出状态变化时，获取当前输出状态对应的状态集中的状态组，根据状态组获取对应的霍尔区间，根据当前霍尔区间与上一霍尔区间获取转子转动方向，根据转动方向产生转向信息；根据当前霍尔期间产生区间信息；步骤S2：根据区间信息和转向信息拟合反电动势曲线；具体过程如下：步骤21：将上一旋转周期时长作为当前旋转周期时长；此时当前旋转周期时长只能看做一个初始值，由于在转子转动过程中受各种因素的影响，会出现当前旋转周期中转子转过每个霍尔区间的速度、时间与上一旋转周期不同，当前旋转周期在拟合曲线时会使用，为了使拟合曲线更加准确，需要对当前旋转周期进行不断的更新；步骤22：根据转子已转过的霍尔区间的持续时间对当前旋转周期时长进行更新，其中通过异或门输出的方波信号频率获取转子转过霍尔区间的持续时间，更新的方法如下：T＝T0+++…+其中，T为当前旋转周期时长；T0为上一旋转周期时长；t为转子所经过的一个霍尔区间的持续时间；t’为上一旋转周期内与t相同霍尔区间的持续时间；n为转子已经转过的霍尔区间个数；旋转周期的时长实际为转子经过每个霍尔区间持续时间的总和，所以将每个霍尔区间的持续时间与上一时刻相同区间的霍尔区间的持续时间进行作差，在上一旋转周期的基础上进行补偿，就可以对当前旋转周期时长进行更新；本申请将转子速度的测量转换为异或后方波信号周期的测量，霍尔传感器信号经过异或后的方波信号相当于实际转子频率的2倍频；步骤23：当转子为正向转动时，根据如下公式拟合反电动势：当转子为反向转动时，根据如下公式拟合反电动势：其中，Aα为所拟合的第一霍尔传感器对应的反电动势；Aβ为第二霍尔传感器对应的反电动势；t为当前旋转周期内的转子已旋转的时长，t在0～T之间；；T为当前旋转周期时长；步骤S3：根据反电动势曲线计算永磁同步电机转子当前位置；具体过程如下：步骤31：将反电动势曲线经过锁相回路运算获得差频项，具体公式如下：其中，ε为差频项，为上一轮计算得到的转子位置。步骤32：将差频项经过环路滤波器LF运算获得转速差，具体公式如下：Δω＝ε*其中，s为微分算子，Kp为比例系数，Ki为积分系数。步骤33：将转速差经过压控动作器VOC运算获得永磁同步电机转子当前位置，具体公式如下：其中，s为微分算子，转子当前位置。以下以模拟参数为例，对本申请的方法过程进行说明：获取永磁同步电机转子的区间信息和转向信息；在一个电周期内将0°～360°均分为4个霍尔区间：0°～90°、90°～180°、180°～270°、270°～360°；将两个霍尔传感器的所有输出状态进行组合构成状态组，将所有状态组构成状态集：“11，01，00，10”；将数个霍尔区间与状态集中的状态组一一对应：第一霍尔区间对应角度为，对应状态组“11”；第二霍尔区间对应角度为，对应状态组“01”；第三霍尔区间对应角度为，对应状态组“00”；第四霍尔区间对应角度为，对应状态组“10”。当霍尔传感器输出状态变化时，获取当前输出状态对应的状态集中的状态组，根据状态组获取对应的霍尔区间，根据当前霍尔区间与上一霍尔区间获取转子转动方向，根据转动方向产生转向信息；如当前霍尔区间为“01”，上一个霍尔区间为“11”，所以可判断为正转。根据区间信息和转向信息拟合反电动势曲线；若上一旋转周期时长T0＝108ms，霍尔区间的持续时间依次为t’1＝30ms，t’2＝28ms，t’3＝26ms，t’4＝24ms；则当前周期中正好转过第一个霍尔区间，且时间为t’1＝22ms，则调整T＝T0+＝108ms+＝100ms；转子为正向转动，在t＝23ms时根据如下公式拟合反电动势：进一步即可通过以Aα、Aβ为锁相环算法的输入计算出角度。虽然结合附图描述了本发明的实施例，但是本领域技术人员可以在不脱离本发明的精神和范围的情况下作出各种修改和变型，这样的修改和变型均落入由所附权利要求所限定的范围之内。
