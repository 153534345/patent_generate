标题title
一种适配多厂家配电自动化终端的5G通信单元及通信方法
摘要abst
本发明提供一种适配多厂家配电自动化终端的5G通信单元及通信方法，涉及配电自动化技术领域，包括：FTU主控板和远程通信单元；DC‑DC模块接收DC24V电源，给远程通信模块内部元件供电；主控MCU通过串口与FTU主控板通信连接；主控MCU通过通信接口与5G模组连接；主控MCU接收FTU主控板发送的AT指令，并与5G模组的预设通信模式进行比较，判断是否为5G模组支持的通信模式；如果是，则将AT命令发送给通信模块，通过通信模块上报到电网管控平台。本发明可以适配安装在配电自动化设备内，减少了不同厂家协调开发工作。本发明方法也可以扩展应用于配电自动化其他业务终端的5G改造工作中，比如集中器、DTU等。
权利要求书clms
1.一种适配多厂家配电自动化终端的5G通信单元，其特征在于，包括：远程通信模块；远程通信模块包括：DC-DC模块、串口、5G模组、主控MCU以及通信接口；DC-DC模块接收DC24V电源，给远程通信模块内部元件供电；主控MCU通过串口与FTU主控板通信连接；主控MCU通过通信接口与5G模组连接；主控MCU接收FTU主控板发送的AT指令，并与5G模组的预设通信模式进行比较，判断是否为5G模组支持的通信模式；如果是，则将AT命令发送给通信模块，通过通信模块上报到电网管控平台。2.根据权利要求1所述的适配多厂家配电自动化终端的5G通信单元，其特征在于，FTU主控板通过DB9通信线缆与远程通信模块的串口通信连接。3.根据权利要求1所述的适配多厂家配电自动化终端的5G通信单元，其特征在于，主控MCU包括cpu、flash单元和内存；通信接口采用usb口；cpu通过usb口与5G模组连接。4.根据权利要求1所述的适配多厂家配电自动化终端的5G通信单元，其特征在于，远程通信模块还包括：天线和SIM卡槽；5G模组与天线连接；SIM卡槽与5G模组连接。5.根据权利要求1所述的适配多厂家配电自动化终端的5G通信单元，其特征在于，远程通信模块还包括：加密模块；主控MCU与加密模块连接，用于将上报电网管控平台的数据基于预设加密算法进行加密，并将加密后的数据通过通信模块上报到电网管控平台。6.根据权利要求5所述的适配多厂家配电自动化终端的5G通信单元，其特征在于，主控MCU通过AT对5G模组拨号入网成功后，通过串口与FTU主控板建立ppp通道进行数据传输。7.一种通信方法，其特征在于，方法采用如权利要求1至6任意一项所述的适配多厂家配电自动化终端的5G通信单元；方法包括：主控MCU对串口和通信接口进行初始化操作；主控MCU通过串口与FTU主控板建立通信连接；创建串口处理进程，开启串口，主控MCU循环监听FTU主控板通过串口发送的报文；主控MCU接收到FTU主控板发送的AT指令，通过与5G模组的预设通信模式进行比较，判断是否为5G模组支持的通信模式；如果是，则将AT命令发送给通信模块，通过通信模块上报到电网管控平台。8.根据权利要求7所述的通信方法，其特征在于，如果AT指令是5G模组不支持的通信模式，则调用AT处理函数，将AT指令更换为5G模组支持的通信模式，并发送给5G模组。9.根据权利要求7所述的通信方法，其特征在于，当AT指令是5G模组支持的通信模式时，主控MCU通过usb口接收到5G模组的AT响应；AT响应为OK时，则将响应OK信息通过串口发送给FTU主控板；FTU主控板按照预设格式信息向远程通信模块发送配电业务数据信息，远程通信模块将配电业务数据信息上报到电网管控平台。10.根据权利要求9所述的通信方法，其特征在于，如果AT响应为ERROR时，主控MCU记录AT log并更新AT函数列表；主控MCU更换AT指令模式，再对FTU主控板发送的AT指令进行比对判断。
说明书desc
技术领域本发明涉及配电自动化技术领域，尤其涉及一种适配多厂家配电自动化终端的5G通信单元及通信方法。背景技术目前市场上的配电自动化终端生产厂家品牌众多，没有标准化。FTU终端均包含一个独立的远程通信单元，内部模块目前为2G/4G模组，不支持5G通信，并且不同厂家的远程通信单元通信方式有差异，软件实现为私有协议、上报流量、信号质量等需求业务不同。对于2G/4G公网通信由于存在安全隐患，数据安全存在风险。随着5G的行业推广，提出在采用必要的安全防护措施基础上，基于RB资源静态预留、FlexE技术和电力控制专用UPF下沉的5G电力虚拟专网，可试点承载电力控制类业务。针对配电自动化业务开展5G控制类业务试点推广工作，对于配电自动化FTU终端进行5G通信改造。但面临的问题需要协调众多FTU厂家将4G模块改造适配为5G模块，因是存量的终端，协调困难工作量大，情况复杂。比如某个地区需要开展5G试点工作适配FTU的通信终端80台，就存在7个不同的厂家，由于通信协议的匹配问题，各个厂家终端无法直接获取5G通信信号质量。目前解决的方式主要是使用独立的5G CPE连接FTU业务终端的网口进行通信。这种方式优点是不需要各FTU厂家适配，有网口就可以业务联通，缺点一是有些厂家的存量FTU版本老，没有RJ45网口，只能重新部署新版本的FTU才有网口连接，增加了设备成本；二是独立式5G CPE尺寸大，无法放置在FTU内部，需要单独在电线杆上安装一个防护铁盒放置CPE，如果使用环境受限，将无法设置独立式5G CPE。发明内容本发明提供一种适配多厂家配电自动化终端的5G通信单元，可以适配安装在配电自动化设备内，不需要协调FTU终端厂家和5G模组厂家，减少了不同厂家协调开发工作。适配多厂家配电自动化终端的5G通信单元包括：远程通信模块；远程通信模块包括：DC-DC模块、串口、5G模组、主控MCU以及通信接口；DC-DC模块接收DC24V电源，给远程通信模块内部元件供电；主控MCU通过串口与FTU主控板通信连接；主控MCU通过通信接口与5G模组连接；主控MCU接收FTU主控板发送的AT指令，并与5G模组的预设通信模式进行比较，判断是否为5G模组支持的通信模式；如果是，则将AT命令发送给通信模块，通过通信模块上报到电网管控平台。进一步需要说明的是，FTU主控板通过DB9通信线缆与远程通信模块的串口通信连接。进一步需要说明的是，主控MCU包括cpu、flash单元和内存；cpu通过usb口与5G模组连接。进一步需要说明的是，远程通信模块还包括：天线和SIM卡槽；5G模组与天线连接。进一步需要说明的是，远程通信模块还包括：加密模块；主控MCU与加密模块连接，用于将上报电网管控平台的数据基于预设加密算法进行加密，并将加密后的数据通过通信模块上报到电网管控平台。进一步需要说明的是，主控MCU判断AT指令为5G模组支持的通信模式时，主控MCU通过串口与FTU主控板建立ppp通道进行数据传输。本发明还提供一种配电自动化中适配多厂家5G通信方法，方法包括：主控MCU对串口和通信接口进行初始化操作；主控MCU通过串口与FTU主控板建立通信连接；创建串口处理进程，开启串口，主控MCU循环监听FTU主控板通过串口发送的报文；主控MCU接收到FTU主控板发送的AT指令，通过与5G模组的预设通信模式进行比较，判断是否为5G模组支持的通信模式；如果是，则将AT命令发送给通信模块，通过通信模块上报到电网管控平台。进一步需要说明的是，如果AT指令是5G模组不支持的通信模式，则调用AT处理函数，将AT指令更换为5G模组支持的通信模式，并发送给5G模组。进一步需要说明的是，当AT指令是5G模组支持的通信模式时，主控MCU通过usb口接收到5G模组的AT响应；AT响应为OK时，则将响应OK信息通过串口发送给FTU主控板；FTU主控板按照预设格式信息向远程通信模块发送配电业务数据信息，远程通信模块将配电业务数据信息上报到电网管控平台。进一步需要说明的是，如果AT响应为ERROR时，主控MCU记录AT log并更新AT函数列表；FTU主控板更换AT指令模式，主控MCU再对FTU主控板发送的AT指令进行比对判断。从以上技术方案可以看出，本发明具有以下优点：本发明涉及的适配多厂家配电自动化终端的5G通信单元使配电自动化通信满足5G通信，不需要对多个厂家的存量FTU进行5G改造，本发明在FTU主控板的设计增加了独立的远程通信模块，不需要FTU终端厂家与模组厂家进行适配。而且本发明可以使用5G模组替换原有的4G/2G远程通信模块，可以适配安装在绝大部分的厂家设备内，软件调测基本不需要协调FTU终端厂家和5G模组厂家，极大减少了不同厂家协调开发工作。与现有技术中的独立式CPE相比较，电线杆不用增加安装CPE，可以将远程通信模块放入原有的通信仓内连接到FTU主控板。不需要更改FTU厂家和5G模组厂家的软件版本，以最小工作量的完成多厂家业务终端的5G改造适配问题。附图说明为了更清楚地说明本发明的技术方案，下面将对描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为配电自动化中适配多厂家FTU终端的5G通信单元示意图；图2为配电自动化中适配多厂家FTU终端的5G通信方法流程图；图3为配电自动化中适配多厂家FTU终端的5G通信方法实施例流程图。具体实施方式如图1所示，本发明提供一种配电自动化中适配多厂家5G通信终端中所提供的图示仅以示意方式说明本发明的基本构想，遂图式中仅显示与本发明中有关的功能元件而非按照实际实施时的功能元件数目，其实际实施时各功能元件的型态、数量及比例可为一种随意的改变，且其组件布局型态也可能更为复杂。本发明提供的适配多厂家配电自动化终端的5G通信单元包括：远程通信模块；远程通信模块是一种能够按照事先设定或存储的指令，自动进行数值计算和/或信息处理的设备，其硬件包括但不限于微处理器、专用集成电路、嵌入式设备等。本发明提供的配电自动化中适配多厂家5G通信终端中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、计算机软件或者二者的结合来实现，为了清楚地说明硬件和软件的可互换性，在上述说明中已经按照功能一般性地描述了各示例的组成及步骤。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本发明的范围。本发明的附图和框图中，图示了按照本公开各种实施例的设备、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段、或代码的一部分，该模块、程序段、或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。示例性的讲，两个接连地表示的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行规定的功能或操作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。远程通信模块可以基于无线通信网络与电网管控平台进行通信。本发明中远程通信模块与FTU主控板进行通信连接，FTU主控板设置在配电自动化FTU设备上，FTU主控板通过远程通信模块发送遥测、遥信、遥控数据。目前电网涉及控制类的业务需要将原有的4G模块改造成5G模块，满足低时延、高安全性的通信需要。通信时5G的信号强度传给三遥点表打包后一起传送至主站。但配电自动化FTU各个厂家终端无法直接获取5G通信模块信号强度值。本发明的远程通信模块可以基于配电网的通信需要提供基于5G的通信方式，满足相应的通信要求。本发明的实施例中，远程通信模块包括：DC-DC模块、串口、5G模组、主控MCU、通信接口、天线和SIM卡槽；其中，远程通信模块通过DB9线缆接收FTU主控板的DC24V电源，给远程通信模块内部元件供电。远程通信模块还可以设置稳压电路，24V转12V电路，12V转5V电路，5V转3.3V电路等等，满足各个电气元件的供电需要。主控MCU通过串口与FTU主控板通信连接；可以满足主控MCU与FTU主控板之间的通信要求。FTU主控板可以将需要传输的配电网业务数据通过远程通信模块上传给电网管控平台。对于远程通信模块的内部来讲，主控MCU通过通信接口与5G模组连接；5G模组和SIM卡槽分别与天线连接。可以将配电网业务数据上传给电网管控平台。为了保证通信数据的安全性，远程通信模块还包括：加密模块；主控MCU与加密模块连接，用于将上报电网管控平台的数据基于预设加密算法进行加密，并将加密后的数据通过通信模块上报到电网管控平台。示例性的讲，可以分别在远程通信模块和电网管控平台设置私钥和公钥，远程通信模块在进行数据通信前，先通过私钥和/或公钥进行加密，将加密后的数据进行通信，电网管控平台接收数据后通过私钥和/或公钥进行解密得到相应的数据。还可以通过公钥加密相应的通信数据标识，以明确每个数据的通信时间段以及属性。主控MCU在与FTU主控板进行通信过程中，主控MCU接收FTU主控板发送的AT指令，并与5G模组的预设通信模式进行比较，判断是否为5G模组支持的通信模式；如果是，则将AT命令发送给通信模块，通过通信模块上报到电网管控平台。5G模组的预设通信模式是预先写入到主控MCU中，主控MCU包括cpu、flash单元和内存；通信接口采用usb口；cpu通过usb口与5G模组连接。远程通信模块也可以包括储存器，储存相应的软件程序，满足使用要求。对于AT指令是5G模组支持的通信模式时，为了提高数据传输效率，主控MCU通过串口与FTU主控板建立ppp通道进行数据传输。这样为主控MCU与FTU主控板之间传输的数据提供全双工操作，并按照顺序传递数据。还可以通过拨号或专线方式建立点对点连接发送数据。还使得主控MCU与FTU主控板之间支持多种网络协议，比如TCP/IP、NetBEUI、NWLINK等；使主控MCU与FTU主控板之间无重传的机制，网络开销小，速度快。基于上述实施方式，避免了现有技术中，使用独立的5G CPE连接FTU业务终端的网口进行通信，造成有些厂家的存量FTU版本老，没有RJ45网口，只能重新部署新版本的FTU才有网口连接，增加了设备成本的问题。还解决了FTU内部无法独立部署5G CPE的问题，本发明提供的配电自动化中适配多厂家FTU终端的5G通信单元不需要单独在电线杆上安装一个防护铁盒放置CPE，提高的5G的便捷性。本发明的配电自动化中适配多厂家5G通信单元可以针对不同终端采用定制方案，保持原有终端和通信模块数据交互方式，在远程通信模块侧做信号强度查询适配，针对不同的终端采用不同的定制查询指令。配电自动化中适配多厂家5G通信终端可与FTU适配使用，解决各个FTU厂家的私有协议处理流程不统一，配电网自动化业务5G改造工作中需要协调不同的FTU厂家进行调测的问题，远程通信模块可以适配不同厂家的FTU终端进行通信连接。下面将结合本发明实施例中的流程图，对本发明实施例中的配电自动化中适配多厂家5G通信方法进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本发明提供的一种配电自动化中适配多厂家5G通信方法包括：如图2所示，S101、主控MCU对串口和通信接口进行初始化操作；可以由操作人员开启远程通信模块的电源，对串口和通信接口进行初始化操作，主要是刷新清除在先数据。也可以由系统自动启动，启动后在进行初始化操作。S102、主控MCU通过串口与FTU主控板建立通信连接；S103、创建串口处理进程，开启串口，主控MCU循环监听FTU主控板通过串口发送的报文；S104、主控MCU接收到FTU主控板发送的AT指令，通过与5G模组的预设通信模式进行比较，判断是否为5G模组支持的通信模式；S105、如果是，则将AT命令发送给通信模块，通过通信模块上报到电网管控平台。这样，配电自动化中适配多厂家5G通信终端执行上述过程可以适配安装在配电自动化设备内，不需要协调FTU终端厂家和5G模组厂家，减少了不同厂家协调开发工作。上述方法可以使用5G通信单元替换原有的4G/2G远程通信模块，适配安装在绝大部分的厂家设备内，软件调测基本不需要协调FTU终端厂家和5G模组厂家，极大减少了不同厂家协调开发工作。作为本发明的一种具体实施方式来讲，FTU主控板上电，给远程通信模块供电，5G模组、主控MCU等完成初始化；主控MCU接收到FTU主控板发送的AT指令，通过与5G模组的预设通信模式进行比较，判断是否为5G模组支持的通信模式。本方法中5G模组的AT命令可以拨号入网、模组状态信息、5G入网信号强度查询等业务所需信息，AT命令均由主控MCU通过usb口与5G模组交互完成。本方法中FTU主控板与电网管控平台传输的业务数据可以根据实际需要进行交互，具体内容不做限定。现有技术中，交互方式是FTU主控板直接与5G模组进行拨号、查询等交互，而本方法中，主控MCU与5G模组进行拨号、查询等交互之后再与FTU主控板进行交互。FTU主控板通过串口发送拨号的AT指令给主控MCU。避免了现有技术中通信模块是2G/4G模组，AT指令部分遵循1376.3通信协议命令集，但2G/4G模组对电网私有协议或者5G模组的AT指令部分不支持的问题，本方法通过支持5G远程通信的主控MCU进行更换同类的AT处理。在本发明的一种实施例中，基于配电自动化中适配多厂家FTU的5G通信单元，如图3所示，以下将给出一种可能的配电自动化中适配多厂家5G通信方法实施例对其具体的实施方案进行非限制性阐述。远程通信模块启动后，主控MCU对串口和通信接口进行初始化操作创建串口处理进程，打开串口，主控MCU循环监听串口接收的报文；FTU主控板发来的AT指令接收后，主控MCU首先通过钩子函数与已知5G模组支持的AT命令进行比较；如果是5G模组支持的模式，则将AT命令通过usb口发送给5G模组。如果5G模组不支持，则调用AT处理函数更换为相对应的5G模组的AT命令并发送给模组。例如锁频命令AT^FREQLOCK，需要修改为对应的AT^NRFREQLOCK；查询网络制式AT$MYSYSINFO，需要修改为at+gtccinfo。本发明的方法实施例中，如果是5G模组支持的模式，将AT命令通过usb口发送给5G模组。主控MCU再通过usb口接收5G模组反馈的AT响应；如果AT响应是OK，则将响应信息发送给FTU主控板，这里按照FTU主控板所需的信息格式返回到FTU主控板；拨号入网成功后，主控MCU通过串口与FTU主控板建立ppp通道进行数据传输。如果是响应ERROR，则可能是5G模组不支持的AT指令，此时记录AT log并更新AT函数列表，更换5G模组可以支持的同类AT指令。上述方法步骤可以循环操作。本发明涉及的方法使配电自动化通信满足5G通信，不需要对多个厂家的存量FTU进行5G改造，本发明在FTU主控板的设计增加了独立的远程通信模块，不需要FTU终端厂家与模组厂家进行适配。与现有技术中的独立式CPE相比较，电线杆不用增加安装CPE，可以将远程通信模块连接到FTU主控板。不需要更改FTU厂家和5G模组厂家的软件版本，以最小工作量的完成多厂家的5G改造适配问题。本发明提供的配电自动化中适配多厂家5G通信单元是结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、计算机软件或者二者的结合来实现，为了清楚地说明硬件和软件的可互换性，在上述说明中已经按照功能一般性地描述了各示例的组成及步骤。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本发明的范围。本发明提供的配电自动化中适配多厂家5G通信单元可以以一种或多种程序设计语言或其组合来编写用于执行本公开的操作的计算机程序代码，上述程序设计语言包括但不限于面向对象的程序设计语言—诸如Pyson、Java、Smalltalk、C++，还包括常规的过程式程序设计语言—诸如“C”语言或类似的程序设计语言。程序代码可以完全地在用户计算机上执行、部分地在用户计算机上执行、作为一个独立的软件包执行、部分在用户计算机上部分在远程计算机上执行、或者完全在远程计算机或电力服务器上执行。在涉及远程计算机的情形中，远程计算机可以通过任意种类的网络——包括局域网或广域网——连接到用户计算机，或者，可以连接到外部计算机。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本发明。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本发明的精神或范围的情况下，在其它实施例中实现。因此，本发明将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
