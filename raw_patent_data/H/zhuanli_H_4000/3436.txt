标题title
电动工具及其控制方法
摘要abst
本发明公开了一种电动工具及其控制方法，包括：壳体；交流电源输入装置；电机；驱动电路，驱动电路包括多个电子开关；电流检测模块；控制模块，在周期性的时间间隔内通过电流检测模块实时获取所述电机的相电流值；当获取到的相电流值超过预设电流阈值，在当前时间间隔的剩余时间内关断正处于导通状态的电子开关，在当前一个驱动信号周期结束时，开启控制模块当前控制导通的电子开关；驱动信号的周期在第一预设周期范围内连续变化。采用以上技术方案能提供一种适用于交流电动工具的逐周限流的控制方法，使得电动工具在重载工况下能够有效抑制大电流的同时提高用户使用手感。
权利要求书clms
1.一种电动工具，包括：壳体；交流电源输入装置，用于接入所述电动工具工作时所需的电源；电机，设置于所述壳体内；驱动电路，所述驱动电路包括多个电子开关；电流检测模块，用于获取所述电机的相电流值；控制模块，与所述驱动电路电性连接，所述控制模块输出驱动信号控制所述驱动电路以运行所述电机；所述控制模块还被配置为：在周期性的时间间隔内通过所述电流检测模块实时获取所述电机的相电流值；当获取到的所述相电流值超过预设电流阈值，在当前所述时间间隔的剩余时间内关断正处于导通状态的所述电子开关，在当前一个所述驱动信号周期结束时，开启所述控制模块当前控制导通的所述电子开关；其特征在于，所述周期性的时间间隔中每个时间间隔的持续时间与所述驱动信号当前所对应的周期相同；所述驱动信号的周期在第一预设周期范围内连续变化。2.根据权利要求1所述的电动工具，其特征在于，所述连续变化设置为当前电网低于或等于当前电机反电动势时，所述驱动信号的周期保持不变。3.根据权利要求1所述的电动工具，其特征在于，所述连续变化设置为所述当前电网电压高于所述电机的反电动势时，所述驱动信号的周期在所述第一预设周期范围内连续变化。4.根据权利要求1所述的电动工具，其特征在于，所述连续变化满足正弦函数的规律。5.根据权利要求1所述的电动工具，其特征在于，还包括：整流模块，设置为与交流电源输入装置电性连接，将交流电转换成直流电供所述电动工具使用；供电电路，与所述整流模块电性连接，设置为至少为所述控制模块供电；电容电路，电连接在所述整流模块和所述驱动电路之间。6.根据权利要求1所述的电动工具，其特征在于，所述电流检测模块包括多个检流电阻。7.根据权利要求1所述的电动工具，其特征在于，所述电机设置为无刷直流电机。8.根据权利要求7所述的电动工具，其特征在于，所述无刷直流电机由所述驱动信号控制。9.根据权利要求1所述的电动工具，其特征在于，所述电容电路至少包括一个电解电容。10.一种电动工具的控制方法，所述电动工具包括壳体；交流电源输入装置，用于接入所述电动工具工作时所需的电源；电机，设置于所述壳体内；驱动电路，所述驱动电路包括多个电子开关；电流检测模块，用于获取所述电机的相电流值；控制模块，与所述驱动电路电性连接；所述控制方法包括：所述控制模块输出驱动信号控制所述驱动电路运行所述电机，并在周期性的时间间隔内对所述电机的电流实施限制；所述控制模块在所述周期性的时间间隔内通过所述电流检测模块实时获取所述电机的相电流值；若所述相电流值超过所述预设电流阈值，在当前所述时间间隔的剩余时间内关断正处于导通状态的所述电子开关，再在当前一个所述驱动信号周期结束时，开启所述控制模块当前控制导通的所述电子开关；其特征在于，所述周期性的时间间隔中每个时间间隔的持续时间与所述驱动信号当前所对应的周期相同；所述驱动信号的周期在第一预设周期范围内连续变化。11.根据权利要求10所述的控制方法，其特征在于，所述连续变化设置为当前电网电压低于或等于所述电机的反电动势时，所述驱动信号的周期保持不变。12.根据权利要求10所述的控制方法，其特征在于，所述连续变化设置为所述当前电网电压高于所述电机的反电动势时，所述驱动信号的周期在第一预设周期范围内连续变化。
说明书desc
技术领域本发明涉及一种电动工具，具体涉及一种适用于交流电动工具的控制方法。背景技术交流电动工具在重载工况下，尤其对于高压无刷工具来说，由于电网的供电能力足够大，容易出现过电流现象，不仅易损坏电子元器件，也较大程度上明显地影响电动工具的使用手感。发明内容为解决现有技术的不足，本发明提供一种适用于交流电动工具的限流控制方法，能够有效抑制重载工况下的大电流的同时，不影响电动工具的使用手感。为实现上述目标，本发明采用如下技术方案：一种电动工具，包括：壳体；交流电源输入装置，用于接入所述电动工具工作时所需的电源；电机，设置于所述壳体内；驱动电路，所述驱动电路包括多个电子开关；电流检测模块，用于获取所述电机的相电流值；控制模块，与所述驱动电路电性连接，所述控制模块输出驱动信号控制所述驱动电路以运行所述电机；所述控制模块还被配置为：在周期性的时间间隔内通过所述电流检测模块实时获取所述电机的相电流值；当获取到的所述相电流值超过预设电流阈值，在当前所述时间间隔的剩余时间内关断正处于导通状态的所述电子开关，在当前一个所述驱动信号周期结束时，开启所述控制模块当前控制导通的所述电子开关；所述周期性的时间间隔中每个时间间隔的持续时间与所述驱动信号当前所对应的周期保持一致；所述驱动信号的周期在第一预设周期范围内连续变化。进一步地，所述连续变化设置为当前电网电压低于或等于所述电机的反电动势时，所述驱动信号的周期保持不变。进一步地，所述连续变化设置为当前电网电压高于所述电机的反电动势时，所述驱动信号的周期在第一预设周期范围内连续变化。进一步地，所述连续变化满足正弦函数的规律。进一步地，还包括：整流模块，设置为与交流电源输入装置电性连接，将交流电转换成直流电供所述电动工具使用；供电电路，与所述整流模块电性连接，设置为至少为所述控制模块供电；电容电路，电连接在所述整流模块和所述驱动电路之间。进一步地，所述电流检测模块包括多个检流电阻。进一步地，所述电机设置为无刷直流电机。进一步地，所述无刷直流电机由所述驱动信号控制。进一步地，所述电容电路至少包括一个电解电容。一种电动工具的控制方法，所述电动工具包括壳体；交流电源输入装置，用于接入所述电动工具工作时所需的电源；电机，设置于所述壳体内；驱动电路，所述驱动电路包括多个电子开关；电流检测模块，用于获取所述电机的相电流值；控制模块，与所述驱动电路电性连接；所述控制方法包括：所述控制模块输出驱动信号控制所述驱动电路运行所述电机，并在周期性的时间间隔内对所述电机的电流实施限制；所述控制模块在所述周期性的时间间隔内通过所述电流检测模块实时获取所述电机的相电流值；若所述相电流值超过所述预设电流阈值，在当前所述时间间隔的剩余时间内关断正处于导通状态的所述电子开关，再在当前一个所述驱动信号周期结束时，开启所述控制模块当前控制导通的所述电子开关；所述周期性的时间间隔中每个时间间隔的持续时间与所述驱动信号当前所对应的周期保持一致；所述驱动信号的周期在第一预设周期范围内连续变化。进一步地，所述连续变化设置为当前电网电压低于或等于所述电机的反电动势时，所述驱动信号的周期保持不变。进一步地，所述连续变化设置为所述当前电网电压高于所述电机的反电动势时，所述驱动信号的周期在第一预设周期范围内连续变化。本发明公开的一种电动工具及其控制方法，有效地限制电动工具在重载工况下大电流的同时，还对电网电压的波动进行有效补偿，较大程度上优化了电动工具的使用手感，提高了电动工具的可靠性以及寿命。附图说明图1是作为一种实施例的电动工具的立体图；图2是作为一种实施例的电路系统的电路框图；图3是作为一种实施例的整流模块的电路框图；图4是作为一种实施例的电流检测模块的电路框图；图5是作为另一种实施例的电流检测模块的电路框图；图6是作为一种实施例的电机控制信号的波形图；图7是作为一种实施例的电机限流控制方法的波形图；图8是作为一种实施例的电机限流控制方法的流程图；图9是作为一种实施例的PWM信号和限流周期的波形图；图10是作为一种实施例的PWM信号的频率连续变化波形图；图11是作为一种实施例的电机的控制方法的流程图；图12是作为另一种实施例的PWM信号和限流周期的波形图；图13是作为另一种实施例的电机的控制方法的流程图；图14是作为又一实施例的PWM信号和限流周期的波形图；图15是作为又一种实施例的电机的控制方法的流程图。具体实施方式以下结合附图和具体实施例对本发明作具体的介绍。本发明的电动工具，可以为手持式电动工具、花园类工具、花园类车辆如车辆型割草机，在此并非有所限制。本发明的电动工具包括但不限于砂光机、钻头、冲击起子、攻丝机、紧固件起子等交流电动工具，只要这些电动工具能够采用以下披露的技术方案的实质内容即可落入本发明的保护范围。另外还需要说明的是，为了便于描述，附图中仅示出了与本发明相关的部分而非全部结构。参考图1所示，示例性地示出一种电动工具10，该电动工具为角磨。电动工具10主要包括：壳体11、电机13、功能件14、交流电源输入装置15以及位于壳体11内的电路系统12。电机13包括定子绕组和转子。在一些实施例中，电机13为三相无刷电机，包括具有永磁体的转子和以电子方式换向的三相定子绕组U、V、W。在一些实施例中，三相定子绕组U、V、W之间采用星型连接。在另一些实施例中，三相定子绕组U、V、W之间采用角型连接。然而，必须理解的是其他类型的无刷电动机也在本公开的范围。无刷电动机可包括少于或多于三相。功能件14用于实现电动工具10的功能。功能件14由电机13驱动运行。对于不同电动工具而言，功能元件不同。对角磨而言，功能件14为角磨盘，用于实现打磨或切割功能。交流电源输入装置15用于接入电动工具10工作所需的电源。作为具体实施方式的一种，本实施例的电源可选地设置为交流电源。具体地，交流电源输入装置15包括交流电插头，以接入120V或220V的交流市电。参照图2所示的电动工具10的一种实施方式的电路系统12，主要包括整流模块21、电容电路22、供电电路23、驱动电路24、控制模块25、转速检测模块26以及电流检测模块27。整流模块21构成电动工具10的直流单元。整流模块21设置为接收来自交流电源输入装置15的交流电并用于输出直流母线电压，也即用于将交流电源输入装置15输入的交流电转化为脉动直流电输出。整流模块21与交流电源输入装置15电性连接。作为具体实施方式的一种，参照图3所示，整流模块21包括由四个二极管D1、D2、D3、D4组成的整流桥，利用二极管的单向导电性和管压降将交流电转换成同一方向的脉动直流电输出。电容电路22并联于电动工具10的直流母线上，即并联在电路系统12中直流单元的正负极之间。作为具体实施方式的一种，电容电路22可选地并联在整流模块21与驱动电路24之间。具体地，电容电路22包括电解电容C。电容电路22与整流模块21电性连接，整流模块21输出的脉动直流电经电解电容C滤波转化为平滑直流电输出，以降低脉动直流电中的谐波干扰。优选地，电解电容C的容值与电机13的额定功率之比大于20μF/KW 且小于80μF/KW。这样可节约空间，保证在硬件电路中不存在物理尺寸较大的电容元件。供电电路23用于至少为控制模块25供电。作为具体实施方式的一种，供电电路23与整流模块21电连接，将经整流模块21整流后的电能转换为适配于控制模块25的供电电压输出。例如，为了给控制模块25供电，供电电路23将来自交流电源输入装置15并经整流模块21整流后的电压降到15V以为控制模块25供电。驱动电路24与整流模块21电连接，用于驱动电机13,。驱动电路24的输入端接收来自整流模块21的电压，在控制模块25输出的驱动信号的驱动下将电压以一定的逻辑关系分配给电机13定子上的各相绕组，以使电机13启动并产生持续不断的转矩。具体地，驱动电路24包括多个电子开关。在一些实施例中，电子开关包括场效应晶体管，在另一些实施例中，电子开关包括绝缘栅双极晶体管等。在一些实施例中，驱动电路24为三相桥式电路。驱动电路24包括作为高侧开关设置的三个电子开关Q1、Q3、Q5和作为低侧开关设置的三个电子开关Q2、Q4、Q6。作为高端开关的三个电子开关Q1、Q3、Q5分别设在整流模块21的供电线与电机13的各相线圈之间。作为低端开关的三个电子开关Q2、Q4、Q6分别设在电机22的各相线圈与地线之间。六个电子开关 Q1-Q6 的各个栅极端 UH、UL、VH、VL、WH、WL 与控制模块25电性连接，电子开关的每个漏极或源极与电机13的定子绕组连接。电子开关 Q1-Q6 依据控制模块25输出的驱动信号以一定频率改变导通或关断状态，从而改变整流电路21加载在电机13绕组上的功率状态。驱动电路24是用于通过切换对电机13的各相绕组的通电状态、控制各相绕组各自的通电电流来使电机13旋转驱动的电路。各相绕组导通顺序和时间取决于转子的位置。为了使电机13转动，驱动电路24具有多个驱动状态，在一个驱动状态下电机13的定子绕组会产生一个磁场，控制模块25基于不同的转子位置输出控制信号以控制驱动电路24切换驱动状态使定子绕组产生的磁场转动以驱动转子转动，进而实现对电机13的驱动。转速检测模块26用于获取电机13的实测转速和转子的位置中的至少一个。在一些实施例方式中，转速检测模块26包括传感器，传感器能够直接检测电机13的速度和位置，例如霍尔传感器。在另一些实施例中，转速检测模块26被配置为至少依据电机13的相电压和定子绕组的电流值估算电机13的转子位置。电流检测模块27用于采集电机13的电流，电流可以是电机13的母线电流或电机13各相绕组的相电流。作为具体实施方式的一种，电流检测模块27检测电机13的各相绕组的相电流，电机13的母线电流则可以由检测到的三相电流值计算获得，一些实施例中，电流检测模块27包括霍尔电流传感器以直接检测电机13的各相绕组的相电流。作为具体实施方式的另一种，参考图4所示，在驱动电路24和电机13的各相绕组之间分别串联检流电阻R1、R2和R3，电流检测模块27通过检测检测电阻两端的电压即可计算得出各相绕组的相电流或母线电流。具体地，电流检测模块27分别检测各个检流电阻R1、R2和R3两端的电压即可计算得出三相定子绕组U、V、W的相电流。作为具体实施例的另一种，参见图5所示，电流检测模块27用于检测驱动电路24中处于导通状态的电子开关的内阻，基于处于导通状态的电子开关的内阻和其两端的电压值计算得出经过该电子开关的电流，电子开关的电流即为对应电机13绕组的相电流。具体地，电流检测模块27分别检测高端开关的三个驱动开关Q1、Q3、Q5两端的电压计算得出对应的三相定子绕组U、V、W的相电流。这样，电动工具不用增加硬件即可检测对应电机22绕组的相电流，节约成本。控制模块25至少电连接至供电电路23、驱动电路24以及电流检测模块27，用以控制驱动电路24工作。在一些实施方式中，控制模块25采用专用的控制芯片。在一些具体实施方式中，参照图6及图7所示，控制模块25输出周期为T1，频率为f1的驱动信号，用于控制多个电子开关Q1-Q6的导通状态以驱动电机13。优选地，电机13设置为三相无刷直流电机，驱动信号可选地设置为PWM信号。同时，控制模块25在周期性的时间间隔T2内对电机13的电流实施限制，此处本领域的技术人员可以理解，此处的周期性的时间间隔可以理解为电机的限流周期，下文将T2定义为电机13的限流周期。作为具体实施例的一种，参照图7所示，限流周期T2设置为与PWM信号的周期T1保持一致。控制模块25被配置为在限流周期T2的当前一个周期内，通过电流检测模块27实时获取电机13的相电流值，并将相电流值与预设电流阈值相比较，若相电流值超过预设电流阈值，那么在限流周期T2的当前一个周期的剩余时间内关断电子开关，从而断开流向电机13的电流，并在当前一个PWM信号的周期T1结束时开启电子开关，恢复流向电机13的电流。具体地，预设电流阈值的设置可以根据实际应用中电机选型以及实际应用场景另行设置，本发明中对预设电流预设的设置方法并不做限制。此处还需要说明的是，上述技术方案中关断的电子开关具体为当前正处于导通状态的电子开关，开启的电子开关为当前驱动信号控制开启的电子开关。电机13在重载工况下由于电网电压供电能力足够大，会出现过电流的现象，从而损坏电动工具中的元器件，降低电动工具的使用寿命。参照图7所示，电机13在重载工况下，出现了过流现象，即图中b点所示。采用上述限流技术方案，在相电流值Iphase超过预设电流阈值Iref时,控制模块25立即关断电子开关使得流经电机13的电流不再升高，即图中a点所示。在PWM信号的当前一个周期结束时，即图中c点所示，控制模块25重新开启电子开关，从而恢复流向电机13的电流。此处需要说明的是，本发明中主要设置电流检测模块以检测电机13的相电流，用于实现电机的逐周限流，本领域技术人员可以理解，也可通过检测电机的母线电流值，用于实现电机的逐周限流，此处不再详细介绍。下面将结合图8具体说明电动工具10中的电机13的一个限流周期的控制方法，该方法包括以下步骤：S101，获取电机相电流值。S102，判断电机的相电流值是否超过预设电流阈值，若是，则执行步骤S103；若否，则执行步骤S104。S103，关断当前导通的电子开关。S104，判断当前限流周期是否结束，若是，则执行步骤S105；若否，则执行步骤S101。S105，开启当前驱动信号控制开启的电子开关，返回步骤S101。在另一些具体实施例中，电网电压在电网负载较大幅度的增加或减少时，电网电压会出现波动现象，从而影响用户使用手感。对此，本发明提出在有效对电机进行限流的同时，对电网电压进行有效补偿。具体地，控制模块25控制用于驱动电机13的PWM信号的周期T1在第一预设周期范围内连续变化，同时设置电机13的限流周期T2与PWM信号的周期T1保持一致。其中，第一预设周期范围可选地设置为，T0为PWM信号的初始周期。具体地，当电网电压低于或者等于当前电机13的反电动势时，PWM信号的周期T1保持不变；反之，当电网电压高于当前电机13的反电动势时，PWM信号的周期T1在第一预设范围内连续变化。具体地，结合图10所示，驱动信号的周期T1设置为预设周期范围内的连续变化可以通过如下公式获得：其中,f0为与PWM信号的初始周期T0相对应的初始频率，为与PWM信号的周期T1相对应的频率，θ为当前电网电压的相位。下面将结合图11具体说明电动工具10中的电机13的逐周限流的一种控制方法，该方法包括以下步骤：S201，获取电机的相电流值。S202, 判断电机的相电流值是否超过预设电流阈值，若是，则执行步骤S203；若否，则执行步骤S204。S203, 关断当前导通的电子开关。S204, 判断当前限流周期是否结束，若是，则执行步骤S205；若否，则执行步骤S206。S205, 开启当前驱动信号控制开启的电子开关。S206，获取电网电压和电机反电动势。S207，判断当前电机反电动势是否超过电网电压，若是，执行步骤S208，若否，执行步骤S201。S208，重新设置驱动信号的的周期T1。S209，重新设置限流周期T2，返回步骤S201。上述实施例中，本发明公开一种电动工具逐周限流的控制方法，限流周期与PWM信号的周期始终保持一致，当检测到的电机相电流大于预设电流阈值时关闭电子开关，在PWM信号的当前一个周期结束时，重新开启电子开关，同时继续实时检测电机的相电流。另一方面设置PWM信号的周期随电网电压的波动在第一预设周期范围内连续变化，能够针对电网电压的波动进行有效补偿，提高用户使用手感与电动工具使用寿命。在另一些具体实施例中，控制模块25控制用于驱动电机13的PWM信号的周期T1在第二预设周期范围内随机变化，并设置电机13的限流周期T2与PWM信号的周期T1始终保持一致。参照图12所示，具体地，PWM信号的周期T1在第二预设周期范围内随机变化，可设置为将PWM信号的初始周期T0叠加白噪声后符合正态分布的规律的变化。具体地，用于驱动电机13的PWM信号的初始周期T0设置为100us，叠加白噪声后的PWM信号的周期T1在第二预设周期范围内随机变化，并且变化满足正态分布的规律。此处需要说明的是，本发明的设置的第二预设范围本领域技术人员可根据电动工具实际应用场景自行设置。下面将结合图13具体说明电动工具10中的电机13的逐周限流的另一种控制方法，该方法包括以下步骤：S301，获取电机的相电流值。S302, 判断电机的相电流值是否超过预设电流阈值，若是，则执行步骤S303；若否，则执行步骤S304。S303, 关断当前导通的电子开关。S304, 判断当前限流周期是否结束，若是，则执行步骤S305；若否，则执行步骤S301。S305，重新设置驱动信号的周期T1。S305，根据重新设置后的驱动信号的周期T1，设置限流周期T2。S305，开启当前驱动信号控制开启的电子开关，返回步骤S301。上述实施例中，本发明公开一种电动工具逐周限流的又一种控制方法，限流周期与PWM信号的周期始终保持一致，当检测到的电机相电流大于预设电流阈值时关闭电子开关，在PWM信号的当前一个周期结束时，重新开启电子开关，同时继续实时检测电机的相电流。另一方面设置PWM信号的周期在第二预设周期范围内随机变化，上述随机变化满足正态分布的规律。本实施例通过将PWM信号的周期设置在预设范围内满足正态分布规律的随机变化，通过抖频率策略减小驱动电路的EMI，提高电动工具的可靠性。在另一些具体实施例中，控制模块25输出初始周期为T0的PWM信号，控制驱动电路24用于驱动电机13的运行。同时，控制模块25还在周期性的时间间隔内通过电流检测模块27实时获取电机13的相电流值，并且将获取到的实时相电流值与预设电流范围进行比较。参照图14所示，具体地，预设电流范围包括第一预设电流阈值和，第一预设电流阈值Iref1设置为上限值，第二预设电流阈值Iref2设置为下限值。当控制模块25获取到的电机13的相电流值高于第一预设电流阈值Iref1时，控制模块25立即关断当前处于导通状态的电子开关；一旦控制模块25获取的电机13的相电流值低于第二预设电流阈值Iref2时，控制模块25控制开启当前驱动信号控制开启的电子开关。在具体设置过程中，第一预设电流阈值Iref1与第二预设电流阈值Iref2的差值与电机电感值成反比，与电机正常工作过程中的反电动势成正比，本领域技术人员可以根据电机选型以及实际应用场景进行合理设计预设电流范围。下面将结合图15具体说明电动工具10中的电机13的逐周限流的另一种控制方法，该方法包括以下步骤：S401，获取电机的相电流值。S402, 判断电机的相电流值是否高于第一预设电流阈值，若是，则执行步骤S403；若否，则执行步骤S404。S403，关断当前导通的电子开关。S404，判断电机相电流值是否低于第二预设电流阈值，若是，则执行步骤S405，若否，则执行步骤S401。S405，开启当前驱动信号控制开启的电子开关。返回步骤S401。上述实施例中，本发明公开一种电动工具逐周限流的又一种控制方法，通过电流检测模块获取电机的相电流，一旦检测到相电流超出第一预设电流阈值，则关断电子开关；一旦电机的相电流值低于第二预设电流阈值时，则开启电子开关，恢复流向电机的电流。上述实施例中的技术方案，可以简单有效地抑制电机工作中的出现的大电流的同时，不影响电动工具的使用手感。注意，上述仅为本发明的较佳实施例及所运用技术原理。本领域技术人员会理解，本发明不限于这里所述的特定实施例，对本领域技术人员来说能够进行各种明显的变化、重新调整和替代而不会脱离本发明的保护范围。因此，虽然通过以上实施例对本发明进行了较为详细的说明，但是本发明不仅仅限于以上实施例，在不脱离本发明构思的情况下，还可以包括更多其他等效实施例，而本发明的范围由所附的权利要求范围决定。
