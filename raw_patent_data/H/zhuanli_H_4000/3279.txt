标题title
一种LORA自组网倾角数据采集系统
摘要abst
本发明公开了一种LORA自组网倾角数据采集系统，所述系统包括主机和接收机，所述主机包括主机主控芯片以及与所述主机主控芯片连接的三维角度测量电路、主机LORA控制电路，所述接收机包括接收机主控芯片以及与所述接收机主控芯片连接的接收机LORA控制电路、显示屏，所述主机LORA控制电路与接收机LORA控制电路无线通讯连接。采用新一代2.4G LORA模块，使用扩频技术，可使无线信号绕过障碍物，是接收机和主机有效通信距离增加至850米；全方位监测余震参数；接收机可实时显示多个主机通过LORA模块发送过来的数据；整个系统待机时间大于20小时。
权利要求书clms
1.一种LORA自组网倾角数据采集系统，其特征在于，所述系统包括主机和接收机，所述主机包括主机主控芯片以及与所述主机主控芯片连接的三维角度测量电路、主机LORA控制电路，所述接收机包括接收机主控芯片以及与所述接收机主控芯片连接的接收机LORA控制电路、显示屏，所述主机LORA控制电路与接收机LORA控制电路无线通讯连接；所述三维角度测量电路用于通过倾角传感器测量采集三维角度原始值；所述主机主控芯片用于将采集的三维角度原始值转换成三维角度值并通过主机LORA控制电路发送至接收机；所述接收机主控芯片用于通过接收机LORA控制电路获取主机发送的三维角度数据并在显示屏上显示。2.根据权利要求1所述的一种LORA自组网倾角数据采集系统，其特征在于，所述主机还包括与主机主控芯片连接的音频采样电路和音频发射电路，所述音频采样电路用于对采样的音频原始数据进行整形滤波，所述主控芯片用于通过DMA采集音频信号幅值，滤波整形后获得音频有效幅值，并控制音频发射电路发射采样的音频信号至接收机。3.根据权利要求2所述的一种LORA自组网倾角数据采集系统，其特征在于，所述接收机还包括与接收机主控芯片连接的音频接收电路，所述音频接收电路用于接收主机发送过来的音频信号，所述接收机主控芯片用于控制将获取到的音频信号幅值在显示屏上显示。4.根据权利要求1所述的一种LORA自组网倾角数据采集系统，其特征在于，所述主机还包括与主机主控芯片连接的主机电量采集电路，用于采集主机电池剩余电量，采集的主机电量传输至接收机并在显示屏上显示。5.根据权利要求1所述的一种LORA自组网倾角数据采集系统，其特征在于，所述主机还包括与主机主控芯片连接的OLED显示电路，用于通过OLED显示屏画面显示主机连接状态、主机报警状态、主机电量信息、主机所处位置的三维角度、主机三维角度实时变化量。6.根据权利要求1所述的一种LORA自组网倾角数据采集系统，其特征在于，所述主机还包括与主机主控芯片连接的按键阵列，用于设置倾角报警阈值，当主机三维角度中的任何一维角度变化量大于设置阈值，主机循环发出语音播报和警笛声，静音按键用于打开和关闭报警，所述主机还包括与主机主控芯片连接的语音播报电路，用于播报语音信息和警笛声。7.根据权利要求1所述的一种LORA自组网倾角数据采集系统，其特征在于，所述接收机还包括与接收机主控芯片连接的接收机电量采集电路，用于采集接收机电池剩余电量，所述显示屏还用于显示接收机电量信息。8.根据权利要求1所述的一种LORA自组网倾角数据采集系统，其特征在于，所述接收机还包括与接收机主控芯片连接的按键阵列，用于选择与接收机通信的主机，设置三维角度报警阈值、打开主机报警功能、关闭主机报警功能、搜寻主机、打开主机语音功能、关闭主机语音功能。9.根据权利要求1所述的一种LORA自组网倾角数据采集系统，其特征在于，所述接收机还包括与接收机主控芯片连接的4G传输模块，用于将三维角度变化量、主机电量、接收机电量、主机音频幅值等数据发送至云平台。10.根据权利要求1所述的一种LORA自组网倾角数据采集系统，其特征在于，所述接收机连接多个主机；接收机采用轮询方式和多个主机模块定点通信，采用信道冲突算法，避免同一信道多个设备同时处于发送状态，信号之间相互干扰；接收机查询接收机地址并保存，主机查询主机地址并保存，接收机保存主机的地址和发送消息序列号，接收机将采集数据指令发送至主机，主机接收数据采集命令，判断命令中包含的主机地址、消息序列号是否和本机一致，若一致则返回角度数据和音频幅值等信息，若判断不一致则不作回应。
说明书desc
技术领域本发明涉及数据采集技术领域，具体涉及一种LORA自组网倾角数据采集系统。背景技术倾角传感器又称作倾斜仪、测斜仪、水平仪、倾角计，经常用于系统的水平角度变化测量，水平仪从过去简单的水泡水平仪到的电子水平仪是自动化和电子测量技术发展的结果。现有倾角数据采集系统，通信距离太短，一般不超过300米；只采集音频幅值或者只采集三维倾角值，不能全方位的反应所处余震环境的参数；接收端没有使用显示屏，只能提示主机报警，不能实时显示报警参数；功耗大，待机时间小于12小时。发明内容为此，本发明提供一种LORA自组网倾角数据采集系统，以解决现有倾角数据采集存在的通信距离短、不能全方位的反应所处余震环境的参数、功耗大等的问题。为了实现上述目的，本发明提供如下技术方案：一种LORA自组网倾角数据采集系统，所述系统包括主机和接收机，所述主机包括主机主控芯片以及与所述主机主控芯片连接的三维角度测量电路、主机LORA控制电路，所述接收机包括接收机主控芯片以及与所述接收机主控芯片连接的接收机LORA控制电路、显示屏，所述主机LORA控制电路与接收机LORA控制电路无线通讯连接；所述三维角度测量电路用于通过倾角传感器测量采集三维角度原始值；所述主机主控芯片用于将采集的三维角度原始值转换成三维角度值并通过主机LORA控制电路发送至接收机；所述接收机主控芯片用于通过接收机LORA控制电路获取主机发送的三维角度数据并在显示屏上显示。进一步地，所述主机还包括与主机主控芯片连接的音频采样电路和音频发射电路，所述音频采样电路用于对采样的音频原始数据进行整形滤波，所述主控芯片用于通过DMA采集音频信号幅值，滤波整形后获得音频有效幅值，并控制音频发射电路发射采样的音频信号至接收机。进一步地，所述接收机还包括与接收机主控芯片连接的音频接收电路，所述音频接收电路用于接收主机发送过来的音频信号，所述接收机主控芯片用于控制将获取到的音频信号幅值在显示屏上显示。进一步地，所述主机还包括与主机主控芯片连接的主机电量采集电路，用于采集主机电池剩余电量，采集的主机电量传输至接收机并在显示屏上显示。进一步地，所述主机还包括与主机主控芯片连接的OLED显示电路，用于通过OLED显示屏画面显示主机连接状态、主机报警状态、主机电量信息、主机所处位置的三维角度、主机三维角度实时变化量。进一步地，所述主机还包括与主机主控芯片连接的按键阵列，用于设置倾角报警阈值，当主机三维角度中的任何一维角度变化量大于设置阈值，主机循环发出语音播报和警笛声，静音按键用于打开和关闭报警，所述主机还包括与主机主控芯片连接的语音播报电路，用于播报语音信息和警笛声。进一步地，所述接收机还包括与接收机主控芯片连接的接收机电量采集电路，用于采集接收机电池剩余电量，所述显示屏还用于显示接收机电量信息。进一步地，所述接收机还包括与接收机主控芯片连接的按键阵列，用于选择与接收机通信的主机，设置三维角度报警阈值、打开主机报警功能、关闭主机报警功能、搜寻主机、打开主机语音功能、关闭主机语音功能。进一步地，所述接收机还包括与接收机主控芯片连接的4G传输模块，用于将三维角度变化量、主机电量、接收机电量、主机音频幅值等数据发送至云平台。进一步地，所述接收机连接多个主机；接收机采用轮询方式和多个主机模块定点通信，采用信道冲突算法，避免同一信道多个设备同时处于发送状态，信号之间相互干扰；接收机查询接收机地址并保存，主机查询主机地址并保存，接收机保存主机的地址和发送消息序列号，接收机将采集数据指令发送至主机，主机接收数据采集命令，判断命令中包含的主机地址、消息序列号是否和本机一致，若一致则返回角度数据和音频幅值等信息，若判断不一致则不作回应。本发明具有如下优点：本发明提出的一种LORA自组网倾角数据采集系统，所述系统包括主机和接收机，采用新一代2.4G LORA模块，使用扩频技术，可使无线信号绕过障碍物，是接收机和主机有效通信距离增加至850米；使用高精度三维传感器和低漂移交流放大器放大音频信号，二者相互之间不存在干扰；全方位监测余震参数；接收机使用7寸显示屏，实时显示多个主机通过LORA模块发送过来的数据；待机模式下：除保持LORA控制电路正常供电外，其余模块均断开供电，工作模式下通过LORA控制电路发送指令唤醒其他模块，使系统正常工作，整个系统待机时间大于20小时。附图说明为了更清楚地说明本发明的实施方式或现有技术中的技术方案，下面将对实施方式或现有技术描述中所需要使用的附图作简单地介绍。显而易见地，下面描述中的附图仅仅是示例性的，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据提供的附图引伸获得其它的实施附图。图1为本发明实施例1提供的一种LORA自组网倾角数据采集系统的主机结构图；图2为本发明实施例1提供的一种LORA自组网倾角数据采集系统的接收机结构图。具体实施方式以下由特定的具体实施例说明本发明的实施方式，熟悉此技术的人士可由本说明书所揭露的内容轻易地了解本发明的其他优点及功效，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例1本实施例提出了一种LORA自组网倾角数据采集系统，所述系统包括主机和接收机。如图1所示，主机包括主机主控芯片以及与所述主机主控芯片连接的三维角度测量电路、主机LORA控制电路、音频采样电路、音频发射电路、电量采集电路、按键阵列、OLED显示电路和语音播报电路。各模块功能如下：三维角度测量电路：测量三维空间XYZ三个方向的角度值，XY轴测量范围，Z轴测量范围，主控芯片使用卡尔曼滤波算法将传感器输出的原始值换算成三位角度值，显示在OLED显示屏上；OLED显示电路：主控芯片通过SPI接口与2,4寸低功耗OLED显示屏通信，分画面显示主机连接状态、主机报警状态、主机电量信息、主机所处位置的三维角度、主机三维角度实时变化量；按键：设置倾角报警阈值，当主机三维角度中的任何一维角度变化量大于设置阈值，主机循环发出语音播报和警笛声，静音按键可打开和关闭报警；电量采集电路：主机由电池供电，主控芯片通过ADC实时采集电池剩余电量，OLED实时显示电池电量；主控单元：主控芯片通过SPI接口读取角度测量原始数据；通过SPI接收发送显示数据至OLED显示相关信息；通过IO口读取按键阵列状态；通过ADC采样电池电量；通过单线串口发送指令控制语音播报；通过DMA采集音频信号幅值，滤波整形后获得音频有效幅值；通过LORA控制电路接收接收机发来的控制指令，通过LORA控制电路发送三维角度变化量、音频幅值、主机电量等数据至接收机；控制音频发射电路工作；语音播报电路：播报语音信息和警笛声；LORA控制电路：无线接收接收机发送的指令并通过UART串口发送至主控芯片，UART串口接收主控芯片发送的数据信息无线发送至接收机；音频采样电路：对采样的音频原始数据整形滤波；音频发射电路；发射采样的音频信号至接收机。如图2所示，接收机包括接收机主控芯片以及与所述接收机主控芯片连接的接收机LORA控制电路、显示屏、音频接收电路、电量采集电路、按键阵列和4G传输电路。各模块功能如下：7寸显示屏：显示主控芯片通过UART串口发送的三维倾角变化量、主机电量值、主机音频幅值等信息；按键：选择与接收机通信的主机，设置三维角度报警阈值、打开主机报警功能、关闭主机报警功能、搜寻主机、打开主机语音功能、关闭主机语音功能；电量采集电路：主机由电池供电，主控芯片通过ADC实时采集电池剩余电量，OLED实时显示电池电量；主控单元：通过UART串口发送显示数据至7寸显示屏显示；通过IO口读取按键阵列状态；通过ADC采样电池电量；通过串口将三维角度变化量、主机电量、接收机电量、主机音频幅值等数据发送至4G传输电路；通过LORA控制电路接收主机发来的三维角度变化量、音频幅值、主机电量等数据，通过LORA控制电路发送控制指令至主机；控制音频接收电路工作；4G传输电路：将三维角度变化量、主机电量、接收机电量、主机音频幅值等数据发送至云平台；LORA控制电路：无线接收主机发送的数据信息并通过UART串口发送至主控芯片，UART串口接收主控芯片发送的指令无线发送至主机；音频接收电路：接收主机发送过来的音频信号。本实施例中，接收机采用轮询方式和4个主机模块定点通信，采用信道冲突算法，避免同一信道多个设备同时处于发送状态，信号之间相互干扰；接收机查询接收机地址并保存，主机查询主机地址并保存，接收机保存主机的地址和发送消息序列号，接收机将采集数据指令发送至主机，主机接收数据采集命令，判断命令中包含的主机地址、消息序列号是否和本机一致，若一致则返回角度数据和音频幅值等信息，若判断不一致则不作回应。虽然，上文中已经用一般性说明及具体实施例对本发明作了详尽的描述，但在本发明基础上，可以对之作一些修改或改进，这对本领域技术人员而言是显而易见的。因此，在不偏离本发明精神的基础上所做的这些修改或改进，均属于本发明要求保护的范围。
