标题title
摄像头切换方法、装置、电子设备和可读存储介质
摘要abst
本申请公开了一种摄像头切换方法、装置、电子设备和可读存储介质，属于摄像领域。摄像头切换方法，应用于电子设备，电子设备包括第一摄像头和第二摄像头，第一摄像头的取景范围与第二摄像头的取景范围不同，摄像头切换方法包括：在显示第一预览图像的情况下，接收第一输入，第一预览图像为根据第一摄像头采集到的图像数据生成的图像；响应于第一输入，将第一摄像头切换至第二摄像头，并获取第一摄像头的第一补偿值，第一补偿值为对第一摄像头采集图像数据过程中的防抖补偿值；显示第二预览图像，第二预览图像为根据第一补偿值对第二摄像头采集到的图像数据进行防抖补偿后生成的图像。
权利要求书clms
1.一种摄像头切换方法，应用于电子设备，其特征在于，所述电子设备包括第一摄像头和第二摄像头，所述第一摄像头的取景范围与所述第二摄像头的取景范围不同，所述摄像头切换方法包括：在显示第一预览图像的情况下，接收第一输入，所述第一预览图像为根据所述第一摄像头采集到的图像数据生成的图像；响应于所述第一输入，将所述第一摄像头切换至所述第二摄像头，并获取所述第一摄像头的第一补偿值，所述第一补偿值为对所述第一摄像头采集图像数据过程中的防抖补偿值；显示第二预览图像，所述第二预览图像为根据所述第一补偿值对所述第二摄像头采集到的图像数据进行防抖补偿后生成的图像。2.根据权利要求1所述的摄像头切换方法，其特征在于，所述显示第二预览图像之前，还包括：在所述第一补偿值小于或等于补偿阈值的情况下，控制所述第二摄像头的光学图像稳定器根据所述第一补偿值进行光学防抖补偿。3.根据权利要求1所述的摄像头切换方法，其特征在于，所述显示第二预览图像之前，还包括：在所述第一补偿值大于补偿阈值，控制所述第二摄像头的光学图像稳定器根据所述补偿阈值进行光学防抖补偿；根据第二补偿值，对所述第二摄像头采集的图像数据进行裁剪，以得到所述第二预览图像，其中，所述第二补偿值为根据所述第一补偿值和补偿阈值确定的。4.根据权利要求1至3中任一项所述的摄像头切换方法，其特征在于，所述在显示第一预览图像的情况下，接收第一输入之后，还包括：控制所述第二摄像头的光学图像稳定器，按照第三补偿值运行，以使所述第二摄像头的成像中心点与所述第一摄像头的成像中心点之间的距离小于距离阈值。5.根据权利要求4所述的摄像头切换方法，其特征在于，所述在显示第一预览图像的情况下，接收第一输入之前，还包括：控制所述第一摄像头和所述第二摄像头拍摄，以得到第一采样图像和第二采样图像，所述第一采样图像和所述第二采样图像中均包括目标对象；根据所述目标对象在所述第一采样图像和所述第二采样图像中的位置，确定所述第三补偿值。6.根据权利要求5所述的摄像头切换方法，其特征在于，所述控制所述第一摄像头和所述第二摄像头拍摄，以得到第一采样图像和第二采样图像，包括：对根据所述第一摄像头采集的图像数据进行目标处理，以得到所述第一采样图像；根据所述第二摄像头采集的图像数据，生成所述第二采样图像；其中，所述目标处理包括以下至少一项：图像裁剪、图像缩放。7.根据权利要求5所述的摄像头切换方法，其特征在于，所述根据所述目标对象在所述第一采样图像和所述第二采样图像中的位置，确定所述第三补偿值，包括：分别根据所述目标对象在所述第一采样图像和所述第二采样图像中的位置，确定第一坐标和第二坐标，所述第一坐标为所述第一采样图像中所述目标对象在世界坐标系中的坐标，所述第二坐标为所述第二采样图像中所述目标对象在世界坐标系中的坐标；根据所述第一坐标和所述第二坐标，确定第一关系式，所述第一关系式为世界坐标系与所述电子设备的图像坐标系的转换关系式；根据所述第一关系式和预设旋转矩阵，确定第二关系式，所述第二关系式为所述世界坐标系与所述电子设备的相机坐标系的转换关系式；根据所述第二关系式、第一焦距值和第二焦距值，确定所述第三补偿值，所述第一焦距值为所述第一摄像头的焦距值，所述第二焦距值为所述第二摄像头的焦距值。8.一种摄像头切换装置，应用于电子设备，其特征在于，所述电子设备包括第一摄像头和第二摄像头，所述第一摄像头的取景范围与所述第二摄像头的取景范围不同，所述摄像头切换装置包括：接收模块，用于在显示第一预览图像的情况下，接收第一输入，所述第一预览图像为根据所述第一摄像头采集到的图像数据生成的图像；切换模块，用于响应于所述第一输入，将所述第一摄像头切换至所述第二摄像头；获取模块，用于获取所述第一摄像头的第一补偿值，所述第一补偿值为对所述第一摄像头采集图像数据过程中的防抖补偿值；显示模块，用于显示第二预览图像，所述第二预览图像为根据所述第一补偿值对第二摄像头采集到的图像数据进行防抖补偿后生成的图像。9.一种电子设备，其特征在于，包括：存储器，其上存储有程序或指令；处理器，用于执行所述程序或指令时实现如权利要求1至7中任一项所述的摄像头切换方法的步骤。10.一种可读存储介质，其上存储有程序或指令，其特征在于，所述程序或指令被处理器执行时实现如权利要求1至7中任一项所述的摄像头切换方法的步骤。
说明书desc
技术领域本申请属于摄像领域，具体涉及一种摄像头切换方法、装置、电子设备和可读存储介质。背景技术目前，为了应对不同场景的摄像需求，手机上安装的摄像头个数越来越多。由于不同的摄像头安装位置以及景深的不同，在切换摄像头时，拍摄预览界面显示的画面切换不够平滑，出现明显的跳变现象。发明内容本申请实施例的目的是提供一种摄像头切换方法、装置、电子设备和可读存储介质，实现了在电子设备从第一摄像头切换至第二摄像头时，拍摄预览界面中的画面平滑切换。第一方面，本申请实施例提供了一种摄像头切换方法，应用于电子设备，电子设备包括第一摄像头和第二摄像头，第一摄像头的取景范围与第二摄像头的取景范围不同，摄像头切换方法包括：在显示第一预览图像的情况下，接收第一输入，第一预览图像为根据第一摄像头采集到的图像数据生成的图像；响应于第一输入，将第一摄像头切换至第二摄像头，并获取第一摄像头的第一补偿值，第一补偿值为对第一摄像头采集图像数据过程中的防抖补偿值；显示第二预览图像，第二预览图像为根据第一补偿值对第二摄像头采集到的图像数据进行防抖补偿后生成的图像。第二方面，本申请实施例提供了一种摄像头切换装置，应用于电子设备，电子设备包括第一摄像头和第二摄像头，第一摄像头的取景范围与第二摄像头的取景范围不同，摄像头切换装置包括：接收模块，用于在显示第一预览图像的情况下，接收第一输入，第一预览图像为根据第一摄像头采集到的图像数据生成的图像；切换模块，用于响应于第一输入，将第一摄像头切换至第二摄像头；获取模块，用于获取第一摄像头的第一补偿值，第一补偿值为对第一摄像头采集图像数据过程中的防抖补偿值；显示模块，用于显示第二预览图像，第二预览图像为根据第一补偿值对第二摄像头采集到的图像数据进行防抖补偿后生成的图像。第三方面，本申请实施例提供了一种电子设备，包括：处理器和存储器，存储器存储可在处理器上运行的程序或指令，程序或指令被处理器执行时实现如第一方面的方法的步骤。第四方面，本申请实施例提供了一种可读存储介质，该可读存储介质上存储程序或指令，该程序或指令被处理器执行时实现如第一方面的方法的步骤。第五方面，本申请实施例提供了一种芯片，该芯片包括处理器和通信接口，该通信接口和该处理器耦合，该处理器用于运行程序或指令，实现如第一方面和第二方面的方法的步骤。第六方面，本申请实施例提供一种计算机程序产品，该程序产品被存储在存储介质中，该程序产品被至少一个处理器执行以实现如第一方面和第二方面的方法。本申请实施例中，在电子设备从第一摄像头切换至第二摄像头采集图像数据的过程中，根据第一摄像头采集第一预览图像的第一补偿值对第二摄像头采集图像数据的过程进行光学补偿，保证了第一预览图像切换至第二预览图像时，画面中心点不会发生变化，实现了在电子设备从第一摄像头切换至第二摄像头时，拍摄预览界面中的画面平滑切换，不会产生跳变。附图说明图1示出了本申请实施例提供的摄像头切换方法的流程示意图；图2示出了本申请实施例提供的第一采样图像和第二采样图像的示意图；图3示出了本申请实施例中坐标轴对齐后的世界坐标系和相机坐标系的示意图；图4示出了本申请实施例提供的摄像头切换装置的结构框图；图5示出了根据本申请实施例的电子设备的结构框图；图6示出了本申请实施例的一种电子设备的硬件结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚地描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员获得的所有其他实施例，都属于本申请保护的范围。本申请的说明书和权利要求书中的术语“第一”、“第二”等是用于区别类似的对象，而不用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便本申请的实施例能够以除了在这里图示或描述的那些以外的顺序实施，且“第一”、“第二”等所区分的对象通常为一类，并不限定对象的个数，例如第一对象可以是一个，也可以是多个。此外，说明书以及权利要求中“和/或”表示所连接对象的至少其中之一，字符“/”，一般表示前后关联对象是一种“或”的关系。下面结合附图1至图6，通过具体的实施例及其应用场景对本申请实施例提供的摄像头切换方法、摄像头切换装置、电子设备和可读存储介质进行说明。在本申请的一些实施例中，提供了一种摄像头切换方法，应用于电子设备，电子设备包括第一摄像头和第二摄像头，第一摄像头的取景范围与第二摄像头的取景范围不同。电子设备包括第一摄像头和第二摄像头，且第一摄像头和第二摄像头分别设置对应的光学图像稳定器。其中，第一摄像头和第二摄像头的放大倍数不同，第一摄像头可选为1×摄像头，即广角摄像头，第二摄像头可选为2×摄像头，即长焦摄像头。图1示出了本申请实施例提供的摄像头切换方法的流程示意图，如图1所示，摄像头切换方法包括：步骤102，在显示第一预览图像的情况下，接收第一输入，第一预览图像为根据第一摄像头采集到的图像数据生成的图像；在电子设备通过第一摄像头采集图像数据，并显示根据第一摄像头采集图像数据生成的第一预览图像的情况下，第一输入能够控制电子设备切换至第二摄像头采集图像数据。第一预览图像为电子设备通过第一摄像头采集到的图像数据。步骤104，响应于第一输入，将第一摄像头切换至第二摄像头，并获取第一摄像头的第一补偿值，第一补偿值为对第一摄像头采集图像数据过程中的防抖补偿值；本申请实施例中，电子设备在通过第一摄像头采集图像数据的过程中，需要对采集图像数据进行防抖补偿，该第一补偿值为第一摄像头对应的补偿值。需要说明的是，电子设备的第一摄像头和第二摄像头均对应有光学图像稳定器，光学图像稳定器用于对第一摄像头或第二摄像头采集图像数据过程中进行防抖补偿。该第一补偿值为光学图像稳定器对第一摄像头采集图像数据的光学防抖补偿值。具体来说，在电子设备通过第一摄像头采集图像数据的过程中，第一摄像头的光学图像稳定器根据电子设备的当前姿态确定第一补偿值，并根据第一补偿值控制第一摄像头进行光学防抖，电子设备的显示屏幕显示第一预览图像，第一预览图像为经过第一补偿值补偿后第一摄像头拍摄的图像。步骤106，显示第二预览图像，第二预览图像为根据第一补偿值对第二摄像头采集到的图像数据进行防抖补偿后生成的图像。本申请实施例中，用户通过电子设备拍摄时，电子设备根据第一摄像头采集的图像数据显示第一预览图像，用户此时能够控制电子设备通过第二摄像头采集图像数据，并基于第二摄像头采集的图像数据显示第二预览图像。在第一摄像头切换至第二摄像头的过程中，根据第一摄像头采集第一预览图像过程对应的第一补偿值，对第二摄像头采集图像数据进行防抖补偿，从而保证了电子设备在切换摄像头过程中，拍摄预览界面的画面不会产生跳变。具体来说，用户能够通过第一输入控制电子设备从通过第一摄像头采集图像数据，切换至通过第二摄像头采集图像数据。在从第一摄像头切换至第二摄像头采集图像数据的过程中，控制第二摄像头根据第一补偿值对采集的图像数据进行光学防抖补偿，使第一摄像头和第二摄像头的视场角保持一致。然后，控制电子设备从通过第一摄像头采集图像数据，切换至通过第二摄像头采集图像数据，保证了拍摄预览界面中的显示画面切换平滑。本申请实施例中，在电子设备从第一摄像头切换至第二摄像头采集图像数据的过程中，根据第一摄像头采集第一预览图像的第一补偿值对第二摄像头采集图像数据的过程进行光学补偿，保证了第一预览图像切换至第二预览图像时，画面中心点不会发生变化，实现了在电子设备从第一摄像头切换至第二摄像头时，拍摄预览界面中的画面平滑切换，不会产生跳变。在本申请的一些实施例中，显示第二预览图像之前，还包括：在第一补偿值小于或等于补偿阈值，控制第二摄像头的光学图像稳定器根据第一补偿值进行光学防抖补偿。需要说明的是，补偿阈值为第二摄像头的光学图像稳定器的补偿极限值，即第二摄像头的光学图像稳定器带动第二摄像头移动的最大值。本申请实施例中，在第一补偿值小于或等于补偿阈值的情况下，则确定第二摄像头的光学图像稳定器能够按照第一补偿值，带动处于预设位置的第二摄像头移动，以对第二摄像头的拍摄进行补偿。具体来说，在从第一摄像头切换至第二摄像头的情况下，获取第一摄像头采集第一预设图像对应的图像数据时的第一补偿值，并将该第一补偿值赋予第二摄像头的光学图像稳定器，以带动第二摄像头移动，从而保证第二摄像头与第一摄像头的视场角一致。本申请实施例中，通过检测第一补偿值与补偿阈值之间的数值关系，能够确定第二摄像头的光学图像稳定器是否能够带动第二摄像头根据第一补偿值进行移动。在第一补偿值小于补偿阈值的情况下，则控制第二摄像头的光学图像稳定器带动第二摄像头根据第一补偿值移动，从而使第一摄像头与第二摄像头的视场角保持一致，保证了电子设备的图像预览界面中的画面变化平滑。在本申请的一些实施例中，显示第二预览图像之前，还包括：在第一补偿值大于补偿阈值，控制第二摄像头的光学图像稳定器根据补偿阈值进行光学防抖补偿；根据第二补偿值，对第二摄像头采集的图像进行裁剪，以得到第二预览图像，其中，第二补偿值为根据第一补偿值和补偿阈值确定的。需要说明的是，在第一补偿值大于补偿阈值的情况下，则确定第二摄像头的光学图像稳定器在带动第二摄像头运动至第一补偿值对应的目标位置之前，会先达到极限位置，极限位置为补偿阈值对应的位置。具体来说，在从第一摄像头切换至第二摄像头的过程中，获取第一摄像头拍摄第一预设图像时的第一补偿值，并将该第一补偿值赋予第二摄像头的光学图像稳定器，以带动第二摄像头移动。在第一补偿值大于补偿阈值的情况下，控制第二摄像头的光学图像稳定器按照补偿阈值带动第二摄像头移动，即第二摄像头移动至极限位置。此时，将第一补偿值传给电子防抖系统，通过电子防抖系统对第二摄像头采集的图像数据进行裁剪，以得到第二预览图像。在第二摄像头的光学图像稳定器根据补偿阈值，控制第二摄像头移动至极限位置的情况下，在第二摄像头采集图像数据后，需要对图像数据进行裁剪。根据第一补偿值和补偿阈值，能够计算得到第二补偿值，根据第二补偿值能够确定对图像数据的裁剪量，故根据第二补偿值对图像数据进行裁剪能够得到第二预览图像，且电子设备在从显示第一预览图像切换至显示第二预览图像的时画面无跳变。其中，第一补偿值为第一摄像头的光学图像稳定器对第一摄像头的补偿值，补偿阈值为第二摄像头的光学图像稳定器对第二摄像头的补偿值，根据第一补偿值和补偿阈值能够确定EIS对第二摄像头采集的图像数据进行补偿的第二补偿值。EIS能够基于第二补偿值对第二摄像头采集的图像数据进行裁剪，以得到显示在拍摄预览界面的第二预览图像。本申请实施例中，通过检测第一补偿值与补偿阈值之间的数值关系，能够确定第二摄像头的光学图像稳定器是否能够带动第二摄像头根据第一补偿值移动。在第一补偿值大于补偿阈值的情况下，则控制第二摄像头的光学图像稳定器带动第二摄像头根据补偿阈值移动，使第二摄像头的光学图像稳定器带动第二摄像头移动至极限位置，并在第二摄像头采集图像数据时，根据第一补偿值裁剪对图像数据进行裁剪，以得到第二预览图像，使第一摄像头与第二摄像头的视场角保持一致，保证了电子设备的图像预览界面中的画面变化平滑。在本申请的一些实施例中，在显示第一预览图像的情况下，接收第一输入之后，还包括：控制第二摄像头的光学图像稳定器，按照第三补偿值运行，以使第二摄像头的成像中心点与第一摄像头的成像中心点之间的距离小于距离阈值。本申请实施例中，在从第一摄像头切换至第二摄像头之后，第二摄像头根据第一补偿值对采集图像数据的过程开始补偿之前，为保证第一摄像头所拍摄的画面中心与第二摄像头的成像中心偏差较小，则控制第二摄像头的光学图像稳定器根据第三补偿值运行。第三补偿值用于控制第二摄像头的光学图像稳定器带动第二摄像头运动，以使第二摄像头的成像中心靠近第一摄像头的成像中心。在第一摄像头的成像中心与第二摄像头的成像中心之间的距离小于距离阈值的情况下，则确定两个成像中心基本重合。需要说明的是，第三补偿值可以为电子设备出厂前提前标定得到的补偿值。将该第三补偿值预先保存在电子设备中，在电子设备执行从第一摄像头切换至第二摄像头的过程中，先控制第二摄像头的光学图像稳定器按照第三补偿值运行，使第一摄像头与第二摄像头的成像中心重合。本申请实施例中，在根据第一摄像头拍摄第一预览图像过程中的第一补偿值对第二摄像头采集图像数据进行补偿之前，控制第二摄像头的光学图像稳定器使第一摄像头与第二摄像头的成像中心重合，在切换摄像头过程中，进一步减小了显示预览图像的跳变。在本申请的一些实施例中，在显示第一预览图像的情况下，接收第一输入之前，还包括：控制第一摄像头和第二摄像头拍摄，以得到第一采样图像和第二采样图像，第一采样图像和第二采样图像中均包括目标对象；根据目标对象在第一采样图像和第二采样图像中的位置，确定第三补偿值。本申请实施例中，在控制第一摄像头切换至第二摄像头之前，还需要对第二摄像头的光学图像稳定器对应的第三补偿值进行标定。在标定过程中，在电子设备处于静止状态下，控制第一摄像头和第二摄像头拍摄带有目标对象的目标图像，能够得到第一采样图像和第二采样图像，第一采样图像为第一摄像头拍摄的图像，第二采样图像为第二摄像头拍摄的图像。根据目标对象在第一采样图像的位置，以及目标标记点在第二采样图像中的位置，能够确定第三补偿值。在电子设备处于静止状态下，第二摄像头的光学图像稳定器根据第三补偿值带动第二摄像头运动，能够使第二摄像头的成像中心与第一摄像头的成像中心之间的距离小于距离阈值。具体来说，由于第一摄像头和第二摄像头在电子设备中所处的位置不同，故第一采样图像和第二采样图像的画面中心不同，通过第三补偿值控制第二摄像头移动，保证两个摄像头的成像中心一致。示例性地，目标图像包括代表目标标记点的图像，目标标记点位于目标图像中心，目标标记点为目标对象。图2示出了本申请实施例提供的第一采样图像和第二采样图像的示意图，如图2所示，第一摄像头202拍摄得到的第一采样图像204中的目标标记点206位于第一采样图像204中央，第二摄像头208拍摄得到的第二采样图像210中的目标标记点206位于第二采样图像210的右侧位置。通过将第一采样图像204和第二采样图像210中的目标标记点206对齐，计算第三补偿值。需要说明的是，确定第三补偿值的过程可在电子设备出厂前执行，在确定第三补偿值之后，将第三补偿值存储在电子设备本地，后续使用过程中，无需再次执行确定第三补偿值的步骤。本申请实施例中，在电子设备从第一摄像头切换至第二摄像头之前，获取预设位置对应的第三补偿值，以便在第一摄像头切换至第二摄像头时，控制第二摄像头的光学图像稳定器根据第三补偿值，运行至预设位置。在本申请的一些实施例中，控制第一摄像头和第二摄像头拍摄，以得到第一采样图像和第二采样图像，包括：对根据第一摄像头采集的图像数据进行目标处理，以得到第一采样图像；根据第二摄像头采集的图像数据，生成第二采样图像；其中，目标处理包括以下至少一项：图像裁剪、图像缩放。本申请实施例中，由于第一摄像头和第二摄像头的取景范围不同，需要第一摄像头采集到的图像数据进行图像缩放或图像裁剪之后，以得到与第二采样图像尺寸相同的第一采样图像。具体来说，第一摄像头采集到图像数据后，对第一摄像头采集到的图像数据进行图像裁剪或图像缩放，生成第一采样图像，第二摄像头采集到图像数据后，直接将该图像数据确定为第二采样图像，保证第一采样图像与第二采样图像的图像尺寸相同。本申请实施例中，通过对第一摄像头采集得到第三采样图像进行图像缩放或图像裁剪，从而得到与第二采样图像相同的第一采样图像。便于后续确定第三补偿值的过程中，将第一采样图像与第二采样图像中的目标标记点对齐等操作，提高了确定第三补偿值的准确性。在本申请的一些实施例中，根据目标对象在第一采样图像和第二采样图像中的位置，确定第三补偿值，包括：分别根据目标对象在第一采样图像和第二采样图像中的位置，确定第一坐标和第二坐标，第一坐标为第一采样图像中目标对象在世界坐标系中的坐标，第二坐标为第二采样图像中目标对象在世界坐标系中的坐标；根据第一坐标和第二坐标，确定第一关系式，第一关系式为电子设备拍摄过程中世界坐标系与图像坐标系的转换关系式；根据第一关系式和预设旋转矩阵，确定第二关系式，第二关系式为世界坐标系与电子设备的相机坐标系的转换关系式；根据第二关系式、第一焦距值和第二焦距值，确定第三补偿值，第一焦距值为第一摄像头的焦距值，第二焦距值为第二摄像头的焦距值。本申请实施例中，在确定第三补偿值的过程中，首先获取目标对象在第一采样图像中的第一坐标，以及目标对象在第二采样图像中的第二坐标，再根据第一坐标和第二坐标，确定世界坐标系与图像坐标系的转换关系式，即第一关系式。根据第一关系式和预设旋转矩阵，能够计算得到世界坐标系与电子设备的图像坐标系的转换关系式，即第二关系式。将第一摄像头的第一焦距值和第二摄像头的第二焦距值，带入到第二关系式，以得到第三补偿值。具体来说，获取目标对象P在世界坐标系中的坐标P，对坐标P进行坐标系转换，以得到P点在相机坐标系中的坐标P，具体转换关系式如下：其中，Xc，Yc，Zc为目标坐标点在相机坐标系下的X轴、Y轴、Z轴的坐标值，Xw，Yw，Zw为目标坐标点在世界坐标系下的X轴、Y轴、Z轴的坐标值，R为旋转矩阵，T为偏移向量。需要说明的是，旋转矩阵R为电子设备的当前姿态，可由电子设备中的陀螺仪传感器获取。将世界坐标系和图像坐标系的坐标轴对齐，根据对齐后的相似三角形关系，以得到图像坐标系与世界坐标系之间的关系式，即第一关系式，第一关系式如下：△ABOc～△oCOc；△PBOc～△PCOc；其中，Xw，Yw，Zw为目标坐标点在世界坐标系下的X轴、Y轴、Z轴的坐标值，AB为坐标系中A点与B点之间的距离值，oC为坐标系中o点与C点之间的距离值，PB为坐标系中P点与B点之间的距离值，PC为坐标系中P点与C点之间的距离值，AOc为坐标系中A点与Oc点之间的距离值，oOc为坐标系中o点与Oc点之间的距离值，Xc，Yc，Zc为P点坐标系下的X轴、Y轴、Z轴的坐标值，f为焦距值，x，y为P点在Yc，0c，Xc平面上X轴和Y轴的坐标值。图3示出了本申请实施例中坐标轴对齐后的世界坐标系和相机坐标系的示意图，如图3所示，P为目标坐标点在Yc，0c，Xc平面上的坐标，P为目标坐标点的空间坐标。根据上述第一关系式和旋转矩阵R，可确定相机坐标系与世界坐标系之间的第二关系式，如下：。由于拍摄过程中，电子设备处于静止状态，也就是第一摄像头和第二摄像头的旋转矩阵R是相同的，且两张图像画面中心的点在世界坐标系中的坐标是一致的。根据第一关系式能够确定预设的第三补偿值，预设的第三补偿值表达式如下：其中，Rcrroc为第三补偿值，－θx、－θy、－θz、θx、θy、θz在X、Y、Z轴处的补偿值。由上述预设第三补偿值可得第三关系式，第三关系式为第三补偿值与第一焦距值和第二焦距值之间的关系式，第三关系式如下：其中，Rcrroc为第三补偿值，f1为第一焦距值，f2为第二焦距值。通过将第一焦距值和第二焦距值带入到上述第三关系式，以得到第三补偿值。本申请实施例中，通过目标对象在第一采样图像和第二采样图像中的世界坐标系下的第一坐标和第二坐标，能够得到图像坐标系与世界坐标系的第一关系式，并根据第一关系式和预设旋转矩阵能够确定世界坐标系与电子设备的相机坐标系的第二关系式，并根据第二关系式、第一焦距值和第二焦距值，能够计算得到第三补偿值，使第三补偿值具有较高的准确性，在第二摄像头的光学图像稳定器运行第三补偿值时，能够准确运行至预设位置。本申请实施例提供的摄像头切换方法，执行主体可以为摄像头切换装置。本申请实施例中以摄像头切换装置执行摄像头切换方法为例，说明本申请实施例提供的摄像头切换装置。在本申请的一些实施例中，提供了一种摄像头切换装置，应用于电子设备，电子设备包括第一摄像头和第二摄像头，第一摄像头的取景范围与第二摄像头的取景范围不同，图4示出了本申请实施例提供的摄像头切换装置的结构框图，如图4所示，摄像头切换装置400包括：接收模块402，用于在显示第一预览图像的情况下，接收第一输入，第一预览图像为根据第一摄像头采集到的图像数据生成的图像；切换模块404，用于响应于第一输入，将第一摄像头切换至第二摄像头；获取模块406，用于获取第一摄像头的第一补偿值，第一补偿值为对第一摄像头采集图像数据过程中的防抖补偿值；显示模块408，用于显示第二预览图像，第二预览图像为根据第一补偿值对第二摄像头采集到的图像数据进行防抖补偿后生成的图像。本申请实施例中，在电子设备从第一摄像头切换至第二摄像头采集图像数据的过程中，根据第一摄像头采集第一预览图像的第一补偿值对第二摄像头采集图像数据的过程进行光学补偿，保证了第一预览图像切换至第二预览图像时，画面中心点不会发生变化，实现了在电子设备从第一摄像头切换至第二摄像头时，拍摄预览界面中的画面平滑切换，不会产生跳变。在本申请的一些实施例中，摄像头切换装置400，还包括：第一控制模块，用于在第一补偿值小于或等于补偿阈值的情况下，控制第二摄像头的光学图像稳定器根据第一补偿值进行光学防抖补偿。本申请实施例中，通过检测第一补偿值与补偿阈值之间的数值关系，能够确定第二摄像头的光学图像稳定器是否能够带动第二摄像头根据第一补偿值进行移动。在第一补偿值小于补偿阈值的情况下，则控制第二摄像头的光学图像稳定器带动第二摄像头根据第一补偿值移动，从而使第一摄像头与第二摄像头的视场角保持一致，保证了电子设备的图像预览界面中的画面变化平滑。在本申请的一些实施例中，摄像头切换装置400，还包括：第二控制模块，用于在第一补偿值大于补偿阈值，控制第二摄像头的光学图像稳定器根据补偿阈值进行光学防抖补偿；裁剪模块，用于根据第二补偿值，对第二摄像头采集的图像数据进行裁剪，以得到第二预览图像，其中，第二补偿值为根据第一补偿值和补偿阈值确定的。本申请实施例中，通过检测第一补偿值与补偿阈值之间的数值关系，能够确定第二摄像头的光学图像稳定器是否能够带动第二摄像头根据第一补偿值移动。在第一补偿值大于补偿阈值的情况下，则控制第二摄像头的光学图像稳定器带动第二摄像头根据补偿阈值移动，使第二摄像头的光学图像稳定器带动第二摄像头移动至极限位置，并在第二摄像头采集图像数据时，根据第一补偿值裁剪对图像数据进行裁剪，以得到第二预览图像，使第一摄像头与第二摄像头的视场角保持一致，保证了电子设备的图像预览界面中的画面变化平滑。在本申请的一些实施例中，摄像头切换装置400，还包括：第三控制模块，用于控制第二摄像头的光学图像稳定器，按照第三补偿值运行，以使第二摄像头的成像中心点与第一摄像头的成像中心点之间的距离小于距离阈值。本申请实施例中，在根据第一摄像头拍摄第一预览图像过程中的第一补偿值对第二摄像头采集图像数据进行补偿之前，控制第二摄像头的光学图像稳定器使第一摄像头与第二摄像头的成像中心重合，在切换摄像头过程中，进一步减小了显示预览图像的跳变。在本申请的一些实施例中，第三控制模块，还用于控制第一摄像头和第二摄像头拍摄，以得到第一采样图像和第二采样图像，第一采样图像和第二采样图像中均包括目标对象；摄像头切换装置400，还包括：确定模块，用于根据目标对象在第一采样图像和第二采样图像中的位置，确定第三补偿值。本申请实施例中，在电子设备从第一摄像头切换至第二摄像头之前，获取预设位置对应的第三补偿值，以便在第一摄像头切换至第二摄像头时，控制第二摄像头的光学图像稳定器根据第三补偿值，运行至预设位置。在本申请的一些实施例中，摄像头切换装置400，还包括：处理模块，用于对根据第一摄像头采集的图像数据进行目标处理，以得到第一采样图像；生成模块，用于根据第二摄像头采集的图像数据，生成第二采样图像；其中，目标处理包括以下至少一项：图像裁剪、图像缩放。本申请实施例中，通过对第一摄像头采集得到第三采样图像进行图像缩放或图像裁剪，从而得到与第二采样图像相同的第一采样图像。便于后续确定第三补偿值的过程中，将第一采样图像与第二采样图像中的目标标记点对齐等操作，提高了确定第三补偿值的准确性。在本申请的一些实施例中，确定模块，用于分别根据目标对象在第一采样图像和第二采样图像中的位置，确定第一坐标和第二坐标，第一坐标为第一采样图像中目标对象在世界坐标系中的坐标，第二坐标为第二采样图像中目标对象在世界坐标系中的坐标；确定模块，用于根据第一坐标和第二坐标，确定第一关系式，第一关系式为世界坐标系与电子设备的图像坐标系的转换关系式；确定模块，用于根据第一关系式和预设旋转矩阵，确定第二关系式，第二关系式为世界坐标系与电子设备的相机坐标系的转换关系式；确定模块，用于根据第二关系式、第一焦距值和第二焦距值，确定第三补偿值，第一焦距值为第一摄像头的焦距值，第二焦距值为第二摄像头的焦距值。本申请实施例中，通过目标对象在第一采样图像和第二采样图像中的世界坐标系下的第一坐标和第二坐标，能够得到图像坐标系与世界坐标系的第一关系式，并根据第一关系式和预设旋转矩阵能够确定世界坐标系与电子设备的相机坐标系的第二关系式，并根据第二关系式、第一焦距值和第二焦距值，能够计算得到第三补偿值，使第三补偿值具有较高的准确性，在第二摄像头的光学图像稳定器运行第三补偿值时，能够准确运行至预设位置。本申请实施例中的摄像头切换装置可以是电子设备，也可以是电子设备中的部件，例如集成电路或芯片。该电子设备可以是终端，也可以为除终端之外的其他设备。示例性地，电子设备可以为手机、平板电脑、笔记本电脑、掌上电脑、车载电子设备、移动上网装置、增强现实/虚拟现实设备、机器人、可穿戴设备、超级移动个人计算机、上网本或者个人数字助理等，还可以为服务器、网络附属存储器、个人计算机、电视机、柜员机或者自助机等，本申请实施例不作具体限定。本申请实施例中的拍摄控制装置可以为具有操作系统的装置。该操作系统可以为安卓操作系统，可以为iOS操作系统，还可以为其他可能的操作系统，本申请实施例不作具体限定。本申请实施例提供的拍摄控制装置能够实现上述方法实施例实现的各个过程，为避免重复，这里不再赘述。可选地，本申请实施例还提供了一种电子设备，其中包括如上述任一实施例中的摄像头切换装置，因而具有任一实施例中的摄像头切换装置的全部有益效果，在此不再做过多赘述。可选地，本申请实施例还提供一种电子设备，图5示出了根据本申请实施例的电子设备的结构框图，如图5所示，电子设备500包括处理器502，存储器504，存储在存储器504上并可在处理器502上运行的程序或指令，该程序或指令被处理器502执行时实现上述拍摄控制方法实施例的各个过程，且能达到相同的技术效果，为避免重复，这里不再赘述。需要说明的是，本申请实施例中的电子设备包括上述的移动电子设备和非移动电子设备。图6为实现本申请实施例的一种电子设备的硬件结构示意图。该电子设备600包括但不限于：射频单元601、网络模块602、音频输出单元603、输入单元604、传感器605、显示单元606、用户输入单元607、接口单元608、存储器609以及处理器610等部件。本领域技术人员可以理解，电子设备600还可以包括给各个部件供电的电源，电源可以通过电源管理系统与处理器610逻辑相连，从而通过电源管理系统实现管理充电、放电、以及功耗管理等功能。图6中示出的电子设备结构并不构成对电子设备的限定，电子设备可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件布置，在此不再赘述。其中，处理器610，用于在显示第一预览图像的情况下，接收第一输入，第一预览图像为根据第一摄像头采集到的图像数据生成的图像；处理器610，用于响应于第一输入，将第一摄像头切换至第二摄像头；处理器610，用于获取第一摄像头的第一补偿值，第一补偿值为对第一摄像头采集图像数据过程中的防抖补偿值；显示单元606，用于显示第二预览图像，第二预览图像为根据第一补偿值对第二摄像头采集到的图像数据进行防抖补偿后生成的图像。本申请实施例中，在电子设备从第一摄像头切换至第二摄像头采集图像数据的过程中，根据第一摄像头采集第一预览图像的第一补偿值对第二摄像头采集图像数据的过程进行光学补偿，保证了第一预览图像切换至第二预览图像时，画面中心点不会发生变化，实现了在电子设备从第一摄像头切换至第二摄像头时，拍摄预览界面中的画面平滑切换，不会产生跳变。进一步地，处理器610，用于在第一补偿值小于或等于补偿阈值的情况下，控制第二摄像头的光学图像稳定器根据第一补偿值进行光学防抖补偿。本申请实施例中，通过检测第一补偿值与补偿阈值之间的数值关系，能够确定第二摄像头的光学图像稳定器是否能够带动第二摄像头根据第一补偿值进行移动。在第一补偿值小于补偿阈值的情况下，则控制第二摄像头的光学图像稳定器带动第二摄像头根据第一补偿值移动，从而使第一摄像头与第二摄像头的视场角保持一致，保证了电子设备的图像预览界面中的画面变化平滑。进一步地，处理器610，用于在第一补偿值大于补偿阈值，控制第二摄像头的光学图像稳定器根据补偿阈值进行光学防抖补偿；处理器610，用于根据第二补偿值，对第二摄像头采集的图像数据进行裁剪，以得到第二预览图像，其中，第二补偿值为根据第一补偿值和补偿阈值确定的。本申请实施例中，通过检测第一补偿值与补偿阈值之间的数值关系，能够确定第二摄像头的光学图像稳定器是否能够带动第二摄像头根据第一补偿值移动。在第一补偿值大于补偿阈值的情况下，则控制第二摄像头的光学图像稳定器带动第二摄像头根据补偿阈值移动，使第二摄像头的光学图像稳定器带动第二摄像头移动至极限位置，并在第二摄像头采集图像数据时，根据第一补偿值裁剪对图像数据进行裁剪，以得到第二预览图像，使第一摄像头与第二摄像头的视场角保持一致，保证了电子设备的图像预览界面中的画面变化平滑。进一步地，处理器610，用于控制第二摄像头的光学图像稳定器，按照第三补偿值运行，以使第二摄像头的成像中心点与第一摄像头的成像中心点之间的距离小于距离阈值。本申请实施例中，在根据第一摄像头拍摄第一预览图像过程中的第一补偿值对第二摄像头采集图像数据进行补偿之前，控制第二摄像头的光学图像稳定器使第一摄像头与第二摄像头的成像中心重合，在切换摄像头过程中，进一步减小了显示预览图像的跳变。进一步地，处理器610，用于控制第一摄像头和第二摄像头拍摄，以得到第一采样图像和第二采样图像，第一采样图像和第二采样图像中均包括目标对象；处理器610，用于根据目标对象在第一采样图像和第二采样图像中的位置，确定第三补偿值。本申请实施例中，在电子设备从第一摄像头切换至第二摄像头之前，获取预设位置对应的第三补偿值，以便在第一摄像头切换至第二摄像头时，控制第二摄像头的光学图像稳定器根据第三补偿值，运行至预设位置。进一步地，处理器610，用于对根据第一摄像头采集的图像数据进行目标处理，以得到第一采样图像；处理器610，用于根据第二摄像头采集的图像数据，生成第二采样图像；其中，目标处理包括以下至少一项：图像裁剪、图像缩放。本申请实施例中，通过对第一摄像头采集得到第三采样图像进行图像缩放或图像裁剪，从而得到与第二采样图像相同的第一采样图像。便于后续确定第三补偿值的过程中，将第一采样图像与第二采样图像中的目标标记点对齐等操作，提高了确定第三补偿值的准确性。进一步地，处理器610，用于分别根据目标对象在第一采样图像和第二采样图像中的位置，确定第一坐标和第二坐标，第一坐标为第一采样图像中目标对象在世界坐标系中的坐标，第二坐标为第二采样图像中目标对象在世界坐标系中的坐标；处理器610，用于根据第一坐标和第二坐标，确定第一关系式，第一关系式为世界坐标系与电子设备的图像坐标系的转换关系式；处理器610，用于根据第一关系式和预设旋转矩阵，确定第二关系式，第二关系式为世界坐标系与电子设备的相机坐标系的转换关系式；处理器610，用于根据第二关系式、第一焦距值和第二焦距值，确定第三补偿值，第一焦距值为第一摄像头的焦距值，第二焦距值为第二摄像头的焦距值。本申请实施例中，通过目标对象在第一采样图像和第二采样图像中的世界坐标系下的第一坐标和第二坐标，能够得到图像坐标系与世界坐标系的第一关系式，并根据第一关系式和预设旋转矩阵能够确定世界坐标系与电子设备的相机坐标系的第二关系式，并根据第二关系式、第一焦距值和第二焦距值，能够计算得到第三补偿值，使第三补偿值具有较高的准确性，在第二摄像头的光学图像稳定器运行第三补偿值时，能够准确运行至预设位置。应理解的是，本申请实施例中，输入单元604可以包括图形处理器6041和麦克风6042，图形处理器6041对在视频捕获模式或图像捕获模式中由图像捕获装置获得的静态图片或视频的图像数据进行处理。显示单元606可包括显示面板6061，可以采用液晶显示器、有机发光二极管等形式来配置显示面板6061。用户输入单元607包括触控面板6071以及其他输入设备6072中的至少一种。触控面板6071，也称为触摸屏。触控面板6071可包括触摸检测装置和触摸控制器两个部分。其他输入设备6072可以包括但不限于物理键盘、功能键、轨迹球、鼠标、操作杆，在此不再赘述。存储器609可用于存储软件程序以及各种数据。存储器609可主要包括存储程序或指令的第一存储区和存储数据的第二存储区，其中，第一存储区可存储操作系统、至少一个功能所需的应用程序或指令等。此外，存储器609可以包括易失性存储器或非易失性存储器，或者，存储器609可以包括易失性和非易失性存储器两者。其中，非易失性存储器可以是只读存储器、可编程只读存储器、可擦除可编程只读存储器、电可擦除可编程只读存储器或闪存。易失性存储器可以是随机存取存储器，静态随机存取存储器、动态随机存取存储器、同步动态随机存取存储器、双倍数据速率同步动态随机存取存储器、增强型同步动态随机存取存储器、同步连接动态随机存取存储器和直接内存总线随机存取存储器。本申请实施例中的存储器609包括但不限于这些和任意其它适合类型的存储器。处理器610可包括一个或多个处理单元；可选地，处理器610集成应用处理器和调制解调处理器，其中，应用处理器主要处理涉及操作系统、用户界面和应用程序等的操作，调制解调处理器主要处理无线通信信号，如基带处理器。可以理解的是，上述调制解调处理器也可以不集成到处理器610中。本申请实施例还提供一种可读存储介质，可读存储介质上存储有程序或指令，该程序或指令被处理器执行时实现上述方法实施例的各个过程，且能达到相同的技术效果，为避免重复，这里不再赘述。其中，处理器为上述实施例中的电子设备中的处理器。可读存储介质，包括计算机可读存储介质，如计算机只读存储器ROM、随机存取存储器RAM、磁碟或者光盘等。本申请实施例另提供了一种芯片，芯片包括处理器和通信接口，通信接口和处理器耦合，处理器用于运行程序或指令，实现上述拍摄控制方法实施例的各个过程，且能达到相同的技术效果，为避免重复，这里不再赘述。应理解，本申请实施例提到的芯片还可以称为系统级芯片、系统芯片、芯片系统或片上系统芯片等。本申请实施例提供一种计算机程序产品，该程序产品被存储在存储介质中，该程序产品被至少一个处理器执行以实现如上述拍摄控制方法实施例的各个过程，且能达到相同的技术效果，为避免重复，这里不再赘述。需要说明的是，在本文中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者装置不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者装置所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括该要素的过程、方法、物品或者装置中还存在另外的相同要素。此外，需要指出的是，本申请实施方式中的方法和装置的范围不限按示出或讨论的顺序来执行功能，还可包括根据所涉及的功能按基本同时的方式或按相反的顺序来执行功能，例如，可以按不同于所描述的次序来执行所描述的方法，并且还可以添加、省去、或组合各种步骤。另外，参照某些示例所描述的特征可在其他示例中被组合。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到上述实施例方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分可以以计算机软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台终端执行本申请各个实施例的方法。上面结合附图对本申请的实施例进行了描述，但是本申请并不局限于上述的具体实施方式，上述的具体实施方式仅仅是示意性的，而不是限制性的，本领域的普通技术人员在本申请的启示下，在不脱离本申请宗旨和权利要求所保护的范围情况下，还可做出很多形式，均属于本申请的保护之内。
