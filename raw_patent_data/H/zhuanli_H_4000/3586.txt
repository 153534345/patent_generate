标题title
一种下载方法、装置、终端设备以及可读存储介质
摘要abst
本申请提供了一种下载方法、装置、终端设备以及可读存储介质。所述方法包括：确定待下载的目标资源所对应的预设时刻，所述预设时刻在所述目标资源对应的发布时刻之后，所述预设时刻为所述目标资源的下载截至时刻；根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率；在所述下载概率大于预设阈值时，下载所述目标资源。该方法通过计算下载概率来控制目标资源的下载，可避免下载过于集中时对资源服务器的带宽产生较大冲击，可有效降低资源服务器的压力。
权利要求书clms
1.一种下载方法，其特征在于，包括：确定待下载的目标资源所对应的预设时刻，所述预设时刻在所述目标资源对应的发布时刻之后，所述预设时刻为所述目标资源的下载截至时刻；根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率；在所述下载概率大于预设阈值时，下载所述目标资源。2.根据权利要求1所述的方法，其特征在于，根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率，包括：在所述预设时刻和当前时刻之间的时长大于所述第一预设时长时，根据所述当前时刻与所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率；在所述预设时刻和当前时刻之间的时长不大于所述第一预设时长时，将所述目标资源的下载概率设置为大于所述预设阈值的概率值。3.根据权利要求2所述的方法，其特征在于，根据所述当前时刻和所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率，包括：确定所述当前时刻所属的预设时间段，及所述预设时间段对应的下载系数，所述预设时间段至少包括下载高峰时间段和下载低峰时间段，所述下载高峰时间段对应的下载系数低于所述下载低峰时间段对应的下载系数；根据所述下载系数，及所述当前时刻与所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率。4.根据权利要求2或3所述的方法，其特征在于，在根据所述当前时刻和所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率后，所述方法还包括：确定当前登录的用户账户所对应的初始下载概率；将所述初始下载概率，与得到的所述目标资源的下载概率的和值作为最终的下载概率；在所述下载概率大于预设阈值时，下载所述目标资源，包括：在所述最终的下载概率大于所述预设阈值时，下载所述目标资源。5.根据权利要求4所述的方法，其特征在于，确定当前登录的账户所对应的初始下载概率，包括：在当前登录的用户账户的本次登录时刻，与上次登录时刻之间的时长不小于第二预设时长时，根据所述本次登录时刻与所述上次登录时刻之间的时长所属的预设时长区间获得初始下载概率；其中，所述本次登录时刻与所述上次登录时刻之间的时长，与所述初始下载概率成正比。6.根据权利要求1所述的方法，其特征在于，在所述下载概率大于预设阈值时，下载所述目标资源之前，所述方法还包括：根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，及所述预设时刻与所述当前时刻的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得所述目标资源的下载等级；在所述下载概率大于预设阈值时，下载所述目标资源，包括：在所述下载概率大于预设阈值时，按照与所述下载等级匹配的下载策略，下载所述目标资源。7.根据权利要求1所述的方法，其特征在于，根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率，包括：每隔预设时间段，根据所述预设时刻与当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率；在所述下载概率大于预设阈值时，下载所述目标资源，包括：在得到所述目标资源的下载概率的时刻，若所述下载概率大于预设阈值，下载所述目标资源。8.根据权利要求1所述的方法，其特征在于，在所述下载概率大于预设阈值时，下载所述目标资源，包括：获得新的随机数，将所述新的随机数作为所述预设阈值，在所述下载概率大于所述新的随机数时，下载所述目标资源。9.一种下载装置，其特征在于，包括：第一确定模块，用于确定待下载的目标资源所对应的预设时刻，所述预设时刻在所述目标资源对应的发布时刻之后；获得模块，用于根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率；下载模块，用于在所述下载概率大于预设阈值时，下载所述目标资源。10.一种电子设备，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-8中任一项所述的方法。11.一种存储有计算机指令的非瞬时计算机可读存储介质，其中，所述计算机指令用于使所述计算机执行权利要求1-8中任一项所述的方法。12.一种计算机程序产品，包括计算机程序，所述计算机程序在被处理器执行时实现根据权利要求1-8中任一项所述的方法。
说明书desc
技术领域本申请涉及数据处理技术领域，特别是涉及一种下载方法、装置、终端设备以及可读存储介质。背景技术在资源请求下载领域，目前的客户端下载资源的方式是：在检测到用户发起的资源下载请求时，向资源所在的服务器发送资源下载请求，并接收该服务器响应于资源下载请求而返回的资源。一般地，在午间或者晚间等用户非工作状态的休息时段，用户发起的资源下载请求比较集中，数据量大，这种下载高峰现象会对服务器带宽造成很大的冲击，增大了服务器的运行压力及出现故障的概率。因此，如何避免下载高峰及降低服务器带宽压力，成为亟待解决的问题。发明内容本申请提供了一种下载方法、装置、终端设备以及可读存储介质，可避免下载过于集中时对资源服务器的带宽产生较大冲击，进而降低资源服务器的压力。具体技术方案如下：在本申请实施例的第一方面，首先提供了一种下载方法，所述方法包括：确定待下载的目标资源所对应的预设时刻，所述预设时刻在所述目标资源对应的发布时刻之后，所述预设时刻为所述目标资源的下载截至时刻；根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率；在所述下载概率大于预设阈值时，下载所述目标资源。可选地，根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率，包括：在所述预设时刻和当前时刻之间的时长大于所述第一预设时长时，根据所述当前时刻与所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率；在所述预设时刻和当前时刻之间的时长不大于所述第一预设时长时，将所述目标资源的下载概率设置为大于所述预设阈值的概率值。可选地，根据所述当前时刻和所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率，包括：确定所述当前时刻所属的预设时间段，及所述预设时间段对应的下载系数，所述预设时间段至少包括下载高峰时间段和下载低峰时间段，所述下载高峰时间段对应的下载系数低于所述下载低峰时间段对应的下载系数；根据所述下载系数，及所述当前时刻与所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率。可选地，在根据所述当前时刻和所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率后，所述方法还包括：确定当前登录的用户账户所对应的初始下载概率；将所述初始下载概率，与得到的所述目标资源的下载概率的和值作为最终的下载概率；在所述下载概率大于预设阈值时，下载所述目标资源，包括：在所述最终的下载概率大于所述预设阈值时，下载所述目标资源。可选地，确定当前登录的账户所对应的初始下载概率，包括：在当前登录的用户账户的本次登录时刻，与上次登录时刻之间的时长不小于第二预设时长时，根据所述本次登录时刻与所述上次登录时刻之间的时长所属的预设时长区间获得初始下载概率；其中，所述本次登录时刻与所述上次登录时刻之间的时长，与所述初始下载概率成正比。可选地，在所述下载概率大于预设阈值时，下载所述目标资源之前，所述方法还包括：根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，及所述预设时刻与所述当前时刻的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得所述目标资源的下载等级；在所述下载概率大于预设阈值时，下载所述目标资源，包括：在所述下载概率大于预设阈值时，按照与所述下载等级匹配的下载渠道，下载所述目标资源。可选地，根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率，包括：每隔预设时间段，根据所述预设时刻与当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率；在所述下载概率大于预设阈值时，下载所述目标资源，包括：在得到所述目标资源的下载概率的时刻，若所述下载概率大于预设阈值，下载所述目标资源。可选地，在所述下载概率大于预设阈值时，下载所述目标资源，包括：获得新的随机数，将所述新的随机数作为所述预设阈值，在所述下载概率大于所述新的随机数时，下载所述目标资源。在本申请实施例的第二方面，还提供了一种下载装置，所述装置包括：第一确定模块，用于确定待下载的目标资源所对应的预设时刻，所述预设时刻在所述目标资源对应的发布时刻之后，所述预设时刻为所述目标资源的下载截至时刻；第一获得模块，用于根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率；下载模块，用于在所述下载概率大于预设阈值时，下载所述目标资源。可选地，所述下载模块包括：第一获得子模块，用于在所述预设时刻和当前时刻之间的时长大于所述第一预设时长时，根据所述当前时刻与所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率；设置子模块，用于在所述预设时刻和当前时刻之间的时长不大于所述第一预设时长时，将所述目标资源的下载概率设置为大于所述预设阈值的概率值。可选地，所述第一获得子模块包括：确定子模块，用于确定所述当前时刻所属的预设时间段，及所述预设时间段对应的下载系数，所述预设时间段至少包括下载高峰时间段和下载低峰时间段，所述下载高峰时间段对应的下载系数低于所述下载低峰时间段对应的下载系数；第二获得子模块，用于根据所述下载系数，及所述当前时刻与所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率。可选地，所述装置还包括：第二确定模块，用于确定当前登录的用户账户所对应的初始下载概率；第三确定模块，用于将所述初始下载概率，与得到的所述目标资源的下载概率的和值作为最终的下载概率；所述下载模块包括：第一下载子模块，用于在所述最终的下载概率大于所述预设阈值时，下载所述目标资源。可选地，所述第二确定模块包括：第三获得子模块，用于在当前登录的用户账户的本次登录时刻，与上次登录时刻之间的时长不小于第二预设时长时，根据所述本次登录时刻与所述上次登录时刻之间的时长所属的预设时长区间获得初始下载概率；其中，所述本次登录时刻与所述上次登录时刻之间的时长，与所述初始下载概率成正比。可选地，所述装置还包括：第二获得模块，用于根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，及所述预设时刻与所述当前时刻的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得所述目标资源的下载等级；所述下载模块包括：第二下载子模块，用于在所述下载概率大于预设阈值时，按照与所述下载等级匹配的下载渠道，下载所述目标资源。可选地，所述第一获得模块包括：第五获得子模块，用于每隔预设时间段，根据所述预设时刻与当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率；所述下载模块包括：第三下载子模块，用于在得到所述目标资源的下载概率的时刻，若所述下载概率大于预设阈值，下载所述目标资源。可选地，所述下载模块包括：第四下载子模块，用于获得新的随机数，将所述新的随机数作为所述预设阈值，在所述下载概率大于所述新的随机数时，下载所述目标资源。在本申请实施例的第三方面，还提供了一种电子设备，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行本申请实施例第一方面所述的方法。在本申请实施例的第四方面，还提供了一种存储有计算机指令的非瞬时计算机可读存储介质，其中，所述计算机指令用于使所述计算机执行本申请实施例第一方面所述的方法。在本申请实施例的第五方面，还提供了一种计算机程序产品，包括计算机程序，所述计算机程序在被处理器执行时实现本申请实施例第一方面所述的方法。采用本申请的下载方法，首先确定待下载的目标资源所对应的预设时刻，该预设时刻在目标资源对应的发布时刻之后。接着，根据预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于目标资源的下载概率。最后在下载概率大于预设阈值时，下载目标资源。通过该方法，无论是在下载高峰期还是在下载低峰期，均通过计算下载概率来控制目标资源的下载，从而避免高峰期和低峰期带来的影响，进而避免下载过于集中时对资源服务器的带宽产生较大冲击，可有效降低资源服务器的压力。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍。图1是本申请一实施例示出的一种实施环境示意图；图2是本申请一实施例示出的一种下载方法的流程图；图3是本申请一实施例示出的一种下载过程示意图；图4是本申请一实施例示出的一种下载装置的结构框图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行描述。图1是本申请一实施例示出的一种实施环境示意图。在图1中，客户端中配置有下载模块，用于下载各类资源。下载模块中配置有预分发配置文件。下载模块支持预分发下载任务，其中，预分发下载任务是指：根据预分发配置文件从资源服务器下载各类预先发布的资源，其中，资源可以有多种类型，例如文字、图片、音频、视频、代码等，本实施例对资源的类型不作具体限制。本申请提供了一种下载方法，应用于图1中的下载模块。图2是本申请一实施例示出的一种下载方法的流程图。参照图2，本申请的下载方法可以包括如下步骤：步骤S21：确定待下载的目标资源所对应的预设时刻，所述预设时刻在所述目标资源对应的发布时刻之后，所述预设时刻为所述目标资源的下载截至时刻。在本实施例中，发布时刻是指资源被发布到网络上的时刻。资源只有被发布到网络，用户才可以通过客户端的下载模块下载。其中，预设时刻是指预先由资源的发布者任意设定的时刻。预设时刻是一个人为设定的理想的下载截止时刻。预设时刻并不等同于资源的过期时刻，也即用户依然可以下载超过预设时刻的资源。在一些实施场景中，为了任务的正常执行，通常需要用户在预设时刻之前下载目标资源。例如，在一些企业中，通常由多人协作完成某项任务，假设某项任务定于10月20日10点开始执行，那么协作完成该项任务的各个成员需要在10月20日10点之前下载与该任务相关的各类资源并开始准备，此时，10月20日10点这一时刻即为预设时刻。如果某类资源在9月20日10点发布，那么9月20日10点则为该类资源的发布时刻。本申请中的下载方法适用于预分发下载，预分发下载与主动下载不同。主动下载是指：下载模块面向用户提供有下载入口，用户主动点击下载按钮以触发下载操作后，客户端立即开始下载资源。预分发下载是指：下载模块面向用户并不提供下载入口，客户端在满足下载条件后自动下载预先发布的资源，也可以理解为被动下载。其中，下载条件可以任意设置，例如可以是目标资源发布时、打开某个应用程序时、进入直播间时等，本申请的下载方法可以适用于不同应用场景中的预分发下载，各个应用场景中采用何种下载条件可以根据实际需求设置，本实施例对下载条件及各个应用场景下使用的下载条件不作具体限制。其中，应用场景可以有多种类型，例如直播场景、小视频浏览场景、动态页面访问场景、网上商城购物场景等，本实施例对应用场景的类型不作具体限制。以在直播场景中应用下载方法为例，如果采用的下载条件是用户打开直播应用APP时，那么在目标资源被发布后且用户打开直播应用APP时，客户端检测到目标资源的下载对用户而言为预分发任务，那么客户端开始执行本申请的下载方法，即开始执行步骤S21-步骤S23。如果采用的下载条件是用户进入直播间时，在目标资源被发布后且用户进入直播间时，客户端检测到目标资源的下载对用户而言为预分发任务，那么客户端开始执行本申请的下载方法。在一些直播场景下，用户如果要正常参与直播活动，可能需要下载一些文件，此时，这些文件的下载对进入直播间的用户而言为预分发任务。在直播场景中，用户是可以提前进入直播间的，因此，开始进行直播的时刻为预设时刻。再以在小视频浏览场景中应用下载方法为例，如果采用的下载条件是用户打开小视频查看APP时，那么在目标资源被发布后且用户打开小视频查看APP时，客户端检测到目标资源的下载对用户而言为预分发任务，那么客户端开始执行本申请的下载方法。如果用户在近一段时间使用小视频查看APP的频率较高，那么还可以在目标资源被发布时，开始执行本申请的下载方法。在本实施例中，目标资源在被发布时会携带发布信息，发布信息包含目标资源的发布时刻和预设时刻。资源在发布后，客户端在满足下载条件时会自动根据目标资源的发布信息确定出目标资源的发布时刻和预设时刻。示例地，代码文件X在发布后，客户端得知该代码文件X的下载任务对用户A为预分发下载任务，那么客户端会实时检测代码文件X对应的发布时刻和预设时刻，并执行后续步骤S22-步骤S23。步骤S22：根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率。在本实施例中，当前时刻是指执行下载方法的时刻。下载方法既可以实时执行，也可以每隔指定时长执行，具体可根据实际需求设置，本实施例对此不作具体限制。在具体实施时，可以将预设时刻和当前时刻之间的时长，与第一预设时长进行大小比较，然后根据比较结果确定出目标资源的下载概率。例如，可以预先设置大于第一预设时长时对应第一下载概率，不大于第一预设时长时对应第二下载概率，那么，当预设时刻和当前时刻之间的时长大于第一预设时长时，将第一下载概率作为目标资源的下载概率，当预设时刻和当前时刻之间的时长不大于第一预设时长时，将第二下载概率作为目标资源的下载概率。步骤S23：在所述下载概率大于预设阈值时，下载所述目标资源。在本实施例中，如果下载概率大于预设阈值，那么启动对目标资源的下载操作。在本实施例中，按照下载概率来下载目标资源，只有下载概率大于预设阈值时，才会对目标资源进行下载，如果不大于预设阈值，会在下一次执行下载方法时，再次计算下载概率是否大于预设阈值。该方法与相关技术中检测到用户的下载请求后就立即进行下载的方式相比，可达到下载流量削峰的目的，减少对资源服务器带宽产生的冲击，降低资源服务器的压力。采用本申请的下载方法，首先确定待下载的目标资源所对应的预设时刻，该预设时刻在目标资源对应的发布时刻之后。接着，根据预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于目标资源的下载概率。最后在下载概率大于预设阈值时，下载目标资源。通过该方法，无论是在下载高峰期还是在下载低峰期，均通过计算下载概率来控制目标资源的下载，从而避免高峰期和低峰期带来的影响，进而避免下载过于集中时对资源服务器的带宽产生较大冲击，可有效降低资源服务器的压力。结合以上实施例，在一种实施方式中，在所述下载概率大于预设阈值时，下载所述目标资源，具体可以包括：获得新的随机数，将所述新的随机数作为所述预设阈值，在所述下载概率大于所述新的随机数时，下载所述目标资源。在本实施例中，预设阈值可以是动态变化的，每一次计算得到下载概率时，都重新获得一个新的随机数，并将该新的随机数作为预设阈值，然后将计算得到的下载概率与该预设阈值进行比较。如果下载概率大于该新的随机数，启动对目标资源的下载操作，如果下载概率不大于该新的随机数，暂停对目标资源的下载操作。在一种实施环境中，如果将预设阈值设置成固定值，例如10％，那么当计算得到某个目标资源的下载概率大于10％时，会一直对该目标资源进行下载，无法达到多次对目标资源的下载进行控制的目的。因此，为实现多次下载控制，克服将预设阈值设置成固定值的下载方式所存在的缺陷，本实施例采取将预设阈值设置成动态随机数的形式，每一次计算得到下载概率时，都将该下载概率与该新的随机数对比。例如，对于某个目标资源，第一次计算得到的下载概率为15％，得到的随机数为10％，那么启动对该目标资源的下载，第二次计算得到的下载概率为20％，得到的随机数为50％，那么暂停对该目标资源的下载，第三次计算得到的下载概率为21％，得到的随机数为40％，那么继续对该目标资源进行下载，以此类推，直到计算得到的下载概率为100％时，持续下载该目标资源直至下载完毕。因此，通过这种随机数控制下载的方式，可以实现对目标资源的下载过程的多次控制，防止采用将预设阈值设置成固定值的下载方式时无法多次对目标资源进行下载控制的现象，进一步增强了下载控制的灵活性。其次，相较于将预设阈值设置成固定值的下载方式，采用随机数与下载概率进行对比，可以避免所有的资源在下载概率较低时都无法触发下载，且需要等待较长时间才能下载的的现象，进而模拟出正常的下载环境，防止资源长时间无法下载时降低用户的使用体验。本实施例中，预设阈值可以采用动态变化的随机数，可避免采用固定值时无法实现下载过程的灵活控制的弊端。在一种实施方式中，在获得对应于所述目标资源的下载概率后，本申请的下载方法还可以包括：在所述下载概率不大于预设阈值时，暂停下载所述目标资源。在本实施例中，如果预设阈值采用固定值，那么当下载概率大于固定值后，目标资源会一直处于下载状态，不会存在下载概率不不大于预设阈值的情况。但当预设阈值采用随机数时，会存在下载概率不不大于预设阈值的情况，针对此种情况，暂停下载目标资源，等待后续计算出大于随机数的下载概率后，再继续下载目标资源，具体如前文所述。结合以上实施例，在一种实施方式中，根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率，具体可以包括如下步骤：在所述预设时刻和当前时刻之间的时长大于所述第一预设时长时，根据所述当前时刻与所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率；在所述预设时刻和当前时刻之间的时长不大于所述第一预设时长时，将所述目标资源的下载概率设置为大于所述预设阈值的概率值。在本实施例中，计算下载概率时可以分为两种情况：一、预设时刻和当前时刻之间的时长大于第一预设时长。在此种情况下，可以将当前时刻与发布时刻间的时长，与预设时刻与发布时刻间的时长的比值作为下载概率。也即：下载概率＝当前时刻与发布时刻间的时长/预设时刻与发布时刻间的时长。当预设时刻和当前时刻之间的时长大于第一预设时长时，表示当前时刻距预设时刻还有一段较长的距离，此时可以根据比值来获得下载概率。二、预设时刻和当前时刻之间的时长不大于第一预设时长。其中，预设时刻和当前时刻之间的时长不大于第一预设时长又包括两种情况：当前时刻未超过预设时刻时预设时刻和当前时刻之间的时长不大于第一预设时长，和当前时刻已超过预设时刻。在这两种情况下，可以直接设置下载概率为任意大于预设阈值的概率值。当预设时刻和当前时刻之间的时长不大于第一预设时长时，表示当前时刻距预设时刻较近。可以理解的是，在当前时刻距离预设时刻较近时，用户对目标资源的需求越急切，因此可以适当提升下载概率，将下载概率设置为任意大于预设阈值的概率值，例如可直接将下载概率设置为1。示例地，企业A于8月20日10点发布了一份文件X到资源服务器，并通知于8月30日10点召开全体员工大会，会议需要使用该文件X。此时，文件X对应的发布时刻为8月20日10点，预设时刻为8月30日10点。小张是企业A的员工，客户端检测到文件X的下载对小张而言为预分发任务，那么客户端一直执行步骤S21-S23中的下载方法。以在8月21日10点时客户端执行的下载方法为例，在该时刻，客户端首先获得当前时刻距离预设时刻的时长216小时，由于该时长大于第一预设时长24小时，接着获得当前时刻与发布时刻间的时长24小时，占预设时刻与发布时刻间的时长240小时的比值10％，该比值10％则为小张对文件X的下载概率。如果此次的预设阈值为30％，那么下载概率小于预设阈值，客户端的下载模块不对文件X进行下载。再以在8月29日12点时执行的下载方法为例，客户端首先获得当前时刻距离预设时刻的时长22小时，由于该时长不大于第一预设时长24小时，因此直接将小张对文件X的下载概率设置为100％。该下载概率大于预设阈值30％，客户端的下载模块立即启动对文件X的下载操作。本实施例中通过当前时刻与预设时刻之间的距离的远近来获得下载概率，而当前时刻与预设时刻之间的距离的远近通常反映了用户对目标资源的急切程度，因此本实施例的下载概率的高低还与用户对目标资源的需求的急切程度相符合，急切程度越高，下载概率越高，增强了下载概率的合理性。结合以上实施例，在一种实施方式中，本申请还引入了下载系数，不同预设时间段对应有不同的下载系数，利用下载系数对目标资源的下载概率进行调整，将下载概率与不同时间段的特征相结合，可达到将下载操作均匀分布在各个时间段内的目的。在此基础上，根据所述当前时刻和所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率，具体可以包括如下步骤：确定所述当前时刻所属的预设时间段，及所述预设时间段对应的下载系数,所述预设时间段至少包括下载高峰时间段和下载低峰时间段，所述下载高峰时间段对应的下载系数低于所述下载低峰时间段对应的下载系数；根据所述下载系数，及所述当前时刻与所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率。在本实施例中，可以预先划分多个时间段，并为每一个时间段设置一个对应的下载系数。示例地，可以将一天划分为12个时间段，每两个小时为一个时间段，为每一个时间段设置不同的下载系数。一般地，在中午和晚上等休息时间段，用户的下载请求比较集中，对此，可以将下载高峰期的下载系数设置得较小，而对于其它一些非下载高峰期的时间段，可以将下载系数设置得较大，从而尽可能地将下载操作均匀分布在各个时间段内，达到下载流量削峰的目的。在具体实施时，根据所述下载系数，及所述当前时刻与所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率，具体可以包括：将所述下载系数，及所述当前时刻与所述发布时刻间的时长占所述预设时刻与所述发布时刻间的时长的比值的乘积作为对应于所述目标资源的下载概率。也即：下载概率＝当前时刻与发布时刻间的时长*下载系数/预设时刻与发布时刻间的时长。示例地，如果在10月1日晚24点计算出的当前时刻与发布时刻间的时长，占预设时刻与发布时刻间的时长的比值为60％，且10月1日晚24点所属的时间段对应的下载系数为1.5，那么在10月1日晚24点计算出的下载概率为90％。而如果在10月1日晚20点计算出的当前时刻与发布时刻间的时长，占预设时刻与发布时刻间的时长的比值为60％，且10月1日晚20点所属的时间段对应的下载系数为0.5，那么在10月1日晚20点计算出的下载概率为30％。因此，本申请可通过下载系数，控制10月1日晚上的下载高峰时段间的下载概率低于晚上非下载高峰时段间的下载概率，从而将下载操作均匀分布在各个时间段内，降低资源服务器的压力。本实施例中引入了下载系数，利用各个不同时间段的下载系数对目标资源的下载概率进行调整，实现了将下载概率与不同时间段的特征相结合，例如可通过降低下载高峰时期的下载概率及提升低峰时期的下载概率的操作，尽可能地将下载操作均匀分布在各个时间段内，从而避免下载过于集中时对资源服务器的带宽产生较大的冲击，降低资源服务器的压力。结合以上实施例，在一种实施方式中，本申请还引入了初始下载概率，不同的用户账户所对应的初始下载概率不同。在此基础上，在根据所述当前时刻和所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率后，本申请的下载方法还可以包括如下步骤：确定当前登录的用户账户所对应的初始下载概率；将所述初始下载概率，与得到的所述目标资源的下载概率的和值作为最终的下载概率。在本实施例中，可以预先根据不同用户账户的信用等级、积分、是否为会员等，为不同的用户账户设置不同的初始下载概率。例如，可以将信用等级较高的用户账户的初始下载概率设置为一个较高的值，或者将积分较多的用户账户的初始下载概率设置为一个较高的值，又或者将会员用户账户的初始下载概率设置为一个较高的值。在根据当前时刻与发布时刻间的时长占预设时刻与发布时刻间的时长的比值得到下载概率后，可以直接将得到的下载概率和初始下载概率的和值作为最终的下载概率。或者，在根据下载系数、当前时刻与发布时刻间的时长占预设时刻与发布时刻间的时长的比值得到下载概率后，可以将得到的下载概率和初始下载概率的和值作为最终的下载概率。相应地，在所述下载概率大于预设阈值时，下载所述目标资源，包括：在所述最终的下载概率大于所述预设阈值时，下载所述目标资源。在本实施例中，在得到最终的下载概率后，可以将最终的下载概率与预设阈值进行比较，如果最终的下载概率大于预设阈值，则下载目标资源。本实施例中为不同的用户账户设置不同的初始下载概率，将下载概率与用户账户的特征相结合，实现了根据用户账户的特征对目标资源的下载概率的灵活调整，优化了用户的下载体验。结合以上实施例，在一种实施方式中，确定当前登录的账户所对应的初始下载概率，具体可以包括如下步骤：在当前登录的用户账户的本次登录时刻，与上次登录时刻之间的时长不小于第二预设时长时，根据所述本次登录时刻与所述上次登录时刻之间的时长所属的预设时长区间获得初始下载概率；其中，所述本次登录时刻与所述上次登录时刻之间的时长，与所述初始下载概率成正比。在本实施例中，可以根据用户账户的本次登录时刻与上一次登录时刻之间的间隔时长和预设时长区间获得初始下载概率，间隔时长越长，初始下载概率越高。在本实施例中，还可以预先设置多个时长区间，例如5-15天、15-30天、1-3个月、3个月及以上等多个不同时长区间，并为不同的时长区间设置不同的初始下载概率。例如可以为5-15天这一时长区间设置初始下载概率为1％，为15-30天这一时长区间设置初始下载概率为2％，为1-3个月这一时长区间设置初始下载概率为3％，为3个月及以上这一区间设置初始下载概率为4％，其中，初始下载概率的上限值为5％，第二预设时长为5天。当然，初始下载概率的上限值和第二预设时长的具体值可以根据实际需求设置，本实施例对此不作限制。在本实施例中，第二预设时长＝目标资源的预设时刻与目标资源的发布时刻之间的时长*初始概率配置系数，其中，初始概率配置系数是一个人为设定的值。当本次登录时刻与上次登录时刻之间的时长大于或等于第二预设时长时，确定采用初始下载概率，反之，当本次登录时刻与上次登录时刻之间的时长小于第二预设时长时，不采用初始下载概率。本实施例中根据用户账户的本次登录时刻与上一次登录时刻之间的间隔时长为不同用户账户设置初始下载概率，且本次登录时刻与上次登录时刻之间的时长与初始下载概率成正比，因此，对于低频启动用户，可以设置其初始下载概率为一个较高的值，从而优化用户的使用体验。结合以上实施例，在一种实施方式中，在所述下载概率大于预设阈值时，下载所述目标资源之前，具体可以包括：根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，及所述预设时刻与所述当前时刻的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得所述目标资源的下载等级。相应地，在所述下载概率大于预设阈值时，下载所述目标资源，包括：在所述下载概率大于预设阈值时，按照与所述下载等级匹配的下载策略，下载所述目标资源。其中，下载策略可以包括：下载渠道、下载速度等，下载策略可以根据实际需求配置。在一种实施方式中，根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，及所述预设时刻与所述当前时刻的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得所述目标资源的下载等级，具体可以包括：在所述预设时刻和当前时刻之间的时长不大于第一预设时长时，所述下载等级为最高等级；在所述预设时刻和当前时刻之间的时长大于第一预设时长，且所述预设时刻与所述当前时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值不低于第一比值时，所述下载等级为最低等级；在所述预设时刻和当前时刻之间的时长大于第一预设时长，且所述预设时刻与所述当前时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值在第一比值与第二比值之间时，所述下载等级为普通等级，第一比值高于第二比值；在所述预设时刻和当前时刻之间的时长大于第一预设时长，且所述预设时刻与所述当前时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值低于第二比值时，所述下载等级为最高等级。在本实施例中，下载等级可以包括：最低等级、普通等级、最高等级。不同下载等级对应的下载策略不同。在本实施例中，下载策略可以是为不同的下载等级设置不同的下载渠道。例如针对最高等级，可优先使用CDN下载，针对最低等级，可优先使用P2P下载，针对普通等级，可根据实际需求选择合适的下载方式。在本实施例中，下载策略还可以是为不同的下载等级设置不同的下载速度，例如可以设置最高等级的下载速度高于普通等级，设置普通等级的下载速度高于最低等级。示例地，假设第一预设时长为1小时，第一比值为60％，第二比值为40％。那么，当预设时刻和当前时刻之间的时长不大于1小时时，下载等级为最高等级。当预设时刻和当前时刻之间的时长大于1小时，且预设时刻与当前时刻间的时长占预设时刻与发布时刻间的时长的比值不低于60％时时，下载等级为最低等级。当预设时刻和当前时刻之间的时长大于1小时、预设时刻与当前时刻间的时长占预设时刻与发布时刻间的时长的比值不低于40％时且低于60％时，下载等级为普通等级。当预设时刻和当前时刻之间的时长大于1小时，且预设时刻与当前时刻间的时长占预设时刻与发布时刻间的时长的比值低于40％时，下载等级为最高等级。其中，第一比值和第二比值可根据实际需求任意设置，本实施例对此不作具体限制。本实施例中，获得目标资源的下载等级并按照与下载等级匹配的下载策略下载目标资源，可提升对目标资源的下载的灵活性。结合以上实施例，在一种实施方式中，根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率，具体可以包括：每隔预设时间段，根据所述预设时刻与当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率；在所述下载概率大于预设阈值时，下载所述目标资源，包括：在得到所述目标资源的下载概率的时刻，若所述下载概率大于预设阈值，下载所述目标资源。其中，预设时间段可以根据实际需求设置，例如1分钟、2分钟、5分钟等，本实施例对此不作具体限制。在本实施例中，每隔预设时间段计算一次目标资源的下载概率，如果下载概率大于预设阈值，立即启动对目标资源的下载，如果下载概率不大于预设阈值，暂不下载目标资源，等待下一次计算目标资源的下载概率并判断是否可以下载。本实施例中，定时更新状态，每隔预设时间段重新计算下载概率，并在下载概率大于预设阈值时启动对目标资源的下载，可避免下载过于集中时对资源服务器的带宽产生较大的冲击，进而降低资源服务器的压力。在本申请，根据预分发配置文件来配置用户初始概率、各个预设时间段的下载系数、下载方法的执行频率。图3是本申请一实施例示出的一种下载过程示意图。在图3中，客户端的下载模块在启动后加载预分发配置文件，并根据预分发配置文件，每隔5分钟执行一次下载方法，计算对目标资源的下载概率，如果命中下载概率，则开始下载目标资源，如果未命中下载概率，则暂不下载目标资源，等待5分钟过后再次计算下载概率并判断是否下载。本申请的方法通过计算下载概率来控制目标资源的下载，可避免下载过于集中时对资源服务器的带宽产生较大冲击，可有效降低资源服务器的压力。需要说明的是，对于方法实施例，为了简单描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本申请实施例并不受所描述的动作顺序的限制，因为依据本申请实施例，某些步骤可以采用其他顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于优选实施例，所涉及的动作并不一定是本申请实施例所必须的。基于同一发明构思，本申请一实施例提供一种下载装置400。参考图4，图4是本申请一实施例示出的一种下载装置的结构框图。如图4所示，该装置400包括：第一确定模块401，用于确定待下载的目标资源所对应的预设时刻，所述预设时刻在所述目标资源对应的发布时刻之后，所述预设时刻为所述目标资源的下载截至时刻；第一获得模块402，用于根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率；下载模块403，用于在所述下载概率大于预设阈值时，下载所述目标资源。可选地，所述下载模块403包括：第一获得子模块，用于在所述预设时刻和当前时刻之间的时长大于所述第一预设时长时，根据所述当前时刻与所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率；设置子模块，用于在所述预设时刻和当前时刻之间的时长不大于所述第一预设时长时，将所述目标资源的下载概率设置为大于所述预设阈值的概率值。可选地，所述第一获得子模块包括：确定子模块，用于确定所述当前时刻所属的预设时间段，及所述预设时间段对应的下载系数，所述预设时间段至少包括下载高峰时间段和下载低峰时间段，所述下载高峰时间段对应的下载系数低于所述下载低峰时间段对应的下载系数；第二获得子模块，用于根据所述下载系数，及所述当前时刻与所述发布时刻间的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得对应于所述目标资源的下载概率。可选地，所述装置400还包括：第二确定模块，用于确定当前登录的用户账户所对应的初始下载概率；第三确定模块，用于将所述初始下载概率，与得到的所述目标资源的下载概率的和值作为最终的下载概率；所述下载模块403包括：第一下载子模块，用于在所述最终的下载概率大于所述预设阈值时，下载所述目标资源。可选地，所述第二确定模块包括：第三获得子模块，用于在当前登录的用户账户的本次登录时刻，与上次登录时刻之间的时长不小于第二预设时长时，根据所述本次登录时刻与所述上次登录时刻之间的时长所属的预设时长区间获得初始下载概率；其中，所述本次登录时刻与所述上次登录时刻之间的时长，与所述初始下载概率成正比。可选地，所述装置还包括：第二获得模块，用于根据所述预设时刻和当前时刻之间的时长与第一预设时长的大小关系，及所述预设时刻与所述当前时刻的时长，占所述预设时刻与所述发布时刻间的时长的比值，获得所述目标资源的下载等级；所述下载模块403包括：第二下载子模块，用于在所述下载概率大于预设阈值时，按照与所述下载等级匹配的下载渠道，下载所述目标资源。可选地，所述第一获得模块402包括：第五获得子模块，用于每隔预设时间段，根据所述预设时刻与当前时刻之间的时长与第一预设时长的大小关系，获得对应于所述目标资源的下载概率；所述下载模块403包括：第三下载子模块，用于在得到所述目标资源的下载概率的时刻，若所述下载概率大于预设阈值，下载所述目标资源。可选地，所述下载模块403包括：第四下载子模块，用于获得新的随机数，在所述下载概率大于所述新的随机数时，下载所述目标资源。本申请还提供了一种电子设备，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行本申请上述实施例中任一所述的方法。本申请还提供了一种存储有计算机指令的非瞬时计算机可读存储介质，其中，所述计算机指令用于使所述计算机执行本申请上述实施例中任一所述的方法。本申请还提供了一种计算机程序产品，包括计算机程序，所述计算机程序在被处理器运行时执行本申请上述实施例中任一所述的方法。在上述实施例中，可以全部或部分地通过软件、硬件、固件或者其任意组合来实现。当使用软件实现时，可以全部或部分地以计算机程序产品的形式实现。所述计算机程序产品包括一个或多个计算机指令。在计算机上加载和执行所述计算机程序指令时，全部或部分地产生按照本申请实施例所述的流程或功能。所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。所述计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，所述计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线)或无线方式向另一个网站站点、计算机、服务器或数据中心进行传输。所述计算机可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集成的服务器、数据中心等数据存储设备。所述可用介质可以是磁性介质，、光介质、或者半导体介质)等。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本说明书中的各个实施例均采用相关的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于系统实施例而言，由于其基本相似于方法实施例，所以描述的比较简单，相关之处参见方法实施例的部分说明即可。以上所述仅为本申请的较佳实施例而已，并非用于限定本申请的保护范围。凡在本申请的精神和原则之内所作的任何修改、等同替换、改进等，均包含在本申请的保护范围内。
