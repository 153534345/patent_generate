标题title
设备升级方法、存储介质及电子装置
摘要abst
本申请公开了一种设备升级方法、存储介质及电子装置，涉及智慧家庭技术领域，该设备升级方法包括：在接收到第一接入网关节点发送的下线指令的情况下，向设备主网关发送入网地址分配请求，其中，第一接入网关节点与设备已建立网络通道；获取设备主网关响应入网地址分配请求所发送的目标地址，并根据目标地址接入第二接入网关节点，其中，目标地址用于指示网关状态为已升级的接入网关节点；在确定成功接入第二接入网关节点的情况下，根据下线指令关闭设备与第一接入网关节点之间的网络通道，从而完成对设备的升级，采用上述技术方案，解决了相关技术中，如何在设备正常使用的情况下，对设备进行升级的问题。
权利要求书clms
1.一种设备升级方法，其特征在于，包括：在接收到第一接入网关节点发送的下线指令的情况下，向设备主网关发送入网地址分配请求，其中，所述第一接入网关节点与设备已建立网络通道；获取所述设备主网关响应所述入网地址分配请求所发送的目标地址，并根据所述目标地址接入第二接入网关节点，其中，所述目标地址用于指示网关状态为已升级的接入网关节点；在确定成功接入所述第二接入网关节点的情况下，根据所述下线指令关闭所述设备与所述第一接入网关节点之间的网络通道，从而完成对所述设备的升级。2.根据权利要求1所述的设备升级方法，其特征在于，向设备主网关发送入网地址分配请求之前，所述方法还包括：确定所述第一接入网关节点接收到网关管理服务GMS发送的下线指示，其中，所述GMS在监测到所述第一接入网关节点的连接数量小于第一数量时，下发所述下线指示。3.根据权利要求1所述的设备升级方法，其特征在于，向设备主网关发送入网地址分配请求之前，所述方法还包括：在确定接入所述第一接入网关节点的所述设备具有执行任务的情况下，确定所述执行任务的执行进度；在所述执行进度为完成的情况下，通过以下方式之一向所述设备主网关发送入网地址分配请求：通过接入所述第一接入网关节点的所述设备向所述设备主网关发送请求；从接入所述第一接入网关节点的多个所述设备中确定出代理设备，通过所述代理设备向所述设备主网关发送请求。4.根据权利要求3所述的设备升级方法，其特征在于，所述方法还包括：接收所述设备主网关发送的多个目标地址，所述多个目标地址为所述设备主网关响应所述多个入网地址分配请求所发送的多个目标地址，所述多个目标地址中的每一目标地址与所述多个设备中的每一设备的设备地址一一对应；将所述多个目标地址分别发送给设备地址一一对应的设备。5.一种设备升级方法，其特征在于，包括：接收设备发送的入网地址分配请求，确定所述设备对应的第二接入网关节点；将所述第二接入网关节点对应的目标地址发送给所述设备，以指示所述设备根据所述目标地址接入所述第二接入网关节点，以及在确定成功接入所述第二接入网关节点的情况下，根据下线指令关闭所述设备与第一接入网关节点之间的网络通道，从而完成对所述设备的升级，其中，所述目标地址用于指示网关状态为已升级的接入网关节点的地址。6.根据权利要求5所述的设备升级方法，其特征在于，确定所述设备对应的第二接入网关节点，包括：从网关管理服务GMS内获取多个网关状态为已升级的第三接入网关节点；根据预设配置关系从所述第三接入网关节点中确定出与所述设备对应的第二接入网关节点，其中，所述预设配置关系表示所述网关管理服务GMS内与同一逻辑节点相连接的接入网关节点之间的对应关系，其中，与同一逻辑节点相连接的接入网关节点至少包括所述第一接入网关节点和所述第二接入网关节点。7.根据权利要求5所述的设备升级方法，其特征在于，将所述第二接入网关节点对应的目标地址发送给所述设备之前，包括：将所述第二接入网关节点支持接入的设备数量确定为第一预设阈值，以及确定发送所述入网地址分配请求的设备的第二数量；在所述设备的第二数量小于所述第一预设阈值的情况下，确定所述第二接入网关节点对应的目标地址；在所述设备的第二数量大于所述第一预设阈值的情况下，锁定所述第二接入网关节点，从其他网关状态为已升级的接入网关节点的目的地址中确定出所述第二接入网关节点对应的目标地址。8.根据权利要求7所述的设备升级方法，其特征在于，从其他网关状态为已升级的接入网关节点的目的地址中确定出所述第二接入网关节点对应的目标地址，包括：从所述其他网关状态为已升级的接入网关节点确定出第四接入网关节点，并将所述第四接入网关节点支持接入的设备数量确定为第二预设阈值；在所述设备的第二数量小于所述第二预设阈值的情况下，将所述第四接入网关节点对应的目标地址确定为所述第二接入网关节点对应的目标地址；或者，在所述设备的第二数量大于所述第一预设阈值的情况下，锁定所述第二接入网关节点，从所述其他网关状态为已升级的接入网关节点确定出第五接入网关节点，将所述第五接入网关节点支持接入的设备数量确定为第三预设阈值；在所述第二数量和所述第一预设阈值的差值小于所述第三预设阈值的情况下，将所述第二接入网关节点对应的目标地址发送给第二数量的所述设备，以及，将所述第五接入网关节点对应的目标地址确定为所述第二接入网关节点对应的目标地址。9.根据权利要求5所述的设备升级方法，其特征在于，将所述第二接入网关节点对应的目标地址发送给所述设备，包括：根据所述入网地址分配请求的接收时间确定向所述设备发送所述目标地址的发送序号，其中，最小的所述发送序号对应于最早的所述接收时间；将所述第二接入网关节点对应的目标地址按照所述发送序号发送给所述设备；其中，在确定所述设备的待处理指令数量大于第四预设阈值的情况下，将所述设备的发送序号调节为最小；或者，在确定所述设备的设备等级大于第五预设阈值的情况下，将所述设备的发送序号调节为最小；或者，在确定所述设备的设备地址的发送优先级高于第六预设阈值的情况下，将所述设备的发送序号调节为最小。10.根据权利要求5所述的设备升级方法，其特征在于，所述方法还包括：在确定成功接入所述第二接入网关节点的情况下，确定所述第二接入网关节点的网关服务是否运行正常；在确定所述网关服务运行异常的情况下，将所述目标设备对应的逻辑节点绑定的第二接入网关节点切换为所述第一接入网关节点。11.一种设备升级系统，其特征在于，包括：第一接入网关节点，用于向设备发送下线指令；所述设备，与所述第一接入网关节点连接，用于在接收到所述第一接入网关节点发送的下线指令的情况下，向设备主网关发送入网地址分配请求；所述设备主网关，与所述设备连接，用于接收所述设备发送的入网地址分配请求，确定所述设备对应的第二接入网关节点；将所述第二接入网关节点对应的目标地址发送给所述设备；其中，所述目标地址用于指示网关状态为已升级的接入网关节点；所述设备，还用于根据所述目标地址接入所述第二接入网关节点，并在确定成功接入所述第二接入网关节点的情况下，根据所述下线指令关闭所述设备与所述第一接入网关节点之间的网络通道。12.根据权利要求11所述的设备升级系统，其特征在于，所述系统还包括：网关管理服务GMS，用于向所述设备主网关提供多个网关状态为已升级的接入网关节点；控制所述第一接入网关节点向所述设备发送下线指令；以及通过将所述第一接入网关节点和所述第二接入网关节点连接至同一个逻辑节点得到所述第一接入网关节点与第二接入网关节点之间的对应关系，其中，所述逻辑节点与所述设备具有绑定关系；以及，获取所述设备在所述第一接入网关节点下的节点状态为占用。13.根据权利要求12所述的设备升级系统，其特征在于，所述GMS还用于，监控与所述第一接入网关节点连接的设备的连接数量；在确定所述连接数量小于第三数量的情况下，获取多个所述设备与所述第一接入网关节点之间的上行流量数值，如果确定所述上行流量数值小于预设数值，且，所述逻辑节点与所述第一接入网关节点解绑成功，则关闭所述第一接入网关节点的网络服务。14.一种计算机可读的存储介质，其特征在于，所述存储介质中存储有计算机程序，其中，所述计算机程序被设置为运行时执行所述权利要求1至10任一项中所述的方法。15.一种电子装置，包括存储器和处理器，其特征在于，所述存储器中存储有计算机程序，所述处理器被设置为运行所述计算机程序以执行所述权利要求1至10任一项中所述的方法。
说明书desc
技术领域本申请涉及智慧家庭技术领域，具体而言，涉及一种设备升级方法、存储介质及电子装置。背景技术目前，随着物联网时代的发展，智能设备提供的服务惠及千家万户，人们无时无刻不在享受着智能设备带来的便利，因此，人们需要能够时时刻刻的稳定运行的设备，但是相关技术中，物联平台的设备网关服务在升级更新时，云端需要先停止提供设备的设备网关服务，在升级更新后的新版本上线后，再重新启动网关服务。在云端停止提供设备网关服务的过程中，存在设备不能正常使用的问题，例如出现设备掉线，设备连云不稳定等，这种因平台服务升级时的重启操作引起设备不能正常使用的情况会存在业务中断的风险，影响用户正常使用设备，降低用户的体验感，甚至引起用户投诉，影响企业的声誉。因此，针对相关技术中，如何在设备正常使用的情况下，对设备进行升级的问题，尚未提出有效的解决方案。发明内容本申请实施例提供了一种设备升级方法、存储介质及电子装置，以至少解决相关技术中，如何在设备正常使用的情况下，对设备进行升级的问题。根据本申请实施例的一个实施例，提供了一种设备升级方法，包括：在接收到第一接入网关节点发送的下线指令的情况下，向设备主网关发送入网地址分配请求，其中，所述第一接入网关节点与设备已建立网络通道；获取所述设备主网关响应所述入网地址分配请求所发送的目标地址，并根据所述目标地址接入第二接入网关节点，其中，所述目标地址用于指示网关状态为已升级的接入网关节点；在确定成功接入所述第二接入网关节点的情况下，根据所述下线指令关闭所述设备与所述第一接入网关节点之间的网络通道，从而完成对所述设备的升级。在一个示例性实施例中，向设备主网关发送入网地址分配请求之前，所述方法还包括：确定所述第一接入网关节点接收到网关管理服务GMS发送的下线指示，其中，所述GMS在监测到所述第一接入网关节点的连接数量小于第一数量时，下发所述下线指示。在一个示例性实施例中，向设备主网关发送入网地址分配请求之前，所述方法还包括：在确定接入所述第一接入网关节点的所述设备具有执行任务的情况下，确定所述执行任务的执行进度；在所述执行进度为完成的情况下，通过以下方式之一向所述设备主网关发送入网地址分配请求：通过接入所述第一接入网关节点的所述设备向所述设备主网关发送请求；从接入所述第一接入网关节点的多个所述设备中确定出代理设备，通过所述代理设备向所述设备主网关发送请求。在一个示例性实施例中，所述方法还包括：接收所述设备主网关发送的多个目标地址，所述多个目标地址为所述设备主网关响应所述多个入网地址分配请求所发送的多个目标地址，所述多个目标地址中的每一目标地址与所述多个设备中的每一设备的设备地址一一对应；将所述多个目标地址分别发送给设备地址一一对应的设备。根据本申请实施例的另一个实施例，还提供了一种设备升级方法，包括：接收设备发送的入网地址分配请求，确定所述设备对应的第二接入网关节点；将所述第二接入网关节点对应的目标地址发送给所述设备，以指示所述设备根据所述目标地址接入所述第二接入网关节点，以及在确定成功接入所述第二接入网关节点的情况下，根据下线指令关闭所述设备与第一接入网关节点之间的网络通道，从而完成对所述设备的升级，其中，所述目标地址用于指示网关状态为已升级的接入网关节点的地址。在一个示例性实施例中，确定所述设备对应的第二接入网关节点，包括：从网关管理服务GMS内获取多个网关状态为已升级的第三接入网关节点；根据预设配置关系从所述第三接入网关节点中确定出与所述设备对应的第二接入网关节点，其中，所述预设配置关系表示所述网关管理服务GMS内与同一逻辑节点相连接的接入网关节点之间的对应关系，其中，与同一逻辑节点相连接的接入网关节点至少包括所述第一接入网关节点和所述第二接入网关节点。在一个示例性实施例中，将所述第二接入网关节点对应的目标地址发送给所述设备之前，包括：将所述第二接入网关节点支持接入的设备数量确定为第一预设阈值，以及确定发送所述入网地址分配请求的设备的第二数量；在所述设备的第二数量小于所述第一预设阈值的情况下，确定所述第二接入网关节点对应的目标地址；在所述设备的第二数量大于所述第一预设阈值的情况下，锁定所述第二接入网关节点，从其他网关状态为已升级的接入网关节点的目的地址中确定出所述第二接入网关节点对应的目标地址。在一个示例性实施例中，从其他网关状态为已升级的接入网关节点的目的地址中确定出所述第二接入网关节点对应的目标地址，包括：从所述其他网关状态为已升级的接入网关节点确定出第四接入网关节点，并将所述第四接入网关节点支持接入的设备数量确定为第二预设阈值；在所述设备的第二数量小于所述第二预设阈值的情况下，将所述第四接入网关节点对应的目标地址确定为所述第二接入网关节点对应的目标地址；或者，在所述设备的第二数量大于所述第一预设阈值的情况下，锁定所述第二接入网关节点，从所述其他网关状态为已升级的接入网关节点确定出第五接入网关节点，将所述第五接入网关节点支持接入的设备数量确定为第三预设阈值；在所述第二数量和所述第一预设阈值的差值小于所述第三预设阈值的情况下，将所述第二接入网关节点对应的目标地址发送给第二数量的所述设备，以及，将所述第五接入网关节点对应的目标地址确定为所述第二接入网关节点对应的目标地址。在一个示例性实施例中，将所述第二接入网关节点对应的目标地址发送给所述设备，包括：根据所述入网地址分配请求的接收时间确定向所述设备发送所述目标地址的发送序号，其中，最小的所述发送序号对应于最早的所述接收时间；将所述第二接入网关节点对应的目标地址按照所述发送序号发送给所述设备；其中，在确定所述设备的待处理指令数量大于第四预设阈值的情况下，将所述设备的发送序号调节为最小；或者，在确定所述设备的设备等级大于第五预设阈值的情况下，将所述设备的发送序号调节为最小；或者，在确定所述设备的设备地址的发送优先级高于第六预设阈值的情况下，将所述设备的发送序号调节为最小。在一个示例性实施例中，所述方法还包括：在确定成功接入所述第二接入网关节点的情况下，确定所述第二接入网关节点的网关服务是否运行正常；在确定所述网关服务运行异常的情况下，将所述目标设备对应的逻辑节点绑定的第二接入网关节点切换为所述第一接入网关节点。根据本申请实施例的另一个实施例，还提供了一种设备升级系统，包括：第一接入网关节点，用于向设备发送下线指令；所述设备，与所述第一接入网关节点连接，用于在接收到所述第一接入网关节点发送的下线指令的情况下，向设备主网关发送入网地址分配请求；所述设备主网关，与所述设备连接，用于接收所述设备发送的入网地址分配请求，确定所述设备对应的第二接入网关节点；将所述第二接入网关节点对应的目标地址发送给所述设备；其中，所述目标地址用于指示网关状态为已升级的接入网关节点；所述设备，还用于根据所述目标地址接入所述第二接入网关节点，并在确定成功接入所述第二接入网关节点的情况下，根据所述下线指令关闭所述设备与所述第一接入网关节点之间的网络通道。在一个示例性实施例中，所述系统还包括：网关管理服务GMS，用于向所述设备主网关提供多个网关状态为已升级的接入网关节点；控制所述第一接入网关节点向所述设备发送下线指令；以及通过将所述第一接入网关节点和所述第二接入网关节点连接至同一个逻辑节点得到所述第一接入网关节点与第二接入网关节点之间的对应关系，其中，所述逻辑节点与所述设备具有绑定关系；以及，获取所述设备在所述第一接入网关节点下的节点状态为占用。在一个示例性实施例中，所述GMS还用于，监控与所述第一接入网关节点连接的设备的连接数量；在确定所述连接数量小于第三数量的情况下，获取多个所述设备与所述第一接入网关节点之间的上行流量数值，如果确定所述上行流量数值小于预设数值，且，所述逻辑节点与所述第一接入网关节点解绑成功，则关闭所述第一接入网关节点的网络服务。根据本申请实施例的又一方面，还提供了一种计算机可读的存储介质，该计算机可读的存储介质中存储有计算机程序，其中，该计算机程序被设置为运行时执行上述设备升级方法。根据本申请实施例的又一方面，还提供了一种电子装置，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其中，上述处理器通过计算机程序执行上述的设备升级方法。在本申请实施例中，通过在接收到第一接入网关节点发送的下线指令的情况下，向设备主网关发送入网地址分配请求，其中，所述第一接入网关节点与设备已建立网络通道；获取所述设备主网关响应所述入网地址分配请求所发送的目标地址，并根据所述目标地址接入第二接入网关节点，其中，所述目标地址用于指示网关状态为已升级的接入网关节点；在确定成功接入所述第二接入网关节点的情况下，根据所述下线指令关闭所述设备与所述第一接入网关节点之间的网络通道，从而完成对所述设备的升级。采用上述技术方案，解决了相关技术中，如何在设备正常使用的情况下，对设备进行升级的问题，进而能够在设备正常使用的同时，对设备进行升级，提高了用户体验感。附图说明此处的附图被并入说明书中并构成本说明书的一部分，示出了符合本申请的实施例，并与说明书一起用于解释本申请的原理。为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，对于本领域普通技术人员而言，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1是本申请实施例的一种设备升级方法的硬件环境示意图；图2是根据本申请实施例的设备升级方法的流程图；图3是根据本申请实施例的设备升级方法的流程图；图4是根据本申请实施例的设备升级过程的示意图；图5是根据本申请实施例的设备升级过程的示意图；图6是根据本申请实施例的一种设备升级系统的结构示意图。具体实施方式为了使本技术领域的人员更好地理解本申请方案，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分的实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本申请保护的范围。需要说明的是，本申请的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本申请的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。根据本申请实施例的一个方面，提供了一种设备升级方法。该设备升级方法广泛应用于智慧家庭、智能家居、智能家用设备生态、智慧住宅生态等全屋智能数字化控制应用场景。可选地，在本实施例中，上述设备升级方法可以应用于如图1所示的由终端设备102和服务器104所构成的硬件环境中。如图1所示，服务器104通过网络与终端设备102进行连接，可用于为终端或终端上安装的客户端提供服务，可在服务器上或独立于服务器设置数据库，用于为服务器104提供数据存储服务，可在服务器上或独立于服务器配置云计算和/或边缘计算服务，用于为服务器104提供数据运算服务。上述网络可以包括但不限于以下至少之一：有线网络，无线网络。上述有线网络可以包括但不限于以下至少之一：广域网，城域网，局域网，上述无线网络可以包括但不限于以下至少之一：WIFI，蓝牙。终端设备102可以并不限定于为PC、手机、平板电脑、智能空调、智能烟机、智能冰箱、智能烤箱、智能炉灶、智能洗衣机、智能热水器、智能洗涤设备、智能洗碗机、智能投影设备、智能电视、智能晾衣架、智能窗帘、智能影音、智能插座、智能音响、智能音箱、智能新风设备、智能厨卫设备、智能卫浴设备、智能扫地机器人、智能擦窗机器人、智能拖地机器人、智能空气净化设备、智能蒸箱、智能微波炉、智能厨宝、智能净化器、智能饮水机、智能门锁等。在本实施例中提供了一种以设备为执行主体的设备升级方法，应用于上述计算机终端，图2是根据本申请实施例的设备升级方法的流程图，该流程包括如下步骤：步骤S202：在接收到第一接入网关节点发送的下线指令的情况下，向设备主网关发送入网地址分配请求，其中，所述第一接入网关节点与设备已建立网络通道；步骤S204：获取所述设备主网关响应所述入网地址分配请求所发送的目标地址，并根据所述目标地址接入第二接入网关节点，其中，所述目标地址用于指示网关状态为已升级的接入网关节点；步骤S206：在确定成功接入所述第二接入网关节点的情况下，根据所述下线指令关闭所述设备与所述第一接入网关节点之间的网络通道，从而完成对所述设备的升级。通过上述步骤，通过在接收到第一接入网关节点发送的下线指令的情况下，向设备主网关发送入网地址分配请求，其中，所述第一接入网关节点与设备已建立网络通道；获取所述设备主网关响应所述入网地址分配请求所发送的目标地址，并根据所述目标地址接入第二接入网关节点，其中，所述目标地址用于指示网关状态为已升级的接入网关节点；在确定成功接入所述第二接入网关节点的情况下，根据所述下线指令关闭所述设备与所述第一接入网关节点之间的网络通道，从而完成对所述设备的升级，解决了相关技术中，如何在设备正常使用的情况下，对设备进行升级的问题，进而能够在设备正常使用的同时，对设备进行升级，提高了用户体验感。其中，需要说明的是，网关状态为已升级的接入网关节点可以是预先设置的已升级的网关节点，也可以是在根据下线指令关闭设备与第一接入网关节点之间的网络通道之后，将已经关闭与设备之间的网络通道的第一接入网关节点进行设备网关服务升级后得到的网关节点。在一个示例性实施例中，还可以在向设备主网关发送入网地址分配请求之前，确定所述第一接入网关节点接收到网关管理服务GMS发送的下线指示，其中，所述GMS在监测到所述第一接入网关节点的连接数量小于第一数量时，下发所述下线指示。在一个示例性实施例中，还提供了一种向设备主网关发送入网地址分配请求之前的技术方案，具体的：可以在确定接入所述第一接入网关节点的所述设备具有执行任务的情况下，确定所述执行任务的执行进度；在所述执行进度为完成的情况下，通过以下方式之一向所述设备主网关发送入网地址分配请求：通过接入所述第一接入网关节点的所述设备向所述设备主网关发送请求；从接入所述第一接入网关节点的多个所述设备中确定出代理设备，通过所述代理设备向所述设备主网关发送请求。在一个实施例中，在确定存在所述执行进度为未完成，且为执行中的执行任务的情况下，继续执行未完成且为执行中的的任务，直至确定接入所述第一接入网关节点的所述设备的执行任务的执行进度由未完成，且为执行中更新为完成。在一个实施例中，在确定存在所述执行进度为未完成，且为待执行的执行任务的情况下，暂停处理所有执行进度为未完成，且为待执行的任务，并将所有执行进度为未完成，且为待执行的任务为待执行任务清单，在确定设备成功接入所述第二接入网关节点后，继续执行待执行任务清单的执行任务。在一个示例性实施例中，所述方法还包括：接收所述设备主网关发送的多个目标地址，所述多个目标地址为所述设备主网关响应所述多个入网地址分配请求所发送的多个目标地址，所述多个目标地址中的每一目标地址与所述多个设备中的每一设备的设备地址一一对应；将所述多个目标地址分别发送给设备地址一一对应的设备。在本实施例中还提供了一种以设备主网关为执行主体的设备升级方法，如图3所示，图3是根据本申请实施例的设备升级方法的流程图，该流程包括如下步骤：步骤S302：接收设备发送的入网地址分配请求，确定所述设备对应的第二接入网关节点；步骤S304：将所述第二接入网关节点对应的目标地址发送给所述设备，以指示所述设备根据所述目标地址接入所述第二接入网关节点，以及在确定成功接入所述第二接入网关节点的情况下，根据下线指令关闭所述设备与第一接入网关节点之间的网络通道，从而完成对所述设备的升级，其中，所述目标地址用于指示网关状态为已升级的接入网关节点的地址。通过上述步骤，通过接收设备发送的入网地址分配请求，确定所述设备对应的第二接入网关节点；将所述第二接入网关节点对应的目标地址发送给所述设备，以指示所述设备根据所述目标地址接入所述第二接入网关节点，以及在确定成功接入所述第二接入网关节点的情况下，根据下线指令关闭所述设备与第一接入网关节点之间的网络通道，从而完成对所述设备的升级，其中，所述目标地址用于指示网关状态为已升级的接入网关节点的地址，解决了相关技术中，如何在设备正常使用的情况下，对设备进行升级的问题，进而能够在设备正常使用的同时，对设备进行升级，提高了用户体验感，以及提高了提供设备网关服务的连贯性。在一个示例性实施例中，确定所述设备对应的第二接入网关节点，包括：从网关管理服务GMS内获取多个网关状态为已升级的第三接入网关节点；根据预设配置关系从所述第三接入网关节点中确定出与所述设备对应的第二接入网关节点，其中，所述预设配置关系表示所述网关管理服务GMS内与同一逻辑节点相连接的接入网关节点之间的对应关系，其中，与同一逻辑节点相连接的接入网关节点至少包括所述第一接入网关节点和所述第二接入网关节点。在一个示例性实施例中，将所述第二接入网关节点对应的目标地址发送给所述设备之前，包括：将所述第二接入网关节点支持接入的设备数量确定为第一预设阈值，以及确定发送所述入网地址分配请求的设备的第二数量；在所述设备的第二数量小于所述第一预设阈值的情况下，确定所述第二接入网关节点对应的目标地址；在所述设备的第二数量大于所述第一预设阈值的情况下，锁定所述第二接入网关节点，从其他网关状态为已升级的接入网关节点的目的地址中确定出所述第二接入网关节点对应的目标地址。例如，所述第二接入网关节点支持接入的设备数量为10，发送所述入网地址分配请求的设备的第二数量为5，可以确定当下的发送所述入网地址分配请求的设备的数量在第二接入网关节点的可承受范围内，所以，直接将所述第二接入网关节点对应的目标地址发送给所述设备。如果确定发送所述入网地址分配请求的设备的第二数量为20，则当下的发送所述入网地址分配请求的设备的数量超出了第二接入网关节点的可承受范围，那么需要锁定所述第二接入网关节点，从其他网关状态为已升级的接入网关节点中选择出可以承担当下的发送所述入网地址分配请求的设备的数量的接入网关节点的目的地址中确定为所述第二接入网关节点对应的目标地址。在一个示例性实施例中，从其他网关状态为已升级的接入网关节点的目的地址中确定出所述第二接入网关节点对应的目标地址，包括：从所述其他网关状态为已升级的接入网关节点确定出第四接入网关节点，并将所述第四接入网关节点支持接入的设备数量确定为第二预设阈值；在所述设备的第二数量小于所述第二预设阈值的情况下，将所述第四接入网关节点对应的目标地址确定为所述第二接入网关节点对应的目标地址；或者，在所述设备的第二数量大于所述第一预设阈值的情况下，锁定所述第二接入网关节点，从所述其他网关状态为已升级的接入网关节点确定出第五接入网关节点，将所述第五接入网关节点支持接入的设备数量确定为第三预设阈值；在所述第二数量和所述第一预设阈值的差值小于所述第三预设阈值的情况下，将所述第二接入网关节点对应的目标地址发送给第二数量的所述设备，以及，将所述第五接入网关节点对应的目标地址确定为所述第二接入网关节点对应的目标地址。例如，所述第二接入网关节点支持接入的设备数量为10，发送所述入网地址分配请求的设备的第二数量为20，所述第四接入网关节点支持接入的设备数量为40，可以将所述第四接入网关节点对应的目标地址确定为所述第二接入网关节点对应的目标地址。如果所述第四接入网关节点支持接入的设备数量为15，确定出所述第五接入网关节点支持接入的设备数量为20，则将所述第二接入网关节点对应的目标地址发送给第二数量的所述设备，以及，将所述第五接入网关节点对应的目标地址确定为所述第二接入网关节点对应的目标地址。在一个示例性实施例中，将所述第二接入网关节点对应的目标地址发送给所述设备，包括：根据所述入网地址分配请求的接收时间确定向所述设备发送所述目标地址的发送序号，其中，最小的所述发送序号对应于最早的所述接收时间；将所述第二接入网关节点对应的目标地址按照所述发送序号发送给所述设备；其中，在确定所述设备的待处理指令数量大于第四预设阈值的情况下，将所述设备的发送序号调节为最小；或者，在确定所述设备的设备等级大于第五预设阈值的情况下，将所述设备的发送序号调节为最小；或者，在确定所述设备的设备地址的发送优先级高于第六预设阈值的情况下，将所述设备的发送序号调节为最小。在一个示例性实施例中，所述方法还包括：在确定成功接入所述第二接入网关节点的情况下，确定所述第二接入网关节点的网关服务是否运行正常；在确定所述网关服务运行异常的情况下，将所述目标设备对应的逻辑节点绑定的第二接入网关节点切换为所述第一接入网关节点。通过本实施例，可以监控升级后的设备网关服务的运行是否正常，若不正常可以紧急回退升级前的设备网关服务，能够保障设备网关服务的可用性。为了更好的理解上述设备升级方法的过程，以下再结合可选实施例对上述设备升级的实现方法流程进行说明，但不用于限定本申请实施例的技术方案。在本实施例中提供了一种设备升级方法，在对设备进行升级之前，需要以下准备工作：1)确定设备能够正常接收、处理云端下发的下线指令，能够主动向设备主网关发送入网地址分配请求，根据设备主网关响应所述入网地址分配请求所发送的目标地址接入第二接入网关节点，以及所述下线指令关闭所述设备与所述第一接入网关节点之间的网络通道，即断开与第一接入网关节点之间的网络连接。2)如图4所示，图4是根据本申请实施例的设备升级方法的示意图，在GMS数据库中提前配置好网关逻辑节点与网关物理节点之间的对应关系，即图4中具有一对一对应关系的物理节点表与逻辑节点表：①网关逻辑节点，是一个虚拟的业务层概念，通过一个虚拟节点，使得业务处理更加灵活。②网关物理节点，即是实际运行的网关进程。可以包括图4中的新物理节点、旧物理节点。3)提前准备一台服务器作为流转服务器，在流转服务器上配置有已升级的接入网关节点。通过上述准备工作可以解决设备同时接入第一接入网关节点、第二接入网关节点，但是两者的目的地址不一样，会导致设备的一致性hash值分配变化的问题。还可以实现逐个网关服务节点进行“替换”，即替换完一台服务器上的所有网关服务节点后，将空出来的服务器继续作为流转服务器，依次逐个服务器进行操作，直到所有服务器更新完成。图5是根据本申请实施例的设备升级方法的示意图，如图5所示，具体如下步骤：步骤S1，通过GMS部署新的接入网关节点：A1、在流转服务器上部署新版本的设备接入网关服务。A2、将新的接入网关节点关联更新到网关逻辑节点。A3、GMS调整旧的设备接入网关的接入策略，进行下线处理。步骤S2，通过旧的设备接入网关向设备发送下线通知：B1、旧的设备接入网关停止接收新的设备连接；B2、旧的设备接入网关采用主动发送通知的方式，通知设备该网关要进行下线处理。步骤S3，通过设备处理下线通知：C1、设备接收到下线通知后，处理完成正在进行的指令；C2、请求设备主网关获取新的接入网关节点的地址；C3、启用新的网关节点的地址连接，连接上线；C4、断开旧的设备接入网关的地址连接。步骤S4，通过GMS关闭旧的设备接入网关的设备网关服务：D1、GMS监控旧的设备接入网关的设备连接数，当监控到所有的设备已下线且不再有新的流量进入时，停止并关闭旧的设备接入网关的网关服务。通过上述步骤，利用这种新旧物理服务节点“替代”升级方案，在设备网关服务发版升级过程中，实现了设备至少有一条有效且可用的连接通道，设备在此期间正常运行的目的，提升了用户的使用体验。在一个实施例中，可以准备二台或多台物理节点维护更新逻辑节点，并行升级，从而提高升级时效。在一个实施例中，在用于新版本网关服务的灰度发布升级的情况下，可以只对一个逻辑节点对应的物理节点进行升级，减少升级带来的服务异常风险。在一个实施例中，在设备接入新的接入网关节点完成升级后，可以通过GMS监测新的接入网关节点的设备网关服务是否正常，若不正常可以紧急回退旧的接入网关节点的设备网关服务。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到根据上述实施例的方法可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件，但很多情况下前者是更佳的实施方式。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台终端设备执行本申请各个实施例的方法。图6是根据本申请实施例的一种设备升级系统的结构示意图。如图6所示，包括：第一接入网关节点602，用于向设备发送下线指令；所述设备604，与所述第一接入网关节点连接，用于在接收到所述第一接入网关节点发送的下线指令的情况下，向设备主网关发送入网地址分配请求；所述设备主网关606，与所述设备连接，用于接收所述设备发送的入网地址分配请求，确定所述设备对应的第二接入网关节点608；将所述第二接入网关节点对应的目标地址发送给所述设备；其中，所述目标地址用于指示网关状态为已升级的接入网关节点；所述设备，还用于根据所述目标地址接入所述第二接入网关节点，并在确定成功接入所述第二接入网关节点的情况下，根据所述下线指令关闭所述设备与所述第一接入网关节点之间的网络通道。通过上述系统，在接收到所述第一接入网关节点发送的下线指令的情况下，通过设备向设备主网关发送入网地址分配请求，设备主网关接收所述设备发送的入网地址分配请求，确定所述设备对应的第二接入网关节点；将所述第二接入网关节点对应的目标地址发送给所述设备，上述设备根据目标地址接入所述第二接入网关节点，并在确定成功接入所述第二接入网关节点的情况下，根据所述下线指令关闭所述设备与所述第一接入网关节点之间的网络通道，解决了相关技术中，如何在设备正常使用的情况下，对设备进行升级的问题，进而能够在设备正常使用的同时，对设备进行升级，提高了用户体验感。在一个示例性实施例中，所述系统还包括：网关管理服务GMS，用于向所述设备主网关提供多个网关状态为已升级的接入网关节点；控制所述第一接入网关节点向所述设备发送下线指令；以及通过将所述第一接入网关节点和所述第二接入网关节点连接至同一个逻辑节点得到所述第一接入网关节点与第二接入网关节点之间的对应关系，其中，所述逻辑节点与所述设备具有绑定关系；以及，获取所述设备在所述第一接入网关节点下的节点状态为占用。在一个示例性实施例中，所述GMS还用于，监控与所述第一接入网关节点连接的设备的连接数量；在确定所述连接数量小于第三数量的情况下，获取多个所述设备与所述第一接入网关节点之间的上行流量数值，如果确定所述上行流量数值小于预设数值，且，所述逻辑节点与所述第一接入网关节点解绑成功，则关闭所述第一接入网关节点的网络服务。本申请的实施例还提供了一种存储介质，该存储介质包括存储的程序，其中，上述程序运行时执行上述任一项的方法。可选地，在本实施例中，上述存储介质可以被设置为存储用于执行以下步骤的程序代码：S1，在接收到第一接入网关节点发送的下线指令的情况下，向设备主网关发送入网地址分配请求，其中，所述第一接入网关节点与设备已建立网络通道；S2，获取所述设备主网关响应所述入网地址分配请求所发送的目标地址，并根据所述目标地址接入第二接入网关节点，其中，所述目标地址用于指示网关状态为已升级的接入网关节点；S3，在确定成功接入所述第二接入网关节点的情况下，根据所述下线指令关闭所述设备与所述第一接入网关节点之间的网络通道，从而完成对所述设备的升级。可选地，在其他本实施例中，上述存储介质还可以被设置为存储用于执行以下步骤的程序代码：S1，接收设备发送的入网地址分配请求，确定所述设备对应的第二接入网关节点；S2，将所述第二接入网关节点对应的目标地址发送给所述设备，以指示所述设备根据所述目标地址接入所述第二接入网关节点，以及在确定成功接入所述第二接入网关节点的情况下，根据下线指令关闭所述设备与第一接入网关节点之间的网络通道，从而完成对所述设备的升级，其中，所述目标地址用于指示网关状态为已升级的接入网关节点的地址。本申请的实施例还提供了一种电子装置，包括存储器和处理器，该存储器中存储有计算机程序，该处理器被设置为运行计算机程序以执行上述任一项方法实施例中的步骤。可选地，上述电子装置还可以包括传输设备以及输入输出设备，其中，该传输设备和上述处理器连接，该输入输出设备和上述处理器连接。可选地，在本实施例中，上述处理器可以被设置为通过计算机程序执行以下步骤：S1，在接收到第一接入网关节点发送的下线指令的情况下，向设备主网关发送入网地址分配请求，其中，所述第一接入网关节点与设备已建立网络通道；S2，获取所述设备主网关响应所述入网地址分配请求所发送的目标地址，并根据所述目标地址接入第二接入网关节点，其中，所述目标地址用于指示网关状态为已升级的接入网关节点；S3，在确定成功接入所述第二接入网关节点的情况下，根据所述下线指令关闭所述设备与所述第一接入网关节点之间的网络通道，从而完成对所述设备的升级。可选地，在其他实施例中，上述处理器还可以被设置为通过计算机程序执行以下步骤：S1，接收设备发送的入网地址分配请求，确定所述设备对应的第二接入网关节点；S2，将所述第二接入网关节点对应的目标地址发送给所述设备，以指示所述设备根据所述目标地址接入所述第二接入网关节点，以及在确定成功接入所述第二接入网关节点的情况下，根据下线指令关闭所述设备与第一接入网关节点之间的网络通道，从而完成对所述设备的升级，其中，所述目标地址用于指示网关状态为已升级的接入网关节点的地址。可选地，在本实施例中，上述存储介质可以包括但不限于：U盘、只读存储器、随机存取存储器、移动硬盘、磁碟或者光盘等各种可以存储程序代码的介质。可选地，本实施例中的具体示例可以参考上述实施例及可选实施方式中所描述的示例，本实施例在此不再赘述。显然，本领域的技术人员应该明白，上述的本申请的各模块或各步骤可以用通用的计算装置来实现，它们可以集中在单个的计算装置上，或者分布在多个计算装置所组成的网络上，可选地，它们可以用计算装置可执行的程序代码来实现，从而，可以将它们存储在存储装置中由计算装置来执行，并且在某些情况下，可以以不同于此处的顺序执行所示出或描述的步骤，或者将它们分别制作成各个集成电路模块，或者将它们中的多个模块或步骤制作成单个集成电路模块来实现。这样，本申请不限制于任何特定的硬件和软件结合。以上所述仅是本申请的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本申请原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本申请的保护范围。
