标题title
一种短消息队列调度方法、装置及可读存储介质
摘要abst
本发明公开一种短消息队列调度方法、装置及可读存储介质，属于通信技术领域，特别涉及一种短消息队列调度方法，包括：在各通道内，设置与短消息类型对应的短消息队列，并对各短消息队列分别设置若干个子队列；接收短消息，对短消息接收过程进行建模，并对接收到的短消息进行分类；将根据短消息所属的类型转入对应的短消息队列中，计算短消息在各子队列中的待发特征值，选取待发特征值最大的子队列作为发送队列。本发明提供一种差异化短消息驱动下的短消息队列调度方法，通过对客户短消息进行分类，设计多层级短消息通道队列结构，并设计抢占优先级服务的排队规则，保障各类短消息的用户服务质量，提升用户使用体验。
权利要求书clms
1.一种短消息队列调度方法，其特征在于，包括：在各通道内，设置与短消息类型对应的短消息队列，并对各短消息队列分别设置若干个子队列；接收短消息，对短消息接收过程进行建模，并对接收到的短消息进行分类；将根据短消息所属的类型转入对应的短消息队列中，计算短消息在各子队列中的待发特征值，选取待发特征值最大的子队列作为发送队列。2.如权利要求1所述的方法，其特征在于，所述在各通道内，设置与短消息类型对应的短消息队列，并对各短消息队列分别设置若干个子队列，包括：在各通道内设置接口类短消息队列、通知类短消息队列、营销类短消息队列和其他类短消息队列，并对接口类短消息队列、通知类短消息队列、营销类短消息队列和其他类短消息队列分别设置若干个子队列。3.如权利要求1所述的方法，其特征在于，所述接收短消息，对短消息接收过程进行建模，并对接收到的短消息进行分类，包括：对接收到的短消息按照接口类、通知类、营销类以及其他类进行划分，将短消息到达过程建模，连续两个客户发送的短消息的概率分布服从泊松分布，当多个客户发送的短消息同时批量到达时，批量到达的短消息的概率分布服从泊松分布；通道为客户提供一对一的短消息发送服务和/或提供批量短消息发送服务。4.如权利要求3所述的方法，其特征在于，所述短消息的概率分布服从泊松分布，包括：客户请求的短消息达到过程服从泊松分布，即t时间内客户k的j类型短消息请求量的平均到达率为，其中平均到达率为单位时间内平均到达的短消息请求量；通道在接收短消息的服务过程中，通道时间服从参数为的负指数分布，其期望值为1/，其中表示单位时间内能服务完的客户短消息量；，为刻画服务效率与通道利用率的重要标志，即服务强度。5.如权利要求1所述的方法，其特征在于，所述将根据短消息所属的类型转入对应的短消息队列中，包括：将接口类短消息转入接口类短消息队列中，等待发送；将通知类短消息转入通知类短消息队列中，等待发送；将营销类短消息转入营销类短消息队列中，等待发送；将其他类短消息转入其他类短消息队列中，等待发送。6.如权利要求4所述的方法，其特征在于，所述计算短消息在各子队列中的待发特征值，包括：计算客户k请求的短消息在子队列j-i中的待发特征值，其中，为客户k的服务等级，为客户k的j类型短消息的时延需求，是子队列j-i的负载均衡系数，具体为子队列j-i占用的短信量/队列容量，为反映通道状态相关的参数。7.如权利要求1所述的方法，其特征在于，所述通道的排队规则严格遵循抢占优先级服务方式，即使优先级较低的客户短消息已经在接受通道的短信发送服务，优先级高的客户在短消息到达时立即接受通道发送服务，中断通道对低优先级客户短消息的发送服务，只有在高优先级客户请求消息接受完通道发送服务后，低优先级客户请求短消息才能继续接受通道服务。8.一种短消息队列调度装置，其特征在于，包括：队列设置模块，用于在各通道内，设置与短消息类型对应的短消息队列，并对各短消息队列分别设置若干个子队列；消息处理模块，用于接收短消息，对短消息接收过程进行建模，并对接收到的短消息进行分类；消息调度模块，用于将根据短消息所属的类型转入对应的短消息队列中，计算短消息在各子队列中的待发特征值，选取待发特征值最大的子队列作为发送队列。9.一种计算机设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现权利要求1-7任一项所述方法的步骤。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有程序，所述程序被执行时，能够实现如权利要求1-7任一项所述的方法。
说明书desc
技术领域本发明属于通信技术领域，特别涉及一种短消息队列调度方法、装置及可读存储介质。背景技术随着云消息服务商业务的激增，日均短消息处理能力将突破数亿级数量级、客户请求的毫秒级日峰值将超过千万条量级、客户短消息类型也呈现差异化发展趋势。本发明人经研究发现，现有技术中，在消息队列中设置统一的排队规则，不考虑差异化类型短消息的特定需求，极易引发消息队列时延过长、通道资源利用率低下、消息发送速度降低、客户投诉率升高等问题。特别是随着客户短消息体量的激增，上述问题造成的经济损失将日益凸显，严重影响短消息用户的使用体验。发明内容为了至少解决上述技术问题，本发明提供了一种短消息队列调度方法、装置及可读存储介质。根据本发明第一方面，提供了一种短消息队列调度方法，包括：在各通道内，设置与短消息类型对应的短消息队列，并对各短消息队列分别设置若干个子队列；接收短消息，对短消息接收过程进行建模，并对接收到的短消息进行分类；将根据短消息所属的类型转入对应的短消息队列中，计算短消息在各子队列中的待发特征值，选取待发特征值最大的子队列作为发送队列。进一步地，所述在各通道内，设置与短消息类型对应的短消息队列，并对各短消息队列分别设置若干个子队列，包括：在各通道内设置接口类短消息队列、通知类短消息队列、营销类短消息队列和其他类短消息队列，并对接口类短消息队列、通知类短消息队列、营销类短消息队列和其他类短消息队列分别设置若干个子队列。进一步地，所述接收短消息，对短消息接收过程进行建模，并对接收到的短消息进行分类，包括：对接收到的短消息按照接口类、通知类、营销类以及其他类进行划分，将短消息到达过程建模，连续两个客户发送的短消息的概率分布服从泊松分布，当多个客户发送的短消息同时批量到达时，批量到达的短消息的概率分布服从泊松分布；通道为客户提供一对一的短消息发送服务和/或提供批量短消息发送服务。进一步地，所述短消息的概率分布服从泊松分布，包括：客户请求的短消息达到过程服从泊松分布，即t时间内客户k的j类型短消息请求量为的平均到达率为，其中平均到达率为单位时间内平均到达的短消息请求量；通道在接收短消息的服务过程中，通道时间服从参数为的负指数分布，其期望值为1/，其中表示单位时间内能服务完的客户短消息量。，为刻画服务效率与通道利用率的重要标志，即服务强度。进一步地，所述将根据短消息所属的类型转入对应的短消息队列中，包括：将接口类短消息转入接口类短消息队列中，等待发送；将通知类短消息转入通知类短消息队列中，等待发送；将营销类短消息转入营销类短消息队列中，等待发送；将其他类短消息转入其他类短消息队列中，等待发送。进一步地，所述计算短消息在各子队列中的待发特征值，包括：计算客户k请求的短消息在子队列j-i中的待发特征值，其中，为客户k的服务等级，为客户k的j类型短消息的时延需求，是子队列j-i的负载均衡系数，具体为子队列j-i占用的短信量/队列容量，为反映通道状态相关的参数。进一步地，所述通道的排队规则严格遵循抢占优先级服务方式，即使优先级较低的客户短消息已经在接受通道的短信发送服务，优先级高的客户在短消息到达时立即接受通道发送服务，中断通道对该低优先级客户短消息的发送服务，只有在高优先级客户请求消息接受完通道发送服务后，该低优先级客户请求短消息才能继续接受通道服务。本发明第二方面，一种短消息队列调度装置，包括：队列设置模块，用于在各通道内，设置与短消息类型对应的短消息队列，并对各短消息队列分别设置若干个子队列；消息处理模块，用于接收短消息，对短消息接收过程进行建模，并对接收到的短消息进行分类；消息调度模块，用于将根据短消息所属的类型转入对应的短消息队列中，计算短消息在各子队列中的待发特征值，选取待发特征值最大的子队列作为发送队列。本发明第三方面，一种计算机设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现如本发明第一方面中任一项所述方法的步骤。本发明第四方面，一种计算机可读存储介质，所述计算机可读存储介质存储有程序，所述程序被执行时，能够实现如本发明第一方面中任一项所述的方法。本发明的有益效果：本发明提供一种差异化短消息驱动下的短消息队列调度方法，通过对客户短消息进行分类，设计多层级短消息通道队列结构，并设计抢占优先级服务的排队规则，保障各类短消息的用户服务质量，提升用户使用体验。附图说明本发明上述的和 / 或附加的方面和优点从下面结合附图对实施例的描述中将变得明显和容易理解，其中，图1为本发明提供的一种短消息队列调度方法流程图；图2为本发明提供的一种短消息通道队列结构示意图。具体实施方式下面详细描述本发明的实施例，所述实施例的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施例是示例性的，仅用于解释本发明，而不能解释为对本发明的限制。为了更清楚地说明本发明，下面结合优选实施例和附图对本发明做进一步的说明。附图中相似的部件以相同的附图标记进行表示。本领域技术人员应当理解，下面所具体描述的内容是说明性的而非限制性的，不应以此限制本发明的保护范围。在本发明的第一方面，提供一种短消息队列调度方法，如图1所示，包括：步骤101：在各通道内，设置与短消息类型对应的短消息队列，并对各短消息队列分别设置若干个子队列；在本发明中，具体可以在各通道内设置接口类短消息队列、通知类短消息队列、营销类短消息队列和其他类短消息队列，并对各短消息队列分别设置若干个子队列；进一步地，在各个通道内皆设置四个队列，分别是接口类短消息队列、通知类短消息队列、营销类短消息队列和其他类短消息队列，并且分别四个队列设置若干个子队列。本发明通过在通道内设置四个队列以分别处理四个类型的短消息，实现差异化短消息驱动下的短消息队列调度，能够有效提高工作效率，降低短消息积压，保障短消息的时效性。步骤102：接收短消息，对短消息接收过程进行建模，并对接收到的短消息进行分类；本发明中，对接收到的短消息按照接口类、通知类、营销类以及其他类进行划分，具体的，可以将具有严格的时效性需求，对通道响应时间要求较高的触发类短消息划分为接口类，接口类的短消息大多以单条发送。将政企公告、市政调查、平台停服维护通知等短消息划分为通知类，通知类的短消息既可以单发，也可以群发。将具有营销推广色彩的短消息，例如：电商平台节日促销、商场折扣活动促销等消息划分为营销类。将除接口类、通知类、营销类以外，其他的短消息划分为其他类。将客户请求的短消息到达过程建模，连续两个客户发送的短消息的时间间隔服从泊松分布，当多个客户发送的短消息同时批量到达时，批量到达的短消息的概率分布服从泊松分布。通道的服务过程模型简述为，一个通道可以为客户提供一对一的短消息发送服务，也可以提供批量短消息发送服务。进一步地，客户请求的短消息达到过程服从泊松分布，即t时间内客户k的j类型短消息请求量为的平均到达率为，其中平均到达率为单位时间内平均到达的短消息请求量。通道在接收短消息的服务过程中，通道时间服从参数为的负指数分布，其期望值为1/，其中表示单位时间内能服务完的客户短消息量。，为刻画服务效率与通道利用率的重要标志，即服务强度。步骤103：将根据短消息所属的类型转入对应的短消息队列中，计算短消息在各子队列中的待发特征值，选取待发特征值最大的子队列作为发送队列。在本发明中，将接口类短消息转入接口类短消息队列中，等待发送；将通知类短消息转入通知类短消息队列中，等待发送；将营销类短消息转入营销类短消息队列中，等待发送；将其他类短消息转入其他类短消息队列中，等待发送。短消息通道队列结构如图2所示，每个通道除了对应四个队列外，每种类型短消息队列又对应n个子队列，具体的，接口类短消息队列、通知类短消息队列、营销类短消息队列和其他类短消息队列队，分别对应子队列1-i，子队列2-i，子队列3-i，子队列4-i。将短消息转入对应的短消息队列后，计算客户k请求的短消息在子队列j-i中的待发特征值，其中，为客户k的服务等级，为客户k的j类型短消息的时延需求，是子队列j-i的负载均衡系数，具体为子队列j-i占用的短信量/队列容量，为反映通道状态相关的参数。选取待发特征值最大的子队列作为发送队列以优先获取通道资源。另外，通道的排队规则严格遵循抢占优先级服务方式，该服务方式下，即使优先级较低的客户短消息已经在接受通道的短信发送服务，也允许优先级较高的客户在到达时立即接受通道发送服务，中断通道对该低优先级客户短消息的发送服务，只有在高优先级客户请求消息接受完通道发送服务后，该低优先级客户请求短消息才能继续接受通道服务。根据本发明第二方面，提供一种短消息队列调度装置，包括：队列设置模块，用于在各通道内，设置与短消息类型对应的短消息队列，并对各短消息队列分别设置若干个子队列；在本发明中，队列设置模块，具体用于在各通道内设置接口类短消息队列、通知类短消息队列、营销类短消息队列和其他类短消息队列，并对各短消息队列分别设置若干个子队列；进一步地，队列设置模块在各个通道内皆设置四个队列，分别是接口类短消息队列、通知类短消息队列、营销类短消息队列和其他类短消息队列，并且分别四个队列设置若干个子队列。本发明通过在通道内设置四个队列以分别处理四个类型的短消息，实现差异化短消息驱动下的短消息队列调度，能够有效提高工作效率，降低短消息积压，保障短消息的时效性。消息处理模块，用于接收短消息，对短消息接收过程进行建模，并对接收到的短消息进行分类；本发明中，消息处理模块，具体用于对接收到的短消息按照接口类、通知类、营销类以及其他类进行划分，进一步地，可以将具有严格的时效性需求，对通道响应时间要求较高的触发类短消息划分为接口类，接口类的短消息大多以单条发送。将政企公告、市政调查、平台停服维护通知等短消息划分为通知类，通知类的短消息既可以单发，也可以群发。将具有营销推广色彩的短消息，例如：电商平台节日促销、商场折扣活动促销等消息划分为营销类。将除接口类、通知类、营销类以外，其他的短消息划分为其他类。将客户请求的短消息到达过程建模，连续两个客户发送的短消息的时间间隔服从泊松分布，当多个客户发送的短消息同时批量到达时，批量到达的短消息的概率分布服从泊松分布。通道的服务过程模型简述为，一个通道可以为客户提供一对一的短消息发送服务，也可以提供批量短消息发送服务。进一步地，客户请求的短消息达到过程服从泊松分布，即t时间内客户k的j类型短消息请求量为的平均到达率为，其中平均到达率为单位时间内平均到达的短消息请求量。通道在接收短消息的服务过程中，通道时间服从参数为的负指数分布，其期望值为1/，其中表示单位时间内能服务完的客户短消息量。，为刻画服务效率与通道利用率的重要标志，即服务强度。消息调度模块，用于将根据短消息所属的类型转入对应的短消息队列中，计算短消息在各子队列中的待发特征值，选取待发特征值最大的子队列作为发送队列。在本发明中，消息调度模块，具体用于将接口类短消息转入接口类短消息队列中，等待发送；具体用于将通知类短消息转入通知类短消息队列中，等待发送；具体用于将营销类短消息转入营销类短消息队列中，等待发送；具体用于将其他类短消息转入其他类短消息队列中，等待发送。每个通道除了对应四个队列外，每种类型短消息队列又对应n个子队列，具体的，接口类短消息队列、通知类短消息队列、营销类短消息队列和其他类短消息队列队，分别对应子队列1-i，子队列2-i，子队列3-i，子队列4-i。消息调度模块，具体用于将短消息转入对应的短消息队列后，计算客户k请求的短消息在子队列j-i中的待发特征值，其中，为客户k的服务等级，为客户k的j类型短消息的时延需求，是子队列j-i的负载均衡系数，具体为子队列j-i占用的短信量/队列容量，为反映通道状态相关的参数。选取待发特征值最大的子队列作为发送队列以优先获取通道资源。另外，通道的排队规则严格遵循抢占优先级服务方式，该服务方式下，即使优先级较低的客户短消息已经在接受通道的短信发送服务，也允许优先级较高的客户在到达时立即接受通道发送服务，中断通道对该低优先级客户短消息的发送服务，只有在高优先级客户请求消息接受完通道发送服务后，该低优先级客户请求短消息才能继续接受通道服务。本发明提出差异化短消息驱动下的短消息队列调度方法，通过设置多层级的队列结构和抢占优先级的排队规则，提供面向不同短消息的定制化队列调度方法，有效解决了短消息体量的激增导致的短消息积压超时问题。特别地，队列的选取综合考虑了客户服务等级、时延需求、队列负载均衡和通道状态，切实保障差异化短消息类型驱动下的通道资源的全局优化使用和客户服务质量。本技术领域技术人员可以理解，除非特意声明，这里使用的单数形式“一”、 “一个”、 “所述”和“该”也可包括复数形式。应该进一步理解的是，本发明的说明书中使用的措辞“包括”是指存在所述特征、整数、步骤、操作、元件和 / 或组件，但是并不排除存在或添加 一个或多个其他特征、整数、步骤、操作、元件、组件和 / 或它们的组。应该理解，当我们称元件被“连接”或“耦接”到另一元件时， 它可以直接连接或耦接到其他元件，或者也可以存在 中间元件。此外，这里使用的“连接”或“耦接”可以包括无线连接或无线耦接。这里使用 的措辞“和 / 或”包括一个或更多个相关联的列出项的全部或任一单元和全部组合。 本技术领域技术人员可以理解，除非另外定义，这里使用的所有术语 ，具有与本发明所属领域中的普通技术人员的一般理解相同的意义。还应 该理解的是，诸如通用字典中定义的那些术语，应该被理解为具有与现有技术的上下文中 的意义一致的意义，并且除非像这里一样被特定定义，否则不会用理想化或过于正式的含义来解释。应当理解，以上借助优选实施例对本发明的技术方案进行的详细说明是示意性的而非限制性的。本领域的普通技术人员在阅读本发明说明书的基础上可以对各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
