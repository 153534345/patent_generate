标题title
一种路由消息机制的实现方法、系统、设备及介质
摘要abst
本发明提出了一种路由消息机制的实现方法、系统、设备及介质，涉及数据流控制技术领域。通过获取待传输消息；然后将待传输消息中的各个消息帧通过预置于现场可编程器件中的内部消息环形总线进行传输，具体是外部将产生的消息帧通过内部消息环形总线进行传输，当到达指定的消息节点时，节点接收消息并完成处理，否则，消息继续传输，如果内部消息环没有对应的节点，消息通过上传模块进入缓存区，增加相应的路由消息，最后通过多个方向进行传输，该传输通过光纤进行跨板传输，实现了将分布式集群的软件在消息传输的过程中进行硬件化，能够适应几乎所有的集群；消息信令帧的定义同时包含路由位与控制消息位，能够提高消息传输效率。
权利要求书clms
1.一种路由消息机制的实现方法，其特征在于，包括以下步骤：基于现场可编程器件构造一个上传模块和多个端口依次串联的消息环形总线；获取通过外部或者自由产生的待传输消息；将所述待传输消息的消息帧，通过所述消息环形总线进行传输，判断所述待传输消息是否达到指定的消息节点；当达到指定的消息节点时，该消息节点的执行单元会接收所述消息并解析消息，根据消息协议的报文含义完成与消息内容对应的操作；若未到达指定的消息节点，则消息继续传输，且内部消息环没有对应的节点时，消息通过内部上传模块进入缓存区，增加对应的路由消息；最后通过多个预设方向，利用光纤进行跨板传输。2.根据权利要求1所述的路由消息机制的实现方法，其特征在于，所述路由消息包括东、南、西、北、上、下以及本地7个方向的路由消息。3.根据权利要求1所述的路由消息机制的实现方法，其特征在于，最后通过多个预设方向，利用光纤进行跨板传输的步骤包括：新的消息帧按照多个方向进行传输，通过消息路由在光纤的逻辑门中进行解析，并进行跨板传输。4.根据权利要求1所述的路由消息机制的实现方法，其特征在于，所述消息环形总线包括串联的24个功能端口，以及完成立体互联网络的6个光纤通信端口。5.一种路由消息机制的实现系统，其特征在于，包括：预设模块，基于现场可编程器件构造一个上传模块和多个端口依次串联的消息环形总线；信息获取模块，获取通过外部或者自由产生的待传输消息；判断模块，用于将所述待传输消息的消息帧，通过所述消息环形总线进行传输，判断所述待传输消息是否达到指定的消息节点；第一执行模块，用于当达到指定的消息节点时，该消息节点的执行单元会接收所述消息并解析消息，根据消息协议的报文含义完成与消息内容对应的操作；第二执行模块，若未到达指定的消息节点，则消息继续传输，且内部消息环没有对应的节点时，消息通过内部上传模块进入缓存区，增加对应的路由消息；跨板传输模块，用于最后通过多个预设方向，利用光纤进行跨板传输。6.一种电子设备，其特征在于，包括：存储器，用于存储一个或多个程序；处理器；当所述一个或多个程序被所述处理器执行时，实现如权利要求1-5中任一项所述的方法。7.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，该计算机程序被处理器执行时实现如权利要求1-5中任一项所述的方法。
说明书desc
技术领域本发明涉及数据流控制技术领域，具体而言，涉及一种路由消息机制的实现方法、系统、设备及介质。背景技术消息路由即通过路由规则动态规划消息的传输路径，使消息按照过滤条件，从消息源路由到目标节点。通过消息路由，可实现对数据路由的灵活控制和提高数据安全性。目前的消息系统都是基于软件实现，或者未进行消息的跨板传输，其存消息传输系统在不能进行硬件化设计，同时也存在消息传输效率低的问题，由此需要一种路由消息机制的实现方法、系统、设备及介质。发明内容本发明的目的在于提供一种路由消息机制的实现方法及装置，用以改善现有技术中消息系统在不能进行硬件化，同时还存在消息传输效率低的问题。第一方面，本申请实施例提供一种路由消息机制的实现方法，包括基于现场可编程器件构造一个上传模块和多个端口依次串联的消息环形总线；获取通过外部或者自由产生的待传输消息；将待传输消息的消息帧，通过消息环形总线进行传输，判断待传输消息是否达到指定的消息节点；当达到指定的消息节点时，该消息节点的执行单元会接收消息并解析消息，根据消息协议的报文含义完成与消息内容对应的操作；若未到达指定的消息节点，则消息继续传输，且内部消息环没有对应的节点时，消息通过内部上传模块进入缓存区，增加对应的路由消息；最后通过多个预设方向，利用光纤进行跨板传输。基于第一方面，在本发明的一些实施例中，路由消息包括东、南、西、北、上、下以及本地7个方向的路由消息。基于第一方面，在本发明的一些实施例中，最后通过多个预设方向，利用光纤进行跨板传输的步骤包括：新的消息帧按照多个方向进行传输，通过消息路由在光纤的逻辑门中进行解析，并进行跨板传输。基于第一方面，在本发明的一些实施例中，消息环形总线包括串联的24个功能端口，以及完成立体互联网络的6个光纤通信端口。第二方面，本申请实施例提供一种路由消息机制的实现系统，预设模块，基于现场可编程器件构造一个上传模块和多个端口依次串联的消息环形总线；信息获取模块，获取通过外部或者自由产生的待传输消息；判断模块，用于将待传输消息的消息帧，通过消息环形总线进行传输，判断待传输消息是否达到指定的消息节点；第一执行模块，用于当达到指定的消息节点时，该消息节点的执行单元会接收消息并解析消息，根据消息协议的报文含义完成与消息内容对应的操作；第二执行模块，若未到达指定的消息节点，则消息继续传输，且内部消息环没有对应的节点时，消息通过内部上传模块进入缓存区，增加对应的路由消息；跨板传输模块，用于最后通过多个预设方向，利用光纤进行跨板传输。第三方面，本申请实施例提供一种电子设备，其包括存储器，用于存储一个或多个程序；处理器。当一个或多个程序被处理器执行时，实现如上述第一方面中任一项的方法。第四方面，本申请实施例提供一种计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现如上述第一方面中任一项的方法。本发明实施例至少具有如下优点或有益效果：本发明实施例提供一种，上述实现过程中，通过获取待传输消息；然后将待传输消息中的各个消息帧通过预置于现场可编程器件中的内部消息环形总线进行传输，具体是将产生的消息帧通过内部消息环形总线进行传输，当到达指定的消息节点时，节点接收消息并完成处理，否则，消息继续传输，如果内部消息环没有对应的节点，消息通过上传模块进入缓存区，增加相应的路由消息，最后通过多个方向进行传输，该传输通过光纤进行跨板传输，整个传输过程是基于现场可编程器件板卡实现的，从而实现了将分布式集群的软件在消息传输的过程中进行硬件化，能够适应几乎所有的集群；消息信令帧的定义同时包含路由位与控制消息位，能够提高消息传输效率。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本发明的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1为本发明实施例1中提供的一种路由消息机制的实现方法的流程图；图2为本发明实施例1中消息环形总线信息传输的结构示意图；图3为本发明实施例2中一种路由消息机制的实现系统的结构示意图；图4为本发明实施例3中一种电子设备的结构示意图。图标：1、预设模块；2、信息获取模块；3、判断模块；4、第一执行模块；5、第二执行模块；6、跨板传输模块；7、处理器；8、存储器；9、数据总线。具体实施方式为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本申请实施例的组件可以以各种不同的配置来布置和设计。因此，以下对在附图中提供的本申请的实施例的详细描述并非旨在限制要求保护的本申请的范围，而是仅仅表示本申请的选定实施例。基于本申请中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。应注意到：相似的标号和字母在下面的附图中表示类似项，因此，一旦某一项在一个附图中被定义，则在随后的附图中不需要对其进行进一步定义和解释。同时，在本申请的描述中，术语“第一”、“第二”等仅用于区分描述，而不能理解为指示或暗示相对重要性。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括要素的过程、方法、物品或者设备中还存在另外的相同要素。实施例1下面结合附图，对本申请的一些实施方式作详细说明。在不冲突的情况下，下述的各个实施例及实施例中的各个特征可以相互组合。请参看图1和图2，为本发明实施例提供的一种路由消息机制的实现方法，其原理为通过获取待传输消息；然后将待传输消息中的各个消息帧通过预置于现场可编程器件中的消息环形总线进行传输，具体是将产生的消息帧通过内部消息环形总线进行传输，而后判断消息是否达到节点，对到达指定消息节点，直接进行接收消息并完成处理；反之通过内部上传模块进入缓存区，增加相应的路由消息，最后通过多个方向进行传输，该传输通过光纤进行跨板传输，整个传输过程是基于现场可编程器件板卡实现的，从而实现了将分布式集群的软件在消息传输的过程中进行硬件化，能够适应几乎所有的集群；消息信令帧的定义同时包含路由位与控制消息位，能够提高消息传输效率。其具体实施步骤如下：S1：基于现场可编程器件构造一个上传模块和多个端口依次串联的消息环形总线；S2：获取通过外部或者自由产生的待传输消息；S3：将待传输消息的消息帧，通过消息环形总线进行传输，判断待传输消息是否达到指定的消息节点；S4：当达到指定的消息节点时，该消息节点的执行单元会接收消息并解析消息，根据消息协议的报文含义完成与消息内容对应的操作；S5：若未到达指定的消息节点，则消息继续传输，且内部消息环没有对应的节点时，消息通过内部上传模块进入缓存区，增加对应的路由消息；S6：最后通过多个预设方向，利用光纤进行跨板传输。具体的，上述消息传输环路贯通整个机群，在每个现场可编程器件板卡逻辑上的构造一个连接24个端口的环形总线，现场可编程器件中的消息环形总线包括串接的24个功能端口和完成立体互联网络的6个光纤通信端口。上述可编程器件板卡上包括可编程器件和光纤。其中立体互联网络采用3-D Torus网络。其中，路由消息包括东、南、西、北、上、下以及本地7个方向的路由消息。另外3D-Torus网络用大小固定的交换单元互连而成一个三维环绕的格型网，每个交换单元通过单项或双项链路与它的六个相邻节点相连，并具有一双向数据通路的连接线卡，路由选择时要求在每个方向上分别经过若干转接点。在本发明的一些实施例中，最后通过多个预设方向，利用光纤进行跨板传输的步骤包括：新的消息帧按照多个方向进行传输，通过消息路由在光纤的逻辑门中进行解析，并进行跨板传输。实施例2请参照图3，为本发明提供的一种路由消息机制的实现系统，包括预设模块1，基于现场可编程器件构造一个上传模块和多个端口依次串联的消息环形总线；信息获取模块2，获取通过外部或者自由产生的待传输消息；判断模块3，用于将待传输消息的消息帧，通过消息环形总线进行传输，判断待传输消息是否达到指定的消息节点；第一执行模块4，用于当达到指定的消息节点时，该消息节点的执行单元会接收消息并解析消息，根据消息协议的报文含义完成与消息内容对应的操作；第二执行模块5，若未到达指定的消息节点，则消息继续传输，且内部消息环没有对应的节点时，消息通过内部上传模块进入缓存区，增加对应的路由消息；跨板传输模块6，用于最后通过多个预设方向，利用光纤进行跨板传输。实施例3请参照图4，为本发明提供的一种电子设备，包括至少一个处理器7、至少一个存储器8和数据总线9；其中：所述处理器7与所述存储器8通过所述数据总线9完成相互间的通信；所述存储器8存储有被所述处理器7执行的程序指令，所述处理器7调用所述程序指令以执行一种路由消息机制的实现方法。例如实现：基于现场可编程器件构造一个上传模块和多个端口依次串联的消息环形总线；获取通过外部或者自由产生的待传输消息；将待传输消息的消息帧，通过消息环形总线进行传输，判断待传输消息是否达到指定的消息节点；当达到指定的消息节点时，该消息节点的执行单元会接收消息并解析消息，根据消息协议的报文含义完成与消息内容对应的操作；若未到达指定的消息节点，则消息继续传输，且内部消息环没有对应的节点时，消息通过内部上传模块进入缓存区，增加对应的路由消息；最后通过多个预设方向，利用光纤进行跨板传输。其中存储器8可用于存储软件程序及模块，如本申请实施例所提供的一种路由消息机制的实现装置对应的程序指令/模块，处理器7通过执行存储在存储器8内的软件程序及模块，从而执行各种功能应用以及数据处理。该通信接口可用于与其他节点设备进行信令或数据的通信。且存储器8可以是但不限于，随机存取存储器，只读存储器，可编程只读存储器，可擦除只读存储器，电可擦除只读存储器等。处理器7可以是一种集成电路芯片，具有信号处理能力。该处理器7可以是通用处理器，包括中央处理器、网络处理器等；还可以是数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。可以理解，图4所示的结构仅为示意，电子设备还可包括比图4中所示更多或者更少的组件，或者具有与图4所示不同的配置。图4中所示的各组件可以采用硬件、软件或其组合实现。实施例4本发明提供的一种计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现一种路由消息机制的实现方法。例如实现：基于现场可编程器件构造一个上传模块和多个端口依次串联的消息环形总线；获取通过外部或者自由产生的待传输消息；将待传输消息的消息帧，通过消息环形总线进行传输，判断待传输消息是否达到指定的消息节点；当达到指定的消息节点时，该消息节点的执行单元会接收消息并解析消息，根据消息协议的报文含义完成与消息内容对应的操作；若未到达指定的消息节点，则消息继续传输，且内部消息环没有对应的节点时，消息通过内部上传模块进入缓存区，增加对应的路由消息；最后通过多个预设方向，利用光纤进行跨板传输。在本申请所提供的实施例中，应该理解到，所揭露的装置和方法，也可以通过其它的方式实现。以上所描述的装置实施例仅仅是示意性的，例如，附图中的流程图和框图显示了根据本申请的多个实施例的装置、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段或代码的一部分，所述模块、程序段或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现方式中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个连续的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行规定的功能或动作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。另外，在本申请各个实施例中的各功能模块可以集成在一起形成一个独立的部分，也可以是各个模块单独存在，也可以两个或两个以上模块集成形成一个独立的部分。所述功能如果以软件功能模块的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。综上，本申请实施例提供的一种路由消息机制的实现方法及装置，通过获取待传输消息；然后将待传输消息中的各个消息帧通过预置于现场可编程器件中的内部消息环形总线进行传输，具体是将产生的消息帧通过内部消息环形总线进行传输，当到达指定的消息节点时，节点接收消息并完成处理，否则，消息继续传输，如果内部消息环没有对应的节点，消息通过上传进入缓存区，增加相应的路由消息，最后通过多个方向进行传输，该传输通过光纤进行跨板传输，整个传输过程是基于现场可编程器件板卡实现的，从而实现了将分布式集群的软件在消息传输的过程中进行硬件化，能够适应几乎所有的集群；消息信令帧的定义同时包含路由位与控制消息位，能够提高消息传输效率。以上所述仅为本申请的优选实施例而已，并不用于限制本申请，对于本领域的技术人员来说，本申请可以有各种更改和变化。凡在本申请的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。对于本领域技术人员而言，显然本申请不限于上述示范性实施例的细节，而且在不背离本申请的精神或基本特征的情况下，能够以其它的具体形式实现本申请。因此，无论从哪一点来看，均应将实施例看作是示范性的，而且是非限制性的，本申请的范围由所附权利要求而不是上述说明限定，因此旨在将落在权利要求的等同要件的含义和范围内的所有变化囊括在本申请内。不应将权利要求中的任何附图标记视为限制所涉及的权利要求。
