标题title
一种智能门的开关控制系统
摘要abst
本申请涉及一种智能门的开关控制系统，包括门，固定于门上的电机，所述电机包括减速机；磁编码器，用于接收所述减速机产生的原始绝对角度信息和门的原点位置数据并进行差值运算，将差值输入门‑角度关系模型进行处理，以获取所述门的位置信息；电机‑门角度关系模型，用于接收并运算磁编码器所产生的差值；电机驱动控制器，用于接收所述磁编码器发出的数据并进行处理，对所述电机发出控制指令；电机角度编码器，用于设置台阶值。本方案可以解决智能门机精准角度控制，用来解决智能门过度打开或打开不到位的问题。
权利要求书clms
1.一种智能门的开关控制系统，包括门，其特征在于：还包括：电机，固定于门上，所述电机包括减速机；磁编码器，用于接收所述减速机产生的原始绝对角度信息和门的原点位置数据并进行差值运算，将差值输入门-角度关系模型进行处理，以获取所述门的位置信息；电机-门角度关系模型，用于接收并运算磁编码器所产生的差值；电机驱动控制器，用于接收所述磁编码器发出的数据并进行处理，对所述电机发出控制指令。电机角度编码器，用于设置台阶值。2.根据权利要求1所述的一种智能门的开关控制系统，其特征在于：所述电机角度编码器从0.1°-10°中任取一个设置为台阶值。3.根据权利要求1所述的一种智能门的开关控制系统，其特征在于：所述磁编码器包括：原始绝对角度-原点位置数学模型，用于运算原始绝对角度信息减去原点位置的差值。4.一种智能门，包括门，其特征在于：还包括：电机，固定于门上；电机驱动控制器，与电机电连接，用于控制电机；所述智能门包括如权利要求1-3任一项所述的开关控制系统；所述智能门还包括单片机模组，所述单片机模组与智能门的开关控制系统电连接。5.根据权利要求4所述的一种智能门，其特征在于：所述智能门还包括利用电机反向电动势制动的电路；其中，所述利用电机反向电动势制动的电路包括：三相下桥臂模块一，所述三相下桥臂模块一与单片机模组的I/O接口电性连接；三相下桥臂模块二，所述三相下桥臂模块二与单片机模组的I/O接口电性连接；电机电源模块，所述电机电源模块与三相下桥臂模块一的输入端电性连接，所述电机电源模块与三相下桥臂模块二的输出端电性连接。6.根据权利要求5所述的一种智能门，其特征在于：所述三相下桥臂模块一包括：场效应管Q3、场效应管Q9、场效应管Q5，所述场效应管Q3电性连接场效应管Q9的漏极，所述场效应管Q5电性连接场效应管Q9的漏极，所述场效应管Q9的漏极电性连接电容C。7.根据权利要求5所述的一种智能门，其特征在于：所述三相下桥臂模块二包括：场效应管Q6、场效应管Q7、场效应管Q8，所述场效应管Q6电性连接场效应管Q7的源极，所述场效应管Q8电性连接场效应管Q7的源极，所述Q7的源极连接电阻R。8.根据权利要求5所述的一种智能门，其特征在于：所述单片机模组包括：单片机u6、降压限流模块，所述单片机u6的正极电性连接多个降压限流模块的输入端。9.根据权利要求8所述的一种智能门，其特征在于：所述降压限流模块包括：电阻R、二极管D、电容C，所述电阻R的输入端与单片机u6的正极电性连接，所述电阻R输出端与二极管D的阳极电性连接，所述二极管D的阴极与电容C的输入端电性连接。
说明书desc
技术领域本发明涉及控制技术领域，尤其是涉及一种智能门的开关控制系统。背景技术目前市面上大多数智能门都采用了无刷直流电机智能门控制系统对门的开关进行控制，无刷直流电机智能门控制系统控制开关智能门主要是驱动电机驱动控制器带动电机转动，实现将门开启，在人离开后再将门自动关闭，并对开启和关闭的过程实现控制的系统。现有的无刷直流电机智能门控制系统在使用过程中，系统遇到通过相对角度、人流量较大堵住智能门通道、电机运转失步的情况下，容易造成智能门过度打开或未智能门开不到位使得行人通过不顺畅的问题，造成用户体验较差。发明内容为解决上述技术问题，提供一种智能门的开关控制系统，本技术方案解决了上述背景技术中提出的现有的无刷直流电机智能门控制系统在遇到通过相对角度、遇堵、失步的情况下，容易造成智能门过度打开或未开到位的情况，造成用户体验较差的问题。为实现上述目的，根据本发明的一个方面，提供了一种智能门的开关控制系统，包括门，还包括：电机，固定于门上，所述电机包括减速机；磁编码器，用于接收所述减速机产生的原始绝对角度信息和门的原点位置数据并进行差值运算，将差值输入门-角度关系模型进行处理，以获取所述门的位置信息；电机-门角度关系模型，用于接收并运算磁编码器所产生的差值；电机驱动控制器，用于接收所述磁编码器发出的数据并进行处理，对所述电机发出控制指令。电机角度编码器，用于设置台阶值。其中，磁编码器会先多次实时采集电机的角度和门的角度数据，然后根据所采集的电机的角度和门的角度数据来建立一张数据表格，然后通过该数据表按照使用人对精度的要求，去相应的离散数量合适的点，每个点都会对应一个斜率，然后通过这些数据建立N个Y＝KX+B模型，把前面所运算出的差值输入模型中，就能得到一个门当前所处的角度信息。进一步地，所述电机角度编码器从0.1°-10°中任取一个设置为台阶值。进一步地，所述磁编码器包括：原始绝对角度-原点位置数学模型，用于运算原始绝对角度信息减去原点位置的差值。进一步地，如上述的一种智能门，包括门，还包括：电机，固定于门上；电机驱动控制器，与电机电连接，用于控制电机；所述智能门包括如权利要求1-3任一项所述的开关控制系统；所述智能门包括如上述任一项所述的开关控制系统；所述智能门还包括单片机模组，所述单片机模组与智能门的开关控制系统电连接。进一步地，如上述的一种智能门，所述智能门还包括利用电机反向电动势制动的电路。其中，所述利用电机反向电动势制动的电路包括：三相下桥臂模块一，所述三相下桥臂模块一与单片机模组的I/O接口电性连接；三相下桥臂模块二，所述三相下桥臂模块二与单片机模组的I/O接口电性连接；电机电源模块，所述电机电源模块与三相下桥臂模块一的输入端电性连接，所述电机电源模块与三相下桥臂模块二的输出端电性连接。进一步地，所述三相下桥臂模块一包括：场效应管Q3、场效应管Q9、场效应管Q5，所述场效应管Q3电性连接场效应管Q9的漏极，所述场效应管Q5电性连接场效应管Q9的漏极，所述场效应管Q9的漏极电性连接电容C。进一步地，所述三相下桥臂模块二包括：场效应管Q6、场效应管Q7、场效应管Q8，所述场效应管Q6电性连接场效应管Q7的源极，所述场效应管Q8电性连接场效应管Q7的源极，所述Q7的源极连接电阻R。进一步地，所述单片机模组包括：单片机u6、降压限流模块，所述单片机u6 的正极电性连接多个降压限流模块的输入端。进一步地，所述降压限流模块包括：电阻R、二极管D、电容C，所述电阻R 的输入端与单片机u6的正极电性连接，所述电阻R输出端与二极管D的阳极电性连接，所述二极管D的阴极与电容C的输入端电性连接。与现有技术相比，本发明的有益效果是： 通过磁编码器搭建的模型配合电机驱动控制器可以对智能门机进行精准角度的控制，进而解决智能门过度打开或打开不到位的问题，避免了因为打开角度控制不精准带来的打开不完全的现象，而影响使用者的使用感受； 通过电机接收制动信号，进入制动时序，使得电机在制动周期较大时，可以通过多次短时间的短接三相下桥臂进行反转制动，避免了传统制动方式对电机线圈和永磁体的损伤。附图说明图1为本发明的绝对角度获取原理图；图2为本发明的立体结构示意图；图3为门角度关系数据表；图4为本发明的制动时序流程图；图5为桥区电路图；图6为桥区电路模块连接图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本发明的描述中，需要理解的是，术语“中心”、“纵向”、“横向”、“长度”、“宽度”、“厚度”、“上”、“下”、“前”、“后”、“左”、“右”、“竖直”、“水平”、“顶”、“底”、“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括一个或者更多个特征。在本发明的描述中，“多个”的含义是两个或两个以上，除非另有明确具体的限定。在本发明中，“示例性”一词用来表示“用作例子、例证或说明”。本发明中被描述为“示例性”的任何实施例不一定被解释为比其它实施例更优选或更具优势。为了使本领域任何技术人员能够实现和使用本发明，给出了以下描述。在以下描述中，为了解释的目的而列出了细节。应当明白的是，本领域普通技术人员可以认识到，在不使用这些特定细节的情况下也可以实现本发明。在其它实例中，不会对公知的结构和过程进行详细阐述，以避免不必要的细节使本发明的描述变得晦涩。因此，本发明并非旨在限于所示的实施例，而是与符合本发明所公开的原理和特征的最广范围相一致。实施例一请参照图1、图2、图3所示，一种智能门的开关控制系统，包括门6，还包括：电机1，固定于门6上，所述电机1包括减速机11；磁编码器2，用于接收所述减速机11产生的原始绝对角度信息和门6的原点位置数据并进行差值运算，将差值输入门-角度关系模型进行处理，以获取所述门6的位置信息；电机-门角度关系模型，用于接收并运算磁编码器2所产生的差值；电机驱动控制器3，用于接收所述磁编码器2发出的数据并进行处理，对所述电机1发出控制指令。电机角度编码器，用于设置台阶值。所述电机角度编码器从0.1°-10°中任取一个设置为台阶值。所述台阶所述磁编码器2包括：原始绝对角度-原点位置数学模型，用于运算原始绝对角度信息减去原点位置的差值。工作原理：首先对电机1进行通电，然后电机1带动门6转动，这时电机驱动控制器3会检测门6是否完全回到关闭的位置，如果门6没有完全回到关闭的位置，则电机1会继续驱动门6进行转动，直至电机1带动门6完全到达关闭的位置，如果再次检测发现门6回到完全关闭的位置，那么电机1进行制动停止带动门6继续转动，此时电机1把门6带到完全闭合位置，电机角度编码器把门6 当前的位置设置为0，这时门6目前所处的位置会被标定为原始点，电机角度编码器把数据传输至磁编码器2，零点标记结束，零命令是指：以门6闭合的位置为零点发出的数据，磁编码器2接收到电机驱动控制器3传输的零命令后，此时零点标定完成，减速机11带动门6完全关闭的角度信息会通过电机驱动控制器3 传输至磁编码器2中，磁编码器2接收的这个信息称为减速机原始绝对角度信息，上述的门6所标定的原始点称为原点位置数据，通过磁编码器2获取到电机1中包含的减速机原始绝对角度信息，然后把磁编码器2所采集的数据，输入至原始绝对角度-原点位置数学模型中进行运算，这个运算过程为：减速机11原始绝对角度信息减掉原点位置数据获得一个差值，这个差值为电机角度X，原始绝对角度是指：门6关闭到位停止后设为0，取该角度数据并标的为起始位置。减速机是指：在普通直流电机的基础上，加上配套齿轮减速箱。原点位置数据是指：带动门6运转的电机1初次上电，初次关门6时位置角度数据。然后将两者差值所得的数据，电机角度X传输至电机-门角度关系模型中，所采集的数据通过电机- 门角度关系模型设置的公式Y＝KX+B进行运算，磁编码器2通过多次实时采集电机1的角度和门6的角度数据，建立门角度关系数据表，通过该数据表可以按照精度的要求，对采集的数据离散相应多的点，每个点都会对应一个斜率，需要依据这些数据建立N个Y＝KX+B模型，，具体的：当电机角度为X＝3时，代入 Y＝KX+B模型，常量K＝0.7184、B＝-0.07911，通过计算得出2.07609，门角度Y 对应的数值为2；当电机角度为X＝5时，代入Y＝KX+B模型，常量K＝0.7184、 B＝-0.07911，通过计算得出3.51289，门角度Y对应的数值为4；当电机角度为X＝8 时，代入Y＝KX+B模型，常量K＝0.7184、B＝-0.07911，通过计算得出5.66809，门角度Y对应的数值为6；当电机角度为X＝10时，代入Y＝KX+B模型，常量 K＝0.7184、B＝-0.07911，通过计算得出7.10489，门角度Y对应的数值为7，因此可以说明，当对采集的数据进行尽可能多的离散点，就能得到门角度Y更精确的数值，更有利于对门6的精准控制，磁编码器2通过实时采集电机1转动角度，然后将采集的电机1转动角度的数据输入电机角度编码器，与电机角度编码器所设置的台阶值对比，就能精准获取到门当前的门6的开角信息，使得电机驱动控制器3精确的驱动电机1转动，进而驱动门6打开到位，具体的：首先要给电机角度变化设置一个台阶值，先将电机角度编码器的台阶值设置为5°，然后电机1的角度范围设置为0°-140°，就得到了电机角度编码器以角度每变化5°为台阶值，从电机1角度范围0°-140°中可以离散28段线段，相应的电机1 以0°-140°为转动区间，用以带动门6在电机1设置的0°-140°区间内转动，而从电机1角度范围0°-140°离散出的28段线段，能对感应门6在这个区间内的角度变化，然后用这28段线段对应求导，通过求导可以得出相应的28个斜率，这28个斜率相应的就能得到28个曲线方程，将采集到的电机1目前所在的角度通过曲线方程Y＝KX+B进行数学运算，所运算的结果就可以换算出门6目前所在位置的角度信息，如上述具体的实施方式，通过对电机角度编码器设置一个台阶值，然后在选取一个电机1的转动角度范围，通过电机编码器设置的台阶值，把电机1的转动角度范围离散出相应的线段，这个过程台阶值的选值越小，那么门-角度关系模型所运算出的结果偏差就会越小，而门-角度关系模型所计算出的偏差越小，对感知门6所处的位置就会更准确。本方案给出的台阶值的范围为 0-10，具体本方案给出的台阶值为5，使用人可以不需要做出创造性改变，选取一个台阶值进行使用。实施例二请参照图4、图5所示，一种利用电机反向电动势制动的方法，制动步骤分为：S1、电机接受制动信号，进入制动时序，判断电机制动周期是否大于预先设定的最大周期；S2、电机制动周期小于最大周期，则短接三相下桥臂延时一定时间后断开三相下桥臂；S3、当制动周期小于最大周期时，制动周期加1重复制动时序，当制动周期大于最大周期时，进入速度判断；S4、当速度大于0，电机的制动周期设为0，电机需重新进行制动时序，当速度大于0，则断开三相下桥臂释放电机。工作原理：首先电机接收到制动信号时，电机立刻进入制动时序，首先要预先设置一个电机制动的最大延时时间X，这个电机制动的最大延时时间X 称为：最大周期，电机制动的最大延时时间X的设置是可以根据具体电机制动前速度的大小和物体惯性的大小来对应调整制动周期值的，此实施例把电机制动的最大周期设定为10，制动时序开始，首先桥区电路中单片机u6进入启动程序，单片机u6控制场效应管Q3关闭、场效应管 Q9关闭、场效应管Q5关闭，在关闭的同时，接通场效应管Q6、场效应管Q7、场效应管Q8，使得UVW三相下桥臂短接，进而造成了电机的电源电路被短接，此过程延时一定时间后，单片机u6控制UVW三相下桥臂断开，UVW三相下桥臂是指：使用六个整流元件的三相整流桥，本发明中指，场效应管Q3、场效应管Q9、场效应管Q5、场效应管Q6、场效应管Q7、场效应管Q8。这个短接过程为：单片机u6控制桥区电路中的场效应管Q3关闭、场效应管Q9关闭、场效应管Q5关闭，同时单片机u6控制场效应管Q6打开、场效应管Q7打开、场效应管Q8打开，此时造成了驱动电机的电源被短接，因为电机绕组的电阻较小，所以电机绕组能产生很大的短路电流，此时电机的动能能够被快速释放，从而使电机瞬间产生极大的制动力矩，从而实现电机能够达到快速制动的效果，而且电机速度越高，那么短路所造成的电流就会越大，电机的制动力也就越大。当这个短接的过程结束后，需要判断制动周期T是否大于预先设定的最大周期，当电机制动的周期小于最大周期，那么制动周期就会加 1，然后电机会重复刚开始的制动时序，这个过程为单片机u6控制桥区电路中的场效应管Q3关闭、场效应管Q9关闭、场效应管Q5关闭，同时单片机u6控制场效应管Q6打开、场效应管Q7打开、场效应管Q8打开，此时造成了驱动电机的电源被短接，因为电机绕组的电阻较小，所以电机绕组能产生很大的短路电流，此时电机的动能能够被快速释放，从而使电机瞬间产生极大的制动力矩，从而对电机进行制动，直至电机制动周期大于最大周期，当制动周期大于最大周期时，进入速度判断，当电机的转动速度大于0时，则制动周期设为0，需要电机重新进入以上的制动时序，当电机的转动速度等于0时，桥区电路中的单片机u6 会控制UVW三相下桥臂断开，从而释放电机的制动。实施例三请参照图1、图4、图5所示，在电机1带动门6转动到所预设的位置，此时电机1需要立刻制动停止，这个过程，需要预先根据电机1制动前速度的大小和物体惯性的大小来对应调整制动最大周期，然后电机1会进入制动时序，首先控制电机1的桥区电路中的单片机u6启动，单片机u6控制场效应管Q3关闭、场效应管Q9关闭、场效应管Q5关闭，在关闭的同时，单片机u6控制场效应管 Q6、场效应管Q7、场效应管Q8接通，进而造成UVW三相下桥臂的短接，从而使电机的电源电路被短接，这个短接的过程延续一定时间后，单片机u6控制 UVW三相下桥臂断开，以上的短接过程为：单片机u6控制桥区电路中的场效应管Q3关闭、场效应管Q9关闭、场效应管Q5关闭，同时单片机u6控制场效应管Q6打开、场效应管Q7打开、场效应管Q8打开，这个过程会造成驱动电机1的电源被短接，此时电机1的绕组的电阻阻值较小，所以电机1的绕组能够产生很大的短路电流，从而使电机1能够被快速的制动，进而防止门6被过度打开，当这个短接过程结束后，进入下一步，要判断电机1的制动周期T是否大于预先设定的最大周期，如果电机1的制动周期是小于预先设置的最大周期值时，那么电机1的制动周期就会加1，然后电机1需要重复上述的制动时序，如果电机1的制动周期大于最大周期时，就会进入速度判断，电机1的转动速度大于0，则制动周期归置为0，重新进入制动时序，如果电机转动速度等于0，单片机u6控制UVW三相下桥臂断开，停止对电机1的制动。实施例四请参照图5、图6所示，上述的一种智能门，包括门6，还包括：电机1，固定于门6上；电机驱动控制器3，与电机1电连接，用于控制电机1；所述智能门包括如权利要求1-3任一项所述的开关控制系统；所述智能门还包括单片机模组4，所述单片机模组4与智能门的开关控制系统电连接，所述智能门还包括利用电机反向电动势制动的电路。其中，所述利用电机反向电动势制动的电路包括：三相下桥臂模块一5，所述三相下桥臂模块一5与单片机模组4的I/O接口电性连接；三相下桥臂模块二7，所述三相下桥臂模块二7与单片机模组4的I/O接口电性连接；电机电源模块8，所述电机电源模块8与三相下桥臂模块一5的输入端电性连接，所述电机电源模块8与三相下桥臂模块二7的输出端电性连接。进一步地，所述三相下桥臂模块一2包括：场效应管Q3、场效应管Q9、场效应管Q5，所述场效应管Q3电性连接场效应管Q9的漏极，所述场效应管Q5 电性连接场效应管Q9的漏极，所述场效应管Q9的漏极电性连接电容C。进一步地，所述三相下桥臂模块二3包括：场效应管Q6、场效应管Q7、场效应管Q8，所述场效应管Q6电性连接场效应管Q7的源极，所述场效应管Q8 电性连接场效应管Q7的源极，所述Q7的源极连接电阻R。进一步地，所述单片机模组4包括：单片机u6、降压限流模块41，所述单片机u6的正极电性连接多个降压限流模块41的输入端。进一步地，所述降压限流模块11包括：电阻R、二极管D、电容C，所述电阻R的输入端与单片机u6的正极电性连接，所述电阻R输出端与二极管D的阳极电性连接，所述二极管D的阴极与电容C的输入端电性连接。工作原理：在单片机u6发出关闭电信号，首先电流通过降压限流模块，对电流进行降压限流，然后电流流向电容，经由电容流向三相下桥臂模块一，此时三相下桥臂模块一中的场效应管Q3、场效应管Q9、场效应管Q5进行关闭，同时单片机u6控制三相下桥臂模块一关闭，这个过程为：从单片机u6发出的电信号经过降压限流模块时，电流首先通过电阻然后通过二极管，电流经过电阻和二极管后被降压限流，然后流入场效应管Q3、场效应管Q9、场效应管Q5，使得场效应管Q3、场效应管Q9、场效应管Q5关闭，与此同时，单片机u6发出接通信号，单片机u6发出的信号控制三相下桥臂模块二接通，这个过程为：电信号经过并联的二极管和电阻时，在通过二极管时被降压，在通过电阻时被分流，然后两股电流汇合此电流被分流降压，然后分流降压之后流向场效应管Q6、场效应管Q7、场效应管Q8，使得场效应管Q6、场效应管Q7、场效应管Q8接通，然后短接电机电源模块，此时单片机u6在所设置的延时时间到达后，向场效应管Q6、场效应管Q7、场效应管Q8发出关闭信号，使得场效应管Q6、场效应管Q7、场效应管Q8关闭，电机电源模块停止短接。以上对本发明实施例所提供的进行了详细介绍，本文中应用了具体个例对本发明的原理及实施例进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的技术人员，依据本发明的思想，在具体实施例及应用范围上均会有改变之处，综上，本说明书内容不应理解为对本发明的限制。
