标题title
基于云数据自动下载的图像编码方法、装置及电子设备
摘要abst
本发明涉及云数据库技术领域，特别涉及一种基于云数据自动下载的图像编码方法、装置及电子设备，包括：利用图像特征在云数据图库中，进行相似检索，得到候选相似图像集，判断是否存在相似图像，若不存在，则利用帧内编码算法，对待编码图像进行编码，得到编码图像，若存在，则对相似图像进行预处理，得到编码参考图像及预处理参数，对待编码图像进行帧间预测编码，得到帧间编码残差，利用预处理参数、帧间编码残差及相似图像的图像索引构建压缩码流，并存储于云数据图库中码。本发明还提出一种基于云数据自动下载的图像编码装置、电子设备以及计算机可读存储介质。本发明可以解决网络云数据图库存在图像数据压缩效率低，检索速度慢的问题。
权利要求书clms
1.一种基于云数据自动下载的图像编码方法，其特征在于，所述方法包括：提取待编码图像的图像特征，利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集；判断所述候选相似图像集中是否存在所述待编码图像的相似图像；若所述候选相似图像集中不存在所述待编码图像的相似图像，则利用预构建的帧内编码算法，对所述待编码图像进行编码，得到编码图像，并将所述编码图像存储于所述云数据图库中，完成所述待编码图像的编码；若所述候选相似图像集中存在所述待编码图像的相似图像，则对所述相似图像进行预处理，得到编码参考图像及预处理参数；利用所述编码参考图像，对所述待编码图像进行帧间预测编码，得到帧间编码残差；提取所述相似图像在所述云数据图库中的图像索引，利用所述预处理参数、帧间编码残差及图像索引构建压缩码流，将所述压缩码流存储于所述云数据图库中，完成所述待编码图像的编码。2.如权利要求1所述的基于云数据自动下载的图像编码方法，其特征在于，所述提取待编码图像的图像特征，包括：对所述待编码图像进行兴趣点检测，得到初始局部特征点；去除所述初始局部描述子中的噪声点，得到目标局部特征点；压缩所述目标局部特征点，得到局部描述子；聚合所述目标局部特征点，得到全局描述子；根据所述局部描述子与所述全局描述子，构建所述待编码图像的图像特征。3.如权利要求2所述的基于云数据自动下载的图像编码方法，其特征在于，所述利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集，包括：提取所述云数据图库中预构建的全局描述子索引表；利用所述全局描述子索引表，将所述图像特征中的全局描述子与所述云数据图库中图像的全局描述子进行匹配，得到所述云数据图库中图像与所述待编码图像的汉明距离序列；按照从小到大的顺序，在所述汉明距离序列中，提取预设数目的汉明距离，及所述预设数目的汉明距离对应的图像；将所述预设数目的汉明距离对应的图像，作为所述候选相似图像集。4.如权利要求3所述的基于云数据自动下载的图像编码方法，其特征在于，所述利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集之前，所述方法还包括：提取所述云数据图库中所有图像的局部特征点；对每个所述局部特征点进行聚合，得到每个图像对应的全局描述子；根据预构建的多块索引结构，利用所述每个图像对应的全局描述子，构建全局描述子索引表。5.如权利要求4所述的基于云数据自动下载的图像编码方法，其特征在于，所述判断所述候选相似图像集中是否存在所述待编码图像的相似图像，包括：获取相似图像测试集；提取所述相似图像测试集中每一个图像的局部特征点；对所述相似图像测试集中每一个图像的局部特征点，进行聚合，得到所述相似图像测试集中每一个图像的全局描述子；在所述相似图像测试集中，依次提取待比较图像；利用所述待比较图像的全局描述子，与所述相似图像测试集中的其它图像的全局描述子进行匹配，得到所述相似图像测试集中的其它图像，与所述待比较图像的汉明距离集；提取所述汉明距离集中的最大汉明距离，得到所述待比较图像的相似汉明距离；在所述相似图像测试集中所有图像的相似汉明距离中，提取最大汉明距离，得到相似汉明距离阈值；判断所述候选相似图像对应的汉明距离序列中，是否存在小于所述相似汉明距离阈值的汉明距离；若所述候选相似图像对应的汉明距离序列中，不存在小于所述相似汉明距离阈值的汉明距离，则判定所述候选相似图像集中，不存在所述待编码图像的相似图像；若所述候选相似图像对应的汉明距离序列中，存在小于所述相似汉明距离阈值的汉明距离，则判定所述候选相似图像集中，存在所述待编码图像的相似图像。6.如权利要求5所述的基于云数据自动下载的图像编码方法，其特征在于，所述若所述候选相似图像集中存在所述待编码图像的相似图像，则对所述相似图像进行预处理之前，所述方法还包括：提取所有小于所述相似汉明阈值的汉明距离，得到候选汉明距离集；依次提取所述候选汉明距离集中每一个候选汉明距离对应的图像，得到全局相似图像集；提取所述全局相似图像集中每一个图像的局部特征点；压缩所述全局相似图像集中每一个图像的局部特征点，得到所述全局相似图像集中每一个图像的局部描述子；利用所述全局相似图像集中每一个图像的局部描述子，与所述待编码图像的局部描述子进行汉明距离匹配，得到局部汉明距离序列；提取所述局部汉明距离序列中的最小汉明距离，及所述最小汉明距离对应的图像；将所述最小汉明距离对应的图像作为所述待编码图像的相似图像。7.如权利要求5所述的基于云数据自动下载的图像编码方法，其特征在于，所述对所述相似图像进行预处理，得到编码参考图像及预处理参数，包括：根据所述相似图像与所述待编码图像匹配的特征点，对所述相似图像进行分割，得到相似区块集；利用预构建的特征点匹配距离公式，求得所述相似区块集中每一个相似区块对应的最佳变换矩阵；利用所述每一个相似区块对应的最佳变换矩阵，对所述相似图像进行形变，得到形变参考图像；根据所述待编码图像与所述形变参考图像的相同位置像素值的差异，对所述形变参考图像进行光照补偿，得到所述编码参考图像；根据所述每一个相似区块对应的最佳变换矩阵，及所述光照补偿的数值差异，构建所述预处理参数。8.如权利要求7所述的基于云数据自动下载的图像编码方法，其特征在于，所述特征点匹配距离公式如下所示：其中， 表示第i块相似区块与所述待编码图像中对应区块的特征点距离值，表示第i块相似区块在所述待编码图像中对应的位置，表示第i块相似区块在相似图像中的位置，表示变换矩阵，表示第i块相似区块在所述待编码图像中对应的特征点，表示所述相似图像中第i块相似区块的特征点。9.如权利要求7所述的基于云数据自动下载的图像编码方法，其特征在于，所述利用所述编码参考图像，对所述待编码图像进行帧间预测编码，得到帧间编码残差，包括：对所述待编码图像及所述编码参考图像进行块切分，得到待编码区块图像集及参考区块图像集；在所述待编码区块图像集中依次提取待编码区块图像，计算所述待编码区块图像与所述参考区块图像集中每一块参考区块图像的均方误差，得到所述待编码图像对应的最小均方误差及相似参考区块图像；整合所述待编码图像中所有待编码区块与对应的所述相似参考区块图像的差异，得到所述帧间编码残差。10.一种基于云数据自动下载的图像编码装置，其特征在于，所述装置包括：候选相似图像集检索模块，用于提取待编码图像的图像特征，利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集；相似图像存在判断模块，用于判断所述候选相似图像集中是否存在所述待编码图像的相似图像；帧内编码模块，用于若所述候选相似图像集中不存在所述待编码图像的相似图像，则利用预构建的帧内编码算法，对所述待编码图像进行编码，得到编码图像，并将所述编码图像存储于所述云数据图库中，完成所述待编码图像的编码；相似图像预处理模块，用于若所述候选相似图像集中存在所述待编码图像的相似图像，则对所述相似图像进行预处理，得到编码参考图像及预处理参数；帧间预测编码模块，用于利用所述编码参考图像，对所述待编码图像进行帧间预测编码，得到帧间编码残差；压缩码流存储模块，用于提取所述相似图像在所述云数据图库中的图像索引，利用所述预处理参数、帧间编码残差及图像索引构建压缩码流，将所述压缩码流存储于所述云数据图库中，完成所述待编码图像的编码。
说明书desc
技术领域本发明涉及云数据库技术领域，尤其涉及一种基于云数据自动下载的图像编码方法、装置及电子设备。背景技术随着图像采集设备的普及，海量的图像开始上传至互联网中进行保存，因此，极大的加重了网络云数据图库的存储压力。当前，网络云数据图库可以利用分布式存储的方式减轻数据存储压力，但图像数据的存储，并未充分利用网络云数据图库中已有的图像数据来提高图像数据的压缩效率，进而减轻图像数据的存储压力，因此，导致现有的网络云数据图库存在图像数据压缩效率低，检索速度慢的问题。发明内容本发明提供一种基于云数据自动下载的图像编码方法、装置及电子设备，其主要目的在于解决的问题。为实现上述目的，本发明提供的一种基于云数据自动下载的图像编码方法，包括：提取待编码图像的图像特征，利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集；判断所述候选相似图像集中是否存在所述待编码图像的相似图像；若所述候选相似图像集中不存在所述待编码图像的相似图像，则利用预构建的帧内编码算法，对所述待编码图像进行编码，得到编码图像，并将所述编码图像存储于所述云数据图库中，完成所述待编码图像的编码；若所述候选相似图像集中存在所述待编码图像的相似图像，则对所述相似图像进行预处理，得到编码参考图像及预处理参数；利用所述编码参考图像，对所述待编码图像进行帧间预测编码，得到帧间编码残差；提取所述相似图像在所述云数据图库中的图像索引，利用所述预处理参数、帧间编码残差及图像索引构建压缩码流，将所述压缩码流存储于所述云数据图库中，完成所述待编码图像的编码。可选地，所述提取待编码图像的图像特征，包括：对所述待编码图像进行兴趣点检测，得到初始局部特征点；去除所述初始局部描述子中的噪声点，得到目标局部特征点；压缩所述目标局部特征点，得到局部描述子；聚合所述目标局部特征点，得到全局描述子；根据所述局部描述子与所述全局描述子，构建所述待编码图像的图像特征。可选地，所述利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集，包括：提取所述云数据图库中预构建的全局描述子索引表；利用所述全局描述子索引表，将所述图像特征中的全局描述子与所述云数据图库中图像的全局描述子进行匹配，得到所述云数据图库中图像与所述待编码图像的汉明距离序列；按照从小到大的顺序，在所述汉明距离序列中，提取预设数目的汉明距离，及所述预设数目的汉明距离对应的图像；将所述预设数目的汉明距离对应的图像，作为所述候选相似图像集。可选地，所述利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集之前，所述方法还包括：提取所述云数据图库中所有图像的局部特征点；对每个所述局部特征点进行聚合，得到每个图像对应的全局描述子；根据预构建的多块索引结构，利用所述每个图像对应的全局描述子，构建全局描述子索引表。可选地，所述判断所述候选相似图像集中是否存在所述待编码图像的相似图像，包括：获取相似图像测试集；提取所述相似图像测试集中每一个图像的局部特征点；对所述相似图像测试集中每一个图像的局部特征点，进行聚合，得到所述相似图像测试集中每一个图像的全局描述子；在所述相似图像测试集中，依次提取待比较图像；利用所述待比较图像的全局描述子，与所述相似图像测试集中的其它图像的全局描述子进行匹配，得到所述相似图像测试集中的其它图像，与所述待比较图像的汉明距离集；提取所述汉明距离集中的最大汉明距离，得到所述待比较图像的相似汉明距离；在所述相似图像测试集中所有图像的相似汉明距离中，提取最大汉明距离，得到相似汉明距离阈值；判断所述候选相似图像对应的汉明距离序列中，是否存在小于所述相似汉明距离阈值的汉明距离；若所述候选相似图像对应的汉明距离序列中，不存在小于所述相似汉明距离阈值的汉明距离，则判定所述候选相似图像集中，不存在所述待编码图像的相似图像；若所述候选相似图像对应的汉明距离序列中，存在小于所述相似汉明距离阈值的汉明距离，则判定所述候选相似图像集中，存在所述待编码图像的相似图像。可选地，所述若所述候选相似图像集中存在所述待编码图像的相似图像，则对所述相似图像进行预处理之前，所述方法还包括：提取所有小于所述相似汉明阈值的汉明距离，得到候选汉明距离集；依次提取所述候选汉明距离集中每一个候选汉明距离对应的图像，得到全局相似图像集；提取所述全局相似图像集中每一个图像的局部特征点；压缩所述全局相似图像集中每一个图像的局部特征点，得到所述全局相似图像集中每一个图像的局部描述子；利用所述全局相似图像集中每一个图像的局部描述子，与所述待编码图像的局部描述子进行汉明距离匹配，得到局部汉明距离序列；提取所述局部汉明距离序列中的最小汉明距离，及所述最小汉明距离对应的图像；将所述最小汉明距离对应的图像作为所述待编码图像的相似图像。可选地，所述对所述相似图像进行预处理，得到编码参考图像及预处理参数，包括：根据所述相似图像与所述待编码图像匹配的特征点，对所述相似图像进行分割，得到相似区块集；利用预构建的特征点匹配距离公式，求得所述相似区块集中每一个相似区块对应的最佳变换矩阵；利用所述每一个相似区块对应的最佳变换矩阵，对所述相似图像进行形变，得到形变参考图像；根据所述待编码图像与所述形变参考图像的相同位置像素值的差异，对所述形变参考图像进行光照补偿，得到所述编码参考图像；根据所述每一个相似区块对应的最佳变换矩阵，及所述光照补偿的数值差异，构建所述预处理参数。可选地，所述特征点匹配距离公式如下所示：其中，表示第i块相似区块与所述待编码图像中对应区块的特征点距离值，表示第i块相似区块在所述待编码图像中对应的位置，表示第i块相似区块在相似图像中的位置，表示变换矩阵，表示第i块相似区块在所述待编码图像中对应的特征点，表示所述相似图像中第i块相似区块的特征点。可选地，所述利用所述编码参考图像，对所述待编码图像进行帧间预测编码，得到帧间编码残差，包括：对所述待编码图像及所述编码参考图像进行块切分，得到待编码区块图像集及参考区块图像集；在所述待编码区块图像集中依次提取待编码区块图像，计算所述待编码区块图像与所述参考区块图像集中每一块参考区块图像的均方误差，得到所述待编码图像对应的最小均方误差及相似参考区块图像；整合所述待编码图像中所有待编码区块与对应的所述相似参考区块图像的差异，得到所述帧间编码残差。为了解决上述问题，本发明还提供一种基于云数据自动下载的图像编码装置，所述装置包括：候选相似图像集检索模块，用于提取待编码图像的图像特征，利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集；相似图像存在判断模块，用于判断所述候选相似图像集中是否存在所述待编码图像的相似图像；帧内编码模块，用于若所述候选相似图像集中不存在所述待编码图像的相似图像，则利用预构建的帧内编码算法，对所述待编码图像进行编码，得到编码图像，并将所述编码图像存储于所述云数据图库中，完成所述待编码图像的编码；相似图像预处理模块，用于若所述候选相似图像集中存在所述待编码图像的相似图像，则对所述相似图像进行预处理，得到编码参考图像及预处理参数；帧间预测编码模块，用于利用所述编码参考图像，对所述待编码图像进行帧间预测编码，得到帧间编码残差。压缩码流存储模块，用于提取所述相似图像在所述云数据图库中的图像索引，利用所述预处理参数、帧间编码残差及图像索引构建压缩码流，将所述压缩码流存储于所述云数据图库中，完成所述待编码图像的编码为了解决上述问题，本发明还提供一种电子设备，所述电子设备包括：至少一个处理器；以及，与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以实现上述所述的基于云数据自动下载的图像编码方法。为了解决上述问题，本发明还提供一种计算机可读存储介质，所述计算机可读存储介质中存储有至少一个指令，所述至少一个指令被电子设备中的处理器执行以实现上述所述的基于云数据自动下载的图像编码方法。相比于背景技术所述：现有的网络云数据图库存在图像数据压缩效率低，检索速度慢的现象，本发明实施例通过利用所述待编码图像的图像特征，在所述云数据图库中检索出所述候选相似图像集，并进一步判断所述候选相似图像集中是否存在所述待编码图像的相似图像，若不存在，则按照一般的帧内编码算法对所述待编码图像进行压缩，若存在所述相似图像，则利用所述相似图像来压缩所述待编码图像，提高压缩效率，首先需要预处理所述相似图像，得到所述编码参考图像及预处理参数，再利用所述编码参考图像进行帧间预测编码，得到所述帧间编码残差，最后根据所述相似图像的图像索引、预处理参数及帧间编码残差，构建所述压缩码流，并存储于所述云数据图库中，完成所述待编码图像的编码操作。因此本发明提出的基于云数据自动下载的图像编码方法、装置及电子设备，可以解决网络云数据图库存在图像数据压缩效率低，检索速度慢的问题。附图说明图1为本发明一实施例提供的基于云数据自动下载的图像编码方法的流程示意图；图2为图1中其中一个步骤的详细实施流程示意图；图3为图1中另一个步骤的详细实施流程示意图；图4为本发明一实施例提供的基于云数据自动下载的图像编码装置的功能模块图；图5为本发明一实施例提供的实现所述基于云数据自动下载的图像编码方法的电子设备的结构示意图。本发明目的的实现、功能特点及优点将结合实施例，参照附图做进一步说明。具体实施方式应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。本申请实施例提供一种基于云数据自动下载的图像编码方法。所述基于云数据自动下载的图像编码方法的执行主体包括但不限于服务端、终端等能够被配置为执行本申请实施例提供的该方法的电子设备中的至少一种。换言之，所述基于云数据自动下载的图像编码方法可以由安装在终端设备或服务端设备的软件或硬件来执行。所述服务端包括但不限于：单台服务器、服务器集群、云端服务器或云端服务器集群等。实施例1：参照图1所示，为本发明一实施例提供的基于云数据自动下载的图像编码方法的流程示意图。在本实施例中，所述基于云数据自动下载的图像编码方法包括：S1、提取待编码图像的图像特征，利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集。可解释的，所述图像特征指利用视觉搜索紧凑描述子对所述待编码图像进行特征提取，得到的特征。所述视觉搜索紧凑描述子是MPEG组织对图像检索的描述子格式、特征提取和搜索过程所指定的标准，相比于一般的图像特征，视觉搜索紧凑描述子占用的字节较少，具有良好的检索及匹配性能，而且特征提取和匹配的速度较快。可理解的，所述云数据图库指用于存储图像的云数据图库。所述候选相似图像集指在所述云数据图库中提取到的可能是所述待编码图像的相似图像。本发明实施例中，所述提取待编码图像的图像特征，包括：对所述待编码图像进行兴趣点检测，得到初始局部特征点；去除所述初始局部描述子中的噪声点，得到目标局部特征点；压缩所述目标局部特征点，得到局部描述子；聚合所述目标局部特征点，得到全局描述子；根据所述局部描述子与所述全局描述子，构建所述待编码图像的图像特征。应明白的，需要对所述初始局部特征点进行筛选，去除掉噪声点，只保留重要的局部特征点。可解释的，对所述目标局部特征点进行降维、聚合以及二值化处理，可以得到所述全局描述子。对所述目标局部特征点进行变换和标量量化后，可得到所述局部描述子。对所述目标局部特征点进行压缩，可以减少字节占用，减少特征匹配时间，对所述目标局部特征点进行聚合，可以使待编码图像具有不同层次的信息描述，进而提高检索的准确性。详细地，可参阅图2所示，所述利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集，包括：S11、提取所述云数据图库中预构建的全局描述子索引表；S12、利用所述全局描述子索引表，将所述图像特征中的全局描述子与所述云数据图库中图像的全局描述子进行匹配，得到所述云数据图库中图像与所述待编码图像的汉明距离序列；S13、按照从小到大的顺序，在所述汉明距离序列中，提取预设数目的汉明距离，及所述预设数目的汉明距离对应的图像；S14、将所述预设数目的汉明距离对应的图像，作为所述候选相似图像集。应明白的，需要基于多块索引结构，根据所述云数据图库中的所有图像，生成所述全局描述子的索引表，由此提高检索效率。可理解的，所述汉明距离指一种衡量特征距离的方法，表示两个特征之间的相似性。本发明实施例中，需要利用全局描述子选出预定数目的图像，通过预定数目的图像减小候选图像范围，所述预定数目可以为300个，再利用局部描述子在所述预定数目的图像中选择相似图像。详细地，所述利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集之前，所述方法还包括：提取所述云数据图库中所有图像的局部特征点；对每个所述局部特征点进行聚合，得到每个图像对应的全局描述子；根据预构建的多块索引结构，利用所述每个图像对应的全局描述子，构建全局描述子索引表。S2、判断所述候选相似图像集中是否存在所述待编码图像的相似图像。可理解的，需要先判断所述候选相似图像集中是否存在所述相似图像，若存在，则使用帧间预测编码压缩并编码所述待编码图像，若所述候选相似图像集中不存在所述相似图像，则使用帧内编码算法进行压缩。本发明实施例中，所述判断所述候选相似图像集中是否存在所述待编码图像的相似图像，包括：获取相似图像测试集；提取所述相似图像测试集中每一个图像的局部特征点；对所述相似图像测试集中每一个图像的局部特征点，进行聚合，得到所述相似图像测试集中每一个图像的全局描述子；在所述相似图像测试集中，依次提取待比较图像；利用所述待比较图像的全局描述子，与所述相似图像测试集中的其它图像的全局描述子进行匹配，得到所述相似图像测试集中的其它图像，与所述待比较图像的汉明距离集；提取所述汉明距离集中的最大汉明距离，得到所述待比较图像的相似汉明距离；在所述相似图像测试集中所有图像的相似汉明距离中，提取最大汉明距离，得到相似汉明距离阈值；判断所述候选相似图像对应的汉明距离序列中，是否存在小于所述相似汉明距离阈值的汉明距离；若所述候选相似图像对应的汉明距离序列中，不存在小于所述相似汉明距离阈值的汉明距离，则判定所述候选相似图像集中，不存在所述待编码图像的相似图像；若所述候选相似图像对应的汉明距离序列中，存在小于所述相似汉明距离阈值的汉明距离，则判定所述候选相似图像集中，存在所述待编码图像的相似图像。可解释的，所述相似图像测试集指一组相似图像的集合。利用所述相似图像测试集得到的所述相似汉明距离阈值，对所述候选相似图像中是否存在相似图像进行判断。小于所述相似汉明距离阈值，表明存在相似图像，反之，则不存在。若所述候选相似图像集中不存在所述待编码图像的相似图像，则执行S3、利用预构建的帧内编码算法，对所述待编码图像进行编码，得到编码图像，并将所述编码图像存储于所述云数据图库中，完成所述待编码图像的编码。本发明实施例中，所述候选相似图像集中不存在所述待编码图像的相似图像，则利用现有的帧内编码算法进行编码压缩，利用不了所述云数据图库中的图像。其中帧内编码算法为已有技术，在此不再赘述。若所述候选相似图像集中存在所述待编码图像的相似图像，则执行S4、对所述相似图像进行预处理，得到编码参考图像及预处理参数。应明白的，所述预处理指根据所述待编码图像，对所述相似图像的形状及像素值进行调整，使其接近所述待编码图像，便于后续处理。本发明实施例中，所述若所述候选相似图像集中存在所述待编码图像的相似图像，则对所述相似图像进行预处理之前，所述方法还包括：提取所有小于所述相似汉明阈值的汉明距离，得到候选汉明距离集；依次提取所述候选汉明距离集中每一个候选汉明距离对应的图像，得到全局相似图像集；提取所述全局相似图像集中每一个图像的局部特征点；压缩所述全局相似图像集中每一个图像的局部特征点，得到所述全局相似图像集中每一个图像的局部描述子；利用所述全局相似图像集中每一个图像的局部描述子，与所述待编码图像的局部描述子进行汉明距离匹配，得到局部汉明距离序列；提取所述局部汉明距离序列中的最小汉明距离，及所述最小汉明距离对应的图像；将所述最小汉明距离对应的图像作为所述待编码图像的相似图像。可理解的，所述汉明距离越小表示所述待编码图像与所述相似图像越相似。本发明实施例中，所述对所述相似图像进行预处理，得到编码参考图像及预处理参数，包括：根据所述相似图像与所述待编码图像匹配的特征点，对所述相似图像进行分割，得到相似区块集；利用预构建的特征点匹配距离公式，求得所述相似区块集中每一个相似区块对应的最佳变换矩阵；利用所述每一个相似区块对应的最佳变换矩阵，对所述相似图像进行形变，得到形变参考图像；根据所述待编码图像与所述形变参考图像的相同位置像素值的差异，对所述形变参考图像进行光照补偿，得到所述编码参考图像；根据所述每一个相似区块对应的最佳变换矩阵，及所述光照补偿的数值差异，构建所述预处理参数。本发明实施例中，所述特征点匹配距离公式如下所示：其中，表示第i块相似区块与所述待编码图像中对应区块的特征点距离值，表示第i块相似区块在所述待编码图像中对应的位置，表示第i块相似区块在相似图像中的位置，表示变换矩阵，表示第i块相似区块在所述待编码图像中对应的特征点，表示所述相似图像中第i块相似区块的特征点。可理解的，根据透视变换原理，每四对匹配的特征点就可以计算一个变换矩阵，矩阵可以表示图像之间的旋转、平移、放缩等形变信息，由于两幅图大都存在较多的匹配的特征点，因此，可以存在多个变换矩阵。S5、利用所述编码参考图像，对所述待编码图像进行帧间预测编码，得到帧间编码残差。可理解的，所述帧间预测编码可以利用HEVC进行编码预测及图像压缩。详细地，参阅图3所示，所述利用所述编码参考图像，对所述待编码图像进行帧间预测编码，得到帧间编码残差，包括：S51、对所述待编码图像及所述编码参考图像进行块切分，得到待编码区块图像集及参考区块图像集；S52、在所述待编码区块图像集中依次提取待编码区块图像，计算所述待编码区块图像与所述参考区块图像集中每一块参考区块图像的均方误差，得到所述待编码图像对应的最小均方误差及相似参考区块图像；S53、整合所述待编码图像中所有待编码区块与对应的所述相似参考区块图像的差异，得到所述帧间编码残差。应明白的，在帧间预测编码过程中，需要对所述待编码图像进行切分，再在所述相似图像中寻找与切分得到的待编码区块图像的均方误差最小的相似参考区块图像。最后根据所有相似参考区块图像与对应的待编码区块图像的差异，得到所述帧间编码残差。S6、提取所述相似图像在所述云数据图库中的图像索引，利用所述预处理参数、帧间编码残差及图像索引构建压缩码流，将所述压缩码流存储于所述云数据图库中，完成所述待编码图像的编码。本发明实施例中，在得到所述预处理参数、帧间编码残差及图像索引，既可以构建所述压缩码流，并存储在所述云数据图库中。当需要解码时，只需要根据所述图像索引，在所述云数据图库中提取所述相似图像，再利用所述预处理参数对所述相似图像进行预处理，再利用所述帧间编码残差和与处理后的相似图像，计算出所述待编码图像即可。节约了存储空间，提高检索效率。相比于背景技术所述：现有的网络云数据图库存在图像数据压缩效率低，检索速度慢的现象，本发明实施例通过利用所述待编码图像的图像特征，在所述云数据图库中检索出所述候选相似图像集，并进一步判断所述候选相似图像集中是否存在所述待编码图像的相似图像，若不存在，则按照一般的帧内编码算法对所述待编码图像进行压缩，若存在所述相似图像，则利用所述相似图像来压缩所述待编码图像，提高压缩效率，首先需要预处理所述相似图像，得到所述编码参考图像及预处理参数，再利用所述编码参考图像进行帧间预测编码，得到所述帧间编码残差，最后根据所述相似图像的图像索引、预处理参数及帧间编码残差，构建所述压缩码流，并存储于所述云数据图库中，完成所述待编码图像的编码操作。因此本发明提出的基于云数据自动下载的图像编码方法、装置及电子设备，可以解决网络云数据图库存在图像数据压缩效率低，检索速度慢的问题。实施例2：如图4所示，是本发明一实施例提供的基于云数据自动下载的图像编码装置的功能模块图。本发明所述基于云数据自动下载的图像编码装置100可以安装于电子设备中。根据实现的功能，所述基于云数据自动下载的图像编码装置100可以包括候选相似图像集检索模块101、相似图像存在判断模块102、帧内编码模块103、相似图像预处理模块104、帧间预测编码模块105及压缩码流存储模块106。本发明所述模块也可以称之为单元，是指一种能够被电子设备处理器所执行，并且能够完成固定功能的一系列计算机程序段，其存储在电子设备的存储器中。所述候选相似图像集检索模块101，用于提取待编码图像的图像特征，利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集；可解释的，所述图像特征指利用视觉搜索紧凑描述子对所述待编码图像进行特征提取，得到的特征。所述视觉搜索紧凑描述子是MPEG组织对图像检索的描述子格式、特征提取和搜索过程所指定的标准，相比于一般的图像特征，视觉搜索紧凑描述子占用的字节较少，具有良好的检索及匹配性能，而且特征提取和匹配的速度较快。可理解的，所述云数据图库指用于存储图像的云数据图库。所述候选相似图像集指在所述云数据图库中提取到的可能是所述待编码图像的相似图像。本发明实施例中，所述提取待编码图像的图像特征，包括：对所述待编码图像进行兴趣点检测，得到初始局部特征点；去除所述初始局部描述子中的噪声点，得到目标局部特征点；压缩所述目标局部特征点，得到局部描述子；聚合所述目标局部特征点，得到全局描述子；根据所述局部描述子与所述全局描述子，构建所述待编码图像的图像特征。应明白的，需要对所述初始局部特征点进行筛选，去除掉噪声点，只保留重要的局部特征点。可解释的，对所述目标局部特征点进行降维、聚合以及二值化处理，可以得到所述全局描述子。对所述目标局部特征点进行变换和标量量化后，可得到所述局部描述子。对所述目标局部特征点进行压缩，可以减少字节占用，减少特征匹配时间，对所述目标局部特征点进行聚合，可以使待编码图像具有不同层次的信息描述，进而提高检索的准确性。本发明实施例中，所述利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集，包括：提取所述云数据图库中预构建的全局描述子索引表；利用所述全局描述子索引表，将所述图像特征中的全局描述子与所述云数据图库中图像的全局描述子进行匹配，得到所述云数据图库中图像与所述待编码图像的汉明距离序列；按照从小到大的顺序，在所述汉明距离序列中，提取预设数目的汉明距离，及所述预设数目的汉明距离对应的图像；将所述预设数目的汉明距离对应的图像，作为所述候选相似图像集。应明白的，需要基于多块索引结构，根据所述云数据图库中的所有图像，生成所述全局描述子的索引表，由此提高检索效率。可理解的，所述汉明距离指一种衡量特征距离的方法，表示两个特征之间的相似性。本发明实施例中，需要利用全局描述子选出预定数目的图像，通过预定数目的图像减小候选图像范围，所述预定数目可以为300个，再利用局部描述子在所述预定数目的图像中选择相似图像。本发明实施例中，所述利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集之前，所述方法还包括：提取所述云数据图库中所有图像的局部特征点；对每个所述局部特征点进行聚合，得到每个图像对应的全局描述子；根据预构建的多块索引结构，利用所述每个图像对应的全局描述子，构建全局描述子索引表。所述相似图像存在判断模块102，用于判断所述候选相似图像集中是否存在所述待编码图像的相似图像；可理解的，需要先判断所述候选相似图像集中是否存在所述相似图像，若存在，则使用帧间预测编码压缩并编码所述待编码图像，若所述候选相似图像集中不存在所述相似图像，则使用帧内编码算法进行压缩。本发明实施例中，所述判断所述候选相似图像集中是否存在所述待编码图像的相似图像，包括：获取相似图像测试集；提取所述相似图像测试集中每一个图像的局部特征点；对所述相似图像测试集中每一个图像的局部特征点，进行聚合，得到所述相似图像测试集中每一个图像的全局描述子；在所述相似图像测试集中，依次提取待比较图像；利用所述待比较图像的全局描述子，与所述相似图像测试集中的其它图像的全局描述子进行匹配，得到所述相似图像测试集中的其它图像，与所述待比较图像的汉明距离集；提取所述汉明距离集中的最大汉明距离，得到所述待比较图像的相似汉明距离；在所述相似图像测试集中所有图像的相似汉明距离中，提取最大汉明距离，得到相似汉明距离阈值；判断所述候选相似图像对应的汉明距离序列中，是否存在小于所述相似汉明距离阈值的汉明距离；若所述候选相似图像对应的汉明距离序列中，不存在小于所述相似汉明距离阈值的汉明距离，则判定所述候选相似图像集中，不存在所述待编码图像的相似图像；若所述候选相似图像对应的汉明距离序列中，存在小于所述相似汉明距离阈值的汉明距离，则判定所述候选相似图像集中，存在所述待编码图像的相似图像。可解释的，所述相似图像测试集指一组相似图像的集合。利用所述相似图像测试集得到的所述相似汉明距离阈值，对所述候选相似图像中是否存在相似图像进行判断。小于所述相似汉明距离阈值，表明存在相似图像，反之，则不存在。所述帧内编码模块103，用于若所述候选相似图像集中不存在所述待编码图像的相似图像，则利用预构建的帧内编码算法，对所述待编码图像进行编码，得到编码图像，并将所述编码图像存储于所述云数据图库中，完成所述待编码图像的编码；本发明实施例中，所述候选相似图像集中不存在所述待编码图像的相似图像，则利用现有的帧内编码算法进行编码压缩，利用不了所述云数据图库中的图像。其中帧内编码算法为已有技术，在此不再赘述。所述相似图像预处理模块104，用于若所述候选相似图像集中存在所述待编码图像的相似图像，则对所述相似图像进行预处理，得到编码参考图像及预处理参数；应明白的，所述预处理指根据所述待编码图像，对所述相似图像的形状及像素值进行调整，使其接近所述待编码图像，便于后续处理。本发明实施例中，所述若所述候选相似图像集中存在所述待编码图像的相似图像，则对所述相似图像进行预处理之前，所述方法还包括：提取所有小于所述相似汉明阈值的汉明距离，得到候选汉明距离集；依次提取所述候选汉明距离集中每一个候选汉明距离对应的图像，得到全局相似图像集；提取所述全局相似图像集中每一个图像的局部特征点；压缩所述全局相似图像集中每一个图像的局部特征点，得到所述全局相似图像集中每一个图像的局部描述子；利用所述全局相似图像集中每一个图像的局部描述子，与所述待编码图像的局部描述子进行汉明距离匹配，得到局部汉明距离序列；提取所述局部汉明距离序列中的最小汉明距离，及所述最小汉明距离对应的图像；将所述最小汉明距离对应的图像作为所述待编码图像的相似图像。可理解的，所述汉明距离越小表示所述待编码图像与所述相似图像越相似。本发明实施例中，所述对所述相似图像进行预处理，得到编码参考图像及预处理参数，包括：根据所述相似图像与所述待编码图像匹配的特征点，对所述相似图像进行分割，得到相似区块集；利用预构建的特征点匹配距离公式，求得所述相似区块集中每一个相似区块对应的最佳变换矩阵；利用所述每一个相似区块对应的最佳变换矩阵，对所述相似图像进行形变，得到形变参考图像；根据所述待编码图像与所述形变参考图像的相同位置像素值的差异，对所述形变参考图像进行光照补偿，得到所述编码参考图像；根据所述每一个相似区块对应的最佳变换矩阵，及所述光照补偿的数值差异，构建所述预处理参数。本发明实施例中，所述特征点匹配距离公式如下所示：其中，表示第i块相似区块与所述待编码图像中对应区块的特征点距离值，表示第i块相似区块在所述待编码图像中对应的位置，表示第i块相似区块在相似图像中的位置，表示变换矩阵，表示第i块相似区块在所述待编码图像中对应的特征点，表示所述相似图像中第i块相似区块的特征点。可理解的，根据透视变换原理，每四对匹配的特征点就可以计算一个变换矩阵，矩阵可以表示图像之间的旋转、平移、放缩等形变信息，由于两幅图大都存在较多的匹配的特征点，因此，可以存在多个变换矩阵。所述帧间预测编码模块105，用于利用所述编码参考图像，对所述待编码图像进行帧间预测编码，得到帧间编码残差；可理解的，所述帧间预测编码可以利用HEVC进行编码预测及图像压缩。本发明实施例中，所述利用所述编码参考图像，对所述待编码图像进行帧间预测编码，得到帧间编码残差，包括：对所述待编码图像及所述编码参考图像进行块切分，得到待编码区块图像集及参考区块图像集；在所述待编码区块图像集中依次提取待编码区块图像，计算所述待编码区块图像与所述参考区块图像集中每一块参考区块图像的均方误差，得到所述待编码图像对应的最小均方误差及相似参考区块图像；整合所述待编码图像中所有待编码区块与对应的所述相似参考区块图像的差异，得到所述帧间编码残差。应明白的，在帧间预测编码过程中，需要对所述待编码图像进行切分，再在所述相似图像中寻找与切分得到的待编码区块图像的均方误差最小的相似参考区块图像。最后根据所有相似参考区块图像与对应的待编码区块图像的差异，得到所述帧间编码残差。所述压缩码流存储模块106，用于提取所述相似图像在所述云数据图库中的图像索引，利用所述预处理参数、帧间编码残差及图像索引构建压缩码流，将所述压缩码流存储于所述云数据图库中，完成所述待编码图像的编码。本发明实施例中，在得到所述预处理参数、帧间编码残差及图像索引，既可以构建所述压缩码流，并存储在所述云数据图库中。当需要解码时，只需要根据所述图像索引，在所述云数据图库中提取所述相似图像，再利用所述预处理参数对所述相似图像进行预处理，再利用所述帧间编码残差和与处理后的相似图像，计算出所述待编码图像即可。节约了存储空间，提高检索效率。详细地，本发明实施例中所述基于云数据自动下载的图像编码装置100中能够产生如下技术效果：相比于背景技术所述：现有的网络云数据图库存在图像数据压缩效率低，检索速度慢的现象，本发明实施例通过利用所述待编码图像的图像特征，在所述云数据图库中检索出所述候选相似图像集，并进一步判断所述候选相似图像集中是否存在所述待编码图像的相似图像，若不存在，则按照一般的帧内编码算法对所述待编码图像进行压缩，若存在所述相似图像，则利用所述相似图像来压缩所述待编码图像，提高压缩效率，首先需要预处理所述相似图像，得到所述编码参考图像及预处理参数，再利用所述编码参考图像进行帧间预测编码，得到所述帧间编码残差，最后根据所述相似图像的图像索引、预处理参数及帧间编码残差，构建所述压缩码流，并存储于所述云数据图库中，完成所述待编码图像的编码操作。因此本发明提出的基于云数据自动下载的图像编码方法、装置及电子设备，可以解决网络云数据图库存在图像数据压缩效率低，检索速度慢的问题。实施例3：如图5所示，是本发明一实施例提供的实现基于云数据自动下载的图像编码方法的电子设备的结构示意图。所述电子设备1可以包括处理器10、存储器11、总线12和通信接口13，还可以包括存储在所述存储器11中并可在所述处理器10上运行的计算机程序，如基于云数据自动下载的图像编码程序。其中，所述存储器11至少包括一种类型的可读存储介质，所述可读存储介质包括闪存、移动硬盘、多媒体卡、卡型存储器、磁性存储器、磁盘、光盘等。所述存储器11在一些实施例中可以是电子设备1的内部存储单元，例如该电子设备1的移动硬盘。所述存储器11在另一些实施例中也可以是电子设备1的外部存储设备，例如电子设备1上配备的插接式移动硬盘、智能存储卡、安全数字卡、闪存卡等。进一步地，所述存储器11还可以既包括电子设备1的内部存储单元也包括外部存储设备。所述存储器11不仅可以用于存储安装于电子设备1的应用软件及各类数据，例如基于云数据自动下载的图像编码程序的代码等，还可以用于暂时地存储已经输出或者将要输出的数据。所述处理器10在一些实施例中可以由集成电路组成，例如可以由单个封装的集成电路所组成，也可以是由多个相同功能或不同功能封装的集成电路所组成，包括一个或者多个中央处理器、微处理器、数字处理芯片、图形处理器及各种控制芯片的组合等。所述处理器10是所述电子设备的控制核心，利用各种接口和线路连接整个电子设备的各个部件，通过运行或执行存储在所述存储器11内的程序或者模块，以及调用存储在所述存储器11内的数据，以执行电子设备1的各种功能和处理数据。所述总线可以是外设部件互连标准总线或扩展工业标准结构总线等。该总线可以分为地址总线、数据总线、控制总线等。所述总线被设置为实现所述存储器11以及至少一个处理器10等之间的连接通信。图5仅示出了具有部件的电子设备，本领域技术人员可以理解的是，图5示出的结构并不构成对所述电子设备1的限定，可以包括比图示更少或者更多的部件，或者组合某些部件，或者不同的部件布置。例如，尽管未示出，所述电子设备1还可以包括给各个部件供电的电源，优选地，电源可以通过电源管理装置与所述至少一个处理器10逻辑相连，从而通过电源管理装置实现充电管理、放电管理、以及功耗管理等功能。电源还可以包括一个或一个以上的直流或交流电源、再充电装置、电源故障检测电路、电源转换器或者逆变器、电源状态指示器等任意组件。所述电子设备1还可以包括多种传感器、蓝牙模块、Wi-Fi模块等，在此不再赘述。进一步地，所述电子设备1还可以包括网络接口，可选地，所述网络接口可以包括有线接口和/或无线接口，通常用于在该电子设备1与其他电子设备之间建立通信连接。可选地，该电子设备1还可以包括用户接口，用户接口可以是显示器、输入单元），可选地，用户接口还可以是标准的有线接口、无线接口。可选地，在一些实施例中，显示器可以是LED显示器、液晶显示器、触控式液晶显示器以及OLED触摸器等。其中，显示器也可以适当的称为显示屏或显示单元，用于显示在电子设备1中处理的信息以及用于显示可视化的用户界面。应该了解，所述实施例仅为说明之用，在专利申请范围上并不受此结构的限制。所述电子设备1中的所述存储器11存储的基于云数据自动下载的图像编码程序是多个指令的组合，在所述处理器10中运行时，可以实现：提取待编码图像的图像特征，利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集；判断所述候选相似图像集中是否存在所述待编码图像的相似图像；若所述候选相似图像集中不存在所述待编码图像的相似图像，则利用预构建的帧内编码算法，对所述待编码图像进行编码，得到编码图像，并将所述编码图像存储于所述云数据图库中，完成所述待编码图像的编码；若所述候选相似图像集中存在所述待编码图像的相似图像，则对所述相似图像进行预处理，得到编码参考图像及预处理参数；利用所述编码参考图像，对所述待编码图像进行帧间预测编码，得到帧间编码残差；提取所述相似图像在所述云数据图库中的图像索引，利用所述预处理参数、帧间编码残差及图像索引构建压缩码流，将所述压缩码流存储于所述云数据图库中，完成所述待编码图像的编码。具体地，所述处理器10对上述指令的具体实现方法可参考图1至图4对应实施例中相关步骤的描述，在此不赘述。进一步地，所述电子设备1集成的模块/单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读存储介质中。所述计算机可读存储介质可以是易失性的，也可以是非易失性的。例如，所述计算机可读介质可以包括：能够携带所述计算机程序代码的任何实体或装置、记录介质、U盘、移动硬盘、磁碟、光盘、计算机存储器、只读存储器。本发明还提供一种计算机可读存储介质，所述可读存储介质存储有计算机程序，所述计算机程序在被电子设备的处理器所执行时，可以实现：提取待编码图像的图像特征，利用所述图像特征在预构建的云数据图库中，进行相似检索，得到候选相似图像集；判断所述候选相似图像集中是否存在所述待编码图像的相似图像；若所述候选相似图像集中不存在所述待编码图像的相似图像，则利用预构建的帧内编码算法，对所述待编码图像进行编码，得到编码图像，并将所述编码图像存储于所述云数据图库中，完成所述待编码图像的编码；若所述候选相似图像集中存在所述待编码图像的相似图像，则对所述相似图像进行预处理，得到编码参考图像及预处理参数；利用所述编码参考图像，对所述待编码图像进行帧间预测编码，得到帧间编码残差；提取所述相似图像在所述云数据图库中的图像索引，利用所述预处理参数、帧间编码残差及图像索引构建压缩码流，将所述压缩码流存储于所述云数据图库中，完成所述待编码图像的编码。在本发明所提供的几个实施例中，应该理解到，所揭露的设备，装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述模块的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式。所述作为分离部件说明的模块可以是或者也可以不是物理上分开的，作为模块显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。另外，在本发明各个实施例中的各功能模块可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用硬件加软件功能模块的形式实现。对于本领域技术人员而言，显然本发明不限于上述示范性实施例的细节，而且在不背离本发明的精神或基本特征的情况下，能够以其他的具体形式实现本发明。最后应说明的是，以上实施例仅用以说明本发明的技术方案而非限制，尽管参照较佳实施例对本发明进行了详细说明，本领域的普通技术人员应当理解，可以对本发明的技术方案进行修改或等同替换，而不脱离本发明技术方案的精神和范围。
