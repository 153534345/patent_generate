标题title
一种晶圆的缺陷检测方法及系统
摘要abst
本发明涉及半导体制造领域，并公开了一种晶圆的缺陷检测方法及系统，其中晶圆的缺陷检测方法至少包括以下步骤：扫描预检晶圆，并根据预检晶圆的表面缺陷数量，筛选出待检晶圆；获取待检晶圆的缺陷特征信息，将缺陷特征信息的缺陷数据区分为定量数据和定性数据；根据定量数据和定性数据的相关性，将缺陷特征信息分类；获取每一类缺陷特征信息的参考数据；以及设置预设比例，根据参考数据和预设比例，从不同类的缺陷特征信息中提取采样数据，并将采样数据对应的待检晶圆用于复检。本发明提供了一种晶圆的缺陷检测方法及系统，能够提升晶圆缺陷检测的效率和准确率。
权利要求书clms
1.一种晶圆的缺陷检测方法，其特征在于，至少包括以下步骤：扫描预检晶圆，并根据所述预检晶圆的表面缺陷数量，筛选出待检晶圆；获取所述待检晶圆的缺陷特征信息，将所述缺陷特征信息的缺陷数据区分为定量数据和定性数据；根据所述定量数据和所述定性数据的相关性，将所述缺陷特征信息分类；获取每一类所述缺陷特征信息的参考数据；以及设置预设比例，根据所述参考数据和所述预设比例，从不同类的所述缺陷特征信息中提取采样数据，并将所述采样数据对应的所述待检晶圆用于复检。2.根据权利要求1所述的一种晶圆的缺陷检测方法，其特征在于，筛选所述待检晶圆的步骤包括：扫描所述预检晶圆的表面，形成表面缺陷图；获取所述表面缺陷图中异常点的数量；以及当所述异常点的数量超出待检阈值时，将所述预检晶圆作为待检晶圆。3.根据权利要求1所述的一种晶圆的缺陷检测方法，其特征在于，所述缺陷特征信息包括：所述待检晶圆的缺陷面积数据、所述待检晶圆的缺陷亮暗数据和所述待检晶圆的缺陷灰度数据，以及所述待检晶圆的亮度数据和灰度数据。4.根据权利要求1所述的一种晶圆的缺陷检测方法，其特征在于，将所述缺陷特征信息分类的步骤包括：根据所述定量数据的数值为所述定量数据赋值，根据所述定性数据的编号为所述定性数据赋值。5.根据权利要求1所述的一种晶圆的缺陷检测方法，其特征在于，将所述缺陷特征信息分类的步骤包括：获取所述缺陷数据的平均值，并根据所述平均值获取所述缺陷数据的误差值；预设所述缺陷特征信息的分类数，获取所述误差值和所述分类数的比值，并作为第一比值；以及根据所述第一比值和所述分类数的相关性，调整所述缺陷特征信息的分类数。6.根据权利要求5所述的一种晶圆的缺陷检测方法，其特征在于，调整所述分类数的步骤包括：获取所述第一比值和所述分类数的比值，并作为第二比值；以及预设拐点阈值，并递增所述分类数，直到所述第二比值小于所述拐点阈值。7.根据权利要求1所述的一种晶圆的缺陷检测方法，其特征在于，将所述缺陷数据区分为所述定量数据和所述定性数据的依据为：判断所述缺陷数据是否能够被数值化。8.根据权利要求1所述的一种晶圆的缺陷检测方法，其特征在于，提取所述采样数据的步骤包括：根据所述预设比例，按照与所述参考数据的差值由小到大从所述缺陷数据中提取数据，作为所述采样数据。9.根据权利要求1所述的一种晶圆的缺陷检测方法，其特征在于，所述预设比例为所述采样数据在所述缺陷数据中的占比。10.一种晶圆的缺陷检测系统，其特征在于，包括：预检模块，用于扫描预检晶圆，并根据预检晶圆的表面缺陷数量是否超出待检阈值，筛选出待检晶圆；分类模块，用于获取所述待检晶圆的缺陷特征信息，将所述缺陷特征信息区分为定量数据和定性数据，根据所述定量数据和所述定性数据的相关性，将所述缺陷特征信息分类；数据计算模块，用于获取每一类所述缺陷特征信息的参考数据；以及筛选模块，用于设置预设比例，根据所述参考数据和所述预设比例，从不同类的所述缺陷特征信息中提取采样数据，并将所述采样数据对应的所述待检晶圆用于复检。
说明书desc
技术领域本发明涉及半导体制造领域，特别涉及一种晶圆的缺陷检测方法及系统。背景技术光学缺陷检测是半导体行业为减少良率损失而进行的重要措施，对晶圆的检测可以及时发现线上异常，尽快止损。在产量较大的晶圆代工周期内，光学检测的抽检率非常高，如果每片扫描的晶圆都要由人工确认检测结果，则需要耗费大量的人力物力。而通过随机采样来检测晶圆，风险较大，很容易出现漏检，给线上造成不可估量的损失。发明内容本发明的目的在于提供一种晶圆的缺陷检测方法及系统，以提升晶圆缺陷检测的效率和准确率。为解决上述技术问题，本发明是通过以下技术方案实现的：本发明提供一种晶圆的缺陷检测方法，至少包括以下步骤：扫描预检晶圆，并根据所述预检晶圆的表面缺陷数量，筛选出待检晶圆；获取所述待检晶圆的缺陷特征信息，将所述缺陷特征信息的缺陷数据区分为定量数据和定性数据；根据所述定量数据和所述定性数据的相关性，将所述缺陷特征信息分类；获取每一类所述缺陷特征信息的参考数据；以及设置预设比例，根据所述参考数据和所述预设比例，从不同类的所述缺陷特征信息中提取采样数据，并将所述采样数据对应的所述待检晶圆用于复检。在本发明一实施例中，筛选所述待检晶圆的步骤包括：扫描所述预检晶圆的表面，形成表面缺陷图；获取所述表面缺陷图中异常点的数量；以及当所述异常点的数量超出所述待检阈值时，将所述预检晶圆作为待检晶圆。在本发明一实施例中，所述缺陷特征信息包括：所述待检晶圆的缺陷面积数据、所述待检晶圆的缺陷亮暗数据和所述待检晶圆的缺陷灰度数据，以及所述待检晶圆的亮度数据和灰度数据。在本发明一实施例中，将所述缺陷特征信息分类的步骤包括：根据所述定量数据的数值为所述定量数据赋值，根据所述定性数据的编号为所述定性数据赋值。在本发明一实施例中，将所述缺陷特征信息分类的步骤包括：获取所述缺陷数据的平均值，并根据所述平均值获取所述缺陷数据的误差值；预设所述缺陷特征信息的分类数，获取所述误差值和所述分类数的比值，并作为第一比值；以及根据所述第一比值和所述分类数的相关性，调整所述缺陷特征信息的分类数。在本发明一实施例中，调整所述分类数的步骤包括：获取所述第一比值和所述分类数的比值，并作为第二比值；以及预设拐点阈值，并递增所述分类数，直到所述第二比值小于所述拐点阈值。在本发明一实施例中，将所述缺陷数据区分为所述定量数据和所述定性数据的依据为：判断所述缺陷数据是否能够被数值化。在本发明一实施例中，提取所述采样数据的步骤包括：根据所述预设比例，按照与所述参考数据的差值由小到大从所述缺陷数据中提取数据，作为所述采样数据。在本发明一实施例中，所述预设比例为所述采样数据在所述缺陷数据中的占比。本发明提供了一种晶圆的缺陷检测系统，包括：预检模块，用于扫描预检晶圆，并根据预检晶圆的表面缺陷数量是否超出待检阈值，筛选出待检晶圆；分类模块，用于获取所述待检晶圆的缺陷特征信息，将所述缺陷特征信息区分为定量数据和定性数据，根据所述定量数据和所述定性数据的相关性，将所述缺陷特征信息分类；数据计算模块，用于获取每一类所述缺陷特征信息的参考数据；以及筛选模块，用于设置预设比例，根据所述参考数据和所述预设比例，从不同类的所述缺陷特征信息中提取采样数据，并将所述采样数据对应的所述待检晶圆用于复检。如上所述，本发明提供了一种晶圆的缺陷检测方法及系统，能够挑选出更具有代表性的缺陷数据，提升晶圆复检过程中具有重大缺陷、真缺陷的晶圆比例，减少参与晶圆复检的假缺陷比例，从而提升晶圆复检的有效性和效率，提升产能投入的回报率。并且，本发明提供的一种晶圆的缺陷检测方法按照预设比例从每一类缺陷特征信息中抽检靠近参考数据的缺陷数据，能够降低抽检随机性造成的漏检和误差，有效提升晶圆缺陷检测的准确率和效率，降低了抽检的风险，能够更好地平衡产能投入与晶圆的产品良率。当然，实施本发明的任一产品并不一定需要同时达到以上所述的所有优点。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例描述所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明所述晶圆的检测方法的流程图。图2为步骤S11至步骤S15的流程图。图3为本发明一实施例中表面缺陷图的示意图。图4为本发明一实施例中获取异常点的扫描分区图。图5为步骤S21至步骤S22的流程图。图6为对比像素点和对比像素区域的分布示意图。图7为步骤S31至步骤S32的流程图。图8为步骤S321至步骤S325的流程图。图9为误差值和分类数的比值与分类数的关系图。图10为步骤S41至步骤S48的流程图。图11为本发明提供的缺陷检测系统的结构示意图。图12为一种电子设备的结构原理框图。图13为一种计算机可读存储介质的结构原理框图。图中：100、样品晶圆；101、扫描区；102、盲区；103、对比像素点；104、对比像素区域；200、样品异常点；10、缺陷检测系统；11、预检模块；12、分类模块；13、数据计算模块；14、筛选模块；300、处理器；400、存储器；500、计算机指令；501、计算机可读存储介质。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其它实施例，都属于本发明保护的范围。晶圆缺陷检测可以发现晶圆上的物理缺陷和图案缺陷，并获得缺陷的位置坐标。缺陷可分为随机缺陷和系统缺陷。随机缺陷主要是由附着在晶圆表面的颗粒引起的，因此无法预测随机缺陷的位置，只能通过晶圆缺陷检测发现随机缺陷并确定随机缺陷的位置。系统缺陷是由掩模和曝光工艺的条件引起的，并且会出现在所有投射的裸片的电路图案上的相同位置。系统缺陷出现在曝光条件非常困难且需要微调的位置，因此需要晶圆缺陷检测相邻管芯的电路图案图像来发现系统缺陷。无论是随机缺陷还是系统缺陷，在晶圆缺陷检测中都需要尽快和尽可能多地发现这些缺陷，尤其是在大批量和高精度的代工批次中，晶圆缺陷检测是对生产成本和产品质量的控制中极其重要的一环。因此，本发明提供了一种晶圆的缺陷检测方法。请参阅图1所示，本发明的缺陷检测方法包括步骤S10，提供预检晶圆，扫描预检晶圆，并根据预检晶圆的表面缺陷数量是否超出待检阈值，筛选出待检晶圆。且步骤S10具体包括步骤S11~步骤S15。步骤S11、提供预检晶圆，并扫描预检晶圆的表面，形成表面缺陷图。步骤S12、获取表面缺陷图中的异常点数量。步骤S13、判断异常点数量是否超出待检阈值，当异常点的数量超出待检阈值，执行步骤S14，当异常点的数量未超出待检阈值，执行步骤S15。步骤S14、将预检晶圆作为待检晶圆。步骤S15、放出预检晶圆，并将预检晶圆用于下一制程。请参阅图2和图3所示，在本发明一实施例中，在步骤S11中，对于参与光学缺陷测试的预检晶圆，通过缺陷检测机台扫描预检晶圆的表面缺陷。其中缺陷检测机台例如是AOI光学检测设备。通过缺陷检测机台，可以获取预检晶圆表面的缺陷情况，并形成预检晶圆的表面缺陷图。如图3所示，图3为本发明一实施例中预检晶圆的表面缺陷图。表面缺陷图包括样品晶圆100和多个样品异常点200。其中样品晶圆100为参与缺陷扫描的预检晶圆，图3所示的表面缺陷图为样品晶圆100的定比例扫描图。在本实施例中，可以通过样品晶圆100的等比例扫描图获取样品晶圆100的表面特征信息。其中，样品异常点200为光学缺陷检测过程在预检晶圆表面发现的缺陷位置。在扫描预检晶圆表面形成表面缺陷图的同时，也获取了预检晶圆表面的缺陷特征信息。并且，在表面缺陷图中，能够看出样品异常点200的分布位置和样品异常点200的数量。因此在步骤S12中，获取样品异常点200的数量。在缺陷检测机台上，通过计算表面缺陷图中样品异常点200的数量，确定预检晶圆的表面缺陷数量。具体的，在表面缺陷图中，异常点为像素点，因此通过计算表面缺陷图中被标记的像素点个数就能获得异常点的数量，并在步骤S13中，判断预检晶圆的表面缺陷数量是否超出待检阈值。其中，待检阈值为检测人员预先设置的数值，待检阈值可以是参考上一轮检测、上月检测或上一季度检测出现的缺陷平均数量或缺陷最大数量设置的数值。在步骤S14中，若是预检晶圆的表面缺陷数量超出了待检阈值，则将预检晶圆作为待检晶圆。在步骤15中，若是预检晶圆的表面缺陷数量未超出待检阈值，则将预检晶圆送往下一制程。请参阅图2至图4所示，在本发明一实施例中，在步骤S11中，扫描样品晶圆100上的缺陷时，扫描面积可以是样品晶圆100面积的例如25%~75%。在本实施例中，扫描面积例如为样品晶圆100面积的50%。样品晶圆100包括扫描区101和盲区102。在本实施例中，扫描区101例如为矩形，且多个扫描区101等间距分布。在本实施例中，盲区102为样品晶圆100上除扫描区101以外的区域。样品晶圆100包括工作部件区域和边角料区域。在其他实施例中，盲区102可以是样品晶圆100上工作部件区域上除扫描区101以外的区域，盲区102也可以大体上是矩形或长条形，且扫描区101和盲区102可以是等间距分布。其中，扫描区101面积与样品晶圆100的面积之比为扫描率。在预检过程中，扫描率可以由检测人员预先设置。请参阅图2至图5所示，在本发明一实施例中，由于是机器扫描缺陷，在表面缺陷图中，部分被扫描到的缺陷是假缺陷，且机器无法识别具体的缺陷原因，因此将部分待检晶圆中用于复检，以检测出待检晶圆的表面缺陷类型，再将检测结果反馈给线上，以提升晶圆的制造良率。因此在步骤S11中，在缺陷检测机台扫描预检晶圆的过程中，获取并记录预检晶圆的表面缺陷信息。其中，预检晶圆的表面缺陷信息可以被记录为缺陷信息文件，例如klarf文件，以用于信息追溯和缺陷信息的检验。本发明的缺陷检测方法包括步骤S20，获取待检晶圆的缺陷特征信息，将缺陷特征信息区分为定量数据和定性数据。具体的，步骤S20包括步骤S21和步骤S22。步骤S21、获取待检晶圆的缺陷特征信息，以及缺陷特征信息的缺陷数据。步骤S22、将待检晶圆的缺陷数据划分为定性数据和定量数据。请参阅图2和图5所示，在本发明一实施例中，在步骤S11中，通过光学扫描待检晶圆，获得了多种待检晶圆的参数，例如待检晶圆的面积、异常点的数量、异常点的灰度和亮度等等。而过多的参数可能会造成过度拟合，反而影响分类的准确性，因此在步骤S21中，获取在步骤S11中缺陷检测机台生成的缺陷信息文件，并获取待检晶圆的缺陷特征信息。其中，在步骤S21中获取的缺陷特征信息包括待检晶圆表面缺陷的面积数据、待检晶圆表面缺陷的亮暗数据、异常点和参照点之间的灰度差数据、待检晶圆上缺陷的最大灰度差数据和表面缺陷图的平均亮度，以及表面缺陷图的最大亮度差数据。在本实施例中，待检晶圆表面缺陷的面积数据可以是表面缺陷图中全部异常点的面积总和数值。在其他实施例中，待检晶圆表面缺陷的面积数据也可以是表面缺陷图中全部异常点的面积总和数值与待检晶圆面积的比值。其中，在表面缺陷图中，异常点为像素点，因此通过计算被标记的像素点的总面积，可以获得待检晶圆表面缺陷的面积数据。在步骤S22中，将可以数值化的缺陷特征信息划分为定量数据，将不可数值化的缺陷特征信息划分为定性数据。具体的，在本实施例中，将待检晶圆表面缺陷的面积数据划分为定量数据。请参阅图2、图5和图6所示，在本发明一实施例中，在步骤S21中，待检晶圆表面缺陷的亮暗数据包括异常点的亮暗分类和异常点和邻近待检晶圆区域的亮暗对比值。具体的，预设亮度阈值，当异常点的亮度大于等于亮度阈值，则异常点被划分为亮点。当异常点的亮度小于亮度阈值，则异常点被划分为暗点。在步骤S22中，将异常点的亮暗分类划分为定性数据。在本实施例中，异常点和邻近待检晶圆区域的亮暗对比数值，可以是异常点亮度与邻近的像素点的亮度之间的比值，也可以是异常点与邻近的待检晶圆区域中多个像素点的平均亮度之间的亮度比值。具体的，在本实施例中，在步骤S21中，获取异常点的亮暗对比值的步骤包括在样品晶圆100上获取对比像素点103，并计算多个对比像素点103的平均亮度，计算样品异常点200的亮度与多个对比像素点103平均亮度的比值，从而获得样品异常点200的亮暗对比值。其中，对比像素点103为与样品异常点200相邻且边缘接触的像素点。在本发明另一实施例中，在步骤S21中，在样品晶圆100上获取对比像素区域104，并计算对比像素区域104的平均亮度。计算样品异常点200的亮度和对比像素区域104平均亮度的比值，从而获得样品异常点200的亮暗对比值。在本实施例中，在步骤S22中，将异常点与邻近的待检晶圆区域的亮暗对比值定义为定量数据。在本发明另一实施例中，也可以根据异常点的亮度和邻近的待检晶圆区域的亮暗对比值定义为定性数据。具体的，当异常点的亮度大于等于多个对比像素点103的平均亮度或对比像素区域104的平均亮度时，将异常点定性为局部亮点。当异常点的亮度小于多个对比像素点103的平均亮度或对比像素区域104的平均亮度时，将异常点定性为局部暗点。在本实施例中，对比像素区域104为以样品异常点200为中心的矩形，且对比像素区域104例如为像素点个数为5×5的矩形。在其他实施例中，对比像素区域104也可以是例如3×3、例如4×4、例如3×4等尺寸的矩形。请参阅图2、图5和图6所示，在本发明一实施例中，在步骤S21中，在表面缺陷图中，待检晶圆上的缺陷特征信息包括异常点和参照点之间的灰度差值。其中，参照点可以由检测人员选取，也可以根据待检晶圆表面的灰度平均值选定。具体的，获取待检晶圆上像素点的平均灰度，并将灰度数值最接近平均灰度的像素点作为参照点。具体的，可以计算待检晶圆上像素点灰度与平均灰度的差值，获取灰度差值最小的像素点。并且，当灰度差值最小的像素点有多个时，可以随机选取其中一个像素点作为参照点。在本实施例中，在步骤S22中，将异常点和参照点之间的灰度差值划分为定量数据。也可以将异常点和参照点之间的灰度差异划分为定性数据。例如，比较异常点和参照点的灰度，当异常点的灰度大于等于参照点的灰度时，将异常点划分为偏灰点，当异常点的灰度小于参照点的灰度时，将异常点划分为偏白点。在本实施例中，待检晶圆上的缺陷特征信息包括待检晶圆上缺陷的最大灰度差值。具体的，获取异常点的灰度，并计算灰度最大的异常点和灰度最小的异常点之间的灰度差，从而获得待检晶圆上缺陷的最大灰度差值。在步骤S22中，将待检晶圆上缺陷的最大灰度差值划分为定量数据。请参阅图2、图5和图6所示，在本发明一实施例中，在步骤S21中，获取表面缺陷图的平均亮度，以及表面缺陷图的最大亮度差值。其中，表面缺陷图的平均亮度指的是表面缺陷图中全部像素点的亮度平均值。表面缺陷图的最大亮度差值指的是表面缺陷图中亮度最大的像素点和亮度最小的像素点之间的亮度差值。在步骤S22中，将表面缺陷图的平均亮度和表面缺陷图的最大亮度差值划分为定量数据。在本发明中，获取表面缺陷图的平均亮度和最大亮度差值，以衡量待检晶圆本体亮度，便于比较多个待检晶圆的亮度数据，并便于比较异常点和待检晶圆的亮度区别。且在本实施例中，在获取异常点的亮暗分类时，亮度阈值可以根据待检晶圆表面缺陷图的平均亮度设置，也可以由检测人员预设。在本发明中，获取待检晶圆表面缺陷的面积数据，以便于确认待检晶圆的缺陷类型，有利于筛选出具备代表性的待检晶圆。获取异常点和参照点之间的灰度差值以及待检晶圆上缺陷的最大灰度差值，以便于确定异常点和待检晶圆之间的偏差情况，以及确定异常点之间是否存在联系，有利于确定过滤掉假缺陷，挑选出具有代表性和问题概率更大的待检晶圆。请参阅图5和图7所示，在本发明一实施例中，在步骤S21和步骤S22中获得的数据包括表面缺陷图的亮度和灰度、异常点的亮度和灰度、缺陷的面积大小，以及异常点和表面缺陷图的亮度和灰度的对比情况。在多种数据、大批量待检晶圆共同参与检测的情况下，仅通过获取数据的均值不能代表数据整体，也不利于挑选出具备代表性的缺陷。若是将全部的待检晶圆都用于复检，由于光学检测过程中易出现假缺陷，全部的待检晶圆都用于复检会造成产能负担，不利于产能和良率的平衡。而随机抽取部分待检晶圆用于复检，不仅抽取的比例难以确定，抽取待检晶圆得到的复检结果也是随机的，不代表整体，因此真缺陷容易被放过，或是在后续的几个制程中才被发现，造成成本损失。而在本发明中，根据待检晶圆容易生成的缺陷类型和缺陷代表的与特征形成数据，再对这些数据进行分析。因此本发明所述晶圆的缺陷检测方法还包括步骤S30，根据定量数据和定性数据的相关性，将缺陷特征信息分类。在步骤S30中，将缺陷数据分类。其中，缺陷数据包括定量数据和定性数据。具体的，步骤S30包括步骤S31和步骤S32。步骤S31、为定量数据和定性数据赋值。步骤S32、将缺陷数据分类。请参阅图7所示，在本发明一实施例中，在步骤S31中，定量数据包括数值参数，因此为定量数据赋值时，以定量数据的数值参数赋值。在本实施例中，定量数据包括待检晶圆表面缺陷的面积数据、待检晶圆表面缺陷的亮度数据、异常点和参照点之间的灰度差值、待检晶圆上缺陷的最大灰度差值和表面缺陷图的平均亮度，以及表面缺陷图的最大亮度差值。在为定性数据赋值时，被划分为定性数据的缺陷特征信息包括多个定性类型。在步骤S31中，对缺陷特征信息的定性类型编号，并以编号数值为对应的定性数据赋值。在本实施例中，将多种缺陷特征信息一起编号，并将多种缺陷特征信息的定性类型依次排序，以区分不同的缺陷特征信息。以异常点的亮暗分类为例，异常点的亮暗分类包括例如2个定性类型，如亮点的定性类型和暗点的定性类型。将亮点的定性类型编号为例如1，将暗点的定性类型编号为例如2，因此当定性数据为亮点，则定性数据的数值为例如1，当定性数据为暗点，则定性数据的数值为例如2。以异常点的亮度和邻近的待检晶圆区域的亮暗对比值为例，亮暗对比值包括例如2个定性类型，如局部亮点的定性类型和局部暗点的定性类型。将局部亮点的定性类型编号为例如3，将局部暗点的定性类型编号为例如4，因此当定性数据为局部亮点，则定性数据的数值为例如3，当定性数据为局部暗点，则定性数据的数值为例如4。以异常点和参照点之间的灰度差异为例，异常点和参照点之间的灰度差异包括例如2个定性类型，将偏灰点的定性类型编号为例如5，将偏白点的定性类型编号为例如6。请参阅图7和图8所示，在本发明一实施例中，在步骤S32中，预设不同的分类数，并根据不同分类数下定量数据和定型数据的误差最小值，确定分类数。具体的，步骤S32包括步骤S321~步骤S325。步骤S321、预设分类数和拐点阈值。步骤S322、根据定量数据和定性数据的数值，计算缺陷特征信息的误差值。步骤S323、获取误差值和分类数的比值。步骤S324、判断误差值和分类数的比值是否小于拐点阈值，若是误差值和分类数的比值大于等于拐点阈值，则返回步骤S321。步骤S325、若是误差值和分类数的比值小于误差阈值，记录此时缺陷特征信息的分类数。请参阅图7和图8所示，在本发明一实施例中，分类数可以代表定性数据和定量数据在数据处理过程中对应的缺陷特征数目。在步骤S321中，按照数值从小到大预设分类数。在步骤S322中，以分类数为例如1开始获取缺陷特征信息的误差值，且误差值例如为定量数据和定性数据的误差平方和。具体的，误差值的计算方法可以依据式。；请参阅式，在式中，C为缺陷特征信息的类，Ci为第i个类，具体的，缺陷特征信息包括多个类型，在本实施例中，缺陷特征信息的类包括例如待检晶圆表面缺陷的面积数据、待检晶圆表面缺陷的亮暗数据、异常点和参照点之间的灰度差值、待检晶圆上缺陷的最大灰度差值和表面缺陷图的平均亮度，以及表面缺陷图的最大亮度差值等。其中具有多类灰度数据和亮度数据，在数据处理的过程中，根据数据的误差程度来确定实际需要处理的数据类型数目，即缺陷特征信息的类型。在式中，p是Ci中的定量数据或定性数据，mi是Ci中定量数据或定性数据的均值。具体的，可以通过p和mi的误差平方和来获取误差值。在式中，n为分类数，分类数代表缺陷特征信息的类型数目。其中，可以预设分类数为1，再逐步增加分类数，直到在步骤S324中，以误差值和分类数的比值为第一比值，以第一比值和分类数的比值为第二比值，当第二比值小于拐点阈值，不再递增分类数，以此时的分类数为缺陷特征信息的分类数。在本实施例中，亮度数据和灰度数据为待检晶圆的光学数据，而缺陷面积和光学数据显然是不同的数据类型。因此也可以预设分类数为例如2，再逐步增加分类数的数目。在式中，SSE为误差值，在本实施例中，误差值例如是定量数据和定性数据的误差平方和。具体的，先获取不同类的定量数据或定性数据的均值，再综合多个类获取误差平方和，从而获得稳定且准确的误差值。本发明不限定通过误差平方和来获取定量数据和定性数据的误差值，在本发明的其他实施例中，也可以通过例如绝对误差和相对误差的计算来获取误差值。请参阅图7至图9所示，在本发明一实施例中，可以以分类数为横坐标，SSE/n的数值为纵坐标，建立坐标系，并根据不同分类数时SSE/n的数值建立对比图。当对比图中图像出现拐点时，获取拐点对应的分类数。如图9所示，对比图为折线图，且当n=3时，图像的斜率发生显著变化，因此n=3时图像出现拐点，则分类数为3。而根据斜率来观察变化不适用于分类数多以及数据量大、斜率接近的情况。因此在步骤S323中，获取误差值和分类数的比值，即SSE/n的数值，并比较SSE/n和拐点阈值大小。其中，拐点阈值由检测人员预设。在本实施例中，拐点阈值例如为0.2~0.8。若是误差值和分类数的比值大于等于拐点阈值，则递增分类数，直到误差值和分类数的比值小于拐点阈值，并在步骤S325中，获取此时缺陷特征信息的分类数。根据数值大小和数值类型，能获取缺陷特征信息被分类后，每一类缺陷特征信息的类型，例如为亮度分类、灰度分类和面积分类等等，又例如为低亮度差值分类和高灰度差值分类等等，以便于检测人员对项目进行识别和追溯。在本实施例中，运用于缺陷检测机台中时，也可以以第一缺陷分类、第二缺陷分类、第三缺陷分类至第n缺陷分类等名称来区分每个分类。这不影响本发明提取采样数据，挑选待检晶圆进入复检，因此可以节约很多机器的学习处理时间，提升分类效率。请参阅图1、图8和图10所示，在本发明一实施例中，在步骤S325中获得分类数。对于同一批待检晶圆，分类数发生改变后，每一类的均值和质心都会发生改变。因此本发明的晶圆缺陷检测方法包括步骤S40，获取每一类缺陷特征信息的参考数据。在本实施例中，可以预设参考数据，再根据参考数据与同一类内的缺陷数据的差值之和来确定参考数据的数据预设误差。具体的，步骤S40可以包括步骤S41~步骤S48。步骤S41、对同一类缺陷特征信息内的缺陷数据进行排序。步骤S42、预设参考数据Q=pi，初始时i=1步骤S43、获取参考数据pi与其余缺陷数据的差值之和，作为第一差值Z1，获取缺陷数据pi+1与其余缺陷数据的差值之和Z2，作为第二差值Z2。步骤S44、判断第一差值是否大于第二差值，即是否有Z1＞Z2，若Z1＞Z2，则执行步骤S45，若Z1＜Z2，则执行步骤S46。步骤S45、更新参考数据Q=pi+1。步骤S46、判断预设参考数据时是否已遍历缺陷数据。步骤S47、更新i=i+1。步骤S48、存储参考数据。请参阅图8和图10所示，在本发明一实施例中，在步骤S41中，对同一类的缺陷数据进行排序。具体的，一类缺陷特征信息例如包括k条缺陷数据，可以将缺陷数据从1开始排序，排序至第k条缺陷数据。在步骤S42中，预设参考数据Q=pi。其中，i代表缺陷数据在缺陷特征信息中的排序，p为缺陷数据。在本实施例中，从排序为1的缺陷数据开始计算。在步骤S43中，获取参考数据pi与其余缺陷数据的差值之和，作为第一差值Z1。获取缺陷数据pi+1与其余缺陷数据的差值之和Z2，作为第二差值Z2。在本实施例中，预设参考数据为p1，计算参考数据p1与其余缺陷数据的差值之和。具体的，分别计算参考数据p1和缺陷数据p2至缺陷数据pk的差值，再将差值累和，获得第一差值Z1。分别计算缺陷数据p2和缺陷数据p1的差值，以及缺陷数据p2和缺陷数据p3至pk的差值，再将差值累和，获得第二差值Z2。在步骤S44中，判断第一差值和第二差值的大小。若是第一差值大于第二差值，则在步骤S45中将参考数据更新为pi+1。若是第一差值小于第二差值，则保持参考数据不变，并执行步骤S46。在步骤S44和步骤S45中，判断当前的参考数据和下一参考数据哪一缺陷数据的误差更小，更接近分类后的缺陷特征信息的质心。在步骤S46中，判断在步骤S42中预设参考数据时，是否全部的缺陷数据已遍历。具体的，在本实施例中，递增式地对缺陷数据进行取值的情况下，也可以判断是否已经具有参考数据pk的记录，从而判断是否已经遍历缺陷数据。若是缺陷数据已被遍历，则执行步骤S48，存储当前的参考数据，以便于后续调用。若是缺陷数据未被遍历，则执行步骤S47，更新预设参考数据时的缺陷数据排序，即i=i+1。在本实施例中，此时在步骤S42中，参考数据为p2，继续执行步骤S43至步骤S46。请参阅图8和图10所示，在本发明另一实施例中，在获取参考数据时，也可以通过建立参照图，来获取每一类缺陷数据的质心。具体的，在步骤S41中对缺陷数据进行排序后，以缺陷特征信息的分类数为横坐标，以缺陷数据的数值为纵坐标，建立二维坐标系，并形成参照图。在参照图中，缺陷数据体现为图中的坐标点。在步骤S42中，可以随机从图中选取坐标点，作为参考数据对应的参考坐标点。再在步骤S43中，计算参考坐标点和其余坐标点的距离之和。遍历坐标点，将到其余所有坐标点距离最短的坐标点作为参考坐标点，参考坐标点对应的纵坐标数值为参考数据。在本实施例中，获得参考数据的过程更加直观，且也能更直观地看出不同的类之间的数据差异和联系。在步骤S40中，可以对分类后的缺陷特征信息进行命名，以便于后续形成分类文件。请参阅图1所示，在本发明一实施例中，确定分类数以及每一类缺陷特征信息的参考数据后，按照预设比例从每一类缺陷特征信息中挑出缺陷数据，并挑出缺陷数据对应的待检晶圆。本发明的晶圆缺陷检测方法包括步骤S50，设置预设比例，根据参考数据和预设比例，从不同类的缺陷数据中提取采样数据，并将采样数据对应的待检晶圆用于复检。在步骤S50中，预设比例为采样数据在缺陷数据中的占比，且预设比例可以根据不同类缺陷特征信息的缺陷数据条数设置。具体的，采样数据可以是缺陷数据的例如30%~60%。其中，预设比例可以恒定不变，也可以根据不同类的缺陷特征信息的缺陷数据量确定。在本实施例中，预设比例例如为30%。例如有3类缺陷特征信息，且3类缺陷特征信息分别包括例如100条缺陷数据、例如120条缺陷数据和例如300条缺陷数据。则获取采样数据时，采样数据可以是例如30条、例如36条和例如90条。在本发明的其他实施例中，当缺陷数据的数据量较大时，也可以设置更大的预设比例。例如300条缺陷数据的预设比例可以设置为60%，例如120条缺陷数据的预设比例可以设置为50%，从而挑选出更具有代表性的缺陷数据，提升参与晶圆复检的真缺陷比例，减少参与晶圆复检的假缺陷比例，从而提升复检的有效性，提升产能投入的回报率。本发明按照预设比例从每一类缺陷特征信息中抽检靠近参考数据的缺陷数据，能够降低抽检随机性造成的漏检和误差，有效提升检测的准确率和效率。请参阅图1所示，在本发明一实施例中，不同类缺陷特征信息中缺陷数据集中的位置具有真缺陷的可能性更大，并且更易挑选出具备代表性的缺陷数据。因此，在步骤S50中，根据不同类缺陷特征信息的缺陷数据条数设置预设比例后，可以以参考数据为中心挑出缺陷数据。具体的，当确定采样数据的条数后，按照与参考数据的差值从小到大挑出采样数据。当多个缺陷数据和参考数据的差值相等，而采样数据的剩余容量不足时，则可从多个差值相等的缺陷数据中随机选出采样数据。其中，多类挑选出的缺陷数据可能对应同一待检晶圆。因此在挑选待检晶圆时，优先选出包括缺陷数据类型多的待检晶圆。在本实施例中，可以根据被采样的待检晶圆以及待检晶圆的缺陷特征信息生成采样文件，采样文件可以是能被复检的检测机台或是预检的缺陷检测机台读取的文件，例如klarf文件。将采样文件保存并上传到缺陷检测机台中，当预检完成后，挑选出待检晶圆后，缺陷检测机台根据生成的采样文件，调取部分待检晶圆进行复检。其中，复检可以是通过扫描电镜，例如扫描电子显微镜等设备获取待检晶圆表面的照片，使检测人员能够清晰看出待检晶圆是什么样的缺陷，并将准确的缺陷信息反馈给对应的工序，从而改善工艺，及时减损。请参阅图11所示，本发明还提供一种晶圆的缺陷检测系统10，缺陷检测系统10包括预检模块11、分类模块12、数据计算模块13和筛选模块14。其中，预检模块11用于扫描预检晶圆，并根据预检晶圆的表面缺陷数量是否超出待检阈值，筛选出待检晶圆。分类模块12用于获取待检晶圆的缺陷特征信息，将缺陷特征信息区分为定量数据和定性数据，根据定量数据和定性数据的相关性，将缺陷特征信息分类。数据计算模块13用于获取每一类缺陷特征信息的参考数据。筛选模块14用于根据参考数据和预设比例，从不同类的缺陷特征信息中提取采样数据，并将采样数据对应的待检晶圆用于复检。请参阅图12所示，本发明还提出一种电子设备，所述电子设备包括处理器300和存储器400，所述存储器400存储有程序指令，所述处理器300运行程序指令实现上述的晶圆的缺陷检测方法。所述处理器300可以是通用处理器，包括中央处理器、网络处理器等；还可以是数字信号处理器、专用集成电路或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件；所述存储器400可能包含随机存取存储器，也可能还包括非易失性存储器，例如至少一个磁盘存储器。所述存储器400也可以为随机存取存储器类型的内部存储器，所述处理器300、存储器400可以集成为一个或多个独立的电路或硬件，如：专用集成电路。需要说明的是，上述的存储器400中的计算机程序可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读存储介质501中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例方法的全部或部分步骤。请参阅图13所示，本发明还提出一种计算机可读存储介质501，所述计算机可读存储介质501存储有计算机指令500，所述计算机指令500用于使所述计算机执行上述的晶圆的缺陷检测方法。计算机可读存储介质501可以是，电子介质、磁介质、光介质、电磁介质、红外介质或半导体系统或传播介质。计算机可读存储介质501还可以包括半导体或固态存储器、磁带、可移动计算机磁盘、随机存取存储器、只读存储器、硬磁盘和光盘。光盘可以包括光盘-只读存储器、光盘-读/写和DVD。本发明提供了一种晶圆的缺陷检测方法及系统，先扫描预检晶圆，再根据预检晶圆的表面缺陷数量是否超出待检阈值，筛选出待检晶圆。再根据待检晶圆的缺陷数据，设置筛选条件，从待检晶圆中筛选出部分晶圆用于复检。具体的，设置筛选条件的过程包括获取待检晶圆的缺陷特征信息，将缺陷特征信息区分为定量数据和定性数据，根据定量数据和定性数据的相关性，将缺陷特征信息分类。再获取每一类缺陷特征信息的参考数据，再根据参考数据和预设比例，从不同类的缺陷特征信息中提取采样数据，并将采样数据对应的待检晶圆用于复检。本发明提供的缺陷检测方法适用于晶圆的全制程，可以设置在每一个制程后的检测站点中，例如黄光制程、切割制程、打磨制程等等，从而提升晶圆的良率，降低成本，提升产能回报率。以上公开的本发明实施例只是用于帮助阐述本发明。实施例并没有详尽叙述所有的细节，也不限制该发明仅为所述的具体实施方式。显然，根据本说明书的内容，可作很多的修改和变化。本说明书选取并具体描述这些实施例，是为了更好地解释本发明的原理和实际应用，从而使所属技术领域技术人员能很好地理解和利用本发明。本发明仅受权利要求书及其全部范围和等效物的限制。
