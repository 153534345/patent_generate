标题title
一种玻璃升降器防夹模块模拟霍尔信号生成方法与系统
摘要abst
本发明公开了一种玻璃升降器防夹模块模拟霍尔信号生成方法，包括：S100、依据实际路谱图，通过霍尔信号生成模块反馈得到电机方向信号和脉冲数，根据脉冲数计算得到脉宽信号，根据电机方向信号和脉宽信号计算得到霍尔信号；S200、判断脉宽值是否为0，若为0，霍尔信号保持原值，跳转至S100并重新执行S100；若不为0，则进行电机方向信号判断；S300、判断电机转动方向，调整脉宽计数值t；当t≥T‑1时，将霍尔信号反向，生成脉冲数作为脉宽计数结束的标志信息并输出；S400、将作为脉宽计数结束的标志信息的脉冲数输入到路谱图中，获取对应的脉宽值并计算得到霍尔信号。本发明解决了现有仿真阶段所存在的多个技术问题，保证了在仿真阶段有较好的可靠性和准确性。
权利要求书clms
1.一种玻璃升降器防夹模块模拟霍尔信号生成方法，其特征在于，包括以下步骤：S100、依据实际的路谱图，通过霍尔信号生成模块反馈得到电机方向信号和脉冲数，根据脉冲数计算得到此时的脉宽信号，根据电机方向信号和脉宽信号计算得到霍尔信号；S200、判断脉宽值是否为0，若为0，霍尔信号保持原值，跳转至S100并重新执行S100；若不为0，则进行电机方向信号判断；S300、根据电机方向信号数值，判断电机转动方向，计算此时电机停转时间，并根据停转时间调整实时脉宽计数值t；当t≥T-1时，将霍尔信号反向，生成脉冲数作为脉宽计数结束的标志信息并输出；其中,T为脉宽值；S400、将作为脉宽计数结束的标志信息的脉冲数输入到路谱图中，获取对应的脉宽值并跳转至S100计算得到霍尔信号。2.根据权利要求1所述的一种玻璃升降器防夹模块模拟霍尔信号生成方法，其特征在于，S300具体包括：S310、若输入的电机方向信号为0，则表示电机处于停转状态，此时进行停转时间time的计算，将time的值增加1，同时标志此时位置为0；S320、若输入的电机方向信号为1，则表示电机正转，玻璃处于上升状态，将标志位置为1，判断此时的电机停转时间time，当电机停转时间time大于设定阈值时，则将停转时间time置0，且将实时脉宽计数值t置0；否则仅将停转时间置0；当t＜T-1时，将t的值增加1，且当t等于T/2时，将霍尔信号反向，当t不等于T/2时，跳转至S100并重新执行S100；当t≥T-1时，将霍尔信号反向，同时脉冲数减1，并输出一个脉宽计数结束的标志信息，进入S400；S330、若输入的电机方向信号为-1，则表示电机反转，玻璃处于下降状态，判断标志位是否为-1，若不为-1，则将t置0，将标志位置为-1；若标志位为-1，则进入S400；当t＜T-1时，将t的值增加1，当t等于T/2时，将霍尔信号反向，当t不等于T/2时，跳转至S100并重新执行S100；当t≥T-1时，将霍尔信号反向，同时脉冲数加1，并输出一个脉宽计数结束的标志信息，跳转至S100并重新执行S100。3.根据权利要求2所述的一种玻璃升降器防夹模块模拟霍尔信号生成方法，其特征在于，设置两霍尔传感器，当两霍尔传感器与电机中心连线夹角为α时，有：S100、依据实际的路谱图，通过霍尔信号生成模块反馈得到电机方向信号和脉冲数，根据脉冲数计算得到此时的脉宽信号，根据电机方向信号和脉宽信号计算得到霍尔信号；S200、判断脉宽值是否为0，若为0，霍尔信号保持原值，跳转至S100并重新执行S100；若不为0，则进行电机方向信号判断；S340、若输入的电机方向信号为0，则表示电机处于停转状态，此时进行停转时间time的计算，将time的值增加1，同时标志此时位置为0；S350、若输入的电机方向信号为1，则表示电机正转，玻璃处于上升状态，此时标志位置为1，判断此时的电机停转时间time，当电机停转时间time大于设定阈值时，则将停转时间time置0，且将实时脉宽计数值t置0；否则仅将停转时间置0；当t＜T-1时，将t的值增加1，且当t等于*T/90或α*T/90时，将霍尔信号反向，当t不等于*T/90或α*T/90时，跳转至S100并重新执行S100；当t≥T-1时，将t置为0，跳转至S100并重新执行S100；S360、若输入的电机方向信号为-1，则表示电机反转，玻璃处于下降状态，判断标志位是否为-1，若不为-1，则将t置0，且将标志位置为-1；若标志位为-1，则跳转至S100并重新执行S100；当t＜T-1时，t的值增加1，且当t等于*T/90或*T/90时，将霍尔信号反向,当t不等于*T/90或*T/90时，跳转至S100并重新执行S100；当t＞＝T-1时，将脉宽计数值t置为0，跳转至S100并重新执行S100。4.根据权利要求3所述的一种玻璃升降器防夹模块模拟霍尔信号生成方法，其特征在于，当其中一个霍尔传感器的霍尔信号产生跳变时，此时两霍尔传感器的霍尔信号的相位差位。5.根据权利要求2-4任一项所述的一种玻璃升降器防夹模块模拟霍尔信号生成方法，其特征在于，当t置为0后，电机位置回到初始位置。6.一种使用如权利要求1所述的一种玻璃升降器防夹模块模拟霍尔信号生成方法的系统，其特征在于，包括至少一个霍尔传感器，电机，霍尔信号生成模块和控制器；其中，霍尔传感器，用于采集电机转动时生成的霍尔信号；霍尔信号生成模块，用于依据实际的路谱图反馈得到电机方向信号和脉冲数；控制器，用于根据脉冲数计算得到此时的脉宽信号，根据电机方向信号和脉宽信号计算得到霍尔信号；判断脉宽值是否为0，若为0，霍尔信号保持原值，根据电机方向信号和脉宽信号计算得到霍尔信号；若不为0，则进行电机方向信号判断；根据电机方向信号数值，判断电机转动方向，计算此时电机停转时间，并根据停转时间调整实时脉宽计数值t；当t≥T-1时，将霍尔信号反向，生成脉冲数作为脉宽计数结束的标志信息并输出；其中,T为脉宽值；将作为脉宽计数结束的标志信息的脉冲数输入到路谱图中，获取对应的脉宽值并计算得到霍尔信号。7.根据权利要求6所述的系统，其特征在于，判断电机转动方向的具体步骤包括：若输入的电机方向信号为0，则表示电机处于停转状态，此时进行停转时间time的计算，将time的值增加1，同时标志此时位置为0；若输入的电机方向信号为1，则表示电机正转，玻璃处于上升状态，将标志位置为1，判断此时的电机停转时间time，当电机停转时间time大于设定阈值时，则将停转时间time置0，且将实时脉宽计数值t置0；否则仅将停转时间置0；当t＜T-1时，将t的值增加1，且当t等于T/2时，将霍尔信号反向，当t不等于T/2时，根据电机方向信号和脉宽信号计算得到霍尔信号；当t≥T-1时，将霍尔信号反向，同时脉冲数减1，并输出一个脉宽计数结束的标志信息，根据电机方向信号和脉宽信号计算得到霍尔信号；若输入的电机方向信号为-1，则表示电机反转，玻璃处于下降状态，判断标志位是否为-1，若不为-1，则将t置0，将标志位置为-1；若标志位为-1，则根据电机方向信号和脉宽信号计算得到霍尔信号；当t＜T-1时，将t的值增加1，当t等于T/2时，将霍尔信号反向，当t不等于T/2时，根据电机方向信号和脉宽信号计算得到霍尔信号；当t≥T-1时，将霍尔信号反向，同时脉冲数加1，并输出一个脉宽计数结束的标志信息，根据电机方向信号和脉宽信号计算得到霍尔信号。8.根据权利要求7所述的系统，其特征在于，设置两霍尔传感器，当两霍尔传感器与电机中心连线夹角为α时，获取霍尔信号的工作流程为：依据实际的路谱图，通过霍尔信号生成模块反馈得到电机方向信号和脉冲数，根据脉冲数计算得到此时的脉宽信号，根据电机方向信号和脉宽信号计算得到霍尔信号；判断脉宽值是否为0，若为0，霍尔信号保持原值，根据电机方向信号和脉宽信号计算得到霍尔信号；若不为0，则进行电机方向信号判断；若输入的电机方向信号为0，则表示电机处于停转状态，此时进行停转时间time的计算，将time的值增加1，同时标志此时位置为0；若输入的电机方向信号为1，则表示电机正转，玻璃处于上升状态，此时标志位置为1，判断此时的电机停转时间time，当电机停转时间time大于设定阈值时，则将停转时间time置0，且将实时脉宽计数值t置0；否则仅将停转时间置0；当t＜T-1时，将t的值增加1，且当t等于*T/90或α*T/90时，将霍尔信号反向，当t不等于*T/90或α*T/90时，根据电机方向信号和脉宽信号计算得到霍尔信号；当t≥T-1时，将t置为0，根据电机方向信号和脉宽信号计算得到霍尔信号；若输入的电机方向信号为-1，则表示电机反转，玻璃处于下降状态，判断标志位是否为-1，若不为-1，则将t置0，且将标志位置为-1；若标志位为-1，则根据电机方向信号和脉宽信号计算得到霍尔信号；当t＜T-1时，t的值增加1，且当t等于*T/90或*T/90时，将霍尔信号反向,当t不等于*T/90或*T/90时，根据电机方向信号和脉宽信号计算得到霍尔信号；当t＞＝T-1时，将脉宽计数值t置为0，根据电机方向信号和脉宽信号计算得到霍尔信号。9.根据权利要求8所述的系统，其特征在于，当其中一个霍尔传感器的霍尔信号产生跳变时，此时两霍尔传感器的霍尔信号的相位差位。10.根据权利要求7-9任一项所述的系统，其特征在于，当t置为0后，电机位置回到初始位置。
说明书desc
技术领域本发明属于汽车电子领域，具体涉及一种玻璃升降器防夹模块模拟霍尔信号生成方法与系统。背景技术随着汽车电子技术的不断发展汽车行业的不断进步，人类生活水平的快速提高，为了满足人类对安全便利的需要，现代汽车往往更加注重车辆的舒适性和安全性。随着汽车电子系统的技术积累和普及，现代家用轿车往往都配有车窗防夹系统。对于用户而言，安全性要求也是他们最为关心的一点，而车窗防夹已然成为实现车辆安全性必不可少的一个重要组成部分。现阶段的玻璃升降器驱动电机普遍采用霍尔电机，通过霍尔传感器转换可以测量力、位移和转速等。因此在仿真阶段，我们往往需要模拟生成的霍尔信号，借此来计算电机的转速和玻璃的行程，以及判断电机的运转方向等，因此如何正确的模拟霍尔信号是非常重要的一环。发明内容本发明的目的在于，提供一种玻璃升降器防夹模块模拟霍尔信号生成方法与系统，以解决现有仿真阶段所存在的一个或多个技术问题，保证在仿真阶段有较好的可靠性和准确性。为解决上述技术问题，本发明的技术方案为：一种玻璃升降器防夹模块模拟霍尔信号生成方法，包括以下步骤：S100、依据实际的路谱图，通过霍尔信号生成模块反馈得到电机方向信号和脉冲数，根据脉冲数计算得到此时的脉宽信号，根据电机方向信号和脉宽信号计算得到霍尔信号；S200、判断脉宽值是否为0，若为0，霍尔信号保持原值，跳转至S100并重新执行S100；若不为0，则进行电机方向信号判断；S300、根据电机方向信号数值，判断电机转动方向，计算此时电机停转时间，并根据停转时间调整实时脉宽计数值t；当t≥T-1时，将霍尔信号反向，生成脉冲数作为脉宽计数结束的标志信息并输出；其中,T为脉宽值；S400、将作为脉宽计数结束的标志信息的脉冲数输入到路谱图中，获取对应的脉宽值并跳转至S100计算得到霍尔信号。S300具体包括：S310、若输入的电机方向信号为0，则表示电机处于停转状态，此时进行停转时间time的计算，将time的值增加1，同时标志此时位置为0；S320、若输入的电机方向信号为1，则表示电机正转，玻璃处于上升状态，将标志位置为1，判断此时的电机停转时间time，当电机停转时间time大于设定阈值时，则将停转时间time置0，且将实时脉宽计数值t置0；否则仅将停转时间置0；当t＜T-1时，将t的值增加1，且当t等于T/2时，将霍尔信号反向，当t不等于T/2时，跳转至S100并重新执行S100；当t≥T-1时，将霍尔信号反向，同时脉冲数减1，并输出一个脉宽计数结束的标志信息，进入S400；S330、若输入的电机方向信号为-1，则表示电机反转，玻璃处于下降状态，判断标志位是否为-1，若不为-1，则将t置0，将标志位置为-1；若标志位为-1，则进入S400；当t＜T-1时，将t的值增加1，当t等于T/2时，将霍尔信号反向，当t不等于T/2时，跳转至S100并重新执行S100；当t≥T-1时，将霍尔信号反向，同时脉冲数加1，并输出一个脉宽计数结束的标志信息，跳转至S100并重新执行S100。设置两霍尔传感器，当两霍尔传感器与电机中心连线夹角为α时，有：S100、依据实际的路谱图，通过霍尔信号生成模块反馈得到电机方向信号和脉冲数，根据脉冲数计算得到此时的脉宽信号，根据电机方向信号和脉宽信号计算得到霍尔信号；S200、判断脉宽值是否为0，若为0，霍尔信号保持原值，跳转至S100并重新执行S100；若不为0，则进行电机方向信号判断；S340、若输入的电机方向信号为0，则表示电机处于停转状态，此时进行停转时间time的计算，将time的值增加1，同时标志此时位置为0；S350、若输入的电机方向信号为1，则表示电机正转，玻璃处于上升状态，此时标志位置为1，判断此时的电机停转时间time，当电机停转时间time大于设定阈值时，则将停转时间time置0，且将实时脉宽计数值t置0；否则仅将停转时间置0；当t＜T-1时，将t的值增加1，且当t等于*T/90或α*T/90时，将霍尔信号反向，当t不等于*T/90或α*T/90时，跳转至S100并重新执行S100；当t≥T-1时，将t置为0，跳转至S100并重新执行S100；S360、若输入的电机方向信号为-1，则表示电机反转，玻璃处于下降状态，判断标志位是否为-1，若不为-1，则将t置0，且将标志位置为-1；若标志位为-1，则跳转至S100并重新执行S100；当t＜T-1时，t的值增加1，且当t等于*T/90或*T/90时，将霍尔信号反向,当t不等于*T/90或*T/90时，跳转至S100并重新执行S100；当t＞＝T-1时，将脉宽计数值t置为0，跳转至S100并重新执行S100。当其中一个霍尔传感器的霍尔信号产生跳变时，此时两霍尔传感器的霍尔信号的相位差位。当t置为0后，电机位置回到初始位置。还提供一种玻璃升降器防夹模块模拟霍尔信号生成系统，包括至少一个霍尔传感器，电机，霍尔信号生成模块和控制器；其中，霍尔传感器，用于采集电机转动时生成的霍尔信号；霍尔信号生成模块，用于依据实际的路谱图反馈得到电机方向信号和脉冲数；控制器，用于根据脉冲数计算得到此时的脉宽信号，根据电机方向信号和脉宽信号计算得到霍尔信号；判断脉宽值是否为0，若为0，霍尔信号保持原值，根据电机方向信号和脉宽信号计算得到霍尔信号；若不为0，则进行电机方向信号判断；根据电机方向信号数值，判断电机转动方向，计算此时电机停转时间，并根据停转时间调整实时脉宽计数值t；当t≥T-1时，将霍尔信号反向，生成脉冲数作为脉宽计数结束的标志信息并输出；其中,T为脉宽值；将作为脉宽计数结束的标志信息的脉冲数输入到路谱图中，获取对应的脉宽值并计算得到霍尔信号。判断电机转动方向的具体步骤包括：若输入的电机方向信号为0，则表示电机处于停转状态，此时进行停转时间time的计算，将time的值增加1，同时标志此时位置为0；若输入的电机方向信号为1，则表示电机正转，玻璃处于上升状态，将标志位置为1，判断此时的电机停转时间time，当电机停转时间time大于设定阈值时，则将停转时间time置0，且将实时脉宽计数值t置0；否则仅将停转时间置0；当t＜T-1时，将t的值增加1，且当t等于T/2时，将霍尔信号反向，当t不等于T/2时，根据电机方向信号和脉宽信号计算得到霍尔信号；当t≥T-1时，将霍尔信号反向，同时脉冲数减1，并输出一个脉宽计数结束的标志信息，根据电机方向信号和脉宽信号计算得到霍尔信号；若输入的电机方向信号为-1，则表示电机反转，玻璃处于下降状态，判断标志位是否为-1，若不为-1，则将t置0，将标志位置为-1；若标志位为-1，则根据电机方向信号和脉宽信号计算得到霍尔信号；当t＜T-1时，将t的值增加1，当t等于T/2时，将霍尔信号反向，当t不等于T/2时，根据电机方向信号和脉宽信号计算得到霍尔信号；当t≥T-1时，将霍尔信号反向，同时脉冲数加1，并输出一个脉宽计数结束的标志信息，根据电机方向信号和脉宽信号计算得到霍尔信号。设置两霍尔传感器，当两霍尔传感器与电机中心连线夹角为α时，获取霍尔信号的工作流程为：依据实际的路谱图，通过霍尔信号生成模块反馈得到电机方向信号和脉冲数，根据脉冲数计算得到此时的脉宽信号，根据电机方向信号和脉宽信号计算得到霍尔信号；判断脉宽值是否为0，若为0，霍尔信号保持原值，根据电机方向信号和脉宽信号计算得到霍尔信号；若不为0，则进行电机方向信号判断；若输入的电机方向信号为0，则表示电机处于停转状态，此时进行停转时间time的计算，将time的值增加1，同时标志此时位置为0；若输入的电机方向信号为1，则表示电机正转，玻璃处于上升状态，此时标志位置为1，判断此时的电机停转时间time，当电机停转时间time大于设定阈值时，则将停转时间time置0，且将实时脉宽计数值t置0；否则仅将停转时间置0；当t＜T-1时，将t的值增加1，且当t等于*T/90或α*T/90时，将霍尔信号反向，当t不等于*T/90或α*T/90时，根据电机方向信号和脉宽信号计算得到霍尔信号；当t≥T-1时，将t置为0，根据电机方向信号和脉宽信号计算得到霍尔信号；若输入的电机方向信号为-1，则表示电机反转，玻璃处于下降状态，判断标志位是否为-1，若不为-1，则将t置0，且将标志位置为-1；若标志位为-1，则根据电机方向信号和脉宽信号计算得到霍尔信号；当t＜T-1时，t的值增加1，且当t等于*T/90或*T/90时，将霍尔信号反向,当t不等于*T/90或*T/90时，根据电机方向信号和脉宽信号计算得到霍尔信号；当t＞＝T-1时，将脉宽计数值t置为0，根据电机方向信号和脉宽信号计算得到霍尔信号。当其中一个霍尔传感器的霍尔信号产生跳变时，此时两霍尔传感器的霍尔信号的相位差位。当t置为0后，电机位置回到初始位置。与现有技术相比，本发明的有益效果为：在保证了霍尔信号的准确性的前提条件下，相比传统霍尔信号生成算法更加简洁明了，同时还可以依据实际的度数要求，实现双霍尔传感器的模拟；使用在仿真中，可以提高了算法的准确性和效率。附图说明图1为本发明实施例的方法流程图；图2为本发明实施例的双霍尔电机顺时针旋转霍尔信号方波图；图3为本发明实施例的双霍尔电机逆时针旋转霍尔信号方波图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。此外，下面所描述的本发明各个实施方式中所涉及到的技术特征只要彼此之间未构成冲突就可以相互组合。实际中测量的脉宽一般为一整个周期的脉宽，包括一个上升沿和下降沿，如图1所示，本方法可以将任意输入的数值经过霍尔信号生成模块，可以直接转化为霍尔方波信号。本发明解决技术问题所采用的技术方案是：一种玻璃升降器防夹模块模拟霍尔信号生成方法，包括以下步骤：步骤100，如图1所示，依据实际的路谱图，通过霍尔信号生成模块反馈的脉冲数来查询当下的脉宽。将查询到的脉宽以及电机方向信号传入到霍尔信号生成算法中生成Hall信号。步骤200，对于输入的脉宽值首先判断是否为0，若为0，霍尔信号保持原样，跳出算法从头开始；如果不为0则继续进行；步骤300，若输入的电机方向信号Dir＝0，则表示电机处于停转状态，此时进行停转时间的计算，time＝time+1，time为停转时间，同时将标志位置0；步骤400，若输入的电机方向信号Dir＝1，则表示电机正转，玻璃处于上升状态，此时将标志位置1，判断此时的电机停转时间time，当电机停转时间time大于设定阈值时，则将停转时间time置0，且将实时脉宽计数值t置0；否则仅将停转时间置0。当t＜T-1时，t自加1，当t等于T/2时，将霍尔信号反置，否则跳出算法从头开始；当t＞＝T-1时，将霍尔信号反向，同时脉冲数pulsenum减1，并输出一个脉宽计数结束的标志信息，跳出算法，从头开始。步骤500，若输入的电机方向信号Dir＝-1，则表示电机正转，玻璃处于下降状态，此时判断标志位是否为-1，若不为-1，则将t置0，且将标志位置-1；若标志位为-1，则直接进行之后的步骤。当t＜T-1时，t自加1，当t等于T/2时，将霍尔信号反置，否则跳出算法从头开始；当t＞＝T-1时，将霍尔信号反向，同时脉冲数pulsenum加1，并输出一个脉宽计数结束的标志信息，跳出算法，从头开始。步骤600，当上述步骤中输出了一个脉宽计数结束的标志信息时，就上述输出的脉冲数pulsenum输入到路谱图中，在路谱图中查找接下来的脉宽数值，并将其输入到霍尔信号生成算法中。步骤700，对于双霍尔传感器，当另外一个霍尔传感器相对于上述传感器偏离α度时，此时建立的脉宽测量算法与上述类似。输入上述相同的方向信号和脉宽信号。与上述区别主要在于电机正转和反转时，脉宽计数值t与脉宽值T之间的判断关系。若输入的电机方向信号Dir＝1，则表示电机正转，玻璃处于上升状态，此时将标志位置1，判断此时的电机停转时间time，当电机停转时间time大于设定阈值时，则将停转时间time置0，且将实时脉宽计数值t置0；否则仅将停转时间置0。当t＜T-1时，t自加1，当t等于*T/90时，将霍尔信号反置，当t等于α*T/90时，将霍尔信号反置，否则跳出算法从头开始；当t＞＝T-1时，将脉冲计数t置为0，跳出算法，从头开始。若输入的电机方向信号Dir＝-1，则表示电机反转，玻璃处于下降状态，此时判断标志位是否为-1，若不为-1，则将t置0，且将标志位置-1；若标志位为-1，则直接进行之后的步骤。当t＜T-1时，t自加1，当t等于*T/90时，将霍尔信号反置，当t等于*T/90时，将霍尔信号反置,否则跳出算法从头开始；当t＞＝T-1时，将脉宽计数值t置为0，跳出算法，从头开始。本算法可以完全模拟实际情况，如图2所示为电机顺时针转动的情况，圆代表电机的旋转部分，有表示有磁极，无表示没有磁极。当有磁极的部分经过霍尔传感器之后，会产生霍尔效应，使得霍尔信号由0跳变为1。双霍尔传感器，图2为两个霍尔传感器相差α角度的情况，经过霍尔信号生成算法模拟得到的如图2右侧的双霍尔信号方波，霍尔传感器2先经过有磁极区域，此时霍尔信号2先发生跳变，相位差为。如图3所示为电机逆时针旋转的情况，此时霍尔传感器1首先转过有磁极区域，因此霍尔信号1先产生跳变，相对于正转情况，产生跳变的顺序发生了改变，并且相位差仍然保持之前的相位差，为90°-α。在电机到达上下止点时，玻璃即将下降或者上升时，即电机即将反转时，电机离初始位置是存在一定角度的。而根据我们的算法，在将t置0后，电机位置会直接回到初始位置，，此时在电机会直接从初始位置开始进行反转，从而得到正确的我们所需要的双霍尔脉冲方波。虽然这样会使得每次在电机反转时舍去了一个很小的角度，但是由于舍去的角度很小，在可以接受的误差范围内；且玻璃升降器在完成初始化正常运行数次之后，会再次进行初始化，标定上止点和下止点，因此之前累积的误差会直接清0，因此该算法可以简单高效且稳定的输出正确的霍尔脉冲方波。本发明产生的有益效果是：本算法提出一种对脉宽进行计数的霍尔信号生成算法，在保证了霍尔信号的准确性的前提条件下，相比传统霍尔信号生成算法更加简洁明了，同时还可以依据实际的度数要求，实现双霍尔传感器的模拟。使用在仿真中，可以提高了算法的准确性和效率。本领域的技术人员容易理解，以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明的保护范围之内。
