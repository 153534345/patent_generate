标题title
胶囊内窥镜的无线充电系统、方法及存储介质
摘要abst
本申请实施例适用于医疗设备技术领域，提供了一种胶囊内窥镜的无线充电系统、方法及存储介质，所述方法包括：获取磁感应阵列感应到的磁场信号；根据所述磁场信号确定所述充电接收线圈的位置和方向；根据所述充电接收线圈的位置和方向确定充电发射线圈的目标位置和目标方向；通过调整机械臂将所述充电发射线圈移动至所述目标位置并朝向所述目标方向；其中，当所述充电发射线圈位于所述目标位置并朝向所述目标方向时，所述充电发射线圈与所述充电接收线圈之间的电磁耦合达到最大值；通过所述充电发射线圈向所述充电接收线圈传输电能。采用上述方法，可以随时向胶囊内窥镜提供电能，以完成各种工作功能，解决胶囊内窥镜电池供电不足的问题。
权利要求书clms
1.一种胶囊内窥镜的无线充电系统，其特征在于，包括胶囊内窥镜、磁感应阵列、体外控制器和机械臂；所述胶囊内窥镜具有充电电路以及与所述充电电路电连接的充电接收线圈，所述机械臂的末端安装有充电发射线圈；其中：所述磁感应阵列，用于感应所述充电接收线圈产生的磁场信号，根据所述磁场信号确定所述充电接收线圈的位置和方向；所述体外控制器，用于根据所述充电接收线圈的位置和方向确定所述充电发射线圈的目标位置和目标方向，通过调整所述机械臂将所述充电发射线圈移动至所述目标位置并朝向所述目标方向；其中，当所述充电发射线圈位于所述目标位置并朝向所述目标方向时，所述充电发射线圈与所述充电接收线圈之间的电磁耦合达到最大值；所述充电发射线圈，用于在所述目标位置并朝向所述目标方向时，向所述充电接收线圈传输电能。2.根据权利要求1所述的系统，其特征在于，所述充电电路用于对所述充电接收线圈施加电信号，以使所述充电接收线圈产生所述磁场信号。3.根据权利要求2所述的系统，其特征在于，所述磁感应阵列包括多个磁感应器，所述充电电路还用于在预设个数的所述磁感应器感应到所述磁场信号后，停止对所述充电接收线圈施加所述电信号。4.根据权利要求1-3任一项所述的系统，其特征在于，所述磁感应阵列包括多个磁感应器，多个所述磁感应器为三轴磁感应器，所述磁感应阵列具体用于：确定各个所述三轴磁感应器在所处位置感应到的所述磁场信号的磁感应强度，所述磁感应强度由三个不同方向上的磁感应强度分量组成；分别计算各个所述三轴磁感应器在所述三个不同方向上的磁感应强度分量误差；根据所述磁感应强度分量误差构建目标误差函数并采用所述目标误差函数确定所述充电接收线圈的位置和方向；其中，所述充电接收线圈的位置和方向为所述目标误差函数的值为最小时对应的位置和方向。5.根据权利要求4所述的系统，其特征在于，所述目标误差函数为：E＝Ex+Ey+Ez其中：构成所述充电接收线圈的中心位置的坐标，构成所述充电接收线圈的主轴方向，m2+n2+p2＝1，构成第l个三轴磁感应器所处的位置的坐标，Blx、Bly、Blz分别为第l个三轴磁感应器在三个不同方向上的磁感应强度分量，N为所述磁感应阵列中三轴磁感应器的总数量；μr为相对导磁率，μ0为真空导磁率，MT为表征所述充电接收线圈电流、匝数和尺寸相关的常数，Rl为Pl的模，Pl为第l个三轴磁感应器的位置相对于所述充电接收线圈中心位置的矢量，Pl＝T。6.根据权利要求1-3或5任一项所述的系统，其特征在于，所述体外控制器具体用于：根据磁偶极子模型，确定所述充电发射线圈产生的磁场在所述充电接收线圈的中心位置产生的磁感应强度的表达式，所述表达式包括三个不同方向上的磁感应强度分量表达式，所述充电发射线圈具有边界约束条件；基于三个不同方向上的所述磁感应强度分量表达式，计算在所述充电接收线圈的主轴方向上产生的磁感应强度值表达式；根据所述磁感应强度值表达式和所述边界约束条件求解所述充电发射线圈的目标位置和目标方向；其中，所述充电发射线圈的目标位置和目标方向为所述磁感应强度值表达式的值的平方为最大时对应的位置和方向。7.根据权利要求6所述的系统，其特征在于，所述磁感应强度值表达式为：Bv＝B′x·m+B′y·n+B′z·p其中：构成所述充电接收线圈的中心位置的坐标，构成所述充电接收线圈的主轴方向，构成所述充电发射线圈的中心位置的坐标，构成所述充电发射线圈的主轴方向，所述边界约束条件为：其中，和是所述充电发射线圈x方向上的坐标最小值和最大值，和是所述充电发射线圈y方向上的坐标最小值和最大值，和是所述充电发射线圈z方向的坐标最小值和最大值。8.根据权利要求1-3或5或7任一项所述的系统，其特征在于，所述体外控制器具体用于：当所述充电发射线圈移动至所述目标位置并朝向所述目标方向时，对所述充电发射线圈施加交变电流产生交变磁场，以使所述充电接收线圈产生交变电压；所述充电电路还用于：将所述交变电压转换为直流信号，以对所述胶囊内窥镜充电。9.一种胶囊内窥镜的无线充电方法，其特征在于，包括：获取磁感应阵列感应到的磁场信号，所述磁场信号由胶囊内窥镜上的充电接收线圈在通电状态下产生；根据所述磁场信号确定所述充电接收线圈的位置和方向；根据所述充电接收线圈的位置和方向确定充电发射线圈的目标位置和目标方向，所述充电发射线圈安装于机械臂的末端；通过调整所述机械臂将所述充电发射线圈移动至所述目标位置并朝向所述目标方向；其中，当所述充电发射线圈位于所述目标位置并朝向所述目标方向时，所述充电发射线圈与所述充电接收线圈之间的电磁耦合达到最大值；通过所述充电发射线圈向所述充电接收线圈传输电能。10.一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求9所述的胶囊内窥镜的无线充电方法。
说明书desc
技术领域本申请实施例属于医疗设备技术领域，特别是涉及一种胶囊内窥镜的无线充电系统、方法及存储介质。背景技术无线胶囊内窥镜是一种用于完整消化道检查的重要技术手段，具有无痛苦、非侵入性等特点。胶囊内窥镜系统一般包括三个部分：胶囊内窥镜、记录仪和工作站。其中，胶囊内窥镜只有一颗胶囊大小，通常由圆顶状的光学壳罩、光学透镜、图像传感器、照明灯、射频发射器、天线和电池等组成。在胶囊内窥镜系统工作的第一阶段，胶囊内窥镜被病人吞咽进胃肠道，接着对病人胃肠道进行拍摄，拍摄得到的图像数据可以通过发射器和天线传送到体外。第二阶段，体外由多个天线组成的天线阵列和数据接收器接收胶囊内窥镜发来的数据，并将接收到的数据存储至记录仪的存储单元。第三阶段：记录仪将已存储的数据传输到工作站进行分析处理或展示给医师处理。在临床应用过程中，胶囊内窥镜中的电池需要对照明灯、图像传感器、无线传输及控制等模块进行供电。现有的胶囊内窥镜所使用的电池通常只能维持7-8个小时的供电，但传统的胶囊内窥镜在人体内主要依靠肠道的自然蠕动前进，一次完整的胃肠道检查往往需要耗时10-12个小时以上，远远超过电池可维持的供电时间。并且，当需要在体内拍摄更高分辨率和帧率的图像时，胶囊内窥镜中电池的耗电量将会更大，胶囊内窥镜的使用时间也将变得更短。发明内容有鉴于此，本申请实施例提供了一种胶囊内窥镜的无线充电系统、方法及存储介质，用以实现随时向胶囊内窥镜提供电能的目的，解决胶囊内窥镜电池供电不足的问题。本申请实施例的第一方面提供了一种胶囊内窥镜的无线充电系统，包括胶囊内窥镜、磁感应阵列、体外控制器和机械臂；所述胶囊内窥镜具有充电电路以及与所述充电电路电连接的充电接收线圈，所述机械臂的末端安装有充电发射线圈；其中：所述磁感应阵列，用于感应所述充电接收线圈产生的磁场信号，根据所述磁场信号确定所述充电接收线圈的位置和方向；所述体外控制器，用于根据所述充电接收线圈的位置和方向确定所述充电发射线圈的目标位置和目标方向，通过调整所述机械臂将所述充电发射线圈移动至所述目标位置并朝向所述目标方向；其中，当所述充电发射线圈位于所述目标位置并朝向所述目标方向时，所述充电发射线圈与所述充电接收线圈之间的电磁耦合达到最大值；所述充电发射线圈，用于在所述目标位置并朝向所述目标方向时，向所述充电接收线圈传输电能。本申请实施例的第二方面提供了一种胶囊内窥镜的无线充电方法，包括：获取磁感应阵列感应到的磁场信号，所述磁场信号由胶囊内窥镜上的充电接收线圈在通电状态下产生；根据所述磁场信号确定所述充电接收线圈的位置和方向；根据所述充电接收线圈的位置和方向确定充电发射线圈的目标位置和目标方向，所述充电发射线圈安装于机械臂的末端；通过调整所述机械臂将所述充电发射线圈移动至所述目标位置并朝向所述目标方向；其中，当所述充电发射线圈位于所述目标位置并朝向所述目标方向时，所述充电发射线圈与所述充电接收线圈之间的电磁耦合达到最大值；通过所述充电发射线圈向所述充电接收线圈传输电能。本申请实施例的第三方面提供了一种胶囊内窥镜的无线充电装置，包括：磁场信号获取模块，用于获取磁感应阵列感应到的磁场信号，所述磁场信号由胶囊内窥镜上的充电接收线圈在通电状态下产生；位置和方向确定模块，用于根据所述磁场信号确定所述充电接收线圈的位置和方向；目标位置和目标方向确定模块，用于根据所述充电接收线圈的位置和方向确定充电发射线圈的目标位置和目标方向，所述充电发射线圈安装于机械臂的末端；机械臂调整模块，用于通过调整所述机械臂将所述充电发射线圈移动至所述目标位置并朝向所述目标方向；其中，当所述充电发射线圈位于所述目标位置并朝向所述目标方向时，所述充电发射线圈与所述充电接收线圈之间的电磁耦合达到最大值；充电模块，用于通过所述充电发射线圈向所述充电接收线圈传输电能。本申请实施例的第四方面提供了一种计算机设备，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现如上述第二方面所述的胶囊内窥镜的无线充电方法。本申请实施例的第五方面提供了一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序被处理器执行时实现如上述第二方面所述的胶囊内窥镜的无线充电方法。本申请实施例的第六方面提供了一种计算机程序产品，当所述计算机程序产品在计算机上运行时，使得所述计算机执行上述第二方面所述的胶囊内窥镜的无线充电方法。与现有技术相比，本申请实施例具有以下优点：本申请实施例，通过在体外的机械臂末端增加一充电发射线圈，在胶囊内窥镜中增加一充电接收线圈，可以形成体外线圈与体内线圈磁场相耦合的无线充电系统，从而实现对胶囊内电池的无线充电。本申请实施例在对胶囊进行定位的基础上，通过确定体外充电发射线圈最优的目标位置和目标方向，可以获得最大的充电耦合效果。采用本申请实施例提供的无线充电系统，可以随时向胶囊提供电能，完成胶囊各种工作功能，解决胶囊电池供电不足的问题。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍。显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本申请实施例提供的一种胶囊内窥镜的无线充电系统的示意图；图2是本申请实施例提供的一种胶囊内窥镜的示意图；图3是本申请实施例提供的一种充电接收线圈定位原理的示意图；图4是本申请实施例提供的一种充电原理的示意图；图5是本申请实施例提供的一种胶囊内窥镜的无线充电方法的示意图；图6是本申请实施例提供的一种胶囊内窥镜的无线充电方法中S502的一种实现方式的示意图；图7是本申请实施例提供的一种胶囊内窥镜的无线充电方法中S503的一种实现方式的示意图；图8是本申请实施例提供的一种胶囊内窥镜的无线充电装置的示意图；图9是本申请实施例提供的一种计算机设备的示意图。具体实施方式以下描述中，为了说明而不是为了限定，提出了诸如特定系统结构、技术之类的具体细节，以便透彻理解本申请实施例。然而，本领域技术人员应当清楚，在没有这些具体细节的其他实施例中也可以实现本申请。在其他情况中，省略对众所周知的系统、装置、电路以及方法的详细说明，以免不必要的细节妨碍本申请的描述。下面通过具体实施例来说明本申请的技术方案。参照图1，示出了本申请实施例提供的一种胶囊内窥镜的无线充电系统的示意图，包括胶囊内窥镜101、磁感应阵列102、体外控制器和机械臂103。机械臂103的末端可以安装有充电发射线圈1031，通过该充电发射线圈1031可以对位于人体内的胶囊内窥镜101进行充电，胶囊内窥镜101中的充电接收线圈1011可以接收到充电发射线圈1031传输的电能，从而延长自身的工作时间。具体地，磁感应阵列102可以感应充电接收线圈1011产生的磁场信号，根据磁场信号确定充电接收线圈1011的位置和方向。充电接收线圈1011的位置和方向可以被磁感应阵列102发送给体外控制器。这样，体外控制器可以根据充电接收线圈1011的位置和方向确定位于体外的充电发射线圈1031的目标位置和目标方向。上述目标位置和目标方向可以是指，当充电发射线圈1031位于该目标位置并朝向该目标方向时，充电发射线圈1031与充电接收线圈1011之间的电磁耦合达到最大值。因此，在确定充电发射线圈1031的目标位置和目标方向后，体外控制器可以通过调整机械臂103将充电发射线圈1031移动至上述目标位置并朝向目标方向。然后，充电发射线圈1031可以在该目标位置并朝向目标方向的情况下，向充电接收线圈1011传输电能。下面，详细介绍采用本申请实施例提供的胶囊内窥镜的无线充电系统对胶囊内窥镜进行充电的过程。需要说明的是，若无其他特别说明，在本申请实施例中，“胶囊”和“胶囊内窥镜”所指代的均为图1中的胶囊内窥镜101。结合图1和图2，其中图2是本申请实施例提供的一种胶囊内窥镜的示意图。从图2中可知，对于一个胶囊内窥镜101，除包括充电接收线圈1011外，还包括与该充电接收线圈1011电连接的充电电路1012、以及胶囊控制器1013、电池1014、天线1015、图像传感器1016、发光管1017、镜头1018以及光学罩1019等。在应用本申请实施例提供的胶囊内窥镜的无线充电系统对电池1014进行充电时，充电接收线圈1011可以接收外部的充电发射线圈1031传输的电能，充电电路1012可以将接收到的电能存储至电池1014中。在本申请实施例中，充电电路1011可以在胶囊控制器1013的控制下，对充电接收线圈1011施加电信号，以使充电接收线圈1011产生磁场信号。这样，磁感应阵列102可以感应到充电接收线圈1011产生的磁场信号，从而可以根据磁场信号确定出充电接收线圈1011的位置和方向。需要说明的是，充电接收线圈1011的位置可以是指该充电接收线圈1011的中心位置，该中心位置可以使用坐标表示。充电接收线圈1011的方向可以是指该充电接收线圈1011的主轴方向，该主轴方向可以使用表示。因此，H0＝T可以用于表征充电接收线圈1011主轴方向上的矢量。在具体实现中，磁感应阵列102可以安装于检查床的下方。在使用胶囊内窥镜101对病人进行胃肠道检查时，病人可以平躺于检查床上，保证胶囊内窥镜101的工作空间均在磁感应阵列102的监测范围内。图1中的104和105可以分别表示病人腹部和背部。因此，胶囊内窥镜101介于图1中的腹部104和背部105中间即表示该胶囊内窥镜101位于人体体内。在本申请实施例中，磁感应阵列102可以包括多个磁感应器，这些磁感应器可以是三轴磁感应器。由于充电电路1012对充电接收线圈1011施加电信号的目的是为了使磁感应阵列102监测到充电接收线圈1011产生的磁场信号，从而确定充电接收线圈1011的位置和方向，因此在预设个数的磁感应器感应到充电接收线圈1011产生的磁场信号后，充电电路1012可以停止对充电接收线圈1011施加电信号，减少电池1014的电能消耗。上述预设个数可以根据实际需要确定，在本申请实施例中，上述预设个数可以是指超过5个的个数，即至少应当保证磁感应阵列102中有5个或更多的磁感应器可以感应到充电接收线圈1011产生的磁场信号后，充电电路1012才能停止对充电接收线圈1011施加电信号。在本申请实施例中，磁感应阵列102可以首先确定各个磁感应器在所处位置感应到的磁场信号的磁感应强度。由于组成磁感应阵列102的各个磁感应器均为三轴磁感应器，因此每个三轴磁感应器在各自所处的位置感应到的磁感应强度可以是由三个不同方向上的磁感应强度分量组成的，即任一磁感应强度均是由X方向、Y方向和Z方向上的磁感应强度分量组成的。在此基础上，磁感应阵列102可以分别计算各个三轴磁感应器在三个不同方向上的磁感应强度分量误差，并根据磁感应强度分量误差构建目标误差函数。磁感应阵列102可以采用上述构建出的目标误差函数确定充电接收线圈1011的位置和方向；其中，该充电接收线圈1011的位置和方向可以是上述目标误差函数的值为最小时对应的位置和方向。下面，结合具体的图例，详细介绍确定充电接收线圈1011的位置和方向的过程。如图3所示，是本申请实施例提供的一种充电接收线圈定位原理的示意图。假设胶囊内窥镜101中的充电接收线圈1011的中心位置在，其主轴方向为H0＝。当胶囊101内的胶囊控制器1013控制充电电路1012在充电接收线圈1011上施加一定时间间隔和幅度的电流时，该充电接收线圈1011可以在周边产生足够强的磁场强度。充电接收线圈1011在空间中的某点，l＝1、2、…N)产生的磁场，在数学上可以用磁偶极子模型来描述：上式中，Bl为位置处的磁感应强度；Blx,Bly和Blz为该位置处的3个磁感应强度分量，可由三轴磁感应器测量得到；N为磁感应阵列102中三轴磁感应器的总数量；μr为相对导磁率，通常，在人体和空气中，μr≈1；μ0为真空导磁率，μ0＝4π×10-7T·m/A；MT为表征充电接收线圈1011的电流、匝数和尺寸相关的常数；Rl为Pl的模，Pl为第l个三轴磁感应器的位置相对于充电接收线圈中心位置的矢量，Pl＝T。H0为表征充电接收线圈1011主轴方向上的矢量，该矢量是二维的，具有约束条件：m2+n2+p2＝1……将上式展开，可以得到：其中，通过位置上的三轴磁感应器，可以测量Blx,Bly和Blz。现在，需要用式～求解出T和T。因为有5个未知参数需要求解，需要三轴磁感应器的数量应使N≥5。定义一个目标误差函数如下：E＝Ex+Ey+Ez……其中，Ex，Ey和Ez为定义的X,Y,Z方向上的与磁场强度相关的误差：因此，上述求解T和T的问题可以转化为一个非线性最小二乘求解问题。当三轴磁感应器的数量多于未知变量数时，通过使用优化算法，如Levenberg-Marquart算法寻找最优的T和T，使目标误差函数E的值最小，即可求解出充电接收线圈1011的位置和方向。在本申请实施例中，在求解出充电接收线圈1011当前所处的位置和主轴的方向后，体外控制器可以根据该位置和方向确定充电发射线圈1031的目标位置和目标方向。充电发射线圈1031的目标位置和目标方向可以是指在充电发射线圈1031与充电接收线圈1011之间的电磁耦合达到最大值所处的位置，即当充电发射线圈1031位于目标位置并朝向目标方向时，充电发射线圈1031与充电接收线圈1011之间的电磁耦合达到最大值。体外控制器可以通过调整机械臂103将充电发射线圈1031移动至上述目标位置并使其朝向目标方向。在本申请实施例中，体外控制器在确定充电发射线圈1031的目标位置和目标方向时，可以首先根据磁偶极子模型，确定充电发射线圈1031产生的磁场在充电接收线圈1011的中心位置所产生的磁感应强度的表达式，上述表达式可以包括三个不同方向上的磁感应强度分量表达式，即X、Y、Z方向。然后，体外控制器可以基于三个不同方向上的磁感应强度分量表达式，计算在充电接收线圈1011的主轴方向上产生的磁感应强度值表达式。另一方面，充电发射线圈1031具有边界约束条件，该边界约束条件可以根据充电发射线圈1031允许移动的空间范围的大小确定。这样，体外控制器可以根据磁感应强度值表达式和边界约束条件求解充电发射线圈1031的目标位置和目标方向。通常，充电发射线圈1031的目标位置和目标方向可以是磁感应强度值表达式的值的平方为最大时对应的位置和方向。下面，结合具体的图例，详细介绍确定充电发射线圈1031的目标位置和目标方向的过程。如图4所示，是本申请实施例提供的一种充电原理的示意图。在确定出胶囊101内的充电接收线圈1011的位置T和方向T后，计算体外的充电发射线圈1031的目标位置和目标方向也可以转换为一个优化问题，即：通过求解出最优的和使充电发射线圈1031与充电接收线圈1011之间的电磁耦合最大。电磁耦合是发射线圈和接收线圈之间的互感，电磁耦合最大就是使互感最大，也就是使发射线圈产生的磁场进入接收线圈的磁通量最大。这时充电效率最高，同时也能够尽可能地保证产生足够高的电压用于充电。对于体外的充电发射线圈1031产生的磁感应强度也可以使用磁偶极子模型表示，充电发射线圈1031产生的磁场在体内的充电接收线圈1011处产生的磁感应强度可以表示为：上式中，B′T是与充电发射线圈电流、匝数和尺寸相关的常数，另有：由于胶囊101内的充电接收线圈1011的主轴方向为Y，所以在该位置的主轴方向上产生的磁感应强度值为：Bv＝B′x·m+B′y·n+B′z·p……因此，求解上述问题即是找出最合适的参数和使Bv的平方最大。由于充电发射线圈1031位于人体外靠近胶囊101的上方，所以其在三维空间的位移有边界约束条件：其中，和是充电发射线圈1031在X方向上的坐标最小值和最大值，和是充电发射线圈1031在Y方向上的坐标最小值和最大值，和是充电发射线圈1031在Z方向上的坐标最小值和最大值。显然，上述确定充电发射线圈1031的目标位置和目标方向的问题转化成了一个非线性最大化寻优问题，可以利用优化算法，如Levenberg-Marquart算法来求解，解得结果和体外控制器可以根据求解出的结果调整机械臂103，从而将充电发射线圈1031移动至上述目标位置并朝向目标方向。然后，充电发射线圈1031可以在该目标位置并朝向目标方向时，向充电接收线圈1011传输电能。在具体实现中，当充电发射线圈1031移动至目标位置并朝向目标方向时，体外控制器通过对充电发射线圈1031施加交变电流，就可实现对胶囊101内充电接收线圈1011的高效磁场耦合，获得交变电能。胶囊101内充电接收线圈1011形成电磁感应，产生交变电压。充电电路1012可以将交变电压转换为直流电信号，从而实现对胶囊内窥镜101中电池1014的充电。需要说明的是，采用本申请实施例提供的无线充电系统对胶囊101内的电池1014进行充电，可以是在胶囊101处于静止状态时进行的，也可以是在胶囊101处于运动过程中进行的。当胶囊101处于运动过程中需要对其电池1014进行充电时，可以实时地确定胶囊101内的充电接收线圈1011所处的位置和方向，并通过机械臂103实时地对体外的充电发射线圈1031的目标位置和目标方向进行调整，来合理有效地为胶囊101提供电能。在本申请实施例中，通过在体外的机械臂末端增加一充电发射线圈，在胶囊内窥镜中增加一充电接收线圈，可以形成体外线圈与体内线圈磁场相耦合的无线充电系统，从而实现对胶囊内电池的无线充电。本申请实施例在对胶囊进行定位的基础上，通过确定体外充电发射线圈最优的目标位置和目标方向，可以获得最大的充电耦合效果。采用本申请实施例提供的无线充电系统，可以随时向胶囊提供电能，完成胶囊各种工作功能，解决胶囊电池供电不足的问题。参照图5，示出了本申请实施例提供的另一种胶囊内窥镜的无线充电方法的示意图，具体可以包括如下步骤：S501、获取磁感应阵列感应到的磁场信号，所述磁场信号由胶囊内窥镜上的充电接收线圈在通电状态下产生。需要说明的是，本方法可以应用于计算机设备，即本申请实施例的执行主体可以是计算机设备，该计算机设备可以是前述系统实施例中的体外控制器。在本申请实施例中，胶囊内窥镜中的充电接收线圈在通电状态下可以产生相应的磁场信号，磁感应阵列中的各个磁感应器可以感应到上述磁场信号。在具体实现中，可以通过胶囊内窥镜中的充电电路对充电接收线圈施加电信号，使充电接收线圈产生磁场信号。在本申请实施例的一种示例中，胶囊内窥镜中可以具有胶囊控制器，当胶囊控制器监测到胶囊内的电池储量不足时，可以主动控制充电电路对充电接收线圈施加电信号，以触发体外的充电发射线圈对胶囊进行充电。在本申请实施例的另一种示例中，控制充电电路对充电接收线圈施加电信号也可以由位于体外的计算机设备来实现。例如，当监测到需要对胶囊进行充电时，计算机设备可以通过指令主动控制胶囊中的充电电路对充电接收线圈施加电信号，上述指令可以直接由体外的计算机设备发送至胶囊控制器，由胶囊控制器再将指令转发至充电电路。S502、根据所述磁场信号确定所述充电接收线圈的位置和方向。在本申请实施例中，磁感应阵列可以根据感应到的磁场信号确定充电接收线圈的位置和方向，然后将该位置和方向传输至体外的计算机设备。或者，磁感应阵列在感应到磁场信号后，将磁场信号传输至体外的计算机设备，由计算机设备根据接收到的磁场信号的数据，确定充电接收线圈的位置和方向。需要说明的是，磁感应阵列包括多个磁感应器，并非需要全部的磁感应器均感应到充电接收线圈产生的磁场信号时才能确定充电接收线圈的位置和方向。因此，当预设个数的磁感应器感应到磁场信号足以用于确定充电接收线圈的位置和方向时，胶囊内的充电电路可以停止对充电接收线圈施加电信号。在本申请实施例的一种可能的实现方式中，如图6所示，计算机设备根据磁场信号确定充电接收线圈的位置和方向具体可以包括如下步骤S5021-S5023：S5021、确定各个所述三轴磁感应器在所处位置感应到的所述磁场信号的磁感应强度，所述磁感应强度由三个不同方向上的磁感应强度分量组成。S5022、分别计算各个所述三轴磁感应器在所述三个不同方向上的磁感应强度分量误差。S5023、根据所述磁感应强度分量误差构建目标误差函数并采用所述目标误差函数确定所述充电接收线圈的位置和方向；其中，所述充电接收线圈的位置和方向为所述目标误差函数的值为最小时对应的位置和方向。在本申请实施例中，目标误差函数可以表示为：E＝Ex+Ey+Ez其中：构成充电接收线圈的中心位置的坐标，构成充电接收线圈的主轴方向，m2+n2+p2＝1，构成第l个三轴磁感应器所处的位置的坐标，Blx、Bly、Blz分别为第l个三轴磁感应器在三个不同方向上的磁感应强度分量，N为磁感应阵列中三轴磁感应器的总数量；μr为相对导磁率，μ0为真空导磁率，MT为表征充电接收线圈的电流、匝数和尺寸相关的常数，Rl为Pl的模，Pl为第l个三轴磁感应器的位置相对于充电接收线圈中心位置的矢量，Pl＝T。S503、根据所述充电接收线圈的位置和方向确定充电发射线圈的目标位置和目标方向，所述充电发射线圈安装于机械臂的末端。在本申请实施例中，体外的计算机设备可以根据已确定的充电接收线圈的位置和方向，确定机械臂末端的充电发射线圈的目标位置和目标方向。其中，当充电发射线圈位于目标位置并朝向目标方向时，该充电发射线圈与充电接收线圈之间的电磁耦合达到最大值。在本申请实施例的一种可能的实现方式中，如图7所示，计算机设备根据充电接收线圈的位置和方向确定充电发射线圈的目标位置和目标方向具体可以包括如下步骤S5031-S5033：S5031、根据磁偶极子模型，确定所述充电发射线圈产生的磁场在所述充电接收线圈的中心位置产生的磁感应强度的表达式，所述表达式包括三个不同方向上的磁感应强度分量表达式，所述充电发射线圈具有边界约束条件。S5032、基于三个不同方向上的所述磁感应强度分量表达式，计算在所述充电接收线圈的主轴方向上产生的磁感应强度值表达式。S5033、根据所述磁感应强度值表达式和所述边界约束条件求解所述充电发射线圈的目标位置和目标方向；其中，所述充电发射线圈的目标位置和目标方向为所述磁感应强度值表达式的值的平方为最大时对应的位置和方向。在本申请实施例中，磁感应强度值表达式可以为：Bv＝B′x·m+B′y·n+B′z·p其中：构成充电接收线圈的中心位置的坐标，构成充电接收线圈的主轴方向，构成充电发射线圈的中心位置的坐标，构成充电发射线圈的主轴方向，上述边界约束条件可以表示为：其中，和是充电发射线圈x方向上的坐标最小值和最大值，和是充电发射线圈y方向上的坐标最小值和最大值，和是充电发射线圈z方向的坐标最小值和最大值。S504、通过调整所述机械臂将所述充电发射线圈移动至所述目标位置并朝向所述目标方向。在本申请实施例中，体外的计算机设备可以通过对机械臂的调整，来实现对充电发射线圈所处位置及朝向的调整，从而将充电发射线圈调整至目标位置，并使充电发射线圈的主轴朝向目标方向。S505、通过所述充电发射线圈向所述充电接收线圈传输电能。当充电发射线圈位于目标位置并朝向目标方向时，充电发射线圈与体内的充电接收线圈之间的电磁耦合达到最大。此时，计算机设备可以控制充电发射线圈向充电接收线圈传输电能。具体地，计算机设备可以控制电路向充电发射线圈施加交变电流，从而产生交变磁场。这样，胶囊内的充电接收线圈将会在交变磁场的作用下产生交变电压，充电电路可以感应到交变电压，并可以通过将交变电压转换为直流电信号，来实现对胶囊内电池的充电。需要说明的是，上述方法中各步骤的具体实现过程与前述系统实施例中介绍的内容较为相似，在此不再赘述，可以参见前述系统实施例中的介绍。参照图8，示出了本申请实施例提供的一种胶囊内窥镜的无线充电装置的示意图，具体可以包括磁场信号获取模块801、位置和方向确定模块802、目标位置和目标方向确定模块803、机械臂调整模块804和充电模块805，其中：磁场信号获取模块801，用于获取磁感应阵列感应到的磁场信号，所述磁场信号由胶囊内窥镜上的充电接收线圈在通电状态下产生；位置和方向确定模块802，用于根据所述磁场信号确定所述充电接收线圈的位置和方向；目标位置和目标方向确定模块803，用于根据所述充电接收线圈的位置和方向确定充电发射线圈的目标位置和目标方向，所述充电发射线圈安装于机械臂的末端；机械臂调整模块804，用于通过调整所述机械臂将所述充电发射线圈移动至所述目标位置并朝向所述目标方向；其中，当所述充电发射线圈位于所述目标位置并朝向所述目标方向时，所述充电发射线圈与所述充电接收线圈之间的电磁耦合达到最大值；充电模块805，用于通过所述充电发射线圈向所述充电接收线圈传输电能。在本申请实施例中，所述磁感应阵列包括多个磁感应器，所述磁场信号获取模块801具体可以用于：控制胶囊内的充电电路对所述充电接收线圈施加电信号，以使所述充电接收线圈产生所述磁场信号；以及，在预设个数的所述磁感应器感应到所述磁场信号后，控制所述充电电路停止对所述充电接收线圈施加所述电信号。在本申请实施例中，多个所述磁感应器可以为三轴磁感应器，所述位置和方向确定模块802具体可以用于：确定各个所述三轴磁感应器在所处位置感应到的所述磁场信号的磁感应强度，所述磁感应强度由三个不同方向上的磁感应强度分量组成；分别计算各个所述三轴磁感应器在所述三个不同方向上的磁感应强度分量误差；根据所述磁感应强度分量误差构建目标误差函数并采用所述目标误差函数确定所述充电接收线圈的位置和方向；其中，所述充电接收线圈的位置和方向为所述目标误差函数的值为最小时对应的位置和方向。在本申请实施例中，所述目标误差函数为：E＝Ex+Ey+Ez其中：构成所述充电接收线圈的中心位置的坐标，构成所述充电接收线圈的主轴方向，m2+n2+p2＝1，构成第l个三轴磁感应器所处的位置的坐标，Blx、Bly、Blz分别为第l个三轴磁感应器在三个不同方向上的磁感应强度分量，N为所述磁感应阵列中三轴磁感应器的总数量；μr为相对导磁率，μ0为真空导磁率，MT为表征充电接收线圈的电流、匝数和尺寸相关的常数，Rl为Pl的模，Pl为第l个三轴磁感应器的位置相对于充电接收线圈中心位置的矢量，Pl＝T。在本申请实施例中，所述目标位置和目标方向确定模块803具体可以用于：根据磁偶极子模型，确定所述充电发射线圈产生的磁场在所述充电接收线圈的中心位置产生的磁感应强度的表达式，所述表达式包括三个不同方向上的磁感应强度分量表达式，所述充电发射线圈具有边界约束条件；基于三个不同方向上的所述磁感应强度分量表达式，计算在所述充电接收线圈的主轴方向上产生的磁感应强度值表达式；根据所述磁感应强度值表达式和所述边界约束条件求解所述充电发射线圈的目标位置和目标方向；其中，所述充电发射线圈的目标位置和目标方向为所述磁感应强度值表达式的值的平方为最大时对应的位置和方向。在本申请实施例中，所述磁感应强度值表达式可以为：Bv＝B′x·m+B′y·n+B′z·p其中：构成所述充电接收线圈的中心位置的坐标，构成所述充电接收线圈的主轴方向，构成所述充电发射线圈的中心位置的坐标，构成所述充电发射线圈的主轴方向，所述边界约束条件为：其中，和是所述充电发射线圈x方向上的坐标最小值和最大值，和是所述充电发射线圈y方向上的坐标最小值和最大值，和是所述充电发射线圈z方向的坐标最小值和最大值。在本申请实施例中，所述充电模块805具体可以用于：当所述充电发射线圈移动至所述目标位置并朝向所述目标方向时，控制电路对所述充电发射线圈施加交变电流，以使所述充电发射线圈产生交变磁场，使充电接收线圈产生交变电压；所述交变电压用于被胶囊内的充电电路转换为直流电信号，以实现对胶囊内窥镜的充电。对于装置实施例而言，由于其与方法实施例及系统实施例基本相似，所以描述得比较简单，相关之处参见方法实施例及系统实施例部分的说明即可。参照图9，示出了本申请实施例提供的一种计算机设备的示意图。如图9所示，本申请实施例中的计算机设备900包括：处理器910、存储器920以及存储在所述存储器920中并可在所述处理器910上运行的计算机程序921。所述处理器910执行所述计算机程序921时实现上述胶囊内窥镜的无线充电方法各个实施例中的步骤，例如图5所示的步骤S501至S505。或者，所述处理器910执行所述计算机程序921时实现上述各装置实施例中各模块/单元的功能，例如图6所示模块601至605的功能。示例性的，所述计算机程序921可以被分割成一个或多个模块/单元，所述一个或者多个模块/单元被存储在所述存储器920中，并由所述处理器910执行，以完成本申请。所述一个或多个模块/单元可以是能够完成特定功能的一系列计算机程序指令段，该指令段可以用于描述所述计算机程序921在所述计算机设备900中的执行过程。例如，所述计算机程序921可以被分割成获取模块、位置和方向确定模块、目标位置和目标方向确定模块、机械臂调整模块和充电模块，各模块具体功能如下：磁场信号获取模块，用于获取磁感应阵列感应到的磁场信号，所述磁场信号由胶囊内窥镜上的充电接收线圈在通电状态下产生；位置和方向确定模块，用于根据所述磁场信号确定所述充电接收线圈的位置和方向；目标位置和目标方向确定模块，用于根据所述充电接收线圈的位置和方向确定充电发射线圈的目标位置和目标方向，所述充电发射线圈安装于机械臂的末端；机械臂调整模块，用于通过调整所述机械臂将所述充电发射线圈移动至所述目标位置并朝向所述目标方向；其中，当所述充电发射线圈位于所述目标位置并朝向所述目标方向时，所述充电发射线圈与所述充电接收线圈之间的电磁耦合达到最大值；充电模块，用于通过所述充电发射线圈向所述充电接收线圈传输电能。所述计算机设备900可以是前述系统实施例及方法实施例中的体外控制器，该计算机设备900可以是桌上型计算机、云端服务器等计算设备。所述计算机设备900可包括，但不仅限于，处理器910、存储器920。本领域技术人员可以理解，图9仅仅是计算机设备900的一种示例，并不构成对计算机设备900的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件，例如所述计算机设备900还可以包括输入输出设备、网络接入设备、总线等。所述处理器910可以是中央处理单元，还可以是其他通用处理器、数字信号处理器、专用集成电路、现成可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等。所述存储器920可以是所述计算机设备900的内部存储单元，例如计算机设备900的硬盘或内存。所述存储器920也可以是所述计算机设备900的外部存储设备，例如所述计算机设备900上配备的插接式硬盘，智能存储卡，安全数字卡，闪存卡等等。进一步地，所述存储器920还可以既包括所述计算机设备900的内部存储单元也包括外部存储设备。所述存储器920用于存储所述计算机程序921以及所述计算机设备900所需的其他程序和数据。所述存储器920还可以用于暂时地存储已经输出或者将要输出的数据。本申请实施例还公开了一种计算机设备，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现如前述各个实施例所述的胶囊内窥镜的无线充电方法。本申请实施例还公开了一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序被处理器执行时实现如前述各个实施例所述的胶囊内窥镜的无线充电方法。本申请实施例还公开了一种计算机程序产品，当所述计算机程序产品在计算机上运行时，使得所述计算机执行前述各个实施例所述的胶囊内窥镜的无线充电方法。以上所述实施例仅用以说明本申请的技术方案，而非对其限制。尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围，均应包含在本申请的保护范围之内。
