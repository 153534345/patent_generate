标题title
适用于基于联盟链的边缘缓存系统的共识机制
摘要abst
本公开实施例是关于一种适用于基于联盟链的边缘缓存系统的共识机制。共识机制包括：节点模块，节点模块位于基于联盟链的边缘缓存系统中，节点模块包括领导者节点和服从者节点；其中，领导者节点用于将领导者任期内的区块信息发送给服从者节点以领导服从者节点达成共识；服从者节点用于接收领导者节点发送的区块信息，并按照领导者节点的指令将区块信息上传至服从者节点所在的区块链账本上。本申请通过利用领导者节点领导各服从者节点，将区块信息上传至各自的区块链账本上，以达成共识。共识机制适用于非拜占庭系统，性能效率较高，资源消耗较低，同时也应保证扩展性的共识机制。
权利要求书clms
1.适用于基于联盟链的边缘缓存系统的共识机制，其特征在于，所述共识机制包括：节点模块，所述节点模块位于所述基于联盟链的边缘缓存系统中，所述节点模块包括领导者节点和服从者节点；其中，所述领导者节点用于将所述领导者任期内的区块信息发送给所述服从者节点以领导所述服从者节点达成共识；所述服从者节点用于接收所述领导者节点发送的区块信息，并按照所述领导者节点的指令将所述区块信息上传至所述服从者节点所在的区块链账本上。2.根据权利要求1所述的共识机制，其特征在于，所述领导者节点的选举过程为：当在第一预设时间内没有接收到来自所述领导者节点的心跳时，开始进行选举，此时所述服从者节点转换为候选人节点，多个所述候选人节点形成候选人节点集群，根据候选人节点集群中的所述候选人节点的竞争参数进行领导者节点的选举；在所述选举时间内，所述候选人节点集群中的一个所述候选人节点获得多数选票，则所述候选人节点被成功选举为新的领导者节点；当所述新的领导者节点服务第二预设时间后，所述新的领导者节点停止发送所述心跳，此时，所述新的领导者节点的统治结束。3.根据权利要求1所述的共识机制，其特征在于，所述达成共识的过程为：所述领导者节点将缓存内容对应的日志进行打包并形成新的区块，所述领导者节点将所述新的区块发送给所有服从者节点，直至至少部分服从者节点复制所述新的区块对应的日志并保存在本地，然后将所保存在本地的所述新的区块上传至区块链账本，则所述新的区块被成功添加到区块链。4.根据权利要求2所述的共识机制，其特征在于，所述候选人节点的竞争参数为年龄。5.根据权利要求4所述的共识机制，其特征在于，所述服从者节点转换为所述候选人节点后，所述候选人节点的年龄增加第三预设时间。6.根据权利要求2所述的共识机制，其特征在于，在成功选举出新的领导者节点之前，所述服从者节点响应用户的请求并将所述服从者节点服务范围内的热点内容摘要作为日志条目加入到日志中。7.根据权利要求6所述的共识机制，其特征在于，当用户向节点模块请求目标内容时，所述服从者节点会获取所述目标内容的哈希值，并将所述目标内容的哈希值作为内容摘要继续在待缓目录日志中。8.根据权利要求7所述的共识机制，其特征在于，当所述待缓目录日志中已有所述目标内容的哈希值，则将所述目标内容的请求次数加一；如果所述待缓目录日志中没有所述目标内容的哈希值，则将所述所述目标内容添加到所述待缓目录中，并记录请求次数为1。9.根据权利要求8所述的共识机制，其特征在于，所述待缓目录日志中的内容摘要的请求次数会进行周期性衰减。10.根据权利要求9所述的共识机制，其特征在于，所述领导者节点在其任期内发送给所有服从者节点的新的区块的个数为1个。
说明书desc
技术领域本公开实施例涉及信息技术领域，尤其涉及一种适用于基于联盟链的边缘缓存系统的共识机制。背景技术基于联盟链的边缘缓存系统作为区块链技术重要的应用之一，其重要一环就是利用共识机制同步缓存列表，让各大运营商建立的边缘节点能够共享边缘缓存内容，提高资源利用率，降低缓存成本。而相关的共识机制大多聚焦于存在恶意攻击拜占庭系统中，花费了较多资源用于解决拜占庭系统当中对等节点间的信任问题，此类共识机制在带来高安全性能的同时也导致了算力资源的过度消耗，以及系统性能效率的严重不足。而在基于联盟链的边缘缓存架构中，参与共识的成员来自于运营商所部署的边缘缓存服务器，可以认为其大部分成员是受信任的非拜占庭节点，仅会出现故障但不会伪造信息。上述的共识机制无法较好的应用到基于联盟链的边缘缓存系统，为了提高基于联盟链的边缘缓存系统的性能效率，需要设计一种适用于非拜占庭系统的，性能效率较高，资源消耗较低，同时也应保证扩展性的共识机制。因此，有必要改善上述相关技术方案中存在的一个或者多个问题。需要说明的是，在上述背景技术部分公开的信息仅用于加强对本公开的背景的理解，因此可以包括不构成对本领域普通技术人员已知的现有技术的信息。发明内容本公开实施例的目的在于提供一种适用于基于联盟链的边缘缓存系统的共识机制，进而至少在一定程度上克服由于相关技术的限制和缺陷而导致的一个或者多个问题。本公开实施例提供一种适用于基于联盟链的边缘缓存系统的共识机制，所述共识机制包括：节点模块，所述节点模块位于所述基于联盟链的边缘缓存系统中，所述节点模块包括领导者节点和服从者节点；其中，所述领导者节点用于将所述领导者任期内的区块信息发送给所述服从者节点以领导所述服从者节点达成共识；所述服从者节点用于接收所述领导者节点发送的区块信息，并按照所述领导者节点的指令将所述区块信息上传至所述服从者节点所在的区块链账本上。本公开的一种示例性实施例中，所述领导者节点的选举过程为：当在第一预设时间内没有接收到来自所述领导者节点的心跳时，开始进行选举，此时所述服从者节点转换为候选人节点，多个所述候选人节点形成候选人节点集群，根据候选人节点集群中的所述候选人节点的竞争参数进行领导者节点的选举；在所述选举时间内，所述候选人节点集群中的一个所述候选人节点获得多数选票，则所述候选人节点被成功选举为新的领导者节点；当所述新的领导者节点服务第二预设时间后，所述新的领导者节点停止发送所述心跳，此时，所述新的领导者节点的统治结束。本公开的一种示例性实施例中，所述达成共识的过程为：所述领导者节点将缓存内容对应的日志进行打包并形成新的区块，所述领导者节点将所述新的区块发送给所有服从者节点，直至至少部分服从者节点复制所述新的区块对应的日志并保存在本地，然后将所保存在本地的所述新的区块上传至区块链账本，则所述新的区块被成功添加到区块链。本公开的一种示例性实施例中，所述候选人节点的竞争参数为年龄。本公开的一种示例性实施例中，所述服从者节点转换为所述候选人节点后，所述候选人节点的年龄增加第三预设时间。本公开的一种示例性实施例中，在成功选举出新的领导者节点之前，所述服从者节点响应用户的请求并将所述服从者节点服务范围内的热点内容摘要作为日志条目加入到日志中。本公开的一种示例性实施例中，当用户向节点模块请求目标内容时，所述服从者节点会获取所述目标内容的哈希值，并将所述目标内容的哈希值作为内容摘要继续在待缓目录日志中。本公开的一种示例性实施例中，当所述待缓目录日志中已有所述目标内容的哈希值，则将所述目标内容的请求次数加一；如果所述待缓目录日志中没有所述目标内容的哈希值，则将所述所述目标内容添加到所述待缓目录中，并记录请求次数为1。本公开的一种示例性实施例中，所述待缓目录日志中的内容摘要的请求次数会进行周期性衰减。本公开的一种示例性实施例中，所述领导者节点在其任期内发送给所有服从者节点的新的区块的个数为1个。本公开的实施例提供的技术方案可以包括以下有益效果：本公开的实施例中，通过利用领导者节点领导各服从者节点，将区块信息上传至各自的区块链账本上，以达成共识。所述共识机制适用于非拜占庭系统，性能效率较高，资源消耗较低，同时也应保证扩展性的共识机制。应当理解的是，以上的一般描述和后文的细节描述仅是示例性和解释性的，并不能限制本公开。附图说明此处的附图被并入说明书中并构成本说明书的一部分，示出了符合本公开的实施例，并与说明书一起用于解释本公开的原理。显而易见地，下面描述中的附图仅仅是本公开的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1示出本实施例中领导者节点的选举过程示意图。具体实施方式现在将参考附图更全面地描述示例实施方式。然而，示例实施方式能够以多种形式实施，且不应被理解为限于在此阐述的范例；相反，提供这些实施方式使得本公开将更加全面和完整，并将示例实施方式的构思全面地传达给本领域的技术人员。所描述的特征、结构或特性可以以任何合适的方式结合在一个或更多实施方式中。此外，附图仅为本公开的示意性图解，并非一定是按比例绘制。图中相同的附图标记表示相同或类似的部分，因而将省略对它们的重复描述。附图中所示的一些方框图是功能实体，不一定必须与物理或逻辑上独立的实体相对应。可以采用软件形式来实现这些功能实体，或在一个或多个硬件模块或集成电路中实现这些功能实体，或在不同网络和/或处理器装置和/或微控制器装置中实现这些功能实体。本示例实施方式提供了一种适用于基于联盟链的边缘缓存系统的共识机制，该共识机制可以包括：节点模块，所述节点模块位于所述基于联盟链的边缘缓存系统中，所述节点模块包括领导者节点和服从者节点。其中，所述领导者节点用于将所述领导者任期内的区块信息发送给所述服从者节点以领导所述服从者节点达成共识。所述服从者节点用于接收所述领导者节点发送的区块信息，并按照所述领导者节点的指令将所述区块信息上传至所述服从者节点所在的区块链账本上。本申请通过利用领导者节点领导各服从者节点，将区块信息上传至各自的区块链账本上，以达成共识。所述共识机制适用于非拜占庭系统，性能效率较高，资源消耗较低，同时也应保证扩展性的共识机制。具体地，如图1所示，所述领导者节点的选举过程为：当在第一预设时间内没有接收到来自所述领导者节点的心跳时，开始进行选举，此时所述服从者节点转换为候选人节点，多个所述候选人节点形成候选人节点集群，根据候选人节点集群中的所述候选人节点的竞争参数进行领导者节点的选举；在所述选举时间内，所述候选人节点集群中的一个所述候选人节点获得多数选票，则所述候选人节点被成功选举为新的领导者节点；当所述新的领导者节点服务第二预设时间后，所述新的领导者节点停止发送所述心跳，此时，所述新的领导者节点的统治结束。本实施例中，Followers在经过一段时间没有收到来自Leader的心跳之后，便会触发Leader选举。Follower会将身份转换为Candidate并将其当前term加1。它首先公布自己的年龄，之后Candidate根据当前Candidate集群中age最大的成员发送自己的选票。结果会有以下三种情况：赢得多数选票，成功选举为Leader；收到来自Leader的heartbeat，表示有其他节点已经抢先当选了Leader；没有节点赢得多数选票，Leader选举失败，等待选举时间超时后发起下一次选举。选举出Leader后，Leader通过定期向所有Followers发送heartbeat信息维持其统治。可选地，在一个实施例中，所述达成共识的过程为：所述领导者节点将缓存内容对应的日志进行打包并形成新的区块，所述领导者节点将所述新的区块发送给所有服从者节点，直至至少部分服从者节点复制所述新的区块对应的日志并保存在本地，然后将所保存在本地的所述新的区块上传至区块链账本，则所述新的区块被成功添加到区块链。本实施例中，选出一个新的Leader后，Leader开始执行记账权，更新缓存内容。节点在成为Leader之前，即为Follower时，会响应用户的请求并把服务范围内的热点内容摘要作为日志条目加入日志中。当某一内容经过系统节点的时候，Follower会求其内容的哈希值作为内容摘要并记录在待缓目录日志中如果待缓目录中已经具有该内容，则记录该内容的请求次数加一；如果待缓目录中没有对应的内容记录，则添加该内容至待缓目录中，并记录次数为一。待缓目录中的内容摘要的记录会随着周期进行衰落，即每隔一段时间内容的请求次数会衰减一次，每次次数衰减最低为1，次数为0的内容记录将会从待缓目录中剔除。当Follower竞选成功成为Leader之后，会将经过周期衰减后次数排名较靠前的若干内容摘要打包成区块，并向其他Followers并行发送该区块，其他Followers会复制这个区块，当这条区块被复制到大多数节点上时，Leader要求系统中所有节点将这条日志上传至其区块链账本，并向Leader返回执行结果。Leader再收到大部分确认上传的信息后，会将对应的缓存内容缓存在本地。某些Followers可能没有成功的复制日志，Leader会无限的重试发送直到所有的Followers最终存储了所有的日志条目。任何Leader在其任期内只能上传一个区块，在区块成功添加到区块链之后，经过任意的一段时间结束其任期并将当前age置为0。任期结束后的一段时间内会重新触发Leader选举。应当注意，尽管在上文详细描述中提及了用于动作执行的系统的若干模块，但是这种划分并非强制性的。实际上，根据本发明的实施方式，上文描述的两个或更多模块的特征和功能可以在一个模块中具体化。反之，上文描述的一个模块的特征和功能可以进一步划分为由多个模块来具体化。作为模块显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现木发明方案的目的。本领域普通技术人员在不付出创造性劳动的情况下，即可以理解并实施。上面结合附图对本发明的实施例进行了描述，但是本发明并不局限于上述的具体实施方式，上述的具体实施方式仅仅是示意性的，而不是限制性的，本领域的普通技术人员在本发明的启示下，在不脱离本发明宗旨和权利要求所保护的范围情况下，还可做出很多形式，这些均属于本发明的保护之内。
