标题title
一种基于海量数据的精准告警方法及系统
摘要abst
本发明属于数据处理技术领域，公开了一种基于海量数据的精准告警方法及系统。所述方法包括：获取当前时刻的运行数据。若所述运行数据被告警规则命中，则获取自当前时刻前溯的n个历史运行数据；计算当前运行数据的异常值，并在所述异常值大于预设的基准值时基于所述当前运行数据生成告警信息并推送。若所述运行数据未被告警规则命中，则计算下一时刻的预测运行数据，若所述下一时刻的预测运行数据被告警规则命中，则基于所述预测运行数据生成预警信息并推送。本申请不但可提高当下时刻的告警准确性，且可对下一时刻可能出现的异常进行预警。
权利要求书clms
1.一种基于海量数据的精准告警方法，其特征在于，包括：获取当前时刻的运行数据；若所述运行数据被告警规则命中，则获取自当前时刻前溯的n个历史运行数据；其中，获取的所述历史运行数据的数目与设备存在相应异常时的持续时长正相关；通过计算当前运行数据的异常值，并在所述异常值大于预设的基准值时基于所述当前运行数据生成告警信息并推送；其中，P为所述当前运行数据的异常值，通过计算当前运行数据与第i个历史运行数据的差值比例，yx为当前运行数据，yx-i为前溯的第i个历史运行数据；wi为与pi相应的权重，当pi≥30%时，wi=0.1，当pi＜30%时，wi=1；若所述运行数据未被告警规则命中，则通过计算下一时刻的预测运行数据，若所述下一时刻的预测运行数据被告警规则命中，则基于所述预测运行数据生成预警信息并推送；其中，Yx+1为下一时刻的预测运行数据，Yx为当前时刻的预测运行数据，dk为影响该运行数据的第k个影响系数，t为影响系数的总数。2.根据权利要求1所述的基于海量数据的精准告警方法，其特征在于，包括确定所述基准值，包括：获取一固定时长内的历史运行数据构成第一训练集及第一测试集；其中，所述第一训练集内的各历史运行数据按照采集时序排列；求解所述第一训练集内任一历史运行数据的异常值，对比基于所述异常值与本轮基准值得到的异常判断结果，及实际该历史运行数据下的设备运行状态以对所述本轮基准值进行修正；其中，所述修正的规则为：若所述异常判断结果与实际运行状态不一致，则将所述本轮基准值上调2%；基于第一测试集对修正后的本轮基准值进行验证；重复上述过程以确定所述基准值。3.根据权利要求1所述的基于海量数据的精准告警方法，其特征在于，包括确定各所述影响系数，包括：获取一固定时长内的历史运行数据构成第二训练集{y1,y2,…,yi,…,ym}，并确定与该项运行数据相应的影响系数集{d1,d2,…,dk,…,dt}；计算所述第二训练集中任一历史运行数据的相应的预测运行数据以得到预测集{Y1,Y2,…,Yi,…,Ym}；其中，；计算所述预测集与所述第二训练集间的误差集{ε1,ε2,…,εi,…,εm}；其中，；并通过计算标准差值，若所述标准差值大于预设阈值，则对各影响系数进行修正；重复上述过程以确定各所述影响系数。4.根据权利要求1所述的基于海量数据的精准告警方法，其特征在于，所述获取当前时刻的运行数据，包括：通过Kafka组件进行传感器参数的实时同步采集以获得原始数据；通过Apache Flink组件对所述原始数据进行解析处理以得到所述当前时刻的运行数据。5.根据权利要求1所述的基于海量数据的精准告警方法，其特征在于，所述基于所述当前运行数据生成告警信息并推送，包括：确定所述告警信息的告警等级；依据与所述告警等级相应的触达方式进行该告警信息的推送；其中，所述告警等级包括异常程度依次递增的第一等级、第二等级、第三等级、第四等级及第五等级；所述第一等级至第三等级的触达方式为文字消息，所述第四等级的触达方式为文字消息结合声音信号；所述第五等级的触达方式为文字消息结合声音信号及振动信号，且所述文字消息悬浮于接收客户端的显示前端。6.一种基于海量数据的精准告警系统，其特征在于，包括：第一获取模块，用于获取当前时刻的运行数据；第二获取模块，用于在所述运行数据被告警规则命中时，则获取自当前时刻前溯的n个历史运行数据；其中，获取的所述历史运行数据的数目与设备存在相应异常时的持续时长正相关；异常告警模块，用于在所述运行数据被告警规则命中时，通过计算当前运行数据的异常值，并在所述异常值大于预设的基准值时基于所述当前运行数据生成告警信息并推送；其中，P为所述当前运行数据的异常值，通过计算当前运行数据与第i个历史运行数据的差值比例，yx为当前运行数据，yx-i为前溯的第i个历史运行数据；wi为与pi相应的权重，当pi≥30%时，wi=0.1，当pi＜30%时，wi=1；异常预警模块，用于在所述运行数据未被告警规则命中时，则通过计算下一时刻的预测运行数据，若所述下一时刻的预测运行数据被告警规则命中，则基于所述预测运行数据生成预警信息并推送；其中，Yx+1为下一时刻的预测运行数据，Yx为当前时刻的预测运行数据，dk为影响该运行数据的第k个影响系数，t为影响系数的总数。7.根据权利要求6所述的基于海量数据的精准告警系统，其特征在于，包括：第三获取模块，用于获取一固定时长内的历史运行数据构成第一训练集及第一测试集；其中，所述第一训练集内的各历史运行数据按照采集时序排列；第一训练模块，用于求解所述第一训练集内任一历史运行数据的异常值，对比基于所述异常值与本轮基准值得到的异常判断结果，及实际该历史运行数据下的设备运行状态以对所述本轮基准值进行修正；其中，所述修正的规则为：若所述异常判断结果与实际运行状态不一致，则将所述本轮基准值上调2%；第一测试模块，用于基于第一测试集对修正后的本轮基准值进行验证；第一迭代模块，用于重复调用上述各模块以确定所述基准值。8.根据权利要求6所述的基于海量数据的精准告警系统，其特征在于，包括：第四获取模块，用于获取一固定时长内的历史运行数据构成第二训练集{y1,y2,…,yi,…,ym}，并确定与该项运行数据相应的影响系数集{d1,d2,…,dk,…,dt}；第一计算模块，用于计算所述第二训练集中任一历史运行数据的相应的预测运行数据以得到预测集{Y1,Y2,…,Yi,…,Ym}；其中，；第二计算模块，用于计算所述预测集与所述第二训练集间的误差集{ε1,ε2,…,εi,…,εm}；其中，；并通过计算标准差值，若所述标准差值大于预设阈值，则对各影响系数进行修正；第二迭代模块，用于重复调用上述各模块以确定各所述影响系数。9.根据权利要求6所述的基于海量数据的精准告警系统，其特征在于，包括：第一传输模块，用于通过Kafka组件进行传感器参数的实时同步采集以获得原始数据；第一处理模块，用于通过Apache Flink组件对所述原始数据进行解析处理以得到所述当前时刻的运行数据。10.根据权利要求6所述的基于海量数据的精准告警系统，其特征在于，包括：等级确认模块，用于确定所述告警信息的告警等级；告警推送模块，用于依据与所述告警等级相应的触达方式进行该告警信息的推送；其中，所述告警等级包括异常程度依次递增的第一等级、第二等级、第三等级、第四等级及第五等级；所述第一等级至第三等级的触达方式为文字消息，所述第四等级的触达方式为文字消息结合声音信号；所述第五等级的触达方式为文字消息结合声音信号及振动信号，且所述文字消息悬浮于接收客户端的显示前端。
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及一种基于海量数据的精准告警方法及系统。背景技术在目前的自动化工业生产中，各类设备均可依据内部逻辑按预先设定的程序进行自动运行，但由于其无法对运行过程中的大部分异常调整，并进行宕机处理。因此需要通过采集的各类运行数据实现运维人员对其运行状态的监控；同时为了使运维人员在异常运行时及时介入以降低损失。还需要获取各类运行数据中的异常数据作为告警数据，并将所述告警数据生成告警信息上报推送给运维人员。现有的告警数据的获取方式为：首先，将所有上报的运行数据与预先设置的告警规则相应匹配；然后将被告警规则命中的异常数据作为告警数据。但在设备运行过程中常存在参数随机波动或数据上报过程中传输异常等偶发情况，因此虽然基于相应异常数据分析，设备此时处于异常状态；但实际上设备却处于正常运行状态。此时上述方法则无法在该类情况下通过相应的告警数据及告警信息进行正确反馈。特别是受目前工业设备的复杂性影响及数据采集的实时性要求，在设备的运行状态监控中，频繁的数据采集会产生海量的运行数据。在该海量数据的基础上，上述现有告警数据获取方法的缺陷在实际运行过程中将尤为明显突出，即会出现频繁的错误告警情况；从而导致运维人员无法及时对设备的真实运行状态进行获取，并对实际上异常运行的设备进行及时的介入处理。同时现有的告警信息均基于已存在的告警数据获取，因此运维人员只能对已出现的异常进行针对性处理，并通过及时介入去减少异常造成的损失。由此可见，该异常告警及处理实际上为一被动过程，因此在减少产能损失或设备异常损失，并降低运维人员工作难度等方面仍存在着技术瓶颈。发明内容本发明目的在于提供一种基于海量数据的精准告警方法及系统，用于解决现有异常数据筛选及异常告警在实际生产中存在准确率低，且在降低异常损失及人员工作难度方面存在技术瓶颈的技术问题。为达成上述目的，本发明提出如下技术方案：一种基于海量数据的精准告警方法，包括：获取当前时刻的运行数据；若所述运行数据被告警规则命中，则获取自当前时刻前溯的n个历史运行数据；其中，获取的所述历史运行数据的数目与设备存在相应异常时的持续时长正相关；通过计算当前运行数据的异常值，并在所述异常值大于预设的基准值时基于所述当前运行数据生成告警信息并推送；其中，P为所述当前运行数据的异常值，通过计算当前运行数据与第i个历史运行数据的差值比例，yx为当前运行数据，yx-i为前溯的第i个历史运行数据；wi为与pi相应的权重，当pi≥30%时，wi=0.1，当pi＜30%时，wi=1；若所述运行数据未被告警规则命中，则通过计算下一时刻的预测运行数据，若所述下一时刻的预测运行数据被告警规则命中，则基于所述预测运行数据生成预警信息并推送；其中，Yx+1为下一时刻的预测运行数据，Yx为当前时刻的预测运行数据，dk为影响该运行数据的第k个影响系数，t为影响系数的总数。进一步的，包括确定所述基准值，包括：获取一固定时长内的历史运行数据构成第一训练集及第一测试集；其中，所述第一训练集内的各历史运行数据按照采集时序排列；求解所述第一训练集内任一历史运行数据的异常值，对比基于所述异常值与本轮基准值得到的异常判断结果，及实际该历史运行数据下的设备运行状态以对所述本轮基准值进行修正；其中，所述修正的规则为：若所述异常判断结果与实际运行状态不一致，则将所述本轮基准值上调2%；基于第一测试集对修正后的本轮基准值进行验证；重复上述过程以确定所述基准值。进一步的，包括确定各所述影响系数，包括：获取一固定时长内的历史运行数据构成第二训练集{y1,y2,…,yi,…,ym}，并确定与该项运行数据相应的影响系数集{d1,d2,…,dk,…,dt}；计算所述第二训练集中任一历史运行数据的相应的预测运行数据以得到预测集{Y1,Y2,…,Yi,…,Ym}；其中，；计算所述预测集与所述第二训练集间的误差集{ε1,ε2,…,εi,…,εm}；其中，；并通过计算标准差值，若所述标准差值大于预设阈值，则对各影响系数进行修正；重复上述过程以确定各所述影响系数。进一步的，所述获取当前时刻的运行数据，包括：通过Kafka组件进行传感器参数的实时同步采集以获得原始数据；通过Apache Flink组件对所述原始数据进行解析处理以得到所述当前时刻的运行数据。进一步的，所述基于所述当前运行数据生成告警信息并推送，包括：确定所述告警信息的告警等级；依据与所述告警等级相应的触达方式进行该告警信息的推送；其中，所述告警等级包括异常程度依次递增的第一等级、第二等级、第三等级、第四等级及第五等级；所述第一等级至第三等级的触达方式为文字消息，所述第四等级的触达方式为文字消息结合声音信号；所述第五等级的触达方式为文字消息结合声音信号及振动信号，且所述文字消息悬浮于接收客户端的显示前端。一种基于海量数据的精准告警系统，包括：第一获取模块，用于获取当前时刻的运行数据；第二获取模块，用于在所述运行数据被告警规则命中时，则获取自当前时刻前溯的n个历史运行数据；其中，获取的所述历史运行数据的数目与设备存在相应异常时的持续时长正相关；异常告警模块，用于在所述运行数据被告警规则命中时，通过计算当前运行数据的异常值，并在所述异常值大于预设的基准值时基于所述当前运行数据生成告警信息并推送；其中，P为所述当前运行数据的异常值，通过计算当前运行数据与第i个历史运行数据的差值比例，yx为当前运行数据，yx-i为前溯的第i个历史运行数据；wi为与pi相应的权重，当pi≥30%时，wi=0.1，当pi＜30%时，wi=1；异常预警模块，用于在所述运行数据未被告警规则命中时，则通过计算下一时刻的预测运行数据，若所述下一时刻的预测运行数据被告警规则命中，则基于所述预测运行数据生成预警信息并推送；其中，Yx+1为下一时刻的预测运行数据，Yx为当前时刻的预测运行数据，dk为影响该运行数据的第k个影响系数，t为影响系数的总数。进一步的，包括：第三获取模块，用于获取一固定时长内的历史运行数据构成第一训练集及第一测试集；其中，所述第一训练集内的各历史运行数据按照采集时序排列；第一训练模块，用于求解所述第一训练集内任一历史运行数据的异常值，对比基于所述异常值与本轮基准值得到的异常判断结果，及实际该历史运行数据下的设备运行状态以对所述本轮基准值进行修正；其中，所述修正的规则为：若所述异常判断结果与实际运行状态不一致，则将所述本轮基准值上调2%；第一测试模块，用于基于第一测试集对修正后的本轮基准值进行验证；第一迭代模块，用于重复调用上述各模块以确定所述基准值。进一步的，包括：第四获取模块，用于获取一固定时长内的历史运行数据构成第二训练集{y1,y2,…,yi,…,ym}，并确定与该项运行数据相应的影响系数集{d1,d2,…,dk,…,dt}；第一计算模块，用于计算所述第二训练集中任一历史运行数据的相应的预测运行数据以得到预测集{Y1,Y2,…,Yi,…,Ym}；其中，；第二计算模块，用于计算所述预测集与所述第二训练集间的误差集{ε1,ε2,…,εi,…,εm}；其中，；并通过计算标准差值，若所述标准差值大于预设阈值，则对各影响系数进行修正；第二迭代模块，用于重复调用上述各模块以确定各所述影响系数。进一步的，包括：第一传输模块，用于通过Kafka组件进行传感器参数的实时同步采集以获得原始数据；第一处理模块，用于通过Apache Flink组件对所述原始数据进行解析处理以得到所述当前时刻的运行数据。进一步的，包括：等级确认模块，用于确定所述告警信息的告警等级；告警推送模块，用于依据与所述告警等级相应的触达方式进行该告警信息的推送；其中，所述告警等级包括异常程度依次递增的第一等级、第二等级、第三等级、第四等级及第五等级；所述第一等级至第三等级的触达方式为文字消息，所述第四等级的触达方式为文字消息结合声音信号；所述第五等级的触达方式为文字消息结合声音信号及振动信号，且所述文字消息悬浮于接收客户端的显示前端。有益效果：由以上技术方案可知，本发明提供了一种基于海量数据的精准告警方法，以改善现有工业生产中海量数据基础上，告警信息的误差率高；且仅可获取当前时刻的异常情况而无法对设备的运行状态进行预测，从而在降低损失，提高运维人员工作效率方面存在技术瓶颈的缺陷。所述方法中，首先获取了当前时刻的运行数据，然后基于告警规则对获取的当前运行数据进行筛选，并基于不同的筛选结果再采取不同的处理措施。若所述当前运行数据被所述告警规则命中，则证明所述当前运行数据为异常数据，但无法确认该异常数据对应的设备当前状态是否也处于异常情况。因此继续计算所述当前运行数据的异常值，具体的，所述异常值的获取包括如下步骤：首先，计算当前运行数据与自其前溯n个历史运行数据的差值比例；然后，计算各所述差值比例的加权平均以作为异常值；并在差值比例较大时为其赋较小的权重，在差值比例较小时为其赋较大的权重。由于传输异常或参数扰动等噪音造成的数据异常一般表现为突刺型，且同类数据量较小，因此此处综合考虑当前运行数据与临近历史数据的比对情况，并为较大的差值比例赋较小的权重；从而当所述当前运行数据被告警规则命中时，有效剔除掉了其实际为噪音数据的情况。而当所述当前运行数据未被所述告警规则命中时，则会基于其对下一时刻的运行数据进行预测，以提前获取设备可能存在的异常情况；从而在异常发生前进行介入，避免异常发生。具体的，下一时刻的预测运行数据的获取由计算得到，其与和该项运行数据相关的各项影响系数同时相关；又与上一时刻对当前运行数据的预测结果相关。因此在预测过程中可综合考虑各因素对下一时刻运行数据的作用，并考虑连续预测存在的偏差；以提高下一时刻的预测运行数据的准确性。由此可见，本技术方案不但可有效提高告警信息的准确性，且可对未来时刻的设备运行状态进行预警以避免异常发生。应当理解，前述构思以及在下面更加详细地描述的额外构思的所有组合只要在这样的构思不相互矛盾的情况下都可以被视为本公开的发明主题的一部分。结合附图从下面的描述中可以更加全面地理解本发明教导的前述和其他方面、实施例和特征。本发明的其他附加方面例如示例性实施方式的特征和/或有益效果将在下面的描述中显见，或通过根据本发明教导的具体实施方式的实践中得知。附图说明附图不意在按比例绘制。在附图中，在各个图中示出的每个相同或近似相同的组成部分可以用相同的标号表示。为了清晰起见，在每个图中，并非每个组成部分均被标记。现在，将通过例子并参考附图来描述本发明的各个方面的实施例，其中：图1 为本实施例所述的基于海量数据的精准告警方法的流程图；图2 为获取所述当前时刻的运行数据的流程图；图3 为确定图1中所述基准值的流程图；图4 为告警信息的推送流程图；图5 为确定图1中各所述影响系数的流程图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例的附图,对本发明实施例的技术方案进行清楚、完整地描述。显然,所描述的实施例是本发明的一部分实施例,而不是全部的实施例。基于所描述的本发明的实施例,本领域普通技术人员在无需创造性劳动的前提下所获得的所有其他实施例,都属于本发明保护的范围。除非另作定义,此处使用的技术术语或者科学术语应当为本发明所属领域内具有一般技能的人士所理解的通常意义。本发明专利申请说明书以及权利要求书中使用的“第一”、“第二”以及类似的词语并不表示任何顺序、数量或者重要性,而只是用来区分不同的组成部分。同样, 除非上下文清楚地指明其它情况，否则单数形式的“一个”“一”或者“该”等类似词语也不表示数量限制,而是表示存在至少一个。“包括”或者“包含”等类似的词语意指出现在“包括”或者“包含”前面的元件或者物件涵盖出现在“包括”或者“包含”后面列举的特征、整体、步骤、操作、元素和/或组件, 并不排除一个或多个其它特征、整体、步骤、 操作、元素、组件和/或其集合的存在或添加。“上”“下”“左”“右”等仅用于表示相对位置关系，当被描述对象的绝对位置改变后,则该相对位置关系也可能相应地改变。现有技术中，设备的告警信息仅基于异常数据获取，而忽略了异常数据中的噪音数据；从而造成告警信息存在误报的情况。且在目标工业生产的海量数据的基础上，错误告警情况会尤为明显突出；从而导致运维人员无法及时对设备的真实运行状态进行获取，并对实际上异常运行的设备进行及时的介入处理。同时现有的告警信息获取为一异常发生情况下的被动行为，由于缺乏预测性从而导致在减少产能损失或设备异常损失，并降低运维人员工作难度等方面存在着技术瓶颈。基于此，本实施例旨在提供一种基于海量数据的精准告警方法及系统，以改善现有技术中存在的上述缺陷。下面结合附图所示，对本实施例公开的基于海量数据的精准告警方法作具体介绍。结合图1所示，所述方法包括如下步骤：步骤S102、获取当前时刻的运行数据。在现有的较大型工业生产中，每天会产生海量的采集数据；为了避免该海量数据导致的系统性能下降，进而导致告警延迟或数据丢失的情况，本实施例在所述当前时刻的运行数据的获取过程中引入了大数据处理相关组件Kafka及Apache Flink。其中，Kafka是一种高吞吐量的分布式发布订阅消息系统，能够有效解决海量数据引发系统性能降低；Apache Flink可以通过数据并行或流水线方式执行任意流数据程序。因此作为一种具体的实施方式，如图2所示，所述当前时刻的运行数据通过如下步骤获取：步骤S102.2、通过Kafka组件进行传感器参数的实时同步采集以获得原始数据。步骤S102.4、通过Apache Flink组件对所述原始数据进行解析处理以得到所述当前时刻的运行数据。此时，通过步骤S102.2~步骤S102.4，可有效抑制海量数据处理的延时及遗漏情况，提高告警时效性及准确性。步骤S104、若所述运行数据被告警规则命中，则获取自当前时刻前溯的n个历史运行数据；其中，获取的所述历史运行数据的数目与设备存在相应异常时的持续时长正相关。所述告警规则由规则引擎设置得到，运维人员可针对不同设备及同一设备的不同点位设置不同的告警规则。具体的，所述告警规则包括告警等级、告警联系人、触发规则及触达方式。所述告警等级默认包含高、中、低三种等级；也可自定义等级，用于差异化告警处理。所述告警联系人包括：负责相应设备的运维人员或运维组。所述触发规则包括：大于等于、小于等于、区间内、区间外等。所述触达方式包括：电话通知、短信通知、运维客户端通知；可根据不同告警等级设置不同触达方式。发明人在实际中发现不同异常反映在异常数据上时持续的时长不同。因此设置获取的所述历史运行数据的数目与设备存在相应异常时的持续时长正相关；以确保前溯的历史数据的个数n可真实反映设备的历史状态，从而提高后续判断时的准确性。步骤S106、计算当前运行数据的异常值，并在所述异常值大于预设的基准值时基于所述当前运行数据生成告警信息并推送。作为一种具体的实施方式，所述异常值的计算通过如下步骤进行：首先，计算当前运行数据与第i个历史运行数据间的差值绝对值：；yx为当前运行数据，yx-i为第i个历史运行数据；以通过其反映该当前运行数据与历史运行数据的差异性。其次，计算当前运行数据与第i个历史运行数据的差值比例；以消除当前运行数据的具体数值对两者差异性的影响；也通过该归一化处理便于针对设备各项参数设置相应的基准值时的一致性。最终，通过计算所述异常值；其中，wi为与pi相应的权重，当pi≥30%时，wi=0.1，当pi＜30%时，wi=1。噪音数据表现形式一般为突刺，因此相邻数据差值较大时降低其权重，可避免偶发少量噪音数据的影响。同时，发明人在实际应用时发现，当pi≥30%时，wi=0.1，当pi＜30%时，wi=1计算得到的异常值在进行判断时更加简单，且准确率也较好。同时，基准值也决定着该判断结果的准确性，因此作为一种具体的实施方式，结合图3所示，所述基准值的确定步骤包括：步骤S202、获取一固定时长内的历史运行数据构成第一训练集及第一测试集；其中，所述第一训练集内的各历史运行数据按照采集时序排列。步骤S204、求解所述第一训练集内任一历史运行数据的异常值，对比基于所述异常值与本轮基准值得到的异常判断结果，及实际该历史运行数据下的设备运行状态以对所述本轮基准值进行修正；其中，所述修正的规则为：若所述异常判断结果与实际运行状态不一致，则将所述本轮基准值上调2%。步骤S206、基于第一测试集对修正后的本轮基准值进行验证。步骤S208、重复上述过程以确定所述基准值。此时通过重复迭代的修改与验证即可确保所述基准值的准确性。作为一种优选的实施方式，基于海量数据的大数据量特点，在步骤S202中，将所述第一训练集均分为若干个子集。此时，在步骤S204中，依次通过各所述子集进行本轮基准值修正训练。为了防止告警信息过多，而造成遗漏等级较高的告警信息的情况。结合图4所示，所述基于所述当前运行数据生成告警信息并推送，包括：步骤S106.2、确定所述告警信息的告警等级。本实施例中，设置所述告警等级包括异常程度依次递增的第一等级、第二等级、第三等级、第四等级及第五等级。步骤S106.4、依据与所述告警等级相应的触达方式进行该告警信息的推送。本实施例中，所述第一等级至第三等级的触达方式为文字消息，所述第四等级的触达方式为文字消息结合声音信号；所述第五等级的触达方式为文字消息结合声音信号及振动信号，且所述文字消息悬浮于接收客户端的显示前端。作为一种具体的实施方式，与各告警等级相应的触达方式具体为：当运维客户端的系统为android8.0以下时，第一等级至第三等级:静默通知，无声音、无振动、无浮动。第四等级:有声音，无振动、无浮动。第五等级:有声音，有振动，有浮动。当运维客户端的系统为android8.0以上时，第一等级：无声音、无振动、无显示。第二等级：无声音、无振动，锁屏不显示，通知栏中被折叠显示，导航栏无logo。第三等级：无声音，无振动，锁屏和通知栏中都显示，通知不唤醒屏幕。第四等级：有声音，无振动，锁屏和通知栏中都显示，通知唤醒屏幕。第五等级：有声音，有振动，亮屏下通知悬浮展示，锁屏通知以默认形式展示且唤醒屏幕。步骤S108、若所述运行数据未被告警规则命中，则通过计算下一时刻的预测运行数据，若所述下一时刻的预测运行数据被告警规则命中，则基于所述预测运行数据生成预警信息并推送；其中，Yx为当前时刻的预测运行数据，dk为影响该运行数据的第k个影响系数。本步骤中，由于所述下一时刻的预测运行数据在计算时，考虑了和该项运行数据相关的各项影响系数；又考虑了上一时刻对当前运行数据的预测结果相关。因此在预测过程中可同时考虑各因素对下一时刻运行数据的作用，及连续预测存在的偏差影响；以提高下一时刻的预测运行数据的准确性。且由上述计算公式可见，各所述影响系数的选定决定着预测的准确性，因此结合图5所示，各所述影响系数的确定过程包括：步骤S302、获取一固定时长内的历史运行数据构成第二训练集{y1,y2,…,yi,…,ym}，并确定与该项运行数据相应的影响系数集{d1,d2,…,dk,…,dt}。步骤S304、计算所述第二训练集中任一历史运行数据的相应的预测运行数据以得到预测集{Y1,Y2,…,Yi,…,Ym}；其中，。步骤S306、计算所述预测集与所述第二训练集间的误差集{ε1,ε2,…,εi,…,εm}；其中，；并通过计算标准差值，若所述标准差值大于预设阈值，则对各影响系数进行修正。步骤S308、重复上述过程以确定各所述影响系数。由步骤S302~步骤S308可见，由于运行数据为各影响系数共同作用的结果，因此在整个过程中对各影响系数进行了综合评价优化，从而避免了采用单因素优化方式造成预测运行数据与实际运行数据误差较大的情况。上述程序可以运行在处理器中，或者也可以存储在存储器中，计算机可读介质包括永久性和非永久性、可移动和非可移动媒体可以由任何方法或技术来实现信息存储。信息可以是计算机可读指令、数据结构、程序的模块或其他数据。计算机的存储介质的例子包括，但不限于相变内存 、静态随机存取存储器、动态随机存取存储器 、其他类型的随机存取存储器 、只读存储器、电可擦除可编程只读存储器 、快闪记忆体或其他内存技术、只读光盘只读存储器 、数字多功能光盘  或其他光学存储、磁盒式磁带，磁带磁磁盘存储或其他磁性存储设备或任何其他非传输介质，可用于存储可以被计算设备访问的信息。按照本文中的界定，计算机可读介质不包括暂存电脑可读媒体，如调制的数据信号和载波。这些计算机程序也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的步骤，对应与不同的步骤可以通过不同的模块来实现。本实施例还提供了一种基于上述方法搭建的系统，所述系统可以称为一种基于海量数据的精准告警系统。所述系统包括：第一获取模块，用于获取当前时刻的运行数据。第二获取模块，用于在所述运行数据是否被告警规则命中时，获取自当前时刻前溯的n个历史运行数据；其中，获取的所述历史运行数据的数目与设备存在相应异常时的持续时长正相关。异常告警模块，用于在所述运行数据是否被告警规则命中时，通过计算当前运行数据的异常值，并在所述异常值大于预设的基准值时基于所述当前运行数据生成告警信息并推送；其中，通过计算当前运行数据与第i个历史运行数据的差值比例，yx为当前运行数据，yx-i为第i个历史运行数据；wi为与pi相应的权重，当pi≥30%时，wi=0.1，当pi＜30%时，wi=1。异常预警模块，用于在所述运行数据未被告警规则命中时，通过计算下一时刻的预测运行数据，若所述下一时刻的预测运行数据被告警规则命中，则基于所述预测运行数据生成预警信息并推送；其中，Yx为当前时刻的预测运行数据，dk为影响该运行数据的第k个影响系数。该系统用于实现上述方法的步骤，因此已经进行说明的，在此不再赘述。例如，所述系统还包括：第三获取模块，用于获取一固定时长内的历史运行数据构成第一训练集及第一测试集；其中，所述第一训练集内的各历史运行数据按照采集时序排列。第一训练模块，用于求解所述第一训练集内任一历史运行数据的异常值，对比基于所述异常值与本轮基准值得到的异常判断结果，及实际该历史运行数据下的设备运行状态以对所述本轮基准值进行修正；其中，所述修正的规则为：若所述异常判断结果与实际运行状态不一致，则将所述本轮基准值上调2%。第一测试模块，用于基于第一测试集对修正后的本轮基准值进行验证。第一迭代模块，用于重复调用上述各模块以确定所述基准值。例如，所述系统还包括：第四获取模块，用于获取一固定时长内的历史运行数据构成第二训练集{y1,y2,…,yi,…,ym}，并确定与该项运行数据相应的影响系数集{d1,d2,…,dk,…,dt}。第一计算模块，用于计算所述第二训练集中任一历史运行数据的相应的预测运行数据以得到预测集{Y1,Y2,…,Yi,…,Ym}；其中，。第二计算模块，用于计算所述预测集与所述第二训练集间的误差集{ε1,ε2,…,εi,…,εm}；其中，；并通过计算标准差值，若所述标准差值大于预设阈值，则对各影响系数进行修正。第二迭代模块，用于重复调用上述各模块以确定各所述影响系数。例如，所述系统还包括：第一传输模块，用于通过Kafka组件进行传感器参数的实时同步采集以获得原始数据。第一处理模块，用于通过Apache Flink组件对所述原始数据进行解析处理以得到所述当前时刻的运行数据。例如，所述系统还包括：等级确认模块，用于确定所述告警信息的告警等级。告警推送模块，用于依据与所述告警等级相应的触达方式进行该告警信息的推送。其中，所述告警等级包括异常程度依次递增的第一等级、第二等级、第三等级、第四等级及第五等级；所述第一等级至第三等级的触达方式为文字消息，所述第四等级的触达方式为文字消息结合声音信号；所述第五等级的触达方式为文字消息结合声音信号及振动信号，且所述文字消息悬浮于接收客户端的显示前端。虽然本发明已以较佳实施例揭露如上，然其并非用以限定本发明。本发明所属技术领域中具有通常知识者，在不脱离本发明的精神和范围内，当可作各种的更动与润饰。因此，本发明的保护范围当视权利要求书所界定者为准。
