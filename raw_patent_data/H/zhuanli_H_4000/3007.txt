标题title
一种高精度通道信号延迟自动校准装置及方法
摘要abst
本发明公开了一种高精度通道信号延迟自动校准装置及方法，包括射频模块，射频模块含两个以上的射频通道；射频模块输出端连接有模数转换模块，模数转换模块包含两个以上的模数转换器，每个模数转换器将一个射频通道输出的模拟中频转换为数字中频信号；模数转换模块的输出端连接有延迟计算模块，延迟计算模块还连接有用于存储的数据存储模块；本发明基于阵列天线既有硬件体系，利用可以时分复用的方式同阵列天线接收处理的其他模块共用，在保证性能的同时，无明显成本增加，无需矢量网络分析仪等复杂测试仪器支持即可实现各通道延迟的高精度计算。
权利要求书clms
1.一种高精度通道信号延迟自动校准装置，其特征在于：包括射频模块，射频模块含两个以上的射频通道，各通道独立完成对输入信号的接收处理，包括滤波、下变频、镜像抑制和放大处理；射频模块输出端连接有模数转换模块，模数转换模块包含两个以上的模数转换器，每个模数转换器将一个射频通道输出的模拟中频转换为数字中频信号；模数转换模块的输出端连接有延迟计算模块，延迟计算模块还连接有用于存储的数据存储模块；延迟计算模块包括数据缓存模块，数据缓存模块包含同通道个数相同的两个以上的数据缓存子模块，每个数据缓存子模块保存一路数字中频；各模块同时开始保存，同时结束保存，且保存的数据点数相同；数据缓存模块的输出端连接有复用控制逻辑模块；复用控制逻辑模块实现对数据缓存模块中多路数据的读取，复用控制逻辑模块同时读取参考通道和待处理通道共两个通道的数字中频数据；复用控制逻辑模块输出端连接有粗延迟计算模块，粗延迟计算模块接收两路数字中频数据，在时域检测两路中频信号粗的相位延迟；延迟计算模块的输出端连接有时序延迟模块,时序延迟模块利用粗延迟计算模块的检测结果，以参考通道为基准，对待测通道进行时序延迟，得到延迟误差为最大±1个时钟的近似同步的两路数字中频数据；时序延迟模块的输出端连接有傅里叶变换模块；傅里叶变换模块对粗对准的参考通道和待测通道，分别进行快速傅里叶变换，将时域数据变换到频域；傅里叶变换模块的输出端连接有峰值找大模块，峰值找大模块从傅里叶变换模块输出的频域数据中，找到峰值位置并记录复数峰值结果；峰值找大模块的输出端连接有反正切模块，反正切模块对复数峰值结果对应的复数求取相位角；每个通道的每组数据可得到一个相位角；反正切模块的输出端连接有相位差计算模块；相位差计算模块利用反正切模块输出的相位角，计算参考通道和其余通道间的相位角值差，得到两个通道间的精确延迟；相位差计算模块的输出端和粗延迟计算模块的输出端还连接有用于储存粗延迟结果和通道相位差的数据存储模块4。2.根据权利要求1所述的高精度通道信号延迟自动校准装置，其特征在于：数据缓存模块数据缓存点数大于或等于快速傅里叶变换的点数。3.根据权利要求3所述的高精度通道信号延迟自动校准装置，其特征在于：数据缓存模块数据缓存点数为1024点。4.根据权利要求1所述的高精度通道信号延迟自动校准装置，其特征在于：粗延迟计算模块接收两路数字中频数据，使用时序检测方法，在时域检测两路中频信号间的相位延迟。5.根据权利要求4所述的高精度通道信号延迟自动校准装置，其特征在于：所述的时序检测方法为过零点检测方法。6.根据权利要求1所述的高精度通道信号延迟自动校准装置，其特征在于：傅里叶变换模块对粗对准的参考通道和待测通道分别进行快速傅里叶变换，快速傅里叶变换的数据长度按实际信号信噪比调整。7.根据权利要求6所述的高精度通道信号延迟自动校准装置，其特征在于：快速傅里叶变换的数据长度为1024点。8.一种高精度通道信号延迟自动校准方法，利用权利要求1所述的高精度通道信号延迟自动校准装置，其特征在于包括如下步骤：步骤一：射频模块中各自独立的通道将信号变频到模拟中频，模拟中频信号输入模数转换模块后转换成数字中频信号，模数转换后的数字中频信号送信号处理模块；步骤二：信号处理模块包括数据缓存模块和数据读取模块；信号处理模块接收模数转换后的数字中频信号，数据缓存模块缓存多路并行数据；数据读取模块将数据输出到粗延迟计算模块；粗延迟计算模块选定通道1为参考通道，使用时序方法直接求取其余各路中频相对于参考通道的延迟，得到以采样时钟为单位的粗延迟结果；时序延迟模块按粗延迟结果对各路数字中频进行时序延迟，实现粗延迟进行时序延迟补偿；步骤三：对粗延迟进行时序延迟补偿后的多路数字中频数据，输出至傅里叶变换模块，傅里叶变换模块使用快速傅里叶方法分别完成频谱分析；峰值找大模块在各路频谱计算结果中分别寻找最大值点，得到各接收到的接收信号的复频率值；反正切模块对各通道的复频率值分别进行反正切计算，得到各通道接收信号的相位角；相位差计算模块选定通道1为参考通道，使用其余通道相位角同参考通道相位角做差，得到各通道间延迟差值；步骤四：将延迟计算模块算出的通道间粗延迟时钟个数和精确延迟相位差值存入数据存储模块，供后续调用。
说明书desc
技术领域本发明涉及卫星导航定位技术领域，涉及阵列天线一致性技术，尤其涉及一种高精度通道信号延迟自动校准装置及方法。背景技术卫星导航信号到达地面附近时极度微弱，远低于环境底噪，极易受到有意或无意的电磁辐射影响，抗干扰卫星导航接收天线是解决卫星导航电磁干扰问题的有效途径。阵列天线采用多通道并行接收，各通道应保证对平行入射的电磁波具有相同的处理效果，在对信号的幅度、频率、相位等各参数的设计和处理中，尤以相位精度要求高，且难以定量确定。发明内容本发明为解决上述问题，提供一种高精度通道信号延迟自动校准装置及方法，解决卫星导航阵列天线在设计、生产调试过程中对通道延迟的测试和校正需求。为达到上述目的，本发明采用如下技术方案：高精度通道信号延迟自动校准装置包括射频模块，射频模块含两个以上的射频通道，各通道独立完成对输入信号的接收处理，包括滤波、下变频、镜像抑制和放大处理；射频模块输出端连接有模数转换模块，模数转换模块包含两个以上的模数转换器，每个模数转换器将一个射频通道输出的模拟中频转换为数字中频信号；模数转换模块的输出端连接有延迟计算模块，延迟计算模块还连接有用于存储的数据存储模块；延迟计算模块包括数据缓存模块，数据缓存模块包含同通道个数相同的两个以上的数据缓存子模块，每个数据缓存子模块保存一路数字中频；各模块同时开始保存，同时结束保存，且保存的数据点数相同；数据缓存模块的输出端连接有复用控制逻辑模块；复用控制逻辑模块实现对数据缓存模块中多路数据的读取，复用控制逻辑模块同时读取参考通道和待处理通道共两个通道的数字中频数据；复用控制逻辑模块输出端连接有粗延迟计算模块，粗延迟计算模块接收两路数字中频数据，在时域检测两路中频信号粗的相位延迟；延迟计算模块的输出端连接有时序延迟模块,时序延迟模块利用粗延迟计算模块的检测结果，以参考通道为基准，对待测通道进行时序延迟，得到延迟误差为最大±1个时钟的近似同步的两路数字中频数据；时序延迟模块的输出端连接有傅里叶变换模块；傅里叶变换模块对粗对准的参考通道和待测通道，分别进行快速傅里叶变换，将时域数据变换到频域；傅里叶变换模块的输出端连接有峰值找大模块，峰值找大模块从傅里叶变换模块输出的频域数据中，找到峰值位置并记录复数峰值结果；峰值找大模块的输出端连接有反正切模块，反正切模块对复数峰值结果对应的复数求取相位角；每个通道的每组数据可得到一个相位角；反正切模块的输出端连接有相位差计算模块；相位差计算模块利用反正切模块输出的相位角，计算参考通道和其余通道间的相位角值差，得到两个通道间的精确延迟；相位差计算模块的输出端和粗延迟计算模块的输出端还连接有用于储存粗延迟结果和通道相位差的数据存储模块。上述高精度通道信号延迟自动校准装置中，数据缓存模块数据缓存点数大于或等于快速傅里叶变换的点数。上述高精度通道信号延迟自动校准装置中，数据缓存模块数据缓存点数为1024点。上述高精度通道信号延迟自动校准装置中，粗延迟计算模块接收两路数字中频数据，使用时序检测方法，在时域检测两路中频信号粗的相位延迟。上述高精度通道信号延迟自动校准装置中，所述的时序检测方法为过零点检测方法。上述高精度通道信号延迟自动校准装置中，傅里叶变换模块对粗对准的参考通道和待测通道分别进行快速傅里叶变换的数据长度按实际信号信噪比调整。上述高精度通道信号延迟自动校准装置中，快速傅里叶变换的数据长度为1024点。一种高精度通道延迟自动校准方法，利用上述高精度通道延迟自动校准装置，其特征在于包括如下步骤：步骤一：射频模块中各自独立的通道将信号变频到模拟中频，模拟中频信号输入模数转换模块后转换成数字中频信号，模数转换后的数字中频信号送信号处理模块；步骤二：信号处理模块包括数据缓存模块和数据读取模块；信号处理模块接收模数转换后的数字中频信号，数据缓存模块缓存多路并行数据；数据读取模块将数据输出到粗延迟计算模块；粗延迟计算模块选定通道1为参考通道，使用时序方法直接求取其余各路中频相对于参考通道的延迟，得到以采样时钟为单位的粗延迟结果；时序延迟模块按粗延迟结果对各路数字中频进行时序延迟，实现粗延迟进行时序延迟补偿；步骤三：对粗延迟进行时序延迟补偿后的多路数字中频数据，输出至傅里叶变换模块，傅里叶变换模块使用快速傅里叶方法分别完成频谱分析；峰值找大模块在各路频谱计算结果中分别寻找最大值点，得到各接收到的接收信号的复频率值；反正切模块对各通道的复频率值分别进行反正切计算，得到各通道接收信号的相位角；相位差计算模块选定通道1为参考通道，使用其余通道相位角同参考通道相位角做差，得到各通道间延迟差值；步骤四：将延迟计算模块算出的通道间粗延迟时钟个数和精确延迟相位差值存入数据存储模块，供后续调用。采用本发明的产生的有益效果为：本方案设计的通道延迟校准技术，利用阵列天线自身的硬件系统，采集校准信号并使用数字方式计算通道延迟，无需矢量网络分析仪等复杂测试仪器支持即可实现各通道延迟的高精度计算。本发明基于阵列天线既有硬件体系，利用输入的校准信号，在数字处理方式计算出射频通道、模数转换的整个数据链路的延迟差值。在中频数字端，利用ADC采样的中频数据进行通道延迟计算和校准。延迟计算模块所用的数据缓存资源、快速傅里叶变换模块、反正切模块等资源可以时分复用的方式同阵列天线接收处理的其他模块共用，在保证性能的同时，无明显成本增加。附图说明图1为本发明通道延迟校准原理示意图。图2为本发明延迟计算模块工作原理示意图图中：1——射频模块；2——延迟计算模块；201——数据缓存模块；202——复用控制逻辑模块；203——粗延迟计算模块；204——时序延迟模块；205——傅里叶变换模块；206——峰值找大模块；207——反正切模块；208——相位差计算模块；3——模数转换模块；4——数据存储模块。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图对本发明进行进一步的详细说明。应当理解，此处所描述的具体实施例仅用于解释本发明，并不用于限定本发明。参考图1和图2，本发明设计的延迟自动校准技术基于阵列天线既有硬件体系，利用输入的校准信号，在数字处理方式计算出射频通道、模数转换的整个数据链路的延迟差值。具体实现方案包含如下步骤：步骤一：基准信号输入。为阵列天线各通道同时注入基准信号，基准信号需同正常工作同频，且各通道输入的信号幅度、相位应相同；射频模块1中各自独立的通道将信号变频到模拟中频，模拟中频信号输入模数转换模块3后转换成数字中频信号，模数转换后的数字中频信号送信号处理模块。步骤二：粗延迟计算及补偿。信号处理模块包括数据缓存模块201和数据读取模块202；信号处理模块接收模数转换后的数字中频信号，数据缓存模块201缓存一定点数的多路并行数据；数据读取模块202将数据输出到粗延迟计算模块203；粗延迟计算模块203选定通道1为参考通道，使用时序方法直接求取其余各路中频相对于参考通道的延迟，得到以采样时钟为单位的粗延迟结果；时序延迟模块204按粗延迟结果对各路数字中频进行时序延迟，实现粗对准。步骤三：精延迟计算。对粗延迟进行时序延迟补偿后的多路数字中频数据，输出至FFT变换模块205，FFT变换模块205使用快速傅里叶方法分别完成频谱分析；峰值找大模块206在各路频谱计算结果中分别寻找最大值点，得到各接收到的接收信号的复频率值；反正切模块207对各通道的复频率值分别进行反正切计算，得到各通道接收信号的相位角；相位差计算模块208选定通道1为参考通道，使用其余通道相位角同参考通道相位角做差，得到各通道间延迟差值。步骤四：延迟保存。将延迟计算模块2算出的通道间粗延迟时钟个数和精确延迟相位差值存入本地非易失存储器件，供后续调用。参考图1，其输入为多路相同的射频信号。射频信号输入有两种方式：方式一、开路辐射基准信号辐射：由标准信号源产生同阵列天线工作频率相同的单音射频信号，使用标准辐射阵子，在阵列天线法向的合适距离向各接收阵元辐射。基准信号接收：阵列天线处于正常接收状态，各通道并行同时工作，接收外部输入的基准信号。天线射频通道将接收信号下变频到中频后，由模数转换器将模拟信号转换为数字中频信号并送信号处理模块。方式二、闭路输入标准信号源产生同阵列天线工作频率相同的单音射频信号，使用多路功分器分路为多路等幅度、同相位的基准信号，通过有线方式直接输入射频模块1各通道输入端。射频模块1含多个射频通道，各通道独立完成对输入信号的接收处理，含滤波、下变频、镜像抑制和放大处理。射频模块1同时具有统一的时钟和锁相环，可为各接收通道提供同频同源的本地载波，同时为数字信号处理模块提供同源驱动时钟。模数转换模块3具有同通道数相同的模数转换器，每个模数转换器将一个射频通道输出的模拟中频转换为数字中频信号。各模数转换器使用同一驱动时钟，以保证采样过程同步。延迟计算模块2含数据缓存模块201、复用控制逻辑模块202、粗延迟计算模块203、时序延迟模块204、快速傅里叶变换模块205、峰值找大模块206、反正切计算模块207、相位差计算模块208和延迟数据保存模块209。数据缓存模块201包含同通道个数相同的多个数据缓存子模块，每个数据缓存子模块保存一路数字中频；各模块同时开始保存，同时结束保存，且保存的数据点数相同；数据缓存点数不小于快速傅里叶变换的点数，典型的点数为1024点。复用控制逻辑模块202实现对多路数据的读取。阵列天线通常包含多个通道，典型的为4、7，为节省硬件资源，复用后续的处理和运算资源。延迟检测流程开始后，同时读取参考通道和待处理通道共两个通道的数字中频数据，送后续处理模块。故阵列数为N，需要读取N-1次。粗延迟计算模块203接收两路数字中频数据，使用时序检测方法，在时域检测两路中频信号粗的相位延迟，典型的检测方法为过零点检测。时域延迟检测最大可实现±1个时钟的延迟检测精度。时序延迟模块204利用粗延迟检测结果，以参考通道为基准，对待测通道进行时序延迟，得到延迟误差为最大±1个时钟的近似同步的两路数字中频数据，完成粗对准。傅里叶变换模块205对粗对准的参考通道和待测通道，分别进行快速傅里叶变换，将时域数据变换到频域。FFT变换的数据长度可按实际信号信噪比调整，典型值为1024点，弱信噪比时需提高变换点数。峰值找大模块206从FFT输出的频域数据中，找到峰值位置并记录复数峰值结果。反正切模块207对峰值对应的复数，求取相位角；每个通道的每组数据可得到一个相位角。相位差计算模块208利用反正切模块207输出的相位角，计算参考通道和其余通道间的相位角值差，得到两个通道间的精确延迟。粗延迟和相位差之和，即为通道间的精确延迟。粗延迟结果和通道相位差均需保存在非易失存储器——数据存储模块4中。重复以上步骤，可得到每个待测通道相对于参考通道的精确延迟，实现对阵列天线各通道延迟的高精度校准。数据缓存模块201、复用控制逻辑模块202、粗延迟计算模块203、时序延迟模块204、快速傅里叶变换模块205、峰值找大模块206、反正切计算模块207和相位差计算模块208可使用软件实现，也可利用硬件IP资源，或同阵列天线的其他处理模块时分复用，不影响实际检测效果。本方案设计的通道延迟校准技术，利用阵列天线自身的硬件系统，采集校准信号并使用数字方式计算通道延迟，无需矢量网络分析仪等复杂测试仪器支持即可实现各通道延迟的高精度计算。本发明基于阵列天线既有硬件体系，利用输入的校准信号，使用数字处理方式计算出射频通道、模数转换的整个数据链路的延迟差值。在中频数字端，利用ADC采样的中频数据进行通道延迟计算和校准。延迟计算模块所用的数据缓存资源、快速傅里叶变换模块、反正切模块等资源可以时分复用的方式同阵列天线接收处理的其他模块共用，在保证性能的同时，无明显成本增加。以上内容是结合具体实施例对本发明所作的进一步详细说明，不能认定本发明的具体实施只限于此。对于本发明所属技术领域的普通技术人员来说，在不脱离本发明构思的前提下做出若干等同替代或明显变型，且性能或用途相同，都应当视为属于本发明由所提交的权利要求书确定的专利保护范围。
