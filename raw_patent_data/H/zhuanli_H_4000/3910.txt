标题title
一种ECN控制方法、装置以及介质
摘要abst
本申请公开了一种ECN控制方法、装置以及介质，通过监测数据接收端口处的数据流量；判断数据流量的波动幅度是否达到阈值；若是，则根据阈值设置报文中的ECN水线为对应数值；其中，阈值与ECN水线的对应数值成反比。采用本技术方案，对交换机的数据接收端口处的数据流量进行监测，以检测出流量突变的情况，并根据数据流量的波动幅度达到的阈值设置ECN水线。可以理解的是，数据流量波动越大，则ECN水线越小，则越容易被触发，服务器的接收端更易告知发送端限制数据发送的流量。从而本申请所提供的ECN控制方法，可以在数据流量突变时，降低ECN水线，使其更易生效，从而限制服务器发送端发送的数据流量，进而降低了丢包率。
权利要求书clms
1.一种ECN控制方法，其特征在于，包括：监测数据接收端口处的数据流量；判断所述数据流量的波动幅度是否达到阈值；若是，则根据所述阈值设置报文中的ECN水线为对应数值；其中，所述阈值与所述ECN水线的对应数值成反比。2.根据权利要求1所述的ECN控制方法，其特征在于，所述数据流量的波动幅度包括增长幅度和降低幅度。3.根据权利要求2所述的ECN控制方法，其特征在于，所述判断所述数据流量的波动幅度是否达到阈值为：判断所述数据流量的增长幅度是否超出第一阈值且小于第二阈值；进一步的，若是，则设置所述报文中的ECN水线为第一水线值；判断所述数据流量的增长幅度是否超出所述第二阈值且小于第三阈值；进一步的，若是，则设置所述报文中的ECN水线为第二水线值；判断所述数据流量的增长幅度是否超出所述第三阈值；进一步的，若是，则设置所述报文中的ECN水线为第三水线值；其中，所述第一阈值小于所述第二阈值，所述第二阈值小于所述第三阈值；相应的，所述第一水线值大于所述第二水线值，所述第二水线值大于所述第三水线值。4.根据权利要求1所述的ECN控制方法，其特征在于，所述根据所述阈值设置报文中的ECN水线为对应数值包括：发送与所述阈值对应的修改信号至数据发送端口，以使所述数据发送端口根据所述修改信号修改所述报文中的ECN水线为对应数值。5.根据权利要求2所述的ECN控制方法，其特征在于，所述判断所述数据流量的波动幅度是否达到阈值为：判断所述数据流量的降低幅度是否达到预设值；若是，则增加所述ECN水线的数值。6.根据权利要求3所述的ECN控制方法，其特征在于，还包括：若在预设时间内，所述数据流量增长幅度超出所述第三阈值的次数达到预设次数，则设置所述报文中的ECN水线为所述第三水线值。7.根据权利要求3所述的ECN控制方法，其特征在于，设置所述报文中的ECN水线为第三水线值，则还包括：发出提示信号。8.一种ECN控制装置，其特征在于，包括：监测模块，用于监测数据接收端口处的数据流量；判断模块，用于判断所述数据流量的波动幅度是否达到阈值；处理模块，用于若所述数据流量的波动幅度达到阈值，则根据所述阈值设置报文中的ECN水线为对应数值；其中，所述阈值与所述ECN水线的对应数值成反比。9.一种ECN控制装置，其特征在于，包括存储器，用于存储计算机程序；处理器，用于执行所述计算机程序时实现如权利要求1至7任意一项所述的ECN控制方法的步骤。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储有计算机程序，所述计算机程序被处理器执行时实现如权利要求1至7任意一项所述的ECN控制方法的步骤。
说明书desc
技术领域本申请涉及计算机技术领域，特别是涉及一种ECN控制方法、装置以及介质。背景技术随着科技的不断进步，人们对计算机的要求也越来越高，而传统网络在日益发展的数据中心下也显得越来越捉襟见肘，尤其是智能计算机的领域的发展导致网络对时延和吞吐的要求不断提高，远程直接数据存取技术由此而生。RDMA技术允许应用程序在内存之间直接做数据传输，不用经过CPU，这就大大降低了数据传输所用的时间。网络交换机，是一个扩大网络的器材，能为子网络中提供更多的连接端口，以便连接更多的计算机。但是在网络交换机中，当入口流量大于出口流量的带宽时会发生网络拥塞。典型的例子是多个发送方同时向同一个目的地发送网络数据。交换机的缓存可以处理暂时的拥塞，但是当拥塞太久时，交换机的缓存就会过载。当交换机缓存过载时，下一个收到的新的数据包就会被丢弃。丢包会降低应用性能，因为重传和传输协议的复杂性会带来延迟。当前技术中针对丢包问题主要是搭建一套无损网络环境，通过引入显式拥塞通知，在发生堵塞时限制数据量的流入速率，从而减少丢包。但是在该方法中，ECN是通过判断数据包的堵塞情况是否达到阈值决定是否限制数据流量，一旦有突发流量产生，ECN来不及生效，导致缓存队列瞬间被填满，后续的流量由于缓存队列填满只能丢弃，仍会造成丢包。由此可见，如何及时的使服务器的ECN生效，避免突发流量导致的丢包情况是本领域技术人员亟待解决的问题。发明内容本申请的目的是提供一种ECN控制方法、装置以及介质，用于及时的使服务器的ECN生效，减少突发流量导致的丢包情况。为解决上述技术问题，本申请提供一种ECN控制方法，该方法包括：监测数据接收端口处的数据流量；判断所述数据流量的波动幅度是否达到阈值；若是，则根据所述阈值设置报文中的ECN水线为对应数值；其中，所述阈值与所述ECN水线的对应数值成反比。优选的，所述数据流量的波动幅度包括增长幅度和降低幅度。优选的，所述判断所述数据流量的波动幅度是否达到阈值为：判断所述数据流量的增长幅度是否超出第一阈值且小于第二阈值；进一步的，若是，则设置所述报文中的ECN水线为第一水线值；判断所述数据流量的增长幅度是否超出所述第二阈值且小于第三阈值；进一步的，若是，则设置所述报文中的ECN水线为第二水线值；判断所述数据流量的增长幅度是否超出所述第三阈值；进一步的，若是，则设置所述报文中的ECN水线为第三水线值；其中，所述第一阈值小于所述第二阈值，所述第二阈值小于所述第三阈值；相应的，所述第一水线值大于所述第二水线值，所述第二水线值大于所述第三水线值。优选的，所述根据所述阈值设置报文中的ECN水线为对应数值包括：发送与所述阈值对应的修改信号至数据发送端口，以使所述数据发送端口根据所述修改信号修改所述报文中的ECN水线为对应数值。优选的，所述判断所述数据流量的波动幅度是否达到阈值为：判断所述数据流量的降低幅度是否达到预设值；若是，则增加所述ECN水线的数值。优选的，还包括：若在预设时间内，所述数据流量增长幅度超出所述第三阈值的次数达到预设次数，则设置所述报文中的ECN水线为所述第三水线值。优选的，设置所述报文中的ECN水线为第三水线值，则还包括：发出提示信号。为解决上述技术问题，本申请还提供一种ECN控制装置，该装置包括：监测模块，用于监测数据接收端口处的数据流量；判断模块，用于判断所述数据流量的波动幅度是否达到阈值；处理模块，用于若所述数据流量的波动幅度达到阈值，则根据所述阈值设置报文中的ECN水线为对应数值；其中，所述阈值与所述ECN水线的对应数值成反比。优选的，所述判断模块包括第一判断模块，用于判断数据流量的增长幅度是否超出第一阈值且小于第二阈值；第二判断模块，用于判断数据流量的增长幅度是否超出第二阈值且小于第三阈值；第三判断模块，用于判断数据流量的增长幅度是否超出第三阈值；对应的，所述处理模块包括第一处理模块，用于若数据流量的增长幅度超出第一阈值且小于第二阈值，则设置报文中的ECN水线为第一水线值；第二处理模块，用于若数据流量的增长幅度超出第二阈值且小于第三阈值，则设置报文中的ECN水线为第二水线值；第三处理模块，用于若数据流量的增长幅度超出第三阈值，则设置报文中的ECN水线为第三水线值；其中，第一阈值小于第二阈值，第二阈值小于第三阈值；相应的，第一水线值大于第二水线值，第二水线值大于第三水线值。为解决上述技术问题，本申请还提供另一种ECN控制装置，该装置包括存储器，用于存储计算机程序；处理器，用于执行所述计算机程序时实现如上述的ECN控制方法的步骤。为解决上述技术问题，本申请还提供一种计算机可读存储介质，所述计算机可读存储介质上存储有计算机程序，所述计算机程序被处理器执行时实现如上述的ECN控制方法的步骤。本申请所提供的ECN控制方法，通过监测数据接收端口处的数据流量；判断数据流量的波动幅度是否达到阈值；若是，则根据阈值设置报文中的ECN水线为对应数值；其中，阈值与ECN水线的对应数值成反比。相对于当前技术中，ECN水线的值固定，服务器的接收端只能在丢包率达到ECN水线的固定值时调整发送的数据量，采用本技术方案，对交换机的数据接收端口处的数据流量进行监测，以检测出流量突变的情况，并根据数据流量的波动幅度达到的阈值设置ECN水线，其中，阈值与ECN水线的对应数值成反比。可以理解的是，数据流量波动越大，则ECN水线越小，则越容易被触发，服务器的接收端更易告知发送端限制数据发送的流量。从而本申请所提供的ECN控制方法，可以在数据流量突变时，降低ECN水线，使其更易生效，从而限制服务器发送端发送的数据流量，进而降低了丢包率。此外，本申请所提供的ECN控制装置以及介质与上述的ECN控制方法相对应，效果同上。附图说明为了更清楚地说明本申请实施例，下面将对实施例中所需要使用的附图做简单的介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例提供的一种ECN控制方法的流程图；图2为本申请实施例提供的一种ECN控制装置的结构图；图3为本申请实施例提供的另一种ECN控制装置的结构图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下，所获得的所有其他实施例，都属于本申请保护范围。随着科技的不断进步，人们对计算机的要求也越来越高，而传统网络在日益发展的数据中心下也显得越来越捉襟见肘，尤其是智能计算机的领域的发展导致网络对时延和吞吐的要求不断提高，远程直接数据存取技术由此而生。RDMA技术允许应用程序在内存之间直接做数据传输，不用经过CPU，这就大大降低了数据传输所用的时间。网络交换机，是一个扩大网络的器材，能为子网络中提供更多的连接端口，以便连接更多的计算机。但是在网络交换机中，当入口流量大于出口流量的带宽时会发生网络拥塞。典型的例子是多个发送方同时向同一个目的地发送网络数据。交换机的缓存可以处理暂时的拥塞，但是当拥塞太久时，交换机的缓存就会过载。当交换机缓存过载时，下一个收到的新的数据包就会被丢弃。丢包会降低应用性能，因为重传和传输协议的复杂性会带来延迟。当前技术中针对丢包问题主要是搭建一套无损网络环境，通过引入显式拥塞通知，在发生堵塞时限制数据量的流入速率，从而减少丢包。但是在该方法中，ECN是通过判断数据包的堵塞情况是否达到阈值决定是否限制数据流量，一旦有突发流量产生，ECN来不及生效，导致缓存队列瞬间被填满，后续的流量由于缓存队列填满只能丢弃，仍会造成丢包。本申请的核心是提供一种ECN控制方法、装置以及介质，用于及时的使服务器的ECN生效，减少突发流量导致的丢包情况。为了使本技术领域的人员更好地理解本申请方案，下面结合附图和具体实施方式对本申请作进一步的详细说明。图1为本申请实施例提供的一种ECN控制方法的流程图，如图1所示，该方法包括：S10：监测数据接收端口处的数据流量。S11：判断数据流量的波动幅度是否达到阈值，若是，则进入步骤S12。S12：根据阈值设置报文中的ECN水线为对应数值；其中，阈值与ECN水线的对应数值成反比。显式拥塞通知是对Internet协议和RFC 3168中定义的传输控制协议的扩展，ECN支持端到端的网络拥塞通知。在具体实施中，交换机在检测到数据包的堵塞情况达到阈值后，会在IP报文中设置一个标记，发出即将发生拥塞的信号，而不是直接丢弃数据包。服务器的接收端在接收到该标记后即可降低服务器的发送端的数据发送量，从而避免丢包的情况。因此，通过ECN减少了TCP的丢包数量，通过避免重传，减少了延迟，提升了应用的性能。可以理解的是，ECN允许在不丢包的情况下实现端到端通知网络拥塞。ECN是一个可选特性，只有在两个端点即服务器的接收端和服务器的发送端都支持并且愿意使用的情况下才能够使用。首选需要说明的是，本实施例中的执行主体可以是ECN控制装置，其通常部署于交换机中，以下以执行主体为交换机为例进行详细说明。为了提高ECN对突发流量的反应，首先就需要检测交换机从服务器的发送端接收的数据流量是否发生了突变。在步骤S10中，是通过监测交换机的数据接收端口处的数据流量进行判断，该数据流量表示了一定时间内交换机接收到服务器发送端发送的数据量的多少。其中，如何实现对数据流量的监控并不是本申请的重点，其可以通过当前技术中已有的软件，或者自主编写的脚本实现监控，本申请不做限定。在监测数据流量后，判断数据流量的波动幅度是否达到预先设置的阈值，并根据该阈值设置报文中的ECN水线为对应数值。其中，阈值和ECN水线的值为一一对应的关系，在具体实施中，可以设置多个阈值，当数据流量的波动幅度达到不同的阈值时设置不同的ECN水线值。并且，阈值与ECN水线的对应数值成反比。可以理解的是，阈值与ECN水线的对应数值成反比，代表了数据流量的波动幅度越大，则ECN水线的值就越低，而ECN水线的值越低，则代表堵塞情况的阈值便越低，堵塞情况的阈值越低，则ECN越容易生效，从而服务器的接收端能够及时的告知发送端限制数据发送的流量，进而避免丢包的情况。在具体实施中，报文是在交换机的发送端口处产生的，交换机通过发送端口将报文发送给服务器的接收端。因此，在本实施例中，根据阈值设置报文中的ECN水线为对应数值包括：发送与阈值对应的修改信号至数据发送端口，以使数据发送端口根据修改信号修改报文中的ECN水线为对应数值。需要说明的是，在具体实施中，数据流量的波动幅度可能代表了数据流量的增加，也可能是减少。可以理解的是，数据流量的减少并不会造成恶劣的丢包情况，通常是由于数据流量的急剧增加造成丢包情况。在具体实施中，为了避免多于的计算，可以将数据流量的波动幅度富余正负值，例如数据流量的增加幅度为正，降低幅度为负，则仍满足阈值与ECN水线的对应数值成反比的情况，仍能根据阈值设置报文中的ECN水线为对应数值。本申请实施例提供的ECN控制方法，通过监测数据接收端口处的数据流量；判断数据流量的波动幅度是否达到阈值；若是，则根据阈值设置报文中的ECN水线为对应数值；其中，阈值与ECN水线的对应数值成反比。相对于当前技术中，ECN水线的值固定，服务器的接收端只能在丢包率达到ECN水线的固定值时调整发送的数据量，采用本技术方案，对交换机的数据接收端口处的数据流量进行监测，以检测出流量突变的情况，并根据数据流量的波动幅度达到的阈值设置ECN水线，其中，阈值与ECN水线的对应数值成反比。可以理解的是，数据流量波动越大，则ECN水线越小，则越容易被触发，服务器的接收端更易告知发送端限制数据发送的流量。从而本申请所提供的ECN控制方法，可以在数据流量突变时，降低ECN水线，使其更易生效，从而限制服务器发送端发送的数据流量，进而降低了丢包率。在具体实施中，为了提高ECN的反应速度，可以设置多个阈值，对应的设置多个ECN水线，当数据流量的增长幅度达到一个阈值时就更改一次ECN水线值，从而可以更加精准的实现对数据流量输入的限制。然而阈值的个数越多，则交换机的数据处理压力就越大，并且需要频繁的修改ECN水线值，造成资源浪费。因此，在上述实施例的基础上，在本实施例中，判断数据流量的波动幅度是否达到阈值为：判断数据流量的增长幅度是否超出第一阈值且小于第二阈值；进一步的，若是，则设置报文中的ECN水线为第一水线值；判断数据流量的增长幅度是否超出第二阈值且小于第三阈值；进一步的，若是，则设置报文中的ECN水线为第二水线值；判断数据流量的增长幅度是否超出第三阈值；进一步的，若是，则设置报文中的ECN水线为第三水线值；其中，第一阈值小于第二阈值，第二阈值小于第三阈值；相应的，第一水线值大于第二水线值，第二水线值大于第三水线值。本实施例中将数据流量的波动幅度设为三个档次，当增长幅度在第一阈值和第二阈值之间时将ECN水线设为第一水线值，在第二阈值和第三阈值之间时，将ECN水线设为第二水线值，超出第三阈值时将ECN水线设为第三水线值。可以理解的是，当增长幅度小于第一阈值时表示该数据流量的波动幅度不会造成丢包的情况，因此无需触发ECN。而当ECN水线设为第三水线值时，表示极易发生丢包情况，此时除了依靠服务器的发送端限制数据流量的方式外，还可以发出提示信号以提示技术人员进行相应处理，例如暂停数据发送。本申请实施例将数据流量的波动幅度设为三个档次，避免了ECN水线的频繁更改，也减轻了交换机对数据处理的压力，同时也保障了交换机能够根据数据流量的波动幅度调整ECN水线，避免发生丢包。在具体实施中，如果数据流量发生了降低的情况，可以不对ECN水线进行修改。而在本实施例中，判断数据流量的波动幅度是否达到阈值为判断数据流量的降低幅度是否达到预设值时，若是，则增加ECN水线的数值。可以理解的是，当数据流量的波动幅度为降低幅度时，发生堵塞的概率降低，ECN水线如果仍处于低值的状态，容易因为偶然情况而触发ECN，使的数据流量被进一步限制。因此，本实施例通过提高ECN水线值，以避免ECN偶然生效。在上述实施例的基础上，在本实施例中，还包括：若在预设时间内，数据流量增长幅度超出第三阈值的次数达到预设次数，则设置报文中的ECN水线为第三水线值。本申请实施例提供的ECN控制方法，为了避免数据流量的波动幅度的频繁变化而导致ECN水线的不断更改，在数据流量增长幅度超出第三阈值的次数达到预设次数时，设置报文中的ECN水线为第三水线值，以极易生效的状态实现对数据的监测，避免ECN水线的频繁更改。在上述实施例中，对于ECN控制方法进行了详细描述，本申请还提供ECN控制装置对应的实施例。需要说明的是，本申请从两个角度对装置部分的实施例进行描述，一种是基于功能模块的角度，另一种是基于硬件的角度。图2为本申请实施例提供的一种ECN控制装置的结构图，如图2所示，该装置包括：监测模块10，用于监测数据接收端口处的数据流量；判断模块11，用于判断数据流量的波动幅度是否达到阈值；处理模块12，用于若数据流量的波动幅度达到阈值，则根据阈值设置报文中的ECN水线为对应数值；其中，阈值与ECN水线的对应数值成反比。其中，判断模块11可以包括第一判断模块，用于判断数据流量的增长幅度是否超出第一阈值且小于第二阈值；第二判断模块，用于判断数据流量的增长幅度是否超出第二阈值且小于第三阈值；第三判断模块，用于判断数据流量的增长幅度是否超出第三阈值；对应的，处理模块12也可以包括第一处理模块，用于若数据流量的增长幅度超出第一阈值且小于第二阈值，则设置报文中的ECN水线为第一水线值；第二处理模块，用于若数据流量的增长幅度超出第二阈值且小于第三阈值，则设置报文中的ECN水线为第二水线值；第三处理模块，用于若数据流量的增长幅度超出第三阈值，则设置报文中的ECN水线为第三水线值；其中，第一阈值小于第二阈值，第二阈值小于第三阈值；相应的，第一水线值大于第二水线值，第二水线值大于第三水线值。由于装置部分的实施例与方法部分的实施例相互对应，因此装置部分的实施例请参见方法部分的实施例的描述，这里暂不赘述。本申请实施例提供的ECN控制装置，通过监测数据接收端口处的数据流量；判断数据流量的波动幅度是否达到阈值；若是，则根据阈值设置报文中的ECN水线为对应数值；其中，阈值与ECN水线的对应数值成反比。相对于当前技术中，ECN水线的值固定，服务器的接收端只能在丢包率达到ECN水线的固定值时调整发送的数据量，采用本技术方案，对交换机的数据接收端口处的数据流量进行监测，以检测出流量突变的情况，并根据数据流量的波动幅度达到的阈值设置ECN水线，其中，阈值与ECN水线的对应数值成反比。可以理解的是，数据流量波动越大，则ECN水线越小，则越容易被触发，服务器的接收端更易告知发送端限制数据发送的流量。从而本申请所提供的ECN控制装置，可以在数据流量突变时，降低ECN水线，使其更易生效，从而限制服务器发送端发送的数据流量，进而降低了丢包率。图3为本申请实施例提供的另一种ECN控制装置的结构图，如图3所示，该装置包括：存储器20，用于存储计算机程序；处理器21，用于执行计算机程序时实现如上述实施例ECN控制方法的步骤。本实施例提供的ECN控制装置可以包括但不限于智能手机、平板电脑、笔记本电脑或台式电脑等。其中，处理器21可以包括一个或多个处理核心，比如4核心处理器、8核心处理器等。处理器21可以采用数字信号处理器、现场可编程门阵列、可编程逻辑阵列中的至少一种硬件形式来实现。处理器21也可以包括主处理器和协处理器，主处理器是用于对在唤醒状态下的数据进行处理的处理器，也称中央处理器；协处理器是用于对在待机状态下的数据进行处理的低功耗处理器。在一些实施例中，处理器21可以集成有图像处理器，GPU用于负责显示屏所需要显示的内容的渲染和绘制。一些实施例中，处理器21还可以包括人工智能处理器，该AI处理器用于处理有关机器学习的计算操作。存储器20可以包括一个或多个计算机可读存储介质，该计算机可读存储介质可以是非暂态的。存储器20还可以包括高速随机存取存储器，以及非易失性存储器，比如一个或多个磁盘存储设备、闪存存储设备。本实施例中，存储器20至少用于存储以下计算机程序201，其中，该计算机程序被处理器21加载并执行之后，能够实现前述任一实施例公开的ECN控制方法的相关步骤。另外，存储器20所存储的资源还可以包括操作系统202和数据203等，存储方式可以是短暂存储或者永久存储。其中，操作系统202可以包括Windows、Unix、Linux等。数据203可以包括但不限于数据流量、阈值等。在一些实施例中，ECN控制装置还可以包括有显示屏22、输入输出接口23、通信接口24、电源25以及通信总线26。本领域技术人员可以理解，图3中示出的结构并不构成对ECN控制装置的限定，可以包括比图示更多或更少的组件。本申请实施例提供的ECN控制装置，包括存储器和处理器，处理器在执行存储器存储的程序时，能够实现如下方法：监测数据接收端口处的数据流量。判断数据流量的波动幅度是否达到阈值，若是，根据阈值设置报文中的ECN水线为对应数值；其中，阈值与ECN水线的对应数值成反比。本申请实施例提供的ECN控制装置，通过监测数据接收端口处的数据流量；判断数据流量的波动幅度是否达到阈值；若是，则根据阈值设置报文中的ECN水线为对应数值；其中，阈值与ECN水线的对应数值成反比。相对于当前技术中，ECN水线的值固定，服务器的接收端只能在丢包率达到ECN水线的固定值时调整发送的数据量，采用本技术方案，对交换机的数据接收端口处的数据流量进行监测，以检测出流量突变的情况，并根据数据流量的波动幅度达到的阈值设置ECN水线，其中，阈值与ECN水线的对应数值成反比。可以理解的是，数据流量波动越大，则ECN水线越小，则越容易被触发，服务器的接收端更易告知发送端限制数据发送的流量。从而本申请所提供的ECN控制装置，可以在数据流量突变时，降低ECN水线，使其更易生效，从而限制服务器发送端发送的数据流量，进而降低了丢包率。最后，本申请还提供一种计算机可读存储介质对应的实施例。计算机可读存储介质上存储有计算机程序，计算机程序被处理器执行时实现如上述方法实施例中记载的步骤。可以理解的是，如果上述实施例中的方法以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。本申请实施例提供的计算机可读存储介质，通过监测数据接收端口处的数据流量；判断数据流量的波动幅度是否达到阈值；若是，则根据阈值设置报文中的ECN水线为对应数值；其中，阈值与ECN水线的对应数值成反比。相对于当前技术中，ECN水线的值固定，服务器的接收端只能在丢包率达到ECN水线的固定值时调整发送的数据量，采用本技术方案，对交换机的数据接收端口处的数据流量进行监测，以检测出流量突变的情况，并根据数据流量的波动幅度达到的阈值设置ECN水线，其中，阈值与ECN水线的对应数值成反比。可以理解的是，数据流量波动越大，则ECN水线越小，则越容易被触发，服务器的接收端更易告知发送端限制数据发送的流量。从而本申请所提供的计算机可读存储介质，可以在数据流量突变时，降低ECN水线，使其更易生效，从而限制服务器发送端发送的数据流量，进而降低了丢包率。以上对本申请所提供的ECN控制方法、装置以及介质进行了详细介绍。说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。对于实施例公开的装置而言，由于其与实施例公开的方法相对应，所以描述的比较简单，相关之处参见方法部分说明即可。应当指出，对于本技术领域的普通技术人员来说，在不脱离本申请原理的前提下，还可以对本申请进行若干改进和修饰，这些改进和修饰也落入本申请权利要求的保护范围内。还需要说明的是，在本说明书中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。
