标题title
一种船舶多能源供电系统管理方法
摘要abst
本发明涉及电变量测量技术领域，具体涉及一种船舶多能源供电系统管理方法，该方法包括：获取每个船舶的多能源供电系统的瞬态组态描述子，以及在一次充能时供电过程中多能源供电系统的裕量，根据船舶在历史充能时供电过程的裕量得到船舶对应的向量，进而获取每个船舶对应的可靠度指标，结合船舶对应的瞬态组态描述子得到任意两个船舶之间的差异距离，进而根据差异距离聚类得到多个簇，统计簇内每个船舶对应的类型描述子；根据船舶的多个瞬态组态描述子得到特征向量，结合类型描述子获取发展合理指标，根据神经网络对每个船舶进行预测得到预测发展合理指标，从而判断船舶的多能源供电系统是否正常，以确保多能源供电系统能够及时安全的充电。
权利要求书clms
1.一种船舶多能源供电系统管理方法，其特征在于，该方法包括以下步骤：采集每个船舶在固定的采样时间段内多能源供电系统的耗能状态向量和供能状态向量，根据所述耗能状态向量和所述供能状态向量得到多能源供电系统的瞬态组态描述子；获取船舶在一次充能时供电过程中多能源供电系统的用电功率以及供电功率，基于所述供电功率与所述用电功率的差值得到对应的裕量，获取每个船舶在历史充能时供电过程对应的裕量构建直方图，根据所述直方图获取船舶对应的向量；根据当日所有船舶对应的向量得到可靠度指标；根据每个船舶对应的瞬态组态描述子和可靠度指标得到任意两个船舶之间的差异距离，基于所述差异距离对所有的船舶进行聚类得到多个簇，对每个簇进行标号，根据各个簇的标号获取每个簇内每个船舶对应的类型描述子；获取每个船舶在多个采样时间段内的瞬态组态描述子得到特征向量，基于类型描述子对所述特征向量中每个瞬态组态描述子进行类型比较得到发展合理指标；基于神经网络获取每个船舶的预测发展合理指标，预设容忍次数和容忍阈值，根据所述容忍次数、容忍阈值与所述预测发展合理指标判断船舶的多能源供电系统是否正常。2.根据权利要求1所述的一种船舶多能源供电系统管理方法，其特征在于，所述根据所述耗能状态向量和所述供能状态向量得到多能源供电系统的瞬态组态描述子的步骤，包括：将所述耗能状态向量与所述供能状态向量进行拼接得到多能源供电系统的组态向量，对所述组态向量进行极差标准化处理得到瞬态组态描述子。3.根据权利要求1所述的一种船舶多能源供电系统管理方法，其特征在于，所述根据所述直方图获取船舶对应的向量的步骤，包括：所述直方图包括多个裕量区间，统计每个裕量区间在直方图中的占比，所有裕量区间的占比依次排列得到船舶对应的向量。4.根据权利要求1所述的一种船舶多能源供电系统管理方法，其特征在于，所述根据当日所有船舶对应的向量得到可靠度指标的步骤，包括：获取每两个船舶对应向量之间的余弦距离作为相似度；选取与当前分析的船舶的向量相似度最大的船舶的向量，以及与当前分析的船舶的向量第相似的船舶的向量，为正整数；计算当前分析的船舶的向量与其他每个船舶的向量之间的L2距离；其中，当前待分析的船舶的向量与其相似度最大的船舶的向量之间的L2距离为第一距离；当前待分析的船舶的向量与其第相似的船舶的向量之间的L2距离为第二距离；将当前分析的船舶的向量与其第相似的船舶的向量之间的第二距离记为最远距离；选取出与当前分析的船舶的向量的相似度较大的前个船舶的向量，并计算当前待分析的船舶的向量与选取出的前个船舶的向量之间的L2距离的平均距离；根据所述平均距离与所述最远距离的比值得到第相似的船舶的向量的权重，根据所述权重对所述第一距离和所述第二距离进行加权求和，加权求和的结果的倒数为当前待分析的船舶的可靠度指标。5.根据权利要求1所述的一种船舶多能源供电系统管理方法，其特征在于，所述根据每个船舶对应的瞬态组态描述子和可靠度指标得到任意两个船舶之间的差异距离的步骤，包括：获取每两个船舶对应的瞬态组态描述子之间的余弦相似度，根据所述余弦相似度得到差异度，差异度与所述余弦相似度的加和为1；计算两个船舶对应的可靠度指标之间的差值，根据所述差值与所述差异度的乘积得到差异距离。6.根据权利要求1所述的一种船舶多能源供电系统管理方法，其特征在于，所述根据各个簇的标号获取每个簇内每个船舶对应的类型描述子的步骤，包括：将当前簇内待分析的船舶记为目标样本，所述目标样本所属簇中除了所述目标样本之外的船舶记为跟随样本；对下一次充能时供电情况下的所有的船舶进行第二次聚类，统计所述跟随样本在第二次聚类中所属簇的位置，计算每个簇中跟随样本的数量与所有跟随样本数量的比值，按照簇的标号对所有的比值依次排序构成的向量为所述目标样本的类型描述子。7.根据权利要求1所述的一种船舶多能源供电系统管理方法，其特征在于，所述获取每个船舶在多个采样时间段内的瞬态组态描述子得到特征向量的步骤，包括：按照采样时间段的顺序将船舶对应的多个瞬态组态描述子进行拼接，拼接之后得到船舶的特征向量。8.根据权利要求1所述的一种船舶多能源供电系统管理方法，其特征在于，所述基于类型描述子对所述特征向量中每个瞬态组态描述子进行类型比较得到发展合理指标的步骤，包括：将特征向量中每个瞬态组态描述子对应的采样时间段依次标记为T0时刻、T1时刻、…、Tn时刻，n为正整数；根据每个时刻的瞬态组态描述子结合充能时供电过程中的所述可靠度指标得到船舶在对应时刻的所属的簇，以及对应时刻下船舶所对应的类型描述子；判断T1时刻下船舶的所属的簇是否在T0时刻下船舶所对应的类型描述子中，若是，船舶的多能源供电系统的发展合理指标加1；若不是，船舶的多能源供电系统的发展合理指标不变；判断T2时刻下船舶的所属的簇是否在T1时刻下船舶所对应的类型描述子中，若是，船舶的多能源供电系统的发展合理指标加1；若不是，船舶的多能源供电系统的发展合理指标不变；以此类推，判断Tn时刻下船舶的所属的簇是否在Tn-1时刻下船舶所对应的类型描述子中，若是，船舶的多能源供电系统的发展合理指标加1；若不是，船舶的多能源供电系统的发展合理指标不变；发展合理指标的初始值为0，发展合理指标所能取到的最大取值为特征向量中所有瞬态组态描述子的数量减1，即最大取值为n-1。
说明书desc
技术领域本发明涉及电变量测量技术领域，具体涉及一种船舶多能源供电系统管理方法。背景技术能源船舶电力系统利用柴油发电、太阳能以及蓄电池储能，可节约燃油并降低运营成本，是极具发展前景的船舶能源综合优化利用系统，也是船舶节能减排领域的研究热点。多能源船舶能量动态优化和控制策略的目标是针对实际运行工况，综合考虑船舶经济性、电网运行的稳定性以及可靠性，协调控制各发电设备，实现能量的优化控制与规划，满足供电连续安全稳定，实现全船运行燃油消耗排放最少，经济性最大。目前在多能源船舶电力微网结构中，由于存在太阳能间歇性电源、柴油发电机连续性能源以及锂电池储能装置，已有针对不同性质多能源并联运行功率进行优化分配方法，但忽略了对多能源供电系统裕量的管理，例如柴油发电机的功率无法突变，经验方程随着工况差异无法保持有效的裕量，会导致无法保证锂电池储能装置及时安全的得到充电，船舶多能源供电系统的鲁棒性较低。发明内容为了解决上述技术问题，本发明的目的在于提供一种船舶多能源供电系统管理方法，所采用的技术方案具体如下：本发明一个实施例提供了一种船舶多能源供电系统管理方法，该方法包括以下步骤：采集每个船舶在固定的采样时间段内多能源供电系统的耗能状态向量和供能状态向量，根据所述耗能状态向量和所述供能状态向量得到多能源供电系统的瞬态组态描述子；获取船舶在一次充能时供电过程中多能源供电系统的用电功率以及供电功率，基于所述供电功率与所述用电功率的差值得到对应的裕量，获取每个船舶在历史充能时供电过程对应的裕量构建直方图，根据所述直方图获取船舶对应的向量；根据当日所有船舶对应的向量得到可靠度指标；根据每个船舶对应的瞬态组态描述子和可靠度指标得到任意两个船舶之间的差异距离，基于所述差异距离对所有的船舶进行聚类得到多个簇，对每个簇进行标号，根据各个簇的标号获取每个簇内每个船舶对应的类型描述子；获取每个船舶在多个采样时间段内的瞬态组态描述子得到特征向量，基于类型描述子对所述特征向量中每个瞬态组态描述子进行类型比较得到发展合理指标；基于神经网络获取每个船舶的预测发展合理指标，预设容忍次数和容忍阈值，根据所述容忍次数、容忍阈值与所述预测发展合理指标判断船舶的多能源供电系统是否正常。优选的，所述根据所述耗能状态向量和所述供能状态向量得到多能源供电系统的瞬态组态描述子的步骤，包括：将所述耗能状态向量与所述供能状态向量进行拼接得到多能源供电系统的组态向量，对所述组态向量进行极差标准化处理得到瞬态组态描述子。优选的，所述根据所述直方图获取船舶对应的向量的步骤，包括：所述直方图包括多个裕量区间，统计每个裕量区间在直方图中的占比，所有裕量区间的占比依次排列得到船舶对应的向量。优选的，所述根据当日所有船舶对应的向量得到可靠度指标的步骤，包括：获取每两个船舶对应向量之间的余弦距离作为相似度；选取与当前分析的船舶的向量相似度最大的船舶的向量，以及与当前分析的船舶的向量第相似的船舶的向量，为正整数；计算当前分析的船舶的向量与其他每个船舶的向量之间的L2距离；其中，当前待分析的船舶的向量与其相似度最大的船舶的向量之间的L2距离为第一距离；当前待分析的船舶的向量与其第相似的船舶的向量之间的L2距离为第二距离；将当前分析的船舶的向量与其第相似的船舶的向量之间的第二距离记为最远距离；选取出与当前分析的船舶的向量的相似度较大的前个船舶的向量，并计算当前待分析的船舶的向量与选取出的前个船舶的向量之间的L2距离的平均距离；根据所述平均距离与所述最远距离的比值得到第相似的船舶的向量的权重，根据所述权重对所述第一距离和所述第二距离进行加权求和，加权求和的结果的倒数为当前待分析的船舶的可靠度指标。优选的，所述根据每个船舶对应的瞬态组态描述子和可靠度指标得到任意两个船舶之间的差异距离的步骤，包括：获取每两个船舶对应的瞬态组态描述子之间的余弦相似度，根据所述余弦相似度得到差异度，差异度与所述余弦相似度的加和为1；计算两个船舶对应的可靠度指标之间的差值，根据所述差值与所述差异度的乘积得到差异距离。优选的，所述根据各个簇的标号获取每个簇内每个船舶对应的类型描述子的步骤，包括：将当前簇内待分析的船舶记为目标样本，所述目标样本所属簇中除了所述目标样本之外的船舶记为跟随样本；对下一次充能时供电情况下的所有的船舶进行第二次聚类，统计所述跟随样本在第二次聚类中所属簇的位置，计算每个簇中跟随样本的数量与所有跟随样本数量的比值，按照簇的标号对所有的比值依次排序构成的向量为所述目标样本的类型描述子。优选的，所述获取每个船舶在多个采样时间段内的瞬态组态描述子得到特征向量的步骤，包括：按照采样时间段的顺序将船舶对应的多个瞬态组态描述子进行拼接，拼接之后得到船舶的特征向量。优选的，所述基于类型描述子对所述特征向量中每个瞬态组态描述子进行类型比较得到发展合理指标的步骤，包括：将特征向量中每个瞬态组态描述子对应的采样时间段依次标记为T0时刻、T1时刻、…、Tn时刻，n为正整数；根据每个时刻的瞬态组态描述子结合充能时供电过程中的所述可靠度指标得到船舶在对应时刻的所属的簇，以及对应时刻下船舶所对应的类型描述子；判断T1时刻下船舶的所属的簇是否在T0时刻下船舶所对应的类型描述子中，若是，船舶的多能源供电系统的发展合理指标加1；若不是，船舶的多能源供电系统的发展合理指标不变；判断T2时刻下船舶的所属的簇是否在T1时刻下船舶所对应的类型描述子中，若是，船舶的多能源供电系统的发展合理指标加1；若不是，船舶的多能源供电系统的发展合理指标不变；以此类推，判断Tn时刻下船舶的所属的簇是否在Tn-1时刻下船舶所对应的类型描述子中，若是，船舶的多能源供电系统的发展合理指标加1；若不是，船舶的多能源供电系统的发展合理指标不变；发展合理指标的初始值为0，发展合理指标所能取到的最大取值为特征向量中所有瞬态组态描述子的数量减1，即最大取值为n-1。本发明具有如下有益效果：通过对船舶的多能源供电系统在固定的采样时间段内的耗能状态向量和供能状态向量进行获取，根据耗能状态向量以及供能状态向量得到多能源供电系统的瞬态组态描述子，用于表示短暂时间中多能源供电系统的状态，为后续对多能源供电系统的分析做准备；然后获取船舶在一次充能时供电的过程中对应的裕量进而得到船舶对应的向量，基于当日所有船舶对应的向量获取每个船舶对应的可靠度指标，量化出每个船舶对应的充能时供电的可靠度，使得对船舶的多能源供电系统的分析更加准确；根据每两个船舶对应的瞬态组态描述子和可靠度指标计算任意两个船舶之间的差异距离进行聚类得到多个簇，从而得到每个船舶对应的类型描述子，结合船舶在多个采样时间段内的瞬态组态描述子构建特征向量，结合每个瞬态组态描述子对应的类型描述子进行发展合理指标的获取，通过神经网络获取船舶的预测发展合理指标，根据预测发展合理指标提前获取船舶的多能源供电系统的工作情况，从而及时的对多能源供电系统进行调整，保证其能够及时安全的进行充电，提高船舶多能源供电系统的鲁棒性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例所提供的一种船舶多能源供电系统管理方法流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种船舶多能源供电系统管理方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。本发明适用于对船舶的多能源供电系统的充能时供电的状态进行监测管理，为解决现有技术中无法准确确保锂电池储能装置及时安全充电的问题，本申请通过对船舶的多能源供电系统在多次充能时供电的情况进行分析，基于预测发展性进行充能时供电状态是否合理的判断，避免了长时间处于异常充电的问题，提高了多能源供电系统的鲁棒性。下面结合附图具体的说明本发明所提供的一种船舶多能源供电系统管理方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种船舶多能源供电系统管理方法流程图，该方法包括以下步骤：步骤S100，采集每个船舶在固定的采样时间段内多能源供电系统的耗能状态向量和供能状态向量，根据耗能状态向量和供能状态向量得到多能源供电系统的瞬态组态描述子。船舶一般是利用同一种多能源供电系统进行供电，该多能源供电系统中含有柴油发电机、锂电池储能系统、光伏发电系统、废热回收发电系统等多个子系统，每个子系统在不同的情况下会处于耗能状态或者供能状态，对每个子系统的耗能情况以及供能情况进行采集。本发明实施例中以10秒为一个采样时间段，在采样时间段内采集船舶的多能源供电系统中每个子系统的消耗的能量，以此构建多能源供电系统的耗能状态向量；相应的，船舶的多能源供电系统中子系统在合适工况条件下处于供能状态，例如发电机向锂电池供能、锂电池向用电器供能等，因此采集采样时间段内多能源供电系统中每个子系统的供能的能量，以此构建多能源供电系统的供能状态向量。进一步的，将多能源供电系统对应的耗能状态向量以及供能状态向量进行拼接得到多能源供电系统的组态向量，拼接即为向量之间元素的拼接得到新的组态向量，由于组态向量中每个元素表示的是消耗的能量或者供能的能量，因此每个元素的值均为正数；对组态向量进行极差标准化处理得到处理后的组态向量，将处理后的组态向量记为多能源供电系统的瞬态组态描述子；极差标准化处理为现有公知算法，不再赘述。瞬态组态描述子体现了船舶中多能源供电系统的供能和耗能情况，例如在一个多能源供电系统中，锂电池储能系统与废热回收发电系统同时向用电器供能，与此同时，柴油发电机和光伏发电系统向锂电池储能系统供能，则锂电池储能系统也在消耗柴油发电机和光伏发电及系统的能量；再例如，废热回收发电系统将一部分供能给锂电池储能系统，一部分供能给用电器等；因此基于瞬态组态描述子能够较为准确的描述多能源供电系统内部的能量转移情况。步骤S200，获取船舶在一次充能时供电过程中多能源供电系统的用电功率以及供电功率，基于供电功率与用电功率的差值得到对应的裕量，获取每个船舶在历史充能时供电过程对应的裕量构建直方图，根据直方图获取船舶对应的向量；根据当日所有船舶对应的向量得到可靠度指标。当多能源供电系统中锂电池储能系统的容量低于阈值时，此时需要降低锂电池储能系统的输出功率并启动柴油发电机，将该状态称为充能时供电；在充能时供电情况下，发电机的输出功率不是随机即可达到预期功率的，而能量转换存在多次传动、能量转换过程和整定过程，存在一定的迟滞和不稳定的情况，因此对每个船舶的多能源供电系统的可靠程度进行分析。获取船舶的多能源供电系统的瞬态供电功率分布特征，用于表示该船舶的多能源供电系统的供电组态性质，也表示船舶的用电器的功率与多能源供电系统总容量的裕量的分布，体现当前船舶的多能源供电系统在充能时供电的特征。首先通过现有的多能源供电系统估算得到该船舶的多能源供电系统的用电功率，采集在一次充能时供电状态下多能源供电系统的供电功率，以一次充能时供电状态下多能源供电系统的供电功率与用电功率的差值作为裕量，目前多能源系统的全部机组的用电功率是根据当前多能源供电系统的系统估算逻辑得到的。然后基于估算的最大裕量等比例划分为多个裕量区间，本发明实施例中将裕量区间的数量设置为15，即将最大裕量等分为15个裕量区间，例如此时的最大裕量为14kw，则从0kw-14kw的数值等比例划分为15个裕量区间；通过统计同一个船舶在历史充能时供电时的裕量，结合裕量区间可构建每个船舶对应的直方图，则根据直方图中每个裕量区间的数值所占整体的比例得到该船舶对应的向量；其中，表示第1个裕量区间在直方图中的占比；表示第15个裕量区间在直方图中的占比。以此类推，获取同一天内所有船舶的船舶瞬态供电特征，在不逆推用电器的工作模式的情况下分析船舶的多能源供电系统，为了提高能源效率锂电池来降低其它发电单元的功率的情况时，获取产生充能时供电后的裕量分布情况，结合每个船舶对应的瞬时组态描述子可以较好的描述船舶在充能时供电的多能源系统的工作状态。具体的，获取当日所有的船舶对应的向量，由于每个向量是由对应直方图中15个裕量区间得到的，因此每个船舶对应的均是一个15维的向量，向量中每个元素分别代表了各个裕量区间的占比，计算每两个向量之间的相似度，相似度由向量之间的余弦距离表示，具体计算方法为现有公知技术，本发明实施例中不再赘述。根据每两个向量之间的相似度可得到与当前分析的船舶的向量最相似的船舶对应的向量，即相似度最大时对应的船舶的向量，将其标记为；除此之外，获取与当前分析的船舶的向量第相似的船舶的向量记为，的取值由实施者自行设定，本发明实施例中选取第相似的作用是为了避免分布不是典型的，因此实施者可通过对的调节来判定当前船舶的供电情况是否典型。作为优选，本发明实施例中为5，的确定方式是通过不断的测试调优得到的。根据与当前船舶的向量最相似的船舶的向量以及与该船舶的向量第相似的向量计算该船舶的电能可靠度为：其中，表示船舶的电能可靠度；表示L2范数计算，也即是L2距离。通过当前船舶的向量与其最相似度的船舶的向量、以及当前船舶的向量与其第相似的向量之间L2范数获取当前船舶的电能可靠度，L2范数越大时，说明两个船舶对应向量的情况越不相同，则船舶之间的工作状态差异越大，当前船舶的电能可靠度越小；此处的电能可靠度是单纯的依靠两个船舶对应裕量特征的向量之间的L2范数得到的，为了提高船舶对应的电能可靠度的精度，考虑到不同相似度的船舶的向量之间存在差异，因此根据每个不同相似度的距离分布特征增加权重，即对第相似的船舶的向量考虑时增加权重，以避免过多的考虑第相似的船舶的向量。获取第相似的向量的权重的方法为：对于与当前船舶的向量第相似的船舶的向量之间，还存在与当前船舶的第2相似、第3相似、…、以及第相似的船舶的向量，由于本发明实施例中为5，因此还存在第2相似船舶的向量、第3相似船舶的向量以及第4相似船舶的向量；分别计算当前船舶的向量与其他每个相似的船舶的向量、、、以及的五个L2距离，并获取所有欧式距离的平均距离记为。进一步的，以当前船舶的向量与第相似的船舶的向量的最远的L2距离记为最远距离；当最远距离与平均距离相差越大，则认为第相似的船舶的向量越偏远；因此将第相似的船舶的向量的权重设置为，当最远距离与平均距离相差越大时，第相似的船舶的向量的权重越小。则根据对应的权重优化当前船舶的电能可靠度为：其中，表示第相似的船舶的向量的权重；表示优化后的当前船舶的电能可靠度，将优化后的当前船舶的电能可靠度记为可靠度指标。相似度越小的船舶的向量，其对当前船舶的向量的影响越小，因此对应的权重越小，分母项的1是为了避免分母出现为0的情况导致整体公式无意义，因此通过权重对不同相似的船舶的向量进行调节，使得船舶的可靠度指标的获取更加精确且具有说服力；以此类推，获取每个船舶的多能源供电系统在充能时供电的可靠度指标。步骤S300，根据每个船舶对应的瞬态组态描述子和可靠度指标得到任意两个船舶之间的差异距离，基于差异距离对所有的船舶进行聚类得到多个簇，对每个簇进行标号，根据各个簇的标号获取每个簇内每个船舶对应的类型描述子。具体的，由步骤S100获取每个船舶的多能源供电系统的瞬态组态描述子以及步骤S200获取每个船舶的多能源供电系统的可靠度指标，由于每个船舶对应的多能源供电系统都具有不同的使用模式，但部分船舶的多能源供电系统的模式存在关联，因此对使用较为相似的多能源供电系统划分为一组进行分析。由于每个船舶的多能源供电系统出现独特情况的因素较为复杂，其与历史记录中船舶的多能源供电系统的工作相关，因此多次出现某类型的异常的独特情况的概率几乎不存在，因此基于每个船舶在一次充能时供电的记录确定船舶的多能源供电系统的状态。对每个船舶的多能源供电系统的独特情况进行分析，以每个船舶的多能源供电系统作为一个样本，计算任意两个样本之间差异距离，计算差异距离时样本所对应的数据即是在一次充能时供电时船舶的可靠度指标以及船舶对应的瞬态组态描述子，每两个样本所对应的数据越相似，两个样本之间的差异距离越小，则差异距离的计算为：其中，表示样本与样本之间的差异距离；表示样本对应的瞬态组态描述子；表示样本对应的瞬态组态描述子；表示样本与样本对应的瞬态组态描述子之间的余弦相似度；表示样本对应的可靠度指标；表示样本对应的可靠度指标；可以用于约束两个样本之间过于相似的情况。当两个样本对应的瞬态组态描述子之间的余弦相似度越大时，说明这两个样本之间的差异距离越小，同时，当两个样本之间的可靠性指标的差值越小时，说明两个样本之间的差异距离越小；综合考虑船舶的多能源供电系统的瞬态组态描述子与可靠度指标，即使某个船舶的多能源供电系统的工作状态较为典型，可靠度指标较大，但仍然能够由其他船舶的多能源供电系统进行约束，使得船舶的多能源供电系统在充能时供电时不再出现过度调整或调整不及时的情况。以此类推，获取所有样本中任意两个样本之间的差异距离；基于样本之间的差异距离进行分类，本发明实施例中进行分类的算法采用OPTICS算法，搜索半径默认为0.15，簇内最小值设定为4；从而将所有的样本划分为多个簇，分类过程中可能会出现孤立的点，孤立点单独成簇，作为一个新的独特状态分析；对得到的所有的簇进行标注编号，也即是能够标记出每个船舶的多能源供电系统在此次充能时供电的过程中所属的簇；编号的方式是由OPTICS算法结果的簇标签得到，其中标签包括-1和不小于零的整数，标注为-1的簇表示过于离群的孤立样本，具体方法为现有公知技术，不再赘述。进一步的，基于上述进行簇分类的相同的方法，获取每个船舶的多能源供电系统在下一次充能时供电对应的可靠度指标和瞬态组态描述子，根据下一次充能时供电的船舶的可靠度指标和瞬态组态描述子进行差异距离的计算并再次进行分类得到多个簇，根据相邻两种聚类情况获取每个簇中每个船舶对应的类型描述子，也即是每个船舶的多能源供电系统的类型描述子，每个船舶的多能源供电系统所对应的类型描述子由该船舶所属的簇中除了该船舶之外的其他船舶决定。将待分析的船舶记为目标样本，获取当前聚类下目标样本所在簇中除了目标样本之外的其他船舶记为跟随样本，统计在下一次聚类中，每个跟随样本所属的簇的位置，根据簇的标号获取每个簇中的跟随样本的数量，并计算每个簇中的跟随样本的数量在所有跟随样本的数量中所占的比例，按照簇的标号依次将每个簇的比例进行排列构成向量，该向量为目标样本的类型描述子，即待分析的船舶的类型描述子。作为一个示例，假设此时存在四个船舶分别为船舶A、船舶B、船舶C和船舶D，在当前一次聚类中船舶A、船舶B、船舶C和船舶D均属于第1簇，在下一次聚类中船舶A和船舶B属于第1簇，船舶C属于第2簇，船舶D属于第3簇，则对船舶A的类型描述子进行获取时，统计当前一次聚类中船舶A所属簇中除了船舶A以外的船舶在下一次聚类中的所属的簇的位置，即船舶A所属簇中除了船舶A以外的船舶B属于第1簇，船舶C属于第2簇，船舶D属于第3簇，那么船舶A对应的类型描述子为，类型描述子中第一个是指船舶A所属簇中除了船舶A以外的船舶在下一次聚类中属于第1簇所占的比例，即船舶B在船舶B、船舶C以及船舶D中所占的比例为；同理，第二个是指船舶A所属簇中除了船舶A以外的船舶下一次聚类中属于第2簇所占的比例；第三个是指船舶A所属簇中除了船舶A以外的船舶下一次聚类中属于第3簇所占的比例；另外，获取船舶C所对应的类型描述子为，是指船舶C所属簇中除了船舶C以外的船舶在下一次聚类中属于第1簇所占的比例，即船舶A、船舶B在船舶A、船舶B以及船舶D中所占的比例为；是指船舶C所属簇中除了船舶C以外的船舶在下一次聚类中属于第2簇所占的比例；是指船舶C所属簇中除了船舶C以外的船舶在下一次聚类中属于第3簇所占的比例。以此类推，获取聚类的簇中每个船舶的多能源供电系统对应的类型描述子，表示了在这种充能时供电的状态下，每个船舶对应的同类型的簇的船舶还可能属于其他类型的簇的标记，即可以将此时的特征与未来以及之前的状态进行标记。步骤S400，获取每个船舶在多个采样时间段内的瞬态组态描述子得到特征向量，基于类型描述子对特征向量中每个瞬态组态描述子进行类型比较得到发展合理指标；基于神经网络获取每个船舶的预测发展合理指标，预设容忍次数和容忍阈值，根据容忍次数、容忍阈值与预测发展合理指标判断船舶的多能源供电系统是否正常。由步骤S100中得到每10秒的采样时间段内船舶的多能源供电系统对应的瞬态组态描述子，以一个船舶的多能源供电系统对应的多个采样时间段内的瞬态组态描述子进行组合构成时间-负载状态的特征向量，以便于后续利用神经网络进行预测，由于瞬态组态描述子的本质是一个向量，因此瞬态组态描述子的组合即是向量的拼接；拼接的向量的数量不宜过多，否则会使得后续神经网络的计算量多大，但拼接的向量数量不能低于2个，否则无法构成特征向量，作为优选，本发明实施例中以拼接的向量数量为3进行分析，即将3个采样时间段对应的瞬态组态描述子进行拼接得到特征向量。需要说明的是，特征向量中的瞬态组态描述子仅限于同一次充能时供电过程中的集合，而非选择其他充能时供电过程，原因是会使得下述计算的发展合理指标的取值过大，不再能真实代表船舶当前状态持续的合理性。对特征向量进行发展合理指标的计算，发展合理指标也即是船舶当前状态持续的合理性，具体获取方法为：首先设定特征向量中第一个瞬态组态描述子对应的采样时间段为T0，第二个瞬态组态描述子对应的采样时间段为T1，第三个瞬态组态描述子对应的采样时间段为T3；由于不同的瞬态组态描述子在与可靠度指标结合运算时可得到船舶的不同的簇，也即是每个瞬态组态描述子对应特定的船舶的类型描述子，将T0时的瞬态组态描述子对应的类型描述子与T1时的类型进行比较，也即是在T1时的瞬态组态描述子能够得到船舶的多能源供电系统的所属的簇，当T1时船舶的所属的簇在T0时的瞬态组态描述子对应的类型描述子中出现时，则船舶的多能源供电系统的发展合理指标S加1；当T1时船舶的所属的簇不在T0时的瞬态组态描述子对应的类型描述子中时，船舶的多能源供电系统的发展合理指标S不变。需要说明的是，船舶的多能源供电系统的发展合理指标S的初始值为0。以此类推，当T2时船舶的所属的簇在T1时的瞬态组态描述子对应的类型描述子中时，船舶的多能源供电系统的发展合理指标S加1,反之则发展合理指标S保持不变；发展合理指标S的最大取值为特征向量中所有瞬态组态描述子的数量减1。由此得到每个船舶对应的发展合理指标，目的是为了确定在短暂的时间内，以一个瞬态组态描述子为基础向后时间持续发展时类型描述子的典型程度，类型描述子越典型则发展合理指标越大。需要说明的是，对于同一个船舶而言，其在某个时刻的瞬态组态描述子在不同的向量拼接中得到的特征向量不同，以至于得到的船舶的发展合理指标S不同，对于这种情况而言，去所有发展合理指标S的均值作为最终的发展合理指标S。例如，此时存在500个采样时间段的瞬态组态描述子，所有瞬态组态描述子的组合拼接构成了100个相同的特征向量，但在100个特征向量中有50个特征向量所对应的发展合理指标S为2，10个特征向量所对应的发展合理指标S为0，其他40个特征向量所对应的发展合理指标S为1，则该船舶对应的最终的发展合理指标S为/100=1.4。进一步的，利用历史时刻中每个船舶在充能时供电中对应的特征向量进行FCN神经网络的训练，输入为瞬态组态描述子拼接得到的特征向量，输出为预测发展合理指标，FCN神经网络的训练过程为常用手段，本发明实施例中不再详细赘述。由实施者根据特征向量的长度自适应预设容忍次数和容忍阈值，通过容忍次数和容忍阈值判断此时的预测发展合理指标是否合适，例如容忍次数为2，容忍阈值为1.5，设定船舶的预测发展合理指标不得连续2次低于1.5，若低于，则即刻启动发电机，防止船舶的多能源供电系统的供电状态是长期异常的，从而避免电池过度消耗电能、放电倍率过大以及整体供电负载较大导致欠电风险较大的问题。综上所述，本发明实施例通过采集每个船舶在固定的采样时间段内多能源供电系统的耗能状态向量和供能状态向量，根据耗能状态向量和供能状态向量得到多能源供电系统的瞬态组态描述子；获取船舶在一次充能时供电过程中多能源供电系统的用电功率以及供电功率，基于供电功率与用电功率的差值得到对应的裕量，获取每个船舶在历史充能时供电过程对应的裕量构建直方图，根据直方图获取船舶对应的向量；根据当日所有船舶对应的向量得到可靠度指标；根据每个船舶对应的瞬态组态描述子和可靠度指标得到任意两个船舶之间的差异距离，基于差异距离对所有的船舶进行聚类得到多个簇，对每个簇进行标号，根据各个簇的标号获取每个簇内每个船舶对应的类型描述子；获取每个船舶在多个采样时间段内的瞬态组态描述子得到特征向量，基于类型描述子对特征向量中每个瞬态组态描述子进行类型比较得到发展合理指标；则根据每个船舶对应的特征向量可得到对应的发展合理指标，预设容忍次数和容忍阈值，基于神经网络获取每个船舶的预测发展合理指标，根据容忍次数、容忍阈值与预测发展合理指标判断船舶的多能源供电系统是否正常；提高对当前船舶的多能源供电系统的工作状态的监控，可以及时安全的得到充电，鲁棒性较高。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
