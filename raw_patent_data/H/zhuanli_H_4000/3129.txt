标题title
一种智慧公交智能车载实时告警系统及其方法
摘要abst
本发明涉及车辆报警技术领域，尤其为一种智慧公交智能车载实时告警系统及其方法，包括系统管理模块：用于对系统进行管理；基础信息模块：用于对基础信息进行管理；视频监控模块：用于车辆监控视频的管理；一键报警模块：用于车辆一键报警功能的管理；GIS地图模块：用于车辆的定位管理；客流分析模块；用于对公交车客流进行分析；统计分析模块：用于车辆信息的统计分析。本发明对车内外情况进行识别，对识别出的紧急情况，提供一键报警功能，保证车辆遇到的紧急情况能够被及时传送并解决。本发明对车辆情况进行实时监控，并对监控信息进行记录，对车辆进行实时定位和轨迹记录，便于实时掌握车辆状态信息，提高车辆问题解决效率。
权利要求书clms
1.一种智慧公交智能车载实时告警系统，其特征在于：包括：用于对系统进行管理的系统管理模块、用于对基础信息进行管理的基础信息模块、用于车辆监控视频管理的视频监控模块、用于车辆一键报警功能管理的一键报警模块、用于车辆定位管理的GIS地图模块、用于对公交车客流进行分析的客流分析模块和用于车辆信息统计分析的统计分析模块；所述基础信息模块包括车辆管理单元、驾驶员管理单元、设备管理单元、线路管理单元、车辆录像计划单元、报警类型管理单元和路口超速报警管理单元；所述视频监控模块包括实时监控单元、历史回放单元和视频轮询单元；所述视频监控模块还包括对驾驶员疲劳状态的检测；所述疲劳状态的检测通过构造训练样本T获取驾驶员五官的位置，并对驾驶员头部进行追踪，得到训练样本T的表达式如下：其中，为驾驶员面部特征点的定位；并对训练样本进行循环移位获取驾驶员面部特征样本；使用如下公式进行世界坐标系的三维点和成像平面的二维点间的相互转化：其中，表示归一化后驾驶员面部特征点对应的二维坐标，表示归一化后驾驶员面部特征点对应的三维坐标，c表示缩放因子的标量，表示摄像头内各种参数的矩阵，为世界坐标系到摄像头坐标系的旋转矩阵，为世界坐标系相对于相机坐标系平移量的向量；根据旋转矩阵计算三维坐标系中三个方向的欧拉角对驾驶员头部姿态进行追踪定位：其中，表示x轴方向的欧拉角，表示y轴方向的欧拉角，表示z轴方向的欧拉角。2.根据权利要求1所述的智慧公交智能车载实时告警系统，其特征在于：根据驾驶员注意力与眼部、口部状态对驾驶员疲劳状态进行检测；具体包括：根据对驾驶员头部姿态的追踪定位，确定驾驶员眼部/口部定位：其中，为驾驶员眼部/口部最右侧点坐标，为驾驶员眼部/口部最左侧点坐标，为驾驶员眼部/口部最高点坐标为，驾驶员眼部/口部最低点坐标，E为驾驶员眼部张开度，设定E的阈值，当E的值大于阈值时，判断眼部/口部处于睁开状态，否则判断为闭合状态；根据驾驶员眨眼频次确定驾驶员注意力，根据：其中，为统计时间段，为统计时间段内驾驶员眨眼次数，为统计时间段，P为驾驶员眨眼频次，设定驾驶员眨眼频次阈值，当P值小于阈值时，判断驾驶员注意力处于集中状态，当P值大于阈值时，判断驾驶员注意力不集中。3.根据权利要求1所述的智慧公交智能车载实时告警系统，其特征在于：所述一键报警模块包括一键报警单元和一键报警管理单元。4.根据权利要求3所述的智慧公交智能车载实时告警系统，其特征在于：所述一键报警单元提供对讲功能、实时监控功能、录像功能和报警处理功能。5.根据权利要求1所述的智慧公交智能车载实时告警系统，其特征在于：所述 GIS地图模块包括实时定位单元和轨迹回放单元。6.一种基于权利要求1-5任意一项所述的智慧公交智能车载实时告警系统的告警方法，其特征在于，包括如下步骤：S1.1：获取车辆基本信息，对车辆情况进行实时定位并记录；S1.2：车辆视频监控对车内情况进行识别和记录，对识别到的驾驶员异常驾驶情况及车辆异常行驶情况进行视频录制并通过报警器报警提示，同时提供一键报警功能供驾驶员处理紧急情况；S1.3：车辆视频监控对车内外实时情况进行监控识别，通过一键报警功能处理紧急情况。
说明书desc
技术领域本发明涉及车辆报警技术领域，尤其是一种智慧公交智能车载实时告警系统及其方法。背景技术当前，公交车已经广泛应用于世界各国的每一个城市中。随着公交车数量的增长，交通事故的发生频率也随之增长。为了减少或避免交通事故等危险情况的出现，需要对公交车的状况进行检测。随着计算机技术以及通信技术的发展,汽车智能控制以及智能驾驶应用研究随之快速展开。随着科技发展以及物联网技术的普及,车载终端能够获得更多的与车辆控制有关的实时数据。车载终端能够将实时图像等数据上传到服务器,由服务器进行如图像识别处理等需要大量硬件资源的运算，使得汽车智能控制的技术取得了进一步的发展。但是，目前的智能驾车装置适用于私家车的辅助驾驶,且仅能够进行动、静态目标识别跟踪,实现车道偏离提醒以及防碰撞，并没有适合公交车智能辅助驾驶和管控的智能车载终端。公交车需要行驶在拥挤的城市路段,频繁的启动停止,并且公交车周围有更多的人员,因此，为了防止交通事故的发生，监控驾驶员的状态显得尤为重要。发明内容本发明的目的是通过提出一种智慧公交智能车载实时告警系统及其方法，以解决上述背景技术中提出的缺陷。本发明采用的技术方案如下：提供一种智慧公交智能车载实时告警系统，包括：系统管理模块：用于对系统进行管理；基础信息模块：用于对基础信息进行管理；视频监控模块：用于车辆监控视频的管理；一键报警模块：用于车辆一键报警功能的管理；GIS地图模块：用于车辆的定位管理；客流分析模块；用于对公交车客流进行分析；统计分析模块：用于车辆信息的统计分析。作为本发明的一种优选技术方案：所述基础信息模块包括车辆管理单元、驾驶员管理单元、设备管理单元、线路管理单元、车辆录像计划单元、报警类型管理单元和路口超速报警管理单元。作为本发明的一种优选技术方案：所述视频监控模块包括实时监控单元、历史回放单元和视频轮询单元。作为本发明的一种优选技术方案：所述视频监控模块还包括对驾驶员疲劳状态的检测。作为本发明的一种优选技术方案：所述疲劳状态的检测通过构造训练样本T获取驾驶员五官的位置并对驾驶员头部进行追踪，得到训练样本T的表达式如下：其中，为驾驶员面部特征点的定位；并对训练样本进行循环移位获取驾驶员面部特征样本；使用如下公式进行世界坐标系的三维点和成像平面的二维点间的相互转化：其中，表示归一化后驾驶员面部特征点对应的二维坐标，表示归一化后驾驶员面部特征点对应的三维坐标，c表示缩放因子的标量，表示摄像头内各种参数的矩阵，为世界坐标系到摄像头坐标系的旋转矩阵，为世界坐标系相对于相机坐标系平移量的向量；根据旋转矩阵计算三维坐标系中三个方向的欧拉角对驾驶员头部姿态进行追踪定位：其中，表示x轴方向的欧拉角，表示y轴方向的欧拉角，表示z轴方向的欧拉角。作为本发明的一种优选技术方案：根据驾驶员注意力与眼部、口部状态对驾驶员疲劳状态进行检测；具体包括：根据对驾驶员头部姿态的追踪定位，确定驾驶员眼部/口部定位：其中，为驾驶员眼部/口部最右侧点坐标，为驾驶员眼部/口部最左侧点坐标，为驾驶员眼部/口部最高点坐标为，驾驶员眼部/口部最低点坐标，E为驾驶员眼部张开度，设定E的阈值，当E的值大于阈值时，判断眼部/口部处于睁开状态，否则判断为闭合状态；根据驾驶员眨眼频次确定驾驶员注意力，根据：其中，为统计时间段，为统计时间段内驾驶员眨眼次数，为统计时间段，P为驾驶员眨眼频次，设定驾驶员眨眼频次阈值，当P值小于阈值时，判断驾驶员注意力处于集中状态，当P值大于阈值时，判断驾驶员注意力不集中。作为本发明的一种优选技术方案：所述一键报警模块包括一键报警单元和一键报警管理单元。作为本发明的一种优选技术方案：所述一键报警单元提供对讲功能、实时监控功能、录像功能和报警处理的功能。作为本发明的一种优选技术方案：所述 GIS地图模块包括实时定位单元和轨迹回放单元。提供一种智慧公交智能车载实时告警方法，包括如下步骤：S1.1：获取车辆基本信息，对车辆情况进行实时定位并记录；S1.2：车辆视频监控对车内情况进行识别和记录，对识别到的驾驶员异常驾驶情况及车辆异常行驶情况进行视频录制并通过报警器报警提示，同时提供一键报警功能供驾驶员处理紧急情况；S1.3：车辆视频监控对车内外实时情况进行监控识别，通过一键报警功能处理紧急情况。本发明提供的智慧公交智能车载实时告警系统及其方法，与现有技术相比，其有益效果有：本发明提供的实时告警系统对车内外情况进行识别，对识别出的紧急情况，提供一键报警功能，保证车辆遇到的紧急情况能够被及时传送并解决。本发明对车辆情况进行实时监控，并对监控信息进行记录，对车辆进行实时定位和轨迹记录，便于实时掌握车辆状态信息，提高车辆问题解决效率。附图说明图1为本发明优选实施例的系统框图；图2为基础信息模块的模块图；图3为视频监控模块的模块图；图4为一键报警模块的模块图；图5为GIS地图模块的模块图；图6为本发明优选实施例中方法流程图；图7为本发明优选实施例中报警类型管理单元页面图；图8为本发明优选实施例中路口超速报警管理单元页面图。图中各个标记的意义为：1、智能车载实时告警系统；100、系统管理模块；200、基础信息模块；210、车辆管理单元；220、驾驶员管理单元；230、设备管理单元；240、线路管理单元；250、车辆录像计划单元；260、报警类型管理单元；270、路口超速报警管理单元；300、视频监控模块；310、实时监控单元；320、历史回放单元；330、视频轮询单元；400、一键报警模块；410、一键报警单元；420、一键报警管理单元；500、GIS地图模块；510、实时定位单元；520、轨迹回放单元；600、客流分析模块；700、统计分析模块。具体实施方式需要说明的是，在不冲突的情况下，本实施例中的实施例及实施例中的特征可以相互组合，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。参照图1，本发明优选实施例提供了一种智慧公交智能车载实时告警系统，包括：系统管理模块100：用于对系统进行管理；基础信息模块200：用于对基础信息进行管理；视频监控模块300：用于车辆监控视频的管理；一键报警模块400：用于车辆一键报警功能的管理；GIS地图模块500：用于车辆的定位管理；客流分析模块600；用于对公交车客流进行分析；统计分析模块700：用于车辆信息的统计分析。参照图2，基础信息模块200包括车辆管理单元210、驾驶员管理单元220、设备管理单元230、线路管理单元240、车辆录像计划单元250、报警类型管理单元260和路口超速报警管理单元270。参照图3，视频监控模块300包括实时监控单元310、历史回放单元320和视频轮询单元330。视频监控模块300还包括对驾驶员疲劳状态的检测。所述疲劳状态的检测通过构造训练样本T获取驾驶员五官的位置，并对驾驶员头部进行追踪，得到训练样本T的表达式如下：其中，为驾驶员面部特征点的定位；并对训练样本进行循环移位获取驾驶员面部特征样本；使用如下公式进行世界坐标系的三维点和成像平面的二维点间的相互转化：其中，表示归一化后驾驶员面部特征点对应的二维坐标，表示归一化后驾驶员面部特征点对应的三维坐标，c表示缩放因子的标量，表示摄像头内各种参数的矩阵，为世界坐标系到摄像头坐标系的旋转矩阵，为世界坐标系相对于相机坐标系平移量的向量；根据旋转矩阵计算三维坐标系中三个方向的欧拉角对驾驶员头部姿态进行追踪定位：其中，表示x轴方向的欧拉角，表示y轴方向的欧拉角，表示z轴方向的欧拉角。根据驾驶员注意力与眼部、口部状态对驾驶员疲劳状态进行检测；具体包括：根据对驾驶员头部姿态的追踪定位，确定驾驶员眼部/口部定位得到：其中，为驾驶员眼部/口部最右侧点坐标，为驾驶员眼部/口部最左侧点坐标，为驾驶员眼部/口部最高点坐标为，驾驶员眼部/口部最低点坐标，E为驾驶员眼部张开度，设定E的阈值，当E的值大于阈值时，判断眼部/口部处于睁开状态，否则判断为闭合状态；根据驾驶员眨眼频次确定驾驶员注意力，根据：其中，为统计时间段，为统计时间段内驾驶员眨眼次数，为统计时间段，P为驾驶员眨眼频次，设定驾驶员眨眼频次阈值，当P值小于阈值时，判断驾驶员注意力处于集中状态，当P值大于阈值时，判断驾驶员注意力不集中；根据驾驶员注意力与眼部、口部状态对驾驶员疲劳状态进行检测。参照图4，一键报警模块400包括一键报警单元410和一键报警管理单元420。一键报警单元410提供对讲功能、实时监控功能、录像功能和报警处理功能。参照图5，GIS地图模块500包括实时定位单元510和轨迹回放单元520。参照图6，本发明另一优选实施例提供一种智慧公交智能车载实时告警方法，包括如下步骤：S1.1：获取车辆基本信息，对车辆情况进行实时定位并记录；S1.2：车辆视频监控对车内情况进行识别和记录，对识别到的驾驶员异常驾驶情况及车辆异常行驶情况进行视频录制并通过报警器报警提示，同时提供一键报警功能供驾驶员处理紧急情况；S1.3：车辆视频监控对车内外实时情况进行监控识别，通过一键报警功能处理紧急情况。本实施例中，以驾驶员驾驶1路公交车为例，基础信息模块200中，车辆管理单元210记录车辆基本信息，驾驶员管理单元220记录驾驶员基本信息，设备管理单元230记录设备基信息，线路管理单元240对车辆线路进行管理、记录，车辆录像计划单元250对车辆录像计划进行管理，报警类型管理单元260对车辆报警类型及详细信息进行管理、记录，路口超速报警管理单元270对车辆在路口的运行状态进行检测，当车辆超速时进行报警管理。视频监控模块300对车辆内、外部各处进行监控，并通过采集图像对驾驶员的疲劳状态进行检测，保证乘客的安全。参照图7，通过视频录像对驾驶员的疲劳状态的进行检测并构造训练样本：其中，为驾驶员面部特征点的定位；并对训练样本进行循环移位；获取驾驶员五官的位置并对驾驶员头部进行追踪；使用如下公式进行世界坐标系的三维点和成像平面的二维点间的相互转化：其中，表示归一化后驾驶员面部特征点对应的二维坐标，表示归一化后驾驶员面部特征点对应的三维坐标，c表示缩放因子的标量，Q表示摄像头内各种参数的矩阵，为世界坐标系到摄像头坐标系的旋转矩阵，为世界坐标系相对于相机坐标系平移量的向量；根据旋转矩阵计算欧拉角三维坐标系中三个方向的欧拉角对驾驶员头部姿态进行追踪定位：其中，表示x轴方向的欧拉角，表示y轴方向的欧拉角，表示z轴方向的欧拉角。根据对驾驶员头部姿态的追踪定位，确定驾驶员眼部/口部定位得到：其中，为驾驶员眼部/口部最右侧点坐标，为驾驶员眼部/口部最左侧点坐标，为驾驶员眼部/口部最高点坐标为，驾驶员眼部/口部最低点坐标，设定E的阈值为0.2，当E的值大于0.2时，判断眼部/口部处于睁开状态，当E的值小于0.2时，判断为闭合状态；驾驶员注意力为高度集中状态，一般为15次每分钟，眨眼频次低于正常人眨眼频次，正常人眨眼频次为20-30次每分钟，根据：其中，为统计时间段内驾驶员眨眼次数，为统计时间段，设定驾驶员眨眼频次阈值为25次每分钟，当P值小于阈值时，判断驾驶员注意力处于集中状态，当P值大于阈值时，判断驾驶员注意力不集中；根据驾驶员注意力与眼部、口部状态对驾驶员疲劳状态进行检测。当检测判断驾驶员处于疲劳状态时，通过报警器报警提示，并进行视频录制。报警类型管理单元260对报警的各类信息进行详细记录。参照图8，路口超速报警管理单元270对车辆经过各路口时的位置进行定位，并对车辆速度进行检测，检测是否超速行驶，当车辆车速行驶时，进行报警，提醒驾驶员减速。对检测出车辆处于紧急状态时，车辆一键报警模块400提供实时对讲功能，实时监控功能、录像功能和报警处理的功能，确保驾驶员及乘客的安全。车辆运行过程中，GIS地图模块500对车辆进行实时定位，并对车辆轨迹进行记录。对于本领域技术人员而言，显然本发明不限于上述示范性实施例的细节，而且在不背离本发明的精神或基本特征的情况下，能够以其他的具体形式实现本发明。因此，无论从哪一点来看，均应将实施例看作是示范性的，而且是非限制性的，本发明的范围由所附权利要求而不是上述说明限定，因此旨在将落在权利要求的等同要件的含义和范围内的所有变化囊括在本发明内。不应将权利要求中的任何附图标记视为限制所涉及的权利要求。此外，应当理解，虽然本说明书按照实施方式加以描述，但并非每个实施方式仅包含一个独立的技术方案，说明书的这种叙述方式仅仅是为清楚起见，本领域技术人员应当将说明书作为一个整体，各实施例中的技术方案也可以经适当组合，形成本领域技术人员可以理解的其他实施方式。
