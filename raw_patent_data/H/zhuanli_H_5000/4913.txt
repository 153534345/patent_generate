标题title
一种基于商用密码算法的web应用数据加密技术实现方法
摘要abst
本发明提出了一种基于商用密码算法的web应用数据加密技术实现方法，包括以下步骤：S1，服务器端获取得到SM4对称秘钥SM4_KEY，客户端获取得到通讯标识TK；S2，客户端将其加密用户名和加密密码以及通讯标识TK发送至服务器；S3，根据通讯标识TK从缓存服务器端redis中获取通讯标识TK所对应的SM4对称秘钥SM4_KEY；S4，服务器端利用步骤S3中得到的SM4对称秘钥SM4_KEY对加密用户名和加密密码进行解密，得到其解密用户名和解密密码；验证通过后，客户端登录服务器端成功；S5，利用客户端对服务器端的数据进行操作。本发明能够实现登录安全，增强系统防护能力。
权利要求书clms
1.一种基于商用密码算法的web应用数据加密技术实现方法，其特征在于，包括以下步骤：S1，服务器端获取得到SM4对称秘钥SM4_KEY，客户端获取得到通讯标识TK；S2，客户端对获取的用户名和密码分别利用SM4对称秘钥SM4_KEY进行加密，得到其加密用户名和加密密码；客户端将其加密用户名和加密密码以及通讯标识TK发送至服务器；S3，服务器端接收到客户端发送的加密用户名和加密密码以及通讯标识TK后，根据通讯标识TK从缓存服务器端redis中获取通讯标识TK所对应的SM4对称秘钥SM4_KEY；S4，服务器端利用步骤S3中得到的SM4对称秘钥SM4_KEY对加密用户名和加密密码进行解密，得到其解密用户名和解密密码；验证通过后，客户端登录服务器端成功。2.根据权利要求1所述的基于商用密码算法的web应用数据加密技术实现方法，其特征在于，在步骤S2中包括以下步骤：S21，客户端获取用户在用户名键入框键入的键入用户名和在密码键入框键入的键入密码；S22，对获取的键入用户名和键入密码利用客户端预设的映射表，映射得到用户名和映射密码；S23，对映射密码进行安全算法得到其密码；。3.根据权利要求1所述的基于商用密码算法的web应用数据加密技术实现方法，其特征在于，在步骤S1中包括以下步骤：S11，客户端向服务器端发送获取SM2公钥请求，在服务器端上存放有SM2公钥SM2_PUBKEY和SM2私钥SM2_PRIKEY对；S12，服务器端接收到客户端发送的SM2公钥请求后，将SM2公钥SM2_PUBKEY以明文形式返回给客户端；S13，客户端接收到服务器端发送的SM2公钥SM2_PUBKEY后，生成一个SM4对称秘钥SM4_KEY；S14，使用SM2公钥SM2_PUBKEY对SM4对称秘钥SM4_KEY做SM2加密得到密文ENSM4K，并发送密文ENSM4K给服务器端；S15，服务器端接收到客户端发送的密文ENSM4K后，用SM2私钥SM2_PRIKEY对接收到的密文ENSM4K进行解密，解密后得到SM4对称秘钥SM4_KEY，同时生成一个通讯标识TK；S16，将通讯标识TK与SM4对称秘钥SM4_KEY建立关联形成KV键值对存储在缓存服务器端redis中；用SM4对称秘钥SM4_KEY对通讯标识TK进行SM4对称加密，得到加密标识ENTK，返回给客户端；S17，客户端用SM4对称秘钥SM4_KEY对接收到的加密标识ENTK进行SM4对称解密得到通讯标识TK。4.根据权利要求3所述的基于商用密码算法的web应用数据加密技术实现方法，其特征在于，在步骤S15中通讯标识TK的生成方法包括以下步骤：S151，获取SM2私钥SM2_PRIKEY所对应的SM2公钥SM2_PUBKE；S152，获取解密得到的SM4对称秘钥SM4_KEY；S153，将步骤S151中的SM2公钥SM2_PUBKE和步骤S152中的SM4对称秘钥SM4_KEY连接起来，得到字符连接串；S154，根据步骤S153中得到的字符连接串计算其通讯标识TK。5.根据权利要求3所述的基于商用密码算法的web应用数据加密技术实现方法，其特征在于，在步骤S17中判断解密得到的通讯标识TK是否正确的方法包括以下步骤：S171，获取SM2公钥SM2_PUBKE；S172，获取SM4对称秘钥SM4_KEY；S173，将步骤S171中的SM2公钥SM2_PUBKE和步骤S172中的SM4对称秘钥SM4_KEY连接起来，得到字符判断连接串；S174，根据步骤S173中得到的字符判断连接串计算其判断码；S175，判断判断码C″′与通讯标识TKC′是否一致：若判断码C″′与通讯标识TKC′一致，则解密得到的通讯标识TK正确；若判断码C″′与通讯标识TKC′不一致，则解密得到的通讯标识TK错误；返回步骤S11；服务器端更新SM2公钥SM2_PUBKEY和SM2私钥SM2_PRIKEY对。6.根据权利要求1所述的基于商用密码算法的web应用数据加密技术实现方法，其特征在于，在步骤S4中包括以下步骤：S41，服务器端获取解密用户名和解密密码；S42，根据步骤S41获取的解密用户名利用服务器端预设的映射表，反映射得到服务器端查找用户名；S43，根据服务器端查找用户名查找用户名数据库中是否存储有与服务器端查找用户名一致的用户名：若用户名数据库中存储有与服务器端查找用户名一致的用户名，则执行下一步；若用户名数据库中未存储有与服务器端查找用户名一致的用户名，则在用户名键入框键入的键入用户名错误；S44，提取服务器端查找用户名所对应的服务器端密码，对服务器端密码进行安全算法得到验证密码；S45，判断验证密码与步骤S41中的解密密码是否一致：若验证密码与步骤S41中的解密密码一致，则验证通过；若验证密码与步骤S41中的解密密码不一致，则在密码键入框键入的键入密码错误。7.根据权利要求1所述的基于商用密码算法的web应用数据加密技术实现方法，其特征在于，还包括步骤S5，利用客户端对服务器端的数据进行下载。8.一种基于商用密码算法的web应用数据加密技术实现系统，其特征在于，包括秘钥通讯获取模块、加密发送模块、秘钥获取模块和解密通过模块；秘钥通讯获取模块的数据输出端与加密发送模块的数据输入端相连，加密发送模块的数据输出端与秘钥获取模块的数据输入端相连，秘钥获取模块的数据输出端与解密通过模块的数据输入端相连；秘钥通讯获取模块用于服务器端获取得到SM4对称秘钥SM4_KEY，客户端获取得到通讯标识TK；加密发送模块用于客户端对获取的用户名和密码分别利用SM4对称秘钥SM4_KEY进行加密，得到其加密用户名和加密密码；客户端将其加密用户名和加密密码以及通讯标识TK发送至服务器；秘钥获取模块用于服务器端接收到客户端发送的加密用户名和加密密码以及通讯标识TK后，根据通讯标识TK从缓存服务器端redis中获取通讯标识TK所对应的SM4对称秘钥SM4_KEY；解密通过模块用于服务器端利用步骤S3中得到的SM4对称秘钥SM4_KEY对加密用户名和加密密码进行解密，得到其解密用户名和解密密码；验证通过后，客户端登录服务器端成功。9.根据权利要求8所述的基于商用密码算法的web应用数据加密技术实现系统，其特征在于，在加密发送模块中包括以下步骤：S21，客户端获取用户在用户名键入框键入的键入用户名和在密码键入框键入的键入密码；S22，对获取的键入用户名和键入密码利用客户端预设的映射表，映射得到用户名和映射密码；S23，对映射密码进行安全算法得到其密码。10.根据权利要求8所述的基于商用密码算法的web应用数据加密技术实现系统，其特征在于，在秘钥通讯获取模块中包括以下步骤：S11，客户端向服务器端发送获取SM2公钥请求，在服务器端上存放有SM2公钥SM2_PUBKEY和SM2私钥SM2_PRIKEY对；S12，服务器端接收到客户端发送的SM2公钥请求后，将SM2公钥SM2_PUBKEY以明文形式返回给客户端；S13，客户端接收到服务器端发送的SM2公钥SM2_PUBKEY后，生成一个SM4对称秘钥SM4_KEY；S14，使用SM2公钥SM2_PUBKEY对SM4对称秘钥SM4_KEY做SM2加密得到密文ENSM4K，并发送密文ENSM4K给服务器端；S15，服务器端接收到客户端发送的密文ENSM4K后，用SM2私钥SM2_PRIKEY对接收到的密文ENSM4K进行解密，解密后得到SM4对称秘钥SM4_KEY，同时生成一个通讯标识TK；S16，将通讯标识TK与SM4对称秘钥SM4_KEY建立关联形成KV键值对存储在缓存服务器端redis中；用SM4对称秘钥SM4_KEY对通讯标识TK进行SM4对称加密，得到加密标识ENTK，返回给客户端；S17，客户端用SM4对称秘钥SM4_KEY对接收到的加密标识ENTK进行SM4对称解密得到通讯标识TK。
说明书desc
技术领域本发明涉及一种密码学技术领域，特别是涉及一种基于商用密码算法的web应用数据加密技术实现方法。背景技术随着网络技术的发展，互联网已经深入到广大的网络用户心中，深深地影响了广大网络用户的生活工作及休闲。通常，网络用户如果要访问某一网站的网页，需要先登录该网站的服务器。专利申请号2020110346425，名称为“一种Web安全登录密码的隐藏方法及系统”，公开了如下步骤：S1：在预设浏览器的登录页面中确定用户名和密码的输入框的位置；S2：根据预设浏览器的种类和用户名和密码的输入框的位置，在登录界面中加入虚拟组件；S3：扫描当前页面的光标位置，当光标聚焦在用户名和密码的输入框中时，将用户名和密码的输入框设为可输入状态；当光标消失时，将用户名和密码的输入框设为禁用状态；S4：当用户完成用户名和登录密码的输入且用户名和密码的输入框为禁用状态时，虚拟组件启动预设隐藏机制使预设浏览器将预设的虚拟密码记录为登录密码。该专利申请在不破坏浏览器设计的基础上，实现了密码的隐蔽，对安全保密级别要求比较高的项目可以通过本发明暴露出虚拟密码，隐蔽真实密码，学习成本低，易操作，为密码的安全增加了一份保障。发明内容本发明旨在至少解决现有技术中存在的技术问题，特别创新地提出了一种基于商用密码算法的web应用数据加密技术实现方法。为了实现本发明的上述目的，本发明提供了一种基于商用密码算法的web应用数据加密技术实现方法，包括以下步骤：S1，服务器端获取得到SM4对称秘钥SM4_KEY，客户端获取得到通讯标识TK；S2，客户端对获取的用户名和密码分别利用SM4对称秘钥SM4_KEY进行加密，得到其加密用户名和加密密码；客户端将其加密用户名和加密密码以及通讯标识TK发送至服务器；S3，服务器端接收到客户端发送的加密用户名和加密密码以及通讯标识TK后，根据通讯标识TK从缓存服务器端redis中获取通讯标识TK所对应的SM4对称秘钥SM4_KEY；S4，服务器端利用步骤S3中得到的SM4对称秘钥SM4_KEY对加密用户名和加密密码进行解密，得到其解密用户名和解密密码；验证通过后，客户端登录服务器端成功；S5，利用客户端对服务器端的数据进行操作。在本发明的一种优选实施方式中，在步骤S2中包括以下步骤：S21，客户端获取用户在用户名键入框键入的键入用户名和在密码键入框键入的键入密码；S22，对获取的键入用户名和键入密码利用客户端预设的映射表，映射得到用户名和映射密码；S23，对映射密码进行安全算法得到其密码；其利用映射密码得到其密码的计算方法为：userpassword′＝transmission fixed StringXORtransmissionfixed String，其中，username表示用户名；userpassword表示映射密码；XOR表示异或运算；transmission fixed String表示字符串加密算法；userpassword′表示密码。在本发明的一种优选实施方式中，在步骤S1中包括以下步骤：S11，客户端向服务器端发送获取SM2公钥请求，在服务器端上存放有SM2公钥SM2_PUBKEY和SM2私钥SM2_PRIKEY对；S12，服务器端接收到客户端发送的SM2公钥请求后，将SM2公钥SM2_PUBKEY以明文形式返回给客户端；S13，客户端接收到服务器端发送的SM2公钥SM2_PUBKEY后，生成一个SM4对称秘钥SM4_KEY；S14，使用SM2公钥SM2_PUBKEY对SM4对称秘钥SM4_KEY做SM2加密得到密文ENSM4K，并发送密文ENSM4K给服务器端；S15，服务器端接收到客户端发送的密文ENSM4K后，用SM2私钥SM2_PRIKEY对接收到的密文ENSM4K进行解密，解密后得到SM4对称秘钥SM4_KEY，同时生成一个通讯标识TK；S16，将通讯标识TK与SM4对称秘钥SM4_KEY建立关联形成KV键值对存储在缓存服务器端redis中；用SM4对称秘钥SM4_KEY对通讯标识TK进行SM4对称加密，得到加密标识ENTK，返回给客户端；S17，客户端用SM4对称秘钥SM4_KEY对接收到的加密标识ENTK进行SM4对称解密得到通讯标识TK。在本发明的一种优选实施方式中，在步骤S15中通讯标识TK的生成方法包括以下步骤：S151，获取SM2私钥SM2_PRIKEY所对应的SM2公钥SM2_PUBKE；S152，获取解密得到的SM4对称秘钥SM4_KEY；S153，将步骤S151中的SM2公钥SM2_PUBKE和步骤S152中的SM4对称秘钥SM4_KEY连接起来，得到字符连接串，其字符连接串的计算方法为：C＝A-B，其中，A表示步骤S151中的SM2公钥SM2_PUBKE；-表示连接符；B表示步骤S152中的SM4对称秘钥SM4_KEY；C表示字符连接串；S154，根据步骤S153中得到的字符连接串计算其通讯标识TK，其通讯标识TK的计算方法为：C′＝transmission fixed String，其中，transmission fixed String表示字符串加密算法，优选采用MD5或SHA1；C表示字符连接串；C′表示通讯标识TK。在本发明的一种优选实施方式中，在步骤S17中判断解密得到的通讯标识TK是否正确的方法包括以下步骤：S171，获取SM2公钥SM2_PUBKE；S172，获取SM4对称秘钥SM4_KEY；S173，将步骤S171中的SM2公钥SM2_PUBKE和步骤S172中的SM4对称秘钥SM4_KEY连接起来，得到字符判断连接串，其字符判断连接串的计算方法为：C″＝A′-B′，其中，A′表示步骤S171中的SM2公钥SM2_PUBKE；-表示连接符；B′表示步骤S172中的SM4对称秘钥SM4_KEY；C″表示字符判断连接串；S174，根据步骤S173中得到的字符判断连接串计算其判断码，其判断码的计算方法为：C″′＝transmission fixed String，其中，transmission fixed String表示字符串加密算法，优选采用MD5或SHA1；C″表示字符判断连接串；C″′表示判断码；S175，判断判断码C″′与通讯标识TKC′是否一致：若判断码C″′与通讯标识TKC′一致，则解密得到的通讯标识TK正确；若判断码C″′与通讯标识TKC′不一致，则解密得到的通讯标识TK错误；返回步骤S11；服务器端更新SM2公钥SM2_PUBKEY和SM2私钥SM2_PRIKEY对。在本发明的一种优选实施方式中，在步骤S4中包括以下步骤：S41，服务器端获取解密用户名和解密密码；S42，根据步骤S41获取的解密用户名利用服务器端预设的映射表，反映射得到服务器端查找用户名；S43，根据服务器端查找用户名查找用户名数据库中是否存储有与服务器端查找用户名一致的用户名：若用户名数据库中存储有与服务器端查找用户名一致的用户名，则执行下一步；若用户名数据库中未存储有与服务器端查找用户名一致的用户名，则在用户名键入框键入的键入用户名错误；S44，提取服务器端查找用户名所对应的服务器端密码，对服务器端密码进行安全算法得到验证密码；其利用服务器端密码得到其验证密码的计算方法为：userpassword″′＝transmission fixed StringXORtransmission fixed String，其中，username′表示服务器端查找用户名；userpassword″表示服务器端密码；XOR表示异或运算；transmission fixed String表示字符串加密算法；userpassword″′表示验证密码；S45，判断验证密码与步骤S41中的解密密码是否一致：若验证密码与步骤S41中的解密密码一致，则验证通过；若验证密码与步骤S41中的解密密码不一致，则在密码键入框键入的键入密码错误。在本发明的一种优选实施方式中，还包括步骤S5，利用客户端对服务器端的数据进行下载。本发明还公开了一种基于商用密码算法的web应用数据加密技术实现系统，包括秘钥通讯获取模块、加密发送模块、秘钥获取模块和解密通过模块；秘钥通讯获取模块的数据输出端与加密发送模块的数据输入端相连，加密发送模块的数据输出端与秘钥获取模块的数据输入端相连，秘钥获取模块的数据输出端与解密通过模块的数据输入端相连；秘钥通讯获取模块用于服务器端获取得到SM4对称秘钥SM4_KEY，客户端获取得到通讯标识TK；加密发送模块用于客户端对获取的用户名和密码分别利用SM4对称秘钥SM4_KEY进行加密，得到其加密用户名和加密密码；客户端将其加密用户名和加密密码以及通讯标识TK发送至服务器端；秘钥获取模块用于服务器端接收到客户端发送的加密用户名和加密密码以及通讯标识TK后，根据通讯标识TK从缓存服务器端redis中获取通讯标识TK所对应的SM4对称秘钥SM4_KEY；解密通过模块用于服务器端利用步骤S3中得到的SM4对称秘钥SM4_KEY对加密用户名和加密密码进行解密，得到其解密用户名和解密密码；验证通过后，客户端登录服务器端成功。在本发明的一种优选实施方式中，在加密发送模块中包括以下步骤：S21，客户端获取用户在用户名键入框键入的键入用户名和在密码键入框键入的键入密码；S22，对获取的键入用户名和键入密码利用客户端预设的映射表，映射得到用户名和映射密码；S23，对映射密码进行安全算法得到其密码；其利用映射密码得到其密码的计算方法为：userpassword′＝transmission fixed StringXORtransmissionfixed String，其中，username表示用户名；userpassword表示映射密码；XOR表示异或运算；transmission fixed String表示字符串加密算法；userpassword′表示密码。在本发明的一种优选实施方式中，在秘钥通讯获取模块中包括以下步骤：S11，客户端向服务器端发送获取SM2公钥请求，在服务器端上存放有SM2公钥SM2_PUBKEY和SM2私钥SM2_PRIKEY对；S12，服务器端接收到客户端发送的SM2公钥请求后，将SM2公钥SM2_PUBKEY以明文形式返回给客户端；S13，客户端接收到服务器端发送的SM2公钥SM2_PUBKEY后，生成一个SM4对称秘钥SM4_KEY；S14，使用SM2公钥SM2_PUBKEY对SM4对称秘钥SM4_KEY做SM2加密得到密文ENSM4K，并发送密文ENSM4K给服务器端；S15，服务器端接收到客户端发送的密文ENSM4K后，用SM2私钥SM2_PRIKEY对接收到的密文ENSM4K进行解密，解密后得到SM4对称秘钥SM4_KEY，同时生成一个通讯标识TK；S16，将通讯标识TK与SM4对称秘钥SM4_KEY建立关联形成KV键值对存储在缓存服务器端redis中；用SM4对称秘钥SM4_KEY对通讯标识TK进行SM4对称加密，得到加密标识ENTK，返回给客户端；S17，客户端用SM4对称秘钥SM4_KEY对接收到的加密标识ENTK进行SM4对称解密得到通讯标识TK。综上所述，由于采用了上述技术方案，本发明能够实现登录安全，增强系统防护能力。本发明的附加方面和优点将在下面的描述中部分给出，部分将从下面的描述中变得明显，或通过本发明的实践了解到。附图说明本发明的上述和/或附加的方面和优点从结合下面附图对实施例的描述中将变得明显和容易理解，其中：图1是本发明流程示意框图。具体实施方式下面详细描述本发明的实施例，所述实施例的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施例是示例性的，仅用于解释本发明，而不能理解为对本发明的限制。本发明提供了一种基于商用密码算法的web应用数据加密技术实现方法，如图1所示，包括以下步骤：S1，服务器端获取得到SM4对称秘钥SM4_KEY，客户端获取得到通讯标识TK；S2，客户端对获取的用户名和密码分别利用SM4对称秘钥SM4_KEY进行加密，得到其加密用户名和加密密码；客户端将其加密用户名和加密密码以及通讯标识TK发送至服务器；S3，服务器端接收到客户端发送的加密用户名和加密密码以及通讯标识TK后，根据通讯标识TK从缓存服务器端redis中获取通讯标识TK所对应的SM4对称秘钥SM4_KEY；S4，服务器端利用步骤S3中得到的SM4对称秘钥SM4_KEY对加密用户名和加密密码进行解密，得到其解密用户名和解密密码；验证通过后，客户端登录服务器端成功；S5，利用客户端对服务器端的数据进行操作。在本发明的一种优选实施方式中，在步骤S2中包括以下步骤：S21，客户端获取用户在用户名键入框键入的键入用户名和在密码键入框键入的键入密码；S22，对获取的键入用户名和键入密码利用客户端预设的映射表，映射得到用户名和映射密码；S23，对映射密码进行安全算法得到其密码；其利用映射密码得到其密码的计算方法为：userpassword′＝transmission fixed StringXORtransmissionfixed String，其中，username表示用户名；userpassword表示映射密码；XOR表示异或运算；transmission fixed String表示字符串加密算法；userpassword′表示密码。在本发明的一种优选实施方式中，在步骤S1中包括以下步骤：S11，客户端向服务器端发送获取SM2公钥请求，在服务器端上存放有SM2公钥SM2_PUBKEY和SM2私钥SM2_PRIKEY对；S12，服务器端接收到客户端发送的SM2公钥请求后，将SM2公钥SM2_PUBKEY以明文形式返回给客户端；S13，客户端接收到服务器端发送的SM2公钥SM2_PUBKEY后，生成一个SM4对称秘钥SM4_KEY；S14，使用SM2公钥SM2_PUBKEY对SM4对称秘钥SM4_KEY做SM2加密得到密文ENSM4K，并发送密文ENSM4K给服务器端；S15，服务器端接收到客户端发送的密文ENSM4K后，用SM2私钥SM2_PRIKEY对接收到的密文ENSM4K进行解密，解密后得到SM4对称秘钥SM4_KEY，同时生成一个通讯标识TK；S16，将通讯标识TK与SM4对称秘钥SM4_KEY建立关联形成KV键值对存储在缓存服务器端redis中；用SM4对称秘钥SM4_KEY对通讯标识TK进行SM4对称加密，得到加密标识ENTK，返回给客户端；S17，客户端用SM4对称秘钥SM4_KEY对接收到的加密标识ENTK进行SM4对称解密得到通讯标识TK。SM4对称秘钥SM4_KEY具有时效性，可以是一小时、一天、一个月等，过期后更新SM4对称秘钥SM4_KEY，为了更加安全，服务器端也可以同时更新SM2公钥SM2_PUBKEY和SM2私钥SM2_PRIKEY对。在本发明的一种优选实施方式中，在步骤S15中通讯标识TK的生成方法包括以下步骤：S151，获取SM2私钥SM2_PRIKEY所对应的SM2公钥SM2_PUBKE；S152，获取解密得到的SM4对称秘钥SM4_KEY；S153，将步骤S151中的SM2公钥SM2_PUBKE和步骤S152中的SM4对称秘钥SM4_KEY连接起来，得到字符连接串，其字符连接串的计算方法为：C＝A-B，其中，A表示步骤S151中的SM2公钥SM2_PUBKE；-表示连接符；B表示步骤S152中的SM4对称秘钥SM4_KEY；C表示字符连接串；S154，根据步骤S153中得到的字符连接串计算其通讯标识TK，其通讯标识TK的计算方法为：C′＝transmission fixed String，其中，transmission fixed String表示字符串加密算法，优选采用MD5或SHA1；C表示字符连接串；C′表示通讯标识TK。在本发明的一种优选实施方式中，在步骤S17中判断解密得到的通讯标识TK是否正确的方法包括以下步骤：S171，获取SM2公钥SM2_PUBKE；S172，获取SM4对称秘钥SM4_KEY；S173，将步骤S171中的SM2公钥SM2_PUBKE和步骤S172中的SM4对称秘钥SM4_KEY连接起来，得到字符判断连接串，其字符判断连接串的计算方法为：C″＝A′-B′，其中，A′表示步骤S171中的SM2公钥SM2_PUBKE；-表示连接符；B′表示步骤S172中的SM4对称秘钥SM4_KEY；C″表示字符判断连接串；S174，根据步骤S173中得到的字符判断连接串计算其判断码，其判断码的计算方法为：C″′＝transmission fixed String，其中，transmission fixed String表示字符串加密算法，优选采用MD5或SHA1；C″表示字符判断连接串；C″′表示判断码；S175，判断判断码C″′与通讯标识TKC′是否一致：若判断码C″′与通讯标识TKC′一致，则解密得到的通讯标识TK正确；若判断码C″′与通讯标识TKC′不一致，则解密得到的通讯标识TK错误；返回步骤S11；服务器端更新SM2公钥SM2_PUBKEY和SM2私钥SM2_PRIKEY对。在本发明的一种优选实施方式中，在步骤S4中包括以下步骤：S41，服务器端获取解密用户名和解密密码；S42，根据步骤S41获取的解密用户名利用服务器端预设的映射表，反映射得到服务器端查找用户名；服务器端预设的映射表与客户端预设的映射表一致，其一个字符唯一的对应一个字符，映射表中的原字符为：η1、η2、η3、……、ηn，n表示原字符的总个数，η1表示第1原字符，η2表示第2原字符，η3表示第3原字符，ηn表示第n原字符，η1≠η2≠η3≠……≠ηn，其映射字符为η1′、η2′、η3′、……、ηn′，η1′表示第1原字符所对应的映射字符，η2′表示第2原字符所对应的映射字符，η3′表示第3原字符所对应的映射字符，ηn′表示第n原字符所对应的映射字符，η1′≠η2′≠η3′≠……≠ηn′，且η1≠η1′，η2≠η2′，η3≠η3′，……，ηn≠ηn′；{η1,η2,η3,……,ηn}＝{η1′,η2′,η3′,……,ηn′}可以如下表所示。表1原字符与映射字符对应关系原字符0123456789……映射字符！@#$％^&amp;*……表2原字符与映射字符对应关系原字符0123456789……映射字符1234567890……表3原字符与映射字符对应关系原字符0123456789……映射字符1237549860……表4原字符与映射字符对应关系原字符0123456789……映射字符1@Aa％oE*cq……上表1～4未将所有原字符列举出来，也没有列举完原字符所对应的映射字符。其反映射为映射字符映射到原字符的过程。S43，根据服务器端查找用户名查找用户名数据库中是否存储有与服务器端查找用户名一致的用户名：若用户名数据库中存储有与服务器端查找用户名一致的用户名，则执行下一步；若用户名数据库中未存储有与服务器端查找用户名一致的用户名，则在用户名键入框键入的键入用户名错误；S44，提取服务器端查找用户名所对应的服务器端密码，对服务器端密码进行安全算法得到验证密码；其利用服务器端密码得到其验证密码的计算方法为：userpassword″′＝transmission fixed StringXORtransmission fixed String，其中，username′表示服务器端查找用户名；userpassword″表示服务器端密码；XOR表示异或运算；transmission fixed String表示字符串加密算法；userpassword″′表示验证密码；S45，判断验证密码与步骤S41中的解密密码是否一致：若验证密码与步骤S41中的解密密码一致，则验证通过；若验证密码与步骤S41中的解密密码不一致，则在密码键入框键入的键入密码错误。在注册时，在密码键入框键入的键入密码的所有密码长度必须满足8位以上，并且强制包含大小写与特殊符号，增加破解难度；具体执行以下步骤：第一步，客户端获取用户在注册用户名键入框键入的注册键入用户名和在注册密码键入框键入的注册键入密码；第二步，对获取的注册键入用户名和注册键入密码利用客户端预设的映射表，映射得到注册用户名和注册密码；第三步，客户端对获取的注册用户名和注册密码分别利用SM4对称秘钥SM4_KEY进行加密，得到其注册加密用户名和注册加密密码；客户端将其注册加密用户名和注册加密密码以及通讯标识TK发送至服务器端；第四步，服务器端接收到客户端发送的注册加密用户名和注册加密密码以及通讯标识TK后，根据通讯标识TK从缓存服务器端redis中获取通讯标识TK所对应的SM4对称秘钥SM4_KEY；第五步，服务器端利用第四步的SM4对称秘钥SM4_KEY对注册加密用户名和注册加密密码进行解密，得到其注册解密用户名和注册解密密码；第六步，利用服务器端预设的映射表对注册解密用户名，反映射得到服务器端注册用户名，将服务器端注册用户名与其第五步中的注册解密密码建立关联构成用户名密码对存储于用户名数据库中。另一种注册安全的方式：第一步，客户端获取用户在注册用户名键入框键入的注册键入用户名；第二步，对获取的注册键入用户名利用客户端预设的映射表，映射得到注册用户名；第三步，客户端对获取的注册用户名利用SM4对称秘钥SM4_KEY进行加密，得到其注册加密用户名；客户端将其注册加密用户名和通讯标识TK发送至服务器端；第四步，服务器端接收到客户端发送的注册加密用户名和通讯标识TK后，根据通讯标识TK从缓存服务器端redis中获取通讯标识TK所对应的SM4对称秘钥SM4_KEY；第五步，服务器端利用第四步的SM4对称秘钥SM4_KEY对注册加密用户名进行解密，得到其注册解密用户名；第六步，利用服务器端预设的映射表对注册解密用户名，反映射得到服务器端注册用户名；第七步，判断服务器端注册用户名是否存在于用户名数据库中：若服务器端注册用户名不存在于用户名数据库中，执行下一步；若服务器端注册用户名存在于用户名数据库中，则提示在注册用户名键入框键入的注册键入用户名已存在，请重新键入新的注册键入用户名；第八步，服务器端随机生成注册密码，该注册密码长度必须满足8位以上，并且强制包含大小写与特殊符号；对注册密码利用服务器端预设的映射表，映射得到映射安全密码，将服务器端注册用户名和本步中的映射安全密码建立关联构成用户名密码对存储于用户名数据库中；第九步，将注册密码利用SM4对称秘钥SM4_KEY进行加密，得到其注册加密密码；将得到的注册加密密码发送至客户端；第十步，客户端接收到服务器端发送的注册加密密码后，对接收到的注册加密密码利用SM4对称秘钥SM4_KEY进行解密，得到注册解密密码；第十一步，对注册解密密码利用客户端预设的映射表，反映射得到安全注册密码，将安全注册密码展现在注册网页上。通过只需在注册用户名键入框中键入注册键入用户名，最后会在客户端上展现登录时所需的密码，保证了密码的安全，增强体验。在本发明的一种优选实施方式中，还包括步骤S5，利用客户端对服务器端的数据进行下载。在本发明的一种优选实施方式中，利用客户端对服务器端的数据进行下载的方法包括以下步骤：S51，服务器端获取待下载的不动产登记存储业务数据，将获取的待下载的不动产登记存储业务数据作为待下载数据文件；S52，对待下载数据文件进行压缩得到待下载压缩数据文件，其压缩的方式为zip、rar、7z之一，服务器端根据待下载压缩数据文件获取待下载压缩数据文件的文件数据信息，文件数据信息包括待下载压缩数据文件的大小、待下载压缩数据文件的名称、待下载压缩数据文件的哈希值之一或者任意组合；S53，服务器端将文件数据信息发送至客户端，客户端接收到服务器端发送的文件数据信息后，客户端利用接收到的文件数据信息，在客户端查询是否存在一致的文件；其判断接收到的文件数据信息是否在存在于客户端的方法为以下之一或者任意组合查询：查询一：在客户端查询是否存在与待下载压缩数据文件的大小一致的文件；查询二：在客户端查询是否存在与待下载压缩数据文件的名称一致的文件；查询三：在客户端查询是否存在与待下载压缩数据文件的哈希值一致的文件；若符合，则客户端向其服务器端发送停止下载控制命令，服务器端接收到客户端发送的停止下载命令控制命令后，服务器端执行下一个待下载数据文件，返回步骤S51；若不符合，则客户端向服务器端发送开始分块控制命令，服务器端接收到客户端发送的开始分块控制命令后，对待下载数据文件进行数据分块，得到D块分块数据，所述D为大于或者等于2的正整数，分别为第1分块数据、第2分块数据、第3分块数据、……、第D分块数据，将其分块总数D发送到客户端；S54，服务器端向其客户端发送当前哈希值下的当前分块数据；在发送过程中若出现信息发送中断，则返回步骤S54；S55，客户端接收当前分块数据并储存在相应的哈希值下，实时更新已接收到且储存在客户端内的当前哈希值下的所有分块数据，统计并更新已接收分块数据的块数；若出现信息更新中断，则返回步骤S54；S56，客户端向服务器端发送已接收分块数据的块数，请求服务器端判断已下载分块数据的块数是否等于分块总数：若已下载分块数据的块数等于分块总数，则执行下一步；若出现信息传输中断，则返回步骤S54；若已下载分块数据的块数小于分块总数，则服务器端将下一个待下载的分块数据更新为当前分块数据，执行步骤S54；若出现信息更新中断，则直接执行步骤S54；S57，服务器端下载完成，并将下载完成的消息发送至客户端；客户端接收到下载完成的消息后，合并所接收的当前哈希值下的所有分块数据，获得合并数据，对合并数据进行解压缩，得到解压缩文件数据，此时完成下载任务。防止由于网络的不稳定或者浏览器的刷新或者异常关闭，导致下载失败，失败之后从头开始下载，提升传输效率，增强用户体验。本发明还公开了一种基于商用密码算法的web应用数据加密技术实现系统，包括秘钥通讯获取模块、加密发送模块、秘钥获取模块和解密通过模块；秘钥通讯获取模块的数据输出端与加密发送模块的数据输入端相连，加密发送模块的数据输出端与秘钥获取模块的数据输入端相连，秘钥获取模块的数据输出端与解密通过模块的数据输入端相连；秘钥通讯获取模块用于服务器端获取得到SM4对称秘钥SM4_KEY，客户端获取得到通讯标识TK；加密发送模块用于客户端对获取的用户名和密码分别利用SM4对称秘钥SM4_KEY进行加密，得到其加密用户名和加密密码；客户端将其加密用户名和加密密码以及通讯标识TK发送至服务器端；秘钥获取模块用于服务器端接收到客户端发送的加密用户名和加密密码以及通讯标识TK后，根据通讯标识TK从缓存服务器端redis中获取通讯标识TK所对应的SM4对称秘钥SM4_KEY；解密通过模块用于服务器端利用步骤S3中得到的SM4对称秘钥SM4_KEY对加密用户名和加密密码进行解密，得到其解密用户名和解密密码；验证通过后，客户端登录服务器端成功。在本发明的一种优选实施方式中，在加密发送模块中包括以下步骤：S21，客户端获取用户在用户名键入框键入的键入用户名和在密码键入框键入的键入密码；S22，对获取的键入用户名和键入密码利用客户端预设的映射表，映射得到用户名和映射密码；S23，对映射密码进行安全算法得到其密码；其利用映射密码得到其密码的计算方法为：userpassword′＝transmission fixed StringXORtransmissionfixed String，其中，username表示用户名；userpassword表示映射密码；XOR表示异或运算；transmission fixed String表示字符串加密算法；userpassword′表示密码。在本发明的一种优选实施方式中，在秘钥通讯获取模块中包括以下步骤：S11，客户端向服务器端发送获取SM2公钥请求，在服务器端上存放有SM2公钥SM2_PUBKEY和SM2私钥SM2_PRIKEY对；S12，服务器端接收到客户端发送的SM2公钥请求后，将SM2公钥SM2_PUBKEY以明文形式返回给客户端；S13，客户端接收到服务器端发送的SM2公钥SM2_PUBKEY后，生成一个SM4对称秘钥SM4_KEY；S14，使用SM2公钥SM2_PUBKEY对SM4对称秘钥SM4_KEY做SM2加密得到密文ENSM4K，并发送密文ENSM4K给服务器端；S15，服务器端接收到客户端发送的密文ENSM4K后，用SM2私钥SM2_PRIKEY对接收到的密文ENSM4K进行解密，解密后得到SM4对称秘钥SM4_KEY，同时生成一个通讯标识TK；S16，将通讯标识TK与SM4对称秘钥SM4_KEY建立关联形成KV键值对存储在缓存服务器端redis中；用SM4对称秘钥SM4_KEY对通讯标识TK进行SM4对称加密，得到加密标识ENTK，返回给客户端；S17，客户端用SM4对称秘钥SM4_KEY对接收到的加密标识ENTK进行SM4对称解密得到通讯标识TK。尽管已经示出和描述了本发明的实施例，本领域的普通技术人员可以理解：在不脱离本发明的原理和宗旨的情况下可以对这些实施例进行多种变化、修改、替换和变型，本发明的范围由权利要求及其等同物限定。
