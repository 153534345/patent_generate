标题title
一种混合井下信号编码与解码方法
摘要abst
本发明提供一种混合井下信号编码与解码方法，包括：井下发射器在调制后的采集信号前端加上信号同步头，并将采集信号以电磁波的方式发送至地面接收器；地面接收器计算采集信号与每一种类型同步头的预设码值的互相关系数，基于互相关系数与对应类型的门限系数值之间的大小关系，判断采集信号是否为同步头；若是同步头，则根据同步头的类型和系统设置参数确定对应的解调方式；基于解调方式对所述采集信号进行解调。本发明通过在信息前部加上同步头来区别信号类型，通过在地面接收器设立同步头检测区并计算互相关系数来识别同步头类型并定位信号，根据同步头类型选择相应的解调方式类对采集信号进行解调，兼顾信号的实时性与高精度。
权利要求书clms
1.一种混合井下信号编码与解码方法，其特征在于，包括：井下发射器在调制后的采集信号前端加上信号同步头，并将所述采集信号以电磁波的方式发送至地面接收器；地面接收器计算所述采集信号与每一种类型同步头的预设码值的互相关系数，基于所述互相关系数与对应类型的门限系数值之间的大小关系，判断当前在识别区内的所述采集信号是否为同步头；若是同步头，则根据同步头的类型和系统设置参数确定对应的解调方式；基于所述解调方式对所述采集信号进行解调。2.根据权利要求1所述的混合井下信号编码与解码方法，其特征在于，所述井下发射器在调制后的采集信号前端加上信号同步头，包括：根据采集信号的类型，井下发射器在所述采集信号前端加上对应的信号同步头，所述信号同步头中包括与采集信号类型对应的编码值，所述采集信号的类型为紧急类型或非紧急类型，所述紧急类型的信号同步头的长度小于所述非紧急类型的信号同步头的长度。3.根据权利要求1或2所述的混合井下信号编码与解码方法，其特征在于，所述地面接收器计算所述采集信号与每一种类型同步头的预设码值的互相关系数，基于所述互相关系数与对应类型的门限系数值之间的大小关系，判断当前在识别区内的所述采集信号是否为同步头，包括：所述地面接收器计算所述采集信号与紧急类型同步头的预设码值之间的第一互相关系数以及所述采集信号与非紧急类型同步头的预设码值之间的第二互相关系数；当所述第一互相关系数小于紧急门限系数值时，所述采集信号不是同步头；或者，当所述第二互相关系数小于非紧急门限系数值时，所述采集信号不是同步头；当所述第一互相关系数大于紧急门限系数值时，所述采集信号为同步头，且所述采集信号的类型为紧急类型；或者，当所述第二互相关系数大于非紧急门限系数值时，所述采集信号为同步头，且所述采集信号的类型为非紧急类型。4.根据权利要求3所述的混合井下信号编码与解码方法，其特征在于，所述地面接收器中包括信号缓存区，所述信号缓存区包括第一次同步头检测区和第二次同步头检测区，所述信号缓存区的长度满足以下条件：当采集信号的信号同步头进入第二次同步头检测区后，采集信号整体应已经全部进入信号缓存区。5.根据权利要求4所述的混合井下信号编码与解码方法，其特征在于，所述地面接收器计算所述采集信号与每一种类型同步头的预设码值的互相关系数，基于所述互相关系数与对应类型的门限系数值之间的大小关系，判断当前在识别区内的所述采集信号是否为同步头，包括：当地面接收器的信号缓存区的第一次同步头检测区接收到采集信号之后，判断所述采集信号是否为同步头，如果不为同步头，则等待检测下一段采集信号；如果判断所述采集信号为紧急类型信号，则基于实时解调方式对所述采集信号进行实时解调；如果判断所述采集信号为非紧急类型信号，则进入第二次同步头检测区进行检测，当第二次同步头检测区再次检测到所述采集信号为非紧急类型信号时，则基于延时解调方式对所述采集信号进行解调。6.根据权利要求1所述的混合井下信号编码与解码方法，其特征在于，所述采集信号与每一种类型同步头的预设码值的互相关系数的计算公式为：；；；；其中为采集信号，为每一种类型同步头的预设码值，N为采集信号长度，的取值范围为0~1。7.根据权利要求3所述的混合井下信号编码与解码方法，其特征在于，通过如下方式计算得到所述紧急门限系数值和所述非紧急门限系数值：井下发射器向地面接收器发送已知校正编码，地面接收器计算接收到的校正编码与原始已知校正编码之间的第三互相关系数；根据所述第三互相关系数，确定所述紧急门限系数值和所述非紧急门限系数值，其中，所述紧急门限系数值小于所述非紧急门限系数值。8.根据权利要求1或5所述的混合井下信号编码与解码方法，其特征在于，所述根据同步头的类型和系统设置参数确定对应的解调方式，包括：若所述同步头的类型为紧急类型，确定所述解调方式为实时解调方式：采用巴特沃斯或契比雪夫低通滤波进行实时滤波可得到实时采集信号；若所述同步头的类型为非紧急类型，确定所述解调方式为延时解调方式：等待信号采集结束，使用理想低通滤波器得到高精度延时信号；若系统设置为混合滤波解调方式时，先使用巴特沃斯或契比雪夫滤波器得到实时采集信号，待实时采集信号接收完毕之后再使用理想低通滤波器得到高精度信号代替之前得到的实时采集信号。9.根据权利要求7所述的混合井下信号编码与解码方法，其特征在于，还包括：地面接收器根据接收到的校正编码计算出此时地层阻抗网络的相频相应和幅频响应；相应的，基于所述解调方式对所述采集信号进行解调，包括：基于所述解调方式对所述采集信号进行相位补偿和幅值补偿。
说明书desc
技术领域本发明涉及通信领域，更具体地，涉及一种混合井下信号编码与解码方法。背景技术目前我国石油领域智能化程度逐渐提高，大量井下装备由传统的有线通信模式转向无线通信模式。目前主流的井下无线通信方式共有三种，其中电磁波通信近些年发展较快，多家公司都基于电磁波开发了井下通信系统。然而电磁波从井下传到地面上，途中需要穿过数千米的地层，受到地层中的噪声与复杂混联阻抗网络影响，往往导致信号传到地面时失真极为严重，必须经过滤波处理之后才能解码出其中内容，且阻抗网络结构复杂，其传递函数与油井结构、土壤电阻率等多种因素有关，加大了信号滤波的难度，传统的滤波方式无法适用于井下的复杂状况。发明内容本发明针对现有技术中存在的技术问题，提供一种混合井下信号编码与解码方法，包括：井下发射器在调制后的采集信号前端加上信号同步头，并将所述采集信号以电磁波的方式发送至地面接收器；地面接收器计算所述采集信号与每一种类型同步头的预设码值的互相关系数，基于所述互相关系数与对应类型的门限系数值之间的大小关系，判断当前在识别区内的所述采集信号是否为同步头；若是同步头，则根据同步头的类型和系统设置参数确定对应的解调方式；基于所述解调方式对所述采集信号进行解调。在上述技术方案的基础上，本发明还可以作出如下改进。可选的，所述井下发射器在调制后的采集信号前端加上信号同步头，包括：根据采集信号的类型，井下发射器在所述采集信号前端加上对应的信号同步头，所述信号同步头中包括与采集信号类型对应的编码值，所述采集信号的类型为紧急类型或非紧急类型，所述紧急类型的信号同步头的长度小于所述非紧急类型的信号同步头的长度。可选的，所述地面接收器计算所述采集信号与每一种类型同步头的预设码值的互相关系数，基于所述互相关系数与对应类型的门限系数值之间的大小关系，判断当前在识别区内的所述采集信号是否为同步头，包括：所述地面接收器计算所述采集信号与紧急类型同步头的预设码值之间的第一互相关系数以及所述采集信号与非紧急类型同步头的预设码值之间的第二互相关系数；当所述第一互相关系数小于紧急门限系数值时，所述采集信号不是同步头；或者，当所述第二互相关系数小于非紧急门限系数值时，所述采集信号不是同步头；当所述第一互相关系数大于紧急门限系数值时，所述采集信号为同步头，且所述采集信号的类型为紧急类型；或者，当所述第二互相关系数大于非紧急门限系数值时，所述采集信号为同步头，且所述采集信号的类型为非紧急类型。可选的，所述地面接收器中包括信号缓存区，所述信号缓存区包括第一次同步头检测区和第二次同步头检测区，所述信号缓存区的长度满足以下条件：当采集信号的信号同步头进入第二次同步头检测区后，采集信号整体应已经全部进入信号缓存区。可选的，所述地面接收器计算所述采集信号与每一种类型同步头的预设码值的互相关系数，基于所述互相关系数与对应类型的门限系数值之间的大小关系，判断当前在识别区内的所述采集信号是否为同步头，包括：当地面接收器的信号缓存区的第一次同步头检测区接收到采集信号之后，判断所述采集信号是否为同步头，如果不为同步头，则等待检测下一段采集信号；如果判断所述采集信号为紧急类型信号，则基于实时解调方式对所述采集信号进行实时解调；如果判断所述采集信号为非紧急类型信号，则进入第二次同步头检测区进行检测，当第二次同步头检测区再次检测到所述采集信号为非紧急类型信号时，则基于延时解调方式对所述采集信号进行解调。可选的，所述采集信号与每一种类型同步头的预设码值的互相关系数的计算公式为：；；；；其中为采集信号，为每一种类型同步头的预设码值，N为采集信号长度，的取值范围为0~1。可选的，通过如下方式计算得到所述紧急门限系数值和所述非紧急门限系数值：井下发射器向地面接收器发送已知校正编码，地面接收器计算接收到的校正编码与原始已知校正编码之间的第三互相关系数；根据所述第三互相关系数，确定所述紧急门限系数值和所述非紧急门限系数值，其中，所述紧急门限系数值小于所述非紧急门限系数值。可选的，所述根据同步头的类型和系统设置参数确定对应的解调方式，包括：若所述同步头的类型为紧急类型，确定所述解调方式为实时解调方式：采用巴特沃斯或契比雪夫低通滤波进行实时滤波可得到实时采集信号；若所述同步头的类型为非紧急类型，确定所述解调方式为延时解调方式：等待信号采集结束，使用理想低通滤波器得到高精度延时信号；若系统设置为混合滤波解调方式时，先使用巴特沃斯或契比雪夫滤波器得到实时采集信号，待实时采集信号接收完毕之后再使用理想低通滤波器得到高精度信号代替之前得到的实时采集信号。可选的，还包括：地面接收器根据接收到的校正编码计算出此时地层阻抗网络的相频相应和幅频响应；相应的，基于所述解调方式对所述采集信号进行解调，包括：基于所述解调方式对所述采集信号进行相位补偿和幅值补偿。本发明提供的一种混合井下信号编码与解码方法，通过在信息前部加上同步头来区别信号类型，通过在地面接收器设立同步头检测区并计算互相关系数来识别同步头类型并定位信号，根据同步头类型选择相应的解调方式类对采集信号进行解调，兼顾信号的实时性与高精度。附图说明图1为本发明提供的一种混合井下信号编码与解码方法流程图；图2为信号缓存区的示意图；图3为混合井下信号编码与解码方法的整体流程示意图。具体实施方式下面结合附图和实施例，对本发明的具体实施方式作进一步详细描述。以下实施例用于说明本发明，但不用来限制本发明的范围。实施例一一种混合井下编码与解码方法，参见图1，该方法主要包括以下步骤：S1，井下发射器在调制后的采集信号前端加上信号同步头，并将所述采集信号以电磁波的方式发送至地面接收器。作为实施例，所述井下发射器在调制后的采集信号前端加上信号同步头，包括：根据采集信号的类型，井下发射器在所述采集信号前端加上对应的信号同步头，所述信号同步头中包括与采集信号类型对应的编码值，所述采集信号的类型为紧急类型或非紧急类型，所述紧急类型的信号同步头的长度小于所述非紧急类型的信号同步头的长度。可以理解的是，井下发射器可以为井下传感器，井下传感器采集到所需数据后，将其使用调频或调幅的方式进行调制，之后在调制后的采集信号前端加上信号同步头后采用电磁波的方式将信号发送至地面。其中，信号同步头中包含了能够表征采集信号类型的编码值，其中，编码值与信号类型的对应关系如下表1所示。表1 编码值与信号类型的对应关系表根据表1所示，比如，当传感器采集的信号为非紧急类型信号，则可以在同步头中设置000或001以及010等编码值，如果井下传感器采集的是气压信号，且为紧急信号，则可以在同步头中设置00编码值，在采集信号前端的同步头中设置好编码值后，将采集信号发送给地面。其中，井下发射器根据信号类型加上相应的同步头，当信号为紧急信号时，则加上紧急信号同步头，当信号为非紧急信号时则加上非紧急信号同步头。紧急信号同步头应短于非紧急信号同步头以提高紧急信号的解调速度。信号同步头长度可自定义，可以包含信息也可只用于定位信号位置而无任何含义，优选的，为了提高系统的计算效率，在保证同步头发挥其应有作用的前提下，其长度应尽量短。具体的，本实施例中，紧急信号同步头取2位，非紧急信号同步头取3位，其码值表如上述表1所示。S2，地面接收器计算所述采集信号与每一种类型同步头的预设码值的互相关系数，基于所述互相关系数与对应类型的门限系数值之间的大小关系，判断当前在识别区内的所述采集信号是否为同步头。S3，若是同步头，则根据同步头的类型和系统设置参数确定对应的解调方式。可以理解的是，地面接收器接收到采集信号后，将采集信号与不同类型的同步头预设码值进行互相关系数的计算，基于所述互相关系数与对应类型的门限系数值之间的大小关系，判断当前在识别区内的采集信号是否为同步头，以及采集信号的类型，即采集信号为紧急类型信号还是非紧急类型信号。作为实施例，采集信号与每一种类型同步头的预设码值的互相关系数的计算公式为：；；；；其中为采集信号，为每一种类型同步头的预设码值，N为采集信号长度，的取值范围为0~1。作为实施例，地面接收器计算采集信号与每一种类型同步头的预设码值的互相关系数，基于互相关系数与对应类型的门限系数值之间的大小关系，判断当前在识别区内的所述采集信号是否为同步头，包括：地面接收器计算所述采集信号与紧急类型同步头的预设码值之间的第一互相关系数以及所述采集信号与非紧急类型同步头的预设码值之间的第二互相关系数；当第一互相关系数小于紧急门限系数值时，采集信号不是同步头；或者，当所述第二互相关系数小于非紧急门限系数值时，所述采集信号不是同步头；当第一互相关系数大于紧急门限系数值时，采集信号为同步头，且采集信号的类型为紧急类型；或者，当第二互相关系数大于非紧急门限系数值时，采集信号为同步头，且采集信号的类型为非紧急类型。可理解的是，根据上表表1可知，信号主要分别两种类型，紧急类型和非紧急类型，根据上表1，紧急类型的同步头预设码值有四个，非紧急类型的同步头预设码值也有四个。那么，地面接收器将采集信号和紧急类型对应的每一个预设码值计算互相关系数，计算得到四个第一互相关系数，比较每一个第一互相关系数与紧急门限系数值之间的大小关系，如果四个第一互相关系数均小于紧急门限系数值，那么该采集信号不是同步头，需要检测下一段信号；如果其中有一个第一互相关系数大于紧急门限系数值，则采集信号为同步头，并且该采集信号类型为紧急类型。同样的，地面接收器将采集信号和非紧急类型对应的每一个预设码值计算互相关系数，计算得到四个第二互相关系数，比较每一个第二互相关系数与非紧急门限系数值之间的大小关系，如果四个第二互相关系数均小于非紧急门限系数值，那么该采集信号不是同步头，需要检测下一段信号；如果其中有一个第二互相关系数大于非紧急门限系数值，则采集信号为同步头，并且该采集信号类型为非紧急类型。其中，通过如下方式计算得到所述紧急门限系数值和所述非紧急门限系数值：井下发射器向地面接收器发送已知校正编码，地面接收器计算接收到的校正编码与原始已知校正编码之间的第三互相关系数；根据所述第三互相关系数，确定所述紧急门限系数值和所述非紧急门限系数值，其中，所述紧急门限系数值小于所述非紧急门限系数值。可以理解是，门限系数值应由校正编码的接收结果计算得到，信号的衰减程度与油井结构与土壤电阻率有关，且信号在传输过程中会发生相位变化与幅值变化。井下发射器在传输信号之前会发射一段已知的校正编码，地面接收器接收到编码后会计算出接收到的编码与原始发射的校正编码的互相关系数从而计算出本次使用的门限系数，包括紧急门限系数值和非紧急门限系数值，具体的，在本实施例中，紧急门限系数值取0.7，非紧急门限系数值取0.9。其中，作为实施例，地面接收器中包括信号缓存区，信号缓存区包括第一次同步头检测区和第二次同步头检测区，信号缓存区的长度满足以下条件：当采集信号的信号同步头进入第二次同步头检测区后，采集信号整体应已经全部进入信号缓存区。优选的，信号缓存区长度应在满足上述条件的情况下留出裕度，以防止信号截断而造成的数据丢失。可以理解的是，地面接收器接收到采集信号后，将采集信号存放入信号缓存区，由信号缓存区的同步头检测区对采集信号进行检测。作为实施例，地面接收器计算采集信号与每一种类型同步头的预设码值的互相关系数，基于所述互相关系数与对应类型的门限系数值之间的大小关系，判断当前在识别区内的所述采集信号是否为同步头，包括：当地面接收器的信号缓存区的第一次同步头检测区接收到采集信号之后，判断所述采集信号是否为同步头，如果不为同步头，则等待检测下一段采集信号；如果判断所述采集信号为紧急类型信号，则基于实时解调方式对所述采集信号进行实时解调；如果判断所述采集信号为非紧急类型信号，则进入第二次同步头检测区进行检测，当第二次同步头检测区再次检测到所述采集信号为非紧急类型信号时，则基于延时解调方式对所述采集信号进行解调。可以理解的是，地面接收器的信号缓存区包括第一次同步头检测区和第二次同步头检测区，对接收到的采集信号进行二次同步头检测。具体的，当第一次同步头检测区检测到采集信号不为同步头，则等待下一段信号的检测；如果第一次同步头检测区检测到采集信号为紧急类型信号，则立即采用实时解调方式对采集信号进行解调；如果第一次同步头检测区检测到采集信号为非紧急类型信号，那么等待一段时间，进行第二次同步头检测，如果再次检测到采集信号依然为非紧急类型信号时，才采用延时解调方式对采集信号进行解调。S4，基于所述解调方式对所述采集信号进行解调。作为实施例，根据同步头的类型和系统设置参数确定对应的解调方式，包括：若同步头的类型为紧急类型，确定所述解调方式为实时解调方式：采用巴特沃斯或契比雪夫低通滤波进行实时滤波可得到实时采集信号；若同步头的类型为非紧急类型，确定所述解调方式为延时解调方式：等待信号采集结束，使用理想低通滤波器得到高精度延时信号；若系统设置为混合滤波解调方式时，先使用巴特沃斯或契比雪夫滤波器得到实时采集信号，待实时采集信号接收完毕之后再使用理想低通滤波器得到高精度信号代替之前得到的实时采集信号。可以理解的是，检测出采集信号为紧急信号还是非紧急信号，如果为紧急信号，则采用实时解调方式进行解调；如果为非紧急信号，则采用延时解调方式进行解调。但是如果系统设置为混合滤波，那么无论采集信号为紧急信号还是非紧急信号，都按照系统设置的滤波解调方式进行解调。需要说明的是，地面接收器根据接收到的校正编码计算出此时地层阻抗网络的相频相应和幅频响应；在后续解调的过程中，对采集信号进行相位补偿和幅值补偿。实施例二一种混合井下信号编码与解码方法，参见图3，该方法的主要过程包括：井下发射器向地面接收器发送包含信号同步头的采集信号，地面接收器接收到采集信号后，计算采集信号与每一种类型的同步头预设码值之间的互相关系数，根据互相关系数与门限系数值的大小关系确定采集信号是否为同步头，以及采集信号的类型。根据采集信号的类型，采用相应的信号解调方式对采集信号进行解调。本发明提供的一种混合井下信号编码与解码方法，通过校正编码确定地层阻抗网络的衰减幅度并以此为依据确定信号的门限系数，通过比照接收到的校正编码与原编码计算出地层阻抗网络的幅频响应与相频响应并对之后接收到的信号进行幅度补偿与相位补偿。通过在信息前部加上同步头来区别信号类型，通过在地面接收器设立同步头检测区并计算互相关系数来识别同步头并定位信号，最后通过设立缓存区来兼顾信号的实时性与高精度。需要说明的是，在上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详细描述的部分，可以参见其它实施例的相关描述。尽管已描述了本发明的优选实施例，但本领域内的技术人员一旦得知了基本创造概念，则可对这些实施例作出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本发明范围的所有变更和修改。显然，本领域的技术人员可以对本发明进行各种改动和变型而不脱离本发明的精神和范围。这样，倘若本发明的这些修改和变型属于本发明权利要求及其等同技术的范围之内，则本发明也意图包括这些改动和变型在内。
