标题title
广域网下的终端实时管控方法及管控服务端
摘要abst
本发明公开了广域网下的终端实时管控方法及管控服务端，在广域网下与被管控终端建立单向通信连接，接收被管控终端发送的通信请求；若通信请求为IPV6通信请求，则获取并存储IPV6通信请求中的IPV6地址；当要向被管控终端发送管控指令时，通过IPV6地址将管控指令发送至被管控终端。本发明通过IPV6地址将管控指令发送至被管控终端，让终端进行实时响应；同时，由于是管控服务端主动发起控制，可以减少被管控终端对管控服务端进行轮询所造成服务性能的资源浪费，而且IPV6地址庞大，管控服务端可以管理更多的终端，从而在广域网下，能同时满足减少资源浪费和实现终端实时管控的需求。
权利要求书clms
1.广域网下的终端实时管控方法，其特征在于，包括步骤：在广域网下与被管控终端建立单向通信连接，接收被管控终端发送的通信请求；若所述通信请求为IPV6通信请求，则获取并存储所述IPV6通信请求中的IPV6地址；当要向被管控终端发送管控指令时，通过所述IPV6地址将所述管控指令发送至被管控终端。2.根据权利要求1所述的广域网下的终端实时管控方法，其特征在于，所述接收被管控终端发送的通信请求具体为接收被管控终端通过IPV4地址发送的通信请求。3.根据权利要求1所述的广域网下的终端实时管控方法，其特征在于，在判断出所述通信请求所对应的通信方式后，记录所述被管控终端所支持的通信方式。4.根据权利要求3所述的广域网下的终端实时管控方法，其特征在于，存储所述IPV6地址具体为：将IPV6地址与终端标识进行绑定之后加入一通信地址表；当要向被管控终端发送管控指令时，先查询被管控终端所支持的通信方式，若所述通信方式为IPV6通信，则查询所述通信地址表以获取被管控终端的IPV6地址，之后通过所述IPV6地址将所述管控指令发送至被管控终端。5.根据权利要求4所述的广域网下的终端实时管控方法，其特征在于，还包括：接收被管控终端主动上报的新IPV6地址，并更新所述通信地址表；和/或下发地址更新指令至被管控终端，若接收到被管控终端返回的新IPV6地址，则更新所述通信地址表。6.根据权利要求5所述的广域网下的终端实时管控方法，其特征在于，还包括：轮询所述通信地址表内的所有IPV6地址，若某一IPV6地址所对应的被管控终端未返回响应信息，则停止对该被管控终端下发管控指令。7.根据权利要求1所述的广域网下的终端实时管控方法，其特征在于，所述通过所述IPV6地址将所述管控指令发送至被管控终端具体为：将所述管控指令转换成IPV6协议之后通过所述IPV6地址发送至被管控终端。8.根据权利要求1至7任一所述的广域网下的终端实时管控方法，其特征在于，若所述通信请求为长连接请求，则与被管控终端建立长连接通信链路之后，基于所述长连接通信链路下发管控指令至被管控终端。9.根据权利要求1至7任一所述的广域网下的终端实时管控方法，其特征在于，若所述通信请求为消息通信请求，则接收并存储所述消息通信请求中的唯一消息ID；当要向被管控终端发送管控指令时，先查询被管控终端所支持的通信方式，若所述通信方式为消息通信时，则查询获得被管控终端的唯一消息ID，按照所述唯一消息ID封装所述管控指令为消息指令后发布到消息队列，以使得被管控终端订阅消息队列之后根据所述唯一消息ID获取并执行消息指令。10.管控服务端，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现上述权利要求1至9任一所述的广域网下的终端实时管控方法中的步骤。
说明书desc
技术领域本发明涉及通信技术领域，特别涉及一种广域网下的终端实时管控方法及管控服务端。背景技术对于终端设备的管理目前主要分为局域网管理和广域网管理，在局域网管理的情况下由于管理服务器和终端在同一个网络环境下，所以可以做到终端和管理服务器进行实时通信，而随着目前越来越多的公司将终端放在广域网中，管理服务器在在管理广域网的终端时，通常使用以下两种使用方式：、在广域网环境下，当采用主动轮询方案时，终端每次轮询将会有一个时间差，这将导致管理服务器的指令无法实时到达终端；、当采用长连接方案时终端与管理服务器需保持实时连接通道，这将大量损耗服务器和带宽资源。发明内容本发明所要解决的技术问题是：提供一种广域网下的终端实时管控方法及管控服务端，以在广域网下，能同时满足减少资源浪费和实现终端实时管控的需求。为了解决上述技术问题，本发明采用的技术方案为：广域网下的终端实时管控方法，包括步骤：在广域网下与被管控终端建立单向通信连接，接收被管控终端发送的通信请求；若所述通信请求为IPV6通信请求，则获取并存储所述IPV6通信请求中的IPV6地址；当要向被管控终端发送管控指令时，通过所述IPV6地址将所述管控指令发送至被管控终端。为了解决上述技术问题，本发明采用的另一种技术方案为：管控服务端，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述的广域网下的终端实时管控方法中的步骤。本发明的有益效果在于：广域网下的终端实时管控方法及管控服务端，在广域网下，被管控终端支持IPV6通信时，获取被管控终端的IPV6地址并进行存储，使得管控服务端要向被管控终端发送管控指令时，通过IPV6地址将管控指令发送至被管控终端，让终端进行实时响应；同时，由于是管控服务端主动发起控制，可以减少被管控终端对管控服务端进行轮询所造成服务性能的资源浪费，而且IPV6地址庞大，管控服务端可以管理更多的终端，从而在广域网下，能同时满足减少资源浪费和实现终端实时管控的需求。附图说明图1为本发明实施例的广域网下的终端实时管控方法的主要流程示意图；图2为本发明实施例涉及的被管控终端的具体流程示意图；图3为本发明实施例的广域网下的终端实时管控方法的具体数据流向示意图；图4为本发明实施例的管控服务端的结构示意图。标号说明：1、管控服务端；2、处理器；3、存储器。具体实施方式为详细说明本发明的技术内容、所实现目的及效果，以下结合实施方式并配合附图予以说明。请参照图1至图3，广域网下的终端实时管控方法，包括步骤：在广域网下与被管控终端建立单向通信连接，接收被管控终端发送的通信请求；若所述通信请求为IPV6通信请求，则获取并存储所述IPV6通信请求中的IPV6地址；当要向被管控终端发送管控指令时，通过所述IPV6地址将所述管控指令发送至被管控终端。从上述描述可知，本发明的有益效果在于：在广域网下，被管控终端支持IPV6通信时，获取被管控终端的IPV6地址并进行存储，使得管控服务端要向被管控终端发送管控指令时，通过IPV6地址将管控指令发送至被管控终端，让终端进行实时响应；同时，由于是管控服务端主动发起控制，可以减少被管控终端对管控服务端进行轮询所造成服务性能的资源浪费，而且IPV6地址庞大，管控服务端可以管理更多的终端，从而在广域网下，能同时满足减少资源浪费和实现终端实时管控的需求。进一步地，所述接收被管控终端发送的通信请求具体为接收被管控终端通过IPV4地址发送的通信请求。从上述描述可知，同时支持IPV4地址与IPV6地址的网络环境，在网络设备替换过度时，也能不间断提供管控服务。进一步地，在判断出所述通信请求所对应的通信方式后，记录所述被管控终端所支持的通信方式。进一步地，存储所述IPV6地址具体为：将IPV6地址与终端标识进行绑定之后加入一通信地址表；当要向被管控终端发送管控指令时，先查询被管控终端所支持的通信方式，若所述通信方式为IPV6通信，则查询所述通信地址表以获取被管控终端的IPV6地址，之后通过所述IPV6地址将所述管控指令发送至被管控终端。从上述描述可知，通过记录被管控终端所支持的通信方式，之后在发送管控指令时，先查询被管控终端所支持的通信方式，再进行管控指令的对应发送，从而使得管控指令的发送更加快速准确。进一步地，还包括：接收被管控终端主动上报的新IPV6地址，并更新所述通信地址表；和/或下发地址更新指令至被管控终端，若接收到被管控终端返回的新IPV6地址，则更新所述通信地址表。从上述描述可知，由于IPV6地址是临时性的，所以当被管控终端的IPV6地址发生变化时必须向管控服务端上报新IPV6地址，为了防止被管控终端所上报的IPV6地址出现丢包现象，可以由管控服务端向被管控终端请求新IPV6地址，从而保证管控服务端所存储的IPV6地址是有效可用的。进一步地，还包括：轮询所述通信地址表内的所有IPV6地址，若某一IPV6地址所对应的被管控终端未返回响应信息，则停止对该被管控终端下发管控指令。从上述描述可知，通过管控服务端的实时轮询，则在IPV6地址的有效期内且未收到新IPV6地址时，未收到被管控终端返回的响应信息，则说明该被管控终端已经下载，因此停止对该被管控终端下发管控指令，减少管控服务端的资源浪费。进一步地，所述通过所述IPV6地址将所述管控指令发送至被管控终端具体为：将所述管控指令转换成IPV6协议之后通过所述IPV6地址发送至被管控终端。进一步地，若所述通信请求为长连接请求，则与被管控终端建立长连接通信链路之后，基于所述长连接通信链路下发管控指令至被管控终端。进一步地，若所述通信请求为消息通信请求，则接收并存储所述消息通信请求中的唯一消息ID；当要向被管控终端发送管控指令时，先查询被管控终端所支持的通信方式，若所述通信方式为消息通信时，则查询获得被管控终端的唯一消息ID，按照所述唯一消息ID封装所述管控指令为消息指令后发布到消息队列，以使得被管控终端订阅消息队列之后根据所述唯一消息ID获取并执行消息指令。从上述描述可知，在被管控终端不支持IPV6通信时，也可以采用长连接方式或者消息通信方式来对被管控终端进行实时管控，使得本方案可以适应不同网络环境构架，采用IPV4、IPV6、消息队列、长连接相结合的通信方式，确保管控服务端能够实时管控终端设备。请参照图4，管控服务端，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述的广域网下的终端实时管控方法中的步骤。从上述描述可知，本发明的有益效果在于：在广域网下，被管控终端支持IPV6通信时，获取被管控终端的IPV6地址并进行存储，使得管控服务端要向被管控终端发送管控指令时，通过IPV6地址将管控指令发送至被管控终端，让终端进行实时响应；同时，由于是管控服务端主动发起控制，可以减少被管控终端对管控服务端进行轮询所造成服务性能的资源浪费，而且IPV6地址庞大，管控服务端可以管理更多的终端，从而在广域网下，能同时满足减少资源浪费和实现终端实时管控的需求。本发明的广域网下的终端实时管控方法及管控服务端能够适用于需要对在广域网下多个终端设备进行管控的场景，以下通过具体的实施方式进行说明：请参照图1至图3，本发明的实施例一为：在本实施例中，需要在被管控终端上安装一客户端，且需要保证管控服务端的地址是公网可访问，由此，由被管控终端上的客户端来与管控服务端进行交互。由此，本实施例提供的广域网下的终端实时管控方法，是管控服务端的执行方法，参照图3，其包括以下步骤：S1、在广域网下与被管控终端建立单向通信连接，接收并录入终端基本信息；如图2所示，由客户端采集并上传被管控终端的终端基本信息，其中至少要包括终端标识，以区分不同的被管控终端。S2、接收被管控终端发送的通信请求；如图2所示，由客户端判断被管控终端是否具备IPV6通信的能力，如果可以，则获取终端的IPV6地址，并将对应的IPV6通信协议作为通信请求通过IPV4地址发送给管控服务端。S3、若通信请求为IPV6通信请求，则获取并存储IPV6通信请求中的IPV6地址；即当管控服务端收到的通信请求包括IPV6通信协议和IPV6地址，则记录被管控终端所支持的通信方式为IPV6通信，之后将IPV6地址与终端标识进行绑定之后加入一通信地址表，该通信地址表还记录每一个IPV6地址的有效期。而在本实施例中，如果管控服务端收到的通信请求为长连接请求，与被管控终端建立长连接通信链路，并记录被管控终端所支持的通信方式为长连接通信。S4、当要向被管控终端发送管控指令时，通过IPV6地址将管控指令发送至被管控终端。即当管控服务端要向被管控终端发送管控指令时，先查询被管控终端所支持的通信方式，若通信方式为IPV6通信，则查询通信地址表以获取被管控终端的IPV6地址，之后将管控指令转换成IPV6协议后通过IPV6地址发送至被管控终端。若通信方式为长连接通信，则基于长连接通信链路下发管控指令至被管控终端。其中，如图3所示，在其他实施例中，也可以先将将管控指令转换成IPV6协议后，再查询通信地址表以获取被管控终端的IPV6地址。在本实施例中，由于IPV6的地址是临时性的，则还包括：S6、接收被管控终端主动上报的新IPV6地址，并更新通信地址表；和/或下发地址更新指令至被管控终端，若接收到被管控终端返回的新IPV6地址，则更新通信地址表。其中，管控服务端可以在IPV6地址的有效期超过之后还未收到新IPV6地址时通过其他通信方式主动下发地址更新指令去请求。在本实施例中，为了保证通信地址的有效性，则还包括：S7、轮询通信地址表内的所有IPV6地址，若某一IPV6地址所对应的被管控终端未返回响应信息，则停止对该被管控终端下发管控指令。其中，轮询就是发送一个数据包给被管控终端，如果被管控终端在线，则会对数据包进行响应，返回一个响应信息，因此，通过判断是否收到响应信息，就可以判断是否需要继续对该被管控终端下发管控指令。请参照图1至图3，本发明的实施例二为：在本实施例中，在被管控终端不支持IPV6通信，将长连接通信的方式替换为采用消息通信的方式进行实时管控，因此本实施例中具体包括以下步骤：若通信请求为消息通信请求，则接收并存储消息通信请求中的唯一消息ID；当要向被管控终端发送管控指令时，先查询被管控终端所支持的通信方式，若通信方式为消息通信时，则查询获得被管控终端的唯一消息ID，按照唯一消息ID封装管控指令为消息指令后发布到消息队列，以使得被管控终端订阅消息队列之后根据唯一消息ID获取并执行消息指令。请参照图4，本发明的实施例三为：管控服务端1，包括存储器3、处理器2及存储在存储器3上并可在处理器2上运行的计算机程序，处理器2执行计算机程序时实现上述实施例一或二的步骤。综上所述，本发明提供的广域网下的终端实时管控方法及管控服务端，具有以下优点：1、在广域网下，基于IPV6通信，由管控服务端向被管控终端主动发起管控，从而在广域网下，能同时满足减少资源浪费和实现终端实时管控的需求。2、通过当被管控终端的主动上报更新以及管控服务端的实时轮询，从而对管控服务端在广域网下对终端上报的IPV6地址进行一个有效的管理，确保服务保存的IPV6地址是有效可用的。3、采用IPV4、IPV6、消息队列、长连接相结合的通信方式，确保管控服务端能够实时管控终端设备。以上所述仅为本发明的实施例，并非因此限制本发明的专利范围，凡是利用本发明说明书及附图内容所作的等同变换，或直接或间接运用在相关的技术领域，均同理包括在本发明的专利保护范围内。
