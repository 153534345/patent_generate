标题title
一种全角度无限旋转单电位器及高精度风速检测方法
摘要abst
本发明涉及风速测量技术领域，提供了一种全角度无限旋转单电位器及高精度风速检测方法，主旨在于解决现有技术是通过脉冲计数来测量风速时存在的误差较大的问题。主要方案包括电位器，其中电位器包括底座、顶盖，在底座上设置有内碳膜圈和外碳膜圈，内碳膜圈设置有内碳膜圈开口，外碳膜圈设置有外碳膜圈开口，内碳膜圈开口与外碳膜圈开口错开，电极座中心设置有转轴，转轴上设置有电极片，电极片包括与内碳膜圈接触的内碳膜圈触点和与外碳膜圈接触的外碳膜圈触点。并通过电位器单位时间内旋转角度α计算得到风速。
权利要求书clms
1.一种全角度无限旋转单电位器，包括底座、顶盖，其特征在于，在底座上设置有内碳膜圈和外碳膜圈，内碳膜圈设置有内碳膜圈开口，外碳膜圈设置有外碳膜圈开口，内碳膜圈开口与外碳膜圈开口错开，电极座中心设置有转轴，转轴上设置有电极片，电极片包括与内碳膜圈接触的内碳膜圈触点和与外碳膜圈接触的外碳膜圈触点。2.根据权利要求1所述的一种全角度无限旋转单电位器，其特征在于，外碳膜圈开口处的一端为外碳膜圈电极引出端，外碳膜圈电极引出端通过电极引出，另一端为外碳膜圈跳线端；内碳膜圈开口处的一端为内碳膜圈电极引出端，内碳膜圈电极引出端通过电极引出，另一端为内碳膜圈跳线端；外碳膜圈跳线端与内碳膜圈跳线端通过跳线电连接。3.根据权利要求1所述的一种全角度无限旋转单电位器，其特征在于，内碳膜圈跳线端与外碳膜圈跳线端的错位角度为θ，θ即电器角度相位差。4.根据权利要求1所述的一种全角度无限旋转单电位器，其特征在于，电位器旋转角度α为：其中vc为电极片的电压，α为电位器旋转角度，I为恒流源电流，R1内碳膜圈的电阻、R2为外碳膜圈的电阻，γ1为内碳膜圈开口对应的机械角度、γ2为外碳膜圈开口应对的机械角度，θ为内碳膜圈跳线端与外碳膜圈跳线端的错位角度，γ1＜θ≤π且γ2＜θ≤π。5.一种高精度风速检测方法，其特征在于，包括以下步骤：步骤1、CPU中央处理器启动ADC每毫秒转换一次数据，得到时长m1毫秒，连续n次电位器中心抽头的毫秒电压瞬时数据，并存储为瞬时电压v1、v2、……、v4、vn，判断瞬时电压vn是否经过拐点并进行数据处理得到电位器旋转角度αN：步骤2：间隔时间m1毫秒，重复第1步N+1次得到集合{α1，α2，……，αN，αN+1}，其中N大于等于4；步骤3：采用步骤2得到的集合{α1，α2，……，αN，αN+1}计算角速度存储角速度集合{ω1，ω2，......ωN}；第7步：构建插值表；通过风洞可以测试出风速与角速度的对应数据，构成一个风速角速度查值表，得到风速值数据集{vb1、vb2、ΛΛ、vb14、vbn}与对应的角速度值数据集{ωb1、ωb2、ΛΛ、ωb14、ωbn}；第8步：插值算法计算风速，在插值表给出的数据中，将相邻两点间的风速看成线性增加，将前面计算存储的角速度值集合{ωb1、ωb2、ΛΛ、ωb14、ωbn}分别按照下面计算处理：判断ωN值：ωN等于{ωb1、ωb2、ΛΛ、ωb14、ωbn}中的某个值ωbn，则vN＝vbn，否则，ωN将落在{ωb1、ωb2、ΛΛ、ωb14、ωbn}中的两个数之间，即ωbn＜ωN＜ωbn-1，则按如下公式计算：vN为瞬时风速，得到瞬时风速集合{v1，v2，……，vN}，平均风速6.根据权利要求5所述的一种高精度风速检测方法，其特征在于，判断瞬时电压vn是否经过拐点包括以下步骤：A、电极片的内碳膜圈触点顺时针经过内碳膜圈跳线端：前n-1个瞬时电压值连续增加或相邻值相等，瞬时电压值接近且小于或等于vS，第n个值接近且小于或等于vL，处理办法：第n个值用vS替换；或者前n-2个瞬时电压值连续增加或相邻值相等，瞬时电压值接近且小于或等于vS，第n-2，n-1个瞬时电压值接近且小于或等于vL，且第n个值小于或等于第n-1个值，处理办法：第n-1和第n个值用vS替换；或者第n-4个和第n-3个瞬时电压值依次增大或相等，且瞬时电压值接近且小于或等于vS，第n-2、n-1、n个值依次减小或相等，瞬时电压值接近且小于或等于vL，处理办法：第n-4个和第n-3个值均用vL替换；或者第n-4个值接近且小于或等于vS，后第n-3，n-2，n-1，n个值依次减小或相邻值相等，且接近小于或等于vL，处理办法：第n-4个值用vL替换；前面四种情形可判断内碳膜圈触点顺时针经过内碳膜圈跳线端，其中vS＝IR1，B、电极片的内碳膜圈触点逆时针经过内碳膜圈跳线端：第n-4，n-3，n-2，n-1个瞬时电压值连续增加或相邻值相等，接近且小于或等于vL，第n个值接近且小于或等于vS，处理办法：第n个值用vL替换；或者第n-4，n-3，n-2个瞬时电压值连续增加或相邻值相等，瞬时电压值接近且小于或等于vL，第n-1、n个值接近且小于或等于vS，第n个值小于等于第n-1个值，处理办法：第n-1和第n个值用vL替换；或者第n-4，n-3个瞬时电压值依次增大或相等，瞬时电压值接近且小于或等于vL，第n-2，n-1、n个值依次减小或相邻值相等，瞬时电压值接近且小于或等于vS，处理办法：第n-4，n-3个值均用vS替换；或者第n-4个值接近且小于或等于vL，后n-3、n-2、n-1、n个值依次减小或相邻值相等，瞬时电压值接近且小于或等于vS，处理办法：第n-4个值用vS替换；前面四种情形可判断内碳膜圈触点逆时针经过内碳膜圈跳线端；C.内碳膜圈触点顺时针经过内碳膜圈电极引出端：第n-4，n-3，n-2，n-1个瞬时电压值连续减小或相邻值相等，且瞬时电压值接近且大于或等于vM，第n个值接近或等于0，处理办法：第n个值用vM替换，或者前第n-4，n-3，n-2个瞬时电压值连续减小或相邻值相等，且瞬时电压值接近且大于或等于vM，第n-1、n个瞬时电压值接近或等于0，且第n个值大于或等于第n-1个值，处理办法：第n-1和第n个值用vM替换；或者第n-4，n-3个瞬时电压值依次减小或相等，接近且大于或等于vM，第n-2、n-1、n个瞬时电压值依次增加或相邻值相等，并接近或等于0，处理办法：第n-4，n-3个瞬时电压值均用0替换；或者第n-4个瞬时电压值接近或等于vM，后第n-3，n-2，n-1，n个值依次增加或相邻值相等，并接近或等于0，处理办法：第n-4个值用0替换；前面四种情形可判断内碳膜圈触点顺时针经过内碳膜圈电极引出端；D.内碳膜圈触点逆时针经过内碳膜圈电极引出端；第n-4，n-3，n-2，n-1个瞬时电压值连续减小或相邻值相等并接近或等于0，第n个值接近且大于或等于vM，处理办法：第n个值用0替换；或者第n-4，n-3，n-2个瞬时电压值连续减小或相邻值相等，并接近或等于0，第n-1、n个值接近且大于或等于vM，且第n个值大于或等于第n-1个值，处理办法：第n-1和第n个值用0替换；或者第n-4，n-3个值依次减小或相等并接近0，第n-2，n-1，n个值依次增加或相邻值相等，接近且大于或等于vM，处理办法：第n-4、n-3个值均用vM替换；或者第n-4个值接近或等于0，第n-3，n-2，n-1，n个值依次增加或相邻值相等，接近且大于或等于vM，处理办法：第n-4个值用vM替换，前面四种情形可判断内碳膜圈触点逆时针经过内碳膜圈电极引出端；第n-4，n-3，n-2，n-1个瞬时电压值连续减小或相邻值相等并接近或等于0，第n个值接近且大于或等于vM，处理办法：第n个值用0替换；或者第n-4，n-3，n-2个瞬时电压值连续减小或相邻值相等，并接近或等于0，第n-1、n个值接近且大于或等于vM，且第n个值大于或等于第n-1个值，处理办法：第n-1和第n个值用0替换；或者第n-4，n-3个值依次减小或相等并接近0，第n-2，n-1，n个值依次增加或相邻值相等接近且大于或等于vM，处理办法：第n-4、n-3个值均用vM替换；或者第n-4个值接近或等于0，第n-3，n-2，n-1，n个值依次增加或相邻值相等接近且大于或等于vM，处理办法：第n-4个值用vM替换；前面四种情形可判断内碳膜圈触点逆时针经过内碳膜圈电极引出端。7.根据权利要求6所述的一种高精度风速检测方法，其特征在于，进行数据处理得到电位器旋转角度αN包括以下步骤：经过拐点判断处理后，n个值的相邻电压值是否有超过m2毫伏的，若有去掉该值，插值代替，即用该值前后值的均值代替该值，若最后一个值vn超过m2伏，则用2vn-1-vn-2代替vn，去掉最大和最小两个值，求剩下的值的算术平均值，得到的均值即为m1毫秒电压瞬时值vSS，判断如0≤vSS≤vS，否则存储αN。8.一种根据权利要求1-4任一所述的一种全角度无限旋转单电位器的参数自动检测方法，其特征在于，内碳膜圈开口应的机械角度γ1，外碳膜圈开口应的机械角度γ2，内碳膜圈跳线端与外碳膜圈跳线端的错位角度θ的测量方法，包括以下步骤：通过PLC程控步进电机带动满角度电位器向一个方向旋转，其旋转角度可控可测，每旋转一次停留3秒钟，待电路稳定，输出一组角度电压数据；第1步：初测，控步进电机带动电位器每次转动1°，测出vS1、vL1、vM1电位器对应的角度，αS1、αL1、αM1；具体方法：步进电机带动全角度无限旋转单电位器向一个方向旋转，每次旋转1°，每旋转一次停留3秒钟，待电路稳定再检测，电位器从0°开始旋转359°，记录一组360个电压角度数据，电压角度数据一一对应；寻找判断vS1、vL1、vM1对应的αS1、αL1、αM1，方法：步进电机旋转，检测到0电压时，开始计算步进电机的步进次数，步进359次，记录0°到359°对应的电压值，构成电压角度表，表中找到最大电压值即为vL1，该值对应的角度即为αL1，比αL1小1°的即为αS1，对应的电压值即为vS1，αM1＝359°，对应的电压即为vM1，则有：γ11＝2π-αS1+1，其中γ11对应为内碳膜圈开口应的机械角度γ1，θ1对应为内碳膜圈跳线端与外碳膜圈跳线端的错位角度θ，γ21对应为外碳膜圈开口应的机械角度；第2步：细测，控步进电机带动电位器每次转动0.01°，测出vS2、vL2、vM2电位器对应的角度，αS2、αL2、αM2；具体方法：步进电机带动满角度电位器向一个方向快速旋转，每次旋转0.01°，检测到电压为0时，停留3秒钟，确保电路稳定，再次检测确认电压为0，启动步进电机开始计数，快速转动到αS1-2°，开始3秒钟步进一次，每次步进0.01°，直到αS1+1°，记录该3°的电压角度数据300个，构成电压角度表，表中找到最大电压值即为vL2，该值对应的角度即为αL2，比αL2小0.01°的即为αS2，对应的电压值即为vS2，继续快速旋转到359.99°，停留检测输出电压值，该值即vM2，αM2＝359.99°，此步得到的电压和角度精度高，代入前面公式可计算出得到：γ1＝γ12＝2π-αS2+1，
说明书desc
技术领域本发明涉及气象事业中的风速测量技术领域，提供了一种全角度无限旋转单电位器及高精度风速检测方法。背景技术空气处于不停的运动之中，空气运动产生的气流称为风，风的运动既有速度又有方向，它在天气预报中有着重要的作用，常作为良好的预报指标而被广泛应用。目前，广泛应用于气象传感器数字化网络化系统中的风速采集器，对测量出的风速数据的精度和分辨率有较高要求，而且由于应用于气象服务中，风速采集器一般安装于户外，要求传输距离远，测量精度高。按照气象台站要求，瞬时风速即0.25秒的平均风速。测风仪器在我国所有的气象部门中占有不可或缺的地位，然而针对绝大多数的气象单位来说，对于测风仪器的选择仍然是传统的机械旋转式测风传感器，这些传感器就是我们平时生活中常见的风杯风速传感器和单翼风速传感器，以此来进行对于风速和风向的测量。目前风速测量通常采用三杯式光电型风速传感器，其主要工作原理是：当风杯转动时，会带动安置于光电耦合器的发光二极管和光电三极管之间的多齿截光盘转动，发光二极管发射的光束被齿盘上的齿度切割，就会使下面的光敏三极管有时接收到上面的发光二极管发射的光线而导通，有时接收不到上面发光二极管照射来的光线而截止，这样，光电三极管即产生脉冲输出，每个齿遮住光束时间表现为低电平，光束通过两齿盘间隙之间的时间表现为高电平。转动轴转动一圈，多次切割光束而输出一高一低的脉冲信号，因此风速传感器输出的均是频率与风速成正比的脉冲信号，输出信号：1～1221Hz方波信号，所以，测出信号频率就可得到风速。风杯式风速传感器，是一种十分常见的风速传感器，最早由英国鲁宾孙发明。感应部分是由三个或四个圆锥形或半球形的空杯组成。空心杯壳固定在互成120°的三叉星形支架上或互成90°的十字形支架上，杯的凹面顺着一个方向排列，整个横臂架则固定在一根垂直的旋转轴上。风杯1的压力在垂直于风杯轴方向上的分力近似为零。风杯2与3同风向成60度角相交，对风杯2而言，其凹面迎着风，承受的风压最大；风杯3其凸面迎风，风的绕流作用使其所受风压比风杯2小，由于风杯2与风杯3在垂直于风杯轴方向上的压力差，而使风杯开始顺时针方向旋转，风速越大，起始的压力差越大，产生的加速度越大，风杯转动越快。当风杯转动时，带动同轴的多齿截光盘或磁棒转动，通过电路得到与风杯转速成正比的脉冲信号，该脉冲信号由计数器计数，经换算后就能得出实际风速值。因此，现有风向风速指标分别为：风速：测量范围：0～60m/s；测量精度：±0.3m/s；分辨率：0.1m/s风向：测量范围：0～360°；测量精度：±3°；分辨率：3°。发明内容本发明的目的在于解决现有技术是通过脉冲计数来测量风速时存在的误差较大的问题。为了实现上述目的本发明提供了如下方案：本发明提供了一种全角度无限旋转单电位器，包括底座、顶盖，其特征在于，在底座上设置有内碳膜圈和外碳膜圈，内碳膜圈设置有内碳膜圈开口，外碳膜圈设置有外碳膜圈开口，内碳膜圈开口与外碳膜圈开口错开，电极座中心设置有转轴，转轴上设置有电极片，电极片包括与内碳膜圈接触的内碳膜圈触点和与外碳膜圈接触的外碳膜圈触点。上述技术方案中，外碳膜圈开口处的一端为外碳膜圈电极引出端，外碳膜圈电极引出端通过电极引出，另一端为外碳膜圈跳线端；内碳膜圈开口处的一端为内碳膜圈电极引出端，内碳膜圈电极引出端通过电极引出，另一端为内碳膜圈跳线端；外碳膜圈跳线端与内碳膜圈跳线端通过跳线电连接。上述技术方案中，内碳膜圈跳线端与外碳膜圈跳线端的错位角度为θ，θ即电器角度相位差。上述技术方案中，电位器旋转角度α为：其中vc为电极片的电压，α为电位器旋转角度，I为恒流源电流，R1内碳膜的电阻、R2为外碳膜的电阻，γ1为内碳膜圈开口应的机械角度、γ2为外碳膜圈开口应的机械角度，θ为内碳膜圈跳线端与外碳膜圈跳线端的错位角度，γ1＜θ≤π且γ2＜θ≤π。本发明还提供了一种高精度风速检测方法，包括以下步骤：步骤1、CPU中央处理器启动ADC每毫秒转换一次数据，得到时长m1毫秒，连续n次电位器中心抽头的毫秒电压瞬时数据，并存储为瞬时电压v1、v2、……、v4、vn，判断瞬时电压vn是否经过拐点并进行数据处理得到电位器旋转角度αN：步骤2：间隔时间m1毫秒，重复第1步N+1次得到集合{α1，α2，……，αN，αN+1}，其中N大于等于4；步骤3：采用步骤2得到的集合{α1，α2，……，αN，αN+1}计算角速度存储角速度集合{ω1，ω2，......ωN}；第7步：构建插值表；通过风洞可以测试出风速与角速度的对应数据，构成一个风速角速度查值表，得到风速值数据集{vb1、vb2、ΛΛ、vb14、vbn}与对应的角速度值数据集{ωb1、ωb2、ΛΛ、ωb14、ωbn}；第8步：插值算法计算风速。在插值表给出的数据中，将相邻两点间的风速看成线性增加，将前面计算存储的角速度值集合{ωb1、ωb2、ΛΛ、ωb14、ωbn}分别按照下面计算处理：判断ωN值：ωN等于{ωb1、ωb2、ΛΛ、ωb14、ωbn}中的某个值ωbn，则vN＝vbn，否则，ωN将落在{ωb1、ωb2、ΛΛ、ωb14、ωbn}中的两个数之间，即ωbn＜ωN＜ωbn-1，则按如下公式计算：vN为瞬时风速，得到瞬时风速集合{v1，v2，……，vN}，平均风速上述技术方案中，判断瞬时电压vn是否经过拐点包括以下步骤：A、电极片的内碳膜圈触点顺时针经过内碳膜圈跳线端：前n-1个瞬时电压值连续增加或相邻值相等，且瞬时电压值小于或等于vs，第n个值接近且小于或等于vL，处理办法：第n个值用vs替换；或者前n-2个瞬时电压值连续增加或相邻值相等，瞬时电压值接近且小于或等于vs，第n-2，n-1个瞬时电压值接近且小于或等于vL，且第n个值小于等于第n-1个值，处理办法：第n-1和第n个值用vs替换；或者第n-4个和第n-3个瞬时电压值依次增大或相等，瞬时电压值接近且小于或等于vs，第n-2、n-1、n个值依次减小或相等，瞬时电压值接近且小于或等于vL，处理办法：第n-4个和第n-3个值均用vL替换；或者第n-4个值接近或等于vs，后第n-3，n-2，n-1，n个值依次减小或相邻值相等，接近且小于或等于vL，处理办法：第n-4个值用vL替换。前面四种情形可判断内碳膜圈触点顺时针经过内碳膜圈跳线端，其中vS＝IR1，B、电极片的内碳膜圈触点逆时针经过内碳膜圈跳线端：第n-4，n-3，n-2，n-1个瞬时电压值连续增加或相邻值相等，接近且小于或等于vL，第n个值接近且小于或等于vs，处理办法：第n个值用vL替换；或者第n-4，n-3，n-2个瞬时电压值连续增加或相邻值相等，瞬时电压值接近且小于或等于vL，第n-1、n个值接近且小于或等于vs，第n个值小于等于第n-1个值，处理办法：第n-1和第n个值用vL替换；或者第n-4，n-3个瞬时电压值依次增大或相等，瞬时电压值接近且小于或等于vL，第n-2，n-1、n个值依次减小或相邻值相等，瞬时电压值接近且小于或等于vs，处理办法：第n-4，n-3个值均用vs替换；或者第n-4个值接近且小于或等于vL，后n-3、n-2、n-1、n个值依次减小或相邻值相等，瞬时电压值接近且小于或等于vs，处理办法：第n-4个值用vs替换。前面四种情形可判断内碳膜圈触点逆时针经过内碳膜圈跳线端。C.内碳膜圈触点顺时针经过内碳膜圈电极引出端：第n-4，n-3，n-2，n-1个瞬时电压值连续减小或相邻值相等，且瞬时电压值接近且大于或等于vM，第n个值接近或等于0，处理办法：第n个值用vM替换，或者前第n-4，n-3，n-2个瞬时电压值连续减小或相邻值相等，且瞬时电压值接近且大于或等于vM，第n-1、n个瞬时电压值接近或等于0，且第n个值大于或等于第n-1个值，处理办法：第n-1和第n个值用vM替换；或者第n-4，n-3个瞬时电压值依次减小或相等，接近且大于或等于vM，第n-2、n-1、n个瞬时电压值依次增加或相邻值相等，并接近或等于0，处理办法：第n-4，n-3个瞬时电压值均用0替换；或者第n-4个瞬时电压值接近且大于或等于vM，后第n-3，n-2，n-1，n个值依次增加或相邻值相等，并接近或等于0，处理办法：第n-4个值用0替换。前面四种情形可判断内碳膜圈触点顺时针经过内碳膜圈电极引出端。D.内碳膜圈触点逆时针经过内碳膜圈电极引出端。第n-4，n-3，n-2，n-1个瞬时电压值连续减小或相邻值相等，且接近或等于0，第n个值接近且大于或等于vM，处理办法：第n个值用0替换；或者第n-4，n-3，n-2个瞬时电压值连续减小或相邻值相等，且接近或等于0，第n-1、n个值接近且大于或等于vM，且第n个值大于或等于第n-1个值，处理办法：第n-1和第n个值用0替换；或者第n-4，n-3个值依次减小或相等并接近0，第n-2，n-1，n个值依次增加或相邻值相等，接近且大于或等于vM，处理办法：第n-4、n-3个值均用vM替换；或者第n-4个值接近或等于0，第n-3，n-2，n-1，n个值依次增加或相邻值相等，接近且大于或等于vM，处理办法：第n-4个值用vM替换。前面四种情形可判断内碳膜圈触点逆时针经过内碳膜圈电极引出端。上述技术方案中，进行数据处理得到电位器旋转角度αN包括以下步骤：经过拐点判断处理后，n个值的相邻电压值是否有超过m2毫伏的，若有去掉该值，插值代替，即用该值前后值的均值代替该值，若最后一个值vn超过m2伏，则用2vn-1-vn-2代替vn，去掉最大和最小两个值，求剩下的值的算术平均值，得到的均值即为m1毫秒电压瞬时值vss，判断如0≤vss≤vS，否则存储αN。本发明还提供了一种全角度无限旋转单电位器的参数自动检测方法，其特征在于，内碳膜圈开口应的机械角度γ1，外碳膜圈开口应的机械角度γ2，内碳膜圈跳线端与外碳膜圈跳线端的错位角度θ的测量方法，包括以下步骤：通过PLC程控步进电机带动满角度电位器向一个方向旋转，其旋转角度可控可测，每旋转一次停留3秒钟，待电路稳定，输出一组角度电压数据；第1步：初测，控步进电机带动电位器每次转动1°，测出vS1、vL1、vM1电位器对应的角度，αS1、αL1、αM1；具体方法：步进电机带动全角度无限旋转单电位器向一个方向旋转，每次旋转1°，每旋转一次停留3秒钟，待电路稳定再检测，电位器从0°开始旋转359°，记录一组360个电压角度数据，电压角度数据一一对应；寻找判断vS1、vL1、vM1对应的αS1、αL1、αM1，方法：步进电机旋转，检测到0电压时，开始计算步进电机的步进次数，步进359次，记录0°到359°对应的电压值，构成电压角度表，表中找到最大电压值即为vL1，该值对应的角度即为αL1，比αL1小1°的即为αS1，对应的电压值即为vS1，αM1＝359°，对应的电压即为vM1，则有：其中γ11对应为内碳膜圈开口应的机械角度γ1，θ1对应为内碳膜圈跳线端与外碳膜圈跳线端的错位角度θ，γ21对应为外碳膜圈开口应的机械角度；第2步：细测，控步进电机带动电位器每次转动0.01°，测出vS2、vL2、vM2电位器对应的角度，αS2、αL2、αM2；具体方法：步进电机带动满角度电位器向一个方向快速旋转，每次旋转0.01°，检测到电压为0时，停留3秒钟，确保电路稳定，再次检测确认电压为0，启动步进电机开始计数，快速转动到αS1-2°，开始3秒钟步进一次，每次步进0.01°，直到αS1+1°，记录该3°的电压角度数据300个，构成电压角度表，表中找到最大电压值即为vL2，该值对应的角度即为αL2，比αL2小0.01°的即为αS2，对应的电压值即为vS2，继续快速旋转到359.99°，停留检测输出电压值，该值即vM2，αM2＝359.99°，此步得到的电压和角度精度高，代入前面公式可计算出得到：γ1＝γ12＝2π-αS2+1，因为本发明采用上述技术方案，因此具备有以下有益效果：1、本发明通过无限旋转的电位器配合风速测量方法，能够精确的测量到风速。2、本发明采用上电极片和下电极片，分别与内碳膜圈和外碳膜圈滑动相接，可无限圈旋转，且不存在测量死角。3、本发明提供的方法能够进行数据质量控制，由于电路受到雷击、闪电和强磁场干扰，这些干扰虽然短暂，但也势必造成产品质量下降，我们采用数据质量控制后的高精度角度校测方法来处理。解决雷击、闪电和强磁场干扰。附图说明图1为一种全角度无限旋转单电位器示意图；图2为一种全角度无限旋转单电位器顶盖剖掉部分后示意图；图3为一种全角度无限旋转单电位器俯视方向透视图；图4为一种全角度无限旋转单电位器等效原理图；图5为数据坐标图。附图标记说明：1-底座、2-顶盖，3-转轴，4-电极片，5-外碳膜圈，5-1外碳膜圈开口，6-内碳膜圈6-1-内碳膜圈开口，A-外碳膜圈跳线端，B-外碳膜圈电极引出端，C-内碳膜圈电极引出端，D-内碳膜圈跳线端。其中vc为电极片的电压，α为电位器旋转角度，I为恒流源电流，R1内两碳膜的电阻、R2为外碳膜的电阻，γ1为内碳膜圈开口应的机械角度、γ2为外碳膜圈开口应的机械角度，θ为内碳膜圈跳线端D与外碳膜圈跳线端A的错位角度。具体实施方式本发明涉及气象事业中的风速测量技术领域，通过引入全角度电位器测量方法可以很好的改善风速风向的测量精度，实现了高精度风速风向的检测。全角度无限旋转单电位器如图4，可用于风速、风向、风力发电等0-360度转动的旋转角度检测和转速检测场合。说明：两导电膜半径内小外大，其电阻也不一样，四个端分别为A、B和D、C，AD端通过导线相连，恒流源接到B端，经过第一个导电膜电流流到A端，再经过第二个导电膜流到C端，C端接地。所述全角度电位器碳膜片内设有两个独立的内碳膜圈和外碳膜圈，内碳膜圈和外碳膜圈半径不一样电阻也不一样，碳膜片用导线将其首尾相连，余下两端作为电位器两个连接端；所述设计一个滑动接触片分内外接触头，分别与内碳膜圈和外碳膜圈滑动相接，可无限圈旋转，滑片导线引出为电位器的中心抽头端；所述电位器上下碳膜圈电器角度错位，相位差最大180°，确保滑动接触片上下接触头旋转到任何位置至少有一个接触头接触到碳膜圈。两导电膜四个端分别为A、B和C、D，AD端通过导线相连，给电位器加一个恒流源，恒流源从B端流入，经第一个导电膜电流流到A端，再经过第二个导电膜流到C端，C端接地。其中，vc-电位器中心抽头电压，α-电位器旋转角度，I-恒流源电流，R1、R2-分别是两碳膜的电阻，γ1、γ2-分别是两碳膜圈缺口对应的机械角度，一般不相等，θ-相位差，电位器滑动触头从内圈A端开始顺时针旋转到外圈A端的角度，γ1＜θ≤π且γ2＜θ≤π。本算法结合图4，更方便理解，解出得到α，则有：针对已选定全角度电位器和设计调试好的电路，I、γ1、γ1、R2、R2、θ均为已知数，通过有关方法可以测得。令vS＝IR1，，则有瞬时角速度公式：ω一瞬时角速度，通过软件处理可以计算出瞬时角速度。基本方法：通过前面的计算得到α，每5毫秒取样一个值，测出电压值，计算出α，单位时间内的α构成一个数组，取某时刻相邻前后两时刻点的角度差即为Δα，Δt＝0.01秒，则可计算出ω。瞬时角速度公式：λ-瞬时角加速度，通过软件处理可以计算出瞬时加角速度。基本方法：通过前面的计算得到ω，每50毫秒秒计算出一个ω，单位时间内的ω构成一个数组，取某时刻相邻前后两时刻点的角度差即为Δω，Δt＝0.01秒，则可计算出λ。由可知，当α＝2π-γ1，vS＝IR1γ1＝2π-α当α从大变小，无限接近2π-γ1，即α＝2π-γ1+1/∞≈2π-γ1，∞-无穷大，则有物理意义：电位器内圈从0°旋转到2π-γ1时，再转动无穷小，实际电路中考虑为步进电机转动最小步进。当α从小变大，无限接近2π，即α＝2π-1/∞≈2π，则有由和解出风速检测方法：现代气象业务要求提供的瞬时风速为0.25秒平均风速。，则有每毫秒角度变化不超过一定值，设计AD参考电压3.3伏，对应电压约10毫伏，取10毫伏作为标准，即相邻两数据差不超过10毫伏，若超过即可判断有干扰。具体方法如下：角度、角速度、角加速度及风速数据处理方法如下：第1步：电压数据质量控制与风杯角度计算：CPU中央处理器启动ADC每毫秒转换一次数据，得到时长5毫秒，连续5次电位器中心抽头的毫秒电压瞬时数据，并存储为v1、v2、v3、v4、v5。判断是否经过拐点及数据处理：A.滑动触头顺时针经过内圈D点。前4个值连续增加接近且小于或等于vs，第5个值接近且小于或等于vL，处理办法：第5个值用vs替换；或者前3个值连续增加接近且小于或等于vs，第4、5个值接近且小于或等于vL，且第5个值小于等于第4个值，处理办法：第4和第5个值用vs替换；或者前2个值依次增大且小于或等于vs，第3、4、5个值依次减小接近且小于或等于vL，处理办法：第1、2个值均用vL替换；或者第1个值接近或等于vs，后4个值依次减小并接近且小于或等于vL，处理办法：第1个值用vL替换。前面四种情形可判断滑动触头顺时针经过内圈A点。B.滑动触头逆时针经过内圈D点。前4个值连续增加并接近且小于或等于vL，第5个值接近或等于vs，处理办法：第5个值用vL替换：或者前3个值连续增加并接近且小于或等于vL，第4、5个值接近且小于或等于vs，第5个值小于等于第4个值，处理办法：第4和第5个值用vL替换；或者前2个值依次增大并接近且小于或等于vL，第3、4、5个值依次减小并接近且小于或等于vs，处理办法：第1、2个值均用vs替换；或者第1个值接近且小于或等于vL，后4个值依次减小并接近且小于或等于vs，处理办法：第1个值用vs替换。前面四种情形可判断滑动触头逆时针经过内圈C点。C.滑动触头顺时针经过内圈C点。前4个值连续减小并接近大于或等于vM，第5个值接近或等于0，处理办法：第5个值用vM替换；或者前3个值连续减小并接近大于或等于vM，第4、5个值接近或等于0，且第5个值大于或等于第4个值，处理办法：第4和第5个值用vM替换；或者前2个值依次减小并接近vM，第3、4、5个值依次增加并接近或等于0，处理办法：第1、2个值均用0替换；或者第1个值接近或等于vM，后4个值依次增加并接近或等于0，处理办法：第1个值用0替换。前面四种情形可判断滑动触头顺时针经过内圈C点。D.滑动触头逆时针经过内圈C点。前4个值连续减小并接近或等于0，第5个值接近且大于或等于vM，处理办法：第5个值用0替换；或者前3个值连续减小并接近或等于0，第4、5个值接近且大于或等于vM，且第5个值大于或等于第4个值，处理办法：第4和第5个值用0替换；或者前2个值依次减小并接近0，第3、4、5个值依次增加接近且大于或等于vM，处理办法：第1、2个值均用vM替换；或者第1个值接近或等于0，后4个值依次增加接近且大于或等于vM，处理办法：第1个值用vM替换。前面四种情形可判断滑动触头逆时针经过内圈A点。进一步判断是否受到干扰：经过拐点判断处理后，5个值的相邻电压值是否有超过35毫伏的，若有去掉该值，插值代替，即用该值前后值的均值代替该值，，若最后一个值v5超过35毫伏，则用2v4-v3代替v5，去掉最大和最小两个值，求3个值的算术平均值，得到的均值即为5毫秒电压瞬时值vss5。判断如0≤vss5≤vS，否则存储α1；第2步：间隔时间5毫秒，重复第1步得到α2，存储α1、α2；第3步：计算角速度存储ω1；第4步：间隔5毫秒再重复第1步，第2步和第3步，循环后得到并存储角度α1、α2、α3，角速度ω1、ω2；第5步：计算角加速度，存储λ1；第6步：循环步骤1至步骤5，得到时长250毫秒，每个数据间隔5毫秒的50个连续的角度瞬时值α1、α2、ΛΛ、α50，连续49个角速度瞬时值ω1、ω2、、ΛΛ、ω49，连续48个角加速度瞬时值λ1、λ2、、ΛΛ、λ48，全部存储，α9，ω8，每5毫秒循环更新一次，经过N+2次更新后得到的数据为：角度瞬时值为αN+3、αN+4、ΛΛ、αN+52，角速度瞬时值为ωN+2、ωN+3、ΛΛ、ωN+51，角加速度为λN+1、λN+2、ΛΛ、λN+50。第7步：构建插值表。风速与传感器风杯的角速度成线性单调增加，但不是线性增加。采用插值法处理：传感器设计加工好后，风速与风杯的角速度保持不变，通过风洞可以测试出风速与角速度的对应数据，构成一个风速角速度查值表，通过分析和实际测量，选取风速为0.1m/s，0.3m/s，0.5m/s，1m/s，1.5m/s，2，5m/s，10m/s，15m/s，20m/s，30m/s，40m/s，50m/s，60m/s，70m/s，80m/s，分别计为vb1、vb2、ΛΛ、vb14、vb15，通过风洞提供上述风速分别测出对应风杯的角速度值，计为ωb1、ωb2、ΛΛ、ωb14、ωb15，第8步：插值算法计算风速。在插值表给出的数据中，将相邻两点间的风速看成线性增加，将前面计算存储的50个角速度值分别按照下面计算处理：判断ω值：ω等于ωb1、ωb2、ΛΛ、ωb14、ωb15中的某个值ωbn，则v＝vbn，否则，ω将落在ωb1、ωb2、ΛΛ、ωb14、ωb15中的两个数之间，即ωbn＜ω＜ωbn-1，则按如下公式计算：v为瞬时风速。将ω1、ω2、ΛΛ、ω14、ω50依次全部代入处理计算得到相应的250毫秒时长的50个风速值，即为：v1、v2、ΛΛ、v14、v50，平均即得到250毫秒平均风速vss250：第9步：信号输出，一种是SPI数字输出，一种将电压转化为4-20毫秒信号输出，一种是0-3.3伏电压输出。电位器参数自动检测方法：已选定的全角度电位器和设计调试好的电路，I、γ1、γ2、R1、R2、θ均已确，但其参数还需测量，I、R1、R2很容易测量，γ1、γ2、θ均是角度不易测量，针对这3个参数编写一个检测程序，通过PLC程控步进电机带动满角度电位器向一个方向旋转，其旋转角度可控可测，每旋转一次停留3秒钟，待电路稳定，输出一组角度电压数据。第1步：初测。步进1°，测出vS1、vL1、vM1电位器对应的角度，αS1、αL1、αM1。具体方法：步进电机带动满角度电位器向一个方向旋转，每次旋转1°，每旋转一次停留3秒钟，待电路稳定再检测，电位器从0°开始旋转359°，记录一组360个电压角度数据，电压角度数据一一对应。寻找判断vS1、vL1、vM1对应的αS1、αL1、αM1，方法：步进电机旋转，检测到0电压时，开始计算步进电机的步进次数，步进359次，记录0°到359°对应的电压值，构成电压角度表，表中找到最大电压值即为vL1，该值对应的角度即为αL1，比αL1小1°的即为αS1，对应的电压值即为vS1，αM1＝359°，对应的电压即为vM1。则有：第2步：细测。步进0.01°，测出vS2、vL2、vM2电位器对应的角度，αS2、αL2、αM2。具体方法：步进电机带动满角度电位器向一个方向快速旋转，每次旋转0.01°，检测到电压为0时，停留3秒钟，确保电路稳定，再次检测确认电压为0，启动步进电机开始计数，快速转动到αS1-2，开始3秒钟步进一次，直到αS1+1，记录该3°的电压角度数据300个，构成电压角度表，表中找到最大电压值即为vL2，该值对应的角度即为αL2，比αL2小0.01°的即为αS2，对应的电压值即为vS2，继续快速旋转到359.99°，停留检测输出电压值，该值即vM2，αM2＝359.99°。此步得到的电压和角度精度高。代入前面公式可计算出准确的γ1、γ2、θ。说明：文中角度单位为度，角速度单位为弧度/秒，在进行角速度计算时自动换算为弧度，转换关系为1弧度＝180/π度，1π＝π/180弧度。具体应用中要注意各参数的量纲。
