标题title
一种异步LED-ID传输方法及系统
摘要abst
本发明提出一种异步LED‑ID传输方法，包括：建立对原始LED‑ID序列进行XmBnB编码处理的发射机与接收机间的通信；基于ASWA算法获取所有接收载波频率的偏移量；根据偏移量获取移位信号；将移位信号分成若干个采样窗口，计算出每个采样窗口在频点处的幅频响应；根据所有幅频响计算判决阈值；通过判决阈值对每个采样窗口在频点处的幅频响应做阈值判决，得到二进制向量；根据二进制向量将原始LED‑ID信息位进行恢复，获取所有载波频率对应的LED‑ID序列。本发明还提出一种异步LED‑ID传输系统，通过设计XmBnB编码方案，同时引入了ASWA算法实现LED‑ID的鲁棒解码，可在相同的LED‑ID解码时间复杂度的情况下将采样窗口与符号近似对齐，以保证符号判决过程的准确率，从而提高LED‑ID解码的准确率。
权利要求书clms
1.一种异步LED-ID传输方法，其特征在于，包括以下步骤：S1：构建异步LED-ID传输系统模型，建立对原始LED-ID序列进行XmBnB编码处理的发射机与接收机间的通信；S2：在接收机端接收载波信号，基于ASWA算法获取所有载波频率的偏移量；S3：将载波信号的索引按照偏移量进行循环左移操作，得到移位信号；S4：将移位信号分成若干个采样窗口，利用Goertzel算法计算出每个采样窗口在频点处的幅频响应；S5：找处所有幅频响应中最大的两个值并计算判决阈值；S6：通过判决阈值对每个采样窗口在频点处的幅频响应做阈值判决，得到二进制向量；S7：根据二进制向量将原始LED-ID信息位进行恢复，获取所有载波频率对应的LED-ID序列，完成LED-ID的传输；其中，XmBnB编码表示扩展mBnB编码；ASWA表示Approximate Sampling WindowAlignment，ASWA算法表示近似采样窗口对齐算法。2.根据权利要求1所述的一种异步LED-ID传输方法，其特征在于，在步骤S1中，LED-ID传输系统模型具体描述为：假设在收发机异步模式的nVLP系统场景中，相互间无时钟同步的M个LED发射机Lk，k＝0,1,...,M-1；使用V个不同的载波频率fi，i＝0,1,...,V-1传输比特‘1’，称为专属符号；此外，所有的LED发射机使用相同的载波频率f′传输比特‘0’，称为共享符号；这一调制方式基于FDM，称为交替调制；在此基础上，基于mBnB编码思想，将原始的LED-ID序列信息位拆分为若干个码块，每个码块经XmBnB编码得到包含冗余位的码字，将码字按顺序组合并添加帧头FH，其中帧头为比特组合“1110”或其他具有唯一性的特定比特组合，即生成异步模式下可被接收机的UE正确识别的LED-ID帧序列；其中，nVLP表示non-Imaging Visible Light Positioning，nVLP系统表示非成像可见光定位系统；FDM表示Frequency Division Multiplexing，表示频分复用。3.根据权利要求2所述的一种异步LED-ID传输方法，其特征在于，在XmBnB编码过程中，为确保LED-ID序列经过异步传输之后仍可被正确识别与检测，需要添加FH表明LED-ID序列的起始位置；同时，为避免原始LED-ID序列与FH产生冲突，需要对原始的LED-ID序列进行编码以保证FH的唯一性；FH表示帧头；不失一般性地，令原始LED-ID序列的比特数为I，XmBnB编码的具体处理步骤为：1)：将长度为I的原始LED-ID序列以每m比特作为一个码块拆分为若干个码块，每个码块则变换成XmBnB码本中长度为n的码字，增加冗余位以保证FH的唯一性；其中XmBnB码本具备以下性质：·每个码字均不含FH；·任意2个码字拼接不产生FH；·满足一一映射的前提下，码块到码字的映射方式组合为任意组合；2)：将拆分的码块分别映射成XmBnB码字之后，按照顺序组合成码字序列并且添加FH，即“1110”，或其他具有唯一性的特定比特组合；经过编码以及FH前置的LED-ID帧序列长度为KF，则有其中KFH为FH的长度，即有KFH＝4；进一步地组帧效率为：因此有因此组帧效率的上界为XmBnB的编码效率。4.根据权利要求3所述的一种异步LED-ID传输方法，其特征在于，在步骤S1中，LED-ID帧序列经过频移键控调制，即FSOOK调制并通过LED发射机发送，其中每个发送符号以T0为时间周期；在步骤S2中，接收机通过模数转换器ADC采集PD接收到的模拟信号，采样率为FS，相当于采样间隔为TS＝1/FS；连续采样时长为TW的离散信号组成一个采样窗口，且有TW＝T0，采样窗口内数据的数量为NW，由于LED-ID帧序列包含KF个符号，因此KF个采样窗口内即包含完整的LED-ID帧信号，并且与采样开始的时刻无关；因此，一帧采样信号包含的数据数量为：NT＝NW·KF＝FS·TW·KF 由于LED-ID传输系统模型基于FDM，因此令PD的接收视角FOV范围内有M′个LED发射机，其中M′≤V并且发射机的载波频率依次为fk′，k′＝0,1,...,M′-1；在nVLP系统中考虑无遮挡情况下的视距传播，根据朗伯辐射模型，第k′个LED发射机与PD之间的信道增益为：其中βR为PD的响应率，ηeo为电光转换效率，AR为PD的有效接收面积，θk′和分别为第k′个LED与PD间的辐射角和接收角，dk′为第k′个LED与PD的距离，n1＝-ln2/ln)称为LED的辐射波瓣数，为PD阶数，而θ1/2和分别为LED和PD的半功率角；定义来自第k′个LED的发送信号为xk′，其中t′＝0,1,...,NT-1；在异步传输模式下，LED发射机的帧信号起始时刻与UE的采样起始时刻有时间差τk′∈表示为：其中w为加性高斯白噪声；将y分为KF个采样窗口Wl，其中l＝0,1,...,KF-1，j＝0,1,...,NW-1；对于每一个长度为NW的采样窗口，借助Goertzel算法计算其在频点fi处的幅频响应，其实质为带通滤波器的快速算法，滤波器的后向差分方程为：其中Ql为滤波器迭代过程的中间变量，且有Ql＝Ql＝0；滤波器的前向差分方程为其中Ul亦为滤波器迭代过程的中间变量；因此，对应于第l个采样窗口中，频点fi处的幅频响应ai,l表达为：基于上述过程，基于ASWA算法进行计算，使得解码载波fi对应的LED-ID时，将采样窗口与FSOOK符号近似对齐，从而有效提高符号判决的准确率，最终获取所有载波频率的偏移量5.根据权利要求4所述的一种异步LED-ID传输方法，其特征在于，步骤S2中，ASWA算法的核心操作为：在范围内估计出使得原本非对齐状态下的接收信号经过移位步后为近似对齐的状态下的接收信号针对某个载波fi，其具体处理过程如下：S21：使用式-计算出幅频响应向量S22：将接收信号y的索引循环左移c次，其中c＝0,1,...,NW-1，得到移位信号通过下式表示为：之后再将分成KF个采样窗口Wlc；借助滑动窗口Goertzel算法计算幅频响应其后向差分方程为：其中Q′l为迭代过程的中间变量，j＝0,1,...,NW-1，并且有Q′l＝Ql,Q′l＝Ql；进一步地，其前向差分方程为：其中U′l亦为迭代过程的中间变量，j＝0,1,...,NW-1；则采样窗口Wlc在频点fi处的响应值为：联立式-得：因此通过迭代式-即可以计算出且有S23：得到后，找出中最大的两个值分别记为与并按下式计算阈值：其中μ′称为比例系数；统计出中小于阈值的数值，并计算其平均值为：其中card表示集合中元素的数量；S24：由于采样窗口与发送符号近似对齐的情况下，符号‘1’与符号‘0’几乎完整地分布在一个采样窗口内，此时具有最小值，因此将待估计值偏移量表示为至此，在中估计得到一个值使得采样窗口与发送符号近似对齐，由于在中的比例系数μ′大于0.5会使得更多未对齐窗口的幅频值被统计到从而增大了未对齐状态下的值，因此中搜索使得最小的c值作为的数值解，则经过步的移位后达到采样窗口与发送符号近似对齐的状态；S25：重复执行步骤S21-S24，获取对应所有载波频率fi的偏移量i＝0,1,...,V-1。6.根据权利要求5所述的一种异步LED-ID传输方法，其特征在于，步骤S3中，将载波信号y的索引按照偏移量进行循环左移操作得到移位信号具体表示为：进一步地，在步骤S4中，将分成KF个采样窗口再利用Goertzel算法计算出每个采样窗口在频点fi处的幅频响应，得到7.根据权利要求6所述的一种异步LED-ID传输方法，其特征在于，在步骤S5中，找处所有幅频响应中最大的两个值分别为ai,l1与ai,l1，并按下式计算判决阈值：其中μ称为比例系数，判决阈值的比例系数需要等于0.5；进一步的，在步骤S6中，通过判决阈值aT,i对幅频响应向量做阈值判决，得到二进制向量8.根据权利要求7所述的一种异步LED-ID传输方法，其特征在于，在步骤S7中，根据二进制向量将原始LED-ID信息位进行恢复的过程具体为：对二进制向量进行搜索，从中搜索帧头并作移位操作，再去除帧头，将得到的序列再拆分成若干个码字，通过查找码本即恢复原始LED-ID信息位。9.一种异步LED-ID传输系统，其特征在于，包括若干发射机和接收机，所述发射机与接收机之间采用如权利要求1～8任一项所述的一种异步LED-ID传输方法进行通信传输。10.根据权利要求9所述的一种异步LED-ID传输系统，其特征在于，在所述发射机上，采用对原始LED-ID序列进行XmBnB编码处理；在接收机端接收载波信号，基于ASWA算法获取所有载波频率的偏移量，将载波信号的索引按照偏移量进行循环左移操作，得到移位信号；将移位信号分成若干个采样窗口，并利用Goertzel算法计算出每个采样窗口在频点处的幅频响应；找处所有幅频响应中最大的两个值并计算判决阈值；通过判决阈值对每个采样窗口在频点处的幅频响应做阈值判决，得到二进制向量；根据二进制向量将原始LED-ID信息位进行恢复，获取所有载波频率对应的LED-ID序列，完成LED-ID的传输。
说明书desc
技术领域本发明涉及面向市内可见光定位技术领域，更具体的，涉及基于扩展mBnB编码和近似采样窗口对齐技术的异步可见光LED-ID传输方法及系统。背景技术在可见光定位系统中，需要LED发射机带有唯一LED-ID标识符，并且可被包含光信号接收器件的用户设备正确识别。在成像可见光定位系统中使用CMOS图像传感器作为信号接收器件Z.P.Li,M.Jiang,X.N.Zhang,X.Y.Chen,and W.K.Hou,“Space-time-multiplexed multi-image visible lightpositioning system exploiting pseudo-Miller-coding for smart phones,”IEEETrans.Wireless Commun.,vol.16,no.12,pp.8261–8274,Dec.2017，而非成像可见光定位系统中使用光电二极管作为接收器件Z.Li,G.Qiu,L.Zhao,and M.Jiang,“Dual-mode LED aided visiblelight positioning system under multi-path propagation:design anddemonstration,”IEEE Trans.Wireless Commun.,vol.20,no.9,pp.5986–6003,Sep.2021.。LED发射机在收发端均可被区分是VLP系统的共同需求，由此存在多LED-ID的传输与检测问题T.Nguyen,A.Islam,T.Yamazato,andY.M.Jang,“Technical issues onIEEE 802.15.7mimage sensor communication standardization,”IEEE Commun.Mag.,vol.56,no.2,pp.213–218,Feb.2018。为了区分叠加在接收端的发送信号，常见的复用方式包括频分复用H.Kim,D.Kim,S.Yang,Y.Son,and S.Han,“An indoorvisible light communication positioning system using a RF carrier allocationtechnique,”J.Lightw.Technol.,vol.31,no.1,pp.134–144,Jan.2013，时分复用Y.Hou,S.Xiao,H.Zheng,andW.Hu,“Multiple accessscheme based on block encoding time division multiplexing in an indoorpositioning system using visible light,”IEEE J.Opt.Commun.Netw.,vol.7,no.5,pp.489–495,May 2015，空分复用，码分复用S.Yamaguchi,V.V.Mai,T.C.Thang,andA.T.Pham,“Design and performance evaluation of VLC indoor positioning systemusing optical orthogonal codes,”in Proc.5th Int.Conf.Commun.Electron.,Jul.2014,pp.54–59。其中TDM与CDM需要收发机之间维持严格同步，因此增加了VLP系统大规模部署的硬件成本。而另一方面，FDM与SDM由于对于时间同步要求不高，因而对于VLP系统的实用化更具潜在价值。文献提出了一种由于iVLP系统的异步LED-ID传输方案，其使用伪密勒编码将原始LED-ID信息比特位映射至调制符号，并且证明了连续相同的调制符号与CIS传感器接收帧数量之间具有映射唯一性。文献H.Zhang and C.Yang,“Efficient coding and detection ofultra-long IDs forvisible light positioning systems,”Opt.Express,vol.26,no.10,pp.13397–13407,May2018.R.Qv,L.Feng,A.Yang,P.Guo,B.Lin,and H.Huang,“A high efficient codefor visible light positioning system based on image sensor,”IEEE Access,vol.7,pp.77762–77770,Jun.2019.另提出了用于iVLP系统的LED-ID传输方案。在iVLP系统中，不同的发射机出现在接收图像的不同位置并且相互之间不存在干扰，因此iVLP系统本身具备SDM机制的优势，即不存在多灯干扰问题。然而，相对于nVLP系统使用的PD而言，精密CIS传感器通常价格不菲，异步模式下可靠的nVLP系统更具成本优势。在异步nVLP系统中，需要多个发射机的信号同时叠加到接收端，并且可能存在多灯干扰问题。因此nVLP系统需要同时考虑LED-ID的传输与灯间干扰问题。文献P.Luo,M.Zhang,X.Zhang,G.Cai,D.Han,and Q.Li,“An indoor visible lightcommunication positioning system using dual-tone multi-frequency technique,”in Proc.2nd Int.Workshop Opt.Wireless Commun.,Oct.2013,pp.25–29.提出了一种基于双音多频方案的nVLP系统，并且在文献P.Luo,Z.Ghassemlooy,H.L.Minh,A.Khalighi,X.Zhang,M.Zhang,and C.Yu,“Experimental demonstration of an indoor visible light communicationpositioning system using dual-tone multi-frequency technique,”in Proc.3rdInt.Workshop Opt.Wireless Commun.,Sep.2014,pp.55–59.中给出相应的实验结果。文献H.Zheng,Z.Xu,C.Yu,and M.Gurusamy,“Asychronous visible lightpositioning system using FDMA and ID techniques,”in Proc.Conf.Lasers Electro-Opt.Pac.Rim.,Jul.2017,pp.1–4.中认为LED-ID信息应嵌入在发送信号包络中，但并未给出具体的LED-ID编码、调制以及相应的解码方案。此外，文献W.Zhang,M.I.S.Chowdhury,and M.Kavehrad,“Asynchronous indoor positioning system basedon visible light communications,”Opt.Eng.,vol.53,no.4,045105,Apr.2014.提出了一种基于ALOHA协议的多路复用方式，当时隙数量足够多时可以确保传输的成功率，但时隙数量过多也将导致时隙利用率的下降。文献G.Qiu,J.Yuan,L.Zhao,and M.Jiang,“Asynchronous hybrid indoor positioning system based on inertial navigationand pseudo-Miller-coding aided visible light positioning,”in Proc.7thInt.Conf.Comput.Commun.,Dec.2021,pp.366–371提出了nVLP系统下基于pMC机制LED-ID传输方案并通过实验验证，该方案需要4种不同的频率来交替表示符号‘0’和‘1’，以及一个额外的频率表示异步传输模式下LED-ID信号的帧头，因此每个LED发射机需要使用5个不同的频率。该方案可有效解决nVLP系统下的LED-ID传输时的收发异步问题，缺陷是使用的频率数量过多会带来ILI，容易造成LED-ID解码过程中的符号判决错误。现有技术提出了一种基于伪双相编码交替调制机制的LED-ID传输方法，其提出的交替调制方法中每个发射机仅用一种频率发送符号‘1’，而所有发射机的符号‘0’均用同一种频率发送，相较于文献可大幅度减少所需的频率数量，但其在LED-ID编码上使用曼彻斯特码存在编码效率低的缺陷。更进一步地，现有技术所提出的LED-ID解码方案依赖于文献所提出的连续相同符号数量和采样窗口数量存在映射唯一性条件，并且需要使用窗口过采样机制，即发送符号的持续时间和采样窗口的持续时间需要满足某种倍数关系，这在一定程度上限制了LED-ID传输速率。因此，根据对现有文献的调研，异步模式下nVLP系统的LED-ID传输问题尚未得到充分的考虑和研究。发明内容本发明针对上述现有技术中至少一种技术缺陷，提供一种异步LED-ID传输方法及系统，通过设计编码效率更高、编码方式更为灵活的XmBnB编码方案，同时引入了新型的ASWA算法实现LED-ID的鲁棒解码，可在相同的LED-ID解码时间复杂度的情况下将采样窗口与符号近似对齐，以保证符号判决过程的准确率，从而提高LED-ID解码的准确率。为解决上述技术问题，本发明的技术方案如下：一种异步LED-ID传输方法，包括以下步骤：S1：构建异步LED-ID传输系统模型，建立对原始LED-ID序列进行XmBnB编码处理的发射机与接收机间的通信；S2：在接收机端接收载波信号，基于ASWA算法获取所有载波频率的偏移量；S3：将载波信号的索引按照偏移量进行循环左移操作，得到移位信号；S4：将移位信号分成若干个采样窗口，利用Goertzel算法计算出每个采样窗口在频点处的幅频响应；S5：找处所有幅频响应中最大的两个值并计算判决阈值；S6：通过判决阈值对每个采样窗口在频点处的幅频响应做阈值判决，得到二进制向量；S7：根据二进制向量将原始LED-ID信息位进行恢复，获取所有载波频率对应的LED-ID序列，完成LED-ID的传输。其中，XmBnB编码表示扩展mBnB编码；ASWA表示Approximate SamplingWindowAlignment，ASWA算法表示近似采样窗口对齐算法。上述方案提出一种基于扩展mBnB编码和近似采样窗口对齐算法的异步LED-ID传输方法，该方法在现有技术的交替调制设计基础上，设计了编码效率更高、编码方式更为灵活的XmBnB编码方案，同时引入了新型的ASWA算法实现LED-ID的鲁棒解码，可在相同的LED-ID解码时间复杂度的情况下将采样窗口与符号近似对齐，以保证符号判决过程的准确率，从而提高LED-ID解码的准确率。此外，由于上述方案不使用窗口过采样机制，可实现比文献更高的LED-ID传输速率。其中，在步骤S1中，LED-ID传输系统模型具体描述为：假设在收发机异步模式的nVLP系统场景中，相互间无时钟同步的M个LED发射机Lk，k＝0,1,...,M-1；使用V个不同的载波频率fi，i＝0,1,...,V-1传输比特‘1’，称为专属符号；此外，所有的LED发射机使用相同的载波频率f′传输比特‘0’，称为共享符号；这一调制方式基于FDM，称为交替调制；在此基础上，基于mBnB编码思想，将原始的LED-ID序列信息位拆分为若干个码块，每个码块经XmBnB编码得到包含冗余位的码字，将码字按顺序组合并添加帧头FH，其中帧头为比特组合“1110”或其他具有唯一性的特定比特组合，即生成异步模式下可被接收机的UE正确识别的LED-ID帧序列。其中，在XmBnB编码过程中，为确保LED-ID序列经过异步传输之后仍可被正确识别与检测，需要添加FH表明LED-ID序列的起始位置；同时，为避免原始LED-ID序列与FH产生冲突，需要对原始的LED-ID序列进行编码以保证FH的唯一性；FH表示帧头；不失一般性地，令原始LED-ID序列的比特数为I，XmBnB编码的具体处理步骤为：1)：将长度为I的原始LED-ID序列以每m比特作为一个码块拆分为若干个码块，每个码块则变换成XmBnB码本中长度为n的码字，增加冗余位以保证FH的唯一性；其中XmBnB码本具备以下性质：·每个码字均不含FH；·任意2个码字拼接不产生FH；·满足一一映射的前提下，码块到码字的映射方式组合为任意组合；2)：将拆分的码块分别映射成XmBnB码字之后，按照顺序组合成码字序列并且添加FH，即“1110”，或其他具有唯一性的特定比特组合；经过编码以及FH前置的LED-ID帧序列长度为KF，则有其中KFH为FH的长度，即有KFH＝4；进一步地组帧效率为：因此有因此组帧效率的上界为XmBnB的编码效率。其中，在步骤S1中，LED-ID帧序列经过频移键控调制，即FSOOK调制并通过LED发射机发送，其中每个发送符号以T0为时间周期；在步骤S2中，接收机通过模数转换器ADC采集PD接收到的模拟信号，采样率为FS，相当于采样间隔为TS＝1/FS；连续采样时长为TW的离散信号组成一个采样窗口，且有TW＝T0，采样窗口内数据的数量为NW，由于LED-ID帧序列包含KF个符号，因此KF个采样窗口内即包含完整的LED-ID帧信号，并且与采样开始的时刻无关；因此，一帧采样信号包含的数据数量为：NT＝NW·KF＝FS·TW·KF由于LED-ID传输系统模型基于FDM，因此令PD的接收视角FOV范围内有M′个LED发射机，其中M′≤V并且发射机的载波频率依次为fk′，k′＝0,1,...,M′-1；在nVLP系统中考虑无遮挡情况下的视距传播，根据朗伯辐射模型，第k′个LED发射机与PD之间的信道增益为：其中βR为PD的响应率，ηeo为电光转换效率，AR为PD的有效接收面积，θk′和分别为第k′个LED与PD间的辐射角和接收角，dk′为第k′个LED与PD的距离，n1＝-ln2/ln)称为LED的辐射波瓣数，为PD阶数，而θ1/2和分别为LED和PD的半功率角；定义来自第k′个LED的发送信号为xk′，其中t′＝0,1,...,NT-1；在异步传输模式下，LED发射机的帧信号起始时刻与UE的采样起始时刻有时间差τk′∈其中gk′为信道增益，而PT为LED发射机的峰值功率；进一步地，M′个LED发射机叠加到UE的载波信号y表示为：其中w为加性高斯白噪声；将y分为KF个采样窗口Wl，其中l＝0,1,...,KF-1，j＝0,1,...,NW-1；对于每一个长度为NW的采样窗口，借助Goertzel算法计算其在频点fi处的幅频响应，其实质为带通滤波器的快速算法，滤波器的后向差分方程为：其中Ql为滤波器迭代过程的中间变量，且有Ql＝Ql＝0；滤波器的前向差分方程为其中Ul亦为滤波器迭代过程的中间变量；因此，对应于第l个采样窗口中，频点fi处的幅频响应ai,l表达为：基于上述过程，基于ASWA算法进行计算，使得解码载波fi对应的LED-ID时，将采样窗口与FSOOK符号近似对齐，从而有效提高符号判决的准确率，最终获取所有载波频率的偏移量其中，步骤S2中，ASWA算法的核心操作为：在范围内估计出使得原本非对齐状态下的接收信号经过移位步后为近似对齐的状态下的接收信号针对某个载波fi，其具体处理过程如下：S21：使用式-计算出幅频响应向量S22：将接收信号y的索引循环左移c次，其中c＝0,1,...,NW-1，得到移位信号通过下式表示为：之后再将分成KF个采样窗口Wlc；借助滑动窗口Goertzel算法计算幅频响应其后向差分方程为：其中Q′l为迭代过程的中间变量，j＝0,1,...,NW-1，并且有Q′l＝Ql,Q′l＝Ql；进一步地，其前向差分方程为：其中U′l亦为迭代过程的中间变量，j＝0,1,...,NW-1；则采样窗口Wlc在频点fi处的响应值为：联立式-得：因此通过迭代式-即可以计算出且有S23：得到后，找出中最大的两个值分别记为与并按下式计算阈值：其中μ′称为比例系数；统计出中小于阈值的数值，并计算其平均值为：其中card表示集合中元素的数量；S24：由于采样窗口与发送符号近似对齐的情况下，符号‘1’与符号‘0’几乎完整地分布在一个采样窗口内，此时具有最小值，因此将待估计值偏移量表示为至此，在中估计得到一个值使得采样窗口与发送符号近似对齐，由于在中的比例系数μ′大于0.5会使得更多未对齐窗口的幅频值被统计到从而增大了未对齐状态下的值，因此中搜索使得最小的c值作为的数值解，则经过步的移位后达到采样窗口与发送符号近似对齐的状态；S25：重复执行步骤S21-S24，获取对应所有载波频率fi的偏移量i＝0,1,...,V-1。其中，步骤S3中，将载波信号y的索引按照偏移量进行循环左移操作得到移位信号具体表示为：进一步地，在步骤S4中，将分成KF个采样窗口再利用Goertzel算法计算出每个采样窗口在频点fi处的幅频响应，得到其中，在步骤S5中，找处所有幅频响应中最大的两个值分别为ai,l1与ai,l1，并按下式计算判决阈值：其中μ称为比例系数，判决阈值的比例系数需要等于0.5；进一步的，在步骤S6中，通过判决阈值aT,i对幅频响应向量做阈值判决，得到二进制向量其中，在步骤S7中，根据二进制向量将原始LED-ID信息位进行恢复的过程具体为：对二进制向量进行搜索，从中搜索帧头并作移位操作，再去除帧头，将得到的序列再拆分成若干个码字，通过查找码本即恢复原始LED-ID信息位。本方案还提供一种异步LED-ID传输系统，包括若干发射机和接收机，所述发射机与接收机之间采用一种异步LED-ID传输方法进行通信传输。其中，在所述发射机上，采用对原始LED-ID序列进行XmBnB编码处理；在接收机端接收载波信号，基于ASWA算法获取所有载波频率的偏移量，将载波信号的索引按照偏移量进行循环左移操作，得到移位信号；将移位信号分成若干个采样窗口，并利用Goertzel算法计算出每个采样窗口在频点处的幅频响应；找处所有幅频响应中最大的两个值并计算判决阈值；通过判决阈值对每个采样窗口在频点处的幅频响应做阈值判决，得到二进制向量；根据二进制向量将原始LED-ID信息位进行恢复，获取所有载波频率对应的LED-ID序列，完成LED-ID的传输。与现有技术相比，本发明技术方案的有益效果是：本发明提出一种异步LED-ID传输方法及系统，通过设计编码效率更高、编码方式更为灵活的XmBnB编码方案，同时引入了新型的ASWA算法实现LED-ID的鲁棒解码，可在相同的LED-ID解码时间复杂度的情况下将采样窗口与符号近似对齐，以保证符号判决过程的准确率，从而提高LED-ID解码的准确率。附图说明图1为本发明中一种异步LED-ID传输方法的流程示意图；图2为本发明一实施例中LED-ID的传输场景示意图；图3为本发明一实施例中LED-ID传输系统收发过程示意图；图4为本发明一实施例中ASWA算法处理过程示意图；图5为本发明一实施例中基于XmBnB机制的LED-ID编码与调制示例图；图6为本发明一实施例中不同μ取值的DAR性能对比图；图7为本发明一实施例中不同μ′取值的DAR性能对比图；图8为本发明一实施例中不同Δτ取值的DAR性能对比图。具体实施方式附图仅用于示例性说明，不能理解为对本专利的限制；为了更好说明本实施例，附图某些部件会有省略、放大或缩小，并不代表实际产品的尺寸；对于本领域技术人员来说，附图中某些公知结构及其说明可能省略是可以理解的。下面结合附图和实施例对本发明的技术方案做进一步的说明。实施例1本实施例提供一种异步LED-ID传输方法，如图1所示，包括以下步骤：S1：构建异步LED-ID传输系统模型，建立对原始LED-ID序列进行XmBnB编码处理的发射机与接收机间的通信；S2：在接收机端接收载波信号，基于ASWA算法获取所有载波频率的偏移量；S3：将载波信号的索引按照偏移量进行循环左移操作，得到移位信号；S4：将移位信号分成若干个采样窗口，利用Goertzel算法计算出每个采样窗口在频点处的幅频响应；S5：找处所有幅频响应中最大的两个值并计算判决阈值；S6：通过判决阈值对每个采样窗口在频点处的幅频响应做阈值判决，得到二进制向量；S7：根据二进制向量将原始LED-ID信息位进行恢复，获取所有载波频率对应的LED-ID序列，完成LED-ID的传输。本实施例提出一种基于扩展mBnB编码和近似采样窗口对齐算法的异步LED-ID传输方法，该方法在现有技术的交替调制设计基础上，设计了编码效率更高、编码方式更为灵活的XmBnB编码方案，同时引入了新型的ASWA算法实现LED-ID的鲁棒解码，可在相同的LED-ID解码时间复杂度的情况下将采样窗口与符号近似对齐，以保证符号判决过程的准确率，从而提高LED-ID解码的准确率。此外，由于上述方案不使用窗口过采样机制，可实现比文献更高的LED-ID传输速率。更具体的，在步骤S1中，LED-ID传输系统模型具体描述为：如图2所示的收发机异步模式的nVLP系统场景中，相互间无时钟同步的M个LED发射机Lk，k＝0,1,...,M-1；使用V个不同的载波频率fi，i＝0,1,...,V-1传输比特‘1’，称为专属符号；此外，所有的LED发射机使用相同的载波频率f′传输比特‘0’，称为共享符号；这一调制方式基于FDM，称为交替调制；在现有技术提出的AM机制基础上，本实施例提出一种新的针对发射机的LED-ID编码方案。本实施例基于mBnB编码思想，将原始的LED-ID序列信息位拆分为若干个码块，每个码块经XmBnB编码得到包含冗余位的码字，将码字按顺序组合并添加帧头，其中帧头为比特组合“1110”或其他具有唯一性的特定比特组合，即生成异步模式下可被接收机的UE正确识别的LED-ID帧序列，这一过程如图3所示.其中，在XmBnB编码过程中，为确保LED-ID序列经过异步传输之后仍可被正确识别与检测，需要添加FH表明LED-ID序列的起始位置；同时，为避免原始LED-ID序列与FH产生冲突，需要对原始的LED-ID序列进行编码以保证FH的唯一性；不失一般性地，令原始LED-ID序列的比特数为I，XmBnB编码的具体处理步骤为：1)：将长度为I的原始LED-ID序列以每m比特作为一个码块拆分为若干个码块，每个码块则变换成XmBnB码本中长度为n的码字，增加冗余位以保证FH的唯一性；其中XmBnB码本具备以下性质：·每个码字均不含FH；·任意2个码字拼接不产生FH；·满足一一映射的前提下，码块到码字的映射方式组合为任意组合；2)：将拆分的码块分别映射成XmBnB码字之后，按照顺序组合成码字序列并且添加FH，即“1110”，或其他具有唯一性的特定比特组合；经过编码以及FH前置的LED-ID帧序列长度为KF，则有其中KFH为FH的长度，即有KFH＝4；进一步地组帧效率为：因此有因此组帧效率的上界为XmBnB的编码效率。需要指出的是，XmBnB码本并不唯一，可有X1B2B、X2B3B、X3B4B、X4B5B等多种码本形式，且多个码本可混合使用。例如，长度为5bit的原始LED-ID既可使用X1B2B搭配X4B5B，亦可使用X2B3B搭配X3B4B，两种方式拥有相同的组帧效率。更具体的，在步骤S1中，LED-ID帧序列经过频移键控调制调制并通过LED发射机发送，其中每个发送符号以T0为时间周期；在步骤S2中，接收机通过模数转换器采集PD接收到的模拟信号，采样率为FS，相当于采样间隔为TS＝1/FS；连续采样时长为TW的离散信号组成一个采样窗口，且有TW＝T0，采样窗口内数据的数量为NW，由于LED-ID帧序列包含KF个符号，因此KF个采样窗口内即包含完整的LED-ID帧信号，并且与采样开始的时刻无关；因此，一帧采样信号包含的数据数量为：NT＝NW·KF＝FS·TW·KF由于LED-ID传输系统模型基于FDM，因此令PD的接收视角范围内有M′个LED发射机，其中M′≤V并且发射机的载波频率依次为fk′，k′＝0,1,...,M′-1；在nVLP系统中考虑无遮挡情况下的视距传播，根据朗伯辐射模型，第k′个LED发射机与PD之间的信道增益为Y.Muhammad,S.Ho,and B.Vellambi,“Indoor position tracking using multiple optical receivers,”J.Lightw.Technol.,vol.34,no.4,pp.1166–1176,Feb.2016.J.M.Kahn andJ.R.Barry,“Wireless infraredcommunications,”Proc.IEEE,vol.85,no.2,pp.265–298,Feb.1997：其中βR为PD的响应率，ηeo为电光转换效率，AR为PD的有效接收面积，θk′和分别为第k′个LED与PD间的辐射角和接收角，dk′为第k′个LED与PD的距离，n1＝-ln2/ln)称为LED的辐射波瓣数，为PD阶数，而θ1/2和分别为LED和PD的半功率角；定义来自第k′个LED的发送信号为xk′，其中t′＝0,1,...,NT-1；在异步传输模式下，LED发射机的帧信号起始时刻与UE的采样起始时刻有时间差τk′∈其中gk′为信道增益，而PT为LED发射机的峰值功率；进一步地，M′个LED发射机叠加到UE的载波信号y表示为：其中w为加性高斯白噪声；将y分为KF个采样窗口Wl，其中l＝0,1,...,KF-1，j＝0,1,...,NW-1；对于每一个长度为NW的采样窗口，借助Goertzel算法计算其在频点fi处的幅频响应，其实质为带通滤波器的快速算法，滤波器的后向差分方程R.Beck,A.Dempster,and I.Kale,“Finite-precision Goertzel filters used for signal tonedetection,”IEEE Trans.Circuits Syst.II,Analog Digit.Signal Process.,vol.48,no.7,pp.691–700,Jul.2001.为：其中Ql为滤波器迭代过程的中间变量，且有Ql＝Ql＝0；滤波器的前向差分方程为其中Ul亦为滤波器迭代过程的中间变量；因此，对应于第l个采样窗口中，频点fi处的幅频响应ai,l表达为J.Beraldin and W.Steenaart,“Overflow analysis of afixed-point implementation of the Goertzel algorithm,”IEEE Trans.CircuitsSyst.,vol.36,no.2,pp.322–324,Feb.1989：基于上述过程，基于ASWA算法进行计算，使得解码载波fi对应的LED-ID时，将采样窗口与FSOOK符号近似对齐，从而有效提高符号判决的准确率，最终获取所有载波频率的偏移量更具体的，图4展示了ASWA过程的示意图，ASWA算法的核心操作为：在范围内估计出使得原本非对齐状态下的接收信号经过移位步后为近似对齐的状态下的接收信号针对某个载波fi，其具体处理过程如下：S21：使用式-计算出幅频响应向量S22：将接收信号y的索引循环左移c次，其中c＝0,1,...,NW-1，得到移位信号通过下式表示为：之后再将分成KF个采样窗口Wlc；借助滑动窗口Goertzel算法计算幅频响应其后向差分方程为R.Garcia-Retegui,S.A.Gonzalez,M.A.Funes,and S.Maestri,“Implementation ofa novel synchronization methodusing sliding Goertzel DFT,”in Proc.Int.Symp.Intelligent Signal Process.,Oct.2007,pp.1–5：其中Q′l为迭代过程的中间变量，j＝0,1,...,NW-1，并且有Q′l＝Ql,Q′l＝Ql；进一步地，其前向差分方程为：其中U′l亦为迭代过程的中间变量，j＝0,1,...,NW-1；则采样窗口Wlc在频点fi处的响应值为：联立式-得：因此通过迭代式-即可以计算出且有S23：得到后，找出中最大的两个值分别记为与并按下式计算阈值：其中μ′称为比例系数，其需要大于0.5以便更好地区分出不同的对齐状态；统计出中小于阈值的数值，并计算其平均值为：其中card表示集合中元素的数量；S24：由于采样窗口与发送符号近似对齐的情况下，符号‘1’与符号‘0’几乎完整地分布在一个采样窗口内，此时具有最小值，因此将待估计值偏移量表示为至此，在中估计得到一个值使得采样窗口与发送符号近似对齐，如图4所示。由于在中的比例系数μ′大于0.5会使得更多未对齐窗口的幅频值被统计到从而增大了未对齐状态下的值，因此中搜索使得最小的c值作为的数值解，则经过步的移位后达到采样窗口与发送符号近似对齐的状态；S25：重复执行步骤S21-S24，获取对应所有载波频率fi的偏移量i＝0,1,...,V-1。更具体的，步骤S3中，将载波信号y的索引按照偏移量进行循环左移操作得到移位信号具体表示为：进一步地，在步骤S4中，将分成KF个采样窗口再利用Goertzel算法计算出每个采样窗口在频点fi处的幅频响应，得到更具体的，在步骤S5中，找处所有幅频响应中最大的两个值分别为ai,l1与ai,l1，并按下式计算判决阈值：其中μ称为比例系数，判决阈值的比例系数需要等于0.5；进一步的，在步骤S6中，通过判决阈值aT,i对幅频响应向量做阈值判决，得到二进制向量更具体的，在步骤S7中，根据二进制向量将原始LED-ID信息位进行恢复的过程具体为：对二进制向量进行搜索，从中搜索帧头并作移位操作，再去除帧头，将得到的序列再拆分成若干个码字，通过查找码本即恢复原始LED-ID信息位。在具体实施过程中，算法1给出了ASWA算法的详细步骤，具体为：在上述的XmBnB机制、ASWA算法的基础上，本发明提出异步nVLP系统LED-ID的采样窗口对齐解码方案，称为XmBnB-AM-ASW联合检测方法。作为总结，将XmBnB-AM-ASW联合检测算法的详细步骤总结于算法2。综上所述，本实施例所带来的有益效果为：XmBnB编码机制使用了较少的冗余位即可保证FH的唯一性，相比于现有的BCAM方案能够提高LED-ID的编码效率；采样窗口的持续时间与发送符号的持续时间相同，在接收机性能受限的情况下，有利于提高LED-ID的传输速率；ASWA算法将采样窗口与发送符号近似对齐，相较于现有的异步方案有更高的符号判决准确率。实施例2更具体的，本实施例还提供一种异步LED-ID传输系统，包括若干发射机和接收机，所述发射机与接收机之间采用一种异步LED-ID传输方法进行通信传输。更具体的，在所述发射机上，采用对原始LED-ID序列进行XmBnB编码处理；在接收机端接收载波信号，基于ASWA算法获取所有载波频率的偏移量，将载波信号的索引按照偏移量进行循环左移操作，得到移位信号；将移位信号分成若干个采样窗口，并利用Goertzel算法计算出每个采样窗口在频点处的幅频响应；找处所有幅频响应中最大的两个值并计算判决阈值；通过判决阈值对每个采样窗口在频点处的幅频响应做阈值判决，得到二进制向量；根据二进制向量将原始LED-ID信息位进行恢复，获取所有载波频率对应的LED-ID序列，完成LED-ID的传输。在具体实施过程中，本实施例通过设计编码效率更高、编码方式更为灵活的XmBnB编码方案，同时引入了新型的ASWA算法实现LED-ID的鲁棒解码，可在相同的LED-ID解码时间复杂度的情况下将采样窗口与符号近似对齐，以保证符号判决过程的准确率，从而提高LED-ID解码的准确率。实施例3为了更充分地阐述本发明所具有的有益效果，以下结合具体实施例与相关仿真结果的分析，进一步对本发明的有效性和先进性予以说明。A.XmBnB机制保证FH唯一性的情况下，一种符合要求的X4B5B码本范例如表1所示，若传输一个4位LED-ID信息码“0101”，通过X4B5B编码后，变成5位的码字“10100”，然后对编码后的二进制LED-ID信息加装FH，即比特组合“1110”或其他具有唯一性的特定比特组合。由于经过X4B5B编码的LED-ID信息中连续符号的‘1’数目不会超过3个，因此FH在LED-ID帧序列中具有唯一性。最后，对二进制的LED-ID帧序列进行FSOOK交替调制，具体方法为信息比特‘1’用持续时间为T0且频率为fi的FSOOK符号表示，而信息比特‘0’用持续时间为T0且频率为f′的FSOOK符号表示。图5提供了一种XmBnB-AM机制的示例，即LED-ID帧序列“111010100”的FSOOK调制信号。表1 X4B5B码本示例B.XmBnB-AM-ASW联合检测本实施例将结合仿真与实验结果评估异步模式下XmBnB-AM-ASW联合检测方案的性能。仿真与实验环境设置为2.4×2.4×3的立体空间，PD与LED发射机的高度差为2.47。在2.4×2.4的区域内每间隔15cm取一个测试点，总共289个测试点。除特别说明以外，仿真与实验的参数如表2，表3所示。表2 LED-ID与频率配置表3仿真与实验参数性能评估的指标为LED-ID解码准确率，记为ρ，每个测试点上的DAR定义为正确解码的LED-ID数目与总的LED-ID数目之比。在每个测试点，仿真程序为每个LED发射机随机产生τk′∈1.参数μ、μ′对DAR性能的影响需要指出的是，参数μ、μ′对系统DAR性能有实质性的影响，本实施例主要对比分析参数μ、μ′取不同数值时的DAR性能。首先评估MSW方案下参数μ对性能的影响，设置同步情况下的性能仿真作为参照。图6-图6为DAR性能的累计概率密度函数分布图，可以看出μ＝0.5时，MSW方案的仿真与实验结果中DAR性能均为最优。图6为比例系数μ取值从0.2到0.8的平均DAR性能，在同步情况的对比曲线中，μ＝0.5与μ＝0.6都具有相当良好的性能。而从图6可以看出μ取值为0.5时，XmBnB-AM-MSW方案性能最优，因此认为μ作为判决阈值的比例系数取值为0.5是合理的，并且XmBnB-AM-ASW方案也有阈值判决的过程，因此在后续的分析中取μ＝0.5。类似地，比例系数μ′也存在较优的取值，根据图7的结果，μ′的数值取0.7时性能最优。这是由于式中通过搜寻使最小的移位值c以估计因此需要μ′取值大于0.5，此时窗口与符号未对齐的状态会使得的值增大，从而可以排除未对齐状态的移位值c，而找出近似对齐状态所对应的移位值c。因此在下文的分析中设置μ′的数值为0.7。2.不同异步程度对性能的影响实际情况中，τk′的取值随机均匀分布于从图8的仿真结果可以看出，Δτ＝0时，XmBnB-AM-ASW的性能略低于XmBnB-AM-MSW的性能。这是由于在同步情况下，经过ASWA算法的作用使得在少数情况下会将原本对齐状态调整为非对齐的状态，进而产生判决错误。然而，在实际情况中，采样窗口与发送符号更可能是非对齐的状态，从图8可以看出XmBnB-AM-ASW方案的性能对于不同的Δτ取值几乎没有变化。另一方面，从图8中可以看出XmBnB-AM-MSW方案的性能受Δτ取值的影响非常明显，尤其是Δτ＝0.5T0时，其性能急剧恶化，而XmBnB-AM-ASW方案仍然维持稳定。因此可以说明基于ASWA算法的XmBnB-AM-ASW方案在收发机异步的条件下仍然能够维持稳定的LED-ID传输。显然，本发明的上述实施例仅仅是为清楚地说明本发明所作的举例，而并非是对本发明的实施方式的限定。对于所属领域的普通技术人员来说，在上述说明的基础上还可以做出其它不同形式的变化或变动。这里无需也无法对所有的实施方式予以穷举。凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明权利要求的保护范围之内。
