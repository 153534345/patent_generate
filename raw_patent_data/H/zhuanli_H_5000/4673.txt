标题title
记录在线学习时长的方法及相关设备
摘要abst
本申请提供一种记录在线学习时长的方法及相关设备，所述方法包括：接收第一请求消息，所述第一请求消息包含第一用户唯一标识和第一客户端随机码；控制第一客户端进行在线学习，并记录第一学习时长；接收第二请求消息，所述第二请求消息包含第二用户唯一标识和第二客户端随机码；当两个用户唯一标识相同，且两个客户端随机码不同时，停止第一客户端的在线学习和第一学习时长的记录，控制第二客户端进行在线学习，并记录第二学习时长；将第一学习时长和第二学习时长之和作为所述第一用户唯一标识对应的目标用户的在线学习时长。保证了同一用户在同一时间只能在一个客户端进行在线学习，准确且便捷的记录用户的在线学习时长。
权利要求书clms
1.一种记录在线学习时长的方法，其特征在于，包括：接收第一请求消息，所述第一请求消息包含第一用户唯一标识和第一客户端随机码；控制所述第一客户端随机码对应的第一客户端进行在线学习，并记录第一学习时长；接收第二请求消息，所述第二请求消息包含第二用户唯一标识和第二客户端随机码；响应于确定所述第一用户唯一标识与所述第二用户唯一标识相同，且所述第一客户端随机码与所述第二客户端随机码不同，停止所述第一客户端的在线学习和所述第一学习时长的记录，控制所述第二客户端随机码对应的第二客户端进行在线学习，并记录第二学习时长；将所述第一学习时长和所述第二学习时长之和作为所述第一用户唯一标识对应的目标用户的在线学习时长。2.根据权利要求1所述的记录在线学习时长的方法，其特征在于，所述控制所述第一客户端随机码对应的第一客户端进行在线学习，并记录第一学习时长，包括：向所述第一客户端发送第一请求成功信息，以控制所述第一客户端进行在线学习；建立与所述第一客户端连接的第一消息通道，并根据所述第一消息通道接收的数据，确定所述第一学习时长。3.根据权利要求2所述的记录在线学习时长的方法，其特征在于，所述根据所述第一消息通道接收的数据，确定所述第一学习时长，包括：通过所述第一消息通道接收所述第一客户端发送的第一初始时刻；每间隔一定的时长接收所述第一客户端发送的第一时刻；使用最新接收到的所述第一时刻减去所述第一初始时刻，得到所述第一学习时长。4.根据权利要求2所述的记录在线学习时长的方法，其特征在于，所述停止所述第一客户端的在线学习和所述第一学习时长的记录，包括：向所述第一客户端发送断开信息，以停止所述第一客户端的在线学习；断开与所述第一客户端之间的所述第一消息通道，以停止所述第一学习时长的记录。5.根据权利要求4所述的记录在线学习时长的方法，其特征在于，所述向所述第一客户端发送断开信息之后，还包括：通过所述第一消息通道接收所述第一客户端发送的第三时刻；使用所述第三时刻减去所述第一初始时刻，得到所述第一学习时长。6.根据权利要求1所述的记录在线学习时长的方法，其特征在于，所述控制所述第二客户端随机码对应的第二客户端进行在线学习，并记录第二学习时长，包括：向所述第二客户端发送第二请求成功信息，以控制所述第二客户端进行在线学习；建立与所述第二客户端连接的第二消息通道，并根据所述第二消息通道接收的数据，确定所述第二学习时长。7.根据权利要求6所述的记录在线学习时长的方法，其特征在于，所述根据所述第二消息通道接收的数据，确定所述第二学习时长，包括：通过所述第二消息通道接收所述第二客户端发送的第二初始时刻；每间隔一定的时长接收所述第二客户端发送的第二时刻；使用最新接收到的所述第二时刻减去所述第二初始时刻，得到所述第二学习时长。8.一种记录在线学习时长的装置，其特征在于，包括：第一消息接收模块，被配置为接收第一请求消息，所述第一请求消息包含第一用户唯一标识和第一客户端随机码；第一学习模块，被配置为控制所述第一客户端随机码对应的第一客户端进行在线学习，并记录第一学习时长；第二消息接收模块，被配置为接收第二请求消息，所述第二请求消息包含第二用户唯一标识和第二客户端随机码；第二学习模块，被配置为响应于确定所述第一用户唯一标识与所述第二用户唯一标识相同，且所述第一客户端随机码与所述第二客户端随机码不同，停止所述第一客户端的在线学习和所述第一学习时长的记录，控制所述第二客户端随机码对应的第二客户端进行在线学习，并记录第二学习时长；时长模块，被配置为将所述第一学习时长和所述第二学习时长之和作为所述第一用户唯一标识对应的目标用户的在线学习时长。9.一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求1至7任意一项所述的方法。10.一种非暂态计算机可读存储介质，所述非暂态计算机可读存储介质存储计算机指令，其特征在于，所述计算机指令用于使所述计算机实现权利要求1至7任一项所述的方法。
说明书desc
技术领域本申请涉及线上教育技术领域，尤其涉及一种记录在线学习时长的方法及相关设备。背景技术在教育信息化场景中，学员在学习平台上进行直播或点播课程的学习时，后台通常会对该过程进行数据统计和分析，其中，学习时长是一项重要的学习数据。若学员使用同一账户同时打开多个客户端，学习时长的记录会产生叠加。当学员使用多个客户端同时播放来刷学时，影响了学习效果。因此，在线学习时长的记录过程中，需要排除多端播放的影响。但是，在相关技术中对于多端同时学习问题的处理方式较为繁琐，多端互斥有一定的延迟，非实时响应。对于学习时长的记录也较为复杂，效率不高，对于时长的记录准确性低，容易产生播放时长重复累加的问题。发明内容有鉴于此，本申请的目的在于提出一种记录在线学习时长的方法及相关设备，以此提供一种多端互斥响应及时，学习时长记录便捷，适用于直播课和视频课的记录在线学习时长的方法。基于上述目的，本申请提供了一种记录在线学习时长的方法，包括：接收第一请求消息，所述第一请求消息包含第一用户唯一标识和第一客户端随机码；控制所述第一客户端随机码对应的第一客户端进行在线学习，并记录第一学习时长；接收第二请求消息，所述第二请求消息包含第二用户唯一标识和第二客户端随机码；响应于确定所述第一用户唯一标识与所述第二用户唯一标识相同，且所述第一客户端随机码与所述第二客户端随机码不同，停止所述第一客户端的在线学习和所述第一学习时长的记录，控制所述第二客户端随机码对应的第二客户端进行在线学习，并记录第二学习时长；将所述第一学习时长和所述第二学习时长之和作为所述第一用户唯一标识对应的目标用户的在线学习时长。在一些实施方式中，所述控制所述第一客户端随机码对应的第一客户端进行在线学习，并记录第一学习时长，包括：向所述第一客户端发送第一请求成功信息，以控制所述第一客户端进行在线学习；建立与所述第一客户端连接的第一消息通道，并根据所述第一消息通道接收的数据，确定所述第一学习时长。在一些实施方式中，所述根据所述第一消息通道接收的数据，确定所述第一学习时长，包括：通过所述第一消息通道接收所述第一客户端发送的第一初始时刻；每间隔一定的时长接收所述第一客户端发送的第一时刻；使用最新接收到的所述第一时刻减去所述第一初始时刻，得到所述第一学习时长。在一些实施方式中，所述停止所述第一客户端的在线学习和所述第一学习时长的记录，包括：向所述第一客户端发送断开信息，以停止所述第一客户端的在线学习；断开与所述第一客户端之间的所述第一消息通道，以停止所述第一学习时长的记录。在一些实施方式中，所述向所述第一客户端发送断开信息之后，还包括：通过所述第一消息通道接收所述第一客户端发送的第三时刻；使用所述第三时刻减去所述第一初始时刻，得到所述第一学习时长。在一些实施方式中，所述控制所述第二客户端随机码对应的第二客户端进行在线学习，并记录第二学习时长，包括：向所述第二客户端发送第二请求成功信息，以控制所述第二客户端进行在线学习；建立与所述第二客户端连接的第二消息通道，并根据所述第二消息通道接收的数据，确定所述第二学习时长。在一些实施方式中，所述根据所述第二消息通道接收的数据，确定所述第二学习时长，包括：通过所述第二消息通道接收所述第二客户端发送的第二初始时刻；每间隔一定的时长接收所述第二客户端发送的第二时刻；使用最新接收到的所述第二时刻减去所述第二初始时刻，得到所述第二学习时长。基于同一构思，本申请还提供了一种记录在线学习时长的装置，包括：第一消息接收模块，被配置为接收第一请求消息，所述第一请求消息包含第一用户唯一标识和第一客户端随机码；第一学习模块，被配置为控制所述第一客户端随机码对应的第一客户端进行在线学习，并记录第一学习时长；第二消息接收模块，被配置为接收第二请求消息，所述第二请求消息包含第二用户唯一标识和第二客户端随机码；第二学习模块，被配置为响应于确定所述第一用户唯一标识与所述第二用户唯一标识相同，且所述第一客户端随机码与所述第二客户端随机码不同，停止所述第一客户端的在线学习和所述第一学习时长的记录，控制所述第二客户端随机码对应的第二客户端进行在线学习，并记录第二学习时长；时长模块，被配置为将所述第一学习时长和所述第二学习时长之和作为所述第一用户唯一标识对应的目标用户的在线学习时长。基于同一构思，本申请还提供了一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现如上任一项所述的方法。基于同一构思，本申请还提供了一种非暂态计算机可读存储介质，所述非暂态计算机可读存储介质存储计算机指令，所述计算机指令用于使所述计算机实现如上任一项所述的方法。从上面所述可以看出，本申请提供的记录在线学习时长的方法及相关设备，当接收到第一请求消息时，获取第一请求消息带有的第一用户唯一标识和第一客户端随机码；控制第一客户端随机码对应的第一客户端进行在线学习，并记录第一学习时长；当接收到第二请求消息时，获取第二请求消息带有的第二用户唯一标识和第二客户端随机码；当第一用户唯一标识与第二用户唯一标识相同，且第一客户端随机码与第二客户端随机码不同时，停止第一客户端的在线学习和第一学习时长的记录，控制第二客户端随机码对应的第二客户端进行在线学习，并记录第二学习时长；将第一学习时长和第二学习时长之和作为第一用户唯一标识对应的目标用户的在线学习时长。从而在进行在线学习的过程中，能够根据用户唯一标识和客户端随机码判断同一用户是否打开了另一个客户端进行学习，避免了同一用户同时打开多个客户端进行在线学习。在停止客户端的在线学习的同时也停止了该客户端学习时长的记录，响应迅速，保证了同一时间只能记录一个客户端的学习时长，从而避免了学习时长的重复累加。将同一用户在各个客户端上学习的时长相加，得到总的学习时长，能够准确且便捷的记录用户的在线学习时长。附图说明为了更清楚地说明本申请或相关技术中的技术方案，下面将对实施例或相关技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例的记录在线学习时长的方法流程图；图2为本申请实施例的客户端与服务器交互示意图；图3为本申请实施例的记录在线学习时长的装置示意图；图4为本申请实施例的电子设备结构示意图。具体实施方式为使本申请的目的、技术方案和优点更加清楚明白，以下结合具体实施例，并参照附图，对本申请进一步详细说明。需要说明的是，除非另外定义，本申请实施例使用的技术术语或者科学术语应当为本申请所属领域内具有一般技能的人士所理解的通常意义。本申请实施例中使用的“第一”、“第二”以及类似的词语并不表示任何顺序、数量或者重要性，而只是用来区分不同的组成部分。“包括”或者“包含”等类似的词语意指出现该词前面的元件或者物件涵盖出现在该词后面列举的元件或者物件及其等同，而不排除其他元件或者物件。“连接”或者“相连”等类似的词语并非限定于物理的或者机械的连接，而是可以包括电性的连接，不管是直接的还是间接的。如背景技术部分所述，在师训平台中，用户使用师训平台进行直播或点播课程的学习，需要对该过程进行数据统计分析，其中学习时长是一项重要的学习数据。为了防止用户使用同一账户，同时打开多个客户端，来刷学时，影响培训效果，因此需要对多端学习场景进行处理。相关技术中，对于多端播放的处理，通过客户端不断轮询与服务端协同工作，判断是否一个用户同时在多个浏览器观看视频课。但是相关技术中处理多端播放视频的方法过于繁琐，处理不及时。通过生成时间戳的方式判断是否打开了另一个播放页面，这种处理方式需要不断地进行时间戳的生成以及间隔时间的计算。当已经打开了第二个客户端进行学习，但是还没有到计算间隔时间的时候，则不能及时发现第二个播放页面，处理多端问题发生了延时。对于多端的处理方式过于复杂，计算方式繁琐，响应存在延迟。相关技术中对于发生多端播放时的总播放时长的计算方式也更为繁琐。时长的计算不仅需要根据视频的播放和停止进行记录，还要根据时间间隔是否符合预定的时间间隔进行判断。所以在进行时长的记录时，需要通过不断地接收计算出的时间间隔来进行判断是否继续记录时长。这种时长记录方式不仅繁琐，并且在多端处理问题上出现延迟时，时长的记录也会相应的发生延迟。在打开第二客户端进行视频播放时，可能发现多端问题不及时，第一客户端的时长还在记录，同时第二客户端也开始记录时长，两个客户端的播放时长产生叠加，导致总时长的记录产生误差，准确性低。有鉴于此，本说明书一个或多个实施例提供了一种记录在线学习时长的方案，该方案在进行在线学习的过程中，能够根据用户唯一标识和客户端随机码判断同一用户是否打开了另一个客户端进行学习，避免了同一用户同时打开多个客户端进行在线学习。在停止客户端的在线学习的同时也停止了该客户端学习时长的记录，响应迅速，保证了同一时间只能记录一个客户端的学习时长，从而避免了学习时长的重复累加。将同一用户在各个客户端上学习的时长相加，得到总的学习时长，能够准确且便捷的记录用户的在线学习时长。下面对本申请各具体实施例的技术方案进行说明。参考图1，本说明书一个实施例的记录在线学习时长的方法，包括以下步骤：步骤S101、接收第一请求消息，所述第一请求消息包含第一用户唯一标识和第一客户端随机码。在本步骤中，接收到第一请求消息后，获取第一请求消息中的第一用户唯一标识和第一客户端随机码。第一用户唯一标识在用户登陆后产生，用户唯一标识是用户的身份信息。根据用户唯一标识能够区分每个用户，在记录其他的数据时，避免了数据记录的交叉错误。当用户打开第一客户端后，生成第一客户端随机码。客户端随机码是客户端的标识信息，可根据客户端随机码确定客户端。因此，根据第一请求消息即可确定用户和客户端。作为一个具体的应用场景，用户打开学习平台，输入账号密码进行登录，获取了用户信息，根据用户信息生成用户唯一标识。创建session会话，将用户信息和用户唯一标识存储至session会话中。每个用户进行登录时都会创建一个相应的session会话，一个session会话与一个用户相对应，避免了信息记录错乱。当用户退出登陆时，相应的session会话也会消失。用户登陆后打开视频播放页面进行在线学习，打开的客户端会产生一个客户端随机码，将客户端随机码进行存储，用以标记客户端。向服务器发送请求消息时，找到存储的用户唯一标识和客户端随机码，作为请求参数放至请求消息中一同发送至服务器。步骤S102、控制所述第一客户端随机码对应的第一客户端进行在线学习，并记录第一学习时长。在本步骤中，记录了第一请求信息中的第一用户唯一标识和第一客户端随机码，根据第一客户端随机码确定相对应的第一客户端，该第一客户端即可获得相应的在线学习的权限。在第一客户端进行在线学习的同时，服务器会记录在第一客户端的第一学习时长。在线学习可以是直播课学习，也可以是录播课学习。步骤S103、接收第二请求消息，所述第二请求消息包含第二用户唯一标识和第二客户端随机码。在本步骤中，接收到第二请求消息后，获取第二请求消息中的第二用户唯一标识和第二客户端随机码，用以标记用户和客户端。步骤S104、响应于确定所述第一用户唯一标识与所述第二用户唯一标识相同，且所述第一客户端随机码与所述第二客户端随机码不同，停止所述第一客户端的在线学习和所述第一学习时长的记录，控制所述第二客户端随机码对应的第二客户端进行在线学习，并记录第二学习时长。在本步骤中，在进行记录第二请求消息中包含的第二用户唯一标识和第二客户端随机码时，服务器发现已经记录过用户唯一标识和客户端随机码。因此，将第一用户唯一标识和第二用户唯一标识进行对比，相同的用户唯一标识，就会被当作是相同的一个用户。并将第一客户端随机码和第二客户端随机码进行对比，客户端随机码是客户端的标识信息，不同的客户端的随机码不同。若第一用户唯一标识和第二用户唯一标识相同，则说明是同一个用户。且第一客户端随机码与第二客户端随机码不同，则说明是两个不同的客户端。通过对比两次请求信息中的用户唯一标识和客户端随机码可以判断是否一个用户同时打开了两个客户端，这种判断方式处理简单，响应迅速。确定同一个用户打开了第二个客户端，为了避免多端进行在线学习，则停止第一客户端的在线学习，并停止第一学习时长的记录。同时记录第二请求信息中的第二用户唯一标识和第二客户端随机码，根据第二客户端随机码确定相对应的第二客户端，该第二客户端获得相应的学习权限。在第二客户端进行在线学习的同时，服务器会记录在第二客户端的第二学习时长。产生多端问题时，停止前一个客户端的学习，开始在新的客户端进行在线学习，避免了播放时的多端冲突。其中，第二客户端可以是与第一客户端位于同一浏览器的不同页签，也可以是与第一客户端位于不同浏览器的页签，也可以是H5客户端，在此不做具体限定。步骤S105、将所述第一学习时长和所述第二学习时长之和作为所述第一用户唯一标识对应的目标用户的在线学习时长。在本步骤中，总在线学习时长的计算是根据用户唯一标识确定同一用户，分别记录在不同客户端上的学习时长，再将同一用户在各个客户端上的学习时长进行累加，得到总的学习时长，能够更加简便的记录在线学习时长。在一个具体的实施场景中，参考图2，给出了服务器和客户端进行交互的过程。用户登录学习平台，打开第一客户端进行在线学习。打开第一客户端后需要向服务器发送第一请求信息，请求开始播放视频。第一请求信息包含的参数为第一用户唯一标识和第一客户端随机码。服务器接收到第一请求消息后，记录第一用户唯一标识和第一客户端随机码，向第一客户端做出回应。第一客户端接收到第一请求成功消息后开始播放视频，同时本地记录学习时长。在第一客户端播放视频的过程中，不断地向服务器上报第一学习时长，服务器对第一学习时长进行更新和记录。当用户打开了另一个客户端后，第二客户端进行视频播放前也需要向服务器发送请求信息，请求开始播放视频。第二请求信息包含的参数为第二用户唯一标识和第二客户端随机码。服务器接收到第二请求消息后进行第二用户唯一标识和第二客户端随机码的记录。在记录过程中服务器发现已经存在用户唯一标识和客户端随机码，则对两个用户唯一标识和客户端随机码进行对比，判断是否同一用户打开了两个客户端进行在线学习。当发现用户唯一标识相同且客户端随机码不同时，则说明同一用户同时打开了两个客户端。此时服务器需要对两个客户端做出回应，保留一个客户端继续进行在线学习。因此向第一客户端发送断开信息，停止第一客户端的在线学习，同时停止第一客户端学习时长的记录。在第一客户端停止视频播放的同时向服务器发送视频终止时的学习时长，得到了用户在第一客户端上学习的总时长。向第二客户端发送第二请求成功信息，第二客户端接收到第二请求成功信息后开始播放学习视频，同时记录第二学习时长。在第二客户端进行在线学习的过程中，不断地向服务器上报第二学习时长，服务器对第二学习时长进行更新和记录。从上面所述可以看出，本申请实施例在进行在线学习的过程中，能够根据用户唯一标识和客户端随机码判断同一用户是否打开了另一个客户端进行学习，避免了同一用户同时打开多个客户端进行在线学习。在停止客户端的在线学习的同时也停止了该客户端学习时长的记录，响应迅速，保证了同一时间只能记录一个客户端的学习时长，从而避免了学习时长的重复累加。将同一用户在各个客户端上学习的时长相加，得到总的学习时长，能够准确且便捷的记录用户的在线学习时长。在一些实施例中，控制所述第一客户端随机码对应的第一客户端进行在线学习，并记录第一学习时长，包括：向所述第一客户端发送第一请求成功信息，以控制所述第一客户端进行在线学习。建立与所述第一客户端连接的第一消息通道，并根据所述第一消息通道接收的数据，确定所述第一学习时长。在本实施例中，向第一客户端发送第一请求成功信息，第一客户端接收到第一请求成功信息后开始播放学习视频。学习视频可以是客户端本地的录播课，也可以是直播课，在此不做具体限定。同时建立与第一客户端连接的第一消息通道，第一客户端本地记录第一学习时长数据。服务器与第一客户端之间建立第一消息通道，第一消息通道的两个端口分别连接到服务器和第一客户端。第一消息通道在进行第一学习时长的传输时，符合消息协议。在传输过程中，传输效率更高，响应及时。在第一客户端进行在线学习的过程中，第一消息通道一直保持连接状态，第一学习时长可以直接通过消息通道传输至服务器。第一客户端进行在线学习时，第一消息通道一直存在，在进行第一学习时长的记录时，不需要进行判断是否继续记录第一学习时长，可直接通过第一消息通道进行发送。在进行第一学习时长的传输时，第一客户端不需要每次都向服务器发送消息传输请求，减少了响应时间。在进行在线学习的过程中，通过第一消息通道接收第一学习时长数据，根据第一学习时长数据确定第一学习时长。对于第一学习时长的记录，可以是第一客户端本地直接记录在第一客户端的学习时长，每间隔一定的时长向服务器发送第一学习时长。也可以是以在第一客户端进行在线学习为起始，提前设置固定的间隔时长，第一客户端每间隔固定的时长向服务器发送时长记录消息，服务器接到请求后在原有的时长上进行累加，每收到一次时长记录消息就累加一个固定间隔时长，得到第一学习时长。对于第一学习时长的记录方式，在此不做具体限定。在一些实施例中，根据所述第一消息通道接收的数据，确定所述第一学习时长，包括：通过所述第一消息通道接收所述第一客户端发送的第一初始时刻。每间隔一定的时长接收所述第一客户端发送的第一时刻。使用最新接收到的所述第一时刻减去所述第一初始时刻，得到所述第一学习时长。在本实施例中，对于根据第一消息通道接收的数据，确定第一学习时长可以是在第一客户端上开始进行在线学习时，通过第一消息通道接收第一客户端发送的第一初始时刻，第一初始时刻为开始在第一客户端上进行在线学习的时刻。每间隔一定的时长接收第一客户端发送的第一时刻，第一时刻是不断更新的。用最新接收到的第一时刻减去第一初始时刻，得到第一学习时长，不断更新第一学习时长。每间隔一定的时长接收第一客户端发送的第一时刻，能够确保在线学习没有断开。根据接收到的最新第一时刻减去第一初始时刻，计算时长的方式更加快捷。并且第一学习时长的记录不会受到之前接收到的第一时刻的影响，在数据传输过程中发生错误时不会影响到最新的第一学习时长，记录的第一学习时长具有更高的准确性。在一些实施例中，停止所述第一客户端的在线学习和所述第一学习时长的记录，包括：向所述第一客户端发送断开信息，以停止所述第一客户端的在线学习。断开与所述第一客户端之间的所述第一消息通道，以停止所述第一学习时长的记录。在本实施例中，第一客户端接收到断开信息后，停止第一客户端的在线学习。同时断开第一消息通道，第一消息通道断开后，第一客户端不能继续向服务器上报学习时长，保证了第一客户端停止在线学习的同时停止了第一学习时长的记录。断开第一消息通道后，如果第一客户端还在记录学习时长，在上报服务器时已经断开了与服务器连接的第一消息通道，时长不能继续上传。因此，避免了第一学习时长继续上报的问题，使第一学习时长的记录更加准确，避免了多个客户端学习时长重复记录的问题。在一些实施例中，向所述第一客户端发送断开信息之后，还包括：通过所述第一消息通道接收所述第一客户端发送的第三时刻。使用所述第三时刻减去所述第一初始时刻，得到所述第一学习时长。在本实施例中，第一客户端接收到断开信息后，向服务器上报第三时刻，第三时刻为第一客户端停止在线学习的终止时刻。用第三时刻减去第一初始时刻得到最终的第一学习时长。得到的第一学习时长为用户在第一客户端学习的总时长，用于与该用户在其他客户端上学习的时长进行累加，得到用户的总学习时长。在一些实施例中，控制所述第二客户端随机码对应的第二客户端进行在线学习，并记录第二学习时长，包括：向所述第二客户端发送第二请求成功信息，以控制所述第二客户端进行在线学习。建立与所述第二客户端连接的第二消息通道，并根据所述第二消息通道接收的数据，确定所述第二学习时长。在本实施例中，向第二客户端发送第二请求成功信息，第二客户端接收到第二请求成功信息后开始播放学习视频。学习视频可以是客户端本地的录播课，也可以是直播课，在此不做具体限制。同时建立于第二客户端连接的第二消息通道，第二客户端本地记录第二学习时长数据。服务器与第二客户端之间建立第二消息通道，第二消息通道的两个端口分别连接到服务器和第二客户端。第二消息通道在进行第二学习时长的传输时，符合消息协议。在第二客户端进行在线学习的过程中，第二消息通道一直保持连接状态，第二学习时长可以直接通过消息通道传输至服务器，不需要进行判断是否继续记录第二学习时长。在进行第二学习时长的传输时，第二客户端不需要每次都向服务器发送消息传输请求，减少了响应时间。在进行在线学习的过程中，通过第二消息通道接收第二学习时长数据，根据第二学习时长数据确定第二学习时长。对于第二学习时长的记录，可以是第二客户端本地直接记录在第二客户端的学习时长，每间隔一定的时长向服务器发送第二学习时长。也可以是以在第二客户端进行在线学习为起始，提前设置固定的间隔时长，第二客户端每间隔固定的时长向服务器发送时长记录消息，服务器接到请求后在原有的时长上进行累加，每收到一次时长记录消息就累加一个固定间隔时长。对于第二学习时长的记录方式，在此不做具体限定。在一些实施例中，根据所述第二消息通道接收的数据，确定所述第二学习时长，包括：通过所述第二消息通道接收所述第二客户端发送的第二初始时刻。每间隔一定的时长接收所述第二客户端发送的第二时刻。使用最新接收到的所述第二时刻减去所述第二初始时刻，得到所述第二学习时长。在本实施例中，对于根据第二消息通道接收的数据，确定第二学习时长可以是在第二客户端上开始进行在线学习时，通过第二消息通道接收第二客户端发送的第二初始时刻，第二初始时刻为开始在第二客户端上进行在线学习的时刻。每间隔一定的时长接收第二客户端发送的第二时刻，第二时刻是不断更新的。用最新接收到的第二时刻减去第二初始时刻，得到第二学习时长，不断更新第二学习时长。每间隔一定的时长接收第二客户端发送的第二时刻，能够确保在线学习没有断开。根据接收到的最新第二时刻减去第二初始时刻，计算时长的方式更加快捷。并且第二学习时长的记录不会受到之前接收到的第二时刻的影响，在数据传输过程中发生错误时不会影响到最新的第二学习时长，记录的第二学习时长具有更高的准确性。需要说明的是，本申请实施例的方法可以由单个设备执行，例如一台计算机或服务器等。本实施例的方法也可以应用于分布式场景下，由多台设备相互配合来完成。在这种分布式场景的情况下，这多台设备中的一台设备可以只执行本申请实施例的方法中的某一个或多个步骤，这多台设备相互之间会进行交互以完成所述的方法。需要说明的是，上述对本申请的一些实施例进行了描述。其它实施例在所附权利要求书的范围内。在一些情况下，在权利要求书中记载的动作或步骤可以按照不同于上述实施例中的顺序来执行并且仍然可以实现期望的结果。另外，在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。基于同一发明构思，与上述任意实施例方法相对应的，本申请还提供了一种记录在线学习时长的装置。参考图3，所述记录在线学习时长的装置，包括：第一消息接收模块301，被配置为接收第一请求消息，所述第一请求消息包含第一用户唯一标识和第一客户端随机码；第一学习模块302，被配置为控制所述第一客户端随机码对应的第一客户端进行在线学习，并记录第一学习时长；第二消息接收模块303，被配置为接收第二请求消息，所述第二请求消息包含第二用户唯一标识和第二客户端随机码；第二学习模块304，被配置为响应于确定所述第一用户唯一标识与所述第二用户唯一标识相同，且所述第一客户端随机码与所述第二客户端随机码不同，停止所述第一客户端的在线学习和所述第一学习时长的记录，控制所述第二客户端随机码对应的第二客户端进行在线学习，并记录第二学习时长；时长模块305，被配置为将所述第一学习时长和所述第二学习时长之和作为所述第一用户唯一标识对应的目标用户的在线学习时长。作为一个可选的实施例，第一学习模块302，还被配置为：向所述第一客户端发送第一请求成功信息，以控制所述第一客户端进行在线学习；建立与所述第一客户端连接的第一消息通道，并根据所述第一消息通道接收的数据，确定所述第一学习时长。作为一个可选的实施例，第一学习模块302，还被配置为：通过所述第一消息通道接收所述第一客户端发送的第一初始时刻；每间隔一定的时长接收所述第一客户端发送的第一时刻；使用最新接收到的所述第一时刻减去所述第一初始时刻，得到所述第一学习时长。作为一个可选的实施例，第二学习模块304，还被配置为：向所述第一客户端发送断开信息，以停止所述第一客户端的在线学习；断开与所述第一客户端之间的所述第一消息通道，以停止所述第一学习时长的记录。作为一个可选的实施例，第二学习模块304，还被配置为：通过所述第一消息通道接收所述第一客户端发送的第三时刻；使用所述第三时刻减去所述第一初始时刻，得到所述第一学习时长。作为一个可选的实施例，第二学习模块304，还被配置为：向所述第二客户端发送第二请求成功信息，以控制所述第二客户端进行在线学习；建立与所述第二客户端连接的第二消息通道，并根据所述第二消息通道接收的数据，确定所述第二学习时长。作为一个可选的实施例，第二学习模块304，还被配置为：通过所述第二消息通道接收所述第二客户端发送的第二初始时刻；每间隔一定的时长接收所述第二客户端发送的第二时刻；使用最新接收到的所述第二时刻减去所述第二初始时刻，得到所述第二学习时长。为了描述的方便，描述以上装置时以功能分为各种模块分别描述。当然，在实施本申请时可以把各模块的功能在同一个或多个软件和/或硬件中实现。上述实施例的装置用于实现前述任一实施例中相应的记录在线学习时长的方法，并且具有相应的方法实施例的有益效果，在此不再赘述。基于同一发明构思，与上述任意实施例方法相对应的，本申请还提供了一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现上任意一实施例所述的记录在线学习时长的方法。图4示出了本实施例所提供的一种更为具体的电子设备硬件结构示意图，该设备可以包括：处理器410、存储器420、输入/输出接口430、通信接口440和总线450。其中处理器410、存储器420、输入/输出接口430和通信接口1040通过总线450实现彼此之间在设备内部的通信连接。处理器410可以采用通用的CPU、微处理器、应用专用集成电路、或者一个或多个集成电路等方式实现，用于执行相关程序，以实现本说明书实施例所提供的技术方案。存储器420可以采用ROM、RAM、静态存储设备，动态存储设备等形式实现。存储器420可以存储操作系统和其他应用程序，在通过软件或者固件来实现本说明书实施例所提供的技术方案时，相关的程序代码保存在存储器420中，并由处理器410来调用执行。输入/输出接口430用于连接输入/输出模块，以实现信息输入及输出。输入输出/模块可以作为组件配置在设备中，也可以外接于设备以提供相应功能。其中输入设备可以包括键盘、鼠标、触摸屏、麦克风、各类传感器等，输出设备可以包括显示器、扬声器、振动器、指示灯等。通信接口440用于连接通信模块，以实现本设备与其他设备的通信交互。其中通信模块可以通过有线方式实现通信，也可以通过无线方式实现通信。总线450包括一通路，在设备的各个组件之间传输信息。需要说明的是，尽管上述设备仅示出了处理器410、存储器420、输入/输出接口430、通信接口440以及总线450，但是在具体实施过程中，该设备还可以包括实现正常运行所必需的其他组件。此外，本领域的技术人员可以理解的是，上述设备中也可以仅包含实现本说明书实施例方案所必需的组件，而不必包含图中所示的全部组件。上述实施例的电子设备用于实现前述任一实施例中相应的记录在线学习时长的方法，并且具有相应的方法实施例的有益效果，在此不再赘述。基于同一发明构思，与上述任意实施例方法相对应的，本申请还提供了一种非暂态计算机可读存储介质，所述非暂态计算机可读存储介质存储计算机指令，所述计算机指令用于使所述计算机执行如上任一实施例所述的记录在线学习时长的方法。本实施例的计算机可读介质包括永久性和非永久性、可移动和非可移动媒体可以由任何方法或技术来实现信息存储。信息可以是计算机可读指令、数据结构、程序的模块或其他数据。计算机的存储介质的例子包括，但不限于相变内存、静态随机存取存储器、动态随机存取存储器、其他类型的随机存取存储器、只读存储器、电可擦除可编程只读存储器、快闪记忆体或其他内存技术、只读光盘只读存储器、数字多功能光盘或其他光学存储、磁盒式磁带，磁带磁磁盘存储或其他磁性存储设备或任何其他非传输介质，可用于存储可以被计算设备访问的信息。上述实施例的存储介质存储的计算机指令用于使所述计算机执行如上任一实施例所述的记录在线学习时长的方法，并且具有相应的方法实施例的有益效果，在此不再赘述。所属领域的普通技术人员应当理解：以上任何实施例的讨论仅为示例性的，并非旨在暗示本申请的范围被限于这些例子；在本申请的思路下，以上实施例或者不同实施例中的技术特征之间也可以进行组合，步骤可以以任意顺序实现，并存在如上所述的本申请实施例的不同方面的许多其它变化，为了简明它们没有在细节中提供。另外，为简化说明和讨论，并且为了不会使本申请实施例难以理解，在所提供的附图中可以示出或可以不示出与集成电路芯片和其它部件的公知的电源/接地连接。此外，可以以框图的形式示出装置，以便避免使本申请实施例难以理解，并且这也考虑了以下事实，即关于这些框图装置的实施方式的细节是高度取决于将要实施本申请实施例的平台的。在阐述了具体细节以描述本申请的示例性实施例的情况下，对本领域技术人员来说显而易见的是，可以在没有这些具体细节的情况下或者这些具体细节有变化的情况下实施本申请实施例。因此，这些描述应被认为是说明性的而不是限制性的。尽管已经结合了本申请的具体实施例对本申请进行了描述，但是根据前面的描述，这些实施例的很多替换、修改和变型对本领域普通技术人员来说将是显而易见的。例如，其它存储器架构)可以使用所讨论的实施例。本申请实施例旨在涵盖落入所附权利要求的宽泛范围之内的所有这样的替换、修改和变型。因此，凡在本申请实施例的精神和原则之内，所做的任何省略、修改、等同替换、改进等，均应包含在本申请的保护范围之内。
