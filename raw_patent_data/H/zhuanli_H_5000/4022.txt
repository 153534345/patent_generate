标题title
设备轮询方法、装置、电子设备及存储介质
摘要abst
本申请实施例公开了一种设备轮询方法、装置、电子设备及存储介质。所述轮询方法包括：获取第一设备的设备信息；其中，所述设备信息至少包括：所述第一设备的设备地址，所述第一设备为与数据转换单元DTU连接的设备，所述DTU与所述物联网平台连接；根据所述设备信息以及服务需求，确定轮询指令；其中，所述轮询指令包括：待轮询第二设备的设备地址；根据所述轮询指令包含的设备地址，通过所述DTU向至少一个所述第二设备发送查询请求；接收所述第二设备基于所述查询请求返回的数据。如此，通过物联网平台配置轮询指令，再将配置好的轮询指令发送给DTU执行，能够在DTU连接多个设备的同时，通过DTU轮询获取每个设备的数据。
权利要求书clms
1.一种设备轮询方法，其特征在于，应用于物联网平台，所述设备轮询方法包括：获取第一设备的设备信息；其中，所述设备信息至少包括：所述第一设备的设备地址，所述第一设备为与数据转换单元DTU连接的设备，所述DTU与所述物联网平台连接；根据所述设备信息以及服务需求，确定轮询指令；其中，所述轮询指令包括：待轮询第二设备的设备地址；根据所述轮询指令包含的设备地址，通过所述DTU向至少一个所述第二设备发送查询请求；接收所述第二设备基于所述查询请求返回的数据。2.根据权利要求1所述的方法，其特征在于，所述轮询指令还包括：设备参数；其中，所述设备参数，用于指示所述DTU需要获取的数据。3.根据权利要求2所述的方法，其特征在于，所述设备参数包括以下至少之一：功能名称；功能标识；寄存器地址；寄存器数量。4.根据权利要求1所述的方法，其特征在于，所述方法还包括：根据所述第一设备在所述物联网平台上的注册信息，获取所述第一设备与所述DTU之间的关联信息；根据所述关联信息，确定所述第一设备的设备地址。5.根据权利要求1所述的方法，其特征在于，所述方法还包括：根据所述服务需求，确定在当前时刻后的预设时刻后执行的所述轮询指令；根据所述预设时刻，设置在所述预设时刻后执行的所述轮询指令的触发条件；其中，所述轮询指令还包括：所述触发条件的条件信息。6.根据权利要求1所述的方法，其特征在于，所述设备信息，还包括以下至少之一：设备类型；设备编号；设备名称；设备状态。7.一种设备轮询方法，其特征在于，应用于数据转换单元DTU，所述DTU与物联网平台连接，所述设备轮询方法包括：接收来自所述物联网平台的轮询指令，其中，所述轮询指令包括：待轮询第一设备的设备地址，所述第一设备为与所述DTU连接的设备；根据所述轮询指令包含的设备地址，向至少一个所述第一设备发送查询请求；接收所述第一设备基于所述查询请求返回的数据；转发所述第一设备返回的数据至所述物联网平台。8.根据权利要求7所述的方法，其特征在于，所述轮询指令还包括：设备参数；其中，所述设备参数，用于指示所述DTU需要获取的数据。9.根据权利要求8所述的方法，其特征在于，所述设备参数包括以下至少之一：功能名称；功能标识；寄存器地址；寄存器数量。10.根据权利要求7所述的方法，其特征在于，所述接收来自所述物联网平台的轮询指令，包括：接收来自所述物联网平台的在当前时刻后的预设时刻后执行的所述轮询指令；其中，所述轮询指令还包括：条件信息，用于指示所述轮询指令的触发条件。11.一种设备轮询装置，其特征在于，所述设备轮询装置包括：第一获取模块，用于获取第一设备的设备信息；其中，所述设备信息至少包括：所述第一设备的设备地址，所述第一设备为与数据转换单元DTU连接的设备，所述DTU与物联网平台连接；第一确定模块，用于根据所述设备信息以及服务需求，确定轮询指令；其中，所述轮询指令包括：本次待轮询第二设备的设备地址；发送模块，用于根据所述轮询指令包含的设备地址，通过所述DTU向至少一个所述第二设备发送查询请求；接收模块，用于接收所述第二设备基于所述查询请求返回的数据。12.一种设备轮询装置，其特征在于，所述设备轮询装置包括：第一接收模块，用于接收来自物联网平台的轮询指令，其中，所述轮询指令包括：本次待轮询第一设备的设备地址，所述第一设备为与所述DTU连接的设备；发送模块，用于根据所述轮询指令包含的设备地址，向至少一个所述第一设备发送查询请求；第二接收模块，用于接收所述第一设备基于所述查询请求返回的数据；转发模块，用于转发所述第一设备返回的数据至所述物联网平台。13.一种电子设备，其特征在于，包括：存储器，存储有计算机可读指令；处理器，与所述存储器连接，用于通过运行所述计算机可读指令，能够实现权利要求1至6或7至10任一项所述的方法。14.一种计算机存储介质，其特征在于，所述计算机存储介质存储有计算机可执行指令；所述计算机可执行指令被处理器执行后，能够实现权利要求1至6或7至10任一项所述的方法。
说明书desc
技术领域本申请涉及信息技术领域，尤其涉及一种设备轮询方法、装置、电子设备及存储介质。背景技术现有技术中，针对传统的一些设备，诸如RS485或RS232接口的设备，想要接入物联网平台，需要引入数据转换单元DTU，将设备采集的数据通过LoRa/NB-IOT/4G等技术传输到网关，再通过4G或者以太网的方式传输到物联网平台。但是，通过DTU获取设备数据的方式，通常都是在DTU中直接配置轮询指令，在与DTU连接的设备数量较多的情况下，会使得DTU中配置的轮询指令数量大大增加，甚至会超出DTU本身支持配置的轮询指令的数量，从而导致DTU无法正常完成设备数据的采集。发明内容有鉴于此，本申请实施例期望提供一种设备轮询方法、装置、电子设备及存储介质。本申请的技术方案是这样实现的：第一方面，本申请实施例提供一种设备轮询方法，应用于物联网平台，所述设备轮询方法包括：获取第一设备的设备信息；其中，所述设备信息至少包括：所述第一设备的设备地址，所述第一设备为与数据转换单元DTU连接的设备，所述DTU与所述物联网平台连接；根据所述设备信息以及服务需求，确定轮询指令；其中，所述轮询指令包括：待轮询第二设备的设备地址；根据所述轮询指令包含的设备地址，通过所述DTU向至少一个所述第二设备发送查询请求；接收所述第二设备基于所述查询请求返回的数据。基于上述方案，所述轮询指令还包括：设备参数；其中，所述设备参数，用于指示所述DTU需要获取的数据。基于上述方案，所述设备参数包括以下至少之一：功能名称；功能标识；寄存器地址；寄存器数量。基于上述方案，所述方法还包括：根据所述第一设备在所述物联网平台上的注册信息，获取所述第一设备与所述DTU之间的关联信息；根据所述关联信息，确定所述第一设备的设备地址。基于上述方案，所述方法还包括：根据所述服务需求，确定在当前时刻后的预设时刻后执行的所述轮询指令；根据所述预设时刻，设置在所述预设时刻后执行的所述轮询指令的触发条件；其中，所述轮询指令还包括：所述触发条件的条件信息。基于上述方案，所述设备信息，还包括以下至少之一：设备类型；设备编号；设备名称；设备状态。第二方面，本申请实施例提供另一种设备轮询方法，应用于数据转换单元DTU，所述DTU与物联网平台连接，所述设备轮询方法包括：接收来自所述物联网平台的轮询指令，其中，所述轮询指令包括：待轮询第一设备的设备地址，所述第一设备为与所述DTU连接的设备；根据所述轮询指令包含的设备地址，向至少一个所述第一设备发送查询请求；接收所述第一设备基于所述查询请求返回的数据；转发所述第一设备返回的数据至所述物联网平台。基于上述方案，所述轮询指令还包括：设备参数；其中，所述设备参数，用于指示所述DTU需要获取的数据。基于上述方案，所述设备参数包括以下至少之一：功能名称；功能标识；寄存器地址；寄存器数量。基于上述方案，所述接收来自所述物联网平台的轮询指令，包括：接收来自所述物联网平台的在当前时刻后的预设时刻后执行的所述轮询指令；其中，所述轮询指令还包括：条件信息，用于指示所述轮询指令的触发条件。第三方面，本申请实施例提供一种设备轮询装置，所述设备轮询装置包括：第一获取模块，用于获取第一设备的设备信息；其中，所述设备信息至少包括：所述第一设备的设备地址，所述第一设备为与数据转换单元DTU连接的设备，所述DTU与物联网平台连接；第一确定模块，用于根据所述设备信息以及服务需求，确定轮询指令；其中，所述轮询指令包括：本次待轮询第二设备的设备地址；发送模块，用于根据所述轮询指令包含的设备地址，通过所述DTU向至少一个所述第二设备发送查询请求；接收模块，用于接收所述第二设备基于所述查询请求返回的数据。第四方面，本申请实施例提供另一种设备轮询装置，所述设备轮询装置包括：第一接收模块，用于接收来自物联网平台的轮询指令，其中，所述轮询指令包括：本次待轮询第一设备的设备地址，所述第一设备为与所述DTU连接的设备；发送模块，用于根据所述轮询指令包含的设备地址，向至少一个所述第一设备发送查询请求；第二接收模块，用于接收所述第一设备基于所述查询请求返回的数据；转发模块，用于转发所述第一设备返回的数据至所述物联网平台。第五方面，本申请实施例提供一种电子设备，包括：存储器，存储有计算机可读指令；处理器，与所述存储器连接，用于通过执行存储在所述存储器上的计算机可执行指令，能够实现第一方面和/或第二方面技术方案提供的方法。第六方面，本申请实施例提供一种计算机存储介质，所述计算机存储介质存储有计算机可执行指令，所述计算机可执行指令被执行后，能够实现第一方面和/或第二方面技术方案提供的方法。本申请实施例提供的设备轮询方法、装置、电子设备及存储介质，能够通过获取设备的设备信息，并根据设备信息以及服务需求确定轮询指令，如此，能够根据服务需求确定需要获取的数据，进而根据设备信息确定采集所述需要获取的数据的设备，从而在物联网平台完成轮询指令的配置，而无须在DTU内进行轮询指令的配置，进而能够解决DTU在同时连接多个设备时，需要在DTU内配置的轮询指令的数量超出DTU本身支持配置的轮询指令的数量的问题，因此通过在物联网平台完成轮询指令的配置能够增加被DTU轮询的设备。轮询指令中包括设备地址，如此，能够使得DTU准确的从与设备地址唯一对应的设备获取需要的数据。根据所述轮询指令包含的设备地址，通过DTU向至少一个所述第二设备发送查询请求，并接收所述第二设备基于所述查询请求返回的数据，如此，使得DTU在同时连接多个设备的情况下，依然能够根据配置好的轮询指令准确地从多个设备获取所述服务需求所需要的数据。附图说明图1为本申请实施例提供的一种设备轮询方法的流程示意图；图2为本申请实施例提供的另一种设备轮询方法的流程示意图；图3为本申请实施例提供的一种相关技术中的RS485/RS232设备通过DTU接入物联网平台的结构示意图；图4为本申请实施例提供的一种相关技术中厂家生产的DTU与其支持的轮询指令的数量之间的关系示意图；图5为本申请实施例提供的一种相关技术中RS485设备的设备种类与需要配置的轮询指令的数量之间的关系示意图；图6为本申请实施例提供的一种相关技术中的多个RS485/RS232设备通过单个DTU接入物联网平台的结构示意图；图7为本申请实施例提供的一种多个RS485/RS232设备通过单个DTU接入物联网平台的结构及各设备之间数据流向的关系示意图；图8为本申请实施例提供的一种在PaaS层开发的服务函数的功能及其包含的参数的示意图；图9为本申请实施例提供的一种编辑服务函数的功能的示意图；图10为本申请实施例提供的一种DTU与各设备的设备地址的之间的关系示意图；图11为本申请实施例提供的一种编辑服务函数的参数的示意图；图12为本申请实施例提供的一种设备轮询装置的结构示意图；图13为本申请实施例提供的另一种设备轮询装置的结构示意图；图14为本申请实施例提供的一种电子设备的结构示意图。具体实施方式为了能够更加详尽地了解本申请的特点与技术内容，下面结合附图对本申请的实现进行详细阐述，所附附图仅供参考说明之用，并非用来限定本申请。如图1所示，本申请实施例提供一种设备轮询方法，应用于物联网平台，所述设备轮询方法包括：步骤S110：获取第一设备的设备信息；其中，所述设备信息至少包括：所述第一设备的设备地址，所述第一设备为与数据转换单元DTU连接的设备，所述DTU与所述物联网平台连接；步骤S120：根据所述设备信息以及服务需求，确定轮询指令；其中，所述轮询指令包括：待轮询第二设备的设备地址；步骤S130：根据所述轮询指令包含的设备地址，通过所述DTU向至少一个所述第二设备发送查询请求；步骤S140：接收所述第二设备基于所述查询请求返回的数据。所述物联网平台可以为集成设备管理、数据安全通信和消息订阅等能力的一体化平台，用于让企业、开发人员和/或用户更轻松地使用物联网，包括PaaS层、SaaS层和IaaS层。所述DTU可以为用于将串口数据转换为IP数据或将IP数据转换为串口数据通过无线通信网络进行传送的无线终端设备。在本申请实施例中，所述DTU用于将第一设备采集的有线数据转换为无线数据传输至所述物联网平台。所述第一设备为与所述DTU连接的设备，用于采集数据并发送给DTU。具体地，所述第一设备可以为RS485或RS232设备。示例性地，所述第一设备可以为RS485温湿度传感器，用于采集设备附近环境的温度数据和/或湿度数据等环境数据。所述设备信息可以为用于指示与设备本身有关的信息，用于供物联网平台区分各个不同的设备以及确定各个设备的用途，从而便于物联网平台根据设备信息确定需要从各个设备获取的数据。所述设备地址用于区分不同的设备。具体地，在本申请实施例中，利用十六进制数字表示设备地址，设备地址范围为01~FF，最多可以支持256个设备地址。示例性地，有两个设备均为同一类型的设备，例如RS485温湿度传感器，利用设备地址的唯一性，即一个设备地址对应唯一的一个设备，从而可以轻松地区分出两个设备，便于物联网平台确定从对应的设备获取需要的数据。所述服务需求用于指示用户需要获取的数据。具体地，第一设备可用于采集某一区域的数据，用户需要获取第一设备采集的数据，进而根据所采集的数据作出相应的操作。例如，第一设备为RS485气象站传感器，用于采集设备所处区域的各种气象数据，例如此时用户可以通过RS485气象站传感器获取到的气象数据，实时监测气象情况，进而了解设备所处区域的天气情况。如此，在设备所采集的数据出现异常时，可以及时地发现并进行相应的处理。所述轮询指令包含了待轮询设备的设备信息以及获取数据的指令信息，用于供DTU对待轮询的设备进行轮询操作从而获取需要的数据。所述待轮询第二设备可以为需要轮询的设备，所述第二设备为前述第一设备的一种。在本申请实施例中，考虑到并非需要对DTU连接的所有的第一设备均进行轮询，故根据所述服务需求确定待轮询第二设备并配置轮询指令，进而发送至所述DTU执行，实现对待轮询第二设备的轮询操作。如此，可以在获取所需要数据的同时，减少不必要的操作从而提高轮询效率。所述查询请求可以为包括了待轮询设备的设备信息的请求信息，用于获取所述待轮询设备所采集的数据。在本申请实施例中，考虑到由于RS485和/或RS232设备一般都是通过modbus协议来传输数据，故可以根据modbus协议的请求格式确定并发送所述查询请求。具体地，所述查询请求可以由设备地址、功能代码、寄存器地址、寄存器数量以及校验和组成。如此，能够通过统一通信协议，便于DTU与第一设备之间的数据传输，从而提高数据传输的效率。在本申请实施例中，能够根据设备信息确定需要获取的通过DTU将设备采集的数据传输至物联网平台，如此，可以通过DTU的数据转换功能将设备采集的数据进行转换后传输至物联网平台，解决了设备接入物联网平台的问题。获取第一设备的设备信息，根据所述设备信息以及服务需求，确定轮询指令，如此，可以根据服务需求确定需要获取的数据，并根据设备信息确定对应的设备。通过物联网平台配置轮询指令，如此，可以在DTU同时连接多个设备的情况下，能够根据配置好的轮询指令准确地从待轮询设备中获取所需要的数据，且同时用一个DTU同时连接多个设备进行数据的获取，节省了成本。在本申请实施例中，所述轮询指令还包括：设备参数；其中，所述设备参数，用于指示所述DTU需要获取的数据。所述设备参数可以为设备进行工作时的工作参数，用于指示设备执行的功能以及设备工作时采集的数据。在本申请实施例中，所述设备参数包括以下至少之一：功能名称；功能标识；寄存器地址；寄存器数量。所述功能名称可以为设备执行功能的名称。在本申请实施例中，所述功能包括但不限于查询、启动、关闭或切换工作状态等。具体地，切换工作状态可以指设备从第一工作状态切换到第二工作状态，以适应不同的工作环境。所述功能标识可以为设备执行功能的标识。在本申请实施例中，采用十六进制数字表示功能标识。不同的功能标识对应不同的功能。具体地，功能标识03对应的是查询功能，表示当前设备查询已采集的数据。所述寄存器地址可以为设备中寄存器的地址。所述设备的寄存器用于存储采集的数据，不同的寄存器存储的数据不同，而不同的寄存器地址标识着不同的寄存器，从而根据寄存器地址可以确定对应的数据。故在本申请实施例中，通过寄存器地址来指示需要获取的数据，便于设备根据寄存器地址获取对应的寄存器中所存储的数据。在本申请实施例中，所述寄存器地址与数据的查询，即轮询指令的数量有关。具体地，当需要查询的多个寄存器的寄存器地址连续时，设备可以直接一次性连续读取多个所需要的数据，从而提高查询效率，此时仅需要一个轮询指令即可完成多个数据的查询。在另一个实施例中，当需要查询的多个寄存器的寄存器地址不连续时，此时为了只读取需要查询的数据，设备需要分多次读取多个所需要的数据，故此时需要多个轮询指令完成多个数据的查询。在还一个实施例中，即使需要查询的多个寄存器的寄存器地址连续时，因为需要查询的数据过多，可能超过了设备能够一次性读取的数量，故此时仍需要多个轮询指令才能完成多个数据的查询。所述寄存器数量可以为设备中寄存器的数量。寄存器的数量越多，表明设备能够采集的数据也就越多，故从寄存器数量较多的设备获取需要的数据时可能需要的轮询指令的数量也多。在本申请实施例中，所述方法还包括：根据所述第一设备在所述物联网平台上的注册信息，获取所述第一设备与所述DTU之间的关联信息；根据所述关联信息，确定所述第一设备的设备地址。所述注册信息可以为第一设备在物联网平台进行注册时登记的信息。具体地，所述注册信息包括但不限于设备编号、设备名称、设备型号、设备地址、设备激活码、注册时间和/或连接的DTU的编号等。所述关联信息用于指示第一设备与DTU之间的连接关系。具体地，所述关联信息包括但不限于DTU的编号以及与该DTU连接的每个设备的设备地址。在本申请实施例中，通过第一设备的注册信息可以直接获取设备的设备地址以及与设备相连的DTU的编号，从而便于轮询指令的配置，而无需再从DTU获取设备地址等相关信息。在本申请实施例中，所述方法还包括：根据所述服务需求，确定在当前时刻后的预设时刻后执行的所述轮询指令；根据所述预设时刻，设置在所述预设时刻后执行的所述轮询指令的触发条件；其中，所述轮询指令还包括：所述触发条件的条件信息。在本申请实施例中，考虑到有些数据是需要在特定时段获取的，故为了保证数据的获取的准确性与获取效率，可以根据服务需求，例如需要获取数据的时间段，确定当前时刻之后的某一个预设时刻进行轮询指令的执行。所述触发条件包括但不限于：触发类型、触发动作、执行的DTU型号、设备地址和/或延时时间等。在本申请实施例中，所述触发类型可以为定时触发，即每隔一定时刻触发一次。所述触发动作可以为设备需要进行的操作，例如查询操作。所述执行的DTU型号可以为执行所述轮询指令的DTU的型号。所述设备地址可以为需要获取的数据所在设备的设备地址。所述延时时间可以为满足设置的触发条件后，与开始执行轮询指令之间的时间间隔。所述触发条件的条件信息，用于指示轮询指令的触发条件。在本申请实施例中，通过提前配置好待执行的轮询指令，并在轮询指令内配置触发条件的条件信息，从而可以便于DTU按照轮询指令以及所述条件信息，在当前时刻后的预设时刻后执行并获取需要的数据。如此，可以满足不同类型的服务需求。在本申请实施例中，所述设备信息，还包括以下至少之一：设备类型；设备编号；设备名称；设备状态。所述设备类型可以为设备的种类和型号，型号可以由数字以及字母组成，例如AHW-123-IUJ。所述设备编号可以为设备的编号，编号可以由数字组成，例如11324531。所述设备名称可以为设备的名称，例如RS485一氧化碳检测器。所述设备状态可以为设备的工作状态或工作时的运行状态。具体地，用于指示设备的开关状态，即设备处于开启状态或是关闭状态。所述设备状态还可以用于指示工作处于第一状态或第二状态，所述第一状态与所述第二状态为不同的工作状态。如图2所示，本申请实施例提供另一种设备轮询方法，应用于数据转换单元DTU，所述DTU与物联网平台连接，所述设备轮询方法包括：步骤S210：接收来自所述物联网平台的轮询指令，其中，所述轮询指令包括：待轮询第一设备的设备地址，所述第一设备为与所述DTU连接的设备；步骤S220：根据所述轮询指令包含的设备地址，向至少一个所述第一设备发送查询请求；步骤S230：接收所述第一设备基于所述查询请求返回的数据；步骤S240：转发所述第一设备返回的数据至所述物联网平台。所述物联网平台可以为集成设备管理、数据安全通信和消息订阅等能力的一体化平台，用于让企业、开发人员和/或用户更轻松地使用物联网，包括PaaS层、SaaS层和IaaS层。所述DTU可以为用于将串口数据转换为IP数据或将IP数据转换为串口数据通过无线通信网络进行传送的无线终端设备。在本申请实施例中，所述DTU用于将第一设备采集的有线数据转换为无线数据传输至所述物联网平台。所述第一设备为与所述DTU连接的设备，用于采集数据并发送给DTU。具体地，所述第一设备可以为RS485或RS232设备。示例性地，所述第一设备可以为RS485温湿度传感器，用于采集设备附近环境的温度数据以及湿度数据。所述设备信息可以为用于指示与设备本身有关的信息，用于供物联网平台区分各个不同的设备以及确定各个设备的用途，从而便于物联网平台根据设备信息确定需要从各个设备获取的数据。所述设备地址用于区分不同的设备。具体地，在本申请实施例中，利用十六进制数字表示设备地址，设备地址范围为01~FF，最多可以支持256个设备地址。示例性地，有两个设备均为同一类型的设备，例如RS485温湿度传感器，利用设备地址的唯一性，即一个设备地址对应唯一的一个设备，从而可以轻松地区分出两个设备，便于物联网平台确定从对应的设备获取需要的数据。所述轮询指令包含了第一设备的设备信息以及获取数据的指令信息，用于通过DTU对所述第一设备进行轮询操作从而获取需要的数据。所述查询请求可以为包括了第一设备的设备信息的请求信息，用于获取所述待轮询设备所采集的数据。在本申请实施例中，考虑到由于RS485和/或RS232设备一般都是通过modbus协议来传输数据，故可以根据modbus协议的请求格式确定并发送所述查询请求。具体地，所述查询请求可以由设备地址、功能代码、寄存器地址、寄存器数量以及校验和组成。如此，能够通过统一通信协议，便于DTU与第一设备之间的数据传输，从而提高数据传输的效率。在本申请实施例中，能够接收来自所述物联网平台的轮询指令，如此，可以通过接收所述轮询指令，获取第一设备的设备地址。根据所述轮询指令包含的设备地址，向至少一个所述第一设备发送查询请求，如此，可以根据轮询指令中包含的设备地址，向对应的第一设备发送查询请求以获取需要的数据。接收所述第一设备基于所述查询请求返回的数据，转发所述第一设备返回的数据至所述物联网平台。如此，可以通过DTU的数据转换功能将设备采集的数据进行转换后传输至物联网平台，解决了设备接入物联网平台的问题。且本申请实施例中所提供的设备轮询方法，可以在DTU同时连接多个设备的情况下，依然能够根据配置好的轮询指令准确地从待轮询设备中获取所需要的数据，解决了DTU配置轮询指令有限的问题。且通过一个DTU同时连接多个设备进行数据的获取，节省了成本。在本申请实施例中，所述轮询指令还包括：设备参数；其中，所述设备参数，用于指示所述DTU需要获取的数据。所述设备参数可以为设备进行工作时的工作参数，用于指示设备执行的功能以及设备工作时采集的数据。在本申请实施例中，所述设备参数包括以下至少之一：功能名称；功能标识；寄存器地址；寄存器数量。所述功能名称可以为设备执行功能的名称。在本申请实施例中，所述功能包括但不限于查询、启动、关闭或切换工作状态等。具体地，切换工作状态可以指设备从第一工作状态切换到第二工作状态，以适应不同的工作环境。所述功能标识可以为设备执行功能的标识。在本申请实施例中，采用十六进制数字表示功能标识。不同的功能标识对应不同的功能。具体地，功能标识03对应的是查询功能，表示当前设备查询已采集的数据。所述寄存器地址可以为设备中寄存器的地址。所述设备的寄存器用于存储采集的数据，不同的寄存器存储的数据不同，而不同的寄存器地址标识着不同的寄存器，从而根据寄存器地址可以确定对应的数据。故在本申请实施例中，通过寄存器地址来指示需要获取的数据，便于设备根据寄存器地址获取对应的寄存器中所存储的数据。在本申请实施例中，所述寄存器地址与数据的查询，即轮询指令的数量有关。具体地，当需要查询的多个寄存器的寄存器地址连续时，设备可以直接一次性连续读取多个所需要的数据，从而提高查询效率，此时仅需要一个轮询指令即可完成多个数据的查询。在另一个实施例中，当需要查询的多个寄存器的寄存器地址不连续时，此时为了只读取需要查询的数据，设备需要分多次读取多个所需要的数据，故此时需要多个轮询指令完成多个数据的查询。在还一个实施例中，即使需要查询的多个寄存器的寄存器地址连续时，因为需要查询的数据过多，可能超过了设备能够一次性读取的数量，故此时仍需要多个轮询指令才能完成多个数据的查询。所述寄存器数量可以为设备中寄存器的数量。寄存器的数量越多，表明设备能够采集的数据也就越多，故从寄存器数量较多的设备获取需要的数据时可能需要的轮询指令的数量也多。在本申请实施例中，所述接收来自所述物联网平台的轮询指令，包括：接收来自所述物联网平台的在当前时刻后的预设时刻后执行的所述轮询指令；其中，所述轮询指令还包括：条件信息，用于指示所述轮询指令的触发条件。在本申请实施例中，考虑到有些数据是需要在特定时段获取的，故为了保证数据的获取的准确性与获取效率，可以根据服务需求，例如需要获取数据的时间段，确定当前时刻之后的某一个预设时刻进行轮询指令的执行。所述触发条件包括但不限于：触发类型、触发动作、执行的DTU型号、设备地址和/或延时时间等。在本申请实施例中，所述触发类型可以为定时触发，即每隔一定时刻触发一次。所述触发动作可以为设备需要进行的操作，例如查询操作。所述执行的DTU型号可以为执行所述轮询指令的DTU的型号。所述设备地址可以为需要获取的数据所在设备的设备地址。所述延时时间可以为满足设置的触发条件后，与开始执行轮询指令之间的时间间隔。所述触发条件的条件信息，用于指示轮询指令的触发条件。在本申请实施例中，通过接收物联网平台配置好待执行的轮询指令，可以根据轮询指令内包括的触发条件的条件信息，在当前时刻后的预设时刻后执行所述轮询指令并获取需要的数据。如此，可以满足不同类型的服务需求。如图3所示，为本申请实施例提供的一种相关技术中的RS485/RS232设备通过DTU接入物联网平台的结构示意图。由图3可知，针对传统的一些设备，诸如RS485、RS232接口的设备，想要接入物联网平台，则需要中间连接一个数据转换器DTU，把设备采集的数据通过LoRa/NB-IOT/4G等技术传输到网关，再通过4G或者以太网的方式传输到物联网平台。这种方式在采集设备数据时，通常都是在DTU中配置轮询指令，通过modbus协议来定时查询来获取设备的数据。由于RS485/RS232设备一般都是通过modbus协议来传输数据，modbus协议是一个请求/应答协议。它的请求和应答格式为：请求格式帧：由设备地址、功能代码、寄存器地址、寄存器数量和校验组成。应答：由设备地址、功能代码、数据长度和数据组成。理论上，从机设备地址为01-FF，可以支持1-255，可以支持256个设备地址。实际使用中DTU具有带载能力，一般是可以支持32个设备甚至更多。而每个厂家生产的DTU支持的轮询指令的条数是不一样的。如图4所示，为本申请实施例提供的一种相关技术中厂家生产的DTU与其支持的轮询指令的数量之间的关系示意图。由图4可知，不同厂家生产的DTU，所支持的轮询指令的数量也不相同。一般情况下，DTU支持的轮询指令的数量越多，生产的成本也就越高。对于一个DTU连接一个设备时，DTU中轮询的指令条数跟设备本身的参数多少息息相关，参数多就意味着寄存器多，参数少久意味着寄存器少。如图5所示，为本申请实施例提供的一种相关技术中RS485设备的设备种类与需要配置的轮询指令的数量之间的关系示意图。由图5可知，单个不同的RS485接口的设备连接一个DTU时，DTU配置的轮询指令的数量，基本都在8条以内。而在实际应用中，考虑节省成本的问题，在一些设备较为集中的场景中往往使用一个DTU同时连接多个RS485/RS232设备进行使用。如图6所示，为本申请实施例提供的一种相关技术中的多个RS485/RS232设备通过单个DTU接入物联网平台的结构示意图。由图6可知，一个DTU需要连接多个设备并完成每一个设备数据的获取，那么在DTU中配置的轮询指令数量就会成倍的增加，甚至会超出DTU设备本身支持的最大轮询数量，导致无法正常完成设备数据的采集。例如某DTU本身支持的轮询数量是8条，而一个电量仪和一个DTU就需要配置4条轮询指令，那么最多一个DTU就只能带两个电量仪。实际项目中一个配电柜可能有6-10个电量仪，需要通过一个DTU来连接传输数据。故基于此，本申请实施例提出了一种物联网平台轮询指令的方法。如图7所示，为本申请实施例提供的一种多个RS485/RS232设备通过单个DTU接入物联网平台的结构及各设备之间数据流向的关系示意图。通过物联网平台配置与DTU连接的各个设备的轮询指令，从而在一个DTU同时带多个RS485/RS232设备的场景下，从物联网平台解决轮询采集每个设备的数据的问题。所述RS485/RS232设备为前述第一设备的一种。解决方案一：在PaaS层来实现：1）设计框架及物联网平台轮询指令的数据流走向如图6所示：物联网平台通过DTU发送基于modbus协议的查询请求，并通过DTU接收RS485/RS232设备基于查询请求返回的数据。2）PaaS层中下行轮询的设计如下：2.1下行轮询指令的编码规则下行轮询设备时，device_address设备地址是变量；03：是查询功能码；0005：是寄存器起始地址；0003：是查询寄存器的个数；然后计算出校验和，即可根据设备地址组装出modbus下行轮询的指令。例如地址为01的设备，那么下行指令就是：{"payload":"010300050003000c","payloadType":1,"fport":1,"ack":1,"confirmed":1}。以下是lorawan下行的一个示例，其他协议的话，payload是一成不变的，不同点就是result中带参不一样而已。function polling {var a = data.device_address + "03" + "0005" + "0003" ;var payload = a + checksum;var result = {payload: payload ,payloadType:1,fport:1,ack:1,confirmed:1};return result;}// 校验和16function checksum {var hex_list = new Array;var temp = 0;var k = 0;for  {data_tmp = parseInt, 16);hex_list.push;//异或和// temp ^=hex_list;// 累加和temp += hex_list;// temp =temp ^ hex_list;k++;}mod_str = temp.toString;len = mod_str.length;if  {n = 4;}// 如果不够校验位的长度，补0,while  {mod_str = "0" + mod_str;len++;}return mod_str;}2.2需要轮询的指令有几条，就编码几条对应的服务函数。例如某电量仪和DTU时，按设备地址为1来设置开发的话：指令1：读相电压、线电压、电流：01 03 00 00 00 12 C5 C7；指令2：读有功功率：01 03 00 12 00 08 E4 09；指令3：读视在功率、功率因素：01 03 00 22 00 0C E5 C5；指令4：读频率、电能：01 03 00 2E 00 0E A4 07。如图8所示，为本申请实施例提供的一种在PaaS层开发的服务函数的功能及其包含的参数的示意图。由图8可知，在PaaS层开发4条下行查询指令的服务，分别是读相电压、线电压、电流，读有功功率，读视在功率、功率因素，读频率、电能。这样就完成一个设备和一个DTU需要配置4条轮询指令的实现过程。2.2实现多个设备和一个DTU配置轮询指令。1）把地址当作是设备的标识；2）每个下行服务都可以根据地址来轮询该DTU下面连接的所有设备。一个电量仪和一个DTU就需要配置4条指令。如果一个DTU和5个电量仪，那么就需要配置20条指令。依照上述方式即可实现指令的配置。2.3PaaS层的呈现方式和效果：如图9所示，为本申请实施例提供的一种编辑服务函数的功能的示意图。由图9可知，通过设置下行服务的窗口，可以编辑下行服务的从功能名称、功能标识、应答类型和是否设置为自动轮询，以及轮询的时间和轮询的地址。其中轮询地址是变量参数，是设置的关键。如图10所示，为本申请实施例提供的一种DTU与各设备的设备地址的之间的关系示意图。此图为参数personlizeParameters指示的关系图。该参数是DTU与该DTU连接的每个设备的纽带，就是DTU与各设备地址的一个一一对应关系表。如图11所示，为本申请实施例提供的一种编辑服务函数的参数的示意图。参数名称：就是设备地址。参数标识：device_address。数据类型：根据定义的来，本申请实施例中定义的是字符串string。默认值：是可以轮询多个设备的关键。如果默认值填为01，则只会轮询地址为1这个设备。所以轮询值需要填写personlizeParameters. device_address。根据上述图10及对图10解释说明的内容可知。该参数包括了与DTU连接的所有设备的设备地址，故轮询值填写该参数可以实现轮询与DTU连接的所有设备。DTU和与该DTU连接的每个设备的关联关系，在平台上注册时就会做好绑定，DTU完成注册后平台上的注册信息中包括DTU的型号、名称和编号，以及产品类型、创建时间、设备到期时间、设备状态和设备激活码等信息。在一个实施例中，通过物联网平台可以新增或删除与DTU相连设备的设备编号、设备型号、设备状态以及更新时间等信息。在另一个实施例中，通过物联网平台还可以设置与DTU相连设备的通信地址以及设备名称，每个设备设置的通信地址各不相同。解决方案二：在SaaS层来实现：1）PaaS层设计与方案1相同，唯一不同的地方在于设置地址参数这个变量时，默认值设置为01或其他唯一地址都可以，其他不变。2）在SaaS层可以通过规则引擎来实现：2.1首先设置一个定时任务；2.2选择DTU型号和编号，选择下行轮询的一个服务；2.3配置设置地址。以下是SaaS的呈现方式：设置触发条件：触发类型：选择定时触发；定时表达式：就是设置定时，如每隔1小时触发一次。设置执行动作：动作类型：下行服务；型号：就是DTU的型号；延时时间：设置为10秒以内即可；选择服务：就是具体的服务函数；设置地址：01；设备：就是DTU的编号。如图12所示，为本申请实施例提供的一种设备轮询装置，所述设备轮询装置包括：第一获取模块110，用于获取第一设备的设备信息；其中，所述设备信息至少包括：所述第一设备的设备地址，所述第一设备为与数据转换单元DTU连接的设备，所述DTU与物联网平台连接；第一确定模块120，用于根据所述设备信息以及服务需求，确定轮询指令；其中，所述轮询指令包括：本次待轮询第二设备的设备地址；发送模块130，用于根据所述轮询指令包含的设备地址，通过所述DTU向至少一个所述第二设备发送查询请求；接收模块140，用于接收所述第二设备基于所述查询请求返回的数据。在一些实施例中，所述第一获取模块110、第一确定模块120、发送模块130及所述接收模块140可均为程序模块，该程序模块被处理器执行之后，能够实现上述各个模块的功能。在另一些实施例中，所述第一获取模块110、第一确定模块120、发送模块130及所述接收模块140可均为软硬结合模块；所述软硬结合模块包括但不限于：各种可编程阵列；所述现场可编程阵列包括但不限于：现场可编程阵列和/或复杂可编程阵列。在还有一些实施例中，所述第一获取模块110、第一确定模块120、发送模块130及所述接收模块140可均为纯硬件模块；所述纯硬件模块包括但不限于：专用集成电路。在一些实施例中，所述轮询指令还包括：设备参数；其中，所述设备参数，用于指示所述DTU需要获取的数据。在一些实施例中，所述设备参数包括以下至少之一：功能名称；功能标识；寄存器地址；寄存器数量。在一些实施例中，所述装置还包括：第二获取模块，用于根据所述第一设备在所述物联网平台上的注册信息，获取所述第一设备与所述DTU之间的关联信息；第二确定模块，用于根据所述关联信息，确定所述第一设备的设备地址。在一些实施例中，所述装置还包括：第三确定模块，用于根据所述服务需求，确定在当前时刻后的预设时刻后执行的所述轮询指令；设置模块，用于根据所述预设时刻，设置在所述预设时刻后执行的所述轮询指令的触发条件；其中，所述轮询指令还包括：所述触发条件的条件信息。在一些实施例中，所述设备信息，还包括以下至少之一：设备类型；设备编号；设备名称；设备状态。如图13所示，为本申请实施例提供的另一种设备轮询装置，所述设备轮询装置包括：第一接收模块210，用于接收来自物联网平台的轮询指令，其中，所述轮询指令包括：本次待轮询第一设备的设备地址，所述第一设备为与所述DTU连接的设备；发送模块220，用于根据所述轮询指令包含的设备地址，向至少一个所述第一设备发送查询请求；第二接收模块230，用于接收所述第一设备基于所述查询请求返回的数据；转发模块240，用于转发所述第一设备返回的数据至所述物联网平台。在一些实施例中，所述第一接收模块210、发送模块220、第二接收模块230及所述转发模块240可均为程序模块，该程序模块被处理器执行之后，能够实现上述各个模块的功能。在另一些实施例中，所述第一接收模块210、发送模块220、第二接收模块230及所述转发模块240可均为软硬结合模块；所述软硬结合模块包括但不限于：各种可编程阵列；所述现场可编程阵列包括但不限于：现场可编程阵列和/或复杂可编程阵列。在还有一些实施例中，所述第一接收模块210、发送模块220、第二接收模块230及所述转发模块240可均为纯硬件模块；所述纯硬件模块包括但不限于：专用集成电路。在一些实施例中，所述轮询指令还包括：设备参数；其中，所述设备参数，用于指示所述DTU需要获取的数据。在一些实施例中，所述设备参数包括以下至少之一：功能名称；功能标识；寄存器地址；寄存器数量。在一些实施例中，所述第一接收模块210，还用于接收来自所述物联网平台的在当前时刻后的预设时刻后执行的所述轮询指令；其中，所述轮询指令还包括：条件信息，用于指示所述轮询指令的触发条件。如图14所示，本申请实施例提供一种电子设备，所述电子设备包括：存储器，用于存储计算机可读指令；处理器，与所述存储器连接，用于通过执行计算机可读指令，能够实现前述任意实施例提供的方法，例如，可执行图1和/或图2中所示方法。该存储器可为各种类型的存储器，可为随机存储器、只读存储器、闪存等。所述存储器可用于信息存储，例如，存储计算机可执行指令等。所述计算机可执行指令可为各种程序指令，例如，目标程序指令和/或源程序指令等。所述处理器可为各种类型的处理器，例如，中央处理器、微处理器、数字信号处理器、可编程阵列、数字信号处理器、专用集成电路或图像处理器等。所述处理器可以通过总线与所述存储器连接。所述总线可为集成电路总线等。如图14所示，该电子设备还可包括网络接口，该网络接口可用于通过网络和对端设备进行交互。本申请实施例还提供一种计算机存储介质，该计算机存储介质存储有计算机可执行指令，该计算机可执行指令被执行后，能够实现前述任意实施例提供的方法，例如，可执行图1和/或图2中所示方法。本实施例提供的计算机存储介质包括：移动存储设备、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。在本申请所提供的几个实施例中，应该理解到，所揭露的设备和方法，可以通过其它的方式实现。以上所描述的设备实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，如：多个单元或组件可以结合，或可以集成到另一个系统，或一些特征可以忽略，或不执行。另外，所显示或讨论的各组成部分相互之间的耦合、或直接耦合、或通信连接可以是通过一些接口，设备或单元的间接耦合或通信连接，可以是电性的、机械的或其它形式的。上述作为分离部件说明的单元可以是、或也可以不是物理上分开的，作为单元显示的部件可以是、或也可以不是物理单元，即可以位于一个地方，也可以分布到多个网络单元上；可以根据实际的需要选择其中的部分或全部单元来实现本实施例方案的目的。另外，在本申请各实施例中的各功能单元可以全部集成在一个处理模块中，也可以是各单元分别单独作为一个单元，也可以两个或两个以上单元集成在一个单元中；上述集成的单元既可以采用硬件的形式实现，也可以采用硬件加软件功能单元的形式实现。本领域普通技术人员可以理解：实现上述方法实施例的全部或部分步骤可以通过程序指令相关的硬件来完成，前述的程序可以存储于一计算机可读取存储介质中，该程序在执行时，执行包括上述方法实施例的步骤；而前述的存储介质包括：移动存储设备、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上所述，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以所述权利要求的保护范围为准。
