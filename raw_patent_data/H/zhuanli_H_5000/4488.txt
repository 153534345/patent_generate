标题title
一种业务感知的智能信道接入控制方法
摘要abst
本发明公开了一种业务感知的智能信道接入控制方法，针对现有技术未考虑多类型业务节点对时隙资源和服务质量的不同需求，且分布式网络中节点未考虑自身需求的同时也权衡邻居节点的需求的问题；本发明帧结构上采用接入、抢占、通知的结构，使得在节点两跳无冲突接入信道后通过抢占与通知阶段高效完成对信息时隙的多时隙预约占用；同时采用优先级抢占机制，使得介质访问控制方法按照节点优先级高低分配信息时隙，保障不同优先级节点差异化的传输需求；并利用强化学习DQN算法完成节点预约时隙数目自适应调整，与优先级抢占机制相结合，在保障高优先级节点预约优势的前提下对有限信道资源进行均衡分配。
权利要求书clms
1.一种业务感知的智能信道接入控制方法，其特征在于，具体包括如下步骤：S1、在自组织网环境中，节点在接入帧AF根据FPRP五步握手机制与基于优先级的随机接入算法PRAA竞争接入信道，每个节点在接入帧AF一旦成功接入，则不再竞争其余接入时隙AS，若节点竞争成功，则执行步骤S2；若节点竞争失败，则回到步骤S1；S2、在抢占帧PF中处理邻居节点信息，若节点不在自己的抢占阶段，则监听邻居的抢占控制报文，以此更新信息时隙标记表，并提取邻居控制报文中的邻居信息进行存储；若节点在自己的抢占阶段，则节点根据邻居节点信息处理算法处理邻居信息，得到当前时刻状态，并通过基于DQN的时隙自适应预约算法获得当前时刻的决策预约时隙数目；根据所述决策预约时隙数目结合优先级抢占机制，更新信息时隙标记表，锁定预约的信息时隙，并发送抢占控制报文；S3、若节点不在自己的通知阶段，则监听邻居通知控制报文，更新信息时隙标记表，存储相应邻居信息；若节点在自己的通知阶段，根据自己当前最新的信息时隙标记表信息发送通知控制报文；S4、所有竞争接入节点在协商阶段最后，根据邻居节点信息处理算法处理邻居信息，并为时隙自适应预约算法做出环境反馈；S5、若节点在自己预约的信息时隙中，则发送数据报文，否则接收数据报文；S6、节点在所有成功预约的信息时隙中发送完数据报文则结束流程。2.根据权利要求1所述的一种业务感知的智能信道接入控制方法，其特征在于，所述接入帧AF包含N个接入时隙AS，每个AS由m个接入周期AC组成，而每个接入周期AC有5轮交互过程，分别为：预约请求阶段、冲突报告阶段、预约确认阶段、预约通知阶段、打包/消除阶段；所述抢占帧有n个抢占时隙PS，每个抢占时隙分为抢占周期PC和通知周期NC，抢占周期和通知周期分别包含N个抢占阶段PP和N个通知阶段NP；所述接入时隙AS个数与抢占周期PC和通知周期NC个数相同，且一一对应；在一个接入时隙AS中，节点一旦在任意接入周期AC中竞争成功，则不再在本接入时隙AS发起竞争，同样也不能再竞争别的接入时隙AS；每节点在接入帧成功占用某接入时隙AS，则获得对应编号抢占帧PP和NP时隙。3.根据权利要求2所述的一种业务感知的智能信道接入控制方法，其特征在于，所述的信息时隙标记表存储了信息时隙状态信息与占用对应信息时隙的节点信息；所述信息时隙状态包含空闲态、锁定态、被1跳锁定态、被2跳锁定态共4种状态。4.根据权利要求2或3所述的一种业务感知的智能信道接入控制方法，其特征在于，步骤S1所述的基于节点优先级随机接入算法的节点优先级计算方法为：将数据缓存队列分为高中低3个优先级，节点优先级分为High-Middle-Low三段，共9级，其中Low∈,Middle∈,High∈。节点优先级按照以下规则划分优先级段：只要高优先级队列存在数据包，则priority＝High。若高优先级队列无包，而中优先级队列存在数据包，则priority＝Middle。若只有低优先级队列存在数据包，则priority＝Low。节点首先根据划分的优先级段确定自己的初始节点优先级，其中定段为High的节点初始优先级为8级，Middle的节点初始优先级为5级，Low的节点初始优先级为2级；在信道接入控制方法运行过程中，将当前节点队列存在的包的数量与上一帧周期节点发包的数量进行比较，若上一帧周期发包数小于当前队列的包数量，则节点优先级增加一级；若上一帧周期发包数大于当前队列的报文数量，则节点优先级降低一级。5.根据权利要求4所述的一种业务感知的智能信道接入控制方法，其特征在于，步骤S1所述的节点优先级接入算法节点竞争接入概率P：其中：α＞1,Pmax＝1，nc表示2跳以内的竞争节点数，Pmax表示节点竞争接入概率最大值，priority为节点优先级。6.根据权利要求5所述的一种业务感知的智能信道接入控制方法，其特征在于，步骤S3所述的基于DQN的时隙自适应预约算法的学习模型-状态集合S为：S＝其中，numt表示节点当前要预约的时隙数，Cneigh_t表示节点两跳范围内邻居节点的业务容量情况，NPneigh_t表示节点两跳范围内邻居节点的时隙需求压力。7.根据权利要求6所述的一种业务感知的智能信道接入控制方法，其特征在于，所述的Cneigh_t的计算式为：其中，cneigh_i表示邻居节点i的节点业务容量ci标准化处理后的值，n表示两跳范围内邻居节点总数；所述节点i的业务容量ci计算式为：其中，节点高优先级队列报文总数为x，中优先级队列报文总数为y，低优先级报文总数为z，节点所有缓存队列报文总数为sum，w1,w2,w3表示高、中、低优先级队列所占权重；所述NPneigh_t的计算式为：其中，M表示优先级影响因子，prii表示为邻居节点i的节点优先级，stillNeedNumneigh_i表示当前时刻节点i的实际仍需预约的时隙数stillNeedNumi标准化处理后的值；所述stillNeedNumi的计算式为：stillNeedNumi＝needSlotNumi-lockedSlotNumi其中，needSlotNumi表示节点i当前的需求时隙数目，lockedSlotNumi表示已锁定时隙数目。8.根据权利要求6或7所述的一种业务感知的智能信道接入控制方法，其特征在于，步骤S2所述的优先级抢占机制包含以下步骤：S21：解析监听到的邻居控制报文，提取邻居信息时隙标记信息。根据邻居信息时隙标记信息更新本节点信息时隙标记表。S22：顺序遍历本节点信息时隙标记表搜寻可用时隙，若为空闲则可直接占用，若为被锁态则将本节点优先级与锁定每个信息时隙的节点的优先级比较，当被锁节点优先级小于本节点时，可选中此时隙，将对应信息时隙标记信息更改为自己。S23：确认已锁定时隙个数是否满足本节点时隙数目需求，若不满足则继续遍历，若满足则结束时隙占用。9.根据权利要求8所述的一种业务感知的智能信道接入控制方法，其特征在于，步骤S3所述决策预约时隙数目由基于DQN的时隙自适应预约算法的学习模型-动作A确定，学习模型-动作A为：A＝{a1,a2,a3,a4,a5}当选择动作a1:num＝max当选择动作a2:num＝max当选择动作a3:num＝num当选择动作a4:num＝max当选择动作a5:num＝max其中，nummin表示节点预约时隙数目的下限最小值，nummin≥0，nummax表示节点预约时隙数目的上限最大值，nummax≤K，K为一帧周期中总的信息时隙数目。10.根据权利要求6或7所述的一种业务感知的智能信道接入控制方法，其特征在于，步骤S4所述的环境反馈具体为：当两跳范围内邻居节点的时隙需求压力小于或等于邻居业务压力临界值则给予正向奖励，反之给予惩罚；基于DQN的时隙自适应预约算法的学习模型-奖励函数R为：其中，Q为邻居业务压力临界值，NPneigh_t表示节点两跳范围内邻居节点的时隙需求压力。
说明书desc
技术领域本发明属于无线网络领域，具体涉及一种基于强化学习的时隙分配技术。背景技术无线自组织网络具有可拓展性高、组网迅速、支持动态拓扑变化 和多跳传输等特点。Ad hoc网络目前广泛应用于军事战略通信、灾后应急通信、个人组网 通信等方面。研究无线自组织网络需要重点关注的是其缺乏集中式管理、节点较强的可移 动性、分布式节点协商通信的特质。要想构建一个强健的无线自组网，需要有完善的MAC协议和移动管理算法，也需要对动态可变的网络环境自适应调整，同时由于其无线通信资源有限，要尽量降低网络开销和减少资源浪费。媒介访问控制处在Ad hoc网络模型的第二层，是自 组网通信中不可或缺的一部分，其决定何时发送数据和以何种策略发送，如对信道争用或 者预约；并且对信道资源进行管理分配，如共享信道或者划分时隙资源。目前Ad hoc网络 MAC协议可以根据对信道资源预约方式的不同划分为基于竞争与基于调度的MAC协议，基于竞争的MAC协议最经典的是IEEE802.11所用的CSMA/CA；基于调度的MAC协议， 如时分多址TDMA，代表协议为FPRP协 议与E-TDMA协议。使用强化学习来解决信道接入目前被成功证明能很好的提高网络性能，分布式网络节 点如何高效接入信道从而快速传输数据是当前关注度较高的问题。用户往往无法在分布式 结构中获得网络全局信息，而强化学习能在较大的状态空间和获取的局部特征中找到最佳 策略，将强化学习应用到分布式信道接入具有巨大的研究潜力。传统的FPRP协议机制中，节点一旦竞争接入信道，则占用对应信息时隙发送报文，随 机接入的方式导致节点对信息时隙的占用具有盲目性，且信道利用率也达不到理想水平。 实际网络场景中，不同节点会产生多类型业务，当节点存在紧急业务时，由于FPRP协议未 考虑多类型业务节点对时隙资源和服务质量的不同需求，节点可能因无法及时接入信道而 导致紧急业务无法快速传达。分布式网络中节点考虑自身需求的同时也要权衡邻居节点的 需求，如何让节点从获知的邻居节点时隙预约情况、节点业务优先级来调整自身预约时隙 数量，合理高效分配有限链路资源，均衡各节点时隙占用比例为拟解决的关键问题。发明内容为解决现有技术存在的上述问题，本发明提出一种业务感知的智能信道接入控制方法。本发明具体的技术方案为：一种业务感知的智能信道接入控制方法，包括如下步骤：S1、在自组织网环境中，节点在接入帧AF根据FPRP五步握手机制与基 于优先级的随机接入算法PRAA竞争接入信道， 每个节点在接入帧AF一旦成功接入，则不再竞争其余接入时隙AS，若节点竞争成功，则 执行步骤S2；若节点竞争失败，则回到步骤S1；S2、在抢占帧PF中处理邻居节点信息，若节点不在自己的抢占阶 段，则监听邻居的抢占控制报文，以此更新信息时隙标记表，并提取邻居控制报文中的邻 居信息进行存储；若节点在自己的抢占阶段，则节点根据邻居节点信息处理算法NNIPA 处理邻居信息，得到当前时刻状态，并通 过基于DQN的时隙自适应预约算法DQN-TSARA获得当前时刻的决策预约时隙数目；根据所述决策预约时隙数目结 合优先级抢占机制，更新信息时隙标记表，锁定预约的信息时隙，并发送抢占控制报文；S3、若节点不在自己的通知阶段，则监听邻居通知控制报文，更新信息时隙标记表， 存储相应邻居信息；若节点在自己的通知阶段，根据自己当前最新的信息时隙标记表信息 发送通知控制报文；S4、所有竞争接入节点在协商阶段最后，根据邻居节点信息处理算法NNIPA处理邻居 信息，并为时隙自适应预约算法DQN-TSARA做出环境反馈；S5、若节点在自己预约的信息时隙中，则发送数据报文，否则接收数据报文；S6、节点在所有成功预约的信息时隙中发送完数据报文则结束流程。进一步的，所述接入帧AF包含N个接入时隙AS，每个AS由m个接入周期AC组成，而每个接入周期AC有5轮交互过程，分别为：预约请求 阶段、冲突报告阶段、预约确认阶段、预约通知阶段、打包/消除阶段；所述抢占帧有n个 抢占时隙PS，每个抢占时隙分为抢占周期PC和通 知周期NC，抢占周期和通知周期分别包含N个抢占阶段PP和N个通知阶段NP；所述接入时隙AS个数与抢占周期PC和通知周期NC个数相同，且一一对应；在一个接入时隙AS中，节点一旦在任意接入周期AC中竞争成功，则不再在本接入时隙AS发起 竞争，同样也不能再竞争别的接入时隙AS；每节点在接入帧成功占用某接入时隙AS，则 获得对应编号抢占帧PP和NP时隙。进一步的，步骤S1所述的基于节点优先级随机接入算法的节点优先级计算方法为：将数据缓存队列分为高中低3个优先级，节点优先级分为High-Middle-Low三段，共9 级，其中，Low∈,Middle∈,High∈，节点优先级按照以下规则划分优先级段：只要高优先级队列存在数据包，则priority＝High。若高优先级队列无包，而中优先级队列存在数据包，则priority＝Middle。若只有低优先级队列存在数据包，则priority＝Low。节点首先根据划分的优先级段确定自己的初始节点优先级，其中，定段为High的节点 初始优先级为8级，Middle的节点初始优先级为5级，Low的节点初始优先级为2级；在协议运行过程中，将当前节点队列存在的包的数量与上一帧周期节点发包的数量进行比较， 若上一帧周期发包数小于当前队列的包数量，则节点优先级增加一级；若上一帧周期发包 数大于当前队列的报文数量，则节点优先级降低一级。进一步的，步骤S1所述的节点优先级接入算法节点竞争接入概率P：其中：α＞1,Pmax＝1，nc表示2跳以内的竞争节点数，Pmax表示节点竞争接入概率最大 值，priority为节点优先级。本发明的有益效果：本发明的方法在帧结构设计上采用了接入、抢占、通知的结构，使 得节点两跳无冲突接入信道，并通过抢占与通知阶段高效完成对信息时隙的多时隙预约占 用，一次预约多时隙，减轻了控制开销；在信道接入算法中考虑了节点优先级对接入信道 概率的影响，提升高优先级节点的预约优势；同时采用优先级抢占机制，使得介质访问控 制方法按照节点优先级高低分配信息时隙，保障不同优先级节点差异化的传输需求。本发 明的信道分配方法利用强化学习DQN算法完成节点预约时隙数目自适应调整，并与优先级 抢占机制相结合，提出基于DQN的优先级抢占介质控制访问方法 DQN-PPTDMA，更好的对有限信道资源进行均衡分 配，相较于现有技术更具有智能性，能高效分配信道资源，对多业务类型的场景具有较高 的实际应用价值。附图说明图1为本发明实施例的DQN-PPTDMA介质控制访问方法的帧结构图；图2为本发明实施例的信息时隙占用标记表；图3为本发明实施例的信息时隙状态转换示意图；图4为本发明实施例的DQN-PPTDMA介质控制访问方法的运行流程图；图5为本发明实施例的优先级抢占机制示意图；图6为本发明实施例的DQN-PPTDMA预约控制报文所包含内容的示意图；图7为本发明实施例的NodeState字段、NeighState字段、IsSlotInfo字段包含内容的示 意图。具体实施方式下面结合附图对本发明内容进一步阐释。本发明提出的DQN-PPTDMA信道控制访问方法的帧结构如图1所示由接入帧AF，抢占帧PF和信息帧IF三部分组成。其中，接入帧AF使用基于FPRP协议多跳伪贝叶斯算法 改进的优先级随机接入算法PRAA竞争接入，接入帧AF与FPRP协议预留阶段时帧结构相 同，包含N个接入时隙AS，每个AS由m个接入周期AC组成，而每个接入周期AC有5 轮交互过程,分别为：预约请求阶段、冲突报告阶段、预约确认阶段、预约通知阶段、打包 /消除阶段。在一个接入时隙AS中，节点一旦在任意接入周期AC中竞争成功，则不再在 本接入时隙AS发起竞争，同样也不能再竞争别的接入时隙AS，以此保证每个节点最多占 用一个接入时隙AS。信息帧IF包含K个信息时隙IS。抢占帧有n个抢占时隙PS，每个抢占时隙分为抢占周期PC和通知周期NC，抢占周期和通知周期分别包含N个抢占阶段PP和N个通知阶段NP，每节点在接入帧成功占用某接 入时隙AS，则获得对应编号抢占帧PP和NP时隙。所述节点维护的信息时隙标记表如图2，存储了信息时隙状态信息与占用对应信息时隙 的节点信息；信息时隙状态包含空闲态、锁定态、被1跳锁定态、被2跳锁定态共4种状态；信息时隙状态如图3信息时隙状态转换示意图来维护。在抢占帧中按照时隙自适应预约算法DQN-TSARA发起对多个信息时隙的预约，节点 在自己的抢占阶段PP中广播信息时隙的占用标记表，其余节点则监听控制报文获取邻居节 点对信息时隙的占用标记信息，以此更新自己保存的信息时隙占用标记表。节点收到来自 邻居的控制报文，解析报文过后对比信息时隙占用标记表，根据本节点优先级和负载情况 在优先级抢占机制下确定是否抢占时隙并更新信息时隙占用标记表，在自己的抢占阶段PP 将更新后的信息时隙占用标记表广播至邻居节点。具体的，本发明的方法流程如图4所示，包括如下步骤：S1、在自组织网环境中，节点在接入帧AF根据FPRP五步握手机制与基于优先级的随 机接入算法PRAA竞争接入信道，每个节点在接入帧AF一旦成功接入，则不再竞争其余接入时隙AS，若节点竞争成功，则执行步骤S2；若节点竞争失败，则回到步骤S1；S2、在抢占帧PF中处理邻居节点信息，若节点不在自己的抢占阶段，则监听邻居的抢 占控制报文，以此更新信息时隙标记表，并提取邻居控制报文中的邻居信息进行存储；若 节点在自己的抢占阶段，则节点根据邻居节点信息处理算法NNIPA处理邻居信息，得到当 前时刻状态，并通过基于DQN的时隙自适应预约算法DQN-TSARA获得当前时刻的决策 预约时隙数目；根据所述决策预约时隙数目结合优先级抢占机制，更新信息时隙标记表， 锁定预约的信息时隙，并发送抢占控制报文；S3、若节点不在自己的通知阶段，则监听邻居通知控制报文，更新信息时隙标记表， 存储相应邻居信息；若节点在自己的通知阶段，根据自己当前最新的信息时隙标记表信息 发送通知控制报文；S4、所有竞争接入节点在协商阶段最后，根据邻居节点信息处理算法NNIPA处理邻居 信息，并为时隙自适应预约算法DQN-TSARA做出环境反馈；S5、若节点在自己预约的信息时隙中，则发送数据报文，否则接收数据报文；S6、节点在所有成功预约的信息时隙中发送完数据报文则结束流程。这里步骤S2中提出的优先级抢占机制，包括：S21：解析监听到的邻居控制报文，提取邻居信息时隙标记信息。根据邻居信息时隙标 记信息更新本节点信息时隙标记表。S22：顺序遍历本节点信息时隙标记表搜寻可用时隙，若为空闲则可直接占用，若为被 锁态则将本节点优先级与锁定每个信息时隙的节点的优先级比较，当被锁节点优先级小于 本节点时，可选中此时隙，将对应信息时隙标记信息更改为自己。S23：确认已锁定时隙个数是否满足本节点时隙数目需求，若不满足则继续遍历，若满 足则结束时隙占用。优先级抢占机制原理示意如图5，示意图假设前提如下：将信息时隙标记表简化为只包含被锁节点优先级信息。假设节点优先级等于节点编号值。成功接入节点互为2跳邻域内邻居节点。假设接入帧中有7个接入时隙AS，其中，AS1-AS7中已成功接入的节点优先级分别为，由于节点优先级为的前4个节点不存在优先级抢占，因此顺序宣告 占用前6个信息时隙。此时节点5在本节点的AS时隙到来之前的信息时隙标记表如图5 所示，当节点5在本节点的AS时隙中搜寻此信息时隙标记表，按照优先级抢占规则对比得 到节点优先级3和2节点占用的信息时隙可以抢占，则将对应时隙标记为己用，并广播预约声明。随后节点1更新信息时隙标记表后，根据节点优先级抢占规则只可占用空闲时隙。而节点4在更新信息时隙标记表后，可抢占节点1的信息时隙，并根据本节点的时隙需求 继续占用空闲的信息时隙。节点在抢占帧发送的预约控制报文为固定格式，包含节点状态信息、邻居状态信息、 信息时隙信息等信息。表1为预约控制报文中需包含的具体信息，表2为NodeState字段、 NeighState字段、IsSlotInfo字段格式。如图6、图7所示为预约控制报文所包含内容的示意 图。表1表2Node_Priority字段生成方法：将数据缓存队列分为高中低3个优先级，优先发完高优先级的数据报文，将高优先级 发完后，再按顺序发中低队列数据报文。节点优先级分为High-Middle-Low三段，共9级，其中Low∈,Middle∈,High∈。节点优先级按照以下规则划分优先级段：只要高优先级队列存在数据包，则priority＝High。若高优先级队列无包，而中优先级队列存在数据包，则priority＝Middle。若只有低优先级队列存在数据包，则priority＝Low。节点优先级按照启发式节点优先级调整算法进行动态调整。在该算法中， last_SendPacketSize表示上一帧周期发包数，cur_SendPacketSize表示当前节点队列存在的包的数量。Node_Capacity字段生成方法：设节点高优先级队列报文总数为x，中优先级队列报文总数为y，低优先级报文总数为 z，节点所有缓存队列报文总数为sum，节点i的业务容量ci定义如下：其中，w1,w2,w3表示高、中、低优先级队列所占权重。本发明实施例中邻居节点信息处理算法NNIPA详细算法步骤，包括：其中，Cneigh_t表示节点两跳范围内邻居节点的业务容量情况，NPneigh_t表示节点两跳 范围内邻居节点的时隙需求压力，needSlotNumi为节点i当前的需求时隙数目，lockedSlotNumi为节点i已锁定时隙数目，stillNeedNumi为当前时刻节点i的实际仍需预约的时隙数，minc为所有两跳范围内邻居的业务容量最小值，maxc为两跳范围内邻居的业务容量最大值，cneigh_i为邻居节点i的标准化处理后的业务容量，minstill为所有两跳范围内邻居的仍需预约的信息时隙数目最小值，maxstill为两跳范围内邻居的仍需预约信息时隙数目业务容量最大值，n表示两跳范围内邻居节点总数，stillNeedNumneigh_i为标准化处理后邻居 节点i的需求时隙数，prii为邻居节点i的节点优先级，M表示优先级影响因子。本发明中节点中优先级随机接入算法PRAA节点接入信道概率计算如下其中，α＞1,Pmax＝1，nc表示2跳以内的竞争节点数，Pmax表示节点竞争接入概率最大值， priority为节点优先级。本发明中时隙自适应预约算法DQN-TSARA实施如下：学习模型-状态集合S：S＝其中，numt表示节点当前要预约的时隙数，由节点实际数据缓存队列数据报文数量计 算所得。Cneigh_t的计算式为：NPneigh_t的计算式为：学习模型-动作集合A：将节点预约时隙数目作为学习模型的决策动作，因此动作定义 为：A＝{a1,a2,a3,a4,a5}当选择动作a1:num＝max当选择动作a2:num＝max当选择动作a3:num＝num当选择动作a4:num＝max当选择动作a5:num＝max其中，nummin表示节点预约时隙数目的下限最小值，nummin≥0。nummax表示节点预约时隙数目的上限最大值，nummax≤K，K为一帧周期中总的信息时隙数目。学习模型-奖励函数R：根据节点自适应调整预约时隙后周围邻居节点的时隙预约压力 是否得到缓解来设置奖励，设定Q为邻居业务压力临界值，当两跳范围内邻居节点的时隙 需求压力小于或等于邻居业务压力临界值则给予正向奖励，反之给予惩罚。Q的大小与实 际网络规模大小以及网络节点密集程度相关。因此学习模型的奖励表示如下：综上所述，本发明实施例基于DQN的时隙自适应预约算法详细步骤如下：本领域的普通技术人员将会意识到，这里所述的实施例是为了帮助读者理解本发明的原 理，应被理解为本发明的保护范围并不局限于这样的特别陈述和实施例。对于本领域的技 术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何 修改、等同替换、改进等，均应包含在本发明的权利要求范围之内。
