标题title
一种机顶盒显示缅甸文的方法
摘要abst
本发明公开了一种机顶盒显示缅甸文的方法。现有方法无法直接使用Win Innwa字库来显示缅甸文，无法满足产品多语言需求。本发明方法首先选取一个未在机顶盒UTF‑8编码字库中使用的Unicode区段，将Win Innwa字符一一放入对应偏移地址中；机顶盒将Win Innwa编码一一增加偏移量，转换为Unicode编码；使用Unicode编码，将扩展字库中指定Unicode编码区段中缅甸文字符进行绘制显示。本发明方法支持运营商发送的Win Innwa编码业务信息的显示，同时支持本地字符串编码显示缅甸文，在软件较小改动的基础上实现同时支持缅甸文和UTF‑8编码显示，满足了缅甸运营商需求。
权利要求书clms
1.一种机顶盒显示缅甸文的方法，其特征在于：该方法首先将Win Innwa字符一一映射到UTF-8编码字库中，得到扩展字库；然后机顶盒将获取到的Win Innwa字符编码转换为Unicode编码，使用扩展字库显示缅甸文；具体是：Win Innwa编码范围为0x00至0xFF，选取一个未在机顶盒UTF-8编码字库中使用的Unicode区段，使用字库编辑工具将WinInnwa字符一一放入对应偏移地址中，映射之后的扩展字库同时支持UTF-8编码和Win Innwa编码；机顶盒将Win Innwa编码一一增加偏移量，转换为Unicode编码；机顶盒使用Unicode编码，将扩展字库中指定Unicode编码区段中缅甸文字符进行绘制显示。2.如权利要求1所述的一种机顶盒显示缅甸文的方法，其特征在于，机顶盒使用扩展字库显示运营商Win Innwa编码缅甸文，具体如下：步骤机顶盒接收运营商业务信息，运营商使用私有协议传输Win Innwa字符串编码，定义起始标识符和结束标识符，在起始标识符和结束标识符之间的数据为Win Innwa编码字符串；步骤机顶盒检测起始标识符和结束标识符，将Win Innwa编码取出；步骤机顶盒将Win Innwa编码一一增加偏移量，转换为Unicode编码；步骤机顶盒使用Unicode编码，将扩展字库中指定Unicode编码区段中缅甸文字符进行绘制显示。3.如权利要求1所述的一种机顶盒显示缅甸文的方法，其特征在于，机顶盒使用扩展字库显示机顶盒内置缅甸文，具体如下：步骤将机顶盒需要显示的本地字符串使用Win Innwa编码；步骤将Win Innwa编码一一增加偏移量，转换为Unicode编码；步骤机顶盒使用Unicode编码，将扩展字库中指定Unicode编码区段中缅甸文字符进行绘制显示。4.如权利要求2或3所述的一种机顶盒显示缅甸文的方法，其特征在于：所述Win Innwa编码转换为Unicode编码时，增加的偏移量为扩展字库时所选择的Unicode区段的偏移量。
说明书desc
技术领域本发明属于机顶盒领域，具体涉及一种机顶盒显示缅甸文的方法。背景技术ASCII是基于拉丁字母的一套编码系统。编码范围为0x00至0x7F，主要用于显示现代英语。而其扩展版本EASCII则可以部分支持其他西欧语言，EASCII是将ASCII码由7位扩充为8位而成。EASCII的编码范围0x00至0xFF，扩充出来的符号包括表格符号、计算符号、希腊字母和特殊的拉丁符号。Unicode，是计算机科学领域里的一项业界标准，包括字符集、编码方案等。Unicode是为了解决传统的字符编码方案的局限而产生的，它为每种语言中的每个字符设定了统一并且唯一的二进制编码，以满足跨语言、跨平台进行文本转换、处理的要求。Unicode的实现方式不同于编码方式。一个字符的Unicode编码是确定的。但是在实际传输过程中，由于不同系统平台的设计不一致，以及出于节省空间的目的，对Unicode编码的实现方式有所不同。Unicode的实现方式称为Unicode转换格式。UTF-8是最经常看到的编码格式之一。这是一种变长编码格式，变长的目的是节省存储空间。用一至四个字节对Unicode字符集中的所有有效编码点进行编码。UTF-8为了向后兼容ASCII码，Unicode中前128个字符，使用与ASCII码相同的二进制值的单个字节进行编码，而且字符与ASCII码的字符一一对应，这使得原来处理ASCII字符的软件无须或只须做少部分修改，即可继续使用。自2009年以来，UTF-8一直是万维网的最主要的编码形式。在Unicode中，区段被定义为一组连续码位的范围。区段会被给予唯一的名称，且区段与区段之间不会重叠。例如：基本拉丁字母区段范围U+0000至U+007F；拉丁字母补充-1区段范围U+0080至U+00FF；盲文点字模型区段范围U+2800至U+28FF；中日韩统一表意文字区段范围U+4E00至U+9FFF。缅甸文属于婆罗米系的文字，其书写特征是呈圆形。其字符个数众多，大都由百来个图形字符组合而成。由于历史原因很长一段时间缅甸文未有官方统一编码标准，许多字体制造商公司设计发布不同的缅甸文编码，包括Win Innwa、Myazedi、Zawgyi等。其中WinInnwa是最早在缅甸全国范围流通的缅甸文字体，Win Innwa是在单字节编码的ASCII编码系统研发而来。本质上是将英文字体换了个形状，与英文是不兼容的，如下举例几个UTF-8编码拉丁字符与Win Innwa编码缅甸文字符的对应关系：字符编码0x21：英文‘！’、缅甸文字符编码0x62：英文‘b’、缅甸文字符编码0x63：英文‘c’、缅甸文虽然缅甸政府于2019年宣布全国统一采用Unicode标准，但是缅甸节目运营商为了支持已售产品以及升级系统的成本压力，缅甸节目运营商仍然保持使用Win Innwa对提供的业务进行编码。运营节目的节目名、电子节目单等均为WinInnwa编码，运营商使用私有协议传输Win Innwa字符串编码，定义起始标识符为‘)’，在起始标识符和结束标识符之间的数据为Win Innwa编码字符串。通常机顶盒使用标准UTF-8字库来支持多语言显示，由于Win Innwa编码与UTF-8编码不兼容，存在冲突。因此无法直接使用Win Innwa字库来显示缅甸文，会导致拉丁字符显示异常，无法满足产品多语言需求，不能同时支持Win Innwa编码的缅甸文和UTF-8编码的字符串，无法满足缅甸运营商的产品需求。专利号为201010577378.X的发明专利公开了一种机顶盒显示缅甸文的方法，将PC机上的缅甸文字库的字符串转换为点阵数据，同时对每个字符串的宽高数据记录到点阵字库中，并对缅甸文字库中需要和别的字符串进行组合的字符串进行登记，将其参加组合的字符串在点阵字库中的起始坐标和位置进行登记；当机顶盒要进行缅甸文显示时，根据字符编码查找点阵字库中需要的字符串，并取出字符串的字符数据获得其字符串的宽高，读取下一个需要组合的字符编码，取出所需的字符串，按照前一字符串的起始坐标和位置进行组合，来完成一完整缅甸文字的显示。该方法虽然解决了缅甸文的显示问题，但是是通过转换为点阵字库的方法，不能使用标准的字库处理程序，例如不能调节字号等。发明内容本发明的目的是为了解决机顶盒不能同时支持显示UTF-8编码字符串和WinInnwa编码缅甸文的问题，提供一种机顶盒显示缅甸文的方法，以使机顶盒同时支持显示UTF-8编码的字符串和缅甸Win Innwa编码的缅甸文，实现同时支持UTF-8编码多语言显示和Win Innwa编码缅甸文显示。本发明通过以下技术方案得以实现：首先将Win Innwa字符一一映射到UTF-8编码字库中，得到扩展字库；然后机顶盒将获取到的Win Innwa字符编码转换为Unicode编码，使用扩展字库显示缅甸文；具体是：Win Innwa编码范围为0x00至0xFF，选取一个未在机顶盒UTF-8编码字库中使用的Unicode区段，使用字库编辑工具将Win Innwa字符一一放入对应偏移地址中，映射之后的扩展字库同时支持UTF-8编码和Win Innwa编码；机顶盒将Win Innwa编码一一增加偏移量，转换为Unicode编码；机顶盒使用Unicode编码，将扩展字库中指定Unicode编码区段中缅甸文字符进行绘制显示。机顶盒使用扩展字库显示运营商Win Innwa编码缅甸文，具体如下：步骤机顶盒接收运营商业务信息，运营商使用私有协议传输Win Innwa字符串编码，定义起始标识符和结束标识符，在起始标识符和结束标识符之间的数据为Win Innwa编码字符串；步骤机顶盒检测起始标识符和结束标识符，将Win Innwa编码取出；步骤机顶盒将Win Innwa编码一一增加偏移量，转换为Unicode编码；步骤机顶盒使用Unicode编码，将扩展字库中指定Unicode编码区段中缅甸文字符进行绘制显示。机顶盒使用扩展字库显示机顶盒内置缅甸文，具体如下：步骤将机顶盒需要显示的本地字符串使用Win Innwa编码；步骤将Win Innwa编码一一增加偏移量，转换为Unicode编码；步骤机顶盒使用Unicode编码，将扩展字库中指定Unicode编码区段中缅甸文字符进行绘制显示。本发明方法通过将Win Innwa字符一一映射到UTF-8编码字库，映射之后的扩展字库可以同时支持UTF-8编码和Win Innwa编码。一方面支持运营商发送的Win Innwa编码业务信息的显示，另一方面支持本地字符串编码显示缅甸文。利用本发明方法，在软件较小改动的基础上实现了同时支持缅甸文和UTF-8编码显示，满足了缅甸运营商需求。附图说明图1为本发明扩展字库映射Win Innwa字符流程图；图2为本发明使用扩展字库显示运营商Win Innwa编码缅甸文流程图；图3为本发明使用扩展字库显示机顶盒内置缅甸文流程图；图4为本发明扩展字库处理及字符显示示意图。具体实施方式下面结合说明书附图，对本发明实施例进行详细说明。一种机顶盒显示缅甸文的方法，首先需要将Win Innwa字符一一映射到UTF-8编码字库中，得到扩展字库；然后机顶盒将获取到的Win Innwa字符编码转换为Unicode编码，使用扩展字库显示缅甸文。图1为映射Win Innwa字符流程图，将Win Innwa字符一一映射到UTF-8编码字库中。Win Innwa编码范围为0x00至0xFF，选取一个未在机顶盒UTF-8编码字库中使用的Unicode区段，使用字库编辑工具将Win Innwa字符一一放入对应偏移地址中，映射之后的扩展字库同时支持UTF-8编码和Win Innwa编码。具体流程如下：步骤在机顶盒UTF-8编码字体中选取一个未使用Unicode编码区段，本实施例中选取盲文点字模型区段为例，编码范围为U+2800至U+28FF，偏移量为0x2800；步骤Win Innwa编码范围为0x00至0xFF，使用字库编辑工具将Win Innwa编码字符一一放入选取Unicode编码区段的偏移地址中，例如：Win Innwa字符编码0x21的字符放入UTF-8编码U+2821；Win Innwa字符编码0x62的字符放入UTF-8编码U+2862；Win Innwa字符编码0x63的字符放入UTF-8编码U+2863；映射之后的扩展字库在不影响原有Unicode编码区段的情况下支持Win Innwa缅甸文字符，机顶盒通过如下方式支持运营商发送的Win Innwa编码缅甸文显示，以及显示机顶盒内置缅甸文。图2为机顶盒使用扩展字库显示运营商Win Innwa编码缅甸文流程，具体如下：步骤机顶盒接收运营商业务信息，运营商使用私有协议传输Win Innwa字符串编码，定义起始标识符和结束标识符)’)，在起始标识符和结束标识符之间的数据为Win Innwa编码字符串；步骤机顶盒检测起始标识符和结束标识符，将Win Innwa编码取出；步骤机顶盒将Win Innwa编码一一增加偏移量，转换为Unicode编码；增加的偏移量为扩展字库时所选择的Unicode区段的偏移量；本实施例中偏移量为0x2800；步骤机顶盒使用Unicode编码将扩展字库中指定Unicode编码区段中缅甸文字符进行绘制显示。以接收运营商Win Innwa编码“)”为例：检测起始标识符和结束标识符，将Win Innwa编码取出，即“tm&amp;S”；Win Innwa编码序列为“0x74 0x6D 0x26 0x53”，对应四个字符和即缅甸文字符串为增加偏移量转换为Unicode编码为“0x2874 0x286D 0x28260x2853”，机顶盒使用Unicode编码“0x2874 0x286D 0x2826 0x2853”将扩展字库中指定Unicode区段中缅甸文字符进行绘制显示，即显示为图3为机顶盒使用扩展字库显示机顶盒内置缅甸文流程，具体如下：步骤将机顶盒需要显示的本地字符串使用Win Innwa编码；步骤将Win Innwa编码一一增加偏移量转换为Unicode编码；步骤使用Unicode编码，将扩展字库中指定Unicode编码区段中缅甸文字符进行绘制显示。以需要显示语义为“Asia”的缅甸文字符串为例，由四个缅甸字符组成和转换为Win Innwa编码序列为“0x74 0x6D 0x26 0x53”；增加偏移量转换为Unicode区段编码为“0x2874 0x286D 0x2826 0x2853”；机顶盒显示时使用Unicode编码“0x2874 0x286D 0x2826 0x2853”将扩展字库中指定Unicode区段中缅甸文字符进行绘制显示，即显示为图4为本发明扩展字库处理及字符显示示意图，展示了扩展字库处理及编码为0x21的字符在Win Innwa编码、UTF-8编码下显示对应字符的过程。本发明技术要点主要包括：1、首先需要将Win Innwa字符一一映射到UTF-8编码字库中。Win Innwa编码范围为0x00至0xFF，选取一个未在机顶盒UTF-8编码字库中使用的Unicode区段，使用字库编辑工具将Win Innwa字符一一放入对应偏移地址中，映射之后的扩展字库可以同时支持UTF-8编码和Win Innwa编码；2、映射之后的扩展字库在不影响原有Unicode编码区段的情况下支持Win Innwa缅甸文字符。机顶盒接收运营商业务信息，运营商使用私有协议传输Win Innwa字符串编码，在起始标识符和结束标识符之间的数据为Win Innwa编码字符串，机顶盒检测起始标识符和结束标识符，将Win Innwa编码取出之后一一增加偏移量转换为Unicode编码，使用Unicode编码将扩展字库中指定Unicode编码区段中缅甸文字符进行绘制显示；3、另一方面支持显示本地字符串，将需要显示的字符串使用Win Innwa编码，然后将Win Innwa编码一一增加偏移量转换为Unicode编码，使用Unicode编码将扩展字库中指定Unicode编码区段中缅甸文字符进行绘制显示；4、本发明通过将Win Innwa字符一一映射到UTF-8编码字库，映射之后的扩展字库可以同时支持UTF-8编码和Win Innwa编码。一方面支持运营商发送的Win Innwa编码业务信息的显示，另一方面支持本地字符串编码显示缅甸文。在软件较小改动的基础上实现了同时支持缅甸文和UTF-8编码显示，满足了缅甸运营商需求。
