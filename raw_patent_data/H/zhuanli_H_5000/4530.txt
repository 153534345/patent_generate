标题title
状态机状态指示功能验证方法、装置和电子设备
摘要abst
本申请提供一种状态机状态指示功能验证方法、装置和电子设备，在状态机的状态指示由第二状态转变为第一状态的过程中，向以太网接口发送数据，以确定真实窗口的窗口边界。在状态指示为第一状态的情况下，根据向以太网接口发送的数据中存在的具有错误同步头的码块、数据构建的虚拟窗口的窗口边界以及真实窗口的窗口边界，验证第一状态转变的正确性。在状态指示为第二状态的情况下，根据向以太网接口发送的数据中存在的具有正确同步头的码块，验证第二状态转变的正确性。该方案中，在状态机的第一状态和第二状态转变过程中，结合虚拟窗口和真实窗口边界检测的方式，可避免在验证时由于边界之间的差异导致的验证不完善的缺陷。
权利要求书clms
1.一种状态机状态指示功能验证方法，其特征在于，用于对以太网接口接收数据检查的状态机的状态指示功能进行验证，所述状态机的状态指示包括第一状态和第二状态，所述第一状态表征找到所述以太网接口接收到的包含M位的比特位的码块的边界，所述第二状态表征未找到所述码块的边界，所述方法包括：在所述状态指示由第二状态转变为第一状态的过程中，执行边界检测进程，向所述以太网接口发送数据，以确定真实窗口的窗口边界，所述真实窗口包含N个码块；在所述状态指示为第一状态的情况下，根据向所述以太网接口发送的数据中存在的具有错误同步头的码块、所述数据构建的虚拟窗口的窗口边界以及所述真实窗口的窗口边界，验证所述第一状态转变的正确性；在所述状态指示为第二状态的情况下，根据向所述以太网接口发送的数据中存在的具有正确同步头的码块，验证所述第二状态转变的正确性。2.根据权利要求1所述的状态机状态指示功能验证方法，其特征在于，所述执行边界检测进程，向所述以太网接口发送数据，以确定真实窗口的窗口边界的步骤，包括：向所述以太网接口连续发送M-3个具有正确同步头的码块，以使所述状态指示保持在第二状态；清空检测同步头的次数，并保留所述正确同步头的位置信息；向所述以太网接口连续发送3个具有正确同步头的码块，并连续发送M个不存在同步头的码块，以使所述状态机从下一个码块开始在正确的位置检测到正确同步头；向所述以太网接口连续发送N个具有正确同步头的码块，以确定从下一个码块开始为真实窗口的窗口边界。3.根据权利要求2所述的状态机状态指示功能验证方法，其特征在于，各所述存在正确同步头的码块中包含一个正确同步头；连续的M个不存在同步头的码块中，各个码块的比特位的数值相同；相邻两个存在正确同步头的码块和不存在同步头的码块中，相邻位置的比特位的数值相同。4.根据权利要求1所述的状态机状态指示功能验证方法，其特征在于，所述根据向所述以太网接口发送的数据中存在的具有错误同步头的码块、所述数据构建的虚拟窗口的窗口边界以及所述真实窗口的窗口边界，验证所述第一状态转变的正确性的步骤，包括：向所述以太网接口发送数据，基于发送的数据验证构建的虚拟窗口是否由N个码块构成；若由N个码块构成，在确定所述虚拟窗口中存在P-1个错误的同步头的码块时，若所述第一状态保持不同，则转变正确；在确定所述虚拟窗口中存在P个错误的同步头的码块时，结合所述数据构建的虚拟窗口的窗口边界和所述真实窗口的窗口边界，验证所述第一状态转变的正确性；若不由N个码块构成，根据所述虚拟窗口中存在的具有错误同步头的码块，验证所述第一状态转变的正确性。5.根据权利要求4所述的状态机状态指示功能验证方法，其特征在于，所述基于发送的数据验证构建的虚拟窗口是否由N个码块构成的步骤，包括：基于发送的数据并结合所述第一状态的转变情况，验证构建的虚拟窗口中的码块数量是否大于N-1个，且小于N+1个；若所述虚拟窗口中的码块数量大于N-1个且小于N+1个，则确定所述虚拟窗口由N个码块构成。6.根据权利要求4所述的状态机状态指示功能验证方法，其特征在于，所述在确定所述虚拟窗口中存在P个错误的同步头的码块时，结合所述数据构建的虚拟窗口的窗口边界和所述真实窗口的窗口边界，验证所述第一状态转变的正确性的步骤，包括：在确定所述虚拟窗口中存在P个错误的同步头的码块的情况下，在所述数据构建的所有的虚拟窗口的窗口边界与所述真实窗口的窗口边界不同，且所述P个错误的同步头的码块并未全部位于同一个真实窗口时，若所述第一状态保持不变，则转变正确；在所述数据构建的所有的虚拟窗口的窗口边界与所述真实窗口的窗口边界相同，且所述P个错误的同步头的码块位于同一个真实窗口内，若所述第一状态转变为第二状态，则转变正确。7.根据权利要求5所述的状态机状态指示功能验证方法，其特征在于，所述若不由N个码块构成，根据所述虚拟窗口中存在的具有错误同步头的码块，验证所述第一状态转变的正确性的步骤，包括：在不由N个码块构成的情况下，在所述虚拟窗口中存在P个具有错误同步头的码块时，若所述第一状态保持不变，则转变正确。8.根据权利要求1所述的状态机状态指示功能验证方法，其特征在于，所述根据向所述以太网接口发送的数据中存在的具有正确同步头的码块，验证所述第二状态转变的正确性的步骤，包括：在确定向所述以太网接口发送的数据中存在连续的N个具有正确同步头的码块时，若所述第二状态转变为第一状态，则转变正确。9.根据权利要求8所述的状态机状态指示功能验证方法，其特征在于，所述在确定向所述以太网接口发送的数据中存在N个具有正确同步头的码块时，若所述第二状态转变为第一状态，则转变正确的步骤，包括：若基于向所述以太网接口发送的数据中确定连续小于N+1个具有正确同步头的码块时所述第二状态转变为第一状态，并且，基于向所述以太网接口发送的数据中确定连续大于N-1个具有正确同步头的码块时所述第二状态保持不变，则确定存在N个具有正确同步头的码块时所述第二状态转变为第一状态的转变正确。10.一种状态机状态指示功能验证装置，其特征在于，用于对以太网接口接收数据检查的状态机的状态指示功能进行验证，所述状态机的状态指示包括第一状态和第二状态，所述第一状态表征找到所述以太网接口接收到的包含M位的比特位的码块的边界，所述第二状态表征未找到所述码块的边界，所述装置包括：确定模块，用于在所述状态指示由第二状态转变为第一状态的过程中，执行边界检测进程，向所述以太网接口发送数据，以确定真实窗口的窗口边界，所述真实窗口包含N个码块；第一验证模块，用于在所述状态指示为第一状态的情况下，根据向所述以太网接口发送的数据中存在的具有错误同步头的码块、所述数据构建的虚拟窗口的窗口边界以及所述真实窗口的窗口边界，验证所述第一状态转变的正确性；第二验证模块，用于在所述状态指示为第二状态的情况下，根据向所述以太网接口发送的数据中存在的具有正确同步头的码块，验证所述第二状态转变的正确性。11.一种电子设备，其特征在于，包括一个或多个存储介质和一个或多个与存储介质通信的处理器，一个或多个存储介质存储有处理器可执行的机器可执行指令，当电子设备运行时，处理器执行所述机器可执行指令，以执行权利要求1-9中任意一项所述的方法步骤。
说明书desc
技术领域本申请涉及通信技术领域，具体而言，涉及一种状态机状态指示功能验证方法、装置和电子设备。背景技术PCSlock state为IEEE802.3中，对于部分以太网接口接收数据检查的状态机，其描述的内容分为两个部分，其一是rx_block_lock的状态为false的情况下，要怎样才会转换成true；其二是rx_block_lock的状态为true的情况下，要怎样才会转换成false。rx_block_lock为PCS lock state状态机中用于表示是否找到接收到的数据中的block的边界的变量。rx_block_lock为true时表示找到了block的边界，为false时表示未找到或丢失了block的边界。若要使用以太网接口，则需要对PCS lock state的状态机的状态功能进行验证。现有方式中，一般是通过向以太网接口发送验证数据，并检测状态机的状态指示的转变状态，从而验证状态机的状态指示功能。现有技术中所采用的验证方式，一般是直接基于发送的数据并结合状态机的状态指示来验证，在验证完善性上效果不佳。发明内容本申请的目的包括，例如，提供了一种状态机状态指示功能验证方法、装置和电子设备，其能够保障状态机状态转换验证的准确性。本申请的实施例可以这样实现：第一方面，本申请提供一种状态机状态指示功能验证方法，用于对以太网接口接收数据检查的状态机的状态指示功能进行验证，所述状态机的状态指示包括第一状态和第二状态，所述第一状态表征找到所述以太网接口接收到的包含M位的比特位的码块的边界，所述第二状态表征未找到所述码块的边界，所述方法包括：在所述状态指示由第二状态转变为第一状态的过程中，执行边界检测进程，向所述以太网接口发送数据，以确定真实窗口的窗口边界，所述真实窗口包含N个码块；在所述状态指示为第一状态的情况下，根据向所述以太网接口发送的数据中存在的具有错误同步头的码块、所述数据构建的虚拟窗口的窗口边界以及所述真实窗口的窗口边界，验证所述第一状态转变的正确性；在所述状态指示为第二状态的情况下，根据向所述以太网接口发送的数据中存在的具有正确同步头的码块，验证所述第二状态转变的正确性。在可选的实施方式中，所述执行边界检测进程，向所述以太网接口发送数据，以确定真实窗口的窗口边界的步骤，包括：向所述以太网接口连续发送M-3个具有正确同步头的码块，以使所述状态指示保持在第二状态；清空检测同步头的次数，并保留所述正确同步头的位置信息；向所述以太网接口连续发送3个具有正确同步头的码块，并连续发送M个不存在同步头的码块，以使所述状态机从下一个码块开始在正确的位置检测到正确同步头；向所述以太网接口连续发送N个具有正确同步头的码块，以确定从下一个码块开始为真实窗口的窗口边界。在可选的实施方式中，各所述存在正确同步头的码块中包含一个正确同步头；连续的M个不存在同步头的码块中，各个码块的比特位的数值相同；相邻两个存在正确同步头的码块和不存在同步头的码块中，相邻位置的比特位的数值相同。在可选的实施方式中，所述根据向所述以太网接口发送的数据中存在的具有错误同步头的码块、所述数据构建的虚拟窗口的窗口边界以及所述真实窗口的窗口边界，验证所述第一状态转变的正确性的步骤，包括：向所述以太网接口发送数据，基于发送的数据验证构建的虚拟窗口是否由N个码块构成；若由N个码块构成，在确定所述虚拟窗口中存在P-1个错误的同步头的码块时，若所述第一状态保持不同，则转变正确；在确定所述虚拟窗口中存在P个错误的同步头的码块时，结合所述数据构建的虚拟窗口的窗口边界和所述真实窗口的窗口边界，验证所述第一状态转变的正确性；若不由N个码块构成，根据所述虚拟窗口中存在的具有错误同步头的码块，验证所述第一状态转变的正确性。在可选的实施方式中，所述基于发送的数据验证构建的虚拟窗口是否由N个码块构成的步骤，包括：基于发送的数据并结合所述第一状态的转变情况，验证构建的虚拟窗口中的码块数量是否大于N-1个，且小于N+1个；若所述虚拟窗口中的码块数量大于N-1个且小于N+1个，则确定所述虚拟窗口由N个码块构成。在可选的实施方式中，所述在确定所述虚拟窗口中存在P个错误的同步头的码块时，结合所述数据构建的虚拟窗口的窗口边界和所述真实窗口的窗口边界，验证所述第一状态转变的正确性的步骤，包括：在确定所述虚拟窗口中存在P个错误的同步头的码块的情况下，在所述数据构建的所有的虚拟窗口的窗口边界与所述真实窗口的窗口边界不同，且所述P个错误的同步头的码块并未全部位于同一个真实窗口时，若所述第一状态保持不变，则转变正确；在所述数据构建的所有的虚拟窗口的窗口边界与所述真实窗口的窗口边界相同，且所述P个错误的同步头的码块位于同一个真实窗口内，若所述第一状态转变为第二状态，则转变正确。在可选的实施方式中，所述若不由N个码块构成，根据所述虚拟窗口中存在的具有错误同步头的码块，验证所述第一状态转变的正确性的步骤，包括：在不由N个码块构成的情况下，在所述虚拟窗口中存在P个具有错误同步头的码块时，若所述第一状态保持不变，则转变正确。在可选的实施方式中，所述根据向所述以太网接口发送的数据中存在的具有正确同步头的码块，验证所述第二状态转变的正确性的步骤，包括：在确定向所述以太网接口发送的数据中存在连续的N个具有正确同步头的码块时，若所述第二状态转变为第一状态，则转变正确。在可选的实施方式中，所述在确定向所述以太网接口发送的数据中存在N个具有正确同步头的码块时，若所述第二状态转变为第一状态，则转变正确的步骤，包括：若基于向所述以太网接口发送的数据中确定连续小于N+1个具有正确同步头的码块时所述第二状态转变为第一状态，并且，基于向所述以太网接口发送的数据中确定连续大于N-1个具有正确同步头的码块时所述第二状态保持不变，则确定存在N个具有正确同步头的码块时所述第二状态转变为第一状态的转变正确。第二方面，本申请提供一种状态机状态指示功能验证装置，用于对以太网接口接收数据检查的状态机的状态指示功能进行验证，所述状态机的状态指示包括第一状态和第二状态，所述第一状态表征找到所述以太网接口接收到的包含M位的比特位的码块的边界，所述第二状态表征未找到所述码块的边界，所述装置包括：确定模块，用于在所述状态指示由第二状态转变为第一状态的过程中，执行边界检测进程，向所述以太网接口发送数据，以确定真实窗口的窗口边界，所述真实窗口包含N个码块；第一验证模块，用于在所述状态指示为第一状态的情况下，根据向所述以太网接口发送的数据中存在的具有错误同步头的码块、所述数据构建的虚拟窗口的窗口边界以及所述真实窗口的窗口边界，验证所述第一状态转变的正确性；第二验证模块，用于在所述状态指示为第二状态的情况下，根据向所述以太网接口发送的数据中存在的具有正确同步头的码块，验证所述第二状态转变的正确性。第三方面，本申请提供一种电子设备，包括一个或多个存储介质和一个或多个与存储介质通信的处理器，一个或多个存储介质存储有处理器可执行的机器可执行指令，当电子设备运行时，处理器执行所述机器可执行指令，以执行前述实施方式中任意一项所述的方法步骤。本申请实施例的有益效果包括，例如：本申请提供一种状态机状态指示功能验证方法、装置和电子设备，在状态机的状态指示由第二状态转变为第一状态的过程中，向以太网接口发送数据，以确定真实窗口的窗口边界。在状态指示为第一状态的情况下，根据向以太网接口发送的数据中存在的具有错误同步头的码块、数据构建的虚拟窗口的窗口边界以及真实窗口的窗口边界，验证第一状态转变的正确性。在状态指示为第二状态的情况下，根据向以太网接口发送的数据中存在的具有正确同步头的码块，验证第二状态转变的正确性。该方案中，在状态机的第一状态和第二状态转变过程中，结合虚拟窗口和真实窗口边界检测的方式，可避免在验证时由于边界之间的差异导致的验证不完善的缺陷。附图说明为了更清楚地说明本申请实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本申请的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1为本申请实施例提供的验证方法的流程图；图2为图1中步骤S101包含的子步骤的流程图；图3为本申请实施例提供的验证测试例的执行流程示意图；图4为图1中步骤S102包含的子步骤的流程图；图5为本申请实施例提供的确定窗口边界的执行流程示意图；图6为本申请实施例提供的电子设备的结构框图；图7为本申请实施例提供的验证装置的功能模块框图。图标：110-存储介质；120-处理器；130-状态机状态指示功能验证装置；131-确定模块；132-第一验证模块；133-第二验证模块；140-通信接口。具体实施方式为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本申请实施例的组件可以以各种不同的配置来布置和设计。因此，以下对在附图中提供的本申请的实施例的详细描述并非旨在限制要求保护的本申请的范围，而是仅仅表示本申请的选定实施例。基于本申请中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。应注意到：相似的标号和字母在下面的附图中表示类似项，因此，一旦某一项在一个附图中被定义，则在随后的附图中不需要对其进行进一步定义和解释。在本申请的描述中，需要说明的是，若出现术语“第一”、“第二”等仅用于区分描述，而不能理解为指示或暗示相对重要性。需要说明的是，在不冲突的情况下，本申请的实施例中的特征可以相互结合。RTL对数据进行处理时，通常是以一段存在前后边界的、有固定长度的数据为单位进行处理。这样的前后边界所包含的范围即为一个窗口，即window。找到边界即可确定window。在对于如10G/25速率中，rx_block_lock为true的情况下，状态机对接收到的数据进行检测的是64个block的区间。rx_block_lock的状态为false时，会对收到的每一个block进行检查，确认该block在检查的位置看到的两比特是否为syncHeader。syncHeader为block中用于锁定一个block边界的两比特数据，该两比特数据为2’b01/2’b10时为正确值。若是，则下一个收到的block检查的位置不变。继续检查看到的两比特是否为syncHeader；若不是，则下一个收到的block检查的位置会左移一个比特，并继续检查看到的两比特是否为syncHeader。在10G/25速率中，只有在连续收到的64个block的同一个检查的位置都看到两比特为syncHeader，rx_block_lock才会转换成true。此时该检查的位置固定为syncHeader的位置。rx_block_lock的状态为true时，会对收到的block进行检查。检查范围为，当前收到的n个block与接下来收到的n个block之间为一个边界，两个相邻的边界之间为window，window中的n个block为一个检查的单位。当window中在syncHeader的位置检查出m个不是syncHeader的2比特，则rx_block_lock的状态转换成false。对于10G/25G速率下，n＝64，m＝16；对于40G/50G/100G速率下，n＝1024，m＝65。该状态机应用范围广泛，10G/25G/40G/50G/100G等速率中都有使用到，使用范围很广，是接口很重要的功能点。其中10G/25G与40G/50G/100G在一些范围上略有不同，但在整体思路上没有区别。本实施例后续描述中，主要以10G/25G为例进行描述，其他速率下可以将上述的m和n进行替换即可。若要使用以太网接口，则需要对PCS lock state状态机进行验证。现有的验证方式中，在并未找到window的边界的情况下，若想要验证rx_block_lock由true转变为false的条件以及转变的正确性，为了确保在一个window的64个block中能够见到至少16个错误的syncHeader，采用的方案是给状态机发送连续31个插入错误syncHeader的block，这样即可确保存在一个window，至少见到了16个存在错误的syncHeader的block。此外，还要进行另一项测试：在每64个block中固定选择15个block插入syncHeader，这样连续发送多次，验证rx_block_lock会一直保持true的状态。而想要检查rx_block_lock由false转为true的条件，则是先让rx_block_lock无法转为true，经过一段时间修改发送的内容后使其转为true。采用的方式是，先连续给状态机发送63个存在正确syncHeader的block，然后发送一个存在错误syncHeader的block，这样连续发送多次。这种情况下状态机不会连续找到超过63个在同一位置存在syncHeader的block。之后再连续发送syncHeader正确的block，之后变量会正常转为true。现有技术中所采用的验证方式，其中，在rx_block_lock由true转变为false的验证方案中，虽然能够确保window内出现大于或等于16个存在错误syncHeader，但是无法确保错误syncHeader只有16个。因此，是无法准确保障窗口内错误syncHeader只有16个，进而无法保障其状态转变的结果的准确性。在rx_block_lock由true转变为false的验证方案中，由于状态机在检测到2比特不为syncHeader时会左移检查的位置，且一个block中并非仅有syncHeader对应的2比特可能被识别为syncHeader，其他地方也可能出现01或10，因此无法确定当前状态机在哪个位置进行检查，也就无法确保发送63个有正确的syncHeader的block时，状态机正好都在正确的syncHeader的位置进行检查。因此对于“连续63次检查到正确的syncHeader时变量也不会转变为true”这个条件是无法确保检查到的。之后连续发送有正确syncHeader的block的过程中，自然也无法检查出“连续64次检查到正确的syncHeader时变量会转变为true”这个条件中，64这个数字是否精确。可见，现有技术中所采样的验证方式，在两种转变场景下，均无法完整精确地检查block state状态机。基于上述研究发现，本申请提供一种状态机状态指示功能验证方案，在状态机的第一状态和第二状态转变过程中，结合虚拟窗口和真实窗口边界的检测方式，可避免在验证时由于边界之间的差异导致的验证不完善的缺陷。请结合参阅图1，为本申请实施例提供的状态机状态指示功能验证方法的流程图，该验证方法可以应用于测试设备。该验证方法可用于对以太网接口接收数据检查的状态机的状态指示功能进行验证。测试设备为与待验证的以太网接口所在的设备进行通信的设备。下面将对图1所示的具体流程进行详细阐述。S101，在所述状态指示由第二状态转变为第一状态的过程中，执行边界检测进程，向所述以太网接口发送数据，以确定真实窗口的窗口边界，所述真实窗口包含N个码块。S102，在所述状态指示为第一状态的情况下，根据向所述以太网接口发送的数据中存在的具有错误同步头的码块、所述数据构建的虚拟窗口的窗口边界以及所述真实窗口的窗口边界，验证所述第一状态转变的正确性。S103，在所述状态指示为第二状态的情况下，根据向所述以太网接口发送的数据中存在的具有正确同步头的码块，验证所述第二状态转变的正确性。本实施例中，主要是针对10G/25G速率下，以及40G/50G/100G速率下的lock state状态机的验证，后续以10G/25G速率下的验证为例进行说明。本实施例中，状态机的状态指示包括第一状态和第二状态，第一状态表征找到以太网接口接收到的包含M位的比特位的码块的边界，第二状态表征未找到码块的边界。也即，第一状态为上述的ture状态，第二状态为上述的false状态。其中，在本实施例中，M为10G/25G速率下的66。状态机的状态指示的状态为ture时，若在64个码块的窗口中检查出16个码块存在正确的同步头，也即，在同步头应该处于的位置处检查到正确的同步头，则状态可由ture转变为false。因此，要将状态由ture转变为false的条件以及触发的正确转变结果可以总结为两方面。第一方面是，窗口中须为64个码块。第二方面是，在窗口中存在错误的同步头的码块的数量需要达到16个。基于上述的分析，可以通过创建不同的条件，并且在不同的条件下检测状态转变的结果，进而验证转变的准确性。本实施例中，可以通过创建三个不同的条件以构成三个测试例。其中，测试例1：满足上述第一方面但不满足上述第二方面，也即在64个码块的窗口里，检查出15个存在错误同步头的码块时，此时状态是否保持为true。测试例2：同时满足上述第一方面和第二方面，也即在64个码块的窗口里，检查出16个存在错误同步头的码块时，此时状态是否由true转变为false。测试例3：满足上述第二方面但不满足第一方面，也即在窗口中检查出16个存在错误同步头的码块，但窗口不确定是否为64个码块。针对上述的各个测试例，由于在状态转变过程中，状态由true转为false再转为true以后，窗口的边界可能会发生变化。因此，在采用向以太网接口发送数据，从而去转变其状态时，可能存在窗口边界发生变化的情况，也即窗口边界不明确的情况。在这种情况下，在执行上述的测试例时，则无法保障对于状态转变结果的验证的准确性。因此可以看出，窗口边界对于状态机状态指示功能的验证有着很大的影响。有必要先确定出窗口边界，进而根据窗口边界进行针对性的验证。本实施例中，可以在状态指示由false状态转换为true状态的过程中，也即通过向以太网接口发送数据，进而达到将状态从false转变为true的状态。在该过程中，即可在状态为转变为true时确定出真实窗口的窗口边界。在确定出真实窗口的窗口边界的情况下，由上述可知，在从状态true进行转变时，如一定条件下保持ture状态或一定条件下转变为false状态时，其窗口边界可能会改变。也即，此种情形下向以太网接口发送数据以触发从状态true进行转变时，基于数据所构建的虚拟窗口的窗口边界可能与真实窗口的窗口边界不同。因此，本实施例中，在验证状态指示从状态true进行转变时，则可以根据向以太网接口发送的数据中存在的具有错误同步头的码块、基于数据构建的虚拟窗口的窗口边界以及真实窗口的窗口边界，来验证第一状态转变的正确性。此外，由上述可知，状态指示处于状态false的情况下，只有在连续收到的64个码块中均存在正确的同步头，才会转换为状态ture。因此，本实施例中，在状态指示为false时，通过向以太网接口发送数据，并基于数据中存在的具有正确同步头的码块，验证从状态false执行的状态转变的正确性。本实施例所采用的状态机状态指示功能验证方法，在状态机的true状态和false状态转变过程中，结合虚拟窗口和真实窗口边界检测的方式，可避免在验证时由于边界之间的差异导致的验证不完善的问题。以下首先对如何确定真实窗口的窗口边界的方法进行介绍。若想要找到真实窗口的窗口边界，就需要在状态由false状态转变为true状态期间，使状态机在期望的位置检测到正确的同步头。由于同步头是2比特的数据，位于码块的最低2比特，正确的同步头是2’b01和2’b10，错误的是2’b00和2’b11。因此，在一个66比特的码块中，可以做到只存在1个正确的同步头，也即0111111...1和1000000...0两种数据交替发送，在这种情况下，每个码块中只会有一个同步头，且2个码块相连的2比特不存在被识别为同步头的情况，且同步头在正确的位置上。利用这种特殊的码块，可以引导状态机在期望的位置形成检查的边界。找到检查的边界的前提条件，就是找到状态机第64次在正确位置看到正确同步头所对应的码块，也就是要找到第一次在正确位置看到正确同步头所对应的码块。而想要找到第一次在正确位置看到正确同步头所对应的码块，只需要确保状态机在正确位置看到正确的同步头，之后连续移动66次由于找不到同步头而移动1比特即可。一个做法是，将一开始发送的码块替换成0111...1和1000...0，两个数据交替发送，此时每个码块只有一个同步头。在这种情况下状态机只有找不到同步头和找到期望位置的同步头两种情况。考虑到连续发送64个在正确位置存在正确同步头的码块就可能使状态false转变为true，而这种情况并非一定发生，为了使结果可控，请参阅图2，本实施例中，可以通过以下方式进行真实窗口的窗口边界的确定。S1011，向所述以太网接口连续发送M-3个具有正确同步头的码块，以使所述状态指示保持在第二状态。S1012，清空检测同步头的次数，并保留所述正确同步头的位置信息。S1013，向所述以太网接口连续发送3个具有正确同步头的码块，并连续发送M个不存在同步头的码块，以使所述状态机从下一个码块开始在正确的位置检测到正确同步头。S1014，向所述以太网接口连续发送N个具有正确同步头的码块，以确定从下一个码块开始为真实窗口的窗口边界。需要说明的是，本实施例中以10G/25G速率下的应用场景为例进行说明。首先，向以太网接口连续发送M-3个具有正确同步头的码块，其中，M为66。请结合参阅图3，先向以太网接口连续发送63个存在正确同步头的码块。所谓的正确同步头，即同步头处于正确的位置并且为2’b01或2’b10。通过连续发送63个具有正确同步头的码块，可以保障状态处于fasle状态，而不会转变为true状态。在本实施例中，各个存在正确同步头的码块中包含一个正确同步头，也即，仅在码块的最低2比特位具有正确同步头，如上述的0111111...1或1000000...0。在这种情况下，可能存在两种情形，一种是状态机第一次检查码块的位置正好是正确同步头的位置，在63个码块后依然会在正确同步头的位置且已经检查了63次。另一种情形是，状态机第一次检查码块的位置正好是正确同步头左移一个比特位的位置，此时在63个码块后还需要将检查的位置左移两个比特位才会到正确同步头的位置。因此，为了消除上述可能存在的两种情形所导致的后续结果的不可控，本实施例中，可以在上述基础上清空检测同步头的次数，并保留正确同步头的位置信息。清空检测同步头的次数的方式是，向以太网接口连续发送M个，即66个不存在同步头的码块。在本实施例中，相邻两个存在正确同步头的码块和不存在同步头的码块中，相邻位置的比特位的数值相同。也即，若上述连续63个存在正确同步头的码块中最后一个码块最后1比特位为0，则上述连续66个不存在同步头的码块中第一个码块为0，也即该码块为全0。反之，若上述连续63个存在正确同步头的码块中最后一个码块最后1比特位为1，则上述连续66个不存在同步头的码块中第一个码块为1，也即该码块为全1。此外，本实施例中，连续的M个不存在同步头的码块中，各个码块的比特位的数值相同。也即，若上述66个不存在同步头的码块中第一个码块为全0，则该66个码块均为全0。若上述66个不存在同步头的码块中第一个码块为全1，则该66个码块均为全1。通过上述方式，则上述不同两种情形下的同步头的位置信息不变，但同步头的检测次数被清空。为了让状态机在所有情形下都能够在正确的位置检查到同步头，在上述基础上，可以向以太网接口连续发送3个具有正确同步头的码块。若上一步中66个不存在同步头的码块为全0，则该3个码块中的第一个码块可为0111...1，反之则应为1000...0。在该3个码块的触发下，状态机可在正确的位置检查正确的同步头，但是需要的次数还不确定。因此，可再连续发送M个不存在同步头的码块，也即66个码块。若上述3个连续存在正确同步头的码块中最后一个码块的最后1比特位为0，则该66个码块均为全0，反之，则均为全1。此时，可以保障状态机从下一个码块开始可在正确的位置检测到正确同步头。在上述基础上，再向以太网接口连续发送N个具有正确同步头的码块，其中N为64。若上一步中66个不存在同步头的码块为全0，则该步中64个码块的第一个码块0111...1，反之则为1000...0。此时，刚好可以达到将状态fasle转变为状态ture的条件。也即，以太网接口在下一个码块即为真实窗口的窗口边界。在通过以上方式确定出真实窗口的窗口边界后，可以执行将状态ture进行状态转变的触发，以及对其转变的正确性的验证。请参阅图4，本实施例中，在执行上述步骤S102时，可以通过以下方式实现：S1021，向所述以太网接口发送数据，基于发送的数据验证构建的虚拟窗口是否由N个码块构成。S1022，若由N个码块构成，在确定所述虚拟窗口中存在P-1个错误的同步头的码块时，若所述第一状态保持不同，则转变正确。S1023，在确定所述虚拟窗口中存在P个错误的同步头的码块时，结合所述数据构建的虚拟窗口的窗口边界和所述真实窗口的窗口边界，验证所述第一状态转变的正确性。S1024，若不由N个码块构成，根据所述虚拟窗口中存在的具有错误同步头的码块，验证所述第一状态转变的正确性。由上述可知，在验证状态机处于状态true时的转变可以通过构建三个测试例来进行验证。构建测试例的方式即为通过向以太网接口发送满足一定要求的数据，验证的方式即为通过检测状态转变的结果是否符合规定结果来验证。基于上述三个测试例可知，第一方面是要限定窗口中为64个码块。因此，本实施例中，可以将验证分为确定发送的数据构建的虚拟窗口为64个码块构成，以及不确定发送的数据构建的虚拟窗口为64个码块构成两种情况。在确定发送的数据构建的虚拟窗口为64个码块构成的情况下，可以分别基于上述测试例1和测试例2的方式进行验证。首先，测试例1中，也即在64个码块的窗口里，检查出15个存在错误同步头的码块时，此时状态是否保持为true。如果是保持true则表明转变是正确的。本实施例中，对于测试例1的执行方式可如下所示：首先，向以太网接口发送连续的64个码块，这64个码块中选择15个码块对同步头进行插错，也即，存在15个具有错误同步头的码块。之后再发送连续的65个具有正确同步头的码块，如此即达成了一次循环。这样的循环连续发送64次，即可确保至少有一次的插错完整插入了窗口。这样做的原理是，每次选择15个码块的同步头插错所对应的64个码块都认为是一个假设的窗口，之后65个正确的码块相当于让假设的窗口移动一个码块，这样发送64次之后自然覆盖了64种可能的窗口位置。请结合参阅图5，由于65个码块中随机选择15个码块进行插错，可能的组合一共有C6515≈10^78种，不可能覆盖完全，因此通常的做法是在假设的窗口中固定15个码块的位置进行插错，将上述循环进行64次这样就覆盖到了一个窗口内所有的码块位置。之后再进行每两个错误的码块之间有一个正确的码块的插错，也将窗口内的所有位置遍历一遍。在上述操作执行后，若状态机的状态保持在true状态，则表明转变正确，则表明状态的状态指示功能是正确的。而对于测试例2，通常是使用和测试例1相似的执行方式，但是将上述的15个错误同步头的码块改为16个。但是，这种方式没有办法证明在非窗口的范围内插入16个具有错误同步头的码块，状态不会由true转变为false。由于状态由true转为false再转为true以后，窗口的边界可能会发生变化，因此这种方法无法遍历到所有可能的窗口范围。因此，本实施例中，针对测试例2，是通过在上述确定真实窗口的窗口边界的情况下，在确定虚拟窗口中存在16个错误的同步头的码块时，结合数据构建的虚拟窗口的窗口边界和真实窗口的窗口边界，来验证状态的转变正确性。具体地，通过以下方式来实现：在确定虚拟窗口中存在P个错误的同步头的码块的情况下，在数据构建的所有的虚拟窗口的窗口边界与真实窗口的窗口边界不同，且P个错误的同步头的码块并未全部位于同一个真实窗口时，若第一状态保持不变，则转变正确。在数据构建的所有的虚拟窗口的窗口边界与真实窗口的窗口边界相同，且P个错误的同步头的码块位于同一个真实窗口内，若第一状态转变为第二状态，则转变正确。也即，在虚拟窗口和真实窗口边界一致的情况下，若数据中存在16个具有错误同步头的码块。此时，若状态true转变为状态fasle时，则判定状态转变正确，表明状态机的状态指示功能正确。而若，在虚拟窗口和真实窗口边界均不一致的情况下，状态机检测到的16个存在错误同步头的码块不全部落在同一个真实窗口中，若状态还是保持在true状态，则判定状态转变正确，表明状态机的状态指示功能正确。在上述的不确定的发送的数据构建的虚拟窗口为64个码块构成的情况下，即针对上述的测试例3。首先需要通过操作执行以确定虚拟窗口为64个码块构成，在此基础上，再通过其中的存在错误同步头的码块的触发下，状态的转变结果来验证其转变正确性。本实施例中，首先通过以下方式来验证构建的虚拟窗口是否由N个码块构成，其中N为64：基于发送的数据并结合第一状态的转变情况，验证构建的虚拟窗口中的码块数量是否大于N-1个，且小于N+1个。若虚拟窗口中的码块数量大于N-1个且小于N+1个，则确定虚拟窗口由N个码块构成。可见，验证虚拟窗口为64个码块，主要是通过验证虚拟窗口中的码块数量大于63个且小于65个实现。因此，可以将上述验证分为两个验证角度，也即，验证数量大于63个的角度，以及验证数量小于65个的角度。若两个验证角度均满足要求，则可以证明虚拟窗口中的码块数量为64个。第一验证角度中，可以通过以下执行操作来进行验证：在状态机的状态为true的情形下，在发送给以太网接口的64个相连的码块中，将第一个和最后一个的码块的同步头改为错误的，然后在中间任选14个码块中，将同步头改为错误的。之后再发送65个具有正确同步头的码块，以上为一个循环。循环64次，即可遍历到窗口范围为64个码块的情况下，所有可能的窗口位置。若窗口范围小于64个码块，则测试期间状态会保持为true的状态。若测试期间状态由true转变为false，则证明窗口范围大于63个窗口。因此，在上述测试方式下，若状态由true转变为false，则可以证明虚拟窗口的码块数量大于63个。第二验证角度中，可以通过以下执行操作来进行验证：在状态机的状态为true的情形下，在发送给以太网接口的65个相连的码块中，将65个码块的第一个和最后一个码块的同步头改为错误的，然后在中间任选14个码块，将同步头改为错误的，之后再发送66个码块，以上为一个循环。循环65次，即可遍历到窗口范围为65个码块的情况下，所有可能的窗口位置。若窗口范围小于65个码块，则测试期间状态会保持为true；若测试期间状态由true转变为false，则证明窗口范围大于64个码块。因此，在上述测试操作后，若状态保持为true状态，则可以证明虚拟窗口的码块小于65个。在能够同时证明窗口范围小于65个码块且大于63个码块时，即可证明虚拟窗口范围为64个码块。在确定虚拟窗口范围为64个码块的情况下，则相当于上述测试例1和测试例2的前提条件，在该情况下，执行上述测试例1和测试例2以实现状态转变的正确性验证。而若在虚拟窗口不由N个码块构成的情况下，在虚拟窗口中存在P个具有错误同步头的码块时，若第一状态保持不变，则转变正确。也即，若虚拟窗口不由64个码块构成的情况下，即使在虚拟窗口中存在16个错误同步头的码块，此时，状态ture也不应当转变为false。通过以上方式，可以在状态处于ture状态下，通过向以太网接口发送不同的数据，从而创建不同的触发条件，并通过检测状态true的转变结果，进而完善地验证状态机的状态指示功能。此外，在状态处于第二状态的情况下，也即处于fasle状态时，也可通过向以太网接口发送不同形式的数据来验证fasle状态下的转变条件以及转变结果的正确性。在处于fasle状态时，状态机需要在连续64个码块的同一个位置看到正确的同步头，状态才会由false转为true。该状态需要分两种情况来检查，一个是状态机连续看到小于65个正确的同步头即可转变，一个是状态机连续看到大于63个正确的同步头才能转变。因此，基于上述分析，在验证fasle状态下转变时，可以通过以下方式实现：在确定向以太网接口发送的数据中存在连续的N个具有正确同步头的码块时，若第二状态转变为第一状态，则转变正确。也即，存在连续的64个正确的同步头的码块时，若从状态fasle转变为状态true，则该转变正确，表明状态机的状态指示功能正确。具体地，若基于向以太网接口发送的数据中确定连续小于N+1个具有正确同步头的码块时第二状态转变为第一状态，并且，基于向以太网接口发送的数据中确定连续大于N-1个具有正确同步头的码块时第二状态保持不变，则确定存在N个具有正确同步头的码块时第二状态转变为第一状态的转变正确。本实施例中，在触发以验证连续小于65个具有正确同步头的码块，fasle状态的转变时，可以通过以下方式进行触发：在上述执行边界检测进程之后，也即保障状态机从下一个码块开始为真实窗口的窗口边界的情况下，可以持续向以太网接口发送全0或全1的不具有同步头的码块。若整个方案期间状态出现过由状态false转为true的情况，则证明状态机在连续小于65个码块的同一个位置看到正确的同步头时状态就会由false转为true。在触发以验证连续大于63个具有正确同步头的码块，fasle状态的转变时，可以通过以下方式进行触发：在上述执行边界检测进程中，在使状态机从下一个码块开始在正确的位置检测到正确同步头的情况下，再向以太网接口连续发送63个只有一个同步头的码块，之后持续发送全0或全1的不具有同步头的码块。若整个方案期间状态未出现过由false转为true的情况，则证明状态机需要在连续大于63个码块的同一个位置看到正确的同步头时状态才会由false转为true。因此，若通过执行上述操作，并验证在大于63个具有正确同步头的码块的情况下的转变，以及小于65个具有正确同步头的码块的情况下的转变，均符合转变规定的情况下，则可以证明存在64个具有正确同步头的码块的情况下，状态由fasle转变为true，该转变操作正确，也即状态机的状态指示功能正确。本实施例中，通过以上方式，可以通过向以太网接口发送不同组合下的数据，从而创建不同的触发条件。并在不同触发条件下检测状态转变情况，进而验证状态机的状态指示功能是否正确。在该验证过程中，在状态为true的情况下，结合确定的窗口边界，来达到完善的验证机制。请参阅图6，为本申请实施例提供的电子设备的示例性组件示意图，该电子设备可为上述的测试设备。该电子设备可包括存储介质110、处理器120、状态机状态指示功能验证装置130及通信接口140。本实施例中，存储介质110与处理器120均位于电子设备中且二者分离设置。然而，应当理解的是，存储介质110也可以是独立于电子设备之外，且可以由处理器120通过总线接口来访问。可替换地，存储介质110也可以集成到处理器120中，例如，可以是高速缓存和/或通用寄存器。状态机状态指示功能验证装置130可以理解为上述电子设备，或电子设备的处理器120，也可以理解为独立于上述电子设备或处理器120之外的在电子设备控制下实现上述状态机状态指示功能验证方法的软件功能模块。如图7所示，上述状态机状态指示功能验证装置130可以包括确定模块131、第一验证模块132和第二验证模块133。下面分别对该状态机状态指示功能验证装置130的各个功能模块的功能进行详细阐述。确定模块131，用于在所述状态指示由第二状态转变为第一状态的过程中，执行边界检测进程，向所述以太网接口发送数据，以确定真实窗口的窗口边界，所述真实窗口包含N个码块。可以理解，该确定模块131可以用于执行上述步骤S101，关于该确定模块131的详细实现方式可以参照上述对步骤S101有关的内容。第一验证模块132，用于在所述状态指示为第一状态的情况下，根据向所述以太网接口发送的数据中存在的具有错误同步头的码块、所述数据构建的虚拟窗口的窗口边界以及所述真实窗口的窗口边界，验证所述第一状态转变的正确性。可以理解，该第一验证模块132可以用于执行上述步骤S102，关于该第一验证模块132的详细实现方式可以参照上述对步骤S102有关的内容。第二验证模块133，用于在所述状态指示为第二状态的情况下，根据向所述以太网接口发送的数据中存在的具有正确同步头的码块，验证所述第二状态转变的正确性。可以理解，该第二验证模块133可以用于执行上述步骤S103，关于该第二验证模块133的详细实现方式可以参照上述对步骤S103有关的内容。关于装置中的各模块的处理流程、以及各模块之间的交互流程的描述可以参照上述方法实施例中的相关说明，这里不再详述。进一步地，本申请实施例还提供一种计算机可读存储介质，计算机可读存储介质存储有机器可执行指令，机器可执行指令被执行时实现上述实施例提供的状态机状态指示功能验证方法。具体地，该计算机可读存储介质能够为通用的存储介质，如移动磁盘、硬盘等，该计算机可读存储介质上的计算机程序被运行时，能够执行上述状态机状态指示功能验证方法。关于计算机可读存储介质中的及其可执行指令被运行时，所涉及的过程，可以参照上述方法实施例中的相关说明，这里不再详述。综上所述，本申请实施例提供的状态机状态指示功能验证方法、装置和电子设备，在状态机的状态指示由第二状态转变为第一状态的过程中，向以太网接口发送数据，以确定真实窗口的窗口边界。在状态指示为第一状态的情况下，根据向以太网接口发送的数据中存在的具有错误同步头的码块、数据构建的虚拟窗口的窗口边界以及真实窗口的窗口边界，验证第一状态转变的正确性。在状态指示为第二状态的情况下，根据向以太网接口发送的数据中存在的具有正确同步头的码块，验证第二状态转变的正确性。该方案中，在状态机的第一状态和第二状态转变过程中，结合虚拟窗口和真实窗口边界检测的方式，可避免在验证时由于边界之间的差异导致的验证不完善的缺陷。以上所述，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到的变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以所述权利要求的保护范围为准。
