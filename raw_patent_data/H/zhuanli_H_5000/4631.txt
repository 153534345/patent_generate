标题title
光模块
摘要abst
本申请提供了一种光模块，包括电路板、设在电路板上的MCU、设在电路板上的激光驱动芯片及与激光驱动芯片电连接的激光芯片，电路板上设有接收信号速率的金手指，MCU用于根据信号速率生成切换指令，并根据第一预设值判定是否继续输出切换指令；激光驱动芯片与MCU电连接，包括切换开关与第一寄存器，切换开关用于根据切换指令切换信号传输通路，根据切换后的信号传输通路输出对应信号速率的调制电流；第一寄存器用于根据速率切换后链路的导通状态产生第一预设值；激光芯片用于根据调制电流发射对应速率的光信号。本申请通过驱动芯片自动识别速率切换成功与否，规避了光模块速率切换不稳定的现象，实现了速率切换的自动稳定功能。
权利要求书clms
1.一种光模块，其特征在于，包括：电路板，其上设置有金手指，用于接收发射信号的速率；MCU，设置在所述电路板上，用于根据所述发射信号的速率生成切换指令，以及根据第一预设值判定是否继续输出所述切换指令；激光驱动芯片，设置在所述电路板上，与所述MCU电连接，包括切换开关与第一寄存器，所述切换开关用于根据所述切换指令切换信号传输通路，根据切换后的信号传输通路输出对应信号速率的调制电流；所述第一寄存器用于根据速率切换后链路的导通状态产生第一预设值，并将所述第一预设值发送至所述MCU；激光芯片，与所述激光驱动芯片电连接，用于根据所述调制电流发射对应速率的光信号。2.根据权利要求1所述的光模块，其特征在于，所述激光驱动芯片还包括旁路与时钟芯片，所述旁路、所述时钟芯片的一端均与所述切换开关电连接，所述旁路、所述时钟芯片的另一端均与所述激光驱动芯片的输出端口电连接，所述切换开关根据所述切换指令与所述旁路或所述时钟芯片连通。3.根据权利要求1所述的光模块，其特征在于，所述激光驱动芯片还用于检测内部的电信号标志，根据所述电信号标志确定速率切换后的链路是否导通。4.根据权利要求3所述的光模块，其特征在于，所述第一寄存器用于在速率切换后链路状态为导通状态时，产生为0的第一预设值；所述MCU用于根据所述第一预设值判定速率切换未成功，继续向所述切换开关发送切换指令。5.根据权利要求3所述的光模块，其特征在于，所述第一寄存器用于在速率切换后链路状态为断链状态时，产生为1的第一预设值；所述MCU用于根据所述第一预设值判定速率切换成功。6.一种光模块，其特征在于，电路板，其上设置有金手指，用于接收信号的传输速率；MCU，设置在所述电路板上，用于根据所述信号的传输速率生成切换指令，以及根据第二预设值判定是否继续输出所述切换指令；接收芯片，设置在所述电路板上，用于将接收的光信号转换为电信号；接收驱动芯片，设置在所述电路板上，与所述MCU、所述接收芯片电连接，包括切换开关与第二寄存器，所述切换开关用于根据所述切换指令切换信号传输通路，根据切换后信号传输通路的信号速率将转换后的电信号传输至所述金手指；所述第二寄存器用于根据速率切换后链路的导通状态产生第二预设值，并将所述第二预设值发送至所述MCU。7.根据权利要求6所述的光模块，其特征在于，所述第二寄存器用于在速率切换后链路状态为导通状态时，产生为0的第二预设值；所述MCU用于根据所述第二预设值判定速率切换未成功，继续向所述切换开关发送切换指令。8.根据权利要求6所述的光模块，其特征在于，所述第二寄存器用于在速率切换后链路状态为断链状态时，产生为1的第二预设值；所述MCU用于根据所述第二预设值判定速率切换成功。9.根据权利要求6所述的光模块，其特征在于，还包括：跨阻放大器，设置在所述电路板上，与所述接收芯片、所述接收驱动芯片电连接，用于对来自所述接收芯片的电信号进行放大，放大后的电信号传输至所述接收驱动芯片进行速率调整。10.一种光模块，其特征在于，包括：电路板，其上设置有金手指，用于接收信号速率；MCU，设置在所述电路板上，用于根据所述信号速率生成发射速率切换指令、接收速率切换指令；以及根据第一预设值判定是否继续输出所述发射速率切换指令，根据第二预设值判定是否继续输出所述接收速率切换指令；收发驱动芯片，设置在所述电路板上，与所述MCU电连接，包括第一切换开关、第一寄存器、第二切换开关与第二寄存器，所述第一切换开关用于根据所述发射速率切换指令切换发射信号传输通路，根据切换后的发射信号传输通路输出对应信号速率的调制电流；所述第一寄存器用于根据速率切换后发射链路的导通状态产生第一预设值；所述第二切换开关用于根据所述接收速率切换指令切换接收信号传输通路，根据切换后接收信号传输通路的信号速率将转换后的电信号传输至所述金手指；所述第二寄存器用于根据速率切换后接收链路的导通状态产生第二预设值；激光芯片，与所述收发驱动芯片电连接，用于根据所述调制电流发射对应速率的光信号；接收芯片，与所述收发驱动芯片电连接，用于将接收的光信号转换为电信号。
说明书desc
技术领域本申请涉及光通信技术领域，尤其涉及一种光模块。背景技术随着云计算、移动互联网、视频等新型业务和应用模式发展，光通信技术的发展进步变的愈加重要。而在光通信技术中，光模块是实现光电信号相互转换的工具，是光通信设备中的关键器件之一，并且随着光通信技术发展的需求光模块的传输速率不断提高。在当前的现网应用中，往往会涉及到多速率切换的应用场景，如10.3125G与2.5G切换，25.78G与10.3125G切换等，当前光模块进行速率切换的动作是通过MCU下达指令，由开关电路实现通道连接动作，该切换动作在一次指令下也可执行一次，随即整个速率切换动作完成。但是，随着光模块速率的提高，光模块方案的多样化，试验发现，在光模块速率切换动作结束后，会出现切换不成功的情况出现，即开关电路未能成功完成速率通道切换，光模块不能在当前最新速率下正常工作，表现为传输链路不通，即当前光模块的这种一次性速率切换动作存在不稳定因素，会出现一定概率切换不成功的问题。发明内容本申请实施例提供了一种光模块，以解决光模块速率切换存在不稳定因素，会出现一定概率切换失败的问题。第一方面，本申请提供了一种光模块，包括：电路板，其上设置有金手指，用于接收发射信号的速率；MCU，设置在所述电路板上，用于根据所述发射信号的速率生成切换指令，以及根据第一预设值判定是否继续输出所述切换指令；激光驱动芯片，设置在所述电路板上，与所述MCU电连接，包括切换开关与第一寄存器，所述切换开关用于根据所述切换指令切换信号传输通路，根据切换后的信号传输通路输出对应信号速率的调制电流；所述第一寄存器用于根据速率切换后链路的导通状态产生第一预设值，并将所述第一预设值发送至所述MCU；激光芯片，与所述激光驱动芯片电连接，用于根据所述调制电流发射对应速率的光信号。第二方面，本申请提供了一种光模块，包括：电路板，其上设置有金手指，用于接收信号的传输速率；MCU，设置在所述电路板上，用于根据所述信号的传输速率生成切换指令，以及根据第二预设值判定是否继续输出所述切换指令；接收芯片，设置在所述电路板上，用于将接收的光信号转换为电信号；接收驱动芯片，设置在所述电路板上，与所述MCU、所述接收芯片电连接，包括切换开关与第二寄存器，所述切换开关用于根据所述切换指令切换信号传输通路，根据切换后信号传输通路的信号速率将转换后的电信号传输至所述金手指；所述第二寄存器用于根据速率切换后链路的导通状态产生第二预设值，并将所述第二预设值发送至所述MCU。第三方面，本申请提供了一种光模块，包括：电路板，其上设置有金手指，用于接收信号速率；MCU，设置在所述电路板上，用于根据所述信号速率生成发射速率切换指令、接收速率切换指令；以及根据第一预设值判定是否继续输出所述发射速率切换指令，根据第二预设值判定是否继续输出所述接收速率切换指令；收发驱动芯片，设置在所述电路板上，与所述MCU电连接，包括第一切换开关、第一寄存器、第二切换开关与第二寄存器，所述第一切换开关用于根据所述发射速率切换指令切换发射信号传输通路，根据切换后的发射信号传输通路输出对应信号速率的调制电流；所述第一寄存器用于根据速率切换后发射链路的导通状态产生第一预设值；所述第二切换开关用于根据所述接收速率切换指令切换接收信号传输通路，根据切换后接收信号传输通路的信号速率将转换后的电信号传输至所述金手指；所述第二寄存器用于根据速率切换后接收链路的导通状态产生第二预设值；激光芯片，与所述收发驱动芯片电连接，用于根据所述调制电流发射对应速率的光信号；接收芯片，与所述收发驱动芯片电连接，用于将接收的光信号转换为电信号。由上述实施例可见，本申请实施例提供了一种光模块，该光模块包括电路板、MCU、激光驱动芯片与激光芯片，电路板上设置有金手指，该金手指用于接收发射信号的速率；MCU设置在电路板上，用于根据发射信号的速率生成切换指令；激光驱动芯片设置在电路板上，与MCU电连接，包括切换开关与第一寄存器，切换开关用于根据切换指令切换信号传输通路，根据切换后的信号传输通道输出对应信号速率的调制电流；激光芯片与激光驱动芯片电连接，用于根据调制电流发射对应速率的光信号。根据切换开关切换信号传输通路后，需检测切换后的信号链路是否导通，激光驱动芯片中的第一寄存器可根据速率切换后链路的导通状态产生第一预设值，并将第一预设值发送至MCU；MCU根据第一预设值判定切换是否成功，并在切换未成功时继续输出切换指令。本申请根据激光驱动芯片内的切换开关完成速率切换后，根据第一寄存器产生的预设值来识别速率切换是否成功，MCU在速率切换未成功的情况下进行继续切换直至速率切换成功，能够规避光模块速率切换不稳定的现象出现，实现光模块速率切换的自动稳定功能。附图说明为了更清楚地说明本公开中的技术方案，下面将对本公开一些实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本公开的一些实施例的附图，对于本领域普通技术人员来讲，还可以根据这些附图获得其他的附图。此外，以下描述中的附图可以视作示意图，并非对本公开实施例所涉及的产品的实际尺寸、方法的实际流程、信号的实际时序等的限制。图1为根据一些实施例的一种光通信系统的连接关系图；图2为根据一些实施例的一种光网络终端的结构图；图3为根据一些实施例的一种光模块的结构图；图4为根据一些实施例的一种光模块的分解图；图5为本申请实施例提供的一种光模块中电路板的局部结构示意图一；图6为本申请实施例提供的一种光模块的局部结构框图一；图7为本申请实施例提供的一种光模块中电路板的局部结构示意图二；图8为本申请实施例提供的一种光模块的局部结构框图二；图9为本申请实施例提供的一种光模块中电路板的局部结构示意图三；图10为本申请实施例提供的一种光模块的局部结构框图三。具体实施方式下面将结合附图，对本公开一些实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本公开一部分实施例，而不是全部的实施例。基于本公开所提供的实施例，本领域普通技术人员所获得的所有其他实施例，都属于本公开保护的范围。除非上下文另有要求，否则，在整个说明书和权利要求书中，术语“包括”及其其他形式例如第三人称单数形式“包括”和现在分词形式“包括”被解释为开放、包含的意思，即为“包含，但不限于”。在说明书的描述中，术语“一个实施例”、“一些实施例”、“示例性实施例”、“示例”、“特定示例”或“一些示例”等旨在表明与该实施例或示例相关的特定特征、结构、材料或特性包括在本公开的至少一个实施例或示例中。上述术语的示意性表示不一定是指同一实施例或示例。此外，所述的特定特征、结构、材料或特点可以以任何适当方式包括在任何一个或多个实施例或示例中。以下，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括一个或者更多个该特征。在本公开实施例的描述中，除非另有说明，“多个”的含义是两个或两个以上。在描述一些实施例时，可能使用了“耦接”和“连接”及其衍伸的表达。例如，描述一些实施例时可能使用了术语“连接”以表明两个或两个以上部件彼此间有直接物理接触或电接触。又如，描述一些实施例时可能使用了术语“耦接”以表明两个或两个以上部件有直接物理接触或电接触。然而，术语“耦接”或“通信耦合”也可能指两个或两个以上部件彼此间并无直接接触，但仍彼此协作或相互作用。这里所公开的实施例并不必然限制于本文内容。“A、B和C中的至少一个”与“A、B或C中的至少一个”具有相同含义，均包括以下A、B和C的组合：仅A，仅B，仅C，A和B的组合，A和C的组合，B和C的组合，及A、B和C的组合。“A和/或B”，包括以下三种组合：仅A，仅B，及A和B的组合。本文中“适用于”或“被配置为”的使用意味着开放和包容性的语言，其不排除适用于或被配置为执行额外任务或步骤的设备。如本文所使用的那样，“约”、“大致”或“近似”包括所阐述的值以及处于特定值的可接受偏差范围内的平均值，其中所述可接受偏差范围如由本领域普通技术人员考虑到正在讨论的测量以及与特定量的测量相关的误差所确定。光通信技术中，使用光携带待传输的信息，并使携带有信息的光信号通过光纤或光波导等信息传输设备传输至计算机等信息处理设备，以完成信息的传输。由于光信号通过光纤或光波导中传输时具有无源传输特性，因此可以实现低成本、低损耗的信息传输。此外，光纤或光波导等信息传输设备传输的信号是光信号，而计算机等信息处理设备能够识别和处理的信号是电信号，因此为了在光纤或光波导等信息传输设备与计算机等信息处理设备之间建立信息连接，需要实现电信号与光信号的相互转换。光模块在光纤通信技术领域中实现上述光信号与电信号的相互转换功能。光模块包括光口和电口，光模块通过光口实现与光纤或光波导等信息传输设备的光通信，通过电口实现与光网络终端之间的电连接，电连接主要用于实现供电、I2C信号传输、数据信号传输以及接地等；光网络终端通过网线或无线保真技术将电信号传输给计算机等信息处理设备。图1为根据一些实施例的一种光通信系统的连接关系图。如图1所示，光通信系统主要包括远端服务器1000、本地信息处理设备2000、光网络终端100、光模块200、光纤101及网线103；光纤101的一端连接远端服务器1000，另一端通过光模块200与光网络终端100连接。光纤本身可支持远距离信号传输，例如数千米的信号传输，在此基础上如果使用中继器，则理论上可以实现超长距离传输。因此在通常的光通信系统中，远端服务器1000与光网络终端100之间的距离通常可达到数千米、数十千米或数百千米。网线103的一端连接本地信息处理设备2000，另一端连接光网络终端100。本地信息处理设备2000可以为以下设备中的任一种或几种：路由器、交换机、计算机、手机、平板电脑、电视机等。远端服务器1000与光网络终端100之间的物理距离大于本地信息处理设备2000与光网络终端100之间的物理距离。本地信息处理设备2000与远端服务器1000的连接由光纤101与网线103完成；而光纤101与网线103之间的连接由光模块200和光网络终端100完成。光模块200包括光口和电口。光口被配置为与光纤101连接，从而使得光模块200与光纤101建立双向的光信号连接；电口被配置为接入光网络终端100中，从而使得光模块200与光网络终端100建立双向的电信号连接。光模块200实现光信号与电信号的相互转换，从而使得光纤101与光网络终端100之间建立连接。示例的，来自光纤101的光信号由光模块200转换为电信号后输入至光网络终端100中，来自光网络终端100的电信号由光模块200转换为光信号输入至光纤101中。光网络终端100包括大致呈长方体的壳体，以及设置于壳体上的光模块接口102和网线接口104。光模块接口102被配置为接入光模块200，从而使得光网络终端100与光模块200建立双向的电信号连接；网线接口104被配置为接入网线103，从而使得光网络终端100与网线103建立双向的电信号连接。光模块200与网线103之间通过光网络终端100建立连接。示例的，光网络终端100将来自光模块200的电信号传递给网线103，将来自网线103的信号传递给光模块200，因此光网络终端100作为光模块200的上位机，可以监控光模块200的工作。光模块200的上位机除光网络终端100之外还可以包括光线路终端等。远端服务器1000通过光纤101、光模块200、光网络终端100及网线103，与本地信息处理设备2000之间建立了双向的信号传递通道。图2为根据一些实施例的一种光网络终端的结构图，为了清楚地显示光模块200与光网络终端100的连接关系，图2仅示出了光网络终端100的与光模块200相关的结构。如图2所示，光网络终端100中还包括设置于壳体内的PCB电路板105，设置于PCB电路板105的表面的笼子106，以及设置于笼子106内部的电连接器。电连接器被配置为接入光模块200的电口；散热器107具有增大散热面积的翅片等凸起部。光模块200插入光网络终端100的笼子106中，由笼子106固定光模块200，光模块200产生的热量传导给笼子106，然后通过散热器107进行扩散。光模块200插入笼子106中后，光模块200的电口与笼子106内部的电连接器连接，从而光模块200与光网络终端100建立双向的电信号连接。此外，光模块200的光口与光纤101连接，从而光模块200与光纤101建立双向的电信号连接。图3为根据一些实施例的一种光模块的结构图，图4为根据一些实施例的一种光模块的分解图。如图3和图4所示，光模块200包括壳体、设置于壳体中的电路板300及光收发器件；壳体包括上壳体201和下壳体202，上壳体201盖合在下壳体202上，以形成具有两个开口204和205的上述壳体；壳体的外轮廓一般呈现方形体。在本公开一些实施例中，下壳体202包括底板以及位于底板两侧、与底板垂直设置的两个下侧板；上壳体201包括盖板，以及位于盖板两侧与盖板垂直设置的两个上侧板，由两个侧壁与两个侧板结合，以实现上壳体201盖合在下壳体202上。两个开口204和205的连线所在方向可以与光模块200的长度方向一致，也可以与光模块200的长度方向不一致。示例地，开口204位于光模块200的端部，开口205也位于光模块200的端部。或者，开口204位于光模块200的端部，而开口205则位于光模块200的侧部。其中，开口204为电口，电路板300的金手指从电口204伸出，插入上位机中；开口205为光口，配置为接入外部的光纤101，以使光纤101连接光模块200内部的光收发器件。采用上壳体201、下壳体202结合的装配方式，便于将电路板300、光收发器件等器件安装到壳体中，由上壳体201、下壳体202可以对这些器件形成封装保护。此外，在装配电路板300等器件时，便于这些器件的定位部件、散热部件以及电磁屏蔽部件的部署，有利于自动化的实施生产。在一些实施例中，上壳体201及下壳体202一般采用金属材料制成，利于实现电磁屏蔽以及散热。在一些实施例中，光模块200还包括位于其壳体外壁的解锁部件203，解锁部件203被配置为实现光模块200与上位机之间的固定连接，或解除光模块200与上位机之间的固定连接。示例地，解锁部件203位于下壳体202的两个下侧板的外壁，包括与上位机的笼子匹配的卡合部件。当光模块200插入上位机的笼子里，由解锁部件203的卡合部件将光模块200固定在上位机的笼子里；拉动解锁部件203时，解锁部件203的卡合部件随之移动，进而改变卡合部件与上位机的连接关系，以解除光模块200与上位机的卡合关系，从而可以将光模块200从上位机的笼子里抽出。电路板300包括电路走线、电子元件及芯片，通过电路走线将电子元件和芯片按照电路设计连接在一起，以实现供电、电信号传输及接地等功能。电子元件例如可以包括电容、电阻、三极管、金属氧化物半导体场效应管。芯片例如可以包括微控制单元、跨阻放大器、时钟数据恢复芯片、电源管理芯片、数字信号处理芯片。电路板300一般为硬性电路板，硬性电路板由于其相对坚硬的材质，还可以实现承载作用，如硬性电路板可以平稳的承载芯片；硬性电路板还可以插入上位机笼子中的电连接器中。电路板300还包括形成在其端部表面的金手指，金手指由相互独立的多个引脚组成。电路板300插入笼子106中，由金手指与笼子106内的电连接器导通连接。金手指可以仅设置于电路板300一侧的表面，也可以设置于电路板300上下两侧的表面，以适应引脚数量需求大的场合。金手指被配置为与上位机建立电连接，以实现供电、接地、I2C信号传递、数据信号传递等。当然，部分光模块中也会使用柔性电路板。柔性电路板一般与硬性电路板配合使用，以作为硬性电路板的补充。光收发器件包括光发射组件400及光接收组件500，分别用于实现光信号的发射与光信号的接收。光发射组件400一般包括光发射器、透镜与光探测器，且透镜与光探测器分别位于光发射器的不同侧，光发射器的正反两侧分别发射光束，透镜用于汇聚光发射器正面发射的光束，使得光发射器射出的光束为汇聚光，以方便耦合至外部光纤。为了驱动光发射组件400中的光发射器产生激光光束，电路板300上设置有发射驱动芯片，发射驱动芯片可通过打线与光发射器电连接，如此金手指将上位机传输的电信号传输至发射驱动芯片，发射驱动芯片向光发射器传送供电参数，光发射器根据供电参数产生激光信号。光接收组件500一般包括接收芯片与跨阻放大器，接收芯片用于将接收的外部光信号转换为电信号，电信号经由跨阻放大器进行放大后传输至电路板300上的金手指，经由金手指将电信号传输至上位机。为了调整传输至上位机的电信号，电路板300上设置有接收驱动芯片，该接收驱动芯片与接收芯片或跨阻放大器电连接，如此接收芯片输出的电信号传输至接收驱动芯片，通过接收驱动芯片对电信号进行调整，调整后的电信号传输至上位机。在当前的现网应用中，往往会涉及到多速率切换的应用场景，如10.3125G与2.5G切换，25.78G与10.3125G切换等。作为现网应用中重要组成部分的光模块需要具备速率切换功能，以匹配多种速率变化的应用场景。光模块切换速率是通过模块内部的CDR芯片实现，该CDR芯片集成在驱动芯片内部，驱动芯片包括切换开关、旁路与CDR芯片，旁路、CDR芯片的一端均与切换开关电连接，旁路、时钟芯片的另一端均与激光驱动芯片的输出端口电连接，切换开关根据速率切换指令选择旁路或时钟芯片，以选择旁路的信号传输通路或时钟芯片的信号传输通路进行信号传输。以25.78G和10.3125G速率切换为例，信号在进入CDR芯片之前首先会进入一个切换开关，切换开关根据信号的速率继续选择通过那哪一路传输，如当发射和接收信号速率都是25.78G时，信号是通过发射或接收CDR芯片进行时钟数据恢复后继续向后端传输的，当信号速率切换为10.3125G时，信号则不会再通过CDR芯片，而是从其旁边的另一路旁路通过，相当于此时CDR芯片被旁路掉了。在一些实施例中，切换开关并没有自动识别信号速率的功能，只有执行信号传输通道切换的功能，切换动作需要指令，该指令是由CDR芯片外部的MCU根据当前的实时信号速率下达的。如，当信号速率为25.78G时，MCU向切换开关下达指令A，此时切换开关将信号传输通道连接到CDR；当信号速率为10.3125G时，MCU向切换开关下达指令B，此时切换开关将信号传输通道连接到旁路一路，实现光模块内部速率切换，速率切换成功后光模块能够在当前信号速率下正常工作。但是，随着光模块速率的提高，光模块方案的多样化，试验发现，在光模块速率切换动作结束后，会出现切换不成功的情况出现，即切换开关未能成功完成通道切换，光模块不能在当前最新速率下正常工作，表现为传输链路不通。为了解决上述问题，本申请提供了一种光模块，能够自动识别切换成功与否，并在未成功切换情况下进行继续切换，直到确保速率切换成功的自动稳定功能。图5为本申请实施例提供的一种光模块中电路板的局部结构示意图一，图6为本申请实施例提供的一种光模块的局部结构框图一。如图5、图6所示，本申请实施例提供的光模块包括电路板300、MCU320、激光驱动芯片330与激光芯片340，电路板300上设置有金手指310，该金手指310用于接收发射信号的速率。在一些实施例中，用户要切换发射信号速率，在上位机输入信号速率，如25.78G，10.3125G，经由金手指310传输至电路板300上。MCU320设置在电路板300上，用于检测金手指310传输的发射信号的速率，根据该发射信号的速率生成切换指令。激光驱动芯片330设置在电路板300上，与MCU320电连接，包括切换开关、旁路、发射时钟芯片与第一寄存器，切换开关用于根据切换指令切换信号传输通路，即切换开关根据切换指令选择连通旁路或发射时钟芯片，如发射信号的速率为25.78G时，切换开关根据切换指令选择将切换开关连接至发射时钟芯片，电信号通过发射时钟芯片进行时钟数据恢复后输出对应信号速率的调制电流；如发射信号的速率为10.3125G时，切换开关根据切换指令选择将切换开关连接至旁路，电信号通过旁路后输出对应信号速率的调制电流。激光芯片340与激光驱动芯片330电连接，激光芯片340根据调制电流发射对应速率的光信号，使得激光芯片340产生的光信号以相应的信号速率发射出去。第一寄存器用于根据速率切换后链路的导通状态产生第一预设值，并将第一预设值发送至MCU320，MCU320根据该第一预设值判定是否继续输出切换指令。在一些实施例中，为识别速率切换动作完成后，光模块是否在切换后速率下正常工作，可通过光模块的链路状态进行识别切换动作是否成功。若速率切换成功，则光模块链路处于导通状态，光模块内部有对应的寄存器对该状态进行一表征；若速率切换失败，则光模块处于锻炼状态，光模块内部对应的寄存器对该状态进行另一表征。激光驱动芯片330识别光模块的链路导通状态是驱动芯片内部的自带功能，链路导通时需要驱动芯片内部的某些功能部分工作起来，会有标志的电信号；若链路没有导通，那么驱动芯片内部的某些功能部分是没工作起来的，同样会有电压信号或电流信号这样的标志。因此，可根据激光驱动芯片330内的电信号标志来判定链路是否导通。在一些实施例中，在速率切换后，光模块链路处于导通状态，说明速率切换成功，则第一寄存器产生为0的第一预设值；在速率切换后，光模块链路处于断链状态，说明速率切换未成功，则第一寄存器产生为1的第一预设值。MCU320接收到第一寄存器上报的第一预设值，当检测到第一预设值为0时，MCU320判定速率切换成功，结束速率切换动作；当检测到第一预设值为1时，MCU320判定速率切换未成功，则MCU继续向切换开关发送切换指令，继续进行速率切换动作，直至MCU320检测到第一预设值为0，速率切换成功。本申请中，通过在激光驱动芯片330内设置第一寄存器，激光驱动芯片330自动检测速率切换后传输链路是否导通，根据传输链路是否导通在第一寄存器内存储0或1的第一预设值，并将该第一预设值传送至MCU320；MCU320根据第一寄存器上报的第一预设值判定速率切换是否成功，并在未成功情况下继续下达切换指令并完成下一次切换动作，直至速率切换成功。如此，彻底规避了光模块速率切换不稳定的现象出现，实现了光模块速率切换的自动稳定功能。同样地，不仅可在光发射组件400的激光驱动芯片330内集成第一寄存器，第一寄存器根据速率切换后链路的导通状态向MCU320内发送不同的预设值，MCU320根据该预设值判定速率切换是否成功，还可在光接收组件500的驱动芯片内集成第二寄存器，通过第二寄存器向MCU上报的预设值判定接收速率切换是否成功。图7为本申请实施例提供的一种光模块中电路板的局部结构示意图二，图8为本申请实施例提供的一种光模块的局部结构框图二。如图7、图8所示，本申请实施例提供的光模块包括电路板300、MCU320、接收驱动芯片350与接收芯片360，电路板300上设置有金手指310，该金手指310用于接收信号的传输速率。在一些实施例中，用户要切换接收信号速率，在上位机输入接收信号速率，如25.78G，10.3125G等，经由金手指310传输至电路板300上。MCU320设置在电路板300上，用于检测金手指310传输的接收信号的速率，根据该接收信号的速率生成切换指令。接收芯片360，设置在电路板300上，用于将接收的外部光信号转换为电信号，并将转换后的电信号传输至接收驱动芯片350。在一些实施例中，本申请实施例提供的光模块还包括跨阻放大器，该跨阻放大器设置在电路板300上，与接收芯片360、接收驱动芯片350电连接，接收芯片360将接收的光信号转换为电信号后，电信号传输至跨阻放大器，跨阻放大器对电信号进行放大，放大后的电信号传输至接收驱动芯片350。接收驱动芯片350设置在电路板300上，与MCU320、接收芯片360电连接，包括切换开关、旁路、接收时钟芯片与第二寄存器，切换开关用于根据切换指令切换信号传输通路，即切换开关根据切换指令选择连通旁路或接收时钟芯片内，如接收信号的速率为25.78G时，切换开关根据切换指令选择将切换开关连接至接收时钟芯片，来自接收芯片360的电信号通过接收时钟芯片进行时钟数据恢复后以对应的信号速率向金手指310传输；如接收信号的速率为10.3125G时，切换开关根据切换指令选择将切换开关连接至旁路，来自接收芯片360的电信号通过旁路后以对应信号速率向金手指310传输。第二寄存器用于根据速率切换后链路的导通状态产生第二预设值，并将第二预设值发送至MCU320，MCU320根据该第二预设值判定是否继续输出切换指令。在一些实施例中，为识别速率切换动作完成后，光模块是否在切换后速率下正常工作，可通过光模块的链路状态进行识别切换动作是否成功。接收驱动芯片350识别光模块的链路导通状态是驱动芯片内部的自带功能，链路导通时需要驱动芯片内部的某些功能部分工作起来，会有标志的电信号；若链路没有导通，那么驱动芯片内部的某些功能部分是没工作起来的，同样会有电压信号或电流信号这样的标志。因此，可根据接收驱动芯片350内的电信号标志来判定链路是否导通。在一些实施例中，在速率切换后，光模块链路处于导通状态，说明速率切换成功，则第二寄存器产生为0的第二预设值；在速率切换后，光模块链路处于断链状态，说明速率切换未成功，则第二寄存器产生为1的第二预设值。MCU320接收到第二寄存器上报的第二预设值，当检测到第二预设值为0时，MCU320判定速率切换成功，结束速率切换动作；当检测到第二预设值为1时，MCU320判定速率切换未成功，则MCU继续向切换开关发送切换指令，继续进行速率切换动作，直至MCU320检测到第二预设值为0，速率切换成功。本申请中，通过在接收驱动芯片350内设置第二寄存器，接收驱动芯片350自动检测速率切换后传输链路是否导通，根据传输链路是否导通在第二寄存器内存储0或1的第二预设值，并将该第二预设值传送至MCU320；MCU320根据第二寄存器上报的第二预设值判定速率切换是否功能，并在未成功情况下继续下达切换指令并完成下一次切换动作，直至速率切换成功。如此，彻底规避了光模块速率切换不稳定的现象出现，实现了光模块速率切换的自动稳定功能。在一些实施例中，不仅可在发射驱动芯片内设置第一寄存器来检测发射速率切换是否成功，可在接收驱动芯片内设置第二寄存器来检测接收速率切换是否成功，还可在收发驱动芯片内设置第一寄存器与第二寄存器来同时检测发射、接收速率切换是否成功。图9为本申请实施例提供的一种光模块中电路板的局部结构示意图三，图10为本申请实施例提供的一种光模块的局部结构框图三。如图9、图10所示，本申请实施例提供的光模块包括电路板300、MCU320、收发驱动芯片370、激光芯片340与接收芯片360，电路板300上设置有金手指310，该金手指310用于接收信号速率。在一些实施例中，用户要切换发射/接收信号速率，在上位机输入信号速率，如发射/接收速率25.78G，10.3125G等，经由金手指310传输至电路板300。MCU320设置在电路板300上，用于检测金手指310传输的信号速率，根据该信号速率生成发射速率切换指令、接收速率切换指令。收发驱动芯片370设置在电路板300上，与MCU320电连接，包括第一切换开关、第一寄存器、第二切换开关与第二寄存器，第一切换开关用于根据发射速率切换指令切换发射信号传输通路，根据切换后的发射信号传输通路输出对应信号速率的调制电流，即第一切换开关根据发射速率切换指令选择将切换开关连接至旁路或发射时钟芯片，金手指310传输的电信号通过旁路或发射时钟芯片后输出对应信号速率的调制电流。激光芯片340与收发驱动芯片370电连接，激光芯片340根据接收的调制电流发射对应速率的光信号，使得激光芯片340根据调制电流产生的光信号以相应的信号速率发射出去。第一寄存器用于根据速率切换后发射链路的导通状态产生第一预设值，并将第一预设值发送至MCU320，MCU320根据第一预设值判定是否继续输出发射切换指令。在一些实施例中，收发驱动芯片370识别光模块的链路导通状态是驱动芯片内部的自带功能，在速率切换后，光模块的发射链路处于导通状态，说明发射速率切换成功，则第一寄存器产生为0的第一预设值；在速率切换后，光模块的发射链路处于断链状态，说明速率切换未成功，则第一寄存器产生为1的第一预设值。MCU320接收到第一寄存器上报的第一预设值，当检测到第一预设值为0时，MCU320判定发射速率切换成功，结束速率切换动作；当检测到第一预设值为1时，MCU320判定发射速率切换未成功，则MCU继续向切换开关发送发射速率切换指令，继续进行发射速率切换动作，直至MCU320检测到第一预设值为0，发射速率切换成功。接收芯片360与收发驱动芯片370电连接，用于将接收的外部光信号转换为电信号，并将电信号传输至收发驱动芯片370。第二切换开关用于根据接收速率切换指令切换接收信号传输通路，根据切换后接收信号传输通路的信号速率将转换后的电信号传输至金手指310，实现光信号的接收。即第二切换开关根据接收速率切换指令选择连通旁路或接收时钟芯片，来自接收芯片360的电信号通过选定的旁路或接收时钟芯片处理后以对应的信号速率传输至金手指310。第二寄存器用于根据速率切换后接收链路的导通状态产生第二预设值，并将第二预设值发送至MCU320，MCU320根据该第二预设值判定是否继续输出接收速率切换指令。在一些实施例中，收发驱动芯片370识别光模块的链路导通状态是驱动芯片内部的自带功能，在速率切换后，光模块的接收链路处于导通状态，说明接收速率切换成功，则第二寄存器产生为0的第二预设值；在速率切换后，光模块的接收链路处于断链状态，说明接收速率切换未成功，则第二寄存器产生为1的第二预设值。MCU320接收到第二寄存器上报的第二预设值，当检测到第二预设值为0时，MCU320判定接收速率切换成功，结束速率切换动作；当检测到第二预设值为1时，MCU320判定接收速率切换未成功，则MCU继续向切换开关发送接收速率切换指令，继续进行接收速率切换动作，直至MCU320检测到第二预设值为0，接收速率切换成功。本申请实施例提供的光模块中，MCU根据信号速率向驱动芯片发送切换指令，驱动芯片内的切换开关根据切换指令切换信号传输通路时，为避免切换开关未能成功完成通路切换，通过驱动芯片自动识别速率切换是否成功，并根据切换成功与否在驱动芯片内的寄存器内产生不同的预设值，MCU根据该预设值判定速率切换是否成功，并在未成功情况下继续自动下达切换指令，并完成下一次切换动作，直至速率切换成功，如此规避了光模块速率切换不稳定的现象出现，实现了光模块速率切换的自动稳定功能。最后应说明的是：以上实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围。
