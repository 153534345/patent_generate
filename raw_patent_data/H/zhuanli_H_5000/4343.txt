标题title
视频编码码率处理方法和装置、存储介质及电子设备
摘要abst
本发明公开了一种视频编码码率处理方法和装置、存储介质及电子设备。其中，上述方法包括：根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率；根据原始视频编码码率对每个编码单元进行视频编码，以及根据特征编码码率对编码单元中的图像特征进行压缩；当上述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率；根据当前视频帧的实际编码码率与视频帧的目标传输码率，调整当前视频帧的下一视频帧的目标码率。本发明解决了视频编码码率处理效率较低的技术问题。
权利要求书clms
1.一种视频编码码率处理方法，其特征在于，包括：根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率；根据所述原始视频编码码率对每个所述编码单元进行视频编码，以及根据特征编码码率对所述编码单元中的图像特征进行压缩；当所述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率；根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率；其中，所述目标传输码率为当前网络环境中每一视频帧的目标码率。2.根据权利要求1所述的方法，其特征在于，所述根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率，包括：通过公式和获取每个编码单元对应的原始视频编码码率和特征编码码率：B=Bv+a*Bc+b Bv=0.66B其中，B为当前编码单元的目标码率，Bv为原始视频编码码率，Bc为特征编码码率，a=2，b=1000。3.根据权利要求1所述的方法，其特征在于，所述根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率之前，还包括：将所述当前视频帧划分为多个编码单元；将所述目标传输码率均分到所述多个编码单元，得到每个编码单元的目标码率。4.根据权利要求3所述的方法，其特征在于，所述方法还包括：基于当前编码单元的纹理复杂度调整所述当前编码单元的目标码率，得到调整目标码率；所述根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率，包括：根据当前视频帧中的每个编码单元的调整目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率。5.根据权利要求1所述的方法，其特征在于，所述根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所当前视频帧的下一视频帧的目标码率，包括：当所述当前视频帧的实际编码码率大于视频帧的目标传输码率时，增大所述当前视频帧的下一视频帧的目标码率；当所述当前视频帧的实际编码码率小于视频帧的目标传输码率时，减小所述当前视频帧的下一视频帧的目标码率。6.根据权利要求4所述的方法，其特征在于，所述方法还包括：根据当前网络环境参数确定所述目标传输码率。7.一种视频编码码率处理装置，其特征在于，包括：第一确定单元，用于根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率；编码与压缩单元，用于根据所述原始视频编码码率对每个所述编码单元进行视频编码，以及根据特征编码码率对所述编码单元中的图像特征进行压缩；获取单元，用于当所述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率；调整单元，用于根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率；其中，所述目标传输码率为当前网络环境中每一视频帧的目标码率。8.根据权利要求7所述的装置，其特征在于，所述第一确定单元，具体包括：获取模块，用于通过公式和获取每个编码单元对应的原始视频编码码率和特征编码码率：B=Bv+a*Bc +bBv=0.66B其中，B为当前编码单元的目标码率，Bv为原始视频编码码率，Bc为特征编码码率，a=2，b=1000。9.一种电子设备，包括存储器和处理器，其特征在于，所述存储器中存储有计算机程序，所述处理器被设置为通过所述计算机程序执行所述权利要求1至6任一项中所述的方法。10.一种计算机可读的存储介质，其特征在于，所述计算机可读的存储介质包括存储的程序，其中，所述程序运行时执行所述权利要求1至6任一项中所述的方法。
说明书desc
技术领域本发明涉及视频处理技术领域，具体而言，涉及一种视频编码码率处理方法和装置、存储介质及电子设备。背景技术图像和视频数据，是智能生活系统中关键的要素。目前的智能生活应用场景会以选择传输视觉特征信号的方式来实现识别、检索、跟踪等功能，而原始的视频信号可以让用户进行存储并离线观看。因此智能生活系统在数据传输过程中需要设置两个码流，一个是视频编码压缩流，另一个是特征编码压缩流，通过智能终端网络传输到用户端。但通常情况下，由于智能终端网络的带宽受限，无法在既定的带宽下为视频编码码流和特征编码码流的分配合适的码率，视频编码码率处理效率较低。发明内容本发明实施例提供了一种视频编码码率处理方法和装置、存储介质及电子设备，以至少解决视频编码码率处理效率较低的技术问题。根据本发明实施例的一个方面，提供了一种视频编码码率处理方法，包括：根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率；根据所述原始视频编码码率对每个所述编码单元进行视频编码，以及根据特征编码码率对所述编码单元中的图像特征进行压缩；当所述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率；根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率；其中，所述目标传输码率为当前网络环境中每一视频帧的目标码率。根据本发明实施例的另一方面，还提供了一种视频编码码率处理装置，包括：第一确定单元，用于根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率；编码与压缩单元，用于根据所述原始视频编码码率对每个所述编码单元进行视频编码，以及根据特征编码码率对所述编码单元中的图像特征进行压缩；获取单元，用于当所述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率；调整单元，用于根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率；其中，所述目标传输码率为当前网络环境中每一视频帧的目标码率。根据本发明实施例的又一方面，还提供了一种电子设备，包括存储器和处理器，上述存储器中存储有计算机程序，上述处理器被设置为通过上述计算机程序执行上述的视频编码码率处理方法。根据本发明实施例的又一方面，还提供了一种计算机可读的存储介质，该计算机可读的存储介质中存储有计算机程序，其中，该计算机程序被设置为运行时执行上述视频编码码率处理方法。在本发明实施例中，采用了根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率；根据所述原始视频编码码率对每个所述编码单元进行视频编码，以及根据特征编码码率对所述编码单元中的图像特征进行压缩；当所述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率；根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率；其中，所述目标传输码率为当前网络环境中每一视频帧的目标码率的方法，在上述方法中，根据预设的码率分配模型确定所述每个编码单元对应的原始视频编码码率和特征编码码率，并根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率，不仅能够合理分配视频编码码流和特征编码码流，而且提高了视频编码码率处理效率和准确性，进而解决了视频编码码率处理效率较低的技术问题。附图说明此处所说明的附图用来提供对本发明的进一步理解，构成本申请的一部分，本发明的示意性实施例及其说明用于解释本发明，并不构成对本发明的不当限定。在附图中：图1是根据本发明实施例的一种可选的视频编码码率处理方法的应用环境的示意图；图2是根据本发明实施例的另一种可选的视频编码码率处理方法的应用环境的示意图；图3是根据本发明实施例的一种可选的视频编码码率处理的流程示意图；图4是根据本发明实施例的另一种可选的视频编码码率处理方法的流程示意图；图5是根据本发明实施例的又一种可选的视频编码码率处理方法的流程示意图；图6是根据本发明实施例的又一种可选的视频编码码率处理方法的系统结构示意图；图7是根据本发明实施例的又一种可选的硬件电路内部流水结构示意图；图8是根据本发明实施例的一种可选的视频编码码率处理装置的结构示意图；图9是根据本发明实施例的一种可选的电子设备的结构示意图。具体实施方式为了使本技术领域的人员更好地理解本发明方案，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分的实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本发明保护的范围。需要说明的是，本发明的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本发明的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。根据本发明实施例的一个方面，提供了一种视频编码码率处理方法，可选地，作为一种可选地实施方式，上述视频编码码率处理方法可以但不限于应用于如图1所示的应用环境中。该应用环境中包括：与用户进行人机交互的终端设备102、网络104、服务器106。用户108与终端设备102之间可以进行人机交互，终端设备102中运行有视频编码码率处理应用程序。上述终端设备102中包括人机交互屏幕1022，处理器1024及存储器1026。人机交互屏幕1022用于显示当前视频的视频帧；处理器1024用于获取当前视频对应的每个编码单元。存储器1026用于存储上述每个编码单元对应的原始视频编码码率和特征编码码率。此外，服务器106中包括数据库1062及处理引擎1064，数据库1062中用于存储上述每个编码单元对应的原始视频编码码率和特征编码码率。处理引擎1064用于根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率；根据所述原始视频编码码率对每个所述编码单元进行视频编码，以及根据特征编码码率对所述编码单元中的图像特征进行压缩；当所述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率；根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率；其中，所述目标传输码率为当前网络环境中每一视频帧的目标码率。在一个或多个实施例中，本申请上述视频编码码率处理方法可以应用于图2所示的应用环境中。如图2所示，用户202与用户设备204之间可以进行人机交互。用户设备204中包含有存储器206和处理器208。本实施例中用户设备204可以但不限于参考执行上述终端设备102所执行的操作，以获取视频帧的目标码率。可选地，上述终端设备102和用户设备204包括但不限于为手机、平板电脑、笔记本电脑、PC机，车载电子设备，可穿戴设备等终端，上述网络104可以包括但不限于无线网络或有线网络。其中，该无线网络包括：WIFI及其他实现无线通信的网络。上述有线网络可以包括但不限于：广域网、城域网、局域网。上述服务器106可以包括但不限于任何可以进行计算的硬件设备。上述服务器可以是单一服务器，也可以是由多个服务器组成的服务器集群，或者是云服务器。上述仅是一种示例，本实施例中对此不作任何限定。为了解决上述技术问题，作为一种可选地实施方式，如图3所示，本发明实施例提供了一种视频编码码率处理方法，包括如下步骤：S302，根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率。在本发明实施例中，通过获取当前待传输的视频对应的原始视频和原始视频对应的视频特征；该视频特征为从上述原始视频中获取到的图像特征；这里，包括但不限于将上述原始视频中的每个视频帧划分为多个编码单元，如将一帧图像划分为N个编码单元，每个编码单元大小为MxM。S304，根据所述原始视频编码码率对每个所述编码单元进行视频编码，以及根据特征编码码率对所述编码单元中的图像特征进行压缩。这里，基于所述原始视频编码码率对每个所述编码单元进行视频编码，例如，原始视频码率为5-10Mbps，那根据H.264标准将每个编码单元进行编码，以输出720P和1080I分辨率的视频；如特征编码码率为1-5Mbps，根据上述特征编码码率对所述编码单元中的图像特征进行压缩。S306，当所述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率。在本发明实施例中，当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，由于视频帧中的每个编码单元的像素复杂度，如纹理复杂度不同，因此当前视频帧的实际编码码率与提前设定好的视频帧的目标传输码率存在差别。S308，根据所当前视频帧的实际编码码率与视频帧的目标传输码率，调整所当前视频帧的下一视频帧的目标码率；其中，所述目标传输码率为当前网络环境中每一视频帧的目标码率。在本发明实施例中，为了能够在既定的网络环境中，例如视频帧的目标传输码率为10 Mbps，当前视频帧的实际编码码率为9Mbps，那么调整所当前视频帧的下一视频帧的目标码率为11Mbps，可以使得整个视频的传输码率保持在10 Mbps左右。在本发明实施例中，采用了根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率；根据所述原始视频编码码率对每个所述编码单元进行视频编码，以及根据特征编码码率对所述编码单元中的图像特征进行压缩；当所述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率；根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率；其中，所述目标传输码率为当前网络环境中每一视频帧的目标码率的方法，在上述方法中，根据预设的码率分配模型确定所述每个编码单元对应的原始视频编码码率和特征编码码率，并根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率，不仅能够合理分配视频编码码流和特征编码码流，而且提高了视频编码码率处理效率，进而解决了视频编码码率处理效率较低的技术问题。在一个或多个实施例中，所述根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率，包括：通过公式和获取每个编码单元对应的原始视频编码码率和特征编码码率：B=Bv+a*Bc+bBv=0.66B 其中，B为当前编码单元的目标码率，Bv为原始视频编码码率，Bc为特征编码码率，a=2，b=1000。通过上述码率分配模型能将每个编码单元的目标码率合理的分配给每个编码单元对应的原始视频编码码率和特征编码码率，提高视频编码码率处理效率。在一个或多个实施例中，所述根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率之前，还包括：将所述当前视频帧划分为多个编码单元；将所述目标传输码率均分到所述多个编码单元，得到每个编码单元的目标码率。具体地，例如将一帧图像划分为N个编码单元，目标传输码率为Bt，每个编码单元的目标码率Bf=Bt/N。在一个或多个实施例中，所述方法还包括：基于当前编码单元的纹理复杂度调整所述当前编码单元的目标码率，得到调整目标码率。具体地，由于一帧图像中的不同编码单元中的纹理复杂度不同；这里可以将纹理复杂度高的编码单元的目标码率相应的调高，将纹理复杂度低的编码单元的目标码率相应的调低。所述基于每个编码单元的目标码率，并根据预设的码率分配模型确定所述每个编码单元对应的原始视频编码码率和特征编码码率，包括：所述根据当前视频帧中的每个编码单元的调整目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率。具体地，假设当前编码单元的调整目标码率为0.9B，那么根据公式0.9B=Bv+a*Bc+b，可以得到每个编码单元对应的原始视频编码码率Bv和特征编码码率Bc，a=2，b=1000。在一个或多个实施例中，所述根据所当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率，包括：当所述当前视频帧的实际编码码率大于视频帧的目标传输码率时，增大所述当前视频帧的下一视频帧的目标码率；当所述当前视频帧的实际编码码率小于视频帧的目标传输码率时，减小所述当前视频帧的下一视频帧的目标码率。在一个或多个实施例中，所述方法还包括：根据当前网络环境参数确定所述目标传输码率。具体地，如果当前网络带宽为10M，在网络较为稳定的情况下，可以设置目标传输码率为10 Mbps；在当前网络容易出现阻塞或掉线的情况下，可以将目标传输码率设置为小于10 Mbps。基于上述实施例，在一应用实施例中，如图4和图5所示，上述的视频编码码率处理方法包括：1.获取原始视频和原始视频中每帧图像中的视频特征。2.获取视频帧中当前帧图像的目标码率Bt。3.将当前帧图像划分为N个大小为MxM的编码块，获取当前块的目标码率Bf，Bf=Bt/N。4.根据当前编码块的复杂度进一步调整块级目标码率为B。5.根据当前块的目标码率B、视频和特征的码率分配模型将B分配给原始视频和视频帧中的图像特征二者的编码码率分别为Bv和Bc。6.原始视频根据Bv进行视频编码，视频帧中的图像特征按照Bc压缩图像特征。7.若当前视频帧是否编码完成所有块，若完成，则获取当前编码帧的视频块和特征块码流的实际编码码率之和Bs，根据Bs调整下一帧的目标码率，进而调整每个块级的目标码率；若当前视频帧没有完成编码所有块，则转到步骤5继续编码和压缩。如图6所示，本发明实施例的总体电路结构采用软硬件结合的实现方案，其中原始的视频码率估计的帧级码率估计采用软件实现，块级码率控制采用硬件实现。视频特征包含特征提取和特征压缩两部分，码流估计在特征压缩中实现采用软件实现，特征提取可分块执行采用硬件执行。如图7所示，在不同时刻可以对视频帧中的每个不同的编码块进行不同的操作，最大限度的利用计算资源，提高视频编码效率。本发明实施例还具有以下有益效果：1.在实现同时支持特征编码和视频编码的硬件电路中，解决了码率估计的问题。2.通过设置码率估计微结构电路，实现实时或低延迟编码码率的配置处理效果。需要说明的是，对于前述的各方法实施例，为了简单描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本发明并不受所描述的动作顺序的限制，因为依据本发明，某些步骤可以采用其他顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于优选实施例，所涉及的动作和模块并不一定是本发明所必须的。根据本发明实施例的另一个方面，还提供了一种用于实施上述视频编码码率处理方法的视频编码码率处理装置。如图8所示，该装置包括：第一确定单元802，用于根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率；编码与压缩单元804，用于根据所述原始视频编码码率对每个所述编码单元进行视频编码，以及根据特征编码码率对所述编码单元中的图像特征进行压缩；获取单元806，用于当所述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率；调整单元808，用于根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率；其中，所述目标传输码率为当前网络环境中每一视频帧的目标码率。在本发明实施例中，采用了根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率；根据所述原始视频编码码率对每个所述编码单元进行视频编码，以及根据特征编码码率对所述编码单元中的图像特征进行压缩；当所述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率；根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率；其中，所述目标传输码率为当前网络环境中每一视频帧的目标码率的方法，在上述方法中，由于采用根据预设的码率分配模型确定所述每个编码单元对应的原始视频编码码率和特征编码码率，并根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所述当前视频帧的下一视频帧的目标码率，不仅能够合理分配视频编码码流和特征编码码流，而且提高了视频编码码率处理效率，进而解决了视频编码码率处理效率较低的技术问题。在一个或多个实施例中，所述第一确定单元802，具体包括：获取模块，用于通过公式和获取每个编码单元对应的原始视频编码码率和特征编码码率：B=Bv+a*Bc+b Bv=0.66B其中，B为当前编码单元的目标码率，Bv为原始视频编码码率，Bc为特征编码码率，a=2，b=1000。在一个或多个实施例中，所述视频编码码率处理装置，还包括：划分单元，用于将所述当前视频帧划分为多个编码单元；均分单元，用于将所述目标传输码率均分到所述多个编码单元，得到每个编码单元的目标码率。在一个或多个实施例中，所述视频编码码率处理装置还包括：调整单元，用于基于当前编码单元的纹理复杂度调整所述当前编码单元的目标码率，得到调整目标码率；所述第一确定单元802，还包括：确定模块，用于根据当前视频帧中的每个编码单元的调整目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率。在一个或多个实施例中，所述调整单元，具体包括：第一调整模块，用于当所述当前视频帧的实际编码码率大于视频帧的目标传输码率时，增大所当前视频帧的下一视频帧的目标码率；第二调整模块，用于当所述当前视频帧的实际编码码率小于视频帧的目标传输码率时，减小所当前视频帧的下一视频帧的目标码率。在一个或多个实施例中，所述视频编码码率处理装置还包括：第二确定单元，用于根据当前网络环境参数确定所述目标传输码率。根据本发明实施例的又一个方面，还提供了一种用于实施上述视频编码码率处理方法的电子设备，该电子设备可以是图9所示的终端设备或服务器。本实施例以该电子设备为终端为例来说明。如图9所示，该电子设备包括存储器902和处理器904，该存储器902中存储有计算机程序，该处理器904被设置为通过计算机程序执行上述任一项方法实施例中的步骤。可选地，在本实施例中，上述电子设备可以位于计算机网络的多个网络设备中的至少一个网络设备。可选地，在本实施例中，上述处理器可以被设置为通过计算机程序执行以下步骤：S1，根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率；S2，根据所述原始视频编码码率对每个所述编码单元进行视频编码，以及根据特征编码码率对所述编码单元中的图像特征进行压缩；S3，当所述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率；S4，根据所述当前视频帧的实际编码码率与视频帧的目标传输码率，调整所当前视频帧的下一视频帧的目标码率；其中，所述目标传输码率为当前网络环境中每一视频帧的目标码率。可选地，本领域普通技术人员可以理解，图9所示的结构仅为示意，电子装置电子设备也可以是智能手机、平板电脑、掌上电脑以及移动互联网设备、PAD等终端设备。图9其并不对上述电子装置电子设备的结构造成限定。例如，电子装置电子设备还可包括比图9中所示更多或者更少的组件，或者具有与图9所示不同的配置。其中，存储器902可用于存储软件程序以及模块，如本发明实施例中的视频编码码率处理方法和装置对应的程序指令/模块，处理器904通过运行存储在存储器902内的软件程序以及模块，从而执行各种功能应用以及数据处理，即实现上述的视频编码码率处理方法。存储器902可包括高速随机存储器，还可以包括非易失性存储器，如一个或者多个磁性存储装置、闪存、或者其他非易失性固态存储器。在一些实例中，存储器902可进一步包括相对于处理器904远程设置的存储器，这些远程存储器可以通过网络连接至终端。上述网络的实例包括但不限于互联网、企业内部网、局域网、移动通信网及其组合。其中，存储器902具体可以但不限于用于存储视频帧和图像特征等信息。作为一种示例，如图9所示，上述存储器902中可以但不限于包括上述视频编码码率处理装置中的第一确定单元802、编码与压缩单元804、获取单元806与调整单元808。此外，还可以包括但不限于上述视频编码码率处理装置中的其他模块单元，本示例中不再赘述。可选地，上述的传输装置906用于经由一个网络接收或者发送数据。上述的网络具体实例可包括有线网络及无线网络。在一个实例中，传输装置906包括一个网络适配器，其可通过网线与其他网络设备与路由器相连从而可与互联网或局域网进行通讯。在一个实例中，传输装置906为射频模块，其用于通过无线方式与互联网进行通讯。此外，上述电子设备还包括：显示器908，用于显示上述视频帧；和连接总线910，用于连接上述电子设备中的各个模块部件。在其他实施例中，上述终端设备或者服务器可以是一个分布式系统中的一个节点，其中，该分布式系统可以为区块链系统，该区块链系统可以是由该多个节点通过网络通信的形式连接形成的分布式系统。其中，节点之间可以组成点对点网络，任意形式的计算设备，比如服务器、终端等电子设备都可以通过加入该点对点网络而成为该区块链系统中的一个节点。根据本申请的一个方面，提供了一种计算机程序产品或计算机程序，该计算机程序产品或计算机程序包括计算机指令，该计算机指令存储在计算机可读存储介质中。计算机设备的处理器从计算机可读存储介质读取该计算机指令，处理器执行该计算机指令，使得该计算机设备执行上述视频编码码率处理方法，其中，该计算机程序被设置为运行时执行上述任一项方法实施例中的步骤。可选地，在本实施例中，上述计算机可读的存储介质可以被设置为存储用于执行以下步骤的计算机程序：S1，根据当前视频帧中的每个编码单元的目标码率以及预设的码率分配模型，分别确定所述每个编码单元对应的原始视频编码码率和特征编码码率；S2，根据所述原始视频编码码率对每个所述编码单元进行视频编码，以及根据特征编码码率对所述编码单元中的图像特征进行压缩；S3，当所述当前视频帧中的所有编码单元均完成视频编码以及图像特征压缩时，获取当前视频帧的实际编码码率；S4，根据所当前视频帧的实际编码码率与视频帧的目标传输码率，调整所当前视频帧的下一视频帧的目标码率；其中，所述目标传输码率为当前网络环境中每一视频帧的目标码率。可选地，在本实施例中，本领域普通技术人员可以理解上述实施例的各种方法中的全部或部分步骤是可以通过程序来指令终端设备相关的硬件来完成，该程序可以存储于一计算机可读存储介质中，存储介质可以包括：闪存盘、只读存储器、随机存取器、磁盘或光盘等。上述本发明实施例序号仅仅为了描述，不代表实施例的优劣。上述实施例中的集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在上述计算机可读取的存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该计算机软件产品存储在存储介质中，包括若干指令用以使得一台或多台计算机设备执行本发明各个实施例方法的全部或部分步骤。在本发明的上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述的部分，可以参见其他实施例的相关描述。在本申请所提供的几个实施例中，应该理解到，所揭露的客户端，可通过其它的方式实现。其中，以上所描述的装置实施例仅仅是示意性的，例如单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，单元或模块的间接耦合或通信连接，可以是电性或其它的形式。作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本发明各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。以上仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本发明的保护范围。
