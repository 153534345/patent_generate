标题title
基于数据流推送的教学资源交互方法及系统
摘要abst
本发明提供了一种基于数据流推送的教学资源交互方法及系统，在宽带闲置时段提前下载所需的资源至本地，在教学时仅传输包括虚拟位置信息、移动方向、旋转角度在内的数据流，即可在服务器、学生端、教师端之间实现交互，相较于传统传输图片和视频流的方式，本方案在实现相同功能的情况下极大的缩小了带宽需求，从而有效避免了因带宽不足、信号波动等情况下产生的画面卡顿、丢帧等问题。此外，在遇到信号不稳、断流或短期丢包时，本方法可以对数据进行预处理，通过丢包前的头部动作趋势提前预测下面几帧的画面并继续渲染给学生，直至信号恢复重新接到新的数据包，实现丢包前后画面的平顺衔接。
权利要求书clms
1.基于数据流推送的教学资源交互方法，其特征在于，包括如下步骤：S1、接入课程资源数据，对课程资源数据进行解析；S2、矢量化课程资源数据：将经过S1解析后的课程资源按照安全教育、科普教育、基础学科、素质教育划分为N个一级分类Xi；每个所述一级分类Xi下包含有M个课程资源Yj；将以上N个一级分类Xi和M个课程资源Yj构建成一个N维矢量，N维矢量中的每一个元素XiYj即代表一个课程资源；S3、开发人员将课程资源XiYj压缩打包为多个大小相同的块，打包后的课程资源以“课程资源内容本身的二进制压缩文件+包体描述文件”的组合方式存放在服务器中一级分类Xi的文件夹下；S4、教师端根据教学需求选择相应的课程资源，推送至学生端；S5、学生端下载课程资源，并按照“一级分类/二级分类”的格式存储在本地；S6、全部学生准备就绪后，通过学生端解压存储在本地的预定课程资源，通过VR眼镜开始线上授课；学生端、服务器、教师端之间传输包括虚拟位置信息、移动方向、旋转角度在内的数据流，学生端根据所述数据流渲染画面并输出。2.根据权利要求1所述的教学资源交互方法，其特征在于，步骤S6中，授课方式分为统一画面模式和自由模式：在统一画面模式下，学生端接收到的画面由教师端控制，学生端的学习内容与教师端内容一致，画面可自由查看，也可受教师端控制实现画面同步；同步的画面内容由教师端指定；在自由模式下，学生端通过头部动作自行改变画面视角，不受教师端控制。3.根据权利要求2所述的教学资源交互方法，其特征在于，在自由模式下：学生端的VR眼镜每隔预定时间记录一次虚拟位置信息-Vector3、移动方向-Vector3、旋转角度-Vector3，上述数据流实时传输至服务器中，再由服务器实时推送至教师端，并在教师端的监控屏幕上实时渲染出学生端看到的画面；每个学生对应一个子画面，以学号顺序排列显示在教师端的监控屏幕上。4.根据权利要求1所述的教学资源交互方法，其特征在于，在统一画面模式下：教师端通过VR眼镜或通过GUI界面键鼠操作画面，每隔预定时间记录一次虚拟位置信息-Vector3、移动方向-Vector3、旋转角度-Vector3，上述数据流实时传输至服务器中，再由服务器实时推送至学生端，并在学生端的VR眼镜内渲染出教师端看到的画面、或指定预定学生的画面。5.根据权利要求1所述的教学资源交互方法，其特征在于，教师端每隔预定时间向服务器请求当前班级学生的数据流，服务器按照“学生学号+虚拟位置信息+移动方向+旋转角度”的格式返回给教师端。6.根据权利要求5所述的教学资源交互方法，其特征在于，在教师授课过程中，部署等同于当前学生数量的摄像机，每个摄像机持有与学号对应的ID；对传输过来的数据流切割字符串，读取虚拟位置信息后的Vector3赋值给与当前学号对应的摄像机的localPositon；读取旋转角度后的Vector3赋值给当前学号对应的摄像机的localRotation；其中，localPositon表示摄像机的本地位置信息；localRotation表示摄像机的本地旋转信息；在具有本地位置信息和本地旋转信息的条件下，摄像机角度固定且唯一。7.根据权利要求1所述的教学资源交互方法，其特征在于，步骤S6中学生端在解压存储在本地的预定课程资源之前，首先与服务器建立通信，获取教学内容对应的包体描述文件，根据包体描述文件指向到对应的二进制压缩包文件，并解压。8.根据权利要求5所述的教学资源交互方法，其特征在于，学生端某次发送给服务器的网络数据流记作n，服务器把接受到学生端n网络数据流发送给教师端，对应学生端发送的下一次网络数据流记作n+1；当教师端接收到n数据流和n+1数据流至少两条以上数据流后，教师端根据n数据流和n+1数据流中记录的摄像机旋转角度-Vector3计算得出n数据流到n+1数据流的学生端摄像机绕x、y、z三轴旋转的角速度Wx、Wy、Wz；根据以上计算结果，在n+1数据流中得到的摄像机旋转数据基础上，由教师端本地推演n+2数据流中摄像机旋转角度，教师端把推演的数据缓存到本地。9.根据权利要求8所述的教学资源交互方法，其特征在于，当教师端接收到从服务器一次发送的多条数据流n+2、n+3、n+4、n+5时，逐一解析数据流并判断：如果实际接收到的n+2数据流中包含除摄像机位置信息的其他数据内容，并且实际接收到的n+2数据流与本地推演缓存的n+2数据流不一致，则本地推演缓存的n+2数据流及之后的数据舍弃，教师端回滚到接受到n+1数据流时状态，根据接受到最新n+2数据进行下一步的数据应用和画面呈现；如果一致，则继续校验n+2数据流之后的若干数量的数据流，直到校验完本地所有缓存数据；如果接收到的多条数据流中不包含除摄像机位置信息的其他数据内容，教师端直接应用n+5数据流数据到摄像机上，清除本地推演缓存的数据，完成教师端画面呈现。10.基于数据流推送的教学资源交互系统，用于驱动并执行如权利要求1至9中任一项所述的教学资源交互方法，其特征在于，所述系统包括：服务器，接入课程资源数据，对课程资源数据进行解析并矢量化；教师端，与所述服务器建立双向通信，用于读取所述服务器内的课程资源，并选择预定的课程资源推送至学生端；学生端，与所述教师端、服务器建立双向通信，用于接收来自所述教师端推送的课程资源，通过OTA的方式下载至本地；所述学生端、服务器、教师端之间传输包括虚拟位置信息、移动方向、旋转角度在内的数据流。
说明书desc
技术领域本发明涉及领域G09B：教育或演示用具，尤其涉及一种基于数据流推送的教学资源交互方法及系统。背景技术目前，利用VR眼镜学习课程知识已经成为新兴的教学方式，从而开发对学生VR上课进行管理的教师端系统方案也成为了必然。现有的教师端管理系统通过教师登录之后，查看学生设备的画面，来达到监测管理学生VR眼镜端的学习内容。现有技术方案中在对学生使用时观察内容的监测方法主要还是通过即时传输VR眼镜端的截图画面，显示到教室管理系统中，此方法对网络带宽、服务器容量的要求较高，教师端会出现显示画面不连贯、不同步等问题。并且随着学生数量的增加，教师管理系统更加容易出现异常卡顿，崩溃等问题。发明内容发明目的：提出一种基于数据流推送的教学资源交互方法，并进一步提出一种用于实现上述方法的系统，采用数据流的传输形式，使得教师端、学生端、服务器端三端协同通信，解决了由于宽带瓶颈导致的上述问题。第一方面，提出一种基于数据流推送的教学资源交互方法及系统，该方法步骤如下：S1、接入课程资源数据，对课程资源数据进行解析；S2、矢量化课程资源数据：将经过S1解析后的课程资源按照安全教育、科普教育、基础学科、素质教育划分为N个一级分类Xi；每个所述一级分类Xi下包含有M个课程资源Yj；将以上N个一级分类Xi和M个课程资源Yj构建成一个N维矢量，N维矢量中的每一个元素XiYj即代表一个课程资源；N维矢量表示如下：S3、开发人员将课程资源XiYj压缩打包为多个大小相同的块，打包后的课程资源以“课程资源内容本身的二进制压缩文件+包体描述文件”的组合方式存放在服务器中一级分类Xi的文件夹下。S4、教师端根据教学需求选择相应的课程资源，推送至学生端；在读取时会先加载压缩包的包体描述文件，再根据包体描述文件描述的内容解压对应的压缩包，相较于直接解压整块包体，效率会有更进一步提高。S5、学生端下载课程资源，并按照“一级分类/二级分类”的格式存储在本地；能有效减少客户端存储的混乱问题，有利于后期课程的继续开发，也方便了本地的数据管理；并且教师可以自由组合不同的课程内容，个性化定制教学方案，一键推送到学生VR眼镜端，方便了教师灵活定制教学方案的需求。S6、全部学生准备就绪后，通过学生端解压存储在本地的预定课程资源，通过VR眼镜开始线上授课；学生端、服务器、教师端之间传输包括虚拟位置信息、移动方向、旋转角度在内的数据流，学生端根据所述数据流渲染画面并输出。相较于传统使用平台管理头盔内容，在多人使用并发时，都是使用的传输图片和视频流的方式，本方案可以有效减缓服务器压力，提高教学流畅度和可靠性。在第一方面的一些可实现方式中，授课方式分为统一画面模式和自由模式：在统一画面模式下，学生端接收到的画面由教师端控制，学生端画面与教师端画面保持同步；教师端可以采用键鼠操作或携带VR眼镜的方式移动视角，学生端VR眼镜内显示的画面内容即为教师端显示的画面内容。在此模式下，学生任意移动头部并不会引起画面改变。在自由模式下，学生端可以自由观看使用眼镜里的内容，通过头部动作自行改变画面视角，不受教师端控制，此时学生端接收到的画面由学生端通过头部动作自行控制。教师端可以通过监控屏幕显示每个学生所看到的实时画面。在第一方面的一些可实现方式中，在自由模式下：学生端的VR眼镜每隔预定时间记录一次虚拟位置信息-Vector3、移动方向-Vector3、旋转角度-Vector3，上述数据流实时传输至服务器中，再由服务器实时推送至教师端，并在教师端的监控屏幕上实时渲染出学生端看到的画面；每个学生对应一个子画面，以学号顺序排列显示在教师端的监控屏幕上。在第一方面的一些可实现方式中，在统一画面模式下：教师端通过VR眼镜或通过GUI界面键鼠操作画面，每隔预定时间记录一次虚拟位置信息-Vector3、移动方向-Vector3、旋转角度-Vector3，上述数据流实时传输至服务器中，再由服务器实时推送至学生端，并在学生端的VR眼镜内渲染出教师端看到的画面。在第一方面的一些可实现方式中，教师端每隔预定时间向服务器请求当前班级学生的数据流，服务器按照“学生学号+虚拟位置信息+移动方向+旋转角度”的格式返回给教师端。教师端的学生卡片界面中，每张学生卡片都将按照学号对应一个学生。在教师讲解的VR场景课程中，会部署等同于当前学生数量的摄像机，并且摄像机将持有和学号对应的ID。在第一方面的一些可实现方式中，在教师授课过程中，部署等同于当前学生数量的摄像机，每个摄像机持有与学号对应的ID；传输过来的数据流通过String.Splt切割字符串，读取虚拟位置信息后的Vector3赋值给与当前学号对应的摄像机的localPositon；读取旋转角度后的Vector3赋值给当前学号对应的摄像机的localRotation；其中，localPositon表示摄像机的本地位置信息；localRotation表示摄像机的本地旋转信息；在具有localPosition和localRotation的条件下，摄像机角度固定且唯一。在第一方面的一些可实现方式中，学生端在解压存储在本地的预定课程资源之前，首先与服务器建立通信，获取教学内容对应的包体描述文件，根据包体描述文件指向到对应的二进制压缩包文件，并解压。在第一方面的一些可实现方式中，学生端的某次发送给服务器的数据流记作n，服务器把接受到学生端n网络数据流发送给教师端，对应学生端发送的下一次网络数据流记作n+1。为了解决网络延迟或网络波动导致客户端和教师端的画面不同步问题，当教师端接收到n数据流和n+1数据流两条数据流以上后，教师端根据n和n+1数据流中的记录摄像机旋转角度-Vector3计算得出n到n+1的学生端摄像机绕x、y、z三轴旋转的角速度Wx、Wy、Wz。根据以上计算结果，在n+1数据流中得到的摄像机旋转数据基础上教师端本地推演n+2数据流中摄像机旋转角度，教师端把推演的数据缓存到本地。对于VR眼镜计算性能较强的学生端，可以在学生端、教师端、服务器传输数据的全程实时预测画面走向：当教师端接收到从服务器一次发送的多条数据流n+2、n+3、n+4、n+5时，逐一解析数据流并判断， 如果n+2数据流中包含了除摄像机位置信息的其他数据内容，比如得分点、实验操作、实验结果呈现等内容，并且如果n+2数据流数据与本地推演缓存n+2不一致，则本地推演缓存的n+2和之后的数据舍弃，教师端回滚到接受到n+1数据流时状态，根据接受到最新n+2数据进行下一步的数据应用和画面呈现。如果一致，则继续校验n+3,n+4,n+5.....，直到校验完本地所有缓存数据。如果接收到的多条数据流中，不包含除摄像机位置信息的其他数据内容，教师端直接应用n+5数据流数据到摄像机上，清除本地推演缓存的数据，完成教师端画面呈现。与此同时，服务器在预定时间内未接收到学生端发出的数据流，则向教师端发出告警信息。在第一方面的一些可实现方式中，对于VR眼镜计算性能较弱的学生端，可以采取一种折中的方法，在学生端、服务器、教师端通信的过程中感知网络传输状态，若网络传输在预定时间内波动大于阈值，此时则由学生端启动画面预测计算。无论是上述哪两种方法，计算过程都是一样的。通过第n次记录和第n+1次记录的旋转角度变化来计算VR眼镜在绕x，y，z的旋转角速度Wx，Wy，Wz；n次的角度数据记为 rot1；n+1次的角度数据记为rot2；d为发送数据流的时间间隔。Wx=/d；Wy=/d Wz=/d；t为据上次n+1的时间间隔。此时预测得到的VR眼睛角度=丢包前角度+Vector3。第二方面，提出一种基于数据流推送的教学资源交互系统，该系统包括服务器、教师端、学生端。服务器接入课程资源数据，对课程资源数据进行解析并矢量化。教师端与服务器建立双向通信，用于读取服务器内的课程资源，并选择预定的课程资源推送至学生端。学生端与教师端、服务器建立双向通信，用于接收来自教师端推送的课程资源，通过OTA的方式下载至本地。学生端、服务器、教师端之间传输包括虚拟位置信息、移动方向、旋转角度在内的数据流。有益效果：本发明提供的一种基于数据流推送的教学资源交互方法及系统，在宽带闲置时段提前下载所需的资源至本地，在教学时仅传输包括虚拟位置信息、移动方向、旋转角度在内的数据流，即可在服务器、学生端、教师端之间实现交互，相较于传统传输图片和视频流的方式，本方案在实现相同功能的情况下极大得缩小了带宽需求，从而有效避免了因带宽不足、信号波动等情况下产生的画面卡顿、丢帧等问题。此外，在遇到信号不稳、断流或短期丢包时，本方法可以对数据进行预处理，通过丢包前的头部动作趋势提前预测下面几帧的画面并继续渲染给学生，直至信号恢复重新接到新的数据包，实现丢包前后画面的平顺衔接。附图说明图1为本发明课程资源XiYj的分类图。图2为本发明中虚拟位置信息-Vector3的定义图。图3为本发明中移动方向-Vector3的定义图。图4为本发明中旋转角度-Vector3的定义图。图5为本发明中服务器返回给教师端的数据格式定义图。图6为本发明中针对丢包提前预测时摄像机在XYZ三轴上的偏转示意图。图7为本发明中针对丢包提前预测时所构建的三角形示意图。具体实施方式在下文的描述中，给出了大量具体的细节以便提供对本发明更为彻底的理解。然而，对于本领域技术人员而言显而易见的是，本发明可以无需一个或多个这些细节而得以实施。在其他例子中，为了避免与本发明发生混淆，对于本领域公知的一些技术特征未进行描述。申请人在近两年线上教学的过程中发现存在如下问题急需解决：现有技术方案中在对学生使用时观察内容的监测方法主要还是通过即时传输VR眼镜端的截图画面，显示到教室管理系统中，此方法对网络带宽、服务器容量的要求较高，教师端会出现显示画面不连贯、不同步等问题。并且随着学生数量的增加，教师管理系统更加容易出现异常卡顿，崩溃等问题。为此，申请人提出一种基于数据流推送的教学资源交互系统，该系统由服务器、教师端、学生端三部分组成。利用该系统执行一系列基于数据流推送的教学资源交互方法。为解决“现有技术方案中缺少对授课课程的统一化管理，教师不能定制自己的教学方案”的问题，本发明提出如下解决方案：服务器接入课程资源数据，对课程资源数据进行解析并矢量化。将课程资源进行两级分类Xi和Yj，一级分类Xi包括，以及二级分类是针对X1，X2，X3，X4细分的Yj组合。详见图1。教师登录管理系统，在主页查看目前可以授课内容和课程详情，通过自定义的课程方案，一件下发到学生的VR眼镜端中，通过设备管理可以一件上课，统一学生画面，实时查看学生VR眼镜中的观察内容来加以互动。并且教师的账号与班级账号相关联，可以对班级学生信息加一管理。为进一步辅助教师定制自己的教学方案，开发人员会事先将每个XiYj对应每个课程资源采用块压缩方式进行打包压缩，保证每个课程资源都会被分成大小相同的块，被分别压缩。这种打包方式相较于传统LZMA的流压缩方式具有极高的读取效率，并且不会造成卡顿和额外的内存占用。打包之后的资源将以“资源的内容本身的二进制压缩文件+包体描述文件”的组合方式存放在以Xi分类的不同服务器文件下。下载后解压时，可以通过加载压缩包的Header，达到“用什么解压什么，内存占用更低”的效果，读取更快，效率更高。教师端与服务器建立双向通信，用于读取服务器内的课程资源，并选择预定的课程资源推送至学生端。教师在客户端查看课程介绍后，点击购买/下载将会向服务器发送对应的请求下载的“课程分类一级+二级”，也就是XiYj的具体数值，例如X1Y2所代表的交通安全课程，客户端启动下载服务器下载对应服务器X1存储文件夹分类下的X1Y2资源。下载完成之后存储在本地时严格按照“一级分类/二级分类”的格式分别存储。能有效减少了客户端存储的混乱问题，有利于后期课程的继续开发，也方便了本地的数据管理；并且教师可以自由组合不同的课程内容，个性化定制教学方案，一键推送到学生VR眼镜端，方便了教师灵活定制教学方案的需求。学生端与教师端、服务器建立双向通信，用于接收来自教师端推送的课程资源，通过OTA的方式下载至本地。针对现有产品中监视学生画面是通过“截图学生端VR眼镜画面，上传图片至服务器，再从服务器下载至教师端中”的现状，本发明提供了另一条截然不同的思路：在宽带闲置时段提前下载所需的资源至本地，在教学时仅传输包括虚拟位置信息、移动方向、旋转角度在内的数据流，即可在服务器、学生端、教师端之间实现交互。本发明通过将学生 VR眼镜端摄像机的虚拟位置信息-Vector3；移动方向-Vector3；旋转角度-Vector3。详见图2、图3、图4，定义如下：虚拟位置信息-Vector3x1表示三维坐标中x轴方向的数值；y1表示三维坐标中y轴方向的数值；z1表示三维坐标中z轴方向的数值。移动方向-Vector3x2有0、1、-1三种取值；x2=0，代表左右方向没有移动；x2=-1，代表向左移动；x2=1，代表向右移动。y2有0、1、-1三种取值；y2=0，代表前后方向没有移动；y2=-1，代表向前移动；y2=1，代表向后移动。z2有0、1、-1三种取值；z2=0，代表上下方向没有移动；z2=-1，代表向下移动；z2=1，代表向上移动。通过计算Vector3.Dot是否大于0来得出摄像机移动的左右方向。通过计算Vector3.Dot 是否大于0来得出摄像机移动的前后方向。通过计算Vector3.Dot 是否大于0来得出摄像机移动的上下方向。旋转角度-Vector3x3为x轴旋转角度，x3=transform.localEulerAngles.x；y3为y轴旋转角度，y3=transform.localEulerAngles.y；z3为z轴旋转角度，z3=transform.localEulerAngles.z。每1s记录一次，记录格式严格按照“Student:学号数据;Position:Vector3;Direction:Vector3;Angle:Vector3”，记录完成后传输到服务器中。相较于现有技术方案，本发明对带宽的要求更低，并且字符串比图片的传输速度更快，对服务器硬盘空间的要求更低，并且不用定期去清理服务器的内存空间。教师端会间隔1s向服务器请求当前班级学生的摄像机数据，服务器按照按“学号+Position+Direction+Angle”格式返回给教师端，见图5。教师端的学生卡片界面中，每张学生卡片都将按照学号对应一个学生。在教师讲解的VR场景课程中，会部署等同于当前学生数量的摄像机，并且摄像机将持有和学号对应的ID。传输过来的数据将通过String.Splt进行切割字符串，读取Position后的Vector3赋值给当前学号对应的摄像机的localPosion；读取Angle后的Vector3赋值给当前学号对应的摄像机的localRotation，在有localPosition的位置信息，和localRotation的旋转信息，摄像机角度将会固定且唯一。通过建立对应学号的Render Texture和Material材质球，将UI中学生卡片的Image的Material设置成对应学号的Material材质，对应摄像机的Target Texture设置成对应学号的Render Texture，此时学生卡片中的画布的Image将同步显示出当前学号的摄像机所照射到的画面。通过上述流程，已经能充分解决现有技术的问题，但是随之带来一个工程实现上和产品体验上都不可回避的问题：如果遇到信号不稳、断流或短期丢包时，画面能否在一定时间内衔接上，从而有效避免丢帧、卡顿的问题。为解决上述用户体验的问题，本发明提出如下解决方案，见图6。针对学生端VR眼镜的性能不同，可以分为两种备选方案。对于VR眼镜计算性能较强的学生端，可以在学生端、教师端、服务器传输数据的全程实时预测画面走向。这种实时都在预处理的方式，性能最强、效果最好，但是对于本地的计算要求较高。对于VR眼镜计算性能较弱的学生端，可以采取一种折中的方法，在学生端、服务器、教师端通信的过程中感知网络传输状态，若网络传输在预定时间内波动大于阈值，则由学生端启动画面预测计算。这种处理方式，可以在网络明显遇到波动的情况下再启动画面预测，有效降低本地的计算压力。可以有如下两种计算方式：方式一：学生端的某次发送给服务器的数据流记作n，服务器把接受到学生端n网络数据流发送给教师端，对应学生端发送的下一次网络数据流记作n+1。为了解决网络延迟或网络波动导致客户端和教师端的画面不同步问题，当教师端接收到n数据流和n+1数据流两条数据流以上后，教师端根据n和n+1数据流中的记录摄像机旋转角度-Vector3计算得出n到n+1的学生端摄像机绕x、y、z三轴旋转的角速度Wx、Wy、Wz，见图6。根据以上计算结果，在n+1数据流中得到的摄像机旋转数据基础上教师端本地推演n+2数据流中摄像机旋转角度，教师端把推演的数据缓存到本地。当教师端接收到从服务器一次发送的多条数据流n+2、n+3、n+4、n+5时，逐一解析数据流并判断， 如果n+2数据流中包含了除摄像机位置信息的其他数据内容，比如得分点、实验操作、实验结果呈现等内容，并且如果n+2数据流数据与本地推演缓存n+2不一致，则本地推演缓存的n+2和之后的数据舍弃，教师端回滚到接受到n+1数据流时状态，根据接受到最新n+2数据进行下一步的数据应用和画面呈现。如果一致，则继续校验n+3,n+4,n+5.....，直到校验完本地所有缓存数据。如果接收到的多条数据流中，不包含除摄像机位置信息的其他数据内容，教师端直接应用n+5数据流数据到摄像机上，清除本地推演缓存的数据，完成教师端画面呈现。通过第n次记录和第n+1次记录的旋转角度变化来计算VR眼镜在绕x，y，z的旋转角速度Wx，Wy，Wz；n次的角度数据记为 rot1；n+1次的角度数据记为rot2；d为发送数据流的时间间隔。Wx=/d；Wy=/d Wz=/d；t为据上次n+1的时间间隔。此时预测得到的VR眼睛角度=丢包前角度+Vector3。方式二：教师端收到服务器返回数据第一次记录点之后对应学号的学生相机将向相机正前方位置点发送射线，射线接触场景后记录坐标Vector3，第二次返回数据记Vector3，可以得出在传输数据的间隔时间内，VR眼镜的末速度Vt=V0+at和视角移动加速度a＝/t ｛以Vo为正方向，a与Vo同向a＞0；反向则a＜0｝，如果发生该学号学生短时间丢包或者传输数据异常时，可以用加速度和末速度来计算VR眼镜移动余速度Vm，Vm*上次移动方向Direction将得出推论下的摄像机射线的返回点坐标。将返回点坐标与上次射线点坐标点、摄像机相连接将得出一个三角形，见图7。我们将VR眼镜位置和上次摄像机观察点位置坐标连接，可以得到唯一的向量，记为fromVector，将VR眼镜位置和计算后的坐标连接，可以得到唯一的向量，记为toVector，此时需要计算两个向量间夹角angle，夹角计算方式angle=Vector3.Angle，再使用向量叉乘求出法线向量normal=Vector3.Cross ，最后通过法线向量和眼镜的上方向量upVector点乘，修正旋转的方向anggle*Mathf.Sign)，此时VR眼镜角度=丢包前角度+angle，VR眼镜的坐标采用丢包前坐标，将VR眼镜的观察内容渲染到学生卡片中，并且同一时间向教师端发出提示警告信息，及时发现设备连接问题。下面讲述本方法的实际应用场景下的流程：步骤1、教师进入登录模块，是否需要注册，需要注册则通过验证学校、基础信息验证后建立账号，可通过账号登录或者手机号登录，忘记密码可以通过验证码重置密码，登陆后进入步骤2。步骤2、进入主页界面，教师可以自由搜索和查看课程摘要，点击后可以查看课程详情并且选择购买/下载课程将其加入至课程组，进入步骤3。步骤3、教师可以查看已经购买/下载的课程列表或挑选一些课程，编辑教学方案进入步骤4，或者直接点击去上课进入步骤5。步骤4、进入我的课程模块之后，可点击选择课程组，课程组如果存在即可点击选择班级，点击选择上课，进入步骤5，课程组如果不存在则需要新建课程组之后，选择已经购买/下载的课程，再点击选择班级，点击开始上课，进入步骤5。步骤5、在上课时，教师端可以操作一键黑屏、回正和下课，并且可以实时观察学生卡片上显示的学生信息，设备电量和实时画面，在教师卡片中可以操控视角，统一画面，暂停胡综合播放课程等，并且可以通过课程清单和问题清单和学生进行互动，下课后可以进入步骤6。步骤6、在我的班级中可以添加学生和新建班级以及对班级进行管理，实时更新班级学生数据。以传统文化的“被洪水淹没的德文特村”课程为例，教师甲在登录教师端管理系统后，查看课程时选中了科普教育分类下，传统文化的“被洪水淹没的德文特村”课程，教师端将向服务器发送请求下载“科普教育+传统文化+被洪水淹没的德文特村”，下载存储完成之后，甲可以将课程添加到课程组，选择去上课。此时学生乙等VR眼镜端将会收到推送过来的课程“被洪水淹没的德文特村”，进入课程后开始计时，乙在转动视角观察村庄大门后，VR眼镜端的摄像机的虚拟位置信息Vector3和当前摄像机的旋转角度信息Vector3，以及当前位置角度对比之前相机的正前方向量的的方向信息Vector3将会被存储下来，500ms后数据将会被传输到服务器中，甲在教师端的学生卡片对应乙学号的卡片中可以看到乙的VR眼镜目前观察到的内容。而VR眼镜端会在继续计时，乙在观察课程中的村庄大门之后，视野转向村内建筑时，VR眼镜将会继续记录摄像机的虚拟位置信息Vector3和当前摄像机的旋转角度信息Vector3，以及当前位置角度对比之前相机的正前方向量的的方向信息Vector3，并将其传输到服务器中，教师端也在同步刷新获取学员乙的数据信息。在教师甲点击回正之后，学生乙的摄像机观察角度将会回正至教师甲的角度。过程中教师甲可以发送问题至学生头盔来互动。课程结束教师甲可以点击下课结束课程。如上所述，尽管参照特定的优选实施例已经表示和表述了本发明，但其不得解释为对本发明自身的限制。在不脱离所附权利要求定义的本发明的精神和范围前提下，可对其在形式上和细节上做出各种变化。
