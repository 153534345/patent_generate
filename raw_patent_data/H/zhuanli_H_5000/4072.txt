标题title
声能量补偿方法、装置及计算机设备
摘要abst
本发明涉及音频处理领域，本发明公开了一种声能量补偿方法、装置及计算机设备，其方法包括：获取目标声场的L阶球谐分量编码信号；根据L阶球谐分量编码信号生成缺失扬声器的缺失重放信号；确定与缺失扬声器关联的指定个数的补偿扬声器；根据指定个数的补偿扬声器的空间位置坐标与缺失扬声器的空间位置坐标，计算补偿扬声器的增益系数；根据缺失重放信号和增益系数生成补偿扬声器的补偿增益信号；补偿增益信号用于补偿缺失扬声器的缺失重放信号。本发明可以解决部分扬声器缺失带来的声能量缺失的问题，更好地还原真实的听感。
权利要求书clms
1.一种声能量补偿方法，其特征在于，包括：获取目标声场的L阶球谐分量编码信号；根据所述L阶球谐分量编码信号生成缺失扬声器的缺失重放信号；确定与所述缺失扬声器关联的指定个数的补偿扬声器；根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数；根据所述缺失重放信号和所述增益系数生成所述补偿扬声器的补偿增益信号；所述补偿增益信号用于补偿所述缺失扬声器的缺失重放信号。2.如权利要求1所述的声能量补偿方法，其特征在于，所述根据所述缺失重放信号和所述增益系数生成所述补偿扬声器的补偿增益信号之后，还包括：获取所述补偿扬声器的所有补偿增益信号；根据所有补偿增益信号确定所述补偿扬声器的系统增益信号。3.如权利要求2所述的声能量补偿方法，其特征在于，所述根据所有补偿增益信号计算所述补偿扬声器的系统增益信号之后，还包括：获取所述补偿扬声器的初始重放信号；根据所述初始重放信号和所述系统增益信号确定所述补偿扬声器的目标重放信号。4.如权利要求1所述的声能量补偿方法，其特征在于，所述根据所述L阶球谐分量编码信号生成缺失扬声器的缺失重放信号，包括：根据所述L阶设置扬声器的理论排布阵列；根据所述L阶球谐分量编码信号和所述理论排布阵列，确定所述理论排布阵列中各个扬声器的理论重放信号；获取真实排布阵列，将存在于所述理论排布阵列中且不存在于所述真实排布阵列的扬声器确定为所述缺失扬声器；将所述缺失扬声器的理论重放信号确定为所述缺失重放信号。5.如权利要求1所述的声能量补偿方法，其特征在于，所述根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数，包括：若通过环绕所述缺失扬声器的三个补偿扬声器补偿所述缺失扬声器的缺失重放信号，则根据第一系数计算模型计算所述补偿扬声器的增益系数，所述第一系数计算模型包括：其中，Qx、Qy、Qz分别为所述缺失扬声器的x坐标、y坐标和z坐标；Ax、Ay、Az分别为第一个补偿扬声器的x坐标、y坐标和z坐标；Bx、By、Bz分别为第二个补偿扬声器的x坐标、y坐标和z坐标；Cx、Cy、Cz分别为第三个补偿扬声器的x坐标、y坐标和z坐标；G为用于听感控制的自定义常数，0＜G≤1；a、b、c为分步计算时使用的中间量；ga为第一个补偿扬声器的增益系数；gb为第二个补偿扬声器的增益系数；gc为第三个补偿扬声器的增益系数。6.如权利要求1所述的声能量补偿方法，其特征在于，所述确定与所述缺失扬声器关联的指定个数的补偿扬声器，包括：若环绕所述缺失扬声器的扬声器大于三个，且所述缺失扬声器不处于所有环绕所述缺失扬声器的扬声器的中心，则选取与所述缺失扬声器在空间距离最近的三个扬声器；若所述三个扬声器存在两个扬声器与阵列球心形成的夹角大于预设角度阈值，则选取与所述缺失扬声器最近，且处于所述缺失扬声器两侧的两个扬声器作为所述补偿扬声器；对应的，所述根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数，包括：根据第二系数计算模型计算所述补偿扬声器的增益系数，所述第二系数计算模型包括：其中，ga为第一个补偿扬声器的增益系数；gb为第二个补偿扬声器的增益系数；r1为第一个补偿扬声器与第二个补偿扬声器的空间距离；r2为第一个补偿扬声器与所述缺失扬声器的空间距离；r3为第二个补偿扬声器与所述缺失扬声器的空间距离；G为用于听感控制的自定义常数，0＜G≤1。7.如权利要求6所述的声能量补偿方法，其特征在于，所述确定与所述缺失扬声器关联的指定个数的补偿扬声器，包括：若环绕所述缺失扬声器的扬声器大于三个，且所述缺失扬声器处于所有环绕所述缺失扬声器的扬声器的中心，则将环绕所述缺失扬声器的扬声器确定为所述补偿扬声器；对应的，所述根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数，包括：根据第三系数计算模型计算所述补偿扬声器的增益系数，所述第三系数计算模型包括：其中，gi为第i个补偿扬声器的增益系数；n为环绕所述缺失扬声器的扬声器的个数。8.如权利要求1所述的声能量补偿方法，其特征在于，所述L阶球谐分量编码信号用于生成多个扬声器的重放信号，所述扬声器的个数不小于2。9.一种声能量补偿装置，其特征在于，包括：获取声场信号模块，用于获取目标声场的L阶球谐分量编码信号；生成重放信号模块，用于根据所述L阶球谐分量编码信号生成缺失扬声器的缺失重放信号；确定关联关系模块，用于确定与所述缺失扬声器关联的指定个数的补偿扬声器；确定增益系数模块，用于根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数；确定增益信号模块，用于根据所述缺失重放信号和所述增益系数生成所述补偿扬声器的补偿增益信号；所述补偿增益信号用于补偿所述缺失扬声器的缺失重放信号。10.一种计算机设备，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机可读指令，其特征在于，所述处理器执行所述计算机可读指令时实现如权利要求1至8中任一项所述声能量补偿方法。
说明书desc
技术领域本发明涉及音频处理领域，尤其涉及一种声能量补偿方法、装置及计算机设备。背景技术高阶立体混响系统是一种基于可用球谐函数进行声场重构的重放系统，其重构精度与所采用球谐函数的阶数相关。阶数越高，重构精度越高，所需重放扬声器的通路也越多。用户可根据重构精度的要求进行灵活搭建，在硬件资源的需求上相对于波场合成系统来说要简单灵活得多。理论上讲，高阶立体混响系统需要设置在球面上均匀分布的多个重放扬声器，且扬声器与聆听位置需保持一定的间距。这种设置方法需要一个体积较大的全消音室，建造成本高昂。实际的全消音室，一般会删除部分重要性低的重放扬声器，如将球面上处于上方或下方的重放扬声器去掉，以利于在较小的全消音室构建高阶立体混响系统。然而，缺失部分扬声器的高阶立体混响系统，虽然具有更高的灵活性，也更易于实现，但由于重放扬声器缺失所导致的声能量缺失，影响了声场重构的精度，最终影响了听感。特别的，对于汽车音响系统而言，下方声能量的缺失对汽车路噪声重放的听感影响比较大。发明内容基于此，有必要针对上述技术问题，提供一种声能量补偿方法、装置及计算机设备，以解决部分扬声器缺失带来的声能量缺失的问题。一种声能量补偿方法，包括：获取目标声场的L阶球谐分量编码信号；根据所述L阶球谐分量编码信号生成缺失扬声器的缺失重放信号；确定与所述缺失扬声器关联的指定个数的补偿扬声器；根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数；根据所述缺失重放信号和所述增益系数生成所述补偿扬声器的补偿增益信号；所述补偿增益信号用于补偿所述缺失扬声器的缺失重放信号。一种声能量补偿装置，包括：获取声场信号模块，用于获取目标声场的L阶球谐分量编码信号；生成重放信号模块，用于根据所述L阶球谐分量编码信号生成缺失扬声器的缺失重放信号；确定关联关系模块，用于确定与所述缺失扬声器关联的指定个数的补偿扬声器；确定增益系数模块，用于根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数；确定增益信号模块，用于根据所述缺失重放信号和所述增益系数生成所述补偿扬声器的补偿增益信号；所述补偿增益信号用于补偿所述缺失扬声器的缺失重放信号。一种计算机设备，包括存储器、处理器以及存储在所述存储器中并可在所述处理器上运行的计算机可读指令，所述处理器执行所述计算机可读指令时实现上述声能量补偿方法。上述声能量补偿方法、装置及计算机设备，通过获取目标声场的L阶球谐分量编码信号，以获取编码信号。根据所述L阶球谐分量编码信号生成缺失扬声器的缺失重放信号，以对编码信号进行解码，得到相应的解码信号。确定与所述缺失扬声器关联的指定个数的补偿扬声器，以选取合适的用于补偿缺失重放信号的扬声器。根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数，以计算出缺失重放信号分散至各个补偿扬声器的增益系数。根据所述缺失重放信号和所述增益系数生成所述补偿扬声器的补偿增益信号；所述补偿增益信号用于补偿所述缺失扬声器的缺失重放信号，以计算出各个补偿扬声器用于某一补偿缺失重放信号的补偿增益信号。本发明可以解决部分扬声器缺失带来的声能量缺失的问题，更好地还原真实的听感。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对本发明实施例的描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1是本发明一实施例中声能量补偿方法的一应用环境示意图；图2是本发明一实施例中声能量补偿方法的一流程示意图；图3是本发明一实施例中通过三个补偿扬声器对一缺失扬声器进行补偿的示意图；图4是本发明一实施例中5阶HOA系统球面布局的仰视图；图5是本发明一实施例中通过两个补偿扬声器对一缺失扬声器进行补偿的示意图；图6是本发明一实施例中声能量补偿装置的一结构示意图；图7是本发明一实施例中计算机设备的一示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本实施例提供的声能量补偿方法，可应用在如图1的应用环境中，其中，客户端与服务端进行通信。其中，客户端包括但不限于各种个人计算机、笔记本电脑、智能手机、平板电脑和便携式可穿戴设备。服务端可以用独立的服务器或者是多个服务器组成的服务器集群来实现。在一实施例中，如图2所示，提供一种声能量补偿方法，以该方法应用在图1中的服务端为例进行说明，包括如下步骤S10-S50。S10、获取目标声场的L阶球谐分量编码信号。可理解地，目标声场可以是需要真实还原的声场，也可以是虚拟声场。若目标声场是需要真实还原的声场，则可以通过球传声器阵列对原始的声场进行捡拾，然后应用传统的HOA编码理论进行计算，得到L阶球谐分量编码信号。若目标声场是虚拟声场，则直接通过软件编译生成L阶球谐分量编码信号。L的取值可以根据实际需要进行设定。在一示例中，L＝5。需要注意的是，高阶立体混响系统的解码和编码是两个独立的过程，本实施例主要涉及解码部分。S20、根据所述L阶球谐分量编码信号生成缺失扬声器的缺失重放信号。可理解地，在获得最高阶数为L的球谐分量编码信号之后，可以根据该编号信号的阶数设置各个扬声器的位置。然后根据HOA系统的解码理论，结合布置好的扬声器位置，计算得到各个扬声器的重放信号。在此处，缺失扬声器指的是因场地限制问题需要舍弃的扬声器。缺失重放信号指的是缺失扬声器的重放信号。S30、确定与所述缺失扬声器关联的指定个数的补偿扬声器。可理解地，指定个数可以根据实际需要进行设置，如可以是2个或3个。与缺失扬声器关联的补偿扬声器，指的是用于补偿该缺失扬声器的缺失重放信号的扬声器。一般情况下，可以使用缺失扬声器附近的2个或3个扬声器对该缺失扬声器的缺失重放信号进行补偿。S40、根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数。可理解地，可以使用矢量幅度平移的能量缺失补偿方法，计算出补偿扬声器的增益系数。通过该增益系数，可以增强补偿扬声器的重放信号，增强的部分用于补偿缺失扬声器缺失的声音能量，在一定程度上可以改善因声音能量缺失导致的听感变化。在此处，可以使用矢量幅度平移处理补偿扬声器的空间位置坐标与缺失扬声器的空间位置坐标，并最终获得与缺失扬声器关联的若干补偿扬声器的增益系数。S50、根据所述缺失重放信号和所述增益系数生成所述补偿扬声器的补偿增益信号；所述补偿增益信号用于补偿所述缺失扬声器的缺失重放信号。可理解地，在已知某一缺失扬声器的缺失重放信号，以及该缺失扬声器对某一补偿扬声器的增益系数的前提下，可以根据缺失重放信号和增益系数生成该补偿扬声器的补偿增益信号。补偿增益信号可以是缺失重放信号和增益系数的乘积。由补偿扬声器发出补偿增益信号，可以在一定程度上补偿缺失扬声器的声音能量，进而在一定程度上改善因缺失扬声器的声音能量缺失导致的听感变化。步骤S10-S50中，获取目标声场的L阶球谐分量编码信号，以获取编码信号。根据所述L阶球谐分量编码信号生成缺失扬声器的缺失重放信号，以对编码信号进行解码，得到相应的解码信号。确定与所述缺失扬声器关联的指定个数的补偿扬声器，以选取合适的用于补偿缺失重放信号的扬声器。根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数，以计算出缺失重放信号分散至各个补偿扬声器的增益系数。根据所述缺失重放信号和所述增益系数生成所述补偿扬声器的补偿增益信号；所述补偿增益信号用于补偿所述缺失扬声器的缺失重放信号，以计算出各个补偿扬声器用于某一补偿缺失重放信号的补偿增益信号。本实施例可以解决部分扬声器缺失带来的声能量缺失的问题，更好地还原真实的听感。可选的，步骤S50，即所述根据所述缺失重放信号和所述增益系数生成所述补偿扬声器的补偿增益信号之后，还包括：S51、获取所述补偿扬声器的所有补偿增益信号；S52、根据所有补偿增益信号确定所述补偿扬声器的系统增益信号。可理解地，在一个HOA系统中，可能存在多个缺失扬声器。每个缺失扬声器可能对实际存在的扬声器产生增益影响。因而，这些受到增益影响的扬声器即为补偿扬声器。可以计算所有缺失扬声器对某一补偿扬声器的补偿增益信号，然后对所有的补偿增益信号进行加和，即可得到该补偿扬声器的系统增益信号。在一示例中，第i个补偿扬声器的系统增益信号可表示为：其中，ΔSi为第i个补偿扬声器的系统增益信号；j为缺失扬声器的序号；m为缺失扬声器的总个数；gji为第j个缺失扬声器对第i个补偿扬声器的增益系数；Dj为第j个缺失扬声器的缺失重放信号。可选的，步骤S52，即所述根据所有补偿增益信号计算所述补偿扬声器的系统增益信号之后，还包括：S53、获取所述补偿扬声器的初始重放信号；S54、根据所述初始重放信号和所述系统增益信号确定所述补偿扬声器的目标重放信号。可选的，在获得补偿扬声器的系统增益信号之后，可以结合初始重放信号和系统增益信号，生成补偿扬声器的目标重放信号。在此处，补偿扬声器的初始重放信号可以是对L阶球谐分量编码信号进行解码后获得的重放信号。在一示例中，第i个补偿扬声器的目标重放信号可表示为：Si＝Di+ΔSi其中，Si为第i个补偿扬声器的目标重放信号；Di为第i个补偿扬声器的初始重放信号；ΔSi为第i个补偿扬声器的系统增益信号。可选的，步骤S20，即所述根据所述L阶球谐分量编码信号生成缺失扬声器的缺失重放信号，包括：S201、根据所述L阶设置扬声器的理论排布阵列；S202、根据所述L阶球谐分量编码信号和所述理论排布阵列，确定所述理论排布阵列中各个扬声器的理论重放信号；S203、获取真实排布阵列，将存在于所述理论排布阵列中且不存在于所述真实排布阵列的扬声器确定为所述缺失扬声器；将所述缺失扬声器的理论重放信号确定为所述缺失重放信号。可理解地，L阶不同，对应的扬声器的理论排布阵列也不相同。同一L阶，可以存在多种理论排布阵列。一般情况下，这些理论排布阵列中的扬声器，需要布置在同一球面上，且尽量均匀分布。此外，为了保证有良好的听感，理论排布阵列中的扬声器的个数应不小于2。在此处，理论排布阵列定义了各个扬声器的空间位置。可以基于HOA系统的解码理论，结合理论排布阵列中各个扬声器的空间位置，对L阶球谐分量编码信号进行解码，生成各个扬声器的理论重放信号。理论排布阵列包括真实排布阵列和若干缺失扬声器。真实排布阵列指的是HOA系统中所有真实布置的扬声器组成的排布阵列。缺失扬声器则是理论排列阵列中虚拟存在的扬声器。与缺失扬声器对应的理论重放信号即为缺失重放信号。在一些示例中，真实排布阵列中的扬声器的个数应不小于2。在一示例中，重放扬声器到阵列中心的距离需满足不小于2m的远场要求，也即是球面所在球的直径不低于4m。而扬声器箱体具有一定的深度，用于吊挂扬声器的支架、吊件等构件需要占据一定的空间。对于一内部净空高度只有4.2m的全消声室，并不具备搭建球面布置HOA系统的条件。因而，需要舍弃部分的扬声器，以匹配实际的现场条件。在该全消声室中，可以采用如表1所示的5阶HOA系统的排布阵列。表1一示例中5阶HOA系统的排布阵列如表1所示，球面按7层布置，扬声器总数46只，底部缺失-60°和-90°层，实际使用39只，多于5阶的最少数量36只。实际的HOA解码按全球面布局进行。换句话说，HOA系统可以生成46个理论重放信号，其中，7个为缺失重放信号。可选的，步骤S40，即所述根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数，包括：S401、若通过环绕所述缺失扬声器的三个补偿扬声器补偿所述缺失扬声器的缺失重放信号，则根据第一系数计算模型计算所述补偿扬声器的增益系数，所述第一系数计算模型包括：其中，Qx、Qy、Qz分别为所述缺失扬声器的x坐标、y坐标和z坐标；Ax、Ay、Az分别为第一个补偿扬声器的x坐标、y坐标和z坐标；Bx、By、Bz分别为第二个补偿扬声器的x坐标、y坐标和z坐标；Cx、Cy、Cz分别为第三个补偿扬声器的x坐标、y坐标和z坐标；G为用于听感控制的自定义常数，0＜G≤1；a、b、c为分步计算时使用的中间量；ga为第一个补偿扬声器的增益系数；gb为第二个补偿扬声器的增益系数；gc为第三个补偿扬声器的增益系数。可理解地，可以基于矢量幅度平移原理，将缺失扬声器的重放信号补偿给与其临近的扬声器上。如图3所示，Q为缺失扬声器，A、B、C为补偿扬声器，Q、A、B、C同处于球心为O的球面上，Q’为OQ连线与平面ABC的交点。由于缺失扬声器Q的空间位置坐标、补偿扬声器A、B、C的空间位置坐标均为已知，可以根据第一系数计算模型计算出A、B、C的三个增益系数。其中，G为用于听感控制的自定义常数，0＜G≤1。一般情况下，G默认为1，并可根据实际的听感进行优化。可选的，步骤S30，即所述确定与所述缺失扬声器关联的指定个数的补偿扬声器，包括：S301、若环绕所述缺失扬声器的扬声器大于三个，且所述缺失扬声器不处于所有环绕所述缺失扬声器的扬声器的中心，则选取与所述缺失扬声器在空间距离最近的三个扬声器；S302、若所述三个扬声器存在两个扬声器与阵列球心形成的夹角大于预设角度阈值，则选取与所述缺失扬声器最近，且处于所述缺失扬声器两侧的两个扬声器作为所述补偿扬声器；对应的，步骤S40，即所述根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数，包括：S402、根据第二系数计算模型计算所述补偿扬声器的增益系数，所述第二系数计算模型包括：其中，ga为第一个补偿扬声器的增益系数；gb为第二个补偿扬声器的增益系数；r1为第一个补偿扬声器与第二个补偿扬声器的空间距离；r2为第一个补偿扬声器与所述缺失扬声器的空间距离；r3为第二个补偿扬声器与所述缺失扬声器的空间距离；G为用于听感控制的自定义常数，0＜G≤1。可理解地，可参考图4以及表1。图4为与表1对应的5阶HOA系统球面布局的仰视图。其中，Q1～Q7是缺失扬声器，其中Q1～Q6位于-60°层，Q7位于-90°层，A1～A10为最邻近缺失扬声器Q1～Q7的扬声器，位于-30°层。对于缺失扬声器Q2而言，环绕Q1的扬声器指的是A1～A10。且，Q2不处于A1～A10的中心。此时，先选取与Q2临近的三个扬声器，如A2、A2、A4，若∠A2OA4大于60°，且A3、A2处于Q2的两侧，则可以将A3、A2确定为补偿扬声器。如图5所示，用A表示补偿扬声器A2，用B表示补偿扬声器A3，用Q表示缺失扬声器Q2，则，AB的长度为r1，AQ的长度为r2，BQ的长度为r3，∠QAB＝α，∠QBA＝β。在确定两个补偿扬声器的空间位置坐标，以及缺失扬声器的空间位置坐标之后，可以基于第二系数计算模型计算出这两个补偿扬声器的增益系数。其中，G为用于听感控制的自定义常数，0＜G≤1。一般情况下，G默认为1，并可根据实际的听感进行优化。可选的，步骤S30，即所述确定与所述缺失扬声器关联的指定个数的补偿扬声器，包括：S303、若环绕所述缺失扬声器的扬声器大于三个，且所述缺失扬声器处于所有环绕所述缺失扬声器的扬声器的中心，则将环绕所述缺失扬声器的扬声器确定为所述补偿扬声器；对应的，步骤S40，即所述根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数，包括：S403、根据第三系数计算模型计算所述补偿扬声器的增益系数，所述第三系数计算模型包括：其中，gi为第i个补偿扬声器的增益系数；n为环绕所述缺失扬声器的扬声器的个数。可理解地，可参考图4以及表1。图4为与表1对应的5阶HOA系统球面布局的仰视图。其中，Q1～Q7是缺失扬声器，其中Q1～Q6位于-60°层，Q7位于-90°层，A1～A10为最邻近缺失扬声器Q1～Q7的扬声器，位于-30°层。对于缺失扬声器Q7而言，环绕Q7的扬声器指的是A1～A10。且，Q7处于A1～A10的中心。此时，可将A1～A10确定为补偿扬声器。在确定补偿扬声器之后，可以基于第三系数计算模型计算出这十个补偿扬声器的增益系数。在此处，可采用均分的方式计算各个补偿扬声器的增益系数。在一示例中，如表2所示，可以参照上述实施例计算出各个缺失扬声器对补偿扬声器产生的增益系数。表2 5阶HOA系统中各个补偿扬声器的增益系数对于任意一个补偿扬声器，如A1，其系统增益信号为各个缺失扬声器对其增益信号的叠加。也即是，ΔSA1＝g11D1+g71D7＝D1+0.1D7。其中，g11＝1，g71＝0.1，D1为缺失扬声器Q1的缺失重放信号，D7为缺失扬声器Q7的缺失重放信号。可选的，所述L阶球谐分量编码信号用于生成多个扬声器的重放信号，所述扬声器的个数不小于2。可理解地，在此处，多个扬声器指的是组成真实排布阵列的扬声器，这些扬声器分布在同一球面上。为了保证声场的还原质量，这些扬声器的个数不小于2。例如，当L＝5时，真实排布的扬声器的个数应大于或等于36。应理解，上述实施例中各步骤的序号的大小并不意味着执行顺序的先后，各过程的执行顺序应以其功能和内在逻辑确定，而不应对本发明实施例的实施过程构成任何限定。在一实施例中，提供一种声能量补偿装置，该声能量补偿装置与上述实施例中声能量补偿方法一一对应。如图6所示，该声能量补偿装置包括获取声场信号模块10、生成重放信号模块20、确定关联关系模块30、确定增益系数模块40和确定增益信号模块50。各功能模块详细说明如下：获取声场信号模块10，用于获取目标声场的L阶球谐分量编码信号；生成重放信号模块20，用于根据所述L阶球谐分量编码信号生成缺失扬声器的缺失重放信号；确定关联关系模块30，用于确定与所述缺失扬声器关联的指定个数的补偿扬声器；确定增益系数模块40，用于根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数；确定增益信号模块50，用于根据所述缺失重放信号和所述增益系数生成所述补偿扬声器的补偿增益信号；所述补偿增益信号用于补偿所述缺失扬声器的缺失重放信号。可选的，声能量补偿装置还包括：获取增益信号模块，用于获取所述补偿扬声器的所有补偿增益信号；确定系统增益信号模块，用于根据所有补偿增益信号确定所述补偿扬声器的系统增益信号。可选的，声能量补偿装置还包括：获取初始重放信号模块，用于获取所述补偿扬声器的初始重放信号；确定目标重放信号模块，用于根据所述初始重放信号和所述系统增益信号确定所述补偿扬声器的目标重放信号。可选的，生成重放信号模块20包括：设置理论排布模块，用于根据所述L阶设置扬声器的理论排布阵列；确定理论重放信号模块，用于根据所述L阶球谐分量编码信号和所述理论排布阵列，确定所述理论排布阵列中各个扬声器的理论重放信号；确定缺失重放信号模块，用于获取真实排布阵列，将存在于所述理论排布阵列中且不存在于所述真实排布阵列的扬声器确定为所述缺失扬声器；将所述缺失扬声器的理论重放信号确定为所述缺失重放信号。可选的，确定增益系数模块40包括：第一系数确定单元，用于若通过环绕所述缺失扬声器的三个补偿扬声器补偿所述缺失扬声器的缺失重放信号，则根据第一系数计算模型计算所述补偿扬声器的增益系数，所述第一系数计算模型包括：其中，Qx、Qy、Qz分别为所述缺失扬声器的x坐标、y坐标和z坐标；Ax、Ay、Az分别为第一个补偿扬声器的x坐标、y坐标和z坐标；Bx、By、Bz分别为第二个补偿扬声器的x坐标、y坐标和z坐标；Cx、Cy、Cz分别为第三个补偿扬声器的x坐标、y坐标和z坐标；G为用于听感控制的自定义常数，0＜G≤1；a、b、c为分步计算时使用的中间量；ga为第一个补偿扬声器的增益系数；gb为第二个补偿扬声器的增益系数；gc为第三个补偿扬声器的增益系数。可选的，确定关联关系模块30包括：选取扬声器单元，用于若环绕所述缺失扬声器的扬声器大于三个，且所述缺失扬声器不处于所有环绕所述缺失扬声器的扬声器的中心，则选取与所述缺失扬声器在空间距离最近的三个扬声器；第二确定补偿扬声器单元，用于若所述三个扬声器存在两个扬声器与阵列球心形成的夹角大于预设角度阈值，则选取与所述缺失扬声器最近，且处于所述缺失扬声器两侧的两个扬声器作为所述补偿扬声器；对应的，确定增益系数模块40包括：第二系数确定单元，用于根据第二系数计算模型计算所述补偿扬声器的增益系数，所述第二系数计算模型包括：其中，ga为第一个补偿扬声器的增益系数；gb为第二个补偿扬声器的增益系数；r1为第一个补偿扬声器与第二个补偿扬声器的空间距离；r2为第一个补偿扬声器与所述缺失扬声器的空间距离；r3为第二个补偿扬声器与所述缺失扬声器的空间距离；G为用于听感控制的自定义常数，0＜G≤1。可选的，确定关联关系模块30包括：第三确定补偿扬声器单元，用于若环绕所述缺失扬声器的扬声器大于三个，且所述缺失扬声器处于所有环绕所述缺失扬声器的扬声器的中心，则将环绕所述缺失扬声器的扬声器确定为所述补偿扬声器；对应的，确定增益系数模块40包括：第三系数确定单元，用于根据第三系数计算模型计算所述补偿扬声器的增益系数，所述第三系数计算模型包括：其中，gi为第i个补偿扬声器的增益系数；n为环绕所述缺失扬声器的扬声器的个数。可选的，所述L阶球谐分量编码信号用于生成多个扬声器的重放信号，所述扬声器的个数不小于2。关于声能量补偿装置的具体限定可以参见上文中对于声能量补偿方法的限定，在此不再赘述。上述声能量补偿装置中的各个模块可全部或部分通过软件、硬件及其组合来实现。上述各模块可以硬件形式内嵌于或独立于计算机设备中的处理器中，也可以以软件形式存储于计算机设备中的存储器中，以便于处理器调用执行以上各个模块对应的操作。在一个实施例中，提供了一种计算机设备，该计算机设备可以是服务器，其内部结构图可以如图7所示。该计算机设备包括通过系统总线连接的处理器、存储器、网络接口和数据库。其中，该计算机设备的处理器用于提供计算和控制能力。该计算机设备的存储器包括可读存储介质、内存储器。该可读存储介质存储有操作系统、计算机可读指令和数据库。该内存储器为可读存储介质中的操作系统和计算机可读指令的运行提供环境。该计算机设备的数据库用于存储声能量补偿方法所涉及的数据。该计算机设备的网络接口用于与外部的终端通过网络连接通信。该计算机可读指令被处理器执行时以实现一种声能量补偿方法。本实施例所提供的可读存储介质包括非易失性可读存储介质和易失性可读存储介质。在一个实施例中，提供了一种计算机设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机可读指令，处理器执行计算机可读指令时实现以下步骤：获取目标声场的L阶球谐分量编码信号；根据所述L阶球谐分量编码信号生成缺失扬声器的缺失重放信号；确定与所述缺失扬声器关联的指定个数的补偿扬声器；根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数；根据所述缺失重放信号和所述增益系数生成所述补偿扬声器的补偿增益信号；所述补偿增益信号用于补偿所述缺失扬声器的缺失重放信号。在一个实施例中，提供了一个或多个存储有计算机可读指令的计算机可读存储介质，本实施例所提供的可读存储介质包括非易失性可读存储介质和易失性可读存储介质。可读存储介质上存储有计算机可读指令，计算机可读指令被一个或多个处理器执行时实现以下步骤：获取目标声场的L阶球谐分量编码信号；根据所述L阶球谐分量编码信号生成缺失扬声器的缺失重放信号；确定与所述缺失扬声器关联的指定个数的补偿扬声器；根据所述指定个数的补偿扬声器的空间位置坐标与所述缺失扬声器的空间位置坐标，计算所述补偿扬声器的增益系数；根据所述缺失重放信号和所述增益系数生成所述补偿扬声器的补偿增益信号；所述补偿增益信号用于补偿所述缺失扬声器的缺失重放信号。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机可读指令来指令相关的硬件来完成，所述的计算机可读指令可存储于一非易失性可读取存储介质或易失性可读存储介质中，该计算机可读指令在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、存储、数据库或其它介质的任何引用，均可包括非易失性和/或易失性存储器。非易失性存储器可包括只读存储器、可编程ROM、电可编程ROM、电可擦除可编程ROM或闪存。易失性存储器可包括随机存取存储器或者外部高速缓冲存储器。作为说明而非局限，RAM以多种形式可得，诸如静态RAM、动态RAM、同步DRAM、双数据率SDRAM、增强型SDRAM、同步链路DRAM、存储器总线直接RAM、直接存储器总线动态RAM、以及存储器总线动态RAM等。所属领域的技术人员可以清楚地了解到，为了描述的方便和简洁，仅以上述各功能单元、模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能单元、模块完成，即将所述装置的内部结构划分成不同的功能单元或模块，以完成以上描述的全部或者部分功能。以上所述实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围，均应包含在本发明的保护范围之内。
