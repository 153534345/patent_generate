标题title
一种跨SR MPLS与SRV6域互操作通信的方法和系统
摘要abst
本发明涉及通信领域，特别是涉及一种跨SR MPLS与SRV6域互操作通信的方法和系统。包括：获取报文转发路径中完整的路径信息，将路径信息中每个节点的SID信息统一封装入IPV6报文中；进入SRV6域边界时，将转发的标签信息写入IPV6报文的IPV6DA字段中；逐个解析IPV6DA字段中的标签信息，根据标签信息进行转发。实现了无需中间转换的端到端报文传递，大大减少了设备上的配置信息量以及状态信息维护，降低了业务部署复杂性和运维难度，仅需在发送端进行一次报文格式转换，在跨域转发时不需要进行额外的格式转换，减轻了芯片报文封装负担，提升了芯片转发效率。
权利要求书clms
1.一种跨SR MPLS与SRV6域互操作通信的方法，其特征在于：获取报文转发路径中完整的路径信息，将路径信息中每个节点的SID信息统一封装入IPV6报文中；进入SRV6域边界时，将转发的标签信息写入IPV6报文的IPV6 DA字段中；逐个解析IPV6 DA字段中的标签信息，根据标签信息进行转发。2.根据权利要求1所述的跨SR MPLS与SRV6域互操作通信的方法，其特征在于，所述将路径信息中每个节点的SID信息统一封装入IPV6报文中，具体包括：获取路径信息中每个转发节点的节点或邻接的SID信息，将相应的SID信息按照转发路径逐个写入IPV6报文的SRH字段中。3.根据权利要求2所述的跨SR MPLS与SRV6域互操作通信的方法，其特征在于，所述将相应的SID信息按照转发路径逐个写入IPV6报文的SRH字段中，还包括：当需写入SRH字段中的标签信息总长度超出SRH字段一个单元长度时，将超出部分写入下一层SRH单元；当需写入SRH字段中的标签信息总长度不足SRH字段一个单元长度时，在末尾补0对齐。4.根据权利要求1所述的跨SR MPLS与SRV6域互操作通信的方法，其特征在于，所述将转发的标签信息写入IPV6报文的IPV6 DA字段中，还包括：当SRH字段中存在多于一层已写入标签信息的SRH单元时，将第一层SRH单元中的标签信息写入DA字段中；每层SRH单元中的标签信息转发完成后，逐层将后一层SRH单元中的标签信息写入DA字段中。5.根据权利要求1所述的跨SR MPLS与SRV6域互操作通信的方法，其特征在于，所述根据标签信息进行转发，还包括：当报文到达SRV6路径头节点时，在SRV6路径头节点上添加扩展TLV信息。6.根据权利要求1所述的跨SR MPLS与SRV6域互操作通信的方法，其特征在于，所述根据标签信息进行转发，具体包括：取出IPV6 DA字段中第一个标签信息，根据标签信息的映射关系进行转发，将其后的标签信息前移至IPV6 DA字段的栈顶。7.根据权利要求6所述的跨SR MPLS与SRV6域互操作通信的方法，其特征在于，所述根据标签信息的映射关系进行转发，具体包括：校验取出的标签信息的节点属性或邻接属性，匹配本地MPLS段标识，根据本地MPLS段标识查找路由进行转发。8.根据权利要求7所述的跨SR MPLS与SRV6域互操作通信的方法，其特征在于，所述根据本地MPLS段标识查找路由进行转发，还包括：若标签信息无效或无对应转发表项，丢弃当前报文，本次转发失败；若标签存在MPLS栈底标志位，将SRH信息中下一层SRH单元的SID信息复制到DA字段。9.根据权利要求6所述的跨SR MPLS与SRV6域互操作通信的方法，其特征在于，所述根据标签信息的映射关系进行转发，具体包括：若当前标签存在MPLS栈底标志位，当报文转发至下一个节点后，按照当前IPV6 DA中的128bit SID信息继续转发。10.一种跨SR MPLS与SRV6域互操作通信的系统，其特征在于：包括一个集中管理装置和至少一个转发装置，集中管理装置与每个转发装置间存在通信连接；其中，集中管理装置包括至少一个处理器和存储器，所述至少一个处理器和存储器之间通过数据总线连接，所述存储器存储能被所述至少一个处理器执行的指令，所述指令在被所述处理器执行后，用于完成权利要求1-9中任一项所述的跨SR MPLS与SRV6域互操作通信的方法。
说明书desc
【技术领域】本发明涉及通信领域，特别是涉及一种跨SR MPLS与SRV6域互操作通信的方法和系统。【背景技术】目前，基于IPV6转发平面的段路由的可编程能力得到越来越多的认可，运营商客户也在积极主动布局SRV6，但从网络兼容性层面出发，不可能一次性升级所有网络设备支持SRV6，现网中很长一段时间，还是会是SR多协议标签交换和SRV6共存的状态，因此需要解决SRV6与SR MPLS互操作的场景问题。现网中，由于MPLS和SRV6域中报文格式不同，在域边界节点需要进行报文格式转换。SR MPLS与SRV6域的边界节点上，需要新增维护一套SR MPLS相关的隧道配置，以及扩展的binding sid、locator配置等，编排端到端SRV6路径时，中间域还需要新增一类Functiontype-END.BM SID，控制面不仅需要校验binding sid等配置的有效性，引入复杂的配置校验操作，大大增加了网络部署与运维的难度；另一方面边界节点上还需要维护额外的状态信息，增加了设备负担，影响了报文转发效率。第三方面，在跨域边界节点上，现有方案会存在移除SRH头信息操作，对SRV6端到端的性能监测带来了困难。鉴于此，如何克服现有技术所存在的缺陷，解决跨域传输时报文封装复杂的现象，是本技术领域待解决的问题。【发明内容】针对现有技术的以上缺陷或改进需求，本发明解决了现有MPLS和SRV6域间报文传递时报文格式需进行复杂转换的问题。本发明实施例采用如下技术方案：第一方面，本发明提供了一种跨SR MPLS与SRV6域互操作通信的方法，具体为：获取报文转发路径中完整的路径信息，将路径信息中每个节点的SID信息统一封装入IPV6报文中；进入SRV6域边界时，将转发的标签信息写入IPV6报文的IPV6 DA字段中；逐个解析IPV6 DA字段中的标签信息，根据标签信息进行转发。优选的，将路径信息中每个节点的SID信息封装入IPV6报文中，具体包括：获取路径信息中每个转发节点的节点或邻接的SID信息，将相应的SID信息按照转发路径逐个写入IPV6报文的SRH字段中。优选的，将相应的标签信息按照转发顺序逐个写入IPV6报文的SRH字段中，还包括：当需写入SRH字段中的标签信息总长度超出SRH字段一个单元长度时，将超出部分写入下一层SRH单元；当需写入SRH字段中的标签信息总长度不足SRH字段一个单元长度时，在末尾补0对齐。优选的，将转发的标签信息写入IPV6报文的DA字段中，还包括：当SRH字段中存在多于一层已写入标签信息的SRH单元时，将第一层SRH单元中的标签信息写入DA字段中；每层SRH单元中的标签信息转发完成后，逐层将后一层SRH单元中的标签信息写入DA字段中。优选的，根据标签信息进行转发，还包括：当报文到达SRV6路径头节点时，在SRV6路径头节点上添加扩展TLV信息。优选的，根据标签信息进行转发，具体包括：取出IPV6 DA字段中第一个标签信息，根据标签信息的映射关系进行转发，将其后的标签信息前移至IPV6 DA字段的栈顶。优选的，根据标签信息的映射关系进行转发，具体包括：校验取出的标签信息的节点属性或邻接属性，匹配本地MPLS段标识，根据本地MPLS段标识查找路由进行转发。优选的，根据本地MPLS段标识查找路由进行转发，还包括：若标签信息无效或无对应转发表项，丢弃当前报文，本次转发失败；若标签存在MPLS栈底标志位，将SRH信息中下一层SRH单元的SID信息复制到DA字段。优选的，根据标签信息的映射关系进行转发，具体包括：若当前标签存在MPLS栈底标志位，当报文转发至下一个节点后，按照当前IPV6 DA中的128bit SID信息继续转发。另一方面，本发明提供了一种跨SR MPLS与SRV6域互操作通信的系统，具体为：包括一个集中管理装置和至少一个转发装置，集中管理装置与每个转发装置间存在通信连接；其中，集中管理装置包括至少一个处理器和存储器，所述至少一个处理器和存储器之间通过数据总线连接，所述存储器存储能被所述至少一个处理器执行的指令，所述指令在被所述处理器执行后，用于完成第一方面中的跨SR MPLS与SRV6域互操作通信的方法。与现有技术相比，本发明实施例的有益效果在于：本发明实施例提供了一种同时能够被MPLS域和SRV6域解析和转发的报文格式，实现了无需中间转换的端到端报文传递，大大减少了设备上的配置信息量以及状态信息维护，降低了业务部署复杂性和运维难度。本实施例提供的通信方法中，仅需在发送端进行一次报文格式转换，在跨域转发时不需要进行额外的格式转换，减轻了芯片报文封装负担，提升了芯片转发效率。同时，报文结构保留了SRH头的信息，为端到端的SRV6路径性能监测提供了便利。【附图说明】为了更清楚地说明本发明实施例的技术方案，下面将对本发明实施例中所需要使用的附图作简单地介绍。显而易见地，下面所描述的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为传统BM SID方案对应组网拓扑节点上使用的一种报文结构示意图；图2为传统BM SID方案对应组网拓扑节点上使用的另一种报文结构示意图；图3为传统BM SID方案对应组网拓扑节点上使用的另一种报文结构示意图；图4为传统BM SID方案对应组网拓扑节点上使用的另一种报文结构示意图；图5为传统BM SID方案对应组网拓扑节点上使用的另一种报文结构示意图；图6本发明实施例提供的一种跨SR MPLS与SRV6域互操作通信的方法流程图；图7为本方案提供的一种跨SR MPLS与SRV6域互操作通信的报文结构示意图；图8为本方案提供的另一种跨SR MPLS与SRV6域互操作通信的报文结构示意图；图9本发明实施例提供的另一种跨SR MPLS与SRV6域互操作通信的方法流程图；图10本发明实施例提供的另一种跨SR MPLS与SRV6域互操作通信的方法流程图；图11为一种现有跨SR MPLS与SRV6域互操作通信的参数设置示意图；图12本发明实施例提供的一种跨SR MPLS与SRV6域互操作通信的方法实施场景示意图；图13为本方案对应组网拓扑节点上使用的一种报文结构示意图；图14为本方案对应组网拓扑节点上使用的另一种报文结构示意图；图15为本方案对应组网拓扑节点上使用的另一种报文结构示意图；图16为本方案对应组网拓扑节点上使用的另一种报文结构示意图；图17为本方案对应组网拓扑节点上使用的另一种报文结构示意图；图18为本方案对应组网拓扑节点上使用的另一种报文结构示意图；图19为本发明实施例提供的一种跨SR MPLS与SRV6域互操作通信的系统结构示意图；图20为本发明实施例提供的一种跨SR MPLS与SRV6域互操作通信的集中管理装置结构示意图。【具体实施方式】为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅用以解释本发明，并不用于限定本发明。本发明是一种特定功能系统的体系结构，因此在具体实施例中主要说明各结构模组的功能逻辑关系，并不对具体软件和硬件实施方式做限定。此外，下面所描述的本发明各个实施方式中所涉及到的技术特征只要彼此之间未构成冲突就可以相互组合。下面就参考附图和实施例结合来详细说明本发明。实施例1：在现有的报文传输过程中，报文在MPLS域中传播时依靠MPLS标签记录转发信息，在SRV6域中传播时需要根据SRH中的SID栈信息记录转发信息，SRV6报文中不包含MPLS信息。如图1至图5所示，为现有端到端SRV6 OVER MPLS场景中SRV6报文的封装与转发结构，基于END BM进行报文封装。待发送的报文在SRV6域中的首站源节点上进行封装，此时报文结构中不包含MPLS域的标签信息，直接按照正常的SRV6报文转发，其中SID3为END BMSID，绑定到一个SR MPLS标签栈上。报文按照SRV6报文转发规则传输至MPLS域边界节点上时，检查IPV6 DA匹配为本地的END BM SID，并执行对应的操作，如图3所示，为MPLS域边界节点上封装的报文，节点需要执行BM SID对应的Function操作，边界节点会将报文绑定至MPLS域，首先会更新IPV6头中的segment left属性，复制下一层IPV6段ID至目的地址信息中，然后基于BM SID中绑定的MPLS标签信息进行MPLS头信息的封装，后续MPLS域中按照MPLS报文解析转发，域边缘设备上芯片需要在SRV6报文头的基础上再进行一层MPLS封装，增加了芯片负担，影响了报文转发效率。当报文再次由MPLS域进入SRV6域边界节点时，MPLS标签信息全部弹出，进入SRV6域之后，报文封装信息如图5所示，此时MPLS头已被解封装完成，剩下SRV6报文信息，后续按照正常的SRV6报文转发。另一方面，现有端到端SRV6 TO MPLS场景中，SRV6报文还有另一种基于END DM进行报文封装的结构，为了按照MPLS格式对报文进行封装，需将SRV6报文解封装进入MPLS域，移除SRH头信息，并在原始报文前面封装DM SID绑定的MPLS信息；移除SRH的同时，记录在SRH扩展TLV字段中的元数据信息也就随之移除，这对后续SRV6端到端的性能监测带来了困难。为了解决上述问题，本实施例中提供的方法利用SRV6报文格式中的可自定义扩展字段保存MPLS标签信息，仅需在发送端对完整路径进行规划编排和路径信息下发，无需新增业务配置。在上述现有的跨域转发方式中，为了实现报文在MPLS和SRV6两个域中的传输，需要在每次达到域边缘节点时进行报文的解封，并根据下一个域的报文格式重新封装。为了避免域边缘节点的解封和重封装，使报文能够实现端到端的的传递，本发明实施例提供了一种跨域互操作通信方法。如图6所示，本发明实施例提供的跨SR MPLS与SRV6域互操作通信的方法具体步骤如下：步骤101：获取报文转发路径中完整的路径信息，将路径信息中每个节点的SID信息统一封装入IPV6报文中。报文在MPLS域中传输时，需要使用MPLS标签识别转发路径，而在SRV6域中传输时，需要使用IPV6 DA字段中的值识别转发路径。本实施例提供一种在SRV6域和MPLS域中统一的报文封装方法，为了使报文可以同时在MPLS域和SRV6域中传输，将MPLS域的完整路径封装进IPV6报文中，并在需要时将其写入报文的IPV6 DA字段中，也就是将MPLS域的标签信息按照IPV6 SID格式进行封装，这样端到端的报文封装只存在一种统一格式，边界节点无需重新封装MPLS头信息。另一方面，在使用本实施例提供的方式进行报文封装时，在MPLS域边界无需移除SRH字段，因此能够保留SRH中的原生信息。进一步的，当报文到达SRV6路径头节点时，按照SRV6协议的规定，可以在SRV6路径头节点上添加扩展TLV信息，用于保存一些转发设备的元数据，即添加SRH标准中自定义的扩展选项optional tlv。扩展TLV信息的完整性，对于SRV6端到端的性能监测、IFIT等增值服务功能提供了极大地便利。进一步的，在本实施例的实际使用中，为了避免对报文结构其它部分的更改，在不改变现有报文解析方式的情况下封装入标签信息，可以选择IPV6报文的路由扩展头，即SRH作为封装标签信息的容器。如图7所示，使用SRH封装标签信息时，本方法中首站封装的路径报文的具体结构和内容，包括报文IPV6头、SRH头和payload负载信息，SRH头字段中封装了SRV6的SID信息和多个MPLS标签信息组成的完整SID栈信息，其中，SRH头部分可能还包含扩展TLV信息。步骤102：进入SRV6域边界时，将转发的标签信息写入IPV6报文的IPV6 DA字段中。无论路径头节点在SRV6域中还是MPLS域中，都会按照步骤101中的方法将MPLS域的完整路径信息封装入IPV6报文中。报文在MPLS域中传输时，需要按照现有方式使用MPLS标签信息获取转发地址，进入SRV6域边界时，由于报文中封装了MPLS标签信息，而封装入SRH中的信息不能直接处理，而是处理IPV6 DA中的信息进行转发，因此还需要将封装的MPLS信息按照正常SRH的处理写入IPV6 DA字段中，即获取完整的128bit SID信息写入IPV6DA，以兼容SRV6报文现有的报文转发识别方式，而不需要额外进行解析或报文格式转换。步骤103：逐个解析IPV6 DA字段中的标签信息，根据标签信息进行转发。SRV6域中，在步骤102将报文中封装的MPLS标签信息写入IPV6 DA字段后，报文与正常的IPV6报文格式相同，充分利用了SRH中128bit SID信息的可扩展性，封装了MPLS标签信息。此时，可以无需其他转换、解封或封装，直接使用目前SRV6域中的转发方式，更新IPV6中的segment left属性，将下一层128bit SID信息写入IPV6 DA信息中。进一步的，为了标识从SRV6域进入MPLS域的边界节点，需要引入全新的SIDFunction type：END.GM SID，当转发节点解析IPV6报文DA SID信息时，发现匹配上本地的GM SID，此时标识报文即将进入MPLS域，执行正常的SRV6报文解析处理流程，更新segmentleft属性，复制下一层128bit信息至IPV6 DA信息中，特殊的是此时128bit SID信息中存储的是一个或多个32bit标签信息。现有的IPV6 DA字段是作为整体被解析，为了区分两种不同的解析方式，避免解析错误，因此还需要在IPV6报文头中增加标志属性。目前的IPV6报文结构中，flow label属性没有明确标准定义，因此可以扩展该字段定义标志属性。如图8所示，为了标识IPV6 DA信息存储的是MPLS标签信息，可以扩展IPV6头中的flow_label属性，引入L flag作为IPV6报文头扩展，标识需要处理的DA封装的信息类型。具体的，可以使用flow_label的最低1位bit信息：0代表按照正常IPV6报文的解析方式进行处理，使本实施例提供的方法在转发时能够兼容正常的IPV6报文转发；1代表IPV6DA字段中写入了MPLS标签信息，需要按照标签信息的写入格式逐一解析处理。进一步的，由于MPLS域中的转发节点数目不定，故需要封装的标签信息数量不定，还需要识别MPLS与到SRV6域的边界节点。根据本实施例提供的方法，需要结合32bit MPLS标签的标签栈底属性，以标签栈底属性字段作为标签信息结尾的标志，即边界节点。当解析到该标志时，表示封装至报文中的MPLS标签已转发完成，需要更新IPV6报文中segmentleft属性，并将下一层SID信息复制到IPV6 DA中，以获取后续的转发信息。根据本实施例中提供的步骤101-步骤103描述，仅需在报文源节点进行一次封装，即可实现端到端的统一报文封装格式，不改变转发行为，仍然按照现有的MPLS和SRV6的转发方式进行转发，转发过程中也可以保留扩展TLV中的信息用于端到端的性能监测等增值服务功能。在步骤101中，将标签信息封装入IPV6报文中时，可以根据需要封装在不同的可扩展位置，或者根据需要规定不同的封装格式。在某个实施场景中，获取路径信息中每个转发节点的节点或邻接的SID信息，将相应的SID信息按照转发路径逐个写入IPV6报文的SRH字段中，此时，封装后的MPLS标签信息与SRV6 SID信息共同组成了完整的SRH信息，在转发的时候写入IPV6 DA字段中进行解析使用。在步骤102中，由于SRH中每一个单元是128bit，而IPV6 DA字段为128bit，在本实施例中，可以将128bit作为一层进行处理，每次将一层标签信息写入IPV6 DA字段中。为了配合标签信息的长度，便于写入和解析，并充分利用存储空间，可以将转发报文的标签信息按照32bit的固定长度进行封装，每个单元可以封装成4个32bit的标签信息。当需写入SRH字段中的标签信息总长度超出SRH字段一个单元长度时，将超出部分写入下一层SRH单元，如果节点超过四个，则第五个及以后的标签会在再下一层128bit信息中，以此类推。另一方面，当需写入SRH字段中的标签信息总长度不足SRH字段一个单元长度时，在末尾补0对齐，在最后一层不够128bit时末尾补0对齐。在SRV6域中进行解析时，按照SRV6报文进行处理，正常处理SRH信息，执行SL--，复制下一128bit信息至DA信息中，所有的流程都会正常走DA解析流程。进一步的，由于IPV6 DA字段为128bit，而SRH字段中可能包含多层标签信息，每层128bit，因此，当SRH字段中存在多于一层已写入标签信息的SRH单元时，将第一层SRH单元中的标签信息写入DA字段中。每层SRH单元中的标签信息转发完成后，逐层将后一层SRH单元中的标签信息写入DA字段中。本实施例中的报文在MPLS域中传递时，由于IPV6 DA中封装了多个MPLS标签信息，每个标签信息中保存了一次转发的信息，因此在步骤103中，报文到达每个转发节点后，取出IPV6 DA字段中第一个标签信息，根据标签信息的映射关系进行转发。进行一次转发后，一方面为了保持原有的标签转发属性，另一方面为了便于下一次的转发，使转发节点能够依然使用IPV6 DA节点中的第一个标签信息进行转发，还需要将已使用的标签信息移除，将其后的标签信息前移至IPV6 DA字段的栈顶。在进行转发时，转发节点校验取出的标签信息的节点属性或邻接属性，匹配本地MPLS段标识，根据本地MPLS段标识查找路由进行转发。具体的，如图9与图10所示，完成本实施例提供的方法所描述的SRV6与SR MPLS域互通的转发流程示意图。步骤201：解析IPV6头中的IPV6 DA，匹配本地local sid信息。若命中，转步骤202；若未命中，转步骤203。步骤202：匹配function type是否为END.GM SID。若命中，转步骤205；若未命中，转步骤204。步骤203：走最长匹配路由转发。步骤204：执行对应的function type操作。步骤205：复制SRH中下一层的标签信息至IPV6 DA中。步骤206：设置IPV6头中的L flag标识。经过步骤201-步骤206，标识即进入SR MPLS域，需要将IPV6 DA按照MPLS标签的格式进行解析并转发。按照现有规则解析IPV6 DA时先匹配本地local sid表项，匹配不上就按照正常的查路由转发，即最长匹配路由。步骤101中封装的报文结构，由SRV6域到MPLS域中时，无需按照图1-图5中现有END BM SID的方案再进行一层或多层MPLS封装，直接按照本实施例提供的方式解析IPV6信息进行查表转发即可，该方式兼容现有的转发机制。进一步的，在步骤206中，为了确保标签信息可用，在进行匹配前，还需要检查标签信息的有效性。若标签信息无效或者无对应转发表项，丢弃报文，转发失败。若标签存在MPLS栈底标志位，则代表MPLS域转发结束，此时需要更新segment left属性，将SRH信息中下一层SRH单元的SID信息复制到DA字段。当报文转发至下一个节点后，需要恢复正常的SRV6转发流程，按照当前IPV6 DA中的128bit SID信息继续转发。如图10所示，进行地址匹配后，可以按照以下步骤进行转发，并获取下一次转发的信息。步骤301：解析IPV6头信息，检查是否存在L flag。若有，转步骤302；若否，转步骤303。步骤302：按照每个标签信息的封装长度解析标签信息，在一般实施场景中，标签信息的封装长度为32bit。步骤303：按照正常的IPV6报文转发流程进行转发。步骤304：检查标签信息中是否包含栈底标志。若是，表示当前达到栈底，转步骤309；若否，转步骤305。步骤305：IPV6 DA中保存的标签信息整体右移一个标签信息的长度，更新DA信息，转步骤306。步骤306：检查更新后的IPV6 DA信息的有效性。若有效，转步骤308；若否，转步骤307。步骤307：SL--，更新IPV6 DA信息，转步骤308。步骤308：查找标签转发表项，依据标签信息中的转发表项转发报文，转步骤301。步骤309：SL--，并更新SRH中的下一层标签信息至IPV6 DA中，清除IPV6头中的Lflag，依据标签表项转发报文，转步骤301。通过步骤301-步骤309，完成了标签中转发路径的识别和IPV6 DA中标签信息的更新，保证转发步骤的连续性。现有方式在边界节点上会对应一个SR隧道，如图11中描述的部署配置，跨域边界节点需要新增大量配置及额外的隧道状态维护等工作，大大增加了现网部署的复杂性以及运维难度。本实施例提供的跨SR MPLS与SRV6域互操作通信的方法只需要关注MPLS域中节点分配的标签，无需存在隧道，也就不存在状态信息维护。因此，本方案提供的方法，能够实现端到端中途无额外转换和维护的报文转发过程，并由于保留了SRH的扩展TVL中的信息，保留了提供SRV6端到端的性能检测等增值服务能力。实施例2：基于实施例1提供的跨SR MPLS与SRV6域互操作通信的方法，在不同的具体应用场景中可以根据需要选择具体实施方式。在某些具体实施方式中，可以通过本实施例中的具体实施方式对实施例1中提供的跨SR MPLS与SRV6域互操作通信方法进行实现。如图12所示的转发路径中，R1-R10为转发器设备，建立R1-R10之间端到端的L3VPN业务，链路邻接标签表示为ij。R1、R2、R3、R8、R9、R10支持SRV6转发，对应节点分配SID信息为SIDi。R3、R4、R5、R6、R7、R8支持MPLS转发，对应节点会分配Rij的邻接标签。R10设备上会分配业务DT4 SID，通过查找VRF路由表转发。如图13所示，首站源节点R1上在报文的SRH中封装完整的路径信息，其中包含MPLS域信息的标签信息，每一个标签信息占32bit信息，若标签信息的总长度超过一个SRH单元的长度，则依次新增一个SRH长度作为一层，不足128bit需要以pad保留对齐，本示例中使用了5个MPLS标签信息。但本方案无需感知到标签数量，因为在边界节点上无需进行MPLS头的封装，而是直接采用SRV6的报文转发处理。对于IPV6 DA中存在标签信息进行标记，采用偏移操作进行标签处理，结合标签栈底标记位判断何时从MPLS域中离开。如图14所示，为到达MPLS域首节点R3上的封装报文，此时IPV6 DA为本地GM SID，执行对应的操作SL--，并复制SRH中下一层SID信息至IPV6DA中，本实施例中即复制共128bit的标签信息至IPV6 DA中。如图15所示，R3节点上执行了END GM操作之后的封装报文，此时IPV6DA被替换为下一层的128bit信息，即4个32bit的标签信息。此时会对128bit低位的32bit信息，即首个标签信息进行处理，对应的操作为右移32bit信息，并根据当前的标签进行步骤103中的解析和转发。本步骤中无需进行MPLS层的封装，仍然按照SRV6流程进行处理，保证了端到端报文封装格式的一致性。如图16所示为R3节点上封装后的报文信息，此时第一个32bit信息已使用并移除，即IPV6 DA中的标签信息整体前移32bit，高位的32bit需要补齐空位pad。根据转发信息转发报文至下一跳节点R4上，后续节点都按照正常的IPV6报文解析处理DA信息，只是需要根据Lflag区分当前处理的是IPV6地址还是特殊的标签信息。如图17所示，为到达R6节点时的封装报文信息，此时移除已被使用的标签信息后，前移32bit后该128bit信息就变为全0，表示已处理完一个128bit，即上一层的4个label信息。而此时首个标签信息又不是栈底标签，则需要复制SRH中下一层128bit信息至IPV6 DA中，报文转发至R7节点。R7移除掉首个标签信息后，再次执行右移操作发现128bit为全0，并且该标签栈底标记置位，即代表处于MPLS域的最后一跳。此时执行SRH操作，SL--，更新下一层信息至IPV6DA信息中，并取消L flag标记。如图18所示，为R8节点收到的封装报文，此时检查IPV6 DA信息，发现IPV6头中的flow_label无L flag标记，走正常的IPV6地址转发，即按照SID 9地址转发，首先匹配本地local sid表项，查询不到，再去最长匹配路由表项进行转发。根据上述过程可知，在源节点封装好完整的SRV6报文信息，按照实施例1中的方式进行转发，无需进行二次MPLS头封装，直接沿用SRV6报文头信息进行转发，保证了端到端报文的一致性，减轻了芯片报文封装的负担，提升了转发效率，做到了端到端的SRV6路径构建。同时，转发节点无需感知MPLS域中的节点、标签数信息，直接利用标签原有栈底标志的特性，结合标签信息移动操作，能够感知到SRV6域与SR MPLS域的边界。该方法直接基于原生SRV6报文进行扩展，为后续SRV6报文的扩展和增值服务提供了便利。实施例3：在上述实施例1至实施例2提供的跨SR MPLS与SRV6域互操作通信的方法的基础上，本发明还提供了一种可用于实现上述方法的跨SR MPLS与SRV6域互操作通信的系统。如图19所示，包括一个集中管理装置1和至少一个转发装置2，集中管理装置1与每个转发装置2间存在通信连接。在实际实施中，集中管理装置1可以是单独的设备，也可以使用某一个转发设备2代理，也可以使用先王已有的转发装置的上层集中控制器。在实施例2的实例中，R1-R10都为转发装置2，集中管理装置1可以为能够与R1-R10通信的额外设备，也可以为R1-R10中的任一个设备，也可以为R1-R10共用的上层管理设备。集中管理装置1和每个转发装置2之间的通信连接没有特殊要求，可以使用现网已有设备或者通过类似控制器设备连接。在进行转发时，由转发设备进行本地SID信息上报，后续由统一管理设备进行集中规划，根据步骤101进行封装后下发。在优选方案中，为了保留SR可以按照段进行统一规划下发的优势，使用单独的设备或共用的上层管理设备作为集中管理装置1，以符合当前网络发展的现状，避免同级转发设备2之间大量的报文传输，减少设备之间的交互，避免增加设备负担。结合实施例2中的具体转发可知，使用实施例1中提供的方法进行报文跨域转发，控制面无需新增复杂的配置信息，直接通过集中管理设备1统一规划编排下发路径信息，跨域边界节点也无需维护任何状态信息，大大降低了部署复杂性。如图20所示，是本发明实施例中集中管理设备1的具体装置架构示意图，包括一个或多个处理器11以及存储器12。其中，图20中以一个处理器11为例。处理器11和存储器12可以通过总线或者其他方式连接，图20中以通过总线连接为例。存储器12作为一种跨SR MPLS与SRV6域互操作通信方法非易失性计算机可读存储介质，可用于存储非易失性软件程序、非易失性计算机可执行程序以及模块，如实施例1至实施例2中的跨SR MPLS与SRV6域互操作通信方法。处理器11通过运行存储在存储器12中的非易失性软件程序、指令以及模块，从而执行跨SR MPLS与SRV6域互操作通信的时的各种功能应用以及数据处理，即实现实施例1至实施例2的跨SR MPLS与SRV6域互操作通信的方法。存储器12可以包括高速随机存取存储器，还可以包括非易失性存储器，例如至少一个磁盘存储器件、闪存器件、或其他非易失性固态存储器件。在一些实施例中，存储器12可选包括相对于处理器11远程设置的存储器，这些远程存储器可以通过网络连接至处理器11。上述网络的实例包括但不限于互联网、企业内部网、局域网、移动通信网及其组合。程序指令/模块存储在存储器12中，当被一个或者多个处理器11执行时，执行上述实施例1至实施例2中的跨SR MPLS与SRV6域互操作通信的方法，例如，执行以上描述的图1、图9和图10所示的各个步骤。本领域普通技术人员可以理解实施例的各种方法中的全部或部分步骤是可以通过程序来指令相关的硬件来完成，该程序可以存储于一计算机可读存储介质中，存储介质可以包括：只读存储器、随机存取存储器、磁盘或光盘等。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明的保护范围之内。
