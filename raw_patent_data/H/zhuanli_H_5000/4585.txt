标题title
一种Zigbee设备快速产品测试系统及测试方法
摘要abst
本发明涉及一种Zigbee设备快速产品测试系统及测试方法，它包括数据库、上位机和CERT；数据库通过通信协议与多个上位机进行通信连接，用于存储记录产品测试过程以及数据查询匹配；上位机与对应的CERT通过串口连接，用于对Zigbee产品测试时的所有内容进行配置；CERT通过通信协议与被测设备连接进行双向交互，通过RSSI距离定位算法获取被测设备的发射功率，进而判断被测设备的位置。本发明实现了一种对多个Zigbee信道的pcba及成品进行快速产测的方案，通过上位机配置需要进行产测设备的具体信息，cert请求设备信息进行比对，一致后开始针对设备产测，不需要任何接线即可完成产测操作，提高了生产速度。
权利要求书clms
1.一种Zigbee设备快速产品测试系统，其特征在于：它包括数据库和多条产品测试线，每条产品测试线包括上位机和CERT；所述数据库通过通信协议与多个上位机进行通信连接，用于存储记录产品测试过程以及数据查询匹配；所述上位机与对应的CERT通过串口连接，用于对Zigbee产品测试时的所有内容进行配置，并与所述数据库进行通信将产品测试的数据传输到数据库中；所述CERT通过通信协议与被测设备连接进行双向交互，通过RSSI距离定位算法获取被测设备的发射功率，将不同发射功率转换为统一基准发射功率基数，进而判断被测设备与当前产品测试线的距离定位到多个被测设备的远近；每条产品测试线上测试的设备可以相同也可以不同。2.根据权利要求1所述的一种Zigbee设备快速产品测试系统，其特征在于：所述上位机上配置的内容包括：配置进入产品测试的签名信息、MAC地址、MODELID、MANUFACTURE ID、MANUFACTURE NAME、install code、二维码数据、厂家授权信息和自定义扩展信息；配置不同设备距离产品测试的测试项。3.根据权利要求2所述的一种Zigbee设备快速产品测试系统，其特征在于：所述测试项包括指示灯测试、继电器测试、按钮测试、蜂鸣器测试、被动传感器测试、安防传感器防拆测试、万能遥控器测试、低功耗电流测试和温湿度传感器读取测试。4.一种Zigbee设备快速产品测试方法，其特征在于：所述测试方法包括：S1、判断被测设备是否主动连接CERT，如果是，则执行步骤S2，否则执行步骤S3；S2、被测设备上电，并在无Zigbee网络的情况下通过广播信息寻找CERT；S3、被测设备上电，并在无Zigbee网络的情况下停留在当前信道等待CERT主动寻找；S4、判断被测设备与上位机设置的产品测试信息是否匹配，如果匹配，则开始被测设备具体的产品测试，否则执行步骤S1；。S5、判断上位机是否点击查找附近产品测试设备，如果是，则执行步骤S6，否则，执行步骤S1；S6、CERT在某一信道进行一轮产品测试设备的扫描，并判断是否有产品测试设备满足设置的产品测试信息，如果有，则执行步骤S7，否则，重新扫描；S7、根据RSSI定位算法查找到最近的被测设备，并将每条产品测试线进行拆分，实现多产品测试线并行测试；S8、根据测试项开始被测设备的产品测试。5.根据权利要求4所述的一种Zigbee设备快速产品测试方法，其特征在于：所述根据测试项开始被测设备的产品测试包括：S801、判断选中测测试项是否为自动触发的测试项，如果是，则执行步骤S802，否则执行步骤S809；S802、下发指示灯亮/灭的指令，查看指示灯的亮/灭的动作是否真实触发；S803、下发继电器闭合/断开的指令，查看继电器闭合/断开的动作是否真实触发；S804、下发蜂鸣器鸣叫/停止的指令，查看鸣器鸣叫/停止的动作是否真实触发；S805、下发万能遥控器测试的指令，通过与一通信设备进行数据交互完成测试；S806、下发低功耗测试的指令，休眠节点进入休眠状态，通过外接功耗仪测试静态功耗以及发射功耗，将测试值记录到上位机上并根据设置阈值判断是否通过测试；S807、下发温湿度传感器检测的指令；S808、判断是否自动下发的指令都正确执行，如果是，则通过所有测试项的测试，否则，执行步骤S801。6.根据权利要求5所述的一种Zigbee设备快速产品测试方法，其特征在于：所述根据测试项开始被测设备的产品测试还包括被动项目测试，所述被动项目测试包括：S809、进行被动按钮测试、被动传感器测试和安防设备防拆检测测试，并通过上位机判断是否通过；S810、判断是否所有需要测试的被动测试项目都已经完成测试，如果是，则通过所有被动测试项的测试，否则，执行步骤S801；S811、判断是否存在反馈退出测试，如果有，则执行步骤S812，否则，通过所有被动测试项的测试；S812、数据库记录下所有完成测试的产品测试数据。7.根据权利要求4所述的一种Zigbee设备快速产品测试方法，其特征在于：所述步骤S805中，通过与一通信设备进行数据交互完成测试包括：通信设备一直处于数据接收打开状态，被测设备接收到测试指令后主动发送一约定好的数据给通信设备，被测设备在数据发送完成后切换到接收模式，通信设备检测接收到的数据内容，如果和约定数据相同则开启发送模式将约定好的数据回传给被测设备，并回传给CERT上报上位机。8.根据权利要求4-7中任意一项所述的一种Zigbee设备快速产品测试方法，其特征在于：所述测试方法还包括设置产品测试设备信息的步骤，其包括：设置产品测试设备的签名信息、MAC地址、MODELID、MANUFACTURE ID、MANUFACTURE NAME、install code、二维码数据、厂家授权信息、用户自定义扩展数据信息。
说明书desc
技术领域本发明涉及产品测试技术领域，尤其涉及一种Zigbee设备产品测试系统及测试方法。背景技术每一个Zigbee设备都需要通过设备测试阶段才能发布，产品测试阶段是产品发布的重要环节，即需要提高效率也需要增加可靠性；目前市场上出现的产品测试方案存在的问题有：1、工厂为了提高效率必须使用多条产品测试线，但是当产品测试线数量过多时无法准确区分当前设备需要在哪条产品测试线上进行测试，出现多个产品测试线之间的设备混在一起测试的问题，因此目前产品测试线上都是实用屏蔽箱将设备完全隔绝；2、目前的成品测试都需要建立Zigbee网络去连接信标，然而建立Zigbee网络需要物理干涉，大部分都需要使用到串口，成品时不好拆装导致还需要进行接线发送测试开始的命令，大大增加了产线工人的操作水平；3、目前为了产线工人不会弄错产品测试的内容，产品测试都是按照每个设备的功能点开发不同的上位机进行管理，缩小了应用范围。发明内容本发明的目的在于克服现有技术的缺点，提供了一种Zigbee设备快速产品测试系统及测试方法，解决了现有测试方案存在的问题。本发明的目的通过以下技术方案来实现：一种Zigbee设备快速产品测试系统，它包括数据库和多条产品测试线，每条产品测试线包括上位机和CERT；所述数据库通过通信协议与多个上位机进行通信连接，用于存储记录产品测试过程以及数据查询匹配；所述上位机与对应的CERT通过串口连接，用于对Zigbee产品测试时的所有内容进行配置，并与所述数据库进行通信将产品测试的数据传输到数据库中；所述CERT通过通信协议与被测设备连接进行双向交互，通过RSSI距离定位算法获取被测设备的发射功率，将不同发射功率转换为统一基准发射功率基数，进而判断被测设备与当前产品测试线的距离定位到多个被测设备的远近；每条产品测试线上测试的设备可以相同也可以不同。所述上位机上配置的内容包括：配置进入产品测试的签名信息、MAC地址、MODELID、MANUFACTURE ID、MANUFACTURE NAME、install code、二维码数据、厂家授权信息和自定义扩展信息；配置不同设备距离产品测试的测试项。所述测试项包括指示灯测试、继电器测试、按钮测试、蜂鸣器测试、被动传感器测试、安防传感器防拆测试、万能遥控器测试、低功耗电流测试和温湿度传感器读取测试。一种Zigbee设备快速产品测试方法，其特征在于：所述测试方法包括：S1、判断被测设备是否主动连接CERT，如果是，则执行步骤S2，否则执行步骤S3；S2、被测设备上电，并在无Zigbee网络的情况下通过广播信息寻找CERT；S3、被测设备上电，并在无Zigbee网络的情况下停留在当前信道等待CERT主动寻找；S4、判断被测设备与上位机设置的产品测试信息是否匹配，如果匹配，则开始被测设备具体的产品测试，否则执行步骤S1；。S5、判断上位机是否点击查找附近产品测试设备，如果是，则执行步骤S6，否则，执行步骤S1；S6、CERT在某一信道进行一轮产品测试设备的扫描，并判断是否有产品测试设备满足设置的产品测试信息，如果有，则执行步骤S7，否则，重新扫描；S7、根据RSSI定位算法查找到最近的被测设备，并将每条产品测试线进行拆分，实现多产品测试线并行测试；S8、根据测试项开始被测设备的产品测试。所述根据测试项开始被测设备的产品测试包括：S801、判断选中测测试项是否为自动触发的测试项，如果是，则执行步骤S802，否则执行步骤S809；S802、下发指示灯亮/灭的指令，查看指示灯的亮/灭的动作是否真实触发；S803、下发继电器闭合/断开的指令，查看继电器闭合/断开的动作是否真实触发；S804、下发蜂鸣器鸣叫/停止的指令，查看鸣器鸣叫/停止的动作是否真实触发；S805、下发万能遥控器测试的指令，通过与一通信设备进行数据交互完成测试；S806、下发低功耗测试的指令，休眠节点进入休眠状态，通过外接功耗仪测试静态功耗以及发射功耗，将测试值记录到上位机上并根据设置阈值判断是否通过测试；S807、下发温湿度传感器检测的指令；S808、判断是否自动下发的指令都正确执行，如果是，则通过所有测试项的测试，否则，执行步骤S801。所述根据测试项开始被测设备的产品测试还包括被动项目测试，所述被动项目测试包括：S809、进行被动按钮测试、被动传感器测试和安防设备防拆检测测试，并通过上位机判断是否通过；S810、判断是否所有需要测试的被动测试项目都已经完成测试，如果是，则通过所有被动测试项的测试，否则，执行步骤S801；S811、判断是否存在反馈退出测试，如果有，则执行步骤S812，否则，通过所有被动测试项的测试；S812、数据库记录下所有完成测试的产品测试数据。所述步骤S805中，通过与一通信设备进行数据交互完成测试包括：通信设备一直处于数据接收打开状态，被测设备接收到测试指令后主动发送一约定好的数据给通信设备，被测设备在数据发送完成后切换到接收模式，通信设备检测接收到的数据内容，如果和约定数据相同则开启发送模式将约定好的数据回传给被测设备，并回传给CERT上报上位机。所述测试方法还包括设置产品测试设备信息的步骤，其包括：设置产品测试设备的签名信息、MAC地址、MODELID、MANUFACTURE ID、MANUFACTURE NAME、install code、二维码数据、厂家授权信息、用户自定义扩展数据信息。本发明具有以下优点：一种Zigbee设备快速产品测试系统及测试方法，实现了一种对多个zigbee信道的pcba及成品进行快速产测的方案，通过上位机配置需要进行产测设备的具体信息，cert请求设备信息进行比对，一致后开始针对设备产测，可完全不需要任何接线即可完成产测操作，提高了生产速度。附图说明图1为本发明系统的结构示意图；图2为本发明方法的流程示意图。具体实施方式为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本申请实施例的组件可以以各种不同的配置来布置和设计。因此，以下结合附图中提供的本申请的实施例的详细描述并非旨在限制要求保护的本申请的保护范围，而是仅仅表示本申请的选定实施例。基于本申请的实施例，本领域技术人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都属于本申请保护的范围。下面结合附图对本发明做进一步的描述。如图1所示，本发明的一种实施例涉及一种Zigbee设备快速产品测试系统，其包括数据库、上位机软件、CERT、被测设备；具体内容如下：数据库：用于存储记录产测流程过程以及后续查询匹配；上位机软件：能够实现zigbee产品测试时的所有内容，第一界面上可配置能进入产品测试的基本信息包括签名信息、MAC地址、MODELID、MANUFACTURE ID、MANUFACTURENAME、install code、二维码数据、厂家授权信息、其他可用户自定义扩展的信息内容。通过TCP/IP传输到数据库以方便后期查验具体设备是否有通过产测。通过串口与cert连接，上位机下发命令给cert，由cert转发给具体设备；第二可配置不同设备距离产测的测试项包括指示灯测试、继电器测试、按钮测试、蜂鸣器测试、被动传感器测试、安防传感器防拆测试、万能遥控器测试、低功耗电流测试、温湿度传感器读取测试、下发结果等等；第三上位机软件还需要负责和数据库进行通讯，让产品测试的过程数据流可以传输到数据库CERT：是一个具备发送及接收802.15.4信息、可处理各种串口命令的产测主机设备，每一个cert都是独立运行，cert需要使用zigbee物理层802.15.4与被测DUT通讯，还需要和上位机串口进行通讯。cert最主要处理的是rssi的距离定位算法，优先获取到被测设备的发射功率，对于zigbee来说发射功率的不同通讯的距离会不同，需要将不同发射功率的内容换算到统一基准发射功率基数，这样可以保证每一个被测设备通过无线层交互时的rssi信号强度是处于同一水平线，让此rssi可以在逻辑上进行判断，得到多个被测DUT的远近。被测设备：是一个具备发送及接收802.15.4信息的被测设备，每一个被测设备都可以与cert之间进行双向交互。如图2所示，本发明的另一实施例涉及一种Zigbee设备快速产品测试方法，其具体包括以下内容：步骤A1：设置产测设备信息的步骤；其中产测设备信息包含签名信息、MAC地址、MODELID、MANUFACTURE ID、MANUFACTURE NAME、install code、二维码数据、厂家授权信息、其他可用户自定义扩展数据等等；步骤A2用于判断被测DUT是否主动连接CERT的步骤；如果是则执行步骤A3，否则执行步骤A4；步骤A3：被测DUT上电无zigbee网络主动广播信息寻找CERT的步骤；步骤A4：被测DUT上电无zigbee网络情况下，停留在当前信道等待CERT主动寻找的步骤；步骤A5：用于判断被测DUT与上位机设置的产品测试信息是否匹配的步骤；如果匹配则执行步骤A10，否则执行步骤A2；步骤A6：用于判断上位机是否有点击查找附近产品测试设备的步骤；如果是则执行步骤A7，否则执行步骤A2；步骤A7：CERT将在zigbee11-26信道进行一轮产测设备的扫描的步骤；步骤A8：用于判断是否有产品测试设备满足设置的产品测试信息内容的步骤；如果有则执行A9，否则执行A7；步骤A9：依据RSSI定位算法找到最近的DUT设备的步骤；此过程中将每条产线进行了拆分，可以多产线并行产品测试；具体为：A91、CERT定时30分钟扫描每个信道的复杂程度或者在上位机上操作要求扫描每个信道的复杂程度；A92、根据各个信道的复杂程度进行补偿RSSI值；A93、CERT接收到数据时通过芯片硬件电路转换为信号强度，将信号强度寄存器中获取到数值，加入补偿值后即可用于判定。步骤A10：开始被测设备具体内容产测流程的步骤；以下按照全功能产进行产品测试；步骤A11：用于判断选中的测试项是否为自动触发的步骤；如果是则执行步骤A12一列，否则执行步骤A19一列；步骤A12：下发指示灯亮/灭的步骤；此步骤需要人工查看是否指示灯真实触发；步骤A13：下发继电器闭合/断开的步骤；此步骤需要人工查看是否继电器真实触发；步骤A14：下发蜂鸣器鸣叫/停止的步骤；此步骤需要人工查看是否蜂鸣器真实触发；步骤A15：下发万能遥控器的步骤；此功能需要另一个特殊的红外宝进行配合，将特殊红外宝挂在产线上方即可，特殊红外宝一直处于接收头打开状态，被测红外宝收到测试命令后主动发送一包约定好的红外数据，发送完成后被测红外宝切换回接收模式，特殊红外宝检测接收到的红外数据内容，若和约定数据相同则开启发送模式将约定好的数据在回传给被测红外宝，被测红外宝如上述在进行一次判定，正确则回报给CERT通知上位机；步骤A16：下发低功耗测试的步骤；此步骤用于休眠节点的测试，休眠节点需要使用电池来供电，因此对于功耗是有很高要求的，发送此命令后休眠节点立刻进入休眠状态，需要人工外接功耗仪进行测试静态功耗以及发射功耗，真实值记录到上位机上按照阈值判定是否能够通过该测试项；步骤A17:下发温湿度传感器检测的步骤；步骤A18：用于判断是否自动下发的命令都是正确执行的步骤；如果是则执行步骤A23,否则执行步骤A11；步骤A19：被动按钮测试的步骤；此步骤主要是针对本地有按钮的设备，工人主动按下后会发送无线命令给CERT，后续交由上位机自行判定是否通过；步骤A20：被动传感器测试的步骤；和步骤A19类似；步骤A21：安防设备防拆检测测试的步骤；和步骤A19类似；步骤A22：用于判断是否所有的需要检测的被动项目已经齐全的步骤；如果是则执行步骤A23，否则执行步骤A11；步骤A23：测试项目全部则自动发送产品测试通过指令的步骤；步骤A24：用于判断是否有反馈退出测试的步骤，如果是则执行步骤25，否则执行步骤A23；步骤A25：产测通过数据库记录下完成测试过程。以上所述仅是本发明的优选实施方式，应当理解本发明并非局限于本文所披露的形式，不应看作是对其他实施例的排除，而可用于各种其他组合、修改和环境，并能够在本文所述构想范围内，通过上述教导或相关领域的技术或知识进行改动。而本领域人员所进行的改动和变化不脱离本发明的精神和范围，则都应在本发明所附权利要求的保护范围内。
