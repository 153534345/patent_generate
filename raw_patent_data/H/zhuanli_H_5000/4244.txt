标题title
无刷直流电机刹车系统及方法
摘要abst
本发明公开了一种无刷直流电机刹车系统及方法，在无刷直流电机刹车过程中，通过刹车控制模块控制母线电压值始终位于母线电压高阈值与母线电压低阈值之间，并根据不同的母线电压状态，采用不同的pwm调制信号以控制无刷直流电机进行缓刹，直至停机。由以上可知，本发明不仅保证母线电压值持续维持在母线电压高阈值与母线电压低阈值之间，保护电子元器件及电路且延长电子元器件及电路的使用寿命，而且规避现有技术三相逆变器下三管直接导通的硬刹方法，显著提高无刷直流电机刹车手感。
权利要求书clms
1.一种无刷直流电机刹车系统，包括直流电源、三相逆变器及控制器，所述直流电源通过母线电路电连接于所述三相逆变器，所述三相逆变器电连接于所述无刷直流电机；所述控制器电连接于所述三相逆变器，用以控制驱动所述无刷直流电机的运转；其特征在于：所述直流电源正负极两端电连接有电压采样模块，用以采集所述无刷直流电机刹车时所述母线电路的母线电压值；所述控制器包括与所述电压采样模块电连接的刹车控制模块，其内部预设有母线电压高阈值与母线电压低阈值，当所述母线电压值触发所述母线电压高阈值时，所述刹车控制模块控制所述三相逆变器六开关管均关闭；当所述母线电压值触发所述母线电压低阈值时，所述刹车控制模块控制所述三相逆变器上三管关闭、下三管导通；所述刹车控制模块控制所述母线电压值位于所述母线电压高阈值与所述母线电压低阈值之间，以控制所述无刷直流电机进行缓刹，直至停机。2.根据权利要求1所述的无刷直流电机刹车系统，其特征在于：所述刹车控制模块包括运算模块、存储单元、计时单元及pwm调制模块，所述运算模块通过ADC模块电连接于所述电压采样模块，所述存储单元与所述计时单元均电连接于所述运算模块，所述运算模块通过所述pwm调制模块电连接于所述三相逆变器，所述存储单元内预设有所述母线电压高阈值与所述母线电压低阈值。3.根据权利要求2所述的无刷直流电机刹车系统，其特征在于：所述ADC模块用于将所述电压采样模块采集的电压模拟信号转换成电压数字信号，所述电压数字信号即为所述母线电压值；所述运算模块用于判断所述母线电压值是否触发所述母线电压高阈值或所述母线电压低阈值，并计数所述母线电压值触发所述母线电压高阈值或所述母线电压低阈值的次数；所述计时单元用于控制所述运算模块判断所述母线电压值是否触发所述母线电压高阈值或所述母线电压低阈值的时间；所述pwm调制模块根据所述运算模块检测出所述母线电压值的不同状态生成相应的pwm调制信号，用以控制所述三相逆变器六开关管的关闭或导通，进而控制所述无刷直流电机进行缓刹。4.根据权利要求3所述的无刷直流电机刹车系统，其特征在于：在所述无刷直流电机缓刹过程中，当所述母线电压值在时间T0内且N0次触发所述母线电压高阈值时，所述刹车控制模块控制所述三相逆变器下三管的pwm占空比降低；当所述母线电压值在时间T0内且N0次触发所述母线电压低阈值时，所述刹车控制模块控制所述三相逆变器下三管的pwm占空比提高。5.根据权利要求2所述的无刷直流电机刹车系统，其特征在于：所述存储单元内预设有所述无刷直流电机刹车时所述三相逆变器下三管的初始pwm占空比，所述三相逆变器上三管的pwm占空比始终为零。6.一种无刷直流电机刹车方法，其基于权利要求1-5任一项所述的无刷直流电机刹车系统，其特征在于：包括以下步骤：S1：无刷直流电机以三相逆变器上三管pwm占空比为零、下三管pwm占空比为初始pwm占空比进行刹车；S2：刹车过程中，通过ADC模块将电压采样模块采集的电压模拟信号转换成电压数字信号，即为母线电压值；S3：通过运算模块实时判断母线电压值是否位于母线电压高阈值与母线电压低阈值之间；S4：当母线电压值触发母线电压高阈值时，pwm调制模块输出三相逆变器六开关管pwm占空比均为零的pwm调制信号；S5：当母线电压值触发母线电压低阈值时，pwm调制模块输出三相逆变器上三管pwm占空比为零，下三管pwm占空比为初始pwm占空比的pwm调制信号；S6：在无刷直流电机缓刹过程中，当母线电压值在时间T0内且N0次触发母线电压高阈值时，pwm调制模块输出三相逆变器下三管的pwm占空比降低的pwm调制信号；S7：当母线电压值在时间T0内且N0次触发母线电压低阈值时，pwm调制模块输出三相逆变器下三管的pwm占空比提高的pwm调制信号；S8：通过刹车控制模块控制母线电压值位于母线电压高阈值与母线电压低阈值之间，以控制无刷直流电机进行缓刹，直至停机。7.根据权利要求2所述的无刷直流电机刹车系统，其特征在于：所述存储模块预设有所述母线电压值触发所述母线电压高阈值的次数低阈值N1、次数高阈值N2且所述次数高阈值N2大于所述次数低阈值N1；当所述无刷直流电机进行缓刹且所述母线电压值触发所述母线电压高阈值的次数大于所述次数高阈值N2时，所述pwm调制模块输出所述三相逆变器下三管pwm占空比逐渐降低的pwm调制信号，直至所述母线电压值触发所述母线电压高阈值的次数位于所述次数低阈值N1与所述次数高阈值N2之间；当所述无刷直流电机进行缓刹且所述母线电压值触发所述母线电压高阈值的次数小于所述次数低阈值N1时，所述pwm调制模块输出所述三相逆变器下三管pwm占空比逐渐提高的pwm调制信号，直至所述母线电压值触发所述母线电压高阈值的次数位于所述次数低阈值N1与所述次数高阈值N2之间。8.一种无刷直流电机刹车方法，其基于权利要求1-5及7任一项所述的无刷直流电机刹车系统，其特征在于：包括以下步骤：S1：无刷直流电机以三相逆变器上三管pwm占空比为零、下三管pwm占空比为初始pwm占空比进行刹车；S2：刹车过程中，通过ADC模块将电压采样模块采集的电压模拟信号转换成电压数字信号，即为母线电压值；S3：通过运算模块实时判断母线电压值是否位于母线电压高阈值与母线电压低阈值之间；S4：当母线电压值上升至母线电压高阈值时，pwm调制模块输出三相逆变器六开关管pwm占空比均为零的pwm调制信号；S5：当母线电压值下降至母线电压低阈值时，pwm调制模块输出三相逆变器上三管pwm占空比为零，下三管pwm占空比为初始pwm占空比的pwm调制信号；S6：当母线电压值在时间T1内触发母线电压高阈值的次数大于次数高阈值N2时，pwm调制模块输出三相逆变器下三管pwm占空比逐渐降低的pwm调制信号，直至母线电压值在时间T1内触发母线电压高阈值的次数位于次数低阈值N1与次数高阈值N2之间；S7：当母线电压值在时间T1内触发母线电压高阈值的次数小于次数低阈值N1时，pwm调制模块输出三相逆变器下三管pwm占空比逐渐提高的pwm调制信号，直至母线电压值在时间T1内触发母线电压高阈值的次数位于次数低阈值N1与次数高阈值N2之间；S8：通过刹车控制模块控制母线电压值位于母线电压高阈值与母线电压低阈值之间，以控制无刷直流电机进行缓刹，直至停机。9.根据权利要求8所述的无刷直流电机刹车方法，其特征在于：当母线电压值在时间T1内触发母线电压高阈值的次数大于次数高阈值N2时，pwm调制模块输出三相逆变器上三管占空比为零、下三管以5%占空比逐渐降低的pwm调制信号；当母线电压值在时间T1内触发母线电压高阈值的次数小于次数低阈值N1时，pwm调制模块输出三相逆变器上三管占空比为零、下三管以5%占空比逐渐提高的pwm调制信号。
说明书desc
【技术领域】本发明涉及无刷电机控制领域，尤其涉及一种无刷直流电机刹车系统及方法。【背景技术】一些电动工具存在安规要求或用户手感要求，在用户松开开关后需要电机刹车，实现机器快速停机。目前，现有的几种电机刹车技术存在一些不足和缺点：基于三相下管导通的电机刹车方案：如说明书附图1，通过直接控制三相逆变器上三管关闭、下三管导通，实现电机刹车，这种方式的不足之处在于刹车时，相短路电流较大，易导致电路元器件的损坏，刹车方式过渡不平稳，用户使用手感差；基于三相下管PWM调制的电机刹车方案：如说明书附图2，通过三相下管pwm调制方式实现电机刹车，这种方式的不足之处在于刹车时，当pwm从on变为off状态，电流方向为负向的相电流会通过mos体二极管流入电源模块，但在背负式电动工具中，一般母线和电池包不直接连接，电池包与母线之间连接有正向二极管，导致母线电路能量不能回馈到电池包，进而使得母线电压持续升高，如说明书附图3，当母线电压值超过耐压值时，电子元器件及电路易损坏。因此，有必要设计一种无刷直流电机刹车系统及方法，以解决上述问题。【发明内容】针对现有技术的不足，本发明的目的在于提供一种无刷直流电机刹车系统及方法，解决刹车时母线电压值持续升高，导致电子元器件及电路损坏的问题，同时避免刹车时相电流较大、工具过渡不平稳、用户使用手感差的问题。为实现上述目的，本发明采用如下技术方案：一种无刷直流电机刹车系统，包括直流电源、三相逆变器及控制器，所述直流电源通过母线电路电连接于所述三相逆变器，所述三相逆变器电连接于所述无刷直流电机；所述控制器电连接于所述三相逆变器，用以控制驱动所述无刷直流电机的运转；所述直流电源正负极两端电连接有电压采样模块，用以采集所述无刷直流电机刹车时所述母线电路的母线电压值；所述控制器包括与所述电压采样模块电连接的刹车控制模块，其内部预设有母线电压高阈值与母线电压低阈值，当所述母线电压值触发所述母线电压高阈值时，所述刹车控制模块控制所述三相逆变器六开关管均关闭；当所述母线电压值触发所述母线电压低阈值时，所述刹车控制模块控制所述三相逆变器上三管关闭、下三管导通；所述刹车控制模块控制所述母线电压值位于所述母线电压高阈值与所述母线电压低阈值之间，以控制所述无刷直流电机进行缓刹，直至停机。进一步地，所述刹车控制模块包括运算模块、存储单元、计时单元及pwm调制模块，所述运算模块通过ADC模块电连接于所述电压采样模块，所述存储单元与所述计时单元均电连接于所述运算模块，所述运算模块通过所述pwm调制模块电连接于所述三相逆变器，所述存储单元内预设有所述母线电压高阈值与所述母线电压低阈值。进一步地，所述ADC模块用于将所述电压采样模块采集的电压模拟信号转换成电压数字信号，所述电压数字信号即为所述母线电压值；所述运算模块用于判断所述母线电压值是否触发所述母线电压高阈值或所述母线电压低阈值，并计数所述母线电压值触发所述母线电压高阈值或所述母线电压低阈值的次数；所述计时单元用于控制所述运算模块判断所述母线电压值是否触发所述母线电压高阈值或所述母线电压低阈值的时间；所述pwm调制模块根据所述运算模块检测出所述母线电压值的不同状态生成相应的pwm调制信号，用以控制所述三相逆变器六开关管的关闭或导通，进而控制所述无刷直流电机进行缓刹。进一步地，在所述无刷直流电机缓刹过程中，当所述母线电压值在时间T0内且N0次触发所述母线电压高阈值时，所述刹车控制模块控制所述三相逆变器下三管的pwm占空比降低；当所述母线电压值在时间T0内且N0次触发所述母线电压低阈值时，所述刹车控制模块控制所述三相逆变器下三管的pwm占空比提高。进一步地，所述存储单元内预设有所述无刷直流电机刹车时所述三相逆变器下三管的初始pwm占空比，所述三相逆变器上三管的pwm占空比始终为零。本发明提供一种无刷直流电机刹车方法，其基于上述无刷直流电机刹车系统，包括以下步骤：S1：无刷直流电机以三相逆变器上三管pwm占空比为零、下三管pwm占空比为初始pwm占空比进行刹车；S2：刹车过程中，通过ADC模块将电压采样模块采集的电压模拟信号转换成电压数字信号，即为母线电压值；S3：通过运算模块实时判断母线电压值是否位于母线电压高阈值与母线电压低阈值之间；S4：当母线电压值触发母线电压高阈值时，pwm调制模块输出三相逆变器六开关管pwm占空比均为零的pwm调制信号；S5：当母线电压值触发母线电压低阈值时，pwm调制模块输出三相逆变器上三管pwm占空比为零，下三管pwm占空比为初始pwm占空比的pwm调制信号；S6：在无刷直流电机缓刹过程中，当母线电压值在时间T0内且N0次触发母线电压高阈值时，pwm调制模块输出三相逆变器下三管的pwm占空比降低的pwm调制信号；S7：当母线电压值在时间T0内且N0次触发母线电压低阈值时，pwm调制模块输出三相逆变器下三管的pwm占空比提高的pwm调制信号；S8：通过刹车控制模块控制母线电压值位于母线电压高阈值与母线电压低阈值之间，以控制无刷直流电机进行缓刹，直至停机。进一步地，所述存储模块预设有所述母线电压值触发所述母线电压高阈值的次数低阈值N1、次数高阈值N2且所述次数高阈值N2大于所述次数低阈值N1；当所述无刷直流电机进行缓刹且所述母线电压值触发所述母线电压高阈值的次数大于所述次数高阈值N2时，所述pwm调制模块输出所述三相逆变器下三管pwm占空比逐渐降低的pwm调制信号，直至所述母线电压值触发所述母线电压高阈值的次数位于所述次数低阈值N1与所述次数高阈值N2之间；当所述无刷直流电机进行缓刹且所述母线电压值触发所述母线电压高阈值的次数小于所述次数低阈值N1时，所述pwm调制模块输出所述三相逆变器下三管pwm占空比逐渐提高的pwm调制信号，直至所述母线电压值触发所述母线电压高阈值的次数位于所述次数低阈值N1与所述次数高阈值N2之间。本发明提供另一种无刷直流电机刹车方法，其基于上述无刷直流电机刹车系统，包括以下步骤：S1：无刷直流电机以三相逆变器上三管pwm占空比为零、下三管pwm占空比为初始pwm占空比进行刹车；S2：刹车过程中，通过ADC模块将电压采样模块采集的电压模拟信号转换成电压数字信号，即为母线电压值；S3：通过运算模块实时判断母线电压值是否位于母线电压高阈值与母线电压低阈值之间；S4：当母线电压值上升至母线电压高阈值时，pwm调制模块输出三相逆变器六开关管pwm占空比均为零的pwm调制信号；S5：当母线电压值下降至母线电压低阈值时，pwm调制模块输出三相逆变器上三管pwm占空比为零，下三管pwm占空比为初始pwm占空比的pwm调制信号；S6：当母线电压值在时间T1内触发母线电压高阈值的次数大于次数高阈值N2时，pwm调制模块输出三相逆变器下三管pwm占空比逐渐降低的pwm调制信号，直至母线电压值在时间T1内触发母线电压高阈值的次数位于次数低阈值N1与次数高阈值N2之间；S7：当母线电压值在时间T1内触发母线电压高阈值的次数小于次数低阈值N1时，pwm调制模块输出三相逆变器下三管pwm占空比逐渐提高的pwm调制信号，直至母线电压值在时间T1内触发母线电压高阈值的次数位于次数低阈值N1与次数高阈值N2之间；S8：通过刹车控制模块控制母线电压值位于母线电压高阈值与母线电压低阈值之间，以控制无刷直流电机进行缓刹，直至停机。进一步地，当母线电压值在时间T1内触发母线电压高阈值的次数大于次数高阈值N2时，pwm调制模块输出三相逆变器上三管占空比为零、下三管以5%占空比逐渐降低的pwm调制信号；当母线电压值在时间T1内触发母线电压高阈值的次数小于次数低阈值N1时，pwm调制模块输出三相逆变器上三管占空比为零、下三管以5%占空比逐渐提高的pwm调制信号。与现有技术相比，本发明具有如下有益效果：本发明在无刷直流电机刹车过程中，通过刹车控制模块控制母线电压值始终位于母线电压高阈值与母线电压低阈值之间，并根据不同的母线电压状态，采用不同的pwm调制信号以控制无刷直流电机进行缓刹，直至停机，此方式一来保证母线电压值持续维持在母线电压高阈值与母线电压低阈值之间，保护电子元器件及电路且延长电子元器件及电路的使用寿命；二来规避现有技术三相逆变器下三管直接导通的硬刹方法，显著提高无刷直流电机刹车手感。【附图说明】下面结合附图对本发明的具体实施方式做进一步详细的说明：图1是现有技术中基于三相逆变器下三管导通的电机刹车结构图；图2是现有技术中基于三相逆变器下三管pwm调制的电机刹车结构图，图中带方向的箭头表示电流流动方向。图3是现有技术中基于三相逆变器下三管pwm调制的电机刹车母线电压示意图；图4是本发明无刷直流电机刹车系统的结构图；图5是本发明无刷直流电机刹车系统在刹车时的母线电压控制波形图；图6是本发明pwm调制模块输出三相逆变器下三管导通的pwm调制信号波形图；图7是本发明pwm调制模块输出三相逆变器下三管关闭的pwm调制信号波形图；图8是本发明无刷直流电机刹车过程中的母线电压波形图；图中附图标记的含义：1、直流电源 2、三相逆变器 3、控制器 4、无刷直流电机 5、母线电路 6、电压采样模块 7、刹车控制模块 8、运算模块 9、存储单元 10、计时单元 11、pwm调制模块 12、ADC模块【具体实施方式】下面结合附图和实施方式对本发明作进一步详细说明。参阅图4至图8所示，一种无刷直流电机刹车系统，包括直流电源1、三相逆变器2及控制器3，直流电源1通过母线电路5电连接于三相逆变器2，三相逆变器2电连接于无刷直流电机4；控制器3电连接于三相逆变器2，用以控制驱动无刷直流电机4的运转；直流电源1正负极两端电连接有电压采样模块6，用以采集无刷直流电机4刹车时母线电路5的母线电压值；控制器3包括与电压采样模块6电连接的刹车控制模块7，其内部预设有母线电压高阈值与母线电压低阈值，当母线电压值触发母线电压高阈值时，刹车控制模块7控制三相逆变器2六开关管均关闭；当母线电压值触发母线电压低阈值时，刹车控制模块7控制三相逆变器2上三管关闭、下三管导通；刹车控制模块7控制母线电压值位于母线电压高阈值与母线电压低阈值之间，以控制无刷直流电机4进行缓刹，直至停机，其中，母线电压高阈值为母线电路的耐压值，一旦超过该耐压值，易导致电路元器件及电路损坏；母线电压低阈值为无刷直流电机刹车时，保证刹车效率的最低阈值，低于该最低阈值易导致刹车时间拉长，刹车效率大大降低，降低用户体验感。参阅图4所示，刹车控制模块7包括运算模块8、存储单元9、计时单元10及pwm调制模块11，运算模块8通过ADC模块12电连接于电压采样模块6，存储单元9与计时单元10均电连接于运算模块8，运算模块8通过pwm调制模块11电连接于三相逆变器2，存储单元9内预设有母线电压高阈值与母线电压低阈值。本实施例中，ADC模块12用于将电压采样模块6采集的电压模拟信号转换成电压数字信号，电压数字信号即为母线电压值；运算模块8用于判断母线电压值是否触发母线电压高阈值或母线电压低阈值，并计数母线电压值触发母线电压高阈值或母线电压低阈值的次数；计时单元10用于控制运算模块8判断母线电压值是否触发母线电压高阈值或母线电压低阈值的时间；pwm调制模块11根据运算模块8检测出母线电压值的不同状态生成相应的pwm调制信号，用以控制三相逆变器2六开关管的关闭或导通，进而控制无刷直流电机4进行缓刹。参阅图5至图8所示，在无刷直流电机4缓刹过程中，当母线电压值在时间T0内且N0次触发母线电压高阈值时，刹车控制模块7控制三相逆变器2下三管的pwm占空比降低；当母线电压值在时间T0内且N0次触发母线电压低阈值时，刹车控制模块7控制三相逆变器2下三管的pwm占空比提高。本实施例中，存储单元9内预设有无刷直流电机4刹车时三相逆变器2下三管的初始pwm占空比，三相逆变器2上三管的pwm占空比始终为零。继续参阅图4所示，存储单元9预设有母线电压值触发母线电压高阈值的次数低阈值N1、次数高阈值N2且次数高阈值N2大于次数低阈值N1；当无刷直流电机4进行缓刹且母线电压值触发母线电压高阈值的次数大于次数高阈值N2时，pwm调制模块11输出三相逆变器2下三管pwm占空比逐渐降低的pwm调制信号，直至母线电压值触发母线电压高阈值的次数位于次数低阈值N1与次数高阈值N2之间；当无刷直流电机4进行缓刹且母线电压值触发母线电压高阈值的次数小于次数低阈值N1时，pwm调制模块11输出三相逆变器2下三管pwm占空比逐渐提高的pwm调制信号，直至母线电压值触发母线电压高阈值的次数位于次数低阈值N1与次数高阈值N2之间。本发明提供一种无刷直流电机刹车方法，包括以下步骤：S1：无刷直流电机4以三相逆变器2上三管pwm占空比为零、下三管pwm占空比为初始pwm占空比进行刹车；S2：刹车过程中，通过ADC模块12将电压采样模块6采集的电压模拟信号转换成电压数字信号，即为母线电压值；S3：通过运算模块8实时判断母线电压值是否位于母线电压高阈值与母线电压低阈值之间；S4：当母线电压值触发母线电压高阈值时，pwm调制模块11输出三相逆变器2六开关管pwm占空比均为零的pwm调制信号；S5：当母线电压值触发母线电压低阈值时，pwm调制模块11输出三相逆变器2上三管pwm占空比为零，下三管pwm占空比为初始pwm占空比的pwm调制信号；S6：在无刷直流电机4缓刹过程中，当母线电压值在时间T0内且N0次触发母线电压高阈值时，pwm调制模块11输出三相逆变器2下三管的pwm占空比降低的pwm调制信号；S7：当母线电压值在时间T0内且N0次触发母线电压低阈值时，pwm调制模块11输出三相逆变器2下三管的pwm占空比提高的pwm调制信号；S8：通过刹车控制模块7控制母线电压值位于母线电压高阈值与母线电压低阈值之间，以控制无刷直流电机4进行缓刹，直至停机；其中，时间T0取值范围为：10ms～100ms，N0取值范围为：5次～20次。上述无刷直流电机4刹车方法的工作原理为：参阅图5至图8所示，假设电池包电压40V，母线电压值记为Udc，母线电压高阈值为55V，母线电压低阈值为50V，时间T0取值为50ms，N0取值为10次，初始pwm占空比为50%；S1：无刷直流电机4以三相逆变器2上三管pwm占空比为零、下三管pwm占空比为初始pwm占空比进行刹车；S2：刹车过程中，通过ADC模块12将电压采样模块6采集的电压模拟信号转换成电压数字信号，即为母线电压值Udc；S3：通过运算模块8实时判断Udc是否位于50V与55V之间；S4：当Udc上升至55V时，pwm调制模块11输出三相逆变器2六开关管pwm占空比均为零的pwm调制信号；当Udc下降至50V时，pwm调制模块11输出三相逆变器2上三管pwm占空比为零，下三管pwm占空比为50%的pwm调制信号；S5：在S4刹车过程中，当Udc在50ms内且达到10次上升至55V时，pwm调制模块11输出三相逆变器2下三管的pwm占空比降低的pwm调制信号，其中，10次可为连续或非连续；S6：在S4刹车过程中，当Udc在50ms内且达到10次下降至50V时，pwm调制模块11输出三相逆变器2下三管的pwm占空比提高的pwm调制信号；S7：通过刹车控制模块7控制Udc位于50V与55V之间，以控制无刷直流电机4进行缓刹，直至停机；本方法通过刹车控制模块7控制母线电压值始终位于母线电压高阈值与母线电压低阈值之间，并根据不同的母线电压状态，采用不同的pwm调制信号以控制无刷直流电机4进行缓刹，直至停机，此方法一来保证母线电压值持续维持在母线电压高阈值与母线电压低阈值之间，保护电子元器件及电路且延长电子元器件及电路的使用寿命；二来规避现有技术三相逆变器2下三管直接导通的硬刹方法，显著提高无刷直流电机4刹车手感。本发明提供另一种无刷直流电机刹车方法，包括以下步骤：S1：无刷直流电机4以三相逆变器2上三管pwm占空比为零、下三管pwm占空比为初始pwm占空比进行刹车；S2：刹车过程中，通过ADC模块12将电压采样模块6采集的电压模拟信号转换成电压数字信号，即为母线电压值；S3：通过运算模块8实时判断母线电压值是否位于母线电压高阈值与母线电压低阈值之间；S4：当母线电压值上升至母线电压高阈值时，pwm调制模块11输出三相逆变器2六开关管pwm占空比均为零的pwm调制信号；S5：当母线电压值下降至母线电压低阈值时，pwm调制模块11输出三相逆变器2上三管pwm占空比为零，下三管pwm占空比为初始pwm占空比的pwm调制信号；S6：当母线电压值在时间T1内触发母线电压高阈值的次数大于次数高阈值N2时，pwm调制模块11输出三相逆变器2下三管pwm占空比逐渐降低的pwm调制信号，直至母线电压值在时间T1内触发母线电压高阈值的次数位于次数低阈值N1与次数高阈值N2之间；S7：当母线电压值在时间T1内触发母线电压高阈值的次数小于次数低阈值N1时，pwm调制模块11输出三相逆变器2下三管pwm占空比逐渐提高的pwm调制信号，直至母线电压值在时间T1内触发母线电压高阈值的次数位于次数低阈值N1与次数高阈值N2之间；S8：通过刹车控制模块7控制母线电压值位于母线电压高阈值与母线电压低阈值之间，以控制无刷直流电机4进行缓刹，直至停机；其中，N1的取值范围为：5次～10次，N2的取值范围为：20次～50次，T1的取值范围为：10ms～100ms。本实施例中，当母线电压值在时间T1内触发母线电压高阈值的次数大于次数高阈值N2时，pwm调制模块11输出三相逆变器2上三管占空比为零、下三管以5%占空比逐渐降低的pwm调制信号；当母线电压值在时间T1内触发母线电压高阈值的次数小于次数低阈值N1时，pwm调制模块11输出三相逆变器2上三管占空比为零、下三管以5%占空比逐渐提高的pwm调制信号。上述无刷直流电机4刹车方法的工作原理为：参阅图5至图8所示，假设电池包电压40V，母线电压值记为Udc，母线电压高阈值为55V，母线电压低阈值为50V，时间T1取值为50ms，N1取值为5次，N2取值为20次，初始pwm占空比为50%；S1：无刷直流电机4以三相逆变器2上三管pwm占空比为零、下三管pwm占空比为初始pwm占空比进行刹车；S2：刹车过程中，通过ADC模块12将电压采样模块6采集的电压模拟信号转换成电压数字信号，即为母线电压值Udc；S3：通过运算模块8实时判断Udc是否位于50V与55V之间；S4：当Udc上升至55V时，pwm调制模块11输出三相逆变器2六开关管pwm占空比均为零的pwm调制信号；当Udc下降至50V时，pwm调制模块11输出三相逆变器2上三管pwm占空比为零，下三管pwm占空比为50%的pwm调制信号；S5：当Udc在50ms内上升至55V的次数大于20次时，pwm调制模块11输出三相逆变器2上三管占空比为零、下三管以5%占空比逐渐降低的pwm调制信号，直至Udc在50ms内上升至55V的次数位于5次与20次之间；S6：当Udc在50ms内下降至50V的次数小于5次时，pwm调制模块11输出三相逆变器2上三管占空比为零、下三管以5%占空比逐渐提高的pwm调制信号，直至Udc在50ms内下降至50V的次数位于5次与20次之间；S7：通过刹车控制模块7控制Udc位于50V与55V之间，以控制无刷直流电机4进行缓刹，直至停机。以上方法进一步优化方法，在保证母线电压值位于母线电压高阈值与母线电压低阈值之间的同时，对pwm调制信号进行进一步地精细控制，以控制无刷直流电机4进行缓刹，直至停机，本方法不仅保护电子元器件及电路、延长其使用寿命，而且极大地提高了刹车效率，同时使得无刷直流电机4刹车手感得到进一步提高，极大地改善用户的使用体验。本发明不局限于上述具体实施方式，本领域普通技术人员可以很容易地理解到，在不脱离本发明原理和范畴的前提下，本发明的无刷直流电机刹车系统及方法还有其他很多的替代方案，本发明的保护范围以权利要求书的内容为准。
