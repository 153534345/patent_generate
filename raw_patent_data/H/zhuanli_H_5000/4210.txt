标题title
一种基于大数据的端侧用户场景回放方法和系统
摘要abst
本发明公开了一种基于大数据的端侧用户场景回放方法和系统，通过预先在客户端页面的用户可操作位置配置用于采集客户端的用户操作路径数据的监测点来获取用户操作路径数据，按照用户唯一标识和时间序列将用户操作路径数据进行串联和聚合，抽取与实际业务路径不符的异常用户操作路径数据，结合用户侧分辨率进行等比例回放异常用户操作路径，以便于对用户的页面操作过程存在的问题进行定位和优化，不需要人工复现互联网业务场景路径，解决了现有的人工方式复现互联网业务场景路径方式费时费力，且不能高效准确地了解用户使用过程中存在的问题并进行场景回放重现，难以真正地从真实用户场景视角出发来提高互联网产品的用户体验的技术问题。
权利要求书clms
1.一种基于大数据的端侧用户场景回放方法，其特征在于，包括：在客户端页面的用户可操作位置配置用于采集客户端的用户操作路径数据的监测点；获取监测点采集的客户端的用户操作路径数据，对客户端用户数据操作路径数据进行数据清洗；根据用户唯一标识按时间序列将数据清洗后的客户端的用户操作路径数据分组串联，并按用户操作路径聚合客户端的用户操作路径数据；将聚合后的客户端用户操作路径与实际业务路径进行比对，抽取与实际业务路径不符的异常用户操作路径数据作为第一目标用户操作路径数据；根据客户端终端设备的分辨率计算当前回放设备对应的用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据。2.根据权利要求1所述的基于大数据的端侧用户场景回放方法，其特征在于，根据客户端终端设备的分辨率计算当前回放设备对应的用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据之后，还包括：根据客户端用户操作路径的回放结果定位用户操作过程中存在的问题。3.根据权利要求2所述的基于大数据的端侧用户场景回放方法，其特征在于，根据客户端用户操作路径的回放结果定位用户操作过程中存在的问题之后，还包括：获取与定位到的用户操作过程中存在的问题的优化策略；在测试环境下执行优化策略，对优化策略进行验证，若验证通过，则输出优化策略并按优化策略对客户端页面的用户路径进行优化，若验证不通过，则重新调整优化策略。4.根据权利要求1所述的基于大数据的端侧用户场景回放方法，其特征在于，监测点采集的客户端的用户操作路径数据包括事件名称、事件类型、操作坐标、操作方法、操作页面路径和客户端终端设备的分辨率。5.根据权利要求1所述的基于大数据的端侧用户场景回放方法，其特征在于，将聚合后的客户端用户操作路径与实际业务路径进行比对，抽取与实际业务路径不符的异常用户操作路径数据作为第一目标用户操作路径数据，还包括：抽取访问量低于预设值的用户操作路径数据作为第二目标用户操作路径数据；结合页面热力图分析第二目标用户操作路径数据是否有效，根据分析结果优化页面布局。6.根据权利要求1所述的基于大数据的端侧用户场景回放方法，其特征在于，在根据用户唯一标识按时间序列将数据清洗后的客户端的用户操作路径数据分组串联，并按用户操作路径聚合客户端的用户操作路径数据之前，还包括：根据用户的登录状态确定用户唯一标识，其中，若用户处于未登录状态，则根据用户侧客户端终端设备的名称、版本和IP地址结合加载第一个页面的时间作为用户唯一标识，若用户处于已登录状态，则使用用户ID作为用户唯一标识。7.根据权利要求1所述的基于大数据的端侧用户场景回放方法，其特征在于，根据客户端终端设备的分辨率计算当前回放设备对应的用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据，包括：根据客户端终端设备的分辨率，按照预置公式计算当前回放设备对应的用户在监测点操作的实际回放坐标，预置公式为：其中，x为用户在监测点操作的实际横坐标，y为用户在监测点操作的实际纵坐标，Xc为监测点在客户端终端设备的横坐标数据，Xp为客户端终端设备的横向分辨率，Px为当前回放设备的横向分辨率，Yc为监测点在客户端终端设备的纵坐标数据，Yp为客户端终端设备的纵向分辨率，Py为当前回放设备的纵向分辨率；根据用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据。8.一种基于大数据的端侧用户场景回放系统，其特征在于，包括：埋点模块，用于在客户端页面的用户可操作位置配置用于采集客户端的用户操作路径数据的监测点；操作路径数据获取模块，用于获取监测点采集的客户端的用户操作路径数据，对客户端用户数据操作路径数据进行数据清洗；操作路径数据聚合模块，用于根据用户唯一标识按时间序列将数据清洗后的客户端的用户操作路径数据分组串联，并按用户操作路径聚合客户端的用户操作路径数据；操作路径数据抽取模块，用于将聚合后的客户端用户操作路径与实际业务路径进行比对，抽取与实际业务路径不符的异常用户操作路径数据作为第一目标用户操作路径数据；操作路径数据回放模块，用于根据客户端终端设备的分辨率计算当前回放设备对应的用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据。9.根据权利要求8所述的基于大数据的端侧用户场景回放系统，其特征在于，还包括：问题定位模块，用于根据客户端用户操作路径的回放结果定位用户操作过程中存在的问题。10.根据权利要求9所述的基于大数据的端侧用户场景回放系统，其特征在于，还包括优化模块；优化模块用于：获取与定位到的用户操作过程中存在的问题的优化策略；在测试环境下执行优化策略，对优化策略进行验证，若验证通过，则输出优化策略并按优化策略对客户端页面的用户路径进行优化，若验证不通过，则重新调整优化策略。
说明书desc
技术领域本发明涉及互联网大数据应用技术领域，尤其涉及一种基于大数据的端侧用户场景回放方法和系统。背景技术随着互联网应用的普及和人们对互联网的依赖加深，互联网上的系统和应用呈现爆发式增长，应用程序实现随着业务发展需求越来越复杂，通过人工方式复现所有业务场景路径变得越来越困难，不但费时费力，而且不能高效准确地了解用户使用过程中存在的问题并进行场景回放重现，难以真正地从真实用户场景视角出发来提高互联网产品的用户体验。因此，提供一种能够智能复现互联网的所有业务场景下的用户访问界面路径，高效准确地了解用户使用过程中存在的问题并进行场景回放重现，以便于从真实用户场景视角出发来提高互联网产品的用户体验的用户场景回放方法，是本领域技术人员亟待解决的技术问题。发明内容本发明提供了一种基于大数据的端侧用户场景回放方法和系统，用于解决现有的人工方式复现互联网业务场景路径方式费时费力，且不能高效准确地了解用户使用过程中存在的问题并进行场景回放重现，难以真正地从真实用户场景视角出发来提高互联网产品的用户体验的技术问题。有鉴于此，本发明第一方面提供了一种基于大数据的端侧用户场景回放方法，包括：在客户端页面的用户可操作位置配置用于采集客户端的用户操作路径数据的监测点；获取监测点采集的客户端的用户操作路径数据，对客户端用户数据操作路径数据进行数据清洗；根据用户唯一标识按时间序列将数据清洗后的客户端的用户操作路径数据分组串联，并按用户操作路径聚合客户端的用户操作路径数据；将聚合后的客户端用户操作路径与实际业务路径进行比对，抽取与实际业务路径不符的异常用户操作路径数据作为第一目标用户操作路径数据；根据客户端终端设备的分辨率计算当前回放设备对应的用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据。可选地，根据客户端终端设备的分辨率计算当前回放设备对应的用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据之后，还包括：根据客户端用户操作路径的回放结果定位用户操作过程中存在的问题。可选地，根据客户端用户操作路径的回放结果定位用户操作过程中存在的问题之后，还包括：获取与定位到的用户操作过程中存在的问题的优化策略；在测试环境下执行优化策略，对优化策略进行验证，若验证通过，则输出优化策略并按优化策略对客户端页面的用户路径进行优化，若验证不通过，则重新调整优化策略。可选地，监测点采集的客户端的用户操作路径数据包括事件名称、事件类型、操作坐标、操作方法、操作页面路径和客户端终端设备的分辨率。可选地，将聚合后的客户端用户操作路径与实际业务路径进行比对，抽取与实际业务路径不符的异常用户操作路径数据作为第一目标用户操作路径数据，还包括：抽取访问量低于预设值的用户操作路径数据作为第二目标用户操作路径数据；结合页面热力图分析第二目标用户操作路径数据是否有效，根据分析结果优化页面布局。可选地，在根据用户唯一标识按时间序列将数据清洗后的客户端的用户操作路径数据分组串联，并按用户操作路径聚合客户端的用户操作路径数据之前，还包括：根据用户的登录状态确定用户唯一标识，其中，若用户处于未登录状态，则根据用户侧客户端终端设备的名称、版本和IP地址结合加载第一个页面的时间作为用户唯一标识，若用户处于已登录状态，则使用用户ID作为用户唯一标识。可选地，根据客户端终端设备的分辨率计算当前回放设备对应的用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据，包括：根据客户端终端设备的分辨率，按照预置公式计算当前回放设备对应的用户在监测点操作的实际回放坐标，预置公式为：其中，x为用户在监测点操作的实际横坐标，y为用户在监测点操作的实际纵坐标，Xc为监测点在客户端终端设备的横坐标数据，Xp为客户端终端设备的横向分辨率，Px为当前回放设备的横向分辨率，Yc为监测点在客户端终端设备的纵坐标数据，Yp为客户端终端设备的纵向分辨率，Py为当前回放设备的纵向分辨率；根据用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据。本发明第二方面还提供了一种基于大数据的端侧用户场景回放系统，包括：埋点模块，用于在客户端页面的用户可操作位置配置用于采集客户端的用户操作路径数据的监测点；操作路径数据获取模块，用于获取监测点采集的客户端的用户操作路径数据，对客户端用户数据操作路径数据进行数据清洗；操作路径数据聚合模块，用于根据用户唯一标识按时间序列将数据清洗后的客户端的用户操作路径数据分组串联，并按用户操作路径聚合客户端的用户操作路径数据；操作路径数据抽取模块，用于将聚合后的客户端用户操作路径与实际业务路径进行比对，抽取与实际业务路径不符的异常用户操作路径数据作为第一目标用户操作路径数据；操作路径数据回放模块，用于根据客户端终端设备的分辨率计算当前回放设备对应的用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据。可选地，还包括：问题定位模块，用于根据客户端用户操作路径的回放结果定位用户操作过程中存在的问题。可选地，还包括优化模块；优化模块用于：获取与定位到的用户操作过程中存在的问题的优化策略；在测试环境下执行优化策略，对优化策略进行验证，若验证通过，则输出优化策略并按优化策略对客户端页面的用户路径进行优化，若验证不通过，则重新调整优化策略。从以上技术方案可以看出，本发明提供的基于大数据的端侧用户场景回放方法具有以下优点：本发明提供的基于大数据的端侧用户场景回放方法，通过预先在客户端页面的用户可操作位置配置用于采集客户端的用户操作路径数据的监测点来获取用户操作路径数据，按照用户唯一标识和时间序列将用户操作路径数据进行串联和聚合，抽取与实际业务路径不符的异常用户操作路径数据，结合用户侧分辨率进行等比例回放异常用户操作路径，以便于对用户的页面操作过程存在的问题进行定位和优化，不需要人工复现互联网业务场景路径，解决了现有的人工方式复现互联网业务场景路径方式费时费力，且不能高效准确地了解用户使用过程中存在的问题并进行场景回放重现，难以真正地从真实用户场景视角出发来提高互联网产品的用户体验的技术问题。附图说明为了更清楚的说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1为本发明中提供的一种基于大数据的端侧用户场景回放方法的一个流程示意图；图2为本发明中提供的一种基于大数据的端侧用户场景回放方法的另一个流程示意图图3为本发明中提供的一种基于大数据的端侧用户场景回放系统的结构示意图。具体实施方式为了使本技术领域的人员更好地理解本发明方案，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。为了便于理解，请参阅图1，本发明中提供了一种基于大数据的端侧用户场景回放方法的实施例，包括：步骤101、在客户端页面的用户可操作位置配置用于采集客户端的用户操作路径数据的监测点。需要说明的是，在客户端如android、iOS、H5等页面的用户可操作位置配置监测点，用于采集客户端的用户操作路径数据。监测点监测的用户操作路径数据包括事件名称、事件类型、操作坐标、操作方法、操作页面路径和客户端终端设备的分辨率。事件名称是指监测点采集定义的有意义的名称。事件类型为页面的按钮、输入框和链接等。操作坐标是根据用户使用的客户端终端设备的分辨率，页面可视部分以像素为单位渲染的长坐标和宽坐标。操作方法为单击、双极和滑动等操作。步骤102、获取监测点采集的客户端的用户操作路径数据，对客户端用户数据操作路径数据进行数据清洗。需要说明的是，获取到监测点采集的客户端的用户操作路径数据后，对客户端用户数据操作路径数据进行数据清洗，去除噪声数据。步骤103、根据用户唯一标识按时间序列将数据清洗后的客户端的用户操作路径数据分组串联，并按用户操作路径聚合客户端的用户操作路径数据。需要说明的是，根据用户唯一标识，将用户的操作路径数据按照时间序列进行单个用户的操作路径数据分组串联，按照相同用户操作路径分组聚合，如用户操作路径为“页面A-B-C”的分组，因而可以统计每个用户操作路径分组的具体数量。具体地，根据用户的登录状态确定用户唯一标识，其中，若用户处于未登录状态，则根据用户侧客户端终端设备的名称、版本和IP地址结合加载第一个页面的时间作为用户唯一标识，若用户处于已登录状态，则使用用户ID作为用户唯一标识。步骤104、将聚合后的客户端用户操作路径与实际业务路径进行比对，抽取与实际业务路径不符的异常用户操作路径数据作为第一目标用户操作路径数据。需要说明的是，将聚合后的客户端用户操作路径与实际业务路径进行比对，抽取与实际业务路径不符的异常用户操作路径数据作为第一目标用户操作路径数据，用于回放用户场景，排查共性问题。对于访问量低于预设值的用户操作路径数据，则作为第二目标用户操作路径数据，结合页面热力图分析第二目标用户操作路径数据是否有效，根据分析结果优化页面布局。步骤105、根据客户端终端设备的分辨率计算当前回放设备对应的用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据。需要说明的是，根据用户侧客户端终端设备的分辨率及用户操作路径数据，将用户操作路径数据对应的操作坐标数据与客户端终端设备的分辨率按照横坐标/横向分辨率、纵坐标/纵向分辨率的方式获取操作点的横向和纵向百分比，然后使用当前回放设备的分辨率乘以横向百分比和纵向百分比，得到用户在监测点操作的实际回放坐标，即在当前回放设备中的用户在监测点操作的实际回放坐标的计算公式可以归纳为：其中，x为用户在监测点操作的实际横坐标，y为用户在监测点操作的实际纵坐标，Xc为监测点在客户端终端设备的横坐标数据，Xp为客户端终端设备的横向分辨率，Px为当前回放设备的横向分辨率，Yc为监测点在客户端终端设备的纵坐标数据，Yp为客户端终端设备的纵向分辨率，Py为当前回放设备的纵向分辨率。以上得到的即为分辨率等比例回放使用的当前回放设备的用户在监测点操作的实际回放坐标。使用回放工具，如selenium、appium等测试环境下模拟启动并打开入口界面，按照用户在监测点操作的实际回放坐标按照控件顺序逐一尝试在界面上定位控件，根据定位到的控件类型模拟相应操作，如在输入框中输入字符、在按钮上点击操作等，完成操作后等待界面加载完成，获取当前页面属性与用户操作记录页面属性对比是否一致，比如比较当前获取的页面标题与采集的路径数据中页面标题是否一致，若一致则验证操作成功，从而完成第一目标用户操作路径数据的等比例回放。通过分辨率等比例回放，可适配多种不同品牌终端，如android手机品牌型号多、手机分辨率也不一样，通过本发明实施例提供的基于大数据的端侧用户场景回放方法可有效提升回放成功率。本发明实施例提供的基于大数据的端侧用户场景回放方法，通过预先在客户端页面的用户可操作位置配置用于采集客户端的用户操作路径数据的监测点来获取用户操作路径数据，按照用户唯一标识和时间序列将用户操作路径数据进行串联和聚合，抽取与实际业务路径不符的异常用户操作路径数据，结合用户侧分辨率进行等比例回放异常用户操作路径，以便于对用户的页面操作过程存在的问题进行定位和优化，不需要人工复现互联网业务场景路径，解决了现有的人工方式复现互联网业务场景路径方式费时费力，且不能高效准确地了解用户使用过程中存在的问题并进行场景回放重现，难以真正地从真实用户场景视角出发来提高互联网产品的用户体验的技术问题。在一个实施例中，如图2所示，在步骤105之后，还包括：步骤106、根据客户端用户操作路径的回放结果定位用户操作过程中存在的问题。需要说明的是，根据客户端用户操作路径的回放可以定位出用户页面路径访问过程中存在的问题，例如访问页面跳转操作较为繁琐，中间页面较多、部分页面操作按钮摆放位置较为隐蔽，导致用户在该页面无法继续操作、非预期弹窗或请求了错误页面等。步骤107、获取与定位到的用户操作过程中存在的问题的优化策略。步骤108、在测试环境下执行优化策略，对优化策略进行验证，若验证通过，则输出优化策略并按优化策略对客户端页面的用户路径进行优化，若验证不通过，则重新调整优化策略。需要说明的是，针对于定位到的用户操作过程中存在的问题，采取对应的优化策略，例如，对于访问页面跳转操作较为繁琐，中间页面较多的问题，可以简化用户访问路径，比如将原来需要登录后访问首页再访问活动页，可优化为登录后直接访问活动页，以减少用户操作。对于部分页面操作按钮摆放位置较为隐蔽，导致用户在该页面无法继续操作的问题，可结合单个页面的热力图分析页面布局，调整用户可操作位置。对于非预期弹窗或请求了错误页面，则优化应用交互和用户路径，主要包括以下两个方面：优化流量走向：引导低价值流量向高价值流量转化，优化低价值渠道；优化核心功能走向：引导用户使用产品核心、重点功能，凸显核心功能入口。在测试环境下执行优化策略，对优化策略进行验证，若验证通过，即优化策略执行后通过用户操作路径场景回放能够解决所定位的问题，则输出优化策略并按优化策略对客户端页面的用户路径进行优化，若验证不通过，即优化策略执行后通过用户操作路径场景回放不能解决所定位的问题，则需要重新调整优化策略，重新验证，直至通过验证。为了便于理解，请参阅图3，本发明中提供了一种基于大数据的端侧用户场景回放系统的实施例，包括：埋点模块，用于在客户端页面的用户可操作位置配置用于采集客户端的用户操作路径数据的监测点；操作路径数据获取模块，用于获取监测点采集的客户端的用户操作路径数据，对客户端用户数据操作路径数据进行数据清洗；操作路径数据聚合模块，用于根据用户唯一标识按时间序列将数据清洗后的客户端的用户操作路径数据分组串联，并按用户操作路径聚合客户端的用户操作路径数据；操作路径数据抽取模块，用于将聚合后的客户端用户操作路径与实际业务路径进行比对，抽取与实际业务路径不符的异常用户操作路径数据作为第一目标用户操作路径数据；操作路径数据回放模块，用于根据客户端终端设备的分辨率计算当前回放设备对应的用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据。还包括：问题定位模块，用于根据客户端用户操作路径的回放结果定位用户操作过程中存在的问题。还包括优化模块；优化模块用于：获取与定位到的用户操作过程中存在的问题的优化策略；在测试环境下执行优化策略，对优化策略进行验证，若验证通过，则输出优化策略并按优化策略对客户端页面的用户路径进行优化，若验证不通过，则重新调整优化策略。监测点采集的客户端的用户操作路径数据包括事件名称、事件类型、操作坐标、操作方法、操作页面路径和客户端终端设备的分辨率。操作路径数据抽取模块还用于：抽取访问量低于预设值的用户操作路径数据作为第二目标用户操作路径数据；结合页面热力图分析第二目标用户操作路径数据是否有效，根据分析结果优化页面布局。操作路径数据聚合模块在根据用户唯一标识按时间序列将数据清洗后的客户端的用户操作路径数据分组串联，并按用户操作路径聚合客户端的用户操作路径数据之前，还包括：根据用户的登录状态确定用户唯一标识，其中，若用户处于未登录状态，则根据用户侧客户端终端设备的名称、版本和IP地址结合加载第一个页面的时间作为用户唯一标识，若用户处于已登录状态，则使用用户ID作为用户唯一标识。操作路径数据回放模块具体用于：根据客户端终端设备的分辨率，按照预置公式计算当前回放设备对应的用户在监测点操作的实际回放坐标，预置公式为：其中，x为用户在监测点操作的实际横坐标，y为用户在监测点操作的实际纵坐标，Xc为监测点在客户端终端设备的横坐标数据，Xp为客户端终端设备的横向分辨率，Px为当前回放设备的横向分辨率，Yc为监测点在客户端终端设备的纵坐标数据，Yp为客户端终端设备的纵向分辨率，Py为当前回放设备的纵向分辨率；根据用户在监测点操作的实际回放坐标，根据实际回放坐标在测试环境下等比例回放第一目标用户操作路径数据。本发明实施例提供的基于大数据的端侧用户场景回放系统，通过预先在客户端页面的用户可操作位置配置用于采集客户端的用户操作路径数据的监测点来获取用户操作路径数据，按照用户唯一标识和时间序列将用户操作路径数据进行串联和聚合，抽取与实际业务路径不符的异常用户操作路径数据，结合用户侧分辨率进行等比例回放异常用户操作路径，以便于对用户的页面操作过程存在的问题进行定位和优化，不需要人工复现互联网业务场景路径，解决了现有的人工方式复现互联网业务场景路径方式费时费力，且不能高效准确地了解用户使用过程中存在的问题并进行场景回放重现，难以真正地从真实用户场景视角出发来提高互联网产品的用户体验的技术问题。本发明实施例提供的基于大数据的端侧用户场景回放系统，用于执行前述基于大数据的端侧用户场景回放方法实施例中的基于大数据的端侧用户场景回放方法，其原理与前述基于大数据的端侧用户场景回放方法实施例中的基于大数据的端侧用户场景回放方法相同，在此不再进行赘述。以上所述，以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
