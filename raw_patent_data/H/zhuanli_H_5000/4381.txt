标题title
一种模拟ECU节点的分配方法、装置、电子设备及存储介质
摘要abst
本申请实施例提供了一种模拟ECU节点的分配方法、装置、电子设备及存储介质，方法包括：确定待分配至模拟设备的模拟ECU节点，确定各个模拟ECU节点的Flexray帧数目；模拟设备包括第一模拟设备和第二模拟设备；将模拟ECU节点划分为冷启动节点和非冷启动节点；按照Flexray帧数目的降序顺序，依次将每一冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备；针对非冷启动节点，按照Flexray帧数目的降序顺序，依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。大大减少了分配至第一模拟设备或第二模拟设备的Flexray帧数目超过可支持帧数上限的情况。
权利要求书clms
1.一种模拟ECU节点的分配方法，其特征在于，所述方法包括：确定待分配至模拟设备的模拟ECU节点，并确定各个模拟ECU节点的Flexray帧数目；其中，所述模拟设备接入Flexray车载总线，且所述模拟设备包括第一模拟设备和第二模拟设备；将所述模拟ECU节点划分为冷启动节点和非冷启动节点；其中，所述冷启动节点的Flexray帧包含启动帧；针对所述冷启动节点，按照Flexray帧数目的降序顺序，依次将每一冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备；针对所述非冷启动节点，按照Flexray帧数目的降序顺序，依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。2.根据权利要求1所述的方法，其特征在于，在依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备之后，所述方法还包括：若所述第一模拟设备的Flexray帧数目总和、所述第二模拟设备的Flexray帧数目总和均不超过帧数上限，基于所述模拟ECU节点的分配结果进行模拟调试。3.根据权利要求2所述的方法，其特征在于，若所述第一模拟设备的Flexray帧数目总和超过所述帧数上限、或所述第二模拟设备的Flexray帧数目总和超过所述帧数上限，清空所述第一模拟设备和所述第二模拟设备的已分配模拟ECU节点，并重新分配所述模拟ECU节点。4.根据权利要求3所述的方法，其特征在于，所述重新分配所述模拟ECU节点的步骤，包括：从所述冷启动节点中确定Flexray帧数目最大的第一冷启动节点和Flexray帧数目次大的第二冷启动节点；将所述第一冷启动节点和所述第二冷启动节点分配至不同的模拟设备；针对除所述第一冷启动节点和所述第二冷启动节点之外的其他模拟ECU节点，按照Flexray帧数目的降序顺序，依次将每一模拟ECU节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。5.根据权利要求4所述的方法，其特征在于，在依次将每一模拟ECU节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备之后，所述方法还包括：若所述第一模拟设备的Flexray帧数目总和、所述第二模拟设备的Flexray帧数目总和均不超过帧数上限，基于所述模拟ECU节点的分配结果进行模拟调试。6.根据权利要求5所述的方法，其特征在于，若所述第一模拟设备的Flexray帧数目总和超过所述帧数上限、或所述第二模拟设备的Flexray帧数目总和超过所述帧数上限，进行报错。7.根据权利要求1所述的方法，其特征在于，所述模拟ECU节点包括：自动驾驶主控电脑单元ADMC、制动助力器模块BBM、中央电子模块CEM、信息娱乐主管单元IHU、辅助限制系统SRS、车辆动力主控单元VDDM、和/或车辆网关模块VGM。8.一种模拟ECU节点的分配装置，其特征在于，所述装置包括：确定模块，用于确定待分配至模拟设备的模拟ECU节点，并确定各个模拟ECU节点的Flexray帧数目；其中，所述模拟设备接入Flexray车载总线，且所述模拟设备包括第一模拟设备和第二模拟设备；划分模块，用于将所述模拟ECU节点划分为冷启动节点和非冷启动节点；其中，所述冷启动节点的Flexray帧包含启动帧；第一分配模块，用于针对所述冷启动节点，按照Flexray帧数目的降序顺序，依次将每一冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备；第二分配模块，用于针对所述非冷启动节点，按照Flexray帧数目的降序顺序，依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。9.一种电子设备，其特征在于，包括处理器、通信接口、存储器和通信总线，其中，处理器，通信接口，存储器通过通信总线完成相互间的通信；存储器，用于存放计算机程序；处理器，用于执行存储器上所存放的程序时，实现权利要求1-7任一所述的方法步骤。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质内存储有计算机程序，所述计算机程序被处理器执行时实现权利要求1-7任一所述的方法步骤。
说明书desc
技术领域本申请涉及通信技术领域，特别是涉及一种模拟ECU节点的分配方法、装置、电子设备及存储介质。背景技术Flexray总线是专为车内局域网设计的一种具备故障容错的高速可确定性车载总线，采用了TDMA机制，具有高速率、高可靠性、容错性好等特点，在实时性和灵活性方面也有很大的优势。基于安全性、可靠性的考虑，整个车载系统的Backbone采用Flexray总线，也就是说各个ECU的信息交互采用Flexray通信方式。在ECU开发过程中，需要模拟设备来模拟其他ECU发送Flexray信号，模拟设备可以是SimulationBox。由于Flexray总线采用TDMA的通信方式，在执行冷启动过程中至少需要两个冷启动节点，且两个冷启动节点分别处于两个模拟设备，其中冷启动节点是能够发送启动帧的节点。也就是说，需要两个模拟设备，并且每个模拟设备都至少分配一个冷启动节点。由于ECU的开发版本不断更迭，各个ECU节点的Flexray帧的数目会存在大大小小的变化，这导致在给模拟设备分配ECU节点时，可能存在分配不合理的情况。现有的ECU节点分配方案，采用贪婪算法进行分配，很容易出现以下不合理的分配情况：1)分配给某个模拟设备的ECU节点的Flexray帧总数目超过该模拟设备能够支持的帧数上限；2)所有的冷启动节点全部分配到同一个模拟设备。出现上述不合理分配情况，会导致无法正常冷启动，即建模失败无法正常模拟。发明内容本申请实施例的目的在于提供一种模拟ECU节点的分配方法、装置、电子设备及存储介质，以实现合理分配模拟ECU节点，减少分配至第一模拟设备或第二模拟设备的Flexray帧数目超过可支持帧数上限的情况。具体技术方案如下：为实现上述目的，本申请实施例提供了一种模拟ECU节点的分配方法，所述方法包括：确定待分配至模拟设备的模拟ECU节点，并确定各个模拟ECU节点的Flexray帧数目；其中，所述模拟设备接入Flexray车载总线，且所述模拟设备包括第一模拟设备和第二模拟设备；将所述模拟ECU节点划分为冷启动节点和非冷启动节点；其中，所述冷启动节点的Flexray帧包含启动帧；针对所述冷启动节点，按照Flexray帧数目的降序顺序，依次将每一冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备；针对所述非冷启动节点，按照Flexray帧数目的降序顺序，依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。可选的，在依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备之后，所述方法还包括：若所述第一模拟设备的Flexray帧数目总和、所述第二模拟设备的Flexray帧数目总和均不超过帧数上限，基于所述模拟ECU节点的分配结果进行模拟调试。可选的，若所述第一模拟设备的Flexray帧数目总和超过所述帧数上限、或所述第二模拟设备的Flexray帧数目总和超过所述帧数上限，清空所述第一模拟设备和所述第二模拟设备的已分配模拟ECU节点，并重新分配所述模拟ECU节点。可选的，所述重新分配所述模拟ECU节点的步骤，包括：从所述冷启动节点中确定Flexray帧数目最大的第一冷启动节点和Flexray帧数目次大的第二冷启动节点；将所述第一冷启动节点和所述第二冷启动节点分配至不同的模拟设备；针对除所述第一冷启动节点和所述第二冷启动节点之外的其他模拟ECU节点，按照Flexray帧数目的降序顺序，依次将每一模拟ECU节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。可选的，在依次将每一模拟ECU节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备之后，所述方法还包括：若所述第一模拟设备的Flexray帧数目总和、所述第二模拟设备的Flexray帧数目总和均不超过帧数上限，基于所述模拟ECU节点的分配结果进行模拟调试。可选的，若所述第一模拟设备的Flexray帧数目总和超过所述帧数上限、或所述第二模拟设备的Flexray帧数目总和超过所述帧数上限，进行报错。可选的，所述模拟ECU节点包括：自动驾驶主控电脑单元ADMC、制动助力器模块BBM、中央电子模块CEM、信息娱乐主管单元IHU、辅助限制系统SRS、车辆动力主控单元VDDM、和/或车辆网关模块VGM。为实现上述目的，本申请实施例还提供了一种模拟ECU节点的分配装置，所述装置包括：确定模块，用于确定待分配至模拟设备的模拟ECU节点，并确定各个模拟ECU节点的Flexray帧数目；其中，所述模拟设备接入Flexray车载总线，且所述模拟设备包括第一模拟设备和第二模拟设备；划分模块，用于将所述模拟ECU节点划分为冷启动节点和非冷启动节点；其中，所述冷启动节点的Flexray帧包含启动帧；第一分配模块，用于针对所述冷启动节点，按照Flexray帧数目的降序顺序，依次将每一冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备；第二分配模块，用于针对所述非冷启动节点，按照Flexray帧数目的降序顺序，依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。为实现上述目的，本申请实施例还提供了一种电子设备，包括处理器、通信接口、存储器和通信总线，其中，处理器，通信接口，存储器通过通信总线完成相互间的通信；存储器，用于存放计算机程序；处理器，用于执行存储器上所存放的程序时，实现上述任一方法步骤。为实现上述目的，本申请实施例还提供了一种计算机可读存储介质，所述计算机可读存储介质内存储有计算机程序，所述计算机程序被处理器执行时实现上述任一方法步骤。本申请实施例有益效果：采用本申请实施例提供的模拟ECU节点的分配方法、装置、电子设备及存储介质，确定待分配至模拟设备的模拟ECU节点，并确定各个模拟ECU节点的Flexray帧数目；其中，模拟设备接入Flexray车载总线，且模拟设备包括第一模拟设备和第二模拟设备；将模拟ECU节点划分为冷启动节点和非冷启动节点；其中，冷启动节点的Flexray帧包含启动帧；针对冷启动节点，按照Flexray帧数目的降序顺序，依次将每一冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备；针对非冷启动节点，按照Flexray帧数目的降序顺序，依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。可见，按照Flexray帧数目的降序顺序，优先分配冷启动节点，保证冷启动节点均匀分布在第一模拟设备和第二模拟设备，提高了系统的鲁棒性。并且，每次将节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备，使第一模拟设备和第二模拟设备的已分配Flexray帧数目尽可能维持在相对平衡的状态，大大减少了分配至第一模拟设备或第二模拟设备的Flexray帧数目超过可支持帧数上限的情况。当然，实施本申请的任一产品或方法并不一定需要同时达到以上所述的所有优点。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，还可以根据这些附图获得其他的实施例。图1为本申请实施例提供的模拟ECU节点的分配方法的一种流程示意图；图2为本申请实施例提供的模拟系统框架的一种示意图；图3为本申请实施例提供的模拟ECU节点的分配方法的另一种流程示意图；图4为本申请实施例提供的模拟ECU节点的分配装置的一种结构示意图；图5为本申请实施例提供的电子设备的一种结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员基于本申请所获得的所有其他实施例，都属于本申请保护的范围。为了便于理解，下面结合例子对现有技术中基于贪婪算法的ECU节点分配方案进行介绍。作为一个示例，模拟ECU节点的类型和Flexray帧数目可以参见下表1。如表1所示，需要模拟的ECU节点包括：ADMC、BBM、CEM、IHU、SRS、VDDM、VGM。各个模拟ECU节点的Flexray帧数目如表1所示。模拟ECU节点ADMCBBMCEMIHUSRSVDDMVGM冷启动节点YYYYFlexray帧数目3317435465024表1若第一模拟设备和第二模拟设备可支持的帧数上限均为120，则采用现有技术中基于贪婪算法的ECU节点分配方案，按照表1中模拟ECU节点的顺序，依次分配至第一模拟设备，如果超出帧数上限120，再分配至第二模拟设备。也就是说，依次将ADMC、BBM、CEM分配至第一模拟设备，此时第一模拟设备的Flexray帧数目总和为33+17+43＝93；如果将IHU也分配至第一模拟设备，到导致第一模拟设备的Flexray帧数目总和超出帧数上限，因此将IHU分配至第二模拟设备。基于同样的原则，将SRS分配至第一模拟设备，将VDDM分配至第二模拟设备。则第一模拟设备的Flexray帧数目总和为33+17+43+6＝99；第二模拟设备的Flexray帧数目总和为54+50＝104；则最后的VGM节点无论分配至第一模拟设备还是第二模拟设备，都会导致Flexray帧数目总和超出帧数上限。可见，采用现有的基于贪婪算法的ECU节点分配方案，容易出现ECU节点分配不合理的情况导致无法正常冷启动、建模失败的技术问题。为了解决采用现有的ECU节点分配方案，容易出现ECU节点分配不合理的情况导致无法正常冷启动、建模失败的技术问题，本申请实施例提供了一种模拟ECU节点的分配方法、装置、电子设备及存储介质。参见图1，图1为本申请实施例提供的模拟ECU节点的分配方法的一种流程示意图，如图1所示，方法可以包括以下步骤：S101：确定待分配至模拟设备的模拟ECU节点，并确定各个模拟ECU节点的Flexray帧数目；其中，模拟设备接入Flexray车载总线，且模拟设备包括第一模拟设备和第二模拟设备。本申请实施例中，由于Flexray总线采用TDMA的通信方式，在执行冷启动过程中至少需要两个冷启动节点，且两个冷启动节点分别处于两个模拟设备，其中冷启动节点是能够发送启动帧的节点。也就是说，需要两个模拟设备，并且每个模拟设备都至少分配一个冷启动节点。整个模拟系统框架如图2所示，图2为本申请实施例提供的模拟系统框架的一种示意图，如图2所示，在模拟过程中，两个模拟设备分别模拟不同的ECU节点，通过UART接收上位机发送的报文，然后通过Flexray车载总线将报文发出。在开始模拟之前，需要将模拟ECU节点分配至两个模拟设备，模拟ECU节点是需要模拟的节点。对于不需要模拟的ECU节点，无需进行分配。需要模拟的ECU节点和不需要模拟的ECU节点可以由用户自定义。本步骤中，确定待分配至模拟设备的模拟ECU节点，并确定各个模拟ECU节点的Flexray帧数目。作为一个示例，模拟ECU节点的类型和Flexray帧数目可以参见上表1。如表1所示，需要模拟的ECU节点包括：ADMC、BBM、CEM、IHU、SRS、VDDM和VGM。各个模拟ECU节点的Flexray帧数目如表1所示。S102：将模拟ECU节点划分为冷启动节点和非冷启动节点；其中，冷启动节点的Flexray帧包含启动帧。本申请实施例中，以模拟ECU节点的Flexray帧是否包含启动帧为依据，将模拟ECU节点划分为冷启动节点和非冷启动节点。上例中，CEM、IHU、VDDM和VGM是冷启动节点，也就是说，这四个模拟ECU节点的Flexray帧中包含启动帧，在冷启动过程中启动帧用于触发其他节点启动。ADMC、BBM和SRS是非冷启动节点。S103：针对冷启动节点，按照Flexray帧数目的降序顺序，依次将每一冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。本申请实施例中，为了尽可能的将冷启动节点均匀分配至第一模拟设备和第二模拟设备，提高系统鲁棒性，可以优先分配冷启动节点。具体的，基于Flexray帧数目的大小，将冷启动节点降序排序，则上例中降序排序为：IHU、VDDM、CEM、YGM。随后按照降序顺序，依次分配每一冷启动节点，分配的依据为：将每一冷启动节点分配至当前已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。具体的，在分配Flexray帧数目最大的IHU节点，可以随机分配至第一模拟设备或第二模拟设备。假设IHU节点被分配至第一模拟设备，在分配VDDM节点时，当前第一模拟设备已分配Flexray帧数目总和为54，第二模拟设备已分配Flexray帧数目总和为0，因此将VDDM节点分配至第二模拟设备；在分配CEM节点时，当前第一模拟设备已分配Flexray帧数目总和为54，当前第二模拟设备已分配Flexray帧数目总和为50，因此将CEM节点分配至第二模拟设备。在分配YGM节点时，当前第一模拟设备已分配Flexray帧数目总和为54，当前第二模拟设备已分配Flexray帧数目总和为50+43＝93，因此将YGM节点分配至第一模拟设备。至此，冷启动节点分配完毕。S104：针对非冷启动节点，按照Flexray帧数目的降序顺序，依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。冷启动节点分配完毕之后，分配非冷启动节点。具体的，基于Flexray帧数目的大小，将非冷启动节点降序排序，则上例中降序排序为：ADMC、BBM、SRS。随后按照降序顺序，依次分配每一非冷启动节点，分配的依据为：将每一非冷启动节点分配至当前已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。具体的，在分配ADMC节点时，当前第一模拟设备已分配Flexray帧数目总和为54+24＝78，当前第二模拟设备已分配Flexray帧数目总和为50+43＝93，因此将ADMC节点分配至第一模拟设备。在分配BBM节点时，当前第一模拟设备已分配Flexray帧数目总和为54+24+33＝111，当前第二模拟设备已分配Flexray帧数目总和为50+43＝93，因此将ADMC节点分配至第二模拟设备。在分配SRS节点时，当前第一模拟设备已分配Flexray帧数目总和为54+24+33＝111，当前第二模拟设备已分配Flexray帧数目总和为50+43+17＝110，因此将ADMC节点分配至第二模拟设备。最终的分配结果为：分配至第一模拟设备的模拟ECU节点包括IHU节点、VGM节点、ADMC节点；分配至第二模拟设备的模拟ECU节点包括VDDM节点、CEM节点、BBM节点、SRS节点。可见，冷启动节点均匀分布在第一模拟设备和第二模拟设备，并且第一模拟设备和第二模拟设备的Flexray帧数目总和分别为111和116，均未超出帧数上限120，能够进行正常冷启动和模拟仿真。采用本申请实施例提供的模拟ECU节点的分配方法，确定待分配至模拟设备的模拟ECU节点，并确定各个模拟ECU节点的Flexray帧数目；其中，模拟设备接入Flexray车载总线，且模拟设备包括第一模拟设备和第二模拟设备；将模拟ECU节点划分为冷启动节点和非冷启动节点；其中，冷启动节点的Flexray帧包含启动帧；针对冷启动节点，按照Flexray帧数目的降序顺序，依次将每一冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备；针对非冷启动节点，按照Flexray帧数目的降序顺序，依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。可见，按照Flexray帧数目的降序顺序，优先分配冷启动节点，保证冷启动节点均匀分布在第一模拟设备和第二模拟设备，提高了系统的鲁棒性。并且，每次将节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备，使第一模拟设备和第二模拟设备的已分配Flexray帧数目尽可能维持在相对平衡的状态，大大减少了分配至第一模拟设备或第二模拟设备的Flexray帧数目超过可支持帧数上限的情况。在本申请的一个实施例中，在执行S104之后，判断第一模拟设备的Flexray帧数目总和、第二模拟设备的Flexray帧数目总和是否超过帧数上限。若第一模拟设备的Flexray帧数目总和、第二模拟设备的Flexray帧数目总和均不超过帧数上限，说明节点分配的结果符合要求，则基于模拟ECU节点的分配结果进行冷启动，并进行模拟调试即可。在本申请的一个实施例中，若第一模拟设备的Flexray帧数目总和超过帧数上限、或第二模拟设备的Flexray帧数目总和超过帧数上限，清空第一模拟设备和第二模拟设备的已分配模拟ECU节点，并重新分配模拟ECU节点。具体的，若第一模拟设备的Flexray帧数目总和超过帧数上限、或第二模拟设备的Flexray帧数目总和超过帧数上限，说明节点分配的结果不符合要求，需要重新分配。为了便于理解，以表2为例进行说明。如表2所示，需要模拟的ECU节点包括：ADMC、BBM、CEM、IHU、SRS、VDDM、VGM。各个模拟ECU节点的Flexray帧数目如表2所示。模拟ECU节点ADMCBBMCEMIHUSRSVDDMVGM冷启动节点YYYYFlexray帧数目3328435445024表2若按照图1所示的步骤进行分配：最终分配至第一模拟设备的ECU节点包括：IHU、VGM、ADMC和SRS，Flexray帧总数目为54+24+33+4＝115；分配至第二模拟设备的ECU节点包括：VDDM、CEM和BBM，Flexray帧总数目为50+43+28＝121。可见，第二模拟设备的Flexray帧总数目超过了可支持的帧数上限120，说明采用图1所示的分配方法，最终的节点分配结果不符合要求。在本申请的一个实施例中，参见图3，图3为本申请实施例提供的模拟ECU节点的分配方法的另一种流程示意图，如图3所示，重新分配模拟ECU节点的步骤，具体包括：S301：从冷启动节点中确定Flexray帧数目最大的第一冷启动节点和Flexray帧数目次大的第二冷启动节点。首先，从冷启动节点中Flexray帧数目最大的第一冷启动节点和Flexray帧数目次大的第二冷启动节点。表2所示实施例中，Flexray帧数目最大的第一冷启动节点为IHU，Flexray帧数目次大的第二冷启动节点为VDDM。S302：将第一冷启动节点和第二冷启动节点分配至不同的模拟设备。为了保证第一模拟设备和第二模拟设备中至少包含一个冷启动节点，将第一冷启动节点和第二冷启动节点分配至不同的模拟设备。作为一个示例，将第一冷启动节点分配至第一模拟设备，将第二冷启动节点分配至第二模拟设备。S303：针对除第一冷启动节点和第二冷启动节点之外的其他模拟ECU节点，按照Flexray帧数目的降序顺序，依次将每一模拟ECU节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。随后，针对除第一冷启动节点和第二冷启动节点之外的其他模拟ECU节点，按照Flexray帧数目的大小降序排序。排序结果为：CEM、ADMC、VGM、BBM、SRS。随后按照降序顺序依次分配，分配的依据为：将每一模拟ECU节点分配至当前已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。最终的分配结果为：分配至第一模拟设备的模拟ECU节点包括IHU节点、ADMC节点、VGM节点，Flexray帧数目总和为54+33+24＝111；分配至第二模拟设备的模拟ECU节点包括VDDM节点、CEM节点、BBM节点和SRS节点，Flexray帧数目总和为50+43+17+6＝116。可见，采用图3所示的分配方法重新进行节点分配，第一模拟设备和第二模拟设备的Flexray帧数目总和均未超出可支持的帧数上限120。本申请实施例中，如果优先分配冷启动节点的分配结果不符合要求，重新进行模拟ECU节点的分配。在重新分配模拟ECU节点的过程中，从冷启动节点中确定Flexray帧数目最大的第一冷启动节点和Flexray帧数目次大的第二冷启动节点；将第一冷启动节点和第二冷启动节点分配至不同的模拟设备；针对除第一冷启动节点和第二冷启动节点之外的其他模拟ECU节点，按照Flexray帧数目的降序顺序，依次将每一模拟ECU节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。从而，保证第一模拟设备和第二模拟设备均至少包含一个冷启动节点，并且在分配其他模拟ECU节点时，每次将节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备，使第一模拟设备和第二模拟设备的已分配Flexray帧数目尽可能维持在相对平衡的状态。采用这种分配方式，只要满足以下三个条件即可实现模拟ECU节点的合理分配，进而能够正常冷启动并进行模拟调试：1)存在两个及以上的冷启动节点。2)各模拟ECU节点的Flexray帧数目总和不超过两个模拟设备可支持的帧数上限之和。3)存在可分配方案，即模拟ECU节点分成两组，每组的节点下Flexray帧数目总和小于单个模拟设备可支持的帧数上限。本申请的一个实施例中，在执行S303之后，判断第一模拟设备的Flexray帧数目总和、第二模拟设备的Flexray帧数目总和是否超过帧数上限。若第一模拟设备的Flexray帧数目总和、第二模拟设备的Flexray帧数目总和均不超过帧数上限，说明节点分配的结果符合要求，则基于模拟ECU节点的分配结果进行冷启动，并进行模拟调试即可。本申请的一个实施例中，若第一模拟设备的Flexray帧数目总和超过帧数上限、或第二模拟设备的Flexray帧数目总和超过帧数上限，说明不存在符合要求的分配方案，则进行报错，即提示用户模拟ECU节点的仿真数据不合理，无法正常模拟调试。为了便于理解，下面结合具体步骤对本申请实施例提供的模拟ECU节点的分配方法进行进一步说明。步骤1：确定需要模拟的ECU节点。步骤2：统计各个模拟ECU节点的Flexray帧数目。步骤3：将模拟ECU节点划分为冷启动节点和非冷启动节点。步骤4：对于冷启动节点，按照Flexray帧数目进行降序排列，且分别命名为MaxNode1，MaxNode2，MaxNode3等。步骤5：将Flexray帧数目最大的节点MaxNode1分配给第一模拟设备SimulationBox1；将节点MaxNode2分配给第二模拟设备SimulationBox2。步骤6：比较SimulationBox1与SimulationBox2的已分配Flexray帧数目，数量较少者命名为SimulationBox_Min。步骤7：剩余未分配的冷启动节点中，Flexray帧数目最多的节点分配给SimulationBox_Min，并返回步骤6，直到所有的冷启动节点都分配完毕。步骤8：对于非冷启动节点，按照节点下Flexray帧数目进行降序排列，且分别命名为MaxNodeA，MaxNodeB，MaxNodeC等。步骤9：比较SimulationBox1与SimulationBox2的已分配Flexray帧数目，数量较少者命名为SimulationBox_Min。步骤10：剩余未分配的非冷启动节点中，Flexray帧数目最多的节点分配给SimulationBox_Min，返回步骤9，直到所有的非冷启动节点都分配完毕。步骤11：判断SimulationBox1和SimulationBox2的Flexray帧数目是否超过可支持的帧数上限。如果没有超过上限，则跳转到步骤19，否则执行步骤12。步骤12：清空SimulationBox1和SimulationBox2已分配的所有节点，包括冷启动节点和非冷启动节点。步骤13：对于冷启动节点，按照节点下的Flexray帧数目进行降序排列，并且挑选Flexray帧数目最大的两个节点，分别命名为MaxNode1和MaxNode2。步骤14：将MaxNode1分配给SimulationBox1；将MaxNode2分配给SimulationBox2。步骤15：将剩余的所有节点，包括冷启动节点和非冷启动节点，按照节点下的Flexray帧数目进行降序排列，且分别命名为MaxNodeA1，MaxNodeA2，MaxNodeA3等。步骤16：比较SimulationBox1与SimulationBox2的Flexray帧数目，数量较少者命名为SimulationBox_Min。步骤17：剩余未分配的节点中，Flexray帧数目最多的节点分配给SimulationBox_Min，返回步骤16，直到所有的节点都分配完毕。步骤18：判断SimulationBox1和SimulationBox2的Flexray帧数目是否超过可支持的帧数上限。如果没有超过上限，则跳转到步骤19，否则执行步骤20。步骤19：基于模拟ECU节点的分配结果进行模拟调试。步骤20：仿真数据错误，上报用户。可见，本申请实施例中，按照Flexray帧数目的降序顺序，优先分配冷启动节点，保证冷启动节点均匀分布在第一模拟设备和第二模拟设备，提高了系统的鲁棒性。并且，每次将节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备，使第一模拟设备和第二模拟设备的已分配Flexray帧数目尽可能维持在相对平衡的状态，大大减少了分配至第一模拟设备或第二模拟设备的Flexray帧数目超过可支持帧数上限的情况。如果优先分配冷启动节点的分配结果不符合要求，重新进行模拟ECU节点的分配。在重新分配模拟ECU节点的过程中，从冷启动节点中确定Flexray帧数目最大的第一冷启动节点和Flexray帧数目次大的第二冷启动节点；将第一冷启动节点和第二冷启动节点分配至不同的模拟设备；针对除第一冷启动节点和第二冷启动节点之外的其他模拟ECU节点，按照Flexray帧数目的降序顺序，依次将每一模拟ECU节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。从而，保证第一模拟设备和第二模拟设备均至少包含一个冷启动节点，并且在分配其他模拟ECU节点时，每次将节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备，使第一模拟设备和第二模拟设备的已分配Flexray帧数目尽可能维持在相对平衡的状态。采用本申请实施例提供的模拟ECU节点的分配方法，只要满足以下三个条件即可实现模拟ECU节点的合理分配，进而能够正常冷启动并进行模拟调试：1)存在两个及以上的冷启动节点。2)各模拟ECU节点的Flexray帧数目总和不超过两个模拟设备可支持的帧数上限之和。3)存在可分配方案，即模拟ECU节点分成两组，每组的节点下Flexray帧数目总和小于单个模拟设备可支持的帧数上限。本申请还提供了一种模拟ECU节点的分配装置，图4为本申请实施例提供的模拟ECU节点的分配装置的一种结构示意图，参见图4，装置可以包括：确定模块401，用于确定待分配至模拟设备的模拟ECU节点，并确定各个模拟ECU节点的Flexray帧数目；其中，所述模拟设备接入Flexray车载总线，且所述模拟设备包括第一模拟设备和第二模拟设备；划分模块402，用于将所述模拟ECU节点划分为冷启动节点和非冷启动节点；其中，所述冷启动节点的Flexray帧包含启动帧；第一分配模块403，用于针对所述冷启动节点，按照Flexray帧数目的降序顺序，依次将每一冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备；第二分配模块404，用于针对所述非冷启动节点，按照Flexray帧数目的降序顺序，依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。采用本申请实施例提供的模拟ECU节点的分配装置，确定待分配至模拟设备的模拟ECU节点，并确定各个模拟ECU节点的Flexray帧数目；其中，模拟设备接入Flexray车载总线，且模拟设备包括第一模拟设备和第二模拟设备；将模拟ECU节点划分为冷启动节点和非冷启动节点；其中，冷启动节点的Flexray帧包含启动帧；针对冷启动节点，按照Flexray帧数目的降序顺序，依次将每一冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备；针对非冷启动节点，按照Flexray帧数目的降序顺序，依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。可见，按照Flexray帧数目的降序顺序，优先分配冷启动节点，保证冷启动节点均匀分布在第一模拟设备和第二模拟设备，提高了系统的鲁棒性。并且，每次将节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备，使第一模拟设备和第二模拟设备的已分配Flexray帧数目尽可能维持在相对平衡的状态，大大减少了分配至第一模拟设备或第二模拟设备的Flexray帧数目超过可支持帧数上限的情况。本申请实施例还提供了一种电子设备，如图5所示，包括处理器501、通信接口502、存储器503和通信总线504，其中，处理器501，通信接口502，存储器503通过通信总线504完成相互间的通信，存储器503，用于存放计算机程序；处理器501，用于执行存储器503上所存放的程序时，实现如下步骤：确定待分配至模拟设备的模拟ECU节点，并确定各个模拟ECU节点的Flexray帧数目；其中，所述模拟设备接入Flexray车载总线，且所述模拟设备包括第一模拟设备和第二模拟设备；将所述模拟ECU节点划分为冷启动节点和非冷启动节点；其中，所述冷启动节点的Flexray帧包含启动帧；针对所述冷启动节点，按照Flexray帧数目的降序顺序，依次将每一冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备；针对所述非冷启动节点，按照Flexray帧数目的降序顺序，依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。上述电子设备提到的通信总线可以是外设部件互连标准总线或扩展工业标准结构总线等。该通信总线可以分为地址总线、数据总线、控制总线等。为便于表示，图中仅用一条粗线表示，但并不表示仅有一根总线或一种类型的总线。通信接口用于上述电子设备与其他设备之间的通信。存储器可以包括随机存取存储器，也可以包括非易失性存储器，例如至少一个磁盘存储器。可选的，存储器还可以是至少一个位于远离前述处理器的存储装置。上述的处理器可以是通用处理器，包括中央处理器、网络处理器等；还可以是数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。采用本申请实施例提供的电子设备，确定待分配至模拟设备的模拟ECU节点，并确定各个模拟ECU节点的Flexray帧数目；其中，模拟设备接入Flexray车载总线，且模拟设备包括第一模拟设备和第二模拟设备；将模拟ECU节点划分为冷启动节点和非冷启动节点；其中，冷启动节点的Flexray帧包含启动帧；针对冷启动节点，按照Flexray帧数目的降序顺序，依次将每一冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备；针对非冷启动节点，按照Flexray帧数目的降序顺序，依次将每一非冷启动节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备。可见，按照Flexray帧数目的降序顺序，优先分配冷启动节点，保证冷启动节点均匀分布在第一模拟设备和第二模拟设备，提高了系统的鲁棒性。并且，每次将节点分配至已分配Flexray帧数目总和最小的第一模拟设备或第二模拟设备，使第一模拟设备和第二模拟设备的已分配Flexray帧数目尽可能维持在相对平衡的状态，大大减少了分配至第一模拟设备或第二模拟设备的Flexray帧数目超过可支持帧数上限的情况。在本申请提供的又一实施例中，还提供了一种计算机可读存储介质，该计算机可读存储介质内存储有计算机程序，所述计算机程序被处理器执行时实现上述任一模拟ECU节点的分配方法的步骤。在本申请提供的又一实施例中，还提供了一种包含指令的计算机程序产品，当其在计算机上运行时，使得计算机执行上述实施例中任一模拟ECU节点的分配方法。在上述实施例中，可以全部或部分地通过软件、硬件、固件或者其任意组合来实现。当使用软件实现时，可以全部或部分地以计算机程序产品的形式实现。所述计算机程序产品包括一个或多个计算机指令。在计算机上加载和执行所述计算机程序指令时，全部或部分地产生按照本申请实施例所述的流程或功能。所述计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。所述计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，所述计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线)或无线方式向另一个网站站点、计算机、服务器或数据中心进行传输。所述计算机可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集成的服务器、数据中心等数据存储设备。所述可用介质可以是磁性介质，、光介质、或者半导体介质)等。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本说明书中的各个实施例均采用相关的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于模拟ECU节点的分配装置、电子设备、计算机可读存储介质、计算机程序产品实施例而言，由于其基本相似于模拟ECU节点的分配方法实施例，所以描述的比较简单，相关之处参见模拟ECU节点的分配方法实施例的部分说明即可。以上所述仅为本申请的较佳实施例，并非用于限定本申请的保护范围。凡在本申请的精神和原则之内所作的任何修改、等同替换、改进等，均包含在本申请的保护范围内。
