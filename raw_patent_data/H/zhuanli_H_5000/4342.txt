标题title
频响平坦度校准方法及装置
摘要abst
本发明提供一种频响平坦度校准方法及装置。该方法包括：基于上一次频响测试确定的频率间隔，确定本次频响测试的中心频率；基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线；基于所述本次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔；根据每次频响测试获取的频响曲线确定校准补偿系数；其中，所述频率间隔估计算法是基于所述每次频响测试获取的频响曲线对应的相关函数确定的。本发明提供的频响平坦度校准方法及装置，可以提高频响校准精度和频响校准效率。
权利要求书clms
1.一种频响平坦度校准方法，其特征在于，包括：基于上一次频响测试确定的频率间隔，确定本次频响测试的中心频率；基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线；基于所述本次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔；根据每次频响测试获取的频响曲线确定校准补偿系数；其中，所述频率间隔估计算法是基于所述每次频响测试获取的频响曲线对应的相关函数确定的。2.根据权利要求1所述的频响平坦度校准方法，其特征在于，所述基于所述本次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔，包括：在所述本次频响测试的频响曲线对应的相关函数值小于目标阈值的情况下，确定预估频率间隔；将所述预估频率间隔中的最小值确定为所述下一次频响测试的频率间隔。3.根据权利要求1所述的频响平坦度校准方法，其特征在于，所述基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线，包括：基于所述本次频响测试的中心频率和对应的频率间隔，确定对应的标准校准信号；将信号源输出的标准校准信号输入至待校准设备，获取第一同相正交IQ数据；将所述待校准设备输出的标准校准信号输入至目标信号分析设备，确定第二IQ数据；基于所述第一IQ数据，确定所述待校准设备的接收通道对应的第一频响曲线；基于所述第二IQ数据，确定所述待校准设备的发送通道对应的第二频响曲线。4.根据权利要求3所述的频响平坦度校准方法，其特征在于，所述将信号源输出的标准校准信号输入至待校准设备，包括：在所述信号源的带宽小于所述待校准设备的带宽的情况下，对所述标准校准信号进行分段处理，并将分段后的标准校准信号输入至所述待校准设备。5.根据权利要求3所述的频响平坦度校准方法，其特征在于，所述将所述待校准设备输出的标准校准信号输入至目标信号分析设备，包括：在所述目标信号分析设备的带宽小于所述待校准设备的带宽的情况下，对所述标准校准信号进行分段处理，将分段后的标准校准信号输入至所述目标信号分析设备。6.根据权利要求1-5任一项所述的频响平坦度校准方法，其特征在于，所述根据每次频响测试获取的频响曲线确定校准补偿系数包括：根据所述每次频响测试获取的频响曲线，确定待校准设备中校准滤波器的频响曲线；基于所述校准滤波器的频响曲线，确定所述校准滤波器的校准补偿系数。7.一种频响平坦度校准装置，其特征在于，包括：第一确定模块，用于基于上一次频响测试确定的频率间隔，确定本次频响测试的中心频率；获取模块，用于基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线；第二确定模块，用于基于所述本次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔；校准模块，用于根据每次频响测试获取的频响曲线确定校准补偿系数；其中，所述频率间隔估计算法是基于所述每次频响测试获取的频响曲线对应的相关函数确定的。8.根据权利要求7所述的频响平坦度校准装置，其特征在于，所述第二确定模块，具体用于：在所述本次频响测试的频响曲线对应的相关函数值小于目标阈值的情况下，确定预估频率间隔；将所述预估频率间隔中的最小值确定为所述下一次频响测试的频率间隔。9.一种电子设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求1至6任一项所述频响平坦度校准方法的步骤。10.一种非暂态计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至6任一项所述频响平坦度校准方法的步骤。
说明书desc
技术领域本发明涉及宽带设备校准技术领域，尤其涉及一种频响平坦度校准方法及装置。背景技术目前对于待校准设备存在如下两类校准方案：一、采用比待校准设备带宽更大的信号分析设备或者信号源进行校准。而在研发超宽带仪器时，并没有带宽能与之匹配的商用信号分析设备或者信号源可供选择。此外，校准过程中会采用固定采样频率间隔，导致生成的数据量大，校准过程耗时长；或者是采用插值方法拟合频响曲线，再从中寻找频响偏差更大的新的采样频率集合，然后再次进行频响曲线数据采集，也会造成频响平坦度校准时间耗时长。二、通过设备内部增加自校准通道的硬件电路来实现自适应校准。而在设备内部增加自校准通道的硬件电路，会使设备的成本增加以及设备体积重量增大，并且自身校准通道同样存在频响不平坦的问题。由于自校准通道的平坦度性能还需要额外的校准，增加了整个校准过程的工作量，校准时间加长，同时也受限于校准仪器的性能。因此，最后的校准不确定度叠加了校准仪器和自校准通道两方面的测量误差，导致校准精度较低。发明内容本发明提供一种频响平坦度校准方法及装置，用以解决现有技术中频响校准精度低和频响校准耗时长的技术问题。本发明提供一种频响平坦度校准方法，包括：基于上一次频响测试确定的频率间隔，确定本次频响测试的中心频率；基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线；基于所述本次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔；根据每次频响测试获取的频响曲线确定校准补偿系数；其中，所述频率间隔估计算法是基于所述每次频响测试获取的频响曲线对应的相关函数确定的。在一个实施例中，所述基于所述本次频响测试的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔，包括：在所述本次频响测试的频响曲线对应的相关函数值小于目标阈值的情况下，确定预估频率间隔；将所述预估频率间隔中的最小值确定为所述下一次频响测试的频率间隔。在一个实施例中，所述基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线，包括：基于所述本次频响测试的中心频率和对应的频率间隔，确定对应的标准校准信号；将信号源输出的标准校准信号输入至待校准设备，获取第一同相正交IQ数据；将所述待校准设备输出的标准校准信号输入至目标信号分析设备，确定第二IQ数据；基于所述第一IQ数据，确定所述待校准设备的接收通道对应的第一频响曲线；基于所述第二IQ数据，确定所述待校准设备的发送通道对应的第二频响曲线。在一个实施例中，所述将信号源输出的标准校准信号输入至待校准设备，包括：在所述信号源的带宽小于所述待校准设备的带宽的情况下，对所述标准校准信号进行分段处理，并将分段后的标准校准信号输入至所述待校准设备。在一个实施例中，所述将所述待校准设备输出的标准校准信号输入至目标信号分析设备，包括：在所述目标信号分析设备的带宽小于所述待校准设备的带宽的情况下，对所述标准校准信号进行分段处理，将分段后的标准校准信号输入至所述目标信号分析设备。在一个实施例中，所述根据每次频响测试获取的频响曲线确定校准补偿系数包括：根据所述每次频响测试获取的频响曲线，确定待校准设备中校准滤波器的频响曲线；基于所述校准滤波器的频响曲线，确定所述校准滤波器的校准补偿系数。本发明还提供一种频响平坦度校准装置，包括：第一确定模块，用于基于上一次频响测试确定的频率间隔，确定本次频响测试的中心频率；获取模块，用于基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线；第二确定模块，用于基于所述本次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔；校准模块，用于根据每次频响测试获取的频响曲线确定校准补偿系数；其中，所述频率间隔估计算法是基于所述每次频响测试获取的频响曲线对应的相关函数确定的。本发明还提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现如上述任一种所述频响平坦度校准方法的步骤。本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现如上述任一种所述频响平坦度校准方法的步骤。本发明提供的频响平坦度校准方法及装置，通过根据上一次频响测试确定的频率间隔，动态更新本次频响测试的中心频率，并获取本次频响测试的频响曲线，根据每次频响测试获取的频响曲线可以快速确定校准补偿系数，提高校准效率；还根据每次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔，可以确保每次频响测试中采用的频率间隔为最优频率间隔，从而可以降低校准过程中存储的数据量，还可以提高校准精度，减少校准时间。附图说明为了更清楚地说明本发明或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明提供的频响平坦度校准方法的流程示意图；图2是本发明提供的频响平坦度校准方法的频率间隔算法流程示意图；图3是应用本发明提供的频响平坦度校准系统的模块框图；图4是应用本发明提供的频响平坦度校准方法的流程示意图；图5是本发明提供的频响平坦度校准装置的结构示意图；图6是本发明提供的电子设备的实体结构示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚，下面将结合本发明中的附图，对本发明中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在相关技术中，待校准设备可以包括测量设备或通信设备。待校准设备的不理想的频率响应平坦度，会根据被测信号的不同频率成分引入不同的增益和群延迟，造成信号失真。而理想的频响曲线应当是平直的，信号通过后不产生失真，因此，待校准设备都有必要对频响进行平坦度校准。待校准设备通过设备内部增加自校准通道的硬件电路来实现自适应校准。具体通过如下方式实现：先向待校准设备发送宽带调制训练序列，再通过最小均方或递归最小二乘均衡算法使得误差收敛到最小，获取校准系统稳定后的均衡器系数，即校准滤波器系数。上述方案中不仅校准误差大，并且采用的均衡算法需要经历1个迭代收敛过程，整个校准过程耗时非常长。图1是本发明提供的频响平坦度校准方法的流程示意图。参照图1，本发明提供的频响平坦度校准方法可以包括：步骤110、步骤120、步骤130和步骤140。步骤110、基于上一次频响测试确定的频率间隔，确定本次频响测试的中心频率；步骤120、基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线；步骤130、基于所述本次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔；步骤140、根据每次频响测试获取的频响曲线确定校准补偿系数；其中，所述频率间隔估计算法是基于所述每次频响测试获取的频响曲线对应的相关函数确定的。需要说明的是，本发明提供的频响平坦度校准方法的执行主体可以是电子设备、电子设备中的部件、集成电路、或芯片。该电子设备可以是移动电子设备，也可以为非移动电子设备。示例性的，移动电子设备可以为平板电脑、笔记本电脑、可穿戴设备、超级移动个人计算机、上网本或者个人数字助理等，非移动电子设备可以为服务器、网络附属存储器、个人计算机等，本发明不作具体限定。下面以计算机执行本发明提供的频响平坦度校准方法为例，详细说明本发明的技术方案。在实际执行中，本发明提供的频响平坦度校准方法可以应用于频响平坦度校准系统，该频响平坦度校准系统可以包括待校准设备、信号源和信号分析设备。待校准设备例如包括：矢量信号源、频谱仪、示波器、任意波形发生器、网络分析仪等宽带测量仪器，或其他通信设备。信号分析设备可以是实时频谱仪、宽带示波器、网络分析仪或者类似的数据采集板卡等设备。可以理解的是，在频响平坦度校准系统启动频响校准之后，初始化待校准设备、信号源和目标信号分析设备。再将待校准设备、信号源和目标信号分析设备的初始中心频率设置为校准频率范围的起点频率StartFreq，并获取对应的初始频响曲线。由于本次测试为系统初始化后的第一次测试，此时的频率间隔暂未确定。则可以将初始频率间隔设置为一个较细的预估频率间隔ΔF1，并根据ΔF1确定第一次测试的中心频率CF1，进而可以确定第一次频响测试的频响曲线H。基于第一次频响测试获取的频响曲线和频率间隔估计算法，可以确定下一次频响测试的频率间隔。其中，ΔF1可以根据需求设置，通常设置在10MHz以内。频响曲线H为二维曲线，在不同的CF下频率响应H都是不同的。H中的f表示频率，H是以ΔF为频率间隔进行采样和保存的。可选地，在步骤110中，在进行第一次频响测试后，可以获取第二次频响测试的频率间隔。则在后续每一次的频响测试中，均可以基于上一次频响测试确定的频率间隔，确定本次频响测试的中心频率。例如：根据第一次频响测试确定第二次频响测试的频率间隔ΔF2，则可以确定第二次频响测试的中心频率为CF2。可选地，在步骤120中，而根据本次频响测试的中心频率和对应的频率间隔，可以获取所述本次频响测试的频响曲线。例如：在第二次频响测试的中心频率为CF2之后，以CF2和ΔF2进行频响测试，并保存第二次频响测试的频响曲线。可选地，在步骤130中，在确定本次频响测试获取的频响曲线之后，运行频率间隔估计算法，确定下一次频响测试的频率间隔。例如：在确定第二次频响测试的频响曲线之后，可以根据频率间隔估计算法确定第三次频响测试的频率间隔ΔF3。根据ΔF3可以确定第三次频响测试的中心频率为CF3。再以CF3和ΔF3进行频响测试，并保存第三次频响测试的频响曲线。依次类推，每次频响测试后，均会确定一个新的频率间隔。频率间隔在校准过程中，是一个动态且在逐渐优化的参数。其中，频率间隔估计算法可以分析频点的相关性。连续采样的两个频率点之间相关性较大说明频率间隔比较合适，采样效果好。相关性较低说明频率间隔过大，采样精度不够。频率间隔估计算法除了可以采用相关性计算，也可以采用相干性计算，还可以归一化相关性计算。相关性表示两相关变量之间线性关系的强度和方向，在通信技术领域，相关性可以表示信号之间的相似程度。而相干性与相关性计算得到的信息非常相似，都是衡量两个变量之间的相关程度，相干性除了时域计算，可以在其他变换域上给出更多的信息，而相关性多用于普通的数组计算和时域信号。可选地，在步骤140中，将每次频响测试获取的频响曲线保存在待校准设备中。并在CF达到终止频率StopFreq的情况下，完成待校准设备的频响测试。在待校准设备正常工作时，可以从校准表中检索校准数据对待校准设备的频响曲线，并根据待校准设备的频响曲线确定校准补偿系数。可选地，在本发明提供的实施例中，频响曲线可以基于中心频率、增益或温度等因素变化。校准表中可以包含多维校准数据，不同因素对应有不同的频响曲线校准表，具体校准补偿过程可以基于实际情况确定，本发明实施例对此不作具体限定。需要说明的是，本发明实施例提供的频响平坦度校准系统扫频范围可以覆盖10Hz～60GHz，即频响平坦度校准系统的中心频率可以从10Hz调整到60GHz，频响平坦度校准系统的采样带宽可以达到500MHz、1GHz或2GHz。例如：5G信号带宽为200MHz，WiFi信号带宽为400MHz，则频响平坦度校准系统的采样带宽需要达到500MHz或1G。对于采样带宽，可以设置不同数量的采样点，例如可以设置的采样点数量为10个、20个或100个等。本发明实施例中的频率间隔估计算法可以用于估计此带宽中需要的采样点数量，以提高采样精度，避免采集数据量过大。本发明提供的频响平坦度校准方法，通过根据上一次频响测试确定的频率间隔，动态更新本次频响测试的中心频率，并获取本次频响测试的频响曲线，根据每次频响测试获取的频响曲线可以快速确定校准补偿系数，提高校准效率；还根据每次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔，可以确保每次频响测试中采用的频率间隔为最优频率间隔，从而可以降低校准过程中存储的数据量，还可以提高校准精度，减少校准时间。在一个实施例中，所述基于所述本次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔，包括：在所述本次频响测试的频响曲线对应的相关函数值小于目标阈值的情况下，确定预估频率间隔；将所述预估频率间隔中的最小值确定为所述下一次频响测试的频率间隔。可选地，如图2所示，根据初始频响曲线H,可以计算相关函数。相关函数为：corr＝∑H*conj)；其中，corr为相关函数，x为频率间隔。相关函数反映的是频点间的相关性，相关函数值在0～1之间。相关函数值越接近0，说明连续采样的两个频点之间相关性较小，频率间隔过大；相关函数值越接近1，说明连续采样的两个频点之间相关性越大，频率间隔越小。在实际校准过程中，频率间隔过大会影响校准精度，而频率间隔过小，会导致采集数据量过大，增加校准时长。因此，需要对相关函数值设置一个目标阈值，保证相关性不能过大，也不能过小，并且可以确保能够得到一个最优的频率间隔，在保证采集到所有信息的同时，也不会使得采集的数据量过大。可选地，确定相关函数值后，判断相关函数值是否小于目标阈值。在相关函数值corr小于目标阈值Threshold的情况下，可以确定多个自变量x，即预估频率间隔，并将预估频率间隔中的最小值确定为下一次频响测试的频率间隔。其中，下一次频响测试的频率间隔ΔF＝min{corr＜Threshold}，即下一次频响测试的频率间隔ΔF为使相关函数值小于目标阈值，且最接近目标阈值时的自变量。在现有技术中，采用固定采样频率间隔获取频响曲线，造成数据量大，校准过程耗时长，且校准效率低。本发明提供的频响平坦度校准方法，通过频率间隔估计算法可以快速确定下一次频响测试的频率间隔，既能保证校准精度，又能缩短校准时间，降低存储数据量。在一个实施例中，在步骤120中，所述基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线，包括：步骤1201、基于所述本次频响测试的中心频率和对应的频率间隔，确定对应的标准校准信号；步骤1202、将信号源输出的标准校准信号输入至待校准设备，获取第一同相正交IQ数据；将所述待校准设备输出的标准校准信号输入至目标信号分析设备，获取第二IQ数据；步骤1203、基于所述第一IQ数据，获取所述待校准设备的接收通道对应的第一频响曲线；基于所述第二IQ数据，获取所述待校准设备的发送通道对应的第二频响曲线。可选地，在步骤1201中，基于本次频响测试的中心频率和对应的频率间隔，可以对应的标准校准信号；标准校准信号即为校准激励信号，例如可以包括：理想梳状谱信号或广义梳状谱信号。可以理解的是，因为理想梳状谱信号在各个频点表现为sin信号，单个sin信号的频谱为正负频率的2根谱线，如果校准激励信号的接收设备和发送设备之间存在频率误差，将影响频响校准精度。在本发明中，定义广义梳状谱信号为具有一定频谱宽度的窄带信号，比如时域的sinc函数，可以在频域产生窄带平顶恒幅的信号，具有抗频偏性能。由于校准过程需要引入复杂算法才能抵抗校准激励信号的接收设备和发送设备之间的频率误差的影响，从而引入广义梳状谱信号，可以简化校准程序。可选地，在步骤1202中，将信号源输出的标准校准信号输入至待校准设备的接收通道，经过变频放大和处理后，获取正交解调后的第一同相正交数据；将待校准设备的发送通道输出的标准校准信号输入至目标信号分析设备，在目标信号分析设备中获取对应的第二IQ数据。由于标准校准信号经过不同的通道后，信号处理过程也不相同，所以可以获取到第一IQ数据和第二IQ数据。其中，信号源可以输出可编程频率范围的理想梳状谱射频信号。信号分析设备可以采集和输出复数形式的IQ数据。可选地，在步骤1203中，分析第一IQ数据和第二IQ数据，可以得到各个频点的幅度和相位信息。由于标准校准信号经过不同的通道后，信号处理过程也不相同，因此，分析第一IQ数据和第二IQ数据可以得到不同的各个频点的幅度和相位信息，再与理想梳状谱信号各个频点的幅度和相位信息做log坐标的差值，即可以得到待校准设备的接收通道对应的第一频响曲线和待校准设备的发送通道对应的第二频响曲线。本发明提供的频响测量方法，可以实现对待校准设备的接收通道和发送通道进行校准，可以有效提升校准效率，简化校准过程。在一个实施例中，所述将信号源输出的标准校准信号输入至待校准设备，包括：在所述信号源的带宽小于所述待校准设备的带宽的情况下，对所述标准校准信号进行分段处理，并将分段后的标准校准信号输入至所述待校准设备。可选地，由于信号源提供的带宽有限，不能匹配所有的待校准设备。例如：若待校准设备为超宽带仪器，在考虑校准成本的情况下，可选择的信号源将非常少。在信号源的带宽小于待校准设备的带宽的情况下，即待校准设备的带宽超过了信号源输出信号的能力范围，则信号源不能直接发送标准校准信号对应的全部频段。此时，可以先对标准校准信号进行分段处理，再通过信号源多次发送分段后的标准校准信号。例如：可以将带宽较大的频段分为3段，信号源第一次发送1/3低频段，第二次发送1/3中频段，第三次发送1/3高频段。其中，信号源分段发送信号的次数与信号源自身支持的带宽以及待校准设备所需的带宽有关。例如：假设信号源支持的带宽为50MHz,若待校准设备的接收通道需要带宽为100MHz的标准校准信号进行校准，则信号源可以分两次向待校准设备发送校准信号，每次发送带宽为50MHz的校准信号，以实现标准校准信号完整频段的发送。可选地，待校准设备可以依次捕获窄带信号源分段发送的窄带校准信号，同步设置校准系统内各个设备的中心频率、调整各频段的幅度增益和相位偏移，可以还原完整的频谱信息，以实现待校准设备通过频响拼接获取标准校准信号。必要时，校准系统可以首先标定矢量信号源的频响特性，这样可以在频响拼接时做相应的补偿。本发明提供的频响平坦度校准方法，通过分段处理标准校准信号，可以实现采用成本较低的窄带信号源模拟发送宽带校准信号，降低校准成本，还可以提高校准系统的通用性；并且窄带仪器的频响平坦度一般要优于宽带仪器，更能保证校准的精确度要求。在一个实施例中，所述将所述待校准设备输出的标准校准信号输入至目标信号分析设备，包括：在所述目标信号分析设备的带宽小于所述待校准设备的带宽的情况下，对所述标准校准信号进行分段处理，将分段后的标准校准信号输入至所述目标信号分析设备。可选地，在目标信号分析设备的带宽小于所述待校准设备的带宽的情况下，即有此时待校准设备可以发送标准校准信号，但是目标信号分析设备能够接收到的信号带宽有限，则目标信号分析设备可以分段捕获待校准设备发送的标准校准信号。例如：待校准设备从发送通道向目标信号分析设备输入带宽为100MHz的标准校准信号，目标信号分析设备只能接收带宽为50MHz的信号，则目标信号分析设备可以将100MHz分为两段，并通过两次信号获取以完成标准校准信号完整频段的获取。可选地，可以使用窄带目标信号分析设备分段捕获待校准设备发送的宽带校准信号，同步设置校准系统内各个设备的中心频率、调整各频段的幅度增益和相位偏移，可以还原完整的频谱信息，以实现目标信号分析设备通过频响拼接接收到标准校准信号。必要时，校准系统可以首先标定矢量信号源的频响特性，这样可以在频响拼接时做相应的补偿。本发明提供的频响平坦度校准方法，通过分段处理标准校准信号，可以实现采用成本较低的窄带目标信号分析设备模拟接收待校准设备发送通道输出的宽带校准信号，降低校准成本，还可以提高校准系统的通用性；并且窄带仪器的频响平坦度一般要优于宽带仪器，更能保证校准的精确度要求。在一个实施例中，所述根据每次频响测试获取的频响曲线确定校准补偿系数包括：根据所述每次频响测试获取的频响曲线，确定待校准设备中校准滤波器的频响曲线；基于所述校准滤波器的频响曲线，确定所述校准滤波器的校准补偿系数。可选地，在确定每次频响测试获取的频响曲线之后，再采用校准补偿算法对待校准设备的收发通道进行补偿。即有待校准设备中的校准滤波器的频响曲线和待校准设备的目标频响曲线互为倒数，即有：其中，C为校准滤波器的频响曲线，H为待校准设备的目标频响曲线。可选地，对校准滤波器的频响曲线C做逆快速傅里叶变换，则可以获取校准滤波器的时域系数c＝ifft{C}，最后对时域系数去除Gibbs效应以后，得到最终校准补偿系数。本发明提供的频响平坦度校准方法，可以实现自动测试和校准，解决了测试参数多、测试量大的问题，实现了在任意频率范围内的频响平坦度校准。在一个实施例中，如图3所示，本发明提供一种频响平坦度校准系统。该频响平坦度校准系统以待校准设备为核心，包括了测控计算机、矢量信号源、实时频谱仪，以及网络链接设备。测控计算机使用以太网和待校准设备、矢量信号源、实时频谱仪相连，使用自动化程控程序控制校准流程。如图4所示，该频响平坦度校准系统的校准流程可以包括如下步骤：步骤410、频响平坦度校准系统初始化。启动频响平坦度校准系统，启动矢量信号源、实时频谱仪，并运行自校准功能，读取仪器和待校准设备的状态，确认频响平坦度校准系统工作正常。确定初始中心频率为校准频率范围的起点频率StartFreq，将初次测试的频率间隔设置为密集频率间隔ΔF1。步骤420、将待校准设备、矢量信号源、实时频谱仪的中心频率CF设置为StartFreq，将频率间隔设置为ΔF1。步骤430、根据中心频率和频率间隔，可以确定射频校准信号，即梳状谱信号。步骤440、测控计算机控制矢量信号源，输出射频校准信号，经射频连接线注入待校准设备的接收通道，经过射频通道、中频电路、信号处理等一系列变频放大和处理，得到正交解调后的第一复数IQ数据。测控计算机控制待校准设备，输出射频校准信号，经射频连接线以及待校准设备的发送通道注入实时频谱仪，测控计算机使用程序控制命令，读取实时频谱仪采集的第二复数IQ数据。分析第一复数IQ数据和第二复数IQ数据，得到梳状谱信号各个频点的幅度和相位信息，与理想梳状谱信号各个频点的幅度和相位信息做log坐标的差值，即可以得到当前中心频率CF下的频响曲线H。频响曲线H包括待校准设备接收通道和发送通道对应的频响曲线。本发明采取频响拼接方法来提高频响平坦度校准系统的通用性，频响平坦度校准系统分别使用窄带实时频谱仪分段捕获待校准设备发送的宽带校准信号，用待校准设备依次捕获窄带矢量信号源分段发送的窄带校准信号，校准程序同步设置频响平坦度校准系统内各个设备的中心频率、调整各频段的幅度增益和相位偏移，还原完整的频谱信息。必要时，频响平坦度校准系统首先标定实时频谱仪和矢量信号源的频响特性，以实现在频响拼接时做相应的补偿。用频响拼接方法模拟发送和接收宽带校准信号，这样就可以用低成本的测量仪器搭建频响平坦度校准系统，降低校准系统成本，提高了校准系统的通用性。而且窄带仪器的频响平坦度一般要优于宽带仪器，更能保证校准的精确度要求。步骤450、校准频点间隔的选择。先用密集频率间隔ΔF1进行测试，得到本次频响测试的测量频响曲线H，分析频点的相关性，通过频率间隔估计算法确定下一次频响测试的采集频率间隔ΔF，和中心频率步进FreqStep＝ΔF*alpha，alpha介于0.5～2之间，取决于预估的新中心频率附近的幅相波动程度。步骤460、以ΔF作为频率间隔进行对应的频响曲线的获取。最后将频响曲线存入待校准设备的校准表内。在正常工作时，可以从校准表中检索数据对待校准设备的收发通道进行补偿。步骤470、测控计算机改变系统工作中心频率，增益等参数。步骤480、直到中心频率CF＞终止频率StopFreq，完成预定频率范围内、预定增益范围的频响测量。在CF＜StopFreq时，重复执行步骤420至步骤460。在步骤420至步骤460中，每获取一次频响曲线，可以确定下一次频响测试的频率间隔。在下一次频响测试中，可以根据频率间隔确定当次频响测试的中心频率；基于当次频响测试的中心频率，可以获取当次频响测试的频响曲线；基于当次频响测试获取的频响曲线和频率间隔估计算法，再确定下一次频响测试的频率间隔。因此，频率间隔在此过程中是一个动态变化的参数。可选地，校准流程还可以包括：步骤480。步骤480、执行校准补偿算法。校准滤波器的频响曲线C和待校准设备的目标频响曲线H互为倒数。再对校准滤波器的频响C做IFFT变换，从而可以获取校准滤波器的原始时域系数c＝ifft{C}，最后去除Gibbs效应得到优化的校准系数。本发明实施例提供的频响平坦度校准系统，先用密集频率间隔ΔF1进行测试，得到密集频响曲线H，分析频点的相关性，通过频率间隔估计算法确定下一步梳状谱频率间隔ΔF，并且只以ΔF作为频率间隔进行当前频响曲线保存。既能保证校准精度，与现有方法比，又能缩短15％以上的校准时间、降低15％以上的存储数据量。还能实现对宽带接收单元进行自动测试，解决了测试参数多、测试量大的问题，实现了在任意频率范围内的频响平坦度校准。本发明提供的实施例使用频响拼接技术，优化了频响平坦度校准系统的设计，分别用窄带频谱仪分段捕获宽带校准信号，窄带信号源分段发送宽带校准信号，最后由校准程序用频谱拼接方法还原完整频谱。这样用窄带测量仪器搭建频响平坦度校准系统，降低了频响平坦度校准系统的成本，提高频响平坦度校准系统的通用性。而且窄带仪器的频响平坦度要优于宽带仪器，更能保证精确度要求。下面对本发明提供的频响平坦度校准装置进行描述，下文描述的频响平坦度校准装置与上文描述的频响平坦度校准方法可相互对应参照。图5是本发明提供的频响平坦度校准装置的结构示意图。参照图5，本发明提供的频响平坦度校准装置可以包括：第一确定模块510、获取模块520、第二确定模块530和校准模块540。第一确定模块510，用于基于上一次频响测试确定的频率间隔，确定本次频响测试的中心频率；获取模块520，用于基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线；第二确定模块530，用于基于所述本次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔；校准模块540，用于根据每次频响测试获取的频响曲线确定校准补偿系数；其中，所述频率间隔估计算法是基于所述每次频响测试获取的频响曲线对应的相关函数确定的。本发明提供的频响平坦度校准装置，根据上一次频响测试确定的频率间隔，动态更新本次频响测试的中心频率，并获取本次频响测试的频响曲线，根据每次频响测试获取的频响曲线可以快速确定校准补偿系数，提高校准效率；还根据每次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔，可以确保每次频响测试中采用的频率间隔为最优频率间隔，从而可以降低校准过程中存储的数据量，还可以提高校准精度，减少校准时间。在一个实施例中，所述第二确定模块530，具体用于：在所述本次频响测试的频响曲线对应的相关函数值小于目标阈值的情况下，确定预估频率间隔；将所述预估频率间隔中的最小值确定为所述下一次频响测试的频率间隔。在一个实施例中，所述获取模块520，具体用于：基于所述本次频响测试的中心频率和对应的频率间隔，确定对应的标准校准信号；将信号源输出的标准校准信号输入至待校准设备，获取第一同相正交IQ数据；将所述待校准设备输出的标准校准信号输入至目标信号分析设备，获取第二IQ数据；基于所述第一IQ数据，获取所述待校准设备的接收通道对应的第一频响曲线；基于所述第二IQ数据，获取所述待校准设备的发送通道对应的第二频响曲线。在一个实施例中，所述获取模块520，还具体用于：在所述信号源的带宽小于所述待校准设备的带宽的情况下，对所述标准校准信号进行分段处理，并将分段后的标准校准信号输入至所述待校准设备。在一个实施例中，所述获取模块520，还具体用于：在所述目标信号分析设备的带宽小于所述待校准设备的带宽的情况下，对所述标准校准信号进行分段处理，将分段后的标准校准信号输入至所述目标信号分析设备。在一个实施例中，所述校准模块540，具体用于：根据所述每次频响测试获取的频响曲线，确定待校准设备中校准滤波器的频响曲线；基于所述校准滤波器的频响曲线，确定所述校准滤波器的校准补偿系数。图6示例了一种电子设备的实体结构示意图，如图6所示，该电子设备可以包括：处理器610、通信接口620、存储器630和通信总线640，其中，处理器610，通信接口620，存储器630通过通信总线640完成相互间的通信。处理器610可以调用存储器630中的逻辑指令，以执行频响平坦度校准方法，该方法包括：基于上一次频响测试确定的频率间隔，确定本次频响测试的中心频率；基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线；基于所述本次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔；根据每次频响测试获取的频响曲线确定校准补偿系数；其中，所述频率间隔估计算法是基于所述每次频响测试获取的频响曲线对应的相关函数确定的。此外，上述的存储器630中的逻辑指令可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。另一方面，本发明还提供一种计算机程序产品，所述计算机程序产品包括计算机程序，计算机程序可存储在非暂态计算机可读存储介质上，所述计算机程序被处理器执行时，计算机能够执行上述各方法所提供的频响平坦度校准方法，该方法包括：基于上一次频响测试确定的频率间隔，确定本次频响测试的中心频率；基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线；基于所述本次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔；根据每次频响测试获取的频响曲线确定校准补偿系数；其中，所述频率间隔估计算法是基于所述每次频响测试获取的频响曲线对应的相关函数确定的。又一方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现以执行上述各方法提供的频响平坦度校准方法，该方法包括：基于上一次频响测试确定的频率间隔，确定本次频响测试的中心频率；基于所述本次频响测试的中心频率和对应的频率间隔，获取所述本次频响测试的频响曲线；基于所述本次频响测试获取的频响曲线和频率间隔估计算法，确定下一次频响测试的频率间隔；根据每次频响测试获取的频响曲线确定校准补偿系数；其中，所述频率间隔估计算法是基于所述每次频响测试获取的频响曲线对应的相关函数确定的。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分所述的方法。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
