标题title
一种基于XML描述文件的设备配置参数管理系统及方法
摘要abst
本发明公开了一种基于XML描述文件的设备配置参数管理系统及方法，方法包括：获取XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并在配置页面显示设备配置参数属性及对应的值；其中，所述XML描述文件包括按照规则定义的设备配置参数相关的多个属性节点，所述多个属性节点用于关联配置页面和关联设备配置参数。本发明在对不同型号的设备进行配置时，无需修改软件，只需要修改XML描述文件中的描述即可，可以大幅缩短软件开发和维护的时间，此外还可以将配置导出到XML描述文件，再导入其他设备，导入其他设备时只需连接和导入两步操作即可，简化了批量配置流程。
权利要求书clms
1.一种基于XML描述文件的设备配置参数管理系统，其特征在于，包括：XML解析模块、参数传递模块、视图编辑模块和配置页面模块；所述XML解析模块，用于根据规则对获取到的获取XML描述文件进行解析，并将其中的与视图相关的节点参数发送给视图编辑模块，将与设备配置相关的节点参数发送给参数传递模块；所述参数传递模块，用于接收所述XML解析模块发送的与设备配置相关的节点参数，并按照其中的配置参数指令向设备读取配置参数的值或写入配置参数的值，还用于将配置参数的值发送给所述视图编辑模块；所述视图编辑模块，用于接收所述XML解析模块发送的与视图相关的节点参数，获取对应的组件类型及组件位置，按需求添加至配置页面模块的列表视图中，还用于将所述参数传递模块发送的配置参数的值发送给所述配置页面模块进行显示，以及用于将所述配置页面模块中修改的配置参数的值发送至XML解析模块；所述配置页面模块，所述配置页面模块的配置页面中包括至少一个列表视图，用于根据XML描述文件的规则将配置参数对应的视图组件添加到列表中，并显示各配置参数的值。2.根据权利要求1所述的基于XML描述文件的设备配置参数管理系统，其特征在于，所述配置页面模块，还用于接收保存配置指令，以对读取的配置参数的值或写入的配置参数的值进行保存。3.根据权利要求1所述的基于XML描述文件的设备配置参数管理系统，其特征在于，所述配置页面模块，还用于接收导入配置指令，所述XML解析模块对导入的XML描述文件进行解析。4.根据权利要求1所述的基于XML描述文件的设备配置参数管理系统，其特征在于，所述配置页面模块，还用于接收导出配置指令，以将当前的配置参数的值发送至XML解析模块，并保存至XML描述文件。5.根据权利要求1所述的基于XML描述文件的设备配置参数管理系统，其特征在于，所述XML描述文件包括按照规则定义的设备配置参数相关的多个属性节点；所述多个属性节点包括关联配置页面的＜editor＞、＜name＞和＜discription＞节点，＜editor＞节点用于配置显示组件的类型及参数，＜name＞节点用于写入显示的内容，＜discription＞节点用于写入显示描述；所述多个属性节点还包括用于关联设备配置参数的＜value＞和＜command＞节点，＜value＞节点为配置参数的值，＜command＞节点为配置参数指令；所述多个属性节点还包括用于配置参数的值与显示内容之间转换的＜combovalue＞节点。6.一种基于XML描述文件的设备配置参数管理方法，其特征在于，包括：获取XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并在配置页面显示设备配置参数属性及对应的值；其中，所述XML描述文件包括按照规则定义的设备配置参数相关的多个属性节点；所述多个属性节点包括关联配置页面的＜editor＞、＜name＞和＜discription＞节点，＜editor＞节点用于配置显示组件的类型及参数，＜name＞节点用于写入显示的内容，＜discription＞节点用于写入显示描述；所述多个属性节点还包括用于关联设备配置参数的＜value＞和＜command＞节点，＜value＞节点为配置参数的值，＜command＞节点为配置参数指令；所述多个属性节点还包括用于配置参数的值与显示内容之间转换的＜combovalue＞节点。7.根据权利要求1所述的基于XML描述文件的设备配置参数管理方法，其特征在于，还包括：将读取的设备配置参数属性及对应的值进行保存，按照规则导出至XML描述文件。8.根据权利要求1所述的基于XML描述文件的设备配置参数管理方法，其特征在于，还包括：修改设备配置参数对应的对应的值，写入相连接的设备，按照规则保存至XML描述文件并导出。9.根据权利要求1所述的基于XML描述文件的设备配置参数管理方法，其特征在于，所述获取XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并在配置页面显示设备配置参数属性及对应的值，具体包括：与设备连接时自动选择与设备型号对应的XML描述文件导入，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并从设备读取对应的对应的值在配置页面进行显示。10.根据权利要求1所述的基于XML描述文件的设备配置参数管理方法，其特征在于，所述获取XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并在配置页面显示设备配置参数属性及对应的值，具体包括：与设备连接完成后，导入与设备型号对应的指定的XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并将从XML描述文件读取的对应的值在配置页面进行显示及写入设备；或者，与设备连接完成后，导入与设备型号对应的指定的XML描述文件，并将从XML描述文件读取的对应的值在配置页面进行显示及写入设备。
说明书desc
技术领域本发明涉及计算机技术领域，特别是一种基于XML描述文件的设备配置参数管理系统及方法。背景技术在配置物联网网关产品时，通常用软件进行配置，而在适配新产品时需要对软件进行修改，对配置指令进行适配。由于配置软件通常需要对众多产品型号进行配置，而不同产品的配置指令、配置规则都有所不同，所以在配置软件开发时或修改配置指令时修改软件都十分费时。此外，在对多个网关产品进行批量配置时，由于不同网关配置规则、命令有所不同，通常需要对软件的解析规则进行重新设计，这样会导致开发周期长，出错率高等问题，在出现新指令时，往往需要对软件进行修改并重新编译。发明内容本发明的主要目的在于提出一种基于XML描述文件的设备配置参数管理系统及方法，对不同型号的设备进行配置时，无需修改软件，只需要修改XML描述文件中的描述即可，可以大幅缩短软件开发和维护的时间。本发明采用如下技术方案：一方面，一种基于XML描述文件的设备配置参数管理系统，包括：XML解析模块、参数传递模块、视图编辑模块和配置页面模块；所述XML解析模块，用于根据规则对获取到的获取XML描述文件进行解析，并将其中的与视图相关的节点参数发送给视图编辑模块，将与设备配置相关的节点参数发送给参数传递模块；所述参数传递模块，用于接收所述XML解析模块发送的与设备配置相关的节点参数，并按照其中的配置参数指令向设备读取配置参数的值或写入配置参数的值，还用于将配置参数的值发送给所述视图编辑模块；所述视图编辑模块，用于接收所述XML解析模块发送的与视图相关的节点参数，获取对应的组件类型及组件位置，按需求添加至配置页面模块的列表视图中，还用于将所述参数传递模块发送的配置参数的值发送给所述配置页面模块进行显示，以及用于将所述配置页面模块中修改的配置参数的值发送至XML解析模块；所述配置页面模块，所述配置页面模块的配置页面中包括至少一个列表视图，用于根据XML描述文件的规则将配置参数对应的视图组件添加到列表中，并显示各配置参数的值。优选的，所述配置页面模块，还用于接收保存配置指令，以对读取的配置参数的值或写入的配置参数的值进行保存。优选的，所述配置页面模块，还用于接收导入配置指令，所述XML解析模块对导入的XML描述文件进行解析。优选的，所述配置页面模块，还用于接收导出配置指令，以将当前的配置参数的值发送至XML解析模块，并保存至XML描述文件。优选的，所述XML描述文件包括按照规则定义的设备配置参数相关的多个属性节点；所述多个属性节点包括关联配置页面的＜editor＞、＜name＞和＜discription＞节点，＜editor＞节点用于配置显示组件的类型及参数，＜name＞节点用于写入显示的内容，＜discription＞节点用于写入显示描述；所述多个属性节点还包括用于关联设备配置参数的＜value＞和＜command＞节点，＜value＞节点为配置参数的值，＜command＞节点为配置参数指令；所述多个属性节点还包括用于配置参数的值与显示内容之间转换的＜combovalue＞节点。另一方面，一种基于XML描述文件的设备配置参数管理方法，包括：获取XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并在配置页面显示设备配置参数属性及对应的值；其中，所述XML描述文件包括按照规则定义的设备配置参数相关的多个属性节点；所述多个属性节点包括关联配置页面的＜editor＞、＜name＞和＜discription＞节点，＜editor＞节点用于配置显示组件的类型及参数，＜name＞节点用于写入显示的内容，＜discription＞节点用于写入显示描述；所述多个属性节点还包括用于关联设备配置参数的＜value＞和＜command＞节点，＜value＞节点为配置参数的值，＜command＞节点为配置参数指令；所述多个属性节点还包括用于配置参数的值与显示内容之间转换的＜combovalue＞节点。优选的，所述的基于XML描述文件的设备配置参数管理方法，还包括：将读取的设备配置参数属性及对应的值进行保存，按照规则导出至XML描述文件。优选的，所述的基于XML描述文件的设备配置参数管理方法，还包括：修改设备配置参数对应的对应的值，写入相连接的设备，按照规则保存至XML描述文件并导出。优选的，所述获取XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并在配置页面显示设备配置参数属性及对应的值，具体包括：与设备连接时自动选择与设备型号对应的XML描述文件导入，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并从设备读取对应的对应的值在配置页面进行显示。优选的，所述获取XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并在配置页面显示设备配置参数属性及对应的值，具体包括：与设备连接完成后，导入与设备型号对应的指定的XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并将从XML描述文件读取的对应的值在配置页面进行显示及写入设备；或者，与设备连接完成后，导入与设备型号对应的指定的XML描述文件，并将从XML描述文件读取的对应的值在配置页面进行显示及写入设备。与现有技术相比，本发明的有益效果如下：本发明对不同型号的设备进行配置时，无需修改软件，只需要修改XML描述文件中的描述即可，可以大幅缩短软件开发和维护的时间，此外还可以将配置导出到XML描述文件，再导入其他设备，导入其他设备时只需连接和导入两步操作即可，简化了批量配置流程。上述说明仅是本发明技术方案的概述，为了能够更清楚地了解本发明的技术手段，从而可依照说明书的内容予以实施，并且为了让本发明的上述和其他目的、特征和优点能够更明显易懂，以下列举本发明的具体实施方式。根据下文结合附图对本发明具体实施例的详细描述，本领域技术人员将会更加明了本发明的上述及其他目的、优点和特征。附图说明图1为本发明实施例的基于XML描述文件的设备配置参数管理系统的结构框图一；图2为本发明实施例的基于XML描述文件的设备配置参数管理系统的结构框图二；图3为本发明实施例的基于XML描述文件的设备配置参数管理系统的结构框图三；图4为本发明实施例的配置页面模块的显示界面；图5为本发明实施例的基于XML描述文件的设备配置参数管理方法的流程图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述；显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例，基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本发明的描述中，需要说明的是，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。参见图1至图3所示，一种基于XML描述文件的设备配置参数管理系统，包括：XML解析模块101、参数传递模块102、视图编辑模块103和配置页面模块104；所述XML解析模块101，用于根据规则对获取到的获取XML描述文件20进行解析，并将其中的与视图相关的节点参数发送给视图编辑模块103，将与设备配置相关的节点参数发送给参数传递模块102；所述参数传递模块102，用于接收所述XML解析模块101发送的与设备配置相关的节点参数，并按照其中的配置参数指令向设备30读取配置参数的值或写入配置参数的值，还用于将配置参数的值发送给所述视图编辑模块103；所述视图编辑模块103，用于接收所述XML解析模块101发送的与视图相关的节点参数，获取对应的组件类型及组件位置，按需求添加至配置页面模块104的列表视图中，还用于将所述参数传递模块102发送的配置参数的值发送给所述配置页面模块104进行显示，以及用于将所述配置页面模块104中修改的配置参数的值发送至XML解析模块101；所述配置页面模块104，所述配置页面模块104的配置页面中包括至少一个列表视图，用于根据XML描述文件的规则将配置参数对应的视图组件添加到列表中，并显示各配置参数的值。本实施例中，所述的基于XML描述文件的设备配置参数管理系统通过配置软件10实现，所述配置软件10的实施主体可以是计算机等。所述设备可以是网关设备，也可以是其他设备。具体的，参见图4所示，为本实施例的配置页面模块104的配置页面，设备配置参数包括波特率、校验位、数据为、停止位、串口功能和封包字节间隔时间，各配置参数后面的编辑框中显示各配置参数对应的值。进一步的，所述配置页面模块104，还用于接收保存配置指令，以对读取的配置参数的值或写入的配置参数的值进行保存。进一步的，所述配置页面模块104，还用于接收导入配置指令，所述XML解析模块101对导入的XML描述文件进行解析。进一步的，所述配置页面模块104，还用于接收导出配置指令，以将当前的配置参数的值发送至XML解析模块101，并保存至XML描述文件。需要说明的是，通过串口将设备和安装有配置软件10的计算机相连接后，配置软件10会主动读取存储在内存中或计算机指定路径的XML描述文件，自动选择与设备型号匹配的XML描述文件导入。通常的，该XML描述文件的配置参数对应的值为空，配置软件10进行处理后，将从XML描述文件读取的配置参数及从设备读取的配置参数的值在配置页面进行显示。图4右下方的读取配置按钮、保存配置按钮、导入配置按钮和导出配置按钮是不与XML描述文件直接关联的按钮，这些按钮可在设备与计算机连接成功后点击。点击读取配置按钮，能够从设备读取配置参数的值。点击保存配置按钮，能够将设备中读取的参数的值保存，以及能够将修改的配置参数的值写入设备及保存。点击导入配置按钮，将从选择的路径获取XML描述文件，进行解析和显示，并将配置参数的值写入设备，这种场景在需要对相同型号的设备进行批量处理时应用，能够快速地统一配置。点击导出配置按钮，将把配置参数属性及对应的值导出至XML描述文件并保存至指定路径，便于后续相同型号的设备批量导入。进一步的，所述XML描述文件包括按照规则定义的设备配置参数相关的多个属性节点；所述多个属性节点包括关联配置页面的＜editor＞、＜name＞和＜discription＞节点，＜editor＞节点用于配置显示组件的类型及参数，＜name＞节点用于写入显示的内容，＜discription＞节点用于写入显示描述；所述多个属性节点还包括用于关联设备配置参数的＜value＞和＜command＞节点，＜value＞节点为配置参数的值，＜command＞节点为配置参数指令；所述多个属性节点还包括用于配置参数的值与显示内容之间转换的＜combovalue＞节点。需要说明的是，所述属性节点还可能包括其他，以及，所述属性节点的命名规则可能不一样，本实施例不做具体限制，只要配置与XML描述文件能够相互解析即可。参见图5所示，一种基于XML描述文件的设备配置参数管理方法，包括：S101，获取设备需要进行配置的参数及其指令。具体的，指令将存在于XML描述文件中，根据指令通过软件获取设备配置信息。S102，根据XML规则编写XML描述文件。具体的，XML描述文件用于关联设备及配置软件的配置页面布局，还用于设备参数的读写、导入及导出。此处读写指读取或修改设备中配置参数的值，导入及导出则可以将同样的配置写入同型号的多台不同设备当中。本实施例将以如下XML描述文件为例对XML描述文件规则进行说明。上述XML描述文件中，规定了配置页面任意菜单所在的节点下都有名为＜child＞的标签，“串口配置”为一级菜单，其＜child＞标签下可以有本地串口1、本地串口2等二级菜单，在配置页面中选择一级菜单则会显示一级菜单下的二级菜单。如果某节点下查找不到＜child＞标签，则说明该节点为一个配置参数而非一个菜单，如此实施例中的＜editor＞节点等。而无论是否存在＜child＞标签，除了＜child＞标签之外所有标签所在的节点，其子节点除＜child＞标签外都是该节点的属性，在此规则中所有节点的值都保存于该节点的value属性中。如＜波特率＞节点下的＜value＞子节点属性“value”为空，连接设备时，从设备读取参数写入此“value”属性中，如果此节点的值被修改，保存时就需要将此信息转换为指令从配置软件写入设备，也可将此描述文件作为配置文件导出，value值则作为配置的数据用于导入下一台设备。各节点中的作为属性使用的节点，可以按照需求定义，只需在编写配置软件时按照器所需规则编写，可以定义设备配置参数的属性，如参数名称，是否为多参数配置项，该参数是多参数配置项的第几个参数；也可以定义该参数在配置页面中显示于第几行或第几列。简而言之，这些属性可以是面向设备的，也可以是面向配置软件的。例如此实施例配置项中，＜editor＞、＜name＞、＜discription＞节点面向配置软件，＜editor＞节点用于配置显示组件的类型及参数，＜name＞、＜discription＞节点用于写入显示的内容和描述；＜value＞、＜command＞用于读取设备的配置，为配置项的指令和值；＜combovalue＞则用于配置项的值与显示内容之间的转换，如＜串口1通信＞中“关闭”选项对应的配置的值为0，从设备读取到的值为0时，在配置页面显示为关闭。S103，配置软件获取XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并在配置页面显示设备配置参数属性及对应的值。具体的，在配置软件的配置页面中需要有至少一个列表视图，以用于根据XML描述文件的规则将配置项对应的视图组件添加到列表中。视图编辑模块用于将XML解析模块所获取到的组件类型及组件位置按需求添加至配置页面的列表视图中，例如下拉框，编辑框，是否可编辑等，还将参数传递模块从设备获取到的值显示在配置页面中，并在配置页面中的参数修改时将值传递至XML解析模块。参数传递模块则通过XML解析模块传递的设备配置相关的节点参数中获取配置项指令，并按照指令向设备读取配置参数，将读取到的参数保存于XML解析文件中，同时将参数也传递给视图编辑模块。XML解析模块在开始时，将XML描述文件解析并将其中的视图相关的节点参数传递给视图编辑模块，将与设备配置相关的节点参数传递给参数传递模块，通过其他模块获取参数或修改参数，并在参数改变时，将其他模块向XML解析模块传递的参数保存至XML模型的对应节点中。参数的导出是将XML解析模块中XML模型重新导出为XML描述文件保存于本地，其中带有获取到的以及修改过的配置参数。导入配置需要带有参数的XML描述文件，参数传递模块通过XML解析模块获取参数配置，将参数按照配置指令传递给设备。进一步的，所述的基于XML描述文件的设备配置参数管理方法，还包括：将读取的设备配置参数属性及对应的值进行保存，按照规则导出至XML描述文件。进一步的，所述的基于XML描述文件的设备配置参数管理方法，还包括：修改设备配置参数对应的对应的值，写入相连接的设备，按照规则保存至XML描述文件并导出。进一步的，所述获取XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并在配置页面显示设备配置参数属性及对应的值，具体包括：与设备连接时自动选择与设备型号对应的XML描述文件导入，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并从设备读取对应的对应的值在配置页面进行显示。进一步的，所述获取XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并在配置页面显示设备配置参数属性及对应的值，具体包括：与设备连接完成后，导入与设备型号对应的指定的XML描述文件，根据XML描述文件的规则将设备配置参数相关的视图组件添加到列表视图以生成配置页面，并将从XML描述文件读取的对应的值在配置页面进行显示及写入设备；或者，与设备连接完成后，导入与设备型号对应的指定的XML描述文件，并将从XML描述文件读取的对应的值在配置页面进行显示及写入设备。具体的，通过串口将设备和安装有配置软件的计算机相连接后，配置软件会主动读取存储在内存中或计算机指定路径的XML描述文件，自动选择与设备型号匹配的XML描述文件导入。通常的，该XML描述文件的配置参数对应的值为空，配置软件进行处理后，将从XML描述文件读取的配置参数及从设备读取的配置参数的值在配置页面进行显示。图4右下方的读取配置按钮、保存配置按钮、导入配置按钮和导出配置按钮是不与XML描述文件直接关联的按钮，这些按钮可在设备与计算机连接成功后点击。点击读取配置按钮，能够从设备读取配置参数的值。点击保存配置按钮，能够将设备中读取的参数的值保存，以及能够将修改的配置参数的值写入设备及保存。点击导入配置按钮，将从选择的路径获取XML描述文件，进行解析和显示，并将配置参数的值写入设备，这种场景在需要对相同型号的设备进行批量处理时应用，能够快速地统一配置。点击导出配置按钮，将把配置参数属性及对应的值导出至XML描述文件并保存至指定路径，便于后续相同型号的设备批量导入。此外，本发明中，XML描述文件可以根据需要进行设计，例如：即可以去除S102步骤中＜child＞标签将＜chlid＞标签以节点属性表示，以及将任意子节点设计在节点属性中。以上所述，仅为本发明较佳的具体实施方式；但本发明的保护范围并不局限于此。任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，根据本发明的技术方案及其改进构思加以等同替换或改变，都应涵盖在本发明的保护范围内。
