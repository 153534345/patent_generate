标题title
一种分级响应接口的运维方法及系统
摘要abst
本发明公开了一种工程机械运维技术领域的一种分级响应接口的运维方法及系统，旨在解决现有技术中不同第三方接口系统交互效率低、不够灵活等问题。其包括权限认证模块：用于进行权限认证；分级仲裁模块：用于判断认证成功的第三方系统所发出的接口请求数据的优先级；接口模块：用于按照优先级解析所述处理队列中的接口请求数据，以获取相应的解析数据；清洗脱敏模块：用于清洗所述解析数据，并对清洗后的解析数据进行脱敏处理；数据推送模块：用于将脱敏处理后的数据推送至授权对接的目标第三方系统；本发明适用于不同第三方系统之间的对接和交互，能够实现系统之间快速对接，方便维护，尽可能保证重要数据接口高可用的目的。
权利要求书clms
1.一种分级响应接口系统，其特征在于，包括：权限认证模块：用于对发出接入请求的第三方系统进行权限认证；分级仲裁模块：用于判断认证成功的第三方系统所发出的接口请求数据的优先级，并根据对应的优先级将接口请求数据存放至对应优先级的处理队列中；接口模块：用于按照优先级解析所述处理队列中的接口请求数据，以获取相应的解析数据；清洗脱敏模块：用于清洗所述解析数据，并对清洗后的解析数据进行脱敏处理；数据推送模块：用于将脱敏处理后的数据推送至授权对接的目标第三方系统。2.根据权利要求1所述的分级响应接口系统，其特征在于，还包括：存储模块：用于保存所有的接口请求数据、接口响应数据及解析数据；其中，所述接口请求数据、接口响应数据存储至大数据存储平台；所述解析数据存储至关系型数据库。3.根据权利要求1所述的分级响应接口系统，其特征在于，所述数据推送模块配置有数据推送模板；所述数据推送模块根据所述数据推送模板将脱敏处理后的数据组装为符合目标第三方系统的接口要求的数据后执行数据推送操作。4.根据权利要求1所述的分级响应接口系统，其特征在于，所述分级仲裁模块还用于：将处理队列中接口请求数据的等待解析时间超过等待时间阈值的接口请求数据从处理队列中删除，并保存该接口请求数据。5.一种分级响应接口的运维方法，其特征在于，所述方法包括：对发出接入请求的第三方系统进行权限认证；判断认证成功的第三方系统所发出的接口请求数据的优先级，并根据对应的优先级将接口请求数据存放至对应优先级的处理队列中；按照优先级解析所述处理队列中的接口请求数据，以获取相应的解析数据；清洗所述解析数据，并对清洗后的解析数据进行脱敏处理；将脱敏处理后的数据推送至授权对接的目标第三方系统。6.根据权利要求5所述的一种分级响应接口的运维方法，其特征在于，对发出接入请求的第三方系统进行权限认证的方法包括：根据第三方系统的接口认证要求获取对接系统的令牌，用于使后续接口根据所述令牌与第三方系统接口进行正常有权通信。7.根据权利要求5所述的一种分级响应接口的运维方法，其特征在于，所述按照优先级解析所述处理队列中的接口请求数据的方法包括：根据第三方系统接口的请求类型、请求参数和请求方式进行解析请求；根据与所述解析请求对应配置的返回状态码和数据格式进行解析。8.根据权利要求5至7任一项所述的一种分级响应接口的运维方法，其特征在于，将处理队列中接口请求数据的等待解析时间超过等待时间阈值的接口请求数据从处理队列中删除，并保存该接口请求数据。9.根据权利要求5所述的一种分级响应接口的运维方法，其特征在于，还包括在获取相应的解析数据后，执行数据保存操作；所述数据保存操作包括：保存所有的接口请求数据、接口响应数据及解析数据；其中，所述接口请求数据、接口响应数据存储至大数据存储平台；所述解析数据存储至关系型数据库。10.根据权利要求5所述的一种分级响应接口的运维方法，其特征在于，所述清洗包括过滤、去重；所述脱敏包括根据预配置的脱敏处理规则将指定字段进行移除、截断、随机填充。
说明书desc
技术领域本发明涉及一种分级响应接口的运维方法及系统，属于工程机械运维技术领域。背景技术随着计算机技术的发展，无人驾驶技术在工程机械领域应用逐渐展开。对于矿山来说，矿山生产过程中实际使用的各类系统很多，其中最重要的是生产相关的系统。为了实现无人化运输系统和生产系统之间的互通，消除系统之间的数据壁垒，需要系统之间互相开放接口，便于无人化运输系统和生产系统之间的数据交互。这些第三方系统虽然属于同一领域，但是不同系统的参数、认证方式差别较大。虽然从技术层面来看实现不同系统之间的数据对接并不困难，但是仍然需要双方的技术人员进行编码、开发、联调，工作量仍然较多。如果对接多个系统的话，大量接口开发不仅导致了很多的重复性工作，也给后期维护带来了很大的压力，还额外增加了用户的时间成本。而在无人化运输系统运行过程中，对不同指令的实时性要求存在较大差异。对于车辆控制、车辆调度等可能影响无人化运输系统运行安全的指令可靠性和实时性要求很高，对于生产统计等信息的要求相对较低。而对接多个系统所产生的数据压力可能会导致服务器压力突然增加，造成消息延迟。因此，迫切的需要一种可以快速对接第三方系统接口的方法和一个能够灵活对接不同系统数据并能够保证重要数据优先处理、高可用的接口系统。发明内容本发明的目的在于克服现有技术中的不足，提供一种分级响应接口的运维方法及系统，用于实现系统之间快速对接，方便维护，尽可能保证重要数据接口高可用的目的。为实现上述目的，本发明是采用下述技术方案实现的：一方面，本发明提供一种分级响应接口系统，包括：权限认证模块：用于对发出接入请求的第三方系统进行权限认证；分级仲裁模块：用于判断认证成功的第三方系统所发出的接口请求数据的优先级，并根据对应的优先级将接口请求数据存放至对应优先级的处理队列中；接口模块：用于按照优先级解析所述处理队列中的接口请求数据，以获取相应的解析数据；清洗脱敏模块：用于清洗所述解析数据，并对清洗后的解析数据进行脱敏处理；数据推送模块：用于将脱敏处理后的数据推送至授权对接的目标第三方系统。具体的，还包括存储模块，所述存储模块用于保存所有的接口请求数据、接口响应数据及解析数据；其中，所述接口请求数据、接口响应数据存储至大数据存储平台；所述解析数据存储至关系型数据库。具体的，所述数据推送模块配置有数据推送模板；所述数据推送模块根据所述数据推送模板将脱敏处理后的数据组装为符合目标第三方系统的接口要求的数据后执行数据推送操作。具体的，所述分级仲裁模块还用于：将处理队列中接口请求数据的等待解析时间超过等待时间阈值的接口请求数据从处理队列中删除，并保存该接口请求数据。另一方面，本发明提供一种分级响应接口的运维方法，所述方法包括：对发出接入请求的第三方系统进行权限认证；判断认证成功的第三方系统所发出的接口请求数据的优先级，并根据对应的优先级将接口请求数据存放至对应优先级的处理队列中；按照优先级解析所述处理队列中的接口请求数据，以获取相应的解析数据；清洗所述解析数据，并对清洗后的解析数据进行脱敏处理；将脱敏处理后的数据推送至授权对接的目标第三方系统。具体的，对发出接入请求的第三方系统进行权限认证的方法包括：根据第三方系统的接口认证要求获取对接系统的令牌，用于使后续接口根据所述令牌与第三方系统接口进行正常有权通信。具体的，所述按照优先级解析所述处理队列中的接口请求数据的方法包括：根据第三方系统接口的请求类型、请求参数和请求方式进行解析请求；根据与所述解析请求对应配置的返回状态码和数据格式进行解析。具体的，将处理队列中接口请求数据的等待解析时间超过等待时间阈值的接口请求数据从处理队列中删除，并保存该接口请求数据。具体的，还包括在获取相应的解析数据后，执行数据保存操作；所述数据保存操作包括：保存所有的接口请求数据、接口响应数据及解析数据；其中，所述接口请求数据、接口响应数据存储至大数据存储平台；所述解析数据存储至关系型数据库。具体的，所述清洗包括过滤、去重；所述脱敏包括根据预配置的脱敏处理规则将指定字段进行移除、截断、随机填充。与现有技术相比，本发明所达到的有益效果：本发明提供的一种数据对接交互的分级响应接口系统，此接口系统可以根据配置的不同第三方系统或接口优的先级，经过分级仲裁模块仲裁之后决定接口的优先处理和响应顺序，从而在资源有限的情况下，保证关键数据的正常接收，无需开发人员对接口的参数、认证方式进行反复对接、编码和联调，有效减少了开发工作量，降低了应用软件的开发和运维难度，极大方便了无人化运输系统和矿山生产系统之间的数据融合，实现了系统之间的快速对接、方便维护的目的。附图说明图1是本发明实施例提供的一种分级响应接口系统与矿山生产系统之间信息交互示意图；图2是本发明实施例提供的一种分级响应接口系统数据处理流程图；图3是本发明实施例提供的一种分级仲裁模块主要处理流程图。具体实施方式下面结合附图对本发明作进一步描述。以下实施例仅用于更加清楚地说明本发明的技术方案，而不能以此来限制本发明的保护范围。实施例一：本发明实施例提供的一种分级响应接口系统，解决了露天矿山无人化运输系统和矿山当前使用的生产系统之间的数据融合、方便系统快速对接并保证重要数据接口优先处理、高可用的问题，该系统可以根据配置的不同第三方系统或接口优的先级，经过分级仲裁模块仲裁之后决定接口的优先处理和响应顺序，从而在资源有限的情况下，保证关键数据的正常接收，为实现上述功能目的，这里设置分级响应接口系统具体包括：权限认证模块：用于对发出接入请求的第三方系统进行权限认证，权限认证模块的主要功能是与第三方接口系统之间进行身份认证，获取第三方系统的访问授权，从而为后续接口的调用提供授权，实现与第三方系统接口间的正常有权访问，若验证失败则终止对第三方的请求的进一步处理；分级仲裁模块：用于判断认证成功的第三方系统所发出的接口请求数据的优先级，并根据对应的优先级将接口请求数据存放至对应优先级的处理队列中，通过权限认证模块鉴权之后，合法请求会进入到分级仲裁模块，分级仲裁模块根据系统配置的第三方系统接口特征来判断接口请求数据的优先级，然后根据对应的优先级，将请求数据存放到对应优先级的处理队列中，接口系统处理数据时，首先按照优先级顺序判断队列长度，然后会按照优先级的高低，从高到低处理不同优先级队列中的请求数据；接口模块：用于按照优先级解析分级仲裁模块处理队列中的接口请求数据，以获取相应的解析数据，其主要功能是根据所要对接的第三方系统的所需和返回字段，由专业人员对接口的请求和响应模板进行配置，此时的请求模板应当包含：接口请求类型、请求参数、请求方式。这里的请求类型含义为接口采用何种请求进行对接，如Get请求还是Post请求等；请求参数含义为此接口请求所需参数；请求方式含义为此接口是由第三方系统主动调用接口系统还是接口系统定时调用第三方相关接口等。响应模板应当包含：返回状态码及其含义、返回数据格式和字段意义。返回状态码含义为此次请求的成功、失败的标志；返回数据格式和字段意义的含义为此次响应数据的结果类型为何种类型，包含哪些字段，字段所代表的意义等；清洗脱敏模块：用于清洗解析数据，并对清洗后的解析数据进行脱敏处理，此处过滤清洗的含义是接口系统可以通过此模块过滤掉一些错误数据或推送目标系统不需要的数据，脱敏的含义则是将一些敏感数据进行替换或者去除，防止敏感数据的泄露；数据推送模块：用于将脱敏处理后的数据推送至授权对接的目标第三方系统。经过清洗脱敏后的数据在数据推送模块中会被接口系统根据配置的推送模块组装为符合不同第三方系统接口要求的数据，然后由接口系统向所有已对接、授权的第三方系统推送数据，实现数据的对接。本发明实施例提供的一种分级响应接口系统，为支撑系统整体有序运行以及正常的数据调用，这里在系统内还设置存储模块，负责系统中数据的存储工作，这里的存储模块用于保存所有的接口请求数据、接口响应数据及解析数据；其中，接口请求数据、接口响应数据存储至大数据存储平台；解析数据存储至关系型数据库中，之后数据会进入到下一模块做进一步处理。本发明实施例提供的一种分级响应接口系统，为便于和第三方系统进行对接，这里配置数据推送模块含有数据推送模板；数据推送模块根据数据推送模板将脱敏处理后的数据组装为符合目标第三方系统的接口要求的数据后执行数据推送操作。数据推送模板至少包含：推送接口的请求类型、推送参数和推送方式。推送接口请求类型、推送参数和推送方式与接口模块中的概念类似，这里不做过多阐述。本发明实施例提供的一种分级响应接口系统，为保障系统有序运行，对未能及时进行处理的请求进行反馈，这里在分级仲裁模块上配置有时计功能：将处理队列中接口请求数据的等待解析时间超过等待时间阈值的接口请求数据从处理队列中删除，并保存该接口请求数据，以便于在后续工作中对未能及时执行的命令进行调用和调整。实施例二：本发明实施例提供的一种分级响应接口的运维方法，可据此方法为分级响应接口提供基本的逻辑基础，以实现分级响应接口之间快速对接、方便维护的目的，具体的，该方法包括：首先对发出接入请求的第三方系统进行权限认证；认证成功后，执行下一将第三方系统所发出的接口请求数据划分优先级的步骤，并根据对应的优先级将接口请求数据存放至对应优先级的处理队列中；按照优先级解析处理队列中的接口请求数据，按照优先级从高到低依次处理并据此获取相应的解析数据；清洗解析数据，并对清洗后的解析数据进行脱敏处理；最后将脱敏处理后的数据推送至授权对接的目标第三方系统。本实施例提供的分级响应接口的运维方法，可快速将第三方系统的请求数据按照优先级进行分类处理，并将相请求数据对接到相应的工程系统中，可极大方便了无人化运输系统和矿山生产系统之间的数据融合，实现了系统之间的快速对接、方便维护的目的。应注意的是本方法所涉及的优先级，应当遵循调度、车辆控制等接口优先级高，生产统计等辅助接口优先级低的顺序，当系统处理能力不能完全满足数据上报的情况下对请求数据按照优先级从高到低的顺序分级处理，尽可能的保证重要通信接口的畅通，保证无人化运输系统的安全运行。本发明实施例提供的一种分级响应接口的运维方法，为保障后续接口正常的通讯功能，这里令对发出接入请求的第三方系统进行权限认证的方法具体包括：根据第三方系统的接口认证要求获取对接系统的令牌，用于使后续接口根据令牌与第三方系统接口实现正常有权通信。本发明实施例提供的一种分级响应接口的运维方法，为进一步细化接口请求数据的方式，这里设置按照优先级解析处理队列中的接口请求数据的方法包括：根据第三方系统接口的请求类型、请求参数和请求方式进行解析请求；根据与解析请求对应配置的返回状态码和数据格式进行解析。本发明实施例提供的一种分级响应接口的运维方法，为避免接口请求数据长时间等待而无响应，这里将处理队列中接口请求数据的等待解析时间超过等待时间阈值的接口请求数据从处理队列中删除，并保存该接口请求数据，便于及时反馈或调用该请求数据。本发明实施例提供的一种分级响应接口的运维方法，还包括在获取相应的解析数据后，执行数据保存操作，通过对相应请求数据及解析数据等的保存，可有利于系统中数据的读取以及调用，为后期运维提供相应的数据支持。具体的，数据保存操作包括：保存所有的接口请求数据、接口响应数据及解析数据；其中，接口请求数据、接口响应数据存储至大数据存储平台；解析数据存储至关系型数据库。本发明实施例提供的一种分级响应接口的运维方法，设置清洗包括过滤、去重；脱敏包括根据预配置的脱敏处理规则将指定字段进行移除、截断、随机填充，之后数据进入到下一模块做进一步处理。通过上述过滤清洗可使接口系统通过此模块过滤掉一些错误数据或推送目标系统不需要的数据；通过上述脱敏步骤可将一些敏感数据进行替换或者去除，防止敏感数据的泄露。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明技术原理的前提下，还可以做出若干改进和变形，这些改进和变形也应视为本发明的保护范围。
