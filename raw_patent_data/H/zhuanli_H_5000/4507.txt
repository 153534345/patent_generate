标题title
一种多路PV输入模式的识别方法
摘要abst
本发明公开了一种多路PV输入模式的识别方法，包括以下步骤：S1：检测每一路PV的开路电压；S2：选择开路电压最小的一路PV作为在检参考PV；S3：在在检参考PV的占空比从0%增加到100%的过程中，进行多轮电压扰动，在每轮电压扰动时分别检测除在检参考PV之外的每一路PV的电压与在检参考PV的电压的电压差，并根据电压差调节各路PV的检测计数器；S5：根据各路PV的检测计数器的数值来判断除在检参考PV之外的每一路PV是否与在检参考PV并联，并将所有判断为不与在检参考PV并联的各路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2，直至所有路PV输入模式均识别完成。本发明能简单快速、准确地识别出各路PV的输入模式。
权利要求书clms
1.一种多路PV输入模式的识别方法，其特征在于，包括以下步骤：S1：检测每一路PV的开路电压；S2：选择开路电压最小的一路PV作为在检参考PV；S3：在所述在检参考PV的占空比从0%增加到100%的过程中，进行多轮电压扰动，在每轮电压扰动时分别检测除所述在检参考PV之外的每一路PV的电压与所述在检参考PV的电压的电压差，并根据所述电压差调节各路PV的检测计数器；S5：根据各路PV的检测计数器的数值来判断除所述在检参考PV之外的每一路PV是否与所述在检参考PV并联，并将所有判断为不与所述在检参考PV并联的各路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2，直至所有路PV输入模式均识别完成。2.根据权利要求1所述的多路PV输入模式的识别方法，其特征在于，步骤S3和步骤S5之间还包括S4：根据执行步骤S3的过程中所述在检参考PV的电流的最大值判断所述在检参考PV是否异常，如果正常，则执行步骤S5，如果异常，则将除所述在检参考PV之外的所有路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2。3.根据权利要求2所述的多路PV输入模式的识别方法，其特征在于，步骤S3具体包括：S31：根据当前时间计算当前占空比并进行电压扰动；S32：检测每一路PV的电压；S33：分别计算除所述在检参考PV之外的每一路PV的电压与所述在检参考PV的电压的电压差，如果电压差大于预设阈值，则对应路PV的检测计数器的数值加一，否则对应路PV的检测计数器的数值保持不变；S34：判断所述在检参考PV的占空比是否为100%，如果是，则执行步骤S4，否则返回步骤S31。4.根据权利要求3所述的多路PV输入模式的识别方法，其特征在于，步骤S31具体包括：判断调节时间是否到达，如果是，则将占空比按照固定增量进行增加以获得当前占空比，所述当前占空比Dnew具体为：Dnew=Dold+T1/T识，式中，Dold为上一次调节时间到达时的占空比，初始时刻时Dold=0%，T1为调节时间，T识为所述在检参考PV的占空比从0%增加到100%的时间。5.根据权利要求3所述的多路PV输入模式的识别方法，其特征在于，步骤S32中还包括：检测所述在检参考PV的电流，并判断所述在检参考PV的电流是否大于第一预设值，如果是，则停止检测；如果否，则执行步骤S33；所述第一预设值为min，其中Imax1为预设的模式识别最大电流，Imax2为当前电池充电产生的限流。6.根据权利要求3所述的多路PV输入模式的识别方法，其特征在于，步骤S4具体包括：判断执行步骤S3的过程中所述在检参考PV的电流的最大值是否大于第二预设值，如果是，则判断所述在检参考PV为正常，并执行步骤S5，如果否，则判断所述在检参考PV为异常，并将除所述在检参考PV之外的所有路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2；所述第二预设值是预设的最小检测电流Imin。7.根据权利要求3所述的多路PV输入模式的识别方法，其特征在于，步骤S5中具体包括：将检测计数器为零的对应路PV判断为与所述在检参考PV并联，将检测计数器为非零的对应路PV判断为与所述在检参考PV独立，然后将判断为与所述在检参考PV独立的所有路PV作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2，直至所有路PV输入模式均识别完成。8.根据权利要求2至7任一项所述的多路PV输入模式的识别方法，其特征在于，步骤S4还包括：若所有路PV均被判断为异常，则将所有路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2。9.根据权利要求1至7任一项所述的多路PV输入模式的识别方法，其特征在于，还包括：E1：若检测到接入新的PV，则判断Imax2是否小于Imin，如果是，执行步骤E2，如果否，则执行步骤E4，其中，Imax2为当前电池充电产生的限流，Imin为预设的最小检测电流；E2：关停当前已检测完成且正常运行的所有路PV中输出功率最小的一路或多路PV；E3：重新判断Imax2是否小于Imin，如果是，则返回步骤E2，如果否，则执行步骤E4；E4：继续当前的识别方法步骤，并在下一次执行重新组队步骤时将新接入的PV加入到待检测队列中；其中，步骤E1至E4可在步骤S1至S5中任意的识别方法步骤时执行。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机可执行指令，所述计算机可执行指令在被处理器调用和执行时，所述计算机可执行指令促使处理器实现权利要求1至9任一项所述的多路PV输入模式的识别方法的步骤。
说明书desc
技术领域本发明涉及电力电子技术领域，尤其是一种多路PV输入模式的识别方法。背景技术近年来随着社会对清洁能源认识的提高，光伏储能电源已成为我们生活中常见的设备。多路的光伏组件通常独立与光伏逆变器的多路输入端连接，但为了使线路更加简洁，以及为了兼顾大功率输入及光伏MPPT效率，会把多路光伏组件并联连接之后再接入逆变器的输入端，这就引入了光伏输入模式判断的需求，如何简单而准确地识别哪些PV组件之间是并联输入关系，哪些PV组件是独立输入关系成为了需要解决的问题。现有的输入模式并联或独立的识别方式通常采用电压扰动观察法，而扰动量的控制通常采用电压单环控制或电压电流双环控制的方法，该两种方法算法复杂，且其中的扰动量及PV电压偏差阈值都会影响识别结果的准确性，尤其是弱能量或光伏不稳定的时候，扰动量或PV电压偏差阈值太小则导致无法准确识别，误判的可能性会进一步的提高。以上背景技术内容的公开仅用于辅助理解本发明的构思及技术方案，其并不必然属于本专利申请的现有技术，在没有明确的证据表明上述内容在本专利申请的申请日已经公开的情况下，上述背景技术不应当用于评价本申请的新颖性和创造性。发明内容本发明的目的是提供一种多路PV输入模式的识别方法，以解决多路PV输入模式的识别方法因扰动量和PV电压偏差阈值太小造成准确性低的问题。本发明的技术问题通过以下技术方案予以解决：本发明的一方面公开了一种多路PV输入模式的识别方法，包括以下步骤：S1：检测每一路PV的开路电压；S2：选择开路电压最小的一路PV作为在检参考PV；S3：在所述在检参考PV的占空比从0%增加到100%的过程中，进行多轮电压扰动，在每轮电压扰动时分别检测除所述在检参考PV之外的每一路PV的电压与所述在检参考PV的电压的电压差，并根据所述电压差调节各路PV的检测计数器；S5：根据各路PV的检测计数器的数值来判断除所述在检参考PV之外的每一路PV是否与所述在检参考PV并联，并将所有判断为不与所述在检参考PV并联的各路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2，直至所有路PV输入模式均识别完成。在一些实施例中，步骤S3和步骤S5之间还包括S4：根据执行步骤S3的过程中所述在检参考PV的电流的最大值判断所述在检参考PV是否异常，如果正常，则执行步骤S5，如果异常，则将除所述在检参考PV之外的所有路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2。在一些实施例中，步骤S3具体包括：S31：根据当前时间计算当前占空比并进行电压扰动；S32：检测每一路PV的电压；S33：分别计算除所述在检参考PV之外的每一路PV的电压与所述在检参考PV的电压的电压差，如果电压差大于预设阈值，则对应路PV的检测计数器的数值加一，否则对应路PV的检测计数器的数值保持不变；S34：判断所述在检参考PV的占空比是否为100%，如果是，则执行步骤S4，否则返回步骤S31。在一些实施例中，步骤S31具体包括：判断调节时间是否到达，如果是，则将占空比按照固定增量进行增加以获得当前占空比。进一步地，所述当前占空比Dnew具体为：Dnew=Dold+T1/T识，式中，Dold为上一调节时间到达时的占空比，初始时刻时Dold=0%，T1为调节时间，T识为所述在检参考PV的占空比从0%增加到100%的时间。在一些实施例中，步骤S32中还包括：检测所述在检参考PV的电流，并判断所述在检参考PV的电流是否大于第一预设值，如果是，则停止检测；如果否则执行步骤S33。进一步地，所述第一预设值为min，其中Imax1为预设的模式识别最大电流，Imax2为当前电池充电产生的限流。在一些实施例中，步骤S4具体包括：判断执行步骤S3的过程中所述在检参考PV的电流的最大值是否大于第二预设值，如果是，则判断所述在检参考PV为正常，并执行步骤S5，如果否，则判断所述在检参考PV为异常，并将除所述在检参考PV之外的所有路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2。进一步地，所述第二预设值是预设的最小检测电流Imin。在一些实施例中，步骤S5中具体包括：将检测计数器为零的对应路PV判断为与所述在检参考PV并联，将检测计数器为非零的对应路PV判断为与所述在检参考PV独立，然后将判断为与所述在检参考PV独立的所有路PV作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2，直至所有路PV输入模式均识别完成。在一些实施例中，步骤S4还包括：若所有路PV均被判断为异常，则将所有路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2。在一些实施例中，还包括：E1：若检测到接入新的PV，则判断Imax2是否小于Imin，如果是，执行步骤E2，如果否，则执行步骤E4，其中，Imax2为当前电池充电产生的限流，Imin为预设的最小检测电流；E2：关停当前已检测完成且正常运行的所有路PV中输出功率最小的一路或多路PV；E3：重新判断Imax2是否小于Imin，如果是，则返回步骤E2，如果否，则执行步骤E4；E4：继续当前的识别方法步骤，并在下一次执行重新组队步骤时将新接入的PV加入到待检测队列中；其中，步骤E1至E4可在步骤S1至S5中任意的识别方法步骤时执行。本发明的另一方面还公开了一种计算机可读存储介质，所述计算机可读存储介质存储有计算机可执行指令，所述计算机可执行指令在被处理器调用和执行时，所述计算机可执行指令促使处理器实现如上任一项所述的多路PV输入模式的识别方法的步骤。本发明与现有技术对比的有益效果包括：本发明提供的多路PV输入模式的识别方法，直接选择开路电压最小的一路PV作为在检参考PV，并通过在检参考PV的占空比从0%增加到100%的过程中进行多轮电压扰动来分别计算每轮电压扰动时除在检参考PV之外的每一路PV的电压与在检参考PV的电压的电压差，再根据电压差调节各路PV的检测计数器，根据各路PV的检测计数器判断各路PV与在检参考PV是并联输入关系还是独立输入关系，并将与在检参考PV是独立输入关系的各路PV循环进行检测。通过PV电压排序及占空比按一定变化率增加，在不同占空比下进行电压扰动，最大限度增加了PV输入模式识别的样本个数，进而可以准确识别多路PV之间是并联输入模式关系还是独立输入模式关系，算法上简单易行，且大大改善了PV弱能量或光伏不稳定时检测的准确性。在本发明的进一步的方案中，还具有以下优点：1、本发明在检测过程中兼顾了电池充电过程产生的充电限流信息，从而达到约束检测过程最大输入电流的目的，一方面保证PV输出功率不过充电池，增加检测过程的安全性；另一方面还可节省时间，提高检测速度。2、本发明通过引入模式识别时间，保证检测样本的多样性，以及对每一路PV的电压进行同步采样，杜绝因采样时间基准的差异而带来的PV电压值的大的偏差，从而提高了判断的准确性；同时PV电压偏差阈值V域以及最小检测电流Imin可调节，兼顾PV输出功率因随机性和不稳定性等造成的强弱不等的工况，进一步提高PV输入模式判断的准确性。3、本发明可允许PV电压的动态接入，且对动态接入的设备进行检测时通常不会影响已检测完成的PV运行，增加产品的竞争力及稳定性。附图说明图1是包含本发明实施例中的多路PV输入模式的系统的拓扑结构图。图2是本发明实施例中的控制系统示意图。图3是本发明实施例的多路PV输入模式的识别方法的流程图。具体实施方式下面对照附图并结合优选的实施方式对本发明作进一步说明。需要说明的是，在不冲突的情况下，本申请中的实施例及实施例中的特征可以相互组合。需要说明的是，本实施例中的左、右、上、下、顶、底等方位用语，仅是互为相对概念，或是以产品的正常使用状态为参考的，而不应该认为是具有限制性的。缩略语及关键术语定义：并联输入模式：一个PV输入源，同时接给两个及以上的光伏功率控制电路，对这些光伏功率控制电路而言他们相互间是并联输入模式。独立输入模式：1个PV输入源仅作为一个光伏功率控制电路的输入，此时的光伏功率控制电路是独立输入模式。模式识别时间：本发明算法中占空比从0%增加到100%的时间，用于限定占空比变化速度。模式识别最大电流：用于限定识别过程中的最大PV电流，有加速检测的效果。PV电压偏差阈值：用于判断PV各路输入模式是并联输入模式还是独立输入模式的偏差值。最小检测电流：避免因输入电流过小而产生误检测事件。电池充电产生的限流：锂电池有最大充电电流管理功能，本发明通过通讯等方式收集该信息，同时结合此时系统的工作状态，生成本次检测电池准许PV输入的最大电流。本发明实施例提供一种多路PV输入模式的识别方法，通过对PV的开路电压进行排序及占空比按既定变化率增加，计算除在检参考PV之外的每一路PV的电压与在检参考PV的电压的电压差，并根据电压差调节各路PV的检测计数器，可以简单快速、准确地识别各路PV间是并联输入模式关系还是独立输入模式关系。如图1所示的包含多路PV输入模式的系统，该系统拓扑包括：控制开关管、防反二极管、电感、滤波电容、PV1、PV2至PVn，例如本实施例中的PV1和PV2是并联输入模式，PVn是独立输入模式。本发明实施例针对上述系统拓扑中的多路PV输入模式进行识别，识别方法流程图如图3所示，包括如下步骤：S1：检测每一路PV的开路电压，并进行排序。S2：选择开路电压最小的一路PV作为在检参考PV。S3：在所述在检参考PV的占空比从0%增加到100%的过程中，进行多轮电压扰动，在每轮电压扰动时分别检测除在检参考PV之外的每一路PV的电压与在检参考PV的电压的电压差，并根据电压差调节各路PV的检测计数器。其中，步骤S3具体包括：S31：根据当前时间计算当前占空比并进行电压扰动。步骤S31具体包括：判断调节时间是否到达，如果是，则将占空比按照固定增量进行增加以获得当前占空比；如果否，则继续等待调节时间的到达。其中，当前占空比Dnew具体为：Dnew=Dold+T1/T识，式中，Dold为上一次调节时间到达时的占空比，初始时刻时Dold=0%，T1为调节时间，T识为在检参考PV的占空比从0%增加到100%的时间，即模式识别时间。S32：检测每一路PV的电压。步骤S32中还包括：检测在检参考PV的电流，并判断在检参考PV的电流是否大于第一预设值，如果是，则停止检测；如果否，则执行步骤S33；其中，第一预设值为min，其中Imax1为预设的模式识别最大电流，Imax2为当前电池充电产生的限流。需要说明的是，当在检参考PV的电流大于第一预设值，则停止检测。其中，停止检测指的是本队列在该占空比后不再执行占空比增加的策略，对于该占空比之前的占空比以及该占空比，仍需计算每一路PV电压与在检参考PV电压的电压差并调节各路的检测计数器。当在检参考PV的电流不大于第一预设值，则直接执行步骤S33。S33：分别计算除所述在检参考PV之外的每一路PV的电压与所述在检参考PV的电压的电压差，如果电压差大于预设阈值，则对应路PV的检测计数器的数值加一，否则对应路PV的检测计数器的数值保持不变。S34：判断所述在检参考PV的占空比是否为100%，如果是，则执行步骤S4，否则返回步骤S31。S4：根据执行步骤S3的过程中在检参考PV的电流的最大值判断在检参考PV是否异常，如果正常，则执行步骤S5，如果异常，则将除在检参考PV之外的所有路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2。其中，步骤S4具体包括：判断执行步骤S3的过程中在检参考PV的电流的最大值是否大于第二预设值，如果是，则判断在检参考PV为正常，并执行步骤S5，如果否，则判断在检参考PV为异常，并将除在检参考PV之外的所有路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2；其中，第二预设值是预设的最小检测电流Imin。在进一步的实施例中，步骤S4还包括：若所有路PV均被判断为异常，则将所有路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2。S5：根据各路PV的检测计数器的数值来判断除在检参考PV之外的每一路PV是否与在检参考PV并联，并将所有判断为不与在检参考PV并联的各路PV重新组队作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2，直至所有路PV输入模式均识别完成。其中，步骤S5中具体包括：将检测计数器为零的对应路PV判断为与在检参考PV并联，将检测计数器为非零的对应路PV判断为与在检参考PV独立，然后将判断为与在检参考PV独立的所有路PV作为待检测队列且将待检测队列中所有路PV的检测计数器清零，再返回步骤S2，直至所有路PV输入模式均识别完成。在本发明实施例执行上述的多路PV输入模式的识别方法步骤时，还允许未接入PV电压的端口动态接入电压，其检测识别方法同上述的识别方法步骤，只是在接入新的PV时还执行以下步骤：E1：若检测到接入新的PV，则判断Imax2是否小于Imin，如果是，执行步骤E2，如果否，则执行步骤E4，其中，Imax2为当前电池充电产生的限流，Imin为预设的最小检测电流。E2：关停当前已检测完成且正常运行的所有路PV中输出功率最小的一路或多路PV，具体地，本步骤中是关停当前已检测完成且正常运行的所有路PV中输出功率最小的那路或那组。E3：重新判断Imax2是否小于Imin，如果是，则返回步骤E2，如果否，则执行步骤E4。E4：继续当前的识别方法步骤，并在下一次执行重新组队步骤时将新接入的PV加入到待检测队列中。步骤E1至E4可在步骤S1至S5中任意的识别方法步骤时执行。通过执行步骤E1至E4，可以使得检测过程中有足够大的PV输入电流来准确识别各路PV的模式，保证检测精度，同时保证用户收益不受太大影响。下面通过实施例对多路PV输入模式的识别方法进行具体说明。在一个具体的实施例中，多路PV输入模式的识别方法的步骤具体如下：1、通过控制系统接收“模式识别时间”T识、“模式识别最大电流”Imax1、“PV电压偏差阈值”V域和“最小检测电流”Imin。以上参数可配置为默认值，默认值对应的一种实施例如：T识：3秒，Imax1：1A，V域：2V，Imin：150mA，参数更改来源可以是和控制系统有通讯连接的HMI、手机、WEB等设备中的任意一种或多种。在安装时，可根据实际安装环境及光伏面板的配置情况对“PV电压偏差阈值”V域和“最小检测电流”Imin进行微调。如图2所示，控制系统包含控制器、BMS、HMI和APP等，控制器分别通过RS232、RS485或CAN总线与BMS连接、通过RS485总线与HMI连接、通过WIFI或蓝牙与APP连接。2、采集每一路PV，即PV1~PVn的电压信息、电流信息。因控制器采集的PV电压有经过滤波处理，为了最大的提高不同路PV电压信号检测的精度，在满足条件的情况下，采用同步采样的方式对各路PV电压进行采样，即如控制器采用TI的型号为28374S的DSP芯片，此芯片采样通道独立且可单独配置触发源，则可为用到的采样通道配置同一触发源且采样保持时间等参数配置相同，这样就确保了系统电压采样的同步性。3、判断上一步采集的每一路PV电压是否连续一段时间大于PV启动电压，满足条件的标记为有PV电压输入。4、对有PV输入的通道根据PV电压值的大小做排序处理。5、取PV电压值最小的一路PV作为在检参考PV并执行以下步骤5.1至5.10的操作。取PV电压值最小的一路PV，一方面可提高检测速度，另一方面可提高检测的准确性，其原因在于：由太阳能的电压-电流曲线可知，其开路电压最大，在进行电压扰动的时候，电压值必定会再减小。如果取PV电压值为最大值或其他值的一路PV作为在检参考PV，则后续进行如下操作进行电压扰动，有可能会误检。5.1、判断调节时间T1是否到达，若到达则执行下一步。调节时间T1是指控制环路调用的周期，即多久执行一次调节，调节时间通常固定不变。5.2、根据当前时间计算占空比增量：调节时间T1到达后，将占空比按照固定增量进行增加以获得当前占空比，该占空比增量和调节时间T1以及模式识别时间T识相关，占空比增量D增=T1÷T识，T1为调节时间，T识为在检参考PV的占空比从0%增加到100%的时间，即模式识别时间。5.3、根据占空比增量计算当前占空比：Dnew=Dold+D增。Dold为上一调节时间到达时的占空比，初始时刻时Dold=0%。占空比影响输出电流，进而进行电压扰动。5.4、对当前所有路PV的电压做采样计算。采样计算是指将控制器芯片获得的AD数字信号转为对应单位的真实电压值。5.5、对本次在检参考PV做电流采样计算。电流采样计算是指将控制器芯片获得的AD数字信号转为对应单位的真实电流值。5.6、生成电池充电产生的限流Imax2，控制器通过通讯电路获得当前电池的最大允许充电电流及当前电池电流信息，Imax2=电池最大允许充电电流-电池电流，检测过程中，关注本次在检参考PV的电流信息，若电流大于min，则停止检测，应用此方法在保证PV输出功率不过充电池的同时，可提高检测速度，同时节省时间，从而提高检测速度。5.7、检测过程中，关注本次在检参考PV的电流信息，若电流一直小于min，则允许占空比从0%变化到100%，否则本次在检参考PV检测结束。5.8、在执行步骤5.6-5.7过程中，每个调节时间T1到达都会比较本次在检参考PV的电压和所有被比较的PV的电压大小，若发生了和某路PV偏差值大于V域，则相应被比较的这路PV的检测计数器的数值加一。5.9、本队列多轮检测停止后，判断检测过程中最大的PV电流是否大于Imin，若不满足，则判定本次在检参考PV异常并标记本次在检参考PV为异常路，同时清掉检测计数器的值，下次检测从本队列中选择未被标记为异常路中的具有最小PV电压的路执行步骤5.1至5.8；若满足，则判断检测计数器是否非零，满足非零的路标记为独立输入模式，其他路标记为和本次在检参考PV关系为并联输入模式，所有被标记为独立输入模式的PV作为新的队列，选择新队列中具有最小PV电压的路执行步骤5.1至5.8，同时清掉检测计数器的值。5.10、特别地，若经过若干次检测，本次在检测队列中的路数都被标记了“异常路”，则清除所有异常路标志及检测计数器的数值，并将本队列命名为待检测队列，重新执行步骤5.1-5.9。同时，本发明实施例还允许未接入PV电压的端口动态接入电压，即在检测的过程中再接入一路或多路PV，后续可以针对后接入的一种或多路PV进行检测，允许动态接入时的检测。动态接入时的检测方法同上，区别在于：1、已检测完成的可以继续正常运行，不需要重复检测。2、特别地，若动态接入PV电压时Imax2小于Imin，则关停当前光伏输出功率最小的那路或那组，待重新计算得到的Imax2大于Imin，则可执行本检测算法。本次检测有足够大的PV输入电流来准确识别各路PV的输入模式，保证检测精度，同时保证用户收益不受太大影响。本发明实施例的多路PV输入模式的识别方法具有以下效果：1、整个输入模式的检测仅需要进行PV电压排序及占空比按既定变化率增加便可以准确的识别多路光伏间是并联输入模式关系还是独立输入模式关系，算法上简单易行。2、本发明提供了“模式识别时间”设置功能，可起到限定占空比增加速率的作用，提高检测过程的安全性。3、本发明提供了“模式识别最大电流”设置功能，同时检测过程中兼顾了电池充电过程产生的充电限流信息，共同作用从而达到约束检测过程最大输入电流的目的增加检测过程的安全性。4、本发明提供了“PV电压偏差阈值”、“最小检测启动电流”参数的设置功能，阈值和启动电流都会影响模式识别的结果，例如弱PV能量时可能存在误判的可能，故本发明允许用户按实际需要更改V域和检测电流，从而增加PV输入模式判断的准确性。以上参数的设定可以在出货时根据系统规格书自定义一套默认参数供执行。5、本发明引入模式识别时间T识及采样同步等思想，模式识别时间可保证检测样本的多样性，采样同步可杜绝因采样时间基准的差异而带来的PV电压值的大的偏差，从而提高了判断的准确性。6、本发明可允许光伏电压的动态接入，且对动态接入的设备进行检测时通常不会影响已检测完成的PV运行，增加产品的竞争力及稳定性。本发明的背景部分可以包含关于本发明的问题或环境的背景信息，而不是由其他人描述现有技术。因此，在背景技术部分中包含的内容并不是申请人对现有技术的承认。以上内容是结合具体/优选的实施方式对本发明所作的进一步详细说明，不能认定本发明的具体实施只局限于这些说明。对于本发明所属技术领域的普通技术人员来说，在不脱离本发明构思的前提下，其还可以对这些已描述的实施方式做出若干替代或变型，而这些替代或变型方式都应当视为属于本发明的保护范围。在本说明书的描述中，参考术语“一种实施例”、“一些实施例”、“优选实施例”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不必须针对的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任一个或多个实施例或示例中以合适的方式结合。此外，在不相互矛盾的情况下，本领域的技术人员可以将本说明书中描述的不同实施例或示例以及不同实施例或示例的特征进行结合和组合。尽管已经详细描述了本发明的实施例及其优点，但应当理解，在不脱离由所附权利要求限定的范围的情况下，可以在本文中进行各种改变、替换和变更。
