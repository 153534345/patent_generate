标题title
一种应用于B5G车载网的可靠路由方法
摘要abst
本发明公开了一种应用于B5G车载网的可靠路由方法，涉及车载网路由技术领域；通过设计基于B5G的软件定义车辆网络体系结构，使用基于机器学习技术的5G基站来预测车辆轨迹，减少时间延迟；并设计了一个链路性能检测机制，平衡控制开销和精准度，可以更精准的测量链路的性能；利用改进的遗传算法的QoS路由算法，通过将跨代选择、小环境策略和传统的遗传算法相结合，并借助SDN控制器的全局视图，得到更加可靠的传输路径。
权利要求书clms
1.一种应用于B5G车载网的可靠路由方法，其特征在于：包括：设计基于B5G技术的SDN网络框架，将WSMP协议应用于5G系统；建立自适应监控机制；采用基于改进的遗传算法的QoS路由算法计算路由；所述设计基于B5G技术的SDN网络框架，具体为：采用基于B5G技术的SDN框架，使用5G基站进行车辆运动轨迹的预测，使用多接入边缘计算提供实时数据处理，通过机器学习预测车辆即将连接的下一个基站；所述将WSMP协议应用于5G系统，具体为：将WSMP协议应用于5G系统，WSMP协议框架包括NTPS模块、适配模块和5G模块；NTPS模块通过广播WSA，实现WSMP协议的打包和传输，适配模块用于将WSMP协议适配到5G模块；5G模块实现协议栈的MAC层和物理层，发送数据和过滤并接受数据。2.根据权利要求1所述的应用于B5G车载网的可靠路由方法，其特征在于：所述建立自适应监控机制，具体为：根据网络规模和链路负载变化动态概念轮询间隔，控制开销和精度之间的平衡；依据带宽变化率和上次监控间隔计算检测间隔的更新，带宽变化率，如式所示：其中，Δb是带宽变化率，band是链路现在占用宽度，lastBand是上次占用的带宽，ε1为大于0的实数；检测间隔的更新，如式所示：其中，minPed是网络规模决定的最小轮询间隔；lastPed是上次轮询间隔，maxPed是最大论据间隔；α1和α2是设定的常数，通过判断带宽变化率采取不同的轮询间隔改变策略。3.根据权利要求1所述的应用于B5G车载网的可靠路由方法，其特征在于：所述自适应监控机制包括设置监控点及遍历监控点并发送消息。4.根据权利要求3所述的应用于B5G车载网的可靠路由方法，其特征在于：所述设置监控点具体为：运行LLDP协议并进行链路设置；初始化链路所有链路的监控时间为minPed，并添加到监控队列checkqueue中；控制器接收到一条链路的OpenFlow消息，更新对应的链路带宽、链路延迟、丢包率和监控点。5.根据权利要求1所述的应用于B5G车载网的可靠路由方法，其特征在于：所述遍历监控点，全局时间初始化；检测监控队列是否为空，不为空，则遍历所有监控点；全局时间点不断增加1，直至监控点时间与全局时间点相等为止，测量对应链路并移除监控点。6.根据权利要求1所述的应用于B5G车载网的可靠路由方法，其特征在于：所述基于改进的遗传算法的QoS路由算法计算路由，包括以下步骤：S1：进行网络预处理、染色体编码和适应度函数构建；S2：初始化采用深度优先遍历算法生成源节点到目标节点的多条路径，并选择未被随机访问的相邻节点作为下一个节点；S3：跨代选择，通过轮盘赌方法在本次迭代和上次迭代的种群中选择优秀染色体；S4：交叉选择，对于任意两条染色体，随机选择一个基因点作为交叉点，生成两个新的染色体；S5：变异操作，从染色体中随意选择一个基因作为突变点，然后使用深度优先搜索算法生成一条从突发点到目的节点的新路径；S6：小环境策略在交叉和变异操作中增加两代染色体的对比机制，若子代适应度高于父代，则更新染色体，否则不变；S7：染色体的删除，采用两次遍历删除交叉或变异操作导致染色体中存在的环；通过将跨代选择、小环境策略和原始的遗传算法相结合，应用于QoS路由算法，当流量注入网络，SDN控制器在自适应监控机制基础上，运行改进的遗传算法生成路径，将路径发送给交换机上的流表条目。7.根据权利要求1所述的应用于B5G车载网的可靠路由方法，其特征在于：S1的具体过程，包括以下步骤：S1.1：网络预处理，消除网络中不满足带宽要求的边缘节点，SDN控制器删除不满足数据流的链路，构建满足带宽要求的虚拟网络；S1.2：染色体编码，采用变长染色体编码机制，每个染色体代表一条路由路径，第一个基因代表源节点，最后一个基因代表目节点，染色体顺序代表路径网络节点顺序，并确保染色体上节点单一；S1.3：适应度函数的构建选择链路带宽、链路时延和丢包率作为性能评价指标。8.根据权利要求7所述的应用于B5G车载网的可靠路由方法，其特征在于：所述链路带宽采用被动的方式，依据交换机端口的计数器的统计数据测量占用带宽，利用rxBytes和txBytes的返回信息测量带宽，分别表示端口接收和发送的比特数，交换机s1和交换机s2通过端口p1和p2连接，在t1和t2时间段内带宽计算，如式、式所示：其中，和分别是时间t2和t1时刻的端口p1的txBytes，和分别是时间t2和t1时刻的p1的rxBytes；公式中分别表示在端口p2处的数据；Tp1和Tp2分别表示端口p1和p2在t1到t2时间段内总比特数，取两个端口的平均值作为链路占用带宽的计算值。9.根据权利要求7所述的应用于B5G车载网的可靠路由方法，其特征在于：所述链路延迟通过分别发送Packet_out消息和Echo请求消息测量；所述发送Packet_out消息，SDN控制器将携带时间戳的Packet_out消息发送到交换机s1，交换机s1将消息转发给交换机s2；所述发送Echo请求消息，SDN控制器分别发送带有时间戳的Echo请求消息给交换机s1和交换机s2，；则交换机之间的链路延迟计算，如式所示：其中，t是路径延迟，t1和t2分别是控制器到交换机的延迟。10.根据权利要求7所述的应用于B5G车载网的可靠路由方法，其特征在于：所述丢包率利用txPackets和rxPackets信息，分别表示发送和接收数据包的数量计算，如式、式所示：其中，和分别表示p1端口在t2和t1时刻发送数据包的数量，和分别表示p2端口在t2和t1时刻接收数据包的数量；TP为端口t1到t2时间段内发送的数据包的总数量，RP表示端口t1到t2时间段内接收的数据包的总数量；丢包率的计算，如式所示：对性能评价指标进行归一化，为不同的指标设置不同的权重，适应度函数计算，如式所示：f＝q1×fband+q2×)+q3×) 其中，fband是染色体的带宽占所有染色体和的比率，q1为fband的权重；floss是染色体丢包率，q2为floss的权重；fdelay是染色体延迟比率，q2为fdelay的权重；q1+q2+q3＝1；染色体适应度函数值最大的为路由路径。
说明书desc
技术领域本发明涉及车载网路由技术领域，尤其涉及一种应用于B5G车载网的可靠路由方法。背景技术随着经济的快速发展，移动网络和物联网技术逐步成熟，如何实现智能驾驶、人车互联、车车互联成为研究热点，但车辆的剧增、连接不稳定性、信号有效传输等问题，车载网的安全性和可靠性需求逐渐增加，仍为车载网络的研究带来了巨大挑战。软件定义网络将控制和转发功能分离，是一种新兴的网络体系结构，提高了资源利用效率和实现了网络的可编程性。将SDN应用于车载网，成为软件定义车辆网络，为处理车辆互联需求、车载网拓扑管理和网络成本管理提供了有效解决方案。5G技术的发展已经涵盖工业、农业和交通服务业等多个领域，其中车载网是5G重要的应用领域，但随着车载网络的发展，车载网成为一个异构、大规模的网络，B5G技术可以为现有车载网提供有效的解决途径。B5G通信使用更高的频段进行通信，实现海陆空天场景下的全球性覆盖，采用人工智能等技术处理不同应用场景，进一步提高更高的安全性，提高网络资源管理和网络智能化水平。专利“一种基于链路传输能力的跨层车载网路由方法”公开了一种基于链路传输能力的跨层车载网路由方法。该方法综合考虑城市环境下影响链路传输能力的路由方法，计算节点的发送数据概率、信道占用的概率等，对节点之间有无障碍物的情况分别讨论，并扩展了基础的跨层路由协议AODV协议，在路由过程中，不断根据反馈信息更新路由表。但该方法存在广播信息量大，链路传输不稳定等问题，不能保证可靠的路由和数据流的不间断传输。发明内容为解决现有技术的不足，本发明的目的是提供了一种应用于B5G车载网的可靠路由方法，设计了基于B5G的软件定义车辆网络体系结构，使用基于机器学习技术的5G基站来预测车辆轨迹；并设计了一个链路性能检测机制，利用改进的遗传算法计算可靠传输路径，提高网络性能。为实现上述目的，本发明所采取的技术方案为：一种应用于B5G车载网的可靠路由方法，包括：设计基于B5G技术的SDN网络框架，将WSMP协议应用于5G系统；建立自适应监控机制；采用基于改进的遗传算法的QoS路由算法计算路由。所述设计基于B5G技术的SDN网络框架，具体为：采用基于B5G技术的SDN框架，使用5G基站进行车辆运动轨迹的预测，使用多接入边缘计算提供实时数据处理，通过机器学习预测车辆即将连接的下一个基站。所述将WSMP协议应用于5G系统，具体为：将WSMP协议应用于5G系统，WSMP协议框架包括NTPS模块、适配模块和5G模块；NTPS模块通过广播WSA，实现WSMP协议的打包和传输，适配模块用于将WSMP协议适配到5G模块；5G模块实现协议栈的MAC层和物理层，发送数据和过滤并接受数据。所述建立自适应监控机制，具体为：根据网络规模和链路负载变化动态概念轮询间隔，控制开销和精度之间的平衡；依据带宽变化率和上次监控间隔计算检测间隔的更新，带宽变化率，如式所示：其中，Δb是带宽变化率，band是链路现在占用宽度，lastBand是上次占用的带宽，ε1为大于0的实数；检测间隔的更新，如式所示：其中，minPed是网络规模决定的最小轮询间隔；lastPed是上次轮询间隔，maxPed是最大论据间隔；α1和α2是设定的常数，通过判断带宽变化率采取不同的轮询间隔改变策略。所述自适应监控机制包括设置监控点及遍历监控点并发送消息。所述设置监控点具体为：运行LLDP协议并进行链路设置；初始化链路所有链路的监控时间为minPed，并添加到监控队列checkqueue中；控制器接收到一条链路的OpenFlow消息，更新对应的链路带宽、链路延迟、丢包率和监控点。所述遍历监控点具体为：全局时间初始化；检测监控队列是否为空，不为空，则遍历所有监控点；全局时间点不断增加1，直至监控点时间与全局时间点相等为止，测量对应链路并移除监控点。所述基于改进的遗传算法的QoS路由算法计算路由，包括以下步骤：S1：进行网络预处理、染色体编码和适应度函数构建；S2：初始化采用深度优先遍历算法生成源节点到目标节点的多条路径，并选择未被随机访问的相邻节点作为下一个节点；S3：跨代选择，通过轮盘赌方法在本次迭代和上次迭代的种群中选择优秀染色体；S4：交叉选择，对于任意两条染色体，随机选择一个基因点作为交叉点，生成两个新的染色体；S5：变异操作，从染色体中随意选择一个基因作为突变点，然后使用深度优先搜索算法生成一条从突发点到目的节点的新路径；S6：小环境策略在交叉和变异操作中增加两代染色体的对比机制，若子代适应度高于父代，则更新染色体，否则不变；S7：染色体的删除，采用两次遍历删除交叉或变异操作导致染色体中存在的环；通过将跨代选择、小环境策略和原始的遗传算法相结合，应用于QoS路由算法，当流量注入网络，SDN控制器在自适应监控机制基础上，运行改进的遗传算法生成路径，将路径发送给交换机上的流表条目。S1的具体过程，包括以下步骤：S1.1：网络预处理，消除网络中不满足带宽要求的边缘节点，SDN控制器删除不满足数据流的链路，构建满足带宽要求的虚拟网络；S1.2：染色体编码，采用变长染色体编码机制，每个染色体代表一条路由路径，第一个基因代表源节点，最后一个基因代表目节点，染色体顺序代表路径网络节点顺序，并确保染色体上节点单一；S1.3：适应度函数的构建选择链路带宽、链路时延和丢包率作为性能评价指标。所述性能评价指标计算，具体包括以下步骤：S1.3.1：链路带宽采用被动的方式，依据交换机端口的计数器的统计数据测量占用带宽，利用rxBytes和txBytes的返回信息测量带宽，分别表示端口接收和发送的比特数，交换机s1和交换机s2通过端口p1和p2连接，在t1和t2时间段内带宽计算，如式、式所示：其中，和分别是时间t2和t1时刻的端口p1的txBytes，和分别是时间t2和t1时刻的p1的rxBytes；公式中分别表示在端口p2处的数据；Tp1和Tp2分别表示端口p1和p2在t1到t2时间段内总比特数，取两个端口的平均值作为链路占用带宽的计算值；S1.3.2：链路延迟通过分别发送Packet_out消息和Echo请求消息测量。所述发送Packet_out消息，SDN控制器将携带时间戳的Packet_out消息发送到交换机s1，交换机s1将消息转发给交换机s2。所述发送Echo请求消息，SDN控制器分别发送带有时间戳的Echo请求消息给交换机s1和交换机s2，；则交换机之间的链路延迟计算，如式所示：其中，t是路径延迟，t1和t2分别是控制器到交换机的延迟。S1.3.3：丢包率，利用txPackets和rxPackets信息，分别表示发送和接收数据包的数量计算，如式、式所示：其中，和分别表示p1端口在t2和t1时刻发送数据包的数量，和分别表示p2端口在t2和t1时刻接收数据包的数量；TP为端口t1到t2时间段内发送的数据包的总数量，RP表示端口t1到t2时间段内接收的数据包的总数量；丢包率的计算，如式所示：对性能评价指标进行归一化，为不同的指标设置不同的权重，适应度函数计算，如式所示：f＝q1×fband+q2×)+q3×)其中，fband是染色体的带宽占所有染色体和的比率，q1为fband的权重；floss是染色体丢包率，q2为loss的权重；fdelay是染色体延迟比率，q2为fdelay的权重；q1+q2+q3＝1；染色体适应度函数值最大的为路由路径。采用上述技术方案所产生的有益效果在于：1.本发明利用5G基站进行车辆定位，并借助机器学习技术进行车辆预测，减少时间延迟。2.本发明设计一种自适应链路检测机制，平衡控制开销和精准度，可以更精准的测量链路的性能。3.本发明基于改进的遗传算法的QoS路由算法，通过将跨代选择、小环境策略和传统的遗传算法相结合，并借助SDN控制器的全局视图，得到更加可靠的传输路径。附图说明图1为本发明实施例提供的一种应用于B5G车载网的可靠路由方法流程图；图2为本发明实施例提供的网络架构图；图3为本发明实施例提供的路由性能测试的简单拓扑图；图4为本发明实施例提供的路由性能测试的复杂拓扑图；图5为本发明实施例提供的链路性能设计拓扑图。具体实施方式下面结合附图和实施例，对本发明的具体实施方式作进一步详细描述。一种应用于B5G车载网的可靠路由方法，包括：设计基于B5G技术的SDN网络框架，如图2所示，将WSMP协议应用于5G系统；建立自适应监控机制；采用基于改进的遗传算法的QoS路由算法计算路由。所述设计基于B5G技术的SDN网络框架，具体为：采用基于B5G技术的SDN框架，使用5G基站进行车辆运动轨迹的预测，使用多接入边缘计算提供实时数据处理，通过机器学习预测车辆即将连接的下一个基站。所述将WSMP协议应用于5G系统，具体为：将WSMP协议应用于5G系统，WSMP协议框架包括NTPS模块、适配模块和5G模块；NTPS模块通过广播WSA，实现WSMP协议的打包和传输，适配模块用于将WSMP协议适配到5G模块；5G模块实现协议栈的MAC层和物理层，发送数据和过滤并接受数据。所述建立自适应监控机制，具体为：根据网络规模和链路负载变化动态概念轮询间隔，控制开销和精度之间的平衡；依据带宽变化率和上次监控间隔计算检测间隔的更新，带宽变化率，如式所示：其中，Δb是带宽变化率，band是链路现在占用宽度，lastBand是上次占用的带宽，ε1为大于0的实数；检测间隔的更新，如式所示：其中，minPed是网络规模决定的最小轮询间隔；lastPed是上次轮询间隔，maxPed是最大论据间隔；α1和α2是设定的常数，通过判断带宽变化率采取不同的轮询间隔改变策略。所述自适应监控机制包括设置监控点及遍历监控点并发送消息。所述设置监控点具体为：运行LLDP协议并进行链路设置；初始化链路所有链路的监控时间为minPed，并添加到监控队列checkqueue中；控制器接收到一条链路的OpenFlow消息，更新对应的链路带宽、链路延迟、丢包率和监控点。所述遍历监控点具体为：全局时间初始化；检测监控队列是否为空，不为空，则遍历所有监控点；全局时间点不断增加1，直至监控点时间与全局时间点相等为止，测量对应链路并移除监控点。所述基于改进的遗传算法的QoS路由算法计算路由，如图1所示，包括以下步骤：S1：进行网络预处理、染色体编码和适应度函数构建，设计的网络拓扑如图3和图4所示；S1.1：网络预处理，消除网络中不满足带宽要求的边缘节点，SDN控制器删除不满足数据流的链路，构建满足带宽要求的虚拟网络；S1.2：染色体编码，采用变长染色体编码机制，每个染色体代表一条路由路径，第一个基因代表源节点，最后一个基因代表目节点，染色体顺序代表路径网络节点顺序，并确保染色体上节点单一；S1.3：适应度函数的构建选择链路带宽、链路时延和丢包率作为性能评价指标；本实施例中，设计的网络拓扑如图5所示，包括ryu控制器、两个个交换机和四个主机。所述性能评价指标计算，具体包括以下步骤：S1.3.1：链路带宽采用被动的方式，依据交换机端口的计数器的统计数据测量占用带宽，利用rxBytes和txBytes的返回信息测量带宽，分别表示端口接收和发送的比特数，交换机s1和交换机s2通过端口p1和p2连接，在t1和t2时间段内带宽计算，如式、式所示：其中，和分别是时间t2和t1时刻的端口p1的txBytes，和分别是时间t2和t1时刻的p1的rxBytes；公式中分别表示在端口p2处的数据；Tp1和Tp2分别表示端口p1和p2在t1到t2时间段内总比特数，取两个端口的平均值作为链路占用带宽的计算值。S1.3.2：链路延迟通过分别发送Packet_out消息和Echo请求消息测量；所述发送Packet_out消息，SDN控制器将携带时间戳的Packet_out消息发送到交换机s1，交换机s1将消息转发给交换机s2；所述发送Echo请求消息，SDN控制器分别发送带有时间戳的Echo请求消息给交换机s1和交换机s2，；则交换机之间的链路延迟计算，如式所示：其中，t是路径延迟，t1和t2分别是控制器到交换机的延迟。S1.3.3：丢包率，利用txPackets和rxPackets信息，分别表示发送和接收数据包的数量计算，如式、式所示：其中，和分别表示p1端口在t2和t1时刻发送数据包的数量，和分别表示p2端口在t2和t1时刻接收数据包的数量；TP为端口t1到t2时间段内发送的数据包的总数量，RP表示端口t1到t2时间段内接收的数据包的总数量；丢包率的计算，如式所示：对性能评价指标进行归一化，为不同的指标设置不同的权重，适应度函数计算，如式所示：f＝q1×fband+q2×)+q3×)其中，fband是染色体的带宽占所有染色体和的比率，q1为fband的权重；floss是染色体丢包率，q2为floss的权重；fdelay是染色体延迟比率，q2为fdelay的权重；q1+q2+q3＝1；染色体适应度函数值最大的为路由路径；S2：初始化采用深度优先遍历算法生成源节点到目标节点的多条路径，并选择未被随机访问的相邻节点作为下一个节点；S3：跨代选择，通过轮盘赌方法在本次迭代和上次迭代的种群中选择优秀染色体；S4：交叉选择，对于任意两条染色体，随机选择一个基因点作为交叉点，生成两个新的染色体；S5：变异操作，从染色体中随意选择一个基因作为突变点，然后使用深度优先搜索算法生成一条从突发点到目的节点的新路径；本实施例中，设置变异率为0.1，对于任意染色体随机选择一个点作为突变点，再使用深度优先搜索算法生成一条从突发点到目的节点的新路径。例如h1，s7，s4，s9，h7，在s4处突变，重新生成s4，s2，s6，s9，h7新的路径；S6：小环境策略在交叉和变异操作中增加两代染色体的对比机制，若子代适应度高于父代，则更新染色体，否则不变；S7：染色体的删除，采用两次遍历删除交叉或变异操作导致染色体中存在的环；本实施例中，对于染色体h1，s4，s2，s6，s8，s4，s2，s5，s9，h7，这样的染色体重存在环，影响算法的性能，使用两次遍历方法删除环；通过将跨代选择、小环境策略和原始的遗传算法相结合，应用于QoS路由算法，当流量注入网络，SDN控制器在自适应监控机制基础上，运行改进的遗传算法生成路径，将路径发送给交换机上的流表条目。
