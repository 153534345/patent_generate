标题title
投影区域确定方法、装置、投影设备及可读存储介质
摘要abst
本申请提供一种投影区域确定方法、装置、投影设备及可读存储介质，涉及画面投影技术领域。本申请通过获取拍摄设备针对目标墙面拍摄的墙面图像，接着对该墙面图像进行聚类处理，得到该墙面图像下的多个聚类图像区域，而后从多个聚类图像区域中提取出满足待投影画面的投影尺寸比的最大像素连续区域，进而将目标墙面上与该最大像素连续区域对应的墙面区域，作为待投影画面的最佳投影区域，从而在目标墙面上自行为待投影画面求取出满足投影尺寸比且无异物或杂色存在的最佳投影区域，使待投影画面在投射到最佳投影区域内显示时，具有最佳的画面投影效果。
权利要求书clms
1.一种投影区域确定方法，其特征在于，所述方法包括：获取拍摄设备针对目标墙面拍摄到的墙面图像；对所述墙面图像内各像素点进行聚类处理，并按照聚类结果对所述墙面图像进行图像分割，得到多个聚类图像区域；在所述多个聚类图像区域中提取满足待投影画面的投影尺寸比的最大像素连续区域；将所述目标墙面上与所述最大像素连续区域对应的墙面区域，作为所述待投影画面的最佳投影区域。2.根据权利要求1所述的方法，其特征在于，所述对所述墙面图像内各像素点进行聚类处理，包括：针对所述墙面图像内的每个像素点，计算该像素点与其邻域像素点之间的欧式距离；根据计算出的各欧式距离的数值分布状况，对所述墙面图像内各像素点进行像素聚类。3.根据权利要求2所述的方法，其特征在于，所述根据计算出的各欧式距离的数值分布状况，对所述墙面图像内各像素点进行像素聚类，包括：对计算出的所有欧式距离按照升序的方式进行排序，得到欧式距离排序结果；按照所述欧式距离排序结果依次针对所述墙面图像中的每个未聚类的像素点，判断所述未聚类的像素点与相邻的聚类像素区域内相邻的已聚类像素点之间的欧式距离是否小于所述聚类像素区域的欧式距离阈值；若所述未聚类的像素点与所述相邻的已聚类像素点之间的欧式距离小于所述聚类像素区域的欧式距离阈值，则将所述未聚类的像素点聚类到所述聚类像素区域内，并更新所述聚类像素区域的欧式距离阈值，其中所述聚类像素区域的欧式距离阈值为所述聚类像素区域的预设距离阈值与已聚类像素点数目的比值。4.根据权利要求1所述的方法，其特征在于，所述在所述多个聚类图像区域中提取满足待投影画面的投影尺寸比的最大像素连续区域，包括：在所述多个聚类图像区域中，提取出预设数目个目标图像区域，其中所述目标图像区域的像素点数目大于未被提取的聚类图像区域的像素点数目；针对每个目标图像区域，确定该目标图像区域中的最大矩形连续区域；按照所述待投影画面的投影尺寸比求取每个所述最大矩形连续区域对应的内接矩形区域；将区域面积最大的所述内接矩形区域作为所述最大像素连续区域。5.根据权利要求1-4中任意一项所述的方法，其特征在于，所述方法还包括：根据所述最大像素连续区域在所述墙面图像内的角点位置，以及投影设备与所述拍摄设备之间的投摄位置转换关系，对待投影画面进行画面映射，得到对应的待投影映射画面；控制所述投影设备对所述待投影映射画面进行投影，使所述待投影画面的画面内容在所述最佳投影区域内显示。6.根据权利要求5所述的方法，其特征在于，所述根据所述最大像素连续区域在所述墙面图像内的角点位置，以及投影设备与所述拍摄设备之间的投摄位置转换关系，对待投影画面进行画面映射，得到对应的待投影映射画面，包括：根据所述投摄位置转换关系对所述最大像素连续区域的角点位置进行位置转换，得到所述最大像素连续区域的角点位置在所述投影设备所在的投影坐标系下对应的角点映射坐标；计算所述角点映射坐标与所述待投影画面在所述投影坐标系下的顶点坐标之间的坐标映射关系；根据所述坐标映射关系对所述待投影画面内各像素点进行坐标映射转换，得到对应的待投影映射画面。7.根据权利要求5所述的方法，其特征在于，所述方法还包括：控制所述投影设备向目标墙面投影校准画面，并获取所述拍摄设备针对所述校准画面拍摄到的墙面校准图像；计算所述校准画面在所述投影设备所在的投影坐标系下的第一角点坐标，以及所述校准画面在所述墙面校准图像所对应的拍摄坐标系下的第二角点坐标；根据所述第一角点坐标与所述第二角点坐标之间的对应关系，确定所述投影设备与所述拍摄设备之间的投摄位置转换关系。8.一种投影区域确定装置，其特征在于，所述装置包括：墙面图像获取模块，用于获取拍摄设备针对目标墙面拍摄到的墙面图像；颜色聚类处理模块，用于对所述墙面图像内各像素点进行聚类处理，并按照聚类结果对所述墙面图像进行图像分割，得到多个聚类图像区域；连续区域提取模块，用于在所述多个聚类图像区域中提取满足待投影画面的投影尺寸比的最大像素连续区域；投影区域认定模块，用于将所述目标墙面上与所述最大像素连续区域对应的墙面区域，作为所述待投影画面的最佳投影区域。9.根据权利要求8所述的装置，其特征在于，所述装置还包括：画面映射处理模块，用于根据所述最大像素连续区域在所述墙面图像内的角点位置，以及投影设备与所述拍摄设备之间的投摄位置转换关系，对待投影画面进行画面映射，得到对应的待投影映射画面；映射画面投影模块，用于控制所述投影设备对所述待投影映射画面进行投影，使所述待投影画面的画面内容在所述最佳投影区域内显示。10.根据权利要求9所述的装置，其特征在于，所述装置还包括：墙面投影校准模块，用于控制所述投影设备向目标墙面投影校准画面，并获取所述拍摄设备针对所述校准画面拍摄到的墙面校准图像；角点坐标计算模块，用于计算所述校准画面在所述投影设备所在的投影坐标系下的第一角点坐标，以及所述校准画面在所述墙面校准图像所对应的拍摄坐标系下的第二角点坐标；位置关系创建模块，用于根据所述第一角点坐标与所述第二角点坐标之间的对应关系，确定所述投影设备与所述拍摄设备之间的投摄位置转换关系。11.一种投影设备，其特征在于，包括处理器和存储器，所述存储器存储有能够被所述处理器执行的机器可执行指令，所述处理器可执行所述机器可执行指令，以实现权利要求1-7中任意一项所述的投影区域确定方法。12.一种可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时，实现权利要求1-7中任意一项所述的投影区域确定方法。
说明书desc
技术领域本申请涉及画面投影技术领域，具体而言，涉及一种投影区域确定方法、装置、投影设备及可读存储介质。背景技术目前，投影设备在实际使用过程中，往往需要将画面投射到墙面上进行显示。而通常情况下，墙面往往不一定是纯色或者存在异物，影响画面投影效果和用户观看体验。由此，用户通常需要通过人眼观测的方式人工地选定墙面中的某个区域作为投影区域，但通常选出的投影区域无法有效地保证画面投影效果，满足画面投影需求。发明内容有鉴于此，本申请的目的在于提供一种投影区域确定方法、装置、投影设备及可读存储介质，能够自动地在目标墙面上为待投影画面圈定出尺寸比匹配的满足画面投影需求的最佳投影区域，以通过该最佳投影区域提升画面投影效果。为了实现上述目的，本申请实施例采用的技术方案如下：第一方面，本申请实施例提供一种投影区域确定方法，所述方法包括：获取拍摄设备针对目标墙面拍摄到的墙面图像；对所述墙面图像内各像素点进行聚类处理，并按照聚类结果对所述墙面图像进行图像分割，得到多个聚类图像区域；在所述多个聚类图像区域中提取满足待投影画面的投影尺寸比的最大像素连续区域；将所述目标墙面上与所述最大像素连续区域对应的墙面区域，作为所述待投影画面的最佳投影区域。在可选的实施方式中，所述对所述墙面图像内各像素点进行聚类处理，包括：针对所述墙面图像内的每个像素点，计算该像素点与其邻域像素点之间的欧式距离；根据计算出的各欧式距离的数值分布状况，对所述墙面图像内各像素点进行像素聚类。在可选的实施方式中，所述根据计算出的各欧式距离的数值分布状况，对所述墙面图像内各像素点进行像素聚类，包括：对计算出的所有欧式距离按照升序的方式进行排序，得到欧式距离排序结果；按照所述欧式距离排序结果依次针对所述墙面图像中的每个待聚类的像素点，判断所述待聚类的像素点与相邻的聚类像素区域内相邻的已聚类像素点之间的欧式距离是否小于所述聚类像素区域的欧式距离阈值；若所述待聚类的像素点与所述相邻的已聚类像素点之间的欧式距离小于所述聚类像素区域的欧式距离阈值，则将所述未聚类的像素点聚类到所述聚类像素区域内，并更新所述聚类像素区域的欧式距离阈值，其中所述聚类像素区域的欧式距离阈值为所述聚类像素区域的预设距离阈值与已聚类像素点数目的比值。在可选的实施方式中，所述在所述多个聚类图像区域中提取满足待投影画面的投影尺寸比的最大像素连续区域，包括：在所述多个聚类图像区域中，提取出预设数目个目标图像区域，其中所述目标图像区域的像素点数目大于未被提取的聚类图像区域的像素点数目；针对每个目标图像区域，确定该目标图像区域中的最大矩形连续区域；按照所述待投影画面的投影尺寸比求取每个所述最大矩形连续区域对应的内接矩形区域；将区域面积最大的所述内接矩形区域作为所述最大像素连续区域。在可选的实施方式中，所述方法还包括：根据所述最大像素连续区域在所述墙面图像内的角点位置，以及投影设备与所述拍摄设备之间的投摄位置转换关系，对待投影画面进行画面映射，得到对应的待投影映射画面；控制所述投影设备对所述待投影映射画面进行投影，使所述待投影画面的画面内容在所述最佳投影区域内显示。在可选的实施方式中，所述所述最大像素连续区域在所述墙面图像内的角点位置，以及投影设备与所述拍摄设备之间的投摄位置转换关系，对待投影画面进行画面映射，得到对应的待投影映射画面，包括：根据所述投摄位置转换关系对所述最大像素连续区域的角点位置进行位置转换，得到所述最大像素连续区域的角点位置在所述投影设备所在的投影坐标系下对应的角点映射坐标；计算所述角点映射坐标与所述待投影画面在所述投影坐标系下的顶点坐标之间的坐标映射关系；根据所述坐标映射关系对所述待投影画面内各像素点进行坐标映射转换，得到对应的待投影映射画面。在可选的实施方式中，所述方法还包括：控制所述投影设备向目标墙面投影校准画面，并获取所述拍摄设备针对所述校准画面拍摄到的墙面校准图像；计算所述校准画面在所述投影设备所在的投影坐标系下的第一角点坐标，以及所述校准画面在所述墙面校准图像所对应的拍摄坐标系下的第二角点坐标；根据所述第一角点坐标与所述第二角点坐标之间的对应关系，确定所述投影设备与所述拍摄设备之间的投摄位置转换关系。第二方面，本申请实施例提供一种投影区域确定装置，所述装置包括：墙面图像获取模块，用于获取拍摄设备针对目标墙面拍摄到的墙面图像；像素聚类处理模块，用于对所述墙面图像内各像素点进行聚类处理，并按照聚类结果对所述墙面图像进行图像分割，得到多个聚类图像区域；连续区域提取模块，用于在所述多个聚类图像区域中提取满足待投影画面的投影尺寸比的最大像素连续区域；投影区域认定模块，用于将所述目标墙面上与所述最大像素连续区域对应的墙面区域，作为所述待投影画面的最佳投影区域。在可选的实施方式中，所述像素聚类处理模块对所述墙面图像内各像素点进行聚类处理的方式，包括：针对所述墙面图像内的每个像素点，计算该像素点与其邻域像素点之间的欧式距离；根据计算出的各欧式距离的数值分布状况，对所述墙面图像内各像素点进行像素聚类。在可选的实施方式中，所述像素聚类处理模块根据计算出的各欧式距离的数值分布状况，对所述墙面图像内各像素点进行像素聚类的方式，包括：对计算出的所有欧式距离按照升序的方式进行排序，得到欧式距离排序结果；按照所述欧式距离排序结果依次针对所述墙面图像中的每个待聚类的像素点，判断所述待聚类的像素点与相邻的聚类像素区域内相邻的已聚类像素点之间的欧式距离是否小于所述聚类像素区域的欧式距离阈值；若所述待聚类的像素点与所述相邻的已聚类像素点之间的欧式距离小于所述聚类像素区域的欧式距离阈值，则将所述待聚类的像素点聚类到所述聚类像素区域内，并更新所述聚类像素区域的欧式距离阈值，其中所述聚类像素区域的欧式距离阈值为所述聚类像素区域的预设距离阈值与已聚类像素点数目的比值。在可选的实施方式中，所述连续区域提取模块在所述多个聚类图像区域中提取满足待投影画面的投影尺寸比的最大像素连续区域，包括：在所述多个聚类图像区域中，提取出预设数目个目标图像区域，其中所述目标图像区域的像素点数目大于未被提取的聚类图像区域的像素点数目；针对每个目标图像区域，确定该目标图像区域中的最大矩形连续区域；按照所述待投影画面的投影尺寸比求取每个所述最大矩形连续区域对应的内接矩形区域；将区域面积最大的所述内接矩形区域作为所述最大像素连续区域。在可选的实施方式中，所述装置还包括：画面映射处理模块，用于根据所述最大像素连续区域在所述墙面图像内的角点位置，以及投影设备与所述拍摄设备之间的投摄位置转换关系，对待投影画面进行画面映射，得到对应的待投影映射画面；映射画面投影模块，用于控制所述投影设备对所述待投影映射画面进行投影，使所述待投影画面的画面内容在所述最佳投影区域内显示。在可选的实施方式中，所述画面映射处理模块根据所述最大像素连续区域在所述墙面图像内的角点位置，以及投影设备与所述拍摄设备之间的投摄位置转换关系，对待投影画面进行画面映射，得到对应的待投影映射画面的方式，包括：根据所述投摄位置转换关系对所述最大像素连续区域的角点位置进行位置转换，得到所述最大像素连续区域的角点位置在所述投影设备所在的投影坐标系下对应的角点映射坐标；计算所述角点映射坐标与所述待投影画面在所述投影坐标系下的顶点坐标之间的坐标映射关系；根据所述坐标映射关系对所述待投影画面内各像素点进行坐标映射转换，得到对应的待投影映射画面。在可选的实施方式中，所述装置还包括：墙面投影校准模块，用于控制所述投影设备向目标墙面投影校准画面，并获取所述拍摄设备针对所述校准画面拍摄到的墙面校准图像；角点坐标计算模块，用于计算所述校准画面在所述投影设备所在的投影坐标系下的第一角点坐标，以及所述校准画面在所述墙面校准图像所对应的拍摄坐标系下的第二角点坐标；坐标关系创建模块，用于根据所述第一角点坐标与所述第二角点坐标之间的对应关系，确定所述投影设备与所述拍摄设备之间的投摄位置转换关系。第三方面，本申请实施例提供一种投影设备，包括处理器和存储器，所述存储器存储有能够被所述处理器执行的机器可执行指令，所述处理器可执行所述机器可执行指令，以实现前述实施方式中任意一项所述的投影区域确定方法。第四方面，本申请实施例提供一种可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时，实现前述实施方式中任意一项所述的投影区域确定方法。本申请实施例的有益效果是：本申请通过获取拍摄设备针对目标墙面拍摄的墙面图像，接着对该墙面图像进行聚类处理，得到该墙面图像下的多个聚类图像区域，而后从多个聚类图像区域中提取出满足待投影画面的投影尺寸比的最大像素连续区域，进而将目标墙面上与该最大像素连续区域对应的墙面区域，作为待投影画面的最佳投影区域，从而在目标墙面上自行为待投影画面求取出满足投影尺寸比且无异物或杂色存在的最佳投影区域，使待投影画面在投射到最佳投影区域内显示时，具有最佳的画面投影效果。为使本申请的上述目的、特征和优点能更明显易懂，下文特举较佳实施例，并配合所附附图，作详细说明如下。附图说明为了更清楚地说明本申请实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本申请的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1为本申请实施例提供的投影区域确定方法的流程示意图之一；图2为图1中的步骤S230包括的子步骤的流程示意图；图3为本申请实施例提供的投影区域确定方法的流程示意图之二；图4为图3中的步骤S250包括的子步骤的流程示意图；图5为本申请实施例提供的投影区域确定方法的流程示意图之三；图6为本申请实施例提供的投影区域确定装置的组成示意图之一；图7为本申请实施例提供的投影区域确定装置的组成示意图之二；图8为本申请实施例提供的投影区域确定装置的组成示意图之三；图9为本申请实施例提供的投影设备的组成示意图。图标：100-投影区域确定装置；110-墙面图像获取模块；120-像素聚类处理模块；130-连续区域提取模块；140-投影区域认定模块；150-画面映射处理模块；160-映射画面投影模块；170-墙面投影校准模块；180-角点坐标计算模块；190-位置关系创建模块；10-投影设备；11-存储器；12-处理器；13-通信单元；14-拍摄设备。具体实施方式为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本申请实施例的组件可以以各种不同的配置来布置和设计。因此，以下对在附图中提供的本申请的实施例的详细描述并非旨在限制要求保护的本申请的范围，而是仅仅表示本申请的选定实施例。基于本申请中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。应注意到：相似的标号和字母在下面的附图中表示类似项，因此，一旦某一项在一个附图中被定义，则在随后的附图中不需要对其进行进一步定义和解释。在本申请的描述中，需要理解的是，术语“第一”和“第二”等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。对于本领域的普通技术人员而言，可以具体情况理解上述术语在本申请中的具体含义。下面结合附图，对本申请的一些实施方式作详细说明。在不冲突的情况下，下述的实施例及实施例中的特征可以相互结合。请参照图1，图1是本申请实施例提供的投影区域确定方法的流程示意图之一。在本申请实施例中，图1所示的投影区域确定方法能够在某个特定墙面上为待投影画面，自动圈定出满足该待投影画面的投影尺寸比例及画面投影需求的最佳投影区域，使该待投影画面被投影设备投射到对应的最佳投影区域内显示时，具有最佳的画面投影效果。其中，图1所示的投影区域确定方法可由与投影设备及拍摄设备通信连接的计算机设备单独执行，也可直接由与拍摄设备通信连接的投影设备单独执行，还可由集成有拍摄设备的投影设备独自执行。下面对图1所示的投影区域确定方法进行详细描述。步骤S210，获取拍摄设备针对目标墙面拍摄到的墙面图像。在本实施例中，当确定出投影设备的投影墙面即目标墙面时，可通过该投影设备向目标墙面投射纯白图像，也可通过独立于该投影设备之外的其他投射设备向目标墙面投射纯白图像，而后由拍摄设备对目标墙面进行图像拍摄，得到对应的墙面图像。其中，为提升图1所示的投影区域确定方法最终确定出的最佳投影区域的精准度，被投射的纯白图像的亮度需高于所述投影设备的最大投影亮度的20％，以确保所述墙面图像中蕴含的目标墙面的特征更为清晰明了。在本实施例中，当所述拍摄设备拍摄得到与目标墙面对应的墙面图像后，图1所示的投影区域确定方法的执行主体直接从所述拍摄设备处获取所述墙面图像，或由所述拍摄设备自行将所述墙面图像发送给所述执行主体。步骤S220，对墙面图像内各像素点进行聚类处理，并按照聚类结果对墙面图像进行图像分割，得到多个聚类图像区域。在本实施例中，当得到与目标墙面对应的墙面图像后，可通过采用漫水填充算法或分水岭算法，对所述墙面图像内各像素点之间的色度联通状况进行聚类，并相应地进行图像分割，以从所述墙面图像中划分出多个聚类图像区域。其中，每个聚类图像区域下的各像素点归属于同一个像素类别。在本实施例的一种实施方式中，为提升对墙面图像中各像素点进行聚类处理时的聚类精细度，本申请实施例通过提供一种颜色聚类方式提升墙面图像的聚类精细度。具体地，所述对墙面图像内各像素点进行聚类处理的步骤，可以包括：针对所述墙面图像内的每个像素点，计算该像素点与其邻域像素点之间的欧式距离；根据计算出的各欧式距离的数值分布状况，对所述墙面图像内各像素点进行像素聚类。在此过程中，为提升上述像素聚类操作的聚类效率，避免执行无必要的聚类操作，上述根据计算出的各欧式距离的数值分布状况，对所述墙面图像内各像素点进行像素聚类的步骤可以包括：对计算出的所有欧式距离按照升序的方式进行排序，得到欧式距离排序结果；按照所述欧式距离排序结果依次针对所述墙面图像中的每个待聚类的像素点，判断所述待聚类的像素点与相邻的聚类像素区域内相邻的已聚类像素点之间的欧式距离是否小于所述聚类像素区域的欧式距离阈值，其中所述聚类像素区域的欧式距离阈值为所述聚类像素区域的预设距离阈值与已聚类像素点数目的比值；若所述待聚类的像素点与所述相邻的已聚类像素点之间的欧式距离小于所述聚类像素区域的欧式距离阈值，则将所述待聚类的像素点聚类到所述聚类像素区域内，并更新所述聚类像素区域的欧式距离阈值。其中，可采用八邻域法遍历地计算所述墙面图像内的每个像素点与其八邻域像素点在颜色方面的欧式距离。每个像素点会预先分配一个针对欧式距离的预设距离阈值，以便于将每个像素点默认为一个初始像素区域，而后按照欧式距离排序结果依次针对每个欧式距离所对应的需要被聚类的待聚类像素点，判断该待聚类像素点与相邻的已聚类像素点之间的欧式距离是否小于该已聚类像素点所在聚类像素区域的欧式距离阈值，并在小于时将该待聚类像素点归类到该聚类像素区域中，同时对该聚类像素区域的欧式距离阈值进行更新，从而将所述墙面图像内颜色相似的像素点合并到同一像素类别下。步骤S230，在多个聚类图像区域中提取满足待投影画面的投影尺寸比的最大像素连续区域。在本实施例中，当确定出墙面图像所包括的多个聚类图像区域后，会确定出每个聚类图像区域的区域轮廓下的形状为矩形的最大像素联通区域，而后针对每个最大像素联通区域按照待投影画面的投影尺寸比确定其对应的内接矩形区域，并最终提取面积最大的内接矩形区域作为满足待投影画面的投影尺寸比的最大像素连续区域。其中，所述投影尺寸比可以是3:2、4:3及16:9等，其数值可在制作待投影画面时进行相关设置。此时，该最大像素连续区域即为墙面图像中无异物或杂色存在的尺寸与待投影画面成比例的最大图像区域。当该待投影画面被所述投影设备投影到所述目标墙面上的与所述最大像素连续区域对应的墙面区域内时，可直接得到最佳的画面投影效果。具体地，请参照图2，图2是图1中的步骤S230包括的子步骤的流程示意图。在本实施例中，所述步骤S230可以包括子步骤S231～子步骤S234。子步骤S231，在多个聚类图像区域中，提取出预设数目个目标图像区域，其中目标图像区域的像素点数目大于未被提取的聚类图像区域的像素点数目。子步骤S232，针对每个目标图像区域，确定该目标图像区域中的最大矩形连续区域。子步骤S233，按照待投影画面的投影尺寸比求取每个最大矩形连续区域对应的内接矩形区域。子步骤S234，将区域面积最大的内接矩形区域作为最大像素连续区域。其中，在确定出预设数目个目标图像区域后，会针对每个目标图像区域提取其区域轮廓，并采用直方图投影算法确定该区域轮廓内矩形连续区域的最大面积，得到该目标图像区域所对应的最大矩形连续区域。请再次参照图1，步骤S240，将目标墙面上与最大像素连续区域对应的墙面区域，作为待投影画面的最佳投影区域。在本实施例中，当确定出所述墙面图像中的与待投影画面的投影尺寸比匹配的最大像素连续区域时，表明投影设备可以将所述待投影画面按比例地投射到所述目标墙面上与该最大像素连续区域对应的墙面区域上，并通过该墙面区域达到所述目标墙面能够提供的最佳投影效果，此时所述最大像素连续区域即与所述待投影画面的最佳投影区域相互对应，所述目标墙面上与该最大像素连续区域对应的墙面区域即为所述最佳投影区域。由此，本申请可通过执行图1所示的投影区域确定方法，在目标墙面上自行为待投影画面求取出满足投影尺寸比且无异物或杂色存在的最佳投影区域，使待投影画面在被投射到最佳投影区域内显示时，具有最佳的画面投影效果。可选地，请参照图3，图3是本申请实施例提供的投影区域确定方法的流程示意图之二。在本申请实施例中，图3所示的投影区域确定方法与图1所示的投影区域确定方法相比，图3所示的投影区域确定方法还可以步骤S250及步骤S260，其中所述步骤S250及所述步骤S260能够使投影设备自适应地将待投影画面进行缩放并投影到对应的最佳投影区域内，无需用户人工调试投影设备的投影画面尺寸及画面投影位置，避免出现因人工调试投影设备引起的投影误差，提升用户体验。步骤S250，根据最大像素连续区域在所述墙面图像内的角点位置，以及投影设备与拍摄设备之间的投摄位置转换关系，对待投影画面进行画面映射，得到对应的待投影映射画面。在本实施例中，所述投摄位置转换关系用于表示所述投影设备与所述拍摄设备以所述目标墙面为参照的情况下，同一对象在投影画面和拍摄图像中的对象位置之间的对应关系。换句话说，在所述投影设备与所述拍摄设备各自相对于所述目标墙面的位置不变的情况下，所述投影设备向所述目标墙面投影包括某一对象的画面，而所述拍摄设备朝向所述目标墙面拍摄包括该对象的画面时，该对象在所述投影设备的投影坐标系下的位置信息，和该对象在所述拍摄设备的拍摄坐标系下的位置信息之间的对应关系，即为上述投摄位置转换关系。因此，当确定出待投影画面所匹配的最佳投影区域时，可依据所述投摄位置转换关系确定出所述最大像素连续区域在投影坐标系下对应的角点分布信息，而后将待投影画面映射到所述角点分布信息所对应的区域范围内，以在投影坐标系所在层面内将待投影画面缩放映射至所述最佳投影区域内，得到对应的待投影映射画面。具体地，请参照图4，图4是图3中的步骤S250包括的子步骤的流程示意图。在本实施例中，所述步骤S250可以包括子步骤S251～子步骤S253。子步骤S251，根据投摄位置转换关系对最大像素连续区域的角点位置进行位置转换，得到最大像素连续区域的角点位置在投影设备所在的投影坐标系下对应的角点映射坐标。子步骤S252，计算角点映射坐标与待投影画面在投影坐标系下的顶点坐标之间的坐标映射关系。子步骤S253，根据坐标映射关系对待投影画面内各像素点进行坐标映射转换，得到对应的待投影映射画面。其中，所述坐标映射关系可用于表示所述最佳投影区域在所述投影坐标系所在层面内对应的坐标区域，与所述待投影画面的画面轮廓区域之间的位置映射关系。由此，可通过执行子步骤S251～子步骤S253，在投影坐标系所在层面内将待投影画面缩放映射至所述最佳投影区域内，无需用户人工调试投影设备的投影画面尺寸及画面投影位置，避免出现因人工调试投影设备引起的投影误差。步骤S260，控制投影设备对待投影映射画面进行投影，使待投影画面的画面内容在最佳投影区域内显示。在本实施例中，当待投影画面在投影坐标系所在层面内被缩放映射至所述最佳投影区域后，可直接控制所述投影设备对得到的待投影映射画面进行投影，使该投影映射画面对应投射在所述最佳投影区域内，使待投影画面的画面内容得以在最佳投影区域内正常显示，以达到最佳的画面投影效果，提升用户体验，无需用户花费人力调试投影设备。由此，本申请可通过执行图3所示的投影区域确定方法，使投影设备自适应地将待投影画面进行缩放并投影到对应的最佳投影区域内，无需用户人工调试投影设备的投影画面尺寸及画面投影位置，避免出现因人工调试投影设备引起的投影误差，提升用户体验。可选地，请参照图5，图5是本申请实施例提供的投影区域确定方法的流程示意图之三。在本申请实施例中，图5所示的投影区域确定方法与图3所示的投影区域确定方法相比，图5所示的投影区域确定方法还可以步骤S270、步骤S280及步骤S290，其中所述步骤S270、步骤S280及步骤S290用于在所述投影设备与所述拍摄设备各自相对于所述目标墙面的位置不变时，精准测量出以目标墙面为参照的投影设备与拍摄设备之间的投摄位置转换关系，进而保证投影设备能够正常将待投影画面缩放并投影到最佳投影区域内，提升用户体验。其中，当所述投影设备和/或所述拍摄设备相对于所述目标墙面的位置发生变动时，便需重新执行所述步骤S270、步骤S280及步骤S290，以对所述投摄位置转换关系进行参数校准。步骤S270，控制投影设备向目标墙面投影校准画面，并获取拍摄设备针对校准画面拍摄到的墙面校准图像。在本实施例中，所述校准画面可以是黑白棋盘格画面，也可以是黑白条纹画面，具体的画面内容可根据用户需求进行不同的配置。步骤S280，计算校准画面在投影设备所在的投影坐标系下的第一角点坐标，以及校准画面在墙面校准图像所对应的拍摄坐标系下的第二角点坐标。步骤S290，根据第一角点坐标与第二角点坐标之间的对应关系，确定投影设备与拍摄设备之间的投摄位置转换关系。其中，可直接将所述第一角点坐标与所述第二角点坐标之间的对应关系，作为以目标墙面为参照的投影设备与拍摄设备之间的投摄位置转换关系。由此，本申请可通过执行图5所示的投影区域确定方法，在所述投影设备与所述拍摄设备各自相对于所述目标墙面的位置不变时，精准测量出以目标墙面为参照的投影设备与拍摄设备之间的投摄位置转换关系，并在所述投影设备和/或所述拍摄设备相对于所述目标墙面的位置发生变动时，同步地对所述投摄位置转换关系进行参数校准，进而保证所述投影设备最终能够正常地将待投影画面缩放并投影到最佳投影区域内，提升用户体验。在本申请中，本申请实施例提供一种投影区域确定装置，使存储或固化有所述投影区域确定装置的执行主体能够通过运行所述投影区域确定装置所包括的软件功能模块及计算机程序等，实现上述投影区域确定方法所对应的功能。下面对本申请提供的投影区域确定装置的具体组成进行描述。可选地，请参照图6，图6是本申请实施例提供的投影区域确定装置100的组成示意图之一。在本申请实施例中，所述投影区域确定装置100可以包括墙面图像获取模块110、像素聚类处理模块120、连续区域提取模块130及投影区域认定模块140。墙面图像获取模块110，用于获取拍摄设备针对目标墙面拍摄到的墙面图像。像素聚类处理模块120，用于对墙面图像内各像素点进行聚类处理，并按照聚类结果对墙面图像进行图像分割，得到多个聚类图像区域。连续区域提取模块130，用于在多个聚类图像区域中提取满足待投影画面的投影尺寸比的最大像素连续区域。投影区域认定模块140，用于将目标墙面上与最大像素连续区域对应的墙面区域，作为待投影画面的最佳投影区域。在本实施例中，所述像素聚类处理模块120对墙面图像内各像素点进行聚类处理的方式，包括：针对所述墙面图像内的每个像素点，计算该像素点与其邻域像素点之间的欧式距离；根据计算出的各欧式距离的数值分布状况，对所述墙面图像内各像素点进行像素聚类。其中，所述像素聚类处理模块120根据计算出的各欧式距离的数值分布状况，对所述墙面图像内各像素点进行像素聚类的方式，包括：对计算出的所有欧式距离按照升序的方式进行排序，得到欧式距离排序结果；按照所述欧式距离排序结果依次针对所述墙面图像中的每个待聚类的像素点，判断所述待聚类的像素点与相邻的聚类像素区域内相邻的已聚类像素点之间的欧式距离是否小于所述聚类像素区域的欧式距离阈值；若所述待聚类的像素点与所述相邻的已聚类像素点之间的欧式距离小于所述聚类像素区域的欧式距离阈值，则将所述待聚类的像素点聚类到所述聚类像素区域内，并更新所述聚类像素区域的欧式距离阈值，其中所述聚类像素区域的欧式距离阈值为所述聚类像素区域的预设距离阈值与已聚类像素点数目的比值。在本实施例中，所述连续区域提取模块130在多个聚类图像区域中提取满足待投影画面的投影尺寸比的最大像素连续区域，包括：在所述多个聚类图像区域中，提取出预设数目个目标图像区域，其中所述目标图像区域的像素点数目大于未被提取的聚类图像区域的像素点数目；针对每个目标图像区域，确定该目标图像区域中的最大矩形连续区域；按照所述待投影画面的投影尺寸比求取每个所述最大矩形连续区域对应的内接矩形区域；将区域面积最大的所述内接矩形区域作为所述最大像素连续区域。可选地，请参照图7，图7是本申请实施例提供的投影区域确定装置100的组成示意图之二。在本申请实施例中，所述投影区域确定装置100还可以包括画面映射处理模块150及映射画面投影模块160。画面映射处理模块150，用于根据最大像素连续区域在墙面图像内的角点位置，以及投影设备与拍摄设备之间的投摄位置转换关系，对待投影画面进行画面映射，得到对应的待投影映射画面。映射画面投影模块160，用于控制投影设备对待投影映射画面进行投影，使待投影画面的画面内容在最佳投影区域内显示。在本实施例中，所述画面映射处理模块150根据最大像素连续区域在墙面图像内的角点位置，以及投影设备与拍摄设备之间的投摄位置转换关系，对待投影画面进行画面映射，得到对应的待投影映射画面的方式，包括：根据所述投摄位置转换关系对所述最大像素连续区域的角点位置进行位置转换，得到所述最大像素连续区域的角点位置在所述投影设备所在的投影坐标系下对应的角点映射坐标；计算所述角点映射坐标与所述待投影画面在所述投影坐标系下的顶点坐标之间的坐标映射关系；根据所述坐标映射关系对所述待投影画面内各像素点进行坐标映射转换，得到对应的待投影映射画面。可选地，请参照图8，图8是本申请实施例提供的投影区域确定装置100的组成示意图之三。在本申请实施例中，所述投影区域确定装置100还可以包括墙面投影校准模块170、角点坐标计算模块180及位置关系创建模块190。墙面投影校准模块170，用于控制投影设备向目标墙面投影校准画面，并获取拍摄设备针对校准画面拍摄到的墙面校准图像。角点坐标计算模块180，用于计算校准画面在投影设备所在的投影坐标系下的第一角点坐标，以及校准画面在墙面校准图像所对应的拍摄坐标系下的第二角点坐标。位置关系创建模块190，用于根据第一角点坐标与第二角点坐标之间的对应关系，确定投影设备与拍摄设备之间的投摄位置转换关系。需要说明的是，本申请实施例所提供的投影区域确定装置100，其基本原理及产生的技术效果与前述投影区域确定方法相同，为简要描述，本实施例部分未提及之处，可参考上述的针对投影区域确定方法的描述内容。在本申请中，本申请实施例提供一种存储或固化有所述投影区域确定装置100的投影设备，其能够通过运行所述投影区域确定装置100所包括的软件功能模块及计算机程序等，实现上述投影区域确定方法所对应的功能。下面对本申请提供的投影设备的具体组成进行描述。请参照图9，图9是本申请实施例提供的投影设备10的组成示意图。在本申请实施例中，所述投影设备10可用于进行画面投影，并在目标墙面上自行为待投影画面求取出满足投影尺寸比且无异物或杂色存在的最佳投影区域，使待投影画面在投射到最佳投影区域内显示时，具有最佳的画面投影效果。其中，所述投影设备10可以包括存储器11、处理器12、通信单元13、拍摄设备14及所述投影区域确定装置100。所述存储器11、所述处理器12、所述通信单元13及所述拍摄设备14各个元件相互之间接或间接地电性连接，以实现数据的传输或交互。例如，所述存储器11、所述处理器12、所述通信单元13及所述拍摄设备14这些元件相互之间可通过一条或多条通讯总线或信号线实现电性连接。在本实施例中，所述存储器11可以是，但不限于，随机存取存储器，只读存储器，可编程只读存储器，可擦除只读存储器，电可擦除只读存储器等。其中，所述存储器11用于存储程序，所述处理器12在接收到执行指令后，可相应地执行所述程序。在本实施例中，所述处理器12可以是一种具有信号的处理能力的集成电路芯片。所述处理器12可以是通用处理器，包括中央处理器、图形处理器及网络处理器中的至少一种。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等，可以实现或者执行本申请实施例中的公开的各方法、步骤及逻辑框图。在本实施例中，所述通信单元13用于通过网络建立所述投影设备10与其他电子设备之间的通信连接，并通过所述网络收发数据，其中所述网络包括有线通信网络及无线通信网络。在本实施例中，所述拍摄设备14包括摄像头，所述拍摄设备14通过所述摄像头对所述投影设备10投射出的画面进行图像采集。在本实施例中，所述投影区域确定装置100包括至少一个能够以软件或固件的形式存储于所述存储器11中或固化在所述投影设备10的操作系统中的软件功能模块。所述处理器12可用于执行所述存储器11存储的可执行模块，例如所述投影区域确定装置100所包括的软件功能模块及计算机程序等。所述投影设备10通过所述投影区域确定装置100，在目标墙面上自行为待投影画面求取出满足投影尺寸比且无异物或杂色存在的最佳投影区域，并自适应地将待投影画面进行缩放并投影到对应的最佳投影区域内，无需用户人工调试投影设备10的投影画面尺寸及画面投影位置，避免出现因人工调试投影设备10引起的投影误差，提升用户体验，达到了最佳的画面投影效果。其中，所述投影设备10也可通过所述投影区域确定装置100在所述投影设备10与所述拍摄设备14各自相对于所述目标墙面的位置不变时，精准测量出以目标墙面为参照的投影设备10与拍摄设备14之间的投摄位置转换关系，并在所述投影设备10和/或所述拍摄设备14相对于所述目标墙面的位置发生变动时，同步地对所述投摄位置转换关系进行参数校准。可以理解的是，图9所示的框图仅为投影设备10的一种组成示意图，所述投影设备10还可包括比图9中所示更多或者更少的组件，或者具有与图9所示不同的配置。图9中所示的各组件可以采用硬件、软件或其组合实现。在本申请所提供的实施例中，应该理解到，所揭露的装置和方法，也可以通过其它的方式实现。以上所描述的装置实施例仅仅是示意性的，例如，附图中的流程图和框图显示了根据本申请的实施例的装置、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段或代码的一部分，所述模块、程序段或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现方式中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个连续的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行规定的功能或动作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。另外，在本申请各个实施例中的各功能模块可以集成在一起形成一个独立的部分，也可以是各个模块单独存在，也可以两个或两个以上模块集成形成一个独立的部分。所述功能如果以软件功能模块的形式实现并作为独立的产品销售或使用时，可以存储在一个可读存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个可读存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的可读存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。综上所述，在本申请实施例提供的投影区域确定方法、装置、投影设备及可读存储介质中，本申请获取拍摄设备针对目标墙面拍摄的墙面图像，接着对该墙面图像进行聚类处理，得到该墙面图像下的多个聚类图像区域，而后从多个聚类图像区域中提取出满足待投影画面的投影尺寸比的最大像素连续区域，进而将目标墙面上与该最大像素连续区域对应的墙面区域，作为待投影画面的最佳投影区域，从而在目标墙面上自行为待投影画面求取出满足投影尺寸比且无异物或杂色存在的最佳投影区域，使待投影画面在投射到最佳投影区域内显示时，具有最佳的画面投影效果。同时，本申请在确定出待投影画面的最佳投影区域后，可基于以目标墙面为参照的投影设备与拍摄设备之间的投摄位置转换关系，根据最大像素连续区域在墙面图像内的角点位置，在同一层面内将待投影画面缩放映射到最佳投影区域中并相应地进行画面投影，从而使投影设备自适应地将待投影画面进行缩放并投影到对应的最佳投影区域内，无需用户人工调试投影设备的投影画面尺寸及画面投影位置，避免出现因人工调试投影设备引起的投影误差，提升用户体验。此外，本申请还可在所述投影设备与所述拍摄设备各自相对于所述目标墙面的位置不变时，精准测量出以目标墙面为参照的投影设备与拍摄设备之间的投摄位置转换关系，并在所述投影设备和/或所述拍摄设备相对于所述目标墙面的位置发生变动时，同步地对所述投摄位置转换关系进行参数校准，进而保证所述投影设备最终能够正常地将待投影画面缩放并投影到最佳投影区域内，提升用户体验。以上所述，仅为本申请的各种实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应所述以权利要求的保护范围为准。
