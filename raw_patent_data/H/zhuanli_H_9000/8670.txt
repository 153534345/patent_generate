标题title
一种码流智能切换装置及切换方法
摘要abst
本申请涉及一种码流智能切换装置及切换方法，属于广播数字电视技术领域，包括机箱，机箱内设置有信号处理板和前面板，信号处理板包括主路码流输入单元、主路码流监测模块、备路码流输入单元、备路码流监测模块、垫播码流输入单元、切换判决模块、码流输出单元和主控CPU单元；切换判决模块用于分别接收主路码流信号、备路码流信号和垫播码流信号，还用于根据主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择，并将切换选择的码流输入单元输出的码流信号发送至码流输出单元；主控CPU单元用于对码流智能切换装置进行控制。本申请能够便于对各个输入信源的码流质量进行综合性判断，使得提供的节目信源更加稳定可靠。
权利要求书clms
1.一种码流智能切换装置，其特征在于：包括机箱，所述机箱内设置有信号处理板和前面板，所述信号处理板包括主路码流输入单元、主路码流监测模块、备路码流输入单元、备路码流监测模块、垫播码流输入单元、切换判决模块、码流输出单元和主控CPU单元，所述前面板用于提供显示和按键操作功能；所述切换判决模块，分别连接于所述主路码流输入单元、备路码流输入单元和垫播码流输入单元，用于分别接收主路码流信号、备路码流信号和垫播码流信号；所述主路码流监测模块，连接于所述主路码流输入单元，用于对所述主路码流信号进行监测，并输出主路监测结果信号；所述备路码流监测模块，连接于所述备路码流输入单元，用于对所述备路码流信号进行监测，并输出备路监测结果信号；其中，所述监测结果信号包括视频监测结果信号、音频监测结果信号、PMT监测结果信号和PAT监测结果信号；所述切换判决模块，还分别连接于所述主路码流监测模块、备路码流监测模块和码流输出单元，用于根据所述主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择，并将切换选择的码流输入单元输出的码流信号发送至码流输出单元；所述主控CPU单元，分别与所述前面板、主路码流输入单元、主路码流监测模块、备路码流输入单元、备路码流监测模块、垫播码流输入单元、切换判决模块、码流输出单元电连接，用于对所述码流智能切换装置进行控制。2.根据权利要求1所述的一种码流智能切换装置，其特征在于：所述前面板包括显示模块和按键交互模块，所述显示模块用于提供显示功能，所述按键交互模块用于接收并响应于按键触发信号进行相应的选择和参数配置。3.根据权利要求1所述的一种码流智能切换装置，其特征在于：所述主路码流监测模块包括主路视频监测单元、主路音频监测单元、主路PMT监测单元、主路PAT监测单元和主路监测结果输出单元；所述主路视频监测单元，用于监测所述主路码流信号在预设监测周期内发生视频PID错误的次数是否超过预设视频PID错误次数阈值，若是，则输出主路视频PID监测结果信号为异常；所述主路视频监测单元，还用于监测所述主路码流信号在预设监测周期内发生视频PID连续计数错误的次数是否超过预设视频PID连续计数错误次数阈值，若是，则输出主路视频PID连续计数监测结果信号为异常；所述主路音频监测单元，用于监测所述主路码流信号在预设监测周期内发生音频PID错误的次数是否超过预设音频PID错误次数阈值，若是，则输出主路音频PID监测结果信号为异常；所述主路音频监测单元，还用于监测所述主路码流信号在预设监测周期内发生音频PID连续计数错误的次数是否超过预设音频PID连续计数错误次数阈值，若是，则输出主路音频PID连续计数监测结果信号为异常；所述主路PMT监测单元，用于监测所述主路码流信号在预设监测周期内发生PMT错误的次数是否超过预设PMT错误次数阈值，若是，则输出主路PMT监测结果信号为异常；所述主路PAT监测单元，用于监测所述主路码流信号在预设监测周期内发生PAT错误的次数是否超过预设PAT错误次数阈值，若是，则输出主路PAT监测结果信号为异常；所述主路监测结果输出单元，分别连接于所述主路视频监测单元、主路音频监测单元、主路PMT监测单元和主路PAT监测单元，用于分别接收所述主路视频PID监测结果信号、主路视频PID连续计数监测结果信号、主路音频PID监测结果信号、主路音频PID连续计数监测结果信号、主路PMT监测结果信号和主路PAT监测结果信号，并生成所述主路监测结果信号进行输出。4.根据权利要求1所述的一种码流智能切换装置，其特征在于：所述备路码流监测模块包括备路视频监测单元、备路音频监测单元、备路PMT监测单元、备路PAT监测单元和备路监测结果输出单元；所述备路视频监测单元，用于监测所述备路码流信号在预设监测周期内发生视频PID错误的次数是否超过预设视频PID错误次数阈值，若是，则输出备路视频PID监测结果信号为异常；所述备路视频监测单元，还用于监测所述备路码流信号在预设监测周期内发生视频PID连续计数错误的次数是否超过预设视频PID连续计数错误次数阈值，若是，则输出备路视频PID连续计数监测结果信号为异常；所述备路音频监测单元，用于监测所述备路码流信号在预设监测周期内发生音频PID错误的次数是否超过预设音频PID错误次数阈值，若是，则输出备路音频PID监测结果信号为异常；所述备路音频监测单元，还用于监测所述备路码流信号在预设监测周期内发生音频PID连续计数错误的次数是否超过预设音频PID连续计数错误次数阈值，若是，则输出备路音频PID连续计数监测结果信号为异常；所述备路PMT监测单元，用于监测所述备路码流信号在预设监测周期内发生PMT错误的次数是否超过预设PMT错误次数阈值，若是，则输出备路PMT监测结果信号为异常；所述备路PAT监测单元，用于监测所述备路码流信号在预设监测周期内发生PAT错误的次数是否超过预设PAT错误次数阈值，若是，则输出备路PAT监测结果信号为异常；所述备路监测结果输出单元，分别连接于所述备路视频监测单元、备路音频监测单元、备路PMT监测单元和备路PAT监测单元，用于分别接收所述备路视频PID监测结果信号、备路视频PID连续计数监测结果信号、备路音频PID监测结果信号、备路音频PID连续计数监测结果信号、备路PMT监测结果信号和备路PAT监测结果信号，并生成所述备路监测结果信号进行输出。5.根据权利要求1到4任一所述的一种码流智能切换装置，其特征在于：所述切换判决模块包括码流错误指数生成单元、主路判决单元、备路判决单元、垫播判决单元和辅助判决单元；所述码流错误指数生成单元，用于根据所述主路监测结果信号和备路监测结果信号，分别生成对应的主路码流错误指数和备路码流错误指数；所述主路判决单元，连接于所述码流错误指数生成单元，用于在当前切换选择的码流输入单元为主路码流输入单元时，判断所述备路码流错误指数是否小于所述主路码流错误指数，若是，则切换选择至备路码流输入单元；所述备路判决单元，连接于所述码流错误指数生成单元，用于在当前切换选择的码流输入单元为备路码流输入单元时，判断所述主路码流错误指数是否小于或等于备路码流错误指数，若是，则切换选择至主路码流输入单元；所述辅助判决单元，用于在当前切换选择的码流输入单元为主路码流输入单元或备路码流输入单元时，根据所述主路监测结果信号和备路监测结果信号进行判断，若主路PMT监测结果信号和/或主路PAT监测结果信号发生异常，则判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若是，则切换选择至垫播码流输入单元；所述垫播判决单元，用于在当前切换选择的码流输入单元为垫播码流输入单元时，根据所述主路监测结果信号判断主路PMT监测结果信号和/或主路PAT监测结果信号是否发生异常，若否，则切换选择至主路码流输入单元；若是，则根据所述备路监测结果信号判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若否，则切换选择至备路码流输入单元。6.根据权利要求5所述的一种码流智能切换装置，其特征在于：所述码流错误指数生成单元包括主路码流错误指数生成单元和备路码流错误指数生成单元；所述主路码流错误指数生成单元，用于根据预设映射表，将主路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加，得到所述主路码流错误指数；所述备路码流错误指数生成单元，用于根据预设映射表，将备路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加，得到所述备路码流错误指数；其中，预设映射表包括多组监测结果信号对应的预设错误指数，每个监测结果信号均对应一个预设错误指数。7.一种码流智能切换方法，其特征在于，应用于权利要求1到6任一所述的码流智能切换装置，所述切换方法包括：分别接收所述主路码流信号、备路码流信号和垫播码流信号；接收所述主路监测结果信号和备路监测结果信号；其中，所述监测结果信号包括视频监测结果信号、音频监测结果信号、PMT监测结果信号和PAT监测结果信号；根据所述主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择，并将切换选择的码流输入单元输出的码流信号发送至所述码流输出单元。8.根据权利要求7所述的一种码流智能切换方法，其特征在于，所述根据主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择的步骤，包括：在当前切换选择的码流输入单元为主路码流输入单元时，根据所述主路监测结果信号和备路监测结果信号，分别生成对应的主路码流错误指数和备路码流错误指数，判断所述备路码流错误指数是否小于所述主路码流错误指数，若是，则切换选择至备路码流输入单元；在当前切换选择的码流输入单元为备路码流输入单元时，根据所述主路监测结果信号和备路监测结果信号，分别生成对应的主路码流错误指数和备路码流错误指数，判断所述主路码流错误指数是否小于或等于备路码流错误指数，若是，则切换选择至主路码流输入单元；在当前切换选择的码流输入单元为主路码流输入单元或备路码流输入单元时，根据所述主路监测结果信号和备路监测结果信号进行判断，若主路PMT监测结果信号和/或主路PAT监测结果信号发生异常，则判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若是，则切换选择至垫播码流输入单元；在当前切换选择的码流输入单元为垫播码流输入单元时，根据所述主路监测结果信号判断主路PMT监测结果信号和/或主路PAT监测结果信号是否发生异常，若否，则切换选择至主路码流输入单元；若是，则根据所述备路监测结果信号判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若否，则切换选择至备路码流输入单元。9.根据权利要求8所述的一种码流智能切换方法，其特征在于，所述根据所述主路监测结果信号和备路监测结果信号，分别生成对应的主路码流错误指数和备路码流错误指数的步骤包括：根据预设映射表，将主路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加，得到所述主路码流错误指数；根据预设映射表，将备路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加，得到所述备路码流错误指数；其中，预设映射表包括多组监测结果信号对应的预设错误指数，每个监测结果信号均对应一个预设错误指数。10.一种计算机可读存储介质，其特征在于：存储有能够被处理器加载并执行如权利要求7到9中任一种方法的计算机程序。
说明书desc
技术领域本申请涉及广播数字电视技术领域，尤其是涉及一种码流智能切换装置及切换方法。背景技术随着广播电视技术的快速发展和全面普及，电视节目和广播节目作为最有公信力的直播节目深受大家的喜爱和关注。由于广播电视节目信源广泛，有线电视网络公司和IPTV新媒体的前端播出机房大部分都是接收卫星传输的数字电视节目和光纤传输的数字电视节目，然后输出ASI或TS/IP信号给后级设备进行解扰、解码、转码等处理。目前，有线电视网络公司和IPTV新媒体播出前端为了获得稳定可靠的信源，确保电视节目的安全播出，都会采用主备两路信源接收，当备路信源出现异常时将切换到备路信源，主备两路都出现异常则切换到垫播信源。针对上述中的相关技术，发明人发现相关技术中至少存在如下问题：相关技术中在进行主、备、垫三路输入信源切换时，大多没有对各个输入信源的码流质量进行综合性判断，导致切换不够及时准确，且容易出现误判，从而降低了节目信源的播出稳定性。发明内容为了提供稳定可靠的节目信源，本申请提供了一种码流智能切换装置及切换方法。第一方面，本申请提供一种码流智能切换装置，采用如下的技术方案：一种码流智能切换装置，包括机箱，所述机箱内设置有信号处理板和前面板，所述信号处理板包括主路码流输入单元、主路码流监测模块、备路码流输入单元、备路码流监测模块、垫播码流输入单元、切换判决模块、码流输出单元和主控CPU单元，所述前面板用于提供显示和按键操作功能；所述切换判决模块，分别连接于所述主路码流输入单元、备路码流输入单元和垫播码流输入单元，用于分别接收主路码流信号、备路码流信号和垫播码流信号；所述主路码流监测模块，连接于所述主路码流输入单元，用于对所述主路码流信号进行监测，并输出主路监测结果信号；所述备路码流监测模块，连接于所述备路码流输入单元，用于对所述备路码流信号进行监测，并输出备路监测结果信号；其中，所述监测结果信号包括视频监测结果信号、音频监测结果信号、PMT监测结果信号和PAT监测结果信号；所述切换判决模块，还分别连接于所述主路码流监测模块、备路码流监测模块和码流输出单元，用于根据所述主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择，并将切换选择的码流输入单元输出的码流信号发送至码流输出单元；所述主控CPU单元，分别与所述前面板、主路码流输入单元、主路码流监测模块、备路码流输入单元、备路码流监测模块、垫播码流输入单元、切换判决模块、码流输出单元电连接，用于对所述码流智能切换装置进行控制。通过采用上述技术方案，采用主路、备路、垫播三路码流输入单元，利用主路码流监测模块和备路码流监测模块分别对主路码流信号和备路码流信号进行监测，监测类型不仅包括视频监测，还综合了音频监测、PMT监测以及PAT监测，切换判决模块再根据主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择，并将相应的码流信号进行输出；通过多种类型的综合监测，便于对各个输入信源的码流质量进行综合性判断，使得提供的节目信源更加稳定可靠，从而在某一路码流出现质量异常时及时准确地进行切换，满足了有线电视网络公司和IPTV新媒体机房播出前端安全播出的需求，提高了用户体验感。可选的，所述前面板包括显示模块和按键交互模块，所述显示模块用于提供显示功能，所述按键交互模块用于接收并响应于按键触发信号进行相应的选择和参数配置。通过采用上述技术方案，利用显示模块提供显示功能，利用按键交互模块可对参数、预设监测周期、预设阈值等进行预先配置，从而便于满足用户的不同节目播放需求，提高了用户的使用体验。可选的，所述主路码流监测模块包括主路视频监测单元、主路音频监测单元、主路PMT监测单元、主路PAT监测单元和主路监测结果输出单元；所述主路视频监测单元，用于监测所述主路码流信号在预设监测周期内发生视频PID错误的次数是否超过预设视频PID错误次数阈值，若是，则输出主路视频PID监测结果信号为异常；所述主路视频监测单元，还用于监测所述主路码流信号在预设监测周期内发生视频PID连续计数错误的次数是否超过预设视频PID连续计数错误次数阈值，若是，则输出主路视频PID连续计数监测结果信号为异常；所述主路音频监测单元，用于监测所述主路码流信号在预设监测周期内发生音频PID错误的次数是否超过预设音频PID错误次数阈值，若是，则输出主路音频PID监测结果信号为异常；所述主路音频监测单元，还用于监测所述主路码流信号在预设监测周期内发生音频PID连续计数错误的次数是否超过预设音频PID连续计数错误次数阈值，若是，则输出主路音频PID连续计数监测结果信号为异常；所述主路PMT监测单元，用于监测所述主路码流信号在预设监测周期内发生PMT错误的次数是否超过预设PMT错误次数阈值，若是，则输出主路PMT监测结果信号为异常；所述主路PAT监测单元，用于监测所述主路码流信号在预设监测周期内发生PAT错误的次数是否超过预设PAT错误次数阈值，若是，则输出主路PAT监测结果信号为异常；所述主路监测结果输出单元，分别连接于所述主路视频监测单元、主路音频监测单元、主路PMT监测单元和主路PAT监测单元，用于分别接收所述主路视频PID监测结果信号、主路视频PID连续计数监测结果信号、主路音频PID监测结果信号、主路音频PID连续计数监测结果信号、主路PMT监测结果信号和主路PAT监测结果信号，并生成所述主路监测结果信号进行输出。通过采用上述技术方案，利用各个监测单元分别对主路码流信号中视频PID、视频PID连续计数、音频PID、音频PID连续计数、PMT和PAT进行监测，并将各个监测结果信号汇总为主路监测结果信号以作为综合性判断的依据，从而提高了主路码流质量判断的准确性。可选的，所述备路码流监测模块包括备路视频监测单元、备路音频监测单元、备路PMT监测单元、备路PAT监测单元和备路监测结果输出单元；所述备路视频监测单元，用于监测所述备路码流信号在预设监测周期内发生视频PID错误的次数是否超过预设视频PID错误次数阈值，若是，则输出备路视频PID监测结果信号为异常；所述备路视频监测单元，还用于监测所述备路码流信号在预设监测周期内发生视频PID连续计数错误的次数是否超过预设视频PID连续计数错误次数阈值，若是，则输出备路视频PID连续计数监测结果信号为异常；所述备路音频监测单元，用于监测所述备路码流信号在预设监测周期内发生音频PID错误的次数是否超过预设音频PID错误次数阈值，若是，则输出备路音频PID监测结果信号为异常；所述备路音频监测单元，还用于监测所述备路码流信号在预设监测周期内发生音频PID连续计数错误的次数是否超过预设音频PID连续计数错误次数阈值，若是，则输出备路音频PID连续计数监测结果信号为异常；所述备路PMT监测单元，用于监测所述备路码流信号在预设监测周期内发生PMT错误的次数是否超过预设PMT错误次数阈值，若是，则输出备路PMT监测结果信号为异常；所述备路PAT监测单元，用于监测所述备路码流信号在预设监测周期内发生PAT错误的次数是否超过预设PAT错误次数阈值，若是，则输出备路PAT监测结果信号为异常；所述备路监测结果输出单元，分别连接于所述备路视频监测单元、备路音频监测单元、备路PMT监测单元和备路PAT监测单元，用于分别接收所述备路视频PID监测结果信号、备路视频PID连续计数监测结果信号、备路音频PID监测结果信号、备路音频PID连续计数监测结果信号、备路PMT监测结果信号和备路PAT监测结果信号，并生成所述备路监测结果信号进行输出。通过采用上述技术方案，利用各个监测单元分别对备路码流信号中视频PID、视频PID连续计数、音频PID、音频PID连续计数、PMT和PAT进行监测，并将各个监测结果信号汇总为备路监测结果信号以作为综合性判断的依据，从而提高了备路码流质量判断的准确性。可选的，所述切换判决模块包括码流错误指数生成单元、主路判决单元、备路判决单元、垫播判决单元和辅助判决单元；所述码流错误指数生成单元，用于根据所述主路监测结果信号和备路监测结果信号，分别生成对应的主路码流错误指数和备路码流错误指数；所述主路判决单元，连接于所述码流错误指数生成单元，用于在当前切换选择的码流输入单元为主路码流输入单元时，判断所述备路码流错误指数是否小于所述主路码流错误指数，若是，则切换选择至备路码流输入单元；所述备路判决单元，连接于所述码流错误指数生成单元，用于在当前切换选择的码流输入单元为备路码流输入单元时，判断所述主路码流错误指数是否小于或等于备路码流错误指数，若是，则切换选择至主路码流输入单元；所述辅助判决单元，用于在当前切换选择的码流输入单元为主路码流输入单元或备路码流输入单元时，根据所述主路监测结果信号和备路监测结果信号进行判断，若主路PMT监测结果信号和/或主路PAT监测结果信号发生异常，则判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若是，则切换选择至垫播码流输入单元；所述垫播判决单元，用于在当前切换选择的码流输入单元为垫播码流输入单元时，根据所述主路监测结果信号判断主路PMT监测结果信号和/或主路PAT监测结果信号是否发生异常，若否，则切换选择至主路码流输入单元；若是，则根据所述备路监测结果信号判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若否，则切换选择至备路码流输入单元。通过采用上述技术方案，当前为主路输入信源或备路输入信源时，对主路码流错误指数和备路码流错误指数进行比较，当两者码流错误指数不相等时，优先选择码流错误指数更小的信源进行主备路互相切换，当两者码流错误指数相等时，则优先切换选择至主路输入信源，当主路输入信源存在PMT异常和/或PAT异常时，若备路输入信源也存在PMT异常和/或PAT异常，则切换至垫播输入信源；当前为垫播输入信源时，若主路输入信源不存在PMT异常和/或PAT异常，则切换至主路输入信源，若主路输入信源存在PMT异常和/或PAT异常，而备路输入信源不存在PMT异常和/或PAT异常，则切换至备路输入信源；通过对主备输入信源的码流质量进行综合性判断，并对切换判决的条件进行细化，从而保证为用户提供码流质量较为可靠的节目信源，提高了节目播出的稳定性。可选的，所述码流错误指数生成单元包括主路码流错误指数生成单元和备路码流错误指数生成单元；所述主路码流错误指数生成单元，用于根据预设映射表，将主路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加，得到所述主路码流错误指数；所述备路码流错误指数生成单元，用于根据预设映射表，将备路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加，得到所述备路码流错误指数；其中，预设映射表包括多组监测结果信号对应的预设错误指数，每个监测结果信号均对应一个预设错误指数。通过采用上述技术方案，预先配置预设映射表，每个监测结果信号均根据其监测内容对码流质量的影响程度分别设置对应的预设错误指数，再将主路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加即可得到主路码流错误指数，将备路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加即可得到备路码流错误指数，通过计算得到主路码流错误指数和备路码流错误指数，便于对主备路的码流质量情况进行判断比较。第二方面，本申请提供一种码流智能切换方法，采用如下的技术方案：一种码流智能切换方法，应用于第一方面所述的码流智能切换装置，所述切换方法包括：分别接收所述主路码流信号、备路码流信号和垫播码流信号；接收所述主路监测结果信号和备路监测结果信号；其中，所述监测结果信号包括视频监测结果信号、音频监测结果信号、PMT监测结果信号和PAT监测结果信号；根据所述主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择，并将切换选择的码流输入单元输出的码流信号发送至所述码流输出单元。通过采用上述技术方案，采用主路、备路、垫播三路码流输入单元，分别对主路码流信号和备路码流信号进行监测，监测类型不仅包括视频监测，还综合了音频监测、PMT监测以及PAT监测，切换判决模块再根据主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择，并将相应的码流信号进行输出；通过多种类型的综合监测，便于对各个输入信源的码流质量进行综合性判断，使得提供的节目信源更加稳定可靠，从而在某一路码流出现质量异常时及时准确地进行切换，满足了有线电视网络公司和IPTV新媒体机房播出前端安全播出的需求，提高了用户体验感。可选的，所述根据主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择的步骤，包括：在当前切换选择的码流输入单元为主路码流输入单元时，根据所述主路监测结果信号和备路监测结果信号，分别生成对应的主路码流错误指数和备路码流错误指数，判断所述备路码流错误指数是否小于所述主路码流错误指数，若是，则切换选择至备路码流输入单元；在当前切换选择的码流输入单元为备路码流输入单元时，根据所述主路监测结果信号和备路监测结果信号，分别生成对应的主路码流错误指数和备路码流错误指数，判断所述主路码流错误指数是否小于或等于备路码流错误指数，若是，则切换选择至主路码流输入单元；在当前切换选择的码流输入单元为主路码流输入单元或备路码流输入单元时，根据所述主路监测结果信号和备路监测结果信号进行判断，若主路PMT监测结果信号和/或主路PAT监测结果信号发生异常，则判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若是，则切换选择至垫播码流输入单元；在当前切换选择的码流输入单元为垫播码流输入单元时，根据所述主路监测结果信号判断主路PMT监测结果信号和/或主路PAT监测结果信号是否发生异常，若否，则切换选择至主路码流输入单元；若是，则根据所述备路监测结果信号判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若否，则切换选择至备路码流输入单元。通过采用上述技术方案，当前为主路输入信源或备路输入信源时，对主路码流错误指数和备路码流错误指数进行比较，当两者码流错误指数不相等时，优先选择码流错误指数更小的信源进行主备路互相切换，当两者码流错误指数相等时，则优先切换选择至主路输入信源，当主路输入信源存在PMT异常和/或PAT异常时，若备路输入信源也存在PMT异常和/或PAT异常，则切换至垫播输入信源；当前为垫播输入信源时，若主路输入信源不存在PMT异常和/或PAT异常，则切换至主路输入信源，若主路输入信源存在PMT异常和/或PAT异常，而备路输入信源不存在PMT异常和/或PAT异常，则切换至备路输入信源；通过比较主备两路码流质量情况选择切换为较优的输入信源，并将相应的码流信号进行输出，以保证为用户提供码流质量较为可靠的节目信源，提高了节目播出的稳定性。可选的，所述根据所述主路监测结果信号和备路监测结果信号，分别生成对应的主路码流错误指数和备路码流错误指数的步骤包括：根据预设映射表，将主路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加，得到所述主路码流错误指数；根据预设映射表，将备路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加，得到所述备路码流错误指数；其中，预设映射表包括多组监测结果信号对应的预设错误指数，每个监测结果信号均对应一个预设错误指数。通过采用上述技术方案，预先配置预设映射表，每个监测结果信号均根据其监测内容对码流质量的影响程度分别设置对应的预设错误指数，再将主路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加即可得到主路码流错误指数，将备路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加即可得到备路码流错误指数，通过计算得到主路码流错误指数和备路码流错误指数，便于对主备路的码流质量情况进行判断比较。第三方面，本申请提供一种计算机可读存储介质，采用如下的技术方案：一种计算机可读存储介质，存储有能够被处理器加载并执行如第二方面中任一种方法的计算机程序。附图说明图1是本申请其中一个实施例的码流智能切换装置的结构框图。图2是本申请其中一个实施例的主路码流监测模块的结构框图。图3是本申请其中一个实施例的备路码流监测模块的结构框图。图4是本申请其中一个实施例的切换判决模块的结构框图。图5是本申请其中一个实施例的码流智能切换方法的流程示意图。附图标记说明：1、机箱；2、信号处理板；21、主路码流输入单元；22、主路码流监测模块；221、主路视频监测单元；222、主路音频监测单元；223、主路PMT监测单元；224、主路PAT监测单元；225、主路监测结果输出单元；23、备路码流输入单元；24、备路码流监测模块；241、备路视频监测单元；242、备路音频监测单元；243、备路PMT监测单元；244、备路PAT监测单元；245、备路监测结果输出单元；25、垫播码流输入单元；26、切换判决模块；261、码流错误指数生成单元；262、主路判决单元；263、备路判决单元；264、垫播判决单元；265、辅助判决单元；27、码流输出单元；28、主控CPU单元；3、前面板；4、电源板。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图1-5及实施例，对本申请进行进一步详细说明。应当理解，此处所描述的具体实施例仅用以解释本申请，并不用于限定本申请。本申请实施例公开一种码流智能切换装置。参照图1，一种码流智能切换装置，包括机箱1，机箱1内设置有信号处理板2、前面板3和电源板4，信号处理板2分别与电源板4和前面板3通过导线连接，信号处理板2包括主路码流输入单元21、主路码流监测模块22、备路码流输入单元23、备路码流监测模块24、垫播码流输入单元25、切换判决模块26、码流输出单元27和主控CPU单元28，前面板3用于提供显示和按键操作功能；切换判决模块26，分别连接于主路码流输入单元21、备路码流输入单元23和垫播码流输入单元25，用于分别接收主路码流输入单元21输出的主路码流信号、备路码流输入单元23输出的备路码流信号以及垫播码流输入单元25输出的垫播码流信号；主路码流监测模块22，连接于主路码流输入单元21，用于对主路码流信号进行监测，并输出主路监测结果信号；备路码流监测模块24，连接于备路码流输入单元23，用于对备路码流信号进行监测，并输出备路监测结果信号；其中，监测结果信号包括视频监测结果信号、音频监测结果信号、PMT监测结果信号和PAT监测结果信号；切换判决模块26，还分别连接于主路码流监测模块22、备路码流监测模块24和码流输出单元27，用于根据主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择，并将切换选择的码流输入单元输出的码流信号发送至码流输出单元27；主控CPU单元28，分别与前面板3、主路码流输入单元21、主路码流监测模块22、备路码流输入单元23、备路码流监测模块24、垫播码流输入单元25、切换判决模块26、码流输出单元27电连接，用于对码流智能切换装置进行控制。上述实施方式中，采用主路、备路、垫播三路码流输入单元，利用主路码流监测模块22和备路码流监测模块24分别对主路码流信号和备路码流信号进行监测，监测类型不仅包括视频监测，还综合了音频监测、PMT监测以及PAT监测，切换判决模块26再根据主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择，并将相应的码流信号进行输出；通过多种类型的综合监测，便于对各个输入信源的码流质量进行综合性判断，使得提供的节目信源更加稳定可靠，从而在某一路码流出现质量异常时及时准确地进行切换，满足了有线电视网络公司和IPTV新媒体机房播出前端安全播出的需求，提高了用户体验感。作为机箱1的一种实施方式，机箱1采用标准的19吋宽、1U高机箱1，能够适用于19吋标准机柜安装使用，其中，19吋标准机柜内设备安装所占高度用一个特殊单位"U"表示，1U=44.45mm；所有功能均集成在该机箱1内，通过内嵌式SOC芯片实现了产品的高度集成化、低成本化。作为前面板3的一种实施方式，前面板3包括显示模块和按键交互模块，显示模块用于对输入信源、配置参数等提供显示功能，按键交互模块用于接收并响应于按键触发信号进行相应的选择和参数配置。在本实施例中，显示模块可以为LCD液晶显示屏幕，按键交互模块可以为按键面板，按键触发信号为用户与按键交互模块进行按键交互时产生的触发信号，用户通过按键交互模块可对各种参数、预设监测周期和预设阈值等进行预先配置或对输入信源进行选择，从而便于满足用户的不同节目播放需求，提高了用户的使用体验。作为主路码流输入单元21、备路码流输入单元23的一种实施方式，用户可通过前面板3对主路码流输入单元21和备路码流输入单元23的信源进行显示和选择，可选信源包括DVB-S/S2卫星信号、ASI、TS/IP输入信源中的任意一种，同时，利用前面板3对选择的输入信源进行输入参数配置。其中，若选择DVB-S/S2卫星信号输入信源，则可通过前面板3对接收频点、符号率、极化方式等参数进行显示和操作配置，再利用主路码流输入单元21或备路码流输入单元23对射频信号自动进行信号锁定和解调处理，输出并行码流信号；若选择ASI输入信源，则无需进行参数设置，利用主路码流输入单元21或备路码流输入单元23对输入信号自动进行锁定，并将ASI输入的串行码流转换为并行码流输出；若选择TS/IP输入信源，根据上级设备的输出参数，通过前面板3对单播/组播、IP输入地址、IP输入端口号等参数进行显示和操作选择，利用主路码流输入单元21或备路码流输入单元23对输入信号自动进行锁定，并将IP封装的TS码流数据包解封装，输出并行码流信号；另外，TS/IP输入还支持UDP和RTP格式的码流输入信源。作为垫播码流输入单元25的一种实施方式，垫播码流输入单元25的可选信源包括ASI输入信源和TS/IP输入信源，同样可通过前面板3进行操作选择，且在选择信源后可利用前面板3进行输入参数配置。其中，若选择ASI输入信源，则无需进行参数设置，利用垫播码流输入单元25对输入信号自动进行锁定，并将ASI输入的串行码流转换为并行码流输出；若选择TS/IP输入信源，根据上级设备的输出参数，通过前面板3对单播/组播、IP输入地址、IP输入端口号等参数进行显示和操作选择，利用垫播码流输入单元25对输入信号自动进行锁定，并将IP封装的TS码流数据包解封装，输出并行码流信号；另外，TS/IP输入还支持UDP和RTP格式的码流输入信源。作为主路监测结果信号和备路监测结果信号的一种实施方式，主路监测结果信号包括主路视频监测结果信号、主路音频监测结果信号、主路PMT监测结果信号和主路PAT监测结果信号；备路监测结果信号包括备路视频监测结果信号、备路音频监测结果信号、备路PMT监测结果信号和备路PAT监测结果信号；其中，主路视频监测结果信号包括主路视频PID监测结果信号和主路视频PID连续计数监测结果信号，主路音频监测结果信号包括主路音频PID监测结果信号和主路音频PID连续计数监测结果信号，备路视频监测结果信号包括备路视频PID监测结果信号和备路视频PID连续计数监测结果信号，备路音频监测结果信号包括备路音频PID监测结果信号和备路音频PID连续计数监测结果信号。作为码流输出单元27的一种实施方式，码流输出单元27用于根据前面板3配置的输出参数进行输出设置和码流格式变换处理，并将处理后的码流输出至后级设备。上述实施方式中，码流切换装置的码流输出信号可做为后级解码器或复用器等设备的输入源，支持ASI输出和TS/IP输出。参照图2，作为主路码流监测模块22的一种实施方式，主路码流监测模块22包括主路视频监测单元221、主路音频监测单元222、主路PMT监测单元223、主路PAT监测单元224和主路监测结果输出单元225；主路视频监测单元221，用于监测主路码流信号在预设监测周期内发生视频PID错误的次数是否超过预设视频PID错误次数阈值，若是，则输出主路视频PID监测结果信号为异常；主路视频监测单元221，还用于监测主路码流信号在预设监测周期内发生视频PID连续计数错误的次数是否超过预设视频PID连续计数错误次数阈值，若是，则输出主路视频PID连续计数监测结果信号为异常；主路音频监测单元222，用于监测主路码流信号在预设监测周期内发生音频PID错误的次数是否超过预设音频PID错误次数阈值，若是，则输出主路音频PID监测结果信号为异常；主路音频监测单元222，还用于监测主路码流信号在预设监测周期内发生音频PID连续计数错误的次数是否超过预设音频PID连续计数错误次数阈值，若是，则输出主路音频PID连续计数监测结果信号为异常；主路PMT监测单元223，用于监测主路码流信号在预设监测周期内发生PMT错误的次数是否超过预设PMT错误次数阈值，若是，则输出主路PMT监测结果信号为异常；主路PAT监测单元224，用于监测主路码流信号在预设监测周期内发生PAT错误的次数是否超过预设PAT错误次数阈值，若是，则输出主路PAT监测结果信号为异常；主路监测结果输出单元225，分别连接于主路视频监测单元221、主路音频监测单元222、主路PMT监测单元223和主路PAT监测单元224，用于分别接收主路视频PID监测结果信号、主路视频PID连续计数监测结果信号、主路音频PID监测结果信号、主路音频PID连续计数监测结果信号、主路PMT监测结果信号和主路PAT监测结果信号，并生成主路监测结果信号进行输出。上述实施方式中，利用各个监测单元分别对主路码流信号中视频PID、视频PID连续计数、音频PID、音频PID连续计数、PMT和PAT进行监测，并将各个监测结果信号汇总为主路监测结果信号以作为综合性判断的依据，从而提高了主路码流质量判断的准确性。参照图3，作为备路码流监测模块24的一种实施方式，备路码流监测模块24包括备路视频监测单元241、备路音频监测单元242、备路PMT监测单元243、备路PAT监测单元244和备路监测结果输出单元245；备路视频监测单元241，用于监测备路码流信号在预设监测周期内发生视频PID错误的次数是否超过预设视频PID错误次数阈值，若是，则输出备路视频PID监测结果信号为异常；备路视频监测单元241，还用于监测备路码流信号在预设监测周期内发生视频PID连续计数错误的次数是否超过预设视频PID连续计数错误次数阈值，若是，则输出备路视频PID连续计数监测结果信号为异常；备路音频监测单元242，用于监测备路码流信号在预设监测周期内发生音频PID错误的次数是否超过预设音频PID错误次数阈值，若是，则输出备路音频PID监测结果信号为异常；备路音频监测单元242，还用于监测备路码流信号在预设监测周期内发生音频PID连续计数错误的次数是否超过预设音频PID连续计数错误次数阈值，若是，则输出备路音频PID连续计数监测结果信号为异常；备路PMT监测单元243，用于监测备路码流信号在预设监测周期内发生PMT错误的次数是否超过预设PMT错误次数阈值，若是，则输出备路PMT监测结果信号为异常；备路PAT监测单元244，用于监测备路码流信号在预设监测周期内发生PAT错误的次数是否超过预设PAT错误次数阈值，若是，则输出备路PAT监测结果信号为异常；备路监测结果输出单元245，分别连接于备路视频监测单元241、备路音频监测单元242、备路PMT监测单元243和备路PAT监测单元244，用于分别接收所述备路视频PID监测结果信号、备路视频PID连续计数监测结果信号、备路音频PID监测结果信号、备路音频PID连续计数监测结果信号、备路PMT监测结果信号和备路PAT监测结果信号，并生成所述备路监测结果信号进行输出。上述实施方式中，利用各个监测单元分别对备路码流信号中视频PID、视频PID连续计数、音频PID、音频PID连续计数、PMT和PAT进行监测，并将各个监测结果信号汇总为备路监测结果信号以作为综合性判断的依据，从而提高了备路码流质量判断的准确性。作为监测是否发生视频PID错误的一种实施方式，通过检测是否每个视频PID都有码流，没有码流则表明无法完成该业务的解码，即为发生视频PID错误；当发生视频PID错误时，接收端可能发生黑屏、静帧和马赛克等异常。作为监测是否发生视频PID连续计数错误的一种实施方式，TS包的包头中有4个bit的连续性计数器，该计数器会随着具有相同PID的TS包数量的增加而增加，当到达该计数器最大值时从0再次开始新的计数；当发现TS流中有视频PID丢包、有重复的包或者包顺序有误等情况时，均可判断为发生视频PID连续计数错误；当发生视频PID连续计数错误时，可能会导致解码器出现无法马赛克的情况。作为监测是否发生音频PID错误的一种实施方式，通过检测是否每个音频PID都有码流，没有码流则表明无法完成该业务的解码，即为发生音频PID错误；当发生音频PID错误时，接收端可能发生声音卡顿、无声等异常。作为监测是否发生音频PID连续计数错误的一种实施方式，TS包的包头中有4个bit的连续性计数器，该计数器会随着具有相同PID的TS包数量的增加而增加，当到达该计数器最大值时从0再次开始新的计数；当发现TS流中音频PID有丢包、有重复的包或包顺序有误等情况时，均可判断为发生音频PID连续计数错误；当发生音频PID连续计数错误时，可能会导致接收端出现声音卡顿的情况。作为监测是否发生PMT错误的一种实施方式，PMT是节目映射表，指明了组成每路业务的音频流的PID、视频流的PID以及每路业务的节目参考时钟PCR的PID；若发现PMT包的包头的加密控制字段不为0、PMT包超时到达或丢失等情况时，则可判断为发生PMT错误；另外，当PMT错误时，可能会导致接收端出现搜索不到节目或节目搜索错误的情况。作为监测是否发生PAT错误的一种实施方式，PAT是节目关联表，当发现PAT包丢失、超时、包中无内容或包头中的加密控制字段不为0时，则可判断为发生PAT错误；当PAT发生错误时，可能会导致接收端出现搜索不到节目或节目搜索错误的情况。需要说明的是，上述的预设监测周期、预设视频PID错误次数阈值、预设视频PID连续计数错误次数阈值、预设音频PID错误次数阈值、预设音频PID连续计数错误次数阈值、预设PMT错误次数阈值和预设PAT错误次数阈值均可结合实际情况或根据历史经验通过前面板3进行预先配置。参照图4，作为切换判决单元的一种实施方式，切换判决模块26包括码流错误指数生成单元261、主路判决单元262、备路判决单元263、垫播判决单元264和辅助判决单元265；码流错误指数生成单元261，用于根据主路监测结果信号和备路监测结果信号，分别生成对应的主路码流错误指数和备路码流错误指数；其中，码流错误指数用于反映输入信源输出的码流质量情况，码流错误指数越大，表示码流中出现的错误越多，码流质量越差；主路判决单元262，连接于码流错误指数生成单元261，用于在当前切换选择的码流输入单元为主路码流输入单元21时，判断备路码流错误指数是否小于主路码流错误指数，若是，则切换选择至备路码流输入单元23；其中，由于码流错误指数越小，码流质量越好，因此当备路码流质量优于主路码流质量时，即可切换至备路码流输入单元23；备路判决单元263，连接于码流错误指数生成单元261，用于在当前切换选择的码流输入单元为备路码流输入单元23时，判断主路码流错误指数是否小于或等于备路码流错误指数，若是，则切换选择至主路码流输入单元21；其中，由于码流错误指数越小，码流质量越好，因此当主路码流质量优于备路码流质量时，即可切换至主路码流输入单元21；辅助判决单元265，用于在当前切换选择的码流输入单元为主路码流输入单元21或备路码流输入单元23时，根据主路监测结果信号和备路监测结果信号进行判断，若主路PMT监测结果信号和/或主路PAT监测结果信号发生异常，则判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若是，则切换选择至垫播码流输入单元25；其中，当主路PMT监测结果信号和/或主路PAT监测结果信号发生异常，且备路PMT监测结果信号和/或备路PAT监测结果信号也发生异常时，即主备路输入的码流均无法被正确解析，则可判断主备两路都出现码流质量异常，即可切换至垫播码流输入单元25；垫播判决单元264，用于在当前切换选择的码流输入单元为垫播码流输入单元25时，根据主路监测结果信号判断主路PMT监测结果信号和/或主路PAT监测结果信号是否发生异常，若否，则切换选择至主路码流输入单元21；若是，则根据备路监测结果信号判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若否，则切换选择至备路码流输入单元23。其中，当前为垫播码流输入时，判断主路PMT监测结果信号和/或主路PAT监测结果信号是否发生异常，若无异常，则以主路优先原则切换至主路码流输入单元21；若存在异常，则判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若无异常，则切换至备路码流输入单元23。在本实施例中，码流错误指数生成单元261、主路判决单元262、备路判决单元263、垫播判决单元264和辅助判决单元265均与主控CPU单元28电连接。上述实施方式中，当前为主路输入信源或备路输入信源时，对主路码流错误指数和备路码流错误指数进行比较，当两者码流错误指数不相等时，优先选择码流错误指数更小的信源进行主备路互相切换，当两者码流错误指数相等时，则优先切换选择至主路输入信源，当主路输入信源存在PMT异常和/或PAT异常时，若备路输入信源也存在PMT异常和/或PAT异常，则切换至垫播输入信源；当前为垫播输入信源时，若主路输入信源不存在PMT异常和/或PAT异常，则切换至主路输入信源，若主路输入信源存在PMT异常和/或PAT异常，而备路输入信源不存在PMT异常和/或PAT异常，则切换至备路输入信源；通过对主备输入信源的码流质量进行综合性判断，并对切换判决的条件进行细化，从而保证为用户提供码流质量较为可靠的节目信源，提高了节目播出的稳定性。作为码流错误指数生成单元261的一种实施方式，码流错误指数生成单元261包括主路码流错误指数生成单元和备路码流错误指数生成单元；主路码流错误指数生成单元，用于根据预设映射表，将主路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加，得到主路码流错误指数；备路码流错误指数生成单元，用于根据预设映射表，将备路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加，得到备路码流错误指数；其中，预设映射表包括多组监测结果信号对应的预设错误指数，每个监测结果信号均对应一个预设错误指数，并且，预设映射表可通过前面板3进行预先配置。上述实施方式中，预先配置预设映射表，每个监测结果信号均根据其监测内容对码流质量的影响程度分别设置对应的预设错误指数，再将主路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加即可得到主路码流错误指数，将备路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加即可得到备路码流错误指数，通过计算得到主路码流错误指数和备路码流错误指数，便于对主备路的码流质量情况进行判断比较，以选择健康性更好的码流进行解码输出。需要说明的是，上述的监测结果信号包括视频PID监测结果信号、视频PID连续计数监测结果信号、音频PID监测结果信号、音频PID连续计数监测结果信号、PMT监测结果信号和PAT监测结果信号；当主路码流或备路码流仅存在其中一种监测结果信号发生异常时，则对应的码流错误指数即为该监测结果信号对应的预设错误指数；当主路码流或备路码流同时存在其中多种监测结果信号发生异常时，则对应的码流错误指数即为所有发生异常的监测结果信号对应的预设错误指数之和。作为预设映射表的一种实施方式，预设映射表包括多组监测结果信号对应的预设错误指数，每个监测结果信号均对应设置一个预设错误指数，并且，每个监测结果信号还设置有对应的错误级别，错误级别越高，则对应的预设错误指数越大。在本实施例中，监测结果信号按照错误严重程度分为三个级别，第一级别错误的严重程度最高，对应的预设错误指数最大，其中，PMT监测结果信号和PAT监测结果信号发生异常即对应为第一级别错误；第二级别错误的严重程度较高，对应的预设错误指数较大，其中，视频PID监测结果信号和视频PID连续计数监测结果信号即对应为第二级别错误；第三级别错误的严重程度最低，对应的预设错误指数最低，其中，音频PID监测结果信号和音频PID连续计数监测结果信号即对应为第三级别错误。另外，需要强调的是，一个第一级别错误的监测结果信号对应的预设错误指数大于所有第二级别错误和第三级别错误的监测结果信号对应的预设错误指数的总和，一个第二级别错误的监测结果信号对应的预设错误指数大于所有第三级别错误的监测结果信号对应的预设错误指数的总和；例如，在本实施例中，PMT监测结果信号和PAT监测结果信号发生异常均对应为第一级别错误，且两者对应的预设错误指数均设置为9；视频PID监测结果信号和视频PID连续计数监测结果信号均对应为第二级别错误，且两者对应的预设错误指数均设置为3；音频PID监测结果信号和音频PID连续计数监测结果信号均对应为第三级别错误，且两者对应的预设错误指数均为1。上述实施方式中，当码流发生PMT错误或PAT错误时，可能会导致解码端无法正确解析TS码流结构，使得无法获取到解码的音视频信号；而当码流发生视频PID错误时，则会导致解码端无法正确解码视频，从而造成视频出现马赛克甚至黑屏的情况；当码流发生音频PID错误时，则会导致解码端无法正确解码音频，从而造成音频卡顿甚至无声的情况；因此，发生PMT错误或PAT错误时，可能会造成机房后级设备无法正常工作，其不仅影响机房后级设备的稳定性，还会影响用户体验，因此设置的预设错误指数最高且远高于音视频问题对应的预设错误指数，而音视频问题仅影响用户体验，且由于视频所带来的观看体验相对于音频更加直观，能够直接影响用户的观看体验，因此视频对应的预设错误指数相对较高，音频对应的预设错误指数相对较低；通过预设错误指数的不同配置，能够更加方便地评估TS码流的错误状况，进而综合比较主备路的码流质量。本申请实施例还基于切换判决模块26侧公开一种码流智能切换方法。参照图5，一种码流智能切换方法，应用于上述的一种码流智能切换装置，切换方法包括：步骤S101，分别接收主路码流信号、备路码流信号和垫播码流信号；步骤S102，接收主路监测结果信号和备路监测结果信号；其中，监测结果信号包括视频监测结果信号、音频监测结果信号、PMT监测结果信号和PAT监测结果信号；步骤S103，根据主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择；步骤S104，将切换选择的码流输入单元输出的码流信号发送至码流输出单元27。上述实施方式中，采用主路、备路、垫播三路码流输入单元，分别对主路码流信号和备路码流信号进行监测，监测类型不仅包括视频监测，还综合了音频监测、PMT监测以及PAT监测，切换判决模块26再根据主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择，并将相应的码流信号进行输出；通过多种类型的综合监测，便于对各个输入信源的码流质量进行综合性判断，使得提供的节目信源更加稳定可靠，从而在某一路码流出现质量异常时及时准确地进行切换，满足了有线电视网络公司和IPTV新媒体机房播出前端安全播出的需求，提高了用户体验感。作为步骤S103中根据主路监测结果信号和备路监测结果信号进行码流输入单元的切换选择的一种实施方式，具体步骤包括：在当前切换选择的码流输入单元为主路码流输入单元21时，根据主路监测结果信号和备路监测结果信号，分别生成对应的主路码流错误指数和备路码流错误指数，判断备路码流错误指数是否小于主路码流错误指数，若是，则切换选择至备路码流输入单元23；在当前切换选择的码流输入单元为备路码流输入单元23时，根据主路监测结果信号和备路监测结果信号，分别生成对应的主路码流错误指数和备路码流错误指数，判断主路码流错误指数是否小于或等于备路码流错误指数，若是，则切换选择至主路码流输入单元21；在当前切换选择的码流输入单元为主路码流输入单元21或备路码流输入单元23时，根据主路监测结果信号和备路监测结果信号进行判断，若主路PMT监测结果信号和/或主路PAT监测结果信号发生异常，则判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若是，则切换选择至垫播码流输入单元25；在当前切换选择的码流输入单元为垫播码流输入单元25时，根据主路监测结果信号判断主路PMT监测结果信号和/或主路PAT监测结果信号是否发生异常，若否，则切换选择至主路码流输入单元21；若是，则根据备路监测结果信号判断备路PMT监测结果信号和/或备路PAT监测结果信号是否发生异常，若否，则切换选择至备路码流输入单元23。上述实施方式中，采用主路、备路、垫播三路码流输入单元，并分别对主路码流信号和备路码流信号进行监测，监测类型不仅包括视频监测，还综合了音频监测、PMT监测以及PAT监测，按照用户设定的预设监测频率对主备两路输入信源的码流状态分别进行连续判断，通过比较主备两路码流质量情况选择切换为较优的输入信源，并将相应的码流信号进行输出；通过多种类型的综合监测，便于对各个输入信源的码流质量进行综合性判断，使得提供的节目信源更加稳定可靠。作为根据主路监测结果信号和备路监测结果信号，分别生成对应的主路码流错误指数和备路码流错误指数的一种实施方式，具体步骤包括：根据预设映射表，将主路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加，得到所述主路码流错误指数；根据预设映射表，将备路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加，得到所述备路码流错误指数；其中，预设映射表包括多组监测结果信号对应的预设错误指数，每个监测结果信号均对应一个预设错误指数。上述实施方式中，预先配置预设映射表，每个监测结果信号均根据其监测内容对码流质量的影响程度分别设置对应的预设错误指数，再将主路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加即可得到主路码流错误指数，将备路监测结果信号中各个发生异常的监测结果信号对应的预设错误指数进行累加即可得到备路码流错误指数，通过计算得到主路码流错误指数和备路码流错误指数，便于对主备路的码流质量情况进行判断比较。作为监测结果信号对应的预设错误指数的一种实施方式，PMT监测结果信号或PAT监测结果信号对应的预设错误指数大于视频监测结果信号对应的预设错误指数，视频监测结果信号对应的预设错误指数大于音频监测结果信号对应的预设错误指数。其中，视频监测结果信号包括视频PID监测结果信号和视频PID连续计数监测结果信号，音频监测结果信号包括音频PID监测结果信号和音频PID连续计数监测结果信号。上述实施方式中，发生PMT错误或PAT错误时，可能会造成机房后级设备无法正常工作，其不仅影响机房后级设备的稳定性，还会影响用户体验，因此设置的预设错误指数最高，而音视频问题仅影响用户体验，且由于视频所带来的观看体验相对于音频更加直观，能够直接影响用户的观看体验，因此视频对应的预设错误指数相对较高，音频对应的预设错误指数相对较低；通过预设错误指数的不同配置，能够更加方便地评估TS码流的错误状况，进而综合比较主备路的码流质量。需要说明的是，在上述实施例中，对各个实施例的描述各有侧重，某个实施例中没有详述的部分，可以参见其他实施例的相关描述。在本申请所提供的几个实施例中，应该理解到，所提供的装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的；例如，某个模块或单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，上述的相互之间的连接可以是通过一些接口、系统或单元的间接耦合或通信连接，可以是电连接、也可以是其他形式例如通过接插件进行连接。本申请实施例公开一种计算机可读存储介质。一种计算机可读存储介质，存储有能够被处理器加载并执行如上述的码流智能切换方法的计算机程序。其中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用；计算机可读介质上包含的程序代码可以用任何适当的介质传输，包括但不限于无线、电线、光缆、RF等等，或者上述的任意合适的组合。以上均为本申请的较佳实施例，并非依此限制本申请的保护范围，本说明书中公开的任一特征，除非特别叙述，均可被其他等效或者具有类似目的的替代特征加以替换。即，除非特别叙述，每个特征只是一系列等效或类似特征中的一个例子而已。
