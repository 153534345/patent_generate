标题title
一种消除衰减器切换过冲的电路及方法
摘要abst
本发明公开了一种消除衰减器切换过冲的电路及方法，电路包括衰减模块、控制模块，所述衰减模块包括若干个级联的衰减单元，控制模块包括第二控制支路和第一控制支路，且分别用于输出最后一个衰减单元以及其他衰减单元的本征信号、反相信号；第一控制支路包括从前至后依次连接的延时电路和非门；所述第二控制支路包括依次设置的并联的第一支路与第二支路以及或非门、第二反相器、第三反相器，所述第一支路上依次设置有第一反相器、与非门，所述与非门分别与延时电路和异或门连接；所述第二支路上设置有偶数个串联的反相器。本发明通过控制模块可达到消除过冲的目的，尤其可以消除15.5dB和16dB切换过程中产生的过冲，具有较好的实用性。
权利要求书clms
1.一种消除衰减器切换过冲的电路，其特征在于，包括衰减模块、控制模块，所述衰减模块包括若干个级联的衰减单元，所述衰减单元包括晶体管MP和晶体管MN，相邻衰减单元的晶体管MP串联，且晶体管MN并联，所述晶体管MP、晶体管MN的栅极的输入信号分别为反相信号、本征信号；所述控制模块的输入端用于接收若干个控制信号，且输出端用于输出对应的本征信号、反相信号；所述控制模块包括第一控制支路和第二控制支路，所述第二控制支路用于输出最后一个衰减单元的本征信号、反相信号，且所述第一控制支路用于输出其他衰减单元的本征信号、反相信号；所述第一控制支路包括从前至后依次连接的延时电路和非门，所述延时电路用于输出本征信号，所述非门用于输出反相信号；所述第二控制支路包括从前至后依次设置的并联的第一支路与第二支路以及或非门、第二反相器、第三反相器，所述第一支路上从前至后依次设置有第一反相器、与非门，所述与非门分别与延时电路和异或门连接，且延时电路与异或门连接；所述第二支路上设置有偶数个串联的反相器；所述第一支路和第二支路分别与或非门连接，第二反相器、第三反相器用于输出本征信号、反相信号。2.根据权利要求1所述的一种消除衰减器切换过冲的电路，其特征在于，所述第二控制支路还包括第三支路，所述第三支路设置在第二反相器与第三反相器之间，所述第三支路上从前至后依次设置有第四反相器和第五反相器，所述第五反相器用于输出本征信号。3.根据权利要求1或2所述的一种消除衰减器切换过冲的电路，其特征在于，所述衰减模块包括依次级联的6个衰减单元Cell_0.5dB、Cell_1dB、Cell_2dB、Cell_4dB、Cell_8dB、Cell_16dB，依次对应有6位控制信号bit_0.5，bit_1，bit_2，bit_4，bit_8，bit_16；前5位的控制信号bit_0.5，bit_1，bit_2，bit_4，bit_8分别输入第一控制支路，用于对应输出本征信号N_0.5，N_1，N_2，N_4，N_8以及反相信号P_0.5，P_1，P_2，P_4，P_8；第6位的控制信号bit_16输入第二控制支路，用于对应输出本征信号N_16以及反相信号P_16。4.根据权利要求1所述的一种消除衰减器切换过冲的电路，其特征在于，所述衰减单元为T型衰减元件，所述衰减单元还包括电容C、电阻Rsh和两个串联的电阻Rse，所述衰减单元的串联支路设置有晶体管MP，且并联支路设置有晶体管MN，所述晶体管MP和两个串联的电阻Rse并联，所述晶体管MN与电阻Rsh串联，所述电阻Rsh与电容C并联，所述电容C用于调节附加相移。5.一种消除衰减器切换过冲的方法，采用权利要求1-4任一项所述的电路进行，其特征在于，对应从前至后依次级联的若干个衰减单元，输入若干个控制信号至控制模块并生成对应衰减单元的本征信号和反相信号；其中最后一个衰减单元的控制信号分别输入第二控制支路的第一支路和第二支路，第一支路上的控制信号经过第一反相器后，与其他的控制信号共同输入与非门，与非门的输出以及与非门的输出经过延时电路后的延迟信号分别输入或非门；第二支路上的控制信号经过偶数个反相器后输入或非门；所述或非门的输出经过反相器处理后得到对应的本征信号和反相信号；其他衰减单元的控制信号分别通过第一控制支路进行整体延时得到本征信号，然后经过非门得到反相信号。6.根据权利要求5所述的一种消除衰减器切换过冲的方法，其特征在于，针对级联6个衰减单元的衰减模块，依次设置6位控制信号bit_0.5，bit_1，bit_2，bit_4，bit_8，bit_16；前5位的控制信号bit_0.5，bit_1，bit_2，bit_4，bit_8分别通过第一控制支路处理后得到对应的本征信号和反相信号；第6位控制信号bit_16输入第二控制支路处理后得到对应的本征信号和反相信号。7.根据权利要求6所述的一种消除衰减器切换过冲的方法，其特征在于，所述第二控制支路仅对15.5dB或16dB衰减态下的第6位控制信号bit_16进行波形调整，其他衰减态下的第6位控制信号只做延时处理；如果是15.5dB或者16dB的衰减状态，则与非门相当于一个反相器，后面经过或非门后能够得到想要的缩短第6位低电平时间的信号；若是其他衰减状态，则与非门的输出始终保持高电平，异或门的输出始终保持低电平，此时或非门的输出信号是第6位控制信号的反相信号。8.根据权利要求5-7任一项所述的一种消除衰减器切换过冲的方法，其特征在于，当工作于参考态时，反相信号为高电平，控制串联的晶体管MP导通，本征信号为低电平，控制并联的晶体管MN关断；当工作于衰减态时，反相信号为低电平，控制串联的晶体管MP关断，本征信号为高电平，控制并联的晶体管MN导通。
说明书desc
技术领域本发明属于无线通信技术领域，具体涉及一种消除衰减器切换过冲的电路及方法。背景技术随着移动通信技术的不断发展，第五代移动通信技术已逐渐成熟，通信系统中的衰减器扮演着重要角色，主要起控制增益和调整信号幅度的作用。高性能的衰减器需要具备小的插入损耗、好的衰减平坦度、高的衰减精度以及小的附加相移等特点。传统的内嵌开关式衰减器需要两个相反的信号来分别控制串联支路和并联支路的开关。一般每一位的控制信号通过简单的逻辑电路产生本征信号和对应的反相信号，从而实现对串联支路和并联支路的控制。对于传统的31.5dB衰减范围的6位数字衰减器，利用简单逻辑电路产生的控制信号对其控制时，衰减器在15.5dB和16dB两种衰减态的切换过程中会产生较大的脉冲，这可能会导致后级电路失真甚至烧坏。这是由于在控制信号的上升沿和下降沿过程中，涉及了全部的控制位，产生了未知的中间态，这个中间态的衰减量比16dB小很多。因此，本发明提供了一种改进的逻辑电路，在15.5dB和16dB切换过程中，通过在控制信号的上升沿和下降沿处引入额外的31.5dB的衰减态，将原本的中间态衰减掉，防止出现过大的脉冲，提高衰减器的稳定性。发明内容本发明的目的在于提供一种消除衰减器切换过冲的电路及方法，旨在解决上述问题。本发明主要通过以下技术方案实现：一种消除衰减器切换过冲的电路，包括衰减模块、控制模块，所述衰减模块包括若干个级联的衰减单元，所述衰减单元包括晶体管MP和晶体管MN，相邻衰减单元的晶体管MP串联，且晶体管MN并联，所述晶体管MP、晶体管MN的栅极的输入信号分别为反相信号、本征信号；所述控制模块的输入端用于接收若干个控制信号，且输出端用于输出对应的本征信号、反相信号；所述控制模块包括第一控制支路和第二控制支路，所述第二控制支路用于输出最后一个衰减单元的本征信号、反相信号，且所述第一控制支路用于输出其他衰减单元的本征信号、反相信号；所述第一控制支路包括从前至后依次连接的延时电路和非门，所述延时电路用于输出本征信号，所述非门用于输出反相信号；所述第二控制支路包括从前至后依次设置的并联的第一支路与第二支路以及或非门、第二反相器、第三反相器，所述第一支路上从前至后依次设置有第一反相器、与非门，所述与非门分别与延时电路和异或门连接，且延时电路与异或门连接；所述第二支路上设置有偶数个串联的反相器；所述第一支路和第二支路分别与或非门连接，第二反相器、第三反相器用于输出本征信号、反相信号。为了更好地实现本发明，进一步地，所述第二控制支路还包括第三支路，所述第三支路设置在第二反相器与第三反相器之间，所述第三支路上从前至后依次设置有第四反相器和第五反相器，所述第五反相器用于输出本征信号。为了更好地实现本发明，进一步地，所述衰减模块包括依次级联的6个衰减单元Cell_0.5dB、Cell_1dB、Cell_2dB、Cell_4dB、Cell_8dB、Cell_16dB，依次对应有6位控制信号bit_0.5，bit_1，bit_2，bit_4，bit_8，bit_16；前5位的控制信号bit_0.5，bit_1，bit_2，bit_4，bit_8分别输入第一控制支路，用于对应输出本征信号N_0.5，N_1，N_2，N_4，N_8以及反相信号P_0.5，P_1，P_2，P_4，P_8；第6位的控制信号bit_16输入第二控制支路，用于对应输出本征信号N_16以及反相信号P_16。为了更好地实现本发明，进一步地，所述衰减单元为T型衰减元件，所述衰减单元还包括电容C、电阻Rsh和两个串联的电阻Rse，所述衰减单元的串联支路设置有晶体管MP，且并联支路设置有晶体管MN，所述晶体管MP和两个串联的电阻Rse并联，所述晶体管MN与电阻Rsh串联，所述电阻Rsh与电容C并联，所述电容C用于调节附加相移。本发明主要通过以下技术方案实现：一种消除衰减器切换过冲的方法，采用上述的电路进行，对应从前至后依次级联的若干个衰减单元，输入若干个控制信号至控制模块并生成对应衰减单元的本征信号和反相信号；其中最后一个衰减单元的控制信号分别输入第二控制支路的第一支路和第二支路，第一支路上的控制信号经过第一反相器后，与其他的控制信号共同输入与非门，与非门的输出以及与非门的输出经过延时电路后的延迟信号分别输入或非门；第二支路上的控制信号经过偶数个反相器后输入或非门；所述或非门的输出经过反相器处理后得到对应的本征信号和反相信号；其他衰减单元的控制信号分别通过第一控制支路进行整体延时得到本征信号，然后经过非门得到反相信号。为了更好地实现本发明，进一步地，针对级联6个衰减单元的衰减模块，依次设置6位控制信号bit_0.5，bit_1，bit_2，bit_4，bit_8，bit_16；前5位的控制信号bit_0.5，bit_1，bit_2，bit_4，bit_8分别通过第一控制支路处理后得到对应的本征信号和反相信号；第6位控制信号bit_16输入第二控制支路处理后得到对应的本征信号和反相信号。为了更好地实现本发明，进一步地，所述第二控制支路仅对15.5dB或16dB衰减态下的第6位控制信号bit_16进行波形调整，其他衰减态下的第6位控制信号只做延时处理；如果是15.5dB或者16dB的衰减状态，则与非门相当于一个反相器，后面经过或非门后能够得到想要的缩短第6位低电平时间的信号；若是其他衰减状态，则与非门的输出始终保持高电平，异或门的输出始终保持低电平，此时或非门的输出信号是第6位控制信号的反相信号。为了更好地实现本发明，进一步地，当工作于参考态时，反相信号为高电平，控制串联的晶体管MP导通，本征信号为低电平，控制并联的晶体管MN关断；当工作于衰减态时，反相信号为低电平，控制串联的晶体管MP关断，本征信号为高电平，控制并联的晶体管MN导通。本发明的有益效果：本发明不需要额外的开关控制电路，利用改进的控制模块即可达到消除过冲的目的，电路结构简单，实施方便。在实际应用中，衰减器的衰减量是从0到31.5dB逐渐增加或者从31.5dB到0逐渐减小的变化，在这期间只有在15.5dB和16dB之间切换的时候会出现过冲，因此该控制模块可以使控制信号在15.5dB和16dB两种状态切换的时候引入31.5dB的衰减态，从而消除中间态引起的较大脉冲，具有较好的实用性。本发明针对实际应用中的衰减量逐渐变化的衰减器，仅消除15.5dB和16dB切换过程中产生的过冲，其他衰减状态切换时，不引入最大衰减态。本发明用于消除数控衰减器在15.5dB和16dB衰减之间切换时产生的切换过冲，提高衰减器的稳定性。本发明可以最大程度保留原始控制信号的波形特征，逻辑电路具有很好的稳定性，电路结构简单。第二控制支路的逻辑电路中通过串联多个反相器实现较小的时间延迟来消除控制信号在下降沿过程中引起的不理想的脉冲，提高了信号的稳定性，具有较好的实用性。附图说明图1为本发明的控制模块的原理框图；图2为衰减模块的电路结构图；图3为第一控制支路的电路原理图；图4为第二控制支路的电路原理图；图5为没有微小延时的第六位控制信号的输出信号时序图；图5为第六位控制信号经过控制模块的没有微小延时的本征信号时序图；图6为前五位控制信号的输出信号时序图；图6为前五位控制信号经过控制模块的本征信号时序图；图7为第六位控制信号的输出信号时序图；图7为第六位控制信号经过控制模块的本征信号时序图；图8为所有控制信号的输出信号时序图；图8为所有控制信号经过控制模块的本征信号时序图。具体实施方式实施例1：一种消除衰减器切换过冲的电路，包括衰减模块、控制模块，所述衰减模块包括若干个级联的衰减单元，所述衰减单元包括晶体管MP和晶体管MN，相邻衰减单元的晶体管MP串联，且晶体管MN并联，所述晶体管MP、晶体管MN的栅极的输入信号分别为反相信号、本征信号。如图1所示，所述控制模块的输入端用于接收若干个控制信号，且输出端用于输出对应的本征信号、反相信号；所述控制模块包括第一控制支路和第二控制支路，所述第二控制支路用于输出最后一个衰减单元的本征信号、反相信号，且所述第一控制支路用于输出其他衰减单元的本征信号、反相信号；即最后一个控制信号输入至第二控制支路，其他控制信号输入至第一控制支路。如图3所示，所述第一控制支路包括从前至后依次连接的延时电路和非门，所述延时电路用于输出本征信号，所述非门用于输出反相信号；如图4所示，所述第二控制支路包括第一支路和第二支路以及从前至后依次设置的或非门、第二反相器、第三反相器，所述第一支路上从前至后依次设置有第一反相器、与非门，所述与非门分别与延时电路和异或门连接，且延时电路与异或门连接；所述第二支路上设置有偶数个串联的反相器；所述第一支路和第二支路分别与或非门连接，第二反相器、第三反相器用于输出本征信号、反相信号。优选地，所述第二控制支路还包括第三支路，所述第三支路设置在第二反相器与第三反相器之间，所述第三支路上从前至后依次设置有第四反相器和第五反相器，所述第五反相器用于输出本征信号。优选地，如图2所示，所述衰减模块包括依次级联的6个衰减单元Cell_0.5dB、Cell_1dB、Cell_2dB、Cell_4dB、Cell_8dB、Cell_16dB，依次对应有6位控制信号bit_0.5，bit_1，bit_2，bit_4，bit_8，bit_16；前5位的控制信号bit_0.5，bit_1，bit_2，bit_4，bit_8分别输入第一控制支路，用于对应输出本征信号N_0.5，N_1，N_2，N_4，N_8以及反相信号P_0.5，P_1，P_2，P_4，P_8；第6位的控制信号bit_16输入第二控制支路，用于对应输出本征信号N_16以及反相信号P_16。优选地，如图2所示，所述衰减单元为T型衰减元件，所述衰减单元还包括电容C、电阻Rsh和两个串联的电阻Rse，所述衰减单元的串联支路设置有晶体管MP，且并联支路设置有晶体管MN，所述晶体管MP和两个串联的电阻Rse并联，所述晶体管MN与电阻Rsh串联，所述电阻Rsh与电容C并联，所述电容C用于调节附加相移。第二控制支路的逻辑电路中通过串联多个反相器实现较小的时间延迟来消除控制信号在下降沿过程中引起的不理想的脉冲，提高了信号的稳定性，具有较好的实用性。本发明不需要额外的开关控制电路，利用改进的控制模块即可达到消除过冲的目的，电路结构简单，实施方便。在实际应用中，衰减器的衰减量是从0到31.5dB逐渐增加或者从31.5dB到0逐渐减小的变化，在这期间只有在15.5dB和16dB之间切换的时候会出现过冲，因此该控制模块可以使控制信号在15.5dB和16dB两种状态切换的时候引入31.5dB的衰减态，从而消除中间态引起的较大脉冲，具有较好的实用性。实施例2：一种消除衰减器切换过冲的方法，采用上述的电路进行，最后一个控制信号分别输入第二控制支路的第一支路和第二支路，第一支路上的控制信号经过第一反相器后，与其他的控制信号共同输入与非门，与非门的输出以及与非门的输出经过延时电路后的延迟信号分别输入或非门；第二支路上的控制信号经过偶数个反相器后输入或非门；所述或非门的输出经过反相器处理后得到对应的本征信号和反相信号；其他控制信号分别通过第一控制支路进行整体延时得到本征信号，然后经过非门得到反相信号。优选地，针对级联的6个衰减单元的依次设置的6位控制信号bit_0.5，bit_1，bit_2，bit_4，bit_8，bit_16；前5位的控制信号bit_0.5，bit_1，bit_2，bit_4，bit_8分别通过第一控制支路处理后得到对应的本征信号和反相信号；第6位控制信号bit_16输入第二控制支路处理后得到对应的本征信号和反相信号。优选地，所述第二控制支路仅对15.5dB或16dB衰减态下的第6位控制信号bit_16进行波形调整，其他衰减态下的第6位控制信号只做延时处理；如果是15.5dB或者16dB的衰减状态，则与非门相当于一个反相器，后面经过或非门后能够得到想要的缩短第6位低电平时间的信号；若是其他衰减状态，则与非门的输出始终保持高电平，异或门的输出始终保持低电平，此时或非门的输出信号是第6位控制信号的反相信号。优选地，当工作于参考态时，反相信号为高电平，控制串联的晶体管MP导通，本征信号为低电平，控制并联的晶体管MN关断；当工作于衰减态时，反相信号为低电平，控制串联的晶体管MP关断，本征信号为高电平，控制并联的晶体管MN导通。本发明不需要额外的开关控制电路，利用改进的控制模块即可达到消除过冲的目的，电路结构简单，实施方便。在实际应用中，衰减器的衰减量是从0到31.5dB逐渐增加或者从31.5dB到0逐渐减小的变化，在这期间只有在15.5dB和16dB之间切换的时候会出现过冲，因此该控制模块可以使控制信号在15.5dB和16dB两种状态切换的时候引入31.5dB的衰减态，从而消除中间态引起的较大脉冲，具有较好的实用性。实施例3：一种消除衰减器切换过冲的电路，包括6个衰减单元的衰减模块以及6位控制信号的控制模块。如图1所示，输入的6位控制信号依次分别是bit_0.5，bit_1，…bit_16，控制模块的输出分别为控制信号的本征信号：N_0.5，N_1，…N_16，以及本征信号对应的反相信号：P_0.5，P_1，…P_16。优选地，如图2所示，衰减模块的每个衰减单元包含串联支路和并联支路，如图2所示，每个衰减单元都是经典的T型衰减器，其中Rse和Rsh是为了达到对应的衰减量的电阻，电容C是为了调节附加相移。每一位的控制信号经过逻辑电路后加在串联和并联晶体管的栅极对其进行控制。当工作于参考态时，反相信号P_0.5为高电平，控制的串联晶体管MP导通，本征信号N_0.5为低电平，控制的并联晶体管MN关断；当工作于衰减态时，反相信号P_0.5为低电平，控制的串联晶体管MP关断，本征信号N_0.5为高电平，控制的并联晶体管MP导通。本发明提供的方法，不需要额外的开关控制电路，利用改进的控制模块即可达到消除过冲的目的，电路结构简单，实施方便。在实际应用中，衰减器的衰减量是从0到31.5dB逐渐增加或者从31.5dB到0逐渐减小的变化，在这期间只有在15.5dB和16dB之间切换的时候会出现过冲，因此该控制模块可以使控制信号在15.5dB和16dB两种状态切换的时候引入31.5dB的衰减态，从而消除中间态引起的较大脉冲。优选地，如图3所示，前5位控制信号的第一控制支路的逻辑电路，经过延时电路后信号整体延时，得到本征信号，再经过一个反相器得到反相信号。如图4所示，第6位控制信号的第二控制支路的逻辑电路，它的作用是仅仅对15.5dB或16dB衰减态下的第6位控制信号进行波形调整，其他衰减态下的第6位控制信号只做延时处理。具体工作原理如下：第6位控制信号从两条路径输入，上面一条路径经过一个反相器后，与其他5位控制信号共同经过与非门，与非门的输出和其经过延时后的信号共同经过异或门，到这里该逻辑电路的目的是对控制信号想要达到的衰减状态进行一个验证，即如果是15.5dB或者16dB的衰减状态时，NAND相当于一个反相器，后面经过NOR后能够得到想要的缩短第6位低电平时间的信号；若是其他衰减状态，NAND的输出始终保持高电平，XOR的输出始终保持低电平，此时NOR的输出与该逻辑门的另外一个输入信号反相，即NOR的输出信号是第6位控制信号的反相信号。如图5所示，输入第6位控制信号，此时另一条路径上第6位控制信号经过偶数个反相器后，和异或门的输出公共经过一个或非门，这条路径上的偶数个反相器是必要的，目的是将第6位控制信号进行一个微小的延时，以便消除经过NOR后的信号在第6位控制信号的下降沿处出现的不需要的过冲信号，如果没有这一微小延时，最终第6位的逻辑输出如图5所示。如图4所示，或非门的输出经过一个反相器后即可得到本征信号，本征信号经过反相器后得到反相信号P_16，而为了增加扇出能力，通过串联两个额外的反相器后得到了本征信号N_16。如图8所示，分别输入6个衰减单元的控制信号，这种方法的逻辑电路最终输出的本征信号时序图如图8所示。分析图6-图8，很轻易的理解消除过冲的基本原理：通过对第6位控制信号的下降沿做延时，以及前五位控制信号的整体延时，可以在衰减量切换的过程中引入31.5dB的衰减态，衰减掉切换过程引起的中间态过冲。如图6、图6所示，本发明的前五位的控制信号采用整体延时，对控制信号原本的波形没有改变，即上升沿和下降沿的间距没有变化，只针对第6位控制信号进行调整，如图7所示，输入第6位控制信号。本发明是对上升沿或下降沿做整体的延时，上升时间和下降时间不变。过多的引入延时，会极大的增加衰减态之间的切换时间，而本发明针对性的引入延时，可以保持大部分衰减态的切换时间不变大。如图7、图8所示，在连续的衰减量调整过程中，该控制模块的逻辑电路最大程度上保留原始控制信号的波形特征，仅仅在15.5dB和16dB切换过程中改变第6位控制信号的波形特征，极大的增加逻辑电路的稳定性，且电路结构简单。以上所述，仅是本发明的较佳实施例，并非对本发明做任何形式上的限制，凡是依据本发明的技术实质对以上实施例所作的任何简单修改、等同变化，均落入本发明的保护范围之内。
