标题title
一种电池串充放电管理装置和电池储能系统
摘要abst
本发明公开了一种电池串充放电管理装置和电池储能系统，该电池串充放电管理装置应用于电池储能系统，该电池串充放电管理装置包括若干组电池储能子模块，每个电池储能子模块均包括若干个串联连接的电池储能单元、若干个第一电控开关、以及若干个第二电控开关。在使用过程中，电池管理模块根据电池检测模块检测到的电池电压和电池电流，控制第一电控开关和第二电控开关的闭合和断开，从而选择对应的电池储能子模块与电池储能系统连通，并对电池储能子模块的充电和放电进行调控，可以使得充电和放电过程更加均衡，避免出现电池单体的过充电或者过放电，从而提高整个电池储能子模块的整体使用寿命，并保障电池储能子模块的电压稳定。
权利要求书clms
1.一种电池串充放电管理装置，其特征在于，所述电池串充放电管理装置应用于电池储能系统，所述电池串充放电管理装置包括：若干组电池储能子模块，每个所述电池储能子模块均包括若干个电池储能单元和若干个第一电控开关，每个所述电池储能单元均包括电池串和与所述电池串串联连接的第二电控开关，若干个所述电池储能单元并联后与所述若干个第一电控开关并联连接，每个电池串中均设置有若干个电池；电池检测模块，用于检测每组所述电池串的电池电压和电池电流；电池管理模块，所述电池管理模块分别与所述电池串、所述第一电控开关、所述第二电控开关和所述电池检测模块电性连接，用于根据所述电池检测模块检测到的电池电压和电池电流，控制所述第一电控开关和所述第二电控开关的闭合和断开，从而选择对应的所述电池储能子模块与所述电池储能系统连通，并对所述电池储能子模块的充电和放电进行调控。2.根据权利要求1所述的电池串充放电管理装置，其特征在于，所述电池串通过所述第二电控开关与电池储能系统的母线连接，当所述电池储能子模块中的全部所述第二电控开关均断开，且所述电池储能子模块中的全部所述第一电控开关均闭合时，所述电池储能子模块中的所有电池串均从所述电池储能系统旁路。3.根据权利要求1所述的电池串充放电管理装置，其特征在于，所述电池串通过所述第二电控开关与电池储能系统的母线电性连接，所述第二电控开关设置有二极管，所述二极管具有放电过程中的电流阻断功能，当所述电池储能子模块中的电池串进行放电时，所述电池检测模块对所述电池串进行电压采样，所述电池管理模块根据检测到的电池电压，从n个电池串中根据电压数值进行排序，选择电压排序较高的m个电池串，并控制与所述m个电池串的第二电控开关闭合，所述m个电池串进行放电，其中，m＜n，且m和n均为正整数，m的具体个数根据母线的放电电流确定；在确定相应的m个电池串后，根据检测到的电压数值调整第一PWM占空比，且电压数值与第一PWM占空比正相关，以均衡m个电池串之间的放电电流，其中，所述第一PWM占空比与所述第二电控开关的PWM参数相关。4.根据权利要求1所述的电池串充放电管理装置，其特征在于，所述电池串通过所述第二电控开关与电池储能系统的母线连接，所述第二电控开关设置有二极管，当所述电池储能子模块中的电池串进行充电时，所述二极管对充电过程中的电流没有阻断功能，所述电池串均进入充电状态，所述电池检测模块对所述电池串进行电压采样，所述电池管理模块根据检测到的电池电压调整第二PWM占空比，且电压数值与第二PWM占空比负相关，以均衡所述电池串之间的放电电流，其中，所述第二PWM占空比与所述第二电控开关的PWM参数相关。5.根据权利要求1所述的电池串充放电管理装置，其特征在于，所述电池串充放电管理装置上还设置有若干个电阻器件，所述电阻器件与所述第二电控开关并联连接。6.根据权利要求1所述的电池串充放电管理装置，其特征在于，所述电池串充放电管理装置上还设置有若干个电容器件，所述电容器件与所述第二电控开关并联连接。7.一种电池储能系统，其特征在于，所述电池储能系统上设置有如权利要求1-6中任一项所述的电池串充放电管理装置，应用于所述电池储能系统通过直流/交流变换器并网，所述电池储能系统还包括母线、直流/交流变换器、三相隔离变压器、以及第三电控开关，若干组子模块簇分别与所述第三电控开关串联，每组所述子模块簇均包括若干个电性连接的所述电池储能子模块；当所述电池储能系统收到并网指令时，电池管理系统选择多组子模块簇与所述电池储能系统连接，并控制与所述子模块簇连接的第三电控开关闭合；其中，在确定相应的子模块簇后，所述电池管理系统从一组所述子模块簇的p个电池储能子模块中选择q个适合连接所述电池储能系统的电池储能子模块，其中，q= floor，q＜p，且p和q均为正整数，U直流母线为直流母线正极和负极之间的电压，U储能子模块为电池储能子模块的预设电压；在确定一组子模块簇内串入系统的q个子模块后，所述电池管理系统对直流母线电压进行采样，并根据电压采样结果控制本组子模块簇冗余的至少一个电池储能子模块中的所述第一电控开关和所述第二电控开关的闭合或断开，从而选择对应的所述电池储能子模块与所述电池储能系统连通，并对所述电池储能子模块的充电和放电进行调控。8.一种电池储能系统，其特征在于，所述电池储能系统上设置有如权利要求1-6中任一项所述的电池串充放电管理装置，应用于所述电池储能系统并网，所述电池储能系统包括直流正母线、直流负母线、设置在所述直流正母线和所述直流负母线之间的电感、以及六个子模块簇，每组所述子模块簇均包括若干个电性连接的所述电池储能子模块；其中，三个所述子模块簇的一端与所述直流正母线连接，三个所述子模块簇的另一端与所述电感的第一端串联，并引出A、B、C三相，作为逆变器的三个上桥臂；三个所述子模块簇的一端与所述直流负母线连接，三个所述子模块簇的另一端与所述电感的第二端串联，并引出A、B、C三相，作为逆变器的三个下桥臂；所述电感用于滤波并进行功率变换。
说明书desc
技术领域本发明涉及电力电子技术领域，特别是涉及一种电池串充放电管理装置和电池储能系统。背景技术近些年来随着我国双碳目标的确立和新能源设备的快速发展，电力系统中具有间歇性和波动性的发电方式已经成为了目前系统中不可忽视的影响因素，且在不久的将来其规模会越来越大。这样的发展趋势也使得电力系统削峰填谷的任务更加艰巨，电力储能是解决这一问题的有效手段之一。电池储能是目前实际应用最多的高能量密度储能方式，而现有的电池储能系统由于电池的单体额定电压大部分为3.2V，需要采用多个电池单体串联并联为电池包，然后再将多个电池包串联为满足直流母线电压的电池簇；一般为了增加储能的容量还需要将多个电池簇并联形成完整的电池储能系统。随后根据后级电路的输出需求，配置DC/DC变换器与光伏发电系统配合或者配置DC/AC变换器直接并网。近期已经有研究人员提出了一种较为新颖使用模块化多电平结构来实现对电池包精确控制的改进结构，称为模块化多电平电池储能系统，但是其对电池的精确控制仍局限在电池包级，无法实现对电池更加精细的控制。发明内容鉴于上述问题，提出了本发明实施例以便提供一种克服上述问题或者至少部分地解决上述问题的一种电池串充放电管理装置和电池储能系统。本发明实施例公开了一种电池串充放电管理装置，所述电池串充放电管理装置应用于电池储能系统，所述电池串充放电管理装置包括：若干组电池储能子模块，每组所述电池储能子模块均包括若干个电池储能单元和若干个第一电控开关，每个所述电池储能单元均包括电池串和与所述电池串串联连接的第二电控开关，若干个所述电池储能单元并联后与所述若干个第一电控开关并联连接，每个电池串中均设置有若干个电池；电池检测模块，用于检测每组所述电池串的电池电压和电池电流；电池管理模块，所述电池管理模块分别与所述电池串、所述第一电控开关、所述第二电控开关和所述电池检测模块电性连接，用于根据所述电池检测模块检测到的电池电压和电池电流，控制所述第一电控开关和所述第二电控开关的闭合和断开，从而选择对应的所述电池储能子模块与所述电池储能系统连通，并对所述电池储能子模块的充电和放电进行调控。可选的，所述电池串通过所述第二电控开关与电池储能系统的母线连接，当所述电池储能子模块中的全部所述第二电控开关均断开，且所述电池储能子模块中的全部所述第一电控开关均闭合时，所述电池储能子模块中的所有电池串均从所述电池储能系统旁路。可选的，所述电池串通过所述第二电控开关与电池储能系统的母线连接，所述第二电控开关设置有二极管，所述二极管具有放电过程中的电流阻断功能，当所述电池储能子模块中的电池串进行放电时，所述电池检测模块对所述电池串进行电压采样，所述电池管理模块根据检测到的电池电压，从n个电池串中根据电压数值进行排序，选择电压排序较高的m个电池串，并控制与所述m个电池串的第二电控开关闭合，所述m个电池串进行放电，其中，m＜n，且m和n均为正整数，m的具体个数根据母线的放电电流确定；在确定相应的m个电池串后，根据检测到的电压数值调整第一PWM占空比，且电压数值与第一PWM占空比正相关，以均衡m个电池串之间的放电电流，其中，所述第一PWM占空比与所述第二电控开关的PWM参数相关。可选的，所述电池串通过所述第二电控开关与电池储能系统的母线连接，所述第二电控开关设置有二极管，当所述电池储能子模块中的电池串进行充电时，所述二极管对充电过程中的电流没有阻断功能，所述电池串均进入充电状态，所述电池检测模块对所述电池串进行电压采样，所述电池管理模块根据检测到的电池电压调整第二PWM占空比，且电压数值与第二PWM占空比负相关，以均衡所述电池串之间的放电电流，其中，所述第二PWM占空比与所述第二电控开关的PWM参数相关。可选的，所述电池串充放电管理装置上还设置有若干个电阻器件，所述电阻器件与所述第二电控开关并联连接。可选的，所述电池串充放电管理装置上还设置有若干个电容器件，所述电容器件与所述第二电控开关并联连接。可选的，所述电池储能系统上设置有上述的电池串充放电管理装置，应用于所述电池储能系统通过直流/交流变换器并网，所述电池储能系统还包括母线、直流/交流变换器、三相隔离变压器、以及第三电控开关，若干组子模块簇分别与所述第三电控开关串联，每组所述子模块簇均包括若干个电性连接的所述电池储能子模块；当所述电池储能系统收到并网指令时，电池管理系统选择多组子模块簇与所述电池储能系统连接，并控制与所述子模块簇连接的第三电控开关闭合；其中，在确定相应的子模块簇后，所述电池管理系统从一组所述子模块簇的p个电池储能子模块中选择q个适合连接所述电池储能系统的电池储能子模块，其中，q= floor，q＜p，且p和q均为正整数，U直流母线为直流母线正极和负极之间的电压，U储能子模块为电池储能子模块的预设电压；在确定一组子模块簇内串入系统的q个子模块后，所述电池管理系统对直流母线电压进行采样，并根据电压采样结果控制本组子模块簇冗余的至少一个电池储能子模块中的所述第一电控开关和所述第二电控开关的闭合或断开，从而选择对应的所述电池储能子模块与所述电池储能系统连通，并对所述电池储能子模块的充电和放电进行调控。可选的，所述电池储能系统上设置有上述的电池串充放电管理装置，应用于所述电池储能系统并网，所述电池储能系统包括直流正母线、直流负母线、设置在所述直流正母线和所述直流负母线之间的电感、以及六个子模块簇，每组所述子模块簇均包括若干个电性连接的所述电池储能子模块；其中，三个所述子模块簇的一端与所述直流正母线连接，三个所述子模块簇的另一端与所述电感的第一端串联，并引出A、B、C三相，作为逆变器的三个上桥臂；三个所述子模块簇的一端与所述直流负母线连接，三个所述子模块簇的另一端与所述电感的第二端串联，并引出A、B、C三相，作为逆变器的三个下桥臂；所述电感用于滤波并进行功率变换。采用上述技术方案，本发明的技术方案具有以下有益效果：通过检测电池串的电池电压和电池电流，可以使得电池串充放电管理装置对其中的电池串单体的充电和放电进行精细化控制，使得充电和放电过程更加均衡，避免出现电池单体的过充电或者过放电，从而提高整个电池储能子模块的整体使用寿命，并保障电池储能子模块的电压稳定；多个电池储能模块通过开关进行并联连接，方便电池管理模块进行管理，选择合适的电池储能模块并入系统，避免因电池储能内部产生环流造成的电池过热问题。附图说明图1是现有技术中的一种常规的电池储能系统结构图；图2为本发明实施例提供的一种多电平半桥储能子模块结构示意图；图3为本发明实施例提供的一种电池储能系统的结构示意图；图4为本发明实施例提供的一种电池储能模块结构的示意图；图5为本发明实施例提供的一种电池串充放电管理装置的示意图；图6为本发明实施例提供的一种电池储能系统的示意图；图7为本发明实施例提供的另一种电池储能系统的示意图；图8为本发明实施例提供的一种电池储能子模块的示意图；图9为本发明实施例提供的另一种电池储能子模块的示意图。具体实施方式为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。本发明实施例是基于本申请的发明人对以下事实和问题的发现和认识作出的。相关技术中，电池储能是目前实际应用最多的高能量密度储能方式，而现有的电池储能系统由于电池的单体额定电压大部分为3.2V，需要采用多个电池单体串联并联为电池包，然后再将多个电池包串联为满足直流母线电压的电池簇；一般为了增加储能的容量还需要将多个电池簇并联形成完整的电池储能系统。随后根据后级电路的输出需求，配置DC/DC变换器与光伏发电系统配合或者配置DC/AC变换器直接并网。图1是现有技术中的一种常规的电池储能系统结构图，应用在配置DC/AC变换器并网的场景。这种电池储能系统由直流正母线101，直流负母线102，DC-AC变换器103，三相隔离变压器104，电池簇105，电池包106，第三电控开关107组成。其结构的基本原理是多个电池包106串联构成电池簇105，电池簇105串联第三电控开关107后，再并联构成整个电池储能系统。在图1的应用是直流正母线101与直流负母线102外接DC/AC变换器103后，再外接三相隔离变压器104并网的场景。若直流正母线101与直流负母线102外接DC/DC变换器130，则是常规电池储能系统与光伏发电配合的场景。这种电池储能系统的缺点主要表现在：1.只能通过第三电控开关107来控制整个电池簇是否接入系统，无法对其内部的电池包、电池单体进行充放电控制，这极易由于一致性差异导致内部的电池包、电池单体充放电控制不均衡，发生过充电或者过放电，并最终导致整个电池簇105的容量和寿命衰减；2.多个电池簇105并联形成整个电池储能系统，当有多个电池簇105同时接入直流正母线101与直流负母线102时，各电池簇之间的电压差可能导致电池储能系统内部产生环流，若电流过大则可能因为电池过热而发生火灾；3.直流正母线101与直流负母线102之间的电压不可控制，必须使用DC/AC变换器或者DC/DC变换器来实现后续的目标，增大了成本和损耗。为了解决图1中上述常规的电池储能系统所带来的问题，图2为本发明实施例提供的一种多电平半桥储能子模块结构示意图，可以使用模块化多电平半桥储能子模块结构来实现对电池簇内部电池包的精细化控制。该子模块基本结构由电池包206、上电力电子开关208、下电力电子开关209组成。基本的工作原理为：无论电流的方向，上电力电子开关208导通，下电力电子开关209关断可将电池包206串入储能系统中；而上电力电子开关208关断，下电力电子开关209导通可将电池包206从储能系统中旁路，从而实现对电池簇内部电池包的精细化控制。对电池包的精细化控制可以避免电池簇的容量和寿命衰减及电池过热。图3为本发明实施例提供的一种电池储能系统的结构示意图，该电池储能系统将图2所示的模块化多电平半桥储能子模块应用在直流电池储能系统中，由直流正母线301，直流负母线302，DC-AC变换器303，三相隔离变压器304，第三电控开关307，子模块簇310组成。其结构为多个图2中的储能子模块串联构成子模块簇310，再与第三电控开关307串联后，根据实际需求多个并联构成整个电池储能系统。图3的应用是直流正母线301与直流负母线302外接DC/AC变换器303后，再外接三相隔离变压器304并网的场景，此交流场景下与图1所示的常规电池储能系统相同，均需配置DC/AC变换器。但是若改为直流应用场景，因为子模块簇310具有直流电压调节能力可以节省图1中的DC/DC变换器130，从而降低电池储能系统并网的成本。在实际应用过程中，发明人发现图3中的子模块仍有不足之处，在大功率电池储能系统中，由于系统瞬时功率较大，流经电池包206的充电放电电流也很大，为了降低系统的损耗并提高可靠性，图4为本发明实施例提供的一种电池储能子模块结构的示意图，图2中的模块化多电平半桥子模块在实际应用中可以调整为图4所示的子模块，由多个上电力电子开关408并联和多个下电力电子开关409并联组成开关组实现开关功能，降低损耗的同时也提供了冗余的电力电子开关，从而方便对子模块中的电池包进行控制。在实际应用过程中，发明人发现电力电子开关与电池串串联时，相对并联的连接方式，在同容量不增加成本的前提条件下，对储能子模块电池包中的电池分组控制，可以更好的对电池串与母线之间的连接进行精确控制。图5为本发明实施例提供的一种电池串充放电管理装置的示意图，该电池串充放电管理装置应用于电池储能系统，该电池串充放电管理装置包括若干组电池储能子模块、电池检测模块和电池管理模块。每个电池储能子模块均包括若干个电池储能单元511和若干个第一电控开关509，每个电池储能单元511均包括电池串510和第二电控开关508。其中，若干组电池串510串联第二电控开关508后并联连接，再与若干个第一电控开关509并联构成上述电池储能子模块，每个电池串中均设置有若干个电池；采用该连接方式，可以在同容量不增加成本的前提条件下，对储能子模块中的电池串进行分组控制，可以更好的对电池串与母线之间的连接进行精确控制。现有技术中采用的电池包一般采用多个电池单体串联并联后包装而成，本发明实施例中使用与电池包406电压一致的电池串，电池串可理解为将电池包406的并联拆开为数个包装更小的电池组合，在电压相当、占用空间相当的前提下，容量更小的电池串可以实现更加精细的控制，从而方便用户对图5所示的电池储能子模块的输出电压进行调节。在使用过程中，电池检测模块用于检测每组电池串的电池电压和电池电流。电池管理模块分别与电池串、第一电控开关509、第二电控开关508和电池检测模块电性连接，用于根据电池检测模块检测到的电池电压和电池电流，控制第一电控开关509和第二电控开关508的闭合和断开，从而选择对应的电池串与电池储能系统连通，并对电池串的充电和放电进行调控。在使用过程中，电池串通过第二电控开关508与电池储能子模块外连接，当电池储能子模块中的全部第二电控开关508均断开，且电池储能子模块中的全部第一电控开关509均闭合时，所述电池储能子模块中的所有电池串均从电池储能系统旁路。在使用过程中，电池串通过第二电控开关508与电池储能子模块外连接，第二电控开关508设置有二极管，二极管具有放电过程中的电流阻断功能，当电池储能子模块中的电池串进行放电时，电池检测模块对电池串进行电压采样，电池管理模块根据检测到的电池电压，从n个电池串中根据电压数值进行排序，选择电压排序较高的m个电池串，并控制与m个电池串的第二电控开关闭合，m个电池串进行放电，其中，m＜n，且m和n均为正整数，m的具体个数根据母线的放电电流确定；m=Id/Ic，Id为子模块簇的放电电流需求，Ic为电池串的额定放电电流，与电池的放电倍率相关。去确定相应的m个电池串后，根据检测到的电压数值调整第一PWM占空比，且电压数值与第一PWM占空比正相关，以均衡m个电池串之间的放电电流。示例性的，当电流方向从下向上给子模块放电时，对电压采样的结果进行排序，将电压排序较高的m个电池串优先导通其第二电控开关508，使对应的m个电池串放电，m的个数由整个子模块的放电电流决定。随后需要均衡已经串入系统的m个电池串的放电电流，具体的操作步骤为针对电压较高的电池串，设置较高甚至为1的PWM占空比，而针对电压较低的电池串，设置较低的PWM占空比，通过这样的原理来均衡投入系统的各电池串的放电电流。在使用过程中，当所述电池储能子模块中的电池串进行充电时，所述二极管对充电过程中的电流没有阻断功能，所述电池串均进入充电状态，所述电池检测模块对所述电池串进行电压采样，所述电池管理模块根据检测到的电池电压调整第二PWM占空比，且电压数值与第二PWM占空比负相关，以均衡所述电池串之间的放电电流。示例性的，当电流方向从上向下给电池充电时，由于所有第二电控开关508中反并联二极管的存在，不具有阻断能力，但是仍可通过PWM调节实现电池串电流调节，调节原理是第二电控开关508的沟道导通压降很低，而反并联二极管有0.7-1V的压降，通过沟道充电的电池串充电电流大于通过反并联二极管充电的电池串充电电流，两者的差异可以实现电池串电流调节。由此可根据并联可控电池储能模块511中各电池串状态以及外界充电放电电流的大小来最优选择适合串入储能系统的电池串，实现对电池串的精细化控制。需要说明的是，第一PWM占空比和第二PWM占空比均与第二电控开关508的设计参数相关，第一电控开关509和第二电控开关508均可以采用MOS管，本领域技术人员可以根据MOS管的参数对第一PWM占空比和第二PWM占空比的参数进行设定，以满足实际使用过程中的需求。本发明的技术方案具有以下有益效果：通过检测电池串的电池电压和电池电流，可以使得电池串充放电管理装置对其中的电池串单体的充电和放电进行精细化控制，使得充电和放电过程更加均衡，避免出现电池单体的过充电或者过放电，从而提高整个电池储能子模块的整体使用寿命，并保障电池储能子模块的电压稳定；多个电池储能模块通过开关进行并联连接，方便电池管理模块进行管理，选择合适的电池储能模块并入系统，避免因电池储能内部产生环流导致的电池过热问题。图6为本发明实施例提供的一种电池储能系统的示意图，该储能系统上设置有若干组上述的图5所示的电池储能子模块，该电池储能系统包括直流正母线601，直流负母线602，DC-AC变换器603，三相隔离变压器604，n个图5所示储能子模块串联后构成的子模块簇612，第三电控开关607组成。其结构为子模块簇612串联第三电控开关607后，再并联构成整个电池储能系统，每组子模块簇612均包括若干个电性连接的电池储能子模块。图6的应用是直流正母线601与直流负母线602外接DC/AC变换器603后，再外接三相隔离变压器604并网的场景，此场景下与图1所示常规电池储能系统相同，均需配置DC/AC变换器。但与图1所示电池储能系统不同的是，若图6所示电池储能系统与光伏发电系统配合，则可以节省图1中的DC/DC变化器130，这是因为由储能子模块串联后构成的子模块簇612具有直流电压调节能力，可以调节直流正母线601与直流负母线602之间的直流电压。由于该储能系统与光伏发电系统配合时，可以节省DC/DC变化器，从而降低并网的成本。实际应用时，为了保证电池储能系统的可靠性和灵活性，每个子模块簇612均设置少量冗余的储能子模块。当电池储能系统收到并网指令时，电池管理系统选择多组子模块簇612与电池储能系统连接，并控制与子模块簇612连接的第三电控开关607闭合；其中，在确定相应的子模块簇后，电池管理系统从一组子模块簇612的p个电池储能子模块中选择q个适合连接电池储能系统的电池储能子模块，其中，q= floor，q＜p，且p和q均为正整数，U直流母线为直流母线正极和负极之间的电压，U储能子模块为电池储能子模块的预设电压；在确定一组子模块簇内串入系统的q个子模块后，电池管理系统对直流母线电压进行采样，并根据电压采样结果控制本组子模块簇冗余的至少一个电池储能子模块中的第一电控开关和第二电控开关的闭合或断开，从而选择对应的电池储能子模块与电池储能系统连通，并对电池储能子模块的充电和放电进行调控。需要说明的是，电池储能系统在运行时可以根据预设算法选取子模块簇612中最适合投入系统的q个储能子模块，本领域技术人员可以根据自身需求对预设算法进行设定，本申请对此不作具体限定。图7是为本发明实施例提供的另一种电池储能系统的示意图，该电池储能系统使用MMC的原理直接并网的拓扑示意图，即储能逆变一体结构。这种应用与图6所示的场景一致，都是电池储能系统并网，但是图7中的拓扑可以节省大功率DC/AC变换器，代价是使用相对复杂的控制思路。由直流正母线701，直流负母线702，n个储能子模块串联后构成的子模块簇712组成。具体的连接方式如图7所示，电池储能系统包括直流正母线、直流负母线、设置在直流正母线和直流负母线之间的电感、以及六个子模块簇712，每组子模块簇712均包括若干个电性连接的电池储能子模块；其中，三个子模块簇712的一端与直流正母线701连接，三个子模块簇712的另一端与电感L0的第一端串联，并引出A、B、C三相，作为逆变器的三个上桥臂；三个子模块簇712的一端与直流负母线702连接，三个子模块簇712的另一端与电感L0的第二端串联，并引出A、B、C三相，作为逆变器的三个下桥臂；电感L0用于滤波并进行功率变换。储能逆变一体拓扑结构使用MMC中常用的最近邻控制来模拟交流电压，以A相为例，通过控制2n个子模块中储能电池是否串入A相上下桥臂的子模块簇来使A相端口形成阶梯状的正弦波形，B、C两相也是相同的控制原理；而子模块内部仍采用图5中的最优精细化控制思路。采用该电池储能系统，可以节省大功率DC/AC变换器，降低成本的同时，还可以减少电池储能系统占用的使用空间。在一些实施例中，图8为本发明实施例提供的一种电池储能子模块的示意图。相对于图5中的电池储能子模块，通过在电池储能子模块的第二电控开关旁并联电阻器件，如图8中的电阻，可以在电池放电时提供一个降压回路。基本的工作原理为：若所有可控电池储能模块811中的第二电控开关808关断，所有下第一电控开关809导通，无论电流的方向可将模块中所有电池串从储能系统中旁路。若所有第一电控开关809关断，工作原理与电流方向有关：电流方向从下向上给电池放电，则所有第二电控开关808具有阻断能力，并联的电阻构成的降压回路，通过沟道放电的电池串放电电流大于通过电阻的电池串放电电流，可由PWM调节每个可控电池储能模块811的电流；电流方向从上向下给电池充电，由于所有第二电控开关808中反并联二极管的存在，不具有阻断能力，但是仍可通过PWM调节实现电池串电流调节，调节原理是第二电控开关808的沟道导通压降很低，而反并联二极管导通压降约为0.7-1V，通过沟道充电的电池串充电电流大于通过反并联二极管充电的电池串充电电流，两者的差异可以实现电池串电流调节。由此可根据并联可控电池储能模块811中各电池串状态以及外界充电放电电流的大小来最优选择适合串入储能系统的电池串，实现对电池串的精细化控制。对充电和放电进行精细化控制，可以使得充电和放电过程更加均衡，避免出现电池单体的过充电或者过放电，从而提高整个电池储能子模块的整体使用寿命，并保障电池储能子模块的电压稳定。在一些实施例中，图9为本发明实施例提供的另一种电池储能子模块的示意图。相对于图5和图8中的电池储能子模块，通过在电池储能子模块的第二电控开关旁并联一个电容组件，可以在电池放电时提供一个降压回路。基本的工作原理为：若所有可控电池储能模块911中的第二电控开关908关断，所有第一电控开关909导通，无论电流的方向可将模块中所有电池串从储能系统中旁路。若所有第一电控开关909关断，工作原理与电流方向有关：电流方向从下向上给电池放电，则所有第二电控开关908具有阻断能力，并联的电容构成的降压回路，通过沟道放电的电池串放电电流大于通过电容的电池串放电电流，可由PWM调节每个可控电池储能模块911的电流；电流方向从上向下给电池充电，由于所有第二电控开关908中反并联二极管的存在，不具有阻断能力，但是仍可通过PWM调节实现电池串电流调节，调节原理是第二电控开关908的沟道导通压降很低，而反并联二极管导通压降约为0.7-1V，通过沟道充电的电池串充电电流大于通过反并联二极管充电的电池串充电电流，两者的差异可以实现电池串电流调节。由此可根据并联可控电池储能模块911中各电池串状态以及外界充电放电电流的大小来最优选择适合串入储能系统的电池串，实现对电池串的精细化控制。对充电和放电进行精细化控制，可以使得充电和放电过程更加均衡，避免出现电池单体的过充电或者过放电，从而提高整个电池储能子模块的整体使用寿命，并保障电池储能子模块的电压稳定。本说明书中的各个实施例均采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似的部分互相参见即可。本领域内的技术人员应明白，本发明的实施例可提供为方法、装置、或计算机程序产品。因此，本发明实施例可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明实施例可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。尽管已描述了本发明实施例的优选实施例，但本领域内的技术人员一旦得知了基本创造性概念，则可对这些实施例做出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本发明实施例范围的所有变更和修改。最后，还需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者终端设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者终端设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者终端设备中还存在另外的相同要素。以上对本发明所提供的实施例进行了详细介绍，本文中应用了具体个例对本发明的原理及实施方式进行了阐述，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处，综上所述，本说明书内容不应理解为对本发明的限制。
