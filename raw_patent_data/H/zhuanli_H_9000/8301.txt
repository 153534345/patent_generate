标题title
帧内预测模式的选择方法及装置、设备及存储介质
摘要abst
本发明实施例公开了一种帧内预测模式的选择方法及装置、设备及存储介质，所述方法包括：获取当前预测块；利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的方向复杂度；根据所述k个方向的方向复杂度以及预设的方向复杂度阈值对预设的帧内预测模式列表进行筛选，确定所述当前预测块的目标帧内预测模式。通过确定当前预测块的方向复杂度，可以利用方向复杂度以及方向复杂度阈值对帧内预测模式列表筛选，得到当前预测块的目标帧内预测模式，使得在预测块进行帧内预测模式的选择时无需遍历帧内预测模式列表中全部帧内预测模式，降低了编码复杂度。
权利要求书clms
1.一种帧内预测模式的选择方法，其特征在于，所述方法包括：获取当前预测块；利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的方向复杂度；根据所述k个方向的方向复杂度以及预设的方向复杂度阈值对预设的帧内预测模式列表进行筛选，确定所述当前预测块的目标帧内预测模式。2.根据权利要求1所述方法，其特征在于，所述根据所述k个方向的方向复杂度以及预设的方向复杂度阈值对预设的帧内预测模式列表进行筛选，确定所述当前预测块的目标帧内预测模式，包括：遍历k个方向的方向复杂度，确定小于所述方向复杂度阈值的方向复杂度对应的目标方向；利用所述目标方向对预设的帧内预测模式列表进行筛选，确定所述目标方向对应的候选帧内预测模式的第一列表；当不存在所述目标方向，则将所述预设的帧内预测模式列表作为所述第一列表；根据所述第一列表确定所述目标帧内预测模式。3.根据权利要求2所述方法，其特征在于，所述根据所述第一列表确定所述目标帧内预测模式，包括：对所述第一列表进行粗模式选择，确定粗模式选择得到的第二列表；根据所述第二列表进行率失真优化计算，确定所述目标帧内预测模式。4.根据权利要求3所述方法，其特征在于，所述根据所述第二列表进行率失真优化计算，确定所述目标帧内预测模式，包括：确定所述第二列表中的每个帧内预测模式的哈达玛代价；根据所述第二列表中第一个帧内预测模式的哈达玛代价以及预设的权衡参数，确定哈达玛代价阈值，所述权衡参数用于权衡所述帧内预测模式的选择方法的计算复杂度以及准确率；根据所述第二列表中的每个帧内预测模式的哈达玛代价以及所述哈达玛代价阈值对所述第二列表中的每个帧内预测模式进行筛选，确定筛选后的第三列表；根据所述第三列表进行率失真优化计算，确定所述目标帧内预测模式。5.根据权利要求4所述方法，其特征在于，所述根据所述第二列表中的每个帧内预测模式的哈达玛代价以及所述哈达玛代价阈值对所述第二列表中的每个帧内预测模式进行筛选，确定筛选后的第三列表，包括：从第二个帧内预测模式开始，遍历所述第二列表中的每一个帧内预测模式的哈达玛代价，确定大于等于所述哈达玛代价阈值的哈达玛代价的帧内预测模式集合；确定所述帧内预测模式集合中的帧内预测模式序号的序号最小值；确定所述第二列表中序号小于所述序号最小值的帧内预测模式，得到第三列表。6.根据权利要求4所述方法，其特征在于，所述根据所述第三列表进行率失真优化计算，确定所述目标帧内预测模式，包括：利用所述第三列表进行率失真优化计算，确定所述第三列表中最小率失真对应的帧内预测模式为所述目标帧内预测模式。7.根据权利要求1所述方法，其特征在于，所述利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的目标方向复杂度，之前还包括：确定所述当前预测块的第一主边缘方向与相邻预测块的第二主边缘方向；若所述第一主边缘方向与第二主边缘方向相同，则确定所述当前预测块的目标帧内预测模式为所述相邻预测块的目标帧内预测模式；若所述第一主边缘方向与第二主边缘方向不同或者任一一个为非定向，则继续执行所述利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的目标方向复杂度的步骤。8.一种帧内预测模式的选择装置，其特征在于，所述装置包括：数据获取模块：用于获取当前预测块；特征计算模块：用于利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的方向复杂度；模式选择模块：用于根据所述k个方向的方向复杂度以及预设的方向复杂度阈值对预设的帧内预测模式列表进行筛选，确定所述当前预测块的目标帧内预测模式。9.一种计算机可读存储介质，存储有计算机程序，其特征在于，所述计算机程序被处理器执行时，使得所述处理器执行如权利要求1至7中任一项所述方法的步骤。10.一种计算机设备，包括存储器和处理器，其特征在于，所述存储器存储有计算机程序，所述计算机程序被所述处理器执行时，使得所述处理器执行如权利要求1至7中任一项所述方法的步骤。
说明书desc
技术领域本发明涉及视频编码技术领域，尤其涉及一种帧内预测模式的选择方法及装置、设备及存储介质。背景技术随着高清、超高清、4K乃至8K视频的出现，使得高分辨率视频的存储和传输面临着巨大的挑战。为了满足数字视频数据量的爆发式增长和适应网络技术的发展，视频编码标准一直在更新迭代，例如视频编码联合组发布了H.264/AVC、H.265/HEVC和H.266/VVC标准以及SVAC联盟发布了SVAC1.0和SVAC2.0标准。随着每一代视频编码标准的出现，在相同的视觉质量下，节省了越来越多的码率，但是由于引入了极其复杂的视频编码技术，导致编码复杂度急剧增加。因此，为了保证视频编码标准的实用性，降低编码复杂度有着非常重要的意义。发明内容本发明的主要目的在于提供一种帧内预测模式的选择方法及装置、设备及存储介质，可以解决现有技术中的在相同的视觉质量下，节省了越来越多的码率，但是由于引入了极其复杂的视频编码技术，导致编码复杂度急剧增加的问题。为实现上述目的，本发明第一方面提供一种帧内预测模式的选择方法，所述方法包括：获取当前预测块；利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的方向复杂度；根据所述k个方向的方向复杂度以及预设的方向复杂度阈值对预设的帧内预测模式列表进行筛选，确定所述当前预测块的目标帧内预测模式。在一种可行实现方式中，所述根据所述k个方向的方向复杂度以及预设的方向复杂度阈值对预设的帧内预测模式列表进行筛选，确定所述当前预测块的目标帧内预测模式，包括：遍历k个方向的方向复杂度，确定小于所述方向复杂度阈值的方向复杂度对应的目标方向；利用所述目标方向对预设的帧内预测模式列表进行筛选，确定所述目标方向对应的候选帧内预测模式的第一列表；当不存在所述目标方向，则将所述预设的帧内预测模式列表作为所述第一列表；根据所述第一列表确定所述目标帧内预测模式。在一种可行实现方式中，所述根据所述第一列表确定所述目标帧内预测模式，包括：对所述第一列表进行粗模式选择，确定粗模式选择得到的第二列表；根据所述第二列表进行率失真优化计算，确定所述目标帧内预测模式。在一种可行实现方式中，所述根据所述第二列表进行率失真优化计算，确定所述目标帧内预测模式，包括：确定所述第二列表中的每个帧内预测模式的哈达玛代价；根据所述第二列表中第一个帧内预测模式的哈达玛代价以及预设的权衡参数，确定哈达玛代价阈值，所述权衡参数用于权衡所述帧内预测模式的选择方法的计算复杂度以及准确率；根据所述第二列表中的每个帧内预测模式的哈达玛代价以及所述哈达玛代价阈值对所述第二列表中的每个帧内预测模式进行筛选，确定筛选后的第三列表；根据所述第三列表进行率失真优化计算，确定所述目标帧内预测模式。在一种可行实现方式中，所述根据所述第二列表中的每个帧内预测模式的哈达玛代价以及所述哈达玛代价阈值对所述第二列表中的每个帧内预测模式进行筛选，确定筛选后的第三列表，包括：从第二个帧内预测模式开始，遍历所述第二列表中的每一个帧内预测模式的哈达玛代价，确定大于等于所述哈达玛代价阈值的哈达玛代价的帧内预测模式集合；确定所述帧内预测模式集合中的帧内预测模式序号的序号最小值；确定所述第二列表中序号小于所述序号最小值的帧内预测模式，得到第三列表。在一种可行实现方式中，所述根据所述第三列表进行率失真优化计算，确定所述目标帧内预测模式，包括：利用所述第三列表进行率失真优化计算，确定所述第三列表中最小率失真对应的帧内预测模式为所述目标帧内预测模式。在一种可行实现方式中，所述利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的目标方向复杂度，之前还包括：确定所述当前预测块的第一主边缘方向与相邻预测块的第二主边缘方向；若所述第一主边缘方向与第二主边缘方向相同，则确定所述当前预测块的目标帧内预测模式为所述相邻预测块的目标帧内预测模式；若所述第一主边缘方向与第二主边缘方向不同或者任一一个为非定向，则继续执行所述利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的目标方向复杂度的步骤。为实现上述目的，本发明第二方面提供一种帧内预测模式的选择装置，所述装置包括：数据获取模块：用于获取当前预测块；特征计算模块：用于利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的方向复杂度；模式选择模块：用于根据所述k个方向的方向复杂度以及预设的方向复杂度阈值对预设的帧内预测模式列表进行筛选，确定所述当前预测块的目标帧内预测模式。为实现上述目的，本发明第三方面提供一种计算机可读存储介质，存储有计算机程序，所述计算机程序被处理器执行时，使得所述处理器执行如第一方面及任一可行实现方式所示步骤。为实现上述目的，本发明第四方面提供一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，所述计算机程序被所述处理器执行时，使得所述处理器执行如第一方面及任一可行实现方式所示步骤。采用本发明实施例，具有如下有益效果：本发明提供一种帧内预测模式的选择方法，所述方法包括：获取当前预测块；利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的方向复杂度；根据所述k个方向的方向复杂度以及预设的方向复杂度阈值对预设的帧内预测模式列表进行筛选，确定所述当前预测块的目标帧内预测模式。通过确定当前预测块的方向复杂度，可以利用方向复杂度以及方向复杂度阈值对帧内预测模式列表筛选，得到当前预测块的目标帧内预测模式，使得在预测块进行帧内预测模式的选择时无需遍历帧内预测模式列表中全部帧内预测模式，降低了编码复杂度。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。其中：图1为本发明实施例中一种帧内预测模式的选择方法的流程图；图2为本发明实施例中一种帧内预测模式的选择方法的另一流程图；图3为本发明实施例中一种当前预测块的划分示意图；图4为本发明实施例中一种帧内预测模式的选择装置的结构框图；图5为本发明实施例中计算机设备的结构框图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。需要说明的是，在视频编码帧内预测中，每一帧被划分为若干个编码树单元CTU，一个编码树单元CTU被划分为多个预测块，现有的对每个预测块进行帧内预测模式选择，需要通过遍历所有预测模式，筛选出最佳预测模式。在帧内预测模式选择过程中，因为要遍历所有预测模式，所以产生了大量的编码复杂度。本文提出来的算法的核心思想是通过离散微分算子判断预测块的方向，选用相对应方向的帧内预测模式进行选择最优预测模式，从而避免了遍历所有模式，降低视频编码复杂度，节省了编码时间。该算法的核心思路流程图如图1所示。请参阅图1，图1为本发明实施例中一种帧内预测模式的选择方法的流程图，如图1所示方法包括如下步骤：101、获取当前预测块；102、利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的方向复杂度；需要说明的是，本申请所示方法可以由终端或服务器执行，终端可以是台式终端或移动终端，移动终端具体可以是手机、平板电脑、笔记本电脑等中的至少一种。服务器可以用独立的服务器或者是多个服务器组成的服务器集群来实现。进一步的，为了进行当前预测块的目标帧内预测模式的选择，本申请首先通过方向复杂度算法计算当前预测块PU在k个方向的方向复杂度PBDCk，采用四个方向的Sobel运算器Sk判断预测块PU的方向，通过预测块方向复杂度进行判断，从而选用相对应方向的帧内模式。其中，k个方向可以包括水平、垂直、45°以及135°，每个方向对应一个离散微分算子Sk，Sk对应4个方向的帧内预测模式集合PMk，k={hor,vec,45°,135°}，示例性的：Sk：ShorSvecS45°S135°PMk：{PMhor, PMvec,PM45°, PM135°}其中，PMk是视频编码标准的k方向的帧内预测模式编码，每个视频编码标准的帧内预测模式编码不一样。方向复杂度算法如下：，式中，，；其中，MxN为预测块的大小维度，A为预测块的第i行第j列的像素矩阵，f是预测块中的第i行第j列的像素点，Sk*A表示Sk和A进行卷积运算，PBDCk为k方向的方向复杂度。103、根据所述k个方向的方向复杂度以及预设的方向复杂度阈值对预设的帧内预测模式列表进行筛选，确定所述当前预测块的目标帧内预测模式。得到预测块PU的k个方向的方向复杂度之后，便可以通过k个方向的方向复杂度对预设的帧内预测模式列表进行筛选，具体的，根据所述k个方向的方向复杂度以及预设的方向复杂度阈值TH对预设的帧内预测模式列表进行筛选，确定所述当前预测块PU的目标帧内预测模式，根据视频编码标准的特性，由于提出了更好的方向特征值去表示预测块的方向，从而更能准确得表示预测块的方向性，根据方向特征值阈值进行帧内预测模式列表筛选确定当前预测块的目标帧内预测模式，相比于筛选结果可能采用按原编码器遍历所有帧内预测模式，更能降低视频编码性能的损失。本发明提供一种帧内预测模式的选择方法，所述方法包括：获取当前预测块；利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的方向复杂度；根据所述k个方向的方向复杂度以及预设的方向复杂度阈值对预设的帧内预测模式列表进行筛选，确定所述当前预测块的目标帧内预测模式。通过确定当前预测块的方向复杂度，可以利用方向复杂度以及方向复杂度阈值对帧内预测模式列表筛选，得到当前预测块的目标帧内预测模式，使得在预测块进行帧内预测模式的选择时无需遍历帧内预测模式列表中全部帧内预测模式，降低了编码复杂度。请参阅图2，图2为本发明实施例中一种帧内预测模式的选择方法的另一流程图，如图2所示方法包括如下步骤：201、获取当前预测块；202、利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的方向复杂度；需要说明的是，步骤201以及202的内容与图1所示步骤101以及102的内容相似，为避免重复此处不作赘述，具体可参阅前述图1所示步骤101以及102的内容。在一种可行实现方式中，根据实验分析，大多数情况下，当前预测块PU的帧内最优模式与相邻PU的最优模式方向相同约占90%，因此在步骤202之前还可以包括A1-A3：A1、确定所述当前预测块的第一主边缘方向与相邻预测块的第二主边缘方向；A2、若所述第一主边缘方向与第二主边缘方向相同，则确定所述当前预测块的目标帧内预测模式为所述相邻预测块的目标帧内预测模式；A3、若所述第一主边缘方向与第二主边缘方向不同或者任一一个为非定向，则继续执行所述利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的目标方向复杂度的步骤。需要说明的是，为了减少编码复杂度，在进行帧内模式预测前，可以先判断当前预测单元的主边缘方向与相邻PU的主边缘方向是否相同，根据实验分析，大多数情况下，当前PU的帧内最优模式与相邻PU的最优模式方向相同约占90%，因此，在进行帧内模式预测前，可以通过步骤A1确定当前预测块的第一主边缘方向与相邻预测块的第二主边缘方向，若第一主边缘方向与第二主边缘方向相同，则执行步骤A2确定当前预测块的目标帧内预测模式为相邻预测块的目标帧内预测模式，也即若当前PU和相邻PU的主边缘方向相同，则选择相邻PU的最优模式为当前PU的帧内最优模式；若第一主边缘方向与第二主边缘方向不同或者任一一个为非定向，则执行步骤A3，继续通过步骤203-206确定当前预测块的目标帧内预测模式。203、遍历k个方向的方向复杂度，确定小于所述方向复杂度阈值的方向复杂度对应的目标方向；204、利用所述目标方向对预设的帧内预测模式列表进行筛选，确定所述目标方向对应的候选帧内预测模式的第一列表；205、当不存在所述目标方向，则将所述预设的帧内预测模式列表作为所述第一列表；206、根据所述第一列表确定所述目标帧内预测模式。需要说明的是，遍历PBDC所有的k进行判断，如果PBDCk≤TH，表明该PU在k方向的方向特征强，则选用PMk进行筛选最佳预测模式，如果PBDCk都大于TH，则该预测块遍历所有帧内预测模式，其中TH是通过实验得到的阈值。在一种可行实现方式中，可以通过粗模式选择对第一列表进行筛选，进一步删减目标帧内预测模式的选择范围，因此，步骤206可以包括：对所述第一列表进行粗模式选择，确定粗模式选择得到的第二列表；根据所述第二列表进行率失真优化计算，确定所述目标帧内预测模式。需要说明的是，为了进一步降低编码复杂度，在进行率失真优化计算之前还可以通过统计分析对候选帧内预测模式的第二列表进行删减，缩小目标帧内预测模式的选择范围，比如：对于满足PBDCk≤TH的第二列表，根据实验统计可知，8x8和4x4的PU的第二列表中前3候选模式成为最优模式的概率总和均超过95%，因此，将这两种大小的PU从第二列表中的8个候选模式缩减到3个；对于不满足PBDCk≤TH的第二列表，根据候选模式列表与最优模式统计发现，若候选模式前三包含planar，DC和垂直模式中任意2个，这三个模式成为该PU最优模式概率远高于其他模式，因此，若满足以上条件，则将8x8和4x4的PU从8个候选模式缩减到3个。进一步的，为了减少极其复杂的RDO计算，可以将得到的候选模式列表再经过N方法进行筛选，最后确定候选模式列表并更新最佳可能模式进行RDO计算，得出最优帧内预测模式，因此，根据所述第二列表进行率失真优化计算，确定所述目标帧内预测模式，包括步骤B1-B4：B1、确定所述第二列表中的每个帧内预测模式的哈达玛代价；B2、根据所述第二列表中第一个帧内预测模式的哈达玛代价以及预设的权衡参数，确定哈达玛代价阈值，所述权衡参数用于权衡所述帧内预测模式的选择方法的计算复杂度以及准确率；B3、根据所述第二列表中的每个帧内预测模式的哈达玛代价以及所述哈达玛代价阈值对所述第二列表中的每个帧内预测模式进行筛选，确定筛选后的第三列表；B4、根据所述第三列表进行率失真优化计算，确定所述目标帧内预测模式示例性的，N方法如下：；其中，HD0是候选帧内预测模式的第二列表的第一个帧内预测模式的哈达玛代价，HDi是候选帧内预测模式的第二列表的第i+1个帧内预测模式的哈达玛代价，arg min表示i满足HDi＞βHD0的帧内预测模式序号i最小值，β为预设的权衡参数，用于权衡本申请算法计算复杂度和准确率，其值大于1，具体取值可通过实验得到，其中，if HDi＞βHD0为N方法的判断式。以此，通过确定所述第二列表中的每个帧内预测模式的哈达玛代价，并采用上述N方法进行判断根据所述第二列表中的每个帧内预测模式的哈达玛代价以及哈达玛代价阈值对所述第二列表中的每个帧内预测模式进行筛选，确定筛选后的第三列表。具体的，从第二列表的第二个帧内预测模式开始，遍历所述第二列表中的每一个帧内预测模式的哈达玛代价，确定大于等于所述哈达玛代价阈值的哈达玛代价的帧内预测模式集合，也即i从1开始，进行HDi＞βHD0判断，直到遍历完候选模式列表中的所有模式，之后得到满足上述哈达玛判断式的帧内预测模式集合，在该帧内预测模式集合中，确定帧内预测模式集合中的帧内预测模式序号的序号最小值，也即在满足该哈达玛判断式的帧内预测模式中取最小的i，则第i个模式和i之后的模式都不参与RDO计算，确定所述第二列表中序号小于所述序号最小值的帧内预测模式，得到第三列表。最后，便可以通过层层筛选后的第三列表，以优选出的帧内预测模式进行率失真优化计算，也即利用所述第三列表进行率失真优化计算，确定所述第三列表中最小率失真对应的帧内预测模式为所述目标帧内预测模式。需要说明的是，以上提及的Sobel运算器可应用到不同视频编码标准中，只需根据不同标准的特性进行改动，接下来将介绍Sobel运算器在不同视频编码标准的应用，未提及的视频编码标准也可以借鉴参考。1）在H.265/HEVC标准的应用：在H.265/HEVC标准中，在进行帧内模式预测前，先判断当前预测单元的主边缘方向与相邻PU的主边缘方向是否相同，根据实验分析，大多数情况下，当前PU的帧内最优模式与相邻PU的最优模式方向相同约占90%，因此，若当前PU和相邻PU的主边缘方向相同，则选择相邻PU的最优模式为当前PU的帧内最优模式。以上涉及的公式如下：；；；；；；其中，dV，dH，d45，d135，dND分别是垂直方向、水平方向、45度对角线、135度对角线和非定向，Pi是PU进行一次四叉树划分后形成四个块，Pi是每个块的像素点均值，如图3所示，图3为本发明实施例中一种当前预测块的划分示意图，图3示出了预测块PU进行一次四叉树划分的示意图，其中，P0是左上块，P1是右上块，P2是左下块，P3是右下块，MED取这五个方向的最大值，也就是拥有最大值的方向是PU的主边缘方向。如果两者方向不同或任何一个为非定向的话，则对当前PU进行帧内模式预测，首先，通过上文提及的Sobel运算器，根据PBDCk的值，选择相对应的PMk进行粗模式选择或遍历所有帧内预测模式进行RMD。根据H.265/HEVC标准的帧内预测模式，PMk具体公式如下：PMk：PMhor={0,1,6,7,8,9,10,11,12,13,14}；PMvec={0,1,22,23,24,25,26,27,28,29,30}；PM45°={0,1,2,3,4,5,6,31,32,33,34}；PM135°={0,1,14,15,16,17,18,19,20,21,22}；其中，0~34为35种帧内预测模式编码。为了进一步降低编码复杂度，对于满足PBDCk≤TH，根据实验统计可知，8x8和4x4的PU的前3候选模式成为最优模式的概率总和均超过95%，因此，将这两种大小的PU从8个候选模式缩减到3个；对于不满足PBDCk≤TH，根据候选模式列表与最优模式统计发现，若候选模式前三包含planar，DC和垂直模式中任意2个，这三个模式成为该PU最优模式概率远高于其他模式，因此，若满足以上条件，则将8x8和4x4的PU从8个候选模式缩减到3个。为了减少极其复杂的RDO计算，将得到的候选模式列表再经过N方法进行筛选，最后确定候选模式列表并更新最佳可能模式进行RDO计算，得出最优帧内预测模式。以上涉及的公式如下：N：；其中，HD0是候选模式的第一个模式的哈达玛代价，i从1开始，进行HDi＞βHD0判断，直到遍历完候选模式列表中的所有模式，之后，对于满足该哈达玛判断式，取最小的i，则第i个模式和i之后的模式都不参与RDO计算，参数β是用于权衡算法计算复杂度和准确率，其值大于1，具体取值可通过实验得到。2）在SVAC2.0标准的应用：对于一个PU进行帧内预测模式选择，首先，将PU通过Sobel运算器，根据PBDCk的值，选择相对应的预测模式PMk或遍历所有帧内预测模式进行筛选最佳预测模式。根据SVAC2.0标准的帧内预测模式，PMk具体公式如下：PMk：PMhor={0,1,2,23,24,25,26,27,28,29,30,31}；PMvec={0,1,2,9,10,11,12,13,14,15,16,17}；PM45°={0,1,2,3,4,5,6,7,8,32,33,34,35,36}；PM135°={0,1,2,18,19,20,21,22}；其中，0~36为37种帧内预测模式编码。3）在H.266/VVC标准的应用：在H.266/VVC标准中，一个编码树单元由一个或者若干个编码单元组成，对于一个CU进行帧内预测模式选择，首先，将CU通过Sobel运算器，根据PBDCk的值进行判断，选择相对应的预测模式PMk进行RMD或遍历所有帧内预测模式进行RMD。根据H.266/VVC标准的帧内预测模式，PMk具体公式如下：PMk：PMhor={0,1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26}；PMvec={0,1,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58}；PM45°={0,1,2,3,4,5,6,7,8,9,10,59,60,61,62,63,64,65,66}；PM135°={0,1,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41}；其中，0~66为67种帧内预测模式编码。经过RMD后得到的6个哈达玛代价靠前的预测模式经过在H.265/HEVC标准应用中提及的N方法进行筛选，最后更新组成最有可能模式集进行RDO计算，得出最优帧内预测模式。其中，上文的N方法中的i∈。本申请提出一种视频编码的帧内预测模式快速选择的方法，该方法的核心思想是通过Sobel运算器判断预测块的方向，选用相对应方向的帧内预测模式进行选择最优预测模式，从而避免了遍历所有模式，降低编码复杂度，加速编码速度。具有更加准确得提取预测块的方向特征和减少视频编码性能损失的优点。本发明提供一种帧内预测模式的选择方法，所述方法包括：获取当前预测块；利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的方向复杂度；遍历k个方向的方向复杂度，确定小于所述方向复杂度阈值的方向复杂度对应的目标方向；利用所述目标方向对预设的帧内预测模式列表进行筛选，确定所述目标方向对应的候选帧内预测模式的第一列表；当不存在所述目标方向，则将所述预设的帧内预测模式列表作为所述第一列表；根据所述第一列表确定所述目标帧内预测模式。通过确定当前预测块的方向复杂度，可以利用方向复杂度以及方向复杂度阈值对帧内预测模式列表筛选，得到当前预测块的目标帧内预测模式，使得在预测块进行帧内预测模式的选择时无需遍历帧内预测模式列表中全部帧内预测模式，降低了编码复杂度，加速编码速度。请参阅图4，图4为本发明实施例中一种帧内预测模式的选择装置的结构框图，如图4所示装置包括：数据获取模块401：用于获取当前预测块；特征计算模块402：用于利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的方向复杂度；模式选择模块403：用于根据所述k个方向的方向复杂度以及预设的方向复杂度阈值对预设的帧内预测模式列表进行筛选，确定所述当前预测块的目标帧内预测模式。需要说明的是，图4所示装置中各个模块的内容与图1所示方法中各个步骤的内容相似，为避免重复此处不做赘述，具体可参阅图1所示方法中各个步骤的内容。本发明提供一种帧内预测模式的选择装置，所述装置包括：数据获取模块：用于获取当前预测块；特征计算模块：用于利用所述当前预测块以及预设的方向复杂度算法，确定所述当前预测块的k个方向的方向复杂度；模式选择模块：用于根据所述k个方向的方向复杂度以及预设的方向复杂度阈值对预设的帧内预测模式列表进行筛选，确定所述当前预测块的目标帧内预测模式。通过确定当前预测块的方向复杂度，可以利用方向复杂度以及方向复杂度阈值对帧内预测模式列表筛选，得到当前预测块的目标帧内预测模式，使得在预测块进行帧内预测模式的选择时无需遍历帧内预测模式列表中全部帧内预测模式，降低了编码复杂度。图5示出了一个实施例中计算机设备的内部结构图。该计算机设备具体可以是终端，也可以是服务器。如图5所示，该计算机设备包括通过系统总线连接的处理器、存储器和网络接口。其中，存储器包括非易失性存储介质和内存储器。该计算机设备的非易失性存储介质存储有操作系统，还可存储有计算机程序，该计算机程序被处理器执行时，可使得处理器实现上述方法。该内存储器中也可储存有计算机程序，该计算机程序被处理器执行时，可使得处理器执行上述方法。本领域技术人员可以理解，图5中示出的结构，仅仅是与本申请方案相关的部分结构的框图，并不构成对本申请方案所应用于其上的计算机设备的限定，具体的计算机设备可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。在一个实施例中，提出了一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，所述计算机程序被所述处理器执行时，使得所述处理器执行如图1或图2所示步骤。在一个实施例中，提出了一种计算机可读存储介质，存储有计算机程序，所述计算机程序被处理器执行时，使得所述处理器执行如图1或图2所示步骤。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的程序可存储于一非易失性计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、存储、数据库或其它介质的任何引用，均可包括非易失性和/或易失性存储器。非易失性存储器可包括只读存储器、可编程ROM、电可编程ROM、电可擦除可编程ROM或闪存。易失性存储器可包括随机存取存储器或者外部高速缓冲存储器。作为说明而非局限，RAM以多种形式可得，诸如静态RAM、动态RAM、同步DRAM、双数据率SDRAM、增强型SDRAM、同步链路 DRAM、存储器总线直接RAM、直接存储器总线动态RAM、以及存储器总线动态RAM等。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对本申请专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请专利的保护范围应以所附权利要求为准。
