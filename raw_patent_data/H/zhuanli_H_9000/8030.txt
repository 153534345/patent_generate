标题title
设备协议子系统异常自动纠错方法和电子设备
摘要abst
本申请实施例公开了一种设备协议子系统异常自动纠错方法和电子设备，涉及电子设备技术领域，包括：周期性地监测电子设备的通信协议子系统的网络状态，如果检测到第一通信协议子系统的网络状态异常，在确定电子设备处于无业务状态时，执行纠错操作。其中，纠错操作包括通信协议子系统复位、重启飞行模式、整机重启中至少一种纠错行为，通信协议子系统包括Wi‑Fi协议子系统、蓝牙协议子系统、NFC协议子系统、蜂窝Modem协议子系统中至少一种。本方法中，在确定通信协议子系统网络状态异常且处于无业务状态的情况下，进行自动纠错操作，在保证电子设备的各个通信协议子系统网络状态正常的同时，降低用户对通信协议子系统失效的感知程度。
权利要求书clms
1.一种设备协议子系统异常自动纠错方法，其特征在于，包括：周期性地监测电子设备的通信协议子系统的网络状态；所述通信协议子系统包括Wi-Fi协议子系统、蓝牙协议子系统、NFC协议子系统、蜂窝Modem协议子系统中至少一种；如果检测到第一通信协议子系统的网络状态异常，在确定所述电子设备处于无业务状态时，执行纠错操作；所述纠错操作包括通信协议子系统复位、重启飞行模式、整机重启中至少一种纠错行为。2.根据权利要求1所述的方法，其特征在于，所述周期性地监测电子设备的通信协议子系统的网络状态，包括：周期性地向所述通信协议子系统发送第一网络查询请求；若在预设时长内接收到所述通信协议子系统返回的请求响应，确定所述通信协议子系统的网络状态正常；若在所述预设时长内未接收到所述通信协议子系统返回的请求响应，确定所述通信协议子系统的网络状态异常。3.根据权利要求1所述的方法，其特征在于，所述周期性地监测所述电子设备中的通信协议子系统的网络状态，包括：通过所述通信协议子系统周期性地向其他网络设备发送第二网络查询请求；若接收到所述其他网络设备返回的请求响应，确定所述通信协议子系统的网络状态正常；若未接收到所述其他网络设备返回的请求响应，确定所述通信协议子系统的网络状态异常。4.根据权利要求1-3中任一项所述的方法，其特征在于，所述纠错行为包括一级纠错行为、二级纠错行为和三级纠错行为；所述执行纠错操作，包括：执行所述一级纠错行为；在第一预设时间段后，若确定所述第一通信协议子系统的网络状态异常，执行所述二级纠错行为；在第二预设时间段后，若确定所述第一通信协议子系统的网络状态异常，执行所述三级纠错行为；在第三预设时间段后，若确定所述第一通信协议子系统的网络状态异常，输出提示信息；所述提示信息用于提醒用户所述电子设备所处的当前环境网络质量差；其中，所述一级纠错行为为通信协议子系统复位；所述二级纠错行为为重启飞行模式；所述三级纠错行为为整机重启。5.根据权利要求1-3中任一项所述的方法，其特征在于，所述无业务状态包括以下至少一种情况：所述电子设备处于灭屏状态；所述电子设备处于无通信协议业务运行的状态；所述通信协议包括Wi-Fi协议、蓝牙协议、NFC协议、蜂窝Modem协议中至少一种；所述通信协议子系统处于休眠状态。6.根据权利要求1所述的方法，其特征在于，所述周期性地监测所述电子设备中的通信协议子系统的网络状态，还包括：在预设的纠错时间段内，监测所述通信协议子系统的网络状态。7.根据权利要求1-3中任一项所述的方法，其特征在于，在所述周期性地监测所述电子设备中的通信协议子系统的网络状态之前，所述方法还包括：确定执行纠错操作的次数小于预设次数阈值。8.根据权利要求1-3中任一项所述的方法，其特征在于，在所述周期性地监测所述电子设备中的通信协议子系统的网络状态之前，所述方法还包括：确定所述电子设备开启了纠错操作功能。9.根据权利要求1-3中任一项所述的方法，其特征在于，所述方法还包括：生成所述纠错操作的纠错记录信息，并将所述纠错记录信息上传至服务器；所述纠错记录信息用于记录所述纠错操作过程中执行步骤的结果。10.一种电子设备，其特征在于，所述电子设备包括存储器和一个或多个处理器；所述存储器与所述处理器耦合；所述存储器中存储有计算机程序代码，所述计算机程序代码包括计算机指令，当所述计算机指令被所述处理器执行时，使得所述电子设备执行如权利要求1-9中任一项所述的方法。11.一种计算机可读存储介质，其特征在于，包括计算机指令，当所述计算机指令在电子设备上运行时，使得所述电子设备执行如权利要求1-9中任一项所述的方法。
说明书desc
技术领域本申请涉及电子设备技术领域，尤其涉及一种设备协议子系统异常自动纠错方法和电子设备。背景技术电子设备可通过部署的协议子系统实现基于不同类型协议的长距离或短距离的通信。比如，电子设备通过无线保真协议子系统实现基于Wi-Fi网络的通信；通过蜂窝Modem协议子系统实现基于蜂窝网络的通信；通过蓝牙协议子系统实现基于蓝牙网络的通信；通过近场通信协议子系统实现基于NFC技术的通信等。在一些场景下，电子设备会产生由于部署的软件存在漏洞、寄存器状态异常、协议子系统时序异常等导致的协议子系统完全失效的问题。协议子系统失效使得电子设备出现无法实现协议子系统对应的功能的现象，造成用户体验差。发明内容本申请实施例提供一种设备协议子系统异常自动纠错方法和电子设备，可以对电子设备的协议子系统的网络状态进行监听，在确定存在协议子系统失效的情况下，进行多级纠错，从而恢复协议子系统的功能，在保证终端的各个协议子系统恢复正常工作的同时，降低用户对协议子系统失效的感知程度，达到“于无声处”恢复协议子系统功能，并提升用户体验的效果。为达到上述目的，本申请的实施例采用如下技术方案。第一方面，提供了一种设备协议子系统异常自动纠错方法，该方法包括：周期性地监测电子设备的通信协议子系统的网络状态，如果检测到第一通信协议子系统的网络状态异常，在确定电子设备处于无业务状态时，执行纠错操作；纠错操作包括通信协议子系统复位、重启飞行模式、整机重启中至少一种纠错行为。其中，通信协议子系统包括Wi-Fi协议子系统、蓝牙协议子系统、NFC协议子系统、蜂窝Modem协议子系统中至少一种。在一些实施例中，电子设备处于无业务状态包括电子设备处于灭屏状态、电子设备处于无通信协议业务运行的状态、通信协议子系统处于休眠状态中的至少一种情况。其中，通信协议包括Wi-Fi协议、蓝牙协议、NFC协议、蜂窝Modem协议中至少一种。本申请中，在监测到通信协议子系统的网络状态异常的情况下，确定电子设备当前处于无业务状态时，对电子设备进行纠错操作。由于电子设备当前处于无业务状态，在用户感知程度较弱或不感知的情况下，实现了对电子设备的多级纠错来恢复网络状态异常的通信协议子系统的功能的效果，且在保证电子设备的各个通信协议子系统恢复正常工作的同时，降低用户对通信协议子系统失效的感知程度，达到“于无声处”恢复通信协议子系统功能，并提升用户体验的效果。结合第一方面，在一种可能的设计方式中，周期性地监测电子设备的通信协议子系统的网络状态，包括：周期性地向通信协议子系统发送第一网络查询请求；若在预设时长内接收到通信协议子系统返回的请求响应，确定通信协议子系统的网络状态正常；若在预设时长内未接收到通信协议子系统返回的请求响应，确定通信协议子系统的网络状态异常。通信协议子系统在网络异常时不会响应第一网络查询请求，也即，不会返回请求响应。基于这种原理，周期性地向通信协议子系统发送第一网络查询请求可以快速地确定通信协议子系统的网络状态。这里，通信协议子系统存在网络异常也可以理解为通信协议子系统功能失效，无法为电子设备提供相应通信协议的业务。结合第一方面，在一种可能的设计方式中，周期性地监测电子设备中的通信协议子系统的网络状态，包括：通过通信协议子系统周期性地向其他网络设备发送第二网络查询请求；若接收到其他网络设备返回的请求响应，确定通信协议子系统的网络状态正常；若未接收到其他网络设备返回的请求响应，确定通信协议子系统的网络状态异常。通信协议子系统在网络异常时无法与其他网络设备产生通信连接，基于这种原理，周期性地向其他网络设备发送第二网络查询请求，可以快速地确定当前电子设备中的通信协议子系统的网络状态。结合第一方面，在一种可能的设计方式中，纠错行为包括一级纠错行为、二级纠错行为和三级纠错行为；执行纠错操作包括：执行一级纠错行为；在第一预设时间段后，若确定第一通信协议子系统的网络状态异常，执行二级纠错行为；在第二预设时间段后，若确定第一通信协议子系统的网络状态异常，执行三级纠错行为；在第三预设时间段后，若确定第一通信协议子系统的网络状态异常，输出提示信息；提示信息用于提醒用户电子设备所处的当前环境网络质量差；其中，一级纠错行为为通信协议子系统复位；二级纠错行为为重启飞行模式；三级纠错行为为整机重启。本申请中，根据纠错行为执行纠错操作，纠错行为具有对于用户的不同程度的感知度，按照一定的顺序执行纠错操作，可以在尽量保持用户感知程度低的情况下对电子设备进行纠错操作，优化用户的使用体验；且，自动多级纠错可以尽可能保证电子设备中通信协议子系统的网络状态可以及时有效地恢复正常。结合第一方面，在一种可能的设计方式中，周期性地监测电子设备中的通信协议子系统的网络状态，还包括：在预设的纠错时间段内，监测通信协议子系统的网络状态。本申请中，在预设的纠错时间段内执行设备协议子系统异常自动纠错方法，预设的纠错时间段可以为用户使用电子设备频率低的时间段，在预设的纠错时间段内，用户对于设备协议子系统异常自动纠错方法的感知程度较低，可以达到“于无声处”恢复通信协议子系统功能，并提升用户体验的效果。结合第一方面，在一种可能的设计方式中，在周期性地监测电子设备中的通信协议子系统的网络状态之前，该方法还包括：确定执行纠错操作的次数小于预设次数阈值。本申请中，在每个纠错周期设定了纠错次数，在当前纠错周期执行纠错操作的次数小于预设次数阈值的情况下，执行设备协议子系统异常自动纠错方法。一方面可以降低电子设备执行设备协议子系统异常自动纠错方法的能耗和计算资源。另一方面，在预设次数阈值内，可以保证通过对电子设备执行纠错操作，以恢复通信协议子系统功能的目的。结合第一方面，在一种可能的设计方式中，在周期性地监测电子设备中的通信协议子系统的网络状态之前，该方法还包括：确定电子设备开启了纠错操作功能。本申请中，若电子设备没有开启纠错操作功能，则不执行设备协议子系统异常自动纠错方法，一定程度上保证了电子设备的信息安全。在电子设备开启纠错操作功能的情况下，执行设备协议子系统异常自动纠错方法，可以有效地解决通信协议子系统失效的问题。结合第一方面，在一种可能的设计方式中，该方法还包括：生成纠错操作的纠错记录信息，并将纠错记录信息上传至服务器；纠错记录信息用于记录纠错操作过程中执行步骤的结果。本申请中，将生成纠错操作的纠错记录信息并上报至云端服务器，由于纠错记录信息中记录了电子设备纠错操作的过程数据，可为后续对电子设备的纠错操作进行分析提供数据支撑。第二方面，提供了一种电子设备，该电子设备包括存储器和一个或多个处理器；所述存储器与所述处理器耦合；所述存储器中存储有计算机程序代码，所述计算机程序代码包括计算机指令，当所述计算机指令被所述处理器执行时，使得所述电子设备执行如上述第一方面中任一项所述的方法。第三方面，提供了一种计算机可读存储介质，该计算机可读存储介质中存储有指令，当其在电子设备上运行时，使得电子设备可以执行上述第一方面中任一项所述的方法。第四方面，提供了一种包含指令的计算机程序产品，当其在电子设备上运行时，使得电子设备可以执行上述第一方面中任一项所述的方法。第五方面，本申请实施例提供了一种芯片，芯片包括处理器，处理器用于调用存储器中的计算机程序，以执行如第一方面的方法。可以理解地，上述提供的第二方面所述的电子设备，第三方面所述的计算机可读存储介质，第四方面所述的计算机程序产品，第五方面所述的芯片所能达到的有益效果，可参考第一方面及其任一种可能的设计方式中的有益效果，此处不再赘述。附图说明图1为本申请实施例提供的一种电子设备的硬件结构示意图；图2为本申请实施例提供的一种电子设备的软件结构示意图；图3为本申请实施例提供的一种设备协议子系统异常自动纠错方法的流程图；图4为本申请实施例提供的一种设备协议子系统异常自动纠错方法中纠错操作的流程图；图5为本申请实施例提供的一种蜂窝Modem协议子系统失效场景下设备协议子系统异常自动纠错方法的流程图；图6为本申请实施例提供的一种Wi-Fi协议子系统失效场景下设备协议子系统异常自动纠错方法的流程图；图7为本申请实施例提供的一种芯片系统的结构示意图。具体实施方式在本申请实施例的描述中，以下实施例中所使用的术语只是为了描述特定实施例的目的，而并非旨在作为对本申请的限制。如在本申请的说明书和所附权利要求书中所使用的那样，单数表达形式“一种”、“所述”、“上述”、“该”和“这一”旨在也包括例如“一个或多个”这种表达形式，除非其上下文中明确地有相反指示。还应当理解，在本申请以下各实施例中，“至少一个”、“一个或多个”是指一个或两个以上。术语“和/或”，用于描述关联对象的关联关系，表示可以存在三种关系；例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B的情况，其中A、B可以是单数或者复数。字符“/”一般表示前后关联对象是一种“或”的关系。在本说明书中描述的参考“一个实施例”或“一些实施例”等意味着在本申请的一个或多个实施例中包括结合该实施例描述的特定特征、结构或特点。由此，在本说明书中的不同之处出现的语句“在一个实施例中”、“在一些实施例中”、“在其他一些实施例中”、“在另外一些实施例中”等不是必然都参考相同的实施例，而是意味着“一个或多个但不是所有的实施例”，除非是以其他方式另外特别强调。术语“包括”、“包含”、“具有”及它们的变形都意味着“包括但不限于”，除非是以其他方式另外特别强调。术语“连接”包括直接连接和间接连接，除非另外说明。“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。在本申请实施例中，“示例性的”或者“例如”等词用于表示作例子、例证或说明。本申请实施例中被描述为“示例性的”或者“例如”的任何实施例或设计方案不应被解释为比其它实施例或设计方案更优选或更具优势。确切而言，使用“示例性的”或者“例如”等词旨在以具体方式呈现相关概念。电子设备可通过部署的通信协议子系统实现基于不同类型的通信协议的长距离或短距离的通信。比如，电子设备可通过Wi-Fi协议子系统实现终端基于Wi-Fi网络与其他设备的通信。比如，电子设备可通过蜂窝Modem协议子系统实现基于蜂窝网络与其他设备的通信。比如，电子设备可通过蓝牙协议子系统实现基于蓝牙网络与其他设备的通信。比如，电子设备可通过近场通信协议子系统实现基于NFC技术与其他设备的通信等。在一些场景下，电子设备会产生由于部署的软件存在漏洞，或者电子设备的一个或多个寄存器状态异常，或者电子设备的通信协议子系统时序异常等，而导致的电子设备的一个或多个通信协议子系统完全失效。比如，软件存在漏洞可以为程序代码逻辑出现问题或程序代码中参数有误等。寄存器状态异常可以为寄存器空间溢出导致的异常等。通信协议子系统时序异常可能为不同通信协议子系统产生时序冲突而导致的某一个或多个通信协议子系统异常。这些问题导致的通信协议子系统失效，会使得电子设备出现无法实现通信协议子系统对应的功能的现象。其中，Wi-Fi协议子系统失效会导致电子设备无法连接路由设备等；蜂窝Modem协议子系统失效会导致电子设备无法在蜂窝网络驻网、无法通话、无法收发短彩信等；蓝牙协议子系统失效会导致电子设备无法连接其他蓝牙设备等；NFC协议子系统失效会导致电子设备无法打开NFC门禁等。示例性地，Wi-Fi协议子系统失效问题包括，出现在电子设备系统的开发前期阶段的Wi-Fi开关类设计存在漏洞的问题，使得电子设备的Wi-Fi开关打不开，Wi-Fi协议子系统失效。或者，软件系统的应用无反应问题导致Wi-Fi开关打不开，Wi-Fi协议子系统失效。或者，更新空口版本后Wi-Fi开关打不开，导致Wi-Fi协议子系统失效。比如，无线接入点实时调度问题导致Wi-Fi开关打不开，Wi-Fi协议子系统失效等。示例性地，蜂窝Modem协议子系统失效问题包括，在发生蜂窝Modem异常后，蜂窝Modem协议子系统的维测模块未及时对Modem进行重启恢复处理，也即，蜂窝Modem无法及时自我复位导致的蜂窝Modem协议子系统失效。或者，蜂窝Modem协议子系统升级版本，出现大面积蜂窝Modem启动失败等问题，导致蜂窝Modem协议子系统完全失效。或者，固件引入的问题导致蜂窝Modem协议子系统失效，等等。电子设备出现通信协议子系统失效而产生无法提供相关功能的问题，可以通过强制整机重启或送机维修等恢复通信协议子系统功能。这些情况均会导致用户的使用体验差、系统门店维修工单多等问题。严重的情况下，还会引起严重的舆情、产生退机现象等。针对上述现有技术存在的问题，本申请提供一种设备协议子系统异常自动纠错方法，可以在电子设备的通信协议子系统失效的情况下，对电子设备进行自动多级纠错，以使通信协议子系统恢复，以为终端提供正常的相应地功能服务。其中，可根据电子设备的使用情况，配置纠错操作的纠错条件和纠错策略。示例性地，纠错条件可以包括预设纠错时间段、预设纠错周期以及周期内的预设纠错次数，例如，预设纠错时间段为夜间2:00-5:00；预设纠错周期为一星期；预设纠错次数为2次。若当前终端的系统时间处于纠错时间段，且，当前纠错周期内的实际纠错次数未达到预设纠错次数。在这种情况下，监听各个通信协议子系统的网络状态，如果通信协议子系统的网络状态为异常，则根据纠错策略对电子设备进行多级自动纠错。其中，纠错策略包括纠错行为的执行顺序组合。比如，纠错行为包括一级纠错行为、二级纠错行为、三级纠错行为。其中，一级纠错行为可以为控制通信协议子系统复位一次；二级纠错行为可以为控制电子设备开启并关闭飞行模式一次；三级纠错行为可以为控制电子设备整机重启一次。本申请提供的设备协议子系统异常自动纠错方法，其中纠错操作的预设纠错时间段可以根据电子设备的实际使用习惯进行个性化配置，在用户感知程度低的时间段进行电子设备通信协议子系统的监听，在确定存在通信协议子系统失效的情况下，进行自动多级纠错，从而恢复通信协议子系统的功能。在保证电子设备的各个通信协议子系统恢复正常工作的同时，降低用户对通信协议子系统失效的感知程度，达到“于无声处”恢复通信协议子系统功能，并提升用户体验的效果。本申请实施例中的电子设备100为具有通信功能的设备，其中通信功能可以包括短距离通信和长距离通信。不同的通信方式基于不同的通信协议子系统实现其对应的通信功能。示例性地，电子设备100可以为便携式计算机、平板电脑、笔记本电脑、个人计算机、可穿戴电子设备、增强现实虚拟现实设备、蓝牙设备、NFC设备等，以下实施例对该电子设备的具体形式不做特殊限制。请参考图1，其示出本申请实施例提供一种电子设备的结构框图。其中，电子设备100可以包括处理器310，外部存储器接口320，内部存储器321，通用串行总线接口330，充电管理模块340，电源管理模块341，电池342，天线1，天线2，射频模块350，通信模块360，音频模块370，扬声器370A，受话器370B，麦克风370C，耳机接口370D，传感器模块380，按键390，马达391，指示器392，摄像头393，显示屏394，以及用户标识模块卡接口395等。本发明实施例示意的结构并不构成对电子设备100的限定。可以包括比图示更多或更少的部件，或者组合某些部件，或者拆分某些部件，或者不同的部件布置。图示的部件可以以硬件，软件或软件和硬件的组合实现。处理器310可以包括一个或多个处理单元。例如，处理器310可以包括应用处理器，图像信号处理器，基带处理器，和/或神经网络处理器等。其中，不同的处理单元可以是独立的器件，也可以集成在一个或多个处理器中。上述控制器可以是指挥电子设备100的各个部件按照指令协调工作的决策者。是电子设备100的神经中枢和指挥中心。控制器根据指令操作码和时序信号，产生操作控制信号，完成取指令和执行指令的控制。处理器310中还可以设置存储器，用于存储指令和数据。在一些实施例中，处理器310中的存储器为高速缓冲存储器，可以保存处理器310刚用过或循环使用的指令或数据。如果处理器310需要再次使用该指令或数据，可从所述存储器中直接调用。避免了重复存取，减少了处理器310的等待时间，因而提高了系统的效率。在一些实施例中，处理器310可以包括接口。接口可以包括集成电路接口，集成电路内置音频接口，脉冲编码调制接口，通用异步收发传输器接口，移动产业处理器接口，通用输入输出接口，SIM接口，和/或USB接口等。本发明实施例示意的各模块间的接口连接关系，只是示意性说明，并不构成对电子设备100的结构限定。电子设备100可以采用本发明实施例中不同的接口连接方式，或多种接口连接方式的组合。充电管理模块340用于从充电器接收充电输入。其中，充电器可以是无线充电器，也可以是有线充电器。在一些有线充电的实施例中，充电管理模块340可以通过USB接口330接收有线充电器的充电输入。在一些无线充电的实施例中，充电管理模块340可以通过电子设备100的无线充电线圈接收无线充电输入。充电管理模块340为电池342充电的同时，还可以通过电源管理模块341为电子设备100供电。电源管理模块341用于连接电池342，充电管理模块340与处理器310。电源管理模块341接收所述电池342和/或充电管理模块340的输入，为处理器310，内部存储器321，外部存储器接口320，显示屏394，摄像头393，和通信模块360等供电。电源管理模块341还可以用于监测电池容量，电池循环次数，电池健康状态等参数。在一些实施例中，电源管理模块341也可以设置于处理器310中。在一些实施例中，电源管理模块341和充电管理模块340也可以设置于同一个器件中。电子设备100的无线通信功能可以通过天线1，天线2，射频模块350，通信模块360，调制解调器以及基带处理器等实现。天线1和天线2用于发射和接收电磁波信号。电子设备100中的每个天线可用于覆盖单个或多个通信频带。不同的天线还可以复用，以提高天线的利用率。例如：可以将蜂窝网天线复用为无线局域网分集天线。在一些实施例中，天线可以和调谐开关结合使用。射频模块350可以提供应用在电子设备100上的包括2G/3G/4G/5G等无线通信的解决方案的通信处理模块。射频模块350可以包括至少一个滤波器，开关，功率放大器，低噪声放大器等。射频模块350由天线1接收电磁波，并对接收的电磁波进行滤波，放大等处理，传送至调制解调器进行解调。射频模块350还可以对经调制解调器调制后的信号放大，经天线1转为电磁波辐射出去。在一些实施例中，射频模块350的至少部分功能模块可以被设置于处理器310中。在一些实施例中，射频模块350的至少部分功能模块可以与处理器310的至少部分模块被设置在同一个器件中。调制解调器可以包括调制器和解调器。调制器用于将待发送的低频基带信号调制成中高频信号。解调器用于将接收的电磁波信号解调为低频基带信号。随后解调器将解调得到的低频基带信号传送至基带处理器处理。低频基带信号经基带处理器处理后，被传递给应用处理器。应用处理器通过音频设备输出声音信号，或通过显示屏394显示图像或视频。在一些实施例中，调制解调器可以是独立的器件。在一些实施例中，调制解调器可以独立于处理器310，与射频模块350或其他功能模块设置在同一个器件中。通信模块360可以提供应用在电子设备100上的包括无线局域网网络），蓝牙，全球导航卫星系统，调频等无线通信的解决方案的通信处理模块。通信模块360可以是集成至少一个通信处理模块的一个或多个器件。通信模块360经由天线2接收电磁波，将电磁波信号调频以及滤波处理，将处理后的信号发送到处理器310。通信模块360还可以从处理器310接收待发送的信号，对其进行调频，放大，经天线2转为电磁波辐射出去。在本实施例中，通信模块基于不同的通信协议子系统实现不同类型的通信。比如，通过Wi-Fi协议子系统为电子设备提供Wi-Fi网络通信功能；通过蓝牙协议子系统为电子设备提供蓝牙通信功能；通过NFC协议子系统为电子设备提供NFC通信功能等等。这些不同类型的通信协议子系统均可能存在由于电子设备硬件或软件的异常导致的通信协议子系统失效的问题。在一些实施例中，电子设备100的天线1和射频模块350耦合，天线2和通信模块360耦合，使得电子设备100可以通过无线通信技术与网络以及其他设备通信。所述无线通信技术可以包括全球移动通讯系统，长期演进，BT，GNSS，WLAN，NFC，FM，和/或IR技术等。所述GNSS可以包括全球卫星定位系统，全球导航卫星系统和/或星基增强系统。电子设备100通过GPU，显示屏394，以及应用处理器等实现显示功能。GPU为图像处理的微处理器，连接显示屏394和应用处理器。GPU用于执行数学和几何计算，用于图形渲染。处理器310可包括一个或多个GPU，其执行程序指令以生成或改变显示信息。显示屏394用于显示图像，视频等。例如，显示屏394可以显示来电提醒界面和语音通话界面。本申请实施例中，如果电子设备100接收到对端在第一应用中发起的应用内呼叫请求，电子设备100的显示屏394可以显示包括第一应用的业务信息的语音通话界面。显示屏394包括显示面板。显示面板可以采用液晶显示屏，有机发光二极管，有源矩阵有机发光二极体或主动矩阵有机发光二极体，柔性发光二极管等。存储数据区可存储电子设备100使用过程中所创建的数据等。此外，存储器121可以包括高速随机存取存储器，还可以包括非易失性存储器，例如至少一个磁盘存储器件，闪存器件，其他易失性固态存储器件，通用闪存存储器等。电子设备100可以通过音频模块370，扬声器370A，受话器370B，麦克风370C，耳机接口370D，以及应用处理器等实现音频功能。例如音乐播放，录音等。电子设备100的软件系统可以采用分层架构，事件驱动架构，微核架构，微服务架构，或云架构。本发明实施例以分层架构的Android系统为例，示例性说明电子设备100的软件结构。图2是本发明实施例的电子设备100的软件结构框图。分层架构将软件分成若干个层，每一层都有清晰的角色和分工。层与层之间通过软件接口通信。在一些实施例中，将Android系统分为四层，从上至下分别为应用程序层，应用程序框架层，安卓运行时和系统库，以及内核层。应用程序层可以包括一系列应用程序包。如图2所示，应用程序包可以包括相机，图库，日历，电话，地图，导航，WLAN，蓝牙，音乐，视频，短信息等应用程序。框架层为应用程序层的应用程序提供应用编程接口和编程框架。框架层包括一些预先定义的函数。如图2所示，框架层可以包括窗口管理器，内容提供器，视图系统，电话管理器，资源管理器、通知管理器和纠错模块。其中，纠错模块用于执行本申请提供的设备协议子系统异常自动纠错方法。窗口管理器用于管理窗口程序。窗口管理器可以获取显示屏大小，判断是否有状态栏，锁定屏幕，截取屏幕等。内容提供器用来存放和获取数据，并使这些数据可以被应用程序访问。所述数据可以包括视频，图像，音频，拨打和接听的电话，浏览历史和书签，电话簿等。视图系统包括可视控件，例如显示文字的控件，显示图片的控件等。视图系统可用于构建应用程序。显示界面可以由一个或多个视图组成的。电话管理器用于提供电子设备100的通信功能。例如，通话状态的管理。资源管理器为应用程序提供各种资源，比如本地化字符串，图标，图片，布局文件，视频文件等等。通知管理器使应用程序可以在状态栏中显示通知信息，可以用于传达告知类型的消息，可以短暂停留后自动消失，无需用户交互。比如通知管理器被用于告知下载完成，消息提醒等。通知管理器还可以是以图表或者滚动条文本形式出现在系统顶部状态栏的通知，例如后台运行的应用程序的通知，还可以是以对话窗口形式出现在屏幕上的通知。例如在状态栏提示文本信息，发出提示音，电子设备振动，指示灯闪烁等。Android runtime包括核心库和虚拟机。Android runtime负责安卓系统的调度和管理。核心库包含两部分：一部分是java语言需要调用的功能函数，另一部分是安卓的核心库。应用程序层和应用程序框架层运行在虚拟机中。虚拟机将应用程序层和应用程序框架层的java文件执行为二进制文件。虚拟机用于执行对象生命周期的管理，堆栈管理，线程管理，安全和异常的管理，以及垃圾回收等功能。系统库可以包括多个功能模块。例如：表面管理器，媒体库，三维图形处理库，二维图形引擎等。表面管理器用于对显示子系统进行管理，并且为多个应用程序提供了二维和三维图层的融合。媒体库支持多种常用的音频，视频格式回放和录制，以及静态图像文件等。媒体库可以支持多种音视频编码格式，例如: MPEG4，H.264，MP3，AAC，AMR，JPG，PNG等。三维图形处理库用于实现三维图形绘图，图像渲染，合成，和图层处理等。二维图形引擎是二维绘图的绘图引擎。内核层是硬件和软件之间的层。内核层包括驱动，其中，驱动可以包含显示驱动，摄像头驱动，音频驱动，传感器驱动。内核层还包括通信协议子系统，比如，Wi-Fi协议子系统、蜂窝Modem协议子系统、蓝牙协议子系统等等。在一些实施例中，示例性地，纠错模块可以在确定电子设备满足纠错条件的情况下，监听电子设备的各个通信协议子系统的网络状态。如果通信协议子系统的网络状态异常，纠错模块按照纠错策略执行纠错操作。其中，纠错条件和纠错策略可以为预先配置好的存储至纠错模块中的信息。在纠错模块监听通信协议子系统的网络状态的过程中，纠错模块可以通过与通信协议子系统交互，来获取相关的通信信息。例如，纠错模块向Wi-Fi协议子系统发送网络查询请求，并接收Wi-Fi协议子系统返回的请求响应，根据是否接收到请求响应来确定Wi-Fi协议子系统的网络状态。在未接收到请求响应时，确定Wi-Fi协议子系统的网络状态异常。纠错模块按照纠错策略中纠错行为执行相应的操作。比如，纠错策略包括一级纠错行为和二级纠错行为，其中，一级纠错行为为Wi-Fi协议子系统复位一次，二级纠错行为为开启并关闭飞行模式一次。纠错模块在执行一级纠错行为时可通过向Wi-Fi协议子系统发送复位指令，以使Wi-Fi协议子系统执行复位操作；纠错模块在执行二级纠错行为时可通过向电子设备的系统级芯片发送控制指令，以使系统级芯片在接收到该控制指令之后，执行飞行模式的开启与关闭操作。基于图1所示的电子设备的硬件结构与图2所示的电子设备的软件架构，以电子设备100执行本公开实施例为例，本公开实施例提供了一种设备异常纠错方法，参见图3，本公开实施例提供的方法流程包括：S101、获取纠错配置信息。其中，纠错配置信息包括纠错条件和纠错策略。纠错条件包括预设纠错时间段、预设纠错周期、预设纠错次数。示例性地，预设纠错时间段为夜间2点至5点；预设纠错周期为两周；预设纠错次数为1次的情况下，电子设备执行纠错操作的时间段为夜间2点至5点，执行频率为两周一次。可选地，纠错条件可以为预先配置的，也可以为基于电子设备的使用习惯动态调整的。比如，根据电子设备的使用习惯，确定电子设备使用频率低的时间段，以该时间段作为预设纠错时间段。示例性地，电子设备根据安装应用的使用时长和使用时间段、系统的使用时长和使用时间段，确定当前用户在上午9点至12点使用电子设备的使用频率较低，那么可以将上午9点至12点确定为预设纠错时间段。将预设纠错时间段设置在用户使用电子设备的频率低的期间，可以降低用户对电子设备进行纠错操作的感知。纠错策略指的是一个纠错行为或多个纠错行为的执行方式。其中，纠错行为可以包括不同等级的纠错行为，比如，一级纠错行为、二级纠错行为、三级纠错行为，等级越高的纠错行为，其纠错能力越大，纠错的能力越大，电子设备纠错操作对于用户的感知程度越大。示例性地，一级纠错行为可以为针对协议子系统的纠错行为，比如，协议子系统复位一次。二级纠错行为可以为针对电子设备一直处于在电状态下的纠错行为，比如，电子设备开关飞行模式一次。三级纠错行为可以为针对电子设备的纠错行为，比如，电子设备整机重启一次。纠错策略中可以包括一种纠错行为，或者，还可以包括多种纠错行为的组合。在纠错策略包括多种纠错行为的组合的情况下，纠错策略中同时也限定了多种纠错行为的执行顺序。可选地，多种纠错行为的执行顺序可以根据纠错行为的等级确定，比如，多种纠错行为的执行顺序为纠错行为的等级从低到高的顺序。在本实施例中，纠错配置信息可以为默认设置好的，还可以为电子设备从云端服务器获取到的。比如，在电子设备监听到产生协议子系统失效的情况下，向云端服务器获取默认纠错配置信息。电子设备根据其实际使用习惯，调整默认纠错配置信息，得到纠错配置信息。可选地，电子设备还可以确定是否开启执行纠错操作的功能。示例性地，电子设备可以基于预设的纠错操作的开关参数来确定。比如，开关参数为“OPEN”的状态下，确定电子设备已开启执行纠错操作的功能；开关参数为“CLOSE”的状态下，确定电子设备未开启执行纠错操作的功能。在电子设备确定未开启执行纠错操作的功能的情况下，可以通过重置开关参数来开启执行纠错操作的功能。或者，电子设备可以接收云端服务器发送的控制指令，响应于该控制指令，重置开关参数来开启执行纠错操作的功能。在确定电子设备已开启执行纠错操作的功能的情况下，电子设备可以获取纠错配置信息，并基于纠错配置信息执行下述纠错操作的步骤。S102、周期性地监测电子设备的通信协议子系统的网络状态。可选地，在周期性地监测电子设备的通信协议子系统的网络状态之前，在一些实施例中，还可以确定电子设备是否满足纠错条件。比如，电子设备当前系统时间处于纠错条件的预设纠错时间段内。比如，执行纠错操作的次数小于纠错条件中的预设纠错次数，这里预设纠错次数也可以预设次数阈值。可选地，电子设备若不满足纠错条件，则不执行确定通信协议子系统的网络状态以及后续的纠错操作，直到电子设备满足纠错条件时，执行确定通信协议子系统的网络状态以及后续的纠错操作。比如，电子设备可以等待进入下一纠错周期，执行新一轮的纠错操作。电子设备的通信协议子系统包括Wi-Fi协议子系统、蓝牙协议子系统、NFC协议子系统、蜂窝Modem协议子系统等中的一个或多个。不同的电子设备其包含的通信协议子系统不同。比如，电子设备为蓝牙耳机，其包含的通信协议子系统包括蓝牙协议子系统。比如，电子设备为手机，其包含的通信协议子系统包括Wi-Fi协议子系统、蓝牙协议子系统、NFC协议子系统、蜂窝Modem协议子系统等。电子设备确定通信协议子系统的网络状态可以通过向通信协议子系统发送网络查询请求，该网络查询请求用于指示通信协议子系统向电子设备返回请求响应。若电子设备接收到通信协议子系统返回的请求响应，意味着通信协议子系统可正常通信，其网络状态正常。若电子设备未接收到通信协议子系统返回的请求响应，意味着通信协议子系统无法正常通信，其网络状态异常。可选地，电子设备可以在预设时间段内来等待接收通信协议子系统返回的请求响应。比如，预设时间段可以为100毫秒。根据不同的通信协议子系统，电子设备还可以通过与其他网络设备进行通信来确定通信协议子系统的网络状态。比如，电子设备还可以基于通信协议子系统向其他网络设备发送网络查询请求，根据其他网络设备返回的请求响应，确定通信协议子系统的网络状态。比如，电子设备可以通过获取周围环境的无线热点设备所发送的Beacon帧，来确定Wi-Fi协议子系统的网络状态。其中，Beacon帧是基于802.11协议的无线热点用来建立连接，宣告自己存在的管理帧。若Wi-Fi协议子系统的网络状态正常，则电子设备可以扫描到Beacon帧；若Wi-Fi协议子系统的网络状态异常，则电子设备无法扫描到Beacon帧。也即，在电子设备没有扫描到Beacon帧的情况下，确定Wi-Fi协议子系统的网络状态异常。可选地，电子设备还可以通过因特网包探索器确定Wi-Fi协议子系统的网络状态。电子设备通过向周围环境的无线热点设备发送ping数据包，如果电子设备接收到的ping数据包中的TCP/IP参数异常，则确定Wi-Fi协议子系统的网络状态异常等等。又如，电子设备可以通过获取蜂窝Modem协议子系统的状态参数，来确定蜂窝Modem协议子系统的网络状态。示例性地，电子设备可以通过查询modem state参数，来确定蜂窝Modem协议子系统的网络状态。若modem state参数表示异常，则确定蜂窝Modem协议子系统的网络状态异常。可选地，电子设备还可以通过向基于蜂窝网络通信的其他应用服务器发送ping数据包，根据接收到的ping数据包确定蜂窝Modem协议子系统的网络状态。如果电子设备基于接收到的ping数据包确定TCP/IP参数异常，则确定蜂窝Modem协议子系统的网络状态异常等等。在本实施例中，电子设备可以同时分别确定各个通信协议子系统的网络状态。或者，按照一定的优先级顺序确定各个通信协议子系统的网络状态。其中，通信协议子系统的优先级顺序可以预先配置，比如，优先级顺序为蜂窝Modem协议子系统、Wi-Fi协议子系统、蓝牙协议子系统、NFC协议子系统等。S103、如果存在第一通信协议子系统的网络状态异常，则确定电子设备当前是否处于无业务状态。其中，第一通信协议子系统可以为一个或多个网络状态异常的通信协议子系统。通信协议子系统的网络异常意味着通信协议子系统的功能已失效，比如，蜂窝Modem协议子系统失效，或Wi-Fi协议子系统失效，或蓝牙协议子系统失效，或NFC协议子系统失效等，在这种情况下需要对电子设备进行纠错操作，使得功能失效的通信协议子系统恢复正常。为了降低用户的感知程度，在这种情况下，电子设备还可以判断电子设备当前是否处于无业务状态。示例性地，无业务状态指的是电子设备处于灭屏状态、电子设备无白名单前台应用正在运行、电子设备的通信协议子系统处于休眠状态等至少一种状态。其中，白名单前台应用可以为预先设置的应用名单中的应用，这些应用在用户使用层面具有较高的重要性，在这些应用的运行过程中避免执行纠错操作。示例性地，这些应用可以为用户使用频率较高的应用；或者可以为具有支付功能等特殊功能的应用。通信协议子系统处于休眠状态指的是无相关协议业务正在运行。在本实施例中，电子设备可以通过屏幕状态参数确定当前是否处于灭屏状态。比如，电子设备从屏幕驱动获取当前的屏幕状态参数，若屏幕状态参数为“TRUE”，则表示屏幕处于亮屏状态，若屏幕状态参数为“FALSE”，则表示屏幕处于灭屏状态。电子设备可以从应用进程中获取当前运行的应用信息。应用信息中包括了正在运行的应用名称，电子设备可以根据应用名称和预设的白名单前台应用，来确定是否有白名单前台应用正在运行。电子设备可以获取Wi-Fi的状态信息，确定Wi-Fi是否处于休眠状态。比如，电子设备向Wi-Fi协议子系统发送状态获取请求，以获取Wi-Fi协议子系统的状态信息。Wi-Fi协议子系统若确定在一段时间内没有执行Wi-Fi业务，则确定其处于休眠状态，并向电子设备返回用于表征其处于休眠状态的状态信息。若Wi-Fi协议子系统确定正在执行Wi-Fi业务，比如，通过Wi-Fi观看视频或通过Wi-Fi下载文件，则向电子设备返回用于表征其处于工作状态的状态信息。本实施例对此不做限定。可选地，如果电子设备当前处于有业务运行的状态，比如，电子设备处于亮屏状态、或电子设备有白名单前台应用正在运行、或者电子设备的Wi-Fi为处于休眠状态等，在这种情况下，电子设备可以执行等待操作，等待电子设备处于无业务状态下，继续执行后续纠错操作。S104、在确定电子设备当前处于无业务状态的情况下，执行纠错操作。在本实施例中，电子设备在确定电子设备当前处于无业务状态的情况下，根据纠错策略执行相应地纠错操作。具体可根据电子设备个性化配置。纠错策略中限定了纠错行为的执行顺序。在电子设备每执行一次纠错行为之后，电子设备可以等待预设时间段，再次确定网络状态异常的通信协议子系统的网络状态。其中，预设时间段可以根据电子设备的实际情况和所执行的纠错行为确定。例如，执行完一级纠错行为后的等待预设时间段可以为30秒；执行完二级纠错行为后的等待预设时间段可以为1分钟；执行完三级纠错行为后的等待预设时间段可以为3分钟。在等待预设时间段后，电子设备再次检测网络状态异常的通信协议子系统的当前网络状态。如果通信协议子系统的网络状态仍然异常，则按照纠错策略中纠错行为的执行顺序，继续执行下一个顺序的纠错行为。如果通信协议子系统的网络状态恢复正常，则结束当前纠错操作，并生成当前纠错操作的纠错记录信息。可选地，在确定通信协议子系统的网络状态恢复正常之后，还可以判断当前纠错周期的实际纠错次数是否已达到预设纠错次数。如果未达到，则返回执行S103。如果达到，则结束当前纠错操作，并生成当前纠错操作的纠错记录信息。其中，纠错记录信息为电子设备执行纠错操作的过程中执行步骤所记录的打点信息。在结束一次纠错操作之后，将打点信息汇总得到纠错记录信息，在用户授权的情况下将纠错记录信息上报至云端服务器。其中，纠错记录信息包括步骤节点、意义、Demo以及说明，可参考下表。纠错记录信息可以为包括10个字段的信息。示例性地，纠错记录信息可以为，其中，1表示纠错操作的功能为开启；2表示纠错操作功能开启的生效方式为默认开启；22表示以纠错周期为双周节奏；2表示单纠错周期的纠错次数为2次，3表示纠错级别为3级；123表示纠错策略为一级纠错行为、二级纠错行为与三级纠错行为的顺序；1表示纠错操作生效；12表示生效事件为执行二级纠错形式，也即，执行一级纠错行为之后通信协议子系统未恢复正常，执行二级纠错行为之后通信协议子系统恢复正常。表1可选的，在一些实施例中，将生成纠错操作的纠错记录信息并上报至云端服务器，由于纠错记录信息中记录了电子设备纠错操作的过程数据，可为后续对电子设备的纠错操作进行分析提供数据支撑。可选地，结合上述S104实施例给出的纠错操作，以纠错策略包括一级纠错行为、二级纠错行为、三级纠错行为为例，图4给出一种纠错操作的流程图，包括：S1041、电子设备执行一级纠错行为。S1042、检测第一通信协议子系统网络状态，若网络状态正常，则执行S1408，若网络状态异常，则执行S1403。其中，在电子设备执行完一级纠错行为之后，等待预设时间段，电子设备再次检测第一通信协议子系统网络状态，其可参考上述S102实施例给出的方法。S1043、执行二级纠错行为。S1044、检测第一通信协议子系统网络状态，若网络状态正常，则执行S1408，若网络状态异常，则执行S1405。其中，在电子设备执行完二级纠错行为之后，等待预设时间段，电子设备再次检测第一通信协议子系统网络状态，其可参考上述S102实施例给出的方法。S1405、执行三级纠错行为。S1406、检测第一通信协议子系统网络状态，若网络状态正常，则执行S1408，若网络状态异常，则执行S1407。其中，在电子设备执行完三级纠错行为之后，等待预设时间段，电子设备再次检测第一通信协议子系统网络状态，其可参考上述S102实施例给出的方法。S1407、输出提醒信息，结束本次纠错操作。在本实施例中，提醒信息可以为提醒用户当前电子设备所处环境网络质量差的信息。可选地，电子设备可通过在显示屏显示输出提醒信息或通过语音输出提醒信息的方式输出提醒信息，本实施例对此不做限定。S1408、确定当前纠错周期的实际纠错次数已达到预设纠错次数；若达到，则执行S1409；若未达到，则返回执行确定通信协议子系统的网络状态的步骤。在本实施例中，若当前纠错周期的实际纠错次数未达到预设纠错次数，则返回执行S102步骤。S1409、结束当前纠错操作。S1410、生成本地纠错操作的纠错记录信息。本实施例提供的设备异常纠错方法，电子设备在检测到通信协议子系统的网络状态异常的情况下，确定电子设备当前处于无业务状态时，根据预设的纠错策略对电子设备进行纠错操作。由于电子设备当前处于无业务状态，在用户感知程度较弱或不感知的情况下，实现了通过对电子设备的多级纠错来恢复网络状态异常的通信协议子系统的功能的效果，且在保证电子设备的各个通信协议子系统恢复正常工作的同时，降低用户对通信协议子系统失效的感知程度，达到“于无声处”恢复通信协议子系统功能，并提升用户体验的效果。在一种示例中，以协议子系统为蜂窝Modem协议子系统来说明本实施例提供的设备异常纠错方法，参考图5，包括：S201、如果电子设备开启纠错功能，获取纠错配置信息。本实施例可参考上述实施例S101所提供的方法来获取纠错配置信息。S202、如果电子设备处于预设纠错时间段内，确定蜂窝Modem协议子系统的网络状态。在基于电子设备的当前系统时间确定电子设备处于预设纠错时间段内，电子设备确定蜂窝Modem协议子系统的网络状态。可选地，电子设备可以通过获取蜂窝Modem协议子系统的状态参数，来确定蜂窝Modem协议子系统的网络状态。示例性地，电子设备可以通过查询modem state参数，来确定蜂窝Modem协议子系统的网络状态。若modem state参数表示异常，则确定蜂窝Modem协议子系统的网络状态异常。可选地，电子设备还可以通过ping包确定蜂窝Modem协议子系统的网络状态。如果电子设备基于接收到的ping数据包确定TCP/IP参数异常，或者运行异常，或者网络异常，则确定蜂窝Modem协议子系统的网络状态异常。可选地，电子设备还可以通过一段时间内的流量来确定蜂窝Modem协议子系统的网络状态。示例性地，电子设备可检测5分钟内的流量变化情况，若存在流量使用异常，则确定蜂窝Modem协议子系统的网络状态异常。可选地，电子设备还可以发送网络寻呼消息，若接收到网络寻呼消息对应的响应，则确定蜂窝Modem协议子系统的网络状态正常；若未接收到网络寻呼消息对应的响应，则确定蜂窝Modem协议子系统的网络状态异常。S203、如果蜂窝Modem协议子系统的网络状态异常，则确定电子设备当前是否处于无协议业务状态。其中，电子设备确定蜂窝Modem协议子系统的网络状态异常，则意味着需要进行纠错操作。为了降低用户的感知程度，在这种情况下，电子设备还可以判断当前是否处于无蜂窝Modem协议业务状态。示例性地，无蜂窝Modem协议业务状态指的是电子设备当前无业务运行，或者，无蜂窝Modem协议相关的业务运行，比如，电子设备处于灭屏状态、电子设备无白名单前台应用正在运行、蜂窝Modem模块处于休眠状态等至少一种状态。其中，白名单前台应用可以为预先设置的应用名单。在本实施例中，电子设备可以通过屏幕状态参数确定当前处于灭屏状态；电子设备可以获取当前运行应用信息，确定有白名单前台应用正在运行；电子设备可以获取蜂窝Modem模块的状态参数，来确定蜂窝Modem模块处于休眠状态，本实施例对此不做限定。S204、在确定电子设备当前处于无协议业务状态的情况下，根据纠错策略执行纠错操作。本实施例可参考上述实施例S104所提供的方法来执行纠错操作。在对蜂窝Modem协议子系统进行纠错操作的情况下，以纠错策略包括一级纠错行为、二级纠错行为和三级纠错行为，一级纠错行为为蜂窝Modem协议子系统复位、二级纠错行为为开关飞行模式、三级纠错行为为整机重启，生效方式为三级纠错行为为例来进一步说明，S204包括:S2041、执行一级纠错行为，控制蜂窝Modem协议子系统进行一次系统复位。S2042、确定蜂窝Modem协议子系统的网络状态仍然异常。可选地，电子设备可以等待预设时间段后，确定蜂窝Modem协议子系统的网络状态。其中，预设时间段可以为30秒、1分钟等，根据实际情况确定。S2043、执行二级纠错行为，控制电子设备的开启并关闭飞行模块一次。S2044、确定蜂窝Modem协议子系统的网络状态仍然异常。可选地，电子设备可以等待预设时间段后，确定蜂窝Modem协议子系统的网络状态。其中，预设时间段可以为1分钟、2分钟、3分钟等，根据实际情况确定。S2045、执行三级纠错行为，控制系统级芯片进行整机重启操作。S2046、确定蜂窝Modem协议子系统的网络状态恢复正常。可选地，电子设备可以等待预设时间段后，确定蜂窝Modem协议子系统的网络状态。其中，预设时间段可以为3分钟、5分钟等，根据实际情况确定。S2047、结束当前纠错操作。S205、根据预设纠错周期和预设纠错次数，确定当前纠错周期的实际纠错次数已达到预设纠错次数，结束当前纠错周期的纠错操作。本实施例可参考上述实施例S104所提供的方法来根据预设纠错周期和预设纠错次数，确定当前纠错周期的实际纠错次数已达到预设纠错次数。S206、生成本地纠错操作的纠错记录信息。本实施例可参考上述实施例S104所提供的方法来生成本地纠错操作的纠错记录信息。在本实施例中，电子设备在检测到蜂窝Modem协议子系统的网络状态异常的情况下，确定电子设备当前处于无蜂窝Modem协议业务状态时，根据预设的纠错策略对电子设备进行纠错操作。由于电子设备当前处于无蜂窝Modem协议业务状态，在用户感知程度较弱或不感知的情况下，实现了通过对电子设备的多级纠错来恢复网络状态异常的蜂窝Modem协议子系统的功能的效果，且在保证蜂窝Modem协议子系统恢复正常工作的同时，降低用户对协议子系统失效的感知程度，达到“于无声处”恢复蜂窝Modem协议子系统功能，提升了用户体验的效果。在一种示例中，以协议子系统为Wi-Fi协议子系统来说明本实施例提供的设备异常纠错方法，参考图6，包括：S301、如果电子设备开启纠错功能，获取纠错配置信息。本实施例可参考上述实施例S101所提供的方法来获取纠错配置信息。S302、如果电子设备处于预设纠错时间段内，确定电子设备的Wi-Fi开关是否自动关闭过。在基于电子设备的当前系统时间确定电子设备处于预设纠错时间段内，电子设备可以通过检查执行纠错操作的当天，Wi-Fi的历史日志记录来确定电子设备Wi-Fi功能是否存在自动开启关闭的情况。S303、如果电子设备的Wi-Fi开关自动关闭过，确定Wi-Fi协议子系统的网络状态。在确定电子设备的Wi-Fi开关自动关闭过的情况下，电子设备确定Wi-Fi协议子系统的网络状态。可选地，电子设备可以通过Beacon帧测试，来确定Wi-Fi协议子系统的网络状态。其中，Beacon帧是所有基于802.11协议的无线热点用来建立连接，宣告自己存在的管理帧。若Beacon帧测试的测试结果为正常通信，则确定Wi-Fi协议子系统的网络状态正常；若Beacon帧测试的测试结果为异常，则确定Wi-Fi协议子系统的网络状态异常。可选地，电子设备还可以通过因特网包探索器确定Wi-Fi协议子系统的网络状态。其中，ping用于确定电子设备是否能与另一台主机成功交换数据包，电子设备可以根据返回的信息，推断TCP/IP参数是否设置正确，以及运行是否正常、网络是否通畅等，从而确定Wi-Fi协议子系统的网络状态。如果电子设备基于接收到的ping数据包确定TCP/IP参数异常，或者运行异常，或者网络异常，则确定Wi-Fi协议子系统的网络状态异常。可选地，电子设备还可以通过一段时间内的流量来确定Wi-Fi协议子系统的网络状态。示例性地，电子设备可检测5分钟内的流量变化情况，若存在流量使用异常，则确定Wi-Fi协议子系统的网络状态异常。S304、如果Wi-Fi协议子系统的网络状态异常，确定电子设备是否处于无Wi-Fi业务状态。其中，电子设备确定Wi-Fi协议子系统的网络状态异常，则意味着需要进行纠错操作。为了降低用户的感知程度，在这种情况下，电子设备还可以判断当前是否处于无Wi-Fi业务状态。示例性地，无Wi-Fi业务状态指的是电子设备无业务运行或无Wi-Fi业务运行。比如，电子设备处于灭屏状态、电子设备无白名单前台应用正在运行、Wi-Fi模块处于休眠状态等至少一种状态。其中，白名单前台应用可以为预先设置的应用名单。在本实施例中，电子设备可以通过屏幕状态参数确定当前处于灭屏状态；电子设备可以获取当前运行应用信息，确定有白名单前台应用正在运行；电子设备可以获取Wi-Fi模块的状态参数，来确定Wi-Fi模块处于休眠状态，本实施例对此不做限定。S305、在确定电子设备处于无Wi-Fi业务状态的情况下，根据纠错策略执行纠错操作。本实施例可参考上述实施例S104所提供的方法来执行纠错操作。在对Wi-Fi协议子系统进行纠错操作的情况下，以纠错策略包括一级纠错行为和二级纠错行为，一级纠错行为为Wi-Fi协议子系统复位、二级纠错行为为整机重启，生效方式为二级纠错行为为例，来进一步说明，S305包括:S3051、执行一级纠错行为，控制Wi-Fi协议子系统进行系统复位操作。可选地，电子设备可以等待预设时间段后，确定Wi-Fi协议子系统的网络状态。其中，预设时间段可以为30秒、1分钟等，根据实际情况确定。S3052、确定Wi-Fi协议子系统的网络状态仍然异常。S3053、执行二级纠错行为，控制系统级芯片进行整机重启操作。可选地，电子设备可以等待预设时间段后，确定Wi-Fi协议子系统的网络状态。其中，预设时间段可以为3分钟、5分钟等，根据实际情况确定。S3054、确定Wi-Fi协议子系统的网络状态恢复正常。S3055、结束当前纠错操作。S306、根据预设纠错周期和预设纠错次数，确定当前纠错周期的实际纠错次数已达到预设纠错次数，结束当前纠错周期的纠错操作。本实施例可参考上述实施例S104所提供的方法来根据预设纠错周期和预设纠错次数，确定当前纠错周期的实际纠错次数已达到预设纠错次数。S307、生成本地纠错操作的纠错记录信息。本实施例可参考上述实施例S104所提供的方法来生成本地纠错操作的纠错记录信息。在本实施例中，电子设备在检测到Wi-Fi协议子系统的网络状态异常的情况下，确定电子设备当前处于无Wi-Fi协议业务状态时，根据预设的纠错策略对电子设备进行纠错操作。由于电子设备当前处于无Wi-Fi协议业务状态，在用户感知程度较弱或不感知的情况下，实现了通过对电子设备的多级纠错来恢复网络状态异常的Wi-Fi协议子系统的功能的效果，且在保证Wi-Fi协议子系统恢复正常工作的同时，降低用户对协议子系统失效的感知程度，达到“于无声处”恢复Wi-Fi协议子系统功能，提升了用户体验的效果。本申请实施例还提供一种芯片系统），如图7所示，该芯片系统包括至少一个处理器701和至少一个接口电路702。处理器701和接口电路702可通过线路互联。例如，接口电路702可用于从其它装置接收信号。又例如，接口电路702可用于向其它装置发送信号。示例性的，接口电路702可读取存储器中存储的指令，并将该指令发送给处理器701。当所述指令被处理器701执行时，可使得电子设备执行上述实施例中的各个步骤。当然，该芯片系统还可以包含其他分立器件，本申请实施例对此不作具体限定。本申请实施例还提供一种计算机可读存储介质，该计算机可读存储介质包括计算机指令，当所述计算机指令在上述电子设备上运行时，使得该电子设备执行上述方法实施例中电子设备100执行的各个功能或者步骤。本申请实施例还提供一种计算机程序产品，当所述计算机程序产品在计算机上运行时，使得所述计算机执行上述方法实施例中电子设备100执行的各个功能或者步骤。例如，该计算机可以是上述电子设备100。通过以上实施方式的描述，所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，仅以上述各功能模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能模块完成，即将装置的内部结构划分成不同的功能模块，以完成以上描述的全部或者部分功能。在本申请所提供的几个实施例中，应该理解到，所揭露的装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述模块或单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个装置，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是一个物理单元或多个物理单元，即可以位于一个地方，或者也可以分布到多个不同地方。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。所述集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个可读取存储介质中。基于这样的理解，本申请实施例的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该软件产品存储在一个存储介质中，包括若干指令用以使得一个设备或处理器执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上内容，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何在本申请揭露的技术范围内的变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以所述权利要求的保护范围为准。
