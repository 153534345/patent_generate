标题title
片上多核系统的同步广播通信方法、装置和存储介质
摘要abst
本发明实施例公开了一种片上多核系统的同步广播通信方法、装置和存储介质，包括对片上多核系统中每两个处理器CPU核心之间分别创建专用通道；根据所创建的专用通道构建专用通道矩阵；当确定接收到指定CPU核心发送的广播通信时，根据指定CPU核心的编号查询专用通道矩阵获取第一专用通道，以及与各第一专用通道匹配的第一目标CPU核心；将广播通信分别通过第一专用通道发送给各第一目标CPU核心。通过在片上多核系统中每两个CPU核心之间分别创建专用通道，并构建专用通道矩阵，当确定接收到指定CPU核心发送的广播通信时，基于专用通道矩阵分别采用独立的专用通道将广播消息发送给各目标CPU核心，从而实现任意CPU核心向其他它CPU核心的同步广播通信。
权利要求书clms
1.一种片上多核系统的同步广播通信方法，其特征在于，包括：对片上多核系统中每两个处理器CPU核心之间分别创建专用通道，其中，每个专用通道分别标有编号；根据所创建的所述专用通道构建专用通道矩阵，其中，所述专用通道矩阵中包含接收消息CPU核心的编号、发送消息CPU核心的编号以及每两个CPU核心之间所使用的专用通道的编号；当确定接收到指定CPU核心发送的广播通信时，根据所述指定CPU核心的编号查询所述专用通道矩阵获取第一专用通道，以及与各所述第一专用通道匹配的第一目标CPU核心；将所述广播通信分别通过所述第一专用通道发送给各所述第一目标CPU核心。2.根据权利要求1所述的方法，其特征在于，所述对片上多核系统中每两个处理器CPU核心之间分别创建专用通道，包括：对片上多核系统中每两个处理器CPU核心之间基于先入先出FIFO存储器，分别创建第一FIFO通道，以及第二FIFO通道；其中，所述第一FIFO通道与所述第二FIFO通道的传输方向相反。3.根据权利要求1所述的方法，其特征在于，所述根据所创建的所述专用通道构建专用通道矩阵，包括：确定各CPU核心的编号以及初始二维数组；将接收消息CPU核心的编号作为所述初始二维数组的第一类位置下标，将发送消息CPU核心的编号作为所述初始二维数组的第二类位置下标；将所创建的每两个CPU核心之间所使用的专用通道的编号作为数组元素，存放到所述二维数组中，以构建所述专用通道矩阵；其中，所述第一类位置下标包括行下标，所述第二类位置下标包括列下标，或者，所述第一类位置下标包括列下标，所述第二类位置下标包括行下标。4.根据权利要求1所述的方法，其特征在于，所述根据所述指定CPU核心的编号查询所述专用通道矩阵获取第一专用通道，以及与各所述第一专用通道匹配的第一目标CPU核心，包括：根据所述指定CPU核心的编号查询所述专用通道矩阵的目标第二类位置，其中，所述目标第二类位置与所述指定CPU核心的编号相同；将所述目标第二类位置中所包含的专用通道作为所述第一专用通道；将每个所述第一专用通道位于的第一类位置下标所匹配的CPU核心，作为与所述第一专用通道匹配的第一目标CPU核心。5.根据权利要求4所述的方法，其特征在于，所述根据所述指定CPU核心的编号查询所述专用通道矩阵获取第一专用通道，以及与各所述第一专用通道匹配的第一目标CPU核心之前，还包括：根据所述指定CPU核心的编号查询所述专用通道矩阵的目标第一类位置，其中，所述目标第一类位置与所述指定CPU核心的编号相同；将所述目标第一类位置中所包含的专用通道作为第二专用通道；将每个所述第二专用通道位于的第二类位置下标所匹配的CPU核心，作为所述第二专用通道匹配的第二目标CPU核心；当检测到所述第二专用通道中包含从所述第二目标CPU核心发送过来的广播消息时，则对所述发送过来的广播消息进行接收，并对接收到的广播消息进行处理。6.根据权利要求5所述的方法，其特征在于，所述将所述广播通信分别通过所述第一专用通道发送给各所述第一目标CPU核心，包括：将所述广播消息写入到所述第一专用通道；通过所述第一专用通道将写入的所述广播消息发送给各所述第一目标CPU核心。7.根据权利要求6所述的方法，其特征在于，所述将所述广播通信分别通过所述第一专用通道发送给各所述第一目标CPU核心之后，还包括：对应答变量进行初始化，其中，所述应答变量用于表示收到的广播应答的总数；对所述专用通道矩阵的所述目标第一类位置进行轮询，确定所述目标第一类位置中的所述第二专用通道中收到广播应答的通道数量；根据接收到广播应答的通道数量对所述应答变量进行更新，并在确定所述应答变量的数值等于所述目标第一类位置中全部第二专用通道的数量时，则确定同步广播通信完成。8.一种片上多核系统的同步广播通信装置，其特征在于，包括：专用通道创建模块，用于对片上多核系统中每两个处理器CPU核心之间分别创建专用通道，每个专用通道分别标有编号；专用通道矩阵构建模块，用于根据所创建的所述专用通道构建专用通道矩阵，其中，所述专用通道矩阵中包含接收消息CPU核心的编号、发送消息CPU核心的编号以及每两个CPU核心之间所使用的专用通道的编号；专用通道矩阵查询模块，用于当确定接收到指定CPU核心发送的广播通信时，根据所述指定CPU核心的编号查询所述专用通道矩阵获取第一专用通道，以及与各所述第一专用通道匹配的第一目标CPU核心；广播模块，用于将所述广播通信分别通过所述第一专用通道发送给各所述第一目标CPU核心。9.一种电子设备，其特征在于，所述电子设备包括：一个或多个处理器；存储装置，用于存储一个或多个程序，当所述一个或多个程序被所述一个或多个处理器执行，使得所述一个或多个处理器实现如权利要求1-7中任一所述的方法。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，该程序被处理器执行时实现如权利要求1-7中任一所述的方法。
说明书desc
技术领域本发明实施例涉及通信技术领域，尤其涉及一种片上多核系统的同步广播通信方法、装置和存储介质。背景技术在片上多核系统中通常会包含多个CPU核心，片上多个CPU核心进行通信时，一般通过内存、互联网络或总线等方式进行通信，以实现片上多个CPU核心之间信息的传输。但是一般情况下，片上的多个CPU核心是不对等的，通常分为一个主CPU核心和多个从CPU核心，并且主CPU核心和多个从CPU核心之间仅包含一个通信总线，因此只能支持一个主CPU核心向多个从CPU核心发起广播通信，而不支持每个从CPU核心之间，以及从CPU核心向主CPU核心进行广播通信，因此现有的片上多核系统无法实现多个CPU核心的同步广播。发明内容本发明实施例提供了一种片上多核系统的同步广播通信方法、装置和存储介质，以实现片上多核系统上的任意CPU核心向其他对等的CPU核心的同步广播通信。第一方面，本发明实施例提供了一种片上多核系统的同步广播通信方法，包括：对片上多核系统中每两个处理器CPU核心之间分别创建专用通道，每个专用通道分别标有编号；根据所创建的所述专用通道构建专用通道矩阵，其中，所述专用通道矩阵中包含接收消息CPU核心的编号、发送消息CPU核心的编号以及每两个CPU核心之间所使用的专用通道的编号；当确定接收到指定CPU核心发送的广播通信时，根据所述指定CPU核心的编号查询所述专用通道矩阵获取第一专用通道，以及与各所述第一专用通道匹配的第一目标CPU核心；将所述广播通信分别通过所述第一专用通道发送给各所述第一目标CPU核心。另外，对片上多核系统中每两个处理器CPU核心之间分别创建专用通道，包括：对片上多核系统中每两个处理器CPU核心之间基于先入先出FIFO存储器，分别创建第一FIFO通道，以及第二FIFO通道；其中，所述第一FIFO通道与所述第二FIFO通道的传输方向相反。通过在每两个CPU核心之间分别创建方向相反的FIFO通道，一条用于接收，一条用于发送，从而发送和接收互不干扰，提高了消息广播收发方向的独立性。另外，根据所创建的所述专用通道构建专用通道矩阵，包括：确定各CPU核心的编号以及初始二维数组；将接收消息CPU核心的编号作为所述初始二维数组的第一位置下标，将发送消息CPU核心的编号作为所述初始二维数组的第二位置下标；将所创建的每两个CPU核心之间所使用的专用通道的编号作为数组元素，存放到所述二维数组中，以构建所述专用通道矩阵；其中，所述第一类位置下标包括行下标，所述第二类位置下标包括列下标，或者，所述第一类位置下标包括列下标，所述第二类位置下标包括行下标。通过将所创建的各专用通道采用矩阵的形式进行管理，从而使得发送CPU核心、接收CPU核心以及专用通道之间的关系清晰明了，便于后续从通道矩阵中准确查找到需要进行消息广播的目标CPU核心。另外，根据所述指定CPU核心的编号查询所述专用通道矩阵获取第一专用通道，以及与各所述第一专用通道匹配的第一目标CPU核心，包括：根据所述指定CPU核心的编号查询所述专用通道矩阵的目标第二类位置，其中，所述目标第二类位置与所述指定CPU核心的编号相同；将所述目标第二类位置中所包含的专用通道作为所述第一专用通道；将每个所述第一专用通道位于的第一类位置下标所匹配的CPU核心，作为与所述第一专用通道匹配的第一目标CPU核心。通过根据发送广播通信的指定CPU核心的编号从所构建的专用通道矩阵中能够快速查找到第一专用通道，以及第一目标CPU核心，从而进一步提高了消息广播确定专用通道的效率。另外，根据所述指定CPU核心的编号查询所述专用通道矩阵获取第一专用通道，以及与各所述第一专用通道匹配的第一目标CPU核心之前，还包括：根据所述指定CPU核心的编号查询所述专用通道矩阵的目标第一类位置，其中，所述目标第一类位置与所述指定CPU核心的编号相同；将所述目标第一类位置中所包含的专用通道作为第二专用通道；将每个所述第二专用通道位于的第二类位置下标所匹配的CPU核心，作为所述第二专用通道匹配的第二目标CPU核心；当检测到所述第二专用通道中包含从所述第二目标CPU核心发送过来的广播消息时，则对所述发送过来的广播消息进行接收，并对接收到的广播消息进行处理。通过将指定CPU核心所匹配的各个接收通道中的消息进行处理完成，从而便于后续清晰记录本次广播消息在接收通道中的应答数量，以避免接收通道中的本地广播应答与之前历史应答的混淆。另外，将所述广播通信分别通过所述第一专用通道发送给各所述第一目标CPU核心，包括：将所述广播消息写入到所述第一专用通道；通过所述第一专用通道将写入的所述广播消息发送给各所述第一目标CPU核心。通过将广播消息写入到第一专用通道中，从而保证信息的安全准确传输。另外，将所述广播通信分别通过所述第一专用通道发送给各所述第一目标CPU核心之后，还包括：对应答变量进行初始化，其中，所述应答变量用于表示收到的广播应答的总数；对所述专用通道矩阵的所述目标第一类位置进行轮询，确定所述目标第一类位置中的所述第二专用通道中收到广播应答的通道数量；根据接收到广播应答的通道数量对所述应答变量进行更新，并在确定所述应答变量的数值等于所述目标第一类位置中全部第二专用通道的数量时，则确定同步广播通信完成。通过对专用通道矩阵的目标行进行轮询，确定第二专用通道中收到广播应答的通道数量，从而确定本次广播通信是否已经被接收消息的CPU核心处理。第二方面，本发明实施例提供了一种片上多核系统的同步广播通信装置，包括：专用通道创建模块，用于对片上多核系统中每两个处理器CPU核心之间分别创建专用通道，每个专用通道分别标有编号；专用通道矩阵构建模块，用于根据所创建的所述专用通道构建专用通道矩阵，其中，所述专用通道矩阵中包含接收消息CPU核心的编号、发送消息CPU核心的编号以及每两个CPU核心之间所使用的专用通道的编号；专用通道矩阵查询模块，用于当确定接收到指定CPU核心发送的广播通信时，根据所述指定CPU核心的编号查询所述专用通道矩阵获取第一专用通道，以及与各所述第一专用通道匹配的第一目标CPU核心；广播模块，用于将所述广播通信分别通过所述第一专用通道发送给各所述第一目标CPU核心。第三方面，本发明实施例提供了一种电子设备，电子设备包括：一个或多个处理器；存储装置，用于存储一个或多个程序，当一个或多个程序被一个或多个处理器执行，使得一个或多个处理器实现如上的方法。第四方面，本发明实施例提供了一种计算机可读存储介质，其上存储有计算机程序，其特征在于，该程序被处理器执行时实现如上所述的方法。本发明实施例的技术方案，通过在片上多核系统中每两个CPU核心之间分别创建专用通道，并通过专用通道矩阵对多个专用通道进行管理，当确定接收到指定CPU核心发送的广播通信时，基于矩阵快速查找到目标通道，以及目标CPU核心，分别采用独立的专用通道将广播消息发送给各目标CPU核心，从而在所有CPU核心对等的片上多核系统中，实现任意CPU核心向其他它CPU核心的同步广播通信。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本发明的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1是本发明实施例一提供的片上多核系统的同步广播通信方法的流程图；图2是本发明实施例一提供的CPU核心与专用通道的关系示意图；图3是本发明实施例一提供的片上多核系统的结构示意图；图4是本发明实施例二提供的片上多核系统的同步广播通信方法的流程图；图5是本发明实施例二第一种情况下所构建的专用通道矩阵的结构示意图；图6是本发明实施例二第二种情况下所构建的专用通道矩阵的结构示意图；图7是本发明实施例三提供的片上多核系统的同步广播通信方法的流程图；图8是本发明实施例四提供的片上多核系统的同步广播通信装置的结构示意图；图9是本发明实施例五提供的一种电子设备的结构示意图。具体实施方式下面结合附图和实施例对本发明作进一步的详细说明。可以理解的是，此处所描述的具体实施例仅用于解释本发明，而非对本发明的限定。另外还需要说明的是，为了便于描述，附图中仅示出了与本发明相关的部分而非全部内容。在更加详细地讨论示例性实施例之前应当提到的是，一些示例性实施例被描述成作为流程图描绘的处理或方法。虽然流程图将各项操作描述成顺序的处理，但是其中的许多操作可以被并行地、并发地或者同时实施。此外，各项操作的顺序可以被重新安排。当其操作完成时所述处理可以被终止，但是还可以具有未包括在附图中的附加步骤。所述处理可以对应于方法、软件实现、硬件实现等等。实施一图1是本发明实施例提供的多核系统的同步广播通信方法的流程图，本实施例适用于对多核系统进行同步广播通信的情况，该方法可以由本发明实施例中的多核系统的同步广播通信装置来执行，该装置可以采用软件和/或硬件的方式实现。如图1所示，该方法具体包括如下操作：步骤S101，对片上多核系统中每两个处理器CPU核心之间分别创建专用通道。可选的，对片上多核系统中每两个处理器CPU核心之间分别创建专用通道，包括：对片上多核系统中每两个处理器CPU核心之间基于先入先出FIFO存储器，分别创建第一FIFO通道，以及第二FIFO通道；其中，第一FIFO通道与第二FIFO通道的传输方向相反。其中，如图2所示为本实施方式中的CPU核心与专用通道的关系示意图，以包含四个CPU核心的片上多核系统为例，对片上多个系统中每两个处理器CPU核心之间基于先入先出存储器，分别创建第一FIFO通道，以及第二FIFO通道，并且第一FIFO通道与第二FIFO通道的传输方向相反，每个CPU核心都与其它三个CPU核心，两两之间创建传输消息的专用通道，从而总共有4*＝12个专用通道，并且每个专用通道分别标有编号，图2中每个箭头表示一个FIFO通道，箭头的方向表示消息的发送方向，例如，CPU核心0和CPU核心1之间，针对CPU核心0来说，可以将用于发送广播消息的FIFO0作为第一FIFO通道，将用于接收广播消息的FIFO 3作为第二FIFO通道。当然，本实施方式中仅是以包含四个CPU核心的片上多核系统为例进行说明，本实施方式中并不限定片上多核系统中所包含的CPU核心的具体数量。其中，如图3所示，为片上多核系统的结构示意图，本实施方式的片上多核系统具体可以是包含四个CPU核心的芯片，例如，有特殊处理功能的网络适配器芯片或者存储控制器芯片等，本实施方式中并不限定片上多核系统的具体应用类型。当然，本实施方式中仅是举例说明，而并不限定片上多核系统中所包含的CPU核心的具体数量。步骤S102，根据所创建的专用通道构建专用通道矩阵。可选的，据所创建的专用通道构建专用通道矩阵，包括：确定各CPU核心的编号以及初始二维数组；将接收消息CPU核心的编号作为初始二维数组的第一类位置下标，将发送消息CPU核心的编号作为初始二维数组的第二类位置下标；将所创建的每两个CPU核心之间所使用的专用通道的编号作为数组元素，存放到二维数组中，以构建专用通道矩阵。其中，本实施方式中的第一类位置下标包括行下标，第二类位置下标包括列下标，或者第一类位置下标包括列下标，第二类位置下标包括行下标。即当第一类位置为行时，相应的第二类位置为列，同理当第一类位置为列时，相应的第二类位置则为行，因此本实施方式中的第一类位置和第二类位置为初始二维数组的不同维度方向位置，本实施方式中并不对其进行限定，只要能够根据接收消息CPU核心的编号、发送消息CPU核心的编号，以及所创建的专用通道，构建出专用通道矩阵，则都是在本申请的保护范围内，本申请实施方式中并不对其进行限定。步骤S103，当确定接收到指定CPU核心发送的广播通信时，根据指定CPU核心的编号查询专用通道矩阵获取第一专用通道，以及与各第一专用通道匹配的第一目标CPU核心。可选的，根据指定CPU核心的编号查询专用通道矩阵获取第一专用通道，以及与各第一专用通道匹配的第一目标CPU核心之前，还包括：根据指定CPU核心的编号查询专用通道矩阵的目标第一类位置，其中，目标第一类位置与指定CPU核心的编号相同；将目标第一类位置中所包含的专用通道作为第二专用通道；将每个第二专用通道位于的第二类位置下标所匹配的CPU核心，作为第二专用通道匹配的第二目标CPU核心；当检测到第二专用通道中包含从第二目标CPU核心发送过来的广播消息时，则对发送过来的广播消息进行接收，并对接收到的广播消息进行处理。其中，当接收到指定CPU核心所发送的广播通信时，会首选根据指定CPU核心的编号查询专用通道矩阵，获取第二专用通道矩阵，其中，第二专用通道矩阵是片上多核系统中其它CPU核心向指定CPU核心发送消息时，所采用的通道。如果在第二专用通道中有从其它CPU核心所发送的历史消息，则需要先读出并处理完第二专用通道中的消息。从而避免CPU核心同时广播时可能产生的互相等待。可选的，根据指定CPU核心的编号查询专用通道矩阵获取第一专用通道，以及与各第一专用通道匹配的第一目标CPU核心，包括：根据指定CPU核心的编号查询专用通道矩阵的目标第二类位置，其中，目标第二类位置与指定CPU核心的编号相同；将目标第二类位置中所包含的专用通道作为第一专用通道；将每个第一专用通道位于的第一类位置下标所匹配的CPU核心，作为与第一专用通道匹配的第一目标CPU核心。具体的说，当接收到指定CPU核心所发送的广播通信时，会根据指定CPU核心的编号查询专用通道矩阵的目标第二类位置，例如，目标行或目标列，这是与创建通道矩阵时发送消息的CPU核心所对应的具体位置相关的，并将目标第二类位置中所包含的专用通道作为第一专用通道，例如，当确定目标第二类位置为目标列时，则将目标列中所包含的专用通道矩阵作为第一专用通道，将每个第一专用通道位于的行下标所匹配的CPU核心，作为与第一专用通道矩阵匹配的第一目标CPU核心。步骤S104，将广播通信分别通过第一专用通道发送给各第一目标CPU核心。其中，将广播通信分别通过第一专用通道发送给各第一目标CPU核心，包括：将广播消息写入到第一专用通道；通过第一专用通道将写入的广播消息发送给各第一目标CPU核心。通过将广播通信分别通过第一专用通道发送给各第一目标CPU核心，从而实现指定CPU核心分别采用不同的专用通道向片上系统中的其它CPU核心进行同步广播。本发明实施例的技术方案，通过在片上多核系统中每两个CPU核心之间分别创建专用通道，并通过专用通道矩阵对多个专用通道进行管理，当确定接收到指定CPU核心发送的广播通信时，基于矩阵快速查找到目标通道，以及目标CPU核心，分别采用独立的专用通道将广播消息发送给各目标CPU核心，从而在所有CPU核心对等的片上多核系统中，实现任意CPU核心向其他它CPU核心的同步广播通信。实施例二图4是本发明实施例提供的片上多核系统的同步广播通信方法的流程图，本实施例以上述实施例为基础，对根据所创建的专用通道构建专用通道矩阵进行具体说明，该方法具体包括如下操作：步骤S201，对片上多核系统中每两个处理器CPU核心之间分别创建专用通道。可选的，对片上多核系统中每两个处理器CPU核心之间分别创建专用通道，包括：对片上多核系统中每两个处理器CPU核心之间基于先入先出FIFO存储器，分别创建第一FIFO通道，以及第二FIFO通道；其中，第一FIFO通道与第二FIFO通道的传输方向相反。由于关于对片上多核系统创建专用通道的具体方式在上述实施例中进行具体说明，因此本实施方式中不再对其进行赘述。步骤S202，确定各CPU核心的编号以及初始二维数组。具体的说，本实施方式中以4核片上多核系统为例，可以确定该片上多核系统中所包含的各CPU核心的编号分别为：CPU核心0、CPU核心1、CPU核心2和CPU核心3。另外，当确定片上多核系统中所包含的CPU核心的数量为4时，则可以创建4*4维的初始二维数组，并且此时所创建的初始二维数组中并不包含数组元素。当然，本实施方式中并不对初始二维数组的具体创建方式进行限定，只要所创建的初始二维数组的维度与所包含的CPU核心的数量相等，则都是在本申请的保护范围内。步骤S203，将接收消息CPU核心的编号作为初始二维数组的第一类位置下标，将发送消息CPU核心的编号作为初始二维数组的第二类位置下标。其中，当第一类位置为行时，相应的第二类位置为列，同理当第一类位置为列时，相应的第二类位置则为行，因此本实施方式中的第一类位置和第二类位置为初始二维数组的不同维度方向位置。因此在根据上述图2所创建的专用通道构建专用通道矩阵时分为两种情况：第一种情况第一类位置下标包括行下标，第二类位置下标包括列下标，即本申请具体是将接收消息CPU核心的编号作为初始二维数组的行下标，将发送消息CPU核心的编号作为初始二维数组的列下标。第二种情况：第一类位置下标包括列下标，第二类位置下标包括行下标，即本申请具体是将接收消息CPU核心的编号作为初始二维数组的列下标，将发送消息CPU核心的编号作为初始二维数组的行下标。步骤S204，将所创建的每两个CPU核心之间所使用的专用通道的编号作为数组元素，存放到二维数组中，以构建专用通道矩阵。其中，如图5所示，为第一种情况下所创建的专用通道矩阵的结构示意图，将接收消息CPU核心的编号作为初始二维数组的行下标，将发送消息CPU核心的编号作为初始二维数组的列下标，并根据图2中CPU核心与专用通道的关系，将所创建的专用通道作为二维数组中的数组元素补充到初始二维数组中。而如图6所示，为第二种情况下所创建的专用通道矩阵的结构示意图，将接收消息CPU核心的编号作为初始二维数组的列下标，将发送消息CPU核心的编号作为初始二维数组的行下标，二维数组中所存放的数组元素为之前所创建的FIFO通道。需要说明的是，本实施方式中所构建的专用通道矩阵仅是以片上多核系统中包含四个CPU核心为例进行说明，而当片上多核系统中所包含的CPU核心数量比较多时，通信的FIFO通道的数量也会相应的增多，每个CPU核心在与另一个CPU核心通信时，能够根据CPU核心的编号根据专用通道矩阵快速定位到这两个CPU核心之间所使用的专用通道；每个CPU核心在进行广播通信时，也能够根据所创建的专用通道矩阵快速定位到向其他CPU核心发消息的一组专用通道，以及从其他CPU核心接收消息应答的一组专用通道。因此本实施方式中根据创建的专用通道所构建的专用通道矩阵，能够实现对专用通道矩阵的组织和管理，以便于多个CPU核心之间的广播通信。步骤S205，当确定接收到指定CPU核心发送的广播通信时，根据指定CPU核心的编号查询专用通道矩阵获取第一专用通道，以及与各第一专用通道匹配的第一目标CPU核心。可选的，根据指定CPU核心的编号查询专用通道矩阵获取第一专用通道，以及与各第一专用通道匹配的第一目标CPU核心，包括：根据指定CPU核心的编号查询专用通道矩阵的目标第二类位置，其中，目标第二类位置与指定CPU核心的编号相同；将目标第二类位置中所包含的专用通道作为第一专用通道；将每个第一专用通道位于的第一类位置下标所匹配的CPU核心，作为与第一专用通道匹配的第一目标CPU核心。在一个具体实现中，当专用通道矩阵为上述第一种情况下所构建的如图5所示的结构时，当接收到指定CPU核心发送的广播通信时，当确定指定CPU核心的编号为0，则首先查询专用通道矩阵中的第0行，并将第0行中所包含的专用通道作为第二专用通道包括：FIFO3、FIFO6以及FIFO9，并将每个第二专用通道位于的列下标所匹配的CPU核心，作为第二专用通道匹配的第二目标CPU核心包括：CPU核心1、CPU核心2以及CPU核心3。如果第二专用通道中有从第二目标CPU核心所发送的消息时，要先读出并处理完这些接收到的消息。从而避免CPU核心同时广播时可能产生的互相等待。具体的说，当对第0行中所包含的第二专用通道的消息处理完之后，则会查询专用通道矩阵中的第0列，并将第0列中所包含的专用通道作为第一专用通道包括：FIFO0、FIFO1以及FIFO2，并将每个第一专用通道位于的行下标所匹配的CPU核心，作为第一专用通道匹配的第一目标CPU核心包括：CPU核心1、CPU核心2以及CPU核心3，通过查询可以得知第一目标CPU核心与上述所获取的第二目标CPU核心是相同的。需要说明的是，本实施方式中的第一专用通道数量为片上多核系统中所包含的CPU核心的数量减1，如图5所示专用通道矩阵中，当发送广播消息的指定CPU核心为CPU核心0时，则确定将0列中所包含的FIFIO0、FIFIO1和FIFIO3作为第一专用通道矩阵，由于片上CPU核心数量为4，因此本实施方式中第一专用通道数量为3。并且CPU核心0分别是通过FIFIO0向CPU核心1发送广播消息，通过FIFIO1向CPU核心2发送广播消息，通过FIFIO3向CPU核心3发送广播消息。在另一个具体实现中，当专用通道矩阵为上述第二种情况下所构建的如图6所示的结构时，当确定发送广播通信的指定CPU核心的编号为0时，则首先查询专用通道矩阵中的第0列，并将第0列中所包含的专用通道作为第二专用通道包括：FIFO3、FIFO6以及FIFO9，并将每个第二专用通道位于的行下标所匹配的CPU核心，作为第二专用通道匹配的第二目标CPU核心包括：CPU核心1、CPU核心2以及CPU核心3。如果第二专用通道中有从第二目标CPU核心所发送的消息时，要先读出并处理完这些接收到的消息。从而避免CPU核心同时广播时可能产生的互相等待。当对第0列中所包含的第二专用通道的消息处理完之后，则会查询专用通道矩阵中的第0行，并将第0行中所包含的专用通道作为第一专用通道包括：FIFO0、FIFO1以及FIFO2，并将每个第一专用通道位于的列下标所匹配的CPU核心，作为第一专用通道匹配的第一目标CPU核心包括：CPU核心1、CPU核心2以及CPU核心3。步骤S206，将广播通信分别通过第一专用通道发送给各第一目标CPU核心。可选的，将广播通信分别通过第一专用通道发送给各第一目标CPU核心，包括：将广播消息写入到第一专用通道；通过第一专用通道将写入的广播消息发送给各第一目标CPU核心。具体的说，本实施方式中，在确定出第一专用通道之后，会将广播消息写入第一专用通道FIFO0、FIFO1以及FIFO2中，并通过第一专用通道将写入的广播消息发送给各第一目标CPU核心：CPU核心1、CPU核心2以及CPU核心3中，从而实现CPU核心0分别采用不同的专用通道向片上系统中的其它CPU核心进行同步广播。本发明实施例的技术方案，通过在片上多核系统中每两个CPU核心之间分别创建专用通道，并通过专用通道矩阵对多个专用通道进行管理，当确定接收到指定CPU核心发送的广播通信时，基于矩阵快速查找到目标通道，以及目标CPU核心，分别采用独立的专用通道将广播消息发送给各目标CPU核心，从而在所有CPU核心对等的片上多核系统中，实现任意CPU核心向其他它CPU核心的同步广播通信。并且本实施方式中具体可以根据第一类位置和第二类位置的不同情况，创建不同形式的专用通道矩阵，从而体现了专用通道矩阵创建的多样性。实施例三图7是本发明实施例提供的片上多核系统的同步广播通信方法的流程图，本实施例以上述实施例为基础，本实施在将广播通信分别通过第一专用通道发送给各第一目标CPU核心之后，还包括对专用通道矩阵中的目标行进行轮询，以确定本次广播通信是否准确发送出去，方法步骤具体包括如下操作：步骤S301，对片上多核系统中每两个处理器CPU核心之间分别创建专用通道。可选的，对片上多核系统中每两个处理器CPU核心之间分别创建专用通道，包括：对片上多核系统中每两个处理器CPU核心之间基于先入先出FIFO存储器，分别创建第一FIFO通道，以及第二FIFO通道；其中，第一FIFO通道与第二FIFO通道的传输方向相反。步骤S302，根据所创建的专用通道构建专用通道矩阵。可选的，根据所创建的专用通道构建专用通道矩阵，包括：确定各CPU核心的编号以及初始二维数组；将接收消息CPU核心的编号作为初始二维数组的第一类位置下标，将发送消息CPU核心的编号作为初始二维数组的第二类位置下标；将所创建的每两个CPU核心之间所使用的专用通道的编号作为数组元素，存放到二维数组中，以构建专用通道矩阵；其中，第一类位置下标包括行下标，第二类位置下标包括列下标，或者，第一类位置下标包括列下标，第二类位置下标包括行下标。步骤S303，当确定接收到指定CPU核心发送的广播通信时，根据指定CPU核心的编号查询专用通道矩阵获取第一专用通道，以及与各第一专用通道匹配的第一目标CPU核心。可选的，根据指定CPU核心的编号查询专用通道矩阵获取第一专用通道，以及与各第一专用通道匹配的第一目标CPU核心之前，还包括：根据指定CPU核心的编号查询专用通道矩阵的目标第一类位置，其中，目标第一类位置与指定CPU核心的编号相同；将目标第一类位置中所包含的专用通道作为第二专用通道；将每个第二专用通道位于的第二类位置下标所匹配的CPU核心，作为第二专用通道匹配的第二目标CPU核心；当检测到第二专用通道中包含从第二目标CPU核心发送过来的广播消息时，则对发送过来的广播消息进行接收，并对接收到的广播消息进行处理。可选的，根据指定CPU核心的编号查询专用通道矩阵获取第一专用通道，以及与各第一专用通道匹配的第一目标CPU核心，包括：根据指定CPU核心的编号查询专用通道矩阵的目标第二类位置，其中，目标第二类位置与指定CPU核心的编号相同；将目标第二类位置中所包含的专用通道作为第一专用通道；将每个第一专用通道位于的第一类位置下标所匹配的CPU核心，作为与第一专用通道匹配的第一目标CPU核心。步骤S304，将广播通信分别通过第一专用通道发送给各第一目标CPU核心。可选的，将广播通信分别通过第一专用通道发送给各第一目标CPU核心，包括：将广播消息写入到第一专用通道；通过第一专用通道将写入的广播消变量进行初始化。步骤S305，对应答变量进行初始化。具体的说，在将广播通信分别通过第一专用通道发送给各第一目标CPU核心之后，还会为指定CPU核心设置一个的应答变量X，用于表示收到的广播应答的总数，并对应答变量进行初始化，初始值具体可以设置为0，从而便于后续对广播消息的应答结果进行记录。步骤S306，对专用通道矩阵的目标第一类位置进行轮询，确定目标第一类位置中的第二专用通道中收到广播应答的通道数量。其中，当专用通道矩阵为上述第一种情况下所构建的如图5所示的结构时，当确定指定CPU核心发送广播通信指定时长之后，会对专用通道矩阵的第0行进行轮询，指定时长具体可以是1秒，也可以是0秒，即发送消息后同步等待应答。本实施方式中并不限定指定时长的具体时间，只要保证能及时收取广播通信的应答，则都是在本申请的保护范围内，本实施方式中并不对其进行赘述。通过轮询查看第0行中的第二专用通道FIFO3、FIFO6以及FIFO9中收到广播应答的通道数量。其中，专用通道矩阵为上述第二种情况下所构建的如图6所示的结构时，具体是对专用通道矩阵的第0列进行轮询，具体轮询操作与上述方式大致相同，本实施方式中不再进行赘述。步骤S307，根据接收到广播应答的通道数量对应答变量进行更新，并在确定应答变量的数值等于目标第一类位置中全部第二专用通道的数量时，则确定同步广播通信完成。其中，根据接收到广播应答的通道数量对应答变量进行更新，如果收到广播应答，则X的值相应的加1，如果X的值为3时在，则确定CPU核心0所发送的广播通信已经被第二目标CPU核心接收并进行处理，此时则确定同步广播通信完成。本发明实施例的技术方案，通过在片上多核系统中每两个CPU核心之间分别创建专用通道，并通过专用通道矩阵对多个专用通道进行管理，当确定接收到指定CPU核心发送的广播通信时，基于矩阵快速查找到目标通道，以及目标CPU核心，分别采用独立的专用通道将广播消息发送给各目标CPU核心，从而在所有CPU核心对等的片上多核系统中，实现任意CPU核心向其他它CPU核心的同步广播通信。并且指定CPU核心采用专用通道向片上其它CPU核心发送完广播通信之后，还会对其它CPU核心所发送的广播应答进行记录，从而保证同步广播通信的可靠性。实施例四图8为本发明实施例提供的片上多核系统的同步广播通信装置的结构示意图，该装置具体包括：专用通道创建模块310、专用通道矩阵构建模块320、专用通道矩阵查询模块330以及广播模块340。专用通道创建模块310，用于对片上多核系统中每两个处理器CPU核心之间分别创建专用通道，每个专用通道分别标有编号；专用通道矩阵构建模块320，用于根据所创建的专用通道构建专用通道矩阵，其中，专用通道矩阵中包含接收消息CPU核心的编号、发送消息CPU核心的编号以及每两个CPU核心之间所使用的专用通道的编号；专用通道矩阵查询模块330，用于当确定接收到指定CPU核心发送的广播通信时，根据指定CPU核心的编号查询专用通道矩阵获取第一专用通道，以及与各第一专用通道匹配的第一目标CPU核心；广播模块340，用于将广播通信分别通过第一专用通道发送给各第一目标CPU核心。可选的，专用通道创建模块，用于对片上多核系统中每两个处理器CPU核心之间基于先入先出FIFO存储器，分别创建第一FIFO通道，以及第二FIFO通道；其中，第一FIFO通道与第二FIFO通道的传输方向相反。可选的，专用通道矩阵构建模块，用于确定各CPU核心的编号以及初始二维数组；将接收消息CPU核心的编号作为初始二维数组的第一类位置下标，将发送消息CPU核心的编号作为初始二维数组的第二类位置下标；将所创建的每两个CPU核心之间所使用的专用通道的编号作为数组元素，存放到二维数组中，以构建专用通道矩阵；其中，第一类位置下标包括行下标，第二类位置下标包括列下标，或者，第一类位置下标包括列下标，第二类位置下标包括行下标。可选的，专用通道矩阵查询模块，用于根据指定CPU核心的编号查询专用通道矩阵的目标第二类位置，其中，目标第二类位置与指定CPU核心的编号相同；将目标第二列位置中所包含的专用通道作为第一专用通道；将每个第一专用通道位于的第一类位置下标所匹配的CPU核心，作为与第一专用通道匹配的第一目标CPU核心。可选的，专用通道矩阵构建模块，还用于根据指定CPU核心的编号查询专用通道矩阵的目标第一类位置，其中，目标第一类位置与指定CPU核心的编号相同；将目标第一类位置中所包含的专用通道作为第二专用通道；将每个第二专用通道位于的第二类位置下标所匹配的CPU核心，作为第二专用通道匹配的第二目标CPU核心；当检测到第二专用通道中包含从第二目标CPU核心发送过来的广播消息时，则对发送过来的广播消息进行接收，并对接收到的广播消息进行处理。可选的，广播模块，用于将广播消息写入到第一专用通道；通过第一专用通道将写入的广播消息发送给各第一目标CPU核心。可选的，装置还包括应答确定模块，用于对应答变量进行初始化，其中，应答变量用于表示收到的广播应答的总数；对专用通道矩阵的目标第一类位置进行轮询，确定目标行中的第二专用通道中收到广播应答的通道数量；根据接收到广播应答的通道数量对应答变量进行更新，并在确定应答变量的数值等于目标第一类位置中全部第二专用通道的数量时，则确定同步广播通信完成。上述装置可执行本发明任意实施例所提供的片上多核系统的同步广播通信方法，具备执行方法相应的功能模块和有益效果。未在本实施例中详尽描述的技术细节，可参见本发明任意实施例提供的方法。实施例五本发明实施例提供的一种电子设备的结构示意图。图9示出了适用于用来实现本发明实施方式的示例性电子设备412的框图。图9显示的电子设备412仅仅是一个示例，不应对本发明实施例的功能和使用范围带来任何限制。如图9所示，电子设备412以通用计算设备的形式出现。电子设备412的组件可以包括但不限于：一个或者多个处理器416，存储器428，连接不同系统组件的总线418。总线418表示几类总线结构中的一种或多种，包括存储器总线或者存储器控制器，外围总线，图形加速端口，处理器或者使用多种总线结构中的任意总线结构的局域总线。举例来说，这些体系结构包括但不限于工业标准体系结构总线，微通道体系结构总线，增强型ISA总线、视频电子标准协会局域总线以及外围组件互连总线。电子设备412典型地包括多种计算机系统可读介质。这些介质可以是任何能够被电子设备412访问的可用介质，包括易失性和非易失性介质，可移动的和不可移动的介质。存储器428用于存储指令。存储器428可以包括易失性存储器形式的计算机系统可读介质，例如随机存取存储器430和/或高速缓存存储器432。电子设备412可以进一步包括其它可移动/不可移动的、易失性/非易失性计算机系统存储介质。仅作为举例，存储系统434可以用于读写不可移动的、非易失性磁介质。尽管图9中未示出，可以提供用于对可移动非易失性磁盘读写的磁盘驱动器，以及对可移动非易失性光盘读写的光盘驱动器。在这些情况下，每个驱动器可以通过一个或者多个数据介质接口与总线418相连。存储器428可以包括至少一个程序产品，该程序产品具有一组程序模块，这些程序模块被配置以执行本发明各实施例的功能。具有一组程序模块442的程序/实用工具440，可以存储在例如存储器428中，这样的程序模块442包括但不限于操作系统、一个或者多个应用程序、其它程序模块以及程序数据，这些示例中的每一个或某种组合中可能包括网络环境的实现。程序模块442通常执行本发明所描述的实施例中的功能和/或方法。电子设备412也可以与一个或多个外部设备414通信，还可与一个或者多个使得用户能与该电子设备412交互的设备通信，和/或与使得该电子设备412能与一个或多个其它计算设备进行通信的任何设备通信。这种通信可以通过输入/输出接口422进行。并且，电子设备412还可以通过网络适配器420与一个或者多个网络，广域网和/或公共网络，例如因特网)通信。如图所示，网络适配器420通过总线418与电子设备412的其它模块通信。应当明白，尽管图7中未示出，可以结合电子设备412使用其它硬件和/或软件模块，包括但不限于：微代码、设备驱动器、冗余处理单元、外部磁盘驱动阵列、RAID系统、磁带驱动器以及数据备份存储系统等。处理器416通过运行存储在存储器428中的指令，从而执行各种功能应用以及数据处理，例如实现本发明实施例所提供的片上多核系统的同步广播通信方法：对片上多核系统中每两个处理器CPU核心之间分别创建专用通道，其中，每个专用通道分别标有编号；根据所创建的专用通道构建专用通道矩阵，其中，专用通道矩阵中包含接收消息CPU核心的编号、发送消息CPU核心的编号以及每两个CPU核心之间所使用的专用通道的编号；当确定接收到指定CPU核心发送的广播通信时，根据指定CPU核心的编号查询专用通道矩阵获取第一专用通道，以及与各第一专用通道匹配的第一目标CPU核心；将广播通信分别通过第一专用通道发送给各第一目标CPU核心。实施例六本发明实施例提供了一种计算机可读存储介质，其上存储有计算机程序，该程序被处理器执行时实现如本申请所有发明实施例提供的片上多核系统的同步广播通信方法：对片上多核系统中每两个处理器CPU核心之间分别创建专用通道，其中，每个专用通道分别标有编号；根据所创建的专用通道构建专用通道矩阵，其中，专用通道矩阵中包含接收消息CPU核心的编号、发送消息CPU核心的编号以及每两个CPU核心之间所使用的专用通道的编号；当确定接收到指定CPU核心发送的广播通信时，根据指定CPU核心的编号查询专用通道矩阵获取第一专用通道，以及与各第一专用通道匹配的第一目标CPU核心；将广播通信分别通过第一专用通道发送给各第一目标CPU核心。可以采用一个或多个计算机可读的介质的任意组合。计算机可读介质可以是计算机可读信号介质或者计算机可读存储介质。计算机可读存储介质例如可以是但不限于电、磁、光、电磁、红外线、或半导体的系统、装置或器件，或者任意以上的组合。计算机可读存储介质的更具体的例子包括：具有一个或多个导线的电连接、便携式计算机磁盘、硬盘、随机存取存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑磁盘只读存储器、光存储器件、磁存储器件、或者上述的任意合适的组合。在本文件中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用。计算机可读的信号介质可以包括在基带中或者作为载波一部分传播的数据信号，其中承载了计算机可读的程序代码。这种传播的数据信号可以采用多种形式，包括但不限于电磁信号、光信号或上述的任意合适的组合。计算机可读的信号介质还可以是计算机可读存储介质以外的任何计算机可读介质，该计算机可读介质可以发送、传播或者传输用于由指令执行系统、装置或者器件使用或者与其结合使用的程序。计算机可读介质上包含的程序代码可以用任何适当的介质传输，包括但不限于无线、电线、光缆、RF等等，或者上述的任意合适的组合。可以以一种或多种程序设计语言或其组合来编写用于执行本发明操作的计算机程序代码，程序设计语言包括面向对象的程序设计语言诸如Java、Smalltalk、C++，还包括常规的过程式程序设计语言诸如“C”语言或类似的程序设计语言。程序代码可以完全地在用户计算机上执行、部分地在用户计算机上执行、作为一个独立的软件包执行、部分在用户计算机上部分在远程计算机上执行、或者完全在远程计算机或服务器上执行。在涉及远程计算机的情形中，远程计算机可以通过任意种类的网络包括局域网或广域网连接到用户计算机，或者，可以连接到外部计算机。注意，上述仅为本发明的较佳实施例及所运用技术原理。本领域技术人员会理解，本发明不限于这里所述的特定实施例，对本领域技术人员来说能够进行各种明显的变化、重新调整和替代而不会脱离本发明的保护范围。因此，虽然通过以上实施例对本发明进行了较为详细的说明，但是本发明不仅仅限于以上实施例，在不脱离本发明构思的情况下，还可以包括更多其他等效实施例，而本发明的范围由所附的权利要求范围决定。
