标题title
基于单电阻电流采样的伺服电机控制器PWM控制方法
摘要abst
本发明公开了一种基于单电阻电流采样的伺服电机控制器PWM控制方法，其特征在于，是将电压矢量区间进行划分为若干个子区间，判断所需电压矢量位于哪个子区间中，针对不同的子区间选用不同的基本电压矢量，采用不同的PWM方法进行控制。通过本发明方法，可以在电机伺服控制器上通过单电阻电流采样技术实现电流采样，这种PWM在低调制比及扇区切换区间不存在测量盲区且不增加开关次数，该方法通过不同的基本电压矢量组合的方式减小电流测量盲区，实现高电压利用率。
权利要求书clms
1.基于单电阻电流采样的伺服电机控制器PWM控制方法，其特征在于，是将电压矢量区间进行划分为若干个子区间，判断所需电压矢量位于哪个子区间中，针对不同的子区间选用不同的基本电压矢量，采用不同的PWM方法进行控制。2.根据权利要求1所述的基于单电阻电流采样的伺服电机控制器PWM控制方法，其特征在于，所述方法是HPWM和传统SVPWM相结合的方法，是将电压矢量区间划分为两类区间，所需电压矢量位于一类区间中采用HPWM方法，位于另一类区间中采用SVPWM方法。3.根据权利要求2所述的基于单电阻电流采样的伺服电机控制器PWM控制方法，其特征在于，所述方法是首先判断所需电压矢量所在区间，当满足或/＞或时，采用HPWM的第一组电压矢量，即V1、V3、V5，每个基本电压矢量持续时间计算公式为当满足或/＞或/＞时，采用HPWM的第二组电压矢量，即V2、V4、V6，每个基本电压矢量持续时间计算公式为在其他满足的区域，采用基本SVPWM方式合成所需电压。4.根据权利要求1所述的基于单电阻电流采样的伺服电机控制器PWM控制方法，其特征在于，所述方法是矩形PWM方式，是将电压矢量空间划分为16个子区间，所需电压矢量位于不同子区间时采用不同的三个或四个基本电压矢量进行控制。5.根据权利要求4所述的基于单电阻电流采样的伺服电机控制器PWM控制方法，其特征在于，所述方法是首先判定所需电压所在区域，当满足时，采用V2,V3,V5,V6四个基本电压矢量，持续时间分别为当满足/＞时，采用V2,V3,V5,V6四个基本电压矢量，持续时间分别为当满足时，采用V2,V3,V5,V6四个基本电压矢量，持续时间分别为当满足时，采用V2,V3,V5,V6四个基本电压矢量，持续时间分别为当满足时，采用V1,V2,V5三个基本电压矢量，持续时间分别为当满足时，采用V1,V2,V4四个基本电压矢量，持续时间分别为当满足时，采用V2,V3,V6三个基本电压矢量，持续时间分别为当满足时，采用V2,V3,V5三个基本电压矢量，持续时间分别为当满足时，采用V1,V3,V4三个基本电压矢量，持续时间分别为当满足时，采用V3,V4,V6三个基本电压矢量，持续时间分别为当满足时，采用V2,V4,V5三个基本电压矢量，持续时间分别为当满足时，采用V1,V4,V5三个基本电压矢量，持续时间分别为当满足时，采用V3,V5,V6三个基本电压矢量，持续时间分别为当满足时，采用V2,V5,V6三个基本电压矢量，持续时间分别为当满足时，采用V1,V4,V6三个基本电压矢量，持续时间分别为当满足时，采用V1,V3,V6四个基本电压矢量，持续时间分别为6.根据权利要求1所述的基于单电阻电流采样的伺服电机控制器PWM控制方法，其特征在于，所述方法是等腰三角形PWM方式，是将电压矢量空间划分为12个区域，所需电压矢量位于不同子区间时采用不同的三个基本电压矢量进行控制。7.根据权利要求6所述的基于单电阻电流采样的伺服电机控制器PWM控制方法，其特征在于，所述方法是首先判定所需电压所在区间，当满足时，采用V2,V4,V6三个基本电压矢量，持续时间分别为当满足时，采用V1,V3,V5三个基本电压矢量，持续时间分别为当满足时，采用V2,V4,V6三个基本电压矢量，持续时间分别为当满足时，采用V1,V3,V5三个基本电压矢量，持续时间分别为当满足时，采用V2,V4,V6三个基本电压矢量，持续时间分别为当满足时，采用V1,V3,V5三个基本电压矢量，持续时间分别为当满足时，采用V1,V2,V6三个基本电压矢量，持续时间分别为当满足时，采用V1,V2,V3三个基本电压矢量，持续时间分别为当满足时，采用V2,V3,V4三个基本电压矢量，持续时间分别为当满足时，采用V3,V4,V5三个基本电压矢量，持续时间分别为当满足时，采用V4,V5,V6三个基本电压矢量，持续时间分别为当满足时，采用V1,V5,V6三个基本电压矢量，持续时间分别为/＞
说明书desc
技术领域本发明属于伺服电机控制器领域，涉及一种基于单电阻电流采样的伺服电机控制器脉宽调制技术控制方法，是通过改变PWM控制方式以在单电阻电流采样下实现更大可测量区域及高调制比的方法。背景技术永磁同步电机伺服控制器已广泛应用在现代工业中，高性能的伺服控制器要求能够准确地进行相电流测量。而高精度的电流传感器价格昂贵且体积较大，因此通过采样电阻进行电流采样得到了广泛应用，其中单电阻电流采样技术能够大大降低系统的成本，其应用电路图如图1所示，通过测量已知阻值的电压进而得到对应电流信息。单电阻电流采样技术是在不同的非零电压开关状态下测量得到不同相电流。在一个开关周期内通过不同开关状态测量得到两相电流进而根据三相电流之和为0得到三相电流或直接测量得到三相电流；而当仅能测量得到一相电流时，则无法得到三相电流信息。由于通过测量电阻电压进行电流采样，受到开关管导通延时、开通时间、死区时间及AD测量转换时间的限制，因此对PWM控制的开关状态持续时间有最小时间要求。传统的SVPWM方法下，会由于在扇区切换间，某一非零电压矢量持续时间过短，而只能采集得到一相电流无法得到完整的三相电流信息；在低调制比区间，两个非零电压矢量持续时间都过短，因此无法得到任何电流信息。现有的关于单电阻电流采样的PWM改进方法大多为脉冲移位法或矢量脉冲插入法。但脉冲移位法仅能缩小传统SVPWM中测量盲区但仍存在较大测量盲区；矢量脉冲插入法虽然在可实现电压范围内无测量盲区但会在每个周期内增加一次开关状态，增大开关损耗且由于引入无效矢量导致电压利用率下降。发明内容本发明的目的在于针对现有技术的不足，提供一种基于单电阻电流采样的伺服电机控制器PWM控制方法，可以实现低调制比及扇区切换区间无测量盲区。本发明所采用的技术方案为：基于单电阻电流采样的伺服电机控制器PWM控制方法，是将电压矢量区间进行划分为若干个子区间，判断所需电压矢量位于哪个子区间中，针对不同的子区间选用不同的基本电压矢量，采用不同的PWM方法进行控制；传统SVPWM下，划分扇区后，在相邻扇区的临近部分和低调制比区间均是测量盲区，而使用脉冲移位法只能把这部分缩小，但是做不到消除。使用矢量插入法虽能将这部分消除，但是降低了电压利用率并且增加了开关损耗。本发明方法可大大缩小测量盲区，尤其对于低调制比和临近相邻扇区的部分可以做到完全消除，同时通常情况下电压利用率可以达到1。本发明提供的基于单电阻电流采样的电机伺服控制器PWM控制技术，考虑了在通过电阻进行电流采样时对最小开关状态持续时间的要求，通过改变PWM方式，极大减小了测量盲区，可完全消除在低调制比及扇区切换区间的盲区，不引入额外的开关损耗同时几乎不减小电压利用率。附图说明图1是六角星PWM可实现电压区间图2是六角星PWM方式下电流可测区域图3是六角星PWM方式下有效工作区域图4是六角星PWM结合SVPWM方式下有效工作区域图5是矩形PWM方式可实现电压区间图6是矩形PWM方式下电流可测区域图7是矩形PWM方式下有效工作区域图8是ITPWM电流可测区间图9是ITPWM方式下有效工作区间具体实施方式下面结合附图和具体实施例对本发明方法做进一步地详细说明。本发明的方法是将电压矢量区间进行划分为若干个子区间，判断所需电压矢量位于哪个子区间中，针对不同的子区间选用不同的基本电压矢量，采用不同的PWM方法进行控制；具体涉及三种应用在单电阻电流采样的伺服控制的PWM控制方法，一种是通过六角星PWM和传统SVPWM相结合的方法，将电压矢量区间划分为两个区间，在不同区间采用不同的PWM方法，可在低测量盲区范围内实现高电压利用率。第二种是通过矩形PWM方式，将电压矢量空间划分为16个子区间，不同子区间采用不同的三个或四个基本电压矢量，可将测量盲区进一步缩小。第三种是通过等腰三角形PWM控制方式，将电压矢量空间划分为12个区域，在不同子区间采用不同的三个基本电压矢量，可大大缩小测量盲区。上述方法可以实现低调制比及扇区切换区间无测量盲区，且通常情况下电压利用率可以达到1。对本发明中涉及的符号的说明如下：Vα、Vβ电机静止两相坐标系下所需电压；V1～6矢量PWM控制中六个非零基本电压矢量，分别对应、、、、、，其中三个数字分别依次对应ABC三相桥臂开关状态，1代表上桥臂导通下桥臂关断、0代表上桥臂关断下桥臂导通；T1～6矢量PWM控制中六个非零基本电压矢量在一个开关周期内持续时间；Tmin单电阻电流采样模式下开关状态所需最短维持时间；Ts逆变器开关周期；D单电阻电流采样模式下开关状态所需最短维持时间占逆变器开关周期比例，即假设为准确测量得到电流信息，所需最短开关状态持续时间Tmin＝DTs，Ts为开关管开关周期，通常D为0.05～0.1之间。HPWM与SVPWW组合方法具体如下：首先介绍HPWM，当仅用三个电压矢量，V1、V3、V5来合成所需电压矢量时，电压矢量可实现区间如图2中阴影区域所示，而当仅用另外三个非零矢量V2、V4、V6来合成所需电压矢量时，电压矢量可实现区间如图2中阴影区域所示，当将图2和图2的两个正三角形结合，仅用两组中一组，V1、V3、V5或V2、V4、V6，来合成所需电压矢量时，其可实现区间如图2中阴影区域所示。当在V1电压矢量下，可通过直流母线采样电阻可直接测量得到A相电流iA，同理在V3电压矢量下可采样得到B相电流iB，在V5电压矢量下可采样得到C相电流ic；而在V2电压矢量下可采样得到-iA，在V4电压矢量下可采样得到-iB，在V6电压矢量下可采样得到-iC。因此当任意一组电压矢量中有两个基本电压矢量持续时间大于Tmin时，可测量得到两相或三相电流值。以仅用第一组电压矢量为例，V1、V3、V5持续时间分别为T1、T3、T5，开关周期为Ts，要合成电压矢量Vs。则有为满足单电阻电流采样下开关状态持续时间要求，则有上述不等式需至少满足两个，则图3中白色三角形内为仅用第一组电压矢量合成时的可实现且可测量区域。同理图3中绿色三角形内为仅用第二组电压矢量合成时的可实现且可测量区域，两个区域取交集，就可以得到采用HPWM时，通过单电阻电流采样的可实现且和测量区域，即图3中白色六角星内区域，图中阴影区域为仅可测得一相电流而无法得到完整三相电流信息区域，黑色部分为电压不可达区域。在六角星以外仍可通过传统SVPWM进行控制，以完成单采样电阻下的电流采样。结合两种PWM控制方法。可得到如图4区域划分，其中白色部分为可测得两相电流进而得到三相电流信息或可直接测得三相电流信息，阴影部分为仅可测量得到一相电流而无法重构出三相电流信息。在图4中，在区域1～3采用HPWM控制方式的第一组电压矢量，4～6区域采用HPWM的第二组电压矢量，而在其他区域采用SVPWM控制方式，在不考虑过调制情况下，电压利用率为其电压圆如图4所示。当/＞时，电压利用率为1。具体实现方法如下：首先判断所需电压矢量所在区间，当满足或时，采用HPWM的第一组电压矢量，即V1、V3、V5，每个基本电压矢量持续时间计算公式为当满足或时，采用HPWM的第二组电压矢量，即V2、V4、V6，每个基本电压矢量持续时间计算公式为在其他满足的区域，采用基本SVPWM方式合成所需电压。矩形PWM当以V2，V3，V5，V6为基本电压矢量时，组合可实现电压区间为如图5所示，在每个周期内开关顺序为V6→V2→V3→V5，在V3或V6测量B相电流，在V2或V5测量C相电流。假设V2，V3，V5，V6持续时间为T2，T3，T5，T6，开关周期为Ts，要合成电压矢量Vs。则有为满足单电阻采样要求，则有上述四个不等式，前两个至少满足一个，后两个至少满足一个，则可测区域为图6中白色区域内，图中阴影区域为仅可测得一相电流信息，黑色区域为电压不可达区域。因为公式中有四个未知量，而仅有三个方程式，所以在电压可实现范围内方程有无穷组解。因此需要再加一等式条件。将矩形分为四部分，以第一部分，图中矩形OABC为例，即当电压较小时，T5＝Tmin＝DTs，当电压较大时，T5＝0，即此时仅有三个基本电压矢量V2，V3，V6。因此将整个电压矢量六变形区间划分为16个部分。划分区域如图7所示，各个区间所需基本电压矢量、开关顺序及额外等式约束如表1所示。在矩形PWM控制方法下，电压可测区域为图7中白色区域，不考虑过调制情况下，电压利用率为当/＞时，电压利用率为1。表1矩形PWM下不同子区间基本电压矢量组成区域基本电压矢量开关顺序额外等式约束1V2，V3，V5，V6V6→V2→V3→V5T5＝Tmin2V2，V3，V5，V6V6→V2→V3→V5T6＝Tmin3V2，V3，V5，V6V6→V2→V3→V5T2＝Tmin4V2，V3，V5，V6V6→V2→V3→V5T3＝Tmin5V1，V2，V5V5→V1→V26V1，V2，V4V4→V2→V17V2，V3，V6V6→V2→V38V2，V3，V5V5→V3→V29V1，V3，V4V1→V3→V410V3，V4，V6V6→V4→V311V2，V4，V5V2→V4→V512V1，V4，V5V1→V5→V413V3，V5，V6V3→V5→V614V2，V5，V6V2→V6→V515V1，V4，V6V4→V6→V116V1，V3，V6V3→V1→V6具体实现方法如下：首先判定所需电压所在区域，当满足时，所需电压矢量在区域1，采用V2,V3,V5,V6四个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域2，采用V2,V3,V5,V6四个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域3，采用V2,V3,V5,V6四个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域4，采用V2,V3,V5,V6四个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域5，采用V1,V2,V5三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域6，采用V1,V2,V4四个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域7，采用V2,V3,V6三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域8，采用V2,V3,V5三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域9，采用V1,V3,V4三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域10，采用V3,V4,V6三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域11，采用V2,V4,V5三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域12，采用V1,V4,V5三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域13，采用V3,V5,V6三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域14，采用V2,V5,V6三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域15，采用V1,V4,V6三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域16，采用V1，V3，V6四个基本电压矢量，持续时间分别为等腰三角形PWM当以V1，V2，V4，V6为基本电压矢量时，组合可实现电压区间为如图8所示，为图形两个等腰三角形组合。在每个开关周期内，开关顺序为V4→V2→V1→V6，在V4或V1可测量A相电流，V2可测量C相电流，V6可测量B相电流。假设V1，V2，V4，V6持续时间分别为T1，T2，T4，T6，开关周期为Ts，要合成电压矢量Vs。则有/＞为满足单电阻采样要求，则有上述三个不等式需至少满足两个，则可测得至少两相电流从而得到完整三相电流信息，则可测区域为图9中白色区域内。因为公式5中有四个未知量，而仅有三个方程式约束，所以在电压可实现范围内有无穷组解，因此需要再加一等式条件。将四边形分为两部分，在区域1内增加等式约束，T4＝0，即仅有V1，V2，V6实现，而在区域2内增加等式约束T1＝0，即仅有V2，V4，V6实现。因此可将整个电压区间划分为12个区间，去划分区域如图9所示，各个区间所需基本电压矢量如表2所示。在这种PWM方式下，电压可测区域为图9中白色区域所示，图9中阴影区域为仅可测得一相电流而无法完整得到三相电流信息。在不考虑过调制情况下，当时，电压利用率为1。通常D为0.05～0.1的数值，因此通过本PWM控制方式可实现电压利用率为1。表2 ITPWM下不同子区间基本电压矢量组成区域基本电压矢量1V2，V4，V62V1，V3，V53V2，V4，V64V1，V3，V55V2，V4，V66V1，V3，V57V1，V2，V68V1，V2，V39V2，V3，V410V3，V4，V511V4，V5，V612V1，V5，V6具体实现方法如下：首先判定所需合成电压所在区间，当满足/＞时，所需电压矢量在区域1，采用V2，V4，V6三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域2，采用V1,V3,V5三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域3，采用V2,V4,V6三个基本电压矢量，持续时间分别为当满足/＞时，所需电压矢量在区域4，采用V1,V3,V5三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域5，采用V2,V4,V6三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域6，采用V1,V3,V5三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域7，采用V1,V2,V6三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域8，采用V1,V2,V3三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域9，采用V2,V3,V4三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域10，采用V3,V4,V5三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域11，采用V4,V5,V6三个基本电压矢量，持续时间分别为当满足时，所需电压矢量在区域12，采用V1,V5,V6三个基本电压矢量，持续时间分别为本发明通过三种PWM控制方法，可以在电机伺服控制器上通过单电阻电流采样技术实现电流采样。这种PWM在低调制比及扇区切换区间不存在测量盲区且不增加开关次数。通过不同的基本电压矢量组合的方式减小电流测量盲区，实现高电压利用率。
