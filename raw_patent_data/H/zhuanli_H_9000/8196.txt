标题title
基于DVS的光纤长度确定方法、装置及系统
摘要abst
本发明涉及光纤技术领域，公开了一种基于DVS的光纤长度确定方法、装置及系统，用于利用DVS直接确定光缆的光纤长度，不需要外接OTDR设备，提高光缆路由普查的工作效率。基于DVS的光纤长度确定方法包括：获取待测试光缆的DVS端口波形图，DVS端口波形图以采样点数为横坐标，以采样信号的频率幅值为纵坐标；对DVS端口波形图进行波形分析，得到有效反射峰信息，有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量；根据有效反射峰信息划分DVS端口波形图，得到目标波形区域；根据有效反射峰的数量和目标波形区域确定DVS端口波形；根据DVS端口波形和有效反射峰对应的采样点数确定待测试光缆的光纤长度。
权利要求书clms
1.一种基于DVS的光纤长度确定方法，应用在基于DVS的光纤长度确定系统，其特征在于，所述基于DVS的光纤长度确定方法包括：获取待测试光缆的DVS端口波形图，所述DVS端口波形图以采样点数为横坐标，以采样信号的频率幅值为纵坐标；对所述DVS端口波形图进行波形分析，得到有效反射峰信息，所述有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量；根据所述有效反射峰信息划分所述DVS端口波形图，得到目标波形区域；根据所述有效反射峰的数量和所述目标波形区域确定DVS端口波形；根据所述DVS端口波形和所述有效反射峰对应的采样点数确定所述待测试光缆的光纤长度。2.根据权利要求1所述的基于DVS的光纤长度确定方法，其特征在于，获取待测试光缆的DVS端口波形图，所述DVS端口波形图以采样点数为横坐标，以采样信号的频率幅值为纵坐标包括：对待测试光缆的每个采样点进行多次采样，得到每个采样点的采样信息，所述每个采样点的采样信息包括多帧采样信号和对应的采样点数；将每个采样点的多帧采样信号进行傅立叶变换，得到采样信号的频率幅值；将每个采样点的采样点数确定为横坐标，并将对应的频率幅值确定为纵坐标，得到DVS端口波形图。3.根据权利要求1所述的基于DVS的光纤长度确定方法，其特征在于，所述对所述DVS端口波形图进行波形分析，得到有效反射峰信息，所述有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量包括：计算所述DVS端口波形图中每个采样点的波形斜率；根据所述每个采样点的波形斜率和预设的波形斜率阈值确定有效反射峰，得到有效反射峰的数量；读取所述有效反射峰对应的采样点数，并将所述所述有效反射峰对应的采样点数和有效反射峰的数量确定为有效反射峰信息。4.根据权利要求1所述的基于DVS的光纤长度确定方法，其特征在于，所述对所述DVS端口波形图进行波形分析，得到有效反射峰信息，所述有效5反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量包括：根据预设的频率幅值阈值对所述DVS端口波形图进行筛选；将频率幅值大于所述频率幅值阈值的反射峰，确定为有效反射峰，得到有效反射峰的数量；读取所述有效反射峰对应的采样点数，并将所述有效反射峰对应的采样0点数和有效反射峰的数量确定为有效反射峰信息。5.根据权利要求1所述的基于DVS的光纤长度确定方法，其特征在于，所述根据所述有效反射峰信息划分所述DVS端口波形图，得到目标波形区域包括：5根据所述有效反射峰信息划分所述DVS端口波形图；当所述有效反射峰的数量为一个时，将所述有效反射峰对应的采样点数和所述DVS端口波形图的末端采样点数之间的波形区域确定为目标波形区域；当所述有效反射峰的数量为两个时，将两个有效反射峰之间的波形区域0确定为目标波形区域；当所述有效反射峰的数量大于两个时，将最后三个有效反射峰之间的波形区域确定为目标波形区域。6.根据权利要求1所述的基于DVS的光纤长度确定方法，其特征在于，5所述根据所述有效反射峰的数量和所述目标波形区域确定DVS端口波形包括：当所述有效反射峰的数量为一个时，对所述目标波形区域进行波形分析，得到第一类DVS端口波形，所述第一类DVS端口波形为未连接光纤的端口波形或光纤长度超量程的端口波形或存在断纤的端口波形；0当所述有效反射峰的数量为两个时，对所述目标波形区域进行波形分析，得到第二类DVS端口波形，所述第二类DVS端口波形为单段光纤的端口波形；当所述有效反射峰的数量大于两个时，对所述目标波形区域进行波形分析，得到第三类DVS端口波形，所述第三类DVS端口波形为多段光纤的端口波形或末端接头存在幻峰的端口波形。7.根据权利要求6所述的基于DVS的光纤长度确定方法，其特征在于，所述当所述有效反射峰的数量大于两个时，对所述目标波形区域进行波形分析，得到第三类DVS端口波形，所述第三类DVS端口波形为多段光纤的端口波形或末端接头存在幻峰的端口波形包括：当所述有效反射峰的数量大于两个时，所述目标波形区域包括第一波形区域和第二波形区域，所述第一波形区域为倒数第三个有效反射峰至倒数第二个有效反射峰之间的波形区域，所述第二波形区域为倒数第二个有效反射峰至倒数第一个有效反射峰之间的波形区域；当所述第一波形区域和所述第二波形区域的横坐标长度差在预设范围内，且所述第二波形区域的波形平滑时，判定所述DVS端口波形为末端接头存在幻峰的端口波形；当所述第一波形区域和所述第二波形区域的波形存在抖动时，判定所述DVS端口波形为多段光纤的端口波形。8.根据权利要求1-7中任一项所述的基于DVS的光纤长度确定方法，其特征在于，所述根据所述DVS端口波形和所述有效反射峰对应的采样点数确定所述待测试光缆的光纤长度包括：当所述DVS端口波形为多段光纤的端口波形或单段光纤的端口波形时，根据倒数第一个有效反射峰对应的采样点数确定待测试光缆的光纤长度；当所述DVS端口波形为末端接头存在幻峰的端口波形时，根据倒数第二个有效反射峰对应的采样点数确定待测试光缆的光纤长度。9.一种基于DVS的光纤长度确定装置，其特征在于，所述基于DVS的光纤长度确定装置包括：获取模块，用于获取待测试光缆的DVS端口波形图，所述DVS端口波形图以采样点数为横坐标，以采样信号的频率幅值为纵坐标；第一分析模块，用于对所述DVS端口波形图进行波形分析，得到有效反射峰信息，所述有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量；区域划分模块，用于根据所述有效反射峰信息划分所述DVS端口波形图，得到目标波形区域；第二分析模块，用于根据所述有效反射峰的数量和所述目标波形区域确定DVS端口波形；长度确定模块，用于根据所述DVS端口波形和所述有效反射峰对应的采样点数确定所述待测试光缆的光纤长度。10.一种基于DVS的光纤长度确定系统，其特征在于，所述基于DVS的光纤长度确定系统包括：窄线宽激光器，用于发射窄线宽激光；脉冲调制器，用于将所述窄线宽激光调制成脉冲光信号；光放大器，用于对所述脉冲光信号进行放大；环形器，用于将放大的脉冲光信号和所述待测试光缆的后向瑞利散射光信号隔离；光电探测器，用于探测待测试光缆的后向瑞利散射光信号；数据采集卡，用于对所述后向瑞利散射光信号进行数据采集，并将采集数据发送至处理单元进行处理；所述处理单元包括存储器和至少一个处理器，所述存储器中存储有指令；所述至少一个处理器调用所述存储器中的所述指令，以使得所述处理单元执行如权利要求1-8中任一项所述的基于DVS的光纤长度确定方法。
说明书desc
技术领域本发明涉及光纤技术领域，尤其涉及一种基于DVS的光纤长度确定方法、装置及系统。背景技术分布式光纤振动传感系统是以光纤作为传感器进行振动感知的光学仪器，广泛应用于光缆路由普查领域，并可以方便地定位故障发生位置。在单条光缆的路由普查过程中，会出现多人同时操作的情况，为了确认所普查的光缆为同一条，通常需要辅助测试该条光缆的光纤长度。目前主要的光纤长度测试设备为光时域反射仪，OTDR设备使用带宽为数十纳米的宽带光源作为测试光源，而DVS设备通常采用的窄线宽激光器作为测试光源，因此，在路由普查中需要额外连接OTDR设备才能进行光纤长度的确定，工作效率低。发明内容本发明提供了一种基于DVS的光纤长度确定方法、装置及系统，用于利用DVS直接确定光缆的光纤长度，不需要外接OTDR设备，提高光缆路由普查的工作效率。本发明第一方面提供了一种基于DVS的光纤长度确定方法，包括：获取待测试光缆的DVS端口波形图，DVS端口波形图以采样点数为横坐标，以采样信号的频率幅值为纵坐标；对DVS端口波形图进行波形分析，得到有效反射峰信息，有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量；根据有效反射峰信息划分DVS端口波形图，得到目标波形区域；根据有效反射峰的数量和目标波形区域确定DVS端口波形；根据DVS端口波形和有效反射峰对应的采样点数确定待测试光缆的光纤长度。在一种可行的实施方式中，获取待测试光缆的DVS端口波形图，DVS端口波形图以采样点数为横坐标，以采样信号的频率幅值为纵坐标包括：对待测试光缆的每个采样点进行多次采样，得到每个采样点的采样信息，每个采样点的采样信息包括多帧采样信号和对应的采样点数；将每个采样点的多帧采样信号进行傅立叶变换，得到采样信号的频率幅值；将每个采样点的采样点数确定为横坐标，并将对应的频率幅值确定为纵坐标，得到DVS端口波形图。在一种可行的实施方式中，对DVS端口波形图进行波形分析，得到有效反射峰信息，有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量包括：计算DVS端口波形图中每个采样点的波形斜率；根据每个采样点的波形斜率和预设的波形斜率阈值确定有效反射峰，得到有效反射峰的数量；读取有效反射峰对应的采样点数，并将有效反射峰对应的采样点数和有效反射峰的数量确定为有效反射峰信息。在一种可行的实施方式中，对DVS端口波形图进行波形分析，得到有效反射峰信息，有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量包括：根据预设的频率幅值阈值对DVS端口波形图进行筛选；将频率幅值大于频率幅值阈值的反射峰，确定为有效反射峰，得到有效反射峰的数量；读取有效反射峰对应的采样点数，并将有效反射峰对应的采样点数和有效反射峰的数量确定为有效反射峰信息。在一种可行的实施方式中，根据有效反射峰信息划分DVS端口波形图，得到目标波形区域包括：根据有效反射峰信息划分DVS端口波形图；当有效反射峰的数量为一个时，将有效反射峰对应的采样点数和DVS端口波形图的末端采样点数之间的波形区域确定为目标波形区域；当有效反射峰的数量为两个时，将两个有效反射峰之间的波形区域确定为目标波形区域；当有效反射峰的数量大于两个时，将最后三个有效反射峰之间的波形区域确定为目标波形区域。在一种可行的实施方式中，根据有效反射峰的数量和目标波形区域确定DVS端口波形包括：当有效反射峰的数量为一个时，对目标波形区域进行波形分析，得到第一类DVS端口波形，第一类DVS端口波形为未连接光纤的端口波形或光纤长度超量程的端口波形或存在断纤的端口波形；当有效反射峰的数量为两个时，对目标波形区域进行波形分析，得到第二类DVS端口波形，第二类DVS端口波形为单段光纤的端口波形；当有效反射峰的数量大于两个时，对目标波形区域进行波形分析，得到第三类DVS端口波形，第三类DVS端口波形为多段光纤的端口波形或末端接头存在幻峰的端口波形。在一种可行的实施方式中，当有效反射峰的数量大于两个时，对目标波形区域进行波形分析，得到第三类DVS端口波形，第三类DVS端口波形为多段光纤的端口波形或末端接头存在幻峰的端口波形包括：当有效反射峰的数量大于两个时，目标波形区域包括第一波形区域和第二波形区域，第一波形区域为倒数第三个有效反射峰至倒数第二个有效反射峰之间的波形区域，第二波形区域为倒数第二个有效反射峰至倒数第一个有效反射峰之间的波形区域；当第一波形区域和第二波形区域的横坐标长度差在预设范围内，且第二波形区域的波形平滑时，判定DVS端口波形为末端接头存在幻峰的端口波形；当第一波形区域和第二波形区域的波形存在抖动时，判定DVS端口波形为多段光纤的端口波形。在一种可行的实施方式中，根据DVS端口波形和有效反射峰对应的采样点数确定待测试光缆的光纤长度包括：当DVS端口波形为多段光纤的端口波形或单段光纤的端口波形时，根据倒数第一个有效反射峰对应的采样点数确定待测试光缆的光纤长度；当DVS端口波形为末端接头存在幻峰的端口波形时，根据倒数第二个有效反射峰对应的采样点数确定待测试光缆的光纤长度。本发明第二方面提供了一种基于DVS的光纤长度确定装置，包括：获取模块，用于获取待测试光缆的DVS端口波形图，DVS端口波形图以采样点数为横坐标，以采样信号的频率幅值为纵坐标；第一分析模块，用于对DVS端口波形图进行波形分析，得到有效反射峰信息，有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量；区域划分模块，用于根据有效反射峰信息划分DVS端口波形图，得到目标波形区域；第二分析模块，用于根据有效反射峰的数量和目标波形区域确定DVS端口波形；长度确定模块，用于根据DVS端口波形和有效反射峰对应的采样点数确定待测试光缆的光纤长度。在一种可行的实施方式中，获取模块具体用于：对待测试光缆的每个采样点进行多次采样，得到每个采样点的采样信息，每个采样点的采样信息包括多帧采样信号和对应的采样点数；将每个采样点的多帧采样信号进行傅立叶变换，得到采样信号的频率幅值；将每个采样点的采样点数确定为横坐标，并将对应的频率幅值确定为纵坐标，得到DVS端口波形图在一种可行的实施方式中，第一分析模块具体用于：计算DVS端口波形图中每个采样点的波形斜率；根据每个采样点的波形斜率和预设的波形斜率阈值确定有效反射峰，得到有效反射峰的数量；读取有效反射峰对应的采样点数，并将有效反射峰对应的采样点数和有效反射峰的数量确定为有效反射峰信息。在一种可行的实施方式中，第一分析模块具体用于：根据预设的频率幅值阈值对DVS端口波形图进行筛选；将频率幅值大于频率幅值阈值的反射峰，确定为有效反射峰，得到有效反射峰的数量；读取有效反射峰对应的采样点数，并将有效反射峰对应的采样点数和有效反射峰的数量确定为有效反射峰信息。在一种可行的实施方式中，区域划分具体用于：根据有效反射峰信息划分DVS端口波形图；当有效反射峰的数量为一个时，将有效反射峰对应的采样点数和DVS端口波形图的末端采样点数之间的波形区域确定为目标波形区域；当有效反射峰的数量为两个时，将两个有效反射峰之间的波形区域确定为目标波形区域；当有效反射峰的数量大于两个时，将最后三个有效反射峰之间的波形区域确定为目标波形区域。在一种可行的实施方式中，第二分析模块括：第一波形单元，用于当有效反射峰的数量为一个时，对目标波形区域进行波形分析，得到第一类DVS端口波形，第一类DVS端口波形为未连接光纤的端口波形或光纤长度超量程的端口波形或存在断纤的端口波形；第二波形单元，用于当有效反射峰的数量为两个时，对目标波形区域进行波形分析，得到第二类DVS端口波形，第二类DVS端口波形为单段光纤的端口波形；第三波形单元，用于当有效反射峰的数量大于两个时，对目标波形区域进行波形分析，得到第三类DVS端口波形，第三类DVS端口波形为多段光纤的端口波形或末端接头存在幻峰的端口波形。在一种可行的实施方式中，第三波形单元具体用于：当有效反射峰的数量大于两个时，目标波形区域包括第一波形区域和第二波形区域，第一波形区域为倒数第三个有效反射峰至倒数第二个有效反射峰之间的波形区域，第二波形区域为倒数第二个有效反射峰至倒数第一个有效反射峰之间的波形区域；当第一波形区域和第二波形区域的横坐标长度差在预设范围内，且第二波形区域的波形平滑时，判定DVS端口波形为末端接头存在幻峰的端口波形；当第一波形区域和第二波形区域的波形存在抖动时，判定DVS端口波形为多段光纤的端口波形。在一种可行的实施方式中，长度确定模块具体用于当DVS端口波形为多段光纤的端口波形或单段光纤的端口波形时，根据倒数第一个有效反射峰对应的采样点数确定待测试光缆的光纤长度；当DVS端口波形为末端接头存在幻峰的端口波形时，根据倒数第二个有效反射峰对应的采样点数确定待测试光缆的光纤长度。本发明第三方面提供了一种基于DVS的光纤长度确定系统，包括：窄线宽激光器，用于发射窄线宽激光；脉冲调制器，用于将窄线宽激光调制成脉冲光信号；光放大器，用于对脉冲光信号进行放大；环形器，用于将放大的脉冲光信号和待测试光缆的后向瑞利散射光信号隔离；光电探测器，用于探测待测试光缆的后向瑞利散射光信号；数据采集卡，用于对后向瑞利散射光信号进行数据采集，并将采集数据发送至处理单元进行处理；处理单元包括存储器和至少一个处理器，存储器中存储有指令；至少一个处理器调用存储器中的指令，以使得处理单元执行上述的基于DVS的光纤长度确定方法。本发明的第四方面提供了一种计算机可读存储介质，计算机可读存储介质中存储有指令，指令在被读取并运行时执行上述的基于DVS的光纤长度确定方法。本发明提供的技术方案中，获取待测试光缆的DVS端口波形图，DVS端口波形图以采样点数为横坐标，以采样信号的频率幅值为纵坐标；对DVS端口波形图进行波形分析，得到有效反射峰信息，有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量；根据有效反射峰信息划分DVS端口波形图，得到目标波形区域；根据有效反射峰的数量和目标波形区域确定DVS端口波形；根据DVS端口波形和有效反射峰对应的采样点数确定待测试光缆的光纤长度。本发明实施例中，利用DVS直接确定光缆的光纤长度，不需要外接OTDR设备，提高光缆路由普查的工作效率。附图说明图1为本发明实施例中基于DVS的光纤长度确定方法的一个实施例示意图；图2为本发明实施例中未连接光纤的端口波形示意图；图3为本发明实施例中光纤长度超量程的端口波形示意图；图4为本发明实施例中存在断纤的端口波形示意图；图5为本发明实施例中单段光纤的端口波形示意图；图6为本发明实施例中多段光纤的端口波形示意图；图7为本发明实施例中末端接头存在幻峰的端口波形示意图；图8为本发明实施例中基于DVS的光纤长度确定方法的另一个实施例示意图；图9为本发明实施例中基于DVS的光纤长度确定装置的一个实施例示意图；图10为本发明实施例中基于DVS的光纤长度确定装置的另一个实施例示意图；图11为本发明实施例中基于DVS的光纤长度确定一个实施例示意图；图12为本发明实施例中处理单元的一个实施例示意图。具体实施方式本发明提供了一种基于DVS的光纤长度确定方法、装置及系统，用于利用DVS直接确定光缆的光纤长度，不需要外接OTDR设备，提高光缆路由普查的工作效率。本发明的说明书和权利要求书及上述附图中的术语“第一”、“第二”、“第三”、“第四”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的实施例能够以除了在这里图示或描述的内容以外的顺序实施。此外，术语“包括”或“具有”及其任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。为便于理解，下面对本发明实施例的具体流程进行描述，请参阅图1，本发明实施例中基于DVS的光纤长度确定方法的一个实施例包括：101、获取待测试光缆的DVS端口波形图，DVS端口波形图以采样点数为横坐标，以采样信号的频率幅值为纵坐标。可以理解的是，本发明的执行主体可以为基于DVS的光纤长度确定装置，还可以是为基于DVS的光纤长度确定系统，具体此处不做限定。本发明实施例以基于DVS的光纤长度确定系统为执行主体为例进行说明。基于DVS的光纤长度确定系统是利用DVS进行光纤长度确定的系统，其中，DVS依据瑞利散射的基本原理，结合相位敏感光时域反射技术以及傅立叶变换等信号分析处理算法，对光纤振动的传感进行监测的系统，DVS可以是直接探测型φ-OTDR系统或相干探测型φ-OTDR系统。本实施例中，直接探测型φ-OTDR系统包括窄线宽激光器、脉冲调制器、光放大器、环形器、光电探测器、数据采集卡和处理单元，其中，窄线宽激光器、脉冲调制器、光放大器、环形器依次连接，环形器的第一端口连接光放大器，环形器的第二端口连接待测试光缆、环形器的第三端口连接光电探测器的一端，光电探测器的另一端连接数据采集卡的一端，数据采集卡的另一端连接处理单元，以使窄线宽激光依次经过脉冲调制器、光放大器、环形器传输至待测试光缆，待测试光缆的后向瑞利散射光信号通过环形器、光电探测器被数据采集卡采集，并传输至处理单元进行处理。基于DVS的光纤长度确定系统通过数据采集卡对待测试光缆的后向瑞利散射光信号进行采样处理，对每个采样点取N帧采样信号进行FFT变换，将采样信号由时域转换为频域，然后将频域的幅值累加作为该采样点的频率幅值，将采样信号的频率幅值为纵坐标，以对应的采样点数为横坐标，构建DVS端口波形图。其中，采样点数与数据采集卡的采样率有关，采样率是指该通道每秒钟采样的点数，采样率与采样频率基本一致，采样率决定了采样的精度，但二者单位标注不同，采样率的单位是SPS，采样频率的单位是Hz，测试距离越长，那么采样点间隔越大，因此采样点越多，测量距离越精确，对于同一待测试光缆，可以通过有效峰对应的采样点数确定对应的光纤长度。需要进一步说明的是，当DVS为相干探测型φ-OTDR系统时，对光电探测器输出信号进行IQ调制，对I信号和Q信号的平方和进行开方运算，得到对应的采样信号，改信号与直接探测型φ-OTDR系统的采样信号近似，后续处理可以参照执行，相干探测型φ-OTDR系统相较于直接探测型φ-OTDR系统引入参考光，其窄线宽激光器还连接耦合器，耦合器将窄线宽激光器发射的参考光和通过待测试光缆的后向瑞利散射光信号进行拍频后发射至光电探测器进行探测，能提升散射光信号功率，增强系统信噪比，相干探测型φ-OTDR系统的具体设置，此处不作限制。102、对DVS端口波形图进行波形分析，得到有效反射峰信息，有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量。基于DVS的光纤长度确定系统通过预设的频率幅值阈值或计算波形斜率变化等方式对DVS端口波形图进行波形分析，得到有效反射峰信息，有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量，每个有效反射峰对应的采样点数可以确定对应的光纤长度。本实施例中，DVS端口波形图在待测试光缆接头处，其频率幅值突增，表现为波形出现高反射峰，将该反射峰确定为有效反射峰，通过有效反射峰的筛选可以波形分类和光缆长度的判断。103、根据有效反射峰信息划分DVS端口波形图，得到目标波形区域。基于DVS的光纤长度确定系统根据有效反射峰的数量和每个有效反射峰对应的采样点数对DVS端口波形图进行划分，对划分得到的目标波形区域进行波形分类，进行光纤波长的确定，其中，目标波形区域是指两个有效反射峰之间的DVS端口波形区域。104、根据有效反射峰的数量和目标波形区域确定DVS端口波形。基于DVS的光纤长度确定系统根据根据有效反射峰的数量和目标波形区域确定DVS端口波形，DVS端口波形波形包括第一类DVS端口波形、第二类DVS端口波形、第三类DVS端口波形，第一类DVS端口波形包括未连接光纤的端口波形、光纤长度超量程的端口波形、存在断纤的端口波形，第二类DVS端口波形为单段光纤的端口波形，第三类DVS端口波形包括多段光纤的端口波形、末端接头存在幻峰的端口波形。本实施例中，幻峰一般在末端接头处存在，但幻峰对应的采样点数并非真正的光纤长度，在确定光纤长度时需要对幻峰进行识别，末端接头存在幻峰的端口波形与多段光纤的端口波形的区别是倒数两个波形区域长度相近，最后一段波形区域的端口波形较为光滑，波形抖动小。其中，幻峰形成的主要原因可能是待测试光缆的光纤长度太长，DVS发射窄线宽激光的频率较高，在上一个光信号还未反射回待测试光缆起始位置时，下一个窄线宽激光信号又发射出去了，二者就在待测试光缆的某一点相遇而形成幻峰；还可能是待测试光缆中光纤与光纤接口损耗大，当光信号遇到光纤接口时，一部分光信号再返回远端，并与其他光信号相叠加而形成幻峰。105、根据DVS端口波形和有效反射峰对应的采样点数确定待测试光缆的光纤长度。基于DVS的光纤长度确定系统根据DVS端口波形对应的采样点数确定待测试光缆的光纤长度，具体的，当为第一类DVS端口波形时，无法准确确定光纤长度，需根据不同的DVS端口波形进行故障排除再进行光纤长度确定；未连接光纤的端口波形需重新连接待测试光缆，光纤长度超量程的端口波形需调整DVS的测试量程，存在断纤的端口波形无法观察到有效的端口反射波形，只能通过波形的抖动程度变化粗略判断光线长度，通过波形开始平滑处的采样点数确定光纤长度；当为第二类DVS端口波形或多段光纤的端口波形时，最后一个有效反射峰对应的采样点数确定待测试光缆的光纤长度；当为末端接头存在幻峰的端口波形时，以倒数第二个有效反射峰对应的采样点数确定待测试光缆的光纤长度。上述根据有效反射峰对应的采样点数计算光纤长度的公式如下：其中，L为待测试光缆中的光纤长度；v为光在光纤中的速度；t为回波时间，光由待测试光缆的起始端进入到后向瑞利散射光信号回到起始端的时间；c为光在自由空间的速度；n为待测试光缆的折射率；x为有效反射峰对应的采样点数，通过读取DVS端口波形图中有效反射峰对应的横坐标获取；f为采样率，可以通过数据采集卡获得。本发明实施例中，利用DVS端口波形图通过有效峰筛选和DVS端口波形分类，直接确定光缆的光纤长度，根据光纤长度即可确认所普查的光缆，不需要外接OTDR设备，提高了光缆路由普查的工作效率。请参阅图8，本发明实施例中基于DVS的光纤长度确定方法的另一个实施例包括：801、获取待测试光缆的DVS端口波形图，DVS端口波形图以采样点数为横坐标，以采样信号的频率幅值为纵坐标。基于DVS的光纤长度确定系统对待测试光缆的每个采样点进行多次采样，得到每个采样点的采样信息，每个采样点的采样信息包括多帧采样信号和对应的采样点数；将每个采样点的多帧采样信号进行傅立叶变换，得到采样信号的频率幅值；将每个采样点的采样点数确定为横坐标，并将对应的频率幅值确定为纵坐标，得到DVS端口波形图。802、对DVS端口波形图进行波形分析，得到有效反射峰信息，有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量。基于DVS的光纤长度确定系统对DVS端口波形图进行波形分析，得到有效反射峰信息，有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量。在一种可行的实施方式中，计算DVS端口波形图中每个采样点的波形斜率；根据每个采样点的波形斜率和预设的波形斜率阈值确定有效反射峰，得到有效反射峰的数量；读取有效反射峰对应的采样点数，并将有效反射峰对应的采样点数和有效反射峰的数量确定为有效反射峰信息。其中，波形斜率阈值可以根据实际情况设置，也可以计算待测试光缆起始位置的波形斜率，起始端的接口反射峰稳定存在于各类DVS端口波形，因此，通过计算起始端的有效反射峰对应的第一波形斜率，以第一波形斜率为基准设置波形斜率阈值，可以筛选出有效反射峰。在一种可行的实施方式中，根据预设的频率幅值阈值对DVS端口波形图进行筛选；将频率幅值大于频率幅值阈值的反射峰，确定为有效反射峰，得到有效反射峰的数量；读取有效反射峰对应的采样点数，并将有效反射峰对应的采样点数和有效反射峰的数量确定为有效反射峰信息。其中，频率幅值阈值可以根据实际情况设置，也可以读取待测试光缆起始位置的频率幅值阈值，起始端的接口反射峰稳定存在于各类DVS端口波形，因此，通过起始端的有效反射峰对应的第一频率幅值，以第一频率幅值为基准设置频率幅值阈值，可以筛选出有效反射峰。803、根据有效反射峰信息划分DVS端口波形图，得到目标波形区域。基于DVS的光纤长度确定系统根据有效反射峰信息划分DVS端口波形图；当有效反射峰的数量为一个时，将有效反射峰对应的采样点数和DVS端口波形图的末端采样点数之间的波形区域确定为目标波形区域；当有效反射峰的数量为两个时，将两个有效反射峰之间的波形区域确定为目标波形区域；当有效反射峰的数量大于两个时，将最后三个有效反射峰之间的波形区域确定为目标波形区域。804、根据有效反射峰的数量和目标波形区域确定DVS端口波形。本实施例中，当有效反射峰的数量为一个时，对目标波形区域进行波形分析，得到第一类DVS端口波形，第一类DVS端口波形为未连接光纤的端口波形或光纤长度超量程的端口波形或存在断纤的端口波形；当有效反射峰的数量为两个时，对目标波形区域进行波形分析，得到第二类DVS端口波形，第二类DVS端口波形为单段光纤的端口波形；当有效反射峰的数量大于两个时，对目标波形区域进行波形分析，得到第三类DVS端口波形，第三类DVS端口波形为多段光纤的端口波形或末端接头存在幻峰的端口波形。在一种可行的实施方式中，当有效反射峰的数量大于两个时，对目标波形区域进行波形分析，得到第三类DVS端口波形，第三类DVS端口波形为多段光纤的端口波形或末端接头存在幻峰的端口波形包括：当有效反射峰的数量大于两个时，目标波形区域包括第一波形区域和第二波形区域，第一波形区域为倒数第三个有效反射峰至倒数第二个有效反射峰之间的波形区域，第二波形区域为倒数第二个有效反射峰至倒数第一个有效反射峰之间的波形区域；当第一波形区域和第二波形区域的横坐标长度差在预设范围内，且第二波形区域的波形平滑时，判定DVS端口波形为末端接头存在幻峰的端口波形；当第一波形区域和第二波形区域的波形存在抖动时，判定DVS端口波形为多段光纤的端口波形。805、当DVS端口波形为多段光纤的端口波形或单段光纤的端口波形时，根据倒数第一个有效反射峰对应的采样点数确定待测试光缆的光纤长度。基于DVS的光纤长度确定系统当DVS端口波形为多段光纤的端口波形或单段光纤的端口波形时，根据倒数第一个有效反射峰对应的采样点数确定待测试光缆的光纤长度。806、当DVS端口波形为末端接头存在幻峰的端口波形时，根据倒数第二个有效反射峰对应的采样点数确定待测试光缆的光纤长度。基于DVS的光纤长度确定系统当DVS端口波形为末端接头存在幻峰的端口波形时，根据倒数第二个有效反射峰对应的采样点数确定待测试光缆的光纤长度。本发明实施例中，利用DVS端口波形图通过有效峰筛选和DVS端口波形分类，直接确定光缆的光纤长度，根据光纤长度即可确认所普查的光缆，不需要外接OTDR设备，提高了光缆路由普查的工作效率。上面对本发明实施例中基于DVS的光纤长度确定方法进行了描述，下面对本发明实施例中基于DVS的光纤长度确定装置进行描述，请参阅图9，本发明实施例中基于DVS的光纤长度确定装置一个实施例包括：获取模块901，用于获取待测试光缆的DVS端口波形图，DVS端口波形图以采样点数为横坐标，以采样信号的频率幅值为纵坐标；第一分析模块902，用于对DVS端口波形图进行波形分析，得到有效反射峰信息，有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量；区域划分模块903，用于根据有效反射峰信息划分DVS端口波形图，得到目标波形区域；第二分析模块904，用于根据有效反射峰的数量和目标波形区域确定DVS端口波形；长度确定模块905，用于根据DVS端口波形和有效反射峰对应的采样点数确定待测试光缆的光纤长度。本发明实施例中，利用DVS端口波形图通过有效峰筛选和DVS端口波形分类，直接确定光缆的光纤长度，根据光纤长度即可确认所普查的光缆，不需要外接OTDR设备，提高了光缆路由普查的工作效率。请参阅图10，本发明实施例中基于DVS的光纤长度确定装置的另一个实施例包括：获取模块901，用于获取待测试光缆的DVS端口波形图，DVS端口波形图以采样点数为横坐标，以采样信号的频率幅值为纵坐标；第一分析模块902，用于对DVS端口波形图进行波形分析，得到有效反射峰信息，有效反射峰信息包括每个有效反射峰对应的采样点数和有效反射峰的数量；区域划分模块903，用于根据有效反射峰信息划分DVS端口波形图，得到目标波形区域；第二分析模块904，用于根据有效反射峰的数量和目标波形区域确定DVS端口波形；长度确定模块905，用于根据DVS端口波形和有效反射峰对应的采样点数确定待测试光缆的光纤长度。可选的，获取模块901具体用于：对待测试光缆的每个采样点进行多次采样，得到每个采样点的采样信息，每个采样点的采样信息包括多帧采样信号和对应的采样点数；将每个采样点的多帧采样信号进行傅立叶变换，得到采样信号的频率幅值；将每个采样点的采样点数确定为横坐标，并将对应的频率幅值确定为纵坐标，得到DVS端口波形图可选的，第一分析模块902具体用于：计算DVS端口波形图中每个采样点的波形斜率；根据每个采样点的波形斜率和预设的波形斜率阈值确定有效反射峰，得到有效反射峰的数量；读取有效反射峰对应的采样点数，并将有效反射峰对应的采样点数和有效反射峰的数量确定为有效反射峰信息。可选的，第一分析模块902具体用于：根据预设的频率幅值阈值对DVS端口波形图进行筛选；将频率幅值大于频率幅值阈值的反射峰，确定为有效反射峰，得到有效反射峰的数量；读取有效反射峰对应的采样点数，并将有效反射峰对应的采样点数和有效反射峰的数量确定为有效反射峰信息。可选的，区域划分903具体用于：根据有效反射峰信息划分DVS端口波形图；当有效反射峰的数量为一个时，将有效反射峰对应的采样点数和DVS端口波形图的末端采样点数之间的波形区域确定为目标波形区域；当有效反射峰的数量为两个时，将两个有效反射峰之间的波形区域确定为目标波形区域；当有效反射峰的数量大于两个时，将最后三个有效反射峰之间的波形区域确定为目标波形区域。可选的，第二分析模块904包括：第一波形单元9041，用于当有效反射峰的数量为一个时，对目标波形区域进行波形分析，得到第一类DVS端口波形，第一类DVS端口波形为未连接光纤的端口波形或光纤长度超量程的端口波形或存在断纤的端口波形；第二波形单元9042，用于当有效反射峰的数量为两个时，对目标波形区域进行波形分析，得到第二类DVS端口波形，第二类DVS端口波形为单段光纤的端口波形；第三波形单元9043，用于当有效反射峰的数量大于两个时，对目标波形区域进行波形分析，得到第三类DVS端口波形，第三类DVS端口波形为多段光纤的端口波形或末端接头存在幻峰的端口波形。可选的，第三波形单元9043具体用于：当有效反射峰的数量大于两个时，目标波形区域包括第一波形区域和第二波形区域，第一波形区域为倒数第三个有效反射峰至倒数第二个有效反射峰之间的波形区域，第二波形区域为倒数第二个有效反射峰至倒数第一个有效反射峰之间的波形区域；当第一波形区域和第二波形区域的横坐标长度差在预设范围内，且第二波形区域的波形平滑时，判定DVS端口波形为末端接头存在幻峰的端口波形；当第一波形区域和第二波形区域的波形存在抖动时，判定DVS端口波形为多段光纤的端口波形。可选的，长度确定模块905具体用于当DVS端口波形为多段光纤的端口波形或单段光纤的端口波形时，根据倒数第一个有效反射峰对应的采样点数确定待测试光缆的光纤长度；当DVS端口波形为末端接头存在幻峰的端口波形时，根据倒数第二个有效反射峰对应的采样点数确定待测试光缆的光纤长度。本发明实施例中，利用DVS端口波形图通过有效峰筛选和DVS端口波形分类，直接确定光缆的光纤长度，根据光纤长度即可确认所普查的光缆，不需要外接OTDR设备，提高了光缆路由普查的工作效率。上面图9和图10从模块化功能实体的角度对本发明实施例中的基于DVS的光纤长度确定装置进行详细描述，下面参照图11从硬件处理的角度对本发明实施例中基于DVS的光纤长度确定系统进行详细描述。基于DVS的光纤长度确定系统包括：窄线宽激光器1101，用于发射窄线宽激光；脉冲调制器1102，用于将窄线宽激光调制成脉冲光信号；光放大器1103，用于对脉冲光信号进行放大；环形器1104，用于将放大的脉冲光信号和待测试光缆的后向瑞利散射光信号隔离；光电探测器1105，用于探测待测试光缆的后向瑞利散射光信号；数据采集卡1106，用于对后向瑞利散射光信号进行数据采集，并将采集数据发送至处理单元1107进行处理；处理单元1107包括存储器110720和至少一个处理器110710，存储器中存储有指令；至少一个处理器调用存储器中的指令，以使得处理单元执行上述的基于DVS的光纤长度确定方法。窄线宽激光器1101的一端连接于脉冲调制器1102的一端，窄线宽激光器1101将窄线宽激光发射至脉冲调制器1102进行调制；脉冲调制器1102的另一端于光放大器1103的一端连接，脉冲调制器1102将调制后的脉冲光信号发送至光放大器1103进行信号放大；光放大器1103的另一端与环形器1104的第一端口连接，将放大的脉冲光信号发射至环形器1104；环形器1104的第二端口与待测试光缆1108连接，将放大的脉冲光信号发射至待测试光缆，放大的脉冲光信号在待测试光缆的光纤中传播并生成后向瑞利散射光信号，后向瑞利散射光信号通过环形器1104的第三端口发送至光电探测器1105；光电探测器1105的一端与环形器1104的第三端口连接，光电探测器1105的另一端与数据采集卡1106连接；数据采集卡1106对光电探测器1105探测的后向瑞利散射光信号进行采样，并将采集数据发送至处理单元1107进行处理。图12是本发明实施例提供的一种处理单元的结构示意图，该处理单元1107可因配置或性能不同而产生比较大的差异，可以包括一个或一个以上处理器110710和存储器110720，一个或一个以上存储应用程序110733或数据110732的存储介质110730。其中，存储器110720和存储介质110730可以是短暂存储或持久存储。存储在存储介质110730的程序可以包括一个或一个以上模块，每个模块可以包括对处理单元1107中的一系列指令操作。更进一步地，处理器110710可以设置为与存储介质110730通信，在处理单元1107上执行存储介质110730中的一系列指令操作。处理单元1107还可以包括一个或一个以上电源110740，一个或一个以上有线或无线网络接口110750，一个或一个以上输入输出接口110760，和/或，一个或一个以上操作系统110731，例如Windows Serve，Mac OS X，Unix，Linux，FreeBSD等等。本领域技术人员可以理解，图12示出的处理单元结构并不构成对处理单元的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件布置。本发明还提供一种计算机可读存储介质，该计算机可读存储介质可以为非易失性计算机可读存储介质，该计算机可读存储介质也可以为易失性计算机可读存储介质，计算机可读存储介质中存储有指令，当指令在计算机上运行时，使得计算机执行基于DVS的光纤长度确定方法的步骤。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的系统，装置和单元的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上所述，以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
