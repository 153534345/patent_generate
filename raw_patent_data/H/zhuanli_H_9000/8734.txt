标题title
视频缓存方法、装置、电子设备及存储介质
摘要abst
本发明实施例涉及一种视频缓存方法、装置、电子设备及存储介质，包括：在对目标视频块进行缓存之前，确定目标用户对目标视频块触发seek行为的概率，所述目标视频块为客户端当前播放的目标视频中，位于当前播放点之后且未缓存过的任一视频块；基于目标用户对目标视频块触发seek行为的概率以及当前的视频缓存量确定当前是否满足预设的暂停缓存条件；若满足，则在等待预设时长后返回执行基于所述目标用户对所述目标视频块触发seek行为的概率以及当前的视频缓存量确定当前是否满足预设的暂停缓存条件的步骤；若不满足，则对目标视频块进行缓存。由此，可以有效避免因用户的seek行为对应的视频块已被缓存而导致的带宽浪费，从而实现节省带宽。
权利要求书clms
1.一种视频缓存方法，其特征在于，所述方法包括：在客户端对目标视频块进行缓存之前，确定目标用户对所述目标视频块触发seek行为的概率，所述目标视频块为客户端当前播放的目标视频中，位于当前播放点之后且未缓存过的任一视频块；基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件；若满足，则在等待预设时长后返回执行所述基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件的步骤；若不满足，则控制所述客户端对所述目标视频块进行缓存。2.根据权利要求1所述的方法，其特征在于，所述确定所述目标用户对所述目标视频块触发seek行为的概率，包括：确定下述一项或几项观看行为数据：目标用户在预设历史时间段内的观看行为数据、目标用户对当前播放的视频的观看行为数据、多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据；根据所确定的一项或几项所述观看行为数据，确定所述目标用户对所述目标视频块触发seek行为的概率。3.根据权利要求2所述的方法，其特征在于，所述根据所确定的一项或几项所述观看行为数据，确定所述目标用户对所述目标视频块触发seek行为的概率，包括：基于所述目标用户在预设历史时间段内的观看行为数据确定第一概率值；和/或，基于所述目标用户对当前播放的视频的观看行为数据确定第二概率值；和/或，基于所述多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据确定第三概率值；根据所述第一概率值和/或第二概率值和/或第三概率值，确定所述目标用户对所述目标视频块触发seek行为的概率。4.根据权利要求1所述的方法，其特征在于，所述基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件，包括：基于所述目标用户对所述目标视频块触发seek行为的概率确定所述目标视频块对应的预测缓存量；将所述目标视频块对应的预测缓存量与所述客户端对所述目标视频的当前缓存量进行比较；若比较出所述客户端对所述目标视频的当前缓存量大于所述目标视频块对应的预测缓存量，则确定当前满足预设的暂停缓存条件；若比较出所述客户端对所述目标视频的当前缓存量小于或者等于所述目标视频块对应的预测缓存量，则确定当前不满足预设的暂停缓存条件。5.根据权利要求4所述的方法，其特征在于，所述基于所述目标用户对所述目标视频块触发seek行为的概率确定所述目标视频块对应的预测缓存量，包括：将所述目标视频块的长度除以当前播放码率，得到所述目标视频块的播放耗时；将所述目标视频块的长度除以当前下载速度，得到所述目标视频块的下载耗时；利用预设公式对所述目标视频块的播放耗时、所述目标用户对所述目标视频块触发seek行为的概率，以及所述目标视频块的下载耗时进行运算，得到所述目标视频块对应的预测缓存量，所述预设公式为：Cn＝Cd*+T1+C0；其中，Cn为所述目标视频块对应的预测缓存量，Cd为所述目标视频块的播放耗时，P为所述目标用户对所述目标视频块触发seek行为的概率，T1为所述目标视频块的下载耗时，C0为预设的常数值。6.根据权利要求3所述的方法，其特征在于，所述基于所述目标用户在预设历史时间段内的视频观看行为数据确定第一概率值，包括：基于所述目标用户在预设历史时间段内的视频观看行为数据，确定所述目标用户在预设历史时间段内触发seek行为的第一视频总数量以及观看的第二视频总数量；将所述目标用户在预设历史时间段内触发seek行为的第一视频总数量除以所述第二视频总数量，得到所述第一概率值。7.根据权利要求3所述的方法，其特征在于，所述基于所述目标用户对当前播放的视频的观看行为数据确定第二概率值，包括：基于所述目标用户对当前播放的视频的观看行为数据，确定所述当前播放的视频中发生seek的第一视频块总数量以及当前播放的视频中的第二视频块总数量；将所述当前播放的视频中发生seek的第一视频块总数量除以所述当前播放的视频中的第二视频块总数量，得到第二概率值。8.根据权利要求3所述的方法，其特征在于，所述基于所述多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据确定第三概率值，包括：基于所述多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据确定多个用户在所述预设历史时间段内对所述目标视频块触发seek行为的第一总次数以及观看目标视频块的总次数；将所述多个用户在所述预设历史时间段内对所述目标视频块触发seek行为的第一总次数除以所述观看目标视频块的总次数，得到第三概率值。9.根据权利要求1所述的方法，其特征在于，所述方法还包括：确定当前的下载方式是否为内容分发网络CDN下载；若是，则执行所述在对目标视频块进行缓存之前，确定目标用户对所述目标视频块触发seek行为的概率的步骤。10.一种视频缓存装置，其特征在于，所述装置包括：确定模块，用于在客户端对目标视频块进行缓存之前，确定目标用户对所述目标视频块触发seek行为的概率，所述目标视频块为客户端当前播放的目标视频中，位于当前播放点之后且未缓存过的任一视频块；判断模块，用于基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件；执行模块，用于若当前满足预设的暂停缓存条件，则在等待预设时长后返回执行所述基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件的步骤；缓存模块，用于若当前不满足预设的暂停缓存条件，则对所述目标视频块进行缓存。11.一种电子设备，其特征在于，包括：处理器和存储器，所述处理器用于执行所述存储器中存储的一种视频缓存程序，以实现权利要求1～9中任一项所述的视频缓存方法。12.一种存储介质，其特征在于，所述存储介质存储有一个或者多个程序，所述一个或者多个程序可被一个或者多个处理器执行，以实现权利要求1～9中任一项所述的视频缓存方法。
说明书desc
技术领域本发明实施例涉及视频处理技术领域，尤其涉及一种视频缓存方法、装置、电子设备及存储介质。背景技术目前，在视频播放场景中，为了使得视频的播放更加流畅，通常采取边播放边缓存的方式。然而，在视频播放过程中，用户有可能因为一些原因，例如对某段视频内容不感兴趣、观看时间紧张等原因而对视频触发seek行为。这里，seek行为是指用户在观看视频时，将视频的播放进度从当前播放位置跳转到后面的播放位置。由此可见，在视频播放过程中，很容易出现客户端已缓存的视频被seek，从而浪费下载带宽的技术问题，尤其是在客户端以CDN方式缓存视频时，将由于下载费用的产生而使得浪费下载带宽这一技术问题更加凸显。发明内容鉴于此，为解决上述客户端已缓存的视频被seek，从而浪费下载带宽的技术问题，本发明实施例提供一种视频缓存方法、装置、电子设备及存储介质。第一方面，本发明实施例提供一种视频缓存方法，包括：在客户端对目标视频块进行缓存之前，确定目标用户对所述目标视频块触发seek行为的概率，所述目标视频块为客户端当前播放的目标视频中，位于当前播放点之后且未缓存过的任一视频块；基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件；若满足，则在等待预设时长后返回执行所述基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件的步骤；若不满足，则控制所述客户端对所述目标视频块进行缓存。在一个可能的实施方式中，所述确定所述目标用户对目标视频块触发seek行为的概率，包括：确定下述一项或几项观看行为数据：目标用户在预设历史时间段内的观看行为数据、目标用户对当前播放的视频的观看行为数据、多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据；根据所确定的一项或几项所述观看行为数据，确定所述目标用户对所述目标视频块触发seek行为的概率。在一个可能的实施方式中，所述根据所确定的一项或几项所述观看行为数据，确定所述目标用户对所述目标视频块触发seek行为的概率，包括：基于所述目标用户在预设历史时间段内的观看行为数据确定第一概率值；和/或，基于所述目标用户对当前播放的视频的观看行为数据确定第二概率值；和/或，基于所述多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据确定第三概率值；根据所述第一概率值和/或第二概率值和/或第三概率值，确定所述目标用户对所述目标视频块触发seek行为的概率。在一个可能的实施方式中，所述基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件，包括：基于所述目标用户对所述目标视频块触发seek行为的概率确定所述目标视频块对应的预测缓存量；将所述目标视频块对应的预测缓存量与所述客户端对所述目标视频的当前缓存量进行比较；若比较出所述客户端对所述目标视频的当前缓存量大于所述目标视频块对应的预测缓存量，则确定当前满足预设的暂停缓存条件；若比较出所述客户端对所述目标视频的当前缓存量小于或者等于所述目标视频块对应的预测缓存量，则确定当前不满足预设的暂停缓存条件。在一个可能的实施方式中，所述基于所述目标用户对所述目标视频块触发seek行为的概率确定所述目标视频块对应的预测缓存量，包括：将所述目标视频块的长度除以当前播放码率，得到所述目标视频块的播放耗时；将所述目标视频块的长度除以当前下载速度，得到所述目标视频块的下载耗时；利用预设公式对所述目标视频块的播放耗时、所述目标用户对所述目标视频块触发seek行为的概率，以及所述目标视频块的下载耗时进行运算，得到所述目标视频块对应的预测缓存量，所述预设公式为：Cn＝Cd*+T1+C0；其中，Cn为所述目标视频块对应的预测缓存量，Cd为所述目标视频块的播放耗时，P为所述目标用户对所述目标视频块触发seek行为的概率，T1为所述目标视频块的下载耗时，C0为预设的常数值。在一个可能的实施方式中，所述基于所述目标用户在预设历史时间段内的视频观看行为数据确定第一概率值，包括：基于所述目标用户在预设历史时间段内的视频观看行为数据，确定所述目标用户在预设历史时间段内触发seek行为的第一视频总数量以及观看的第二视频总数量；将所述目标用户在预设历史时间段内触发seek行为的第一视频总数量除以所述第二视频总数量，得到所述第一概率值。在一个可能的实施方式中，所述基于所述目标用户对当前播放的视频的观看行为数据确定第二概率值，包括：基于所述目标用户对当前播放的视频的观看行为数据，确定所述当前播放的视频中发生seek的第一视频块总数量以及当前播放的视频中的第二视频块总数量；将所述当前播放的视频中发生seek的第一视频块总数量除以所述当前播放的视频中的第二视频块总数量，得到第二概率值。在一个可能的实施方式中，所述基于所述多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据确定第三概率值，包括：基于所述多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据确定多个用户在所述预设历史时间段内对所述目标视频块触发seek行为的第一总次数以及观看目标视频块的总次数；将所述多个用户在所述预设历史时间段内对所述目标视频块触发seek行为的第一总次数除以所述观看目标视频块的总次数，得到第三概率值。在一个可能的实施方式中，所述方法还包括：确定当前的下载方式是否为内容分发网络CDN下载；若是，则执行所述在对目标视频块进行缓存之前，确定目标用户对所述目标视频块触发seek行为的概率的步骤。第二方面、本发明实施例提供一种视频缓存装置，所述装置包括：确定模块，用于在客户端对目标视频块进行缓存之前，确定目标用户对所述目标视频块触发seek行为的概率，所述目标视频块为客户端当前播放的目标视频中，位于当前播放点之后且未缓存过的任一视频块；判断模块，用于基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件；执行模块，用于若当前满足预设的暂停缓存条件，则在等待预设时长后返回执行所述基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件的步骤；缓存模块，用于若当前不满足预设的暂停缓存条件，则对所述目标视频块进行缓存。在一个可能的实施方式中，所述确定模块包括：第一确定单元，用于确定下述一项或几项观看行为数据：目标用户在预设历史时间段内的观看行为数据、目标用户对当前播放的视频的观看行为数据、多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据；第二确定单元，用于根据所确定的一项或几项所述观看行为数据，确定所述目标用户对所述目标视频块触发seek行为的概率。在一个可能的实施方式中，所述第二确定单元包括：第一子单元，用于基于所述目标用户在预设历史时间段内的观看行为数据确定第一概率值；和/或，第二子单元，用于基于所述目标用户对当前播放的视频的观看行为数据确定第二概率值；和/或，第三子单元，用于基于所述多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据确定第三概率值；确定子单元，用于根据所述第一概率值和/或第二概率值和/或第三概率值，确定所述目标用户对所述目标视频块触发seek行为的概率。在一个可能的实施方式中，所述判断模块包括：第三确定单元，用于基于所述目标用户对所述目标视频块触发seek行为的概率确定所述目标视频块对应的预测缓存量；比较单元，用于将所述目标视频块对应的预测缓存量与所述客户端对所述目标视频的当前缓存量进行比较；第四确定单元，用于若比较出所述客户端对所述目标视频的当前缓存量大于所述目标视频块对应的预测缓存量，则确定当前满足预设的暂停缓存条件；第五确定单元，用于若比较出所述客户端对所述目标视频的当前缓存量小于或者等于所述目标视频块对应的预测缓存量，则确定当前不满足预设的暂停缓存条件。在一个可能的实施方式中，所述第三确定单元具体用于：将所述目标视频块的长度除以当前播放码率，得到所述目标视频块的播放耗时；将所述目标视频块的长度除以当前下载速度，得到所述目标视频块的下载耗时；利用预设公式对所述目标视频块的播放耗时、所述目标用户对所述目标视频块触发seek行为的概率，以及所述目标视频块的下载耗时进行运算，得到所述目标视频块对应的预测缓存量，所述预设公式为：Cn＝Cd*+T1+C0；其中，Cn为所述目标视频块对应的预测缓存量，Cd为所述目标视频块的播放耗时，P为所述目标用户对所述目标视频块触发seek行为的概率，T1为所述目标视频块的下载耗时，C0为预设的常数值。在一个可能的实施方式中，所述第一子单元具体用于：基于所述目标用户在预设历史时间段内的视频观看行为数据，确定所述目标用户在预设历史时间段内触发seek行为的第一视频总数量以及观看的第二视频总数量；将所述目标用户在预设历史时间段内触发seek行为的第一视频总数量除以所述第二视频总数量，得到所述第一概率值。在一个可能的实施方式中，所述第二子单元具体用于：基于所述目标用户对当前播放的视频的观看行为数据，确定所述当前播放的视频中发生seek的第一视频块总数量以及当前播放的视频中的第二视频块总数量；将所述当前播放的视频中发生seek的第一视频块总数量除以所述当前播放的视频中的第二视频块总数量，得到第二概率值。在一个可能的实施方式中，所述第三子单元具体用于：基于所述多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据确定多个用户在所述预设历史时间段内对所述目标视频块触发seek行为的第一总次数以及观看目标视频块的总次数；将所述多个用户在所述预设历史时间段内对所述目标视频块触发seek行为的第一总次数除以所述观看目标视频块的总次数，得到第三概率值。在一个可能的实施方式中，所述装置还包括：下载方式确定模块，用于确定当前的下载方式是否为CDN下载；概率确定模块，用于若确定当前的下载方式是CDN下载，则执行所述在对目标视频块进行缓存之前，确定目标用户对所述目标视频块触发seek行为的概率的步骤。第三方面、本发明实施例提供一种电子设备，包括：处理器和存储器，所述处理器用于执行所述存储器中存储的一种视频缓存程序，以实现第一方面中任一项所述的视频缓存方法。第四方面、本发明实施例提供一种存储介质，所述存储介质存储有一个或者多个程序，所述一个或者多个程序可被一个或者多个处理器执行，以实现第一方面中任一项所述的视频缓存方法。本发明实施例提供的技术方案，通过在对目标视频块进行缓存之前，确定目标用户对目标视频块触发seek行为的概率，上述目标视频块为当前播放的视频中，位于当前播放点之后的任一未缓存过的视频块，之后，基于目标用户对目标视频块触发seek行为的概率以及客户端对目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件；若满足，则在等待预设时长后返回执行上述基于目标用户对目标视频块触发seek行为的概率以及客户端对目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件的步骤；若不满足，则对目标视频块进行缓存，由于根据用户对待缓存的目标视频块触发seek行为的概率来确定当前是否满足预设的暂停缓存条件，因此实现了在缓存目标视频块之前可根据目标用户对目标视频块触发seek行为的概率，来控制视频缓存进度，这能够有效避免因用户的seek行为对应的视频块已被缓存而导致的带宽浪费，从而实现节省带宽。附图说明图1为本发明实施例示出的一种应用场景示意图；图2为本发明实施例提供的一种视频缓存方法的实施例流程图；图3为本发明实施例提供的另一种视频缓存方法的实施例流程图；图4为本发明实施例提供的视频文件分块图；图5为本发明实施例提供的又一种视频缓存方法的实施例流程图；图6为本发明实施例提供的再一种视频缓存方法的实施例流程图；图7为本发明实施例提供的一种视频缓存装置的实施例框图；图8为本发明实施例提供的一种电子设备的结构示意图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。参见图1，为本发明实施例示出的一种应用场景示意图。图1所示应用场景中包括：设备101、数据存储平台102，以及服务器103。其中，设备101、数据存储平台102，以及服务器103之间通过网络通信连接。设备101，可以是支持网络连接从而提供各种网络服务的硬件设备或软件。当设备101为硬件时，其可以是支持具有显示屏的各种电子设备，包括但不限于智能手机、平板电脑、膝上型便携计算机、台式计算机等，图1中仅以台式计算机为例。当设备101为软件时，可以安装在上述所列举的电子设备中。在本发明实施例中，设备101可以通过安装相应的视频播放应用程序来播放视频。数据存储平台102可以采用一台服务器来实现，也可以采用多台服务器组成服务器集群的形式来实现，本发明实施例对此不做限制。本发明实施例中，数据存储平台102可用于收集并存储设备播放视频的相关数据。这里，数据存储平台102收集的数据包括但不限于：用户在预设历史时间段内的观看行为数据、用户对当前播放的视频的观看行为数据等。服务器103为设备101对应的服务器，服务器103可以采用一台服务器来实现，也可以采用多台服务器组成服务器集群的形式来实现，本发明实施例对此不做限制。基于图1所示应用场景，用户可通过设备101观看视频，也即，设备101可播放视频。现有技术中，为了确保视频播放的流畅性，设备101通常对当前播放的视频采取边播放边缓存的方式。其中，设备101将以视频块的形式对当前播放的视频进行缓存。然而，在设备101播放视频的过程中，用户有可能因为一些原因，例如对某段视频内容不感兴趣、观看时间紧张等原因而对设备101当前播放的视频触发seek行为。若该seek行为对应的视频块已经下载完成，则产生了带宽浪费。举个例子，假设用户在设备101播放视频的过程中触发了N次seek行为，并假设每次seek行为对应的视频时长为s秒，以及假设该视频的平均码率是3Mbps，分享比为p服务器下载的流量/设备101从P2P服务器和CDN服务器上下载的总流量)。那么，用户触发的N次seek行为将导致共计N*s*3兆流量的浪费。进一步的，当触发seek行为的用户数量较多时，累计起来将浪费大量带宽。对此，本发明实施例提供一种视频缓存方法，以有效避免客户端在视频播放过程中，因用户的seek行为所对应的视频块已被缓存而导致浪费下载带宽的技术问题。下面结合附图以具体实施例对本发明提供的视频缓存方法做进一步的解释说明，实施例并不构成对本发明实施例的限定。参见图2，为本发明实施例提供的一种视频缓存方法的实施例流程图。作为一个实施例，图2所示流程可应用于服务器，例如图1所示应用场景中的服务器103，如图2所示，该流程可包括以下步骤：步骤201、在客户端对目标视频块进行缓存之前，确定目标用户对目标视频块触发seek行为的概率，上述目标视频块为客户端当前播放的目标视频中，位于当前播放点之后且未缓存过的任一视频块。上述目标用户可以是当前通过电子设备观看视频的用户，可理解为电子设备中视频播放应用程序的登录用户。由上述描述可知，设备101在播放视频时，可以视频块为粒度对当前播放的视频进行缓存，也即，设备101在播放视频的过程中，每缓存完一个视频块，再继续对下一视频块进行缓存。如图4所示，为本发明实施例提供的视频文件分块图。基于此，本发明实施例中，以视频块为粒度执行本发明实施例提供的视频缓存方法。上述目标视频块是指设备101当前播放的视频中，位于当前播放点之后，且未缓存过的任一视频块。本发明实施例中，设备101在对目标视频块进行缓存之前，可首先将该目标视频块的相关信息发送至服务器103，以由服务器103来确定目标用户对目标视频块触发seek行为的概率。可以理解的是，这里目标用户对目标视频块触发seek行为的概率是一个预测值，并非真实值。在一实施例中，参见图3，确定目标用户对目标视频块触发seek行为的概率可包括以下步骤：步骤301、确定下述一项或几项观看行为数据：目标用户在预设历史时间段内的视频观看行为数据、目标用户对当前播放视频的观看行为数据、多个用户在预设历史时间段内对目标视频块的观看行为数据。上述预设历史时间段可以是当天之前的一周，也可以是当天之前的一个月，本发明实施例对此不做限制。由上述描述可知，数据存储平台102可收集设备在播放视频时相关的行为数据，因此，服务器103可从数据存储平台102中获取上述一项或几项观看行为数据。步骤302、根据上述所确定的一项或几项观看行为数据来确定目标用户对目标视频块触发seek行为的概率。在一实施例中，可针对上述所确定的每一项观看行为数据，从该观看行为数据的维度确定一个目标用户对目标视频块触发seek行为的概率，之后，根据确定出的一个或多个维度的概率，来确定最终的目标用户对目标视频块触发seek行为的概率。具体的，在上述步骤301中确定有目标用户在预设历史时间段内的视频观看行为数据的情况下，可通过以下方式来实现基于目标用户在预设历史时间段内的视频观看行为数据确定第一概率值：基于上述目标用户在预设历史时间段内的视频观看行为数据，确定目标用户在预设历史时间段内触发seek行为的第一视频总数量以及观看的第二视频总数量，将上述目标用户在预设历史时间段内触发seek行为的第一视频总数量除以上述第二视频总数量，得到第一概率值。可选地，在上述步骤301中确定有目标用户对当前播放视频的观看行为数据的情况下，可通过以下方式来实现基于目标用户对当前播放的视频的观看行为数据确定第二概率值：基于目标用户对当前播放的视频的观看行为数据，确定当前播放的视频中发生seek的第一视频块总数量以及当前播放的视频中的第二视频块总数量，将上述当前播放的视频中发生seek的第一视频块总数量除以上述当前播放的视频中的第二视频块的总数量，得到第二概率值。可选地，在上述步骤301中确定有多个用户在预设历史时间段内对目标视频块的观看行为数据的情况下，可通过以下方式来实现基于上述多个用户在上述预设历史时间段内对目标视频块的观看行为数据确定第三概率值：基于上述多个用户在上述预设历史时间段内对上述目标视频块被触发seek行为的第一总次数以及观看目标视频块的总次数，将上述多个用户在上述预设历史时间段内对上述目标视频块触发seek行为的第一总次数除以上述观看目标视频块的总次数，得到第三概率值。按照上述描述，可根据上述第一概率值、第二概率值以及第三概率值中的任一者、任两者，或者三者来确定最终的目标用户对目标视频块触发seek行为的概率。其中，当根据上述第一概率值、第二概率值以及第三概率值中的任两者，或者三者来确定最终的目标用户对目标视频块触发seek行为的概率时，可将该两者或三者进行加权求和，得到最终的目标用户对目标视频块触发seek行为的概率。举例来说，假设第一概率值为p1，第一概率值对应的权重为w1，第二概率值为p2，第二概率值对应的权重为w2，第三概率值为p3，第三概率值对应的权重为w3。继续假设根据上述三个概率值共同来确定目标用户对目标视频块触发seek行为的概率，那么，可按照下述式对第一概率值、第二概率值和第三概率值进行加权计算，得到目标用户对目标视频块触发seek行为的概率p。p＝p1*w1+p2*w2+p3*w3式步骤202、基于上述目标用户对上述目标视频块触发seek行为的概率，以及上述客户端对上述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件，若满足，则执行步骤203；若不满足，则执行步骤204。步骤203、在等待预设时长后返回执行步骤202。步骤204、控制上述客户端对目标视频块进行缓存。以下对步骤202～步骤204进行统一说明：在一实施例中，为避免已缓存的视频块因用户触发seek行为而导致带宽浪费，在下载目标视频块之前，首先基于目标用户对目标视频块触发seek行为的概率，以及客户端对目标视频的当前缓存量来确定当前是否满足预设的暂停缓存条件；若满足该暂停缓存条件，则暂停下载该目标视频块，并在等待预设时长之后再次判断是否满足这一暂停缓存条件；若不满足上述暂停缓存条件，则对目标视频块进行缓存。其中，上述预设时长可为1s或者5s，本发明对此不做限制。其中，可通过如图5所示流程图来实现基于目标用户对目标视频块触发seek行为的概率以及当前的视频缓存量确定当前是否满足预设的暂停缓存条件。如图5所示，包括以下步骤：步骤501、将目标视频块的长度除以当前播放码率，得到目标视频块的播放耗时。步骤502、将目标视频块的长度除以当前下载速度，得到目标视频块的下载耗时。步骤503、利用预设公式对目标视频块的播放耗时、目标用户对目标视频块触发seek行为的概率，以及目标视频块的下载耗时进行运算，得到目标视频块对应的预测缓存量。以下对步骤501～步骤503进行统一说明：如图4所示，每一视频块对应有相应的长度，将目标视频块的长度除以当前播放码率，即可得到播放该目标视频块的播放耗时。将目标视频块的长度除以当前下载速度，可得到下载该目标视频块的下载耗时。之后，利用下述式所示的预设公式对目标视频块被触发seek行为的概率、目标视频块的播放耗时，以及目标视频块的下载耗时进行运算，可得到目标视频块对应的预测缓存量。Cn＝Cd*+T1+C0式上述式中，Cn为目标视频块对应的预测缓存量，Cd为目标视频块的播放耗时，P为目标用户对目标视频块触发seek行为的概率，T1为目标视频块的下载耗时，C0为预设的常数值。在此需要说明的是，C0为避免卡顿设置的满足起播的常数值，该常数值可以是1s、2s或者4s，本发明对此不做限制。步骤504、将上述目标视频块对应的预测缓存量与客户端对目标视频的当前缓存量进行比较，若比较出客户端对目标视频的当前缓存量大于上述目标视频块对应的预测缓存量，则执行步骤505；若比较出客户端对目标视频的当前缓存量小于或者等于上述目标视频块对应的预测缓存量，则执行步骤506。步骤505、确定当前满足预设的暂停缓存条件。步骤506、确定当前不满足预设的暂停缓存条件。以下对步骤504～步骤506进行统一说明：在一实施例中，将客户端对目标视频的当前缓存量与上述获取的目标视频块的预测缓存量进行比较，若客户端对目标视频的当前缓存量大于该目标视频块的预测缓存量，则意味着当前的缓存量足够用户观看，因此可确定当前满足预设的暂停缓存条件；若客户端对目标视频的当前缓存量小于或者等于该目标视频块的预测缓存量，则意味着当前的缓存量不够用户观看，因此可确定当前不满足预设的暂停缓存条件。举个例子，在用户播放目标视频的过程中，假设在t时刻时正在播放第二个视频块，此时待缓存的目标视频块则为第三个视频块。假设按照上述描述的方法确定此时暂停对目标视频块进行缓存，并假设用户将目标视频的播放进度直接从当前播放点跳转到第四个视频块。由此可见，seek行为对应的第三个视频块并未被缓存，如此则避免了因用户触发seek行为而导致的带宽浪费。本发明实施例提供的技术方案，通过在对目标视频块进行缓存之前，确定目标用户对目标视频块触发seek行为的概率，上述目标视频块为当前播放的视频中，位于当前播放点之后的任一未缓存过的视频块，之后，基于目标用户对目标视频块触发seek行为的概率以及客户端对目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件；若满足，则在等待预设时长后返回执行上述基于目标用户对目标视频块触发seek行为的概率以及客户端对目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件的步骤；若不满足，则对目标视频块进行缓存，由于根据用户对待缓存的目标视频块触发seek行为的概率来确定当前是否满足预设的暂停缓存条件，因此实现了在缓存目标视频块之前可根据目标用户对目标视频块触发seek行为的概率，来控制视频缓存进度，这能够有效避免因用户的seek行为对应的视频块已被缓存而导致的带宽浪费，从而实现节省带宽。参见图6，为发明实施例提供的再一种视频缓存方法的实施例流程图。该图6所示流程在上述图5所示流程的基础上，可包括以下步骤：步骤601、确定当前的下载方式是否为CDN下载，若是，则执行步骤602；若否，则结束流程。由上述描述可知，若客户端以CDN方式缓存视频，将由于下载费用的产生而使得浪费下载带宽的技术问题更加凸显，因此，在一实施例中，当客户端采用CDN方式缓存视频时，执行本发明实施例提供的视频缓存方法。也即，确定当前的下载方式是否为CDN下载，若是，则继续执行步骤602；若否，则结束流程。步骤602、在客户端对目标视频块进行缓存之前，确定目标用户对目标视频块触发seek行为的概率，目标视频块为客户端当前播放的目标视频中，位于当前播放点之后且未缓存过的任一视频块。步骤603、基于目标用户对目标视频块触发seek行为的概率以及客户端对目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件，若满足，则执行步骤604；若不满足，执行步骤605。步骤604、在等待预设时长后返回执行步骤603。步骤605、对目标视频块进行缓存。步骤602～步骤605的详细描述可参见上述步骤201～步骤204中的说明，此处不再赘述。本发明实施例提供的技术方案，通过确定当前的下载方式是否为CDN下载，若是，则确定目标用户对目标视频块触发seek行为的概率，目标视频块为客户端当前播放的目标视频中，位于当前播放点之后且未缓存过的任一视频块；之后，可基于目标用户对目标视频块触发seek行为的概率以及客户端对目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件，若满足，则在等待预设时长后返回执行上述基于目标用户对目标视频块触发seek行为的概率以及客户端对目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件的步骤；若不满足，则对目标视频块进行缓存。由于若客户端以CDN方式缓存视频，将由于下载费用的产生而使得浪费下载带宽的技术问题更加凸显，因此，在确定当前下载方式为CDN下载时，根据用户对待缓存的目标视频块触发seek行为的概率来确定当前是否满足预设的暂停缓存条件，实现了在缓存目标视频块之前可根据目标用户对目标视频块触发seek行为的概率，来控制视频缓存进度，这能够有效避免因用户的seek行为对应的视频块已被缓存而导致的带宽浪费，从而实现节省带宽。参见图7，为本发明实施例提供的一种视频缓存装置的实施例框图。如图7所示，该装置包括：确定模块71，用于在客户端对目标视频块进行缓存之前，确定目标用户对目标视频块触发seek行为的概率，所述目标视频块为客户端当前播放的目标视频中，位于当前播放点之后且未缓存过的任一视频块；判断模块72，用于基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件；执行模块73，用于若当前满足预设的暂停缓存条件，则在等待预设时长后返回执行所述基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件的步骤；缓存模块74，用于若当前不满足预设的暂停缓存条件，则对所述目标视频块进行缓存。在一个可能的实施方式中，所述确定模块71包括：第一确定单元，用于确定下述一项或几项观看行为数据：目标用户在预设历史时间段内的观看行为数据、目标用户对当前播放的视频的观看行为数据、多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据；第二确定单元，用于根据所确定的一项或几项所述观看行为数据，确定所述目标用户对所述目标视频块触发seek行为的概率。在一个可能的实施方式中，所述第二确定单元包括：第一子单元，用于基于所述目标用户在预设历史时间段内的观看行为数据确定第一概率值；和/或，第二子单元，用于基于所述目标用户对当前播放的视频的观看行为数据确定第二概率值；和/或，第三子单元，用于基于所述多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据确定第三概率值；确定子单元，用于根据所述第一概率值和/或第二概率值和/或第三概率值，确定所述目标用户对所述目标视频块触发seek行为的概率。在一个可能的实施方式中，所述判断模块72包括：第三确定单元，用于基于所述目标用户对所述目标视频块触发seek行为的概率确定所述目标视频块对应的预测缓存量；比较单元，用于将所述目标视频块对应的预测缓存量与所述客户端对所述目标视频的当前缓存量进行比较；第四确定单元，用于若比较出所述客户端对所述目标视频的当前缓存量大于所述目标视频块对应的预测缓存量，则确定当前满足预设的暂停缓存条件；第五确定单元，用于若比较出所述客户端对所述目标视频的当前缓存量小于或者等于所述目标视频块对应的预测缓存量，则确定当前不满足预设的暂停缓存条件。在一个可能的实施方式中，所述第三确定单元具体用于：将所述目标视频块的长度除以当前播放码率，得到所述目标视频块的播放耗时；将所述目标视频块的长度除以当前下载速度，得到所述目标视频块的下载耗时；利用预设公式对所述目标视频块的播放耗时、所述目标用户对所述目标视频块触发seek行为的概率，以及所述目标视频块的下载耗时进行运算，得到所述目标视频块对应的预测缓存量，所述预设公式为：Cn＝Cd*+T1+C0；其中，Cn为所述目标视频块对应的预测缓存量，Cd为所述目标视频块的播放耗时，P为所述目标用户对所述目标视频块触发seek行为的概率，T1为所述目标视频块的下载耗时，C0为预设的常数值。在一个可能的实施方式中，所述第一子单元具体用于：基于所述目标用户在预设历史时间段内的视频观看行为数据，确定所述目标用户在预设历史时间段内触发seek行为的第一视频总数量以及观看的第二视频总数量；将所述目标用户在预设历史时间段内触发seek行为的第一视频总数量除以所述第二视频总数量，得到所述第一概率值。在一个可能的实施方式中，所述第二子单元具体用于：基于所述目标用户对当前播放的视频的观看行为数据，确定所述当前播放的视频中发生seek的第一视频块总数量以及当前播放的视频中的第二视频块总数量；将所述当前播放的视频中发生seek的第一视频块总数量除以所述当前播放的视频中的第二视频块总数量，得到第二概率值。在一个可能的实施方式中，所述第三子单元具体用于：基于所述多个用户在所述预设历史时间段内对所述目标视频块的观看行为数据确定多个用户在所述预设历史时间段内对所述目标视频块触发seek行为的第一总次数以及观看目标视频块的总次数；将所述多个用户在所述预设历史时间段内对所述目标视频块触发seek行为的第一总次数除以所述观看目标视频块的总次数，得到第三概率值。在一个可能的实施方式中，所述装置还包括：下载方式确定模块，用于确定当前的下载方式是否为CDN下载；概率确定模块，用于若确定当前的下载方式是CDN下载，则执行所述在对目标视频块进行缓存之前，确定目标用户对所述目标视频块触发seek行为的概率的步骤。图8为本发明实施例提供的一种的电子设备的结构示意图，图8所示的电子设备800包括：至少一个处理器801、存储器802、至少一个网络接口804和其他用户接口803。电子设备800中的各个组件通过总线系统805耦合在一起。可理解，总线系统805用于实现这些组件之间的连接通信。总线系统805除包括数据总线之外，还包括电源总线、控制总线和状态信号总线。但是为了清楚说明起见，在图8中将各种总线都标为总线系统805。其中，用户接口803可以包括显示器、键盘或者点击设备、触感板或者触摸屏等)。可以理解，本发明实施例中的存储器802可以是易失性存储器或非易失性存储器，或可包括易失性和非易失性存储器两者。其中，非易失性存储器可以是只读存储器、可编程只读存储器、可擦除可编程只读存储器、电可擦除可编程只读存储器或闪存。易失性存储器可以是随机存取存储器，其用作外部高速缓存。通过示例性但不是限制性说明，许多形式的RAM可用，例如静态随机存取存储器、动态随机存取存储器、同步动态随机存取存储器、双倍数据速率同步动态随机存取存储器、增强型同步动态随机存取存储器、同步连接动态随机存取存储器和直接内存总线随机存取存储器。本文描述的存储器802旨在包括但不限于这些和任意其它适合类型的存储器。在一些实施方式中，存储器802存储了如下的元素，可执行单元或者数据结构，或者他们的子集，或者他们的扩展集：操作系统8021和应用程序8022。其中，操作系统8021，包含各种系统程序，例如框架层、核心库层、驱动层等，用于实现各种基础业务以及处理基于硬件的任务。应用程序8022，包含各种应用程序，例如媒体播放器、浏览器等，用于实现各种应用业务。实现本发明实施例方法的程序可以包含在应用程序8022中。在本发明实施例中，通过调用存储器802存储的程序或指令，具体的，可以是应用程序8022中存储的程序或指令，处理器801用于执行各方法实施例所提供的方法步骤，例如包括：在客户端对目标视频块进行缓存之前，确定目标用户对目标视频块触发seek行为的概率，所述目标视频块为客户端当前播放的目标视频中，位于当前播放点之后且未缓存过的任一视频块；基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件；若满足，则在等待预设时长后返回执行所述基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件的步骤；若不满足，则控制所述客户端对所述目标视频块进行缓存。上述本发明实施例揭示的方法可以应用于处理器801中，或者由处理器801实现。处理器801可能是一种集成电路芯片，具有信号的处理能力。在实现过程中，上述方法的各步骤可以通过处理器801中的硬件的集成逻辑电路或者软件形式的指令完成。上述的处理器801可以是通用处理器、数字信号处理器、专用集成电路、现成可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。可以实现或者执行本发明实施例中的公开的各方法、步骤及逻辑框图。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等。结合本发明实施例所公开的方法的步骤可以直接体现为硬件译码处理器执行完成，或者用译码处理器中的硬件及软件单元组合执行完成。软件单元可以位于随机存储器，闪存、只读存储器，可编程只读存储器或者电可擦写可编程存储器、寄存器等本领域成熟的存储介质中。该存储介质位于存储器802，处理器801读取存储器802中的信息，结合其硬件完成上述方法的步骤。可以理解的是，本文描述的这些实施例可以用硬件、软件、固件、中间件、微码或其组合来实现。对于硬件实现，处理单元可以实现在一个或多个专用集成电路、数字信号处理器、数字信号处理设备、可编程逻辑设备、现场可编程门阵列、通用处理器、控制器、微控制器、微处理器、用于执行本申请所述功能的其它电子单元或其组合中。对于软件实现，可通过执行本文所述功能的单元来实现本文所述的技术。软件代码可存储在存储器中并通过处理器执行。存储器可以在处理器中或在处理器外部实现。本实施例提供的电子设备可以是如图8中所示的电子设备，可执行如图2～3或者图5～6中视频缓存方法的所有步骤，进而实现图2～3或者图5～6所示视频缓存方法的技术效果，具体请参照图2～3或者图5～6相关描述，为简洁描述，在此不作赘述。本发明实施例还提供了一种存储介质。这里的存储介质存储有一个或者多个程序。其中，存储介质可以包括易失性存储器，例如随机存取存储器；存储器也可以包括非易失性存储器，例如只读存储器、快闪存储器、硬盘或固态硬盘；存储器还可以包括上述种类的存储器的组合。当存储介质中一个或者多个程序可被一个或者多个处理器执行，以实现上述在电子设备侧执行的视频缓存方法。所述处理器用于执行存储器中存储的视频缓存程序，以实现以下在电子设备侧执行的视频缓存方法的步骤：在客户端对目标视频块进行缓存之前，确定目标用户对目标视频块触发seek行为的概率，所述目标视频块为客户端当前播放的目标视频中，位于当前播放点之后且未缓存过的任一视频块；基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件；若满足，则在等待预设时长后返回执行所述基于所述目标用户对所述目标视频块触发seek行为的概率，以及所述客户端对所述目标视频的当前缓存量确定当前是否满足预设的暂停缓存条件的步骤；若不满足，则控制所述客户端对所述目标视频块进行缓存。专业人员应该还可以进一步意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、计算机软件或者二者的结合来实现，为了清楚地说明硬件和软件的可互换性，在上述说明中已经按照功能一般性地描述了各示例的组成及步骤。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本发明的范围。结合本文中所公开的实施例描述的方法或算法的步骤可以用硬件、处理器执行的软件模块，或者二者的结合来实施。软件模块可以置于随机存储器、内存、只读存储器、电可编程ROM、电可擦除可编程ROM、寄存器、硬盘、可移动磁盘、CD-ROM、或技术领域内所公知的任意其它形式的存储介质中。以上所述的具体实施方式，对本发明的目的、技术方案和有益效果进行了进一步详细说明，所应理解的是，以上所述仅为本发明的具体实施方式而已，并不用于限定本发明的保护范围，凡在本发明的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
