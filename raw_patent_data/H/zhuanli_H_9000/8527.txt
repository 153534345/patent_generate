标题title
一种光学眼图的监控方法和系统
摘要abst
本发明公开了一种光学眼图的监控方法和系统，属于光电芯片设计技术领域，所述方法包括：将光信号转化为电信号并传输给比较器阵列，以使其分别在第一时钟信号和第二时钟信号的触发下比较电压信号和矩阵上沿，比较电压信号和矩阵下沿，最终得到四个比较结果；利用有限状态机根据四个比较结果搜索眼图信息对应的二维矩形以反馈对应的矩阵上沿和下沿给比较器阵列，使其更新比较结果并传输至有限状态机得到新的眼图信息，反复迭代直至得到的新的眼图信息对应的二维矩形收敛，此时输出目标眼图。本发明采用二维矩形搜索的方法来搜索眼图信息，在搜索过程中不会因为数据序列统计变化而影响最终的眼图信息，故能够在短距光通信场景中应用。
权利要求书clms
1.一种光学眼图的监控方法，其特征在于，包括：S1：利用监控单元将光信号转化为电流信号；利用模拟前端组件将所述电流信号转化为电压信号并传输给比较器阵列；S2：利用时钟产生电路产生第一时钟信号；利用延时单元对所述第一时钟信号进行延时，得到第二时钟信号；S3：利用比较器阵列分别在所述第一时钟信号和所述第二时钟信号的触发下比较所述电压信号和矩阵上沿，以及比较所述电压信号和矩阵下沿，最终得到四个比较结果；S4：利用有限状态机根据所述四个比较结果更新二维矩形的矩形上沿、矩形下沿、矩形左沿和矩形右沿，并将更新后的矩形上沿和矩形下沿反馈给所述比较器阵列，使其更新四个比较结果并传输至所述有限状态机进而输出新的二维矩形，反复迭代直至得到的新的二维矩形收敛，则输出目标眼图；其中，首次输入的矩阵上沿和矩阵下沿均为预设值，第二次至最后一次输入的矩阵上沿和矩阵下沿由所述有限状态机反馈；矩阵左沿指的是所述第一时钟信号，矩形右沿指的是所述第二时钟信号。2.如权利要求1所述的光学眼图的监控方法，其特征在于，所述S3包括：在所述第一时钟信号的触发下比较所述电压信号和矩阵上沿得到第一比较结果；在所述第一时钟信号的触发下比较所述电压信号和矩阵下沿得到第二比较结果；在所述第二时钟信号的触发下比较所述电压信号和矩阵上沿得到第三比较结果；在所述第二时钟信号的触发下比较所述电压信号和矩阵下沿得到第四比较结果。3.如权利要求2所述的光学眼图的监控方法，其特征在于，所述S2包括：利用所述监控单元将NRZ调制格式的光信号转换为随NRZ数据变化的电流信号；利用所述模拟前端组件将所述随NRZ数据变化的电流信号转换为随NRZ数据变化的电压信号并输入给所述比较器阵列。4.如权利要求3所述的光学眼图的监控方法，其特征在于，所述S4包括：当所述第一时钟信号和所述第二时钟信号采用异步时钟产生时，将矩形上沿设置为最小值；判断此时模拟前端输出的信号是否大于矩形上沿，即第一比较结果与第三比较结果，若是，则使得矩形上沿上升，若否，则使得矩形上沿保持不变；重复上述判断过程，直至搜索到上包络的位置；当所述第一时钟信号和所述第二时钟信号采用异步时钟产生时，将矩形下沿设置为最大值；判断此时模拟前端输出的信号是否小于矩形下沿，即第二比较结果与第四比较结果，若是，则使得矩形下沿下降，若否，则使得矩形下沿保持不变；重复上述判断过程，直至搜索到下包络的位置；第一种子眼图搜索过程如下：采用与数据时钟同步的多相位同步时钟产生所述第一时钟信号与所述第二时钟信号，将矩形上沿设置为所述上包络的位置，将矩形下沿设置为所述下包络的位置；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，若是，则使得矩形上沿与矩形下沿向中间收缩，若否，则保持矩形上沿与矩形下沿不变；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上步操作；直至找到子眼图的形状与面积；第二种子眼图搜索过程如下：采用异步时钟产生所述第一时钟信号与所述第二时钟信号，将矩形上沿设置为所述上包络的位置，将矩形下沿设置为所述下包络的位置；设置所述第一时钟信号与所述第二时钟信号之间的延时为t1；判断是否穿过了矩形的左/右边界，若是，则使得矩形上沿与矩形下沿向中间收缩；若否，则保持矩形上沿与矩形下沿不变；重复上述判断过程，直至在当前延时设置下矩形上沿和矩形下沿收敛；重新设置第一时钟信号与第二时钟信号之间的延时为t2，并重复以上步骤；在不同的延时设置下得到的矩形之和便为子眼图的形状与面积。5.如权利要求2所述的光学眼图的监控方法，其特征在于，所述S2包括：利用所述光监控单元将PAM-4调制格式的光信号转换为随PAM-4数据变化的电流信号；利用所述模拟前端组件将随PAM-4数据变化的电流信号转换为随PAM-4数据变化的电压信号，并输入给所述比较器阵列。6.如权利要求5所述的光学眼图的监控方法，其特征在于，所述S4包括：将所述第一比较结果与所述第二比较结果进行异或逻辑运算得出是否穿过矩形左边界比较结果，即矩形左边界比较结果；将所述第三比较结果与所述第四比较结果进行异或逻辑运算得出是否穿过矩形右边界结果，即矩形右边界比较结果；将所述矩形左边界比较结果与所述矩形右边界比较结果进行与运算得出是否横穿矩形，即矩形比较结果；当采用异步时钟产生所述第一时钟信号与所述第二时钟信号时：将矩形上沿设置为最小值；判断此时模拟前端输出的信号是否大于矩形上沿，即第一比较结果与第三比较结果，若是，则使得矩形上沿上升，若否，则使得矩形上沿保持不变；重复上述判断过程，直至搜索到上包络的位置，即电平4；将矩形下沿设置为最大值；判断此时模拟前端输出的信号是否小于矩形下沿，即第二比较结果与第四比较结果，若是，则使得矩形下沿下降，若否，则使得矩形下沿保持不变；重复上述判断过程，直至搜索到下包络的位置，即电平1；将矩形下沿设置为下包络，将矩形上沿设置为上包络；判断是否横穿过矩形的左右边界，即矩形比较结果，若是，则使得矩形上沿与矩形下沿向中间收敛，若否，则维持矩形上下沿位置不变；重复上述判断过程，直至矩形上下沿收敛到相等，此时的矩阵上下沿为电平2或电平3的位置；重复上述过程，直到获得电平2和电平3的位置；第一种子眼图搜索过程如下：当采用与数据时钟同步的多相位同步时钟产生所述第一时钟信号与所述第二时钟信号时：将矩形上沿设置为电平2，将矩形下沿设置为电平1；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上述操作直至找到第一子眼图的形状与面积；将矩形上沿设置为电平3，将矩形下沿设置为电平2；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上述操作直至找到第二子眼图的形状与面积；将矩形上沿设置为电平4，将矩形下沿设置为电平3；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上述操作直至找到第三子眼图的形状与面积；第二种子眼图搜索过程如下：当采用异步时钟产生所述第一时钟信号与所述第二时钟信号时：将矩形上沿设置为电平2，将矩形下沿设置为电平1；设置所述第一时钟信号与所述第二时钟信号之间的延时为t1；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前延时设置下矩形上沿和矩形下沿收敛；重新设置第一时钟信号与第二时钟信号之间的延时为t2，并重复以上步骤；在不同的延时设置下得到的矩形之和便为子眼图的面积；将矩形上沿设置为电平3，将矩形下沿设置为电平2；设置所述第一时钟信号与所述第二时钟信号之间的延时为t1；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前延时设置下矩形上沿和矩形下沿收敛；重新设置第一时钟信号与第二时钟信号之间的延时为t2，并重复以上步骤；在不同的延时设置下得到的矩形之和便为子眼图的面积；将矩形上沿设置为电平4，将矩形下沿设置为电平3；设置所述第一时钟信号与所述第二时钟信号之间的延时为t1；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前延时设置下矩形上沿和矩形下沿收敛；重新设置第一时钟信号与第二时钟信号之间的延时为t2，并重复以上步骤；在不同的延时设置下得到的矩形之和便为子眼图的面积。7.一种光学眼图的监控系统，其特征在于，用于执行权利要求1-6任一项所述的光学眼图的监控方法，包括：监控单元，用于将光信号转化为电流信号；模拟前端组件，与所述监控单元连接，用于将所述电流信号转化为电压信号；时钟产生电路，用于产生第一时钟信号；延时单元，与所述时钟产生电路，用于对所述第一时钟信号进行延时，得到第二时钟信号；比较器阵列，与所述模拟前端组件、所述时钟产生电路和所述延时单元连接，用于分别在所述第一时钟信号和所述第二时钟信号的触发下比较所述电压信号和矩阵上沿，以及比较所述电压信号和矩阵下沿，最终得到四个比较结果；有限状态机，与所述比较器阵列连接，用于根据所述四个比较结果更新二维矩形的矩形上沿、矩形下沿、矩形左沿和矩形右沿，并将更新后的矩形上沿和矩形下沿反馈给所述比较器阵列，使其更新四个比较结果并传输至所述有限状态机进而输出新的二维矩形，反复迭代直至得到的新的二维矩形收敛，则输出目标眼图；其中，首次输入的矩阵上沿和矩阵下沿均为预设值，第二次至最后一次输入的矩阵上沿和矩阵下沿由所述有限状态机反馈；矩阵左沿指的是所述第一时钟信号，矩形右沿指的是所述第二时钟信号。8.如权利要求7所述的光学眼图的监控系统，其特征在于，所述比较器阵列包括；第一比较器，与所述时钟产生电路和所述有限状态机连接，用于在所述第一时钟信号的触发下比较所述电压信号和矩阵上沿得到第一比较结果；第二比较器，与所述时钟产生电路和所述有限状态机连接，用于在所述第一时钟信号的触发下比较所述电压信号和矩阵下沿得到第二比较结果；第三比较器，与所述延时单元和所述有限状态机连接，用于在所述第二时钟信号的触发下比较所述电压信号和矩阵上沿得到第三比较结果；第四比较器，与所述延时单元和所述有限状态机连接，用于在所述第二时钟信号的触发下比较所述电压信号和矩阵下沿得到第四比较结果。9.如权利要求7所述的光学眼图的监控系统，其特征在于，所述监控单元包括；光电二极管。10.如权利要求7所述的光学眼图的监控系统，其特征在于，所述模拟前端组件包括：跨阻放大器。
说明书desc
技术领域本发明属于光电芯片设计技术领域，更具体地，涉及一种光学眼图的监控方法和系统。背景技术为了衡量高速光信号的传输质量，通常将信号进行周期性叠加形成眼图，从而通过眼图来分析码间串扰和噪声的影响。非归零码调制格式由于其简单的逻辑与实现方法，常被应用在短距光通信中。由于调制数据速率受到电路工艺节点的限制，通常会采用具有多个电平信息的脉冲幅度调制格式替代只有两个电平信息的NRZ格式，在相同的带宽下实现比NRZ调制格式更高的通信容量。PAM格式的眼图形状相较于NRZ格式的眼图更为复杂。以四电平脉冲幅度调制格式为例，如图1所示。PAM-4眼图包含多个关键信息，如电平1、电平2、电平3、电平4与第一子眼图、第二子眼图、第三子眼图。为了实现更大的信噪比和更小的误码率，通常要求电平4与电平1之间的差值尽可能大，其中电平1又可以称为下包络，电平2又可以称为上包络，即使得上下包络之间的差距尽可能大。与此同时，通常也要求电平1、电平2、电平3、电平4的位置平均分布，以及要求第一子眼图、第二子眼图、第三子眼图的形状或者面积尽可能大且相同。目前，为了监控信号状态，通常采用专用的眼图监控仪器在芯片外获取眼图信息。由于专用眼图分析仪器高昂的价格与庞大的体积，此类方法只适合在实验室或者维修场景进行使用，但是并不适合在大规模集成化应用场景中进行使用。掩版错误率方法、码元不匹配错误率方法和基于概率统计的眼图监控方法均需要从调制数据处或者时钟数据恢复处获取同步时钟。为了保证眼图监控质量，也需要精准控制同步时钟由于版图寄生等原理产生的相位不匹配，甚至需要加入延时调节单元手动调节失配。与此同时，这些模块的使用会导致较大的功耗。此外，由于以上方法均需要固定统计分布的传输数据，因此面对短距光通信应用时，无法在传输随机统计分布的数据时进行有效的眼图监控。发明内容针对现有技术的以上缺陷或改进需求，本发明提供了一种光学眼图的监控方法和系统，其目的在于基于二维矩形搜索，从而能够实现短距光通信应用下不同调制格式的光眼图监控，由此解决短距光通信应用时无法实现有效眼图监控的技术问题。为实现上述目的，按照本发明的一个方面，提供了一种光学眼图的监控方法，包括：S1：利用监控单元将光信号转化为电流信号；利用模拟前端组件将所述电流信号转化为电压信号并传输给比较器阵列；S2：利用时钟产生电路产生第一时钟信号；利用延时单元对所述第一时钟信号进行延时，得到第二时钟信号；S3：利用比较器阵列分别在所述第一时钟信号和所述第二时钟信号的触发下比较所述电压信号和矩阵上沿，以及比较所述电压信号和矩阵下沿，最终得到四个比较结果；S4：利用有限状态机根据所述四个比较结果更新二维矩形的矩形上沿、矩形下沿、矩形左沿和矩形右沿，并将更新后的矩形上沿和矩形下沿反馈给所述比较器阵列，使其更新四个比较结果并传输至所述有限状态机进而输出新的二维矩形，反复迭代直至得到的新的二维矩形收敛，则输出目标眼图；其中，首次输入的矩阵上沿和矩阵下沿均为预设值，第二次至最后一次输入的矩阵上沿和矩阵下沿由所述有限状态机反馈；矩阵左沿指的是所述第一时钟信号，矩形右沿指的是所述第二时钟信号。在其中一个实施例中，所述S3包括：在所述第一时钟信号的触发下比较所述电压信号和矩阵上沿得到第一比较结果；在所述第一时钟信号的触发下比较所述电压信号和矩阵下沿得到第二比较结果；在所述第二时钟信号的触发下比较所述电压信号和矩阵上沿得到第三比较结果；在所述第二时钟信号的触发下比较所述电压信号和矩阵下沿得到第四比较结果。在其中一个实施例中，所述S2包括：利用所述监控单元将NRZ调制格式的光信号转换为随NRZ数据变化的电流信号；利用所述模拟前端组件将所述随NRZ数据变化的电流信号转换为随NRZ数据变化的电压信号并输入给所述比较器阵列。在其中一个实施例中，所述S4包括：当所述第一时钟信号和所述第二时钟信号采用异步时钟产生时，将矩形上沿设置为最小值；判断此时模拟前端输出的信号是否大于矩形上沿，即第一比较结果与第三比较结果，若是，则使得矩形上沿上升，若否，则使得矩形上沿保持不变；重复上述判断过程，直至搜索到上包络的位置；当所述第一时钟信号和所述第二时钟信号采用异步时钟产生时，将矩形下沿设置为最大值；判断此时模拟前端输出的信号是否小于矩形下沿，即第二比较结果与第四比较结果，若是，则使得矩形下沿下降，若否，则使得矩形下沿保持不变；重复上述判断过程，直至搜索到下包络的位置；第一种子眼图搜索过程如下：采用与数据时钟同步的多相位同步时钟产生所述第一时钟信号与所述第二时钟信号，将矩形上沿设置为所述上包络的位置，将矩形下沿设置为所述下包络的位置；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，若是，则使得矩形上沿与矩形下沿向中间收缩，若否，则保持矩形上沿与矩形下沿不变；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上步操作；直至找到子眼图的形状与面积；第二种子眼图搜索过程如下：采用异步时钟产生所述第一时钟信号与所述第二时钟信号，将矩形上沿设置为所述上包络的位置，将矩形下沿设置为所述下包络的位置；设置所述第一时钟信号与所述第二时钟信号之间的延时为t1；判断是否穿过了矩形的左/右边界，若是，则使得矩形上沿与矩形下沿向中间收缩；若否，则保持矩形上沿与矩形下沿不变；重复上述判断过程，直至在当前延时设置下矩形上沿和矩形下沿收敛；重新设置第一时钟信号与第二时钟信号之间的延时为t2，并重复以上步骤；在不同的延时设置下得到的矩形之和便为子眼图的形状与面积。在其中一个实施例中，所述S2包括：利用所述监控单元将PAM-4调制格式的光信号转换为随PAM-4数据变化的电流信号；利用所述模拟前端组件将随PAM-4数据变化的电流信号转换为随PAM-4数据变化的电压信号，并输入给所述比较器阵列。在其中一个实施例中，所述S4包括：将所述第一比较结果与所述第二比较结果进行异或逻辑运算得出是否穿过矩形左边界比较结果，即矩形左边界比较结果；将所述第三比较结果与所述第四比较结果进行异或逻辑运算得出是否穿过矩形右边界结果，即矩形右边界比较结果；将所述矩形左边界比较结果与所述矩形右边界比较结果进行与运算得出是否横穿矩形，即矩形比较结果；当采用异步时钟产生所述第一时钟信号与所述第二时钟信号时：将矩形上沿设置为最小值；判断此时模拟前端输出的信号是否大于矩形上沿，即第一比较结果与第三比较结果，若是，则使得矩形上沿上升，若否，则使得矩形上沿保持不变；重复上述判断过程，直至搜索到上包络的位置，即电平4；将矩形下沿设置为最大值；判断此时模拟前端输出的信号是否小于矩形下沿，即第二比较结果与第四比较结果，若是，则使得矩形下沿下降，若否，则使得矩形下沿保持不变；重复上述判断过程，直至搜索到下包络的位置，即电平1；将矩形下沿设置为下包络，将矩形上沿设置为上包络；判断是否横穿过矩形的左右边界，即矩形比较结果，若是，则使得矩形上沿与矩形下沿向中间收敛，若否，则维持矩形上下沿位置不变；重复上述判断过程，直至矩形上下沿收敛到相等，此时的矩阵上下沿为电平2或3的位置；重复上述过程，直到获得电平2和电平3的位置；第一种子眼图搜索过程如下：当采用与数据时钟同步的多相位同步时钟产生所述第一时钟信号与所述第二时钟信号时：将矩形上沿设置为电平2，将矩形下沿设置为电平1；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上述操作，直至找到第一子眼图的形状与面积；将矩形上沿设置为电平3，将矩形下沿设置为电平2；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上述操作，直至找到第二子眼图的形状与面积；将矩形上沿设置为电平4，将矩形下沿设置为电平3；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上述操作，直至找到第三子眼图的形状与面积；第二种子眼图搜索过程如下：当采用异步时钟产生所述第一时钟信号与所述第二时钟信号时：将矩形上沿设置为电平2，将矩形下沿设置为电平1；设置所述第一时钟信号与所述第二时钟信号之间的延时为t1；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前延时设置下矩形上沿和矩形下沿收敛；重新设置第一时钟信号与第二时钟信号之间的延时为t2，并重复以上步骤；在不同的延时设置下得到的矩形之和便为子眼图的面积；将矩形上沿设置为电平3，将矩形下沿设置为电平2；设置所述第一时钟信号与所述第二时钟信号之间的延时为t1；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前延时设置下矩形上沿和矩形下沿收敛；重新设置第一时钟信号与第二时钟信号之间的延时为t2，并重复以上步骤；在不同的延时设置下得到的矩形之和便为子眼图的面积；将矩形上沿设置为电平4，将矩形下沿设置为电平3；设置所述第一时钟信号与所述第二时钟信号之间的延时为t1；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前延时设置下矩形上沿和矩形下沿收敛；重新设置第一时钟信号与第二时钟信号之间的延时为t2，并重复以上步骤；在不同的延时设置下得到的矩形之和便为子眼图的面积。按照本发明的另一方面，提供了一种光学眼图的监控系统，用于执行上述监控方法，包括：监控单元，用于将光信号转化为电流信号；模拟前端组件，与所述监控单元连接，用于将所述电流信号转化为电压信号；时钟产生电路，用于产生第一时钟信号；延时单元，与所述时钟产生电路，用于对所述第一时钟信号进行延时，得到第二时钟信号；比较器阵列，与所述模拟前端组件、所述时钟产生电路和所述延时单元连接，用于分别在所述第一时钟信号和所述第二时钟信号的触发下比较所述电压信号和矩阵上沿，以及比较所述电压信号和矩阵下沿，最终得到四个比较结果；有限状态机，与所述比较器阵列连接，用于根据所述四个比较结果更新二维矩形的矩形上沿、矩形下沿、矩形左沿和矩形右沿，并将更新后的矩形上沿和矩形下沿反馈给所述比较器阵列，使其更新四个比较结果并传输至所述有限状态机进而输出新的二维矩形，反复迭代直至得到的新的二维矩形收敛，则输出目标眼图；其中，首次输入的矩阵上沿和矩阵下沿均为预设值，第二次至最后一次输入的矩阵上沿和矩阵下沿由所述有限状态机反馈；矩阵左沿指的是所述第一时钟信号，矩形右沿指的是所述第二时钟信号。在其中一个实施例中，所述比较器阵列包括；第一比较器，与所述时钟产生电路和所述有限状态机连接，用于在所述第一时钟信号的触发下比较所述电压信号和矩阵上沿得到第一比较结果；第二比较器，与所述时钟产生电路和所述有限状态机连接，用于在所述第一时钟信号的触发下比较所述电压信号和矩阵下沿得到第二比较结果；第三比较器，与所述延时单元和所述有限状态机连接，用于在所述第二时钟信号的触发下比较所述电压信号和矩阵上沿得到第三比较结果；第四比较器，与所述延时单元和所述有限状态机连接，用于在所述第二时钟信号的触发下比较所述电压信号和矩阵下沿得到第四比较结果。在其中一个实施例中，所述监控单元包括；光电二极管。在其中一个实施例中，所述比较器阵列包括；所述模拟前端组件包括：跨阻放大器。总体而言，通过本发明所构思的以上技术方案与现有技术相比，能够取得下列有益效果：本发明所提出的光学眼图监控方法通过采用二维矩形搜索的方法来搜索眼图信息，由于在搜索过程中不会因为数据序列统计变化而影响最终搜索得到的眼图信息，因此能够在短距光通信应用场景中使用，从而克服了传统眼图监控方案存在的需要固定数据序列统计分布的缺陷。本发明所提出的基于二维矩形搜索的光学眼图监控方法与系统通过采用异步时钟搜索包络信息与电平信息，从而在有效降低功耗的同时避免了对时钟相位的精准控制，克服了传统眼图监控方案存在的功耗大，需要对时钟相位精准控制的缺陷。本发明所提出的基于二维矩形搜索的光学眼图监控方法与系统只采用了如比较器、有限状态机等简单电路架构，因此能够满足集成化应用中低功耗、低成本以及实时的应用需求，从而克服采用眼图仪器导致的高能耗、高成本以及无法不间断实时监控的缺点。附图说明图1是现有技术中PAM-4眼图的示意图图2是本发明一实施例中基于二维矩形搜索的光学眼图监控方法与系统示意图；图3是沿图2中所述比较器阵列的示意图；图4是本发明一实施例中基于光电二极管、TIA的针对NRZ调制格式的光信号的光学眼图监控系统的结构示意图；图5是本发明一实施例中基于光电二极管、TIA的针对PAM-4调制格式的光信号的光学眼图监控系统的结构示意图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。此外，下面所描述的本发明各个实施方式中所涉及到的技术特征只要彼此之间未构成冲突就可以相互组合。如图2所示，本发明提供了一种光学眼图的监控系统，包括：监控单元，用于将光信号转化为电流信号；模拟前端组件，与监控单元连接，用于将电流信号转化为电压信号；时钟产生电路，用于产生第一时钟信号；延时单元，与时钟产生电路，用于对第一时钟信号进行延时，得到第二时钟信号；比较器阵列，与模拟前端组件、时钟产生电路和延时单元连接，用于分别在第一时钟信号和第二时钟信号的触发下比较电压信号和矩阵上沿，以及比较电压信号和矩阵下沿，最终得到四个比较结果；有限状态机，与比较器阵列连接，用于根据四个比较结果更新二维矩形的矩形上沿、矩形下沿、矩形左沿和矩形右沿，并将更新后的矩形上沿和矩形下沿反馈给比较器阵列，使其更新四个比较结果并传输至有限状态机进而输出新的二维矩形，反复迭代直至得到的新的二维矩形收敛，则输出目标眼图；其中，首次输入的矩阵上沿和矩阵下沿均为预设值，第二次至最后一次输入的矩阵上沿和矩阵下沿由有限状态机反馈；矩阵左沿指的是第一时钟信号，矩形右沿指的是第二时钟信号。在本发明中，如图3所示，比较器阵列的工作原理包括：第一时钟信号输入到第一比较器和第二比较器；第二时钟信号输入到第三比较器和第四比较器；矩形上沿输入到第一比较器和第三比较器；矩形下沿输入到第二比较器和第四比较器；第一比较器、第二比较器、第三比较器和第四比较器分别得出第一比较结果、第二比较结果、第三比较结果和第四比较结果。具体的，在本发明中，二维矩形的上沿指的是输入到第一比较器和第三比较器的输入信号；二维矩形的下沿指的是输入到第二比较器和第四比较器的输入信号；二维矩形的左沿指的是输入到第一比较器和第二比较器的第一时钟信号；二维矩形的右沿指的是输入到第三比较器和第四比较器的第二时钟信号。具体的，在本发明中，第一比较结果与第二比较结果进行异或逻辑运算得出是否穿过矩形左边界比较结果，即矩形左边界比较结果；第三比较结果与第四比较结果进行异或逻辑运算得出是否穿过矩形右边界结果，即矩形右边界比较结果；将矩形左边界比较结果与矩形右边界比较结果进行与运算得出是否横穿矩形，即矩形比较结果。具体的，在本发明中，有限状态机的工作过程包括包络搜索、中间电平搜索、以及子眼图搜索。其中，上包络搜索过程包括：第一时钟信号与第二时钟信号采用异步时钟产生；将矩形上沿设置为最小值；判断此时模拟前端输出的信号是否大于矩形上沿，即第一比较结果与第三比较结果，若是，则使得矩形上沿上升，若否，则使得矩形上沿保持不变；重复上述判断过程，直至搜索到上包络的位置。下包络搜索过程包括：第一时钟信号与第二时钟信号采用异步时钟产生；将矩形下沿设置为最大值；判断此时模拟前端输出的信号是否小于矩形下沿，即第二比较结果与第四比较结果，若是，则使得矩形下沿下降，若否，则使得矩形下沿保持不变；重复上述判断过程，直至搜索到下包络的位置。中间电平搜索过程包括：第一时钟信号与第二时钟信号采用异步时钟产生；将矩形下沿设置为下包络，将矩形上沿设置为上包络；判断是否横穿过矩形的左右边界，即矩形比较结果，若是，则使得矩形上沿与矩形下沿向中间收敛，若否，则维持矩形上下沿位置不变；重复上述判断过程，直至矩形上下沿收敛到相等，此时的矩阵上下沿为中间电平的位置。子眼图搜索过程包括：第一时钟信号与第二时钟信号采用与数据时钟同步的多相位同步时钟；将矩形上沿设置为所述上包络的位置，将矩形下沿设置为所述下包络的位置；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩，若否，则保持矩形上沿与矩形下沿不变；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上述操作，直至找到子眼图的形状与面积。优选的，在本发明中，子眼图搜索可以通过异步时钟实现，其工作原理包括：设置第一时钟信号与第二时钟信号之间的延时为t1；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；若否，则保持矩形上沿与矩形下沿不变；重复上述判断过程，直至在当前延时设置下矩形上沿和矩形下沿收敛；重新设置第一时钟信号与第二时钟信号之间的延时为t2，并重复以上步骤；在不同的延时设置下得到的矩形之和便为子眼图的形状与面积。为实现上述目的，本发明提供了一种光学眼图的监控方法，包括：S1：利用监控单元将光信号转化为电流信号；利用模拟前端组件将电流信号转化为电压信号并传输给比较器阵列；S2：利用时钟产生电路产生第一时钟信号；利用延时单元对第一时钟信号进行延时，得到第二时钟信号；S3：利用比较器阵列分别在第一时钟信号和第二时钟信号的触发下比较电压信号和矩阵上沿，以及比较电压信号和矩阵下沿，最终得到四个比较结果；S4：利用有限状态机根据四个比较结果更新矩阵上沿和矩阵下沿，以反馈给比较器阵列使其更新比较结果并传输至有限状态机得到新的矩阵上沿和新的矩阵下沿，反复迭代直至得到的新的矩阵下沿和新的矩阵上沿对应的二维矩形收敛，此时输出目标眼图；其中，首次输入的矩阵上沿和矩阵下沿均为预设值，第二次至最后一次输入的矩阵上沿和矩阵下沿由有限状态机反馈。具体的，如图4所示，以光信号为NRZ调制格式的光信号为例进行描述：步骤一、光电二极管将NRZ调制格式的光信号转换为随NRZ数据变化的电流信号；步骤二、跨阻放大器将随NRZ数据变化的电流信号转换为随NRZ数据变化的电压信号，并输入给比较器阵列；步骤三、在比较器阵列中：第一时钟信号输入到第一比较器和第二比较器；第二时钟信号输入到第三比较器和第四比较器；矩形上沿输入到第一比较器和第三比较器；矩形下沿输入到第二比较器和第四比较器；第一比较器、第二比较器、第三比较器和第四比较器分别得出第一比较结果、第二比较结果、第三比较结果和第四比较结果。其中，第一比较结果与第二比较结果进行异或逻辑运算得出是否穿过矩形左边界比较结果，即矩形左边界比较结果；第三比较结果与第四比较结果进行异或逻辑运算得出是否穿过矩形右边界结果，即矩形右边界比较结果；将矩形左边界比较结果与矩形右边界比较结果进行与运算得出是否横穿矩形，即矩形比较结果。步骤四、具体如下：在有限状态机中，第一时钟信号与第二时钟信号采用异步时钟产生；将矩形上沿设置为最小值；判断此时模拟前端输出的信号是否大于矩形上沿，即第一比较结果与第三比较结果，若是，则使得矩形上沿上升，若否，则使得矩形上沿保持不变；重复上述判断过程，直至搜索到上包络的位置。在有限状态机中，第一时钟信号与第二时钟信号采用异步时钟产生；将矩形下沿设置为最大值；判断此时模拟前端输出的信号是否小于矩形下沿，即第二比较结果与第四比较结果，若是，则使得矩形下沿下降，若否，则使得矩形下沿保持不变；重复上述判断过程，直至搜索到下包络的位置。第一时钟信号与第二时钟信号采用与数据时钟同步的多相位同步时钟；将矩形上沿设置为上包络，将矩形下沿设置为下包络；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上述操作，直至找到子眼图的形状与面积。具体的，如图5所示，以光信号为PAM-4调制格式的光信号为例进行描述：步骤一、光电二极管将PAM-4调制格式的光信号转换为随PAM-4数据变化的电流信号；步骤二、跨阻放大器将随PAM-4数据变化的电流信号转换为随PAM-4数据变化的电压信号，并输入给比较器阵列；步骤三、在比较器阵列中：第一时钟信号输入到第一比较器和第二比较器；第二时钟信号输入到第三比较器和第四比较器；矩形上沿输入到第一比较器和第三比较器；矩形下沿输入到第二比较器和第四比较器；第一比较器、第二比较器、第三比较器和第四比较器分别得出第一比较结果、第二比较结果、第三比较结果和第四比较结果。其中，第一比较结果与第二比较结果进行异或逻辑运算得出是否穿过矩形左边界比较结果，即矩形左边界比较结果；第三比较结果与第四比较结果进行异或逻辑运算得出是否穿过矩形右边界结果，即矩形右边界比较结果；将矩形左边界比较结果与矩形右边界比较结果进行与运算得出是否横穿矩形，即矩形比较结果。步骤四、具体如下：第一时钟信号与第二时钟信号采用异步时钟产生；将矩形上沿设置为最小值；判断此时模拟前端输出的信号是否大于矩形上沿，即第一比较结果与第三比较结果，若是，则使得矩形上沿上升，若否，则使得矩形上沿保持不变；重复上述判断过程，直至搜索到上包络的位置，即电平4。第一时钟信号与第二时钟信号采用异步时钟产生；将矩形下沿设置为最大值；判断此时模拟前端输出的信号是否小于矩形下沿，即第二比较结果与第四比较结果，若是，则使得矩形下沿下降，若否，则使得矩形下沿保持不变；重复上述判断过程，直至搜索到下包络的位置，即电平1。第一时钟信号与第二时钟信号采用异步时钟产生；将矩形下沿设置为下包络，将矩形上沿设置为上包络；判断是否横穿过矩形的左右边界，即矩形比较结果，若是，则使得矩形上沿与矩形下沿向中间收敛，若否，则维持矩形上下沿位置不变；重复上述判断过程，直至矩形上下沿收敛到相等，此时的矩阵上下沿为电平2或3的位置；重复上述过程，直到获得电平2和电平3的位置。第一种子眼图搜索过程如下：第一时钟信号与第二时钟信号采用与数据时钟同步的多相位同步时钟；将矩形上沿设置为电平2，将矩形下沿设置为电平1；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上述操作，直至找到第一子眼图的形状与面积。第一时钟信号与第二时钟信号采用与数据时钟同步的多相位同步时钟；将矩形上沿设置为电平3，将矩形下沿设置为电平2；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上述操作，直至找到第二子眼图的形状与面积。第一时钟信号与第二时钟信号采用与数据时钟同步的多相位同步时钟；将矩形上沿设置为电平4，将矩形下沿设置为电平3；多相位同步时钟切换到第一个相位；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前相位下矩形上沿和矩形下沿收敛；切换到下一个相位，重复上述操作，直至找到第三子眼图的形状与面积。第二种子眼图搜索过程如下：采用异步时钟产生所述第一时钟信号与所述第二时钟信号，将矩形上沿设置为电平2，将矩形下沿设置为电平1；设置所述第一时钟信号与所述第二时钟信号之间的延时为t1；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前延时设置下矩形上沿和矩形下沿收敛；重新设置第一时钟信号与第二时钟信号之间的延时为t2，并重复以上步骤；在不同的延时设置下得到的矩形之和便为子眼图的面积；将矩形上沿设置为电平3，将矩形下沿设置为电平2；设置所述第一时钟信号与所述第二时钟信号之间的延时为t1；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前延时设置下矩形上沿和矩形下沿收敛；重新设置第一时钟信号与第二时钟信号之间的延时为t2，并重复以上步骤；在不同的延时设置下得到的矩形之和便为子眼图的面积；将矩形上沿设置为电平4，将矩形下沿设置为电平3；设置所述第一时钟信号与所述第二时钟信号之间的延时为t1；判断是否穿过了矩形的左/右边界，即矩形左/右边界比较结果，若是，则使得矩形上沿与矩形下沿向中间收缩；重复上述判断过程，直至在当前延时设置下矩形上沿和矩形下沿收敛；重新设置第一时钟信号与第二时钟信号之间的延时为t2，并重复以上步骤；在不同的延时设置下得到的矩形之和便为子眼图的面积。本领域的技术人员容易理解，以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明的保护范围之内。
