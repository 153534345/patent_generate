标题title
基于5G多波束下行信号的指纹定位方法及系统
摘要abst
一种基于5G多波束下行信号的指纹定位方法及系统，包括：从5G下行信号中提取多波束SSB，基于多波束SSB得到多波束的SSS信号和DM‑RS信号；基于多波束的SSS信号和DM‑RS信号计算多波束参考信号接收功率RSRP；基于多波束SSB自相关计算得到5G下行同步信道的RSSI，基于多波束参考信号接收功率RSRP和RSSI计算多波束参考信号接收质量RSRQ；将多波束参考信号接收功率RSRP和多波束参考信号接收质量RSRQ堆叠形成多波束指纹特征；将多波束指纹特征输入到神经网络中，神经网络输出定位结果。本发明能够实现基于商用5G NR下行信号的高精度定位。
权利要求书clms
1.一种基于5G多波束下行信号的指纹定位方法，其特征在于，包括：从5G下行信号中提取多波束SSB，基于多波束SSB得到多波束的SSS信号和DM-RS信号；基于多波束的SSS信号和DM-RS信号计算多波束参考信号接收功率RSRP；基于多波束SSB自相关计算得到5G下行同步信道的RSSI，基于多波束参考信号接收功率RSRP和RSSI计算多波束参考信号接收质量RSRQ；将多波束参考信号接收功率RSRP和多波束参考信号接收质量RSRQ堆叠形成多波束指纹特征；将多波束指纹特征输入到神经网络中，神经网络输出定位结果。2.根据权利要求1所述的基于5G多波束下行信号的指纹定位方法，其特征在于，分别对接收得到的SSS信号和DM-RS信号进行自相关并除以各自的信号长度Ns,Nd，计算其平均接收功率为Psss,Pdmrs，多波束参考信号接收功率RSRP计算公式为：式中，bn∈{0,1,…,Lmax}，记为Lmax为多波束个数。3.根据权利要求2所述的基于5G多波束下行信号的指纹定位方法，其特征在于，多波束参考信号接收质量RSRQ计算公式为：其中，NRB代表多波束SSB频域所占的资源块个数。4.根据权利要求3所述的基于5G多波束下行信号的指纹定位方法，其特征在于，多波束指纹特征为：C＝。5.一种基于5G多波束下行信号的指纹定位系统，其特征在于，包括：SSB提取模块，其被配置为从5G下行信号中提取多波束SSB，基于多波束SSB得到多波束的SSS信号和DM-RS信号；参考信号接收功率RSRP计算模块，其被配置为从基于多波束的SSS信号和DM-RS信号计算多波束参考信号接收功率RSRP；参考信号接收质量RSRQ计算模块，其被配置为基于多波束SSB自相关计算得到5G下行同步信道的RSSI，基于多波束参考信号接收功率RSRP和RSSI计算多波束参考信号接收质量RSRQ；多波束指纹特征构建模块，其被配置为将多波束参考信号接收功率RSRP和多波束参考信号接收质量RSRQ堆叠形成多波束指纹特征；以及定位模块，其被配置为将多波束指纹特征输入到神经网络中，神经网络输出定位结果。6.根据权利要求5所述的基于5G多波束下行信号的指纹定位系统，其特征在于，分别对接收得到的SSS信号和DM-RS信号进行自相关并除以各自的信号长度Ns,Nd，计算其平均接收功率为Psss,Pdmrs，多波束参考信号接收功率RSRP计算公式为：式中，bn∈{0,1,…,Lmax}，记为Lmax为多波束个数。7.根据权利要求6所述的基于5G多波束下行信号的指纹定位系统，其特征在于，多波束参考信号接收质量RSRQ计算公式为：其中，NRB代表多波束SSB频域所占的资源块个数。8.根据权利要求7所述的基于5G多波束下行信号的指纹定位系统，其特征在于，多波束指纹特征为：C＝。9.一种电子设备，其特征在于，包括：处理器；存储器，包括一个或多个程序模块；其中，所述一个或多个程序模块被存储在所述存储器中并被配置为由所述处理器执行，所述一个或多个程序模块包括用于实现权利要求1-4任一项所述的基于5G多波束下行信号的指纹定位方法的指令。10.一种存储介质，用于存储非暂时性指令，其特征在于，当所述非暂时性指令由处理器执行时能够实现权利要求1-4任一项所述的基于5G多波束下行信号的指纹定位方法。
说明书desc
技术领域本发明属于无线定位技术领域，尤其涉及一种基于5G多波束下行信号的指纹定位方法及系统。背景技术室内定位是室内位置服务、万物互联、人工智能的核心技术之一，在紧急医疗等公共安全服务、智能仓储、移动健康及人类社交等方面发挥着巨大作用。室内环境拓扑复杂、环境易变。在复杂室内环境中高效率、高精度导航与定位是目前位置服务的难点。GNSS系统能够在室外开阔地区定位，但无法穿透室内，形成有效定位。现有的室内定位技术，如WIFI、蓝牙、超宽带等，虽各有优点，但这些信号源无法实现如GNSS一样的大面积覆盖而造成应用受限，难以满足移动智能终端定位需求。随着5G技术的快速发展及5G基站在室内外的大规模布设，5G作为未来的主流通信技术，将成为室内外空间的重要信号源。由于5G引入了大规模天线阵列、超密集网络、新型多址等关键技术实现高速率、大带宽、低延时通信等优势，将为室内定位带来新机遇。基于5G多波束下行信号的定位是实现消费者级别的5G室内外定位研究的关键，下行信号更大的带宽和基于终端的定位将具备灵活、广泛的应用场景，如工业制造、智能交通、物流仓储、零售、健康医疗等。目前，在室内实际商用部署中，单基站场景普遍存在，难以形成几何定位。发明内容本发明提供一种基于5G多波束下行信号的指纹定位方法及系统，利用商用5G信号多波束的特点，实现多特征多波束指纹构建，能够实现基于商用5G NR下行信号的高精度定位。第一方面，提供一种基于5G多波束下行信号的指纹定位方法，包括：从5G下行信号中提取多波束SSB，基于多波束SSB得到多波束的SSS信号和DM-RS信号；基于多波束的SSS信号和DM-RS信号计算多波束参考信号接收功率RSRP；基于多波束SSB自相关计算得到5G下行同步信道的RSSI，基于多波束参考信号接收功率RSRP和RSSI计算多波束参考信号接收质量RSRQ；将多波束参考信号接收功率RSRP和多波束参考信号接收质量RSRQ堆叠形成多波束指纹特征；将多波束指纹特征输入到神经网络中，神经网络输出定位结果。第二方面，提供一种基于5G多波束下行信号的指纹定位系统，包括：SSB提取模块，其被配置为从5G下行信号中提取多波束SSB，基于多波束SSB得到多波束的SSS信号和DM-RS信号；参考信号接收功率RSRP计算模块，其被配置为从基于多波束的SSS信号和DM-RS信号计算多波束参考信号接收功率RSRP；参考信号接收质量RSRQ计算模块，其被配置为基于多波束SSB自相关计算得到5G下行同步信道的RSSI，基于多波束参考信号接收功率RSRP和RSSI计算多波束参考信号接收质量RSRQ；多波束指纹特征构建模块，其被配置为将多波束参考信号接收功率RSRP和多波束参考信号接收质量RSRQ堆叠形成多波束指纹特征；以及定位模块，其被配置为将多波束指纹特征输入到神经网络中，神经网络输出定位结果。第三方面，提供一种电子设备，包括：处理器；存储器，包括一个或多个程序模块；其中，所述一个或多个程序模块被存储在所述存储器中并被配置为由所述处理器执行，所述一个或多个程序模块包括用于实现所述的基于5G多波束下行信号的指纹定位方法的指令。第四方面，提供一种存储介质，用于存储非暂时性指令，当所述非暂时性指令由处理器执行时能够实现所述的基于5G多波束下行信号的指纹定位方法。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例的附图作简单地介绍。图1为本发明一实施例提供的基于5G多波束下行信号的指纹定位方法流程图。图2为本发明一实施例提供的多SSB在一个信号周期内的相对位置关系示意图。具体实施方式现有的基于WIFI、蓝牙、超宽带的室内定位技术，需要按照特定场景额外布设基站，而难以形成大规模的应用，难以实现广覆盖定位，额外部署定位基站也难以满足客户需求而难以普及推广。而本发明基于大规模部署的商用5G信号，能够在5G通信布设的基础上，无需额外部署定位基站，基于现有设施即可在通信服务的基础上，同时满足定位服务需求，大幅度降低应用成本。此外，现有5G NR定位的研究甚少，主要集中在基于上行信号的基站侧定位，而基站侧定位只有设备端企业能获取完整信息，难以实现开放研究和广泛应用，且5G NR目前上下行时隙配比都是以下行占优为主，因此上行信号占据带宽远小于下行信号，受限于上行资源和基站的发送功率，会影响定位精度。因此利用5G NR下行信号进行基于智能终端的定位研究，能够利用大带宽的优势提高定位精度，且基于智能终端的研究将能够广泛应用于不同的场景，为位置物联网提供高精度定位的可能性。并且，现有大规模部署的室内5G网络，受到布设成本及网络规划等原因，普遍依赖于单基站的部署，而难以形成几何定位。在这样的背景下，本发明利用5G下行信号的多波束特性，构建了一种多波束指纹，实现了高精度室内定位。本发明有助于为室内外无缝定位研究提供新的技术方法与可能性。图1示出了一种基于5G多波束下行信号的指纹定位方法流程图。下面从多波束精确提取、多波束指纹构建和多波束指纹定位等几个方面对本发明方法进行详细说明。步骤1：多波束精确提取，方法进一步包括：步骤1.1，5G功率最强同步信号块SSBmax检测与信号同步，方法进一步包括：主同步信号PSS相关探测。将采集到的5G下行同步信号与基于m-序列生成3GPP协议中规定的三种PSS参考信号进行相关，检测得到最相关的参考信号的序列，记为NID2∈{0，1，2}，即为PSS检测结果，同时提取出PSS参考信号，通过相关还能够得到PSS信号的起始位置，即为5G功率最强同步信号块SSBmax的起始位置，记为基于起始位置完成功率最强同步信号块SSBmax检测与提取；辅同步信号SSS检测与小区识别。在提取的SSBmax中，按照信号格式基于PSS信号位置提取SSS信号。将提取的SSS信号与3GPP TS 38.211协议中规定的336种SSS参考信号进行相关计算，检测得到最相关的参考信号的序列，记为NID1∈{0，1，2，...,335}，并提取出对应最相关的SSS参考信号；基于检测得到的NID2和NID1，依据公式：可以计算得到基站小区的识别ID，记为完成信号同步。步骤1.2，功率最强同步信号块SSBmax的解调参考信号DM-RS提取：在提取的SSBmax中，按照信号格式检测出DM-RS所在时域中的符号位置，然后根据步骤1信号帧同步得到的基站小区识别码确定DM-RS在频域中的具体子载波位置，结合时域和频域中的位置，从SSB中实现对DM-RS的完整提取，将提取的DM-RS信号记为步骤1.3，功率最强同步信号块SSBmax波束索引检测：根据多波束信号协议，确定多波束个数，记为Lmax,则功率最强同步信号块SSBmax对应的波束索引记为bn∈{0,1,…,Lmax}，由于不同的SSB索引对应不同的DM-RS参考信号，因此，根据协议，基于生成所有可能的DM-RS参考信号cbn，通过相关计算：然后取上述公式最大值对应的索引，即为SSBmax波束索引，如下：步骤1.4，多波束起始位置计算。进一步包括：多波束初始起始位置计算：根据多波束信号协议，能够得到多个SSB在一个信号周期内的相对位置关系，如附图2所示。该关系可记为a＝，基于SSBmax波束索引bnmax和起始位置可以根据如下公式计算得到各SSB的初始起始位置多波束精确起始位置计算：为了进一步获取精确的多波束起始位置，快速消除初始起始位置存在的采样点偏差，采用基于小区的识别ID和SSB索引的双重判别机制，设置一个适当的采样点调整参数z∈，对各波束的起始位置进行调整，如下：基于调整后的重新提取出对应的SSB信号，并计算小区的识别ID为当时，进行下一步判别；基于步骤1.3的方法，计算当前SSB对应的波束索引为当且对应PSS相关探测峰值，则完成采样点调整。记当前采样点调整参数为则当前波束的精确起始位置为依次对所有波束完成调整，得到多波束的精确起始位置，基于多波束起始位置，可完成多波束精确提取。步骤2：多波束指纹构建。方法进一步包括：步骤2.1，多波束参考信号接收功率计算。基于步骤1提取的多波束SSB，进一步得到各波束的SSS和DM-RS信号。基于SSS和DM-RS对各波束进行RSRP计算如下：首先，分别对接收得到的SSS信号和DM-RS信号进行自相关并除以各自的信号长度Ns,Nd，计算其平均接收功率为Psss,Pdmrs。然后，联合SSS和DM-RS进行RSRP计算：步骤2.2，多波束参考信号接收质量计算。基于步骤1提取的多波束SSB自相关计算得到5G下行同步信道的RSSI，基于RSRP和RSSI计算RSRQ为其中，NRB代表SSB频域所占的资源块个数。步骤2.3堆叠指纹构建。由于RSRP反映不同波束的参考信号接收功率，RSRQ反映不同波束的信噪比和信号质量，因此将多波束RSRP和多波束RSRQ堆叠形成多波束指纹特征，如下：C＝相比单一的基于RSRP的指纹定位方法，本发明构建的多波束指纹能够提供更多空间相关的特征，提高定位精度。步骤3：多波束指纹定位。基于本发明构建的多波束指纹特征库，可以基于不同机器学习和深度学习方法进行离线指纹库构建并训练模型。然后在线采集待定位位置的信号数据，并按照步骤1-2获得待定位位置多波束特征，将其输入训练得到的模型进行计算，实现定位。主要包括指纹库构建、模型训练、在线定位三个步骤。以深度卷积神经网络方法为例，进一步说明如下：指纹库构建：按照步骤1-2多波束指纹构建方法得到不同参考点的多波束指纹特征C，联合参考点的位置标签构建多波束指纹特征库。模型训练：将包含指纹特征和位置标签的多波束指纹特征库输入深度卷积神经网络，基于损失函数计算位置标签与网络输出数据的误差，并将误差作为输入，通过反向传播算法，实现网络神经元的权值和阈值调整，最小化反向传播各单元的误差，不断迭代调整至输出层输出结果与期望匹配，结束网络训练。在线定位：通过智能终端设备采集测未知点的5G下行信号，按照步骤1-2提取多波束指纹特征，并将其作为特征值输入步骤3训练完毕的神经网络中，输出定位结果。本发明还提供一种基于5G多波束下行信号的指纹定位系统，包括：SSB提取模块、参考信号接收功率RSRP计算模块、参考信号接收质量RSRQ计算模块、多波束指纹特征构建模块和定位模块。SSB提取模块被配置为从5G下行信号中提取多波束SSB，基于多波束SSB得到多波束的SSS信号和DM-RS信号。参考信号接收功率RSRP计算模块被配置为从基于多波束的SSS信号和DM-RS信号计算多波束参考信号接收功率RSRP。参考信号接收质量RSRQ计算模块被配置为基于多波束SSB自相关计算得到5G下行同步信道的RSSI，基于多波束参考信号接收功率RSRP和RSSI计算多波束参考信号接收质量RSRQ。多波束指纹特征构建模块被配置为将多波束参考信号接收功率RSRP和多波束参考信号接收质量RSRQ堆叠形成多波束指纹特征。定位模块被配置为将多波束指纹特征输入到神经网络中，神经网络输出定位结果。基于5G多波束下行信号的指纹定位系统各个模块更详细的实现方法参见上述方法部分的步骤1-步骤3。在一些实施例中，还提供一种电子设备，电子设备可以是智能手机、车载终端、笔记本电脑、平板电脑、FPGA板卡等。电子设备包括处理器和存储器。存储器用于存储非暂时性指令。处理器用于运行非暂时性指令，非暂时性指令被处理器运行时可以执行上文所述的基于5G多波束下行信号的指纹定位方法中的一个或多个步骤。存储器和处理器可以通过总线系统和/或其它形式的连接机构互连。例如，处理器可以是中央处理单元、图形处理单元或者具有数据处理能力和/或程序执行能力的其它形式的处理单元。例如，中央处理单元可以为X86或ARM架构等。处理器可以为通用处理器或专用处理器，可以控制电子设备中的其它组件以执行期望的功能。例如，存储器可以是易失性存储器和/或非易失性存储器。易失性存储器例如可以包括随机存取存储器和/或高速缓冲存储器等。非易失性存储器例如可以包括只读存储器、硬盘、可擦除可编程只读存储器、紧凑型光盘只读储存器、USB存储器、闪存等。在存存储器上可以存储一个或多个程序模块，处理器可以运行一个或多个程序模块，以实现电子设备的各种功能。在一些实施例中，还提供一种存储介质，该存储介质用于存储非暂时性指令，当非暂时性指令由电子设备执行时可以实现上述的基于5G多波束下行信号的指纹定位方法中的一个或多个步骤。也就是本申请实施例提供的基于5G多波束下行信号的指纹定位方法以软件的形式实现并作为独立的产品销售或使用时，可以存储在一个存储介质中。关于存储介质的相关说明可以参考上文电子设备的存储器的相应描述，此处不再赘述。
