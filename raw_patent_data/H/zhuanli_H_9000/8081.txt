标题title
数字量输出模块
摘要abst
本公开的实施例涉及一种数字量输出模块，包括动态自锁保护单元，被配置为根据动态自锁控制信号以及反馈电压输入端的电压调节保护信号的电压；输出单元，包括：输出MOS管，栅极被配置为接收数字量控制信号以及保护信号，漏极与数字量输出模块的输出端电连接，输出MOS管被配置为当保护信号被使能时而被截止。该模块能够在数字量输出模块输出的电流大于预定电流阈值时，使得输出MOS管进入关闭且锁定状态，该模块能够在输出MOS管锁定状态下自主退出锁定状态，该模块通过控制MOS管的锁定及退出锁定两种形态，从而实现动态调整的过程，该过程有效降低MOS管在过流时所承受的功率，该模块还具备完整的断线以及短路检测能力。
权利要求书clms
1.一种数字量输出模块，其特征在于，包括：动态自锁保护单元，被配置为根据动态自锁控制信号以及反馈电压输入端的电压调节保护信号的电压，反馈电压输入端与输出MOS管的源极电连接，动态自锁控制信号为PWM信号；输出单元，包括：输出MOS管，输出MOS管的栅极被配置为接收数字量控制信号以及动态自锁保护单元所输出的保护信号，输出MOS管的漏极与所述数字量输出模块的输出端电连接，输出MOS管被配置为当保护信号被使能时而被截止，以及当保护信号未被使能并且数字量控制信号被使能时而被导通。2.根据权利要求1所述的数字量输出模块，其特征在于，动态自锁控制信号处于被使能状态的占空比被配置为控制输出MOS管被退出锁定状态的速度，其中输出MOS管被退出锁定状态的速度与动态自锁控制信号处于被使能状态的占空比的大小正相关。3. 根据权利要求1所述的数字量输出模块，其特征在于，还包括：控制单元，被配置为生成动态自锁控制信号，动态自锁保护单元，还包括：动态自锁控制端，被配置为接收动态自锁控制信号；以及保护信号输出端，被配置为输出保护信号。4.根据权利要求2所述的数字量输出模块，其特征在于，动态自锁保护单元还包括：第一三极管，第一三极管的基极分别与第三电阻的一端以及第六电阻的一端电连接，第一三极管的发射极与第一电阻的一端电连接，第一三极管的集电极与第二电阻的一端以及保护信号输出端电连接；第一电阻, 第一电阻的另一端与电源端电连接；第三电阻，第三电阻的另一端与锁定MOS管的漏极电连接；第六电阻，第六电阻的另一端与反馈电压输入端电连接；第二电阻，第二电阻的另一端分别与锁定MOS管的栅极、第四电阻的一端以及第一电容的一端电连接；锁定MOS管，锁定MOS管的源极与接地端电连接；第一电容，第一电容的另一端与接地端电连接，以及第四电阻，第四电阻的另一端与接地端电连接。5.根据权利要求1所述的数字量输出模块，其特征在于，还包括断线检测单元，断线检测单元包括：第二三极管，第二三极管的发射极与输出MOS管的源极电连接，第二三极管的基极与第八电阻的一端电连接，第二三极管的集电极与第九电阻的一端电连接，第二三极管的集电极被配置为输出断线检测结果信号；第八电阻，第八电阻的另一端与输出MOS管的漏极电连接；以及第九电阻，第九电阻的另一端与接地端电连接。6.根据权利要求2所述的数字量输出模块，其特征在于，控制单元还被配置为：使得数字量控制信号被使能，并维持预定时长，预定时长小于或者等于与数字量输出模块的输出端电连接的外部负载的负载响应时间的一半；确定保护信号输出端的电平状态；以及根据保护信号输出端的电平状态确定与数字量输出模块的输出端电连接的外部负载是否短路。7. 根据权利要求2所述的数字量输出模块，其特征在于，控制单元还被配置为：在输出MOS管处于导通状态时，确定保护信号输出端的电平状态，以及根据保护信号输出端的电平状态确定与数字量输出模块的输出端电连接的外部负载是否短路。8.根据权利要求4所述的数字量输出模块，其特征在于，还包括：第一二极管，第一二极管的正极与第一三极管的集电极电连接，第一二极管的负极与输出MOS管的栅极电连接。9. 根据权利要求1所述的数字量输出模块，其特征在于，输出单元还包括：第十电阻，第十电阻的一端与输出MOS管的源极电连接，第十电阻的另一端与电源端电连接；以及第七电阻，第七电阻的一端与输出MOS管的栅极电连接，第七电阻的另一端被配置为接收数字量控制信号。10.根据权利要求3所述的数字量输出模块，其特征在于，还包括：第二二极管，第二二极管的正极与输出MOS管的漏极电连接，第二二极管的负极作为所述数字量输出模块的输出端。
说明书desc
技术领域本公开的实施例总体涉及脉冲技术领域，并且更具体地涉及一种数字量输出模块。背景技术数字量输出系统在PLC中应用广泛。传统的数字量输出系统中保护机制不完善，例如当负载电流过高或者负载发生短路时，难以及时有效地对数字量输出系统进行保护，因而导致数字量输出系统被损坏。综上，当负载电流过高或者负载发生短路时，难以及时有效地对数字量输出系统进行保护。发明内容针对上述问题，本公开提供了一种数字量输出模块，能够在数字量输出模块输出的电流大于预定电流阈值时，使得输出MOS管进入关闭且锁定状态，该数字量输出模块能够在输出MOS管锁定状态下自主退出锁定状态，该数字量输出模块通过控制MOS管的锁定及退出锁定两种形态，从而实现动态调整的过程，该过程有效降低MOS管在过流时所承受的功率，该数字量输出模块还具备完整的断线以及短路检测能力。根据本公开的一个方面，提供一种数字量输出模块。该数字量输出模块包括：动态自锁保护单元，被配置为根据动态自锁控制信号以及反馈电压输入端的电压调节保护信号的电压，反馈电压输入端与输出MOS管的源极电连接，动态自锁控制信号为PWM信号；输出单元，包括：输出MOS管，输出MOS管的栅极被配置为接收数字量控制信号以及动态自锁保护单元所输出的保护信号，输出MOS管的漏极与所述数字量输出模块的输出端电连接，输出MOS管被配置为当保护信号被使能时而被截止，以及当保护信号未被使能并且数字量控制信号被使能时而被导通。在一些实施例中，动态自锁控制信号处于被使能状态的占空比被配置为控制输出MOS管被退出锁定状态的速度，其中输出MOS管被退出锁定状态的速度与动态自锁控制信号处于被使能状态的占空比的大小正相关。在一些实施例中，该数字量输出模块还包括：控制单元，被配置为生成动态自锁控制信号，动态自锁保护单元，还包括：动态自锁控制端，被配置为接收动态自锁控制信号；以及保护信号输出端，被配置为输出保护信号。在一些实施例中，动态自锁保护单元还包括：第一三极管，第一三极管的基极分别与第三电阻的一端以及第六电阻的一端电连接，第一三极管的发射极与第一电阻的一端电连接，第一三极管的集电极与第二电阻的一端以及保护信号输出端电连接；第一电阻, 第一电阻的另一端与电源端电连接；第三电阻，第三电阻的另一端与锁定MOS管的漏极电连接；第六电阻，第六电阻的另一端与反馈电压输入端电连接；第二电阻，第二电阻的另一端分别与锁定MOS管的栅极、第四电阻的一端以及第一电容的一端电连接；锁定MOS管，锁定MOS管的源极与接地端电连接；第一电容，第一电容的另一端与接地端电连接，以及第四电阻，第四电阻的另一端与接地端电连接。在一些实施例中，该数字量输出模块还包括断线检测单元，断线检测单元包括：第二三极管，第二三极管的发射极与输出MOS管的源极电连接，第二三极管的基极与第八电阻的一端电连接，第二三极管的集电极与第九电阻的一端电连接，第二三极管的集电极被配置为输出断线检测结果信号；第八电阻，第八电阻的另一端与输出MOS管的漏极电连接；以及第九电阻，第九电阻的另一端与接地端电连接。在一些实施例中，控制单元还被配置为：使得数字量控制信号被使能，并维持预定时长，预定时长小于或者等于与数字量输出模块的输出端电连接的外部负载的负载响应时间的一半；确定保护信号输出端的电平状态；以及根据保护信号输出端的电平状态确定与数字量输出模块的输出端电连接的外部负载是否短路。在一些实施例中，控制单元还被配置为：在输出MOS管处于导通状态时，确定保护信号输出端的电平状态，以及根据保护信号输出端的电平状态确定与数字量输出模块的输出端电连接的外部负载是否短路。在一些实施例中，该数字量输出模块还包括：第一二极管，第一二极管的正极与第一三极管的集电极电连接，第一二极管的负极与输出MOS管的栅极电连接。在一些实施例中，输出单元还包括：第十电阻，第十电阻的一端与输出MOS管的源极电连接，第十电阻的另一端与电源端电连接；以及第七电阻，第七电阻的一端与输出MOS管的栅极电连接，第七电阻的另一端被配置为接收数字量控制信号。在一些实施例中，该数字量输出模块还包括：第二二极管，第二二极管的正极与输出MOS管的漏极电连接，第二二极管的负极作为所述数字量输出模块的输出端。应当理解，本部分所描述的内容并非旨在标识本公开的实施例的关键或重要特征，也不用于限制本公开的范围。本公开的其它特征将通过以下的说明书而变得容易理解。附图说明结合附图并参考以下详细说明，本公开各实施例的上述和其他特征、优点及方面将变得更加明显。在附图中，相同或相似的附图标注表示相同或相似的元素。图1示出了本公开的实施例的数字量输出模块的方框示意图。图2示出了本公开的实施例的数字量输出模块的局部的电路示意图。图3示出了本公开的实施例的动态自锁控制信号与输出MOS管的栅极电压的波形示意图。图4示出了本公开的实施例的数字量输出模块的局部的电路示意图。具体实施方式以下结合附图对本公开的示范性实施例做出说明，其中包括本公开实施例的各种细节以助于理解，应当将它们认为仅仅是示范性的。因此，本领域普通技术人员应当认识到，可以对这里描述的实施例做出各种改变和修改，而不会背离本公开的范围和精神。同样，为了清楚和简明，以下的描述中省略了对公知功能和结构的描述。在本文中使用的术语“包括”及其变形表示开放性包括，即“包括但不限于”。除非特别申明，术语“或”表示“和/或”。术语“基于”表示“至少部分地基于”。术语“一个示例实施例”和“一个实施例”表示“至少一个示例实施例”。术语“另一实施例”表示“至少一个另外的实施例”。术语“第一”、“第二”等等可以指代不同的或相同的对象。下文还可能包括其他明确的和隐含的定义。如前文所描述，传统的数字量输出系统中保护机制不完善，例如当负载电流过高或者负载发生短路时，难以及时有效地对数字量输出系统进行保护，因而导致数字量输出系统被损坏。为了至少部分地解决上述问题以及其他潜在问题中的一个或者多个，本公开的示例实施例提出了一种数字量输出模块方案。在本公开方案中，动态自锁保护单元被配置为根据动态自锁控制信号以及反馈电压输入端的电压调节保护信号的电压，因此，当数字量输出模块输出的电流大于预定电流阈值时，使得输出MOS管截止从而进入锁定保护状态；在此基础上，动态自锁控制单元还可以响应于被使能的动态自锁控制信号而使得保护信号未被使能，从而使得输出MOS管自动退出锁定保护状态，具体地，该数字量输出模块能够在输出MOS管锁定状态下自主退出锁定状态，该数字量输出模块通过控制MOS管的锁定及退出锁定两种形态，从而实现动态调整的过程，该过程有效降低MOS管在过流时所承受的功率。该方案可以及时有效地对数字量输出模块进行保护。图1示出了本公开的实施例的数字量输出模块100的方框示意图。数字量输出模块100包括动态自锁保护单元102、输出单元104。动态自锁保护单元102被配置为根据动态自锁控制信号EDOCL以及反馈电压输入端Vf的电压调节保护信号PR的电压。其中，反馈电压输入端与输出MOS管的源极电连接，动态自锁控制信号为PWM信号。输出单元104包括输出MOS管。输出MOS管的栅极被配置为接收数字量控制信号EDO-0以及动态自锁保护单元所输出的保护信号PR，输出MOS管的漏极与数字量输出模块100的输出端电连接，输出MOS管被配置为当保护信号PR被使能时而被截止，以及当保护信号PR未被使能并且数字量控制信号EDO-0被使能时而被导通。应当理解，数字量输出模块100的输出端与外部负载110电连接。需要说明的是，反馈电压输入端Vf的电压反映出数字量输出模块100输出的电流的大小。动态自锁保护单元102根据动态自锁控制信号以及反馈电压输入端Vf的电压调节保护信号的电压，具体为：为当数字量输出模块输出的电流大于预定电流阈值时，动态自锁保护单元102使得所输出的保护信号PR被使能，以便使得输出MOS管被截止，以及当动态自锁控制信号EDOCL处于被使能状态时，动态自锁保护单元102使得所输出的保护信号PR未被使能，从而解除对输出MOS管的锁定。需要说明的是，数字量控制信号EDO-0可以由控制单元生成。在数字量输出模块100工作的过程中，输出MOS管响应于数字量控制信号EDO-0的控制而导通或者截止，从而实现数字量输出。例如，输出MOS管在数字量控制信号EDO-0被使能时导通，输出MOS管在数字量控制信号EDO-0未被使能时截止。当数字量输出模块100输出的电流大于预定电流阈值时，保护信号PR被使能，于是输出MOS管被截止，数字量输出模块100停止输出，也即，输出MOS管进入锁定保护状态。在此基础上，动态自锁控制单元102还可以响应于被使能的动态自锁控制信号而使得保护信号未被使能，从而使得输出MOS管自动退出锁定保护状态。也即，在上述方案中，藉由动态自锁保护单元，既可以保护数字量输出模块不受过流影响而损坏，又可以在无需外部干预的情况下，动态地自行退出锁定状态，以便重新对数字量输出模块输出电流进行判断。该方案可以及时有效地对数字量输出模块进行保护。在一些实施例中，基于动态自锁控制单元102的锁定以及自动退出锁定的机制，可以有效降低输出MOS管的占用率，以便显著降低输出MOS管以及相关电路的温度。在一些实施例中，保护信号被配置为在动态自锁控制信号被使能时而进入未被使能的状态。也即，当数字量输出模块100输出的电流大于预定电流阈值而使得保护信号PR被使能后，可以藉由动态自锁控制信号EDOCL的控制，使得动态自锁控制信号EDOCL被配置为使能状态时而使得保护信号PR进入未被使能的状态，这样，可以解除对输出MOS管的锁定，从而使得输出MOS管有机会再次被导通。于是，动态自锁控制单元102重新对数字量输出模块100输出的电流进行判断。应当理解，反馈电压输入端Vf的电压能够反映出数字量输出模块100输出的电流的大小。在一些实施例中，该数字量输出模块还包括控制单元。控制单元被配置为生成动态自锁控制信号。动态自锁保护单元包括动态自锁控制端、反馈电压输入端、保护信号输出端。动态自锁控制端被配置为接收动态自锁控制信号；反馈电压输入端与输出MOS管的源极电连接；保护信号输出端被配置为输出保护信号。动态自锁保护单元还被配置为根据动态自锁控制信号以及反馈电压输入端的电压调节保护信号输出端的电压。需要说明的是，动态自锁控制信号处于被使能状态的占空比被配置为控制输出MOS管被退出锁定状态的速度，其中输出MOS管被退出锁定状态的速度与动态自锁控制信号处于被使能状态的占空比的大小正相关。也即，在动态自锁控制信号的一个周期内，动态自锁控制信号处于被使能状态的占空比越大，则输出MOS管被退出锁定状态所消耗的时间越短；动态自锁控制信号处于被使能状态的占空比越小，则输出MOS管被退出锁定状态所消耗的时间越长。在一些实施例中，动态自锁控制信号EDOCL为PWM信号，在动态自锁控制信号EDOCL的一个周期内，动态自锁控制信号EDOCL处于被使能状态的时间小于输出MOS管的开通时间。在该方案中，藉由对动态自锁控制信号EDOCL在其一个周期中处于被使能状态的时间的配置，可以有效降低输出MOS管的占用率，从而显著降低输出MOS管的温度。图2示出了本公开的实施例的数字量输出模块200的局部的电路示意图。数字量输出模块200包括控制单元202、动态自锁保护单元204和输出单元206。应当理解，数字量输出模块200为高边驱动的数字量输出模块。关于控制单元202，其被配置为生成动态自锁控制信号EDOCL。控制单元202例如可以采用MCU实现。动态自锁保护单元204包括动态自锁控制端、反馈电压输入端Vf、保护信号输出端。动态自锁控制端被配置为接收动态自锁控制信号EDOCL；反馈电压输入端Vf与输出MOS管的源极电连接；保护信号输出端被配置为输出保护信号PR。动态自锁保护单元204还被配置为根据动态自锁控制信号EDOCL以及反馈电压输入端的电压调节保护信号输出端的电压。关于动态自锁保护单元204，其例如还包括第一三极管 IC1、第一电阻 R1、第三电阻R3、第六电阻R6、第二电阻R2、第一电容C1、第四电阻R4以及锁定MOS管IC2。第一三极管IC1的基极分别与第三电阻 R3的一端以及第六电阻R6的一端电连接，第一三极管的发射极与第一电阻 R1的一端电连接，第一三极管的集电极与第二电阻 R2的一端以及保护信号输出端电连接。第一电阻 R1的另一端与电源端电连接。第三电阻R3的另一端与锁定MOS管的漏极电连接。第六电阻R6的另一端与反馈电压输入端Vf电连接。第二电阻R2的另一端分别与锁定MOS管的栅极、第四电阻R4的一端以及第一电容C1的一端电连接。锁定MOS管IC2的源极与接地端电连接。第一电容C1的另一端与接地端电连接。第四电阻R4的另一端与接地端GND电连接。应当理解，第一三极管 IC1为PNP型三极管，锁定MOS管IC2为N沟道MOS管。需要说明的是，当反馈电压输入端Vf的电压满足预定条件，即当数字量输出模块输出的电流大于预定电流阈值时，动态自锁保护单元204所输出的保护信号PR被使能，以便使得输出MOS管被截止。在此基础上，动态自锁保护单元204所输出的保护信号PR还受到动态自锁控制信号EDOCL的影响。在动态自锁保护单元204所输出的保护信号PR被使能时，藉由动态自锁控制信号EDOCL被配置为使能状态，动态自锁保护单元204使得所输出的保护信号PR未被使能，从而解除对输出MOS管的锁定。后文将详细说明动态自锁保护单元204的工作机制，此处不再赘述。在一些实施例中，数字量输出模块200还包括第一二极管D1，第一二极管D1的正极与第一三极管IC1的集电极电连接，第一二极管D1的负极与输出MOS管IC3的栅极电连接。第一二极管D1作为反向截止保护管，可以避免数字量控制信号EDO-0对第一三极管IC1形成误操作。关于输出单元206，其例如包括输出MOS管IC3、第十电阻Rb、第七电阻R7。输出MOS管IC3的漏极与数字量输出模块200的输出端VOUT电连接，输出MOS管IC3的源极还与第十电阻Rb的一端电连接，输出MOS管IC3的栅极还与第七电阻 R7电连接；第十电阻Rb的另一端与电源端VCC电连接；第七电阻 R7的另一端被配置为接收数字量控制信号EDO-0。应当理解，输出MOS管IC3为P沟道功率MOS管。在一些实施例中，输出单元206还包括第二二极管D2，第二二极管D2的正极与输出MOS管IC3的漏极电连接，第二二极管D2的负极作为数字量输出模块200的输出端VOUT。应当理解，当输出MOS管IC3的栅极电压Vg被使能时，输出MOS管IC3导通，数字量输出模块200向外部负载LOAD输出电能；当输出MOS管IC3的栅极电压Vg未被使能时，输出MOS管IC3截止，数字量输出模块200与外部负载LOAD断开。通过控制输出MOS管IC3的导通或者截止，可以使得数字量输出模块200经由其输出端VOUT实现数字量输出。需要说明的是，当控制单元202生成被使能的数字量控制信号EDO-0，从而使得输出MOS管IC3的栅极电压Vg为低电平时，输出MOS管IC3导通。数字量输出模块200输出的最大电流即是动态自锁保护单元204的上限电流，以Imax表征。动态自锁保护单元204的上限电流Imax由第一三极管 IC1的发射结电压Ueb1以及第十电阻Rb的电阻值决定，即Imax=Ueb1/Rb。图3示出了本公开的实施例的动态自锁控制信号与输出MOS管的栅极电压的波形示意图。其中，纵轴表征电压，横轴表征时间。需要说明的是，在数字量控制信号EDO-0被使能后，在第一时间区间t1内，输出单元206向外部负载LOAD输出的电流小于或者等于上限电流Imax，动态自锁保护单元204处于未启动状态。此时，输出MOS管IC3的栅极电压Vg为低电平，输出MOS管IC3处于导通状态。在第二时间区间t2内，输出单元206向外部负载LOAD输出的大于或者等于上限电流Imax，动态自锁保护单元204处于启动状态，第一三极管IC1处于放大状态，锁定MOS管IC2处于截止状态。应当理解，输出MOS管IC3的栅极电压Vg跟随保护信号输出端的电压而变化，输出MOS管IC3的栅极电压Vg反映出保护信号输出端的电压。应当理解，保护信号输出端的电压与第一三极管IC1的集电极OL_IN的电压正相关。在第三时间区间t3内，输出单元206向外部负载LOAD输出的大于或者等于上限电流Imax，动态自锁保护单元204处于启动状态，第一三极管IC1的基极增加流经第三电阻R3的电流，从而使得输出MOS管IC3的栅极电压Vg加速上升，第一三极管IC1进入饱和导通状态。在第四时间区间t4内，输出单元206向外部负载LOAD输出的大于或者等于上限电流Imax，动态自锁保护单元204处于启动状态，输出MOS管IC3的栅极电压Vg上升至第一电压V1，第一三极管IC1进入饱和导通状态，锁定MOS管IC2导通，于是输出MOS管IC3截止，输出单元206被关闭，输出单元206对外部负载LOAD无输出。在第五时间区间t5内，动态自锁控制信号EDOCL被配置为低电平，于是锁定MOS管IC2截止，第一三极管IC1又回到放大状态，重新开始对第一电容C1充电。相应地，输出MOS管IC3的栅极电压Vg下降至第二电压V2，于是输出MOS管IC3导通，输出单元206向外部负载LOAD输出电能。需要说明的是，在动态自锁保护单元204中，藉由对第一电阻R1、第六电阻R6、第二电阻R2以及第四电阻R4的电阻值的合理设置，能够保证在第二时间区间t2内第一三极管IC1工作在放大状态，并对第一电容C1充电。在第三时间区间t3内，在第一电容C1被充电达到锁定MOS管IC2导通电压时，第三电阻R3可以协助第六电阻R6使得第一三极管IC1进入饱和导通状态。应当理解，第二电阻R2与第一电容C1组成充电延时电路。第二电阻R2为该充电延时电路的充电限流电阻。动态自锁保护单元204的灵敏度取决于充电延时电路的延时时间。充电延时电路的延时时间与第二电阻R2的电阻值以及第一电容C1的电容值相关。应当理解，在第一电容C1的电容值不变的情况下，第二电阻R2的电阻值越小，则充电延时电路的延时时间越小，则动态自锁保护单元204的灵敏度越高；反之，第二电阻R2的电阻值越大，则充电延时电路的延时时间越大，则动态自锁保护单元204的灵敏度越低。应当理解，第四电阻R4与第二电阻R2形成一分压结构。藉由对第四电阻R4以及第二电阻R2的合理设置，可以使得锁定MOS管IC2的栅源电压处于合理范围内。需要说明的是，动态自锁控制信号EDOCL为PWM信号，在动态自锁控制信号EDOCL的一个周期内，动态自锁控制信号EDOCL处于被使能状态的时间te小于输出MOS管IC3的开通时间。应当理解，输出MOS管IC3的开通时间为输出MOS管IC3的固有属性。因此，可以根据输出MOS管IC3的开通时间合理设置在动态自锁控制信号EDOCL的一个周期内，动态自锁控制信号EDOCL处于被使能状态的时间te。对于动态自锁保护单元204的工作模式，需要说明的是，当输出单元206向外部负载LOAD输出的电流小于上限电流Imax时，动态自锁保护单元204处于未启动状态，相应地，第一三极管IC1处于截止状态，保护信号PR为低电平。当输出单元206向外部负载LOAD输出的电流大于或者等于上限电流Imax时，动态自锁保护单元204处于启动状态，于是，流经第一三极管IC1的基极的电流增大，第一三极管IC1进入放大状态。第一三极管IC1的集电极OL_IN此时由低电平变为VCC-Uec，其中，Uec表征第一三极管IC1的发射极与集电极之间的电压。经过第一二极管D1，使得输出MOS管IC3的栅源电压减小，数字量输出模块200以上限电流Imax持续向外部负载LOAD输出电能。应当理解，如果数字量输出模块200一直维持该输出状态，将导致包括数字量输出模块200在内的系统温升增加。为了避免这种情况，藉由动态自锁保护单元204，当输出单元206向外部负载LOAD输出的电流大于或者等于上限电流Imax时，第一三级管IC1中形成电流，第一电容C1不断被充电。当第一电容C1两端的电压达到锁定MOS管IC2的导通电压时，锁定MOS管IC2由截止状态转为导通状态，于是，第三电阻R3中形成电流。需要说明的是，第一电容C1充电电压为Vc1=R4/*。锁定MOS管IC2导通后，第一三极管IC1的集电极电流从原本流经第六电阻R6的电流变为流经第六电阻R6的电流与流经第三电阻R3的电流之和，这使得第一三级管IC1由放大状态进入饱和导通状态。此时，第一三极管IC1的集电极OL_IN的电压等于VCC-Usat，其中Usat 表征第一三级管IC1的饱和压降电压。第一三极管IC1的集电极OL_IN的电压经过第一二极管D1后，使得输出MOS管IC3截止，于是，输出单元206断开输出，以便有效控制输出MOS管上的温度升高状况，避免输出MOS管IC3发生例如温升击穿等情况。在上述方案中，藉由动态自锁保护单元204，数字量输出模块200可以在输出单元206向外部负载LOAD输出的电流大于或者等于上限电流Imax时，形成自锁保护，以避免输出的电流过大。进一步地，动态自锁保护单元204还具有合理的自锁保护退出机制，有效避免输出MOS管发生例如温升击穿等情况。图4示出了本公开的实施例的数字量输出模块300的局部的电路示意图。数字量输出模块300还包括断线检测单元208。断线检测单元208包括：第二三极管IC7、第八电阻R8、第九电阻R9。第二三极管IC7的发射极与输出MOS管IC3的源极电连接，第二三极管IC7的基极与第八电阻R8的一端电连接，第二三极管IC7的集电极与第九电阻R9的一端电连接，第二三极管IC7的集电极被配置为输出断线检测结果信号OP_IN。在一些实施例中，控制单元202接收断线检测单元208所输出的断线检测结果信号OP_IN。第八电阻R8的另一端与输出MOS管的漏极电连接，第九电阻R9的另一端与接地端电连接。需要说明的是，在一些实施例中，第十电阻Rb为功率电流电阻，外部负载LOAD的电阻值通常为几欧姆至几千欧姆。为防止第二三极管IC7未被使能时漏电流过大而导致外部负载LOAD端误动作，第八电阻R8的取值应保证外部负载LOAD上的漏电流小于或者等于所允许的电流值。于是，第八电阻R8的最大值R8max满足以下公式所示的公式：R8max+Rb+Rload=/ Imax1其中，Rload表征外部负载LOAD的电阻值，Ueb7表征第二三极管IC7的发射结电压。以所允许的电流值Imax1为1mA、电源电压VCC为24V为例， R8max大致等于VCC/1mA。因此，第八电阻R8的取值为几十千欧姆级别。在一些实施例中，第八电阻R8的电阻值例如为20至55千欧之间的任意值。关于第九电阻R9的电阻值，可以结合第二三极管IC7的放大倍数合理配置。应当理解，第九电阻R9的电阻值应当使得R9*Iec达到能够表征高电平的电压值。其中，Iec表征第二三极管IC7的电流。需要说明的是，在输出MOS管IC3被使能时，第二二极管D2两端的电压以及输出MOS管IC3的导通压降，可以使得第二三极管IC7导通，第二三极管IC7将进入放大状态或者饱和导通状态。如果断线检测单元208所输出的断线检测结果信号OP_IN为高电平，则表明外部负载LOAD未断线；如果断线检测单元208所输出的断线检测结果信号OP_IN为低电平，则表明外部负载LOAD发生断线。在输出MOS管IC3未被使能时，电流回路由第十电阻Rb、第八电阻R8、第二三极管IC7以及外部负载LOAD形成。需要说明的是，第十电阻Rb以及外部负载LOAD的电阻值相较于第八电阻R8的电阻值来说非常小，甚至可以忽略不计。因此，电源端VCC的电压经由分压后施加于第二三极管IC7的基级，于是第二三极管IC7导通，断线检测单元208所输出的断线检测结果信号OP_IN脚由低电平变为高电平，则表明外部负载LOAD未发生断线。否则，如果断线检测单元208所输出的断线检测结果信号OP_IN为低电平，则表明外部负载LOAD发生断线。综上所述，无论输出MOS管IC3是否被使能，外部负载LOAD发生断线的情况下，第二三极管IC7的发射极电压与集电极电压相同，第二三极管IC7处于截止状态，断线检测单元208所输出的断线检测结果信号OP_IN为低电平。因此，可以根据断线检测单元208所输出的断线检测结果信号OP_IN为低电平确定外部负载LOAD发生断线。在一些实施例中，控制单元还被配置为在确定外部负载LOAD发生断线时，输出断线报警信号。在一些实施例中，控制单元202还被配置为：使得数字量控制信号EDO-0被使能，并维持预定时长，预定时长小于或者等于与数字量输出模块的输出端电连接的外部负载的负载响应时间的一半；确定保护信号输出端的电平状态，以及根据保护信号输出端的电平状态确定与数字量输出模块的输出端电连接的外部负载LOAD是否短路。应当理解，保护信号输出端的电压与第一三极管IC1的集电极OL_IN的电压正相关，所以，保护信号输出端的电平状态与第一三极管IC1的集电极OL_IN的电平状态相当。因此，可以通过确定第一三极管IC1的集电极OL_IN的电平状态来确定保护信号输出端的电平状态。在输出MOS管IC3未被使能时，控制单元202使得数字量控制信号EDO-0被使能，并维持数字量控制信号EDO-0处于被使能状态达到预定时长。该预定时长小于或者等于与数字量输出模块的输出端电连接的外部负载的负载响应时间的一半。在达到预定时长时，控制单元202读取第一三极管IC1的集电极OL_IN的电平状态以便确定保护信号输出端的电平状态。如果控制单元确定保护信号输出端的电平状态为高电平，则表明外部负载LOAD发生短路。如果控制单元确定保护信号输出端的电平状态为低电平，则表明外部负载LOAD未发生短路。在一些实施例中，控制单元202还被配置为：在输出MOS管IC3处于导通状态时，确定保护信号输出端的电平状态，以及根据保护信号输出端的电平状态确定与数字量输出模块的输出端电连接的外部负载是否短路。在输出MOS管IC3被使能时，控制单元202读取第一三极管IC1的集电极OL_IN的电平状态以便确定保护信号输出端的电平状态。如果控制单元确定保护信号输出端 OL_IN的电平状态为高电平，则表明外部负载LOAD发生短路。如果控制单元确定保护信号输出端 OL_IN的电平状态为低电平，则表明外部负载LOAD未发生短路。需要说明的是，当外部负载LOAD发生短路时，输出单元206向外部负载LOAD输出的电流大于或者等于上限电流Imax，第一三极管IC1的基极电流增大，因此，第一三极管IC1由截止状态变为放大状态，于是，保护信号输出端的电平状态由低电平变为高电平。因此，控制单元202可以根据保护信号输出端的电平状态确定外部负载LOAD是否发生短路。在一些实施例中，控制单元还被配置为在确定外部负载LOAD发生短路时，输出短路报警信号。以上已经描述了本发明的各实施例，上述说明是示例性的，并非穷尽性的，并且也不限于所披露的各实施例。在不偏离所说明的各实施例的范围和精神的情况下，对于本技术领域的普通技术人员来说许多修改和变更都是显而易见的。本文中所用术语的选择，旨在最好地解释各实施例的原理、实际应用或对市场中的技术改进，或者使本技术领域的其它普通技术人员能理解本文披露的各实施例。以上仅为本发明的可选实施例，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等效替换、改进等，均应包含在本发明的保护范围之内。
