标题title
一种照明灯具的转向方法、装置、设备及存储介质
摘要abst
本发明公开了一种照明灯具的转向方法、装置、设备及存储介质，该方法包括：控制微波雷达扫描环境，获得从环境反射回来的微波信号；根据微波信号检测用户在环境中移动时形成的数据点；对数据点执行随机抽样一致操作，以拟合用户在环境中移动形成的第一路径；沿第一路径将数据点聚类至多个簇中；滤除处于多个簇的边缘的数据点；将多个簇中滤除剩余的数据点融合为用户在环境中移动形成的区域；转动照明灯具，以使照明灯具的照明方向朝向区域。满足了用户用灯的需求，减少用户手动控制照明灯具的频次，提高了控制照明灯具的便捷性，降低控制照明灯具的延时。
权利要求书clms
1.一种照明灯具的转向方法，其特征在于，所述照明灯具设置有微波雷达，所述方法包括：控制所述微波雷达扫描环境，获得从所述环境反射回来的微波信号；根据所述微波信号检测用户在所述环境中移动时形成的数据点；对所述数据点执行随机抽样一致操作，以拟合所述用户在所述环境中移动形成的第一路径；沿所述第一路径将所述数据点聚类至多个簇中；滤除处于多个所述簇的边缘的所述数据点；将多个所述簇中滤除剩余的所述数据点融合为所述用户在所述环境中移动形成的区域；转动所述照明灯具，以使所述照明灯具的照明方向朝向所述区域。2.根据权利要求1所述的方法，其特征在于，所述沿所述第一路径将所述数据点聚类至多个簇中，包括：配置与所述第一路径适配的目标值；初始化数量为所述目标值的簇，各个所述簇中均具有中心点；计算所述数据点与各个所述中心点之间的第一距离；将所述数据点划分至所述第一距离最小的所述簇中；在每个所述簇中，计算所述数据点的平均值，以更新所述簇的所述中心点；判断所述中心点在更新时的变化幅度是否小于或等于预设的第一阈值；若否，则返回执行所述计算所述数据点与各个所述中心点之间的第一距离；若是，则计算各个所述中心点与所述第一路径之间的第二距离；判断所述第二距离是否均小于或等于预设的第二阈值；若是，则确定所述簇收敛；若否，则调节所述目标值，返回执行所述初始化数量为所述目标值的簇。3.根据权利要求2所述的方法，其特征在于，所述配置与所述第一路径适配的目标值，包括：测量所述第一路径的长度；将所述长度乘以预设的系数，获得基准值；生成包含所述基准值的路径范围；将所述路径范围的下限值初始化为目标值。4.根据权利要求3所述的方法，其特征在于，所述调节所述目标值，包括：判断所述目标值是否小于所述路径范围的上限值；若是，则在当前所述目标值的基础上添加预设的步长，作为新的目标值。5.根据权利要求2所述的方法，其特征在于，所述滤除处于多个所述簇的边缘的所述数据点，包括：从所有所述簇中筛选出相邻的两个所述簇；针对每对相邻的两个所述簇，将相邻的两个所述簇中的所述中心点连接，以拟合所述用户在所述环境中移动形成的第二路径；计算各个所述数据点与所述第二路径之间的第三距离；判断所述第三距离是否小于或等于预设的第三阈值；若是，则保留所述数据点；若否，则滤除所述数据点。6.根据权利要求1-5中任一项所述的方法，其特征在于，所述将多个所述簇中滤除剩余的所述数据点融合为所述用户在所述环境中移动形成的区域，包括：对多个所述簇中滤除剩余的所述数据点添加维诺图，所述维诺图包括多个单元，每个所述单元包含一个所述数据点，所述单元具有多条边；针对多个所述簇中滤除剩余的所述数据点，筛选出位于同一条所述边两侧的所述数据点，作为位置相邻的点对；以所述点对的所述数据点作为顶点，将所述顶点连接为三角形的网格，以组成所述用户在所述环境中移动形成的区域。7.根据权利要求1-5中任一项所述的方法，其特征在于，所述转动所述照明灯具，以使所述照明灯具的照明方向朝向所述区域，包括：统计各个所述簇中滤除剩余的所述数据点的数量；筛选出所述数量最多的n个所述簇，作为目标簇；确定目标点、作为所述区域的重心，所述目标点与各个所述目标簇的中心点的第四距离均相等；转动所述照明灯具、直至所述照明灯具的照明方向与所述重心重合。8.一种照明灯具的转向装置，其特征在于，所述照明灯具设置有微波雷达，所述装置包括：环境扫描模块，用于控制所述微波雷达扫描环境，获得从所述环境反射回来的微波信号；数据点检测模块，用于根据所述微波信号检测用户在所述环境中移动时形成的数据点；路径形成模块，用于对所述数据点执行随机抽样一致操作，以拟合所述用户在所述环境中移动形成的第一路径；点聚类模块，用于沿所述第一路径将所述数据点聚类至多个簇中；点滤除模块，用于滤除处于多个所述簇的边缘的所述数据点；移动区域融合模块，用于将多个所述簇中滤除剩余的所述数据点融合为所述用户在所述环境中移动形成的区域；灯具转动模块，用于转动所述照明灯具，以使所述照明灯具的照明方向朝向所述区域。9.一种电子设备，其特征在于，所述电子设备包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-7中任一项所述的照明灯具的转向方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机程序，所述计算机程序用于使处理器执行时实现权利要求1-7中任一项所述的照明灯具的转向方法。
说明书desc
技术领域本发明涉及技术领域，尤其涉及一种照明灯具的转向方法、装置、设备及存储介质。背景技术照明灯具是用户常用的生活家电之一，许多照明灯具设置有可旋转的底座，用户可以根据自身的需求通过遥控器、声控等控制方式手动控制照明灯具转向，这些控制方式的操作较为繁琐，使得控制的延时较高。发明内容本发明提供了一种照明灯具的转向方法、装置、设备及存储介质，以解决如何降低控制照明灯具的转向的延时的问题。根据本发明的一方面，提供了一种照明灯具的转向方法，所述照明灯具设置有微波雷达，所述方法包括：控制所述微波雷达扫描环境，获得从所述环境反射回来的微波信号；根据所述微波信号检测用户在所述环境中移动时形成的数据点；对所述数据点执行随机抽样一致操作，以拟合所述用户在所述环境中移动形成的第一路径；沿所述第一路径将所述数据点聚类至多个簇中；滤除处于多个所述簇的边缘的所述数据点；将多个所述簇中滤除剩余的所述数据点融合为所述用户在所述环境中移动形成的区域；转动所述照明灯具，以使所述照明灯具的照明方向朝向所述区域。可选地，所述沿所述第一路径将所述数据点聚类至多个簇中，包括：配置与所述第一路径适配的目标值；初始化数量为所述目标值的簇，各个所述簇中均具有中心点；计算所述数据点与各个所述中心点之间的第一距离；将所述数据点划分至所述第一距离最小的所述簇中；在每个所述簇中，计算所述数据点的平均值，以更新所述簇的所述中心点；判断所述中心点在更新时的变化幅度是否小于或等于预设的第一阈值；若否，则返回执行所述计算所述数据点与各个所述中心点之间的第一距离；若是，则计算各个所述中心点与所述第一路径之间的第二距离；判断所述第二距离是否均小于或等于预设的第二阈值；若是，则确定所述簇收敛；若否，则调节所述目标值，返回执行所述初始化数量为所述目标值的簇。可选地，所述配置与所述第一路径适配的目标值，包括：测量所述第一路径的长度；将所述长度乘以预设的系数，获得基准值；生成包含所述基准值的路径范围；将所述路径范围的下限值初始化为目标值。可选地，所述调节所述目标值，包括：判断所述目标值是否小于所述路径范围的上限值；若是，则在当前所述目标值的基础上添加预设的步长，作为新的目标值。可选地，所述滤除处于多个所述簇的边缘的所述数据点，包括：从所有所述簇中筛选出相邻的两个所述簇；针对每对相邻的两个所述簇，将相邻的两个所述簇中的所述中心点连接，以拟合所述用户在所述环境中移动形成的第二路径；计算各个所述数据点与所述第二路径之间的第三距离；判断所述第三距离是否小于或等于预设的第三阈值；若是，则保留所述数据点；若否，则滤除所述数据点。可选地，所述将多个所述簇中滤除剩余的所述数据点融合为所述用户在所述环境中移动形成的区域，包括：对多个所述簇中滤除剩余的所述数据点添加维诺图，所述维诺图包括多个单元，每个所述单元包含一个所述数据点，所述单元具有多条边；针对多个所述簇中滤除剩余的所述数据点，筛选出位于同一条所述边两侧的所述数据点，作为位置相邻的点对；以所述点对的所述数据点作为顶点，将所述顶点连接为三角形的网格，以组成所述用户在所述环境中移动形成的区域。可选地，所述转动所述照明灯具，以使所述照明灯具的照明方向朝向所述区域，包括：统计各个所述簇中滤除剩余的所述数据点的数量；筛选出所述数量最多的n个所述簇，作为目标簇；确定目标点、作为所述区域的重心，所述目标点与各个所述目标簇的中心点的第四距离均相等；转动所述照明灯具、直至所述照明灯具的照明方向与所述重心重合。根据本发明的另一方面，提供了一种照明灯具的转向装置，所述照明灯具设置有微波雷达，所述装置包括：环境扫描模块，用于控制所述微波雷达扫描环境，获得从所述环境反射回来的微波信号；数据点检测模块，用于根据所述微波信号检测用户在所述环境中移动时形成的数据点；路径形成模块，用于对所述数据点执行随机抽样一致操作，以拟合所述用户在所述环境中移动形成的第一路径；点聚类模块，用于沿所述第一路径将所述数据点聚类至多个簇中；点滤除模块，用于滤除处于多个所述簇的边缘的所述数据点；移动区域融合模块，用于将多个所述簇中滤除剩余的所述数据点融合为所述用户在所述环境中移动形成的区域；灯具转动模块，用于转动所述照明灯具，以使所述照明灯具的照明方向朝向所述区域。可选地，所述点聚类模块还用于：配置与所述第一路径适配的目标值；初始化数量为所述目标值的簇，各个所述簇中均具有中心点；计算所述数据点与各个所述中心点之间的第一距离；将所述数据点划分至所述第一距离最小的所述簇中；在每个所述簇中，计算所述数据点的平均值，以更新所述簇的所述中心点；判断所述中心点在更新时的变化幅度是否小于或等于预设的第一阈值；若否，则返回执行所述计算所述数据点与各个所述中心点之间的第一距离；若是，则计算各个所述中心点与所述第一路径之间的第二距离；判断所述第二距离是否均小于或等于预设的第二阈值；若是，则确定所述簇收敛；若否，则调节所述目标值，返回执行所述初始化数量为所述目标值的簇。可选地，所述点聚类模块还用于：测量所述第一路径的长度；将所述长度乘以预设的系数，获得基准值；生成包含所述基准值的路径范围；将所述路径范围的下限值初始化为目标值。可选地，所述点聚类模块还用于：判断所述目标值是否小于所述路径范围的上限值；若是，则在当前所述目标值的基础上添加预设的步长，作为新的目标值。可选地，所述点滤除模块还用于：从所有所述簇中筛选出相邻的两个所述簇；针对每对相邻的两个所述簇，将相邻的两个所述簇中的所述中心点连接，以拟合所述用户在所述环境中移动形成的第二路径；计算各个所述数据点与所述第二路径之间的第三距离；判断所述第三距离是否小于或等于预设的第三阈值；若是，则保留所述数据点；若否，则滤除所述数据点。可选地，所述移动区域融合模块还用于：对多个所述簇中滤除剩余的所述数据点添加维诺图，所述维诺图包括多个单元，每个所述单元包含一个所述数据点，所述单元具有多条边；针对多个所述簇中滤除剩余的所述数据点，筛选出位于同一条所述边两侧的所述数据点，作为位置相邻的点对；以所述点对的所述数据点作为顶点，将所述顶点连接为三角形的网格，以组成所述用户在所述环境中移动形成的区域。可选地，所述灯具转动模块还用于：统计各个所述簇中滤除剩余的所述数据点的数量；筛选出所述数量最多的n个所述簇，作为目标簇；确定目标点、作为所述区域的重心，所述目标点与各个所述目标簇的中心点的第四距离均相等；转动所述照明灯具、直至所述照明灯具的照明方向与所述重心重合。根据本发明的另一方面，提供了一种电子设备，所述电子设备包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够执行本发明任一实施例所述的照明灯具的转向方法。根据本发明的另一方面，提供了一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序用于使处理器执行时实现本发明任一实施例所述的照明灯具的转向方法。在本实施例中，控制微波雷达扫描环境，获得从环境反射回来的微波信号；根据微波信号检测用户在环境中移动时形成的数据点；对数据点执行随机抽样一致操作，以拟合用户在环境中移动形成的第一路径；沿第一路径将数据点聚类至多个簇中；滤除处于多个簇的边缘的数据点；将多个簇中滤除剩余的数据点融合为用户在环境中移动形成的区域；转动照明灯具，以使照明灯具的照明方向朝向区域。在拟合用户在环境中移动形成的第一路径的约束下，对用户在环境中移动时形成的数据点聚类得到多个簇，可以在一定程度上体验用户在环境中真实移动形成的路径的分布，进而扩展为用户在环境中移动形成的区域，依此控制照明灯具转向，为用户提供照明的光线，满足了用户用灯的需求，减少用户手动控制照明灯具的频次，提高了控制照明灯具的便捷性，降低控制照明灯具的延时。并且，由于用户在建筑空间的环境中进行的活动较为稳定，在活动持续期间，用户在建筑空间的环境中移动形成的区域随时间逐渐趋于稳定，因而照明灯具的照明方向在一定的时间内属于稳定的状态，降低调整照明灯具的照明方向的频次，避免因频繁调整照明灯具的照明方向造成对用户的干扰。应当理解，本部分所描述的内容并非旨在标识本发明的实施例的关键或重要特征，也不用于限制本发明的范围。本发明的其它特征将通过以下的说明书而变得容易理解。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是根据本发明实施例一提供的一种照明灯具的转向方法的流程图；图2是根据本发明实施例二提供的一种照明灯具的转向装置的结构示意图；图3是实现本发明实施例三提供的一种电子设备的结构示意图。具体实施方式为了使本技术领域的人员更好地理解本发明方案，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分的实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本发明保护的范围。需要说明的是，本发明的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本发明的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。实施例一图1为本发明实施例一提供的一种照明灯具的转向方法的流程图，本实施例可适用于依据微波雷达探测用户移动时形成的点，对这些点进行聚类从而相应控制照明灯具转向的情况，该方法可以由照明灯具的转向装置来执行，该照明灯具的转向装置可以采用硬件和/或软件的形式实现，该照明灯具的转向装置可配置于电子设备中，该电子设备可以继承在集成灯具的开关中，也可以集成在照明灯具的主板中。如图1所示，该方法包括：步骤101、控制微波雷达扫描环境，获得从环境反射回来的微波信号。在本实施例中，照明灯具可以为台灯、射灯等形式，可安装在客厅、卧室等建筑空间中，该照明灯具配置有微波雷达，微波雷达用于通过电磁波对一个或多个物体进行非接触式检测、跟踪和定位，微波雷达的工作频率在3MHz～300GHz，波长在100m～1mm之间。微波雷达的天线以微波的形式发射微波信号，微波信号以光速移动，当微波信号击中物体时，微波信号会发生变化并被反射回微波雷达。到达微波雷达的天线的微波信号包含有关检测到的物体的信息。在照明灯具运行的过程中，可以持续控制微波雷达向建筑空间的环境发射多帧微波信号，微波雷达可持续接收由建筑空间的环境反射回来的多帧原始微波信号，从而对建筑空间的环境进行扫描。步骤102、根据微波信号检测用户在环境中移动时形成的数据点。一般情况下，用户在建筑空间中启动照明灯具，依赖照明灯具发射的灯光进行阅读书籍、观看电视、瑜伽、玩游戏等活动，那么，用户大概率是处于建筑空间中，除用户之外的其他物体大多处于静态，而用户大多会处于动态、肢体大多存在一定程度的摆动，而整个躯体也大多有一定程度的移动，因此，可以以用户作为目标，通过目标检测网络、动态追踪模型模型、CA模型、一阶时间相关模型等）等方式对每帧微波信号进行检测、追踪，并对用户进行跟踪，可以检测出建筑空间的环境中的用户，并以照明灯具为原点建立坐标系，记录该用户在该坐标系中的位置，得到用户在建筑空间的环境中移动时形成的数据点。进一步而言，目标检测网络的结构不局限于人工设计的神经网络，也可以通过模型量化方法优化的神经网络，通过NAS方法搜索的神经网络，等等，本实施例对此不加以限制。在具体实现中，目标检测网络可以为one-stage与two-stage。two-stage 属于段到段，指的是目标检测操作分两步完成，第一步是，使用各种卷积神经网络作为目标检测网络的Backbone，对原始图像数据提取特征，根据特征进行粗分类和粗定位，获取候选区域，第二步是，在目标检测网络的分类网络中对候选区域进行分类。示例性地，two-stage的目标检测操作可以包括R-CNN，Fast R-CNN，Faster R-CNN，R-FCN，等等。one-stage属于端到端，指的是目标检测操作一步完成，并不单独寻找候选区域，将图像数据输入至一个整体性的网络，生成的检测结果中同时包含人物的位置与类别信息。示例性地，one-stage的目标检测操作可以包括SSD，YOLO，等等。一般而言，two-stage的检测精度较高但检测速度稍微，one-stage的检测速度快但精度稍逊，本领域技术人员可以根据自习检测设备的资源、检测的实时性要求等因素选择one-stage或two-stage，本实施例对此不加以限制。步骤103、对数据点执行随机抽样一致操作，以拟合用户在环境中移动形成的第一路径。在客厅、卧室等建筑空间中，摆放着沙发、餐桌等家私家电以及电视机、空调等家电，这些家私与家电的位置较为固定，用户在这些建筑空间的环境中活动时多依赖这些家私或者躲避这些家私，因此，用户在这些建筑空间的环境中活动时通常会形成具有一定规律的路径。经过一段时间的检测，可积累一定数量的数据点，对这些数据点执行RANSAC操作，其可以从一组包含局外点的观测数据中，通过迭代方式估计数学模型的参数，从而拟合出用户在建筑空间的环境中移动形成的第一路径。RANSAC是一种不确定的算法，它有一定的概率得出一个合理的结果，提高迭代次数可以提高概率，而拟合用户在环境中移动形成的第一路径是为了聚类提供基础，对精度的要求较低，对延时的要求较高，因此，可以适度降低迭代次数，以降低延时，此时，第一路径与用户真实移动的路径具有一定的相似度。进一步而言，RANSAC的基本假设是：数据由“局内点”组成；“局外点”是不能适应该模型的数据；除此之外的数据属于噪声。局外点产生的原因有：噪声的极值；错误的测量方法；对数据的错误假设。RANSAC也做了以下假设：给定一组局内点，存在一个可以估计模型参数的过程；而该模型能够解释或者适用于局内点。在具体实现中，RANSAC的输入是一组观测数据，一个可以解释或者适应于观测数据的参数化模型，一些可信的参数。RANSAC通过反复选择数据中的一组随机子集来达成目标。被选取的子集被假设为局内点，并用下述方法进行验证：1.先随机假设一小组局内点为初始值。然后用此局内点拟合一个模型，此模型适应于假设的局内点，所有的未知参数都能从假设的局内点计算得出。2.用1中得到的模型去测试所有的其它数据，如果某个点适用于估计的模型，认为它也是局内点，将局内点扩充。3.如果有足够多的点被归类为假设的局内点，那么估计的模型就足够合理。4.用所有假设的局内点去重新估计模型，因为此模型仅仅是在初始的假设的局内点估计的，后续有扩充后，需要更新。5.通过估计局内点与模型的错误率来评估模型。整个这个过程为迭代一次，此过程被重复执行固定的次数，若因为局内点太少，还不如上一次的模型，而被舍弃；若比现有的模型更好而被选用。步骤104、沿第一路径将数据点聚类至多个簇中。受限于家私、家电，用户真实移动的路径通常较为狭长，如果直接对数据点聚合为用户移动的范围，所有的数据点需要较大的范围容纳，较大范围的簇会除了可以覆盖用户真实移动的路径之外，还覆盖了其他的区域，精确度较低。在本实施例中，可以利用对路径分段管理、降低偏差的思想，将用户真实移动的路径切分为多个片段，在局部的范围内对数据点进行聚类，即，在第一路径的限制下，使用K均值、谱聚类、层次聚类等聚类算法将数据点分别聚类至多个簇中，所谓限制，可以指多个簇尽量分布在第一路劲的周边，尽可能模拟用户真实移动的路径。在本发明的一个实施例中，步骤104可以包括如下步骤：步骤S41、配置与第一路径适配的目标值。用户在不同的环境中进行不同的活动，会形成不同真实移动的路径，相应地，拟合用户在环境中移动形成的第一路径也有所不同，针对不同的第一路径，可以在初始时配置与其适配的目标值，目标值为聚类的簇的数量，为聚类的多个簇尽量分布在第一路劲的周边提供基础。在具体实现中，可以测量第一路径的长度，将长度乘以预设的系数，获得基准值，其中，该系数通常为经验值，属于默认的超参数。以基准值为中点，向上、向下均扩展一定的数值，从而生成包含基准值的路径范围，路径范围表示聚类的簇的数量所处的合理范围，将路径范围的下限值初始化为目标值。步骤S42、初始化数量为目标值的簇。在对数据点进行聚类时，可以设置K值，在多维空间中初始化K个簇，各个簇中均具有中心点，中心点的数值属于变量，中心点的数值初始可以是随机设置的，也可以是选择彼此距离尽可能远的K个点作为中心点，还可以是先对数据点用层次聚类算法或者Canopy算法等粗聚类算法进行聚类，得到K个簇之后，从每个簇中选择一个点为中心点，等等，本实施例对此不加以限制。在本实施例中，K值属于变量，K值的选取对聚类的簇影响明显，不同K值得到的簇不一样。在初始时，可以依据第一路径的情况初始化K值，此后，可以视聚类的簇而决定是否调整K值、重新进行聚类。步骤S43、计算数据点与各个中心点之间的第一距离。每一次聚类通常包含多次迭代，在每轮迭代中，针对各个数据点与各个簇，可以使用欧氏距离、余弦距离等方式计算数据点与各个中心点之间的第一距离。步骤S44、将数据点划分至第一距离最小的簇中。在每轮迭代中，依次遍历各个数据点，将数据点与各个簇的中心之间的第一距离进行比较，选择第一距离最小的簇作为该数据点归属的簇，从而将该数据点划入第一距离最小的簇中。步骤S45、在每个簇中，计算数据点的平均值，以更新簇的中心点。在每轮迭代中，依次遍历各个簇，在每个簇中，计算在该簇中所有数据点的平均值，该平均值赋值为该簇的中心点的新的数值。步骤S46、判断中心点在更新时的变化幅度是否小于或等于预设的第一阈值；若否，则返回执行步骤S43；若是，则执行步骤S47。针对同一个簇，可以计算更新前的中心点与更新后的中心点之间的差值，作为更新时的变化幅度，将更新时的变化幅度与预设的第一阈值进行比较。如果更新时的变化幅度小于或等于第一阈值，表示中心点更新的变化较小，可以确认此次聚类的簇收敛。如果更新时的变化幅度大于第一阈值，表示中心点更新的变化较大，可以确认此次聚类的簇未收敛，进入下一轮迭代，重新执行步骤S43-步骤S46，直至此次聚类的簇收敛。步骤S47、计算各个中心点与第一路径之间的第二距离。在此次聚类的簇收敛时，可以将各个中心点投影至第一路径，以便计算各个中心点与第一路径之间的第二距离。步骤S48、判断第二距离是否均小于或等于预设的第二阈值；若是，则执行步骤S49；若否，则执行步骤S50。步骤S49、确定簇收敛。步骤S50、调节目标值，返回执行步骤S42。在每次迭代结束时，将各个中心点与第一路径之间的第二距离与预设的第二阈值进行比较。如果所有第二距离均小于或等于第二阈值，表示所有簇均接近第一路径，由于簇与簇之间并不重叠，使得各个簇分布在第一路径上，可以确认聚类结束，各个簇已收敛。如果至少一个第二距离大于第二阈值，表示至少一个簇均远离第一路径，各个簇并未分布在第一路径上，此时，重新调节目标值，从而调节K值，进入下一次聚类，重新执行步骤S42-步骤S48，直至聚类结束。示例性地，若在先初始化目标值为路径范围的下限值，则在调节目标值时，可以判断目标值是否小于路径范围的上限值；若是，则在当前目标值的基础上添加预设的步长，作为新的目标值。步骤105、滤除处于多个簇的边缘的数据点。一般情况下，用户的活动具有聚集性的特性，即，用户在活动的过程中形成的数据点聚集在一起，但由于其他因素会形成一些稀疏的数据点，这些数据点可能会分散在各个位置上。在本实施例中，为了降低稀疏的数据点的影响，可以以各个簇的分布作为参考，将处于多个簇的边缘的数据点滤除。在具体实现中，可以从所有簇中筛选出在位置上相邻的两个簇，针对每对相邻的两个簇，将相邻的两个簇中的中心点连接，以拟合用户在环境中移动形成的第二路径，将相邻的簇的中心点依次相连得到第二路径，属于对第一路径的修正，可以模拟出更加真实的用户活动的情况，提高与用户真实移动的路径之间的相似度。将各个数据点投影至第二路径上，以便计算各个数据点与第二路径之间的第三距离。判断第三距离是否小于或等于预设的第三阈值；若是，表示该数据点距离第二路径较近，则可以保留该数据点，即，该数据点剩余未滤除；若否，表示该数据点距离第二路径较远，属于某个簇的边缘，则可以滤除该数据点。步骤106、将多个簇中滤除剩余的数据点融合为用户在环境中移动形成的区域。针对多个簇中滤除剩余的数据点，可以使用几何算法中的minEnclosingTriangle函数、minEnclosingCircle函数等）将这些数据点拟合成为形状规则或不规则的区域，作为用户在建筑空间的环境中移动形成的区域。在一个示例中，对多个簇中滤除剩余的数据点添加维诺图，维诺图，又称泰森多边形或Dirichlet图，它包括一组由连接两邻点直线的垂直平分线组成的连续多边形，即，维诺图包括多个单元，每个单元包含一个数据点，单元具有多条边。在维诺图中，任意两个人脸关键点p 和q 之间的欧氏距离，记作 dist 。设P = {p1, p2,…,pn}为平面上任意 n 个互异的数据点，这些数据点也就是基点。所谓P对应的Voronoi图，就是平面的一个子区域划分——整个平面因此被划分为n 个单元，它们具有这样的性质：任一数据点q位于数据点pi 所对应的单元中，当且仅当对于任何的pj∈Pj, j≠i,都有dist＜dist。此时，将与P对应的Voronoi图记作Vor。“Vor ”或者“Voronoi图”所指示是组成该子区域划分的边和顶点。在Vor中，与基点pi 相对应的单元记作V——称作与pi 相对应的Voronoi单元。那么，针对多个簇中滤除剩余的数据点，筛选出位于同一条边两侧的数据点，作为位置相邻的点对；以点对的数据点作为顶点，将顶点连接为三角形的网格，以组成用户在建筑空间中环境中移动形成的区域。在本示例中，以三角形网格的形式绘制用户在建筑空间中环境中移动形成的区域，可以应用渲染2D矢量图形的API或渲染引擎，实现硬件加速，降低延时。步骤107、转动照明灯具，以使照明灯具的照明方向朝向区域。一般情况下，用户在建筑空间的环境中进行的活动较为稳定，在活动持续期间，用户在建筑空间的环境中移动形成的区域随时间逐渐趋于稳定。在本实施例中，照明灯具设置有可旋转的安装座，在用户在建筑空间的环境中移动形成的区域稳定时，可驱动安装座转动，从而带动照明灯具转动，使得照明灯具的照明方向朝向用户在建筑空间的环境中移动形成的区域，使得照明灯具的照明范围与用户在建筑空间的环境中移动形成的区域至少部分重叠，为用户在建筑空间的环境中进行的活动提供光线。用户在建筑空间的环境中移动形成的区域可以为规则或不规则形状，而照明灯具的灯泡在数量、排列上有所不同，照明灯具会配备透光或不透光的灯罩，这些因素会在一定程度上影响照明灯具的照明方向与用户在建筑空间的环境中移动形成的区域之间的关系，因此，可以按照这些因素驱动照明灯具转动，使得照明灯具的照明方向朝向区域。对于规则状态且面积较小的区域，可以从该区域中寻找中心、重心等具有几何意义的点，转动照明灯具，以使照明灯具的照明方向与该点重合，使得为用户在建筑空间的环境中进行的活动全面提供光线。对于非规则状态且面积较大的区域，可以统计各个簇中滤除剩余的数据点的数量，筛选出数量最多的n个簇，作为目标簇，在单个簇中的数据点的数量，在一定程度上可以体现用户活动的密集程度，那么，目标簇通常为用户活动较为密集的局部。确定目标点、作为该区域的重心，目标点与各个目标簇的中心点的第四距离均相等，那么，此重心为用户活动的重心，此时，可转动照明灯具、直至照明灯具的照明方向与重心重合，使得尽可能为用户在建筑空间的环境中活动较为密集的局部提供最大化的光线。在本实施例中，控制微波雷达扫描环境，获得从环境反射回来的微波信号；根据微波信号检测用户在环境中移动时形成的数据点；对数据点执行随机抽样一致操作，以拟合用户在环境中移动形成的第一路径；沿第一路径将数据点聚类至多个簇中；滤除处于多个簇的边缘的数据点；将多个簇中滤除剩余的数据点融合为用户在环境中移动形成的区域；转动照明灯具，以使照明灯具的照明方向朝向区域。在拟合用户在环境中移动形成的第一路径的约束下，对用户在环境中移动时形成的数据点聚类得到多个簇，可以在一定程度上体验用户在环境中真实移动形成的路径的分布，进而扩展为用户在环境中移动形成的区域，依此控制照明灯具转向，为用户提供照明的光线，满足了用户用灯的需求，减少用户手动控制照明灯具的频次，提高了控制照明灯具的便捷性，降低控制照明灯具的延时。并且，由于用户在建筑空间的环境中进行的活动较为稳定，在活动持续期间，用户在建筑空间的环境中移动形成的区域随时间逐渐趋于稳定，因而照明灯具的照明方向在一定的时间内属于稳定的状态，降低调整照明灯具的照明方向的频次，避免因频繁调整照明灯具的照明方向造成对用户的干扰。实施例二图2为本发明实施例二提供的一种照明灯具的转向装置的结构示意图，所述照明灯具设置有微波雷达，所述装置包括：环境扫描模块201，用于控制所述微波雷达扫描环境，获得从所述环境反射回来的微波信号；数据点检测模块202，用于根据所述微波信号检测用户在所述环境中移动时形成的数据点；路径形成模块203，用于对所述数据点执行随机抽样一致操作，以拟合所述用户在所述环境中移动形成的第一路径；点聚类模块204，用于沿所述第一路径将所述数据点聚类至多个簇中；点滤除模块205，用于滤除处于多个所述簇的边缘的所述数据点；移动区域融合模块206，用于将多个所述簇中滤除剩余的所述数据点融合为所述用户在所述环境中移动形成的区域；灯具转动模块207，用于转动所述照明灯具，以使所述照明灯具的照明方向朝向所述区域。在本发明的一个实施例中，所述点聚类模块204还用于：配置与所述第一路径适配的目标值；初始化数量为所述目标值的簇，各个所述簇中均具有中心点；计算所述数据点与各个所述中心点之间的第一距离；将所述数据点划分至所述第一距离最小的所述簇中；在每个所述簇中，计算所述数据点的平均值，以更新所述簇的所述中心点；判断所述中心点在更新时的变化幅度是否小于或等于预设的第一阈值；若否，则返回执行所述计算所述数据点与各个所述中心点之间的第一距离；若是，则计算各个所述中心点与所述第一路径之间的第二距离；判断所述第二距离是否均小于或等于预设的第二阈值；若是，则确定所述簇收敛；若否，则调节所述目标值，返回执行所述初始化数量为所述目标值的簇。在本发明的一个实施例中，所述点聚类模块204还用于：测量所述第一路径的长度；将所述长度乘以预设的系数，获得基准值；生成包含所述基准值的路径范围；将所述路径范围的下限值初始化为目标值。在本发明的一个实施例中，所述点聚类模块204还用于：判断所述目标值是否小于所述路径范围的上限值；若是，则在当前所述目标值的基础上添加预设的步长，作为新的目标值。在本发明的一个实施例中，所述点滤除模块205还用于：从所有所述簇中筛选出相邻的两个所述簇；针对每对相邻的两个所述簇，将相邻的两个所述簇中的所述中心点连接，以拟合所述用户在所述环境中移动形成的第二路径；计算各个所述数据点与所述第二路径之间的第三距离；判断所述第三距离是否小于或等于预设的第三阈值；若是，则保留所述数据点；若否，则滤除所述数据点。在本发明的一个实施例中，所述移动区域融合模块206还用于：对多个所述簇中滤除剩余的所述数据点添加维诺图，所述维诺图包括多个单元，每个所述单元包含一个所述数据点，所述单元具有多条边；针对多个所述簇中滤除剩余的所述数据点，筛选出位于同一条所述边两侧的所述数据点，作为位置相邻的点对；以所述点对的所述数据点作为顶点，将所述顶点连接为三角形的网格，以组成所述用户在所述环境中移动形成的区域。在本发明的一个实施例中，所述灯具转动模块207还用于：统计各个所述簇中滤除剩余的所述数据点的数量；筛选出所述数量最多的n个所述簇，作为目标簇；确定目标点、作为所述区域的重心，所述目标点与各个所述目标簇的中心点的第四距离均相等；转动所述照明灯具、直至所述照明灯具的照明方向与所述重心重合。本发明实施例所提供的照明灯具的转向装置可执行本发明任意实施例所提供的照明灯具的转向方法，具备执行照明灯具的转向方法相应的功能模块和有益效果。实施例三图3示出了可以用来实施本发明的实施例的电子设备10的结构示意图。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本发明的实现。如图3所示，电子设备10包括至少一个处理器11，以及与至少一个处理器11通信连接的存储器，如只读存储器12、随机访问存储器13等，其中，存储器存储有可被至少一个处理器执行的计算机程序，处理器11可以根据存储在只读存储器12中的计算机程序或者从存储单元18加载到随机访问存储器13中的计算机程序，来执行各种适当的动作和处理。在RAM 13中，还可存储电子设备10操作所需的各种程序和数据。处理器11、ROM 12以及RAM 13通过总线14彼此相连。输入/输出接口15也连接至总线14。电子设备10中的多个部件连接至I/O接口15，包括：输入单元16，例如键盘、鼠标等；输出单元17，例如各种类型的显示器、扬声器等；存储单元18，例如磁盘、光盘等；以及通信单元19，例如网卡、调制解调器、无线通信收发机等。通信单元19允许电子设备10通过诸如因特网的计算机网络和/或各种电信网络与其他设备交换信息/数据。处理器11可以是各种具有处理和计算能力的通用和/或专用处理组件。处理器11的一些示例包括但不限于中央处理单元、图形处理单元、各种专用的人工智能计算芯片、各种运行机器学习模型算法的处理器、数字信号处理器、以及任何适当的处理器、控制器、微控制器等。处理器11执行上文所描述的各个方法和处理，如照明灯具的转向方法。在一些实施例中，照明灯具的转向方法可被实现为计算机程序，其被有形地包含于计算机可读存储介质，例如存储单元18。在一些实施例中，计算机程序的部分或者全部可以经由ROM 12和/或通信单元19而被载入和/或安装到电子设备10上。当计算机程序加载到RAM 13并由处理器11执行时，可以执行上文描述的照明灯具的转向方法的一个或多个步骤。备选地，在其他实施例中，处理器11可以通过其他任何适当的方式而被配置为执行照明灯具的转向方法。本文中以上描述的系统和技术的各种实施方式可以在数字电子电路系统、集成电路系统、场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、负载可编程逻辑设备、计算机硬件、固件、软件、和/或它们的组合中实现。这些各种实施方式可以包括：实施在一个或者多个计算机程序中，该一个或者多个计算机程序可在包括至少一个可编程处理器的可编程系统上执行和/或解释，该可编程处理器可以是专用或者通用可编程处理器，可以从存储系统、至少一个输入装置、和至少一个输出装置接收数据和指令，并且将数据和指令传输至该存储系统、该至少一个输入装置、和该至少一个输出装置。用于实施本发明的方法的计算机程序可以采用一个或多个编程语言的任何组合来编写。这些计算机程序可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器，使得计算机程序当由处理器执行时使流程图和/或框图中所规定的功能/操作被实施。计算机程序可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本发明的上下文中，计算机可读存储介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的计算机程序。计算机可读存储介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。备选地，计算机可读存储介质可以是机器可读信号介质。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。为了提供与用户的交互，可以在电子设备上实施此处描述的系统和技术，该电子设备具有：用于向用户显示信息的显示装置或者LCD监视器）；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给电子设备。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网、区块链网络和互联网。计算系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。服务器可以是云服务器，又称为云计算服务器或云主机，是云计算服务体系中的一项主机产品，以解决了传统物理主机与VPS服务中，存在的管理难度大，业务扩展性弱的缺陷。实施例四本发明实施例还提供了一种计算机程序产品，该计算机程序产品包括计算机程序，该计算机程序在被处理器执行时实现如本发明任一实施例所提供的照明灯具的转向方法。计算机程序产品在实现的过程中，可以以一种或多种程序设计语言或其组合来编写用于执行本发明操作的计算机程序代码，程序设计语言包括面向对象的程序设计语言，诸如Java、Smalltalk、C++，还包括常规的过程式程序设计语言，诸如“C”语言或类似的程序设计语言。程序代码可以完全地在用户计算机上执行、部分地在用户计算机上执行、作为一个独立的软件包执行、部分在用户计算机上部分在远程计算机上执行、或者完全在远程计算机或服务器上执行。在涉及远程计算机的情形中，远程计算机可以通过任意种类的网络——包括局域网或广域网—连接到用户计算机，或者，可以连接到外部计算机。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本发明中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本发明的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本发明保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本发明的精神和原则之内所作的修改、等同替换和改进等，均应包含在本发明保护范围之内。
