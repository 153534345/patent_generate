标题title
用于无人机的数据高效压缩存储方法
摘要abst
本发明涉及数据处理技术领域，具体涉及用于无人机的数据高效压缩存储方法，包括：根据待压缩图像获取类别数量集合以及灰度值序列；根据类别数量及灰度值序列获取聚类中心；计算像素点到聚类中心的组合距离，实现像素点分类；获取分类结果一致性；根据分类结果一致性得到聚类结果；计算聚类结果的压缩概率，获取最优聚类结果；根据最优聚类结果对图像分块去众数操作，进一步实现图像压缩。本发明压缩效率高，利于图像数据的存储与传输。
权利要求书clms
1.用于无人机的数据高效压缩存储方法，其特征在于，该方法包括以下步骤：S1：获取待压缩图像，根据待压缩图像的灰度直方图获取类别数量集合以及灰度值序列；S2：利用类别数量集合中每个类别数量对待压缩图像分别进行聚类操作，得到多个聚类结果，包括：S201：根据类别数量以及灰度值序列获取所有种子点；S202：将种子点作为聚类中心，根据所有聚类中心对待压缩图像进行分类操作，包括：根据待压缩图像中每个像素点的灰度值、每个聚类中心的灰度值、每个像素点到每个聚类中心的距离、第二预设阈值以及待压缩图像大小获取待压缩图像中每个像素点到每个聚类中心的组合距离；将每个像素点划分至组合距离最小的聚类中心所在的类别，得到多个类别；根据每个类别中每个灰度值与每个类别的聚类中心的灰度值得到所述每个灰度值的权重；获取每个类别中每个灰度值的频率；根据每个类别中所有灰度值的频率以及所述每个灰度值的权重，得到每个类别的灰度一致性；将所有类别的灰度一致性的均值作为分类操作结果的一致性；获取每个类别中与所述类别的聚类中心的灰度值相同的所有像素点，作为所述类别的聚类中心候选像素点；获取所述类别的质心；计算所述类别的每个聚类中心候选像素点到所述类别的质心的距离，选择距离最小的聚类中心候选像素点作为新的聚类中心；S203：对所述分类操作进行多次迭代，直到得到的分类操作结果的一致性小于或等于上一次迭代的分类操作结果的一致性时停止；将上一次迭代得到的多个类别作为聚类结果；S3：获取聚类结果中每个类别的最小外接矩形；利用聚类结果中每个类别中像素点的个数除以每个类别的最小外接矩形的面积得到聚类结果中每个类别的规则度；根据聚类结果中每个类别的规则度、每个类别的灰度一致性以及类别个数得到聚类结果的压缩概率；S4：将压缩概率最大的聚类结果作为最优聚类结果；根据最优聚类结果中每个类别的最小外接矩形将待压缩图像分成多个块；获取待压缩图像每个块中灰度值的众数；将待压缩图像每个块中的所有像素点的灰度值减去每个块灰度值的众数，得到新的块图像；所有新的块图像合并成新的图像；对新的图像进行编码压缩。2.根据权利要求1所述的用于无人机的数据高效压缩存储方法，其特征在于，所述根据待压缩图像的灰度直方图获取类别数量集合以及灰度值序列包括：对待压缩图像的灰度直方图进行均值滤波；获取所述灰度直方图中局部极大值点的个数；获取所述局部极大值点的个数到第一预设阈值区间内的所有整数，得到类别数量集合；获取所述灰度直方图中所有局部极大值点对应的多个灰度值，得到峰值灰度集合；分别计算峰值灰度集合中每个灰度值在待压缩图像中对应的像素点之间的最远距离，按照所述最远距离从大到小的顺序对峰值灰度集合中的灰度值进行排序，得到灰度值序列。3.根据权利要求1所述的用于无人机的数据高效压缩存储方法，其特征在于，所述根据类别数量以及灰度值序列获取所有种子点包括：根据类别数量除以峰值灰度集合元素个数的商和余数得到灰度值序列中每个灰度值对应的种子点个数；根据每个灰度值对应的种子点个数在待压缩图像中选择种子点。4.根据权利要求1所述的用于无人机的数据高效压缩存储方法，其特征在于，所述组合距离表达式为：其中为待压缩图像中第个像素点到第个聚类中心的组合距离；为待压缩图像中第个像素点的灰度值；为待压缩图像中第个聚类中心的灰度值；为待压缩图像中最大的灰度值与最小的灰度值之间的差异；为第二预设阈值；为待压缩图像中第个像素点与第个聚类中心在待压缩图像中的距离；为待压缩图像的长；为待压缩图像的宽。5.根据权利要求1所述的用于无人机的数据高效压缩存储方法，其特征在于，所述权重表达式为：其中为第次迭代的分类结果中第个类别中出现的第个灰度值的权重；为第次迭代的分类结果中第个类别中出现的第个灰度值大小；为第个类别的聚类中心的灰度值；表示第次迭代的分类结果中第个类别中所有灰度值与第个类别的聚类中心的灰度值差异的最大值。6.根据权利要求1所述的用于无人机的数据高效压缩存储方法，其特征在于，所述灰度一致性表达式为：其中为第次迭代的分类结果中第个类别的灰度一致性；为第次迭代的分类结果中第个类别中出现的第个灰度值的权重；为第次迭代的分类结果中第个类别中出现的第个灰度值的频率；为第次迭代的分类结果中第个类别中出现的灰度值的个数；是以自然常数为底的指数函数。7.根据权利要求1所述的用于无人机的数据高效压缩存储方法，其特征在于，所述压缩概率表达式为：其中为第个聚类结果的压缩概率；为第个聚类结果中第个类别的规则度；为第个聚类结果中第个类别的灰度一致性；为第个聚类结果中的类别个数；是以自然常数为底的负指数函数。8.根据权利要求3所述的用于无人机的数据高效压缩存储方法，其特征在于，所述根据每个灰度值对应的种子点个数在待压缩图像中选择种子点包括：获取每个灰度值在待压缩图像中的所有像素点，构成每个灰度值的候选种子点集合；在候选种子点集合中随机选择一个像素点作为种子点，并将该像素点从候选种子点集合中删除；对候选种子点集合重复进行挑选操作，直到依据每个灰度值得到的种子点个数与每个灰度值对应的种子点个数一致时停止；所述挑选操作为：计算候选种子点集合中每个像素点到所有种子点的距离之和；选择距离之和最大的像素点作为种子点，并将该像素点从候选种子点集合中删除。
说明书desc
技术领域本发明涉及数据压缩技术领域，具体涉及用于无人机的数据高效压缩存储方法。背景技术无人机是利用无线电遥控设备和自备的程序控制装置操纵的不载人飞行器。广泛应用于在航拍、农业、植保、微型自拍、快递运输、灾难救援、观察野生动物、监控传染病、测绘、新闻报道、电力巡检、救灾、影视拍摄等领域。对于无人机飞行作业过程中获取的一些数据需要进行压缩存储。本发明针对无人机飞行过程中拍摄的图像数据进行压缩存储。无人机飞行过程中拍摄的图像，如航拍的图像中可能包含河流、植被、山坡等多种特征，如影视拍摄的图像中可能包含人物、场景等多种特征。当图像中包含的特征较多时，图像中出现的灰度值个数较多，且灰度值概率分布可能较为平均。现有的图像压缩方法，如霍夫曼编码根据图像中灰度值出现的概率进行编码压缩，为概率较大的灰度值赋予较短的编码，为概率较小的灰度值赋予较长的编码，从而实现图像的整体压缩。对于无人机拍摄的图像中出现的灰度值个数较多，灰度值概率分布较为平均的情况，利用霍夫曼编码无法达到较高的压缩效率。发明内容本发明提供用于无人机的数据高效压缩存储方法，以解决现有的问题。本发明的用于无人机的数据高效压缩存储方法采用如下技术方案：本发明一个实施例提供了用于无人机的数据高效压缩存储方法，该方法包括以下步骤：S1：获取待压缩图像，根据待压缩图像的灰度直方图获取类别数量集合以及灰度值序列；S2：利用类别数量集合中每个类别数量对待压缩图像分别进行聚类操作，得到多个聚类结果，包括：S201：根据类别数量以及灰度值序列获取所有种子点；S202：将种子点作为聚类中心，根据所有聚类中心对待压缩图像进行分类操作，包括：根据待压缩图像中每个像素点的灰度值、每个聚类中心的灰度值、每个像素点到每个聚类中心的距离、第二预设阈值以及待压缩图像大小获取待压缩图像中每个像素点到每个聚类中心的组合距离；将每个像素点划分至组合距离最小的聚类中心所在的类别，得到多个类别；根据每个类别中每个灰度值与每个类别的聚类中心的灰度值得到所述每个灰度值的权重；获取每个类别中每个灰度值的频率；根据每个类别中所有灰度值的频率以及所述每个灰度值的权重，得到每个类别的灰度一致性；将所有类别的灰度一致性的均值作为分类操作结果的一致性；获取每个类别中与所述类别的聚类中心的灰度值相同的所有像素点，作为所述类别的聚类中心候选像素点；获取所述类别的质心；计算所述类别的每个聚类中心候选像素点到所述类别的质心的距离，选择距离最小的聚类中心候选像素点作为新的聚类中心；S203：对所述分类操作进行多次迭代，直到得到的分类操作结果的一致性小于或等于上一次迭代的分类操作结果的一致性时停止；将上一次迭代得到的多个类别作为聚类结果；S3：获取聚类结果中每个类别的最小外接矩形；利用聚类结果中每个类别中像素点的个数除以每个类别的最小外接矩形的面积得到聚类结果中每个类别的规则度；根据聚类结果中每个类别的规则度、每个类别的灰度一致性以及类别个数得到聚类结果的压缩概率；S4：将压缩概率最大的聚类结果作为最优聚类结果；根据最优聚类结果中每个类别的最小外接矩形将待压缩图像分成多个块；获取待压缩图像每个块中灰度值的众数；将待压缩图像每个块中的所有像素点的灰度值减去每个块灰度值的众数，得到新的块图像；所有新的块图像合并成新的图像；对新的图像进行编码压缩。优选的，所述根据待压缩图像的灰度直方图获取类别数量集合以及灰度值序列包括：对待压缩图像的灰度直方图进行均值滤波；获取所述灰度直方图中局部极大值点的个数；获取所述局部极大值点的个数到第一预设阈值区间内的所有整数，得到类别数量集合；获取所述灰度直方图中所有局部极大值点对应的多个灰度值，得到峰值灰度集合；分别计算峰值灰度集合中每个灰度值在待压缩图像中对应的像素点之间的最远距离，按照所述最远距离从大到小的顺序对峰值灰度集合中的灰度值进行排序，得到灰度值序列。优选的，所述根据类别数量以及灰度值序列获取所有种子点包括：根据类别数量除以峰值灰度集合元素个数的商和余数得到灰度值序列中每个灰度值对应的种子点个数；根据每个灰度值对应的种子点个数在待压缩图像中选择种子点。优选的，所述组合距离表达式为：其中为待压缩图像中第个像素点到第个聚类中心的组合距离；为待压缩图像中第个像素点的灰度值；为待压缩图像中第个聚类中心的灰度值；为待压缩图像中最大的灰度值与最小的灰度值之间的差异；为第二预设阈值；为待压缩图像中第个像素点与第个聚类中心在待压缩图像中的距离；为待压缩图像的长；为待压缩图像的宽。优选的，所述权重表达式为：其中为第次迭代的分类结果中第个类别中出现的第个灰度值的权重；为第次迭代的分类结果中第个类别中出现的第个灰度值大小；为第个类别的聚类中心的灰度值；表示第次迭代的分类结果中第个类别中所有灰度值与第个类别的聚类中心的灰度值差异的最大值。优选的，所述灰度一致性表达式为：其中为第次迭代的分类结果中第个类别的灰度一致性；为第次迭代的分类结果中第个类别中出现的第个灰度值的权重；为第次迭代的分类结果中第个类别中出现的第个灰度值的频率；为第次迭代的分类结果中第个类别中出现的灰度值的个数；是以自然常数为底的指数函数。优选的，所述压缩概率表达式为：其中为第个聚类结果的压缩概率；为第个聚类结果中第个类别的规则度；为第个聚类结果中第个类别的灰度一致性；为第个聚类结果中的类别个数；是以自然常数为底的负指数函数。优选的，所述根据每个灰度值对应的种子点个数在待压缩图像中选择种子点包括：获取每个灰度值在待压缩图像中的所有像素点，构成每个灰度值的候选种子点集合；在候选种子点集合中随机选择一个像素点作为种子点，并将该像素点从候选种子点集合中删除；对候选种子点集合重复进行挑选操作，直到依据每个灰度值得到的种子点个数与每个灰度值对应的种子点个数一致时停止；所述挑选操作为：计算候选种子点集合中每个像素点到所有种子点的距离之和；选择距离之和最大的像素点作为种子点，并将该像素点从候选种子点集合中删除。本发明的有益效果是：根据待压缩图像获取类别数量集合以及灰度值序列；根据类别数量及灰度值序列获取聚类中心；计算像素点到聚类中心的组合距离，实现像素点分类；获取分类结果一致性；根据分类结果一致性得到聚类结果；计算聚类结果的压缩概率，获取最优聚类结果；根据最优聚类结果对图像分块去众数操作，进一步实现图像压缩。通过分类操作中种子点的选取、聚类中心的更新以及灰度一致性判断，使得得到的聚类结果中每个类别的灰度值范围小，灰度值分布概率差异大。通过计算压缩概率，使得最优聚类结果中每个类别灰度统一，形状规则。进一步得到的每个块中的灰度值较为一致。对每个块进行去众数操作，实现了将所有块的灰度值压缩在一个较小的范围，让新的图像中出现的灰度值个数更少、不同灰度值的分布概率相差更大。再利用霍夫曼编码可达到更高的压缩效率，相比对图像直接利用霍夫曼编码进行压缩的压缩效率更高。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明的用于无人机的数据高效压缩存储方法的步骤流程图；具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的用于无人机的数据高效压缩存储方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的用于无人机的数据高效压缩存储方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的用于无人机的数据高效压缩存储方法的步骤流程图，该方法包括以下步骤：101．获取待压缩图像，根据待压缩图像的灰度直方图获取类别数量集合以及灰度值序列。通过无人机上搭载的相机，拍摄RGB图像。为便于压缩图像，将RGB图像拆分成R、G、B通道的三幅图像，将其看作三幅灰度图像分别进行压缩，将灰度图像称为待压缩图像。图像大小记为。统计待压缩图像中出现的灰度值及每个灰度值的个数，绘制待压缩图像的灰度直方图。对灰度直方图进行均值滤波使灰度直方图平滑。由于无人机拍摄的图像，如航拍的图像可能包含河流、植被、山坡等多种特征，每种特征的灰度值较为相似，且每种特征分布在图像局部，使得待压缩图像中像素点的灰度具有局部相似性，因此灰度直方图中一个峰代表待压缩图像中一个或多个相同的局部特征。获取灰度值直方图中峰的个数，即局部极大值点的个数，以及所有的局部极大值点对应的灰度值，得到一个峰值灰度集合，其中表示第个局部极大值点对应的灰度值。为了使得后续聚类的每个类别中灰度值较为统一，则类别数量至少为。聚类是为了将每个局部特征聚为一类，由于灰度直方图中一个峰可能代表待压缩图像中多个相同的局部特征，因此待压缩图像的局部特征个数可能大于，此时聚类的类别数量需大于。本发明实施例根据聚类结果对图像进行分块，对每个图像块进行操作之后再重组成新的图像，使得新的图像中出现的灰度值个数较少，不同灰度值的分布概率差异较大，从而利用霍夫曼编码达到更好的压缩效果。在保存新的图像压缩数据的同时，还需保存每个块的信息。当类别数量非常大时，虽然可能使得新的图像压缩效率较大，但会导致块的信息非常多，使得整体的压缩效率较小。因此需要设置第一预设阈值，用来限制聚类的类别数量。本发明实施例中，在其他实施例中实施人员可根据需要设置的值。综上，类别数量需大于等于小于等于。获取区间内的所有整数，构成类别数量集合。102．利用类别数量集合中每个类别数量分别进行多次聚类操作。具体步骤包括：1.根据类别数量以及灰度值序列获取所有种子点。将类别数量记为，则需要选取个种子点。由于待压缩图像中像素点的灰度具有局部相似性，因此灰度直方图中一个峰代表待压缩图像中一个或多个相同的局部特征，因此峰值灰度集合中的每个灰度值为待压缩图像一个局部特征中出现次数最多的灰度值。为尽可能使得每个局部特征聚为一类，则需确保选择的所有种子点的灰度值包含峰值灰度集合中每个灰度值。获取峰值灰度集合中一个灰度值在待压缩图像中的所有像素点，计算此些像素点之间的最远距离，记为该灰度值的距离特征。当此些像素点之间的最远距离越大，该灰度值对应的局部特征个数可能越多；反之，当此些像素点之间的最远距离越小，该灰度值对应的局部特征个数可能越少。同理获取峰值灰度集合中所有灰度值的距离特征，并对此些灰度值按照距离特征进行排序，得到灰度值序列。将类别数量除以峰值灰度集合元素个数得到商和余数。则商表示依据灰度值序列中每个灰度值至少选择个像素点作为种子点；余数表示灰度值序列中前个灰度值还需多选一个像素点作为种子点。如此，得到灰度值序列中每个灰度值对应的种子点个数。根据灰度值序列中每个灰度值对应的种子点个数选择种子点。如灰度值序列中第个灰度值对应的种子点数记为，首先获取灰度值序列中第个灰度值在待匹配图像中的所有像素点，得到候选像素点集合。在候选像素点集合中随机选择一个候选像素点作为第一个种子点，并将第一个种子点从候选像素点集合中删除。计算候选像素点集合中每个候选像素点到第一个种子点的距离，选择到第一个种子点距离最大的候选像素点作为第二个种子点，并将第二个种子点从候选像素点集合中删除。计算候选像素点集合中每个候选像素点到第二个种子点的距离，选择到第一个种子点距离与到第一个种子点距离之和最大的候选像素点作为第三个种子点。同理，获取灰度值序列中第个灰度值对应的个种子点。同理，获取灰度值序列中所有灰度值对应的种子点，得到个种子点。2.将种子点作为聚类中心，根据所有聚类中心对待压缩图像进行分类操作，得到分类结果。将种子点作为聚类中心，根据聚类中心进行待压缩图像中其余像素点的划分：首先，计算待压缩图像中每个像素点到每个聚类中心的组合距离，将每个像素点划分至组合距离最小的聚类中心所属的类别。通过为每个像素点选择聚类中心完成待压缩图像的类别划分。聚类的目的是为将灰度相近的同一局部区域特征的像素点划分在一个类别，以便于后续对每个类别对应的图像块进行减众数操作后得到新的图像中灰度值个数较少且灰度值分布概率差异较大，从而利用霍夫曼编码实现更高压缩的效果。因此组合距离需包括像素点与聚类中心的灰度差异以及像素点到聚类中心的空间距离。具体如下：待压缩图像中第个像素点到第个聚类中心的组合距离为：其中为待压缩图像中第个像素点到第个聚类中心的组合距离；为待压缩图像中第个像素点的灰度值；为待压缩图像中第个聚类中心的灰度值；为待压缩图像中第个像素点与第个聚类中心的灰度值差异；为待压缩图像中最大的灰度值与最小的灰度值之间的差异，用作将进行归一化；为第二预设阈值，用来表示灰度值差异的权重；为待压缩图像中第个像素点与第个聚类中心在待压缩图像中的距离，即空间距离；为待压缩图像的长；为待压缩图像的宽；为待压缩图像的对角线长度，用作将进行归一化；为空间距离的权重；由于图像中不同特征大小不一，但特征内部灰度值较为相似，为了更好地将局部特征的像素点划分在一个类别，本发明实施例更加注重灰度相近。因此为灰度值差异设置较大的权重，为空间距离设置较小的权重。本发明实施例中，在其他实施例中实施人员可根据需要设置的值。3. 根据每个类别的特征，更新聚类中心。由于旧的聚类中心的灰度值为灰度直方图的峰值对应的灰度值，因此，理论上来讲，类别中与聚类中心灰度值相同的像素点个数最多。为了确保每个类别灰度值较为统一，所以新的聚类中心需与旧的聚类中心灰度值相同，且位于所属类别的中心位置。以第个类别为例，说明获取新的聚类中心的方法：获取第个类别的质心，获取第个类别中与聚类中心灰度值相同的所有像素点，计算分别计算此些像素点到质心的距离。选择距离最小的像素点作为第个类别新的聚类中心。4. 对待压缩图像进行迭代分类操作。根据新的聚类中心按照步骤2中的方法进行待压缩图像中其余像素点的划分，不断迭代该步骤，直到满足迭代停止规则时停止迭代。迭代停止规则获取方法如下：在压缩待压缩图像时，首先需要对待压缩图像进行分块。当每个块内的灰度值较为一致时，可以达到较好的压缩效果。而对待压缩图像进行分块是根据聚类结果进行的。当聚类最终得到的聚类结果中每一个类别中包含的像素点的灰度值越一致，聚类效果越好。因此引入一致性指标来衡量每次迭代的分类效果，当不断迭代过程中，一致性不再增大时，本次聚类达到最好的效果。以第次迭代为例，说明获取每次迭代的一致性的方法：第次迭代共个类别，统计每个类别中出现的灰度值的频率，如第次迭代第个类别中出现的第个灰度值的频率为。根据迭代时聚类中心的更新规则，无论在哪次迭代过程中，每个类别的聚类中心的灰度值均不变，即第个类别的聚类中心的灰度值与初始选择的第个种子点的灰度值相同，为。第个种子点的灰度值为灰度直方图中一个峰值对应的灰度值，因此，理论上来讲，第个类别中灰度值为的像素点个数最多。为衡量第次迭代第个类别中灰度值的一致性，则判断第次迭代第个类别中出现的每个灰度值与第个类别的聚类中心的灰度值的差异，得到第次迭代第个类别中出现的每个灰度值的权重，再根据第次迭代第个类别中出现的每个灰度值的权重与频率得到第个类别的灰度一致性。第次迭代的分类结果中第个类别中出现的第个灰度值的权重为：其中为第次迭代的分类结果中第个类别中出现的第个灰度值的权重；为第次迭代的分类结果中第个类别中出现的第个灰度值大小；为第个类别的聚类中心的灰度值；表示第次迭代的分类结果中第个类别中所有灰度值与第个类别的聚类中心的灰度值差异的最大值，用于将灰度差异进行归一化；当灰度差异越大，权重越大；当灰度差异越小，权重越小。第次迭代第个类别的灰度一致性为：其中为第次迭代的分类结果中第个类别的灰度一致性；为第次迭代的分类结果中第个类别中出现的第个灰度值的权重；为第次迭代的分类结果中第个类别中出现的第个灰度值的频率；为第次迭代的分类结果中第个类别中出现的灰度值的个数；是以自然常数为底的指数函数，用来进行归一化；当第次迭代的分类结果中第个类别中出现的第个灰度值与第个类别聚类中心灰度值的差异较大时，即第次迭代的分类结果中第个类别中出现的第个灰度值的权重较大时，在整个第次迭代的分类结果中第个类别的灰度一致性计算中越关注第次迭代的分类结果中第个类别中出现的第个灰度值的分布频率。反之，权重越小时，在整个第次迭代的分类结果中第个类别的灰度一致性计算中越不关注第次迭代的分类结果中第个类别中出现的第个灰度值的分布频率。当灰度一致性越大时，第次迭代的分类结果中第个类别的灰度越统一；反之，当灰度一致性越小时，第次迭代的分类结果中第个类别的灰度越混乱。同理，得到第次迭代的分类结果中所有类别的灰度一致性，以第次迭代的分类结果中所有类别的灰度一致性的均值作为第次迭代的分类结果的一致性。比较每次迭代与前一次迭代的分类结果的一致性，若本次迭代的分类结果的一致性大于前一次迭代的分类结果的一致性，表示本次迭代使得聚类效果进一步提升；若本次迭代的分类结果的一致性小于等于前一次迭代的分类结果的一致性，表示本次迭代使得聚类效果无提升。此时停止迭代，以前一次迭代的分类结果作为最终的聚类结果。将最终聚类结果中每个类别的的灰度一致性用来表示。至此，完成了一次聚类，得到了一个聚类结果。同理，以类别数量集合中每个类别数量对待压缩图像分别进行聚类，得到多个聚类结果。103．计算每个聚类结果的压缩概率，获取最优聚类结果。聚类的目的是为了对待压缩图像进行分块，以达到最好的压缩效果。为获取最优的聚类结果，引入压缩概率指标，以此来衡量聚类结果的优异程度。第个聚类结果为例，说明压缩概率的获取方法。在压缩待压缩图像时，需要根据聚类结果对待压缩图像进行分块，使得每个块的为规则的矩形。分块势必会改变聚类结果中每个类别的形状，可能会将当前类别中的部分像素点划分到其余类别中，将其余类别中的部分像素点划分到当前类别中。当类别的形状越不规则，分块导致需要变动的像素点个数越多；当类别的形状越规则，越趋近于矩形，分块导致需要变动的像素点个数越少。分块的目的是为了对块内的像素点进行减去众数操作，使得减去众数操作之后的像素点灰度值个数较少，灰度值的分布概率差异较大，从而使得利用霍夫曼编码可达到更高的压缩效率。聚类可以使得当前类别的灰度值较为统一，即灰度一致性大，进行减去众数操作之后可达到像素点灰度值个数较少，灰度值的分布概率差异较大的效果。但分块导致需要变动的像素点个数越多，会越破坏当前类别的灰度一致性，从而使得压缩效率降低。分块导致需要变动的像素点个数越小，对当前类别中的灰度一致性影响越小，从而保证较大的压缩效率。因此，每个类别的规则度对压缩概率有着较大影响，第个聚类结果中第个类别的规则度的获取方法为：首先获取第个聚类结果中第个类别中包含的像素点个数，以及第个类别的最小外接矩形的面积，以第个聚类结果中第个类别中包含的像素点个数除以第个类别的最小外接矩形的面积得到第个类别的规则度。当规则度越大，该类别的形状越趋近于矩形。反之，当规则度越小，该类别的形状越不规则。同时，当聚类结果中每个类别的灰度一致性越大时，聚类效果越好，后续压缩效果也越好。本发明根据聚类结果对图像进行分块，对每个图像块进行操作之后再重组成新的图像，使得新的图像中出现的灰度值个数较少，不同灰度值的分布概率差异较大，从而利用霍夫曼编码达到更好的压缩效果。在保存新的图像压缩数据的同时，还需保存每个块的信息。当类别数量非常大时，虽然可能使得新的图像压缩效率较大，但会导致块的信息非常多，使得整体的压缩效率较小。因此压缩效率也与类别数量相关，当类别数量越大，压缩效率可能越小，当类别数量越小，压缩效率可能越大。综上，结合聚类结果中每个类别的规则度、灰度一致性以及所有类别的个数获取压缩概率。第个聚类结果的压缩概率为：其中，为第个聚类结果第个类别的规则度；为第个聚类结果第个类别的灰度一致性；为第个聚类结果的类别个数；是以自然常数为底的负指数函数，用来将进行负相关归一化；当每个类别的规则度越大，灰度值一致性越大，同时类别个数越小时，压缩概率越大。反之，当存在类别的规则度较小，或者存在类别的灰度一致性较小，或类别个数越多时，压缩概率较小。同理，获取每个聚类结果的压缩概率，其中压缩概率最大的聚类结果即为最优的聚类结果。104．根据最优聚类结果对待压缩图像进行压缩。根据最优聚类结果中每个类别的最小外接矩形对待压缩图像进行分块。每个块之间可能存在重叠部分。获取每个块中像素点灰度值的众数，将每个块中所有像素点的灰度值减去众数，得到新的块图像。如此，可将每个块中的灰度值压缩在一个较小的范围。对所有新的块图像按照从左到右从上到下的顺序进行编号，新的块图像之间可能存在重叠部分，将重叠部分的像素点的值用编号小的新的块图像中对应位置像素点的值表示。如此可实现将所有新的块图像拼接成一幅新的图像。新的图像中的灰度值个数较少，同时不同灰度值之间的分布概率相差较大。对新的图像利用霍夫曼编码进行压缩，得到新的图像的压缩结果，作为第一压缩数据。同时按照从左到右从上到下的顺序保存每个块的众数、每个块左上角像素点的坐标以及右下角像素点的坐标，作为第二压缩数据。至此，实现了待压缩图像的压缩。压缩数据包括第一压缩数据和第二压缩数据。105．对压缩图像进行解压。压缩数据包括第一压缩数据和第二压缩数据。对图像进行解压：对第一压缩数据利用霍夫曼解码方法进行解压，得到压缩过程中新的图像。按照从左到右从上到下的顺序，根据第二压缩数据中每个块左上角像素点的坐标以及右下角像素点的坐标对新的图像进行分块。按照从左到右从上到下的顺序，依次对每个块中未还原的像素点的灰度值加上每个块的众数，将每个块中的像素点进行还原。最终得到的结果即为原始图像。至此，完成了图像的解压，获取了无人机拍摄的原始图像。通过以上步骤，完成了无人机的图像数据压缩存储与解压。本发明实施例根据待压缩图像获取类别数量集合以及灰度值序列；根据类别数量及灰度值序列获取聚类中心；计算像素点到聚类中心的组合距离，实现像素点分类；获取分类结果一致性；根据分类结果一致性得到聚类结果；计算聚类结果的压缩概率，获取最优聚类结果；根据最优聚类结果对图像分块去众数操作，进一步实现图像压缩。通过分类操作中种子点的选取、聚类中心的更新以及灰度一致性判断，使得得到的聚类结果中每个类别的灰度值范围小，灰度值分布概率差异大。通过计算压缩概率，使得最优聚类结果中每个类别灰度统一，形状规则。进一步得到的每个块中的灰度值较为一致。对每个块进行去众数操作，实现了将所有块的灰度值压缩在一个较小的范围，让新的图像中出现的灰度值个数更少、不同灰度值的分布概率相差更大。再利用霍夫曼编码可达到更高的压缩效率，相比对图像直接利用霍夫曼编码进行压缩的压缩效率更高。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
