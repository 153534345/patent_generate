标题title
一种装配质量评价方法、装置、设备及存储介质
摘要abst
本发明公开了一种装配质量评价方法、装置、设备及存储介质。该方法包括：获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，所述标定板的位置预先设定；根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高；根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量。结合图像块的全宽半高以及图像块的清晰度这两个维度，可以确定光学系统中拍摄装置的装配质量。采用本发明的技术方案，既无需构建复杂的数学模型，又不用借助高精度的光学检测仪器进行标定，成本较低、计算复杂度低，实现方便、快捷。
权利要求书clms
1.一种装配质量评价方法，其特征在于，所述方法包括：获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，所述标定板的位置预先设定；根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高；根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量。2.根据权利要求1所述的方法，其特征在于，所述获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，包括：获取所述拍摄装置在多个位置拍摄所述标定板得到的原始图像序列；根据所述原始图像序列的清晰度，确定所述拍摄装置的对焦位置；获取所述拍摄装置在所述对焦位置以及以离焦区域内的多个离焦位置拍摄所述标定板得到的评价图像序列，所述离焦区域以所述对焦位置为中心，所述离焦区域的区域边缘位置与所述对焦位置的距离预先设定。3.根据权利要求1所述的方法，其特征在于，所述根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高，包括：将各图像按照相同的方式切分为P个图像块，P为大于等于2的正整数；拟合所述图像块中的光斑，得到对应图像块的全宽半高。4.根据权利要求3所述的方法，其特征在于，所述将各图像按照相同的方式切分为P个图像块，包括：将各图像进行预处理，预处理后的图像相对于处理前的图像清晰度高；将所述预处理后的图像按照相同的方式切分为P个图像块。5.根据权利要求3所述的方法，其特征在于，所述拟合所述图像块中的光斑，得到对应图像块的全宽半高，包括：对所述图像块中的光斑依次进行高斯拟合，根据各光斑的高斯拟合结果确定对应图像块的全宽半高。6.根据权利要求3至5中任一项所述的方法，其特征在于，所述根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量，包括：根据各图像中的第X个图像块中清晰度最高的图像块对应的第一图像的第一拍摄位置，确定拍摄位置与所述第一拍摄位置的距离小于等于距离阈值的第二图像，其中1≤X≤P；根据第三图像中的第X个图像块的全宽半高、第三图像的拍摄位置、第四图像中的第X个图像块的全宽半高以及第四图像的拍摄位置，进行抛物线拟合，得到第X个拟合全宽半高，其中，所述第三图像为所述第一图像和第二图像中全宽半高最小的图像块对应的图像，所述第四图像为所述第三图像前后的N张图像，所述N预先设定，所述N为正整数；根据P个拟合全宽半高至少确定所述拍摄装置装配时光照分布均匀度和光照清晰度之一，并根据所述光照分布均匀度和光照清晰度至少之一确定所述拍摄装置的装配质量。7.根据权利要求6所述的方法，其特征在于，所述根据P个拟合全宽半高至少确定所述拍摄装置装配时光照分布均匀度和光照清晰度之一，包括：根据所述P个拟合全宽半高的均值和标准差，确定第一阈值范围；所述P个拟合全宽半高都在所述第一阈值范围内，则所述拍摄装置装配时光照分布均匀度分布在均匀度阈值范围内；所述P个拟合全宽半高的均值在第二阈值范围内，则所述拍摄装置装配时光照清晰度小于等于清晰度阈值，所述第二阈值范围与所述拍摄装置的性能参数对应。8.一种装配质量评价装置，其特征在于，所述装置包括：获取模块，用于获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，所述标定板的位置预先设定；计算模块，用于根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高；评价模块，用于根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量。9.一种电子设备，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器实现如权利要求1-7中任一项所述的方法。10.一种计算机可读存储介质，其中，所述计算机指令用于使所述计算机执行根据权利要求1-7中任一项所述的方法。
说明书desc
技术领域本发明涉及图像处理技术领域，尤其涉及一种装配质量评价方法、装置、设备及存储介质。背景技术在基因测序领域，DNA序列的识别主流方案是通过高分辨率的成像系统采集携带核酸的荧光信号，并通过碱基识别系统鉴定荧光信号对应的碱基类型。那么碱基识别的准确度与光学成像系统生成的荧光信号图像的质量直接相关。因此，光学系统生成的荧光图像的成像质量直接影响到基因测序仪最终获取的DNA序列的准确度。对于基因测序仪中的光学系统而言，拍摄装置的装配质量将直接影响到光学系统生成荧光图的质量。目前，可以在测序现场下将拍摄装置装配到光学系统中，通过对拍摄装置存在的误差构建数学模型，根据数学模型的输出结果，确定拍摄装置的装配质量；或者，在要求较高的实验环境下将拍摄装置装配到光学系统中，利用高精度的光学检测仪器对拍摄装置进行标定，通过标定结果确定拍摄装置的装配质量。发明内容本发明提供了一种装配质量评价方法、装置、设备及存储介质，可以方便快捷的确定光学系统中拍摄装置的装配质量。根据本发明的第一方面，提供了一种装配质量评价方法，该方法包括：获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，所述标定板的位置预先设定；根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高；根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量。可选的，所述获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，包括：获取所述拍摄装置在多个位置拍摄所述标定板得到的原始图像序列；根据所述原始图像序列的清晰度，确定所述拍摄装置的对焦位置；获取所述拍摄装置在所述对焦位置以及以离焦区域内的多个离焦位置拍摄所述标定板得到的评价图像序列，所述离焦区域以所述对焦位置为中心，所述离焦区域的区域边缘位置与所述对焦位置的距离预先设定。可选的，所述根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高，包括：将各图像按照相同的方式切分为P个图像块，P为大于等于2的正整数；拟合所述图像块中的光斑，得到对应图像块的全宽半高。进一步的，所述将各图像按照相同的方式切分为P个图像块，包括：将各图像进行预处理，预处理后的图像相对于处理前的图像清晰度高；将所述预处理后的图像按照相同的方式切分为P个图像块。可选的，所述拟合所述图像块中的光斑，得到对应图像块的全宽半高，包括：对所述图像块中的光斑依次进行高斯拟合，根据各光斑的高斯拟合结果确定对应图像块的全宽半高。可选的，所述根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量，包括：根据各图像中的第X个图像块中清晰度最高的图像块对应的第一图像的第一拍摄位置，确定拍摄位置与所述第一拍摄位置的距离小于等于距离阈值的第二图像，其中1≤X≤P；根据第三图像中的第X个图像块的全宽半高、第三图像的拍摄位置、第四图像中的第X个图像块的全宽半高以及第四图像的拍摄位置，进行抛物线拟合，得到第X个拟合全宽半高，其中，所述第三图像为所述第一图像和第二图像中全宽半高最小的图像块对应的图像，所述第四图像为所述第三图像前后的N张图像，所述N预先设定，所述N为正整数；根据P个拟合全宽半高至少确定所述拍摄装置装配时光照分布均匀度和光照清晰度之一，并根据所述光照分布均匀度和光照清晰度至少之一确定所述拍摄装置的装配质量。进一步的，所述根据P个拟合全宽半高至少确定所述拍摄装置装配时光照分布均匀度和光照清晰度之一，包括：根据所述P个拟合全宽半高的均值和标准差，确定第一阈值范围；所述P个拟合全宽半高都在所述第一阈值范围内，则所述拍摄装置装配时光照分布均匀度分布在均匀度阈值范围内；所述P个拟合全宽半高的均值在第二阈值范围内，则所述拍摄装置装配时光照清晰度小于等于清晰度阈值，所述第二阈值范围与所述拍摄装置的性能参数对应。根据本发明的第二方面，提供了一种装配质量评价装置，该装置包括：获取模块，用于获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，所述标定板的位置预先设定；计算模块，用于根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高；评价模块，用于根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量。根据本发明的第三方面，提供了一种电子设备，包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器实现如本发明任一实施例所述的装配质量评价方法。根据本发明的第四方面，提供了一种计算机可读存储存储介质，所述计算机指令用于使所述计算机执行如本发明任一实施例所述装配质量评价方法。本发明提供的一种装配质量评价方法、装置、设备及存储介质。通过获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，所述标定板的位置预先设定；根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高；根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量。根据光学系统中的拍摄装置拍摄标定板的评价图像序列中图像块的光斑，确定图像块的全宽半高，图像块的全宽半高可以体现图像块的光斑能量集中情况，结合图像块的全宽半高以及图像块的清晰度这两个维度，可以确定光学系统中拍摄装置的装配质量。采用本发明的技术方案，既无需构建复杂的数学模型，又不用借助高精度的光学检测仪器进行标定，成本较低、计算复杂度低，实现方便、快捷。应当理解，本部分所描述的内容并非旨在标识本发明的实施例的关键或重要特征，也不用于限制本发明的范围。本发明的其它特征将通过以下的说明书而变得容易理解。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是根据本发明实施例提供的一种装配质量评价方法的流程示意图；图2是根据本发明实施例提供的一种拍摄装置在不同拍摄位置的光斑示意图；图3是根据本发明实施例提供的一种不同图像块的全宽半高分布示意图图；图4是根据本发明实施例提供的一种不同图像块的清晰度的分布曲线图；图5是根据本发明实施例提供的一种第X个图像块的全宽半高的拟合抛物线；图6是根据本发明实施例提供的一种拟合全宽半高分布图；图7是根据本发明实施例提供的一种装配质量评价装置的结构示意图；图8是用来实现本发明实施例的一种装配质量评价方法的电子设备的框图。具体实施方式为了使本技术领域的人员更好地理解本申请方案，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分的实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本申请保护的范围。需要说明的是，本申请的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本申请的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。实施例一根据本申请实施例，提供了一种装配质量评价方法的流程示意图，该装配质量评价方法应用于光学系统中，用于评价光学系统中的拍摄装置的装配质量。需要说明的是，在附图的流程图示出的步骤可以在诸如一组计算机可执行指令的计算机系统中执行，并且，虽然在流程图中示出了逻辑顺序，但是在某些情况下，可以以不同于此处的顺序执行所示出或描述的步骤。如图1所示，该装配质量评价方法包括如下步骤：S110、S120和S130。S110、获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，所述标定板的位置预先设定。拍摄装置在不同位置拍摄标定板。标定板上有微孔，微孔里有荧光物质，当拍摄装置拍摄所述标定板时，微孔里面的荧光物发光，拍摄装置拍摄标定板得到的图像中有对应的光斑。示例性的，标定板上有250×145个微孔，每个微孔的直径为5微米，相邻微孔的间距为20微米，微孔中填充荧光物质。可选的，所述获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，包括：获取所述拍摄装置在多个位置拍摄所述标定板得到的原始图像序列；根据所述原始图像序列的清晰度，确定所述拍摄装置的对焦位置。当拍摄装置位于对焦位置时，图像的清晰度最高；拍摄装置距离对焦位置越近，图像越清晰；距离对焦位置越远，图像越模糊。在本实施例中，可以利用曲线拟合的方法，以原始图像序列中各图像的清晰度为纵坐标，以拍摄装置所在的位置为横坐标，进行曲线拟合，得到的曲线的极值点的位置即为对焦位置。获取所述拍摄装置在所述对焦位置以及以离焦区域内的多个离焦位置拍摄所述标定板得到的评价图像序列，所述离焦区域以所述对焦位置为中心，所述离焦区域的区域边缘位置与所述对焦位置的距离预先设定，即所述离焦区域的范围预先设定。以所述对焦位置为中心，控制所述拍摄装置在除对焦位置之外的离焦区域内多个位置拍摄标定板；其中，对焦位置所拍摄的图像上光斑清晰；离焦的多个位置所拍摄的图像上光斑模糊。进一步的，所述离焦区域的范围根据拍摄装置的性能参数确定，即包括不同拍摄装置的光学系统的离焦区域的范围不同。示例性的，如图2所示，提供了一种拍摄装置在不同拍摄位置的光斑示意图，以所述对焦位置为基准控制所述拍摄装置在离焦、对焦、离焦的多个位置拍摄标定板共15张图像。1-15张图像的光斑清晰度应为：模糊-清晰-模糊。其中，在所述对焦位置上只拍摄一张清晰的图像，在离焦区域的多个位置上得到多张模糊的图像，其中，离焦位置拍摄的图像是以对焦位置为中心上下移动到拍摄装置的不同位置的获得的。S120、根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高。所述根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高，包括：将各图像按照相同的方式切分为P个图像块，P为大于等于2的正整数；拟合所述图像块中的光斑，得到对应图像块的全宽半高。各图像中不同区域之间光斑的清晰度、能量集中程度等难以完全一致，因此,将各图像按照相同的方式切分为P个图像块，P为大于等于2的正整数，以第1个图像块、第2个图像块……第P个图像块的方式标识图像块在对应图像中的位置。单个图像块中光斑的清晰度以及能量集中程度等基本相同。可选的，在本实施例中，各图像块中的光斑数量相同。示例性的，若所述标定板包括250×145个5微米孔，根据图像尺寸将单个图像划分为6行9列，共54个图像块，则P的值为54，那么将36250个光斑均匀部署到每个图像块中，即每个图像块中均匀分布25×25个光斑，共625个。其中，第1行第1列的图像块为第1个图像块、第1行第2列的图像块为第2个图像块……第1行第9列为第9个图像块，第2行第1列为第10个图像块，依次对所有54个图像块进行排序，得到P个图像块。全宽半高，也称作半高全宽、半峰全幅、或半高宽，是指在对光斑进行高斯拟合得到的高斯函数的一个峰中，前后两个函数值等于峰值一半的点之间的距离，其作为表征光斑能量集中程度的指标，单个光斑能量越集中，其全宽半高越小。进一步的，所述将各图像按照相同的方式切分为P个图像块，包括：将各图像进行预处理，预处理后的图像相对于处理前的图像清晰度高；将所述预处理后的图像按照相同的方式切分为P个图像块。可选的,将图像进行预处理包括:将图像进行归一化处理,增强归一化之后图像的对比度、对增强了对比度的图像进行二值化处理、对二值化后的图像进行膨胀得到预处理后的图像。进一步的,可以计算预处理后的图像的清晰度。示例性的，由于光照不均匀可能导致图像上不同区域的光斑的峰值能量区别明显，因此，将图像进行归一化处理具体可以为对图像的灰度归一化处理，从而降低外部环境对图像质量造成的影响；归一化的公式可以如下式所示：其中，z为图像的原始灰度值、G为图像归一化后的灰度值；zmin为图像原始灰度值中的最小值、zmax为图像原始灰度值中的最大值。进一步的，增强归一化之后图像的对比度的实现方式可以为对归一化处理后图像进行拉普拉斯变换，从而增强归一化处理后图像的灰度反差，即增强归一化处理后图像中灰度突变的区域，减弱归一化处理后图像中灰度缓慢变化的区域。进一步的，对增强了对比度的图像进行二值化处理可以采用最大类间方差法，由于增强了对比度的图像中光斑区域与非光斑区域对比度较大，采用Otsu法将增强了对比度的图像根据分割阈值进行二值化分割，得到二值化后的图像。进一步的，可以对二值化后的图像通过形态学的膨胀方法进行膨胀得到预处理后的图像，二值化后的图像中可能出现光斑边界被分割的情况，通过膨胀可以使相近的光斑边界合并为一个。可选的，所述拟合所述图像块中的光斑，得到对应图像块的全宽半高，包括：对所述图像块中的光斑依次进行高斯拟合，根据各光斑的高斯拟合结果确定对应图像块的全宽半高。对切分后的图像块中每个光斑进行提取：对图像块采用8邻域的连通域提取的方法，得到图像块中单个光斑所在的区域，其中连通域的中心为近似光斑中心；光斑中心的能量最集中，灰度值最大，但是连通域的中心灰度值不一定最大，因此，需要对图像块的光斑中心位置进行修正，修正方式可以为：在图像块对应的预处理前的图像中，选择连通域的中心所在的区域中灰度值最大的位置，该位置作为图像块中光斑区域的中心位置。对所述图像块中的光斑依次进行高斯拟合，示例性的，高斯拟合过程可以如下：对光斑区域进行曲线拟合，采用的拟合模型为高斯模型，由于高斯模型中离光斑中心越远的区域亮度越小，而且因为背景噪声的存在，光斑中心四周的暗区域，灰度值也不为零，所以，高斯模型对应的函数中将光斑周围的背景噪声考虑进去，如下式所示：其中g表示高斯函数；A表示背景噪声；x，y表示光斑区域对应的像素坐标；x0，y0表示光斑区域的中心点坐标；σx，σy表示该光斑区域在x，y方向的像素灰度值的标准差；G为G，表示x，y像素坐标对应的灰度值。对表达式的左侧简化为M，得到式。即：其中：x＝T表示像素的位置；θ＝表示高斯曲线的参数；A表示背景噪声；x，y表示光斑区域对应的像素坐标；x0，y0表示光斑区域的中心点坐标；σx，σy表示该光斑区域在x，y方向的像素灰度值的标准差；G为G，表示x，y像素坐标对应的灰度值。其中，通过迭代方法来拟合出每个光斑区域对应的高斯曲线参数，迭代方法包括但不限于最小二乘解析法、高斯-牛顿法或L-M迭代方法。对所述图像块中的光斑依次进行高斯拟合，根据各光斑的高斯拟合结果确定对应图像块的全宽半高，包括：根据每个图像块中所有的光斑，依次对每个光斑进行高斯拟合，得到各个图像块中每个光斑在水平方向上的全宽半高和竖直方向上的全宽半高；以单个图像块中所有光斑的水平方向上的全宽半高和竖直方向上的全宽半高的中位数为标准求均值得到该单个图像块所对应的全宽半高，其代表了该图像块中所有光斑的能量集中程度，其数值越小，说明该图像块内光斑的能量越集中，则光学系统在该图像块区域的分辨率越高。示例性的，每个图像块中包括625个光斑，分别依次对所述625个光斑进行曲线拟合，在该图像块中得到625个水平方向上的全宽半高和625个竖直方向上的全宽半高；在水平方向上的625个全宽半高中选择水平方向上全宽半高的中位数，在竖直方向上的625个全宽半高中选择竖直方向上全宽半高的中位数，求所述两个中位数的均值得到该图像块的全宽半高。进一步的，对所有的图像块做相同的处理，得到P个图像块的全宽半高。示例性的，如图3所示，提供了一种不同图像块的全宽半高分布示意图。将15张图像的单个图像均按照6行9列的方式切分为6×9个图像块，每个图像块进行高斯拟合，获得对应图像块的全宽半高。应当理解的是，为了对高斯拟合的结果作以说明，仅将所述54个图像块中的9个图像块的全宽半高分布示出。如图3所示，横坐标表示15张图像的编号，纵坐标表示全宽半高的值；全宽半高最小值位于对焦位置附近，其变换规律近似一个二次曲线。S130、根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量。通过基于梯度的方法确定图像块的清晰度，基于梯度的方法包括但不限于：Brenner梯度法、Tenegrad梯度法、laplace梯度法、Roberts函数、基于Prewitts算子的函数以及中值滤波-离散余弦函数等。示例性的，如图4所示，提供了一种不同图像块的清晰度的分布曲线图，在所述15张图像中，将单个图像按照相同的方式分成54个图像块。同理，仅以所述54个图像块中的9个图像块为例，示出所述不同图像块的清晰度分布曲线图。其中，9条曲线表示9个不同的图像块所在的位置，每条曲线上的15个坐标点表示在第X个图像块位置下15张图像所对应的清晰度，横坐标表示15张图像的图像编号，纵坐标表示清晰度的值。由此可见，每个图像块清晰度最高的对焦位置附近，光斑的清晰度应为模糊-清晰-模糊，其变换规律近似一个二次曲线。可选的，所述根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量，包括：根据各图像中的第X个图像块中清晰度最高的图像块对应的第一图像的第一拍摄位置，确定拍摄位置与所述第一拍摄位置的距离小于等于距离阈值的第二图像，其中1≤X≤P；根据第三图像中的第X个图像块的全宽半高、第三图像的拍摄位置、第四图像中的第X个图像块的全宽半高以及第四图像的拍摄位置，进行抛物线拟合，得到第X个拟合全宽半高，其中，所述第三图像为所述第一图像和第二图像中全宽半高最小的图像块对应的图像，所述第四图像为所述第三图像前后的N张图像，所述N预先设定，所述N为正整数；根据P个拟合全宽半高至少确定所述拍摄装置装配时光照分布均匀度和光照清晰度之一，并根据所述光照分布均匀度和光照清晰度至少之一确定所述拍摄装置的装配质量。其中，第X个图像块在评价图像序列的各图像中的位置相同。在得到拟合全宽半高过程中进行抛物线拟合的方法与在得到图像块的全宽半高过程中进行高斯拟合的方法，同样属于曲线拟合的方法，在本方案中在不同过程进行应用的原因主要在于，得到图像块的全宽半高过程中，光斑的分布符合高斯函数的规律，因此使用高斯模型来拟合各个光斑的高斯曲线，得到光斑的全宽半高；进一步的计算所述图像块的全宽半高；而第X个图像块位置下的全宽半高的分布符合二次函数的规律，因此使用抛物线来拟合得到拟合全宽半高。不过抛物线拟合方法与高斯拟合方法都会用到迭代计算，这两种拟合方法可以使用相同的迭代方法，例如迭代方法可以包括但不限于最小二乘解析法、高斯-牛顿法或L-M迭代方法。示例性的，当P为54时，评价图像序列中所有的图像均以相同的方式划分成54个图像块，通过上述方式得到54个拟合全宽半高。如图5所示，提供了第X个图像块的全宽半高的拟合抛物线。如图所示，横坐标表示拍摄位置，纵坐标表示全宽半高；所述P的值为54个，但是以其中的9个图像块为例说明9个不同图像块的全宽半高的拟合抛物线；单条曲线上每个坐标点对应一个全宽半高的值和一个拍摄位置；抛物线的最小值为第X个拟合全宽半高，并且拟合全宽半高分布在之间，分布较为均匀。需要说明的是，/＞表示P个拟合全宽半高的平均值，FWHMσ表示P个拟合全宽半高的标准差。进一步的，所述根据P个拟合全宽半高至少确定所述拍摄装置装配时光照分布均匀度和光照清晰度之一，包括：根据所述P个拟合全宽半高的均值和标准差，确定第一阈值范围；所述P个拟合全宽半高都在所述第一阈值范围内，则所述拍摄装置装配时光照分布均匀度分布在均匀度阈值范围内；所述P个拟合全宽半高的均值在第二阈值范围内，则所述拍摄装置装配时光照清晰度小于等于清晰度阈值，所述第二阈值范围与所述拍摄装置的性能参数对应。值得注意的是：全宽半高的值越小，则清晰度越高，所述清晰度阈值根据全宽半高来确定。可选的，所述第一阈值范围是由所述拟合全宽半高的均值加减三倍的标准差确定。若P个拟合全宽半高均分布在所述第一阈值范围内，则认为拟合全宽半高分布集中，图像块中的光照分布均匀，对应在图像中的不同图像块位置清晰度接近，则光学系统中的拍摄装置的装配质量较高。不同拍摄装置的第二阈值范围不同，可选的，所述第二阈值范围为。在第二阈值范围内,拟合全宽半高的均值越小，其拍摄装置清晰度越高，表示拍摄装置的装配质量越高。拍摄装置的性能参数有：分辨率、像素深度、最大帧率、曝光方式和快门速度、像元尺寸、光谱响应特性等。光学系统中的拍摄装置可以分辨出来的两个同等亮度的点光源之间的最小距离称为该光学系统的分辨率；其作为用于评价光斑清晰度与分辨率的指标，全宽半高作为分辨率的指标之一，该值越小，光斑能量越集中，能够区分两个光斑的最小距离越小，光学系统的分辨率就越高，从而表示光学系统中的拍摄装置的装配质量越高。如图6所示，提供了一种拟合全宽半高分布图。由图可知，当P为54时，拟合全宽半高的均值为1.943，标准差为0.0113192，P个拟合全宽半高均分布在三倍的标准差之间，并且所述拟合全宽半高的均值小于等于二；说明光学系统中拍摄装置光照均匀，且在对焦位置的分辨率较高。将图6中拟合全宽半高分布状态，打印到本地输出光学系统装配质量的评价结果。采用本实施例的一种装配质量评价方法，通过获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，所述标定板的位置预先设定；根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高；根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量。根据光学系统中的拍摄装置拍摄标定板的评价图像序列中图像块的光斑，确定图像块的全宽半高，图像块的全宽半高可以体现图像块的光斑能量集中情况，结合图像块的全宽半高以及图像块的清晰度这两个维度，可以确定光学系统中拍摄装置的装配质量。采用本发明的技术方案，既无需构建复杂的数学模型，又不用借助高精度的光学检测仪器进行标定，成本较低、计算复杂度低，实现方便、快捷。实施例二根据本发明实施例，提供了一种装配质量评价装置的结构示意图，该装置可以执行上述实施例一提供的装配质量评价方法。如图7所示，该装置包括：获取模块710、计算模块720和评价模块730。其中：获取模块710，用于获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，所述标定板的位置预先设定。计算模块720，用于根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高。评价模块730，用于根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量。可选的，所述获取模块710，包括：第一获取单元，用于获取所述拍摄装置在多个位置拍摄所述标定板得到的原始图像序列；确定单元，用于根据所述原始图像序列的清晰度，确定所述拍摄装置的对焦位置；第二获取单元，用于获取所述拍摄装置在所述对焦位置以及以离焦区域内的多个离焦位置拍摄所述标定板得到的评价图像序列，所述离焦区域以所述对焦位置为中心，所述离焦区域的区域边缘位置与所述对焦位置的距离预先设定。可选的，所述计算模块720，包括：切分单元，用于将各图像按照相同的方式切分为P个图像块，P为大于等于2的正整数；拟合单元，用于拟合所述图像块中的光斑，得到对应图像块的全宽半高。进一步的，所述切分单元，包括：第一切分子单元，用于将各图像进行预处理，预处理后的图像相对于处理前的图像清晰度高；第二切分子单元，用于将所述预处理后的图像按照相同的方式切分为P个图像块。可选的，所述拟合单元，还用于对所述图像块中的光斑依次进行高斯拟合，根据各光斑的高斯拟合结果确定对应图像块的全宽半高。可选的，所述评价模块730，还用于:根据各图像中的第X个图像块中清晰度最高的图像块对应的第一图像的第一拍摄位置，确定拍摄位置与所述第一拍摄位置的距离小于等于距离阈值的第二图像，其中1≤X≤P；根据第三图像中的第X个图像块的全宽半高、第三图像的拍摄位置、第四图像中的第X个图像块的全宽半高以及第四图像的拍摄位置，进行抛物线拟合，得到第X个拟合全宽半高，其中，所述第三图像为所述第一图像和第二图像中全宽半高最小的图像块对应的图像，所述第四图像为所述第三图像前后的N张图像，所述N预先设定，所述N为正整数；根据P个拟合全宽半高至少确定所述拍摄装置装配时光照分布均匀度和光照清晰度之一，并根据所述光照分布均匀度和光照清晰度至少之一确定所述拍摄装置的装配质量。进一步的，所述评价模块730，还用于:根据所述P个拟合全宽半高的均值和标准差，确定第一阈值范围；所述P个拟合全宽半高都在所述第一阈值范围内，则所述拍摄装置装配时光照分布均匀度分布在均匀度阈值范围内；所述P个拟合全宽半高的均值在第二阈值范围内，则所述拍摄装置装配时光照清晰度小于等于清晰度阈值，所述第二阈值范围与所述拍摄装置的性能参数对应。采用本实施例的一种装配质量评价装置。该装置包括：获取模块，用于获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，所述标定板的位置预先设定；计算模块，用于根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高；评价模块，用于根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量。根据光学系统中的拍摄装置拍摄标定板的评价图像序列中图像块的光斑，确定图像块的全宽半高，图像块的全宽半高可以体现图像块的光斑能量集中情况，结合图像块的全宽半高以及图像块的清晰度这两个维度，可以确定光学系统中拍摄装置的装配质量。采用本发明的技术方案，既无需构建复杂的数学模型，又不用借助高精度的光学检测仪器进行标定，成本较低、计算复杂度低，实现方便、快捷。实施例三下面参考图8，其示出了适于用来实现本发明实施例的电子设备800的结构图。电子设备旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电子设备还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本发明的实现。如图8所示，电子设备800可以包括处理装置810，其可以根据存储在只读存储器820中的程序或者从存储装置880加载到随机访问存储器830中的程序而执行各种适当的动作和处理。处理装置810可以是各种具有处理和计算能力的通用和/或专用处理组件。处理装置810的一些示例包括但不限于中央处理单元、图形处理单元、各种专用的人工智能计算芯片、各种运行机器学习模型算法的计算单元、数字信号处理器、以及任何适当的处理器、控制器、微控制器等。处理装置810执行上文所描述的各个方法和处理。在RAM 830中，还存储有电子设备800操作所需的各种程序和数据。处理装置810、ROM 820以及RAM 830通过总线840彼此相连。输入/输出接口850也连接至总线840。通常，以下装置可以连接至I/O接口850：包括例如触摸屏、触摸板、键盘、鼠标、摄像头、麦克风、加速度计、陀螺仪等的输入装置860；包括例如液晶显示器、扬声器、振动器等的输出装置870；包括例如磁带、硬盘等的存储装置880；以及通信装置890。通信装置890可以允许电子设备800与其他设备进行无线或有线通信以交换数据。虽然图8示出了具有各种装置的电子设备800，但是应理解的是，并不要求实施或具备所有示出的装置。可以替代地实施或具备更多或更少的装置。特别地，根据本发明的实施例，上文参考流程图描述的过程可以被实现为计算机软件程序。例如，本发明的实施例包括一种计算机程序产品，其包括承载在非暂态计算机可读介质上的计算机程序，该计算机程序包含用于执行流程图所示的方法的程序代码。在这样的实施例中，该计算机程序可以通过通信装置890从网络上被下载和安装，或者从存储装置880被安装，或者从ROM 820被安装。在该计算机程序被处理装置810执行时，执行本发明实施例的方法中限定的上述功能。备选地，在其他实施例中，处理装置810可以通过其他任何适当的方式而被配置为执行方法：获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，所述标定板的位置预先设定；根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高；根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量。实施例四本发明上述的计算机可读介质可以是计算机可读信号介质或者计算机可读存储介质或者是上述两者的任意组合。计算机可读存储介质例如可以是——但不限于——电、磁、光、电磁、红外线、或半导体的系统、装置或器件，或者任意以上的组合。计算机可读存储介质的更具体的例子可以包括但不限于：具有一个或多个导线的电连接、便携式计算机磁盘、硬盘、随机访问存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑磁盘只读存储器、光存储器件、磁存储器件、或者上述的任意合适的组合。在本发明中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用。而在本发明中，计算机可读信号介质可以包括在基带中或者作为载波一部分传播的数据信号，其中承载了计算机可读的程序代码。这种传播的数据信号可以采用多种形式，包括但不限于电磁信号、光信号或上述的任意合适的组合。计算机可读信号介质还可以是计算机可读存储介质以外的任何计算机可读介质，该计算机可读信号介质可以发送、传播或者传输用于由指令执行系统、装置或者器件使用或者与其结合使用的程序。计算机可读介质上包含的程序代码可以用任何适当的介质传输，包括但不限于：电线、光缆、RF等等，或者上述的任意合适的组合。在一些实施方式中，客户端、服务器可以利用诸如HTTP之类的任何当前已知或未来研发的网络协议进行通信，并且可以与任意形式或介质的数字数据通信互连。通信网络的示例包括局域网，广域网，网际网以及端对端网络，以及任何当前已知或未来研发的网络。上述计算机可读介质可以是上述电子设备中所包含的；也可以是单独存在，而未装配入该电子设备中。上述计算机可读介质承载有一个或者多个程序，当上述一个或者多个程序被该电子设备执行时，使得该电子设备：获取光学系统中的拍摄装置在不同位置拍摄标定板得到的评价图像序列，所述标定板的位置预先设定；根据所述评价图像序列中各图像的图像块的光斑，确定对应图像块的全宽半高；根据所述图像块的全宽半高和清晰度，确定所述光学系统中拍摄装置的装配质量。可以以一种或多种程序设计语言或其组合来编写用于执行本发明的操作的计算机程序代码，上述程序设计语言包括但不限于面向对象的程序设计语言—诸如Java、Smalltalk、C++，还包括常规的过程式程序设计语言—诸如“C”语言或类似的程序设计语言。程序代码可以完全地在用户计算机上执行、部分地在用户计算机上执行、作为一个独立的软件包执行、部分在用户计算机上部分在远程计算机上执行、或者完全在远程计算机或服务器上执行。在涉及远程计算机的情形中，远程计算机可以通过任意种类的网络——包括局域网或广域网—连接到用户计算机，或者，可以连接到外部计算机。附图中的流程图和框图，图示了按照本发明各种实施例的系统、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段、或代码的一部分，该模块、程序段、或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个接连地表示的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行规定的功能或操作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。描述于本发明实施例中所涉及到的模块可以通过软件的方式实现，也可以通过硬件的方式来实现。其中，模块的名称在某种情况下并不构成对该模块本身的限定。本文中以上描述的功能可以至少部分地由一个或多个硬件逻辑部件来执行。例如，非限制性地，可以使用的示范类型的硬件逻辑部件包括：数字电子电路系统、集成电路系统、现场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、复杂可编程逻辑设备、计算机硬件、固件、软件、和/或它们的组合等等。用于实施本发明的方法的程序代码可以采用一个或多个编程语言的任何组合来编写。这些程序代码可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器或控制器，使得程序代码当由处理器或控制器执行时使流程图和/或框图中所规定的功能/操作被实施。程序代码可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本发明的上下文中，机器可读介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的程序。机器可读介质可以是机器可读信号介质或机器可读储存介质。机器可读介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。为了提供与用户的交互，可以在计算机上实施此处描述的系统和技术，该计算机具有：用于向用户显示信息的显示装置或者LCD监视器)；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给计算机。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网区块链网络和互联网。计算机系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。服务器可以是云服务器，又称为云计算服务器或云主机，是云计算服务体系中的一项主机产品，以解决了传统物理主机与VPS服务中，存在的管理难度大，业务扩展性弱的缺陷。服务器也可以为分布式系统的服务器，或者是结合了区块链的服务器。人工智能是研究使计算机来模拟人的某些思维过程和智能行为的学科，既有硬件层面的技术也有软件层面的技术。人工智能硬件技术一般包括如传感器、专用人工智能芯片、云计算、分布式存储、大数据处理等技术；人工智能软件技术主要包括计算机视觉技术、语音识别技术、自然语言处理技术及机器学习/深度学习技术、大数据处理技术、知识图谱技术等几大方向。云计算，指的是通过网络接入弹性可扩展的共享物理或虚拟资源池，资源可以包括服务器、操作系统、网络、软件、应用和存储设备等，并可以按需、自服务的方式对资源进行部署和管理的技术体系。通过云计算技术，可以为人工智能、区块链等技术应用、模型训练提供高效强大的数据处理能力。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本发发明中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本发明提供的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本发明保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本发明的精神和原则之内所作的修改、等同替换和改进等，均应包含在本发明保护范围之内。
