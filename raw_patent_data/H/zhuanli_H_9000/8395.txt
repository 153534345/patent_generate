标题title
一种台区智能融合终端SPI通信中不定长数据帧的接收方法
摘要abst
本申请适用于通信技术领域，提供了一种台区智能融合终端SPI通信中不定长数据帧的接收方法，包括：初始化从机的SPI接口，对从机的MCU的SPI寄存器进行初始配置，并初始化SPI寄存器的接收中断程序；建立SPI寄存器的接收缓冲区；对MCU的外部中断寄存器进行初始配置，将CS片选信号复用为外部中断的触发管脚，并配置为在CS片选信号上升沿触发CS外部中断程序；基于CS片选信号和接收中断程序将接收到的单字节数据放入接收缓冲区；基于CS片选信号和CS外部中断信号从接收缓冲区中取出收到的一帧完整的数据。本申请能够在处理器资源有限，且通信帧协议中存在长度字段不固定时，实现SPI不定长协议帧的接收功能。
权利要求书clms
1.一种台区智能融合终端SPI通信中不定长数据帧的接收方法，其特征在于，包括：初始化从机的SPI接口，对所述从机的MCU的SPI寄存器进行初始配置，并初始化SPI寄存器的接收中断程序SPI_IRQ；建立所述SPI寄存器的接收缓冲区；对所述MCU的外部中断寄存器进行初始配置，将CS片选信号复用为外部中断的触发管脚，并将所述触发管脚配置为在所述CS片选信号上升沿触发CS外部中断信号；基于所述CS片选信号和所述接收中断程序SPI_IRQ将接收到的单字节数据放入所述接收缓冲区；基于所述CS片选信号和所述CS外部中断信号从所述接收缓冲区中取出收到的一帧完整的数据；所述一帧完整的数据包括具有字节累计长度的所述单字节数据。2.如权利要求1所述的台区智能融合终端SPI通信中不定长数据帧的接收方法，其特征在于，所述初始化MCU的SPI接口，对所述MCU的从机的配置寄存器进行初始配置，包括：配置所述SPI接口的通信模式；配置SPI寄存器的CS片选信号控制方式为硬件片选信号NSS_Hard；所述硬件片选信号NSS_Hard用于使所述从机根据主机的SPI 接口的CS片选信号电平自动开启接收状态。3.如权利要求2所述的台区智能融合终端SPI通信中不定长数据帧的接收方法，其特征在于，所述配置所述SPI接口的通信模式，包括：将所述MCU的SPI接口设置为主机发送，从机接收模式，并配置所述SPI接口的时钟的极性和相位与主机的时钟的极性和相位一致。4.如权利要求1所述的台区智能融合终端SPI通信中不定长数据帧的接收方法，其特征在于，所述初始化SPI寄存器的接收中断程序SPI_IRQ，包括：配置中断事件接收非空标志RXNE；所述非空标志RXNE用于当MCU内部SPI接收数据非空时，触发所述接收中断程序SPI_IRQ。5.如权利要求1所述的台区智能融合终端SPI通信中不定长数据帧的接收方法，其特征在于，所述对所述MCU的外部中断寄存器进行初始配置，包括：利用MCU事件线边沿检测器，设置CS外部中断处理程序，并开启IO复用外设时钟APB_AFIO，开启CS片选信号的复用功能；所述复用功能用于将所述CS片选信号复用为外部中断的触发管脚，并将所述触发管脚配置为在所述CS片选信号上升沿触发所述CS外部中断处理程序。6.如权利要求1所述的台区智能融合终端SPI通信中不定长数据帧的接收方法，其特征在于，所述基于所述CS片选信号和所述接收中断程序SPI_IRQ将接收到的单字节数据放入所述接收缓冲区，包括：当主机拉低所述CS片选信号，开始发送数据时，触发所述从机的所述接收中断程序SPI_IRQ，将接收到的单字节数据放入所述接收缓冲区，并保存接收到的所述单字节数据的字节累计长度。7.如权利要求1所述的台区智能融合终端SPI通信中不定长数据帧的接收方法，其特征在于，所述基于所述CS片选信号和所述CS外部中断处理程序从所述接收缓冲区中取出收到的一帧完整的数据，包括：当主机拉高CS片选信号时， CS片选信号上升沿触发所述从机的CS外部中断信号EXTI；所述CS外部中断信号EXTI由所述CS外部中断处理程序控制；在外部中断处理程序中，从所述接收缓冲区中按照所述字节累计长度取出收到的一帧完整的数据。8.如权利要求7所述的台区智能融合终端SPI通信中不定长数据帧的接收方法，其特征在于，从所述接收缓冲区中按照所述字节累计长度取出收到的一帧完整的数据之后，将本次的所述字节累计长度清零，准备下一帧数据的接收；所述下一帧的数据长度不固定。9.如权利要求1所述的台区智能融合终端SPI通信中不定长数据帧的接收方法，其特征在于，所述接收缓冲区具有预设字节长度；所述预设字节长度大于所述字节累计长度。10.如权利要求6所述的台区智能融合终端SPI通信中不定长数据帧的接收方法，其特征在于，所述触发所述从机的所述接收中断程序SPI_IRQ，将接收到的单字节数据放入所述接收缓冲区，包括：触发所述从机的接收中断程序SPI_IRQ；所述接收中断程序SPI_IRQ发出中断信号，信号每中断一次取一个单字节数据放入所述接收缓冲区，所述字节累计长度加1，直到将主机发送的一帧数据取完。
说明书desc
技术领域本申请属于通信技术领域，尤其涉及一种台区智能融合终端SPI通信中不定长数据帧的接收方法。背景技术在台区智能融合终端SPI通信的实际应用中，多数为不定长的通信帧协议，接收方需要在接收时辨识出每一个完整的帧，便于进行后续从完整帧中获取有效数据。现有SPI不定长接收技术有两种：一种是MCU软件采用在SPI中断接收程序中根据通信协议帧格式，解析出长度字段，再根据该长度继续在SPI中断服务函数中进行数据接收。这种方法需要MCU软件在SPI中断接收程序中对每个接收到的字节都进行帧格式解析，解析过程繁琐，对于部分帧格式中长度字段不固定的情况，该方法无法实现接收完整帧。另一种是MCU软件采用DMA技术以固定长度持续接收，该方法虽然不会造成数据丢失，但由于无法得知SPI总线的空闲状态，造成多帧堆叠在DMA缓冲区中，需要对缓冲区中的数据进行摘取辨识，且需要半帧拼叠，过程繁琐，在遇到MCU处理器DMA资源有限的情况时，MCU无法采用DMA方法进行数据接收。发明内容为克服相关技术中存在的问题，本申请实施例提供了一种台区智能融合终端SPI通信中不定长数据帧的接收方法，以解决在从板MCU处理器DMA资源有限且通信帧协议中存在长度字段不固定的情况下，无法实现接收完整帧的问题。本申请是通过如下技术方案实现的：第一方面，本申请实施例提供了台区智能融合终端SPI通信中不定长数据帧的接收方法，包括：初始化从机的SPI接口，对从机的MCU的SPI寄存器进行初始配置，并初始化SPI寄存器的接收中断程序SPI_IRQ；建立SPI寄存器的接收缓冲区；对MCU的外部中断寄存器进行初始配置，将CS片选信号复用为外部中断的触发管脚，并将触发管脚配置为在CS片选信号上升沿触发CS外部中断信号；基于CS片选信号和接收中断程序SPI_IRQ将接收到的单字节数据放入接收缓冲区；基于CS片选信号和CS外部中断信号从接收缓冲区中取出收到的一帧完整的数据；一帧完整的数据包括具有字节累计长度的单字节数据。在第一方面的一种可能的实施方式中，初始化MCU的SPI接口，对MCU的从机的配置寄存器进行初始配置，包括：配置SPI接口的通信模式；配置SPI寄存器的CS片选信号控制方式为硬件片选信号NSS_Hard；硬件片选信号NSS_Hard用于使从机根据主机的SPI 接口的CS片选信号电平自动开启接收状态。在第一方面的一种可能的实施方式中，配置SPI接口的通信模式，包括：将MCU的 SPI接口设置为主机发送，从机接收模式，并配置SPI接口的时钟的极性和相位与主机的时钟的极性和相位一致。在第一方面的一种可能的实施方式中，初始化SPI寄存器的接收中断程序SPI_IRQ，包括：配置中断事件接收非空标志RXNE；非空标志RXNE用于当MCU内部SPI接收数据非空时，触发接收中断程序SPI_IRQ。在第一方面的一种可能的实施方式中，对MCU的外部中断寄存器进行初始配置，包括：利用MCU事件线边沿检测器，设置CS外部中断处理程序，并开启IO复用外设时钟APB_AFIO，开启CS片选信号的复用功能；复用功能用于将CS片选信号复用为外部中断的触发管脚，并将触发管脚配置为在CS片选信号上升沿触发CS外部中断处理程序。在第一方面的一种可能的实施方式中，基于CS片选信号和接收中断程序SPI_IRQ将接收到的单字节数据放入接收缓冲区，包括：当主机拉低CS片选信号，开始发送数据时，触发从机的接收中断程序SPI_IRQ，将接收到的单字节数据放入接收缓冲区，并保存接收到的单字节数据的字节累计长度。在第一方面的一种可能的实施方式中，基于CS片选信号和CS外部中断处理程序从接收缓冲区中取出收到的一帧完整的数据，包括：当主机拉高CS片选信号时， CS片选信号上升沿触发从机的CS外部中断信号EXTI；CS外部中断信号EXTI由CS外部中断处理程序控制；在外部中断处理程序中，从接收缓冲区中按照字节累计长度取出收到的一帧完整的数据。在第一方面的一种可能的实施方式中，从接收缓冲区中按照字节累计长度取出收到的一帧完整的数据之后，将本次的字节累计长度清零，准备下一帧数据的接收；下一帧的数据长度不固定。在第一方面的一种可能的实施方式中，接收缓冲区具有预设字节长度；预设字节长度大于字节累计长度。在第一方面的一种可能的实施方式中，触发从机的接收中断程序SPI_IRQ，将接收到的单字节数据放入接收缓冲区，包括：触发从机的接收中断程序SPI_IRQ；接收中断程序SPI_IRQ发出中断信号，信号每中断一次取一个单字节数据放入接收缓冲区，字节累计长度加1，直到将主机发送的一帧数据取完。本申请实施例与现有技术相比存在的有益效果是：本申请实施例，通过将CS片选信号复用为外部中断的触发管脚，并将触发管脚配置为在CS片选信号上升沿触发CS外部中断，能够应用于产品主板与从板间的SPI通信，在从板MCU处理器DMA资源有限，且通信帧协议中存在长度字段不固定的情况下，实现了SPI不定长协议帧的接收功能。应当理解的是，以上的一般描述和后文的细节描述仅是示例性和解释性的，并不能限制本说明书。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1是本申请一实施例提供的台区智能融合终端SPI通信中不定长数据帧的接收方法的流程示意图；图2是本申请一实施例提供的在CS片选信号上升沿时触发CS外部中断程序的示意图；图3是本申请一实施例提供的终端设备的结构示意图。具体实施方式以下描述中，为了说明而不是为了限定，提出了诸如特定系统结构、技术之类的具体细节，以便透彻理解本申请实施例。然而，本领域的技术人员应当清楚，在没有这些具体细节的其它实施例中也可以实现本申请。在其它情况中，省略对众所周知的系统、装置、电路以及方法的详细说明，以免不必要的细节妨碍本申请的描述。应当理解，当在本申请说明书和所附权利要求书中使用时，术语“包括”指示所描述特征、整体、步骤、操作、元素和/或组件的存在，但并不排除一个或多个其它特征、整体、步骤、操作、元素、组件和/或其集合的存在或添加。还应当理解，在本申请说明书和所附权利要求书中使用的术语“和/或”是指相关联列出的项中的一个或多个的任何组合以及所有可能组合，并且包括这些组合。如在本申请说明书和所附权利要求书中所使用的那样，术语“如果”可以依据上下文被解释为“当...时”或“一旦”或“响应于确定”或“响应于检测到”。类似地，短语“如果确定”或“如果检测到”可以依据上下文被解释为意指“一旦确定”或“响应于确定”或“一旦检测到”或“响应于检测到”。另外，在本申请说明书和所附权利要求书的描述中，术语“第一”、“第二”、“第三”等仅用于区分描述，而不能理解为指示或暗示相对重要性。在本申请说明书中描述的参考“一个实施例”或“一些实施例”等意味着在本申请的一个或多个实施例中包括结合该实施例描述的特定特征、结构或特点。由此，在本说明书中的不同之处出现的语句“在一个实施例中”、“在一些实施例中”、“在其他一些实施例中”、“在另外一些实施例中”等不是必然都参考相同的实施例，而是意味着“一个或多个但不是所有的实施例”，除非是以其他方式另外特别强调。术语“包括”、“包含”、“具有”及它们的变形都意味着“包括但不限于”，除非是以其他方式另外特别强调。为了使本技术领域的人员更好地理解本发明方案，下面将结合附图和具体实施方式，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。SPI是一种高速的全双工通信总线，可实现MCU与外置芯片之间、MCU主机与从机之间的通信连接，通常需要4根通信信号线进行主从通信，分别是主设备数据输入MISO，主设备数据输出MOSI，时钟SCLK，片选CS。当SPI主机将CS拉为低电平时，告知SPI从机数据输入线上的数据有效，接收端此时持续对数据进行接收；当SPI主机将CS拉为高电平时，SPI主机发送结束，同时从机接收停止。在SPI的实际应用中，MCU的SPI并不支持总线空闲中断，而多数应用为不定长的通信帧协议，接收方需要在接收时辨识出每一个完整的帧，便于进行后续从完整帧中获取有效数据。基于背景技术中描述的两种SPI不定长数据接收技术所存在的不足，本申请实施例中提供了一种既能实现接收完整帧，在从板MCU处理器DMA资源有限的情况下又不会造成多帧数据堆叠造成无法进行数据接收的方法。图1是本申请一实施例提供的台区智能融合终端SPI通信中不定长数据帧的接收方法的示意性流程图，参照图1，对该台区智能融合终端SPI通信中不定长数据帧的接收方法的详述如下：在步骤101中，初始化从机的SPI接口，对从机的MCU的SPI寄存器进行初始配置，并初始化SPI寄存器的接收中断程序SPI_IRQ。具体的，初始化从机的SPI接口，对从机的MCU的寄存器进行初始配置，包括：配置SPI接口的通信模式；配置SPI寄存器的CS片选信号控制方式为硬件片选信号NSS_Hard；该硬件片选信号NSS_Hard用于使从机根据主机的SPI 接口的CS片选信号电平自动开启接收状态。示例性的，配置SPI寄存器的CS片选信号控制方式为硬件片选信号NSS_Hard，使得主机发送数据的同时，从机自动开启接收数据的状态，无需额外方式再控制从机开启，能够减少MCU处理器的资源占用，简化数据接收过程。具体的，配置SPI接口的通信模式，包括：将MCU的 SPI接口设置为主机发送、从机接收模式，并配置SPI接口的时钟的极性和相位与主机的时钟的极性和相位一致。示例性的，可以将MCU的 SPI接口设置为主机发送，从机接收数据的模式，则上述MCU与下述MCU均指从机的控制器MCU。具体的，上述初始化SPI寄存器的接收中断程序SPI_IRQ，包括：配置中断事件接收非空标志RXNE；非空标志RXNE用于当MCU内部SPI接收数据非空时，触发接收中断程序SPI_IRQ。示例性的，配置中断事件接收非空标志RXNE，当MCU内部SPI接收数据为非空则触发中断，在SPI接收中断处理函数中读取接收到的数据。在步骤102中，建立SPI寄存器的接收缓冲区。示例性的，从机将接收到的数据存放在该接收缓冲区中。示例性的，接收缓冲区具有预设字节长度；预设字节长度不超过500字节。需要说明的是，步骤102只是在从机中建立接收缓冲区，该接收缓冲区建立在将接收主机发送过来的数据之前即可。在步骤103中，对MCU的外部中断寄存器进行初始配置，将CS片选信号复用为外部中断的触发管脚，并将触发管脚配置为在CS片选信号上升沿触发CS外部中断信号。具体的，对MCU的外部中断寄存器进行初始配置，包括：利用MCU事件线边沿检测器，设置CS外部中断处理程序，并开启IO复用外设时钟APB_AFIO，开启CS片选信号的复用功能；复用功能用于将CS片选信号复用为外部中断的触发管脚，并将触发管脚配置为在CS片选信号上升沿触发CS外部中断处理程序，如图2所示。其中，将IO外部中断EXTI触发管脚定义为跳变沿触发方式。示例性的，利用IO复用外设时钟APB_AFIO驱动CS片选信号的复用功能的开启。示例性的，将触发管脚配置为在CS片选信号上升沿触发CS外部中断处理程序，能够利用在CS片选信号上升沿的时间点，确认主机一帧数据发送结束。在步骤104中，基于CS片选信号和接收中断程序SPI_IRQ将接收到的单字节数据放入接收缓冲区。具体的，基于CS片选信号和接收中断程序SPI_IRQ将接收到的单字节数据放入接收缓冲区，包括：当主机拉低CS片选信号，开始发送数据时，触发从机的接收中断程序SPI_IRQ，将接收到的单字节数据放入接收缓冲区，并保存接收到的单字节数据的字节累计长度。其中，上述预设字节长度大于上述字节累计长度。示例性的，触发SPI接收中断程序SPI_IRQ发出中断信号，接收中断程序SPI_IRQ发出中断信号，信号每中断一次取一个单字节数据放入接收缓冲区，字节累计长度加1，直到将主机发送的一帧数据取完，保存接收到的字节累计长度。此过程能够准确地将主机发送的不定长数据取完，并且能够读出该帧的字节长度。在步骤105中，基于CS片选信号和CS外部中断信号从接收缓冲区中取出收到的一帧完整的数据；一帧完整的数据包括具有字节累计长度的单字节数据。具体的，基于CS片选信号和CS外部中断信号从接收缓冲区中取出收到的一帧完整的数据，包括：当主机拉高CS片选信号时， CS片选信号上升沿触发从机的CS外部中断信号EXTI；在外部中断处理程序中，从接收缓冲区中按照字节累计长度取出收到的一帧完整的数据。其中，CS外部中断信号EXTI由CS外部中断处理程序控制。示例性的，CS片选信号上升沿触发从机的CS外部中断信号EXTI时，即为主机发送完一帧数据的时间点。根据这个特点从接收缓冲区中按照字节累计长度取出收到的一帧完整的数据之后，将本次的字节累计长度清零，准备下一帧数据的接收；下一帧的数据长度不固定。本申请的方法可应用于主机与从机之间按照行业通信规约或者私有规约进行的SPI通信，既可用于带有嵌入式操作系统的设备，也可用于不带操作系统的设备，根据不同的MCU资源配置，在SPI驱动代码中使用。需要说明的是，本发明实施例的一种台区智能融合终端SPI通信中不定长数据帧的接收方法在整个数据帧的长度不固定时，或者表示整个数据帧的长度的字段的位置和长度不固定时，均能实现SPI不定长协议帧的接收功能。可见本发明通过将CS片选信号复用为外部中断的触发管脚，并将触发管脚配置为在CS片选信号上升沿触发CS外部中断，能够应用于产品主板与从板间的SPI通信，在从板MCU处理器DMA资源有限，且通信帧协议中存在长度字段不固定的情况下，实现了SPI不定长协议帧的接收功能。本方法无须解析出数据帧格式中的长度字段，也无须开启DMA接收即可实现MCU接收并辨识对方发来的不定长数据帧。应理解，上述各步骤的序号的大小并不意味着执行顺序的先后，各过程的执行顺序应以其功能和内在逻辑确定，而不应对本申请实施例的实施过程构成任何限定。需要说明的是，上述装置之间的信息交互、执行过程等内容，由于与本申请方法实施例基于同一构思，其具体功能及带来的技术效果，具体可参见方法实施例部分，此处不再赘述。所属领域的技术人员可以清楚地了解到，为了描述的方便和简洁，仅以上述各功能单元、模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能单元、模块完成，即将所述装置的内部结构划分成不同的功能单元或模块，以完成以上描述的全部或者部分功能。实施例中的各功能单元、模块可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中，上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。另外，各功能单元、模块的具体名称也只是为了便于相互区分，并不用于限制本申请的保护范围。上述系统中单元、模块的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。本申请实施例还提供了一种终端设备，参见图3，该终端设备300可以包括：至少一个处理器310和存储器320，所述存储器320中存储有可在所述至少一个处理器310上运行的计算机程序321，所述处理器310执行所述计算机程序321时实现上述任意各个方法实施例中的步骤，例如图1所示实施例中的步骤101至步骤105。示例性的，计算机程序321可以被分割成一个或多个模块/单元，一个或者多个模块/单元被存储在存储器320中，并由处理器310执行，以完成本申请。所述一个或多个模块/单元可以是能够完成特定功能的一系列计算机程序段，该程序段用于描述计算机程序321在终端设备300中的执行过程。本领域技术人员可以理解，图3仅仅是终端设备的示例，并不构成对终端设备的限定，可以包括比图示更多或更少的部件，或者组合某些部件，或者不同的部件，例如输入输出设备、网络接入设备、总线等。处理器310可以是中央处理单元，还可以是其他通用处理器、数字信号处理器 、专用集成电路、现成可编程门阵列 或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等。存储器320可以是终端设备的内部存储单元，也可以是终端设备的外部存储设备，例如插接式硬盘，智能存储卡，安全数字卡，闪存卡等。所述存储器320用于存储所述计算机程序以及终端设备所需的其他程序和数据。所述存储器320还可以用于暂时地存储已经输出或者将要输出的数据。总线可以是工业标准体系结构总线、外部设备互连总线或扩展工业标准体系结构总线等。总线可以分为地址总线、数据总线、控制总线等。为便于表示，本申请附图中的总线并不限定仅有一根总线或一种类型的总线。本申请实施例提供的台区智能融合终端SPI通信中不定长数据帧的接收方法可以应用于计算机、平板电脑、笔记本电脑、上网本、个人数字助理等终端设备上，本申请实施例对终端设备的具体类型不作任何限制。本申请实施例还提供了一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序被处理器执行时实现可实现上述台区智能融合终端SPI通信中不定长数据帧的接收方法各个实施例中的步骤。本申请实施例提供了一种计算机程序产品，当计算机程序产品在移动终端上运行时，使得移动终端执行时实现可实现上述台区智能融合终端SPI通信中不定长数据帧的接收方法各个实施例中的步骤。所述集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请实现上述实施例方法中的全部或部分流程，可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一计算机可读存储介质中，该计算机程序在被处理器执行时，可实现上述各个方法实施例的步骤。其中，所述计算机程序包括计算机程序代码，所述计算机程序代码可以为源代码形式、对象代码形式、可执行文件或某些中间形式等。所述计算机可读介质至少可以包括：能够将计算机程序代码携带到拍照装置/终端设备的任何实体或装置、记录介质、计算机存储器、只读存储器、随机存取存储器、电载波信号、电信信号以及软件分发介质。例如U盘、移动硬盘、磁碟或者光盘等。在上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述或记载的部分，可以参见其它实施例的相关描述。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。在本申请所提供的实施例中，应该理解到，所揭露的装置/网络设备和方法，可以通过其它的方式实现。例如，以上所描述的装置/网络设备实施例仅仅是示意性的，例如，所述模块或单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通讯连接可以是通过一些接口，装置或单元的间接耦合或通讯连接，可以是电性，机械或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。以上所述实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围，均应包含在本申请的保护范围之内。
