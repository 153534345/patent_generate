标题title
离线消息发送方法、装置、电子设备及可读存储介质
摘要abst
本申请公开了离线消息发送方法、装置、电子设备及可读存储介质，应用于消息中间件，消息中间件和消息发送端通信连接，离线消息发送方法包括：接收消息接收端发送的请求消息，依据请求消息，建立消息接收端与消息发送端在目标主题下的消息信道；若检测到消息接收端处于离线状态，则通过消息信道获取消息发送端向消息接收端发送的目标消息；若检测到消息接收端由离线状态转为在线状态，则对目标消息进行过滤，得到过滤后的目标消息；通过判断过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至消息接收端。本申请解决了现有技术中消息发送端的离线消息发送后撤回的保密性低的技术问题。
权利要求书clms
1.一种离线消息发送方法，其特征在于，应用于消息中间件，所述消息中间件和消息发送端通信连接，所述离线消息发送方法包括：接收消息接收端发送的请求消息，依据所述请求消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道；若检测到所述消息接收端处于离线状态，则通过所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息；若检测到所述消息接收端由所述离线状态转为在线状态，则对所述目标消息进行过滤，得到过滤后的目标消息；通过判断所述过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至所述消息接收端。2.如权利要求1所述离线消息发送方法，其特征在于，所述过滤后的目标消息包括待发送消息和待撤回消息，所述对所述目标消息进行过滤，得到过滤后的目标消息的步骤包括：判断所述目标消息的第一待过滤属性和预设第一过滤规则的规则属性是否一致；若一致，则将所述过滤后的目标消息作为所述待撤回消息；若不一致，则将所述过滤后的目标消息作为所述待发送消息。3.如权利要求1所述离线消息发送方法，其特征在于，所述过滤后的目标消息包括待发送消息和待撤回消息，所述对所述目标消息进行过滤，得到过滤后的目标消息的步骤包括：获取预设过滤链中预设数量的第二过滤规则；依据各所述第二过滤规则的规则属性，检测所述目标消息的第二待过滤属性中是否存在目标过滤属性；若存在，则生成过滤终止命令，并将所述过滤后的目标消息作为所述待撤回消息；若不存在，则将所述过滤后的目标消息作为所述待发送消息。4.如权利要求1中所述离线消息发送方法，其特征在于，所述通过判断所述过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至所述消息接收端的步骤包括:判断所述过滤后的目标消息是否存在待发送消息；若存在，则将所述待发送消息发送至所述消息接收端；若不存在，则删除所述过滤后的目标消息。5.如权利要求4中所述离线消息发送方法，其特征在于，所述将所述待发送消息发送至所述消息接收端的步骤包括：获取所述消息发送端和所述消息接收端之间的消息级别类型；若所述消息级别类型为第一类型消息级别，则将所述过滤后的待发送消息连续发送至所述消息接收端；若所述消息级别类型为第二类型消息级别，则判断所述过滤后的待发送消息是否重复；若是，则将所述过滤后的待发送消息整合后发送至所述消息接收端；若否，则将所述过滤后的待发送消息发送至所述消息接收端。6.如权利要求1所述离线消息发送方法，其特征在于，所述若检测到所述消息接收端处于离线状态，则通过所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息的步骤包括：若检测到所述消息接收端处于离线状态，则检测所述消息信道中是否存在所述目标消息；若是，则获取所述目标消息，并将所述目标消息保存至待发送消息队列。7.如权利要求1中所述离线消息发送方法，其特征在于，所述接收消息接收端发送的请求消息，依据所述请求消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道的步骤包括：接收所述消息接收端发送的通信请求消息，依据所述通信请求消息，连接所述消息接收端；接收所述消息接收端发送的目标主题订阅消息，依据所述目标主题订阅消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道。8.一种离线消息发送装置，其特征在于，应用于消息中间件，所述消息中间件和消息发送端通信连接，所述离线消息发送装置包括：消息通信模块，用于接收消息接收端发送的请求消息，依据所述请求消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道；消息获取模块，用于若检测到所述消息接收端处于离线状态，则通过所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息；消息过滤模块，用于若检测到所述消息接收端由所述离线状态转为在线状态，则对所述目标消息进行过滤，得到过滤后的目标消息；消息处理模块，用于通过判断所述过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至所述消息接收端。9.一种电子设备，其特征在于，所述电子设备包括：至少一个处理器；以及，与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的指令，所述指令被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1至7中任一项所述的离线消息发送方法的步骤。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储有实现离线消息发送方法的程序，所述实现离线消息发送方法的程序被处理器执行以实现如权利要求1至7中任一项所述离线消息发送方法的步骤。
说明书desc
技术领域本申请涉及数据处理技术领域，尤其涉及一种离线消息发送方法、装置、电子设备及可读存储介质。背景技术随着科技的不断发展，基于互联网的消息传输方式俨然成为了时代的主流，其中，为了应对低带宽和不稳定网络环境等实际场景，拥有开放、简单以及规范等特点的MQTT将迎来更广泛的应用前景，目前，MQTT具备着一套稳定消息传输的机制，能够保证客户端与消息服务器之间的消息通信，并且当客户端处于离线状态时，服务器可以为客户端存储一定量的离线消息，以供客户端重新连接后能够及时接收相关消息，但是，倘若发送离线消息的操作人员由于操作失误等原因需要撤回或取消发送已经存储于消息服务器的离线消息，通常情况下需要发送一条撤回类型消息至消息接收端，进而从业务层面完成离线消息的撤回，但是，此时离线消息已经发送至消息接收端，导致离线消息并非实时撤回，也即后置处理，进而导致离线消息易泄露，所以，当前消息发送端的离线消息发送后撤回的保密性低。发明内容本申请的主要目的在于提供一种离线消息发送方法、装置、电子设备及可读存储介质，旨在解决现有技术中消息发送端的离线消息发送后撤回的保密性低的技术问题。为实现上述目的，本申请提供一种离线消息发送方法，应用于消息中间件，述消息中间件和消息发送端通信连接，所述离线消息发送方法包括：接收消息接收端发送的请求消息，依据所述请求消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道；若检测到所述消息接收端处于离线状态，则通过所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息；若检测到所述消息接收端由所述离线状态转为在线状态，则对所述目标消息进行过滤，得到过滤后的目标消息；通过判断所述过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至所述消息接收端。可选地，所述过滤后的目标消息包括待发送消息和待撤回消息，所述对所述目标消息进行过滤，得到过滤后的目标消息的步骤包括：判断所述目标消息的第一待过滤属性和预设第一过滤规则的规则属性是否一致；若一致，则将所述过滤后的目标消息作为所述待撤回消息；若不一致，则将所述过滤后的目标消息作为所述待发送消息。可选地，所述过滤后的目标消息包括待发送消息和待撤回消息，所述对所述目标消息进行过滤，得到过滤后的目标消息的步骤包括：获取预设过滤链中预设数量的第二过滤规则；依据各所述第二过滤规则的规则属性，检测所述目标消息的第二待过滤属性中是否存在目标过滤属性；若存在，则生成过滤终止命令，并将所述过滤后的目标消息作为所述待撤回消息；若不存在，则将所述过滤后的目标消息作为所述待发送消息。可选地，所述通过判断所述过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至所述消息接收端的步骤包括:判断所述过滤后的目标消息是否存在待发送消息；若存在，则将所述待发送消息发送至所述消息接收端；若不存在，则删除所述过滤后的目标消息。可选地，所述将所述待发送消息发送至所述消息接收端的步骤包括：获取所述消息发送端和所述消息接收端之间的消息级别类型；若所述消息级别类型为第一类型消息级别，则将所述过滤后的待发送消息连续发送至所述消息接收端；若所述消息级别类型为第二类型消息级别，则判断所述过滤后的待发送消息是否重复；若是，则将所述过滤后的待发送消息整合后发送至所述消息接收端；若否，则将所述过滤后的待发送消息发送至所述消息接收端。可选地，所述若检测到所述消息接收端处于离线状态，则通过所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息的步骤包括：若检测到所述消息接收端处于离线状态，则检测所述消息信道中是否存在所述目标消息；若是，则获取所述目标消息，并将所述目标消息保存至待发送消息队列。可选地，所述接收消息接收端发送的请求消息，依据所述请求消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道的步骤包括：接收所述消息接收端发送的通信请求消息，依据所述通信请求消息，连接所述消息接收端；接收所述消息接收端发送的目标主题订阅消息，依据所述目标主题订阅消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道。为实现上述目的，本申请还提供一种离线消息发送装置，应用于消息中间件，所述消息中间件和消息发送端通信连接，所述离线消息发送装置包括：消息通信模块，用于接收消息接收端发送的请求消息，依据所述请求消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道；消息获取模块，用于若检测到所述消息接收端处于离线状态，则通过所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息；消息过滤模块，用于若检测到所述消息接收端由所述离线状态转为在线状态，则对所述目标消息进行过滤，得到过滤后的目标消息；消息处理模块，用于通过判断所述过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至所述消息接收端。可选地，所述过滤后的目标消息包括待发送消息和待撤回消息，所述消息过滤模块还用于：判断所述目标消息的第一待过滤属性和预设第一过滤规则的规则属性是否一致；若一致，则将所述过滤后的目标消息作为所述待撤回消息；若不一致，则将所述过滤后的目标消息作为所述待发送消息。可选地，所述过滤后的目标消息包括待发送消息和待撤回消息，所述消息过滤模块还用于：获取预设过滤链中预设数量的第二过滤规则；依据各所述第二过滤规则的规则属性，检测所述目标消息的第二待过滤属性中是否存在目标过滤属性；若存在，则生成过滤终止命令，并将所述过滤后的目标消息作为所述待撤回消息；若不存在，则将所述过滤后的目标消息作为所述待发送消息。可选地，所述消息处理模块还用于：判断所述过滤后的目标消息是否存在待发送消息；若存在，则将所述待发送消息发送至所述消息接收端；若不存在，则删除所述过滤后的目标消息。可选地，所述消息处理模块还用于：获取所述消息发送端和所述消息接收端之间的消息级别类型；若所述消息级别类型为第一类型消息级别，则将所述过滤后的待发送消息连续发送至所述消息接收端；若所述消息级别类型为第二类型消息级别，则判断所述过滤后的待发送消息是否重复；若是，则将所述过滤后的待发送消息整合后发送至所述消息接收端；若否，则将所述过滤后的待发送消息发送至所述消息接收端。可选地，所述消息获取模块还用于：若检测到所述消息接收端处于离线状态，则检测所述消息信道中是否存在所述目标消息；若是，则获取所述目标消息，并将所述目标消息保存至待发送消息队列。可选地，所述消息通信模块还用于：接收所述消息接收端发送的通信请求消息，依据所述通信请求消息，连接所述消息接收端；接收所述消息接收端发送的目标主题订阅消息，依据所述目标主题订阅消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道。本申请还提供一种电子设备，所述电子设备包括：存储器、处理器以及存储在所述存储器上并可在所述处理器上运行的所述离线消息发送方法的程序，所述离线消息发送方法的程序被处理器执行时可实现如上述的离线消息发送方法的步骤。本申请还提供一种计算机可读存储介质，所述计算机可读存储介质上存储有实现离线消息发送方法的程序，所述离线消息发送方法的程序被处理器执行时实现如上述的离线消息发送方法的步骤。本申请还提供一种计算机程序产品，包括计算机程序，所述计算机程序被处理器执行时实现如上述的离线消息发送方法的步骤。本申请提供了一种离线消息发送方法、装置、电子设备及可读存储介质，应用于消息中间件，所述消息中间件和消息发送端通信连接，也即，接收消息接收端发送的请求消息，依据所述请求消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道，以供所述消息发送端与所述消息接收端可通过所述消息中间件的消息信道进行目标主题下的消息交互；进而若检测到所述消息接收端处于离线状态，则通过所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息，也即获取离线消息；进而若检测到所述消息接收端由所述离线状态转为在线状态，则对所述目标消息进行过滤，得到过滤后的目标消息；进而通过判断所述过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至所述消息接收端。由于操作人员在消息过滤器中预先设有的过滤规则，进而可对消息中间件中的离线消息进行过滤，实现了通过消息中间件控制离线消息是否发送至消息接收端的目的，进而若过滤后的消息中不存在待发送消息，则可将过滤后的消息均控制于消息中间件，从而使得离线消息在未到达消息接收端前已经被撤回，而非通过发送一条撤回类型消息至消息接收端，进而从业务层面完成离线的撤回，也即，克服了现有技术中由于采用后置处理方式而导致离线消息易泄露的技术缺陷，所以，提升了消息发送端的离线消息发送后撤回的保密性。附图说明此处的附图被并入说明书中并构成本说明书的一部分，示出了符合本申请的实施例，并与说明书一起用于解释本申请的原理。为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，对于本领域普通技术人员而言，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本申请离线消息发送方法第一实施例的流程示意图；图2为本申请一对多订阅模式下进行过滤的工作示意图；图3为本申请消息中间件处理过程的示意图；图4为本申请离线消息发送方法第二实施例的流程示意图；图5为本申请预设过滤链的示意图；图6为本申请实施例中离线消息发送方法涉及的硬件运行环境的设备结构示意图。本申请目的实现、功能特点及优点将结合实施例，参照附图做进一步说明。具体实施方式为使本发明的上述目的、特征和优点能够更加明显易懂，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述。显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动的前提下所获得的所有其它实施例，均属于本发明保护的范围。实施例一首先，应当理解的是，对于MQTT来说，MQTT消息中间件用于支撑消息发送者与消息接收者之间的消息通信，消息在三者之间的交互流程如下：在消息中间件与消息发送者和消息接收者均通信连接时，消息发送者发送消息至消息中间件，消息中间件进而将消息发送至消息接受者，在消息接收者消费该消息后，会反馈应答消息至消息中间件，最终消息中间件将该消息移除，其中，如果在消息交互的过程中消息接收者离线，消息中间件会清空该消息接收者与消息发送者之间的会话，并依靠着消息接收者唯一的客户端标识以及设置满足消息发送者的配置要求，仍可为该消息接收者保持一定量的离线消息，进而在其再次连接后完成消息的推送，但是，倘若在消息交互过程中，操作人员想要撤回存储于消息中间件的某条离线消息，只能发送相应的撤回类型消息，而此时该离线消息已经在消息接收者重新连接时被消息接收者接收，也即，该离线消息撤回的保密性不高，所以，目前亟需一种提高消息发送端的离线消息发送后撤回的保密性的消息发送方法。本申请实施例提供一种离线消息发送方法，在本申请离线消息发送方法的第一实施例中，应用于消息中间件，所述消息中间件和消息发送端通信连接，参照图1，所述离线消息发送方法包括：步骤S10，接收消息接收端发送的请求消息，依据所述请求消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道；在本实施例中，需要说明的是，所述消息发送端为消息的发布者，具体可以为一个或多个，所述消息接收端为消息的订阅者，具体可以为一个或多个，所述消息中间件用于实现消息的应答、存储和重传等功能，具体可以为ActiveMQ、RabbitMQ、Kafka以及RocketMQ中的任意一种，其中，消息中间件的存储功能用于维护Topic和消息队列之间的映射关系，消息队列为消息中间件中实际存储消息的逻辑区域，对于多对多的消息订阅模式来说，不同消息发送端发送的消息依据发送顺序依次存储于消息队列中，不同消息接收端若想消费消息队列中的相关消息，则需在接收消息之前订阅主题，在订阅主题之后，消息接收端可以接收该主题下的所有消息。另外地，需要说明的是，所述目标主题用于表征所述目标消息所属的消息主题类，所述消息主题的主题类型具体可以为“支付”、“银行卡”以及“名字”等等，所述请求消息用于为请求消息对应的消息接收端建立消息信道，所述消息信道用于表征消息接收端与消息发送端在某一主题下的消息交互通道，例如，假设消息发送端为A，消息接收端为B、C以及D，其中，B和C均向消息中间件发送了请求消息，则消息中间件不为D建立消息交互通道，并为B和C建立不同的消息交互通道。作为一种示例，步骤S10包括：接收至少一个消息接收端发送的请求消息，依据所述请求消息，建立各所述消息接收端与所述消息发送端在目标消息主题下的消息信道。其中，所述接收消息接收端发送的请求消息，依据所述请求消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道的步骤包括：步骤A10，接收所述消息接收端发送的通信请求消息，依据所述通信请求消息，连接所述消息接收端；步骤A20，接收所述消息接收端发送的目标主题订阅消息，依据所述目标主题订阅消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道。在本实施例中，需要说明的是，所述通信请求信息用于请求连接所述消息中间件，所述目标主题订阅消息用于订阅消息主题，以供后续接收该消息主题下由消息发送端发送的消息。作为一种示例，步骤A10至步骤A20包括：依据所述消息接收端发送的通信请求消息，连接所述消息接收端；接收所述消息接收端发送的目标主题订阅消息，依据所述目标主题订阅消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道，其中，目标主题订阅消息可以为一个或多个。步骤S20，若检测到所述消息接收端处于离线状态，则通过所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息；在本实施例中，需要说明的是，当消息接收端与消息中间件通信连接后，消息中间件可实时监听消息接收端的连接状态，当消息中间件监听到消息接收端处于离线状态时，若消息发送端仍往目标主题下发送消息，则发送的离线消息均由消息中间件保存，所以，所述目标消息为离线消息。作为一种示例，步骤S20包括：若监听到所述消息接收端处于离线状态，则通过各所述消息接收端对应的所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息。其中，所述若检测到所述消息接收端处于离线状态，则通过所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息的步骤包括：步骤B10，若检测到所述消息接收端处于离线状态，则检测所述消息信道中是否存在所述目标消息；步骤B20，若是，则获取所述目标消息，并将所述目标消息保存至待发送消息队列。作为一种示例，步骤B10至步骤B20包括：若检测到各所述消息接收端处于离线状态，则检测所述消息发送端是否向所述消息信道发送离线消息；若检测到所述消息发送端向所述消息信道发送离线消息，则获取所述离线消息，并将所述离线消息保存至所述目标主题下的待发送消息队列，其中，所述待发送消息队列为消息中间件所保存的每个会话中的保存离线消息的队列；若未检测到所述消息发送端向所述消息信道发送离线消息，则继续监听各所述消息接收端的连接状态。步骤S30，若检测到所述消息接收端由所述离线状态转为在线状态，则对所述目标消息进行过滤，得到过滤后的目标消息；在本实施例中，需要说明的是，所述过滤方式可以为控制离线消息是否发送至消息接收端的方式，所述过滤后的目标消息包括需发送至消息接收端的离线消息或不需发送至消息接收端的离线消息，在一种可实施的方式中，参照图2，图2为表示一对多订阅模式下进行过滤的工作示意图，其中，离线消息过滤器用于控制离线消息是否发送至消息接收端，当消息中间件将消息发送者发送的消息投递至消息接收者后，消息接收者会发送应答消息至消息中间件，以供消息中间件从待发送消息队列中删除应答消息对应的消费消息，若消息中间件未接收到消息接收者发送的应答消息，则在其重新上线后，消息中间件发送进行过滤后的离线消息。作为一种示例，步骤S30包括：当检测到所述消息接收端重新上线时，对所述离线消息进行过滤，得到需发送至消息接收端的离线消息、不需发送至消息接收端的离线消息或需要发送至消息接收端的离线消息和不需发送至消息接收端的离线消息的消息集，其中，所述消息集为所述离线消息为多个时生成，当所述离线消息为一个时，所述离线消息不为需发送至消息接收端的离线消息，则为不需发送至消息接收端的离线消息。其中，所述过滤后的目标消息包括待发送消息和待撤回消息，所述对所述目标消息进行过滤，得到过滤后的目标消息的步骤包括：步骤C10，判断所述目标消息的第一待过滤属性和预设第一过滤规则的规则属性是否一致；步骤C20，若一致，则将所述过滤后的目标消息作为所述待撤回消息；步骤C30，若不一致，则将所述过滤后的目标消息作为所述待发送消息。在本实施例中，需要说明的是，所述预设第一过滤规则为单一的过滤规则，所述第一过滤规则可由用户预先设置，可以为具体的消息主题或消息关键字，在一种可实施的方式中，所述预设第一过滤规则可以设置于消息过滤器中，例如，假设操作人员想要撤回有关“银行卡”相关的所有内容，则可将“银行卡”作为过滤规则，当消息过滤器检测到待发送消息队列中存在离线消息时，则将其作为待撤回消息，假设操作人员仅想撤回尾号为“0004”的离线消息，当消息过滤器检测到待发送消息队列中尾号为“0004”的离线消息时，则将其作为待撤回消息。另外地，需要说明的是，所述待撤回消息用于表征操作人员需要撤回或取消发送的保密消息，所述待发送消息用于表征操作人员需要正常发送至消息接收端的非保密消息，在一种可实施的方式中，参照图3，图3为表示消息中间件处理过程的示意图，其中，过滤规则1和过滤规则2均为第一过滤规则，当消息接收端，所述第一待过滤属性用于表征离线消息的消息体，所述第一过滤规则的规则属性用于表征所述第一过滤规则的具体内容，例如，假设第一过滤规则的规则属性为“42004”，所述第一待过滤属性包括“42004”、“42003”以及“查收”，则所述消息过滤器仅将“42004”作为待撤回消息。作为一种示例，步骤C10至步骤C30包括：判断所述离线消息的消息体和所述第一过滤规则的具体内容是否一致；若离线消息的消息体和所述第一过滤规则的具体内容一致，则将所述过滤后的离线消息作为需要撤回或取消发送的保密消息；若离线消息的消息体和第一过滤规则的具体内容不一致，则将所述过滤后的离线消息作为需要正常发送至所述消息接收端的非保密消息。步骤S40，通过判断所述过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至所述消息接收端。作为一种示例，步骤S40包括：通过判断所述过滤后的离线消息中是否存在待发送消息，确定是否将过滤后的离线消息发送至所述消息接收端，其中，所述待发送消息为需发送至消息接收端的离线消息。其中，所述通过判断所述过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至所述消息接收端的步骤包括：步骤D10，判断所述过滤后的目标消息是否存在待发送消息；步骤D20，若存在，则将所述待发送消息发送至所述消息接收端；步骤D30，若不存在，则删除所述过滤后的目标消息。作为一种示例，步骤D10至步骤D30包括：判断所述过滤后的离线消息是否存在待发送消息；若所述过滤后的离线消息存在待发送消息，则将所述待发送消息发送至所述消息接收端；若所述过滤后的离线消息不存在待发送消息，则将所述过滤后离线消息作为不需发送至所述消息接收端的离线消息，并直接删除。其中，所述将所述待发送消息发送至所述消息接收端的步骤包括：步骤E10，获取所述消息发送端和所述消息接收端之间的消息级别类型；步骤E20，若所述消息级别类型为第一类型消息级别，则将所述过滤后的待发送消息连续发送至所述消息接收端；步骤E30，若所述消息级别类型为第二类型消息级别，则判断所述过滤后的待发送消息是否重复；步骤E40，若是，则将所述过滤后的待发送消息整合后发送至所述消息接收端；步骤E50，若否，则将所述过滤后的待发送消息发送至所述消息接收端。在本实施例中，需要说明的是，MQTT构建的机制下的，共提供了三种不同层次QoS，也即，三种不同类型的消息级别，分别为QoS0“至多一次”、QoS1“至少一次”以及QoS2“确保只有一次”，其中，至多一次”具体为当Publisher通过Broker发送一条消息至Subscriber时，消息中间件不做任何处理，“至少一次”具体为当Publisher通过Broker发送一条消息至Subscriber时，消息中间件会将该消息复制多条发送至消息订阅者，“确保一次”具体为当Publisher通过Broker发送多条重复消息至Subscriber时，消息中间件会确保发送一条消息至消息订阅者。另外地，需要说明的是，所述消息级别类型包括“至少一次”消息级别和“确保一次”消息级别，所述第一类型消息级别为“至少一次”消息级别，所述第二类型消息级别为“确保一次”消息级别。作为一种示例，步骤E10至步骤E50包括：从所述离线消息的固定头中获取所述消息发送端和所述消息接收端之间的消息级别类型；若所述消息级别类型为“至少一次”消息级别，则将所述过滤后的待发送消息连续发送至所述消息接收端；若所述消息级别类型为“确保一次”消息级别，则查询所述待发送消息队列中所述离线消息的数量；若所述离线消息的数量为多条，则将多条相同的所述离线消息中的一条发送至所述消息接收端；若所述离线消息的数量为一条，则将所述离线消息直接发送至所述消息接收端。本申请实施例提供了一种离线消息发送方法，应用于消息中间件，所述消息中间件和消息发送端通信连接，也即，接收消息接收端发送的请求消息，依据所述请求消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道，以供所述消息发送端与所述消息接收端可通过所述消息中间件的消息信道进行目标主题下的消息交互；进而若检测到所述消息接收端处于离线状态，则通过所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息，也即获取离线消息；进而若检测到所述消息接收端由所述离线状态转为在线状态，则对所述目标消息进行过滤，得到过滤后的目标消息；进而通过判断所述过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至所述消息接收端。由于操作人员在消息过滤器中预先设有的过滤规则，进而可对消息中间件中的离线消息进行过滤，实现了通过消息中间件控制离线消息是否发送至消息接收端的目的，进而若过滤后的消息中不存在待发送消息，则可将过滤后的消息均控制于消息中间件，从而使得离线消息在未到达消息接收端前已经被撤回，而非通过发送一条撤回类型消息至消息接收端，进而从业务层面完成离线的撤回，也即，克服了现有技术中由于采用后置处理方式而导致离线消息易泄露的技术缺陷，所以，提升了离线消息撤回的保密性。实施例二进一步地，参照图4，在本申请另一实施例中，与上述实施例一相同或相似的内容，可以参考上文介绍，后续不再赘述。在此基础上，所述预设过滤规则包括过滤链，所述过滤后的目标消息包括待发送消息和待撤回消息，所述对所述目标消息进行过滤，得到过滤后的目标消息的步骤包括：步骤F10，获取预设过滤链中预设数量的第二过滤规则；步骤F20，依据各所述第二过滤规则的规则属性，检测所述目标消息的第二待过滤属性中是否存在目标过滤属性；步骤F30，若存在，则生成过滤终止命令，并将所述过滤后的目标消息作为所述待撤回消息；步骤F40，若不存在，则将所述过滤后的目标消息作为所述待发送消息。在本实施例中，需要说明的是，所述预设过滤链包括多条第二过滤规则，所述第二过滤规则为过滤链中单一的过滤规则，具体可以为第一过滤规则或者其它用户设定的过滤规则，所述目标过滤规则用于表征操作人员想要撤回的离线消息的具体内容。另外地，需要说明的是，所述预设过滤链可设置于消息过滤器中，当消息过滤器中包括预设过滤链时，过滤链中的多条第二过滤规则可同时生效，与此同时，消息过滤器会依据不同第二过滤规则在过滤链上的序号依次执行过滤，并且过滤链具备传递性，例如，假设过滤链包括第二过滤规则a、b和c，且a、b和c依序排列于消息过滤器中，当目标消息进入预设消息过滤器的过滤链时，先由第二过滤规则a进行过滤，得到第一次过滤后的目标消息，进而有第二过滤规则b将第一次过滤后的目标消息进行过滤，得到第二次过滤后的目标消息，如此往复，得到最终过滤后的目标消息。在一种可实施的方式中，参照图5，图5为表示预设过滤链的示意图，其中，离线消息在进入预设过滤链的示意图后，可选择依次执行第二过滤规则，也可在提前终止，也即，在经过预设过滤链的第二过滤规则后，终止预设过滤链的执行，与此同时也，可在不修改预设过滤链处理结果的情况下，直接将消息透传至下一个过滤规则。作为一种示例，步骤F10至步骤F40包括：获取预设过滤链中预设数量的第二过滤规则；将所述离线消息的消息体和各所述第二过滤规则的具体内容进行比对，检测各所述第二过滤规则的具体内容是否存在离线消息的消息体；若各所述第二过滤规则的具体内容存在离线消息的消息体，则生成过滤终止命令，并将所述过滤后的目标消息作为所述待撤回消息；若各所述第二过滤规则的具体内容不存在离线消息的消息体，则将所述过滤后的目标消息作为所述待发送消息。本申请实施例提供了一种离线消息过滤方法，也即，获取预设过滤链中预设数量的第二过滤规则；依据各所述第二过滤规则的规则属性，检测所述目标消息的第二待过滤属性中是否存在目标过滤属性；若存在，则生成过滤终止命令，并将所述过滤后的目标消息作为所述待撤回消息；若不存在，则将所述过滤后的目标消息作为所述待发送消息。相比于只通过单一的过滤规则对离线消息进行过滤的方式，本方法可通过管理众多过滤规则的过滤链，可实现全面地对操作人员发送的离线消息进行过滤的目的，进而当操作人员需要对发送的离线消息的不同消息体进行撤回时，可通过预设过滤链一次性撤回，所以，提升了离线消息过滤的灵活性。实施例三本申请实施例还提供一种离线消息发送装置，应用于消息中间件，所述消息中间件和消息发送端通信连接，所述离线消息发送装置包括：消息通信模块，用于接收消息接收端发送的请求消息，依据所述请求消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道；消息获取模块，用于若检测到所述消息接收端处于离线状态，则通过所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息；消息过滤模块，用于若检测到所述消息接收端由所述离线状态转为在线状态，则对所述目标消息进行过滤，得到过滤后的目标消息；消息处理模块，用于通过判断所述过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至所述消息接收端。可选地，所述过滤后的目标消息包括待发送消息和待撤回消息，所述消息过滤模块还用于：判断所述目标消息的第一待过滤属性和预设第一过滤规则的规则属性是否一致；若一致，则将所述过滤后的目标消息作为所述待撤回消息；若不一致，则将所述过滤后的目标消息作为所述待发送消息。可选地，所述预设过滤规则包括过滤链，所述过滤后的目标消息包括待发送消息和待撤回消息，所述消息过滤模块还用于：获取预设过滤链中预设数量的第二过滤规则；依据各所述第二过滤规则的规则属性，检测所述目标消息的第二待过滤属性中是否存在目标过滤属性；若存在，则生成过滤终止命令，并将所述过滤后的目标消息作为所述待撤回消息；若不存在，则将所述过滤后的目标消息作为所述待发送消息。可选地，所述消息处理模块还用于：判断所述过滤后的目标消息是否存在待发送消息；若存在，则将所述待发送消息发送至所述消息接收端；若不存在，则删除所述过滤后的目标消息。可选地，所述消息处理模块还用于：获取所述消息发送端和所述消息接收端之间的消息级别类型；若所述消息级别类型为第一类型消息级别，则将所述过滤后的待发送消息连续发送至所述消息接收端；若所述消息级别类型为第二类型消息级别，则判断所述过滤后的待发送消息是否重复；若是，则将所述过滤后的待发送消息整合后发送至所述消息接收端；若否，则将所述过滤后的待发送消息发送至所述消息接收端。可选地，所述消息获取模块还用于：若检测到所述消息接收端处于离线状态，则检测所述消息信道中是否存在所述目标消息；若是，则获取所述目标消息，并将所述目标消息保存至待发送消息队列。可选地，所述消息通信模块还用于：接收所述消息接收端发送的通信请求消息，依据所述通信请求消息，连接所述消息接收端；接收所述消息接收端发送的目标主题订阅消息，依据所述目标主题订阅消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道。本发明提供的离线消息发送装置，采用上述实施例中的离线消息发送方法，解决了消息发送端的离线消息发送后撤回的保密性低的技术问题。与现有技术相比，本发明实施例提供的离线消息发送装置的有益效果与上述实施例提供的离线消息发送方法的有益效果相同，且该离线消息发送装置中的其他技术特征与上述实施例方法公开的特征相同，在此不做赘述。实施例四本发明实施例提供一种电子设备，电子设备包括：至少一个处理器；以及，与至少一个处理器通信连接的存储器；其中，存储器存储有可被至少一个处理器执行的指令，指令被至少一个处理器执行，以使至少一个处理器能够执行上述实施例一中的离线消息发送方法。下面参考图6，其示出了适于用来实现本公开实施例的电子设备的结构示意图。本公开实施例中的电子设备可以包括但不限于诸如移动电话、笔记本电脑、数字广播接收器、PDA、PAD、PMP、车载终端等等的移动终端以及诸如数字TV、台式计算机等等的固定终端。图6示出的电子设备仅仅是一个示例，不应对本公开实施例的功能和使用范围带来任何限制。如图6所示，电子设备可以包括处理装置，其可以根据存储在只读存储器中的程序或者从存储装置加载到随机访问存储器中的程序而执行各种适当的动作和处理。在RAM中，还存储有电子设备操作所需的各种程序和数据。处理装置、ROM以及RAM通过总线彼此相连。输入/输出接口也连接至总线。通常，以下系统可以连接至I/O接口：包括例如触摸屏、触摸板、键盘、鼠标、图像传感器、麦克风、加速度计、陀螺仪等的输入装置；包括例如液晶显示器、扬声器、振动器等的输出装置；包括例如磁带、硬盘等的存储装置；以及通信装置。通信装置可以允许电子设备与其他设备进行无线或有线通信以交换数据。虽然图中示出了具有各种系统的电子设备，但是应理解的是，并不要求实施或具备所有示出的系统。可以替代地实施或具备更多或更少的系统。特别地，根据本公开的实施例，上文参考流程图描述的过程可以被实现为计算机软件程序。例如，本公开的实施例包括一种计算机程序产品，其包括承载在计算机可读介质上的计算机程序，该计算机程序包含用于执行流程图所示的方法的程序代码。在这样的实施例中，该计算机程序可以通过通信装置从网络上被下载和安装，或者从存储装置被安装，或者从ROM被安装。在该计算机程序被处理装置执行时，执行本公开实施例的方法中限定的上述功能。本发明提供的电子设备，采用上述实施例中的离线消息发送方法，解决了消息发送端的离线消息发送后撤回的保密性低的技术问题。与现有技术相比，本发明实施例提供的电子设备的有益效果与上述实施例提供的离线消息发送方法的有益效果相同，且该电子设备中的其他技术特征与上述实施例方法公开的特征相同，在此不做赘述。应当理解，本公开的各部分可以用硬件、软件、固件或它们的组合来实现。在上述实施方式的描述中，具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。以上所述，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以所述权利要求的保护范围为准。实施例五本实施例提供一种计算机可读存储介质，具有存储在其上的计算机可读程序指令，计算机可读程序指令用于执行上述实施例一中的离线消息发送方法。本发明实施例提供的计算机可读存储介质例如可以是U盘，但不限于电、磁、光、电磁、红外线、或半导体的系统、系统或器件，或者任意以上的组合。计算机可读存储介质的更具体的例子可以包括但不限于：具有一个或多个导线的电连接、便携式计算机磁盘、硬盘、随机访问存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑磁盘只读存储器、光存储器件、磁存储器件、或者上述的任意合适的组合。在本实施例中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、系统或者器件使用或者与其结合使用。计算机可读存储介质上包含的程序代码可以用任何适当的介质传输，包括但不限于：电线、光缆、RF等等，或者上述的任意合适的组合。上述计算机可读存储介质可以是电子设备中所包含的；也可以是单独存在，而未装配入电子设备中。上述计算机可读存储介质承载有一个或者多个程序，当上述一个或者多个程序被电子设备执行时，使得电子设备：接收消息接收端发送的请求消息，依据所述请求消息，建立所述消息接收端与所述消息发送端在目标主题下的消息信道；若检测到所述消息接收端处于离线状态，则通过所述消息信道获取所述消息发送端向所述消息接收端发送的目标消息；若检测到所述消息接收端由所述离线状态转为在线状态，则对所述目标消息进行过滤，得到过滤后的目标消息；通过判断所述过滤后的目标消息是否存在待发送消息，确定是否将过滤后的目标消息发送至所述消息接收端。可以以一种或多种程序设计语言或其组合来编写用于执行本公开的操作的计算机程序代码，上述程序设计语言包括面向对象的程序设计语言—诸如Java、Smalltalk、C++，还包括常规的过程式程序设计语言—诸如“C”语言或类似的程序设计语言。程序代码可以完全地在用户计算机上执行、部分地在用户计算机上执行、作为一个独立的软件包执行、部分在用户计算机上部分在远程计算机上执行、或者完全在远程计算机或服务器上执行。在涉及远程计算机的情形中，远程计算机可以通过任意种类的网络——包括局域网或广域网—连接到用户计算机，或者，可以连接到外部计算机。附图中的流程图和框图，图示了按照本发明各种实施例的系统、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段、或代码的一部分，该模块、程序段、或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个接连地表示的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行规定的功能或操作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。描述于本公开实施例中所涉及到的模块可以通过软件的方式实现，也可以通过硬件的方式来实现。其中，模块的名称在某种情况下并不构成对该单元本身的限定。本发明提供的计算机可读存储介质，存储有用于执行上述离线消息发送方法的计算机可读程序指令，解决了消息发送端的离线消息发送后撤回的保密性低的技术问题。与现有技术相比，本发明实施例提供的计算机可读存储介质的有益效果与上述实施例提供的离线消息发送方法的有益效果相同，在此不做赘述。实施例六本申请还提供一种计算机程序产品，包括计算机程序，所述计算机程序被处理器执行时实现如上述的离线消息发送方法的步骤。本申请提供的计算机程序产品解决了消息发送端的离线消息发送后撤回的保密性低的技术问题。与现有技术相比，本发明实施例提供的计算机程序产品的有益效果与上述实施例提供的离线消息发送方法的有益效果相同，在此不做赘述。以上仅为本申请的优选实施例，并非因此限制本申请的专利范围，凡是利用本申请说明书及附图内容所作的等效结构或等效流程变换，或直接或间接运用在其他相关的技术领域，均同理包括在本申请的专利处理范围内。
