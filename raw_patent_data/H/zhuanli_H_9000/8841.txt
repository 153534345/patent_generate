标题title
一种功率控制方法、装置、电子设备及存储介质
摘要abst
本发明公开了一种功率控制方法、装置、电子设备及存储介质，方法包括：获取目标调度功率；获取至少一个新能源发电设备的出力功率预测值；将至少一个新能源发电设备的出力功率预测值与目标调度功率进行比较，以确定各个新能源发电设备的第一调度功率；基于各个新能源发电设备的功率限制对第一调度功率进行调整，以确定各个新能源发电设备的第二调度功率；基于各个新能源发电设备的实际工作状态对第二调度功率进行调整，以确定各个新能源发电设备的目标调度子功率。本方案提升了新能源发电设备功率分配的准确度。
权利要求书clms
1.一种功率控制方法，其特征在于，包括：获取目标调度功率；获取至少一个新能源发电设备的出力功率预测值；将所述至少一个新能源发电设备的出力功率预测值与目标调度功率进行比较，以确定各个所述新能源发电设备的第一调度功率；基于各个所述新能源发电设备的功率限制对所述第一调度功率进行调整，以确定各个所述新能源发电设备的第二调度功率；基于各个所述新能源发电设备的实际工作状态对所述第二调度功率进行调整，以确定各个所述新能源发电设备的目标调度子功率。2.根据权利要求1所述的方法，其特征在于，所述将所述至少一个新能源发电设备的出力功率预测值与目标调度功率进行比较，以确定各个所述新能源发电设备的第一调度功率，包括：比较各个所述新能源发电设备的出力功率预测值，确定出力功率预测值最大的目标新能源发电设备；将所述目标新能源发电设备的出力功率预测值与所述目标调度功率进行比较，并根据比较结果确定各个所述新能源发电设备的第一调度功率。3.根据权利要求2所述的方法，其特征在于，所述将所述目标新能源发电设备的出力功率预测值与所述目标调度功率进行比较，并根据比较结果确定各个新能源发电设备的第一调度功率，包括：当所述目标新能源发电设备的出力功率预测值大于所述目标调度功率，确定所述目标新能源发电设备为提供所述目标调度功率的新能源发电设备并基于所述目标调度功率确定所述目标新能源发电设备的第一调度功率；当所述目标新能源发电设备的出力功率预测值小于或等于所述目标调度功率，将各个所述新能源发电设备的出力功率预测值之和与所述目标调度功率进行比较；当各个所述新能源发电设备的出力功率预测值之和大于或等于所述目标调度功率，基于所述目标调度功率确定所述各个新能源发电设备的第一调度功率。4.根据权利要求3所述的方法，其特征在于，所述将所述各个新能源发电设备的出力功率预测值之和与所述目标调度功率进行比较，还包括：当所述各个新能源发电设备的出力功率预测值之和小于所述目标调度功率，基于所述目标调度功率确定所述各个新能源发电设备以及储能设备的第一调度功率。5.根据权利要求1所述的方法，其特征在于，所述基于各个所述新能源发电设备的功率限制对所述第一调度功率进行调整，以确定各个所述新能源发电设备的第二调度功率，包括：以所述第二调度功率与所述第一调度功率的差值最小为优化目标，基于各个所述新能源发电设备的功率限制对所述第二调度功率进行优化，确定第二调度功率的参考值；将所述至少一个新能源发电设备的第二调度功率的参考值与所述目标调度功率进行比较，以确定各个所述新能源发电设备更新后的第一调度功率；以所述第二调度功率与所述更新后的第一调度功率的差值最小为优化目标，基于各个所述新能源发电设备的功率限制对所述第二调度功率进行优化。6.根据权利要求5所述的方法，其特征在于，当所述新能源设备包括第一新能源发电设备、第二新能源发电设备以及储能设备，所述基于各个所述新能源发电设备的功率限制对所述第二调度功率进行优化，包括：基于所述第一新能源发电设备和所述第二新能源发电设备的出力限制约束条件、出力爬坡限制约束条件以及所述储能设备的充放电约束条件对所述第二调度功率进行优化。7.根据权利要求1所述的方法，其特征在于，当所述新能源设备包括第一新能源发电设备、第二新能源发电设备和储能设备，所述基于各个所述新能源发电设备的实际工作状态对所述第二调度功率进行调整，以确定各个所述新能源发电设备的目标调度子功率，包括：以所述各个新能源发电设备的第二调度功率与目标调度子功率的差值最小为优化目标；基于所述第一新能源发电设备和第二新能源发电设备的额定功率以及最小出力功率对所述优化目标进行优化，以确定所述第一新能源发电设备和第二新能源发电设备的目标调度子功率；基于所述储能设备的充放电功率的上下限对所述优化目标进行优化，以确定所述储能设备的目标调度子功率。8.一种功率控制装置，其特征在于，包括：调度功率获取单元，用于获取目标调度功率；出力功率确定单元，用于获取至少一个新能源发电设备的出力功率预测值；第一调度功率确定单元，用于将所述至少一个新能源发电设备的出力功率预测值与目标调度功率进行比较，以确定各个所述新能源发电设备的第一调度功率；第二调度功率确定单元，用于基于各个所述新能源发电设备的功率限制对所述第一调度功率进行调整，以确定各个所述新能源发电设备的第二调度功率；目标调度确定单元，用于基于各个所述新能源发电设备的实际工作状态对所述第二调度功率进行调整，以确定各个所述新能源发电设备的目标调度子功率。9.一种电子设备，其特征在于，包括：存储器和处理器，所述存储器和所述处理器之间互相通信连接，所述存储器中存储有计算机指令，所述处理器通过执行所述计算机指令，从而执行权利要求1-7中任一项所述的功率控制方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机指令，所述计算机指令用于使计算机执行权利要求1-7中任一项所述的功率控制方法。
说明书desc
技术领域本发明涉及电力系统运行与控制技术领域，具体涉及一种功率控制方法、装置、电子设备及存储介质。背景技术构建以新能源为主体的新型电力系统，是实现“双碳”目标的重要举措，但是新能源发电占比提升也给电力系统有功功率控制带来了严峻的挑战。与传统火力发电机组相比，新能源发电具有随机性、波动性和间歇性特点，使其输出有功功率无法根据调度指令进行较为准确控制。这就需要依靠储能设备快速、准确的充放电控制来补偿有功功率的差额。以风光储一体化场站为例，风光储一体化场站的有功功率控制涉及风电、光伏和储能三者的协调控制，对控制策略的要求较高。现有技术中，根据风电、光伏和储能的配合关系可以将风光储一体化场站的有功功率控制大多以调度指令值与风光储一体化场站实发的有功功率差值最小为控制目标，即在风电和光伏有功功率控制无法满足调度指令时，利用储能补偿有功功率差额，而在风电和光伏输出有功功率大于调度指令值时，储能充电以吸纳多余的能量。但是，由于风电和光伏的装机容量较大，在动态风光场景下，由于风光功率预测误差产生的有功功率控制偏差对指令跟踪控制的影响大幅增加，会导致风光储一体化场站的实际调度功率与指令值之差较大，从而增加风光功率调节幅度增加和储能过充过放的可能性。发明内容有鉴于此，本发明实施例提供了一种功率控制方法、装置、电子设备及存储介质，以提升新能源发电设备功率分配的准确度。根据第一方面，本发明实施例提供了一种功率控制方法，包括：获取目标调度功率；获取至少一个新能源发电设备的出力功率预测值；将所述至少一个新能源发电设备的出力功率预测值与目标调度功率进行比较，以确定各个所述新能源发电设备的第一调度功率；基于各个所述新能源发电设备的功率限制对所述第一调度功率进行调整，以确定各个所述新能源发电设备的第二调度功率；基于各个所述新能源发电设备的实际工作状态对所述第二调度功率进行调整，以确定各个所述新能源发电设备的目标调度子功率。本实施提供的功率控制方法，在确定目标调度功率后，结合各新能源发电设备的出力功率预测值，通过比较出力功率预测值与目标调度功率等逻辑判断之后确定第一调度功率，再根据新能源发电设备的功率限制对第一调度功率进行调整以确定第二调度功率，考虑新能源发电设备的实际工作状态调整第二调度功率，直至确定各个新能源发电设备的目标调度功率，可根据目标调度子功率进行供电，完成对目标调度功率的精准分配。结合第一方面，在一种实施方式中，将所述至少一个新能源发电设备的出力功率预测值与目标调度功率进行比较，以确定各个所述新能源发电设备的第一调度功率，包括：比较各个所述新能源发电设备的出力功率预测值，确定出力功率预测值最大的目标新能源发电设备；将所述目标新能源发电设备的出力功率预测值与所述目标调度功率进行比较，并根据比较结果确定各个所述新能源发电设备的第一调度功率。结合第一方面，在一种实施方式中，将所述目标新能源发电设备的出力功率预测值与所述目标调度功率进行比较，并根据比较结果确定各个新能源发电设备的第一调度功率，包括：当所述目标新能源发电设备的出力功率预测值大于所述目标调度功率，确定所述目标新能源发电设备为提供所述目标调度功率的新能源发电设备并基于所述目标调度功率确定所述目标新能源发电设备的第一调度功率；当所述目标新能源发电设备的出力功率预测值小于或等于所述目标调度功率，将各个所述新能源发电设备的出力功率预测值之和与所述目标调度功率进行比较；当各个所述新能源发电设备的出力功率预测值之和大于或等于所述目标调度功率，基于所述目标调度功率确定所述各个新能源发电设备的第一调度功率。结合第一方面，在一种实施方式中，将所述各个新能源发电设备的出力功率预测值之和与所述目标调度功率进行比较，还包括：当所述各个新能源发电设备的出力功率预测值之和小于所述目标调度功率，基于所述目标调度功率确定所述各个新能源发电设备以及储能设备的第一调度功率。结合第一方面，在一种实施方式中，基于各个所述新能源发电设备的功率限制对所述第一调度功率进行调整，以确定各个所述新能源发电设备的第二调度功率，包括：以所述第二调度功率与所述第一调度功率的差值最小为优化目标，基于各个所述新能源发电设备的功率限制对所述第二调度功率进行优化，确定第二调度功率的参考值；将所述至少一个新能源发电设备的第二调度功率的参考值与所述目标调度功率进行比较，以确定各个所述新能源发电设备更新后的第一调度功率；以所述第二调度功率与所述更新后的第一调度功率的差值最小为优化目标，基于各个所述新能源发电设备的功率限制对所述第二调度功率进行优化。结合第一方面，在一种实施方式中，当所述新能源设备包括第一新能源发电设备、第二新能源发电设备以及储能设备，所述基于各个所述新能源发电设备的功率限制对所述第二调度功率进行优化，包括：基于所述第一新能源发电设备和所述第二新能源发电设备的出力限制约束条件、出力爬坡限制约束条件以及所述储能设备的充放电约束条件对所述第二调度功率进行优化。结合第一方面，在一种实施方式中，当所述新能源设备包括第一新能源发电设备、第二新能源发电设备和储能设备，所述基于各个所述新能源发电设备的实际工作状态对所述第二调度功率进行调整，以确定各个所述新能源发电设备的目标调度子功率，包括：以所述各个新能源发电设备的第二调度功率与目标调度子功率的差值最小为优化目标；基于所述第一新能源发电设备和第二新能源发电设备的额定功率以及最小出力功率对所述优化目标进行优化，以确定所述第一新能源发电设备和第二新能源发电设备的目标调度子功率；基于所述储能设备的充放电功率的上下限对所述优化目标进行优化，以确定所述储能设备的目标调度子功率。根据第二方面，本发明实施例提供了一种功率控制装置，包括：调度功率获取单元，用于获取目标调度功率；出力功率确定单元，用于获取至少一个新能源发电设备的出力功率预测值；第一调度功率确定单元，用于将所述至少一个新能源发电设备的出力功率预测值与目标调度功率进行比较，以确定各个所述新能源发电设备的第一调度功率；第二调度功率确定单元，用于基于各个所述新能源发电设备的功率限制对所述第一调度功率进行调整，以确定各个所述新能源发电设备的第二调度功率；目标调度确定单元，用于基于各个所述新能源发电设备的实际工作状态对所述第二调度功率进行调整，以确定各个所述新能源发电设备的目标调度子功率。根据第三方面，本发明实施例提供了一种电子设备，包括：存储器和处理器，所述存储器和所述处理器之间互相通信连接，所述存储器中存储有计算机指令，所述处理器通过执行所述计算机指令，从而执行第一方面或者第一方面的任意一种实施方式中所述的功率控制方法。根据第四方面，本发明实施例提供了一种计算机可读存储介质，所述计算机可读存储介质存储计算机指令，所述计算机指令用于使所述计算机执行第一方面或者第一方面的任意一种实施方式中所述的功率控制方法。附图说明为了更清楚地说明本发明具体实施方式或现有技术中的技术方案，下面将对具体实施方式或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施方式，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是根据本发明实施例的功率控制方法的流程图；图2是根据本发明实施例的确定第一调度功率的方法的流程图；图3是根据本发明实施例的确定第一调度功率的方法的流程图；图4是根据本发明实施例的确定第二调度功率的方法的流程图；图5是根据本发明实施例的确定第一调度功率的方法的示意图；图6是根据本发明实施例的功率控制装置的示意框图；图7是本发明实施例提供的电子设备的硬件结构示意图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。以新能源为主体的新型电力系统是实现“双碳”目标的重要举措，与传统火力发电机组相比，新能源发电具有随机性、波动性和间歇性特点，使其输出有功功率无法根据调度指令进行较为准确控制，因此需要对多方新能源供电设备依据调度要求进行更精准的控制，从而提升供电效率。可以建立基于新能源发电设备的指令跟踪控制模型，该模型可以包括有功功率控制层、长时间尺度功率控制层以及短时间尺度功率控制层，将有功功率控制层的输出结果作为长时间尺度功率控制层的输入，将长时间尺度控制层的输出结果反向输入至有功功率控制层再次优化，直至长时间尺度功率控制层的输出结果满足预设条件，再将长时间尺度功率控制层的优化结果作为短时间尺度功率控制层的输入，在经过三层控制层的计算后确定各新能源发电设备的目标调度子功率，从而实现对各新能源发电设备进行精准地功率分配，具体方法参见下述实施例。根据本发明实施例，提供了一种功率控制方法实施例，需要说明的是，在附图的流程图示出的步骤可以在诸如一组计算机可执行指令的计算机系统中执行，并且，虽然在流程图中示出了逻辑顺序，但是在某些情况下，可以以不同于此处的顺序执行所示出或描述的步骤。在本实施例中提供了一种功率控制方法，可用于如手机、电脑、平板电脑等终端，图1是根据本发明实施例的功率控制方法的流程图，如图1所示，该流程包括如下步骤：S11，获取目标调度功率。电网要实现发电和用电的供需平衡，要通过对供电设备下发调度指令以满足用户的用电需求，该指令值即目标调度功率。S12，获取至少一个新能源发电设备的出力功率预测值。供电系统中包含至少一个新能源发电设备，新能源发电设备可以包括光伏设备、风电设备等。出力功率预测值是基于发电设备的性能结合预测模型得到的，通常可以根据发电设备的装机容量或出力预测功率对目标调度功率进行分配，但是考虑到各个新能源供电设备出力的不确定性和互补性，可以通过将各个新能源发电设备的出力功率预测值与目标调度功率进行比较从而确定新能源发电设备的功率分配策略。S13，将至少一个新能源发电设备的出力功率预测值与目标调度功率进行比较，以确定各个新能源发电设备的第一调度功率。比较新能源发电设备之间的出力功率预测值，再将较大的新能源发电设备的出力功率预测值与目标调度功率进行比较，确定各个新能源发电设备的第一调度功率，第一调度功率指经过逻辑判断之后各新能源发电设备的功率值。若新能源发电设备的出力功率预测值大于等于目标调度功率，则由该新能源发电设备进行功率输出，由此确定该新能源发电设备的第一调度功率即目标调度功率；若新能源发电设备的出力功率预测值小于目标调度功率，则可以采用两种或两种以上的新能源发电设备进行功率输出，输出功率的新能源发电设备的第一调度功率之和即目标调度功率。该步骤得到的第一调度功率可以通过建立的控制模型的有功功率指令分配层得到，但是得到的第一调度功率未考虑各新能源发电设备的功率限制，因此该结果不能直接实现各新能源发电设备的功率控制。S14，基于各个新能源发电设备的功率限制对第一调度功率进行调整，以确定各个新能源发电设备的第二调度功率。该步骤可将第一调度功率输入控制模型的长时间尺度功率控制层，经过计算和优化后，确定第二调度功率。在确定第一调度功率后，可结合各个新能源发电设备的第一调度功率以及功率限制，确定关于第二调度功率的优化函数。基于各新能源发电设备的出力限制条件对优化函数进行优化，从而得到第二调度功率。可将第二调度功率作为有功功率指令分配层的输入值再次进行计算，经过不断地优化，直至第二调度功率的计算结果不变，确定优化好的第二调度功率。S15，基于各个新能源发电设备的实际工作状态对第二调度功率进行调整，以确定各个新能源发电设备的目标调度子功率。在各个新能源发电设备的第二调度功率确定后，需要分别具体考虑各个新能源发电设备的实际运行状态对目标调度功率做进一步分配。由于新能源发电设备的实际出力和第二调度功率可能会存在一定的误差，从而导致功率差额，因此可以通过短周期间隔，基于各个新能源发电设备的实际工作状态对第二调度功率进行优化计算，确定目标调度子功率，即，将第二调度功率作为短时间尺度功率控制层的输入。各新能源发电设备可根据目标调度子功率进行供电，各新能源发电设备的目标调度子功率之和即目标调度功率。实际工作状态可以包括新能源发电设备的数量、额定功率、最小出力功率等，具体可依据新能源发电设备的种类进行调整。本实施提供的功率控制方法，在确定目标调度功率后，结合各新能源发电设备的出力功率预测值，通过比较出力功率预测值与目标调度功率等逻辑判断之后确定第一调度功率，再根据新能源发电设备的功率限制对第一调度功率进行调整以确定第二调度功率，考虑新能源发电设备的实际工作状态调整第二调度功率，直至确定各个新能源发电设备的目标调度功率，可根据目标调度子功率进行供电，完成对目标调度功率的精准分配。在本实施例中提供了确定第一调度功率的方法，对应于图1的S13，图2是根据本实施例的确定第一调度功率的方法，如图2所示，该流程包括如下步骤：S21，比较各个新能源发电设备的出力功率预测值，确定出力功率预测值最大的目标新能源发电设备。当存在多个新能源发电设备，比较新能源发电设备的出力功率预测值，将其中出力功率预测值最大的新能源发电设备确定为目标新能源发电设备。S22，将目标新能源发电设备的出力功率预测值与目标调度功率进行比较，并根据比较结果确定各个新能源发电设备的第一调度功率。具体的，S22包括S221-S223，如图3所示：S221，当目标新能源发电设备的出力功率预测值大于目标调度功率，确定目标新能源发电设备为提供目标调度功率的新能源发电设备并基于目标调度功率确定目标新能源发电设备的第一调度功率。将目标新能源发电设备的出力功率预测值与目标调度功率进行比较，当目标新能源发电设备的出力功率的预测值大于目标调度功率，则由该目标新能源发电设备供电，供电量为目标调度功率，此时该目标新能源设备的第一调度功率即目标调度功率，目标新能源设备的剩余功率可以对储能设备进行充电。S222，当目标新能源发电设备的出力功率预测值小于或等于目标调度功率，将各个新能源发电设备的出力功率预测值之和与目标调度功率进行比较。S223，当各个新能源发电设备的出力功率预测值之和大于或等于目标调度功率，基于目标调度功率确定各个新能源发电设备的第一调度功率。当目标新能源发电设备的出力功率预测值小于或等于目标调度功率，将各个新能源发电设备的出力功率预测值之和与目标调度功率进行比较，若大于或等于目标调度功率，则由这几个新能源发电设备进行供电，各个新能源发电设备的第一调度功率之和即目标调度功率，剩余的功率可对储能设备进行充电。在一种实施方式中，当各个新能源发电设备的出力功率预测值之和小于目标调度功率，基于目标调度功率确定各个新能源发电设备以及储能设备的第一调度功率。在本实施例中提供了确定第二调度功率的方法，对应于图1的S14，图4是根据本实施例的确定第二调度功率的方法，如图4所示，该流程包括如下步骤：S31，以第二调度功率与第一调度功率的差值最小为优化目标，基于各个新能源发电设备的功率限制对第二调度功率进行优化，确定第二调度功率的参考值。在功率实际分配中，需要考虑各个新能源发电设备的功率限制，基于功率限制的约束对第二调度功率进行优化，确定第二调度功率的参考值，第二调度功率为各新能源发电设备的下发功率参考值。可以将第二调度功率与第一调度功率的差值最小为优化目标，构建优化目标函数，再结合各新能源发电设备的功率限制确定约束条件，基于约束条件对优化目标函数进行优化，得到第二调度功率，需要对第二调度功率进行不断优化直至结果不变，在确定最终第二调度功率之前，将长时间尺度控制层输出的结果作为第二调度功率的参考值。在一种实施例中，基于第一新能源发电设备和第二新能源发电设备的出力限制约束条件、出力爬坡限制约束条件以及储能设备的充放电约束条件对第二调度功率进行优化。S32，将至少一个新能源发电设备的第二调度功率的参考值与目标调度功率进行比较，以确定各个新能源发电设备更新后的第一调度功率。将基于约束条件对目标优化函数进行优化得到的第二调度功率的参考值作为有功功率指令分配层的输入，将各新能源发电设备的第二调度功率的参考值替代出力功率预测值，进行逻辑判断，具体过程参见S21-S22，在此不再赘述。S33，以第二调度功率与更新后的第一调度功率的差值最小为优化目标，基于各个新能源发电设备的功率限制对所述第二调度功率进行优化。基于S32得到的结果重复S31步骤，即更新目标优化函数并不断进行优化，直至最终得到的第二调度功率的参考值不再变化，从而确定第二调度功率。第二调度功率为各新能源发电设备的输入功率，确定第二调度功率后，需要分别具体考虑各新能源发电设备的实际运行状态做进一步的调整。由于长时间尺度功率控制层的输入值是基于长时间尺度的预测结果获得，但新能源发电设备的实际出力值可能会与第二调度功率存在一定的误差，可能会导致其中的储能设备频繁充放电。因此，可以在短时间尺度功率控制层中，将控制时间尺度进一步压缩，采用滚动优化计算的方法，采用较短时间间隔对新能源发电设备的分配功率进行调整，得到各目标调度子功率，从而实现目标调度功率的分配。具体地，可建立短时间尺度功率控制层，以各个新能源发电设备的第二调度功率与目标调度子功率的差值最小为优化目标，基于第一新能源发电设备和第二新能源发电设备的额定功率以及最小出力功率对优化目标进行优化，基于所述储能设备的充放电功率的上下限对所述优化目标进行优化，从而确定各个新能源发电设备的目标调度子功率。以风光储一体化场站为例，即新能源发电设备包括风电设备、光伏设备以及储能设备，建立风光储一体化场站三层指令跟踪控制模型，该控制模型包括有功功率控制层、长时间尺度功率控制层以及短时间尺度功率控制层。当电网要实现发电和用电的供需平衡，通过对风光储场站下发调度指令，分配风光储场站中的各设备的发电功率，从而满足用户的用电需求，调度指令中包括目标调度功率，即风光储一体化场站输出的功率大小。获取出力功率预测值，出力功率预测值是基于发电设备的性能结合预测模型得到的，比较出力功率预测值和目标调度功率，从而确定各个新能源发电设备的第一调度功率。具体的判断逻辑如图5所示，具体地，在调度指令下发的周期内，首先判断风电设备和光伏设备的出力功率预测值。如果风电设备的出力功率预测值大于光伏设备的出力功率预测值，再进一步判断风电设备的出力功率预测值是否大于目标调度功率，若结果为是，则仅由风电设备进行供电满足目标调度功率，风电设备和光伏设备的剩余功率对储能设备进行供电；若结果为否，则判断风电设备和光伏设备的出力功率预测值是否大于或等于目标调度功率。当风电设备和光伏设备的出力功率预测值大于或等于目标调度功率，则由风电设备和光伏设备共同供电，确定风电设备和光伏设备的第一调度功率，风电设备和光伏设备的剩余功率用于对储能设备进行供电；当风电设备和光伏设备的出力功率预测值小于目标调度功率，则由风电设备、光伏设备以及储能设备共同供电。同理，如果风电设备的出力功率预测值小于光伏设备的出力功率预测值，则将光伏设备的出力功率预测值与目标调度功率进行比较，后续的判断逻辑与上述方法一致。经过有功功率控制层对各设备的逻辑分配，可以确定各个设备满足目标调度功率的第一调度功率。由于该分配逻辑未考虑风电设备、光伏设备和储能设备的功率限制，可以将第一调度功率作为长时间尺度功率控制层的输入。具体地，建立优化目标函数，优化目标函数的表达式为：其中，Pwind_part、PPV_part、Pstorage_part分别表示风电设备、光伏设备和储能设备的第一调度功率；Pwind_ref、PPV_ref、Pstorage_ref分别表示风电设备、光伏设备和储能设备的第二调度功率的参考值。考虑风电设备、光伏设备和储能设备的功率限制，设定以下约束条件：风电和光伏出力限制约束条件：其中，Pwind_N、Pwind_min以及Pwind_ref分别表示风电设备的总装机容量、最小总出力功率以及第二调度功率，PPV_N、PPV_min以及PPV_ref分别表示光伏设备的总装机容量、最小总出力功率以及第二调度功率，Pstorage_N、Pstorage_min以及Pstorage_ref分别表示储能设备的总装机容量、最小总出力功率以及第二调度功率。风电和光伏出力爬坡限制约束条件：其中，Pwind_ref表示风电设备的第二调度功率，Pwind_pre表示风电设备参与指令控制前的功率值，Pwind_N表示风电设备的总装机容量，Lclimb表示风电设备在调度指令下发间隔周期内的爬坡率限值。储能充放电约束条件：其中，Pstorage_ref表示储能设备的第二调度功率，Pstorage_pre表示储能设备参与指令控制前的功率值，Pstorage_N表示储能设备的总装机容量，Lcharge表示储能设备的充、放电限值。将长时间尺度功率控制层的输出结果作为有功功率控制层的输入，重新获取第一调度功率，并再次输入长时间尺度功率控制层再次计算，输出第二调度功率，对第二调度功率进行不断优化，直至第一调度功率与第二调度功率相同，确定第二调度功率并将该第二调度功率作为短时间尺度功率控制层的输入。第二调度功率为风电设备、光伏设备以及储能设备的功率参考值，还需要具体考虑风电设备、光伏设备以及储能设备的实际运行状态做进一步分配。由于长时间尺度功率控制层的输出结果是基于长时间尺度的预测结果计算获得，风光的实际出力与第二调度功率会存在一定误差，会导致储能设备频繁充放电。因此，在短时间尺度功率控制层中，压缩时间尺度，采用滚动优化计算的方法，每隔1分钟或几十秒的时间间隔对风电设备、光伏设备以及储能设备的第二调度功率进行优化计算。具体地，可建立短时间尺度功率控制层，以各个新能源发电设备的第二调度功率与目标调度子功率的差值最小为优化目标，建立的优化目标函数如下：其中，Pwind_ref、PPV_ref、Pstorage_ref分别表示风电设备、光伏设备、储能设备的第二调度功率，Pwind_i、PPV_j、Pstorage_k分别表示第i个风电设备、第j个光伏设备和第k个储能设备的目标调度子功率，Nwind、NPV、Nstorage分别表示风电设备、光伏设备和储能设备的数量。设定以下约束条件：其中，Pwind_mini表示第i个风电设备的最小出力功率，Pwind_Ni表示第i个风电设备的额定功率，Pwind_i表示第i个风电设备目标调度子功率，PPV_j表示第j个光伏设备的目标调度子功率，PPV_Nj表示第j个光伏设备的额定功率，Pstorage_min表示储能设备充放电功率的下限，Pstorage_max表示储能设备充放电功率的上限，Pstorage_k表示第k个储能设备的目标调度子功率。基于以上约束条件对优化目标函数进行优化，最终确定光伏设备、风电设备以及储能设备的目标调度子功率，使得各设备按目标调度子功率进行供电，提高对目标调度指令的分配精度。在本实施例中还提供了一种功率控制装置，该装置用于实现上述实施例及优选实施方式，已经进行过说明的不再赘述。如以下所使用的，术语“模块”可以实现预定功能的软件和/或硬件的组合。尽管以下实施例所描述的装置较佳地以软件来实现，但是硬件，或者软件和硬件的组合的实现也是可能并被构想的。本实施例提供一种功率控制装置，如图6所示，包括：调度功率获取单元，用于获取目标调度功率。出力功率确定单元，用于获取至少一个新能源发电设备的出力功率预测值。第一调度功率确定单元，用于将至少一个新能源发电设备的出力功率预测值与目标调度功率进行比较，以确定各个新能源发电设备的第一调度功率。第二调度功率确定单元，用于基于各个新能源发电设备的功率限制对第一调度功率进行调整，以确定各个新能源发电设备的第二调度功率。目标调度确定单元，用于基于各个新能源发电设备的实际工作状态对第二调度功率进行调整，以确定各个新能源发电设备的目标调度子功率。在一种实施方式中，第一调度功率确定单元还包括：第一比较子单元，用于比较各个所述新能源发电设备的出力功率预测值，确定出力功率预测值最大的目标新能源发电设备；第一调度功率确定子单元，用于将所述目标新能源发电设备的出力功率预测值与所述目标调度功率进行比较，并根据比较结果确定各个所述新能源发电设备的第一调度功率。在一种实施方式中，第一调度功率确定子单元还用于：当所述目标新能源发电设备的出力功率预测值大于所述目标调度功率，确定所述目标新能源发电设备为提供所述目标调度功率的新能源发电设备并基于所述目标调度功率确定所述目标新能源发电设备的第一调度功率；当所述目标新能源发电设备的出力功率预测值小于或等于所述目标调度功率，将各个所述新能源发电设备的出力功率预测值之和与所述目标调度功率进行比较；当各个所述新能源发电设备的出力功率预测值之和大于或等于所述目标调度功率，基于所述目标调度功率确定所述各个新能源发电设备的第一调度功率。在一种实施方式中，第一调度功率确定子单元还用于：当所述各个新能源发电设备的出力功率预测值之和小于所述目标调度功率，基于所述目标调度功率确定所述各个新能源发电设备以及储能设备的第一调度功率。在一种实施方式中，第二调度功率确定单元还包括：参考值确定子单元，用于以所述第二调度功率与所述第一调度功率的差值最小为优化目标，基于各个所述新能源发电设备的功率限制对所述第二调度功率进行优化，确定第二调度功率的参考值；更新确定子单元，用于将所述至少一个新能源发电设备的第二调度功率的参考值与所述目标调度功率进行比较，以确定各个所述新能源发电设备更新后的第一调度功率；优化子单元，用于以所述第二调度功率与所述更新后的第一调度功率的差值最小为优化目标，基于各个所述新能源发电设备的功率限制对所述第二调度功率进行优化。在一种实施方式中，参考值确定子单元还用于：基于所述第一新能源发电设备和所述第二新能源发电设备的出力限制约束条件、出力爬坡限制约束条件以及所述储能设备的充放电约束条件对所述第二调度功率进行优化。在一种实施方式中，目标调度确定单元还包括：优化目标确定子单元，用于以所述各个新能源发电设备的第二调度功率与目标调度子功率的差值最小为优化目标；第一目标调度子单元，用于基于所述第一新能源发电设备和第二新能源发电设备的额定功率以及最小出力功率对所述优化目标进行优化，以确定所述第一新能源发电设备和第二新能源发电设备的目标调度子功率；第二目标调度子单元，用于基于所述储能设备的充放电功率的上下限对所述优化目标进行优化，以确定所述储能设备的目标调度子功率本实施例中的功率控制装置是以功能单元的形式来呈现，这里的单元是指ASIC电路，执行一个或多个软件或固定程序的处理器和存储器，和/或其他可以提供上述功能的器件。上述各个模块的更进一步的功能描述与上述对应实施例相同，在此不再赘述。本发明实施例还提供一种电子设备，具有上述图6所示的功率控制装置。请参阅图7，图7是本发明可选实施例提供的一种电子设备的结构示意图，如图7所示，该电子设备可以包括：至少一个处理器601，例如CPU，至少一个通信接口603，存储器604，至少一个通信总线602。其中，通信总线602用于实现这些组件之间的连接通信。其中，通信接口603可以包括显示屏、键盘，可选通信接口603还可以包括标准的有线接口、无线接口。存储器604可以是高速RAM存储器，也可以是非不稳定的存储器，例如至少一个磁盘存储器。存储器604可选的还可以是至少一个位于远离前述处理器601的存储装置。其中处理器601可以结合图6所描述的装置，存储器604中存储应用程序，且处理器601调用存储器604中存储的程序代码，以用于执行上述任一方法步骤。其中，通信总线602可以是外设部件互连标准总线或扩展工业标准结构总线等。通信总线602可以分为地址总线、数据总线、控制总线等。为便于表示，图7中仅用一条粗线表示，但并不表示仅有一根总线或一种类型的总线。其中，存储器604可以包括易失性存储器，例如随机存取存储器；存储器也可以包括非易失性存储器，例如快闪存储器，硬盘或固态硬盘；存储器604还可以包括上述种类的存储器的组合。其中，处理器601可以是中央处理器，网络处理器或者CPU和NP的组合。其中，处理器601还可以进一步包括硬件芯片。上述硬件芯片可以是专用集成电路，可编程逻辑器件或其组合。上述PLD可以是复杂可编程逻辑器件，现场可编程逻辑门阵列，通用阵列逻辑或其任意组合。可选地，存储器604还用于存储程序指令。处理器601可以调用程序指令，实现如本申请实施例中所示的功率控制方法。本发明实施例还提供了一种非暂态计算机存储介质，所述计算机存储介质存储有计算机可执行指令，该计算机可执行指令可执行上述任意方法实施例中的功率控制方法。其中，所述存储介质可为磁碟、光盘、只读存储记忆体、随机存储记忆体、快闪存储器、硬盘或固态硬盘（Solid-State Drive，SSD)等；所述存储介质还可以包括上述种类的存储器的组合。虽然结合附图描述了本发明的实施例，但是本领域技术人员可以在不脱离本发明的精神和范围的情况下做出各种修改和变型，这样的修改和变型均落入由所附权利要求所限定的范围之内。
