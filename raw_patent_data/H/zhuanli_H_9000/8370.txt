标题title
投屏方法和电子设备
摘要abst
本申请实施例提供了一种投屏方法和电子设备，该方法由第一电子设备执行，包括：获取目标分辨率，该目标分辨率为第一电子设备向第二电子设备投屏的过程中，对待投屏的图像数据进行编码时所采用的分辨率，该目标分辨率为根据第一电子设备的显示分辨率和第二电子设备的显示分辨率所确定的；采用目标分辨率对待投屏的图像数据进行编码，得到编码数据；向第二电子设备发送编码数据。该方法可以提升第一电子设备向第二电子设备投屏时的投屏效果。
权利要求书clms
1.一种投屏方法，其特征在于，所述方法由第一电子设备执行，包括：获取目标分辨率，所述目标分辨率为所述第一电子设备向第二电子设备投屏的过程中，对待投屏的图像数据进行编码时所采用的分辨率，所述目标分辨率为根据所述第一电子设备的显示分辨率和所述第二电子设备的显示分辨率所确定的；采用所述目标分辨率对所述待投屏的图像数据进行编码，得到编码数据；向所述第二电子设备发送所述编码数据。2.根据权利要求1所述的方法，其特征在于，所述获取目标分辨率，包括：获取所述第一电子设备的显示分辨率以及所述第二电子设备的显示分辨率；根据所述第一电子设备的显示分辨率和所述第二电子设备的显示分辨率，确定所述目标分辨率。3.根据权利要求2所述的方法，其特征在于，所述根据所述第一电子设备的显示分辨率和所述第二电子设备的显示分辨率，确定所述目标分辨率，包括：根据所述第一电子设备的显示分辨率和所述第二电子设备的显示分辨率，确定所述第二电子设备上的第一区域的垂直像素数量和水平像素数量，所述第一区域包括投屏区域；根据所述第一电子设备的显示分辨率、所述第一区域的垂直像素数量和水平像素数量，确定所述目标分辨率。4.根据权利要求3所述的方法，其特征在于，所述第二电子设备的显示屏上包括状态栏，所述第二电子设备的显示分辨率包括所述第二电子设备的显示屏的第一垂直像素数量和第一水平像素数量，所述根据所述第一电子设备的显示分辨率和所述第二电子设备的显示分辨率，确定所述第二电子设备上的第一区域的垂直像素数量和水平像素数量，包括：从所述第二电子设备中获取第三垂直像素数量，所述第三垂直像素数量包括所述第二电子设备的状态栏对应的垂直像素数量；根据所述第一电子设备的显示分辨率、第一垂直像素数量与所述第三垂直像素数量，确定所述第一区域的垂直像素数量和水平像素数量。5.根据权利要求4所述的方法，其特征在于，所述第一电子设备的显示分辨率包括所述第一电子设备的显示屏的第二垂直像素数量和第二水平像素数量；所述根据所述第一电子设备的显示分辨率、第一垂直像素数量与第三垂直像素数量，确定所述第一区域的垂直像素数量和水平像素数量，包括：将所述第一垂直像素数量与第三垂直像素数量的差值，确定为所述第一区域的垂直像素数量；将所述第一区域的垂直像素数量与第一比值的乘积，确定为所述第一区域的水平像素数量，所述第一比值为所述第二水平像素数量与所述第二垂直像素数量之间的比值。6.根据权利要求5所述的方法，其特征在于，所述投屏区域位于所述第二电子设备上显示的投屏窗口内，所述第三垂直像素数量还包括所述投屏窗口的导航区域对应的垂直像素数量。7.根据权利要求5或6所述的方法，其特征在于，所述根据所述第一电子设备的显示分辨率、所述第一区域的垂直像素数量和水平像素数量，确定所述目标分辨率，包括：根据所述第二垂直像素数量与所述第二水平像素数量的最大公约数、所述第一区域的垂直像素数量和水平像素数量，确定所述目标分辨率。8.根据权利要求7所述的方法，其特征在于，所述根据所述第二垂直像素数量与所述第二水平像素数量的最大公约数、所述第一区域的垂直像素数量和水平像素数量，确定所述目标分辨率，包括：将所述第二垂直像素数量和所述最大公约数的商值，确定为第一因子，以及将所述第二水平像素数量和所述最大公约数的商值，确定为第二因子；根据所述第一因子、所述第二因子、以及所述第一区域的垂直像素数量和水平像素数量，确定所述目标分辨率。9.根据权利要求8所述的方法，其特征在于，所述根据所述第一因子、所述第二因子、以及所述第一区域的垂直像素数量和水平像素数量，确定所述目标分辨率，包括：对所述第一因子进行第一运算的处理，得到第一结果，并且，对所述第二因子进行第二运算的处理，得到第二结果，所述第一结果为对所述第一因子累加n次得到的结果，或者对所述第一因子乘以系数n得到的结果，所述第二结果为对所述第二因子累加n次得到的结果，或者对所述第二因子乘以系数n得到的结果，所述n为正整数；如果所述第一结果对应的像素数量大于或者等于所述第一区域的垂直像素数量，或者所述第二结果对应的像素数量大于或者等于所述第一区域的水平像素数量，将所述第一结果对应的像素数量和所述第二结果对应的像素数量作为所述目标分辨率。10.根据权利要求1所述的方法，其特征在于，所述目标分辨率为所述第二电子设备根据所述第一电子设备的显示分辨率和所述第二电子设备的显示分辨率所确定的。11.根据权利要求1至10中任一项所述的方法，其特征在于，所述目标分辨率小于所述第一电子设备的显示分辨率。12.一种投屏方法，其特征在于，所述方法由第二电子设备执行，包括：向第一电子设备发送目标分辨率，所述目标分辨率为所述第一电子设备向第二电子设备投屏的过程中，对待投屏的图像数据进行编码时所采用的分辨率，所述目标分辨率为所述第二电子设备根据所述第一电子设备的显示分辨率和所述第二电子设备的显示分辨率所确定的；接收所述第一电子设备发送的编码数据，并显示所述编码数据对应的图像，所述编码数据为所述第一电子设备采用所述目标分辨率对所述待投屏的图像数据进行编码所得到的数据。13.一种投屏系统，其特征在于，包括第一电子设备和第二电子设备，所述第一电子设备执行如权利要求1至11中任一项所述的方法，所述第二电子设备执行如权利要求12所述的方法。14.一种电子设备，其特征在于，包括：一个或多个处理器；一个或多个存储器；所述存储器存储有一个或多个程序，当所述一个或多个程序被所述处理器执行时，使得所述电子设备执行如权利要求1至11中任一项所述的方法，或者执行如权利要求12所述的方法。15.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质中存储了计算机程序，当所述计算机程序被处理器执行时，使得所述处理器执行权利要求1至11中任一项所述的方法，或者执行如权利要求12所述的方法。
说明书desc
本申请要求于2022年05月30日提交国家知识产权局、申请号为202210598752.7、申请名称为“投屏方法和电子设备”的中国专利申请的优先权，其全部内容通过引用结合在本申请中。技术领域本申请涉及投屏技术领域，具体涉及一种投屏方法和电子设备。背景技术当前，较多的电子设备支持无线投屏技术，即将电子设备A的显示界面投屏显示到另一个电子设备B的屏幕上，用户可通过电子设备B观看显示内容。例如，手机可以将显示界面投屏至平板电脑上进行显示。在手机向平板电脑投屏的过程中，通常需要手机先根据投屏分辨率对待投屏数据进行编码，再将编码数据发送至平板电脑，以供平板电脑对编码数据进行解码，继而显示投屏界面。然而，因当前手机和平板电脑的种类越来越多，所适用的分辨率也不尽相同，因此，在投屏过程中需要协商较适宜的投屏分辨率，以提升投屏效果。发明内容本申请提供了一种投屏方法和电子设备，能够提升电子设备之间的投屏效果。第一方面，本申请提供一种投屏方法，该方法由第一电子设备执行，包括：获取目标分辨率，该目标分辨率为第一电子设备向第二电子设备投屏的过程中，对待投屏的图像数据进行编码时所采用的分辨率，该目标分辨率为根据第一电子设备的显示分辨率和第二电子设备的显示分辨率所确定的；采用目标分辨率对待投屏的图像数据进行编码，得到编码数据；向第二电子设备发送编码数据。其中，第一电子设备可以为手机，第二电子设备可以为平板电脑，手机向平板电脑投屏的过程中，需要采用投屏分辨率对待投屏数据进行编码，则本申请根据手机的显示分辨率和平板电脑的显示分辨率确定该目标分辨率，所得到的目标分辨率可以使编码数据较大程度的适应于平板电脑，以提升投屏效果。同时该目标分辨率通常是小于手机的显示分辨率的，那么手机在编码时，按照目标分辨率进行编码可以减少手机侧编码时的性能浪费。在一些实现方式中，该目标分辨率也可称为最优投屏分辨率。可以理解，在一种实现方式中，上述目标分辨率可以为第一电子设备根据第一电子设备的显示分辨率和第二电子设备的显示分辨率所确定的，此时第一电子设备需要从第二电子设备中获取第二电子设备的显示分辨率，在确定了目标分辨率后即可直接采用该目标分辨率进行编码。在另一种实现方式中，上述目标分辨率还可以为第二电子设备根据第一电子设备的显示分辨率和第二电子设备的显示分辨率所确定的，此时第二电子设备需要从第一电子设备中获取第一电子设备的显示分辨率，在确定了目标分辨率后需要将目标分辨率返回至第一电子设备，以供第一电子设备采用该目标分辨率进行编码。上述实现方式中，第一电子设备根据由第一电子设备的显示分辨率和第二电子设备的显示分辨率所确定的目标分辨率对待投屏的数据进行编码，该目标分辨率可以使得到的编码数据较大程度的适应于第二电子设备，提升了投屏效果；且该目标分辨率通常是小于第一电子设备的显示分辨率的，那么第一电子设备无需再按照自身的显示分辨率去编码，减少了编码性能浪费。结合第一方面，在第一方面的有些实现方式中，在目标分辨率可以为第一电子设备根据第一电子设备的显示分辨率和第二电子设备的显示分辨率所确定的情况下，上述获取目标分辨率，包括：获取第一电子设备的显示分辨率以及第二电子设备的显示分辨率；根据第一电子设备的显示分辨率和第二电子设备的显示分辨率，确定目标分辨率。在此实现方式中，第一电子设备的显示分辨率可以为高×宽，第二电子设备的显示分辨率也可以为高×宽。因第二电子设备上显示投屏窗口时，该投屏窗口的高的最大值应为第二电子设备的高，则投屏窗口的高和宽的比值与第一电子设备的高和宽的比值相等或相近时，该投屏窗口内显示的投屏界面与源界面的显示效果最接近。因此，第一电子设备可以根据第一电子设备的高和宽、投屏窗口的高，确定投屏窗口的宽，并将投屏窗口的高×宽作为目标分辨率。在一些实现方式中，上述根据第一电子设备的显示分辨率和第二电子设备的显示分辨率，确定目标分辨率，包括：根据第一电子设备的显示分辨率和第二电子设备的显示分辨率，确定第二电子设备上的第一区域的垂直像素数量和水平像素数量，第一区域包括投屏区域；根据第一电子设备的显示分辨率、第一区域的垂直像素数量和水平像素数量，确定目标分辨率。其中，第一区域可以位于上述投屏窗口内，在根据第一电子设备的显示分辨率和第二电子设备的显示分辨率确定了该第一区域的大小后，为使投屏效果更优，第一电子设备可以再根据第一区域的大小和第一电子设备的显示分辨率确定目标分辨率。在一个实现方式中，第二电子设备的显示屏上通常包括状态栏，投屏区域一般不会占用该状态栏的区域，因此，在确定上述第一区域的大小时，可以排除该状态栏的区域。上述第二电子设备的显示分辨率可以包括第二电子设备的显示屏的第一垂直像素数量和第一水平像素数量，第一电子设备的显示分辨率可以包括第一电子设备的显示屏的第二垂直像素数量和第二水平像素数量；则根据第一电子设备的显示分辨率和第二电子设备的显示分辨率，确定第二电子设备上的第一区域的垂直像素数量和水平像素数量，包括：从第二电子设备中获取第三垂直像素数量，第三垂直像素数量包括第二电子设备的状态栏对应的垂直像素数量；根据第一电子设备的显示分辨率、第一垂直像素数量与第三垂直像素数量，确定第一区域的垂直像素数量和水平像素数量。其中，根据第一电子设备的显示分辨率、第一垂直像素数量与第三垂直像素数量，确定第一区域的垂直像素数量和水平像素数量，包括：将第一垂直像素数量与第三垂直像素数量的差值，确定为第一区域的垂直像素数量；将第一区域的垂直像素数量与第一比值的乘积，确定为第一区域的水平像素数量，第一比值为第二水平像素数量与第二垂直像素数量之间的比值。也即是说，用第二电子设备的高减去状态栏的高，即得到第一区域的高。然后再根据第一电子设备的高和宽的比值、以及第一区域的高，确定第一区域的宽。这样所得到的第一区域可以不占用状态栏的区域，进一步提升投屏效果。再进一步的，在上述投屏区域位于投屏窗口内的情况下，因投屏窗口上端和下端具有导航栏，导航栏的区域一般也不会显示投屏界面，因此，在确定上述第一区域的高时，还可以排除该导航栏的区域。也即是说，上述第三垂直像素数量还包括投屏窗口的导航区域对应的垂直像素数量。结合第一方面，在第一方面的有些实现方式中，上述根据第一电子设备的显示分辨率、第一区域的垂直像素数量和水平像素数量，确定目标分辨率，包括：根据第二垂直像素数量与第二水平像素数量的最大公约数、第一区域的垂直像素数量和水平像素数量，确定目标分辨率。在一个实现方式中，上述根据第二垂直像素数量与第二水平像素数量的最大公约数、第一区域的垂直像素数量和水平像素数量，确定目标分辨率，包括：将第二垂直像素数量和最大公约数的商值，确定为第一因子，以及将第二水平像素数量和最大公约数的商值，确定为第二因子；根据第一因子、第二因子、以及第一区域的垂直像素数量和水平像素数量，确定目标分辨率。在一个实现方式中，上述根据第一因子、第二因子、以及第一区域的垂直像素数量和水平像素数量，确定目标分辨率，包括：对第一因子进行第一运算的处理，得到第一结果，并且，对第二因子进行第二运算的处理，得到第二结果，第一结果为对第一因子累加n次得到的结果，或者对第一因子乘以系数n得到的结果，第二结果为对第二因子累加n次得到的结果，或者对第二因子乘以系数n得到的结果，n为正整数；如果第一结果对应的像素数量大于或者等于第一区域的垂直像素数量，或者第二结果对应的像素数量大于或者等于第一区域的水平像素数量，将第一结果对应的像素数量和第二结果对应的像素数量作为目标分辨率。其中，第一电子设备可以先确定第二垂直像素数量与第二水平像素数量的最大公约数，然后用第二垂直像素数量除以该最大公约数，得到第一因子，用第二水平像素数量除以该最大公约数，得到第二因子。接下来，对第一因子和第二因子分别进行相同次数的累加，或者分别进行相同系数的乘积。当根据第一因子得到的第一结果对应的像素数量大于或者等于上述第一区域的垂直像素数量，即此时的第一结果对应的像素数量正好适应于第一区域，则将此时的第一结果对应的像素数量作为目标分辨率的垂直像素数量，与第一结果对应的、经过相同运算得到的第二结果所对应的像素数量作为目标分辨率的水平像素数量。由此，所得到的目标分辨率为编码时较优的分辨率，所得到的编码数据能够较大程度适应于第二电子设备的投屏窗口。在一个实现方式中，在上述目标分辨率为第二电子设备根据第一电子设备的显示分辨率和第二电子设备的显示分辨率所确定的的情况下，第二电子设备可以执行如下第二方面的技术方案。第二方面，本申请提供一种投屏方法，该方法由第二电子设备执行，包括：向第一电子设备发送目标分辨率，该目标分辨率为第一电子设备向第二电子设备投屏的过程中，对待投屏的图像数据进行编码时所采用的分辨率，该目标分辨率为第二电子设备根据第一电子设备的显示分辨率和第二电子设备的显示分辨率所确定的；接收第一电子设备发送的编码数据，并显示编码数据对应的图像，编码数据为第一电子设备采用目标分辨率对待投屏的图像数据进行编码所得到的数据。结合第二方面，在第二方面的有些实现方式中，上述方法还包括：获取第一电子设备的显示分辨率，根据第一电子设备的显示分辨率和第二电子设备的显示分辨率，确定目标分辨率。在一个实现方式中，上述根据第一电子设备的显示分辨率和第二电子设备的显示分辨率，确定目标分辨率，包括：根据第一电子设备的显示分辨率和第二电子设备的显示分辨率，确定第二电子设备上的第一区域的垂直像素数量和水平像素数量，第一区域包括投屏区域；根据第一电子设备的显示分辨率、第一区域的垂直像素数量和水平像素数量，确定目标分辨率。在一个实现方式中，第二电子设备的显示屏上包括状态栏，第二电子设备的显示分辨率包括第二电子设备的显示屏的第一垂直像素数量和第一水平像素数量，根据第一电子设备的显示分辨率和第二电子设备的显示分辨率，确定第二电子设备上的第一区域的垂直像素数量和水平像素数量，包括：根据第一电子设备的显示分辨率、第一垂直像素数量与第三垂直像素数量，确定第一区域的垂直像素数量和水平像素数量，第三垂直像素数量包括第二电子设备的状态栏对应的垂直像素数量。在一个实现方式中，第一电子设备的显示分辨率包括第一电子设备的显示屏的第二垂直像素数量和第二水平像素数量；上述根据第一电子设备的显示分辨率、第一垂直像素数量与第三垂直像素数量，确定第一区域的垂直像素数量和水平像素数量，包括：将第一垂直像素数量与第三垂直像素数量的差值，确定为第一区域的垂直像素数量；将第一区域的垂直像素数量与第一比值的乘积，确定为第一区域的水平像素数量，第一比值为第二水平像素数量与第二垂直像素数量之间的比值。在一个实现方式中，投屏区域位于第二电子设备上显示的投屏窗口内，第三垂直像素数量还包括投屏窗口的导航区域对应的垂直像素数量。在一个实现方式中，上述根据第一电子设备的显示分辨率、第一区域的垂直像素数量和水平像素数量，确定目标分辨率，包括：根据第二垂直像素数量与第二水平像素数量的最大公约数、第一区域的垂直像素数量和水平像素数量，确定目标分辨率。在一个实现方式中，根据第二垂直像素数量与第二水平像素数量的最大公约数、第一区域的垂直像素数量和水平像素数量，确定目标分辨率，包括：将第二垂直像素数量和最大公约数的商值，确定为第一因子，以及将第二水平像素数量和最大公约数的商值，确定为第二因子；根据第一因子、第二因子、以及第一区域的垂直像素数量和水平像素数量，确定目标分辨率。在一个实现方式中，上述根据第一因子、第二因子、以及第一区域的垂直像素数量和水平像素数量，确定目标分辨率，包括：对第一因子进行第一运算的处理，得到第一结果，并且，对第二因子进行第二运算的处理，得到第二结果，第一结果为对第一因子累加n次得到的结果，或者对第一因子乘以系数n得到的结果，第二结果为对第二因子累加n次得到的结果，或者对第二因子乘以系数n得到的结果，n为正整数；如果第一结果对应的像素数量大于或者等于第一区域的垂直像素数量，或者第二结果对应的像素数量大于或者等于第一区域的水平像素数量，将第一结果对应的像素数量和第二结果对应的像素数量作为目标分辨率。关于第二方面及第二方面的各实现方式的实现原理和技术效果，参见上述第一方面的描述，在此不再赘述。第三方面，本申请提供一种投屏系统，包括第一电子设备和第二电子设备，第一电子设备执行第一方面的技术方案中任意一种方法，第二电子设备第二方面的技术方案中任意一种方法。第四方面，本申请提供一种装置，该装置包含在电子设备中，该装置具有实现上述第一方面及上述第一方面的可能实现方式中电子设备行为的功能，或者实现上述第二方面及上述第二方面的可能实现方式中电子设备行为的功能。功能可以通过硬件实现，也可以通过硬件执行相应的软件实现。硬件或软件包括一个或多个与上述功能相对应的模块或单元。例如，接收模块或单元、处理模块或单元等。第五方面，本申请提供一种电子设备，电子设备包括：处理器、存储器和接口；处理器、存储器和接口相互配合，使得电子设备执行第一方面的技术方案中任意一种方法，或者，执行第二方面的技术方案中任意一种方法。第六方面，本申请提供一种芯片，包括处理器。处理器用于读取并执行存储器中存储的计算机程序，以执行第一方面及其任意可能的实现方式中的方法，或者，执行第二方面及其任意可能的实现方式中的方法。可选地，芯片还包括存储器，存储器与处理器通过电路或电线连接。进一步可选地，芯片还包括通信接口。第七方面，本申请提供一种计算机可读存储介质，计算机可读存储介质中存储了计算机程序，当计算机程序被处理器执行时，使得该处理器执行第一方面的技术方案中任意一种方法，或者执行第二方面的技术方案中任意一种方法。第八方面，本申请提供一种计算机程序产品，计算机程序产品包括：计算机程序代码，当计算机程序代码在电子设备上运行时，使得该电子设备执行第一方面的技术方案中任意一种方法，或者，执行第二方面的技术方案中任意一种方法。附图说明图1是是本申请实施例提供的一例手机投屏至平板电脑的对比显示示意图；图2是本申请实施例提供的一例电子设备的结构示意图；图3是本申请实施例提供的一例电子设备的软件结构框图；图4是本申请实施例提供的一例手机的桌面界面示意图；图5是本申请实施例提供的一例手机助手APP的打开界面示意图；图6中的图是本申请实施例提供的一例手机助手APP的连接界面示意图；图6中的图是本申请实施例提供的一例平板电脑的连接界面示意图；图7是本申请实施例提供的一例手机无线投屏界面的示意图；图8是本申请实施例提供的一例手机和平板电脑的系统架构示意图；图9是本申请实施例提供的一例手机与平板电脑传输数据过程中，手机中各模块与平板电脑中各模块之间进行数据交互的过程示意图；图10是本申请实施例提供的一例手机与平板电脑的分辨率指示示意图；图11是本申请实施例提供的一例手机与平板电脑建立连接过程中，手机中各模块与平板电脑中各模块之间进行数据交互的过程示意图；图12是本申请实施例提供的一例投屏方法的流程示意图；图13是本申请实施例提供的一例手机助手APP的断开连接界面示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行描述。其中，在本申请实施例的描述中，除非另有说明，“/”表示或的意思，例如，A/B可以表示A或B；本文中的“和/或”仅仅是一种描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。另外，在本申请实施例的描述中，“多个”是指两个或多于两个。以下，术语“第一”、“第二”、“第三”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”、“第三”的特征可以明示或者隐含地包括一个或者更多个该特征。本申请实施例中的“投屏”是指，将一个电子设备上显示界面的数据传输至另一电子设备上，以使另一个电子设备显示相同的显示界面。为了便于理解，将上述的“另一电子设备”称为投屏设备。本申请实施例可以实现手机投屏至平板电脑、平板电脑投屏至个人计算机、手机投屏至PC等过程，下面以电子设备为手机、投屏设备为平板电脑为例进行说明。当前，在手机向平板电脑投屏的过程中，通常需要手机先根据投屏分辨率对待投屏数据进行编码，再将编码数据发送至平板电脑，平板电脑对编码数据解码后即可显示对应界面。在一些同源投屏场景中，例如镜像投屏场景，如图1所示，手机将显示界面投屏显示在平板电脑的部分区域，该投屏窗口内的显示界面和手机的显示界面相同。在此场景下，手机对待投屏数据编码之前，通常会先与平板电脑协商投屏分辨率，然后按照该投屏分辨率对待投屏数据进行编码。传统技术中，此投屏分辨率通常是按照手机的分辨率进行协商的，例如选择手机显示屏的分辨率作为投屏分辨率，那么这就有可能出现两种情况：一种是手机显示屏的分辨率大于上述投屏窗口的分辨率的情况下，平板电脑对编码数据解码后，若要将一个较大分辨率的图像显示在一个较小分辨率的窗口内，则需要对图像进行压缩，可能会导致图像失真；并且，手机本并不需要编码较大分辨率的图像，实际却编码了较大分辨率的图像，这也会造成手机侧编码性能的浪费。另一种是手机显示屏的分辨率小于上述投屏窗口的分辨率的情况下，平板电脑对编码数据解码后，若要将一个较小分辨率的图像显示在一个较大分辨率的窗口内，则可能会导致图像拉伸，即这两种情况都会影响投屏效果。更严重者，若编码数据的分辨率过大，而平板电脑的解码性能较低，则还有可能会造成平板电脑侧解码失败，导致投屏失败。有鉴于此，本申请实施例提供一种投屏方法，平板电脑可以根据自身的分辨率和手机的分辨率，计算投屏窗口所支持的分辨率以及编码待投屏数据时对应的投屏分辨率，那么针对不同类型的平板电脑或手机，平板电脑都可计算出适应于当前场景的投屏分辨率，从而提升投屏效果，以及提高投屏成功率。需要说明的是，本申请实施例提供的投屏方法可以应用于平板电脑、PC、超级移动个人计算机、车载设备、上网本、个人数字助理等具有投屏功能电子设备上，本申请实施例对电子设备的具体类型不作任何限制。示例性的，图2是本申请实施例提供的一例电子设备100的结构示意图。以电子设备100是手机为例，电子设备100可以包括处理器110，外部存储器接口120，内部存储器121，通用串行总线接口130，充电管理模块140，电源管理模块141，电池142，天线1，天线2，移动通信模块150，无线通信模块160，音频模块170，扬声器170A，受话器170B，麦克风170C，耳机接口170D，传感器模块180，按键190，马达191，指示器192，摄像头193，显示屏194，以及用户标识模块卡接口195等。其中传感器模块180可以包括压力传感器180A，陀螺仪传感器180B，气压传感器180C，磁传感器180D，加速度传感器180E，距离传感器180F，接近光传感器180G，指纹传感器180H，温度传感器180J，触摸传感器180K，环境光传感器180L，骨传导传感器180M等。处理器110可以包括一个或多个处理单元，例如：处理器110可以包括应用处理器，调制解调处理器，图形处理器，图像信号处理器，控制器，存储器，视频编解码器，数字信号处理器，基带处理器，和/或神经网络处理器等。其中，不同的处理单元可以是独立的器件，也可以集成在一个或多个处理器中。其中，控制器可以是电子设备100的神经中枢和指挥中心。控制器可以根据指令操作码和时序信号，产生操作控制信号，完成取指令和执行指令的控制。处理器110中还可以设置存储器，用于存储指令和数据。在一些实施例中，处理器110中的存储器为高速缓冲存储器。该存储器可以保存处理器110刚用过或循环使用的指令或数据。如果处理器110需要再次使用该指令或数据，可从存储器中直接调用。避免了重复存取，减少了处理器110的等待时间，因而提高了系统的效率。在一些实施例中，处理器110可以包括一个或多个接口。接口可以包括集成电路接口，集成电路内置音频接口，脉冲编码调制接口，通用异步收发传输器接口，移动产业处理器接口，通用输入输出接口，用户标识模块接口，和/或通用串行总线接口等。充电管理模块140用于从充电器接收充电输入。其中，充电器可以是无线充电器，也可以是有线充电器。在一些有线充电的实施例中，充电管理模块140可以通过USB接口130接收有线充电器的充电输入。在一些无线充电的实施例中，充电管理模块140可以通过电子设备100的无线充电线圈接收无线充电输入。充电管理模块140为电池142充电的同时，还可以通过电源管理模块141为电子设备供电。电源管理模块141用于连接电池142，充电管理模块140与处理器110。电源管理模块141接收电池142和/或充电管理模块140的输入，为处理器110，内部存储器121，外部存储器，显示屏194，摄像头193，和无线通信模块160等供电。电源管理模块141还可以用于监测电池容量，电池循环次数，电池健康状态等参数。在其他一些实施例中，电源管理模块141也可以设置于处理器110中。在另一些实施例中，电源管理模块141和充电管理模块140也可以设置于同一个器件中。电子设备100的无线通信功能可以通过天线1，天线2，移动通信模块150，无线通信模块160，调制解调处理器以及基带处理器等实现。无线通信模块160可以提供应用在电子设备100上的包括无线局域网网络)，蓝牙，全球导航卫星系统，调频，近距离无线通信技术，红外技术等无线通信的解决方案。无线通信模块160可以是集成至少一个通信处理模块的一个或多个器件。无线通信模块160经由天线2接收电磁波，将电磁波信号调频以及滤波处理，将处理后的信号发送到处理器110。无线通信模块160还可以从处理器110接收待发送的信号，对其进行调频，放大，经天线2转为电磁波辐射出去。电子设备100通过GPU，显示屏194，以及应用处理器等实现显示功能。GPU为图像处理的微处理器，连接显示屏194和应用处理器。GPU用于执行数学和几何计算，用于图形渲染。处理器110可包括一个或多个GPU，其执行程序指令以生成或改变显示信息。显示屏194用于显示图像，视频等。显示屏194包括显示面板。显示面板可以采用液晶显示屏，有机发光二极管，有源矩阵有机发光二极体或主动矩阵有机发光二极体，柔性发光二极管，Miniled，MicroLed，Micro-oLed，量子点发光二极管等。在一些实施例中，电子设备100可以包括1个或N个显示屏194，N为大于1的正整数。电子设备100可以通过ISP，摄像头193，视频编解码器，GPU，显示屏194以及应用处理器等实现拍摄功能。视频编解码器用于对数字视频压缩或解压缩。电子设备100可以支持一种或多种视频编解码器。这样，电子设备100可以播放或录制多种编码格式的视频，例如：动态图像专家组1，MPEG2，MPEG3，MPEG4等。内部存储器121可以用于存储计算机可执行程序代码，可执行程序代码包括指令。处理器110通过运行存储在内部存储器121的指令，从而执行电子设备100的各种功能应用以及数据处理。内部存储器121可以包括存储程序区和存储数据区。其中，存储程序区可存储操作系统，至少一个功能所需的应用程序等。存储数据区可存储电子设备100使用过程中所创建的数据等。此外，内部存储器121可以包括高速随机存取存储器，还可以包括非易失性存储器，例如至少一个磁盘存储器件，闪存器件，通用闪存存储器等。电子设备100可以通过音频模块170，扬声器170A，受话器170B，麦克风170C，耳机接口170D，以及应用处理器等实现音频功能。例如音乐播放，录音等。应理解，除了图2中列举的各种部件或者模块之外，本申请实施例对电子设备100的结构不做具体限定。在本申请另一些实施例中，电子设备100还可以包括比图示更多或更少的部件，或者组合某些部件，或者拆分某些部件，或者不同的部件布置。图示的部件可以以硬件，软件或软件和硬件的组合实现。电子设备100的软件系统可以采用分层架构，事件驱动架构，微核架构，微服务架构，或云架构。本申请实施例以分层架构的Android系统为例，示例性说明电子设备100的软件结构。图3是本申请实施例的电子设备100的软件结构框图。以电子设备100是手机为例，分层架构将软件分成若干个层，每一层都有清晰的角色和分工。层与层之间通过软件接口通信。在一些实施例中，将Android系统分为四层，从上至下分别为应用程序层，应用程序框架层，安卓运行时和系统库，以及内核层。应用程序层可以包括一系列应用程序包。如图3所示，应用程序包可以包括相机，图库，日历，通话，地图，导航，WLAN，蓝牙，音乐，视频，短信息、手机助手等应用程序。应用程序框架层为应用程序层的应用程序提供应用编程接口和编程框架。应用程序框架层包括一些预先定义的函数。如图3所示，应用程序框架层可以包括窗口管理器，内容提供器，视图系统，电话管理器，资源管理器，通知管理器等。窗口管理器用于管理窗口程序。窗口管理器可以获取显示屏大小，判断是否有状态栏，锁定屏幕，截取屏幕等。内容提供器用来存放和获取数据，并使这些数据可以被应用程序访问。数据可以包括视频，图像，音频，拨打和接听的电话，浏览历史和书签，电话簿等。视图系统包括可视控件，例如显示文字的控件，显示图片的控件等。视图系统可用于构建应用程序。显示界面可以由一个或多个视图组成的。例如，包括短信通知图标的显示界面，可以包括显示文字的视图以及显示图片的视图。电话管理器用于提供电子设备100的通信功能。例如通话状态的管理。资源管理器为应用程序提供各种资源，比如本地化字符串，图标，图片，布局文件，视频文件等等。通知管理器使应用程序可以在状态栏中显示通知信息，可以用于传达告知类型的消息，可以短暂停留后自动消失，无需用户交互。比如通知管理器被用于告知下载完成，消息提醒等。通知管理器还可以是以图表或者滚动条文本形式出现在系统顶部状态栏的通知，例如后台运行的应用程序的通知，还可以是以对话窗口形式出现在屏幕上的通知。例如在状态栏提示文本信息，发出提示音，电子设备振动，指示灯闪烁等。Android runtime包括核心库和虚拟机。Android runtime负责安卓系统的调度和管理。核心库包含两部分：一部分是java语言需要调用的功能函数，另一部分是安卓的核心库。应用程序层和应用程序框架层运行在虚拟机中。虚拟机将应用程序层和应用程序框架层的java文件执行为二进制文件。虚拟机用于执行对象生命周期的管理，堆栈管理，线程管理，安全和异常的管理，以及垃圾回收等功能。系统库可以包括多个功能模块。例如：表面管理器，媒体库，三维图形处理库，2D图形引擎等。表面管理器用于对显示子系统进行管理，并且为多个应用程序提供了2D和3D图层的融合。媒体库支持多种常用的音频，视频格式回放和录制，以及静态图像文件等。媒体库可以支持多种音视频编码格式，例如:MPEG4，H.264，MP3，AAC，AMR，JPG，PNG等。三维图形处理库用于实现三维图形绘图，图像渲染，合成，和图层处理等。2D图形引擎是2D绘图的绘图引擎。内核层是硬件和软件之间的层。内核层至少包含显示驱动，摄像头驱动，音频驱动，传感器驱动等。应理解，除了图3中列举的各个层以及各层包括的模块之外，本申请实施例对电子设备100的软件架构不做具体限定。在本申请另一些实施例中，电子设备100还可以包括比图示更多或更少的层，或者组合某些层，或者拆分某些层，或者不同的模块布置。首先介绍一下手机向平板电脑投屏的过程，在一种可实现的方式中，手机上可以安装一个供用户执行投屏操作的应用程序，例如可以为手机助手APP，如图4所示，该手机助手APP可以以一个桌面图标形式展现在手机的桌面上。用户通过点击该桌面图标，可将手机助手APP启动，该手机助手APP的启动界面可以参见图4。在图4所示的界面中，手机助手APP的启动界面上包括“立即连接”控件、以及手机支持的投屏模式介绍，例如手机当前支持的是镜像模式。在该界面上，用户点击“立即连接”控件后，跳转至如图5所示的显示界面，手机开始搜索附近可用的投屏设备，这些可用的投屏设备可与手机进行短距通信，比如蓝牙通信。假设当前可用的投屏设备有设备1和设备2，则手机可将设备1和设备2的基本信息显示在图5所示的可用设备列表中。然后，用户可点击选中可用设备列表中的一个设备，手机上显示如图6中的图所示的连接界面；同时，手机向设备2发送连接请求，设备2上显示如图6中的图所示的确认界面。用户在图6中的图所示的界面上点击了“同意”控件后，即可完成手机与平板电脑的投屏连接过程，进而手机可将当前的显示界面的数据发送至平板电脑，平板电脑上便显示出手机当前的显示界面。其中，在手机与平板电脑建立投屏连接时，手机当前显示的界面仍是手机助手APP的界面，那么平板电脑上也显示出该界面；当手机上打开了视频播放界面后，平板电脑上同时也显示出该视频播放界面。示例性地，手机投屏至平板电脑的效果示意图可以参见上述图1所示。可以理解，平板电脑中也可以安装一个供用户执行投屏操作的APP，例如平板电脑APP，用户可以通过该APP将平板电脑投屏至PC等电子设备，具体的操作步骤与手机投屏的步骤类似，在此不再赘述。在另一种可实现的方式中，手机自身可以具有无线投屏功能，示例性地，如图7所示，用户可通过手机的下拉系统菜单点击“无线投屏”控件，手机响应于用户的点击操作，开始搜索附近可用的投屏设备，并在手机投屏界面的空白区域显示可用设备列表。当搜索到可用的投屏设备后，手机可将设备1和设备2的基本信息显示在可用设备列表中。然后，用户点击选中可用设备列表中的一个设备，手机向设备2发送连接请求，待用户在平板电脑上确认连接后，即可完成手机与平板电脑的投屏连接过程。基于上述用户执行投屏操作的过程，下面结合手机和平板电脑的系统架构以及系统架构中各模块之间的数据交互过程对本申请实施例提供的投屏方法进行描述。图8为手机和平板电脑的系统架构示意图，图9为本申请实施例提供的投屏方法中，手机中各模块与平板电脑中各模块之间进行数据交互的过程示意图。如图8所示，手机至少包括：应用程序层的手机助手APP，能力层的第一投屏模块、第一传输模块和第一基础能力模块，框架层的多媒体框架，内核层的第一蓝牙驱动、第一Wi-Fi驱动和第一USB驱动，硬件层的CPU、显卡、编码器、第一蓝牙芯片和第一Wi-Fi芯片。平板电脑至少包括：应用程序层的平板助手APP，能力层的第二传输模块、第二投屏模块和第二基础能力模块，内核层的第二蓝牙驱动、第二Wi-Fi驱动、第二USB驱动和显示驱动，硬件层的显卡、解码器、第二蓝牙芯片、第二Wi-Fi芯片和显示屏。其中，手机助手APP和平板助手APP可以用于与用户交互，用户可以在该APP上执行各种操作。可选地，手机助手APP和平板电脑APP还可以包括业务管理模块和业务设置模块，用于对APP进行管理和设置。手机的第一投屏模块和平板电脑的第二投屏模块可以协商投屏分辨率。手机的第一投屏模块还可以包括抓屏模块、编码逻辑模块和虚拟化服务模块；抓屏模块可以用于抓取手机上显示界面的图像数据，编码逻辑模块可以调用编码器对该图像数据进行编码，第一传输模块可以用于将编码数据发送至平板电脑的第二传输模块。第一基础能力模块可以为第一投屏模块在实现各种功能时提供对应的能力。第一蓝牙驱动可以调用第一蓝牙芯片的能力、第一Wi-Fi驱动可以调用第一Wi-Fi芯片的能力，使手机与平板电脑建立蓝牙连接或Wi-Fi连接。平板电脑的第二投屏模块还可以包括解码逻辑模块、显示模块和虚拟化服务模块；解码逻辑模块可以调用解码器对接收到的编码数据进行解码，显示模块可以调用显示驱动，将解码后的图像数据显示在显示屏上；虚拟化服务模块可以提供服务指令，例如指示平板助手APP计算最优投屏分辨率。需要说明的是，平板电脑上其他模块的功能与手机中对应模块的功能类似，在此不再赘述。在上述图8所示的系统架构的基础上，如图9所示，本申请实施例提供的投屏方法的过程可以包括：S1，手机与平板电脑建立连接。其中，手机与平板电脑建立连接的过程可参见下述图11所示实施例的描述。S2，平板助手APP向第二投屏模块发送建立连接成功的消息。S3，第二投屏模块向平板助手APP发送第一消息。其中，S2中平板助手APP向第二投屏模块发送建立连接成功的消息，即向第二投屏模块反馈自身已做好数据准备，可执行下一步操作。那么，第二投屏模块便可以向平板助手APP发送第一消息，以指示平板助手APP执行下一步操作。可选地，平板助手APP可以向第二投屏模块中的虚拟化服务模块发送建立连接成功的消息，相应的，虚拟化服务模块向平板助手APP发送第一消息。S4，平板助手APP向第二投屏模块发送第二消息，第二消息用于请求获取手机显示屏的分辨率。S5，第二投屏模块向手机的第一投屏模块发送第二消息。可选地，上述手机中各模块之间所发送的消息可以为进程间通信消息。S6，手机的第一投屏模块从显卡中获取手机显示屏的分辨率。可选地，手机的第一投屏模块还可以事先将显示屏分辨率存储至一个数据文件，然后从该数据文件中获取显示屏分辨率。S7，第一投屏模块向平板电脑的第二投屏模块发送手机显示屏的分辨率。S8，第二投屏模块向平板助手APP发送手机显示屏的分辨率。S9，平板助手APP从显卡中获取平板电脑显示屏的分辨率。S10，平板助手APP根据手机显示屏的分辨率和平板电脑显示屏的分辨率，计算最优投屏分辨率。可以理解，上述投屏分辨率可以为一帧图像的分辨率，也即一帧图像的像素点数量。在一种可实现的方式中，根据手机显示屏的分辨率和平板电脑显示屏的分辨率，计算最优投屏分辨率的过程可以为：如图10所示，假设手机显示屏的分辨率为高×宽＝A×B，平板电脑显示屏的分辨率为高×宽＝C×D，平板电脑的显示屏上状态栏的高度为statusHeight。考虑到平板电脑在显示投屏窗口时，一般不会占用状态栏的空间，则投屏窗口的最大高度maxHeight＝C-statusHeight。对于投屏窗口，通常其上下端具有导航区，假设上端导航区的高度为LabelLayout，下端导航区的高度为BottomView，考虑到投屏窗口在显示投屏界面时，一般不会占用上下端导航区的空间，则投屏窗口中实际可用的投屏区域的最大高度winHeight＝maxHeight-LabelLayout-BottomView。因在镜像投屏场景中，平板电脑的投屏窗口的显示界面和手机的显示界面相同，那么为使在投屏窗口上显示出与手机显示界面相同的显示效果，则投屏窗口中实际可用的投屏区域的宽高比应与手机显示屏的宽高比相同或相近，即因此，此处可以根据手机显示屏的分辨率与投屏区域的最大高度，计算出实际可用的投屏区域的最大宽度/＞此处需要说明的是，若得到的winWidth不是整数，则通常是向下取整。在所得到的winHeight和winWidth的基础上，开始计算最优投屏分辨率：首先求得手机显示屏的分辨率高和宽的最大公约数，即A和B的最大公约数X，根据该最大公约数X求得两个因子：maxFactor＝A/X，minFactor＝B/X。然后对maxFactor进行循环累加得到videoHeight，即videoHeight＝maxFactor+maxFactor+……+maxFactor；对minFactor进行循环累加得到videoWidth，即videoWidth＝minFactor+minFactor+……+minFactor。需要说明的是，对maxFactor进行循环累加的累加次数需和对minFactor进行循环累加的累加次数相同。在累加的过程中，在一个可实现的方式中，可以将上述得到的winWidth作为下限阈值，当累加到videoWidth大于winWidth时，则将此时的videoWidth和对应累加次数的videoHeight作为最优投屏分辨率的宽和高。在另一个可实现的方式中，可以将上述得到的winHeight作为下限阈值，当累加到videoHeight大于或者等于winHeight时，则将此时的videoHeight和对应累加次数的videoWidth作为最优投屏分辨率的宽和高。可以理解，因本步骤得到的最优投屏分辨率是基于手机显示屏的分辨率和平板电脑显示屏的分辨率来计算的，那么对于不同的手机和平板电脑，所对应的最优投屏分辨率也不同，且可以较好的适应于当前使用的手机和平板电脑。还可以理解，所得到的最优投屏分辨率通常是不大于手机显示屏的分辨率，那么手机在对待投屏数据编码时，采用最优投屏分辨率进行编码还可以减少编码数据量，提高编码效率，以提高传输性能。对于上述计算过程，需要说明的是，若上述设置的下限阈值过大，则对待投屏数据编码时，所得到的编码数据的分辨率也会过大，超出了实际可用的投屏区域的尺寸，可能会导致投屏效果较差。若上述下限阈值设置的过小，则对待投屏数据编码时，所得到的编码数据的分辨率也会过小，不足以填充实际可用的投屏区域，将会导致图像拉伸、模糊的现象。因此，采用本申请实施例提供的计算方法，可使编码数据的分辨率适应于实际可用的投屏区域，提升显示效果。示例性地，对于上述计算过程，下面以一个例子进行说明：假设手机显示屏的分辨率为A×B＝2340×1080，平板电脑显示屏的分辨率C×D＝1600×2560，平板电脑显示屏上状态栏的高度为statusHeight＝60，投屏窗口上端导航区的高度为LabelLayout＝60，下端导航区的高度为BottomView＝40。那么，计算得到maxHeight＝C-statusHeight＝1600-60＝1540。winHeight＝maxHeight-LabelLayout-BottomView＝1540-60-40＝1440。向下取整winWidth＝664。即实际可用的投屏区域大小为1440×664。然后求得A和B的最大公约数X＝180，则maxFactor＝A/X＝13，minFactor＝B/X＝6。将winWidth作为下限阈值，即664为下限阈值，videoWidth＝minFactor+minFactor+……+minFactor＝6+6+6+……+6，当累加到videoWidth第一次大于664时，累加了112次，videoWidth＝672，对应的videoHeight＝maxFactor×112＝13×112＝1456。也即求得的最优投屏分辨率为1456×672，则之后手机会采用该分辨率对待投屏数据进行编码。S11，平板助手APP向第二投屏模块发送最优投屏分辨率。S12，第二投屏模块向手机的第一投屏模块发送最优投屏分辨率。可选地，第二投屏模块可以向第一投屏模块中的虚拟化服务模块发送最优投屏分辨率，然后虚拟化服务模块存储该最优投屏分辨率。S13，第一投屏模块根据最优投屏分辨率设置编码器参数。可选地，在上述虚拟化服务模块存储最优编码帧率的情况下，可由第一投屏模块中的编码逻辑模块来设置编码器参数，该过程可以为：虚拟化服务模块初始化编码逻辑模块，并向编码逻辑模块发送最优投屏分辨率，编码逻辑模块根据该最优投屏分辨率设置编码器参数。也即是说，通过设置编码器参数，可以使编码器在编码时按照该最优投屏分辨率进行编码。在手机对编码器参数进行设置的同时，平板电脑也需要对解码器进行设置，具体为：S14，第二投屏模块初始化解码器。可选地，可由第二投屏模块中的解码逻辑模块初始化解码器。接下来，手机便可以获取当前显示界面的图像数据以进行投屏，该过程可以包括：S15，第一投屏模块获取图像数据。可选地，可由第一投屏模块中的抓屏模块来获取图像数据，例如抓屏模块通过API接口从显卡中获取图像数据。其中，显卡中可以存储有一个图像队列，该图像队列包括需要显示在手机显示屏上的图像数据，这些图像数据可以是由GPU对需要显示在手机显示屏上的数据进行绘制渲染后送显的图像数据。S16，第一投屏模块调用编码器，根据最优投屏分辨率对获取到的图像数据进行编码。其中，第一投屏模块可以通过第一基础能力模块中的视频编码能力来调用编码器，以对图像数据进行编码。可选地，可由上述抓屏模块将图像数据发送至第一投屏模块中的编码逻辑模块，再由编码逻辑模块调用编码器，对获取到的图像数据进行编码。S17，第一投屏模块通过第一传输模块将编码后的图像数据发送至平板电脑的第二传输模块。其中，因S1中手机与平板电脑已建立了连接，则第一传输模块可以将图像数据沿该连接对应的数据通道发送至平板电脑的第二传输模块。S18，平板电脑的第二传输模块将编码后的图像数据后发送至第二投屏模块。S19，第二投屏模块调用解码器，对该图像数据进行解码。其中，第二投屏模块可以通过第二基础能力模块中的视频解码能力来调用解码器，以对图像数据进行解码。可选地，第二传输模块可将编码后的图像数据发送至第二投屏模块中的解码逻辑模块，由解码逻辑模块调用解码器，对图像数据进行解码。S20，第二投屏模块将解码后的图像数据发送至显示驱动，进而交由显示屏进行显示图像。可选地，可由上述解码逻辑模块将解码后的图像数据发送至显示模块，再由显示模块将解码后的图像数据发送至显示驱动。可以理解，平板电脑是在上述所确定的投屏窗口内来显示图像的，这样即在适应的投屏窗口内显示了适应大小的图像。在投屏成功之后，第二投屏模块还可将投屏成功的消息发送至第二传输模块，继而由第二传输模块将该消息经由手机的第一传输模块发送至手机的第一投屏模块，再由第一投屏模块将该消息发送至手机助手APP。可选地，手机助手APP还可以将投屏成功的消息进行显示，以提示用户当前投屏成功。需要说明的是，本申请实施例对编码器进行编码的格式、以及解码器进行解码的格式不做限制，只要能实现编码解码并显示的过程即可。例如可以是将NV12格式的图像数据编码为H264格式的图像数据，或者是编码为其他数据格式。还需说明的是，因上述平板电脑是根据手机的分辨率计算的最优投屏分辨率，那么对于手机屏幕状态可发生变化的手机来说，例如折叠屏手机，其折叠态时手机显示屏的分辨率与展开态时手机显示屏的分辨率不同，因此，若手机检测到屏幕状态发生变化，则可以向平板电脑传输最新的显示屏分辨率，以使平板电脑根据最新的显示屏分辨率再次计算最优投屏分辨率。由此，平板电脑可以根据手机显示屏的状态动态调整最优投屏分辨率，进一步提升了投屏效果。还需说明的是，上述方法还可适应于其他投屏场景，例如视频通话的投屏场景，平板电脑可根据手机侧视频区域的尺寸计算最优投屏分辨率，以完成视频通话的投屏。上述实施例中，手机在向平板进行投屏时，平板电脑可以根据自身的分辨率和手机的分辨率，计算投屏窗口所支持的分辨率以及编码待投屏数据时对应的最优投屏分辨率，那么针对不同类型的平板电脑或手机，平板电脑都可计算出适应于当前场景的最优投屏分辨率，从而提升投屏效果，以及提高投屏成功率。对于上述S1中手机与平板电脑建立连接的过程，如图11所示，手机中各模块与平板电脑中各模块之间进行数据交互的过程可以包括：S30，用户点击手机助手APP中的“立即连接”控件。S31，手机助手APP向第一投屏模块发送指示搜索投屏设备的消息。其中，手机助手APP接收到用户输入的“立即连接”操作后，可以向第一投屏模块发送一个IPC消息，可选地，该IPC消息可以携带搜索指示指令，用于指示第一投屏模块调用第一蓝牙芯片的能力搜索发现附近可用的投屏设备。S32，第一投屏模块调用第一蓝牙芯片的能力搜索发现附近可用的投屏设备。此步骤中，第一投屏模块调用第一蓝牙芯片的能力，也即是利用第一蓝牙芯片搜索可用的投屏设备的蓝牙信号。S33，可用的投屏设备的蓝牙芯片接收到手机的搜索信号，并将搜索信号发送至第二投屏模块。其中，图11中仅示出平板电脑这一个可用的投屏设备，对应的蓝牙芯片即第二蓝牙芯片，其余可用的投屏设备的原理类似，图11中未示出。S34，平板电脑的第二投屏模块向手机的第一投屏模块反馈自身的基本信息。其中，设备的基本信息包括设备标识，比如设备名称、媒体存取控制地址等，第二投屏模块可以存储有设备的基本信息。S35，手机的第一投屏模块将接收到的投屏设备的基本信息发送至手机助手APP。S36，手机助手APP将这些可用的投屏设备的基本信息展示在可用设备列表中。S37，用户选中可用设备列表中的设备2。S38，手机助手APP接收到用户的选中操作，向第一投屏模块发送指示建立连接的消息。其中，该消息也可以为IPC消息，用于指示第一投屏模块调用第一蓝牙芯片与平板电脑建立蓝牙连接；可选地，该IPC消息可以携带平板电脑的标识。S39，第一投屏模块调用第一蓝牙芯片的能力与平板电脑的第二蓝牙芯片进行蓝牙连接。S40，第一蓝牙芯片与第二蓝牙芯片建立蓝牙连接。S41，在手机与平板电脑建立了蓝牙连接后，第一蓝牙芯片向第一投屏模块发送建立蓝牙连接成功的消息。S42，第一投屏模块生成SSID和密码。S43，第一投屏模块调用第一Wi-Fi芯片建立一个SoftAP。S44，第一Wi-Fi芯片创建SoftAP。其中，该SoftAP对应有上述创建的SSID和密码。S45，第一投屏模块通过建立的蓝牙连接的通道将SSID和密码发送至平板电脑的第二投屏模块。S46，第二投屏模块调用第二Wi-Fi芯片根据接收到的SSID和密码与手机建立Wi-Fi P2P连接。同时，手机和平板电脑之间还建立起一个socket数据通道，以供后续手机和平板电脑相互传输数据。需要说明的是，上述手机和平板电脑之间所建立连接的类型不限于蓝牙连接和Wi-Fi P2P连接，也可以是其他类型的连接方式，只要能实现两者之间传输数据即可。S47，第一Wi-Fi芯片向第一投屏模块发送建立连接成功的消息，第二Wi-Fi芯片向第二投屏模块发送建立连接成功的消息。S48，第一投屏模块向手机助手APP发送建立连接成功的消息，第二投屏模块向平板助手APP发送建立连接成功的消息。可选地，上述S30至S47中手机与平板电脑建立连接的过程，可以是由第一投屏模块中的第一连接发现模块与第二投屏模块中的第二连接发现模块进行交互所完成的，第一连接发现模块和第二连接发现模块在上述图8中未示出。由此，手机和平板电脑即完成了连接过程。下面再通过一个实施例对本申请涉及的投屏方法进行说明。下面的实施例可以和上述实施例相互结合，对于相同或相似的概念或过程在下述实施例中不再赘述。图12为本申请实施例提供的投屏方法的一种流程示意图，该方法可以应用于如图8所示的手机和平板电脑上。如图12所示，本申请实施例提供的投屏方法的过程可以包括：S101，手机接收用户输入的投屏操作。其中，用户所输入的投屏操作可以为通过手机上的手机助手APP输入的，例如通过点击上述图4中的“立即连接”控件，或者通过点击上述图7中的“无线投屏”控件。需要说明的是，本申请实施例以“手机助手APP”的命名为例示出，但其他具有相同或相似功能的APP同样适用于本申请实施例，比如“手机投屏APP”、“设备互联APP”等；另外，本申请实施例以“立即连接”的命名为例示出，但其他具有相同或相似功能的命名同样适用于本申请实施例，比如“一键投屏”、“开启投屏”等。S102，手机响应于上述投屏操作，搜索并展示可用的投屏设备。其中，手机助手APP接收到用户输入的投屏操作后，第一投屏模块可以调用蓝牙芯片的能力搜索附近可用的投屏设备。在本申请实施例中，当搜索到可用的投屏设备后，第一投屏模块可以获取到投屏设备的互联网协议地址、MAC地址、通用唯一识别码、设备标识以及设备名称等信息。可选地，第一投屏模块可以将投屏设备的上述信息发送至手机助手APP，以显示给用户查看。在一些实施例中，鉴于手机显示屏显示尺寸的大小，手机助手APP可能无法将可用的投屏设备的上述信息都显示在可用设备列表上。因此，可用设备列表上可以仅显示可用的投屏设备的设备标识。若用户想要查看某一投屏设备的其它信息，则可以对设备名称进行长按操作或双击操作，手机助手APP接收到长按操作或双击操作后，可显示出该投屏设备的其他信息。在一些实施例中，手机助手APP所显示的可用设备列表中，包括了手机附近已开启蓝牙功能的所有设备，比如平板电脑、手机或穿戴设备。在另一些实施例中，手机助手APP在接收到已开启蓝牙功能的所有设备的信息后，可以筛选出支持投屏的设备以进行显示，比如穿戴设备不支持投屏，则手机助手APP在可用设备列表中不再显示穿戴设备。S103，手机接收用户对可用的投屏设备中的平板电脑的选中操作。用户通过手机助手APP所显示的可用设备列表，可以确定自己想要将手机进行投屏的设备。例如上述图5所示，可用的投屏设备有设备1和设备2，用户想要将手机投屏至设备2，则可以点击该设备名称所在的区域。手机助手APP便可以接收到用户对该平板电脑的选中操作。在一些实施例中，用户还可以通过语音输入对平板电脑的选择操作，例如，用户通过手机的麦克风语音输入“设备2”，麦克风接收到该声音信号后，可以转换为电信号并发送至手机助手APP。S104，手机响应于上述选中操作，建立与平板电脑的通信连接。S105，平板电脑获取手机显示屏的分辨率和平板电脑显示屏的分辨率。S106，平板电脑根据手机显示屏的分辨率和平板电脑显示屏的分辨率，计算最优投屏分辨率。其中，计算最优投屏分辨率的过程可以参见上述实施例的描述，在此不再赘述。S107，平板电脑向手机发送最优投屏分辨率。S108，手机采用最优投屏分辨率对显示界面的图像数据进行编码，并向平板电脑发送编码后的图像数据，以使平板电脑显示图像数据对应的图像。在一些场景中，若用户不再需要将手机投屏至平板电脑，如图13所示，可在手机助手APP的界面上点击“断开连接”控件，手机助手APP接收到断开操作后，向第一投屏模块发送断开消息，第一投屏模块调用Wi-Fi芯片的能力断开与平板电脑的Wi-Fi P2P连接。由上述描述可知，最优投屏分辨率是由平板电脑所计算得到的，在另一些实施例中，该最优投屏分辨率也可以由手机来计算得到，此过程可以包括步骤：A：手机接收用户输入的投屏操作。B：手机响应于上述投屏操作，搜索并展示可用的投屏设备。C：手机接收用户对可用的投屏设备中的平板电脑的选中操作。D：手机响应于上述选中操作，建立与平板电脑的通信连接。E：手机获取手机显示屏的分辨率和平板电脑显示屏的分辨率。F：手机根据手机显示屏的分辨率和平板电脑显示屏的分辨率，计算最优投屏分辨率。G：手机采用最优投屏分辨率对显示界面的图像数据进行编码，并向平板电脑发送编码后的图像数据，以使平板电脑显示图像数据对应的图像。此过程与上述实施例的不同之处在于，手机在确定了最优投屏分辨率后，可直接采用该最优投屏分辨率进行编码，无需再接收其他电子设备所发送的投屏分辨率，减少了传输功耗。上述投屏方法中，手机在向平板进行投屏时，平板电脑可以根据自身的分辨率和手机的分辨率，计算投屏窗口所支持的分辨率以及编码待投屏数据时对应的最优投屏分辨率，那么针对不同类型的平板电脑或手机，平板电脑都可计算出适应于当前场景的最优投屏分辨率，从而提升投屏效果，以及提高投屏成功率。上文详细介绍了本申请实施例提供的投屏方法的示例。可以理解的是，电子设备为了实现上述功能，其包含了执行各个功能相应的硬件和/或软件模块。本领域技术人员应该很容易意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，本申请能够以硬件或硬件和计算机软件的结合形式来实现。某个功能究竟以硬件还是计算机软件驱动硬件的方式来执行，取决于技术方案的特定应用和设计约束条件。本领域技术人员可以结合实施例对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。本申请实施例可以根据上述方法示例对电子设备进行功能模块的划分，例如，可以对应各个功能划分为各个功能模块，例如检测单元、处理单元、显示单元等，也可以将两个或两个以上的功能集成在一个模块中。上述集成的模块既可以采用硬件的形式实现，也可以采用软件功能模块的形式实现。需要说明的是，本申请实施例中对模块的划分是示意性的，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式。需要说明的是，上述方法实施例涉及的各步骤的所有相关内容均可以援引到对应功能模块的功能描述，在此不再赘述。本实施例提供的电子设备，用于执行上述投屏方法，因此可以达到与上述实现方法相同的效果。在采用集成的单元的情况下，电子设备还可以包括处理模块、存储模块和通信模块。其中，处理模块可以用于对电子设备的动作进行控制管理。存储模块可以用于支持电子设备执行存储程序代码和数据等。通信模块，可以用于支持电子设备与其他设备的通信。其中，处理模块可以是处理器或控制器。其可以实现或执行结合本申请公开内容所描述的各种示例性的逻辑方框，模块和电路。处理器也可以是实现计算功能的组合，例如包含一个或多个微处理器组合，数字信号处理和微处理器的组合等等。存储模块可以是存储器。通信模块具体可以为射频电路、蓝牙芯片、Wi-Fi芯片等与其他电子设备交互的设备。在一个实施例中，当处理模块为处理器，存储模块为存储器时，本实施例所涉及的电子设备可以为具有图2所示结构的设备。本申请实施例还提供了一种计算机可读存储介质，计算机可读存储介质中存储了计算机程序，当计算机程序被处理器执行时，使得处理器执行上述任一实施例的投屏方法。本申请实施例还提供了一种计算机程序产品，当该计算机程序产品在计算机上运行时，使得计算机执行上述相关步骤，以实现上述实施例中的投屏方法。另外，本申请的实施例还提供一种装置，这个装置具体可以是芯片，组件或模块，该装置可包括相连的处理器和存储器；其中，存储器用于存储计算机执行指令，当装置运行时，处理器可执行存储器存储的计算机执行指令，以使芯片执行上述各方法实施例中的投屏方法。其中，本实施例提供的电子设备、计算机可读存储介质、计算机程序产品或芯片均用于执行上文所提供的对应的方法，因此，其所能达到的有益效果可参考上文所提供的对应的方法中的有益效果，此处不再赘述。通过以上实施方式的描述，所属领域的技术人员可以了解到，为描述的方便和简洁，仅以上述各功能模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能模块完成，即将装置的内部结构划分成不同的功能模块，以完成以上描述的全部或者部分功能。在本申请所提供的几个实施例中，应该理解到，所揭露的装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，模块或单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个装置，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是一个物理单元或多个物理单元，即可以位于一个地方，或者也可以分布到多个不同地方。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个可读取存储介质中。基于这样的理解，本申请实施例的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该软件产品存储在一个存储介质中，包括若干指令用以使得一个设备或处理器执行本申请各个实施例方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上内容，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以权利要求的保护范围为准。
