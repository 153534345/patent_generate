标题title
时间同步方法、装置、电子设备和计算机可读存储介质
摘要abst
本申请实施例提出一种时间同步方法、装置、电子设备和计算机可读存储介质，涉及通信技术领域。电子设备中存储有状态信息与同步操作之间的对应关系，电子设备在与服务器保持通信连接的情况下，接收服务器发送的状态信息；其中，状态信息用于表征服务器当前的资源状态；根据对应关系确定状态信息对应的目标同步操作；通过执行目标同步操作，将电子设备的时间与服务器的时间进行同步。通过该方法进行时间同步，可以减轻对服务器的性能影响，提高服务器性能。
权利要求书clms
1.一种时间同步方法，其特征在于，应用于电子设备，所述电子设备中存储有状态信息与同步操作之间的对应关系，所述方法包括：在与服务器保持通信连接的情况下，接收所述服务器发送的状态信息；其中，所述状态信息用于表征所述服务器当前的资源状态；根据所述对应关系确定所述状态信息对应的目标同步操作；通过执行所述目标同步操作，将所述电子设备的时间与所述服务器的时间进行同步。2.根据权利要求1所述的方法，其特征在于，所述根据所述对应关系确定所述状态信息对应的目标同步操作，包括：在所述状态信息为第一状态信息的情况下，根据所述对应关系确定所述第一状态信息对应的目标同步操作为第一同步操作；所述第一状态信息表征所述服务器当前的资源状态处于资源充裕状态；在所述状态信息为第二状态信息的情况下，根据所述对应关系确定所述第二状态信息对应的目标同步操作为第二同步操作；所述第二状态信息表征所述服务器当前的资源状态处于第一资源紧张状态；在所述状态信息为第三状态信息的情况下，根据所述对应关系确定所述第三状态信息对应的目标同步操作为第三同步操作；所述第三状态信息表征所述服务器当前的资源状态处于第二资源紧张状态，且所述第二资源紧张状态的资源紧张程度比所述第一资源紧张状态的资源紧张程度高。3.根据权利要求2所述的方法，其特征在于，所述通过执行所述目标同步操作，将所述电子设备的时间与所述服务器的时间进行同步，包括：在所述目标同步操作为第一同步操作的情况下，每隔预设时间间隔获取所述服务器的时间，并根据所述服务器的时间对所述电子设备的时间进行设置，以使所述电子设备的时间与所述服务器的时间同步。4.根据权利要求2所述的方法，其特征在于，所述通过执行所述目标同步操作，将所述电子设备的时间与所述服务器的时间进行同步，包括：在所述目标同步操作为第二同步操作的情况下，获取所述服务器的当前时间，并根据所述服务器的当前时间对所述电子设备的当前时间进行设置；停止向所述服务器发送数据，以使所述电子设备与所述服务器之间的通信连接处于空置状态；通过计时线程对所述电子设备的当前时间进行更新，以使所述电子设备的时间与所述服务器的时间同步。5.根据权利要求4所述的方法，其特征在于，所述方法还包括：在所述电子设备与所述服务器之间的通信连接处于空置状态的时长达到预设时长的情况下，断开所述电子设备与所述服务器之间的通信连接。6.根据权利要求1所述的方法，其特征在于，所述通过执行所述目标同步操作，将所述电子设备的时间与所述服务器的时间进行同步，包括：在所述目标同步操作为第三同步操作的情况下，获取所述服务器的当前时间，并根据所述服务器的当前时间对所述电子设备的当前时间进行设置；断开所述电子设备与所述服务器之间的通信连接，并通过计时线程对所述电子设备的当前时间进行更新，以使所述电子设备的时间与所述服务器的时间同步。7.一种时间同步装置，其特征在于，应用于电子设备，所述电子设备中存储有状态信息与同步操作之间的对应关系，所述装置包括：接收模块，用于在与服务器保持通信连接的情况下，接收所述服务器发送的状态信息；其中，所述状态信息用于表征所述服务器当前的资源状态；确定模块，用于根据所述对应关系确定所述状态信息对应的目标同步操作；同步模块，用于通过执行所述目标同步操作，将所述电子设备的时间与所述服务器的时间进行同步。8.根据权利要求7所述的装置，其特征在于，所述确定模块，还用于在所述状态信息为第一状态信息的情况下，根据所述对应关系确定所述第一状态信息对应的目标同步操作为第一同步操作；所述第一状态信息表征所述服务器当前的资源状态处于资源充裕状态；所述确定模块，还用于在所述状态信息为第二状态信息的情况下，根据所述对应关系确定所述第二状态信息对应的目标同步操作为第二同步操作；所述第二状态信息表征所述服务器当前的资源状态处于第一资源紧张状态；所述确定模块，还用于在所述状态信息为第三状态信息的情况下，根据所述对应关系确定所述第三状态信息对应的目标同步操作为第三同步操作；所述第三状态信息表征所述服务器当前的资源状态处于第二资源紧张状态，且所述第二资源紧张状态的资源紧张程度比所述第一资源紧张状态的资源紧张程度高。9.一种电子设备，其特征在于，包括处理器和存储器，所述存储器存储有能够被所述处理器执行的计算机程序，所述处理器可执行所述计算机程序以实现权利要求1-6任一所述的方法。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1-6任一项所述的方法。
说明书desc
技术领域本申请涉及通信技术领域，具体而言，涉及一种时间同步方法、装置、电子设备和计算机可读存储介质。背景技术目前，电子设备的很多应用都带有时间显示功能，且基于业务需求，其显示的时间往往需要与服务器的时间保持一致。现有技术中，电子设备可通过频繁访问服务器以进行时间同步，但该方法往往需要占用一定资源，因此，在服务器资源紧张时，该方法会对服务器的性能造成较大影响，导致服务器的运行性能较差。发明内容有鉴于此，本申请的目的在于提供一种时间同步方法、装置、电子设备和计算机可读存储介质，以解决现有技术中存在的时间同步会对服务器的性能造成较大影响，导致服务器的运行性能较差的问题。为了实现上述目的，本申请实施例采用的技术方案如下：第一方面，本申请提供一种时间同步方法，应用于电子设备，所述电子设备中存储有状态信息与同步操作之间的对应关系，所述方法包括：在与服务器保持通信连接的情况下，接收所述服务器发送的状态信息；其中，所述状态信息用于表征所述服务器当前的资源状态；根据所述对应关系确定所述状态信息对应的目标同步操作；通过执行所述目标同步操作，将所述电子设备的时间与所述服务器的时间进行同步。在可选的实施方式中，所述根据所述对应关系确定所述状态信息对应的目标同步操作，包括：在所述状态信息为第一状态信息的情况下，根据所述对应关系确定所述第一状态信息对应的目标同步操作为第一同步操作；所述第一状态信息表征所述服务器当前的资源状态处于资源充裕状态；在所述状态信息为第二状态信息的情况下，根据所述对应关系确定所述第二状态信息对应的目标同步操作为第二同步操作；所述第二状态信息表征所述服务器当前的资源状态处于第一资源紧张状态；在所述状态信息为第三状态信息的情况下，根据所述对应关系确定所述第三状态信息对应的目标同步操作为第三同步操作；所述第三状态信息表征所述服务器当前的资源状态处于第二资源紧张状态，且所述第二资源紧张状态的资源紧张程度比所述第一资源紧张状态的资源紧张程度高。在可选的实施方式中，所述通过执行所述目标同步操作，将所述电子设备的时间与所述服务器的时间进行同步，包括：在所述目标同步操作为第一同步操作的情况下，每隔预设时间间隔获取所述服务器的时间，并根据所述服务器的时间对所述电子设备的时间进行设置，以使所述电子设备的时间与所述服务器的时间同步。在可选的实施方式中，所述通过执行所述目标同步操作，将所述电子设备的时间与所述服务器的时间进行同步，包括：在所述目标同步操作为第二同步操作的情况下，获取所述服务器的当前时间，并根据所述服务器的当前时间对所述电子设备的当前时间进行设置；停止向所述服务器发送数据，以使所述电子设备与所述服务器之间的通信连接处于空置状态；通过计时线程对所述电子设备的当前时间进行更新，以使所述电子设备的时间与所述服务器的时间同步。在可选的实施方式中，所述方法还包括：在所述电子设备与所述服务器之间的通信连接处于空置状态的时长达到预设时长的情况下，断开所述电子设备与所述服务器之间的通信连接。在可选的实施方式中，所述通过执行所述目标同步操作，将所述电子设备的时间与所述服务器的时间进行同步，包括：在所述目标同步操作为第三同步操作的情况下，获取所述服务器的当前时间，并根据所述服务器的当前时间对所述电子设备的当前时间进行设置；断开所述电子设备与所述服务器之间的通信连接，并通过计时线程对所述电子设备的当前时间进行更新，以使所述电子设备的时间与所述服务器的时间同步。第二方面，本申请提供一种时间同步装置，应用于电子设备，所述电子设备中存储有状态信息与同步操作之间的对应关系，所述装置包括：接收模块，用于在与服务器保持通信连接的情况下，接收所述服务器发送的状态信息；其中，所述状态信息用于表征所述服务器当前的资源状态；确定模块，用于根据所述对应关系确定所述状态信息对应的目标同步操作；同步模块，用于通过执行所述目标同步操作，将所述电子设备的时间与所述服务器的时间进行同步。在可选的实施方式中，所述确定模块，还用于在所述状态信息为第一状态信息的情况下，根据所述对应关系确定所述第一状态信息对应的目标同步操作为第一同步操作；所述第一状态信息表征所述服务器当前的资源状态处于资源充裕状态；所述确定模块，还用于在所述状态信息为第二状态信息的情况下，根据所述对应关系确定所述第二状态信息对应的目标同步操作为第二同步操作；所述第二状态信息表征所述服务器当前的资源状态处于第一资源紧张状态；所述确定模块，还用于在所述状态信息为第三状态信息的情况下，根据所述对应关系确定所述第三状态信息对应的目标同步操作为第三同步操作；所述第三状态信息表征所述服务器当前的资源状态处于第二资源紧张状态，且所述第二资源紧张状态的资源紧张程度比所述第一资源紧张状态的资源紧张程度高。第三方面，本申请提供一种电子设备，包括处理器和存储器，所述存储器存储有能够被所述处理器执行的计算机程序，所述处理器可执行所述计算机程序以实现前述实施方式任一所述的方法。第四方面，本申请提供一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现如前述实施方式任一项所述的方法。本申请实施例提供的时间同步方法、装置、电子设备和计算机可读存储介质，电子设备可以根据其中存储的状态信息与同步操作之间的对应关系，确定服务器发送的状态信息对应的目标同步操作，之后通过执行该同步操作，将电子设备的时间与服务器的时间进行同步，由于该状态信息表征服务器当前的资源状态，因此可以在考虑到服务器的实际资源状态的基础上，根据实际的资源状态执行相应的同步操作，通过该方法进行时间同步，可以减轻对服务器的性能影响，提高服务器性能。为使本申请的上述目的、特征和优点能更明显易懂，下文特举较佳实施例，并配合所附附图，作详细说明如下。附图说明为了更清楚地说明本申请实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本申请的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1示出了时间同步系统的方框示意图；图2示出了本申请实施例提供的电子设备的方框示意图；图3示出了本申请实施例提供的时间同步方法的一种流程示意图；图4示出了本申请实施例提供的一种时间同步装置的功能模块图。图标：10-时间同步系统；100-电子设备；101-存储器；102-处理器；103-通信模块；110-服务器；200-接收模块；210-确定模块；220-同步模块。具体实施方式下面将结合本申请实施例中附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本申请实施例的组件可以以各种不同的配置来布置和设计。因此，以下对在附图中提供的本申请的实施例的详细描述并非旨在限制要求保护的本申请的范围，而是仅仅表示本申请的选定实施例。基于本申请的实施例，本领域技术人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都属于本申请保护的范围。需要说明的是，术语“第一”和“第二”等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。目前，电子设备的很多Web前端应用都带有时间显示功能，例如浏览器等，现有技术中往往可以通过以下方式显示当前时间：1.电子设备获取客户端本地时间进行显示；2.电子设备不断调用接口频繁访问服务器以进行时间同步；3.电子设备获取服务器时间后利用前端的JavaScript线程进行计时。但是以上方式均存在相应的问题，首先，针对第一种方式，存在若客户端本地时间不准，则浏览器显示的时间也存在不准确的问题，且若实际业务需求需要电子设备显示的时间与服务器的时间一致，则第一种获取方式无法满足实际业务的需求；其次，针对第二种方式，电子设备不断调用接口频繁访问服务器需要占用一定的服务器资源，因此，在服务器资源紧张时，该方法会对服务器的性能造成较大影响，导致服务器的运行性能较低；再次，针对第三种方式，由于JavaScript线程为单线程，因此若运行时间较长，电子设备显示的时间可能存在不准确的问题。基于此，本申请实施例提供一种时间同步方法，以解决以上问题。具体地，图1为时间同步系统10的方框示意图，请参见图1，该时间同步系统10包括电子设备100以及服务器110，且该电子设备100与该服务器110通信连接。可选地，该电子设备100可以是PC端或者移动终端等设备，且该电子设备100可以与服务器110进行时间同步。在一种可能实现的方式中，电子设备100上可以设置有浏览器等前端软件，电子设备可以通过与服务器之间的时间同步，使得该浏览器显示当前时间。可选地，电子设备中还可以事先存储有状态信息与同步操作之间的对应关系。可以理解地，该状态信息表征服务器的资源状态，该同步操作指的是应当如何进行时间同步。可选地，图2为本申请实施例提供的电子设备100的方框示意图，该电子设备100包括存储器101、处理器102及通信模块103。存储器101、处理器102以及通信模块103各元件相互之间直接或间接地电性连接，以实现数据的传输或交互。例如，这些元件相互之间可通过一条或多条通讯总线或信号线实现电性连接。其中，存储器101用于存储程序或者数据。存储器101可以是，但不限于，随机存取存储器，只读存储器，可编程只读存储器，可擦除只读存储器，电可擦除只读存储器等。处理器102用于读/写存储器中存储的数据或程序，并执行相应地功能。通信模块103用于通过网络建立服务器与其它通信终端之间的通信连接，并用于通过网络收发数据。应当理解的是，图2所示的结构仅为电子设备的结构示意图，电子设备还可包括比图2中所示更多或者更少的组件，或者具有与图2所示不同的配置。图2中所示的各组件可以采用硬件、软件或其组合实现。接下来以上述电子设备100为执行主体，结合流程示意图对本申请实施例提供的时间同步方法进行示例性介绍。具体地，图3为本申请实施例提供的时间同步方法的一种流程示意图，请参见图3，该方法包括：步骤S20，在与服务器保持通信连接的情况下，接收服务器发送的状态信息；其中，状态信息用于表征服务器当前的资源状态；可选地，电子设备可以与服务器之间建立通信连接，例如浏览器与服务器之间可以建立WebSocket连接，电子设备可以在确定与服务器保持通信连接的情况下，接收服务器发送的状态信息。可选地，服务器可以实时获取其状态信息并发送至电子设备，也可以每隔预设时长获取一次状态信息并发送至电子设备。可选地，服务器可以通过轮询的方式获取该状态信息，或者通过确定接口调用次数获取该状态信息，或者通过运维监控工具获取该状态信息。此外，电子设备也可以通过一定方式主动获取与其通信连接的服务器的资源状态。可选地，该状态信息可以表征服务器当前的资源状态，例如服务器当前资源是否充裕或者是否紧张。在一种可能实现的方式中，该资源状态可以是CPU的实时使用情况。在一个示例中，若服务器为Java服务器，则可以通过Sigar模块获取该服务器的各项资源数据，如内存和CPU等的实时使用情况。在本示例中，可以事先根据业务需求设置一个判断条件，用于判断服务器的资源状态，例如，设置若CPU的使用率小于80%、内存剩余量小于1G，则确定该服务器此时资源充裕。步骤S21，根据对应关系确定状态信息对应的目标同步操作；步骤S22，通过执行目标同步操作，将电子设备的时间与服务器的时间进行同步。可选地，电子设备可以根据接收到的状态信息和事先存储的状态信息以及同步操作之间的对应关系，确定此时应当执行的目标同步操作。可以理解地，该目标同步操作指的是此时应当如何进行时间同步的操作。在本实施例中，电子设备在确定对应的目标同步操作后，可以通过执行该目标同步操作将电子设备的时间与服务器的时间进行同步。本申请实施例提供的时间同步方法，电子设备可以根据其中存储的状态信息与同步操作之间的对应关系，确定服务器发送的状态信息对应的目标同步操作，之后通过执行该同步操作，将电子设备的时间与服务器的时间进行同步，由于该状态信息表征服务器当前的资源状态，因此可以在考虑到服务器的实际资源状态的基础上，根据实际的资源状态执行相应的同步操作，通过该方法进行时间同步，可以减轻对服务器的性能影响，提高服务器性能。此外，电子设备可以在考虑到服务器的实际资源状态的基础上，根据实际的资源状态执行相应的同步操作，从而实现与服务器之间的时间同步，因此无需从客户端本地获取时间，同时能够满足实际业务的需求。可选地，从大体上而言，服务器的资源状态可以包括资源充裕状态以及资源紧张状态，细化来说，可将服务器的资源状态按照资源紧张程度进行更细的分类，具体分为几类可以根据实际应用情况进行设置，例如分为资源充裕、资源较充裕、资源较紧张、资源紧张等。在一种可能实现的方式中，可以将服务器的资源状态分为三类，即资源充裕状态、第一资源紧张状态以及第二资源紧张状态，基于此，该服务器发送的状态信息可以包括第一状态信息、第二状态信息以及第三状态信息，且这三种状态信息可以分别表征上述不同的资源紧张程度，在此情况下，上述对应关系可以包括为第一状态信息、第二状态信息以及第三状态信息分别与不同的同步操作之间的对应关系，电子设备可以根据具体的状态信息以及存储的对应关系，确定目标同步操作。具体地，上述步骤S21还可以通过如下步骤实现：在状态信息为第一状态信息的情况下，根据对应关系确定第一状态信息对应的目标同步操作为第一同步操作；其中，第一状态信息表征服务器当前的资源状态处于资源充裕状态。在本实施例中，电子设备若确定接收到的状态信息为第一状态信息，则可根据该对应关系确定第一状态信息对应的目标同步操作为第一同步操作。可以理解地，由于该第一状态信息表征服务器当前的资源状态处于资源充裕状态，因此该第一同步操作指的是服务器在资源充裕状态下应当执行的时间同步操作。可选地，该第一状态信息可以是一个标志参数，例如“idle”。在状态信息为第二状态信息的情况下，根据对应关系确定第二状态信息对应的目标同步操作为第二同步操作；其中，第二状态信息表征服务器当前的资源状态处于第一资源紧张状态。可选地，该第二状态信息可以是一个标志参数，例如“intense1”。在状态信息为第三状态信息的情况下，根据对应关系确定第三状态信息对应的目标同步操作为第三同步操作；其中，第三状态信息表征服务器当前的资源状态处于第二资源紧张状态，且第二资源紧张状态的资源紧张程度比第一资源紧张状态的资源紧张程度高。可选地，该第三状态信息可以是一个标志参数，例如“intense2”。在本实施例中，电子设备若确定接收到的状态信息为第二状态信息，则可根据该对应关系确定第二状态信息对应的目标同步操作为第二同步操作。可以理解地，由于该第二状态信息表征服务器当前的资源状态处于第一资源紧张状态，因此该第二同步操作指的是服务器在第一资源紧张状态下应当执行的时间同步操作。在本实施例中，电子设备若确定接收到的状态信息为第三状态信息，则可根据该对应关系确定第三状态信息对应的目标同步操作为第三同步操作。可以理解地，由于该第三状态信息表征服务器当前的资源状态处于第二资源紧张状态，因此该第三同步操作指的是服务器在第二资源紧张状态下应当执行的时间同步操作。在本实施例中，第二资源紧张状态的资源紧张程度比第一资源紧张状态的资源紧张程度高。例如，若该第一资源紧张状态是资源较紧张状态，则该第二资源紧张状态可以为资源紧张状态；若该第一资源紧张状态是资源紧张状态，则该第二资源紧张状态可以是资源极其紧张状态。可选地，电子设备可以在确定目标同步操作后，通过执行该目标同步操作实现电子设备与服务器之间的时间同步。在一种可能实现的方式中，若服务器当前的资源状态为资源充裕状态，则说明此时电子设备直接按照预设时间间隔从服务器中获取时间也不会影响服务器本身的性能，因此电子设备可以在目标同步操作为第一同步操作的情况下，每隔预设时间间隔获取服务器的时间，并根据服务器的时间对电子设备的时间进行设置，以使电子设备的时间与服务器的时间同步。可选地，该预设时间间隔可以根据实际应用情况进行设置，例如一分钟或者一秒钟。在本实施例中，电子设备可以在确定目标同步操作为第一同步操作的情况下，每隔预设时间间隔则获取服务器的时间，并在获得服务器的时间后，根据该服务器的时间直接对电子设备的时间进行设置。可以理解地，通过执行该第一同步操作可以使电子设备的时间与服务器的时间同步。在另一种可能实现的方式中，若服务器当前的资源状态为第一资源紧张状态，即此时资源比较紧张，则电子设备可在目标同步操作为第二同步操作的情况下，获取服务器的当前时间，并根据服务器的当前时间对电子设备的当前时间进行设置；停止向服务器发送数据，以使电子设备与服务器之间的通信连接处于空置状态；通过计时线程对电子设备的当前时间进行更新，以使电子设备的时间与服务器的时间同步。在本实施例中，由于服务器当前的资源比较紧张，因此若每隔预设时间间隔都获取一次服务器的时间，则可能会影响服务器的性能，在此情况下，电子设备可以在确定目标同步操作为第二同步操作的情况下，先获取服务器的当前时间，并根据该当前时间对电子设备的当前时间进行设置，之后控制电子设备不再向服务器发送数据，从而使得电子设备与服务器之间的通信连接处于空置状态，以保证不会加剧服务器的资源负担，此时，电子设备可以通过计时线程对电子设备的当前时间间隔进行更新，从而实现电子设备的时间与服务器的时间同步。可选地，该空置状态指的是保持电子设备与服务器之间的通信连接，但电子设备与服务器之间不再进行通信的状态。可选地，考虑到JavaScript等线程为单线程，很容易受到其他任务的影响，从而导致长时间运行后计时不准确，因此电子设备可以通过其上设置的前端软件上能够与其他线程并行运行的自主计时线程进行计时。在一种可能实现的方式中，该计时线程可以是电子设备上浏览器的Web Worker线程。可以理解地，由于该计时线程可以与其他线程并行运行，因此不会受到其他任务的影响，能够一直计时，在此基础上，通过该方式也可以实现电子设备与服务器之间准确的时间同步。可选地，在此情况下，考虑到服务器的资源状态已经比较紧张，可能短时间内服务器无法恢复至资源充裕状态，因此电子设备还可以在电子设备与服务器之间的通信连接处于空置状态的时长达到预设时长的情况下，断开电子设备与服务器之间的通信连接。在一种可能实现的方式中，服务器可以在与电子设备断开通信连接后，继续获取其资源状态，并在资源充裕的情况下，重新与电子设备建立起通信连接，以使电子设备在资源充裕的情况下通过获取服务器的当前时间进行时间同步。可选地，若电子设备与服务器之间的通信状态处于空置状态中，确定服务器的资源状态恢复为资源充裕状态，则可重新确定目标同步操作为第一同步操作。在一种可能实现的方式中，服务器可以在确定其资源状态为资源充裕状态的情况下，向电子设备发送重启连接信号，则电子设备可以在接收到该重启连接信号后，退出与服务器之间的空置状态，恢复连接，并重新获取服务器发送的状态信息。可选地，该重启连接信号可以是一个标志参数，例如“restart”。在一种可能实现的方式中，由于服务器在确定其资源状态为资源充裕状态的情况下，才向电子设备发送重启连接信号，因此电子设备可以直接在退出空置状态并恢复与服务器之间的通信连接后，确定当前的目标同步操作为第一同步操作，并通过执行该第一同步操作实现与服务器的时间同步。可以理解地，此时电子设备可以关闭计时线程。在又一种可能实现的方式中，若服务器的资源处于第二资源紧张状态，即资源极其紧张，则此时电子设备可以在目标同步操作为第三同步操作的情况下，获取服务器的当前时间，并根据服务器的当前时间对电子设备的当前时间进行设置；断开电子设备与服务器之间的通信连接，并通过计时线程对电子设备的当前时间进行更新，以使电子设备的时间与服务器的时间同步。在本实施例中，电子设备可以在目标同步操作为第三同步操作的情况下，先获取服务器的当前时间对电子设备的当前时间进行设置，之后直接断开电子设备与服务器之间的通信连接，通过计时线程对电子设备的当前时间间隔进行更新，从而实现电子设备的时间与服务器的时间同步。在一种可能实现的方式中，服务器可以在与电子设备断开通信连接后，继续获取其资源状态，并在资源充裕的情况下，重新与电子设备建立起通信连接，以使电子设备在资源充裕的情况下通过获取服务器的当前时间进行时间同步。此外，在上述实现方式之外，服务器中还可以存储有资源状态与同步操作之间的对应关系，则服务器可以直接获取其资源状态，并根据该对应关系确定当前资源状态对应的目标同步操作，之后通过向电子设备下发执行该目标同步操作的指令，以使电子设备通过执行该指令实现与服务器之间的时间同步。为了执行上述实施例及各个可能的方式中的相应步骤，下面给出一种时间同步装置的实现方式。进一步地，请参阅图4，图4为本申请实施例提供的一种时间同步装置的功能模块图。需要说明的是，本实施例所提供的时间同步装置，其基本原理及产生的技术效果和上述实施例相同，为简要描述，本实施例部分未提及之处，可参考上述的实施例中相应内容。该时间同步装置包括：接收模块200、确定模块210以及同步模块220。该接收模块200，用于在与服务器保持通信连接的情况下，接收服务器发送的状态信息；其中，状态信息用于表征服务器当前的资源状态；可以理解的，该接收模块200还可以用于执行上述步骤S20；该确定模块210，用于根据对应关系确定状态信息对应的目标同步操作；可以理解的，该确定模块210还可以用于执行上述步骤S21；该同步模块220，用于通过执行目标同步操作，将电子设备的时间与服务器的时间进行同步。可以理解的，该同步模块220还可以用于执行上述步骤S22。可选地，该确定模块210，还用于在状态信息为第一状态信息的情况下，根据对应关系确定第一状态信息对应的目标同步操作为第一同步操作；第一状态信息表征服务器当前的资源状态处于资源充裕状态；在状态信息为第二状态信息的情况下，根据对应关系确定第二状态信息对应的目标同步操作为第二同步操作；第二状态信息表征服务器当前的资源状态处于第一资源紧张状态；在状态信息为第三状态信息的情况下，根据对应关系确定第三状态信息对应的目标同步操作为第三同步操作；第三状态信息表征服务器当前的资源状态处于第二资源紧张状态，且第二资源紧张状态的资源紧张程度比第一资源紧张状态的资源紧张程度高。可选地，该同步模块220，还用于在目标同步操作为第一同步操作的情况下，每隔预设时间间隔获取服务器的时间，并根据服务器的时间对电子设备的时间进行设置，以使电子设备的时间与服务器的时间同步。可选地，该同步模块220，还用于在目标同步操作为第二同步操作的情况下，获取服务器的当前时间，并根据服务器的当前时间对电子设备的当前时间进行设置；停止向服务器发送数据，以使电子设备与服务器之间的通信连接处于空置状态；通过计时线程对电子设备的当前时间进行更新，以使电子设备的时间与服务器的时间同步。可选地，该同步模块220，还用于在电子设备与服务器之间的通信连接处于空置状态的时长达到预设时长的情况下，断开电子设备与服务器之间的通信连接。可选地，该同步模块220，还用于在目标同步操作为第三同步操作的情况下，获取服务器的当前时间，并根据服务器的当前时间对电子设备的当前时间进行设置；断开电子设备与服务器之间的通信连接，并通过计时线程对电子设备的当前时间进行更新，以使电子设备的时间与服务器的时间同步。本申请实施例提供的时间同步装置，通过接收模块在与服务器保持通信连接的情况下，接收服务器发送的状态信息；其中，状态信息用于表征服务器当前的资源状态；通过确定模块根据对应关系确定状态信息对应的目标同步操作；通过同步模块通过执行目标同步操作，将电子设备的时间与服务器的时间进行同步，因此可以在考虑到服务器的实际资源状态的基础上，根据实际的资源状态执行相应的同步操作，通过该方法进行时间同步，可以减轻对服务器的性能影响，提高服务器性能。可选地，上述模块可以软件或固件的形式存储于图2所示的存储器中或固化于该电子设备的操作系统中，并可由图2中的处理器执行。同时，执行上述模块所需的数据、程序的代码等可以存储在存储器中。本申请实施例还提供一种计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时可实现本申请实施例提供的时间同步方法。在本申请所提供的几个实施例中，应该理解到，所揭露的装置和方法，也可以通过其它的方式实现。以上所描述的装置实施例仅仅是示意性的，例如，附图中的流程图和框图显示了根据本申请的多个实施例的装置、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段或代码的一部分，所述模块、程序段或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现方式中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个连续的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行规定的功能或动作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。另外，在本申请各个实施例中的各功能模块可以集成在一起形成一个独立的部分，也可以是各个模块单独存在，也可以两个或两个以上模块集成形成一个独立的部分。所述功能如果以软件功能模块的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上所述仅为本申请的优选实施例而已，并不用于限制本申请，对于本领域的技术人员来说，本申请可以有各种更改和变化。凡在本申请的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。
