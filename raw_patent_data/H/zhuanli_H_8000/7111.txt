标题title
包含5G的异构网的信号切换方法及装置
摘要abst
本申请公开了一种包含5G的异构网的信号切换方法及装置，所述方法包括：所述异构网中包含至少两种协议类型的信号；传输信号的时频资源大于预设值时，切换待发送信号的协议类型并转发至目标设备，所述待发送信号表示时频资源超出预设值的部分信号。通过判断通信链路的通信质量，在链路通信质量不佳的情况下，及时切换待发送信号的协议类型并将所述待发送信号转发至目标设备，从而解决了井下出现通信信号盲区的场景中基站和CPE在传输中没有资源进行资源交互时，无法保证数据的实时性传输的技术问题，从而保证了井下设备的网络稳定性和数据传输的实时性。
权利要求书clms
1.一种包含5G的异构网的信号切换方法，其特征在于，所述方法包括：所述异构网中包含至少两种协议类型的信号；传输信号的时频资源大于预设值时，切换待发送信号的协议类型并转发至目标设备，所述待发送信号表示时频资源超出预设值的信号。2.如权利要求1所述的方法，其特征在于，所述切换待发送信号的协议类型包括：所述待发送信号的协议类型由蜂窝网络切换为WIFI网络；或，所述待发送信号的协议类型由WIFI网络切换为蜂窝网络。3.如权利要求2所述的方法，其特征在于，在所述待发送信号的协议类型由蜂窝网络切换为WIFI网络时，所述方法包括：判断第一通信链路的时频资源，所述第一通信链路是由基站和终端设备组成的通信链路；若所述第一通信链路的时频资源小于预设值，则转发所述待发送信号至用户驻地设备。4.如权利要求3所述的方法，其特征在于，所述转发所述待发送信号至用户驻地设备的步骤之后包括：判断第二通信链路的时频资源，所述第二通信链路是由所述用户驻地设备和所述终端设备组成的通信链路。5.如权利要求4所述的方法，其特征在于，所述判断第二通信链路的时频资源的步骤之后包括：若所述第二通信链路的时频资源大于预设值，切换所述待发送信号的协议类型并转发带有第一切换标识的待发送信号至所述终端设备。6.如权利要求5所述的方法，其特征在于，所述转发至目标设备的步骤包括：发送控制消息，所述控制消息包含识别所述待发送信号的配置信息；所述控制消息用以下形式的任意一种表征：由预设识别格式解码的网络临时标识符、用于信号类型识别的预设控制消息格式、用于信号类型识别的控制消息的增加域、用于信号类型识别的控制消息的时域分配增加位、用于信号识别的配置为不小于3个的时域偏移参数。7.如权利要求4所述的方法，其特征在于，所述判断第二通信链路的时频资源的步骤之后包括：若所述第二通信链路的时频资源小于预设值，上传所述待发送信号至基站。8.如权利要求2所述的方法，其特征在于，在所述待发送信号的协议类型由WIFI网络切换为蜂窝网络时，所述方法包括：判断所述第二通信链路的时频资源；若所述第二通信链路的时频资源小于预设值，则上传所述待发送信号至基站。9.如权利要求8所述的方法，其特征在于，所述上传所述待发送信号至基站的步骤之后包括：判断所述第一通信链路的时频资源；若所述第一通信链路的时频资源大于预设值，切换所述待发送信号的协议类型并转发带有第二切换标识的待发送信号至用户驻地设备。10.如权利要求1～9中任一项所述的方法，其特征在于，所述目标设备为所述终端设备或所述用户驻地设备；所述目标设备为所述终端设备时，表示所述第一通信链路和所述第二通信链路为下行通信链路；所述目标设备为所述用户驻地设备时，表示所述第二通信链路为上行通信链路，所述第一通信链路为下行通信链路。11.一种包含5G的异构网的信号切换装置，其特征在于，包括：所述异构网中包含至少两种协议类型的信号；切换模块，用于传输信号的时频资源大于预设值时，切换待发送信号的协议类型并转发至目标设备，所述待发送信号表示时频资源超出预设值的信号。12.一种通信装置，其特征在于,包括处理器、存储器和存储在所述存储器内的计算机程序，所述计算机程序被配置为被所述处理器运行时执行所述权利要求1～10中任意一项所述的方法。13.一种存储介质，其特征在于,其上存储有计算机程序，所述计算机程序用于执行所述权利要求1～10中任意一项所述的方法。
说明书desc
技术领域本申请涉及无线通信技术领域，尤其是一种包含5G的异构网的信号切换方法及装置。背景技术垂直行业是5G应用的重点场景之一，矿山场景即包括井上的无线传播环境，也包括井下的传播环境，其中，井上的无线传播环境包括传统的调度中心、各类基站、终端设备和交换机等，井下的无线传播环境包括各类井下终端设备、基站和传感器等，井上和井下的设备通过环网交换机实现互联。目前，对于智能矿山场景下，使用“一张网”的方式实现通信，可以同时支持各种制式网络如5G、4G和WIFI的系统的接入，各种设备之间通常通过有线的方式连接，但大量有线设备不利于现场的作业，并且井下环境中具有较多出现通信信号盲区的场景，基于此，目前一种较好的方案是在各类终端设备之间新增部署用户驻地设备，CPE是一种用于访问Internet或访问提供商用网络商的服务的连接设备，以直接或间接的方式连接到运营商网络，具有高保密性、应用效率高和便于维护等优点。但实际场景中，基站或CPE向终端设备进行通信时，如果基站或CPE在传输中没有可用资源用于资源交互时，无法成功的将信号数据发送至终端设备，难以保证数据的实时性传输。目前，暂未有相关方案和讨论。发明内容本申请实施例提供了一种包含5G的异构网的下行、上行信号切换方法及装置，用于解决井下出现通信信号盲区的场景中基站和CPE没有资源进行资源交互时，无法保证数据的实时性传输的技术问题。根据本申请的一个方面，提供了一种包含5G的异构网的信号切换方法，所述方法包括：所述异构网中包含至少两种协议类型的信号；传输信号的时频资源大于预设值时，切换待发送信号的协议类型并转发至目标设备，所述待发送信号表示时频资源超出预设值的信号。较佳地，所述切换待发送信号的协议类型包括：所述待发送信号的协议类型由蜂窝网络切换为WIFI网络；或，所述待发送信号的协议类型由WIFI网络切换为蜂窝网络。较佳地，在所述待发送信号的协议类型由蜂窝网络切换为WIFI网络时，所述方法包括：判断第一通信链路的时频资源，所述第一通信链路是由基站和终端设备组成的通信链路；若所述第一通信链路的时频资源小于预设值，则转发所述待发送信号至用户驻地设备。较佳地，所述转发所述待发送信号至用户驻地设备的步骤之后包括：判断第二通信链路的时频资源，所述第二通信链路是由所述用户驻地设备和所述终端设备组成的通信链路。较佳地，所述判断第二通信链路的时频资源的步骤之后包括：若所述第二通信链路的时频资源大于预设值，切换所述待发送信号的协议类型并转发至目标设备。较佳地，所述转发至目标设备的步骤包括：发送控制消息，所述控制消息包含识别所述待发送信号的配置信息；所述控制消息用以下形式的任意一种表征：由预设识别格式解码的网络临时标识符、用于信号类型识别的预设控制消息格式、用于信号类型识别的控制消息的增加域、用于信号类型识别的控制消息的时域分配增加位、用于信号识别的配置为不小于3个的时域偏移参数。较佳地，所述判断第二通信链路的时频资源的步骤之后包括：若所述第二通信链路的时频资源小于预设值，上报所述待发送信号至基站。较佳地，在所述待发送信号的协议类型由WIFI网络切换为蜂窝网络时，所述方法包括：判断所述第二通信链路的时频资源；若所述第二通信链路的时频资源小于预设值，则上传所述待发送信号至基站。较佳地，所述上传所述待发送信号至基站的步骤之后包括：判断所述第一通信链路的时频资源；若所述第一通信链路的时频资源大于预设值，切换所述待发送信号的协议类型并转发带有第二切换标识的待发送信号至用户驻地设备较佳地，所述目标设备为所述终端设备或所述用户驻地设备；所述目标设备为所述终端设备时，表示所述第一通信链路和所述第二通信链路为下行通信链路；所述目标设备为所述用户驻地设备时，表示所述第二通信链路为上行通信链路，所述第一通信链路为下行通信链路。作为本发明的第二个方面，提供一种包含5G的异构网的信号切换装置，包括：所述异构网中包含至少两种协议类型的信号；切换模块，用于传输信号的时频资源大于预设值时，切换待发送信号的协议类型并转发至目标设备，所述待发送信号表示时频资源超出预设值的信号。作为本发明第三个方面，提供一种通信装置，包括处理器、存储器和存储在所述存储器内的计算机程序，所述计算机程序被配置为被所述处理器运行时执行上述所述的方法。作为本发明的第四个方面，提供一种存储介质，其上存储有计算机程序，所述计算机程序用于执行上述中所述的方法。在本申请实施例中，提供了一种包含5G的异构网的信号切换方法及装置，通过判断通信链路的通信质量，在链路通信质量不佳的情况下，及时切换待发送信号的协议类型并将所述待发送信号转发至目标设备，从而解决了井下出现通信信号盲区的场景中基站和CPE在传输中没有资源进行资源交互时，无法保证数据的实时性传输的技术问题，从而保证了井下设备的网络稳定性和数据传输的实时性。附图说明构成本申请的一部分的附图用来提供对本申请的进一步理解，本申请的示意性实施例及其说明用于解释本申请，并不构成对本申请的不当限定。在附图中：图1是本申请实施例提供的一种井下部署CPE的通信系统示意图；图2是本申请实施例提供的一种包含5G的异构网的信号切换方法的流程示意图；图3是本申请实施例提供的一种包含5G的异构网的下行信号切换示意图；图4是本申请实施例提供的一种包含5G的异构网的下行信号切换方法的第一流程示意图；图5是本申请实施例提供的一种包含5G的异构网的下行信号切换方法的第一切换标识示意图；图6是本申请实施例提供的一种包含5G的异构网的下行信号切换方法的第二流程示意图；图7是本申请实施例提供的一种包含5G的异构网的下行信号切换方法的信息插入示意图；图8是本申请实施例提供的一种包含5G的异构网的下行信号切换方法中一个DCI调度的示意图；图9是本申请实施例提供的一种包含5G的异构网的下行信号切换方法中两个DCI调度的示意图；图10是本申请实施例提供的一种包含5G的异构网的上行信号切换示意图；图11是本申请实施例提供的一种包含5G的异构网的上行信号切换方法的第一流程示意图；图12是本申请实施例提供的一种包含5G的异构网的上行信号切换方法的第二流程示意图；图13是本申请实施例提供的一种包含5G的异构网的信号切换装置示意图。具体实施方式为了使本技术领域的人员更好地理解本发明方案，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分的实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本发明保护的范围。需要说明的是，本发明的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本发明的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。Rel.15和Rel.16版本5G新无线技术的提出，主要面向增强移动宽带、低时延高可靠通信和大规模机器通信三大典型应用场景，垂直行业是5G的重点应用场景之一，其中以智能矿山为代表，矿山场景中包括井上和井下两种无线传播环境，在井上无线传播环境中通常设置有调度中心、各类基站、终端设备和交换机等，在井下无线传播环境中通常设置有各类井下终端设备、基站和传感器等，井上和井下的各种设备通过环网交换机实现互联。目前对于智能矿山场景，使用“一张网”方式实现通信，即可以同时支持各种协议的网络如5G、4G和WIFI接入，但在井下长距离通信的场景中，当使用WIFI通信时，容易出现信号盲区，基于此，目前的解决方案是在井下部署CPE，图1是本申请实施例提供的一种井下部署CPE的通信系统的示意图，该通信系统可以包括至少一个网络设备，仅示出一个，如图1中的基站，至少一个用户驻地设备，仅示出一个，如图1中的CPE，至少一个终端设备，所述终端设备可以是手机、平板电脑、笔记本电脑、上网本、超级移动个人计算机、移动上网装置、可穿戴设备。如图1所示，基站发送5G或4G信号至终端设备，若终端设备与基站的距离较远，无法接收到该5G或4G信号，则基站将5G或4G信号发送至CPE，CPE将5G或4G信号转化为WIFI信号并将WIFI信号发送至终端设备，以使终端设备能接收到基站发送的信号。但现有的方案中当基站或CPE在传输中没有可用资源进行资源交换时，无法保证数据传输的实时性。基于此提供了一种包含5G的异构网的信号切换方法，需要说明的是，在附图的流程图示出的步骤可以在诸如一组计算机可执行指令的计算机系统中执行，并且，虽然在流程图中示出了逻辑顺序，但是在某些情况下，可以以不同于此处的顺序执行所示出或描述的步骤。图2是本申请实施例提供的一种包含5G的异构网的信号切换方法的流程示意图，如图2所示，该方法包括以下步骤：步骤101、传输信号的时频资源大于预设值时，切换待发送信号的协议类型并转发至目标设备，待发送信号表示时频资源超出预设值的部分信号。通过判断通信链路的通信质量，在链路通信质量不佳的情况下，及时切换待发送信号的协议类型并将所述待发送信号转发至目标设备，从而解决了井下出现通信信号盲区的场景中基站和CPE在传输中没有资源进行资源交互时，无法保证数据的实时性传输的技术问题，从而保证了井下设备的网络稳定性和数据传输的实时性。需要说明的是，本申请中的包含5G的异构网中包含至少两种协议类型的信号，包括但不限于以下协议网络：5G、4G、3G、2G、WIFI、Zigbee、近距离无线通信技术、红外等技术。本申请中的包含5G的异构网也不限于煤矿场景中，也可以是其他出现通信信号盲区的场景。在传输信号中，若基站或CPE的可用资源不足，及时切换剩余待发送的信号的协议类型，转发至目标设备，保证数据传输的实时性、可靠性。进一步的，在4G、5G共存的场景中，终端设备的性能被设定为5G网络的优先级高于4G网络，终端设备会优先接入5G网络中，在5G信号能量较弱时或者目标场景不支持5G的情况下，才会接入到4G网络中，即使终端设备接入了4G网络，但仍然会搜索基站发送的5G信号，如，同步信号。当搜索到的5G网络的同步信号强度较高时，接入到5G网络中。其中，所述切换待发送信号的协议类型包括：第一种情况：待发送信号的协议类型由蜂窝网络切换为WIFI网络；第二种情况：待发送信号的协议类型由WIFI网络切换为蜂窝网络。第一种情况通常发生在下行链路传输情况中，第二中情况通常发生在上行链路传输的情况中，下面分别以包含5G的异构网的下行、上行信号的切换方法进一步说明本申请。图3为本申请所述的包含5G的异构网的下行信号的切换示意图，图中的DL表示下行数据链路，所述下行数据链路传输指基站向终端设备发送信号的链路，本申请的改进在于下行链路传输时，基站和终端设备组成的第一通信链路质量不佳时，基站将待发送的蜂窝网络信号，如5G/4G信号，转发至CPE，CPE将蜂窝网络信号转换为WIFI信号后，将带有切换标识的WIFI网络信号发送至终端设备，如图4所示，包含5G的异构网的下行信号切换方法包括：步骤201、发送信号至终端设备。步骤202、判断第一通信链路的时频资源是否大于预设值。在本步骤中，第一通信链路是由基站和终端设备组成的通信链路，信号传输方向为基站至终端设备。NR系统中的时频资源被划分成时间域维度上的时域符号和频域维度上的子载波，一个子载波对应一个资源单位，其中RE为最小资源粒度，表示时域上的一个时频符号和频域上的一个子载波组成的时频格点，在NR中一个最小资源调度单位为资源块，一个RB在时域上是一个时频符号，在频域上为12个RE，所述RB即时频资源块，用于承载基站发送至终端设备的信号。若是，则执行步骤203、基站向终端设备发送信号。若否，则执行步骤204、基站向用户驻地设备CPE发送待发送信号，并包含第一切换标识。在本步骤中，基站在向终端设备传输信号的过程中，第一通信链路的时频资源不足时，不能成功将信号传输至终端设备，此时部分信号已发送至终端设备，还存在部分待发送的信号，基站会向用户驻地设备CPE发送所述待发送的信号并配置第一切换标识，所述第一切换标识用于指示终端设备接收到的信号为用户驻地设备CPE转发的蜂窝网络信号。步骤2041、用户驻地设备CPE将待发送信号以及第一切换标识转换成WIFI信号发送至终端设备。需要说明的是，如图5所示，CPE发送的信号中包含常规的WIFI信号和转发的待发送信号。第一切换标识，即图中的“信息A”，由“信息A1”和“信息A2”两部分组成，信息A1插入至待发送的信号前端，信息A2插入至待发送的信号结尾，当终端设备解调到信息A1时，默认之后接收的信息为基站通过CPE向终端设备转发的5G/4G信息，当终端设备解调到信息A2时，默认转发的待发送信号已经发送完毕。具体的，信息A1和信息A2各占用一个或者多个时间单元，占用的频域资源最大为当前子载波的频域宽度，最小满足如下公式：频域资源min＝max{BW转发的待发送信号,BW常规WIFI信号}其中，BW转发的待发送信号表示转发的待发送信号占用的PDSCH的频域资源宽度，BW常规WIFI信号表示发送常规WIFI信号占用的PDSCH的频域资源宽度。此外，考虑到“常规Wi-Fi信号”与“转发的待发送信号”所使用的调制格式或者编码速率不同，为了最大限度地消除符号间干扰，需要插入“保护间隔”，其占用一个或者多个时间单元，频域最大可为当前子载波的频域宽度，最小满足公式：保护间隔频域资源min＝max{BW转发的待发送信号,BW常规Wi-Fi信号}其中，BW转发的待发送信号表示转发的待发送信号占用的PDSCH的频域资源宽度，BW常规Wi-F信号表示发送常规WIFI信号占用的PDSCH的频域资源宽度。由此，通过在“保护间隔”内调整接收信号的相关参数使得终端设备可以更容易解调出转发的待发送信号。在一个实施例中，步骤202也可以通过HARQ-ACK机制判断第一通信链路的通信质量，具体的，通过接收终端设备反馈确认或否定确认判断，若接收NACK的次数达到预设值，则判断第一通信链路的质量不好，执行步骤3041；若接收ACK的次数达到预设值，则判断第一通信链路的质量好，执行步骤303。图6示出了另一种包含5G的异构网的下行信号切换方法，如图6所示，所述信号切换方法包括：步骤301、发送信号至终端设备。步骤302、判断第一通信链路的时频资源是否大于预设值。在本步骤中，第一通信链路是由基站和终端设备组成的通信链路，信号传输方向为基站至终端设备。若是，则执行步骤303、基站向终端设备发送信号。若否，则执行以下部分的步骤：步骤304、基站向CPE发送待发送信号。步骤305、CPE向终端设备发送待发送信号。步骤306、CPE判断第二通信链路的时频资源是否大于预设值。在本步骤中，第二通信链路指用户驻地设备和终端设备组成的通信链路，信号传输方向为用户驻地设备至终端设备。若是，则执行步骤307、CPE向终端设备发送信号。若否，则执行以下部分的步骤：步骤308、CPE上传待发送信号。在第二通信链路的时频资源小于预设值时，说明无法保证通信质量，CPE会将待发送的信号由WIFI网络信号转换为蜂窝网络信号，通过上行链路数据信道进行传输至基站，例如PUCCH信道或PUSCH信道，本发明实施例对此不做具体限定。上传后执行如下步骤：步骤309、基站判断第一通信链路的时频资源是否大于预设值。若是，则执行步骤310、基站向终端设备发送待发送信号。在本步骤中，基站通过下行链路数据信道向终端设备转发转换为蜂窝网络格式的待转发信号，例如PDSCH信道，本发明实施例对此不做具体限定。若否，则执行步骤311、基站向CPE反馈“不转发”的信令。在本步骤中，所述“不转发”信令通过下行链路数据信道向CPE反馈，例如PDSCH信道或PDCCH信道，本发明实施例对此不做具体限定。在一个实施例中，步骤306也可以通过判断第二通信链路的通信质量来判断，如通过HARQ-ACK机制判断，具体的，通过接收终端设备反馈确认或否定确认判断，若接收NACK的次数达到预设值，则判断第一通信链路的质量不好，执行步骤308～步骤311；若接收ACK的次数达到预设值，则判断第一通信链路的质量好，执行步骤307。需要说明的是，经过基站转发的待发送信号的插入方式如图7所示，通常待发送信号，即“转发的待发送信号”位于常规4G/5G信号之后，考虑到“常规4G/5G信号”与“转发的待发送信号”所使用的调制格式或者编码速率不同，需要插入“保护间隔”，所述保护间隔占用一个或者多个时间单元，频域最大可为当前子载波的频域宽度所对应的RB数，最小为“转发的待发送信号”和“常规4G/5G信号”之间占用的最大频域宽度所对应的RB数。通过在“保护间隔”内调整接收信号的相关参数使得终端设备可以更容易解调出“转发的待发送信号”。在一个实施例中，可以通过一个或两个DCI调度常规4G/5G信号和待发送信号：如图8所示，在使用一个DCI调度时，终端设备可以用以下方式判断随后接收的数据是否包含待发送信号：1.由预设识别格式解码的网络临时标识符新定义一种网络临时标识符，对携带下行控制消息的PDCCH信道中的循环冗余校验码进行加扰，当终端设备使用这种网络临时标识符格式解调循环冗余校验码并解调出下行控制消息时，表示随后接收的数据信号中包含待发送信号。2.用于信号类型识别的预设控制消息格式DCI具有不同定义的格式，新增一种用于表示随后接收的数据信号中包含待发送信号的DCI格式，当终端设备解码出所述DCI格式后，默认随后接收的数据信号中包含待发送信号。在一个实施例中，所述DCI格式可以是DCI format X，本发明实施例对此不作具体限定。3.用于信号类型识别的控制消息的增加域或时域分配增加位在目标DCI中新增域或比特位，以指示终端设备随后接收的数据信号中是否包含待发送信号。例如，当新增比特位配置为“1”时，表示终端设备随后接收的数据信号中包含待发送信号。4.用于信号识别的配置为不小于3个的时域偏移参数修改DCI中的域“Time domain resource assignment”，当所配置的表格中包含至少3个时域偏移时，终端设备默认随后接收的数据信号中包含待发送信号，所述至少3个时域偏移分别表示DCI与常规4G/5G信号之间的时隙以及符号级别的时域偏移以及表示DCI与“转发的待发送信号”之间的时隙以及符号级别的时域偏移。需要说明的是，在时域方面，用于发送“常规4G/5G信号”和待发送信号的两个PDSCH信道通过参数起始和长度指示值决定，所述DCI所在的时隙与“常规4G/5G信号”所在的时隙之间时域偏移取决于参数k0和S1，参数k0为发送所述DCI的PDCCH信道所在的时隙与发送“常规4G/5G信号”的PDSCH信道所在的时隙之间时隙-级别的时域偏移，参数S1为用于发送“常规4G/5G信号”的PDSCH信道所在的时隙内相对于该时隙中第一符号的符号-级别偏移。时隙-级别，固定“保护间隔”，定义为T1，其占用一个或者多个时间单元，此时，终端设备默认基站发送的待发送信号的PDSCH信道的时隙-级别的时域位置为k0+T1；符号-级别偏移，定义参数S2，其表示用于发送“转发的待发送信号”的PDSCH信道所在的时隙内相对于该时隙中第一符号的符号偏移，在一个实施例中，一种简易的配置方法为，S2为0或者S2＝S1。在频域方面，用于发送“常规4G/5G信号”和待发送信号的两个PDSCH信道通过参数资源指示值决定，具体的，其包含定义了“常规4G/5G信号”和待发送信号的两个PUSCH信道的起始PRB位置PRB0_1和PRB0_2，以及所述两个PUSCH信道占用的PRB个数，LPRB1和LPBR2。这里，规定PRB0_1＝PRB0_2，即基站发送“常规4G/5G信号”和“转发的待发送信号”的两个PUSCH信道的起始频域位置相同，对于LPRB1和LPBR2，考虑到发送的传输块不同，通过如下两种方法确定LPBR2的值：1.修改RIV表格，将参数LPBR2新增到RIV表格中；2.新增参数f1，其表示发送“常规4G/5G信号”的PDSCH的占用的最高PRB索引对应的频域位置与发送“转发的待发送信号”的PDSCH的占用的最高PRB索引对应的频域位置之间的频域偏移，其取值为正也可以为负，占用1个或者多个RB，此时，LPBR2＝LPRB1+f1。如图9所示，当基站通过两个DCI分别调度“常规4G/5G信号”和待发送信号时，可以定义其中一个DCI调度“常规4G/5G信号”，另一个DCI调度待发送信号，例如定义基站通过DCI1调度“常规4G/5G信号”，通过DCI2调度待发送信号，传输DCI1的PDCCH信道所在的时隙与传输DCI2的PUCCH信道所在的时隙之间的时域偏移不少于1个时隙。下面以DCI1调度“常规4G/5G信号”，DCI2调度待发送信号为例说明终端设备区分DCI1和DCI2的方式：1.由预设识别格式解码的网络临时标识符新定义一种网络临时标识符，对携带下行控制消息的PDCCH信道中的循环冗余校验码进行加扰，当终端设备使用这种网络临时标识符解调循环冗余校验码并解调出下行控制消息时，默认其为DCI2。2.用于信号类型识别的预设控制消息格式新增一种特定的DCI格式，例如format X，当终端设备解码出目标DCI的格式为format X格式时，默认其为DCI2。3.用于信号类型识别的控制消息的增加域或时域分配增加位在目标DCI中新增域或比特位，以指示终端设备是否为DCI2当其为特定配置时，终端设备默认其为DCI2。例如，当新增比特位配置为“1”时，终端设备默认其为DCI2。4.控制信息中用于信号类型识别的域的比特位拓展将现有DCI中的“Identifier for DCI formats”占用的比特位拓展至2比特，当所述比特位为特定配置时，终端设备默认其为DCI2。例如，当所述域配置为“00”时，表示所述DCI用于调度PUSCH，当所述域配置为“01”时，表示所述DCI用于调度PDSCH，当所述域配置为“10”时，默认其为DCI2。通过以上两种DCI调度方式使终端设备识别出待转发信号，并通过切换标识表示待转发信号的来源，由此便于信号的转发，保证信号的传输。图10是本申请所述的包含5G的异构网的上行信号的切换示意图，图中的DL表示下行数据链路，所述下行数据链路传输指基站向终端设备发送信号的链路，图中的UL表示上行数据链路。在本申请中，所述上行数据链路指由终端设备向CPE发送信号的链路，本申请的改进在于，在上行信号传输的过程中，第二通信链路的时频资源小于预设值时，将待发送的信号转发至基站，基站发送带有第二切换标识的待发送信号至CPE，由此保证上行信号传输的可靠性和实时性。如图11所示，包含5G的异构网的上行信号切换方法包括：步骤401、终端设备向CPE发送上行信号请求。在本步骤中，终端设备向CPE发送的上行信号的信号类型为WIFI网络。步骤402、判断第二通信链路的时频资源是否大于预设值。在本步骤中，第二通信链路是由终端设备和CPE组成的通信链路，上行信号的传输方向为终端设备至CPE。在一个实施例中，步骤402的执行主体既可以是终端设备，也可以是CPE，在执行主体是终端设备时，则采用判断第二通信链路的时频资源是否大于预设值的方式，在执行主体是终端设备时，则采用信道接入机制判断，若终端设备多次无法抢占目标信道，则认为第二通信链路的通信质量较差，若终端设备可以接入目标信道，则认为第二通信链路的通信质量较佳。若第二通信链路的时频资源大于预设值，则执行步骤403、CPE接收终端设备的上行信号。若第二通信链路的时频资源小于预设值，则执行以下部分的步骤：步骤404、CPE向基站发送信号转发请求，并向终端设备发送第二切换标识。在本步骤中，CPE会将WIFI网络信号切换为蜂窝网络信号，同时向基站发送信号转发请求，向终端设备发送第二切换标识，所述第二切换标识用于指示终端设备其随后发送的上行信号可以转发至基站。步骤405、终端设备接收第二切换标识，向基站发送上行信号请求。在4G/5G网络的上行业务调度过程中，终端设备有数据需要发送时，首先需要向基站发送调度请求消息，请求基站发送上行授权，所述上行授权用于表征基站分配给终端设备的时频资源，以使终端设备进行上行信号传输。所述调度请求可以通过上行链路数据信道进行传输，例如，PUSCH。所述上行授权可以通过下行链路数据信道进行传输，例如，PDCCH，本发明实施例对此不作具体限定。步骤406、基站收到终端设备的上行信号请求，发送上行授权。步骤407、终端设备收到上行授权，发送上行信号。在本步骤中，终端设备在基站预配置的时频资源上发送蜂窝网络类型的待发送信号，进行上行信号的传输。步骤408、基站将上行信号发送给CPE。在本步骤中，基站接收到待发送信号后，将待发送信号切换为WIFI网络类型发送给CPE，以完成终端设备发送的WIFI信号的转发。需要说明的是，基站转发所述待发送信号的过程与前述包含5G的异构网的下行信号切换方法的过程相同，因此，在此就不再赘述。图12示出了另一种包含5G的异构网的上行信号切换方法，如图12所示，所述信号切换方法的步骤包括：步骤501、终端设备向CPE发送上行信号请求。在本步骤中，终端设备向CPE发送的上行信号的信号类型为WIFI网络。步骤502、判断第二通信链路的时频资源是否大于预设值。在本步骤中，所述第二通信链路指终端设备和CPE组成的通信链路，上行信号的传输方向为终端设备至CPE。步骤502的执行主体既可以是终端设备，也可以是CPE，在执行主体是终端设备时，则采用判断第二通信链路的时频资源是否大于预设值的方式，在执行主体是终端设备时，则采用信道接入机制判断，若终端设备多次无法抢占目标信道，则认为第二通信链路的通信质量较差，若终端设备可以接入目标信道，则认为第二通信链路的通信质量较佳。若第二通信链路的时频资源大于预设值，则执行步骤503、CPE接收终端设备的上行信号。若第二通信链路的时频资源小于预设值，则执行以下部分的步骤：步骤504、CPE向基站发送信号转发请求，并向终端设备发送第二切换标识。所述第二切换标识用于指示终端设备其随后发送的上行信号可以转发至基站。步骤505、判断第一通信链路的时频资源是否大于预设值。若否，则执行步骤512、基站向CPE反馈“不转发”信令。若是，则执行以下部分的步骤：步骤506、基站向CPE反馈“可转发”信令。步骤507、CPE向终端设备发送第二切换标识。步骤508、终端设备向基站发送上行信号请求。步骤509、基站收到来自终端设备的上行信号请求，发送上行授权。在4G/5G网络的上行业务调度过程中，终端设备有数据需要发送时，首先需要向基站发送调度请求消息，请求基站发送上行授权，所述上行授权用于表征基站分配给终端设备的时频资源，以使终端设备进行上行信号传输。所述调度请求可以通过上行链路数据信道进行传输，例如，PUSCH，所述上行授权可以通过下行链路数据信道进行传输，例如，PDCCH，本发明实施例对此不作具体限定。步骤510、终端设备收到上行授权，发送上行信号。在本步骤中，终端设备在基站分配的时频资源上发送上行信号，以完成待发送信号的传输。步骤511、基站将上行信号发送给CPE。根据本发明实施例，还提供了一种包含5G的异构网的信号切换装置，图13为本申请实施例提供的一种包含5G异构网的信号切换装置示意图，如图13所示，该装置包括：切换模块10，用于传输信号的时频资源大于预设值时，切换待发送信号的协议类型并转发至目标设备，所述待发送信号表示时频资源超出预设值的信号。所述异构网中包含至少两种协议类型的信号。第一判断模块11，用于判断第一通信链路的时频资源。第二判断模块12，用于判断第二通信链路的时频资源。转发模块13，用于转发带有切换标识的待发送信号。控制消息发送模块14，用于发送控制消息，所述控制消息包含识别所述待发送信号的配置信息，所述控制消息用以下形式的任意一种表征：由预设识别格式解码的网络临时标识符、用于信号类型识别的预设控制消息格式、用于信号类型识别的控制消息的增加域、用于信号类型识别的控制消息的时域分配增加位、用于信号识别的配置为不小于3个的时域偏移参数。上传模块15，用于在所述第二通信链路的时频资源小于预设值时，上传所述待发送信号至基站。需要说明的是，本实施例提供的包含5G的异构网的信号切换装置与上述实施例中的包含5G的异构网的信号切换方法的工作原理相同，因此在此就不再赘述。通过本实施例提供的包含5G的异构网的信号切换装置判断通信链路的通信质量，在链路通信质量不佳的情况下，及时切换待发送信号的协议类型并将所述待发送信号转发至目标设备，从而解决了井下出现通信信号盲区的场景中基站和CPE在传输中没有资源进行资源交互时，无法保证数据的实时性传输的技术问题，从而保证了井下设备的网络稳定性和数据传输的实时性。根据本发明实施例，还提供了一种通信装置，包括处理器、存储器和存储在所述存储器内的计算机程序，所述计算机程序被配置为被所述处理器运行时执行上述实施例中的包含5G的异构网的信号切换方法。本发明的实施例还提供一种存储介质，其上存储有计算机程序，所述计算机程序用于执行上述实施例中的包含5G的异构网的信号切换方法。上述计算机程序所执行的方法与上文的方法实施例中的方法相同，在此不再赘述。这些计算机程序也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和/或方框图一个方框或多个方框中指定的功能的步骤，对应与不同的步骤可以通过不同的模块来实现。上述程序可以运行在处理器中，或者也可以存储在存储器中，计算机可读介质包括永久性和非永久性、可移动和非可移动媒体可以由任何方法或技术来实现信息存储。信息可以是计算机可读指令、数据结构、程序的模块或其他数据。计算机的存储介质包括但不限于相变内存、静态随机存取存储器、动态随机存取存储器、其他类型的随机存取存储器、只读存储器、电可擦除可编程只读存储器、快闪记忆体或其他内存技术、只读光盘只读存储器、数字多功能光盘或其他光学存储、磁盒式磁带，磁带磁磁盘存储或其他磁性存储设备或任何其他非传输介质，可用于存储可以被计算设备访问的信息。按照本文中的界定，计算机可读介质不包括暂存电脑可读媒体，如调制的数据信号和载波。以上仅为本申请的实施例而已，并不用于限制本申请。对于本领域技术人员来说，本申请可以有各种更改和变化。凡在本申请的精神和原理之内所作的任何修改、等同替换、改进等，均应包含在本申请的权利要求范围之内。
