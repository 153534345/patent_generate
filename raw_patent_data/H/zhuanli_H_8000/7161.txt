标题title
基于小信号高频增益自动温度补偿的高速跨阻放大器芯片
摘要abst
本发明公开了一种基于小信号高频增益自动温度补偿的高速跨阻放大器芯片，涉及集成电路技术领域，包括基准模块、TIA信号链路模块和自动温度补偿控制模块，TIA信号链路模块包括跨阻放大级模块、单转双电路模块、输出缓冲模块以及自动增益控制模块，输出缓冲模块包括中心抽头差分电感L2D和两个小信号高频增益自动温度补偿开关单元；自动温度补偿控制模块包括CT产生模块和CTRL缓冲模块。本发明能实现对TIA芯片的小信号高频增益进行自动温度补偿；TIA芯片在实际测试时，全温范围内的小信号高频增益都能达到一个较好的状态；自动温度补偿控制模块中使用了施密特触发器，以形成迟滞，加入低通滤波特性，使控制信号CT01、CT02的切换边沿能缓慢变化。
权利要求书clms
1.一种基于小信号高频增益自动温度补偿的高速跨阻放大器芯片，包括基准模块和TIA信号链路模块，TIA信号链路模块包括跨阻放大级模块、单转双电路模块、输出缓冲模块以及自动增益控制模块，输出缓冲模块包括中心抽头差分电感L2D，中心抽头差分电感L2D的中心抽头端接电源端VDD，其特征在于，还包括自动温度补偿控制模块；自动温度补偿控制模块包括CT产生模块和CTRL缓冲模块，CT产生模块包括控制信号产生模块和两个施密特触发器；控制信号产生模块用于从基准模块获取正温度系数电流IPT和零温度系数电流IZT，并产生两个初始控制信号V01、V02，以及输出调整了温度翻转点的初始控制信号V01、V02；CTRL缓冲模块，用于调整两个初始控制信号V01、V02的温度翻转点；两个施密特触发器分别用于对两个调整了温度翻转点初始控制信号V01、V02进行迟滞以及低通滤波处理，并分别输出控制信号CT01、CT02；输出缓冲模块还包括第一小信号高频增益自动温度补偿开关单元，以及第二小信号高频增益自动温度补偿开关单元，第一小信号高频增益自动温度补偿开关单元连接于电源端VDD和中心抽头差分电感L2D的第一端口之间，第二小信号高频增益自动温度补偿开关单元连接于电源端VDD和中心抽头差分电感L2D的第二端口之间；第一小信号高频增益自动温度补偿开关单元和第二小信号高频增益自动温度补偿开关单元，均设置有控制信号CT01输入端和控制信号CT02输入端。2.根据权利要求1所述基于小信号高频增益自动温度补偿的高速跨阻放大器芯片，其特征在于，控制信号产生模块包括晶体管MP01、MP02、MP03、MP04、MP05、MP06、MP07、MN01、MN02、MN03、MN04、MN05、MN06、MN07、MN08和MN09，电阻R01和R02；电阻R01的一端和电阻R02的一端分别接基准模块的正温度系数电流IPT输出端和零温度系数电流IZT输出端；电阻R01的另一端接晶体管MN01的漏极，以及晶体管MN01和MN02的栅极；电阻R02的另一端接晶体管MN03的漏极，以及晶体管MN03、MN04和MN07的栅极；晶体管MN01、MN02、MN03、MN04和MN07的源极接地；晶体管MN02的漏极，接晶体管MP01的漏极和栅极，以及晶体管MP02、MP03、MP04、MP05、MP06和MP07的栅极；晶体管MP02和MN04的漏极，以及晶体管MN05和MN06的源极，均接第一施密特触发器的信号输入端，第一施密特触发器的信号输出端用于输出控制信号CT01；晶体管MN05的漏极接晶体管MP03的漏极，晶体管MN06的漏极接晶体管MP04的漏极；晶体管MP05和MN07的漏极，以及晶体管MN08和MN09的源极，均接第二施密特触发器的信号输入端，第二施密特触发器的信号输出端用于输出控制信号CT02；晶体管MN08的漏极接晶体管MP06的漏极，晶体管MN09的漏极接晶体管MP07的漏极；晶体管MP01、MP02、MP03、MP04、MP05、MP06和MP07的源极接电源端VDD；晶体管MN05和MN08的栅极用于接CTRL缓冲模块的第二信号调整端CTRLP；晶体管MN06和MN09的栅极用于接CTRL缓冲模块的第一信号调整端CTRLN。3.根据权利要求2所述基于小信号高频增益自动温度补偿的高速跨阻放大器芯片，其特征在于，若去除电阻R01和R02时，晶体管的工作电压没有超过允许的工作电压范围，则去除电阻R01和R02，否则保留电阻R01和R02。4.根据权利要求2所述基于小信号高频增益自动温度补偿的高速跨阻放大器芯片，其特征在于，施密特触发器包括由电阻RS1和电容CS1组成的低通滤波处理模块。5.根据权利要求4所述基于小信号高频增益自动温度补偿的高速跨阻放大器芯片，其特征在于，施密特触发器还包括晶体管MPS1、MPS2、MPS3、MPS4、MPS5、MPS6、MPS7、MNS1、MNS2、MNS3、MNS4、MNS5和MNS6；晶体管MPS1、MPS2、MNS1、MNS2的栅极共接后作为施密特触发器的信号输入端，与控制信号产生模块的控制信号输出端连接，用于输入调整了温度翻转点初始控制信号；晶体管MPS2和MPS3的源极，以及晶体管MPS1的漏极连接；晶体管MNS1和MNS3的源极，以及晶体管MNS2的漏极连接；晶体管MPS3、MPS4、MPS5、MPS6、MPS7、MNS3、MNS4、MNS5、MNS6的栅极，以及晶体管MPS2和MNS1的漏极连接；晶体管MNS2和MNS6的源极，电容CS1的一端，以及晶体管MPS3的漏极接地；晶体管MPS1和MPS4的源极，以及晶体管MNS3的漏极接电源端VDD；晶体管MPS4的漏极和晶体管MPS5的源极连接，晶体管MPS5的漏极和晶体管MPS6的源极连接，晶体管MPS6的漏极和晶体管MPS7的源极连接；晶体管MPS7、MNS4的漏极，以及电阻RS1的一端连接；晶体管MNS4的源极和晶体管MNS5的漏极连接，晶体管MNS5的源极和晶体管MNS6的漏极连接；电阻RS1的另一端和电容CS1的另一端共接后作为施密特触发器的信号输出端。6.根据权利要求5所述基于小信号高频增益自动温度补偿的高速跨阻放大器芯片，其特征在于，CTRL缓冲模块包括晶体管MPC1、MPC2、MNC1和MNC2；晶体管MPC1和MNC1的栅极共接后作为CTRL缓冲模块的CTRL信号输入端；晶体管MPC1和MPC2的源极接电源端VDD；晶体管MNC1和MNC2的源极接地；晶体管MPC1和MNC1的漏极，以及晶体管MPC2和MNC2的栅极共接后作为CTRL缓冲模块的第一信号调整端CTRLN；晶体管MPC2和MNC2的漏极共接后作为CTRL缓冲模块的第二信号调整端CTRLP。7.根据权利要求6所述基于小信号高频增益自动温度补偿的高速跨阻放大器芯片，其特征在于，第一小信号高频增益自动温度补偿开关单元包括晶体管MP21和MP22，以及电阻R23和R24；电阻R23和R24的第一端均接中心抽头差分电感L2D的第一端口；电阻R23和R24的第二端，分别接晶体管MP21和MP22的漏极；晶体管MP21和MP22的源极接电源端VDD；晶体管MP21和MP22的栅极分别作为控制信号CT02输入端和控制信号CT01输入端；第二小信号高频增益自动温度补偿开关单元包括晶体管MP23和MP24，以及电阻R25和R26；电阻R25和R26的第一端均接中心抽头差分电感L2D的第二端口；电阻R25和R26的第二端，分别接晶体管MP23和MP24的漏极；晶体管MP23和MP24的源极接电源端VDD；晶体管MP23和MP24的栅极分别作为控制信号CT01输入端和控制信号CT02输入端。
说明书desc
技术领域本发明涉及对高速跨阻放大器芯片的小信号高频增益进行自动温度补偿的技术，属于集成电路领域。背景技术图1为一个现有的TIA架构，基准模块产生合适的偏置电压和偏置电流供TIA信号链路模块使用。在光通信模块的接收端，首先利用光电二极管芯片将光纤中高速变化的光信号转换为高速变化的电流信号101001…，再利用跨阻放大器芯片将该电流信号放大转换为一定幅度的电压信号供后级限幅放大器芯片进一步放大。在基站通信、光纤到户以及数据中心等应用场景中，一般要求TIA芯片工作的温度范围为-40℃~85℃。由于温度会明显改变芯片工艺中晶体管的交流特性如跨导等，以及电感交流特性、电阻阻值和电容值等，从而温度会明显影响高速TIA信号链路增益曲线中的小信号高频增益。在工作温度范围内，通常会导致高速TIA芯片的在高温下的小信号高频增益下降，从而导致高速TIA芯片在高温下的小信号眼图明显变差，从而造成高速TIA芯片在高温下的灵敏度下降，而高速TIA芯片的灵敏度为该类芯片的最核心指标。在高速TIA芯片设计过程中，为了降低整体应用方案的成本，往往要求TIA芯片搭配带宽较低的APD使用，因此要求高速TIA有足够的小信号高频增益。TIA应用系统中，与TIA搭配的前后级芯片的高频增益在高温下会下降，同时TIA封装bonding线、TIA封装采用的TO-CAN外壳管脚、以及PCB板连线等在高温下的高频衰减会更大。为了提升高速TIA芯片的小信号高频增益和小信号带宽，通常会在输出缓冲级采用电感峰化技术，利用峰化网络提升输出缓冲级的小信号高频增益，以补偿应用系统中高温导致的与TIA搭配的前后级芯片高频增益下降、高温导致的TIA外围封装以及PCB板连线等更大的高频衰减。但如果过度的提升小信号高频增益，会较明显增大TIA小信号附近的噪声，从而影响TIA的灵敏度。由于温度特性对芯片器件性能的影响，如果峰化网络的参数选取保证高速TIA芯片在低温段的小信号高频增益较合适时，高速TIA芯片在高温段的小信号高频增益就会不足，从而导致高温段的灵敏度下降；如果峰化网络的参数选取保证高速TIA芯片在高温段的小信号高频增益较合适时，高速TIA芯片在低温段的小信号高频增益就会过大，从而导致低温段的噪声过大，灵敏度下降。即该补偿方式对高速TIA芯片在全温范围内的小信号高频增益比较难同时兼顾。发明内容本发明在于提供一种基于小信号高频增益自动温度补偿的高速跨阻放大器芯片，其能够缓解上述问题。为了缓解上述的问题，本发明采取的技术方案如下：本发明提供了一种基于小信号高频增益自动温度补偿的高速跨阻放大器芯片，包括基准模块、TIA信号链路模块和自动温度补偿控制模块，TIA信号链路模块包括跨阻放大级模块、单转双电路模块、输出缓冲模块以及自动增益控制模块，输出缓冲模块包括中心抽头差分电感L2D，中心抽头差分电感L2D的中心抽头端接电源端VDD；自动温度补偿控制模块包括CT产生模块和CTRL缓冲模块，CT产生模块包括控制信号产生模块和两个施密特触发器；控制信号产生模块用于从基准模块获取正温度系数电流IPT和零温度系数电流IZT，并产生两个初始控制信号V01、V02，以及输出调整了温度翻转点的初始控制信号V01、V02；CTRL缓冲模块，为CTRL信号的缓冲，用于生成控制信号CTRLP和CTRLN，调整两个初始控制信号V01、V02的温度翻转点；两个施密特触发器分别用于对两个调整了温度翻转点初始控制信号V01、V02进行迟滞以及低通滤波处理，并分别输出控制信号CT01、CT02；输出缓冲模块还包括第一小信号高频增益自动温度补偿开关单元，以及第二小信号高频增益自动温度补偿开关单元，第一小信号高频增益自动温度补偿开关单元连接于电源端VDD和中心抽头差分电感L2D的第一端口之间，第二小信号高频增益自动温度补偿开关单元连接于电源端VDD和中心抽头差分电感L2D的第二端口之间；第一小信号高频增益自动温度补偿开关单元和第二小信号高频增益自动温度补偿开关单元，均设置有控制信号CT01输入端和控制信号CT02输入端。在本发明的一较佳实施方式中，控制信号产生模块包括晶体管MP01、MP02、MP03、MP04、MP05、MP06、MP07、MN01、MN02、MN03、MN04、MN05、MN06、MN07、MN08和MN09，电阻R01和R02；电阻R01的一端和电阻R02的一端分别接基准模块的正温度系数电流IPT输出端和零温度系数电流IZT输出端；电阻R01的另一端接晶体管MN01的漏极，以及晶体管MN01和MN02的栅极；电阻R02的另一端接晶体管MN03的漏极，以及晶体管MN03、MN04和MN07的栅极；晶体管MN01、MN02、MN03、MN04和MN07的源极接地；晶体管MN02的漏极，接晶体管MP01的漏极和栅极，以及晶体管MP02、MP03、MP04、MP05、MP06和MP07的栅极；晶体管MP02和MN04的漏极，以及晶体管MN05和MN06的源极，均接第一施密特触发器的信号输入端，第一施密特触发器的信号输出端用于输出控制信号CT01；晶体管MN05的漏极接晶体管MP03的漏极，晶体管MN06的漏极接晶体管MP04的漏极；晶体管MP05和MN07的漏极，以及晶体管MN08和MN09的源极，均接第二施密特触发器的信号输入端，第二施密特触发器的信号输出端用于输出控制信号CT02；晶体管MN08的漏极接晶体管MP06的漏极，晶体管MN09的漏极接晶体管MP07的漏极；晶体管MP01、MP02、MP03、MP04、MP05、MP06和MP07的源极接电源端VDD；晶体管MN05和MN08的栅极用于接CTRL缓冲模块的第二信号调整端CTRLP；晶体管MN06和MN09的栅极用于接CTRL缓冲模块的第一信号调整端CTRLN。在本发明的一较佳实施方式中，若去除电阻R01和R02时，晶体管的工作电压没有超过允许的工作电压范围，则去除电阻R01和R02，否则保留电阻R01和R02。在本发明的一较佳实施方式中，施密特触发器包括由电阻RS1和电容CS1组成的低通滤波处理模块。在本发明的一较佳实施方式中，施密特触发器还包括晶体管MPS1、MPS2、MPS3、MPS4、MPS5、MPS6、MPS7、MNS1、MNS2、MNS3、MNS4、MNS5和MNS6；晶体管MPS1、MPS2、MNS1、MNS2的栅极共接后作为施密特触发器的信号输入端，与控制信号产生模块的控制信号输出端连接，用于输入调整了温度翻转点初始控制信号；晶体管MPS2和MPS3的源极，以及晶体管MPS1的漏极连接；晶体管MNS1和MNS3的源极，以及晶体管MNS2的漏极连接；晶体管MPS3、MPS4、MPS5、MPS6、MPS7、MNS3、MNS4、MNS5、MNS6的栅极，以及晶体管MPS2和MNS1的漏极连接；晶体管MNS2和MNS6的源极，电容CS1的一端，以及晶体管MPS3的漏极接地；晶体管MPS1和MPS4的源极，以及晶体管MNS3的漏极接电源端VDD；晶体管MPS4的漏极和晶体管MPS5的源极连接，晶体管MPS5的漏极和晶体管MPS6的源极连接，晶体管MPS6的漏极和晶体管MPS7的源极连接；晶体管MPS7、MNS4的漏极，以及电阻RS1的一端连接；晶体管MNS4的源极和晶体管MNS5的漏极连接，晶体管MNS5的源极和晶体管MNS6的漏极连接；电阻RS1的另一端和电容CS1的另一端共接后作为施密特触发器的信号输出端。在本发明的一较佳实施方式中，CTRL缓冲模块包括晶体管MPC1、MPC2、MNC1和MNC2；晶体管MPC1和MNC1的栅极共接后作为CTRL缓冲模块的CTRL信号输入端；晶体管MPC1和MPC2的源极接电源端VDD；晶体管MNC1和MNC2的源极接地；晶体管MPC1和MNC1的漏极，以及晶体管MPC2和MNC2的栅极共接后作为CTRL缓冲模块的第一信号调整端CTRLN；晶体管MPC2和MNC2的漏极共接后作为CTRL缓冲模块的第二信号调整端CTRLP。在本发明的一较佳实施方式中，第一小信号高频增益自动温度补偿开关单元包括晶体管MP21和MP22，以及电阻R23和R24；电阻R23和R24的第一端均接中心抽头差分电感L2D的第一端口；电阻R23和R24的第二端，分别接晶体管MP21和MP22的漏极；晶体管MP21和MP22的源极接电源端VDD；晶体管MP21和MP22的栅极分别作为控制信号CT02输入端和控制信号CT01输入端；第二小信号高频增益自动温度补偿开关单元包括晶体管MP23和MP24，以及电阻R25和R26；电阻R25和R26的第一端均接中心抽头差分电感L2D的第二端口；电阻R25和R26的第二端，分别接晶体管MP23和MP24的漏极；晶体管MP23和MP24的源极接电源端VDD；晶体管MP23和MP24的栅极分别作为控制信号CT01输入端和控制信号CT02输入端。与现有技术相比，本发明的有益效果是：能将基准模块生成的正温度系数电流IPT和零温度系数电流IZT，经过自动温度补偿控制模块产生控制信号CT01、CT02，改进后的输出缓冲模块，自动温度补偿控制模块配合输出缓冲一起实现对TIA芯片的小信号高频增益进行自动温度补偿；增加了CTRL端，用于芯片测试时，根据测试情况调整生成的控制信号CT01、CT02的温度翻转点，以使TIA芯片在实际测试时，全温范围内的小信号高频增益都能达到一个较好的状态；自动温度补偿控制模块中使用了施密特触发器，以形成迟滞，同时，在施密特触发器的输出端加入低通滤波特性，使控制信号CT01、CT02的切换边沿能缓慢变化；TIA应用系统中，与TIA搭配的前后级芯片的高频增益在高温下会下降，同时TIA封装bonding线、TIA封装采用的TO-CAN外壳管脚、以及PCB板连线等在高温下的高频衰减会更大，本发明的自动温度补偿控制模块配合输出缓冲一起实现对TIA芯片的小信号高频增益进行自动温度补偿，从而保证TIA在全温范围内的小信号高频增益都能达到一个较好的状态，从而更好的兼顾了TIA高低温的性能，使TIA应用在系统中时，系统在全温范围内能达到更好的灵敏度性能，而灵敏度是TIA以及应用系统的核心指标之一。为使本发明的上述目的、特征和优点能更明显易懂，下文特举本发明实施例，并配合所附附图，作详细说明如下。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本发明的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1是传统技术的TIA架构图；图2是本发明基于小信号高频增益自动温度补偿的高速跨阻放大器芯片架构图；图3是本发明所述自动温度补偿控制模块中的CT产生模块电路图；图4是本发明所述自动温度补偿控制模块中的施密特触发器电路图；图5是本发明所述自动温度补偿控制模块中的CTRL缓冲模块电路图；图6是本发明所述自动温度补偿控制模块中电流随温度变化的曲线图；图7是本发明所述自动温度补偿控制模块中控制信号CT01&amp;CT02随温度变化的曲线图；图8是传统TIA架构中的输出缓冲模块电路图；图9是本发明所述基于小信号高频增益自动温度补偿的高速跨阻放大器芯片架构中的输出缓冲模块电路图；图10是图9所述电路的单边交流等效电路示意图；图11是图9所述电路的增益幅值与频率的关系图；图12是传统TIA架构增益随温度变化的曲线图；图13是本发明基于小信号高频增益自动温度补偿的高速跨阻放大器芯片架构中，增益随温度变化的曲线图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。如图2所示，本发明公开了一种基于小信号高频增益自动温度补偿的高速跨阻放大器芯片，包括基准模块、TIA信号链路模块和自动温度补偿控制模块，TIA信号链路模块包括跨阻放大级模块、单转双电路模块、输出缓冲模块以及自动增益控制模块。本发明所设计的TIA芯片，在传统TIA架构的基础上，将基准模块生成的正温度系数电流IPT和零温度系数电流IZT，经过自动温度补偿控制模块，该模块产生控制信号CT01、CT02，提供给TIA信号链路模块中相对于传统技术改进后的输出缓冲模块，自动温度补偿控制模块配合输出缓冲模块一起实现对TIA芯片的小信号高频增益进行自动温度补偿。图3、图4和图5为本发明自动温度补偿控制模块的具体电路实现，包括CT产生模块和CTRL缓冲模块，CT产生模块包括控制信号产生模块和两个施密特触发器。控制信号产生模块用于从基准模块获取正温度系数电流IPT和零温度系数电流IZT，并产生两个初始控制信号V01、V02，以及输出调整了温度翻转点的初始控制信号V01、V02。如图3所示，控制信号产生模块包括晶体管MP01、MP02、MP03、MP04、MP05、MP06、MP07、MN01、MN02、MN03、MN04、MN05、MN06、MN07、MN08和MN09，电阻R01和R02；电阻R01的一端和电阻R02的一端分别接基准模块的正温度系数电流IPT输出端和零温度系数电流IZT输出端；电阻R01的另一端接晶体管MN01的漏极，以及晶体管MN01和MN02的栅极；电阻R02的另一端接晶体管MN03的漏极，以及晶体管MN03、MN04和MN07的栅极；晶体管MN01、MN02、MN03、MN04和MN07的源极接地；晶体管MN02的漏极，接晶体管MP01的漏极和栅极，以及晶体管MP02、MP03、MP04、MP05、MP06和MP07的栅极；晶体管MP02和MN04的漏极，以及晶体管MN05和MN06的源极，均接第一施密特触发器的信号输入端，第一施密特触发器的信号输出端用于输出控制信号CT01；晶体管MN05的漏极接晶体管MP03的漏极，晶体管MN06的漏极接晶体管MP04的漏极；晶体管MP05和MN07的漏极，以及晶体管MN08和MN09的源极，均接第二施密特触发器的信号输入端，第二施密特触发器的信号输出端用于输出控制信号CT02；晶体管MN08的漏极接晶体管MP06的漏极，晶体管MN09的漏极接晶体管MP07的漏极；晶体管MP01、MP02、MP03、MP04、MP05、MP06和MP07的源极接电源端VDD；晶体管MN05和MN08的栅极用于接CTRL缓冲模块的第二信号调整端CTRLP；晶体管MN06和MN09的栅极用于接CTRL缓冲模块的第一信号调整端CTRLN。CTRL缓冲模块为CTRL信号的缓冲，用于生成控制信号CTRLP和CTRLN，调整两个初始控制信号V01、V02的温度翻转点。如图5所示，CTRL缓冲模块包括晶体管MPC1、MPC2、MNC1和MNC2；晶体管MPC1和MNC1的栅极共接后作为CTRL缓冲模块的CTRL信号输入端；晶体管MPC1和MPC2的源极接电源端VDD；晶体管MNC1和MNC2的源极接地；晶体管MPC1和MNC1的漏极，以及晶体管MPC2和MNC2的栅极共接后作为CTRL缓冲模块的第一信号调整端CTRLN；晶体管MPC2和MNC2的漏极共接后作为CTRL缓冲模块的第二信号调整端CTRLP。两个施密特触发器的结构相同，分别用于对两个调整了温度翻转点初始控制信号V01、V02进行迟滞以及低通滤波处理，并分别输出控制信号CT01、CT02。如图4所示，施密特触发器包括晶体管MPS1、MPS2、MPS3、MPS4、MPS5、MPS6、MPS7、MNS1、MNS2、MNS3、MNS4、MNS5、MNS6，以及由电阻RS1和电容CS1组成的低通滤波处理模块。晶体管MPS1、MPS2、MNS1、MNS2的栅极共接后作为施密特触发器的信号输入端，与控制信号产生模块的控制信号输出端连接，用于输入调整了温度翻转点初始控制信号；晶体管MPS2和MPS3的源极，以及晶体管MPS1的漏极连接；晶体管MNS1和MNS3的源极，以及晶体管MNS2的漏极连接；晶体管MPS3、MPS4、MPS5、MPS6、MPS7、MNS3、MNS4、MNS5、MNS6的栅极，以及晶体管MPS2和MNS1的漏极连接；晶体管MNS2和MNS6的源极，电容CS1的一端，以及晶体管MPS3的漏极接地；晶体管MPS1和MPS4的源极，以及晶体管MNS3的漏极接电源端VDD；晶体管MPS4的漏极和晶体管MPS5的源极连接，晶体管MPS5的漏极和晶体管MPS6的源极连接，晶体管MPS6的漏极和晶体管MPS7的源极连接；晶体管MPS7、MNS4的漏极，以及电阻RS1的一端连接；晶体管MNS4的源极和晶体管MNS5的漏极连接，晶体管MNS5的源极和晶体管MNS6的漏极连接；电阻RS1的另一端和电容CS1的另一端共接后作为施密特触发器的信号输出端。在本发明所述的自动温度补偿控制模块中，IPT01是由基准模块提供的正温度系数电流，IZT01是由基准模块提供的零温度系数电流。MN05、MN06、MN08、MN09为开关管。考虑到高速芯片的设计仿真值与测试值会有一定差别，因此增加了CTRL端，用于芯片测试时，根据测试情况调整生成的控制信号CT01、CT02的温度翻转点，以使TIA芯片在实际测试时，全温范围内的小信号高频增益都能达到一个较好的状态。假设MN01与MN02之间的总宽长比比例为1:1，即其电流镜像比例IPT01:IPT02=1:1。MP01~ MP07单个叉指数的宽长比相同， MP01~ MP07的Finger个数分别对应为mP01~ mP07。MN03、MN04、MN07的单个叉指数的宽长比相同， MN03、MN04、MN07的Finger个数分别对应为mN03、mN04、mN07。下面以一个实际例子的参数来分析该电路的具体工作过程。例如IPT01: IPT02=1:1，mP01=20，mP02=17，mP03=1，mP04=2，mP05=16，mP06=1，mP07=2，mN03=5，mN04=22， mN07=22。当CTRL=0时， MN05、MN08关断，MN06、MN09导通，因此MP01与MP02+MP04形成有效电流镜像，MP01与MP05+MP07形成有效电流镜像，在温度从低往高扫描变化时：在-40℃~TP01℃温度段时： IPT01*/mp01＜IZT01*mN04/mN03，即IPT01* /20＜IZT01*22/ 5，V01为一个较低电压，施密特触发器SMIT01将其判决为低电平，输出控制信号CT01=0；IPT01*/mp01＜IZT01*mN07/mN03，即IPT01* /20＜IZT01*22/ 5，V02为一个较低电压，施密特触发器SMIT02将其判决为低电平，输出控制信号CT02=0。在TP01℃~TP02℃温度段时：IPT01*/mp01＞IZT01*mN04/mN03，即IPT01* /20＞IZT01*22/ 5，V01为一个较高电压，施密特触发器SMIT01将其判决为高电平，输出控制信号CT01=1；IPT01*/mp01＜IZT01*mN07/mN03，即IPT01* /20＜IZT01*22/ 5，V02为一个较低电压，施密特触发器SMIT02将其判决为低电平，输出控制信号CT02=0。在TP02℃~85℃温度段时：IPT01*/mp01＞IZT01*mN04/mN03，即IPT01* /20＞IZT01*22/ 5，V01为一个较高电压，施密特触发器SMIT01将其判决为高电平，输出控制信号CT01=1；IPT01*/mp01＞IZT01*mN07/mN03，即IPT01* /20＞IZT01*22/ 5，V02为一个较高电压，施密特触发器SMIT02将其判决为高电平，输出控制信号CT02=1。当CTRL=1时， MN06、MN09关断，MN05、MN08导通，因此MP01与MP02+MP03形成有效电流镜像，MP01与MP05+MP06形成有效电流镜像，在温度从低往高扫描变化时：在-40℃~TP03℃温度段时： IPT01*/mp01＜IZT01*mN04/mN03，即IPT01* /20＜IZT01*22/ 5，V01为一个较低电压，施密特触发器SMIT01将其判决为低电平，输出控制信号CT01=0；IPT01*/mp01＜IZT01*mN07/mN03，即IPT01* /20＜IZT01*22/ 5，V02为一个较低电压，施密特触发器SMIT02将其判决为低电平，输出控制信号CT02=0。在TP03℃~TP04℃温度段时：IPT01*/mp01＞IZT01*mN04/mN03，即IPT01* /20＞IZT01*22/ 5，V01为一个较高电压，施密特触发器SMIT01将其判决为高电平，输出控制信号CT01=1；IPT01*/mp01＜IZT01*mN07/mN03，即IPT01* /20＜IZT01*22/ 5，V02为一个较低电压，施密特触发器SMIT02将其判决为低电平，输出控制信号CT02=0。在TP04℃~85℃温度段时：IPT01*/mp01＞IZT01*mN04/mN03，即IPT01* /20＞IZT01*22/ 5，V01为一个较高电压，施密特触发器SMIT01将其判决为高电平，输出控制信号CT01=1；IPT01*/mp01＞IZT01*mN07/mN03，即IPT01* /20＞IZT01*22/ 5，V02为一个较高电压，施密特触发器SMIT02将其判决为高电平，输出控制信号CT02=1。上述实际例子中，CTRL=0时，IPT01* /mp01=IPT01* /20；CTRL=1时，IPT01* /mp01=IPT01* /20。即IPT01* /20= IPT01*/20，因此针对该实际例子，图7中的温度翻转点TP02和TP03是重合的，该图为了能将不同状态下的不同波形一起对比显示，故意将TP02和TP03画成有细微区别。经过上述分析，可以看出CTRL端可以调节控制信号CT01、CT02的温度翻转点，这便于实际测试时，根据测试具体情况，将CTRL控制信号接需要的电平，使TIA芯片在全温范围内的小信号高频增益都能达到一个较好的状态。图6为上述分析过程中涉及的电流随温度变化的示意图。在温度翻转点附近，为了使自动温度补偿控制模块输出不会随温度细微变化就导致频繁切换控制信号CT01、CT02，在自动温度补偿控制模块中使用了施密特触发器，以形成迟滞。同时，在施密特触发器的输出端加入电阻RS1和CS1形成低通滤波特性，使CT01、CT02的切换边沿将缓慢变化。CT产生模块中的电阻R01~R02为可选器件。例如，假设不加入电阻R01~R02时，图3中晶体管MN01和MN03的工作电压超过了其允许的工作电压范围，那么电阻R01~R02必须加入，否则电阻R01~R02可以不加入。图8为传统TIA架构中采用了电感峰化技术的输出缓冲，峰化电感的具体实现为采用中心抽头差分电感L1D，中心抽头差分电感L1D等效到单端的电感为L11、L12。考虑到温度对芯片工艺中晶体管的交流特性，以及电感交流特性、电阻阻值和电容值等的影响，该缓冲的小信号高频增益，在低温段偏大，在高温段偏小且不足。VB11是MN13和MN14正常工作所需的直流偏置电压，INP11和INN11为差分输入信号。图9为本发明TIA架构中采用了电感峰化技术的输出缓冲模块，包括晶体管MN23、MN21、MN22、MN24，电阻R21、R22，电容C21、C22，中心抽头差分电感L2D，第一小信号高频增益自动温度补偿开关单元，以及第二小信号高频增益自动温度补偿开关单元。VB21是MN23和MN24正常工作所需的直流偏置电压。INP21和INN21为差分输入信号。第一小信号高频增益自动温度补偿开关单元连接于电源端VDD和中心抽头差分电感L2D的第一端之间，第二小信号高频增益自动温度补偿开关单元连接于电源端VDD和中心抽头差分电感L2D的第二端之间；第一小信号高频增益自动温度补偿开关单元和第二小信号高频增益自动温度补偿开关单元，均设置有控制信号CT01输入端和控制信号CT02输入端。具体地，第一小信号高频增益自动温度补偿开关单元包括晶体管MP21和MP22，以及电阻R23和R24；电阻R23和R24的第一端均接中心抽头差分电感L2D的第一端口；电阻R23和R24的第二端口，分别接晶体管MP21和MP22的漏极；晶体管MP21和MP22的源极接电源端VDD；晶体管MP21和MP22的栅极分别作为控制信号CT02输入端和控制信号CT01输入端；第二小信号高频增益自动温度补偿开关单元包括晶体管MP23和MP24，以及电阻R25和R26；电阻R25和R26的第一端均接中心抽头差分电感L2D的第二端；电阻R25和R26的第二端，分别接晶体管MP23和MP24的漏极；中心抽头差分电感L2D的中心抽头端，晶体管MP23和MP24的源极均接电源端VDD；晶体管MP23和MP24的栅极分别作为控制信号CT01输入端和控制信号CT02输入端。相对于传统TIA架构中的输出缓冲模块，本发明所述的输出缓冲模块加入了小信号高频增益自动温度补偿开关单元，峰化电感的具体实现为采用中心抽头差分电感L2D，中心抽头差分电感L2D等效到单端的电感为L21、L22。其中控制信号CT01、CT02由自动温度补偿控制模块产生提供。MP21~ MP24为PMOS管构成的开关管，其导通时的导通阻抗为Ron,p2x。图9所示的缓冲模块电路的具体工作过程分析如下，假设自动温度补偿控制模块中CTRL=0。在-40℃~TP01℃温度段： CT02=0，CT01=0， MP21~ MP24导通，该差分放大器的单端负载为：R21+C21//L21//  // 。在TP01℃~TP02℃温度段： CT02=0，CT01=1， MP22和MP23关断，MP21和MP24导通，该差分放大器的单端负载为：R21+C21//L21// 。在TP02℃~85℃温度段： CT02=1，CT01=1， MP21~ MP24关断，该差分放大器的单端负载为：R21+C21//L21。由于从低温段到高温段的负载是自动切换变化的，因此在设计选取中心抽头差分电感L2D时，可以将L2D电感值设计得比传统TIA架构中的输出缓冲模块电路中的L1D电感值大，这样保证TIA芯片在高温段有更好的小信号高频增益，且在低温段的小信号高频增益也不会大。图10为图9所述电路的单边交流等效电路示意图，其中CL为输出等效电容负载。假设MP21、MP22、R23、R24形成的总电阻为RSW，开关管MP21和MP22导通时的导通电阻为Ron,p2x。由于负载电容CL较小，负载电容CL引入的极点较远，不影响峰值时候的增益，所以负载电容引入的极点可先忽略。增益：等效输出阻抗：是M21的跨导，/＞是该电路的等效输出阻抗，/＞为MN23的跨导，/＞是MN23的沟道电阻，/＞是MN21的沟道电阻。当趋近于﹢∞时，增益的幅值随频率的变化约为：在低频处，由于，低频增益约为/＞。在频率附近，，增益开始随着频率的增加而提升。在频率处，增益达到峰值，随着频率的继续增加，增益将开始减小。当的阻抗有限且一般远小于/＞时，增益的幅值随频率的变化为：/＞在低频处，由于，低频增益约为/＞。在频率附近，，增益开始随着频率的增加而提升。在频率处，增益达到峰值，随着频率的继续增加，增益将减小。图11是不同温度情况下输出缓冲的增益幅值与频率的关系图，图中的f=w/2π。由于跨导 会随着温度的变化有所变化，所以不同温度下的低频增益会有细微差别。调整的阻值主要影响了高频增益，而对低频增益几乎无影响。当CT02=0，CT01=0时， = // ，此时高频增益峰值。当CT02=0，CT01=1时，= ，此时高频增益峰值。当CT02=1，CT01=1时， 趋近于﹢∞，此时高频增益峰值。如图11所示，从低温到高温过程中，控制信号CT01和CT02自动变化时， 自动从一个较小值切换到一个较大值，最后切换到趋近于正无穷大的值，小信号高频增益的峰值也实现了一个逐渐变大的自动切换过程，因此该电路实现了对输出缓冲的小信号高频增益的自动调节。图12是传统TIA电路的整体增益随温度变化曲线示意图。图13是本发明基于小信号高频增益自动温度补偿的高速TIA电路中，整体增益随温度变化的曲线示意图。按照常规的增益带宽曲线的显示习惯，横轴为对数坐标，纵轴为线性坐标。该曲线考虑了芯片应用时的TIA封装bonding线电感、封装外壳管脚的影响，且考虑了TIA信号链路模块的温度特性对整体增益曲线的影响。TIA应用系统中，与TIA搭配的前后级芯片的高频增益在高温下会下降，同时TIA封装bonding线、TIA封装采用的TO-CAN外壳管脚、以及PCB板连线等在高温下的高频衰减会更大。图13的TIA整体电路增益的温度特性，保证了TIA在全温范围内的小信号高频增益都能达到一个较好的状态，从而更好的兼顾了TIA高低温的性能，使TIA应用在系统中时，系统在全温范围内能达到更好的灵敏度性能，而灵敏度是TIA以及应用系统的核心指标之一。以上分析过程是基于TIA电路中生成的控制信号CT01和CT02为两位进行的。如果实际电路设计需要，可基于本发明的设计思想，将控制信号扩展为更多位。以上分析过程是基于TIA电路的输出缓冲模块中采用了带自动温度调节的电感峰化技术进行的。如果实际电路设计需要，可基于本发明的设计思想，将该方法应用到TIA链路中其它模块中，例如单转双电路等。以上所述仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
