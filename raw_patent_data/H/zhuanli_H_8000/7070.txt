标题title
网络切片的方法与装置
摘要abst
本发明涉及计算机网络技术领域，提供了一种网络切片的方法与装置，方法包括：当有新业务需求时，检查基础切片组中是否存在一个基础切片满足基本要求，若是，则基于相应基础切片建立子切片，分配子切片带宽、子切片RID和子切片优先级，根据新业务需求在相应基础切片进行子切片业务路径的建立；若子切片业务路径建立成功，则业务流在子切片业务路径上使用子切片带宽进行转发；若子切片业务路径建立失败，则进行调优直至相应基础切片满足基本要求；本发明提供的网络切片的方法通过基础切片实现对子切片带宽的灵活分配和管理，不仅可以解决扩展性问题，减少中间节点的业务配置，还可以实现资源的动态预留和调整，提高资源利用率。
权利要求书clms
1.一种网络切片的方法，其特征在于，包括：当有新业务需求时，检查基础切片组中是否存在一个基础切片满足基本要求，若是则基于相应基础切片建立子切片业务路径；否则新业务建立失败，向控制器报告错误告警；若子切片业务路径建立成功，则在子切片业务路径上使用子切片带宽转发业务流；若子切片业务路径建立失败，则新业务建立失败，向控制器报告错误告警。2.根据权利要求1所述的网络切片的方法，其特征在于，所述基于相应基础切片建立子切片业务路径，具体包括：根据新业务需求，由相应基础切片的控制面根据相应基础切片的逻辑拓扑、测量的相应基础切片的链路时延和相应基础切片的链路带宽，在相应基础切片上计算得到子切片业务路径；所述子切片业务路径由相应基础切片中的节点、链路有序排列而成，子切片业务路径包含子切片RID、子切片预留带宽、子切片优先级，以及路径预留带宽信息。3.根据权利要求1所述的网络切片的方法，其特征在于，子切片业务路径建立成功或失败的判断过程具体包括：子切片业务路径中的头节点发起子切片带宽和子切片RID分配流程，子切片业务路径中的其他节点在收到各自的上一节点的请求消息后，各自回应响应消息给子切片业务路径中的头节点；若所有待响应节点回应的响应消息中均携带分配成功的状态标识，则子切片业务路径建立成功；否则，子切片业务路径建立失败。4.根据权利要求3所述的网络切片的方法，其特征在于，所述头节点发起子切片带宽和子切片RID分配流程，具体包括：头节点根据自己链路剩余带宽、子切片预留带宽、路径预留带宽和子切片优先级，进行是否能够完成子切片带宽和子切片RID分配的判断，若头节点处能够完成子切片带宽和子切片RID分配，则向下一跳节点发送请求消息，否则，不发送请求消息，分配失败。5.根据权利要求3所述的网络切片的方法，其特征在于，所述子切片业务路径中的其他非尾节点在收到各自的上一节点的请求消息后，根据自己链路剩余带宽、子切片预留带宽、路径预留带宽和子切片优先级，进行各自是否能够完成子切片带宽和子切片RID分配的判断，并将判断结果以响应消息的形式发送给子切片业务路径中的头节点；若在待响应节点处能够完成子切片带宽和子切片RID分配，则响应消息中携带相应基础切片的ID、子切片RID、相应待响应节点的SID地址和分配成功的状态标识；否则，响应消息中携带相应基础切片的ID、相应待响应节点的SID地址和分配失败的状态信息；子切片业务路径中的尾节点在收到上一节点的请求消息后，响应消息中携带相应基础切片的ID、子切片RID、相应待响应节点的SID地址和分配成功的状态标识。6.根据权利要求4或5所述的网络切片的方法，其特征在于，所述根据自己链路剩余带宽、子切片预留带宽、路径预留带宽和子切片优先级，进行各自是否能够完成子切片带宽和子切片RID分配的判断，具体包括：节点查找业务路径下一跳出接口集合，若出接口集合为空，则判定在该节点处无法完成子切片带宽和子切片RID分配；否则，计算得到各接口的链路剩余带宽；若接口集合中的接口未绑定RID，若接口的链路剩余带宽大于或等于路径预留带宽，则基于该接口配置子切片带宽为路径预留带宽，并基于该接口设置子切片优先级和子切片预留带宽，将接口绑定RID，判定在该节点处能够完成子切片带宽和子切片RID分配；否则，判定在该节点处无法完成子切片带宽和子切片RID分配；若接口集合中的接口已绑定了RID，若接口的链路剩余带宽大于或等于路径预留带宽，则基于该接口更新配置子切片带宽为当前子切片带宽+路径预留带宽，并基于该接口更新子切片优先级和子切片预留带宽，判定在该节点处能够完成子切片带宽和子切片RID分配；否则，判定在该节点处无法完成子切片带宽和子切片RID分配。7.根据权利要求4所述的网络切片的方法，其特征在于，所述请求消息用于请求子切片带宽和子切片RID的分配；所述请求消息中包括：相应基础切片的ID、子切片RID、子切片预留带宽、路径预留带宽和子切片优先级，其中路径预留带宽小于等于子切片预留带宽。8.根据权利要求3所述的网络切片的方法，其特征在于，在完成子切片带宽和子切片RID分配，且子切片业务路径建立后，还包括：建立子切片RID和子切片带宽的映射关系；将子切片RID由子切片业务路径中的头节点封装到业务流中，根据子切片RID与子切片带宽的映射关系，完成所述业务流在子切片业务路径上使用子切片带宽进行转发。9.根据权利要求1或2所述的网络切片的方法，其特征在于，当子切片中存在至少一条子切片业务路径时，为各个子切片业务路径预留各自的子切片业务路径带宽；其中，子切片带宽和子切片业务路径带宽为动态配置，具体包括：当头节点感知到子切片业务路径中长时间没有业务流时，通过老化消息释放预留的子切片业务路径带宽；当子切片中没有分配子切片业务路径带宽时，各节点释放预留的子切片带宽，释放子切片RID与子切片带宽的映射关系；当子切片中再次有业务流时，为子切片分配新的子切片带宽，建立子切片RID与新的子切片带宽的映射关系，进行新的子切片业务路径的建立。10.一种网络切片的装置，其特征在于，包括子切片业务路径建立模块和业务流转发模块，其中：所述子切片业务路径模块，用于在有新业务需求时，检查基础切片组中是否存在一个基础切片满足基本要求，若是则基于相应基础切片建立子切片业务路径；否则新业务建立失败，向控制器报告错误告警；所述业务流转发模块，用于在子切片业务路径建立成功时，则在子切片业务路径上使用子切片带宽转发业务流；若子切片业务路径建立失败，则新业务建立失败，向控制器报告错误告警。
说明书desc
技术领域本发明涉及计算机网络技术领域，尤其涉及一种网络切片的方法与装置。背景技术5G时代的IP网络不仅仅提供连接能力，更重要的是提供各种差异化服务的能力。IP网络支持网络切片功能，可以为特定的用户或业务提供专用或共享的网络资源和网络能力，以满足不同的用户和业务差异化连接需求和质量保证。网络切片方法的关键技术是资源隔离能力。管控面的隔离主要包括虚拟专用网络业务隔离、协议隔离或虚拟化隔离技术等；转发面的隔离包括VPN表项隔离、服务质量调度隔离或灵活以太网接口隔离等。当前IP网络切片的主要方法是基于段路由或者IPv6段路由的VPN技术，加上FlexE和Qos技术形成的组合方案。IP网络切片还需要实现物理资源和网络切片虚拟资源的映射，实现物理拓扑和网络切片逻辑拓扑的映射，可以通过切片控制器对整网资源进行规划、映射和调整，还可以通过分布式协议进行配置和映射；SRv6网络切片技术目前主要是基于资源感知的SRv6切片技术和基于切片ID的SRv6切片技术。基于资源感知的SRv6切片技术采用定位符Locator和段标识作为切片标识，可以灵活实现物理资源和网络切片虚拟资源的映射，可以采用内部网关协议多拓扑、IGP多实例、IGP灵活算法或SRv6流量工程策略等技术方式实现。每个网络节点分配多个Locator对应不同的节点资源，划分到不同切片。基于不同切片的Locator分配不同的SID。每个切片网络维护独立的逻辑拓扑，基于各自的Locator和SID计算切片内的业务路径或者配置SRv6 TE Policy。这种方式对Locator和SID的数量需求会成倍增加，同时控制面协议对中央处理器和内存的消耗也会急剧增加，但可以很方便的将业务流引流到不同的网络切片中，实现资源隔离。若在共享的物理网络上需要建立三个切片网络，按照现有的方法，会为每个节点i分配三个Locator，分别为：Locatori1、Locatori2和Locatori3，对应切片1、切片2和切片3；划分给切片1的资源均采用基于Locatori1分配的SID标识。因此三个切片网络不仅需要每个节点维护三个Locator以及若干个SID，还要为三个切片网络维护独立的逻辑拓扑，在切片1、切片2和切片3上分别计算各自的业务路径，控制面的计算也要独立维护。基于资源感知的SRv6切片技术，每个网络切片分配独立的IP地址、Locator和SID，维护独立的逻辑拓扑，运行独立路由计算，对控制面压力大，扩展受限，适用于对切片数量要求较少的场景，一般用于几十个切片数量级的规格要求。对于中等规模乃至大规模的切片数量要求，需要采用基于切片ID的SRv6切片技术，所有切片具有相同的逻辑拓扑，共享IP地址、Locator和SID，共享控制面协议；只是在转发面引入了切片ID，作为切片标识，通过在业务流中携带切片ID，用于区分不同切片，每个节点转发时根据业务流中携带的切片ID选择对应切片的转发面资源进行转发，这里所述的转发面资源包括接口、带宽、或队列等；其中，切片ID不参与控制面路径计算，仅用于转发面切片资源的映射和隔离，因此解决了网络切片扩展性问题；但是，每新增一个切片都需要在切片网络中的所有节点上配置相应的切片ID及其转发面资源的映射关系。实际支持大规模网络切片通常是上述两种技术的联合应用，这就涉及到如何高效创建层次化切片，实现资源的映射和隔离的问题。切片ID的引入，导致切片网络中的每个节点需要感知和维护切片ID的状态，建立切片ID和资源的映射关系，这对于采用源路由的转发技术，额外引入了大量的中间状态，需要一种有效的机制实现切片和资源的映射建立和释放，减少业务的中间状态配置。发明内容本发明要解决的技术问题是：对于中等规模乃至大规模的切片数量要求，每新增一个切片都需要在切片网络中的所有节点上配置相应的切片ID及其转发面资源的映射关系，这对于采用源路由的转发技术，在中间节点额外引入了大量的转发状态，且转发面资源固定分配，降低了资源利用率。为实现上述目的，本发明采用如下技术方案：第一方面，本发明提供了一种网络切片的方法，包括：当有新业务需求时，检查基础切片组中是否存在一个基础切片满足基本要求，若是则基于相应基础切片建立子切片业务路径；否则新业务建立失败，向控制器报告错误告警；若子切片业务路径建立成功，则在子切片业务路径上使用子切片带宽转发业务流；若子切片业务路径建立失败，则新业务建立失败，向控制器报告错误告警。本发明的一个实施例中，所述基于相应基础切片建立子切片业务路径，具体包括：根据新业务需求，由相应基础切片的控制面根据相应基础切片的逻辑拓扑、测量的相应基础切片的链路时延和相应基础切片的链路带宽，在相应基础切片上计算得到子切片业务路径；所述子切片业务路径由相应基础切片中的节点、链路有序排列而成，子切片业务路径包含子切片RID、子切片预留带宽、子切片优先级，以及路径预留带宽信息。本发明的一个实施例中，子切片业务路径建立成功或失败的判断过程具体包括：子切片业务路径中的头节点发起子切片带宽和子切片RID分配流程，子切片业务路径中的其他节点在收到各自的上一节点的请求消息后，各自回应响应消息给子切片业务路径中的头节点；若所有待响应节点回应的响应消息中均携带分配成功的状态标识，则子切片业务路径建立成功；否则，子切片业务路径建立失败。本发明的一个实施例中，所述头节点发起子切片带宽和子切片RID分配流程，具体包括：头节点根据自己链路剩余带宽、子切片预留带宽、路径预留带宽和子切片优先级，进行是否能够完成子切片带宽和子切片RID分配的判断，若头节点处能够完成子切片带宽和子切片RID分配，则向下一跳节点发送请求消息，否则，不发送请求消息，分配失败。本发明的一个实施例中，所述子切片业务路径中的其他非尾节点在收到各自的上一节点的请求消息后，根据自己链路剩余带宽、子切片预留带宽、路径预留带宽和子切片优先级，进行各自是否能够完成子切片带宽和子切片RID分配的判断，并将判断结果以响应消息的形式发送给子切片业务路径中的头节点；若在待响应节点处能够完成子切片带宽和子切片RID分配，则响应消息中携带相应基础切片的ID、子切片RID、相应待响应节点的SID地址和分配成功的状态标识；否则，响应消息中携带相应基础切片的ID、相应待响应节点的SID地址和分配失败的状态信息；子切片业务路径中的尾节点在收到上一节点的请求消息后，响应消息中携带相应基础切片的ID、子切片RID、相应待响应节点的SID地址和分配成功的状态标识。本发明的一个实施例中，所述根据自己链路剩余带宽、子切片预留带宽、路径预留带宽和子切片优先级，进行各自是否能够完成子切片带宽和子切片RID分配的判断，具体包括：节点查找业务路径下一跳出接口集合，若出接口集合为空，则判定在该节点处无法完成子切片带宽和子切片RID分配；否则，计算得到各接口的链路剩余带宽；若接口集合中的接口未绑定RID，若接口的链路剩余带宽大于或等于路径预留带宽，则基于该接口配置子切片带宽为路径预留带宽，并基于该接口设置子切片优先级和子切片预留带宽，将接口绑定RID，判定在该节点处能够完成子切片带宽和子切片RID分配；否则，判定在该节点处无法完成子切片带宽和子切片RID分配；若接口集合中的接口已绑定了RID，若接口的链路剩余带宽大于或等于路径预留带宽，则基于该接口更新配置子切片带宽为当前子切片带宽+路径预留带宽，并基于该接口更新子切片优先级和子切片预留带宽，判定在该节点处能够完成子切片带宽和子切片RID分配；否则，判定在该节点处无法完成子切片带宽和子切片RID分配。本发明的一个实施例中，所述请求消息用于请求子切片带宽和子切片RID的分配；所述请求消息中包括：相应基础切片的ID、子切片RID、子切片预留带宽、路径预留带宽和子切片优先级，其中路径预留带宽小于等于子切片预留带宽。本发明的一个实施例中，在完成子切片带宽和子切片RID分配，且子切片业务路径建立后，还包括：建立子切片RID和子切片带宽的映射关系；将子切片RID由子切片业务路径中的头节点封装到业务流中，根据子切片RID与子切片带宽的映射关系，完成所述业务流在子切片业务路径上使用子切片带宽进行转发。本发明的一个实施例中，当子切片中存在至少一条子切片业务路径时，为各个子切片业务路径预留各自的子切片业务路径带宽；其中，子切片带宽和子切片业务路径带宽为动态配置，具体包括：当头节点感知到子切片业务路径中长时间没有业务流时，通过老化消息释放预留的子切片业务路径带宽；当子切片中没有分配子切片业务路径带宽时，各节点释放预留的子切片带宽，释放子切片RID与子切片带宽的映射关系；当子切片中再次有业务流时，为子切片分配新的子切片带宽，建立子切片RID与新的子切片带宽的映射关系，进行新的子切片业务路径的建立。第二方面，本发明提供了一种网络切片的装置，包括子切片业务路径建立模块和业务流转发模块，其中：所述子切片业务路径模块，用于在有新业务需求时，检查基础切片组中是否存在一个基础切片满足基本要求，若是则基于相应基础切片建立子切片业务路径；否则新业务建立失败，向控制器报告错误告警；所述业务流转发模块，用于在子切片业务路径建立成功时，则在子切片业务路径上使用子切片带宽转发业务流；若子切片业务路径建立失败，则新业务建立失败，向控制器报告错误告警。与现有技术相比，本发明的有益效果是：本发明提供了一种网络切片的方法，采用基础切片结合子切片的层次化方式，通过基础切片实现对子切片带宽的灵活分配和管理，不仅可以解决扩展性问题，还可以实现资源的动态预留和调整，减少中间节点业务的配置点，提高资源利用率。附图说明为了更清楚地说明本发明实施例的技术方案，下面将对本发明实施例中所需要使用的附图作简单地介绍。显而易见地，下面所描述的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图；图1是本发明实施例提供的一种网络切片的方法的流程示意图；图2是本发明实施例提供的另一种网络切片的方法的流程示意图；图3是本发明实施例提供的另一种网络切片的方法的流程示意图；图4是本发明实施例提供的一种网络切片的方法中的基础切片与子切片的示意图；图5是本发明实施例提供的一种网络切片的方法中的建立子切片业务路径的过程示意图；图6是本发明实施例提供的一种网络切片的方法中的请求消息的格式示意图；图7是本发明实施例提供的一种网络切片的方法中的建立子切片业务路径的过程示意图；图8是本发明实施例提供的一种网络切片的方法中的响应消息的格式示意图；图9是本发明实施例提供的一种网络切片的装置的结构示意图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。在本发明的描述中，术语“内”、“外”、“纵向”、“横向”、“上”、“下”、“顶”、“底”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明而不是要求本发明必须以特定的方位构造和操作，因此不应当理解为对本发明的限制。此外，下面所描述的本发明各个实施方式中所涉及到的技术特征只要彼此之间未构成冲突就可以相互组合。如图1所示，本发明提供了一种网络切片的方法，包括：当有新业务需求时，检查基础切片组中是否存在一个基础切片满足基本要求，若是则基于相应基础切片建立子切片业务路径；否则新业务建立失败，向控制器报告错误告警；若子切片业务路径建立成功，则业务流在子切片业务路径上使用子切片带宽进行转发；若子切片业务路径建立失败，则新业务建立失败，向控制器报告错误告警。实施例1:本发明实施例提供了一种网络切片的方法，如图2所示，网络切片的方法包括：在步骤201中，当有新业务需求时，检查基础切片组中是否存在一个基础切片满足基本要求；其中，所述基础切片组通过针对不同的行业应用，在共享的物理网络基础上规划得到；所述基础切片组中的各个基础切片均有各自的ID，基础切片中的各个节点均有各自的SID地址；所述基本要求包括基本的连通性和服务等级协议带宽要求，与新业务需求相关联。在步骤202中，若存在一个基础切片满足基本要求，则基于相应基础切片建立子切片，由相应基础切片的控制面根据新业务需求在相应基础切片进行子切片业务路径的建立；其中，所述相应基础切片是指基础切片组中满足基本要求的一个基础切片；所述子切片业务路径由相应基础切片中的节点、链路有序排列而成，子切片业务路径包含子切片RID、子切片预留带宽、子切片优先级，以及路径预留带宽信息。所述子切片RID用于对子切片进行唯一标识；所述子切片带宽为与所述新业务需求相对应的子切片的带宽；所述子切片优先级用于当有至少两个子切片需要建立时，按照子切片优先级顺序依次进行各个子切片带宽的预留；所述路径预留带宽为与所述新业务需求相对应的带宽。在步骤203中，若没有一个基础切片能够满足基本要求，则向控制器报告错误告警。若有一个基础切片能够满足基本要求，但根据新业务需求子切片业务路径建立失败，则向控制器报告错误告警。通过位于子切片业务路径中首位的节点，即子切片业务路径中的头结点，向控制器报告子切片业务路径建立失败的原因，控制器基于接收到的子切片业务路径建立失败的原因对相应基础切片进行调优。在步骤204中，若相应基础切片的控制面完成在子切片业务路径上逐跳完成了子切片带宽和子切片RID分配，即子切片业务路径建立成功，则建立子切片RID和子切片带宽的映射关系，业务流根据子切片RID和子切片带宽的映射关系在子切片业务路径上使用子切片带宽进行转发；所述业务流是指与所述新业务需求相对应的业务报文。本发明提供的网络切片的方法采用基础切片结合子切片的层次化方式，通过基础切片实现对子切片带宽的灵活分配和管理，具体为：通过基础切片负责子切片业务路径的建立，完成子切片带宽和子切片RID分配；通过基础切片建立子切片RID和子切片带宽的映射关系，减少中间节点维护的状态配置，子切片带宽随需按照子切片业务路径分配，提高资源利用率。在本发明实施例中，所述根据新业务需求在相应基础切片进行子切片业务路径的建立，具体包括：根据新业务需求，由相应基础切片的控制面根据相应基础切片的逻辑拓扑测量的相应基础切片的链路时延和相应基础切片的带宽，在相应基础切片上计算得到子切片业务路径；计算得到子切片业务路径后，由基础切片的控制面在子切片业务路径上逐跳预留子切片带宽，以此进行子切片业务路径的建立；子切片业务路径中的节点均为相应基础切片中的节点；子切片业务路径中的链路均为相应基础切片中的链路；所述子切片业务路径由相应基础切片中的节点、链路有序排列而成。本发明提供的网络切片的方法通过基础切片计算得到子切片业务路径，通过基础切片的控制面在子切片业务路径上逐跳预留子切片带宽，完成子切片带宽和子切片RID分配，建立子切片RID和子切片带宽的映射关系，子切片只需按映射关系进行转发，相比现有的每新建一个切片则所有的节点都需要更新，提高了资源利用率。在本发明实施例中，如图3所示，子切片业务路径建立成功或失败的判断过程具体包括：在步骤301中，子切片业务路径中的头节点发起子切片带宽预留和子切片RID分配流程。在步骤302中，子切片业务路径中的其他节点在收到各自的上一节点的请求消息后，各自回应响应消息给子切片业务路径中的头节点；其中，所述子切片业务路径中的头节点为位于子切片业务路径中首位的节点。在步骤303中，若所有待响应节点回应的响应消息中均携带分配成功的状态标识，则子切片业务路径建立成功；其中，所述待响应节点为子切片业务路径中当下待预留子切片带宽的节点。在步骤304中，若所有待响应节点中存在一个待响应节点，其回应的响应消息中携带分配失败的状态信息，则子切片业务路径建立失败。其中，所述响应消息中除了携带分配成功的状态标识或分配失败的状态信息外，还携带待响应节点的SID地址、基础切片ID和子切片RID；所述SID地址用于指示响应消息具体为哪一个待响应节点发出的响应消息。下面结合图4、图5和图7进行详细说明，图4中，当有一个行业用户U1发起了新业务需求，需要一个100M带宽的共享子切片时，检查得到基础切片组中存在基础切片S1满足基本要求，基础切片S1由节点1、节点2、节点3、节点4、节点5和节点6组成，基础切片的带宽为20G，可以基于FlexE接口建立；基于基础切片S1满足创建子切片S的基本要求，子切片预留带宽为100M、子切片RID为1，子切片优先级为5；基础切片S1的控制面根据基础切片S1的逻辑拓扑、测量的基础切片S1的链路时延和基础切片S1的带宽进行子切片业务路径的建立，计算得到低时延的从节点1到节点5的子切片业务路径{1，3，4，6，5}，其中，子切片业务路径的头结点为节点1。以图5为例，子切片业务路径建立的具体过程包括：节点1发起子切片带宽和子切片RID分配流程，查找到业务路径下一跳节点3的出接口INTF13，该接口未绑定RID 1，且接口的链路剩余带宽20G大于或等于路径预留带宽10M，则基于接口INTF13配置子切片带宽为路径预留带宽10M，并基于该接口设置子切片优先级5和子切片预留带宽100M，将接口绑定RID 1。完成子切片带宽和子切片RID分配后，建立子切片带宽10M和子切片RID 1的映射关系。节点1发送一个请求消息Res_Request给节点3，用于请求子切片带宽和子切片RID分配；请求消息的格式如图6所示，请求消息中包括：相应基础切片的ID为1、子切片RID为1、子切片预留带宽为100M、子切片优先级为5和路径预留带宽10M。节点3接收到请求消息后，查找到业务路径下一跳节点4的出接口INTF34，该接口未绑定RID 1，且接口的链路剩余带宽20G大于或等于路径预留带宽10M，则基于接口INTF34配置子切片带宽为路径预留带宽10M，并基于该接口设置子切片优先级5和子切片预留带宽100M，将接口绑定RID 1。完成子切片带宽和子切片RID分配后，建立子切片带宽10M和子切片RID 1的映射关系。节点3回应携带分配成功的状态标识的响应消息给节点1，具体格式如图8所示，响应消息中基础切片的ID为1表示相应的基础切片为S1，RID为1表示分配的子切片RID为1，响应消息中state为0表示完成子切RID1与子切片带宽10M的映射关系的建立；同时，节点3将请求消息中的目的地址由节点3更新为节点4，以便将更新后的请求消息发给节点4。节点4接收到请求消息后，查找到业务路径下一跳节点6的出接口INTF46，该接口已绑定RID 1，当前子切片带宽20M，且接口的链路剩余带宽10G大于或等于路径预留带宽10M，则基于接口INTF46配置子切片带宽为30M，即当前子切片带宽20M+路径预留带宽10M，并基于该接口设置子切片优先级5和子切片预留带宽100M。完成子切片带宽和子切片RID分配后，建立子切片带宽10M和子切片RID 1的映射关系。节点4回应携带分配成功的状态标识的响应消息给节点1；同时，节点4将请求消息中的目的地址由节点4更新为节点6，以便将更新后的请求消息发给节点6。节点6接收到请求消息后，查找到业务路径下一跳节点5的出接口INTF65，该接口未绑定RID 1，且接口的链路剩余带宽20G大于或等于路径预留带宽10M，则基于接口INTF65配置子切片带宽为路径预留带宽10M，并基于该接口设置子切片优先级5和子切片预留带宽100M，将接口绑定RID 1。完成子切片带宽和子切片RID分配后，建立子切片带宽10M和子切片RID 1的映射关系。节点6回应携带分配成功的状态标识的响应消息给节点1；同时，节点6将请求消息中的目的地址由节点6更新为节点5，以便将更新后的请求消息发给节点5。节点5接收到请求消息后，回应携带分配成功的状态标识的响应消息给节点1。节点1收到节点3、节点4、节点5和节点6的响应消息后，发现所有待响应节点回应的响应消息中均携带分配成功的状态标识，因此，判定子切片业务路径{1，3，4，6，5}建立成功，则相应业务流在子切片业务路径上使用子切片带宽进行转发。以图7为例，子切片业务路径建立的具体过程包括：节点1发起子切片带宽和子切片RID分配流程，发送一个请求消息Res_Request给节点3，用于请求子切片带宽和子切片RID分配；请求消息的格式如图6所示，请求消息中包括：相应基础切片的ID为1、子切片RID为1、子切片预留带宽为100M、子切片优先级为5和路径预留带宽为10M。节点3接收到请求消息后，回应携带分配成功的状态标识的响应消息给节点1，具体格式如图8所示，响应消息中基础切片的ID为1表示相应的基础切片为S1，RID为1表示分配的子切片RID为1，响应消息中state为0表示完成子切RID1与子切片带宽10M的映射关系的建立；同时，节点3将请求消息中的目的地址由节点3更新为节点4，以便将更新后的请求消息发给节点4。节点4接收到请求消息后，回应携带分配失败的状态信息的响应消息给节点1；分配失败的状态信息在图7中表示为Err；同时，节点4将请求消息中的目的地址由节点4更新为节点6，以便将更新后的请求消息发给节点6。节点6接收到请求消息后，回应携带分配成功的状态标识的响应消息给节点1；同时，节点6将请求消息中的目的地址由节点6更新为节点5，以便将更新后的请求消息发给节点5。节点5接收到请求消息后，回应携带分配成功的状态标识的响应消息给节点1。节点1收到节点3、节点4、节点5和节点6的响应消息后，发现节点4回应的响应消息中携带分配失败的状态信息，因此，判定子切片业务路径{1，3，4，6，5}建立失败，则基于分配失败的状态信息对基础切片S1进行调优，直至基础切片S1满足基本要求。同理，如图4所示，当有一个行业用户U2发起了新业务需求，需要一个50M带宽的共享子切片时，检查得到基础切片组中存在基础切片S1满足基本要求，基于基础切片S1满足创建子切片S的基本条件，子切片预留带宽为50M、子切片RID为2，子切片优先级为3；基础切片S1的控制面根据基础切片S1的逻辑拓扑、测量的基础切片S1的链路时延和基础切片S1的带宽进行子切片业务路径的建立。在本发明实施例中，所述请求消息用于请求子切片带宽的预留和子切片RID的分配；所述请求消息中包括：相应基础切片的ID、子切片RID、子切片预留带宽子切片优先级；进一步的，所述请求消息中可以还包括子切片业务路径预留带宽；其中，子切片业务路径预留带宽小于或等于子切片预留带宽。在本发明实施例中，所述子切片业务路径中的其他非尾节点在收到各自的上一节点的请求消息后，根据自己链路剩余带宽、子切片预留带宽、路径预留带宽和子切片优先级，进行各自是否能够完成子切片带宽和子切片RID分配的判断，并将判断结果以响应消息的形式发送给子切片业务路径中的头节点。若在待响应节点处能够完成子切片带宽和子切片RID分配，则响应消息中携带相应基础切片的ID、子切片RID、相应待响应节点的路径地址和分配成功的状态标识；否则，响应消息中携带相应基础切片的ID、相应待响应节点的路径地址和分配失败的状态信息。子切片业务路径中的尾节点在收到上一节点的请求消息后，响应消息中携带相应基础切片的ID、子切片RID、相应待响应节点的SID地址和分配成功的状态标识。其中，所述SID地址用于指示响应消息具体为哪一个待响应节点发出的响应消息；所述分配失败的状态信息包括：无法分配子切片RID的信息、无法预留子切片带宽的信息或无法预留子切片业务路径带宽。在本发明实施例中，所述根据自己链路剩余带宽、子切片预留带宽、路径预留带宽和子切片优先级，进行各自是否能够完成子切片带宽和子切片RID分配的判断，具体包括：节点查找业务路径下一跳出接口集合，若出接口集合为空，则判定在该节点处无法完成子切片带宽和子切片RID分配。否则，计算得到各接口的链路剩余带宽。若接口集合中的接口未绑定RID，若接口的链路剩余带宽大于或等于路径预留带宽，则基于该接口配置子切片带宽为路径预留带宽，并基于该接口设置子切片优先级和子切片预留带宽，将接口绑定RID，判定在该节点处能够完成子切片带宽和子切片RID分配；否则，判定在该节点处无法完成子切片带宽和子切片RID分配。若接口集合中的接口已绑定了RID，若接口的链路剩余带宽大于或等于路径预留带宽，则基于该接口更新配置子切片带宽为当前子切片带宽+路径预留带宽，并基于该接口更新子切片优先级和子切片预留带宽，判定在该节点处能够完成子切片带宽和子切片RID分配；否则，判定在该节点处无法完成子切片带宽和子切片RID分配。在本发明实施例中，在完成子切片带宽和子切片RID分配，在子切片业务路径建立后，建立子切片RID和子切片带宽的映射关系。将子切片RID由子切片业务路径中的头节点封装到业务流中，根据子切片RID与子切片带宽的映射关系，完成所述业务流在子切片业务路径上使用子切片带宽进行转发。在本发明实施例中，当子切片中存在至少一条子切片业务路径时，为各个子切片业务路径预留各自的子切片业务路径带宽；其中，子切片带宽和子切片业务路径带宽为动态配置，具体包括：当头节点感知到子切片业务路径中长时间没有业务流时，通过老化消息释放预留的子切片业务路径带宽。当子切片中没有分配子切片业务路径带宽时，各节点释放预留的子切片带宽，释放子切片RID与子切片带宽的映射关系。当子切片中再次有业务流时，为子切片分配新的子切片带宽，建立子切片RID与新的子切片带宽的映射关系，进行新的子切片业务路径的建立。实施例2：本发明实施例提供了一种网络切片的装置，包括子切片业务路径模块和业务流转发模块，其中：所述子切片业务路径建立模块，用于在有新业务需求时，检查基础切片组中是否存在一个基础切片满足基本要求，若是则基于相应基础切片建立子切片业务路径；否则新业务建立失败，向控制器报告错误告警；所述业务流转发模块，用于在子切片业务路径建立成功时，则在子切片业务路径上使用子切片带宽转发业务流；若子切片业务路径建立失败，则新业务建立失败，向控制器报告错误告警。值得说明的是，上述单元之间的信息交互、执行过程等内容，由于与本发明的处理方法实施例基于同一构思，具体内容可参见本发明方法实施例中的叙述，此处不再赘述。本领域普通技术人员可以理解实施例的各种方法中的全部或部分步骤是可以通过程序来指令相关的硬件来完成，该程序可以存储于一计算机可读存储介质中，存储介质可以包括：只读存储器、随机存取存储器、磁盘或光盘等。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明的保护范围之内。
