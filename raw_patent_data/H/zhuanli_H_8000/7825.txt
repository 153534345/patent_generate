标题title
一种基于功率分配因子的储能电站AGC有功功率分配方法
摘要abst
本发明涉及储能电站自动控制技术领域，公开了一种基于功率分配因子的储能电站AGC有功功率分配方法，包括：判断AGC目标功率是否超过储能电站中各储能变流器PCS的最大功率之和，若是则将各储能变流器PCS的最大功率作为分配功率进行分配，若否则计算各储能变流器PCS的功率分配因子，根据储能电站AGC目标功率和功率分配因子计算各储能变流器PCS的分配功率，并按照分配功率进行目标功率的分配。该方法综合考虑了电池SOC值、电池SOC上下限值、PCS最大充/放电功率、额定容量等因素，既满足实时响应AGC目标功率，又考虑电池一致性，提高整站控制调节能力和储能设备使用寿命，促进储能电站长期稳定高效运行。
权利要求书clms
1.一种基于功率分配因子的储能电站AGC有功功率分配方法，其特征在于，步骤包括：S1、判断AGC目标功率是否超过储能电站中各储能变流器PCS的最大功率之和，若是则将各储能变流器PCS的最大功率作为分配功率进行分配，若否则进入步骤S2；S2、计算基于各储能变流器PCS中不同目标特征分配因子的功率分配因子，根据储能电站AGC目标功率和功率分配因子计算各储能变流器PCS的分配功率，并按照各储能变流器PCS的分配功率进行目标功率的分配；其中，所述目标特征分配因子包括SOC上下限分配因子、最大充/放电功率分配因子、额定容量分配因子。2.根据权利要求1所述的一种基于功率分配因子的储能电站AGC有功功率分配方法，其特征在于，步骤S2中，计算基于各储能变流器PCS中不同目标特征分配因子的功率分配因子的方法为：S2-1、获取储能电站中各储能变流器PCS对应电池的实时SOC值；S2-2、根据预设的电池的SOC上下限、最大充/放电功率、额定容量以及获取的实时SOC值计算各储能变流器PCS的功率分配因子。3.根据权利要求2所述的一种基于功率分配因子的储能电站AGC有功功率分配方法，其特征在于，步骤S2-2的具体过程为：S2-2-1、根据最大充/放电功率计算最大充/放电功率分配因子Fpi；S2-2-2、根据额定容量计算额定容量分配因子Fri；S2-2-3、根据电池的实时SOC值以及SOC上下限计算电池SOC值分配因子Fsi；S2-2-4、根据所述最大充/放电功率分配因子Fpi、额定容量分配因子Fri、电池SOC值分配因子Fsi计算各储能变流器PCS的功率分配因子Fi。4.根据权利要求3所述的一种基于功率分配因子的储能电站AGC有功功率分配方法，其特征在于，根据最大充/放电功率计算最大充/放电功率分配因子Fpi的公式为：式中，Pimax为最大充/放电功率。5.根据权利要求3所述的一种基于功率分配因子的储能电站AGC有功功率分配方法，其特征在于，根据额定容量计算额定容量分配因子Fri的公式为：式中，Ratecapi为额定容量。6.根据权利要求3所述的一种基于功率分配因子的储能电站AGC有功功率分配方法，其特征在于，根据电池的实时SOC值以及SOC上下限计算电池SOC值分配因子Fsi的公式为：①在放电时：②在充电时：式中，SOCimax和SOCimin为SOC上下限，SOCi为实时SOC值。7.根据权利要求3所述的一种基于功率分配因子的储能电站AGC有功功率分配方法，其特征在于，根据所述最大充/放电功率分配因子Fpi、额定容量分配因子Fri、电池SOC值分配因子Fsi计算各储能变流器PCS的功率分配因子Fi的公式为：式中，0≤Fi≤1。8.根据权利要求1所述的一种基于功率分配因子的储能电站AGC有功功率分配方法，其特征在于，步骤S2中，根据储能电站AGC目标功率和功率分配因子计算各储能变流器PCS的分配功率的公式为：Pi＝Fi*PAGC式中，Pi为储能变流器PCS的分配功率，PAGC为目标功率。9.根据权利要求1所述的一种基于功率分配因子的储能电站AGC有功功率分配方法，其特征在于，步骤S2中，在得到各储能变流器PCS的分配功率后，结合各储能变流器PCS的单次最大调节量、调节速率、调节死区对分配功率进行修正，并按照修正后的分配功率进行目标功率的分配。
说明书desc
技术领域本发明涉及储能电站自动控制技术领域，具体涉及一种基于功率分配因子的储能电站AGC有功功率分配方法。背景技术当前关于储能电站AGC分配PCS有功功率的方法，并没有明确的国家标准或行业标准，各设备厂商结合自身产品特性会提出各自的功率分配算法。从现有资料来看，传统的功率分配算法相对比较简单、考虑问题相对比较片面，通常只偏重于满足某一方面的要求。例如，有的算法仅以满足储能电站总输出功率为目的，只考虑当前PCS调节能力是否满足要求、总调节次数最少等因素，不考虑电池一致性、电池单元SOC等情况，可能出现虽然储能电站总输出功率符合要求，但是SOC差异很大的电池单元输出功率却一样，甚至有的PCS处于充电状态、有的PCS处于放电状态的情况。还有传统的AGC功率均分控制调节方法，当需要所有储能设备放电时，每一台储能设备的目标放电功率，是按照它的最大放电功率在总的最大放电功率中所占的比例来分配总的目标放电功率，当需要所有储能设备充电时，每一台储能设备的目标充电功率，是按照它的最大充电功率在总的最大充电功率中所占的比例来分配总的目标充电功率。这些传统算法的优点是计算简单，缺点是没有考虑电池SOC因素，会引起电池一致性差、电池SOC出现较大差异，甚至最终导致部分电池单元率先放完电或充满电而无法继续参与调节、影响整站调节能力等问题。因此电池SOC是储能电站AGC控制策略必须要考虑的一个因素，但是考虑电池SOC因素的方式又各不一样。例如，公开号为CN114069676A的专利文献公开了一种基于SOC均分的电池储能电站AGC控制方法，该方法是根据各个储能设备实时SOC值的相对大小按比例进行目标输出功率的分配，其核心思想是基于以下公式：该方法只考虑电池实时SOC值、SOC上下限值因素，实质是按照电池剩余容量占总剩余容量的比例来分配目标功率，若要考虑最大功率限值因素，则需要算法进行二次循环，增加了计算量，影响响应速度。又例如，公开号为CN113541174A的专利文献公开了一种计及SOC排序的储能AGC分配PCS有功功率的方法及系统，该方法核心思想是基于电池实时SOC数进行PCS优先级排序，以放电为例，SOC数值高的PCS优先进行放电，剩余待调节功率依次分配给优先级低的PCS。这种方法只是按照电池实时SOC值排序来确定PCS调节优先级，但是SOC数值高并不代表可放电时间就一定长，还要考SOC上下限值、电池容量、放电功率等因素。发明内容本发明的目的在于提供一种基于功率分配因子的储能电站AGC有功功率分配方法，其不仅能够满足储能电站AGC目标功率符合要求，还综合考虑了电池实时SOC值、SOC上下限值、PCS最大充/放电功率、额定容量、计算响应速度等诸多因素，提高电池一致性，提高整站控制调节能力和储能设备使用寿命，促进储能电站长期稳定高效运行。本发明通过以下技术方案来实现上述目的：一种基于功率分配因子的储能电站AGC有功功率分配方法，步骤包括：S1、判断AGC目标功率是否超过储能电站中各储能变流器PCS的最大功率之和，若是则将各储能变流器PCS的最大功率作为分配功率进行分配，若否则进入步骤S2；S2、计算基于各储能变流器PCS中不同目标特征分配因子的功率分配因子，根据储能电站AGC目标功率和功率分配因子计算各储能变流器PCS的分配功率，并按照各储能变流器PCS的分配功率进行目标功率的分配；其中，所述目标特征分配因子包括SOC上下限分配因子、最大充/放电功率分配因子、额定容量分配因子。进一步改进在于，步骤S2中，计算基于各储能变流器PCS中不同目标特征分配因子的功率分配因子的方法为：S2-1、获取储能电站中各储能变流器PCS对应电池的实时SOC值；S2-2、根据预设的电池的SOC上下限、PCS最大充/放电功率、额定容量以及获取的实时SOC值计算各储能变流器PCS的功率分配因子。进一步改进在于，步骤S2-2的具体过程为：S2-2-1、根据最大充/放电功率计算最大充/放电功率分配因子Fpi；S2-2-2、根据额定容量计算额定容量分配因子Fri；S2-2-3、根据电池的实时SOC值以及SOC上下限计算电池SOC值分配因子Fsi；S2-2-4、根据所述最大充/放电功率分配因子Fpi、额定容量分配因子Fri、电池SOC值分配因子Fsi计算各储能变流器PCS的功率分配因子Fi。进一步改进在于，根据最大充/放电功率计算最大充/放电功率分配因子Fpi的公式为：式中，Pimax为最大充/放电功率。进一步改进在于，根据额定容量计算额定容量分配因子Fri的公式为：式中，Ratecapi为额定容量。进一步改进在于，根据电池的实时SOC值以及SOC上下限计算电池SOC值分配因子Fsi的公式为：①在放电时：②在充电时：式中，SOCimax和SOCimin为SOC上下限，SOCi为实时SOC值。进一步改进在于，根据所述最大充/放电功率分配因子Fpi、额定容量分配因子Fri、电池SOC值分配因子Fsi计算各储能变流器PCS的功率分配因子Fi的公式为：式中，0≤Fi≤1。进一步改进在于，步骤S2中，根据储能电站AGC目标功率和功率分配因子计算各储能变流器PCS的分配功率的公式为：Pi＝Fi*PAGC式中，Pi为储能变流器PCS的分配功率，PAGC为目标功率。进一步改进在于，步骤S2中，在得到各储能变流器PCS的分配功率后，结合各储能变流器PCS的单次最大调节量、调节速率、调节死区对分配功率进行修正，并按照修正后的分配功率进行目标功率的分配。本发明的有益效果在于：该方法综合考虑了电池SOC值、电池SOC上下限值、PCS最大充/放电功率、额定容量等因素，既满足实时响应AGC目标功率，又考虑电池一致性，提高整站控制调节能力和储能设备使用寿命，促进储能电站长期稳定高效运行。附图说明图1为本发明的方法示意图。具体实施方式下面结合附图对本申请作进一步详细描述，有必要在此指出的是，以下具体实施方式只用于对本申请进行进一步的说明，不能理解为对本申请保护范围的限制，该领域的技术人员可以根据上述申请内容对本申请作出一些非本质的改进和调整。如图1所示，一种基于功率分配因子的储能电站AGC有功功率分配方法，其针对储能电站AGC下发的有功功率调节指令中的总功率在各储能变流器PCS中的分配问题，综合考虑了电池实时SOC值、SOC上下限值、PCS最大充/放电功率、额定容量、计算响应速度等诸多因素，以提高电池一致性，具体步骤包括：S1、判断AGC目标功率是否超过储能电站中各储能变流器PCS的最大功率之和，若是则将各储能变流器PCS的最大功率作为分配功率进行分配，若否则进入步骤S2；S2、计算基于各储能变流器PCS中不同目标特征分配因子的功率分配因子，根据储能电站AGC目标功率和功率分配因子计算各储能变流器PCS的分配功率，并按照各储能变流器PCS的分配功率进行目标功率的分配；其中，所述目标特征分配因子包括SOC上下限分配因子、最大充/放电功率分配因子、额定容量分配因子。具体的，计算基于各储能变流器PCS中不同目标特征分配因子的功率分配因子的方法为：S2-1、获取储能电站中各储能变流器PCS对应电池的实时SOC值；S2-2、根据预设的电池的SOC上下限、PCS最大充/放电功率、额定容量以及获取的实时SOC值计算各储能变流器PCS的功率分配因子，具体过程为：S2-2-1、根据最大充/放电功率计算最大充/放电功率分配因子Fpi，计算公式为：式中，Pimax为最大充/放电功率；S2-2-2、根据额定容量计算额定容量分配因子Fri，计算公式为：式中，Ratecapi为额定容量；S2-2-3、根据电池的实时SOC值以及SOC上下限计算电池SOC值分配因子Fsi，计算公式为：①在放电时：②在充电时：式中，SOCimax和SOCimin为SOC上下限，SOCi为实时SOC值；S2-2-4、根据所述最大充/放电功率分配因子Fpi、额定容量分配因子Fri、电池SOC值分配因子Fsi计算各储能变流器PCS的功率分配因子Fi，计算公式为：式中，0≤Fi≤1。其中，根据储能电站AGC目标功率和功率分配因子计算各储能变流器PCS的分配功率的公式为：Pi＝Fi*PAGC；式中，Pi为储能变流器PCS的分配功率，PAGC为目标功率。另外，本发明中电池的SOC上下限、PCS最大充/放电功率、额定容量等参数，是通过预先对储能电站各PCS设备、电池设备建表构建模型，在关系型数据库中建立PCS设备参数表、电池设备参数表，并设置相关设备参数得到。经过上述分配过程，所有储能变流器PCS的分配功率满足公式：优选的，在得到各储能变流器PCS的分配功率后，需要结合PCS单次最大调节量、调节速率、调节死区等因素对分配功率进行修正，例如：若分配功率与当前发电功率相比没有超过PCS设备的单次最大调节量，则无需修正，若超过单次最大调节量，则将分配功率修正为当前发电功率加单次最大调节量；若分配功率与当前发电功率相比没有超过PCS设备的调节死区，则将设点功率修正为当前发电功率，若超过调节死区，则无需修正。下面以AGC目标功率为正值时为例进行说明：参照下表，某储能电站可调PCS台数共3台，AGC目标功率PAGC为150kW，而各储能变流器PCS的最大功率之和为100+70+50＝220kW，目标功率PAGC没有超过各储能变流器PCS的最大功率之和，按照本发明的分配方法进行分配。首先，获取各储能变流器PCS对应电池的实时SOC值，分别为50％、55％和60％；接着，按照上述公式计算各储能变流器PCS的功率分配因子，分别为F1＝0.478，F2＝0.327，F3＝0.195；最后，计算各储能变流器PCS的分配功率，分别为P1＝71.70kW，P2＝49.05kW，P3＝29.25kW，结合PCS单次最大调节量、调节速率、调节死区等因素对分配功率进行修正后，按照修正后的分配功率进行目标功率的分配。可以看出，该方法综合考虑了电池SOC值、电池SOC上下限值、PCS最大充/放电功率、额定容量等因素，既满足实时响应AGC目标功率，又考虑电池一致性，提高整站控制调节能力和储能设备使用寿命，促进储能电站长期稳定高效运行。以上所述实施例仅表达了本发明的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对本发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干变形和改进，这些都属于本发明的保护范围。
