标题title
一种具有直通模式的降压电路
摘要abst
本发明涉及一种电源电压转换电路，具体说是具有直通模式的降压电路。它包括驱动电路5、采集电路、第一比较电路、第二比较电路、计时器6和逻辑电路4。逻辑电路含有延时单元，其内设置有上功率管MP的最小关断时间MIN_TOFF，在输入电压VIN略大于输出电压VOUT时，当输入信号PWM变为高电平后，上功率管MP等待最小关断时间MIN_TOFF后开启。当信号PWM为高电平时，逻辑电路控制驱动电路产生的驱动信号HSD_GT为高电平，进而在降压电路的输入电压VIN等于或低于输出电压VOUT时，实现直通。该降压电路的成本较低，设计难度小。
权利要求书clms
1.一种具有直通模式的降压电路，其特征在于包括：驱动电路，用于产生驱动降压电路上功率管MP开关状态的驱动信号HSD_GT和降压电路下功率管MN开关状态的驱动信号LSD_GT；采集电路，用于采集降压电路SW点的电压信号，并输出斜坡信号SW_RAMP；第一比较电路，含有误差放大器，用于将降压电路的反馈电压FB与基准电压信号VREF比较、并根据比较结果输出信号EA_OUT；第二比较电路，含有比较器，用于将斜坡信号SW_RAMP与信号EA_OUT比较、并根据比较结果输出信号PWM；计时器，用于计算上功率管MP导通时间，并输出信号TON_END；逻辑电路，用于根据信号TON_END和信号PWM、控制驱动电路产生的驱动信号HSD_GT和驱动信号LSD_GT的类型，进而控制上功率管MP和下功率管MN的开关状态；且所述逻辑电路含有延时单元，其内设置有上功率管MP的最小关断时间MIN_TOFF，在输入电压VIN略大于输出电压VOUT时，当输入信号PWM变为高电平后，上功率管MP等待最小关断时间MIN_TOFF后开启；当信号PWM为高电平时，逻辑电路控制驱动电路产生的驱动信号HSD_GT为高电平，进而在降压电路的输入电压VIN等于或低于输出电压VOUT时，实现直通。2.如权利要求2所述的具有直通模式的降压电路，其特征在于所述逻辑电路含有输入口R、输入口S、输出口HSD_ON和输出口LSD_ON；所述比较器的输出端与逻辑电路的输入口R相连，用于向逻辑电路输入信号PWM；所述计时器与逻辑电路的输入口S相连，用于向逻辑电路输入信号TON_END；所述逻辑电路的输出口HSD_ON和输出口LSD_ON均与所述驱动电路相连。3.如权利要求3所述的具有直通模式的降压电路，其特征在于所述逻辑电路含有倒相器INV1、倒相器INV2、倒相器INV3、倒相器INV4、倒相器INV5、或非门NOR1、或非门NOR2、或非门NOR3、与非门NAND和D触发器；所述D触发器的CLK为上升沿触发，当D触发器R端的输入信号为0时，D触发器的Q端输出为0；所述倒相器INV1输入端即为所述输入口S，倒相器INV1输出端与或非门NOR1的一个输入端相连，或非门NOR1的另一输入端为所述输入口R，或非门NOR1的输出端与或非门NOR2的一个输入端相连，或非门NOR2的另一个输入端与所述或非门NOR2的输出端相连，或非门NOR2的输出端与或非门NOR3的一个输入端相连，所述输入口R与或非门NOR3的另一个输入端相连，或非门NOR3的输出端与倒相器INV2的输入端相连，倒相器INV2的输出端分别与倒相器INV3的输入端和与非门NAND的一个输入端相连，所述倒相器INV5的输出端分别与延时单元和与非门NAND的另一个输入端相连，延时单元与D触发器的R端相连，输入电压VIN与D触发器的D端相连，D触发器的Q端与INV5的输入端相连，所述倒相器INV3的输出端即为所述输出口LSD_ON，倒相器INV3的输出端与延时单元的CLK端相连；所述与非门NAND输出端与倒相器INV4的输入端相连，倒相器INV4的输出端即为所述输出口HSD_ON。4.如权利要求1所述的具有直通模式的降压电路，其特征在于所述采集电路包括电阻R1和电阻R2，电阻R1的一端与降压电路的SW点相连，电阻R1的另一端与电阻R2的一端相连，电阻R2的另一端接地，电阻R2的两端并联有电容C1；与电阻R2相连的电阻R1一端与所述比较器的反向输入端相连，且与电阻R2相连的电阻R1一端形成所述斜坡信号SW_RAMP。5.如权利要求1-5中任一项所述的具有直通模式的降压电路，其特征在于所述第一比较电路含有电阻RF1和电阻RF2，输出电压VOUT与电阻RF1的一端相连，电阻RF1的另一端与电阻RF2的一端相连，电阻RF2的另一端接地；与电阻RF2相连的电阻RF1一端与误差放大器的反相输入端相连，且与电阻RF2相连的电阻RF1一端形成所述反馈电压FB；所述基准电压信号VREF与误差放大器的同相输入端相连，误差放大器的输出端与比较器的同相输入端相连。
说明书desc
技术领域本发明涉及一种电源电压转换电路，具体说是具有直通模式的降压电路。背景技术在传统结构的直流开关式降压电路中，当输入电压非常接近或者低于设定的输出电压值时，为了得到尽可能高的输出电压，通常会额外增加一个低压差线性稳压器，让LDO为输出供电。当输入电压上升，大于输出一定值时，即关断LDO，重新让电路工作在开关降压模式。这样在输入电压较低时，尽可能的保证输出到达设定值，同时也保证了输出电压不超过设定值。然而，这种解决方案需要增加了一个LDO，导致整个降压电路的成本较高，同时也增加了设计的复杂度。发明内容本发明要解决的技术问题是提供一种具有直通模式的降压电路，该降压电路的成本较低，设计难度小。为解决上述问题，提供以下技术方案：本发明的具有直通模式的降压电路的特点是包括：驱动电路，用于产生驱动降压电路上功率管MP开关状态的驱动信号HSD_GT和降压电路下功率管MN开关状态的驱动信号LSD_GT。采集电路，用于采集降压电路SW点的电压信号，并输出斜坡信号SW_RAMP。第一比较电路，含有误差放大器，用于将降压电路的反馈电压FB与基准电压信号VREF比较、并根据比较结果输出信号EA_OUT。第二比较电路，含有比较器，用于将斜坡信号SW_RAMP与信号EA_OUT比较、并根据比较结果输出信号PWM。计时器，用于计算上功率管MP导通时间，并输出信号TON_END。逻辑电路，用于根据信号TON_END和信号PWM、控制驱动电路产生的驱动信号HSD_GT和驱动信号LSD_GT的类型，进而控制上功率管MP和下功率管MN的开关状态。且所述逻辑电路含有延时单元，其内设置有上功率管MP的最小关断时间MIN_TOFF，在输入电压VIN略大于输出电压VOUT时，当输入信号PWM变为高电平后，上功率管MP等待最小关断时间MIN_TOFF后开启。当信号PWM为高电平时，逻辑电路控制驱动电路产生的驱动信号HSD_GT为高电平，进而在降压电路的输入电压VIN等于或低于输出电压VOUT时，实现直通。其中，所述逻辑电路含有输入口R、输入口S、输出口HSD_ON和输出口LSD_ON；所述比较器的输出端与逻辑电路的输入口R相连，用于向逻辑电路输入信号PWM；所述计时器与逻辑电路的输入口S相连，用于向逻辑电路输入信号TON_END；所述逻辑电路的输出口HSD_ON和输出口LSD_ON均与所述驱动电路相连。所述逻辑电路含有倒相器INV1、倒相器INV2、倒相器INV3、倒相器INV4、倒相器INV5、或非门NOR1、或非门NOR2、或非门NOR3、与非门NAND和D触发器；所述D触发器的CLK为上升沿触发，当D触发器R端的输入信号为0时，D触发器的Q端输出为0。所述倒相器INV1输入端即为所述输入口S，倒相器INV1输出端与或非门NOR1的一个输入端相连，或非门NOR1的另一输入端为所述输入口R，或非门NOR1的输出端与或非门NOR2的一个输入端相连，或非门NOR2的另一个输入端与所述或非门NOR2的输出端相连，或非门NOR2的输出端与或非门NOR3的一个输入端相连，所述输入口R与或非门NOR3的另一个输入端相连，或非门NOR3的输出端与倒相器INV2的输入端相连，倒相器INV2的输出端分别与倒相器INV3的输入端和与非门NAND的一个输入端相连，所述倒相器INV5的输出端分别与延时单元和与非门NAND的另一个输入端相连，延时单元与D触发器的R端相连，输入电压VIN与D触发器的D端相连，D触发器的Q端与INV5的输入端相连，所述倒相器INV3的输出端即为所述输出口LSD_ON，倒相器INV3的输出端与延时单元的CLK端相连；所述与非门NAND输出端与倒相器INV4的输入端相连，倒相器INV4的输出端即为所述输出口HSD_ON。所述采集电路包括电阻R1和电阻R2，电阻R1的一端与降压电路的SW点相连，电阻R1的另一端与电阻R2的一端相连，电阻R2的另一端接地，电阻R2的两端并联有电容C1。与电阻R2相连的电阻R1一端与所述比较器的反向输入端相连，且与电阻R2相连的电阻R1一端形成所述斜坡信号SW_RAMP。所述第一比较电路含有电阻RF1和电阻RF2，输出电压VOUT与电阻RF1的一端相连，电阻RF1的另一端与电阻RF2的一端相连，电阻RF2的另一端接地；与电阻RF2相连的电阻RF1一端与误差放大器的反相输入端相连，且与电阻RF2相连的电阻RF1一端形成所述反馈电压FB。所述基准电压信号VREF与误差放大器的同相输入端相连，误差放大器的输出端与比较器的同相输入端相连。采取以上方案，具有以下优点：由于本发明的具有直通模式的降压电路的逻辑电路含有延时单元，其内设置有上功率管MP的最小关断时间MIN_TOFF，在输入电压VIN略大于输出电压VOUT时，当输入信号PWM变为高电平后，上功率管MP等待最小关断时间MIN_TOFF后开启，从而实现导通时间的自适应延长。当信号PWM为高电平时，逻辑电路控制驱动电路产生的驱动信号HSD_GT为高电平，进而在降压电路的输入电压VIN等于或低于输出电压VOUT时，从而实现直通。因而，本发明的降压电路当输入接近输出电压时，尽可能的将输出电压维持在设定值。当输入电压等于或者低于输出电压时，本发明的降压电路一直将上功率管MP开启，让输出电压尽可能的接近输入。相对于传统的直流开关式降压电路，无需实用低压差线性稳压器，降低了成本并简化了设计。附图说明图1是本发明的具有直通模式的降压电路的原理示意图；图2是本发明的具有直通模式的降压电路中逻辑电路的原理示意图；图3是本发明的具有直通模式的降压电路在输入电压VIN与输出电压VOUT压差足够大时的相关信号波形；图4是本发明的具有直通模式的降压电路在输入电压VIN略大于输出电压VOUT时的相关信号波形；图5是本发明的具有直通模式的降压电路在输入电压VIN等于或小于输出电压VOUT时的相关信号波形。具体实施方式以下结合附图1、2和实施例对本发明作进一步详细描述。如图1所示，本发明的具有直通模式的降压电路包括上功率管MP、下功率管MN、驱动电路5、采集电路、第一比较电路、第二比较电路、计时器6和逻辑电路4。上功率管MP为PMOS管，下功率管MN为NMOS管。上功率管MP的源极与输入电压VIN相连，上功率管MP漏极分别与电感L一端和下功率管MN的漏极相连，上功率管MP漏极即为降压电路的SW点，下功率管MN的源极接地，电感L的另一端输出电压VOUT，且电感L的该端分别与电阻RO和电容CO的一端相连，电阻RO和电容CO的另一端均接地。驱动电路5分别与上功率管MP和下功率管MN的栅极相连。驱动电路5用于产生驱动上功率管MP开关状态的驱动信号HSD_GT和下功率管MN开关状态的驱动信号LSD_GT。采集电路包括电阻R1和电阻R2，电阻R1的一端与SW点相连，电阻R1的另一端与电阻R2的一端相连，电阻R2的另一端接地，电阻R2的两端并联有电容C1。与电阻R2相连的电阻R1一端形成斜坡信号SW_RAMP。采集电路用于采集降压电路SW点的电压信号，并输出斜坡信号SW_RAMP。第一比较电路含有电阻RF1、电阻RF2和误差放大器2，输出电压VOUT与电阻RF1的一端相连，电阻RF1的另一端与电阻RF2的一端相连，电阻RF2的另一端接地。与电阻RF2相连的电阻RF1一端与误差放大器2的反相输入端相连，且与电阻RF2相连的电阻RF1一端形成所述反馈电压FB。基准电压信号VREF与误差放大器2的同相输入端相连。误差放大器2的输出端输出信号EA_OUT。本实施中基准电压信号VREF由基准电压电路生成，基准电压电路为现有技术，这里不在赘述。第一比较电路用于将降压电路的反馈电压FB与基准电压信号VREF比较、并根据比较结果输出信号EA_OUT。第二比较电路含有比较器3，该比较器3为PWM比较器3。与电阻R2相连的电阻R1一端与比较器3的反向输入端相连，误差放大器2的输出端与比较器3的同相输入端相连，比较器3的输出端与逻辑电路4相连。第二比较电路用于将斜坡信号SW_RAMP与信号EA_OUT比较、并根据比较结果输出信号PWM到逻辑电路4。计时器6与逻辑电路4相连。计时器6用于计算上功率管MP导通时间，并输出信号TON_END。如图2所示，所述逻辑电路4含有输入口R、输入口S、输出口HSD_ON和输出口LSD_ON。所述比较器3的输出端与逻辑电路4的输入口R相连，用于向逻辑电路4输入信号PWM。所述计时器6与逻辑电路4的输入口S相连，用于向逻辑电路4输入信号TON_END。所述逻辑电路4的输出口HSD_ON和输出口LSD_ON均与所述驱动电路5相连。逻辑电路4含有倒相器INV1、倒相器INV2、倒相器INV3、倒相器INV4、倒相器INV5、或非门NOR1、或非门NOR2、或非门NOR3、与非门NAND、D触发器7和延时单元8。所述D触发器7的CLK为上升沿触发，当D触发器7R端的输入信号为0时，D触发器7的Q端输出为0。所述倒相器INV1输入端即为所述输入口S，倒相器INV1输出端与或非门NOR1的一个输入端相连，或非门NOR1的另一输入端为所述输入口R，或非门NOR1的输出端与或非门NOR2的一个输入端相连，或非门NOR2的另一个输入端与所述或非门NOR2的输出端相连，或非门NOR2的输出端与或非门NOR3的一个输入端相连，所述输入口R与或非门NOR3的另一个输入端相连，或非门NOR3的输出端与倒相器INV2的输入端相连，倒相器INV2的输出端分别与倒相器INV3的输入端和与非门NAND的一个输入端相连，所述倒相器INV5的输出端分别与延时单元8和与非门NAND的另一个输入端相连，延时单元8与D触发器7的R端相连，输入电压VIN与D触发器7的D端相连，D触发器7的Q端与I NV5的输入端相连，所述倒相器INV3的输出端即为所述输出口LSD_ON，倒相器INV3的输出端与延时单元8的CLK端相连；所述与非门NAND输出端与倒相器INV4的输入端相连，倒相器INV4的输出端即为所述输出口HSD_ON。所述延时单元8为现有技术，这里不再赘述。逻辑电路4用于根据信号TON_END和信号PWM、控制驱动电路5产生的驱动信号HSD_GT和驱动信号LSD_GT的类型，进而控制上功率管MP和下功率管MN的开关状态。且所述逻辑电路4含有延时单元8，其内设置有上功率管MP的最小关断时间MIN_TOFF，在输入电压VIN略大于输出电压VOUT时，当输入信号PWM变为高电平后，上功率管MP等待最小关断时间MIN_TOFF后开启。当信号PWM为高电平时，逻辑电路4控制驱动电路5产生的驱动信号HSD_GT为高电平，进而在输入电压VIN等于或低于输出电压VOUT时，实现直通。在输入电压VIN比输出电压VOUT大的足够多情况下，上功率管的导通时间达到设定值时，信号TON_END为高电平，逻辑电路4的输出口HSD_ON输出低电平，逻辑电路4的输出口LSD_ON输出高电平，即通过驱动电路5关断上功率管MP，开启下功率管MN。进而在，斜率信号SW_RAMP开始下降，当其低于信号EA_OUT时，比较器3输出信号PWM变高电平，即关断下功率管MN，开启上功率管MP。如此周期性循环工作，这情况降压电路的工作模式为正常的脉冲宽度调制模式。此工作模式下，信号SW、斜率信号SW_RAMP、信号EA_OUT、信号TON_END和信号PWM的波形如图3所示。当输入电压VIN略大于输出电压VOUT时，为了保证输出电压仍为设定值，那么必须在每个周期内都自适应的延长上功率管MP的导通时间。因为误差放大器2具有很大增益，即使反馈电压FB比基准电压VREF低极微小的电压，信号EA_OUT电压也会上升足够多电压值。在上功率管MP导通的相位内，即使计时器6的输出信号TON_END变为高电平时，但是因为信号EA_OUT仍大于斜率信号RAMP_SW，比较器3输出信号PWM为高电平，逻辑电路4的R输入端为高，因此，逻辑电路4的输出口HSD_ON输出信号仍为高电平，上功率管MP仍处在导通状态。斜率信号RAMP_SW仍处在上升状态，当斜率信号RAMP_SW到达信号EA_OUT时，信号PWM输出低电平。此时信号TON_END已经处于高电平，因此逻辑电路4的输出口HSD_ON变为低电平，输出口LSD_ON变为高电平，也就是关断上功率管MP，开启下功率管MN。由于在逻辑电路4里设立最小关断时间MIN_TOFF，因此信号PWM变高之后，上功率管MP也不会马上开启。只有等最小关断时间MIN_TOFF过后，上功率管MP才会导通。此工作模式下，信号SW、斜率信号SW_RAMP、信号EA_OUT、信号TON_END和信号PWM的波形如图4所示。在这种状态下上功率管MP的导通时间已经不由计时器6决定，而是由比较器3的输出信号PWM决定。当输出电压VOUT略低于设定时，信号PWM为高的时间会自适应的延长，从而上功率管MP的导通时间也延长，保证了输出电压VOUT尽可能的达到设定值。当输入电压VIN等于或小于输出电压VOUT的设定值时,实际的输出电压已经低于设定值。此时反馈电压FB小于基准电压VREF，因此信号EA_OUT电压升高，且大于斜率信号RAMP_SW的电压，从而信号PWM为高电平，逻辑电路4的R端输入为高，即与非门NAND的一个输入端为高，根据与非门NAND的特性，逻辑电路4的输出口HSD_ON信号为高。即上功率管MP始终导通，降压电路也就进入了直通模式。此工作模式下，信号SW、斜率信号SW_RAMP、信号EA_OUT、信号TON_END和信号PWM的波形如图5所示。本发明的具有直通模式的直流开关式降压电路中，当输入电压VIN接近输出电压VOUT时，可以自适应的延长上功率管的导通时间，从而尽可能的将输出电压VOUT维持在设定值。当输入电压VIN等于或者低于输出电压设定值时，上功率管MP一直开启，让实际输出电压尽可能的接近输入电压VIN。相对于传统的直流开关式降压电路，本发明省去低压差线性稳压器，降低了成本并简化了设计。
