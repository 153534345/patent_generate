标题title
太阳能光伏发电装置故障检测方法及系统
摘要abst
本发明涉及图像数据处理技术领域，提出了一种太阳能光伏发电装置故障检测方法及系统，包括：获取标准光伏电池板及若干待检测光伏电池板的二值图像，将二值图像转换为频谱图；分别获取每张频谱图中的频谱中心曲线，去除每条频谱中心曲线的离群点并划分得到若干波动区间；根据频谱中心曲线及波动区间对逻辑权重函数进行修正，根据修正后的逻辑权重函数计算每块光伏电池板的频谱中心曲线，与标准光伏电池板的频谱中心曲线之间的波动距离；根据每块光伏电池板的波动距离获取每块光伏电池板的异常程度，根据异常程度判断光伏电池板是否发生断栅故障。本发明旨在解决波动距离计算时单一权重导致结果不准确影响异常判断的问题。
权利要求书clms
1.太阳能光伏发电装置故障检测方法，其特征在于，该方法包括以下步骤：获取标准光伏电池板的二值图像的频谱图，获取若干待检测光伏电池板的二值图像的频谱图；根据频谱图中的竖直中心线上的数据点的像素值获取每张频谱图相应的频谱中心曲线，获取每条频谱中心曲线中的若干离群点，将离群点作为分割点分别对每条频谱中心曲线划分得到每条频谱中心曲线的若干波动区间；获取每条频谱中心曲线的中心点以及曲线中每个波动区间的重要程度，根据每个波动区间的区间长度及重要程度，以及区间内数据点与曲线中心点的距离获取每条频谱中心曲线中每个波动区间内每个数据点的惩罚权重，根据每条频谱中心曲线中每个数据点的惩罚权重，以及标准光伏电池板的频谱中心曲线，获取每条频谱中心曲线对应的光伏电池板的波动距离；根据每块光伏电池板的波动距离获取每块光伏电池板的异常程度，根据异常程度判断光伏电池板是否发生断栅故障；所述获取每条频谱中心曲线的中心点以及曲线中每个波动区间的重要程度，包括的具体方法为：对于任意一条频谱中心曲线，将曲线的中点作为曲线的中心点，获取每个波动区间的中点，根据每个波动区间的中点与曲线中心点的距离，通过标准高斯函数对每个波动区间赋予权重，赋予到的权重记为每个区间的重要程度；所述根据每块光伏电池板的波动距离获取每块光伏电池板的异常程度，包括的具体方法为：对波动距离进行线性归一化处理，将归一化结果作为每块光伏电池板的异常程度；所述根据异常程度判断光伏电池板是否发生断栅故障，包括的具体方法为：在光伏电池板的异常程度大于第二预设阈值时，判定其发生断栅故障；在光伏电池板的异常程度小于或等于第二预设阈值时，判定其未发生断栅故障。2.根据权利要求1所述的太阳能光伏发电装置故障检测方法，其特征在于，所述根据频谱图中的竖直中心线上的数据点的像素值获取每张频谱图相应的频谱中心曲线，包括的具体方法为：将频谱图中的竖直中心线上的数据点的像素值还原为平面波比重数值，按照频谱图中从上到下的顺序形成一个数值序列，以横坐标为序列中的元素序数，纵坐标为数值得到频谱图中心线对应的频谱中心曲线。3.根据权利要求1所述的太阳能光伏发电装置故障检测方法，其特征在于，所述获取每条频谱中心曲线中每个波动区间内每个数据点的惩罚权重，包括的具体方法为：其中，表示任意一条频谱中心曲线中第个波动区间中第个数据点的惩罚权重，表示第个区间的重要程度，表示该条频谱中心曲线对应的光伏电池板的频谱中心曲线中第个波动区间的区间长度，表示标准光伏电池板的频谱中心曲线中第个波动区间的区间长度，所述区间长度即为波动区间内的数据点数量，表示曲线中所有数据点的惩罚权重的期望上限，表示控制函数曲率的经验常数，表示曲线的中心点，表示曲线中第个波动区间中第个数据点与曲线中心点的距离。4.根据权利要求1所述的太阳能光伏发电装置故障检测方法，其特征在于，所述获取每条频谱中心曲线对应的光伏电池板的波动距离，包括的具体方法为：对于任意一条频谱中心曲线，通过加权动态时间规整距离计算方法，获取该条频谱中心曲线与标准光伏电池板的频谱中心曲线的加权动态时间规整距离，计算过程中通过修正后的逻辑权重函数对数据点进行惩罚权重的分配，将计算得到的加权动态时间规整距离记为该条频谱中心曲线对应的光伏电池板的波动距离。5.一种太阳能光伏发电装置故障检测系统，包括存储器和处理器，其特征在于，所述处理器执行所述存储器存储的计算机程序，以实现如权利要求1-4任一项所述的一种太阳能光伏发电装置故障检测方法。
说明书desc
技术领域本发明涉及图像数据处理领域，具体涉及一种太阳能光伏发电装置故障检测方法及系统。背景技术在光伏电池板的生产过程中，需要在电池片上印刷用于传输电流的栅线，当出现断栅的情况时，光伏电池板中光伏组件的光电转换效率会降低，使用过程中还会造成多种光伏板损坏的情况，所以在生产过程中栅线印刷完毕之后需要对光伏电池板进行断栅检测。因为光伏电池板中栅线的周期性特点，当出现断栅时，栅线的周期性被破坏，在频谱中就会呈现为异常波动；现有技术中，通过二维离散傅里叶变换得到光伏电池板频率谱之后，将频谱图竖直中心线上的数值波动变化转化为频谱中心曲线，对光伏电池板进行断栅检测。在频谱中心曲线中，越靠近中心点的数值波动越能体现图像中的低频信息，也就是图像中的细节信息；在传统的加权动态时间规整波动距离检测方法中，其惩罚权重来自于默认的sigmoid函数；其逻辑权重函数在对频谱曲线波动进行波动距离计算时，无法根据频谱中心曲线的特征获取合适的惩罚权重，进而会造成曲线波动差异的判断异常。发明内容本发明提供太阳能光伏发电装置故障检测方法及系统，以解决现有的波动距离计算时单一权重导致结果不准确影响异常判断的问题，所采用的技术方案具体如下：第一方面，本发明一个实施例提供了太阳能光伏发电装置故障检测方法，该方法包括以下步骤：获取标准光伏电池板的二值图像的频谱图，获取若干待检测光伏电池板的二值图像的频谱图；根据频谱图中的竖直中心线上的数据点的像素值获取每张频谱图相应的频谱中心曲线，获取每条频谱中心曲线中的若干离群点，将离群点作为分割点分别对每条频谱中心曲线划分得到每条频谱中心曲线的若干波动区间；获取每条频谱中心曲线的中心点以及曲线中每个波动区间的重要程度，根据每个波动区间的区间长度及重要程度，以及区间内数据点与曲线中心点的距离获取每条频谱中心曲线中每个波动区间内每个数据点的惩罚权重，根据每条频谱中心曲线中每个数据点的惩罚权重，以及标准光伏电池板的频谱中心曲线，获取每条频谱中心曲线对应的光伏电池板的波动距离；根据每块光伏电池板的波动距离获取每块光伏电池板的异常程度，根据异常程度判断光伏电池板是否发生断栅故障。所述获取每条频谱中心曲线的中心点以及曲线中每个波动区间的重要程度，包括的具体方法为：对于任意一条频谱中心曲线，将曲线的中点作为曲线的中心点，获取每个波动区间的中点，根据每个波动区间的中点与曲线中心点的距离，通过标准高斯函数对每个波动区间赋予权重，赋予到的权重记为每个区间的重要程度；所述根据每块光伏电池板的波动距离获取每块光伏电池板的异常程度，包括的具体方法为：对波动距离进行线性归一化处理，将归一化结果作为每块光伏电池板的异常程度；所述根据异常程度判断光伏电池板是否发生断栅故障，包括的具体方法为：在光伏电池板的异常程度大于第二预设阈值时，判定其发生断栅故障；在光伏电池板的异常程度小于或等于第二预设阈值时，判定其未发生断栅故障。可选的，所述根据频谱图中的竖直中心线上的数据点的像素值获取每张频谱图相应的频谱中心曲线，包括的具体方法为：将频谱图中的竖直中心线上的数据点的像素值还原为平面波比重数值，按照频谱图中从上到下的顺序形成一个数值序列，以横坐标为序列中的元素序数，纵坐标为数值得到频谱图中心线对应的频谱中心曲线。可选的，所述获取每条频谱中心曲线中每个波动区间内每个数据点的惩罚权重，包括的具体方法为：其中，表示任意一条频谱中心曲线中第个波动区间中第个数据点的惩罚权重，表示第个区间的重要程度，表示该条频谱中心曲线对应的光伏电池板的频谱中心曲线中第个波动区间的区间长度，表示标准光伏电池板的频谱中心曲线中第个波动区间的区间长度，所述区间长度即为波动区间内的数据点数量，表示曲线中所有数据点的惩罚权重的期望上限，表示控制函数曲率的经验常数，表示曲线的中心点，表示曲线中第个波动区间中第个数据点与曲线中心点的距离。可选的，所述获取每条频谱中心曲线对应的光伏电池板的波动距离，包括的具体方法为：对于任意一条频谱中心曲线，通过加权动态时间规整距离计算方法，获取该条频谱中心曲线与标准光伏电池板的频谱中心曲线的加权动态时间规整距离，计算过程中通过修正后的逻辑权重函数对数据点进行惩罚权重的分配，将计算得到的加权动态时间规整距离记为该条频谱中心曲线对应的光伏电池板的波动距离。第二方面，本发明另一个实施例提供了太阳能光伏发电装置故障检测系统，该系统包括存储器和处理器，所述处理器执行所述存储器存储的计算机程序，以实现前述所述的一种太阳能光伏发电装置故障检测方法。本发明的有益效果是：通过进行对比的曲线波动区间长度与频谱曲线特有的高频低频特征分布，确定衡量波动曲线差异的波动曲线距离计算过程中的逻辑权重函数，相较于原有的sigmoid函数可以根据频谱数值所表征的图像差异信息进行对比衡量；相较于原有的相位差惩罚过程，通过曲线波动区间确定了期望权重，增加了对于波动曲线的趋势性判断；不仅通过惩罚增大两个波动曲线间的距离，还可以通过波动趋势的相似性来缩短两个波动曲线间的距离，从而达到更加精确的光伏电池板生产过程中的断栅检测效果。通过频谱中心曲线表征光伏电池板图像高频与低频信息的特征，进而对计算波动曲线距离时惩罚项进行校正，可以使得在计算波动曲线距离的过程中，针对于不同表征信息的重要程度差异，使得在距离计算的过程中惩罚项的大小也不同，达到准确判断频谱中心曲线波动差异的目的，从而准确判断生产过程中待检测的光伏电池板中是否存在断栅的问题。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明一个实施例所提供的太阳能光伏发电装置故障检测方法流程示意图；图2为光伏电池板正常与断栅情况下的二值图像及频谱图；图3为频谱中心曲线示例图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。请参阅图1，其示出了本发明一个实施例所提供的太阳能光伏发电装置故障检测方法流程图，该方法包括以下步骤：步骤S001、获取标准光伏电池板及若干待检测光伏电池板的二值图像，并将二值图像转换为频谱图。本实施例的目的是根据待检测光伏电池板与标准光伏电池板的频谱图差异来判断待检测光伏电池板是否发生断栅故障，因此首先需要获取一张标准光伏电池板的图像以及一个时段内生产的光伏电池板的图像。具体的，利用相机采集一个时段内生产的光伏电池板的图像，本实施例中一个时段采用一小时进行采集，并获取与这些光伏电池板同一规格的一张没有故障的标准光伏电池板图像，将得到的图像二值化处理得到标准光伏电池板及若干待检测光伏电池板的二值图像，对二值图像通过二维傅里叶变换得到频谱图。请参阅图2，其示出了光伏电池板正常与断栅情况下的二值图像及频谱图，其中图像部分为标准光伏电池板的二值图像，部分为标准光伏电池板的二值图像经二维傅里叶变换得到的频谱图；部分为一张待检测光伏电池板的二值图像，部分为该张待检测光伏电池板的二值图像经二维傅里叶变换得到的频谱图。至此，获取到了标准光伏电池板的频谱图及若干待检测光伏电池板的频谱图。步骤S002、分别获取每张频谱图中的频谱中心曲线，去除每条频谱中心曲线的离群点并划分为若干波动区间。请参阅图3，其示出了频谱中心曲线的获取过程，其中左侧为频谱图，右侧为根据频谱图得到的频谱中心曲线。具体的，对步骤S001中得到的若干频谱图分别按照如图3的左侧部分的方法提取频谱图中心线，将频谱图中心线的数据点的像素值还原为平面波比重数值，按照频谱图中从上到下的顺序形成一个数值序列，以横坐标为序列中的元素序数，纵坐标为数值得到频谱图中心线对应的频谱中心曲线；获取步骤S001中得到的所有频谱图的频谱中心曲线。需要说明的是，在频谱中心曲线的对比过程中局部离群点因为其数值过大，所以在计算过程中会导致常规数值的差异影响减小，而在频谱中心曲线之间通过常规数值的差异才能表示两个曲线的波动差异，因此需要对这些离群点检测并消除其影响；同时因为频谱中心曲线中每部分对于图像的表征重要程度不同，距离中心越近越表征低频细节信息，因此需要划分波动区间，而离群点通常是局部频谱中心曲线中的极值点，通过离群点可以较好的将表征同一段信息的曲线部分划分为一个波动区间。具体的，以任意一条频谱中心曲线为例，对曲线中的每个数据点进行LOF异常检测获取其离群因子，给出第一预设阈值用以判断离群点，本实施例采用第一预设阈值为1.5进行计算，获取曲线中离群因子大于第一预设阈值的离群点，以这些离群点为分割点对曲线进行划分得到若干波动区间，同时将这些离群点在频谱中心曲线中去除；需要说明的是，LOF异常检测为现有技术，本实施例不再赘述；按照上述方法获取每条频谱中心曲线的若干波动区间。至此，获取到了每张频谱图对应的频谱中心曲线，并分别将每条频谱中心曲线划分为若干波动区间。步骤S003、根据频谱中心曲线及波动区间对逻辑权重函数进行修正，根据修正后的逻辑权重函数计算每块光伏电池板与标准光伏电池板的频谱中心曲线之间的波动距离。在现有的计算曲线间的差异即加权动态时间规整距离过程中，其逻辑权重函数以曲线中第个数据点为例，具体的计算方法为：其中，表示曲线中第个数据点的惩罚权重，表示曲线中所有数据点的惩罚权重的期望上限，表示控制函数曲率的经验常数，表示曲线的中心点，表示曲线中第个数据点与中心点的距离。需要说明的是，现有的加权动态时间规整距离计算过程中的相位差惩罚是根据出现相位差的位置与曲线中心点的距离进行惩罚权重的判断；而在频谱中心曲线中，由于每一段波动区间表征的信息存在差异，通过与中心点的距离则无法体现出衡量惩罚因子的原因，因此需要通过频谱中心曲线中不同波动区间以及中心点来进行惩罚权重大小的判断。此时，对于波动区间的对比，需要让靠近频谱中心点的数据的相位差惩罚因子增大；同时相位差还可以表示波动的形状差异，在加权动态时间规整距离中一个数据点的相位差越高则说明这个数据点位置的曲线波动差异越大；而对于波动区间中的数据点，越靠近频谱中心点越能表示光伏电池板中栅线的周期性差异，因此在修正后逻辑权重函数中仍需要通过数据点与频谱中心点的距离来进行惩罚权重大小的衡量，修正后的逻辑权重函数中，数据点与频谱中心点即曲线中心点的距离越小，其惩罚权重应越大。进一步需要说明的是，由于越靠近频谱中心点的波动区间越能表示图像的低频信息，而在光伏电池板发生断栅情况时，周期性的变化就是表现在低频信息中的平面波比重发生变化；即栅线的像素点相较于背景像素点是少数的，在栅线断开时，其原有的固定频率发生变化，这些变化会体现于频谱中的低频信息；因此需要根据波动区间与中心点的距离进行区间重要程度的确定，从而保证对靠近中心点的波动区间，其上的出现差异在整体加权动态时间规整距离计算时更加重要。具体的，以任意一条频谱中心曲线为例，获取每个波动区间的中点，根据每个波动区间的中点与曲线中心点的距离，通过标准高斯函数对每个波动区间赋予权重，赋予到的权重记为每个区间的重要程度，其中曲线中第个区间的重要程度记为；需要说明的是，高斯函数赋予权重过程为现有技术，本实施例不再赘述。进一步的，以第个波动区间中的第个数据点为例，修正后的逻辑权重函数的具体计算方法为：其中，表示曲线中第个波动区间中第个数据点的惩罚权重，表示第个区间的重要程度，表示该条频谱中心曲线对应的光伏电池板的频谱中心曲线中第个波动区间的区间长度，表示标准光伏电池板的频谱中心曲线中第个波动区间的区间长度，所述区间长度即为波动区间内的数据点数量，表示曲线中所有数据点的惩罚权重的期望上限，表示控制函数曲率的经验常数，本实施例中采用进行计算，表示曲线的中心点，表示曲线中第个波动区间中第个数据点与曲线中心点的距离。此时，在原逻辑权重函数中表示对于曲线整体对比的惩罚大小，但由于波动区间的区间长度存在差异，仅根据相位差进行波动距离计算的惩罚，即通过增大出现相位差的数据点所计算的距离，不再适合不同波动区间的惩罚权重分配；需要根据区间长度差异来调整惩罚权重，通过待检测光伏电池板与标准光伏电池板的频谱中心曲线中相同区间的区间长度量化，区间长度越大，该段出现相位差对波动距离的影响越大，越应该分配较多的惩罚权重；而对于数据点与曲线中心点的距离，越靠近曲线中心点，数据点越能表示光伏电池板中栅线的周期性差异，应分配越多的惩罚权重；而波动区间越靠近曲线中心点，其重要程度越大，相应在波动距离计算时该波动区间内数据点越应该分配较多的惩罚权重。按照上述方法获取该条频谱中心曲线中的每个数据点的惩罚权重，并通过现有的加权动态时间规整距离计算方法，获取该条频谱中心曲线与标准光伏电池板的频谱中心曲线的加权动态时间规整距离，计算过程中通过修正后的逻辑权重函数对数据点进行惩罚权重的分配，将计算得到的加权动态时间规整距离记为该条频谱中心曲线对应的光伏电池板的波动距离；按照上述方法获取得到的每条频谱中心曲线对应的光伏电池板的波动距离；需要说明的是，由于每条频谱中心曲线中包括标准光伏电池板的频谱中心曲线，因此得到的若干波动距离中也包括标准光伏电池板的频谱中心曲线与本身的波动距离，则得到的每块光伏电池板的波动距离中包括若干待检测光伏电池板的波动距离以及标准光伏电池板的波动距离。至此，通过修正后的逻辑权重系数获取到每块光伏电池板的波动距离。步骤S004、根据每块光伏电池板的波动距离获取每块光伏电池板的异常程度，根据异常程度判断光伏电池板是否发生断栅故障。需要说明的是，在步骤S003中得到的每块光伏电池板的波动距离其仅能反映光伏电池板的频谱中心曲线与标准光伏电池板的频谱中心曲线间的波动差异，并不能直观反映光伏电池板是否发生断栅故障，需要对若干光伏电池板的波动距离进行量化来判断是否发生断栅故障。具体的，对在步骤S003中得到的若干块光伏电池板的波动距离进行线性归一化，将归一化结果作为每块光伏电池板的异常程度，给出第二预设阈值用以判断断栅故障，本实施例采用第二预设阈值为0.8进行计算，当光伏电池板的异常程度大于第二预设阈值时，判定其发生断栅故障，需要对其进行栅线修复处理。至此，通过每块光伏电池板的频谱中心曲线与标准光伏电池板频谱中心曲线的波动距离计算，完成对光伏电池板断栅故障的判断及检测。本发明还提出了一种太阳能光伏发电装置故障检测系统，包括：存储器和处理器，处理器执行存储器存储的计算机程序，以实现前述的一种太阳能光伏发电装置故障检测方法。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
