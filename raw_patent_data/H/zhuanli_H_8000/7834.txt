标题title
云会议中实时视频合屏中英文字符清晰显示的方法与装置
摘要abst
本申请公开提供了一种云会议中实时视频合屏中英文字符清晰显示的方法与装置，所述方法包括：输入待生成文字；根据待生成文字的实际大小获取放大系数进行放大；获取放大后文字的字体大小以及空白边宽度；对放大后文字进行分类，计算空白边缘参数；将放大后文字转换成字符串，再将字符串转换成宽字符串，并对宽字符串设置文字参数；计算所述宽字符串的实际长度；根据宽字符串的实际长度对放大后文字进行缩放，适配视频分屏；创建并初始化画布，将缩放后的文字绘制在所述画布上。
权利要求书clms
1.云会议中实时视频合屏中英文字符清晰显示的方法，其特征在于，包括如下步骤：S1：输入待生成文字，获取待生成文字的实际大小；S2：根据待生成文字的实际大小获取放大系数，使用所述放大系数将所述待生成文字放大至预设大小；S3：获取放大后文字的字体大小以及字体高，计算出空白大小；S4：对放大后文字进行分类，根据分类计算放大后文字的空白边缘参数；S5：设置放大后文字的字体，随后将放大后文字转换成字符串，再将字符串转换成宽字符串，并对宽字符串设置文字参数，所述文字参数包括文字大小、字间距以及背景色；S6：计算所述宽字符串的实际长度；S7：根据宽字符串的实际长度对放大后文字进行缩放，适配视频分屏；S8：创建并初始化画布，将缩放后的文字绘制在所述画布上。2.根据权利要求1所述的云会议中实时视频合屏中英文字符清晰显示的方法，其特征在于，所述S3的具体步骤如下：S3.1：获取放大后文字的字体大小；S3.2：获取放大后文字的高；S3.3：使用如下公式：空白大小=*放大系数，计算得出空白大小。3.根据权利要求1或2所述的云会议中实时视频合屏中英文字符清晰显示的方法，其特征在于，所述S4的具体步骤为，将文字分类为居右显示类型、居中显示类型以及居左显示类型，若文字分类为居右显示类型，则计算文字左边的空白边缘参数；若文字分类为居中显示类型，则计算文字两边的空白边缘参数；若文字分类为居左显示类型，则计算文字右边的空白边缘参数。4.根据权利要求1所述的云会议中实时视频合屏中英文字符清晰显示的方法，其特征在于，所述S6计算宽字符串的实际长度的具体步骤为：S6.1：获取宽字符串中的每一个宽字符，获取每一个宽字符的宽以及点阵图；S6.2：将每一个宽字符的点阵图渲染转换成位图后，统计宽字符串中宽字符的个数；S6.1：按如下公式计算：宽字符串实际长度=宽字符个数*字间距+宽字符串长度。5.根据权利要求1所述的云会议中实时视频合屏中英文字符清晰显示的方法，其特征在于，所述S7的具体步骤为，使用宽字符串的实际长度除以所述放大系数进行缩放，得到实际生成文字长度；判断所述实际生成文字长度是否大于视频分屏最大宽度；若实际生成文字长度大于视频分屏最大宽度，则以分屏最大宽度作为生成图宽度进行截取显示，图像宽度=实际生成文字长度+空白边缘参数；若实际生成文字长度小于视频分屏最大宽，则图像宽度=实际生成文字长度+空白边缘参数。6.根据权利要求1所述的云会议中实时视频合屏中英文字符清晰显示的方法，其特征在于，所述S8的具体步骤为：S8.1：根据文字参数的背景色创建并初始化画布；S8.2：获取宽字符串中的宽字符，获取宽字符的索引号；S8.3：根据宽字符的索引号对应获得点阵图，并将点阵图转换成位图格式；S8.4：获取位图的高与宽，并计算位图的偏移量；S8.5：根据位图的高、宽以及偏移量在画布中对字符进行填充绘制。7.一种云会议中实时视频合屏中英文字符清晰显示装置，其特征在于，包括：文字放大模块，用于对待生成文字根据所得到的放大系数进行放大；边缘计算模块，用于根据显示模式计算文字的空白边缘参数；长度计算模块，用于计算实际生成文字长度；绘图模块，用于将字符绘制在画布上。8.一种计算机设备，其特征在于，包括：处理器、存储器和总线，所述存储器存储有所述处理器可执行的机器可读指令，当计算机设备运行时，所述处理器与所述存储器之间通过总线通信，所述机器可读指令被所述处理器执行时执行如权利要求1至6中任一项所述的方法。9.一种计算机可读存储介质，其特征在于，该计算机可读存储介质上存储有计算机程序，该计算机程序被处理器运行时执行如权利要求1至6中任一项所述的方法。
说明书desc
技术领域本发明涉及多媒体信息处理技术领域，具体涉及一种云会议中实时视频合屏中英文字符清晰显示的方法与装置。背景技术随着视频云会议的快速发展，及视频会议媒介多元化，打破了时域、地域限制，随时随地都能快速进行视频会议。通过在云会议中实现实时视频合屏功能，解决了第三方视频会议设备无缝接入到云会议。在云会议中，需要在实时视频合屏中显示中英文字符及会议中的各种提示用语。目前，现有的实时视频合屏文字显示的方案，分为第三方工具方案和Opencv方案。第三方工具方案，需要一台专门的服务器将各种中英文字符生成图片，文字生成的效果不但依赖第三方，而且占用设备资源以及带宽资源，即第三方工具有局限性且显示效果不可靠。而Opencv方案则不支持中文字符转换。即上述相关技术存在不支持中英同时显示的问题。发明内容因此，本发明要解决的技术问题在于改善相关技术不支持中英文同时显示的问题，从而提供一种云会议中实时视频合屏中英文字符清晰显示的方法与装置。为解决上述技术问题，本发明公开实施例至少提供一种云会议中实时视频合屏中英文字符清晰显示的方法与装置。第一方面，本发明公开实施例提供了一种云会议中实时视频合屏中英文字符清晰显示的方法，包括：云会议中实时视频合屏中英文字符清晰显示的方法，包括如下步骤：S1：输入待生成文字，获取待生成文字的实际大小；S2：根据待生成文字的实际大小获取放大系数，使用所述放大系数将待生成文字放大至预设大小；S3：获取放大后文字的字体大小以及以及空白大小；S4：对放大后文字进行分类，根据分类计算放大后文字的空白边缘参数；S5：设置放大后文字的字体，随后将放大后文字转换成字符串，再将字符串转换成宽字符串，并对宽字符串设置文字参数，所述文字参数包括文字大小、字间距以及背景色；S6：计算所述宽字符串的实际长度；S7：根据宽字符串的实际长度对放大后文字进行缩放，适配视频分屏；S8：创建并初始化画布，将缩放后的文字绘制在所述画布上。可选地，所述S3的具体步骤如下：S3.1：获取放大后文字的字体大小；S3.2：获取放大后文字的高；S3.3：使用如下公式：空白大小=*放大系数，计算得出空白大小。可选地，所述S4的具体步骤为，将文字分类为居右显示类型、居中显示类型以及居左显示类型，若文字分类为居右显示类型，则计算文字左边的空白边缘参数；若文字分类为居中显示类型，则计算文字两边的空白边缘参数；若文字分类为居左显示类型，则计算文字右边的空白边缘参数。可选地，所述S6计算宽字符串的实际长度的具体步骤为：S6.1：获取宽字符串中的每一个宽字符，获取每一个宽字符的宽以及点阵图；S6.2：将每一个宽字符的点阵图渲染转换成位图后，统计宽字符串中宽字符的个数；S6.1：按如下公式计算：宽字符串实际长度=宽字符个数*字间距+宽字符串长度。可选地，所述S7的具体步骤为，使用宽字符串的实际长度除以所述放大系数进行缩放，得到实际生成文字长度；判断所述实际生成文字长度是否大于视频分屏最大宽度；若实际生成文字长度大于视频分屏最大宽度，则以分屏最大宽度作为生成图宽度进行截取显示，图像宽度=实际生成文字长度+空白边缘参数；若实际生成文字长度小于视频分屏最大宽，则图像宽度=实际生成文字长度+空白边缘参数。可选地，所述S8的具体步骤为：S8.1：根据文字参数的背景色创建并初始化画布；S8.2：获取宽字符串中的宽字符，获取宽字符的索引号；S8.3：根据宽字符的索引号对应获得点阵图，并将点阵图转换成位图格式；S8.4：获取位图的高与宽，并计算位图的偏移量；S8.5：根据位图的高、宽以及偏移量在画布中对字符进行填充绘制。第二方面，本发明公开实施例还提供一种云会议中实时视频合屏中英文字符清晰显示的装置，包括：文字放大模块，用于对待生成文字根据所得到的放大系数进行放大；边缘计算模块，用于根据显示模式计算文字的空白边缘参数；长度计算模块，用于计算实际生成文字长度；绘图模块，用于将字符绘制在画布上。第三方面，本发明公开实施例还提供一种计算机设备，包括：处理器、存储器和总线，所述存储器存储有所述处理器可执行的机器可读指令，当计算机设备运行时，所述处理器与所述存储器之间通过总线通信，所述机器可读指令被所述处理器执行时执行上述第一方面，或第一方面中任一种可能的实施方式中的步骤。第四方面，本发明公开实施例还提供一种计算机可读存储介质，该计算机可读存储介质上存储有计算机程序，该计算机程序被处理器运行时执行上述第一方面，或第一方面中任一种可能的实施方式中的步骤。本发明的实施例提供的技术方案可以具有以下有益效果：本发明通过采用点阵图转矢量图的方式，实现文字字符不会出现锯齿以及残缺的现象，从而提升文字字符的清晰度，使得能在服务器上处理参会人员的名称以及各种提示用语，能快速且清晰地进行显示，从而提升用户在云会议中的体验以及感受。应当理解的是，以上的一般描述和后文的细节描述仅是示例性和解释性的，并不能限制本发明。附图说明为了更清楚地说明本发明具体实施方式或现有技术中的技术方案，下面将对具体实施方式或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施方式，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1示出了本发明公开实施例所提供的云会议中实时视频合屏中英文字符清晰显示方法的流程图；图2示出了本发明公开实施例所提供的放大参数对比图；图3示出了本发明公开实施例所提供的云会议中实时视频合屏中英文字符清晰显示的装置的结构示意图；图4示出了本发明公开实施例所提供的一种计算机设备的结构示意图。具体实施方式这里将详细地对示例性实施例进行说明，其示例表示在附图中。下面的描述涉及附图时，除非另有表示，不同附图中的相同数字表示相同或相似的要素。以下示例性实施例中所描述的实施方式并不代表与本发明相一致的所有实施方式。相反，它们仅是与如所附权利要求书中所详述的、本发明的一些方面相一致的装置和方法的例子。实施例1如图1和图2所示，本发明公开实施例所提供的一种云会议中实时视频合屏中英文字符清晰显示方法的流程图，该方法包括：S1：输入待生成文字，获取待生成文字的实际大小；S2：根据待生成文字的实际大小获取放大系数，使用所述放大系数将待生成文字放大至预设大小；具体地，获取待生成文字的实际大小后，参照图2获取对应的放大系数，使用实际大小乘以放大系数后即得到放大后的字体大小放大后的字体大小即预设大小，通过放大，进行下采样时，可以减少文字出现锯齿以及残缺的问题。S3：获取放大后文字的字体大小以及空白边宽度。具体地，S3包括如下步骤：S3.1：获取放大后文字的字体大小；S3.2：获取放大后文字的高；S3.3：使用如下公式：空白大小=*放大系数，计算得出空白大小。S4：对放大后文字进行分类，根据分类计算放大后文字的空白边缘参数；具体地，将文字分类为居右显示类型、居中显示类型以及居左显示类型，若文字分类为居右显示类型，则计算文字左边的空白边缘参数；若文字分类为居中显示类型，则计算文字两边的空白边缘参数；若文字分类为居左显示类型，则计算文字右边的空白边缘参数。S5：设置放大后文字的字体，随后将放大后文字转换成字符串，再将字符串转换成宽字符串，并对宽字符串设置文字参数，所述文字参数包括文字大小、字间距以及背景色；S6：计算所述宽字符串的实际长度；具体地，所述S6计算宽字符串的实际长度的具体步骤为：S6.1：获取宽字符串中的每一个宽字符，获取每一个宽字符的宽以及点阵图；具体可以通过freetype接口查表获取宽字符对应的点阵图。S6.2：将每一个宽字符的点阵图渲染转换成位图后，统计宽字符串中宽字符的个数；S6.1：按如下公式计算：宽字符串实际长度=宽字符个数*字间距+宽字符串长度。S7：根据宽字符串的实际长度对放大后文字进行缩放，适配视频分屏；具体地，所述S7的具体步骤为，使用宽字符串的实际长度除以所述放大系数进行缩放，得到实际生成文字长度；判断所述实际生成文字长度是否大于视频分屏最大宽度；若实际生成文字长度大于视频分屏最大宽度，则以分屏最大宽度作为生成图宽度进行截取显示，图像宽度=实际生成文字长度+空白边缘参数；若实际生成文字长度小于视频分屏最大宽，则图像宽度=实际生成文字长度+空白边缘参数。S8：创建并初始化画布，将缩放后的文字绘制在所述画布上；具体地，所述S8的具体步骤为：S8.1：根据文字参数的背景色创建并初始化画布；S8.2：获取宽字符串中的宽字符，获取宽字符的索引号；S8.3：根据宽字符的索引号对应获得点阵图，并将点阵图转换成位图格式；S8.4：获取位图的高与宽，并计算位图的偏移量；S8.5：根据位图的高、宽以及偏移量在画布中对字符进行填充绘制。可以理解的是，本实施例提供的技术方案，通过采用点阵图转矢量图的方式，实现文字字符不会出现锯齿以及残缺的现象，从而提升文字字符的清晰度，使得能在服务器上处理参会人员的名称以及各种提示用语，能快速且清晰地进行显示，从而提升用户在云会议中的体验以及感受。实施例2如图3所示，本发明实施例还提供一种云会议中实时视频合屏中英文字符清晰显示装置，包括：文字放大模块，用于对待生成文字根据所得到的放大系数进行放大。具体地，先获取待生成文字的实际大小，根据待生成文字的实际大小获取放大系数，随后将待生成文字放大至预设大小。边缘计算模块，用于根据显示模式计算文字的空白边缘参数。具体地，先识别文字的类型，然后根据文字的类型对文字的空白边缘参数进行计算。长度计算模块，用于计算实际生成文字长度。具体地，获取字符串中宽字符串的宽以及宽字符串的个数，然后对实际生成文字长度进行计算。绘图模块，用于将字符绘制在画布上。具体地，在画布上根据位图的宽、高以及偏移量对当前点进行定位，随后对当前点进行颜色填充，完成该点的填充绘制后继续定位下一点，直至完成字符的绘制。实施例3基于同一技术构思，本申请实施例还提供了一种计算机设备，包括存储器1和处理器2，如图4所示，所述存储器1存储有计算机程序，所述处理器2执行所述计算机程序时实现上述任一项所述的方法。其中，存储器1至少包括一种类型的可读存储介质，所述可读存储介质包括闪存、硬盘、多媒体卡、卡型存储器、磁性存储器、磁盘、光盘等。存储器1在一些实施例中可以是一种云会议中实时视频合屏中英文字符清晰显示方法系统的内部存储单元，例如硬盘。存储器1在另一些实施例中也可以是一种云会议中实时视频合屏中英文字符清晰显示方法系统的外部存储设备，例如插接式硬盘，智能存储卡，安全数字卡，闪存卡等。进一步地，存储器1还可以既包括一种云会议中实时视频合屏中英文字符清晰显示方法的内部存储单元也包括外部存储设备。存储器1不仅可以用于存储安装于一种云会议中实时视频合屏中英文字符清晰显示方法的应用软件及各类数据，例如一种云会议中实时视频合屏中英文字符清晰显示方法程序的代码等，还可以用于暂时地存储已经输出或者将要输出的数据。处理器2在一些实施例中可以是一中央处理器、控制器、微控制器、微处理器或其他数据处理芯片，用于运行存储器1中存储的程序代码或处理数据，例如执行一种云会议中实时视频合屏中英文字符清晰显示方法程序等。本发明公开实施例还提供一种计算机可读存储介质，该计算机可读存储介质上存储有计算机程序，该计算机程序被处理器运行时执行上述方法实施例中所述的方法的步骤。其中，该存储介质可以是易失性或非易失的计算机可读取存储介质。本发明公开实施例所提供的应用页面内容刷新方法的计算机程序产品，包括存储了程序代码的计算机可读存储介质，所述程序代码包括的指令可用于执行上述方法实施例中所述的方法的步骤，具体可参见上述方法实施例，在此不再赘述。本发明公开实施例还提供一种计算机程序，该计算机程序被处理器执行时实现前述实施例的任意一种方法。该计算机程序产品可以具体通过硬件、软件或其结合的方式实现。在一个可选实施例中，所述计算机程序产品具体体现为计算机存储介质，在另一个可选实施例中，计算机程序产品具体体现为软件产品，例如软件开发包等等。可以理解的是，上述各实施例中相同或相似部分可以相互参考，在一些实施例中未详细说明的内容可以参见其他实施例中相同或相似的内容。需要说明的是，在本发明的描述中，术语“第一”、“第二”等仅用于描述目的，而不能理解为指示或暗示相对重要性。此外，在本发明的描述中，除非另有说明，“多个”的含义是指至少两个。流程图中或在此以其他方式描述的任何过程或方法描述可以被理解为，表示包括一个或更多个用于实现特定逻辑功能或过程的步骤的可执行指令的代码的模块、片段或部分，并且本发明的优选实施方式的范围包括另外的实现，其中可以不按所示出或讨论的顺序，包括根据所涉及的功能按基本同时的方式或按相反的顺序，来执行功能，这应被本发明的实施例所属技术领域的技术人员所理解。应当理解，本发明的各部分可以用硬件、软件、固件或它们的组合来实现。在上述实施方式中，多个步骤或方法可以用存储在存储器中且由合适的指令执行系统执行的软件或固件来实现。例如，如果用硬件来实现，和在另一实施方式中一样，可用本领域公知的下列技术中的任一项或他们的组合来实现：具有用于对数据信号实现逻辑功能的逻辑门电路的离散逻辑电路，具有合适的组合逻辑门电路的专用集成电路，可编程门阵列，现场可编程门阵列等。本技术领域的普通技术人员可以理解实现上述实施例方法携带的全部或部分步骤是可以通过程序来指令相关的硬件完成，所述的程序可以存储于一种计算机可读存储介质中，该程序在执行时，包括方法实施例的步骤之一或其组合。此外，在本发明各个实施例中的各功能单元可以集成在一个处理模块中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个模块中。上述集成的模块既可以采用硬件的形式实现，也可以采用软件功能模块的形式实现。所述集成的模块如果以软件功能模块的形式实现并作为独立的产品销售或使用时，也可以存储在一个计算机可读取存储介质中。上述提到的存储介质可以是只读存储器，磁盘或光盘等。在本说明书的描述中，参考术语“一个实施例”、“一些实施例”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。尽管上面已经示出和描述了本发明的实施例，可以理解的是，上述实施例是示例性的，不能理解为对本发明的限制，本领域的普通技术人员在本发明的范围内可以对上述实施例进行变化、修改、替换和变型。
