标题title
金融报文处理方法、装置、电子设备及存储介质
摘要abst
本发明提供一种金融报文处理方法、装置、电子设备及存储介质，涉及数字信息的传输技术领域，该方法包括：接收到目标金融报文后，根据所述目标金融报文的报文头确定所述目标金融报文的报文类型；根据所述目标金融报文的报文类型，确定相应的目标配置文件或者目标类；其中，所述目标配置文件中配置有所述目标金融报文的报文结构与计算机数据结构之间的映射关系，所述目标类中标注有所述目标金融报文的报文结构与计算机数据结构之间的映射关系；基于所述目标配置文件或者所述目标类，对所述目标金融报文进行解析。能够实现对各种金融报文的统一解析、合法性校验，避免出现大量重复度高的代码，提高工程可维护性和报文处理效率。
权利要求书clms
1.一种金融报文处理方法，其特征在于，包括：接收到目标金融报文后，根据所述目标金融报文的报文头确定所述目标金融报文的报文类型；根据所述目标金融报文的报文类型，确定相应的目标配置文件或者目标类；其中，所述目标配置文件中配置有所述目标金融报文的报文结构与计算机数据结构之间的映射关系，所述目标类中标注有所述目标金融报文的报文结构与计算机数据结构之间的映射关系；基于所述目标配置文件或者所述目标类，对所述目标金融报文进行解析。2.根据权利要求1所述的金融报文处理方法，其特征在于，所述目标类包括动态语言的类或者Java类，所述目标类中包含相应编程语言的注解，所述注解用于将报文头和报文体的结构化信息分别标注在所述目标类的类头和类属性上。3.根据权利要求2所述的金融报文处理方法，其特征在于，在所述目标类为动态语言的类的情况下，所述基于所述目标类，对所述目标金融报文进行解析，包括：构造所述动态语言的对应类的实例；根据所述动态语言的对应类中包含的动态语言注解，将所述目标金融报文的相应报文结构中的数值赋值给所述动态语言的对应类的实例中的类属性，实现对所述目标金融报文的解析。4.根据权利要求2所述的金融报文处理方法，其特征在于，在所述目标类为Java类的情况下，所述基于所述目标类，对所述目标金融报文进行解析，包括：通过Java反射机制动态构造所述Java类的实例；根据所述Java类中包含的Java注解，将所述目标金融报文的相应报文结构中的数值通过Java反射机制赋值给所述Java类的实例中的类属性，实现对所述目标金融报文的解析。5.根据权利要求3或4所述的金融报文处理方法，其特征在于，所述注解还用于将报文的业务校验条件标注在所述目标类的类属性上；所述对所述目标金融报文进行解析之后，所述方法还包括：根据所述注解标注的所述目标金融报文的业务校验条件，对解析得到的报文内容进行业务合法性校验。6.根据权利要求2所述的金融报文处理方法，其特征在于，所述方法还包括：在需要发送报文时，根据待发送报文对应的类实例中的类属性值和注解，确定所述待发送报文的报文结构、相应报文结构中的数值以及业务校验条件；根据所述业务校验条件对所述待发送报文进行合法性检查通过后，根据所述待发送报文的报文结构和相应报文结构中的数值，构造所述待发送报文的报文体，并根据所述待发送报文对应的类实例中类头上的注解构造报文头。7.根据权利要求2所述的金融报文处理方法，其特征在于，所述Java类为JavaBean类。8.一种金融报文处理装置，其特征在于，包括：第一确定模块，用于接收到目标金融报文后，根据所述目标金融报文的报文头确定所述目标金融报文的报文类型；第二确定模块，用于根据所述目标金融报文的报文类型，确定相应的目标配置文件或者目标类；其中，所述目标配置文件中配置有所述目标金融报文的报文结构与计算机数据结构之间的映射关系，所述目标类中标注有所述目标金融报文的报文结构与计算机数据结构之间的映射关系；解析模块，用于基于所述目标配置文件或者所述目标类，对所述目标金融报文进行解析。9.一种电子设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求1至7任一项所述金融报文处理方法。10.一种非暂态计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至7任一项所述金融报文处理方法。
说明书desc
技术领域本发明涉及数字信息的传输技术领域，尤其涉及一种金融报文处理方法、装置、电子设备及存储介质。背景技术金融报文规范也简称为“报文标准”，国际上通行各种金融报文规范，并且以各种规范定义金融报文。金融报文是具有一定格式的数据单元，作为信息载体实现不同组织、个体间在不同系统和平台上的信息传递功能。在计算机系统中处理报文时，常面临针对不同金融报文类型实现大量类似的解析和封装逻辑，导致在工程中出现大量重复度高的代码，工程可维护性差，且报文处理效率低。发明内容针对现有技术存在的问题，本发明提供一种金融报文处理方法、装置、电子设备及存储介质。第一方面，本发明提供一种金融报文处理方法，包括：接收到目标金融报文后，根据所述目标金融报文的报文头确定所述目标金融报文的报文类型；根据所述目标金融报文的报文类型，确定相应的目标配置文件或者目标类；其中，所述目标配置文件中配置有所述目标金融报文的报文结构与计算机数据结构之间的映射关系，所述目标类中标注有所述目标金融报文的报文结构与计算机数据结构之间的映射关系；基于所述目标配置文件或者所述目标类，对所述目标金融报文进行解析。可选地，所述目标类包括动态语言的类或者Java类，所述目标类中包含相应编程语言的注解，所述注解用于将报文头和报文体的结构化信息分别标注在所述目标类的类头和类属性上。可选地，在所述目标类为动态语言的类的情况下，所述基于所述目标类，对所述目标金融报文进行解析，包括：构造所述动态语言的对应类的实例；根据所述动态语言的对应类中包含的动态语言注解，将所述目标金融报文的相应报文结构中的数值赋值给所述动态语言的对应类的实例中的类属性，实现对所述目标金融报文的解析。可选地，在所述目标类为Java类的情况下，所述基于所述目标类，对所述目标金融报文进行解析，包括：通过Java反射机制动态构造所述Java类的实例；根据所述Java类中包含的Java注解，将所述目标金融报文的相应报文结构中的数值通过Java反射机制赋值给所述Java类的实例中的类属性，实现对所述目标金融报文的解析。可选地，所述注解还用于将报文的业务校验条件标注在所述目标类的类属性上；所述对所述目标金融报文进行解析之后，所述方法还包括：根据所述注解标注的所述目标金融报文的业务校验条件，对解析得到的报文内容进行业务合法性校验。可选地，所述方法还包括：在需要发送报文时，根据待发送报文对应的类实例中的类属性值和注解，确定所述待发送报文的报文结构、相应报文结构中的数值以及业务校验条件；根据所述业务校验条件对所述待发送报文进行合法性检查通过后，根据所述待发送报文的报文结构和相应报文结构中的数值，构造所述待发送报文的报文体，并根据所述待发送报文对应的类实例中类头上的注解构造报文头。可选地，所述Java类为JavaBean类。第二方面，本发明还提供一种金融报文处理装置，包括：第一确定模块，用于接收到目标金融报文后，根据所述目标金融报文的报文头确定所述目标金融报文的报文类型；第二确定模块，用于根据所述目标金融报文的报文类型，确定相应的目标配置文件或者目标类；其中，所述目标配置文件中配置有所述目标金融报文的报文结构与计算机数据结构之间的映射关系，所述目标类中标注有所述目标金融报文的报文结构与计算机数据结构之间的映射关系；解析模块，用于基于所述目标配置文件或者所述目标类，对所述目标金融报文进行解析。第三方面，本发明还提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现如上所述第一方面所述的金融报文处理方法。第四方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现如上所述第一方面所述的金融报文处理方法。本发明提供的金融报文处理方法、装置、电子设备及存储介质，通过根据目标金融报文的报文类型找到对应的目标配置文件或者目标类，根据目标配置文件或者目标类中报文结构与计算机数据结构之间的映射关系对目标金融报文进行解析，能够实现对各种金融报文的统一解析，避免出现大量重复度高的代码，提高工程可维护性和报文处理效率。附图说明为了更清楚地说明本发明或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明提供的金融报文处理方法的流程示意图；图2为本发明提供的报文接收解析流程示意图；图3为本发明提供的报文封装发送流程示意图；图4为本发明提供的金融报文处理装置的结构示意图；图5为本发明提供的电子设备的结构示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚，下面将结合本发明中的附图，对本发明中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。图1为本发明提供的金融报文处理方法的流程示意图，如图1所示，该方法包括如下步骤：步骤100、接收到目标金融报文后，根据目标金融报文的报文头确定目标金融报文的报文类型。具体地，金融报文结构一般分为报文头与报文体，报文头中会以固定格式填写报文的类型、发起方、接收方等信息，报文体根据不同的报文类型各不相同。本发明提供的金融报文处理方法，其执行主体可以是用于进行金融报文处理的装置、设备、系统等等，本发明不做具体限定，为便于论述，以下均简称为“报文处理系统”。目标金融报文可以是指待处理的任意金融报文，本发明并不具体限定。例如，在接收到某一金融报文后，报文处理系统首先可以根据该金融报文的报文头中填写的信息，确定该金融报文的报文类型。比如常见的报文类型有111报文、112报文等。步骤101、根据目标金融报文的报文类型，确定相应的目标配置文件或者目标类；其中，目标配置文件中配置有目标金融报文的报文结构与计算机数据结构之间的映射关系，目标类中标注有目标金融报文的报文结构与计算机数据结构之间的映射关系。具体地，报文处理系统可以预先配置与不同报文类型相关联的配置文件，这些配置文件中配置有相应类型报文的报文结构与计算机数据结构之间的映射关系，从而报文处理系统可以在确定目标金融报文的报文类型之后，根据报文类型找到对应的配置文件，并根据该配置文件得到目标金融报文的报文结构与计算机数据结构之间的映射关系。报文处理系统也可以预先定义与不同报文类型相关联的类，这里的类指的是计算机编程语言中的类，这些类中可以标注目标金融报文的报文结构与计算机数据结构之间的映射关系，从而报文处理系统可以在确定目标金融报文的报文类型之后，根据报文类型找到对应的目标类，并根据该目标类得到目标金融报文的报文结构与计算机数据结构之间的映射关系。可选地，目标类可以包括动态语言的类或者Java类，目标类中包含相应编程语言的注解，该注解用于将报文头和报文体的结构化信息分别标注在目标类的类头和类属性上。需要说明的是，本发明所述的注解指的是程序能够识别的注解，并非程序中的注释。以具体的JavaBean类为例，在计算机工程中只需要实现具体报文的JavaBean类，在JavaBean类定义时根据相关报文标准，将报文头、报文信息项的结构化信息以Java注解的方式标注在相关类和类 的属性上。为便于更清晰地理解，以下提供了具体示例的程序代码。示例1：报文，代码如下：示例2：报文结构信息以注解的形式标注于JavaBean类，代码如下：步骤102、基于目标配置文件或者目标类，对目标金融报文进行解析。具体地，根据报文类型找到目标配置文件或者目标类之后，报文处理系统便可以根据目标配置文件或者目标类中报文结构与计算机数据结构之间的映射关系，进行报文解析。例如，报文处理系统根据报文类型找到对应的配置文件后，便可以根据配置文件中报文结构与计算机数据结构之间的映射关系，将报文中的数值一一映射到相应的报文信息项，实现报文解析。本发明提供的报文处理方法，通过根据目标金融报文的报文类型找到对应的目标配置文件或者目标类，根据目标配置文件或者目标类中报文结构与计算机数据结构之间的映射关系对目标金融报文进行解析，能够实现对各种金融报文的统一解析，避免出现大量重复度高的代码，提高工程可维护性和报文处理效率。可选地，在目标类为动态语言的类的情况下，基于目标类，对目标金融报文进行解析，包括：构造动态语言的对应类的实例；根据动态语言的对应类中包含的动态语言注解，将目标金融报文的相应报文结构中的数值赋值给动态语言的对应类的实例中的类属性，实现对目标金融报文的解析。具体地，在一些实施例中，可以基于动态语言的类中的注解来标识不同金融报文的结构。报文处理系统确定目标金融报文对应的动态语言的类之后，可以先构造该动态语言的对应类的实例，然后再根据预先定义在类的注解，将对应报文结构中的数值一一赋值给实例中的类属性，从而完成该目标金融报文的解析工作。通过构造类实例再根据注解将相应报文结构中的数值赋值给类属性，可以实现自动将报文的内容进行序列化操作，方便后续业务系统进行处理。可选地，在目标类为Java类的情况下，基于目标类，对目标金融报文进行解析，包括：通过Java反射机制动态构造Java类的实例；根据Java类中包含的Java注解，将目标金融报文的相应报文结构中的数值通过Java反射机制赋值给Java类的实例中的类属性，实现对目标金融报文的解析。具体地，Java注解又称Java标注，是在JDK5时引入的新特性， Java注解提供了一种安全的类似注释的机制，用来将任何的信息或元数据与程序元素进行关联。Java注解是附加在代码中的一些元信息，用于一些工具在编译、运行时进行解析和使用，起到说明、配置的功能。Java不是动态语言，但是Java可以称之为“准动态语言”。反射机制是Java被视为“准动态语言”的关键，反射机制允许程序在执行期借助于ReflectionAPI取得任何类的内部信息，并且直接操作任意对象的内部属性及方法。因此，在一些实施例中，可以基于Java类中的注解和反射机制来实现对金融报文的解析。图2为本发明提供的报文接收解析流程示意图，如图2所示，可以在JavaBean类定义时根据相关报文标准，将报文头、报文信息项的结构化信息以Java注解的方式标注在相关类和类的属性上。在报文处理系统接收到金融报文对报文进行解析时，可以先根据报文头确定报文的具体类型，然后根据报文类型找到对应的JavaBean类，之后，通过Java反射机制动态构造此类的实例，并根据相关的Java注解将对应报文结构中的数值通过反射机制赋值给实例的属性，从而实现通过Java注解与反射机制动态完成报文的解析工作，方便了后续业务系统进行处理。可选地，注解还用于将报文的业务校验条件标注在目标类的类属性上；对目标金融报文进行解析之后，该方法还包括：根据注解标注的目标金融报文的业务校验条件，对解析得到的报文内容进行业务合法性校验。具体地，在一些实施例中，还可以通过注解将报文的业务校验条件标注在目标类的类属性上，例如业务校验条件可以包括报文接收的业务校验条件、报文发送的业务校验条件或其他业务合法性校验的条件等，可以根据实际需要进行设置，本发明对此不做具体限定。其中，报文接收的业务校验条件可以包括报文是否可在当前时间段处理或其他条件等。在目标类的注解标注了报文的业务校验条件的情况下，报文处理系统在对目标金融报文进行解析之后，还可以进一步根据相关标注的检查注解，对报文进行初步的业务上的合法性检查。检查不通过后，可以由统一业务处理流程处理。通过注解获取所标注的业务校验条件的方法，对于目标类为动态语言的类的情况，可以直接通过注解得到所标注的业务校验条件；对于目标类为Java类的情况，可以通过反射机制得到所标注的业务校验条件。通过在目标类中注解业务校验条件，可以避免检查方法与类定义分开实现，提高了工程的可维护性。可选地，该方法还包括：在需要发送报文时，根据待发送报文对应的类实例中的类属性值和注解，确定待发送报文的报文结构、相应报文结构中的数值以及业务校验条件；根据业务校验条件对待发送报文进行合法性检查通过后，根据待发送报文的报文结构和相应报文结构中的数值，构造待发送报文的报文体，并根据待发送报文对应的类实例中类头上的注解构造报文头。具体地，基于本发明提供的对报文进行解析的方法，在需要发送报文时，报文处理系统可以先获取待发送报文对应的类实例，由于该类实例的注解标注有报文结构与计算机数据结构之间的映射关系，因此可以根据该类实例中的属性值和相应注解，确定待发送报文的报文结构和相应报文结构中的数值，由此便可以构造待发送报文的报文体。在该类实例的注解标注有业务校验条件的情况下，还可以根据相应的注解，确定对于报文发送的业务校验条件，如：接收到报文中日期与当前工作日一致。然后，根据业务校验条件对待发送报文进行合法性检查通过后，再根据待发送报文的报文结构和相应报文结构中的数值，构造待发送报文的报文体。对于报文头，可以根据待发送报文对应的类实例中类头上的注解得到报文头的信息，从而构造出报文头。对于待发送报文对应的类实例为动态语言的类实例的情况，可以直接通过注解确定待发送报文的报文结构和相应报文结构中的数值；对于待发送报文对应的类实例为Java类实例的情况，可以通过反射机制确定待发送报文的报文结构和相应报文结构中的数值。图3为本发明提供的报文封装发送流程示意图，如图3所示，在需要发送报文时，报文处理系统可以先构造报文，然后提取JavaBean实例中属性的注解和属性值，之后，根据JavaBean实例的属性值和属性注解确定报文结构和相应报文结构中的数值，构造具体报文体。并根据定义在类实例头上的注解构造报文头，构造完成后便可以进行报文发送操作。从而实现通过JavaBean类上的注解动态封装要发送的报文内容，方便了后续业务系统进行处理。下面对本发明提供的金融报文处理装置进行描述，下文描述的金融报文处理装置与上文描述的金融报文处理方法可相互对应参照。图4为本发明提供的金融报文处理装置的结构示意图，如图4所示，该装置包括：第一确定模块400，用于接收到目标金融报文后，根据目标金融报文的报文头确定目标金融报文的报文类型；第二确定模块410，用于根据目标金融报文的报文类型，确定相应的目标配置文件或者目标类；其中，目标配置文件中配置有目标金融报文的报文结构与计算机数据结构之间的映射关系，目标类中标注有目标金融报文的报文结构与计算机数据结构之间的映射关系；解析模块420，用于基于目标配置文件或者目标类，对目标金融报文进行解析。可选地，目标类包括动态语言的类或者Java类，目标类中包含相应编程语言的注解，注解用于将报文头和报文体的结构化信息分别标注在目标类的类头和类属性上。可选地，在目标类为动态语言的类的情况下，基于目标类，对目标金融报文进行解析，包括：构造动态语言的对应类的实例；根据动态语言的对应类中包含的动态语言注解，将目标金融报文的相应报文结构中的数值赋值给动态语言的对应类的实例中的类属性，实现对目标金融报文的解析。可选地，在目标类为Java类的情况下，基于目标类，对目标金融报文进行解析，包括：通过Java反射机制动态构造Java类的实例；根据Java类中包含的Java注解，将目标金融报文的相应报文结构中的数值通过Java反射机制赋值给Java类的实例中的类属性，实现对目标金融报文的解析。可选地，注解还用于将报文的业务校验条件标注在目标类的类属性上；该装置还包括：校验模块，用于对目标金融报文进行解析之后，根据注解标注的目标金融报文的业务校验条件，对解析得到的报文内容进行业务合法性校验。可选地，该装置还包括发送模块，用于：在需要发送报文时，根据待发送报文对应的类实例中的类属性值和注解，确定待发送报文的报文结构、相应报文结构中的数值以及业务校验条件；根据业务校验条件对待发送报文进行合法性检查通过后，根据待发送报文的报文结构和相应报文结构中的数值，构造待发送报文的报文体，并根据待发送报文对应的类实例中类头上的注解构造报文头。可选地，Java类为JavaBean类。在此需要说明的是，本发明提供的上述装置，能够实现上述方法实施例所实现的所有方法步骤，且能够达到相同的技术效果，在此不再对本实施例中与方法实施例相同的部分及有益效果进行具体赘述。图5为本发明提供的电子设备的结构示意图，如图5所示，该电子设备可以包括：处理器510、通信接口520、存储器530和通信总线540，其中，处理器510，通信接口520，存储器530通过通信总线540完成相互间的通信。处理器510可以调用存储器530中的逻辑指令，以执行上述各实施例提供的任一所述金融报文处理方法。此外，上述的存储器530中的逻辑指令可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。在此需要说明的是，本发明提供的电子设备，能够实现上述方法实施例所实现的所有方法步骤，且能够达到相同的技术效果，在此不再对本实施例中与方法实施例相同的部分及有益效果进行具体赘述。另一方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现以执行上述各实施例提供的任一所述金融报文处理方法。在此需要说明的是，本发明提供的非暂态计算机可读存储介质，能够实现上述方法实施例所实现的所有方法步骤，且能够达到相同的技术效果，在此不再对本实施例中与方法实施例相同的部分及有益效果进行具体赘述。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分所述的方法。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
