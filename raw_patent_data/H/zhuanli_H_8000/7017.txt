标题title
一种ToF光源驱动电路及电子设备
摘要abst
本发明公开了一种ToF光源驱动电路及电子设备。所述电路包括：放大模块，用于接收外部输入的调制光源信号并进行放大后，输出放大的驱动电流；至少一驱动模块，用于响应于所述驱动电流输出驱动信号；至少一光源发射模块，用于响应于所述驱动信号进行电流光波转换，并将转换成的光波发射出去；以及控制模块，用于接收供电电源，响应于外部输入的光源使能信号进行电路开关控制，并通过调整电路开关频率调整所述光源发射模块所发射的光波相位。本发明通过采用通用型分立元件搭建ToF光源驱动电路，电路结构简单易操作，成本较低，并且可以多级扩展，可以同时覆盖低功耗到大功耗的不同应用场合、应用范围更广。
权利要求书clms
1. 一种ToF光源驱动电路，其特征在于，包括：放大模块，用于接收外部输入的调制光源信号并进行放大后，输出放大的驱动电流；至少一驱动模块，用于响应于所述驱动电流输出驱动信号；至少一光源发射模块，用于响应于所述驱动信号进行电流光波转换，并将转换成的光波发射出去；以及控制模块，用于接收供电电源，响应于外部输入的光源使能信号进行电路开关控制，并通过调整电路开关频率调整所述光源发射模块所发射的光波相位；所述驱动模块采用高功率高速N沟道增强型MOS管，所述高功率高速N沟道增强型MOS管的栅极接收所述驱动电流；所述光源发射模块包括光电器件、第一相位补偿单元以及限流单元；所述光电器件的第一端电连接至所述控制模块，所述光电器件的第二端电连接至所述高功率高速N沟道增强型MOS管的漏极，用于在所述控制模块控制电路导通时，响应于所述驱动信号将流过所述光电器件的电流转换成光波发射出去；所述第一相位补偿单元的第一端分别电连接至所述高功率高速N沟道增强型MOS管的漏极以及所述光电器件的第二端，所述第一相位补偿单元的第二端电连接至所述高功率高速N沟道增强型MOS管的源极，用于对所述光电器件进行相位补偿； 所述限流单元的第一端分别电连接至所述高功率高速N沟道增强型MOS管的源极以及所述第一相位补偿单元的第二端，所述限流单元的第二端电连接至公共电压端，用于对所述光电器件进行限流。2.根据权利要求1所述的电路，其特征在于，所述电路还包括脉冲端口，所述脉冲端口电连接至所述放大模块，用于提供占空比为50%、电压幅度为3.3V的方波信号作为所述调制光源信号。3.根据权利要求1所述的电路，其特征在于，所述电路还包括射频端口，所述射频端口电连接至所述放大模块，用于提供射频信号作为所述调制光源信号。4.根据权利要求1所述的电路，其特征在于，所述放大模块采用双位双电源收发器，且所述双位双电源收发器的两个输入端口共同接收所述调制光源信号，所述双位双电源收发器的两个输出端口共同输出所述驱动电流。5.根据权利要求1所述的电路，其特征在于，所述光电器件采用垂直腔面发射激光器；所述第一相位补偿单元采用电容电阻串联电路；所述限流单元采用单电阻限流或多电阻并联限流。6.根据权利要求1所述的电路，其特征在于，所述光源发射模块还包括第二相位补偿单元，所述第二相位补偿单元的第一端分别电连接至所述控制模块以及所述光电器件的第一端，所述第二相位补偿单元的第二端电连接至公共电压端，用于对所述光电器件进行辅助相位补偿。7.根据权利要求6所述的电路，其特征在于，所述第二相位补偿单元采用电容并联电路。8.根据权利要求1所述的电路，其特征在于，所述控制模块包括级连的N沟道增强型MOS管与P沟道增强型MOS管；所述N沟道增强型MOS管的栅极接收所述光源使能信号，其源极电连接至公共电压端，其漏极电连接至所述P沟道增强型MOS管的栅极；所述P沟道增强型MOS管的源极电连接至所述光源发射模块，其漏极接收所述供电电源。9.一种电子设备，其特征在于，包括如权利要求1~8任一项所述的ToF光源驱动电路。
说明书desc
技术领域本发明涉及ToF测距技术领域，尤其涉及一种ToF光源驱动电路及电子设备。背景技术双目测距、结构光与飞行时间是当今三大主流3D成像技术，其中，ToF由于其原理简单、结构简单稳定、测量距离远等优势，已逐渐应用于手势识别、3D建模、无人驾驶及机器视觉等领域。ToF技术的工作原理是：利用光源发射连续调制的发射光，发射光照射到待测物体表面后反射回来，反射光被ToF模组的图像传感器捕获，通过计算发射光与反射光时间差或相位差得到物体距离相机的深度/距离。目前市场上ToF模组的光源一般采用驱动IC电路进行驱动，但是驱动IC的成本较为昂贵，在大功率、多角度和低成本场合无法满足940nm和850nm波长的激光发射。现有的驱动IC也无法满足同时驱动多个激光发射模块的功能，而在同一个信号源的情况下，如果增加IC数量，会造成相当大的成本增加，且输出的信号相位也会有较大影响。发明内容本发明的目的在于提供一种ToF光源驱动电路及电子设备，用于解决现有ToF光源驱动电路的成本较高、无法覆盖低功耗到大功耗的不同应用场合、无法满足多级拓展需求的技术问题，通过采用通用型分立元件搭建光源驱动电路，成本更低廉、应用范围更广、并且满足多级拓展的需求。为实现上述目的，本发明提供了一种ToF光源驱动电路，包括：放大模块，用于接收外部输入的调制光源信号并进行放大后，输出放大的驱动电流；至少一驱动模块，用于响应于所述驱动电流输出驱动信号；至少一光源发射模块，用于响应于所述驱动信号进行电流光波转换，并将转换成的光波发射出去；以及控制模块，用于接收供电电源，响应于外部输入的光源使能信号进行电路开关控制，并通过调整电路开关频率调整所述光源发射模块所发射的光波相位；所述驱动模块采用高功率高速N沟道增强型MOS管，所述高功率高速N沟道增强型MOS管的栅极接收所述驱动电流；所述光源发射模块包括光电器件、第一相位补偿单元以及限流单元；所述光电器件的第一端电连接至所述控制模块，所述光电器件的第二端电连接至所述高功率高速N沟道增强型MOS管的漏极，用于在所述控制模块控制电路导通时，响应于所述驱动信号将流过所述光电器件的电流转换成光波发射出去；所述第一相位补偿单元的第一端分别电连接至所述高功率高速N沟道增强型MOS管的漏极以及所述光电器件的第二端，所述第一相位补偿单元的第二端电连接至所述高功率高速N沟道增强型MOS管的源极，用于对所述光电器件进行相位补偿；所述限流单元的第一端分别电连接至所述高功率高速N沟道增强型MOS管的源极以及所述第一相位补偿单元的第二端，所述限流单元的第二端电连接至公共电压端，用于对所述光电器件进行限流。为实现上述目的，本发明还提供了一种电子设备，包括本发明所述的ToF光源驱动电路。本发明通过采用通用型分立元件搭建ToF光源驱动电路，电路结构简单易操作，成本较低，并且可以多级扩展，可以同时覆盖低功耗到大功耗的不同应用场合、应用范围更广。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简要介绍。显而易见地，下面描述中的附图仅是本发明的一些实施例，对于本领域的普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它的附图。图1为本发明一实施例提供的ToF光源驱动电路的结构框图；图2为本发明一实施例提供的ToF光源驱动电路的电路连接示意图。具体实施方式下面将结合附图，对本发明实施例中的技术方案进行清楚、完整地描述。显然，所描述的实施例仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有作出创造性劳动前提下所获得的所有其它实施例，都属于本发明保护的范围。本发明一实施例提供了一种ToF光源驱动电路。请参阅图1，其为本发明一实施例提供的ToF光源驱动电路的结构框图。如图1所示，本实施例所述电路包括放大模块11、至少一驱动模块12、至少一光源发射模块13以及控制模块14。具体的，所述放大模块11用于接收外部输入的调制光源信号并进行放大后，输出放大的驱动电流TRIG-G。所述驱动模块12用于响应于所述驱动电流TRIG-G输出驱动信号。所述光源发射模块13用于响应于所述驱动信号进行电流光波转换，并将转换成的光波发射出去。所述控制模块14用于接收供电电源LED-POWER，响应于外部输入的光源使能信号Illum-ENz进行电路开关控制，并通过调整电路开关频率调整所述光源发射模块13所发射的光波相位。在一些实施例中，所述电路还包括脉冲端口10，所述脉冲端口10电连接至所述放大模块11，用于提供脉冲输入信号Illum-P作为所述调制光源信号。例如，提供占空比约为50%、电压幅度约为3.3V的方波脉冲输入信号作为所述调制光源信号。在一些实施例中，所述电路还包括射频端口19，所述射频端口19电连接至所述放大模块11，用于提供射频信号JPTX1作为所述调制光源信号。具体的，射频端口19作为辅助端口，用于在脉冲端口10提供的脉冲输入信号无法满足光源信号调制需求时，将调制好的射频信号通过该射频端口19提供至所述放大模块11。在一些实施例中，所述光源发射模块13包括光电器件131，所述光电器件131的第一端电连接至所述控制模块14，所述光电器件131的第二端电连接至所述驱动模块12，用于在所述控制模块14控制电路导通时，响应于驱动模块12提供的所述驱动信号将流过所述光电器件131的电流转换成光波发射出去。在一些实施例中，所述光源发射模块13还包括第一相位补偿单元132以及限流单元133。所述第一相位补偿单元132的第一端电连接至所述光电器件131的第二端，所述第一相位补偿单元132的第二端电连接至所述驱动模块12，用于对所述光电器件131进行相位补偿。所述限流单元133的第一端分别电连接至所述驱动模块12以及所述第一相位补偿单元132的第二端，所述限流单元133的第二端电连接至公共电压端，用于对所述光电器件131进行限流。在一些实施例中，所述光源发射模块13还包括第二相位补偿单元134，所述第二相位补偿单元134的第一端分别电连接至所述控制模块14以及所述光电器件131的第一端，所述第二相位补偿单元134的第二端电连接至公共电压端，用于对所述光电器件131进行辅助相位补偿。在一些实施例中，此电路可以进行扩展，通过驱动不同的驱动模块12，可以连接多个光源发射模块13。本发明上述电路，通过采用通用型分立元件搭建ToF光源驱动电路，电路结构简单易操作，成本较低，并且可以多级扩展，应用范围更广。请参阅图2，其为本发明一实施例提供的ToF光源驱动电路的电路连接示意图。如图2所示，本实施例所述放大模块11采用双位双电源收发器U25，且所述双位双电源收发器U25的两个输入端口1A、2A共同接收所述调制光源信号，所述双位双电源收发器U25的两个输出端口1B、2B共同输出所述驱动电流TRIG-G。所述双位双电源收发器U25具有可配置的电压电平转换和三态输出。使用两个独立的可配置电源轨，允许在电压节点之间进行通用的低压双向转换。A端口旨在跟踪VA，VA接受1.65至5.5V的任何电源电压。B端口旨在跟踪VB，VB接受1.65至5.5V的任何电源电压。方向控制DIR输入的逻辑电平激活B端口输出或A端口输出：当激活B端口输出时，设备将数据从A端口传输到B端口；当激活A端口输出时，设备将数据从B端口传输到A端口。优选地，所述双位双电源收发器U25采用74LVC2T45，74LVC2T45的2路都作用于同一个输入脉冲数字信号，可以得到50mA的电流，足以推动驱动模块12在20Mhz的频率下工作。本实施例所述驱动模块12采用高功率高速N沟道增强型MOS管Q10，所述高功率高速N沟道增强型MOS管Q10的栅极接收所述驱动电流TRIG-G，其源极耦接至公共电压端，其漏极电连接至所述光源发射模块13。所述高功率高速N沟道增强型MOS管Q10可以产生大电流的高频开关脉冲，使得光电器件能够发出20M以内的3A大电流信号，电流越大则转换得到的光波形越接近方波。优选地，所述高功率高速N沟道增强型MOS管Q10采用CSD17381，利用CSD17381的大电流特性，可以很好的使得光电器件在电光转换中得到ToF模组所需要的激光波形。本实施例所述光电器件131采用垂直腔面发射激光器；VCSEL是新型半导体激光器，其出光方向垂直于谐振腔表面，主要由三部分组成，即激光工作物质、泵浦源和光学谐振腔。工作物质是发出激光的物质，通过泵浦源对其进行激励，形成粒子数反转，发出激光。光学谐振腔由顶部反射镜和底部反射镜组成，发出的激光在光学谐振腔内放大与振荡，并由顶部反射镜输出，形成了垂直腔面的激光发射，从而得到稳定、持续、有一定功率的高质量激光。在电路上采用VCSEL、MOS管Q10串联的形式进行连接，通过扩展新的串联形式的VCSEL与MOS管，控制不同的MOS管，可以驱动相应的VCSEL，满足多级拓展的需求。本实施例所述第一相位补偿单元132采用电容电阻串联电路。具体的，电容C28与电阻R12串联作为所述第一相位补偿单元132，以对所述光电器件131进行相位补偿。所述第一相位补偿单元132作为主要的相位补偿电路用于对所述光电器件131直接进行相位补偿。所述限流单元133可以采用单电阻限流，或采用多电阻并联以达到目标阻抗效果实现限流。具体的，本实施例所述限流单元133采用4个相同的电阻R4、R8、R9、R10并联以达到目标阻抗效果实现限流。例如，采用4个阻值为1欧的电阻并联以得到0.25欧的目标阻抗效果实现限流。本实施例所述第二相位补偿单元134采用电容并联电路。具体的，电容C8与电容C10并联作为所述第二相位补偿单元134，以对所述光电器件131进行辅助相位补偿。所述第二相位补偿单元134作为辅助的相位补偿电路用于对所述控制模块调制的相位进行补偿，进而实现对所述光电器件131的相位补偿。本实施例所述控制模块14包括级连的N沟道增强型MOS管Q6与P沟道增强型MOS管Q3。具体的，所述N沟道增强型MOS管Q6的栅极接收所述光源使能信号Illum-ENz，其源极电连接至公共电压端，其漏极电连接至所述P沟道增强型MOS管的栅极Q3；所述P沟道增强型MOS管Q3的源极电连接至所述光源发射模块13，其漏极接收所述供电电源LED-POWER。级连的两个MOS管实现两级放大，控制整个电路的通断；进一步通过光源使能信号Illum-ENz调整两个MOS管的开关频率，可以得到多相位的波形，例如，得到ToF模组所需要的4相位光波波形。具体的，VCC1、VCC2均为外部提供的参考电平，用于辅助相应MOS管以及放大模块11工作；所述P沟道增强型MOS管Q3的栅源之间还电连接有旁路电容C32，电容C32进一步通过电容C31电连接至公共电压端。本发明的输入方波要求低于20Mhz，源于对CSD17381的最大带宽限制，最大电流不超过10A，可承受30V的最大压降，满足VCSEL的驱动要求。74LVC2T45的2路都作用于同一个输入脉冲信号，可以得到50mA的电流，足以推动CSD17381在20Mhz的频率下工作。VCSEL使用垂直腔面发射激光器，光电转换效率大约为33%，可以满足设计要求。测试得到，ToF模组的图像传感器对于4个相位的激光反射图像接收效果较好，可以达到在5米内精确测距的要求，精度达到1%。在应用范围中，可以同时覆盖低功耗到大功耗的各种应用场合，应用范围更广，且成本相比于现有技术更低廉。基于同一发明构思，本发明还提供了一种电子设备，包括ToF光源驱动电路。所述ToF光源驱动电路采用如图1~图2所示的ToF光源驱动电路。所述ToF光源驱动电路各模块的工作方式可参考图1~图2的描述，此处不再赘述。在本发明构思的领域中是可以根据执行所描述的一个或多个功能的模块来描述和说明实施例。这些模块可以由模拟和/或数字电路物理地实现，例如逻辑门、集成电路、微处理器、微控制器、存储器电路、无源电子元件、有源电子元件、光学组件、硬连线电路等，并且可以可选地由固件和/或软件来驱动。电路例如可以在一个或更多个半导体芯片中实施。构成模块的电路可以由专用硬件实现，或者由处理器实现，或者由执行模块的一些功能的专用硬件和执行模块的其它功能的处理器的组合来实现。在不脱离本发明构思的范围的情况下，可以将实施例的每个模块物理地分成两个或更多个交互且分立的模块。同样地，在不脱离本发明构思的范围的情况下，可以将实施例的模块物理地组合成更复杂的模块。通常，可以至少部分地从上下文中的用法理解术语。例如，在本文中所使用的术语“一个或多个”至少部分取决于上下文，可以用于以单数意义描述特征、结构或特性，或可以用于以复数意义描述特征、结构或特征的组合。另外，术语“基于”可以被理解为不一定旨在表达一组排他性的因素，而是可以替代地，同样至少部分地取决于上下文，允许存在不一定明确描述的其它因素。需要说明的是，本发明的文件中涉及的术语“包括”和“具有”以及它们的变形，意图在于覆盖不排他的包含。术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序，除非上下文有明确指示，应该理解这样使用的数据在适当情况下可以互换。另外，在不冲突的情况下，本发明中的实施例及实施例中的特征可以相互组合。此外，在以上说明中，省略了对公知组件和技术的描述，以避免不必要地混淆本发明的概念。上述各个实施例中，每个实施例重点说明的都是与其它实施例的不同之处，各个实施例之间相同/相似的部分互相参见即可。以上所述仅是本发明的优选实施方式，应当指出，对于本技术领域的普通技术人员，在不脱离本发明原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本发明的保护范围。
