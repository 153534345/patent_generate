标题title
一种面向分布式资源调控的边端数据交互方法
摘要abst
本发明提供了一种面向分布式资源调控的边端数据交互方法，包括制定边缘节点和终端设备之间的信息交互模型；制定边缘节点与终端设备之间的设备注册和常规信息交互体系，设备注册和常规信息交互体系中；制定边缘节点和终端设备之间的通信管理接口模型；基于即插即用工作方式的通讯模块，形成边缘节点和终端设备之间即插即用的交互方式；采用前述步骤制定形成的边缘节点和终端设备之间即插即用的交互方式进行边端数据交互。本发明通过对模型进行统一描述，以模型为交互介质保证了业务应用间的相对独立性质，与传统的以信息点表为描述方式相比，本发明所提方法实现了信息的统一表达，减轻了人力并提高了数据交互的效率。
权利要求书clms
1.一种面向分布式资源调控的边端数据交互方法，其特征在于，包括如下步骤：步骤一、制定边缘节点和终端设备之间的信息交互模型，所述信息交互模型用于实现分布式资源物联终端设备数据的统一表达和对电力物联终端设备数据信息的完整表征；步骤二、制定边缘节点与终端设备之间的设备注册和常规信息交互体系，所述设备注册和常规信息交互体系中，实现不同协议向统一协议的转换；步骤三、制定边缘节点和终端设备之间的通信管理接口模型；步骤四、基于即插即用工作方式的通讯模块，形成边缘节点和终端设备之间即插即用的交互方式；步骤五、采用前述步骤制定形成的边缘节点和终端设备之间即插即用的交互方式进行边端数据交互。2.根据权利要求1所述的面向分布式资源调控的边端数据交互方法，其特征在于，所述信息交互模型用JSON格式作为信息交互格式，内容具体包括：终端设备的生产厂家信息、模型名称、设备名称，以及量测信息的描述，包括对象名称、对象表示、接口类型。3.根据权利要求1所述的面向分布式资源调控的边端数据交互方法，其特征在于，在所述步骤二中，还包括：基于常用通讯协议的规范要求，进行报文类型扩展，实现对设备注册和常规信息交互的支持。4.根据权利要求3所述的面向分布式资源调控的边端数据交互方法，其特征在于，所述报文类型扩展，具体包括扩展：指令查询/设置报文、指令响应报文、数据查询报文、数据查询响应报文、数据设置报文和数据设置响应报文；其中，每种通讯报文的基本结构包括报文头、报文内容、报文尾，定义报文头包括起始符、长度、功能码和设备地址；报文尾包括校验码和结束符；报文内容则根据具体需求进行定义。5.根据权利要求4所述的面向分布式资源调控的边端数据交互方法，其特征在于，在所述步骤二中，所述设备注册的过程包括发现终端设备；所述发现终端设备过程为边缘节点向数据总线发送在线终端设备查询报文，若终端设备在线，则返回报文，表征设备当前状态，包括正常、故障、不可用状态，该报文让边缘节点发现本终端设备，否则边缘设备等待超时后，则认为该设备不在线；其中，所述在线终端设备查询报文采用所述指令查询/设置报文格式，功能码定义为在线终端设备查询，终端设备返回报文采用所述指令响应报文，功能码定义为在线终端设备查询，指令响应内容定义为设备状态。6.根据权利要求4所述的面向分布式资源调控的边端数据交互方法，其特征在于，在所述步骤二中，所述设备注册的过程还包括注册终端设备；所述注册终端设备过程为边缘节点向终端设备发送查询设备信息报文，终端设备将所述信息交互模型采用约定的报文返回，边缘节点识别终端设备信息后，如允许终端设备接入，则向终端设备发送允许入网指令报文，终端设备如确定需要入网则对该指令做肯定回复，完成设备注册。7.根据权利要求6所述的面向分布式资源调控的边端数据交互方法，其特征在于，所述查询设备信息报文采用所述指令查询/设置报文格式，功能码定义为查询设备信息，终端设备返回报文采用指令响应报文，功能码定义为在查询设备信息，指令响应内容定义为信息交互模型。8.根据权利要求6所述的面向分布式资源调控的边端数据交互方法，其特征在于，所述允许入网指令报文采用指令查询/设置报文格式，功能码定义为设备入网，指令标识定义为允许入网或禁止入网，终端设备返回报文采用指令响应报文，功能码定义为设备入网，指令响应内容定义为确认入网或拒绝入网。9.根据权利要求4所述的面向分布式资源调控的边端数据交互方法，其特征在于，在所述步骤二中，常规信息交互的过程包括：由终端设备向边缘节点发送量测数据，由边缘节点向终端设备写入指令；其中，终端设备向边缘节点发送量测数据的过程中，请求量测数据报文采用所述数据查询报文的格式，功能码定义为查询量测数据，终端设备返回报文采用所述数据查询响应报文的格式，功能码定义为查询量测数据，量测数据段按序填入数据；边缘节点向终端设备写入指令过程的过程中，写入指令报文采用所述数据设置报文格式，功能码定义为数据设置，寄存器地址和寄存值状态填入相应数据，终端设备返回报文采用所述数据设置响应报文格式，执行结果为成功或失败。10.根据权利要求1所述的面向分布式资源调控的边端数据交互方法，其特征在于，在所述步骤三中，所述通信管理接口模型包括的报文类型有：查询主节点报文、查询主节点响应报文、添加/查询档案报文、添加/查询档案响应报文、主动上报设备状态报文、查询HPLC/LORA信息报文、响应HPLC/LORA信息报文和透明传输报文。
说明书desc
技术领域本发明属于边端数据交互技术领域，具体涉及一种面向分布式资源调控的边端数据交互方法。背景技术近年来，随着物联网技术的发展，大量的端设备直接或通过边缘设备间接接入云平台，形成了“云边端”的架构。该种架构实现了信息传入云平台以及云平台对边端设备的控制。采用4G/5G通讯以及MQTT协议等技术，可以方便的实现云平台和边缘设备之间的通讯接入，实现物联网设备的远程监控和操作。然而，边缘计算设备和端设备之间通讯接口多样、通讯协议种类繁多，受限于端设备本身的计算资源、开发难度等因素影响，很难方便的进行通讯，因此，如何建立边缘节点与终端设备间安全可靠、经济适用的通信方式以及如何能够有效实现数据交互的规范表达，构建边端之间高效的数据交互模式是当下亟需解决的问题。尤其在当前分布式新能源大规模推广的背景下，分布式光伏、分布式储能、电动车充电桩等分布式资源大规模接入电网，信息接入、设备调控等需求明确，亟需建立一种面向分布式资源调控的边端数据交互方法。发明内容有鉴于此，本发明旨在提供一种面向分布式资源调控的边端数据交互方法，以适应在当前分布式新能源大规模推广的背景下，分布式光伏、分布式储能、电动车充电桩等分布式资源大规模接入电网，信息接入、设备调控等的需求。为了解决上述技术问题，本发明提供以下技术方案：一种面向分布式资源调控的边端数据交互方法，包括如下步骤：步骤一、制定边缘节点和终端设备之间的信息交互模型，信息交互模型用于实现分布式资源物联终端设备数据的统一表达和对电力物联终端设备数据信息的完整表征；步骤二、制定边缘节点与终端设备之间的设备注册和常规信息交互体系，设备注册和常规信息交互体系中，实现不同协议向统一协议的转换；步骤三、制定边缘节点和终端设备之间的通信管理接口模型；步骤四、基于即插即用工作方式的通讯模块，形成边缘节点和终端设备之间即插即用的交互方式；步骤五、采用前述步骤制定形成的边缘节点和终端设备之间即插即用的交互方式进行边端数据交互。进一步的，信息交互模型用JSON格式作为信息交互格式，内容具体包括：终端设备的生产厂家信息、模型名称、设备名称，以及量测信息的描述，包括对象名称、对象表示、接口类型。进一步的，在步骤二中，还包括：基于常用通讯协议的规范要求，进行报文类型扩展，实现对设备注册和常规信息交互的支持。进一步的，报文类型扩展，具体包括扩展：指令查询/设置报文、指令响应报文、数据查询报文、数据查询响应报文、数据设置报文和数据设置响应报文；其中，每种通讯报文的基本结构包括报文头、报文内容、报文尾，定义报文头包括起始符、长度、功能码和设备地址；报文尾包括校验码和结束符；报文内容则根据具体需求进行定义。进一步的，在步骤二中，设备注册的过程包括发现终端设备；发现终端设备过程为边缘节点向数据总线发送在线终端设备查询报文，若终端设备在线，则返回报文，表征设备当前状态，包括正常、故障、不可用状态，该报文让边缘节点发现本终端设备，否则边缘设备等待超时后，则认为该设备不在线；其中，在线终端设备查询报文采用指令查询/设置报文格式，功能码定义为在线终端设备查询，终端设备返回报文采用指令响应报文，功能码定义为在线终端设备查询，指令响应内容定义为设备状态。进一步的，在步骤二中，设备注册的过程还包括注册终端设备；注册终端设备过程为边缘节点向终端设备发送查询设备信息报文，终端设备将信息交互模型采用约定的报文返回，边缘节点识别终端设备信息后，如允许终端设备接入，则向终端设备发送允许入网指令报文，终端设备如确定需要入网则对该指令做肯定回复，完成设备注册。进一步的，查询设备信息报文采用指令查询/设置报文格式，功能码定义为查询设备信息，终端设备返回报文采用指令响应报文，功能码定义为在查询设备信息，指令响应内容定义为信息交互模型。进一步的，允许入网指令报文采用指令查询/设置报文格式，功能码定义为设备入网，指令标识定义为允许入网或禁止入网，终端设备返回报文采用指令响应报文，功能码定义为设备入网，指令响应内容定义为确认入网或拒绝入网。进一步的，在步骤二中，常规信息交互的过程包括：由终端设备向边缘节点发送量测数据，由边缘节点向终端设备写入指令；其中，终端设备向边缘节点发送量测数据的过程中，请求量测数据报文采用数据查询报文的格式，功能码定义为查询量测数据，终端设备返回报文采用数据查询响应报文的格式，功能码定义为查询量测数据，量测数据段按序填入数据；边缘节点向终端设备写入指令过程的过程中，写入指令报文采用数据设置报文格式，功能码定义为数据设置，寄存器地址和寄存值状态填入相应数据，终端设备返回报文采用数据设置响应报文格式，执行结果为成功或失败。进一步的，在步骤三中，通信管理接口模型包括的报文类型有：查询主节点报文、查询主节点响应报文、添加/查询档案报文、添加/查询档案响应报文、主动上报设备状态报文、查询HPLC/LORA信息报文、响应HPLC/LORA信息报文和透明传输报文。综上，本发明提供了一种面向分布式资源调控的边端数据交互方法，包括制定边缘节点和终端设备之间的信息交互模型；制定边缘节点与终端设备之间的设备注册和常规信息交互体系，设备注册和常规信息交互体系中；制定边缘节点和终端设备之间的通信管理接口模型；基于即插即用工作方式的通讯模块，形成边缘节点和终端设备之间即插即用的交互方式；采用前述步骤制定形成的边缘节点和终端设备之间即插即用的交互方式进行边端数据交互。本发明通过对模型进行统一描述，以模型为交互介质保证了业务应用间的相对独立性质，与传统的以信息点表为描述方式相比，本发明所提方法实现了信息的统一表达，减轻了人力并提高了数据交互的效率。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它的附图。图1为本发明实施例提供的一种分布式资源边缘节点和终端设备之间设备注册和常规信息交互方式示意图；图2为本发明实施例提供的一种分布式资源边缘节点和终端设备通讯报文结构示意图；图3为本发明实施例提供的一种分布式资源边缘节点和终端设备通讯业务报文示意图；图4为本发明实施例提供的一种分布式资源边端交互JSON格式信息模型示意图。具体实施方式为使得本发明的目的、特征、优点能够更加的明显和易懂，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，下面所描述的实施例仅仅是本发明一部分实施例，而非全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其它实施例，都属于本发明保护的范围。本实施例提供一种面向分布式资源调控的边端数据交互方法，包括如下步骤：步骤一、制定边缘节点和终端设备之间的信息交互模型，信息交互模型用于实现分布式资源物联终端设备数据的统一表达和对电力物联终端设备数据信息的完整表征；步骤二、制定边缘节点与终端设备之间的设备注册和常规信息交互体系，设备注册和常规信息交互体系中，实现不同协议向统一协议的转换；步骤三、制定边缘节点和终端设备之间的通信管理接口模型；步骤四、基于即插即用工作方式的通讯模块，形成边缘节点和终端设备之间即插即用的交互方式；步骤五、采用前述步骤制定形成的边缘节点和终端设备之间即插即用的交互方式进行边端数据交互。本发明通过对模型进行统一描述，以模型为交互介质保证了业务应用间的相对独立性质，与传统的以信息点表为描述方式相比，本发明所提方法实现了信息的统一表达，减轻了人力并提高了数据交互的效率。在一个可选的实施例中，如图1所示，基于MODBUS协议，进行了报文扩展，制定边缘节点和终端设备之间的设备注册和常规信息交互方式。另一方面，也可以包括MODBUS、DLT645、DLT698等常用通讯协议。本实施例中，扩展报文类型包括指令查询/设置报文、指令响应报文、数据查询报文、数据查询响应报文、数据设置报文和数据设置响应报文。本实施例中，如图2所示，通讯报文包基本结构包括报文头、报文尾以及报文内容，定义报文头包括：起始符、长度、功能码和设备地址；报文尾包括：校验码和结束符终止；报文内容则根据具体需求进行定义。本实施例中，各种业务报文均采用如图2所示基本的报文结构，报文内容则如图3所示，定义如下：指令查询/设置报文内容为：指令标识；指令响应报文内容为：指令响应内容；数据查询报文内容为：起始寄存器地址、寄存器个数；数据响应报文内容为：量测数据*N；数据设置报文内容为：寄存器地址、寄存器值；数据设置响应报文内容为：执行结果。本实施例中，如图1所示，所述设备注册过程包括发现终端设备和注册终端设备，具体而言：发现终端过程为边缘节点向数据总线发送在线终端设备查询报文，若终端设备在线，则返回设备状态信息报文，表征设备当前状态，包括正常、故障、不可用等状态，该报文让边缘节点发现本终端设备。若终端设备不在线，边缘设备等待超时后，则设定该地址代表的终端设备为离线状态，继续询问下一个地址的终端设备。本实施例中，所述设备注册过程的发现终端设备过程，其中在线终端设备查询报文采用指令查询/设置报文格式，功能码定义为在线终端设备查询，终端设备返回报文采用指令响应报文，功能码定义为在线终端设备查询，指令响应内容定义为设备状态正常、故障以及不可用。本实施例中，所述设备注册过程的注册终端设备过程为边缘节点向终端设备发送查询设备信息报文，终端设备将信息交互模型采用约定的设备信息报文返回，边缘节点识别终端设备信息后，如允许终端设备接入，则向终端设备发送允许入网指令报文，终端设备如确定需要入网则对该指令做肯定回复，完成设备注册。本实施例中，如图1所示，其中查询设备信息报文采用指令查询/设置报文格式，功能码定义为查询设备信息，终端设备返回报文采用指令响应报文，功能码定义为在查询设备信息，指令响应内容定义为信息交互模型。本实施例中，如图1所示，其中允许入网指令报文采用指令查询/设置报文格式，功能码定义为设备入网，指令标识定义为允许入网或禁止入网，终端设备返回报文采用指令响应报文，功能码定义为设备入网，指令响应内容确认入网或拒绝入网。本实施例中，如图1所示，所述设备常规信息过程包括终端设备向边缘节点发送量测数据以及边缘节点向终端设备写入指令，具体包括：终端设备向边缘节点发送遥测数据、遥信数据，边缘节点向终端设备发送遥控指令和遥调指令。本实施例中，所述信息交互过程的终端设备向边缘节点发送量测数据过程，如图1所示，其中请求量测数据报文采用数据查询报文格式，功能码定义为查询量测数据，终端设备返回报文采用查询数据响应报文，功能码定义为查询量测数据，量测数据段按序填入数据。本实施例中，所述信息交互过程的边缘节点向终端设备写入指令过程过程，如图1所示，其中写入指令报文采用数据设置报文格式，功能码定义为数据设置，寄存器地址和寄存值状态填入相应数据，终端设备返回报文采用设置指令响应报文，执行结果为成功或失败。本实施例中，如图4所示，以光伏逆变器为例，制定了边缘节点和终端设备之间的信息交互模型，采用JSON格式作为所述信息模型的信息交互格式，信息交互模型包括：终端设备的生产厂家信息、模型名称、设备名称、接口类型，以及量测信息的描述，包括对象名称、对象描述、数据类型。本实施例中，所述通信管理接口模型包括：查询主节点信息、档案管理、主动上报接口、HPLC/LORA信息、控制命令、透明传输接口、上线通知。本实施例中，通信管理接口模型包括的报文类型有：查询主节点报文、查询主节点响应报文、添加/查询档案报文、添加/查询档案响应报文、主动上报设备状态报文、查询HPLC/LORA信息报文、响应HPLC/LORA信息报文、透明传输报文。本实施例中，各种业务报文均采用如图2所示基本的报文结构，定义如下：查询主节点报文内容为：空；查询主节点响应报文内容为：成功标志、响应信息；添加档案报文内容为：设备信息；添加档案响应报文内容为：成功标志；查询档案报文内容为：空；查询档案响应报文内容为：设备地址1、设备信息1、...、设备地址n、设备信息n；主动上报设备状态报文内容为：设备状态；查询HPLC/LORA信息报文内容为：空；响应HPLC/LORA信息报文内容为：响应信息；透明传输报文内容为：原通讯报文。本实施例中，通信管理接口模型的查询主节点信息过程为边缘节点向数据总线发送查询主节点报文，功能码定义为查询主节点，数据总线返回报文采用查询主节点响应报文，成功标志表示是否存在主节点，响应信息存放主节点相关内容。本实施例中，通信管理接口模型的档案管理为每一个成功完成注册终端设备过程的终端设备，向边缘节点发送添加档案报文，其中，功能码定义为添加档案，设备地址为当前节点地址，设备信息为当前设备信息交互模型，边缘节点返回报文采用添加档案响应报文，其中，设备地址为添加档案的添加档案报文的设备地址，成功标志表示是否成功添加此设备档案；终端节点可以通过查询档案报文查看当前边缘节点中已存在的档案，其中，功能码定义为查询档案，边缘节点返回报文采用查询档案响应报文，设备地址为节点地址，其后的设备信息即为此节点的信息交互模型。本实施例中，通信管理接口模型的主动上报接口为当终端设备上线或断线等状态变化时，即插即用通讯模块会向边缘节点发送主动上报设备状态报文，其中，功能码定义为主动上报设备状态，设备地址为当前节点地址，设备状态为当前设备发生状态变化后的状态。本实施例中，通信管理接口模型的HPLC/LORA信息为边缘节点向终端设备发送查询HPLC/LORA信息报文，其中，功能码定义为查询HPLC/LORA信息，设备地址为需要查询的节点地址，即插即用通讯模块返回响应HPLC/LORA信息报文，其中，设备地址为查询HPLC/LORA信息报文的设备地址，响应信息为HPLC/LORA信息。本实施例中，通信管理接口模型的透明传输接口为边缘节点和终端设备的通讯过程中，将原通讯帧填入报文内容直接传输，而不做其他处理。本发明构建了边端设备之间的数据交互体系，建立了统一的交互模型，并定义了通讯管理接口，构建了边端之间高效的数据交互模式。相较于现有技术，本发明的有益效果如下：在“边端”信息交互模型中，本发明采用JSON格式对模型进行统一描述，实现分布式资源物联终端设备数据的统一表达和对电力物联终端设备数据信息的完整表征。以模型为交互介质保证了业务应用间的相对独立性质，与传统的以信息点表为描述方式相比，本发明所提方法实现了信息的统一表达，减轻了人力并提高了数据交互的效率。本发明所提出的边缘节点和终端设备之间的通信管理接口模型，是实现边端之间即插即用技术的基础，考虑到端设备生产厂家、信息协议存在较大差异，本发明构建边端统一的信息交互模型，实现不同协议向统一协议的转换，完成边端设备的即插即用；同时又考虑到端设备通信能力较弱等特点，本发明通过电力线载波技术，对边端的信息交互模型进行传输，提升了边端设备信息传输和数据交互水平。本发明提出的分布式资源物联终端设备与边缘节点之间的设备注册和常规信息交互方式基于常用的电力通讯协议，设计了物联终端设备的发现机制和设备注册机制。发现机制是指边缘节点向数据总线发送在线终端设备查询报文，若终端在线则返回相关信息，若不在线则继续轮询下一个终端设备；设备注册机制指的是边缘节点向终端设备发送查询设备信息报文，终端设备将步骤四所述的信息交互模型采用约定的设备信息报文返回，边缘节点对信息报文进行识别。上述步骤实现了物联终端设备主动接入并自动注册到边缘节点上的全过程，提供了一种分布式资源终端设备接入边缘节点的快捷操作方案，对于电力物联终端设备信息入网具有重要应用价值。本发明基于分布式资源的业务需求，研究边缘节点和终端设备间的通信方式，建立安全可靠、经济适用的通信方式；同时，采取模型的统一描述语言，建立物联终端设备的信息模型，实现数据交互的规范表达，构建边端之间高效的数据交互模式。以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
