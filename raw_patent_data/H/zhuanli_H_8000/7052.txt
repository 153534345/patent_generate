标题title
基于离散空间矢量调制的永磁同步电机电流预测控制方法
摘要abst
一种基于离散空间矢量调制的永磁同步电机电流预测控制方法，其特征在于，包括：采集三相电流及电机转速，对所述三相电流进行矢量变换；计算定子磁链误差矢量，并进行矢量旋转，确定定子磁链误差矢量对应的电压矢量所处三角形区域；计算候选电压矢量，依据代价函数评估最优电压矢量；根据所述最优电压矢量逆变电路输出最优开关序列给实际驱动系统。本发明的优点在于：提升了永磁同步电机模型预测电流控制的控制性能，降低了转矩脉动和电流谐波；降低了离散空间矢量调制技术在永磁同步电机模型预测电流控制中的计算负担，进一步增强了基于离散空间矢量调制的模型预测电流控制方案的实用性。
权利要求书clms
1.一种基于离散空间矢量调制的永磁同步电机电流预测控制方法，其特征在于，包括：采集三相电流及电机转速，对所述三相电流进行矢量变换；计算定子磁链误差矢量，并进行矢量旋转，确定定子磁链误差矢量对应的电压矢量所处三角形区域；计算候选电压矢量，依据代价函数评估最优电压矢量；根据所述最优电压矢量逆变电路输出最优开关序列给实际驱动系统。2.根据权利要求1所述的一种基于离散空间矢量调制的永磁同步电机电流预测控制方法，其特征在于，所述计算定子磁链误差矢量，包括：首先，在静止坐标系下构建永磁同步电机的数学模型：us为定子电压矢量，is为定子电流矢量，Ls为定子电感，Rs为定子电阻，ψs为定子磁链矢量，ψr为转子磁链，θe为转子角度；围绕定子磁链进行离散化，则有Δψs＝)Tsk代表当前采样时刻点；结合速度环给定的电流参考值以及当前时刻的电流预测值，得到下一时刻期望的定子磁链误差矢量为：为参考定子电流矢量。3.根据权利要求1或2所述的一种基于离散空间矢量调制的永磁同步电机电流预测控制方法，其特征在于，将所述三角形区域所包含的三个电压矢量作为所述候选电压矢量。4.根据权利要求3所述的一种基于离散空间矢量调制的永磁同步电机电流预测控制方法，其特征在于，所述确定定子磁链误差矢量对应的电压矢量所处三角形区域，包括：首先获取计算得到的定子磁链误差矢量所在的扇区编号s，并将该误差矢量旋转到第一扇区中，旋转的角度设置为对对应的电压矢量所处的等边三角形扇区建立索引编号，采用下列公式计算对应编号：其中，代表旋转到第一扇区中的定子磁链误差矢量分量；代表取整计算操作；Ts为驱动系统的采样时间，N为驱动系统的单个控制周期被划分为等分周期的数量，Udc为直流电源电压。5.根据权利要求4所述的一种基于离散空间矢量调制的永磁同步电机电流预测控制方法，其特征在于，所述计算候选电压矢量，包括：根据所述索引编号，得到三角形内部包含的三个候选电压矢量分别为：且其中Vs1,Vs2为实际的定子磁链误差矢量所处扇区的边界电压矢量；^为异或运算。
说明书desc
技术领域本发明涉及电机电流控制领域，具体涉及一种基于离散空间矢量调制的永磁同步电机电流预测控制方法。背景技术在现有电机中，永磁同步电机由于其结构紧凑、功率密度高、转矩因数大等优点被广泛地应用在伺服驱动系统、电动汽车、航天航空等领域中。随着相关领域对于永磁同步电机运行标准的要求提高，高性能的电机控制算法成为永磁同步电机驱动应用中的关键。磁场导向控制和直接转矩控制技术是两种传统的永磁同步电机控制方案，磁场导向控制通过矢量变换原理将永磁同步电机复杂的三相模型转换到旋转坐标系下，从而获得了和直流电机类似的控制方式。但由于仅仅采用PI控制律来构建控制回路，磁场导向控制的动态反应能力较弱。直接转矩控制抛弃了磁场导向控制中的矢量变换思想，围绕转矩和磁链进行直接控制，采用bang-bang控制律并结合开关表来输出电压矢量，在稳态运行时，该方法存在较大的转矩和磁链脉动。随着数字器件的发展，模型预测控制作为一种高性能控制方法被广泛应用于永磁同步电机驱动系统。相比于其他控制方案，模型预测控制技术拥有动态反应快，能够包含多变量约束和易于处理非线性项的优点。在永磁同步电机模型预测控制方案中，由于定子电流的分量具有相同的量纲，通常不需要设置额外的权重因子，因此永磁同步电机电流预测控制方案具有独特优势。传统的永磁同步电机电流预测使用PI控制律来搭建速度外环并提供参考定子电流给定，使用模型预测控制方法搭建电流内环，通过代价函数来选择最优输出电压矢量，整个算法随着控制周期进行滚动优化，具备良好的动态响应能力。然而，在两电平三相驱动系统中，对于传统的模型预测电流控制方案而言，由于控制集合只包含逆变器产生的八个基本电压矢量，其最终输出的电压矢量无论是幅值还是相位都将受到限制，并且整个控制过程中逆变器的开关频率也不固定，因此，永磁同步电机驱动系统在运行时会存在较大的转矩脉动和电流谐波。离散空间矢量调制技术常被引入以改善传统模型预测电流控制方案的不足之处。对于离散空间矢量调制技术，通过将控制周期均等地划分为数个小周期，并分别应用基本电压矢量，可以合成大量的虚拟电压矢量来提升模型预测电流控制方案的控制效果。然而，传统的离散空间矢量调制技术会导致算法的计算负担成倍增加，这阻碍了算法的应用。总之，传统的永磁同步电机模型预测电流控制方法存在较大的转矩脉动和电流谐波，并且开关频率不固定，传统的基于离散空间矢量调制技术的永磁同步电机模型预测电流控制方案计算量过大。发明内容本发明的目的是通过以下技术方案实现的。本发明将离散空间矢量调制技术引入模型预测电流控制来，并采用一种简易的分层搜索思想来搜索和生成虚拟电压矢量；通过围绕定子磁链增量来完成电压矢量的预选工作，降低了离散空间矢量调制技术的计算负担。一种基于离散空间矢量调制的永磁同步电机电流预测控制方法，包括：采集三相电流及电机转速，对所述三相电流进行矢量变换；计算定子磁链误差矢量，并进行矢量旋转，确定定子磁链误差矢量对应的电压矢量所处三角形区域；计算候选电压矢量，依据代价函数评估最优电压矢量；根据所述最优电压矢量逆变电路输出最优开关序列给实际驱动系统。进一步地，所述计算定子磁链误差矢量，包括：首先，在静止坐标系下构建永磁同步电机的数学模型：us为定子电压矢量，is为定子电流矢量，Ls为定子电感，Rs为定子电阻，ψs为定子磁链矢量，ψr为转子磁链，θe为转子角度；围绕定子磁链进行离散化，则有Δψs＝)Tsk代表当前采样时刻点；结合速度环给定的电流参考值以及当前时刻的电流预测值，得到下一时刻期望的定子磁链误差矢量为：为参考定子电流矢量。进一步地，将所述三角形区域所包含的三个电压矢量作为所述候选电压矢量。进一步地，所述确定定子磁链误差矢量对应的电压矢量所处三角形区域，包括：首先获取计算得到的定子磁链误差矢量所在的扇区编号s，并将该误差矢量旋转到第一扇区中，旋转的角度设置为对对应的电压矢量所处的等边三角形扇区建立索引编号，采用下列公式计算对应编号：其中，代表旋转到第一扇区中的定子磁链误差矢量分量；代表取整计算操作；Ts为驱动系统的采样时间，N为驱动系统的单个控制周期被划分为等分周期的数量，Udc为直流电源电压。进一步地，所述计算候选电压矢量，包括：根据所述索引编号，得到三角形内部包含的三个候选电压矢量分别为：且其中Vs1,Vs2为实际的定子磁链误差矢量所处扇区的边界电压矢量；^为异或运算。本发明的优点在于：提升了永磁同步电机模型预测电流控制的控制性能，降低了转矩脉动和电流谐波；降低了离散空间矢量调制技术在永磁同步电机模型预测电流控制中的计算负担，进一步增强了基于离散空间矢量调制的模型预测电流控制方案的实用性。附图说明通过阅读下文优选实施方式的详细描述，各种其他的优点和益处对于本领域普通技术人员将变得清楚明了。附图仅用于示出优选实施方式的目的，而并不认为是对本发明的限制。而且在整个附图中，用相同的参考符号表示相同的部件。在附图中：图1示出了根据本发明实施方式的两电平三相永磁同步电机驱动电路图。图2示出了电压矢量空间分布扇区1内部虚拟电压矢量合成图。图3示出了电压矢量预选示意图。图4示出了分层搜索策略示意图。图5示出了本发明的方法流程图。图6示出了测试条件对应波形图：传统模型预测电流控制全矢量遍历的基于离散空间矢量调制的模型预测电流控制本发明所提的基于离散空间矢量调制的模型预测电流控制。图7示出了测试条件对应波形图：传统模型预测电流控制全矢量遍历的基于离散空间矢量调制的模型预测电流控制本发明所提的基于离散空间矢量调制的模型预测电流控制。图8示出了测试条件对应波形图：.N＝3.N＝5.N＝7。图9示出了测试条件的THD分析结果图：.传统模型预测电流控制.全矢量遍历的基于离散空间矢量调制的模型预测电流控制.本专利所提的基于离散空间矢量调制的模型预测电流控制。具体实施方式下面将参照附图更详细地描述本公开的示例性实施方式。虽然附图中显示了本公开的示例性实施方式，然而应当理解，可以以各种形式实现本公开而不应被这里阐述的实施方式所限制。相反，提供这些实施方式是为了能够更透彻地理解本公开，并且能够将本公开的范围完整的传达给本领域的技术人员。本发明采用两电平三相逆变电路驱动永磁同步电机，该电路结构如图1所示，该电路结构有如下特点：整个电路包含三组桥臂，每组桥臂包含两个开关管，当电路处于正常工作模式下时，同一组桥臂的上下两个开关管不可以同时导通。定义每组桥臂的开关状态为Sx，有由可知，该逆变电路共有八组不同的开关组合，对应输出的合成电压矢量为：其中，a＝e2π/3；因此，对于两电平三相逆变电路而言，一共可以产生八个基本电压矢量，其中三组桥臂上管全开与上管全关两种开关状态对应输出的电压矢量作用效果等效，均视作零电压矢量。同时，本发明选用表贴式永磁同步电机搭建驱动系统，在旋转坐标系下，永磁同步电机的动态模型可以表述为：其中，ud,uq为d-q轴上的定子电压分量，id,iq为d-q轴上的定子电流分量，ψd,ψq为d-q轴上的磁链分量，ψf为转子磁链，Ls为定子电感，Rs为定子电阻，ωe为电角速度，Te为电磁转矩，P为永磁同步电机极对数。结合，通过前向欧拉法将动态模型进行离散化：其中，Ts为驱动系统的采样时间，同时下标k代表当前采样时刻点。传统的模型预测电流控制策略在每个采样周期内，分别将八个基本电压矢量代入中，并对定子电流id,iq进行预测，得到对应电压矢量作用下的电流预测值，同时围绕预测分量构建代价函数，从而评估最优输出电压矢量。值得注意的是，在实际离散系统中，由于电压矢量的作用时序不是瞬时发生，而需要延后至下一采样周期，因此在使用代价函数评估时，需要考虑一拍补偿，即需要增加一步预测过程。因此具体的代价函数构建如下：其中，为PI控制律构建的速度外环提供作为下一时刻的定子电流的参考值。可以看出，对于传统的模型预测电流控制方法而言，其控制集仅包含八个基本电压矢量，因此在稳态时整个系统存在较大的转矩脉动和电流谐波。通过引入离散空间矢量调制技术来生成大量的虚拟电压矢量，从而有效拓展控制集。离散空间矢量调制技术的原理如下：驱动系统的单个控制周期将按照预先定义被划分为N个等分周期，每个等分周期ti中会输出八个基本电压矢量中的一个，最终输出的电压矢量Vvir将由各个等分周期作用电压矢量合成，如下式所示：其中，V0…V7为八个基本电压矢量。最终生成的电压矢量数目为：n＝3N2+3N+2 图2列出了当N＝2时电压矢量在空间中的分布情况以及单个扇区虚拟电压矢量合成情况。可以看出，随着N的取值增大，生成的虚拟电压矢量数目会成倍增加，这也导致了主控制器的计算负担不断增大，影响了控制算法的应用效果。为了克服传统基于离散空间矢量调制技术的模型预测电流控制方法的计算量大的缺陷，本发明围绕定子磁链误差矢量提出了一种电压矢量预选方法，同时采用一种简单的分层搜索策略来检索和生成所需的电压矢量。首先，在静止坐标系下重新构建永磁同步电机的数学模型：us为定子电压矢量，is为定子电流矢量，ψs为定子磁链矢量，ψr为转子磁链，θe为转子角度。围绕定子磁链进行离散化，则有Δψs＝)Ts 当采样频率取得足够高时，定子电阻对于定子磁链的误差矢量的影响可以忽略不记，因此定子磁链的误差矢量与对应的电压矢量可以看作是线性关系。同时，假定在采样周期足够小时转子转动的角度可以忽略不记并且结合速度环给定的电流参考值以及当前时刻的电流预测值，可以得到下一时刻期望的定子磁链误差矢量为：为参考定子电流矢量。根据可以得到下一时刻期望的定子磁链误差矢量，同时可以得到对应的电压矢量。对于基于离散空间矢量调制的模型预测电流控制方法而言，其生成的电压矢量在空间上的分布可以视为一个个等边三角形的联结，在每个三角形的顶点上都占据一个电压矢量。根据前面的分析，可以将得到的定子磁链误差矢量对应的电压矢量所处的等边三角形视为目标区域，其所包含的三个电压矢量被视为候选电压矢量并作为模型预测控制算法的控制集。电压矢量的预选方法如下图3所示，其中N被设置为3。由于传统的离散空间矢量调制技术在搜索和生成虚拟电压矢量时，通常需要依赖查找表这一操作。随着电压矢量数目的增加，查找表的复杂度也随之增加，因此，本发明还提出了一种简单的分层搜索策略来取代复杂的查找表操作，该策略示意图如图4所示。在应用该分层搜索策略时，首先需要获取计算得到的定子磁链误差矢量所在的扇区编号s，并将该误差矢量旋转到扇区1中以减小算法复杂度，旋转的角度可设置为接着，对对应的电压矢量所处的等边三角形扇区建立索引编号，采用下列公式计算对应编号：其中，代表旋转到扇区1中的定子磁链误差矢量分量；代表取整计算操作。根据上述计算得到的目标三角形的索引编号，可以得到该三角形内部包含的三个候选电压矢量分别为：且其中Vs1,Vs2为实际的定子磁链误差矢量所处扇区的边界电压矢量；^为异或运算。由于该分层搜索策略涉及的大部分参数可预先给定并进行合并，因此其实现的复杂度较低。通过模型预测电流控制方法评估计算得到的三个候选电压矢量，并从中选出最优电压矢量输出。由于预选过程中选用的定子磁链误差矢量考虑了定子电流参考值以及预测值的影响，因此所选出的候选电压矢量能够保证良好的定子电流控制效果，其性能表现与基于全电压矢量遍历的方法类似，但所需的计算量大大减小，并且不受划分值N的影响，极大的拓展了基于离散空间矢量调制的模型预测电流控制方法的应用范围。本发明的算法流程图如图5所示，包括：采集三相电流及电机转速，对所述三相电流进行矢量变换；计算定子磁链误差矢量，并进行矢量旋转，确定定子磁链误差矢量对应的电压矢量所处三角形区域；计算候选电压矢量，依据代价函数评估最优电压矢量；根据所述最优电压矢量逆变电路输出最优开关序列给实际驱动系统。通过在每个采样周期中执行上述算法流程即可完成本发明预期的控制要求。相比于其他的基于离散空间矢量调制的模型预测电流控制方法而言，本发明实现起来需要的计算量更小，并且保持了离散空间矢量调制技术的优点，具备良好的控制性能。实施例：针对本发明所提出的基于离散空间矢量调制的模型预测电流控制方法进行了仿真验证，仿真平台选择为MATLAB/Simulink。仿真设置中，求解器步长为自动类型，最短步长为1e-6s，直流母线电压Udc＝310V，永磁同步电机参数：定子电阻Rs＝2.35Ω，定子电感Ls＝6.5mH，转动惯量J＝0.0003kg·m2，极对数p＝4，永磁体磁通ψf＝0.07876Wb，采样时间Ts＝100us。实验效果为了突出显示本发明良好的控制性能，首先将传统的模型预测电流控制方法，进行全矢量遍历的基于离散空间矢量调制的模型预测电流控制方法和本发明所提出的基于离散空间矢量调制的模型预测电流控制方法进行了对比。此外，还展示了本发明所提方法在不同N取值下的控制性能以进一步验证所提方法的有效性。共进行了三组仿真实验对比，三组实验的测试条件如下：.电机给定额定负载为1.27N·m，设置转速参考值从500rpm升至1500rpm；.电机给定转速参考值为1000rpm，设置电机负载由0.635N·m升至1.27N·m；.电机给定转速参考值为1000rpm，负载为1.27N·m，分别选取N＝3，N＝5，N＝7进行测试；测试效果如图6展示了三种方法作用下定子dq轴电流，A相电流以及电机转速在转速突变时的波形，从波形可以看出，传统的模型预测电流控制方法在运行时定子电流存在着较大的脉动，由于表贴式永磁同步电机转矩与q轴电流成正比，因此也会产生较大的转矩脉动。然而，通过使用离散空间矢量调制技术的模型预测电流控制方法则有效降低了电流的转矩脉动，并且通过观察A相电流可以看出，电机的相电流表现得更加光滑平稳，这意味着使用离散空间矢量调制技术可以获得更低得电流谐波。同时可以看出，本发明所提出的方法与全矢量遍历的基于离散空间矢量调制的模型预测电流控制方法相比，性能表现类似，但本发明实现过程需要的计算量很少。图7展示了三种方法在负载突变时的波形变化情况，与转速突变时的波形表现类似，本发明所提方法相比于传统的模型预测电流控制方法，在变量突变前后时刻均能很好地保持较低的转矩脉动和电流谐波，同时其动态响应仍然十分迅速。相比于全矢量遍历的基于离散空间矢量调制的模型预测电流控制方法，本发明所提方法在负载突变时仍然能够保持相似的控制性能并且仍能保持较低的计算负担。图8展示了当N取不同值时，本发明所提方法的性能表现，由波形可以看出，本发明所提的基于离散空间矢量调制的模型预测电流控制方法在N取值较大时，仍然具备良好的控制性能，并且随着N的取值增大，转矩脉动和电流谐波会进一步降低，但开关频率会进一步增加。值得注意的是，本发明所提方法的计算量并不随着N的取值而发生变化，因此，可以认为本发明所提的基于离散空间矢量调制的模型预测电流控制方法具有很强的拓展性。对测试条件1稳态波形的补充：图9展示了三种方法在测试条件1稳态时的A相电流THD分析结果，其中，传统模型预测电流控制的THD为18.99％，全矢量遍历的基于离散空间矢量调制的模型预测电流控制方法的THD为8.20％，本发明所提的基于离散空间矢量调制的模型预测电流控制的THD为8.87％，可以看出通过使用离散空间矢量调制技术可以有效降低系统的电流谐波，同时根据前文描述，本发明所提发明在获得良好性能的同时具备更低的计算负担。以上所述，仅为本发明较佳的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到的变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以所述权利要求的保护范围为准。
