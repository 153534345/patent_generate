标题title
NB辅助UWB测距系统的跳时序列生成方法
摘要abst
本发明涉及无线载波通信技术领域，公开了NB辅助UWB测距系统的跳时序列生成方法，利用m序列或AES序列生成UWB测距系统的跳时序列。本发明解决了现有技术存在的不同的测距链路之间相互干扰、出现碰撞等问题。
权利要求书clms
1.NB辅助UWB测距系统的跳时序列生成方法，其特征在于，利用m序列或AES序列生成UWB测距系统的跳时序列。2.根据权利要求1所述的NB辅助UWB测距系统的跳时序列生成方法，其特征在于，将UWB测距系统的UWB信号分为N个片段进行发送，将每个片段的间隔时隙由1m s扩展为1ms+xms时隙，将xms时隙等间隔拆分为M个等间隔时隙，从M个时隙中选择一个时隙发送UWB片段，从而生成跳时序列；当对多用户同时进行测距时，不同用户根据自己的初始种子生成跳时序列进行UWB片段的发送。3.根据权利要求1或2所述的NB辅助UWB测距系统的跳时序列生成方法，其特征在于，利用m序列和CHANNEL+SHUFFLE算法生成跳时序列。4.根据权利要求3所述的NB辅助UWB测距系统的跳时序列生成方法，其特征在于，利用m序列和CHANNEL+SHUFFLE算法生成跳时序列的生成机制如下：A1，确定所需的跳时序列长度N以及时隙M，定义一个长度为N的数组SHUFFLE，SHUFFLE中的内容为一个LFSR的前N位输出，每一个输出结果都对N取模；此外，定义一个长度为N的数组CHANNEL，它由0到M单调递增的时隙重复填充直到填满；A2，按照CHANNEL+SHUFFLE算法流程进行操作，得到跳时序列，其中，CHANNEL+SHUFFLE算法流程包括以下步骤：A21，初始化CHANNEL和SHUFFLE；其中，CHANNEL为CHANNEL中编号为i的元素，SHUFFLE为SHUFFLE中编号为i的元素；A22，令i＝0；其中，i表示迭代次数；A23，判断i＜MAC跳频长度是否成立；若是，则进入步骤A24；若否，则完成，获得跳时序列；A24，交换CHANNEL与CHANNEL]；A25，令i＝i+1，返回步骤A23；A3，在生成SHUFFLE时选择P个不同的种子，最后得到可供P个用户使用的跳时序列集。5.根据权利要求4所述的NB辅助UWB测距系统的跳时序列生成方法，其特征在于，LFSR用如下所示的多项式表示：G＝gmXm+gm-1Xm-1...+giXi...+g1X+g0；其中，G表示LFSR的输出，i表示LFSR中从右至左的抽头位，g i表示抽头位i对应的系数，g i＝0或1，g i＝1表示该抽头参与反馈，gi＝0表示该抽头不参与反馈，X表示寄存器存储的信息，Xi表示第i个寄存器存储的信息；当LFSR对应的多项式不能做因式分解时，则从非0的初始状态开始，LFSR能遍历所有的2m-1个非零状态，并在此期间输出长度为2m-1的序列，该序列即为m序列。6.根据权利要求5所述的NB辅助UWB测距系统的跳时序列生成方法，其特征在于，SHUFFLE中的内容为一个15bit的多项式为x15+x14+1的LFSR的前N位输出，LFSR的初始状态任取1到215-1之间的数。7.根据权利要求1或2所述的NB辅助UWB测距系统的跳时序列生成方法，其特征在于，利用AES序列生成跳时序列。8.根据权利要求7所述的NB辅助UWB测距系统的跳时序列生成方法，其特征在于，利用AES序列生成跳时序列包括以下步骤：B1，给定所需的时隙M，随机选取时间戳序列的密钥STS key，并令i＝0；B2，使用STS key对明文进行加密生成密文t；B3，X＝t modM；i＝i+1，若i超过设定阈值，则终止序列的继续输出；否则令s＝s+1并回到步骤B2；其中，X表示输出序列第i位的具体数值，i表示输出序列的某位编号，s表示迭代次数。9.根据权利要求8所述的NB辅助UWB测距系统的跳时序列生成方法，其特征在于，步骤B1中，随机选取128-bit STS key；步骤B2中，明文由随机选取的32bits数据和96bits固定字符组组成。10.根据权利要求9所述的NB辅助UWB测距系统的跳时序列生成方法，其特征在于，若i＞511，终止。
说明书desc
技术领域本发明涉及无线载波通信技术领域，具体是NB辅助UWB测距系统的跳时序列生成方法。背景技术超宽带技术UWB是一种无线载波通信技术，利用纳秒级的非正弦波窄脉冲传输数据，因此其所占的频谱范围很宽。由于其脉冲很窄，且辐射谱密度极低，UWB系统具有多径分辨能力强，功耗低，保密性强等优点。随着2002年FCC批准UWB技术进入民用领域，超宽带无线通信成为短距离、高速无线网络热门的物理层技术之一。许多世界著名的大公司、研究机构、标准化组织都积极投入到超宽带无线通信技术的研究、开发和标准化工作之中，IEEE已经将UWB技术纳入其IEEE 802系列无线标准，已经发布了基于UWB技术的高速无线个域网标准IEEE802.15.4a，以及其演进版本IEEE 802.15.4z，目前下一代UWB无线个域网标准802.15.4ab的制定也已经提上日程。由于大多数UWB通信设备都依靠电池驱动，因此进一步降低UWB系统的功耗是下一代标准的一个重要研究内容，也就是说：UWB是能量受限的。为了与现有的无线网络不产生冲突，UWB设备应满足平均发射功率低于-41.3dBm/MHz。链路的能量预算是由发射方处可用的能量对应于接收方处进行信号处理所需的能量决定的。典型的4z数据包短脉冲将时宽保持在1ms内，将可用的能量限制在37nJ之内。若要传输毫秒的短脉冲，那么系统将为其提供的传输总能量预算。若想突破的限制，提高UWB通信设备的传输效率，需要收发端通过一个高性能的窄带伴随系统来进行辅助。使用高性能的伴随链路来“锚定”后续碎片化的超宽带传输，在提供时间和频率同步的同时，降低系统复杂度，使得高性能的UWB可以在接收端整合能量。现有技术J.S.Hammerschmidt,E.Ekrem,E.Sasoglu,X.Luo,Narrowband assistedmulti-millisecond UWB,2021.、Y.Liu,S.Mani,S.Schaevitz,R.Golshan,NBA-MMS-UWBMAC Considerations,2021.讲述Apple提案15-21-0409-00-04ab、15-21-0593-01-04ab-2和15-21-0605-00-04ab定义的方法。标准定义的NB辅助UWB测距系统的基本的结构如图2所示，在图2中，每个UWB片段都是一个只包含前导的数据包，NB将负责时间和频率偏移估计及数据交换。其中SFD是帧开始分隔字段。其中在NB辅助的多微秒UWB测距系统中，UWB前导preamble是相同结构的重复，每个preamble的持续时间在1到2微秒之间，内部可以填充Ipatov序列、格雷序列等。UWB片段的脉冲重复频率可以是64或者128MHz。UWB片段的个数可以进行动态调整，可以在1、2、4、8、16、32之间进行选择。对于NB片段而言，一般频段在UNII-3之内，总共有25个NB信道。与图1对应，图3给出了设备A与设备B之间进行NB辅助UWB通信的实例，图4给出了NB辅助的多微秒UWB的测距会话过程：现有技术一采用的NB辅助的多微秒UWB测距若存在以下场景：不同测距链路的NB部分使用不同的信道成功接入，但是UWB片段在时间上出现重叠，这样会出现不同的测距链路之间相互干扰的问题。假设不同链路的UWB片段时间重叠50％以上视为存在干扰，时间重叠50％以下视为不存在干扰，由于UWB片段之间以1ms为间隔，所以可能会出现“一碰全碰”这样最差的结果。发明内容为克服现有技术的不足，本发明提供了NB辅助UWB测距系统的跳时序列生成方法，解决现有技术存在的不同的测距链路之间相互干扰、出现碰撞等问题。本发明解决上述问题所采用的技术方案是：NB辅助UWB测距系统的跳时序列生成方法，利用m序列或AES序列生成UWB测距系统的跳时序列。作为一种优选的技术方案，将UWB测距系统的UWB信号分为N个片段进行发送，将每个片段的间隔时隙由1m s扩展为1ms+xms时隙，将xms时隙等间隔拆分为M个等间隔时隙，从M个时隙中选择一个时隙发送UWB片段，从而生成跳时序列；当对多用户同时进行测距时，不同用户根据自己的初始种子生成跳时序列进行UWB片段的发送。作为一种优选的技术方案，利用m序列和CHANNEL+SHUFFLE算法生成跳时序列。作为一种优选的技术方案，利用m序列和CHANNEL+SHUFFLE算法生成跳时序列的生成机制如下：A1，确定所需的跳时序列长度N以及时隙M，定义一个长度为N的数组SHUFFLE，SHUFFLE中的内容为一个LFSR的前N位输出，每一个输出结果都对N取模；此外，定义一个长度为N的数组CHANNEL，它由0到M单调递增的时隙重复填充直到填满；A2，按照CHANNEL+SHUFFLE算法流程进行操作，得到跳时序列，其中，CHANNEL+SHUFFLE算法流程包括以下步骤：A21，初始化CHANNEL和SHUFFLE；其中，CHANNEL为CHANNEL中编号为i的元素，SHUFFLE为SHUFFLE中编号为i的元素；A22，令i＝0；其中，i表示迭代次数；A23，判断i＜MAC跳频长度是否成立；若是，则进入步骤A24；若否，则完成，获得跳时序列；A24，交换CHANNEL与CHANNEL]；A25，令i＝i+1，返回步骤A23；A3，在生成SHUFFLE时选择P个不同的种子，最后得到可供P个用户使用的跳时序列集。作为一种优选的技术方案，LFSR用如下所示的多项式表示：G＝gmXm+gm-1Xm-1...+giXi...+g1X+g0；其中，G表示LFSR的输出，i表示LFSR中从右至左的抽头位，g i表示抽头位i对应的系数，g i＝0或1，g i＝1表示该抽头参与反馈，g i＝0表示该抽头不参与反馈，X表示寄存器存储的信息，X i表示第i个寄存器存储的信息；当LFSR对应的多项式不能做因式分解时，则从非0的初始状态开始，LFSR能遍历所有的2m-1个非零状态，并在此期间输出长度为2m-1的序列，该序列即为m序列。作为一种优选的技术方案，SHUFFLE中的内容为一个15bit的多项式为x15+x14+1的LFSR的前N位输出，LFSR的初始状态任取1到215-1之间的数。作为一种优选的技术方案，利用AES序列生成跳时序列。作为一种优选的技术方案，利用AES序列生成跳时序列包括以下步骤：B1，给定所需的时隙M，随机选取时间戳序列的密钥STS key，并令i＝0；B2，使用STS key对明文进行加密生成密文t；B3，X＝t modM；i＝i+1，若i超过设定阈值，则终止序列的继续输出；否则令s＝s+1并回到步骤B2；其中，X表示输出序列第i位的具体数值，i表示输出序列的某位编号，s表示迭代次数。作为一种优选的技术方案，步骤B1中，随机选取128-bit STS key；步骤B2中，明文由随机选取的32bits数据和96bits固定字符组组成。作为一种优选的技术方案，若i＞511，终止。本发明相比于现有技术，具有以下有益效果：利用m序列和CHANNEL+SHUFFLE算法生成的新的NB辅助的多微秒UWB测距系统中的跳时序列，通过其优秀汉明自相关特性和互相关特性来减少NBA-MMS-UWB测距系统中出现的碰撞问题；利用AES算法生成的新的NB辅助的多微秒UWB测距系统中的跳时序列，通过其优秀汉明自相关特性和互相关特性来减少NBA-MMS-UWB测距系统中出现的碰撞问题。附图说明图1为NB辅助的多微秒UWB测距系统结构图；图2为三种UWB测距系统通信模式结构图；图3为NB辅助UWB测距系统的实例示意图；图4为NB辅助的多微秒UWB测距会话过程示意图；图5为本发明不同场景应用的系统架构示意图；图6为NB辅助的多微秒测距改进结构示意图；图7为LFSR结构示意图；图8为CHANNEL+SHUFFLE算法跳时序列生成流程图；图9为AES序列生成流程图。具体实施方式下面结合实施例及附图，对本发明作进一步的详细说明，但本发明的实施方式不限于此。本发明针对现有的NB辅助的多微秒UWB测距结构，通过设计新的跳时序列来解决目前NBA-MMS-UWB测距中出现的碰撞问题。本发明旨在使用协调的物理信号来改善链路预算，提高链路传输效率。本发明分别利用m序列及其扩展形式、AES序列设计了NB辅助的多微秒UWB测距系统中的跳时序列，可以减小NBA-MMS-UWB测距中出现的碰撞问题。两个实施例对应两套技术方案：实施例1是基于m序列和CHANNEL+SHUFFLE的技术；实施例2对应于AES加密技术。1、本发明应用的系统架构或场景：本发明方案可以工作在星型拓扑或点对点拓扑结构中，在星型拓扑中涉及中心控制节点同一个或多个其他设备之间的数据通信，也同样适用于点对点拓扑结构中，不同设备之间的通信。2、本发明核心装置&amp;产品实现：本发明方案的核心装置和产品包括但不限于通信服务器、路由器、交换机、网桥、计算机、手机等中心控制点，PAN和PAN协调者。本发明方案涉PAN的发送器，接收器，用于所述分组结构的发送/接收；存储器，涉及存储的信令信息，以及提前约定的预设值等；处理器，解析信令信息，处理相关数据。3、本发明核心方法流程：针对NB辅助的多微秒UWB测距的N个片段，将1ms时隙扩展为1ms+xms时隙，将xms时隙等间隔拆分为M个等间隔时隙，UWB片段在M个时隙间进行跳时。当对多用户同时进行测距时，为了避免碰撞。利用设计的跳时序列使得不同用户的片段使用不同的跳时时隙。需要说明的是，本发明涉及的英文缩略语及其对应的英文、中文表达如表1所示。表1英文缩略语及其对应的英文、中文表达表英文缩略语完整的英文表述/英文标准用语中文表述/中文术语LFSRLinear Feedback Shift Register线性反馈移位寄存器PANPersonal Area Network个人局域网PHYPhysical layer物理SFDStart-of-Frame Delimiter帧开始分隔符UWBultra-wide band超宽带WPANWireless Personal Area Network无线个人网络NBNarrow Band窄带AESAdvanced Encryption Standard高级加密标准实施例1如图1至图9所示，LFSR的基本结构如图7所示，其中图中“D”表示移位寄存器，“+”为取模加法。通常图7所示的LFSR可以用如下所示的多项式表示：G＝gmXm+gm-1Xm-1+...+g1X+g0由图7可知，LFSR的输出与其移位寄存器的当前状态决定。当其对应的多项式不能做因式分解时不能写成两个多项式的乘积)，则从非0的初始状态开始，LFSR可以遍历所有的2m-1个非零状态，并在此期间输出长度为2m-1的序列，该序列即为m序列，本发明所提供的跳时序列是对PHY所有可用信道的伪随机打乱集，生成机制如下：第一步定所需的跳时序列长度N以及时隙M，定义一个长度为N的数组SHUFFLE，SHUFFLE中的内容为一个15bit的多项式为x15+x14+1的LFSR的前N位输出，每一个输出结果都对N取模。初始状态可以任取1到215-1之间的数。此外，定义一个长度为N的数组CHANNEL，它由0到M单调递增的时隙重复填充直到填满。第二步，按照如下流程进行操作，最后就可以得到一条新的跳时序列。以下算法称为CHANNEL+SHUFFLE算法。在生成SHUFFLE时选择P个不同的种子，最后可以得到可供P个用户使用的跳时序列集。按照上面的方法生成的序列集中的序列，有优异的汉明自相关和互相关性能。时隙M＝8时长度64的CHANNEL+SHUFFLE算法跳时序列如表2所示。表2时隙M＝8时长度64的CHANNEL+SHUFFLE算法跳时序列表本实施例基于m序列和CHANNEL+SHUFFLE算法生成一类新的NB辅助多微秒UWB测距系统中的跳时序列，所设计序列具有理想的汉明自相关、互相关特性，可以减小NBA-MMS-UWB测距系统中出现的碰撞问题。实施例2如图1至图9所示，作为实施例1的进一步优化，在实施例1的基础上，本实施例还包括以下技术特征：密码学中的高级加密标准AES，又称Rijndael加密法，是美国联邦政府采用的一种区块加密标准。这个标准用来替代原先的DES，已经被多方分析且广为全世界所使用。经过五年的甄选流程，高级加密标准由美国国家标准与技术研究院于2001年11月26日发布于FIPS PUB 197，并在2002年5月26日成为有效的标准。2006年，高级加密标准已然成为对称密钥加密中最流行的算法之一。与上述方法类似的，AES序列也可以起到减小NBA-MMS-UWB测距中出现的碰撞的效果。构造AES序列X的流程可以概括如下：第一步：给定所需的时隙M，随机选取128-bit STS key，并令i＝0；第二步：使用STS key对明文进行加密生成密文t，明文由随机选取的32bits数据s和96bits固定字符组；第三步:X＝t modM；i＝i+1，若i＞511，终止；否则令s＝s+1并回到第二步。时隙M＝50时长度128的AES序列如表3所示。表3时隙M＝50时长度128的AES序列表本实施例利用AES加密算法生成NB辅助的多微秒UWB测距系统中的跳时序列。该序列具有理想的汉明自相关、互相关特性，可以减少NBA-MMS-UWB测距系统中出现的碰撞问题。综上，本发明具有以下特点：利用m序列和CHANNEL+SHUFFLE算法生成的新的NB辅助的多微秒UWB测距系统中的跳时序列，通过其优秀汉明自相关特性和互相关特性来减少NBA-MMS-UWB测距系统中出现的碰撞问题；利用AES算法生成的新的NB辅助的多微秒UWB测距系统中的跳时序列，通过其优秀汉明自相关特性和互相关特性来减少NBA-MMS-UWB测距系统中出现的碰撞问题。如上所述，可较好地实现本发明。本说明书中所有实施例公开的所有特征，或隐含公开的所有方法或过程中的步骤，除了互相排斥的特征和/或步骤以外，均可以以任何方式组合和/或扩展、替换。以上所述，仅是本发明的较佳实施例而已，并非对本发明作任何形式上的限制，依据本发明的技术实质，在本发明的精神和原则之内，对以上实施例所作的任何简单的修改、等同替换与改进等，均仍属于本发明技术方案的保护范围之内。
