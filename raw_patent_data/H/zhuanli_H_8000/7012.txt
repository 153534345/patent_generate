标题title
一种中波应急广播的指令音消除方法及其系统
摘要abst
本发明公开了一种中波应急广播的指令音消除方法及其系统，包括：获取中波发射信号；将中波发射信号转化为数字音频信号；判断所述数字音频信号是否包含中波指令数据，若不存在则保持输出当前类别的音频数据，若存在，则保持输出预设时延的当前类别的音频数据后，切换为输出静音数据，直至中波指令数据结束预设时延后，输出另一类别的音频数据。本发明通过引入Buffer延时与静音数据相配合，从而在检测到数字音频信号包含中波指令数据时，能够保证当前类别的音频数据正常输出的同时中波指令数据产生的噪音不会被播放，且保证了应急广播音频数据的完整播放，解决了传统的中波调幅应急广播解析方法存在的大音量噪音出现、播出体验差的问题。
权利要求书clms
1.一种中波应急广播的指令音消除方法，其特征在于，包括：获取中波发射信号，所述中波发射信号包含正常节目源音频数据和应急广播音频数据，或仅包含正常节目源音频数据；将中波发射信号转化为数字音频信号；判断所述数字音频信号是否包含中波指令数据，若不存在则保持输出当前类别的音频数据，若存在，则保持输出预设时延的当前类别的音频数据后，切换为输出静音数据，直至中波指令数据结束预设时延后，输出另一类别的音频数据。2.根据权利要求1所述的指令音消除方法，其特征在于，在所述数字音频信号中存在的中波指令数据为开播指令数据时，正常解析并输出预设时延的正常节目源音频数据后，切换为输出静音数据，直至开播指令数据结束预设时延后，输出应急广播音频数据。3.根据权利要求1所述的指令音消除方法，其特征在于，在所述数字音频信号中存在的中波指令数据为关播指令数据时，正常解析并输出预设时延的应急广播音频数据后，切换为输出静音数据，直至关播指令数据结束预设时延后，输出正常节目源音频数据。4.根据权利要求1所述的指令音消除方法，其特征在于，配置预设时延的方法包括：确定单次所述中波指令数据的持续时间；确定解析所述中波指令数据所需的解析时间；基于所述持续时间和所述解析时间生成所述预设时延。5.根据权利要求1所述的指令音消除方法，其特征在于，将中波发射信号转化为数字音频信号，包括：将中波发射信号解调为模拟音频信号；基于模数转换模块将所述模拟音频信号转换为数字音频信号。6.一种中波应急广播的指令音消除系统，其特征在于，包括：信号预处理单元，用于获取中波发射信号，并将中波发射信号转化为数字音频信号，其中，所述中波发射信号包含正常节目源音频数据和应急广播音频数据，或仅包含正常节目源音频数据；数据处理单元，用于判断所述数字音频信号是否包含中波指令数据，若不存在则保持输出当前类别的音频数据，若存在，则保持输出预设时延的当前类别的音频数据后，切换为输出静音数据，直至中波指令数据结束预设时延后，输出另一类别的音频数据；音频输出单元，用于将所述数据处理单元输出的数字音频数据转换为模拟音频数据并播放。7.根据权利要求6所述的指令音消除系统，其特征在于，所述信号预处理单元包括依次级联的中波解调芯片和模式转换模块，其中，所述中波解调芯片将中波发射信号解调为模拟音频信号，模数转换模块将所述模拟音频信号转换为数字音频信号。8.根据权利要求7所述的指令音消除系统，其特征在于，所述数据处理单元包括指令解析模块和延迟Buffer模块，其中，所述数据处理单元接收到所述数字音频信号后，将所述数字音频信号同步传输至指令解析模块和延迟Buffer模块，所述指令解析模块判断所述数字音频信号是否包含中波指令数据，若不存在则所述数据处理单元保持输出当前类别的音频数据，若存在，则基于延迟Buffer模块保持输出预设时延的当前类别的音频数据后，切换为输出静音数据，直至中波指令数据结束预设时延后，输出另一类别的音频数据。9.根据权利要求8所述的指令音消除系统，其特征在于，所述音频输出单元包括依次级联的数模转换模块和音频播放设备，其中，所述数模转换模块将所述数据处理单元输出的数字音频数据转化为模拟音频数据后，输出至所述音频播放设备播放。
说明书desc
技术领域本发明涉及应急广播技术领域，具体涉及一种中波应急广播的指令音消除方法及其系统。背景技术调幅广播是采用调幅方式进行的无线电广播。调幅是使载波的频率保持不变，其振幅按所传送信号的变化而变化的调制方式，用于长波、中波和短波广播。其优点是在较大范围内传递稳定，不会因多径反射而使信号失真；占用频带较窄，在中波、短波等频段内能容纳较多的广播电台；接收机较简单，使用广泛。而中波调幅应急广播使用音频切换器来切换正常音频节目和中波唤醒指令信号，当需要对接收终端进行唤醒或者关闭时需发送对应的开播和停播指令信号,并且为了防止终端漏接收指令，往往中波指令会重复发送多次。由于中波指令为协议数据包进行FEC编码和MSK调制，调制成低频模拟波形，并且和正常音频节目进行切换后进入中波发射机播出。当需要发送指令时切换到中波指令信号，指令发送完成后切换到正常音频节目播出。但是，由于中波指令非正常的音频信号，终端接收到该指令信号若正常播放会呈现音量大且难听的噪音。若首次发送的唤醒指令被接收到并进入播出状态，则随后的唤醒指令会变成噪音进行播出。在接收完第一条停播指令并且进行正确解析识别之前，该指令也会变成噪音进行播出，导致开播停播时都有大音量噪音出现。影响播出体验。综上所述，传统的中波调幅应急广播解析方法存在大音量噪音出现、播出体验差的问题。发明内容有鉴于此，本发明提供一种中波应急广播的指令音消除方法及其系统，通过改进数据处理方法及音频输出的控制方法，解决了传统的中波调幅应急广播解析方法存在的大音量噪音出现、播出体验差的问题。为解决以上问题，本发明的技术方案为采用一种中波应急广播的指令音消除方法，包括：获取中波发射信号，所述中波发射信号包含正常节目源音频数据和应急广播音频数据，或仅包含正常节目源音频数据；将中波发射信号转化为数字音频信号；判断所述数字音频信号是否包含中波指令数据，若不存在则保持输出当前类别的音频数据，若存在，则保持输出预设时延的当前类别的音频数据后，切换为输出静音数据，直至中波指令数据结束预设时延后，输出另一类别的音频数据。可选地，在所述数字音频信号中存在的中波指令数据为开播指令数据时，正常解析并输出预设时延的正常节目源音频数据后，切换为输出静音数据，直至开播指令数据结束预设时延后，输出应急广播音频数据。可选地，在所述数字音频信号中存在的中波指令数据为关播指令数据时，正常解析并输出预设时延的应急广播音频数据后，切换为输出静音数据，直至关播指令数据结束预设时延后，输出正常节目源音频数据。可选地，配置预设时延的方法包括： 确定单次所述中波指令数据的持续时间；确定解析所述中波指令数据所需的解析时间；基于所述持续时间和所述解析时间生成所述预设时延。可选地，将中波发射信号转化为数字音频信号，包括：将中波发射信号解调为模拟音频信号；基于模数转换模块将所述模拟音频信号转换为数字音频信号。相应地，本发明提供，一种中波应急广播的指令音消除系统，包括：信号预处理单元，用于获取中波发射信号，并将中波发射信号转化为数字音频信号，其中，所述中波发射信号包含正常节目源音频数据和应急广播音频数据，或仅包含正常节目源音频数据；数据处理单元，用于判断所述数字音频信号是否包含中波指令数据，若不存在则保持输出当前类别的音频数据，若存在，则保持输出预设时延的当前类别的音频数据后，切换为输出静音数据，直至中波指令数据结束预设时延后，输出另一类别的音频数据。音频输出单元，用于将所述数据处理单元输出的数字音频数据转换为模拟音频数据并播放。可选地，所述信号预处理单元包括依次级联的中波解调芯片和模式转换模块，其中，所述中波解调芯片将中波发射信号解调为模拟音频信号，模数转换模块将所述模拟音频信号转换为数字音频信号。可选地，所述数据处理单元包括指令解析模块和延迟Buffer模块，其中，所述数据处理单元接收到所述数字音频信号后，将所述数字音频信号同步传输至指令解析模块和延迟Buffer模块，所述指令解析模块判断所述数字音频信号是否包含中波指令数据，若不存在则所述数据处理单元保持输出当前类别的音频数据，若存在，则基于延迟Buffer模块保持输出预设时延的当前类别的音频数据后，切换为输出静音数据，直至中波指令数据结束预设时延后，输出另一类别的音频数据。可选地，所述音频输出单元包括依次级联的数模转换模块和音频播放设备，其中，所述数模转换模块将所述数据处理单元输出的数字音频数据转化为模拟音频数据后，输出至所述音频播放设备播放。本发明的首要改进之处为提供的中波应急广播的指令音消除方法，通过引入Buffer延时与静音数据相配合，从而在检测到数字音频信号包含中波指令数据时，能够保证当前类别的音频数据正常输出的同时中波指令数据产生的噪音不会被播放，且保证了应急广播音频数据的完整播放，解决了传统的中波调幅应急广播解析方法存在的大音量噪音出现、播出体验差的问题。附图说明图1是本发明的中波应急广播的指令音消除方法的简化流程图；图2是本发明的中波应急广播的指令音消除系统的简化单元连接图。具体实施方式为了使本领域的技术人员更好地理解本发明的技术方案，下面结合附图和具体实施例对本发明作进一步的详细说明。如图1所示，一种中波应急广播的指令音消除方法，包括：S1：获取中波发射信号，所述中波发射信号包含正常节目源音频数据和应急广播音频数据，或仅包含正常节目源音频数据。S2：将中波发射信号转化为数字音频信号。进一步的，将中波发射信号转化为数字音频信号，包括：将中波发射信号解调为模拟音频信号；基于模数转换模块将所述模拟音频信号转换为数字音频信号。S3：判断所述数字音频信号是否包含中波指令数据，若不存在则保持输出当前类别的音频数据，若存在，则保持输出预设时延的当前类别的音频数据后，切换为输出静音数据，直至中波指令数据结束预设时延后，输出另一类别的音频数据。进一步的，在所述数字音频信号中存在的中波指令数据为开播指令数据时，正常解析并输出预设时延的正常节目源音频数据后，切换为输出静音数据，直至开播指令数据结束预设时延后，输出应急广播音频数据。进一步的，在所述数字音频信号中存在的中波指令数据为关播指令数据时，正常解析并输出预设时延的应急广播音频数据后，切换为输出静音数据，直至关播指令数据结束预设时延后，输出正常节目源音频数据。更进一步的，配置预设时延的方法包括： 确定单次所述中波指令数据的持续时间；确定解析所述中波指令数据所需的解析时间；基于所述持续时间和所述解析时间生成所述预设时延。更进一步的，所述静音数据的持续时间与所述中波指令数据的持续时间相同。本发明通过引入Buffer延时与静音数据相配合，从而在检测到数字音频信号包含中波指令数据时，能够保证当前类别的音频数据正常输出的同时中波指令数据产生的噪音不会被播放，且保证了应急广播音频数据的完整播放，解决了传统的中波调幅应急广播解析方法存在的大音量噪音出现、播出体验差的问题。相应的，如图2所示，本发明提供，一种中波应急广播的指令音消除系统，包括：信号预处理单元，用于获取中波发射信号，并将中波发射信号转化为数字音频信号，其中，所述中波发射信号包含正常节目源音频数据和应急广播音频数据，或仅包含正常节目源音频数据；数据处理单元，用于判断所述数字音频信号是否包含中波指令数据，若不存在则保持输出当前类别的音频数据，若存在，则保持输出预设时延的当前类别的音频数据后，切换为输出静音数据，直至中波指令数据结束预设时延后，输出另一类别的音频数据。音频输出单元，用于将所述数据处理模块输出的数字音频数据转换为模拟音频数据并播放。进一步的，所述信号预处理单元包括依次级联的中波解调芯片和模式转换模块，其中，所述中波解调芯片将中波发射信号解调为模拟音频信号，模数转换模块将所述模拟音频信号转换为数字音频信号。进一步的，所述数据处理单元包括指令解析模块和延迟Buffer模块，其中，所述数据处理单元接收到所述数字音频信号后，将所述数字音频信号同步传输至指令解析模块和延迟Buffer模块，所述指令解析模块判断所述数字音频信号是否包含中波指令数据，若不存在则所述数据处理单元保持输出当前类别的音频数据，若存在，则基于延迟Buffer模块保持输出预设时延的当前类别的音频数据后，切换为输出静音数据，直至中波指令数据结束预设时延后，输出另一类别的音频数据。更进一步的，所述数据处理单元可以由FPGA构成，指令解析模块和延迟Buffer模块配置于所述FPGA中。进一步的，所述音频输出单元包括依次级联的数模转换模块和音频播放设备，其中，所述数模转换模块将所述数据处理单元输出的数字音频数据转化为模拟音频数据后，输出至所述音频播放设备播放。其中，音频播放设备可以由音频功放和扬声器构成。以上对本发明实施例所提供的中波应急广播的指令音消除方法及其系统。说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。对于实施例公开的装置而言，由于其与实施例公开的方法相对应，所以描述的比较简单，相关之处参见方法部分说明即可。应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理的前提下，还可以对本发明进行若干改进和修饰，这些改进和修饰也落入本发明权利要求的保护范围内。专业人员还可以进一步意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、计算机软件或者二者的结合来实现，为了清楚地说明硬件和软件的可互换性，在上述说明中已经按照功能一般性地描述了各示例的组成及步骤。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本发明的范围。结合本文中所公开的实施例描述的方法或算法的步骤可以直接用硬件、处理器执行的软件模块，或者二者的结合来实施。软件模块可以置于随机存储器、内存、只读存储器、电可编程ROM、电可擦除可编程ROM、寄存器、硬盘、可移动磁盘、CD-ROM、或技术领域内所公知的任意其它形式的存储介质中。
