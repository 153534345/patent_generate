标题title
图像采集系统及图像采集方法
摘要abst
本发明公开了一种图像采集系统及图像采集方法；本发明保留了基于黑白相机检测精度高、成本低的优质特性，同时在基于黑白相机的视觉检测系统上，通过用红、绿、蓝三基色分别成像的图片，合成一张彩色图像，用于检测色差，实现了黑白相机成像彩色图片的技术效果，解决了同一时刻检测出瑕疵、颜色种类、产品景深高低的问题；同时，本发明的黑白相机通过预分频同步控制相机和光源，在一次信号输入下，相机可实现在不同光源点亮且曝光时间不同的情况下的多次拍摄效果，以降低传统的检测信号交互时间，大幅提高检测效率。
权利要求书clms
1.图像采集系统，其特征在于：包括：黑白相机，所述黑白相机被配置为采集待检测件的图像信息；多个相机光源，所述相机光源被配置用于图像采集时提供合适的光源强度和颜色；相机光源控制器，所述相机光源控制器被配置用于接受外部信号并预分频输出至黑白相机和相机光源，同步控制黑白相机和相机光源；图像输出端，用于输出显示黑白相机采集的图像信息；所述相机光源控制器在一次外部输入信号下，经预分频同步控制黑白相机和相机光源后，对同一待检测件在曝光期间提供多组光源状态并采集多组图像信息，所述光源状态包括光源角度和光源颜色，通过多组不同基础色光源状态下的图像合成彩色图像。2.如权利要求1所述的图像采集系统，其特征在于：所述相机光源被配置为红、绿、蓝三种基础色光源。3.如权利要求2所述的图像采集系统，其特征在于：所述黑白相机为线扫描式黑白相机。4.如权利要求3所述的图像采集系统，其特征在于：所述相机光源控制器通过配置使能信号和拍照行信号控制线扫描式黑白相机的拍照次数。5.如权利要求2所述的图像采集系统，其特征在于：所述黑白相机为面阵式黑白相机。6.如权利要求5所述的图像采集系统，其特征在于：所述相机光源控制器通过配置使能信号控制面阵式黑白相机的拍照次数。7.如权利要求1所述的图像采集系统，其特征在于：所述彩色图像合成的算步骤如下：a）在RGB三基色光源下，黑白相机采集三基色反射图，获取RGB三基色的图像数据；b）RGB三基色的图像数据计算方式为：R:=、G:=、B:=/＞；c)获取三基色图像数据源后，校正三基色下的白平衡，白平衡计算方法为：Raver=intensity、Gaver=intensity、Baver=intensity；d）计算白平衡校正后的RGB三基色均值图像数据，计算方法为：K=/3，“K”表示三基色均值图像数据的平均数据组合；e）计算三基色均值图像数据的平均数据组合与三基色图像均值的增益值，计算方法为:Kr=K/Raver、Kg=K/Gaver、Kb=K/Baver，“Kr，Kg，Kb”表示三基色均值图像数据的平均数据组合与三基色图像均值的增益值；f）获取增益值后，求出新的三基色图像数据组合，计算方法为：Rnew= 、Gnew=、Bnew= /＞；g)求解基于新三基色图像数据组合合成的彩色图像，计算方法为：ImgColor=compose3获取三基色图像数据源后，校正三基色下的白平衡，白平衡计算方法为：Raver=intensity、Gaver=intensity、Baver=intensity；d）计算白平衡校正后的RGB三基色均值图像数据，计算方法为：K=/3，“K”表示三基色均值图像数据的平均数据组合；e）计算三基色均值图像数据的平均数据组合与三基色图像均值的增益值，计算方法为:Kr=K/Raver、Kg=K/Gaver、Kb=K/Baver，“Kr，Kg，Kb”表示三基色均值图像数据的平均数据组合与三基色图像均值的增益值；f）获取增益值后，求出新的三基色图像数据组合，计算方法为：Rnew= 、Gnew= /＞、Bnew= /＞；g)求解基于新三基色图像数据组合合成的彩色图像，计算方法为：ImgColor=compose3 将Mono 8位图变为一张具有XYZ轴数据的亮度图；A4）以其中X、Y、Z任意轴方向的一个数据基准，形成新的亮度图；A5）基于A4，将多个独立图像一一提取三轴数据形成对比。本发明将一个综合数据集合的图片拆分成了8张不同光源角度下的独立图像，可以呈现线扫描相机在运动条件下，实现多数据获取，再根据获取的图像处理出明显的特征点，实际应用展示如图8所示。软件抽图算法以原始图图9为例，机器视觉的图片表达式可以是亮度图的模式，图9的图像像素是216X266，X轴坐标是216像素,Y轴坐标266个像素，每一个像素的数据还是按0~255表示的在Mono8的图片中，将0~255数据转换为Y轴的高度，就将Mono 8位图变为一张具有XYZ轴的数据的亮度图。根据亮度图10可得，图片像素数字为0和255在Z轴中表示高低不同。根据这个原理就可以将不同Z轴高度的数据单独提出形成新的图片，那么图9 的亮度图如图11。亮度图11表达高度数据形状，看上去很像正弦波形；则Z轴数据即可提取出来，形成新的图片对比，如图12所示。根据上述图像效果即产品在运动的时候本发明即可给出多种原始图像的数据收集，数据拆解，数据合成，从而提供更好的机器视觉处理办法。彩色图像合成算法，其包括如下步骤：如我们使用RGB三基础颜色的光源照射到物体表面后，反射出的光波被黑白相机1的COMS芯片接收到后，就能形成三基色物体反射图，使用算法进行如下操作，分别获取RGB三基色的图像数据。a）在RGB三基色光源下，黑白相机1采集三基色反射图，获取RGB三基色的图像数据；b）RGB三基色的图像数据计算方式为：R:=、G:=、B:=/＞；c)获取三基色图像数据源后，校正三基色下的白平衡，白平衡计算方法为：Raver=intensity、Gaver=intensity、Baver=intensity；d）计算白平衡校正后的RGB三基色均值图像数据，计算方法为：K=/3，“K”表示三基色均值图像数据的平均数据组合；e）计算三基色均值图像数据的平均数据组合与三基色图像均值的增益值，计算方法为:Kr=K/Raver、Kg=K/Gaver、Kb=K/Baver，“Kr，Kg，Kb”表示三基色均值图像数据的平均数据组合与三基色图像均值的增益值；f）获取增益值后，求出新的三基色图像数据组合，计算方法为：Rnew= 、Gnew= /＞、Bnew= /＞；g)求解基于新三基色图像数据组合合成的彩色图像，计算方法为：ImgColor=compose3 (Rnew, Gnew, Bnew）。最后彩色图像的合成例，以电池硅片为例，其通过原件-采集三张基色图-合成彩色图像，效果如图4所示。应当说明的是，以上描述仅作为对本发明的解释，不是对发明的限定，本发明所限定的范围参见权利要求，在本发明的保护范围之内，可以作任何形式的修改。
