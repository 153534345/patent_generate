标题title
一种路径检测方法、装置、网络设备及存储介质
摘要abst
本申请实施例提供了一种路径检测方法、装置、网络设备及存储介质，该方法应用于PCE，方法包括：接收PCC发送的BFD参数范围；根据BFD参数范围，确定PCC执行BFD时使用的目标BFD参数；将目标BFD参数和路径信息下发给PCC，以使PCC根据路径信息与目标节点建立路径，并根据目标BFD参数对目标路径进行检测。采用本申请实施例提供的技术方案，能够降低网络维护难度。
权利要求书clms
1.一种路径检测方法，其特征在于，应用于PCE，所述方法包括：接收PCC发送的BFD参数范围；根据所述BFD参数范围，确定所述PCC执行BFD时使用的目标BFD参数；将所述目标BFD参数和路径信息下发给所述PCC，以使所述PCC根据所述路径信息与目标节点建立目标路径，并根据所述目标BFD参数对所述目标路径进行检测。2.根据权利要求1所述的方法，其特征在于，所述根据所述BFD参数范围，确定所述PCC执行BFD时使用的目标BFD参数的步骤，包括：确定属于所述BFD参数范围内的预设BFD参数，作为目标BFD参数；或者，显示所述BFD参数范围，接收用户根据所述BFD参数范围输入的目标BFD参数。3.根据权利要求1所述的方法，其特征在于，所述将所述目标BFD参数和路径信息下发给所述PCC的步骤，包括：向所述PCC发送路径创建初始化消息，所述路径创建初始化消息携带的显示路由对象体包括路径信息，SRP对象体包括第二预设TLV，所述第二预设TLV包括所述目标BFD参数。4.根据权利要求1-3任一项所述的方法，其特征在于，所述将所述目标BFD参数和路径信息下发给所述PCC的步骤，包括：判断BFD参数配置功能是否已使能；若已使能，则向所述PCC下发所述目标BFD参数和路径信息；若未使能，则将路径信息下发给所述PCC。5.一种路径检测方法，其特征在于，应用于PCC，所述方法包括：向PCE发送BFD参数范围，以使所述PCE根据所述BFD参数范围，确定所述PCC执行BFD时使用的目标BFD参数，并将所述目标BFD参数和路径信息下发给所述PCC；若接收到所述目标BFD参数和所述路径信息，则根据所述路径信息与目标节点建立目标路径，并根据所述目标BFD参数对所述目标路径进行检测。6.根据权利要求5所述的方法，其特征在于，所述向PCE发送BFD参数范围的步骤，包括：获取PCC支持的BFD参数范围；在获取到所述BFD参数范围后，向所述PCE发送Open消息，所述Open消息携带的Open对象体包括第一预设TLV，所述第一预设TLV包括所述PCC支持的BFD参数范围；所述方法还包括：若未获取到所述BFD参数范围，则接收所述PCE发送的路径信息，根据所述路径信息与目标节点建立目标路径。7.根据权利要求5或6所述的方法，其特征在于，所述根据所述目标BFD参数对所述目标路径进行检测的步骤，包括：向所述PCE发送路径计算更新消息，所述路径计算更新消息携带的SRP对象体包括第三预设TLV，所述第三预设TLV包括所述目标BFD参数对应的路径检测结果。8.一种路径检测装置，其特征在于，应用于PCE，所述装置包括：接收模块，用于接收PCC发送的BFD参数范围；确定模块，用于根据所述BFD参数范围，确定所述PCC执行BFD时使用的目标BFD参数；下发模块，用于将所述目标BFD参数和路径信息下发给所述PCC，以使所述PCC根据所述路径信息与目标节点建立目标路径，并根据所述目标BFD参数对所述目标路径进行检测。9.一种路径检测装置，其特征在于，应用于PCC，所述装置包括：第一发送模块，用于向PCE发送BFD参数范围，以使所述PCE根据所述BFD参数范围，确定所述PCC执行BFD时使用的目标BFD参数，并将所述目标BFD参数和路径信息下发给所述PCC；第一接收模块，用于若接收到所述目标BFD参数和所述路径信息，则根据所述路径信息与目标节点建立路径，并根据所述目标BFD参数对所述目标路径进行检测。10.一种网络设备，其特征在于，包括处理器、通信接口、存储器和通信总线，其中，处理器，通信接口，存储器通过通信总线完成相互间的通信；存储器，用于存放计算机程序；处理器，用于执行存储器上所存放的程序时，实现权利要求1-4或5-7任一所述的方法步骤。11.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质内存储有计算机程序，所述计算机程序被处理器执行时实现权利要求1-4或5-7任一所述的方法步骤。
说明书desc
技术领域本申请涉及通信技术领域，特别是涉及一种路径检测方法、装置、网络设备及存储介质。背景技术在大型多域网络中，网络内的路径计算功能集成在PCE上，PCE使用PCEP，计算两个PCC之间需要建立的MPLS路径或SRv6路径等的路径信息，进而两个PCC根据PCE计算得到的路径信息建立路径，并使用BFD方式，对建立的路径进行故障检测。目前，路径建立的发起端为PCE，而路径检测的发起端为PCC，路径建立的发起端和路径检测的发起端不是同一设备，这使得用户需要在不同的设备上进行操作，来完成路径建立和路径检测，增加了网络维护难度。发明内容本申请实施例的目的在于提供一种路径检测方法、装置、网络设备及存储介质，以降低网络维护的难度。具体技术方案如下：在本申请实施例的第一方面，提供了一种路径检测方法，应用于PCE，所述方法包括：接收PCC发送的BFD参数范围；根据所述BFD参数范围，确定所述PCC执行BFD时使用的目标BFD参数；将所述目标BFD参数和路径信息下发给所述PCC，以使所述PCC根据所述路径信息与目标节点建立目标路径，并根据所述目标BFD参数对所述目标路径进行检测。在一些实施例中，所述根据所述BFD参数范围，确定所述PCC执行BFD时使用的目标BFD参数的步骤，包括：确定属于所述BFD参数范围内的预设BFD参数，作为目标BFD参数；或者，显示所述BFD参数范围，接收用户根据所述BFD参数范围输入的目标BFD参数。在一些实施例中，所述将所述目标BFD参数和路径信息下发给所述PCC的步骤，包括：向所述PCC发送路径创建初始化消息，所述路径创建初始化消息携带的显示路由对象体包括路径信息，SRP对象体包括第二预设TLV，所述第二预设TLV包括所述目标BFD参数。在一些实施例中，所述将所述目标BFD参数和路径信息下发给所述PCC的步骤，包括：判断BFD参数配置功能是否已使能；若已使能，则向所述PCC下发所述目标BFD参数和路径信息；若未使能，则将路径信息下发给所述PCC。在本申请实施例的第二方面，提供了一种路径检测方法，应用于PCC，所述方法包括：向PCE发送BFD参数范围，以使所述PCE根据所述BFD参数范围，确定所述PCC执行BFD时使用的目标BFD参数，并将所述目标BFD参数和路径信息下发给所述PCC；若接收到所述目标BFD参数和所述路径信息，则根据所述路径信息与目标节点建立目标路径，并根据所述目标BFD参数对所述目标路径进行检测。在一些实施例中，所述向PCE发送BFD参数范围的步骤，包括：获取PCC支持的BFD参数范围；在获取到所述BFD参数范围后，向所述PCE发送Open消息，所述Open消息携带的Open对象体包括第一预设TLV，所述第一预设TLV包括所述PCC支持的BFD参数范围；所述方法还包括：若未获取到所述BFD参数范围，则接收所述PCE发送的路径信息，根据所述路径信息与目标节点建立目标路径。在一些实施例中，所述根据所述目标BFD参数对所述目标路径进行检测的步骤，包括：向所述PCE发送路径计算更新消息，所述路径计算更新消息携带的SRP对象体包括第三预设TLV，所述第三预设TLV包括所述目标BFD参数对应的路径检测结果。在本申请实施例的第三方面，提供了一种路径检测装置，应用于PCE，所述装置包括：接收模块，用于接收PCC发送的BFD参数范围；确定模块，用于根据所述BFD参数范围，确定所述PCC执行BFD时使用的目标BFD参数；下发模块，用于将所述目标BFD参数和路径信息下发给所述PCC，以使所述PCC根据所述路径信息与目标节点建立目标路径，并根据所述目标BFD参数对目标路径进行检测。在一些实施例中，所述确定模块，具体用于：确定属于所述BFD参数范围内的预设BFD参数，作为目标BFD参数；或者，显示所述BFD参数范围，接收用户根据所述BFD参数范围输入的目标BFD参数。在一些实施例中，所述下发模块，具体用于：向所述PCC发送路径创建初始化消息，所述路径创建初始化消息携带的显示路由对象体包括路径信息，SRP对象体包括第二预设TLV，所述第二预设TLV包括所述目标BFD参数。在一些实施例中，所述下发模块，还用于：判断BFD参数配置功能是否已使能；若已使能，则向所述PCC下发所述目标BFD参数和路径信息；若未使能，则将路径信息下发给所述PCC。在本申请实施例的第四方面，提供了一种路径检测装置，应用于PCC，所述装置包括：第一发送模块，用于向PCE发送BFD参数范围，以使所述PCE根据所述BFD参数范围，确定所述PCC执行BFD时使用的目标BFD参数，并将所述目标BFD参数和路径信息下发给所述PCC；第一接收模块，用于若接收到所述目标BFD参数和所述路径信息，则根据所述路径信息与目标节点建立目标路径，并根据所述目标BFD参数对所述目标路径进行检测。在一些实施例中，所述第一发送模块，具体用于：获取PCC支持的BFD参数范围；在获取到BFD参数范围后，向所述PCE发送Open消息，所述Open消息携带的Open对象体包括第一预设TLV，所述第一预设TLV包括所述PCC支持的BFD参数范围；所述装置还包括：第二接收模块，用于若未获取到所述BFD参数范围，则接收所述PCE发送的路径信息，根据所述路径信息与目标节点建立目标路径。在一些实施例中，所述第一接收模块，具体用于：向所述PCE发送路径计算更新消息，所述路径计算更新消息携带的SRP对象体包括第三预设TLV，所述第三预设TLV包括所述目标BFD参数对应的路径检测结果。在本申请实施例的第五方面，提供了一种网络设备，包括处理器、通信接口、存储器和通信总线，其中，处理器，通信接口，存储器通过通信总线完成相互间的通信；存储器，用于存放计算机程序；处理器，用于执行存储器上所存放的程序时，实现上述任一所述的路径检测方法步骤。在本申请实施例的第六方面，提供了一种计算机可读存储介质，所述计算机可读存储介质内存储有计算机程序，所述计算机程序被处理器执行时实现上述任一所述的路径检测的方法步骤。本申请实施例还提供了一种包含指令的计算机程序产品，当其在计算机上运行时，使得计算机执行上述任一所述的路径检测方法。本申请实施例有益效果：本申请实施例提供的技术方案中，PCE从PCC获取到该PCC支持的BFD参数范围，进而确定PCC执行BFD时使用的目标BFD参数。另外，PCE完成路径计算，获取PCC与目标节点之间的路径信息。PCE在确定了PCC与目标节点之间的路径信息以及PCC执行BFD时使用的目标BFD参数的情况下，将目标BFD参数和路径信息下发给PCC，由PCC基于PCE下发的目标BFD参数和路径信息，完成路径建立和路径检测。可见，本申请实施例中，路径建立的发起端和路径检测的发起端是同一设备，这使得用户可以在同一设备上进行操作，来完成路径建立和路径检测，降低了网络维护难度。当然，实施本申请的任一产品或方法并不一定需要同时达到以上所述的所有优点。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，还可以根据这些附图获得其他的实施例。图1为现有技术中路径建立和路径检测的网络架构示意图；图2为现有技术中PCE与PCC之间建立PCEP会话的示意图；图3为现有技术中PCE主动发起在PCC上创建路径的示意图；图4为本申请实施例提供的路径检测方法的第一种流程示意图；图5为本申请实施例提供的Open对象体的报文格式的示意图；图6为本申请实施例提供的BFD-CAPABILITY TLV的报文格式的示意图；图7为本申请实施例提供的Explicit Route对象体报文格式的示意图；图8为本申请实施例提供的SRP对象体报文格式的示意图；图9为本申请实施例提供的路径检测方法的第二种流程示意图；图10为本申请实施例提供的路径检测方法的第三种流程示意图；图11为本申请实施例提供的PCC与PCE之间进行路径检测时报文的交互示意图；图12为本申请实施例提供的路径检测方法的第四种流程示意图；图13为本申请实施例提供的路径检测装置的第一种结构示意图；图14为本申请实施例提供的路径检测装置的第二种结构示意图；图15为本申请实施例提供的网络设备的一种结构示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员基于本申请所获得的所有其他实施例，都属于本申请保护的范围。为便于理解，下面对本申请实施例中出现的词语进行解释说明。PCE：网络中的一个实体，用于为网络上的设备提供路径计算服务，可进行区域内的路径计算，也可在复杂的网络环境中计算完整的LSP。PCC：请求PCE执行路径计算，并根据PCE返回的路径信息建立LSP。PCEP：运行于PCC与PCE之间、或者PCE与PCE之间的通信协议，用于建立PCEP会话，交互PCEP消息。该协议基于TCP。BFD：一种全网统一的检测机制用于快速检测、监控网络中链路或者IP路由的转发连通状况。目前，一个域内的路径建立和路径检测的网络架构如图1所示。PCE为路径建立的发起端，PCC为路径检测的发起端。路径建立过程为：步骤a，PCE使用PCEP，与PCC建立PCEP会话。如图2所示的PCE与PCC之间建立PCEP会话的过程，包括：PCC与PCE之间建立TCP连接。PCC向PCE发送Open消息。其中，Open消息为建立会话消息。PCE向PCC发送Open消息。PCE收到PCC发送的Open消息后，根据Open消息中携带的信息进行会话参数协商。若协商成功，则发送Keepalive消息确认。其中，Keepalive消息即为保活消息。PCC收到PCE发送的Open消息后，根据Open消息中携带的信息进行会话参数协商。若协商成功，则发送Keepalive消息确认。当PCEP对等体都收到了来自对方的Keepalive消息，则认为PCEP会话建立完成。步骤b，PCE主动发起路径创建。PCE与PCC之间建立完成PCEP会话后，PCE主动发起创建路径，路径创建过程如图3所示，包括：PCE主动向PCC发送PCInitiate消息，来要求PCC创建LSP。PCC收到PCInitiate消息后，根据PCInitiate消息携带的路径信息在PCC上创建LSP，然后通过PCRpt消息将LSP上报并托管给PCE。LSP托管是指PCE具有修改PCC上LSP的权限，由PCE主动发起LSP路径创建和更新。采用上述步骤a和步骤b，PCC创建路径完成，如图1所示，PCC完成了路径首节点与路径尾节点之间的路径建立。该路径即为PCE计算后的路径，包括路径首节点、两个中间节点以及路径尾节点。PCC创建路径完成后，并使用BFD方式，对建立的路径进行故障检测。可见，路径建立的发起端为PCE，而路径检测的发起端为PCC，路径建立的发起端和路径检测的发起端不是同一设备，这使得用户需要在不同的设备上进行操作，来完成路径建立和路径检测，增加了网络维护难度。为解决上述问题，本申请实施例提供了一种路径检测方法，该方法可以应用于PCE。该路径检测方法中，PCE从PCC获取到该PCC支持的BFD参数范围，进而确定PCC执行BFD时使用的目标BFD参数。另外，PCE完成路径计算，获取PCC与目标节点之间的路径信息。PCE在确定了PCC与目标节点之间的路径信息以及PCC执行BFD时使用的目标BFD参数的情况下，将目标BFD参数和路径信息下发给PCC，由PCC基于PCE下发的目标BFD参数和路径信息，完成路径建立和路径检测。可见，本申请实施例中，路径建立的发起端和路径检测的发起端是同一设备，这使得用户可以在同一设备上进行操作，来完成路径建立和路径检测，降低了网络维护难度。下面通过具体实施例，对本申请实施例提供的路径检测方法进行说明。参考图4，图4为本申请实施例提供的路径检测方法的第一种流程示意图。该方法应用于PCE，包括如下步骤：步骤S41，接收PCC发送的BFD参数范围。本申请实施例中，BFD参数范围表征PCC自身所支持的BFD能力范围。PCC的BFD参数范围可以是在设备出厂时就预先设置好的，也可以是后期人工根据网络需求进行配置的。BFD参数范围可以包括最小BFD检测报文发送时间间隔的下限阈值和上限阈值、最小BFD检测报文接收时间间隔的下限阈值和上限阈值、检测时间倍数等。BFD参数范围还可以包括其他参数，本申请实施例对此并不作具体限定。本申请实施例中，PCC向PCE发送BFD参数范围，以向PCE通告自身所支持的BFD能力。PCE接收到PCC发送的BFD参数范围后，即可获取到PCC所支持的BFD能力。在一些实施例中，PCC可以将BFD参数范围携带在指定PCEP消息中，实现向PCE发送BFD参数范围。PCC与PCE之间通过交互PCEP消息完成会话建立、维护、路径计算和更新等。PCEP消息由一个PCEP报文头和一个长度可变的消息主体组成，消息主体由一个或多个对象组成，对象由对象头和对象体两部分构成。PCEP消息的主要内容通过不同的对象来携带。上述指定PCEP消息可以为任一PCEP消息。一个示例中，上述指定PCEP消息可以为Open消息。在PCE与PCC之间建立PCEP会话阶段，PCC可以向PCE发送Open消息。Open消息包括一个Open对象，Open对象由Open对象头和Open对象体组成，Open对象体的报文格式如图5所示，Open对象体包含如下内容：Ver：表示PCEP版本号，长度为3bits。标志位：Flags，长度为5bits。当前未定义，在Open消息中全部填充为0。时间间隔：表示发送Keepalive消息的时间间隔，可以采用Keepalive表示，长度为8bits。老化时间：表示PCEP会话的老化时间，长度为8bits。SID：表示PCEP会话ID。可选TLV。在Open对象体的Optional TLVs字段可以携带上述BFD参数范围。例如，PCC可以预先配置携带BFD参数范围的TLV，即第一预设TLV，该第一预设TLV可以称为BFD-CAPABILITYTLV，包括PCC支持的BFD参数。BFD-CAPABILITY TLV的报文格式可以参见图6所示。BFD-CAPABILITY TLV报文中各字段的含义如表1所示：表1图6所示的BFD-CAPABILITY TLV的宽度为32bit，并简单标注了字段所占用位置，如图6中标注0、7、15、23、31等bit位置。BFD-CAPABILITY TLV的宽度、各个字段所占用位置可以根据实际需求进行设定，对此不进行限定。PCC向PCE发送Open消息，可以将BFD参数范围填充在第一预设TLV中，并将填充后的第一预设TLV作为Open对象体的可选TLV中的一个TLV，携带在Open消息中，以实现在PCEP会话建立阶段完成PCC与PCE之间BFD会话能力的协商，使PCE获取到PCC支持的BFD参数的范围。若PCC发送的Open消息的Open对象体中未携带有第一预设TLV，则表示PCC设备不支持BFD能力，则后续PCE只会向PCC下发路径信息，而不会向PCC下发BFD参数，相应的，PCC也只会基于路径信息与目标节点建立目标路径，而不会对与目标节点之间建立的目标路径进行检测。目标节点即为需要建立的路径上的尾节点。本申请实施例中，PCC还可以通过其他方式，实现PCC与PCE之间BFD会话能力的协商。例如，在PCE与PCC之间建立PCEP会话阶段，PCC可以在Keepalive消息新增可选TLV字段，将BFD参数范围携带在Keepalive消息的可选TLV字段中发送给PCE。再例如，PCE与PCC通预先协商发送BFD参数的协议消息，PCC通过预先协商的协议消息，将BFD参数范围发送给PCE。本申请实施例中，对PCC向PCE发送BFD参数范围的方式并不作具体限定。步骤S42，根据BFD参数范围，确定PCC执行BFD时使用的目标BFD参数。本申请实施例中，目标BFD参数即为PCC执行BFD时要使用的BFD参数。PCE接收到PCC发送的BFD参数范围后，从BFD参数范围中确定出目标BFD参数。在一些实施例中，PCE在BFD参数范围的范围内设置有预设的BFD参数，即默认BFD参数，PCE确定属于BFD参数范围的范围内的该预设BFD参数，作为目标BFD参数。例如，PCC向PCE发送的BFD参数范围为：最小BFD检测报文发送时间间隔的下限阈值为10微秒，上限阈值为20微秒；最小BFD检测报文接收时间间隔的下限阈值为10微秒，上限阈值20微秒。即最小BFD检测报文发送时间间隔范围为10-20微秒，最小BFD检测报文接收时间间隔范围为10-20微秒。预设BFD参数为：最小BFD检测报文发送时间间隔为15微秒，最小BFD检测报文接收时间间隔为15微秒，则PCE确定目标BFD参数为：最小BFD检测报文发送时间间隔为15，最小BFD检测报文接收时间间隔为15微秒。在另一些实施例中，PCE显示BFD参数范围，接收用户根据BFD参数范围输入的目标BFD参数。例如，PCE具有人机交互界面，可以通过人机交互界面向用户显示BFD参数范围，用户根据BFD参数范围向PCE输入BFD参数，PCE接收用户输入的BFD参数，并将用户输入的BFD参数确定为目标BFD参数。本申请实施例中，PCE可以将BFD参数范围发送给具有人机交互界面的指定终端，由指定终端显示BFD参数范围，进而用户通过指定终端显示的BFD参数范围，向PCE输入目标BFD参数。对此不进行限定。本申请实施例中，确定PCC执行BFD时要使用的目标BFD参数时，可以将BFD参数范围范围内预设的BFD参数作为目标BFD参数，也可以让用户自己输入目标BFD参数。这样，可以基于每条路径单独协商BFD参数，每条路径建立的BFD会话无需采用相同的BFD参数，提高了BFD参数下发的灵活性。步骤S43，将目标BFD参数和路径信息下发给PCC，以使PCC根据路径信息与目标节点建立目标路径，并根据目标BFD参数对目标路径进行检测。本申请实施例中，路径信息是PCC建立路径的相关信息，是PCE基于需要的路径首节点和路径尾节点进行路径计算后得到的路径信息。PCC与目标节点之间的路径可以为MPLS路径，也可以为SRv6路径，还可以为其他协议的路径。不同类型的路径，路径信息有所不同。例如，若PCC与目标节点之间的路径为MPLS路径，则路径信息中可以包括PCC的标签、中间节点的标签、目标节点的标签；若PCC与目标节点之间的路径为SRv6路径，则路径信息中可以包括PCC的IP地址、中间节点的IP地址、目标节点的IP地址。PCE计算得到路径信息后，向PCC下发路径信息，以使PCC根据路径信息与目标节点建立路径。PCE在确定出目标BFD参数后，向PCC下发目标BFD参数，以使PCC根据目标BFD参数与目标节点进行会话协商，即实现了在路径创建阶段，通过PCE向PCC下发PCC执行路径检测时所要使用的目标BFD参数。上述路径信息和目标BFD参数可以通过同一PCEP消息传输给PCC，也可以通过不同PCEP消息传输给PCC，对此不进行限定。在一些实施例中，PCE可以将目标BFD参数携带在指定PCEP消息中，实现向PCC发送目标BFD参数。一个示例中，上述指定PCEP消息可以为PCInitiate消息。例如，PCE向PCC发送PCInitiate消息，PCInitiate消息是PCE向PCC发送的用于创建LSP的PCEP消息。PCInitiate消息中可以包括Explicit Route对象和SRP对象等。Explicit Route对象由Explicit Route对象头和Explicit Route对象体组成，Explicit Route对象体中包括有路径信息，Explicit Route对象体报文格式如图7所示，其包含如下内容：L标志位：用L表示，在报文中必须置为0。类型：用Type表示，当前定义的类型为：1：表示IPv4类型。2：表示IPv6类型。3：表示Label类型。对象体长度：用Length表示。指示标签方向的标志位：用U表示，取值为0时，表示下游标签；取值为1时，表示上游标签。服务类型：用C-type表示。保留位：用Reserved表示。路径标签：用Label表示，指示路径信息。路径IP：用IP表示，指示路径信息。SRP对象由SRP对象头和SRP对象体组成。SRP对象体报文格式如图8所示，其包含如下内容：标志位：用Flags表示，长度为16bits。当前未定义，在报文中全部填充为0。Stateful PCE请求ID ：用SRP ID表示。可选TLV：用Optional TLVs表示。本申请实施例中，PCE可以在SRP对象体、Explicit Route对象体或其他对象体中携带上述目标BFD参数，例如，在SRP对象体的Optional TLVs字段可以携带上述目标BFD参数。对于不包含可选TLV字段的对象体，PCE可以在该对象体中新增可选TLV字段，将目标BFD参数携带新增的可选TLV字段中发送给PCC。为便于对象体携带目标BFD参数，PCE可以预先配置携带目标BFD参数的TLV，即第二预设TLV。其中，第二预设TLV的报文格式可以与第一预设TLV相同，参见上述图6所示，第二预设TLV的报文格式也可以与第一预设TLV有所不同，对此不进行限定。本申请实施例中，PCC还可以通过其他方式，实现PCE对PCC所支持的目标BFD参数的下发。例如，PCE与PCC通预先协商发送BFD参数的协议消息，PCE通过预先协商的协议消息，将目标BFD参数发送给PCC。本申请实施例中，PCC与目标节点在建立的路径上，根据目标BFD参数对目标路径进行检测，具体可以为：PCC与目标节点之间建立BFD会话，且PCC与目标节点利用BFD检测报文发送时间间隔、BFD检测报文接收时间间隔等目标BFD参数，对自身进行配置，PCC按照BFD检测报文发送时间间隔向目标节点发送BFD检测报文，目标节点向PCC返回BFD检测报文。若在规定的时间内，PCC未收到对端的BFD检测报文，则认为路径间存在故障。本申请实施例中，BFD检测报文可以为控制报文，也可以为echo报文。当BFD检测报文为控制报文时，目标节点配置BFD功能，如配置目标BFD参数；当BFD探测报文为echo报文时，目标节点无需配置BFD功能，如配置BFD参数。本申请实施例提供的技术方案中，PCE从PCC获取到该PCC支持的BFD参数范围，进而确定PCC执行BFD时使用的目标BFD参数。另外，PCE完成路径计算，获取PCC与目标节点之间的路径信息。PCE在确定了PCC与目标节点之间的路径信息以及PCC执行BFD时使用的目标BFD参数的情况下，将目标BFD参数和路径信息下发给PCC，由PCC基于PCE下发的目标BFD参数和路径信息，完成路径建立和路径检测。可见，本申请实施例中，路径建立的发起端和路径检测的发起端同一设备，这使得用户可以在同一设备上进行操作，来完成路径建立和路径检测，降低了网络维护难度。基于图4所示的路径检测方法，本申请实施例还提供了一种路径检测方法，参考图9，图9为本申请实施例提供的路径检测方法的第二种流程示意图，可以包括步骤S91-步骤S95，其中步骤S91-步骤S92与步骤S41-步骤S42相同，步骤S93-步骤S95是对步骤S43的进一步细分。步骤S91，接收PCC发送的BFD参数范围。步骤S92，根据BFD参数范围，确定PCC执行BFD时使用的目标BFD参数。步骤S93，判断BFD参数配置功能是否已使能。若已使能，则执行步骤S95。若未使能，则执行步骤S94。步骤S94，将路径信息下发给PCC。步骤S95，向PCC下发目标BFD参数和路径信息，以使PCC根据路径信息与目标节点建立目标路径，并根据目标BFD参数对目标路径进行检测。本申请实施例中，PCE上设置有BFD参数配置功能，PCE上的BFD参数配置功能可以人为的进行使能，也可以周期性的进行使能，也可以根据路径的实际情况适应性的进行使能。当PCE上的BFD参数配置功能使能时，则说明PCE支持BFD参数下发，则PCE执行步骤S95，将目标BFD参数和路径信息下发给PCC。PCC收到的PCInitiate消息的Explicit Route对象体中携带有路径信息，且SRP对象体中携带有第二预设TLV，第二预设TLV中携带有目标BFD参数，PCC可以基于路径信息与目标节点建立目标路径，并根据目标BFD参数，对目标路径进行检测。当PCE上的BFD参数配置功能未使能时，则说明PCE不支持BFD参数下发，则PCE执行步骤S94，将路径信息下发给PCC。这里，PCE不会向PCC发送目标BFD参数。PCC收到的PCInitiate消息的Explicit Route对象体中携带有路径信息，但SRP对象体中未携带有第二预设TLV，PCC不需要对目标路径进行检测。本申请实施例提供的技术方案中，通过判断PCE上BFD参数配置功能是否使能，来决定PCE是否为PCC下发目标BFD参数。这样，可以基于实际情况，来决定是否为每一条PCE主动创建的路径建立BFD会话，进行路径检测，提高了PCC执行BFD时的灵活性，减少不必要的BFD会话，减少了系统资源的浪费。基于图4所示的路径检测方法，本申请实施例还提供了一种路径检测方法，参考图10，图10为本申请实施例提供的路径检测方法的第三种流程示意图，可以包括步骤S101-步骤S104，其中步骤S101-步骤S103与步骤S41-步骤S43相同，在此不再进行赘述。步骤S101，接收PCC发送的BFD参数范围。步骤S102，根据BFD参数范围，确定PCC执行BFD时使用的目标BFD参数。步骤S103，将目标BFD参数和路径信息下发给PCC，以使PCC根据路径信息与目标节点建立目标路径，并根据目标BFD参数对目标路径进行检测。步骤S104，接收PCC发送的路径计算更新消息，路径计算更新消息携带的SRP对象体包括第三预设TLV，第三预设TLV包括目标BFD参数对应的路径检测结果。本申请实施例中，PCC接收到目标BFD参数后，与目标节点之间建立BFD会话，执行BFD，以实现对目标路径的检测。在BFD会话建立后，PCC可以定期地向PCE发送PCUpd消息，也可以在BFD会话的状态发生变化时向PCE发送PCUpd消息。PCUpd消息是PCC向PCE发送的用于更新LSP的PCEP消息。PCUpd消息中可以包括SRP对象，SRP对象由SRP对象头和SRP对象体组成，SRP对象体中包括有第三预设TLV，第三预设TLV中包括目标BFD参数对应的路径检测结果。第三预设TLV的报文格式可以与第一预设TLV相同，参见上述图6所示，第二预设TLV的报文格式也可以与第一预设TLV有所不同，对此不进行限定。目标BFD参数对应的路径检测结果可以包括BFD会话的当前状态和BFD会话的诊断码。BFD会话的状态可以有4个取值，分别为：0：代表AdminDown；1：代表Down；2：代表Init；3：代表Up。BFD会话的诊断码表明PCC方最近一次BFD会话Down的原因。本申请实施例中，PCE可以定期或不定期的接收到PCC上当前BFD会话状态和会话Down的原因，网络管理员可以基于此对路径检测结果进行分析。本申请实施例提供的技术方案中，PCE定期或不定期的接收PCC发送的路径检测结果。这样，网络管理员可以对路径检测结果进行及时分析，使得PCE可以及时的对路径计算结果进行更新，保证路径的畅通。下面基于一个具体的实施例，对本申请实施例提供的路径检测方法进行说明，如图11所示，图11为PCC与PCE之间进行路径检测时报文的交互示意图，该方法可以包括如下步骤：步骤一、PCC向PCE发送Open消息，通告自己支持的BFD能力。例如：BFD参数范围可以包括：最小BFD检测报文发送时间间隔的下限阈值为10微秒，上限阈值为20微秒；最小BFD检测报文接收时间间隔的下限阈值为10微秒，上限阈值20微秒。步骤二、PCE收到的Open消息后，获取到PCC支持的BFD能力，然后发送PCInitiate消息，该PCInitiate消息携带PCC支持的BFD能力范围内的BFD参数。例如：目标BFD参数可以包括：最小BFD检测报文发送时间间隔为15微秒，最小BFD检测报文接收时间间隔为15微秒。步骤三、PCC收到PCInitiate消息后，基于PCInitiate消息中携带的BFD参数与路径尾节点进行BFD会话协商。BFD会话建立后，PCC会定期通过PCUdp消息将BFD会话的状态Sta和诊断码Diag上报给PCE。本申请实施例提供的技术方案中，PCE从PCC获取到该PCC支持的BFD参数范围，进而确定PCC执行BFD时使用的目标BFD参数。另外，PCE完成路径计算，获取PCC与目标节点之间的路径信息。PCE在确定了PCC与目标节点之间的路径信息以及PCC执行BFD时使用的目标BFD参数的情况下，将目标BFD参数和路径信息下发给PCC，由PCC基于PCE下发的目标BFD参数和路径信息，完成路径建立和路径检测。可见，本申请实施例中，路径建立的发起端和路径检测的发起端为同一设备，这使得用户可以在同一设备上进行操作，来完成路径建立和路径检测，降低了网络维护难度。基于同一发明构思，本申请实施例还提供了一种路径检测方法，参考图12，图12为本申请实施例提供的路径检测方法的第四种流程示意图。该方法应用于PCC，PCC为需要建立的路径的首节点。包括如下步骤：步骤S121，向PCE发送BFD参数范围，以使PCE根据BFD参数范围，确定PCC执行BFD时使用的目标BFD参数，并将目标BFD参数和路径信息下发给PCC。步骤S122，若接收到目标BFD参数和路径信息，则根据路径信息与目标节点建立目标路径，并根据目标BFD参数对目标路径进行检测。本申请实施例提供的技术方案中，PCE从PCC获取到该PCC支持的BFD参数范围，进而确定PCC执行BFD时使用的目标BFD参数。另外，PCE完成路径计算，获取PCC与目标节点之间的路径信息。PCE在确定了PCC与目标节点之间的路径信息以及PCC执行BFD时使用的目标BFD参数的情况下，将目标BFD参数和路径信息下发给PCC，由PCC基于PCE下发的目标BFD参数和路径信息，完成路径建立和路径检测。可见，本申请实施例中，路径建立的发起端和路径检测的发起端同一设备，这使得用户可以在同一设备上进行操作，来完成路径建立和路径检测，降低了网络维护难度。在一些实施例中，上述步骤S121可以包括：获取PCC支持的BFD参数范围；在获取到BFD参数范围后，向PCE发送Open消息，Open消息携带的Open对象体包括第一预设TLV，第一预设TLV包括PCC支持的BFD参数范围；该路径检测方法还包括：若未获取到BFD参数范围，则接收PCE发送的路径信息，根据路径信息与目标节点建立目标路径。在一些实施例中，上述步骤S122可以包括：接收PCE发送的路径创建初始化消息，路径创建初始化消息携带的显示路由对象体包括路径信息，SRP对象体包括第二预设TLV，第二预设TLV包括所述目标BFD参数。在一些实施例中，上述步骤S122可以包括：向PCE发送路径计算更新消息，路径计算更新消息携带的SRP对象体包括第三预设TLV，第三预设TLV包括目标BFD参数对应的路径检测结果。本申请实施例提供的技术方案中，PCE从PCC获取到该PCC支持的BFD参数范围，进而确定PCC执行BFD时使用的目标BFD参数。另外，PCE完成路径计算，获取PCC与目标节点之间的路径信息。PCE在确定了PCC与目标节点之间的路径信息以及PCC执行BFD时使用的目标BFD参数的情况下，将目标BFD参数和路径信息下发给PCC，由PCC基于PCE下发的目标BFD参数和路径信息，完成路径建立和路径检测。可见，本申请实施例中，路径建立的发起端和路径检测的发起端同一设备，这使得用户可以在同一设备上进行操作，来完成路径建立和路径检测，降低了网络维护难度。与上述路径测试方法相对应，本申请实施例提供了一种路径测试装置，如图13所示，该装置应用于PCE，所述装置包括：接收模块131，用于接收PCC发送的BFD参数范围；确定模块132，用于根据所述BFD参数范围，确定所述PCC执行BFD时使用的目标BFD参数；下发模块133，用于将所述目标BFD参数和路径信息下发给所述PCC，以使所述PCC根据所述路径信息与目标节点建立目标路径，并根据所述目标BFD参数对目标路径进行检测。在一些实施例中，所述确定模块132，可以具体用于：确定属于所述BFD参数范围内的的预设BFD参数，作为目标BFD参数；或者，显示所述BFD参数范围，接收用户根据所述BFD参数范围输入的目标BFD参数。在一些实施例中，所述下发模块133，可以具体用于：向所述PCC发送路径创建初始化消息，所述路径创建初始化消息携带的显示路由对象体包括路径信息，SRP对象体包括第二预设TLV，所述第二预设TLV包括所述目标BFD参数。在一些实施例中，所述下发模块133，还可以用于：判断BFD参数配置功能是否已使能；若已使能，则向所述PCC下发所述目标BFD参数和路径信息；若未使能，则将路径信息下发给所述PCC。本申请实施例提供的技术方案中，PCE从PCC获取到该PCC支持的BFD参数范围，进而确定PCC执行BFD时使用的目标BFD参数。另外，PCE完成路径计算，获取PCC与目标节点之间的路径信息。PCE在确定了PCC与目标节点之间的路径信息以及PCC执行BFD时使用的目标BFD参数的情况下，将目标BFD参数和路径信息下发给PCC，由PCC基于PCE下发的目标BFD参数和路径信息，完成路径建立和路径检测。可见，本申请实施例中，路径建立的发起端和路径检测的发起端是同一设备，这使得用户可以在同一设备上进行操作，来完成路径建立和路径检测，降低了网络维护难度。与上述路径测试方法相对应，本申请实施例提供了一种路径测试装置，如图14所示，该装置应用于PCC，所述装置包括：第一发送模块141，用于向PCE发送BFD参数范围，以使所述PCE根据所述BFD参数范围，确定所述PCC执行BFD时使用的目标BFD参数，并将所述目标BFD参数和路径信息下发给所述PCC；第一接收模块142，用于若接收到所述目标BFD参数和所述路径信息，则根据所述路径信息与目标节点建立目标路径，并根据所述目标BFD参数对所述目标路径进行检测。在一些实施例中，所述第一发送模块141，可以具体用于：获取PCC支持的BFD参数范围；在获取到BFD参数范围后，向所述PCE发送Open消息，所述Open消息携带的Open对象体包括第一预设TLV，所述第一预设TLV包括所述PCC支持的BFD参数范围；所述装置还可以包括：第二接收模块，用于若未获取到所述BFD参数范围，则接收所述PCE发送的路径信息，根据所述路径信息与目标节点建立目标路径。在一些实施例中，所述第一接收模块142，可以具体用于：向所述PCE发送路径计算更新消息，所述路径计算更新消息携带的SRP对象体包括第三预设TLV，所述第三预设TLV包括所述目标BFD参数对应的路径检测结果。本申请实施例提供的技术方案中，PCE从PCC获取到该PCC支持的BFD参数范围，进而确定PCC执行BFD时使用的目标BFD参数。另外，PCE完成路径计算，获取PCC与目标节点之间的路径信息。PCE在确定了PCC与目标节点之间的路径信息以及PCC执行BFD时使用的目标BFD参数的情况下，将目标BFD参数和路径信息下发给PCC，由PCC基于PCE下发的目标BFD参数和路径信息，完成路径建立和路径检测。可见，本申请实施例中，路径建立的发起端和路径检测的发起端是同一设备，这使得用户可以在同一设备上进行操作，来完成路径建立和路径检测，降低了网络维护难度。本申请实施例还提供了一种网络设备，如图15所示，包括处理器151、通信接口152、存储器153和通信总线154，其中，处理器151，通信接口152，存储器153通过通信总线154完成相互间的通信，存储器153，用于存放计算机程序；处理器151，用于执行存储器153上所存放的程序时，实现上述任一所述的路径检测方法步骤。在一些实施例中，网络设备可以为路径计算单元PCE，处理器151，用于执行存储器153上所存放的程序时，实现上述应用于PCE端的路径检测方法步骤。在一些实施例中，网络设备可以为第一路径计算客户端PCC，处理器151，用于执行存储器153上所存放的程序时，实现上述应用于PCC端的路径检测方法步骤。上述电子设备提到的通信总线可以是外设部件互连标准总线或扩展工业标准结构总线等。该通信总线可以分为地址总线、数据总线、控制总线等。为便于表示，图中仅用一条粗线表示，但并不表示仅有一根总线或一种类型的总线。通信接口用于上述电子设备与其他设备之间的通信。存储器可以包括随机存取存储器，也可以包括非易失性存储器，例如至少一个磁盘存储器。可选的，存储器还可以是至少一个位于远离前述处理器的存储装置。上述的处理器可以是通用处理器，包括中央处理器、网络处理器等；还可以是数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。在本申请提供的又一实施例中，还提供了一种计算机可读存储介质，该计算机可读存储介质内存储有计算机程序，计算机程序被处理器执行时实现上述任一路径检测方法的步骤。在本申请提供的又一实施例中，还提供了一种包含指令的计算机程序产品，当其在计算机上运行时，使得计算机执行上述实施例中任一路径检测方法。在上述实施例中，可以全部或部分地通过软件、硬件、固件或者其任意组合来实现。当使用软件实现时，可以全部或部分地以计算机程序产品的形式实现。计算机程序产品包括一个或多个计算机指令。在计算机上加载和执行计算机程序指令时，全部或部分地产生按照本申请实施例的流程或功能。计算机可以是通用计算机、专用计算机、计算机网络、或者其他可编程装置。计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线）或无线方式向另一个网站站点、计算机、服务器或数据中心进行传输。计算机可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集成的服务器、数据中心等数据存储设备。可用介质可以是磁性介质，、光介质、或者半导体介质等。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括要素的过程、方法、物品或者设备中还存在另外的相同要素。本说明书中的各个实施例均采用相关的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于应用于PCC端的路径检测方法实施例，应用于PCE端的路径检测装置实施例，应用于PCC端的路径检测装置实施例，网络设备实施例，计算机可读存储介质实施例而言，由于其基本相似于应用于PCE端的路径检测方法实施例，所以描述的比较简单，相关之处参见应用于PCE端的路径检测方法实施例的部分说明即可。以上仅为本申请的较佳实施例，并非用于限定本申请的保护范围。凡在本申请的精神和原则之内所作的任何修改、等同替换、改进等，均包含在本申请的保护范围内。
