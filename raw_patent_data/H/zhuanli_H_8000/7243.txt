标题title
一种多网系分布式组网动态呼叫路由建立方法
摘要abst
本发明公开了一种多网系分布式组网动态呼叫路由建立方法，涉及多网系间跨网话音互通技术领域。本发明基于节点探测实现网间互联话音交换节点拓扑自动发现与维护，通过呼叫路由自主通告的方式进行本站话音交换呼叫路由信息的扩散，并通过呼叫路由实时计算与周期更新，实现话音网络中多网系呼叫路由的自动建立，大大提升互通的效率和体验，解决了传统话音网络中呼叫路由手动配置复杂、拓扑重构困难、灵活性差的问题。
权利要求书clms
1.一种多网系分布式组网动态呼叫路由建立方法，是基于分布式组网的网间互联话音交换节点来实现的；其特征在于：话音交换节点包含话音交换控制模块和多个异构网系话音适配模块，话音交换节点一侧通过异构网系话音适配模块连接异构多网系，实现异构多网系话音呼叫的协议适配；话音交换节点的另一侧通过话音交换控制模块连接地面IP网络，实现分布式组网的话音统一交换控制，话音交换节点之间通过地面IP网络网络层连接；具体包含以下步骤：分布式部署的网间互联话音交换节点的话音交换控制模块通过周期性发送节点探测报文，实现其他话音交换节点的发现，并与之建立邻接关系；话音交换节点的异构网系话音适配模块周期性收集当前连接的异构网系话音链路维持的呼叫数量以及链路剩余能力并上报给话音交换控制模块，话音交换控制模块依据此信息生成本地呼叫路由表并向其他话音交换节点进行通告；话音交换节点的话音交换控制模块接收邻居通告的呼叫路由表，根据号码匹配长度、路由类型和链路状态进行计算，生成站间互通呼叫路由表；当话音交换节点的异构网系话音适配模块检测到链路状态发生故障或连接网系状态发生变化时，上报给话音交换控制模块，话音交换控制模块依此更新本地呼叫路由表并主动向其他话音交换节点发送呼叫路由更新。2.根据权利要求1所述的多网系分布式组网动态呼叫路由建立方法，其特征在于，异构网系包括卫通、短波、区域宽带以及地面PSTN类型；话音交换节点通过E1中继、SIP中继、IP中继或载波中继连接各异构网系，是实现网系间话音互通的协议适配与话音交换控制中心。3.根据权利要求1所述的多网系分布式组网动态呼叫路由建立方法，其特征在于，步骤中不同话音交换节点的发现可以是静态配置，也可以是自动发现；静态配置的方式为添加其他话音交换节点，本端节点周期性检测配置的其他节点的状态并建立连接；自动发现为采用组播的方式发送节点探测报文。4.根据权利要求1所述的多网系分布式组网动态呼叫路由建立方法，其特征在于，步骤中本地的呼叫路由表包含话音交换节点ID、用户号段、链路类型、链路能力和话音交换对外IP。5.根据权利要求1所述的多网系分布式组网动态呼叫路由建立方法，其特征在于，步骤中，根据号码匹配长度、路由类型和链路状态进行计算，生成站间互通呼叫路由表，具体计算步骤如下：依据号段进行完全匹配索引，首先判断本地呼叫路由表存不存在相同号段的呼叫路由信息，如果存在则忽略此条呼叫路由信息，如果不存在，则进入步骤；查看站间互通呼叫路由表中存不存在相同号段的呼叫路由，如果不存在，则将此条呼叫路由存入站间互通呼叫路由表中；如果存在，则进入步骤；如果站间互通呼叫路由表中存在相同号段的呼叫路由并且是本节点静态配置的，则将扩散过来的路由存到站间互通呼叫路由表中作为备份路由；如果不是静态配置的，则进入步骤；如果站间互通呼叫路由表中存在相同号段的呼叫路由并且是其他节点扩散过来的，则比较两条呼叫路由中当前的链路能力，选择剩余可用链路资源数多的路由作为有效路由。6.根据权利要求1所述的多网系分布式组网动态呼叫路由建立方法，其特征在于，步骤中，呼叫路由表计算时依据号段进行完全匹配索引，即号段的长度和值均相同；当本地路由表和站间互通路由表中存在前几位号码匹配或者号段完全匹配但是号段长度不同的条目时，不属于完全匹配。7.根据权利要求1所述的多网系分布式组网动态呼叫路由建立方法，其特征在于，步骤中，链路状态发生故障或连接网系状态发生变化，包括E1链路中断或故障、IP链路中断和卫星终端退网。
说明书desc
技术领域本发明涉及多网系跨网话音互通技术领域，特别是一种多网系分布式组网动态呼叫路由建立方法。背景技术目前地面应用网系类型多样，主要分为无线网络和有线网络。无线网络包含卫通网、短波网等，有线网络包含PSTN、地面IP网。这些网系的频段差异大、技术体制不一、网络结构不同，业务接入相互独立，导致互连互通困难。随着无线网络特别是卫星通信网络的不断发展，逐渐发展成多星组网、地面多站互联的天地一体的卫星通信网络。因此如何将各种异构网络融合互通起来，实现无线网络内部体系的深度融合以及与地面网络的无缝融合，是一个亟待解决的问题。特别的，对于跨网话音互通来说，目前实现话音业务跨网互通需要在信关站配置网关设备，通过手动配置静态呼叫路由的方式实现特定网系间话音互通，互通效率低、体验差。因此，设计一种地面多站分布式组网互联环境下跨网话音互通呼叫路由的动态建立方法，可以大大提升互通的效率和体验。发明内容本发明公开一种多网系分布式组网动态呼叫路由建立方法，涉及多网系间跨网话音互通技术领域。本发明基于节点探测实现网间互联话音交换节点拓扑自动发现与维护，通过呼叫路由自主通告的方式进行本站话音交换呼叫路由信息的扩散，并通过呼叫路由实时计算与周期更新，实现多网系呼叫路由的自动建立，大大提升互通的效率和体验，解决了传统话音网络中呼叫路由手动配置复杂、拓扑重构困难、灵活性差的问题。本发明是这样实现的：一种多网系分布式组网动态呼叫路由建立方法，是基于分布式组网的网间互联话音交换节点来实现的；其特征在于：话音交换节点包含话音交换控制模块和多个异构网系话音适配模块，话音交换节点一侧通过异构网系话音适配模块连接异构多网系，实现异构多网系话音呼叫的协议适配；话音交换节点的另一侧通过话音交换控制模块连接地面IP网络，实现分布式组网的话音统一交换控制，话音交换节点之间通过地面IP网络网络层连接；具体包含以下步骤：分布式部署的网间互联话音交换节点的话音交换控制模块通过周期性发送节点探测报文，实现其他话音交换节点的发现，并与之建立邻接关系；话音交换节点的异构网系话音适配模块周期性收集当前连接的异构网系话音链路维持的呼叫数量以及链路剩余能力并上报给话音交换控制模块，话音交换控制模块依据此信息生成本地呼叫路由表并向其他话音交换节点进行通告；话音交换节点的话音交换控制模块接收邻居通告的呼叫路由表，根据号码匹配长度、路由类型和链路状态进行计算，生成站间互通呼叫路由表；当话音交换节点的异构网系话音适配模块检测到链路状态发生故障或连接网系状态发生变化时，上报给话音交换控制模块，话音交换控制模块依此更新本地呼叫路由表并主动向其他话音交换节点发送呼叫路由更新。其中，异构网系包括卫通、短波、区域宽带以及地面PSTN类型；话音交换节点通过E1中继、SIP中继、IP中继或载波中继连接各异构网系，是实现网系间话音互通的协议适配与话音交换控制中心。其中，步骤中不同话音交换节点的发现可以是静态配置，也可以是自动发现；静态配置的方式为添加其他话音交换节点，本端节点周期性检测配置的其他节点的状态并建立连接；自动发现为采用组播的方式发送节点探测报文。其中，步骤中本地的呼叫路由表包含话音交换节点ID、用户号段、链路类型、链路能力和话音交换对外IP。其中，步骤中，根据号码匹配长度、路由类型和链路状态进行计算，生成站间互通呼叫路由表，具体计算步骤如下：依据号段进行完全匹配索引，首先判断本地呼叫路由表存不存在相同号段的呼叫路由信息，如果存在则忽略此条呼叫路由信息，如果不存在，则进入步骤；查看站间互通呼叫路由表中存不存在相同号段的呼叫路由，如果不存在，则将此条呼叫路由存入站间互通呼叫路由表中；如果存在，则进入步骤；如果站间互通呼叫路由表中存在相同号段的呼叫路由并且是本节点静态配置的，则将扩散过来的路由存到站间互通呼叫路由表中作为备份路由；如果不是静态配置的，则进入步骤；如果站间互通呼叫路由表中存在相同号段的呼叫路由并且是其他节点扩散过来的，则比较两条呼叫路由中当前的链路能力，选择剩余可用链路资源数多的路由作为有效路由。其中，步骤中，呼叫路由表计算时依据号段进行完全匹配索引，即号段的长度和值均相同；当本地路由表和站间互通路由表中存在前几位号码匹配或者号段完全匹配但是号段长度不同的条目时，不属于完全匹配。其中，步骤中，链路状态发生故障或连接网系状态发生变化，包括E1链路中断或故障、IP链路中断和卫星终端退网。本发明与现有技术相比具有以下优点：一种多网系分布式组网动态呼叫路由建立方法，实现了话音网络中呼叫路由的自动建立，大大提升互通的效率和体验，解决了传统话音网络中呼叫路由手动配置复杂、拓扑重构困难、灵活性差的问题。附图说明图1是本发明组网动态呼叫路由建立方法的应用场景示意图。图2是本发明组网动态呼叫路由建立方法的实施例流程图。具体实施方式为了实现本发明，下面结合附图1和图2进行进一步说明。参照图1和图2，主要示意了一种多网系分布式组网动态呼叫路由建立方法，是基于分布式组网的网间互联话音交换节点来实现的。话音交换节点包含话音交换控制模块和多个异构网系话音适配模块，其一侧通过异构网系话音适配模块连接异构多网系，实现异构多网系话音呼叫的协议适配；一侧通过话音交换控制模块连接地面IP网络，实现分布式组网的话音统一交换控制。话音交换节点之间通过地面IP网络网络层可达，其实现包含以下步骤：分布式部署的网间互联话音交换节点话音交换控制模块通过周期性发送节点探测报文，实现其他话音交换节点的发现，并与之建立邻接关系；话音交换节点的异构网系话音适配模块周期性收集当前连接的异构网系话音链路维持的呼叫数量以及链路剩余能力并上报给话音交换控制模块。话音交换控制模块依据此信息生成本地呼叫路由表并向其他话音交换节点进行通告。话音交换节点的话音交换控制模块接收邻居通告的呼叫路由表，综合考虑号码匹配长度、路由类型、链路状态等因素进行计算，生成站间互通呼叫路由表。一般的，话音交换控制模块收到其他节点扩散的呼叫路由，计算步骤如下：依据号段进行完全匹配索引，首先判断本地呼叫路由表存不存在相同号段的呼叫路由信息，如果存在则忽略此条呼叫路由信息，如果不存在，则进行下一步判断；查看站间互通呼叫路由表中存不存在相同号段的呼叫路由，如果不存在，则将此条呼叫路由存入站间互通呼叫路由表中；如果存在，则进行下一步处理；如果站间互通呼叫路由表中存在相同号段的呼叫路由并且是本节点静态配置的，则将扩散过来的路由存到站间互通呼叫路由表中作为备份路由；如果不是静态配置的，则进行下一步处理；如果站间互通呼叫路由表中存在相同号段的呼叫路由并且是其他节点扩散过来的，则比较两条呼叫路由中当前的链路能力，选择剩余可用链路资源数多的路由作为有效路由。当话音交换节点的异构网系话音适配模块检测到链路状态发生故障或连接网系状态发生变化，上报给话音交换控制模块。话音交换控制模块依此更新本地呼叫路由表并主动向其他话音交换节点发送呼叫路由更新。其中，异构网系包含但不限于卫通、短波、区域宽带以及地面PSTN等类型，话音交换节点通过E1中继、SIP中继、IP中继、载波中继等一种或若干种链路类型连接各异构网系，是实现网系间话音互通的协议适配与话音交换控制中心。其中，步骤中不同话音交换节点的发现可以是静态配置，即以静态配置的方式添加其他话音交换节点，本端节点周期性检测配置的其他节点的状态并建立连接；也可以是自动发现，采用组播的方式发送节点探测报文，这需要地面IP网络提供对组播的支持。其中，步骤中本地的呼叫路由表包含话音交换节点ID、用户号段、链路类型、链路能力、话音交换对外IP等字段信息。其中，步骤中呼叫路由表计算时依据号段进行完全匹配索引，即号段的长度和值均相同。当本地路由表和站间互通路由表中存在前几位号码匹配或者号段完全匹配但是号段长度不同的条目时，不属于完全匹配。本发明独创了一种多网系分布式组网动态呼叫路由建立方法，实现了呼叫路由的自动建立，大大提升互通的效率和体验，解决了传统话音网络中路由寻址手动配置复杂、拓扑重构困难、灵活性差的问题。本领域的普通技术人员可以理解：实现多网系分布式组网动态呼叫路由建立方法可以通过程序指令相关的硬件或软件来完成，该程序在执行时，执行包括上述方法实施例的步骤。
