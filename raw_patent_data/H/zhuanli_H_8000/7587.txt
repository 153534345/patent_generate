标题title
同步网络的相邻网络间时序动态调整方法和电子价签系统
摘要abst
本发明提供一种同步网络的相邻网络间时序动态调整方法和电子价签系统，所述方法包括：服务器根据干扰时序关系图判断决策当前网络的时序调整方向和时序调整值；所述服务器将所述当前网络的时序调整方向和时序调整值生成相对应的调整任务，并在每个网络的处理过程中将所述调整任务发送到当前网络中的主基站，使所述主基站和辅基站根据所述调整任务进行时序动态调整。本发明解决了现有技术中相邻门店的同步网络之间或同一门店内的不同网络之间随着时间漂移存在相互干扰的问题，通过建立同步网络之间的干扰时序关系图并基于干扰时序关系图进行网络时序的动态调整，达到网络间能相互避让的目的，提高了同步网络的通信稳定性。
权利要求书clms
1.一种同步网络的相邻网络间时序动态调整方法，其特征在于，所述方法包括：在每个扫描周期，服务器控制同步网络中的每个基站进行预定时间长度的干扰扫描，使每个基站将干扰扫描结果发送给所述服务器；所述服务器根据网络中每个基站的干扰扫描结果建立相邻网络与当前网络之间干扰时序关系图；其中所述干扰扫描结果包括扫描到的干扰基站序号和时间相对位置；所述服务器根据所述干扰时序关系图中相邻网络在当前扫描周期时间轴上的相对位置、相邻一个或多个网络中每个基站序号以及干扰基站之间的时间偏差关系，判断决策当前网络的时序调整方向和时序调整值；所述服务器同时处理一个或多个网络的时序调整，将所述当前网络的时序调整方向和时序调整值生成相对应的调整任务，并在每个网络的处理过程中将所述调整任务发送到当前网络中的主基站，使所述主基站和辅基站根据所述调整任务进行时序动态调整。2.如权利要求1所述的同步网络的相邻网络间时序动态调整方法，其特征在于，所述干扰基站序号包括门店号，网络号和基站在所属网络中的偏移序号。3.如权利要求2所述的同步网络的相邻网络间时序动态调整方法，其特征在于，在判断决策当前网络的时序调整方向和时序调整值之前，所述方法还包括：所述服务器根据所述干扰时序关系图，获取与所述当前网络存在干扰关系的参考网络；根据所述干扰时序关系图，获取当前网络中存在基站干扰关系的最大基站序号；所述服务器根据当前网络与相对应的参考网络在当前扫描周期时间轴上的相对位置关系，确定参考网络的镜像方向；根据所述参考网络的镜像方向，得到当前网络的参考网络在相对应周期的镜像时序表；其中，所述镜像时序表为参考网络的镜像网络对应的时序表；根据当前网络的参考网络时序表以及参考网络在相对应周期的镜像时序表，判断当前网络是否需要进行时序调整。4.如权利要求3所述的同步网络的相邻网络间时序动态调整方法，其特征在于，当根据当前网络的参考网络时序表以及参考网络在相对应周期的镜像时序表，判断出当前网络需要进行时序调整时，判断决策当前网络的时序调整方向和时序调整值，包括：根据当前网络的起始时间、当前网络的参考网络的起始时间和参考网络的镜像网络的起始时间、参考网络的最大干扰基站偏移编号对应时间轴上的时间、当前网络最大干扰基站偏移编号对应时间轴上的时间获取当前网络与参考网络的第一时间差，以及当前网络与参考网络的镜像网络的第二时间差；根据预设间隔阈值、所述第一时间差和所述第二时间差，获取当前网络相对于参考网络的第一调整值和当前网络相对于参考网络的镜像网络的第二调整值；根据所述第一调整值和所述第二调整值，得到所述当前网络相对于参考网络的时序调整方向和时序调整值。5.如权利要求4所述的同步网络的相邻网络间时序动态调整方法，其特征在于，当所述时序调整值为正值时，所述时序调整方向为相对于时间轴右移；当所述时序调整值为负值时，所述时序调整方向为相对于时间轴左移。6.如权利要求4所述的同步网络的相邻网络间时序动态调整方法，其特征在于，当所述当前网络存在两个参考网络时，获取当前网络的时序调整值的公式表达式为：其中，表示当前网络相对于第一参考网络的时序调整值，表示当前网络相对于第二参考网络的时序调整值。7.如权利要求4所述的同步网络的相邻网络间时序动态调整方法，其特征在于，根据预设间隔阈值、所述第一时间差和所述第二时间差，获取当前网络相对于参考网络的第一调整值和当前网络相对于参考网络的镜像网络的第二调整值的公式表达式为：其中，表示第一调整值，表示第二调整值，表示预设间隔阈值，表示当前网络的起始时间，表示参考网络的起始时间，表示所述第一时间差，表示所述第二时间差。8.如权利要求1所述的同步网络的相邻网络间时序动态调整方法，其特征在于，所述服务器根据网络中每个基站的干扰扫描结果建立相邻网络与当前网络之间干扰时序关系图，包括：所述服务器建立当前扫描周期时间轴，以及根据所述当前扫描周期时间轴建立每个同步网络在当前扫描周期中对应的时序表；所述服务器根据每个基站的干扰扫描结果，过滤掉所有干扰扫描结果中与上报基站同网络的基站信息，得到目标干扰扫描结果；所述服务器根据所述目标干扰扫描结果，将每个时序表中对应的基站序号与干扰基站序号建立时间偏差关系，生成所述干扰时序关系图。9.如权利要求1-8任一项所述的同步网络的相邻网络间时序动态调整方法，其特征在于，所述服务器将所述每个网络的时序调整方向和时序调整值分别生成相对应的调整任务，包括：根据预设调整次数，将当前网络的时序调整值分成多个单次调整值；所述服务器将所述时序调整方向分别与所述多个单次调整值生成多个调整任务。10.如权利要求1-8任一项所述的同步网络的相邻网络间时序动态调整方法，其特征在于，所述服务器将所述每个网络的时序调整方向和时序调整值分别生成相对应的调整任务，包括：根据所述时序调整值和预设单次调整值，得到当前调整次数；根据所述当前调整次数、所述时序调整值和所述预设单次调整值，生成多个调整任务，在同一个调整周期内多次发送给基站。11.如权利要求1所述的同步网络的相邻网络间时序动态调整方法，其特征在于，所述服务器根据扫描周期长度重复控制基站进行干扰扫描，并循环进行相邻网络间时序动态调整。12.一种电子价签系统，其特征在于，所述电子价签系统使用权利要求1-11任一项所述的同步网络的相邻网络间时序动态调整方法进行时序调整。
说明书desc
技术领域本发明涉及通信技术领域，具体涉及同步网络的相邻网络间时序动态调整方法和电子价签系统。背景技术随着电子价签系统在各个零售领域的应用越来越广泛，门店规模也越来越大，门店内需要部署多个基站，其中多个基站通过建立一个或多个同步网络进行通信，一个同步网络中包括一个主基站和若干个辅基站，辅基站时序与主基站同步；但是主基站的时钟会产生漂移，且时钟精度越低漂移的可能性越大，那么辅基站的时钟也会随之产生漂移，从而导致时间本不冲突的相邻门店的同步网络或同一门店内的不同网络之间，会随时间漂移变得相互干扰。另外，在网络初始建立时，相邻门店的同步网络或同一门店内的不同网络之间也需要进行时间上的避让，避免时间冲突产生干扰。可见，现有技术中相邻门店的同步网络之间或同一门店内的不同网络之间随着时间漂移或初始建立时都可能存在相互干扰的问题，降低了电子价签系统的同步精度和稳定性，不满足门店的实际需求。发明内容针对现有技术中所存在的不足，本发明提供的同步网络的相邻网络间时序动态调整方法和电子价签系统，其解决了现有技术中相邻门店的同步网络之间或同一门店内的不同网络之间随着时间漂移或初始建立时存在相互干扰的问题，通过建立同步网络之间的干扰时序关系图并基于干扰时序关系图进行网络时序的动态调整，达到网络间时序能相互避让的目的，提高了同步网络的通信稳定性。第一方面，本发明提供一种同步网络的相邻网络间时序动态调整方法，所述方法包括：在每个扫描周期，服务器控制同步网络中的每个基站进行预定时间长度的干扰扫描，使每个基站将干扰扫描结果发送给所述服务器；所述服务器根据网络中每个基站的干扰扫描结果建立相邻网络与当前网络之间干扰时序关系图；其中所述干扰扫描结果包括扫描到的干扰基站序号和时间相对位置；所述服务器根据所述干扰时序关系图中相邻网络在当前扫描周期时间轴上的相对位置、相邻一个或多个网络中每个基站序号以及干扰基站之间的时间偏差关系，判断决策当前网络的时序调整方向和时序调整值；所述服务器同时处理一个或多个网络的时序调整，将所述当前网络的时序调整方向和时序调整值生成相对应的调整任务，并在每个网络的处理过程中将所述调整任务发送到当前网络中的主基站，使所述主基站和辅基站根据所述调整任务进行时序动态调整。可选地，所述干扰基站序号包括门店号，网络号和基站在所属网络中的偏移序号。可选地，在判断决策当前网络的时序调整方向和时序调整值之前，所述方法还包括：所述服务器根据所述干扰时序关系图，获取与所述当前网络存在干扰关系的参考网络；根据所述干扰时序关系图，获取当前网络中存在基站干扰关系的最大基站序号；所述服务器根据当前网络与相对应的参考网络在当前扫描周期时间轴上的相对位置关系，确定参考网络的镜像方向；根据所述参考网络的镜像方向，得到当前网络的参考网络在相对应周期的镜像时序表；其中，所述镜像时序表为参考网络的镜像网络对应的时序表；根据当前网络的参考网络时序表以及参考网络在相对应周期的镜像时序表，判断当前网络是否需要进行时序调整。可选地，当根据当前网络的参考网络时序表以及参考网络在相对应周期的镜像时序表，判断出当前网络需要进行时序调整时，判断决策当前网络的时序调整方向和时序调整值，包括：根据当前网络的起始时间、当前网络的参考网络的起始时间和参考网络的镜像网络的起始时间、参考网络的最大干扰基站偏移编号对应时间轴上的时间、当前网络最大干扰基站偏移编号对应时间轴上的时间获取当前网络与参考网络的第一时间差，以及当前网络与参考网络的镜像网络的第二时间差；根据预设间隔阈值、所述第一时间差和所述第二时间差，获取当前网络相对于参考网络的第一调整值和当前网络相对于参考网络的镜像网络的第二调整值；根据所述第一调整值和所述第二调整值，得到所述当前网络相对于参考网络的时序调整方向和时序调整值。可选地，当所述时序调整值为正值时，所述时序调整方向为相对于时间轴右移；当所述时序调整值为负值时，所述时序调整方向为相对于时间轴左移。可选地，当所述当前网络存在两个参考网络时，获取当前网络的时序调整值的公式表达式为：其中，表示当前网络相对于第一参考网络的时序调整值，表示当前网络相对于第二参考网络的时序调整值。可选地，根据预设间隔阈值、所述第一时间差和所述第二时间差，获取当前网络相对于参考网络的第一调整值和当前网络相对于参考网络的镜像网络的第二调整值的公式表达式为：其中，表示第一调整值，表示第二调整值，表示预设间隔阈值，表示当前网络的起始时间，表示参考网络的起始时间，表示所述第一时间差，表示所述第二时间差。可选地，所述服务器根据网络中每个基站的干扰扫描结果建立相邻网络与当前网络之间干扰时序关系图，包括：所述服务器建立当前扫描周期时间轴，以及根据所述当前扫描周期时间轴建立每个同步网络在当前扫描周期中对应的时序表；所述服务器根据每个基站的干扰扫描结果，过滤掉所有干扰扫描结果中与上报基站同网络的基站信息，得到目标干扰扫描结果；所述服务器根据所述目标干扰扫描结果，将每个时序表中对应的基站序号与干扰基站序号建立时间偏差关系，生成所述干扰时序关系图。可选地，所述服务器将所述每个网络的时序调整方向和时序调整值分别生成相对应的调整任务，包括：根据预设调整次数，将当前网络的时序调整值分成多个单次调整值；所述服务器将所述时序调整方向分别与所述多个单次调整值生成多个调整任务。可选地，所述服务器将所述每个网络的时序调整方向和时序调整值分别生成相对应的调整任务，包括：根据所述时序调整值和预设单次调整值，得到当前调整次数；根据所述当前调整次数、所述时序调整值和所述预设单次调整值，生成多个调整任务，在同一个调整周期内多次发送给基站。可选地，所述服务器根据扫描周期长度重复控制基站进行干扰扫描，并循环进行相邻网络间时序动态调整。第二方面，本发明提供一种电子价签系统，所述电子价签系统使用所述的同步网络的相邻网络间时序动态调整方法进行时序调整。相比于现有技术，本发明具有如下有益效果：本实施例通过每个基站的干扰扫描结果建立多个同步网络之间的干扰时序关系图，根据干扰时序关系图得到每个网络的时序调整方向和时序调整值，将每个网络的时序调整方向和时序调整值分别生成相对应的调整任务，并将每个调整任务分别发送到相对应网络中，使网络中的主基站和辅基站根据调整任务进行时序的动态调整，从而达到网络间时序能相互避让的目的，解决了同门店内网络以及相邻门店内网络随着时间漂移或初始建立时，在时序上出现重合导致信号干扰的问题，提高了同步网络的通信稳定性。附图说明图1所示为本发明实施例提供的一种同步网络的相邻网络间时序动态调整方法的流程示意图；图2所示为本发明实施例提供的一种同步网络示意图；图3所示为本发明实施例提供的另一种同步网络示意图；图4所示为图1中步骤S101的具体流程示意图；图5所示为本发明实施例提供的一种时序表的示意图；图6所示为本发明实施例提供的一种干扰时序关系图示意图；图7所示为本发明实施例提供的一种时序表调整示意图；图8所示为本发明实施例提供的另一种同步网络的相邻网络间时序动态调整方法的流程示意图；图9所示为本发明实施例提供的另一种时序表调整示意图。具体实施方式为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本申请的一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都属于本申请保护的范围。第一方面，本发明提供一种同步网络的相邻网络间时序动态调整方法，具体包括以下实施例：图1所示为本发明实施例提供的一种同步网络的相邻网络间时序动态调整方法的流程示意图，如图1所示，所述同步网络的相邻网络间时序动态调整方法应用于电子价签系统且所述电子价签系统包括服务器、基站和电子价签时，具体包括以下步骤：步骤S101，在每个扫描周期，服务器控制同步网络中的每个基站进行预定时间长度的干扰扫描，使每个基站将干扰扫描结果发送给所述服务器；需要说明的是，如图2和图3所示，本实施例中的相邻网络包括同一个门店内的多个网络或/和相邻门店之间形成的多个网络。需要说明的是，当同步网络中的基站处于空闲状态时，所述服务器发送干扰扫描任务到每个基站，使每个基站根据所述干扰扫描任务同时进行基站扫描，并将扫描到的干扰基站序号和时间相对位置生成干扰扫描结果。需要说明的是，当门店初始建立时或门店内网络处于同步状态下之后，服务器每隔固定周期判断基站是否满足下发干扰扫描任务的条件，如果满足服务器会对门店中的所有基站下发干扰扫描任务，然后等待接收基站上报的干扰扫描结果；其中，基站收到服务器下发的干扰扫描任务之后，会对周围的基站进行扫描，同一个基站可能扫描到多台干扰基站，基站上报所有能扫描到的基站序号、当前基站所在网络与干扰基站所在网络起始时间差；所述的基站序号包括基站门店号、网络号、基站偏移编号；所示基站偏移编号为基站工作的时间偏移编号。步骤S102，所述服务器根据网络中每个基站的干扰扫描结果建立相邻网络与当前网络之间干扰时序关系图。如图4所示，所述服务器根据网络中每个基站的干扰扫描结果建立相邻网络与当前网络之间干扰时序关系图，具体包括以下步骤：步骤S201、所述服务器建立当前扫描周期时间轴，以及根据所述当前扫描周期时间轴建立每个同步网络在当前扫描周期中对应的时序表；步骤S202、所述服务器根据每个基站的干扰扫描结果，过滤掉所有干扰扫描结果中与上报基站同网络的基站信息，得到目标干扰扫描结果；步骤S203、所述服务器根据所述目标干扰扫描结果，将每个时序表中对应的基站偏移编号与干扰基站偏移编号建立时间偏移关系，生成所述干扰时序关系图。需要说明的是，如图5所示，在本实施例中将当前扫描周期按照预设间隔分成若干份建立时间轴，再根据所述当前扫描周期时间轴建立每个同步网络在当前扫描周期中对应的时序表；其中，服务器可以根据上报干扰基站序号的时间相对位置关系建立每个同步网络在当前扫描周期中对应的时序表，所述干扰基站序号包括门店号，网络号和基站在所属网络中的偏移序号。进一步地，每个基站的干扰扫描结果包括能与当前基站产生干扰的其他基站，产生干扰的其他基站有可能是同一网络中的基站，也可能是其它网络中的基站；因此服务器对本轮基站上报结果进行收集，过滤掉基站上报结果中与该基站同网络的扫描结果，再将相互产生干扰的基站建立时间偏移关系，得到如图6所示的干扰时序关系图。需要说明的是，在图6中，网络1中偏移编号为2的基站与网络2中偏移编号1的基站产生干扰，网络1中偏移编号5对应的基站与网络3中偏移编号2对应的基站产生干扰；在本实施例中，每个网络中的主基站的偏移编号可以为0也可以为其他数，其他辅基站根据与主基站的相对偏移进行编号。步骤S103，所述服务器根据所述干扰时序关系图中相邻网络在当前扫描周期时间轴上的相对位置、相邻一个或多个网络中每个基站序号以及干扰基站之间的时间偏差关系，判断决策当前网络的时序调整方向和时序调整值。在本实施例中，在判断决策当前网络的时序调整方向和时序调整值之前，所述方法还包括：所述服务器根据所述干扰时序关系图，获取与所述当前网络存在干扰关系的参考网络；根据所述干扰时序关系图，获取当前网络中存在基站干扰关系的最大基站序号；所述服务器根据当前网络与相对应的参考网络在当前扫描周期时间轴上的相对位置关系，确定参考网络的镜像方向；根据所述参考网络的镜像方向，得到当前网络的参考网络在相对应周期的镜像时序表；其中，所述镜像时序表为参考网络的镜像网络对应的时序表；根据当前网络的参考网络时序表以及参考网络在相对应周期的镜像时序表，判断当前网络是否需要进行时序调整。在本实施例中，当根据当前网络的参考网络在相对应周期的镜像时序表，判断出当前网络需要进行时序调整时，判断决策当前网络的时序调整方向和时序调整值，包括：根据当前网络的起始时间、当前网络的参考网络的起始时间和参考网络的镜像网络的起始时间、参考网络的最大干扰基站偏移编号对应时间轴上的时间、当前网络最大干扰基站偏移编号对应时间轴上的时间获取当前网络与参考网络的第一时间差，以及当前网络与参考网络的镜像网络的第二时间差；根据预设间隔阈值、所述第一时间差和所述第二时间差，获取当前网络相对于参考网络的第一调整值和当前网络相对于参考网络的镜像网络的第二调整值；根据所述第一调整值和所述第二调整值，得到所述当前网络相对于参考网络的时序调整方向和时序调整值。在本实施例中，当所述时序调整值为正值时，所述时序调整方向为相对于时间轴右移；当所述时序调整值为负值时，所述时序调整方向为相对于时间轴左移。在本实施例中，当所述当前网络存在两个参考网络时，获取当前网络的时序调整值的公式表达式为：其中，表示当前网络相对于第一参考网络的时序调整值，表示当前网络相对于第二参考网络的时序调整值。在本实施例中，根据预设间隔阈值、所述第一时间差和所述第二时间差，获取当前网络相对于参考网络的第一调整值和当前网络相对于参考网络的镜像网络的第二调整值的公式表达式为：其中，表示第一调整值，表示第二调整值，表示预设间隔阈值，表示当前网络的起始时间，表示参考网络的起始时间，表示所述第一时间差，表示所述第二时间差。需要说明的是，每个网络对应的参考网络是不相同的，本实施例以当前网络对应的参考网络为例进行阐述。本实施例中，每个网络的调整值由计算的基于每个网络及镜像网络需要移动的距离综合计算；调整的方向由调整值的正负来决定。如图6所示，如1号网络与2号网络、3号网络均有干扰，现定义：1网络，2网络，3网络起始时间为，网络2相对于网络1的镜像周期网络起始时间为，网络3相对于网络1的镜像周期网络起始时间为当前网络1距离网络2时序上的时间差为，当前网络1相对于网络2的镜像网络时序上的时间差为，当前网络1距离网络3时序上的时间差为，当前网络1相对于网络3的镜像网络时序上的时间差为，定义为：定义为：其中为1号网络与2网络的最大冲突ap编号，为2号网络与1号网络的最大冲突ap编号定义为：定义为：其中为1号网络与3网络的最大冲突ap编号，为3号网络与1号网络的最大冲突ap编号设当前网络1相对于网络2需要调整的时间为，当前网络1相对于网络2的镜像网络需要调整的时间为，当前网络1相对于网络3需要调整的时间为，当前网络1相对于网络3的镜像网络需要调整的时间为，定义为：定义为：和同理。在本实施例中，1号网络相对于2号网络需要移动的距离定义为：同理，1号网络相对于3号网络需要移动的距离定义为：那么1号网络需要调整的值为：1号网络调整的方向由的结果正负来决定，D为正，则网络需要往右边移动，D为负，则网络需要往左边移动。进一步举例说明，网络1计算的过程如下：网络1有干扰的网络为网络2和网络3网络1相对于网络2需要调节的值为：网络1相对于网络3需要调节的值为：则最终的，网络1方向向左，需要移动调节65ms，每次1ms调节，时序调节后的位置如图7所示。步骤S104，所述服务器同时处理一个或多个网络的时序调整，将所述当前网络的时序调整方向和时序调整值生成相对应的调整任务，并在每个网络的处理过程中将所述调整任务发送到当前网络中的主基站，使所述主基站和辅基站根据所述调整任务进行时序动态调整。在本实施例的第一种实现方式中，所述服务器将所述每个网络的时序调整方向和时序调整值分别生成相对应的调整任务，包括：根据预设调整次数，将当前网络的时序调整值分成多个单次调整值；所述服务器将所述时序调整方向分别与所述多个单次调整值生成多个调整任务。需要说明的是，假如时序调整值为5ms,预设调整次数为5次，每次的单次调整值可以为1ms，将所述调整方向和单次调整值生成多个单次调整任务；其中，每次单次调整值可以相当也可以不同。在本实施例的第二种实现方式中，所述服务器将所述每个网络的时序调整方向和时序调整值分别生成相对应的调整任务，包括：根据所述时序调整值和预设单次调整值，得到当前调整次数；根据所述当前调整次数、所述时序调整值和所述预设单次调整值，生成多个调整任务。需要说明的是，预设单次调整值为每次调整的值为固定值，例如1ms，那么5ms的时序调整值对应的当前调整次数为5次，在当前扫描周期中，服务器生成5个调整任务发送到相对应的网络中。在本实施例中，服务器可以同时对一个或者多个网络进行时序调整。在本实施例中，基站收到服务器下发的时间调整任务后，调整主基站的时间，同时主基站调整的同步时间一级一级传递到辅基站，从而整个网络的时间得到调整。在本实施例中，所述服务器根据扫描周期长度重复控制基站进行干扰扫描，并循环进行相邻网络间时序动态调整。相比于现有技术，本实施例具有如下有益效果：本实施例通过每个基站的干扰扫描结果建立多个同步网络之间的干扰时序关系图，根据干扰时序关系图得到每个网络的时序调整方向和时序调整值，将每个网络的时序调整方向和时序调整值分别生成相对应的调整任务，并将每个调整任务分别发送到相对应网络中，使网络中的主基站和辅基站根据调整任务进行时序的动态调整，从而达到网络间时序能相互避让的目的，解决了同门店内网络以及相邻门店内网络随着时间漂移或初始建立时，在时序上出现重合导致信号干扰的问题，提高了同步网络的通信稳定性。图8所示为本发明实施例提供的另一种同步网络的相邻网络间时序动态调整方法的流程示意图；如图8所示，所示时序动态调整方法包括以下步骤：步骤一、扫描任务下发：当门店初始建立时或门店内网络处于同步状态下之后，服务器每隔固定周期判断基站是否满足下发干扰扫描任务的条件，如果满足，服务器会对门店中的所有基站下发干扰扫描任务，然后等待接收基站上报的干扰扫描结果。步骤二、基站上报干扰扫描结果：基站收到服务器下发的干扰扫描任务之后，会对周围的基站进行扫描，同一个基站可能扫描到多台干扰基站，基站上报所有能扫描到的基站门店号、网络号、基站偏移编号、当前基站所在网络与干扰基站所在网络起始时间差。步骤三、处理扫描结果：服务器对本轮基站上报结果进行收集，过滤掉基站上报结果中与该基站同网络的扫描结果，整理出网络之间的干扰关系，确定网络间最大干扰基站偏移编号，如图7所示，网络1和网络2有干扰的基站涉及网络1的2号基站、网络2的1号基站，通过上报的时间间隔能够确定两网络在本周期时间轴上的相对位置，以计算A门店网络调节时间和方向为例，需要镜像网络2到上个周期，同时判断：网络1的2号基站与网络2起始时间的时间差是否大于GAP；网络2镜像网络1号基站是否与网络1起始时间时间差大于GAP，不满足其一则需要进行调节；其中，同门店网络间时间调整同理，如图9所示根据时间调节算法来计算各个网络需要调整的时间以及方向，调节的原则是使网络起点距离干扰网络的镜像网络最大干扰基站编号之间时间间隔大于GAP，以及网络最大干扰基站编号对应时间距离干扰网络起始时间的时间间隔大于GAP。步骤四、下发调整任务：根据服务器计算出的网络待调整值以及待调整方向，生成调整任务下发给各个网络主AP，如果不需要调整，则不下发调整任务。在一个周期内下发调整任务可能为多次，每次仅对各网络主基站下发最大1ms的时间调整，按计算得到的次数定时发送，待全部调整任务发送完毕后，等待进入下一周期。步骤五、基站时间调整：主基站收到服务器下发的时间调整任务后，调整主基站的时间，同时主基站调整的同步时间一级一级传递到辅基站，从而整个网络的时间得到调整。需要说明的是，该时间调整方案运用于网络之间后，持续监控网络之间的相对时间差，两相互可扫描到的网络之间，可调整到网络间间隔GAP的时间差，并维持稳定，使网络间的干扰大幅降低，网络的稳定性能大幅提升，基站失步的现象减少。第二方面，本发明提供一种电子价签系统，所述电子价签系统使用上述所述的同步网络的相邻网络间时序动态调整方法进行时序调整。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的程序可存储于一非易失性计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、存储、数据库或其它介质的任何引用，均可包括非易失性和/或易失性存储器。非易失性存储器可包括只读存储器、可编程ROM、电可编程ROM、电可擦除可编程ROM或闪存。易失性存储器可包括随机存取存储器或者外部高速缓冲存储器。作为说明而非局限，RAM以多种形式可得，诸如静态RAM、动态RAM、同步DRAM、双数据率SDRAM、增强型SDRAM、同步链路 DRAM、存储器总线直接RAM、直接存储器总线动态RAM、以及存储器总线动态RAM等。需要说明的是，在本文中，诸如“第一”和“第二”等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。
