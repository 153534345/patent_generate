标题title
一种电源供电处理方法、系统、装置及介质
摘要abst
本申请公开了一种电源供电处理方法、系统、装置及介质，应用于电源检测、监测、调节领域领域。该方法包括：获取采样电压值，将采样电压值与预设电压值进行对比，判断电子设备是否上电、是否处于关断状态，当电子设备供电异常且处于关断状态时，通过设备本身的储能器件为设备提供能量并将设备的状态信息记录及上报，同时检测电子设备能耗信息，灵活调节、控制电路中相关功能模块的用能，合理化关闭电子设备中相应的模块电路用能，最大限度地减少非必要模块电路用能，延长电子设备的使用时间。当电子设备上电且处于工作状态时，通过合理化调节限流电阻阻值配比实现设备本身自带的储能器件的精细化充电管理，改善设备用能占比，达到最佳的能耗管理。
权利要求书clms
1.一种电源供电处理方法，其特征在于，包括：获取采样电压值；根据所述采样电压值与预设电压值进行对比，判断电源是否存在；若不存在，则检测电子设备状态；当所述电子设备处于工作状态时，调节所述电子设备的用能；当所述电子设备处于关断状态时，关闭所述电子设备中的外设。2.根据权利要求1所述的电源供电处理方法，其特征在于，若所述电源存在，则获取采样电流值，根据所述采样电流值与预设电流值的对比情况，控制超级电容选择对应的充电模式。3.根据权利要求2所述的电源供电处理方法，其特征在于，所述采样电压值包括第一采样电压值和第二采样电压值，所述电源包括第一电源和第二电源，所述预设电压值包括第一预设电压值和第二预设电压值；所述根据所述采样电压值与预设电压值进行对比，判断电源是否存在包括：若所述第一采样电压值大于所述第一预设电压值且所述第二采样电压值大于所述第二预设电压值，则所述第一电源和所述第二电源均存在。4.根据权利要求3所述的电源供电处理方法，其特征在于，所述预设电压值还包括第三预设电压值；所述根据所述采样电压值与预设电压值进行对比，判断电源是否存在还包括：若所述第一采样电压值大于所述第一预设电压值且所述第二采样电压值等于所述第三预设电压值，则所述第一电源存在，所述第二电源不存在。5.根据权利要求4所述的电源供电处理方法，其特征在于，所述根据所述采样电压值与预设电压值进行对比，判断电源是否存在还包括：若所述第一采样电压值等于所述第三预设电压值且所述第二采样电压值大于所述第二预设电压值，则所述第一电源不存在，所述第二电源存在。6.根据权利要求5所述的电源供电处理方法，其特征在于，所述预设电流值包括第一预设电流值和第二预设电流值，所述充电模式包括第一充电模式和第二充电模式；所述根据所述采样电流值与预设电流值的对比情况，控制超级电容选择对应的充电模式包括：判断所述采样电流值是否大于所述第一预设电流值；若所述采样电流值大于所述第一预设电流值，则所述超级电容关闭充电模式；若所述采样电流值不大于所述第一预设电流值，则判断所述采样电流值是否大于所述第二预设电流值；若是，则控制所述超级电容选择所述第一充电模式；若否，则控制所述超级电容选择所述第二充电模式。7.根据权利要求2-6任意一项所述的电源供电处理方法，其特征在于，所述根据所述采样电流值与预设电流值的对比情况，控制超级电容选择对应的充电模式之后，还包括：获取所述超级电容的电压值；当所述超级电容的电压值等于预设值时，则所述超级电容充电完成。8.一种电源供电处理系统，其特征在于，该系统包括：获取模块，用于获取采样电压值；判断模块，用于根据所述采样电压值与预设电压值进行对比，判断电源是否存在；检测模块，在所述判断模块判断为否的情况下，用于检测电子设备状态；调节模块，在所述检测模块中的检测电子设备状态为工作状态时，用于调节所述电子设备的用能；关闭模块，在所述检测模块中的检测电子设备状态为关断状态时，用于关闭所述电子设备中的外设。9.一种电源供电处理装置，其特征在于，包括存储器，用于存储计算机程序；处理器，用于执行所述计算机程序时实现如权利要求1至7任一项所述的电源供电处理技术的步骤。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储有计算机程序，所述计算机程序被处理器执行时实现如权利要求1至7任一项所述的电源供电处理技术的步骤。
说明书desc
技术领域本申请涉及电源检测、监测、调节领域，特别是涉及一种电源供电处理方法、系统、装置及介质。背景技术随着科技迅猛发展，信息化步伐不断加快，新的应用领域不断凸显，涌现出很多新技术、新方法、新标准；这些新的思路引导传统的电子产品更新换代，向着更加智能的目标迈进。近年来，两种电源供电检测切换的方法在现有社会中成为主要的方法。第一种是电能表用电源检测与切换装置，提出了一种电源逐级切换供电的检测技术，属于目前常规电能表所应具备的基本功能，如：目前电能表包括主电源、停抄电池、时钟电池等电源，当它们给本体供电时，存在优先级，优先选择主电源供电；当主电源没电时，切换到停抄电池供电；当停抄电池没电时，切换到时钟电池供电，同时系统进入低功耗模式。主要采用的方式：分为两部分，一部分为电压检测，实现不同供电元件电压检测的功能；一部分为供电电源切换电路，利用场效应管的导通特性实现主电源、停抄电池、时钟电池逐次切换的功能；整体上只能实现电压采集，不能实现灵活控制，是被动式电源切换，并且实现不同供电元件电压的检测，不能实现主动的电源切换。第二种是一种电能表用超级电容充放电控制电路及控制方法，其控制方法包括获取超级电容的状态，然后判断在一定时间内状态的转换，并据此判断超级电容的状态，控制充电的占空比，降低了损坏超级电容的可能性，延长了超级电容的寿命，其中超级电容充电电路的调剂方式为脉冲宽度调制调节方式，通过对比超级电容的电压状态，输出频率、不同占空比的PWM波来控制超级电容充电电流的大小，这种方式存在一定的缺陷：PWM波控制为调频控制的一种方式，根据傅里叶变换模型，一个方波信号可以分解为一个基波信号和无数多个谐波组成的。这种方式的引入，会同时引入一定的噪声信号。当控制MOS管开合的开关频率超过某一频率值时，流入超级电容的充电电流会在MOS管快速开合的瞬间会出现开关噪声，产生尖峰噪声有可能超过超级电容最大耐压值，长时间、重复性施加到超级电容本体上，有可能导致超级电容炸裂，影响设备可靠性，降低设备整体寿命。鉴于上述技术，寻求一种新的一种电源供电处理技术是本领域技术人员亟待解决的问题。发明内容本申请的目的是提供一种电源供电处理方法、系统、装置及介质，可以灵活的调节、控制电路中相关功能模块的用能，减少不必要的功能消耗，延长电子设备的使用时间，并且本申请通过调剂不同限流电阻的相互配比值实现充电电流的精细化管理，并且可以保证充电过程中，各个阶段充电电流稳定，不会引入不必要的噪声信号，提高了设备的可靠性，延长了设备的整体寿命。为解决上述技术问题，本申请提供一种电源供电处理方法，包括：获取采样电压值；根据采样电压值与预设电压值进行对比，判断电源是否存在；若不存在，则检测电子设备状态；当电子设备处于工作状态时，调节电子设备的用能；当电子设备处于关断状态时，关闭电子设备中的外设。优选地，若电源存在，则获取采样电流值，根据采样电流值与预设电流值的对比情况，控制超级电容选择对应的充电模式。优选地，采样电压值包括第一采样电压值和第二采样电压值，电源包括第一电源和第二电源，预设电压值包括第一预设电压值和第二预设电压值；根据采样电压值与预设电压值进行对比，判断电源是否存在包括：若第一采样电压值大于第一预设电压值且第二采样电压值大于第二预设电压值，则第一电源和第二电源均存在。优选地，预设电压值还包括第三预设电压值；根据采样电压值与预设电压值进行对比，判断电源是否存在还包括：若第一采样电压值大于第一预设电压值且第二采样电压值等于第三预设电压值，则第一电源存在，第二电源不存在。优选地，根据采样电压值与预设电压值进行对比，判断电源是否存在还包括：若第一采样电压值等于第三预设电压值且第二采样电压值大于第二预设电压值，则第一电源不存在，第二电源存在。优选地，预设电流值包括第一预设电流值和第二预设电流值，充电模式包括第一充电模式和第二充电模式；根据采样电流值与预设电流值的对比情况，控制超级电容选择对应的充电模式包括：判断采样电流值是否大于第一预设电流值；若采样电流值大于第一预设电流值，则超级电容关闭充电模式；若采样电流值不大于第一预设电流值，则判断采样电流值是否大于第二预设电流值；若是，则控制超级电容选择第一充电模式；若否，则控制超级电容选择第二充电模式。优选地，根据采样电流值与预设电流值的对比情况，控制超级电容选择对应的充电模式之后，还包括：获取超级电容的电压值；当超级电容的电压值等于预设值时，则超级电容充电完成。为解决上述问题，本申请还包括一种电源供电处理系统，该系统包括：获取模块，用于获取采样电压值；判断模块，用于根据采样电压值与预设电压值进行对比，判断电源是否存在；检测模块，在判断模块判断为否的情况下，用于检测电子设备状态；调节模块，在检测模块中的检测电子设备状态为工作状态时，用于调节电子设备的用能；关闭模块，在检测模块中的检测电子设备状态为关断状态时，用于关闭电子设备中的外设。为解决上述问题，本申请还提供一种电源供电处理装置，包括存储器，用于存储计算机程序；处理器，用于执行计算机程序时实现上述中电源供电处理技术的步骤。为解决上述问题，本申请还提供一种计算机可读存储介质，计算机可读存储介质上存储有计算机程序，计算机程序被处理器执行时实现如上述中电源供电处理技术的步骤。本申请所提供的一种电源供电处理方法，该方法包括：获取采样电压值，将采样电压值与预设电压值进行对比，判断电子设备是否上电、是否处于关断状态，当电子设备供电异常且处于关断状态时，通过设备本身的储能器件为设备提供能量并将设备的状态信息记录及上报，同时检测电子设备能耗信息，灵活调节、控制电路中相关功能模块的用能，合理化关闭电子设备中相应的模块电路用能，最大限度地减少非必要模块电路用能，延长电子设备的使用时间。当电子设备上电且处于工作状态时，通过合理化调节限流电阻阻值配比实现设备本身自带的储能器件的精细化充电管理，改善设备用能占比，达到最佳的能耗管理。附图说明为了更清楚地说明本申请实施例，下面将对实施例中所需要使用的附图做简单的介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例提供的电源供电处理方法的流程图；图2为本申请实施例提供的电源供电处理方法的框图；图3为本申请实施例提供的控制电路的电路图；图4为本申请实施例提供的充电调节电路的电路图；图5a为本申请实施例提供的电能转换电路的电路图；图5b为本申请实施例提供的电能转换电路的电路图；图5c为本申请实施例提供的电能转换电路的电路图；图6为本申请实施例提供的整机功耗检测电路的电路图；图7为本申请实施例提供的电源供电处理方法的整体流程图；图8为本申请实施例提供的电源供电处理系统的模块图；图9为本申请实施例提供的电源供电处理装置的结构图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下，所获得的所有其他实施例，都属于本申请保护范围。本申请的核心是提供一种电源供电处理方法、系统、装置及介质。为了使本技术领域的人员更好地理解本申请方案，下面结合附图和具体实施方式对本申请作进一步的详细说明。本申请提供一种电源供电处理方法、系统、装置及介质，可以应用于电能表中，或者其他电子设备。其中，电能表的寿命从8年轮换提升到16年，提升电子元器件的可靠性及寿命，并且停电上报功能，提升电能表需具备储能器件，停电后能够在一段时间能为电能表持续供电，以保证停电期间重要数据能够被可靠保存、处理、传输。针对IR46表，提出了“双芯”系统，即将电能表的功能细分、层次化，将基本的计量功能划归给计量芯负责，管理及对外通信部分功能划归给管理芯片负责，做到“职责明确，互有联系，思路清晰，数据处理吞吐显著增强”等特点，同时提出了更具体、精准的用能管理要求。并且传统的空气开关、隔离开关、断路器等纯机械式、半电子式产品逐渐失去了市场竞争力，取而代之的是功能强大、智能化水平高的开关类产品。这样就要求设计人员从安全、结构、功能等方面入手，用全新的观念来设计出高可靠性、低耗能的产品。为提高电网用能科学化、智能化管理，开关类产品加入了计量功能，实时监测通过它的用能信息，并具有停电上报等等电能表的功能，可以称智能化断路器即为“具有开合功能的电能表”。图1为本申请实施例提供的电源供电处理方法的流程图，如图所示，一种电源供电处理方法，包括如下流程。S10：获取采样电压值。在具体实施例中，图2为本申请实施例提供的电源供电处理方法的框图，如图所示，其中，主电源为1、辅助电源为2、控制电路为3、电能转换电路为4、充电电池或超级电容等储能元件为5、充电调节电路为6、负载电路为7、主控电路为8、整机功耗检测电路为9。其中图2也仅为一种可以实现的方式，其中图2中的电源包括主电源1和辅助电源2。本申请中的主电源1和辅助电源2也仅为一种可以实现的方式，但是不代表只有该种实现方式，可以根据用户的需要，将电源设置成3个电源或者4个电源，本申请不限定。其中，主电源1连接控制电路3和电能转换电路4；辅助电源2连接控制电路3；控制电路3连接电能转换电路4；电能转换电路4连接充电调节电路6、充电电池或超级棒充电等储能元件5、主控电路8、负载电路7和整机功耗检测电路9；负载电路7连接整机功耗检测电路9和主控电路8；整机功耗检测电路9连接主控电路8；主控电路8连接充电调节电路6；充电调节电路6连接充电电池或超级电容等储能元件5。在具体实施例中，主电源1和辅助电源2为两路电源分支，主要为整个系统提供电能，但同一时间不同时为系统提供电能，主要通过控制电路3来调节；电能转换电路4用来将主电源1、辅助电源2引入的电压转换为各个模块所需的供电电压，即为DC-DC降压模块或者为变压器。正常情况下，设备以主电源1供电，当主电源1断开或异常等情况时，辅助电源2工作，辅助电源2包括直供电源、感应式取电等等特殊情况下产生的电能，本申请不做限定；充电调节电路6通过控制可以开通与关断充电电池或超级电容充电电路，同时可以调节充电电流大小，保证充电可控、可靠，充电电路还可以细化为多分支充电选择模式，更精细的调节充电模式；主控电路8由微控制芯片构成的最小系统组成，完成控制和通信功能，主控芯片主要包括：STM32系列、ARM系列、TH6X3X、HC32F460等等系列芯片；负载电路7包括各个应用电路模块，如：RS232电路、RS485电路、蓝牙模块、WIFI模块等通信模块；如：LED显示屏、LCD显示屏等显示模块；如：Flash、EEPROM、RAM、FRAM等数据存储与缓存芯片；如：继电器、脱扣器等控制拉合闸的开关模块；如：HT7038、HT7022E等计量芯片组成的量测模块，用来计量设备从端接入的负载大小；整机功耗监测电路9：用来监测设备本身工作时的实时功耗情况。其中，控制电路为3如图3所示，其中控制电路3包括：电阻Rd9、Rd10、R3、电容C1、Cd1、二极管D1、D2、MOS管D3、电源接口S1、第一接地端GND0、第二接地端GND1。其中作为一种优选的方案，主电源1为15V，辅助电源2为12V。其中，主电源1连接电源接口S1的第一端口，辅助电源2连接电源接口S1的第三端口，第一接地端GND0连接主电源1，及辅助电源2，及电源接口S1的第二端口。主电源1连接D1的第一端，及Rd9的第一端；Rd9的第二端连接Rd10的第一端、及C1的第一端，及D3的第一端；Rd10的第二端连接第二接地端GND1，及C1的第二端；D1的第二端连接D2的第一端，及Cd1的第一端，Cd1的第二端连接第二接地端GND1；D2的第二端连接D3的第二端；D3的第三端连接R3的第一端，R3的第二端连接辅助电源2；其中Vin为控制电路3的输出端，用于连接电能转换电路4。其中，当主电源1有效时，D3的栅极为高电平，D3管关断，辅助电源2不能够为主电路提供能量，主电源1通过D1进入DC-DC电源模块，为主电路提供能量。当主电源为0V时，D3的栅极为低电平，D3管导通，辅助电源2通过D3和D2进入DC-DC电源模块，为主电路提供能量。Rd9，Rd10组成分压电路，Rd9阻值为11kΩ，Rd10阻值为3.3KΩ，C1为滤波电容，容值为47pF，可根据实际电路进行容值的调整，R3为调理电路，阻值为12Ω，起到稳定波形的作用，可根据实际电路进行增减，D1和D2为4007二极管，阻挡15V与12V电源直接相连，防倒灌作用，D3为PMOS管，开关功能，型号为FDN304P，漏、源之间持续过流能力可达2.4A，可根据实际应用场景，选择功能匹配的MOS管。其中，电阻的阻值、电容的大小等仅是一种可以实现的方式，可以根据用户的需要，自行设置大小，本申请不做限定。在具体实施例中，充电调节电路6如图4所示，其中充电调节电路6包括：两种可选的充电电路模式：快充和慢充模式，可以根据实际电路要求，在细化限流电阻分支，增加调节分支，更精细化的调剂充电模式。本申请中的充电电路模式仅是一种可以实现的方式，但是不代表只要该种实现方式，可以根据用户的需要，自行调整充电电路模式的数量和功率。图中以超级电容为充电对象进行分析。快充电路由电阻R1、Ro1、Rd5、Rd6、Rd11、三极管Q1、Q3、Q4组成；其中，R1为1KΩ、Ro1为100KΩ、Rd5为10Ω、Rd6为10Ω、Rd11为10KΩ、Q1和Q4为BC807-40LT1G三极管，过电流能力最大可达600mA，Q3为3906三极管，起到开断控制Q4的作用。慢充电路由R2、Ro2、Rd7、Rd11、Q2、Q3、Q4组成。其中，R2为1KΩ、Ro2为100KΩ、Rd7为10Ω、Rd11为10KΩ、Q2和Q4为BC807-40LT1G三极管，过电流能力最大可达600mA,Q3为3906三极管，起到开断控制Q4的作用。D4为低导通压降二极管，用来防倒灌设计，型号为SS12器件，过电流能力强，可达1A，导通压降为0.3V左右，满足设计要求。Rd12和Rd13为分压电路，为主控芯片提供超级电容的电压采样信号，实时监测超级电容充电状态。其中主电源1或者辅助电源2经过电能转换电路4转换成充电调节电路6所需要的电压，其中，作为一种优选的方案，为5.7V。其中，5.7V连接Ro1的第一端、及Rd5的第一端、及Rd6的第一端、及Rd7的第一端、及Ro2的第一端、及Q3的第一端；Ro1的第二端连接R1的第一端、及Q1的第一端；R1的第二端连接主控电路3，用于接收主控电路3发出的CRL_quick信号；Rd5的第二端连接Rd6的第二端、及Q1的第二端；Rd7的第二端连接Q2的第一端；Ro2的第二端连接Q2的第二端、及R2的第一端；R2的第二端连接主控电路3，用于接收主控电路3发出的CRL_slow的信号；Q3的第二端连接Q1的第三端、及Q4的第一端、及Q2的第三端，Q3的第三端连接Rd11的第一端、及Q4的第二端；Rd11的第二端接第二接地端GND1；Q4的第三端连接D4的第一端；D4的第二端连接C2的第一端、及Rd12的第一端；C2的第二端连接第二接地端GND1；Rd12的第二端连接Rd13的第一端；Rd13的第二端连接第二接地端GND1。其中VSC为输出信号超级电容正极端电压，ADC-CAP为输出信号。刚上电过程中，主控芯片电平不稳，易造成误触发，导致快充电路工作，有可能短时吸收大电流，将电源电压拉低，导致电源故障，为防止此类情况的出现，电路中增加了Ro1，Ro2，用于限流和提供高电平。设备刚上电时，Q1、Q2的基极均为高电平，即Q1、Q2均截止，充电电路不工作。MCU稳定后，通过控制信号CRL_quick和CRL_slow输出低电平，来开启Q1、Q2管子，使得充电电路工作，但同一时刻Q1、Q2不能同时导通。Q3、Q4、Rd11用来调节刚开始充电阶段电路的平稳性。以快充电路为例进行分析，上电后，主控芯片达到稳定，通过采样Rd12和Rd13之间的分压信号ADC_CAP的幅值，来判断超级电容的容量，同时检测电源带载情况，经分析判定电源容量充足，同时超级电容容量不足，MCU控制Q1的基级信号CRL_quick为低，Q1导通，5.7V电源通过Rd5和Rd6及Q1作用于Q4的发射极，此时，由于Q4的基级与Q3的集电极相连，并通过Rd11接地，Q4为PNP管，刚上电时，Q4的基极为电平，Q4导通，使得5.7V电压经过Q4、D4迅速流入超级电容，此时超级电容容量不足，相当于过载，很容易将Q3的基级拉低，此时Q3导通，导致Q4的基级变为高电平，Q4关断，充电过程断开，Q3的基级又变为高电平，Q3关断，导致Q4的基级又恢复低电平，Q4导通，充电过程继续，如此反复循环调节，平衡充电过程。当超级电容电压逐渐增大到一定数值时，Q3将被关断，Q4一直导通，直到充电过程结束。快充电路与慢充电路的区别在于限流电阻的阻值不同，快充电路限流电阻为Rd5和Rd6，阻值为5Ω。慢充电路的限流电阻为Rd7，阻值为10Ω。比较了两种充电过程，快充模式下，充电时间为5~6分钟，超级电容电压从0V增长到4.7V的过程中，充电电流保持在120mA左右，之后随着电容电压的缓慢上升，充电电流快速降低，最终，超级电容电压达到5.46V时，充电电流降为0mA,充电过程结束。慢充模式下，充电时间为15~16分钟，超级电容电压从0V增长到4.7V的过程中，充电电流保持在60mA左右，之后随着电容电压的缓慢上升，充电电流快速降低，最终，超级电容电压达到5.46V时，充电电流降为0mA,充电过程结束。其中，充电电路6中的电阻器件等连接关系和大小，仅是一种可以实现的方式，可以根据用户需要自行设置。在具体实施例中，电能转换电路4如图5a、5b、5c所示，其中，电能转化电路4包括：二极管D5、D6、D7、D8、D9、D10、电容EC2、C3、C6、C5、C4、C9、C10、C11、C12、C7、C8、电阻R4、三极管Q5、低压差线性稳压器Up1、Up2。其中，上一级电路输出的5.7V电源及超级电容正极端电压VSC进入下一级电路，如图5a所示：VSC连接D5的第一端；D5的第二端连接EC2的第一端；EC2的第二端连接第二接地端GND1。5.7V连接D6的第一端、及D7的第一端；D6的第二端连接D5的第二端、及EC2的第一端；VSC连接D8的第一端；D8的第二端连接D7的第二端、及C3的第一端、及C6的第一端、及Up1的第三端口3；C3的第二端连接C6的第二端、及Up1的第二端口2、及Up1的第零端口0、及第二接地端GND1、及C5的第二端、及C4的第二端；Up1的第一端口1连接C5的第一端，及C4的第一端；其中Up1的第零端口0连接第二接地端GND1。其中，5.7V经过D6、D7二极管，利用特定二极管导通压降0.7V的特性，将5.7V电压降压为5V和5V_1两路电源。5V电源经电解电容EC2为后端继电器或脱口器等开关器件提供能量，EC2用来储能。其中，如图5b所示，5V_1连接C9的第一端、及C12的第一端、及Up2的第三端口3；C9的第二端连接C12的第二端、及Up2的第二端口2、及Up2的第零端口0、及第二接地端GND1、及C11的第二端、及C10的第二接地端；Up2的第二端口连接第二接地端GND1；Up2的第一端口连接C11的第一端、及C10的第一端、及D10的第一端。5V_1电源又分为两个支路，一路经低压差线性稳压器Up1后，输出4V电压；另一路通过经低压差线性稳压器Up2后，通过D10，输出3.3V_1。Up1和Up2型号为WL2852SQ40-3/TR，输出电压4V时，输出电流可达100mA。D5、D6、D7、D8既作为降压器件，又防止倒灌，阻止5.7V电源与超级电容两端电压直接短接，体现主次特性，当外接电压掉电时，超级电容为后级电路供电，短时提供数据传输、处理、保存等过程所需的能力，不能满足长时间用能要求，起到临时救济之用。D5、D6、D7、D8为M7，EC2容值为16V/470uf，C3、C4、C5、C6、C9、C10、C11、C12均为滤波电容，其中，C3、C4、C9、C10容值为10uF，C5、C6、C11、C12容值为0.1uF。D10为降压M7，利用自身导通压降0.7V特性，将4V降为3.3V。其中，如图5c所示，4V连接D9的第一端；D9的第二端连接C7的第一端、及R5的第一端；C7的第二端连接第二接地端GND1、及C8的第二端；R5的第二端连接Q5的第一端；Q5的第二端连接R4的第一端；Q5的第三端连接C8的第一端。为了合理化降低负载电路的功耗，实现负载模块有序关断与接通功能，通过如下电路实现此功能：前一级输出的4V电源通过D9降压，得到3.3V电压，并通过Q5作用输出3.3V_2电源，3.3V_2受控于主控芯片，主控芯片通过R4控制Q5的基极，实现对3.3V_2电压的控制，3.3V_2主要用来为蓝牙模块、量测模块、液晶背光、测温模块等电路提供电能，一般情况下，不需要这个功能模块运行时，主控芯片可以通过控制3.3V_PWR高电平实现对Q5的控制，使得Q5关断，实现降低功耗的目的。R4为限流电阻，阻值为2KΩ，C7、C8为滤波电容，容值为0.1uF，Q5为PNP三极管，型号为3906，作为可控开关。Up1，Up2均为LDO芯片，该芯片的外围电路基本相同。实际电路中，可存在多个此种类型的控制电路，用于管控不同功能、不同层级模块电路的电能输送，起到能耗调控的作用。此部分电路为自主设计电路，虽然基于三极管基本控制方式，但控制对象不同，作用层级不同，并通过多模式组合控制，形成精细的复杂管理策略。在具体实施例中，整机功耗检测电路9如图6所示，其中，整机功耗检测电路9包括电阻Rc1、Rc2、Rc3、Rc4、Rc5。其中，Rc1的第一端连接第二接地端GND1；Rc1的第二端连接第一接地端GND0；Rc2的第一端连接主电源1；Rc2的第二端连接Rc3的第二端；Rc3的第二端连接第二接地端；Rc4的第一端连接辅助电源2；Rc4的第二端连接Rc5的第一端；Rc5的第二端连接第二接地端GND1。其中，第一接地端为电源低GND0，第二接地端为整机地GND1。主电源15V，辅助电源12V。在整机地与电源地之间串入Rc1,阻值为1Ω，1%的精度，±25PPM贴片薄膜电阻。MCU的ADC引脚采样流过Rc1的实时电流值ADC_I，再通过欧姆定律，计算出整理功耗，通过实验验证，当Q5关断时，测得整机功耗为0.45W，得出流过Rc1的电流ADC_I的值在30mA左右；当Q5导通时，测得整机功耗为0.61W，得出流过Rc1的电流ADC_I的值在40mA左右，由此电流区间值可以设定合理的功耗区间来检测负载功耗。Rc2和Rc3组成主电源分压检测电路，Rc4和Rc5组成辅助电源电压检测电路，MCU的ADC采样通道分别采样分压信号ADC_15V和ADC_12V，用于判断主、副电源工作状态。在具体实施例中，获取采样电压值，作为一种优选方案，包括主电源1和辅助电源2，其中主电源15V，辅助电源12V。因此获取采样电压值为图中ADC_15V和ADC_12V。但是本实施例仅是一种优选的方案，可以根据用户的需要，自行设置电源的个数，本申请不限定。其中获取可以是实时获取，或者可以是当电子器件工作时获取，本申请不限定，可以根据用户的需要，自行设置。S11：根据采样电压值与预设电压值进行对比，判断电源是否存在。在具体实施例中，获取采样电压值，并且根据与预设电压的大小关系判断电源是否存在。S12：若不存在，则检测电子设备状态。在具体实施例中，当电源不存在时，检测电子设备的状态，并且还需要获取采样电流值，其中采样电流如图6所示，ADC_I，采样电流值根据欧姆定律，计算出整理功耗。S13：当电子设备处于工作状态时，调节电子设备的用能。S14：当电子设备处于关断状态时，关闭电子设备中的外设。在具体实施例中，电子设备在电源不存在时，拥有两种状态，其中电子设备处于关断时，表明超级电容欠压，不能实现脱口动作，记录该事件，并关断液晶、蓝牙、红外、测温等外设，节省功耗，并通过声、光报警等方式提醒运维人员手动关断设备。当电子设备依旧处于工作状态时，通过合理化调节限流电阻阻值配比实现设备本身自带的储能器件的精细化充电管理，改善设备用能占比，达到最佳的能耗管理，并且整体设备记录故障，需要上报用户，以便用户可以及时处理该事件。本申请所提供的一种电源供电处理方法，该方法包括：获取采样电压值，将采样电压值与预设电压值进行对比，判断电子设备是否上电、是否处于关断状态，当电子设备供电异常且处于关断状态时，通过设备本身的储能器件为设备提供能量并将设备的状态信息记录及上报，同时检测电子设备能耗信息，灵活调节、控制电路中相关功能模块的用能，合理化关闭电子设备中相应的模块电路用能，最大限度地减少非必要模块电路用能，延长电子设备的使用时间。当电子设备上电且处于工作状态时，通过合理化调节限流电阻阻值配比实现设备本身自带的储能器件的精细化充电管理，改善设备用能占比，达到最佳的能耗管理。在上述实施例的基础上，作为一种优选的实施例，若电源存在，则获取采样电流值，根据采样电流值与预设电流值的对比情况，控制超级电容选择对应的充电模式。在上述实施例中，整体电路拥有两种充电模式，并且充电模式对应的是充电电池或超级电容等储能元件，当电源存在时，获取采样电流值，及实施例中的ADC_I，根据采样电流值与预设电流值的对比情况，可以判断出此时的电子设备的状态，并且根据采样电流值得出此时电子设备的功耗，其中充电电池或超级电容等储能元件作为一种小的备用电源，根据采样电流值与预设电流值的对比情况，控制充电电容选择对应的充电模式，也就是根据对应的充电模式给充电电池或超级电容等储能元件充电，以便电子设备的使用。在本实施例中，当电源存在时，需要给超级电容充电，以便于当电源不存在时，延长电子设备的使用时间。在上述实施例的基础上，作为一种优选的实施例，采样电压值包括第一采样电压值和第二采样电压值，电源包括第一电源和第二电源，预设电压值包括第一预设电压值和第二预设电压值，还包括第三预设电压值；根据采样电压值与预设电压值进行对比，判断电源是否存在包括：若第一采样电压值大于第一预设电压值且第二采样电压值大于第二预设电压值，则第一电源和第二电源均存在；若第一采样电压值大于第一预设电压值且第二采样电压值等于第三预设电压值，则第一电源存在，第二电源不存在；若第一采样电压值等于第三预设电压值且第二采样电压值大于第二预设电压值，则第一电源不存在，第二电源存在。在具体实施例中，第一电源及主电源1，第二电源及辅助电源2。作为一种优选的方案，第一预设电压值为2.6V，第二预设电压值为2.2V，第三预设电压值为0V。但是本实施例中的第一预设电压值、第二预设电压值、第三预设电压值的大小仅是一种可以实现的方式，可以根据用户的需要，自行设置。其中，第一采样电压值ADC_15V，第二采样电压值ADC_12V。第一采样电压值ADC_15V大于第一预设电压值2.6且第二采样电压值ADC_12V大于第二预设电压值2.2V时，则说明第一电源和第二电源均满足条件，则说明第一电源和第二电源均存在；若第一采样电压值ADC_15V大于第一预设电压值2.6V且第二采样电压值ADC_12V等于第三预设电压值0V，则第一电源满足条件，第二电源为0，则说明第一电源存在，第二电源不存在；若第一采样电压值ADC_15V等于第三预设电压值0V且第二采样电压值ADC_12V大于第二预设电压值2.2V，则说明第一电源为0V，第二电源满足条件，则说明第一电源不存在，第二电源存在。本申请中，包含主电源1和辅助电源2，因此只有任意一个电源存在，即满足电源存在的条件。本实施例中的第一电源和第二电源均为一种可以实现的方式，但是不限于只有该种实现方式，可以根据用户的需要，自行选择电源的数量，对应的，预设值的数量也有相应的变化，本申请不限定。在上述实施例的基础上，作为一种优选的实施例，预设电流值包括第一预设电流值和第二预设电流值，充电模式包括第一充电模式和第二充电模式；根据采样电流值与预设电流值的对比情况，控制超级电容选择对应的充电模式包括：判断采样电流值是否大于第一预设电流值；若采样电流值大于第一预设电流值，则超级电容关闭充电模式；若采样电流值不大于第一预设电流值，则判断采样电流值是否大于第二预设电流值；若是，则控制超级电容选择第一充电模式；若否，则控制超级电容选择第二充电模式。在具体实施例中，作为一种优选的实施例，第一预设电流值可以为40mA，第二预设电流值为30mA，第一充电模式可以为上述实施例中的慢充模式，第二充电模式可以为上述实施例中的快充模式，采样电流值为ADC_I。其中，ADC_I大于40mA时，表明设备存在大负载工作情况，如：本装置处于拉合闸状态、通信状态等过程。MCU控制CRL_quick和CRL_slow信号输出高点平，此时不允许充电，即关闭充电模式。其中，30mA大于ADC_I，且ADC_I不小于40mA，表明整机功耗有所降低，但仍有耗能较大的耗能负载在工作，MCU控制CRL_slow信号输出低电平，CRL_quick信号，输出高电平，超级电容开始充电，且处于慢充状态。其中，ADC_I不大于30mA时，表明整机运行平稳，处于“静态工作”状态下，MCU控制CRL_quick信号输出低电平，CRL_slow信号输出高电平，超级开始充电，且处于快充状态下。需要说明的是，本实施例中的具体电流数值仅是一种可以实现的方式，但是不代表只有该种实现方式，可以根据用户的需要，自行设置。本实施例中，根据采样电流值的不同，判断出整机的状态，并根据整机的状态判断整机是快充或者慢充，延长电子设备，整机的寿命。在上述实施例的基础上，作为一种优选的实施例，根据采样电流值与预设电流值的对比情况，控制超级电容选择对应的充电模式之后，还包括：获取超级电容的电压值；当超级电容的电压值等于预设值时，则超级电容充电完成。在具体实施例中，作为一种优选的实施例，预设值为5.46V，超级电容的电压值Vcp。其中，MCU实时读取超级电容分压值ADC_CAP，得到超级电容电压值Vcp，Vcp达到5.46V时，表明超级电容充电完成，程序返回，退出充电模式。需要说明的是，本实施例中的具体预设值仅是一种可以实现的方式，但是不代表只有该种实现方式，可以根据用户的需要，自行设置。本实施例中，在充电过程中，获取电压值，当电压值满足预设值时，说明充电结束，并且退出充电模式，避免电充充电过多，影响设备的使用。综上述实施例，如图7所示，包括如下流程：S15：开始。S16：软件初始化。S17：判断ADC_15V是否大于2.6V且ADC_12V大于2.2V。S18：若是，则主、辅助电源均存在，且主电源存在时，辅助电源关断，并进入S24的步骤。S19：若否，则判断ADC_15V是否大于2.6V且ADC_12V等于0V。S20：若是，则主电源存在，辅助电源缺失，并进入S24的步骤。S21：若否，则判断ADC_15V是否等于0V且ADC_12V大于2.2V。S22：若是，则辅助电源存在，主电源缺失，并进入S24的步骤。S23：若否，则主电源与辅助电源均缺失，MCU读取ADC_I值，并检测设备的状态。S24：设备处于工作状态，MCU实时读取ADC_I值。S25：在S23步骤之后，判断设备是否处于关断状态。S26：若是，则MCU控制3.3V_PWR电器关键输出高电平，关断Q5,即关断液晶、蓝牙、红外、测温等外设，节省功耗，提高超级电容续航能力，并进入S39的步骤。S27：若否，则超级电容欠压，设备脱口故障，记录故障事件,并进入S39的步骤。S28：在S24步骤之后，判断ADC_I是否大于40mA。S29：若是，则存在大负载工作情况，MCU控制CRL_quick和CRL_slow信号输出高点平，此时不允许充电。S30：若否，则判断ADC_I是否不大于40mA，若ADC_I大于40mA，则返回S30的步骤。S31：若是，则判断ADC_I是否大于30mA，且不大于40mA。S32：若是，则MCU控制CRL_slow信号输出低电平，超级电容开始充电，且处于慢充状态，同时运行相关功能。S33：MCU读取超级电容分压值ADC_CAP，得到超级电容电压值Vcp。S34：判断Vcp是否等于5.46V。S35：若是，则超级电容充电完成，若否，则返回S33的步骤。S36：S31步骤后，若否，则MCU控制CRL_quick信号输出低电平，超级电容开始充电，且处于快充状态。S37：MCU读取超级电容分压值ADC_CAP，得到超级电容电压值Vcp。S38：判断Vcp是否等于5.46V，若是，则返回S35的步骤，若否，则返回S37的步骤。S39：返回。本实施例中，在系统上电后，主控芯片，如STM32系列、ARM系列、TH6X3X、HC32F460等等系列芯片）初始化后，采样主、副电源电压，包括四种情况。其中，情况一：MCU检测到主、辅助电压均存在，此时，主电压通过分压电阻Rd9，Rd10产生高电平控制关断D3，切断辅助电源供电；MCU读取流过Rc1的电流ADC_I采样值，判断整机功耗值。当ADC_I＞40mA时，表明设备存在大负载工作情况，如：本装置处于拉合闸状态、通信状态等过程。MCU控制CRL_quick和CRL_slow信号输出高点平，此时不允许充电；当ADC_I40mA时，再做具体判断：当30mA＜ADC_I40mA时，表明整机功耗有所降低，但仍有耗能较大的耗能负载在工作，MCU控制CRL_slow信号输出低电平，CRL_quick信号输出高电平，超级电容开始充电，且处于慢充状态， MCU实时读取超级电容分压值ADC_CAP，得到超级电容电压值Vcp，Vcp达到5.46V时，表明超级电容充电完成，程序返回，推出充电模式；当ADC_I30mA时，表明整机运行平稳，处于“静态工作”状态下，MCU控制CRL_quick信号输出低电平，CRL_slow信号输出高电平，超级开始充电，且处于快充状态下，MCU实时读取超级电容分压值ADC_CAP，得到超级电容电压值Vcp，Vcp达到5.46V时，表明超级电容充电完成，程序返回，退出充电模式；其中，情况二：MCU检测到主电源存在，辅助电源缺失，记录该事件，进入情况一判断整机功耗值环节，并完成接下来的流程处理；其中，情况三：MCU检测到主电源缺失，辅助电源存在，记录该事件，进入情况一判断整机功耗值环节，并完成接下来的流程处理；其中，情况四：MCU检测到主、辅助电源均缺失，记录该事件，读取ADC_I和ADC_CAP，并检测设备状态，当检测到设备处于断开状态，MCU控制3.3V_PWR网络标号对应的管脚输出高电平，关断Q5,即关断液晶、蓝牙、红外、测温等外设，节省功耗，提高超级电容续航能力；当检测到设备仍处于闭合状态时,表明超级电容欠压，不能实现脱口动作，记录该事件，MCU控制3.3V_PWR网络标号对应的管脚输出高电平，关断Q5,即关断液晶、蓝牙、红外、测温等外设，节省功耗，并通过声、光报警等方式提醒运维人员手动关断设备。本申请对电子设备采用了顺序执行和可选择性相结合的控制方式，并且本申请中，层级相等的电路模块之间采用同一个支路电源，不同层级的电路之间通过可控性设计，实现用能紧张情况下，关断非必要的用能模块，确保主用能正常工作，降低非正常情况下，非必要模块的能耗，提高电能利用率，而且本申请所提供的方法可应用于多种场合、多样化产品设计当中，如：智能电能表、智能断路器、在线取电监测设备、漏电保护设备等智能化新产品的电源设计管理中。本申请运用多节点监测和控制的技术，采用多层次电源设计理念，能够合理化改善电源供电及充电电路模式和结构，实时监测设备功耗及用能情况，精准管理各模块电路，为异常模式选择最优的调节方案，同时记录异常事件，采取相应措施改善异常状态，实现合理化用能调节与服务，提高电能的利用率、安全率、可靠性等优点。在上述实施例中，对于一种电源供电处理方法进行了详细描述，本申请还提供一种电源供电处理装置对应的实施例。需要说明的是，本申请从两个角度对装置部分的实施例进行描述，一种是基于功能模块的角度，另一种是基于硬件的角度。图8为本申请实施例提供的电源供电处理系统的模块图，该系统包括：获取模块31，用于获取采样电压值；判断模块32，用于根据采样电压值与预设电压值进行对比，判断电源是否存在；检测模块33，在判断模块判断为否的情况下，用于检测电子设备状态；调节模块34，在检测模块中的检测电子设备状态为工作状态时，用于调节电子设备的用能；关闭模块35，在检测模块中的检测电子设备状态为关断状态时，用于关闭电子设备中的外设。由于装置部分的实施例与方法部分的实施例相互对应，因此装置部分的实施例请参见方法部分的实施例的描述，这里暂不赘述。图9为本申请另一实施例提供的一种电源供电处理装置的结构图，如图9所示，一种电源供电处理装置包括：存储器20，用于存储计算机程序；处理器21，用于执行计算机程序时实现如上述实施例中所提到的一种电源供电处理方法的步骤。其中，处理器21可以包括一个或多个处理核心，比如4核心处理器、8核心处理器等。处理器21可以采用数字信号处理器 、现场可编程门阵列 、可编程逻辑阵列 中的至少一种硬件形式来实现。处理器21也可以包括主处理器和协处理器，主处理器是用于对在唤醒状态下的数据进行处理的处理器，也称中央处理器 ；协处理器是用于对在待机状态下的数据进行处理的低功耗处理器。在一些实施例中，处理器21可以集成有图像处理器 ，GPU用于负责显示屏所需要显示的内容的渲染和绘制。一些实施例中，处理器21还可以包括人工智能 处理器，该AI处理器用于处理有关机器学习的计算操作。存储器20可以包括一个或多个计算机可读存储介质，该计算机可读存储介质可以是非暂态的。存储器20还可包括高速随机存取存储器，以及非易失性存储器，比如一个或多个磁盘存储设备、闪存存储设备。本实施例中，存储器20至少用于存储以下计算机程序201，其中，该计算机程序被处理器21加载并执行之后，能够实现前述任一实施例公开的一种电源供电处理方法的相关步骤。另外，存储器20所存储的资源还可以包括操作系统202和数据203等，存储方式可以是短暂存储或者永久存储。其中，操作系统202可以包括Windows、Unix、Linux等。在一些实施例中，一种电源供电处理装置还可包括有显示屏22、输入输出接口23、通信接口24、电源25以及通信总线26。本领域技术人员可以理解，图9中示出的结构并不构成对一种电源供电处理装置的限定，可以包括比图示更多或更少的组件。本申请实施例提供的一种电源供电处理装置，包括存储器和处理器，处理器在执行存储器存储的程序时，能够实现如下方法：一种电源供电处理方法。最后，本申请还提供一种计算机可读存储介质对应的实施例。计算机可读存储介质上存储有计算机程序，计算机程序被处理器执行时实现如上述方法实施例中记载的步骤。可以理解的是，如果上述实施例中的方法以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上对本申请所提供的一种电源供电处理方法、系统、装置及介质进行了详细介绍。说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。对于实施例公开的装置而言，由于其与实施例公开的方法相对应，所以描述的比较简单，相关之处参见方法部分说明即可。应当指出，对于本技术领域的普通技术人员来说，在不脱离本申请原理的前提下，还可以对本申请进行若干改进和修饰，这些改进和修饰也落入本申请权利要求的保护范围内。还需要说明的是，在本说明书中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。
