标题title
一种基于区块链的用户信息处理方法及系统
摘要abst
本发明公开了一种基于区块链的用户信息处理方法及系统，所述处理方法包括以下步骤：用户通过用户端向应用程序节点发送用户注册请求，用户注册请求包括用户的第三身份信息和用户信息；应用程序节点向区块链发送第三身份信息，区块链验证和存储第三身份信息后，对各个应用程序节点通过指定的ISP链路发送验证结果；信息存储至区块链中时，配置安全策略引用入侵防御配置文件，对安全策略放行的数据信息进行检测。本发明通过将用户修改的信息保持在区块链中，并通过指定ISP链路更新信息至各个应用程序节点，在更新过程中对安全策略放行的数据信息进行检测，从而避免服务器被入侵导致用户信息泄漏，安全性好。
权利要求书clms
1.一种基于区块链的用户信息处理方法，其特征在于：所述处理方法包括以下步骤：S1：用户通过用户端向应用程序节点发送用户注册请求，用户注册请求包括用户的第三身份信息和用户信息；S2：应用程序节点向区块链发送第三身份信息，区块链验证和存储第三身份信息后，对各个应用程序节点通过指定的ISP链路发送验证结果；S3：验证结果为通过验证，则第三身份信息和用户信息存储至区块链中，验证结果为未通过验证，则应用程序节点向用户端发送第三身份信息有误的提示信息；S4：信息存储至区块链中时，配置安全策略引用入侵防御配置文件，对安全策略放行的数据信息进行检测。2.根据权利要求1所述的一种基于区块链的用户信息处理方法，其特征在于：用户信息包括用户的姓名、身份证号码、用户人脸特征的图像，用户更改用户信息时使用的身份信息为第一身份信息，区块链中存储的用户的身份信息为第二身份信息，用户注册应用程序时发送的身份信息称为第三身份信息。3.根据权利要求2所述的一种基于区块链的用户信息处理方法，其特征在于：所述区块链包括身份信息验证节点，身份信息验证节点存储有各用户的身份信息，身份信息验证节点用于对第三身份信息进行验证。4.根据权利要求3所述的一种基于区块链的用户信息处理方法，其特征在于：所述身份信息验证节点通过区块链中预先配置的人脸比对，对第三身份信息中的人脸特征与区块链中存储的各人脸特征进行比对，身份信息验证节点向应用程序节点发送验证结果；验证结果为通过验证时，应用程序节点将第三身份信息和用户信息存储至区块链中；验证结果为为未通过验证时，应用程序节点向用户端发送第三身份信息有误的提示信息。5.根据权利要求4所述的一种基于区块链的用户信息处理方法，其特征在于：所述区块链中，内网用户访问外网的报文，报文的源地址被NAT转换成公网地址，源端口被NAT转换成随机的非知名端口，多个内网用户同时使用公网地址。6.一种基于区块链的用户信息处理系统，所述处理系统用于实现权利要求1-5任一项所述的一种基于区块链的用户信息处理方法，其特征在于：包括配置模块、传输模块、防护模块以及处理模块；用户通过配置模块注册用户账号，用户注册请求发送至应用程序节点，应用程序节点向区块链发送第三身份信息，信息存储至区块链中时，防护模块配置安全策略引用入侵防御配置文件，对安全策略放行的数据信息进行检测，区块链验证和存储第三身份信息后，通过传输模块对应用程序节点发送验证结果，验证结果通过指定的ISP链路发送至各个应用程序节点。7.根据权利要求6所述的一种基于区块链的用户信息处理系统，其特征在于：所述处理模块用于处理、存储用户账号信息，验证结果为通过验证，将第三身份信息和用户信息存储至区块链中，验证结果为未通过验证，应用程序节点向配置模块发送第三身份信息有误的提示信息。8.根据权利要求6所述的一种基于区块链的用户信息处理系统，其特征在于：所述防护模块包括安全策略单元以及入侵防御单元，安全策略单元用于过滤网络数据包，入侵防御单元用于解决对内网发起的网络攻击的防御问题，且入侵防御单元基于浅层学习或深度学习进行网络入侵检测。9.根据权利要求8所述的一种基于区块链的用户信息处理系统，其特征在于：所述入侵防御单元基于浅层学习检测网络入侵包括以下步骤：设置循环次数t，层数为L，权值矩阵Wl和偏置ql随机设定，2≤l≤L；根据实际输出和期望输出求出误差；使用神经网络计算各层神经单元的权值矩阵的梯度ΔWl和偏置向量的梯度Δql；计算整体权值矩阵梯度ΔWl和偏置向量梯度Δql；更新权值矩阵和偏置向量/＞重复、、、步骤，直到训练结束。10.根据权利要求8所述的一种基于区块链的用户信息处理系统，其特征在于：所述入侵防御单元基于深度学习检测网络入侵包括以下步骤：设置循环次数t，层数为L，权值矩阵Wl和偏置ql随机设定，2≤l≤L；计算第k个隐含层的误差；根据第k个隐含层的误差计算神经单元的权值矩阵的梯度和偏置向量的梯度/＞计算权值矩阵梯度ΔWl和偏置向量梯度Δql；更新权值矩阵和偏置向量/＞在第k层训练结束后，若存在k+1个隐含层，k＝k+1，重复、、、步骤；对整体权值和偏置进行微调。
说明书desc
技术领域本发明涉及信息处理技术领域，具体涉及一种基于区块链的用户信息处理方法及系统。背景技术随着互联网的发展，用户可以使用同一用户信息登录多个应用程序，用户信息可以是账号名称、账号密码和手机号码等，然而，当用户想要更改用户信息时，用户需要分别在每个注册过的应用程序中将原用户信息更改为新用户信息，操作复杂，导致用户信息更改不方便。因此，公开号CN111783049A的中国专利公开了一种基于区块链的用户信息处理方法及系统，属于区块链技术领域。所述方法应用于区块链中的任一应用程序节点，所述区块链包括多个应用程序节点，所述方法包括：接收用户端发送的用户信息更改请求，所述用户信息更改请求携带有用户的第一身份信息、待更改的新用户信息；分别通过多个验证应用程序节点，对所述第一身份信息和所述新用户信息进行验证，所述验证应用程序节点为所述区块链中的应用程序节点；如果所述第一身份信息和所述新用户信息通过验证，则基于所述新用户信息对所述区块链中存储的所述用户的用户信息进行更改。采用本申请提供的技术方案，能够解决用户信息更改不方便的问题。上述技术存在以下不足：该信息处理方法通过新用户信息对所述区块链中存储的所述用户的用户信息进行更改，从而使得用户密码修改后，用户登陆过的应用程序中自动更改用户密码并登陆，无需用户再在其它应用程序中依次登陆，但是，修改后的用户密码更新至区块链中的其它应用程序节点，在这个过程中，对用户密码没有进行安全防护，容易导致用户信息泄漏，安全性差。发明内容本发明的目的是提供一种基于区块链的用户信息处理方法及系统，以解决背景技术中不足。为了实现上述目的，本发明提供如下技术方案：一种基于区块链的用户信息处理方法，所述处理方法包括以下步骤：S1：用户通过用户端向应用程序节点发送用户注册请求，用户注册请求包括用户的第三身份信息和用户信息；S2：应用程序节点向区块链发送第三身份信息，区块链验证和存储第三身份信息后，对各个应用程序节点通过指定的ISP链路发送验证结果；S3：验证结果为通过验证，则第三身份信息和用户信息存储至区块链中，验证结果为未通过验证，则应用程序节点向用户端发送第三身份信息有误的提示信息；S4：信息存储至区块链中时，配置安全策略引用入侵防御配置文件，对安全策略放行的数据信息进行检测。在一个优选的实施方式中，用户信息包括用户的姓名、身份证号码、用户人脸特征的图像，用户更改用户信息时使用的身份信息为第一身份信息，区块链中存储的用户的身份信息为第二身份信息，用户注册应用程序时发送的身份信息称为第三身份信息。在一个优选的实施方式中，所述区块链包括身份信息验证节点，身份信息验证节点存储有各用户的身份信息，身份信息验证节点用于对第三身份信息进行验证。在一个优选的实施方式中，所述身份信息验证节点通过区块链中预先配置的人脸比对，对第三身份信息中的人脸特征与区块链中存储的各人脸特征进行比对，身份信息验证节点向应用程序节点发送验证结果；验证结果为通过验证时，应用程序节点将第三身份信息和用户信息存储至区块链中；验证结果为为未通过验证时，应用程序节点向用户端发送第三身份信息有误的提示信息。在一个优选的实施方式中，所述区块链中，内网用户访问外网的报文，报文的源地址被NAT转换成公网地址，源端口被NAT转换成随机的非知名端口，多个内网用户同时使用公网地址。本发明还提供一种基于区块链的用户信息处理系统，包括配置模块、传输模块、防护模块以及处理模块；用户通过配置模块注册用户账号，用户注册请求发送至应用程序节点，应用程序节点向区块链发送第三身份信息，信息存储至区块链中时，防护模块配置安全策略引用入侵防御配置文件，对安全策略放行的数据信息进行检测，区块链验证和存储第三身份信息后，通过传输模块对应用程序节点发送验证结果，验证结果通过指定的ISP链路发送至各个应用程序节点。在一个优选的实施方式中，所述处理模块用于处理、存储用户账号信息，验证结果为通过验证，将第三身份信息和用户信息存储至区块链中，验证结果为未通过验证，应用程序节点向配置模块发送第三身份信息有误的提示信息。在一个优选的实施方式中，所述防护模块包括安全策略单元以及入侵防御单元，安全策略单元用于过滤网络数据包，入侵防御单元用于解决对内网发起的网络攻击的防御问题，且入侵防御单元基于浅层学习或深度学习进行网络入侵检测。在一个优选的实施方式中，所述入侵防御单元基于浅层学习检测网络入侵包括以下步骤：设置循环次数t，层数为L，权值矩阵Wl和偏置ql随机设定，2≤l≤L；根据实际输出和期望输出求出误差；使用神经网络计算各层神经单元的权值矩阵的梯度ΔWl和偏置向量的梯度Δql；计算整体权值矩阵梯度ΔWl和偏置向量梯度Δql；更新权值矩阵和偏置向量/＞重复、、、步骤，直到训练结束。在一个优选的实施方式中，所述入侵防御单元基于深度学习检测网络入侵包括以下步骤：设置循环次数t，层数为L，权值矩阵Wl和偏置ql随机设定，2≤l≤L；计算第k个隐含层的误差；根据第k个隐含层的误差计算神经单元的权值矩阵的梯度和偏置向量的梯度/＞计算权值矩阵梯度ΔWl和偏置向量梯度Δql；更新权值矩阵和偏置向量/＞在第k层训练结束后，若存在k+1个隐含层，k＝k+1，重复、、、步骤；对整体权值和偏置进行微调。在上述技术方案中，本发明提供的技术效果和优点：1、本发明通过将用户修改的信息保持在区块链中，并通过指定ISP链路更新信息至各个应用程序节点，在更新过程中对安全策略放行的数据信息进行检测，从而避免服务器被入侵导致用户信息泄漏，安全性好。2、本发明通过部署源NAT功能，内网用户访问外网的报文穿过本系统时，报文的源地址会被NAT转换成公网地址，源端口会被NAT转换成随机的非知名端口，这样一个公网地址就可以同时被多个内网用户使用，实现公网地址的复用，解决了大量用户同时访问外网的问题，从而提高数据的更新速度。3、本发明通过对多用户的信息进行融合、压缩处理，从而减少数据的传输量，并且当数据传输量减小时，可进一步提高防护模块的对数据的检测量，不仅减轻防护模块的工作负荷，而且降低防护模块的检测误差，进一步提高系统的安全性。4、本发明基于浅层学习的入侵检测算法使用带标记的训练集对浅层学习网络进行训练，训练之后使用无标记数据进行测试，初始输入和输出都需要预先设置，输入数据在经过多个隐含层的运算之后达到输出层，输出结果和期望结果的误差反向进行传递，对各个隐含层的权值进行修改，最终使得权值趋于稳定，误差在可接受范围之内。5、本发明通过对原始数据进行必要处理，使得数据能够符合输入标准，数据输入则是将经过预处理的数据按照输入的要求输入数据，特征提取使用特征提取进行提取，分类是将经过深度学习提取出的抽象特征使用分类器进行分类，经过分类器分类的结果再进行整理，得到该模型对入侵数据检测的结果，深度学习具有强大的特征提取能力，能够提取出入侵数据中的抽象的特征属性。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明中记载的一些实施例，对于本领域普通技术人员来讲，还可以根据这些附图获得其他的附图。图1为本发明处理方法的工作流程图。图2为本发明的系统模块图。图3为本发明处理系统的工作流程图。图4为本发明中防护模块的架构示意图。图5为本发明安全策略单元的工作流程图。图6为本发明入侵防御单元的工作流程图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例1请参阅图1所示，本实施例所述一种基于区块链的用户信息处理方法，所述处理方法包括以下步骤：用户通过用户端向应用程序节点发送用户注册请求；其中，用户注册请求携带有用户的第三身份信息和用户信息。当用户想要注册某一应用程序时，该用户可以对用户端执行预设注册操作，预设注册操作可以是在该应用程序的预设注册页面填写用户的第三身份信息和用户信息后，点击预设的提交图标，预设注册操作也可以是在该应用程序的预设注册页面填写用户的第三身份信息和用户信息后，输入表示提交的命令代码，响应于预设注册操作，用户端可以生成用户注册请求，再向该应用程序对应的应用程序节点发送用户注册请求。身份信息可以是用户的姓名、身份证号码、包含用户人脸特征的图像等，为了便于区分，将用户更改用户信息时使用的身份信息称为第一身份信息，将区块链中存储的用户的身份信息称为第二身份信息，将用户注册应用程序时发送的身份信息称为第三身份信息，第一身份信息、第二身份信息和第三身份信息可以为相同的身份信息，也可以为不同的身份信息。应用程序节点向区块链中的身份信息验证节点发送第三身份信息。区块链还可以包含身份信息验证节点，身份信息验证节点可以存储有各用户的身份信息，身份信息验证节点可以是全国居民身份信息查询系统的服务器端。应用程序节点可以在接收到用户注册请求后，向区块链中的身份信息验证节点发送第三身份信息。身份信息验证节点对第三身份信息进行验证。如果第三身份信息包括包含用户人脸特征的图像，身份信息验证节点可以通过区块链中预先配置的人脸比对算法，对第三身份信息包含的人脸特征与区块链中存储的各人脸特征进行比对，从而判断第三身份信息是否通过验证。如果第三身份信息包括姓名，身份信息验证节点验证姓名的过程与相关技术中任一电子设备对姓名进行验证的过程类似，此处不再赘述。类似的，如果第三身份信息包括身份证号码，身份信息验证节点验证身份证号码的过程与相关技术中任一电子设备对身份证号码进行验证的过程类似，此处不再赘述。身份信息验证节点向应用程序节点发送验证结果。验证结果为通过验证，或未通过验证。如果验证结果为通过验证，则应用程序节点可以将第三身份信息和用户信息存储至区块链中。如果验证结果为未通过验证，则应用程序节点可以向用户端发送第三身份信息有误的提示信息。身份信息验证节点验证通过第三身份信息后，应用程序节点还可以对用户信息发起验证，应用程序节点可以在用户信息通过验证后，将第三身份信息和用户信息存储至区块链中应用程序节点可以接收用户端发送的用户的第三身份信息和用户信息，然后，向区块链中的身份信息验证节点发送第三身份信息，以使身份信息验证节点对第三身份信息进行验证。如果身份信息验证节点验证通过第三身份信息，则应用程序节点可以将第三身份信息和用户信息存储至区块链中。由此，一方面，通过将用户的第三身份信息和用户信息打包存储至区块链中，可以实现在注册区块链所包含的某一应用程序后，用户即可使用同一用户信息登录区块链包含的其他应用程序，方便用户快捷的注册和使用各应用程序。另一方面，便于后续基于区块链实现用户信息更改。由于涉及到在区块链中保存用户的身份信息和用户信息等用户的私密信息，通过特定的ISP链路进行转发，需要部署地址转换功能，对于特定的包直接转换到ISP对应的接口上。为防止公网发起的网络攻击，需要部署入侵防御功能，入侵防御功能的实现是在配置安全策略的时候引用入侵防御配置文件，即对安全策略放行的数据进行检测。为保证内网大量用户能够通过有限的公网地址访问外网，需要部署源NAT功能，内网用户访问外网的报文穿过本系统时，报文的源地址会被NAT转换成公网地址，源端口会被NAT转换成随机的非知名端口，这样一个公网地址就可以同时被多个内网用户使用，实现公网地址的复用，解决了大量用户同时访问外网的问题。为将内网服务器资源提供给公网用户访问，需要在本系统上部署目的地址转化功能，将服务器的私网服务映射到公网。用户一般是通过域名来访问内网服务器的，服务器区域部署了DNS服务器为用户将域名解析成内网服务器的公网地址，该信息处理方法通过将用户修改的信息保持在区块链中，并通过指定ISP链路更新信息至各个应用程序节点，在更新过程中对安全策略放行的数据信息进行检测，从而避免服务器被入侵导致用户信息泄漏，安全性好。每个验证应用程序节点可以在第一身份信息和新用户信息均通过验证的情况下，向响应应用程序节点发送表示验证通过的验证结果。如果第一身份信息或新用户信息未通过验证，则验证应用程序节点可以向响应应用程序节点发送表示未通过验证的验证结果。响应应用程序节点可以在接收到各验证应用程序节点发送的验证结果后，基于接收到的多个验证结果，确定第一身份信息和新用户信息是否通过验证。如果响应应用程序节点基于接收到的验证结果，确定第一身份信息和新用户信息均通过验证，则响应应用程序节点可以基于新用户信息更改区块链中存储的用户的用户信息。如果第一身份信息或新用户信息未通过验证，则响应应用程序节点可以向用户端发送验证失败的提示信息。应用程序节点可以接收用户端发送的用户信息更改请求，用户信息更改请求携带有用户的第一身份信息、待更改的新用户信息；分别通过区块链中的多个验证应用程序节点，对第一身份信息和新用户信息进行验证；如果第一身份信息和新用户信息通过验证，则基于新用户信息对区块链中存储的用户的用户信息进行更改。由于只需在区块链中更改一次新用户信息，即可实现更改各应用程序中该用户的用户信息，因此，无需用户分别在每个应用程序中进行用户信息更改，从而能够解决用户信息更改不方便的问题。实施例2请参阅图2和图3所示，本实施例所述一种基于区块链的用户信息处理系统，包括配置模块、传输模块、防护模块以及处理模块；其中，配置模块：用户通过配置模块注册用户账号，用户注册请求发送至应用程序节点，应用程序节点向区块链发送第三身份信息。当用户想要注册某一应用程序时，该用户可以对用户端执行预设注册操作，预设注册操作可以是在该应用程序的预设注册页面填写用户的第三身份信息和用户信息后，点击预设的提交图标，预设注册操作也可以是在该应用程序的预设注册页面填写用户的第三身份信息和用户信息后，输入表示提交的命令代码，响应于预设注册操作，用户端可以生成用户注册请求，再向该应用程序对应的应用程序节点发送用户注册请求。身份信息可以是用户的姓名、身份证号码、包含用户人脸特征的图像等，为了便于区分，将用户更改用户信息时使用的身份信息称为第一身份信息，将区块链中存储的用户的身份信息称为第二身份信息，将用户注册应用程序时发送的身份信息称为第三身份信息，第一身份信息、第二身份信息和第三身份信息可以为相同的身份信息，也可以为不同的身份信息。如果第三身份信息包括包含用户人脸特征的图像，身份信息验证节点可以通过区块链中预先配置的人脸比对算法，对第三身份信息包含的人脸特征与区块链中存储的各人脸特征进行比对，从而判断第三身份信息是否通过验证。如果第三身份信息包括姓名，身份信息验证节点验证姓名的过程与相关技术中任一电子设备对姓名进行验证的过程类似，此处不再赘述。类似的，如果第三身份信息包括身份证号码，身份信息验证节点验证身份证号码的过程与相关技术中任一电子设备对身份证号码进行验证的过程类似，此处不再赘述。传输模块：区块链验证和存储第三身份信息后，通过传输模块对应用程序节点发送验证结果，验证结果通过指定的ISP链路发送至各个应用程序节点。防护模块：信息存储至区块链中时，配置安全策略引用入侵防御配置文件，对安全策略放行的数据信息进行检测。处理模块：用于处理、存储用户账号信息，验证结果为通过验证，将第三身份信息和用户信息存储至区块链中，验证结果为未通过验证，应用程序节点向配置模块发送第三身份信息有误的提示信息，通过指定的ISP链路发送至各个应用程序节点，可提高数据信息传输的私密性，并且配置安全策略引用入侵防御配置文件，对安全策略放行的数据信息进行检测，可进一步防止系统被外网入侵，从而提高处理系统的安全性。每个验证应用程序节点可以在第一身份信息和新用户信息均通过验证的情况下，向响应应用程序节点发送表示验证通过的验证结果。如果第一身份信息或新用户信息未通过验证，则验证应用程序节点可以向响应应用程序节点发送表示未通过验证的验证结果。响应应用程序节点可以在接收到各验证应用程序节点发送的验证结果后，基于接收到的多个验证结果，确定第一身份信息和新用户信息是否通过验证。如果响应应用程序节点基于接收到的验证结果，确定第一身份信息和新用户信息均通过验证，则响应应用程序节点可以基于新用户信息更改区块链中存储的用户的用户信息。如果第一身份信息或新用户信息未通过验证，则响应应用程序节点可以向用户端发送验证失败的提示信息。应用程序节点可以接收用户端发送的用户信息更改请求，用户信息更改请求携带有用户的第一身份信息、待更改的新用户信息；分别通过区块链中的多个验证应用程序节点，对第一身份信息和新用户信息进行验证；如果第一身份信息和新用户信息通过验证，则基于新用户信息对区块链中存储的用户的用户信息进行更改。由于只需在区块链中更改一次新用户信息，即可实现更改各应用程序中该用户的用户信息，因此，无需用户分别在每个应用程序中进行用户信息更改，从而能够解决用户信息更改不方便的问题。实施例3请参阅图4所示，所述防护模块将信息存储至区块链中时，配置安全策略引用入侵防御配置文件，对安全策略放行的数据信息进行检测；防护模块包括安全策略单元以及入侵防御单元；其中，安全策略单元：用于实现基于主机地址的网络数据包的过滤、基于子网的网络数据包过滤、基于接口的网络数据过滤、基于协议的网路数据过滤；基于主机地址的网络数据包的过滤功能可以解决对内网的某些IP进行访问控制的问题，通过对主机地址的访问控制，使得基于主机地址进行了访问权限的划分，如果需要对同一网段的大量用户进行访问控制，显然逐一添加主机地址是不可取的，这是可以利用基于子网的网路数据过滤选项，可以很方便的对某一个网段内的数据包进行访问控制；分为多个部分，而多个用户之间根据业务的不同对应的访问权限也不同，这时候可以通过接口进行安全域的划分，不同的用户对应不同的接口，划分安全域之后通过配置基于接口访问控制策略，可以很好的进行用户之间的一个权限划分。请参阅图5所示，所述安全策略单元实现了对网络数据报文的过滤功能，通过添加相应的过滤规则可以实现针对地址、接口、服务、协议以及端口的访问控制，安全策略访问控制是依赖于ip_conntrack_info类，ip_conntrack__info类包括了连接跟踪所有的连接状态，对于已经建立的ESTABLISHED状态的数据包系统会直接放过，按照前一个包的处理方式进行处理，对于数据的访问控制策略主要是通过target和match来实现的，因此访问控制功能与ip_match类和ip_mark_target_info是相关的，安全策略访问控制功能的实现主要通过Netfilterl201框架来实现的，Netfilter的架构就是在网络数据包的流经路径上流程的若干位置放置了一些检测点，而在每个检测点注册了一些回调函数进行处理，例如包过滤、地址转换等功能，并且用户还可以根据需求添加自定义处理模块。入侵防御单元：用于解决对内网发起的网络攻击的防御问题，入侵防御主要包括数据获取、数据预处理、数据检测、告警日志产生四个方面，通过接口从网络获取数据，对获取的数据包进行解析，解析完成后进行预处理，编码成统一的格式，然后根据添加的防御规则对数据包进行匹配，如果当前数据包与配置的入侵防御策略匹配，那么就会产生告警日志；数据获取：从网卡获取网络数据包，由于电子政务信息安全系统是作为网关部署在的内网出口出的，因此主要是从入接口上获取访问内网的网络数据包，此时网卡应该工作在混杂模式，以保证入侵防御模块能够获取比较完整的数据；数据预处理：获取到数据之后会进行一个统一格式的转换，转换为后面的匹配规则做准备；数据检测：入侵防御规则的数量是衡量入侵防御功能的一个很重要的方面，数据检测项主要是通过对网络数据包的分析，判断是否与所配置的防御规则相匹配，如果匹配就会启动产生日志，以此来提示网络维护人员网络正在受到攻击，入侵防御功能实现了针对内网的一个网络攻击防御功能。入侵防御单元基于Snort入侵防御引擎实现的，Snort类为主引擎，它依赖于Pfring类、Parser类、Decode类、Encode类Detect类、以及Log类；Pfring类是结合Libcap库用于从网卡抓取数据包的，parser类主要完成对从网卡抓取到的数据包进行解析，它根据各种协议的格式解析抓取的数据包，按照网络协议的层次模型，从下到上逐层对网络数据包进行解码，并放在对应的数据结构中；Decode类是在预处理之前对数据包进行处理；调用检测类Detect进行规则匹配实现检测，如果实现匹配，那么调用类log进行告警日志产生。请参阅图6所示，入侵防御单元利用开源工具snort实现，利用snort可以构建一个基于libpcap采集数据的网络数据入侵防御系统，snort通过对网络数据的监听，利用入侵防御规则实现对网络入侵的检测，通过配置添加入侵防御规则，sort进行匹配实现对网络入侵的防御。开源工具snort包括以下功能：数据包嗅探：进行数据包的获取，然后对网络进行识别；预处理：通过对应的插件对获取到的数据进行分析，分析其中的IP碎片、端口扫描等行为，分析完成之后进行下一环节检测；检测：检测引擎接收到预处理器处理完的数据后依据前面添加的检测规则进行数据包的检测，若是某条规则与数据包中的内容相匹配，就会马上通知报警模块进行告警，在处理器完成对数据包的处理之后，检测引擎通过添加的检测规则对数据包进行匹配，如果发现当前网络数据包与规则库中的规则有匹配项时，就会进行告警。告警/日志：用于检测结果的输出，当某条网络数据包匹配规则是就会触发告警模块。实施例4所述入侵防御单元基于浅层学习算法或深度学习算法进行网络入侵检测；其中，神经网络属于浅层学习，算法步骤如下：设置循环次数t，层数为L，权值矩阵Wl和偏置ql随机设定，2≤l≤L；根据实际输出和期望输出求出误差；使用BP算法计算各层神经单元的权值矩阵的梯度ΔWl和偏置向量的梯度Δql；计算整体权值矩阵梯度ΔWl和偏置向量梯度Δql；更新权值矩阵和偏置向量/＞重复、、、步骤，直到训练结束。基于浅层学习的入侵检测算法使用带标记的训练集对浅层学习网络进行训练，训练之后使用无标记数据进行测试，初始输入和输出都需要预先设置，输入数据在经过多个隐含层的运算之后达到输出层，输出结果和期望结果的误差反向进行传递，对各个隐含层的权值进行修改，最终使得权值趋于稳定，误差在可接受范围之内。入侵数据具有多维性的特点，深度学习具有强大的特征提取能力，能够提取出入侵数据中的抽象的特征属性；从入侵检测结构模型可以知该结构分为数据预处理、数据输入、特征提取、分类和结果整理五个部分；深度学习进行特征提取的流程如下:设置循环次数t，层数为L，权值矩阵Wl和偏置ql随机设定，2≤l≤L。计算第k个隐含层的误差；根据第k个隐含层的误差计算该层神经单元的权值矩阵的梯度和偏置向量的梯度/＞计算权值矩阵梯度ΔWl和偏置向量梯度Δql；更新权值矩阵和偏置向量/＞在第k层训练结束后，若存在k+1个隐含层，k＝k+1，重复、、、步骤；对整体权值和偏置进行微调。数据预处理对原始数据进行必要处理，使得数据能够符合输入标准，数据输入则是将经过预处理的数据按照输入的要求输入数据，特征提取使用特征提取进行提取，分类是将经过深度学习提取出的抽象特征使用分类器进行分类，经过分类器分类的结果再进行整理，得到该模型对入侵数据检测的结果，深度学习具有强大的特征提取能力，能够提取出入侵数据中的抽象的特征属性。上述实施例，可以全部或部分地通过软件、硬件、固件或其他任意组合来实现。当使用软件实现时，上述实施例可以全部或部分地以计算机程序产品的形式实现。所述计算机程序产品包括一个或多个计算机指令或计算机程序。在计算机上加载或执行所述计算机指令或计算机程序时，全部或部分地产生按照本申请实施例所述的流程或功能。所述计算机可以为通用计算机、专用计算机、计算机网络、或者其他可编程装置。所述计算机指令可以存储在计算机可读存储介质中，或者从一个计算机可读存储介质向另一个计算机可读存储介质传输，例如，所述计算机指令可以从一个网站站点、计算机、服务器或数据中心通过有线方式向另一个网站站点、计算机、服务器或数据中心进行传输。所述计算机可读存储介质可以是计算机能够存取的任何可用介质或者是包含一个或多个可用介质集合的服务器、数据中心等数据存储设备。所述可用介质可以是磁性介质、光介质、或者半导体介质。半导体介质可以是固态硬盘。应理解，本文中术语“和/或”，仅仅是一种描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况，其中A，B可以是单数或者复数。另外，本文中字符“/”，一般表示前后关联对象是一种“或”的关系，但也可能表示的是一种“和/或”的关系，具体可参考前后文进行理解。本申请中，“至少一个”是指一个或者多个，“多个”是指两个或两个以上。“以下至少一项”或其类似表达，是指的这些项中的任意组合，包括单项或复数项的任意组合。例如，a，b，或c中的至少一项，可以表示：a，b，c，a-b，a-c，b-c，或a-b-c，其中a，b，c可以是单个，也可以是多个。应理解，在本申请的各种实施例中，上述各过程的序号的大小并不意味着执行顺序的先后，各过程的执行顺序应以其功能和内在逻辑确定，而不应对本申请实施例的实施过程构成任何限定。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件、或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的系统、装置和单元的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。在本申请所提供的几个实施例中，应该理解到，所揭露的系统、装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。所述功能如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上所述，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以所述权利要求的保护范围为准。
