标题title
一种双三相电机与开绕组电机在线切换拓扑及其控制方法
摘要abst
本发明提供了一种双三相电机与开绕组电机在线切换拓扑及其控制方法，涉及电机结构及控制技术领域。本发明提出一种新的电机绕组拓扑，并通过使用两个双向晶闸管可以实现两种模式之间的平滑切换；且无需改变原有调制策略。此外，两组逆变器的功率比可以通过调整双三相模式下的电流比和开绕组模式下的电压比来改变。当发生故障时，对于缺相故障，双三相模式将被用于提供足够的电流控制维度，通过电流补偿来实现容错控制，并且无需改变控制框架。当发生开关管开路或短路故障时，开绕组模式将被用于提供对称相电流，通过在线调整故障扇区中的参考电压矢量来进行容错控制，并且故障逆变器中的剩余健全开关管被充分利用来实现平稳运行。
权利要求书clms
1.一种双三相电机与开绕组电机在线切换拓扑，其特征在于，对电机绕组进行在线绕组重构，得到能进行双三相结构与开绕组结构之间在线切换的电机绕组拓扑；其中，电机绕组包括：第一三相绕组和第二三相绕组；第一三相绕组包括：A相绕组、B相绕组、C相绕组；第二三相绕组包括：E相绕组、F相绕组和D相绕组；其中，A相绕组与E相绕组、B相绕组与F相绕组、C相绕组与D相绕组之间具有相同的相位偏移角度；在线绕组重构：将A相绕组和E相绕组进行连接，得到A-E绕组；将B相绕组和F相绕组进行连接，得到B-F绕组；将C相绕组和D相绕组进行连接，得到C-D绕组；在A-E绕组连接点和B-F绕组连接点之间，B-F绕组连接点和C-D绕组连接点之间分别设置可控开关，得到电机绕组拓扑；双三相结构：将电机绕组拓扑的两个可控开关连通，此时A相绕组、E相绕组、B相绕组、F相绕组、C相绕组和D相绕组具有共同的中性点，得到双三相结构；开绕组结构：将电机绕组拓扑的两个可控开关断开，此时A-E绕组、B-F绕组和C-D绕组均相互独立，得到开绕组结构。2.根据权利要求1所述的一种双三相电机与开绕组电机在线切换拓扑，其特征在于，可控开关通过双向晶闸管进行设置。3.根据权利要求2所述的一种双三相电机与开绕组电机在线切换拓扑，其特征在于，还设置有逆变器I和逆变器II；A-E绕组、B-F绕组、C-D绕组分别连接在逆变器I与逆变器II之间。4.一种双三相电机与开绕组电机在线控制方法，运用于如权利要求1至权利要求3任一项所述的一种双三相电机与开绕组电机在线切换拓扑中，其特征在于，在未发生故障时，通过控制两个可控开关的连通/断开，实现双三相模式/开绕组模式的工作模式自由切换。5.根据权利要求4所述的一种双三相电机与开绕组电机在线控制方法，其特征在于，在开绕组模式下，通过如下步骤进行功率调整：功率调整切换至开绕组模式；采集当前电机转速n，并设定参考电机转速n*；通过PI控制器进行转速偏差控制计算，并投射至d-q平面，得到参考电流iq*和id*；采集当前各相电流iA、iB、iC，并投射至d-q平面，得到当前d-q平面电流id和iq；通过参考电流iq*和id*、当前d-q平面电流id和iq通过无差拍控制算法得到参考电压uq*和ud*；将参考电压uq*和ud*平均分配至α1-β1坐标和α2-β2坐标，并使相位偏移角度保持180°相位差，得到α1-β1坐标的空间电压矢量Uα1和Uβ1，α2-β2坐标的空间电压矢量Uα2和Uβ2；将空间电压矢量Uα1和Uβ1进行极坐标转换，得到V1和θ1；将空间电压矢量Uα2和Uβ2进行极坐标转换，得到V2和θ2；将V1和θ1、V2和θ2分别进行空间矢量调制，并分别输入逆变器I和逆变器II；逆变器I和逆变器II分别根据输入的参考电压的比值调整功率比，完成一次功率调整。6.根据权利要求5所述的一种双三相电机与开绕组电机在线控制方法，其特征在于，在双三相模式下，通过如下步骤进行功率调整：功率调整切换至双三相模式；采集当前电机转速n，并设定参考电机转速n*；通过PI控制器进行转速偏差控制计算，并投射至d-q平面和x-y平面，得到参考电流iq*、id*、ix*和iy*；采集当前各相电流iA、iB、iC、iD、iE、iF，并投射至d-q平面和x-y平面，得到当前d-q平面和x-y平面电流id, iq和ix, iy；通过参考电流iq*、id*、ix*和iy* 、当前d-q平面和x-y平面电流id, iq和ix, iy通过无差拍控制算法计算得到参考电压uq*、ud*、ux*和uy*；将参考电压uq*、ud*投射至α-β坐标，得到参考电压uα*、uβ*；将参考电压uα*、uβ*、ux*和uy*变换至α1-β1坐标和α2-β2坐标，得到α1-β1坐标的空间电压矢量Uα1和Uβ1，α2-β2坐标的空间电压矢量Uα2和Uβ2；其中，将参考电压uα*、uβ*、ux*和uy*变换为各相参考电压，再进行坐标变换；将空间电压矢量Uα1和Uβ1进行极坐标转换，得到V1和θ1；将空间电压矢量Uα2和Uβ2进行极坐标转换，得到V2和θ2；将V1和θ1、V2和θ2分别进行空间矢量调制，并分别输入逆变器I和逆变器II；逆变器I和逆变器II分别根据输入的参考电流的比值调整功率比，完成一次功率调整。7.根据权利要求6所述的一种双三相电机与开绕组电机在线控制方法，其特征在于，在发生故障时，根据故障类型对工作模式进行选择性切换：故障类型为缺相故障：将工作模式选择性切换至双三相模式，并进行双三相容错控制；故障类型开关管故障：将工作模式选择性切换至开绕组模式，并进行开绕组容错控制。8.根据权利要求7所述的一种双三相电机与开绕组电机在线控制方法，其特征在于，双三相容错控制基于电流补偿，通过在线调整参考电流实现电机故障状态下的平稳运行；双三相容错控制通过如下步骤进行：通过Clark变换将六相电流通过α1-β1坐标和α2-β2坐标进行表示，得到六相电流关系式；通过结合Park变换、VSD解耦矩阵的逆矩阵和六相电流关系式进行计算，得到参考电流在双α1-β1坐标和α2-β2坐标中的关系式；获取发生故障的缺相，根据对应缺相的电流为零，零序电流为零；获得新的电流约束条件；根据等效旋转磁动势前后不变原则和新的电流约束条件，通过调整参考电流对电流损失进行补偿；得到在双α1-β1坐标和α2-β2坐标中的容错参考电流关系式；结合VSD解耦矩阵、六相电流关系式和容错参考电流关系式的逆变换进行计算，得到x-y平面的容错参考电流关系式；按照容错参考电流关系式，对功率调整过程中的ix*和iy*进行更新，完成一次双三相容错控制。9.根据权利要求8所述的一种双三相电机与开绕组电机在线控制方法，其特征在于，开绕组容错控制通过如下步骤进行：对故障开关管进行定位，确定缺失的电压参考矢量：若逆变器I中的电压参考矢量缺失，则将逆变器II对应的参考电压提高一倍；若逆变器II中的电压参考矢量缺失，则将逆变器I对应的参考电压提高一倍。10.根据权利要求9所述的一种双三相电机与开绕组电机在线控制方法，其特征在于，通过无差拍控制模块计算双三相模式/开绕组模式的参考电压；其中，参考电压与预测电流关联，预测电流与当前电流和当前电压关联；在双三相模式下，电流预测公式和参考电压公式如下：在开绕组模式下，电流预测公式和参考电压公式如下：其中，idk和idk+1分别为变量id在k和k+1时刻的瞬时值，同理对于ud，uq，ux，uy，ix，iy，iq；Ts为采样周期，Ld和Lq为d轴和q轴上的定子电感，ωr为转子转速，ψf为永磁体磁链幅值，Lls定子漏感，Rs为定子电阻。
说明书desc
技术领域本发明涉及电机结构及控制技术领域，尤其涉及一种双三相电机与开绕组电机在线切换拓扑及其控制方法。背景技术随着科技的进步和技术的发展，越来越多的工作场景需求电机具备更高的可靠性和功率密度；由此，多相电机和开绕组电机越来越受到人们的关注。多相电机：即通过增加相数使电机具有低转矩脉动、高功率密度和高可靠性等优点；其中，双三相电机应用较多，已经广泛应用于电动汽车、飞机系统、船舶推进和风力发电等领域。开绕组电机：即通过打开绕组星型连接的电机的中性点得到的并由两个三相电压型逆变器供电；因此，开绕组电机具有多级特性和更多冗余性等优点。双三相电机驱动和开绕组电机驱动都具有优异的控制灵活性和容错能力。在控制灵活性方面，双三相电机结构可以通过改变两个三相绕组的电流比来确定两个三相逆变器的功率权重；而开绕组电机结构可以通过改变相应参考电压的电压比来调整两个三相逆变器的功率权重。在容错能力方面，发生缺相故障的双三相电机仍具有足够的电流控制维度，可以用于优化容错状态下运行的转矩和损耗；发生开关管开路或短路故障的开绕组电机仍能保证容错运行中的对称相电流。由于结构上的不同，双三相电机结构和开绕组电机结构适用于不同的运行场合，其面对不同故障时所具备的容错处理能力也不同。当双三相电机驱动发生缺相故障时，多种策略可以被用于进行容错控制。最简单的方法是：直接移除故障三相绕组，并将双三相电机转化为三相电机；然而，该方法会使最大输出功率将大幅下降。因此，现在有很多研究致力于充分利用双三相电机发生缺相故障后的剩余健全相；在消除转矩波动的前提下，将最小铜损耗和最大转矩作为容错控制的两个优化目标。当双三相电机驱动发生开关管开路故障时，最简单的容错方式为：切断故障支路，并使用上述缺相故障的容错控制方法进行容错。但是，当双三相电机驱动发生开关管短路故障时，通常采用复杂的拓扑重建来进行容错控制，实现这种容错控制是非常复杂且困难的。当开绕组电机驱动发生缺相故障时，不同结构的容错控制策略不同。具有公共直流母线的开绕组电机驱动在发生缺相故障时具有两个电流控制维度，通过构造等效旋转磁动势可以实现容错控制，然而，在这种情况下，转矩输出能力非常有限。此外，当发生缺相故障时，隔离直流母线的开绕组电机驱动仅有一个电流控制维度，转矩脉动只能通过额外辅助电路来增加电流控制维度消除。当开绕组电机驱动发生开关管开路故障时，最简单的容错方式是：单逆变器容错控制，这要求故障逆变器可以被箝位到中性点。然而，故障逆变器中剩余的健全开关管未被充分利用以分担完好逆变器的损耗。通过优化故障逆变器的开关状态，可以利用剩余的健全开关来产生等效的旋转磁动势，而不是放弃整个故障逆变器。对于共直流母线的开绕组电机驱动中的开关管短路故障，只能通过增加复杂的辅助电路来实现容错控制。而隔离母线型开绕组电机驱动可以通过重构空间电压矢量图来实现开关管短路故障容错控制。综上所述我们不难看出：双三相电机驱动在缺相故障的容错控制中表现良好，然而在开关管故障下的容错能力非常有限。开绕组电机驱动在缺相故障下容错能力较弱，但在开关管故障的容错控制方面较有优势。但是，现有技术并未提出融合二者优点、规避各自缺陷的相关调和设计。因此，本发明提出一种双三相电机与开绕组电机在线切换拓扑及其控制方法来解决该问题。发明内容为解决上述之一技术问题，本发明提供的一种双三相电机与开绕组电机在线切换拓扑，对电机绕组进行在线绕组重构，得到能进行双三相结构与开绕组结构之间在线切换的电机绕组拓扑；其中，电机绕组包括：第一三相绕组和第二三相绕组；第一三相绕组包括：A相绕组、B相绕组、C相绕组；第二三相绕组包括：E相绕组、F相绕组和D相绕组；其中，A相绕组与E相绕组、B相绕组与F相绕组、C相绕组与D相绕组之间具有相同的相位偏移角度；在线绕组重构：将A相绕组和E相绕组进行连接，得到A-E绕组；将B相绕组和F相绕组进行连接，得到B-F绕组；将C相绕组和D相绕组进行连接，得到C-D绕组；在A-E绕组连接点和B-F绕组连接点之间，B-F绕组连接点和C-D绕组连接点之间分别设置可控开关，得到电机绕组拓扑；双三相结构：将电机绕组拓扑的两个可控开关连通，此时A相绕组、E相绕组、B相绕组、F相绕组、C相绕组和D相绕组具有共同的中性点，得到双三相结构；开绕组结构：将电机绕组拓扑的两个可控开关断开，此时A-E绕组、B-F绕组和C-D绕组均相互独立，得到开绕组结构。作为更加具体的解决方案，可控开关通过双向晶闸管进行设置。作为更加具体的解决方案，还设置有逆变器I和逆变器II；A-E绕组、B-F绕组、C-D绕组分别连接在逆变器I与逆变器II之间。一种双三相电机与开绕组电机在线控制方法，运用于如上任一项所述的一种双三相电机与开绕组电机在线切换拓扑中，在未发生故障时，通过控制两个可控开关的连通/断开，实现双三相模式/开绕组模式的工作模式自由切换。作为更加具体的解决方案，在开绕组模式下，通过如下步骤进行功率调整：功率调整切换至开绕组模式；采集当前电机转速n，并设定参考电机转速n*；通过PI控制器进行转速偏差控制计算，并投射至d-q平面，得到参考电流iq*和id*；采集当前各相电流iA、iB、iC，并投射至d-q平面，得到当前d-q平面电流id和iq；通过参考电流iq*和id*、当前d-q平面电流id和iq通过无差拍控制算法得到参考电压uq*和ud*；将参考电压uq*和ud*平均分配至α1-β1坐标和α2-β2坐标，并使相位偏移角度保持180°相位差，得到α1-β1坐标的空间电压矢量Uα1和Uβ1，α2-β2坐标的空间电压矢量Uα2和Uβ2；将空间电压矢量Uα1和Uβ1进行极坐标转换，得到V1和θ1；将空间电压矢量Uα2和Uβ2进行极坐标转换，得到V2和θ2；将V1和θ1、V2和θ2分别进行空间矢量调制，并分别输入逆变器I和逆变器II；逆变器I和逆变器II分别根据输入的参考电压的比值调整功率比，完成一次功率调整。作为更加具体的解决方案，在双三相模式下，通过如下步骤进行功率调整：功率调整切换至双三相模式；采集当前电机转速n，并设定参考电机转速n*；通过PI控制器进行转速偏差控制计算，并投射至d-q平面和x-y平面，得到参考电流iq*、id*、ix*和iy*；采集当前各相电流iA、iB、iC、iD、iE、iF，并投射至d-q平面和x-y平面，得到当前d-q平面和x-y平面电流id,iq和ix,iy；通过参考电流iq*、id*、ix*和iy*、当前d-q平面和x-y平面电流id,iq和ix,iy通过无差拍控制算法计算得到参考电压uq*、ud*、ux*和uy*；将参考电压uq*、ud*投射至α-β坐标，得到参考电压uα*、uβ*；将参考电压uα*、uβ*、ux*和uy*变换至α1-β1坐标和α2-β2坐标，得到α1-β1坐标的空间电压矢量Uα1和Uβ1，α2-β2坐标的空间电压矢量Uα2和Uβ2；其中，将参考电压uα*、uβ*、ux*和uy*变换为各相参考电压，再进行坐标变换；将空间电压矢量Uα1和Uβ1进行极坐标转换，得到V1和θ1；将空间电压矢量Uα2和Uβ2进行极坐标转换，得到V2和θ2；将V1和θ1、V2和θ2分别进行空间矢量调制，并分别输入逆变器I和逆变器II；逆变器I和逆变器II分别根据输入的参考电流的比值调整功率比，完成一次功率调整。作为更加具体的解决方案，在发生故障时，根据故障类型对工作模式进行选择性切换：故障类型为缺相故障：将工作模式选择性切换至双三相模式，并进行双三相容错控制；故障类型开关管故障：将工作模式选择性切换至开绕组模式，并进行开绕组容错控制。作为更加具体的解决方案，双三相容错控制基于电流补偿，通过在线调整参考电流实现电机故障状态下的平稳运行；双三相容错控制通过如下步骤进行：通过Clark变换将六相电流通过α1-β1坐标和α2-β2坐标进行表示，得到六相电流关系式；通过结合Park变换、VSD解耦矩阵的逆矩阵和六相电流关系式进行计算，得到参考电流在双α1-β1坐标和α2-β2坐标中的关系式；获取发生故障的缺相，根据对应缺相的电流为零，零序电流为零；获得新的电流约束条件；根据等效旋转磁动势前后不变原则和新的电流约束条件，通过调整参考电流对电流损失进行补偿；得到在双α1-β1坐标和α2-β2坐标中的容错参考电流关系式；结合VSD解耦矩阵、六相电流关系式和容错参考电流关系式的逆变换进行计算，得到x-y平面的容错参考电流关系式；按照容错参考电流关系式，对功率调整过程中的ix*和iy*进行更新，完成一次双三相容错控制。作为更加具体的解决方案，开绕组容错控制通过如下步骤进行：对故障开关管进行定位，确定缺失的电压参考矢量：若逆变器I中的电压参考矢量缺失，则将逆变器II对应的参考电压提高一倍；若逆变器II中的电压参考矢量缺失，则将逆变器I对应的参考电压提高一倍。作为更加具体的解决方案，通过无差拍控制模块计算双三相模式/开绕组模式的参考电压；其中，参考电压与预测电流关联，预测电流与当前电流和当前电压关联；在双三相模式下，电流预测公式和参考电压公式如下：在开绕组模式下，电流预测公式和参考电压公式如下：其中，idk和idk+1分别为变量id在k和k+1时刻的瞬时值，同理对于ud，uq，ux，uy，ix，iy，iq；Ts为采样周期，Ld和Lq为d轴和q轴上的定子电感，ωr为转子转速，ψf为永磁体磁链幅值，Lls定子漏感，Rs为定子电阻。与相关技术相比较，本发明提供的一种双三相电机与开绕组电机在线切换拓扑及其控制方法具有如下有益效果：一、本发明提出的基于绕组重构的双三相电机和开绕组电机之间的模式切换策略可以实现在正常运行下两种电机模式的平滑切换，根据电流比或电压比对两个逆变器进行功率分配。并且在故障状态下时，可根据故障类型选择容错控制效果较好的运行模式。二、本发明针对缺相故障，提出了在双三相模式下基于电流补偿的容错控制策略，可以在实现转矩脉动抑制的情况实现铜损最小，并且不需要额外的辅助电路，通过在线调整参考电压即可实现容错。三、本发明针对开关管故障，提出了在开绕组模式下基于电压空间矢量图重构方法，通过在线调整故障扇区中的电压参考矢量，并且充分故障逆变器中的剩余健全开关，可以实现电机故障状态下的平稳运行。附图说明图1为经典开绕组电机驱动的结构图；图2为经典双三相电机驱动的结构图；图3为经典三相电机的绕组连接图；图4为双三相电机的绕组连接图；图5为双三相电机绕组示意图: 星型连接型绕组； 开路绕组；图6为经典的绕组重构方法: 绕组连接方式； 反电动势；图7为本发明提出的新型绕组重构方法: 绕组连接方式； 反电动势；图8为新型绕组重构方法的等效绕组分布: 绕组连接方式； 等效绕组；图9为本发明提出的双三相结构与开绕组结构之间在线切换的电机绕组拓扑；图10为本发明提出的模式切换策略的控制框架图；图11为空间矢量图: 逆变器； 逆变器/＞；图12为开关管SA1发生开路故障的空间矢量图: 逆变器； 逆变器/＞；图13为开关管SA1发生短路故障的空间矢量图: 逆变器； 逆变器/＞。具体实施方式下面结合附图进一步详细描述本发明的技术方案，但本发明的保护范围不局限于以下所述。为了使本发明的目的，技术方案及优点更加清楚明白，结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅用以解释本发明，并不用于限定本发明，即所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。通常在此处附图中描述展示出的本发明实施例的组件可以以各种不同的配置来布置和设计。因此，以下对在附图中提供的本发明的实施例的详细描述并非旨在限制要求保护的本发明的范围，而是仅仅表示本发明的选定实施例。基于本发明的实施例，本领域技术人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都属于本发明保护的范围。需要说明的是，术语“第一”和“第二”等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”，“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程，方法，物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程，方法，物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程，方法，物品或者设备中还存在另外的相同要素。以下结合实施例对本发明的特征和性能作进一步的详细描述：如图9所示，本实施例提供的一种双三相电机与开绕组电机在线切换拓扑，对电机绕组进行在线绕组重构，得到能进行双三相结构与开绕组结构之间在线切换的电机绕组拓扑；其中，电机绕组包括：第一三相绕组和第二三相绕组；第一三相绕组包括：A相绕组、B相绕组、C相绕组；第二三相绕组包括：E相绕组、F相绕组和D相绕组；其中，A相绕组与E相绕组、B相绕组与F相绕组、C相绕组与D相绕组之间具有相同的相位偏移角度；在线绕组重构：将A相绕组和E相绕组进行连接，得到A-E绕组；将B相绕组和F相绕组进行连接，得到B-F绕组；将C相绕组和D相绕组进行连接，得到C-D绕组；在A-E绕组连接点和B-F绕组连接点之间，B-F绕组连接点和C-D绕组连接点之间分别设置可控开关，得到电机绕组拓扑；双三相结构：将电机绕组拓扑的两个可控开关连通，此时A相绕组、E相绕组、B相绕组、F相绕组、C相绕组和D相绕组具有共同的中性点，得到双三相结构；开绕组结构：将电机绕组拓扑的两个可控开关断开，此时A-E绕组、B-F绕组和C-D绕组均相互独立，得到开绕组结构。需要说明的是：图1展示了隔离直流母线型的开绕组电机驱动的拓扑结构，两个相同的电源被用于向两个逆变器供电。开绕组电机在dq0坐标下的电压方程式如式所示： 式开绕组电机的电磁转矩可表示为：式其中，np是极对数，Ld、Lq、L0分别是d轴、q轴、0轴电感；Ψf是永磁体磁链的幅值，id、iq、i0表示坐标对应电流；R是绕组电阻；p是微分算子；是转子转速；后续参数若未特别说明，则沿用前述释义。图2展示了隔离直流母线型双三相电机驱动的拓扑结构，其中双三相电机绕组由两组相差30°三相绕组构成。矢量空间分解法可以用于将双三相电机解耦为三个二维正交子空间，分别为α-β,x-y, 和o1-o2平面；空间矢量解耦矩阵如式所示： 式通过结合等式和Park变换，可以得到d-q和x-y平面的电压方程：式其中，Lls为电机漏感；Rs为定子电阻。双三相电机的电磁转矩可以表示为：式三相电机与双三相电机的关系：图3展示了24槽4的三相电机的经典绕组图。相邻两槽之间的电角度为30°，通过断开图3中相邻槽之间的每个相绕组的串联连接，可以获得两组三相绕组之间具有30°相移的典型双三相电机的绕组，如图4所示。基于以上分析，双三相电机与三相电机之间关系密切，它们可以共享一些常见的槽极组合，例如24槽和4极，36槽和6极、48槽和8极。因此，通过绕组重新连接在开绕组电机和双三相电机之间切换是可行的，这是所提出的切换策略的理论基础。切换拓扑的设计：图5展示了双三相电机的绕组分布，是由两组互相偏移30°的共中性点的三相绕组构成，一共有6个端子。如果将中性点断开，就可以得到双三相电机的另外6个端子，如图5所示。三相开绕组电机可以通过以不同方式连接图5中双三相电机的六个相端子来重建。绕组重新配置的基本原则是新结构的反电动势应尽可能大，否则重构得到的开绕组电机的额定功率将会降低。根据图3和图4中三相电机和双三相电机之间的绕组关系。图6显示了典型的重构方式，其中端子A-、B-、C-分别连接到D+、E+和F+。图6展示了A相和D相的反电动势，即UA和UD。通过连接端子A-和D+，可以获得最大幅值的反电动势。然而图6中的连接方式很难实现双三相模式和开绕组模式的在线切换，因为端子D+、E+、F+通常连接到双三相电机驱动中的三相逆变器。为了实现开绕组电机模式和双三相电机模式之间的在线重构，本发明提出了一种在线绕组重构的新方法，如图7所示。在图7中，端子A-、B-、C-分别与端子E-、F-、D-连接。这样，可以在不使用逆变器连接端子的情况下改变绕组结构。同时，还可以获得具有最大幅值的合成反电动势。例如，通过连接端子A-和E-，合成反电动势可以实现与典型重建方法相同的最大幅值，如图7所示。为了进一步分析图7所示重建方法的绕组特性，通过移动E相、E相和F相绕组获得等效绕组连接，如图8所示。根据每个相绕组的反电动势方向，通过合成相邻绕组可以获得三个等效相绕组，如图8所示。在图8中，A相和E相的组合等同于A´相。相位B´和相位C´可以以相同的方式获得。从图8可以看出，A相和原始A相之间存在15°的相移，这意味着在双三相模式和开绕组模式之间切换时，应调整转子位置。例如，当将驱动器从双三相模式切换到开绕组模式时，应将15°的相移添加到原始转子位置。基于上述分析，图9中提出了一种可以在双三相模式和开绕组模式之间切换的新拓扑。作为更加具体的解决方案，可控开关通过双向晶闸管进行设置。需要说明的是：使用两个双向晶闸管作为双向开关来连接图7中的不同的连接绕线。通过这种方式，三相电机驱动可以通过打开两个晶闸管进入双三相模式，通过关闭两个晶闸管切换到开绕组模式。作为更加具体的解决方案，还设置有逆变器I和逆变器II；A-E绕组、B-F绕组、C-D绕组分别连接在逆变器I与逆变器II之间。一种双三相电机与开绕组电机在线控制方法，运用于如上任一项所述的一种双三相电机与开绕组电机在线切换拓扑中，在未发生故障时，通过控制两个可控开关的连通/断开，实现双三相模式/开绕组模式的工作模式自由切换。需要说明的是：图10展示了图9中模式切换拓扑的模式切换控制方案的控制框图。在图10中，当开关切换到“1”时，系统在双三相电机模式下工作；当开关切换至“0”时，该系统在开绕组模式下工作。两种模式共享控制框架的许多部分。两种模式下，使用相同的速度调节器计算电流参考。此外，为了简化控制复杂性，两种模式都采用了双空间矢量调制方法，该控制框架统一适用于正常和容错运行状态。为了确保在正常和容错控制中对直流和交流电流进行有效的电流跟踪，一些高性能的电流调节器，如无差拍控制和重复控制，可以作为所提出方案的候选。本发明将采用无差拍控制来验证所提出方案的可行性。当发生缺相故障时，图10中的开关将切换到“1”，系统将在双三相模式下工作。当开关管故障发生时，图10中的开关将切换到“0”，系统将在开绕组模式下运行。作为更加具体的解决方案，在开绕组模式下，通过如下步骤进行功率调整：功率调整切换至开绕组模式；采集当前电机转速n，并设定参考电机转速n*；通过PI控制器进行转速偏差控制计算，并投射至d-q平面，得到参考电流iq*和id*；采集当前各相电流iA、iB、iC，并投射至d-q平面，得到当前d-q平面电流id和iq；通过参考电流iq*和id*、当前d-q平面电流id和iq通过无差拍控制算法得到参考电压uq*和ud*；将参考电压uq*和ud*平均分配至α1-β1坐标和α2-β2坐标，并使相位偏移角度保持180°相位差，得到α1-β1坐标的空间电压矢量Uα1和Uβ1，α2-β2坐标的空间电压矢量Uα2和Uβ2；将空间电压矢量Uα1和Uβ1进行极坐标转换，得到V1和θ1；将空间电压矢量Uα2和Uβ2进行极坐标转换，得到V2和θ2；将V1和θ1、V2和θ2分别进行空间矢量调制，并分别输入逆变器I和逆变器II；逆变器I和逆变器II分别根据输入的参考电压的比值调整功率比，完成一次功率调整。作为更加具体的解决方案，在双三相模式下，通过如下步骤进行功率调整：功率调整切换至双三相模式；采集当前电机转速n，并设定参考电机转速n*；通过PI控制器进行转速偏差控制计算，并投射至d-q平面和x-y平面，得到参考电流iq*、id*、ix*和iy*；采集当前各相电流iA、iB、iC、iD、iE、iF，并投射至d-q平面和x-y平面，得到当前d-q平面和x-y平面电流id,iq和ix,iy；通过参考电流iq*、id*、ix*和iy*、当前d-q平面和x-y平面电流id,iq和ix,iy通过无差拍控制算法计算得到参考电压uq*、ud*、ux*和uy*；将参考电压uq*、ud*投射至α-β坐标，得到参考电压uα*、uβ*；将参考电压uα*、uβ*、ux*和uy*变换至α1-β1坐标和α2-β2坐标，得到α1-β1坐标的空间电压矢量Uα1和Uβ1，α2-β2坐标的空间电压矢量Uα2和Uβ2；其中，将参考电压uα*、uβ*、ux*和uy*变换为各相参考电压，再进行坐标变换；将空间电压矢量Uα1和Uβ1进行极坐标转换，得到V1和θ1；将空间电压矢量Uα2和Uβ2进行极坐标转换，得到V2和θ2；将V1和θ1、V2和θ2分别进行空间矢量调制，并分别输入逆变器I和逆变器II；逆变器I和逆变器II分别根据输入的参考电流的比值调整功率比，完成一次功率调整。作为更加具体的解决方案，在发生故障时，根据故障类型对工作模式进行选择性切换：故障类型为缺相故障：将工作模式选择性切换至双三相模式，并进行双三相容错控制；故障类型开关管故障：将工作模式选择性切换至开绕组模式，并进行开绕组容错控制。作为更加具体的解决方案，双三相容错控制基于电流补偿，通过在线调整参考电流实现电机故障状态下的平稳运行；双三相容错控制通过如下步骤进行：通过Clark变换将六相电流通过α1-β1坐标和α2-β2坐标进行表示，得到六相电流关系式；通过结合Park变换、VSD解耦矩阵的逆矩阵和六相电流关系式进行计算，得到参考电流在双α1-β1坐标和α2-β2坐标中的关系式；获取发生故障的缺相，根据对应缺相的电流为零，零序电流为零；获得新的电流约束条件；根据等效旋转磁动势前后不变原则和新的电流约束条件，通过调整参考电流对电流损失进行补偿；得到在双α1-β1坐标和α2-β2坐标中的容错参考电流关系式；结合VSD解耦矩阵、六相电流关系式和容错参考电流关系式的逆变换进行计算，得到x-y平面的容错参考电流关系式；按照容错参考电流关系式，对功率调整过程中的ix*和iy*进行更新，完成一次双三相容错控制。作为更加具体的解决方案，开绕组容错控制通过如下步骤进行：对故障开关管进行定位，确定缺失的电压参考矢量：若逆变器I中的电压参考矢量缺失，则将逆变器II对应的参考电压提高一倍；若逆变器II中的电压参考矢量缺失，则将逆变器I对应的参考电压提高一倍。作为更加具体的解决方案，通过无差拍控制模块计算双三相模式/开绕组模式的参考电压；其中，参考电压与预测电流关联，预测电流与当前电流和当前电压关联；在双三相模式下，电流预测公式和参考电压公式如下：式式在开绕组模式下，电流预测公式和参考电压公式如下：式 式其中，idk和idk+1分别为变量id在k和k+1时刻的瞬时值，同理对于ud，uq，ux，uy，ix，iy，iq；Ts为采样周期，Ld和Lq为d轴和q轴上的定子电感，ωr为转子转速，ψf为永磁体磁链幅值，Lls定子漏感，Rs为定子电阻。下面结合具体的实施例对容错控制策略进行解释说明：对于图1中的开绕组电机驱动，每个三相两电平逆变器可以输出8个不同的空间矢量，如图11所示，这些矢量将空间划分为6个不同的扇区。当系统在正常情况下工作时，参考电压被分为两个具有相同幅值和180°相位差的空间电压矢量，如图11所示。缺相故障：当电机驱动发生缺相故障时，双三相模式将用于容错控制。为了便于分析，采用了双α-β坐标；通过Clark变换，α1-β1坐标和α2-β2坐标中的电流用式中的六相电流表示：式结合Park变换、 VSD解耦矩阵的逆矩阵和式，可以在式中得到参考电流在双α1-β1坐标和α2-β2坐标中的关系：式假设A相发生缺相故障，A相电流iA将变为零；由于零序电流为零，将获得新的约束iB+iC＝0，因此，iα1将为零。为了获得等效旋转磁动势，α2轴上的电流可用于补偿α1轴的电流损失。因此，参考电流iα2*需要是其正常值的两倍。然后，双α-β坐标中的容错参考电流可以表示为：式结合式、和的逆变换，可以在式中获得x-y子空间中的容错参考电流。最后，通过用式更新图10的双三相模式中的x-y参考电流，可以简单地进行缺相故障容错控制。式开关管开路故障：当电机驱动发生开关管故障时，开绕组模式将用于故障容错。以逆变器I中的A相上开关管即SA1为例，在SA1开关管发生开路故障的情况下，逆变器I的A相在i＞0的状态下不能输出高电平，如图12所示。图12中的灰色部分表示无效矢量和扇区。根据图12，逆变器I只能输出4个不同的电压矢量，只有扇区Ⅲ和扇区Ⅳ有效。在图12中，逆变器II的空间矢量图仍然完整。为了对SA1开路故障进行容错，通过将参考电压从0.5Uref加倍到Uref，逆变器II将补偿i＞0状态的扇区V、扇区VI、扇区I和扇区II中的电压损失。这样，通过在图10的开绕组模式下更新参考电压而不改变调制方法，可以进行SA1开路故障的容错控制。开关管短路故障：当SA1发生开关管短路故障时，逆变器I只能输出四个不同的电压矢量，只有扇区III和扇区Ⅵ有效，如图13所示。在图13中，逆变器II的电压空间矢量图不受影响。为了对SA1开关管短路故障进行容错控制，扇区II、扇区III、扇区IV和扇区V的电压损失将通过将参考电压从0.5Uref加倍到Uref来补偿。这样，通过简单地在图10的开绕组模式下更新参考电压而不改变调制方法就可以开关管短路故障容错。以上仅为本发明的实施例，并非因此限制本发明的发明范围，凡是利用本发明说明书及附图内容所作的等效结构或等效流程变换，或直接或间接运用在其它相关的技术领域，均同理包括在本发明的发明保护范围内。
