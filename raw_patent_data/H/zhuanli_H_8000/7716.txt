标题title
一种抄表方法、装置、电表及存储介质
摘要abst
本发明公开了一种抄表方法、装置、电表及存储介质，该方法包括：在总时间周期中选择为当前电表所处的区域分配的多个子时间周期；在当前电表中查询在总时间周期内记录的用电数据；根据用电数据对每个子时间周期分别标记用户用电等级；将子时间周期及用户用电等级发送至服务器，并接收服务器发送的目标时间周期；若到达目标时间周期、且当前电表未满足中继条件，则探测满足中继条件的其他电表作为无线接入点时广播的信标帧；根据信标帧选择多个满足中继条件的其他电表为中继节点；根据信标帧接入中继节点；将目标数据传输至中继节点，以由中继节点将目标数据转发至服务器。规避电表自身的故障或周边通信环境的干扰，可以提高重传的成功率。
权利要求书clms
1.一种抄表方法，其特征在于，应用于电表，所述方法包括：在总时间周期中选择为当前所述电表所处的区域分配的多个子时间周期；在当前所述电表中查询在所述总时间周期内记录的用电数据；根据所述用电数据对每个所述子时间周期分别标记用户用电等级，所述用户用电等级表示启停用电行为的频繁程度；将所述子时间周期及所述用户用电等级发送至服务器，并接收所述服务器发送的目标时间周期，所述目标时间周期为区域用电等级最低的所述子时间周期，所述区域用电等级为同一所述区域中所有所述电表在同一所述子时间周期的所述用户用电等级的平均值；若到达所述目标时间周期、且当前所述电表未满足中继条件，则探测满足中继条件的其他所述电表作为无线接入点时广播的信标帧，所述中继条件为独立将所有电表数据成功上报所述服务器；根据所述信标帧选择多个满足所述中继条件的其他所述电表为中继节点；根据所述信标帧接入所述中继节点；当成功接入所述中继节点时，将目标数据传输至所述中继节点，以由所述中继节点将所述目标数据转发至所述服务器，所述目标数据为上报所述服务器失败的电表数据。2.根据权利要求1所述的方法，其特征在于，所述在总时间周期中选择为当前所述电表所处的区域分配的多个子时间周期，包括：将总时间周期划分出为多个子时间周期；查询在安装当前所述电表时、在当前所述电表中录入的安装地址；在所述安装地址中读取当前所述电表所处的区域的名称；对所述区域的名称计算哈希值；将所述哈希值中的多个字符分别映射至多个所述子时间周期上；将映射有所述字符的多个所述子时间周期分配至所述区域。3.根据权利要求1所述的方法，其特征在于，所述根据所述用电数据对每个所述子时间周期分别标记用户用电等级，包括：在所述用电数据中读取所述总时间周期内的用电量、作为原始用电量；在所述用电数据中读取每个所述子时间周期内的用电量、作为目标用电量；在所述原始用电量中滤除第一候选用电量、第二候选用电量，所述第一候选用电量为数值最大的部分所述原始用电量，所述第二候选用电量为数值最小的部分所述原始用电量；对滤除剩余的所述原始用电量计算平均值，作为参考用电量；若所述目标用电量与所述参考用电量之间的差值大于预设的阈值，则累积一次启停数值；加载映射表，所述映射表中记录有多个用户用电等级与多个启停范围之间的映射关系；在所述映射中查询包含所述启停数值的所述启停范围，作为目标范围；将所述目标范围映射的所述用户用电等级标记至所述子时间周期。4.根据权利要求1-3中任一项所述的方法，其特征在于，所述探测满足中继条件的其他所述电表作为无线接入点时广播的信标帧，包括：探测无线接入点广播的信标帧，所述信标帧中具有服务集标识；从所述服务集标识中读取位于指定第一位置的字符串；若所述字符串与中继标识、表示所述地区的第一编号相同，则确定探测满足中继条件的其他所述电表作为无线接入点时广播的信标帧。5.根据权利要求4所述的方法，其特征在于，所述根据所述信标帧选择多个满足所述中继条件的其他所述电表为中继节点，包括：查询各个所述信标帧的信号强度；查询在预设的时间段内，各个其他所述电表满足所述中继条件并广播所述信标帧的频次；从所述服务集标识中读取位于指定第二位置的字符，作为表示其他所述电表在所述地区中安装位置的第二编号；查询表示当前所述电表在所述地区中安装位置的第三编号；计算所述第二编号与所述第三编号之间的差值；基于所述信号强度、所述频次与所述差值对其他所述电表计算中继质量值；选择所述中继质量值最高的多个其他所述电表为中继节点。6.根据权利要求5所述的方法，其特征在于，所述基于所述信号强度、所述频次与所述差值对其他所述电表计算中继质量值，包括：对所有所述信号强度计算平均值，作为平均强度；通过如下公式对其他所述电表计算中继质量值：；其中，S为中继质量值，α为超参数，F为所述频次，L3为第三编号，L2为第二编号，R＇为所述平均强度，R为所述信号强度。7.根据权利要求5所述的方法，其特征在于，所述根据所述信标帧接入所述中继节点，包括：从所述信标帧中读取在自定义信息，所述自定义信息具有密文；查询所述服务器为所述区域的所述电表分发的密钥；使用所述密钥对所述密文进行解密，得到其他所述电表随机生成的参考字符；将所述第一编号、所述第二编号与所述参考字符组成目标字符；对所述目标字符生成散列值；从所述散列值中读取指定第三位置的字符，作为密码；使用所述密码接入所述中继节点。8.一种抄表装置，其特征在于，应用于电表，所述装置包括：子时间周期选择模块，用于在总时间周期中选择为当前所述电表所处的区域分配的多个子时间周期；用电数据查询模块，用于在当前所述电表中查询在所述总时间周期内记录的用电数据；用户用电等级标记模块，用于根据所述用电数据对每个所述子时间周期分别标记用户用电等级，所述用户用电等级表示启停用电行为的频繁程度；目标时间周期确定模块，用于将所述子时间周期及所述用户用电等级发送至服务器，并接收所述服务器发送的目标时间周期，所述目标时间周期为区域用电等级最低的所述子时间周期，所述区域用电等级为同一所述区域中所有所述电表在同一所述子时间周期的所述用户用电等级的平均值；信标帧探测模块，用于若到达所述目标时间周期、且当前所述电表未满足中继条件，则探测满足中继条件的其他所述电表作为无线接入点时广播的信标帧，所述中继条件为独立将所有电表数据成功上报所述服务器；中继节点选择模块，用于根据所述信标帧选择多个满足所述中继条件的其他所述电表为中继节点；中继节点接入模块，用于根据所述信标帧接入所述中继节点；目标数据转发模块，用于当成功接入所述中继节点时，将目标数据传输至所述中继节点，以由所述中继节点将所述目标数据转发至所述服务器，所述目标数据为上报所述服务器失败的电表数据。9.一种电表，其特征在于，所述电表包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够执行权利要求1-7中任一项所述的抄表方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机程序，所述计算机程序用于使处理器执行时实现权利要求1-7中任一项所述的抄表方法。
说明书desc
技术领域本发明涉及电网的技术领域，尤其涉及一种抄表方法、装置、电表及存储介质。背景技术当前居民的电表主要有单载波电表、微功率电表、NB-IoT电表，这些电表均使用无线信号将电表数据上报至服务器，实现抄表。电表的软硬件可能会发生故障，并且，电表依据居民的建筑分布，某些电表远离电网的设施，或诸如地下室等信号较弱的区域，使得线路阻抗、噪声及谐波造成的干扰较为明显，而在居民的建筑中存在多种电力设备，这些电力设备的运行也会产生较大的无线干扰，使得电表将电表数据上报服务器存在一定的失败率。在将电表数据上报服务器失败时，使用重传机制重新电表数据上报服务器，但由于电表的故障或通信环境的干扰依然存在，使得重传的成功率偏低。发明内容本发明提供了一种抄表方法、装置、电表及存储介质，以解决如何提高重传电表数据的成功率的问题。根据本发明的一方面，提供了一种抄表方法，应用于电表，所述方法包括：在总时间周期中选择为当前所述电表所处的区域分配的多个子时间周期；在当前所述电表中查询在所述总时间周期内记录的用电数据；根据所述用电数据对每个所述子时间周期分别标记用户用电等级，所述用户用电等级表示启停用电行为的频繁程度；将所述子时间周期及所述用户用电等级发送至服务器，并接收所述服务器发送的目标时间周期，所述目标时间周期为区域用电等级最低的所述子时间周期，所述区域用电等级为同一所述区域中所有所述电表在同一所述子时间周期的所述用户用电等级的平均值；若到达所述目标时间周期、且当前所述电表未满足中继条件，则探测满足中继条件的其他所述电表作为无线接入点时广播的信标帧，所述中继条件为独立将所有电表数据成功上报所述服务器；根据所述信标帧选择多个满足所述中继条件的其他所述电表为中继节点；根据所述信标帧接入所述中继节点；当成功接入所述中继节点时，将目标数据传输至所述中继节点，以由所述中继节点将所述目标数据转发至所述服务器，所述目标数据为上报所述服务器失败的电表数据。根据本发明的另一方面，提供了一种抄表装置，应用于电表，所述装置包括：子时间周期选择模块，用于在总时间周期中选择为当前所述电表所处的区域分配的多个子时间周期；用电数据查询模块，用于在当前所述电表中查询在所述总时间周期内记录的用电数据；用户用电等级标记模块，用于根据所述用电数据对每个所述子时间周期分别标记用户用电等级，所述用户用电等级表示启停用电行为的频繁程度；目标时间周期确定模块，用于将所述子时间周期及所述用户用电等级发送至服务器，并接收所述服务器发送的目标时间周期，所述目标时间周期为区域用电等级最低的所述子时间周期，所述区域用电等级为同一所述区域中所有所述电表在同一所述子时间周期的所述用户用电等级的平均值；信标帧探测模块，用于若到达所述目标时间周期、且当前所述电表未满足中继条件，则探测满足中继条件的其他所述电表作为无线接入点时广播的信标帧，所述中继条件为独立将所有电表数据成功上报所述服务器；中继节点选择模块，用于根据所述信标帧选择多个满足所述中继条件的其他所述电表为中继节点；中继节点接入模块，用于根据所述信标帧接入所述中继节点；目标数据转发模块，用于当成功接入所述中继节点时，将目标数据传输至所述中继节点，以由所述中继节点将所述目标数据转发至所述服务器，所述目标数据为上报所述服务器失败的电表数据。根据本发明的另一方面，提供了一种电表，所述电表包括：至少一个处理器；以及与所述至少一个处理器通信连接的存储器；其中，所述存储器存储有可被所述至少一个处理器执行的计算机程序，所述计算机程序被所述至少一个处理器执行，以使所述至少一个处理器能够执行本发明任一实施例所述的抄表方法。根据本发明的另一方面，提供了一种计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序用于使处理器执行时实现本发明任一实施例所述的抄表方法。在本实施例中，在总时间周期中选择为当前电表所处的区域分配的多个子时间周期；在当前电表中查询在总时间周期内记录的用电数据；根据用电数据对每个子时间周期分别标记用户用电等级，用户用电等级表示启停用电行为的频繁程度；将子时间周期及用户用电等级发送至服务器，并接收服务器发送的目标时间周期，目标时间周期为区域用电等级最低的子时间周期，区域用电等级为同一区域中所有电表在同一子时间周期的用户用电等级的平均值；若到达目标时间周期、且当前电表未满足中继条件，则探测满足中继条件的其他电表作为无线接入点时广播的信标帧，中继条件为独立将所有电表数据成功上报服务器；根据信标帧选择多个满足中继条件的其他电表为中继节点；根据信标帧接入中继节点；当成功接入中继节点时，将目标数据传输至中继节点，以由中继节点将目标数据转发至服务器，目标数据为上报服务器失败的电表数据。在电表自身存在故障或其周边通信环境存在干扰导致电表数据传输失败的情况下，交由其他电表重传电表数据，可以规避电表自身的故障或周边通信环境的干扰，可以提高重传的成功率，并且，电表既可以作为转发电表数据的中继节点、也可以发起重传电表数据，灵活性高，电表之间处于同一拓扑体系，便于实施安全措施，保证电表在重传电表数据时的安全性。应当理解，本部分所描述的内容并非旨在标识本发明的实施例的关键或重要特征，也不用于限制本发明的范围。本发明的其它特征将通过以下的说明书而变得容易理解。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是根据本发明实施例一提供的一种抄表方法的流程图；图2是根据本发明实施例二提供的一种抄表装置的结构示意图；图3是实现本发明实施例三提供的一种电表的结构示意图。具体实施方式为了使本技术领域的人员更好地理解本发明方案，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分的实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本发明保护的范围。需要说明的是，本发明的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本发明的实施例能够以除了在这里图示或描述的那些以外的顺序实施。此外，术语“包括”和“具有”以及他们的任何变形，意图在于覆盖不排他的包含，例如，包含了一系列步骤或单元的过程、方法、系统、产品或设备不必限于清楚地列出的那些步骤或单元，而是可包括没有清楚地列出的或对于这些过程、方法、产品或设备固有的其它步骤或单元。实施例一图1为本发明实施例一提供的一种抄表方法的流程图，本实施例可适用于当前电表使用周边的其他电表作为中继节点重传电表数据的情况，该方法可以由抄表装置来执行，该抄表装置可以采用硬件和/或软件的形式实现，该抄表装置可配置于电表中。如图1所示，该方法包括：步骤101、在总时间周期中选择为当前电表所处的区域分配的多个子时间周期。在本实施例中，可以预先设置用户主动触发用电行为较少的时间段作为总时间周期，如每天的00:00-06:00等，在该总时间周期内重传电表数据，以减少对用户的影响，因而总时间周期之间会间隔其他时间段、总时间周期之间并非是连续的。由于总时间周期比较长，为了降低电表的功耗，并且为了让不同电表错开重传电表数据、降低相互之间的影响，本实施例可以将总时间周期划分为多个子时间周期，如每5分钟划分为一个子时间周期等，按照预设的分配规则为不同的区域分配多个子时间周期，该分配规则可以由服务器进行维护，并定期进行更新。那么，在当前电表中可以读取当前有效的分配规则，在总时间周期中按照该分配规则选择为当前电表所处的区域分配的多个子时间周期。在具体实现中，可以每间隔预设的时长对总时间周期进行切分，将总时间周期划分出为多个子时间周期。查询在安装当前电表时、在当前电表中录入的安装地址，通过正则表达式等方式在安装地址中读取当前电表所处的区域的名称，其中，该区域可以为街道、楼宇，等等。使用MD5、SHA等哈希算法对区域的名称计算哈希值Hash。使用将子时间周期切片后哈希取余、顺序、逆序等方式将哈希值中的多个指定位数的字符分别映射至多个子时间周期上，将映射有字符的多个子时间周期分配至区域。步骤102、在当前电表中查询在总时间周期内记录的用电数据。在本实施例中，可以从在当前电表的本地读取在总时间周期内记录的用电数据。步骤103、根据用电数据对每个子时间周期分别标记用户用电等级。在实际应用中，用户在总时间周期内是有可能使用电器的，其表现多为启动用电行为、停止用电行为，为了减少对用户的干扰，可以参考用电数据对每个子时间周期分别标记用户用电等级，其中，用户用电等级表示启停用电行为的频繁程度。一般情况下，用户用电等级越高，表示启停电器的频繁程度越高，用户用电等级越低，表示启停电器的频繁程度越低。在具体实现中，在用电数据中读取总时间周期内各个检测点采集的用电量、作为原始用电量。针对每个子时间周期，在用电数据中读取每个子时间周期内各个检测点采集的的用电量、作为目标用电量。在原始用电量中滤除第一候选用电量、第二候选用电量，其中，第一候选用电量为数值最大的部分原始用电量，如数值最大的10%的原始用电量等，第二候选用电量为数值最小的部分原始用电量，如数值最小的10%的原始用电量等，滤除第一候选用电量、第二候选用电量可以减少偶然用电行为带来的影响。对滤除剩余的原始用电量计算平均值，作为参考用电量，分别计算各个目标用电量与参考用电量之间的差值，并将该差值与预设的阈值进行比较。若目标用电量与参考用电量之间的差值大于预设的阈值，表示目标用电量与参考用电量之间的差异较大，则累积一次启停数值，累积启停数值的过程可表示为T=T+1，其中，T为启停数值。加载预置的映射表，映射表中记录有多个用户用电等级与多个启停范围之间的映射关系，即，映射表中有多条记录，每条记录为一个用户用电等级与一个启停范围之间的映射关系。在遍历完所有目标用电量之后，以当前启停数值为键key，在映射中查询包含启停数值的启停范围，作为目标范围，在映射表中将目标范围映射的用户用电等级标记至当前子时间周期。步骤104、将子时间周期及用户用电等级发送至服务器，并接收服务器发送的目标时间周期。在本实施例中，各个电表可以每间隔一定的时间将子时间周期及其用户用电等级发送至服务器，服务器离线将同一区域中各个电表的子时间周期及其用电等级汇总，从而计算出目标时间周期，其中，目标时间周期为区域用电等级最低的子时间周期，区域用电等级为同一区域中所有电表在同一子时间周期的用户用电等级的平均值，即，服务器针对同一区域中的同一子时间周期，可以计算各个电表在该子时间周期的用户用电等级的平均值，作为区域用电等级，对同一区域中的各个子时间周期的区域用电等级进行比较，选择区域用电等级的数值最低的所对应的子时间周期为目标时间周期。步骤105、若到达目标时间周期、且当前电表未满足中继条件，则探测满足中继条件的其他电表作为无线接入点时广播的信标帧。在本实施例中，电表中设置有无线网络的通信芯片，如Wi-Fi芯片，并且，电表中可以预置中继条件，其中，中继条件为独立将所有电表数据成功上报服务器。各个电表在到达目标时间周期时，可以查询本地是否已独立将所有电表数据成功上报服务器。如果本地存储有重传失败的电表数据，则可以确定未满足中继条件，表示当前电表所处的通信环境存在一定的干扰，并不适合作为中继节点，那么，当前电表并不作为无线接入点广播信标帧Beacon。如果本地重传失败的电表数据为空，则可以确定满足中继条件，表示当前电表所处的通信环境良好，适合作为中继节点，那么，当前电表可以启动无线网络的通信芯片，启动无线接入点，从而向外部广播信标帧Beacon。其中，按照Wi-Fi协议，信标帧Beacon包含如下信息：SSID、MAC地址、信道、通信速率、加密方式。除了上述信息之外，信标帧Beacon还具有可选的部分，长度为255个字节，可由用户自定义数据。如果当前电表在到达目标时间周期时判定未满足中继条件，则可以启动无线网络的通信芯片，探测满足中继条件的其他电表作为无线接入点时广播的信标帧。在具体实现中，当前电表可以启动无线网络的通信芯片，探测无线接入点广播的信标帧，其中，信标帧中具有服务集标识。从服务集标识中读取位于指定第一位置的字符串，并将该字符串与预设的中继标识、表示当前电表所处地区的第一编号进行比较。其中，中继标识为作为中继节点转发电表数据的标识，如elecmeter_AP。第一编号按照次序可以排列为省编号、市编号、区编号、街道编号，等等。若字符串与中继标识、表示地区的第一编号不同，则可以确定该中继节点并非电表，并未探测满足中继条件的其他电表作为无线接入点时广播的信标帧。若字符串与中继标识、表示地区的第一编号相同，则可以确定该中继节点为电表，确定探测满足中继条件的其他电表作为无线接入点时广播的信标帧。步骤106、根据信标帧选择多个满足中继条件的其他电表为中继节点。在具体实现中，当前电表可以从信标帧Beacon中解析对于中继传输电表数据相关的信息，依据这些信息选择多个合适的其他电表为中继节点。由于当前电表重传电表数据失败，因而当前电表所处的通信环境中存在一定的干扰，相邻的其他电表所处的通信环境中也可能存在一定的干扰，因而当前电表选择多个满足满足中继条件的其他电表为中继节点，同时通过多个中继节点传输电表数据，提高传输的成功率。在本发明的一个实施例中，步骤106可以包括如下步骤：步骤1061、查询各个信标帧的信号强度。对于当前电表接收到的各个信标帧，均可记录其信号强度，一般情况下，标帧的信号强度与传输电表数据的成功率正相关，信标帧的信号强度越强，传输电表数据的成功率越高，反之，信标帧的信号强度越弱，传输电表数据的成功率越低。步骤1062、查询在预设的时间段内，各个其他电表满足中继条件并广播信标帧的频次。由于满足中继条件的电表在每个目标时间周期中均可会广播信标帧Beacon，那么，各个电表均可在每个目标时间周期中探测并记录广播信标帧Beacon的其他电表，该电表可以由表示地区的第一编号、表示电表在该地区中安装位置的第二编号表征。在筛选中继节点时，可以查询在最近的一个时间段内，各个其他电表满足中继条件并广播信标帧的频次，该频次在一定程度上表征其他电表所处的通信环境在最近一个时间段内的整体情况，该频次越大，表示其他电表所处的通信环境在最近一个时间段内越好，反之，该频次越小，表示其他电表所处的通信环境在最近一个时间段内越差。步骤1063、从服务集标识中读取位于指定第二位置的字符，作为表示其他电表在地区中安装位置的第二编号。步骤1064、查询表示当前电表在地区中安装位置的第三编号。步骤1065、计算第二编号与第三编号之间的差值。在本实施例中，技术人员可以在安装电表时根据其安装的位置对该电表赋予一个编号，使得该编号在整体上按照安装位置的顺序排列，可以在一定程度上表征安装位置。那么，当前电表可以在服务集标识中读取位于指定第二位置的字符，作为表示其他电表在当前地区中安装位置的编号，记为第二编号，并且，查询表示当前电表在地区中安装位置的编号，记为第三编号，从而计算第二编号与第三编号之间的差值，该差值可以在一定程度上表征当前电表与其他电表之间间隔的距离。一般情况下，当前电表与其他电表之间间隔的距离越大，无线信号遇到的障碍的概率越多，干扰就越多，反之，当前电表与其他电表之间间隔的距离越小，无线信号遇到的障碍的概率越小，干扰就越少。步骤1066、基于信号强度、频次与差值对其他电表计算中继质量值。在本实施例中，以电表作为无线接入点广播信标帧的信号强度，电表作为无线接入点频次，电表之间的距离作为评价的维度，对其他电表计算中继质量值，中继质量值为量化电表作为中继节点时的质量。示例性地，可以对所有信号强度计算平均值，作为平均强度，通过如下公式对其他电表计算中继质量值：其中，S为中继质量值，α为超参数，F为频次，L3为第三编号，L2为第二编号，即L3-L2为差值，R＇为平均强度，R为信号强度，exp为以自然常数e为底的指数函数。在本示例中，计算中继质量值的公式属于曲线，在信号强度R大于平均强度R＇时，提高中继质量值S，在信号强度R小于平均强度R＇时，降低中继质量值S。而该曲线的弯曲程度由1/决定，当前电表与其他电表之间的距离越小，1/越大，弯曲程度越大，在信号强度R大于平均强度R＇时，提高中继质量值S的幅度越大，在信号强度R小于平均强度R＇时，降低中继质量值S的幅度越大，反之，当前电表与其他电表之间的距离越大，1/越小，弯曲程度越小，在信号强度R大于平均强度R＇时，提高中继质量值S的幅度越小，在信号强度R小于平均强度R＇时，降低中继质量值S的幅度越小。max为取最大值的函数，那么，中继质量值的上限值取决于超参数α与频次F中的较大者，超参数α为电表理论作为无线接入点广播无线的下限值，如果电表实际作为无线接入点广播无线的频次F小于下限值时，统一设置中继质量值的上限值，以保障中继节点的质量。步骤1067、选择中继质量值最高的多个其他电表为中继节点。在本实施例中，将各个满足中继条件的其他电表的中继质量值进行比较，从而选择中继质量值最高的k个其他电表为中继节点。步骤107、根据信标帧接入中继节点。在本实施例中，为保障中继节点的安全性，当前电表可以从信标帧中读取与接入相关的信息，按照既定的安全规范依据该信息接入中继节点。在具体实现中，可对Wi-Fi的信标帧Beacon进行延伸，其他电表作为无线接入点时，随机生成一个在本次通信有效的参考字符，按照DES、3DES、 AES、PBE等对称密钥算法对该参考字符进行加密，得到密文，将密文作为自定义数据写入信标帧Beacon的自定义部分。其中，为提高安全性，对称密钥算法及其使用的密钥由服务器针对同一区域的电表分发，并定期进行维护。那么，当前电表可从从信标帧中读取在自定义信息，自定义信息具有密文，此时，查询服务器为区域的电表分发的密钥，调用预先与服务器协商的对称密钥算法、使用密钥对密文进行解密，得到其他电表随机生成的参考字符。将第一编号、第二编号与参考字符按照一定的结构排列组成目标字符。调用预先与服务器协商的散列算法对目标字符生成散列值，并从散列值中读取指定第三位置的字符，作为密码，从而使用该密码接入中继节点。步骤108、当成功接入中继节点时，将目标数据传输至中继节点，以由中继节点将目标数据转发至服务器。如果当前电表成功接入中继节点，则可以打包目标数据，其中，目标数据为当前电表上报服务器失败的电表数据，将目标数据传输至各个中继节点，各个中继节点分别按照其原有的渠道将目标数据转发至服务器，目标数据中包含当前电表的标识、传输失败的代码等信息，方便服务器为当前电表存储数据，并由技术人员分析传输失败的原因，以便制定相应的检修计划。如果中继节点传输目标数据成功，则可以将转传成功的信息发送至当前电表，当前电表记录目标数据传输成功。如果中继节点传输目标数据失败，则可以将转传失败的信息发送至当前电表，当前电表记录目标数据传输失败，在所有中继节点转发目标数据失败时，确定在其他目标时间周期继续交友其他中继节点转发目标数据。在本实施例中，在总时间周期中选择为当前电表所处的区域分配的多个子时间周期；在当前电表中查询在总时间周期内记录的用电数据；根据用电数据对每个子时间周期分别标记用户用电等级，用户用电等级表示启停用电行为的频繁程度；将子时间周期及用户用电等级发送至服务器，并接收服务器发送的目标时间周期，目标时间周期为区域用电等级最低的子时间周期，区域用电等级为同一区域中所有电表在同一子时间周期的用户用电等级的平均值；若到达目标时间周期、且当前电表未满足中继条件，则探测满足中继条件的其他电表作为无线接入点时广播的信标帧，中继条件为独立将所有电表数据成功上报服务器；根据信标帧选择多个满足中继条件的其他电表为中继节点；根据信标帧接入中继节点；当成功接入中继节点时，将目标数据传输至中继节点，以由中继节点将目标数据转发至服务器，目标数据为上报服务器失败的电表数据。在电表自身存在故障或其周边通信环境存在干扰导致电表数据传输失败的情况下，交由其他电表重传电表数据，可以规避电表自身的故障或周边通信环境的干扰，可以提高重传的成功率，并且，电表既可以作为转发电表数据的中继节点、也可以发起重传电表数据，灵活性高，电表之间处于同一拓扑体系，便于实施安全措施，保证电表在重传电表数据时的安全性。实施例二图2为本发明实施例二提供的一种抄表装置的结构示意图。如图2所示，该装置应用于电表，所述装置包括：子时间周期选择模块201，用于在总时间周期中选择为当前所述电表所处的区域分配的多个子时间周期；用电数据查询模块202，用于在当前所述电表中查询在所述总时间周期内记录的用电数据；用户用电等级标记模块203，用于根据所述用电数据对每个所述子时间周期分别标记用户用电等级，所述用户用电等级表示启停用电行为的频繁程度；目标时间周期确定模块204，用于将所述子时间周期及所述用户用电等级发送至服务器，并接收所述服务器发送的目标时间周期，所述目标时间周期为区域用电等级最低的所述子时间周期，所述区域用电等级为同一所述区域中所有所述电表在同一所述子时间周期的所述用户用电等级的平均值；信标帧探测模块205，用于若到达所述目标时间周期、且当前所述电表未满足中继条件，则探测满足中继条件的其他所述电表作为无线接入点时广播的信标帧，所述中继条件为独立将所有电表数据成功上报所述服务器；中继节点选择模块206，用于根据所述信标帧选择多个满足所述中继条件的其他所述电表为中继节点；中继节点接入模块207，用于根据所述信标帧接入所述中继节点；目标数据转发模块208，用于当成功接入所述中继节点时，将目标数据传输至所述中继节点，以由所述中继节点将所述目标数据转发至所述服务器，所述目标数据为上报所述服务器失败的电表数据。在本发明的一个实施例中，所述子时间周期选择模块201还用于：将总时间周期划分出为多个子时间周期；查询在安装当前所述电表时、在当前所述电表中录入的安装地址；在所述安装地址中读取当前所述电表所处的区域的名称；对所述区域的名称计算哈希值；将所述哈希值中的多个字符分别映射至多个所述子时间周期上；将映射有所述字符的多个所述子时间周期分配至所述区域。在本发明的一个实施例中，所述用户用电等级标记模块203还用于：在所述用电数据中读取所述总时间周期内的用电量、作为原始用电量；在所述用电数据中读取每个所述子时间周期内的用电量、作为目标用电量；在所述原始用电量中滤除第一候选用电量、第二候选用电量，所述第一候选用电量为数值最大的部分所述原始用电量，所述第二候选用电量为数值最小的部分所述原始用电量；对滤除剩余的所述原始用电量计算平均值，作为参考用电量；若所述目标用电量与所述参考用电量之间的差值大于预设的阈值，则累积一次启停数值；加载映射表，所述映射表中记录有多个用户用电等级与多个启停范围之间的映射关系；在所述映射中查询包含所述启停数值的所述启停范围，作为目标范围；将所述目标范围映射的所述用户用电等级标记至所述子时间周期。在本发明的一个实施例中，所述信标帧探测模块205还用于：探测无线接入点广播的信标帧，所述信标帧中具有服务集标识；从所述服务集标识中读取位于指定第一位置的字符串；若所述字符串与中继标识、表示所述地区的第一编号相同，则确定探测满足中继条件的其他所述电表作为无线接入点时广播的信标帧。在本发明的一个实施例中，所述中继节点选择模块206还用于：查询各个所述信标帧的信号强度；查询在预设的时间段内，各个其他所述电表满足所述中继条件并广播所述信标帧的频次；从所述服务集标识中读取位于指定第二位置的字符，作为表示其他所述电表在所述地区中安装位置的第二编号；查询表示当前所述电表在所述地区中安装位置的第三编号；计算所述第二编号与所述第三编号之间的差值；基于所述信号强度、所述频次与所述差值对其他所述电表计算中继质量值；选择所述中继质量值最高的多个其他所述电表为中继节点。在本发明的一个实施例中，所述中继节点选择模块206还用于：对所有所述信号强度计算平均值，作为平均强度；通过如下公式对其他所述电表计算中继质量值：其中，S为中继质量值，α为超参数，F为所述频次，L3为第三编号，L2为第二编号，R＇为所述平均强度，R为所述信号强度。在本发明的一个实施例中，所述中继节点接入模块207还用于：从所述信标帧中读取在自定义信息，所述自定义信息具有密文；查询所述服务器为所述区域的所述电表分发的密钥；使用所述密钥对所述密文进行解密，得到其他所述电表随机生成的参考字符；将所述第一编号、所述第二编号与所述参考字符组成目标字符；对所述目标字符生成散列值；从所述散列值中读取指定第三位置的字符，作为密码；使用所述密码接入所述中继节点。本发明实施例所提供的抄表装置可执行本发明任意实施例所提供的抄表方法，具备执行抄表方法相应的功能模块和有益效果。实施例三图3示出了可以用来实施本发明的实施例的电表10的结构示意图。电表旨在表示各种形式的数字计算机，诸如，膝上型计算机、台式计算机、工作台、个人数字助理、服务器、刀片式服务器、大型计算机、和其它适合的计算机。电表还可以表示各种形式的移动装置，诸如，个人数字处理、蜂窝电话、智能电话、可穿戴设备和其它类似的计算装置。本文所示的部件、它们的连接和关系、以及它们的功能仅仅作为示例，并且不意在限制本文中描述的和/或者要求的本发明的实现。如图3所示，电表10包括至少一个处理器11，以及与至少一个处理器11通信连接的存储器，如只读存储器12、随机访问存储器13等，其中，存储器存储有可被至少一个处理器执行的计算机程序，处理器11可以根据存储在只读存储器12中的计算机程序或者从存储单元18加载到随机访问存储器13中的计算机程序，来执行各种适当的动作和处理。在RAM 13中，还可存储电表10操作所需的各种程序和数据。处理器11、ROM12以及RAM 13通过总线14彼此相连。输入/输出接口15也连接至总线14。电表10中的多个部件连接至I/O接口15，包括：输入单元16，例如键盘、鼠标等；输出单元17，例如各种类型的显示器、扬声器等；存储单元18，例如磁盘、光盘等；以及通信单元19，例如网卡、调制解调器、无线通信收发机等。通信单元19允许电表10通过诸如因特网的计算机网络和/或各种电信网络与其他设备交换信息/数据。处理器11可以是各种具有处理和计算能力的通用和/或专用处理组件。处理器11的一些示例包括但不限于中央处理单元、图形处理单元、各种专用的人工智能计算芯片、各种运行机器学习模型算法的处理器、数字信号处理器、以及任何适当的处理器、控制器、微控制器等。处理器11执行上文所描述的各个方法和处理，如抄表方法。在一些实施例中，抄表方法可被实现为计算机程序，其被有形地包含于计算机可读存储介质，例如存储单元18。在一些实施例中，计算机程序的部分或者全部可以经由ROM12和/或通信单元19而被载入和/或安装到电表10上。当计算机程序加载到RAM 13并由处理器11执行时，可以执行上文描述的抄表方法的一个或多个步骤。备选地，在其他实施例中，处理器11可以通过其他任何适当的方式而被配置为执行抄表方法。本文中以上描述的系统和技术的各种实施方式可以在数字电子电路系统、集成电路系统、场可编程门阵列、专用集成电路、专用标准产品、芯片上系统的系统、负载可编程逻辑设备、计算机硬件、固件、软件、和/或它们的组合中实现。这些各种实施方式可以包括：实施在一个或者多个计算机程序中，该一个或者多个计算机程序可在包括至少一个可编程处理器的可编程系统上执行和/或解释，该可编程处理器可以是专用或者通用可编程处理器，可以从存储系统、至少一个输入装置、和至少一个输出装置接收数据和指令，并且将数据和指令传输至该存储系统、该至少一个输入装置、和该至少一个输出装置。用于实施本发明的方法的计算机程序可以采用一个或多个编程语言的任何组合来编写。这些计算机程序可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器，使得计算机程序当由处理器执行时使流程图和/或框图中所规定的功能/操作被实施。计算机程序可以完全在机器上执行、部分地在机器上执行，作为独立软件包部分地在机器上执行且部分地在远程机器上执行或完全在远程机器或服务器上执行。在本发明的上下文中，计算机可读存储介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的计算机程序。计算机可读存储介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。备选地，计算机可读存储介质可以是机器可读信号介质。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。为了提供与用户的交互，可以在电表上实施此处描述的系统和技术，该电表具有：用于向用户显示信息的显示装置或者LCD监视器）；以及键盘和指向装置，用户可以通过该键盘和该指向装置来将输入提供给电表。其它种类的装置还可以用于提供与用户的交互；例如，提供给用户的反馈可以是任何形式的传感反馈；并且可以用任何形式来接收来自用户的输入。可以将此处描述的系统和技术实施在包括后台部件的计算系统、或者包括中间件部件的计算系统、或者包括前端部件的计算系统、或者包括这种后台部件、中间件部件、或者前端部件的任何组合的计算系统中。可以通过任何形式或者介质的数字数据通信来将系统的部件相互连接。通信网络的示例包括：局域网、广域网、区块链网络和互联网。计算系统可以包括客户端和服务器。客户端和服务器一般远离彼此并且通常通过通信网络进行交互。通过在相应的计算机上运行并且彼此具有客户端-服务器关系的计算机程序来产生客户端和服务器的关系。服务器可以是云服务器，又称为云计算服务器或云主机，是云计算服务体系中的一项主机产品，以解决了传统物理主机与VPS服务中，存在的管理难度大，业务扩展性弱的缺陷。实施例四本发明实施例还提供了一种计算机程序产品，该计算机程序产品包括计算机程序，该计算机程序在被处理器执行时实现如本发明任一实施例所提供的抄表方法。计算机程序产品在实现的过程中，可以以一种或多种程序设计语言或其组合来编写用于执行本发明操作的计算机程序代码，程序设计语言包括面向对象的程序设计语言，诸如Java、Smalltalk、C++，还包括常规的过程式程序设计语言，诸如“C”语言或类似的程序设计语言。程序代码可以完全地在用户计算机上执行、部分地在用户计算机上执行、作为一个独立的软件包执行、部分在用户计算机上部分在远程计算机上执行、或者完全在远程计算机或服务器上执行。在涉及远程计算机的情形中，远程计算机可以通过任意种类的网络——包括局域网或广域网—连接到用户计算机，或者，可以连接到外部计算机。应该理解，可以使用上面所示的各种形式的流程，重新排序、增加或删除步骤。例如，本发明中记载的各步骤可以并行地执行也可以顺序地执行也可以不同的次序执行，只要能够实现本发明的技术方案所期望的结果，本文在此不进行限制。上述具体实施方式，并不构成对本发明保护范围的限制。本领域技术人员应该明白的是，根据设计要求和其他因素，可以进行各种修改、组合、子组合和替代。任何在本发明的精神和原则之内所作的修改、等同替换和改进等，均应包含在本发明保护范围之内。
