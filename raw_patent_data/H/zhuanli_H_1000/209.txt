标题title
灯屏设备及灯效中继、驱动控制方法和相应的装置
摘要abst
本申请涉及一种灯屏设备及灯效中继、驱动控制方法和相应的装置，所述中继控制方法包括：接收灯效协议数据，灯效协议数据包括灯组顺位指针和灯效控制数据，灯效控制数据包括按照顺序关系表示的多个灯组控制数据，灯组顺位指针用于指示所述顺序关系中的当前顺位；根据灯组顺位指针所指示的当前顺位，获取灯效控制数据中与该当前顺位相对应的目标灯组控制数据；根据目标灯组控制数据，控制本灯组播放相应的灯效；更新灯效协议数据中的灯组顺位指针使其指向下一顺位，输出该灯效协议数据。本申请使灯屏设备的控制器与灯组之间可以灵活通信，优化灯屏设备的产品使用体验，有助于灯屏设备的推广。
权利要求书clms
1.一种灯效中继控制方法，其特征在于，由灯屏设备中的灯组控制芯片执行如下步骤：接收灯效协议数据，所述灯效协议数据包括灯组顺位指针和灯效控制数据，所述灯效控制数据包括按照顺序关系表示的多个灯组控制数据，所述灯组顺位指针用于指示所述顺序关系中的当前顺位；根据所述灯组顺位指针所指示的当前顺位，获取所述灯效控制数据中与该当前顺位相对应的目标灯组控制数据；根据所述目标灯组控制数据，控制本灯组播放相应的灯效；更新所述灯效协议数据中的灯组顺位指针使其指向下一顺位，输出该灯效协议数据。2.根据权利要求1所述的灯效中继控制方法，其特征在于，根据所述灯组顺位指针所指示的当前顺位，获取所述灯效控制数据中与该当前顺位相对应的目标灯组控制数据，包括：解析所述灯效协议数据，提取出其中的灯组顺位指针和灯效控制数据，所述灯效控制数据中每个灯组控制数据包括多个单元控制数据；以所述灯组顺位指针所指向的当前顺位相对应的数据位置为起点，连续读取与本灯组的发光单元数量相对应的多个单元控制数据，作为本灯组相对应的目标灯组控制数据；根据所述目标灯组控制数据中的各个单元控制数据，对应控制本灯组中的各个发光单元协同播放相应的灯效。3.根据权利要求1所述的灯效中继控制方法，其特征在于，根据所述灯组顺位指针所指示的当前顺位，获取所述灯效控制数据中与该当前顺位相对应的目标灯组控制数据，包括：解析所述灯效协议数据，提取出其中的灯组顺位指针和灯效控制数据，所述灯效控制数据中每个灯组控制数据均包括多个设置了灯组序号的单元控制数据；读取灯组序号与所述灯组顺位指针所指示的当前顺位相匹配的各个单元控制数据，作为本灯组的目标灯组控制数据；根据所述目标灯组控制数据中的各个单元控制数据，对应控制本灯组中的各个发光单元协同播放相应的灯效。4.根据权利要求1所述的灯效中继控制方法，其特征在于，更新所述灯效协议数据中的灯组顺位指针使其指向下一顺位，包括：将所述灯组顺位指针所指示的当前顺位相对应的原数值递增单位数值，作为灯组顺位指针的更新数值，使其指向所述当前顺位的后一顺位；重新封装更新后的灯组顺位指针及所述灯效控制数据，成为更新的灯效协议数据以供发送。5.一种灯效驱动控制方法，其特征在于，由灯屏设备中的控制器的控制芯片执行如下步骤：根据待播放灯效生成灯屏设备中各个灯组相对应的灯组控制数据；按照预定的顺序关系将各个灯组控制数据有序构造为灯效控制数据；初始化灯组顺位指针使其指向所述灯效控制数据中的首个灯组控制数据相对应的顺位，将该灯组顺位指针与所述灯效控制数据封装为灯效协议数据；将所述灯效协议数据发送给灯屏设备中的各个灯组控制芯片以控制各个灯组播放相应的灯效。6.根据权利要求5所述的灯效驱动控制方法，其特征在于，按照预定的顺序关系将各个灯组控制数据有序构造为灯效控制数据，包括：将每个灯组相对应的灯组控制数据关联相应的序号，各个灯组的序号之间按照单位数值规则递增；按照各个灯组的序号对各个灯组控制数据进行排序，将排序后的各个灯组控制数据构造为灯效控制数据。7.根据权利要求5或6所述的灯效驱动控制方法，其特征在于，将所述灯效协议数据发送给灯屏设备中的各个灯组控制芯片以控制各个灯组播放相应的灯效，包括：所述控制器的控制芯片将其封装的灯效协议数据发送给第一灯组控制芯片，第一灯组控制芯片根据权利要求1至4中任意一项所述的灯效中继控制方法播放灯效及更新转发所述灯效协议数据给第二灯组控制芯片；第二灯组控制芯片根据第一灯组控制芯片完全相同的方法播放灯效及更新转发所述灯效协议数据给第三灯组控制芯片。8.一种灯效中继控制装置，实现于灯屏设备的灯组控制芯片中，其特征在于，包括：数据接收模块，设置为接收灯效协议数据，所述灯效协议数据包括灯组顺位指针和灯效控制数据，所述灯效控制数据包括按照顺序关系表示的多个灯组控制数据，所述灯组顺位指针用于指示所述顺序关系中的当前顺位；灯组提取模块，设置为根据所述灯组顺位指针所指示的当前顺位，获取所述灯效控制数据中与该当前顺位相对应的目标灯组控制数据；灯效播放模块，设置为根据所述目标灯组控制数据，控制本灯组播放相应的灯效；数据转发模块，设置为更新所述灯效协议数据中的灯组顺位指针使其指向下一顺位，输出该灯效协议数据。9.一种灯效驱动控制装置，实现于灯屏设备的控制器的控制芯片中，其特征在于，包括：数据生成模块，设置为根据待播放灯效生成灯屏设备中各个灯组相对应的灯组控制数据；数据构造模块，设置为按照预定的顺序关系将各个灯组控制数据有序构造为灯效控制数据；指针配置模块，设置为初始化灯组顺位指针使其指向所述灯效控制数据中的首个灯组控制数据相对应的顺位，将该灯组顺位指针与所述灯效控制数据封装为灯效协议数据；发送驱动模块，设置为将所述灯效协议数据发送给灯屏设备中的各个灯组控制芯片以控制各个灯组播放相应的灯效。10.一种灯屏设备，包括控制器和至少一个灯组，每个控制器包括控制芯片，每个灯组包括灯组控制芯片及受控于该灯组控制芯片的多个发光单元，其特征在于，所述灯组控制芯片执行如权利要求1至4中任意一项所述的方法的步骤，所述控制器的控制芯片执行如权利要求5至7中任意一项所述的方法的步骤。
说明书desc
技术领域本申请涉及照明控制领域，尤其涉及一种灯屏设备及灯效中继、驱动控制方法和相应的装置。背景技术随着人们经济水平的提升，灯屏设备越来越普及。灯屏设备作为智能灯具的一种，可以起到装饰室内空间效果、展示信息的作用。灯屏设备的特点是采用视觉上粒度较大的灯珠作为基本像素，其通过其灯屏的不同实现方式表现为多种形式的产品，例如：窗帘灯、像素屏、拼接灯等。灯屏设备的功能之一，是根据给定的参考图像生成相应的灯光效果。灯屏设备通常由控制器与多个灯组通信连接构成，其中，灯组可以实现为多种形态，例如，窗帘灯和像素屏形式的产品，其灯组通常由多条发光灯带构成，每个发光灯带都有多个发光单元；拼接灯形式的产品，其灯组通常是一个固定形状的灯块，灯块中按照预设的方式排列多个发光单元。通常，每个灯组都有一个控制芯片，称为灯组控制芯片，其与控制器中的控制芯片，基于串行通信协议建立通信连接。控制器的控制芯片事先为各个灯组控制芯片确定其顺序标识，需要控制各个灯组播放相应的灯效时，按照每个灯组的顺序构造每个灯组相应的灯效控制数据，即灯组控制数据，在灯组控制数据中写下相应灯组的顺序标识，然后发送给各个灯组控制芯片，各个灯组控制芯片也按序调用相应的灯组控制数据以播放灯效。可见，控制器的控制芯片需要先对各个灯组控制芯片进行检测，确定各个灯组控制芯片在通信链路中的顺序，然后为各个灯组控制芯片指定其地址标识，后续便可根据这个地址标识，进行灯效控制数据的对应，但是，灯组控制芯片自身无法自行感知自身的顺序位置。正常情况下，控制器与灯组的这种通信机制可以发挥正常播放灯效的作用。一旦用户拆装或者增加个别灯组，而控制器未刷新各个灯组的顺序位置时，必然导致灯效播放出错，由此可见，灯屏设备中控制器与灯组之间传统的通信机制，欠缺灵活性，无法适应灵活扩展或收缩灯组的需要而提供良好的操作兼容性。发明内容本申请的目的在于提供一种灯屏设备及灯效中继、驱动控制方法和相应的装置。根据本申请的一个方面，提供一种灯效中继控制方法，包括：接收灯效协议数据，所述灯效协议数据包括灯组顺位指针和灯效控制数据，所述灯效控制数据包括按照顺序关系表示的多个灯组控制数据，所述灯组顺位指针用于指示所述顺序关系中的当前顺位；根据所述灯组顺位指针所指示的当前顺位，获取所述灯效控制数据中与该当前顺位相对应的目标灯组控制数据；根据所述目标灯组控制数据，控制本灯组播放相应的灯效；更新所述灯效协议数据中的灯组顺位指针使其指向下一顺位，输出该灯效协议数据。根据本申请的另一方面，提供一种灯效驱动控制方法，包括：根据待播放灯效生成灯屏设备中各个灯组相对应的灯组控制数据；按照预定的顺序关系将各个灯组控制数据有序构造为灯效控制数据；初始化灯组顺位指针使其指向所述灯效控制数据中的首个灯组控制数据相对应的顺位，将该灯组顺位指针与所述灯效控制数据封装为灯效协议数据；将所述灯效协议数据发送给灯屏设备中的各个灯组控制芯片以控制各个灯组播放相应的灯效。根据本申请的另一方面，提供一种灯效中继控制装置，包括：数据接收模块，设置为接收灯效协议数据，所述灯效协议数据包括灯组顺位指针和灯效控制数据，所述灯效控制数据包括按照顺序关系表示的多个灯组控制数据，所述灯组顺位指针用于指示所述顺序关系中的当前顺位；灯组提取模块，设置为根据所述灯组顺位指针所指示的当前顺位，获取所述灯效控制数据中与该当前顺位相对应的目标灯组控制数据；灯效播放模块，设置为根据所述目标灯组控制数据，控制本灯组播放相应的灯效；数据转发模块，设置为更新所述灯效协议数据中的灯组顺位指针使其指向下一顺位，输出该灯效协议数据。根据本申请的另一方面，提供一种灯效驱动控制装置，包括：数据生成模块，设置为根据待播放灯效生成灯屏设备中各个灯组相对应的灯组控制数据；数据构造模块，设置为按照预定的顺序关系将各个灯组控制数据有序构造为灯效控制数据；指针配置模块，设置为初始化灯组顺位指针使其指向所述灯效控制数据中的首个灯组控制数据相对应的顺位，将该灯组顺位指针与所述灯效控制数据封装为灯效协议数据；发送驱动模块，设置为将所述灯效协议数据发送给灯屏设备中的各个灯组控制芯片以控制各个灯组播放相应的灯效。根据本申请的另一方面，提供一种灯屏设备，包括控制器和至少一个灯组，每个控制器包括控制芯片，每个灯组包括灯组控制芯片及受控于该灯组控制芯片的多个发光单元，所述灯组控制芯片执行所述灯效中继控制方法的步骤，所述控制器的控制芯片执行所述灯效驱动控制方法的步骤。相对于现有技术，本申请具有多方面优势，包括但不限于：首先，本申请在灯屏设备中用于控制灯组播放相应的灯效的灯效协议数据中，不再为每个灯组相对应的灯组控制数据一一对应设置其顺序标识，转而只是提供一个灯组顺位指针用于指示一个当前顺位，由灯组控制芯片将这个顺位指针所表示的当前顺位所指向的灯组控制数据默认为自身所使用的目标灯组控制数据，根据目标灯组控制数据控制本灯组播放灯效，然后再将灯效协议数据中的灯效顺位指针后推使其指向下一顺位，再转发该灯效协议数据以实现中继，使在后的灯组根据相同的方式，仍能顺利获取自身相对应的灯组控制数据，由此以新的通信方式实现对各个灯组的灯效的播放控制。其次，在本申请的灯组顺位指针发挥指示作用的情况下，各个灯组控制芯片只需按照标准化的流程，便可顺利播放灯效，因此，即使灯屏设备中的个别灯组被拆卸、换装，或者增加个别灯组，且控制器未对各个灯组的连接顺序进行检测，只要控制器所封装的灯效协议数据中包含有足量的灯组相对应的灯组控制数据，灯屏设备中的各个灯组控制芯片，依然可以获取自身相对应的目标灯组控制数据来控制自身的发光单元播放相应的灯效。理论上，控制器可以不再依赖自检，只要预先指定灯组数量即可进行多灯组的灯效控制，大大简化了控制器与灯组之间的通信复杂度。此外，本申请改进了灯屏设备中的控制器与灯组之间的通信机制，实现对灯屏设备的技术升级，灯屏设备的接受度更高，更易普及，其潜在经济收益明显提升。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例中的灯屏设备的电气结构的原理示意图；图2和图3为本申请示例性的灯屏设备的结构形态，其中，图2的灯屏被布局成窗帘灯形态，图3的灯屏被布局成拼接灯形态；图4为本申请实施例中灯效中继控制方法的流程示意图；图5为本申请实施例中根据灯组顺位指针相对应的数据位置获取目标灯组控制数据以播放灯效的流程示意图；图6为本申请实施例中根据灯组顺位指针相对应的灯组序号获取目标灯组控制数据以播放灯效的流程示意图；图7为本申请实施例中灯效驱动控制方法的流程示意图；图8为本申请实施例中的灯效中继控制装置的结构示意图；图9为本申请实施例中的灯效驱动控制装置的结构示意图；图10为本申请实施例中的计算机设备的结构示意图。具体实施方式请参阅图1，本申请一种实施例提供的一种灯屏设备的结构示意图中可以看出，所述灯屏设备包括控制器1和灯屏2，灯屏2与控制器1电性连接，以便接受控制器1中运行的计算机程序的控制协同工作，实现灯效播放。控制器1通常包括控制芯片、通信组件以及总线接头，在一些实施例中，控制器1还可以按需配置电源适配器、控制面板、显示屏等。电源适配器主要用于将市电转换为直流电，以便为整个灯屏设备供电。控制芯片可采用各种嵌入式芯片实现，例如蓝牙SoC、WiFi SoC、MCU、DSP等各种类型的芯片，控制芯片通常包括中央处理器和存储器，存储器和中央处理器分别用于存储和执行程序指令，以实现相应的功能。以上各种类型的控制芯片，可以自带通信组件，也可按需额外配置通信组件。通信组件可以用于与外部设备通信，例如，可以与个人计算机或各种智能手机之类的终端设备通信，以便用户通过其终端设备下达各种配置指令之后，控制器1的控制芯片可以通过通信组件接收配置指令，完成基础配置，以便控制灯屏工作。此外，控制器1还可以通过通信组件获取封装了多个灯效图层的灯效应用包。总线接头主要用于为接入总线的灯屏2接入电源并提供灯效播放指令，因而对应提供电源总线和信号总线相对应的针脚，由此，当灯屏2需要接入控制器1时，通过灯屏相应的接头与所述总线接头连接即可。控制面板通常提供一个或多个按键，用于对控制器1实施开关控制、选择各种预设的灯效控制方式等等。显示屏可用于显示各种控制信息，以便与所述控制面板中的按键相配合，支持人机交互功能的实现。一些实施例中，控制面板与所述显示屏可以集成到同一触控显示屏中。灯屏由多个灯组22相拼接构成，所以，各个灯组22通常串接在同一通信链路上以接入控制器的控制芯片。每个灯组22通常由多个发光单元构成，且通过一个专门的控制芯片，称为灯组控制芯片，对该灯组22的各个发光单元进行统一控制。根据灯组22的实现形式不同，灯屏的具体产品形态也相应不同，较为常见的产品形态包括但不限于窗帘灯、像素屏、拼接灯等。灯组控制芯片，可以按照前文所揭示进行选型，或者选取其它更为经济的嵌入式控制芯片，其作用主要在于与控制器的控制芯片通信，以便处理控制器的灯效协议数据，一方面根据灯效协议数据控制自有的发光单元播放灯效，另一方面也可按需实现对灯效协议数据的中继。例如，图2中的灯屏被布局成窗帘灯的样态，该灯屏2包括多个灯组22，其中的灯组22表现为由多条发光灯带21构成的形态，每个灯组22包括连接在总线上的多条发光灯带21，每条发光灯带21都包括多个串接而成的灯珠210，通常各条发光灯带21的灯珠210数量相同，而且等间距排列。作为窗帘灯使用的灯屏2在被使用时，通常按照如图2所示的布局展开其各个灯组22的各条发光灯带21，由此使全部发光灯带21中的全部灯珠按照阵列的方式进行布局，形成灯珠矩阵结构，由于全部灯珠协同发光时能够提供画幅效果，所以，整个灯珠矩阵结构所在的面便构成一个显示画幅4，当播放灯效时，便可以在该显示画幅4范围内形成一定的图案效果。每个发光灯带21可由多个灯珠210串接而成，每个灯珠210是一个发光单元，受控于同一灯组控制芯片的一条或数条发光灯带21，由接入总线的同一组线缆传输工作电流，同一发光灯带21的各个灯珠210之间，在电性连接关系上，可以采用并联的方式进行连接。一种实施例中，同一灯珠矩阵结构中的各个发光灯带21，可以沿总线方向等间距设置，且各个发光灯带21的灯珠210之间，在数量和位置上，也对应设置，这样，整个显示画幅4在远距离观看其发光效果时，起到类似屏幕的作用，能够在人眼视觉上形成图案效果。灯屏2的每条发光灯带21的每个灯珠210中，也设置有相应的控制芯片，可称为发光控制芯片，该发光控制芯片可以按照前文所揭示进行选型，或者选取其它更为经济的控制芯片，其作用主要在于能够从灯组控制芯片解析灯效协议数据后提取的灯组控制数据中进一步提取出本灯珠210相对应的发光颜色值，控制本灯珠210内的发光元件发出相应的色光。在一些实施例中，发光元件可以由多个发射不同原色的LED灯构成。像素屏的实现原理基本与窗帘灯以上的实现原理相同，但像素屏会提供用来固定各个发光单元的框架，将各个发光单元按照行列矩阵的方式排布在同一矩形框架内，得到更近似于日常显示屏幕的产品形态效果。像素屏与窗帘灯同理，可以按照多个灯组、多条发光灯带进行并排的结构来组织各个发光单元，且可应用窗帘相同的控制方式进行控制，因此恕不再赘述。图3进一步揭示本申请的灯屏设备中的灯屏的另一种形态，其本质上是一种拼接灯，灯屏中的灯组22被表现成块状结构形态而成为灯块，拼接灯中的灯屏2由一个或多个灯块构成。拼接灯的灯块内部，包括标准化设置在灯块的不同位置的多个发光单元，每个发光单元也可以设置相应的发光控制芯片，用来从相应的灯组控制数据中提取对应本发光单元的控制数据转换生成相应的发光控制信号，通过该发光控制信号控制相应的发光单元中的发光元件按照特定的发光颜色值进行发光。而灯块作为灯组22，也可以设置一个独立的灯组控制芯片对其中的全部发光单元进行发光控制，这个灯组控制芯片可以向各个发光单元的发光控制芯片传输相应的控制数据来达到集中控制的目的，当然，整个灯块也可以由单个控制芯片来直接控制各个发光单元以达到相应的灯效播放目的。这主要视灯块及其发光单元所采用的控制芯片的能力而灵活设计，不影响本申请的创造精神的体现。根据这些原理可知，对于一个灯块来说，既可以统一控制其全部发光单元同时发光，也可以把控制粒度具体到各个发光单元，控制粒度越精细，所生成的灯效便越细腻。不同灯块形态的灯块之间，可以相互拼接，例如在六边形灯块的外围任意一条结构边处邻接一个四边形的灯块，不难理解，通过搭配不同灯块形态的灯块，可以构造出更为丰富的面阵图案。当需要控制各个灯块播放相应的灯效时，通过协调控制各个灯块的各个发光单元发光，便可呈现一个显示画幅4，展示相应的灯效。本申请的灯屏设备，当其上电时，控制器的控制芯片可以从存储器中调用执行计算机程序，通过该计算机程序默认的初始化流程，为灯屏上电并实现初始化，完成对灯屏和其他硬件设备的驱动配置。控制器在启动灯屏时，可以通过其控制芯片先向灯屏发送自检指令，驱动灯屏的各个灯组22的灯组控制芯片进行响应，控制器的控制芯片根据各个灯组控制芯片进行响应而提交的连接信息所表示的顺序，便可确定通信链路中存在的灯组数量和顺序关系。进一步，各个灯组控制芯片通常也可以将统一管控的各个发光单元的布局信息提交给控制器的控制芯片，以便控制器后续可以根据各个灯组22的发光单元的布局信息生成灯效控制数据。控制器与各个灯组22之间执行的串行通信协议，可以是IIC、SPI、UART中任意一项。控制器从总线获得各个灯组22以及每个灯组22中的各个发光单元的布局信息后，便可确定各个发光单元在整个灯屏所呈现的显示画幅4中的位置，由此可以将每个发光单元理解为一个基本像素，可将各个发光单元的位置信息构造为光源位置分布信息，后续控制器在构造灯效控制数据时，可以根据光源位置分布信息中各个灯珠也即各个发光单元的位置信息，按照实际需要，为每个基本像素设置其相应的发光颜色值，构成每个灯组相对应的灯效控制数据作为相应的灯组控制数据，由全部灯组控制数据构成整个灯屏相对应的灯效控制数据。控制器的控制芯片进一步根据协议将整个灯屏相对应的灯效控制数据封装为灯效协议数据，沿通信链路下行发送给各个灯组控制芯片，以由各个灯组控制芯片根据灯效协议数据中与自身相应的灯效控制数据执行灯效的展现。一些实施例中，本申请的控制器1可以在独立的计算机设备中实现，只要该计算机设备配备控制器1相应的硬件，以及将控制器1相应的业务逻辑包括本申请的相应方法所执行的业务逻辑，实现为计算机程序安装在该计算机设备中运行即可。当控制器1在计算机设备中实现时，可以共用计算机设备固有的各种资源以节省整体实现成本。此处所称的计算机设备，可以是任意供用户使用的终端设备，例如智能手机、个人计算机、笔记本电脑，平板电脑等。根据以上灯屏设备的产品架构和工作原理，本申请的灯效驱动控制方法，可以实现为计算机程序，存储于灯屏设备的控制器的存储介质中，由控制器的控制芯片从该存储介质中调用后运行，以便控制整个灯屏中的各个灯组播放相应的灯效。本申请的灯效驱动控制方法，可以实现为计算机程序，存储于灯屏设备的灯组的存储介质中，由该灯组中的灯组控制芯片从该存储介质中调用后运行，以便控制本灯组播放相应的灯效。请参阅图4，在一个实施例中，本申请的灯效中继控制方法，其应用于灯屏设备的灯组的灯组控制芯片中，该灯组控制芯片执行如下步骤，包括：步骤S5100、接收灯效协议数据，所述灯效协议数据包括灯组顺位指针和灯效控制数据，所述灯效控制数据包括按照顺序关系表示的多个灯组控制数据，所述灯组顺位指针用于指示所述顺序关系中的当前顺位；本申请中，灯屏设备中每个灯组所采用的灯组控制芯片，均写入本方法相对应的业务逻辑，因而，每个灯组控制芯片都可以完全相同的方式处理其从灯屏设备的通信链路中所接收到的灯效协议数据，其中包括提取出与灯组自身相对应的灯效控制数据即灯组控制数据来控制灯组内部的各个发光单元协同播放相应的灯效，也包括实现对该灯效协议数据的中继转发。不难理解，对于灯屏设备的通信链路中作为末端节点的灯组来说，由于其后续没有其它灯组，所以，其转发不起作用，并不影响灯屏设备的功能实现。如前文所揭示，本申请的灯效协议数据是由灯屏设备的控制器负责封装的，其中包括灯效控制数据，灯效控制数据中包含对应多个灯组而提供的各个灯组控制数据。控制器按照其所知晓的灯组数量生成对应个数的灯组控制数据，但在一些特殊情况下，如果灯屏设备中的灯组发生了拆装、增设等情况，且控制器并未对灯屏设备中实际的灯组数量进行更新时，灯效控制数据中提供的灯组控制数据的数量则未必与灯屏设备中灯组的实际数量相对应。在本申请中，这种情况并不影响各个灯组控制芯片发挥其应有的作用。灯效协议数据内，灯效控制数据中的各个灯组控制数据，通常按照给定的顺序关系进行排列或者设定顺序。该顺序关系可以根据控制器的控制芯片向各个灯组发放自检指令后，各个灯组返回其相应的连接信息的顺序来确定。由于每个灯组的连接信息会被表示到灯屏相对应的光源位置分布信息中，因此，也可以根据控制器已经生成的光源位置分布信息来确定该顺序关系。灯效控制数据中的各个灯组控制数据，每个灯组控制数据都包含有其相应的灯组内各个发光单元相对应单元控制数据，每个单元控制数据通常占据确定的字长。一种实施例中，根据该顺序关系，可以将每个灯组控制数据中的各个单元控制数据，按照相应灯组的各个发光单元在布局信息中的顺序关系，直接有序排列成灯组控制数据，再将各个灯组控制数据按照灯组之间的顺序关系有序排列构成灯效控制数据，由此，使灯组控制数据无需以特定的序号命名来关联，只需按照灯效控制数据中的各个灯组相对应的单元控制数据的数量，便可确定各个灯组的灯组控制数据。另一实施例中，可以按照矩阵的形式，通过一个多维数组来表示各个灯组的灯组控制数据。以单元控制数据为单个维度的数据为例，可以构建二维数组，其中第一维表示灯组在顺序关系中的序数名称，第二维表示灯组中的发光单元的序数名称。由此，全部灯效控制数据便可通过单个数组完成表示。在本申请中，灯效协议数据还包括灯组顺位指针，该灯组顺位指针用于指示出灯屏中各个灯组之间的顺序关系中的一个顺位以作为当前顺位。一种实施例中，灯组顺位指针可以采用数值来表示，通常是整数值，以便表示出给定的顺序关系中的当前顺位。例如，可以采用0、1、2……这样的自然数值作为该灯组顺位指针的数值。另一实施例中，当灯组控制数据本身关联了相应的序数名称时，也可以将灯组顺位指针表示为其中的一个序数名称。总之，在逻辑上，灯效控制数据中的各个灯组控制数据，无论其是按照顺序关系进行排列，还是关联序号名称进行标注，均能实现在逻辑上对各个灯组控制数据的排序，从而呈现该顺序关系，而灯组顺位指针则可以基于不同的逻辑排序方式，初始化为指向该顺序关系中的一个确定的顺位，该顺位将被接收该灯效协议数据的灯组控制芯片作为对应该灯组控制芯片的当前顺位，由该灯组控制芯片根据该当前顺位确定该灯组控制芯片相对应的灯组控制数据。通常，控制器的控制芯片初始发送的灯效协议数据中，其灯组顺位指针通常被初始化为指向为灯效控制数据中的第一个灯组控制数据，以便后续各个灯组控制芯片可通过规则递增的方式，控制灯组顺位指针有序游移，以顺次指向各个灯组。对于当前灯组的灯组控制芯片来说，视当前灯组在灯屏设备的通信链路的灯组顺序关系中的位置不同，提供该灯效协议数据的上级部件也有所不同，例如，对于通信链路中的首个灯组来说，其接收到的灯效协议数据便是控制器的控制芯片原始发送的，非首个灯组来说，其接收到的灯效协议数据便是其上一级的灯组控制芯片重新封装后转发的。步骤S5200、根据所述灯组顺位指针所指示的当前顺位，获取所述灯效控制数据中与该当前顺位相对应的目标灯组控制数据；由于灯组顺位指针中指示出一个顺位，当前灯组的灯组控制芯片，便可将该顺位理解为与自身相对应的，用于在灯组间顺序关系中确定自身所需的灯组控制数据相对应的当前顺位。据此，当前灯组的灯组控制芯片，根据该灯组顺位指针所指示的当前顺位，便可在灯效协议数据的灯效控制数据中，确定出与当前顺位相对应的灯组控制数据，将该灯组控制数据提取出来作为本灯组相对应的目标灯组控制数据即可。步骤S5300、根据所述目标灯组控制数据，控制本灯组播放相应的灯效；对于本灯组来说，其所获得的目标灯组控制数据中，包含有对应本灯组各个发光单元提供的单元控制数据，而且，这些单元控制数据通常也已经按照本灯组中各个发光单元在本灯组的通信链路中的顺序关系排好顺序，据此，本灯组的灯组控制芯片可以直接将目标灯组控制数据沿其内部的通信链路下行发送给各个发光单元的发光控制芯片。每个发光单元的发光控制芯片接收到目标灯组控制数据后，获取目标灯组控制数据中对应自身的单元控制数据，将该单元控制数据转换为相应的控制信号，控制自身的发光元件发出该单元控制数据中指定的发光颜色值相对应的色光。各个发光单元都按照这样的方式工作，从而，整个灯组的全部发光单元，便可以协同呈现本灯组相对应的灯光效果，实现相应灯效的播放。同理，全部灯组都按照相同的原理播放各自对应部分的灯效，整个灯屏也就通过全部灯组协同呈现了全部灯效。步骤S5400、更新所述灯效协议数据中的灯组顺位指针使其指向下一顺位，输出该灯效协议数据。当本灯组的灯组控制芯片从灯效协议数据中提取出本灯组相对应的目标控制数据，便可据之播放相应的灯效，由此，便可调整灯效协议数据中的灯组顺位指针，对其原数值进行修改，将其修改为对应灯组间顺序关系中的下一顺位，以便使该灯组顺位指针所指示的当前顺位发生实际变化，使该当前顺位刚好指向通信链路中，本灯组之后的下一灯组相对应的灯组控制数据。然后，本灯组的灯组控制芯片，便可以将更新了灯组顺位指针的灯效协议数据，通过通信链路发送给拼接在本灯组之后的下一灯组的灯组控制芯片。不难理解，下一灯组控制芯片也将按照本灯组的灯组控制芯片完全相同的方式工作而实现灯效播放和灯组顺位指针的修改以及灯效协议数据的转发，以此类推，使灯屏设备的通信链路中的各个灯组均能获得自身相对应的灯组控制数据，控制其各个发光单元相应发光，从而全面协调播放由灯效协议数据所定义的整个灯效。进一步变通的一个实施例中，每个发光单元的发光控制芯片，同样也可按照以上步骤S5100至步骤S5400中，本申请的灯组控制芯片与控制器的控制芯片通信完全相同的方式建立通信机制，由本灯组的灯组控制芯片将相应的目标灯组控制数据，添加本灯组内应用的灯珠顺位指针，初始化该灯珠顺位指针指向该目标灯组控制数据中的首个单元控制数据，构成灯组协议数据，然后通过本灯组内部的通信链路将目标灯组协议数据发送给各个发光单元的发光控制芯片。每个发光单元的发光控制芯片接收到目标灯组协议数据之后，根据其中的灯珠顺位指针所指示的当前顺位，提取自身相对应的单元控制数据用于转换成发光控制信号以控制自身的发光元件发光，并将灯珠顺位指针按顺序推进至下一发光单元相对应的顺位而实现更新，再将更新后的灯珠顺位指针与目标灯组控制数据转发给下一发光单元的发光控制芯片，以此类推，即可确保各个发光控制芯片都可以准确获取自身相对应的单元控制数据，用来控制自身的发光元件发光。由此可见，按照本实施例，整个灯屏设备中，无论是控制器的控制芯片与灯组的灯组控制芯片之间，还是灯组内部的灯组控制芯片与发光单元的发光控制芯片之间，均可以实施同一协议，全面提升各控制芯片之间的通信效率，不仅能使灯组可灵活拆卸、换装、新增，而且，同理对于任一灯组来说，其中的发光单元的灵活拆卸、换装、新增等也同样更为灵活。根据以上实施例，可以知晓，本申请具有多方面优势，包括但不限于：首先，本申请在灯屏设备中用于控制灯组播放相应的灯效的灯效协议数据中，不再为每个灯组相对应的灯组控制数据一一对应设置其顺序标识，转而只是提供一个灯组顺位指针用于指示一个当前顺位，由灯组控制芯片将这个顺位指针所表示的当前顺位所指向的灯组控制数据默认为自身所使用的目标灯组控制数据，根据目标灯组控制数据控制本灯组播放灯效，然后再将灯效协议数据中的灯效顺位指针后推使其指向下一顺位，再转发该灯效协议数据以实现中继，使在后的灯组根据相同的方式，仍能顺利获取自身相对应的灯组控制数据，由此以新的通信方式实现对各个灯组的灯效的播放控制。其次，在本申请的灯组顺位指针发挥指示作用的情况下，各个灯组控制芯片只需按照标准化的流程，便可顺利播放灯效，因此，即使灯屏设备中的个别灯组被拆卸、换装，或者增加个别灯组，且控制器未对各个灯组的连接顺序进行检测，只要控制器所封装的灯效协议数据中包含有足量的灯组相对应的灯组控制数据，灯屏设备中的各个灯组控制芯片，依然可以获取自身相对应的目标灯组控制数据来控制自身的发光单元播放相应的灯效。理论上，控制器可以不再依赖自检，只要预先指定灯组数量即可进行多灯组的灯效控制，大大简化了控制器与灯组之间的通信复杂度。此外，本申请改进了灯屏设备中的控制器与灯组之间的通信机制，实现对灯屏设备的技术升级，灯屏设备的接受度更高，更易普及，其潜在经济收益明显提升。在本申请的灯效中控制方法的任意实施例的基础上，请参阅图5，根据所述灯组顺位指针所指示的当前顺位，获取所述灯效控制数据中与该当前顺位相对应的目标灯组控制数据，包括：步骤S5211、解析所述灯效协议数据，提取出其中的灯组顺位指针和灯效控制数据，所述灯效控制数据中每个灯组控制数据包括多个单元控制数据；控制器的控制芯片通常按照与灯组控制芯片预协议的格式，封装出本申请的灯效协议数据，通信链路中，负责中继的各个灯组控制芯片，也同理按照预协议的格式，重新封装出灯效协议数据，因此，对于任意一个灯组控制芯片来说，其获得的灯效协议数据，均可依照预设协议对其进行解析。灯组控制芯片解析灯效协议数据之后，便可从协议头部得到其所携带的灯组顺位指针，并从协议数据区中得到其所携带的灯效控制数据。关于灯组顺位指针和灯效控制数据的数据内容和数据格式可参阅前文各实施例所揭示，其中，灯效控制数据包含有多个灯组相对应的多个灯组控制数据，且每个灯组控制数据也包含有相应灯组内各个发光单元相对应的单元控制数据，这些单元控制数据封装其相应的发光单元的发光控制参数，例如发光颜色值等，可以用于转换成发光控制信号而控制相应的发光单元发光。步骤S5212、以所述灯组顺位指针所指向的当前顺位相对应的数据位置为起点，连续读取与本灯组的发光单元数量相对应的多个单元控制数据，作为本灯组相对应的目标灯组控制数据；视本灯组所处通信链路中的顺序位置不同，从灯效协议数据中提取获得的灯组顺位指针，已经通过控制器的控制芯片的初始化赋值，或者通过本灯组的上一级灯组控制芯片的修改，而确定了其所指向的当前顺位，这个当前顺位对应指向灯效协议数据中的灯效控制数据中的一个灯组控制数据，由此，便可根据灯组顺位指针所指示的当前顺位，从灯效控制数据中确定该当前顺位相对应的灯组控制数据，以便将该灯组控制数据使用本灯组相对应的目标灯组控制数据使用。本实施例中，灯效控制数据中，每个灯组相对应的灯组控制数据中包括多个单元控制数据，为了节省数据量，这些单元控制数据未关联相应的序数名称，也即未关联相应的变量，仅仅是将这些单元控制数据按照灯组中发光单元固有的顺序关系进行排列，同理，各个灯组控制数据之间，也未关联相应的变量或序数名称，而直接按照灯组之间的顺序关系直接拼接各个灯组控制数据，所以，整个灯效控制数据，是一个由全部灯组中全部发光单元相对应的单元控制数据所构成的有序队列。但是，灯组顺位指针中的数值的表示，通常却是以自然数字进行表示的，例如，其可以是0、1、2……这样的自然数字，这导致灯组顺位针对所指示的顺位，与灯组控制数据的数据位置之间，需要建立相应的寻址关系。据此，本实施例根据灯组顺位指针所指示的当前顺位获取目标灯组控制数据时，可先将当前顺位转换为对应到灯效控制数据中的数据位置，再从该数据位置开始取值，获取本灯组的发光单元数据相对应的多个单元控制数据，由此得到本灯组相对应的目标灯组控制数据。示例而言，假设每个灯组中发光单元的数量都是520个，而灯组顺位指针的数值为pos，那么，可以灯组顺位指针所表示的当前顺位所对应的数据位置便是pos*520，灯效控制数据中的单元控制数据编码顺序和灯组顺位指针的数值pos均是以0为其初始值进行表示的话，那么，对于第一灯组来说，其pos=0，则其当前顺位在灯效控制数据中相对应的数据位置便是0，由于每个灯组都有520个发光单元，所以，第一灯组相对应的目标灯组控制数据便是第0-519个单元控制数据；同理，对于第二灯组来说，其pos=1，则其当前顺位在灯效控制数据中相对应的数据位置便是520,其相对应的目标灯组控制数据便是第520-1039个单元控制数据。以此类推，各个灯组控制芯片都可以按照相同的方式提取到其自身相对应的目标灯组控制数据。当然，在一些实施例中，每个灯组中的发光单元数量未必相等，针对这种情况，灯组顺位指针可以按照每个灯组的发光单元数量来设定数值，通过该数值直接指向灯效控制数据中具体的数据位置，使其对当前顺位的指示更为高效。示例而言，设第一灯组的发光单元数量是520，其所获得的灯组顺位指针的数值为初始值0，此时，根据第一灯组的发光单元数量，第一灯组的灯组控制芯片，从灯效控制数据中提取第0-519个单元控制数据作为其灯组控制数据，然后，第一灯组的灯组控制芯片，将其发光单元数据与该灯组顺位指针的原数值进行相加，使灯组顺位指针的数值更新为pos=520，表示前面519个单元控制数据已经被提取。然后重新封装灯效协议数据转发给第二灯组的灯组控制芯片。第二灯组的灯组控制芯片，根据其发光单元数量1080个，在其所获得的灯组顺位指针的数值pos=520的基础上，确定当前顺位相对应的数据位置处相对应的单元控制数据，开始连续读取1080个单元控制数据作为第二灯组相对应的目标灯组控制数据，同时，将灯组顺位指针更新为pos=520+1080=1600，由此将灯组顺位指针前推至下一灯组相对应的顺位，并定位好相应的数据位置。以此类推，同样可以发挥灯组顺位指针用于指示灯组相对应的顺位的作用。步骤S5213、根据所述目标灯组控制数据中的各个单元控制数据，对应控制本灯组中的各个发光单元协同播放相应的灯效。由于灯效控制数据是对应每个灯组的每个发光单元生成的，所以，获得目标灯组控制数据的当前灯组的灯组控制芯片，便可根据其所获得的目标灯组控制数据中的各个单元控制数据，控制本灯组的各个发光单元进行发光而协同播放本灯组所负责的灯效。具体的控制方式可以参阅前文所揭示，恕不赘述。根据以上实施例可以知晓，灯效协议数据可以无需为其中的各个灯组控制数据以及每个灯组控制数据中的各个单元控制数据进行相应的序数设定，可以节省灯效控制数据的字节数，考虑到灯屏设备所采用的控制芯片多为嵌入式芯片，其算力有限，而每个灯组的发光单元数量又较多，每个发光单元、每个灯组都能节省相应的序数时，便能成倍地缩小灯效协议数据的数据长度，简化协议复杂度，使灯效协议数据无论是在传输效率上还是处理效率上，都能够得到明显的提升，从而缩短各个控制芯片处理灯效协议数据的时间消耗，由此，每个灯效协议数据都可以在更小的时隙范围内完成相应的处理，灯屏设备播放灯效时的刷新频率便可以更高，不同播放帧之间的切换耗时更短，帧间过渡便更为自然细腻，能够有效提升灯效品质。此外，当每个灯组都可以根据自身的发光单元数量来移动灯位顺序指针使其所表示的数值对应到灯效控制数据中的具体数据位置时，实际上便为灯屏设备扩展了拼接多种不同形态灯组的灵活性，也就是说，灯屏设备中可以由两种以上发光单元数量不同的灯组拼接而成，不同灯组的发光单元数量虽然不同，但由于其能够通过将发光单元数量与灯组顺位指针的原数值相加以更新灯组顺位指针的位置，在这种情况下，即使每个灯组的发光单元数量不同，每个灯组控制芯片也仍然能正确控制灯组顺位指针的游移，使其准确指出出下一顺位，因此，灯屏设备的拼接关系更为灵活，在拼接灯形态的产品中，四边形、五边形、六边形等不同形态的灯块，各自所具有的发光单元数量都可能不能，但这些不同形态的灯块都可以作为灯组相互拼接，在应用相应实施例的情况下，确保各个灯组之间依然能够正确获取对应自身的灯组控制数据，准确播放灯效。在本申请的灯效中继控制方法的任意实施例的基础上，请参阅图6，根据所述灯组顺位指针所指示的当前顺位，获取所述灯效控制数据中与该当前顺位相对应的目标灯组控制数据，包括：步骤S5221、解析所述灯效协议数据，提取出其中的灯组顺位指针和灯效控制数据，所述灯效控制数据中每个灯组控制数据均包括多个设置了灯组序号的单元控制数据；同理，控制器的控制芯片通常按照与灯组控制芯片预协议的格式，封装出本申请的灯效协议数据，通信链路中，负责中继的各个灯组控制芯片，也同理按照预协议的格式，重新封装出灯效协议数据，因此，对于任意一个灯组控制芯片来说，其获得的灯效协议数据，均可依照预设协议对其进行解析。灯组控制芯片解析灯效协议数据之后，便可从协议头部得到其所携带的灯组顺位指针，并从协议数据区中得到其所携带的灯效控制数据。关于灯组顺位指针和灯效控制数据的数据内容和数据格式可参阅前文各实施例所揭示，其中，灯效控制数据包含有多个灯组相对应的多个灯组控制数据，且每个灯组控制数据也包含有相应灯组内各个发光单元相对应的单元控制数据，这些单元控制数据封装其相应的发光单元的发光控制参数，例如发光颜色值等，可以用于转换成发光控制信号而控制相应的发光单元发光。在本实施例中，依据预设的协议，采用一个多维数组来表示各个灯组控制数据，其中有一个维度用来表示灯组的顺序关系，另一个维度用来表示相同灯组中各个发光单元的顺序关系。例如，对于由m个灯组，每个灯组有n个单元控制数据，每个单元控制数据有4个数值的情况，可以构造一个数组lamp，其中，i表示灯组在灯屏设备的灯组间顺序关系的序号，j表示发光单元在灯组中的发光单元之间顺序关系的序号，k表示发光单元的发光控制参数在其相应的单元控制数据中的序号。据此不难理解，灯效控制数据中的每个单元控制数据，都指定了其所属的灯组相对应的灯组序号。步骤S5222、读取灯组序号与所述灯组顺位指针所指示的当前顺位相匹配的各个单元控制数据，作为本灯组的目标灯组控制数据；根据以上的说明可知，灯组顺位指针，其数值只需要对应灯组数量m，给出相应的序号i，便可指示出相应的当前顺位，当然，控制器的控制芯片初始化该灯组顺位指针时，可将i初始化为灯组数量m的取值范围中的最小值，以便指示出其中的第一个灯组。据此，本灯组的灯组控制芯片需要从灯效控制数据中提取出自身相对应的灯组控制数据即目标控制数据时，只需根据灯组顺位指针中给出的数值i，获取该数据lamp中，对应该数值i相对应的各个元素，即可获得本灯组相对应的各个单元控制数据，由此构成本灯组相对应的目标灯组控制数据。步骤S5223、根据所述目标灯组控制数据中的各个单元控制数据，对应控制本灯组中的各个发光单元协同播放相应的灯效。同理，由于灯效控制数据是对应每个灯组的每个发光单元生成的，所以，获得目标灯组控制数据的当前灯组的灯组控制芯片，便可根据其所获得的目标灯组控制数据中的各个单元控制数据，控制本灯组的各个发光单元进行发光而协同播放本灯组所负责的灯效。具体的控制方式可以参阅前文所揭示，恕不赘述。根据以上实施例可知，灯效控制数据也可以采用携带灯组序号的方式，给出相应的序数名称，以便灯组顺位指针可以通过数值来指示相应的灯组序号，从而可以基于灯组序号的映射关系，这种情况下，只要各个灯组相对应的灯组控制数据能够与相应的灯组序号建立关联，各个灯组的灯组控制芯片便可以根据灯组顺位指针准确读取全部相应的单元控制数据作为其相应的目标灯组控制数据，灯组控制芯片和灯效控制数据无需考虑每个灯组需要读取多少个单元控制数据，控制器根据光源位置分布信息直接生成全量发光单元相对应的单元控制数据并写入相应的数据后，便可确保各个灯组控制数据能够被各个灯组控制芯片顺利读取，即使每个灯组中的发光单元数量各不相同，也不会影响每个灯组控制芯片对其中自身相对应的全量单元控制数据的获取，由此简化了每个灯组控制芯片所需实现的业务逻辑的复杂度，使每个灯组控制芯片可以更高的效率处理灯效协议数据。在本申请的灯效中继控制方法的任意实施例的基础上，更新所述灯效协议数据中的灯组顺位指针使其指向下一顺位，包括：步骤S5410、将所述灯组顺位指针所指示的当前顺位相对应的原数值递增单位数值，作为灯组顺位指针的更新数值，使其指向所述当前顺位的后一顺位；根据前文的各个实施例所揭示，灯组顺位指针以数值表示当前顺位，对于正在处理该灯组顺位指针的灯组控制芯片来说，当需要更新该灯组顺位指针时，只需将该灯组顺位指针的原数值递增单位数值即可，这个单位数值，适应不同实施例，可以是不同性质的量，例如适应前文部分实施例按照序号0、1、2……的方式进行递增即可，或者适应前文另一部分实施例在每个灯组都拥有相同数量的发光单元的情况下，按照发光单元数量x进行递增以使灯组顺位指针的数值指向灯效控制数据中具体的数据位置即可。无论哪一种形式，更新后的灯组顺位指针的数值，其所指示的顺位，都是当前顺位的后一顺位，该后一顺位与本灯组后面的下一灯组相对应。步骤S5420、重新封装更新后的灯组顺位指针及所述灯效控制数据，成为更新的灯效协议数据以供发送。完成了灯组顺位指针的更新后，本灯组的灯组控制芯片，便可将继续以该更新后的灯组顺位指针封装于协议头部，而将灯效控制数据封装于协议数据区，由此整体重新封装出灯效协议数据。然后，本灯组的灯组控制芯片将该灯效协议数据通过其与下一灯组相连接的下游端口，转发给该下一灯组，下一灯组的灯组控制芯片从其与该下游端口相连接的上游端口接收该更新后的灯效协议数据之后，便可按照本灯组的灯组控制芯片完全相同的方式，接续完成其自身所对应的灯效的播放。根据以上实施例可见，本申请的灯组控制芯片不仅自行完成自身相对应的灯效的播放，而且还负责为下一灯组的灯组控制芯片调整其灯组顺位指针，确保下一灯组控制芯片能够顺利获取其自身相对应的灯组控制数据，整个通信链路中，每个灯组控制芯片均按照相同的方式运行即可完成整个灯效的播放，有条不紊，而每个灯块控制芯片所写入的程序完全一致，便于批量生产和组装，实现成本可控。请参阅图7，在一个实施例中，本申请的灯效中继控制方法，其应用于灯屏设备的控制器的控制芯片中，该控制器的控制芯片执行如下步骤，包括：步骤S3100、根据待播放灯效生成灯屏设备中各个灯组相对应的灯组控制数据；灯屏设备中的控制器，其负责接收灯效应用包，灯效应用包中包含有灯效描述数据，可以对灯效应用包进行解释以得到其中的灯效描述数据。灯效描述数据用于描述待播放灯效的灯效运动流程。灯效描述数据可以采用脚本进行描述，也可以通过多张图像帧进行描述。控制器可以根据灯效描述数据，将整个灯效运动流程分割为多个播放帧，进一步根据控制器事先获得的光源位置分布信息，将每个播放帧转换为映射到各个灯组的各个发光单元相对应的单元控制数据，然后按照灯组的对应关系，确定每个灯组相对应的各个单元控制数据，构造每个灯组相对应的灯组控制数据。步骤S3200、按照预定的顺序关系将各个灯组控制数据有序构造为灯效控制数据；控制器预先获取的光源位置分布信息中，通常是通过控制器发送驱动指令，驱使各个灯组控制芯片予在响应，根据各个灯组控制芯片的响应顺序和其中的发光单元数量信息来确定的，在这种情况下，实际上光源位置分布信息中，便已经表征了灯屏中各个灯组的顺序关系。据此，控制器的控制芯片，可以按照这个顺序关系，对各个灯组相对应的灯组控制数据进行组织，构造为灯效控制数据，使灯效控制数据中的各个灯组控制数据表现出一定的顺序关系。结合本申请前文所揭示的各个实施例，不难理解，适应控制器的控制芯片与各个灯组控制芯片所采用的协议细节不同，控制器的控制芯片在灯效控制数据中表示各个灯组控制数据的顺序关系时，既可以是按照灯组顺序将相应灯组控制数据依序排列，也可以是通过对每个灯组控制数据设定其相应的灯组序号实现顺序关系表示，具体可灵活设定。步骤S3300、初始化灯组顺位指针使其指向所述灯效控制数据中的首个灯组控制数据相对应的顺位，将该灯组顺位指针与所述灯效控制数据封装为灯效协议数据；为了使灯屏中的各个为组能够有序地读取其自身相对应的灯组控制数据，控制器的控制芯片进一步设定灯组顺位指针，将其数值初始化为指向该控制芯片所构造的灯效控制数据中的首个灯组控制数据，例如，当数值0表示首个灯组控制数据所在的顺位时，灯组顺位指针设置为数值0即可。确定了灯效控制数据和灯组顺位指针后，按照预设的协议格式，控制芯片将灯组顺位指针设置为协议报文的协议头部，将灯效控制数据设置在协议报文的协议数据区中，由此实现对协议报文的封装，成为灯效协议数据。步骤S3400、将所述灯效协议数据发送给灯屏设备中的各个灯组控制芯片以控制各个灯组播放相应的灯效。确定灯效协议数据后，控制器的控制芯片便可向灯屏设备的通信链路下行发送该灯效协议数据。通信链路中的各个灯组，按照其在通信链路中的通信顺序，由其中的第一灯组先处理该灯效协议数据，根据其中的灯组顺位指针读取自身相对应的灯组控制数据，控制自身的发光单元播放相应的灯效；然后修改该灯组顺位指针使其指向通信顺序在后的下一灯组相对应的顺位，重新封装该灯效协议数据，转发给下一灯组的灯组控制芯片，以此类推，通信链路上的每个灯组控制芯片都可以从灯效协议数据中得到其相应的灯组控制数据，控制自身的发光单元播放相应的灯效，全部灯组便可协同播放出整体灯效。根据以上实施例不难理解，在控制器中，由控制芯片按照预定格式封装出灯效协议数据，其中通过灯组顺位指针指示当前顺位，该灯组顺位指针可以在通信链路中，供各个灯组控制芯片对应其当前顺位读取相应的目标灯组控制数据，并且在获得该目标灯组控制数据之后，灯组控制芯片又自行后推该灯组顺位指针所表示的当前顺位使其指示下一灯组控制芯片相对应的顺位，以此类推而顺利确保各个灯组控制芯片都能够获取到相应的灯组控制数据，确保各个灯组都能据此顺利协同播放灯效。据此，在本申请由控制器提供的灯组顺位指针发挥指示作用的情况下，各个灯组控制芯片只需按照标准化的流程，便可顺利播放灯效，因此，即使灯屏设备中的个别灯组被拆卸、换装，或者增加个别灯组，且控制器未对各个灯组的连接顺序进行检测，只要控制器所封装的灯效协议数据中包含有足量的灯组相对应的灯组控制数据，灯屏设备中的各个灯组控制芯片，依然可以获取自身相对应的目标灯组控制数据来控制自身的发光单元播放相应的灯效。理论上，控制器可以不再依赖自检，只要预先指定灯组数量即可进行多灯组的灯效控制，大大简化了控制器与灯组之间的通信复杂度。可见，本申请改进了灯屏设备中的控制器与灯组之间的通信机制，实现对灯屏设备的技术升级，灯屏设备的接受度更高，更易普及，其潜在经济收益明显提升。在本申请的灯效驱动控制方法的任意实施例的基础上，按照预定的顺序关系将各个灯组控制数据有序构造为灯效控制数据，包括：步骤S3210、将每个灯组相对应的灯组控制数据关联相应的序号，各个灯组的序号之间按照单位数值规则递增；控制器中的控制芯片在组织各个灯组相对应的灯组控制数据时，可以为各个灯组设置相应的序号，也即灯组序号，并且确保各个灯组的灯组序号之间按照单位数值进行规则递增。为灯组控制数据设置其相应的灯组序号的方式，可以简单赋予各个灯组控制数据以对应的序号，也可以按照前文所示的方式借助数组表示形式来实施，恕不赘述。步骤S3220、按照各个灯组的序号对各个灯组控制数据进行排序，将排序后的各个灯组控制数据构造为灯效控制数据。确定了各个灯组控制数据相对应的序号后，可根据该序号对各个灯组控制数据进行排序，然后将排序后的各个灯组控制数据顺序拼接，便可得到相应的灯效控制数据。根据以上实施例不难理解，控制器的控制芯片可以通过为灯组控制数据设置序号的方式，使灯效控制数据中的灯组间顺序关系得到更为可靠的表示，以确保通信链路中的各个灯组控制芯片能够根据这种顺序关系，借助灯组顺位指针准确定位各个相应的灯组控制数据，确保通信机制高效可靠运行。在本申请的灯效驱动控制方法的任意实施例的基础上，将所述灯效协议数据发送给灯屏设备中的各个灯组控制芯片以控制各个灯组播放相应的灯效，包括：步骤S3410、所述控制器的控制芯片将其封装的灯效协议数据发送给第一灯组控制芯片，第一灯组控制芯片根据所述的灯效中继控制方法播放灯效及更新转发所述灯效协议数据给第二灯组控制芯片；控制器的控制芯片封装出一个播放帧相对应的灯效协议数据后，便可将其发送到通信链路中，具体是发送给与该控制芯片的下游端口相连接的第一灯组控制芯片，第一灯组控制芯片通过其上游端口得到该灯效协议数据之后，执行本申请前文所揭示的灯效中继控制方法的各个步骤，便可提取出与其自身相对应的灯组控制数据来控制自身的发光单元播放相应的灯效，并且，调整灯效协议数据中的灯组顺位指针指向与第一灯组控制芯片的下游端口相连接的第二灯组控制芯片，再将该灯效协议数据转发给该第二灯组控制芯片。步骤S3420、第二灯组控制芯片根据第一灯组控制芯片完全相同的方法播放灯效及更新转发所述灯效协议数据给第三灯组控制芯片。第二灯组控制芯片通过其上游端口接收到第一灯组控制芯片转发的灯效协议数据后，根据第一灯组控制芯片完全相同的方法，便可实现灯效的播放和灯效协议数据的重新封装转发，从而将灯效协议数据传递给第三灯组控制芯片，以此类推，直至通信链路中的最后一个灯组控制芯片转出后的灯效协议数据无后续处理为止。根据以上实施例可以看出，控制器与各个灯组之间，实现链式的通信机制，而在该通信机制中，灯组顺位指针发挥着指导各个灯组正确播放其相对应的灯效的作用，正是灯组顺位指针的指示作用，使各个灯组可以协同播放同一整体灯效，由此确保整个灯屏设备的稳健运行。请参阅图8，本申请的另一实施例还提供一种灯效中继控制装置，实现于灯屏设备的灯组的灯组控制芯片中，其包括数据接收模块5100、灯组提取模块5200、灯效播放模块5300，以及数据转发模块5400，其中，所述数据接收模块5100，设置为接收灯效协议数据，所述灯效协议数据包括灯组顺位指针和灯效控制数据，所述灯效控制数据包括按照顺序关系表示的多个灯组控制数据，所述灯组顺位指针用于指示所述顺序关系中的当前顺位；所述灯组提取模块5200，设置为根据所述灯组顺位指针所指示的当前顺位，获取所述灯效控制数据中与该当前顺位相对应的目标灯组控制数据；所述灯效播放模块5300，设置为根据所述目标灯组控制数据，控制本灯组播放相应的灯效；所述数据转发模块5400，设置为更新所述灯效协议数据中的灯组顺位指针使其指向下一顺位，输出该灯效协议数据。在本申请的灯效中控制方法的任意实施例的基础上，所述灯组提取模块5200，包括：第一解析模块，设置为解析所述灯效协议数据，提取出其中的灯组顺位指针和灯效控制数据，所述灯效控制数据中每个灯组控制数据包括多个单元控制数据；第一读取模块，设置为以所述灯组顺位指针所指向的当前顺位相对应的数据位置为起点，连续读取与本灯组的发光单元数量相对应的多个单元控制数据，作为本灯组相对应的目标灯组控制数据；第一播放模块，设置为根据所述目标灯组控制数据中的各个单元控制数据，对应控制本灯组中的各个发光单元协同播放相应的灯效。在本申请的灯效中继控制方法的任意实施例的基础上，所述灯组提取模块5200，包括：第二解析模块，设置为解析所述灯效协议数据，提取出其中的灯组顺位指针和灯效控制数据，所述灯效控制数据中每个灯组控制数据均包括多个设置了灯组序号的单元控制数据；第二读取模块，设置为读取灯组序号与所述灯组顺位指针所指示的当前顺位相匹配的各个单元控制数据，作为本灯组的目标灯组控制数据；第二播放模块，设置为根据所述目标灯组控制数据中的各个单元控制数据，对应控制本灯组中的各个发光单元协同播放相应的灯效。在本申请的灯效中继控制方法的任意实施例的基础上，所述数据转发模块5400，包括：指针更新模块，设置为将所述灯组顺位指针所指示的当前顺位相对应的原数值递增单位数值，作为灯组顺位指针的更新数值，使其指向所述当前顺位的后一顺位；封装执行模块，设置为重新封装更新后的灯组顺位指针及所述灯效控制数据，成为更新的灯效协议数据以供发送。请参阅图9，本申请的另一实施例还提供一种灯效驱动控制装置，实现于灯屏设备的控制器的控制芯片中，其包括数据生成模块3100、数据构造模块3200、指针配置模块3300，以及发送驱动模块3400，其中，所述数据生成模块3100，设置为根据待播放灯效生成灯屏设备中各个灯组相对应的灯组控制数据；所述数据构造模块3200，设置为按照预定的顺序关系将各个灯组控制数据有序构造为灯效控制数据；所述指针配置模块3300，设置为初始化灯组顺位指针使其指向所述灯效控制数据中的首个灯组控制数据相对应的顺位，将该灯组顺位指针与所述灯效控制数据封装为灯效协议数据；所述发送驱动模块3400，设置为将所述灯效协议数据发送给灯屏设备中的各个灯组控制芯片以控制各个灯组播放相应的灯效。在本申请的灯效驱动控制方法的任意实施例的基础上，所述数据构造模块3200，包括：顺序关联模块，设置为将每个灯组相对应的灯组控制数据关联相应的序号，各个灯组的序号之间按照单位数值规则递增；排序构造模块，设置为按照各个灯组的序号对各个灯组控制数据进行排序，将排序后的各个灯组控制数据构造为灯效控制数据。在本申请的灯效驱动控制方法的任意实施例的基础上，所述发送驱动模块3400，包括：发送中继模块，设置为所述控制器的控制芯片将其封装的灯效协议数据发送给第一灯组控制芯片，第一灯组控制芯片运行其灯效中继控制装置播放灯效及更新转发所述灯效协议数据给第二灯组控制芯片；递进中继模块，设置为第二灯组控制芯片根据第一灯组控制芯片完全相同的方式播放灯效及更新转发所述灯效协议数据给第三灯组控制芯片。在本申请任意实施例的基础上，请参阅图10，本申请的另一实施例还提供一种计算机设备，该计算机设备可以充当灯屏设备中的控制器使用，如图10所示，计算机设备的内部结构示意图。该计算机设备包括通过系统总线连接的处理器、计算机可读存储介质、存储器和网络接口。其中，该计算机设备的计算机可读存储介质存储有操作系统、数据库和封装计算机可读指令的计算机程序，数据库中可存储有控件信息序列，该计算机可读指令被处理器执行时，可使得处理器实现一种灯效播放控制方法。该计算机设备的处理器用于提供计算和控制能力，支撑整个计算机设备的运行。该计算机设备的存储器中可存储有计算机可读指令，该计算机可读指令被处理器执行时，可使得处理器执行本申请的灯效播放控制方法。该计算机设备的网络接口用于与终端连接通信。本领域技术人员可以理解，图10中示出的结构，仅仅是与本申请方案相关的部分结构的框图，并不构成对本申请方案所应用于其上的计算机设备的限定，具体的计算机设备可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。本实施方式中处理器用于执行图8或图9中的各个模块及其子模块的具体功能，存储器存储有执行上述模块或子模块所需的程序代码和各类数据。网络接口用于向用户终端或服务器之间的数据传输。本实施方式中的存储器存储有本申请的灯效播放控制装置中执行所有模块/子模块所需的程序代码及数据，服务器能够调用服务器的程序代码及数据执行所有子模块的功能。本申请还提供一种存储有计算机可读指令的存储介质，计算机可读指令被一个或多个处理器执行时，使得一个或多个处理器执行本申请任一实施例所述灯效播放控制方法的步骤。本申请还提供一种计算机程序产品，包括计算机程序/指令，该计算机程序/指令被一个或多个处理器执行时实现本申请任一实施例所述灯效播放控制方法的步骤。本领域普通技术人员可以理解实现本申请上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，该计算机程序可存储于一计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，前述的存储介质可为磁碟、光盘、只读存储记忆体等计算机可读存储介质，或随机存储记忆体等。以上所述仅是本申请的部分实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本申请原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本申请的保护范围。综上所述，本申请使灯屏设备的控制器与灯组之间可以灵活通信，优化灯屏设备的产品使用体验，有助于灯屏设备的推广。
