标题title
一种基于深度学习的风电功率预测方法及装置
摘要abst
本发明提出一种基于深度学习的风电功率预测方法及装置，获取风电场历史并网功率数据，获取与风电场历史并网功率数据同时段的风电场代表点的气象预报数据X，获取与风电场历史并网功率数据同时段的覆盖全部风电场范围的网格化数值天气预报数据G，构建CNN‑TCN模型，输出风电场的预测发电功率。本发明能够有效地处理风电场周边数值天气预报数据的空间和时间特征，提高复杂地形和天气条件下的风电功率预测准确性。
权利要求书clms
1.一种基于深度学习的风电功率预测方法，其特征在于，包括：S1、获取风电场历史并网功率数据，通过数据清洗剔除异常数据，归一化后记为并网功率数据y：，n为并网功率数据y的长度，然后划分训练集和训练集；S2、获取与风电场历史并网功率数据同时段的风电场代表点的气象预报数据X，记为, t范围为，/＞；其中/＞分别代表t时刻的风速、风向、温度、大气压强、湿度，并同时段对应划分训练集和验证集；S3、获取与风电场历史并网功率数据同时段的覆盖全部风电场范围的网格化数值天气预报数据G，记为；/＞为t时刻/＞大小的矩阵；N为经向网格点数，M为纬向网格点数，c是每个网格点的气象特征数量，并同时段对应划分训练集和验证集；S4、构建CNN-TCN模型，将所述网格化数值天气预报数据G作为一个四维张量输入到CNN模块中,将每个样本的特征转化为一维向量，将所述一维向量的样本与所述气象预报数据X、并网功率数据y通过合并层合并接入TCN模块，TCN模块的输出通过全连接层和输出层输出风电场的预测发电功率。2.根据权利要求1所述的基于深度学习的风电功率预测方法，其特征在于，所述CNN模块有两个卷积块，每个卷积块中，有一个带有c个特征的2D卷积层，每个核的大小为3x3，步长为1，填充方式为 "same"，对卷积层的输出使用激活函数ReLU和2x2的最大池化层，每个卷积块后，特征c的数量增加一倍；最后将特征输出到一个平展层，将每个样本的特征转化为一维向量。3.根据权利要求1所述的基于深度学习的风电功率预测方法，其特征在于，所述TCN模块设置一个64的滤波器，内核大小为2，步长为1，使用ReLU作为激活函数。4.根据权利要求1所述的基于深度学习的风电功率预测方法，其特征在于，所述CNN-TCN模型以平均绝对误差 MAE作为损失函数，优化器使用Adam，学习率设定为0.1，优化网络参数；；其中i为序号，yi表示预测值，xi表示真实值。5.一种基于深度学习的风电功率预测装置，其特征在于，包括：并网功率数据单元：获取风电场历史并网功率数据，通过数据清洗剔除异常数据，归一化后记为并网功率数据y：，n为并网功率数据y的长度，然后划分训练集和训练集；气象预报数据单元：获取与风电场历史并网功率数据同时段的风电场代表点的气象预报数据X，记为，t范围为，/＞；其中分别代表t时刻的风速、风向、温度、大气压强、湿度，并同时段对应划分训练集和验证集；网格化预报数据单元：获取与风电场历史并网功率数据同时段的覆盖全部风电场范围的网格化数值天气预报数据G，记为；/＞为t时刻/＞大小的矩阵；N为经向网格点数，M为纬向网格点数，c是每个网格点的气象特征数量，并同时段对应划分训练集和验证集；模型单元：构建CNN-TCN模型，将所述网格化数值天气预报数据G作为一个四维张量输入到CNN模块中,将每个样本的特征转化为一维向量，将所述一维向量的样本与所述气象预报数据X、并网功率数据y通过合并层合并接入TCN模块，TCN模块的输出通过全连接层和输出层输出风电场的预测发电功率。6.根据权利要求5所述的基于深度学习的风电功率预测装置，其特征在于，所述模型单元中，CNN模块有两个卷积块，每个卷积块中，有一个带有c个特征的2D卷积层，每个核的大小为3x3，步长为1，填充方式为 "same"，对卷积层的输出使用激活函数ReLU和2x2的最大池化层，每个卷积块后，特征c的数量增加一倍；最后将特征输出到一个平展层，将每个样本的特征转化为一维向量。7.权利要求5所述的基于深度学习的风电功率预测装置，其特征在于，所述模型单元中，所述TCN模块设置一个64的滤波器，内核大小为2，步长为1，使用ReLU作为激活函数。8.权利要求5所述的基于深度学习的风电功率预测装置，其特征在于，所述模型单元中，所述CNN-TCN模型以平均绝对误差 MAE作为损失函数，优化器使用Adam，学习率设定为0.1，优化网络参数；；其中i为序号，yi表示预测值，xi表示真实值。
说明书desc
技术领域本发明属于电力功率预测技术领域，特别是涉及到一种基于深度学习的风电功率预测方法及装置。背景技术目前高精度的风电功率预测仍然是解决风电不确定性和波动性最有效的方法之一。准确的风电预测既能够确保电力系统的稳定运行，提高风电消纳空间，又有利于提高风电在电力市场中的竞争力。短期风电功率预测技术已经取得了显著的进展，其核心是利用数值天气预报数据NWP以及历史风电场数据，预测一定时期内的风电功率输出。预测的时间范围通常在二十几小时到几天之间。短期风电功率的主要预测方法有：统计方法、物理方法、人工智能方法及组合方法。物理方法是通过风电场及其周围环境信息构建出与功率对应的物理模型，其受环境因素较大。统计方法主要是通过建立风电场历史数据和风电功率对应的映射关系来进行预测，较依赖于历史数据。深度神经网络比浅层机器学习预测精度更高，但是与浅层机器学习相比又存在着模型复杂和训练时间长的问题。将多种模型进行组合，能够获得更优越的性能。虽然上述的每种方法都有其特定的应用场景，但是每种模型往往都难以获得最优预测结果。总的来说，机器学习方法在最近几年得到了广泛的研究和应用，短期风电功率预测技术也已经取得了显著的进步。但是由于影响风电出力的数值天气预报具有很大的不确定性，无论使用哪种方法，预测的准确性仍然是一个挑战，尤其是在山地等复杂地形和极端天气条件下。发明内容本发明提出一种基于深度学习的风电功率预测方法及装置，能够有效地处理风电场周边数值天气预报数据的空间和时间特征，提高复杂地形和天气条件下的风电功率预测准确性。为达到上述目的，本发明的技术方案是这样实现的：一种基于深度学习的风电功率预测方法，包括：S1、获取风电场历史并网功率数据，通过数据清洗剔除异常数据，归一化后记为并网功率数据y：，n为并网功率数据y的长度，然后划分训练集和训练集；S2、获取与风电场历史并网功率数据同时段的风电场代表点的气象预报数据X，记为，t范围为，/＞；其中/＞分别代表t时刻的风速、风向、温度、大气压强、湿度，并同时段对应划分训练集和验证集；S3、获取与风电场历史并网功率数据同时段的覆盖全部风电场范围的网格化数值天气预报数据G，记为；/＞为t时刻/＞大小的矩阵；N为经向网格点数，M为纬向网格点数，c是每个网格点的气象特征数量，并同时段对应划分训练集和验证集；S4、构建CNN-TCN模型，将所述网格化数值天气预报数据G作为一个四维张量输入到CNN模块中,将每个样本的特征转化为一维向量，将所述一维向量的样本与所述气象预报数据X、并网功率数据y通过合并层合并接入TCN模块，TCN模块的输出通过全连接层和输出层输出风电场的预测发电功率。进一步的，所述CNN模块有两个卷积块，每个卷积块中，有一个带有c个特征的2D卷积层，每个核的大小为3x3，步长为1，填充方式为 "same"，对卷积层的输出使用激活函数ReLU和2x2的最大池化层，每个卷积块后，特征c的数量增加一倍。最后将特征输出到一个平展层，将每个样本的特征转化为一维向量。进一步的，所述TCN模块设置一个64的滤波器，内核大小为2，步长为1，使用ReLU作为激活函数。进一步的，所述CNN-TCN模型以平均绝对误差 MAE作为损失函数，优化器使用Adam，学习率设定为0.1，优化网络参数；；其中i为序号，yi表示预测值，xi表示真实值。本发明另一方面还提出了一种基于深度学习的风电功率预测装置，包括：并网功率数据单元：获取风电场历史并网功率数据，通过数据清洗剔除异常数据，归一化后记为并网功率数据y：，n为并网功率数据y的长度，然后划分训练集和训练集；气象预报数据单元：获取与风电场历史并网功率数据同时段的风电场代表点的气象预报数据X，记为，t范围为，/＞；其中分别代表t时刻的风速、风向、温度、大气压强、湿度，并同时段对应划分训练集和验证集；网格化预报数据单元：获取与风电场历史并网功率数据同时段的覆盖全部风电场范围的网格化数值天气预报数据G，记为；/＞为t时刻/＞大小的矩阵；N为经向网格点数，M为纬向网格点数，c是每个网格点的气象特征数量，并同时段对应划分训练集和验证集；模型单元：构建CNN-TCN模型，将所述网格化数值天气预报数据G作为一个四维张量输入到CNN模块中,将每个样本的特征转化为一维向量，将所述一维向量的样本与所述气象预报数据X、并网功率数据y通过合并层合并接入TCN模块，TCN模块的输出通过全连接层和输出层输出风电场的预测发电功率。进一步的，所述模型单元中，CNN模块有两个卷积块，每个卷积块中，有一个带有c个特征的2D卷积层，每个核的大小为3x3，步长为1，填充方式为 "same"，对卷积层的输出使用激活函数ReLU和2x2的最大池化层，每个卷积块后，特征c的数量增加一倍。最后将特征输出到一个平展层，将每个样本的特征转化为一维向量。进一步的，所述模型单元中，所述TCN模块设置一个64的滤波器，内核大小为2，步长为1，使用ReLU作为激活函数。进一步的，所述模型单元中，所述CNN-TCN模型以平均绝对误差 MAE作为损失函数，优化器使用Adam，学习率设定为0.1，优化网络参数；；其中i为序号，yi表示预测值，xi表示真实值。与现有技术相比，本发明具有如下的有益效果：本发明通过CNN-TCN结构，结合了CNN和TCN的特性，能同时处理空间和时间序列数据。TCN的引入改善了CNN对时间序列数据的处理能力有限的问题，大大提高了计算效率，能够有效地处理风电场周边数值天气预报数据的空间和时间特征，提高复杂地形和天气条件下的风电功率预测准确性。附图说明图1是本发明实施例的流程示意图；图2是本发明实施例的预测效果图。具体实施方式需要说明的是，在不冲突的情况下，本发明中的实施例及实施例中的特征可以相互组合。本发明的设计思想基于CNN与TCN结合。首先卷积神经网络模型是一种深度神经网络，在处理涉及大量数据的复杂非线性任务方面特别有效，能够借助分层预训练从高维数据中学习特征，从而缓解梯度扩散问题。其次TCN是一种基于卷积神经网络的时序预测算法，相比于传统的RNN等序列模型，TCN利用卷积神经网络的特点，能够在更短的时间内对长期依赖进行建模，并且具有更好的并行计算能力。TCN模型由多个卷积层和残差连接组成，其中每个卷积层的输出会被输入到后续的卷积层中，从而实现对序列数据的逐层抽象和特征提取。TCN还采用了类似于ResNet的残差连接技术，可有效地减少梯度消失和模型退化等问题，而通过调整卷积核大小、步长和扩张率等参数，可以扩大卷积核的感受野，从而提高模型的鲁棒性和准确性。因此，本发明的具体方案如图1所示，包括：1、获取风电场历史并网功率数据，并剔除异常数据，如连续相同的值，超出装机容量的值，及其他异常情况等。归一化至区间，作为输出并网功率数据：，并划分训练集和验证集。2、获取同时间段的两种数据结构的数值天气预报数据作为输入，一种是风电场代表点的气象预报数据，记为，其中/＞，t范围为，/＞分别代表t时刻的风速、风向、温度、大气压强、湿度。另外一种是覆盖全部风电场范围的网格化数值天气预报数据，记为/＞，/＞为t时刻/＞大小的矩阵，N为经向网格点数，M为纬向网格点数，c是每个网格点的特征数量，包括如风速、温度、湿度等，并按照风电场历史并网功率数据的训练集和验证集对应的时段划分训练集和验证集。3、构建CNN-TCN模型，提取与气象特征数据的局部特征和时序特征并将特征融合后输入到全链接网络中进行学习预测。卷积神经网络模型是一种深度神经网络，可以用于从数据中提取空间信息，通常由多个层组成，包括输入层、卷积层、池化层、完全连接层和输出层。在CNN模型的卷积层中，使用卷积内核或滤波器在滑动步骤中对输入数据进行卷积运算。卷积操作的结果是一张特征图，可从输入数据中捕获重要的空间信息。在CNN模型的池化层中，将诸如最大值或平均值之类的汇总统计数据应用于先前卷积层的特征图，以生成修改后的输出。在CNN模型中使用卷积层和池化层是过滤和锐化原始输入数据的有效方法，可以提高模型预测的准确性。本实施例中CNN模块有两个卷积块，目的是提取气象预报数据的隐含特征以及网格气象数据的关联信息。将长度为n的数值天气预报数据G，即一个四维张量输入到CNN模型中，在每个卷积块中，有一个带有c个特征的2D卷积层，每个核的大小为3x3，步长为1，填充方式为 "same"，以保持空间尺寸不变，对卷积层的输出使用激活函数ReLU和2x2的最大池化层，每个卷积块后，特征c的数量增加一倍。最后将特征输出到一个平展层，将每个样本的特征转化为一维向量。其中，max-pooling层减小了卷积层输出的空间大小，有助于减少模型中的参数数量并防止过度拟合。在训练期间，dropout层会随机过滤掉该层中的一些神经元，这可以迫使网络学习更强大的功能来帮助防止过度拟合。使用ReLU作为激活函数有助于将非线性引入模型，提高捕获数据中复杂模式的能力。将一维向量与气象预报数据X、归一化的并网功率数据y一起在合并层合并接入TCN模块，处理序列数据。设置一个64的滤波器，内核大小为2，步长为1，使用ReLU作为激活函数。最后，一个全连接层，使用ReLU激活函数。然后是一个输出层，只有一个节点，为风电场的发电功率，使用线性激活函数。本模型以平均绝对误差 作为损失函数，优化器使用Adam，学习率设定为0.1，优化网络参数；；其中i为序号，yi表示预测值，xi表示真实值。为了对比测试，将只是用CNN的预测方法和本发明提出的CNN-TCN预测方法应用在某风电场，获取该风电场在2022年4月到2022年11月共8个月历史并网功率，数据时间尺度为15分钟。经数据预处理后，识别、剔除明显错误数据后，共得到20844组数据，将前7个月共18338组数据作为训练集，最后一个月2506组数据作为测试集。1、按照本发明的方法构建CNN-TCN模型；获取数值天气预报数据，得到四维张量的数据作为模型输入，气象要素为100米风速、温度、湿度，数值预报空间分辨率为3*3km。CNN-TCN模型中的CNN模块有两个卷积块，第一个卷积块中的过滤器数量为32，卷积核的大小为3x3，步长为1，padding设为"same"，以保持空间尺寸不变，对卷积层的输出使用激活函数ReLU和2x2的最大池化层，第二个卷积块中的过滤器数量为64，卷积核的大小为3x3，步长为1。最后将特征输出到一个平展层，将每个样本的特征转化为一维向量。再获取风电场代表点的气象预报数据，将所述一维向量与气象预报数据、历史并网功率合并输入TCN模块，处理序列数据。TCN模块设置一个64的滤波器，内核大小为2，步长为1，使用ReLU作为激活函数。2、与本发明对比测试的CNN模型架构由两个卷积块和两个全连接层组成，卷积块的设置相同，第一个全连接层含有128个节点，第二个全连接层含有1个节点，激活函数选用“ReLU”。将训练好的两种模型分别在测试集上生成预测结果，并用均方根精度进行评估，如图2所示为预测效果对比图，CNN和CNN-TCN模型的平均均方根精度分别为84.47%和85.67%，可见，与CNN相比，本发明提出的CNN-TCN模型方法的稳定性和预报准确性更高。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
