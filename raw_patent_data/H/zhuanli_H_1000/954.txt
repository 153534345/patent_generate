标题title
一种主动标识终端、方法和介质
摘要abst
本发明提供了一种主动标识终端、方法和介质，属于工业互联网平台、标识解析技术领域。包括网络接入模块、数据感知模块、电源接入模块、外设接口模块和主控单元模块。所述网络接入模块提供终端系统与工业互联网平台或应用之间的数据传输；所述所述数据感知模块用于采集数据，并通过短距离通信接口进行数据交互；所述电源接入模块为终端系统供电和能源管理；所述外设接口模块提供外设的统一接入接口；所述主控单元模块用于主动标识终端身份认证，并将接收到的数据进行标识注册和标识解析。本发明可以适配多种生产场景，满足不同的企业和行业的需求。
权利要求书clms
1.一种主动标识终端，其特征在于，包括网络接入模块、数据感知模块、电源接入模块、外设接口模块和主控单元模块，所述数据感知模块包括数据采集模块、数据控制模块、数据汇聚模块；所述网络接入模块提供终端系统与工业互联网平台或应用之间的数据传输；所述数据采集模块用于工业数据的采集、接收和封装；所述数据控制模块完成设备、产线控制指令的转发和执行；所述数据集成模块将数据采集与数据控制模块获取的数据通过短距离通信接口进行数据交互，完成物理信息数据的汇聚及远程控制；所述电源接入模块为终端系统供电和能源管理；所述外设接口模块提供外设的统一接入接口；所述主控单元模块用于主动标识终端身份认证，并将接收到的数据进行标识注册和标识解析。2.根据权利要求1所述的主动标识终端，其特征在于，所述主控单元包括工业协议转换模块、数据的预处理模块、标识解析中间件、数据存储模块、设备身份认证和安全模块和应用层。3.根据权利要求2所述的主动标识终端，其特征在于，所述标识解析中间件构建标识的编码规则、元数据模板，预处理点位数据打标识和打标识数据上国家标识解析体系，以及标识数据的快速解析。4.根据权利要求3所述的主动标识终端，其特征在于，所述编码规则由固定值、日期变量、自增值、随机值自由组合；所述元数据模板用于描述业务场景数据的字典表，所述字典表包含标识前缀、服务行业、元数据对象类型、点位数据的字段名称，数据类型、最大值、最小值以及字段描述。5.根据权利要求3所述的主动标识终端，其特征在于，所述应用层包含集成网关，所述集成网关构建接入组件信息，包含终端设备认证信息和二级节点或应用平台认证信息，所述终端设备认证信息包含SN 号、MAC地址，所述二级节点或应用平台认证信息包含平台URL地址，登录用户名和密码凭证信息，所述终端设备认证信息对应唯一的应用平台认证信息。6.一种使用权利要求1-5任一所述的主动标识方法，其特征在于，包括以下步骤：步骤1：通过双向认证方式进行主动标识终端身份认证；步骤2：进行标识注册；步骤3：进行标识解析，具体方式如下：数据感知模块感知设备产生的生产数据，并向主控模块发送解析数据请求；主控模块通过协议转换模块完成协议转换，读取数据存储模块中的数据，判断是否有数据匹配本次请求，如果能够匹配，则将数据存储模块中的数据返回解析结果；如果无法匹配，则继续调用标识解析递归节点获取解析数据，如果标识解析递归节点可以获取解析数据，则返回解析结果，如果不能获取，则继续调用标识解析二级节点，如果标识解析二级节点可以获取解析数据，则返回解析结果，如果不能获取，则继续调用标识解析顶级节点，如果标识解析顶级节点可以获取解析数据，则返回解析结果，否则返回空解析结果；根据返回解析结果通过工业协议转换模块将解析结果处理后返回给数据感知模块；所述数据感知模块将处理后的解析结果发送至集成网关，所述集成网关将解析结果匹配到对应二级节点或应用平台。7.根据权利要求6所述的主动标识方法，其特征在于，所述标识注册具体方式如下：步骤2-1：在标识解析中间件中构建标识的编码规则和元数据模板，将设备绑定表示编码规则和元数据模板；步骤2-2：数据感知模块将设备产生的生产数据，发送至主控模块；主控模块的工业转换协议模块根据下位机协议进行协议转换，将转换完毕的数据发送至数据预处理模块；步骤2-3：所述数据预处理模块根据数据规则对接收到的数据进行数据清洗、数据过滤和数据加工，并将预处理后的数据发送至标识解析中间件；步骤2-4：所述标识解析中间件接收到预处理的数据，根据预置的设备点位以及编码规则，动态进行标识编码匹配；步骤2-5：匹配完成后调用标识解析体系的二级节点标识注册接口注册，并将注册后的数据存储到数据存储模块。8.根据权利要求6所述的主动标识方法，其特征在于，所述集成网关将解析结果匹配到对应二级节点或应用平台具体方式如下：集成网关的接收到终端的解析结果，所述集成网关组件信息中根据终端设备认证信息的SN 号、MAC地址和二级节点或应用平台认证信息的平台URL地址建立连接，根据接入组件信息中的连接关系，将终端的解析结果发送至对应的二级节点或应用平台。9.根据权利要求6所述的主动标识方法，其特征在于，所述主动标识终端身份认证的加密算法采用国密非对称加密SM2算法。10.一种存储介质，存储有程序指令，其特征在于，所述程序指令在运行时，执行如权利要求6至8任一项所述的主动标识方法。
说明书desc
技术领域本发明涉及一种主动标识终端、方法和介质，属于工业互联网平台、标识解析技术领域。背景技术标识解析是工业互联网的重要基础设施，是工业企业数据流通、信息交互的关键枢纽。标识解析的发展离不开主动标识设备，主动标识作为一种安全、便捷的载体，重新定义了数据传输的方式，作为采集、存储数据的介质实现数据在不同系统、主体之间流通；帮助工业企业实现数字身份认证、数据安全连接，推动企业实现智能网联设备全生命周期管理、物联网设备预测性维护等，挖掘数据价值，提供数据增值服务。在庞大的物联网连接当中，各种类型的主动标识载体凭借着其不容易被盗取、可自动读取、安全能力强等特点，必定将会长期且大量的存在于各类的物联网连接当中。工业互联网产业联盟发布的《主动标识载体技术白皮书》，给主动标识的定义是指嵌入在工业设备的内部，承载工业互联网标识编码及其必要的安全证书、算法和密钥，具备联网通信能力，能够主动向解析节点、应用平台发起连接的新型载体技术，主要分为通用集成电路卡、安全芯片和通信模组、终端等多种类型。目前市面上标准化的主动标识载体比较少，大多数和场景示范结合，缺少通用型的产品。另外一方面，大多数主动标识产品只能对接一个二级节点或者应用平台，二级节点多数是行业节点，对于综合性或者跨行业的企业来说，对接多个行业二级节点或者综合性节点的需求难以满足。发明内容本发明目的是提供了一种主动标识终端、方法和介质，可以适配多种生产场景，满足不同的企业和行业的需求。本发明为实现上述目的，通过以下技术方案实现：包括网络接入模块、数据感知模块、电源接入模块、外设接口模块和主控单元模块，所述数据感知模块包括数据采集模块、数据控制模块、数据汇聚模块；所述网络接入模块提供终端系统与工业互联网平台或应用之间的数据传输；所述数据采集模块用于工业数据的采集、接收和封装；所述数据控制模块完成设备、产线控制指令的转发和执行；所述数据集成模块将数据采集与数据控制模块获取的数据通过短距离通信接口进行数据交互，完成物理信息数据的汇聚及远程控制；所述电源接入模块为终端系统供电和能源管理；所述外设接口模块提供外设的统一接入接口；所述主控单元模块用于主动标识终端身份认证，并将接收到的数据进行标识注册和标识解析。优选的，所述主控单元包括工业协议转换模块、数据的预处理模块、标识解析中间件、数据存储模块、设备身份认证和安全模块、集成网关和应用层。优选的，所述标识解析中间件构建标识的编码规则、元数据模板，预处理点位数据打标识和打标识数据上国家标识解析体系，以及标识数据的快速解析。优选的，所述编码规则由固定值、日期变量、自增值、随机值自由组合；所述元数据模板用于描述业务场景数据的字典表，所述字典表包含标识前缀、服务行业、元数据对象类型、点位数据的字段名称，数据类型、最大值、最小值以及字段描述。优选的，所述应用层包含集成网关，所述集成网关构建接入组件信息，包含终端设备认证信息和二级节点或应用平台认证信息，所述终端设备认证信息包含SN 号、MAC地址，所述二级节点或应用平台认证信息包含平台URL地址，登录用户名和密码凭证信息，所述终端设备认证信息对应唯一的应用平台认证信息。一种主动标识方法，，包括以下步骤：步骤1：通过双向认证方式进行主动标识终端身份认证；步骤2：进行标识注册；步骤3：进行标识解析，具体方式如下：数据感知模块感知设备产生的生产数据，并向主控模块发送解析数据请求；主控模块通过协议转换模块完成协议转换，读取数据存储模块中的数据，判断是否有数据匹配本次请求，如果能够匹配，则将数据存储模块中的数据返回解析结果；如果无法匹配，则继续调用标识解析递归节点获取解析数据，如果标识解析递归节点可以获取解析数据，则返回解析结果，如果不能获取，则继续调用标识解析二级节点，如果标识解析二级节点可以获取解析数据，则返回解析结果，如果不能获取，则继续调用标识解析顶级节点，如果标识解析顶级节点可以获取解析数据，则返回解析结果，否则返回空解析结果；根据返回解析结果通过工业协议转换模块将解析结果处理后返回给数据感知模块；所述数据感知模块将处理后的解析结果发送至集成网关，所述集成网关将解析结果匹配到对应二级节点或应用平台。优选的，所述标识注册具体方式如下：步骤2-1：在标识解析中间件中构建标识的编码规则和元数据模板，将设备绑定表示编码规则和元数据模板；步骤2-2：数据感知模块将设备产生的生产数据，发送至主控模块；主控模块的工业转换协议模块根据下位机协议进行协议转换，将转换完毕的数据发送至数据预处理模块；步骤2-3：所述数据预处理模块根据数据规则对接收到的数据进行数据清洗、数据过滤和数据加工，并将预处理后的数据发送至标识解析中间件；步骤2-4：所述标识解析中间件接收到预处理的数据，根据预置的设备点位以及编码规则，动态进行标识编码匹配；步骤2-5：匹配完成后调用标识解析体系的二级节点标识注册接口注册，并将注册后的数据存储到数据存储模块。优选的，所述集成网关将解析结果匹配到对应二级节点或应用平台具体方式如下：集成网关的接收到终端的解析结果，所述集成网关组件信息中根据终端设备认证信息的SN 号、MAC地址和二级节点或应用平台认证信息的平台URL地址建立连接，根据接入组件信息中的连接关系，将终端的解析结果发送至对应的二级节点或应用平台。优选的，所述主动标识终端身份认证的加密算法采用国密非对称加密SM2算法。本发明的优点在于：本发明的主动标识终端，可主动向标识解析服务节点或标识数据服务平台发起连接，而无需借助标识读写设备来触发，提供系统软件和应用软件之间数据传输、过滤、转换等功能的工业互联网标识解析服务软件。作为集成网关，本终端实现了跨多个二级节点或者应用平台的对接服务，无需整合各个二级节点的资源；接入新的二级节点，仅需获取新的二级节点或者应用平台的认证，无需对进行硬件设备改造或软件升级，降低了终端的运营成本。附图说明附图用来提供对本发明的进一步理解，并且构成说明书的一部分，与本发明的实施例一起用于解释本发明，并不构成对本发明的限制。图1为本发明终端设备架构示意图。图2 为本发明主控模块功能架构示意图。图3 为本发明标识注册业务流程示意图。图4 为本发明标识解析业务流程示意图。图5 为本发明集成网关流程示意图。图6 为本发明主动标识终端身份认证流程示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。如图1所示本发明提供的一种主动标识终端、方法和介质，可以解决多源异构数据接入和互通，实现多系统之间的资源共享。向上对接国家标识解析体系，向下为企业和企业应用接入标识注册、数据同步和标识解析等功能提供标准统一服务，消除二级节点的升级变动为带来的影响，提升接入的便利性。一种主动标识终端，包括网络接入模块、数据感知模块、电源接入模块、外设接口模块和主控单元模块，所述数据感知模块包括数据采集模块、数据控制模块、数据汇聚模块。所述网络接入模块提供终端系统与工业互联网平台或应用之间的数据传输；包含有线接入和无线接入两种方式，有线接入包括DSL、PON和有线宽带等，无线接入包含2G、3G、4G、NB-IoT 及 5G等。所述数据采集模块用于工业数据的采集、接收和封装，例如摄像头、传感器、RFID等等。所述数据控制模块完成设备、产线控制指令的转发和执行。所述数据集成模块将数据采集与数据控制模块获取的数据通过短距离通信接口进行数据交互，完成物理信息数据的汇聚及远程控制；所述短距离通信接口包括USB、RS232、RS485、数字I/O、模拟数据接口或WiFi、蓝牙、ZigBee等。所述电源接入模块为终端系统供电和能源管理；可能的供电方式包括市电、太阳能、蓄电池等。所述外设接口模块提供外设的统一接入接口。所述主控单元模块用于主动标识终端身份认证，并将接收到的数据进行标识注册和标识解析。如图2所示所述主控单元包括工业协议转换模块、数据的预处理模块、标识解析中间件、数据存储模块、设备身份认证和安全模块、集成网关和应用层。工业协议转换模块：负责上、下位机的协议转换，本模块连接下位机，将海量的流式数据进行预处理，支持主流的工业协议300多种。数据预处理模块：对原始数据进行全面质量审计管理，通过配置各类数据稽核规则，对数据规范性、完整性、唯一性、及时性及准确性等进行严格的审计，为后续的数据处理提供良好的基础。标识解析中间件：主要完成标识的编码规则、元数据模板构建，实现预处理的点位数据打标识和打标识数据上国家标识解析体系，以及实现标识数据的快速解析等功能。企业自定义创建标识编码规则，规则可以由固定值、日期变量、自增值、随机值四种类型自由组合，满足不同的业务场景需求，例如前四位代表设备编码，下来四位代表产品线编码，后面六位代表日期编码等等。元数据模板负责描述业务场景数据的字典表，包含点位数据的字段名称，数据类型等等。标识发码是指根据设备的点位信息，关联标识编码规则动态的获取标识编码的过程。能力开放是指主动标识终端具备给第三方开放标准化接口的能力，提供相应的REST API接口，满足二次开发的需求。应用层：主要包含应用市场、组态界面、一键启停。应用市场根据行业场景，嵌入行业算法及应用，满足相关行业应用的需求，例如设备的预测性维护、产品的全生命周期管理等；组态界面通过拖拉拽的方式快速生成可视化大屏，满足客户直观的数据概览和演示的需求。一键启停，是指通过远程操作，完成主动标识终端的远程开关机功能，便于基层运管人员的维护。集成网关是指，终端设备具备适配多类业务终端的功能，同时能够将相关的业务数据处理和分类后，上送到不同的标识解析二级节点和应用平台，满足企业多样化业务上标识体系的需求。如图5所示，集成网关构建介入组件信息，包含终端设备认证信息和应用平台认证信息，所述终端设备认证信息包含SN 号、MAC地址，所述应用平台认证信息包含平台URL地址，登录用户名和密码凭证信息。当不同业务终端的数据流上送平台，经过预处理和打标识后，数据上送到集成网关模块，集成网关根据接入组件预先的配置进行匹配，匹配成功后，将对应终端或者业务的数据转发到匹配的二级节点或者应用平台，否则进行丢弃。一种主动标识方法，包括以下步骤：步骤1：通过双向认证方式进行主动标识终端身份认证；采用身份的双向认证方式，加密算法采用国密非对称加密SM2算法，具体流程如图6。前置条件：主动标识终端出厂预置设备凭证MO,包含公钥Public-key和私钥Private-key，平台持有平台凭证CO，包含对应的钥Public-key和私钥Private-key。平台凭证CO公钥Public-key离线导入到主动标识终端，此刻主动标识终端持有平台CO公钥和终端凭证MO。在平台上维护终端凭证信息，例如设备SN号、MAC地址等信息，同时导入终端凭证MO公钥Public-key，此刻平台持有终端MO凭证公钥和平台CO凭证。当终端上电后通过查询集成网关信息中的平台信息，例如平台URL等，进行上线验证，对应的平台接收到终端发来的心跳包，解析心跳包中的平台CO公钥是否平台持有的CO私钥匹配，匹配则验证成功。平台向终端发送心跳包响应报文，当终端收到响应报文，检查响应报文中的终端公钥是否和终端持有的MO私钥匹配，如匹配，则数据通道建立成功，完成后续的数据通信。步骤2：进行标识注册，如图3所示；步骤2-1：在标识解析中间件中构建标识的编码规则和元数据模板，将设备绑定表示编码规则和元数据模板；步骤2-2：将设备产生生产数据，发送至主控模块；主控模块的工业转换协议模块根据下位机协议进行协议转换，将转换完毕的数据发送至数据预处理模块；步骤2-3：所述数据预处理模块根据数据规则对接收到的数据进行数据清洗、数据过滤和数据加工，并将预处理后的数据发送至标识解析中间件；步骤2-4：所述标识解析中间件接收到预处理的数据，根据预置的设备点位以及编码规则，动态进行标识编码匹配；步骤2-5：匹配完成后调用标识解析体系的二级节点标识注册接口注册，并将注册后的数据存储到数据存储模块。步骤3：进行标识解析，如图4所示，具体方式如下：设备向主控模块发送解析数据请求；主控模块通过协议转换模块完成协议转换，读取数据存储模块中的数据，判断是否有数据匹配本次请求，如果能够匹配，则将数据存储模块中的数据返回解析结果；如果无法匹配，则继续调用标识解析递归节点获取解析数据，如果标识解析递归节点可以获取解析数据，则返回解析结果，如果不能获取，则继续调用标识解析二级节点，如果标识解析二级节点可以获取解析数据，则返回解析结果，如果不能获取，则继续调用标识解析顶级节点，如果标识解析顶级节点可以获取解析数据，则返回解析结果，否则返回空解析信息；根据返回解析结果通过工业协议转换模块将信息处理后返回给设备感知模块。集成网关将解析结果匹配到对应二级节点或应用平台；具体方式如下：集成网关的接收到终端的解析结果，所述集成网关组件信息中根据终端设备认证信息的SN 号、MAC地址和二级节点或应用平台认证信息的平台URL地址建立连接，根据接入组件信息中的连接关系，将终端的解析结果发送至对应的二级节点或应用平台。最后应说明的是：以上所述仅为本发明的优选实施例而已，并不用于限制本发明，尽管参照前述实施例对本发明进行了详细的说明，对于本领域的技术人员来说，其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
