标题title
反激变换器的并网控制方法、装置和计算机设备
摘要abst
本申请涉及一种反激变换器的并网控制方法、装置和计算机设备。所述方法包括：获取反激变换器的并网参数、反激变换器中功率开关的频率上限和频率下限，并根据并网参数、频率上限和频率下限，确定功率开关的谐振谷底数量，进而根据并网参数及谐振谷底数量，得到功率开关的开关频率，以根据开关频率控制功率开关。采用本方法能够提高安全性。
权利要求书clms
1.一种反激变换器的并网控制方法，其特征在于，所述方法包括：获取反激变换器的并网参数、所述反激变换器中功率开关的频率上限和频率下限；根据所述并网参数、所述频率上限和所述频率下限，确定所述功率开关的谐振谷底数量；根据所述并网参数及所述谐振谷底数量，得到所述功率开关的开关频率；根据所述开关频率控制所述功率开关。2.根据权利要求1所述的方法，其特征在于，所述根据所述并网参数、所述频率上限和所述频率下限，确定所述功率开关的谐振谷底数量，包括：根据所述并网参数、所述频率上限和所述频率下限，确定所述功率开关在各控制阶段的谐振谷底数量；所述根据所述并网参数及所述谐振谷底数量，得到所述功率开关的开关频率，包括：根据所述并网参数及各所述控制阶段的谐振谷底数量，得到所述功率开关在各所述控制阶段的开关频率。3.根据权利要求2所述的方法，其特征在于，所述根据所述并网参数及各所述控制阶段的谐振谷底数量，得到所述功率开关在各所述控制阶段的开关频率，包括：针对各所述控制阶段：根据当前的控制阶段的谐振谷底数量，确定所述当前的控制阶段的谐振谷底时间；基于所述当前的控制阶段的谐振谷底时间以及所述并网参数，得到所述功率开关在所述当前的控制阶段的开关频率。4.根据权利要求3所述的方法，其特征在于，所述基于所述当前的控制阶段的谐振谷底时间以及所述并网参数，得到所述功率开关在所述当前的控制阶段的开关频率，包括：根据所述并网参数确定所述当前的控制阶段的导通时间和下降时间；根据所述当前的控制阶段的导通时间、所述下降时间和所述谐振谷底时间，得到所述功率开关在所述当前的控制阶段的开关频率。5.根据权利要求2所述的方法，其特征在于，所述根据所述并网参数及各所述控制阶段的谐振谷底数量，得到所述功率开关在各所述控制阶段的开关频率，包括：利用第一目标公式，根据所述当前的控制阶段的谐振谷底数量以及所述并网参数，得到所述功率开关在所述当前的控制阶段的开关频率；所述第一目标公式为：；其中，所述并网参数包括、/＞、/＞、/＞、/＞、/＞、/＞和/＞；表示所述开关频率，/＞表示所述反激变换器中变压器的励磁电感，/＞表示所述反激变换器的原边的峰值电流，n表示所述反激变换器的谐振周期数量，n=m-1，m表示所述谐振谷底数量，/＞，/＞，/＞，/＞表示与所述反激变换器连接的电网的有效功率，/＞表示所述电网的电网电压的相位角，/＞表示所述反激变换器的供电电压，/＞表示所述电网电压的峰值，/＞表示所述反激变换器中变压器的匝数比，/＞表示所述功率开关的寄生电容。6.根据权利要求5所述的方法，其特征在于，所述根据所述并网参数、所述频率上限和所述频率下限，确定所述功率开关在各控制阶段的谐振谷底数量，包括：在所述电网电压处于过零点的情况下，根据所述并网参数、所述频率上限和所述频率下限，确定多个候选谐振谷底数量；从各所述候选谐振谷底数量中确定所述电网电压处于过零点时对应的控制阶段的谐振谷底数量。7.根据权利要求6所述的方法，其特征在于，所述根据所述并网参数、所述频率上限和所述频率下限，确定多个候选谐振谷底数量，包括：利用第二目标公式，根据所述并网参数、所述频率上限和所述频率下限，确定所述多个候选谐振谷底数量；所述第二目标公式为：。8.根据权利要求2-7任一项所述的方法，其特征在于，所述根据所述并网参数、所述频率上限和所述频率下限，确定所述功率开关在各控制阶段的谐振谷底数量，包括：根据上一个的控制阶段的谐振谷底数量，确定当前的控制阶段的开关频率；若所述当前的控制阶段的开关频率小于所述频率下限或者大于所述频率上限，则调整所述上一个的控制阶段的谐振谷底数量得到所述当前的控制阶段的谐振谷底数量；若所述当前的控制阶段的开关频率不小于所述频率下限，且不大于所述频率上限，则将所述上一个的控制阶段的谐振谷底数量作为所述当前的控制阶段的谐振谷底数量。9.根据权利要求2-7任一项所述的方法，其特征在于，所述方法还包括：根据所述功率开关的开关频率，确定在预设周期内的所述功率开关的开关频率；所述预设周期为预设倍数的工频周期；根据所述功率开关在预设周期内的开关频率，确定所述功率开关在各所述控制阶段内的开关频率。10.一种反激变换器的并网控制装置，其特征在于，所述装置包括：第一获取模块，用于获取反激变换器的并网参数、所述反激变换器中功率开关的频率上限和频率下限；第一确定模块，用于根据所述并网参数、所述频率上限和所述频率下限，确定所述功率开关的谐振谷底数量；第二确定模块，用于根据所述并网参数及所述谐振谷底数量，得到所述功率开关的开关频率；控制模块，用于根据所述开关频率控制所述功率开关。11.一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至9中任一项所述的方法的步骤。12.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至9中任一项所述的方法的步骤。
说明书desc
技术领域本申请涉及电路技术领域，特别是涉及一种反激变换器的并网控制方法、装置和计算机设备。背景技术反激变换器因其高频电气隔离、结构简单、成本低等特点得到广泛应用。反激变换器包括临界导通模式和断续导通模式。若反激变换器以BCM运行，在轻载时，例如在电网电压过零点时，功率开关的开关频率很高，导致功率开关的开关损耗很大。若反激变换器以固定开关频率的DCM运行时，在重载时，例如在电网电压达到峰值点附近时，功率开关的电流应力会很大。因此，目前的开关频率的控制方法存在着安全性不高的问题。发明内容基于此，有必要针对上述技术问题，提供一种能够提高安全性的反激变换器的并网控制方法、装置和计算机设备。第一方面，本申请提供了一种反激变换器的并网控制方法，包括：获取反激变换器的并网参数、反激变换器中功率开关的频率上限和频率下限；根据并网参数、频率上限和频率下限，确定功率开关的谐振谷底数量；根据并网参数及谐振谷底数量，得到功率开关的开关频率；根据开关频率控制功率开关。第二方面，本申请还提供了一种反激变换器的并网控制装置，包括：第一获取模块，用于获取反激变换器的并网参数、反激变换器中功率开关的频率上限和频率下限；第一确定模块，用于根据并网参数、频率上限和频率下限，确定功率开关的谐振谷底数量；第二确定模块，用于根据并网参数及谐振谷底数量，得到功率开关的开关频率；控制模块，用于根据开关频率控制功率开关。第三方面，本申请还提供了一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时实现上述任一方法的步骤。第四方面，本申请还提供了一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现上述任一方法的步骤。第五方面，本申请还提供了一种计算机程序产品，包括计算机程序，该计算机程序被处理器执行时实现上述任一方法的步骤。上述反激变换器的并网控制方法、装置和计算机设备，由于获取反激变换器的并网参数、反激变换器中功率开关的频率上限和频率下限，并根据并网参数、频率上限和频率下限，确定功率开关的谐振谷底数量，因此，根据并网参数及谐振谷底数量，得到功率开关的开关频率之后，就可以根据开关频率控制功率开关。并且，由于是基于频率上限和频率下限确定的谐振谷底数量，因此，确定出开关频率就可以不小于开关频率下限且不大于开关频率上限，因此，解决了现有技术中因开关频率过高而导致开关损耗很大的问题，并且，反激变换器会以变频开关频率运行，也不会造成很大的电流应力，提高了安全性。附图说明为了更清楚地说明本申请实施例或相关技术中的技术方案，下面将对实施例或相关技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为一种两级式反激变换器的拓扑结构；图2为临界导通模式的示意图；图3为断续导通模式的示意图；图4为本申请实施例中反激变换器的并网控制方法的应用环境图；图5为本申请实施例中反激变换器的并网控制方法的流程示意图；图6为本申请实施例中一种确定开关频率的流程示意图；图7为本申请实施例中又一种确定开关频率的流程示意图；图8为本申请实施例中一种谷底开关的原理示意图；图9为本申请实施例中一种确定谐振谷底数量的流程示意图；图10为本申请实施例中一种控制开关频率的流程示意图；图11为本申请中实施例中一种控制过程的示意图；图12为本申请实施例中又一种确定开关频率的流程示意图；图13为本申请实施例中一种反激变换器的并网控制方法的过程示意图；图14为本申请实施例中一种仿真效果图；图15为本申请实施例中一种电力参数的示意图；图16为本申请实施例中反激变换器的并网控制装置的结构框图；图17为本申请实施例中计算机设备的内部结构图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。反激变换器能够在输入级和输出级之间提供绝缘隔离，因此广泛地应用于电路领域中。下述以两级式反激变换器为例进行说明，其他形式的反激变换器原理类似，此处不再赘述。图1为一种两级式反激变换器的拓扑结构，如图1所示，反激变换器100包括第一级结构101和第二级结构102。第一级结构101包括供电源P1、滤波电容和反激变换器。供电源P1包括但不限于是光伏板。反激变换器包括功率开关S1、变压器T1和二极管D1。其中，滤波电容连接到反激变换器的输入端，功率开关S1用于控制反激拓扑的能量传输，以减少由于供电源和电网之间的瞬时功率不平衡而导致的二次谐波电流。当供电源P1为光伏板时，第一级结构101还可以实现最大功率点追踪。第二级结构102包括母线电容、由晶闸管D2~D5组成的全桥逆变电路和电网E1。其中，反激变换器的输出电压、母线电容/＞的电压与电网电压之间的绝对值相等。变压器次级电流/＞中的高频分量由电网电感Lg滤波。请继续参考图1，当功率开关S1开通时，初级侧电流开始线性上升。一旦初级侧电流/＞上升到等于反激变换器的原边的峰值电流/＞，功率开关S1关断。记变压器T1的励磁电感为/＞，供电源P1的供电电压表示为/＞，根据电感电流方程，功率开关S1的导通时间满足如下式。当功率开关S1关断时，变压器副边的二极管D1导通。原边励磁电感中的能量通过变压器T1传递到副边，副边的二极管D1的次级电流线性下降，变压器的副边电压等于电网电压/＞的绝对值。记变压器匝数比为/＞，二极管D1的次级电流/＞下降至零所需的下降时间为/＞满足如下式。理想情况下，为降低总谐波失真，电网电流为正弦曲线，并且与电网电压具有相同的相位角/＞。在功率开关S1的单个开关周期/＞内，次级侧二极管电流的平均值应等于电网电流的瞬时值。而电网电流的瞬时值/＞满足如下式。进一步地，反激变换器包括临界导通模式和断续导通模式。图2为临界导通模式的示意图，如图2所示，临界导通模式下，功率开关S1在变压器次级电流下降到0时立刻开通。图3为断续导通模式的示意图，如图3所示，断续导通模式下，功率开关S1在变压器次级电流下降到0后经过延长一定的死区时间再开通。在图2和图3中，表示功率开关S1的导通时间，/＞表示功率开关S1的关断时间，/＞表示功率开关S1的下降时间，下降时间用于指示变压器次级电流/＞下降到0所需的时间。死区时间等于关断时间/＞。/＞表示功率开关S1的栅源电压。反激变换器的原边的峰值电流/＞和反激变换器的副边的峰值电流/＞均用虚线表示。需说明的是，式和式中确定导通时间和下降时间/＞的方式适用于临界导通模式和断续导通模式，也就是说，只要原边的峰值电流/＞确定，则导通时间/＞和下降时间/＞就可以确定。下述以临界导通模型为例进行介绍。由于在临界导通模式下，一旦变压器次级电流减小到零，功率开关S1就立即开通，因此，功率开关S1的关断时间/＞等于下降时间/＞。功率开关S1在临界导通模式的开关周期/＞可以表示为如下式。联立公式，则可以确定在临界导通模式中原边的峰值电流如下式。其中，为并网功率参考值，也即电网的有效功率，/＞由电网电压的峰值/＞和电网电流的峰值/＞确定，如下式。联立公式，可以确定临界导通模式下的功率开关S1的开关频率如下式。根据式可以看出，若反激变换器以临界导通模式运行，在轻载时，例如电网电压过零点附近，由于为0，式中的分母很小，因此功率开关S1的开关频率将非常高，导致功率开关的开关损耗很大。下述以断续导通模式为例进行介绍。在断续导通模式下，由于功率开关S1在变压器次级电流下降到0后经过延长一定的死区时间再开通，因此，功率开关S1关断时间/＞等于下降时间/＞和谐振谷底时间/＞，也即/＞。换句话说，死区时间包括下降时间/＞和谐振谷底时间/＞。进而，在断续导通模式下功率开关S1的开关周期可以表示为如下式。如果反激变换器在断续导通模式下以固定开关频率运行，则功率开关S1的开关周期/＞如下式。联立公式，可以确定固定频率的断续导通模式下的峰值电流如下式所示。根据式可以看出，若反激变换器以采用固定频率的断续导通模式运行，在重载时，例如电网电压峰值点时，由于为1，则峰值电流/＞将非常高，功率开关S1的电流应力可能会增加到不可接受的水平。由此可见，现有技术开关频率的控制方法存在着安全性不高的问题。因此，有必要针对上述技术问题，提供一种开关频率的控制方法。下述将介绍该开关频率的控制方法。图4为本申请实施例中反激变换器的并网控制方法的应用环境图。其中，反激变换器100与控制器401进行通信。控制器401可以但不限于是各种个人计算机、笔记本电脑、智能手机、平板电脑和便携式可穿戴设备，便携式可穿戴设备可为智能手表、智能手环、头戴设备等，当然，控制器401也可以包括但不限于是中央处理器、数字信号处理器、现场可编程门阵列或者其他可编程逻辑器件中的至少一种。图5为本申请实施例中反激变换器的并网控制方法的流程示意图，在一个示例性的实施例中，如图5所示，提供了一种反激变换器的并网控制方法，以该方法应用于图4中的控制器为例进行说明，包括以下S501至S503。S501，获取反激变换器的并网参数、反激变换器中功率开关的频率上限和频率下限。在本实施例中，开关频率上限和开关频率下限/＞可以预先设定并存储至控制器的值，也可以是其他设备发送至控制器的值，还可以是用户输入的值，本实施例并不以此为限。开关频率上限/＞用于限制功率开关S1最大的开关频率，开关频率下限/＞用于限制功率开关S1最小的开关频率。在一些实施例中，开关频率上限和开关频率下限/＞通常由反激变换器中的功率半导体、变压器等硬件决定。并网参数指反激变换器中的电力参数。并网参数可以包括反激变换器在应用过程中对应的电力参数，例如并网参数可以包括反激变换器的供电电压、反激变换器中变压器的励磁电感/＞、反激变换器的原边的峰值电流/＞、电网电压的相位角/＞等。可选的，控制器可以通过传感器从反激变换器中获取并网参数，也可以接收其他设备或者用户输入的发送的并网参数。S502，根据并网参数、频率上限和频率下限，确定功率开关的谐振谷底数量。请继续参考图1，当功率开关S1关闭并且变压器次级电流减小到零后，变压器T1的励磁电感/＞和功率开关S1的寄生电容/＞会形成谐振储能电路。谐振储能能量在励磁电感/＞和寄生电容/＞之间交替，直到下一次功率开关S1开启。在此期间，由于谐振环路内的阻抗，功率开关S1的漏源电压/＞以正弦阻尼波形振荡，振荡对应的谐振周期/＞如下式。进而，当功率开关S1的漏源电压下降时，初级侧电流/＞为负。在功率开关S1的漏源电压/＞的谷底处，初级侧电流/＞从负值变为零。因此，如果在功率开关S1的漏源电压的谷底处开通功率开关S1，则可以使开通瞬间的瞬时电流为零、电压最小，以实现单次开关损耗的最小化。其中，谷底为一个谐振周期/＞中谐振电压的最小值所对应的点。进一步地，由于谐振周期能够影响功率开关S1的单次开关周期，从而影响功率开关S1的开关频率/＞。因此，在本实施例中，控制器可以控制功率开关S1的谐振谷底数量m，并通过调整谐振谷底数量m来控制功率开关的开关频率。其中，谐振谷底数量m中具有n个谐振周期，n为谐振周期数量，n与m的关系为n=m-1。也就是说，当n=0时，谐振谷底数量m=1；当n=1时，谐振谷底数量m=2，当n=2时，谐振谷底数量m=3。可以理解的是，谐振周期数量为自然数。可选的，控制器可以根据反激变换器的并网参数，计算出使得功率开关S1的开关频率不大于频率上限，且不小于频率下限时，功率开关S1的谐振谷底数量。在一些实施例中，控制器可以根据并网参数、频率上限和频率下限，提前计算并存储不同并网参数与不同谐振谷底数量之间的映射关系，该映射关系用于指示以该并网参数运行时，使得功率开关S1的开关频率不小于频率下限，且不大于频率上限时所对应的谐振谷底数量。进而，控制器就可以利用该映射关系确定功率开关的谐振谷底数量。在一个示例性的实施例中，可选的，上述的S502可以通过如下方式实现：根据并网参数、频率上限和频率下限，确定功率开关在各控制阶段的谐振谷底数量。首先，控制器会确定各控制阶段，每个控制阶段包括一定的时长。各控制阶段可以是周期性的，也可以是非周期性的。其中，不同的控制阶段的谐振谷底数量可以不同。可选的，控制器可以在每个控制阶段的起始时刻确定该控制阶段的谐振谷底数量m。示例性地，t0~t1为控制阶段1，t1~t2为控制阶段2，t2~t3为控制阶段3，控制器可以在t0确定谐振谷底数量m0，在t1确定谐振谷底数量m1，在t2确定谐振谷底数量m2，以此类推。进一步地，控制器能够根据并网参数、开关频率上限和开关频率下限/＞，确定对功率开关S1在每个控制阶段的谐振谷底数量。例如，在每个控制阶段的起始时刻，控制器可以根据起始时刻的并网参数，确定出使得功率开关S1的开关频率不大于频率上限，且不小于频率下限时，功率开关S1的谐振谷底数量。由于能够根据并网参数、频率上限和频率下限，确定功率开关在各控制阶段的谐振谷底数量，因此，利用各控制阶段，就可以高效、准确地确定出谐振谷底数量。S503，根据并网参数及谐振谷底数量，得到功率开关的开关频率。可选的，在确定功率开关S1的谐振谷底数量之后，控制器可以根据该谐振谷底数量确定出功率开关S1谐振谷底时间，并根据并网参数确定出导通时间/＞和下降时间/＞，并将/＞的倒数作为功率开关S1的开关频率。在一个示例性的实施例中，在确定出功率开关在各控制阶段的谐振谷底数量的基础上，可选的，上述的S503可以通过如下方式实现：根据并网参数及各控制阶段的谐振谷底数量，得到功率开关在各控制阶段的开关频率。继续上述的示例，控制器可以根据谐振谷底数量m0和并网参数，确定功率开关S1在t0~t1中的开关频率，根据谐振谷底数量m1和并网参数，确定功率开关S1在t1~t2中的开关频率，根据谐振谷底数量m2和并网参数，确定功率开关S1在t2~t3中的开关频率，以此类推。可以理解的是，由于并网参数中的部分参数会随着时间发生变化，因此，在谐振谷底数量一定的情况下，功率开关在同一个控制阶段中不同时刻的开关频率也会发生变化。由于根据并网参数及各控制阶段的谐振谷底数量，因此，利用各控制阶段，就可以高效、准确地确定基于谐振谷底数量确定功率开关在各控制阶段的开关频率。S504，根据开关频率控制功率开关。进而，确定功率开关S1的开关频率之后，就可以根据开关频率控制该功率开关S1。也就是说，控制器可以按照S503确定的开关频率控制功率开关S1进行开断。可以理解的是，根据开关频率控制功率开关S1之后，功率开关S1的开关频率就可以不小于开关频率下限且不大于开关频率上限。上述反激变换器的并网控制方法中，由于获取反激变换器的并网参数、反激变换器中功率开关的频率上限和频率下限，并根据并网参数、频率上限和频率下限，确定功率开关的谐振谷底数量，因此，根据并网参数及谐振谷底数量，得到功率开关的开关频率之后，就可以根据开关频率控制功率开关。并且，由于是基于频率上限和频率下限确定的谐振谷底数量，因此，确定出开关频率就可以不小于开关频率下限且不大于开关频率上限，因此，解决了现有技术中因开关频率过高而导致开关损耗很大的问题，并且，反激变换器会以变频开关频率运行，也不会造成很大的电流应力，提高了安全性。图6为本申请实施例中一种确定开关频率的流程示意图，在一个示例性的实施例中，如图6所示，上述的“根据并网参数及各控制阶段的谐振谷底数量，得到功率开关在各控制阶段的开关频率”包括S601至S602。S601，针对各控制阶段，根据当前的控制阶段的谐振谷底数量，确定当前的控制阶段的谐振谷底时间。在本实施例中，谐振谷底时间可以用谐振周期/＞表示为如下式。可以看出，谐振周期个数n不同，则谐振谷底数量m不同，功率开关S1的谐振谷底时间/＞也会不同。进而，控制器就可以根据当前的控制阶段的谐振谷底数量，确定当前的控制阶段的谐振谷底时间。以控制阶段1为例，假设m0=8，则控制器可以根据谐振谷底数量m0确定功率开关S1的谐振谷底时间。S602，针对各控制阶段，基于当前的控制阶段的谐振谷底时间以及并网参数，得到功率开关在当前的控制阶段的开关频率。继续上述的示例，控制器确定控制阶段1的谐振谷底时间之后，就可以根据控制阶段1的谐振谷底时间/＞和并网参数，计算出功率开关S1在控制阶段1的开关频率。可以理解的是，控制阶段可以包括至少一个时刻对应的开关频率。例如，控制阶段1包括时刻1~时刻5，根据谐振谷底时间和时刻1对应的并网参数，可以确定时刻1的开关频率，根据谐振谷底时间/＞和时刻2对应的并网参数，可以确定时刻2的开关频率，……根据谐振谷底时间/＞和时刻5对应的并网参数，可以确定时刻5的开关频率，以此类推。其他控制阶段同理，下述均不再赘述。上述实施例中，由于针对各控制阶段，均能够根据当前的控制阶段的谐振谷底数量，确定当前的控制阶段的谐振谷底时间，并基于当前的控制阶段的谐振谷底时间以及并网参数，得到功率开关在当前的控制阶段的开关频率，因此，通过谐振谷底时间就可以控制功率开关的开关频率，并使得开关频率不小于开关频率下限且不大于开关频率上限，提高了控制效率和精度。图7为本申请实施例中又一种确定开关频率的流程示意图，在一个示例性的实施例中，如图7所示，上述S602中的“基于当前的控制阶段的谐振谷底时间以及并网参数，得到功率开关在当前的控制阶段的开关频率”包括S701至S702。S701，根据并网参数确定当前的控制阶段的导通时间和下降时间。在本实施例中，根据式和式，可知，确定了并网参数之后，就可以确定功率开关S1的导通时间和下降时间/＞。因此，控制器就可以利用式和式，根据并网参数确定功率开关S1在当前的控制阶段的导通时间/＞和下降时间/＞。同样地，当前的控制阶段的导通时间和下降时间会随着并网参数发生变化。例如，控制阶段1中时刻1对应的导通时间与时刻2对应的导通时间/＞可能不同。S702，根据当前的控制阶段的导通时间、下降时间和谐振谷底时间，得到功率开关在当前的控制阶段的开关频率。继续以控制阶段1为例，控制器可以确定控制阶段1中导通时间、下降时间/＞和谐振谷底时间/＞之和/＞，并将/＞的倒数作为控制阶段1内功率开关S1的开关频率。图8为本申请实施例中一种谷底开关的原理示意图，如图8所示，在反激变换器的原边的峰值电流确定的情况下，可以确定功率开关S1的导通时间/＞和下降时间/＞，进而就可以通过调整功率开关的谐振谷底数量m控制功率开关S1的谐振谷底时间/＞，以控制功率开关S1的单次开关周期，从而控制功率开关S1的开关频率。为了便于表述，以下谐振谷底数量m采用谐振周期数量n表示。例如，图8中谐振周期数量n=2时的谐振谷底时间/＞＞当谐振周期数量n=1时的谐振谷底时间/＞＞谐振周期数量n=0时的谐振谷底时间/＞。上述实施例中，根据并网参数确定当前的控制阶段的导通时间和下降时间，并根据当前的控制阶段的导通时间、下降时间和谐振谷底时间，得到功率开关在当前的控制阶段的开关频率，这样，就实现了基于当前的控制阶段的谐振谷底时间以及并网参数，得到功率开关在当前的控制阶段的开关频率，提高了开关频率的控制效率。在一个示例性的实施例中，上述的“根据并网参数及各控制阶段的谐振谷底数量，得到功率开关在各控制阶段的开关频率”还可以通过如下方式实现：利用第一目标公式，根据当前的控制阶段的谐振谷底数量以及并网参数，得到功率开关在当前的控制阶段的开关频率；第一目标公式为：；其中，并网参数包括、/＞、/＞、/＞、/＞、/＞、/＞和/＞；表示开关频率，/＞表示反激变换器中变压器的励磁电感，/＞表示反激变换器的原边的峰值电流，n表示反激变换器的谐振周期数量，n=m-1，m表示谐振谷底数量，，/＞，/＞，/＞表示与反激变换器连接的电网的有效功率，/＞表示电网的电网电压的相位角，/＞表示反激变换器的供电电压，/＞表示电网电压的峰值，/＞表示反激变换器中变压器的匝数比，/＞表示功率开关的寄生电容。在本实施例中，联立式，可以得到如下式。式中的、/＞和/＞满足如下式。进而，联立式，则可以确定功率开关S1的开关频率如下式。其中，式也即第一目标公式，其建立了开关频率与谐振周期数量n、峰值电流/＞之间的关系。换句话说，第一目标公式也相当于建立了开关频率/＞与谐振谷底数量m、峰值电流/＞之间的关系。因此，通过第一目标公式，就可以根据当前的控制阶段内功率开关的谐振谷底数量和并网参数，控制当前的控制阶段内功率开关的开关频率。例如，在控制阶段1中使式中的n=m0-1，以确定功率开关S1在控制阶段1的开关频率/＞。上述实施例中，由于能够利用第一目标公式，根据当前的控制阶段的谐振谷底数量以及并网参数，得到功率开关在当前的控制阶段的开关频率，因此，提高了确定开关频率的效率。图9为本申请实施例中一种确定谐振谷底数量的流程示意图，在一个示例性的实施例中，如图9所示，上述的“根据并网参数、频率上限和频率下限，确定功率开关在各控制阶段的谐振谷底数量”包括S901至S902。S901，在电网电压处于过零点的情况下，根据并网参数、频率上限和频率下限，确定多个候选谐振谷底数量。可选的，在电网电压处于过零点的情况下，控制器可以基于式，确定出，且开关频率/＞不小于开关频率下限/＞且不大于开关频率上限/＞的多个候选谐振谷底数量。S902，从各候选谐振谷底数量中确定电网电压处于过零点时对应的控制阶段的谐振谷底数量。进而，确定多个候选谐振谷底数量之后，控制器就可以从各候选谐振谷底数量中确定电压过零点时第一次控制阶段内的谐振谷底数量m0。示例性地，候选谐振谷底数量分别为8、7、6、5、4、3，则计算机设备可以确定控制阶段1内的谐振谷底数量可以是8、7、6、5、4、3中的任何一个值。在一些实施例中，由于电网电压处于过零点附近时，并网电流也很小，为了通过延长死区时间来降低开关频率，从而减小轻载时的开关损耗，控制器可以将各候选谐振谷底数量中最大的谐振谷底数量作为第一次控制阶段内的谐振谷底数量。上述实施例中，由于在电网电压处于过零点的情况下，根据并网参数、频率上限和频率下限，确定多个候选谐振谷底数量，并从各候选谐振谷底数量中确定电网电压处于过零点时对应的控制阶段的谐振谷底数量。因此，在电网电压处于过零点的情况下，确定出的多个候选谐振谷底数量均可以使得功率开关的开关频率不小于开关频率下限且不大于开关频率上限，现有技术中因开关频率过高而导致开关损耗很大的问题。在一个示例性的实施例中，可选的，上述的S901中的“根据并网参数、频率上限和频率下限，确定多个候选谐振谷底数量”，可以通过如下方式实现：利用第二目标公式，根据并网参数、频率上限和频率下限，确定多个候选谐振谷底数量；第二目标公式为：。/＞在本实施例中，基于式，可以确定电网电压处于过零点，即趋近于0时，功率开关S1的开关频率/＞如式。示例性地，t0时电网电压处于过零点，则在t0时，控制器令＜式＜/＞进行求解，就可以确定出多个候选谐振谷底数量。进一步可选的，基于式进行求解之后得到候选谐振谷底数量之后，控制器可以取候选谐振谷底数量中最小的正整数作为电网电压处于过零点时对应的控制阶段的谐振谷底数量。上述实施例中，由于能够利用第二目标公式，根据并网参数、频率上限和频率下限，确定多个候选谐振谷底数量。因此，提高了确定候选谐振谷底数量的效率。图10为本申请实施例中一种控制开关频率的流程示意图，在一个示例性的实施例中，如图10所示，上述的“根据并网参数、频率上限和频率下限，确定功率开关在各控制阶段的谐振谷底数量”包括S1001至S1002。S1001，根据上一个的控制阶段的谐振谷底数量，确定当前的控制阶段的开关频率。在本实施例中，结合式可以看出，在谐振谷底数量一定的情况下，随着增大，功率开关S1的开关频率/＞会逐渐减小，因此，为了使得功率开关S1的开关频率/＞不小于开关频率下限/＞且不大于开关频率上限/＞，控制器会根据上一个的控制阶段的谐振谷底数量，确定当前的控制阶段的开关频率。可选的，控制器可以根据当前的控制阶段的并网参数，确定当前的控制阶段的开关频率。示例性地，控制器在t0时刻计算出控制阶段1的谐振谷底数量为m0，则对于控制阶段2而言，控制器可以继续根据控制阶段1的谐振谷底数量m0，确定控制阶段2的开关频率。S1002，若当前的控制阶段的开关频率小于频率下限或者大于频率上限，则调整上一个的控制阶段的谐振谷底数量得到当前的控制阶段的谐振谷底数量。在本实施例中，在当前的控制阶段的开关频率小于频率下限或者大于频率上限的情况下，则说明如果沿用上一个的控制阶段的谐振谷底数量，则会使得当前的控制阶段的开关频率无法满足要求，因此，为了使得当前的控制阶段的开关频率不小于频率下限且不大于频率上限，控制器会调整上一个的控制阶段的谐振谷底数量得到当前的控制阶段的谐振谷底数量。可选的，控制器可以以一定的补偿增加或减小上一个的控制阶段的谐振谷底数量，直到根据调整后的谐振谷底数量计算出开关频率不小于频率下限，且不大于频率上限，则可以将调整后的谐振谷底数量作为当前的控制阶段的谐振谷底数量。需要说明的是，当前的控制阶段的开关频率小于频率下限或者大于频率上限，包括：当前的控制阶段中存在任意一个时刻的开关频率小于频率下限或者大于频率上限。S1003，若当前的控制阶段的开关频率不小于频率下限，且不大于频率上限，则将上一个的控制阶段的谐振谷底数量作为当前的控制阶段的谐振谷底数量。在本实施例中，在当前的控制阶段的开关频率不小于频率下限，且不大于频率上限的情况下，则说明可以继续沿用上一个的控制阶段的谐振谷底数量，以使得当前的控制阶段的开关频率不小于频率下限且不大于频率上限。因此，为了使得当前的控制阶段的开关频率不小于频率下限且不大于频率上限，将上一个的控制阶段的谐振谷底数量作为当前的控制阶段的谐振谷底数量即可。需要说明的是，当前的控制阶段的开关频率不小于频率下限，且不大于频率上限，包括：当前的控制阶段中每一个时刻的开关频率均不小于频率下限，且不大于频率上限。图11为本申请中实施例中一种控制过程的示意图，图11中上方的图示出了反激变换器的原边的峰值电流随时间变化的情况，图11中下方的图示出了功率开关S1的开关频率随时间的变化情况。继续上述的示例，t0为电网电压过零点，在t0时，控制器令＜式＜/＞进行求解，并确定控制阶段1内的谐振谷底数量m0=8，此时谐振周期数量n0=7。在t0~t1的过程中，由于增大，功率开关S1的开关频率/＞会逐渐减小，在t1时，若以谐振谷底数量m0=8继续运行，功率开关S1的开关频率/＞＜开关频率下限/＞，则控制器在t1时刻减小m0得到m1，例如m1=m0-2=6，此时谐振周期数量n1=5。在t1~t2的过程中，由于增大，功率开关S1的开关频率/＞会逐渐减小，在t2时，若以谐振谷底数量m1=6继续运行，功率开关S1的开关频率/＞＜开关频率下限/＞，则控制器在t2时刻减小m1得到m2，例如m2=m1-2=4，此时谐振周期数量n2=3，以此类推。需要说明的是，上述以每次减小2进行示例，在调整上一个的控制阶段的谐振谷底数量时，也可以每次减小不同的值，本实施例并不以此为限。上述实施例中，由于根据上一个的控制阶段的谐振谷底数量，确定当前的控制阶段的开关频率，并在当前的控制阶段的开关频率小于频率下限或者大于频率上限的情况下，调整上一个的控制阶段的谐振谷底数量得到当前的控制阶段的谐振谷底数量，在当前的控制阶段的开关频率不小于频率下限，且不大于频率上限的情况下，将上一个的控制阶段的谐振谷底数量作为当前的控制阶段的谐振谷底数量。这样，就可以使得功率开关的开关频率不小于频率下限，且不大于频率上限，提高安全性。在一个示例性的实施例中，可选的，上述S902中的“调整上一个的控制阶段的谐振谷底数量得到当前的控制阶段的谐振谷底数量”，可以通过如下方式实现：若相位角位于，则减小当前的控制阶段的谐振谷底数量，以确定下一个的控制阶段的谐振谷底数量。/＞若相位角未位于，则增大当前的控制阶段的谐振谷底数量，以确定下一个的控制阶段的谐振谷底数量。在本实施例中，k为自然数，电网电压的相位角通常为正弦变化，则峰值电流也会按照规律变化。请参考图11，可以看出，以一个360°为例，在相位角/＞大于等于0°且小于等于90°，以及大于等于180°且小于等于270°的情况下，峰值电流/＞与相位角同向变化，反之，峰值电流/＞与相位角/＞反向变化。而在峰值电流与相位角/＞同向变化的情况下，功率开关S1的开关频率/＞会逐渐减小，因此需要减小谐振谷底数量，以减小功率开关的谐振谷底时间/＞，从而增大功率开关S1的开关频率/＞。进而，在相位角/＞位于的情况下，控制器会减小当前的控制阶段的谐振谷底数量，以确定下一个的控制阶段的谐振谷底数量。其中，可以是对上一次控制阶段内的谐振谷底数量减小第一预设值。在峰值电流与相位角/＞反向变化的情况下，功率开关S1的开关频率/＞会逐渐增大，因此需要增大谐振谷底数量，以增大功率开关的谐振谷底时间/＞，从而减小功率开关S1的开关频率/＞。进而，在相位角/＞未位于的情况下，控制器会增大当前的控制阶段的谐振谷底数量，以确定下一个的控制阶段的谐振谷底数量。其中，可以是对上一次控制阶段内的谐振谷底数量增大第二预设值。上述实施例中，k为自然数，电网与反激变换器连接。由于在电网的电网电压的相位角位于的情况下，减小当前的控制阶段的谐振谷底数量，以确定下一个的控制阶段的谐振谷底数量。而在相位角未位于的情况下，增大当前的控制阶段的谐振谷底数量，以确定下一个的控制阶段的谐振谷底数量。因此，调整上一个的控制阶段的谐振谷底数量得到当前的控制阶段的谐振谷底数量之后，就可以使得当前的控制阶段的谐振谷底数量不小于频率下限且不大于频率上限。图12为本申请实施例中又一种确定开关频率的流程示意图，在一个示例性的实施例中，如图12所示，上述的反激变换器的并网控制方法还包括S1201至S1202。S1201，根据功率开关的开关频率，确定在预设周期内的功率开关的开关频率；预设周期为预设倍数的工频周期。在本实施例中，工频指市电的频率，以50Hz为例，则工频周期可以为0.02秒。预设倍数可以是大于0的任何数，例如预设倍数为1/2或者1/4，又例如预设倍数可以是1或者2等等。以1/4的工频周期为例，请继续参考图11，继续上述的示例，控制器按照上述的流程执行，在t3~t4的过程中，由于增大，功率开关S1的开关频率/＞会逐渐减小，在t4时，若以谐振谷底数量m3继续运行，功率开关S1的开关频率/＞＜开关频率下限/＞，则控制器在t4时刻减小n3得到n4，并在t4~t5的过程中基于谐振谷底数量m4运行，直到=90°，/＞=1，此时，当前的控制阶段内的谐振谷底数量最小。这样，也即完成了1/4工频周期调整。S1202，根据功率开关在预设周期内的开关频率，确定功率开关在各控制阶段内的开关频率。继续上述的示例，由于确定了功率开关在1/4工频周期内的开关频率，而工频周期具有规律性，因此，根据功率开关在预设周期内的开关频率，就可以确定功率开关在各控制阶段内的开关频率。例如，可以通过对称、复制等处理方式确定功率开关在相位角在360°中的各控制阶段内的开关频率。请继续参考图11，控制器可以对相位角处于0~90°，也即功率开关在前1/4工频周期内的开关频率进行对称处理，得到相位角/＞处于90~180°的情况下功率开关的开关频率。进一步地，控制器可以复制相位角处于0~180°，也即功率开关在前1/2工频周期内的开关频率进行复制处理，以得到相位角/＞处于180~360°的情况下功率开关的开关频率。上述实施例中，预设周期为预设倍数的工频周期，由于能够根据功率开关的开关频率，确定在预设周期内的功率开关的开关频率，并根据功率开关在预设周期内的开关频率，确定功率开关在各控制阶段内的开关频率。这样，就可以能够高效、准确地确定功率开关在各控制阶段内的开关频率。图13为本申请实施例中一种反激变换器的并网控制方法的过程示意图，在一个示例性的实施例中，控制器可以按照如下流程执行该方法。S1301，获取反激变换器的并网参数、反激变换器中功率开关的频率上限和频率下。S1302，在电网电压处于过零点的情况下，利用第二目标公式，根据并网参数、频率上限和频率下限，确定多个候选谐振谷底数量。S1303，从各候选谐振谷底数量中确定电网电压处于过零点时对应的控制阶段的谐振谷底数量。S1304，根据上一个的控制阶段的谐振谷底数量，确定当前的控制阶段的开关频率。S1305，若当前的控制阶段的开关频率小于频率下限或者大于频率上限，则调整上一个的控制阶段的谐振谷底数量得到当前的控制阶段的谐振谷底数量。S1306，若当前的控制阶段的开关频率不小于频率下限，且不大于频率上限，则将上一个的控制阶段的谐振谷底数量作为当前的控制阶段的谐振谷底数量。S1307，利用第一目标公式，根据当前的控制阶段的谐振谷底数量以及并网参数，得到功率开关在当前的控制阶段的开关频率。S1308，根据功率开关的开关频率，确定在预设周期内的功率开关的开关频率。S1309，根据功率开关在预设周期内的开关频率，确定功率开关在各控制阶段内的开关频率。S1310，根据开关频率控制功率开关。S1301~S1310的步骤可以参考上述实施例，此处不再赘述。可见，本实施例提出一种基于反激变换器的扩展软开关范围效率优化控制方法。根据反激变换器的多谷底开关的数学模型，给出用于开关管控制的峰值电流参考和开关频率的计算过程和控制方式。反激变换器工作于断续导通模式，根据并网功率和预设的开关频率范围计算出功率开关开通时的谷底数量。表1提供了一种反激变换器的仿真参数，按照表1中的参数对功率开关的频率进行仿真验证。为了将功率开关S1的开关频率调节在上限250 kHz和下限190 kHz之间，根据公式计算在电网电压过零点时n=7，m=8。随着瞬时功率的增加，当通过公式计算的开关频率等于190 kHz时，n切换为4，m=5；然后，当接下来开关频率达到下限190 kHz时，n分别切换为2、1和0，以此类推。表1 仿真参数图14为本申请实施例中一种仿真效果图，图14中的图~图14中的图分别示出了不同的谐振周期数量n，也即不同的谐振谷底数量m下，功率开关S1的驱动信号和功率开关S1的漏源电压随时间变化的波形图。可以理解的是，图14的图~图14的图中上方的波形为驱动信号的波形示意，图14的图~图14的图中下方的波形为漏源电压的波形示意。如图14所示，按照本实施例的控制方法，在n = 0、1、2、4、7的所有不同负载条件下均实现了在谐振周期的谷底开关。图15为本申请实施例中一种电力参数的示意图，图15示出反激变换器电网电压、并网电流以及变压器次级电流随时间变化的情况。结合图15也可以验证了式揭示的原理。应该理解的是，虽然如上所述的各实施例所涉及的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，如上所述的各实施例所涉及的流程图中的至少一部分步骤可以包括多个步骤或者多个阶段，这些步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤中的步骤或者阶段的至少一部分轮流或者交替地执行。基于同样的发明构思，本申请实施例还提供了一种用于实现上述所涉及的反激变换器的并网控制方法的反激变换器的并网控制装置。该装置所提供的解决问题的实现方案与上述方法中所记载的实现方案相似，故下面所提供的一个或多个反激变换器的并网控制装置实施例中的具体限定可以参见上文中对于反激变换器的并网控制方法的限定，在此不再赘述。图16为本申请实施例中反激变换器的并网控制装置的结构框图，在一个示例性的实施例中，如图16所示，提供了一种反激变换器的并网控制装置1600，包括：第一获取模块1601、第一确定模块1602、第二确定模块1603和控制模块1604，其中：第一获取模块1601，用于获取反激变换器的并网参数、反激变换器中功率开关的频率上限和频率下限。第一确定模块1602，用于根据并网参数、频率上限和频率下限，确定功率开关的谐振谷底数量。第二确定模块1603，用于根据并网参数及谐振谷底数量，得到功率开关的开关频率。控制模块1604，用于根据开关频率控制功率开关。上述反激变换器的并网控制装置中的各个模块可全部或部分通过软件、硬件及其组合来实现。上述各模块可以硬件形式内嵌于或独立于计算机设备中的处理器中，也可以以软件形式存储于计算机设备中的存储器中，以便于处理器调用执行以上各个模块对应的操作。图17为本申请实施例中计算机设备的内部结构图，在一个示例性的实施例中，提供了一种计算机设备，该计算机设备可以是服务器，其内部结构图可以如图17所示。该计算机设备包括处理器、存储器、输入/输出接口和通信接口。其中，处理器、存储器和输入/输出接口通过系统总线连接，通信接口通过输入/输出接口连接到系统总线。其中，该计算机设备的处理器用于提供计算和控制能力。该计算机设备的存储器包括非易失性存储介质和内存储器。该非易失性存储介质存储有操作系统、计算机程序和数据库。该内存储器为非易失性存储介质中的操作系统和计算机程序的运行提供环境。该计算机设备的数据库用于存储相关数据。该计算机设备的输入/输出接口用于处理器与外部设备之间交换信息。该计算机设备的通信接口用于与外部的终端通过网络连接通信。该计算机程序被处理器执行时以实现一种反激变换器的并网控制方法。本领域技术人员可以理解，图17中示出的结构，仅仅是与本申请方案相关的部分结构的框图，并不构成对本申请方案所应用于其上的计算机设备的限定，具体的计算机设备可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。在一个实施例中，提供了一种计算机设备，包括存储器和处理器，存储器中存储有计算机程序，该处理器执行计算机程序时实现上述各方法实施例中的步骤。在一个实施例中，提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现上述各方法实施例中的步骤。在一个实施例中，提供了一种计算机程序产品，包括计算机程序，该计算机程序被处理器执行时实现上述各方法实施例中的步骤。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一非易失性计算机可读取存储介质中，该计算机程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、数据库或其它介质的任何引用，均可包括非易失性和易失性存储器中的至少一种。非易失性存储器可包括只读存储器、磁带、软盘、闪存、光存储器、高密度嵌入式非易失性存储器、阻变存储器、磁变存储器、铁电存储器、相变存储器、石墨烯存储器等。易失性存储器可包括随机存取存储器或外部高速缓冲存储器等。作为说明而非局限，RAM可以是多种形式，比如静态随机存取存储器或动态随机存取存储器等。本申请所提供的各实施例中所涉及的数据库可包括关系型数据库和非关系型数据库中至少一种。非关系型数据库可包括基于区块链的分布式数据库等，不限于此。本申请所提供的各实施例中所涉及的处理器可为通用处理器、中央处理器、图形处理器、数字信号处理器、可编程逻辑器、基于量子计算的数据处理逻辑器等，不限于此。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对本申请专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请的保护范围应以所附权利要求为准。
