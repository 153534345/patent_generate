标题title
贯通节点的服务访问路径构建系统
摘要abst
本发明提供一种贯通节点的服务访问路径构建系统，涉及计算机信息技术领域。该系统包括：服务元信息管理模块，用于收集、存储和管理域内所有服务的元信息，实现服务状态的具体感知和统一管理；跨域代理模块，用于为系统提供服务跨域访问通道和跨域数据同步；服务注册发现模块，用于提供域内服务注册、发布和全域发现的全流程功能；智能路由模块，用于基于统一的服务寻址规则，对服务寻址结果进行筛选，返回给用户当前情况下的最优访问路由；监控中心模块，用于监控域内所有服务，收集服务当前负载信息并发向所述服务元信息管理模块。本发明提出的系统，可以实现跨地点跨领域的服务“可注册、可发现、可调用”以及智能路由功能。
权利要求书clms
1.一种贯通节点的服务访问路径构建系统，其特征在于，包括：服务元信息管理模块，用于收集、存储和管理域内所有服务的元信息，实现服务状态的具体感知和统一管理；跨域代理模块，用于为系统提供服务跨域访问通道和跨域数据同步；服务注册发现模块，用于提供域内服务注册、发布和全域发现的全流程功能；智能路由模块，用于基于统一的服务寻址规则，对服务寻址结果进行筛选，返回给用户当前情况下的最优访问路由；监控中心模块，用于监控域内所有服务，收集服务当前负载信息并发向所述服务元信息管理模块。2.根据权利要求1所述的系统，其特征在于，在服务元信息管理模块，所述元信息包括多种服务状态信息的实体集，所述服务状态信息具体包括：服务所属域、服务部署位置信息、服务分配资源信息、服务访问地址、服务当前负载信息、服务请求响应时间、当前负载、是否特殊任务锁定。3.根据权利要求1所述的系统，其特征在于，域内服务将元数据注册到所述服务注册发现模块，所述服务注册发现模块将已注册的元数据跨域发布到全域范围，使全域内所有服务使用者均可进行服务发现，获取到该服务的地址，从而实现访问调用。4.根据权利要求3所述的系统，其特征在于，所述全域内所有服务包括第一域内的第一服务和第二域内的第二服务；所述服务注册发现模块具体用于：第一域内的第一服务通过监控中心模块向服务元信息管理模块进行服务注册，同时所述监控中心模块收集所述第一服务的当前负载信息，持续向服务元信息管理模块发送；所述第一域中的服务元信息管理模块将所述第一服务的元数据通知给所述第一域中的跨域代理模块，所述跨域代理模块创建所述第一服务的反向代理，并将数据同步发送至所述第二域中的跨域代理模块和服务元信息管理模块；所述第二域内的第二服务向本域中的服务元信息管理模块发起服务发现请求，通过智能路由选择出最优访问路由并返回给所述第二服务；针对所述第二域中的服务元信息管理模块返回的最优访问路由，通过所述第二域的跨域代理模块和所述第一域的跨域代理模块对所述第一域内的第一服务进行访问。5.根据权利要求1所述的系统，其特征在于，在智能路由模块，所述对服务寻址结果进行筛选分为根据预设策略的负载均衡方式进行筛选和根据服务质量评估进行筛选，其中：所述预设策略包括就近访问策略、高成功率策略、响应低时延策略，所述负载均衡方式包括轮询、权重、最少连接、IP_Hash、URL_Hash、Fair；所述服务质量评估包括按照多个指标项对服务进行综合质量评估，所述指标项包括服务是否跨域、服务请求响应时间、服务当前负载、是否特殊任务锁定、服务访问成功率。6.根据权利要求5所述的系统，其特征在于，按照以下方式对服务进行综合质量评估：；式中，T表示服务质量评估的结果；表示当前指标项的权重值；pn表示当前指标项的得分值。7.根据权利要求5所述的系统，其特征在于，所述智能路由模块具体用于：从所述服务注册发现模块获取服务寻址结果，所述服务寻址结果包括服务发现数量；对所述服务发现数量进行判断，当所述服务发现数量不大于1时，无需进行智能路由，直接向用户返回当前服务发现结果作为最优访问路由；当所述服务发现数量大于1时，进行智能路由初始化，判断当前所使用的智能路由方式，从而进行不同的智能路由选择，其中，所述智能路由方式包括负载均衡方式或质量评估方式。
说明书desc
技术领域本发明涉及计算机信息技术领域，尤其涉及一种贯通节点的服务访问路径构建系统。背景技术随着信息系统的发展，应用规模日趋庞大，不同应用间的交互不断增多，传统信息系统存在大量重复的共性业务逻辑，采取将核心业务抽取出来成为服务，划分原有复杂的应用，以模块形式独立部署，能够实现服务的共享与重用。然而随着企业业务的爆炸式增长，单域内的信息系统已经无法覆盖多地、全国甚至全球的业务。多地同时提供一套信息服务系统，不仅能够为各域内的用户提供个性化的服务，同时能够对数据进行异地备份，保证了数据的安全性。但由于每个域内都有自己独立的防护系统，彼此之间网络并不能互通，域之间的服务发现和调用变得十分困难。跨域代理成为跨域服务访问的一种常见解决方案。目前基于Nginx、Apisix等开源软件，在各个域的网络出口处部署跨域代理，用户可以访问到其他域的服务。然而，由于配置和部署较为复杂，在服务访问的过程中，在实现服务自动发现和访问方面仍然面临障碍，很难适用于大型分布式平台或复杂业务系统。综上所述，目前在相关领域内缺少完善的服务跨域寻址访问的研究，即在建立跨域代理的基础上提供贯穿节点的服务访问路径。发明内容鉴于上述问题，本发明提供了一种贯通节点的服务访问路径构建系统。本发明一方面供了一种贯通节点的服务访问路径构建系统，包括：服务元信息管理模块，用于收集、存储和管理域内所有服务的元信息，实现服务状态的具体感知和统一管理；跨域代理模块，用于为系统提供服务跨域访问通道和跨域数据同步；服务注册发现模块，用于提供域内服务注册、发布和全域发现的全流程功能；智能路由模块，用于基于统一的服务寻址规则，对服务寻址结果进行筛选，返回给用户当前情况下的最优访问路由；监控中心模块，用于监控域内所有服务，收集服务当前负载信息并发向所述服务元信息管理模块。进一步地，在服务元信息管理模块，所述元信息包括多种服务状态信息的实体集，所述服务状态信息具体包括：服务所属域、服务部署位置信息、服务分配资源信息、服务访问地址、服务当前负载信息、服务请求响应时间、当前负载、是否特殊任务锁定。进一步地，域内服务将元数据注册到所述服务注册发现模块，所述服务注册发现模块将已注册的元数据跨域发布到全域范围，使全域内所有服务使用者均可进行服务发现，获取到该服务的地址，从而实现访问调用。进一步地，所述全域内所有服务包括第一域内的第一服务和第二域内的第二服务；所述服务注册发现模块具体用于：第一域内的第一服务通过监控中心模块向服务元信息管理模块进行服务注册，同时所述监控中心模块收集所述第一服务的当前负载信息，持续向服务元信息管理模块发送；所述第一域中的服务元信息管理模块将所述第一服务的元数据通知给所述第一域中的跨域代理模块，所述跨域代理模块创建所述第一服务的反向代理，并将数据同步发送至所述第二域中的跨域代理模块和服务元信息管理模块；所述第二域内的第二服务向本域中的服务元信息管理模块发起服务发现请求，通过智能路由选择出最优访问路由并返回给所述第二服务；针对所述第二域中的服务元信息管理模块返回的最优访问路由，通过所述第二域的跨域代理模块和所述第一域的跨域代理模块对所述第一域内的第一服务进行访问。进一步地，在智能路由模块，所述对服务寻址结果进行筛选分为根据预设策略的负载均衡方式进行筛选和根据服务质量评估进行筛选，其中：所述预设策略包括就近访问策略、高成功率策略、响应低时延策略，所述负载均衡方式包括轮询、权重、最少连接、IP_Hash、URL_Hash、Fair；所述服务质量评估包括按照多个指标项对服务进行综合质量评估，所述指标项包括服务是否跨域、服务请求响应时间、服务当前负载、是否特殊任务锁定、服务访问成功率。进一步地，按照以下方式对服务进行综合质量评估：式中，T表示服务质量评估的结果；表示当前指标项的权重值；pn表示当前指标项的得分值。进一步地，所述智能路由模块具体用于：从所述服务注册发现模块获取服务寻址结果，所述服务寻址结果包括服务发现数量；对所述服务发现数量进行判断，当所述服务发现数量不大于1时，无需进行智能路由，直接向用户返回当前服务发现结果作为最优访问路由；当所述服务发现数量大于1时，进行智能路由初始化，判断当前所使用的智能路由方式，从而进行不同的智能路由选择，其中，所述智能路由方式包括负载均衡方式或质量评估方式。与现有技术相比，本发明提供的贯通节点的服务访问路径构建系统，至少具有以下有益效果：通过构建全域服务目录、智能路由体系，可跨域访问异地服务并智能选择当前条件下最优路由，显著提高服务访问效率。能够实现服务实例的异地主备。当某域的信息系统遭受意外而无法提供服务时，仍然能够通过跨域代理访问其他域的服务实例，从而保证服务的高可靠性。附图说明通过以下参照附图对本发明实施例的描述，本发明的上述以及其他目的、特征和优点将更为清楚，在附图中：图1示意性示出了根据本发明实施例的贯通节点的服务访问路径构建系统的结构框图；图2示意性示出了根据本发明实施例的服务注册发现模块的原理图；图3示意性示出了根据本发明实施例的智能路由模块的原理图。具体实施方式为使本发明的目的、技术方案和优点更加清楚明白，以下结合具体实施例，并参照附图，对本发明进一步详细说明。显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在此使用的术语仅仅是为了描述具体实施例，而并非意在限制本发明。在此使用的术语“包括”、“包含”等表明了所述特征、步骤、操作和/或部件的存在，但是并不排除存在或添加一个或多个其他特征、步骤、操作或部件。在此使用的所有术语具有本领域技术人员通常所理解的含义，除非另外定义。应注意，这里使用的术语应解释为具有与本说明书的上下文相一致的含义，而不应以理想化或过于刻板的方式来解释。现有Nginx、Apisix等开源网关，服务的IP和端口都是提前设置好后对外开放的，无法实现跨域服务的自动代理、注册、发现和智能路由功能。基于此，本发明提出一种贯通节点的服务访问路径构建系统，通过跨域通道建立全域服务目录体系，实现跨地点跨领域的服务“可注册、可发现、可调用”。本发明提出的系统，通过跨域代理将本域的服务实例信息转到其他域的服务目录。在进行服务访问时，当本域存在服务实例，优先访问本域的服务实例；如果本域没有服务实例，可以访问其他域的服务实例。图1示意性示出了根据本发明实施例的贯通节点的服务访问路径构建系统的结构框图。如图1所示，根据该实施例的贯通节点的服务访问路径构建系统，可以包括服务元信息管理模块、跨域代理模块、服务注册发现模块、智能路由模块和监控中心模块，实现跨地点跨领域的服务“可注册、可发现、可调用”以及智能路由功能，具体各模块功能描述如下。服务元信息管理模块：用于收集、存储和管理域内所有服务的元信息，实现服务状态的具体感知和统一管理，为系统内其他功能模块提供信息支撑。在服务元信息管理模块，元信息包括多种服务状态信息的实体集，服务状态信息具体包括：服务所属域、服务部署位置信息、服务分配资源信息、服务访问地址、服务当前负载信息、服务请求响应时间、当前负载、是否特殊任务锁定。服务元信息管理模块是本系统寻址决策的重要支撑点，是智能路由功能的重要支撑，为服务质量评估提供服务数据来源。跨域代理模块：具备反向代理和数据同步功能，用于为系统提供服务跨域访问通道和跨域数据同步。不同域的服务主体、功能主体和数据中心等模块依赖跨域代理模块进行业务互访和跨域数据同步。服务注册发现模块：包含服务注册、服务跨域发布、服务发现等功能，用于提供域内服务注册、发布和全域发现的全流程功能。其中，域内服务将元数据注册到服务注册发现模块，服务注册发现模块将已注册的元数据跨域发布到全域范围，使全域内所有服务使用者均可进行服务发现，获取到该服务的地址，从而实现访问调用。智能路由模块：用于基于统一的服务寻址规则，对服务寻址结果进行筛选，返回给用户当前情况下的最优访问路由。在智能路由模块，对服务寻址结果进行筛选分为根据预设策略的负载均衡方式进行筛选和根据服务质量评估进行筛选，其中：预设策略包括就近访问策略、高成功率策略、响应低时延策略，负载均衡方式包括轮询、权重、最少连接、IP_Hash、URL_Hash、Fair；服务质量评估包括按照多个指标项对服务进行综合质量评估，这些指标项包括服务是否跨域、服务请求响应时间、服务当前负载、是否特殊任务锁定、服务访问成功率。其中，特殊任务锁定是指该服务仅向特定的客户端提供服务。监控中心模块：用于监控域内所有服务，收集服务当前负载信息并发向服务元信息管理模块。例如，监控中心模块可以包括Java SDK、C++ SDK，各SDK通过监控中心模块可轻松实现服务注册、寻址功能，同时SDK可收集服务当前负载信息并发向服务元信息管理模块。下面结合附图对该实施例的贯通节点的服务访问路径构建系统做进一步详细说明。图2示意性示出了根据本发明实施例的服务注册发现模块的原理图。如图2所示，例如全域内所有服务包括第一域的第一服务和第二域内的第二服务；服务注册发现模块具体用于：服务注册第一域内的第一服务通过监控中心模块向服务元信息管理模块进行服务注册，包括服务版本信息、实例名、访问地址、开发者等信息。同时监控中心模块收集第一服务的当前负载信息，持续向服务元信息管理模块发送。服务跨域发布第一域中的服务元信息管理模块将第一服务的元数据通知给第一域中的跨域代理模块，跨域代理模块创建第一服务的反向代理，并将数据同步发送至第二域中的跨域代理模块和服务元信息管理模块。服务发现第二域内的第二服务向本域中的服务元信息管理模块发起服务发现请求，通过智能路由选择出最优访问路由并返回给第二服务。服务访问针对第二域中的服务元信息管理模块返回的最优访问路由，通过第二域的跨域代理模块和第一域的跨域代理模块对第一域内的第一服务进行访问。图3示意性示出了根据本发明实施例的智能路由模块的原理图。如图3所示，智能路由模块通过预设策略的负载均衡或服务质量评估，实现了对服务寻址结果进行筛选，向用户返回最优访问路由。具体来说，智能路由模块用于：从服务注册发现模块获取服务寻址结果，服务寻址结果包括服务发现数量；对服务发现数量进行判断，当服务发现数量不大于1时，无需进行智能路由，直接向用户返回当前服务发现结果作为最优访问路由；当服务发现数量大于1时，进行智能路由初始化，判断当前所使用的智能路由方式，从而进行不同的智能路由选择，其中，智能路由方式包括负载均衡方式或质量评估方式。负载均衡方式负载均衡方式是根据预设策略对服务寻址结果进行筛选，包括轮询、权重、最少连接、IP_Hash、URL_Hash、Fair，由负载均衡器选择当前最优路由。质量评估方式质量评估方式是根据服务质量评估对服务寻址结果中的各服务进行筛选。参照图3，依次判定各服务是否存在特殊任务锁定策略，是否允许当前客户端访问，以及是否存在预定策略，如就近访问策略：默认不选择跨域服务，响应低延时策略：默认选择当前请求响应时间最短的服务，高成功率策略：默认选择当前访问成功率最高的服务。调整各指标项权重值后，对各服务进行质量得分计算，返回给质量得分最高结果作为最优访问路由。根据前述公开内容可知，服务质量评估包括按照多个指标项对服务进行综合质量评估，这些指标项包括服务是否跨域、服务请求响应时间、服务当前负载、是否特殊任务锁定、服务访问成功率。基于此，当指标项为5项时，可以按照以下方式对服务进行综合质量评估：.式中，T表示服务质量评估的结果；表示当前指标项的权重值；pn表示当前指标项的得分值。需要说明的是，当用户不选择预设策略时，各类指标项的权重值默认设定。当用户选择预设策略时，系统根据策略调整指标项的权重值。同时提供高度自定义策略，用户可自定义设置各指标项的权重值。综上所述，本发明实施例提出一种贯通节点的服务访问路径构建系统，具备服务元信息管理、跨域代理、服务注册发现、智能路由与监控等功能。从以上的描述中，可以看出，本发明上述的实施例至少实现了以下技术效果：通过构建全域服务目录、智能路由体系，可跨域访问异地服务并智能选择当前条件下最优路由，显著提高服务访问效率。能够实现服务实例的异地主备。当某域的信息系统遭受意外而无法提供服务时，仍然能够通过跨域代理访问其他域的服务实例，从而保证服务的高可靠性。附图中示出了一些方框图和/或流程图。应理解，方框图和/或流程图中的一些方框或其组合可以由计算机程序指令来实现。这些计算机程序指令可以提供给通用计算机、专用计算机或其他可编程数据处理装置的处理器，从而这些指令在由该处理器执行时可以创建用于实现这些方框图和/或流程图中所说明的功能/操作的装置。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。因此，限定有“第一”、“第二”的特征可以明示或者隐含地包括一个或者更多个该特征。在本发明的描述中，“多个”的含义是至少两个，例如两个、三个等，除非另有明确具体的限定。此外，位于元件之前的单词“一”或“一个”不排除存在多个这样的元件。以上所述的具体实施例，对本发明的目的、技术方案和有益效果进行了进一步详细说明，所应理解的是，以上所述仅为本发明的具体实施例而已，并不用于限制本发明，凡在本发明的精神和原则之内，所做的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
