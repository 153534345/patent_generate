标题title
端口复用电路、控制芯片与控制系统
摘要abst
本申请公开了一种端口复用电路、控制芯片与控制系统。端口复用电路包括信号检测通道与信号驱动通道。信号检测通道与信号驱动通道连接于复用第一脉宽调制信号与输入外部信号的端口。信号检测通道与信号驱动通道分时运行。信号检测通道包括信号检测支路、信号锁定支路与信号滤波支路。信号检测支路输出第一检测信号。信号锁定支路基于第一检测信号或输出信号输出第二检测信号。信号滤波支路对第二检测信号滤波后输出输出信号。信号驱动通道在其运行时驱动LED灯点亮。通过上述方式，能够实现在同一端口复用输出驱动LED灯的信号与输入外部信号，从而减少控制芯片的端口数量，既节省成本，也提高实用性。
权利要求书clms
1.一种端口复用电路，其特征在于，包括：信号检测通道与信号驱动通道，所述信号检测通道与所述信号驱动通道连接于同一端口，其中，所述端口用于复用驱动LED灯的第一脉宽调制信号与输入外部信号；在所述第一脉宽调制信号的每个周期中所述信号检测通道与所述信号驱动通道分时运行，其中，所述信号检测通道包括依次连接的信号检测支路、信号锁定支路与信号滤波支路，且所述信号检测支路连接至所述端口；所述信号检测支路用于在所述信号检测通道运行时，基于所述外部信号输出第一检测信号至所述信号锁定支路，所述外部信号与所述第一检测信号的电平相同；所述信号锁定支路用于基于所述第一检测信号或输出信号输出第二检测信号至所述信号滤波支路，其中，在所述信号检测通道运行时所述第二检测信号的电平与所述第一检测信号的电平相同，在所述信号检测通道未运行时所述第二检测信号的电平与所述输出信号的电平相反；所述信号滤波支路用于基于第一滤波时长对所述第二检测信号滤波后输出所述输出信号，其中，每一次在所述第二检测信号的电平与所述输出信号的电平相反的持续时长等于所述第一滤波时长时所述输出信号的电平翻转，以使所述输出信号的电平与所述外部信号延迟所述第一滤波时长的电平相同；所述信号驱动通道用于在其运行时驱动所述LED灯点亮。2.根据权利要求1所述的端口复用电路，其特征在于，所述信号滤波支路具体用于：在每一次所述第二检测信号的电平与所述输出信号的电平相反的开始时刻进行计时；若计时的时长小于所述第一滤波时长，且所述第二检测信号的电平切换至与所述输出信号的电平相同，则将计时的时长清零；若计时的时长等于所述第一滤波时长，则将所述输出信号的电平翻转，并将计时的时长清零。3.根据权利要求1或2所述的端口复用电路，其特征在于，所述第一滤波时长大于所述第一脉宽调制信号的一个周期的时长。4.根据权利要求1所述的端口复用电路，其特征在于，所述信号检测支路还用于接收基准电压，并基于所述基准电压与所述外部信号的比较结果输出所述第一检测信号；其中，在所述外部信号的电压大于所述基准电压时所述第一检测信号为高电平，在所述外部信号的电压小于或等于所述基准电压时所述第一检测信号为低电平。5.根据权利要求4所述的端口复用电路，其特征在于，所述信号检测支路包括比较器；所述比较器的第一输入端输入所述外部信号，所述比较器的第二输入端输入基准电压，所述比较器的第三端与所述信号锁定支路连接。6.根据权利要求1所述的端口复用电路，其特征在于，所述信号锁定支路包括第一反相器与选择器；所述选择器的第一输入端与所述信号检测支路的输出端连接，所述选择器的第二输入端与所述第一反相器的输出端连接，所述选择器的输出端与所述信号滤波支路的输入端连接，所述第一反相器的输入端与所述信号滤波支路的输出端连接。7.根据权利要求1所述的端口复用电路，其特征在于，所述信号滤波支路包括滤波器；所述滤波器的第一输入端与所述信号锁定支路的输出端连接，所述滤波器的第二输入端输入所述第一滤波时长，所述滤波器的输出端与所述信号锁定支路连接，并输出所述输出信号。8.根据权利要求1所述的端口复用电路，其特征在于，所述信号驱动通道包括PMOS管、NMOS管、第二反相器、与非门、以及或非门；所述第二反相器的输入端及所述与非门的第一输入端均输入所述第一脉宽调制信号，所述第二反相器的输出端与所述或非门的第一输入端连接，所述或非门的第二输入端及所述与非门的第二输入端均输入第二脉宽调制信号，所述与非门的输出端与所述PMOS管的栅极连接，所述PMOS管非栅极的第一端与电源连接，所述PMOS管非栅极的第二端分别与所述端口及所述NMOS管的漏极连接，所述NMOS管的源极接地，所述NMOS管的栅极与所述或非门的输出端连接。9.一种控制芯片，其特征在于，包括N个端口以及M个如权利要求1-7任意一项所述的端口复用电路，其中，N与M均为≥1的整数，且N≥M；所述N个端口中的M个端口与M个所述端口复用电路连接，并且M个端口中每个端口与一个端口复用电路连接。10.一种控制系统，其特征在于，包括M个电阻、K个LED灯以及如权利要求9所述的控制芯片，其中，K为≥1的整数，且K≥M；一个外部信号通过一个电阻输入至所述控制芯片的M个端口中的一个端口，并且，M个端口中的一个端口还与至少一个LED灯连接。
说明书desc
技术领域本申请涉及电子电路技术领域，特别是涉及一种端口复用电路、控制芯片与控制系统。背景技术对于很多智能硬件设备的控制芯片，为了实现丰富灵活的人机交互、实现UI输出以及各种控制信号的输入，通常需要使用到控制芯片较多的端口。比如LED电量显示控制、按键输入、霍尔开关信号输入等功能均需要使用到控制芯片的端口。然而，便携式设备对于芯片大小，控制芯片的端口数量会受限，同时处于成本考虑，也需要控制芯片的端口个数越少越好。因此，如何尽量减少控制芯片的端口数量就显得尤为重要。发明内容本申请旨在提供一种端口复用电路、控制芯片与控制系统，能够实现在同一端口复用输出驱动LED灯的信号与输入外部信号，从而减少控制芯片的端口数量，既节省成本，也提高实用性。为实现上述目的，第一方面，本申请提供一种端口复用电路，包括：信号检测通道与信号驱动通道，所述信号检测通道与所述信号驱动通道连接于同一端口，其中，所述端口用于复用驱动LED灯的第一脉宽调制信号与输入外部信号；在所述第一脉宽调制信号的每个周期中所述信号检测通道与所述信号驱动通道分时运行，其中，所述信号检测通道包括依次连接的信号检测支路、信号锁定支路与信号滤波支路，且所述信号检测支路连接至所述端口；所述信号检测支路用于在所述信号检测通道运行时，基于所述外部信号输出第一检测信号至所述信号锁定支路，所述外部信号与所述第一检测信号的电平相同；所述信号锁定支路用于基于所述第一检测信号或输出信号输出第二检测信号至所述信号滤波支路，其中，在所述信号检测通道运行时所述第二检测信号的电平与所述第一检测信号的电平相同，在所述信号检测通道未运行时所述第二检测信号的电平与所述输出信号的电平相反；所述信号滤波支路用于基于第一滤波时长对所述第二检测信号滤波后输出所述输出信号，其中，每一次在所述第二检测信号的电平与所述输出信号的电平相反的持续时长等于所述第一滤波时长时所述输出信号的电平翻转，以使所述输出信号的电平与所述外部信号延迟所述第一滤波时长的电平相同；所述信号驱动通道用于在其运行时驱动所述LED灯点亮。在一种可选的方式中，所述信号滤波支路具体用于：在每一次所述第二检测信号的电平与所述输出信号的电平相反的开始时刻进行计时；若计时的时长小于所述第一滤波时长，且所述第二检测信号的电平切换至与所述输出信号的电平相同，则将计时的时长清零；若计时的时长等于所述第一滤波时长，则将所述输出信号的电平翻转，并将计时的时长清零。在一种可选的方式中，所述第一滤波时长大于所述第一脉宽调制信号的一个周期的时长。在一种可选的方式中，所述信号检测支路还用于接收基准电压，并基于所述基准电压与所述外部信号的比较结果输出所述第一检测信号；其中，在所述外部信号的电压大于所述基准电压时所述第一检测信号为高电平，在所述外部信号的电压小于或等于所述基准电压时所述第一检测信号为低电平。在一种可选的方式中，所述信号检测支路包括比较器；所述比较器的第一输入端输入所述外部信号，所述比较器的第二输入端输入基准电压，所述比较器的第三端与所述信号锁定支路连接。在一种可选的方式中，所述信号锁定支路包括第一反相器与选择器；所述选择器的第一输入端与所述信号检测支路的输出端连接，所述选择器的第二输入端与所述第一反相器的输出端连接，所述选择器的输出端与所述信号滤波支路的输入端连接，所述第一反相器的输入端与所述信号滤波支路的输出端连接。在一种可选的方式中，所述信号滤波支路包括滤波器；所述滤波器的第一输入端与所述信号锁定支路的输出端连接，所述滤波器的第二输入端输入所述第一滤波时长，所述滤波器的输出端与所述信号锁定支路连接，并输出所述输出信号。在一种可选的方式中，所述信号驱动通道包括PMOS管、NMOS管、第二反相器、与非门、以及或非门；所述第二反相器的输入端及所述与非门的第一输入端均输入所述第一脉宽调制信号，所述第二反相器的输出端与所述或非门的第一输入端连接，所述或非门的第二输入端及所述与非门的第二输入端均输入第二脉宽调制信号，所述与非门的输出端与所述PMOS管的栅极连接，所述PMOS管非栅极的第一端与电源连接，所述PMOS管非栅极的第二端分别与所述端口及所述NMOS管的漏极连接，所述NMOS管的源极接地，所述NMOS管的栅极与所述或非门的输出端连接。第二方面，本申请提供一种控制芯片，包括N个端口以及M个如上所述的端口复用电路，其中，N与M均为≥1的整数，且N≥M；所述N个端口中的M个端口与M个所述端口复用电路连接，并且M个端口中每个端口与一个端口复用电路连接。第三方面，本申请提供一种控制系统，包括M个电阻、K个LED灯以及如上所述的控制芯片，其中，K为≥1的整数，且K≥M；一个外部信号通过一个电阻输入至所述控制芯片的M个端口中的一个端口，并且，M个端口中的一个端口还与至少一个LED灯连接。本申请的有益效果是：本申请提供的端口复用电路包括信号检测通道与信号驱动通道。信号检测通道与信号驱动通道连接于同一端口，其中，端口用于复用驱动LED灯的第一脉宽调制信号与输入外部信号。在第一脉宽调制信号的每个周期中信号检测通道与信号驱动通道分时运行。其中，信号检测通道包括依次连接的信号检测支路、信号锁定支路与信号滤波支路，且信号检测支路连接至端口。在信号检测通道运行时，信号检测支路基于外部信号输出第一检测信号至信号锁定支路，且外部信号与第一检测信号的电平相同；同时，信号锁定支路基于第一检测信号输出与其电平相同的第二检测信号。在信号检测通道未运行时，信号锁定支路基于输出信号输出第二检测信号至信号滤波支路，其中，第二检测信号的电平与输出信号的电平相反。继而，信号滤波支路用于基于第一滤波时长对第二检测信号滤波后输出输出信号。其中，每一次在第二检测信号的电平与输出信号的电平相反的持续时长等于第一滤波时长时可确定第二检测信号的电平与输出信号的电平相反的开始时刻即为外部信号电平翻转的时刻，在该开始时刻经过第一滤波时间将输出信号的电平翻转，就能够使输出信号的电平与外部信号延迟第一滤波时长的电平相同。从而，通过输出信号就能够得到外部信号，换言之基于输出信号可实现外部信号的功能。其次，信号驱动通道用于在其运行时驱动LED灯点亮，则能够实现驱动LED灯的功能。由此可见，通过上述方式，在同一端口实现了复用驱动LED灯的信号与输入外部信号，有利于减少控制芯片的端口数量，既节省成本，也提高实用性。附图说明一个或多个实施例通过与之对应的附图中的图片进行示例性说明，这些示例性说明并不构成对实施例的限定，附图中具有相同参考数字标号的元件表示为类似的元件，除非有特别申明，附图中的图不构成比例限制。图1为本申请实施例一提供的端口复用电路的结构示意图；图2为本申请实施例二提供的端口复用电路的结构示意图；图3为本申请实施例一提供的端口复用电路的电路结构示意图；图4为图3所示的电路结构中的各信号的示意图；图5为本申请实施例二提供的端口复用电路的电路结构示意图；图6为本申请实施例三提供的端口复用电路的电路结构示意图；图7为本申请实施例一提供的控制芯片的结构示意图；图8为本申请实施例一提供的控制系统的结构示意图；图9为本申请实施例二提供的控制系统的结构示意图。具体实施方式为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。请参照图1，图1为本申请实施例提供的端口复用电路的结构示意图。如图1所示，端口复用电路100包括信号检测通道10与信号驱动通道20。其中，信号检测通道10与信号驱动通道20连接于同一端口J1。端口J1用于复用驱动LED灯LD1的第一脉宽调制信号S_PWM1与输入外部信号S_EXT，亦即端口J1既可以实现基于第一脉宽调制信号S_PWM1驱动LED灯LD1点亮，也可以实现接收外部信号S_EXT并实现与其对应的功能。其中，在一些实施方式中，外部信号S_EXT可以为霍尔信号、通过按键输入的信号、使能信号及低频通讯信号等具有高电平和/或低电平的信号。同时，可以在接口J1与外部信号S_EXT增加电阻，以避免外部信号S_EXT影响到对LED灯LD1的驱动。在第一脉宽调制信号S_PWM1的每个周期中信号检测通道10与信号驱动通道20分时运行。例如，在第一脉宽调制信号S_PWM1的每个周期的高电平对应的时间段，信号驱动通道20运行以驱动LED灯LD1点亮；在第一脉宽调制信号S_PWM1的每个周期的低电平对应的时间段，信号检测通道10运行以确定外部信号S_EXT。在本申请的后续实施例中，均以第一脉宽调制信号S_PWM1的每个周期的高电平对应的时间段信号驱动通道20运行，及第一脉宽调制信号S_PWM1的每个周期的低电平对应的时间段信号检测通道10运行为例进行说明。其中，信号驱动通道20用于在其运行时驱动LED灯点亮。信号检测通道10包括依次连接的信号检测支路11、信号锁定支路12与信号滤波支路13，且信号检测支路11连接至端口J1。具体地，信号检测支路11用于在信号检测通道10运行时，基于外部信号S_EXT输出第一检测信号S_DET1至信号锁定支路12，外部信号S_EXT与第一检测信号S_DET1的电平相同。信号锁定支路12用于基于第一检测信号S_DET1或输出信号S_OUT输出第二检测信号S_DET2至信号滤波支路13。其中，在信号检测通道10运行时第二检测信号S_DET2的电平与第一检测信号S_DET1的电平相同，在信号检测通道10未运行时第二检测信号S_DET2的电平与输出信号S_OUT的电平相反。信号滤波支路13用于基于第一滤波时长对第二检测信号S_DET2滤波后输出输出信号S_OUT。其中，每一次在第二检测信号S_DET2的电平与输出信号S_OUT的电平相反的持续时长等于第一滤波时长时输出信号S_OUT的电平翻转，以使输出信号S_OUT的电平与外部信号S_EXT延迟第一滤波时长的电平相同。在实际应用中，在信号检测通道10运行时，信号检测支路11基于外部信号S_OUT输出第一检测信号S_DET1至信号锁定支路12，且外部信号S_OUT与第一检测信号S_DET1的电平相同；同时，信号锁定支路12基于第一检测信号S_DET1输出与其电平相同的第二检测信号S_DET2。在信号检测通道10未运行时，信号锁定支路12基于输出信号S_OUT输出第二检测信号S_DET2至信号滤波支路13，此时，第二检测信号S_DET2的电平与输出信号S_OUT的电平相反。综上，在信号检测通道10运行时，第二检测信号S_DET2的电平由外部信号S_OUT确定，并且第二检测信号S_DET2的电平与外部信号S_OUT相同；在信号检测通道10未运行时，第二检测信号S_DET2的电平由输出信号S_OUT的电平确定，并且第二检测信号S_DET2的电平与输出信号S_OUT的电平相反。与此同时，信号滤波支路13基于第一滤波时长对第二检测信号S_DET2滤波后输出输出信号S_OUT。其中，每一次在第二检测信号S_DET2的电平与输出信号的电平相反的持续时长等于第一滤波时长时,可确定第二检测信号S_DET2的电平与输出信号S_OUT的电平相反的开始时刻即为外部信号S_EXT电平翻转的时刻。这是由于在外部信号S_EXT电平未翻转时，基于上述对信号锁定支路12的说明，可得第二检测信号S_DET2的电平与输出信号S_OUT的电平必然处于交替切换相同与相反的过程，而只有在外部信号S_EXT电平翻转之后第二检测信号S_DET2的电平与输出信号S_OUT的电平才能够保持相反。从而，在第二检测信号S_DET2的电平与输出信号S_OUT的电平相反的开始时刻经过第一滤波时间将输出信号S_OUT的电平翻转，就能够使输出信号S_OUT的电平与外部信号S_EXT延迟第一滤波时长的电平相同。不断循环上述过程，最终输出信号S_OUT可对应为由外部信号S_EXT延迟第一滤波时长而得到的信号。可见，通过输出信号S_OUT就能够确定外部信号S_EXT，换言之基于输出信号S_OUT可实现外部信号S_EXT的功能。其中，电平翻转指的是从低电平切换至高电平或者是从高电平切换至低电平。其次，由上述实施例可知，信号驱动通道20在其运行时驱动LED灯LD1点亮，则能够实现驱动LED灯LD1的功能。综上，实现了在同一端口J1复用驱动LED灯的信号与外部信号S_EXT，亦即，端口J1可同时完成以下两个功能：输出第一脉宽调制信号S_PWM1与输入外部信号S_EXT，从而有利于减少控制芯片的端口数量，既节省成本，也提高实用性。在一实施例中，信号滤波支路13具体用于：在每一次第二检测信号S_DET2的电平与输出信号S_OUT的电平相反的开始时刻进行计时；若计时的时长小于第一滤波时长，且第二检测信号S_DET2的电平切换至与输出信号S_OUT的电平相同，则将计时的时长清零；若计时的时长等于第一滤波时长，则将输出信号S_OUT的电平翻转，并将计时的时长清零。具体地，正如上述实施例的说明，在外部信号S_EXT电平未翻转时，第二检测信号S_DET2的电平与输出信号S_OUT的电平必然处于交替切换相同与相反的过程。在该种情况下，从第二检测信号S_DET2的电平与输出信号S_OUT的电平相反的开始时刻进行计时，在未计时到第一滤波时长时，第二检测信号S_DET2的电平与输出信号S_OUT的电平会重新切换至电平相同。可见，计时的时长必然小于第一滤波时长，此时将计时的时长清零，直至下一次重新开始计时。相反的，若是在第二检测信号S_DET2的电平与输出信号S_OUT的电平相反的开始时刻，外部信号S_EXT电平出现了翻转，则能够使第二检测信号S_DET2的电平与输出信号S_OUT的电平保持相反。直至计时到第一滤波时长，将输出信号S_OUT的电平翻转，并将计时的时长清零，直至下一次重新开始计时。在一些实施方式中，还进一步设置第一滤波时长大于第一脉宽调制信号S_PWM1的一个周期的时长，以防止因第一脉宽调制信号S_PWM1过大而导致无法确定开始计时的时刻。例如，假设第一脉宽调制信号S_PWM1的一个周期的时长设置过长，并在该第一脉宽调制信号S_PWM1的一个周期的高电平的时间段期间，外部信号S_EXT的电平出现了多次翻转，但在该时间段内，由于第一脉宽调制信号S_PWM1一直保持高电平，则会导致第二检测信号S_DET2的电平与输出信号S_OUT的电平一直保持相反，从而无法确定每次计时准确的开始时刻。换言之，通过设置第一滤波时长大于第一脉宽调制信号S_PWM1的一个周期的时长，能够准确地确定开始计时的时刻对应外部信号S_EXT的电平出现翻转的时刻，从而可提高第一滤波时长的精度。在一实施例中，如图2所示，信号检测支路11还用于接收基准电压VREF，并基于基准电压VREF与外部信号S_EXT的比较结果输出第一检测信号S_DET1。其中，在外部信号S_EXT的电压大于基准电压VREF时第一检测信号S_DET1为高电平，在外部信号S_EXT的电压小于或等于基准电压VREF时第一检测信号S_DET1为低电平。该实施例在保持外部信号S_EXT的高电平与低电平对应的时间段保持不变的同时，改变了外部信号S_EXT的电平对应的电压大小，有利于准确获取到外部信号S_EXT的高电平与低电平对应的时间段，从而提高整个端口复用电路100的可靠性。请参照图3，图3示出了与图2对应的一种电路结构。在一实施例中，如图3所示，信号检测支路11包括比较器U1。其中，比较器U1的第一输入端输入外部信号S_EXT，比较器U1的第二输入端输入基准电压VREF，比较器U1的第三端与信号锁定支路12连接，以输出第一检测信号S_DET1至信号锁定支路12。在该实施例中，以比较器U1的第一输入端为同相输入端，第二输入端为反相输入端为例。具体地，在信号检测通道10运行时，第一脉宽调制信号S_PWM1为高电平，第三反相器NOT3输出低电平至比较器U1的信号控制端。当然，在其他的实施例中，可以使比较器U1一直保持运行。此时，若外部信号S_EXT为高电平并大于基准电压VREF，则第一检测信号S_DET1为高电平；若外部信号S_EXT为低电平并小于或等于基准电压VREF，则第一检测信号S_DET1为低电平。从而，实现了将外部信号S_EXT转换为与其电平相同的第一检测信号S_DET1。在一实施例中，信号锁定支路12包括第一反相器NOT1与选择器U2。其中，选择器U2的第一输入端与信号检测支路11的输出端连接，选择器U2的第二输入端与第一反相器NOT1的输出端连接，选择器U2的输出端与信号滤波支路13的输入端连接，第一反相器NOT1的输入端与信号滤波支路的输出端连接。其中，在该实施例中，以选择器U2的第一输入端为“1”端，第二输入端为“0”端为例。同时，第一脉宽调制信号S_PWM1还通过第三反相器NOT3连接至选择器U2的信号控制端。当第一脉宽调制信号S_PWM1为低电平时，第三反相器NOT3输出高电平，信号检测通道10运行。选择器U2的信号控制端输入高电平，选择器U2输出第一输入端所输入的信号，即将第一检测信号S_DET1输出。此时，第二检测信号S_DET2与第一检测信号S_DET1的电平相同。当第一脉宽调制信号S_PWM1为高电平时，第三反相器NOT3输出低电平，信号检测通道10未运行。选择器U2的信号控制端输入低电平，选择器U2输出第二输入端所输入的信号，即将第一反相器NOT1输出的信号输出。此时，第二检测信号S_DET2与输出信号S_OUT的电平相反。在一实施例中，信号滤波支路13包括滤波器U3。其中，滤波器U3的第一输入端与信号锁定支路12的输出端连接，滤波器U3的第二输入端输入第一滤波时长T_DE，滤波器U3的输出端与信号锁定支路12连接，并输出输出信号S_OUT。具体地，滤波器U3用于基于第一滤波时长T_DE对第二检测信号进行滤波，并输出输出信号S_OUT。在一实施例中，信号驱动通道20包括PMOS管PM1、NMOS管NM1、第二反相器NOT2、与非门NAND1、以及或非门NOR1。其中，第二反相器NOT2的输入端及与非门NOT2的第一输入端均输入第一脉宽调制信号S_PWM1，第二反相器NOT2的输出端与或非门NOR1的第一输入端连接，或非门NOR1的第二输入端及与非门NAND1的第二输入端均输入第二脉宽调制信号S_PWM2，与非门NAND1的输出端与PMOS管PM1的栅极连接，PMOS管PM1非栅极的第一端与电源V1连接，PMOS管PM1非栅极的第二端分别与端口J1及NMOS管NM1的漏极连接，NMOS管NM1的源极接地GND，NMOS管NM1的栅极与或非门NOR1的输出端连接。具体地，当第一脉宽调制信号S_PWM1与第二脉宽调制信号S_PWM2均为高电平时，与非门NAND1输出低电平至PMOS管的栅极，以使PMOS管导通。电源V1通过PMOS管PM1为LED灯LD1供电。请参照图4，图4示例性示出了图3所示的电路结构在工作时各信号的示意图。如图4所示，横坐标为时间。纵向的信号从上往下分别为：第一脉宽调制信号S_PWM1；外部信号S_OUT；第二检测信号S_DET2；输出信号S_OUT。具体地，在t1时刻之前，假设输出信号S_OUT被强制或者被确定为低电平。在t1时刻，第一脉宽调制信号S_PWM1处于低电平，信号检测通道10运行。由于外部信号S_EXT此时发生了电平翻转，从低电平切换至高电平，则第二检测信号S_DET2也随着翻转为高电平。第二检测信号S_DET2与输出信号S_OUT电平相反，开始计时。在t2时刻，虽然第一脉宽调制信号S_PWM1切换为高电平，但由于输出信号S_OUT为低电平，则第二检测信号S_DET2保持高电平。在t3时刻，虽然第一脉宽调制信号S_PWM1切换为低电平，但由于外部信号S_EXT为高电平，则第二检测信号S_DET2保持高电平。直至t4时刻，计时达到了第一滤波时长T_DE，并将计时的时长清零。输出信号S_OUT的电平翻转。t1时刻与t4时刻之间的时长即为第一滤波时长。在t4时刻，第二检测信号S_DET2与输出信号S_OUT电平相反，重新开始计时。在t5时刻，由于第一脉宽调制信号S_PWM1切换为低电平，以使第二检测信号S_DET2切换为高电平，此时第二检测信号S_DET2与输出信号S_OUT电平相同。但计时的时长还小于第一滤波时长，即t4时刻与t5时刻之间的时长小于第一滤波时长，所以将计时的时长清零。直至t6时刻，第二检测信号S_DET2与输出信号S_OUT电平相反，重新开始计时。在t7时刻，由于第一脉宽调制信号S_PWM1切换为低电平，以使第二检测信号S_DET2切换为高电平，此时第二检测信号S_DET2与输出信号S_OUT电平相同。但计时的时长还小于第一滤波时长，即t6时刻与t7时刻之间的时长小于第一滤波时长，所以将计时的时长清零。直至t8时刻，第二检测信号S_DET2与输出信号S_OUT电平相反，重新开始计时。第一脉宽调制信号S_PWM1处于低电平，信号检测通道10运行。由于外部信号S_EXT此时发生了电平翻转，从高电平切换至低电平，则第二检测信号S_DET2也随着翻转为低电平。第二检测信号S_DET2与输出信号S_OUT电平相反，开始计时。在t9时刻，虽然第一脉宽调制信号S_PWM1切换为高电平，但由于输出信号S_OUT为高电平，则第二检测信号S_DET2保持低电平。在t10时刻，虽然第一脉宽调制信号S_PWM1切换为低电平，但由于外部信号S_EXT为低电平，则第二检测信号S_DET2保持低电平。直至t12时刻，计时达到了第一滤波时长T_DE，并将计时的时长清零。输出信号S_OUT的电平翻转。t8时刻与t12时刻之间的时长即为第一滤波时长。在t12时刻，第二检测信号S_DET2与输出信号S_OUT电平相反，重新开始计时。在t13时刻，由于第一脉宽调制信号S_PWM1切换为低电平，以使第二检测信号S_DET2切换为低电平，此时第二检测信号S_DET2与输出信号S_OUT电平相同。但计时的时长还小于第一滤波时长，即t12时刻与t13时刻之间的时长小于第一滤波时长，所以将计时的时长清零。直至t14时刻，第二检测信号S_DET2与输出信号S_OUT电平相反，重新开始计时。在t15时刻，由于第一脉宽调制信号S_PWM1切换为低电平，以使第二检测信号S_DET2切换为低电平，此时第二检测信号S_DET2与输出信号S_OUT电平相同。但计时的时长还小于第一滤波时长，即t14时刻与t15时刻之间的时长小于第一滤波时长，所以将计时的时长清零。以此类推，直至t18时刻。在t18时刻，第二检测信号S_DET2与输出信号S_OUT电平相反，重新开始计时。第一脉宽调制信号S_PWM1处于低电平，信号检测通道10运行。由于外部信号S_EXT此时发生了电平翻转，从低电平切换至高电平，则第二检测信号S_DET2也随着翻转为高电平。第二检测信号S_DET2与输出信号S_OUT电平相反，开始计时。基于类似于上述的分析可知，直至t19时刻，计时达到了第一滤波时长T_DE，并将计时的时长清零。输出信号S_OUT的电平翻转。t18时刻与t19时刻之间的时长即为第一滤波时长T_ED。不断重复上述过程。最终的输出信号S_OUT即为外部信号S_EXT延迟第一滤波时长T_ED之后所得到的信号。例如，时长T11为外部信号S_EXT中一个高电平的时长，时长T12为输出信号S_OUT中一个高电平的时长，而T11+T_ED=T12+T_ED。可见，时长T11等于时长T12。即时长T12对应的高电平可为时长T11对应的高电平延迟第一滤波时长T_ED得到。又如，同样地方式可确定时长T14对应的高电平可为时长T13对应的高电平延迟第一滤波时长T_ED得到。由此可见，通过输出信号S_OUT就能够确定外部信号S_EXT，换言之基于输出信号S_OUT可实现外部信号S_EXT的功能。从而，通过上述过程，实现了在同一端口J1复用驱动LED灯的信号与外部信号S_EXT，有利于减少控制芯片的端口数量，既节省成本，也提高实用性。需要说明的是，在上述的实施例中，均以端口J1只连接一个LED灯LD1为例。而在其他的实施例中，端口J1也可以连接两个或两个以上的LED灯，并且各LED灯可以是阳极连接至端口J1，也可以是阴极连接至端口J1。例如，如图5所示，图5在图3所示的基础上增加了一个信号驱动通道20。并且端口J1同时连接LED灯LD1与LED灯LD2。在该实施例中，端口J1复用第一脉宽调制信号S_PWM1与外部信号S_OUT的同时，第一脉宽调制信号S_PWM1还用于同时驱动两个LED灯。与此同时，该实施例还增加了端口J2。端口J2为与端口J1功能不同的任意一种端口，例如端口J2只能够实现驱动LED灯的功能。该实施例的具体实现过程可参照针对图3的说明，这里不再赘述。又如，如图6所示，图6在图3所示的基础上增加了一个端口复用电路100。并采用两个端口J1配合驱动两个LED灯，且两个端口J1分别还复用不同的外部信号S_EXT1与外部信号S_EXT2。其中，上面的端口J1复用第一脉宽调制信号S_PWM1与外部信号S_EXT1；下面的端口J1复用第四脉宽调制信号S_PWM4与外部信号S_EXT2。同时第二脉宽调制信号S_PWM2与第三脉宽调制信号S_PWM3结合控制两个LED灯LD1和LD2的点亮。在该实施例的具体实现过程可参照针对图3的说明，这里不再赘述。请参照图7，图7为本申请实施例提供的一种控制芯片的结构示意图。如图7所示，该控制芯片1000包括N个端口个端口J2）以及M个本申请任一实施例中的端口复用电路100。其中，N与M均为≥1的整数，且N≥M。具体地，N个端口中的M个端口J1与M个端口复用电路100连接，并且M个端口J1中每个端口与一个端口复用电路100连接。M个端口J1可实现第一脉宽调制信号S_PWM1与外部信号S_EXT的复用。请参照图8，图8为本申请实施例提供的一种控制系统的结构示意图。如图8所示，该控制系统1包括M个电阻R1、K个LED灯以及本申请任一实施例中的控制芯片1000，其中，K为≥1的整数，且K≥M。具体地，一个外部信号S_EXT通过一个电阻R1输入至控制芯片1000的M个端口中的一个端口。并且，M个端口中的一个端口还与至少一个LED灯连接。例如，其中一个端口J1与多个LED灯连接，而另一个端口J1则只与第一个LED灯连接。图9示例性示出了控制芯片1000包括两个端口J1和一个端口J2的一种方式。其中，第一个端口J1用于复用驱动两个LED灯LD1与LD3的脉宽调制信号与由按键K1输出的外部信号S_EXT。第二个端口J1用于复用驱动两个LED灯LD4与LD5的脉宽调制信号与外部信号S_EXT。具体实现端口复用的过程可按照针对图3的说明，这里不再赘述。最后应说明的是：以上实施例仅用以说明本申请的技术方案，而非对其限制；在本申请的思路下，以上实施例或者不同实施例中的技术特征之间也可以进行组合，步骤可以以任意顺序实现，并存在如上所述的本申请的不同方面的许多其它变化，为了简明，它们没有在细节中提供；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的范围。
