标题title
过滤器及其控制方法和装置、电气设备
摘要abst
本发明公开了一种过滤器及其控制方法和装置、电气设备，所述方法包括：控制过滤器按照工作模式运行，以使过滤器采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤；响应于过滤信息调整指令，控制过滤器切换至调整模式，并基于过滤信息调整指令对过滤信息进行调整。本发明的控制方法，能够提高对待过滤数据的整体查找速度，能够提供更多空闲时间，以进行过滤器模式的切换并对过滤信息进行调整。
权利要求书clms
1.一种过滤器的控制方法，其特征在于，所述方法包括：控制所述过滤器按照工作模式运行，以使所述过滤器采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤；响应于过滤信息调整指令，控制所述过滤器切换至调整模式，并基于所述过滤信息调整指令对所述过滤信息进行调整。2.根据权利要求1所述的方法，其特征在于，所述过滤器包括第一寄存器和第二寄存器，所述控制所述过滤器切换至调整模式，包括：读取所述第一寄存器以得到所述过滤器当前所处模式和对应的模式状态；在所述当前所处模式为所述工作模式且所述模式状态为空闲状态时，向所述第二寄存器写入调整模式标识信息，以使所述过滤器切换至所述调整模式。3.根据权利要求1所述的方法，其特征在于，所述过滤器包括过滤信息保存区，所述过滤信息保存区被划分为多个条目，所述条目用于存储所述过滤信息，所述基于所述过滤信息调整指令对所述过滤信息进行调整，包括：在所述过滤信息调整指令为新增指令时，查找处于空闲状态的条目；在查找到处于空闲状态的条目时，从所述过滤信息调整指令中获取待新增过滤信息，并将所述待新增过滤信息添加至处于空闲状态的条目中。4.根据权利要求3所述的方法，其特征在于，所述过滤信息对应有过滤信息地址，用于指示所述过滤信息在所述过滤器中的位置，所述基于所述过滤信息调整指令对所述过滤信息进行调整，还包括：在所述过滤信息调整指令为删除指令时，从所述过滤信息调整指令中获取待删除过滤信息的过滤信息地址；采用并行分组查找方式，从所述多个条目中查找出与所述待删除过滤信息的过滤信息地址对应的条目，并将该条目中的过滤信息删除；其中，删除过滤信息的条目处于空闲状态。5.根据权利要求3所述的方法，其特征在于，所述过滤信息对应有过滤信息地址，用于指示所述过滤信息在所述过滤器中的位置，所述基于所述过滤信息调整指令对所述过滤信息进行调整，还包括：在所述过滤信息调整指令为更新指令时，从所述过滤信息调整指令中获取待更新过滤信息和所述待更新过滤信息的过滤信息地址；采用并行分组查找方式，从所述多个条目中查找出与所述待更新过滤信息的过滤信息地址对应的条目，并将该条目中的过滤信息更新为所述待更新过滤信息。6.根据权利要求3所述的方法，其特征在于，所述过滤信息对应有过滤信息地址，用于指示所述过滤信息在所述过滤器中的位置，所述基于所述过滤信息调整指令对所述过滤信息进行调整，还包括：在所述过滤信息调整指令为启动或关闭指令时，从所述过滤信息调整指令中获取待启动或关闭过滤信息的过滤信息地址；采用并行分组查找方式，从所述多个条目中查找出与所述待启动或关闭过滤信息的过滤信息地址对应的条目，并将该条目的状态调整为启动或关闭以使该条目中的过滤信息处于启动或关闭状态。7.根据权利要求3所述的方法，其特征在于，所述过滤器还包括用于存储每个所述条目的状态的地址空间，所述查找处于空闲状态的条目，包括：读取所述地址空间以查找出处于空闲状态的条目。8.根据权利要求1所述的方法，其特征在于，所述过滤信息对应有过滤信息地址，用于指示所述过滤信息在所述过滤器中的位置，所述过滤信息包括路由回溯标识，用于指示所述过滤信息在PDU路由表中的位置，所述方法还包括：在所述过滤器中存在错误的过滤信息时，基于所述错误的过滤信息中的路由回溯标识，从所述PDU路由表中查找出正确的过滤信息；基于所述错误的过滤信息的过滤信息地址，将所述错误的过滤信息更新为所述正确的过滤信息。9.根据权利要求8所述的方法，其特征在于，所述方法还包括：在所述PDU路由表中存在错误的过滤信息时，基于所述错误的过滤信息的过滤信息地址从所述过滤器中查找出正确的过滤信息；基于所述错误的过滤信息中的路由回溯标识，将所述错误的过滤信息更新为所述正确的过滤信息。10.根据权利要求8所述的方法，其特征在于，所述过滤信息还包括路由回溯地址，用于指示所述PDU路由表的位置，所述方法还包括：基于所述错误的过滤信息中的路由回溯地址确定相应的PDU路由表。11.根据权利要求1-10任一项所述的方法，其特征在于，每个所述过滤器对应有多个CAN收发器，以对所述多个CAN收发器接收到的CAN数据进行过滤。12.一种过滤器的控制装置，其特征在于，所述装置包括：控制模块，用于控制所述过滤器按照工作模式运行，以使所述过滤器采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤；所述控制模块，还用于响应于过滤信息调整指令，控制所述过滤器切换至调整模式，并基于所述过滤信息调整指令对所述过滤信息进行调整。13.一种过滤器，其特征在于，包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的程序，所述处理器执行所述程序时，实现根据权利要求1-11任一项所述的过滤器的控制方法。14.一种电气设备，其特征在于，包括根据权利要求12所述的过滤器的控制装置，或者根据权利要求13所述的过滤器。
说明书desc
技术领域本发明涉及电子信息技术领域，尤其涉及一种过滤器的控制方法、一种过滤器的控制装置、一种过滤器和一种电气设备。背景技术在汽车网络架构中，CAN总线作为车内骨干网络，承担繁重的节点ECU信息交互工作。目前市场上以及车企研发中的所有车型，CAN网络也是占主要地位。CAN网络把车上所有电子零部件连接在了一起，它是零部件研发中重要适配功能，整车的各种上层功能，也基于CAN网络的通讯得以在单个及多个零部件之间实现。CAN总线经过多年的发展，可靠性非常高，根据帧标识符的优先级决定通信次序，因此CAN总线无法被其他网络替代。面对目前整车架构的集成化，网关节点，作为中央节点，承担大量信息路由以及信息过滤工作。传统的CAN的过滤模块，其应用为过滤帧信息。该帧的帧标识符与过滤器中保存的标识符一致，才会接收该帧信息。因此为了避免丢失更新过滤信息，而影响过滤进程，引起丢失传送本节点的信息，过滤模块要求在CAN进入停止状态下，才可以对过滤信息进行调整。然而此种方式使得网类型的芯片，想要实现调整过滤信息变得比较困难，并且对过滤信息的查找也比较慢。发明内容本发明旨在至少在一定程度上解决相关技术中的技术问题之一。为此，本发明的第一个目的在于提出一种过滤器的控制方法，通过控制过滤器按照工作模式运行，以使过滤器采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤，响应于过滤信息调整指令，控制过滤器切换至调整模式，并基于过滤信息调整指令对过滤信息进行调整，从而能够提高对待过滤数据的整体查找速度，能够提供更多空闲时间，以进行过滤器模式的切换并对过滤信息进行调整。本发明的第二个目的在于提出一种过滤器的控制装置。本发明的第三个目的在于提出一种过滤器。本发明的第四个目的在于提出一种电气设备。为达到上述目的，本发明第一方面实施例提出了一种过滤器的控制方法，所述方法包括：控制所述过滤器按照工作模式运行，以使所述过滤器采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤；响应于过滤信息调整指令，控制所述过滤器切换至调整模式，并基于所述过滤信息调整指令对所述过滤信息进行调整。根据本发明实施例的过滤器的控制方法，控制过滤器按照工作模式运行，以使过滤器采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤；响应于过滤信息调整指令，控制过滤器切换至调整模式，并基于过滤信息调整指令对过滤信息进行调整。由此，该方法能够提高对待过滤数据的整体查找速度，能够提供更多空闲时间，以进行过滤器模式的切换并对过滤信息进行调整。另外，根据本发明上述实施例的过滤器的控制方法还可以具有如下的附加技术特征：根据本发明的一个实施例，所述过滤器包括第一寄存器和第二寄存器，所述控制所述过滤器切换至调整模式，包括：读取所述第一寄存器以得到所述过滤器当前所处模式和对应的模式状态；在所述当前所处模式为所述工作模式且所述模式状态为空闲状态时，向所述第二寄存器写入调整模式标识信息，以使所述过滤器切换至所述调整模式。根据本发明的一个实施例，所述过滤器包括过滤信息保存区，所述过滤信息保存区被划分为多个条目，所述条目用于存储所述过滤信息，所述基于所述过滤信息调整指令对所述过滤信息进行调整，包括：在所述过滤信息调整指令为新增指令时，查找处于空闲状态的条目；在查找到处于空闲状态的条目时，从所述过滤信息调整指令中获取待新增过滤信息，并将所述待新增过滤信息添加至处于空闲状态的条目中。根据本发明的一个实施例，所述过滤信息对应有过滤信息地址，用于指示所述过滤信息在所述过滤器中的位置，所述基于所述过滤信息调整指令对所述过滤信息进行调整，还包括：在所述过滤信息调整指令为删除指令时，从所述过滤信息调整指令中获取待删除过滤信息的过滤信息地址；采用并行分组查找方式，从所述多个条目中查找出与所述待删除过滤信息的过滤信息地址对应的条目，并将该条目中的过滤信息删除；其中，删除过滤信息的条目处于空闲状态。根据本发明的一个实施例，所述过滤信息对应有过滤信息地址，用于指示所述过滤信息在所述过滤器中的位置，所述基于所述过滤信息调整指令对所述过滤信息进行调整，还包括：在所述过滤信息调整指令为更新指令时，从所述过滤信息调整指令中获取待更新过滤信息和所述待更新过滤信息的过滤信息地址；采用并行分组查找方式，从所述多个条目中查找出与所述待更新过滤信息的过滤信息地址对应的条目，并将该条目中的过滤信息更新为所述待更新过滤信息。根据本发明的一个实施例，所述过滤信息对应有过滤信息地址，用于指示所述过滤信息在所述过滤器中的位置，所述基于所述过滤信息调整指令对所述过滤信息进行调整，还包括：在所述过滤信息调整指令为启动或关闭指令时，从所述过滤信息调整指令中获取待启动或关闭过滤信息的过滤信息地址；采用并行分组查找方式，从所述多个条目中查找出与所述待启动或关闭过滤信息的过滤信息地址对应的条目，并将该条目的状态调整为启动或关闭以使该条目中的过滤信息处于启动或关闭状态。根据本发明的一个实施例，所述过滤器还包括用于存储每个所述条目的状态的地址空间，所述查找处于空闲状态的条目，包括：读取所述地址空间以查找出处于空闲状态的条目。根据本发明的一个实施例，所述过滤信息对应有过滤信息地址，用于指示所述过滤信息在所述过滤器中的位置，所述过滤信息包括路由回溯标识，用于指示所述过滤信息在PDU路由表中的位置，所述方法还包括：在所述过滤器中存在错误的过滤信息时，基于所述错误的过滤信息中的路由回溯标识，从所述PDU路由表中查找出正确的过滤信息；基于所述错误的过滤信息的过滤信息地址，将所述错误的过滤信息更新为所述正确的过滤信息。根据本发明的一个实施例，所述方法还包括：在所述PDU路由表中存在错误的过滤信息时，基于所述错误的过滤信息的过滤信息地址从所述过滤器中查找出正确的过滤信息；基于所述错误的过滤信息中的路由回溯标识，将所述错误的过滤信息更新为所述正确的过滤信息。根据本发明的一个实施例，所述过滤信息还包括路由回溯地址，用于指示所述PDU路由表的位置，所述方法还包括：基于所述错误的过滤信息中的路由回溯地址确定相应的PDU路由表。根据本发明的一个实施例，每个所述过滤器对应有多个CAN收发器，以对所述多个CAN收发器接收到的CAN数据进行过滤。为达到上述目的，本发明第二方面实施例提出了一种过滤器的控制装置，所述装置包括：控制模块，用于控制所述过滤器按照工作模式运行，以使所述过滤器采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤；所述控制模块，还用于响应于过滤信息调整指令，控制所述过滤器切换至调整模式，并基于所述过滤信息调整指令对所述过滤信息进行调整。根据本发明实施例的过滤器的控制装置，控制模块用于控制过滤器按照工作模式运行，以使过滤器采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤，控制模块还用于响应于过滤信息调整指令，控制过滤器切换至调整模式，并基于过滤信息调整指令对过滤信息进行调整。由此，该装置能够提高对待过滤数据的整体查找速度，能够提供更多空闲时间，以进行过滤器模式的切换并对过滤信息进行调整。为达到上述目的，本发明第三方面实施例提出的一种过滤器，包括存储器、处理器及存储在存储器上并可在处理器上运行的程序，所述处理器执行所述程序时，实现上述的过滤器的控制方法。根据本发明实施例的过滤器，通过执行上述的过滤器的控制方法，能够提高对待过滤数据的整体查找速度，能够提供更多空闲时间，以进行过滤器模式的切换并对过滤信息进行调整。为达到上述目的，本发明第四方面实施例提出的一种电气设备，包括：上述的过滤器的控制装置，或者上述的过滤器。根据本发明实施例的电气设备，通过包括上述的过滤器的控制装置，或者上述的过滤器，能够提高对待过滤数据的整体查找速度，能够提供更多空闲时间，以进行过滤器模式的切换并对过滤信息进行调整。本发明附加的方面和优点将在下面的描述中部分给出，部分将从下面的描述中变得明显，或通过本发明的实践了解到。附图说明图1为根据本发明实施例的过滤器的控制方法的流程图；图2为根据本发明实施例的过滤信息保存区的示意图；图3为根据本发明实施例的过滤器与CPU系统的交互示意图；图4为根据本发明实施例的过滤器的控制装置的方框示意图；图5为根据本发明实施例的过滤器的方框示意图；图6为根据本发明实施例的电气设备的方框示意图；图7为根据本发明另一个实施例的电气设备的方框示意图。具体实施方式下面详细描述本发明的实施例，所述实施例的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施例是示例性的，旨在用于解释本发明，而不能理解为对本发明的限制。下面参考附图描述本发明实施例提出的过滤器的控制方法、过滤器的控制装置、过滤器和电气设备。图1为根据本发明实施例的过滤器的控制方法的流程图。如图1所示，本发明实施例的过滤器的控制方法可包括以下步骤：S1，控制过滤器按照工作模式运行，以使过滤器采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤。S2，响应于过滤信息调整指令，控制过滤器切换至调整模式，并基于过滤信息调整指令对过滤信息进行调整。具体而言，过滤器对接收到的信息、待过滤数据进行过滤的目的主要是为了从大量的数据中筛选出特定的、符合特定条件的信息，以满足用户或系统的需求，可以帮助提高信息处理的效率，如通过过滤掉不需要的、不相关的信息后可以更专注地处理符合条件的数据，减少资源的浪费。另外，过滤器还可用于数据清理的过程中，帮助识别和处理错误、冗余或不一致的数据，提高数据质量等。可控制过滤器按照工作模式运行，从而可以使过滤器查找过滤信息，以对接收到的待过滤数据进行过滤。在查找过滤信息时，可采用并行分组查找的方式进行查找，即并行分组查找为一种在大规模数据集上进行高效搜索的技术，可以通过将数据分成多个组，并在每个组上并行进行查找操作来提高性能，也就是说通过在多个组上同时执行查找，可以减少整体的搜索时间，提高搜索效率，降低响应时间。得益于并行分组查找，在过滤器处于工作模式运行中，真正运作的时间比较短，空闲时间很长，具有充足时间用于对过滤信息进行调整，而不需要根据帧时序来确定合适的时间进行过滤信息的调整。由此，在本发明的实施例中，过滤器还可具备调整模式，可响应于过滤信息调整指令，控制过滤器由工作模式切换至调整模式，在调整模式下，可根据过滤信息调整指令对过滤信息进行调整。例如，可根据用户或者系统的需求，过滤信息调整指令可以为对过滤信息的增加、对过滤信息的删除、对过滤信息的更新等。需要说明的是，工作模式和调整模式互斥，即过滤器同时仅可处于一种模式下进行工作，默认以工作模式优先。由此，能够有效提高整体查找速度，提供更多空闲时间，以便有充足的时间进行模式切换和过滤信息调整。根据本发明的一个实施例，过滤器包括第一寄存器和第二寄存器，控制过滤器切换至调整模式，包括：读取第一寄存器以得到过滤器当前所处模式和对应的模式状态；在当前所处模式为工作模式且模式状态为空闲状态时，向第二寄存器写入调整模式标识信息，以使过滤器切换至调整模式。具体而言，过滤器可包括两组寄存器，即第一寄存器和第二寄存器，其中，第一寄存器可为状态寄存器，可标识过滤器当前所处的模式，如状态寄存器的特定位可能直接表示当前模式，例如，Bit0表示工作模式，Bit1表示调整模式。信标符通常是指信号量的一种常见实现，信号量通常有两种类型：二进制信号量和计数信号量，在这两种类型的信号量中，可以用第二寄存器来表示或存储其当前的值。通过对第一寄存器进行读取可以获取过滤器当前所处模式，例如，过滤器当前处于工作模式或者调整模式，并且可获取对应的模式状态，例如，可以获取工作模式或者调整模式当前处于空闲状态或者处于运行状态。在过滤器处于工作模式且处于运行状态时，可采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤。在当前所处模式为工作模式且模式状态为空闲状态时，可向第二寄存器写入调整模式标识信息，例如，以二进制信号量为例，其值可以为0或1，可用于表示是否进入调整模式，例如，配置第二寄存器为非0值，可以使过滤器切换至调整模式。在过滤器处于调整模式且处于运行状态时，可根据过滤信息调整指令对过滤信息进行调整。根据本发明的一个实施例，过滤器包括过滤信息保存区，过滤信息保存区被划分为多个条目，条目用于存储过滤信息，基于过滤信息调整指令对过滤信息进行调整，包括：在过滤信息调整指令为新增指令时，查找处于空闲状态的条目；在查找到处于空闲状态的条目时，从过滤信息调整指令中获取待新增过滤信息，并将待新增过滤信息添加至处于空闲状态的条目中。具体而言，参考图2所示，过滤器具有过滤信息保存区，过滤信息保存区被划分为多个条目，每个条目可以存放一组过滤信息，例如，条目0对应过滤信息0，条目1对应过滤信息1，条目2对应过滤信息2等。在根据过滤信息调整指令对过滤信息进行调整时，对过滤信息调整指令进行判断，在过滤信息调整指令为新增指令时，首先确定条目的状态，并查找处于空闲状态的条目，其中，条目可包括启动状态、关闭状态和空闲状态。在查找到处于空闲状态的条目时，可从过滤信息调整指令中获取待新增过滤信息，并将待新增过滤信息添加至处于空闲状态的条目中，由此完成了对过滤器中过滤信息的新增。根据本发明的一个实施例，过滤信息对应有过滤信息地址，用于指示过滤信息在过滤器中的位置，基于过滤信息调整指令对过滤信息进行调整，还包括：在过滤信息调整指令为删除指令时，从过滤信息调整指令中获取待删除过滤信息的过滤信息地址；采用并行分组查找方式，从多个条目中查找出与待删除过滤信息的过滤信息地址对应的条目，并将该条目中的过滤信息删除；其中，删除过滤信息的条目处于空闲状态。具体而言，过滤信息对应有过滤信息地址，根据过滤信息地址可确定过滤信息在过滤器中的具体位置和内容，以便对过滤信息进行准确的查找。在根据过滤信息调整指令对过滤信息进行调整，对过滤信息调整指令进行判断，当过滤信息调整指令为删除指令时，例如，过滤信息长期未使用或者过滤信息违反合规性标准等，可从过滤信息调整指令中获取待删除过滤信息的过滤信息地址，在获取到过滤信息地址后，为了减少搜索时间，提高搜索效率，可采用并行分组查找的方式，从多个条目中查找出与待删除过滤信息的过滤信息地址对应的条目，在获取到相应的条目时，将该条目中的过滤信息删除，从而能够准确的将过滤信息删除，且减少删除过滤信息时所花费的时间。另外，删除后的过滤信息条目会转为空闲状态，之后可允许新增过滤信息。由此完成了对过滤器中的部分过滤信息的删除。在本发明的另一个实施例中，还可以不通过过滤信息地址的方式确定过滤信息在过滤器中的具体位置，可以仅通过过滤信息的方式，即当过滤信息的内容与过滤器中过滤信息的内容对应上即可直接将过滤器中的过滤信息进行删除。根据本发明的一个实施例，过滤信息对应有过滤信息地址，用于指示过滤信息在过滤器中的位置，基于过滤信息调整指令对过滤信息进行调整，还包括：在过滤信息调整指令为更新指令时，从过滤信息调整指令中获取待更新过滤信息和待更新过滤信息的过滤信息地址；采用并行分组查找方式，从多个条目中查找出与待更新过滤信息的过滤信息地址对应的条目，并将该条目中的过滤信息更新为待更新过滤信息。具体而言，过滤信息对应有过滤信息地址，根据过滤信息地址可确定过滤信息在过滤器中的具体位置和内容，以便对过滤信息进行准确的查找。并且在查找时，为了节省时间，可不对空闲状态的条目进行查找，仅查找处于启动状态和关闭状态的条目。在根据过滤信息调整指令对过滤信息进行调整，对过滤信息调整指令进行判断，当过滤信息调整指令为更新指令时，例如，过滤信息需要调整或者改进时，可从过滤信息调整指令中获取待更新过滤信息和待更新过滤信息的过滤信息地址，在获取到待更新过滤信息和过滤信息地址后，为了减少搜索时间，提高搜索效率，可采用并行分组查找的方式，从多个条目中查找出与待更新过滤信息的过滤信息地址对应的条目，在获取到相应的条目时，将该条目中的过滤信息更新为待更新过滤信息。需要说明的是，对过滤信息的更新仅支持对当前已经写入过的过滤信息进行更新。由此，由此完成了对过滤器中的部分过滤信息的更新。根据本发明的一个实施例，过滤信息对应有过滤信息地址，用于指示过滤信息在过滤器中的位置，基于过滤信息调整指令对过滤信息进行调整，还包括：在过滤信息调整指令为启动或关闭指令时，从过滤信息调整指令中获取待启动或关闭过滤信息的过滤信息地址；采用并行分组查找方式，从多个条目中查找出与待启动或关闭过滤信息的过滤信息地址对应的条目，并将该条目的状态调整为启动或关闭以使该条目中的过滤信息处于启动或关闭状态。具体而言，过滤信息对应有过滤信息地址，根据过滤信息地址可确定过滤信息在过滤器中的具体位置和内容，以便对过滤信息进行准确的查找。并且在查找时，为了节省时间，可不对空闲状态的条目进行查找，仅查找处于启动状态和关闭状态的条目。在根据过滤信息调整指令对过滤信息进行调整，对过滤信息调整指令进行判断，当过滤信息调整指令为启动指令时，可从过滤信息调整指令中获取待启动过滤信息的过滤信息地址，在获取到待启动过滤信息的过滤信息地址后，为了减少搜索时间，提高搜索效率，可采用并行分组查找的方式，从多个条目中查找出与待启动过滤信息的过滤信息地址对应的条目，在获取到相应的条目时，将该条目的状态调整为启动，以使该条目中的过滤信息处于启动状态，从而能够使得过滤器查找过处于启动状态滤信息以对接收到的待过滤数据进行过滤。对过滤信息调整指令进行判断，当过滤信息调整指令为关闭指令时，可从过滤信息调整指令中获取待关闭过滤信息的过滤信息地址，在获取到待关闭过滤信息的过滤信息地址后，为了减少搜索时间，提高搜索效率，可采用并行分组查找的方式，从多个条目中查找出与待关闭过滤信息的过滤信息地址对应的条目，在获取到相应的条目时，将该条目的状态调整为关闭，以使该条目中的过滤信息处于关闭状态，从而能够使得过滤器不查找过处于关闭状态的过滤信息只对接收到的待过滤数据进行过滤。需要说明的是，在对每个条目的启动和关闭进行切换后，原过滤信息依旧保留，不发生变化。在本发明的另一个实施例中，还可以不通过过滤信息地址的方式确定过滤信息在过滤器中的具体位置，可以仅通过过滤信息的方式，即当过滤信息的内容与过滤器中过滤信息的内容对应上即可直接将该条目的状态调整为启动或关闭以使该条目中的过滤信息处于启动或关闭状态。根据本发明的一个实施例，过滤器还包括用于存储每个条目的状态的地址空间，查找处于空闲状态的条目，包括：读取地址空间以查找出处于空闲状态的条目。具体而言，过滤器还可包括用于存储每个条目的状态的地址空间，例如，可使用1个bit对应一个条目，可以以该标志为1时表示该条目被使用，该标志为0时，表示该条目未被使用。由此，在查找处于空闲状态的条目时，可读取地址空间，根据该标志查找处于空闲状态的条目。根据本发明的一个实施例，过滤信息对应有过滤信息地址，用于指示过滤信息在过滤器中的位置，过滤信息包括路由回溯标识，用于指示过滤信息在PDU路由表中的位置，过滤器的控制方法还包括：在过滤器中存在错误的过滤信息时，基于错误的过滤信息中的路由回溯标识，从PDU路由表中查找出正确的过滤信息；基于错误的过滤信息的过滤信息地址，将错误的过滤信息更新为正确的过滤信息。具体而言，过滤信息对应有过滤信息地址，例如，在增加新的过滤信息后，过滤器会反馈10bit的过滤信息地址，对应过滤信息保存区的物理地址，即可用于指示过滤信息在过滤器中的位置。过滤信息可包括路由回溯标识，路由回溯标识对应CPU系统内保存的PDU路由表的标识码，当一个计算机系统需要与其他计算机进行通信时，CPU系统会生成网络数据包，这些数据包在网络中的传输路径会受到PDU路由表的影响。也就是说，PDU路由表与过滤器内的过滤信息保存区存在映射关系，路由回溯标识可指示过滤信息在PDU路由表中的位置，通过PDU路由表与过滤信息保存区存在映射的关系，可以使CPU系统与过滤器两边形成冗余映射关系，相互保留可回溯副本，提高整体信息的正确性和回溯性。SRAM具有失效性，即在SRAM存储器中，会因高能粒子辐射引起的软错误累积效应导致数据错误，通常可采用ECC对数据段进行保护。在过滤器中存在错误的过滤信息时，例如，如图3所示，当过滤信息3发生不可修复的ECC错误后，被ECC检测单元发现错误后，可通过中断等方式反馈给CPU系统，CPU系统可借助过滤信息地址，确认发生错误的过滤信息内容，并且可根据错误的过滤信息中的路由回溯标识，从PDU路由表中查找出正确的过滤信息，并根据该错误的过滤信息的过滤信息地址，将错误的过滤信息更新为正确的过滤信息。根据本发明的一个实施例，过滤器的控制方法还包括：在PDU路由表中存在错误的过滤信息时，基于错误的过滤信息的过滤信息地址从过滤器中查找出正确的过滤信息；基于错误的过滤信息中的路由回溯标识，将错误的过滤信息更新为正确的过滤信息。具体而言，ECC可以实现错误的识别以及是CPU出错还是过滤器出错。当CPU系统内PDU路由表内存发生时效性问题，也就是说当PDU路由表中存在错误的过滤信息时，可根据错误的过滤信息的过滤信息地址从过滤器中查找出正确的过滤信息，然后可根据错误的过滤信息中的路由回溯标识，将错误的过滤信息更新为正确的过滤信息，由此，能够提升整体信息的正确性。根据本发明的一个实施例，过滤信息还包括路由回溯地址，用于指示PDU路由表的位置，过滤器的控制方法还包括：基于错误的过滤信息中的路由回溯地址确定相应的PDU路由表。具体而言，过滤信息还可包括路由回溯地址，路由回溯地址可用于指示PDU路由表的位置，CPU系统可通过路由回溯地址了解路由配置的具体存放位置。在过滤器中存在错误的过滤信息时，根据错误的过滤信息中的路由回溯标识，从PDU路由表中查找出正确的过滤信息时，可先根据错误的过滤信息中的路由回溯标识确定出相应的PDU路由表，然后再从PDU路由表中查找正确的过滤信息。另外，过滤器只负责提供路由回溯地址，供CPU系统提取路由配置，其中，路由配置可分为多类，如CAN与CAN节点间转发、CAN与以太网转发、CAN加密服务、CAN与LIN转发、CAN与SPI转发、CAN与系统内存转发等，由此，能够使CPU系统根据路由回溯地址进行信息内容的快速追踪。根据本发明的一个实施例，每个过滤器对应有多个CAN收发器，以对多个CAN收发器接收到的CAN数据进行过滤。具体而言，每个过滤器可对应有多个CAN收发器，CAN收发器可确保数据能够可靠、稳定地在CAN总线上传输，过滤器采用并行查找，查找速度快，并且可以同时支持多个CAN收发器共用一个过滤器匹配数据，而且不会发生数据堵塞情况。例如，每个过滤器最高支持16个CAN收发器进行共用，并可分配共计1024条过滤信息条目，具体的可以根据需要为过滤器分配不同的过滤信息条目。由此，可以为信息量大的CAN数据分配大量过滤信息条目，为信息量少的CAN数据分配较少过滤信息条目，更合理地充分利用资源，并且能够保证在不损失性能的情况下，节省大量面积，节省芯片成本。综上所述，根据本发明实施例的过滤器的控制方法，控制过滤器按照工作模式运行，以使过滤器采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤；响应于过滤信息调整指令，控制过滤器切换至调整模式，并基于过滤信息调整指令对过滤信息进行调整。由此，该方法能够提高对待过滤数据的整体查找速度，能够提供更多空闲时间，以进行过滤器模式的切换并对过滤信息进行调整。对应上述实施例，本发明还提出了一种过滤器的控制装置。如图4所示，本发明实施例的过滤器的控制装置100包括：控制模块110。其中，控制模块110用于控制过滤器按照工作模式运行，以使过滤器采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤。控制模块110还用于响应于过滤信息调整指令，控制过滤器切换至调整模式，并基于过滤信息调整指令对过滤信息进行调整。根据本发明的一个实施例，过滤器包括第一寄存器和第二寄存器，控制模块110控制过滤器切换至调整模式，具体用于：读取第一寄存器以得到过滤器当前所处模式和对应的模式状态；在当前所处模式为工作模式且模式状态为空闲状态时，向第二寄存器写入调整模式标识信息，以使过滤器切换至调整模式。根据本发明的一个实施例，过滤器包括过滤信息保存区，过滤信息保存区被划分为多个条目，条目用于存储过滤信息，控制模块110基于过滤信息调整指令对过滤信息进行调整，具体用于：在过滤信息调整指令为新增指令时，查找处于空闲状态的条目；在查找到处于空闲状态的条目时，从过滤信息调整指令中获取待新增过滤信息，并将待新增过滤信息添加至处于空闲状态的条目中。根据本发明的一个实施例，过滤信息对应有过滤信息地址，用于指示过滤信息在过滤器中的位置，控制模块110基于过滤信息调整指令对过滤信息进行调整，还用于：在过滤信息调整指令为删除指令时，从过滤信息调整指令中获取待删除过滤信息的过滤信息地址；采用并行分组查找方式，从多个条目中查找出与待删除过滤信息的过滤信息地址对应的条目，并将该条目中的过滤信息删除；其中，删除过滤信息的条目处于空闲状态。根据本发明的一个实施例，过滤信息对应有过滤信息地址，用于指示过滤信息在过滤器中的位置，控制模块110基于过滤信息调整指令对过滤信息进行调整，还用于：在过滤信息调整指令为更新指令时，从过滤信息调整指令中获取待更新过滤信息和待更新过滤信息的过滤信息地址；采用并行分组查找方式，从多个条目中查找出与待更新过滤信息的过滤信息地址对应的条目，并将该条目中的过滤信息更新为待更新过滤信息。根据本发明的一个实施例，过滤信息对应有过滤信息地址，用于指示过滤信息在过滤器中的位置，控制模块110基于过滤信息调整指令对过滤信息进行调整，还用于：在过滤信息调整指令为启动或关闭指令时，从过滤信息调整指令中获取待启动或关闭过滤信息的过滤信息地址；采用并行分组查找方式，从多个条目中查找出与待启动或关闭过滤信息的过滤信息地址对应的条目，并将该条目的状态调整为启动或关闭以使该条目中的过滤信息处于启动或关闭状态。根据本发明的一个实施例，过滤器还包括用于存储每个条目的状态的地址空间，控制模块110查找处于空闲状态的条目，具体用于：读取地址空间以查找出处于空闲状态的条目。根据本发明的一个实施例，过滤信息对应有过滤信息地址，用于指示过滤信息在过滤器中的位置，过滤信息包括路由回溯标识，用于指示过滤信息在PDU路由表中的位置，控制模块110还用于：在过滤器中存在错误的过滤信息时，基于错误的过滤信息中的路由回溯标识，从PDU路由表中查找出正确的过滤信息；基于错误的过滤信息的过滤信息地址，将错误的过滤信息更新为正确的过滤信息。根据本发明的一个实施例，控制模块110还用于：在PDU路由表中存在错误的过滤信息时，基于错误的过滤信息的过滤信息地址从过滤器中查找出正确的过滤信息；基于错误的过滤信息中的路由回溯标识，将错误的过滤信息更新为正确的过滤信息。根据本发明的一个实施例，过滤信息还包括路由回溯地址，用于指示PDU路由表的位置，控制模块110还用于：基于错误的过滤信息中的路由回溯地址确定相应的PDU路由表。根据本发明的一个实施例，每个过滤器对应有多个CAN收发器，以对多个CAN收发器接收到的CAN数据进行过滤。需要说明的是，本发明实施例的过滤器的控制装置中未披露的细节，请参照本发明实施例的过滤器的控制方法中所披露的细节，具体这里不再赘述。根据本发明实施例的过滤器的控制装置，控制模块用于控制过滤器按照工作模式运行，以使过滤器采用并行分组查找方式查找过滤信息以对接收到的待过滤数据进行过滤，控制模块还用于响应于过滤信息调整指令，控制过滤器切换至调整模式，并基于过滤信息调整指令对过滤信息进行调整。由此，该装置能够提高对待过滤数据的整体查找速度，能够提供更多空闲时间，以进行过滤器模式的切换并对过滤信息进行调整。对应上述实施例，本发明还提出了一种过滤器。如图5所示，本发明实施例的过滤器200可包括：存储器210、处理器220及存储在存储器210上并可在处理器220上运行的程序，处理器220执行程序时，实现上述的过滤器的控制方法。根据本发明实施例的过滤器，通过执行上述的过滤器的控制方法，能够提高对待过滤数据的整体查找速度，能够提供更多空闲时间，以进行过滤器模式的切换并对过滤信息进行调整。对应上述实施例，本发明还提出了一种电气设备。如图6所示，本发明实施例的电气设备300可包括过滤器的控制装置100，或者，如图7所示，本发明实施例的电气设备300还可包括过滤器200。根据本发明实施例的电气设备，通过包括上述的过滤器的控制装置或者上述的过滤器，能够提高对待过滤数据的整体查找速度，能够提供更多空闲时间，以进行过滤器模式的切换并对过滤信息进行调整。需要说明的是，在流程图中表示或在此以其他方式描述的逻辑和/或步骤，例如，可以被认为是用于实现逻辑功能的可执行指令的定序列表，可以具体实现在任何计算机可读介质中，以供指令执行系统、装置或设备使用，或结合这些指令执行系统、装置或设备而使用。就本说明书而言，"计算机可读介质"可以是任何可以包含、存储、通信、传播或传输程序以供指令执行系统、装置或设备或结合这些指令执行系统、装置或设备而使用的装置。计算机可读介质的更具体的示例包括以下：具有一个或多个布线的电连接部，便携式计算机盘盒，随机存取存储器，只读存储器，可擦除可编辑只读存储器，光纤装置，以及便携式光盘只读存储器。另外，计算机可读介质甚至可以是可在其上打印所述程序的纸或其他合适的介质，因为可以例如通过对纸或其他介质进行光学扫描，接着进行编辑、解译或必要时以其他合适方式进行处理来以电子方式获得所述程序，然后将其存储在计算机存储器中。应当理解，本发明的各部分可以用硬件、软件、固件或它们的组合来实现。在上述实施方式中，多个步骤或方法可以用存储在存储器中且由合适的指令执行系统执行的软件或固件来实现。例如，如果用硬件来实现，和在另一实施方式中一样，可用本领域公知的下列技术中的任一项或他们的组合来实现：具有用于对数据信号实现逻辑功能的逻辑门电路的离散逻辑电路，具有合适的组合逻辑门电路的专用集成电路，可编程门阵列，现场可编程门阵列等。在本说明书的描述中，参考术语“一个实施例”、“一些实施例”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括至少一个该特征。在本发明的描述中，“多个”的含义是至少两个，例如两个，三个等，除非另有明确具体的限定。在本发明中，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”、“固定”等术语应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或成一体；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通或两个元件的相互作用关系，除非另有明确的限定。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本发明中的具体含义。尽管上面已经示出和描述了本发明的实施例，可以理解的是，上述实施例是示例性的，不能理解为对本发明的限制，本领域的普通技术人员在本发明的范围内可以对上述实施例进行变化、修改、替换和变型。
