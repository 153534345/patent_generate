标题title
基于区块链的视频监控数据存储方法
摘要abst
本申请涉及视频数据处理领域，特别涉及基于区块链的视频监控数据存储方法，包括：根据视频监控数据，获取目标帧对应的目标图像，基于目标图像的子图像的灰度值、以及在RGB空间中的聚类数量与每个像素点对应的LBP特征值，计算目标图像对应的细节保留度，再将细节保留度输入预设的压缩参数计算模型，计算目标图像对应的压缩参数，以将视频监控数据进行压缩，确认视频监控数据对应的压缩数据，最后上传所述视频监控数据对应的压缩数据至数据服务器，以将视频监控数据进行存储。通过视频监控数据中每帧图像的压缩参数对每帧图像进行压缩，得到视频监控数据的压缩数据上传至数据服务器进行存储，提高存储质量，降低工作成本。
权利要求书clms
1.一种基于区块链的视频监控数据存储方法，应用于视频监控数据存储领域，其特征在于，所述方法包括：根据视频监控数据，获取目标帧对应的目标图像，其中，目标图像包括预设数量的子图像；基于所述子图像的灰度值、以及在RGB空间中的聚类数量与每个像素点对应的LBP特征值，计算目标图像对应的细节保留度；将所述细节保留度输入预设的压缩参数计算模型，计算目标图像对应的压缩参数，以将所述视频监控数据进行压缩，确认视频监控数据对应的压缩数据；上传所述视频监控数据对应的压缩数据至数据服务器，以将所述视频监控数据进行存储。2.根据权利要求1所述的基于区块链的视频监控数据存储方法，其特征在于，所述基于所述子图像的灰度值、以及在RGB空间中的聚类数量与每个像素点对应的LBP特征值，计算目标图像对应的细节保留度，具体包括：根据所述子图像中对应的灰度值差异程度与混乱度，计算子图像对应的图像丰富度；将所述子图像在RGB空间中的聚类数量与每个像素点的LBP特征值对应的频数作为计算参数，确认子图像对应的图像细节显著度；根据所述子图像与预设数量的比较子图像对应的像素点的灰度值，计算子图像对应的图像变化度，其中，所述预设数量的比较子图像是指在子图像前预设数量帧中且与所述子图像位置相同的图像区域；基于所述子图像对应的图像丰富度、图像细节显著度与图像变化度，计算目标图像对应的细节保留度。3.根据权利要求2所述的基于区块链的视频监控数据存储方法，其特征在于，所述根据子图像对应的灰度值差异程度与混乱度，计算子图像对应的图像丰富度，具体包括：排序子图像中像素点对应的灰度值，以将排序靠前预设区间的灰度值均值与排序靠后预设区间的灰度值均值做差计算，确认所述子图像对应的灰度值差异程度；根据子图像中像素点的灰度值，计算子图像对应的混乱度；将所述子图像对应的灰度值差异程度与混乱度输入预设的丰富度计算公式，计算子图像对应的图像丰富度。4.根据权利要求3所述的基于区块链的视频监控数据存储方法，其特征在于，所述将所述子图像对应的灰度值差异程度与混乱度输入预设的丰富度计算公式，计算子图像对应的图像丰富度，具体包括：其中，/＞为子图像对应的图像丰富度，/＞为排序靠前预设区间的灰度值均值，/＞为排序靠后预设区间的灰度值均值，/＞为子图像对应的灰度值差异程度，/＞为子图像对应的混乱度。5.根据权利要求4所述的基于区块链的视频监控数据存储方法，其特征在于，将所述子图像在RGB空间中的聚类数量与每个像素点的LBP特征值对应的频数作为计算参数，确认子图像对应的图像细节显著度，具体包括：将所述子图像在RGB空间中通过预设聚类算法进行聚类，确认聚类数量，其中，所述聚类数量包括簇的个数以及未被聚类到簇的噪声点个数；统计所述子图像中每个像素点的LBP特征值，确认最大频数以及频数差值，其中，所述频数差值是指最大频数与子图像中大于像素点的平均频数的频数之间的差值；将所述簇的个数、未被聚类到簇的噪声点个数、最大频数以及频数差值，输入预设的细节显著度计算公式，确认子图像对应的图像细节显著度。6.根据权利要求5所述的基于区块链的视频监控数据存储方法，其特征在于，所述将所述簇的个数、未被聚类到簇的噪声点个数、最大频数以及频数差值，输入预设的细节显著度计算公式，确认子图像对应的图像细节显著度，具体包括：其中，/＞为子图像对应的图像细节显著度，/＞为簇的个数，/＞为子图像的簇内像素点的个数平均值，/＞为未被聚类到簇的噪声点个数与子图像所有像素点个数的比值，/＞为最大频数，/＞为最大频数的差值与第/＞个频数的差值，/＞为子图像中大于像素点的平均频数的频数数量。7.根据权利要求6所述的基于区块链的视频监控数据存储方法，其特征在于，所述根据所述子图像与预设数量的对比子图像对应的像素点的灰度值，计算子图像对应的图像变化度，其中，所述预设数量的对比子图像是指在子图像前预设数量帧中且与所述子图像位置相同的图像区域，具体包括：比较所述子图像与预设数量的对比子图像对应的像素点的灰度值，确认目标变化像素点，其中，所述目标变化像素点是指在所述子图像中与预设数量中任一对比子图像对应的像素点的灰度值差值大于预设阈值的像素点；基于所述目标变化像素点，统计目标变化像素点与比较像素点之间的灰度值差值的标准差与均值，其中，所述比较像素点是指目标变化像素点在预设数量的对比子图像中对应的像素点；根据所述目标变化像素点，计算在预设邻域窗口内目标变化像素点与其他像素点的灰度值差值的均值；基于所述目标变化像素点与比较像素点之间的灰度值差值的标准差与均值，以及在预设邻域窗口内目标变化像素点与其他像素点的灰度值差值的均值，计算子图像对应的图像变化度。8.根据权利要求7所述的基于区块链的视频监控数据存储方法，其特征在于，所述基于所述目标变化像素点与比较像素点之间的灰度值差值的标准差与均值，以及在预设邻域窗口内目标变化像素点与其他像素点的灰度值差值的均值，计算子图像对应的图像变化度，具体包括：其中，/＞为子图像对应的图像变化度，/＞为第/＞个目标变化像素点与比较像素点之间的灰度值差值的标准差，/＞为第/＞个目标变化像素点与比较像素点之间的灰度值差值的均值，/＞为在预设邻域窗口内第/＞个目标变化像素点与其他像素点的灰度值差值的均值，/＞为目标变化像素点的个数。9.根据权利要求8所述的基于区块链的视频监控数据存储方法，其特征在于，所述基于所述子图像对应的图像丰富度、图像细节显著度与图像变化度，计算目标图像对应的细节保留度，具体包括：其中，/＞为目标图像对应的细节保留度，/＞为目标图像中第/＞个子图像的所有像素点个数，/＞为目标图像的所有像素点个数，/＞为第/＞个子图像对应的图像丰富度，/＞为第/＞个子图像对应的图像细节显著度，/＞为第/＞个子图像对应的图像变化度，/＞为目标图像中子图像的个数，/＞为归一化函数。10.根据权利要求9所述的基于区块链的视频监控数据存储方法，其特征在于，所述将所述细节保留度输入预设的压缩参数计算模型，计算目标图像对应的压缩参数，具体包括：其中，/＞为目标图像对应的压缩参数，/＞为目标图像对应的细节保留度，/＞为第一压缩系数，/＞为第二压缩系数，/＞为取整函数。
说明书desc
技术领域本申请涉及视频数据处理领域，特别涉及基于区块链的视频监控数据存储方法。背景技术视频监控数据，是指针对视频监控系统产生的视频数据，而视频监控系统一般具有监控点多、视频数据流大、存储时间长、24小时连续不间断作业等特点，所以视频监控数据的储存容量需求巨大。由于视频监控数据的储存容量需求巨大，所以一般使用分布式存储架构，分布式存储架构由三个部分组成：客户端、元数据服务器和数据服务器。客户端负责发送读写请求，缓存文件元数据和文件数据。元数据服务器负责管理元数据和处理客户端的请求，是整个系统的核心组件。数据服务器负责存放文件数据，保证数据的可用性和完整性。该架构的好处是性能和容量能够同时拓展，系统规模具有很强的伸缩性。而将所述视频监控数据上传至元数据服务器和数据服务器之前，需要进行对视频监控数据进行压缩，以便于数据的传输、存储与管理。传统的视频监控数据的压缩方法，是将视频监控数据中每帧的原始图像分成一些自相似块，通过自相似块之间的相似度来将这些自相似块在不同的尺度上组合成原始图像，从而实现图像的压缩。自相似块的大小对应的压缩参数设定，关乎着视频监控数据的压缩质量，当块的大小设定过小时，则块内包含的信息量过少，当块的大小设定过大时，则容易在压缩后忽略块内细节，传统的自相似块的大小设定方式，均是采用人工设定自相似块的大小，从到导致视频监控数据的压缩质量不稳定，进而使得视频监控数据的存储质量较低，且存储的工作成本较高。发明内容鉴于以上内容，有必要提供一种基于区块链的视频监控数据存储方法，相对于传统的存储方法，提高视频监控数据存储质量，降低视频监控数据存储的工作成本。本申请第一方面提供一种基于区块链的视频监控数据存储方法，应用于视频监控数据存储领域，所述方法包括：根据视频监控数据，获取目标帧对应的目标图像，其中，目标图像包括预设数量的子图像；基于所述子图像的灰度值、以及在RGB空间中的聚类数量与每个像素点对应的LBP特征值，计算目标图像对应的细节保留度；将所述细节保留度输入预设的压缩参数计算模型，计算目标图像对应的压缩参数，以将所述视频监控数据进行压缩，确认视频监控数据对应的压缩数据；上传所述视频监控数据对应的压缩数据至数据服务器，以将所述视频监控数据进行存储。在其中一种实施例中，所述基于所述子图像的灰度值、以及在RGB空间中的聚类数量与每个像素点对应的LBP特征值，计算目标图像对应的细节保留度，具体包括：根据所述子图像中对应的灰度值差异程度与混乱度，计算子图像对应的图像丰富度；将所述子图像在RGB空间中的聚类数量与每个像素点的LBP特征值对应的频数作为计算参数，确认子图像对应的图像细节显著度；根据所述子图像与比较子图像对应的像素点的灰度值，计算子图像对应的图像变化度，其中，所述比较子图像是指在子图像相邻帧中且与所述子图像位置相同的图像区域；基于所述子图像对应的图像丰富度、图像细节显著度与图像变化度，计算目标图像对应的细节保留度。在其中一种实施例中，所述根据子图像对应的灰度值差异程度与混乱度，计算子图像对应的图像丰富度，具体包括：排序子图像中像素点对应的灰度值，以将排序靠前预设区间的灰度值均值与排序靠后预设区间的灰度值均值做差计算，确认所述子图像对应的灰度值差异程度；根据子图像中像素点的灰度值，计算子图像对应的混乱度；将所述子图像对应的灰度值差异程度与混乱度输入预设的丰富度计算公式，计算子图像对应的图像丰富度。在其中一种实施例中，所述将所述子图像对应的灰度值差异程度与混乱度输入预设的丰富度计算公式，计算子图像对应的图像丰富度，具体包括：其中，/＞为子图像对应的图像丰富度，/＞为排序靠前预设区间的灰度值均值，/＞为排序靠后预设区间的灰度值均值，/＞为子图像对应的灰度值差异程度，为子图像对应的混乱度。在其中一种实施例中，所述聚类数量包括簇的个数以及未被聚类到簇的噪声点个数，对应的，将所述子图像在RGB空间中的聚类数量与每个像素点的LBP特征值对应的频数作为计算参数，确认子图像对应的图像细节显著度，具体包括：将所述子图像在RGB空间中通过预设聚类算法进行聚类，确认聚类数量，其中，所述聚类数量包括簇的个数以及未被聚类到簇的噪声点个数；统计所述子图像中每个像素点的LBP特征值，确认最大频数以及频数差值，其中，所述频数差值是指最大频数与子图像中大于像素点的平均频数的频数之间的差值；将所述簇的个数、未被聚类到簇的噪声点个数、最大频数以及频数差值，输入预设的细节显著度计算公式，确认子图像对应的图像细节显著度。在其中一种实施例中，所述将所述簇的个数、未被聚类到簇的噪声点个数、最大频数以及频数差值，输入预设的细节显著度计算公式，确认子图像对应的图像细节显著度，具体包括：其中，/＞为子图像对应的图像细节显著度，/＞为簇的个数，为子图像的簇内像素点的个数平均值，/＞为未被聚类到簇的噪声点个数与子图像所有像素点个数的比值，/＞为最大频数，/＞为最大频数的差值与第/＞个频数的差值，/＞为子图像中大于像素点的平均频数的频数数量。在其中一种实施例中，所述根据所述子图像与预设数量的对比子图像对应的像素点的灰度值，计算子图像对应的图像变化度，其中，所述预设数量的对比子图像是指在子图像前预设数量帧中且与所述子图像位置相同的图像区域，具体包括：比较所述子图像与预设数量的对比子图像对应的像素点的灰度值，确认目标变化像素点，其中，所述目标变化像素点是指在所述子图像中与预设数量中任一对比子图像对应的像素点的灰度值差值大于预设阈值的像素点；基于所述目标变化像素点，统计目标变化像素点与比较像素点之间的灰度值差值的标准差与均值，其中，所述比较像素点是指目标变化像素点在预设数量的对比子图像中对应的像素点；根据所述目标变化像素点，计算在预设邻域窗口内目标变化像素点与其他像素点的灰度值差值的均值；基于所述目标变化像素点与比较像素点之间的灰度值差值的标准差与均值，以及在预设邻域窗口内目标变化像素点与其他像素点的灰度值差值的均值，计算子图像对应的图像变化度。在其中一种实施例中，所述基于所述目标变化像素点与比较像素点之间的灰度值差值的标准差与均值，以及在预设邻域窗口内目标变化像素点与其他像素点的灰度值差值的均值，计算子图像对应的图像变化度，具体包括：其中，/＞为子图像对应的图像变化度，/＞为第/＞个目标变化像素点与比较像素点之间的灰度值差值的标准差，/＞为第/＞个目标变化像素点与比较像素点之间的灰度值差值的均值，/＞为在预设邻域窗口内第/＞个目标变化像素点与其他像素点的灰度值差值的均值，/＞为目标变化像素点的个数。在其中一种实施例中，所述基于所述子图像对应的图像丰富度、图像细节显著度与图像变化度，计算目标图像对应的细节保留度，具体包括：其中，/＞为目标图像对应的细节保留度，/＞为目标图像中第/＞个子图像的所有像素点个数，/＞为目标图像的所有像素点个数，/＞为第/＞个子图像对应的图像丰富度，/＞为第/＞个子图像对应的图像细节显著度，/＞为第/＞个子图像对应的图像变化度，/＞为目标图像中子图像的个数，/＞为归一化函数。在其中一种实施例中，所述将所述细节保留度输入预设的压缩参数计算模型，计算目标图像对应的压缩参数，以将所述视频监控数据进行压缩，确认视频监控数据对应的压缩数据，具体包括：其中，/＞为目标图像对应的压缩参数，/＞为目标图像对应的细节保留度，/＞为第一压缩系数，/＞为第二压缩系数，/＞为取整函数。本申请实施例先通过根据视频监控数据，获取目标帧对应的目标图像，其中，目标图像包括预设数量的子图像，然后基于所述子图像的灰度值、以及在RGB空间中的聚类数量与每个像素点对应的LBP特征值，计算目标图像对应的细节保留度，再将所述细节保留度输入预设的压缩参数计算模型，计算目标图像对应的压缩参数，以将所述视频监控数据进行压缩，确认视频监控数据对应的压缩数据，最后上传所述视频监控数据对应的压缩数据至数据服务器，以将所述视频监控数据进行存储。通过视频监控数据中每帧图像的子图像计算每帧图像对应的压缩参数，以根据每帧图像对应的压缩参数对每帧图像进行压缩，得到视频监控数据对应的压缩数据并上传至数据服务器进行存储，提高视频监控数据存储质量，降低视频监控数据存储的工作成本。附图说明图1是本申请实施例的基于区块链的视频监控数据存储方法的流程示意图。图2是本申请实施例的基于区块链的视频监控数据存储方法的第一子流程示意图。图3是本申请实施例的基于区块链的视频监控数据存储方法的第二子流程示意图。图4是本申请实施例的基于区块链的视频监控数据存储方法的第三子流程示意图。图5是本申请实施例的基于区块链的视频监控数据存储方法的第四子流程示意图。具体实施方式在本申请实施例的描述中，“示例性”、“或者”、“例如”等词用于表示作例子、例证或说明。本申请实施例中被描述为“示例性”或者“例如”的任何实施例或设计方案不应被解释为比其它实施例或设计方案更优选或更具优势。确切而言，使用“示例性”、“或者”、“例如”等词旨在以具体方式呈现相关概念。除非另有定义，本文所使用的所有的技术和科学术语与属于本申请中的技术领域的技术人员通常理解的含义相同。本申请的说明书中所使用的术语只是为了描述具体的实施例的目的，不是旨在于限制本申请。应理解，本申请中除非另有说明，“/”表示或的意思。例如，A/B可以表示A或B。本申请中的“和/或”仅仅是一种描述关联对象的关联关系，表示可以存在三种关系。例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B三种情况。“至少一个”是指一个或者多个。“多个”是指两个或多于两个。例如，a、b或c中的至少一个，可以表示：a，b，c，a和b，a和c，b和c，a、b和c七种情况。另外需要说明的是，本申请的说明书和权利要求书及附图中的术语“第一”、“第二”是用于部别类似的对象，而不是用于描述特定的顺序或先后次序。本申请实施例中公开的方法或流程图所示出的方法，包括用于实现方法的一个或多个步骤，在不脱离权利要求的范围的情况下，多个步骤的执行顺序可以彼此互换，其中某些步骤也可以被删除。本申请实施例首先提出一种基于区块链的视频监控数据存储方法，应用于视频监控数据存储领域，参考附图1，所述方法包括以下步骤：S101、根据视频监控数据，获取目标帧对应的目标图像，其中，目标图像包括预设数量的子图像。其中，所述视频监控数据是指通过视频监控系统实时产生的待存储的视频数据。针对视频监控数据的存储，通常采用的是云存储，即将视频监控数据上传并存储于远端的数据服务器中，而视频监控数据由于数据量大，则需要对视频监控数据进行压缩后再上传并存储，压缩能够便于视频监控数据的传输与管理。需要解析的是，视频监控数据的压缩是针对每帧对应的目标图像进行划分成多个子图像，然后对子图像进行有序的排列从而实现对目标图像的压缩。本实施例中，视频监控数据的压缩方式，是采用分形压缩算法，分形压缩算法是一种基于图像自相似性的压缩技术。它利用图像中小部分与整个图像相似的特点，将这些小部分不断进行自我缩小或扩大，最终得到一个与原始图像相似度极高的图像，这个过程中，可以通过记录每一个小块的位置和大小信息，保存下来作为压缩后的数据。具体来说，分形压缩算法是基于图像自相似性的压缩技术，将视频监控数据对应的每一帧原始图像分成一些自相似块，通过它们之间的相似度来将这些自相似块在不同的尺度上组合成原始图像，实现图像的压缩，则可在保持图像的质量的同时达到较高的压缩比。由于分形压缩算法可达到较高的压缩比同时还能保持图像的质量，因此在某些情况下会优于传统的压缩算法。需要说明的是，所述目标帧对应的目标图像是指视频监控数据中任意一帧对应的图像。目标图像包括预设数量的子图像，是通过对所述目标图像进行预设算法的分割，进而得到预设数量的子图像。所述预设算法可为超像素分割算法，超像素分割算法指的是将数字图像细分为多个图像子区域的过程。图像分割的目的是简化或改变图像的表示形式，使得图像更容易理解和分析。图像分割通常用于定位图像中的物体和边界。更精确的，图像分割是对图像中的每个像素加标签的一个过程，这一过程使得具有相同标签的像素具有某种共同视觉特性。图像分割的结果是图像上子区域的集合，或是从图像中提取的轮廓线的集合。一个子区域中的每个像素在某种特性的度量下或是由计算得出的特性都是相似的，例如颜色、亮度、纹理。邻接区域在某种特性的度量下有很大的不同。S102、基于所述子图像的灰度值、以及在RGB空间中的聚类数量与每个像素点对应的LBP特征值，计算目标图像对应的细节保留度。需要说明的是，在对视频监控数据的每帧图像处理之前，通常对视频监控数据的每帧图像进行预处理以提升每帧图像的质量。所述对图像的预处理可以是采用中值滤波法进行滤波，中值滤波法是一种非线性平滑技术，它将每一像素点的灰度值设置为该点某邻域窗口内的所有像素点灰度值的中值。中值滤波是基于排序统计理论的一种能有效抑制噪声的非线性信号处理技术，中值滤波的基本原理是把数字图像或数字序列中一点的值用该点的一个邻域中各点值的中值代替，让周围的像素值接近真实值，从而消除孤立的噪声点。方法是用某种结构的二维滑动模板，将板内像素按照像素值的大小进行排序，生成单调上升的为二维数据序列。其中，对所述子图像进行二值化处理，得到灰度图像，再基于灰度图像获取所述子图像的灰度值。所述子图像在RGB空间中的聚类数量，是指以子图像在R、G、B三个通道为X、Y、Z轴建立空间直角坐标系，通过子图像每个像素点在R、G、B三个通道的像素值则可在空间直角坐标系找到对应的空间坐标点，再通过预设聚类算法对空间坐标点进行聚类，以获取子图像在RGB空间中的聚类数量。需要解析的是，所述聚类数量可以包括空间坐标点聚类后的类型数量，也可以是包括未被聚类的空间坐标点的数量。每个像素点对应的LBP特征值，是指每个像素点在3*3的邻域窗口内，以窗口中心像素为阈值，将相邻的8个像素的灰度值与其进行比较，若周围像素值大于中心像素值，则该像素点的位置被标记为1，否则为0。这样，3*3邻域窗口内的8个点经比较可产生8位二进制数，即得到该邻域窗口中心像素点的LBP值。目标图像对应的细节保留度，是指根据目标图像在灰度图像空间以及RGB空间中的图像参数得到的用于计算目标图像压缩参数大小的计算参数。S103、将所述细节保留度输入预设的压缩参数计算模型，计算目标图像对应的压缩参数，以将所述视频监控数据进行压缩，确认视频监控数据对应的压缩数据。其中，在获取到所述细节保留度之后，将所述细节保留度输入至预设的压缩参数计算模型以计算当前目标图像对应的压缩参数，需要解析的是，每一帧对应的目标图像均对应一个压缩参数，也即每帧目标图像均有符合当前目标图像的压缩方式，则对应的压缩质量会得到较大提升。具体的，所述预设的压缩参数计算模型，是用于根据细节保留度计算图像压缩时子图像的大小参数。所述目标图像对应的压缩参数，是指当前目标图像在压缩时子图像的大小参数，视频监控数据对应的压缩数据，是指根据视频监控数据经每一帧图像压缩且处理后得到的数据包。需要说明的是，在获取到所述视频监控数据每一帧图像的压缩参数之后，可使用分形压缩算法对所述视频监控数据进行视频压缩，具体可为分别对视频监控数据的每帧图像进行压缩，经过获取码本、最大匹配项和分形码等步骤，得到若干个压缩后的监控图像。将若干个压缩后的监控图像按照顺序排列即得到压缩后的视频监控数据。S104、上传所述视频监控数据对应的压缩数据至数据服务器，以将所述视频监控数据进行存储。其中，在获取到所述视频监控数据对应的压缩数据，将所述压缩数据传输至对应数据服务器进行存储。所述数据服务器即可以是区块链中的节点服务器，也可以是分布式存储架构中的数据服务器，具体根据实体需求进行调整，本案不作进一步限定。需要说明的是，将压缩后的视频监控数据对应的压缩数据上传至分布式存储架构中的数据服务器，由于布式存储架构中核心参与者之间通过点对点网络使用共识算法在节点之间进行数据复制，所以可以实现压缩后的视频监控数据的保存和共享，同时，也可提升数据存储的安全性和稳定性。本申请实施例先通过根据视频监控数据，获取目标帧对应的目标图像，其中，目标图像包括预设数量的子图像，然后基于所述子图像的灰度值、以及在RGB空间中的聚类数量与每个像素点对应的LBP特征值，计算目标图像对应的细节保留度，再将所述细节保留度输入预设的压缩参数计算模型，计算目标图像对应的压缩参数，以将所述视频监控数据进行压缩，确认视频监控数据对应的压缩数据，最后上传所述视频监控数据对应的压缩数据至数据服务器，以将所述视频监控数据进行存储。通过视频监控数据中每帧图像的子图像计算每帧图像对应的压缩参数，以根据每帧图像对应的压缩参数对每帧图像进行压缩，得到视频监控数据对应的压缩数据并上传至数据服务器进行存储，提高视频监控数据存储质量，降低视频监控数据存储的工作成本。在本申请的一种实施例中，并参阅图2，所述步骤S102：所述基于所述子图像的灰度值、以及在RGB空间中的聚类数量与每个像素点对应的LBP特征值，计算目标图像对应的细节保留度，具体包括：S201、根据所述子图像中对应的灰度值差异程度与混乱度，计算子图像对应的图像丰富度。其中，子图像中对应的灰度值差异程度是指的子图像中高灰度值区域与低灰度值区域的差值，当所述高灰度值区域与低灰度值的差值越大，所述子图像中对应的灰度值差异程度就越大，对应子图像对应的图像丰富度就越大。当所述高灰度值区域与低灰度值的差值越小，所述子图像中对应的灰度值差异程度就越小，对应子图像对应的图像丰富度就越小。所述子图像中对应的混乱度，是指子图像中像素点灰度值分布的混乱程度，当子图像中灰度值分布越为复杂混乱时，出现不同情况的种类越多，子图像中对应的混乱度就会越大。所述子图像对应的图像丰富度，是指根据子图像的像素点对应的灰度值差异度与分布的混乱程度进一步得到的图像信息复杂程度。换句话说，当所述子图像对应的图像丰富度越高，子图像包含的图像信息越复杂，在进行压缩处理时需要更细致，以提升压缩效果。S202、将所述子图像在RGB空间中的聚类数量与每个像素点的LBP特征值对应的频数作为计算参数，确认子图像对应的图像细节显著度。其中，子图像对应的图像细节显著度是指子图像的根据子图像的聚类数量与对应的LBP特征值进一步得到的图像复杂程度，用于后续计算压缩参数。S203、根据所述子图像与比较子图像对应的像素点的灰度值，计算子图像对应的图像变化度，其中，所述比较子图像是指在子图像前预设数量帧中且与所述子图像位置相同的图像区域。其中，通过获取子图像与前预设数量帧中的比较子图像相同位置对应的位置的变化程度，计算子图像对应的图像变化度。换句话说，当监控视频数据的相邻帧图像存在较大变动时，在压缩的时候需要更细致，则以图像变化度作为其中之一的计算参数，以作为后续压缩参数的计算参数。S204、基于所述子图像对应的图像丰富度、图像细节显著度与图像变化度，计算目标图像对应的细节保留度。其中，在获取到所述子图像对应的图像丰富度、图像细节显著度与图像变化度之后，将三者作为计算参数输入预设的计算规则，进行目标图像对应的细节保留度的计算。在本实施例中，通过子图像在灰度图像中的灰度值以及RGB空间中的聚类数量与LBP特征值值，计算得到子图像对应的图像丰富度、图像细节显著度与图像变化度，以进一步将图像丰富度、图像细节显著度与图像变化度作为计算参数，计算子图像对应目标图像对应的细节保留度，以供后续计算目标图像对应的压缩参数。在本申请的一种实施例中，参照附图3，步骤S201、所述根据子图像对应的灰度值差异程度与混乱度，计算子图像对应的图像丰富度，具体包括：S301、排序子图像中像素点对应的灰度值，以将排序靠前预设区间的灰度值均值与排序靠后预设区间的灰度值均值做差计算，确认所述子图像对应的灰度值差异程度。其中，在获取到所述子图像中像素点对应的灰度值之后，对所述灰度值进行排序，统计根据提前设定靠前预设区间与靠后预设区间的灰度值均值，再将两者做差计算，得到所述子图像对应的灰度值差异程度。需要说明的是，所述靠前预设区间与靠后预设区间可以是数值相同的区间范围，也可为数值不同的区间范围，比如，靠前预设区间为排名前百分之五的灰度值，靠后预设区间为排名后百分之五的灰度值，也可以是，靠前预设区间为排名前百分之五的灰度值，靠后预设区间为排名后百分之八的灰度值，具体区间设置根据实际场景可自行设定。S302、根据子图像中像素点的灰度值，计算子图像对应的混乱度。其中，在获取到所述像素点灰度值之后，根据像素点在所述子图像中灰度值的分布情况，进而计算子图像对应的信息熵，以信息熵来表征所述子图像中像素点灰度值的混乱度。具体信息熵的计算方法参照现有技术记载，本案不作进一步限定。S303、将所述子图像对应的灰度值差异程度与混乱度输入预设的丰富度计算公式，计算子图像对应的图像丰富度。其中，在获取到所述子图像对应的灰度值差异程度与混乱度，将两者作为计算参数，输入至预设的丰富度计算公式，计算得到最终的子图像对应的图像丰富度。具体的，所述将所述子图像对应的灰度值差异程度与混乱度输入预设的丰富度计算公式，计算子图像对应的图像丰富度，具体包括：其中，/＞为子图像对应的图像丰富度，/＞为排序靠前预设区间的灰度值均值，/＞为排序靠后预设区间的灰度值均值，/＞为子图像对应的灰度值差异程度，为子图像对应的混乱度。当所述子图像对应的灰度值差异程度越大时，或者子图像对应的混乱度/＞越大时，子图像对应的图像丰富度/＞越大，需要对该子图像对应的目标图像进行更为细致地分块，提升压缩效果。在本申请的一种实施例中，参照附图4，步骤S202、所述聚类数量包括簇的个数以及未被聚类到簇的噪声点个数，对应的，将所述子图像在RGB空间中的聚类数量与每个像素点的LBP特征值对应的频数作为计算参数，确认子图像对应的图像细节显著度，具体包括：S401、将所述子图像在RGB空间中通过预设聚类算法进行聚类，确认聚类数量，其中，所述聚类数量包括簇的个数以及未被聚类到簇的噪声点个数；S402、统计所述子图像中每个像素点的LBP特征值，确认最大频数以及频数差值，其中，所述频数差值是指最大频数与子图像中大于像素点的平均频数的频数之间的差值；S403、将所述簇的个数、未被聚类到簇的噪声点个数、最大频数以及频数差值，输入预设的细节显著度计算公式，确认子图像对应的图像细节显著度。其中，基于子图像在R、G、B三个通道为X、Y、Z轴建立空间直角坐标系，通过子图像每个像素点在R、G、B三个通道的像素值则可在空间直角坐标系找到对应的空间坐标点，再通过预设聚类算法进行聚类，得到聚类数量。具体的，本案的预设聚类算法可以是DBSCAN算法，且以minPts=10，ɛ=6进行聚类，对应的，所述聚类数量包括簇的个数以及未被聚类到簇的噪声点个数。需要说明的是，当获取的簇的个数越多、均值越小时，则该子图像对应的目标图像的表面细节信息越多。当未聚类到某个簇中的像素点的个数越小时，则子图像内出现的异常像素值分布越少，该子图像对应的目标图像中的细节越为明晰。进一步的，获取子图像中每个像素点的LBP特征值，并统计每个LBP特征值出现的频率，进一步确认最大频数与平均频数，需要说明的是，可通过LBP特征值的频率分布直方图进行频数的统计与表征，具体方式本案不作进一步限定。将大于平均频数的LBP特征值对应的频数，分别与最大频数做差计算，并去差值的平均值，得到所述频数差值。需要说明的是，当子图像内提供的图像细节信息越多时，则区域内出现的不同细节纹理越为密集且这些纹理信息差异较大，即各个像素点对应的LBP特征值差异较大，则子图像内不同LBP特征值对应的LBP特征值应越为分散，则对应的最大频数以及频数差值均较小。具体的，在获取到所述簇的个数、未被聚类到簇的噪声点个数、最大频数以及频数差值后，作为四个计算参数输入预设的细节显著度计算公式，确认子图像对应的图像细节显著度，具体可为：其中，/＞为子图像对应的图像细节显著度，/＞为簇的个数，为子图像的簇内像素点的个数平均值，/＞为未被聚类到簇的噪声点个数与子图像所有像素点个数的比值，/＞为最大频数，/＞为最大频数的差值与第/＞个频数的差值，/＞为子图像中大于像素点的平均频数的频数数量。需要说明的是，当所述簇的个数与子图像的簇内像素点的个数平均值占比较大时，则证明子图像对应的图像细节信息越多，当所述最大频数以及频数差值越小时，证明子图像出现的不同细节纹理越为密集且这些纹理信息差异较大，则证明需要对该子图像对应的目标图像进行更为细致地分块。而当子图像对应的图像细节显著度所述簇的个数与子图像的簇内像素点的个数平均值占比/＞较大，且最大频数以及频数差值越小时，子图像对应的图像细节显著度越大，则当子图像对应的图像细节显著度越大时，需要对该子图像对应的目标图像进行更为细致地分块，提升压缩效果。在本申请的一种实施例中，参照附图5，步骤S203、所述根据所述子图像与预设数量的对比子图像对应的像素点的灰度值，计算子图像对应的图像变化度，其中，所述预设数量的对比子图像是指在子图像前预设数量帧中且与所述子图像位置相同的图像区域，具体包括：S501、比较所述子图像与预设数量的对比子图像对应的像素点的灰度值，确认目标变化像素点，其中，所述目标变化像素点是指在所述子图像中与预设数量中任一对比子图像对应的像素点的灰度值差值大于预设阈值的像素点；S502、基于所述目标变化像素点，统计目标变化像素点与比较像素点之间的灰度值差值的标准差与均值，其中，所述比较像素点是指目标变化像素点在预设数量的对比子图像中对应的像素点；S503、根据所述目标变化像素点，计算在预设邻域窗口内目标变化像素点与其他像素点的灰度值差值的均值；S504、基于所述目标变化像素点与比较像素点之间的灰度值差值的标准差与均值，以及在预设邻域窗口内目标变化像素点与其他像素点的灰度值差值的均值，计算子图像对应的图像变化度。具体的，基于所述目标变化像素点与比较像素点之间的灰度值差值的标准差与均值，以及在预设邻域窗口内目标变化像素点与其他像素点的灰度值差值的均值，计算子图像对应的图像变化度，具体包括：其中，/＞为子图像对应的图像变化度，/＞为第/＞个目标变化像素点与比较像素点之间的灰度值差值的标准差，/＞为第/＞个目标变化像素点与比较像素点之间的灰度值差值的均值，/＞为在预设邻域窗口内第/＞个目标变化像素点与其他像素点的灰度值差值的均值，/＞为目标变化像素点的个数。需要说明的是，当前帧与相邻帧图像中图像数据产生变化时，则当前目标变化像素点与相邻帧图像中对应的比较像素点变化越大，目标变化像素点与比较像素点之间的灰度值差值的均值与标准差的比值就越大，需要对该子图像对应的目标图像进行更为细致地分块，提升压缩效果。在本申请的一种实施例中，步骤S103、所述基于所述子图像对应的图像丰富度、图像细节显著度与图像变化度，计算目标图像对应的细节保留度，具体包括：其中，/＞为目标图像对应的细节保留度，/＞为目标图像中第/＞个子图像的所有像素点个数，/＞为目标图像的所有像素点个数，/＞为第/＞个子图像对应的图像丰富度，/＞为第/＞个子图像对应的图像细节显著度，/＞为第/＞个子图像对应的图像变化度，/＞为目标图像中子图像的个数，/＞为归一化函数。需要说明的是，代表了第/＞个子图像对于目标图像的影响程度，当/＞越大时，证明第/＞个子图像在目标图像的占比较大，占比越大，则第/＞个子图像的各个计算参数对于目标图像对应的细节保留度影响就较大，也即将/＞作为一个权重，平衡每个子图像对于目标图像的细节保留度的影响程度。在本申请的一种实施例中，步骤S104、所述将所述细节保留度输入预设的压缩参数计算模型，计算目标图像对应的压缩参数，具体包括：其中，/＞为目标图像对应的压缩参数，/＞为目标图像对应的细节保留度，/＞为第一压缩系数，/＞为第二压缩系数，/＞为取整函数。需要说明的是，若本发明实施例的视频监控数据的压缩方式是采用分形压缩算法，则所述压缩参数即是自相似块的边长，得到自相似块的边长则可定义自相似块的面积大小。/＞为取整函数，取整可以为取括号内的四舍五入值，取以2为底的幂函数的作用为保证划分自相似块的边长符合分块的要求。需要说明的是，第一压缩系数、第二压缩系数/＞的数值为经验值，可根据不同应用场景进行自行调整，本案经验值优选为2和4。本申请实施例先通过根据视频监控数据，获取目标帧对应的目标图像，其中，目标图像包括预设数量的子图像，然后基于所述子图像的灰度值、以及在RGB空间中的聚类数量与每个像素点对应的LBP特征值，计算目标图像对应的细节保留度，再将所述细节保留度输入预设的压缩参数计算模型，计算目标图像对应的压缩参数，以将所述视频监控数据进行压缩，确认视频监控数据对应的压缩数据，最后上传所述视频监控数据对应的压缩数据至数据服务器，以将所述视频监控数据进行存储。通过视频监控数据中每帧图像的子图像计算每帧图像对应的压缩参数，以根据每帧图像对应的压缩参数对每帧图像进行压缩，得到视频监控数据对应的压缩数据并上传至数据服务器进行存储，提高视频监控数据存储质量，降低视频监控数据存储的工作成本。附图中的流程图和框图显示了根据本公开实施例的系统、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段或代码的一部分，所述模块、程序段或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个连续的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这可以依所涉及的功能而定。在附图中的流程图和框图所对应的描述中，不同的方框所对应的操作或步骤也可以以不同于描述中所披露的顺序发生，有时不同的操作或步骤之间不存在特定的顺序。例如，两个连续的操作或步骤实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这可以依所涉及的功能而定。框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行规定的功能或动作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。对于本领域技术人员而言，显然本申请不限于上述示范性实施例的细节，而且在不背离本申请的精神或基本特征的情况下，能够以其他的具体形式实现本申请。因此，无论从哪一点来看，均应将本申请上述的实施例看作是示范性的，而且是非限制性的，本申请的范围由所附权利要求而不是上述说明限定，因此旨在将落在权利要求的等同要件的含义和范围内的所有变化涵括在本申请内。
