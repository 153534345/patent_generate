标题title
一种啸叫检测和抑制方法、系统及介质
摘要abst
本发明提出了一种啸叫检测和抑制方法、系统及介质，涉及声学信号处理技术领域，该检测方法包括：配置用于记录每个频点的累积的相对能量值的数组；计算每一帧数据的每个频点对应的能量；计算将当前帧每个频点与前一帧对应频点的能量比值，并将对应频点的能量比值累加至数组中，遍历数组，若数组中存在某个值大于相对能量累积阈值则判定为啸叫频点。该抑制方法基于上述检测方法，包括：配置用于记录每个频点发生啸叫趋势的帧数的数组并进行频点能量的增长趋势记录；若存在啸叫频点，计算能量相对增长速率并调整陷波滤波器参数。本发明误报率低；可在啸叫抑制初期就能够发现啸叫频点，啸叫抑制效果更好，避免抑制效果不足或过度抑制。
权利要求书clms
1.一种啸叫检测方法，其特征在于，包括：确定频域空间的频率点数N；预设相对能量累积阈值T1；配置用于记录每个频点的累积的相对能量值的数组V；所述数组V的长度与所述频率点数N一致；对音频输入数据进行时频转换处理，得到频域数据；计算所述频域数据中每一帧数据的每个频点对应的能量；计算将当前帧每个频点的所述能量与前一帧对应频点的所述能量的能量比值，根据所述能量比值对所述数组V赋值进行累加比值；遍历所述数组V，若所述数组V中存在某个值大于所述相对能量累积阈值T1，则判定大于所述相对能量累积阈值T1的值对应的频点为啸叫频点。2.根据权利要求1所述的啸叫检测方法，其特征在于，所述根据所述能量比值对所述数组V赋值进行累加比值包括：所述数组V在初始化时所有值都被设置为0；当所述能量比值大于1时，则将所述能量比值累加到所述数组V中对应频点的值；当所述能量比值小于或等于1时，则所述数组V中对应频点的值重置为0。3.根据权利要求1所述的啸叫检测方法，其特征在于，若所述数组V中不存在某个值大于所述相对能量累积阈值T1，则表示当前帧数据没有发生啸叫，遂计算所述频域数据中下一帧数据的每个频点对应的能量，重复所述计算将当前帧每个频点的所述能量与前一帧对应频点的所述能量的能量比值，根据所述能量比值对所述数组V赋值进行累加比值步骤和所述遍历所述数组V，若所述数组V中存在某个值大于所述相对能量累积阈值T1，则判定大于所述相对能量累积阈值T1的值对应的频点为啸叫频点步骤。4.根据权利要求1-3任一项所述的啸叫检测方法，其特征在于，音频输入数据为实时获取的数字信号形式的数据。5.一种啸叫抑制方法，其特征在于，采用如权利要求1-4任一项所述的啸叫检测方法进行啸叫抑制，包括如下步骤：配置用于记录每个频点发生啸叫趋势的帧数的数组C；所述数组C的长度与频率点数N一致；根据能量比值对所述数组C赋值进行频点能量的增长趋势记录；若存在啸叫频点，则根据数组V和所述数组C计算所述啸叫频点的能量相对增长速率；根据所述能量相对增长速率调整陷波滤波器参数进行啸叫抑制。6.根据权利要求5所述的啸叫抑制方法，其特征在于，所述根据能量比值对所述数组C赋值进行频点能量的增长趋势记录包括：所述数组C在初始化时所有值都被设置为0；当所述能量比值大于1，则将所述能量比值累加到数组V中对应频点的值时，同时将所述数组C中对应频点的值加1；当所述能量比值小于或等于1时，则所述数组C中对应频点的值重置为0。7.根据权利要求6所述的啸叫抑制方法，其特征在于，通过公式：a=V/C 计算啸叫频点的能量相对增长速率；其中，a为能量相对增长速率；V表示所述数组V中存在第n个值大于相对能量累积阈值T1；C表示所述数组C中对应的第n个点的值。8.一种啸叫检测系统，其特征在于，所述啸叫检测系统包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述计算机程序被所述处理器执行时实现如权利要求1至4中任一项所述的啸叫检测方法的步骤。9.一种啸叫抑制系统，其特征在于，所述啸叫抑制系统包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述计算机程序被所述处理器执行时实现如权利要求5至7中任一项所述的啸叫抑制方法的步骤。10.一种计算机存储介质，其特征在于，所述计算机存储介质上存储有计算机程序，所述计算机程序被处理器执行时实现如权利要求1至4中任一项所述的啸叫检测方法的步骤或如权利要求5至7中任一项所述的啸叫抑制方法的步骤。
说明书desc
技术领域本发明涉及声学信号处理技术领域，尤其涉及一种啸叫检测和抑制方法、系统及介质。背景技术在扩声系统中，啸叫是一个常见的问题。当扩声系统中的某些频率的声音过强，并且在提升话筒音量时达到特定的强度条件，系统会产生自激振荡，即产生啸叫。这种自激振荡的频率即为啸叫频率，而自激振荡的正反馈系数的大小决定了啸叫发生的速度。尤其是在室内扩声系统中，当提升话筒音量时，由于某些过强的频率达到啸叫所需要的强度条件，形成正反馈，当其反馈系数大于1时系统会产生自激振荡，扩声系统从而产生了啸叫，正反馈系数越大，啸叫发生的速度越快。扩声系统产生啸叫不仅会破坏扩声环境的气氛，使与会者产生不适感，同时啸叫的产生还会大大影响扬声器和功率放大器，甚至使他们烧毁。相关技术中，在啸叫检测方面，大多仅利用单帧信息进行检测。在啸叫抑制方面，目前主要采用陷波滤波器来实现，陷波深度是陷波滤波器的重要参数，能够直接影响啸叫抑制效果，目前的陷波抑制方法都是基于预设的陷波深度参数。例如，专利号为CN116386652A的发明专利公开了一种啸叫检测频点优化方法、装置、设备及存储介质；专利号为CN116994596A的发明专利公开了一种啸叫抑制方法、装置、存储介质及电子设备；上述涉及的啸叫频点检测方法均为针对单帧的音频信号进行检测，相对于连续多帧音频啸叫检测，这种针对单帧音频啸叫检测方法容易收到外接环境干扰而发生误判；上述涉及的啸叫抑制方法根据预设的陷波器抑制参数啸叫抑制，容易产生抑制效果不够或过渡抑制的情况，从而影响现场扩声效果。发明内容为克服上述啸叫检测和抑制方法、系统所存在的缺陷，本发明提供一种误判率低、抑制效果更好的啸叫检测和抑制方法、系统及介质。就啸叫检测方法，本发明为解决所述技术问题的啸叫检测方法包括如下步骤：确定频域空间的频率点数N；预设相对能量累积阈值T1；配置用于记录每个频点的累积的相对能量值的数组V；所述数组C的长度与所述频率点数N一致；对音频输入数据进行时频转换处理，得到频域数据；计算所述频域数据中每一帧数据的每个频点对应的能量；计算将当前帧每个频点的所述能量与前一帧对应频点的所述能量的能量比值，根据所述能量比值对所述数组V赋值进行累加比值；遍历所述数组V，若所述数组V中存在某个值大于所述相对能量累积阈值T1，则判定大于所述相对能量累积阈值T1的值对应的频点为啸叫频点。作为啸叫检测方法的改进，所述根据所述能量比值对所述数组V赋值进行累加比值包括：所述数组V在初始化时所有值都被设置为0；当所述能量比值大于1时，则将所述能量比值累加到所述数组V中对应频点的值；当所述能量比值小于或等于1时，则所述数组V中对应频点的值重置为0。作为啸叫检测方法的改进，若所述数组V中不存在某个值大于所述相对能量累积阈值T1，则表示当前帧数据没有发生啸叫，遂计算所述频域数据中下一帧数据的每个频点对应的能量，重复所述计算将当前帧每个频点的所述能量与前一帧对应频点的所述能量的能量比值，根据所述能量比值对所述数组V赋值进行累加比值步骤和所述遍历所述数组V，若所述数组V中存在某个值大于所述相对能量累积阈值T1，则判定大于所述相对能量累积阈值T1的值对应的频点为啸叫频点步骤。作为啸叫检测方法的改进，音频输入数据为实时获取地数字信号形式的数据。与相关技术相比，本发明的啸叫检测方法利用多帧音频进行啸叫检测，抗干扰性更强，啸叫频点计算误报率低；由于在啸叫产生初期，随着时间的推移，啸叫频点的能量会不断增大，根据此特征并设立合理的阈值，采用本发明的啸叫检测方法可在啸叫抑制初期就能够发现啸叫频点，从而能够更早的进行啸叫抑制。就啸叫抑制方法而言，本发明为解决所述技术问题的啸叫抑制方法采用上述的啸叫检测方法进行啸叫抑制，包括如下步骤：配置用于记录每个频点发生啸叫趋势的帧数的数组C；所述数组C的长度与频率点数N一致；根据能量比值对所述数组C赋值进行频点能量的增长趋势记录；若存在啸叫频点，则根据数组V和所述数组C计算所述啸叫频点的能量相对增长速率；根据所述能量相对增长速率调整陷波滤波器参数进行啸叫抑制。作为啸叫抑制方法的改进，所述根据能量比值对所述数组C赋值进行频点能量的增长趋势记录包括：所述数组C在初始化时所有值都被设置为0；当所述能量比值大于1，则将所述能量比值累加到数组V中对应频点的值时，同时将所述数组C中对应频点的值加1；当所述能量比值小于或等于1时，则所述数组C中对应频点的值重置为0。作为啸叫抑制方法的改进，通过公式：a=V/C 计算啸叫频点的能量相对增长速率；其中，a为能量相对增长速率；V表示所述数组V中存在第n个值大于相对能量累积阈值T1；C表示所述数组C中对应的第n个点的值。与相关技术相比，本发明的啸叫抑制方法，通过啸叫发生的正反馈系数相对值，调整陷波器滤波法的陷波深度参数，使用调整后的陷波滤波器对待处理的音频进行处理，对可能发生啸叫的频点进行抑制，能够有效地减少或消除过渡抑制或抑制不足现象，提高扩声系统的音质和稳定性。此外，通过实时监测和调整陷波滤波器的参数，还可以实现自动化的啸叫抑制，提高会议室的扩声效果和用户体验。另一方面，本发明本发明为解决所述技术问题提供一种啸叫检测系统，所述啸叫检测系统包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述计算机程序被所述处理器执行时实现上述的啸叫检测方法的步骤。与相关技术相比，本发明的啸叫检测系统实现上述是啸叫检测方法的流程，其有益效果与本发明啸叫检测方法的有益效果相同，在此不做赘述。另一方面，本发明为解决所述技术问题提供一种啸叫抑制系统，所述啸叫抑制系统包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述计算机程序被所述处理器执行时实现上述的啸叫检测抑制的步骤。与相关技术相比，本发明的啸叫抑制系统实现上述是啸叫抑制方法的流程，其有益效果与本发明啸叫抑制方法的有益效果相同，在此不做赘述。另一方面，本发明为解决所述技术问题提供一种计算机存储介质，所述计算机存储介质上存储有计算机程序，所述计算机程序被处理器执行时实现上述的啸叫检测方法的步骤或上述的啸叫抑制方法的步骤。与相关技术相比，本发明的计算机存储介质实现上述是啸叫检测方法或啸叫抑制方法的流程，其有益效果与本发明检测方法或啸叫抑制方法的有益效果相同，在此不做赘述。附图说明图1为根据本发明实施例的啸叫检测和抑制方法流程图；图2为根据本发明实施例的啸叫检测流程图；图3为根据本发明实施例的啸叫抑制流程图。具体实施方式为更进一步阐述本发明为达成预定目的所采取的技术手段及功效，以下结合附图及较佳实施例，对本发明进行详细说明如后。本发明中说明书中对方法流程的描述及本发明说明书附图中流程图的步骤并非必须按步骤标号严格执行，方法步骤是可以改变执行顺序的。而且，可以省略某些步骤，将多个步骤合并为一个步骤执行，和/或将一个步骤分解为多个步骤执行。针对上述技术缺陷，本发明实施例提供了一种啸叫检测和抑制方法，通过连续多帧音频检信息进行测啸叫频点检测，可以在啸叫发生的初期就能检测到啸叫频点，该检测方法的误判率较低，同时，该抑制方法可计算啸叫发生的正反馈系数相对值，根据该正反馈系数对陷波滤波器的陷波深度参数进行调整，避免过渡抑制或抑制不足对扩声效果的影响，实现更好的啸叫抑制效果。啸叫信号一般具有某一单一频率特征，在产生初期该单频率的能量值会不断增大，并且扩声系统的正反馈系数越大，啸叫频率点的能量值增长的越快，也就意味着啸叫发生的越快，本发明基于此特征进行啸叫频率检测，并计算出相对的正反馈系数，然后根据该正反馈系数设置和调整陷波滤波器的陷波深度参数，然后系统利用该陷波滤波器能够实现更好的啸叫抑制效果。请参见图1，图1为根据本发明实施例的啸叫检测和抑制方法流程图，如图1所示，本发明实施例的啸叫检测和抑制方法包括如下步骤：S100，参数初始化：确定频域空间的频率点数N；预设相对能量累积阈值T1；配置用于记录每个频点的累积的相对能量值的数组V和用于记录每个频点发生啸叫趋势的帧数的数组C。该步骤中，N：单帧音频信号从时域空间变换到频域空间后的频率点数。选择合适的N值可以确保足够的频率分辨率；例如，本实施例中N为2048。T1：相对能量累积阈值，当数组V中的某个值大于相对能量累积阈值T1时，既判定该频点发生啸叫。例如，本实施例中T1值可以以8。数组V：记为V，长度为N的一维数组，该数组用于记录每个频点的累积的相对能量值，初始话时该数组所有值赋0。例如，当本实施例中N为2048，此时数组V的长度为2048，且每个值都为0。数组C：记为C，长度为N的一维数组，该数组用于记录每个频点发生啸叫趋势的帧数，初始话时该数组所有值赋0。C数组用于跟踪连续帧之间的能量增长，例如，当本实施例中N为2048，此时数组C的长度为2048，且每个值都为0。S200，实时获取数字信号形式的音频输入数据。便于后续的数字处理和分析。示例性的，该步骤中，可以通过电子设备的拾音器或其他方式采集音频信号，然后通过AD转换电路转换成数字信号。本实施例中，通过声卡实时将会议室话筒音频进行采集并转换成数字信号。请参见图2，以下是本发明实施例的啸叫检测和抑制方法的啸叫检测过程：S300，对音频输入数据进行时频转换处理，得到频域数据。具体来说，该步骤是按预设的帧长，实时获取每一帧数字音频数据，并对该帧数据进行滤波处理后得到待处理的音频数据帧，滤波的作用是滤除不必要的噪声，突出人声等有用信号。将待处理的音频数据帧通过傅里叶变换实现音频数据帧从时域空间到频域空间的转换。一些实施例中，也可以是先加窗再傅里叶变换，实现音频数据帧从时域空间到频域空间的转换。示例性的，帧长以16000为例，实时获取每一帧数字音频数据，并对该帧数据进行滤波处理后得到待处理的音频数据帧，该滤波器以带通滤波器为例，根绝人声频率和容易发生啸叫声的频率特点，设置滤波器低频截止频率设置为20Hz，高频截止频率为15kHz。将滤波后的数据先加窗再进行傅里叶变换，实现音频数据帧从时域空间到频域空间的转换，经过时频转换后每一帧得到的能量频谱为2048个点。通过时频转换，可以将音频信号分解成不同的频率成分，以便进行特征提取。S400，计算上述频域数据中每一帧数据的每个频点对应的能量。计算每一帧中每个频率点对应的能量的过程，是对频域信号进行幅度谱的计算，在傅里叶变换的结果中，每个频率点的值代表了该频率成分在信号中的幅度或能量，通过计算每个频率点的模值或功率，可以得到该频率点在信号中的能量。S500，计算将当前帧每个频点的能量与前一帧对应频点的能量比值，根据能量比值，对数组V赋值进行累加比值，对数组C赋值进行频点能量的增长趋势记录。具体来说，由于在啸叫产生初期，随着时间的推移，啸叫频点的能量会不断增大，因此，可根据此特征，分别计算当前帧的每个频点的能量与前一帧对应频点的能量比值，当该比值大于1，则将该比例值累加到数组V中对应的位置中，同时将数组C中对应的位置的值加1，如果该比值小于等于1，则数组V和数组C中对应的位置的值置0。示例性的，计算当前帧第m个频点的能量与前一帧第m-1个频点的能量比值A，若A大于1，则数组V中第m个点的值V=V+1，数组C中的第m个点的值C=C+1；若A小于等于1，数组V和数组C对应的点重置为0，既V=0，C=0。S600，遍历数组V，若数组V中存在某个值大于相对能量累积阈值T1，则判定大于相对能量累积阈值T1的值对应的频点为啸叫频点。该步骤中，判断是否有任何点的值超过了相对能量累积阈值T1，即将数组V中的每个值与能量累积阈值T1进行比较，若数组V中存在某个值大于T1，则表示该值对应的频点可能发生啸叫，遂判定该点对应的频点为啸叫频点。若数组V中不存在某个值大于T1，则表示该帧数据没有发生啸叫，遂进行下一帧数据的啸叫检测。示例性的，遍历数组V中每个点的值，若数组V中的所有值都小于预设的相对能量累积阈值T1，则进入下一帧数据的处理流程，重步骤S300-S600，若数组V中存在某个值大于T1，例如第n个点V大于T1，则判定第n个点对应的频点发生了啸叫。上述啸叫检测方法相对于采用单帧音频进行啸叫检测的算法，利用多帧音频进行啸叫检测抗干扰性更强，因此啸叫频点计算误报率低；由于在啸叫产生初期，随着时间的推移，啸叫频点的能量会不断增大，根据此特征并设立合理的阈值，进一步采用本发明的啸叫检测方法可在啸叫抑制初期就能够发现啸叫频点，从而能够更早的进行啸叫抑制。请参见图3， 以下是本发明实施例的啸叫检测和抑制方法的啸叫抑制过程：S700，根据上述啸叫检测方法判断是否存在啸叫频点，若存在啸叫频点，则计算啸叫频点能量相对增长速率。对于判定为发生啸叫的频点，同时可以计算出该啸叫频点的能量相对增长速率a，也就是啸叫发生的正反馈系数相对值。能量相对增长速率a的值反映了音频啸叫发生速度。示例性的，通过上述检测方法则判定第n个点对应的频点发生了啸叫，同时计算啸叫频点能量相对增长速率：a=V/C。其中，a为能量相对增长速率；V表示所述数组V中存在第n个值大于相对能量累积阈值T1；C表示所述数组C中对应的第n个点的值。S800，根据啸叫频点能量相对增长速率调整陷波滤波器参数。 具体来说，陷波深度参数 d=k*a，其中 k 为一个固定系数，当啸叫正反馈系数越大，陷波深度参数越大。该步骤中，根据计算出的a值调整陷波滤波器的陷波深度参数。陷波滤波器的作用是抑制特定频率的信号，通过调整陷波深度，可以控制对啸叫频点的抑制程度。较深的陷波可以更有效地抑制高能量的啸叫频点，而较浅的陷波则可以减少对其他频段的影响。采用本发明的啸叫抑制方法，通过啸叫发生的正反馈系数相对值，调整陷波器滤波法的陷波深度参数，使用调整后的陷波滤波器对待处理的音频进行处理，对可能发生啸叫的频点进行抑制，能够有效地减少或消除过渡抑制或抑制不足现象，提高扩声系统的音质和稳定性。此外，通过实时监测和调整陷波滤波器的参数，还可以实现自动化的啸叫抑制，提高会议室的扩声效果和用户体验。另一方面，本发明本发明为解决所述技术问题提供一种啸叫检测系统，所述啸叫检测系统包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述计算机程序被所述处理器执行时实现上述的啸叫检测方法的步骤。与相关技术相比，本发明的啸叫检测系统实现上述是啸叫检测方法的流程，其有益效果与本发明啸叫检测方法的有益效果相同，在此不做赘述。另一方面，本发明本发明为解决所述技术问题提供一种啸叫抑制系统，所述啸叫抑制系统包括：存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，所述计算机程序被所述处理器执行时实现上述的啸叫检测抑制的步骤。与相关技术相比，本发明的啸叫抑制系统实现上述是啸叫抑制方法的流程，其有益效果与本发明啸叫抑制方法的有益效果相同，在此不做赘述。另一方面，本发明本发明为解决所述技术问题提供一种计算机存储介质，所述计算机存储介质上存储有计算机程序，所述计算机程序被处理器执行时实现上述的啸叫检测方法的步骤或上述的啸叫抑制方法的步骤。与相关技术相比，本发明的计算机存储介质实现上述是啸叫检测方法或啸叫抑制方法的流程，其有益效果与本发明检测方法或啸叫抑制方法的有益效果相同，在此不做赘述。通过具体实施方式的说明，应当可对本发明为达成预定目的所采取的技术手段及功效得以更加深入且具体的了解，然而所附图示仅是提供参考与说明之用，并非用来对本发明加以限制。
