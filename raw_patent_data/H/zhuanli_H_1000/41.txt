标题title
用于物理下行共享信道的数据处理方法及装置
摘要abst
本申请涉及用于物理下行共享信道的数据处理方法及装置。一种用于PDSCH的数据处理方法，包括：获取目标资源粒子索引数组；从目标RE索引数组中排除PDSCH不可用的RE的索引以获得可用RE索引数组；从可用RE索引数组中确定用于解调参考信号的第一RE索引数组并获得对应DMRS数据；从可用RE索引数组中确定用于相位跟踪参考信号的第二RE索引数组并获得对应PT‑RS数据；从可用RE索引数组中排除第一RE索引数组和第二RE索引数组中的索引元素以获得用于负载数据的第三RE索引数组；基于第三RE索引数组中的元素个数获得负载数据；将DMRS数据、PT‑RS数据和负载数据分别顺序地映射到第一RE索引数组、第二RE索引数组和第三RE索引数组中的索引元素对应的RE。
权利要求书clms
1.一种用于物理下行共享信道的数据处理方法，其特征在于，包括：获取所述物理下行共享信道的数据将映射到的目标资源粒子的索引数组；从目标资源粒子索引数组中排除所述物理下行共享信道不可用的资源粒子的索引，以获得所述物理下行共享信道的可用资源粒子索引数组；从所述可用资源粒子索引数组中确定用于解调参考信号的第一资源粒子索引数组并且获得所述第一资源粒子索引数组对应的解调参考信号数据；从所述可用资源粒子索引数组中确定用于相位跟踪参考信号的第二资源粒子索引数组并且获得所述第二资源粒子索引数组对应的相位跟踪参考信号数据；从所述可用资源粒子索引数组中排除所述第一资源粒子索引数组中的索引元素和所述第二资源粒子索引数组中的索引元素，以获得用于所述物理下行共享信道的负载数据的第三资源粒子索引数组；基于所述第三资源粒子索引数组中的元素个数，获得所述物理下行共享信道的负载数据；将所述解调参考信号数据、所述相位跟踪参考信号数据和所述负载数据分别顺序地映射到所述第一资源粒子索引数组、所述第二资源粒子索引数组和所述第三资源粒子索引数组中的索引元素对应的资源粒子。2.根据权利要求1所述的方法，其特征在于，所述获取所述物理下行共享信道的数据将映射到的目标资源粒子的索引数组，包括：获取初始资源粒子索引数组，其中，所述初始资源粒子索引数组是由时隙内的分配给所述物理下行共享信道的所有资源粒子的索引顺序地构成的数组；由所述初始资源粒子索引数组获取目标资源粒子索引数组，其中，在不需要交织操作的情况下，所述目标资源粒子索引数组等同于所述初始资源粒子索引数组，在需要所述交织操作的情况下，所述目标资源粒子索引数组通过使用预设交织公式对所述初始资源粒子索引数组进行交织操作而获得。3.根据权利要求1所述的方法，其特征在于，所述物理下行共享信道的可用资源粒子占据了N个符号，N为正整数并且小于或等于时隙内的总符号数；所述从所述可用资源粒子索引数组中确定用于解调参考信号的第一资源粒子索引数组并且获得所述第一资源粒子索引数组对应的解调参考信号数据，包括：针对所述N个符号中的每个符号，按照预设解调参考信号数据产生规则连续生成索引在该符号上的最小资源粒子索引与该符号上的最大可用资源粒子索引之间的第一解调参考信号数据，并且获得所述第一解调参考信号数据对应的资源粒子索引；将所述N个符号中的各个符号上的第一解调参考信号数据对应的资源粒子索引进行组合，以获得全部N个符号上的解调参考信号数据对应的第四资源粒子索引数组；将所述可用资源粒子索引数组和所述第四资源粒子索引数组取交集以获得所述第一资源粒子索引数组，并且获得所述第一资源粒子索引数组对应的解调参考信号数据。4.根据权利要求3所述的方法，其特征在于，在所述将所述N个符号中的各个符号上的第一解调参考信号数据对应的资源粒子索引进行组合的步骤之前，所述方法还包括：从针对所述N个符号中的每个符号所生成的第一解调参考信号数据中，删除索引小于该符号上的最小可用资源粒子索引的解调参考信号数据，从而保留索引在该符号上的最小可用资源粒子索引与最大可用资源粒子索引之间的第一解调参考信号数据和所保留的第一解调参考信号数据对应的资源粒子索引。5.根据权利要求1所述的方法，其特征在于，所述物理下行共享信道的可用资源粒子占据了N个符号，N为正整数并且小于或等于时隙内的总符号数；所述N个符号中的M个符号上存在相位跟踪参考信号数据，其中M为整数并且0≤M≤N；所述从所述可用资源粒子索引数组中确定用于相位跟踪参考信号的第二资源粒子索引数组并且获得所述第二资源粒子索引数组对应的相位跟踪参考信号数据，包括：针对所述M个符号中的任一符号，按照预设相位跟踪参考信号数据产生规则连续生成索引在该符号上的最小资源粒子索引与该符号上的最大可用资源粒子索引之间的第一相位跟踪参考信号数据，并且获得所述第一相位跟踪参考信号数据对应的资源粒子索引；针对其余M-1个符号中的每个符号复制所述任一符号上的第一相位跟踪参考信号数据，以获得所述M个符号中的每个符号上的第一相位跟踪参考信号数据并且获得所述第一相位跟踪参考信号数据对应的资源粒子索引；将所述M个符号中的各个符号上的第一相位跟踪参考信号数据对应的资源粒子索引进行组合，以获得全部M个符号上的相位跟踪参考信号数据对应的第五资源粒子索引数组；将所述可用资源粒子索引数组和所述第五资源粒子索引数组取交集以获得所述第二资源粒子索引数组，并且获得所述第二资源粒子索引数组对应的相位跟踪参考信号数据。6.根据权利要求5所述的方法，其特征在于，在所述针对其余M-1个符号中的每个符号复制所述任一符号上的第一相位跟踪参考信号数据的步骤之前，所述方法还包括：从针对所述M个符号中的任一符号所生成的第一相位跟踪参考信号数据中，删除索引小于该符号上的最小可用资源粒子索引的相位跟踪参考信号数据，从而保留索引在该符号上的最小可用资源粒子索引与最大可用资源粒子索引之间的第一相位跟踪参考信号数据和所保留的第一相位跟踪参考信号数据对应的资源粒子索引。7.根据权利要求6所述的方法，其特征在于，在所述针对其余M-1个符号中的每个符号复制所述任一符号上的第一相位跟踪参考信号数据的步骤之前，所述方法还包括：仅存储所述任一符号上的第一相位跟踪参考信号数据和第一相位跟踪参考信号数据对应的资源粒子索引，其中，所存储的第一相位跟踪参考信号数据和第一相位跟踪参考信号数据对应的资源粒子索引用于在需要时被读取以实现所述复制操作，从而获得其余M-1个符号中的每个符号上的第一相位跟踪参考信号数据和第一相位跟踪参考信号数据对应的资源粒子索引。8.根据权利要求1所述的方法，其特征在于，所述物理下行共享信道的可用资源粒子占据了N个符号，N为正整数并且小于或等于时隙内的总符号数；所述N个符号中的M个符号上存在相位跟踪参考信号数据，其中M为整数并且0≤M≤N；所述从所述可用资源粒子索引数组中确定用于相位跟踪参考信号的第二资源粒子索引数组并且获得所述第二资源粒子索引数组对应的相位跟踪参考信号数据，包括：获取所述N个符号中的按照符号顺序首次出现解调参考信号数据的符号中的、与相位跟踪参考信号数据在同一子载波上的解调参考信号数据的资源粒子索引；根据与所获取的资源粒子索引对应的解调参考信号数据和预设相位跟踪参考信号数据产生规则，针对所述M个符号中的任一符号生成索引在该符号上的最小可用资源粒子索引与最大可用资源粒子索引之间的第一相位跟踪参考信号数据，并且获得所述第一相位跟踪参考信号数据对应的资源粒子索引；针对其余M-1个符号中的每个符号，复制所述任一符号上的第一相位跟踪参考信号数据，以获得所述M个符号中的每个符号上的第一相位跟踪参考信号数据并且获得所述第一相位跟踪参考信号数据对应的资源粒子索引；将所述M个符号中的各个符号上的第一相位跟踪参考信号数据对应的资源粒子索引进行组合，以获得全部M个符号上的相位跟踪参考信号数据对应的第六资源粒子索引数组；将所述可用资源粒子索引数组和所述第六资源粒子索引数组取交集以获得所述第二资源粒子索引数组，并且获得所述第二资源粒子索引数组对应的相位跟踪参考信号数据。9.一种装置，其特征在于，包括：存储器，用于存储程序；处理器，用于执行所述程序以实现根据权利要求1-8中任一项所述的方法。10.一种计算机可读存储介质，其特征在于，所述介质上存储有程序，所述程序能够被处理器执行以实现根据权利要求1-8中任一项所述的方法。
说明书desc
技术领域本申请涉及移动通信，具体涉及用于物理下行共享信道的数据处理方法及装置。背景技术关于新无线协议中的物理下行共享信道，现有NR协议规定了数据的总体处理流程，包括数据产生、处理和映射等，但是现有技术没有公开具体实现方案，特别是缺少PDSCH数据映射中预留资源规避的具体实现方案。此外，现有技术多以资源块为单位笼统地介绍预留资源规避，对于以资源粒子为单位的预留资源如何进行处理，现有技术少有涉及。因此，需要一种改进的用于PDSCH的数据处理方法。发明内容本申请为解决以上问题，提供了一种用于物理下行共享信道的数据处理方法及装置。根据本申请的第一方面，一种实施例提供了一种用于物理下行共享信道的数据处理方法，包括：获取所述物理下行共享信道的数据将映射到的目标资源粒子的索引数组；从目标资源粒子索引数组中排除所述物理下行共享信道不可用的资源粒子的索引，以获得所述物理下行共享信道的可用资源粒子索引数组；从所述可用资源粒子索引数组中确定用于解调参考信号的第一资源粒子索引数组并且获得所述第一资源粒子索引数组对应的解调参考信号数据；从所述可用资源粒子索引数组中确定用于相位跟踪参考信号的第二资源粒子索引数组并且获得所述第二资源粒子索引数组对应的相位跟踪参考信号数据；从所述可用资源粒子索引数组中排除所述第一资源粒子索引数组中的索引元素和所述第二资源粒子索引数组中的索引元素，以获得用于所述物理下行共享信道的负载数据的第三资源粒子索引数组；基于所述第三资源粒子索引数组中的元素个数，获得所述物理下行共享信道的负载数据；将所述解调参考信号数据、所述相位跟踪参考信号数据和所述负载数据分别顺序地映射到所述第一资源粒子索引数组、所述第二资源粒子索引数组和所述第三资源粒子索引数组中的索引元素对应的资源粒子。在一些实施例中，所述获取所述物理下行共享信道的数据将映射到的目标资源粒子的索引数组，包括：获取初始资源粒子索引数组，其中，所述初始资源粒子索引数组是由时隙内的分配给所述物理下行共享信道的所有资源粒子的索引顺序地构成的数组；由所述初始资源粒子索引数组获取目标资源粒子索引数组，其中，在不需要交织操作的情况下，所述目标资源粒子索引数组等同于所述初始资源粒子索引数组，在需要所述交织操作的情况下，所述目标资源粒子索引数组通过使用预设交织公式对所述初始资源粒子索引数组进行交织操作而获得。在一些实施例中，所述物理下行共享信道的可用资源粒子占据了N个符号，N为正整数并且小于或等于时隙内的总符号数；所述从所述可用资源粒子索引数组中确定用于解调参考信号的第一资源粒子索引数组并且获得所述第一资源粒子索引数组对应的解调参考信号数据，包括：针对所述N个符号中的每个符号，按照预设解调参考信号数据产生规则连续生成索引在该符号上的最小资源粒子索引与该符号上的最大可用资源粒子索引之间的第一解调参考信号数据，并且获得所述第一解调参考信号数据对应的资源粒子索引；将所述N个符号中的各个符号上的第一解调参考信号数据对应的资源粒子索引进行组合，以获得全部N个符号上的解调参考信号数据对应的第四资源粒子索引数组；将所述可用资源粒子索引数组和所述第四资源粒子索引数组取交集以获得所述第一资源粒子索引数组，并且获得所述第一资源粒子索引数组对应的解调参考信号数据。在一些实施中，在所述将所述N个符号中的各个符号上的第一解调参考信号数据对应的资源粒子索引进行组合的步骤之前，所述方法还包括：从针对所述N个符号中的每个符号所生成的第一解调参考信号数据中，删除索引小于该符号上的最小可用资源粒子索引的解调参考信号数据，从而保留索引在该符号上的最小可用资源粒子索引与最大可用资源粒子索引之间的第一解调参考信号数据和所保留的第一解调参考信号数据对应的资源粒子索引。在一些实施例中，所述物理下行共享信道的可用资源粒子占据了N个符号，N为正整数并且小于或等于时隙内的总符号数；所述N个符号中的M个符号上存在相位跟踪参考信号数据，其中M为整数并且0≤M≤N；所述从所述可用资源粒子索引数组中确定用于相位跟踪参考信号的第二资源粒子索引数组并且获得所述第二资源粒子索引数组对应的相位跟踪参考信号数据，包括：针对所述M个符号中的任一符号，按照预设相位跟踪参考信号数据产生规则连续生成索引在该符号上的最小资源粒子索引与该符号上的最大可用资源粒子索引之间的第一相位跟踪参考信号数据，并且获得所述第一相位跟踪参考信号数据对应的资源粒子索引；针对其余M-1个符号中的每个符号复制所述任一符号上的第一相位跟踪参考信号数据，以获得所述M个符号中的每个符号上的第一相位跟踪参考信号数据并且获得所述第一相位跟踪参考信号数据对应的资源粒子索引；将所述M个符号中的各个符号上的第一相位跟踪参考信号数据对应的资源粒子索引进行组合，以获得全部M个符号上的相位跟踪参考信号数据对应的第五资源粒子索引数组；将所述可用资源粒子索引数组和所述第五资源粒子索引数组取交集以获得所述第二资源粒子索引数组，并且获得所述第二资源粒子索引数组对应的相位跟踪参考信号数据。在一些实施例中，在所述针对其余M-1个符号中的每个符号复制所述任一符号上的第一相位跟踪参考信号数据的步骤之前，所述方法还包括：从针对所述M个符号中的任一符号所生成的第一相位跟踪参考信号数据中，删除索引小于该符号上的最小可用资源粒子索引的相位跟踪参考信号数据，从而保留索引在该符号上的最小可用资源粒子索引与最大可用资源粒子索引之间的第一相位跟踪参考信号数据和所保留的第一相位跟踪参考信号数据对应的资源粒子索引。在一些实施方式中，在所述针对其余M-1个符号中的每个符号复制所述任一符号上的第一相位跟踪参考信号数据的步骤之前，所述方法还包括：仅存储所述任一符号上的第一相位跟踪参考信号数据和第一相位跟踪参考信号数据对应的资源粒子索引，其中，所存储的第一相位跟踪参考信号数据和第一相位跟踪参考信号数据对应的资源粒子索引用于在需要时被读取以实现所述复制操作，从而获得其余M-1个符号中的每个符号上的第一相位跟踪参考信号数据和第一相位跟踪参考信号数据对应的资源粒子索引。在一些实施例中，所述物理下行共享信道的可用资源粒子占据了N个符号，N为正整数并且小于或等于时隙内的总符号数；所述N个符号中的M个符号上存在相位跟踪参考信号数据，其中M为整数并且0≤M≤N；所述从所述可用资源粒子索引数组中确定用于相位跟踪参考信号的第二资源粒子索引数组并且获得所述第二资源粒子索引数组对应的相位跟踪参考信号数据，包括：获取所述N个符号中的按照符号顺序首次出现解调参考信号数据的符号中的、与相位跟踪参考信号数据在同一子载波上的解调参考信号数据的资源粒子索引，根据与所获取的资源粒子索引对应的解调参考信号数据和预设相位跟踪参考信号数据产生规则，针对所述M个符号中的任一符号生成索引在该符号上的最小可用资源粒子索引与最大可用资源粒子索引之间的第一相位跟踪参考信号数据，并且获得所述第一相位跟踪参考信号数据对应的资源粒子索引；针对其余M-1个符号中的每个符号，复制所述任一符号上的第一相位跟踪参考信号数据，以获得所述M个符号中的每个符号上的第一相位跟踪参考信号数据并且获得所述第一相位跟踪参考信号数据对应的资源粒子索引；将所述M个符号中的各个符号上的第一相位跟踪参考信号数据对应的资源粒子索引进行组合，以获得全部M个符号上的相位跟踪参考信号数据对应的第六资源粒子索引数组；将所述可用资源粒子索引数组和所述第六资源粒子索引数组取交集以获得所述第二资源粒子索引数组，并且获得所述第二资源粒子索引数组对应的相位跟踪参考信号数据。根据本申请的第二方面，一种实施例提供了一种装置，该装置包括：存储器，用于存储程序；处理器，用于执行所述程序以实现以上任一方法实施例所述的方法。根据本申请的第三方面，一种实施例提供了一种计算机可读存储介质，所述介质上存储有程序，所述程序能够被处理器执行以实现以上任一方法实施例所述的方法。在以上实施例中，通过引入资源粒子索引数组，可以消除由于预留信道/信号占用导致从虚拟资源块到物理资源块的映射完全变化造成的影响，从而更好地处理以RE为单位的资源预留的规避，实现正向数据映射过程。此外，在一些实施例中，在整个交织与映射过程中，利用数据对应的RE位置索引，将有无交织和有无预留的情况抽象成统一的处理流程，消除了处理差异。附图说明此处的附图被并入说明书中并构成本说明书的一部分，示出了符合本申请的实施例，并与说明书一起用于解释本申请的原理。图1示出了新无线中的资源网格的示意图；图2示出了NR中的帧与RG之间的关系的示意图；图3示出了对划定的部分带宽的时频资源范围内物理资源块进行交织前后的示意图；图4示出了一种实施例的用于PDSCH的数据处理方法；图5示出了一种实施例的用于PDSCH的数据处理方法；图6示出了一种实施例的用于实现PDSCH的数据处理方法的装置的示意图。通过上述附图，已示出本申请明确的实施例，后文中将有更详细的描述。这些附图和文字描述并不是为了通过任何方式限制本申请构思的范围，而是通过参考特定实施例为本领域技术人员说明本申请的概念。具体实施方式下面通过具体实施方式结合附图对本发明作进一步详细说明。其中不同实施方式中类似元件采用了相关联的类似的元件标号。在以下的实施方式中，很多细节描述是为了使得本申请能被更好的理解。然而，本领域技术人员可以毫不费力的认识到，其中部分特征在不同情况下是可以省略的，或者可以由其他元件、材料、方法所替代。在某些情况下，本申请相关的一些操作并没有在说明书中显示或者描述，这是为了避免本申请的核心部分被过多的描述所淹没，而对于本领域技术人员而言，详细描述这些相关操作并不是必要的，他们根据说明书中的描述以及本领域的一般技术知识即可完整了解相关操作。另外，说明书中所描述的特点、操作或者特征可以以任意适当的方式结合形成各种实施方式。同时，方法描述中的各步骤或者动作也可以按照本领域技术人员所能显而易见的方式进行顺序调换或调整。因此，说明书和附图中的各种顺序只是为了清楚描述某一个实施例，并不意味着是必须的顺序，除非另有说明其中某个顺序是必须遵循的。本文中为部件所编序号本身，例如“第一”、“第二”等，仅用于区分所描述的对象，不具有任何顺序或技术含义。而本申请所说“连接”、“联接”，如无特别说明，均包括直接和间接连接。关于新无线协议中的物理下行共享信道，现有NR协议规定了数据的中间处理流程，包括数据产生、处理和映射，其中，映射需要先映射到虚拟资源块，再映射到物理资源块，VRB到PRB的映射有交织和非交织映射两种方法。非交织映射是一种直接映射的方法，相对容易实现，而交织映射的情况则比较复杂，特别是这种情况下对预留资源的规避会相对复杂。关于PDSCH中的交织与非交织映射和预留资源规避，现有NR协议规定了总体流程，但是没有公开技术实现细节，缺少具体和完整的实现方案。发明人注意到，现有技术中存在以下逆向实现方案：通过“解交织器”实现将PRB中的预留资源转换到VRB，然后在指派数据时避免掉这些解交织后的资源块。这种实现方案的缺点在于需要使用额外的“解交织器”单元。此外，现有技术都是以RB为单位笼统地指出需要进行交织、预留资源规避等，而有些预留资源是以资源粒子为单位，对于这样的预留资源如何进行规避，现有技术没有提出具体的实现方案。本申请引入了与数据对应的RE索引数组，由此可以更好处理以RE为单位的预留资源规避。此外，通过引入RE索引数组，可以在正向实现方式中将有无交织和有无资源预留抽象成统一的处理方法，消除了处理差异。1. 基础概念1.1. 资源网格图1示出了新无线中的资源网格的示意图。每一列属于同一个正交频分复用符号。每个小单元称为资源粒子，纵轴上12个RE称为一个资源块，横轴上14个符号称为一个时隙，这个12×14的单元称为一个资源网格。需要注意的时，一个时隙也可以包含12个符号，这可以根据本领域技术人员的具体设置而定。1.2. 帧与资源网格图2示出了NR中的帧与资源网格之间的关系的示意图。在图2中左图表示的是一个帧，横坐标表示时隙，纵坐标表示公共资源块，这个帧横坐标包含20个时隙，纵坐标包含10个资源块。应该注意的是，所示出的20个时隙和10个资源块仅为示例，帧可以包含其他数量的时隙和资源块。图2中的右图表示的是一个RG，左图黑色填充的一个单元就是一个RG。右图横坐标表示符号，纵坐标表示子载波，其中横坐标示出了14个符号，纵坐标示出了12个子载波，每个单元格表示资源粒子，纵轴上12个RE构成一个RB。应该注意的是，在一些情况下RG也可以包括12个符号。图2中的右图第三列和第十列的横线阴影单元格被分配了解调参考信号数据，第一行的竖线阴影单元格被分配了相位跟踪参考信号数据，其他黑色填充的单元格被分配了物理下行共享信道负载数据。应该注意的是，右图示出的DMRS数据、PT-RS数据和PDSCH负载数据的位置和数量仅为示例，在RG中可以包含其他数目和位置的这些信号。然而，在预先确定了相关参数后，在一个RG中，DMRS信号、PT-RS信号的位置和数据都是确定的，PDSCH的负载数据的位置也是确定的，具体负载数据则是可变的。另外，本领域技术人员容易知晓的是，在一个时隙中的每个符号中，DMRS数据在每个RG里的位置是一样的，PT-RS数据按照预先配置间隔性地出现，例如，可能隔一个RG，也可能隔两个RG，等等。关于这些信号的更详细描述会在下文中涉及到。1.3. 交织映射与非交织映射在从虚拟资源块到物理资源块的映射中，存在交织映射和非交织映射两种映射方法。非交织映射是一种直接映射的方法，本文不做详细介绍。交织映射相对复杂，需要遵循以下原则：PDSCH内部可以存在PDSCH负载数据、DMRS数据、PT-RS数据三种类型的数据，其中DMRS数据和PT-RS数据不会有重叠，负载数据需要映射到剩余的VRB中；PDSCH在资源分配时，其包含的PRB范围可以与部分信道和信号占据的PRB和RE重合，但是PDSCH优先级较低，在映射时不可以映射到这些PRB和RE上，这些PRB和RE可以称为预留PRB和预留RE。遇到被预留的PRB或RE，负载数据会映射到下一个PRB或RE，DMRS和PT-RS数据会丢弃将映射到这个PRB和RE的数据；NR协议的交织方法给出的是部分带宽所包含的时频资源范围内所有PRB的交织映射。在BWP中由于交织前后都是同一个时频资源范围内的PRB，为了区分交织前后的PRB，本文提出了源PRB和目的PRB的概念，用于分别指代交织前后的PRB。VRB是由源PRB构成的虚拟连续资源，目的PRB是实际的PRB，预留PRB的位置也是指的目的PRB中的位置。由于映射是BWP中所有源PRB到目的PRB之间的映射，当目的PRB被预留时或者PDSCH没有使用全部BWP时，PDSCH可用的PRB变少，但这不影响每个源PRB到目的PRB之间的映射关系。也就是说，用于PDSCH的源PRB和目的PRB分别是对应BWP的源PRB和目的PRB的子集。另外，由于VRB是剩余的用于PDSCH的源PRB构成的，所以VRB相比于没有预留时会变少，且VRB到用于PDSCH的目的PRB之间的映射也会发生改变。另外，需要说明的是，由于存在以RE为单位的资源预留，所以这部分预留的RB从RE的角度来描述会更加准确，但是NR协议中并没有提出物理资源粒子和虚拟资源粒子的概念，所以本文部分段落中暂时还是从PRB和VRB的角度来描述。图3示出了对划定的BWP的时频资源范围内PRB进行交织前后的示意图。图3中的部分是交织前的BWP中的PRB，其中纵坐标表示公共资源块，横坐标是时隙，BWP是在横纵坐标上划定的一个矩形的范围，PDSCH是从BWP内部划分的一定范围，纵坐标不一定是从0开始的，图中BWP纵坐标的范围为0-30 RB，横坐标的范围为0-20时隙，这些仅为示例。在部分中，斜线填充的单元格表示分配给PDSCH的时频资源，竖线和横线填充的部分表示预留的其他信号和信道的数据。具体地，竖线填充的部分表示预留给同步广播块的时频资源，横线填充的部分表示预留给信道状态信息参考信号的时频资源。应该注意的是，部分中示出的各种信号的数量和位置仅为示例，本领域技术人员可以根据需要做出不同设置。图3中的部分是交织后的BWP中的PRB。可以看出，在划定的BWP中，交织会在整个BWP的范围内进行，会将整个BWP中的纵坐标进行交织。当PDSCH没有占满整个BWP中的PRB时，如图3的和部分中所示，可以出现交织后映射到其他位置的情况。例如，纵坐标上15-21 RB在交织前未分配给PDSCH，然而在交织后这些RB分配给了PDSCH。相对地，预留的SS/PBCH和CSI-RS在交织前后均指的是目的PRB中的位置。应该注意的是，和部分中示出的各种信号的数量和位置以及交织情况仅为示例，本领域技术人员可以根据需要做出不同设置。2. 用于PDSCH的数据处理方法每个RB内存在12个资源粒子，是数据映射的实际单元。下面的方法实施例中可以对PRB的每个RE分配索引。例如，在BWP所包含的RE范围内，从左下RE开始，以纵向优先的方式向右上RE依次分配索引。图4示出了一种实施例的用于PDSCH的数据处理方法，其可以包括以下步骤。步骤402：依据设定的映射方式产生PDSCH包含的范围的RE索引数组A，并且获得预留资源的索引数组C。在步骤402中，所述映射方式是NR协议中规定好的，不在本方法的讨论范围内，因此这里不作详述。此外，这里的索引数组A对应于上文提到的PDSCH的源PRB，以及数组C是被PDSCH预留的RE的索引构成的数组，对应于前文提到的预留PRB和RE。步骤404：判断是否进行交织操作。是否进行交织操作是根据外部输入的参数而定的，由使用者决定，这不在本方法的讨论范围内，这里不再赘述。步骤406：在有交织的情况下，在步骤405中对数组A使用交织公式，产生交织后的索引数组B，即PDSCH的源PRB到目的PRB的映射，在没有交织的情况下，则数组B等于数组A，从而在有或没有交织操作的情况下，最终均获得数组B，统一了处理流程。步骤408：将数组B中的存在于数组C中的索引值删除，以获得PDSCH可用的RE的索引数组I_PDSCH。这对应于前文中提到的VRB指向的目标PRB的映射。步骤410：产生DMRS数据、PT-RS数据及其各自对应的索引数组。在一些实施例中，为了产生DMRS数据，按照DMRS数据产生规则，针对每个符号，产生索引在该符号上的最小RE索引与max之间的DMRS数据，最终获得各个符号上的DMRS数据D_DMRS，并且获得与D_DMRS对应的RE索引数组I_DMRS。其中，max表示获得索引数组I_PDSCH在某个符号上的最大索引元素。获取到符号上最大的max索引，是为了产生DMRS数据。如本领域技术人员所知晓的，DMRS和PT-RS均是伪随机数据，不能跳跃性的产生数据，需要顺序产生。因此，为了产生后面的数据，即使中间有不需要的数据，也必须把中间的数据也全部生成。例如，假设索引数组I_PDSCH在某个符号上的RE索引元素为，则该符号上的最大的PDSCH索引元素为6，另外还假设该符号上的最小RE索引为1，因此针对该符号生成的DMRS数据序列为，对应的索引为。容易知道，索引数组中的索引均不属于索引数组I_PDSCH，但是按照DMRS数据产生规则，为了产生索引6对应的DMRS数据，仍必须产生索引对应的DMRS数据。在一些实施例中，对于针对每个符号产生的DMRS数据，仅保留索引在该符号上的min与max之间的DMRS数据及其对应的索引，以节省存储空间。其中，min表示获得索引数组I_PDSCH在某个符号上的最小索引元素。如上所述，DMRS数据是伪随机数据，针对每个符号产生的DMRS数据是从该符号上的最小RE索引开始直到max索引，然而实际需要的是索引在该符号上的min索引与max索引之间的DMRS数据，所以当min较大或者min和max都较大时，产生的不需要的DMRS数据会占用较大存储空间。因此，可以删去索引小于min的所生成的DMRS数据，以节省存储空间。例如，在上面的例子中，所需要的DMRS数据实际为，因此只需要保留数据及其对应的索引即可。应该注意的是，上述实施例中仅产生索引小于各个符号上的max索引的DMRS数据是为了减少不必要的计算量并且节省存储空间。然而，在一些实施例中，也可以按照预设DMRS数据产生规则，产生时隙内的所有符号上的全部DMRS数据作为D_DMRS，并且获得与D_DMRS对应的RE索引数组I_DMRS。这样同样可以实现本申请的用于PDSCH的数据处理方法，缺点是增加了计算和存储负荷。此外，本领域技术人员还容易想到产生DMRS数据的其他实施例。例如，针对每个符号分别连续产生DMRS数据，同时针对每个产生的DMRS数据分别确认其索引是否落在PDSCH可用的RE的索引数组I_PDSCH中，如果落在I_PDSCH中则保留该DMRS数据和其对应索引，否则删除。最终，只要可以获得索引落在PDSCH可用的RE的索引数组I_PDSCH中的全部DMRS数据并且获得其对应的RE索引即可。与产生DMRS数据类似，在一些实施例中，为了产生PT-RS数据，按照PT-RS数据产生规则，针对每个符号，产生索引在该符号上的最小RE索引与max之间的PT-RS数据，最终获得各个符号上的PT-RS数据D_PTRS，并且获得与D_PTRS对应的RE索引数组I_PTRS。产生PT-RS数据的规则和原因与产生DMRS数据时的类似，此处不再赘述。在一些实施例中，对于针对每个符号产生的PT-RS数据，仅保留索引在该符号上的min与max之间的PT-RS数据及其对应的索引，以节省存储空间。删去索引小于min的所生成的PT-RS数据的原因与上面DMRS数据的产生过程类似，此处不再赘述。在一些实施例中，由于按照NR协议规则，每个时隙中的各个符号上的PT-RS数据相同，因此可以只保存第一个包含PT-RS数据的符号上的PT-RS数据，然后在需要时按照第一个包含PT-RS数据的符号中的PT-RS数据，依据PT-RS数据产生规则，获得包含有PT-RS数据的各个符号上的PT-RS数据，最终获得D_PTRS及其对应的I_PTRS。例如，请返回参照图2，在右侧的RG中，第一行中的各个竖线阴影单元格表示PT-RS数据，而且各个单元格中的PT-RS数据均相同。因此，可以仅保存第一符号上的PT-RS数据，然后在需要使用时根据第一行、第一列上的PT-RS数据来获得第一行上其余各个单元格中的PT-RS数据。具体在哪些位置上产生单元格，可以根据预设的PT-RS数据产生规则来确定。在一些实施例中，由于时隙内的符号上的PT-RS数据采用时隙内第一个包含DMRS数据的符号上的DMRS数据来生成，因此不保存各个符号上的PT-RS数据，只保存相应的DMRS数据到PT-RS数据的映射，以用于获得所需的I_PTRS和D_PTRS。由此，可以进一步节省存储空间。具体地，请返回参见图2，在右侧的RG中，第一行各个竖线阴影单元格中的PT-RS数据都是由与其同一行上的第一个DMRS数据来生成的，即，根据第一行、第三列中的DMRS数据来生成的。“只保存相应的DMRS数据到PT-RS数据的映射”是指，只需要保存第一行、第三列中的DMRS数据的索引，根据该索引可以获得相应的DMRS数据，根据获得的DMRS数据可以产生相应的PT-RS数据。至于可以产生哪些位置的RE上的PT-RS数据，可以根据预设的PT-RS数据产生规则来确定。应该注意的是，上述实施例中仅产生索引小于各个符号上的max索引的PT-RS数据是为了减少不必要的计算量并且节省存储空间。然而，在一些实施例中，也可以按照预设PT-RS数据产生规则，产生时隙内的所有符号上的全部PT-RS数据作为D_PTRS，并且获得与D_PTRS对应的RE索引数组I_PTRS。这样同样可以实现本申请的用于PDSCH的数据处理方法。类似地，本领域技术人员还可以想到产生PT-RS数据的其他实施例。例如，针对每个符号分别连续产生PT-RS数据，针对每个产生的PT-RS数据分别确认其索引是否落在PDSCH可用的RE的索引数组I_PDSCH中，如果落在I_PDSCH中则保留该PT-RS数据和其对应索引，否则删除。最终，只要可以获得索引落在PDSCH可用的RE的索引数组I_PDSCH中的全部PT-RS数据并且获得其对应的RE索引即可。步骤412：获取落在PDSCH可用的RE的索引数组I_PDSCH中的DMRS和PT-RS的索引并且获得其对应的数据。具体地，在一些实施例中，将索引数组I_PDSCH和I_DMRS取交集，以获得DMRS在PDSCH可用的RE的索引数组I_PDSCH中的RE索引，记为I_DMRS'，并且获得对应的RE位置的DMRS数据，记为D_DMRS'；以及将索引数组I_PDSCH和I_PTRS取交集，以获得PT-RS在PDSCH可用的RE的索引数组I_PDSCH中的RE索引，记为I_PTRS'，并且获得对应的RE位置的PT-RS数据，记为D_PTRS'。步骤414：从PDSCH可用的RE的索引数组中删除DMRS和PT-RS的索引，以获得PDSCH的负载的索引。具体地，从索引数组I_PDSCH中删除数组I_DMRS'和I_PTRS'中的索引元素，以获得索引数组I_PDSCH'，这是PDSCH的负载数据的RE索引。步骤416：按照负载索引的长度获得PDSCH负载数据。在一些实施例中，在获得PDSCH负载数据的索引之后，可以确定这一时隙内能够承载的PDSCH负载数据的长度为len，其中len表示获得索引数组I_PDSCH'的长度。然后，使用之前保存的随机数种子pn_init，按照协议产生伪随机噪声序列，并通过加扰、调制、层映射和天线端口映射，最后得到数据长度为len的PDSCH负载数据D_PDSCH，并保存新的pn_init，用于保证后续生成的PDSCH数据的连续性。特别指出，PDSCH负载数据的原始数据源是从上层传输得到。还要指出的是，关于负载数据的更具体内容不是本申请的重点，为了避免这些内容可能使本申请的重点模糊不清，本申请省略了这些内容的更具体描述。步骤418：将PDSCH负载数据、DMRS数据和PT-RS数据分别映射到其各自索引对应的RE上。在一些实施例中，将PDSCH负载数据D_PDSCH顺序映射到索引数组I_PDSCH'中各个索引对应的RE上，将DMRS数据D_DMRS'顺序映射到索引数组I_DMRS'中各个索引对应的RE上，以及将PT-RS数据D_PTRS'顺序映射到索引数组I_PTRS'中各个索引对应的RE上。步骤420：判断数据是否生成完毕，如果本帧中还存在未生成的数据，则跳转到开始步骤以生成新的一个时隙的数据，以及如果还需要生成下一帧的数据，则跳转到开始步骤以生成下一帧的数据。在以上实施例中，采用了符合NR协议规则的正向的交织与映射方式，其中，将分配给PDSCH的所有RE的索引交织后得到对应的RE索引，并且在指派数据时避免掉预留资源的RE索引，从而不需要额外的“解交织器”单元。另外，通过上述实施例，引入了与数据对应的RE索引数组，从而消除了由于其他信道/信号预留导致VRB映射完全变化造成的影响，并且合并了不同映射类型、有无交织的处理流程。图5示出了一种实施例的用于PDSCH的数据处理方法，其包括以下步骤。步骤502：获取PDSCH的数据将映射到的目标RE的索引数组。步骤504：从目标RE索引数组中排除PDSCH不可用的RE的索引，以获得PDSCH的可用RE索引数组，其中，PDSCH不可用的RE可以指预留给其他信道和/或信号的RE，例如，预留给同步广播块和/或信道状态信息参考信号的RE，等等。步骤506：从可用RE索引数组中确定用于DMRS的第一RE索引数组并且获得第一RE索引数组对应的DMRS数据。步骤508：从可用RE索引数组中确定用于PT-RS的第二RE索引数组并且获得第二RE索引数组对应的PT-RS数据。步骤510：从可用RE索引数组中排除第一RE索引数组中的索引元素和第二RE索引数组中的索引元素，以获得用于PDSCH的负载数据的第三RE索引数组。步骤512：基于第三RE索引数组中的元素个数，获得PDSCH的负载数据。步骤514：将DMRS数据、PT-RS数据和负载数据分别顺序地映射到第一RE索引数组、第二RE索引数组和第三RE索引数组中的索引元素对应的RE。在一些实施例中，获取PDSCH的数据将映射到的目标RE的索引数组，包括：获取初始RE索引数组，其中，初始RE索引数组是由时隙内的分配给PDSCH的所有RE的索引顺序地构成的数组；由初始RE索引数组获取目标RE索引数组，其中，在不需要交织操作的情况下，目标RE索引数组等同于初始RE索引数组，在需要交织操作的情况下，目标RE索引数组通过使用预设交织公式对初始RE索引数组进行交织操作而获得。其中，是否进行交织可以由本领域普通技术人员根据具体情况使用预设参数来决定，以及预设交织公式可以来自于3GPPTS38.211 7.3.1.6，这些均在本申请讨论的范围外，此处不再赘述。在一些实施例中，PDSCH的可用RE占据了N个符号，N为正整数并且小于或等于时隙内的总符号数；从可用RE索引数组中确定用于DMRS的第一RE索引数组并且获得第一RE索引数组对应的DMRS数据，可以包括：针对N个符号中的每个符号，按照预设DMRS数据产生规则连续生成索引在该符号上的最小RE索引与该符号上的最大可用RE索引之间的第一DMRS数据，并且获得第一DMRS数据对应的RE索引；将N个符号中的各个符号上的第一DMRS数据对应的RE索引进行组合，以获得全部N个符号上的DMRS数据对应的第四RE索引数组；将可用RE索引数组和第四RE索引数组取交集以获得第一RE索引数组，并且获得第一RE索引数组对应的DMRS数据。其中，所述该符号上的最大可用RE索引可以指可用RE索引数组在该符号上的最大RE索引。如本领域技术人员所知晓的，一个时隙可以包括12或14个符号，这可以根据预先设置来确定。假设时隙中存在14个符号，本领域技术人员可以将其中N个符号分配用于PDSCH，N小于或等于14。另外，类似于符号，本领域技术人员也可以指定将哪些时隙和RB分配用于PDSCH。在一些实施例中，在将N个符号中的各个符号上的第一DMRS数据对应的RE索引进行组合的步骤之前，方法还可以包括：从针对N个符号中的每个符号所生成的第一DMRS数据中，删除索引小于该符号上的最小可用RE索引的DMRS数据，从而保留索引在该符号上的最小可用RE索引与最大可用RE索引之间的第一DMRS数据和所保留的第一DMRS数据对应的RE索引。其中，所述该符号上的最小可用RE索引可以指可用RE索引数组在该符号上的最小RE索引。如上所述，所产生的索引小于各个符号上的最小可用RE索引的DMRS数据可以是非必需的，因此，可以删除这些数据以节省存储空间。此外，如本领域技术人员所知晓的，在以上实施例中仅产生了索引小于各个符号上的最大可用RE索引的DMRS数据，以便节省计算量和存储空间，然而也可以生成索引大于各个符号上的最大可用RE索引的DMRS数据，最终，只要可以获得索引落在PDSCH可用的RE的索引数组I_PDSCH中的全部DMRS数据及其对应的RE索引即可。在一些实施例中，PDSCH的可用RE可以占据了N个符号，N为正整数并且小于或等于时隙内的总符号数；N个符号中的M个符号上可以存在PT-RS数据，其中M为整数并且0≤M≤N；从可用RE索引数组中确定用于PT-RS的第二RE索引数组并且获得第二RE索引数组对应的PT-RS数据，包括：针对M个符号中的任一符号，按照预设PT-RS数据产生规则连续生成索引在该符号上的最小RE索引与该符号上的最大可用RE索引之间的第一PT-RS数据，并且获得第一PT-RS数据对应的RE索引；针对其余M-1个符号中的每个符号复制该任一符号上的第一PT-RS数据，以获得M个符号中的每个符号上的第一PT-RS数据并且获得第一PT-RS数据对应的RE索引；将M个符号中的各个符号上的第一PT-RS数据对应的RE索引进行组合，以获得全部M个符号上的PT-RS数据对应的第五RE索引数组；将可用RE索引数组和第五RE索引数组取交集以获得第二RE索引数组，并且获得第二RE索引数组对应的PT-RS数据。其中，所述该符号上的最大可用RE索引可以指可用RE索引数组在该符号上的最大RE索引。如上所述，N小于或等于时隙内的总符号数。进一步地，在分配给PDSCH的N个符号中，根据预先的设置，可以存在M个符号中存在PT-RS数据，M小于或等于N。如本领域技术人员所知晓的，根据预先设置，某个时隙内也可以不存在PT-RS数据，因此M可以为0。如本领域技术人员所知晓的，一个时隙内的RG中的各个符号上的PT-RS数据一致，因此为了节省存储空间，可以先产生M个符号中的任一符号上的PT-RS数据并且保存，然后在需要时，将所产生的该任一符号上的PT-RS数据进行复制，以获得全部M个符号上的PT-RS数据并且获得其对应的索引。在一些实施例中，在针对其余M-1个符号中的每个符号复制任一符号上的第一PT-RS数据的步骤之前，方法还可以包括：从针对M个符号中的任一符号所生成的第一PT-RS数据中，删除索引小于该符号上的最小可用RE索引的PT-RS数据，从而保留索引在该符号上的最小可用RE索引与最大可用RE索引之间的第一PT-RS数据和所保留的第一PT-RS数据对应的RE索引。其中，所述该符号上的最小可用RE索引可以指可用RE索引数组在该符号上的最小RE索引。类似于DMRS数据，所产生的索引小于符号上的最小可用RE索引的PT-RS数据可以是非必需的，因此，可以删除这些数据以节省存储空间。在一些实施例中，在针对其余M-1个符号中的每个符号复制任一符号上的第一PT-RS数据的步骤之前，方法还可以包括：仅存储该任一符号上的第一PT-RS数据和第一PT-RS数据对应的RE索引，其中，所存储的第一PT-RS数据和第一PT-RS数据对应的RE索引可以用于在需要时被读取以实现复制操作，从而获得其余M-1个符号中的每个符号上的第一PT-RS数据和第一PT-RS数据对应的RE索引。通过仅存储M个符号中的某一符号上的PT-RS数据和相应的RE索引，可以节省存储空间，但是在需要使用时，必须先进行复制操作，然后才能获得全部M个符号上的PT-RS数据和对应的RE索引，需要花费一定时间。相对地，也可以在进行复制操作之后，存储所获得的M个符号上的全部PT-RS数据和相应RE索引，以在需要时直接读取和使用，从而节省了运算时间，但是需要消耗较多存储空间。在一些实施例中，PDSCH的可用RE占据了N个符号，N为正整数并且小于或等于时隙内的总符号数；N个符号中的M个符号上存在PT-RS数据，其中M为整数并且0≤M≤N；从可用RE索引数组中确定用于PT-RS的第二RE索引数组并且获得第二RE索引数组对应的PT-RS数据，可以包括：获取N个符号中的按照符号顺序首次出现DMRS数据的符号中的、与PT-RS数据在同一子载波上的DMRS数据的RE索引，根据与所获取的RE索引对应的DMRS数据和预设PT-RS数据产生规则，针对M个符号中的任一符号生成索引在该符号上的最小可用RE索引与最大可用RE索引之间的第一PT-RS数据，并且获得第一PT-RS数据对应的RE索引；针对其余M-1个符号中的每个符号，复制任一符号上的第一PT-RS数据，以获得M个符号中的每个符号上的第一PT-RS数据并且获得第一PT-RS数据对应的RE索引；将M个符号中的各个符号上的第一PT-RS数据对应的RE索引进行组合，以获得全部M个符号上的PT-RS数据对应的第六RE索引数组；将可用RE索引数组和第六RE索引数组取交集以获得第二RE索引数组，并且获得第二RE索引数组对应的PT-RS数据。如本领域技术人员所知晓的，在一个时隙内的RG中，各个符号上的PT-RS数据一致，而且根据首次出现有DMRS数据的符号上的与PT-RS数据在同一子载波上的DMRS数据，可以获得对应的PT-RS数据。例如，返回参照图2，右边部分RG中第一行各个RE单元中的PT-RS数据相同，而且根据首次出现了DMRS数据的第三个符号上的第一个子载波上的DMRS数据，可以获得第一行中的各个RE的PT-RS数据。因此，可以仅保存第三列、第一行中DMRS数据的索引。然后，在需要时，可以根据所保存的索引获得对应的DMRS数据，并且根据该DMRS数据可以还原得到相应的PT-RS数据。通过这种方式获得PT-RS数据，可以省去按照预设PT-RS数据产生规则直接生成PT-RS数据，并且由于仅保存相关DMRS数据的索引，可以进一步节省存储空间，但是在需要使用PT-RS数据时，则需要花费一定计算时间，并且需要承受一定的计算复杂度。例如，根据上述所保存的第三列、第一行中DMRS数据的RE索引，可以获取相应的DMRS数据，并且据此可以获取当前RG中的相应的PT-RS数据，即第一行中的PT-RS数据。另外，假设预先配置的PT-RS数据的RB分布间隔是4，那么每隔4个RB，会存在一个PT-RS数据，根据所保存的RE索引，每次累加4×12可以获得相应RG中的RE索引，然后判断该RE索引是否存在于当前符号上的最小可用RE索引与最大可用RE索引之间，当属于当前符号上的最小可用RE索引与最大可用RE索引之间时，根据RE索引获取该相应RG中的DMRS数据，并且据此相应地获取相应RG中的PT-RS数据。在一些实施例中，可以通过基站来执行一些实施例中的用于PDSCH的数据处理方法，以实现下行数据传输。应该注意的是，以上方法实施例中描述的各步骤或者动作也可以按照本领域技术人员所能显而易见的方式进行顺序调换或调整。例如，本领域技术人员可以从PDSCH的可用RE索引数组中先确定用于PT-RS的第二RE索引数组，然后再确定用于DMRS的第一RE索引数组。因此，说明书和附图中的各种顺序只是为了清楚描述某一个实施例，并不意味着是必须的顺序，除非另有说明其中某个顺序是必须遵循的。通过以上实施例，实现了正向的交织与映射方式，避免了对“解交织器”单元的使用。另外，通过以上实施例，引入了与数据对应的RE索引数组，从而消除了由于其他信道/信号预留导致VRB映射完全变化造成的影响，并且合并了不同映射类型、有无交织的处理流程。图6示出了一种实施例的用于实现PDSCH的数据处理方法的装置600的示意图。装置600包括处理器602和存储器604。存储器604用于存储程序，处理器602用于执行该程序，以实现任一实施例中所述的用于PDSCH的数据处理方法。本领域技术人员可以理解，上述实施方式中各种方法的全部或部分功能可以通过硬件的方式实现，也可以通过计算机程序的方式实现。当上述实施方式中全部或部分功能通过计算机程序的方式实现时，该程序可以存储于一计算机可读存储介质中，存储介质可以包括：只读存储器、随机存储器、磁盘、光盘、硬盘等，通过计算机执行该程序以实现上述功能。例如，将程序存储在设备的存储器中，当通过处理器执行存储器中程序，即可实现上述全部或部分功能。另外，当上述实施方式中全部或部分功能通过计算机程序的方式实现时，该程序也可以存储在服务器、另一计算机、磁盘、光盘、闪存盘或移动硬盘等存储介质中，通过下载或复制保存到本地设备的存储器中，或对本地设备的系统进行版本更新，当通过处理器执行存储器中的程序时，即可实现上述实施方式中全部或部分功能。以上应用了具体实施例对本发明进行阐述，只是用于帮助理解本发明，并不用以限制本发明。对于本发明所属技术领域的技术人员，依据本发明的思想，还可以做出若干简单推演、变形或替换。
