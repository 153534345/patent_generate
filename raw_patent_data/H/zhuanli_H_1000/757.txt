标题title
基于内部储能系统的安全访问方法及系统、设备及介质
摘要abst
本发明提供了一种基于内部储能系统的安全访问方法及系统、设备及介质，涉及储能系统技术领域，方法包括：接收用户的访问请求信息，将访问请求信息存入用户信息数据库；自动获取当前时间，将该当前时间向后推迟设定时间后生成时间戳，根据所述访问请求信息和所述时间戳生成密钥信息，将所述密钥信息存入密钥数据库并生成缓存数据；通过内部储能系统获取所述密钥信息，并进行解析，通过解析密钥匹配用户信息，使用户可以免登录进行访问，提升系统管理安全性，本发明解决了用户通过公网访问自己的储能系统的安全性问题，使自己的系统更加安全的暴露在公网，同时解决了用户现场运维困难的问题，使用户可以随时随地管理内网设备，维护更加便捷。
权利要求书clms
1.一种基于内部储能系统的安全访问方法，其特征在于，包括：接收用户的访问请求信息，将所述访问请求信息存入用户信息数据库；其中，所述访问请求信息包括储能设备编号和内部储能系统的网络IP地址，以及该用户的身份信息；自动获取当前时间，将该当前时间向后推迟设定时间后生成时间戳，根据所述访问请求信息和所述时间戳生成密钥信息，将所述密钥信息存入密钥数据库并生成缓存数据，同时设置该缓存数据的有效期；通过内部储能系统获取所述密钥信息，并对所述密钥信息进行解析，获得解析后的访问信息，将所述解析后的访问信息中的时间戳与当前时间进行匹配，校验该密钥信息的时间是否过期；若校验该密钥信息未过期，则根据所述解析后的访问信息中的储能设备编号信息在所述用户信息数据库中进行查询，将所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址进行匹配，若匹配成功，则向该用户打开访问权限。2.根据权利要求1所述的基于内部储能系统的安全访问方法，其特征在于，将所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址进行匹配，还包括：若匹配成功，则在所述密钥数据库中查询该密钥信息对应的单日已访问次数是否达到预设的单日可访问总次数，以及单日已访问时长是否达到预设的单日最长访问时长，若否，则向该用户打开访问权限。3.根据权利要求2所述的基于内部储能系统的安全访问方法，其特征在于，还包括：向该用户打开访问权限后开始计时，记录本次访问的访问时长，以及当前访问次数，并将本次访问时长和当前访问次数同步更新至所述密钥数据库。4.根据权利要求2所述的基于内部储能系统的安全访问方法，其特征在于，还包括：将所述解析后的访问信息中的时间戳与当前时间进行匹配，校验该密钥信息的时间是否过期，若校验该密钥信息已过期，则拒绝访问，同时在所述密钥数据库中将该密钥的失效原因更新为过期，并提示该用户重新生成密钥信息；若所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址匹配不成功，判断为该密钥信息已失效，则拒绝访问；在所述密钥数据库中查询，若该密钥信息对应的单日已访问次数已达到预设的单日可访问总次数，或者，单日已访问时长已达到预设的单日可访问总时长，判断为该密钥信息已失效，则拒绝访问，同时在所述密钥数据库中将该密钥的失效原因更新为时长不足或次数不足。5.根据权利要求2所述的基于内部储能系统的安全访问方法，其特征在于，还包括：设置该缓存数据的最长有效期为t分钟，当所述缓存数据的有效期少于5分钟时，则统计该用户在t-5分钟内的访问次数n，将所述缓存数据的有效期增加n*分钟；其中，t＞5。6.根据权利要求4所述的基于内部储能系统的安全访问方法，其特征在于，还包括：若判断为所述密钥信息已失效，且失效原因为时长不足或次数不足，则提示该用户在间隔24小时或第二天的零点后重新生成密钥信息；若该用户在间隔24小时或第二天的零点后，根据所述访问请求信息和新的时间戳重新生成密钥信息，对重新生成的密钥信息进行解析；根据解析后的访问信息中的储能设备编号信息在所述密钥数据库中进行查询，若与所述储能设备编号信息对应的前一次已失效的密钥信息的失效原因为次数不足，则将本次所述预设的单日可访问总次数增加至该用户总访问次数的1.5倍；若与所述储能设备编号信息对应的前一次已失效的密钥信息的失效原因为时长不足，则将本次所述预设的单日最长访问时长增加至该用户总访问时长的1.5倍。7.根据权利要求1所述的基于内部储能系统的安全访问方法，其特征在于，通过AES加密算法生成所述密钥信息，通过AES解密算法对所述密钥信息进行解析。8.一种基于内部储能系统的安全访问系统，其特征在于，包括：信息输入模块，用于接收用户的访问请求信息，将所述访问请求信息存入用户信息数据库；其中，所述访问请求信息包括储能设备编号和内部储能系统的网络IP地址，以及该用户的身份信息；网络密钥自动生成模块，用于自动获取当前时间，将该当前时间向后推迟设定时间后生成时间戳，根据所述访问请求信息和所述时间戳生成密钥信息，将所述密钥信息存入密钥数据库并生成缓存数据，同时设置该缓存数据的有效期；密钥解析模块，用于通过内部储能系统获取所述密钥信息，并对所述密钥信息进行解析，获得解析后的访问信息；安全限制模块，用于将所述解析后的访问信息中的时间戳与当前时间进行匹配，校验该密钥信息的时间是否过期；若校验该密钥信息未过期，则根据所述解析后的访问信息中的储能设备编号信息在所述用户信息数据库中进行查询，将所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址进行匹配，若匹配成功，则向该用户打开访问权限。9.一种计算机设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至7中任一项所述的基于内部储能系统的安全访问方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有执行权利要求1至7中任一项所述的基于内部储能系统的安全访问方法的计算机程序。
说明书desc
技术领域本发明涉及储能系统技术领域，具体涉及一种基于内部储能系统的安全访问方法及系统、设备及介质。背景技术储能系统是指由能量转换系统、电池管理系统等一次储能设备、为储能系统提供通信服务的储能管理单元，对储能系统进行全方位管理的能量管理系统等储能相关的设备及软件构成的系统。储能系统的安全性是确保系统在运行过程中能够正常、稳定地提供所需能量的重要保障。通过全面监测和管理储能系统，加强风险控制措施的采取，以及针对关键技术的研究和创新，可以提高储能系统的安全性，降低事故风险，并优化系统的经济效益。目前，对于内部储能系统的运维需靠运维人员进行现场查看操作，公网访问安全性靠vpn技术支撑。在真实场景中存在两个困难，一是运维人员对系统的管理困难，需现场解决问题；二是通过vpn公网访问的不安全性，给运维人员及技术人员带来很大的困难。发明内容有鉴于此，本申请实施例提供一种基于内部储能系统的安全访问方法，以达到提高内部储能系统管理便捷性及安全性的目的。本申请实施例提供以下技术方案：一种基于内部储能系统的安全访问方法，包括：接收用户的访问请求信息，将所述访问请求信息存入用户信息数据库；其中，所述访问请求信息包括储能设备编号和内部储能系统的网络IP地址，以及该用户的身份信息；自动获取当前时间，将该当前时间向后推迟设定时间后生成时间戳，根据所述访问请求信息和所述时间戳生成密钥信息，将所述密钥信息存入密钥数据库并生成缓存数据，同时设置该缓存数据的有效期；通过内部储能系统获取所述密钥信息，并对所述密钥信息进行解析，获得解析后的访问信息，将所述解析后的访问信息中的时间戳与当前时间进行匹配，校验该密钥信息的时间是否过期；若校验该密钥信息未过期，则根据所述解析后的访问信息中的储能设备编号信息在所述用户信息数据库中进行查询，将所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址进行匹配，若匹配成功，则向该用户打开访问权限。根据本申请一种实施例，将所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址进行匹配，还包括：若匹配成功，则在所述密钥数据库中查询该密钥信息对应的单日已访问次数是否达到预设的单日可访问总次数，以及单日已访问时长是否达到预设的单日最长访问时长，若否，则向该用户打开访问权限。根据本申请一种实施例，还包括：向该用户打开访问权限后开始计时，记录本次访问的访问时长，以及当前访问次数，并将本次访问时长和当前访问次数同步更新至所述密钥数据库。根据本申请一种实施例，还包括：将所述解析后的访问信息中的时间戳与当前时间进行匹配，校验该密钥信息的时间是否过期，若校验该密钥信息已过期，则拒绝访问，同时在所述密钥数据库中将该密钥的失效原因更新为过期，并提示该用户重新生成密钥信息；若所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址匹配不成功，判断为该密钥信息已失效，则拒绝访问；在所述密钥数据库中查询，若该密钥信息对应的单日已访问次数已达到预设的单日可访问总次数，或者，单日已访问时长已达到预设的单日可访问总时长，判断为该密钥信息已失效，则拒绝访问，同时在所述密钥数据库中将该密钥的失效原因更新为时长不足或次数不足。根据本申请一种实施例，还包括：设置该缓存数据的最长有效期为t分钟，当所述缓存数据的有效期少于5分钟时，则统计该用户在t-5分钟内的访问次数n，将所述缓存数据的有效期增加n*分钟；其中，t＞5。根据本申请一种实施例，还包括：若判断为所述密钥信息已失效，且失效原因为时长不足或次数不足，则提示该用户在间隔24小时或第二天的零点后重新生成密钥信息；若该用户在间隔24小时或第二天的零点后，根据所述访问请求信息和新的时间戳重新生成密钥信息，对重新生成的密钥信息进行解析；根据解析后的访问信息中的储能设备编号信息在所述密钥数据库中进行查询，若与所述储能设备编号信息对应的前一次已失效的密钥信息的失效原因为次数不足，则将本次所述预设的单日可访问总次数增加至该用户总访问次数的1.5倍；若与所述储能设备编号信息对应的前一次已失效的密钥信息的失效原因为时长不足，则将本次所述预设的单日最长访问时长增加至该用户总访问时长的1.5倍。根据本申请一种实施例，通过AES加密算法生成所述密钥信息，通过AES解密算法对所述密钥信息进行解析。本申请还提供一种基于内部储能系统的安全访问系统，包括：信息输入模块，用于接收用户的访问请求信息，将所述访问请求信息存入用户信息数据库；其中，所述访问请求信息包括储能设备编号和内部储能系统的网络IP地址，以及该用户的身份信息；网络密钥自动生成模块，用于自动获取当前时间，将该当前时间向后推迟设定时间后生成时间戳，根据所述访问请求信息和所述时间戳生成密钥信息，将所述密钥信息存入密钥数据库并生成缓存数据，同时设置该缓存数据的有效期；密钥解析模块，用于通过内部储能系统获取所述密钥信息，并对所述密钥信息进行解析，获得解析后的访问信息；安全限制模块，用于将所述解析后的访问信息中的时间戳与当前时间进行匹配，校验该密钥信息的时间是否过期；若校验该密钥信息未过期，则根据所述解析后的访问信息中的储能设备编号信息在所述用户信息数据库中进行查询，将所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址进行匹配，若匹配成功，则向该用户打开访问权限。本申请还提供一种计算机设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述的基于内部储能系统的安全访问方法。本申请还提供一种计算机可读存储介质，所述计算机可读存储介质存储有执行上述的基于内部储能系统的安全访问方法的计算机程序。与现有技术相比，本说明书实施例采用的上述至少一个技术方案能够达到的有益效果至少包括：本发明实施例中，用户从公网侧访问内部储能系统可通过输入设备信息、IP地址信息、将当前时间向后推迟设定时间后生成的时间戳自动生成密钥信息，通过解密密钥匹配用户信息，使用户可以免登录进行访问，提升系统管理安全性，解决了用户通过公网访问自己的储能系统的安全性问题，使自己的系统更加安全的暴露在公网，并且，同时解决了用户现场运维困难的问题，使用户可以随时随地管理内网设备，维护更加便捷。附图说明为了更清楚地说明本申请实施例的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它的附图。图1是本发明第一实施例的基于内部储能系统的安全访问方法流程示意图；图2是本发明第二实施例的基于内部储能系统的安全访问方法流程示意图；图3是本发明实施例的基于内部储能系统的安全访问系统结构示意图；图4是本发明计算机设备的结构示意图。具体实施方式下面结合附图对本申请实施例进行详细描述。以下通过特定的具体实例说明本申请的实施方式，本领域技术人员可由本说明书所揭露的内容轻易地了解本申请的其他优点与功效。显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。本申请还可以通过另外不同的具体实施方式加以实施或应用，本说明书中的各项细节也可以基于不同观点与应用，在没有背离本申请的精神下进行各种修饰或改变。需说明的是，在不冲突的情况下，以下实施例及实施例中的特征可以相互组合。基于本申请中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。如图1所示，本发明实施例提供了一种基于内部储能系统的安全访问方法，包括：S101.接收用户的访问请求信息，将所述访问请求信息存入用户信息数据库；其中，所述访问请求信息包括储能设备编号和内部储能系统的网络IP地址，以及该用户的身份信息。具体实施时，步骤S101中，将用户输入的所述访问请求信息存入用户信息数据库，用户信息数据库中包括储能设备编号、内部储能系统的网络IP地址，以及该用户的身份信息等基本信息。S102.自动获取当前时间，将该当前时间向后推迟设定时间后生成时间戳，根据所述访问请求信息和所述时间戳生成密钥信息，将所述密钥信息存入密钥数据库并生成缓存数据，同时设置该缓存数据的有效期；具体实施时，根据用户输入的储能设备编号、内部储能系统的网络IP及将自动获取的当前时间向后推迟设定时间后生成的时间戳，根据AES加密算法加密生成密钥。将生成的网络密钥存入密钥数据库并生成缓存数据。密钥数据库包括储能设备编号、密钥、密钥失效原因、单日已访问次数、单日已访问时长，单日可访问总次数、单日可访问总时长等数据。由于密钥数据库的存储量大，频繁查询密钥数据库是非常耗时的，因此生成缓存数据，减小查询密钥数据库的操作，进而提高查询速度。另外，设置该缓存数据的有效期，其目的是为了使该缓存数据可以在一定时间内进行更新，同步密钥数据库的最新数据。如储能设备编号、内部储能系统的网络IP、时间戳，根据AES加密算法加密生成密钥，密钥为一串字符串。将生成的网络密钥存入密钥数据库并生成缓存数据。密钥数据库包括储能设备编号、密钥、密钥失效原因、单日已访问次数、单日已访问时长，单日可访问总次数、单日可访问总时长等数据。其中，本实施例优选的，将当前时间向后推迟至当天24点前之间时间间隔为所述设定时间，如上述时间间隔不足4小时则推迟至次日24点前，以生成所述时间戳。S103.通过内部储能系统获取所述密钥信息，并对所述密钥信息进行解析，获得解析后的访问信息，将所述解析后的访问信息中的时间戳与当前时间进行匹配，校验该密钥信息的时间是否过期。具体实施时，用户拿到密钥及储能设备编号并通过公网IP访问内网储能系统。系统通过AES解密算法解密密钥，获取储能设备编号、内部储能系统的网络IP、时间戳，校验该密钥信息的时间是否过期，若校验该密钥信息已过期，则拒绝访问，同时在所述密钥数据库中将该密钥的失效原因更新为过期，并提示该用户重新生成密钥信息。其中，若该密钥信息由于过期导致失效，用户重新生成密钥信息时，根据访问请求信息和重新生成的新的时间戳，生成新的密钥信息，该新的密钥信息与已失效的原密钥信息仅是时间信息不同，其他的用户信息是一致的，且该用户信息对应的单日已访问时长、单日已访问次数等历史信息均是在密钥数据库中累计的，不会因为重新生成密钥而丢失。S104.若校验该密钥信息未过期，则根据所述解析后的访问信息中的储能设备编号信息在所述用户信息数据库中进行查询，将所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址进行匹配，若匹配成功，则向该用户打开访问权限。具体实施时，将所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址进行匹配，保证密钥中所携带的IP地址信息是最新的，若匹配不成功，判断为该密钥信息已失效，则拒绝访问。本发明实施例中，用户从公网侧访问内部储能系统可通过输入设备编号信息、要访问的内部储能系统的网络IP地址信息、将当前时间向后推迟设定时间后生成的时间戳，自动生成密钥信息，通过解密密钥匹配用户信息，使用户可以免登录进行访问，提升系统管理安全性。本实施例先对密钥的有效期进行验证，判断密钥是否有效再决定是否查询数据库匹配用户信息，如果密钥不在有效期内就不再进行查询数据库的操作。密钥验证通过后，再匹配用户信息，目的是保证用户访问的时候密钥带来的信息与用户信息数据库保持一致，如果密钥在有效期内，而用户信息修改的话，同样是不可以进行访问的，双重保障，更加安全。本发明实施例解决了用户通过公网访问自己的储能系统的安全性问题，使自己的系统更加安全的暴露在公网，并且，同时解决了用户现场运维困难的问题，使用户可以随时随地管理内网设备，维护更加便捷。为了进一步提升访问安全性，通过解密出的时间限制用户访问时长及访问次数，保证用户密钥在未知状况泄露时被长期使用的风险，增加安全性，如图2所示，在一种实施例，将所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址进行匹配，还包括：若匹配成功，则在所述密钥数据库中查询该密钥信息对应的单日已访问次数是否达到预设的单日可访问总次数，以及单日已访问时长是否达到预设的单日可访问总时长，若否，则向该用户打开访问权限。本实施例中，在所述密钥数据库中查询，若该密钥信息对应的单日已访问次数已达到预设的单日可访问总次数，或者，单日总访问时长已达到预设的单日可访问总时长，判断为该密钥信息已失效，则拒绝访问，同时在所述密钥数据库中将该密钥的失效原因更新为时长不足或次数不足。本发明实施例还包括，向该用户打开访问权限后开始计时，记录本次访问的访问时长，以及当前访问次数，并将本次访问时长和当前访问次数同步更新至所述密钥数据库。具体实施时，检查该密钥的单日已访问时长及单日已访问次数是否有先达到的，如有一个达成则拒绝访问，并更新密钥数据库中的密钥失效原因为时长不足或次数不足，如都未达到限制则允许访问。设置单日可访问总次数为N，单日已访问次数为n1，单日可访问总时长为T，单日已访问时长为t1；当n1＜N并且t1＜T时，密钥有效，用户可以进行访问，根据时间信息开始计时t2，当访问结束时结束计时t3，访问时长为，更新当前t1和当前n1，当前t1=前一次t1+/＞，当前n1=前一次n1+1。其中N、n1均为正整数。在一种实施例中，设置该缓存数据的最长有效期为t分钟，当所述缓存数据的有效期少于5分钟时，则统计该用户在t-5分钟内的访问次数n，将所述缓存数据的有效期增加n*分钟，但最长不超过120分钟；根据用户使用习惯动态计算增加缓存有效期，使用户访问速度更快，提升用户体验，其中，t＞5。其中，优选的t、n均为正整数。具体实施时，由于缓存数据可快速读取并匹配密钥数据库信息，如密钥失效则删除原缓存数据并生成新缓存数据。例如，设置缓存数据的最长有效期默认为60分钟，当有效期不足5分钟时，则判断用户前55分钟内访问次数，并根据访问次数及用户无更改信息操作，将缓存数据的有效期时长增加“55分钟内访问次数*30分钟”，后续增加缓存数据的有效期同理判断上次失效截至新到期时间前5分钟的访问次数并乘以30分钟。在一种实施例中，若判断为所述密钥信息已失效，且失效原因为时长不足或次数不足，则提示该用户在间隔24小时或第二天的零点后重新生成密钥信息；若该用户在间隔24小时或第二天的零点后，根据所述访问请求信息和新的时间戳重新生成密钥信息，对重新生成的密钥信息进行解析；根据解析后的访问信息中的储能设备编号信息在所述密钥数据库中进行查询，若与所述储能设备编号信息对应的前一次已失效的密钥信息的失效原因为次数不足，则将本次所述预设的单日可访问总次数增加至该用户总访问次数的1.5倍，其中，本次所述预设的单日可访问总次数按四舍五入取整；若与所述储能设备编号信息对应的前一次已失效的密钥信息的失效原因为时长不足，则将本次所述预设的单日可访问总时长增加至该用户总访问时长的1.5倍，但最长不超过密钥时间戳。具体实施时，当单日已访问次数n1大于等于单日可访问总次数N或者单日已访问时长t1大于等于单日可访问总时长T时，密钥失效，并记录该密钥失效原因，判定当前不能访问内部储能系统，需间隔24小时或第二天的零点后，可根据用户储能设备编号、储能系统的网络IP及将当前时间向后推迟设定时间生成的新的时间戳，使用AES加密算法重新生成密钥；解析密钥后进行失效原因匹配，如果匹配到上次密钥失效原因为访问次数已达限制，则根据用户的总访问次数，增加预设的单日可访问总次数为用户总访问次数*1.5次，如果匹配到上次密钥失效原因为访问时长已达限制，则根据总访问时长，增加预设的单日可访问总时长为用户总访问时长*1.5小时。同样根据用户使用习惯动态更新密钥有效期，减少用户因密钥过期而频繁手动操作的不便性。如图3所示，本申请还提供一种基于内部储能系统的安全访问系统200，本系统分为信息输入模块201、网络密钥自动生成模块202、密钥解析模块203、安全限制模块204。各模块的主要功能与实现如下：信息输入模块201，用于接收用户的访问请求信息，将所述访问请求信息存入用户信息数据库；其中，所述访问请求信息包括储能设备编号和内部储能系统的网络IP地址，以及该用户的身份信息；网络密钥自动生成模块202，用于自动获取当前时间，将该当前时间向后推迟设定时间后生成时间戳，根据所述访问请求信息和所述时间戳生成密钥信息，将所述密钥信息存入密钥数据库并生成缓存数据，同时设置该缓存数据的有效期；本实施例中，所述网络密钥自动生成模块202根据AES加密算法加密生成密钥信息。密钥解析模块203，用于通过内部储能系统获取所述密钥信息，并对所述密钥信息进行解析，获得解析后的访问信息；本实施例中，所述密钥解析模块203根据AES解密算法对密钥信息进行解析，获取用户输入的储能设备编号、储能系统的网络IP地址、时间信息等。安全限制模块204，用于将所述解析后的访问信息中的时间戳与当前时间进行匹配，校验该密钥信息的时间是否过期；若校验该密钥信息未过期，则根据所述解析后的访问信息中的储能设备编号信息在所述用户信息数据库中进行查询，将所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址进行匹配，若匹配成功，则向该用户打开访问权限。所述安全限制模块204还用于：若所述用户信息数据库中对应的内部储能系统的网络IP地址与所述解析后的访问信息中的网络IP地址匹配成功，则在所述密钥数据库中查询该密钥信息对应的单日已访问次数是否达到预设的单日可访问总次数，以及单日已访问时长是否达到预设的单日可访问总时长，若否，则向该用户打开访问权限。所述安全限制模块204在具体实施时，将解密后获得的储能设备编号、储能系统的网络IP地址、时间戳，与密钥数据库匹配，匹配成功则打开访问权限；并进行计时，限制用户每日访问时长及访问次数，每次访问时长及次数记录至密钥数据库，下次访问如匹配到超时或超次数则拒绝访问。其中，通过解析密钥获取时间戳，自定义密钥的失效时间以及失效限制，如单日已访问次数已达到限制，则直接标记密钥已失效，并记录时间及该密钥失效原因为访问次数已达限制。如访问时长到达失效时间，则同理标记失效并记录时间及该密钥失效原因为访问时长已达限制。再次生成的新密钥继续访问时，如果解析密钥后匹配到上次失效原因为访问次数已达限制，则将限制访问次数修改为较第一次更多的次数；如上次失效原因为访问时长已达限制，则增加用户的单日可访问总时长。本实施例解决了用户通过公网访问自己内部储能系统的安全性问题，使自己的系统更加安全的暴露在公网。同时解决了用户需到现场解决问题的困难性和不确定性，使用户可以快速记录相关设备IP及基本信息，维护更加便捷。在一种实施例中，提供了一种计算机设备，如图4所示，包括存储器301、处理器302及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述任意的基于内部储能系统的安全访问方法。具体的，该计算机设备可以是计算机终端、服务器或者类似的运算装置。在本实施例中，提供了一种计算机可读存储介质，所述计算机可读存储介质存储有执行上述任意的基于内部储能系统的安全访问方法的计算机程序。具体的，计算机可读存储介质包括永久性和非永久性、可移动和非可移动媒体可以由任何方法或技术来实现信息存储。信息可以是计算机可读指令、数据结构、程序的模块或其他数据。计算机可读存储介质的例子包括，但不限于相变内存、静态随机存取存储器、动态随机存取存储器、其他类型的随机存取存储器、只读存储器、电可擦除可编程只读存储器、快闪记忆体或其他内存技术、只读光盘只读存储器、数字多功能光盘或其他光学存储、磁盒式磁带，磁带磁盘存储或其他磁性存储设备或任何其他非传输介质，可用于存储可以被计算设备访问的信息。按照本文中的界定，计算机可读存储介质不包括暂存电脑可读媒体，如调制的数据信号和载波。显然，本领域的技术人员应该明白，上述的本发明实施例的各模块或各步骤可以用通用的计算装置来实现，它们可以集中在单个的计算装置上，或者分布在多个计算装置所组成的网络上，可选地，它们可以用计算装置可执行的程序代码来实现，从而，可以将它们存储在存储装置中由计算装置来执行，并且在某些情况下，可以以不同于此处的顺序执行所示出或描述的步骤，或者将它们分别制作成各个集成电路模块，或者将它们中的多个模块或步骤制作成单个集成电路模块来实现。这样，本发明实施例不限制于任何特定的硬件和软件结合。以上所述，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到的变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以权利要求的保护范围为准。
