标题title
一种旅游导览数据的推送方法、系统及计算机设备
摘要abst
本发明公开了一种旅游导览数据的推送方法、系统及计算机设备，属于数据推送技术领域。本发明根据移动设备的属性参数集与每一景点的特性标签生成该景点的访问概率和访问偏好，从而获得预期轨迹路径，随着当前游览数据的变化更新预期轨迹路径。移动设备生成每一景点的到达时间，基于到达时间确定每一景点的缓存比，根据该缓存比向移动设备推送多媒体数据，保证用户可以尽快获得即将抵达的景点的多媒体数据。在服务器推送广播数据时估计移动设备下载广播数据的单向延时，迭代调整动态缓存单元的容量，减少用户的等待时间。为保证广播数据的顺利推送以及单向延时的准确估计，在广播数据的推送过程中关闭多媒体数据的推送。
权利要求书clms
1.一种旅游导览数据的推送方法，其特征在于，包括以下步骤：步骤1：服务器根据旅游景区的多个景点的位置坐标和路径通道生成旅游景区的路径地图，并存储历史游览数据和每一景点的多媒体数据；步骤2：移动设备进入旅游景区后，服务器获取移动设备的属性参数集，根据属性参数集和每一景点的特性标签生成该景点的访问概率；步骤3：服务器向移动设备发送旅游景区的存储需求数据和路径地图，移动设备接收存储需求数据并基于设备容量创建动态缓存单元；步骤4：每间隔一个工作周期，服务器获取移动设备的当前轨迹路径，根据当前轨迹路径与历史游览数据生成每一景点的访问偏好；步骤5：移动设备获取当前游览数据，根据该访问偏好和当前游览数据确定预期轨迹路径，再生成每一景点的到达时间；步骤6：移动设备基于所述到达时间生成多媒体数据的缓存比和目标缓存，并根据该目标缓存向服务器请求推送多媒体数据并存储至动态缓存单元；步骤7：若服务器向移动设备推送广播数据，关闭多媒体数据的推送请求，在广播数据内等间隔地插入多个探测包并发送至移动设备，否则返回步骤4；步骤8：移动设备接收广播数据并根据探测包估计单向延时，基于该单向延时调整动态缓存单元的存储容量；步骤9：移动设备根据动态缓存单元的存储容量更新游览数据的目标缓存，返回至步骤6。2.根据权利要求1所述的旅游导览数据的推送方法，其特征在于，在步骤2中， 属性参数集由移动设备的多个属性标签组成，基于属性标签与景点j的特性标签计算移动设备与该景点的属性相似度，q1n为第n个属性标签的赋值，q2n为第n个特性标签的赋值，N为属性标签的个数，景点j的访问概率/＞，J为景点的数量。3.根据权利要求2所述的旅游导览数据的推送方法，其特征在于，在步骤4中，历史游览数据包含I个样本移动设备访问J个景点的样本路径，根据当前轨迹路径与样本路径计算移动设备与样本移动设备i的轨迹相似度，景点j的访问偏好/＞，Eij为景点j在样本移动设备i的样本路径中的访问次数。4.根据权利要求1所述的旅游导览数据的推送方法，其特征在于，在步骤5中，所述当前游览数据由全部路径通道的路径密度组成，根据路径密度计算每一路径通道的代价参数，基于访问偏好与该代价参数确定预期轨迹路径。5.根据权利要求1所述的旅游导览数据的推送方法，其特征在于，在步骤6中，移动设备提取到达时间Tj≤T0的J'个景点，其中，景点j的缓存比，景点j的多媒体数据的目标缓存Gj=G×Wj，G为动态缓存单元的存储容量；移动设备提取到达时间Tj＞T0的J-J'个景点的到达时间，景点j的缓存比Wj=0，T0为基准下载时长。6.根据权利要求5所述的旅游导览数据的推送方法，其特征在于，在步骤7中，探测包的发送间隔为tspa，探测包的数量为M，探测包m至少包括报文标识与该探测包的发出时刻tm，m≤M。7.根据权利要求6所述的旅游导览数据的推送方法，其特征在于，在步骤8中，移动设备计算探测包m的累积延时差t'm-t'0-tspa，t'm为探测包m的接收时刻，t'0为广播数据中首个数据包的接收时刻，根据累积延时差的最小值tmin确认基准探测包，tmin=min{t'm-t'0-tspa}，移动设备的单向延时，/＞为探测包m的时钟频差。8.根据权利要求7所述的旅游导览数据的推送方法，其特征在于，在步骤9中，移动设备的动态缓存单元的存储容量，C'为上一工作周期该移动设备的单向延时。9.一种根据权利要求1所述的旅游导览数据的推送方法的推送系统，其特征在于，包括服务器和多个进入旅游景区的移动设备，服务器存储每一景点的多媒体数据，移动设备具有用于接收该多媒体数据的动态缓存单元，移动设备根据目标缓存向服务器请求推送多媒体数据并存储至动态缓存单元，其中，若服务器向移动设备推送广播数据，在广播数据内等间隔地插入多个探测包并发送至移动设备，移动设备根据探测包估计单向延时，基于该单向延时调整动态缓存单元的存储容量。10.一种根据权利要求1所述的旅游导览数据的推送方法的计算机设备，其特征在于，所述计算机设备包括处理器和存储器，所述存储器中存储有计算机程序，所述计算机程序被所述处理器执行时，实现所述旅游导览数据的推送方法。
说明书desc
技术领域本发明涉及数据推送的方法，尤其涉及一种旅游导览数据的推送方法、系统及计算机设备。背景技术现有的景区数据服务系统参照公开号为CN115235495A的中国专利申请，该专利申请公开了一种基于游客兴趣的景区三维导航方法及系统，所述方法构建基于游客兴趣的若干种不同的游客兴趣模型，提取各个游客兴趣模型的游走路径，计算每条路径上的权重，将路径权重进行非负化处理。再构筑出无负权重的有向连通图，根据用户选择的景点及游客兴趣模型，计算出用户当前位置与目标位置之间的最佳路径并以三维地图的方式进行导航，能够智能地规划出满足用户游玩需求的游玩路径。景区服务系统除了需要提供导航服务外，还需要根据用户所在位置及时推送相关景点的视频、图片等数据。公告号为CN102984219B的中国专利公开了一种基于媒体多维内容表达的旅游移动终端信息推送方法，该方法首先通过移动终端获取用户地理位置信息，与旅游景点位置匹配后，进行音频推送，其次通过感知用户移动终端的状态特征，推送景点视频介绍或定位景点图片信息。因移动设备的容量有限，全部景点的多媒体数据无法同时在移动设备缓存。并且用户进入不同景点的时间不同，缓存数据的分配需要结合用户的到达时间。有必要提出一种更高效的旅游导览数据的推送方法，保证用户在进入景点后可以快速获得相关多媒体数据，提高用户体验。发明内容为了解决上述现有技术存在的缺陷，本发明提出了一种旅游导览数据的推送方法、系统及计算机设备。本发明结合旅游景区的历史游览数据和当前轨迹路径确定每一景点的缓存比，根据该缓存比向移动设备推送多媒体数据，保证用户可以尽快获得当前景点的多媒体数据。进一步的，本发明在服务器推送广播数据时估计移动设备下载广播数据的单向延时，迭代调整动态缓存单元的存储容量，减少用户的等待时间。本发明的技术方案是这样实现的：一种旅游导览数据的推送方法，包括以下步骤：步骤1：服务器根据旅游景区的多个景点的位置坐标和路径通道生成旅游景区的路径地图，并存储历史游览数据和每一景点的多媒体数据；步骤2：移动设备进入旅游景区后，服务器获取移动设备的属性参数集，根据属性参数集和每一景点的特性标签生成该景点的访问概率；步骤3：服务器向移动设备发送旅游景区的存储需求数据和路径地图，移动设备接收存储需求数据并基于设备容量创建动态缓存单元；步骤4：每间隔一个工作周期，服务器获取移动设备的当前轨迹路径，根据当前轨迹路径与历史游览数据生成每一景点的访问偏好；步骤5：移动设备获取当前游览数据，根据该访问偏好和当前游览数据确定预期轨迹路径，再生成每一景点的到达时间；步骤6：移动设备基于所述到达时间生成多媒体数据的缓存比和目标缓存，并根据该目标缓存向服务器请求推送多媒体数据并存储至动态缓存单元；步骤7：若服务器向移动设备推送广播数据，关闭多媒体数据的推送请求，在广播数据内等间隔地插入多个探测包并发送至移动设备，否则返回步骤4；步骤8：移动设备接收广播数据并根据探测包估计单向延时，基于该单向延时调整动态缓存单元的存储容量；步骤9：移动设备根据动态缓存单元的存储容量更新游览数据的目标缓存，返回至步骤6。在本发明中，在步骤2中，属性参数集由移动设备的多个属性标签组成，基于属性标签与景点j的特性标签计算移动设备与该景点的属性相似度，q1n为第n个属性标签的赋值，q2n为第n个特性标签的赋值，N为属性标签的个数，景点j的访问概率/＞，J为景点的数量。在本发明中，在步骤4中，历史游览数据包含I个样本移动设备访问J个景点的样本路径，根据当前轨迹路径与样本路径计算移动设备与样本移动设备i的轨迹相似度，景点j的访问偏好/＞，Eij为景点j在样本移动设备i的样本路径中的访问次数。在本发明中，在步骤5中，所述当前游览数据由全部路径通道的路径密度组成，根据路径密度计算每一路径通道的代价参数，基于访问偏好与该代价参数确定预期轨迹路径。在本发明中，在步骤6中，移动设备提取到达时间Tj≤T0的J'个景点，其中，景点j的缓存比，景点j的多媒体数据的目标缓存Gj=G×Wj，G为动态缓存单元的存储容量；移动设备提取到达时间Tj＞T0的J-J'个景点的到达时间，景点j的缓存比Wj=0，T0为基准下载时长。在本发明中，在步骤7中，探测包的发送间隔为tspa，探测包的数量为M，探测包m至少包括报文标识与该探测包的发出时刻tm，m≤M。在本发明中，在步骤8中，移动设备计算探测包m的累积延时差t'm-t'0-tspa，t'm为探测包m的接收时刻，t'0为广播数据中首个数据包的接收时刻，根据累积延时差的最小值tmin确认基准探测包，tmin=min{t'm-t'0-tspa}，移动设备的单向延时，/＞为探测包m的时钟频差。在本发明中，在步骤9中，移动设备的动态缓存单元的存储容量，C'为上一工作周期该移动设备的单向延时。一种根据所述旅游导览数据的推送方法的推送系统，包括服务器和多个进入旅游景区的移动设备，服务器存储每一景点的多媒体数据，移动设备具有用于接收该多媒体数据的动态缓存单元，移动设备根据目标缓存向服务器请求推送多媒体数据并存储至动态缓存单元，其中，若服务器向移动设备推送广播数据，在广播数据内等间隔地插入多个探测包并发送至移动设备，移动设备根据探测包估计单向延时，基于该单向延时调整动态缓存单元的存储容量。一种计算机设备，所述计算机设备包括处理器和存储器，所述存储器中存储有计算机程序，所述计算机程序被所述处理器执行时，实现所述旅游导览数据的推送方法。实施本发明的这种旅游导览数据的推送方法、系统及计算机设备，具有以下有益效果：本发明根据移动设备的属性参数集与每一景点的特性标签生成该景点的访问概率和访问偏好，从而获得预期轨迹路径，随着当前游览数据的变化更新预期轨迹路径。本发明将历史游览数据作为确定预期轨迹路径的参考，可以提高预期轨迹路径的准确性。移动设备生成每一景点的到达时间，基于到达时间确定每一景点的缓存比，根据该缓存比向移动设备推送多媒体数据，保证用户可以尽快获得即将抵达的景点的多媒体数据。在服务器推送广播数据时估计移动设备下载广播数据的单向延时，迭代调整动态缓存单元的存储容量，减少用户的等待时间。为保证广播数据的顺利推送以及单向延时的准确估计，在广播数据的推送过程中关闭多媒体数据的推送。附图说明图1为本发明多元路径规划的旅游导览方法的流程图；图2为本发明旅游景区的路径地图的示意图；图3为本发明样本移动设备的属性标签的统计示意图；图4为本发明预期轨迹路径的示意图；图5为本发明服务器与移动设备的数据收发的示意图；图6为本发明多媒体数据与广播数据的推送示意图；图7为本发明根据所述旅游导览数据的推送方法的推送系统的框图。具体实施方式为更清楚地理解本申请的目的、技术方案和优点，下面结合附图和实施例，对本申请进行了描述和说明。本发明的服务器提前向游客推送景点的多媒体数据，给游客提前规划预期轨迹路径，根据预期轨迹路径预测景点的访问时刻，让游客对未来的时间有进一步规划。移动设备进入旅游景区后，旅游景区非周期性地推送天气、救援、向导等广播数据。本发明通过根据该广播数据确定单向延时，并调整动态缓存单元的存储容量，提高移动设备的接收多媒体数据的效率。实施例一如图1至图6所示，本发明这种旅游导览数据的推送方法包括以下步骤。步骤1：服务器根据旅游景区的多个景点的位置坐标和路径通道生成旅游景区的路径地图，并存储历史游览数据和每一景点的多媒体数据。如图2所示的路径地图，圆表示景点，圆内数字为景点的序号，线条表示路径通道，路径通道上方的数字为路径通道长度，单位为米。路径通道下方的数字为路径通道的序号。在本实施例中，总共11个景点，18条道路。路径地图是一种连通图，游客能从景区的任一个景点到达目标景点。历史游览数据包括多个样本移动设备的属性参数集及多个样本路径，每一景点的多媒体数据包括景点视频介绍、景点特色图片等。步骤2：移动设备进入旅游景区后，服务器获取移动设备的属性参数集，根据属性参数集和每一景点的特性标签生成该景点的访问概率。属性参数集由移动设备的多个属性标签组成，属性标签的个数与景点的特性标签的个数相同。在本实施例中，属性标签包含年龄、性别、客源地等，则对应景点的特性标签为年龄特性、性别特性、客源地特性，统计历史时期进入每个景点的样本移动设备，按照属性标签的比例确定景点的特性标签。如图3所示，横坐标为属性标签，纵坐标为样本移动设备个数。样本移动设备个数最大的属性标签为特性标签。景点j的特性标签分别为30岁、男、江西。因属性参数集包含非数值属性标签，本实施例采用例如对非数值属性标签进行正整数赋值。赋值影响属性相似度的计算，可以采用启发式、机器学习等赋值方法。本实施例的基于属性标签与景点j的特性标签计算移动设备与该景点的属性相似度。属性相似度可以是夹角余弦相似度，即根据两个对象的特征向量的相似度评价整体相似度。属性相似度，q1n为第n个属性标签的赋值，q2n为第n个特性标签的赋值，N为属性标签的个数，景点j的访问概率/＞，J为旅游景区的景点的数量。步骤3：服务器向移动设备发送旅游景区的存储需求数据和路径地图，移动设备接收存储需求数据并基于设备容量创建动态缓存单元。服务器提前给游客的移动设备发送路径地图，移动设备可以据此开展后续路径规划。存储需求数据例如是每一景点的多媒体数据的属性文件或者是旅游景区的属性文件。移动设备初始化动态缓存单元的存储容量G=λG0，G0为可用的设备容量。根据存储需求数据调整λ，例如取0.1至0.3。创建动态缓存单元保证移动设备能流畅地接收服务器发送的信息，提高游客体验。步骤4：每间隔一个工作周期，服务器获取移动设备的当前轨迹路径，根据当前轨迹路径与历史游览数据生成每一景点的访问偏好。服务器的工作周期例如是10至100秒。历史游览数据包含I个样本移动设备访问J个景点的样本路径，根据当前轨迹路径与样本路径计算移动设备与样本移动设备i的轨迹相似度Ri。历史游览数据中的轨迹相似度较高的样本移动设备可以作为访问偏好的参考，并据此确定预期轨迹路径。景点j的访问偏好，Eij为景点j在样本移动设备i的样本路径中的访问次数。步骤5：移动设备获取当前游览数据，根据该访问偏好和当前游览数据确定预期轨迹路径，再生成每一景点的到达时间。所述当前游览数据由全部路径通道的路径密度组成，根据路径密度计算每一路径通道的代价参数，基于该代价参数确定预期轨迹路径。路径密度可以采用基于图像的人数统计方法或者基于红外传感的人数统计方法。例如在路径通道或景点设置红外双向传感器，通过红外双向传感器测量人数，服务器根据人数变化动态计算客流量，再结合路径地图估算路径密度。例如路径密度yk=uk/sk，其中，uk为路径通道k的有效面积，sk为路径通道k的客流量。沿路径通道k进入景点j的代价参数Ykj=yk/Pj。本发明采用代价参数调整路径通道的有效路径长度，再根据迪克斯特拉算法确定预期轨迹路径。迪克斯特拉最短路径算法能够从初始起点出发经过所有未访问的景点，且总的有效路径长度最短。具体来说，根据位置坐标确定当前景点j-1。提取该当前景点j-1可以到达的路径通道，并确定路径长度集合{L1,L2,……Lk}，根据每一路径通道的对应目标景点生成有效路径长度集合。例如沿路径通道k进入景点j的有效路径长度=Lk×Ykj。基于最短路径算法逐步查询有效路径长度最小的路径通道，直至完成剩余未访问景点的连通。相应路径通道的顺序集合组成预期轨迹路径。如图4所示，实线为预期轨迹路径，景点5为初始起点，从景点5出发，依次经过景点6、景点7、景点8、景点9、景点10、景点11、景点10、景点4、景点3。根据基准步行速度和路径长度计算路径通道的步行时间，再确定各景点的到达时间。进一步的，到达时间还可以考虑历史用户在当前景点的停留时间，本发明对此不加以限制。步骤6：移动设备基于所述到达时间生成多媒体数据的缓存比和目标缓存，并根据该目标缓存向服务器请求推送多媒体数据并存储至动态缓存单元。预设基准下载时长T0，将到达时间小于等于T0的景点的多媒体数据纳入动态缓存单元。即移动设备提取到达时间Tj≤T0的J'个景点，按照到达时间分配缓存比。其中，景点j的缓存比。移动设备提取到达时间Tj＞T0的J-J'个景点，景点j的缓存比Wj=0。景点j的多媒体数据的目标缓存Gj=G×Wj，G为动态缓存单元的存储容量。步骤7：若服务器向移动设备推送广播数据，关闭多媒体数据的推送请求，在广播数据内等间隔地插入多个探测包并发送至移动设备，否则返回步骤4。广播数据为景区向用户临时播报的通知或报警信息，数据容量小但实时性高，可以用于估算信道质量。探测包的发送间隔为tspa，探测包的数量为M，探测包m至少包括报文标识与该探测包的发出时刻tm，m≤M。如图5所示，可以采用队列控制器控制多媒体数据和广播数据的推送优先级，保证广播数据在更高的优先级推送至移动设备。步骤8：移动设备接收广播数据并根据探测包估计单向延时，基于该单向延时调整动态缓存单元的存储容量。移动设备与服务器存在各种数据输出延时，在多媒体数据推送过程中，移动设备存在多个并行的多媒体数据下载进程，移动设备从服务器下载数据的单向延时估计难度大。广播数据具有更高的优先级，并关闭了多媒体数据的传输，本发明根据插入广播数据的探测包估计单向延时。如图6所示，不同的探测包的延时不同，首先移动设备计算探测包m的累积延时差t'm-t'0-tspa，t'm为探测包m的接收时刻，t'0为广播数据中首个数据包的接收时刻，根据累积延时差的最小值tmin确认基准探测包，tmin=min{t'm-t'0-tspa}。基准探测包具有更短的累积延时差。移动设备的单向延时，αm为探测包m的时钟频差，tm为探测包m的推送时刻。αm为探测包m的时钟频差，时钟频差是指移动设备与服务器的时间频率的差值，在现有技术中，时钟频差可以采用凸包算法确定。步骤9：移动设备根据动态缓存单元的存储容量更新游览数据的目标缓存，返回至步骤6。移动设备的动态缓存单元的存储容量，C'为上一工作周期该移动设备的单向延时，G为动态缓存单元的存储容量。动态缓存单元的存储容量根据相邻工作周期的单向延时进行调整，移动设备更新动态缓存单元的存储容量，再更新多媒体数据的目标缓存。若多媒体数据的目标缓存增大，则申请服务器继续推送数据包。若多媒体数据的目标缓存减小，按照数据的读取顺序删除数据包。实施例二在实施例一的步骤4中，本发明根据移动设备与样本移动设备的轨迹相似度调整移动设备对景点j的访问偏好。本实施例进一步公开了一种优选的轨迹相似度的计算方法。该方法将历史游览数据的样本路径作为确定预期轨迹路径的参考，可以提高预期轨迹路径的准确性，避免服务器向移动设备推送访问可能性更低的景点的多媒体数据。首先，根据移动设备已经访问的h个景点的位置坐标确定当前轨迹路径{,,……, , }。、、... ...、均为已经访问的景点位置坐标。定义其中景点j与景点j-1的轨迹向量。然后读取历史游览数据的多个样本移动设备的轨迹路径，确定样本移动设备i访问的前h个景点的位置坐标，分别为、、... ...、，定义其中景点j与景点j-1的轨迹向量。再计算移动设备与样本移动设备i的轨迹相似度。/＞与/＞分别为相应轨迹向量的长度。已经访问相同景点的用户后续访问其他景点的可能性更高。根据轨迹相似度可以找到类似用户的样本移动设备，景点j在样本移动设备i的样本路径中的访问次数Eij可以用于调整目标用户对移动对景点j的访问偏好，即访问偏好。实施例三本发明根据所述旅游导览数据的推送方法的推送系统，包括服务器和多个进入旅游景区的移动设备。服务器存储每一景点的多媒体数据，移动设备具有用于接收该多媒体数据的动态缓存单元，移动设备根据目标缓存向服务器请求推送多媒体数据并存储至动态缓存单元。若服务器向移动设备推送广播数据，在广播数据内等间隔地插入多个探测包并发送至移动设备，移动设备根据探测包估计单向延时，基于该单向延时调整动态缓存单元的存储容量。如图7所示，服务器例如包括远程设备、多媒体数据库、景区数据库、客户端。客户端用于与移动设备和远程设备进行数据交互。多媒体数据库用于存储待推送的多媒体数据、广播数据等，景区数据库用于存储历史游览数据、路径地图等。远程设备例如是电子计算机、分布式处理系统，用于根据移动设备提供的属性参数集生成访问偏好以及在广播数据中插入探测包。实施例四本发明根据所述推送系统的计算机设备，包括处理器和存储器。所述存储器中存储有计算机程序，所述计算机程序被所述处理器执行时，实现所述旅游导览数据的推送方法。该处理器是包括中央处理器、微控制单元或者其他常规处理器。存储器包括一个或多个，其可以是随机存取存储器，只读存储器，可编程只读存储器，可擦除可编程只读存储器，电可擦除可编程只读存储器等。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改，等同替换和改进等，均应包含在本发明的保护范围之内。
