标题title
一种基于照明网络的室内混合定位装置、方法及系统
摘要abst
本发明提供一种基于照明网络的室内混合定位装置、方法及系统，属于煤矿工程领域；解决了矿工照明不安全的问题；具体如下：步骤S1：通过定位装置获取在观察时间内矿井的环境数据；步骤S2：根据环境数据计算矿井的安全指数，得到矿井的安全区范围；步骤S3：获取矿工人员的移动数据；根据移动数据判断工人是否位于矿井安全区；若位于，则根据移动数据构建矿工移动模型；若不位于，则报警；步骤S4：根据矿工移动模型控制照明装置工作；本发明通过对矿洞环境和矿工位置进行获取分析，为矿工划分安全区域，保障矿工安全。
权利要求书clms
1.一种基于照明网络的室内混合定位方法，其特征在于，定位方法包括：步骤S1：通过定位装置获取在观察时间内矿井的环境数据；步骤S2：根据环境数据计算矿井的安全指数，得到矿井的安全区范围；步骤S3：获取矿工人员的移动数据；根据移动数据判断工人是否位于矿井安全区；若位于，则根据移动数据构建矿工移动模型；若不位于，则报警；步骤S4：根据矿工移动模型控制照明装置工作。2.根据权利要求1所述的一种基于照明网络的室内混合定位方法，其特征在于，所述步骤S1的步骤如下：步骤S11：通过定位系统获取一级主控装置的位置，记作基点位置；步骤S12：通过二级照明定位装置，获取各个二级照明定位装置距离一级主控装置的相对位置；步骤S13：分别获取A区、B区、C区和D区对应的二级照明定位装置的个数；步骤S14：通过二级照明定位装置，获取矿井垂直方向和水平方向对应的各矿洞或矿井的长度、宽度和高度；步骤S15：通过二级照明定位装置，获取矿井内各矿洞内的氧气含量、水蒸气含量和有害气体含量；步骤S16：把基点位置、相对位置、矿洞的长度、宽度和高度、氧气含量和有害气体含量，作为环境数据，进入步骤S2。3.根据权利要求2所述的一种基于照明网络的室内混合定位方法，其特征在于，所述步骤S2的步骤如下：步骤S21：以基点位置为原点；以原点的正北方向为z轴，正东方向为y轴，垂直向下方向为z轴构建空间坐标系；步骤S22：把二级照明定位装置的相对位置带入空间坐标系中；步骤S23：分别统计A区、B区、C区和D区对应的二级照明定位装置的个数，记作An、Bn、Cn和Dn；步骤S24：计算A区的安全指数；步骤S25：用计算A区的安全指数的相同执行步骤，依次计算B区、C区和D区对应的安全范围，进入步骤S3。4.根据权利要求3所述的一种基于照明网络的室内混合定位方法，其特征在于，所述步骤S24的步骤如下：步骤S241：A区，把垂直向上正对原点的二级照明定位装置标号为1，按水平远离原点的方向依次对A区内所有的二级照明定位装置标号；步骤S242：统计A区所有二级照明定位装置，对应的坐标数据和矿洞参数；1，，矿洞参数：l1、w1、h1；2，，矿洞参数：l2、w2、h2；3，，矿洞参数：l3、w3、h3；An-1，，矿洞参数：lAn-1、wAn-1、hAn-1；An，，矿洞参数：lAn、wAn、hAn；步骤S243：把A区矿洞按二级照明定位装置的相邻位置，分为An-1个矿洞段；第1个矿洞段：1～2；第2个矿洞段：2～3；第3个矿洞段：3～4；……第An-1个矿洞段：An-1～An；步骤S244：统计每一个矿洞段在观察时间开始时和观察时间结束时，矿洞内的氧气含量、水蒸气含量和有害气体含量；分别记作IA1、IB1和IC1，IA2、IB2和IC2；步骤S245：依次计算各矿洞段的气体安全指数II；第1个矿洞段：II1～2的计算式如下：；第2个矿洞段：II2～3的计算式如下：；第3个矿洞段：II3～4的计算式如下：；以此类推，第An-1个矿洞段：IIAn-1～An的计算式如下：；步骤S246：依次计算各矿洞段的位置安全指数D；第1个矿洞段：D1～2的计算式如下：；第2个矿洞段：D2～3的计算式如下：；第3个矿洞段：D3～4的计算式如下：；以此类推，第An-1个矿洞段：DAn-1～An的计算式如下：；步骤S246：依次计算各矿洞段的环境安全指数SA；第1个矿洞段：SA1～2的计算式如下：SA1～2＝II1～2*；第2个矿洞段：SA2～3的计算式如下：SA2～3＝II2～3*；第3个矿洞段：SA3～4的计算式如下：SA3～4＝II3～4*；以此类推，第An-1个矿洞段：SAAn-1～An的计算式如下：SAAn-1～An＝IIAn-1～An*；步骤S247：依次计算各矿洞的空间安全指数SP；第1个矿洞段：SP1～2的计算式如下：SP1～2＝－；第2个矿洞段：SP2～3的计算式如下：SP2～3＝－；第3个矿洞段：SP3～4的计算式如下：SP3～4＝－；以此类推，第An-1个矿洞段：SPAn-1～An的计算式如下：SPAn-1～An＝－；步骤S248：依次计算各矿洞的综合安全指数S；第1个矿洞段：S1～2的计算式如下：S1～2＝SA1～2*SP1～2；第2个矿洞段：S2～3的计算式如下：S2～3＝SA2～3*SP2～3；第3个矿洞段：S3～4的计算式如下：S3～4＝SP3～4*SP3～4；以此类推，第An-1个矿洞段：SAn-1～An的计算式如下：SAn-1～An＝SAAn-1～An*SPAn-1～An；步骤S249：确定A区安全范围；步骤S2491：把综合安全指数S按降序排列，得到集合BA；步骤S2492：从集合BA的首项开始遍历，标记出第一个综合安全指数S小于或者等于0的矿洞段，记为终止项；步骤S2493：把集合BA中从首项到终止项对应的矿洞段记为A区安全范围。5.根据权利要求3所述的一种基于照明网络的室内混合定位方法，其特征在于，所述步骤S3的步骤如下：步骤S31：通过二级照明定位装置获取矿工人员的当前位置和当前时间；步骤S32：判断矿工人员的当前位置是否位于安全区范围；若位于，则执行步骤S33，构建矿工移动模型；若不位于，则监测矿工的移动方向，二级照明定位装置进入警戒状态，执行步骤S34；步骤S33：构建矿工移动模型；步骤S331：把矿工人员当前位置代入上述步骤S21构建的空间坐标系中，得到矿工的起止位置坐标；步骤S332：通过二级照明定位装置，分别获取矿工人员在x轴、y轴和z轴上对应的各时刻的移动速度和移动加速度，分别记作vx、vy和vz，ax、ay和az；步骤S333：把当前时间记作t0，构建矿工移动模型，其中t表示时间；x轴移动；；y轴移动；；z轴移动；；步骤S34：选择距离矿工当前位置最近的安全区，作为第一安全区，获取矿工当前位置距离第一安全区的距离记作r；步骤S35：利用步骤S331～步骤S332相同的方法，通过二级照明定位装置，获取矿工人员的当前位置；矿工在x轴、y轴和z轴上对应的各时刻的移动速度和移动加速度，分别记作vvx、vvy和vvz，aax、aay和aaz；步骤S36：计算矿工距离第一安全区的移动距离Δr；步骤S361：把vvx、vvy和vvz，aax、aay和aaz，代入步骤S333的公式中，计算Xr、Yr和Zr；用vvx替换vx，vvy替换vy，vvz替换vz；用aax替换ax，aay替换ay，aaz替换az；步骤S362：计算Δr；；步骤S37：判断Δr是否大于0；若Δr大于0，则说明矿工正在接近第一安全区，二级照明定位装置维持警戒状态，直至矿工进入第一安全区；若Δr小于或者等于0，则说明矿工正在远离第一安全区，二级照明定位装置维持警戒状态，执行步骤S38；步骤S38：判断第一安全区周围是否存在安全区；若存在，则说明矿工正在接近安全区，二级照明定位装置维持警戒状态，直至矿工进入第一安全区；若不存在，则说明矿工正在远离安全区，二级照明定位装置由警戒状态变为报警状态，进行灯光和语音报警。6.一种基于照明网络的室内混合定位系统，适用于权利要求1-5任意一项所述的一种基于照明网络的室内混合定位方法，其特征在于，所述定位系统包括：数据获取模块：用于获取矿井观察时间内矿井的环境数据；数据处理模块：用于根据环境数据计算矿井的安全指数，得到矿井安全区范围；人员监测模块：用于获取矿工人员的移动数据；根据移动数据判断工人是否位于矿井安全区；若位于，则不报警；若不位于，则报警；照明装置综合控制模块：用于实时获取照明装置的灯具数据；根据移动数据和灯具数据调整照明装置。7.根据权利要求6所述的一种基于照明网络的室内混合定位系统，其特征在于，所述照明装置综合控制模块的流程如下：流程A1：照明装置综合控制模块根据矿工移动数据调整照明装置；流程A11：通过二级照明定位装置持续获取矿工相对于原点的位置数据、时间、速度数据和加速度数据；流程A12：把流程A11获取的数据代入步骤S33构建矿工移动模型中，计算矿工的移动位置；流程A13：依次控制矿工的移动位置区域对应的二级照明定位装置开启照明功能；流程A2：照明装置综合控制模块关联一级主控装置和二级照明定位装置，通过步骤S11～步骤S12和步骤S21～步骤S24的方法，分别获取A区、B区、C区和D区所有二级照明定位装置的总个数和故障个数，得到灯具数据，分别记作mA、mB、mC和mD，uA、uB、uC和uD；流程A3：计算A区、B区、C区和D区的故障率N；NA＝uA/mA，NB＝uB/mB，NC＝uC/mC，ND＝uD/mD；流程A4：判断A区的故障率NA是否大于或者等于0.5；若故障率NA大于或者等于0.5；则A区内所有二级照明定位装置全部进入警戒状态，语音播报矿工撤离信息，由灯具数据控制二级照明定位装置；若故障率NA小于0.5；则A区内出现故障的二级照明定位装置进入警戒状态，其他二级照明定位装置不变，由移动数据控制二级照明定位装置；流程A5：照明装置综合控制模块利用流程A4同样的方法，调整、B区、C区和D区的二级照明定位装置。8.一种基于照明网络的室内混合定位装置，适用于权利要求1-5任意一项所述的一种基于照明网络的室内混合定位方法，其特征在于，所述定位装置包括：一级主控装置和二级照明定位装置；其中一级主控装置搭载定位系统，安置在矿井上方的地面位置，用于联动二级照明定位装置；二级照明定位装置包括：钉形固定式矿井照明定位装置和水平可移动式矿井照明定位装置；钉形固定式矿井照明定位装置包括：灯组、旋转组件、灯体、联动装置一、联动装置二和联动装置三；旋转组件：用于矿工手动或系统自动调整灯组照射角度；灯体：用于搭载灯组，包括多功能组件、电源选择器、语音播报组件、主电源和副电源；多功能组件包括：气体检测组件，用于检测矿洞内的氧气、水蒸气和有害气体含量；录像识别组件，用于矿洞实时录像和识别矿洞录像中的矿工，若录像出现矿工则开启照明，若录像未出现矿工则关闭照明；测速组件，用于检测矿工的移动速度和移动加速度；定位组件，用于获取二级照明定位装置的相对位置；故障检测组件，用于检测灯组是否有电流通过，若有则说明灯组正常，若无，则说明灯组异常；电源选择器：用于检测主电源的剩余带电量，若主电源的剩余带电量小于或者等于30%，则切换副电源；联动装置一、联动装置二和联动装置三：用于将钉形固定式矿井照明定位装置固定在矿洞岩壁上；水平可移动式矿井照明定位装置包括：灯组、旋转组件、灯体、机械结构和基座；其中水平可移动式矿井照明定位装置的灯组、旋转组件和灯体与钉形固定式矿井照明定位装置对应的结构功能相同；所述机械结构，用于调整水平可移动式矿井照明定位装置灯组的高度；所述基座，用于水平可移动式矿井照明定位装置的移动。
说明书desc
技术领域本发明一种基于照明网络的室内混合定位装置、方法及系统，涉及煤矿工程领域。背景技术现有的用于矿工人员的照明网络系统或方法存在以下不足：1、环境对定位的影响：室内环境中可能存在反射、干扰等影响定位精度的因素，如墙壁、隔断等结构可能导致信号反射，影响定位的准确性。2、系统复杂性：融合照明网络和其他传感器数据，需要复杂的算法和数据融合技术，增加了系统的设计、调试和维护成本。3、部署和维护成本：照明系统可能需要进行智能化改造以支持定位功能，这需要额外的投入，同时需要长期的维护和管理。照明网络系统或方法存在问题可能会给矿工人员带来信号覆盖不足、数据延迟、系统稳定性不强、误差较大等安全隐患。发明内容针对现有技术存在的不足，本发明目的是提供一种基于照明网络的室内混合定位装置、方法及系统，旨在解决矿工照明不安全的问题。为了实现上述目的，本发明是通过如下的技术方案来实现：一种基于照明网络的室内混合定位方法包括：步骤S1：通过定位装置获取在观察时间内矿井的环境数据；步骤S2：根据环境数据计算矿井的安全指数，得到矿井的安全区范围；步骤S3：获取矿工人员的移动数据；根据移动数据判断工人是否位于矿井安全区；若位于，则根据移动数据构建矿工移动模型；若不位于，则报警；步骤S4：根据矿工移动模型控制照明装置工作。进一步地，所述步骤S1的步骤如下：步骤S11：通过定位系统获取一级主控装置的位置，记作基点位置；步骤S12：通过二级照明定位装置，获取各个二级照明定位装置距离一级主控装置的相对位置；步骤S13：分别获取A区、B区、C区和D区对应的二级照明定位装置的个数；步骤S14：通过二级照明定位装置，获取矿井垂直方向和水平方向对应的各矿洞或矿井的长度、宽度和高度；步骤S15：通过二级照明定位装置，获取矿井内各矿洞内的氧气含量、水蒸气含量和有害气体含量；步骤S16：把基点位置、相对位置、矿洞的长度、宽度和高度、氧气含量和有害气体含量，作为环境数据。进一步地，所述步骤S2的步骤如下：步骤S21：以“基点位置”为原点；以原点的正北方向为z轴，正东方向为y轴，垂直向下方向为z轴构建空间坐标系；步骤S22：把二级照明定位装置的相对位置带入空间坐标系中；步骤S23：分别统计A区、B区、C区和D区对应的二级照明定位装置的个数，记作An、Bn、Cn和Dn；步骤S24：计算A区的安全指数；步骤S25：用计算A区的安全指数的相同执行步骤，依次计算B区、C区和D区对应的安全范围。进一步地，所述步骤S24的步骤如下：步骤S241：A区，把垂直向上正对原点的二级照明定位装置标号为1，按水平远离原点的方向依次对A区内所有的二级照明定位装置标号；步骤S242：统计A区所有二级照明定位装置，对应的坐标数据和矿洞参数；1，，矿洞参数：l1、w1、h1；2，，矿洞参数：l2、w2、h2；3，，矿洞参数：l3、w3、h3；An-1，，矿洞参数：lAn-1、wAn-1、hAn-1；An，，矿洞参数：lAn、wAn、hAn；步骤S243：把A区矿洞按二级照明定位装置的相邻位置，分为An-1个矿洞段；第1个矿洞段：1～2；第2个矿洞段：2～3；第3个矿洞段：3～4；……第An-1个矿洞段：An-1～An；步骤S244：统计每一个矿洞段在观察时间开始时和观察时间结束时，矿洞内的氧气含量、水蒸气含量和有害气体含量；分别记作IA1、IB1和IC1，IA2、IB2和IC2；步骤S245：依次计算各矿洞段的气体安全指数II；第1个矿洞段：II1～2的计算式如下：；第2个矿洞段：II2～3的计算式如下：；第3个矿洞段：II3～4的计算式如下：；以此类推，第An-1个矿洞段：IIAn-1～An的计算式如下：；步骤S246：依次计算各矿洞段的位置安全指数D；第1个矿洞段：D1～2的计算式如下：；第2个矿洞段：D2～3的计算式如下：；第3个矿洞段：D3～4的计算式如下：；以此类推，第An-1个矿洞段：DAn-1～An的计算式如下：；步骤S246：依次计算各矿洞段的环境安全指数SA；第1个矿洞段：SA1～2的计算式如下：SA1～2＝II1～2*；第2个矿洞段：SA2～3的计算式如下：SA2～3＝II2～3*；第3个矿洞段：SA3～4的计算式如下：SA3～4＝II3～4*；以此类推，第An-1个矿洞段：SAAn-1～An的计算式如下：SAAn-1～An＝IIAn-1～An*；步骤S247：依次计算各矿洞的空间安全指数SP；第1个矿洞段：SP1～2的计算式如下：SP1～2＝－；第2个矿洞段：SP2～3的计算式如下：SP2～3＝－；第3个矿洞段：SP3～4的计算式如下：SP3～4＝－；以此类推，第An-1个矿洞段：SPAn-1～An的计算式如下：SPAn-1～An＝－；步骤S248：依次计算各矿洞的综合安全指数S；第1个矿洞段：S1～2的计算式如下：S1～2＝SA1～2*SP1～2；第2个矿洞段：S2～3的计算式如下：S2～3＝SA2～3*SP2～3；第3个矿洞段：S3～4的计算式如下：S3～4＝SP3～4*SP3～4；以此类推，第An-1个矿洞段：SAn-1～An的计算式如下：SAn-1～An＝SAAn-1～An*SPAn-1～An；步骤S249：确定A区安全范围；步骤S2491：把综合安全指数S按降序排列，得到集合BA；步骤S2492：从集合BA的首项开始遍历，标记出第一个综合安全指数S小于或者等于0的矿洞段，记为终止项；步骤S2493：把集合BA中从首项到终止项对应的矿洞段记为A区安全范围。进一步地，所述步骤S3的步骤如下：步骤S31：通过二级照明定位装置获取矿工人员的当前位置和当前时间；步骤S32：判断矿工人员的当前位置是否位于安全区范围；若位于，则执行步骤S33，构建矿工移动模型；若不位于，则监测矿工的移动方向，二级照明定位装置进入警戒状态，执行步骤S34；步骤S33：构建矿工移动模型；步骤S331：把矿工人员当前位置代入上述步骤S21构建的空间坐标系中，得到矿工的起止位置坐标；步骤S332：通过二级照明定位装置，分别获取矿工人员在x轴、y轴和z轴上对应的各时刻的移动速度和移动加速度，分别记作vx、vy和vz，ax、ay和az；步骤S333：把当前时间记作t0，构建矿工移动模型，其中t表示时间；x轴移动；；y轴移动；；z轴移动；；步骤S34：选择距离矿工当前位置最近的安全区，作为第一安全区，获取矿工当前位置距离第一安全区的距离记作r；步骤S35：利用步骤S331～步骤S332相同的方法，通过二级照明定位装置，获取矿工人员的当前位置；矿工在x轴、y轴和z轴上对应的各时刻的移动速度和移动加速度，分别记作vvx、vvy和vvz，aax、aay和aaz；步骤S36：计算矿工距离第一安全区的移动距离Δr；步骤S361：把vvx、vvy和vvz，aax、aay和aaz，代入步骤S333的公式中，计算Xr、Yr和Zr；用vvx替换vx，vvy替换vy，vvz替换vz；用aax替换ax，aay替换ay，aaz替换az；步骤S362：计算Δr；；步骤S37：判断Δr是否大于0；若Δr大于0，则说明矿工正在接近第一安全区，二级照明定位装置维持警戒状态，直至矿工进入第一安全区；若Δr小于或者等于0，则说明矿工正在远离第一安全区，二级照明定位装置维持警戒状态，执行步骤S38；步骤S38：判断第一安全区周围是否存在安全区；若存在，则说明矿工正在接近安全区，二级照明定位装置维持警戒状态，直至矿工进入第一安全区；若不存在，则说明矿工正在远离安全区，二级照明定位装置由警戒状态变为报警状态，进行灯光和语音报警。一种基于照明网络的室内混合定位系统，所述定位系统包括：数据获取模块：用于获取矿井观察时间内矿井的环境数据；数据处理模块：用于根据环境数据计算矿井的安全指数，得到矿井安全区范围；人员监测模块：用于获取矿工人员的移动数据；根据移动数据判断工人是否位于矿井安全区；若位于，则不报警；若不位于，则报警；照明装置综合控制模块：用于实时获取照明装置的灯具数据；根据移动数据和灯具数据调整照明装置。进一步地，所述照明装置综合控制模块的流程如下：流程A1：照明装置综合控制模块根据矿工移动数据调整照明装置；流程A11：通过二级照明定位装置持续获取矿工相对于原点的位置数据、时间、速度数据和加速度数据；流程A12：把流程A11获取的数据代入步骤S33构建矿工移动模型中，计算矿工的移动位置；流程A13：依次控制矿工的移动位置区域对应的二级照明定位装置开启照明功能；流程A2：照明装置综合控制模块关联一级主控装置和二级照明定位装置，通过步骤S11～步骤S12和步骤S21～步骤S24的方法，分别获取A区、B区、C区和D区所有二级照明定位装置的总个数和故障个数，得到灯具数据，分别记作mA、mB、mC和mD，uA、uB、uC和uD；流程A3：计算A区、B区、C区和D区的故障率N；NA＝uA/mA，NB＝uB/mB，NC＝uC/mC，ND＝uD/mD；流程A4：判断A区的故障率NA是否大于或者等于0.5；若故障率NA大于或者等于0.5；则A区内所有二级照明定位装置全部进入警戒状态，语音播报矿工撤离信息，由灯具数据控制二级照明定位装置；若故障率NA小于0.5；则A区内出现故障的二级照明定位装置进入警戒状态，其他二级照明定位装置不变，由移动数据控制二级照明定位装置；流程A5：照明装置综合控制模块利用流程A4同样的方法，调整、B区、C区和D区的二级照明定位装置。一种基于照明网络的室内混合定位装置包括：一级主控装置和二级照明定位装置；其中一级主控装置搭载定位系统，安置在矿井上方的地面位置，用于联动二级照明定位装置；二级照明定位装置包括：钉形固定式矿井照明定位装置和水平可移动式矿井照明定位装置；钉形固定式矿井照明定位装置包括：灯组、旋转组件、灯体、联动装置一、联动装置二和联动装置三；旋转组件：用于矿工手动或系统自动调整灯组照射角度；灯体：用于搭载灯组，包括多功能组件、电源选择器、语音播报组件、主电源和副电源；多功能组件包括：气体检测组件，用于检测矿洞内的氧气、水蒸气和有害气体含量；录像识别组件，用于矿洞实时录像和识别矿洞录像中的矿工，若录像出现矿工则开启照明，若录像未出现矿工则关闭照明；测速组件，用于检测矿工的移动速度和移动加速度；定位组件，用于获取二级照明定位装置的相对位置；故障检测组件，用于检测灯组是否有电流通过，若有则说明灯组正常，若无，则说明灯组异常；电源选择器：用于检测主电源的剩余带电量，若主电源的剩余带电量小于或者等于30%，则切换副电源；联动装置一、联动装置二和联动装置三：用于将钉形固定式矿井照明定位装置固定在矿洞岩壁上；水平可移动式矿井照明定位装置包括：灯组、旋转组件、灯体、机械结构和基座；其中水平可移动式矿井照明定位装置的灯组、旋转组件和灯体与钉形固定式矿井照明定位装置对应的结构功能相同；所述机械结构，用于调整水平可移动式矿井照明定位装置灯组的高度；基座，用于水平可移动式矿井照明定位装置的移动。与现有技术相比，本发明的有益效果是：1、高精度定位：本发明可以实现对矿工在矿洞内位置的高精度定位，有助于矿工的安全监测和管理，特别是在紧急情况下能够快速准确地确定矿工的位置。2、覆盖范围广：本发明可以覆盖整个矿井或矿洞内的区域，因此无需额外部署其他设备来实现定位功能，减少了系统的复杂性和部署成本。3、实时性强：本发明可以提供实时的位置信息，矿工的位置变化可以实时监测和更新，方便管理人员了解矿工的当前位置和动态情况。4、易于集成和管理：本发明通常部署在矿洞中，只需要对照明系统进行智能化改造，加入定位功能，不需要额外的硬件投入和设备维护；同时，基于网络的定位系统可以集中管理，便于配置和更新。5、应急响应：本发明可以结合其他传感器，如烟雾、震动等，用于实时监测矿洞的环境状况，并及时发出警报和启动应急响应措施，保障矿工的安全。附图说明通过阅读参照以下附图对非限制性实施例所作的详细描述，本发明的其他特征、目的和优点将会变得更明显：图1为本发明方法示意图；图2为本发明同一平面地下矿区分区示意图；图3为本发明不同平面地下矿区分区示意图；图4为本发明空间坐标系示意图；图5为本发明A区矿洞示意图；图6为本发明钉形固定式矿井照明定位装置示意图；图7为本发明钉形固定式矿井照明定位装置示意图；图8为本发明水平可移动式矿井照明定位装置示意图；图9为本发明灯体电路示意图。附图标记如下：1、灯组；2、旋转组件；3、灯体；11、联动装置一；12、联动装置二；13、联动装置三；21、机械结构；22、基座；31、多功能组件；32、电源选择器；33、语音播报组件；34、主电源；35、副电源。具体实施方式为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细地说明。需要说明的是，“一种基于照明网络的室内混合定位方法”后续简称“定位方法”；“一种基于照明网络的室内混合定位系统”后续简称“定位系统”；“一种基于照明网络的室内混合定位装置”后续简称“定位装置”；其中，定位装置包括一级主控装置和二级照明定位装置。实施例一一种基于照明网络的室内混合定位方法包括：步骤S1：通过定位装置获取在观察时间内矿井的环境数据；需要说明的是，观察时间是矿工进入矿井前的安全等待时间，一般观察时间设置为2小时，系统开发人员可以在矿井负责人的要求下自行变更观察时间。请参阅图2和图3，步骤S1的步骤如下：需要说明的是，以一级主控装置垂直向下为正方向，按相对于正方向的“东北——西北——西南——东南”四个方向，依次把地下矿区分为A区、B区、C区和D区，每个区域的面积不强制要求相同。步骤S11：通过定位系统获取一级主控装置的位置，记作基点位置；步骤S12：通过二级照明定位装置，获取各个二级照明定位装置距离一级主控装置的相对位置；步骤S13：分别获取A区、B区、C区和D区对应的二级照明定位装置的个数；步骤S14：通过二级照明定位装置，获取矿井垂直方向和水平方向对应的各矿洞或矿井的长度、宽度和高度；步骤S15：通过二级照明定位装置，获取矿井内各矿洞内的氧气含量、水蒸气含量和有害气体含量；需要说明的是，有害气体代指矿井中一氧化碳、二氧化碳、甲烷硫化氢等危害人体的气体。步骤S16：把基点位置、相对位置、矿洞的长度、宽度和高度、氧气含量和有害气体含量，作为环境数据。步骤S2：根据环境数据计算矿井的安全指数，得到矿井的安全区范围；步骤S2的步骤如下：步骤S21：以“基点位置”为原点；以原点的正北方向为z轴，正东方向为y轴，垂直向下方向为z轴构建空间坐标系；步骤S22：请参阅图4，把二级照明定位装置的相对位置带入空间坐标系中；步骤S23：分别统计A区、B区、C区和D区对应的二级照明定位装置的个数，记作An、Bn、Cn和Dn；步骤S24：请参阅图5，计算A区的安全指数；步骤S241：A区，把垂直向上正对原点的二级照明定位装置标号为1，按水平远离原点的方向依次对A区内所有的二级照明定位装置标号；步骤S242：统计A区所有二级照明定位装置，对应的坐标数据和矿洞参数；需要说明的是，矿洞参数中的l表示矿洞长度，w表示矿洞宽度，h表示矿洞高度。1，，矿洞参数：l1、w1、h1；2，，矿洞参数：l2、w2、h2；3，，矿洞参数：l3、w3、h3；……An-1，，矿洞参数：lAn-1、wAn-1、hAn-1；An，，矿洞参数：lAn、wAn、hAn；步骤S243：把A区矿洞按二级照明定位装置的相邻位置，分为An-1个矿洞段；第1个矿洞段：1～2；第2个矿洞段：2～3；第3个矿洞段：3～4；……第An-1个矿洞段：An-1～An；步骤S244：统计每一个矿洞段在观察时间开始时和观察时间结束时，矿洞内的氧气含量、水蒸气含量和有害气体含量；分别记作IA1、IB1和IC1，IA2、IB2和IC2；步骤S245：依次计算各矿洞段的气体安全指数II；第1个矿洞段：II1～2的计算式如下：；第2个矿洞段：II2～3的计算式如下：；第3个矿洞段：II3～4的计算式如下：；……以此类推，第An-1个矿洞段：IIAn-1～An的计算式如下：；步骤S246：依次计算各矿洞段的位置安全指数D；第1个矿洞段：D1～2的计算式如下：；第2个矿洞段：D2～3的计算式如下：；第3个矿洞段：D3～4的计算式如下：；……以此类推，第An-1个矿洞段：DAn-1～An的计算式如下：；步骤S246：依次计算各矿洞段的环境安全指数SA；第1个矿洞段：SA1～2的计算式如下：SA1～2＝II1～2*；第2个矿洞段：SA2～3的计算式如下：SA2～3＝II2～3*；第3个矿洞段：SA3～4的计算式如下：SA3～4＝II3～4*；……以此类推，第An-1个矿洞段：SAAn-1～An的计算式如下：SAAn-1～An＝IIAn-1～An*；步骤S247：依次计算各矿洞的空间安全指数SP；第1个矿洞段：SP1～2的计算式如下：SP1～2＝－；第2个矿洞段：SP2～3的计算式如下：SP2～3＝－；第3个矿洞段：SP3～4的计算式如下：SP3～4＝－；……以此类推，第An-1个矿洞段：SPAn-1～An的计算式如下：SPAn-1～An＝－；步骤S248：依次计算各矿洞的综合安全指数S；第1个矿洞段：S1～2的计算式如下：S1～2＝SA1～2*SP1～2；第2个矿洞段：S2～3的计算式如下：S2～3＝SA2～3*SP2～3；第3个矿洞段：S3～4的计算式如下：S3～4＝SP3～4*SP3～4；……以此类推，第An-1个矿洞段：SAn-1～An的计算式如下：SAn-1～An＝SAAn-1～An*SPAn-1～An；步骤S249：确定A区安全范围；步骤S2491：把综合安全指数S按降序排列，得到集合BA；步骤S2492：从集合BA的首项开始遍历，标记出第一个综合安全指数S小于或者等于0的矿洞段，记为终止项；步骤S2493：把集合BA中从首项到终止项对应的矿洞段记为A区安全范围；步骤S25：用步骤S241～步骤S249的相同执行步骤，依次计算B区、C区和D区对应的安全范围。步骤S3：获取矿工人员的移动数据；根据移动数据判断工人是否位于矿井安全区；若位于，则根据移动数据构建矿工移动模型；若不位于，则报警；步骤S3的步骤如下：步骤S31：通过二级照明定位装置获取矿工人员的当前位置和当前时间；步骤S32：判断矿工人员的当前位置是否位于安全区范围；若位于，则执行步骤S33，构建矿工移动模型；若不位于，则监测矿工的移动方向，二级照明定位装置进入警戒状态，执行步骤S34；步骤S33：构建矿工移动模型；步骤S331：把矿工人员当前位置代入上述步骤S21构建的空间坐标系中，得到矿工的起止位置坐标；步骤S332：通过二级照明定位装置，分别获取矿工人员在x轴、y轴和z轴上对应的各时刻的移动速度和移动加速度，分别记作vx、vy和vz，ax、ay和az；步骤S333：把当前时间记作t0，构建矿工移动模型，其中t表示时间；x轴移动；；y轴移动；；z轴移动；；步骤S34：选择距离矿工当前位置最近的安全区，作为第一安全区，获取矿工当前位置距离第一安全区的距离记作r；步骤S35：利用步骤S331～步骤S332相同的方法，通过二级照明定位装置，获取矿工人员的当前位置；矿工在x轴、y轴和z轴上对应的各时刻的移动速度和移动加速度，分别记作vvx、vvy和vvz，aax、aay和aaz；步骤S36：计算矿工距离第一安全区的移动距离Δr；步骤S361：把vvx、vvy和vvz，aax、aay和aaz，代入步骤S333的公式中，计算Xr、Yr和Zr；用vvx替换vx，vvy替换vy，vvz替换vz；用aax替换ax，aay替换ay，aaz替换az；步骤S362：计算Δr；；步骤S37：判断Δr是否大于0；若Δr大于0，则说明矿工正在接近第一安全区，二级照明定位装置维持警戒状态，直至矿工进入第一安全区；若Δr小于或者等于0，则说明矿工正在远离第一安全区，二级照明定位装置维持警戒状态，执行步骤S38；步骤S38：判断第一安全区周围是否存在安全区；若存在，则说明矿工正在接近安全区，二级照明定位装置维持警戒状态，直至矿工进入第一安全区；若不存在，则说明矿工正在远离安全区，二级照明定位装置由警戒状态变为报警状态，进行灯光和语音报警。步骤S4：根据矿工移动模型控制照明装置工作；步骤S4的步骤如下：步骤S41：通过二级照明定位装置持续获取矿工相对于原点的位置数据、时间、速度数据和加速度数据；步骤S42：把步骤S41获取的数据代入步骤S33构建矿工移动模型中，计算矿工的移动位置；步骤S43：依次控制矿工的移动位置区域对应的二级照明定位装置开启照明功能。实施例二一种基于照明网络的室内混合定位系统包括：数据获取模块、数据处理模块、人员监测模块、照明装置综合控制模块、数据库以及控制器；其中，数据获取模块、数据处理模块、人员监测模块以及照明装置综合控制模块分别与数据库和控制器相连。数据库：用于存储观察时间。数据获取模块：用于获取矿井观察时间内矿井的环境数据；数据获取模块的工作流程如下：数据获取模块通过数据库获取观察时间；数据获取模块关联一级主控装置和二级照明定位装置；数据获取模块调用上述步骤S11～步骤S16的方法，获取观察时间内矿井的环境数据，并把环境数据发送至数据处理模块。数据处理模块：用于根据环境数据计算矿井的安全指数，得到矿井安全范围；数据处理模块的工作流程如下：数据处理模块接收环境数据，调用上述步骤S21～步骤S25的方法，计算矿井的安全范围。人员监测模块：用于获取矿工人员的移动数据；根据移动数据判断工人是否位于矿井安全区；若位于，则不报警；若不位于，则报警；人员监测模块的工作流程如下：人员监测模块调用上述步骤S31～步骤S38的方法，监测矿工是否位于安全区，并报警；照明装置综合控制模块：用于实时获取照明装置的灯具数据；根据移动数据和灯具数据调整照明装置；照明装置综合控制模块的流程如下：流程A1：照明装置综合控制模块调用上述步骤S41～步骤S43的方法，实现根据移动数据调整照明装置；流程A2：照明装置综合控制模块关联一级主控装置和二级照明定位装置，通过步骤S11～步骤S12和步骤S21～步骤S24的方法，分别获取A区、B区、C区和D区所有二级照明定位装置的总个数和故障个数，得到灯具数据，分别记作mA、mB、mC和mD，uA、uB、uC和uD；流程A3：计算A区、B区、C区和D区的故障率N；NA＝uA/mA，NB＝uB/mB，NC＝uC/mC，ND＝uD/mD；流程A4：判断A区的故障率NA是否大于或者等于0.5；若故障率NA大于或者等于0.5；则A区内所有二级照明定位装置全部进入警戒状态，语音播报矿工撤离信息，由灯具数据控制二级照明定位装置；若故障率NA小于0.5；则A区内出现故障的二级照明定位装置进入警戒状态，其他二级照明定位装置不变，由移动数据控制二级照明定位装置；流程A5：照明装置综合控制模块利用流程A4同样的方法，调整、B区、C区和D区的二级照明定位装置。实际例三一种基于照明网络的室内混合定位装置包括：一级主控装置和二级照明定位装置；其中一级主控装置搭载定位系统，安置在矿井上方的地面位置，用于联动二级照明定位装置；二级照明定位装置，安置在矿井内部，用于矿工人员照明定位。需要说明的是，一个矿区一级主控装置只有一个，二级照明定位装置有多个；一级主控装置一般默认安装在地面矿井入口处。二级照明定位装置包括：钉形固定式矿井照明定位装置和水平可移动式矿井照明定位装置；需要说明的是，“钉形固定式矿井照明定位装置”简称“钉形装置”；“水平可移动式矿井照明定位装置”简称“移动装置”。请参阅图6和图7，钉形固定式矿井照明定位装置包括：灯组1、旋转组件2、灯体3、联动装置一11、联动装置二12和联动装置三13；旋转组件：用于矿工手动或系统自动调整灯组照射角度；请参阅图9，灯体3：用于搭载灯组1，包括多功能组件31、电源选择器32、语音播报组件33、主电源34和副电源35；多功能组件31包括：气体检测组件，用于检测矿洞内的氧气、水蒸气和有害气体含量；录像识别组件，用于矿洞实时录像和识别矿洞录像中的矿工，若录像出现矿工则开启照明，若录像未出现矿工则关闭照明；测速组件，用于检测矿工的移动速度和移动加速度；定位组件，用于获取二级照明定位装置的相对位置；故障检测组件，用于检测灯组是否有电流通过；若有则说明灯组正常；若无，则说明灯组异常；电源选择器32：用于检测主电源的剩余带电量，若主电源34的剩余带电量小于或者等于30%，则切换副电源35；请参阅图7，联动装置一11、联动装置二12和联动装置三13：用于将钉形固定式矿井照明定位装置固定在矿洞岩壁上；矿工在需要安装钉形装置的位置上打孔，将钉形装置放入孔中，旋转联动装置一11，联动装置一11带动联动装置二12的锯齿结构和联动装置三13的钩爪结构，使钉形装置固定；请参阅图8，水平可移动式矿井照明定位装置包括：灯组1、旋转组件2、灯体3、机械结构21和基座22；其中移动装置的灯组1、旋转组件2和灯体3与钉形装置对应的结构功能相同；机械结构21，用于移动装置调整灯组高度；基座22，用于移动装置移动。需要说明的是，在本发明申请中，若出现相应的计算公式，则上述计算公式均是去量纲取其数值计算，公式中存在的权重系数、比例系数等系数，其设置的大小是为了将各个参数进行量化得到的一个结果值，关于权重系数和比例系数的大小，只要不影响参数与结果值的比例关系即可。最后应说明的是：以上所述实施例，仅为本发明的具体实施方式，用以说明本发明的技术方案，而非对其限制，本发明的保护范围并不局限于此，尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，其依然可以对前述实施例所记载的技术方案进行修改或可轻易想到变化，或者对其中部分技术特征进行等同替换；而这些修改、变化或者替换，并不使相应技术方案的本质脱离本发明实施例技术方案的精神和范围，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以所述权利要求的保护范围为准。
