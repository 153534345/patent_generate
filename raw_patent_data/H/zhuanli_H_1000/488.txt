标题title
一种基于梯级径流式水电的光伏波动平滑控制方法与系统
摘要abst
本发明公开了一种基于梯级径流式水电的光伏波动平滑控制方法及系统，该方法接收水光发电系统的发电计划，确定每个径流式水电站中的灵活调节机组及其平滑容量，采集光伏电站电力数据，确认光伏电站总的有功功率输出以及有功功率变化速率；根据发电计划、光伏有功功率以及变化速率，采用就地平滑原则控制径流式水电站的出力；对于光伏波动快速分量，控制光伏电站对应连接的径流式水电站的灵活调节机组的输出功率平滑光伏波动；对于光伏波动慢速分量，控制所有径流式水电站的灵活调节机组的输出功率平滑光伏波动。通过对不同波动的光伏出力进行不同策略的平滑，实现实时功率优化分配，提升水光联合送出功率的响应时间、调节精度和调节速度。
权利要求书clms
1.一种基于梯级径流式水电的光伏波动平滑控制方法，其特征在于，包括以下步骤：步骤1：接收水光发电系统的发电计划，所述水光发电系统包括梯级径流式水电站、光伏电站；梯级径流式水电站包括若干径流式水电站，若干径流式水电站为阶梯式分布，所述光伏电站通过开关站与径流式水电站连接；步骤2：确定每个径流式水电站中的灵活调节机组，所述灵活调节机组为径流式水电站中调节性能或爬坡率最优的发电机组；步骤3：采集光伏电站电力数据，确认光伏电站总的有功功率及其变化速率，有功功率变化速率包括快速和慢速；步骤4：根据发电计划、光伏电站总的有功功率及其变化速率，采用就地平滑控制原则控制径流式水电站的发电出力；对于光伏电站的快速光伏出力波动，控制光伏电站对应连接的径流式水电站的灵活调节机组的输出功率平滑光伏波动；对于光伏电站的慢速光伏出力波动，控制所有径流式水电站的灵活调节机组的输出功率平滑光伏波动。2.根据权利要求1所述的光伏波动平滑控制方法，其特征在于，所述水光发电系统的发电计划为发电计划曲线或水光发电系统的总有功功率设定值；所述发电计划通过集控控制下发或者调度控制下发；所述集控控制为集控中心操作人员通过系统的人机接口单元，根据调度控制的发电计划曲线或调度指令手动下发水光发电系统的总有功功率设定值；所述调度控制为系统自动跟踪执行电网调度机构下发的发电计划曲线或水光发电系统的总有功功率设定值。3.根据权利要求2所述的光伏波动平滑控制方法，其特征在于，所述有功功率变化速率的计算：以为阈值，计算10秒内的光伏变化出力的快速分量/＞和慢速分量：；；其中，为光伏波动基准速率，/＞为计算周期中光伏出力变化速率大于阈值/＞的采集点数； /＞为采集点/＞的光伏实时总出力； /＞为采集点/＞的光伏出力变化速率。4.根据权利要求3所述的光伏波动平滑控制方法，其特征在于，所述步骤2中还包括确定灵活调节机组的平滑容量，每台灵活调节机组的平滑容量按照梯级各水电站发电容量成比例计算：；其中，为第/＞级径流式水电站的灵活调节机组的平滑容量；/＞为第/＞级径流式水电站中第/＞台处于发电状态的水电机组的额定出力；/＞为梯级径流式水电站的总级数；/＞为第/＞级径流式水电站中的处于发电状态的水电机组总数量；/＞为第/＞级径流式水电站对应的光伏电站的平滑容量。5.根据权利要求4所述的光伏波动平滑控制方法，其特征在于，所述步骤4中对于光伏变化出力的快速分量的平滑控制；灵活调节机组的平滑出力设定值计算如下：；约束条件为：；其中，为第/＞级径流式水电站的灵活调节机组的新的灵活调节功率设定值，/＞为第/＞级径流式水电站的灵活调节机组的原功率设定值；为与第/＞级径流式水电站电气连接的光伏电站快速出力波动； /＞为第/＞级径流式水电站中处于发电状态的水电机组的额定出力；若快速分量的光伏波动出力大于灵活调节机组的平滑容量时，则按发电机组容量成比例原则同时调节与光伏电站电气连接的径流式水电站所有发电状态的水电机组出力；计算公式如下：；约束条件为：；式中：为第/＞级径流式水电站中处于发电状态的水电机组的原功率设定值；对于光伏变化出力的慢速分量的平滑控制；灵活调节机组的平滑出力设定值计算如下：；其中，为第/＞个光伏电站慢速出力波动，/＞为光伏电站总数；若慢速分量的光伏波动出力大于所有灵活调节机组的平滑容量时，则按发电机组容量成比例原则调节整个梯级流域发电状态的水电机组出力；计算公式如下：。6.根据权利要求2所述的光伏波动平滑控制方法，其特征在于，还包括步骤5，采用基于动态最优水位的梯级水光协调控制方法，在保证光伏出力的全额消纳，基于发电计划，根据各径流式水电站的动态最优水位和水库运行区对各径流式水电站的出力进行调节，所述水库运行区包括正常运行区、高位运行区、高位风险区、低位运行区和低位风险区；具体为：当实时水位处于正常运行区时，对径流式水电站的负荷分配按照各径流式水电站的发电容量成比例进行计算；当实时水位处于高位运行区或低位运行区时，按照偏离最优动态水位差成比例来分配各径流式水电站的出力，使得各径流式水电站的实时水位恢复至正常运行区；当某径流式水电站的实时水位处于高位风险区或低位风险区时，对处于高位风险区的径流式水电站的所有发电机组立即以最大出力运行，同时控制处于停机态的径流式水电站的发电机组以最大出力并网发电；处于低位风险区的水电站则所有发电机组立即减载至零负荷并网运行；当所有径流式水电站同时处于高位/低位风险区时，若所有径流式水电站同时处于高位风险区时，将梯级流域所有可发电机组全部满发运行，同时开启各电站泄洪闸门；若所有径流式水电站同时处于低位风险区时则立即将所有发电机组进行减载停机。7.一种基于梯级径流式水电的光伏波动平滑控制系统，其特征在于，包括梯级径流式水电站、若干光伏电站、开关站、变电站、联合运行控制系统；梯级径流式水电站包括若干径流式水电站，若干径流式水电站为阶梯式分布，所述光伏电站通过开关站与径流式水电站连接，开关电站输出端通过变电站与电网连接：所述径流式水电站包括灵活调节机组，所述灵活调节机组为径流式水电站中调节性能或爬坡率最优的发电机组；联合运行控制系统包括数据采集单元、计算单元、协调控制单元；数据采集单元，用于采集光伏电站电力数据；计算单元，用于根据采集的光伏电站电力数据，确认光伏电站总的有功功率及其变化速率，有功功率变化速率包括快速分量和慢速分量；协调控制单元，用于根据发电计划、光伏电站总的有功功率及其变化速率，采用就地平滑控制原则控制径流式水电站的发电出力；对于光伏电站的快速光伏出力波动，控制光伏电站对应连接的径流式水电站的灵活调节机组的输出功率平滑光伏波动；对于光伏电站的慢速光伏出力波动，控制所有径流式水电站的灵活调节机组的输出功率平滑光伏波动。8.根据权利要求7所述的光伏波动平滑控制系统，其特征在于，所述水光发电系统的发电计划为发电计划曲线或水光发电系统的总有功功率设定值；所述发电计划通过集控控制下发或者调度控制下发；所述集控控制为集控中心操作人员通过系统的人机接口单元，根据调度控制的发电计划曲线或调度指令手动下发水光发电系统的总有功功率设定值；所述调度控制为系统自动跟踪执行电网调度机构下发的发电计划曲线或水光发电系统的总有功功率设定值。9.一种计算机设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至6中任一项所述方法的步骤。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至6中任一项所述的方法的步骤。
说明书desc
技术领域本发明涉及发电系统的稳定性，具体是涉及一种基于梯级径流式水电的光伏波动平滑控制方法与系统。背景技术由于风力和光伏等可再生能源具有随机性、波动性、间歇性等特点，增大了系统的安全运行风险，严重限制了电网的接纳能力，造成弃光问题严重。为促进风电、光伏等间歇性能源的并网消纳，降低新能源并网对电网的冲击，根据风光等新·能源发电功率特性，提出了水风光多能互补方法，实现水电与新能源在中长期电量和短期电力的互补发电。基于梯级水库的潜在调蓄能力，在梯级水电区域内合理配置一定的光伏容量，可以有效提高水光电力供给的连续性和均衡性、互补性。现有技术中，申请号为CN201510007143.X的专利申请公开了一种光伏电站与水电站联合运行系统及运行方法，其结合光伏发电的出力特性与水电站的发电特性，通过分析对水电站下游电站和电网的影响，计算接入水电站的光伏电站的规模，组成联合运行系统，通过制定用水电站补偿光伏电站的控制方法、制定AGC、AVC控制方法和水量平衡试验方法，运行该联合运行系统。该发明虽然利用水电站调节能力强且调节快速等特点，对波动性大的光伏电站进行补偿，但光伏电站接入到水电站中同时监控，调节灵活性欠缺，且未考虑相关机组工况、安全约束等条件。论文：王子伊,王玮,马伟,等. 梯级水光蓄互补发电系统实时协调控制策略.电网技术,2021,45:871-880,中插4. DOI:10.13335/j.1000-3673.pst.2020.0579.，针对互补发电系统的实时控制问题，首先提出了基于经验模态分解法的全功率变速恒频抽蓄机组平抑P V功率波动控制策略，根据经EMD法提取的P V功率波动的高慢速分量，自适应确定平抑目标，并根据调度计划协调分配CSHP及FSC-VSCFPSU的输出功率，以最小化系统出力与调度计划的偏差，确保系统平稳跟踪调度计划运行。其中平抑光伏功率波动的策略基于历史光伏功率数据，与实际运行环境存在差别，调节精准度欠缺。申请号为CN202210383851.3的专利申请公开了一种梯级水电与光伏互补发电系统及控制方法，其公开的梯级水电与光伏互补发电系统及控制方法采用流量平衡来分配梯级各电站的出力，并使用流量阈值进行电站分配值的校核。该方法未考虑丰水期、平水期和枯水期对梯级电站库容的影响，也未考虑光伏出力频繁波动对水光联合运行的影响。由于径流式水电缺少较大的水库库容，如何充分利用梯级径流式水电的综合调控能力，实现梯级径流式水电与风光新能源的实时协调控制，同时满足电力调度机构对水风光储一体化运行的响应时间、调节速度和调节精度的要求，需要进一步研究。发明内容发明目的：针对以上缺点，本发明提供一种提升梯级水光联合运行性能的基于梯级径流式水电的光伏波动平滑方法及系统。技术方案：为解决上述问题，本发明采用一种基于梯级径流式水电的光伏波动平滑控制方法，包括以下步骤：步骤1：接收水光发电系统的发电计划，所述水光发电系统包括梯级径流式水电站、光伏电站；梯级径流式水电站包括若干径流式水电站，若干径流式水电站为阶梯式分布，所述光伏电站通过开关站与径流式水电站连接；步骤2：确定每个径流式水电站中的灵活调节机组，所述灵活调节机组为径流式水电站中调节性能或爬坡率最优的发电机组；步骤3：采集光伏电站电力数据，确认光伏电站总的有功功率及其变化速率，有功功率变化速率包括快速和慢速；步骤4：根据发电计划、光伏电站总的有功功率及其变化速率，采用就地平滑控制原则控制径流式水电站的发电出力；对于光伏电站的快速光伏出力波动，控制光伏电站对应连接的径流式水电站的灵活调节机组的输出功率平滑光伏波动；对于光伏电站的慢速光伏出力波动，控制所有径流式水电站的灵活调节机组的输出功率平滑光伏波动。进一步的，所述水光发电系统的发电计划为发电计划曲线或水光发电系统的总有功功率设定值；所述发电计划通过集控控制下发或者调度控制下发；所述集控控制为集控中心操作人员通过系统的人机接口单元，根据调度控制的发电计划曲线或调度指令手动下发水光发电系统的总有功功率设定值；所述调度控制为系统自动跟踪执行电网调度机构下发的发电计划曲线或水光发电系统的总有功功率设定值。进一步的，所述有功功率变化速率的计算：以为阈值，计算10秒内的光伏变化出力的快速分量/＞和慢速分量/＞：；；其中，为光伏波动基准速率，/＞为计算周期中光伏出力变化速率大于阈值/＞的采集点数； /＞为采集点/＞的光伏实时总出力； /＞为采集点/＞的光伏出力变化速率。进一步的，所述步骤2中还包括确定灵活调节机组的平滑容量，每台灵活调节机组的平滑容量按照梯级各水电站发电容量成比例计算：；其中，为第/＞级径流式水电站的灵活调节机组的平滑容量；/＞为第/＞级径流式水电站中第/＞台处于发电状态的水电机组的额定出力；/＞为梯级径流式水电站的总级数；/＞为第/＞级径流式水电站中的处于发电状态的水电机组总数量；/＞为第/＞级径流式水电站对应的光伏电站的平滑容量。进一步的，所述步骤4中对于光伏变化出力的快速分量的平滑控制；灵活调节机组的平滑出力设定值计算如下：；约束条件为：；其中，为第/＞级径流式水电站的灵活调节机组的新的灵活调节功率设定值，/＞为第/＞级径流式水电站的灵活调节机组的原功率设定值；为与第/＞级径流式水电站电气连接的光伏电站快速出力波动； /＞为第/＞级径流式水电站中处于发电状态的水电机组的额定出力；若快速分量的光伏波动出力大于灵活调节机组的平滑容量时，则按发电机组容量成比例原则同时调节与光伏电站电气连接的径流式水电站所有发电状态的水电机组出力；计算公式如下：；约束条件为：；式中：为第/＞级径流式水电站中处于发电状态的水电机组的原功率设定值；对于光伏变化出力的慢速分量的平滑控制；灵活调节机组的平滑出力设定值计算如下：；其中，为第/＞个光伏电站慢速出力波动，/＞为光伏电站总数；若慢速分量的光伏波动出力大于所有灵活调节机组的平滑容量时，则按发电机组容量成比例原则调节整个梯级流域发电状态的水电机组出力；计算公式如下：。进一步的，还包括步骤5，采用基于动态最优水位的梯级水光协调控制方法，在保证光伏出力的全额消纳，基于发电计划，根据各径流式水电站的动态最优水位和水库运行区对各径流式水电站的出力进行调节，所述水库运行区包括正常运行区、高位运行区、高位风险区、低位运行区和低位风险区；具体为：当实时水位处于正常运行区时，对径流式水电站的负荷分配按照各径流式水电站的发电容量成比例进行计算；当实时水位处于高位运行区或低位运行区时，按照偏离最优动态水位差成比例来分配各径流式水电站的出力，使得各径流式水电站的实时水位恢复至正常运行区；当某径流式水电站的实时水位处于高位风险区或低位风险区时，对处于高位风险区的径流式水电站的所有发电机组立即以最大出力运行，同时控制处于停机态的径流式水电站的发电机组以最大出力并网发电；处于低位风险区的水电站则所有发电机组立即减载至零负荷并网运行；当所有径流式水电站同时处于高位/低位风险区时，若所有径流式水电站同时处于高位风险区时，将梯级流域所有可发电机组全部满发运行，同时开启各电站泄洪闸门；若所有径流式水电站同时处于低位风险区时则立即将所有发电机组进行减载停机。本发明还采用一种基于梯级径流式水电的光伏波动平滑系统，包括梯级径流式水电站、若干光伏电站、开关站、变电站、联合运行控制系统；梯级径流式水电站包括若干径流式水电站，若干径流式水电站为阶梯式分布，所述光伏电站通过开关站与径流式水电站连接，开关电站输出端通过变电站与电网连接：所述径流式水电站包括灵活调节机组，所述灵活调节机组为径流式水电站中调节性能或爬坡率最优的发电机组；联合运行控制系统包括数据采集单元、计算单元、协调控制单元；数据采集单元，用于采集光伏电站电力数据；计算单元，用于根据采集的光伏电站电力数据，确认光伏电站总的有功功率及其变化速率，有功功率变化速率包括快速分量和慢速分量；协调控制单元，用于根据发电计划、光伏电站总的有功功率及其变化速率，采用就地平滑控制原则控制径流式水电站的发电出力；对于光伏电站的快速光伏出力波动，控制光伏电站对应连接的径流式水电站的灵活调节机组的输出功率平滑光伏波动；对于光伏电站的慢速光伏出力波动，控制所有径流式水电站的灵活调节机组的输出功率平滑光伏波动。进一步的，所述水光发电系统的发电计划为发电计划曲线或水光发电系统的总有功功率设定值；所述发电计划通过集控控制下发或者调度控制下发；所述集控控制为集控中心操作人员通过系统的人机接口单元，根据调度控制的发电计划曲线或调度指令手动下发水光发电系统的总有功功率设定值；所述调度控制为系统自动跟踪执行电网调度机构下发的发电计划曲线或水光发电系统的总有功功率设定值。本发明还采用一种计算机设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述方法的步骤。本发明还采用一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现上述的方法的步骤。有益效果：本发明相对于现有技术，其显著优点是通过对不同波动的光伏出力进行不同策略的平滑，用于指导梯级水电与光伏互补联合发电系统的出力控制，从而使梯级水光的联合运行能够实现实时功率优化控制，减少弃光电量，以实现对光电资源的充分利用，有效提高新能源企业的发电效益。提升现有梯级径流式水电与光伏互补协调运行中所存在的联合送出功率的响应时间、调节精度和调节速度，提升梯级水光联合运行的可靠性、稳定性和平滑性，提高梯级水光联合运行的频率和电压质量，降低风光新能源接入时对电网的冲击，并降低中小型水电基地新能源的建设成本和运维成本。附图说明图1为本发明中典型梯级径流式水电站与集中式光伏电站的拓扑结构图。图2为本发明中梯级水光联合运行控制系统结构图。图3为日调节水库运行区划分图。图4为基于动态最优水位的梯级水光协调控制方法流程图。具体实施方式实施例1本实施例中一种基于梯级径流式水电的光伏波动平滑控制方法，包括以下步骤：步骤1：接收水光发电系统的发电计划，所述水光发电系统包括梯级径流式水电站、光伏电站；梯级径流式水电站包括若干径流式水电站，若干径流式水电站为阶梯式分布，所述光伏电站通过开关站与径流式水电站连接；步骤2：确定每个径流式水电站中的灵活调节机组，所述灵活调节机组为径流式水电站中调节性能或爬坡率最优的发电机组；步骤3：采集光伏电站电力数据，确认光伏电站总的有功功率及其变化速率，有功功率变化速率包括快速和慢速；步骤4：根据发电计划、光伏电站总的有功功率及其变化速率，采用就地平滑控制原则控制径流式水电站的发电出力；对于光伏电站的快速光伏出力波动，控制光伏电站对应连接的径流式水电站的灵活调节机组的输出功率平滑光伏波动；对于光伏电站的慢速光伏出力波动，控制所有径流式水电站的灵活调节机组的输出功率平滑光伏波动。本实施例中以某中小型水电基地梯级径流式水电站和光伏电站为例：梯级径流式电站包含3个径流式水电站，各径流式水电站均具备日调节库容；光伏电站为集中式光伏发电，通过升压站接入径流式水电站110kV开关站，并利用水电线路形成水光打捆送出。梯级径流式水电与光伏互补联合运行，通过梯级水电机组的分钟级调节特性，与集中式光伏实现平滑控制和协调控制，从而在分钟级时间尺度上完成梯级水光的实时电力互补；此外，梯级水电与光伏的联合运行可显著改善响应时间、调节精度和调节速度，实现水光联合运行对区域电网的主动支撑。典型梯级径流式水电站与集中式光伏电站的拓扑结构如图1所示。本方法以此梯级径流式电站与集中式光伏电站为例阐述具体的实施方式。接收水光发电系统的发电计划, 可执行来自电力调度机构的梯级水电与光伏的发电计划曲线或总出力指令，也可执行集控中心控制室运行人员的手动梯级水光总负荷指令，完成对梯级水光联合运行控制系统总有功功率的实时调节控制，从而满足电网调度机构对梯级水电与光伏联合运行的响应时间、调节精度和调节速度的要求。梯级水光联合运行控制系统支持以下运行模式：控制方式：控制方式是指梯级水光联合运行控制系统的控制权。当控制权为集控中心时处于集控控制方式；控制权为电网调度时处于调度控制方式。集控控制方式下，集控中心值班人员通过系统的人机接口单元，根据调度的发电计划曲线或电话调度指令手动下发梯级水光的总有功设定；处于调度控制时，系统自动跟踪执行调度远动通信的总有功设定或发电计划曲线。设定方式：设定方式是指梯级水光联合运行控制系统二次调频指令的来源方式。当系统设定方式为定值方式时，梯级水光总有功设定来源于集控手动设定值或调度自动设定值；当系统设定方式为曲线方式时，梯级水光总有功设定来源于调度发电计划曲线。运行方式：运行方式是指梯级水光联合运行控制系统与交流电网的连接方式。当系统运行方式为并网运行时，梯级水光联合运行控制系统与交流电网处于并网运行状态，系统接受电网调度机构的控制，保持区域梯级水电与光伏打捆出力的平滑输出；当系统运行方式为离网运行时，梯级水光联合运行控制系统与交流电网断开连接，处于孤网运行状态，此时系统的主要功能是维持区域电网内频率和电压的稳定。采集光伏电站电力数据，确认光伏电站总的有功功率输出以及有功功率变化速率，本方法中以固定倍数光伏实时出力采集周期为滤波计算周期，以光伏波动基准速率为阈值，光伏波动速率在阈值以下光伏波动均值作为光伏波动慢速分量，光伏波动速率在阈值以上的光伏波动均值作为光伏波动快速分量。计算实时光伏变化速率：光伏的分钟级滤波方法，以梯级水光联合运行控制系统的数据采集单元所采集的光伏实时总出力及其变化速率进行计算。数据采集单元的轮询周期约为500ms，因此通过每2个轮询周期即1秒钟为采集周期，以10秒钟为计算周期，连续采集10秒钟即10个数据点，形成光伏出力离散数组，并按以下公式计算光伏的变化速率：；《GB∕T 19964 光伏发电站接入电力系统技术规定》中明确要求光伏发电站有功功率变化速率不应超过10%装机容量/min，允许出现因太阳能辐照度降低而引起的光伏发电站有功功率变化速率超出限值的情况。本方法中，以10%装机容量/min为光伏波动基准速率，也可按实际工程要求确定/＞。；式中：为集中式光伏电站额定装机容量。光伏波动快速和慢速分量计算：以为阈值，按下式计算10秒内的光伏变化出力的快速分量/＞：；以为阈值，按下式计算10秒内的光伏变化出力的慢速分量/＞：；式中：为计算周期中光伏出力变化速率大于阈值的采集点数。确定每个径流式水电站中的灵活调节机组，灵活调节电源通常指电源侧灵活调节资源，包括具备快速灵活调节特性的水电、抽蓄、新型储能电站、燃气轮机等。灵活调节电源是电力系统适应不确定性和负荷波动性的重要保障，也是满足不同时间尺度维持系统运行性能的重要要求。随着新能源发电占比的提高，电源波动性成为灵活调节电源的主要因素，反映电源灵活性的指标不仅包括可调节能力，还包括爬坡速率和启停时间等，本方法中灵活调节电源为梯级径流式水电机组。梯级水光联合运行过程中面临如何平衡电力调度二次调频和光伏波动平抑的需求，因此用于光伏波动平抑的灵活调节机组需考虑机组运行工况、综合性价比等因素，既要降低调速器频繁调节带来的接力器磨损等额外成本，同时在满足调度要求的同时提高水光联合运行的经济性。灵活调节水电机组的选取：由于水电机组的有功功率调节依赖于调速器、导叶等机械设备的调节性能，因此水电的灵活调节机组通常选择梯级径流式各电站中调节性能或爬坡率最优的机组，即选择每个水电站中的调节性能最好的单台水电机组作为灵活调节机组；此外，考虑机组运行的经济性，在实际操作中可以调节性能较好的若干台机组作为灵活调节机组，并采用定期轮换方式来参与功率调节。根据光伏电站历史出力计算光伏出力变化：灵活调节机组确定后，在灵活调节机组运行过程中需要保持一定的灵活调节备用容量作为平抑光伏波动的平滑容量，该平滑容量需要保持合理数值，容量太小会影响平滑效果，容量太大则不利于水电机组运行效益，本方法中以光伏电站日前历史光伏出力波动均值为基准进行计算。①计算日前光伏出力波动均值：以10秒钟为分辨率，提取光伏监控系统中前一天的光伏出力数据，形成日前光伏出力序列，并计算光伏电站日前光伏出力波动的均值：；式中：为独立运行的第i个集中式光伏电站日前光伏出力波动均值；/＞为日前光伏出力序列中的光伏出力离散点数。②取日前光伏出力波动均值和的最大值为该光伏电站的平滑容量：；式中：为对应第i个集中式光伏电站的平滑容量；/＞为第i个集中式光伏电站的额定装机容量。③灵活调节水电机组的平滑容量每台灵活调节机组的平滑容量按照梯级各水电站发电容量成比例计算：；式中：为第i级径流式水电站的灵活调节机组的平滑容量；/＞为第级径流式水电站中第j台处于发电状态的水电机组的额定出力；/＞为梯级径流式电站的级数，本实施例中/＞；/＞为梯级径流式第i级电站中的处于发电状态的水电机组总数量。光伏出力的分钟级平滑控制策略：本实施例中，对于光伏电站出力波动的快速分量和慢速分量，采用就近平滑原则，即对于光伏电站的快速光伏出力波动，由光伏电站所接入开关站的水电站灵活调节机组分别承担；对于光伏电站的慢速光伏出力波动，则由梯级径流式的所有灵活调节机组共同承担。快速光伏波动分量的平滑控制由于每个集中式光伏电站均接入临近径流式水电站的开关站，并与水电出力打捆送出至交流电网的变电站，因此，利用与光伏电站有直接电气连接的水电站的机组来平滑光伏的快速波动，从而实现本地水电与光伏的友好送出，提高接入点频率和电压的稳定运行能力。灵活调节机组的平滑出力设定值计算如下：；约束条件为：；式中：为灵活调节机组的原功率设定值；/＞为灵活调节机组的新的灵活调节功率设定值；/＞为与水电站电气连接的集中式光伏电站快速出力波动。当光伏快速波动出力大于灵活调节机组的平滑容量时，则按发电机组容量成比例原则同时调节与光伏电站电气连接的水电站所有发电状态的水电机组出力，计算公式如下：；约束条件为：；式中：为水电机组的原功率设定值。慢速光伏波动分量的平滑控制：对于光伏电站的缓慢出力波动，可同时调节梯级径流式电站内的所有灵活调节机组来实现；这是因为光伏慢速波动是一天内光伏出力的主要趋势性变化，灵活调节机组往往能够很好的跟踪这种缓慢变化，同时又能够最大程度上实现梯级径流式电站间的电力电量平衡。灵活调节机组的平滑出力设定值计算如下：；当光伏慢速波动出力大于灵活调节机组的平滑容量时，则按发电机组容量成比例原则调节整个梯级流域发电状态的水电机组出力，计算公式如下：；梯级径流式水电与光伏的协调控制策略：径流式水电站的日调节水库在一天内水库水位变化明显，上游来水、区间入流或机组出力变化都会使水库水位在几分钟至十几分钟内出现显著波动。梯级径流式水电水位快速变化的特点是梯级径流式水电与光伏协调控制运行所考虑的重要因素，本实施例中提出了一种基于动态最优水位的梯级水光协调控制方法。动态最优水位的计算：结合光伏超短期预测数据和梯级水光日内发电计划曲线，计算出未来15分钟的梯级水电总功率设定值，再按各水电站当前发电容量成比例分配各水电站未来15分钟的电站功率设定，根据日调节水库的库容-水位关系曲线，计算出未来15分钟后的电站水位。①计算未来15分钟后的梯级水电总有功设定值：；式中：为电力调度机构的发电计划曲线值或光蓄总有功设定值；为梯级径流式流域水电的总有功设定值；er为光伏超短期预测数据。②计算未来15分钟后的各水电站有功设定值：；式中：为电力调度机构的发电计划曲线值或光蓄总有功设定值。③计算未来15分钟后的各水电站的水库水位：考虑区间入流和平滑容量，计算未来15分钟后的各电站水库库容：；式中：为第i级水电从/＞时刻起15分钟后的水库库容；/＞为第i级水电从/＞时刻的水库库容； /＞为第i级水电当前时刻的发电效率； /＞为第i级水电当前时刻的净水头；/＞为第i级水电的区间入流；/＞为计算周期，本实施例中为15分钟。根据各电站的库容-水位关系曲线，查出对应的水库水位。④根据初始水库水位和/＞计算未来15分钟内的动态最优水位/＞：。基于动态最优水位的梯级水电与光伏的协调控制策略：梯级径流式水电由于水库调节库容不大，电站水位受来水、出力影响较大，水位会在15分钟-1小时内发生显著变化，本方法针对梯级径流式水电水位快速变化的特点，提出了基于动态最优水位的梯级水电与光伏的协调控制策略。①日调节水库运行区划分：根据日调节水库的最高水位、死水位、最优动态水位以及水位运行死区，结合图3说明日调节水库不同运行区的划分。以最优动态水位为基线，/＞为正常运行水位的死区，/＞即/＞区域为正常运行区，实时水位/＞在正常运行区域范围内时，水电机组处于高效运行区域，在实时水位未偏离正常运行区时，机组出力可维持设定状态一直运行。当实时水位由于机组出力或来水发生变化而向上偏离至高位运行区/＞时，此时水库水位已经偏高位运行，为防止水位过高导致出现漫坝等风险，应尽快采取措施降低水位。当实时水位由于多种因素导致继续向上偏离，并进入高位风险区时，此时水库水位已经接近最高水位，随时会造成漫坝事故，因此应立即采取措施降低水位。当实时水位由于机组出力或来水发生变化而向下偏离至低位运行区/＞时，此时水库水位已经偏低位运行，为防止水位过低导致出现水库拉空等风险，应尽快采取措施提升水位。当实时水位由于多种因素导致继续向下偏离，并进入低位风险区/＞时，此时水库水位已经接近最低水位，随时会造成水库拉空，因此应立即采取措施提升水位。①梯级径流式水电与光伏的协调控制策略：梯级径流式水电与光伏的协调控制策略为：保证光伏出力的全额消纳，不对光伏功率进行调节或限电等控制，根据电力调度机构的发电计划曲线或梯级水光的总有功设定，即二次调频指令来调整梯级径流式水电的出力；二次调频指令变化时，根据梯级径流式各水电的动态最优水位和水库运行区对各水电站的出力进行调节，下面结合图4介绍实现过程。②梯级径流式水电与光伏的协调控制数学模型为：；式中：为电力调度机构的发电计划曲线值或梯级水光总有功设定值；为梯级径流式水电的总有功设定值；/＞为光伏电站实发总出力；/＞为梯级径流式各水电站的有功设定值；/＞为梯级径流式水电站数目。③正常运行区梯级径流式水电的负荷分配策略：当实时水位处于正常运行区/＞时，表明当前梯级径流式水电与光伏处于稳态的能量平衡，此时对梯级水电的负荷分配按照梯级各水电站的发电容量成比例进行计算：；式中：为梯级径流式水电总有功设定的变化值；/＞为梯级径流式各水电站的上次有功设定值；/＞为梯级径流式水电站i的最优动态水位；/＞为梯级径流式水电正常运行区的水位死区。④高位或低位运行区梯级径流式水电的负荷分配策略：当实时水位处于高位运行区/＞或低位运行区/＞时，表明当前梯级径流式水电与光伏已经偏离稳态能量平衡，此时应尽快对梯级各电站出力进行调整，使得各电站实时水位恢复至正常运行区。本方法中，按照偏离最优动态水位差成比例来分配梯级径流式各电站出力：；式中：为梯级径流式水电站i偏离该电站最优动态水位的偏差，为正值；/＞为梯级径流式水电站j偏离该电站最优动态水位的偏差，为负值；/＞为梯级径流式水电单位最优动态水位偏差对应的单位设定值；/＞为梯级径流式水电站i的实时水位；/＞为梯级径流式水电站j的实时水位；/＞为梯级径流式水电站i的最优动态水位；/＞为梯级径流式水电站j的最优动态水位；/＞为梯级径流式水电正常运行区的水位死区；/＞为梯级径流式水电站i的高位风险区下限；/＞为梯级径流式水电站j的低位风险区上限。⑤高位或低位风险区梯级径流式水电的负荷分配策略：当某级电站实时水位处于高位风险区/＞或低位风险区时，表明当前梯级径流式水电与光伏已经严重偏离能量平衡，必须立即大幅度调整梯级电站出力，使得电站实时水位快速恢复至正常运行区。本方法中，处于高位风险区的水电站所有发电机组立即以最大出力运行，同时控制处于停机态的水电机组以最大出力并网发电；处于低位风险区的水电站则所有发电机组立即减载至零负荷并网运行。⑥梯级径流式各电站水位同时处于高位或低位风险区的负荷分配策略：当梯级径流式水电所有电站同时处于高位/低位风险区时，此时梯级流域处于危险运行状态，可能发生漫坝风险或水库拉空事故。当梯级径流式水电所有电站同时处于高位风险区时将梯级流域所有可发电机组全部满发运行，同时开启各电站泄洪闸们；当梯级径流式水电所有电站同时处于低位风险区时则立即将所有发电机组进行减载停机。实施例2如图2所示，本实施例中一种基于梯级径流式水电的光伏波动平滑系统，包括梯级径流式水电站、若干光伏电站、开关站、变电站、联合运行控制系统；梯级径流式水电站包括若干径流式水电站，若干径流式水电站为阶梯式分布，所述光伏电站通过开关站与径流式水电站连接，开关电站输出端通过变电站与电网连接：所述径流式水电站包括灵活调节机组，所述灵活调节机组为径流式水电站中调节性能或爬坡率最优的发电机组；联合运行控制系统由数据采集单元、滤波分析单元、协调控制单元、远动通信单元和人机接口单元组成。梯级水光联合运行控制系统通过与梯级流域各径流式水电站监控系统、集中式光伏电站监控系统的网络通信，采集各水电机组、水电开关站、光伏逆变器或数采单元、光伏升压站等的实时有功、无功、频率、电压、电流等电力数据；滤波分析单元进行光伏分钟级波动出力快速分量和慢速分量提取，并由平滑控制单元通过调节梯级水电机组有功功率平滑光伏波动；协调控制单元根据协调控制数学模型，应用梯级水光互补协调控制策略，下发功率调节指令给梯级径流式水电站的发电机组，实现对各径流式水电站机组出力的控制调节。梯级水光联合运行控制系统结构如图2所示。数据采集单元利用光纤与梯级各水电站及光伏电站建立通信通道，通信方式可采用MODBUS TCP或IEC104等网络通信协议，网络通信的数据采集周期小于500毫秒，从而确保与各发电单元的上下行通信周期在1秒以内；人机接口单元提供运行值班人员与互补发电系统的人机交互接口，可以将总负荷设定值或总负荷设定曲线、开停机控制指令等通过鼠标键盘进行设置，并由联合运行控制系统自动执行；远动通信单元实现与电力调度机构的远动通信，上送梯级水光联合运行控制系统及水电站、光伏电站的实时电力信息，接受调度机构下发的控制调节指令。本领域内的技术人员应明白，本申请的实施例可提供为方法、系统、或计算机程序产品。因此，本申请可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本申请可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本申请是参照根据本申请实施例的方法、设备、和计算机程序产品的流程图和／或方框图来描述的。应理解可由计算机程序指令实现流程图和／或方框图中的每一流程和／或方框、以及流程图和／或方框图中的流程和／或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的步骤。以上结合附图对本发明的实施例进行了描述，但是本发明并不局限于上述的具体实施方式，上述的具体实施方式仅仅是示意性的，而不是限制性的，本领域的普通技术人员在本发明的启示下，在不脱离本发明宗旨和权利要求所保护的范围情况下，还可做出很多形式，这些均属于本发明的保护之内。
