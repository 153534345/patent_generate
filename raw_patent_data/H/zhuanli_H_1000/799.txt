标题title
一种基于语言提示的影像风格成像系统
摘要abst
本发明适用于影像风格成像技术领域，提供了一种基于语言提示的影像风格成像系统，所述系统包括：语音采集模块、语音解码模块、数据库模块、图像增强神经网络训练模块、图像处理模块。该系统可应用于手机以及单反设备拍照通路中，根据用户说的语音，进行拍照参数的下发，得到相应的raw图，再将得到的raw图通过风格神经网络进行增强，最终得到符合用户需要的定制增强后的图像，相比于之前拍照通路只能让用户进行手调拍照参数以及进行后处理方案，使方案更加方便用户使用，并且能够达到不光清晰度去噪效果好的图像，还能根据用户所需要的亮度、颜色、对比度、锐度直接输出最终的图像。
权利要求书clms
1.一种基于语言提示的影像风格成像系统，其特征在于，所述系统包括：语音采集模块，用于捕获用户语音命令，并将所述语音命令进行传输；语音解码模块，用于通过解码器解码用户的语音命令，并从解码的结果中提取特征，获取图像参数设置；数据库模块，用于存储用于训练的图像数据集，所述图像数据集包括标记与用户语音命令对应的单反相机参数、根据所述参数拍摄得到Raw图和经过至少一个后期处理的标签图像；图像增强神经网络训练模块，用于构建为基于运行信息变换器模型的训练架构，生成从用户语音命令导出的图像参数，并映射至相机输出的Raw图之间；图像处理模块，包含一个Unet架构的前向推理网络，且配置有若干个卷积层，其中每层卷积核尺寸均为3x3，所述前向推理网络接收Raw图与语义编码的特征并进行处理，产生符合用户需求的最终风格图像；其中，所述基于语言提示的影像风格成像系统的工作流程为：先由语音采集模块获取用户的语音命令，再由语音解码模块对语音命令进行特征提取，并获取图像的参数设置，随后数据库模块会利用图像参数拍摄得到Raw图和经过至少一个后期处理的标签图像，则图像增强神经网络训练模块会依据语音解码模块所获取的特征，生成从用户语音命令导出的图像参，并映射至相机输出的Raw图之间，最后，图像处理模块会对Raw图和与语义编码的特征并进行处理，生成最终图像。2.根据权利要求1所述的系统，其特征在于，所述图像增强神经网络训练模块通过数据对来对Unet模型进行训练。3.根据权利要求1所述的系统，其特征在于，所述Unet经过初步训练的神经网络使用可调整学习率的Adam优化器，并通过多次epoch进行训练，精细化最终权重。4.根据权利要求1所述的系统，其特征在于，使用L2损失函数和L1损失函数评定网络输出与摄影师后期处理图像的拟合程度，引导Unet训练过程中权重的优化；其中：L1损失函数=；L2损失函数=。5.根据权利要求1所述的系统，其特征在于，所述语音解码模块中设定预定义语义列表，根据所述预定义语义列表对用户语音命令进行解析，提取影像的拍摄参数。6.根据权利要求1所述的系统，其特征在于，所述数据库模块在调节相机参数前，建立专业摄影参数文件，并形成数据对，并结合所述Raw图来匹配用户的语音命令要求。7.根据权利要求1所述的系统，其特征在于，所述图像处理模块执行concat操作将所述Raw图与相应的语义编码进行合并，并输入到所述Unet模型中经过初步训练的神经网络中，生成图像输出。
说明书desc
技术领域本发明属于影像风格成像系统技术领域，尤其涉及一种基于语言提示的影像风格成像系统。背景技术影像风格成像技术领域是指利用一系列数字图像处理和机器学习技术，包括但不限于图像分析、编辑、渲染和风格化，以特定的视觉风格输出图像。这一领域融合了计算机视觉、图形学、人工智能以及摄影艺术，旨在自动地调整或变换图像以适应特定的美术风格、场景氛围或者用户的个性化需求。在手机或者单反摄影的传统方法中，通常有默认的拍照参数，按下快门后得到的成像照片只追求清晰度画质、但是风格统一，没有自己独有的风格。除此之外，之前的一些专利方案通常会根据语义信息，分析图像中的语义信息进行生成、编辑局部内容达到最终图像的内容及风格。但事实上，摄影追求的是真实，但照片中基本要素的用户偏好有所不同，在亮度、对比度、颜色、阴影、锐度以及去噪强度上都有所差异，因此通过用户输入一句话的内容，通过解析用户的语义来得到一张用户喜欢的风格照片非常重要。本发明通过用户说一句话，分析语义信息，下发独立的相机白平衡，曝光，对焦参数来进行得到初步影像效果，再根据结合神经网络的学习，最终得到一张用户自己欣赏喜欢的风格照片。目前没有专门通过语音信息适配相机参数，改善图像出图结果再经过神经网络进一步处理影像风格的方法。发明内容本发明的目的在于提供一种基于语言提示的影像风格成像系统，旨在解决背景技术中确定的现有技术存在的技术问题。本发明是这样实现的，一种基于语言提示的影像风格成像系统，所述系统包括：语音采集模块，用于捕获用户语音命令，并将所述语音命令进行传输；语音解码模块，用于通过解码器解码用户的语音命令，并从解码的结果中提取特征，获取图像参数设置；数据库模块，用于存储用于训练的图像数据集，所述图像数据集包括标记与用户语音命令对应的单反相机参数、根据所述参数拍摄得到的Raw图和经过至少一个后期处理的标签图像；图像增强神经网络训练模块，用于构建为基于运行信息变换器模型的训练架构，生成从用户语音命令导出的图像参数，并映射至相机输出的Raw图之间；图像处理模块，包含一个Unet架构的前向推理网络，且配置有若干个卷积层，其中每层卷积核尺寸均为3x3，所述前向推理网络接收Raw图与语义编码的特征并进行处理，产生符合用户需求的最终风格图像。其中，所述基于语言提示的影像风格成像系统的工作流程为：先由语音采集模块获取用户的语音命令，再由语音解码模块对语音命令进行特征提取，并获取图像的参数设置，随后数据库模块会利用图像参数拍摄得到Raw图和经过至少一个后期处理的标签图像，则图像增强神经网络训练模块会依据语音解码模块所获取的特征，生成从用户语音命令导出的图像参，并映射至相机输出的Raw图之间，最后，图像处理模块会对Raw图和与语义编码的特征并进行处理，生成最终图像。作为本发明更进一步的方案，所述语音解码模块中设定预定义语义列表，根据预定义语义列表对用户语音命令进行解析，提取影像的拍摄要求。作为本发明更进一步的方案，所述数据库模块在调节单反相机参数前，根据所建立的专业摄影参数文件来形成数据对，并结合所得Raw图来匹配用户的语音命令要求。作为本发明更进一步的方案，所述图像增强神经网络训练模块通过数据对来对Unet模型进行训练。作为本发明更进一步的方案，所述图像处理模块执行concat操作将Raw图与相应的语义编码信息进行合并，并输入到Unet中经过初步训练的神经网络中，生成图像输出。作为本发明更进一步的方案，所述Unet经过初步训练的神经网络使用可调整学习率的Adam优化器，并通过多次epoch进行训练，精细化最终权重。作为本发明更进一步的方案，使用L2损失函数和L1损失函数评定网络输出与摄影师后期处理图像的拟合程度，引导Unet训练过程中权重的优化。本发明的有益效果是：该系统可应用于手机以及单反设备拍照通路中，根据用户说的语音，进行拍照参数的下发，得到相应的raw图，再将得到的raw图通过风格神经网络进行增强，最终得到符合用户需要的定制增强后的图像，相比于之前拍照通路只能让用户进行手调拍照参数以及进行后处理方案，使方案更加方便用户使用，并且能够达到不光清晰度去噪效果好的图像，还能根据用户所需要的亮度、颜色、对比度、锐度直接输出最终的图像。附图说明图1为本发明实施例提供的基于语言提示的影像风格成像系统的整体结构框图；图2为本发明实施例提供的数据制作流程图；图3为本发明实施例提供的图像增强神经网络训练流程图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。可以理解，本申请所使用的术语“第一”、“第二”等可在本文中用于描述各种元件，但除非特别说明，这些元件不受这些术语限制。这些术语仅用于将第一个元件与另一个元件区分。举例来说，在不脱离本申请的范围的情况下，可以将第一xx脚本称为第二xx脚本，且类似地，可将第二xx脚本称为第一xx脚本。在本发明中，一种基于语言提示的影像风格成像系统，所述系统包括：语音采集模块，用于捕获用户语音命令，并将所述语音命令进行传输；语音解码模块，用于通过解码器解码用户的语音命令，并从解码的结果中提取特征，获取图像参数设置；所述语音解码模块中为预训练网络Unet结构，通过后面第二段的数据对进行训练最终在利用该网络前向推理后，提取得到影像的拍摄参数；数据库模块，用于存储用于训练的图像数据集，所述图像数据集包括标记与用户语音命令对应的单反相机参数、根据所述参数拍摄得到的Raw图和经过至少一个后期处理的标签图像；图像增强神经网络训练模块，用于构建为基于如图1运行信息变换器模型的训练架构，生成从用户语音命令导出的图像参数，并映射至相机输出的Raw图之间；图像处理模块，包含一个Unet架构的前向推理网络，且配置有若干个卷积层，其中每层卷积核尺寸均为3x3，所述前向推理网络接收Raw图与语义编码的特征并进行处理，产生符合用户需求的最终风格图像。其中，所述基于语言提示的影像风格成像系统的工作流程为：先由语音采集模块获取用户的语音命令，再由语音解码模块对语音命令进行特征提取，并获取图像的参数设置，随后数据库模块会利用图像参数拍摄得到Raw图和经过至少一个后期处理的标签图像，则图像增强神经网络训练模块会依据语音解码模块所获取的特征，生成从用户语音命令导出的图像参，并映射至相机输出的Raw图之间，最后，图像处理模块会对Raw图和与语义编码的特征并进行处理，生成最终图像。作为本发明更进一步的方案，所述语音解码模块中设定预定义语义列表，根据预定义语义列表对用户语音命令进行解析，提取影像的拍摄要求。作为本发明更进一步的方案，所述数据库模块在调节单反相机参数前，根据所建立的专业摄影参数文件来形成数据对，并结合所得Raw图来匹配用户的语音命令要求。作为本发明更进一步的方案，所述图像增强神经网络训练模块通过数据对来对Unet模型进行训练。作为本发明更进一步的方案，所述图像处理模块执行concat操作将Raw图与相应的语义编码信息进行合并，并输入到Unet中经过初步训练的神经网络中，生成图像输出。作为本发明更进一步的方案，所述Unet经过初步训练的神经网络使用可调整学习率的Adam优化器，并通过多次epoch进行训练，精细化最终权重。作为本发明更进一步的方案，使用L2损失函数和L1损失函数评定网络输出与摄影师后期处理图像的拟合程度，引导Unet训练过程中权重的优化。图1为基于语言提示的影像风格成像系统的整体结构框图，如图1所示，在本方案中，可以利用现有的语音解码器通过用户给到的一句语音，比如：我想拍一张亮度偏亮，色调偏冷，对比度高一些的夕阳艺术图。通过语音解码器输出的编码指令得到相应的特征，并且根据语音信息，给定相应的参数值作为标签，会采集10000组数据对作为训练数据，通过transformer模型进行训练得到一个语音到参数值的模型，在推理的过程中，只需要说一句话，然后语音编码器就将语音解码为相应特征，通过训练好的网络来输出相应的3A参数值。相机在拿到指定参数后，进行拍摄得到相应的Raw图。在拿到raw图后，将raw图和语义编码的特征进行合并，并且一起送入Unet中，其中每层的卷积核大小为3x3，得到最终的成片图像。图2为数据制作流程图，如图2所示，在数据制作的过程中，首先采集大量的用户使用习惯说的句子，比如：我要拍一张具有某风格，某亮度偏好，某颜色偏好，某对比度，某锐度的图像。并且根据用户的句子，去找专业摄影师手动的去调节单反相机参数，并且将其与用户的句子进行一一对应，每一句话，都对应一组相应的相机参数。在将相机参数拿到后，进行实拍，相机会根据参数得到raw图，摄影师再根据相机输出的Raw图进行后期PS等工具的处理，得到最终符合前面句子里风格的一张标签图像。共采集10000组这样的数据对。图3为图像增强神经网络训练流程图，如图3所示，在图像增强神经网络训练的过程中，根据上述得到的图像数据集，将相机的raw图和对应的语义编码作为网络的输入，网络采用Unet框架，将输入raw图和语义编码通道进行融合，共同输入到图像增强神经网络中，进行学习，最终网络得到一张带有独立风格的图像，并且与摄影师处理过的标签图像利用L2/L1损失函数的进行拟合运算，经过Adam优化器，学习率前面1万个epoch为0.01，1万个之后的学习率调为0.001后，共训练3万次epoch，得到最后的权重。后面只需要输入raw图和语义编码，经过图像增强神经网络的权重，即可得到最终的结果。其中：L1损失函数=；L2损失函数=；应该理解的是，虽然本发明各实施例的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，各实施例中的至少一部分步骤可以包括多个子步骤或者多个阶段，这些子步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些子步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤的子步骤或者阶段的至少一部分轮流或者交替地执行。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的程序可存储于一非易失性计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、存储、数据库或其它介质的任何引用，均可包括非易失性和/或易失性存储器。非易失性存储器可包括只读存储器、可编程ROM、电可编程ROM、电可擦除可编程ROM或闪存。易失性存储器可包括随机存取存储器或者外部高速缓冲存储器。作为说明而非局限，RAM以多种形式可得，诸如静态RAM、动态RAM、同步DRAM、双数据率SDRAM、增强型SDRAM、同步链路 DRAM、存储器总线直接RAM、直接存储器总线动态RAM、以及存储器总线动态RAM等。以上所述实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本发明的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对本发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干变形和改进，这些都属于本发明的保护范围。因此，本发明专利的保护范围应以所附权利要求为准。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明的保护范围之内。
