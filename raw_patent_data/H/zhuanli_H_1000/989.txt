标题title
数字频率合成器的时钟选择系统
摘要abst
本发明涉及集成电路技术领域，尤其涉及一种数字频率合成器的时钟选择系统，包括相位时钟变换模块、时钟选择模块和数字频率合成器，时钟变换模块用于获取原始时钟，进行转换，生成第一时钟、第二时钟、第三时钟和第四时钟，并分别通过第一通路、第二通路、第三通路和第四通路传输给数字频率合成器；时钟选择模块用于基于目标组合时钟，确定时钟控制序列，基于时钟控制序列确定每一时钟周期对应的每一通路的时钟选择信号，并分别发送给第一通路、第二通路、第三通路和第四通路，控制开启和关闭；数字频率合成器基于输入的时钟进行组合，生成目标组合时钟。本发明能够准确高效地选择时钟，生成目标组合时钟。
权利要求书clms
1.一种数字频率合成器的时钟选择系统，其特征在于，包括相位时钟变换模块、时钟选择模块和数字频率合成器，所述数字频率合成器分别与相位时钟变换模块和所述时钟选择模块相连接，其中，所述相位时钟变换模块用于获取原始时钟，将所述原始时钟进行转换，生成第一时钟、第二时钟、第三时钟和第四时钟，并分别通过第一通路、第二通路、第三通路和第四通路传输给所述数字频率合成器，其中，所述第一时钟为原始时钟的0°时钟，所述第二时钟为原始时钟的90°时钟，所述第三时钟为原始时钟的180°时钟，所述第四时钟为原始时钟的270°时钟；所述时钟选择模块用于基于目标组合时钟，确定时钟控制序列，基于时钟控制序列确定每一时钟周期对应的每一通路的时钟选择信号，并分别发送给第一通路、第二通路、第三通路和第四通路，控制所述第一通路、第二通路、第三通路和第四通路的开启和关闭；所述数字频率合成器基于输入的时钟进行组合，生成目标组合时钟。2.根据权利要求1所述的系统，其特征在于，所述时钟选择模块具体用于基于目标组合时钟确定时钟基本序列和目标组合时钟周期数R，其中，Am=1,m的取值范围为1到M，M为时钟序列基本单元中1的数量，Bn=0，n的取值范围为1到N，N为时钟序列基本单元中0的数量，将R个时钟基本序列首尾相接，生成所述时钟控制序列。3.根据权利要求2所述的系统，其特征在于，所述时钟选择模块具体用于以8位为截割单位截割所述时钟控制序列，获取对应的截割序列，基于截割序列确定每一时钟周期对应的每一通路的时钟选择信号。4.根据权利要求3所述的系统，其特征在于，每一截割序列对应两个连续的时钟周期，截割序列的第一位为第一周期对第一通路的选择信号、第二位为第一周期对第二通路的选择信号、第三位为第一周期对第三通路的选择信号、第四位为第一周期对第四通路的选择信号、第五位为第二周期对第一通路的选择信号、第六位为第二周期对第二通路的选择信号、第七位为第二周期对第三通路的选择信号、第八位为第二周期对第四通路的选择信号，1表示对应的通路选通，0表示对应的通路不选通。5.根据权利要求3所述的系统，其特征在于，所述时钟选择模块包括第一查找表和第二查找表，所述第一查找表为截割序列首位为0的查找表，所述第二查找表为截割序列首位为1的查找表，所述第一查找表和第二查找表均包括X值、Y值和对应的截割序列；所述第一查找表中的X值为截割序列从首位开始连续0的个数，Y值为截割序列的X个0之后连续1的个数；所述第二查找表中的X值为截割序列从首位开始连续1的个数，Y值为截割序列的X个1之后连续0的个数；所述时钟选择模块用于，获取当前截割序列，基于当前截割序列确定下一截割序列首位数值以及对应的X值和Y值，基于下一截割序列首位数值以及对应的X值和Y值检索所述第一查找表或第二查找表，确定下一截割序列。6.根据权利要求5所述的系统，其特征在于，所述时钟选择模块基于当前截割序列确定下一截割序列首位数值，以及对应的X值和Y值，具体包括：获取当前截割序列，确定当前截割序列最后一位的数P，以及当前序列末尾连续P的数量Q，基于P、Q以及M和N的值确定下一截割序列首位数值，以及对应的X值和Y值。7.根据权利要求6所述的系统，其特征在于，第一查找表和第二查找表中还包括每一截割序列对应的第一标识位和第二标识位，第一标识位用于存储截割序列类型标识，第二标识位为每一截割序列对应的Q值；所述类型标识包括0、1和2；所述第一查找表中，类型标识为0，表示截割序列8位全部为0；类型标识为1，表示截割序列由连续个0和连续Q个1组成；类型标识为2，表示截割序列的首尾至少包括一个0，中间全部为1；所述第二查找表中，类型标识为0，表示截割序列8位全部为1；类型标识为1，表示截割序列由连续个1和连续Q个0组成；类型标识为2，表示截割序列的首尾至少包括一个1，中间全部为0。8.根据权利要求6所述的系统，其特征在于，所述时钟选择模块基于P、Q以及M和N的值确定下一截割序列首位数值，包括：若P=1，Q＜M,则下一截割序列的首位为1，若M-Q≥8,则下一截割序列的X=8，Y=0；若M-Q＜8，则下一截割序列的X=M-Q，若≤N,则下一截割序列的Y=，若＞N，则下一截割序列的Y=N；若P=1，Q=M，则下一截割序列的首位为0, 若N≥8，则下一截割序列的X=8，下一截割序列的Y=0；若N＜8，则下一截割序列的X=N，若8-N≤M,则下一截割序列的Y=8-N，若8-N＞M，则下一截割序列的Y=M；若P=0，Q＜N，则下一截割序列的首位为0，若N-Q≥8，则下一截割序列的X=8，Y=0；若N-Q＜8，则下一截割序列的X=N-Q，若≤M，则下一截割序列的Y=，若＞M，则下一截割序列的Y=M；若P=0，Q=N，则下一截割序列的首位为1，若M≥8，则下一截割序列的X=8，下一截割序列的Y=0；若M＜8，则下一截割序列的X=M，若8-M≤N, 则下一截割序列的Y=8-M，若8-M＞ N，则下一截割序列的Y=N。9.根据权利要求5所述的系统，其特征在于，所述时钟选择模块还用于将8个时钟基本序列首尾相接，生成待处理时钟序列，将待处理时钟序列的每8位划分为一个截割序列，生成，Ci为第i个截割序列，i的取值范围为1到M+N；所述第一查找表和第二查找表初始为空，所述时钟选择模块具体还用于，对于每一Ci：若Ci首位为0，则判断当前第一查找表中是否已经存在Ci，若存在，则对下一Ci进行处理，若不存在，则获取Ci对应的X值和Y值，将Ci对应的X值和Y值以及Ci存储至所述第一查找表；若Ci首位为1，则判断当前第二查找表中是否已经存在Ci，若存在，则对下一Ci进行处理，若不存在，则获取Ci对应的X值和Y值，将Ci对应的X值和Y值以及Ci存储至所述第二查找表；当所有Ci处理完毕时，生成所述第一查找表和第二查找表。
说明书desc
技术领域本发明涉及集成电路技术领域，尤其涉及一种数字频率合成器的时钟选择系统。背景技术通常的分频技术会涉及整数分频，但在一些应用场景中，需要更加细致的分频，例如，需要将原始时钟实现2.25分频等。这便需要将原始时钟通过相位变换得到不同相位的时钟，再对不同相位的时钟进行选择，组合生成不同的目标组合时钟。如何准确高效地选择时钟，生成目标组和时钟成为亟待解决的技术问题。发明内容本发明目的在于，提供一种数字频率合成器的时钟选择系统，能够准确高效地选择时钟，生成目标组合时钟。根据本发明一方面，提供了一种数字频率合成器的时钟选择系统，包括相位时钟变换模块、时钟选择模块和数字频率合成器，所述数字频率合成器分别与相位时钟变换模块和所述时钟选择模块相连接，其中，所述相位时钟变换模块用于获取原始时钟，将所述原始时钟进行转换，生成第一时钟、第二时钟、第三时钟和第四时钟，并分别通过第一通路、第二通路、第三通路和第四通路传输给所述数字频率合成器，其中，所述第一时钟为原始时钟的0°时钟，所述第二时钟为原始时钟的90°时钟，所述第三时钟为原始时钟的180°时钟，所述第四时钟为原始时钟的270°时钟；所述时钟选择模块用于基于目标组合时钟，确定时钟控制序列，基于时钟控制序列确定每一时钟周期对应的每一通路的时钟选择信号，并分别发送给第一通路、第二通路、第三通路和第四通路，控制所述第一通路、第二通路、第三通路和第四通路的开启和关闭；所述数字频率合成器基于输入的时钟进行组合，生成目标组合时钟。本发明与现有技术相比具有明显的优点和有益效果。借由上述技术方案，本发明提供的一种数字频率合成器的时钟选择系统可达到相当的技术进步性及实用性，并具有产业上的广泛利用价值，其至少具有以下有益效果：本发明所述系统能够基于时钟控制序列，控制时钟选择模块和数字频率合成器之间的第一通路、第二通路、第三通路和第四通路的开启和关闭，控制不同相位的时钟信号的开启和关闭，从而生成目标组合时钟，提高了目标组合时钟生成的效率和准确性。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例提供的数字频率合成器的时钟选择系统示意图；图2为本发明实施例提供的第一时钟、第二时钟、第三时钟和第四时钟示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本发明实施例提供了一种数字频率合成器的时钟选择系统，如图1所示，包括相位时钟变换模块、时钟选择模块和数字频率合成器，所述数字频率合成器分别与相位时钟变换模块和所述时钟选择模块相连接，具体的，时钟变换模块和所述时钟选择模块通过第一通路、第二通路、第三通路和第四通路相连接。所述相位时钟变换模块用于获取原始时钟，具体的，所述相位时钟变换模块可以和锁相环相连接，通过锁相环获取原始时钟，所述相位时钟变换模块将所述原始时钟进行转换，生成第一时钟、第二时钟、第三时钟和第四时钟，并分别通过第一通路、第二通路、第三通路和第四通路传输给所述数字频率合成器，其中，所述第一时钟为原始时钟的0°时钟，所述第二时钟为原始时钟的90°时钟，所述第三时钟为原始时钟的180°时钟，所述第四时钟为原始时钟的270°时钟，如图2所示示例。所述时钟选择模块用于基于目标组合时钟，确定时钟控制序列，基于时钟控制序列确定每一时钟周期对应的每一通路的时钟选择信号，并分别发送给第一通路、第二通路、第三通路和第四通路，控制所述第一通路、第二通路、第三通路和第四通路的开启和关闭；所述数字频率合成器基于输入的时钟进行组合，生成目标组合时钟。通过对第一时钟、第二时钟、第三时钟和第四时钟的灵活组合，可以生成精细多样的目标组合时钟。作为一种示例，所述时钟选择模块具体用于基于目标组合时钟确定时钟基本序列和目标组合时钟周期数R，其中，Am=1,m的取值范围为1到M，M为时钟序列基本单元中1的数量，Bn=0，n的取值范围为1到N，N为时钟序列基本单元中0的数量，将R个时钟基本序列首尾相接，生成所述时钟控制序列。需要说明的是，一个时钟基本序列对应一个目标组合时钟周期，R个时钟基本序列对应连续R个目标组合时钟周期。时钟控制序列中，每连续的4个是一组对第一通路、第二通路、第三通路和第四通路的控制标识，1表示开启，0表示关闭。以5G的频率为例，每拍获取4个bit,会导致时序很难实现，如果以2.5G的频率运行，每拍获取8个bit，对应两个时钟周期，这样既能使得时序更好实现，又不会过多增加查找表深度和实现难度。而如果每拍获取16个bit会大大增加查找表深度和实现难度，因此，优选的，所述时钟选择模块具体用于以8位为截割单位截割所述时钟控制序列，获取对应的截割序列，基于截割序列确定每一时钟周期对应的每一通路的时钟选择信号。作为一种示例，每一截割序列对应两个连续的时钟周期，截割序列的第一位为第一周期对第一通路的选择信号、第二位为第一周期对第二通路的选择信号、第三位为第一周期对第三通路的选择信号、第四位为第一周期对第四通路的选择信号、第五位为第二周期对第一通路的选择信号、第六位为第二周期对第二通路的选择信号、第七位为第二周期对第三通路的选择信号、第八位为第二周期对第四通路的选择信号，1表示对应的通路选通，0表示对应的通路不选通。以截割序列为11111000为例，表示第一个周期内，第一通路、第二通路、第三通路和第四通路全部选通，第二个周期内第一通路选通，第二通路、第三通路和第四通路不选通。以时钟基本序列为“111110000000”为例，该示例中，M=5，N=7。当多个“111110000000”拼接在一起，以每8位为单位进行截取时，硬件上是很难基于当前的截割序列获取下一截割序列的，基于此，本发明实施例基于查找表来实现下一截割序列的获取，作为一种示例，所述时钟选择模块包括第一查找表和第二查找表，所述第一查找表为截割序列首位为0的查找表，所述第二查找表为截割序列首位为1的查找表，所述第一查找表和第二查找表均包括X值、Y值和对应的截割序列。所述第一查找表中的X值为截割序列从首位开始连续0的个数，Y值为截割序列的X个0之后连续1的个数。所述第二查找表中的X值为截割序列从首位开始连续1的个数，Y值为截割序列的X个1之后连续0的个数。以截割序列为11111000为例，首位为1，对应于第二查找表，对应的X值为5，对应的Y值为3。作为一种示例，所述时钟选择模块用于，获取当前截割序列，基于当前截割序列确定下一截割序列首位数值以及对应的X值和Y值，基于下一截割序列首位数值以及对应的X值和Y值检索所述第一查找表或第二查找表，确定下一截割序列。其中，所述时钟选择模块基于当前截割序列确定下一截割序列首位数值，以及对应的X值和Y值，具体包括：获取当前截割序列，确定当前截割序列最后一位的数P，以及当前序列末尾连续P的数量Q，基于P、Q以及M和N的值确定下一截割序列首位数值，以及对应的X值和Y值。对应的X值和Y值确定后，根据P值选择对应的查找表，即可从查表中获取对应的截割序列。作为一种示例，第一查找表和第二查找表中还包括每一截割序列对应的第一标识位和第二标识位，第一标识位用于存储截割序列类型标识，第二标识位为每一截割序列对应的Q值；所述类型标识包括0、1和2。所述第一查找表中，类型标识为0，表示截割序列8位全部为0，即全0序列类型。类型标识为1，表示截割序列由连续个0和连续Q个1组成，即01序列类型。类型标识为2，表示截割序列的首尾至少包括一个0，中间全部为1，即010序列类型。所述第二查找表中，类型标识为0，表示截割序列8位全部为1，即全1序列类型。类型标识为1，表示截割序列由连续个1和连续Q个0组成，即10序列类型。类型标识为2，表示截割序列的首尾至少包括一个1，中间全部为0，即101序列类型。作为一种示例，所述时钟选择模块基于P、Q以及M和N的值确定下一截割序列首位数值，包括：若P=1，Q＜M,则下一截割序列的首位为1，若M-Q≥8,则下一截割序列的X=8，Y=0；若M-Q＜8，则下一截割序列的X=M-Q，若≤N,则下一截割序列的Y=，若＞N，则下一截割序列的Y=N。若P=1，Q=M，则下一截割序列的首位为0, 若N≥8，则下一截割序列的X=8，下一截割序列的Y=0；若N＜8，则下一截割序列的X=N，若8-N≤M,则下一截割序列的Y=8-N，若8-N＞M，则下一截割序列的Y=M。若P=0，Q＜N，则下一截割序列的首位为0，若N-Q≥8，则下一截割序列的X=8，Y=0；若N-Q＜8，则下一截割序列的X=N-Q，若≤M，则下一截割序列的Y=，若＞M，则下一截割序列的Y=M。若P=0，Q=N，则下一截割序列的首位为1，若M≥8，则下一截割序列的X=8，下一截割序列的Y=0；若M＜8，则下一截割序列的X=M，若8-M≤N, 则下一截割序列的Y=8-M，若8-M＞N，则下一截割序列的Y=N。作为一种实施例，具体通过以下方式构建第一查找表和第二查找表。所述时钟选择模块还用于将8个时钟基本序列首尾相接，生成待处理时钟序列，将待处理时钟序列的每8位划分为一个截割序列，生成，Ci为第i个截割序列，i的取值范围为1到M+N。需要说明的是，当M+N是8的倍数时，则会存在重复的截割序列，在建立第一查找表和第二查找表时，重复的仅记录一次即可。但无论对于那种情况，均能将截割序列覆盖完整。所述第一查找表和第二查找表初始为空，所述时钟选择模块具体还用于，对于每一Ci：若Ci首位为0，则判断当前第一查找表中是否已经存在Ci，若存在，则对下一Ci进行处理，若不存在，则获取Ci对应的X值和Y值，将Ci对应的X值和Y值以及Ci存储至所述第一查找表。若Ci首位为1，则判断当前第二查找表中是否已经存在Ci，若存在，则对下一Ci进行处理，若不存在，则获取Ci对应的X值和Y值，将Ci对应的X值和Y值以及Ci存储至所述第二查找表。当所有Ci处理完毕时，生成所述第一查找表和第二查找表。本发明实施例所述系统能够基于时钟控制序列，控制时钟选择模块和数字频率合成器之间的第一通路、第二通路、第三通路和第四通路的开启和关闭，控制不同相位的时钟信号的开启和关闭，从而生成目标组合时钟，提高了目标组合时钟生成的效率和准确性。以上所述，仅是本发明的较佳实施例而已，并非对本发明作任何形式上的限制，虽然本发明已以较佳实施例揭露如上，然而并非用以限定本发明,任何熟悉本专业的技术人员，在不脱离本发明技术方案范围内,当可利用上述揭示的技术内容作出些许更动或修饰为等同变化的等效实施例,但凡是未脱离本发明技术方案的内容，依据本发明的技术实质对以上实施例所作的任何简单修改、等同变化与修饰，均仍属于本发明技术方案的范围内。
