标题title
基于BLE协议的低功耗配网与运行监控系统、方法
摘要abst
本发明涉及无线通信网络技术领域，具体涉及一种基于BLE协议的低功耗配网与运行监控系统、方法。本发明的客户端包括App或小程序，用户通过客户端远程操作来唤醒主机系统，并通过MCU开启主机电源；等待主机启动后，客户端通过BLE协议监听协处理器发送的握手包，并根据设备MAC地址查询令牌；建立通信后，客户端通过WIFI与SOC模块传输大量数据；协处理器负责定时唤醒并广播握手包，根据客户端发送的设备MAC地址查询令牌；实时监控系统包括低功耗模式、BLE握手模式和WIFI传输模式；本发明实现了远程唤醒主机、数据传输和实时监控等功能，具有低功耗、高效能和实时性等优点。
权利要求书clms
1.一种基于BLE协议的低功耗配网与运行监控系统，其特征在于，包括如下部件：客户端，包括App或小程序，用户通过客户端远程操作来唤醒主机系统，并通过MCU开启主机电源；等待主机启动后，客户端通过BLE协议监听协处理器发送的握手包，并根据设备MAC地址查询令牌；建立通信后，客户端通过WIFI与SOC模块传输大量数据；协处理器，负责定时唤醒并广播握手包，根据客户端发送的设备MAC地址查询令牌；主机系统，与MCU模块互联、与外部传感器连接、与SOC模块通过PCIe或专有串行链路进行通信，并通过协处理器与客户端建立通信，其中：MCU模块，与主机电源相连，并在等待主机启动后发送握手包，用于负责管理从传感器得到数据路径，为每个传感器分配资源以用于实时任务执行；SOC模块，包括处理单元，用于在实时系统中处理从传感器接收的数据。客户端、协处理器和主机系统共同构成实时监控系统，实时监控系统包括低功耗模式、BLE握手模式和WIFI传输模式。2.如权利要求1所述的基于BLE协议的低功耗配网与运行监控系统，其特征在于，所述低功耗模式下，主机系统处于关机状态，MCU模块处于低功耗的睡眠模式；客户端通过BLE协议唤醒协处理器，协处理器在低速的情况下进行少量数据传输；客户端通过BLE协议命令协处理器打开主机电源，主机系统开机。3.如权利要求2所述的基于BLE协议的低功耗配网与运行监控系统，其特征在于，所述BLE握手模式下，主机系统开机后，MCU模块主动与客户端通信，上报状态给用户；用户下发WIFI用户名和密码，并由MCU模块转发给SOC模块，SOC模块进行配网，SOC模块配网成功后上报IP信息，客户端尝试与SOC模块通信。4.如权利要求3所述的基于BLE协议的低功耗配网与运行监控系统，其特征在于，所述WIFI传输模式下，主机系统与客户端连接后，开始运行业务逻辑，主机系统通过WIFI传输大量数据到客户端；同时协处理器通过BLE协议实时监控主机系统状态，控制主机电源。5.一种基于BLE协议的低功耗配网与运行监控系统的方法，采用如权利要求1-4任意一项所述的BLE协议的低功耗协处理器配网与运行监控系统，其特征在于，包括如下步骤：S1、协处理器设置定期唤醒机制，并通过蓝牙广播发送握手信号；S2、客户端监听并捕获握手信号，根据设备MAC地址查询对应的令牌；S3、客户端通过BLE协议与协处理器建立通信连接，协处理器将配网token发送给客户端；S4、客户端校验配网token通过后，用户通过App或小程序远程唤醒主机系统，MCU模块开启主机电源；S5、主机系统启动后发送握手信号，MCU模块并通过BLE协议与客户端建立通信连接；S6、客户端下发WIFI用户名和密码，并由MCU模块转发给SOC模块，SOC模块进行配网，SOC模块配网成功后上报IP信息；S7、SOC模块与客户端连接后，开始运行业务逻辑，SOC模块通过WIFI传输大量数据到客户端；协处理器通过BLE协议实时监控主机系统状态，控制主机电源。6.如权利要求5所述的基于BLE协议的低功耗配网与运行监控系统的方法，其特征在于，所述S1中，协处理器的存储器出厂后就无法被外部读取或写入，协处理器作为数据链路的一环具备极高的安全性，防止未经授权的对设备的访问或篡改，提高主机系统的安全性。
说明书desc
技术领域本发明涉及无线通信网络技术领域，具体涉及一种基于BLE协议的低功耗配网与运行监控系统、方法。背景技术无线通信网络领域，客户端与主机系统之间缺乏实时监控。传统系统设计依赖于主机程序来实现设备的运行，但当主机程序无法响应时，设备可能会出现故障或运行不稳定，导致设备的可靠性和实时性较低。并且由于没有提供实时反馈系统，用户无法及时获取设备运行信息，导致潜在问题无法及时发现和解决。为了解决上述问题，如中国专利，授权公告号为CN 201911334365.7，其公开了一种基于低功耗蓝牙断路器线路板组件低功耗的实现方法，其在上电状态下，电源芯片、BLE模组、主控MCU均处于睡眠模式；利用电表发送请求连接数据指令，唤醒BLE模组，进行数据交互，并建立与电表的链路连接。但该方案没有智能唤醒和休眠机制，导致设备在运行过程中一直处于高功耗状态，缩短了电池续航时间；数据链路安全性不足，容易遭受未经授权的访问或篡改。发明内容本发明要解决的技术问题是：克服现有技术的不足，提供一种基于BLE协议的低功耗配网与运行监控系统、方法。本发明的技术方案为：一种基于BLE协议的低功耗配网与运行监控系统，包括如下部件：客户端，包括App或小程序，用户通过客户端远程操作来唤醒主机系统，并通过MCU开启主机电源；等待主机启动后，客户端通过BLE协议监听协处理器发送的握手包，并根据设备MAC地址查询令牌；建立通信后，客户端通过WIFI与SOC模块传输大量数据；协处理器，负责定时唤醒并广播握手包，根据客户端发送的设备MAC地址查询令牌；主机系统，与MCU模块互联、与外部传感器连接、与SOC模块通过PCIe或专有串行链路进行通信，并通过协处理器与客户端建立通信，其中：MCU模块，与主机电源相连，并在等待主机启动后发送握手包，用于负责管理从传感器得到数据路径，为每个传感器分配资源以用于实时任务执行；SOC模块，包括处理单元，用于在实时系统中处理从传感器接收的数据。客户端、协处理器和主机系统共同构成实时监控系统，实时监控系统包括低功耗模式、BLE握手模式和WIFI传输模式。本技术方案是基于BLE协议的低功耗配网与运行监控系统，涉及了客户端、协处理器、主机系统、MCU模块和SOC模块等部件，实现了远程唤醒主机、数据传输和实时监控等功能，具有低功耗、高效能和实时性等优点。在其中一些实施例中，所述低功耗模式下，主机系统处于关机状态，MCU模块处于低功耗的睡眠模式；客户端通过BLE协议唤醒协处理器，协处理器在低速的情况下进行少量数据传输；客户端通过BLE协议命令协处理器打开主机电源，主机系统开机。在其中一些实施例中，所述BLE握手模式下，主机系统开机后，MCU模块主动与客户端通信，上报状态给用户；用户下发WIFI用户名和密码，并由MCU模块转发给SOC模块，SOC模块进行配网，SOC模块配网成功后上报IP信息，客户端尝试与SOC模块通信。在其中一些实施例中，所述WIFI传输模式下，主机系统与客户端连接后，开始运行业务逻辑，主机系统通过WIFI传输大量数据到客户端；同时协处理器通过BLE协议实时监控主机系统状态，控制主机电源。本发明的技术方案为：一种基于BLE协议的低功耗配网与运行监控系统的方法，包括如下步骤：S1、协处理器设置定期唤醒机制，并通过蓝牙广播发送握手信号；S2、客户端监听并捕获握手信号，根据设备MAC地址查询对应的令牌；S3、客户端通过BLE协议与协处理器建立通信连接，协处理器将配网token发送给客户端；S4、客户端校验配网token通过后，用户通过App或小程序远程唤醒主机系统，MCU模块开启主机电源；S5、主机系统启动后发送握手信号，MCU模块并通过BLE协议与客户端建立通信连接；S6、客户端下发WIFI用户名和密码，并由MCU模块转发给SOC模块，SOC模块进行配网，SOC模块配网成功后上报IP信息；S7、SOC模块与客户端连接后，开始运行业务逻辑，SOC模块通过WIFI传输大量数据到客户端；协处理器通过BLE协议实时监控主机系统状态，控制主机电源。本技术方案中，协处理器设置定期唤醒机制，并通过蓝牙广播发送握手信号。这意味着协处理器会在特定的时间间隔内被唤醒，并通过蓝牙广播发送特定的信号，以便与客户端建立连接。客户端监听并捕获握手信号，根据设备MAC地址查询对应的令牌。这意味着客户端会监听来自协处理器的握手信号，并根据设备的MAC地址找到相应的令牌，以便进行后续的通信。客户端通过BLE协议与协处理器建立通信连接，协处理器将配网token发送给客户端。这意味着客户端会使用BLE协议与协处理器建立通信连接，并由协处理器将配网token发送给客户端，以便进行后续的配网操作。客户端校验配网token通过后，用户通过App或小程序远程唤醒主机系统，MCU模块开启主机电源。这意味着在客户端验证配网token无误后，用户可以通过App或小程序远程唤醒主机系统，并由MCU模块开启主机电源。主机系统启动后发送握手信号，MCU模块并通过BLE协议与客户端建立通信连接。这意味着在主机系统启动后，它会发送握手信号，并由MCU模块通过BLE协议与客户端建立通信连接。客户端下发WIFI用户名和密码，并由MCU模块转发给SOC模块，SOC模块进行配网，SOC模块配网成功后上报IP信息。这意味着客户端会将WIFI用户名和密码发送给MCU模块，并由MCU模块转发给SOC模块，然后SOC模块会进行配网操作，并在配网成功后上报IP信息。SOC模块与客户端连接后，开始运行业务逻辑，SOC模块通过WIFI传输大量数据到客户端；协处理器通过BLE协议实时监控主机系统状态，控制主机电源。这意味着在SOC模块与客户端建立连接后，会开始运行业务逻辑，并通过WIFI传输大量数据到客户端；同时协处理器也会通过BLE协议实时监控主机系统状态，并根据需要进行电源控制。在其中一些实施例中，所述S1中，协处理器的存储器出厂后就无法被外部读取或写入，协处理器作为数据链路的一环具备极高的安全性，防止未经授权的对设备的访问或篡改，提高主机系统的安全性。本发明与现有技术相比，具有以下有益效果：1、具有创新实时性监控功能：协处理器运行实时操作系统，高度优化设备的实时性与稳定性；即使主机程序无法响应，协处理器也能够独立复位主机，保证设备的正常运行；相较于传统的依赖主机程序的系统设计，显著提升设备的可靠性和实时性；2、具有低功耗的智能唤醒与休眠机制：利用预设算法和BLE协议，设计智能唤醒和休眠机制；该创新设计可以在保证通信稳定性和响应速度的同时，极大节省电池能源，延长设备续航时间，并最大限度地减小对设备性能的影响；3、具有实时反馈系统：设计可以将设备运行信息实时反馈给用户的系统，用户可以通过APP随时获取这些信息，能够强化用户对设备状态的掌握，有助于及时发现和解决潜在问题；4、具有安全增强的数据链路设计：协处理器的存储器出厂后就无法被外部读取或写入，使得协处理器作为数据链路的一环具备极高的安全性；有效防止未经授权的对设备的访问或篡改，大大提高设备的安全性；5、具有远程唤醒或休眠控制功能：为满足用户使用过程中的多变需求，创新地设计可以让用户随时远程操作设备唤醒或休眠的功能，提高用户体验，使设备更具灵活性和个性化。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，对于本领域普通技术人员而言，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明的配网流程图。图2是本发明的配网及监控逻辑图之一。图3是本发明的配网及监控逻辑图之二。图4是本发明的配网及监控逻辑图之三。具体实施方式为了使本技术领域的人员更好地理解本发明中的技术方案，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本发明保护的范围。实施例1如图2至图4所示，本实施例提供了一种基于BLE协议的低功耗配网与运行监控系统，包括如下部件：客户端，包括App或小程序，用户通过客户端远程操作来唤醒主机系统，并通过MCU开启主机电源；等待主机启动后，客户端通过BLE协议监听协处理器发送的握手包，并根据设备MAC地址查询令牌；建立通信后，客户端通过WIFI与SOC模块传输大量数据；协处理器，负责定时唤醒并广播握手包，根据客户端发送的设备MAC地址查询令牌；主机系统，与MCU模块互联、与外部传感器连接、与SOC模块通过PCIe或专有串行链路进行通信，并通过协处理器与客户端建立通信，其中：MCU模块，与主机电源相连，并在等待主机启动后发送握手包，用于负责管理从传感器得到数据路径，为每个传感器分配资源以用于实时任务执行；SOC模块，包括处理单元，用于在实时系统中处理从传感器接收的数据。客户端、协处理器和主机系统共同构成实时监控系统，实时监控系统包括低功耗模式、BLE握手模式和WIFI传输模式。本技术方案具有以下特点。具有创新实时性监控系统：协处理器运行实时操作系统，高度优化设备的实时性与稳定性；即使主机程序无法响应，协处理器也能够独立复位主机，保证设备的正常运行；相较于传统的依赖主机程序的系统设计，显著提升设备的可靠性和实时性；具有低功耗的智能唤醒与休眠机制：利用预设算法和BLE协议，设计智能唤醒和休眠机制；该创新设计可以在保证通信稳定性和响应速度的同时，极大节省电池能源，延长设备续航时间，并最大限度地减小对设备性能的影响；具有实时反馈系统：设计可以将设备运行信息实时反馈给用户的系统，用户可以通过APP随时获取这些信息，能够强化用户对设备状态的掌握，有助于及时发现和解决潜在问题；安全增强的数据链路设计：协处理器的存储器出厂后就无法被外部读取或写入，使得协处理器作为数据链路的一环具备极高的安全性；有效防止未经授权的对设备的访问或篡改，大大提高设备的安全性；具有远程唤醒或休眠控制功能：为满足用户使用过程中的多变需求，创新地设计可以让用户随时远程操作设备唤醒或休眠的功能，提高用户体验，使设备更具灵活性和个性化。如图2所示，所述低功耗模式下，主机系统处于关机状态，MCU模块处于低功耗的睡眠模式；客户端通过BLE协议唤醒协处理器，协处理器在低速的情况下进行少量数据传输；客户端通过BLE协议命令协处理器打开主机电源，主机系统开机。如图3所示，所述BLE握手模式下，主机系统开机后，MCU模块主动与客户端通信，上报状态给用户；用户下发WIFI用户名和密码，并由MCU模块转发给SOC模块，SOC模块进行配网，SOC模块配网成功后上报IP信息，客户端尝试与SOC模块通信。如图4所示，所述WIFI传输模式下，主机系统与客户端连接后，开始运行业务逻辑，主机系统通过WIFI传输大量数据到客户端；同时协处理器通过BLE协议实时监控主机系统状态，控制主机电源。实施例2在实施例1基础上，如图1所示，本实施例提供一种基于BLE协议的低功耗配网与运行监控系统的方法，包括如下步骤：S1、协处理器设置定期唤醒机制，并通过蓝牙广播发送握手信号；S2、客户端监听并捕获握手信号，根据设备MAC地址查询对应的令牌；S3、客户端通过BLE协议与协处理器建立通信连接，协处理器将配网token发送给客户端；S4、客户端校验配网token通过后，用户通过App或小程序远程唤醒主机系统，MCU模块开启主机电源；S5、主机系统启动后发送握手信号，MCU模块并通过BLE协议与客户端建立通信连接；S6、客户端下发WIFI用户名和密码，并由MCU模块转发给SOC模块，SOC模块进行配网，SOC模块配网成功后上报IP信息；S7、SOC模块与客户端连接后，开始运行业务逻辑，SOC模块通过WIFI传输大量数据到客户端；协处理器通过BLE协议实时监控主机系统状态，控制主机电源。本技术方案中，协处理器设置定期唤醒机制，并通过蓝牙广播发送握手信号。这意味着协处理器会在特定的时间间隔内被唤醒，并通过蓝牙广播发送特定的信号，以便与客户端建立连接。客户端监听并捕获握手信号，根据设备MAC地址查询对应的令牌。这意味着客户端会监听来自协处理器的握手信号，并根据设备的MAC地址找到相应的令牌，以便进行后续的通信。客户端通过BLE协议与协处理器建立通信连接，协处理器将配网token发送给客户端。这意味着客户端会使用BLE协议与协处理器建立通信连接，并由协处理器将配网token发送给客户端，以便进行后续的配网操作。客户端校验配网token通过后，用户通过App或小程序远程唤醒主机系统，MCU模块开启主机电源。这意味着在客户端验证配网token无误后，用户可以通过App或小程序远程唤醒主机系统，并由MCU模块开启主机电源。主机系统启动后发送握手信号，MCU模块并通过BLE协议与客户端建立通信连接。这意味着在主机系统启动后，它会发送握手信号，并由MCU模块通过BLE协议与客户端建立通信连接。客户端下发WIFI用户名和密码，并由MCU模块转发给SOC模块，SOC模块进行配网，SOC模块配网成功后上报IP信息。这意味着客户端会将WIFI用户名和密码发送给MCU模块，并由MCU模块转发给SOC模块，然后SOC模块会进行配网操作，并在配网成功后上报IP信息。SOC模块与客户端连接后，开始运行业务逻辑，SOC模块通过WIFI传输大量数据到客户端；协处理器通过BLE协议实时监控主机系统状态，控制主机电源。这意味着在SOC模块与客户端建立连接后，会开始运行业务逻辑，并通过WIFI传输大量数据到客户端；同时协处理器也会通过BLE协议实时监控主机系统状态，并根据需要进行电源控制。在其中一些实施例中，所述S1中，协处理器的存储器出厂后就无法被外部读取或写入，协处理器作为数据链路的一环具备极高的安全性，防止未经授权的对设备的访问或篡改，提高主机系统的安全性。本技术方案是基于BLE协议的低功耗配网与运行监控系统，涉及了客户端、协处理器、主机系统、MCU模块和SOC模块等部件，实现了远程唤醒主机、数据传输和实时监控等功能，具有低功耗、高效能和实时性等优点。尽管通过参考附图并结合优选实施例的方式对本发明进行了详细描述，但本发明并不限于此。在不脱离本发明的精神和实质的前提下，本领域普通技术人员可以对本发明的实施例进行各种等效的修改或替换，而这些修改或替换都应在本发明的涵盖范围内/任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应所述以权利要求的保护范围为准。
