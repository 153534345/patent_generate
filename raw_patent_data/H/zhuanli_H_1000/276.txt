标题title
时钟同步监测方法、装置、级联系统和计算机设备
摘要abst
本申请涉及一种时钟同步监测方法、装置、级联系统和计算机设备。该方法应用于当前级联设备，包括：在检测到下一级联设备接入时，基于获取到的接收时钟信号，生成对应于下一一级联设备的发送时钟信号；获取基准信号，确定基准信号与接收时钟信号的接收相位差，以及基准信号与发送时钟信号的发送相位差；基于接收相位差的出现次数确定接收时钟信号的接收频率值，基于发送相位差的出现次数确定发送时钟信号的发送频率值，并将接收频率值和发送频率值分别与预设的标准频率值进行比对，得到针对当前级联设备的监测结果。采用本方法能够提高级联场景中对时钟同步性的监测效率。
权利要求书clms
1.一种时钟同步监测方法，其特征在于，应用于当前级联设备，所述方法包括：在检测到下一级联设备接入时，基于获取到的接收时钟信号，生成对应于所述下一级联设备的发送时钟信号；获取基准信号，确定所述基准信号与所述接收时钟信号的接收相位差，以及所述基准信号与所述发送时钟信号的发送相位差；基于所述接收相位差的出现次数确定所述接收时钟信号的接收频率值，基于所述发送相位差的出现次数确定所述发送时钟信号的发送频率值，并将所述接收频率值和所述发送频率值分别与预设的标准频率值进行比对，得到针对所述当前级联设备的监测结果。2.根据权利要求1所述的方法，其特征在于，所述基于所述接收相位差的出现次数确定所述接收时钟信号的接收频率值，包括：获取对应于所述基准信号的基准起始点；确定在所述基准起始点处，所述基准信号与所述接收时钟信号之间的所述接收相位差，并对所述接收时钟信号与所述基准信号之间获取到的相位差进行记录，直至再次获取到所述接收相位差；基于获取到的至少两次所述接收相位差对应的所述接收时钟信号的波形，得到针对所述接收时钟信号的接收时钟周期，并基于所述接收时钟周期，得到所述接收频率值。3.根据权利要求1所述的方法，其特征在于，所述基于所述接收相位差的出现次数确定所述接收时钟信号的接收频率值，包括：获取对应于所述基准信号的至少两个基准起始点，其中，每个所述基准起始点均不相同；分别确定在每个所述基准起始点处，所述基准信号与所述接收时钟信号之间对应的每种目标接收相位差，并分别对所述接收时钟信号与所述基准信号之间的每种相位差进行记录，直至每个所述基准起始点再次获取到对应的所述目标接收相位差；其中，所述接收相位差包括每种所述目标接收相位差；在每种所述目标接收相位差各获取至少两次时，得到每种所述接收时钟信号对应的目标波形，并基于所述目标波形得到针对所述接收时钟信号的所有接收时钟周期，并对所有所述接收时钟周期进行融合计算，得到所述接收频率值。4.根据权利要求1所述的方法，其特征在于，所述方法还包括：确定所述接收频率值与所述标准频率值之间的接收频率偏差，以及所述发送频率值与所述标准频率值之间的发送频率偏差；将所述接收频率偏差、所述发送频率偏差分别与预设的偏差阈值进行比对，得到所述监测结果；若所述监测结果指示，所述发送频率偏差大于所述偏差阈值，则基于所述监测结果对当前级联设备进行校正；若所述监测结果指示，所述接收频率偏差大于所述偏差阈值，则基于所述监测结果对上一级联设备进行校正。5.根据权利要求1所述的方法，其特征在于，所述生成对应于所述下一级联设备的发送时钟信号，包括：基于预设的同步装置确定所述接收时钟信号以及初始相位差；其中，所述初始相位差是初始发送时钟信号与所述接收时钟信号之间的相位差，且所述初始发送时钟信号基于所述接收时钟信号生成；在所述同步装置检测到所述初始相位差大于预设的相位差阈值的情况下，基于所述初始相位差对所述初始发送时钟信号进行调整，直至所述相位差小于或等于所述相位差阈值，得到所述发送时钟信号，并生成信号标志位；在检测到存在所述信号标志位时，将所述发送时钟信号发送给所述下一级联设备。6.根据权利要求1所述的方法，其特征在于，获取所述基准信号以及所述接收时钟信号，包括：基于预设的滤波装置，分别对获取到的初始基准信号以及获取到的初始接收时钟信号进行滤波处理；将滤波后的初始基准信号以及滤波后的初始接收时钟信号输入至预设的锁相环装置，分别对所述滤波后的初始基准信号以及所述滤波后的初始接收时钟信号进行跟踪反馈处理，得到目标基准信号以及目标接收时钟信号；分别对所述目标基准信号以及所述目标接收时钟信号进行脉冲整形处理，得到所述基准信号以及所述接收时钟信号。7.一种时钟同步监测装置，其特征在于，所述装置包括：获取模块，用于在检测到下一级联设备接入时，基于获取到的接收时钟信号，生成对应于所述下一级联设备的发送时钟信号；计算模块，用于获取基准信号，确定所述基准信号与所述接收时钟信号的接收相位差，以及所述基准信号与所述发送时钟信号的发送相位差；生成模块，用于基于所述接收相位差的出现次数确定所述接收时钟信号的接收频率值，基于所述发送相位差的出现次数确定所述发送时钟信号的发送频率值，并将所述接收频率值和所述发送频率值分别与预设的标准频率值进行比对，得到针对当前级联设备的监测结果。8.一种级联系统，其特征在于，所述系统包括，至少两个级联设备以及如权利要求7所述的时钟同步监测装置。9.一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至6中任一项所述的方法的步骤。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至6中任一项所述的方法的步骤。
说明书desc
技术领域本申请涉及音视频会议技术领域，特别是涉及一种时钟同步监测方法、装置、级联系统和计算机设备。背景技术在麦克风等级联场景中，衡量产品效果好坏的一个重要指标就是声音延迟程度。目前相关技术中为了保证声音等传输信号的同步性，采用的方法多为NTP同步，它是用来同步网络中各个计算机的时间的协议，对网络内所有具有时钟的设备进行时钟同步，使网络内所有设备的时钟保持一致，从而使设备能够提供基于统一时间的多种应用。由于级联场景中通常包括多个级联设备，若其中一个设备出现延时补偿精度较差等问题，可能会导致后续的多个设备接收到的时钟信号均出现延误或波动的现象。目前，相关技术中对于级联系统的监测多为将拆分多个级联设备并逐一检测，显然，该方法会消耗较多的时间成本以及人力资源，效率较低。目前，针对相关技术中对级联场景的时钟同步性监测效率较低的问题，尚未提出有效地解决方案。发明内容基于此，有必要针对上述技术问题，提供一种时钟同步监测方法、装置、级联系统和计算机设备。第一方面，本申请提供了一种时钟同步监测方法。该方法包括：在检测到下一级联设备接入时，基于获取到的接收时钟信号，生成对应于下一级联设备的发送时钟信号；获取基准信号，确定基准信号与接收时钟信号的接收相位差，以及基准信号与发送时钟信号的发送相位差；基于接收相位差的出现次数确定接收时钟信号的接收频率值，基于发送相位差的出现次数确定发送时钟信号的发送频率值，并将接收频率值和发送频率值分别与预设的标准频率值进行比对，得到针对当前级联设备的监测结果。在其中一个实施例中，基于接收相位差的出现次数确定接收时钟信号的接收频率值，包括：获取对应于基准信号的基准起始点；确定在基准起始点处，基准信号与接收时钟信号之间的接收相位差，并对接收时钟信号与基准信号之间获取到的相位差进行记录，直至再次获取到接收相位差；基于获取到的至少两次接收相位差对应的接收时钟信号的波形，得到针对接收时钟信号的接收时钟周期，并基于接收时钟周期，得到接收频率值。在其中一个实施例中，基于接收相位差的出现次数确定接收时钟信号的接收频率值，包括：获取对应于基准信号的至少两个基准起始点，其中，每个基准起始点均不相同；分别确定在每个基准起始点处，基准信号与接收时钟信号之间对应的每种目标接收相位差，并分别对接收时钟信号与基准信号之间的每种相位差进行记录，直至每个基准起始点再次获取到对应的目标接收相位差；其中，接收相位差包括每种目标接收相位差；在每种目标接收相位差各获取至少两次时，得到每种接收时钟信号对应的目标波形，并基于目标波形得到针对接收时钟信号的所有接收时钟周期，并对所有接收时钟周期进行融合计算，得到接收频率值。在其中一个实施例中，上述方法还包括：确定接收频率值与标准频率值之间的接收频率偏差，以及发送频率值与标准频率值之间的发送频率偏差；将接收频率偏差、发送频率偏差分别与预设的偏差阈值进行比对，得到监测结果；若监测结果指示，发送频率偏差大于偏差阈值，则基于监测结果对当前级联设备进行校正；若监测结果指示，接收频率偏差大于偏差阈值，则基于监测结果对上一级联设备进行校正。在其中一个实施例中，生成对应于下一级联设备的发送时钟信号，包括：基于预设的同步装置确定接收时钟信号以及初始相位差；其中，初始相位差是初始发送时钟信号与接收时钟信号之间的相位差，且初始发送时钟信号基于接收时钟信号生成；在同步装置检测到初始相位差大于预设的相位差阈值的情况下，基于初始相位差对初始发送时钟信号进行调整，直至相位差小于或等于相位差阈值，得到发送时钟信号，并生成信号标志位；在检测到存在信号标志位时，将发送时钟信号发送给下一级联设备。在其中一个实施例中，获取基准信号以及接收时钟信号，包括：基于预设的滤波装置，分别对获取到的初始基准信号以及获取到的初始接收时钟信号进行滤波处理；将滤波后的初始基准信号以及滤波后的初始接收时钟信号输入至预设的锁相环装置，分别对滤波后的初始基准信号以及滤波后的初始接收时钟信号进行跟踪反馈处理，得到目标基准信号以及目标接收时钟信号；分别对目标基准信号以及目标接收时钟信号进行脉冲整形处理，得到基准信号以及接收时钟信号。第二方面，本申请还提供了一种时钟同步监测装置。上述装置包括：获取模块，用于在检测到下一级联设备接入时，基于获取到的接收时钟信号，生成对应于下一级联设备的发送时钟信号；计算模块，用于获取基准信号，确定基准信号与接收时钟信号的接收相位差，以及基准信号与发送时钟信号的发送相位差；生成模块，用于基于接收相位差的出现次数确定接收时钟信号的接收频率值，基于发送相位差的出现次数确定发送时钟信号的发送频率值，并将接收频率值和发送频率值分别与预设的标准频率值进行比对，得到针对当前级联设备的监测结果。第三方面，本申请还提供了一种级联系统，该系统包括至少两个级联设备，以及如上文所述的时钟同步监测装置。第四方面，本申请还提供了一种计算机设备。所述计算机设备包括存储器和处理器，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时实现以下步骤：在检测到下一级联设备接入时，基于获取到的接收时钟信号，生成对应于下一级联设备的发送时钟信号；获取基准信号，确定基准信号与接收时钟信号的接收相位差，以及基准信号与发送时钟信号的发送相位差；基于接收相位差的出现次数确定接收时钟信号的接收频率值，基于发送相位差的出现次数确定发送时钟信号的发送频率值，并将接收频率值和发送频率值分别与预设的标准频率值进行比对，得到针对当前级联设备的监测结果。第五方面，本申请还提供了一种计算机可读存储介质。所述计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现以下步骤：在检测到下一级联设备接入时，基于获取到的接收时钟信号，生成对应于下一级联设备的发送时钟信号；获取基准信号，确定基准信号与接收时钟信号的接收相位差，以及基准信号与发送时钟信号的发送相位差；基于接收相位差的出现次数确定接收时钟信号的接收频率值，基于发送相位差的出现次数确定发送时钟信号的发送频率值，并将接收频率值和发送频率值分别与预设的标准频率值进行比对，得到针对当前级联设备的监测结果。上述时钟同步监测方法、装置、级联系统和计算机设备，首先在检测到下一级联设备接入时，基于接收时钟信号生成对应的发送时钟信号；而后，基于基准信号，确定基准信号和接收时钟信号之间的接收相位差，以及确定基准信号与发送时钟信号之间的发送相位差；最后，基于接收相位差的出现次数确定接收频率值，基于发送相位差的出现次数确定发送频率值，并将接收频率值和发送频率值分别与标准频率值进行比对，得到针对当前级联设备的监测结果。通过上述方法，可以获得较为精确地接收频率值和发送频率值，从而可以通过接收频率值、发送频率值，和标准频率值的比对结果，得到针对当前级联设备的监测结果。附图说明图1为一个实施例中时钟同步监测方法的流程示意图；图2为一个实施例中频率测试方法的流程示意图；图3为另一个实施例中多路测试方法的示意图；图4为一个实施例中对时钟信号的优化处理流程示意图；图5为一个实施例中音频级联场景的架构示意图；图6为一个实施例中物理层协议示意图；图7为一个实施例中同步装置的结构示意图；图8为一个实施例中频率测试模块的结构示意图；图9为一个实施例中时钟同步监测装置的结构示意图；图10为一个实施例中计算机设备的内部结构图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。在一个实施例中，如图1所示，提供了一种时钟同步监测方法，包括以下步骤：步骤S110，在检测到下一级联设备接入时，基于获取到的接收时钟信号，生成对应于下一级联设备的发送时钟信号。其中，在下一级联设备接入时，当前级联设备基于接收时钟信号生成发送时钟信号，可以理解的是，在理想状态下，发送时钟信号的相位、频率等信息与接收时钟信号对应的信息应相同，或差别较小，从而才可以保证级联设备的同步性。进一步地，在实际应用时，当前级联设备通常不能直接获取到上述接收时钟信号，而是获取到音频、视频等信号，以采用网线级联的音视频设备为例，该获取到的音视频信号通过网络信号进行传输，在该信号传输至当前级联设备时，采用支持精确网络时间协议的Switch芯片可以通过精确时钟协议恢复出硬件时钟，即上文中所述的接收时钟信号，从而进一步实现基于该接收时钟信号生成上述发送时钟信号。步骤S120，获取基准信号，确定基准信号与接收时钟信号的接收相位差，以及基准信号与发送时钟信号的发送相位差。其中，上述基准信号为一种频率已知的信号，本申请中的基准信号用于与接收时钟信号和发送时钟信号进行比对，以确定接收时钟信号和发送时钟信号的频率等类型的参数。进一步地，在一些实施例中，上述基准信号的获取通常是通过已知的基准晶振产生的时钟，并进行整形得到的。本实施例中，在获取到接收时钟信号以及发送时钟信号后，即可确定基准信号与接收时钟信号的接收相位差，以及基准信号与发送时钟信号的发送相位差，为后续的接收频率值和发送频率值的计算打下基础。步骤S130，基于接收相位差的出现次数确定接收时钟信号的接收频率值，基于发送相位差的出现次数确定发送时钟信号的发送频率值，并将接收频率值和发送频率值分别与预设的标准频率值进行比对，得到针对当前级联设备的监测结果。其中，本申请中基于接收相位差和发送相位差出现的次数计算对应的接收频率值和发送频率值，与相关技术中直接测量接收频率值和发送频率值相比，本实施例中的计算方法对硬件设备的要求较低，可以有效降低级联设备的生产成本，进一步地，由于基准信号的频率值较为固定，因此通过计算接收相位差和发送相位差，以此来得到接收频率值和发送频率值的方法，可以得到较为准确的结果，可以理解的是，将接收频率值和标准频率值进行比对，若接收频率值与标准频率值之间的差值较大，则表明上一级联设备传入的时钟信号存在误差，需要对前向设备进行校准，若发送频率值与标准频率值之间的差值较大，则表明当前级联设备存在故障，需要对当前级联设备进行校准，从而可以在不拆分级联设备的前提下快速定位需要校准的机器。可以理解的是，本申请中的级联系统包括有多个级联设备，上一级联设备输出的时钟信号为当前级联设备的接收时钟信号，当前级联设备的生成信号以该接收时钟信号为准，当前级联设备发送至下一级联设备的发送时钟信号，即可作为下一级联设备的接收时钟信号，同理，下一级联设备对应的生成时钟信号也以下一级联设备的接收时钟信号为准。通过步骤S110至步骤S130，以基准信号为准，通过接收相位差的出现次数以及发送相位差的出现次数可以计算出准确地接收频率值和发送频率值，且本申请中的方法可以应用于整个系统内部中的一个功能模块上，不仅能做到实时输出，也便于基于获取到的频率值做后续分析、计算，如基于不满足要求的频率值进行反馈并修正信号，而无需人工介入进行测量，有效降低了成本。并且进一步的，将接收频率值以及发送频率值与标准频率值进行比对，即可在不拆分级联设备的前提下快速定位到需要校准的机器，提高了后期的维护效率，并且进一步降低了相应的成本。在一个实施例中，上述方法还包括：获取对应于基准信号的基准起始点；确定在基准起始点处，基准信号与接收时钟信号之间的接收相位差，并对接收时钟信号与基准信号之间获取到的相位差进行记录，直至再次获取到接收相位差；基于获取到的至少两次接收相位差对应的接收时钟信号的波形，得到针对接收时钟信号的接收时钟周期，并基于接收时钟周期，得到接收频率值。具体地，图2为一个实施例中频率测试方法的流程示意图。该基准起始点可由相关技术人员进行设置，通常设置为基准信号一个周期的起点处。在基准起始点设置完毕后，接收等待测量的时钟信号，即上文中所述的接收时钟信号，并确定在基准起始点处，基准信号和接收时钟信号之间的接收相位差，通过预设的门控模块记录该接收相位差的具体数值，直至再次获取到该接收相位差，并确定两次接收相位差之间接收时钟信号的波形以及波形个数。其中需要说明的是，为了保证频率测试结果的准确性，一个实施例中，可以在预设的计数模块计数结果为，获取到n次接收相位差后，综合每次获取到的周期以及相邻两次接收相位差之间的接收时钟信号的波形，得到针对接收时钟信号的接收时钟周期。在得到接收时钟信号和基准信号的周期数后，通过基准信号可得总周期时间，再根据接收时钟信号的周期数得到接收时钟信号的单个周期的时间，取倒数即为接收时钟信号的接收频率值。在确定发送时钟信号的发送频率值时同理。通过本实施例，可以获取到较为准确的频率值，并且无需使用额外的高精度测量设备，在保证了准确率的基础上有效降低了成本。在一个实施例中，上述方法还包括：获取对应于基准信号的至少两个基准起始点，其中，每个基准起始点均不相同；分别确定在每个基准起始点处，基准信号与接收时钟信号之间对应的每种目标接收相位差，并分别对接收时钟信号与基准信号之间的每种相位差进行记录，直至每个基准起始点再次获取到对应的目标接收相位差；其中，接收相位差包括每种目标接收相位差；在每种目标接收相位差各获取至少两次时，得到每种接收时钟信号对应的目标波形，并基于目标波形得到针对接收时钟信号的所有接收时钟周期，并对所有接收时钟周期进行融合计算，得到接收频率值。具体地，获取以基准信号为准的多个基准起始点，其中每个基准起始点的位置均不相同，如有的基准起始点可设置为第二个周期开始处，有的基准起始点第三个周期开始处等等，可以理解的是，为了保证频率测试的效率，每个基准起始点均不相同。在每个基准起始点处，确定基准信号和接收时钟信号对应的每个目标接收相位差，可以理解的是，在实际应用中，由于基准起始点不同，并且获取到的接收时钟信号存在一定的波动或延迟现象，因此计算出的每个目标接收相位差之间可能会存在一定的差别，从而导致基于相邻的两个目标接收相位差之间的目标波形，计算得出的接收时钟周期之间也存在一定的差别，为了提高对接收时钟周期计算的准确性，本实施例中在获取到多个接收时钟周期后，对多个接收时钟周期进行融合计算并取倒，以得到更为准确地接收频率值。图3为一个实施例中多路测试方案的示意图，可以看出，待测时钟信号为上述发送时钟信号或接收时钟信号，基准时钟信号为上述基准信号，不同的基准起始点通常对应不同的相位差，通过相邻两个目标接收相位差之间的接收时钟信号的目标波形，可以得到更为准确地频率计算结果。可以理解的是，对于发送时钟信号的计算同理。通过上述方法，可以综合多次计算结果，以得到更为准确地接收频率值以及发送频率值。在一个实施例中，上述方法还包括：确定接收频率值与标准频率值之间的接收频率偏差，以及发送频率值与标准频率值之间的发送频率偏差；将接收频率偏差、发送频率偏差分别与预设的偏差阈值进行比对，得到监测结果；若监测结果指示，发送频率偏差大于偏差阈值，则基于监测结果对当前级联设备进行校正；若监测结果指示，接收频率偏差大于偏差阈值，则基于监测结果对上一级联设备进行校正。具体地，本实施例中，基于监测结果定位需要校正的级联设备，即，当发送频率偏差大于偏差阈值，表明当前级联设备生成的发送时钟信号与上一级联设备传入的接收时钟信号之间偏差较大，可能会导致后续的级联设备同步性降低，因此需要对当前级联设别进行校正；同理，若接收频率偏差大于偏差阈值，则表明上一级联设备传入的时钟信号已存在较大的偏差，此时的时钟信号与标准的时钟信号偏差较大，因此需要对上一级联设备进行校正。通过上述方法可以在不拆分级联设备的情况下对多个级联设备进行检测，快速定位到需要校正的级联设备，大幅提高了级联设备的校正效率，有效降低了后期的维护成本。在一个实施例中，上述方法还包括：基于预设的同步装置确定接收时钟信号以及初始相位差；其中，初始相位差是初始发送时钟信号与接收时钟信号之间的相位差，且初始发送时钟信号基于接收时钟信号生成；在同步装置检测到初始相位差大于预设的相位差阈值的情况下，基于初始相位差对初始发送时钟信号进行调整，直至相位差小于或等于相位差阈值，得到发送时钟信号，并生成信号标志位；在检测到存在信号标志位时，将发送时钟信号发送给下一级联设备。具体地，在基于接收时钟信号生成初始发送时钟信号后，为了保证多个级联系统之间的同步性，需要先验证初始发送时钟信号与接收时钟信号之间的相位差，即获取上文中所述的接收时钟信号以及初始发送时钟信号之间的初始相位差，该初始相位差反映了接收时钟信号以及初始发送时钟信号之间的延迟程度。若基于预设的同步装置检测到初始相位差大于预设的相位差阈值，则需要基于初始相位差对初始发送时钟信号进行调整，直至相位差小于或等于相位差阈值，得到上述发送时钟信号，即此时的发送时钟信号才为有效时钟信号，可以发送给后续的级联设备，作为下一级联设备的主时钟，其中具体的，在一个实施例中，可将发送时钟信号和接收时钟信号一起输入鉴相器中，鉴相器会比较两个波形的相位差，将相位差转换成电信号输出给对比模块，对比模块可以预设相位差边界值，即上文中所述的相位差阈值，当平均相位差大于边界值时，将相位差信号输出给MAC芯片，MAC芯片根据反馈调整上述初始发送时钟信号的相位，再进入鉴相器进行下一次比较，直至平均相位差小于边界值时视为满足要求。在相位差小于或等于相位差阈值时，生成信号标志位，其中该信号标志位可以是多种形式，比如发送一种特殊字符串，只有接收到该字符串才视为信号有效等，在一个优选实施例中，该信号标志位可以为电平信号。在检测到该信号标志位存在时，才可以将该发送时钟信号发送给下一级联设备。通过本实施例，综合了硬件和算法，可以达到比纯软件手段更高的精度要求，并且也解决了时钟在经过级联设备内部时出现的时钟延误和波动的问题。在一个实施例中，上述方法还包括：基于预设的滤波装置，分别对获取到的初始基准信号以及获取到的初始接收时钟信号进行滤波处理；将滤波后的初始基准信号以及滤波后的初始接收时钟信号输入至预设的锁相环装置，分别对滤波后的初始基准信号以及滤波后的初始接收时钟信号进行跟踪反馈处理，得到目标基准信号以及目标接收时钟信号；分别对目标基准信号以及目标接收时钟信号进行脉冲整形处理，得到基准信号以及接收时钟信号。具体地，图4为一个实施例中对时钟信号的优化处理流程示意图，如图所示，本实施例中基于滤波电路、鉴相器、环路滤波器、压控振荡器、脉冲信号发生器以及分频/倍频装置，对时钟信号进行优化，具体为，为初始基准信号以及初始接收时钟信号各自设置对应的滤波范围，基于滤波电路消除初始接收时钟信号的噪声干扰，并且基准信号也通过滤波电路消除干扰；而后将滤波后的初始基准信号以及滤波后的初始接收时钟信号输入至预设的锁相环装置，该锁相环装置包括有上述鉴相器、环路滤波器以及压控振荡器，基于锁相环装置保证信号的稳定，得到上述目标基准信号以及目标接收时钟信号；最后通过脉冲信号发生器将上述初始基准信号以及初始接收时钟信号整形为脉冲信号，得到上述基准信号以及接收时钟信号，方便后续装置进行相位判断。最后在一个优选实施例中，可以根据不同应用场景的精度需要，对信号进行分频倍频等操作。通过上述方法可以对时钟信号进行优化，为后续对时钟信号的处理打下基础。本实施例还提供了一种时钟同步监测方法的优选实施例。图5为一个实施例中音频级联场景的架构示意图，在实际应用中，首先需要确定主从设备关系，主设备接收外部音频信号，各设备通过网口互联，每个设备中存在主端口和从端口，从端口接收上一级信号，主端口对下一级发送信号，对于端对端设备的PTP协议，一个PTP域内只有一个PTP接口参与时间同步，且作为时钟源时只通过一个PTP接口向下游时钟节点发布时间，其中，所有级联设备均为OC。图6为一个实施例中物理层协议示意图，包括有MAC芯片、switch芯片以及同步装置。当从端口接收到上一级信号时，会将该接收时钟信号发送至switch芯片，而后采用支持PTP协议的switch芯片可以通过精确时钟协议恢复出硬件时钟，即上文中所述的接收时钟信号，并将该接收时钟信号发送至MAC芯片。MAC芯片接收到该接收时钟信号，并以此时钟信号作为基准，在一个实施例中，MAC芯片内部还可经过分频倍频操作供其他功能模块使用。而后，当设备接入下一级联设备时，MAC芯片基于上述接收时钟信号生成发送时钟信号，该发送时钟信号作为下一级联设备的主时钟，并将接收时钟信号和发送时钟信号输入同步装置中，对接收时钟信号和发送时钟信号进行相位比对，得到二者的相位差，并将该相位差作为反馈至输出给上述MAC芯片，该MAC芯片根据反馈值进行调节，将发送时钟信号靠近接收时钟信号，直至两者相位差小于或等于预设的相位差阈值。当相位差小于或等于该相位差阈值后，表明该发送时钟信号为有效时钟，该同步装置会发送有效信号标志位至switch芯片，含有有效信号标志位的发送时钟信号被视为有效，当反馈值未能小于相位差阈值时，有效信号断开，发送时钟信号被视为无效。其中进一步地，图7为一个实施例中同步装置的结构示意图。该同步装置包括相位调整部分、有效时钟输出部分以及频率测试部分。其中，相位调整部分，将发送时钟信号和接收时钟信号一起输入鉴相器中，鉴相器会比较两个波形的相位差，将相位差转换成电信号输出给对比模块，对比模块可以预设相位差边界值，当平均相位差大于边界值时，将相位差信号输出给上文中所述的MAC芯片，该MAC芯片根据反馈值调整发送时钟信号，再进入鉴相器进行下一次比较，直至平均相位差小于边界值时视为该信号有效。其中的有效时钟输出部分，当相位差满足要求时，对比模块会发送电平信号，即上文中所述的信号标志位，标志该发送时钟信号有效，此时发送时钟信号可输出，作为下一级设备的主时钟。其中的频率测试部分，可以测试发送时钟信号和接收时钟信号的频率值，在预设相位差边界值时，通过输出频率可以监控相位调节部分的效果，便于更好的确定预设范围，方便实际调试，另外在实际应用场景中若出现时钟错误的情况，可以通过输出频率定位问题是在发送时钟还是接收时钟，其中，可以基于预设的基准信号来判断时钟信号的频率是否有误，对于多级联设备，可以实现不拆分设备逐一检测，做到快速定位，其中，FeqTX为发送时钟频率，FeqRX为接收时钟频率。图8为一个实施例中频率测试模块的结构示意图，其中，鉴相器用于比较两个波形的相位差，在频率测试模块中，鉴相器可以分别比较基准信号和发送时钟信号之间的相位差，以及比较基准信号和接收时钟信号之间的相位差。频率测试模块还包括门控模块，门控模块以第一次达到预设的基准起始点开始，通过计数器开始计数，并记录该基准起始点处的接收相位差以及发送相位差，门控模块在第二次获取该相位差时控制计数器结束计数。频率测试部分在结束计数后，通过脉冲个数差值计算两个脉冲周期比例，通过基准信号得到待测信号的周期值，并取倒数，得到频率值，即上文中所述的接收频率值和发送频率值。在实际应用中，上述基准信号通常是由频率已知的基准晶振产生的时钟，并通过整形将正弦波变为方波脉冲信号，基准晶振通常会存在一定的频偏值，在使用之前需要计算频偏补偿，基准晶振的频偏补偿公式如下：其中，Freqset为基准信号设定频率，ppm为晶体频偏值。测试频率为：其中Cycle1为待测信号周期数，Cycle2为基准信号周期数。基准信号频率需要远大于待测信号频率。应该理解的是，虽然如上所述的各实施例所涉及的流程图中的各个步骤按照箭头的指示依次显示，但是这些步骤并不是必然按照箭头指示的顺序依次执行。除非本文中有明确的说明，这些步骤的执行并没有严格的顺序限制，这些步骤可以以其它的顺序执行。而且，如上所述的各实施例所涉及的流程图中的至少一部分步骤可以包括多个步骤或者多个阶段，这些步骤或者阶段并不必然是在同一时刻执行完成，而是可以在不同的时刻执行，这些步骤或者阶段的执行顺序也不必然是依次进行，而是可以与其它步骤或者其它步骤中的步骤或者阶段的至少一部分轮流或者交替地执行。基于同样的发明构思，本申请实施例还提供了一种用于实现上述所涉及的时钟同步监测方法的时钟同步监测装置。该装置所提供的解决问题的实现方案与上述方法中所记载的实现方案相似，故下面所提供的一个或多个时钟同步监测装置实施例中的具体限定可以参见上文中对于时钟同步监测方法的限定，在此不再赘述。在一个实施例中，如图9所示，提供了一种时钟同步监测装置，包括：获取模块91、计算模块92和生成模块93，其中：获取模块91，用于在检测到下一级联设备接入时，基于获取到的接收时钟信号，生成对应于下一级联设备的发送时钟信号；计算模块92，用于获取基准信号，确定基准信号与接收时钟信号的接收相位差，以及基准信号与发送时钟信号的发送相位差；生成模块93，用于基于接收相位差的出现次数确定接收时钟信号的接收频率值，基于发送相位差的出现次数确定发送时钟信号的发送频率值，并将接收频率值和发送频率值分别与预设的标准频率值进行比对，得到针对当前级联设备的监测结果。具体地，本实施例中通过获取模块91生成对应于接收时钟信号的发送时钟信号，而后计算模块92确定基准信号与接收时钟信号的接收相位差以及基准信号与发送时钟信号的发送相位差，计算完毕后，计算模块92将上述接收相位差以及发送相位差发送至生成模块93，生成模块93用于基于接收相位差的出现次数确定接收时钟信号的接收频率值，以及基于发送相位差的出现次数确定发送时钟信号的发送频率值，并将接收频率值和发送频率值分别与预设的标准频率值进行比对，得到针对当前级联设备的监测结果。上述时钟同步监测装置中的各个模块可全部或部分通过软件、硬件及其组合来实现。上述各模块可以硬件形式内嵌于或独立于计算机设备中的处理器中，也可以以软件形式存储于计算机设备中的存储器中，以便于处理器调用执行以上各个模块对应的操作。在一个实施例中，还提供了一种级联系统，该级联系统包括，至少两个级联设备以及如上文所述的时钟同步监测装置。具体地，当前级联设备获取上一级联设备发送的接收时钟信号，并对应该接收时钟信号生成对应下一级联设备的发送时钟信号，而后通过当前级联设备中包括的同步装置对发送时钟信号进行校准，再将校准后的发送时钟信号发送至对应的下一级联设备，从而保证多个级联设备之间的同步性。在一个实施例中，提供了一种计算机设备，该计算机设备可以是服务器，其内部结构图可以如图10所示。该计算机设备包括通过系统总线连接的处理器、存储器和网络接口。其中，该计算机设备的处理器用于提供计算和控制能力。该计算机设备的存储器包括非易失性存储介质和内存储器。该非易失性存储介质存储有操作系统、计算机程序和数据库。该内存储器为非易失性存储介质中的操作系统和计算机程序的运行提供环境。该计算机设备的数据库用于存储时钟同步监测算法数据。该计算机设备的网络接口用于与外部的终端通过网络连接通信。该计算机程序被处理器执行时以实现一种时钟同步监测方法。本领域技术人员可以理解，图10中示出的结构，仅仅是与本申请方案相关的部分结构的框图，并不构成对本申请方案所应用于其上的计算机设备的限定，具体的计算机设备可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。在一个实施例中，提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现以下步骤：在检测到下一级联设备接入时，基于获取到的接收时钟信号，生成对应于下一级联设备的发送时钟信号；获取基准信号，确定基准信号与接收时钟信号的接收相位差，以及基准信号与发送时钟信号的发送相位差；基于接收相位差的出现次数确定接收时钟信号的接收频率值，基于发送相位差的出现次数确定发送时钟信号的发送频率值，并将接收频率值和发送频率值分别与预设的标准频率值进行比对，得到针对当前级联设备的监测结果。需要说明的是，本申请所涉及的用户信息和数据，均为经用户授权或者经过各方充分授权的信息和数据。本领域普通技术人员可以理解实现上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，所述的计算机程序可存储于一非易失性计算机可读取存储介质中，该计算机程序在执行时，可包括如上述各方法的实施例的流程。其中，本申请所提供的各实施例中所使用的对存储器、数据库或其它介质的任何引用，均可包括非易失性和易失性存储器中的至少一种。非易失性存储器可包括只读存储器、磁带、软盘、闪存、光存储器、高密度嵌入式非易失性存储器、阻变存储器、磁变存储器、铁电存储器、相变存储器、石墨烯存储器等。易失性存储器可包括随机存取存储器或外部高速缓冲存储器等。作为说明而非局限，RAM可以是多种形式，比如静态随机存取存储器或动态随机存取存储器等。本申请所提供的各实施例中所涉及的数据库可包括关系型数据库和非关系型数据库中至少一种。非关系型数据库可包括基于区块链的分布式数据库等，不限于此。本申请所提供的各实施例中所涉及的处理器可为通用处理器、中央处理器、图形处理器、数字信号处理器、可编程逻辑器、基于量子计算的数据处理逻辑器等，不限于此。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对本申请专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请的保护范围应以所附权利要求为准。
