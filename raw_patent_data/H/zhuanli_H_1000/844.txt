标题title
一种基于链上结算数据的pos机业务审计系统
摘要abst
本发明公开了一种基于链上结算数据的pos机业务审计系统，涉及区块链技术领域，包括云服务器，云服务器通信连接加密传输模块、区块上链模块、网络监测模块、数据聚合模块和审计模块；云服务器用于构建POS机区块链网络；加密传输模块用于对各POS终端设备的交易数据进行数字签名，区块上链模块将数字签名验证有效的交易数据打包成新区块，并进行区块上链；网络监测模块用于判断POS机区块链网络的网络状态；数据聚合模块根据网络状态启动数据聚合机制，将多笔交易数据打包并形成一个聚合区块，并生成二分审计树以及交易证明；审计模块对POS机区块链网络在网络拥塞状态时生成的聚合区块内的交易数据进行完整性验证，显著提高审计效率。
权利要求书clms
1.一种基于链上结算数据的pos机业务审计系统，包括云服务器，其特征在于，所述云服务器通信连接有加密传输模块、区块上链模块、网络监测模块、数据聚合模块和审计模块；所述云服务器用于构建POS机区块链网络，将POS终端设备作为区块链节点，采集区块链节点上传的交易数据；所述加密传输模块用于对各POS终端设备的交易数据进行数字签名，并将经过数字签名的交易数据广播到整个区块链网络中；所述区块上链模块将数字签名验证有效的交易数据打包成新区块，并根据共识机制和智能合约对新区块进行区块验证，在新区块的验证通过后，进行区块上链和区块链网络状态更新操作；所述网络监测模块根据POS机区块链网络中的新区块上链频率以及各区块链节点之间的通信链路带宽消耗，判断POS机区块链网络的网络状态，并将网络状态传输至数据聚合模块；所述数据聚合模块根据POS机区块链网络的网络状态启动数据聚合机制，将多笔交易数据打包并形成一个聚合区块，并生成聚合区块的二分审计树以及多笔交易数据的交易证明，并发送至审计模块；所述审计模块对POS机区块链网络在网络拥塞状态时生成的聚合区块内的交易数据进行完整性验证。2.根据权利要求1所述的一种基于链上结算数据的pos机业务审计系统，其特征在于，所述云服务器构建POS机区块链网络的过程包括：构建POS机区块链网络，将预设范围内的POS终端设备作为区块链节点，每个区块链节点相互链接，且每个区块链节点均链接有对应的数据上链端，顾客通过所述数据上链端将所需要交易的交易数据上传至区块链节点内。3.根据权利要求2所述的一种基于链上结算数据的pos机业务审计系统，其特征在于，所述加密传输模块对各POS终端设备的交易数据进行数字签名，并将经过数字签名的交易数据广播到整个区块链网络中的过程包括：通过非对称加密算法预设各POS终端设备对应的区块链节点的公钥和私钥，当顾客通过POS终端设备的数据上链端将交易数据上传至区块链节点内时，使用区块链节点的私钥对所述交易数据进行数字签名；预设点对点通信协议，区块链节点根据点对点通信协议将经过数字签名的交易数据广播至整个POS机区块链网络，POS机区块链网络中的其他区块链节点根据所述区块链节点的公钥来验证数字签名的有效性。4.根据权利要求3所述的一种基于链上结算数据的pos机业务审计系统，其特征在于，所述区块上链模块将数字签名验证有效的交易数据打包成新区块，并根据共识机制和智能合约对新区块进行区块验证，在新区块的验证通过后，进行区块上链和区块链网络状态更新操作的过程包括：预设记账节点、共识机制和智能合约，当交易数据的数字签名被验证有效后，通过记账节点将验证过的交易数据打包成新区块，新区块包括区块头和交易列表，记账节点根据点对点通信协议将新区块广播至整个POS机区块链网络，POS机区块链网络中的其他区块链节点根据共识机制和智能合约对新区块进行区块数据正确性验证和交易数据有效性验证；在新区块的验证通过后，新区块被添加至区块链的最末端，所述新区块的区块信息被更新至所有区块链节点的本地区块链副本中。5.根据权利要求4所述的一种基于链上结算数据的pos机业务审计系统，其特征在于，POS机区块链网络中的其他区块链节点根据共识机制和智能合约对新区块进行区块数据正确性验证和交易数据有效性验证的过程包括：获取新区块中区块头的组成部分，所述组成部分包括版本号、前一个区块的哈希值、时间戳、难度目标和随机数，根据所述区块头的组成部分获取新区块的哈希值，获取区块链网络当前难度目标，若获取的哈希值小于区块链网络当前难度目标，则记录一个“验证通过”事件标签至新区块上；根据智能合约对交易数据有效性验证，所述智能合约为预设代码的集合，所述预设代码存储在区块链上并可自动执行预设条件，所述智能合约会根据预设代码自动执行检查，若交易数据不符合预设条件，智能合约会自动拒绝交易请求，并给出相应的状态代码，如果新区块的交易数据满足所有预设条件，智能合约将记录一个“交易批准”事件标签至新区块上。6.根据权利要求5所述的一种基于链上结算数据的pos机业务审计系统，其特征在于，所述网络监测模块根据POS机区块链网络中的新区块上链频率以及各区块链节点之间的通信链路带宽消耗，判断POS机区块链网络的网络状态，并将网络状态传输至数据聚合模块的过程包括：获取POS机区块链网络中的新区块上链频率以及各区块链节点之间的通信链路带宽消耗，预设上链频率阈值以及带宽消耗阈值，将新区块上链频率以及各区块链节点之间的通信链路带宽消耗分别与上链频率阈值以及带宽消耗阈值进行对比；当新区块上链频率大于上链频率阈值且存在区块链节点之间的通信链路带宽消耗大于带宽消耗阈值时，将POS机区块链网络标记网络拥塞状态；当新区块上链频率小于等于上链频率阈值或区块链节点之间的通信链路带宽消耗小于等于带宽消耗阈值，将POS机区块链网络标记网络正常状态。7.根据权利要求6所述的一种基于链上结算数据的pos机业务审计系统，其特征在于，所述数据聚合模块根据POS机区块链网络的网络状态启动数据聚合机制，将多笔交易数据打包并形成一个聚合区块，并生成聚合区块的二分审计树以及多笔交易数据的交易证明，并发送至审计模块的过程包括：当POS机区块链网络处于网络拥塞状态时，启动数据聚合机制；预设待聚合的交易数据总数为n，当区块链网络内上传至区块链节点内交易数据总数到达n时，通过加密传输模块和区块上链模块将n笔交易数据打包并形成一个聚合区块；对于聚合区块中的每笔交易数据，首先将每笔交易数据转换成固定长度的二进制数据，然后对所述二进制数据应用SHA-256哈希函数，获取每笔交易数据对应的哈希值，将每笔交易数据对应的哈希值标记为叶节点；随后将相邻的叶节点两两配对，将每对叶节点的哈希值进行拼接并再次应用SHA-256哈希函数，获取每对叶节点对应的哈希值，将每对叶节点对应的哈希值标记为父节点，随后对相邻的父节点两两配对，将每对父节点的哈希值进行拼接并再次应用SHA-256哈希函数，获取每对父节点对应的哈希值，重复上述步骤，直到生成的哈希值只有一个时，将所述哈希值标记为根节点；根据聚合区块中的若干叶节点、父节点以及根节点生成聚合区块的二分审计树，将所述二分审计树发送至审计模块；获取聚合区块中的每笔交易数据对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值，根据每笔交易数据对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值生成每笔交易数据对应的交易证明。8.根据权利要求7所述的一种基于链上结算数据的pos机业务审计系统，其特征在于，所述审计模块对POS机区块链网络在网络拥塞状态时生成的聚合区块内的交易数据进行完整性验证的过程包括：获取待验证聚合区块中每笔交易数据对应的交易证明以及待验证聚合区块的二分审计树，将每笔交易数据对应的交易证明中的对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值与二分审计树中对应位置的哈希值进行一致性匹配；若每笔交易数据对应的交易证明中的对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值与二分审计树中对应位置的哈希值一致，则记录一个“结算完成”事件标签至聚合区块上；若存在交易数据对应的交易证明中的对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值与二分审计树中对应位置的哈希值不一致，则自动拒绝所述交易数据对应的交易请求。
说明书desc
技术领域本发明涉及区块链技术领域，具体是一种基于链上结算数据的pos机业务审计系统。背景技术区块链技术通过加密算法保障了数据的安全性，审计系统中的敏感数据可以进行加密存储，并通过私钥控制访问权限，提高了数据的安全性，且区块链上的数据是实时更新和广播的，审计人员可以通过区块链网络实时获取数据，并进行实时的审计验证，而且区块链技术本身具有透明度，所有参与者都可以查看同一份数据，因此审计过程更加透明公正，如果同时有大量用户或应用程序使用网络，尤其是同时进行大量数据传输的情况下，网络中的数据包数量可能会超出网络的处理能力，从而导致网络拥塞，此时，审计系统的数据传输也会受到影响；网络拥塞可能导致审计验证过程中的延迟，因为系统需要等待数据传输完成才能进行验证，这可能会导致审计结果的延迟，从而影响审计的实时性，网络拥塞可能导致数据传输过程中的丢包或错误，从而导致数据不一致性，审计系统需要确保链上结算数据的准确性和完整性，如果网络拥塞导致数据的丢失或错误，审计验证结果可能会受到影响，网络拥塞可能导致区块链网络的延迟回滚，这可能会导致审计系统对之前已验证的数据进行重新验证，从而增加了处理时间和成本，为了解决上述问题，现提供一种基于链上结算数据的pos机业务审计系统。发明内容为了解决上述技术问题，本发明的目的在于提供一种基于链上结算数据的pos机业务审计系统，包括监控中心，所述监控中心通信连接有加密传输模块、区块上链模块、网络监测模块、数据聚合模块和审计模块；所述云服务器用于构建POS机区块链网络，将POS终端设备作为区块链节点，采集区块链节点上传的交易数据；所述加密传输模块用于对各POS终端设备的交易数据进行数字签名，并将经过数字签名的交易数据广播到整个区块链网络中；所述区块上链模块将数字签名验证有效的交易数据打包成新区块，并根据共识机制和智能合约对新区块进行区块验证，在新区块的验证通过后，进行区块上链和区块链网络状态更新操作；所述网络监测模块根据POS机区块链网络中的新区块上链频率以及各区块链节点之间的通信链路带宽消耗，判断POS机区块链网络的网络状态，并将网络状态传输至数据聚合模块；所述数据聚合模块根据POS机区块链网络的网络状态启动数据聚合机制，将多笔交易数据打包并形成一个聚合区块，并生成聚合区块的二分审计树以及多笔交易数据的交易证明，并发送至审计模块；所述审计模块对POS机区块链网络在网络拥塞状态时生成的聚合区块内的交易数据进行完整性验证。进一步的，所述云服务器构建POS机区块链网络的过程包括：构建POS机区块链网络，将预设范围内的POS终端设备作为区块链节点，每个区块链节点相互链接，且每个区块链节点均链接有对应的数据上链端，顾客通过所述数据上链端将所需要交易的交易数据上传至区块链节点内。进一步的，所述加密传输模块对各POS终端设备的交易数据进行数字签名，并将经过数字签名的交易数据广播到整个区块链网络中的过程包括：通过非对称加密算法预设各POS终端设备对应的区块链节点的公钥和私钥，当顾客通过POS终端设备的数据上链端将交易数据上传至区块链节点内时，使用区块链节点的私钥对所述交易数据进行数字签名；预设点对点通信协议，区块链节点根据点对点通信协议将经过数字签名的交易数据广播至整个POS机区块链网络，POS机区块链网络中的其他区块链节点根据所述区块链节点的公钥来验证数字签名的有效性。进一步的，所述区块上链模块将数字签名验证有效的交易数据打包成新区块，并根据共识机制和智能合约对新区块进行区块验证，在新区块的验证通过后，进行区块上链和区块链网络状态更新操作的过程包括：预设记账节点、共识机制和智能合约，当交易数据的数字签名被验证有效后，通过记账节点将验证过的交易数据打包成新区块，新区块包括区块头和交易列表，记账节点根据点对点通信协议将新区块广播至整个POS机区块链网络，POS机区块链网络中的其他区块链节点根据共识机制和智能合约对新区块进行区块数据正确性验证和交易数据有效性验证；在新区块的验证通过后，新区块被添加至区块链的最末端，所述新区块的区块信息被更新至所有区块链节点的本地区块链副本中。进一步的，POS机区块链网络中的其他区块链节点根据共识机制和智能合约对新区块进行区块数据正确性验证和交易数据有效性验证的过程包括：获取新区块中区块头的组成部分，所述组成部分包括版本号、前一个区块的哈希值、时间戳、难度目标和随机数，根据所述区块头的组成部分获取新区块的哈希值，获取区块链网络当前难度目标，若获取的哈希值小于区块链网络当前难度目标，则记录一个“验证通过”事件标签至新区块上；根据智能合约对交易数据有效性验证，所述智能合约为预设代码的集合，所述预设代码存储在区块链上并可自动执行预设条件，所述智能合约会根据预设代码自动执行检查，若交易数据不符合预设条件，智能合约会自动拒绝交易请求，并给出相应的状态代码，如果新区块的交易数据满足所有预设条件，智能合约将记录一个“交易批准”事件标签至新区块上。进一步的，所述网络监测模块根据POS机区块链网络中的新区块上链频率以及各区块链节点之间的通信链路带宽消耗，判断POS机区块链网络的网络状态，并将网络状态传输至数据聚合模块的过程包括：获取POS机区块链网络中的新区块上链频率以及各区块链节点之间的通信链路带宽消耗，预设上链频率阈值以及带宽消耗阈值，将新区块上链频率以及各区块链节点之间的通信链路带宽消耗分别与上链频率阈值以及带宽消耗阈值进行对比；当新区块上链频率大于上链频率阈值且存在区块链节点之间的通信链路带宽消耗大于带宽消耗阈值时，将POS机区块链网络标记网络拥塞状态；当新区块上链频率小于等于上链频率阈值或区块链节点之间的通信链路带宽消耗小于等于带宽消耗阈值，将POS机区块链网络标记网络正常状态。进一步的，所述数据聚合模块根据POS机区块链网络的网络状态启动数据聚合机制，将多笔交易数据打包并形成一个聚合区块，并生成聚合区块的二分审计树以及多笔交易数据的交易证明，并发送至审计模块的过程包括：当POS机区块链网络处于网络拥塞状态时，启动数据聚合机制；预设待聚合的交易数据总数为n，当区块链网络内上传至区块链节点内交易数据总数到达n时，通过加密传输模块和区块上链模块将所述n笔交易数据打包并形成一个聚合区块；对于聚合区块中的每笔交易数据，首先将每笔交易数据转换成固定长度的二进制数据，然后对所述二进制数据应用SHA-256哈希函数，获取每笔交易数据对应的哈希值，将每笔交易数据对应的哈希值标记为叶节点；随后将相邻的叶节点两两配对，将每对叶节点的哈希值进行拼接并再次应用SHA-256哈希函数，获取每对叶节点对应的哈希值，将每对叶节点对应的哈希值标记为父节点，随后对相邻的父节点两两配对，将每对父节点的哈希值进行拼接并再次应用SHA-256哈希函数，获取每对父节点对应的哈希值，重复上述步骤，直到生成的哈希值只有一个时，将所述哈希值标记为根节点；根据聚合区块中的若干叶节点、父节点以及根节点生成聚合区块的二分审计树，将所述二分审计树发送至审计模块；获取聚合区块中的每笔交易数据对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值，根据每笔交易数据对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值生成每笔交易数据对应的交易证明。进一步的，所述审计模块对POS机区块链网络在网络拥塞状态时生成的聚合区块内的交易数据进行完整性验证的过程包括：获取待验证聚合区块中每笔交易数据对应的交易证明以及待验证聚合区块的二分审计树，将每笔交易数据对应的交易证明中的对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值与二分审计树中对应位置的哈希值进行一致性匹配；若每笔交易数据对应的交易证明中的对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值与二分审计树中对应位置的哈希值一致，则记录一个“结算完成”事件标签至聚合区块上；若存在交易数据对应的交易证明中的对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值与二分审计树中对应位置的哈希值不一致，则自动拒绝所述交易数据对应的交易请求。与现有技术相比，本发明的有益效果是：1、本发明结合区块链技术来记录、存储和POS设备终端产生的交易数据，利用区块链的去中心化、透明性、不可篡改性和可追溯性来改进传统的审计流程，增加数据的安全性和信任度。2、监控POS机区块链网络中是否有任何异常的网络状态变化，当所述POS机区块链网络出现交易拥塞状态时，通过启动数据聚合机制，将多笔交易数据打包并形成一个聚合区块，避免每笔交易数据皆构建一个新区块，节省POS机区块链网络带宽资源，提高POS机区块链网络的吞吐量。3、通过生成聚合区块的二分审计树以及多笔交易数据的交易证明，并发送至审计模块，当审计模块需要验证某个特定交易是否包含在区块中时，是否发生交易数据丢包或错误时，只需通过交易证明提供相应的叶节点和中间节点的哈希值即可，而无需传输和验证整个交易数据集，显著提高了网络拥塞状态下的审计效率。附图说明图1为本申请实施例的一种基于链上结算数据的pos机业务审计系统的原理图。具体实施方式下面结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整的描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。如图1所示，一种基于链上结算数据的pos机业务审计系统，包括云服务器，所述云服务器通信连接有加密传输模块、区块上链模块、网络监测模块、数据聚合模块和审计模块；所述云服务器用于构建POS机区块链网络，将POS终端设备作为区块链节点，采集区块链节点上传的交易数据；所述加密传输模块用于对各POS终端设备的交易数据进行数字签名，并将经过数字签名的交易数据广播到整个区块链网络中；所述区块上链模块将数字签名验证有效的交易数据打包成新区块，并根据共识机制和智能合约对新区块进行区块验证，在新区块的验证通过后，进行区块上链和区块链网络状态更新操作；所述网络监测模块根据POS机区块链网络中的新区块上链频率以及各区块链节点之间的通信链路带宽消耗，判断POS机区块链网络的网络状态，并将网络状态传输至数据聚合模块；所述数据聚合模块根据POS机区块链网络的网络状态启动数据聚合机制，将多笔交易数据打包并形成一个聚合区块，并生成聚合区块的二分审计树以及多笔交易数据的交易证明，并发送至审计模块；所述审计模块对POS机区块链网络在网络拥塞状态时生成的聚合区块内的交易数据进行完整性验证。需要进一步说明的是，在具体实施过程中，POS终端设备在处理每一笔交易时，会实时生成结算数据，该结算数据包括但不限于交易金额、时间、POS机编号、操作员信息、商品或服务信息等。需要进一步说明的是，在具体实施过程中，所述云服务器构建POS机区块链网络的过程包括：构建POS机区块链网络，将预设范围内的POS终端设备作为区块链节点，每个区块链节点相互链接，且每个区块链节点均链接有对应的数据上链端，顾客通过所述数据上链端将所需要交易的交易数据上传至区块链节点内。需要进一步说明的是，在具体实施过程中，所述加密传输模块对各POS终端设备的交易数据进行数字签名，并将经过数字签名的交易数据广播到整个区块链网络中的过程包括：通过非对称加密算法预设各POS终端设备对应的区块链节点的公钥和私钥，当顾客通过POS终端设备的数据上链端将交易数据上传至区块链节点内时，使用区块链节点的私钥对所述交易数据进行数字签名；预设点对点通信协议，区块链节点根据点对点通信协议将经过数字签名的交易数据广播至整个POS机区块链网络，POS机区块链网络中的其他区块链节点根据所述区块链节点的公钥来验证数字签名的有效性。需要进一步说明的是，在具体实施过程中，使用区块链节点的私钥对所述交易数据进行数字签名的过程包括：对区块链节点的交易数据使用SHA-256加密哈希函数计算其哈希值，选取两个质数，并分别将两个质数标记为a和b，且所述a和b足够用大；获得参数n=a*b；计算欧拉公式φ=*，选择一个公开指数e，满足1＜e＜φ且e与φ互素；计算私钥指数d，私钥指数d的计算公式为e*d≡1)；分别获得区块链节点的公钥和私钥；通过私钥和对应的非对称加密算法对哈希值进行加密生成数据签名。需要进一步说明的是，在具体实施过程中，所述区块上链模块将数字签名验证有效的交易数据打包成新区块，并根据共识机制和智能合约对新区块进行区块验证，在新区块的验证通过后，进行区块上链和区块链网络状态更新操作的过程包括：预设记账节点、共识机制和智能合约，当交易数据的数字签名被验证有效后，通过记账节点将验证过的交易数据打包成新区块，新区块包括区块头和交易列表，记账节点根据点对点通信协议将新区块广播至整个POS机区块链网络，POS机区块链网络中的其他区块链节点根据共识机制和智能合约对新区块进行区块数据正确性验证和交易数据有效性验证；在新区块的验证通过后，新区块被添加至区块链的最末端，所述新区块的区块信息被更新至所有区块链节点的本地区块链副本中。需要进一步说明的是，在具体实施过程中，新区块中的区块头用于识别一个区块的关键源数据，区块头中的数据信息包括：版本号，表明了新区块遵循的协议版本；父区块哈希，反映了链中前一个区块的唯一哈希值，这确保了区块之间的链接；时间戳，标记了区块产生的时间，用于记录区块链的时间序列数据；难度目标，反映了产生有效区块所需工作量的一个度量值；随机数，用于运行共识算法的数据。需要进一步说明的是，在具体实施过程中，新区块中的交易列表，包含了该区块包含的所有交易数据，每笔交易包括不限于：交易ID；输入，表示交易的来源，这包括了之前的交易输出和数字签名等信息；输出，表示交易的去向，这包括了接收地址和转移金额；交易金额；锁定时间，用于限定交易的有效期。需要进一步说明的是，在具体实施过程中，POS机区块链网络中的其他区块链节点根据共识机制和智能合约对新区块进行区块数据正确性验证和交易数据有效性验证的过程包括：将版本号、前一个区块的哈希值、时间戳、难度目标依次排列并连接在一起，通过SHA-256加密哈希函数对上述连接后的数据进行哈希运算，对哈希运算的结果进行计算和重新哈希，获取区块链网络当前难度目标，若存在计算出的哈希值小于区块链网络当前难度目标，则标记这个新区块的区块数据正确性验证通过；新区块根据智能合约对交易数据有效性验证，在本发明中，智能合约起到中心角色，它能够自动执行合同条款，降低欺诈的可能性，并确保交易快速、透明且安全，所述智能合约是代码的集合，这些代码存储在区块链上并可自动执行预设的条件，这些是在无需第三方交易验证或处理的情况下进行的，区块链节点需要执行智能合约的合约代码并验证交易在合约逻辑下的有效性，由于智能合约内部编写有业务逻辑，这些逻辑会定义具体的交易条款及条件，当一项交易请求发出时，智能合约会根据这些预定义的条款自动执行检查，例如：智能合约通过区块链内置函数查询发起交易的钱包地址，检查其余额是否足够覆盖交易金额；客户的交易是否超过了每日交易额度限制；交易是否符合时间限制或锁定期；客户是否满足年龄或其他合规性要求；如果发现客户账户资金不足或不符合任何规则和条件，智能合约会自动拒绝交易请求，并给出相应的错误信息或状态代码，如果新区块的交易数据满足所有自动验证规则，智能合约将记录一个“交易数据有效”事件标签至新区块上。需要进一步说明的是，在具体实施过程中，所述网络监测模块根据POS机区块链网络中的新区块上链频率以及各区块链节点之间的通信链路带宽消耗，判断POS机区块链网络的网络状态，并将网络状态传输至数据聚合模块的过程包括：获取POS机区块链网络中的新区块上链频率以及各区块链节点之间的通信链路带宽消耗，预设上链频率阈值以及带宽消耗阈值，将新区块上链频率以及各区块链节点之间的通信链路带宽消耗分别与上链频率阈值以及带宽消耗阈值进行对比；当新区块上链频率大于上链频率阈值且存在区块链节点之间的通信链路带宽消耗大于带宽消耗阈值时，将POS机区块链网络标记网络拥塞状态；当新区块上链频率小于等于上链频率阈值或区块链节点之间的通信链路带宽消耗小于等于带宽消耗阈值，将POS机区块链网络标记网络正常状态。需要进一步说明的是，在具体实施过程中，所述数据聚合模块根据POS机区块链网络的网络状态启动数据聚合机制，将多笔交易数据打包并形成一个聚合区块，并生成聚合区块的二分审计树以及多笔交易数据的交易证明，并发送至审计模块的过程包括：当POS机区块链网络处于网络拥塞状态时，启动数据聚合机制；预设待聚合的交易数据总数为n，当区块链网络内上传至区块链节点内交易数据总数到达n时，通过加密传输模块和区块上链模块将所述n笔交易数据打包并形成一个聚合区块；对于聚合区块中的每笔交易数据，首先将每笔交易数据转换成固定长度的二进制数据，然后对所述二进制数据应用SHA-256哈希函数，获取每笔交易数据对应的哈希值，将每笔交易数据对应的哈希值标记为叶节点；随后将相邻的叶节点两两配对，将每对叶节点的哈希值进行拼接并再次应用SHA-256哈希函数，获取每对叶节点对应的哈希值，将每对叶节点对应的哈希值标记为父节点，随后对相邻的父节点两两配对，将每对父节点的哈希值进行拼接并再次应用SHA-256哈希函数，获取每对父节点对应的哈希值，重复上述步骤，直到生成的哈希值只有一个时，将所述哈希值标记为根节点；根据聚合区块中的若干叶节点、父节点以及根节点生成聚合区块的二分审计树，将所述二分审计树发送至审计模块；获取聚合区块中的每笔交易数据对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值，根据每笔交易数据对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值生成每笔交易数据对应的交易证明。需要进一步说明的是，在具体实施过程中，所述审计模块对POS机区块链网络在网络拥塞状态时生成的聚合区块内的交易数据进行完整性验证的过程包括：获取待验证聚合区块中每笔交易数据对应的交易证明以及待验证聚合区块的二分审计树，将每笔交易数据对应的交易证明中的对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值与二分审计树中对应位置的哈希值进行一致性匹配；若每笔交易数据对应的交易证明中的对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值与二分审计树中对应位置的哈希值一致，则记录一个“结算完成”事件标签至聚合区块上；若存在交易数据对应的交易证明中的对应的叶节点哈希值、每笔交易数据在二分审计树中所在的节点位置以及与所述叶节点配对的相邻的叶节点的哈希值与二分审计树中对应位置的哈希值不一致，则自动拒绝所述交易数据对应的交易请求。以上实施例仅用以说明本发明的技术方法而非限制，尽管参照较佳实施例对本发明进行了详细说明，本领域的普通技术人员应当理解，可以对本发明的技术方法进行修改或等同替换，而不脱离本发明技术方法的精神和范围。
