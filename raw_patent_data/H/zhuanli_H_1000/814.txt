标题title
氛围灯设备及灯效投影播放方法、装置、介质和产品
摘要abst
本申请涉及一种氛围灯设备及灯效投影播放方法、装置、介质和产品，所述方法包括：获取发光灯带中发光单元相对应的位置信息流，包含所述发光灯带中各个发光单元相对应的位置分布信息；根据各个发光单元的位置分布信息，在预设的坐标系中展开得到灯带投影图；采用区域容差窗口将灯带投影图中的发光灯带划分出多个发光单元集，相应构成多个显示控制窗口；以每个显示控制窗口为批量控制单位，生成目标灯效对应每个显示控制窗口的发光单元集的发光控制数据，根据发光控制数据控制发光灯带播放目标灯效。由于显示控制窗口所占平面区域基本相近，可以有效避免播放出的灯效相对于期望效果产生不必要的畸变，能提升用户产品体验。
权利要求书clms
1.一种灯效投影播放方法，其特征在于，包括：获取发光灯带中发光单元相对应的位置信息流，所述位置信息流包含所述发光灯带中各个发光单元相对应的位置分布信息；根据各个发光单元的所述位置分布信息，在预设的坐标系中展开得到灯带投影图，以在所述灯带投影图中重构所述发光灯带及其中的各个发光单元的图案数据；采用区域容差窗口将所述灯带投影图中的发光灯带划分出多个发光单元集，相应构成多个显示控制窗口；以每个显示控制窗口为批量控制单位，生成目标灯效对应每个显示控制窗口的发光单元集的发光控制数据，根据所述发光控制数据控制所述发光灯带播放所述目标灯效。2.根据权利要求1所述的灯效投影播放方法，其特征在于，采用区域容差窗口将所述灯带投影图中的发光灯带划分出多个发光单元集，相应构成多个显示控制窗口，包括：获取区域容差窗口的尺寸规格，以所述灯带投影图中的发光灯带的一端为起始端，沿该发光灯带往另一端滑动移动该区域容差窗口；在所述区域容差窗口移动过程中，确定落入该区域容差窗口且未被纳入其他显示控制窗口的发光单元，且达到所述区域容差窗口所能覆盖的最大数量时，视为检测到显示控制窗口；当检测到显示控制窗口时，建立显示控制窗口与其相对应的发光单元所构成的发光单元集之间的映射关系数据；当完成一个显示控制窗口的映射关系数据的构建后，继续滑动所述区域容差窗口进行以上的迭代，直至最后一个发光单元被纳入相应的显示控制窗口。3.根据权利要求2所述的灯效投影播放方法，其特征在于，获取区域容差窗口的尺寸规格，包括：统计所述灯带投影图中的发光单元总量，按照分区数对所述发光单元总量求均值，作为平均发光单元数量；根据所述平均发光单元数量，对所述灯带投影图中的全部发光单元进行分区，确定每个分区相对应的覆盖窗口；根据各个分区的覆盖窗口的横向尺寸和纵向尺寸分别求取平均横向尺寸和平均纵向尺寸；将所述平均横向尺寸和所述平均纵向尺寸设定为区域容差窗口的尺寸规格。4.根据权利要求1所述的灯效投影播放方法，其特征在于，采用区域容差窗口将所述灯带投影图中的发光灯带划分出多个发光单元集，相应构成多个显示控制窗口，包括：获取所述坐标系的坐标参考点和预设的增量尺寸,基于所述灯带投影图搜寻距离所述坐标参考点最近的发光单元，将以坐标参考点为圆心，以该坐标参考点到该发光单元的距离为半径的区域作为空置区域；在所述半径的基础上叠加所述增量尺寸作为新的半径，确定前后两个半径之间的圆环区域，将该圆环区域作为区域容差窗口；当所述区域容差窗口存在发光单元时，将该区域容差窗口作为显示控制窗口，将区域容差窗口中的全部发光单元作为该显示控制窗口相对应的发光单元集，建立该显示控制窗口与该发光单元集之间的映射关系数据，迭代前一步骤直至相应的区域容差窗口不再包含发光单元。5.根据权利要求1至4中任意一项所述的灯效投影播放方法，其特征在于，以每个显示控制窗口为批量控制单位，生成目标灯效对应每个显示控制窗口的发光单元集的发光控制数据，包括：调用目标灯效的灯效描述数据，所述灯效描述数据包括运动信息和灯效颜色数据；根据所述运动信息确定各个所述显示控制窗口的播放时隙；根据所述灯效颜色数据确定每个所述显示控制窗口的颜色数据；根据每个显示控制窗口的播放时隙和颜色数据，设定该显示控制窗口相对应的发光控制数据，作为该显示控制窗口的发光单元集中每个发光单元的发光控制数据。6.根据权利要求5所述的灯效投影播放方法，其特征在于，根据所述发光控制数据控制所述发光灯带播放所述目标灯效，包括：在每个显示控制窗口相对应的播放时隙，将该显示控制窗口相对应的发光控制数据作为该显示控制窗口相对应的各个发光单元的发光控制数据，传输至所述发光灯带；由所述发光灯带中与该显示控制窗口相对应的各个发光单元根据所述发光控制数据播放相应的灯效。7.一种灯效投影播放装置，其特征在于，包括：位置获取模块，设置为获取发光灯带中发光单元相对应的位置信息流，所述位置信息流包含所述发光灯带中各个发光单元相对应的位置分布信息；投影展开模块，设置为根据各个发光单元的所述位置分布信息，在预设的坐标系中展开得到灯带投影图，以在所述灯带投影图中重构所述发光灯带及其中的各个发光单元的图案数据；窗口划分模块，设置为采用区域容差窗口将所述灯带投影图中的发光灯带划分出多个发光单元集，相应构成多个显示控制窗口；窗口控制模块，设置为以每个显示控制窗口为批量控制单位，生成目标灯效对应每个显示控制窗口的发光单元集的发光控制数据，根据所述发光控制数据控制所述发光灯带播放所述目标灯效。8.一种氛围灯设备，其特征在于，包括控制器和至少一个发光灯带，所述控制器用于执行如权利要求1至6中任意一项所述的方法的步骤。9.一种非易失性计算机可读存储介质，其特征在于，其以计算机可读指令的形式存储有依据权利要求1至6中任意一项所述的方法所实现的计算机程序，该计算机程序被计算机调用运行时，执行相应的方法所包括的步骤。10.一种计算机程序产品，其特征在于，包括计算机程序/指令，所述计算机程序/指令被处理器运行时，执行如权利要求1至6中任意一项所述的方法的步骤。
说明书desc
技术领域本申请涉及照明控制领域，尤其涉及一种氛围灯设备及灯效投影播放方法、装置、介质和产品。背景技术一种氛围灯设备中，采用发光灯带作为其负责发光渲染氛围的灯体，由于发光灯带具有柔韧性，可将发光灯带弯曲塑造为各种期望的形状，例如花朵、云朵或者其它图案等。当需要通过发光灯带播放相应的灯效时，灯效可以根据参考图像之类的素材提供颜色分布，将该颜色分布投射到发光灯带中，通过发光灯带中的各个发光单元协同播放相应的灯效，展示相应的颜色分布，起到光线氛围渲染的效果。为了支持颜色分布到发光灯带的投射，需要知晓发光灯带中，各个发光单元在发光灯带所形成的图案平面上的位置分布，当需要投射颜色分布时，对照这个位置分布便可实现投射。传统技术中，在进行投射时，通常是直接计算出发光灯带中的每个发光单元的发光控制数据进行控制的，但对于发光灯带这种具有柔韧性的产品来说，这种方式会导致出现一些问题。典型的问题是，用户在对发光灯带进行造型时，通常会产生难以避免的曲线绕折，从而导致有的区域发光单元比较密集，有的区域的发光单元则比较疏松，如果仍按照逐个控制的方式对发光单元进行投射，会导致所呈现的图案相对于期望的灯效而发生平面上的畸变，所以，需要有新的方式来确保对发光灯带的控制更为均匀合理，避免使实际灯效产生不必要的畸变。发明内容本申请的目的在于提供一种氛围灯设备及灯效投影播放方法、装置、介质和产品。根据本申请的一个方面，提供一种灯效投影播放方法，包括：获取发光灯带中发光单元相对应的位置信息流，所述位置信息流包含所述发光灯带中各个发光单元相对应的位置分布信息；根据各个发光单元的所述位置分布信息，在预设的坐标系中展开得到灯带投影图，以在所述灯带投影图中重构所述发光灯带及其中的各个发光单元的图案数据；采用区域容差窗口将所述灯带投影图中的发光灯带划分出多个发光单元集，相应构成多个显示控制窗口；以每个显示控制窗口为批量控制单位，生成目标灯效对应每个显示控制窗口的发光单元集的发光控制数据，根据所述发光控制数据控制所述发光灯带播放所述目标灯效。根据本申请的另一方面，提供一种灯效投影播放装置，包括：位置获取模块，设置为获取发光灯带中发光单元相对应的位置信息流，所述位置信息流包含所述发光灯带中各个发光单元相对应的位置分布信息；投影展开模块，设置为根据各个发光单元的所述位置分布信息，在预设的坐标系中展开得到灯带投影图，以在所述灯带投影图中重构所述发光灯带及其中的各个发光单元的图案数据；窗口划分模块，设置为采用区域容差窗口将所述灯带投影图中的发光灯带划分出多个发光单元集，相应构成多个显示控制窗口；窗口控制模块，设置为以每个显示控制窗口为批量控制单位，生成目标灯效对应每个显示控制窗口的发光单元集的发光控制数据，根据所述发光控制数据控制所述发光灯带播放所述目标灯效。根据本申请的另一方面，提供一种氛围灯设备，包括控制器和至少一个发光灯带，所述控制器用于执行所述灯效投影播放方法的步骤。根据本申请的另一方面，提供一种非易失性计算机可读存储介质，其以计算机可读指令的形式存储有依据所述灯效投影播放方法所实现的计算机程序，该计算机程序被计算机调用运行时，执行相应的方法所包括的步骤。根据本申请的另一方面，提供一种计算机程序产品，包括计算机程序/指令，所述计算机程序/指令被处理器运行时，执行所述灯效投影播放方法的步骤。根据本申请的另一方面，提供一种计算机设备，包括中央处理器和存储器，所述中央处理器用于调用运行存储于所述存储器中的计算机程序以执行所述灯效投影播放方法的步骤。相对于现有技术，本申请适应发光灯带具有柔韧性可造型的特点，在氛围灯设备的控制器中获取发光灯带的各个发光单元相对应的位置信息流，根据位置信息流所表示的发光单元的位置分布信息在预设坐标系中展开获得灯带投影图，再基于灯带投影图的图案数据，应用预设的区域容差窗口，将发光灯带的全部发光单元划分为多个显示控制窗口，使每个显示控制窗口在灯带投影图中所占的平面区域基本相近，再以显示控制窗口为批量控制单位，生成目标灯效对应每个显示控制窗口的发光控制数据，使每个显示控制窗口中的全部发光单元均统一应用该发光控制数据对其中的各个发光单元进行灯效播放控制，有效降低控制器生成发光灯带全部发光单元相对应的全部发光控制数据的系统开销，由于显示控制窗口所占平面区域基本相近，所以，当据此播放目标灯效时，发光灯带弯曲绕折而在不同区域所造成的发光单元密度差异可以被有效均衡，可以有效避免播放出的灯效相对于期望效果产生不必要的畸变，灯效呈现更为准确，能提升用户产品体验，使此类氛围灯设备更易推广普及。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请示例性的氛围灯设备的电气结构示意图，其中，氛围灯设备的发光灯带被塑造为花朵状以表示其可按任意形状塑型；图2示例出图1中的发光灯带利用区域容差窗口进行划分的逻辑分割关系；图3为本申请实施例中的灯效投影播放方法的流程示意图；图4为本申请实施例中以区域容差窗口滑动确定显示控制窗口的流程示意图；图5本申请实施例中确定区域容差窗口的尺寸规格的流程示意图；图6为本申请实施例中按照圆环设定区域容差窗口，根据区域容差窗口确定显示控制窗口的流程示意图；图7为本申请实施例中构造显示控制窗口相对应的发光控制数据的流程示意图；图8为本申请实施例中的灯效投影播放装置的结构示意图；图9为本申请实施例中的计算机设备的结构示意图。具体实施方式请参阅图1，本申请一种实施例提供的一种氛围灯设备的结构示意图中可以看出，所述氛围灯设备包括控制器1和灯体2，灯体2与控制器1电性连接，以便接受控制器1中运行的计算机程序的控制协同工作，实现灯效播放。控制器1通常包括控制芯片、通信组件以及总线接头，在一些实施例中，控制器1还可以按需配置电源适配器、控制面板、显示屏等。电源适配器主要用于将市电转换为直流电，以便为整个氛围灯设备供电。控制芯片可采用各种嵌入式芯片实现，例如蓝牙SoC、WiFi SoC、MCU 、DSP等各种类型的芯片，控制芯片通常包括中央处理器和存储器，存储器和中央处理器分别用于存储和执行程序指令，以实现相应的功能。以上各种类型的控制芯片，可以自带通信组件，也可按需额外配置通信组件。通信组件可以用于与外部设备通信，例如，可以与个人计算机或各种智能手机之类的终端设备通信，以便用户通过其终端设备下达各种配置指令之后，控制器1的控制芯片可以通过通信组件接收配置指令，完成基础配置，以便控制灯体工作。总线接头主要用于为接入总线的灯体2接入电源并提供灯效播放指令，因而对应提供电源总线和信号总线相对应的针脚，由此，当灯体2需要接入控制器1时，通过灯体2相应的接头与所述总线接头连接即可。控制面板通常提供一个或多个按键，用于对控制器1实施开关控制、选择各种预设的灯效控制方式等等。显示屏可用于显示各种控制信息，以便与所述控制面板中的按键相配合，支持人机交互功能的实现。一些实施例中，控制面板与所述显示屏可以集成到同一触控显示屏中。氛围灯设备中的灯体2，采用发光灯带实施，可以包含一条或多条发光灯带，由于发光灯带具有柔韧性，因而可以塑造成任意形状的布局。每条发光灯带21都包括多个串接而成的灯珠210，每个灯珠210作为一个发光单元，并且，每条发光灯带21内的灯珠210数量可以相同，且等间距排列。同一发光灯带21中的各个灯珠210由接入总线的同一组线缆传输工作电流，同一发光灯带21的各个灯珠210之间，在电性连接关系上，可以采用并联的方式进行连接。氛围灯设备中的控制器1可以从外部的终端设备接收氛围灯设备中的发光灯带中各个发光单元的位置分布信息，以便根据位置分布信息生成灯带投影图，以作为播放目标灯效的图案数据。当氛围灯设备要播放目标灯效时，先调用目标灯效的灯效描述数据，其控制器1需根据其灯体2相对应的图案数据确定出发光灯带上的多个显示控制窗口，以便将相应的灯效描述数据解析成各个显示控制窗口相对应的发光控制数据，该发光控制数据直接作为该显示控制窗口中各个发光单元的发光控制数据使用，也即相同显示控制窗口中的全部发光单元使用统一的发光控制数据，然后，以显示控制窗口为批量控制单位，发送相应的发光控制数据，由发光灯带中相应的各个发光单元的控制芯片，根据该发光控制数据控制其中的各个发光元件发出相应的色光，在各个发光单元发出色光的协同作用下，实现整个目标灯效的播放。根据以上氛围灯设备的产品架构和工作原理，本申请的氛围灯设备的灯效投影播放方法，可以实现为计算机程序产品，运行于氛围灯设备的控制器中。据此，请参阅图2，在部分实施例中，本申请的灯效投影播放方法，包括：步骤S1100、获取发光灯带中发光单元相对应的位置信息流，所述位置信息流包含所述发光灯带中各个发光单元相对应的位置分布信息；本申请可以借助移动终端之类的终端设备，对氛围灯设备中的发光灯带进行拍照得到发光灯带图像，根据灯带图像构造表示灯带图像中的发光灯带的造型路径和所述造型路径中各个灯位的灯带模型，显示至界面画布中；响应灯位标定指令，确定该指令所指定的灯位为有效灯位；响应布局生成指令，将灯带模型中参考该界面画布确定的各个有效灯位的位置坐标按照各个有效灯效沿发光灯带的顺序进行组织构成位置分布信息。不难理解，一个有效灯位对应氛围灯设备的发光灯带中的一个发光单元。据此，可以快速地生成发光灯带的位置分布信息，由终端设备以位置信息流的方式将其发送给本申请的控制器，数据量少，传输快速。更具体的实施例中，移动终端可以先向氛围灯设备中的发光灯带发送亮灯指令以控制氛围灯设备中的发光灯带点亮呈现预设的发光特征，该亮灯指令包含所述发光特征相对应的发光特征信息；然后基于发光灯带点亮状态下拍摄的灯带图像确定发光灯带的造型区域以定义该发光灯带的造型路径，提取造型区域内的灯带本体图像；进而识别灯带本体图像中由发光特征携带的亮灯显著特征，确定每个亮灯显著特征所在的位置作为相应的灯位；最后将所述造型路径及所述各个灯位构造为灯带模型显示于界面画布中。可见，在发光特征的帮助下，终端设备可以更为精准地识别发光灯带中的各个发光单元相对应的灯位。通过终端设备获得的位置分布信息中，仅包含沿发光灯带中分布的各个发光单元的位置坐标，通过各个位置坐标的先后顺序表示出各个发光单元沿发光灯带的分布顺序，由此形成一个数据流，也即位置信息流。终端设备将这个位置信息流传输给控制器，而不是将界面画布所表现的全图传输给控制器，具有更为高效的传输效果。本申请的控制器接收到终端设备发送过重为的位置信息流后，可对其进行相应的解析，由此得到位置信息流中的位置分布信息，也即氛围灯设备的发光灯带中的各个发光单元的位置坐标，与此同时，由于位置分布信息中已经按照各个发光单元沿着发光灯带的顺序进行排序各个发光单元的位置坐标，所以，也能得到各个发光单元相对应的顺序信息。步骤S1200、根据各个发光单元的所述位置分布信息，在预设的坐标系中展开得到灯带投影图，以在所述灯带投影图中重构所述发光灯带及其中的各个发光单元的图案数据；为了在控制器中再现发光灯带在平面空间中的形状，控制器预先设置一个坐标系，该坐标系对应终端设备的界面画布定义为二维直角坐标系，据此，根据各个单元的位置分布信息，具体是根据各个发光单元在位置分布信息中的位置坐标，在控制器的内存中将其标定到该坐标系中成为相应的灯位，便可在内存中得到一个基于图案数据进行描述的灯带投影图，由于各个发光单元的位置分布信息中也携带有各个发光单元的顺序信息，所以，以各个发光单元的顺序信息标注灯带投影图相应的各个灯位，便得到更为完整的图案数据，后续可根据图案数据实现对灯带投影图的调用。将各个发光单元的位置分布信息展开为灯带投影图，可以再现发光灯带中的各个灯位的相对位置关系，再现实体空间中的发光灯带的平面布局，从而实现对发光灯带的具体形状的精准识别，在此基础上进行灯效的映射，更为准确，可确保所播放呈现的灯效与预期效果相吻合。步骤S1300、采用区域容差窗口将所述灯带投影图中的发光灯带划分出多个发光单元集，相应构成多个显示控制窗口；虽然发光灯带通常是按照等间距排列各个发光单元的，但实际使用中发光灯带的形状常存在弯曲绕折的情形，较为笔直的部位中的发光灯带在投影面上看来较为稀疏，而绕折较多的部位的发光单元一般较为密集，为了使得对发光灯带的控制在投影面上更具有规则均匀的控制效果，如图3所示例，本申请应用区域容差窗口88来划分设定发光灯带中的各个发光单元，将每个区域容差窗口所包含的多个发光单元作为一个发光单元集，对应到一个相应的显示控制窗口，后续方便以显示控制窗口为批量控制单位，对相同显示控制窗口中的全部发光单元采用统一的发光控制数据进行控制。如图3所示例，本申请中的区域容差窗口88，其表现在灯带投影图相对应的投影面上，一般具有基本相同的面积，或者具有等比例的面积关系，视具体情况而定即可。区域容差窗口所覆盖的多个发光单元，构成一个在灯带投影图中位置相应的显示控制窗口的发光单元集，相同尺寸的区域容差窗口当其出现在灯带投影图中的不同位置时，所覆盖的发光单元数量可以各不相同，相应的，不同的显示控制窗口中的发光单元数量也可以不同，而一个发光单元则仅属于一个显示控制窗口。通常，显示控制窗口与其发光单元集之间通常构建为映射关系数据以便调用。当根据区域容差窗口确定相应的显示控制窗口之后，可以建立显示控制窗口与其相对应的发光单元集中的各个发光单元之间的映射关系，后续可以显示控制窗口为单位，对其中的各个发光单元进行批量生成发光控制数据，以提升发光控制数据生成速度。不难理解，通过在内存中标定发光单元与显示控制窗口之间的映射关系，也就建立了灯带投影图中的各个发光单元与其所属的显示控制窗口之间的映射关系，所以，当需要基于灯带投影图生成各个显示控制窗口中的发光单元的发光控制数据时，便可参照这些映射关系进行相应的数据调用。步骤S1400、以每个显示控制窗口为批量控制单位，生成目标灯效对应每个显示控制窗口的发光单元集的发光控制数据，根据所述发光控制数据控制所述发光灯带播放所述目标灯效。需要在氛围灯设备的发光灯带中播放的目标灯效，可以由终端设备提供，也可以从控制器的内存中调用，或者由控制器从云端服务器下载。目标灯效以灯效描述数据的形式进行描述，灯效描述数据可以表现为图像帧或消息体等任意形式，以便实现对目标灯效的灯效运动流程的定义。根据目标灯效的灯效描述数据所定义的灯效运动流程，可以将该灯效运动流程解析为各个播放帧相对应的发光控制数据。具体而言，每个播放帧的对应发光灯带中的各个显示控制窗口，根据预设的映射关系数据确定该显示控制窗口的发光单元集中的各个发光单元，对这些发光单元统一设定发光控制数据，实际上便得以生成发光单元集中各个发光单元相对应的发光控制数据。对于每个显示控制窗口而言，由于该显示控制窗口对应一个发光单元集，其中每个发光单元都统一使用该发光控制数据作为自身相对应的发光控制数据，这样，不必针对每个发光单元都生成个别的控制数据，可以提升生成播放帧相对应的各个发光单元的控制数据的效率。控制器生成播放帧相对应的各个显示控制窗口的发光控制数据后，可按照一定的规则发送这些发光控制数据给发光灯带。例如，可以按照各个发光控制数据相对应的播放时隙，在各个相应播放时隙发送相应显示控制窗口的发光控制数据；也可以将整个播放帧相对应的全部发光控制数据编码打包发送给发光灯带。在封装发光控制数据的数据包中，发光控制数据通常对应发光灯带中的各个发光单元所处的顺序信息进行排列设定，由此，发光灯带中的各个发光单元便可以从数据包中提取出与自身顺序位置相对应的发光控制数据，根据该发光控制数据控制其中的发光元件发射相应的光线。发光灯带中的发光单元都按照相同的原理工作，由此便可实现对同一播放帧的协同播放。同一播放帧中以不同时隙控制不同显示控制窗口播放其相应的灯效，和/或多个播放帧先后播放等，还可进一步呈现更为复杂的动画效果。具体的动画效果，视目标灯效中对灯效运动流程的定义而呈现。根据以上实施例可以知晓，本申请适应发光灯带具有柔韧性可造型的特点，在氛围灯设备的控制器中获取发光灯带的各个发光单元相对应的位置信息流，根据位置信息流所表示的发光单元的位置分布信息在预设坐标系中展开获得灯带投影图，再基于灯带投影图的图案数据，应用预设的区域容差窗口，将发光灯带的全部发光单元划分为多个显示控制窗口，使每个显示控制窗口在灯带投影图中所占的平面区域基本相近，再以显示控制窗口为批量控制单位，生成目标灯效对应每个显示控制窗口的发光控制数据，使每个显示控制窗口中的全部发光单元均统一应用该发光控制数据对其中的各个发光单元进行灯效播放控制，有效降低控制器生成发光灯带全部发光单元相对应的全部发光控制数据的系统开销，由于显示控制窗口所占平面区域基本相近，所以，当据此播放目标灯效时，发光灯带弯曲绕折而在不同区域所造成的发光单元密度差异可以被有效均衡，可以有效避免播放出的灯效相对于期望效果产生不必要的畸变，灯效呈现更为准确，能提升用户产品体验，使此类氛围灯设备更易推广普及。在本申请的方法任意实施例的基础上，请参阅图4，采用区域容差窗口将所述灯带投影图中的发光灯带划分出多个发光单元集，相应构成多个显示控制窗口，包括：步骤S2100、获取区域容差窗口的尺寸规格，以所述灯带投影图中的发光灯带的一端为起始端，沿该发光灯带往另一端滑动移动该区域容差窗口；本实施例中，区域容差窗口的尺寸规格可以先行预设，可以基于预设的坐标系，而将区域容差窗口设置为一个矩形窗口，以窗口坐标加以表示即可。区域容差窗口的面积可以按需设定。由于灯带投影图内发光灯带的图案数据中，已经标注了各个发光单元相对应的顺序信息，所以可以确定出其中的电源接入端，通常是排列在位置分布信息中的首个发光单元所在的一端，然后，以电源接入端为起始端，开始套用区域容差窗口，沿发光灯带进行移动，以进行发光单元的搜索。步骤S2200、在所述区域容差窗口移动过程中，确定落入该区域容差窗口且未被纳入其他显示控制窗口的发光单元，且达到所述区域容差窗口所能覆盖的最大数量时，视为检测到显示控制窗口；由于灯带投影图中已经标定了各个发光单元所处的位置坐标，可以根据这些位置坐标，确定顺序上相邻的每两个发光单元的连线，然后在区域容差窗口移动过程中，将区域容差窗口前进顺序上先接触到的发光单元处，使该发光单元进入该区域容差窗口而实现初步定位，再顺序判断连线方向上的其他后续发光单元的位置坐标是否进入该区域容差窗口的覆盖范围之内，当进入时，相应的发光单元便被视为纳入当前区域容差窗口所处位置相对应的显示控制窗口。由于连线的走向常有弯曲，在一些实施例中，还可以在初步定位的基础上，沿与连线前进方向垂直的方向移动区域容差窗口，不断搜寻区域容差窗口所覆盖的发光单元，将搜寻到发光单元数量最多的位置，固定为显示控制窗口所处的位置，将此时区域容差窗口所覆盖的范围，作为该显示控制窗口相对应的范围。由此可见，利用区域容差窗口沿着灯带投影图中的连线方向进行发光单元的搜寻，可以得到固定面积范围内的尽可能多的发光单元，将获得最多发光单元时区域容差窗口所处的位置作为显示控制窗口所处位置，将区域容差窗口的面积作为显示控制窗口的面积，由此便确定了显示控制窗口，以及其所纳入的全部发光单元。步骤S2300、当检测到显示控制窗口时，建立显示控制窗口与其相对应的发光单元所构成的发光单元集之间的映射关系数据；前一步骤中确定了显示控制窗口在预设的坐标系中的窗口位置，同时也确定了其相应的发光单元集，据此，可以将显示控制窗口与其发光单元集中的各个发光单元的对应关系构造为映射关系数据，这一映射关系数据既可以通过对灯带投影图中的图案数据中各个发光单元进行标注来体现，也可以另行在内存中构造相应的内存数据而体现，后续进行相应的调用即可。步骤S2400、当完成一个显示控制窗口的映射关系数据的构建后，继续滑动所述区域容差窗口进行以上的迭代，直至最后一个发光单元被纳入相应的显示控制窗口。在利用区域容差窗口进行移动检测的过程中，当确定出一个显示控制窗口之后，已经被纳入该显示控制窗口的发光单元便不再参与后续的检测。据此，可以直接定位进入该显示控制窗口之外的发光单元继续进行下一显示控制窗口的检测，然后循环以上的过程，具体是从步骤S2200继续循环迭代，由此不断确定新的显示控制窗口，直至发光灯带中最后一个发光单元被纳入相应的显示控制窗口为止，即完成对发光灯带的全部显示控制窗口的检测。根据以上实施例可见，本实施例能够充分适应发光灯带在造型后弯曲绕折的特点，对发光灯带中的发光单元的控制粒度进行重构，得到多个显示控制窗口，使每个显示控制窗口在投影面上基本相一致，同时却可能容纳不同数量的发光单元，由此，当以显示控制窗口为批量控制单位进行发光控制数据的生成和灯效播放控制时，在发光灯带的投影面上所呈现的控制粒度是相对均匀的，发光灯带弯曲绕折所造成的平面上的面积差异会被大致均衡，可使灯效的播放更符合预期，确保灯效的呈现效果。在本申请的方法任意实施例的基础上，请参阅图5，获取区域容差窗口的尺寸规格，包括：步骤S2110、统计所述灯带投影图中的发光单元总量，按照分区数对所述发光单元总量求均值，作为平均发光单元数量；本实施例中，可先对灯带投影图中的发光单元数量进行统计，得到发光单元总量。此外，可以预设一个分区数，表示对发光灯带划分显示控制窗口的数量，以便根据这个分区数来调控播放灯效时的控制粒度。分区数可以由控制器通过图形用户界面开放给用户根据实际需要而设定。在此基础上，将发光单元总量除以分区数，便可得到平均发光单元数量，即平均每个显示控制窗口所能分配得到的发光单元数量。需要指出的是，此处的分区数并不是最终得到的显示控制窗口的总数，因为发光灯带弯曲绕折后，同一显示控制窗口所包含的发光单元数量可能大于或小于平均发光单元数量，所以最终得到的显示控制窗口的总量可以不等于预设的分区数。步骤S2120、根据所述平均发光单元数量，对所述灯带投影图中的全部发光单元进行分区，确定每个分区相对应的覆盖窗口；确定了平均发光单元数据后，根据灯带投影图的图案数据中定义的各个发光单元的位置坐标和顺序信息，对发光灯带中的全部发光单元进行分区，得到多个分区，每个分区优先包含与平均发光单元数量相一致的多个发光单元，其中若有冗余不足平均发光单元数量的多发光单元，可将最后冗余的全部发光单元定义同单一分区。确定出每个分区后，以每个分区中首尾两端的发光单元的位置坐标之间的连接作为对角线，确定出相应分区的窗口坐标，完成对每个分区的定义，也就确定了每个分区相对应的覆盖窗口。步骤S2130、根据各个分区的覆盖窗口的横向尺寸和纵向尺寸分别求取平均横向尺寸和平均纵向尺寸；不难理解，根据每个分区的窗口坐标，通常是其所覆盖的首尾两个发光单元的位置坐标，通过这两个位置坐标便可以确定出相应分区的横向尺寸和纵向尺寸，每个分区均可得到其横向尺寸和纵向尺寸。进一步，对全部分区的横向尺寸求取均值可得到平均横向尺寸，对全部分区的纵向尺寸求取均值可得到平均纵向尺寸。步骤S2140、将所述平均横向尺寸和所述平均纵向尺寸设定为区域容差窗口的尺寸规格。确定出平均横向尺寸和平均纵向尺寸后，便可将其两者定义为区域容差窗口相对应的尺寸规格。在一些实施例中，根据实际需要，还可以在该平均横向尺寸和平均纵向尺寸的基础上叠加预设的容差尺寸，以适当扩大区域容差窗口的面积。根据以上实施例可以知晓，本申请向氛围灯设备的使用者进一步开放了调节控制粒度的手段，用户可以通过预设分区数来缩放显示控制窗口的大小，从而实现调节灯效呈现的控制粒度，可以提升氛围灯设备的操控便利度而提升产品用户体验，据此实现的控制机理，方便用户适配发光灯带呈线性的特点，进行流线型的灯效的定义和呈现。在本申请的方法任意实施例的基础上，请参阅图6，采用区域容差窗口将所述灯带投影图中的发光灯带划分出多个发光单元集，相应构成多个显示控制窗口，包括：步骤S3100、获取所述坐标系的坐标参考点和预设的增量尺寸,基于所述灯带投影图搜寻距离所述坐标参考点最近的发光单元，将以坐标参考点为圆心，以该坐标参考点到该发光单元的距离为半径的区域作为空置区域；如前文所揭示，本申请的控制器中预设有灯带投影图相对应的坐标系，据此可以确定该坐标系的坐标参考点，此外，为方便本实施例实施以圆环为控制粒度的控制，控制器还可获取一个增量尺寸，增量尺寸均可以是事先设定的，同理可以通过控制器提供图形用户界面开放给用户进行设定。坐标参考点可以默认采用坐标原点，或者事先由用户在坐标系中设定。灯带投影图中的每个发光单元，均可以根据其位置坐标，计算出其到达坐标参考点的距离，由此，可以比较各个发光单元到达坐标参考点的距离，将其中最小距离确定为空置区域的半径，以坐标参考点为圆心，以该最小距离为半径画圆所得到的区域即可空置区域。空置区域被理解为不存在任何发光单元的区域，即使是该最小距离相对应的发光单元，也将在后续被纳入相应的区域容差窗口。步骤S3200、在所述半径的基础上叠加所述增量尺寸作为新的半径，确定前后两个半径之间的圆环区域，将该圆环区域作为区域容差窗口；得到前一个圆相对应的半径之后，将该半径作为旧半径，叠加预设的增量尺寸，便得到一个新半径，然后，仍以坐标参考点为圆心，以新半径作圆，与前一圆相减，得到一个圆环区域，该圆环区域即为区域容差窗口。步骤S3300、当所述区域容差窗口存在发光单元时，将该区域容差窗口作为显示控制窗口，将区域容差窗口中的全部发光单元作为该显示控制窗口相对应的发光单元集，建立该显示控制窗口与该发光单元集之间的映射关系数据，迭代前一步骤直至相应的区域容差窗口不再包含发光单元。当区域容差窗口中覆盖有发光单元，即发光单元数量不为0时，该区域容差窗口便可以构成一个显示控制窗口，相应的，进入该显示控制窗口的各个发光单元，也就构成该显示控制窗口相对应的发光单元集，由此可以如前文所揭示，建立该显示控制窗口与其发光单元集之间的映射关系数据以便后续调用。当完成一个显示控制窗口的映射关系数据的构造之后，便可以将当前相对应的半径作为旧半径回到步骤S3200继续迭代，由此不断循环迭代，直到相应的区域容差窗口中所包含的发光单元数量为0为止。根据以上实施例可以看出，本申请可以改变控制粒度的定义形态，以圆环区域的方式来确定显示控制窗口，并且开放给用户对圆环区域的粗细进行调节，由此，方便用户基于发光灯带定义出放射型的灯效，进行有效的呈现。在本申请的方法任意实施例的基础上，请参阅图7，以每个显示控制窗口为批量控制单位，生成目标灯效对应每个显示控制窗口的发光单元集的发光控制数据，包括：步骤S4100、调用目标灯效的灯效描述数据，所述灯效描述数据包括运动信息和灯效颜色数据；如前文所揭示，待播放的目标灯效，其以灯效描述数据的方式进行表示，据此，可以对目标灯效的灯效描述数据进行调用和解析，得到其中的运动信息和灯效颜色数据。示例而言，灯效描述数据中的运动信息可以定义出流线型的运动方式，表示沿着发光灯带的方向，流动显示各个显示控制窗口中的灯光效果；灯效描述数据中的灯效颜色数据，同理用于实现对各个显示控制窗口需要发光展现的色彩的定义，例如定义为随机颜色。步骤S4200、根据所述运动信息确定各个所述显示控制窗口的播放时隙；以运动信息限定为流线型运动方式为例，运动信息中可以包含目标灯效完成展现的全部时长，例如2秒，而发光灯带中的显示控制窗口的数量是已经确定的，所以，将全部时长除以显示控制窗口的数量，便可得到每个显示控制窗口相对应的播放时长，据此也就可以确定各个显示控制窗口相对应的播放时隙。步骤S4300、根据所述灯效颜色数据确定每个所述显示控制窗口的颜色数据；而根据灯效颜色数据，以灯效描述数据中定义各个显示控制窗口的颜色数值为随机颜色为例，对于每个显示控制窗口，便可随机生成一个颜色值作为其相应的颜色数据。步骤S4400、根据每个显示控制窗口的播放时隙和颜色数据，设定该显示控制窗口相对应的发光控制数据，作为该显示控制窗口的发光单元集中每个发光单元的发光控制数据。在确定了每个显示控制窗口相对应的播放时隙和颜色数据后，控制器便可适应其与发光单元的控制芯片之间的协议，封装出每个显示控制窗口相对应的发光控制数据，使该发光控制数据包含相应的颜色数据并关联相应的播放时隙。需要指出的是，由于显示控制窗口相对应的发光控制数据，也是该显示控制窗口中的各个发光单元相对应的发光控制数据，因而，可以直接根据显示控制窗口的发光控制数据直接给其对应的各个发光单元的发光控制数据进行赋值。根据以上实施例可以看出，由于显示控制窗口中的全部发光单元都采用相同的发光控制数据，因而，不必个别地构造发光控制数据，可以有效降低控制器生成发光控制数据相对应的运算量，减小控制器的系统开销，提升控制器运行时的鲁棒性。在本申请的方法任意实施例的基础上，根据所述发光控制数据控制所述发光灯带播放所述目标灯效，包括：步骤S5100、在每个显示控制窗口相对应的播放时隙，将该显示控制窗口相对应的发光控制数据作为该显示控制窗口相对应的各个发光单元的发光控制数据，传输至所述发光灯带；如前文所揭示，每个显示窗口的发光控制数据中包含有相应的颜色数据并关联相应的播放时隙，据此，可以在每个显示控制窗口相对应的播放时隙，将该显示控制窗口相对应的发光控制数据赋值给该显示控制窗口相对应的各个发光单元的发光控制数据，将这些发光控制数据按照预定的协议格式封装成数据包，发送给发光灯带。步骤S5200、由所述发光灯带中与该显示控制窗口相对应的各个发光单元根据所述发光控制数据播放相应的灯效。发光灯带中的每个发光单元接收到该数据包之后，按照预设协议，提取出对应自身的发光控制数据，然后根据发光控制数据中的颜色数据，控制自身的发光元件发射出相应颜色的光线。由于同一显示控制窗口采用相同的发光控制数据，所以，整个显示控制窗口中的全部发光单元会发出相同的颜色光效。不难理解，当各个显示控制窗口都陆续受控发射出相应的光线，整个目标灯效便得以播放呈现。根据以上实施例可以知晓，以显示控制窗口为批量控制单位，对显示控制窗口中的全部发光单元进行统一控制，实际上是重定义了对发光灯带的控制粒度，由于显示控制窗口在面积上基本相近，所以，在氛围灯设备的发光灯带的投影面上进行发光控制所得的效果必然较为均匀和谐，所呈现的灯效更能营造预期的沉浸感。请参阅图8，本申请的另一实施例还提供一种灯效投影播放装置，其包括位置获取模块5100、投影展开模块5200、窗口划分模块5300，以及窗口控制模块5400，其中，所述位置获取模块5100，设置为获取发光灯带中发光单元相对应的位置信息流，所述位置信息流包含所述发光灯带中各个发光单元相对应的位置分布信息；所述投影展开模块5200，设置为根据各个发光单元的所述位置分布信息，在预设的坐标系中展开得到灯带投影图，以在所述灯带投影图中重构所述发光灯带及其中的各个发光单元的图案数据；所述窗口划分模块5300，设置为采用区域容差窗口将所述灯带投影图中的发光灯带划分出多个发光单元集，相应构成多个显示控制窗口；所述窗口控制模块5400，设置为以每个显示控制窗口为批量控制单位，生成目标灯效对应每个显示控制窗口的发光单元集的发光控制数据，根据所述发光控制数据控制所述发光灯带播放所述目标灯效。在本申请的装置任意实施例的基础上，所述窗口划分模块5300，包括：窗口获取模块，设置为获取区域容差窗口的尺寸规格，以所述灯带投影图中的发光灯带的一端为起始端，沿该发光灯带往另一端滑动移动该区域容差窗口；窗口检测模块，设置为在所述区域容差窗口移动过程中，确定落入该区域容差窗口且未被纳入其他显示控制窗口的发光单元，且达到所述区域容差窗口所能覆盖的最大数量时，视为检测到显示控制窗口；窗口确定模块，设置为当检测到显示控制窗口时，建立显示控制窗口与其相对应的发光单元所构成的发光单元集之间的映射关系数据；迭代控制模块，设置为当完成一个显示控制窗口的映射关系数据的构建后，继续滑动所述区域容差窗口进行以上的迭代，直至最后一个发光单元被纳入相应的显示控制窗口。在本申请的装置任意实施例的基础上，所述窗口获取模块，包括：均值统计模块，设置为统计所述灯带投影图中的发光单元总量，按照分区数对所述发光单元总量求均值，作为平均发光单元数量；初步分区模块，设置为根据所述平均发光单元数量，对所述灯带投影图中的全部发光单元进行分区，确定每个分区相对应的覆盖窗口；尺寸统计模块，设置为根据各个分区的覆盖窗口的横向尺寸和纵向尺寸分别求取平均横向尺寸和平均纵向尺寸；尺寸设定模块，将所述平均横向尺寸和所述平均纵向尺寸设定为区域容差窗口的尺寸规格。在本申请的装置任意实施例的基础上，所述窗口划分模块5300，包括：配置处理模块，设置为获取所述坐标系的坐标参考点和预设的增量尺寸,基于所述灯带投影图搜寻距离所述坐标参考点最近的发光单元，将以坐标参考点为圆心，以该坐标参考点到该发光单元的距离为半径的区域作为空置区域；圆环查寻模块，设置为在所述半径的基础上叠加所述增量尺寸作为新的半径，确定前后两个半径之间的圆环区域，将该圆环区域作为区域容差窗口；关系设定模块，设置为当所述区域容差窗口存在发光单元时，将该区域容差窗口作为显示控制窗口，将区域容差窗口中的全部发光单元作为该显示控制窗口相对应的发光单元集，建立该显示控制窗口与该发光单元集之间的映射关系数据，迭代前一步骤直至相应的区域容差窗口不再包含发光单元。在本申请的装置任意实施例的基础上，所述窗口控制模块5400，包括：灯效调用模块，设置为调用目标灯效的灯效描述数据，所述灯效描述数据包括运动信息和灯效颜色数据；时隙确定模块，设置为根据所述运动信息确定各个所述显示控制窗口的播放时隙；颜色确定模块，设置为根据所述灯效颜色数据确定每个所述显示控制窗口的颜色数据；数据构造模块，设置为根据每个显示控制窗口的播放时隙和颜色数据，设定该显示控制窗口相对应的发光控制数据，作为该显示控制窗口的发光单元集中每个发光单元的发光控制数据。在本申请的装置任意实施例的基础上，所述窗口控制模块5400，包括：数据传输模块，设置为在每个显示控制窗口相对应的播放时隙，将该显示控制窗口相对应的发光控制数据作为该显示控制窗口相对应的各个发光单元的发光控制数据，传输至所述发光灯带；播放执行模块，设置为由所述发光灯带中与该显示控制窗口相对应的各个发光单元根据所述发光控制数据播放相应的灯效。在本申请任意实施例的基础上，请参阅图9，本申请的另一实施例还提供一种计算机设备，该计算机设备可以充当氛围灯设备中的控制器使用，如图9所示，计算机设备的内部结构示意图。该计算机设备包括通过系统总线连接的处理器、计算机可读存储介质、存储器和网络接口。其中，该计算机设备的计算机可读存储介质存储有操作系统、数据库和封装计算机可读指令的计算机程序，数据库中可存储有控件信息序列，该计算机可读指令被处理器执行时，可使得处理器实现一种灯效投影播放方法。该计算机设备的处理器用于提供计算和控制能力，支撑整个计算机设备的运行。该计算机设备的存储器中可存储有计算机可读指令，该计算机可读指令被处理器执行时，可使得处理器执行本申请的灯效投影播放方法。该计算机设备的网络接口用于与终端连接通信。本领域技术人员可以理解，图9中示出的结构，仅仅是与本申请方案相关的部分结构的框图，并不构成对本申请方案所应用于其上的计算机设备的限定，具体的计算机设备可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。本实施方式中处理器用于执行图8中的各个模块及其子模块的具体功能，存储器存储有执行上述模块或子模块所需的程序代码和各类数据。网络接口用于向用户终端或服务器之间的数据传输。本实施方式中的存储器存储有本申请的灯效投影播放装置中执行所有模块/子模块所需的程序代码及数据，服务器能够调用服务器的程序代码及数据执行所有子模块的功能。本申请还提供一种存储有非易失性计算机可读存储介质，计算机可读指令被一个或多个处理器执行时，使得一个或多个处理器执行本申请任一实施例所述灯效投影播放方法的步骤。本申请还提供一种计算机程序产品，包括计算机程序/指令，该计算机程序/指令被一个或多个处理器执行时实现本申请任一实施例所述灯效投影播放方法的步骤。本领域普通技术人员可以理解实现本申请上述实施例方法中的全部或部分流程，是可以通过计算机程序来指令相关的硬件来完成，该计算机程序可存储于一计算机可读取存储介质中，该程序在执行时，可包括如上述各方法的实施例的流程。其中，前述的存储介质可为磁碟、光盘、只读存储记忆体等计算机可读存储介质，或随机存储记忆体等。以上所述仅是本申请的部分实施方式，应当指出，对于本技术领域的普通技术人员来说，在不脱离本申请原理的前提下，还可以做出若干改进和润饰，这些改进和润饰也应视为本申请的保护范围。综上所述，本申请由于所确定的显示控制窗口所占平面区域基本相近，当据此播放目标灯效时，发光灯带弯曲绕折而在不同区域所造成的发光单元密度差异可以被有效均衡，可以有效避免播放出的灯效相对于期望效果产生不必要的畸变，灯效呈现更为准确，能提升用户产品体验，使此类氛围灯设备更易推广普及。
