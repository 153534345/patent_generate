标题title
安卓智能终端接入IPTV业务的方法、系统
摘要abst
本发明实施例公开了安卓智能终端接入IPTV业务的方法、系统；方法包括步骤：S1、安卓智能终端配置连接USB网卡设备；S2、安卓智能终端安装USB网卡应用，创建TUN虚拟网卡设备；S3、TUN虚拟网卡设备处理安卓智能终端发向IPTV业务平台的请求数据；S4、TUN虚拟网卡设备接收IPTV业务平台返回的数据并发送到USB网卡设备；S5、USB网卡设备将IPTV业务平台返回的数据传递到TUN虚拟网卡设备；S6、TUN虚拟网卡设备处理接收的数据，并传递到安卓智能终端；实现安卓智能终端接入IPTV业务。通过配置USB网卡设备和创建TUN虚拟网卡设备，实现了所有安卓智能终端接入IPTV业务，能够在安卓智能终端上直接观看方法和系统，具有良好应用前景。
权利要求书clms
1.安卓智能终端接入IPTV业务的方法，其特征在于，包括步骤：S1、安卓智能终端配置连接USB网卡设备，安装USB网卡应用；S2、安卓智能终端通过USB网卡应用创建TUN虚拟网卡设备；S3、TUN虚拟网卡设备处理安卓智能终端发向IPTV业务平台的请求数据；S4、TUN虚拟网卡设备接收IPTV业务平台返回的数据并发送到USB网卡设备；S5、USB网卡设备将IPTV业务平台返回的数据传递到TUN虚拟网卡设备；S6、TUN虚拟网卡设备处理接收的数据，并传递到安卓智能终端，实现安卓智能终端接入IPTV业务。2.根据权利要求1所述的安卓智能终端接入IPTV业务的方法，其特征在于，步骤S1具体包括：S11、将USB网卡连设备接到安卓智能终端上，安装USB网卡应用；S12、USB网卡设备启动，向IPTV网络管理平台发起IPOE拨号；S13、IPTV网络管理平台对安卓智能终端进行校验；S14、IPTV网络管理平台对安卓智能终端校验通过，向USB网卡设备回复可接入IPTV业务的IP网络信息；S15、USB网卡应用将IPTV网络管理平台返回的IP网络信息配置到USB网卡设备上。3.根据权利要求2所述的安卓智能终端接入IPTV业务的方法，其特征在于，步骤S12进一步包括，USB网卡应用创建USB网卡设备节点。4.根据权利要求3所述的安卓智能终端接入IPTV业务的方法，其特征在于，步骤S12中进一步包括，USB网卡应用创建ETH0网卡设备节点，同时向IPTV网络管理平台发起IPOE网络连接请求，通过DHCP协议与IPTV网络管理平台交互获取到能够接入IPTV环境的IP地址，并配置到ETH0网卡设备节点上。5.根据权利要求1所述的安卓智能终端接入IPTV业务的方法，其特征在于，步骤S2中，创建的TUN虚拟网卡设备是TCP/IP工作协议的三层设备。6.根据权利要求1所述的安卓智能终端接入IPTV业务的方法，其特征在于，步骤S2中创建TUN虚拟网卡设备的过程包括：S201、USB网卡应用安装到安卓智能终端后，安卓智能终端接收到开机广播后启动VpnService服务；S202、VpnService服务启动，创建TUN虚拟网卡设备。7.根据权利要求6所述的安卓智能终端接入IPTV业务的方法，其特征在于，创建TUN虚拟网卡设备的过程还包括：S203、USB网卡应用为创建的TUN虚拟网卡设备配置一个IP地址，该IP地址与USB网卡的IP地址为同一网段。8.根据权利要求7所述的安卓智能终端接入IPTV业务的方法，其特征在于，步骤S3中的请求数据为安卓智能终端请求进行IPTV业务认证的数据，该数据中包含有安卓智能终端的IPTV业务账号。9.根据权利要求3所述的安卓智能终端接入IPTV业务的方法，其特征在于，步骤S4中，进一步包括IPTV业务平台进行业务校验的步骤，具体包括：S41、USB网卡设备携带TUN虚拟网卡设备处理后的数据发送给IPTV业务平台；S42、IPTV业务平台对包含IPTV业务账号的请求数据信息进行校验；S43、IPTV业务平台校验通过，将IPTV业务首页返回给USB网卡设备。10.安卓智能终端接入IPTV业务的系统，其特征在于，包括：安卓智能终端；安卓智能终端上创建有TUN虚拟网卡设备；USB网卡设备，配置与安卓智能终端连接；网关设备，设置与USB网卡设备连接，用于将USB网卡设备与IPTV网络管理平台和IPTV业务平台连接。
说明书desc
技术领域本发明属于电视视频数据处理技术领域，具体涉及安卓智能终端接入IPTV业务的方法、系统。背景技术电信运营商的IPTV业务接入需要IPTV业务终端支持IPOE拨号，成功进行IPOE拨号后，IPTV业务终端就完成了可接入IPTV业务的网络配置，然后才能正常接入IPTV业务。当前接入电信运营商的IPTV业务都是通过各电信运营商的IPTV机顶盒实现的；各电信运营商采购各机顶盒终端厂商生产的基于Android系统的IPTV机顶盒终端，机顶盒终端厂商对标准的Android系统进行修改支持电信运营商的IPOE拨号规范。而普通的Android设备终端，如智能电视等，无法接入电信运营商的IPTV业务。发明内容有鉴于此，一些实施例公开的技术方案是安卓智能终端接入IPTV业务的方法，该方法包括步骤：S1、安卓智能终端配置连接USB网卡设备，安装USB网卡应用；S2、安卓智能终端通过USB网卡应用创建TUN虚拟网卡设备；S3、TUN虚拟网卡设备处理安卓智能终端发向IPTV业务平台的请求数据；S4、TUN虚拟网卡设备接收IPTV业务平台返回的数据并发送到USB网卡设备；S5、USB网卡设备将IPTV业务平台返回的数据传递到TUN虚拟网卡设备；S6、TUN虚拟网卡设备处理接收的数据，并传递到安卓智能终端，实现安卓智能终端接入IPTV业务。进一步，一些实施例公开的安卓智能终端接入IPTV业务的方法，步骤S1具体包括：S11、将USB网卡设备连接到安卓智能终端上，安装USB网卡应用；S12、USB网卡设备启动，向IPTV网络管理平台发起IPOE拨号；S13、IPTV网络管理平台对安卓智能终端进行校验；S14、IPTV网络管理平台对安卓智能终端校验通过，向USB网卡设备回复可接入IPTV业务的IP网络信息；S15、USB网卡将IPTV网络管理平台返回的IP网络信息配置到USB网卡设备上。一些实施例公开的安卓智能终端接入IPTV业务的方法，步骤S12进一步包括，USB网卡应用创建USB网卡设备节点。一些实施例公开的安卓智能终端接入IPTV业务的方法，步骤S12中进一步包括，USB网卡应用创建ETH0网卡设备节点，同时向IPTV网络管理平台发起IPOE网络连接请求，通过DHCP协议与IPTV网络管理平台交互获取到能够接入IPTV环境的IP地址，并配置到ETH0网卡设备节点上。一些实施例公开的安卓智能终端接入IPTV业务的方法，步骤S2中，在安卓智能终端上创建的TUN虚拟网卡设备是TCP/IP工作协议的三层设备。一些实施例公开的安卓智能终端接入IPTV业务的方法，步骤S2中创建TUN虚拟网卡设备的过程包括：S201、USB网卡设备应用安装到安卓智能终端后，安卓智能终端接收到开机广播后启动VpnService服务；S202、VpnService服务启动，创建TUN虚拟网卡设备。一些实施例公开的安卓智能终端接入IPTV业务的方法，步骤S2中创建TUN虚拟网卡设备的过程还包括：S203、USB网卡应用为创建的TUN虚拟网卡设备配置一个IP地址，该IP地址与USB网卡的IP地址为同一网段。一些实施例公开的安卓智能终端接入IPTV业务的方法，步骤S3中的请求数据为安卓智能终端请求进行IPTV业务认证的数据，该数据中包含有安卓智能终端的IPTV业务账号。一些实施例公开的安卓智能终端接入IPTV业务的方法，步骤S4中，进一步包括IPTV业务平台进行业务校验的步骤，具体包括：S41、USB网卡设备携带TUN虚拟网卡设备处理后的数据发送给IPTV业务平台；S42、IPTV业务平台对包含IPTV业务账号的请求数据信息进行校验；S43、IPTV业务平台校验通过，将IPTV业务首页返回给USB网卡设备。一些实施例公开的安卓智能终端接入IPTV业务的方法，步骤S2中，USB网卡应用在安卓智能终端上创建TUN虚拟网卡设备。一些实施例公开了安卓智能终端接入IPTV业务的系统，该系统包括：安卓智能终端；安卓智能终端上创建有TUN虚拟网卡设备；USB网卡设备，配置与安卓智能终端连接；网关设备，设置与USB网卡设备连接，用于将USB网卡设备与IPTV网络管理平台和IPTV业务平台连接。本发明实施例公开的安卓智能终端接入IPTV业务的方法和系统，通过配置USB网卡设备和在安卓智能终端中创建TUN虚拟网卡设备，实现了所有安卓智能终端以USB免驱的方式接入电信运营商的IPTV业务，在安卓智能终端上直接观看方法和系统可以很大程度降低IPTV业务推广维护成本，具有良好应用前景。附图说明图1一些实施例公开的安卓智能终端接入IPTV业务的方法流程图；图2 一些实施例公开的安卓智能终端连接USB网卡流程图；图3 一些实施例公开的IPTV业务平台进行业务校验的流程图；图4 一些实施例公开的安卓智能终端接入IPTV业务的系统组成示意图；图5 一些实施例公开的安卓智能终端接入IPTV业务的系统数据交互示意图。附图标记1安卓智能终端设备2TUN虚拟网卡设备3USB网卡设备4网关设备具体实施方式在这里专用的词“实施例”，作为“示例性”所说明的任何实施例不必解释为优于或好于其它实施例。本发明实施例中性能指标测试，除非特别说明，采用本领域常规试验方法。应理解，本发明实施例中所述的术语仅仅是为描述特别的实施方式，并非用于限制本发明实施例公开的内容。除非另有说明，否则本文使用的技术和科学术语具有本发明实施例所属技术领域的普通技术人员通常理解的相同含义；作为本发明实施例中其它未特别注明的试验方法和技术手段均指本领域内普通技术人员通常采用的实验方法和技术手段。本文所用的术语“基本”和“大约”用于描述小的波动。例如，它们可以是指小于或等于±5%，如小于或等于±2%，如小于或等于±1%，如小于或等于±0.5%，如小于或等于±0.2%，如小于或等于±0.1%，如小于或等于±0.05%。在本文中以范围格式表示或呈现的数值数据，仅为方便和简要起见使用，因此应灵活解释为不仅包括作为该范围的界限明确列举的数值，还包括该范围内包含的所有独立的数值或子范围。例如，“1～5%”的数值范围应被解释为不仅包括1%至5%的明确列举的值，还包括在所示范围内的独立值和子范围。因此，在这一数值范围中包括独立值，如2%、3.5%和4%，和子范围，如1%～3%、2%～4%和3%～5%等。这一原理同样适用于仅列举一个数值的范围。此外，无论该范围的宽度或所述特征如何，这样的解释都适用。在本文中，包括权利要求书中，连接词，如“包含”、“包括”、“带有”、“具有”、“含有”、“涉及”、“容纳”等被理解为是开放性的，即是指“包括但不限于”。只有连接词“由……构成”和“由……组成”是封闭连接词。为了更好的说明本发明内容，在下文的具体实施例中给出了众多的具体细节。本领域技术人员应当理解，没有某些具体细节，本发明同样可以实施。在实施例中，对于本领域技术人员熟知的一些方法、手段、仪器、设备等未作详细描述，以便凸显本发明的主旨。在不冲突的前提下，本发明实施例公开的技术特征可以任意组合，得到的技术方案属于本发明实施例公开的内容。一些实施例公开的技术方案是安卓智能终端接入IPTV业务的方法，如图1所示，该方法包括步骤：S1、安卓智能终端配置连接USB网卡设备，安装USB网卡应用；S2、安卓智能终端通过USB网卡应用创建TUN虚拟网卡设备；通常，USB网卡应用在安卓智能终端上创建TUN虚拟网卡设备；S3、TUN虚拟网卡设备处理安卓智能终端发向IPTV业务平台的请求数据；通常请求数据为安卓智能终端请求进行IPTV业务认证的数据，该数据中包含有安卓智能终端的IPTV业务账号；S4、TUN虚拟网卡设备接收IPTV业务平台返回的数据并发送到USB网卡设备；S5、USB网卡设备将IPTV业务平台返回的数据传递到TUN虚拟网卡设备；S6、TUN虚拟网卡设备处理接收的数据，并传递到安卓智能终端；实现安卓智能终端接入IPTV业务。一些实施例公开的安卓智能终端接入IPTV业务的方法，如图2所示，步骤S1具体包括：S11、将USB网卡设备连接到安卓智能终端上，安装USB网卡应用；USB网卡设备是工作在TCP/IP协议分层的两层设备；S12、USB网卡设备启动，向IPTV网络管理平台发起IPOE拨号；通常地，USB网卡设备启动后，在安卓智能终端设备上启动安装USB网卡应用，USB网卡应用创建USB网卡设备节点，TUN虚拟网卡设备节点通过USB协议与USB网卡设备节点进行数据交互；进一步，USB网卡应用创建ETH0网卡设备节点，同时向IPTV网络管理平台发起IPOE网络连接请求，通过DHCP协议与IPTV网络管理平台交互获取到能够接入IPTV环境的IP地址，并配置到ETH0网卡设备节点上；S13、IPTV网络管理平台对安卓智能终端进行校验；S14、IPTV网络管理平台对安卓智能终端校验通过，向USB网卡设备回复可接入IPTV业务的IP网络信息；S15、USB网卡应用将IPTV网络管理平台返回的IP网络信息配置到USB网卡设备上。通常地，USB网卡应用会启动一个数据后台处理USB服务；USB 服务进程负责TUN虚拟网卡设备数据与USB网卡设备数据的转发；USB服务进程将TUN虚拟网卡设备要发出去的数据先做以太网包头的填充并封装成NDIS数据包格式，通过USB协议发出；其中以太网包中的目的地址就是USB网卡设备的MAC地址，USB网卡设备的MAC地址由USB 服务进程通过ARP协议获取；USB服务进程通过USB协议读取USB网卡设备节点的数据，发现NDIS数据包报文后，解包分析，将IP负载数据写入到TUN虚拟网卡设备节点。通常地，USB网卡设备通过网线连接到家庭网关上；USB网卡设备检测到网线连通后，会创建ETH0网卡设备节点，同时向IPTV网络管理平台发起IPOE网络连接请求，通过DHCP协议与IPTV网络管理平台交互获取到可以接入IPTV环境的IP并配置到ETH0网卡设备节点上；USB网卡设备工作模式为路由模式，负责USB网卡设备节点与ETH0网卡设备节点间的数据路由转发。一些实施例公开的安卓智能终端接入IPTV业务的方法，步骤S2中，USB网卡应用在安卓智能终端上创建TUN虚拟网卡设备。一些实施例中，创建TUN虚拟网卡设备的过程包括：S201、USB网卡设备网卡应用安装到安卓智能终端；安卓智能终端接收到开机广播后启动VpnService服务；S202、VpnService服务启动，创建TUN虚拟网卡设备节点；S203、USB网卡应用为创建的TUN虚拟网卡设备节点配置一个IP地址，该IP地址与USB网卡的IP地址为同一网段。一些实施例公开的安卓智能终端接入IPTV业务的方法，如图3所示，步骤S4包括IPTV业务平台进行业务校验的步骤，具体包括：S41、USB网卡携带TUN虚拟网卡设备处理后的数据发送给IPTV业务平台；S42、IPTV业务平台对包含IPTV业务账号的请求数据信息进行校验；S43、IPTV业务平台校验通过，将IPTV业务首页返回给USB网卡。在一些实施方式中，如图4所示，安卓智能终端接入IPTV业务的系统包括：安卓智能终端设备1，安卓智能终端设备1上创建有TUN虚拟网卡设备2；USB网卡设备3，配置与安卓智能终端设备1连接；USB网卡设备是工作在TCP/IP协议分层的两层设备；网关设备4，设置与USB网卡设备3连接，网关设备4进一步配置为与IPTV网络管理平台和IPTV业务平台连接。通常地，USB网卡设备通过网线连接到网关设备4上。一些实施例中，如图5所示，安卓智能终端接入IPTV业务的系统中，数据交互过程包括：将USB网卡设备连接到安卓智能终端设备1上后安装USB网卡应用；安卓智能终端设备接收到开机广播后启动VpnService服务；VpnService服务启动，创建TUN虚拟网卡设备节点；USB网卡应用为创建的TUN虚拟网卡设备配置一个IP地址，该IP地址与USB网卡的IP地址为同一网段；USB网卡应用创建USB网卡设备节点，TUN虚拟网卡设备节点通过USB协议与USB网卡设备节点进行数据交互；进一步，USB网卡应用创建ETH0网卡设备节点，同时向IPTV网络管理平台发起IPOE网络连接请求，通过DHCP协议与IPTV网络管理平台交互获取到能够接入IPTV环境的IP地址，并配置到ETH0网卡设备节点上；USB网卡应用启动数据后台处理USB服务；USB 服务进程负责TUN虚拟网卡设备数据与USB网卡设备数据的转发；USB服务进程将TUN虚拟网卡设备要发出去的数据先做以太网包头的填充并封装成NDIS数据包格式，通过USB协议发出；其中以太网包中的目的地址就是USB网卡设备的MAC地址，USB网卡设备的MAC地址由USB 服务进程通过ARP协议获取；USB服务进程通过USB协议读取USB网卡设备节点的数据，发现NDIS数据包报文后，解包分析，将IP负载数据写入到TUN虚拟网卡设备节点。USB网卡设备检测到网线连通后，会创建ETH0网卡设备节点，同时向IPTV网络管理平台发起IPOE网络连接请求，通过DHCP协议与IPTV网络管理平台交互获取到可以接入IPTV环境的IP并配置到ETH0网卡设备节点上；USB网卡设备工作模式为路由模式，负责USB网卡设备节点与ETH0网卡设备节点间的数据路由转发。本发明实施例公开的安卓智能终端接入IPTV业务的方法和系统，通过配置USB网卡设备和在安卓智能终端中创建TUN虚拟网卡设备，实现了所有安卓智能终端以USB免驱的方式接入电信运营商的IPTV业务，在安卓智能终端上直接观看方法和系统可以很大程度降低IPTV业务推广维护成本，具有良好应用前景。本发明实施例公开的技术方案和实施例中公开的技术细节，仅是示例性说明本发明的发明构思，并不构成对本发明实施例技术方案的限定，凡是对本发明实施例公开的技术细节所做的常规改变、替换或组合等，都与本发明具有相同的发明构思，都在本发明权利要求的保护范围之内。
