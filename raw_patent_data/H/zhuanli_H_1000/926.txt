标题title
一种检测月亮的方法和电子设备
摘要abst
本申请实施例公开了一种检测月亮的方法和电子设备，涉及终端技术领域，终端包括传感器和摄像头，该方法包括：终端接收用户的第一操作，开启摄像头。通过传感器获取自身的位姿信息，获取月亮的天文信息，根据月亮的位置与终端的位置之间获取第一直线，根据终端的位姿信息获取第二直线，在第一直线和第二直线之间的夹角小于或等于预设的夹角阈值时，进入月亮模式进行拍摄。其中，第一直线和第二直线之间的夹角小于或等于预设的夹角阈值意味着摄像头与月亮处于对准状态，只有在确定摄像头处于对准月亮拍摄的状态，也即，确定终端当前的拍摄对象就是月亮的情况下，才进入月亮模式，能够准确识别拍摄月亮的场景，提高了进入月亮模式拍摄的准确性。
权利要求书clms
1.一种检测月亮的方法，其特征在于，应用于终端，所述终端包括传感器和摄像头；所述方法包括：接收用户的第一操作，所述第一操作用于开启所述摄像头；通过所述传感器获取所述终端的位姿信息；所述位姿信息包括所述终端的朝向和所述终端的位置；获取月亮的天文信息，所述天文信息包括月亮的位置；根据所述终端的位置和所述月亮的位置获取第一直线；根据所述终端的位姿信息获取第二直线；如果所述第一直线和所述第二直线之间的夹角小于或等于预设的夹角阈值，所述摄像头进入月亮模式进行拍摄。2.根据权利要求1所述的方法，其特征在于，所述摄像头进入月亮模式进行拍摄，包括：所述摄像头根据所述月亮模式对应的第一拍摄参数显示拍摄预览界面；所述第一拍摄参数包括白平衡、焦距、色彩平衡。3.根据权利要求1所述的方法，其特征在于，所述摄像头进入月亮模式进行拍摄，包括：接收到用户的第二操作，所述第二操作用于启动拍摄成像；所述摄像头根据所述月亮模式对应的第二拍摄参数成像；所述第二拍摄参数包括曝光时长。4.根据权利要求2所述的方法，其特征在于，在所述摄像头根据所述月亮模式对应的第一拍摄参数显示拍摄预览界面之后，所述方法还包括：周期性获取终端的位姿信息和月亮的天文信息，根据终端的位置和月亮的位置获取第三直线，根据终端的位姿信息获取第四直线；如果确定所述第三直线和所述第四直线之间的夹角大于或等于预设的夹角阈值，所述摄像头退出所述月亮模式。5.根据权利要求1所述的方法，其特征在于，所述接收用户的第一操作之后，所述方法还包括：所述终端显示第一拍摄模式的预览界面；所述第一拍摄模式与所述月亮模式不同。6.根据权利要求1所述的方法，其特征在于，所述传感器为地磁计，所述通过所述传感器获取所述终端的位姿信息，包括：通过所述地磁计获取所述终端在地磁场中的第一俯仰角、第一横滚角和第一偏航角；根据所述第一俯仰角、第一横滚角和第一偏航角，以及预设的三角函数，确定第一方向向量；根据所述第一方向向量，确定所述终端的朝向。7.根据权利要求1所述的方法，其特征在于，所述传感器为惯性测量单元，所述通过所述传感器获取所述终端的位姿信息，包括：通过所述惯性测量单元获取所述终端在重力场中的第二俯仰角、第二横滚角和第二偏航角；根据所述第二俯仰角、第二横滚角和第二偏航角，以及预设的三角函数，确定第二方向向量；根据所述第二方向向量，确定所述终端的朝向。8.根据权利要求6或7所述的方法，其特征在于，所述传感器为惯性测量单元和地磁计，所述通过所述传感器获取所述终端的位姿信息，包括：通过所述地磁计获取所述终端在地磁场中的第一俯仰角、第一横滚角和第一偏航角；根据所述第一俯仰角、第一横滚角和第一偏航角，以及预设的三角函数，确定第一方向向量；通过所述惯性测量单元获取所述终端在重力场中的第二俯仰角、第二横滚角和第二偏航角；根据所述第二俯仰角、第二横滚角和第二偏航角，以及预设的三角函数，确定第二方向向量；将所述第一方向向量转换至所述第二方向向量所在坐标系下，得到第三方向向量；根据所述第三方向向量，确定所述终端的朝向。9.根据权利要求1所述的方法，其特征在于，所述通过所述传感器确定所述终端的位姿信息，包括：根据全球导航卫星系统获取所述终端的位置；根据所述终端的朝向与所述终端的位置，得到所述终端的位姿信息。10.根据权利要求1-9中任一项所述的方法，其特征在于，所述方法还包括：获取当前拍摄时刻的当地天气状态；所述通过所述传感器确定所述终端的位姿信息，包括：如果所述当前拍摄时刻的当地天气状态处于第一状态，通过所述传感器确定所述终端的位姿信息；所述第一状态为月亮相对于所述终端为拍摄可见的状态。11.根据权利要求1-9中任一项所述的方法，其特征在于，所述方法还包括：若所述第一直线与所述第二直线之间的夹角大于所述预设的夹角阈值，保持当前拍摄模式进行拍摄；所述当前拍摄模式与所述月亮模式不同。12.一种检测月亮的方法，其特征在于，应用于终端，所述终端包括传感器和摄像头；所述方法包括：接收用户的第一操作，所述第一操作用于开启所述摄像头；通过所述传感器获取所述终端的位姿信息；所述位姿信息包括所述终端的朝向和所述终端的位置；获取月亮的天文信息，所述天文信息包括月亮的位置；根据所述终端的位置和所述月亮的位置获取第一直线；根据所述终端的位姿信息获取第二直线；如果所述第一直线和所述第二直线之间的夹角大于预设的夹角阈值，所述摄像头以当前拍摄模式进行拍摄；所述当前拍摄模式与月亮模式不同。13.根据权利要求12所述的方法，其特征在于，所述摄像头以当前拍摄模式进行拍摄，包括：所述摄像头根据所述当前拍摄模式对应的拍摄参数显示拍摄预览界面；所述拍摄参数包括白平衡、焦距、色彩平衡。14.根据权利要求13所述的方法，其特征在于，在所述摄像头根据所述当前拍摄模式对应的拍摄参数显示拍摄预览界面之后，所述方法还包括：周期性获取终端的位姿信息和月亮的天文信息，根据终端的位置和月亮的位置获取第三直线，根据终端的位姿信息获取第四直线；如果确定所述第三直线和所述第四直线之间的夹角小于或等于所述预设的夹角阈值，所述摄像头进入月亮模式进行拍摄。15.根据权利要求14所述的方法，其特征在于，所述摄像头进入月亮模式进行拍摄，包括：所述摄像头根据所述月亮模式对应的拍摄参数显示拍摄预览界面；所述拍摄参数包括白平衡、焦距、色彩平衡。16.根据权利要求15所述的方法，其特征在于，所述摄像头进入月亮模式进行拍摄，包括：接收到用户的第二操作，所述第二操作用于启动拍摄成像；所述摄像头根据所述月亮模式对应的第二拍摄参数成像；所述第二拍摄参数包括曝光时长。17.一种电子设备，其特征在于，所述电子设备包括存储器、摄像头、传感器和一个或多个处理器；所述存储器、所述摄像头、所述传感器与所述处理器耦合；所述存储器中存储有计算机程序代码，所述计算机程序代码包括计算机指令，当所述计算机指令被所述处理器执行时，使得所述电子设备执行如权利要求1-16中任一项所述的方法。18.一种计算机可读存储介质，其特征在于，包括计算机指令，当所述计算机指令在电子设备上运行时，使得所述电子设备执行如权利要求1-16中任一项所述的方法。
说明书desc
技术领域本申请涉及终端技术领域，尤其涉及一种检测月亮的方法和电子设备。背景技术当前，终端的拍摄技术日益成熟。在拍摄过程中，针对不同的拍摄对象，终端可以进入不同的拍摄模式，基于不同的拍摄参数来进行拍摄，还可以对不同拍摄模式获取的图像进行相应的图像后处理，得到拍摄效果更好、更贴合实际拍摄环境的拍摄图像。在终端通过后置摄像头拍摄月亮时，可进入月亮模式，基于月亮模式对应的拍摄参数来拍摄月亮。在采集到初始月亮图像后进行月亮模式下对应的图像后处理，最终得到经过图像处理后的月亮图像。但是，现有的终端对于真实的月亮的识别准确率低，在拍摄时会将路灯、打印出的假月亮、或者月亮形状的光源等识别成真实的月亮，从而进入月亮模式进行拍摄，影响用户体验。发明内容本申请实施例提供一种检测月亮的方法和电子设备，可以分辨拍摄对象是否为真实的月亮，只有在确定拍摄对象为真实的月亮的情况下，才进入拍摄月亮对应的拍摄模式，能够准确识别拍摄月亮的场景，提高了进入月亮模式拍摄的准确性。为达到上述目的，本申请的实施例采用如下技术方案。第一方面，提供了一种检测月亮的方法，应用于终端，终端包括传感器和摄像头；该方法包括：接收用户的第一操作，其中，该第一操作用于开启摄像头。通过传感器获取终端的位姿信息，获取月亮的天文信息。其中，位姿信息包括终端的朝向和终端的位置，天文信息包括月亮的位置。根据终端的位置和月亮的位置获取第一直线，根据终端的位姿信息获取第二直线，如果第一直线和第二直线之间的夹角小于或等于预设的夹角阈值，摄像头进入月亮模式进行拍摄。上述实施例提供的一种检测月亮的方法，终端接收用户的第一操作，开启摄像头。通过传感器获取自身的位姿信息，获取月亮的天文信息，根据月亮的位置与终端的位置之间获取第一直线，根据终端的位姿信息获取第二直线，在第一直线和所述第二直线之间的夹角小于或等于预设的夹角阈值的情况下，摄像头进入月亮模式进行拍摄。其中，第一直线和所述第二直线之间的夹角小于或等于预设的夹角阈值意味着终端的摄像头与月亮处于对准状态，只有在确定终端处于对准月亮拍摄的状态，也即，确定终端当前的拍摄对象就是月亮的情况下，才进入月亮模式进行对应的拍摄成像处理，能够准确识别拍摄月亮的场景，提高了进入月亮模式拍摄的准确性。结合第一方面，在一种可能的设计方式中，摄像头进入月亮模式进行拍摄，包括：摄像头根据月亮模式对应的第一拍摄参数显示拍摄预览界面；第一拍摄参数包括白平衡、焦距、色彩平衡。在本申请中，月亮模式对应的第一拍摄参数为最适合拍摄月亮的参数，在第一直线和所述第二直线之间的夹角小于或等于预设的夹角阈值，终端的摄像头与月亮处于对准状态，摄像头拍摄对象就是月亮的情况下，以第一拍摄参数显示拍摄预览界面，其所呈现的月亮的拍摄效果更佳、更贴合月亮的实际环境效果。结合第一方面，在一种可能的设计方式中，摄像头进入月亮模式进行拍摄，包括：接收到用户的第二操作，第二操作用于启动拍摄成像；摄像头根据月亮模式对应的第二拍摄参数成像；第二拍摄参数包括曝光时长。在本申请中，在进入月亮模式拍摄的过程中，接收到用户的拍摄操作，以月亮模式对应的第二拍摄参数成像。月亮模式下的曝光时长充分考虑了拍摄月亮的独特性，以第二拍摄参数中的曝光时长拍摄月亮以成像，所得到的图像中月亮的图像显示效果更好。结合第一方面，在一种可能的设计方式中，在摄像头根据月亮模式对应的第一拍摄参数显示拍摄预览界面之后，该方法还包括：周期性获取终端的位姿信息和月亮的天文信息，根据终端的位置和月亮的位置获取第三直线，根据终端的位姿信息获取第四直线。如果确定第三直线和第四直线之间的夹角大于预设的夹角阈值，摄像头退出月亮模式。在本申请中，在摄像头根据月亮模式对应的第一拍摄参数显示拍摄预览界面之后，终端周期性地检测到第三直线和第四直线之间的夹角大于预设的夹角阈值，也即，终端的摄像头不再对准月亮，摄像头的拍摄对象不是月亮了，此时，摄像头退出月亮模式。避免了拍摄其他拍摄对象但是仍使用月亮模式对应的拍摄参数的失误，避免月亮模式对应的拍摄参数对预览拍摄画面、拍摄图像造成的影响，实现月亮模式与其他模式的准确切换。结合第一方面，在一种可能的设计方式中，在接收用户的第一操作之后，该方法还包括：终端显示第一拍摄模式的预览界面；第一拍摄模式与月亮模式不同。在本申请中，在接收到用户第一操作之后，在未进行月亮位置识别之前，终端可以显示第一拍摄模式的预览界面。该第一拍摄模式可以为默认拍摄模式，比如人像拍摄模式、正常拍摄模式等，保证了终端摄像头对于其他拍摄对象的正常拍摄，优化用户体验。结合第一方面，在一种可能的设计方式中，传感器为地磁计，通过传感器获取终端的位姿信息，包括：通过地磁计获取终端在地磁场中的第一俯仰角、第一横滚角和第一偏航角。根据第一俯仰角、第一横滚角和第一偏航角，以及预设的三角函数，确定第一方向向量。根据第一方向向量，确定终端的朝向。在本申请中，终端可以通过地磁计确定终端在地磁场的磁场分量，从而确定终端的朝向，地磁计作为终端的内置传感器，在不增设其他硬件的条件下，可以实现确定终端朝向的目的，节省了技术成本。结合第一方面，在一种可能的设计方式中，传感器为惯性测量单元，通过传感器获取终端的位姿信息，包括：通过惯性测量单元获取终端在重力场中的第二俯仰角、第二横滚角和第二偏航角。根据第二俯仰角、第二横滚角和第二偏航角，以及预设的三角函数，确定第二方向向量。根据第二方向向量，确定终端的朝向。在本申请中，终端可以通过惯性测量单元确定终端在重力场的重力分量，从而确定终端的朝向，惯性测量单元作为终端的内置传感器，在不增设其他硬件的条件下，可以实现确定终端朝向的目的，节省了技术成本。结合第一方面，在一种可能的设计方式中，传感器为惯性测量单元和地磁计，通过传感器获取终端的位姿信息，包括：通过地磁计获取终端在地磁场中的第一俯仰角、第一横滚角和第一偏航角，根据第一俯仰角、第一横滚角和第一偏航角，以及预设的三角函数，确定第一方向向量。通过惯性测量单元获取终端在重力场中的第二俯仰角、第二横滚角和第二偏航角，根据第二俯仰角、第二横滚角和第二偏航角，以及预设的三角函数，确定第二方向向量。将第一方向向量转换至第二方向向量所在坐标系下，得到第三方向向量，根据第三方向向量，确定终端的朝向。在本申请中，终端可以通过惯性测量单元与地磁计共同确定终端的朝向，尤其是在一些极端的情况下，比如，终端某一轴与地磁场平行，无法测量该轴对应的角度；或者，终端某一轴与重力线平行，无法测量该轴对应的角度的情况下，结合惯性测量单元与地磁计所测量得到的数据，可以有效地得到终端是三轴分量，从而得到终端的朝向，一方面保证了数据的完整性、有效性，另一方面保证了终端朝向的准确性。结合第一方面，在一种可能的设计方式中，通过传感器确定终端的位姿信息，包括：根据全球导航卫星系统获取终端的位置，根据终端的朝向与终端的位置，得到终端的位姿信息。在本申请中，终端可以从全球导航卫星系统获取终端的位置，该方案简单，节省计算量。结合第一方面，在一种可能的设计方式中，该方法还包括：获取当前拍摄时刻的当地天气状态，如果当前拍摄时刻的当地天气状态处于第一状态，通过传感器确定终端的位姿信息；第一状态为月亮相对于终端为拍摄可见的状态。在本申请中，在一些月亮相对于终端为拍摄不可见的天气下，比如，雨天，阴天，雪天等，月亮不可见，用户在这种天气下拍摄月亮的概率很小，因此，在确定终端的位姿信息之前，对当前拍摄时刻的当前天气进行识别，只有在月亮相对于终端为拍摄可见的天气下，才执行确定终端的位姿信息的操作，可以节省终端的计算成本，降低终端的功耗。结合第一方面，在一种可能的设计方式中，该方法还包括：若第一直线与第二直线之间的夹角大于预设的夹角阈值，保持当前拍摄模式进行拍摄；当前拍摄模式与月亮模式不同。在本申请中，若确定第一直线与第二直线之间的夹角大于预设的夹角阈值，也即，终端的摄像头没有对准月亮，摄像头的拍摄对象不是月亮，此时，摄像头保持当前拍摄模式进行拍摄，不进入月亮模式。在拍摄对象为月亮形状的灯源、路灯等看起来像月亮的情况下，可以根据第一直线与第二直线之间的夹角，确定拍摄对象并不是真实的月亮，从而不进入月亮模式，而是保持当前拍摄模式进行拍摄，能够准确识别拍摄月亮的场景，提高了进入月亮模式拍摄的准确性。第二方面，提供一种检测月亮的方法，应用于终端，终端包括传感器和摄像头；包括：接收用户的第一操作，该第一操作用于开启摄像头。通过传感器获取终端的位姿信息，其中，位姿信息包括终端的朝向和终端的位置。获取月亮的天文信息，其中，天文信息包括月亮的位置。根据终端的位置和月亮的位置获取第一直线，根据终端的位姿信息获取第二直线，如果第一直线和第二直线之间的夹角大于预设的夹角阈值，摄像头以当前拍摄模式进行拍摄，当前拍摄模式与月亮模式不同。上述实施例提供的一种检测月亮的方法，终端接收用户的第一操作，开启摄像头。通过传感器获取自身的位姿信息，获取月亮的天文信息，根据月亮的位置与终端的位置之间获取第一直线，根据终端的位姿信息获取第二直线，在第一直线和所述第二直线之间的夹角大于预设的夹角阈值的情况下，以当前拍摄模式进行拍摄。其中，第一直线和所述第二直线之间的夹角大于预设的夹角阈值意味着终端的摄像头与月亮未处于对准状态，此时摄像头以当前拍摄模式进行拍摄，不进入月亮模式，避免了误入月亮模式的缺陷，提高了进入月亮模式拍摄的准确性。结合第二方面，在一种可能的设计方式中，摄像头以当前拍摄模式进行拍摄，包括：摄像头根据当前拍摄模式对应的拍摄参数显示拍摄预览界面；拍摄参数包括白平衡、焦距、色彩平衡。在本申请中，在确定拍摄对象不是月亮的情况下，摄像头以当前拍摄模式对应的拍摄参数进行拍摄，其所呈现是符合当前拍摄对象的实际环境效果。结合第二方面，在一种可能的设计方式中，在摄像头根据当前拍摄模式对应的拍摄参数显示拍摄预览界面之后，该方法还包括：周期性获取终端的位姿信息和月亮的天文信息，根据终端的位置和月亮的位置获取第三直线，根据终端的位姿信息获取第四直线，如果确定第三直线和第四直线之间的夹角小于或等于预设的夹角阈值，摄像头进入月亮模式进行拍摄。在本申请中，在摄像头根据当前拍摄模式对应的拍摄参数显示拍摄预览界面之后，终端周期性地检测到第三直线和第四直线之间的夹角小于或等于预设的夹角阈值，也即，终端的摄像头处于对准月亮的状态，摄像头的拍摄对象是真实的月亮，此时，摄像头进入月亮模式进行拍摄，可以以月亮模式下的拍摄参数更好低显示月亮的拍摄效果和成像效果，实现月亮模式与其他模式的准确切换。结合第二方面，在一种可能的设计方式中，摄像头进入月亮模式进行拍摄，包括：摄像头根据月亮模式对应的拍摄参数显示拍摄预览界面；拍摄参数包括白平衡、焦距、色彩平衡。在本申请中，月亮模式对应的拍摄参数为最适合拍摄月亮的参数，在第一直线和所述第二直线之间的夹角小于或等于预设的夹角阈值，终端的摄像头与月亮处于对准状态，摄像头拍摄对象就是月亮的情况下，以拍摄参数显示拍摄预览界面，其所呈现的月亮的拍摄效果更佳、更贴合月亮的实际环境效果。结合第二方面，在一种可能的设计方式中，摄像头进入月亮模式进行拍摄，包括：接收到用户的第二操作，第二操作用于启动拍摄成像，摄像头根据月亮模式对应的第二拍摄参数成像；第二拍摄参数包括曝光时长。在本申请中，在进入月亮模式拍摄的过程中，接收到用户的拍摄操作，以月亮模式对应的第二拍摄参数成像。月亮模式下的曝光时长充分考虑了拍摄月亮的独特性，以第二拍摄参数中的曝光时长拍摄月亮以成像，所得到的图像中月亮的图像显示效果更好。第三方面，提供了一种电子设备，该电子设备包括存储器、摄像头、传感器和一个或多个处理器；所述存储器、所述摄像头、所述传感器与所述处理器耦合；所述存储器中存储有计算机程序代码，所述计算机程序代码包括计算机指令，当所述计算机指令被所述处理器执行时，使得所述电子设备执行如上述第一方面中任一项所述的方法。第四方面，提供了一种计算机可读存储介质，该计算机可读存储介质中存储有指令，当其在电子设备上运行时，使得电子设备可以执行上述第一方面中任一项所述的方法。第五方面，提供了一种包含指令的计算机程序产品，当其在电子设备上运行时，使得电子设备可以执行上述第一方面中任一项所述的方法。第六方面，本申请实施例提供了一种芯片，芯片包括处理器，处理器用于调用存储器中的计算机程序，以执行如第一方面的方法。可以理解地，上述提供的第三方面所述的电子设备，第四方面所述的计算机可读存储介质，第五方面所述的计算机程序产品，第六方面所述的芯片所能达到的有益效果，可参考第一方面、第二方面及其任一种可能的设计方式中的有益效果，此处不再赘述。附图说明图1为本申请实施例提供的检测月亮的方法的一种场景环境示意图；图2为本申请实施例提供的检测月亮的方法的另一种场景环境示意图；图3为本申请实施例提供的电子设备的硬件结构示意图；图4为本申请实施例提供的一种检测月亮的方法的流程示意图；图5为本申请实施例提供的手机在地磁场下三轴夹角示意图；图6为本申请实施例提供的手机在重力场下三轴夹角示意图；图7为本申请实施例提供的确定手机位置姿态的流程示意图；图8为本申请实施例提供的手机后置摄像头的朝向与第一直线夹角小于预设夹角阈值的场景示意图；图9为本申请实施例提供的手机后置摄像头的朝向与第一直线夹角大于预设夹角阈值的场景示意图；图10为本申请实施例提供的一种芯片结构示意图。具体实施方式在本申请实施例的描述中，以下实施例中所使用的术语只是为了描述特定实施例的目的，而并非旨在作为对本申请的限制。如在本申请的说明书和所附权利要求书中所使用的那样，单数表达形式“一种”、“所述”、“上述”、“该”和“这一”旨在也包括例如“一个或多个”这种表达形式，除非其上下文中明确地有相反指示。还应当理解，在本申请以下各实施例中，“至少一个”、“一个或多个”是指一个或两个以上。术语“和/或”，用于描述关联对象的关联关系，表示可以存在三种关系；例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B的情况，其中A、B可以是单数或者复数。字符“/”一般表示前后关联对象是一种“或”的关系。在本说明书中描述的参考“一个实施例”或“一些实施例”等意味着在本申请的一个或多个实施例中包括结合该实施例描述的特定特征、结构或特点。由此，在本说明书中的不同之处出现的语句“在一个实施例中”、“在一些实施例中”、“在其他一些实施例中”、“在另外一些实施例中”等不是必然都参考相同的实施例，而是意味着“一个或多个但不是所有的实施例”，除非是以其他方式另外特别强调。术语“包括”、“包含”、“具有”及它们的变形都意味着“包括但不限于”，除非是以其他方式另外特别强调。术语“连接”包括直接连接和间接连接，除非另外说明。“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。在本申请实施例中，“示例性的”或者“例如”等词用于表示作例子、例证或说明。本申请实施例中被描述为“示例性的”或者“例如”的任何实施例或设计方案不应被解释为比其它实施例或设计方案更优选或更具优势。确切而言，使用“示例性的”或者“例如”等词旨在以具体方式呈现相关概念。当前，终端具备的摄像功能技术日益成熟。在拍摄过程中，针对不同的拍摄对象，终端可以通过进入不同的拍摄模式，基于拍摄模式对应的拍摄参数来拍摄对应的拍摄对象。在得到包含拍摄对象的拍摄图像后，对拍摄图像进行拍摄模式中对应的图像后处理，以得到拍摄效果更好、更贴合实际拍摄环境的拍摄图像。终端的拍摄模式包括月亮模式、星空模式、目光模式等。比如，以拍摄模式为月亮模式为例说明，在终端通过后置摄像头拍摄月亮时，终端可手动或自动进入月亮模式，基于月亮模式对应的拍摄参数来拍摄月亮。在得到包含月亮的拍摄图像进行月亮模式对应的图像后处理，从而得到对拍摄图像中的月亮表面进行纹路细节强化处理、对拍摄图像中的月亮的拍摄效果进行增强处理的月亮图像。但是，现有的终端对于真实月亮的识别准确率低，在拍摄时会将3D打印出的假月亮、路灯、或者形状像月亮的光源等物体识别成月亮，从而进入月亮模式进行拍摄，并得到经过月亮模式下的图像后处理的不包含真实的月亮的图像，也即，在原本不需要进行月亮模式的图像后处理的情况下，对拍摄图像进行处理，得到了的图像后处理的图像并非最符合实际环境的图像，影响了用户体验。本申请提供一种月亮检测方法，可参考图1所示，终端为手机。手机通过后置摄像头对着月亮进行拍摄，通过内置传感器测量自身的位置姿态，从而确定手机的后置摄像头的朝向。图1中手机的后置摄像头的朝向所在直线为L1。手机从第三方平台获取当前拍摄时刻月亮的位置信息，并确定当前拍摄时刻月亮的位置与手机之间的直线为L。根据直线L1与直线L之间的夹角θ1来确定当前拍摄时刻检测到的月亮是否为真实的月亮。图1中，夹角θ1小于预设的夹角阈值，由此来确定当前拍摄时刻终端的拍摄对象确实是真实的月亮。在确定当前拍摄时刻终端的拍摄对象是真实的月亮的情况下，进入终端的月亮模式对月亮进行拍摄。参考图2，图2给出了一种拍摄对象为挂在树上的3D打印的月亮形状的月亮灯。手机通过后置摄像头对着月亮灯进行拍摄，通过内置传感器测量自身的位置姿态，从而确定手机的后置摄像头的朝向。图2中手机的后置摄像头的朝向所在直线为L2。手机从第三方平台获取当前拍摄时刻月亮的位置信息，确定当前拍摄时刻月亮的位置与终端位置之间的直线为L。根据直线L2与直线L之间的夹角θ2来确定当前拍摄时刻检测到的月亮是否为真实的月亮，图2中，夹角θ2大于预设的夹角阈值，由此确定当前拍摄时刻终端的拍摄对象并不是真实的月亮。本方法通过终端的位置姿态和当前拍摄时刻的月亮的位置，可以有效识别当前时刻的拍摄对象是否为真实的月亮。只有在确定当前拍摄时刻的拍摄对象为真实的月亮的情况下，才进入月亮模式进行拍摄以及在月亮模式下进行拍摄图像的图像后处理，提高了终端对月亮的识别准确率，避免了终端误进入月亮模式对非月亮图像进行图像后处理的问题，优化了用户体验。本申请实施例中的终端可以为包括摄像头和用于测量位置姿态的传感器的电子设备。其中，电子设备可以包括后置摄像头、前置摄像头等。用于测量位置姿态的传感器包括地磁计、惯性测量单元等。示例性地，电子设备可以为便携式计算机、平板电脑、笔记本电脑、个人计算机、可穿戴电子设备、增强现实虚拟现实设备等，以下实施例对该电子设备的具体形式不做特殊限制。请参考图3，其示出本申请实施例提供一种电子设备的结构框图。其中，电子设备100可以包括处理器310，外部存储器接口320，内部存储器321，通用串行总线接口330，充电管理模块340，电源管理模块341，电池342，天线1，天线2，射频模块350，通信模块360，音频模块370，扬声器370A，受话器370B，麦克风370C，耳机接口370D，传感器模块380，按键390，马达391，指示器392，摄像头393，显示屏394，以及用户标识模块卡接口395等。其中传感器模块380可以包括压力传感器380A，陀螺仪传感器380B，气压传感器380C，磁传感器380D，加速度传感器380E，距离传感器380F，接近光传感器380G，环境光传感器380H，地磁计380l等。本发明实施例示意的结构并不构成对电子设备100的限定。可以包括比图示更多或更少的部件，或者组合某些部件，或者拆分某些部件，或者不同的部件布置。图示的部件可以以硬件，软件或软件和硬件的组合实现。处理器310可以包括一个或多个处理单元。例如，处理器310可以包括应用处理器，调制解调处理器，图形处理器，图像信号处理器，控制器，存储器，视频编解码器，数字信号处理器，基带处理器，和/或神经网络处理器等。其中，不同的处理单元可以是独立的器件，也可以集成在一个或多个处理器中。上述控制器可以是指挥电子设备100的各个部件按照指令协调工作的决策者。是电子设备100的神经中枢和指挥中心。控制器根据指令操作码和时序信号，产生操作控制信号，完成取指令和执行指令的控制。处理器310中还可以设置存储器，用于存储指令和数据。在一些实施例中，处理器310中的存储器为高速缓冲存储器，可以保存处理器310刚用过或循环使用的指令或数据。如果处理器310需要再次使用该指令或数据，可从所述存储器中直接调用。避免了重复存取，减少了处理器310的等待时间，因而提高了系统的效率。在一些实施例中，处理器310可以包括接口。接口可以包括集成电路接口，集成电路内置音频接口，脉冲编码调制接口，通用异步收发传输器接口，移动产业处理器接口，通用输入输出接口，SIM接口，和/或USB接口等。本发明实施例示意的各模块间的接口连接关系，只是示意性说明，并不构成对电子设备100的结构限定。电子设备100可以采用本发明实施例中不同的接口连接方式，或多种接口连接方式的组合。充电管理模块340用于从充电器接收充电输入。其中，充电器可以是无线充电器，也可以是有线充电器。在一些有线充电的实施例中，充电管理模块340可以通过USB接口330接收有线充电器的充电输入。在一些无线充电的实施例中，充电管理模块340可以通过电子设备100的无线充电线圈接收无线充电输入。充电管理模块340为电池342充电的同时，还可以通过电源管理模块341为电子设备100供电。电源管理模块341用于连接电池342，充电管理模块340与处理器310。电源管理模块341接收所述电池342和/或充电管理模块340的输入，为处理器310，内部存储器321，外部存储器接口320，显示屏394，摄像头393，和通信模块360等供电。电源管理模块341还可以用于监测电池容量，电池循环次数，电池健康状态等参数。在一些实施例中，电源管理模块341也可以设置于处理器310中。在一些实施例中，电源管理模块341和充电管理模块340也可以设置于同一个器件中。电子设备100的无线通信功能可以通过天线1，天线2，射频模块350，通信模块360，调制解调器以及基带处理器等实现。天线1和天线2用于发射和接收电磁波信号。电子设备100中的每个天线可用于覆盖单个或多个通信频带。不同的天线还可以复用，以提高天线的利用率。例如：可以将蜂窝网天线复用为无线局域网分集天线。在一些实施例中，天线可以和调谐开关结合使用。射频模块350可以提供应用在电子设备100上的包括2G/3G/4G/5G等无线通信的解决方案的通信处理模块。射频模块350可以包括至少一个滤波器，开关，功率放大器，低噪声放大器等。射频模块350由天线1接收电磁波，并对接收的电磁波进行滤波，放大等处理，传送至调制解调器进行解调。射频模块350还可以对经调制解调器调制后的信号放大，经天线1转为电磁波辐射出去。在一些实施例中，射频模块350的至少部分功能模块可以被设置于处理器310中。在一些实施例中，射频模块350的至少部分功能模块可以与处理器310的至少部分模块被设置在同一个器件中。调制解调器可以包括调制器和解调器。调制器用于将待发送的低频基带信号调制成中高频信号。解调器用于将接收的电磁波信号解调为低频基带信号。随后解调器将解调得到的低频基带信号传送至基带处理器处理。低频基带信号经基带处理器处理后，被传递给应用处理器。应用处理器通过音频设备输出声音信号，或通过显示屏394显示图像或视频。在一些实施例中，调制解调器可以是独立的器件。在一些实施例中，调制解调器可以独立于处理器310，与射频模块350或其他功能模块设置在同一个器件中。通信模块360可以提供应用在电子设备100上的包括无线局域网网络)，蓝牙，全球导航卫星系统，调频，近距离无线通信技术，红外技术等无线通信的解决方案的通信处理模块。通信模块360可以是集成至少一个通信处理模块的一个或多个器件。通信模块360经由天线2接收电磁波，将电磁波信号调频以及滤波处理，将处理后的信号发送到处理器310。通信模块360还可以从处理器310接收待发送的信号，对其进行调频，放大，经天线2转为电磁波辐射出去。在一些实施例中，电子设备100的天线1和射频模块350耦合，天线2和通信模块360耦合，使得电子设备100可以通过无线通信技术与网络以及其他设备通信。所述无线通信技术可以包括全球移动通讯系统，通用分组无线服务，码分多址接入，宽带码分多址，时分码分多址，长期演进，BT，GNSS，WLAN，NFC，FM，和/或IR技术等。所述GNSS可以包括全球卫星定位系统，全球导航卫星系统，北斗卫星导航系统，准天顶卫星系统和/或星基增强系统。在一些实施例中，电子设备可以基于GNSS获取自身的位置信息。这里位置信息可以为电子设备的经纬度坐标。电子设备100通过GPU，显示屏394，以及应用处理器等实现显示功能。GPU为图像处理的微处理器，连接显示屏394和应用处理器。GPU用于执行数学和几何计算，用于图形渲染。处理器310可包括一个或多个GPU，其执行程序指令以生成或改变显示信息。显示屏394用于显示图像，视频等。例如，显示屏394可以显示来电提醒界面和语音通话界面。本申请实施例中，如果电子设备100接收到对端在第一应用中发起的应用内呼叫请求，电子设备100的显示屏394可以显示包括第一应用的业务信息的语音通话界面。显示屏394包括显示面板。显示面板可以采用液晶显示屏，有机发光二极管，有源矩阵有机发光二极体或主动矩阵有机发光二极体，柔性发光二极管，Miniled，MicroLed，Micro-oLed，量子点发光二极管等。在一些实施例中，电子设备100可以包括1个或N个显示屏394，N为大于1的正整数。电子设备100可以通过lSP，摄像头393，视频编解码器，GPU，显示屏以及应用处理器等实现拍摄功能。ISP用于处理摄像头393反馈的数据。例如，拍照时，打开快门，光线通过镜头被传递到摄像头感光元件上，光信号转换为电信号，摄像头感光元件将所述电信号传递给ISP处理，转化为肉眼可见的图像。ISP还可以对图像的噪点，亮度，肤色进行算法优化。ISP还可以对拍摄场景的曝光，色温等参数优化。在一些实施例中，ISP可以设置在摄像头393中。摄像头393用于捕获静态图像或视频。物体通过镜头生成光学图像投射到感光元件。感光元件可以是电荷耦合器件或互补金属氧化物半导体光电晶体管。感光元件把光信号转换成电信号，之后将电信号传递给ISP转换成数字图像信号。ISP将数字图像信号输出到DSP加工处理。DSP将数字图像信号转换成标准的RGB，YUV等格式的图像信号。在一些实施例中，电子设备100可以包括1个或N个摄像头393，N为大于1的正整数。数字信号处理器用于处理数字信号，除了可以处理数字图像信号，还可以处理其他数字信号。例如，当电子设备100在频点选择时，数字信号处理器用于对频点能量进行傅里叶变换等。视频编解码器用于对数字视频压缩或解压缩。电子设备100可以支持一种或多种视频编解码器。这样，电子设备100可以播放或录制多种编码格式的视频，例如：动态图像专家组1，MPEG2，MPEG3，MPEG4等。NPU为神经网络计算处理器，通过借鉴生物神经网络结构，例如借鉴人脑神经元之间传递模式，对输入信息快速处理，还可以不断的自学习。通过NPU可以实现电子设备100的智能认知等应用，例如：图像识别，人脸识别，语音识别，文本理解等。外部存储器接口320可以用于连接外部存储卡，例如Micro SD卡，实现扩展电子设备100的存储能力。外部存储卡通过外部存储器接口320与处理器310通信，实现数据存储功能。例如将音乐，视频等文件保存在外部存储卡中。内部存储器321可以用于存储计算机可执行程序代码，所述可执行程序代码包括指令。处理器310通过运行存储在内部存储器321的指令，从而执行电子设备100的各种功能应用以及数据处理。存储器121可以包括存储程序区和存储数据区。其中，存储程序区可存储操作系统，至少一个功能所需的应用程序等。存储数据区可存储电子设备100使用过程中所创建的数据等。此外，存储器121可以包括高速随机存取存储器，还可以包括非易失性存储器，例如至少一个磁盘存储器件，闪存器件，其他易失性固态存储器件，通用闪存存储器等。电子设备100可以通过音频模块370，扬声器370A，受话器370B，麦克风370C，耳机接口370D，以及应用处理器等实现音频功能。例如音乐播放，录音等。压力传感器380A用于感受压力信号，可以将压力信号转换成电信号。在一些实施例中，压力传感器380A可以设置于显示屏394。压力传感器380A的种类很多，如电阻式压力传感器，电感式压力传感器，电容式压力传感器等。电容式压力传感器可以是包括至少两个具有导电材料的平行板。当有力作用于压力传感器，电极之间的电容改变。电子设备100根据电容的变化确定压力的强度。当有触摸操作作用于显示屏394，电子设备100根据压力传感器380A检测所述触摸操作强度。电子设备100也可以根据压力传感器380A的检测信号计算触摸的位置。在一些实施例中，作用于相同触摸位置，但不同触摸操作强度的触摸操作，可以对应不同的操作指令。陀螺仪传感器380B可以用于确定电子设备100的运动姿态。在一些实施例中，可以通过陀螺仪传感器380B确定电子设备100围绕三个轴的角速度。陀螺仪传感器380B可以用于拍摄防抖。示例性的，当按下快门，陀螺仪传感器380B检测电子设备100抖动的角度，根据角度计算出镜头模组需要补偿的距离，让镜头通过反向运动抵消电子设备100的抖动，实现防抖。陀螺仪传感器380B还可以用于导航，体感游戏场景。气压传感器380C用于测量气压。在一些实施例中，电子设备100通过气压传感器380C测得的气压值计算海拔高度，辅助定位和导航。磁传感器380D包括霍尔传感器。电子设备100可以利用磁传感器380D检测翻盖皮套的开合。在一些实施例中，当电子设备100是翻盖机时，电子设备100可以根据磁传感器380D检测翻盖的开合。进而根据检测到的皮套的开合状态或翻盖的开合状态，设置翻盖自动解锁等特性。加速度传感器380E可检测电子设备100在各个方向上加速度的大小。当电子设备100静止时可检测出重力的大小及方向。还可以用于识别终端姿态，应用于横竖屏切换，计步器等应用。在一些实施例中，电子设备包括惯性测量单元。IMU中由多个加速度传感器380E与多个角速度传感器组成，其中，加速度传感器380E用于测量电子设备相对于地垂线的加速度分量，陀螺仪传感器380B用于测量电子设备的角度信息。距离传感器380F，用于测量距离。电子设备100可以通过红外或激光测量距离。在一些实施例中，拍摄场景，电子设备100可以利用距离传感器380F测距以实现快速对焦。接近光传感器380G可以包括例如发光二极管和光检测器，例如光电二极管。发光二极管可以是红外发光二极管。通过发光二极管向外发射红外光。使用光电二极管检测来自附近物体的红外反射光。当检测到充分的反射光时，可以确定电子设备100附近有物体。当检测到不充分的反射光时，可以确定电子设备100附近没有物体。电子设备100可以利用接近光传感器380G检测用户手持电子设备100贴近耳朵通话，以便自动熄灭屏幕达到省电的目的。接近光传感器380G也可用于皮套模式，口袋模式自动解锁与锁屏。环境光传感器380H用于感知环境光亮度。电子设备100可以根据感知的环境光亮度自适应调节显示屏亮度。环境光传感器380H也可用于拍照时自动调节白平衡。环境光传感器380H还可以与接近光传感器380G配合，检测电子设备100是否在口袋里，以防误触。地磁计380I用于测量终端在地磁场下的磁场分量。比如，地磁计可测量终端在终端坐标系x轴、y轴、z轴上的磁场分量，以此来确定终端与地磁场形成的三轴夹角，分别为偏航角、俯仰角和横滚角。在一些实施例中，电子设备在拍摄过程中，在进入不同的拍摄模式时，基于不同拍摄模式对应的拍摄参数，可通过环境光传感器380H调节部分拍摄参数。比如，调节拍摄参数中的白平衡等。在一些实施例中，在打开电子设备的相机应用时，电子设备可根据当前检测到的拍摄对象，进入拍摄对象对应的拍摄模式，以更好的拍摄效果对拍摄对象进行拍摄。比如，在启动相机应用的情况下，电子设备根据其后置摄像头的朝向、月亮的位置信息，确定当前拍摄的对象为月亮，则在相机应用中进入月亮模式，基于月亮模式的拍摄参数对月亮进行拍摄，在得到拍摄图像后进行月亮模式下的图像后处理，从而得到包含月亮的最终拍摄图像。基于图1与图2所示的场景环境示意图，以电子设备100为手机执行本公开实施例为例，参见图4，本公开实施例提供了一种月亮检测方法，包括：S101、接收用户的第一操作。其中，第一操作为开启摄像头操作。示例性地，第一操作可以为用户基于手机的显示界面点击相机图标触发的开启摄像头操作；还可以为用户通过语音输入触发的开启摄像头操作。在一些实施例中，手机接收到用户开启摄像头操作时，打开摄像头。开启摄像头后，手机可以在显示屏显示摄像头的拍摄画面。手机上可以设置前置摄像头和后置摄像头，如果开启后置摄像头，显示后置摄像头的拍摄画面；如果开启前置摄像头，显示前置摄像头的拍摄画面。其中，拍摄画面中包括至少一个拍摄对象。可选地，显示界面还可以包括用于进行拍摄的拍摄图标、拍摄参数设置图标、拍摄类型选择图标、镜头选择图标等。拍摄参数设置图标可以包括闪光灯图标、拍摄模式选择图标等。在开启摄像头之后，手机获取自身的位置姿态和月亮的天文信息，来确定当前是否在拍摄月亮，是否需要进入月亮模式。可选地，在开启摄像头之后，手机还可以根据拍摄画面进行图像识别，根据识别到的拍摄对象而进入与拍摄对象对应的拍摄模式。比如，手机根据拍摄画面中进行图像识别，识别到该图像中的拍摄对象为月亮形状的物体，则进入月亮模式，以月亮模式对应的拍摄参数进行拍摄。比如，手机根据拍摄画面中进行图像识别，识别到该图像中的拍摄对象为人像，则进入人像模式，以人像模式对应的拍摄参数进行拍摄。其中，进入月亮模式指的是以月亮模式的第一拍摄参数显示拍摄预览画面，比如，以月亮模式下的白平衡、色彩平衡、焦距显示拍摄预览画面。在接收到用户拍摄的操作时，以月亮模式下的第二拍摄参数来成像。比如，以月亮模式下的曝光时长进行成像，得到初始图像。在得到初始图像之后，以月亮模式下的图像处理方法来对初始图像进行处理，比如，对初始图像中月亮纹路进行图像增强处理，得到保存至相册中的最终图像。在实际拍摄中，手机会将与月亮形状类似同样为光源的物体识别为月亮而进入月亮模式，因此在识别到“月亮”时，进入月亮模式之前，手机可以执行以下步骤102的判断，来确保识别到的物体为真实的月亮。S102、获取手机的位姿信息。其中，手机的位姿信息包括手机的朝向和手机的位置。在本实施例中，手机的朝向可以理解为手机后置摄像头的朝向。在手机开启相机，以后置摄像头进行拍摄时，识别到拍摄画面中可能存在月亮的情况下，手机通过内置传感器确定自身的位置姿态。示例性地，内置传感器可以为地磁计、惯性测量单元等。其中，地磁计可用于测量手机在地磁场下的磁场分量，得到手机的偏航角、俯仰角和横滚角；惯性测量单元由三轴加速度传感器和三轴角速度传感器组成，可用于测量手机在重力场的重力分量，得到手机的偏航角、俯仰角和横滚角。在一种示例中，图5给出了一种手机通过地磁计测量手机在机体坐标系下，在三轴上的磁场分量的示意图。手机通过地磁计可测量得到手机在x轴、y轴、z轴上的磁场分量，以此来确定手机与地磁场中地磁线形成的三轴夹角，分别为偏航角αy1、俯仰角αp1和横滚角αr1。在得到偏航角αy1、俯仰角αp1和横滚角αr1后，基于偏航角αy1、俯仰角αp1和横滚角αr1可以确定一条直线的方向，该直线的方向即为手机的朝向，也就是的手机后置摄像头的朝向。手机还可以基于内置的GNSS获取手机在地球坐标系下的位置。这里位置可以为手机的经纬度坐标。基于手机的后置摄像头的朝向与手机的经纬度坐标，得到手机的位置姿态。在另一种示例中，参考图6，图6给出了一种通过惯性测量单元测量手机在机体坐标系下，在x轴、y轴、z轴上的重力分量的示意图。惯性测量单元测量手机在三轴上的重力分量，以此来确定手机与重力线之间的三轴夹角，分别为偏航角αy2、俯仰角αp2和横滚角αr2。在得到偏航角αy2、俯仰角αp2和横滚角αr2后，基于偏航角αy2、俯仰角αp2和横滚角αr2可以确定一条直线的方向，该直线的方向即为手机的朝向，也就是的手机后置摄像头的朝向。手机还可以基于内置的GNSS获取手机在地球坐标系下的位置。这里位置可以为手机的经纬度坐标。基于手机的后置摄像头的朝向与手机的经纬度坐标，得到手机的位置姿态。在又一种示例中，结合磁力计和惯性测量单元，可以在任意极端情况下均可获取到手机的三轴角度。比如，若手机地磁计的某一个分轴与地磁场平行，则其平行轴的角度无法测量。比如，x轴与地磁线平行，横滚角αr1与地磁场之间的夹角为180°，无法测量横滚角。此时需要惯性测量单元测得的偏航角作为数据来源。示例性地，将惯性测量单元测得的偏航角进行坐标转换，从地球坐标系转换至磁场坐标系，从而得到在磁场下的偏航角。若手机的某一个分轴与重力场平行，则其平行轴的角度无法测量。比如，手机的z轴与重力场平行，偏航角αy2与重力场之间的夹角为180°，无法测量偏航角。此时需要地磁计测得的偏航角作为数据来源。示例性地，将地磁计测得的偏航角进行坐标转换，从磁场坐标系转换至地球坐标系，从而得到在重力场下的偏航角。在得到偏航角、俯仰角和横滚角后，手机可以根据偏航角、俯仰角和横滚角，以及预设的三角函数，确定一条方向向量，该方向向量所在的直线即为手机的朝向。在本实施例中，手机的朝向为手机的后置摄像头的朝向。可选地，手机还可以基于内置的GNSS获取手机在地球坐标系下的位置。这里位置可以为手机的经纬度坐标。手机的后置摄像头的朝向与手机的经纬度坐标构成手机的位姿信息。参考图7，图7给出了手机基于地磁计、惯性测量单元确定手机后置摄像头的朝向，基于GNSS获取手机的位置，基于手机后置摄像头的朝向和手机的位置得到手机的位姿信息的流程示意图。S103、获取月亮的天文信息。其中，其中，天文信息包括月亮的位置，月亮的位置指的是在地球坐标系中的坐标。在一些实施例中，手机可以从第三方平台获取月亮的位置。其中，第三方平台可以为天文数据平台、天文数据应用等。在获取到月亮的位置之后，手机可以根据自身在地球坐标系中的位置与月亮的位置，确定月亮的位置与自身位置之间的第一直线。参考图1，所确定的月亮的位置与自身位置之间的第一直线可为图1中的直线L。S104、若确定手机的后置摄像头与月亮处于对准状态，进入月亮模式。在一些实施例中，若确定手机的后置摄像头与月亮处于对准状态，可以通过手机与月亮的位置所形成的第一直线、手机的后置摄像头的朝向所在的第二直线之间的关系来确定。其中，连接手机与月亮确定第一直线l，该第一直线为l为地球坐标系下的直线。根据手机后置摄像头的朝向和手机的位置得到第二直线，该第二直线为手机的机体坐标系下的直线。将第二直线转换至地球坐标系得到第二直线l1。如果第一直线l与第二直线l1之间的夹角小于或等于预设的夹角阈值，表示手机对着月亮进行拍摄，则进入月亮模式。比如，预设的夹角阈值为3°。在一种示例中，当第一直线l与第二直线之间的夹角为0°时，第一直线l与第二直线l1平行，也就是说，手机后置摄像头的朝向平行于手机和月亮之间的连线。示例性地，参考图8，在地球坐标系下，将手机的使用者所在的地球点作为地球坐标系的原点，月亮在t1时刻的位置坐标可以表示为，根据月亮在t1时刻的位置坐标为和手机的位置坐标确定第一直线l。根据手机的朝向所在直线上的点的坐标和手机的位置信息，可以得到手机的后置摄像头的朝向所在第二直线l1的直线表达式。其中，第一直线l、第二直线l1可分别表示为：其中，A0，B0，C0为计算得到的第一直线l的系数，D0为计算得到的第一直线l的常数；A1，B1，C1为计算得到的第二直线l1的系数，D1为计算得到的第二直线l1的常数。将第一直线l与第二直线l1进行对比，判断两条直线之间的位置关系。根据第一直线l的系数确定第一直线l的方向向量根据第二直线l1的系数确定直线l1的方向向量/＞分别表示为：根据第一直线l的方向向量和第二直线l1的方向向量/＞确定第一直线l与第二直线l1的夹角α1：若第一直线l与第二直线l1平行，则夹角α1＝0°，此时cosα1＝1，手机的后置摄像头的朝向符合月亮的天文信息。一般情况会考虑计算误差，在本实施例中，设定预设的夹角阈值θ。若α1≤θ，手机的后置摄像头的朝向符合月亮的天文信息。示例性地，θ的取值范围可以为，比如，θ的取值可以为0.01°、0.1°、1°、2°、3°、4°等。在第一直线l与第二直线l1的夹角α等于0，或者，第一直线l与第二直线l1的夹角α小于夹角阈值θ的情况下，确定手机的后置摄像头的朝向符合月亮的天文信息，此时手机的后置摄像头与月亮处于对准状态，也即，说明用户正在通过手机的后置摄像头拍摄月亮，此时进入月亮模式。其中，进入月亮模式指的是手机的摄像头根据月亮模式对应的第一拍摄参数显示拍摄预览界面，其中，第一拍摄参数包括白平衡、焦距、色彩平衡。也即，摄像头根据月亮模式对应的白平衡、焦距、色彩平衡等参数显示拍摄预览界面。需要说明的是，月亮相对于地球，在不同时刻下的位置是固定的。也即，在不同时刻下，月亮在地球坐标系中的位置坐标的固定的。可选地，在用户以月亮模式对应的第一拍摄参数显示拍摄预览界面，手机还可以周期性地获取手机的位姿信息和月亮的天文信息，根据手机的位置和月亮的位置获取第三直线，根据手机的位姿信息获取第四直线。如果确定第三直线和第四直线之间的夹角大于预设的夹角阈值，则摄像头退出月亮模式。也即，摄像头此时并没有对准月亮，摄像头可以退出月亮模式。在本实施例中，手机可以周期性地对手机的位置与月亮的位置进行识别确定，实现了在确定手机未对准月亮的情况下，拍摄模式从月亮模式切换至其他拍摄模式。S105、在接收到用户的第二操作时，以月亮模式对应的第二拍摄参数进行拍摄，得到月亮图像。第二操作用于启动拍摄成像，比如，第二操作可以为用户在拍摄预览界面的拍摄操作，或者，第二操作还可以为用户通过语音输入的拍摄操作。摄像头根据月亮模式对应的第二拍摄参数成像，其中，第二拍摄参数包括曝光时长。也即，摄像头根据月亮模式对应的曝光时长成像，得到初始图像。在得到初始图像之后，根据月亮模式对应的图像处理方法对初始图像进行处理，比如，优化月亮表面纹路，对月亮表面纹路进行图像增强等，得到最终图像以保存至手机相册。不同的拍摄模式针对的是不同的拍摄环境与不同的拍摄对象，因此不同的拍摄模式的曝光时长不同。影响曝光时长的因素包括快门速度、光感值、曝光补偿、光圈大小等。S106、若确定手机的后置摄像头与月亮未处于对准状态，保持当前拍摄模式。其中，当前拍摄模式与月亮模式不同。在手机检测到手机的后置摄像头的朝向所在直线与第一直线之间的夹角α2大于预设的夹角阈值θ，则说明此时手机的后置摄像头并没有对准月亮进行拍摄，其可能在拍摄其他对象。在这种情况下，手机保持当前拍摄模式进行拍摄。可参考图9中，手机的后置摄像头的朝向所在直线l2与第一直线l之间形成夹角α2，夹角α2，大于预设的夹角阈值θ，说明此时手机的后置摄像头并没有对准月亮进行拍摄，其拍摄对象并不是月亮。手机的摄像头保持当前拍摄模式，以当前拍摄模式的第一拍摄参数显示拍摄预览画面。第一拍摄参数包括白平衡、焦距、色彩平衡。S107、在接收到用户的第二操作时，以当前拍摄模式对应的第二拍摄参数进行拍摄，得到拍摄图像。在一些实施例中，手机在收到用户按下拍摄图标时触发的拍摄操作时，以当前拍摄模式对应的第二拍摄参数进行拍摄，得到拍摄图像。第二拍摄参数包括曝光时长。可选地，在接收用户的第一操作之后，手机显示第一拍摄模式的预览界面，其中，第一拍摄模式与月亮模式不同。第一拍摄模式可以为手机的默认拍摄模式。相应地，若手机在接收到用户第一操作之后，根据手机的位置和月亮的位置获取第一直线，根据手机的位姿信息获取第二直线。确定第一直线和第二直线之间的夹角大于预设的夹角阈值，则摄像头以当前拍摄模式进行拍摄，当前拍摄模式与月亮模式不同。可选地，在手机的摄像头以当前拍摄模式进行拍摄过程中，可以周期性地获取手机的位姿信息和月亮的天文信息，根据手机的位置和月亮的位置获取第三直线，根据手机的位姿信息获取第四直线。如果确定第三直线和第四直线之间的夹角小于或等于预设的夹角阈值，摄像头进入月亮模式进行拍摄。在本实施例中，手机可以周期性地对手机的位置与月亮的位置进行识别确定，在识别确定手机对准月亮的情况下，将拍摄模式从当前拍摄模式切换至月亮模式。上述实施例提供的月亮检测方法，终端接收用户的第一操作，开启摄像头。通过传感器获取自身的位姿信息，获取月亮的天文信息，根据月亮的位置与终端的位置之间获取第一直线，根据终端的位姿信息获取第二直线，在第一直线和所述第二直线之间的夹角小于或等于预设的夹角阈值的情况下，摄像头进入月亮模式进行拍摄。其中，第一直线和所述第二直线之间的夹角小于或等于预设的夹角阈值意味着终端的摄像头与月亮处于对准状态，只有在确定终端处于对准月亮拍摄的状态，也即，确定终端当前的拍摄对象就是月亮的情况下，进行拍摄图像的预览界面的显示、成像以及图像后处理，能够准确识别拍摄月亮的场景，提高了进入月亮模式拍摄的准确性。手机在进行室外拍摄时，天气会影响环境，比如，阴天时，即使手机对着月亮所在位置，也无法拍摄到清晰的月亮，甚至无法拍摄到月亮。在一些实施例中，检测月亮的方法还包括：检测当前时刻的当地天气。如果当前时刻的当地天气处于第一状态，获取手机的位置姿态，确定手机的后置摄像头的朝向。在一些实施例中，手机可以从第三方平台获取当前时刻的当地天气的状态。其中第三方平台可以为天气应用、天气数据中心平台等。第一状态可以是用户在该天气下可以看到月亮时的天气状态。比如，第一状态可以为晴天。或者，第一状态还可以是非雨天、阴天、雪天等使得月亮不可见的天气状态。也即，在手机确定当前时刻的当地天气为晴天，或者，不是雨天、阴天、雪天的情况下，获取手机的位置姿态，确定手机的后置摄像头的朝向。本实施例中，手机可以通过地磁计和惯性测量单元来确定手机的后置摄像头的朝向，可参考上述实施例102中所提供的方法，本实施例不做赘述。上述实施例提供的月亮检测方法，手机在确定当前时刻当地天气处于第一状态的情况下，确定手机是通过后置摄像头进行拍摄时，通过获取自身的位置姿态、获取月亮的天文信息，根据月亮的位置与手机自身位置之间的第一直线与手机的后置摄像头的朝向所在直线之间的位置关系，来确定手机是否处于对准月亮拍摄的状态。只有在确定手机处于对准月亮拍摄的状态，也即，确定手机当前的拍摄对象就是月亮的情况下，才进入月亮模式进行拍摄，根据月亮的实际天文信息，可以有效地提高对月亮的识别准确率，在月亮模式下进行拍摄图像的图像后处理，避免了终端误进入月亮模式对非月亮图像进行图像后处理的问题，优化了用户体验。在一些实施例中，给出不用场景来说明的检测月亮的方法。不同的场景中，拍摄物体为已知的。比如，场景一中的拍摄物体为真实的月亮；场景二中拍摄物体为形状像月亮且具有发光性能的物体。在场景一中，手机开启相机应用，通过后置摄像头进行拍摄，在手机的显示界面显示后置摄像头的拍摄画面，手机拍摄真实的月亮。参考图1，手机的后置摄像头对准月亮，手机屏幕朝下，手机屏幕所在平面与水平面之间的夹角α3为第一角度。用户在第一时间点点击拍摄，拍摄时长为第一曝光时长，在第二时间点结束拍摄，得到包含月亮的第一图像。在本场景中，基于上述实施例所提供的月亮的检测方法，手机在通过后置摄像头进行拍摄的过程中，基于自身的位置姿态与获取到的月亮的位置信息，可以识别到当前拍摄对象为真实的月亮，故进入月亮模式，以月亮模式对应的拍摄参数拍摄，得到第一图像。在场景二中，手机开启相机应用，同样通过后置摄像头进行拍摄，在手机的显示界面显示后置摄像头的拍摄画面，手机拍摄形状像月亮且具有发光性能的物体。可选地，形状像月亮且具有发光性能的物体可以为3D打印的月亮灯、灯笼、路灯等。参考图2，以其他拍摄对象为挂在树枝上的3D打印的月亮灯为例来说明，手机的后置摄像头对准月亮灯，手机屏幕朝下，手机屏幕所在平面与水平面之间的夹角α4为第二角度。用户在第三时间点点击拍摄，拍摄时长为第二曝光时长，在第四时间点结束拍摄，得到包含月亮灯的第二图像。在本场景中，月亮灯在天文数据中的位置信息必然与真实的月亮的在天文数据中的位置信息不同。基于上述实施例所提供的月亮的检测方法，手机在通过后置摄像头进行拍摄的过程中，基于自身的位置姿态与获取到的月亮灯的位置信息，确定当前拍摄对象不是真实的月亮，故不进入月亮模式，以当前相机的所开启的拍摄模式的拍摄参数继续拍摄，得到第二图像。当前相机的所开启的拍摄模式不是月亮模式。需要说明的是，场景一与场景二中，第一时间点与第二时间点之间的环境亮度，与第三时间点与第四时间点之间的环境亮度相同；第一角度与第二角度可以一致，来避免环境亮度对不同场景造成的不同影响。可选地，还可以改变场景二的月亮灯的位置，或，月亮灯面向手机摄像头的角度。保持手机屏幕所在平面与水平面之间的夹角α4仍为第二角度，拍摄得到的第三图像。其中，第二图像与第三图像的内容相同，均包括月亮灯和当前的环境元素，均不包括真实的月亮。在这种场景下，基于上述实施例所提供的月亮的检测方法，手机在通过后置摄像头进行拍摄的过程中，基于自身的位置姿态与获取到的月亮灯的位置信息，确定当前拍摄对象不是真实的月亮，依然不进入月亮模式，以当前相机的所开启的拍摄模式的拍摄参数继续拍摄，得到第三图像。场景一在识别到拍摄对象为月亮后进入月亮模式，以第一曝光时长和月亮模式的拍摄参数得到第一图像；场景二和场景三在识别到拍摄对象不是月亮时，保持当前拍摄模式，以第二曝光时长和当前拍摄模式的拍摄参数分别得到第二图像、第三图像。其中，当前拍摄模式不是月亮模式。不同拍摄模式的拍摄参数和曝光时长不同，也即，第一曝光时长与第二曝光时长不同。通过以上不同场景的实施例可知，本申请提供的月亮检测方法可以有效地分辨出真实的月亮，只有在确定拍摄对象是真实的月亮的情况下，进入月亮模式，对月亮进行拍摄，得到包含月亮的拍摄图像，显然，本方法可以提高手机拍摄时对月亮的识别准确率，优化用户的拍摄体验。本申请实施例还提供一种芯片系统)，如图10所示，该芯片系统包括至少一个处理器701和至少一个接口电路702。处理器701和接口电路702可通过线路互联。例如，接口电路702可用于从其它装置接收信号。又例如，接口电路702可用于向其它装置发送信号。示例性的，接口电路702可读取存储器中存储的指令，并将该指令发送给处理器701。当所述指令被处理器701执行时，可使得电子设备执行上述实施例中的各个步骤。当然，该芯片系统还可以包含其他分立器件，本申请实施例对此不作具体限定。本申请实施例还提供一种计算机可读存储介质，该计算机可读存储介质包括计算机指令，当所述计算机指令在上述电子设备上运行时，使得该电子设备执行上述方法实施例中电子设备100执行的各个功能或者步骤。本申请实施例还提供一种计算机程序产品，当所述计算机程序产品在计算机上运行时，使得所述计算机执行上述方法实施例中电子设备100执行的各个功能或者步骤。例如，该计算机可以是上述电子设备100。通过以上实施方式的描述，所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，仅以上述各功能模块的划分进行举例说明，实际应用中，可以根据需要而将上述功能分配由不同的功能模块完成，即将装置的内部结构划分成不同的功能模块，以完成以上描述的全部或者部分功能。在本申请所提供的几个实施例中，应该理解到，所揭露的装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述模块或单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个装置，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是一个物理单元或多个物理单元，即可以位于一个地方，或者也可以分布到多个不同地方。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。上述集成的单元既可以采用硬件的形式实现，也可以采用软件功能单元的形式实现。所述集成的单元如果以软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个可读取存储介质中。基于这样的理解，本申请实施例的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的全部或部分可以以软件产品的形式体现出来，该软件产品存储在一个存储介质中，包括若干指令用以使得一个设备或处理器执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。以上内容，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何在本申请揭露的技术范围内的变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以所述权利要求的保护范围为准。
