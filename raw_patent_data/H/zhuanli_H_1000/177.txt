标题title
一种令牌桶的实现方法
摘要abst
本申请涉及网络通信技术领域，其具体地公开了一种令牌桶的实现方法，其通过实时监测采集总带宽、第一实际速率和第二实际速率，并在后端引入数据处理和分析算法来进行所述总带宽、所述第一实际速率和所述第二实际速率的时序协同关联分析，以此来综合生成更准确和及时的桶深调整指令。这样，能够基于总带宽、第一实际速率和第二实际速率的时序关联特征来生成更准确和及时的桶深调整指令，以此实现对令牌桶的桶深的智能调整，从而有效地避免流量翻倍和CPU资源消耗的问题，并提高网络性能和用户体验。
权利要求书clms
1.一种令牌桶的实现方法，包括：响应于接收到业务流量，获取为租户分配的总带宽以及所述业务流量的第一实际速率；接收第二业务板发送的第一通知消息，所述第一通知消息包括第二实际速率；根据所述总带宽、所述第一实际速率和所述第二实际速率对第一业务板中令牌桶的桶深进行调整；其中，根据所述总带宽、所述第一实际速率和所述第二实际速率对所述第一业务板中令牌桶的桶深进行调整，其特征在于，包括：获取总带宽的时间序列、第一实际速率的时间序列和第二实际速率的时间序列；将所述总带宽的时间序列、所述第一实际速率的时间序列和所述第二实际速率的时间序列分别按照时间维度排列为总带宽时序输入向量、第一实际速率时序输入向量和第二实际速率时序输入向量；将所述总带宽时序输入向量、所述第一实际速率时序输入向量和所述第二实际速率时序输入向量通过基于多尺度邻域特征提取网络的时序关联特征提取器以得到总带宽时序关联特征向量、第一实际速率时序关联特征向量和第二实际速率时序关联特征向量；将所述总带宽时序关联特征向量、所述第一实际速率时序关联特征向量和所述第二实际速率时序关联特征向量映射到同一高维特征空间以得到映射后总带宽时序关联特征向量、映射后第一实际速率时序关联特征向量和映射后第二实际速率时序关联特征向量；使用基于重参数化网络的特征强化器对所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量进行特征强化以得到强化映射后总带宽时序关联特征向量、强化映射后第一实际速率时序关联特征向量和强化映射后第二实际速率时序关联特征向量；对所述强化映射后总带宽时序关联特征向量、所述强化映射后第一实际速率时序关联特征向量和所述强化映射后第二实际速率时序关联特征向量进行基于贝叶斯概率网络的后验语义分析以得到桶深调整后验语义特征；基于所述桶深调整后验语义特征，确定所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变。2.根据权利要求1所述的令牌桶的实现方法，其特征在于，所述多尺度邻域特征提取网络包括并行的第一卷积层和第二卷积层，以及，与所述第一卷积层和所述第二卷积层连接的级联层。3.根据权利要求2所述的令牌桶的实现方法，其特征在于，将所述总带宽时序关联特征向量、所述第一实际速率时序关联特征向量和所述第二实际速率时序关联特征向量映射到同一高维特征空间以得到映射后总带宽时序关联特征向量、映射后第一实际速率时序关联特征向量和映射后第二实际速率时序关联特征向量，包括：使用基于全连接层的空间映射器将所述总带宽时序关联特征向量、所述第一实际速率时序关联特征向量和所述第二实际速率时序关联特征向量映射到同一高维特征空间以得到所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量。4.根据权利要求3所述的令牌桶的实现方法，其特征在于，使用基于重参数化网络的特征强化器对所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量进行特征强化以得到强化映射后总带宽时序关联特征向量、强化映射后第一实际速率时序关联特征向量和强化映射后第二实际速率时序关联特征向量，包括：以如下重参数化公式使用基于重参数化网络的特征强化器对所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量进行特征强化以得到强化映射后总带宽时序关联特征向量、强化映射后第一实际速率时序关联特征向量和强化映射后第二实际速率时序关联特征向量；其中，所述重参数化公式为：其中，表示所述映射后总带宽时序关联特征向量的各个位置的特征值，/＞和/＞分别是所述映射后总带宽时序关联特征向量的各个位置的特征值集合的均值和方差，/＞表示所述强化映射后总带宽时序关联特征向量，/＞表示所述映射后第一实际速率时序关联特征向量的各个位置的特征值，/＞和/＞分别是所述映射后第一实际速率时序关联特征向量的各个位置的特征值集合的均值和方差，/＞表示所述强化映射后第一实际速率时序关联特征向量，/＞表示所述映射后第二实际速率时序关联特征向量的各个位置的特征值，/＞和/＞分别是所述映射后第二实际速率时序关联特征向量的各个位置的特征值集合的均值和方差，/＞表示所述强化映射后第二实际速率时序关联特征向量，/＞表示以2为底的对数函数，/＞表示反正弦函数，/＞表示反余弦函数。5.根据权利要求4所述的令牌桶的实现方法，其特征在于，对所述强化映射后总带宽时序关联特征向量、所述强化映射后第一实际速率时序关联特征向量和所述强化映射后第二实际速率时序关联特征向量进行基于贝叶斯概率网络的后验语义分析以得到桶深调整后验语义特征，包括：将所述强化映射后总带宽时序关联特征向量、所述强化映射后第一实际速率时序关联特征向量和所述强化映射后第二实际速率时序关联特征向量输入基于贝叶斯概率网络的后验控制分析器以得到桶深调整后验语义特征向量作为所述桶深调整后验语义特征。6.根据权利要求5所述的令牌桶的实现方法，其特征在于，基于所述桶深调整后验语义特征，确定所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变，包括：将所述桶深调整后验语义特征向量通过基于分类器的桶深调整器以得到桶深调整指令，所述桶深调整指令用于表示所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变。7.根据权利要求6所述的令牌桶的实现方法，其特征在于，还包括训练步骤：用于对所述基于多尺度邻域特征提取网络的时序关联特征提取器、所述基于全连接层的空间映射器、所述基于重参数化网络的特征强化器、所述基于贝叶斯概率网络的后验控制分析器和所述基于分类器的桶深调整器进行训练。8.根据权利要求7所述的令牌桶的实现方法，其特征在于，所述训练步骤，包括：获取总带宽的训练时间序列、训练第一实际速率的时间序列和训练第二实际速率的时间序列，以及，所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变的真实值；将所述总带宽的训练时间序列、所述训练第一实际速率的时间序列和所述训练第二实际速率的时间序列分别按照时间维度排列为训练总带宽时序输入向量、训练第一实际速率时序输入向量和训练第二实际速率时序输入向量；将所述训练总带宽时序输入向量、所述训练第一实际速率时序输入向量和所述训练第二实际速率时序输入向量通过所述基于多尺度邻域特征提取网络的时序关联特征提取器以得到训练总带宽时序关联特征向量、训练第一实际速率时序关联特征向量和训练第二实际速率时序关联特征向量；将所述训练总带宽时序关联特征向量、所述训练第一实际速率时序关联特征向量和所述训练第二实际速率时序关联特征向量映射到同一高维特征空间以得到训练映射后总带宽时序关联特征向量、训练映射后第一实际速率时序关联特征向量和训练映射后第二实际速率时序关联特征向量；使用所述基于重参数化网络的特征强化器对所述训练映射后总带宽时序关联特征向量、所述训练映射后第一实际速率时序关联特征向量和所述训练映射后第二实际速率时序关联特征向量进行特征强化以得到训练强化映射后总带宽时序关联特征向量、训练强化映射后第一实际速率时序关联特征向量和训练强化映射后第二实际速率时序关联特征向量；将所述训练强化映射后总带宽时序关联特征向量、所述训练强化映射后第一实际速率时序关联特征向量和所述训练强化映射后第二实际速率时序关联特征向量输入所述基于贝叶斯概率网络的后验控制分析器以得到训练桶深调整后验语义特征向量；将所述训练桶深调整后验语义特征向量通过所述基于分类器的桶深调整器以得到分类损失函数值；基于所述分类损失函数值对所述基于多尺度邻域特征提取网络的时序关联特征提取器、所述基于全连接层的空间映射器、所述基于重参数化网络的特征强化器、所述基于贝叶斯概率网络的后验控制分析器和所述基于分类器的桶深调整器进行训练，在每一次训练迭代中，对所述训练桶深调整后验语义特征向量进行校正。9.根据权利要求8所述的令牌桶的实现方法，其特征在于，将所述训练桶深调整后验语义特征向量通过所述基于分类器的桶深调整器以得到分类损失函数值，包括：所述基于分类器的桶深调整器以如下分类公式对所述训练桶深调整后验语义特征向量进行处理以生成训练分类结果，其中，所述分类公式为：，其中/＞表示所述训练桶深调整后验语义特征向量，/＞至/＞为权重矩阵，/＞至/＞表示偏置矩阵；以及计算所述训练分类结果与真实值之间的交叉熵值作为所述分类损失函数值。
说明书desc
技术领域本申请涉及智能化令牌桶技术领域，并且更具体地，涉及一种令牌桶的实现方法。背景技术QoS技术涵盖了多个方面，包括流分类、流量监管、流量整形、限速、拥塞管理和拥塞避免等。流量监管是一种常用的QoS技术，用于对进入或流出网络设备的流量进行监管，以保护网络资源不受损害。目前存在一个问题，即在对单租户跨多个网络设备的流量进行限速时，可能出现流量翻倍的情况。这是因为每个网络设备内部的令牌桶是独立计算的，导致实际流量可能超过分配的带宽。为了解决这个问题，可以通过将属于同一租户的流量引流至同一块板卡内来实现限速。然而，这种现有技术方案存在着问题，即板卡之间的流量透传会增加CPU资源的消耗和浪费。随着网络中租户数量的增长、业务流量的增加和网络设备的扩容，这个问题引起了运营商的关注，并需要新的技术来解决。当前的技术方案通过软件配置将同一租户的流量引流至同一块板卡，以实现限速。然而，这种方案仍然存在CPU资源消耗和浪费的问题。针对上述技术问题，中国专利CN117278482A提出了一种令牌桶的实现方法及装置，其能够解决限速过程中的流量翻倍和CPU资源消耗的问题，从而提高网络的服务质量和资源利用效率。然而，在上述令牌桶的实现方法中，只能根据总带宽、第一实际速率和第二实际速率进行简单的算术运算来调整桶深，没有考虑到业务流量的时序特征和关联关系，导致桶深调整的不准确和不及时，无法有效地避免流量翻倍和CPU资源消耗的问题。因此，期望一种优化的令牌桶的实现方案。发明内容为了解决上述技术问题，提出了本申请。本申请提供了一种令牌桶的实现方法，其通过实时监测采集总带宽、第一实际速率和第二实际速率，并在后端引入数据处理和分析算法来进行所述总带宽、所述第一实际速率和所述第二实际速率的时序协同关联分析，以此来综合生成更准确和及时的桶深调整指令。这样，能够基于总带宽、第一实际速率和第二实际速率的时序关联特征来生成更准确和及时的桶深调整指令，以此实现对令牌桶的桶深的智能调整，从而有效地避免流量翻倍和CPU资源消耗的问题，并提高网络性能和用户体验。第一方面，提供了一种令牌桶的实现方法，包括：响应于接收到业务流量，获取为租户分配的总带宽以及所述业务流量的第一实际速率；接收第二业务板发送的第一通知消息，所述第一通知消息包括第二实际速率；根据所述总带宽、所述第一实际速率和所述第二实际速率对所述第一业务板中令牌桶的桶深进行调整；其中，根据所述总带宽、所述第一实际速率和所述第二实际速率对所述第一业务板中令牌桶的桶深进行调整，其特征在于，包括：获取总带宽的时间序列、第一实际速率的时间序列和第二实际速率的时间序列；将所述总带宽的时间序列、所述第一实际速率的时间序列和所述第二实际速率的时间序列分别按照时间维度排列为总带宽时序输入向量、第一实际速率时序输入向量和第二实际速率时序输入向量；将所述总带宽时序输入向量、所述第一实际速率时序输入向量和所述第二实际速率时序输入向量通过基于多尺度邻域特征提取网络的时序关联特征提取器以得到总带宽时序关联特征向量、第一实际速率时序关联特征向量和第二实际速率时序关联特征向量；将所述总带宽时序关联特征向量、所述第一实际速率时序关联特征向量和所述第二实际速率时序关联特征向量映射到同一高维特征空间以得到映射后总带宽时序关联特征向量、映射后第一实际速率时序关联特征向量和映射后第二实际速率时序关联特征向量；使用基于重参数化网络的特征强化器对所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量进行特征强化以得到强化映射后总带宽时序关联特征向量、强化映射后第一实际速率时序关联特征向量和强化映射后第二实际速率时序关联特征向量；对所述强化映射后总带宽时序关联特征向量、所述强化映射后第一实际速率时序关联特征向量和所述强化映射后第二实际速率时序关联特征向量进行基于贝叶斯概率网络的后验语义分析以得到桶深调整后验语义特征；基于所述桶深调整后验语义特征，确定所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变。在上述令牌桶的实现方法中，所述多尺度邻域特征提取网络包括并行的第一卷积层和第二卷积层，以及，与所述第一卷积层和所述第二卷积层连接的级联层。在上述令牌桶的实现方法中，将所述总带宽时序关联特征向量、所述第一实际速率时序关联特征向量和所述第二实际速率时序关联特征向量映射到同一高维特征空间以得到映射后总带宽时序关联特征向量、映射后第一实际速率时序关联特征向量和映射后第二实际速率时序关联特征向量，包括：使用基于全连接层的空间映射器将所述总带宽时序关联特征向量、所述第一实际速率时序关联特征向量和所述第二实际速率时序关联特征向量映射到同一高维特征空间以得到所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量。在上述令牌桶的实现方法中，使用基于重参数化网络的特征强化器对所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量进行特征强化以得到强化映射后总带宽时序关联特征向量、强化映射后第一实际速率时序关联特征向量和强化映射后第二实际速率时序关联特征向量，包括：以如下重参数化公式使用基于重参数化网络的特征强化器对所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量进行特征强化以得到强化映射后总带宽时序关联特征向量、强化映射后第一实际速率时序关联特征向量和强化映射后第二实际速率时序关联特征向量；其中，所述重参数化公式为：其中，表示所述映射后总带宽时序关联特征向量的各个位置的特征值，/＞和分别是所述映射后总带宽时序关联特征向量的各个位置的特征值集合的均值和方差，表示所述强化映射后总带宽时序关联特征向量，/＞表示所述映射后第一实际速率时序关联特征向量的各个位置的特征值，/＞和/＞分别是所述映射后第一实际速率时序关联特征向量的各个位置的特征值集合的均值和方差，/＞表示所述强化映射后第一实际速率时序关联特征向量，/＞表示所述映射后第二实际速率时序关联特征向量的各个位置的特征值，/＞和/＞分别是所述映射后第二实际速率时序关联特征向量的各个位置的特征值集合的均值和方差，/＞表示所述强化映射后第二实际速率时序关联特征向量，/＞表示以2为底的对数函数，/＞表示反正弦函数，/＞表示反余弦函数。在上述令牌桶的实现方法中，对所述强化映射后总带宽时序关联特征向量、所述强化映射后第一实际速率时序关联特征向量和所述强化映射后第二实际速率时序关联特征向量进行基于贝叶斯概率网络的后验语义分析以得到桶深调整后验语义特征，包括：将所述强化映射后总带宽时序关联特征向量、所述强化映射后第一实际速率时序关联特征向量和所述强化映射后第二实际速率时序关联特征向量输入基于贝叶斯概率网络的后验控制分析器以得到桶深调整后验语义特征向量作为所述桶深调整后验语义特征。在上述令牌桶的实现方法中，基于所述桶深调整后验语义特征，确定所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变，包括：将所述桶深调整后验语义特征向量通过基于分类器的桶深调整器以得到桶深调整指令，所述桶深调整指令用于表示所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变。在上述令牌桶的实现方法中，还包括训练步骤：用于对所述基于多尺度邻域特征提取网络的时序关联特征提取器、所述基于全连接层的空间映射器、所述基于重参数化网络的特征强化器、所述基于贝叶斯概率网络的后验控制分析器和所述基于分类器的桶深调整器进行训练。在上述令牌桶的实现方法中，所述训练步骤，包括：获取总带宽的训练时间序列、训练第一实际速率的时间序列和训练第二实际速率的时间序列，以及，所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变的真实值；将所述总带宽的训练时间序列、所述训练第一实际速率的时间序列和所述训练第二实际速率的时间序列分别按照时间维度排列为训练总带宽时序输入向量、训练第一实际速率时序输入向量和训练第二实际速率时序输入向量；将所述训练总带宽时序输入向量、所述训练第一实际速率时序输入向量和所述训练第二实际速率时序输入向量通过所述基于多尺度邻域特征提取网络的时序关联特征提取器以得到训练总带宽时序关联特征向量、训练第一实际速率时序关联特征向量和训练第二实际速率时序关联特征向量；将所述训练总带宽时序关联特征向量、所述训练第一实际速率时序关联特征向量和所述训练第二实际速率时序关联特征向量映射到同一高维特征空间以得到训练映射后总带宽时序关联特征向量、训练映射后第一实际速率时序关联特征向量和训练映射后第二实际速率时序关联特征向量；使用所述基于重参数化网络的特征强化器对所述训练映射后总带宽时序关联特征向量、所述训练映射后第一实际速率时序关联特征向量和所述训练映射后第二实际速率时序关联特征向量进行特征强化以得到训练强化映射后总带宽时序关联特征向量、训练强化映射后第一实际速率时序关联特征向量和训练强化映射后第二实际速率时序关联特征向量；将所述训练强化映射后总带宽时序关联特征向量、所述训练强化映射后第一实际速率时序关联特征向量和所述训练强化映射后第二实际速率时序关联特征向量输入所述基于贝叶斯概率网络的后验控制分析器以得到训练桶深调整后验语义特征向量；将所述训练桶深调整后验语义特征向量通过所述基于分类器的桶深调整器以得到分类损失函数值；基于所述分类损失函数值对所述基于多尺度邻域特征提取网络的时序关联特征提取器、所述基于全连接层的空间映射器、所述基于重参数化网络的特征强化器、所述基于贝叶斯概率网络的后验控制分析器和所述基于分类器的桶深调整器进行训练，在每一次训练迭代中，对所述训练桶深调整后验语义特征向量进行校正。在上述令牌桶的实现方法中，将所述训练桶深调整后验语义特征向量通过所述基于分类器的桶深调整器以得到分类损失函数值，包括：所述基于分类器的桶深调整器以如下分类公式对所述训练桶深调整后验语义特征向量进行处理以生成训练分类结果，其中，所述分类公式为：，其中/＞表示所述训练桶深调整后验语义特征向量，/＞至/＞为权重矩阵，/＞至/＞表示偏置矩阵；以及，计算所述训练分类结果与真实值之间的交叉熵值作为所述分类损失函数值。与现有技术相比，本申请提供的令牌桶的实现方法，其通过实时监测采集总带宽、第一实际速率和第二实际速率，并在后端引入数据处理和分析算法来进行所述总带宽、所述第一实际速率和所述第二实际速率的时序协同关联分析，以此来综合生成更准确和及时的桶深调整指令。这样，能够基于总带宽、第一实际速率和第二实际速率的时序关联特征来生成更准确和及时的桶深调整指令，以此实现对令牌桶的桶深的智能调整，从而有效地避免流量翻倍和CPU资源消耗的问题，并提高网络性能和用户体验。附图说明为了更清楚地说明本申请实施例的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为根据本申请实施例的令牌桶的实现方法的流程图。图2为根据本申请实施例的令牌桶的实现方法的架构示意图。图3为根据本申请实施例的令牌桶的实现系统的框图。图4为根据本申请实施例的令牌桶的实现方法的场景示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。除非另有说明，本申请实施例所使用的所有技术和科学术语与本申请的技术领域的技术人员通常理解的含义相同。本申请中所使用的术语只是为了描述具体的实施例的目的，不是旨在限制本申请的范围。在本申请实施例记载中，需要说明的是，除非另有说明和限定，术语“连接”应做广义理解，例如，可以是电连接，也可以是两个元件内部的连通，可以是直接相连，也可以通过中间媒介间接相连，对于本领域的普通技术人员而言，可以根据具体情况理解上述术语的具体含义。需要说明的是，本申请实施例所涉及的术语“第一第二第三”仅仅是是区别类似的对象，不代表针对对象的特定排序，可以理解地，“第一第二第三”在允许的情况下可以互换特定的顺序或先后次序。应该理解“第一第二第三”区分的对象在适当情况下可以互换，以使这里描述的本申请的实施例可以除了在这里图示或描述的那些以外的顺序实施。图1为根据本申请实施例的令牌桶的实现方法的流程图。图2为根据本申请实施例的令牌桶的实现方法的架构示意图。如图1和图2所示，所述令牌桶的实现方法，包括：110，响应于接收到业务流量，获取为租户分配的总带宽以及所述业务流量的第一实际速率；120，接收第二业务板发送的第一通知消息，所述第一通知消息包括第二实际速率；130，根据所述总带宽、所述第一实际速率和所述第二实际速率对所述第一业务板中令牌桶的桶深进行调整；其中，130，根据所述总带宽、所述第一实际速率和所述第二实际速率对所述第一业务板中令牌桶的桶深进行调整，其特征在于，包括：131，获取总带宽的时间序列、第一实际速率的时间序列和第二实际速率的时间序列；132，将所述总带宽的时间序列、所述第一实际速率的时间序列和所述第二实际速率的时间序列分别按照时间维度排列为总带宽时序输入向量、第一实际速率时序输入向量和第二实际速率时序输入向量；133，将所述总带宽时序输入向量、所述第一实际速率时序输入向量和所述第二实际速率时序输入向量通过基于多尺度邻域特征提取网络的时序关联特征提取器以得到总带宽时序关联特征向量、第一实际速率时序关联特征向量和第二实际速率时序关联特征向量；134，将所述总带宽时序关联特征向量、所述第一实际速率时序关联特征向量和所述第二实际速率时序关联特征向量映射到同一高维特征空间以得到映射后总带宽时序关联特征向量、映射后第一实际速率时序关联特征向量和映射后第二实际速率时序关联特征向量；135，使用基于重参数化网络的特征强化器对所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量进行特征强化以得到强化映射后总带宽时序关联特征向量、强化映射后第一实际速率时序关联特征向量和强化映射后第二实际速率时序关联特征向量；136，对所述强化映射后总带宽时序关联特征向量、所述强化映射后第一实际速率时序关联特征向量和所述强化映射后第二实际速率时序关联特征向量进行基于贝叶斯概率网络的后验语义分析以得到桶深调整后验语义特征；137，基于所述桶深调整后验语义特征，确定所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变。在所述步骤131中，确保从可靠的数据源获取时间序列数据，包括总带宽和两种实际速率，这些时间序列数据将作为后续处理的输入，用于分析和提取特征。在所述步骤132中，确保将时间序列数据按照时间维度正确排列成向量形式，以便进行后续的处理和分析，这样的排列方式可以更好地表示时间序列的发展和变化趋势。在所述步骤133中，使用基于多尺度邻域特征提取网络的时序关联特征提取器，提取时间序列数据的相关特征，这样可以捕获时间序列数据中的关联信息，为后续的分析和处理提供更丰富的特征表示。在所述步骤134中，确保将不同来源的时序关联特征向量映射到同一高维特征空间中，以便进行统一的特征处理和分析，这样可以将不同来源的信息整合到一个统一的特征空间中，为后续的处理和分析提供一致的数据表示。在所述步骤135中，利用基于重参数化网络的特征强化器对映射后的时序关联特征向量进行增强处理，以提高特征的表达能力和区分度，这样可以使特征更具区分度和代表性，有助于后续的分析和决策。在所述步骤136中，利用贝叶斯概率网络进行后验语义分析，从强化后的特征向量中获取与桶深调整相关的语义特征，这样可以在统计学框架下对特征进行分析，得到更具有解释性和指导意义的特征表示。在所述步骤137中，根据桶深调整后的语义特征，结合业务需求和性能优化目标，确定令牌桶的桶深调整策略，这样可以根据实际需求和分析结果，对令牌桶的桶深进行合理的调整，以优化系统性能和资源利用。其中，所述多尺度邻域特征提取网络包括并行的第一卷积层和第二卷积层，以及，与所述第一卷积层和所述第二卷积层连接的级联层。针对上述技术问题，本申请的技术构思为通过实时监测采集总带宽、第一实际速率和第二实际速率，并在后端引入数据处理和分析算法来进行所述总带宽、所述第一实际速率和所述第二实际速率的时序协同关联分析，以此来综合生成更准确和及时的桶深调整指令。这样，能够基于总带宽、第一实际速率和第二实际速率的时序关联特征来生成更准确和及时的桶深调整指令，以此实现对令牌桶的桶深的智能调整，从而有效地避免流量翻倍和CPU资源消耗的问题，并提高网络性能和用户体验。具体地，在本申请的技术方案中，首先，获取总带宽的时间序列、第一实际速率的时间序列和第二实际速率的时间序列。应可以理解，所述总带宽、所述第一实际速率和所述第二实际速率在时间维度上都会随着时间的推移而不断发生变化，因此，为了能够捕捉到总带宽、第一实际速率和第二实际速率在不同时间点上的变化趋势和关联关系，进而生成更准确和及时的桶深调整指令，需要将所述总带宽的时间序列、所述第一实际速率的时间序列和所述第二实际速率的时间序列分别按照时间维度排列为总带宽时序输入向量、第一实际速率时序输入向量和第二实际速率时序输入向量。将所述总带宽、所述第一实际速率和所述第二实际速率的时间序列分别按照时间维度排列为时序输入向量能够保留它们的时序信息，以便后续的时序特征提取和关联分析。然后，考虑到所述总带宽、所述第一实际速率和所述第二实际速率不仅在时间维度上存在着时序的变化特性，而且这些数据还具有着时序的波动性和不确定性。因此，这些数据在不同的时间跨度下可能会呈现出不同的时序变化模式和趋势。基于此，在本申请的技术方案中，为了能够更为充分和准确地捕捉所述总带宽、所述第一实际速率和所述第二实际速率的时序特征，将所述总带宽时序输入向量、所述第一实际速率时序输入向量和所述第二实际速率时序输入向量通过基于多尺度邻域特征提取网络的时序关联特征提取器中进行特征挖掘，以分别提取出所述总带宽、所述第一实际速率和所述第二实际速率在时间维度上的多尺度时序动态特征信息，从而得到总带宽时序关联特征向量、第一实际速率时序关联特征向量和第二实际速率时序关联特征向量。应可以理解，由于所述总带宽、所述第一实际速率和所述第二实际速率在高维空间中的时序特征具有不同的维度和表示方式，为了能够将它们映射到同一高维特征空间，以使它们具有相同的维度和表示形式，在本申请的技术方案中，进一步使用基于全连接层的空间映射器将所述总带宽时序关联特征向量、所述第一实际速率时序关联特征向量和所述第二实际速率时序关联特征向量映射到同一高维特征空间以得到映射后总带宽时序关联特征向量、映射后第一实际速率时序关联特征向量和映射后第二实际速率时序关联特征向量。这样，不仅可以将总带宽、第一实际速率和第二实际速率的时序特征映射到同一高维特征空间中，还可以帮助提取更丰富的特征信息，并捕捉到总带宽、第一实际速率和第二实际速率之间的更复杂的关联关系。全连接层可以通过学习权重和偏置参数，将输入特征向量映射到更高维度的特征空间，从而提高特征的表达能力，为后续的处理和分析提供更准确和有效的输入。在本申请的一个具体实施例中，将所述总带宽时序关联特征向量、所述第一实际速率时序关联特征向量和所述第二实际速率时序关联特征向量映射到同一高维特征空间以得到映射后总带宽时序关联特征向量、映射后第一实际速率时序关联特征向量和映射后第二实际速率时序关联特征向量，包括：使用基于全连接层的空间映射器将所述总带宽时序关联特征向量、所述第一实际速率时序关联特征向量和所述第二实际速率时序关联特征向量映射到同一高维特征空间以得到所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量。进一步地，为了增强和丰富总带宽、第一实际速率和第二实际速率的时序特征的表达能力，使其更具区分性和鲁棒性，在本申请的技术方案中，进一步使用基于重参数化网络的特征强化器对所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量进行特征强化以得到强化映射后总带宽时序关联特征向量、强化映射后第一实际速率时序关联特征向量和强化映射后第二实际速率时序关联特征向量。通过所述基于重参数化网络的特征强化器进行处理，能够引入随机性，将原始特征向量重新参数化为更丰富的特征表示，从而增强所述总带宽、所述第一实际速率和所述第二实际速率的时序特征的表达能力。在这个过程中，每个特征向量的均值和方差被提取出来，并用于生成新的特征向量。这种重参数化的形式可以看作是在语义特征空间中进行数据增强的一种方式，这有助于提取更有用和具有区分性的特征，为后续的处理和分析提供更准确和有效的输入。在本申请的一个具体实施例中，使用基于重参数化网络的特征强化器对所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量进行特征强化以得到强化映射后总带宽时序关联特征向量、强化映射后第一实际速率时序关联特征向量和强化映射后第二实际速率时序关联特征向量，包括：以如下重参数化公式使用基于重参数化网络的特征强化器对所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量进行特征强化以得到强化映射后总带宽时序关联特征向量、强化映射后第一实际速率时序关联特征向量和强化映射后第二实际速率时序关联特征向量；其中，所述重参数化公式为：其中，表示所述映射后总带宽时序关联特征向量的各个位置的特征值，/＞和分别是所述映射后总带宽时序关联特征向量的各个位置的特征值集合的均值和方差，表示所述强化映射后总带宽时序关联特征向量，/＞表示所述映射后第一实际速率时序关联特征向量的各个位置的特征值，/＞和/＞分别是所述映射后第一实际速率时序关联特征向量的各个位置的特征值集合的均值和方差，/＞表示所述强化映射后第一实际速率时序关联特征向量，/＞表示所述映射后第二实际速率时序关联特征向量的各个位置的特征值，/＞和/＞分别是所述映射后第二实际速率时序关联特征向量的各个位置的特征值集合的均值和方差，/＞表示所述强化映射后第二实际速率时序关联特征向量，/＞表示以2为底的对数函数，/＞表示反正弦函数，/＞表示反余弦函数。然后，为了能够融合经过映射和强化后的总带宽、第一实际速率和第二实际速率的时序特征信息，以此基于这些参数的时序协同关联关系来综合进行令牌桶的桶深调整，在本申请的技术方案中，进一步将所述强化映射后总带宽时序关联特征向量、所述强化映射后第一实际速率时序关联特征向量和所述强化映射后第二实际速率时序关联特征向量输入基于贝叶斯概率网络的后验控制分析器以得到桶深调整后验语义特征向量。通过所述基于贝叶斯概率网络的后验控制分析器进行处理，能够利用贝叶斯推断方法，结合先验知识和观测数据，计算出桶深调整后验语义特征。这样得到的所述桶深调整后验语义特征向量可以提供关于桶深调整后验语义特征的不确定性和置信度信息。通过分析该桶深调整后验概率分布，可以了解桶深调整后验语义特征向量在不同取值上的概率分布情况，从而进行相应的决策和调整。在本申请的一个具体实施例中，对所述强化映射后总带宽时序关联特征向量、所述强化映射后第一实际速率时序关联特征向量和所述强化映射后第二实际速率时序关联特征向量进行基于贝叶斯概率网络的后验语义分析以得到桶深调整后验语义特征，包括：将所述强化映射后总带宽时序关联特征向量、所述强化映射后第一实际速率时序关联特征向量和所述强化映射后第二实际速率时序关联特征向量输入基于贝叶斯概率网络的后验控制分析器以得到桶深调整后验语义特征向量作为所述桶深调整后验语义特征。继而，再将所述桶深调整后验语义特征向量通过基于分类器的桶深调整器以得到桶深调整指令，所述桶深调整指令用于表示第一业务板中令牌桶的桶深应增大、应减小或应保持不变。也就是说，通过桶深调整后验语义特征信息来进行分类处理，以此来生成更准确和及时的桶深调整指令。这样，能够基于总带宽、第一实际速率和第二实际速率的时序关联特征来生成更准确和及时的桶深调整指令，以此实现对令牌桶的桶深的智能调整。在本申请的一个具体实施例中，基于所述桶深调整后验语义特征，确定所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变，包括：将所述桶深调整后验语义特征向量通过基于分类器的桶深调整器以得到桶深调整指令，所述桶深调整指令用于表示所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变。在本申请的一个实施例中，所述令牌桶的实现方法，还包括训练步骤：用于对所述基于多尺度邻域特征提取网络的时序关联特征提取器、所述基于全连接层的空间映射器、所述基于重参数化网络的特征强化器、所述基于贝叶斯概率网络的后验控制分析器和所述基于分类器的桶深调整器进行训练。所述训练步骤，包括：获取总带宽的训练时间序列、训练第一实际速率的时间序列和训练第二实际速率的时间序列，以及，所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变的真实值；将所述总带宽的训练时间序列、所述训练第一实际速率的时间序列和所述训练第二实际速率的时间序列分别按照时间维度排列为训练总带宽时序输入向量、训练第一实际速率时序输入向量和训练第二实际速率时序输入向量；将所述训练总带宽时序输入向量、所述训练第一实际速率时序输入向量和所述训练第二实际速率时序输入向量通过所述基于多尺度邻域特征提取网络的时序关联特征提取器以得到训练总带宽时序关联特征向量、训练第一实际速率时序关联特征向量和训练第二实际速率时序关联特征向量；将所述训练总带宽时序关联特征向量、所述训练第一实际速率时序关联特征向量和所述训练第二实际速率时序关联特征向量映射到同一高维特征空间以得到训练映射后总带宽时序关联特征向量、训练映射后第一实际速率时序关联特征向量和训练映射后第二实际速率时序关联特征向量；使用所述基于重参数化网络的特征强化器对所述训练映射后总带宽时序关联特征向量、所述训练映射后第一实际速率时序关联特征向量和所述训练映射后第二实际速率时序关联特征向量进行特征强化以得到训练强化映射后总带宽时序关联特征向量、训练强化映射后第一实际速率时序关联特征向量和训练强化映射后第二实际速率时序关联特征向量；将所述训练强化映射后总带宽时序关联特征向量、所述训练强化映射后第一实际速率时序关联特征向量和所述训练强化映射后第二实际速率时序关联特征向量输入所述基于贝叶斯概率网络的后验控制分析器以得到训练桶深调整后验语义特征向量；将所述训练桶深调整后验语义特征向量通过所述基于分类器的桶深调整器以得到分类损失函数值；基于所述分类损失函数值对所述基于多尺度邻域特征提取网络的时序关联特征提取器、所述基于全连接层的空间映射器、所述基于重参数化网络的特征强化器、所述基于贝叶斯概率网络的后验控制分析器和所述基于分类器的桶深调整器进行训练，在每一次训练迭代中，对所述训练桶深调整后验语义特征向量进行校正。在上述技术方案中，所述训练强化映射后总带宽时序关联特征向量、所述训练强化映射后第一实际速率时序关联特征向量和所述训练强化映射后第二实际速率时序关联特征向量分别表达所述总带宽的训练时序分布的局部时域多尺度关联特征、所述训练第一实际速率的时序分布的局部时域多尺度关联特征和所述训练第二实际速率的时序分布的局部时域多尺度关联特征经域映射和重参数化加强后的特征。这样，在将所述训练强化映射后总带宽时序关联特征向量、所述训练强化映射后第一实际速率时序关联特征向量和所述训练强化映射后第二实际速率时序关联特征向量输入基于贝叶斯概率网络的后验控制分析器时，考虑到所述总带宽的训练时序分布、所述训练第一实际速率的时序分布和所述训练第二实际速率的时序分布在数据源域存在明显时序分布差异，在通过基于贝叶斯概率网络的后验控制分析器融合了所述训练总带宽的时序分布的局部时域多尺度关联特征、所述训练第一实际速率的时序分布的局部时域多尺度关联特征和所述训练第二实际速率的时序分布的局部时域多尺度关联特征的情况下，所述训练强化映射后总带宽时序关联特征向量、所述训练强化映射后第一实际速率时序关联特征向量和所述训练强化映射后第二实际速率时序关联特征向量各自的基于其特定特征分布的特征分布信息显著性会受到影响，使得当所述训练桶深调整后验语义特征向量通过基于分类器的桶深调整器进行分类时，难以稳定地聚焦于特征的显著局部分布，从而影响训练速度。基于此，本申请的申请人在每次所述训练桶深调整后验语义特征向量通过基于分类器的桶深调整器进行分类的迭代时，对所述训练桶深调整后验语义特征向量进行校正，表示为：以如下优化公式在每一次训练迭代中，对所述训练桶深调整后验语义特征向量进行校正以得到校正后训练桶深调整后验语义特征向量；其中，所述优化公式为：其中，和/＞分别是所述训练桶深调整后验语义特征向量/＞的1范数和2范数的平方，/＞是所述训练桶深调整后验语义特征向量/＞的长度，且/＞是权重超参数，/＞是所述训练桶深调整后验语义特征向量，/＞是所述校正后训练桶深调整后验语义特征向量的特征值，/＞是所述训练桶深调整后验语义特征向量的特征值，/＞表示以2为底的对数函数。具体地，通过基于所述训练桶深调整后验语义特征向量的尺度和结构参数来进行其高维特征流形形状的几何注册，可以关注所述训练桶深调整后验语义特征向量/＞的特征值构成的特征集合中的具有丰富特征语义信息的特征，也就是，在基于分类器的桶深调整器进行解码时的基于局部上下文信息表示不相似性的可区分的稳定兴趣特征，从而实现所述训练桶深调整后验语义特征向量/＞在分类过程中的特征信息显著性标注，提升基于分类器的桶深调整器的训练速度。这样，能够基于总带宽、第一实际速率和第二实际速率的时序关联特征来生成更准确和及时的桶深调整指令，以此实现对令牌桶的桶深的智能调整，从而有效地避免流量翻倍和CPU资源消耗的问题，并提高网络性能和用户体验。继而，在本申请的一个具体实施例中，将所述训练桶深调整后验语义特征向量通过所述基于分类器的桶深调整器以得到分类损失函数值，包括：所述基于分类器的桶深调整器以如下分类公式对所述训练桶深调整后验语义特征向量进行处理以生成训练分类结果，其中，所述分类公式为：，其中/＞表示所述训练桶深调整后验语义特征向量，/＞至/＞为权重矩阵，/＞至/＞表示偏置矩阵；以及，计算所述训练分类结果与真实值之间的交叉熵值作为所述分类损失函数值。综上，基于本申请实施例的令牌桶的实现方法被阐明，其能够基于总带宽、第一实际速率和第二实际速率的时序关联特征来生成更准确和及时的桶深调整指令，以此实现对令牌桶的桶深的智能调整，从而有效地避免流量翻倍和CPU资源消耗的问题，并提高网络性能和用户体验。在本申请的一个实施例中，图3为根据本申请实施例的令牌桶的实现系统的框图。如图3所示，根据本申请实施例的令牌桶的实现系统200，包括：第一实际速率获取模块210，用于响应于接收到业务流量，获取为租户分配的总带宽以及所述业务流量的第一实际速率；第二实际速率获取模块220，用于接收第二业务板发送的第一通知消息，所述第一通知消息包括第二实际速率；令牌桶的桶深调整模块230，用于根据所述总带宽、所述第一实际速率和所述第二实际速率对所述第一业务板中令牌桶的桶深进行调整；其中，所述令牌桶的桶深调整模块230，其特征在于，包括：时间序列获取单元231，用于获取总带宽的时间序列、第一实际速率的时间序列和第二实际速率的时间序列；向量排列单元232，用于将所述总带宽的时间序列、所述第一实际速率的时间序列和所述第二实际速率的时间序列分别按照时间维度排列为总带宽时序输入向量、第一实际速率时序输入向量和第二实际速率时序输入向量；时序关联特征提取单元233，用于将所述总带宽时序输入向量、所述第一实际速率时序输入向量和所述第二实际速率时序输入向量通过基于多尺度邻域特征提取网络的时序关联特征提取器以得到总带宽时序关联特征向量、第一实际速率时序关联特征向量和第二实际速率时序关联特征向量；向量映射单元234，用于将所述总带宽时序关联特征向量、所述第一实际速率时序关联特征向量和所述第二实际速率时序关联特征向量映射到同一高维特征空间以得到映射后总带宽时序关联特征向量、映射后第一实际速率时序关联特征向量和映射后第二实际速率时序关联特征向量；特征强化单元235，用于使用基于重参数化网络的特征强化器对所述映射后总带宽时序关联特征向量、所述映射后第一实际速率时序关联特征向量和所述映射后第二实际速率时序关联特征向量进行特征强化以得到强化映射后总带宽时序关联特征向量、强化映射后第一实际速率时序关联特征向量和强化映射后第二实际速率时序关联特征向量；后验语义分析单元236，用于对所述强化映射后总带宽时序关联特征向量、所述强化映射后第一实际速率时序关联特征向量和所述强化映射后第二实际速率时序关联特征向量进行基于贝叶斯概率网络的后验语义分析以得到桶深调整后验语义特征；令牌桶的桶深调整单元237，用于基于所述桶深调整后验语义特征，确定所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变。这里，本领域技术人员可以理解，上述令牌桶的实现系统中的各个单元和模块的具体功能和操作已经在上面参考图1到图2的令牌桶的实现方法的描述中得到了详细介绍，并因此，将省略其重复描述。如上所述，根据本申请实施例的令牌桶的实现系统200可以实现在各种终端设备中，例如用于令牌桶的实现的服务器等。在一个示例中，根据本申请实施例的令牌桶的实现系统200可以作为一个软件模块和/或硬件模块而集成到终端设备中。例如，该令牌桶的实现系统200可以是该终端设备的操作系统中的一个软件模块，或者可以是针对于该终端设备所开发的一个应用程序；当然，该令牌桶的实现系统200同样可以是该终端设备的众多硬件模块之一。替换地，在另一示例中，该令牌桶的实现系统200与该终端设备也可以是分立的设备，并且令牌桶的实现系统200可以通过有线和/或无线网络连接到该终端设备，并且按照约定的数据格式来传输交互信息。图4为根据本申请实施例的令牌桶的实现方法的场景示意图。如图4所示，在该应用场景中，首先，获取总带宽的时间序列、第一实际速率的时间序列和第二实际速率的时间序列；然后，将获取的总带宽的时间序列、第一实际速率的时间序列和第二实际速率的时间序列输入至部署有令牌桶的实现算法的服务器中，其中所述服务器能够基于令牌桶的实现算法对所述总带宽的时间序列、第一实际速率的时间序列和第二实际速率的时间序列进行处理，以确定所述第一业务板中令牌桶的桶深应增大、应减小或应保持不变。还需要指出的是，在本申请的装置、设备和方法中，各部件或各步骤是可以分解和/或重新组合的。这些分解和/或重新组合应视为本申请的等效方案。提供所公开的方面的以上描述以使本领域的任何技术人员能够做出或者使用本申请。对这些方面的各种修改对于本领域技术人员而言是非常显而易见的，并且在此定义的一般原理可以应用于其他方面而不脱离本申请的范围。因此，本申请不意图被限制到在此示出的方面，而是按照与在此公开的原理和新颖的特征一致的最宽范围。为了例示和描述的目的已经给出了以上描述。此外，此描述不意图将本申请的实施例限制到在此公开的形式。尽管以上已经讨论了多个示例方面和实施例，但是本领域技术人员将认识到其某些变型、修改、改变、添加和子组合。
