标题title
一种基于LoRa的农机作业信息远距离传输方法
摘要abst
本发明公开一种基于LoRa的农机作业信息远距离传输方法，包括利用安装在农机上的采集模块采集土壤湿度、土壤温度、土壤PH值、农机振动值、土壤深度值和土壤行间距值的数据信息、设置LoRa模块无线参数，然后从采集模块中读取采集的数据信息，并使用CSS技术将其调制为chirp信号，信号测试阶段后，数据接收模块在测试阶段后对相位进行优化，接收到信号后，对数据信号进行解码后接收数据，该种基于LoRa的农机作业信息远距离传输方法，提高可接收信号的抗干扰性且提高了信号的强度。
权利要求书clms
1.一种基于LoRa的农机作业信息远距离传输方法，其特征在于，包括：S1、利用安装在农机上的采集模块采集土壤湿度、土壤温度、土壤PH值、农机振动值、土壤深度值和土壤行间距值的数据信息；S2、设置LoRa模块无线参数，然后从采集模块中读取采集的数据信息，并使用CSS技术将其调制为chirp信号，最后将信号传输到数据接收模块；S3、数据接收模块在测试阶段后对相位进行优化，通过解码LoRa模块发送的数据信号，得到数据信息；所述数据接收模块为线性天线阵列，且该线性天线阵列包括多个排列在一条直线上且均匀分布的天线元件；其中，线性天线阵列在接收LoRa模块发送的信号时，优化每个天线元素的相位来实现波束成形，将天线的主要接收方向调整到LoRa模块信号源；其中，通过建立问题模型以优化每个天线元素的相位，且通过IBPSO-GA寻优算法来获得问题模型的最优解，具体问题模型如下： 其中y是接收信号强度，s是能量波形，d为传输距离，α是衰减系数，a服从瑞利分布，N为天线元件个数，是初始角度，取值范围是/＞，/＞是优化目标取值范围是，使用IBPSO-GA寻优算法来找出在约束条件下接收信号强度最大时的/＞值。2.根据权利要求1所述的一种基于LoRa的农机作业信息远距离传输方法，其特征在于，所述采集模块包括安装在农机上的土壤湿度传感器、土壤温度传感器、PH传感器、振动传感器、深度传感器以及行间传感器。3.根据权利要求1所述的一种基于LoRa的农机作业信息远距离传输方法，其特征在于，所述线性天线阵列在接收LoRa模块发送的信号时，优化每个天线元素的相位的具体步骤如下：a、构建适应度函数，按照需求对粒子进行初始化，包括粒子速度和粒子位置，对每个已生成的粒子按照适应度函数计算相应的适应度；b、根据已经计算出的适应度评价出个体最佳粒子以及全局最佳粒子；c、根据权重更新的公式更新动态权重，权重更新的公式如下：；其中w是当前迭代中使用的动态惯性权重，是初始的最大权重，/＞是最小权重，/＞是当前迭代的次数，/＞是BPSO算法的最大迭代次数；d、根据动态惯性权重以及基本求解算法、sigmoid函数以及位置算法更新粒子速度和位置；e、计算更新后的粒子适应度，重新的选出个体最佳粒子和全局最佳粒子；f、按照需求选择出一定数量的个体作为父代，并进行交叉的相关操作，按照需求选择出一定数量的个体作为父代，并进行变异的相关操作；g、新生成粒子进行适应度计算，根据结果更新粒子并重新选出个体最佳粒子和全局最佳粒子；h、依照结束条件进行判断，满足结束条件结束算法；若不满足重复执行步骤d-g直到满足条件。4.根据权利要求3所述的一种基于LoRa的农机作业信息远距离传输方法，其特征在于，所述基本求解算法的计算公式如下：；；式中：表示第i个粒子在第t次的移动速度；/＞表示第i个粒子在第t次粒子所在的位置；/＞表示第i个粒子在第t+1次所在的位置；/＞、/＞为粒子的学习因子；/＞、/＞为分布在的随机数；/＞为第i个粒子历史最优解；/＞为当前历史最优解。5.根据权利要求4所述的一种基于LoRa的农机作业信息远距离传输方法，其特征在于，所述sigmoid函数的计算公式如下：。6.根据权利要求4所述的一种基于LoRa的农机作业信息远距离传输方法，其特征在于，所述位置算法计算公式如下：。
说明书desc
技术领域本发明涉及农业作业信息传输技术领域，具体为一种基于LoRa的农机作业信息远距离传输方法。背景技术现有的农机作业信息远距离传输技术主要有卫星通信技术、LPWAN技术、蜂窝网络技术。卫星通信技术：农机终端设备使用卫星通信模块将编码后的数据发送到卫星，卫星接收到数据后将其中继到地面控制站。LPWAN技术：农机终端设备使用LPWAN通信模块将编码后的数据传输到LPWAN网络。在LPWAN网络中存在多个基站和网关，它们用于接收从终端设备传输的数据。这些基站和网关通常分布在农场内或附近，以确保覆盖范围。蜂窝网络技术：通过农机终端设备上的蜂窝通信模块建立与蜂窝网络的连接，在蜂窝网络建立通信通道后，数据被传输到蜂窝网络，最终通过网络中的各种中继设备和服务器到达地面控制站。上述技术均实现了农机作业信息的远距离传输，但仍存在一些问题：1、卫星通信系统的建设、维护和运营成本通常很高。这使得卫星通信不适用于小型农场。此外由于需要将信号从地球发送到卫星，然后再返回地球，使得卫星通信的信号传输存在一定的延迟，无法实时的更新农机信息。2、LPWAN技术通常提供较低的带宽，适用于传输小量数据，如传感器数据。无法传递大型数据如高清视频。此外，由于低功耗的特性，LPWAN设备通常以较低的传输速率工作。3、蜂窝网络通信同卫星通信技术一样存在成本较高的问题，数据使用量较大的用户可能会面临高额费用。此外随着蜂巢网络用户的增加，某些地区的频谱会变得拥挤，导致信号的性能下降。发明内容本部分的目的在于概述本发明的实施方式的一些方面以及简要介绍一些较佳实施方式。在本部分以及本申请的说明书摘要和发明名称中可能会做些简化或省略以避免使本部分、说明书摘要和发明名称的目的模糊，而这种简化或省略不能用于限制本发明的范围。因此，本发明的目的是提供一种基于LoRa的农机作业信息远距离传输方法，提高可接收信号的抗干扰性且提高了信号的强度。为解决上述技术问题，根据本发明的一个方面，本发明提供了如下技术方案：一种基于LoRa的农机作业信息远距离传输方法，其包括：S1、利用安装在农机上的采集模块采集土壤湿度、土壤温度、土壤PH值、农机振动值、土壤深度值和土壤行间距值的数据信息；S2、设置LoRa模块无线参数，然后从采集模块中读取采集的数据信息，并使用CSS技术将其调制为chirp信号，最后将信号传输到数据接收模块；S3、数据接收模块在测试阶段后对相位进行优化，通过解码LoRa模块发送的数据信号，得到数据信息。作为本发明所述的一种基于LoRa的农机作业信息远距离传输方法的一种优选方案，其中，所述采集模块包括安装在农机上的土壤湿度传感器、土壤温度传感器、PH传感器、振动传感器、深度传感器以及行间传感器。作为本发明所述的一种基于LoRa的农机作业信息远距离传输方法的一种优选方案，其中，所述数据接收模块为线性天线阵列，且该线性天线阵列包括多个排列在一条直线上且均匀分布的天线元件；其中，线性天线阵列在接收LoRa模块发送的信号时，优化每个天线元素的相位来实现波束成形，将天线的主要接收方向调整到LoRa模块信号源。作为本发明所述的一种基于LoRa的农机作业信息远距离传输方法的一种优选方案，其中，所述线性天线阵列在接收LoRa模块发送的信号时，优化每个天线元素的相位的具体步骤如下：a、构建适应度函数，按照需求对粒子进行初始化，包括粒子速度和粒子位置，对每个已生成的粒子按照适应度函数计算相应的适应度；b、根据已经计算出的适应度评价出个体最佳粒子以及全局最佳粒子；c、根据权重更新的公式更新动态权重，权重更新的公式如下：；其中w是当前迭代中使用的动态惯性权重，是初始的最大权重，/＞是最小权重，/＞是当前迭代的次数，/＞是BPSO算法的最大迭代次数；d、根据动态惯性权重以及基本求解算法、sigmoid函数以及位置算法更新粒子速度和位置；e、计算更新后的粒子适应度，重新的选出个体最佳粒子和全局最佳粒子；f、按照需求选择出一定数量的个体作为父代，并进行交叉的相关操作，按照需求选择出一定数量的个体作为父代，并进行变异的相关操作；g、新生成粒子进行适应度计算，根据结果更新粒子并重新选出个体最佳粒子和全局最佳粒子；h、依照结束条件进行判断，满足结束条件结束算法；若不满足重复执行步骤d-g直到满足条件。作为本发明所述的一种基于LoRa的农机作业信息远距离传输方法的一种优选方案，其中，所述基本求解算法的计算公式如下：；；式中：表示第i个粒子在第t次的移动速度；/＞表示第i个粒子在第t次粒子所在的位置；/＞表示第i个粒子在第t+1次所在的位置；/＞、/＞为粒子的学习因子；/＞、/＞为分布在的随机数；/＞为第i个粒子历史最优解；/＞为当前历史最优解。作为本发明所述的一种基于LoRa的农机作业信息远距离传输方法的一种优选方案，其中，所述sigmoid函数的计算公式如下：。作为本发明所述的一种基于LoRa的农机作业信息远距离传输方法的一种优选方案，其中，所述位置算法计算公式如下：。与现有技术相比，本发明具有的有益效果是：该种均匀线性阵列与LoRa技术相结合的农机作业信息传输方法，克服了LoRa技术易受干扰、信号强度低、没有明确方向性的缺陷。通过LoRa技术调制后以CSS信号的形式发送到地面控制站，再由接收端部署的线性阵列天线以波束成形的方式接收，这会使接收信号抗干扰性更强，提高了信号的强度和且本发明所采用的IBPSO-GA优化算法，可以找出在约束条件下接收信号强度最大时的模型参数值。附图说明为了更清楚地说明本发明实施方式的技术方案，下面将结合附图和详细实施方式对本发明进行详细说明，显而易见地，下面描述中的附图仅仅是本发明的一些实施方式，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其它的附图。其中：图1为本发明一种基于LoRa的农机作业信息远距离传输方法的流程图；图2为本发明一种基于LoRa的农机作业信息远距离传输方法的均匀线性阵列与LoRa模块传输场景示意图；图3为本发明一种基于LoRa的农机作业信息远距离传输方法提供的优化每个天线元素的相位的流程图。具体实施方式为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图对本发明的具体实施方式做详细的说明。其次，本发明结合示意图进行详细描述，在详述本发明实施方式时，为便于说明，表示器件结构的剖面图会不依一般比例作局部放大，而且所述示意图只是示例，其在此不应限制本发明保护的范围。此外，在实际制作中应包含长度、宽度及深度的三维空间尺寸。为使本发明的目的、技术方案和优点更加清楚，下面将结合附图对本发明的实施方式作进一步地详细描述。本发明提供一种基于LoRa的农机作业信息远距离传输方法，提高可接收信号的抗干扰性且提高了信号的强度。该种基于LoRa的农机作业信息远距离传输方法，如图1所示，具体步骤如下：Step1：数据采集利用安装在农机上的土壤湿度传感器、土壤温度传感器、PH传感器、振动传感器、深度传感器、行间传感器构成的采集模块采集土壤湿度、土壤温度、土壤PH值、农机振动值、土壤深度值和土壤行间距值的数据信息。Step2：数据发送本发明采用ATK-LoRa-01模块，该模块板载SX1278芯片，SX1278芯片是一款功能强大的长距离低功耗无线通信芯片，采用纠错及扩频调制技术，增加了通信链路的覆盖面。ATK-LoRa-01是一款具有低功耗和长距离通信性能的无线通信模块，工作在410-441MHz频段内，内置32个无线通道，每个通道可适配65536个地址；采用USART串口通信，空中速率可调节六个等级。该模块为六引脚，引脚功能描述如表1。表1 LoRa模块引脚说明；首先设置LoRa模块无线参数，再从传感器读取数据，并使用CSS技术将其调制为chirp信号，最后将信号传输到接收端。Step3：数据接收在实际应用中，为适应不同通信需求提出了许多不同形状的天线阵列，考虑到地面控制站距离田地较远，且位置固定的因素，本发明选用均匀线性阵列天线作为信号的接收端，均匀线性天线阵列中，天线元件以相等的间隔沿一条直线排列。如图2所示。本方法使用LoRa技术发送信号，是因为其具有卓越的通信范围，满足农场到地面控制站之间的通信需求，另外LoRa设备采用低功耗设计，即使使用电池供电也可以长时间的运行，方便用户使用以及维护。其次，LoRa设备相对廉价，降低了部署和维护的成本。最重要的是LoRa技术的开放性使得各种设备能够遵循相同的通信标准，使它能够可以灵活适配各种接收设备。不过当前LoRa技术仍然具有一定的局限性，比如由于其低功耗的特性，LoRa技术的信号传输速率较低，并且随着LoRa技术的不断发展，LoRa设备和网络部署不断增多，相互之间会出现一定的频谱干扰。针对以上问题，本发明提出了一种通过LoRa技术发送信号，再由接收端处的线性阵列天线对信号进行接收的方法。线性阵列天线可以调整每个天线元素的相位来实现波束成形，将天线的主要接收方向调整到特定目标信号源方向，这样不仅能提高通信系统的可靠性和鲁棒性，还能减少来自其他方向的干扰，提高接收信号强度和质量。由此可见，线性阵列天线与LoRa技术的结合，解决了LoRa技术易受干扰、信号速率低、没有明确方向性的缺陷。线性阵列天线需要通过调整相位和振幅来实现波束成形，本发明针对如何优化相位使得线性阵列天线接收信号强度最大化的问题建立模型，并提出了一种IBPSO-GA寻优算法来获得问题模型的最优解。具体问题模型如下： 其中y是接收信号强度，s是能量波形，d为传输距离，α是衰减系数，a服从瑞利分布，N为天线元件个数，是初始角度，取值范围是/＞，/＞是优化目标取值范围是。使用IBPSO-GA寻优算法来找出在约束条件下接收信号强度最大时的/＞值。PSO算法是在连续区域内对所求问题进行优化求解的一种算法，粒子群中的每一个粒子个体均表示一种可行的解决方案，其算法原理是通过粒子之间的简单行为，经过交互得出最优解，具有较快的收敛效率和局部搜索能力。其基本求解计算表达式如下：式中：表示第i个粒子在第t次的移动速度；/＞表示第i个粒子在第t次粒子所在的位置；/＞表示第i个粒子在第t+1次所在的位置；/＞、/＞为粒子的学习因子；、/＞为分布在的随机数；/＞为第i个粒子历史最优解；/＞为当前历史最优解。BPSO算法是采用二进制编码0或1对粒子中某一维度的状态进行表示，速度更新公式通基本粒子群算法的速度更新公式相同。位置更新公式则是使用sigmoid函数将速度值映射到区间，以此来表示取1的概率。通过rand随机数与sigmoid函数映射之后的值进行比较，得到位置的具体值。下式分别为sigmoid函数以及位置更新公式：IBPSO算法是在BPSO算法的每次迭代中都根据一定规则来更新权重值，有助于提高算法的全局收敛性，减少陷入局部最优解的可能性。权重更新的公式如下：其中w是当前迭代中使用的动态惯性权重，w_max是初始的最大权重，w_min是最小权重，是当前迭代的次数，/＞是BPSO算法的最大迭代次数。GA算法借鉴了达尔文的进化论和孟德尔的遗传学说，是通过模拟生物在自然环境中的遗传和进化的过程而形成的自适应全局优化搜索算法，具有全局搜索能力强，局部搜索能力较弱的特点。根据GA和IBPSO的特点，在IBPSO的基础上融入GA的方法，融合两种算法的优点并弥补相应不足，得到了一种整体性能更优的混合离散粒子群算法,其步骤如下：1）构建适应度函数；2）按照需求对粒子进行初始化，包括粒子速度和粒子位置，对每个已生成的粒子按照适应度函数计算相应的适应度；3）根据已经计算出的适应度评价出个体最佳粒子以及全局最佳粒子；4）根据公式更新动态权重；5）根据动态惯性权重以及公式、、更新粒子速度和位置；6）计算更新后的粒子适应度；7）重新的选出个体最佳粒子和全局最佳粒子；8）按照需求选择出一定数量的个体作为父代，并进行交叉的相关操作；9）按照需求选择出一定数量的个体作为父代，并进行变异的相关操作；10）对新生成粒子进行适应度计算，根据结果更新粒子并重新选出个体最佳粒子和全局最佳粒子；11）依照结束条件进行判断，满足结束条件结束算法；若不满足重复执行步骤 5）、6）、7）、8）、9）、10）直到满足条件。虽然在上文中已经参考实施方式对本发明进行了描述，然而在不脱离本发明的范围的情况下，可以对其进行各种改进并且可以用等效物替换其中的部件。尤其是，只要不存在结构冲突，本发明所披露的实施方式中的各项特征均可通过任意方式相互结合起来使用，在本说明书中未对这些组合的情况进行穷举性的描述仅仅是出于省略篇幅和节约资源的考虑。因此，本发明并不局限于文中公开的特定实施方式，而是包括落入权利要求的范围内的所有技术方案。
