标题title
一种自适应光储充系统的运行策略方法
摘要abst
本发明涉及电能存储技术领域，具体涉及一种自适应光储充系统的运行策略方法，包括：根据每个环境因素数据序列与历史电量数据序列之间的相关系数、历史电量数据序列和若干个环境因素数据序列中相邻数据之间的差异，获得每种环境因素对历史电量数据的影响程度；根据每个枝节点的数据序列中相邻数据的分布和所有数据的信息熵、所有叶子节点的数据集合中所有数据的信息熵、每种环境因素对历史电量数据的影响程度，获得每个决策树调整后的高度；根据每个决策树调整后的高度进行自适应光储充系统的运行策略的调整。本发明优化了决策树的高度，提高了对电量生产预测的准确性，增强了光储充系统的运行策略的精确性。
权利要求书clms
1.一种自适应光储充系统的运行策略方法，其特征在于，该方法包括以下步骤：采集所有时刻的历史电量数据，组成初始历史电量数据序列；采集影响电能生产的所有时刻若干种环境因素数据，组成若干个初始环境因素数据序列；对初始历史电量数据序列和若干个初始环境因素数据序列进行平滑预处理，得到平滑后的历史电量数据序列和若干个环境因素数据序列，根据每个环境因素数据序列与历史电量数据序列之间的相关系数、历史电量数据序列和若干个环境因素数据序列中相邻数据之间的差异，获得每种环境因素对历史电量数据的影响程度；获取每个决策树中每个枝节点的数据序列和所有叶子节点的数据集合，根据每个枝节点的数据序列中相邻数据的分布和每个枝节点的数据序列中的所有数据的信息熵、所有叶子节点的数据集合中所有数据的信息熵、每种环境因素对历史电量数据的影响程度，对初始决策树高度的参数进行修正，获得每个决策树调整后的高度；根据每个决策树的最终高度进行自适应光储充系统的运行策略的调整。2.根据权利要求1所述一种自适应光储充系统的运行策略方法，其特征在于，所述对初始历史电量数据序列和若干个初始环境因素数据序列进行平滑预处理，得到平滑后的历史电量数据序列和若干个环境因素数据序列，包括的具体步骤如下：通过移动平均法对初始历史电量数据序列进行平滑，得到平滑后的历史电量数据序列；通过移动平均法对每个初始环境因素数据序列进行平滑，得到平滑后的每个环境因素数据序列。3.根据权利要求1所述一种自适应光储充系统的运行策略方法，其特征在于，所述根据每个环境因素数据序列与历史电量数据序列之间的相关系数、历史电量数据序列和若干个环境因素数据序列中相邻数据之间的差异，获得每种环境因素对历史电量数据的影响程度，包括的具体步骤如下：将历史电量数据序列和若干个环境因素数据序列，记为样本数据序列；以每个样本数据序列中任意一个时刻的数据为局部窗口中心，以A为局部窗口大小，获得每个样本数据序列中每个时刻的数据的局部窗口，其中，A为预设参数；根据每个样本数据序列中数据的分布和每个样本数据序列中每个时刻的数据的局部窗口中相邻数据之间的差异，获得每个样本数据序列在每个时刻的数据波动程度；根据每个环境因素数据序列和历史电量数据序列之间的相关系数，每个环境因素数据序列和历史电量数据序列在相同时刻的数据波动程度的差异，获得每个环境因素对历史电量数据的影响程度。4.根据权利要求3所述一种自适应光储充系统的运行策略方法，其特征在于，所述根据每个样本数据序列中数据的分布和每个样本数据序列中每个时刻的数据的局部窗口中相邻数据之间的差异，获得每个样本数据序列在每个时刻的数据波动程度，包括的具体步骤如下：将每个样本数据序列中每个时刻的数据与每个样本数据序列中所有时刻的数据的均值之间的差值的平方，记为每个样本数据序列在每个时刻的第一波动值；将每个样本数据序列中每个时刻的数据的局部窗口内所有相邻时刻的数据差异的均值的平方，记为每个样本数据序列在每个时刻的第二波动值，其中，差异表示差值的绝对值；用每个样本数据序列在每个时刻的第一波动值/＞和每个样本数据序列在每个时刻的第二波动值/＞，将/＞作为每个样本数据序列在每个时刻的数据波动程度。5.根据权利要求3所述一种自适应光储充系统的运行策略方法，其特征在于，所述根据每个环境因素数据序列和历史电量数据序列之间的相关系数，每个环境因素数据序列和历史电量数据序列在相同时刻的数据波动程度的差异，获得每个环境因素对历史电量数据的影响程度，包括的具体步骤如下：根据皮尔逊相关系数获取每个环境因素数据序列和历史电量数据序列之间的相关系数；将每个环境因素数据序列在每个时刻的数据波动程度和历史电量数据序列在每个时刻的数据波动程度之间的差异，作为每个时刻的第三波动值，其中，差异表示差值的绝对值；将每个环境因素数据序列在每个时刻的数据波动程度和历史电量数据序列在每个时刻的数据波动程度之间的乘积，作为每个时刻的第四波动值；将每个时刻的第四波动值除以每个时刻的第三波动值的结果作为每个时刻的第五波动值；将所有时刻的第五波动值的均值、每个环境因素数据序列和历史电量数据序列之间的相关系数的绝对值的乘积作为每个环境因素对历史电量数据的影响程度。6.根据权利要求1所述一种自适应光储充系统的运行策略方法，其特征在于，所述获取每个决策树中每个枝节点的数据序列和所有叶子节点的数据集合，包括的具体步骤如下：每个决策树中每个枝节点中的所有数据，记为每个枝节点的数据集合，按照从大到小的顺序对每个枝节点的数据集合中的所有数据进行排序，得到每个枝节点的数据序列；将每个决策树的所有叶子节点的数据组成一个数据集合，记为所有叶子节点的数据集合。7.根据权利要求1所述一种自适应光储充系统的运行策略方法，其特征在于，所述根据每个枝节点的数据序列中相邻数据的分布和每个枝节点的数据序列中的所有数据的信息熵、所有叶子节点的数据集合中所有数据的信息熵、每种环境因素对历史电量数据的影响程度，对初始决策树高度的参数进行修正，获得每个决策树调整后的高度，包括的具体步骤如下：根据每个枝节点的数据序列中所有数据的信息熵和相邻数据之间的差异，获得每个枝节点的可压缩程度；根据每个决策树的每个枝节点的可压缩程度和所有叶子节点的数据集合中数据的信息熵，对初始决策树高度的参数进行修正，获得每个决策树的最终高度。8.根据权利要求7所述一种自适应光储充系统的运行策略方法，其特征在于，所述根据每个枝节点的数据序列中所有数据的信息熵和相邻数据之间的差异，获得每个枝节点的可压缩程度，包括的具体步骤如下：将每个枝节点的数据序列中所有相邻数据差值的均值，记为每个枝节点的第一特征，根据每个枝节点的数据序列中每个数据类别的数量占比，获得每个枝节点的数据序列中数据的信息熵，其中，每个枝节点的数据序列中将相同的数据划分为一个类别；将每个枝节点的第一特征、每个枝节点的数据序列中数据的信息熵、每个枝节点的数据序列中的极差值和每个枝节点对应的划分环境因素对历史电量数据的影响程度的乘积结果，作为每个枝节点的可压缩程度。9.根据权利要求7所述一种自适应光储充系统的运行策略方法，其特征在于，所述根据每个决策树的每个枝节点的可压缩程度和所有叶子节点的数据集合中数据的信息熵，对初始决策树高度的参数进行修正，获得每个决策树的最终高度，包括的具体步骤如下：对每个决策树中所有枝节点的可压缩程度进行线性归一化，将归一化后每个枝节点的可压缩程度记为每个枝节点的第二特征，对每个决策树中所有枝节点的第二特征进行相乘，得到每个决策树的第三特征；根据所有叶子节点的数据集合中每个数据类别的数量占比，获得每个决策树叶子节点的数据集合中所有数据的信息熵，其中，所有叶子节点的数据集合中将相同的数据划分为一个类别；将/＞记为每个决策树的第四特征；将每个决策树的第三特征、每个决策树的第四特征和初始决策树高度的参数的乘积结果，记为每个决策树的第五特征，再对每个决策树的第五特征进行向上取整，得到每个决策树的最终高度。10.根据权利要求1所述一种自适应光储充系统的运行策略方法，其特征在于，所述根据每个决策树调整后的高度进行自适应光储充系统的运行策略的调整，包括的具体步骤如下：根据每个决策树的最终高度的获取方法得到每个训练的决策树的最终高度，将所有训练的决策树的最终高度的均值的向下取整的整数作为决策树的目标高度；通过决策树的目标高度构建最终决策树，通过最终决策树进行电量数据的预测，获得预测的数据；根据预测的数据通过计划曲线策略以及波谷策略对电能进行不同时间段的自适应调整。
说明书desc
技术领域本发明涉及电能存储技术领域，具体涉及一种自适应光储充系统的运行策略方法。背景技术光储充系统是一种创新的能源储存和充电技术，它利用光能转化为电能，并将多余的电能储存起来，以备不时之需。光储充系统的核心部分是光电池板，它能够将太阳光转化为直流电能，再通过逆变器将直流电转化为交流电汇入电网中。由于光能发电受光照强度和温度等多个因素的影响，而不同时间的光照强度和温度也是不同的，因此不同时间通过光能生产出的电量不相同，则通过随机森林算法根据历史生产出的电量数据和各种影响因素对未来生产出的电量进行预测，根据预测结果来优化光储充系统。在常规的技术中可以通过随机森林算法进行电量的预测，但是在使用随机森林算法进行对电量进行预测时，随机森林算法中决策树的深度是自行设置的，过深的决策树容易过拟合，即在训练数据上表现良好，但在未见过的数据上表现较差；相反，过浅的决策树可能无法捕捉数据中的复杂关系，导致欠拟合，因此决策数过深和过浅都会降低对电量预测的准确性，导致光储充系统的运行策略的精确性也会降低。发明内容本发明提供一种自适应光储充系统的运行策略方法，以解决现有的问题。本发明的一种自适应光储充系统的运行策略方法采用如下技术方案：本发明一个实施例提供了一种自适应光储充系统的运行策略方法，该方法包括以下步骤：采集所有时刻的历史电量数据，组成初始历史电量数据序列；采集影响电能生产的所有时刻若干种环境因素数据，组成若干个初始环境因素数据序列；对初始历史电量数据序列和若干个初始环境因素数据序列进行平滑预处理，得到平滑后的历史电量数据序列和若干个环境因素数据序列，根据每个环境因素数据序列与历史电量数据序列之间的相关系数、历史电量数据序列和若干个环境因素数据序列中相邻数据之间的差异，获得每种环境因素对历史电量数据的影响程度；获取每个决策树中每个枝节点的数据序列和所有叶子节点的数据集合，根据每个枝节点的数据序列中相邻数据的分布和每个枝节点的数据序列中的所有数据的信息熵、所有叶子节点的数据集合中所有数据的信息熵、每种环境因素对历史电量数据的影响程度，对初始决策树高度的参数进行修正，获得每个决策树调整后的高度；根据每个决策树的最终高度进行自适应光储充系统的运行策略的调整。进一步地，所述对初始历史电量数据序列和若干个初始环境因素数据序列进行平滑预处理，得到平滑后的历史电量数据序列和若干个环境因素数据序列，包括的具体步骤如下：通过移动平均法对初始历史电量数据序列进行平滑，得到平滑后的历史电量数据序列；通过移动平均法对每个初始环境因素数据序列进行平滑，得到平滑后的每个环境因素数据序列。进一步地，所述根据每个环境因素数据序列与历史电量数据序列之间的相关系数、历史电量数据序列和若干个环境因素数据序列中相邻数据之间的差异，获得每种环境因素对历史电量数据的影响程度，包括的具体步骤如下：将历史电量数据序列和若干个环境因素数据序列，记为样本数据序列；以每个样本数据序列中任意一个时刻的数据为局部窗口中心，以A为局部窗口大小，获得每个样本数据序列中每个时刻的数据的局部窗口，其中，A为预设参数；根据每个样本数据序列中数据的分布和每个样本数据序列中每个时刻的数据的局部窗口中相邻数据之间的差异，获得每个样本数据序列在每个时刻的数据波动程度；根据每个环境因素数据序列和历史电量数据序列之间的相关系数，每个环境因素数据序列和历史电量数据序列在相同时刻的数据波动程度的差异，获得每个环境因素对历史电量数据的影响程度。进一步地，所述根据每个样本数据序列中数据的分布和每个样本数据序列中每个时刻的数据的局部窗口中相邻数据之间的差异，获得每个样本数据序列在每个时刻的数据波动程度，包括的具体步骤如下：将每个样本数据序列中每个时刻的数据与每个样本数据序列中所有时刻的数据的均值之间的差值的平方，记为每个样本数据序列在每个时刻的第一波动值；将每个样本数据序列中每个时刻的数据的局部窗口内所有相邻时刻的数据差异的均值的平方，记为每个样本数据序列在每个时刻的第二波动值，其中，差异表示差值的绝对值；用每个样本数据序列在每个时刻的第一波动值/＞和每个样本数据序列在每个时刻的第二波动值/＞，将/＞作为每个样本数据序列在每个时刻的数据波动程度。进一步地，所述根据每个环境因素数据序列和历史电量数据序列之间的相关系数，每个环境因素数据序列和历史电量数据序列在相同时刻的数据波动程度的差异，获得每个环境因素对历史电量数据的影响程度，包括的具体步骤如下：根据皮尔逊相关系数获取每个环境因素数据序列和历史电量数据序列之间的相关系数；将每个环境因素数据序列在每个时刻的数据波动程度和历史电量数据序列在每个时刻的数据波动程度之间的差异，作为每个时刻的第三波动值，其中，差异表示差值的绝对值；将每个环境因素数据序列在每个时刻的数据波动程度和历史电量数据序列在每个时刻的数据波动程度之间的乘积，作为每个时刻的第四波动值；将每个时刻的第四波动值除以每个时刻的第三波动值的结果作为每个时刻的第五波动值；将所有时刻的第五波动值的均值、每个环境因素数据序列和历史电量数据序列之间的相关系数的绝对值的乘积作为每个环境因素对历史电量数据的影响程度。进一步地，所述获取每个决策树中每个枝节点的数据序列和所有叶子节点的数据集合，包括的具体步骤如下：每个决策树中每个枝节点中的所有数据，记为每个枝节点的数据集合，按照从大到小的顺序对每个枝节点的数据集合中的所有数据进行排序，得到每个枝节点的数据序列；将每个决策树的所有叶子节点的数据组成一个数据集合，记为所有叶子节点的数据集合。进一步地，所述根据每个枝节点的数据序列中相邻数据的分布和每个枝节点的数据序列中的所有数据的信息熵、所有叶子节点的数据集合中所有数据的信息熵、每种环境因素对历史电量数据的影响程度，对初始决策树高度的参数进行修正，获得每个决策树调整后的高度，包括的具体步骤如下：根据每个枝节点的数据序列中所有数据的信息熵和相邻数据之间的差异，获得每个枝节点的可压缩程度；根据每个决策树的每个枝节点的可压缩程度和所有叶子节点的数据集合中数据的信息熵，对初始决策树高度的参数进行修正，获得每个决策树的最终高度。进一步地，所述根据每个枝节点的数据序列中所有数据的信息熵和相邻数据之间的差异，获得每个枝节点的可压缩程度，包括的具体步骤如下：将每个枝节点的数据序列中所有相邻数据差值的均值，记为每个枝节点的第一特征，根据每个枝节点的数据序列中每个数据类别的数量占比，获得每个枝节点的数据序列中数据的信息熵，其中，每个枝节点的数据序列中将相同的数据划分为一个类别；将每个枝节点的第一特征、每个枝节点的数据序列中数据的信息熵、每个枝节点的数据序列中的极差值和每个枝节点对应的划分环境因素对历史电量数据的影响程度的乘积结果，作为每个枝节点的可压缩程度。进一步地，所述根据每个决策树的每个枝节点的可压缩程度和所有叶子节点的数据集合中数据的信息熵，对初始决策树高度的参数进行修正，获得每个决策树的最终高度，包括的具体步骤如下：对每个决策树中所有枝节点的可压缩程度进行线性归一化，将归一化后每个枝节点的可压缩程度记为每个枝节点的第二特征，对每个决策树中所有枝节点的第二特征进行相乘，得到每个决策树的第三特征；根据所有叶子节点的数据集合中每个数据类别的数量占比，获得每个决策树叶子节点的数据集合中所有数据的信息熵，其中，所有叶子节点的数据集合中将相同的数据划分为一个类别；将/＞记为每个决策树的第四特征；将每个决策树的第三特征、每个决策树的第四特征和初始决策树高度的参数的乘积结果，记为每个决策树的第五特征，再对每个决策树的第五特征进行向上取整，得到每个决策树的最终高度。进一步地，所述根据每个决策树调整后的高度进行自适应光储充系统的运行策略的调整，包括的具体步骤如下：根据每个决策树的最终高度的获取方法得到每个训练的决策树的最终高度，将所有训练的决策树的最终高度的均值的向下取整的整数作为决策树的目标高度；通过决策树的目标高度构建最终决策树，通过最终决策树进行电量数据的预测，获得预测的数据；根据预测的数据通过计划曲线策略以及波谷策略对电能进行不同时间段的自适应调整。本发明的技术方案的有益效果是：根据每个环境因素数据序列与历史电量数据序列之间的相关系数、历史电量数据序列和若干个环境因素数据序列中相邻数据之间的差异，获得每种环境因素对历史电量数据的影响程度，确定出了各种环境因素对历史电量数据的影响差异；根据每个枝节点的数据序列中相邻数据的分布和每个枝节点的数据序列中的所有数据的信息熵、所有叶子节点的数据集合中所有数据的信息熵、每种环境因素对历史电量数据的影响程度，对初始决策树高度的参数进行修正，获得每个决策树调整后的高度；根据每个决策树调整后的高度进行自适应光储充系统的运行策略的调整，优化了决策树的高度，提高了对电量生产预测的准确性，增强了光储充系统的运行策略的精确性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明一种自适应光储充系统的运行策略方法的步骤流程图；图2为本发明一种自适应光储充系统的运行策略方法的枝节点数据集合划分示意图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种自适应光储充系统的运行策略方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。下面结合附图具体的说明本发明所提供的一种自适应光储充系统的运行策略方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种自适应光储充系统的运行策略方法的步骤流程图，该方法包括以下步骤：步骤S001：采集历史电量数据和影响电能生产的各种环境因素数据。需要说明的是，为了对不同时间生产出的电量进行预测，则需要采集历史生产出的电量数据；又因为光能发电受光照强度和温度等多个因素的影响，而不同时间的光照强度和温度也是不同的，因此不同时间通过光能生产出的电量不相同，因此还需要采集各种环境因素数据。具体地，以三十分钟为时间间隔，采集最近一个月的生产出的历史电量数据、光照强度数据和环境温度数据，将所有时刻的历史电量数据按照时间顺序组成一组初始历史电量数据序列，将所有时刻的光照强度数据按照时间顺序组成一组初始光照强度数据序列，将所有时刻的环境温度数据按照时间顺序组成一组初始环境温度数据序列。其中，在本实施例中环境因素数据只以光照强度数据和环境温度数据为例进行叙述。其中，历史电量数据通过电表进行采集，光照强度数据通过光照传感器进行采集，环境温度数据通过温度传感器进行采集。至此，得到初始历史电量数据序列、初始光照强度数据序列和初始环境温度数据序列；其中，将初始光照强度数据序列和初始环境温度数据序列，记为初始环境因素数据序列。步骤S002：对初始历史电量数据序列和若干个初始环境因素数据序列进行平滑预处理，根据每个环境因素数据序列与历史电量数据序列之间的相关系数、历史电量数据序列和若干个环境因素数据序列中相邻数据之间的差异，获得每种环境因素对历史电量数据的影响程度。需要说明的是，由于在采集各种环境因素数据时，可能会受到噪声的干扰，因此采集到的各种环境因素数据存在偏差，使得通过有偏差的各种环境因素对历史电量数据进行分析预测时，也会降低预测的准确性。进一步需要说明的是，为了排除噪声的干扰，先对数据进行平滑处理，根据平滑后的数据来分析每个时刻数据的特征。具体地，通过移动平均法对初始历史电量数据序列进行平滑，得到平滑后的历史电量数据序列；通过移动平均法对每个初始环境因素数据序列进行平滑，得到平滑后的每个环境因素数据序列；至此，得到历史电量数据序列、若干个环境因素数据序列；将历史电量数据序列和若干个环境因素数据序列，记为样本数据序列。其中，移动平均法为公知技术，此处不再进行具体赘述。预设一个参数A，其中本实施例以A=5为例进行叙述，本实施例不进行具体限定，其中A可根据具体实施情况而定。以每个样本数据序列中任意一个时刻的数据为局部窗口中心，以A为局部窗口大小，获得每个样本数据序列中每个时刻的数据的局部窗口。根据每个样本数据序列中数据的分布和每个样本数据序列中每个时刻的数据的局部窗口中相邻数据之间的差异，获得每个样本数据序列在每个时刻的数据波动程度，用公式表示为：式中，表示第/＞个样本数据序列中第/＞个时刻的数据，/＞表示第/＞个样本数据序列中所有时刻的数据的均值，/＞表示第/＞个样本数据序列中第/＞个时刻的数据的局部窗口内第/＞个数据，/＞表示第/＞个样本数据序列中第/＞个时刻的数据的局部窗口内第/＞个数据，/＞表示第/＞个样本数据序列中第/＞个时刻的数据波动程度，/＞为绝对值符号，/＞为预设参数，表示每个数据的局部窗口内的数据个数。其中，表示每个样本数据序列中相邻数据之间的差异，当该差异越大，表示对应的数据波动程度越大，当该差异越小，表示对应的数据波动程度越小。表示每个样本数据序列中每个时刻的数据与所有时刻的数据均值之间的差值的平方，当差值的平方越大，表示对应的数据波动程度越大，当差值的平方越小，表示对应的数据波动程度越小。至此，得到每个样本数据序列在每个时刻的数据波动程度。需要说明的是，由于不同环境因素数据对电力数据的影响不同，因此可以根据每种环境因素数据和电力数据之间的关联性、以及同一时刻每种环境因素数据和电力数据的数据波动程度之间的波动差异，来分析每种环境因素数据对电力数据的影响程度。具体地，将光照强度数据序列和环境温度数据序列，记为环境因素数据序列。根据皮尔逊相关系数获取每个环境因素数据序列和历史电量数据序列之间的相关系数；其中，皮尔逊相关系数为已知技术，此处不再进行具体赘述。根据每个环境因素数据序列和历史电量数据序列之间的相关系数，每个环境因素数据序列和历史电量数据序列在相同时刻的数据波动程度的差异，获得每种环境因素对历史电量数据的影响程度，用公式表示为：式中，表示第/＞个环境因素数据序列和历史电量数据序列/＞之间的相关系数，表示第/＞个环境因素数据序列中第/＞个时刻的数据波动程度，/＞表示历史电量数据序列中第/＞个时刻的数据波动程度，/＞表示所有时刻的个数，/＞为绝对值符号，/＞表示第/＞个环境因素对历史电量数据/＞的影响程度。其中，表示第/＞个环境因素数据序列和历史电量数据序列/＞之间的相关系数的绝对值，当相关系数的绝对值越大，说明环境因素对历史电量数据的影响程度越大，当相关系数的绝对值越小，说明环境因素对历史电量数据的影响程度越小。/＞表示每个环境因素数据序列和历史电量数据序列在相同时刻的数据波动程度的差异，当该差异越大，表示环境因素对历史电量数据的影响程度越大，当该差异越小，表示环境因素对历史电量数据的影响程度越大。/＞表示每个环境因素数据序列和历史电量数据序列在相同时刻的数据波动程度的乘积，当两个序列在相同时刻都存在较大的波动时，说明环境因素对历史电量数据的影响程度越大，反之，则说明环境因素对历史电量数据的影响程度越小。至此，得到每种环境因素对历史电量数据的影响程度。步骤S003：获取每个决策树中每个枝节点的数据序列和所有叶子节点的数据集合，根据每个枝节点的数据序列中相邻数据的分布和每个枝节点的数据序列中的所有数据的信息熵、所有叶子节点的数据集合中所有数据的信息熵、每种环境因素对历史电量数据的影响程度，对初始决策树高度的参数进行修正，获得每个决策树的最终高度。需要说明的是，由于在通过随机森林算法进行预测时，首先是需要构建决策树的，决策树的构建先选取一个特征对将历史电量数据划分为两部分或者多部分，每部分中包含若干个数据，其中一部分就是一个枝节点。由于决策数据的深浅都对预测结果有着影响，因此根据每个枝节点中数据的分布差异和数据的信息熵进行分析。其中，一个特征就是一种环境因素。进一步需要说明的是，决策树中有根节点、枝节点和叶子节点，其中，根节点是决策树最顶端的一个节点，叶子节点是决策树最底端的节点，枝节点是决策树中除过根节点和叶子节点之外的所有节点。具体的，以每个决策树为例进行分析，将决策树中每个枝节点中的所有数据，记为每个枝节点的数据集合，按照从大到小的顺序对每个枝节点的数据集合中的所有数据进行排序，得到每个枝节点的数据序列。通过举例子说明每个枝节点的数据集合的分析获取过程：先获取若干个时刻的环境温度数据和光伏生产电量数据；。根据环境温度数据对电量数据进行划分的过程如图2所示。根据每个枝节点的数据序列中所有数据的信息熵和相邻数据之间的差异，获得每个枝节点的可压缩程度，用公式表示为：式中，表示第/＞个枝节点的数据序列中的极差值，/＞表示第/＞个枝节点的数据序列中第/＞个数据，/＞表示第/＞个枝节点的数据序列中第/＞个数据，/＞表示每个枝节点的数据序列中所有数据的个数，/＞表示第/＞个枝节点的数据序列中第/＞类数据个数在第/＞个枝节点的数据序列的所有数据中的占比，/＞表示以2为底的对数函数，/＞表示每个枝节点的数据序列中所有数据种类的个数，/＞表示第/＞个枝节点对应的划分特征对历史电量数据的影响程度，/＞表示第/＞个枝节点的可压缩程度。其中，每个枝节点的数据序列中将相同的数据划分为一个类别。其中，枝节点的数据序列中的极差值是最大值减去最小值的结果。其中，表示每个枝节点的数据序列中数据的信息熵，当该信息熵越大，表示枝节点的数据序列的数据集的纯度越低，即说明数据集比较混乱，则对应枝节点的可压缩程度就越大；当该信息熵越小，表示枝节点的数据序列的数据集的纯度越高，即说明数据集越趋近于纯净，则对应枝节点的可压缩程度就越小。/＞表示每个枝节点的数据序列中相邻数据的差值，当相邻数据的差值越大，说明数据之间的差异比较大，数据比较分散，则对应枝节点的可压缩程度就越大；当相邻数据的差值越小，说明数据之间的差异比较小，数据比较集中，则对应枝节点的可压缩程度就越小。当每个枝节点的数据序列中的极差值越大，明数据之间的差异比较大，数据比较分散，则对应枝节点的可压缩程度就越大；当每个枝节点的数据序列中的极差值越小，明数据之间的差异比较小，数据比较集中，则对应枝节点的可压缩程度就越小。/＞表示每种环境因素对历史电量数据影响程度的倒数，当每种环境因素对历史电量数据影响程度越大，则对应枝节点的可压缩程度就越小，当每种环境因素对历史电量数据影响程度越小，则对应枝节点的可压缩程度就越大。至此，得到每个枝节点的可压缩程度。需要说明的是，由于随机森林算法中叶子节点对模型的拟合效果进行评价，因此可以通过所有叶子节点中所有数据的信息熵来进行分析随机森林算法中决策树的深浅。具体地，预设一个初始决策树高度的参数B，其中本实施例以B=10为例进行叙述，本实施例不进行具体限定，其中B可根据具体实施情况而定。将每个决策树的所有叶子节点的数据组成一个数据集合，记为所有叶子节点的数据集合；根据每个决策树的每个枝节点的可压缩程度和所有叶子节点的数据集合中数据的信息熵，对初始决策树高度的参数进行修正，获得每个决策树的最终高度，具体用公式表示为：式中，表示第/＞个决策树的第/＞个枝节点的可压缩程度，/＞表示每个决策树中所有枝节点的总个数，/＞表示第/＞个决策树叶子节点的数据集合中第/＞类数据个数在数据集合的所有数据中的占比，/＞表示以2为底的对数函数，/＞表示所有叶子节点的数据集合中所有数据种类的个数，/＞表示以自然常数为底的指数函数，/＞表示线性归一化函数，/＞表示预设初始决策树高度的参数，/＞表示第/＞个决策树的最终高度，/＞表示向上取整符号。其中，所有叶子节点的数据集合中将相同的数据划分为一个类别。其中，表示所有叶子节点的数据集合中所有数据的信息熵，当该信息熵越大，表示所有叶子节点的数据集合中的数据集的纯度越低，即说明数据集比较混乱，则对应的决策树高度要调整的程度越小；当该信息熵越小，表示所有叶子节点的数据集合中的数据集的纯度越高，即说明数据集越趋近于纯净，则对应的决策树高度要调整的程度越大。当每个决策树的每个枝节点的可压缩程度越大，则对应的决策树高度要调整的程度越大，当每个决策树的每个枝节点的可压缩程度越小，则对应的决策树高度要调整的程度越小。至此，得到每个决策树调整后的高度。需要说明的是，决策树的构建通常通过训练多个决策树得到的，因此通过计算多个训练的决策树调整后的高度获得最后需要构建的决策树的高度。具体地，根据每个决策树的最终高度的获取方法得到每个训练的决策树的最终高度，将所有训练的决策树的最终高度的均值的向下取整的整数作为决策树的目标高度。步骤S004：根据每个决策树的最终高度进行自适应光储充系统的运行策略的调整。通过决策树的目标高度构建最终决策树，通过最终决策树进行电量数据的预测，获得预测的数据；根据预测的数据通过计划曲线策略以及波谷策略对电能进行不同时间段的自适应调整。至此，本实施例完成。需要说明的是，本实施例中所用的模型仅用于表示负相关关系和约束模型输出的结果处于/＞区间内，具体实施时，可替换成具有同样目的的其他模型，本实施例只是以/＞模型为例进行叙述，不对其做具体限定，其中/＞是指该模型的输入。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
