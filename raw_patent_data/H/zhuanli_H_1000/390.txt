标题title
一种减小开关节点频率抖动的方法及电路
摘要abst
本发明公开了一种减小开关节点频率抖动的方法及电路，属于电能变换技术领域，包括分压器、误差放大器、电压电流转换器、斜坡电流注入器、电压叠加器、比较器与触发器，所述分压器的输入端连接所述变换电路的输出电压，所述分压器的输出端连接所述误差放大器的负输入端，所述误差放大器的正输入端连接参考电压，所述误差放大器的输出端连接所述电压电流转换器的输入端，所述电压电流转换器的输出端连接所述斜坡电流注入器与所述电压叠加器，所述电压叠加器连接所述比较器的正输入端，所述比较器的负输入端连接第一电压，所述比较器的输出端连接所述触发器的S端。本发明可以明显减小开关节点的频率抖动。
权利要求书clms
1.一种减小开关节点频率抖动的电路，应用于一变换电路，所述一种减小开关节点频率抖动的电路连接所述变换电路，其特征在于，包括分压器、误差放大器、电压电流转换器、斜坡电流注入器、电压叠加器、比较器与触发器，所述分压器的输入端连接所述变换电路的输出电压，所述分压器的输出端连接所述误差放大器的负输入端，所述误差放大器的正输入端连接参考电压，所述误差放大器的输出端连接所述电压电流转换器的输入端，所述电压电流转换器的输出端连接所述斜坡电流注入器与所述电压叠加器，所述电压叠加器连接所述比较器的正输入端，所述比较器的负输入端连接第一电压，所述比较器的输出端连接所述触发器的S端。2.如权利要求1所述一种减小开关节点频率抖动的电路，其特征在于，还包括导通时间控制器，所述触发器的R端连接所述导通时间控制器，所述导通时间控制器产生所述变换电路的上管导通结束时间。3.如权利要求2所述一种减小开关节点频率抖动的电路，其特征在于，还包括逻辑控制器、第一驱动器与第二驱动器，所述触发器的Q端连接所述逻辑控制器的输入端，所述逻辑控制器的第一输出端连接所述第一驱动器的输入端，所述第一驱动器的输出端驱动所述变换电路的第一开关，所述逻辑控制器的第二输出端连接所述第二驱动器的输入端，所述第二驱动器的输出端驱动所述变换电路的第二开关。4.如权利要求3所述一种减小开关节点频率抖动的电路，其特征在于，所述斜坡电流注入器包括第一运算放大器、第二运算放大器、多个开关、第二电容、第一电阻、第二电阻与第三驱动器，所述第一运算放大器的正输入端连接所述变换电路的输出电压，所述第一运算放大器的输出端连接第三开关的栅极，所述第三开关的源极经过所述第一电阻接地，所述第一运算放大器的负输入端连接所述第三开关的源极，第一电压连接第四开关的源极与第五开关的源极，所述第四开关的栅极连接所述第五开关的栅极，所述第四开关的栅极连接所述第四开关的漏极与所述第三开关的漏极，所述第五开关的漏极连接第六开关的栅极与第七开关的栅极，所述第六开关的漏极连接所述第六开关的栅极，所述第六开关的源极接地，所述第七开关的漏极连接第一电流源，所述第七开关的源极接地，所述第二电容的第一端连接所述第七开关的漏极，所述第二电容的第二端连接所述第七开关的源极，所述第二电容的第一端连接第八开关的漏极，所述第八开关的源极连接所述第二电容的第二端，所述第八开关的栅极连接所述第三驱动器的输出端，所述第三驱动器的输入端连接所述逻辑控制器的第二输出端，所述第八开关的漏极连接所述第二运算放大器的正输入端，所述第二运算放大器的输出端连接第九开关的栅极，所述第二运算放大器的负输入端连接所述第九开关的源极，所述第九开关的源极经过所述第二电阻接地，所述第一电压连接第十开关的源极与第十一开关的源极，所述第十开关的栅极连接所述第十一开关的栅极与所述第十开关的漏极，所述第十一开关的漏极连接所述电压电流转换器的输出端。5.如权利要求4所述一种减小开关节点频率抖动的电路，其特征在于，所述分压器包括第三电阻与第四电阻，所述第三电阻的第一端连接所述变换电路的输出电压，所述第三电阻的第二端连接所述第四电阻的第一端，所述第四电阻的第二端接地，所述第四电阻的第一端连接所述误差放大器的负输入端。6.如权利要求5所述一种减小开关节点频率抖动的电路，其特征在于，所述电压叠加器包括第五电阻，所述第五电阻的第一端连接所述电压电流转换器的输出端，所述第五电阻的第二端连接开关节点电压，所述开关节点为所述第一开关与所述第二开关的连接节点。7.如权利要求6所述一种减小开关节点频率抖动的电路，其特征在于，所述第一电压由第二电流源与第六电阻产生，所述第六电阻的第一端连接所述比较器的负输入端，所述第六电阻的第一端连接所述第二电流源，所述第六电阻的第二端接地。8.如权利要求7所述一种减小开关节点频率抖动的电路，其特征在于，所述电压电流转换器包括第三运算放大器、第七电阻与多个开关，所述误差放大器的输出端连接所述第三运算放大器的正输入端，所述第三运算放大器的输出端连接第十二开关的栅极，所述第三运算放大器的负输入端连接所述第十二开关的源极，所述第十二开关的源极经过所述第七电阻接地，所述第一电压连接第十三开关的源极与第十四开关的源极，所述第十三开关的栅极连接所述第十三开关的漏极与所述第十四开关的栅极，所述第十三开关的漏极连接所述第十二开关的漏极，所述第十四开关的漏极为所述电压电流转换器的输出端。9.如权利要求1所述一种减小开关节点频率抖动的电路，其特征在于，还包括滤波器，所述滤波器连接在所述误差放大器的输出端与地之间。10.一种减小开关节点频率抖动的方法，其特征在于，应用于如权利要求1-9任一项所述一种减小开关节点频率抖动的电路，包括，步骤S1，采样变换电路的输出电压得到反馈电压；步骤S2，将参考电压与反馈电压的差值放大后得到第二电压；步骤S3，将第二电压转换成固定比例的第二电流；步骤S4，在第二开关开启时，将第二电流与斜坡电流叠加后再叠加在开关节点电压上得到第三电压，当第三电压大于第一电压时，驱动变换电路的第一开关导通，第二开关关闭，在第一开关开启阶段，斜坡电流清零；第一开关导通时间结束后，驱动第一开关关闭，第二开关导通。
说明书desc
技术领域本发明涉及电能变换技术领域，且特别是有关于一种减小开关节点频率抖动的方法及电路。背景技术在对BUCK变换电路的控制中通常采用ACOT谷值电流模式，即采用自适应恒定导通时间模式确定BUCK变换电路的上管导通时间Ton，采用谷值电流模式确定上管关闭时间Toff。其中，自适应恒定导通时间模式除了具有传统恒定导通时间模式响应快的优势外，还可以使开关频率较为恒定，便于选择电感与减小系统电磁干扰。谷值电流模式即通过检测下管电流的大小来控制上管关闭时间Toff，当负载重时，上管关闭时间Toff在电感电流较大时结束，即上管关闭时间Toff较短，电感电流增大；当负载轻时，上管关闭时间Toff在电感电流较小时结束，即上管关闭时间Toff较长，电感电流减小。然而，由于下管导通电压变化很小，所以比较器很容易受到干扰，使得上管与下管连接节点即开关节点产生抖动，如图1中波形所示，开关节点电压在某处发生抖动，抖动较大容易导致输出纹波变大，逻辑错乱等问题。此外，在BUCK变换电路的输出电压VOUT较小时，抖动现象更为明显。发明内容本发明旨在提供一种减小开关节点频率抖动的方法及电路。为达到上述目的，本发明技术方案是：一种减小开关节点频率抖动的电路，应用于一变换电路，所述一种减小开关节点频率抖动的电路连接所述变换电路，包括分压器、误差放大器、电压电流转换器、斜坡电流注入器、电压叠加器、比较器与触发器，所述分压器的输入端连接所述变换电路的输出电压，所述分压器的输出端连接所述误差放大器的负输入端，所述误差放大器的正输入端连接参考电压，所述误差放大器的输出端连接所述电压电流转换器的输入端，所述电压电流转换器的输出端连接所述斜坡电流注入器与所述电压叠加器，所述电压叠加器连接所述比较器的正输入端，所述比较器的负输入端连接第一电压，所述比较器的输出端连接所述触发器的S端。进一步地，上述一种减小开关节点频率抖动的电路，还包括导通时间控制器，所述触发器的R端连接所述导通时间控制器，所述导通时间控制器产生所述变换电路的上管导通结束时间。进一步地，上述一种减小开关节点频率抖动的电路，还包括逻辑控制器、第一驱动器与第二驱动器，所述触发器的Q端连接所述逻辑控制器的输入端，所述逻辑控制器的第一输出端连接所述第一驱动器的输入端，所述第一驱动器的输出端驱动所述变换电路的第一开关，所述逻辑控制器的第二输出端连接所述第二驱动器的输入端，所述第二驱动器的输出端驱动所述变换电路的第二开关。在一具体实施例中，上述斜坡电流注入器包括第一运算放大器、第二运算放大器、多个开关、第二电容、第一电阻、第二电阻与第三驱动器，所述第一运算放大器的正输入端连接所述变换电路的输出电压，所述第一运算放大器的输出端连接第三开关的栅极，所述第三开关的源极经过所述第一电阻接地，所述第一运算放大器的负输入端连接所述第三开关的源极，第一电压连接第四开关的源极与第五开关的源极，所述第四开关的栅极连接所述第五开关的栅极，所述第四开关的栅极连接所述第四开关的漏极与所述第三开关的漏极，所述第五开关的漏极连接第六开关的栅极与第七开关的栅极，所述第六开关的漏极连接所述第六开关的栅极，所述第六开关的源极接地，所述第七开关的漏极连接第一电流源，所述第七开关的源极接地，所述第二电容的第一端连接所述第七开关的漏极，所述第二电容的第二端连接所述第七开关的源极，所述第二电容的第一端连接第八开关的漏极，所述第八开关的源极连接所述第二电容的第二端，所述第八开关的栅极连接所述第三驱动器的输出端，所述第三驱动器的输入端连接所述逻辑控制器的第二输出端，所述第八开关的漏极连接所述第二运算放大器的正输入端，所述第二运算放大器的输出端连接第九开关的栅极，所述第二运算放大器的负输入端连接所述第九开关的源极，所述第九开关的源极经过所述第二电阻接地，所述第一电压连接第十开关的源极与第十一开关的源极，所述第十开关的栅极连接所述第十一开关的栅极与所述第十开关的漏极，所述第十一开关的漏极连接所述电压电流转换器的输出端。在一具体实施例中，上述分压器包括第三电阻与第四电阻，所述第三电阻的第一端连接所述变换电路的输出电压，所述第三电阻的第二端连接所述第四电阻的第一端，所述第四电阻的第二端接地，所述第四电阻的第一端连接所述误差放大器的负输入端。在一具体实施例中，上述电压叠加器包括第五电阻，所述第五电阻的第一端连接所述电压电流转换器的输出端，所述第五电阻的第二端连接开关节点电压，所述开关节点为所述第一开关与所述第二开关的连接节点。在一具体实施例中，上述第一电压由第二电流源与第六电阻产生，所述第六电阻的第一端连接所述比较器的负输入端，所述第六电阻的第一端连接所述第二电流源，所述第六电阻的第二端接地。在一具体实施例中，上述电压电流转换器包括第三运算放大器、第七电阻与多个开关，所述误差放大器的输出端连接所述第三运算放大器的正输入端，所述第三运算放大器的输出端连接第十二开关的栅极，所述第三运算放大器的负输入端连接所述第十二开关的源极，所述第十二开关的源极经过所述第七电阻接地，所述第一电压连接第十三开关的源极与第十四开关的源极，所述第十三开关的栅极连接所述第十三开关的漏极与所述第十四开关的栅极，所述第十三开关的漏极连接所述第十二开关的漏极，所述第十四开关的漏极为所述电压电流转换器的输出端。在一具体实施例中，上述一种减小开关节点频率抖动的电路，还包括滤波器，所述滤波器连接在所述误差放大器的输出端与地之间。本发明还提供一种减小开关节点频率抖动的方法，应用于上述一种减小开关节点频率抖动的电路，包括，步骤S1，采样变换电路的输出电压得到反馈电压；步骤S2，将参考电压与反馈电压的差值放大后得到第二电压；步骤S3，将第二电压转换成固定比例的第二电流；步骤S4，在第二开关开启时，将第二电流与斜坡电流叠加后再叠加在开关节点电压上得到第三电压，当第三电压大于第一电压时，驱动变换电路的第一开关导通，第二开关关闭，在第一开关开启阶段，斜坡电流清零；第一开关导通时间结束后，驱动第一开关关闭，第二开关导通。有益效果，本发明一种减小开关节点频率抖动的方法及电路，可以明显减小开关节点的频率抖动，且不会影响电路的其他设计与外围应用。为让发明的上述特征和优点能更明显易懂，下文特举实施例，并配合所附图式作详细说明如下。附图说明图1为开关节点抖动的波形示意图。图2为本发明一种减小开关节点频率抖动的电路一具体实施例的示意图。图3为图2中斜坡电流注入器一具体实施例的示意图。图4为图2中电压电流转换器一具体实施例的示意图。图5为使用本发明一种减小开关节点频率抖动的电路前开关节点SW的频率抖动波形图。图5为使用本发明一种减小开关节点频率抖动的电路后开关节点SW的频率抖动波形图。图6为本发明一种减小开关节点频率抖动的方法的流程图。具体实施方式为使本发明实施例的目的和技术方案更加清楚，下面将结合本发明实施例的附图，对本发明实施例的技术方案进行清楚、完整地描述。显然，所描述的实施例是本发明的一部分实施例，而不是全部的实施例。基于所描述的本发明的实施例，本领域普通技术人员在无需创造性劳动的前提下所获得的所有其他实施例，都属于本发明保护的范围。图2为本发明一种减小开关节点频率抖动的电路一具体实施例的示意图。如图2所示，所述减小开关节点频率抖动的电路1与BUCK变换电路2连接。所述减小开关节点频率抖动的电路1包括分压器11、误差放大器12、电压电流转换器13、斜坡电流注入器14、电压叠加器15、比较器16、导通时间控制器17、触发器18、逻辑控制器19、第一驱动器110与第二驱动器111，所述分压器11的输入端连接电压VOUT，所述分压器11的输出端连接所述误差放大器12的负输入端，所述误差放大器12的正输入端连接参考电压VREF，所述误差放大器12的输出端连接所述电压电流转换器13的输入端，所述电压电流转换器13的输出端连接所述斜坡电流注入器14与所述电压叠加器15，所述电压叠加器15连接所述比较器16的正输入端，所述比较器16的负输入端连接电压VB，所述比较器16的输出端连接所述触发器18的S端，所述触发器18的R端连接所述导通时间控制器17，所述触发器18的Q端连接所述逻辑控制器19的输入端，所述逻辑控制器19的第一输出端连接所述第一驱动器110的输入端，所述第一驱动器110的输出端连接开关Q1的栅极，输出第一驱动信号驱动开关Q1，所述逻辑控制器19的第二输出端连接所述第二驱动器111的输入端，所述第二驱动器111的输出端连接开关Q2的栅极，输出第二驱动信号驱动开关Q2。所述BUCK变换电路2包括开关Q1、开关Q2、电感L1与电容C1，所述开关Q1的漏极连接电源VIN，所述开关Q1的源极连接所述开关Q2的漏极为节点SW，所述开关Q2的源极接地PGND，所述开关Q2的漏极连接所述电感L1的第一端，所述电感L1的第二端输出电压VOUT，所述电感L1的第二端经过电容C1接地PGND，所述节点SW的电压为VSW。其中，所述开关Q1为上管，所述开关Q2为下管。图3示出了图2中斜坡电流注入器14一具体实施例的示意图。如图3所示，节点SW通过电阻R9连接运算放大器A1的正输入端，所述运算放大器A1的正输入端经过电容C4接地SGND，所述运算放大器A1的输出端连接开关Q3的栅极，所述开关Q3的源极经过电阻R1接地SGND，所述运算放大器A1的负输入端连接所述开关Q3的源极，电压Vcc连接开关Q4的源极与开关Q5的源极，所述开关Q4的栅极连接所述开关Q5的栅极，所述开关Q4的栅极连接所述开关Q4的漏极与所述开关Q3的漏极，所述开关Q5的漏极连接开关Q6的栅极与开关Q7的栅极，所述开关Q6的漏极连接所述开关Q6的栅极，所述开关Q6的源极接地SGND，所述开关Q7的漏极连接电流源IM，所述开关Q7的源极接地SGND，电容C2的第一端连接所述开关Q7的漏极，所述电容C2的第二端连接所述开关Q7的源极，所述电容C2的第一端连接开关Q8的漏极，所述开关Q8的源极连接所述电容C2的第二端，所述开关Q8的栅极连接驱动器G3的输出端，所述驱动器G3的输入端连接下管导通信号LS_ON。所述开关Q8的漏极连接运算放大器A2的正输入端，所述运算放大器A2的输出端连接开关Q9的栅极，所述运算放大器A2的负输入端连接所述开关Q9的源极，所述开关Q9的源极经过电阻R2接地SGND，电压Vcc连接开关Q10的源极与开关Q11的源极，所述开关Q10的栅极连接所述开关Q11的栅极，所述开关Q10的栅极连接所述开关Q9的漏极与所述开关Q10的漏极，所述开关Q11的漏极输出斜坡电流IRAMP。更具体地，所述开关Q4与所述开关Q5组成电流镜，所述开关Q6与所述开关Q7组成电流镜，所述开关Q10与所述开关Q11组成电流镜。可选地，三组电流镜的镜像比均为1:1。更具体地，所述电阻R9与所述电容C4组成低通滤波器对电压VSW进行滤波，在本具体实施例中，经过所述电阻R9与所述电容C4滤波后的电压即为电压VOUT，也就是所述运算放大器A1的正输入端连接电压VOUT。更具体地，电流源IM为一固定偏置电流，在开关Q2开启时，即下管导通信号LS_ON=1时，开关Q8关断，电流IM与电流IN差值对所述电容C2充电，产生电压VRAMP，所述电压VRAMP经过所述运算放大器A2钳位后与所述电阻R2相除，产生斜坡电流IRAMP。其中，电流IN为流过所述开关Q7漏极的电流，电流IN的表达式如下：。电压VRAMP随时间t的表达式如下：。斜坡电流IRAMP的斜率SLOPE_IRAMP表达式如下：。请继续参考图2，在一具体实施例中，所述分压器11包括电阻R3与电阻R4，所述电阻R3的第一端连接电压VOUT，所述电阻R3的第二端连接所述电阻R4的第一端，所述电阻R4的第二端接地PGND，所述电阻R4的第一端连接所述误差放大器12的负输入端。在一具体实施例中，所述电压叠加器15包括电阻R5，所述电阻R5的第一端连接所述电压电流转换器13的输出端，所述电阻R5的第二端连接电压VSW。在一具体实施例中，所述电压VB由电流源IB与电阻R6产生，所述电阻R6的第一端连接所述比较器16的负输入端，所述电阻R6的第一端连接电流源IB，所述电阻R6的第二端接地PGND。进一步地，所述减小开关节点频率抖动的电路1还包括滤波器112，所述滤波器112连接在所述误差放大器12的输出端与地SGND之间，所述滤波器112包括电阻R8与电容C3，所述电阻R8的第一端连接所述误差放大器12的输出端，所述电阻R8的第二端连接所述电容C3的第一端，所述电容C3的第二端接地SGND。图4示出了图2中电压电流转换器13一具体实施例的示意图。如图4所示，所述误差放大器12的输出端连接运算放大器A3的正输入端，所述运算放大器A3的输出端连接开关Q12的栅极，所述运算放大器A3的负输入端连接所述开关Q12的源极，所述开关Q12的源极经过电阻R7接地SGND，电压Vcc连接开关Q13的源极与开关Q14的源极，所述开关Q13的栅极连接所述开关Q13的漏极与所述开关Q14的栅极，所述开关Q13的漏极连接所述开关Q12的漏极，所述开关Q14的漏极输出电流IVC。其中，所述开关Q13与所述开关Q14构成电流镜，可选地，电流镜的镜像比为1:1。下面继续结合图2至图4介绍本发明的工作原理。更具体地，所述导通时间控制器15采用自适应恒定导通时间模式产生上管导通结束时间Ton-end。更具体地，所述分压器11将BUCK变换电路2输出的电压VOUT经过分压产生反馈电压VFB，参考电压VREF与反馈电压VFB的差值经过所述误差放大器12得到电压VC，所述电压VC经过电压电流转换器13转换成固定比例的电流IVC，其中，电流IVC=VC/R7。进一步地，在开关Q2开启时，电流IVC与斜坡电流IRAMP叠加后经过所述电压叠加器15并叠加在电压VSW上得到电压VS，其中，VS=*R5+VSW。所述比较器16将电压VS与电压VB比较，当电压VS大于电压VB时，所述比较器16输出的PWM信号为高电平，所述触发器18输出信号给所述逻辑控制器19，所述逻辑控制器19使得上管导通信号HS_ON=1，下管导通信号LS_ON=0，表示开关Q1关闭时间Toff结束，所述第一驱动器110驱动开关Q1开启，所述第二驱动器111驱动开关Q2关断。在开关Q1开启阶段，斜坡电流IRAMP清零。直到所述导通时间控制器输出上管导通结束时间Ton-end为高电平，所述触发器18输出信号给所述逻辑控制器19，所述逻辑控制器19使得上管导通信号HS_ON=0，下管导通信号LS_ON=1，所述第一驱动器110驱动开关Q1关闭，所述第二驱动器111驱动开关Q2开启。当输出的电压VOUT较小时，相应地电流IN较小；因此，电流IM与电流IN的差值大，电压VRAMP和斜坡电流IRAMP斜率大，电压VS的斜率也增大。图5为使用本发明一种减小开关节点频率抖动的电路前开关节点SW的频率抖动波形图，图5为使用本发明一种减小开关节点频率抖动的电路后开关节点SW的频率抖动波形图，可以看出，开关节点SW的频率抖动明显减小。因此，本发明一种减小开关节点频率抖动的电路可以根据输出电压VOUT自动调整注入的斜坡电流IRAMP的斜率SLOPE_IRAMP，解决了常规的ACOT谷值电流模式下BUCK变换电路抖动大的问题。同时，斜坡电流IRAMP在开关Q1开启阶段被清零，在开关Q1关闭阶段开始产生，其与电流IVC叠加共同决定了负载电流，不会影响所述误差放大器12的输出电压范围，不会导致所述误差放大器12的输出摆幅问题。本发明还提供一种减小开关节点频率抖动的方法，图6示出了本发明一种减小开关节点频率抖动的方法的流程图，具体包括如下步骤。步骤S1，采样变换电路的输出电压VOUT得到反馈电压VFB。步骤S2，将参考电压VREF与反馈电压VFB的差值放大后得到电压VC。步骤S3，将电压VC转换成固定比例的电流IVC。步骤S4，在开关Q2开启时，将电流IVC与斜坡电流IRAMP叠加后再叠加在电压VSW上得到电压VS，当电压VS大于电压VB时，驱动开关Q1导通，开关Q2关闭，在开关Q1开启阶段，斜坡电流IRAMP清零；开关Q1导通时间结束后，驱动开关Q1关闭，开关Q2导通。其中，斜坡电流IRAMP的斜率SLOPE_IRAMP与输出电压VOUT反相关。需要注意的是，本发明一种减小开关节点频率抖动的方法及电路还可应用于Boost变换电路、Buck-Boost变换电路。虽然本发明已以实施例揭露如上，然其并非用以限定本发明，任何所属技术领域中具有通常知识者，在不脱离本发明的精神和范围内，当可作些许的更动与润饰，故本发明的保护范围当视后附的申请专利范围所界定者为准。
