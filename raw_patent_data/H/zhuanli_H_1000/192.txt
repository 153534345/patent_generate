标题title
储能变流器的控制方法及系统、电子设备及存储介质
摘要abst
本发明涉及储能变流器技术领域，提出了一种储能变流器的控制方法及系统、电子设备及存储介质。其中，方法包括：获取储能变流器的电池电压、电网侧的第一相电压和线电压；根据电池电压、第一相电压以及线电压，确定储能变流器的工作模式；基于工作模式为三相三线制模式，控制第一开关处于断开状态，以使储能变流器处于三相三线制系统中，并生成第一脉冲宽度调制信号；根据第一脉冲宽度调制信号控制储能变流器工作；基于工作模式为三相四线制模式，获取中性线的第一电流；根据第一电流确定第一开关闭合的时间点并控制第一开关闭合，以使储能变流器处于三相四线制系统中，并生成第二脉冲宽度调制信号；根据第二脉冲宽度调制信号控制储能变流器工作。
权利要求书clms
1.一种储能变流器的控制方法，其特征在于，所述储能变流器的控制方法包括：获取储能变流器的电池电压、所述储能变流器的电网侧的第一相电压和线电压；根据所述电池电压、所述第一相电压以及所述线电压，确定所述储能变流器的工作模式；基于所述储能变流器的工作模式为三相三线制模式时，控制第一开关处于断开状态，以使所述储能变流器处于三相三线制系统中，并生成第一脉冲宽度调制信号；根据所述第一脉冲宽度调制信号控制所述储能变流器工作；基于所述储能变流器的工作模式为三相四线制模式时，获取中性线的第一电流；根据所述第一电流确定所述第一开关闭合的时间点并控制所述第一开关闭合，以使所述储能变流器处于三相四线制系统中，并生成第二脉冲宽度调制信号；根据所述第二脉冲宽度调制信号控制所述储能变流器工作。2.根据权利要求1所述的储能变流器的控制方法，其特征在于，根据所述电池电压、所述第一相电压以及所述线电压，确定所述储能变流器的工作模式的步骤，包括：根据所述第一相电压确定第一阈值；根据所述线电压确定第二阈值；基于所述电池电压大于第一阈值时，确定所述储能变流器的工作模式为所述三相四线制模式；基于所述电池电压大于第二阈值且小于第一阈值时，确定所述储能变流器的工作模式为所述三相三线制模式。3.根据权利要求1所述的储能变流器的控制方法，其特征在于，所述根据所述第一电流确定所述第一开关闭合的时间点并控制所述第一开关闭合的步骤，包括：对所述第一电流进行离散化操作；对离散化后的所述第一电流进行处理得到所述第一电流的平均值；根据所述平均值确定所述第一电流的过零点位置；根据所述过零点位置确定所述第一开关闭合的时间点并控制所述第一开关闭合。4.根据权利要求1所述的储能变流器的控制方法，其特征在于，在所述控制第一开关处于断开状态的步骤之后，储能变流器的控制方法包括：获取所述第一开关断开前的所述储能变流器的电网侧的第二相电压；获取所述第一开关断开后的所述中性线上的第一零序电流以及所述储能变流器的电网侧的第四相电压；基于所述第一零序电流为零，且所述第二相电压与所述第四相电压之间的差值大于第三预设阈值时，确定所述第一开关没有粘连。5.根据权利要求1至4中任一项所述的储能变流器的控制方法，其特征在于，所述生成第一脉冲宽度调制信号的步骤，包括：获取所述三相三线制系统中电网的第一三相电压和所述储能变流器的第一三相电流；根据所述第一三相电压确定所述第一三相电压的第一相位；对所述第一三相电流进行坐标转换得到第二电流和第三电流；对所述第二电流和所述第三电流进行处理得到第一电压和第二电压；根据所述第一电压、第二电压以及所述第一相位得到所述第一脉冲宽度调制信号。6.根据权利要求1至4中任一项所述的储能变流器的控制方法，其特征在于，所述生成第二脉冲宽度调制信号的步骤，包括：获取所述三相四线制系统中电网的第二三相电压和所述储能变流器的第二三相电流；根据所述第二三相电压确定所述第二三相电压的第二相位；对所述第二三相电流进行坐标转换得到第四电流、第五电流以及第六电流；对所述第四电流、所述第五电流以及所述第六电流进行处理得到第三电压、第四电压以及第五电压；根据所述第三电压、所述第四电压、所述第五电压以及所述第二相位得到所述第二脉冲宽度调制信号。7.根据权利要求6所述的储能变流器的控制方法，其特征在于，所述对所述第四电流、所述第五电流以及所述第六电流进行处理得到第三电压、第四电压以及第五电压的步骤，包括：对所述第二三相电流进行处理得到第二零序电流；根据所述第二零序电流确定第一偏差值；根据所述第二三相电压、设定的有功功率以及设定的无功功率确定第二偏差值和第三偏差值；根据所述第四电流、所述第五电流、所述第六电流、所述第一偏差值、所述第二偏差值以及所述第三偏差值得到所述第三电压、所述第四电压以及所述第五电压。8.一种储能变流器的控制系统，其特征在于，所述储能变流器的控制系统包括：第一获取模块，所述第一获取模块用于获取储能变流器的电池电压、所述储能变流器的电网侧的第一相电压和线电压；第一确定模块，所述第一确定模块用于根据所述电池电压、所述第一相电压以及所述线电压，确定所述储能变流器的工作模式；第一处理模块，所述第一处理模块用于基于所述储能变流器的工作模式为三相三线制模式时，控制第一开关处于断开状态，以使所述储能变流器处于三相三线制系统中，并生成第一脉冲宽度调制信号；第一控制模块，所述第一控制模块用于根据所述第一脉冲宽度调制信号控制所述储能变流器工作；第二处理模块，所述第二处理模块用于基于所述储能变流器的工作模式为三相四线制模式时，获取中性线的第一电流；第三处理模块，所述第三处理模块用于根据所述第一电流确定所述第一开关闭合的时间点并控制所述第一开关闭合，以使所述储能变流器处于三相四线制系统中，并生成第二脉冲宽度调制信号；第二控制模块，所述第二控制模块用于根据所述第二脉冲宽度调制信号控制所述储能变流器工作。9.一种电子设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1至7中任一项所述的储能变流器的控制方法的步骤。10.一种存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至7中任一项所述的储能变流器的控制方法的步骤。
说明书desc
技术领域本发明涉及储能变流器技术领域，具体而言，涉及一种储能变流器的控制方法及系统、电子设备及存储介质。背景技术现有技术条件下，储能变流器的设计都是固定的三线制设备或者四线制设备，根据不同的电网线制配备不同的储能变流器设备，如果线制有变化，需要更换设备或者通过人为的方式对设备进行升级来适应线制的变化，非常不便利或者难以适应。发明内容本发明旨在至少解决现有技术或相关技术中存在的技术问题之一。为此，本发明的第一个方面提出了一种储能变流器的控制方法。本发明的第二个方面提出了一种储能变流器的控制系统。本发明的第三个方面提出了一种电子设备。本发明的第四个方面提出了一种存储介质。有鉴于此，根据本发明的第一个方面，提出了一种储能变流器的控制方法，包括：获取储能变流器的电池电压、储能变流器的电网侧的第一相电压和线电压；根据电池电压、第一相电压以及线电压，确定储能变流器的工作模式；基于储能变流器的工作模式为三相三线制模式时，控制第一开关处于断开状态，以使储能变流器处于三相三线制系统中，并生成第一脉冲宽度调制信号；根据第一脉冲宽度调制信号控制储能变流器工作；基于储能变流器的工作模式为三相四线制模式时，获取中性线的第一电流；根据第一电流确定第一开关闭合的时间点并控制第一开关闭合，以使储能变流器处于三相四线制系统中，并生成第二脉冲宽度调制信号；根据第二脉冲宽度调制信号控制储能变流器工作。本发明提供的储能变流器的控制方法，首先在储能变流器与外部电网之间设置多个滤波电容，然后在多个滤波电容的公共点至外部电网的中性线之间设置一个第一开关，通过第一开关的闭合和断开，使得储能变流器在三相四线制系统与三相三线制系统之间无缝、连续地进行切换。进一步地，储能变流器的控制方法为：首先获取储能变流器的直流侧的电池电压，同时根据储能变流器电网侧电压获取第一相电压和线电压。然后根据电池电压、第一相电压以及线电压之间的数值关系，从而确定储能变流器工作在哪种工作模式中，其中，工作模式分为三相三线制模式和三相四线制模式。当储能变流器的工作模式为三相三线制模式时，控制第一开关处于断开状态，由于第一开关处于断开状态，储能变流器与中性线断开连接，因此储能变流器此时会处于三相三线制系统中，进而通过三相三线制系统发出的电能生成第一脉冲宽度调制信号，从而利用第一脉冲宽度调制信号控制储能变流器工作。当储能变流器的工作模式为三相四线制模式时，在三相四线制系统中存在中性线，因此需要获取中性线的第一电流，通过第一电流确定第一开关闭合的时间点，然后在到达第一开关闭合的时间点时控制第一开关闭合，从而使得储能变流器与三相四线制系统中的中性线相连接，进而使得储能变流器能够工作在三相四线制系统中，通过三相四线制系统发出的电能生成第二脉冲宽度调制信号，从而利用第二脉冲宽度调制信号控制储能变流器工作。本发明通过根据储能变流器的电池电压，第一相电压以及线电压之间的关系来确定储能变流器的工作模式，进而根据储能变流器的不同的工作模式来控制滤波电容的公共点至外部电网的中性线之间的第一开关，从而使得储能变流器能够在三相四线制系统与三相三线制系统之间进行切换，同时根据储能变流器位于不同的系统中，生成不同的脉冲宽度调制信号，进而根据不同的脉冲宽度调制信号控制储能变流器进行工作。本发明使得储能变流器能够同时适应三相三线制系统和三相四线制系统，从而当电网的线制发生变化时，不再需要更换储能变流器或者通过人为的方式对储能变流器进行升级来适应线制的变化。根据本发明的上述储能变流器的控制方法，还可以具有以下技术特征：在一些技术方案中，可选地，根据电池电压、第一相电压以及线电压，确定储能变流器的工作模式的步骤，包括：根据第一相电压确定第一阈值；根据线电压确定第二阈值；基于电池电压大于第一阈值时，确定储能变流器的工作模式为三相四线制模式；基于电池电压大于第二阈值且小于第一阈值时，确定储能变流器的工作模式为三相三线制模式。在该技术方案中，根据电池电压、第一相电压以及线电压，确定储能变流器的工作模式的步骤，包括：首先根据第一相电压确定第一阈值，根据线电压确定第二阈值。当电池电压大于第一阈值时，储能变流器的工作模式为三相四线制模式；当电池电压大于第二阈值且小于第一阈值时，储能变流器的工作模式为三相三线制模式。具体地，第一阈值可以为2×1.414×第一相电压，第二阈值可以为1.414×线电压。对于三相三线制系统，储能变流器的交流侧线电压即线电压可以为U1，储能变流器的直流侧的电池电压最小值Ddc1=1.414U1；对于三相四线制系统，因为有中性线的存在，三相变流器是作为三个单相变流器进行控制，储能变流器的交流侧相电压即第一相电压可以为U2，因此储能变流器的直流侧电池电压最小值Ddc2=2×1.414U2；进一步地，U1=1.732U2，Ddc1=1.414×1.732U2，Ddc1＜Ddc2。因此，三相四线制系统中的储能变流器在放电模式下需要更高的电池电压。也就是在输出交流电压相同的情况下，三相四线制系统中的储能变流器对电池电压的利用范围比三相三线制系统中的储能变流器低，因此，储能变流器在运行时根据电池电压值可以采取不同运行策略，当电池电压Udc＞2×1.414U2时，储能变流器工作在三相四线制模式，支持单相负载设备；当1.414U1＜Udc＜2×1.414U2，储能变流器工作在三相三线制模式。在一些技术方案中，可选地，根据第一电流确定第一开关闭合的时间点并控制第一开关闭合的步骤，包括：对第一电流进行离散化操作；对离散化后的第一电流进行处理得到第一电流的平均值；根据平均值确定第一电流的过零点位置；根据过零点位置确定第一开关闭合的时间点并控制第一开关闭合。在该技术方案中，根据第一电流确定第一开关闭合的时间点并控制第一开关闭合的步骤，包括：首先对第一电流进行离散化操作，然后对离散化的第一电流进行处理得到第一电流的平均值，具体地，处理过程可以为根据第一电流的采样数值，对连续5次或者更多次采样数值进行平滑滤波，剔除其中的最大值和最小值，然后根据剩余的采样数据求得平均值。进一步地，根据得到平均值确定第一电流的过零点位置，具体地，可以根据数值的变化趋势，由正变负或者由负变正，从而判断出第一电流的过零点位置，然后将第一电流达到过零点位置时所在时间点作为第一开关闭合的时间点，进而在到达第一开关闭合的时间点时控制第一开关闭合。由于第一开关在闭合和断开的过程中，会生成比较大的冲击，如果叠加在交流信号的波峰或者波谷位置，会损害第一开关，因此在电流的过零点位置闭合和断开第一开关能够更加可靠、安全。进一步地，控制第一开关闭合的方法可以为当检测到第一电流处于过零点位置时，控制系统产生脉冲信号，然后将脉冲信号通过驱动电路发送至第一开关，以使得第一开关闭合。在一些技术方案中，可选地，在控制第一开关处于断开状态的步骤，之后包括：获取第一开关断开前的储能变流器的电网侧的第二相电压；获取第一开关断开后的中性线上的第一零序电流以及储能变流器的电网侧的第四相电压；基于第一零序电流为零，且第二相电压与第四相电压之间的差值大于第三预设阈值时，确定第一开关没有粘连。在该技术方案中，在控制第一开关处于断开状态的步骤，之后包括：当第一开关断开后，需要检测第一开关的断开是否存在断开不彻底、有粘连的情况。具体地，首先在第一开关断开前获取储能变流器的电网侧的第二相电压，然后第一开关断开，获取第一开关断开后中性线上的第一零序电流以及储能变流器的电网侧的第四相电压，当第一零序电流为零，并且第二相电压与第四相电压之间的差值大于第三预设阈值时，说明第一开关没有粘连，即第一开关处于完全断开状态。其中，第三预设阈值可以为10伏。通过在第一开关进行断开时，判断第一开关的断开是否存在断开不彻底、有粘连的情况，从而保证了储能变流器在工作过程中的安全性。在一些技术方案中，可选地，生成第一脉冲宽度调制信号的步骤，包括：获取三相三线制系统中电网的第一三相电压和储能变流器的第一三相电流；根据第一三相电压确定第一三相电压的第一相位；对第一三相电流进行坐标转换得到第二电流和第三电流；对第二电流和第三电流进行处理得到第一电压和第二电压；根据第一电压、第二电压以及第一相位得到第一脉冲宽度调制信号。在该技术方案中，生成第一脉冲宽度调制信号的步骤，包括：首先获取三相三线制系统中电网的第一三相电压和储能变流器的第一三相电流，其中，第一三相电流为储能变流器逆变桥的桥口侧的三相电流，然后根据第一三相电压确定第一三相电压的第一相位。然后对第一三相电流进行坐标转换得到第二电流和第三电流，其中，坐标转换指的是将三相坐标系转换为旋转坐标系，dq坐标系是按照电网角速度逆时针旋转的同步旋转坐标系，常用于电力电子和电机控制等领域中，以实现对电机运行状态的精确控制和分析。在dq坐标系中，第一三相电流可以被分解为d轴分量即第二电流，q轴分量即第三电流。在得到第二电流和第三电流后，分别对第二电流和第三电流进行处理得到第一电压和第二电压，具体地，可以利用比例-积分-微分控制器对第二电流进行处理得到第一电压，对第三电流进行处理得到第二电压。进一步地，再根据第一电压、第二电压以及第一相位进行坐标转换，由dq坐标系转换为三相坐标系，最后根据三相坐标系的电压得到第一脉冲宽度调制信号。在一些技术方案中，可选地，生成第二脉冲宽度调制信号的步骤，包括：获取三相四线制系统中电网的第二三相电压和储能变流器的第二三相电流；根据第二三相电压确定第二三相电压的第二相位；对第二三相电流进行坐标转换得到第四电流、第五电流以及第六电流；对第四电流、第五电流以及第六电流进行处理得到第三电压、第四电压以及第五电压；根据第三电压、第四电压、第五电压以及第二相位得到第二脉冲宽度调制信号。在该技术方案中，生成第二脉冲宽度调制信号的步骤，包括：首先获取三相四线制系统中电网的第二三相电压和储能变流器的第二三相电流，其中，第二三相电流为储能变流器逆变桥的桥口侧的三相电流。然后根据第二三相电压确定第二三相电压的第二相位。然后对储能变流器的第二三相电流进行坐标转换得到第四电流、第五电流以及第六电流，其中，坐标转换指的是将三相坐标系转换为旋转坐标系，dqi坐标系中d轴代表直轴，与电机的磁场方向一致；q轴代表交轴，与d轴垂直，并与电机的转矩生成方向一致；i轴是另一个垂直于d轴和q轴的轴，通常用于表示电机的电流分量。在dqi坐标系中，储能变流器的第二三相电流可以被分解为d轴分量即第四电流，q轴分量即第五电流以及i轴分量即第六电流。在得到第四电流、第五电流以及第六电流后，分别对第四电流、第五电流以及第六电流进行处理得到第三电压、第四电压以及第五电压，具体地，可以利用PID控制器对第四电流进行处理得到第三电压，对第五电流进行处理得到第四电压以及对第六电流进行处理得到第五电压。进一步地，再根据第三电压、第四电压、第五电压以及第二相位进行坐标转换，由dqi坐标系转换为三相坐标系，最后根据三相坐标系的电压得到第二脉冲宽度调制信号。在一些技术方案中，可选地，对第四电流、第五电流以及第六电流进行处理得到第三电压、第四电压以及第五电压的步骤，包括：对第二三相电流进行处理得到第二零序电流；根据第二零序电流确定第一偏差值；根据第二三相电压、设定的有功功率以及设定的无功功率确定第二偏差值和第三偏差值；根据第四电流、第五电流、第六电流、第一偏差值、第二偏差值以及第三偏差值得到第三电压、第四电压以及第五电压。在该技术方案中，对第四电流、第五电流以及第六电流进行处理得到第三电压、第四电压以及第五电压的步骤，包括：当储能变流器工作在三相四线制系统时，因为三相四线制系统中有中性线，因此会有零序电流流过，此外由于三相四线制系统中的第四桥臂是采用电容中点引出直接接入电网系统的中性线，因此储能变流器的中性线上除了有零序电流外，还有丰富的高频成分，这些高频谐波如果叠加到调制波上，将造成PWM控制信号的不准确，进而影响储能变流器运行的稳定性，因此需要对零序电流进行抗干扰运算处理。即需要对储能变流器的第二三相电流进行处理得到多个第二零序电流，然后根据多个第二零序电流确定第一偏差值，具体地，首先对逆变侧电流通过零序电流提取模块，分解出3、9、15等零序电流成分，再将这些电流成分进行傅里叶反变换，转变为时域信号，然后将其幅值作为第一偏差值。同时通过第二三相电压、设定的有功功率以及设定的无功功率得到第二偏差值和第三偏差值。进一步地，根据第四电流和第二偏差值进行PID跟踪得到第三电压，根据第五电流和第三偏差值进行PID跟踪得到第四电压，根据第六电流和第一偏差值进行PID跟踪得到第五电压。本发明通过利用多个零序电流得到第一偏差值，然后根据第一偏差值和i轴的电流分量进行PID跟踪，从而保证调制波的零序分量无其他高频信号的干扰。根据本发明的第二个方面，提出了一种储能变流器的控制系统，包括：第一获取模块，第一获取模块用于获取储能变流器的电池电压、储能变流器的电网侧的第一相电压和线电压；第一确定模块，第一确定模块用于根据电池电压、第一相电压以及线电压，确定储能变流器的工作模式；第一处理模块，第一处理模块用于基于储能变流器的工作模式为三相三线制模式时，控制第一开关处于断开状态，以使储能变流器处于三相三线制系统中，并生成第一脉冲宽度调制信号；第一控制模块，第一控制模块用于根据第一脉冲宽度调制信号控制储能变流器工作；第二处理模块，第二处理模块用于基于储能变流器的工作模式为三相四线制模式时，获取中性线的第一电流；第三处理模块，第三处理模块用于根据第一电流确定第一开关闭合的时间点并控制第一开关闭合，以使储能变流器处于三相四线制系统中，并生成第二脉冲宽度调制信号；第二控制模块，第二控制模块用于根据第二脉冲宽度调制信号控制储能变流器工作。本发明提供的储能变流器的控制系统，首先在储能变流器与外部电网之间设置多个滤波电容，然后在多个滤波电容的公共点至外部电网的中性线之间设置一个第一开关，通过第一开关的闭合和断开，使得储能变流器在三相四线制系统与三相三线制系统之间无缝、连续地进行切换。进一步地，储能变流器的控制系统主要包括：第一获取模块、第一确定模块、第一处理模块、第一控制模块、第二处理模块、第三处理模块以及第二控制模块。其中，首先第一获取模块获取储能变流器的直流侧的电池电压，同时根据储能变流器电网侧电压获取第一相电压和线电压。然后第一确定模块根据电池电压、第一相电压以及线电压之间的数值关系，从而确定储能变流器工作在哪种工作模式中，其中，工作模式分为三相三线制模式和三相四线制模式。当储能变流器的工作模式为三相三线制模式时，第一处理模块控制第一开关处于断开状态，由于第一开关处于断开状态，储能变流器与中性线断开连接，因此储能变流器此时会处于三相三线制系统中，进而通过三相三线制系统发出的电能生成第一脉冲宽度调制信号，从而第一控制模块利用第一脉冲宽度调制信号控制储能变流器工作。当储能变流器的工作模式为三相四线制模式时，在三相四线制系统中存在中性线，因此第二处理模块需要获取中性线的第一电流，第三处理模块通过第一电流确定第一开关闭合的时间点，然后在到达第一开关闭合的时间点时控制第一开关闭合，从而使得储能变流器与三相四线制系统中的中性线相连接，进而使得储能变流器能够工作在三相四线制系统中，并通过三相四线制系统发出的电能生成第二脉冲宽度调制信号，从而第二控制模块利用第二脉冲宽度调制信号控制储能变流器工作。本发明通过根据储能变流器的电池电压，第一相电压以及线电压之间的关系来确定储能变流器的工作模式，进而根据储能变流器的不同的工作模式来控制滤波电容的公共点至外部电网的中性线之间的第一开关，从而使得储能变流器能够在三相四线制系统与三相三线制系统之间进行切换，同时根据储能变流器位于不同的系统中，生成不同的脉冲宽度调制信号，进而根据不同的脉冲宽度调制信号控制储能变流器进行工作。本发明使得储能变流器能够同时适应三相三线制系统和三相四线制系统，从而当电网的线制发生变化时，不再需要更换储能变流器或者通过人为的方式对储能变流器进行升级来适应线制的变化。根据本发明的第三个方面，提出了一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，处理器执行计算机程序时实现如上述任一项的储能变流器的控制方法的步骤。本发明提供的电子设备，处理器执行计算机程序时实现上述储能变流器的控制方法的步骤，能够实现上述任一技术方案的技术效果，在此不再赘述。根据本发明的第四个方面，提出了一种存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现如上述任一项的储能变流器的控制方法的步骤。本发明提供的存储介质，计算机程序被处理器执行时实现上述储能变流器的控制方法的步骤，能够实现上述任一技术方案的技术效果，在此不再赘述。本发明的附加方面和优点将在下面的描述部分中变得明显，或通过本发明的实践了解到。附图说明本发明的上述和/或附加的方面和优点从结合下面附图对实施例的描述中将变得明显和容易理解，其中：图1示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之一；图2示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之二；图3示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之三；图4示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之四；图5示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之五；图6示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之六；图7示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之七；图8示出了本发明的一个实施例的储能变流器的控制电路示意图；图9示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之八；图10示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之九；图11示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之十；图12示出了本发明的一个实施例的储能变流器的控制系统的示意框图；图13示出了本发明的一个实施例的电子设备的示意框图。其中，图8中附图标记与部件名称之间的对应关系为：102储能变流器，104电网，106锁相回路，108开关粘连检测模块，110控制驱动电路，112过零检测模块，114零序电流提取模块，116第一PID控制器，118第三PID控制器，120第二PID控制器，122第二坐标变换模块，124PWM模块，126第一坐标变换模块，128第一开关。具体实施方式为了能够更清楚地理解本发明的上述目的、特征和优点，下面结合附图和具体实施方式对本发明进行进一步地详细描述。需要说明的是，在不冲突的情况下，本发明的实施例及实施例中的特征可以相互组合。在下面的描述中阐述了很多具体细节以便于充分理解本发明，但是，本发明还可以采用其他不同于在此描述的其他方式来实施，因此，本发明的保护范围并不限于下面公开的具体实施例的限制。图1示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之一。其中，储能变流器的控制方法包括：步骤102：获取储能变流器的电池电压、储能变流器的电网侧的第一相电压和线电压；步骤104：根据电池电压、第一相电压以及线电压，确定储能变流器的工作模式；步骤106：基于储能变流器的工作模式为三相三线制模式时，控制第一开关处于断开状态，以使储能变流器处于三相三线制系统中，并生成第一脉冲宽度调制信号；步骤108：根据第一脉冲宽度调制信号控制储能变流器工作；步骤110：基于储能变流器的工作模式为三相四线制模式时，获取中性线的第一电流；步骤112：根据第一电流确定第一开关闭合的时间点并控制第一开关闭合，以使储能变流器处于三相四线制系统中，并生成第二脉冲宽度调制信号；步骤114：根据第二脉冲宽度调制信号控制储能变流器工作。本发明提供的储能变流器的控制方法，首先在储能变流器与外部电网之间设置多个滤波电容，然后在多个滤波电容的公共点至外部电网的中性线之间设置一个第一开关，通过第一开关的闭合和断开，使得储能变流器在三相四线制系统与三相三线制系统之间无缝、连续地进行切换。进一步地，储能变流器的控制方法为：首先获取储能变流器的直流侧的电池电压，同时根据储能变流器电网侧电压获取第一相电压和线电压。然后根据电池电压、第一相电压以及线电压之间的数值关系，从而确定储能变流器工作在哪种工作模式中，其中，工作模式分为三相三线制模式和三相四线制模式。当储能变流器的工作模式为三相三线制模式时，控制第一开关处于断开状态，由于第一开关处于断开状态，储能变流器与中性线断开连接，因此储能变流器此时会处于三相三线制系统中，进而通过三相三线制系统发出的电能生成第一脉冲宽度调制信号，从而利用第一脉冲宽度调制信号控制储能变流器工作。当储能变流器的工作模式为三相四线制模式时，在三相四线制系统中存在中性线，因此需要获取中性线的第一电流，通过第一电流确定第一开关闭合的时间点，然后在到达第一开关闭合的时间点时控制第一开关闭合，从而使得储能变流器与三相四线制系统中的中性线相连接，进而使得储能变流器能够工作在三相四线制系统中，通过三相四线制系统发出的电能生成第二脉冲宽度调制信号，从而利用第二脉冲宽度调制信号控制储能变流器工作。本发明通过根据储能变流器的电池电压，第一相电压以及线电压之间的关系来确定储能变流器的工作模式，进而根据储能变流器的不同的工作模式来控制滤波电容的公共点至外部电网的中性线之间的第一开关，从而使得储能变流器能够在三相四线制系统与三相三线制系统之间进行切换，同时根据储能变流器位于不同的系统中，生成不同的脉冲宽度调制信号，进而根据不同的脉冲宽度调制信号控制储能变流器进行工作。本发明使得储能变流器能够同时适应三相三线制系统和三相四线制系统，从而当电网的线制发生变化时，不再需要更换储能变流器或者通过人为的方式对储能变流器进行升级来适应线制的变化。图2示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之二；其中，根据电池电压、第一相电压以及线电压，确定储能变流器的工作模式的步骤，包括：步骤202：根据第一相电压确定第一阈值；步骤204：根据线电压确定第二阈值；步骤206：基于电池电压大于第一阈值时，确定储能变流器的工作模式为三相四线制模式；步骤208：基于电池电压大于第二阈值且小于第一阈值时，确定储能变流器的工作模式为三相三线制模式。在该实施例中，根据电池电压、第一相电压以及线电压，确定储能变流器的工作模式的步骤，包括：首先根据第一相电压确定第一阈值，根据线电压确定第二阈值。当电池电压大于第一阈值时，储能变流器的工作模式为三相四线制模式；当电池电压大于第二阈值且小于第一阈值时，储能变流器的工作模式为三相三线制模式。具体地，第一阈值可以为2×1.414×第一相电压，第二阈值可以为1.414×线电压。对于三相三线制系统，储能变流器的交流侧线电压即线电压可以为U1，储能变流器的直流侧的电池电压最小值Ddc1=1.414U1；对于三相四线制系统，因为有中性线的存在，三相变流器是作为三个单相变流器进行控制，储能变流器的交流侧相电压即第一相电压可以为U2，因此储能变流器的直流侧电池电压最小值Ddc2=2×1.414U2；进一步地，U1=1.732U2，Ddc1=1.414×1.732U2，Ddc1＜Ddc2。因此，三相四线制系统中的储能变流器在放电模式下需要更高的电池电压。也就是在输出交流电压相同的情况下，三相四线制系统中的储能变流器对电池电压的利用范围比三相三线制系统中的储能变流器低，因此，储能变流器在运行时根据电池电压值可以采取不同运行策略，当电池电压Udc＞2×1.414U2时，储能变流器工作在三相四线制模式，支持单相负载设备；当1.414U1＜Udc＜2×1.414U2，储能变流器工作在三相三线制模式。图3示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之三；其中，根据第一电流确定第一开关闭合的时间点并控制第一开关闭合的步骤，包括：步骤302：对第一电流进行离散化操作；步骤304：对离散化后的第一电流进行处理得到第一电流的平均值；步骤306：根据平均值确定第一电流的过零点位置；步骤308：根据过零点位置确定第一开关闭合的时间点并控制第一开关闭合。在该实施例中，根据第一电流确定第一开关闭合的时间点并控制第一开关闭合的步骤，包括：首先对第一电流进行离散化操作，然后对离散化的第一电流进行处理得到第一电流的平均值，具体地，处理过程可以为根据第一电流的采样数值，对连续5次或者更多次采样数值进行平滑滤波，剔除其中的最大值和最小值，然后根据剩余的采样数据求得平均值。进一步地，根据得到平均值确定第一电流的过零点位置，具体地，可以根据数值的变化趋势，由正变负或者由负变正，从而判断出第一电流的过零点位置，然后将第一电流达到过零点位置时所在时间点作为第一开关闭合的时间点，进而在到达第一开关闭合的时间点时控制第一开关闭合。由于第一开关在闭合和断开的过程中，会生成比较大的冲击，如果叠加在交流信号的波峰或者波谷位置，会损害第一开关，因此在电流的过零点位置闭合和断开第一开关能够更加可靠、安全。进一步地，控制第一开关闭合的方法可以为当检测到第一电流处于过零点位置时，控制系统产生脉冲信号，然后将脉冲信号通过驱动电路发送至第一开关，以使得第一开关闭合。图4示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之四；其中，在控制第一开关处于断开状态的步骤之后，储能变流器的控制方法包括：步骤402：获取第一开关断开前的储能变流器的电网侧的第二相电压；步骤404：获取第一开关断开后的中性线上的第一零序电流以及储能变流器的电网侧的第四相电压；步骤406：基于第一零序电流为零，且第二相电压与第四相电压之间的差值大于第三预设阈值时，确定第一开关没有粘连。在该实施例中，在控制第一开关处于断开状态的步骤之后，储能变流器的控制方法包括：当第一开关断开后，需要检测第一开关的断开是否存在断开不彻底、有粘连的情况。具体地，首先在第一开关断开前获取储能变流器的电网侧的第二相电压，然后第一开关断开，获取第一开关断开后中性线上的第一零序电流以及储能变流器的电网侧的第四相电压，当第一零序电流为零，并且第二相电压与第四相电压之间的差值大于第三预设阈值时，说明第一开关没有粘连，即第一开关处于完全断开状态。其中，第三预设阈值可以为10伏。通过在第一开关进行断开时，判断第一开关的断开是否存在断开不彻底、有粘连的情况，从而保证了储能变流器在工作过程中的安全性。图5示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之五；其中，生成第一脉冲宽度调制信号的步骤，包括：步骤502：获取三相三线制系统中电网的第一三相电压和储能变流器的第一三相电流；步骤504：根据第一三相电压确定第一三相电压的第一相位；步骤506：对第一三相电流进行坐标转换得到第二电流和第三电流；步骤508：对第二电流和第三电流进行处理得到第一电压和第二电压；步骤510：根据第一电压、第二电压以及第一相位得到第一脉冲宽度调制信号。在该实施例中，生成第一脉冲宽度调制信号的步骤，包括：首先获取三相三线制系统中电网的第一三相电压和储能变流器的第一三相电流，其中，第一三相电流为储能变流器逆变桥的桥口侧的三相电流，然后根据第一三相电压确定第一三相电压的第一相位。然后对第一三相电流进行坐标转换得到第二电流和第三电流，其中，坐标转换指的是将三相坐标系转换为旋转坐标系，dq坐标系是按照电网角速度逆时针旋转的同步旋转坐标系，常用于电力电子和电机控制等领域中，以实现对电机运行状态的精确控制和分析。在dq坐标系中，第一三相电流可以被分解为d轴分量即第二电流，q轴分量即第三电流。在得到第二电流和第三电流后，分别对第二电流和第三电流进行处理得到第一电压和第二电压，具体地，可以利用PID控制器对第二电流进行处理得到第一电压，对第三电流进行处理得到第二电压。进一步地，再根据第一电压、第二电压以及第一相位进行坐标转换，由dq坐标系转换为三相坐标系，最后根据三相坐标系的电压得到第一脉冲宽度调制信号。图6示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之六；其中，生成第二脉冲宽度调制信号的步骤，包括：步骤602：获取三相四线制系统中电网的第二三相电压和储能变流器的第二三相电流；步骤604：根据第二三相电压确定第二三相电压的第二相位；步骤606：对第二三相电流进行坐标转换得到第四电流、第五电流以及第六电流；步骤608：对第四电流、第五电流以及第六电流进行处理得到第三电压、第四电压以及第五电压；步骤610：根据第三电压、第四电压、第五电压以及第二相位得到第二脉冲宽度调制信号。在该实施例中，生成第二脉冲宽度调制信号的步骤，包括：首先获取三相四线制系统中电网的第二三相电压和储能变流器的第二三相电流，其中，第二三相电流为储能变流器逆变桥的桥口侧的三相电流。然后根据第二三相电压确定第二三相电压的第二相位。然后对第二三相电流进行坐标转换得到第四电流、第五电流以及第六电流，其中，坐标转换指的是将三相坐标系转换为dqi坐标系，dqi坐标系中d轴代表直轴，与电机的磁场方向一致；q轴代表交轴，与d轴垂直，并与电机的转矩生成方向一致；i轴是另一个垂直于d轴和q轴的轴，通常用于表示电机的电流分量。在dqi坐标系中，储能变流器的第二三相电流可以被分解为d轴分量即第四电流，q轴分量即第五电流以及i轴分量即第六电流。在得到第四电流、第五电流以及第六电流后，分别对第四电流、第五电流以及第六电流进行处理得到第三电压、第四电压以及第五电压，具体地，可以利用PID控制器对第四电流进行处理得到第三电压，对第五电流进行处理得到第四电压以及对第六电流进行处理得到第五电压。进一步地，再根据第三电压、第四电压、第五电压以及第二相位进行坐标转换，由dqi坐标系转换为三相坐标系，最后根据三相坐标系的电压得到第二脉冲宽度调制信号。图7示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之七；其中，对第四电流、第五电流以及第六电流进行处理得到第三电压、第四电压以及第五电压的步骤，包括：步骤702：对第二三相电流进行处理得到第二零序电流；步骤704：根据第二零序电流确定第一偏差值；步骤706：根据第二三相电压、设定的有功功率以及设定的无功功率确定第二偏差值和第三偏差值；步骤708：根据第四电流、第五电流、第六电流、第一偏差值、第二偏差值以及第三偏差值得到第三电压、第四电压以及第五电压。在该实施例中，对第四电流、第五电流以及第六电流进行处理得到第三电压、第四电压以及第五电压的步骤，包括：当储能变流器工作在三相四线制系统时，因为三相四线制系统中有中性线，因此会有零序电流流过，此外由于三相四线制系统中的第四桥臂是采用电容中点引出直接接入电网系统的中性线，因此储能变流器的中性线上除了有零序电流外，还有丰富的高频成分，这些高频谐波如果叠加到调制波上，将造成PWM控制信号的不准确，进而影响储能变流器运行的稳定性，因此需要对零序电流进行抗干扰运算处理。即需要对储能变流器的第二三相电流进行处理得到多个第二零序电流，然后根据多个第二零序电流确定第一偏差值，具体地，首先对逆变侧电流通过零序电流提取模块，分解出3、9、15等零序电流成分，再将这些电流成分进行傅里叶反变换，转变为时域信号，然后将其幅值作为第一偏差值。同时通过第二三相电压、设定的有功功率以及设定的无功功率得到第二偏差值和第三偏差值。进一步地，根据第四电流和第二偏差值进行PID跟踪得到第三电压，根据第五电流和第三偏差值进行PID跟踪得到第四电压，根据第六电流和第一偏差值进行PID跟踪得到第五电压。本发明通过利用多个零序电流得到第一偏差值，然后根据第一偏差值和i轴的电流分量进行PID跟踪，从而保证调制波的零序分量无其他高频信号的干扰。图8示出了本发明的一个实施例的储能变流器的控制电路示意图；如图8所示，在储能变流器102的交流侧通过第一电感L1和第二电感L2与电网104中的三线相连接，储能变流器102的直流侧分别设置有第一电容C1和第二电容C2，同时在第一电感L1和第二电感L2之间设置有第三电容C3、第四电容C4以及第五电容C5，第三电容C3、第四电容C4以及第五电容C5为滤波电容，在第三电容C3、第四电容C4以及第五电容C5的公共点O点与电网104的N线之间设置有第一开关128。当第一开关128处于闭合状态时，储能变流器102处于三相四线制系统中，当第一开关128处于断开状态时，储能变流器102处于三相三线制系统中。当储能变流器102处于三相三线制系统中，第一PWM信号的生成过程为：首先，将电网104三相电压经过锁相回路106锁定相位θ，然后将逆变侧电流经第一坐标变换模块126将三相坐标系转为dq坐标系，从而得到d轴信号Id和q轴信号Iq，然后根据储能变流器102的设定的有功功率和电网104电压有效值计算得到Id*，根据储能变流器102的设定的无功功率和电网104电压有效值计算得到Iq*。然后分别进行PID跟踪控制，输出信号分别为Ud、Uq，具体地，将d轴信号Id和Id* 输入至第一PID控制器116中输出Ud，将q轴信号Iq和Iq* 输入至第二PID控制器120中输出Uq，然后根据Ud、Uq和相位θ在第二坐标变换模块122转换为三相坐标系，并根据转换后的三相坐标系生成调制信号，最后通过PWM模块124产生需要的PWM信号。图9示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之八；其中，第二PWM信号的生成过程为：步骤902：对N线电流进行离散化；步骤904：经过傅里叶变换，提取出3、9、15次等零序分量；步骤906：经过傅里叶反变换，将提取出的零序分量转换时域信号，作为零序电流调制的给定。在该实施例中，如图8所示，当储能变流器102位于三相四线制系统中，第二PWM信号的生成过程为：由于三相四线制系统中的第四桥臂是采用电容中点引出直接接入电网104系统的N线，因此储能变流器102的N线上除了有零序电流外，还有丰富的高频成分，这些高频谐波如果叠加到调制波上，将造成PWM控制信号的不准确，进而影响储能变流器102运行的稳定性，因此需要对零序电流进行抗干扰运算处理。首先对逆变侧电流通过零序电流提取模块114，分解出3、9、15等零序电流成分，再将这些电流成分进行傅里叶反变换，转变为时域信号，其幅值作为零序电流调制的给定I0*，与dq变换后的I0差值后PID跟踪，保证调制波的零序分量无其他高频信号的干扰。也就是说，在三相四线制系统中，逆变侧电流经第一坐标变换模块126将三相坐标系转为dqi坐标系，从而得到d轴信号Id、q轴信号Iq以及i轴信号I0。然后根据储能变流器102的设定的有功功率和电网104电压有效值计算得到Id*，根据储能变流器102的设定的无功功率和电网104电压有效值计算得到Iq*，以及上述步骤计算得到的零序电流调制的给定I0*。将d轴信号Id和Id* 输入至第一PID控制器116中输出Ud，将q轴信号Iq和Iq* 输入至第二PID控制器120中输出Uq，将i轴信号I0和I0* 输入至第三PID控制器118中输出Ui。然后根据Ud、Uq、Ui和相位θ在第二坐标变换模块122转换为三相坐标系，并根据转换后的三相坐标系生成调制信号，最后通过PWM模块124产生需要的PWM信号。图10示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之九；其中，过零点位置检测的步骤包括：步骤1002：对N线电流进行离散化；步骤1004：对离散化数据平滑滤波，剔除扰动数据；步骤1006：剔除最大、最小值，求平均值Ii；步骤1008：判断Ii-1＜Ii＜Ii+1且Ii~0或者Ii-1＞Ii＞Ii+1且Ii~0；若结果为N，则执行步骤1006，若结果为Y，则执行步骤1010；步骤1010：波形在过零点，产生脉冲信号，控制开关。在该实施例中，如图8所述，第一开关128的控制由零序电流提取模块114、过零检测模块112、控制驱动电路110和开关粘连检测模块108等部分组成。其中，零序电流提取模块114用于首先对三相电流信号进行离散化，经过傅里叶变换，提取出3次、9次、15次等零序电流，为下一步过零检测、零序电流调制和开关粘连状态判断做准备。过零检测模块112能够对过零点位置进行检测，具体地，首先根据电流的采样数值，对连续5次或者更多次采样数值进行平滑滤波，剔除最大值，最小值，然后求得平均值Ii，再根据数值的变化趋势，由正变负，或者由负变正，依此判断过零点位置，即当Ii-1＜Ii＜Ii+1且Ii~0或者Ii-1＞Ii＞Ii+1且Ii~0时，可以认为该位置为过零点位置，此时对第一开关128进行开通关断操作。控制驱动电路110用于在检测到过零点位置后，控制系统产生脉冲信号，经过控制驱动电路110给到第一开关128，以达到第一开关128的开通和关断的目的。图11示出了本发明的一个实施例的储能变流器的控制方法的流程示意图之十；其中，第一开关粘连检测的步骤包括：步骤1102：对N线第一开关闭合时构成三相四线制系统；步骤1104：检测N线零序电流以及相电压Uxn1；步骤1106：下发断开第一开关的指令；步骤1108：检测N线零序电流以及相电压Uxn2；步骤1110：判断N线零序电流是否为0；若结果为N，则执行步骤1108，若结果为Y，则执行步骤1112；步骤1112：判断是否相电压Uxn1-相电压Uxn2＞10V；若结果为Y，则执行步骤1114，若结果为N，则执行步骤1110；步骤1114：第一开关无粘连。在该实施例中，开关粘连检测模块108用于对第一开关128在断开后是否粘连进行检测，其具体过程为：首先将第一开关128闭合，形成三相四线制系统。然后检测N线上的零序电流和相电压Uxn1。然后将第一开关128断开，检测此时N线上的零序电流和相电压Uxn2。进一步地，对N线上的零序电流进行判断，如果零序电流为0，则说明此时第一开关128进行断开，继续对Uxn1和Uxn2进行判断，如果Uxn1比Uxn2大10V以上，则说明第一开关128此时完全断开，即第一开关128在断开后不存在粘连的情况。图12示出了本发明的一个实施例的储能变流器的控制系统的示意框图；其中，储能变流器的控制系统1200包括：第一获取模块1202，用于获取储能变流器的电池电压、储能变流器的电网侧的第一相电压和线电压；第一确定模块1204，用于根据电池电压、第一相电压以及线电压，确定储能变流器的工作模式；第一处理模块1206，用于基于储能变流器的工作模式为三相三线制模式时，控制第一开关处于断开状态，以使储能变流器处于三相三线制系统中，并生成第一脉冲宽度调制信号；第一控制模块1208，用于根据第一脉冲宽度调制信号控制储能变流器工作；第二处理模块1210，用于基于储能变流器的工作模式为三相四线制模式时，获取中性线的第一电流；第三处理模块1212，用于根据第一电流确定第一开关闭合的时间点并控制第一开关闭合，以使储能变流器处于三相四线制系统中，并生成第二脉冲宽度调制信号；第二控制模块1214，用于根据第二脉冲宽度调制信号控制储能变流器工作。本发明提供的储能变流器的控制系统1200，首先在储能变流器与外部电网之间设置多个滤波电容，然后在多个滤波电容的公共点至外部电网的中性线之间设置一个第一开关，通过第一开关的闭合和断开，使得储能变流器在三相四线制系统与三相三线制系统之间无缝、连续地进行切换。进一步地，储能变流器的控制系统1200主要包括：第一获取模块1202、第一确定模块1204、第一处理模块1206、第一控制模块1208、第二处理模块1210、第三处理模块1212以及第二控制模块1214。其中，首先第一获取模块1202获取储能变流器的直流侧的电池电压，同时根据储能变流器电网侧电压获取第一相电压和线电压。然后第一确定模块1204根据电池电压、第一相电压以及线电压之间的数值关系，从而确定储能变流器工作在哪种工作模式中，其中，工作模式分为三相三线制模式和三相四线制模式。当储能变流器的工作模式为三相三线制模式时，第一处理模块1206控制第一开关处于断开状态，由于第一开关处于断开状态，储能变流器与中性线断开连接，因此储能变流器此时会处于三相三线制系统中，进而通过三相三线制系统发出的电能生成第一脉冲宽度调制信号，从而第一控制模块1208利用第一脉冲宽度调制信号控制储能变流器工作。当储能变流器的工作模式为三相四线制模式时，在三相四线制系统中存在中性线，因此第二处理模块1210需要获取中性线的第一电流，第三处理模块1212通过第一电流确定第一开关闭合的时间点，然后在到达第一开关闭合的时间点时控制第一开关闭合，从而使得储能变流器与三相四线制系统中的中性线相连接，进而使得储能变流器能够工作在三相四线制系统中，并通过三相四线制系统发出电能生成第二脉冲宽度调制信号，从而第二控制模块1214利用第二脉冲宽度调制信号控制储能变流器工作。本发明通过根据储能变流器的电池电压、第一相电压以及线电压之间的关系来确定储能变流器的工作模式，进而根据储能变流器的不同的工作模式来控制滤波电容的公共点至外部电网的中性线之间的第一开关，从而使得储能变流器能够在三相四线制系统与三相三线制系统之间进行切换，同时根据储能变流器位于不同的系统中，生成不同的脉冲宽度调制信号，进而根据不同的脉冲宽度调制信号控制储能变流器进行工作。本发明使得储能变流器能够同时适应三相三线制系统和三相四线制系统，从而当电网的线制发生变化时，不再需要更换储能变流器或者通过人为的方式对储能变流器进行升级来适应线制的变化。在一些实施例中，可选地，第一确定模块1204具体用于根据第一相电压确定第一阈值；根据线电压确定第二阈值；基于电池电压大于第一阈值时，确定储能变流器的工作模式为三相四线制模式；基于电池电压大于第二阈值且小于第一阈值时，确定储能变流器的工作模式为三相三线制模式。在该实施例中，第一确定模块1204具体用于根据第一相电压确定第一阈值，根据线电压确定第二阈值，当电池电压大于第一阈值时，储能变流器的工作模式为三相四线制模式；当电池电压大于第二阈值且小于第一阈值时，储能变流器的工作模式为三相三线制模式。具体地，第一阈值可以为2×1.414×第一相电压，第二阈值可以为1.414×线电压。对于三相三线制系统，储能变流器的交流侧线电压即线电压可以为U1，储能变流器的直流侧的电池电压最小值Ddc1=1.414U1；对于三相四线制系统，因为有中性线的存在，三相变流器是作为三个单相变流器进行控制，储能变流器的交流侧相电压即第一相电压可以为U2，因此储能变流器的直流侧电池电压最小值Ddc2=2×1.414U2；进一步地，U1=1.732U2，Ddc1=1.414×1.732U2，Ddc1＜Ddc2。因此，三相四线制系统中的储能变流器在放电模式下需要更高的电池电压。也就是在输出交流电压相同的情况下，三相四线制系统中的储能变流器对电池电压的利用范围比三相三线制系统中的储能变流器低，因此，储能变流器在运行时根据电池电压值可以采取不同运行策略，当电池电压Udc＞2×1.414U2时，储能变流器工作在三相四线制模式，支持单相负载设备；当1.414U1＜Udc＜2×1.414U2，储能变流器工作在三相三线制模式。在一些实施例中，可选地，第三处理模块1212具体用于对第一电流进行离散化操作；对离散化后的第一电流进行处理得到第一电流的平均值；根据平均值确定第一电流的过零点位置；根据过零点位置确定第一开关闭合的时间点并控制第一开关闭合。在该实施例中，第三处理模块1212首先对第一电流进行离散化操作，然后对离散化的第一电流进行处理得到第一电流的平均值，具体地，处理过程可以为根据第一电流的采样数值，对连续5次或者更多次采样数值进行平滑滤波，剔除其中的最大值和最小值，然后根据剩余的采样数据求得平均值。进一步地，根据得到平均值确定第一电流的过零点位置，具体地，可以根据数值的变化趋势，由正变负或者由负变正，从而判断出第一电流的过零点位置，然后将第一电流达到过零点位置时所在时间点作为第一开关闭合的时间点，进而在到达第一开关闭合的时间点时控制第一开关闭合。由于第一开关在闭合和断开的过程中，会生成比较大的冲击，如果叠加在交流信号的波峰或者波谷位置，会损害第一开关，因此在电流的过零点位置闭合和断开第一开关能够更加可靠、安全。进一步地，控制第一开关闭合的方法可以为当检测到第一电流处于过零点位置时，控制系统产生脉冲信号，然后将脉冲信号通过驱动电路发送至第一开关，以使得第一开关闭合。在一些实施例中，可选地，第一处理模块1206还用于获取第一开关断开前的储能变流器的电网侧的第二相电压；获取第一开关断开后的中性线上的第一零序电流以及储能变流器的电网侧的第四相电压；基于第一零序电流为零，且第二相电压与第四相电压之间的差值大于第三预设阈值时，确定第一开关没有粘连。在该实施例中，第一处理模块1206还用于当第一开关断开后，需要检测第一开关的断开是否存在断开不彻底、有粘连的情况。具体地，首先在第一开关断开前获取储能变流器的电网侧的第二相电压，然后第一开关断开，获取第一开关断开后中性线上的第一零序电流以及储能变流器的电网侧的第四相电压，当第一零序电流为零，并且第二相电压与第四相电压之间的差值大于第三预设阈值时，说明第一开关没有粘连，即第一开关处于完全断开状态。其中，第三预设阈值可以为10伏。通过在第一开关进行断开时，判断第一开关的断开是否存在断开不彻底、有粘连的情况，从而保证了储能变流器在工作过程中的安全性。在一些实施例中，可选地，第一处理模块1206还用于获取三相三线制系统中电网的第一三相电压和储能变流器的第一三相电流；根据第一三相电压确定第一三相电压的第一相位；对第一三相电流进行坐标转换得到第二电流和第三电流；对第二电流和第三电流进行处理得到第一电压和第二电压；根据第一电压、第二电压以及第一相位得到第一脉冲宽度调制信号。在该实施例中，第一处理模块1206还用于获取三相三线制系统中电网的第一三相电压和储能变流器的第一三相电流，其中，第一三相电流为储能变流器逆变桥的桥口侧的三相电流，然后根据第一三相电压确定第一三相电压的第一相位。然后对第一三相电流进行坐标转换得到第二电流和第三电流，其中，坐标转换指的是将三相坐标系转换为旋转坐标系，dq坐标系是按照电网角速度逆时针旋转的同步旋转坐标系，常用于电力电子和电机控制等领域中，以实现对电机运行状态的精确控制和分析。在dq坐标系中，储能变流器的第一三相电流可以被分解为d轴分量即第二电流，q轴分量即第三电流。在得到第二电流和第三电流后，分别对第二电流和第三电流进行处理得到第一电压和第二电压，具体地，可以利用比例-积分-微分控制器对第二电流进行处理得到第一电压，对第三电流进行处理得到第二电压。进一步地，再根据第一电压、第二电压以及第一相位进行坐标转换，由dq坐标系转换为三相坐标系，最后根据三相坐标系的电压得到第一脉冲宽度调制信号。在一些实施例中，可选地，第三处理模块1212还用于获取三相四线制系统中电网的第二三相电压和储能变流器的第二三相电流；根据第二三相电压确定第二三相电压的第二相位；对第二三相电流进行坐标转换得到第四电流、第五电流以及第六电流；对第四电流、第五电流以及第六电流进行处理得到第三电压、第四电压以及第五电压；根据第三电压、第四电压、第五电压以及第二相位得到第二脉冲宽度调制信号。在该实施例中，第三处理模块1212还用于获取三相四线制系统中电网的第二三相电压和储能变流器的第二三相电流，其中，第二三相电流为储能变流器逆变桥的桥口侧的三相电流。然后根据第二三相电压确定第二三相电压的第二相位。然后对储能变流器的第二三相电流进行坐标转换得到第四电流、第五电流以及第六电流，其中，坐标转换指的是将三相坐标系转换为旋转坐标系，dqi坐标系中d轴代表直轴，与电机的磁场方向一致；q轴代表交轴，与d轴垂直，并与电机的转矩生成方向一致；i轴是另一个垂直于d轴和q轴的轴，通常用于表示电机的电流分量。在dqi坐标系中，储能变流器的第二三相电流可以被分解为d轴分量即第四电流，q轴分量即第五电流以及i轴分量即第六电流。在得到第四电流、第五电流以及第六电流后，分别对第四电流、第五电流以及第六电流进行处理得到第三电压、第四电压以及第五电压，具体地，可以利用PID控制器对第四电流进行处理得到第三电压，对第五电流进行处理得到第四电压以及对第六电流进行处理得到第五电压。进一步地，再根据第三电压、第四电压、第五电压以及第二相位进行坐标转换，由dqi坐标系转换为三相坐标系，最后根据三相坐标系的电压得到第二脉冲宽度调制信号。在一些实施例中，可选地，第三处理模块1212还用于对第二三相电流进行处理得到第二零序电流；根据第二零序电流确定第一偏差值；根据第二三相电压、设定的有功功率以及设定的无功功率确定第二偏差值和第三偏差值；根据第四电流、第五电流、第六电流、第一偏差值、第二偏差值以及第三偏差值得到第三电压、第四电压以及第五电压。在该实施例中，当储能变流器工作在三相四线制系统时，因为三相四线制系统中有中性线，因此会有零序电流流过，此外由于三相四线制系统中的第四桥臂是采用电容中点引出直接接入电网系统的中性线，因此储能变流器的中性线上除了有零序电流外，还有丰富的高频成分，这些高频谐波如果叠加到调制波上，将造成PWM控制信号的不准确，进而影响储能变流器运行的稳定性，因此需要对零序电流进行抗干扰运算处理。即第三处理模块1212还需要对储能变流器的第二三相电流进行处理得到多个第二零序电流，然后根据多个第二零序电流确定第一偏差值，具体地，首先对逆变侧电流通过零序电流提取模块，分解出3、9、15等零序电流成分，再将这些电流成分进行傅里叶反变换，转变为时域信号，然后将其幅值作为第一偏差值。同时通过第二三相电压、设定的有功功率以及设定的无功功率得到第二偏差值和第三偏差值。进一步地，根据第四电流和第二偏差值进行PID跟踪得到第三电压，根据第五电流和第三偏差值进行PID跟踪得到第四电压，根据第六电流和第一偏差值进行PID跟踪得到第五电压。本发明通过利用多个零序电流得到第一偏差值，然后根据第一偏差值和i轴的电流分量进行PID跟踪，从而保证调制波的零序分量无其他高频信号的干扰。图13示出了本发明的一个实施例的电子设备的示意框图；其中，电子设备130包括存储器1302、处理器1304及存储在存储器1302上并可在处理器1304上运行的计算机程序，处理器1304执行计算机程序时实现如上述任一项的储能变流器的控制方法的步骤。本发明提供的电子设备130，处理器1304执行计算机程序时实现上述储能变流器的控制方法的步骤，能够实现上述任一实施例的技术效果，不再赘述。本发明第四方面的实施例，提出了一种存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现如上述任一项的储能变流器的控制方法的步骤。本发明提供的存储介质，计算机程序被处理器执行时实现上述储能变流器的控制方法的步骤，能够实现上述任一实施例的技术效果，不再赘述。在本说明书的描述中，术语“第一”、“第二”仅用于描述的目的，而不能理解为指示或暗示相对重要性，除非另有明确的规定和限定；术语“连接”、“安装”、“固定”等均应做广义理解，例如，“连接”可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是直接相连，也可以通过中间媒介间接相连。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本发明中的具体含义。在本说明书的描述中，术语“一个实施例”、“一些实施例”、“具体实施例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或实例。而且，描述的具体特征、结构、材料或特点可以在任何的一个或多个实施例或示例中以合适的方式结合。以上所述仅为本发明的优选实施例而已，并不用于限制本发明，对于本领域的技术人员来说，本发明可以有各种更改和变化。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
