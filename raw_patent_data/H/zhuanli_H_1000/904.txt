标题title
一种5G手机数据流量监控方法和系统
摘要abst
本发明公开了一种5G手机数据流量监控方法和系统，涉及通信技术领域，包括：采集用户流量数据，建立流量参考库、APP价值库和APP流量与网络请求关系库；获取本月剩余流量和日期信息，计算需要流量和使用系数；实时监测使用系数，若发生变化，提醒用户；若使用系数未超标且满足预设条件，询问用户是否需要开启流量限制；若用户同意，则对APP进行限流处理。通过根据本月剩余天数计算出每日的流量需求。其次，将每日流量需求分为工作日和节假日两类，以更细致地反映用户在不同时间段的实际流量需求；比较计算出的每日流量需求与剩余流量，可以直观地判断剩余流量是否充足，并在必要时提醒用户，省去了用户需要自行判断的困扰。
权利要求书clms
1.一种5G手机数据流量监控方法，其特征在于，包括：S1、采集用户的流量使用数据，根据流量使用数据建立流量参考库，采集用户的日使用数据，根据日使用数据，建立APP价值库，采集APP数据，建立APP流量与网络请求关系库；S2、获取本月剩余流量数和本月剩余日期数据，根据流量参考库计算需要流量数，根据需要流量数和本月剩余流量数计算使用系数；S3、实时监测使用系数，当使用系数发生变化时，获取使用系数，判断是否/＞，若是则转到步骤S31，若否，则判断是否/＞，若是则转到步骤S4，其中/＞和/＞为预设值，且；S31、向用户发送提醒消息；S4、向用户询问是否需要开启流量限制，等待用户响应，若用户同意，则继续执行步骤S5；S5、获取用户手机发送的网络请求，将网络请求分为两个队列，使用限流方法处理两个队列中的网络请求。2.根据权利要求1所述的5G手机数据流量监控方法，其特征在于，所述S2步骤每天在预设的至少一个时间点执行，所述S5步骤持续执行，直至监测到使用系数或用户主动停止。3.根据权利要求1所述的5G手机数据流量监控方法，其特征在于，所述流量使用数据包括使用日期和使用日流量，所述根据流量使用数据建立流量参考库包括：S111、采集用户至少三十天的流量使用数据；S112、建立分类流量集，所述分类流量集包括工作日流量集和节假日流量集；S113、获取流量使用数据，将使用日期为工作日的使用日流量，存入工作日流量集，将使用日期为节假日的使用日流量，存入节假日流量集；S114、计算工作日流量集中使用日流量的平均值，并将结果记为，计算节假日流量集中使用日流量的平均值，并将结果记为/＞；S115、使用和/＞组成流量参考库。4.根据权利要求1所述的5G手机数据流量监控方法，其特征在于，所述日使用数据包括APP编号、APP类型、APP日流量和APP日使用时长，所述APP编号唯一且与APP一一对应，所述APP类型包括社交类、工具类、购物类、娱乐类和其它类，所述建立APP价值库包括：S121、建立基础价值数组，所述基础价值数组/＞初始化为/＞，所述基础价值数组P中每个元素对应有一个APP类型，其中/＞对应社交类，/＞对应工具类，/＞对应购物类，/＞对应娱乐类，/＞对应其它类；S122、采集至少十天的日使用数据得到日使用数据集，删除日使用数据集/＞中APP日流量小于预设阈值的日使用数据，得到日使用数据集/＞；S123、从日使用数据集中选择任一APP编号，将该APP编号对应的日使用数据，从日使用数据集/＞中提取出来，并组成计算数组/＞，计算APP平均日流量/＞和APP平均日使用时长，APP平均日流量/＞的计算公式为：，式中表示计算数组/＞中第/＞个元素中APP日流量/＞；APP平均日使用时长计算公式为：，式中表示计算数组/＞中第/＞个元素中APP日使用时长/＞，/＞表示计算数组A中的元素总数；S124、计算APP的价值，APP的价值计算公式表示为：，式中为APP的价值，/＞为根据APP类型获取的对应基础价值数组/＞中的元素，/＞为自然对数，/＞和/＞为修正常数；S125、将APP编号与的值相关联，获得一个价值对；S126、转至步骤S123，直至日使用数据集为空；S127、使用获取到的所有价值对组成APP价值库。5.根据权利要求1所述的5G手机数据流量监控方法，其特征在于，所述建立APP流量与网络请求关系库包括：S131、采集累计T时间内，APP使用的总流量，同时采集APP发送的网络请求总数/＞，所述T时间大于或等于一小时；S132、计算APP流量与网络请求数量的关系，/＞的计算公式表示为/＞；S133、获取APP的APP编号，将APP编号与的值相关联，获得一个关系对；S134、重复上述步骤S131至S133，使用获得的关系对组成APP流量与网络请求关系库。6.根据权利要求1所述的5G手机数据流量监控方法，其特征在于，所述根据流量参考库计算需要流量数包括：S21、获取本月剩余日期数据，所述剩余日期不包括获取的当日，根据剩余日期数据，获取剩余日期中工作日的天数、节假日的天数/＞，S22、使用如下公式计算需要流量数：；所述计算使用系数S包括：S23、获取本月剩余流量数；S24、使用如下公式计算使用系数S：。7.根据权利要求4所述的5G手机数据流量监控方法，其特征在于，所述将网络请求分为两个队列包括：S511、建立队列PQ和队列NQ，拦截手机发送的网络请求；S512、获取网络请求中的用户代理信息，根据用户代理信息确定发送网络请求的APP，判断发送网络请求的APP是否为前台运行APP；S513、若是则将网络请求放入队列PQ中，否则将网络请求放入队列NQ中。8.根据权利要求1所述的5G手机数据流量监控方法，其特征在于，所述使用限流方法处理两个队列中的网络请求包括：S521、建立令牌桶，初始化令牌桶的大小为，/＞为大于1的整数；S521、获取手机前台运行APP的APP编号，根据获取的APP编号设定令牌生成速率；S522、判断队列PQ是否为空，若否，则使令牌桶从队列PQ中提取一个网络请求，若是，则使令牌桶从队列NQ中提取一个网络请求；S523、令牌桶提取到一个网络请求后，检查令牌桶中的令牌数是否大于或等于1；S524、若是，则将网络请求发送至服务器，并从令牌桶中减去一个令牌，若否，则等待令牌产生，直至令牌桶中的令牌数大于或等于1后，将网络请求发送至服务器，并从令牌桶中减去一个令牌；S525、令牌桶将一个网络请求发送至服务器后，检查前台运行APP是否发生变更；S526、若否，则转到步骤S522，若是，则将队列PQ和队列NQ清空，并转到步骤S521。9.根据权利要求8所述的5G手机数据流量监控方法，其特征在于，所述根据获取的APP编号设定令牌生成速率包括：设定预期流量，获取今日的日期数据，若今日为工作日，则使/＞，否则使；根据APP编号，APP平均日使用时长；根据APP编号从APP价值库中，获取对应的值并记为；根据APP编号从APP流量与网络请求关系库中，获取对应的值并记为；计算令牌生成速率，所述令牌生成速率的计算公式表示为：，式中，表示令牌生成速率，/＞和/＞为修正常数。10.一种5G手机数据流量监控系统，用于实现权利要求1~9任一项所述的5G手机数据流量监控方法，其特征在于，包括参考模块、流量监控模块、判断模块、交互模块和流量控制模块，其中：参考模块，用于采集用户的流量使用数据，根据流量使用数据建立流量参考库，采集用户的日使用数据，根据日使用数据，建立APP价值库，采集APP数据，建立APP流量与网络请求关系库；流量监控模块，用于获取本月剩余流量数和本月剩余日期数据，根据流量参考库计算需要流量数，根据需要流量数和本月剩余流量数计算使用系数；判断模块，用于实时监测使用系数，当使用系数发生变化时，获取使用系数，判断是否，若是则向用户发送提醒消息，若否则判断是否/＞，若是则转到交互模块，其中和/＞为预设值，且/＞；交互模块，向用户询问是否需要开启流量限制，等待用户响应，若用户同意，则转到流量控制模块；流量控制模块，获取用户手机发送的网络请求，将网络请求分为两个队列，使用限流方法处理两个队列中的网络请求。
说明书desc
技术领域本发明涉及通信技术领域，具体为一种5G手机数据流量监控方法和系统。背景技术随着终端技术的发展，智能手机等智能终端已经成为人们日常生活必不可少的一部分，上网作为智能终端最基础的功能之一，需要通过运营商提供数据业务进行上网，随着5G技术的发展，网速得到了显著的提升，但这也带来了手机流量使用量的大幅增加。由于5G网络的传输速度和带宽容量大幅提升，用户可以更快地下载和上传数据，这使得许多应用程序和在线服务消耗的流量急剧增加。现有技术中公开号为CN108848522A的中国专利提出了一种基于大数据的手机流量监控方法，其通过引入第三方流量监控客户端来客观的记录用户手机实际消耗的流量数据，并与运营商统计流量进行比对，流量统计更具有客观性，更能被用户认可；其次，提供了流量校准机制，以供运营商及时对不准确的流量统计作出重新计算调整，实现了用户与运营商的流量管理的双向互动，提高了流量管理的效率；最后，在用户与运营商对流量使用无法达成一致后将流量记录发送给监管机构，以实现流量统计的仲裁管理，进一步提高了流量管理的客观性和说服力。尽管该方法在理论上为用户提供了校准后的流量消耗和剩余流量信息，但实际上，它仅仅是一个被动的数据展示工具。用户在接收到这些信息后，需要自行判断当前的流量是否足够应对接下来的使用需求。更进一步地，由于该方法并未提供主动的流量控制功能，用户不能有效地控制流量使用量，容易超出预定的流量限制，从而导致额外的费用。发明内容针对现有技术存在的，仅仅是一个被动的数据展示工具的问题，本发明的目的在于提供一种5G手机数据流量监控方法和系统。本发明的目的可以通过以下技术方案实现：一种5G手机数据流量监控方法，包括：S1、采集用户的流量使用数据，根据流量使用数据建立流量参考库，采集用户的日使用数据，根据日使用数据，建立APP价值库，采集APP数据，建立APP流量与网络请求关系库；S2、获取本月剩余流量数和本月剩余日期数据，根据流量参考库计算需要流量数，根据需要流量数和本月剩余流量数计算使用系数；S3、实时监测使用系数，当使用系数发生变化时，获取使用系数，判断是否，若是则转到步骤S31，若否则判断是否，若是则转到步骤S4，其中和为预设值，且；S31、向用户发送提醒消息；S4、向用户询问是否需要开启流量限制，等待用户响应，若用户同意，则继续执行步骤S5；S5、获取用户手机发送的网络请求，将网络请求分为两个队列，使用限流方法处理两个队列中的网络请求。首先，通过根据本月剩余天数计算出每日的流量需求。其次，将每日流量需求分为工作日和节假日两类，以更细致地反映用户在不同时间段的实际流量需求。这种分类依据用户实际使用数据得出，因此更贴近用户的真实情况。最后，通过比较计算出的每日流量需求与剩余流量，我们可以直观地判断剩余流量是否充足，并在必要时提醒用户，省去了用户自行判断的困扰。这种方式不仅提高了流量需求的计算精度，也增强了流量充足度判断的准确性。进一步的，所述S2步骤每天在预设的至少一个时间点执行，所述S5步骤持续执行，直至监测到使用系数或用户主动停止。进一步的，所述流量使用数据包括使用日期和使用日流量，所述根据流量使用数据建立流量参考库包括：S111、采集用户至少三十天的流量使用数据；S112、建立分类流量集，所述分类流量集包括工作日流量集和节假日流量集；S113、获取流量使用数据，将使用日期为工作日的使用日流量，存入工作日流量集，将使用日期为节假日的使用日流量，存入节假日流量集；S114、计算工作日流量集中使用日流量的平均值，并将结果记为，计算节假日流量集中使用日流量的平均值，并将结果记为；S115、使用和组成流量参考库。进一步的，所述日使用数据包括APP编号、APP类型、APP日流量和APP日使用时长，所述APP编号唯一且与APP一一对应，所述APP类型包括社交类、工具类、购物类、娱乐类和其它类，所述建立APP价值库包括：S121、建立基础价值数组，所述基础价值数组初始化为，所述基础价值数组P中每个元素对应有一个APP类型，其中对应社交类，对应工具类，对应购物类，对应娱乐类，对应其它类；S122、采集至少十天的日使用数据得到日使用数据集，删除日使用数据集中APP日流量小于预设阈值的日使用数据，得到日使用数据集；S123、从日使用数据集中选择任一APP编号，将该APP编号对应的日使用数据，从日使用数据集中提取出来，并组成计算数组，计算APP平均日流量和APP平均日使用时长，APP平均日流量的计算公式为：，式中表示计算数组中第个元素中APP日流量；APP平均日使用时长计算公式为：，式中表示计算数组中第个元素中APP日使用时长，表示计算数组A中的元素总数；S124、计算APP的价值，APP的价值计算公式表示为：，式中为APP的价值，为根据APP类型获取的对应基础价值数组中的元素，为自然对数，和为修正常数；S125、将APP编号与的值相关联，获得一个价值对；S126、转至步骤S123，直至日使用数据集为空；S127、使用获取到的所有价值对组成APP价值库。进一步的，所述建立APP流量与网络请求关系库包括：S131、采集累计T时间内，APP使用的总流量，同时采集APP发送的网络请求总数，所述T时间大于或等于一小时；S132、计算APP流量与网络请求数量的关系，的计算公式表示为；S133、获取APP的APP编号，将APP编号与的值相关联，获得一个关系对；S134、重复上述步骤S131至S133，使用获得的关系对组成APP流量与网络请求关系库。进一步的，所述根据流量参考库计算需要流量数包括：S21、获取本月剩余日期数据，所述剩余日期不包括获取的当日，根据剩余日期数据，获取剩余日期中工作日的天数、节假日的天数，S22、使用如下公式计算需要流量数：；所述计算使用系数S包括：S23、获取本月剩余流量数；S24、使用如下公式计算使用系数S：。进一步的，所述将网络请求分为两个队列包括：S511、建立队列PQ和队列NQ，拦截手机发送的网络请求；S512、获取网络请求中的用户代理信息，根据用户代理信息确定发送网络请求的APP，判断发送网络请求的APP是否为前台运行APP；S513、若是则将网络请求放入队列PQ中，否则将网络请求放入队列NQ中。进一步的，所述使用限流方法处理两个队列中的网络请求包括：S521、建立令牌桶，初始化令牌桶的大小为，为大于1的整数；S521、获取手机前台运行APP的APP编号，根据获取的APP编号设定令牌生成速率；S522、判断队列PQ是否为空，若否则使令牌桶从队列PQ中提取一个网络请求，若是，则使令牌桶从队列NQ中提取一个网络请求；S523、令牌桶提取到一个网络请求后，检查令牌桶中的令牌数是否大于或等于1；S524、若是，则将网络请求发送至服务器，并从令牌桶中减去一个令牌，若否，则等待令牌产生，直至令牌桶中的令牌数大于或等于1后，将网络请求发送至服务器，并从令牌桶中减去一个令牌；S525、令牌桶将一个网络请求发送至服务器后，检查前台运行APP是否发生变更；S526、若否则转到步骤S522，若是则将队列PQ和队列NQ清空，并转到步骤S521。通过将流量剩余情况，进一步细分为可调控和不可调控两种情境。当流量处于可调控状态时，我们采用令牌桶算法来主动控制APP的流量使用。这一算法能够协助用户更好地管理流量，降低超出预定流量的可能性，从而减少不必要的费用支出。同时，通过调整令牌桶算法中令牌的生成速率，我们可以在保障用户体验与控制流量消耗之间找到一个平衡点。这样，用户既能享受到流畅的网络体验，又能有效控制数据流量的消耗。进一步的，所述根据获取的APP编号设定令牌生成速率包括：设定预期流量，获取今日的日期数据，若今日为工作日，则使，否则使；根据APP编号，APP平均日使用时长；根据APP编号从APP价值库中，获取对应的值并记为；根据APP编号从APP流量与网络请求关系库中，获取对应的值并记为；计算令牌生成速率，所述令牌生成速率的计算公式表示为：，式中，表示令牌生成速率，和为修正常数。一种5G手机数据流量监控系统，用于实现一种5G手机数据流量监控方法，包括参考模块、流量监控模块、判断模块、交互模块和流量控制模块，其中：参考模块，用于采集用户的流量使用数据，根据流量使用数据建立流量参考库，采集用户的日使用数据，根据日使用数据，建立APP价值库，采集APP数据，建立APP流量与网络请求关系库；流量监控模块，用于获取本月剩余流量数和本月剩余日期数据，根据流量参考库计算需要流量数，根据需要流量数和本月剩余流量数计算使用系数；判断模块，用于实时监测使用系数，当使用系数发生变化时，获取使用系数，判断是否，若是则向用户发送提醒消息，若否则判断是否，若是则转到交互模块，其中和为预设值，且；交互模块，向用户询问是否需要开启流量限制，等待用户响应，若用户同意，则转到流量控制模块；流量控制模块，获取用户手机发送的网络请求，将网络请求分为两个队列，使用限流方法处理两个队列中的网络请求。本发明提供了一种5G手机数据流量监控方法和系统。具备以下有益效果：1、首先，通过根据本月剩余天数计算出每日的流量需求。其次，将每日流量需求分为工作日和节假日两类，以更细致地反映用户在不同时间段的实际流量需求。这种分类依据用户实际使用数据得出，因此更贴近用户的真实情况。最后，通过比较计算出的每日流量需求与剩余流量，我们可以直观地判断剩余流量是否充足，并在必要时提醒用户，省去了用户需要自行判断的困扰。这种方式不仅提高了流量需求的计算精度，也增强了流量充足度判断的准确性。2、通过将流量剩余情况，进一步细分为可调控和不可调控两种情况。当流量处于可调控状态时，我们采用令牌桶算法来主动控制APP的流量使用。这一算法能够协助用户更好地管理流量，降低超出预定流量的可能性，从而减少不必要的费用支出。同时，通过调整令牌桶算法中令牌的生成速率，我们可以在保障用户体验与控制流量消耗之间找到一个平衡点。这样，用户既能享受到流畅的网络体验，又能有效控制数据流量的消耗。附图说明图1为本发明一种5G手机数据流量监控方法的流程示意图；图2为本发明一种5G手机数据流量监控方法和系统的令牌桶原理示意图；图3为本发明一种5G手机数据流量监控系统的结构示意图。具体实施方式 下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例一请参照图1-2，本发明提供一种5G手机数据流量监控方法，包括如下步骤：S1、采集用户的流量使用数据，根据流量使用数据建立流量参考库，采集用户的日使用数据，根据日使用数据，建立APP价值库，采集APP数据，建立APP流量与网络请求关系库；所述流量使用数据包括使用日期和使用日流量，所述根据流量使用数据建立流量参考库包括：S111、采集用户至少三十天的流量使用数据；S112、建立分类流量集，所述分类流量集包括工作日流量集和节假日流量集；S113、获取流量使用数据，将使用日期为工作日的使用日流量，存入工作日流量集，将使用日期为节假日的使用日流量，存入节假日流量集；S114、计算工作日流量集中使用日流量的平均值，并将结果记为，计算节假日流量集中使用日流量的平均值，并将结果记为；S115、使用和组成流量参考库。本实施例中，可以使用手机操作系统自带的日历软件，判断使用日期判断为工作日、节假日，本实施例中收集用户三十天的流量使用数据，由于通常情况下工作日和节假日用户的手机流量使用情况差异较大，因此将流量使用数据分为工作日和节假日两种情况考虑，分别计算平均值，作为用户工作日和节假日，一日需要使用的参考流量数，更加符合用户的实际使用情况。所述日使用数据包括APP编号、APP类型、APP日流量和APP日使用时长，所述APP编号唯一且与APP一一对应，所述APP类型包括社交类、工具类、购物类、娱乐类和其它类，所述建立APP价值库包括：S121、建立基础价值数组，所述基础价值数组初始化为，所述基础价值数组P中每个元素对应有一个APP类型，其中对应社交类，对应工具类，对应购物类，对应娱乐类，对应其它类；S122、采集至少十天的日使用数据得到日使用数据集，删除日使用数据集中APP日流量小于预设阈值的日使用数据，得到日使用数据集；S123、从日使用数据集中选择任一APP编号，将该APP编号对应的日使用数据，将其从日使用数据集中提取出，并组成计算数组，计算APP平均日流量，计算APP平均日使用时长，并将APP平均日使用时长与APP编号关联后存储，所述APP平均日流量的计算公式为：，式中表示计算数组中第个元素中APP日流量；所述APP平均日使用时长计算公式为：，式中表示计算数组中第个元素中APP日使用时长，表示计算数组A中的元素总数；S124、计算APP的价值，APP的价值计算公式表示为：，式中为APP的价值，为根据APP类型获取的对应基础价值数组中的元素，为自然对数，和为修正常数；S125、将APP编号与的值相关联，获得一个价值对；S126、转至步骤S123，直至日使用数据集为空；S127、使用获取到的所有价值对组成APP价值库。需要说明的是APP编号是每个APP都有的，用于标识自身的唯一标识符，本实例中APP类型可以通过APP自身信息获得，并将自身信息中类型为社交类、工具类、购物类、娱乐类之外的类型，归类为其他类，基础价值数组中各类型对应的基础价值，基础值越大表示价值越大，用于表现通常情况下APP对用户的价值。但是针对不同用户APP的价值可能有所不同，因此在本实例采集用户十天的日使用数据，将用户使用APP的时长作为判断APP对于用户价值的依据，APP的使用时长越长，APP对用户的价值则越高，同时由于控制数据流量的需求，单位时间内消耗流量越多的APP，相应的价值就越小，和的值分别对应，APP的使用时长和APP单位时间内消耗流量，对APP价值的影响程度，和的值越大，则影响程度越高，本实施例中和的值均可设置为1.1，通过上述方法计算出每个APP对用户的价值，更加符合用户自身使用特点，可为后续对不同APP进行流量控制时，提供有价值的数据参考。所述建立APP流量与网络请求关系库包括：S131、采集累计T时间内，APP使用的总流量，同时采集APP发送的网络请求总数，所述T时间大于或等于一小时；S132、计算APP流量与网络请求数量的关系，的计算公式表示为；S133、获取APP的APP编号，将APP编号与的值相关联，获得一个关系对；S134、重复上述步骤S131至S133，使用获得的关系对组成APP流量与网络请求关系库。需要说明的是，本发明中提到的“网络请求”，均表示应用程序向服务器发送的网络请求，用于获取或提交数据，网络请求通常由请求方法、请求头、用户代理、请求体等部分组成；本实例中，采集APP一个小时内使用的流量数，与APP发送的网络请求数，建立APP流量与网络请求关系库，为后续通过限制APP发送网络请求的速度，进而控制APP流量消耗提供数据参考，使得后续对APP流量消耗的限制更精确。S2、获取本月剩余流量数和本月剩余日期数据，根据流量参考库计算需要流量数，根据需要流量数和本月剩余流量数计算使用系数；所述根据流量参考库计算需要流量数包括：S21、获取本月剩余日期数据，所述剩余日期不包括获取的当日，根据剩余日期数据，获取剩余日期中工作日的天数、节假日的天数，S22、使用如下公式计算需要流量数：；所述计算使用系数S包括：S23、获取本月剩余流量数；S24、使用如下公式计算使用系数S：。本实施例中获取剩余流量的方式是，通过短信或网络等方法向运营商获取，获取本月剩余日期数据，根据剩余日期数据，获取剩余日期中工作日的天数、节假日的天数的方式可以是通过系统自带的日历程序获取，通过区分工作日和节假日的对流量使用需求的不同，计算出的本剩余日期的需要流量，更加的准确，再使用需要流量与剩余流量的比值作为使用系数，使用系数越大说明剩余流量越充足，因此可以根据使用系数的值，作为后续操作的依据。S3、实时监测使用系数，当使用系数发生变化时，获取使用系数，判断是否，若是则转到步骤S31，若否则判断是否，若是则转到步骤S4，其中和为预设值，且；S31、向用户发送提醒消息；本实例中，的值设置为0.6，的值设置为0.8，若使用系数，则表明剩余流量少于需要，且难以通过限流等方式弥补差距，因此需要向用户发送提醒消息，告知用户流量已经明显不足了，发送提醒的方式可以是手机通知栏消息、弹窗消息等。S4、向用户询问是否需要开启流量限制，等待用户响应，若用户同意，则继续执行步骤S5；若使用系数，则表明剩余流量少于需要的流量，但可以通过限流等方式弥补差距，由于限流可能会降低用户的使用体验，因此向用户发送询问信息，询问用户是否开启限流，发送询问信息的方式可以是手机通知栏消息、弹窗消息等。S5、获取用户手机发送的网络请求，将网络请求分为两个队列，使用限流方法处理两个队列中的网络请求。所述将网络请求分为两个队列包括：S511、建立队列PQ和队列NQ，拦截手机发送的网络请求；S512、获取网络请求中的用户代理信息，根据用户代理信息确定发送网络请求的APP，判断发送网络请求的APP是否为前台运行APP；S513、若是则将网络请求放入队列PQ中，否则将网络请求放入队列NQ中。需要说明的是前台运行APP，是指在用户界面上可见的运行模式，通常意味着该APP正在与用户互动或显示其界面，通过判断网络请求是否由前台运行APP发送，将请求放入两个队列，以实现对网络请求设置优先级的效果。所述使用限流方法处理两个队列中的网络请求包括：S521、建立令牌桶，初始化令牌桶的大小为，为大于1的整数；S521、获取手机前台运行APP的APP编号，根据获取的APP编号设定令牌生成速率；所述根据获取的APP编号设定令牌生成速率包括：设定预期流量，获取今日的日期数据，若今日为工作日，则使，否则使；根据APP编号，APP平均日使用时长；根据APP编号从APP价值库中，获取对应的值并记为；根据APP编号从APP流量与网络请求关系库中，获取对应的值并记为；计算令牌生成速率，所述令牌生成速率的计算公式表示为：，式中，表示令牌生成速率，和为修正常数。S522、判断队列PQ是否为空，若否则使令牌桶从队列PQ中提取一个网络请求，若是，则使令牌桶从队列NQ中提取一个网络请求；S523、令牌桶提取到一个网络请求后，检查令牌桶中的令牌数是否大于或等于1；S524、若是，则将网络请求发送至服务器，并从令牌桶中减去一个令牌，若否，则等待令牌产生，直至令牌桶中的令牌数大于或等于1后，将网络请求发送至服务器，并从令牌桶中减去一个令牌；S525、令牌桶将一个网络请求发送至服务器后，检查前台运行APP是否发生变更；S526、若否则转到步骤S522，若是则将队列PQ和队列NQ清空，并转到步骤S521。需要说明的是令牌桶，是一种常用于流量控制的算法，可以看作是一个存放令牌的容器，其容量是预先设定的。系统按设定令牌生成速率向桶中放置令牌，网络请求只有获取到令牌才可向服务器发送，因此可以通过控制令牌生成速率，来控制网络请求向服务器发送的速率，进而实现对流量的控制；本实例中通过优先处理队列PQ中的网络请求，以实现对前台运行APP的网络请求优先处理的效果，通过使用系数、流量参考库中的参考流量和前台运行APP的流量与网络请求关系，三者间的运算，获取一个令牌总数的值，这表示将令牌总数控制在该值时，可将前台运行APP使用流量控制在合适的范围，将令牌总数值与APP平均日使用时长，进行运算后即为合适的令牌生成速率，同时考虑前台运行APP的价值，令牌生成速率随价值升高而相应增加，调节控制流量与保证用户体验间的平衡，和用于修正价值对令牌生成速率的影响程度，本实施例中的值可以为1，的值可以为3。所述S2步骤每天在预设的至少一个时间点执行，所述S5步骤持续执行，直至监测到使用系数或用户主动停止。预设的时间可以通过用户自行设置，设置的时间点越多，对流量监控越频繁，对流量监控的精细度就越高，可以根据用户需求自行设定，用户主动停止程序的方式可以是清楚本发明的系统进程。实施例二请参阅图3，本发明提供一种5G手机数据流量监控系统，用于实现一种5G手机数据流量监控方法，其特征在于，包括参考模块、流量监控模块、判断模块、交互模块和流量控制模块，其中：参考模块，用于采集用户的流量使用数据，根据流量使用数据建立流量参考库，采集用户的日使用数据，根据日使用数据，建立APP价值库，采集APP数据，建立APP流量与网络请求关系库；流量监控模块，用于获取本月剩余流量数和本月剩余日期数据，根据流量参考库计算需要流量数，根据需要流量数和本月剩余流量数计算使用系数；判断模块，用于实时监测使用系数，当使用系数发生变化时，获取使用系数，判断是否，若是则向用户发送提醒消息，若否则判断是否，若是则转到交互模块，其中和为预设值，且；交互模块，向用户询问是否需要开启流量限制，等待用户响应，若用户同意，则转到流量控制模块；流量控制模块，获取用户手机发送的网络请求，将网络请求分为两个队列，使用限流方法处理两个队列中的网络请求。本领域普通技术人员可以意识到，结合本文中所公开的实施例描述的各示例的单元及算法步骤，能够以电子硬件或者计算机软件和电子硬件的结合来实现。这些功能究竟以硬件还是软件方式来执行，取决于技术方案的特定应用和设计约束条件。专业技术人员可以对每个特定的应用来使用不同方法来实现所描述的功能，但是这种实现不应认为超出本申请的范围。所属领域的技术人员可以清楚地了解到，为描述的方便和简洁，上述描述的系统、装置和单元的具体工作过程，可以参考前述方法实施例中的对应过程，在此不再赘述。在本申请所提供的几个实施例中，应该理解到，所揭露的系统、装置和方法，可以通过其它的方式实现。例如，以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种航道水下地形变化分析系统及方法逻辑功能划分，实际实现时可以有另外的划分方式，例如多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。另外，在本申请各个实施例中的各功能单元可以集成在一个处理单元中，也可以是各个单元单独物理存在，也可以两个或两个以上单元集成在一个单元中。以上所述，仅为本申请的具体实施方式，但本申请的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本申请揭露的技术范围内，可轻易想到变化或替换，都应涵盖在本申请的保护范围之内。因此，本申请的保护范围应以所述权利要求的保护范围为准。最后：以上所述仅为本发明的优选实施例而已，并不用于限制本发明，凡在本发明的精神和原则之内，所做的任何修改等同替换、改进等，均应包含在本发明的保护范围之内。
