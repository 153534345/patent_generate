标题title
一种电动牙刷的充电控制方法和系统
摘要abst
本发明属于电动牙刷技术领域，本发明公开了一种电动牙刷的充电控制方法和系统；包括：获取使用人员的历史使用数据，并将历史使用数据进行预处理，得到预使用数据；根据预使用数据构建使用者的改进充电朴素贝叶斯模型；当电动牙刷充电时获取后验概率，并利用改进充电朴素贝叶斯模型预测使用者的刷牙时间段；根据预测的刷牙时间段预设充电模式；根据使用者是否在预测的刷牙时间段内使用电动牙刷，实时调整后验概率；得到调整后的后验概率；根据调整后的后验概率实时调整使用者的改进充电朴素贝叶斯模型；实现了智能化和个性化的充电控制，既方便用户使用，又能节省能源、保护电池。
权利要求书clms
1.一种电动牙刷的充电控制方法，其特征在于，包括：步骤1、获取使用人员的历史使用数据，并将历史使用数据进行预处理，得到预使用数据；步骤2、根据预使用数据构建使用者的改进充电朴素贝叶斯模型；步骤3、当电动牙刷充电时获取后验概率，并利用改进充电朴素贝叶斯模型预测使用者的刷牙时间段；步骤4、根据预测的刷牙时间段预设充电模式；根据使用者是否在预测的刷牙时间段内使用电动牙刷，实时调整后验概率；得到调整后的后验概率；步骤5、根据调整后的后验概率实时调整使用者的改进充电朴素贝叶斯模型。2.根据权利要求1所述的一种电动牙刷的充电控制方法，其特征在于，电动牙刷内置存储芯片；存储芯片用于记录不少于k年的历史使用数据；历史使用数据包括刷牙数据和充电数据；刷牙数据包括每次刷牙的开始时间点、时长和刷头压力；充电数据包括充电开始时间、充电结束时间、充电量、充电后可使用时长。3.根据权利要求2所述的一种电动牙刷的充电控制方法，其特征在于，所述将历史使用数据进行预处理的方式包括：筛查并删除存储芯片记录的历史使用数据中的非正常的刷牙数据和非正常的充电数据，得到有效历史使用数据；所述非正常的刷牙数据包括刷牙时长小于j秒或大于h分钟，非正常的充电数据为充电时长小于g分钟；所述j、h和g的数值是通过分析n组历史使用数据获取，获取方式包括：从刷牙数据中，选择f条具有代表性的刷牙时间数据，进行K-means聚类分析；设置K-means聚类分析中的K值，即为K种聚类模式；所述刷牙时间数据为每次刷牙的开始时间点和时长；针对每一种聚类模式，获取统计信息；统计信息包括聚类模式的时长范围、聚类模式的平均时长和聚类模式所占总体数据的比例；根据统计信息判断出1至2种聚类模式代表用户的非正常刷牙情况；根据非正常刷牙情况获取刷牙时长的上限h和下限j；和获取j和h数值的方式相同，获取g的数值；从充电数据中，选择f条具有代表性的充电时间数据，所述充电时间数据包括充电开始时间和充电结束时间；将有效历史使用数据根据开始时间点的先后顺序排列成使用序列；将使用序列中的每个刷牙数据生成唯一的ID，链接刷牙开始和结束事件，作为后续处理的刷牙记录标识符；所述刷牙开始和结束事件包括开始时间点、时长、刷头压力；将一天24小时按照1小时为间隔，分为24个时间段；遍历使用序列，统计每一时间段内开始时间点的数量；得到不同时间段的刷牙次数分布；遍历使用序列，统计每一时间段内刷牙的时长并进行均值，获取每一时间段内的平均刷牙时长；分析并获取使用序列中的刷头压力分布；将全部时间段的平均刷牙时长进行聚类，得到使用者的刷牙时长偏好；刷牙时长偏好包括短时、中时和长时；将刷头压力分布进行统计学概括，得到使用者的刷牙压力偏好；刷牙压力偏好包括强压、中压和弱压；遍历使用序列，统计充电开始时间分布、平均充电时长以及充电量分布，并整合计算出平均单次充电后可使用时长；预使用数据包括刷牙次数分布、刷牙时长偏好、刷牙压力偏好、充电开始时间分布、平均充电时长、充电量分布和平均单次充电后可使用时长。4.根据权利要求3所述的一种电动牙刷的充电控制方法，其特征在于，所述构建使用者的改进充电朴素贝叶斯模型的方式包括：步骤201、定义Cj表示第j个时间段，且j=1,2,...24；定义Bu表示在时间段Cj下的第u种综合刷牙条件，u=1,2,...9；定义P表示第j个时间段的充电先验概率；定义P表示在时间段Cj下的u个综合条件概率；步骤202、遍历预使用数据中的充电开始时间分布，统计每个时间段内充电开始的次数，与总充电次数计算比例，得到每个时间段的充电先验概率P；在每个时间段内进行条件概率获取操作；得到所有时间段的刷牙条件概率；所述条件概率获取操作的过程包括：统计不同刷牙时长偏好的刷牙次数，计算其占对应时间段内总刷牙次数的比例，即得到每个时间段下不同刷牙时长偏好条件概率P，k=1、2、3；即P、P和P分别代表短时、中时和长时对应的条件概率；统计不同刷牙压力偏好的刷牙次数，计算其占该时间段内总刷牙次数的比例，即得到每个时间段下不同刷牙压力偏好的条件概率P；即P、P和P分别代表强压、中压和弱压对应的条件概率；将P和P进行合并，即得到综合刷牙条件的刷牙条件概率P；步骤203、根据充电量分布、平均充电时长和平均单次充电后可使用时长，计算每个时间段的平均可使用时长与整个使用序列的可使用时长总和的比例，即得到每个时间段的使用时长条件概率P；将P与P相乘，得到每个时间段下的9个综合条件概率Pu；步骤204、将每个时间段Cj的P与对应时间段下9个Pu相乘，构成每个时间段Cj的朴素贝叶斯模型；构建出24个时间段的朴素贝叶斯模型，将24个时间段的朴素贝叶斯模型组合使用，即构成使用者的改进充电朴素贝叶斯模型。5.根据权利要求4所述的一种电动牙刷的充电控制方法，其特征在于，所述后验概率的获取方式包括：当电动牙刷插入充电座开始充电时，获取当前的充电开始时间，并确定当前的充电开始时间所属24个时间段Cj中的时间段；根据当前时间段Cj读取对应的先验概率P，并读取Cj时间段下9种综合刷牙条件的条件概率P至P；将P与9种条件概率P至P分别相乘，得到当前时间段Cj下9种综合刷牙条件的后验概率Pu。6.根据权利要求5所述的一种电动牙刷的充电控制方法，其特征在于，所述利用改进充电朴素贝叶斯模型预测使用者的刷牙时间段的方式包括：根据当前时间段Cj下9种综合刷牙条件的后验概率Pu，计算出当前时间段Cj下，每种刷牙时长偏好对应的预测概率，即短时的预测概率P、中时的预测概率P和长时的预测概率P；和获取刷牙时长偏好对应的预测概率的方式相同，计算出当前时间段Cj下，每种刷牙压力偏好对应的预测概率，即强压的预测概率P、中压的预测概率P和弱压的预测概率P；将短时的预测概率P、中时的预测概率P、长时的预测概率P、强压的预测概率P、中压的预测概率P和弱压的预测概率P进行加权统计，得到当前时间段Cj下每种刷牙时间段的综合预测概率P。7.根据权利要求6所述的一种电动牙刷的充电控制方法，其特征在于，所述预设充电模式的方式包括：将预测概率的值最大的前R个时间段进行排序划分，将R个时间段中预测概率的值最大的时间段设置为首要刷牙时间段，将R个时间段中预测概率的值次高的为次要时间段，以此类推；根据电动牙刷当前电量状况，判断是否满足首要刷牙时间段所需电量；若当前电量满足首要刷牙时间段所需电量，则预设的充电模式为低速充电模式；若当前电量不足满足首要刷牙时间段所需电量，则计算应满足的充电量，并预设的充电模式为快速充电模式；在满足首要刷牙时间段的电量需求的前提下，判断次要时间段的电量需求，若当前电量不满足次要时间段的电量需求，则将次要时间段的充电模式也预设为快速充电模式，并将快速充电模式的结束时间预设为首要刷牙时间段开始前p分钟；根据使用者的刷牙时间段的电量需求，设计储电梯形充电方案；所述储电梯形充电方案为充电模式从低速充电模式逐步升至快速充电模式，在最后一个刷牙时间段前逐步降至低速充电模式。8.根据权利要求7所述的一种电动牙刷的充电控制方法，其特征在于，所述实时调整后验概率的方式包括：若用户在某一预测使用者的刷牙时间段内开始使用电动牙刷刷牙；则确认用户进行了预测时间段的刷牙；对该时间段的刷牙时长偏好和压力偏好对应的后验概率进行增强；若用户在任一预测使用者的刷牙时间段内并未使用电动牙刷刷牙，则降低预测使用者的刷牙时间段的牙时长偏好和压力偏好对应的后验概率。9.根据权利要求8所述的一种电动牙刷的充电控制方法，其特征在于，所述使用人员的改进充电朴素贝叶斯模型的实时调整方式包括：将调整后的后验概率反馈输入到改进充电朴素贝叶斯模型中，覆盖原有的后验概率数据；遍历调整后的后验概率，按照短时、中时、长时的刷牙时长偏好以及强压、中压、弱压的刷牙压力偏好，更新模型中各个时间段下的刷牙条件概率，即改进充电朴素贝叶斯模型中的P；将更新后的各个时间段的刷牙条件概率与各自对应时间段的使用时长条件概率相乘；得到更新后的综合条件概率；按照贝叶斯定理，更新后的综合条件概率结合充电先验概率P，重新计算得到当前阶段下每个时间段的朴素贝叶斯模型；将重新计算得到的24个时间段的朴素贝叶斯模型重新构建为用户的改进充电朴素贝叶斯预测模型。10.一种电动牙刷的充电控制系统，用于实现权利要求1至9中任一项所述的一种电动牙刷的充电控制方法，其特征在于，包括：数据获取处理模块，用于获取使用人员的历史使用数据，并将历史使用数据进行预处理，得到预使用数据；模型构建模块，用于根据预使用数据构建使用者的改进充电朴素贝叶斯模型；时间段预测模块，用于当电动牙刷充电时获取后验概率，并利用改进充电朴素贝叶斯模型预测使用者的刷牙时间段；充电模式及调整模块，用于根据预测的刷牙时间段预设充电模式；根据使用者是否在预测的刷牙时间段内使用电动牙刷，实时调整后验概率；得到调整后的后验概率；模型调整模块，用于根据调整后的后验概率实时调整使用者的改进充电朴素贝叶斯模型；各个模块之间通过有线和/或无线的方式进行连接，实现模块间的数据传输。
说明书desc
技术领域本发明涉及电动牙刷技术领域，更具体地说，本发明涉及一种电动牙刷的充电控制方法和系统。背景技术申请公开号为CN111682623A的专利公开了一种电动牙刷的充电控制方法、装置、充电设备及电动牙刷，涉及电动牙刷的技术领域，该方法包括：如果监测到电动牙刷离开所述充电底座的提示信号，向所述电动牙刷发送建立通信连接的通信请求，以与所述电动牙刷建立通信；获取所述电动牙刷的电量信息；根据所述电量信息确定所述充电底座的工作模式，并在对应的所述工作模式下，对所述电动牙刷的充电状态进行控制。解决了无需用户手动去开启充电底座来给电动牙刷充电，整个充电过程无需用户进行手动操作的技术问题。但是现有的电动牙刷充电控制方式较为简单，通常采用普通充电器的固定充电模式，无法根据不同用户的刷牙时间和习惯来智能调节充电参数，容易造成用户充电后电量剩余过多而白白浪费，或者充电不足无法支持完整的刷牙时长，无法满足用户的实际使用需求；现有充电控制缺乏像学习用户使用习惯那样的算法，无法通过分析用户的刷牙时间和压力偏好数据，实时调整充电策略来更好地适应用户刷牙习惯的变化，往往采取的充电模式也缺乏科学的电量控制，容易导致用户过度充电或者充电不足，缩短电池的使用寿命，增加用户的维修和更换成本。鉴于此，本发明提出一种电动牙刷的充电控制方法和系统以解决上述问题。发明内容为了克服现有技术的上述缺陷，为实现上述目的，本发明提供如下技术方案：一种电动牙刷的充电控制方法，包括：步骤1、获取使用人员的历史使用数据，并将历史使用数据进行预处理，得到预使用数据；步骤2、根据预使用数据构建使用者的改进充电朴素贝叶斯模型；步骤3、当电动牙刷充电时获取后验概率，并利用改进充电朴素贝叶斯模型预测使用者的刷牙时间段；步骤4、根据预测的刷牙时间段预设充电模式；根据使用者是否在预测的刷牙时间段内使用电动牙刷，实时调整后验概率；得到调整后的后验概率；步骤5、根据调整后的后验概率实时调整使用者的改进充电朴素贝叶斯模型。进一步地，电动牙刷内置存储芯片；存储芯片用于记录不少于k年的历史使用数据；历史使用数据包括刷牙数据和充电数据；刷牙数据包括每次刷牙的开始时间点、时长和刷头压力；充电数据包括充电开始时间、充电结束时间、充电量、充电后可使用时长；所述开始时间点、时长、充电的开始时间、结束时间和充电后可使用时长记录到的数据精确到秒。进一步地，所述将历史使用数据进行预处理的方式包括：筛查并删除存储芯片记录的历史使用数据中的非正常的刷牙数据和非正常的充电数据，得到有效历史使用数据；所述非正常的刷牙数据包括刷牙时长小于j秒或大于h分钟，非正常的充电数据为充电时长小于g分钟；所述j、h和g的数值是通过分析n组历史使用数据获取，获取方式包括：从刷牙数据中，选择f条具有代表性的刷牙时间数据，进行K-means聚类分析；设置K-means聚类分析中的K值，即为K种聚类模式；所述刷牙时间数据为每次刷牙的开始时间点和时长；针对每一种聚类模式，获取统计信息；统计信息包括聚类模式的时长范围、聚类模式的平均时长和聚类模式所占总体数据的比例；根据统计信息判断出1至2种聚类模式代表用户的非正常刷牙情况；根据非正常刷牙情况获取刷牙时长的上限h和下限j；和获取j和h数值的方式相同，获取g的数值；从充电数据中，选择f条具有代表性的充电时间数据，所述充电时间数据包括充电开始时间和充电结束时间；将有效历史使用数据根据开始时间点的先后顺序排列成使用序列；将使用序列中的每个刷牙数据生成唯一的ID，链接刷牙开始和结束事件，作为后续处理的刷牙记录标识符；所述刷牙开始和结束事件包括开始时间点、时长、刷头压力；将一天24小时按照1小时为间隔，分为24个时间段；遍历使用序列，统计每一时间段内开始时间点的数量；得到不同时间段的刷牙次数分布；遍历使用序列，统计每一时间段内刷牙的时长并进行均值，获取每一时间段内的平均刷牙时长；分析并获取使用序列中的刷头压力分布；将全部时间段的平均刷牙时长进行聚类，得到使用者的刷牙时长偏好；刷牙时长偏好包括短时、中时和长时；将刷头压力分布进行统计学概括，得到使用者的刷牙压力偏好；刷牙压力偏好包括强压、中压和弱压；遍历使用序列，统计充电开始时间分布、平均充电时长以及充电量分布，并整合计算出平均单次充电后可使用时长；预使用数据包括刷牙次数分布、刷牙时长偏好、刷牙压力偏好、充电开始时间分布、平均充电时长、充电量分布和平均单次充电后可使用时长。进一步地，所述构建使用者的改进充电朴素贝叶斯模型的方式包括：步骤201、定义Cj表示第j个时间段，且j=1,2,...24；定义Bu表示在时间段Cj下的第u种综合刷牙条件，u=1,2,...9；定义P表示第j个时间段的充电先验概率；定义P表示在时间段Cj下的u个综合条件概率；步骤202、遍历预使用数据中的充电开始时间分布，统计每个时间段内充电开始的次数，与总充电次数计算比例，得到每个时间段的充电先验概率P；在每个时间段内进行条件概率获取操作；得到所有时间段的刷牙条件概率；所述条件概率获取操作的过程包括：统计不同刷牙时长偏好的刷牙次数，计算其占对应时间段内总刷牙次数的比例，即得到每个时间段下不同刷牙时长偏好条件概率P，k=1、2、3；即P、P和P分别代表短时、中时和长时对应的条件概率；统计不同刷牙压力偏好的刷牙次数，计算其占该时间段内总刷牙次数的比例，即得到每个时间段下不同刷牙压力偏好的条件概率P；即P、P和P分别代表强压、中压和弱压对应的条件概率；将P和P进行合并，即得到综合刷牙条件的刷牙条件概率P；步骤203、根据充电量分布、平均充电时长和平均单次充电后可使用时长，计算每个时间段的平均可使用时长与整个使用序列的可使用时长总和的比例，即得到每个时间段的使用时长条件概率P；将P与P相乘，得到每个时间段下的9个综合条件概率Pu；步骤204、将每个时间段Cj的P与对应时间段下9个Pu相乘，构成每个时间段Cj的朴素贝叶斯模型；构建出24个时间段的朴素贝叶斯模型，将24个时间段的朴素贝叶斯模型组合使用，即构成使用者的改进充电朴素贝叶斯模型。进一步地，所述后验概率的获取方式包括：当电动牙刷插入充电座开始充电时，获取当前的充电开始时间，并确定当前的充电开始时间所属24个时间段Cj中的时间段；根据当前时间段Cj读取对应的先验概率P，并读取Cj时间段下9种综合刷牙条件的条件概率P至P；将P与9种条件概率P至P分别相乘，得到当前时间段Cj下9种综合刷牙条件的后验概率Pu。进一步地，所述利用改进充电朴素贝叶斯模型预测使用者的刷牙时间段的方式包括：根据当前时间段Cj下9种综合刷牙条件的后验概率Pu，计算出当前时间段Cj下，每种刷牙时长偏好对应的预测概率，即短时的预测概率P、中时的预测概率P和长时的预测概率P；和获取刷牙时长偏好对应的预测概率的方式相同，计算出当前时间段Cj下，每种刷牙压力偏好对应的预测概率，即强压的预测概率P、中压的预测概率P和弱压的预测概率P；将短时的预测概率P、中时的预测概率P、长时的预测概率P、强压的预测概率P、中压的预测概率P和弱压的预测概率P进行加权统计，得到当前时间段Cj下每种刷牙时间段的综合预测概率P。进一步地，所述预设充电模式的方式包括：将预测概率的值最大的前R个时间段进行排序划分，将R个时间段中预测概率的值最大的时间段设置为首要刷牙时间段，将R个时间段中预测概率的值次高的为次要时间段，以此类推；根据电动牙刷当前电量状况，判断是否满足首要刷牙时间段所需电量；若当前电量满足首要刷牙时间段所需电量，则预设的充电模式为低速充电模式；若当前电量不足满足首要刷牙时间段所需电量，则计算应满足的充电量，并预设的充电模式为快速充电模式；在满足首要刷牙时间段的电量需求的前提下，判断次要时间段的电量需求，若当前电量不满足次要时间段的电量需求，则将次要时间段的充电模式也预设为快速充电模式，并将快速充电模式的结束时间预设为首要刷牙时间段开始前p分钟；根据使用者的刷牙时间段的电量需求，设计储电梯形充电方案；所述储电梯形充电方案为充电模式从低速充电模式逐步升至快速充电模式，在最后一个刷牙时间段前逐步降至低速充电模式。进一步地，所述实时调整后验概率的方式包括：若用户在某一预测使用者的刷牙时间段内开始使用电动牙刷刷牙；则确认用户进行了预测时间段的刷牙；对该时间段的刷牙时长偏好和压力偏好对应的后验概率进行增强；若用户在任一预测使用者的刷牙时间段内并未使用电动牙刷刷牙，则降低预测使用者的刷牙时间段的牙时长偏好和压力偏好对应的后验概率。进一步地，所述使用人员的改进充电朴素贝叶斯模型的实时调整方式包括：将调整后的后验概率反馈输入到改进充电朴素贝叶斯模型中，覆盖原有的后验概率数据；遍历调整后的后验概率，按照短时、中时、长时的刷牙时长偏好以及强压、中压、弱压的刷牙压力偏好，更新模型中各个时间段下的刷牙条件概率，即改进充电朴素贝叶斯模型中的P；将更新后的各个时间段的刷牙条件概率与各自对应时间段的使用时长条件概率相乘；得到更新后的综合条件概率；按照贝叶斯定理，更新后的综合条件概率结合充电先验概率P，重新计算得到当前阶段下每个时间段的朴素贝叶斯模型；将重新计算得到的24个时间段的朴素贝叶斯模型重新构建为用户的改进充电朴素贝叶斯预测模型。一种电动牙刷的充电控制系统，用于实现所述一种电动牙刷的充电控制方法，包括：数据获取处理模块，用于获取使用人员的历史使用数据，并将历史使用数据进行预处理，得到预使用数据；模型构建模块，用于根据预使用数据构建使用者的改进充电朴素贝叶斯模型；时间段预测模块，用于当电动牙刷充电时获取后验概率，并利用改进充电朴素贝叶斯模型预测使用者的刷牙时间段；充电模式及调整模块，用于根据预测的刷牙时间段预设充电模式；根据使用者是否在预测的刷牙时间段内使用电动牙刷，实时调整后验概率；得到调整后的后验概率；模型调整模块，用于根据调整后的后验概率实时调整使用者的改进充电朴素贝叶斯模型；各个模块之间通过有线和/或无线的方式进行连接，实现模块间的数据传输。本发明一种电动牙刷的充电控制方法和系统的技术效果和优点：本发明预测用户刷牙时间制定合理充电策略，采用快充和缓充相结合的储电梯形充电模式，既满足使用需求又保护电池，可以建立精准预测用户刷牙时间的模型制定最优充电方案，利用用户反馈不断调整模型优化策略适应用户变化，实现了智能化和个性化的充电控制，既方便用户使用，又能节省能源、保护电池。附图说明图1为本发明的一种电动牙刷的充电控制方法示意图；图2为本发明的一种电动牙刷的充电控制系统示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例1请参阅图1所示，本实施例所述一种电动牙刷的充电控制方法，包括：步骤1、获取使用人员的历史使用数据，并将历史使用数据进行预处理，得到预使用数据；步骤2、根据预使用数据构建使用者的改进充电朴素贝叶斯模型；步骤3、当电动牙刷充电时获取后验概率，并利用改进充电朴素贝叶斯模型预测使用者的刷牙时间段；步骤4、根据预测的刷牙时间段预设充电模式；根据使用者是否在预测的刷牙时间段内使用电动牙刷，实时调整后验概率；得到调整后的后验概率；步骤5、根据调整后的后验概率实时调整使用者的改进充电朴素贝叶斯模型。所述获取使用人员的历史使用数据的方式包括：电动牙刷内置存储芯片；存储芯片用于记录不少于k年的历史使用数据；所述存储芯片采用非易失性存储器,例如，闪存,即使断电数据也不会丢失；存储芯片容量可以存储至少k年以上的数据；存储芯片通过电动牙刷内的控制器实时写入刷牙和充电相关的数据；数据精确到秒级。历史使用数据包括刷牙数据和充电数据；刷牙数据包括每次刷牙的开始时间点、时长和刷头压力；充电数据包括充电开始时间、充电结束时间、充电量、充电后可使用时长；所述开始时间点、时长、充电的开始时间、结束时间和充电后可使用时长记录到的数据精确到秒级；优选的，历史使用数据通过蓝牙/无线局域网的低功耗方式传输到用户手机的预设App中，并备份到云端。需要说明的是，开始时间点是用使用者开始使用电动牙刷刷牙的准确时间，精确到秒级；时长为记录刷牙开始时间和结束时间，通过结束时间减去开始时间可以计算出刷牙的时长，以秒为单位；刷头压力的获取是通过电动牙刷刷头内置压力传感器，实时检测到刷头与牙齿接触时的压力值，并以数字量格式记录；充电开始时间为当用户插入充电口进行充电时，记录下充电开始的准确时间；充电结束时间为当用户拔出充电口结束充电时，记录下充电结束的准确时间；充电量的获取是通过电动牙刷内置的可检测充电电流的传感器，实时检测并积分计算充电期间的充电电流，得到充电量；充电后可使用时长的获取是根据历史充电数据统计得到1mAh电量可支持使用的平均时长，结合每次充电的充电量，计算出充电后可使用的时长。所述将历史使用数据进行预处理的方式包括：筛查删除存储芯片记录的历史使用数据中的非正常的刷牙数据和非正常的充电数据，以保证数据的有效性，得到有效历史使用数据；所述非正常的刷牙数据包括刷牙时长小于j秒或大于h分钟，非正常的充电数据为充电时长小于g分钟；j、h和g的数值是通过分析n组历史使用数据获取。j、h和g的数值的获取方式包括：从刷牙数据中，选择f条具有代表性的刷牙时间数据，进行K-means聚类分析；设置K-means聚类分析中的K值，即为K种聚类模式；例如，K值设为6，则为6种不同的刷牙时长的聚类模式；所述刷牙时间数据为每次刷牙的开始时间点和时长；针对每一种聚类模式，获取统计信息；统计信息包括聚类模式的时长范围、聚类模式的平均时长和聚类模式所占总体数据的比例；根据统计信息判断出1至2种聚类模式代表用户的非正常刷牙情况；根据非正常刷牙情况获取刷牙时长的上限h和下限j；从充电数据中，选择f条具有代表性的充电时间数据，所述充电时间数据包括充电开始时间和充电结束时间；和获取j和h数值的方式相同，获取g的数值。需要解释的是，所述具有代表性的时间数据可以理解为选择不同时间段的数据，例如，早晚高频率时段和非高频率时段，以反映用户不同时间刷牙和充电的情况；选择刷牙和充电时长具有分布代表性的数据，例如，选择部分时长较短的数据，也选择部分时长较长的数据，以反映用户刷牙和充电时长的分布情况；选择的数据量要足够多，选择的数据越多，越能代表总体情况。进行K-means聚类分析具体的，将使用者刷牙的开始时间点和时长作为样本数据；确定进行K-means聚类时的聚类数K，聚类数K的值的确定通过多次试验比较结果来决定最优的K值；例如，初始设置K=5试试聚类效果；后续在试验的过程中逐步确定最优的K值；将使用者刷牙的开始时间点和时长规范化处理到同一数量级；随机在样本数据中选择K个刷牙数据作为初始的K个聚类中心；计算每个样本数据到K个聚类中心的距离，分配每个样本到距离其最近的聚类；得到分配结果；根据分配结果，重新计算每个聚类的聚类中心；重复上述计算，直到聚类中心不再改变。所述获取统计信息的方式包括：统计K种聚类模式各自的样本数据的数量；找出K种聚类模式各自所有样本数据中刷牙的时长的最小值和最大值，即得到时长范围；将K种聚类模式各自所有样本数据的刷牙时长平均，得到K种聚类模式各自对应的平均时长；将一天划分为不同的时间段，例如，早晚高峰和非高峰时段，统计聚类模式在不同时间段内的样本数量；绘制K种聚类模式各自所有样本数据的刷牙的开始时间点的分布图或频数分布图；计算K种聚类模式各自所有样本数据占全部样本数量的比例。所述非正常刷牙情况的判断方式包括：将刷牙时长过短的聚类模式判断为非正常刷牙情况；将刷牙时长过长的聚类模式也判断为非正常刷牙情况；若某聚类模式中的刷牙次数主要集中在凌晨或夜间非常规时间，判断为使用者的非正常刷牙情况；若某聚类模式下的样本数量占总样本的比例很小，例如，低于5%，则判断为非正常刷牙情况。对于刷牙时长过短的非正常聚类模式，找到其刷牙时长的最大值，加上一个容差时间，作为刷牙时长下限j；例如，某聚类模式时长最长为30秒，则下限j设为45秒；对于刷牙时长过长的非正常聚类模式，找到其刷牙时长的最小值，减去一个容差时间，作为刷牙时长上限h；例如，某聚类模式最短时长为5分30秒，则上限h取为5分钟。所述容差时间的确定过程包括：观察非正常刷牙时长的聚类模式的具体时长分布情况，以及和正常刷牙的边界区别，来确定合理的容差时间；在一个优选的实施例中，容差时间设置为10-20秒。将有效历史使用数据根据开始时间点的先后顺序排列成使用序列；将使用序列中的每个刷牙数据生成唯一的ID，链接刷牙开始和结束事件，作为后续处理的刷牙记录标识符；所述刷牙开始和结束事件包括开始时间点、时长、刷头压力；将一天24小时按照1小时为间隔，分为24个时间段，例如，早7-8点，晚20-21点等；遍历使用序列，统计每一时间段内开始时间点的数量；得到不同时间段的刷牙次数分布；遍历使用序列，统计每一时间段内刷牙的时长，并进行均值，获取每一时间段内的平均刷牙时长；分析并获取使用序列中的刷头压力分布；具体的，将刷头压力划分为若干个范围等级；遍历使用序列，统计每个范围等级的出现次数，也就是刷头压力落在压力区间的刷牙次数；在所有刷牙次数中，计算每个范围等级的样本数量占总数量的概率；绘制出刷头压力的频数分布图或概率密度分布图，直观显示不同压力区间的分布情况。将全部时间段的平均刷牙时长进行聚类，得到使用者的刷牙时长偏好；刷牙时长偏好包括短时、中时和长时；所述得到刷牙时长偏好的聚类方式和获取聚类模式的K-means聚类方式相同；将刷头压力分布进行统计学概括，得到使用者的刷牙压力偏好；刷牙压力偏好包括强压、中压和弱压；遍历使用序列，统计充电开始时间分布、平均充电时长以及充电量分布，并整合计算出平均单次充电后可使用时长。需要说明的是，所述将刷头压力分布进行统计学概括的过程为根据刷头压力的频数分布图或概率密度分布图，将压力分为3个等级区间，即强压、中压和弱压；所述充电开始时间分布为每个时间段内充电开始时间点的数量或占比；计算使用序列中的充电持续时间，充电持续时间即充电结束时间减去充电开始时间；在每个时间段内，计算所有充电数据的充电持续时间，得到不同时间段的平均充电时长；对使用序列中每个充电持续时间，对应获取其充电量，优选的，充电量精确到0.1毫安时；在每个时间段内，将所有充电量取均值，得到不同时间段的平均充电量；将平均充电时长与平均充电量对应相除，得到不同时间段的平均单次充电后可使用时长。预使用数据包括刷牙次数分布、刷牙时长偏好、刷牙压力偏好、充电开始时间分布、平均充电时长、充电量分布和平均单次充电后可使用时长。进一步的，所述构建使用者的改进充电朴素贝叶斯模型的方式包括：步骤201、定义Cj表示第j个时间段，且j=1,2,...24；定义Bu表示在时间段Cj下的第u种综合刷牙条件，u=1,2,...9；定义P表示第j个时间段的充电先验概率；定义P表示在时间段Cj下的u个综合条件概率；步骤202、遍历预使用数据中的充电开始时间分布，统计每个时间段内充电开始的次数，与总充电次数计算比例，得到每个时间段的充电先验概率P；在每个时间段内进行条件概率获取操作；得到所有时间段的刷牙条件概率。所述条件概率获取操作的过程包括：统计不同刷牙时长偏好的刷牙次数，计算其占对应时间段内总刷牙次数的比例，即得到每个时间段下不同刷牙时长偏好的3个条件概率P，k=1、2、3；即P、P和P分别代表短时、中时和长时对应的条件概率；统计不同刷牙压力偏好的刷牙次数，计算其占该时间段内总刷牙次数的比例，即得到每个时间段下不同刷牙压力偏好的条件概率P；即P、P和P分别代表强压、中压和弱压对应的条件概率；将P和P进行合并，即得到综合刷牙条件的刷牙条件概率P；步骤203、根据充电量分布、平均充电时长和平均单次充电后可使用时长，计算每个时间段的平均可使用时长与整个使用序列的可使用时长总和的比例，即得到每个时间段的使用时长条件概率P。具体的，对每个时间段Cj，根据充电量分布统计计算该时间段的平均充电量；根据历史数据统计得到1毫安时电量约可支持使用的平均时长，记为a；将时间段Cj的平均充电量除以a，得到该时间段的平均可使用时长，记为b；对所有时间段Cj计算出其平均可使用时长；计算出全部时间段Cj的可使用时长之和，记为总可使用时长B；对每个时间段Cj，计算平均可使用时长bj与总可使用时长B的比例，即为P；所述历史数据为使用者过去一段时间的电动牙刷使用数据，包含每次刷牙的开始时间、结束时间、充电开始时间、充电结束时间以及每次充电的充电量。将P与P相乘，得到每个时间段下的9个综合条件概率Pu。需要说明的是，所述将P和P进行合并的方式包括：将相同的时间段Cj下的P和P对应组合，即合并为同一个综合刷牙条件下的概率；例如，时间段C1下，短时偏好的P与强压偏好的P合并为P1，代表在C1时间段下短时和强压刷牙的概率；中时和强压的概率P2由P和P合并得出；长时和强压的概率P3由P和P合并；以此类推，通过合并得到时间段Cj下9种综合刷牙条件的概率Pu。步骤204、将每个时间段Cj的P与对应时间段下9个Pu相乘，构成每个时间段Cj的朴素贝叶斯模型；构建出24个时间段的朴素贝叶斯模型，将24个时间段的朴素贝叶斯模型组合使用，即构成使用者的改进充电朴素贝叶斯模型。在一个优选的实施例中，将构建好的改进充电朴素贝叶斯模型以Json格式的数据存储在电动牙刷的存储芯片中，便于后续预测时读取使用。进一步的，所述后验概率的获取方式包括：当电动牙刷插入充电座开始充电时，获取当前的充电开始时间，并确定当前的充电开始时间所属24个时间段Cj中的时间段，例如，当前为早上7点20分，则确定当前时间段为C7；根据当前时间段Cj读取对应的先验概率P，并读取Cj时间段下9种综合刷牙条件的刷牙条件概率P；将P与9种条件概率P至P分别相乘，得到当前时间段Cj下9种综合刷牙条件的后验概率Pu；后验概率Pu表示在当前时间段Cj下，使用者进行不同时长、不同压力刷牙的概率；Pu将用于后续预测使用者的刷牙时间段。进一步的，所述利用改进充电朴素贝叶斯模型预测使用者的刷牙时间段的方式包括：根据当前时间段Cj下9种综合刷牙条件的后验概率Pu，计算出当前时间段Cj下，每种刷牙时长偏好对应的预测概率，即短时的预测概率P、中时的预测概率P和长时的预测概率P。所述每种刷牙时长偏好对应的预测概率的计算方式包括：将后验概率按刷牙时长偏好进行对应的分组，所述对应的分组即为存在短时的后验概率分到短时一组；具体的，其中P1、P2、P3表示短时；P4、P5、P6表示中时；P7、P8、P9表示长时；对属于短时的后验概率求平均，得到短时在当前时间段Cj的预测概率P；对属于中时的后验概率求平均，得到中时在当前时间段Cj的预测概率P；对属于长时的后验概率求平均，得到长时在当前时间段Cj的预测概率P。和每种刷牙时长偏好对应的预测概率的的方式相同，计算出当前时间段Cj下，每种刷牙压力偏好对应的预测概率，即强压的预测概率P、中压的预测概率P和弱压的预测概率P；将短时的预测概率P、中时的预测概率P、长时的预测概率P、强压的预测概率P、中压的预测概率P和弱压的预测概率P进行加权统计，得到当前时间段Cj下每种刷牙时间段的综合预测概率P；即P、P...P。所述加权统计的计算方式为:将时间段Cj的短时、中时和长时的预测概率相加，并与经过实验训练得到的该时长偏好在时间段Cj的权重w11相乘，得到时长乘积值；将时间段Cj的强压、中压和弱压的预测概率相加，并与经过实验训练得到的刷牙压力偏好在时间段Cj的权重w12相乘，得到压力乘积值；将时长乘积值和压力乘积值累加求和，即得到时间段Cj的综合预测概率；对每个时间段S1至S24进行同样的计算，得到每个时间段的综合预测概率P；将24个时间段的预测概率P至P进行排序，选择预测概率的值最大的前R个时间段作为使用者的刷牙时间段；优选的，每次预测完成后，利用实际刷牙数据反馈调整权重w11和w12的数值，不断优化模型的预测精度。需要说明的是，权重w11和w12的获取过程包括：第一步，收集大量的使用者刷牙数据作为训练数据，训练数据包括刷牙时长、刷牙压力以及对应的刷牙时间段；第二步，对训练数据进行统计分析，得到每个时间段内不同刷牙时长偏好和刷牙压力偏好的分布比例；第三步，设置初始权重w11和w12的值，例如，w11和w12的值均取；第四步，使用训练数据、权重w11和w12对不同时间段进行刷牙时间预测，计算预测结果与训练数据的实际刷牙时间的误差；第五步，通过反向传播算法调整w11和w12的值，使预测误差最小化；重复第四步和第五步，直到误差满足要求或者轮数达到设定值；所述误差满足要求和设定值可根据实际情况而定；第六步，得到使预测误差最小化的w11和w12的值，记录为最终的权重。进一步的，所述预设充电模式的方式包括：将预测概率的值最大的前R个时间段进行排序划分，将R个时间段中预测概率的值最大的时间段设置为首要刷牙时间段，将R个时间段中预测概率的值次高的为次要时间段，以此类推；根据电动牙刷当前电量状况，判断是否满足首要刷牙时间段所需电量的充电模式；若当前电量满足首要刷牙时间段所需电量，则预设的充电模式为低速充电模式；用于维护充电牙刷的电池健康；若当前电量不足满足首要刷牙时间段所需电量，则计算应满足的充电量，并预设的充电模式为快速充电模式；在满足首要刷牙时间段的电量需求的前提下，判断次要时间段的电量需求，若当前电量不满足次要时间段的电量需求，则将次要时间段也加入快速充电模式；并将快速充电模式的结束时间预设为首要刷牙时间段开始前p分钟，以防过充而自动切换为低速充电；根据使用者的刷牙时间段的电量需求，设计储电梯形充电方案；所述储电梯形充电方案为充电模式从低速充电模式逐步升至快速充电模式，然后在最后一个刷牙时间段前逐步降至低速充电模式。优选的，实时监测用户的充电情况，若使用者中断充电，则重新评估剩余电量对应的可用时间，并更新充电所需的方案。优选的，计算应满足的充电量的方式包括：根据使用者的历史使用数据，统计出首要刷牙时间段的平均刷牙时长，记为t1；查询电动牙刷的产品手册，得到该产品的额定功率P；根据用户的刷牙习惯，估算刷牙过程中的平均功率p，一般略小于额定功率P；将平均刷牙时长t1和平均功率p相乘，得到首要刷牙时间段所需的总能量E1；查询电动牙刷的电池容量C和电池的额定电压U；将总能量E1转换为电量Q1的单位:Q1=E1/，单位为mAh；获取当前电动牙刷的剩余电量为Q2；计算应满足的充电量Q=Q1-Q2。在一个优选的实施例中，所述低速充电模式和高速充电模式的实现方式包括：将充电器的输出电压自设置为电池额定电压的0.8倍左右，例如，电池额定电压为3.7V，则设置为3V左右；将充电器输出电流设置为0.5C左右，C是电池容量，0.5C表示电池容量的50%。例如，电池容量为2000mAh，则输出电流设置为1000mA左右；采用恒压恒流充电方式，先恒流充电至设定电压值，然后恒压充电；充电期间适当检测电池的温度，控制在40℃以下，实现低速充电模式；将充电器输出电压设置为电池额定电压，例如3.7V；将充电器输出电流设置为1C左右，即电池容量的100%；采用稳压固定电流的方式快速充电；充电期间监测电池的温度，若充电时超过45℃，则降低电流以控制温度；充电电量达到设定值后则退出快速充电模式；实现快速充电模式。进一步的，所述实时调整后验概率的方式包括：若用户在某一预测使用者的刷牙时间段内开始使用电动牙刷刷牙；，则确认用户进行了预测时间段的刷牙；对该时间段的刷牙时长偏好和压力偏好对应的后验概率进行增强；例如，原短时的后验概率为0.3，则增强到0.35；原强压的后验概率0.2，则增强到0.25；若用户在任一预测使用者的刷牙时间段内并未使用电动牙刷刷牙，则降低预测使用者的刷牙时间段的牙时长偏好和压力偏好对应的后验概率，例如，原短时的后验概率为0.3，将其降低到0.25；原强压的后验概率0.2，将其降低到0.15；优选的，根据用户刷牙的具体时长和压力情况，更细致地增强或削弱不同时长和压力偏好的后验概率。具体的，将刷牙时长划分为多个范围，如0-1分钟、1～2分钟、2～3分钟等；每次刷牙结束后，根据刷牙时长属于的范围，确定其所属的刷牙时长偏好的类型，则增强该次刷牙对应时段的中时刷牙后验概率，增加的幅度与超出范围下限的时间成正比，例如，超出1分钟20秒，则增加0.02；同时减弱该次刷牙对应时段非该时长偏好的后验概率，例如，减小短时和长时的后验概率，减小幅度与超出下限时间成正比。监测并记录用户每次刷牙的刷头压力大小，判断刷头压力属于强压、中压或弱压；根据判断的结果增强对应刷牙压力偏好的后验概率，减弱非该压力偏好的后验概率；增强和减弱的幅度根据压力大小的不同进行调整；经过一段时间的监测调整后，后验概率的分布将会更准确地反映出用户的刷牙习惯。进一步的，所述使用人员的改进充电朴素贝叶斯模型的实时调整方式包括：将调整后的后验概率反馈输入到改进充电朴素贝叶斯模型中，覆盖原有的后验概率数据；遍历调整后的后验概率，按照短时、中时、长时的刷牙时长偏好以及强压、中压、弱压的刷牙压力偏好，更新模型中各个时间段下的刷牙条件概率，即改进充电朴素贝叶斯模型中的P；将更新后的各个时间段的刷牙条件概率与各自对应时间段的使用时长条件概率相乘；得到更新后的综合条件概率；按照贝叶斯定理，更新后的综合条件概率结合充电先验概率P，重新计算得到当前阶段下每个时间段的朴素贝叶斯模型。将重新计算得到的24个时间段的朴素贝叶斯模型重新构建为用户的改进充电朴素贝叶斯预测模型。本实施例，预测用户刷牙时间制定合理充电策略，采用快充和缓充相结合的储电梯形充电模式，既满足使用需求又保护电池，可以建立精准预测用户刷牙时间的模型制定最优充电方案，利用用户反馈不断调整模型优化策略适应用户变化，实现了智能化和个性化的充电控制，既方便用户使用，又能节省能源、保护电池。实施例2请参阅图2所示，本实施例未详细叙述部分见实施例1描述内容，在控制电动牙刷充电的过程中，一种电动牙刷的充电控制方法通过电动牙刷的充电控制程序实现，一种电动牙刷的充电控制系统包括：数据获取处理模块，用于获取使用人员的历史使用数据，并将历史使用数据进行预处理，得到预使用数据；模型构建模块，用于根据预使用数据构建使用者的改进充电朴素贝叶斯模型；时间段预测模块，用于当电动牙刷充电时获取后验概率，并利用改进充电朴素贝叶斯模型预测使用者的刷牙时间段；充电模式及调整模块，用于根据预测的刷牙时间段预设充电模式；根据使用者是否在预测的刷牙时间段内使用电动牙刷，实时调整后验概率；得到调整后的后验概率；模型调整模块，用于根据调整后的后验概率实时调整使用者的改进充电朴素贝叶斯模型；各个模块之间通过有线和/或无线的方式进行连接，实现模块间的数据传输。另外，根据本申请的实施方式，一种电动牙刷的充电控制方法附图描述的过程可以被实现为计算机软件程序。例如，本申请提供了非暂时性机器可读存储介质，所述非暂时性机器可读存储介质存储有机器可读指令，所述机器可读指令能够由处理器运行以执行与本申请提供的方法步骤对应的指令，当然，一种电动牙刷的充电控制方法附图所示的架构只是示例性的，在实现不同的设备时，根据实际需要，可以进行适应性选择或者调整。上述公式均是去量纲取其数值计算，公式是由采集大量数据进行软件模拟得到最近真实情况的一个公式，公式中的预设参数以及阈值选取由本领域的技术人员根据实际情况进行设置。以上所述仅是本发明的优选实施方式，本发明的保护范围并不仅局限于上述实施例，凡属于本发明思路下的技术方案均属于本发明的保护范围。应当指出，对于本技术领域的普通技术用户来说，在不脱离本发明原理前提下的若干改进和润饰，这些改进和润饰也应视为本发明的保护范围。
