标题title
一种混合储能容量分配方法、系统、电子设备及介质
摘要abst
本发明公开一种混合储能容量分配方法、系统、电子设备及介质，涉及新能源技术领域。该方法包括：根据电力服务效能信号，以预设时间段内混合储能系统效能最大为目标函数，以SoC约束和ES充放电约束为约束条件，确定混合储能系统的SoC关于时间的曲线；提取混合储能系统的SoC关于时间的曲线中各极值点对应的SoC值和时刻；计算相邻的SoC值之间的差得到变程序列；应用滑动窗口算法，得到多个循环过程以及各循环过程对应的变程；构建变程与效能损耗的关系的数学模型；根据数学模型，应用等耗量微增率原则，计算混合储能系统中各储能在对应的循环过程中的变程。本发明能够提高储能系统的整体工作效率。
权利要求书clms
1.一种混合储能容量分配方法，其特征在于，所述分配方法包括：获取电力服务效能信号；根据电力服务效能信号，以预设时间段内混合储能系统效能最大为目标函数，以SoC约束和ES充放电约束为约束条件，确定混合储能系统的SoC关于时间的曲线；提取所述混合储能系统的SoC关于时间的曲线中各极值点对应的SoC值和时刻，得到按时间排序的多个SoC值；计算相邻的SoC值之间的差，得到变程序列；其中，所述变程序列包括多个变程；各所述变程按照时间顺序排列；根据所述变程序列，应用滑动窗口算法，得到多个循环过程以及各所述循环过程对应的变程；各所述循环过程包括一个连续的充电过程和放电过程；构建各所述循环过程对应的变程与所述预设时间段内所述混合储能系统的效能损耗的关系的数学模型；根据所述数学模型，应用等耗量微增率原则，计算所述混合储能系统中各储能在对应的循环过程中的变程。2.根据权利要求1所述的混合储能容量分配方法，其特征在于，所述预设时间段内为24小时。3.根据权利要求1所述的混合储能容量分配方法，其特征在于，根据所述变程序列，应用滑动窗口算法，得到多个循环过程以及各所述循环过程对应的变程，具体包括：判断固定长度的滑动窗口内中间元素的值是否同时小于所述中间元素相邻元素的值；其中，所述固定长度的滑动窗口内包含三个元素；当所述中间元素的值同时小于所述中间元素相邻元素的值时，所述中间元素对应的时刻为所述循环过程的终止时刻，所述固定长度的滑动窗口内第一元素对应的时刻为所述循环过程的起始时刻，并将所述中间元素的值作为所述循环过程对应的变程。4.根据权利要求1所述的混合储能容量分配方法，其特征在于，所述目标函数为：；所述SoC约束为：；；所述ES充放电约束为：；；；；其中，为储能系统在t时刻的SOC值，/＞为储能在运行日的第一个时刻和最后一个时刻的SoC值相等；/＞为t时刻储能的放电功率，/＞为t时刻储能的充电功率；为混合储能充电功率；/＞为混合储能放电功率；/＞为电力服务效能信号；/＞为SoC的最小值；/＞为SoC的最大值；/＞为混合储能系统放电功率的下限；/＞为混合储能系统放电功率的上限；/＞为混合储能系统充电功率的下限；/＞为混合储能系统充电功率的上限；/＞为一个二进制变量；I为24h内的收益。5.根据权利要求1所述的混合储能容量分配方法，其特征在于，所述数学模型为：；其中，为成本损耗，/＞为在a阶段的里程的n次方；/＞……/＞均为系数常数。6.一种混合储能容量分配系统，其特征在于，所述分配系统包括：获取模块，用于获取电力服务效能信号；曲线确定模块，用于根据电力服务效能信号，以预设时间段内混合储能系统效能最大为目标函数，以SoC约束和ES充放电约束为约束条件，确定混合储能系统的SoC关于时间的曲线；提取模块，用于提取所述混合储能系统的SoC关于时间的曲线中各极值点对应的SoC值和时刻，得到按时间排序的多个SoC值；第一计算模块，用于计算相邻的SoC值之间的差，得到变程序列；其中，所述变程序列包括多个变程；各所述变程按照时间顺序排列；变程确定模块，用于根据所述变程序列，应用滑动窗口算法，得到多个循环过程以及各所述循环过程对应的变程；各所述循环过程包括一个连续的充电过程和放电过程；构建模块，用于构建各所述循环过程对应的变程与所述预设时间段内所述混合储能系统的效能损耗的关系的数学模型；第二计算模块，用于根据所述数学模型，应用等耗量微增率原则，计算所述混合储能系统中各储能在对应的循环过程中的变程。7.一种电子设备，其特征在于，包括存储器及处理器，所述存储器用于存储计算机程序，所述处理器运行所述计算机程序以使所述电子设备执行根据权利要求1至5中任一项所述的混合储能容量分配方法。8.一种计算机可读存储介质，其特征在于，其存储有计算机程序，所述计算机程序被处理器执行时实现如权利要求1至5中任一项所述的混合储能容量分配方法。
说明书desc
技术领域本发明涉及新能源技术领域，特别是涉及一种混合储能容量分配方法、系统、电子设备及介质。背景技术全球对可再生能源资源的需求逐渐增加，预计到2030年，可再生能源将提供全球45%至50%的电力。作为促进可再生能源渗透的关键组成部分，预计储能的装机容量将从2022年的4.8GW增加到2030年的387GW。然而，锂离子储能的频繁充放电显著影响其寿命。因此，采用混合能源储存系统进行协同控制是必要的。随着大规模储能系统的发展，利用不同储存特性集成混合储能已成为该领域的焦点。频率分解方法主要用于识别功率分配点，以便在各种能量系统单元间分配功率。该领域常常使用经验模态分解对混合储能参考功率进行分解，由改进的移动平均滤波器跟随，然后重构其高频和低频成分，以确定储能的平均截止频率和功率曲线上的分叉点，从而进行混合储能的功率分配。然而这仍存在一些局限性：1)基于频率的分解方法主要控制频率分割点但未控制储能单元的功率幅度，这可能导致功率分配后，各储能单元的功率输出超过其充放电功率上限。2)原有方法通常不会阻止不同类型储能的同时充放电，这违反了混合储能的物理约束。3)当前方法中频率分割点的选择有些主观，这些方法都是基于数学工具而非基于物理约束，缺乏现实物理世界的可解释性。这些缺点凸显了更细致的控制策略的必要性，这些策略考虑到混合的物理特性和约束，确保它们在安全限制内运行，同时最大化它们的效率和使用寿命。发明内容本发明的目的是提供一种混合储能容量分配方法、系统、电子设备及介质，能够提高储能系统的整体工作效率。为实现上述目的，本发明提供了如下方案：一种混合储能容量分配方法，所述分配方法包括：获取电力服务效能信号。根据电力服务效能信号，以预设时间段内混合储能系统效能最大为目标函数，以SoC约束和ES充放电约束为约束条件，确定混合储能系统的SoC关于时间的曲线。提取所述混合储能系统的SoC关于时间的曲线中各极值点对应的SoC值和时刻，得到按时间排序的多个SoC值。计算相邻的SoC值之间的差，得到变程序列；其中，所述变程序列包括多个变程；各所述变程按照时间顺序排列。根据所述变程序列，应用滑动窗口算法，得到多个循环过程以及各所述循环过程对应的变程；各所述循环过程包括一个连续的充电过程和放电过程。构建各所述循环过程对应的变程与所述预设时间段内所述混合储能系统的效能损耗的关系的数学模型。根据所述数学模型，应用等耗量微增率原则，计算所述混合储能系统中各储能在对应的循环过程中的变程。可选地，所述预设时间段内为24小时。可选地，根据所述变程序列，应用滑动窗口算法，得到多个循环过程以及各所述循环过程对应的变程，具体包括：判断固定长度的滑动窗口内中间元素的值是否同时小于所述中间元素相邻元素的值；其中，所述固定长度的滑动窗口内包含三个元素。当所述中间元素的值同时小于所述中间元素相邻元素的值时，所述中间元素对应的时刻为所述循环过程的终止时刻，所述固定长度的滑动窗口内第一元素对应的时刻为所述循环过程的起始时刻，并将所述中间元素的值作为所述循环过程对应的变程。可选地，所述目标函数为：。所述SoC约束为：。。所述ES充放电约束为：。。。。其中，为储能系统在t时刻的SOC值，/＞为储能在运行日的第一个时刻和最后一个时刻的SoC值相等；/＞为t时刻储能的放电功率，/＞为t时刻储能的充电功率；/＞为混合储能充电功率；/＞为混合储能放电功率；/＞为电力服务效能信号；/＞为SoC的最小值；/＞为SoC的最大值；/＞为混合储能系统放电功率的下限；/＞为混合储能系统放电功率的上限；/＞为混合储能系统充电功率的下限；/＞为混合储能系统充电功率的上限；/＞为一个二进制变量；I为24h内的收益。可选地，所述数学模型为：。其中，为成本损耗，/＞为在a阶段的里程的n次方；/＞……/＞均为系数常数。一种混合储能容量分配系统，应用上述混合储能容量分配方法，所述分配系统包括获取模块、曲线确定模块、提取模块、第一计算模块、变程确定模块、构建模块和第二计算模块。获取模块，用于获取电力服务效能信号。曲线确定模块，用于根据电力服务效能信号，以预设时间段内混合储能系统效能最大为目标函数，以SoC约束和ES充放电约束为约束条件，确定混合储能系统的SoC关于时间的曲线。提取模块，用于提取所述混合储能系统的SoC关于时间的曲线中各极值点对应的SoC值和时刻，得到按时间排序的多个SoC值。第一计算模块，用于计算相邻的SoC值之间的差，得到变程序列；其中，所述变程序列包括多个变程；各所述变程按照时间顺序排列。变程确定模块，用于根据所述变程序列，应用滑动窗口算法，得到多个循环过程以及各所述循环过程对应的变程；各所述循环过程包括一个连续的充电过程和放电过程。构建模块，用于构建各所述循环过程对应的变程与所述预设时间段内所述混合储能系统的效能损耗的关系的数学模型。第二计算模块，用于根据所述数学模型，应用等耗量微增率原则，计算所述混合储能系统中各储能在对应的循环过程中的变程。一种电子设备，包括存储器及处理器，所述存储器用于存储计算机程序，所述处理器运行所述计算机程序以使所述电子设备执行上述的混合储能容量分配方法。一种计算机可读存储介质，其存储有计算机程序，所述计算机程序被处理器执行时实现上述的混合储能容量分配方法。根据本发明提供的具体实施例，本发明公开了以下技术效果：本发明通过采用等里程损耗微增率的方法解决了通过频率分解后的充放电曲线越限、不同类型储能同时充放电的问题。将传统的通过将充放电曲线的频率分解为高频和低频，转变为分配里程的问题，通过计算混合储能系统中各储能在对应的循环过程中的变程，获得最优分配的各储能的里程，提高了储能系统的整体工作效率。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明基于等里程损耗微增率的混合储能容量分配原理框图。图2为本发明混合储能容量分配方法的实际应用流程图。图3为本发明混合储能容量分配方法流程图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本发明的目的是提供一种混合储能容量分配方法、系统、电子设备及介质，能够提高储能系统的整体工作效率。本发明建立了一种基于等里程损耗微增率法的混合储能里程分配方法，通过该方法能够确定混合储能不同单元的充放电里程及效能。本发明提出了一种更为合理的里程计数法，用于计算里程M数据集合。首先介绍了储能参与电力服务的通用调控模型，通过设定储能效能最大化获得充放电最优求解结果及SoC变化曲线。再通过引入充放电里程模型，定义充放电里程M的选取规则。其次，建立基于寿命损耗的里程损耗模型，确定循环寿命N与效能C之间的数学模型，再通过里程M与循环寿命N的关系推得里程M与效能C的关系式。最后基于里程M与与效能C的关系式并根据等里程损耗微增率求解得最优储能里程分配，因此拟合各储能充放电容量分配结果。为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。实施例一：如图1和图3所示，本发明提供了一种混合储能容量分配方法，所述分配方法包括步骤S1-步骤S7。步骤S1：获取电力服务效能信号。在实际应用中，根据电力服务的需求获得电力服务效能信号，可选地，电力服务效能信号可以为目前市场价格信号。步骤S2：根据电力服务效能信号，以预设时间段内混合储能系统效能最大为目标函数，以SoC约束和ES充放电约束为约束条件，确定混合储能系统的SoC关于时间的曲线。具体地，所述预设时间段内为24小时。在实际应用中，按照目标函数建立混合储能模型获得最优充放电求解结果及SoC变化曲线，以实现储能场站24小时内日效能最大化为目标，建立储能调控模型。在混合储能场站参与电力服务中，首先需要建立其总效能模型，即通过混合储能场站的充放电、风光出力与电力服务效能信号的乘积得到。。式中：、/＞为混合储能充放电功率，/＞为电力服务效能信号。在进行储能调控时，除了效能最大化为目标函数外，还需要满足SoC约束和ES充放电约束等约束条件。具体地，SoC约束为：。。ES充放电约束为：。。。。式中：为储能系统在t时刻的SOC值，/＞为储能在运行日的第一个时刻和最后一个时刻的SoC值相等；/＞为t时刻储能的放电功率，/＞为t时刻储能的充电功率，/＞和/＞分别表示SoC的最小最大限制，公式要求操作日的第一个和最后一个时刻的SoC相等。方程和表示储能系统的充电和放电约束。变量/＞，，/＞和/＞表示储能系统充放电功率的上限和下限。等式和约束储能只能同时处于充电或放电状态，其中/＞是一个二进制变量，取值为0或1。由此可得，储能在一天内的充放电曲线，在根据SoC与充放电的关系，将该曲线转换为储能的整体SoC曲线。。式中：是指充电功率，/＞是指放电功率，/＞是指系统总功率。步骤S3：提取所述混合储能系统的SoC关于时间的曲线中各极值点对应的SoC值和时刻，得到按时间排序的多个SoC值。步骤S4：计算相邻的SoC值之间的差，得到变程序列；其中，所述变程序列包括多个变程；各所述变程按照时间顺序排列。步骤S5：根据所述变程序列，应用滑动窗口算法，得到多个循环过程以及各所述循环过程对应的变程；各所述循环过程包括一个连续的充电过程和放电过程。其中，所述循环过程具体为：充电过程结束后进入放电过程，然后进入下一个循环过程，继续充电，然后放电，每一个循环过程都包括充电过程和放电过程，并且充电过程和放电过程是连续的。S5具体包括步骤S51-步骤S52。步骤S51：判断固定长度的滑动窗口内中间元素的值是否同时小于所述中间元素相邻元素的值；其中，所述固定长度的滑动窗口内包含三个元素。步骤S52：当所述中间元素的值是否同时小于所述中间元素相邻元素的值时，所述中间元素对应的时刻为所述循环过程的终止时刻，所述固定长度的滑动窗口内第一元素对应的时刻为所述循环过程的起始时刻，并将所述中间元素的值作为所述循环过程对应的变程。在实际应用中，基于混合储能系统获得的整体SoC变化曲线，计算充放电里程。1）变程计算：。式中：为曲线中第/＞个极值点或边界点对应的时刻值，/＞为总点数。。式中：为第/＞变程大小；/＞和/＞分别为第/＞变程的起始时刻和结束时刻；/＞为曲线SoC在/＞时刻对应的能量值，/＞为曲线SoC在/＞时刻对应的能量值，D为k-1个变程数据的集合，A为k-1时刻的集合，B为k-1下一时刻的集合。2）参数提取：依次取出变程向量D中3个连续变程、/＞、/＞，并作以下判断。a)：若满足提取条件且/＞，则提取为一循环过程，记为/＞，，并计算循环过程/＞的能量变化幅度/＞及起始时刻/＞、结束时刻/＞。其中，/＞、/＞，可根据式得出：/＞。上式中时/＞先充后放，/＞时/＞先放后充，由此分别计算出起始时刻和结束时刻。b)：若不满足提取条件且/＞，则在向量D中以/＞和/＞变程为基础继续向后读取一变程作上述判断，直至处理完最后一变程。通过上述操作，可将能量变化过程曲线/＞分为循环过程/＞所示SoC变化幅度向量S、起始时刻向量/＞和结束时刻向量/＞。。步骤S6：构建各所述循环过程对应的变程与所述预设时间段内所述混合储能系统的效能损耗的关系的数学模型。在实际应用中，基于混合储场站的SoC变化曲线和充放电里程计算，建立效能损耗与充放电里程的数学模型。由于储能的循环寿命的随着充放电里程M百分比的增加而减少，如果一个储能设备在0%充放电里程下的循环寿命作为作为这个储能设备循环寿命的最大值，N为循环寿命，CI为混合储能投资效能，每循环一次消耗一次循环寿命，对应消耗一定额度的投资效能C，C与循环寿命关系式为：/＞。充放电里程M定义为两个阶段的SoC差值，其与充放电功率差值与额定功率的比值的绝对值有关。。。其中，为循环寿命，/＞为表达式系数，式是循环寿命与里程的关系；式是里程的定义；式是损耗与循环寿命的关系，通过式和式获得式里程与损耗的关系；从式和式获得里程与损耗的关系，所以储能的损耗随着M变化如式。。式中，为成本损耗，/＞为式中参数折合到式后的参数。步骤S7：根据所述数学模型，应用等耗量微增率原则，计算所述混合储能系统中各储能在对应的循环过程中的变程。在实际应用中，根据获得的里程与损耗的关系式，参考火电机组的等耗量微增率原则，提出等里程损耗微增率，即通过计算不同类型储能在不同时间段的里程损耗偏导数并使其相等，从而获得最优分配的各储能的里程。以n种类型的储能容量分配为例，如式。。式中，为第n个储能在a阶段的损耗，/＞为第n个储能在a阶段的里程的n次方。/＞、均为系数，不具有物理意义。在此基础上获得式和式。。。式为多元多次函数，可以求解获得最优分配的，具体地，求解获得最优分配为：第1个储能在a阶段的里程/＞、第2个储能在a阶段的里程/＞、……、第n个储能在a阶段的里程/＞。如图2所示，本发明的实际应用过程如下所述：首先，根据电力服务的需求以及电力服务释放的效能信号，构建储能的效用模型，使得储能整体效用最大化，确定混合储能场站进行的充放电情况和SoC变化曲线。其次，通过里程计数法获得合适的里程获取方式，根据循环寿命随着里程变化的趋势，也可以确定损耗效能与里程的关系，从而构建储能里程运算的数学模型。类比等耗量微增率同理提出等里程损耗微增率，确定获得最优里程分配的理论原理。最后，通过里程计数法-里程与损耗公式-等里程损耗微增率求解获得各储能的最优里程结果。本发明具有以下优势：本发明提出了一种解决储能系统最优分配问题的理论原理。基于最小化边际效能的原则，引入了等里程增量效能方法原理，用于混合储能内不同类型储能的功率分配，减少了每种类型储能的寿命损耗，从而提高了整体效率。本发明考虑了传统雨流计数法计算放电深度的思路，对其进行了类比与改进，提出了里程计数法并对该方法进行建模，使其更便于表达。本发明针对储能的里程与循环寿命，循环寿命与效能的关联，构建了物理逻辑合理的充放电里程与效能之间的关系式。实施例二：为了执行上述实施例一对应的方法，以实现相应的功能和技术效果，下面提供一种混合储能容量分配系统，所述分配系统包括获取模块、曲线确定模块、提取模块、第一计算模块、变程确定模块、构建模块和第二计算模块。获取模块，用于获取电力服务效能信号。曲线确定模块，用于根据电力服务效能信号，以预设时间段内混合储能系统效能最大为目标函数，以SoC约束和ES充放电约束为约束条件，确定混合储能系统的SoC关于时间的曲线。提取模块，用于提取所述混合储能系统的SoC关于时间的曲线中各极值点对应的SoC值和时刻，得到按时间排序的多个SoC值。第一计算模块，用于计算相邻的SoC值之间的差，得到变程序列；其中，所述变程序列包括多个变程；各所述变程按照时间顺序排列。变程确定模块，用于根据所述变程序列，应用滑动窗口算法，得到多个循环过程以及各所述循环过程对应的变程；各所述循环过程包括一个连续的充电过程和放电过程。构建模块，用于构建各所述循环过程对应的变程与所述预设时间段内所述混合储能系统的效能损耗的关系的数学模型。第二计算模块，用于根据所述数学模型，应用等耗量微增率原则，计算所述混合储能系统中各储能在对应的循环过程中的变程。实施例三：本发明实施例提供一种电子设备，包括存储器及处理器，所述存储器用于存储计算机程序，所述处理器运行计算机程序以使电子设备执行实施例一的所述的混合储能容量分配方法。可选地，上述电子设备可以是服务器。另外，本发明实施例还提供一种计算机可读存储介质，其存储有计算机程序，该计算机程序被处理器执行时实现实施例一的所述的混合储能容量分配方法。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。对于实施例公开的系统而言，由于其与实施例公开的方法相对应，所以描述的比较简单，相关之处参见方法部分说明即可。本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处。综上所述，本说明书内容不应理解为对本发明的限制。
