标题title
一种RS-485接收器电路
摘要abst
本发明公开一种RS‑485接收器电路，包括电阻分压模块、迟滞比较器模块和接收器输出模块，其中，电阻分压模块用于接收RS485总线A线输入电压和B线输入电压，基于A线输入电压、B线输入电压以及共模电压产生第一电压、第二电压；迟滞比较器模块用于接收所述第一电压和第二电压，比较第一电压和第二电压的电压差得到电平信号；接收器输出模块用于接收所述电平信号和共模电压，产生与所述电平信号高低电平相反的输出信号并输出。此种接收器电路符合RS‑485标准，解决了上电时常规RS‑485接收器输出信号不稳定的问题。
权利要求书clms
1.一种RS-485接收器电路，其特征在于：包括电阻分压模块、迟滞比较器模块和接收器输出模块，其中，电阻分压模块用于接收RS485总线A线输入电压和B线输入电压，基于A线输入电压、B线输入电压以及共模电压产生第一电压、第二电压；迟滞比较器模块用于接收所述第一电压和第二电压，比较第一电压和第二电压的电压差得到电平信号；接收器输出模块用于接收所述电平信号和共模电压，产生与所述电平信号高低电平相反的输出信号；所述迟滞比较器模块包括迟滞电路、轨到轨输入级电路、增益级电路和宽范围输出电路，其中，迟滞电路用于产生迟滞电压；轨到轨输入级电路用于对第一电压和第二电压进行比较并输出比较信号；增益级电路对所述比较信号进行放大增益；宽范围输出电路用于对放大增益的所述比较信号进行扩展；所述迟滞电路包括第二PMOS管、第十二PMOS管和第十三PMOS管，其中，第二PMOS管的源极连接电源VCC，栅极连接偏置电压VPBAIS，漏极分别连接第十二PMOS管的源极和第十三PMOS管的源极；第十二PMOS管的栅极连接迟滞电压VCM的反相电压VCMB，漏极连接至轨到轨输入级电路；第十三PMOS管的栅极连接迟滞电压VCM，漏极连接至轨到轨输入级电路；所述轨到轨输入级电路包括第三PMOS管、第四PMOS管、第五PMOS管、第八PMOS管、第九PMOS管、第二NMOS管、第三NMOS管、第四NMOS管、第七电阻、第八电阻、第九电阻和第十电阻，其中，第三PMOS管的源极连接电源VCC，栅极连接偏置电压VPBAIS，漏极分别连接第八PMOS管的源极和第九PMOS管的源极；第八PMOS管的漏极连接第三NMOS管的漏极，栅极连接第二电压；第九PMOS管的漏极连接第四NMOS管的漏极，栅极连接第一电压；第八NMOS管的栅极连接第二电压，漏极连接第四PMOS管的漏极，源极分别连接第九NMOS管的源极和第二NMOS管的漏极；第九NMOS管的栅极连接第一电压，漏极连接第五PMOS管的漏极；第二NMOS管的栅极连接偏置电压VNBAIS，源极接地；第四PMOS管的源极连接电源VCC，栅极分别连接第五PMOS管的栅极和第四PMOS管的漏极；第五PMOS管的源极连接电源VCC；第七电阻的第一端连接第四PMOS管的漏极，第二端连接第八电阻的第一端，第八电阻的第二端连接第三NMOS管的漏极；第九电阻的第一端连接第五PMOS管的漏极，第二端连接第十电阻的第一端，第十电阻的第二端连接第四NMOS管的漏极；第三NMOS管的栅极与第四NMOS管的栅极连接，并共同连接偏置电压VNBAIS；第三NMOS管的源极与第四NMOS管的源极均接地；第七电阻的第二端与第九电阻的第二端用于输出比较信号至增益级电路；所述增益级电路包括第六PMOS管、第七PMOS管、第十NMOS管、第十一NMOS管和第五NMOS管，其中，第六PMOS管的源极连接电源VCC，栅极和漏极短接后连接至第十NMOS管的漏极；第七PMOS管的源极连接电源VCC，栅极和漏极短接后连接至第十一NMOS管的漏极；第十NMOS管的源极与第十一NMOS管的源极连接后，共同连接至第五NMOS管的漏极，第十NMOS管的栅极与第十一NMOS管的栅极用于接入轨到轨输入级所输出的比较信号；第五NMOS管的栅极连接偏置电压VNBAIS，源极接地；第六PMOS管的漏极和第七PMOS管的漏极用于输出放大增益后的比较信号；所述宽范围输出电路包括第十PMOS管、第十一PMOS管、第六NMOS管、第七NMOS管、第一反相器和第二反相器，其中，第十PMOS管的栅极和第十一PMOS管的栅极连接增益级电路所输出的放大增益后的比较信号；第十PMOS管的源极和第十一PMOS管的源极均连接电源VCC，第十PMOS管的漏极分别连接第六NMOS管的漏极、第六NMOS管的栅极、第七NMOS管的栅极，第十一PMOS管的漏极分别连接第七NMOS管的漏极和第一反相器的输入端；第六NMOS管的源极和第七NMOS管的源极均接地；第一反相器的输出端连接第二反相器的输入端，第二反相器的输出端用于输出电平信号VCM；所述接收器输出模块包括第一比较器、第二比较器、第一与门、第二与门、第三与门、第三反相器、第一非门、第二非门、第一电阻、第二电阻、第一PMOS管和第一NMOS管，其中，第一比较器的正输入端连接电源，第二比较器的负输入端接地，第一比较器的负输入端与第二比较器的正输入端均连接共模电压，第一比较器的输出端和第二比较器的输出端分别连接第三与门的两个输入端，第三与门的输出端分别连接第三反相器的输入端和第二与门的第一输入端；第一与门的两个输入端分别连接迟滞比较器模块的电平信号和第二非门的输出端，第一与门的输出端连接第二与门的第二输入端，第二与门的输出端分别连接第一非门的第二输入端和第一NMOS管的栅极；第一非门的第一输入端连接迟滞比较器模块的电平信号，第一非门的输出端连接第二非门的第一输入端，第二非门的第二输入端连接第三反相器的输出端；第二非门的输出端连接第一PMOS管的栅极，第一PMOS管的源极连接电源，第一PMOS管的漏极连接第一电阻的一端，第一电阻的另一端连接第二电阻的一端，且该端用于输出接收器电路的信号；第二电阻的另一端连接第一NMOS管的漏极，第一NMOS管的源极接地。2.如权利要求1所述的RS-485接收器电路，其特征在于：所述电阻分压模块包括第三-第六电阻和电流源，其中，第三电阻的一端连接A线输入电压，第三电阻的另一端用于输出第一电压，该第三电阻的另一端还连接第四电阻的一端；第四电阻的另一端连接第五电阻的一端，第五电阻的另一端连接电流源的正极，电流源的负极接地；第六电阻的一端连接B线输入电压，第六电阻的另一端用于输出第二电压，该第六电阻的另一端还连接电流源的正极；所述电阻分压模块还包括运算放大器，所述运算放大器的正输入端连接至基准电压VREF，运算放大器的负输入端连接至运算放大器的输出端，运算放大器的输出端连接在第四电阻、第五电阻之间，运算放大器的输出端用于输出共模电压VCM。3.如权利要求2所述的RS-485接收器电路，其特征在于：所述第四电阻的阻值与第五电阻的阻值相同，第三电阻的阻值与第六电阻的阻值相同。4.如权利要求2所述的RS-485接收器电路，其特征在于：电阻分压模块基于A线输入电压、B线输入电压以及共模电压产生第一电压、第二电压，包括，根据下式进行计算：，其中，分别为A线输入电压、B线输入电压，为共模电压；为电阻缩减比，其比值为第三电阻与第四电阻的比值。
说明书desc
技术领域本发明属于集成电路技术领域，特别涉及一种RS-485接收器电路。背景技术RS-485收发器芯片作为一种常用的接口芯片器件，在智能仪表、工业控制、仪器仪表、通讯等诸多领域具有广泛的应用。RS-485总线标准规定，接收器输入端的压差最小可低至±200mV，并且能够承受-7V到+12V范围电压输入。中国专利申请号201911364339.9提供一种RS485接收器电路、集成电路及收发器，其接收器电路包括：电平位移电路，用于接收RS485总线A线输入和B线输入，将A线输入的电压转换为第一电压并输出，将B线输入的电压转换为第二电压并输出，第一电压和第二电压均在预设电压范围内且所述预设电压范围与A线输入和B线输入的电压范围不完全相同；以及，比较器电路，用于接收第一电压和第二电压，比较第一电压和第二电压的电压差得到电平信号并输出；以及，输出电路，用于接收电平信号，产生与所述电平信号高低电平相反的输出信号并输出。该方案将RS485总线A线输入和B线输入转换至预设电压范围内，满足其输出所连不同端口的电压需求。然而，包含前述发明在内，为了降低整个收发器的功耗，现有的接收器在不工作时，内部断电；开启时，内部电路上电，其中内部共模电压上电稳定的时间远大于比较器。在比较器上电稳定到内部共模电压上电稳定这段时间内，比较器输入对管处于不饱和态，造成比较器输出不稳定，进而造成接收器输出信号不稳定，有待改进，本案由此产生。发明内容本发明的目的，在于提供一种RS-485接收器电路，符合RS-485标准，解决了上电时常规RS-485接收器输出信号不稳定的问题。为了达成上述目的，本发明的解决方案是：一种RS-485接收器电路，包括电阻分压模块、迟滞比较器模块和接收器输出模块，其中，电阻分压模块用于接收RS485总线A线输入电压和B线输入电压，基于A线输入电压、B线输入电压以及共模电压产生第一电压、第二电压；迟滞比较器模块用于接收所述第一电压和第二电压，比较第一电压和第二电压的电压差得到电平信号；接收器输出模块用于接收所述电平信号和共模电压，产生与所述电平信号高低电平相反的输出信号；所述迟滞比较器模块包括迟滞电路、轨到轨输入级电路、增益级电路和宽范围输出电路，其中，迟滞电路用于产生迟滞电压；轨到轨输入级电路用于对第一电压和第二电压进行比较并输出比较信号；增益级电路对所述比较信号进行放大增益；宽范围输出电路用于对放大增益的所述比较信号进行扩展；所述迟滞电路包括第二PMOS管、第十二PMOS管和第十三PMOS管，其中，第二PMOS管的源极连接电源VCC，栅极连接偏置电压VPBAIS，漏极分别连接第十二PMOS管的源极和第十三PMOS管的源极；第十二PMOS管的栅极连接迟滞电压VCM的反相电压VCMB，漏极连接至轨到轨输入级电路；第十三PMOS管的栅极连接迟滞电压VCM，漏极连接至轨到轨输入级电路；所述轨到轨输入级电路包括第三PMOS管、第四PMOS管、第五PMOS管、第八PMOS管、第九PMOS管、第二NMOS管、第三NMOS管、第四NMOS管、第七电阻、第八电阻、第九电阻和第十电阻，其中，第三PMOS管的源极连接电源VCC，栅极连接偏置电压VPBAIS，漏极分别连接第八PMOS管的源极和第九PMOS管的源极；第八PMOS管的漏极连接第三NMOS管的漏极，栅极连接第二电压；第九PMOS管的漏极连接第四NMOS管的漏极，栅极连接第一电压；第八NMOS管的栅极连接第二电压，漏极连接第四PMOS管的漏极，源极分别连接第九NMOS管的源极和第二NMOS管的漏极；第九NMOS管的栅极连接第一电压，漏极连接第五PMOS管的漏极；第二NMOS管的栅极连接偏置电压VNBAIS，源极接地；第四PMOS管的源极连接电源VCC，栅极分别连接第五PMOS管的栅极和第四PMOS管的漏极；第五PMOS管的源极连接电源VCC；第七电阻的第一端连接第四PMOS管的漏极，第二端连接第八电阻的第一端，第八电阻的第二端连接第三NMOS管的漏极；第九电阻的第一端连接第五PMOS管的漏极，第二端连接第十电阻的第一端，第十电阻的第二端连接第四NMOS管的漏极；第三NMOS管的栅极与第四NMOS管的栅极连接，并共同连接偏置电压VNBAIS；第三NMOS管的源极与第四NMOS管的源极均接地；第七电阻的第二端与第九电阻的第二端用于输出比较信号至增益级电路；所述增益级电路包括第六PMOS管、第七PMOS管、第十NMOS管、第十一NMOS管和第五NMOS管，其中，第六PMOS管的源极连接电源VCC，栅极和漏极短接后连接至第十NMOS管的漏极；第七PMOS管的源极连接电源VCC，栅极和漏极短接后连接至第十一NMOS管的漏极；第十NMOS管的源极与第十一NMOS管的源极连接后，共同连接至第五NMOS管的漏极，第十NMOS管的栅极与第十一NMOS管的栅极用于接入轨到轨输入级所输出的比较信号；第五NMOS管的栅极连接偏置电压VNBAIS，源极接地；第六PMOS管的漏极和第七PMOS管的漏极用于输出放大增益后的比较信号；所述宽范围输出电路包括第十PMOS管、第十一PMOS管、第六NMOS管、第七NMOS管、第一反相器和第二反相器，其中，第十PMOS管的栅极和第十一PMOS管的栅极连接增益级电路所输出的放大增益后的比较信号；第十PMOS管的源极和第十一PMOS管的源极均连接电源VCC，第十PMOS管的漏极分别连接第六NMOS管的漏极、第六NMOS管的栅极、第七NMOS管的栅极，第十一PMOS管的漏极分别连接第七NMOS管的漏极和第一反相器的输入端；第六NMOS管的源极和第七NMOS管的源极均接地；第一反相器的输出端连接第二反相器的输入端，第二反相器的输出端用于输出电平信号VCM；所述接收器输出模块包括第一比较器、第二比较器、第一与门、第二与门、第三与门、第三反相器、第一非门、第二非门、第一电阻、第二电阻、第一PMOS管和第一NMOS管，其中，第一比较器的正输入端连接电源，第二比较器的负输入端接地，第一比较器的负输入端与第二比较器的正输入端均连接共模电压，第一比较器的输出端和第二比较器的输出端分别连接第三与门的两个输入端，第三与门的输出端分别连接第三反相器的输入端和第二与门的第一输入端；第一与门的两个输入端分别连接迟滞比较器模块的电平信号和第二非门的输出端，第一与门的输出端连接第二与门的第二输入端，第二与门的输出端分别连接第一非门的第二输入端和第一NMOS管的栅极；第一非门的第一输入端连接迟滞比较器模块的电平信号，第一非门的输出端连接第二非门的第一输入端，第二非门的第二输入端连接第三反相器的输出端；第二非门的输出端连接第一PMOS管的栅极，第一PMOS管的源极连接电源，第一PMOS管的漏极连接第一电阻的一端，第一电阻的另一端连接第二电阻的一端，且该端用于输出接收器电路的信号；第二电阻的另一端连接第一NMOS管的漏极，第一NMOS管的源极接地。上述电阻分压模块包括第三-第六电阻和电流源，其中，第三电阻的一端连接A线输入电压，第三电阻的另一端用于输出第一电压，该第三电阻的另一端还连接第四电阻的一端；第四电阻的另一端连接第五电阻的一端，第五电阻的另一端连接电流源的正极，电流源的负极接地；第六电阻的一端连接B线输入电压，第六电阻的另一端用于输出第二电压，该第六电阻的另一端还连接电流源的正极；所述电阻分压模块还包括运算放大器，所述运算放大器的正输入端连接至基准电压VREF，该基准电压VREF可人为调节；运算放大器的负输入端连接至运算放大器的输出端，运算放大器的输出端连接在第四电阻、第五电阻之间，运算放大器的输出端用于输出共模电压VCM。上述第四电阻的阻值与第五电阻的阻值相同，第三电阻的阻值与第六电阻的阻值相同。其中，电阻分压模块基于A线输入电压、B线输入电压以及共模电压产生第一电压、第二电压，包括，根据下式进行计算：，其中，分别为A线输入电压、B线输入电压，为共模电压；为电阻缩减比，其比值为第三电阻与第四电阻的比值。采用上述方案后，本发明具有如下有益效果：本发明通过电阻分压模块将RS-485总线输入的高电压转换为低电压，并通过迟滞比较器电路比较，通过使能控制逻辑，保证输出稳定准确的信号，符合RS-485标准的电气特性；本发明采用的接收器输出模块能够使共模电压时不在电源电压到地的范围时，保持接收器输出高阻态的功能。附图说明图1是本发明的模块划分图；图2是本发明中电阻分压模块的电路图；图3是本发明中迟滞比较器模块的电路图；图4是本发明中接收器输出模块的电路图。具体实施方式以下将结合附图，对本发明的技术方案及有益效果进行详细说明。如图1所示，本发明提供一种RS-485接收器电路，包括电阻分压模块、迟滞比较器模块和接收器输出模块，其中，电阻分压模块用于接收RS485总线A线输入和B线输入，基于A线输入的电压、B线输入的电压以及共模电压产生第一电压、第二电压并输出；迟滞比较器模块用于接收第一电压和第二电压，比较第一电压和第二电压的电压差得到电平信号并输出；接收器输出模块用于接收迟滞比较器模块输出的电平信号和电阻分压模块输出的共模电压，产生与所述电平信号高低电平相反的输出信号并输出。RS-485接收器电路一般的电源电压是5V，但总线输入电压范围超过了电源电压，因此需要先对输入信号进行缩减，具体如图2电阻分压模块所示，其中图2中的电阻R4=R5，R3=R6。电阻分压模块有两个功能，第一个功能是缩减超出接收器总线输入的大信号，缩减比例要求A线和B线上电压从-7V到+12V的范围，缩减到电源电压为3.3V或5V，以使迟滞比较器电路可以处理的电压，典型的缩减比为10：1，降低了内部的电压幅度；第二个是将总线电压偏置到固定的共模电压，固定的共模电压可以保证后续迟滞比较器模块的正常工作。固定的共模电压由单位增益的运算放大器和基准电压产生，连接在B线输入端和地之间的电流源会在连接到迟滞比较器模块负输入端的R4和R6两端产生电压降。在总线空闲或总线短路情况下，该偏置电压会导致负输入端的第一电压低于正输入端的第二电压，可确保RS-485接收器的输出为高电平。在本实施例中，假设A线输入电压VA大于B线输入电压VB，则有：，其中，VC为电阻分压模块输出的共模电压；K为电阻缩减比，其比值为电阻R3/电阻R4。经过电阻分压模块缩减的差分电压通过一个迟滞比较器模块输出比较结果。由于差分电压被电阻分压模块缩减，因此要求迟滞比较器模块具有较高的增益，同时保证输出稳定，具体如图3迟滞比较器模块所示，第一部分是迟滞电路，通过设置电流镜管栅极偏置电压VPBAIS的大小，可以调节电流镜管PM2和PM3的电流大小，通过设置PM2和PM3的比例，可以在迟滞比较器模块的输出电压VCM上产生固定的迟滞电压，PM12和PM13由输出信号VCM和与所述输出信号VCM相反的信号VCMB控制；第二部分是轨到轨输入级电路，用于对第一电压和第二电压进行比较并输出比较信号，当第一电压或第二电压靠近GND电压时，NMOS输入对管不工作，PMOS输入对管单独工作；当输入电压靠近电源电压时，NMOS输入对管单独工作，PMOS输入对管不工作；其余状态两个输入对管都工作。由于电阻分压模块单位增益的运算放大器稳定时间较长，采用轨到轨输入级电路，当迟滞比较器模块输入信号在电源电压到地范围内时，PM8、PM9输入对管和NM8、NM9输入对管至少有一对处于稳定的饱和区，保证稳定的输出，PM2、PM3、PM4、PM5、NM2、NM3、NM4是电流镜管，为支路提供电流，R7到R10是输入级负载电阻；第三部分是增益级电路，PM6和PM7接成二极管作为NM10和NM11输入管的负载，提供较大增益，NM5是电流镜管提供电流；第四部分是宽范围输出电路，将增益级电路输出的信号范围进行扩展，NM6和NM7是等比例电流镜管，和偏置管PM10、PM11一起构成宽范围输出，扩展后的信号范围从地电压到电源电压。在接收器上电时，由于电阻分压模块中的单位增益运算放大器输出共模电压VCOM达到稳定需要一定的时间，而迟滞比较器模块可以快速上电，此时由于比较器输入级可能不在工作区，接收器输出不稳定，因此增加检测VCOM的电路，具体如图4接收器输出模块所示，VCOM是电阻分压模块的共模电压，VCOM通过CM1比较器与电源VDD比较和CM2比较器与地比较。当VCOM不在电源电压到地的范围时，AND3输出低电平，使AND2保持低电平输出，NM1关断；AND3输出的低电平经过INV3反相后，使OR2保持高电平输出，PM1关断，接收器输出高阻态，VCM信号是比较器输出信号，OR1和AND1输出非交叠的信号，使在同一时刻输出管PM1、NM1只有一个导通，降低电路的功耗。电阻R1和R2限制支路电流起保护作用。本领域内的技术人员应明白，本发明的实施例可提供为方法、系统、或计算机程序产品。因此，本发明可采用完全硬件实施例、完全软件实施例、或结合软件和硬件方面的实施例的形式。而且，本发明可采用在一个或多个其中包含有计算机可用程序代码的计算机可用存储介质上实施的计算机程序产品的形式。本发明实施例中的方案可以采用各种计算机语言实现，例如，面向对象的程序设计语言Java和直译式脚本语言JavaScript等。本发明是参照根据本发明实施例的方法、设备、和计算机程序产品的流程图和／或方框图来描述的。应理解可由计算机程序指令实现流程图和／或方框图中的每一流程和／或方框、以及流程图和／或方框图中的流程和／或方框的结合。可提供这些计算机程序指令到通用计算机、专用计算机、嵌入式处理机或其他可编程数据处理设备的处理器以产生一个机器，使得通过计算机或其他可编程数据处理设备的处理器执行的指令产生用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的装置。这些计算机程序指令也可存储在能引导计算机或其他可编程数据处理设备以特定方式工作的计算机可读存储器中，使得存储在该计算机可读存储器中的指令产生包括指令装置的制造品，该指令装置实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能。这些计算机程序指令也可装载到计算机或其他可编程数据处理设备上，使得在计算机或其他可编程设备上执行一系列操作步骤以产生计算机实现的处理，从而在计算机或其他可编程设备上执行的指令提供用于实现在流程图一个流程或多个流程和／或方框图一个方框或多个方框中指定的功能的步骤。尽管已描述了本发明的优选实施例，但本领域内的技术人员一旦得知了基本创造性概念，则可对这些实施例作出另外的变更和修改。所以，所附权利要求意欲解释为包括优选实施例以及落入本发明范围的所有变更和修改。显然，本领域的技术人员可以对本发明进行各种改动和变型而不脱离本发明的精神和范围。这样，倘若本发明的这些修改和变型属于本发明权利要求及其等同技术的范围之内，则本发明也意图包含这些改动和变型在内。
