标题title
共用操作面板的多通道数字化模组式电子负载及通信方法
摘要abst
本发明公开了一种共用操作面板的多通道数字化模组式电子负载及通信方法，双通道电子负载单元包括CAN总线接口、若干寻址接口和两个单通道电子负载单元，两个单通道电子负载单元的寻址接口的最低位地址线分别连接到低电平和高电平；整机转接单元包括若干地址接口；双通道电子负载单元的寻址接口除最低位地址线的其他地址线与整机转接单元的地址接口相接，每个单通道电子负载单元的最低位地址线电平信息与连接的整机转接单元的地址接口的电平信息组合得到其唯一地址。本发明电子负载共用一个操作面板，可降低成本，并采用大面积的整块操作面板，便于操作和观察，通过地址线设置的高低电平可形成唯一地址，并在上电之后自动获取唯一地址。
权利要求书clms
1.一种共用操作面板的多通道数字化模组式电子负载，若干电子负载共用操作面板，其特征在于，所述电子负载包括：操作面板控制单元，包括CAN总线接口；若干双通道电子负载单元，包括CAN总线接口和若干寻址接口；所述双通道电子负载单元包括两个单通道电子负载单元，其中一个单通道电子负载单元的寻址接口的最低位地址线连接到低电平，另一个单通道电子负载单元的寻址接口的最低位地址线连接到高电平；整机转接单元，包括CAN总线端接电阻和若干地址接口；所述操作面板控制单元和所述双通道电子负载单元的CAN总线接口均与所述CAN总线端接电阻相接；每个地址接口包括若干地址线，每个地址线均连接到高电平或低电平，所述若干地址接口基于高电平和低电平形成的地址均不同；所述双通道电子负载单元的寻址接口连接至所述整机转接单元的地址接口上，所述双通道电子负载单元的寻址接口除最低位地址线的其他地址线与所述整机转接单元的地址接口相接，每个单通道电子负载单元的最低位地址线电平信息与连接的整机转接单元的地址接口的电平信息组合得到其唯一地址。2.根据权利要求1所述的共用操作面板的多通道数字化模组式电子负载，其特征在于，所述单通道电子负载单元包括n位寻址接口和CAN总线接口，所述双通道电子负载单元包括模组转接单元，所述模组转接单元包括CAN总线接口、n-1位寻址接口，所述模组转接单元的CAN总线接口与所述单通道电子负载单元的CAN总线接口连接，所述模组转接单元的n-1位寻址接口与所述单通道电子负载单元除最低位地址线的其他地址线相接，所述模组转接单元的低电平和高电平分别连接至两个单通道电子负载单元的寻址接口的最低位地址线。3.根据权利要求2所述的共用操作面板的多通道数字化模组式电子负载，其特征在于，所述单通道电子负载单元包括四位寻址接口，所述模组转接单元包括三位寻址接口。4.根据权利要求1所述的共用操作面板的多通道数字化模组式电子负载，其特征在于，所述整机转接单元具有五个地址接口，每个地址接口连接一个双通道模组电子负载单元。5.根据权利要求1所述的共用操作面板的多通道数字化模组式电子负载，其特征在于，所述单通道电子负载单元均包括主控单元、负载单元和负载接线端子组。6.根据权利要求1所述的共用操作面板的多通道数字化模组式电子负载，其特征在于，所述操作面板控制单元连接有触控屏、键盘、屏幕、通信接口中的至少一个。7.一种基于权利要求1所述的共用操作面板的多通道数字化模组式电子负载的通信方法，其特征在于，通信指令包括主机位和每个单通道电子负载单元的地址位；所述操作面板控制单元向需要通信的单通道电子负载单元发送指令时，将所述主机位和需要通信的单通道电子负载单元对应的地址位置1，其余位置0；所有单通道电子负载单元接收指令后，在主机位为1且与自身对应的地址位为1时，对该指令进行处理，否则，不予处理；所述单通道电子负载单元向操作面板控制单元发送指令时，将自身对应的地址位置1，其他地址位置0，所述操作面板控制单元根据地址位为1的信息获取发送信息的单通道电子负载单元地址。8.根据权利要求7所述的通信方法，其特征在于，每个单通道电子负载具有接受指令识别码和发送指令识别码，所述接受指令识别码和发送指令识别码与所述通信指令位数相同，所述接受指令识别码与所述主机位对应的位和自身对应的地址位为1，其余位为0；所述发送指令识别码与自身对应地址位为1，其余位为0；在所述单通道电子负载接收到所述通信指令后，将接受指令识别码与所述通信指令进行逻辑与运算，结果与所述接受指令识别码对应时，是本机通信指令，对所述通信指令进行处理，否则，为非本机通信指令，不对所述通信指令进行处理。9.根据权利要求8所述的通信方法，其特征在于，对所述通信指令进行处理后判断是否需要回发，若是，将所述发送指令识别码编辑为指令ID。10.根据权利要求7所述的通信方法，其特征在于，所述通信指令包括10位地址位和1位主机位。
说明书desc
技术领域本发明属于电子负载技术领域，具体地说，是涉及一种共用操作面板的多通道数字化模组式电子负载及通信方法。背景技术中小功率直流电源的生产中，由于其单价低、数量多，因此对于检测的速率要求极高。目前较好的方式是使用多通道模组式电子负载对其进行快速检测；同时，为了可以适应更多种类的被测电源，数字化模组式电子负载是最佳的选择。但是，出于对电子负载动态特性的高要求，那么作为核心器件的主控MCU、数模转换器、模数转换器都需要具备很高的速率要求，尤其主控MCU的运算能力、与外设的通信速率都要很高，在这种情况下，该MCU若要再能够同时控制模组的键盘、显示屏等外设就会很困难。因此现有的模组负载大都会采用“多核”策略，即高速MCU只负责对功率单元进行控制和测量，而选用单独的一套操作面板控制单元，对本模组进行参数设置和显示。目前已有的模组式电子负载采用的均是各个模组独立操控的方式，即每个模组都有自己的一套显示屏、键盘，可对本模组进行操控和显示；同时在整机框架中也有一套控制单元，用来对需要多模组协同工作时实现对不同模组动作时序的调度。现有技术具有如下缺点：首先，多套操作面板会拉高整机的成本；其次，现有模组在整机框架里都是左右排列的，受到该结构的限制，每个模组宽度都比较窄，这样显示屏和按键板就只能选用很小的型号，操作起来难度很大；最后，由于每个模组的功率单元都是由本模组的操控面板调度的，那么对于多模组的协同调度工作，框架“主机”对各个模组的操作指令都需要经过该模组自己的操控面板的一次中转，功率单元的动作延时会相应增加；不仅如此，现有的多模组互联多采用RS485等半双工通信总线，一般只能支持“一对一”或“一对所有广播”的通信方式，在需要部分模组协同工作的场合下，必定存在延时，影响各模组协同的准确性。例如：若要求10通道中的1-9通道同时启动，按现有方式就需要由操控面板依次对地址1-9的通道发送启动指令，工业总线中波特率一般不高于1Mbps，这样从1通道启动到9通道启动之间的延时都将会很大，很可能达到数毫秒，这个延时对于多通道的电子负载来说是个很大的缺点。本背景技术所公开的上述信息仅仅用于增加对本申请背景技术的理解，因此，其可能包括不构成本领域普通技术人员已知的现有技术。发明内容本发明提出了一种共用操作面板的多通道数字化模组式电子负载，以解决现有多通道数字化模组式电子负载成本高，操作难度大和通信延时大的技术问题。为实现上述发明/设计目的，本发明采用下述技术方案予以实现：一种共用操作面板的多通道数字化模组式电子负载，若干电子负载共用操作面板，所述电子负载包括：操作面板控制单元，包括CAN总线接口；若干双通道电子负载单元，包括CAN总线接口和若干寻址接口；所述双通道电子负载单元包括两个单通道电子负载单元，其中一个单通道电子负载单元的寻址接口的最低位地址线连接到低电平，另一个单通道电子负载单元的寻址接口的最低位地址线连接到高电平；整机转接单元，包括CAN总线端接电阻和若干地址接口；所述操作面板控制单元和所述双通道电子负载单元的CAN总线接口均与所述CAN总线端接电阻相接；每个地址接口包括若干地址线，每个地址线均连接到高电平或低电平，所述若干地址接口基于高电平和低电平形成的地址均不同；所述双通道电子负载单元的寻址接口连接至所述整机转接单元的地址接口上，所述双通道电子负载单元的寻址接口除最低位地址线的其他地址线与所述整机转接单元的地址接口相接，每个单通道电子负载单元的最低位地址线电平信息与连接的整机转接单元的地址接口的电平信息组合得到其唯一地址。如上所述的共用操作面板的多通道数字化模组式电子负载，所述单通道电子负载单元包括n位寻址接口和CAN总线接口，所述双通道电子负载单元包括模组转接单元，所述模组转接单元包括CAN总线接口、n-1位寻址接口，所述模组转接单元的CAN总线接口与所述单通道电子负载单元的CAN总线接口连接，所述模组转接单元的n-1位寻址接口与所述单通道电子负载单元除最低位地址线的其他地址线相接，所述模组转接单元的低电平和高电平分别连接至两个单通道电子负载单元的寻址接口的最低位地址线。如上所述的共用操作面板的多通道数字化模组式电子负载，所述单通道电子负载单元包括四位寻址接口，所述模组转接单元包括三位寻址接口。如上所述的共用操作面板的多通道数字化模组式电子负载，所述整机转接单元具有五个地址接口，每个地址接口连接一个双通道模组电子负载单元。如上所述的共用操作面板的多通道数字化模组式电子负载，所述单通道电子负载单元均包括主控单元、负载单元和负载接线端子组。如上所述的共用操作面板的多通道数字化模组式电子负载，所述操作面板控制单元连接有触控屏、键盘、屏幕、通信接口中的至少一个。一种基于上述的共用操作面板的多通道数字化模组式电子负载的通信方法，通信指令包括主机位和每个单通道电子负载单元的地址位；所述操作面板控制单元向需要通信的单通道电子负载单元发送指令时，将所述主机位和需要通信的单通道电子负载单元对应的地址位置1，其余位置0；所有单通道电子负载单元接收指令后，在主机位为1且与自身对应的地址位为1时，对该指令进行处理，否则，不予处理；所述单通道电子负载单元向操作面板控制单元发送指令时，将自身对应的地址位置1，其他地址位置0，所述操作面板控制单元根据地址位为1的信息获取发送信息的单通道电子负载单元地址。如上所述的共用操作面板的多通道数字化模组式电子负载的通信方法，每个单通道电子负载具有接受指令识别码和发送指令识别码，所述接受指令识别码和发送指令识别码与所述通信指令位数相同，所述接受指令识别码与所述主机位对应的位和自身对应的地址位为1，其余位为0；所述发送指令识别码与自身对应地址位为1，其余位为0；在所述单通道电子负载接收到所述通信指令后，将接受指令识别码与所述通信指令进行逻辑与运算，结果与所述接受指令识别码对应时，是本机通信指令，对所述通信指令进行处理，否则，为非本机通信指令，不对所述通信指令进行处理。如上所述的共用操作面板的多通道数字化模组式电子负载的通信方法，对所述通信指令进行处理后判断是否需要回发，若是，将所述发送指令识别码编辑为指令ID。如上所述的共用操作面板的多通道数字化模组式电子负载的通信方法，其特征在于，所述通信指令包括10位地址位和1位主机位。与现有技术相比，本发明的优点和积极效果是：本发明共用操作面板的多通道数字化模组式电子负载包括操作面板控制单元、整机转接单元和若干双通道电子负载单元；操作面板控制单元包括CAN总线接口；双通道电子负载单元包括CAN总线接口和若干寻址接口；双通道电子负载单元包括两个单通道电子负载单元，其中一个单通道电子负载单元的寻址接口的最低位地址线连接到低电平，另一个单通道电子负载单元的寻址接口的最低位地址线连接到高电平；整机转接单元包括CAN总线端接电阻和若干地址接口；操作面板控制单元和双通道电子负载单元的CAN总线接口均与CAN总线端接电阻相接；每个地址接口包括若干地址线，每个地址线均连接到高电平或低电平，若干地址接口基于高电平和低电平形成的地址均不同；双通道电子负载单元的寻址接口连接至整机转接单元的地址接口上，双通道电子负载单元的寻址接口除最低位地址线的其他地址线与整机转接单元的地址接口相接，每个单通道电子负载单元的最低位地址线电平信息与连接的整机转接单元的地址接口的电平信息组合得到其唯一地址。本发明电子负载共用一个操作面板，可大大降低成本，并且可以采用大面积的整块操作面板，便于操作和观察。本发明通过地址线设置的高低电平可形成唯一地址，并在上电之后自动获取唯一地址，无需通过硬件拨码的方式设置地址，电子负载的生产和使用十分方便。本发明共用操作面板的多通道数字化模组式电子负载包括操作面板控制单元的通信方法，通信指令包括主机位和每个单通道电子负载单元的地址位；操作面板控制单元向需要通信的单通道电子负载单元发送指令时，将主机位和需要通信的单通道电子负载单元对应的地址位置1，其余位置0；所有单通道电子负载单元接收指令后，在主机位为1且与自身对应的地址位为1时，对该指令进行处理，否则，不予处理；单通道电子负载单元向操作面板控制单元发送指令时，将自身对应的地址位置1，其他地址位置0，操作面板控制单元根据地址位为1的信息获取发送信息的单通道电子负载单元地址。本发明基于CAN总线，设计了多通道数字化模组式电子负载的通信协议，优化了多模组之间的调度机制，几乎消除了多模组协同工作时的通信延时，保证了时序控制的精准。结合附图阅读本发明的具体实施方式后，本发明的其他特点和优点将变得更加清楚。附图说明为了更清楚地说明本发明实施例中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明具体实施例共用操作面板的多通道数字化模组式电子负载的示意图。图2是本发明具体实施例双通道电子负载单元的示意图。图3是本发明具体实施例电子负载模组地址初始化流程图。图4是本发明具体实施例操作面板控制单元发送指令的流程图。图5是本发明具体实施例所有单通道电子负载响应操作面板控制单元指令流程图图。图6是本发明具体实施例操作面板控制单元接收指令流程图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。在本发明的描述中，需要理解的是，术语“中心”、“上”、“下”、“前”、“后”、“左”、“右”、“竖直”、“水平”、“顶”、“底”、“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此，不能理解为对本发明的限制。在本发明的描述中，需要说明的是，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接。对于本领域的普通技术人员而言，可以具体情况理解上述术语在本发明中的具体含义。在实施方式的描述中，具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性或者隐含指明所指示的技术特征的数量。由此，限定有“第一”、“第二”的特征可以明示或者隐含地包括一个或者更多个该特征。在本发明的描述中，除非另有说明，“多个”的含义是两个或两个以上。模组式电子负载是一种小型的多通道电子负载装置，一般来说可分为模组部分和框架部分。两个部分相对独立，模组有多种型号，对应了不同的电压、功率、通道数等；框架一般是通用的，各种模组都可灵活插装使用。使用时，多通道的工作时序等可统一调度，实现一些组合功能。传统的电子负载，其主控器对于功率单元的控制是基于模拟反馈环路的。首先由MCU通过数模转换器输出一路基础信号，该信号与最终拉载输出的电流或电压的调理信号一起，经由硬件搭建的误差放大器，调理成为最终的功率器件控制信号，对功率输出单元实施控制。这种控制方式对主控器及其数模转换器的速率要求较低，实现较为简单；但是模拟的反馈控制器指标单一，已无法适应当今越来越多的开关电源种类；同时低速率的主控器也无法实现一些需要高速调节输出值的新功能，因此，近年来新型的电子负载都已采用了数字化主控器，即为数字化电子负载。数字化电子负载，其功率单元的控制信号是由主控器直接输出的。首先，主MCU通过高速模数转换器对当前的实际电压和电流调理信号进行测量，根据测量结果和设定值的差值，进行数字PID调节后，由高速数模转换器输出控制信号，对负载功率单元进行控制。本发明通过新的模组与整机框架形式，改变现有的插装结构和内部通联方式，实现由共用的带有大尺寸触控屏的操控面板，对多通道电子负载的统一调度，同时，基于现有CAN通信协议所设计的通信机制，可实现操控面板对多台模组实时调度控制，消除通信延时。在图1的示例中，一种共用操作面板的多通道数字化模组式电子负载，若干电子负载共用操作面板，电子负载包括：操作面板控制单元，包括CAN总线接口。若干双通道电子负载单元，包括CAN总线接口和若干寻址接口。在图2 的示例中，双通道电子负载单元包括两个相同的单通道电子负载单元和一个模组转换单元。其中一个单通道电子负载单元的寻址接口的最低位地址线连接到低电平，另一个单通道电子负载单元的寻址接口的最低位地址线连接到高电平。单通道电子负载单元包括n位寻址接口和CAN总线接口。双通道电子负载单元包括模组转接单元，模组转接单元包括CAN总线接口、n-1位寻址接口。模组转接单元的CAN总线接口与单通道电子负载单元的CAN总线接口连接，模组转接单元的n-1位寻址接口与单通道电子负载单元除最低位地址线的其他地址线相接，模组转接单元的低电平和高电平分别连接至两个单通道电子负载单元的寻址接口的最低位地址线。其中，高电平和低电平为模组转接单元的电路生成的。模组转接单元的工作是为单通道电子负载单元赋予最低位地址，同时将高三位地址线和CAN总线都汇总输出到整机转接单元。在图2的示例中，单通道电子负载单元包括四位寻址接口，模组转接单元包括三位寻址接口。单通道电子负载单元均包括主控单元、负载单元和负载接线端子组。主控单元控制电子负载的全部输出和测量工作。单通道电子负载单元对外有一组带4位地址查询端口的CAN总线接口。整机转接单元，包括CAN总线端接电阻和若干地址接口；操作面板控制单元和双通道电子负载单元的CAN总线接口均与CAN总线端接电阻相接；每个地址接口包括若干地址线，每个地址线均连接到高电平或低电平，若干地址接口基于高电平和低电平形成的地址均不同；双通道电子负载单元的寻址接口连接至整机转接单元的地址接口上，双通道电子负载单元的寻址接口除最低位地址线的其他地址线与整机转接单元的地址接口相接，每个单通道电子负载单元的最低位地址线电平信息与连接的整机转接单元的地址接口的电平信息组合得到其唯一地址。整机转接单元具有五个地址接口，每个地址接口连接一个双通道模组电子负载单元。操作面板控制单元连接有触控屏、键盘、屏幕、通信接口中的至少一个。在图1的示例中，整机框架包含了操作面板控制单元和整机转接单元。其中，操作面板控制单元中的主控芯片管理了大尺寸触控屏、键盘、各种对外的通信接口等输入/输出功能，但对整机转接单元则只有一组CAN总线连接。CAN总线通过两条差分线CANH和CANL传输信号，具有较高的电磁干扰抗性和错误检测能力。整机转接单元包含了五个带有三位地址线的地址接口、一组CAN总线的模组接口以及一个包含CAN总线的操控面板接口。其中，五个地址接口中的三位地址线由高至低分别被配置成“000”、“001”、“010”、“011”、“100”。当五个完全相同的双通道模组电子负载都插到这些接口中之后，每个单通道电子负载单元的高三位寻址线就会获得相应的高三位地址，再结合图2中模组转接单元输出的最低位地址“0”、“1”。此时，四位地址线便可组合成“0000”、“0001”、“0010”……“1001”共十个地址，分别为十进制的“0”-“9”。也就是说，五个双通道模组电子负载单元连接到整机转接单元之后，这些模组内的十个数字化主控单元可立即获得0-9的唯一地址。另外，CAN通信所必须的两个CAN总线端接电阻也集成在整机转接单元中，可保证CAN通信的可靠性。一种共用操作面板的多通道数字化模组式电子负载的通信方法，通信指令包括主机位和每个单通道电子负载单元的地址位；操作面板控制单元向需要通信的单通道电子负载单元发送指令时，将主机位和需要通信的单通道电子负载单元对应的地址位置1，其余位置0；单通道电子负载单元接收指令后，在主机位为1且与自身对应的地址位为1时，对该指令进行处理，否则，不予处理；单通道电子负载单元向操作面板控制单元发送指令时，将自身对应的地址位置1，其他地址位置0，操作面板控制单元根据地址位为1的信息获取发送信息的单通道电子负载单元地址。每个单通道电子负载具有接受指令识别码和发送指令识别码，接受指令识别码和发送指令识别码与通信指令位数相同，接受指令识别码与主机位对应的位和自身对应的地址位为1，其余位为0；发送指令识别码与自身对应地址位为1，其余位为0。如图3所示，初始化开始。分别读取地址线3-0引脚电平，并组成4位“地址码”。在地址码=0000B时，本机地址=0，接受指令识别码=100 0000 0001B；发送指令识别码=000 0000 0001B。在地址码=0001B时，本机地址=1，接受指令识别码=100 0000 0010B；发送指令识别码=000 0000 0010B。在地址码=0010B时，本机地址=2，接受指令识别码= 100 0000 0100B；发送指令识别码= 000 0000 0100B。…在地址码=1001B时，本机地址=9，接受指令识别码= 110 0000 0000B；发送指令识别码= 010 0000 0000B。否则，进入非法地址处理程序。初始化完成。在单通道电子负载接收到通信指令后，将接受指令识别码与通信指令进行逻辑与运算，结果与接受指令识别码对应时，是本机通信指令，对通信指令进行处理，否则，为非本机通信指令，不对通信指令进行处理。对通信指令进行处理后判断是否需要回发，若是，将发送指令识别码编辑为指令ID。通信指令包括10位地址位和1位主机位。电子负载根据自己的地址生成接受指令识别码和发送指令识别码，用于后续通信。电子负载开机后，操作面板通过CAN总线，使用广播方式地址查询地址“0”-“9”的模组，各个模组回复自己的地址、型号、产品编码等信息，操作面板控制单元即可实时获取本机的模组信息，用来对操作者进行引导设置及使用。对于需要多模组协同工作的情况，对于各个模组的调度工作由操作面板控制单元统一进行。在标准CAN通信协议中，一个标准帧由11位ID信息和64位数据信息组成。本设计中将操作面板控制单元映射到11位ID中的最高位，而10个模组控制器则根据自身地址分别映射到其余10位，在这种机制下，可以实现极为高效灵活的通信。在图4的示例中，操作面板控制单元发送指令的过程为：等待。接受用户通过前面板等途径输入的指令。根据需要编辑指令ID，根据需要编辑指令内容；通过CAN收发器发送以上指令。等待。例如，操作面板控制单元要求0、3、9号模组同时启动拉载，其他1、2、4、5、6、7、8号模组维持待机状态。通信指令包括：主控指令：ID 指令。操作面板控制单元通过CAN收发器进行指令广播。在图5的示例中，所有单通道电子负载响应操作面板控制单元指令的过程为：等待。CAN收发器收到一条指令。将本机“接受指令识别码”与“指令ID”进行“逻辑与”运算。判断“与”结果 是否等于本机“接受指令识别码”。若否，则为非本机指令，等待。若是，则是本机指令，解析指令并执行该指令。判断是否需要回发。若否，等待。若是，将本机“发送指令识别码”编辑为指令ID根据需要编辑指令内容。通过CAN收发器发送以上指令。等待。操作面板控制单元要求0、3、9号模组同时启动拉载的通信指令会被全部的10台模组控制器接收到，对地址进行解析，各模组首先根据最高位确认是操作面板指令之后，再查找自身所对应的位是否为“1”，“1”则继续解析并响应后续指令；“0”则不再解析。最终该指令的结果就是0、3、9号模组会在几乎完全相同的时间点执行“启动拉载”，相对时间误差可小于1us。具体的，0-9号模组均收到了一条指令，0-9号模组均进行运算：0号运算结果：100 0000 0001B；3号运算结果：100 0000 0100B；9号运算结果：110 0000 0000B；其他运算结果：100 0000 0000B。判断结果：0、3、9号确认是本机指令；其他号确认非本机指令。0、3、9号解析指令并执行启动操作。0、3、9号判定该指令无需回发，直接返回。在模组回发信息时，如图6所示，操作面板控制单元接收指令的过程为：等待。CAN收发器收到一条指令。根据指令ID判断发送者；解析指令内容并进行相应操作。等待。例如，操作面板在启动0、3、9号模组之后，要查询所有模组的当前拉载状态。通信指令：ID 指令。操作面板控制单元通过CAN收发器进行指令广播。通信指令同样会被全部10台模组控制器接收到，各模组都会解析出同样的查询指令。0-9号模组均进行运算：0号运算结果：100 0000 0001B；1号运算结果：100 0000 0010B；…9号运算结果：110 0000 0000B。判断结果：0-9号均确认是本机指令。各模组均解析指令，并将各自最新的状态组成回复数据包准备回传。0、3、9号准备上传“拉载中”，其他号准备上传“待机中”。0-9号均判定该指令需回发，转入数据发送程序。0号模组通信指令：ID 指令。该指令同样会被操作面板控制单元和其余9台模组控制器接收到，但是其余9台模组控制器会因为ID最高位为“0”而确认此指令无需接收。只有操作面板控制单元才会接收该指令，并将收到的状态存储至0号模组对应的存储器，以备在前面板的显示之用。同理，1号-9号模组也会以相似的方式生成自己的ID和指令，并分别上传至CAN总线。1号模组通信指令：ID 指令。2号模组通信指令：ID 指令。3号模组通信指令：ID 指令。4号模组通信指令：ID 指令。5号模组通信指令：ID 指令。6号模组通信指令：ID 指令。7号模组通信指令：ID 指令。8号模组通信指令：ID 指令。9号模组通信指令：ID 指令。由于CAN总线通信硬件仲裁功能的存在，来自于10台模组控制器的总共10条状态信息会依次被操作面板控制单元接收到，虽然接收顺序不定，但由于每条信息都有对应自身地址的ID号，因此对于操作面板来说，这些数据并不会混乱。操作面板控制单元会以不定的顺序分别收到0-9号模组的上传信息，并进行分析、处理等操作，完成此次通信全过程。综上，本实施例中提出的通信方法可解决多模组之间时序控制同步性，以及实时数据查询高效性的问题。以上实施例仅用以说明本发明的技术方案，而非对其进行限制；尽管参照前述实施例对本发明进行了详细的说明，对于本领域的普通技术人员来说，依然可以对前述实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或替换，并不使相应技术方案的本质脱离本发明所要求保护的技术方案的精神和范围。
