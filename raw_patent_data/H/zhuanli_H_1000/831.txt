标题title
一种云台拍摄防抖方法、装置、设备及存储介质
摘要abst
本发明涉及云台的技术领域，公开了一种云台拍摄防抖方法、装置、设备及存储介质，本发明通过采集云台的抖动数据来获取云台的实时姿态变化特征，通过实时姿态变化特征的分析，来获取对应于当前抖动的各个预备指令的第一优先参数和第二优先参数，第一优先参数用于描述预备指令对应的调整幅度与前一时刻的关系，第二优先参数用于描述预备指令对应的调整幅度与预测的后一时刻的关系，从而在各个预备指令中确定一个调整指令，令云台能够以最小幅度完成姿态调整，并且调整后的姿态有利于减小后续的姿态调整的幅值，解决了现有技术中在调整云台姿态时未考虑调整幅度最小化问题。
权利要求书clms
1.一种云台拍摄防抖方法，其特征在于，包括：通过设置在云台内部的传感器组采集所述云台的抖动数据，对所述抖动数据进行分析，以生成所述云台的实时姿态变化特征；根据所述实时姿态变化特征从预设的数据库中调取对应的若干种预备指令，获取所述云台的实时状况数据并基于所述实时状况数据对各个所述预备指令进行分析，以获取各个所述预备指令的第一优先参数；根据时间顺序对所述云台的各个实时姿态变化特征进行排列，以生成所述云台的调整目标序列，基于所述调整目标序列进行分析，以获取所述云台的长期姿态变化特征；根据所述长期姿态变化特征为各个所述预备指令赋予第二优先参数，根据各个所述预备指令的第一优先参数和第二优先参数进行计算，以从各个所述预备指令中确定一个预备指令为调整指令。2.如权利要求1所述的一种云台拍摄防抖方法，其特征在于，通过设置在云台内部的传感器组采集所述云台的抖动数据，对所述抖动数据进行分析，以生成所述云台的实时姿态变化特征的步骤包括：通过设置在云台内部的传感器组采集所述云台的抖动数据；将当前时刻的抖动数据作为所述实时姿态变化特征的第一变化特征；将当前时刻的抖动数据与前一时刻的抖动数据之间的差距作为所述实时姿态变化特征的第二变化特征。3.如权利要求2所述的一种云台拍摄防抖方法，其特征在于，根据所述实时姿态变化特征从预设的数据库中调取对应的若干种预备指令，获取所述云台的实时状况数据并基于所述实时状况数据对各个所述预备指令进行分析，以获取各个所述预备指令的第一优先参数，将具有最高第一优先参数的所述预备指令确定为调整指令，以驱动所述云台进行姿态调整的步骤包括：根据所述实时姿态变化特征的第一变化特征在预设的数据库中调取对应的若干种预备指令；对各个所述预备指令进行计算，以得到各个所述预备指令对应的云台驱动幅度，获取所述云台的实时状况数据，并将各个所述预备指令对应的云台驱动幅度与所述云台的实时状况数据进行差距计算，将计算结果作为各个所述预备指令的第一优先参数，将具有最高第一优先参数的所述预备指令确定为调整指令。4.如权利要求2所述的一种云台拍摄防抖方法，其特征在于，根据时间顺序对所述云台的各个实时姿态变化特征进行排列，以生成所述云台的调整目标序列，基于所述调整目标序列进行分析，以获取所述云台的长期姿态变化特征的步骤包括：根据时间顺序对所述云台的各个实时姿态变化特征进行排列，以生成所述云台的调整目标序列；基于所述云台的调整目标序列，获取各个所述姿态变化特征与后续相邻的各个所述姿态变化特征之间的频率关系，以作为第一参考序列；基于所述云台的调整目标序列中各个所述姿态变化特征的第二变化特征，获取所述云台的各个相邻时刻的抖动数据的各种差距的频率关系，以作为第二参考序列；将各种所述姿态变化特征作为第一映射层，并将各个所述姿态变化特征作为第一映射层中各个所述姿态变化特征的第二映射层，根据所述第一参考序列和所述第二参考序列为所述第一映射层中各个姿态变化特征与对应的第二映射层汇总的各个所述姿态变化特征的映射关系赋予可能性参数，并将被赋予了可能性参数的映射关系作为长期姿态变化特征；所述长期姿态变化特征中的可能性参数用于对各个所述预备指令赋予对应的第二优先参数。5.一种云台拍摄防抖装置，其特征在于，包括：特征采集模块，用于通过设置在云台内部的传感器组采集所述云台的抖动数据，对所述抖动数据进行分析，以生成所述云台的实时姿态变化特征；指令生成模块，用于根据所述实时姿态变化特征从预设的数据库中调取对应的若干种预备指令，获取所述云台的实时状况数据并对各个所述预备指令进行分析，以获取各个所述预备指令的第一优先参数，将具有最高第一优先参数的所述预备指令确定为调整指令，以驱动所述云台进行姿态调整；数据分析模块，用于根据时间顺序对所述云台的各个实时姿态变化特征进行排列，以生成所述云台的调整目标序列，基于所述调整目标序列进行分析，以获取所述云台的长期姿态变化特征；指令修正模块，用于根据所述长期姿态变化特征为各个所述预备指令赋予第二优先参数，根据各个所述预备指令的第一优先参数和第二优先参数进行计算，以从各个所述预备指令中确定一个预备指令为调整指令。6.一种云台拍摄防抖设备，包括存储器和处理器，所述存储器存储有可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至4任一项所述的云台拍摄防抖方法。7.一种计算机可读存储介质，其特征在于，其上存储有计算机程序，所述计算机程序在被处理器运行时使得所述处理器执行如权利要求1-4中任一项所述的云台拍摄防抖方法。
说明书desc
技术领域本发明涉及云台的技术领域，尤其是一种云台拍摄防抖方法、装置、设备及存储介质。背景技术云台是一种用于设置摄像装置，并对摄像装置起到稳定作用的装置；云台工作的原理是实时监测抖动数据，并根据抖动数据施加相反的力度，从而保证云台的稳定，实现这一功能的结构是云台内部的多个传动关节，当面对同样的一个抖动数据时，多个传动关节具有多种调整方案，而不同的调整方案所对应的各个传动关节的调整幅度是不同的。在现有技术中，在确定云台的调整指令时缺少考虑传动关节的调整幅度的最小化。发明内容本发明的目的在于提供一种云台拍摄防抖方法、装置、设备及存储介质，旨在解决现有技术中在调整云台姿态时未考虑调整幅度最小化问题。本发明是这样实现的，第一方面，本发明提供一种云台拍摄防抖方法，包括：通过设置在云台内部的传感器组采集所述云台的抖动数据，对所述抖动数据进行分析，以生成所述云台的实时姿态变化特征；根据所述实时姿态变化特征从预设的数据库中调取对应的若干种预备指令，获取所述云台的实时状况数据并基于所述实时状况数据对各个所述预备指令进行分析，以获取各个所述预备指令的第一优先参数；根据时间顺序对所述云台的各个实时姿态变化特征进行排列，以生成所述云台的调整目标序列，基于所述调整目标序列进行分析，以获取所述云台的长期姿态变化特征；根据所述长期姿态变化特征为各个所述预备指令赋予第二优先参数，根据各个所述预备指令的第一优先参数和第二优先参数进行计算，以从各个所述预备指令中确定一个预备指令为调整指令。优选地，通过设置在云台内部的传感器组采集所述云台的抖动数据，对所述抖动数据进行分析，以生成所述云台的实时姿态变化特征的步骤包括：通过设置在云台内部的传感器组采集所述云台的抖动数据；将当前时刻的抖动数据作为所述实时姿态变化特征的第一变化特征；将当前时刻的抖动数据与前一时刻的抖动数据之间的差距作为所述实时姿态变化特征的第二变化特征。优选地，根据所述实时姿态变化特征从预设的数据库中调取对应的若干种预备指令，获取所述云台的实时状况数据并基于所述实时状况数据对各个所述预备指令进行分析，以获取各个所述预备指令的第一优先参数，将具有最高第一优先参数的所述预备指令确定为调整指令，以驱动所述云台进行姿态调整的步骤包括：根据所述实时姿态变化特征的第一变化特征在预设的数据库中调取对应的若干种预备指令；对各个所述预备指令进行计算，以得到各个所述预备指令对应的云台驱动幅度，获取所述云台的实时状况数据，并将各个所述预备指令对应的云台驱动幅度与所述云台的实时状况数据进行差距计算，将计算结果作为各个所述预备指令的第一优先参数，将具有最高第一优先参数的所述预备指令确定为调整指令。优选地，根据时间顺序对所述云台的各个实时姿态变化特征进行排列，以生成所述云台的调整目标序列，基于所述调整目标序列进行分析，以获取所述云台的长期姿态变化特征的步骤包括：根据时间顺序对所述云台的各个实时姿态变化特征进行排列，以生成所述云台的调整目标序列；基于所述云台的调整目标序列，获取各个所述姿态变化特征与后续相邻的各个所述姿态变化特征之间的频率关系，以作为第一参考序列；基于所述云台的调整目标序列中各个所述姿态变化特征的第二变化特征，获取所述云台的各个相邻时刻的抖动数据的各种差距的频率关系，以作为第二参考序列；将各种所述姿态变化特征作为第一映射层，并将各个所述姿态变化特征作为第一映射层中各个所述姿态变化特征的第二映射层，根据所述第一参考序列和所述第二参考序列为所述第一映射层中各个姿态变化特征与对应的第二映射层汇总的各个所述姿态变化特征的映射关系赋予可能性参数，并将被赋予了可能性参数的映射关系作为长期姿态变化特征；所述长期姿态变化特征中的可能性参数用于对各个所述预备指令赋予对应的第二优先参数。第二方面，本发明提供一种云台拍摄防抖装置，包括：特征采集模块，用于通过设置在云台内部的传感器组采集所述云台的抖动数据，对所述抖动数据进行分析，以生成所述云台的实时姿态变化特征；指令生成模块，用于根据所述实时姿态变化特征从预设的数据库中调取对应的若干种预备指令，获取所述云台的实时状况数据并对各个所述预备指令进行分析，以获取各个所述预备指令的第一优先参数，将具有最高第一优先参数的所述预备指令确定为调整指令，以驱动所述云台进行姿态调整；数据分析模块，用于根据时间顺序对所述云台的各个实时姿态变化特征进行排列，以生成所述云台的调整目标序列，基于所述调整目标序列进行分析，以获取所述云台的长期姿态变化特征；指令修正模块，用于根据所述长期姿态变化特征为各个所述预备指令赋予第二优先参数，根据各个所述预备指令的第一优先参数和第二优先参数进行计算，以从各个所述预备指令中确定一个预备指令为调整指令。第三方面，本发明提供一种云台拍摄防抖设备，包括存储器和处理器，所述存储器存储有可在处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现第一方面任一项所述的云台拍摄防抖方法。第四方面，本发明提供一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序在被处理器运行时使得所述处理器执行如第一方面中任一项所述的云台拍摄防抖方法。本发明提供了一种云台拍摄防抖方法，具有以下有益效果：本发明通过采集云台的抖动数据来获取云台的实时姿态变化特征，通过实时姿态变化特征的分析，来获取对应于当前抖动的各个预备指令的第一优先参数和第二优先参数，第一优先参数用于描述预备指令对应的调整幅度与前一时刻的关系，第二优先参数用于描述预备指令对应的调整幅度与预测的后一时刻的关系，从而在各个预备指令中确定一个调整指令，令云台能够以最小幅度完成姿态调整，并且调整后的姿态有利于减小后续的姿态调整的幅值，解决了现有技术中在调整云台姿态时未考虑调整幅度最小化问题。附图说明图1是本发明实施例提供的一种云台拍摄防抖方法的步骤示意图；图2是本发明实施例提供的一种云台拍摄防抖装置的结构示意图。具体实施方式为了使本发明的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本发明进行进一步详细说明。应当理解，此处所描述的具体实施例仅仅用以解释本发明，并不用于限定本发明。本实施例的附图中相同或相似的标号对应相同或相似的部件；在本发明的描述中，需要理解的是，若有术语“上”、“下”、“左”、“右”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此附图中描述位置关系的用语仅用于示例性说明，不能理解为对本发明的限制，对于本领域的普通技术人员而言，可以根据具体情况理解上述术语的具体含义。以下结合具体实施例对本发明的实现进行详细的描述。参照图1、图2所示，为本发明提供较佳实施例。第一方面，本发明提供一种云台拍摄防抖方法，包括：S1：通过设置在云台内部的传感器组采集所述云台的抖动数据，对所述抖动数据进行分析，以生成所述云台的实时姿态变化特征；S2：根据所述实时姿态变化特征从预设的数据库中调取对应的若干种预备指令，获取所述云台的实时状况数据并基于所述实时状况数据对各个所述预备指令进行分析，以获取各个所述预备指令的第一优先参数；S3：根据时间顺序对所述云台的各个实时姿态变化特征进行排列，以生成所述云台的调整目标序列，基于所述调整目标序列进行分析，以获取所述云台的长期姿态变化特征；S4：根据所述长期姿态变化特征为各个所述预备指令赋予第二优先参数，根据各个所述预备指令的第一优先参数和第二优先参数进行计算，以从各个所述预备指令中确定一个预备指令为调整指令。具体地，云台内部设置有传感器组、处理器以及传动结构，传感器组用于采集云台的抖动数据，通过处理器对抖动数据的分析来判断云台的现有姿态与正常姿态的偏差，并驱动传动结构施加与抖动数据相反的力度，令云台保持着正常姿态。需要说明的是，这里的传动结构是由多个传动关节组成的，也就是说，为了令传动结构对云台施加与抖动数据相反的力度，存在着多种方案，各个方案中各个传动关节进行不同的调整，从而在整体上实现相同的效果。更具体地，当云台在持续进行工作时，每个时刻应对的抖动数据是不同的，因此每个时刻云台的传动结构所需要进行的调整也是不同的，因此传动结构最终实行的调整需要从两个方面进行考虑：第一，上一时刻传动结构中各个传动关节已经针对上一时刻的抖动数据进行的调整，现在时刻传动结构中各个传动关节进行的调整，是否能以各个传动关节进行最小的调整幅度实现；第二，下一时刻传动结构会继续产生抖动数据，现在时刻传动结构中各个传动关节进行调整后，是否能令传动结构中各个传动关节以最小的调整幅度应对后一时刻的抖动数据。具体地，第一步通过设置在云台内部的传感器组采集云台的抖动数据，对抖动数据进行分析，以生成云台的实时姿态变化特征。更具体地，第二步根据实时姿态变化特征从预设的数据库中调取对应的若干种预备指令，获取云台的实时状况数据并基于实时状况数据对各个预备指令进行分析，以获取各个预备指令的第一优先参数。可以理解的是，上述步骤的目的就在于通过从两个方面中的第一个方面来判断该如何调整传动结构中的各个传动关节。更具体地，第三步根据时间顺序对云台的各个实时姿态变化特征进行排列，以生成云台的调整目标序列，基于调整目标序列进行分析，以获取云台的长期姿态变化特征。更具体地，第四步根据长期姿态变化特征为各个预备指令赋予第二优先参数，根据各个预备指令的第一优先参数和第二优先参数进行计算，以从各个预备指令中确定一个预备指令为调整指令。可以理解的是，上述步骤的目的就在于通过从两个方面中的第二个方面来判断该如何调整传动结构中的各个传动关节。具体地，这一思路是云台的抖动数据进行持续的采集，从而分析出云台在各个时刻的调整目标分别是什么，之间存在着何种规律，并根据这个规律推测下一时刻的调整目标，之后再判断当前时刻该如何调整传动结构，以确保传动结构在下一时刻可以以最小幅度完成调整。需要说明的是，上述步骤中的长期姿态变化特征是会随着时间的变化而采集到更多的数据并随之变化的，因此在最开始工作时，长期姿态变化特征采集到的数据量较少，可靠性较低，此时只根据第一优先参数来从各个预备指令中确定调整指令，而随着采集的数据达到预定标准，此时的长期姿态变化特征具备了可靠性，则开始根据第一优先参数和第二优先参数从各个预备指令中确定调整指令。本发明提供了一种云台拍摄防抖方法，具有以下有益效果：本发明通过采集云台的抖动数据来获取云台的实时姿态变化特征，通过实时姿态变化特征的分析，来获取对应于当前抖动的各个预备指令的第一优先参数和第二优先参数，第一优先参数用于描述预备指令对应的调整幅度与前一时刻的关系，第二优先参数用于描述预备指令对应的调整幅度与预测的后一时刻的关系，从而在各个预备指令中确定一个调整指令，令云台能够以最小幅度完成姿态调整，并且调整后的姿态有利于减小后续的姿态调整的幅值，解决了现有技术中在调整云台姿态时未考虑调整幅度最小化问题。优选地，通过设置在云台内部的传感器组采集所述云台的抖动数据，对所述抖动数据进行分析，以生成所述云台的实时姿态变化特征的步骤包括：S11：通过设置在云台内部的传感器组采集所述云台的抖动数据；S12：将当前时刻的抖动数据作为所述实时姿态变化特征的第一变化特征；S13：将当前时刻的抖动数据与前一时刻的抖动数据之间的差距作为所述实时姿态变化特征的第二变化特征。具体地，在上述的描述中可以得知，对调整指令的确定需要从第一优先参数和第二优先参数两个方面进行考虑。更具体地，将当前时刻的抖动数据作为实时姿态变化特征的第一变化特征，第一变化特征用于调取对应的若干种预备指令，从第一优先参数的方面来确定调整指令。也就是：上一时刻传动结构中各个传动关节已经针对上一时刻的抖动数据进行的调整，现在时刻传动结构中各个传动关节进行的调整，是否能以各个传动关节进行最小的调整幅度实现。更具体地，将当前时刻的抖动数据与前一时刻的抖动数据之间的差距作为实时姿态变化特征的第二变化特征，第二变化特征属于第一优先参数的一个参考考方面。也就是：下一时刻传动结构会继续产生抖动数据，现在时刻传动结构中各个传动关节进行调整后，是否能令传动结构中各个传动关节以最小的调整幅度应对后一时刻的抖动数据。优选地，根据所述实时姿态变化特征从预设的数据库中调取对应的若干种预备指令，获取所述云台的实时状况数据并基于所述实时状况数据对各个所述预备指令进行分析，以获取各个所述预备指令的第一优先参数，将具有最高第一优先参数的所述预备指令确定为调整指令，以驱动所述云台进行姿态调整的步骤包括：S21：根据所述实时姿态变化特征的第一变化特征在预设的数据库中调取对应的若干种预备指令；S22：对各个所述预备指令进行计算，以得到各个所述预备指令对应的云台驱动幅度，获取所述云台的实时状况数据，并将各个所述预备指令对应的云台驱动幅度与所述云台的实时状况数据进行差距计算，将计算结果作为各个所述预备指令的第一优先参数，将具有最高第一优先参数的所述预备指令确定为调整指令。具体地，实时姿态变化特征用于描述云台在当前时刻发生了什么样的姿态变化，而这个发生的姿态变化则是云台的调整目标，也就是说云台内部的传动结构需要从相反的角度对云台进行姿态调整。更具体地，实时姿态特征中的第一变化特征描述了云台在当前时刻的抖动数据，而这一抖动数据，就是是云台中的传动结构需要通过姿态调整以消除的调整目标。更具体地，在预设的数据库中，针对不同的抖动数据存储有对应的多种预备指令，这些预备指令用于驱动传动结构中的各个传动关节，以控制云台的姿态调整。更具体地，获取云台的实时状况数据，实时状况数据描述了云台的传动结构的各个传动关节的实时状况，将各个预备指令中对应的传动结构中各个传动关节的姿态调整幅度与实时状况数据进行对比分析，将对比分析的结果作为第一优先参数，通过第一优先参数来判断出各个预备指令的具有最小的传动关节调整幅度的预备指令，将其作为调整指令。优选地，根据时间顺序对所述云台的各个实时姿态变化特征进行排列，以生成所述云台的调整目标序列，基于所述调整目标序列进行分析，以获取所述云台的长期姿态变化特征的步骤包括：S31：根据时间顺序对所述云台的各个实时姿态变化特征进行排列，以生成所述云台的调整目标序列；S32：基于所述云台的调整目标序列，获取各个所述姿态变化特征与后续相邻的各个所述姿态变化特征之间的频率关系，以作为第一参考序列；S33：基于所述云台的调整目标序列中各个所述姿态变化特征的第二变化特征，获取所述云台的各个相邻时刻的抖动数据的各种差距的频率关系，以作为第二参考序列；S34：将各种所述姿态变化特征作为第一映射层，并将各个所述姿态变化特征作为第一映射层中各个所述姿态变化特征的第二映射层，根据所述第一参考序列和所述第二参考序列为所述第一映射层中各个姿态变化特征与对应的第二映射层汇总的各个所述姿态变化特征的映射关系赋予可能性参数，并将被赋予了可能性参数的映射关系作为长期姿态变化特征；所述长期姿态变化特征中的可能性参数用于对各个所述预备指令赋予对应的第二优先参数。具体地，云台在各个时刻的实时姿态变化特征描述了云台在这一时刻所需要应对的调整目标，将各个调整目标排列成调整目标序列，并根据调整目标序列中各个姿态变化特征与后续相邻的各个姿态变化特征之间的频率关系，生成第一参考序列。更具体地，基于云台的调整目标序列中各个姿态变化特征的第二变化特征，获取云台的各个相邻时刻的抖动数据的各种差距的频率关系，以作为第二参考序列。可以理解的是，第一参考序列是直接通过相邻抖动数据的历史关系进行预测，第二参考序列是通过相邻抖动数据之间的差距关系进行预测。更具体地，将各种姿态变化特征作为第一映射层，并将各个姿态变化特征作为第一映射层中各个姿态变化特征的第二映射层，根据第一参考序列和第二参考序列为第一映射层中各个姿态变化特征与对应的第二映射层汇总的各个姿态变化特征的映射关系赋予可能性参数，并将被赋予了可能性参数的映射关系作为长期姿态变化特征；长期姿态变化特征中的可能性参数用于对各个预备指令赋予对应的第二优先参数。参照图2所示，第二方面，本发明提供一种云台拍摄防抖装置，包括：特征采集模块，用于通过设置在云台内部的传感器组采集所述云台的抖动数据，对所述抖动数据进行分析，以生成所述云台的实时姿态变化特征；指令生成模块，用于根据所述实时姿态变化特征从预设的数据库中调取对应的若干种预备指令，获取所述云台的实时状况数据并对各个所述预备指令进行分析，以获取各个所述预备指令的第一优先参数，将具有最高第一优先参数的所述预备指令确定为调整指令，以驱动所述云台进行姿态调整；数据分析模块，用于根据时间顺序对所述云台的各个实时姿态变化特征进行排列，以生成所述云台的调整目标序列，基于所述调整目标序列进行分析，以获取所述云台的长期姿态变化特征；指令修正模块，用于根据所述长期姿态变化特征为各个所述预备指令赋予第二优先参数，根据各个所述预备指令的第一优先参数和第二优先参数进行计算，以从各个所述预备指令中确定一个预备指令为调整指令。上述各个模块均按第一方面提供的一种云台拍摄防抖方法进行工作，在此不做赘述。第三方面，本发明提供一种云台拍摄防抖设备，包括存储器和处理器，所述存储器存储有可在处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现第一方面任一项所述的云台拍摄防抖方法。第四方面，本发明提供一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序在被处理器运行时使得所述处理器执行如第一方面中任一项所述的云台拍摄防抖方法。以上所述仅为本发明的较佳实施例而已，并不用以限制本发明，凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明的保护范围之内。
