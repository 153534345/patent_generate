标题title
自学习照明群控系统及方法
摘要abst
本发明涉及智能照明技术领域，其公开了一种自学习照明群控系统及方法。该系统包括：包括多个智能照明节点，每一智能照明节点包括传感模块、存储模块、计算模块、通信模块、控制模块以及照明模块，通过传感模块采集运动体在照明区域通行时的触发数据，由通信模块将触发数据发送至其它智能照明节点和接收其它智能照明节点回应的通信数据，并通过计算模块根据触发数据和通信数据自适应生成照明群控方案，以控制相邻及预判行进线路上的智能照明节点的控制模块控制自身的照明模块实现与照明群控方案相对应的照明效果。本发明可以实现跟随运动体移动的伴随式照明和行进方向上更远距离的安全照明，在确保动态节能的前提下能更好地保障照明体验与安全。
权利要求书clms
1.一种自学习照明群控系统，其特征在于，包括多个智能照明节点，每一所述智能照明节点包括：传感模块、存储模块、计算模块、通信模块、控制模块以及照明模块；其中，所述传感模块用于采集运动体在照明区域通行时的触发数据；所述存储模块与所述传感模块连接，所述存储模块用于接收并存储所述触发数据；所述通信模块用于接收所述计算模块生成的通信指令，并根据所述通信指令与其它所述智能照明节点进行通信和数据交换以得到通信数据；所述计算模块与所述存储模块及所述通信模块连接，所述计算模块用于根据所述触发数据和所述通信数据自适应生成照明群控方案，并根据所述照明群控方案控制相邻及预判行进线路上的智能照明节点，以使相邻及预判行进线路上的智能照明节点中的所述控制模块控制自身的所述照明模块工作；所述控制模块与所述计算模块及所述照明模块连接，所述控制模块用于接收所述计算模块生成的照明控制指令，并根据所述照明控制指令控制所述照明模块工作。2.根据权利要求1所述的自学习照明群控系统，其特征在于，所述照明群控方案控制的被触发智能照明节点的相邻及预判行进线路上的智能照明节点包括第一邻域智能照明节点和第二邻域智能照明节点，其中，所述第一邻域智能照明节点与所述被触发智能照明节点的通信跳数不大于第一邻域通信跳数上限值；所述第二邻域智能照明节点与所述被触发智能照明节点的通信跳数大于所述第一邻域通信跳数上限值、且不大于第二邻域通信跳数上限值。3.根据权利要求2所述的自学习照明群控系统，其特征在于，每一所述被触发智能照明节点的邻域至少包括1个所述第一邻域智能照明节点、且所述被触发智能照明节点与所述第一邻域智能照明节点之间的距离不超过无线通信单跳的最大距离。4.一种自学习照明群控方法，应用于上述权利要求1-3任一项所述的自学习照明群控系统，其特征在于，所述方法包括：被触发智能照明节点采集所述运动体在照明区域内通行时的触发数据，并将所述触发数据进行保存和发送至邻域智能照明节点；所述邻域智能照明节点接收并转发所述触发数据；所述邻域智能照明节点根据所述触发数据生成回应消息以发送至所述被触发智能照明节点；所述被触发智能照明节点根据所述回应消息更新其存储的第一邻域节点列表、第二邻域节点列表以及邻域主通道节点列表；所述被触发智能照明节点根据自身存储的第一邻域节点列表、第二邻域节点列表以及邻域主通道节点列表和所述触发数据进行自学习，以生成照明群控方案；完成自学习的所述被触发智能照明节点若再次感应到所述运动体，则读取自身存储的所述照明群控方案生成对应的照明控制消息，并将所述照明控制消息发送至所述邻域智能照明节点，以使所述邻域智能照明节点执行与所述照明控制消息对应的群控动作。5.根据权利要求4所述的自学习照明群控方法，其特征在于，所述邻域智能照明节点包括第一邻域智能照明节点和第二邻域智能照明节点，所述邻域智能照明节点接收并转发所述触发数据，包括：所述第一邻域智能照明节点接收所述触发数据，根据所述触发数据检查自身存储的第一邻域节点列表中是否记录被触发智能照明节点id；若所述第一邻域节点列表中不存在所述被触发智能照明节点id，则将所述被触发智能照明节点id记录至自身的所述第一邻域节点列表；所述第一邻域智能照明节点检查所述触发数据的跳变次数，以判断所述跳变次数是否小于第一邻域通信跳数上限值；若所述跳变次数小于所述第一邻域通信跳数上限值，则将所述第一邻域智能照明节点作为中继节点转发所述触发数据至下一个第一邻域智能照明节点；所述下一个第一邻域智能照明节点返回执行所述第一邻域智能照明节点接收所述触发数据，根据所述触发数据检查自身存储的第一邻域节点列表中是否记录被触发智能照明节点id的步骤，直至所述跳变次数不小于所述第一邻域通信跳数上限值；若所述跳变次数不小于所述第一邻域通信跳数上限值，则将所述第一邻域智能照明节点作为所述中继节点转发所述触发数据至所述第二邻域智能照明节点。6.根据权利要求5所述的自学习照明群控方法，其特征在于，所述邻域智能照明节点接收并转发所述触发数据，还包括：所述第二邻域智能照明节点接收所述中继节点转发的所述触发数据，并检查自身存储的第一邻域节点列表是否记录中继节点id；若所述第二邻域智能照明节点的第一邻域节点列表中不存在所述中继节点id，则将所述中继节点id记录至自身的所述第一邻域节点列表；所述第二邻域智能照明节点检查自身存储的被触发节点列表是否记录所述被触发智能照明节点id；若所述被触发节点列表中不存在所述被触发智能照明节点id，则将所述被触发智能照明节点id记录至所述被触发节点列表；所述第二邻域智能照明节点检查所述触发数据的跳变次数，以判断所述跳变次数是否小于所述第二邻域通信跳数上限值；若所述跳变次数小于所述第二邻域通信跳数上限值，则将所述第二邻域智能照明节点作为下一级中继节点转发所述触发数据至下一个第二邻域智能照明节点；所述下一个第二邻域智能照明节点返回执行所述第二邻域智能照明节点接收所述中继节点转发的所述触发数据，并检查自身存储的第一邻域节点列表是否记录中继节点id的步骤，直至所述跳变次数不小于所述第二邻域通信跳数上限值。7.根据权利要求6所述的自学习照明群控方法，其特征在于，所述回应消息包括第一回应消息和第二回应消息，所述邻域智能照明节点根据所述触发数据生成回应消息以发送至所述被触发智能照明节点，包括：所述第一邻域智能照明节点接收到所述触发数据后，生成所述第一回应消息并发送至所述被触发智能照明节点；所述第二邻域智能照明节点接收到所述触发数据后，生成所述第二回应消息并发送至所述第一邻域智能照明节点；所述第一邻域智能照明节点接收到所述第二回应消息后，检查自身存储的第一邻域节点列表是否记录第二邻域智能照明节点id；若所述第一邻域智能照明节点的第一邻域节点列表中不存在所述第二邻域智能照明节点id，所述第一邻域智能照明节点则将所述第二邻域智能照明节点id记录至所述第一邻域节点列表；所述第一邻域智能照明节点接收到所述第二回应消息后，转发所述第二回应消息至所述被触发智能照明节点。8.根据权利要求7所述的自学习照明群控方法，其特征在于，所述被触发智能照明节点根据所述回应消息更新其存储的第一邻域节点列表、第二邻域节点列表以及邻域主通道节点列表，包括：所述被触发智能照明节点接收到所述第一回应消息后，检查自身存储的第一邻域节点列表是否记录第一邻域智能照明节点id；若所述第一邻域节点列表中不存在所述第一邻域智能照明节点id，则将所述第一邻域智能照明节点id记录至所述第一邻域节点列表；所述被触发智能照明节点接收到所述第二回应消息后，检查自身存储的第二邻域节点列表是否记录所述第二邻域智能照明节点id；若所述第二邻域节点列表中不存在所述第二邻域智能照明节点id，则将所述第二邻域智能照明节点id记录至所述第二邻域节点列表；所述被触发智能照明节点通过对比自身与邻域智能照明节点的累计触发次数，以判断自身是否为主通道节点，并将判断结果记录或更新在所述被触发节点的第一邻域节点与第二邻域节点的邻域主通道节点列表中。9.根据权利要求8所述的自学习照明群控方法，其特征在于，所述被触发智能照明节点根据自身存储的第一邻域节点列表、第二邻域节点列表以及邻域主通道节点列表和所述触发数据进行自学习，以生成照明群控方案，包括：所述被触发智能照明节点从其存储的所述第一邻域节点列表中提取所述第一邻域智能照明节点id，根据所述第一邻域智能照明节点id和所述触发数据生成所述第一邻域智能照明节点的照明群控方案；所述被触发智能照明节点读取其存储的所述第二邻域节点列表及所述邻域主通道节点列表，并计算所述第二邻域节点列表与所述邻域主通道节点列表之间的交集得到所述被触发智能照明节点的预判行进路线上更远范围的照明群控方案。10.根据权利要求6所述的自学习照明群控方法，其特征在于，所述将所述照明控制消息发送至所述邻域智能照明节点，以使所述邻域智能照明节点执行与所述照明控制消息对应的群控动作，包括：将所述照明控制消息发送至所述第一邻域智能照明节点和所述第二邻域智能照明节点，以控制所述第一邻域智能照明节点和所述第二邻域智能照明节点亮灯和/或灭灯。
说明书desc
技术领域本发明涉及智能照明技术领域，尤其涉及一种自学习照明群控系统及方法。背景技术楼宇公共区域照明，典型场景如写字楼的大厅、走廊、以及地下停车场的照明，照明节点数量庞大、传统的手动开关控制方式通常不会对每盏灯进行单独控制，难以实现一类特殊的动态照明需求——跟随运动体移动的伴随式照明和向运动体在行进方向上提供更远距离的安全照明。这类动态照明对于展览馆、商场、酒店，能够提供给用户更好、更高级的照明体验；而对于康养中心、地下停车场，该类动态照明不仅能提供更广阔的照明视野，还能更好地保障人员或车辆的行进安全。为了实现所述动态照明，在现有的技术中，一类控制方法为：通过设置传感装置，运动体经过传感装置时会触发传感装置周围的照明节点，以实现一定范围内照明。该类控制方法虽然能够实现以运动体为中心，在运动体周边一定范围内的实现感应亮灯，但无法提供更远距离的照明视野，节能与体验的平衡存在明显的优化空间。另一类控制方法为：需人工调试标记照明节点的类型，并借助中心控制器来实现不同类型照明节点的动态控制。然而，该类控制方法需要在系统部署时根据照明需求进行系统的人工调试，需完成照明节点的收录、组网、控制逻辑的编制和测试。一旦照明需求发生改动，则需重新进行人工调试，系统复杂度高、智能化程度低、运维成本高。发明内容本发明提供了一种自学习照明群控系统及方法，旨在实现跟随运动体移动的伴随式照明和行进方向上更远距离的安全照明。第一方面，本发明实施例提供了一种自学习照明群控系统，其包括：多个智能照明节点，每一所述智能照明节点包括：传感模块、存储模块、计算模块、通信模块、控制模块以及照明模块；其中，所述传感模块用于采集运动体在照明区域通行时的触发数据；所述存储模块与所述传感模块连接，所述存储模块用于接收并存储所述触发数据；所述通信模块用于接收所述计算模块生成的通信指令，并根据所述通信指令与其它所述智能照明节点进行通信和数据交换以得到通信数据；所述计算模块与所述存储模块及所述通信模块连接，所述计算模块用于根据所述触发数据和所述通信数据自适应生成照明群控方案，并根据所述照明群控方案控制相邻及预判行进线路上的智能照明节点，以使相邻及预判行进线路上的智能照明节点中的所述控制模块控制自身的所述照明模块工作；所述控制模块与所述计算模块及所述照明模块连接，所述控制模块用于接收所述计算模块生成的照明控制指令，并根据所述照明控制指令控制所述照明模块工作。为了实现上述目的，另一个方面，本发明实施例还提供了一种自学习照明群控方法，其包括：被触发智能照明节点采集所述运动体在照明区域内通行时的触发数据，并将所述触发数据进行保存和发送至邻域智能照明节点；所述邻域智能照明节点接收并转发所述触发数据；所述邻域智能照明节点根据所述触发数据生成回应消息以发送至所述被触发智能照明节点；所述被触发智能照明节点根据所述回应消息更新其存储的第一邻域节点列表、第二邻域节点列表以及邻域主通道节点列表；所述被触发智能照明节点根据自身存储的第一邻域节点列表、第二邻域节点列表以及邻域主通道节点列表和所述触发数据进行自学习，以生成照明群控方案；完成自学习的所述被触发智能照明节点若再次感应到所述运动体，则读取自身存储的所述照明群控方案生成对应的照明控制消息，并将所述照明控制消息发送至所述邻域智能照明节点，以使所述邻域智能照明节点执行与所述照明控制消息对应的群控动作。本发明实施例提供了一种自学习照明群控系统及方法。所述系统包括多个智能照明节点，智能照明节点通过传感模块采集运动体在照明区域通行时的触发数据，由通信模块将触发数据发送至其它智能照明节点和接收其它智能照明节点回应的通信数据，并通过计算模块根据触发数据和通信数据自适应生成照明群控方案，从而可以控制相邻及预判行进线路上的智能照明节点的控制模块控制自身的照明模块实现与所述照明群控方案相对应的照明效果。本发明系统通过自主学习运动体在照明区域通行时的触发数据，自适应生成相邻及预判行进线路上的智能照明节点的照明群控方案，无需人工调试或使用中心控制器控制，即可实现跟随运动体移动的伴随式照明和预判行进方向上更远距离的安全照明，在确保动态节能的前提下能更好地保障照明体验与安全。附图说明为了更清楚地说明本发明实施例技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例提供的一种自学习照明群控系统的结构示意图；图2为本发明实施例提供的一种自学习照明群控系统中的智能照明节点的分布示意图；图3为本发明实施例提供的一种自学习照明群控方法的流程示意图；图4为本发明实施例提供的一种自学习照明群控方法的子流程示意图；图5为本发明实施例提供的一种自学习照明群控方法的子流程示意图；图6为本发明实施例提供的一种自学习照明群控方法的子流程示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。应当理解，当在本说明书和所附权利要求书中使用时，术语“包括”和 “包含”指示所描述特征、整体、步骤、操作、元素和/或组件的存在，但并不排除一个或多个其它特征、整体、步骤、操作、元素、组件和/或其集合的存在或添加。还应当理解，在此本发明说明书中所使用的术语仅仅是出于描述特定实施例的目的而并不意在限制本发明。如在本发明说明书和所附权利要求书中所使用的那样，除非上下文清楚地指明其它情况，否则单数形式的“一”、“一个”及“该”意在包括复数形式。还应当进一步理解，在本发明说明书和所附权利要求书中使用的术语“和/ 或”是指相关联列出的项中的一个或多个的任何组合以及所有可能组合，并且包括这些组合。如在本说明书和所附权利要求书中所使用的那样，术语“如果”可以依据上下文被解释为 “当... 时”或“一旦”或“响应于确定”或“响应于检测到”。类似地，短语“如果确定”或“如果检测到”可以依据上下文被解释为意指“一旦确定”或“响应于确定”或“一旦检测到”或“响应于检测到”。请参阅图1，图1是本发明实施例提供的自学习照明群控系统的结构示意图。本系统可以应用于地下停车场智能照明场景。如图1所示，所述自学习照明群控系统由多个分布式智能照明节点组成，每个智能照明节点包括：传感模块、存储模块、计算模块、通信模块、控制模块以及照明模块，其中，所述传感模块用于采集运动体在照明区域通行时的触发数据；所述触发数据为运动体通过某智能照明节点时，传感模块因被触发采集的数据。传感模块采集的触发数据会写入自身所在节点的存储模块中进行保存，为开展自学习提供基础数据。优选地，所述传感模块安装微波雷达，以感应特定距离范围内的运动体的移动情况并采集相关数据。可选地，所述传感模块可增加光感、声感等传感器，通过采集光线、声音等传感数据来提升系统对运动体的感应灵敏度。需要说明的是，在本实施例中，所述运动体为行驶的车辆。所述存储模块与所述传感模块连接，所述存储模块用于接收并存储所述触发数据。进一步地，所述存储模块可用于存储记录多种类型的数据，例如包括：存储模块所在智能照明节点的触发数据；存储模块所在节点及邻域节点的触发回应数据；存储模块所在节点的中继通信数据；存储模块所在节点自学习生成的邻域节点以及预判行进路线上照明节点的控制方案数据。所述通信模块用于接收所述计算模块生成的通信指令，并根据所述通信指令与其它所述智能照明节点进行通信和数据交换以得到通信数据；其中，各智能照明节点之间可通过所述通信模块建立网络连接，实现节点之间发送和接收通信指令。优选地，可以利用无线电、蓝牙、WiFi、ZigBee、Lora等无线技术实现节点间的无线组网与数据传输。所述计算模块与所述存储模块及所述通信模块连接，所述计算模块用于根据所述触发数据和所述通信数据自适应生成照明群控方案，并根据所述照明群控方案控制相邻及预判行进线路上的智能照明节点，以使相邻及预判行进线路上的智能照明节点中的所述控制模块控制自身的所述照明模块工作。其中，计算模块中内置MCU，其作用包括生成通信指令、提取通信指令中的数据、执行自学习程序、读取自学习结果并生成照明控制指令。具体地，计算模块的作用包含：读取存储模块记录的自身的触发数据生成通信指令，以便将触发数据广播给邻域节点；提取通信模块接收到的通信指令中的触发数据、回应数据、中继数据，通过执行自学习程序生成节点的照明群控方案；当节点再次被触发时，读取存储模块记录的自学习结果并生成照明控制指令，以便控制模块执行相应动作实现对照明模块的控制。所述控制模块与所述计算模块和所述照明模块连接，所述控制模块用于接收所述计算模块生成的照明控制指令，并根据所述照明控制指令控制所述照明模块工作。例如，控制模块可以接收计算模块输出的控制和配置指令，通过调整自身控制器的电流或开关周期，实现相应节点的照明模块中光源的开/关、调光、调色、渐变等控制效果。照明模块与所述控制模块连接，由电源与光源组成，是实现智能照明节点发光的重要部分。优选地，可使用LED电源与LED光源组成LED灯具，用于楼宇或地下停车场的公共区域照明。请参阅图2，图2是本发明一实施例提供的智能照明节点的分布示意图。图2中，该实施例自学习照明群控系统由24个分布式智能照明节点组成。此外，该实施例有2条主车道，主车道1上方依次布设智能照明节点0，3，6，5，11，15，20，21，22，23，24；主车道2上方依次布设智能照明节点0，3，6，7，8，13，18，23，24。所述照明群控方案控制的相邻及预判行进线路上的智能照明节点包括第一邻域智能照明节点和第二邻域智能照明节点。其中，与被触发智能照明节点的通信跳数不大于第一邻域通信跳数上限值的智能照明节点称为第一邻域智能照明节点；与被触发节点的通信跳数大于所述第一邻域通信跳数上限值、且不大于第二邻域通信跳数上限值的智能照明节点称为第二邻域智能照明节点。在本实施例中，节点与距离较远的节点通过多跳方式进行无线通信。本实施例设定的所述第一邻域通信跳数上限值为1，所述第二邻域通信跳数上限值为2。以图2中的智能照明节点6被触发为例，距节点6通信跳数为1的智能照明节点3、5、7、12为被触发节点6的第一邻域智能照明节点，距节点6通信跳数为2的节点0、4、8、11、16为被触发节点6的第二邻域智能照明节点。此外，从图2中可以看出，每一所述智能照明节点的邻域至少包括1个所述第一邻域智能照明节点、且与所述智能照明节点的距离不超过无线通信单跳最大距离，以保障每一所述智能照明节点与周围智能照明节点可以通过无线单跳或多跳方式实现组网。例如，距节点6的距离不超过无线通信单跳最大距离的第一邻域智能照明节点有节点3、5、7、12，距节点3、5、7、12中任一节点的距离不超过无线通信单跳最大距离的第一邻域智能照明节点均至少有1个，从而可以保障节点6与周围节点的无线组网要求。请参阅图3，图3是本发明实施例提供的自学习照明群控方法的流程示意图。该自学习照明群控方法应用于上述的自学习照明群控系统，通过本发明的自学习照明群控方法可向运动体提供跟随移动的伴随式照明和行进方向上更远距离的安全照明。下面对所述自学习照明群控方法进行详细说明。如图3所示，该方法包括以下步骤S100-S130。S100、被触发智能照明节点采集所述运动体在照明区域内通行时的触发数据，并将所述触发数据进行保存和发送至邻域智能照明节点。在本发明实施例中，运动体在分布多个智能照明节点的区域内沿行进通道多次通行，距运动体不超过传感模块感应距离的智能照明节点被触发，触发数据被记录并写入被触发智能照明节点的存储模块。其中，触发数据包括：被触发智能照明节点id，累计触发次数以及最近触发时间。需要说明的是，在本实施例中，所述行进通道包括主通道和分支通道，车道为主通道，车位到车道的路线为分支通道，且主通道上运动体的通行次数相比于分支通道的通行次数通常会更多。还需要说明的是，本发明实施例中所述行进通道的数量不限定为特定数量。本实施例以外的其他典型场景还有：楼层公共区域照明场景，其中，公共走廊为主通道、工位到公共走廊的路线为分支通道。S110、所述邻域智能照明节点接收并转发所述触发数据。在本发明实施例中，所述邻域智能照明节点包括第一邻域智能照明节点及第二邻域智能照明节点。优选地，在本实施例中，所述第一邻域智能照明节点的判断依据为：与所述被触发智能照明节点的通信跳数不大于第一邻域通信跳数上限值的相邻的智能照明节点为被触发智能照明节点的第一邻域智能照明节点。所述第二邻域智能照明节点的判断依据为：与所述被触发智能照明节点的通信跳数大于所述第一邻域通信跳数上限值、且不大于第二邻域通信跳数上限值的相邻的智能照明节点为被触发智能照明节点的第二邻域智能照明节点。本实施例中，所述第一邻域通信跳数上限值为1，所述第二邻域通信跳数上限值为2。可选地，在其它实施例中，所述第一邻域与第二邻域智能照明节点的判断依据还可以为：被触发照明节点与相邻的智能照明节点的直线距离满足特定阈值条件；或者被触发照明节点收到相邻的智能照明节点的反馈通信时间满足特定时长条件。因此，第一邻域智能照明节点和第二邻域智能照明节点接收并转发触发数据，根据触发数据生成相应的回应消息，并将回应消息发送至被触发智能照明节点。请参阅图4，在一实施例中，例如，在本发明实施例中，所述步骤S110包括如下步骤S111-S116。S111、所述第一邻域智能照明节点接收所述触发数据，根据所述触发数据检查自身存储的第一邻域节点列表中是否记录被触发智能照明节点id；S112、若所述第一邻域节点列表中不存在所述被触发智能照明节点id，则将所述被触发智能照明节点id记录至自身的所述第一邻域节点列表；S113、所述第一邻域智能照明节点检查所述触发数据的跳变次数，以判断所述跳变次数是否小于第一邻域通信跳数上限值；S114、若所述跳变次数小于所述第一邻域通信跳数上限值，则将所述第一邻域智能照明节点作为中继节点转发所述触发数据至下一个第一邻域智能照明节点；S115、所述下一个第一邻域智能照明节点返回执行所述第一邻域智能照明节点接收所述触发数据，根据所述触发数据检查自身存储的第一邻域节点列表中是否记录被触发智能照明节点id的步骤，直至所述跳变次数不小于所述第一邻域通信跳数上限值；S116、若所述跳变次数不小于所述第一邻域通信跳数上限值，则将所述第一邻域智能照明节点作为所述中继节点转发所述触发数据至所述第二邻域智能照明节点。在本发明实施例中，第一邻域智能照明节点接收到被触发照明节点广播的触发数据，会检查自身存储的第一邻域节点列表中是否记录该被触发智能照明节点id，如果没有记录，则将该被触发智能照明节点id记录至自身的第一邻域节点列表。同时，所述第一邻域智能照明节点检查该触发数据的跳变次数，将跳变次数与第一邻域通信跳数上限值进行比较，若跳变次数小于第一邻域通信跳数上限值，该第一邻域智能照明节点将作为中继节点，转发该触发数据至下一个第一邻域智能照明节点，下一个第一邻域智能照明节点返回循环执行步骤S111~114，直至所述跳变次数不小于所述第一邻域通信跳数上限值时。而当触发数据的跳变次数不小于第一邻域通信跳数上限值时，第一邻域智能照明节点作为中继节点转发所述触发数据至第二邻域智能照明节点。需要说明的是，在其它实施例中，第一邻域通信上限值还可设置为其它数值。可理解地，当触发数据的跳变次数小于第一邻域通信跳数上限值时，触发数据是在被触发智能照明节点的第一邻域范围内进行转发的，由第一邻域范围内的第一邻域智能照明节点转发给下一个第一邻域智能照明节点；而当触发数据的跳变次数不小于第一邻域通信跳数上限值时，触发数据将由第一邻域节点内最后接收到触发数据的节点作为中继节点转发至第二邻域内的节点。请参阅图5，在一实施例中，例如，在本发明实施例中，所述步骤S110还包括如下步骤S211-S217。S211、所述第二邻域智能照明节点接收所述中继节点转发的所述触发数据，并检查自身存储的第一邻域节点列表是否记录中继节点id；S212、若所述第二邻域智能照明节点的第一邻域节点列表中不存在所述中继节点id，则将所述中继节点id记录至自身的所述第一邻域节点列表；S213、所述第二邻域智能照明节点检查自身存储的被触发节点列表是否记录所述被触发智能照明节点id；S214、若所述被触发节点列表中不存在所述被触发智能照明节点id，则将所述被触发智能照明节点id记录至所述被触发节点列表；S215、所述第二邻域智能照明节点检查所述触发数据的跳变次数，以判断所述跳变次数是否小于所述第二邻域通信跳数上限值；S216、若所述跳变次数小于所述第二邻域通信跳数上限值，则将所述第二邻域智能照明节点作为下一级中继节点转发所述触发数据至下一个第二邻域智能照明节点；S217、所述下一个第二邻域智能照明节点返回执行所述第二邻域智能照明节点接收所述中继节点转发的所述触发数据，并检查自身存储的第一邻域节点列表是否记录中继节点id的步骤，直至所述跳变次数不小于所述第二邻域通信跳数上限值。在本发明实施例中，第二邻域智能照明节点接收到中继节点转发的触发数据，检查自身存储的第一邻域节点列表是否记录中继节点id，如果没有记录，则将中继节点id记录至自身的第一邻域节点列表。需要说明的是，在本实施例中，所述中继节点id即为第一邻域智能照明节点id。此外，第二邻域智能照明节点接收到中继节点转发的该触发数据，还会检查自身存储的被触发节点列表是否记录该被触发智能照明节点id，如果没有记录，则将该被触发智能照明节id记录至自身的被触发节点列表。通过该被触发节点列表记录的被触发智能照明节id可以获得触发数据的来源节点信息。可选地，所述第二邻域智能照明节点接收所述触发数据之后，还包括：所述第二邻域智能照明节点检查所述触发数据的跳变次数，以判断所述跳变次数是否小于所述第二邻域通信跳数上限值；若所述跳变次数小于所述第二邻域通信跳数上限值，所述第二邻域智能照明节点则作为下一级中继节点将所述触发数据继续转发至下一个第二邻域智能照明节点。该下一个第二邻域智能照明节点循环执行上述步骤S211~216，直至所述跳变次数不小于所述第二邻域通信跳数上限值时，则停止转发该触发数据。S120、所述邻域智能照明节点根据所述触发数据生成回应消息以发送至所述被触发智能照明节点。在一实施例中，例如，在本发明实施例中，被触发智能照明节点的第一邻域智能照明节点与第二邻域智能照明节点根据所述触发数据生成回应消息，以将所述回应消息发送至所述被触发智能照明节点。具体地，请参阅图6，步骤S120包括如下步骤S121~S125。S121、所述第一邻域智能照明节点接收到所述触发数据后，生成所述第一回应消息并发送至所述被触发智能照明节点；S122、所述第二邻域智能照明节点接收到所述触发数据后，生成所述第二回应消息并发送至所述第一邻域智能照明节点；S123、所述第一邻域智能照明节点接收到所述第二回应消息后，检查自身存储的第一邻域节点列表是否记录第二邻域智能照明节点id；S124、若所述第一邻域智能照明节点的第一邻域节点列表中不存在所述第二邻域智能照明节点id，所述第一邻域智能照明节点则将所述第二邻域智能照明节点id记录至所述第一邻域节点列表；S125、所述第一邻域智能照明节点接收到所述第二回应消息后，转发所述第二回应消息至所述被触发智能照明节点。在本发明实施例中，邻域智能照明节点接收到触发数据后，会生成回应消息回应触发数据的发送方。具体地，所述回应消息包括第一回应消息和第二回应消息，其中，第一回应消息由第一邻域智能照明节点生成，第二回应消息由第二邻域智能照明节点生成。第二邻域智能照明节点生成的第二回应消息，会发送至第一邻域智能照明节点，以便让第一邻域智能照明节点获知自己是其相邻的智能照明节点。但由于第二邻域智能照明节点是距离被触发智能照明节点较远的节点，需要采用多跳方式回应消息。因此，第一邻域智能照明节点接收到第二回应消息后，需要将该第二回应消息转发至被触发智能照明节点，以便被触发智能照明节点获知第二邻域智能照明节点id。同时，第一邻域智能照明节点检查自身存储的第一邻域节点列表是否记录第二邻域智能照明节点id，如果没有记录，则将第二邻域智能照明节点id记录至自身的第一邻域节点列表。同理，第一邻域智能照明节点接收到触发数据后，会生成第一回应消息发送至被触发智能照明节点，以便让被触发智能照明节点获知其第一邻域智能照明节点信息。可理解地，在本实施例中，生成的回应消息需要发送的对象是根据各智能照明节点自身存储的第一邻域节点列表与第二邻域节点列表中的节点id进行确定的。S130、所述被触发智能照明节点根据所述回应消息更新其存储的第一邻域节点列表、第二邻域节点列表以及邻域主通道节点列表。在本发明实施例中，所述被触发智能照明节点接收到所述第一回应消息后，检查自身存储的第一邻域节点列表是否记录第一邻域智能照明节点id；若所述第一邻域节点列表中不存在所述第一邻域智能照明节点id，则将所述第一邻域智能照明节点id记录至自身的第一邻域节点列表；此外，所述被触发智能照明节点接收到所述第二回应消息后，检查自身存储的第二邻域节点列表是否记录所述第二邻域智能照明节点id；若所述第二邻域节点列表中不存在所述第二邻域智能照明节点id，则将所述第二邻域智能照明节点id记录至自身的第二邻域节点列表。进一步地，在本发明实施例中，被触发智能照明节点通过对比自身与邻域智能照明节点的累计触发次数，以判断自身是否为主通道节点，并将判断结果记录或更新在该被触发智能照明节点的第一邻域节点与第二邻域节点的邻域主通道节点列表中。其中，该被触发智能照明节点是否为主通道节点的判断结果记录为二元组形式：＜被触发智能照明节点id，数值1或0＞，1表示该被触发智能照明节点为主通道节点、0表示该被触发智能照明节点为非主通道节点。可选地，在本实施例中，判断被触发智能照明节点是否为主通道节点的方法为：被触发智能照明节点获取其第一邻域与第二邻域智能照明节点的累计触发次数，并按照数值大小从大到小进行排序从而得到一排序列表；随后分别计算自身累计触发次数与排序列表前50%排序项的平均值的绝对偏差、与排序列表后50%排序项的平均值的绝对偏差，并对二者进行比较，若前者的数值结果更小，说明被触发智能照明节点的触发数据特征更接近累计触发次数较多的节点，因而判断被触发智能照明节点为主通道节点；反之则为非主通道节点。可选地，在本实施例中，将判断结果存储在该被触发智能照明节点的第一邻域、第二邻域节点的邻域主通道节点列表的方法为：被触发智能照明节点从其存储的第一邻域节点列表与第二邻域节点列表中顺次提取各邻域节点作为目标节点，向目标节点发送被触发节点是否为主通道节点的判断结果的消息，目标节点收到该消息后检查该判断结果，如果二元组＜被触发智能照明节点id，数值1或0＞中的数值为1，则将二元组中的被触发智能照明节点id加入该目标节点的邻域主通道节点列表。S140、所述被触发智能照明节点根据自身存储的第一邻域节点列表、第二邻域节点列表以及邻域主通道节点列表和所述触发数据进行自学习，以生成照明群控方案。在本发明实施例中，首先，被触发智能照明节点从其存储的第一邻域节点列表中提取所述第一邻域智能照明节点id，根据所述第一邻域智能照明节点id和所述触发数据生成所述第一邻域智能照明节点的所述照明群控方案。例如，以图2中的被触发节点6为例，节点6的2跳通信范围内的邻域智能照明节点包括节点3、5、7、12、0、2、4、11、16、8，其中通信跳数为1跳的节点3、5、7、12构成节点6的第一邻域智能照明节点列表，剩余节点0、2、4、11、16、8构成节点6的第二邻域节点列表。因此，节点列表中的各节点是节点6被触发时所述照明群控方案控制的相邻智能照明节点。其次，被触发智能照明节点读取其存储的第二邻域节点列表和邻域主通道节点列表，计算这两个列表的交集得到该被触发智能照明节点的预判行进路线上更远范围的照明群控方案。继续以图2中的节点6为例，节点6存储的第二邻域节点列表为，节点6存储的邻域主通道节点列表为，取所述两个列表的交集得到列表，即为节点6被触发时预判行进路线上更远范围需亮灯的节点列表。可选地，如果节点6还存储了邻域主通道节点列表中各节点的最后触发时间，则可判断车辆沿主通道的行进方向，进而优化预判行进路线前方与后方智能照明节点的控制方案。例如，继续以上述节点6举例，节点6被触发时预判行进路线上更远范围需亮灯的节点列表为，如果相比节点11和节点8，节点0的最后触发时间与节点6的最后触发时间更接近，则可判断车辆行驶方向为节点0到节点6，此时预判行进路线上需更远距离亮灯的节点列表可优化为，以实现不影响行车体验的进一步节能。最后，被触发智能照明节点完成自学习，并标记学习状态为已完成。可选地，一种判断节点自学习达到稳态的方法是：判断节点累计触发次数与其包含第一邻域与第二邻域的全部邻域节点的累计触发次数之和的比值是否相对稳定，即该比值是否小于特定阈值，若该比值小于特定阈值，则表明节点学习达到稳态。S150、完成自学习的所述被触发智能照明节点若再次感应到所述运动体，则读取自身存储的所述照明群控方案生成对应的照明控制消息，并将所述照明控制消息发送至所述邻域智能照明节点，以使所述邻域智能照明节点执行与所述照明控制消息对应的群控动作。在本发明实施例中，完成自学习的所述被触发智能照明节点若再次感应到所述运动体，则读取自身存储的所述照明群控方案生成对应的照明控制消息，通过通信模块将所述照明控制消息发送第一邻域智能照明节点和第二邻域智能照明节点，以使第一邻域智能照明节点和第二邻域智能照明节点亮灯和/或灭灯。具体地，首先，执行的群控动作包括执行亮灯控制，其中，亮灯控制参数包括：亮灯目标状态的亮度、色温、颜色、渐变时长以及亮灯状态持续时长等；其次，执行灭灯控制，其中，灭灯控制参数包括：灭灯目标状态的亮度、色温、颜色、渐变时长以及灭灯状态持续时长等。继续以节点6为例，已完成自学习的节点6再次被行驶的车辆触发时，通信跳数为1跳的第一邻域智能照明节点3、5、7、12 瞬时点亮以提供动态伴随式照明，预判行进路线上更远的第二邻域智能照明节点 也同步点亮以提供行车所需的安全照明。此外，如果进一步判断行车方向为从节点0到节点6，则确保节点更长的亮灯保持时长、以及节点0更短的亮灯保持时长。综上所述，本发明实施例提供的自学习照明群控系统及方法，智能照明节点通过自主学习运动体在照明区域通行的触发数据，自适应生成其邻域及预判行进路线上的照明控制方案。本发明实施例提供的自学习照明群控系统无需使用中心控制器、无需人工编制或调试控制逻辑，智能照明节点仅需通电，即可实现跟随运动体移动的伴随式照明、以及行进方向上更远距离的安全照明，在确保动态节能的前提下能更好地保障照明体验与安全。在上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详细描述的部分，可以参见其他实施例的相关描述。显然，本领域的技术人员可以对本发明进行各种改动和变型而不脱离本发明的精神和范围。这样，尚且本发明的这些修改和变型属于本发明权利要求及其等同技术的范围之内，则本发明也意图包含这些改动和变型在内。以上所述，仅为本发明的具体实施方式，但本发明的保护范围并不局限于此，任何熟悉本技术领域的技术人员在本发明揭露的技术范围内，可轻易想到各种等效的修改或替换，这些修改或替换都应涵盖在本发明的保护范围之内。因此，本发明的保护范围应以权利要求的保护范围为准。
