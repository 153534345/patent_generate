标题title
一种血氧饱和度检测方法、装置，电子设备及存储介质
摘要abst
本申请提供一种血氧饱和度检测方法、装置，电子设备及存储介质。该方法包括：获取待检测用户的PPG检测信号；基于形态学滤波算法对所述PPG检测信号进行处理；基于处理后的PPG检测信号，确定所述待检测用户的血氧饱和度。在本申请实施例中，当获取到待检测用户的PPG检测信号后，采用形态学滤波算法对PPG检测信号进行处理。通过形态学滤波算法可以降低信号处理的复杂度，提高信号处理效果，进而提高血氧饱和度检测的准确性。
权利要求书clms
1.一种血氧饱和度检测方法，其特征在于，包括：获取待检测用户的PPG检测信号；基于形态学滤波算法对所述PPG检测信号进行处理；基于处理后的PPG检测信号，确定所述待检测用户的血氧饱和度；其中，所述基于形态学滤波算法对所述PPG检测信号进行处理包括：基于所述形态学滤波算法对所述PPG检测信号进行平滑降噪；基于所述形态学滤波算法对平滑降噪后的PPG检测信号进行基线校准；基于所述形态学滤波算法进行平滑降噪的公式为：；；；其中，表示所述PPG检测信号；为三角型结构元素；为直线型结构元素；表示腐蚀操作；表示膨胀操作；和均为中间值；表示所述平滑降噪后的PPG检测信号。2.根据权利要求1所述的方法，其特征在于，基于所述形态学滤波算法进行基线校准的公式为：；；；其中，表示所述平滑降噪后的PPG检测信号，为直线型结构元素；为开运算；为闭运算；和均为中间值；表示基线校准后的PPG检测信号。3.根据权利要求1所述的方法，其特征在于，所述获取待检测用户的PPG检测信号，包括：获取所述待检测用户在进行PPG检测时预设时长的原始信号；对所述预设时长的原始信号进行有效性验证；当所述预设时长的原始信号为有效信号时，将所述预设时长的原始信号添加至缓冲区；当所述预设时长的原始信号为无效信号时，将所述缓冲区的信号清空；其中，所述缓冲区可存储第一预设容量的信号；当所述缓冲区存储的信号达到第二预设容量时，所述缓冲区内的原始信号为所述PPG检测信号；所述第二预设容量小于所述第一预设容量。4.根据权利要求3所述的方法，其特征在于，所述预设时长的原始信号包括预设时长的第一原始信号和预设时长的第二原始信号，所述预设时长的第一原始信号及所述预设时长的第二原始信号为所述待检测用户通过不同波长的两种光源进行PPG检测生成的；所述有效性验证包括信号振幅验证、信号斜率验证、信号阈值验证及所述预设时长的第一原始信号与所述预设时长的第二原始信号之间的相关性验证的至少一种；所述缓冲区包括第一缓冲区和第二缓冲区；所述第一缓冲区用于存储有效的第一原始信号，所述第二缓冲区用于存储有效的第二原始信号；所述第一缓冲区和所述第二缓冲区存储的为同一时间段所检测到的信号；当所述第一缓冲区存储的信号达到所述第二预设容量，且所述第二缓冲区存储的信号达到所述第二预设容量，所述第一缓冲区内的第一原始信号和所述第二缓冲区内的第二原始信号为所述PPG检测信号。5.根据权利要求4所述的方法，其特征在于，在所述基于形态学滤波算法对所述PPG检测信号进行处理之后，所述方法还包括：对处理后的第一原始信号和处理后的第二原始信号进行相关性验证；确定所述处理后的第一原始信号和所述处理后的第二原始信号为有效信号。6.一种血氧饱和度检测装置，其特征在于，包括：获取模块，用于获取待检测用户的PPG检测信号；滤波模块，用于基于形态学滤波算法对所述PPG检测信号进行处理；确定模块，用于处理后的PPG检测信号，确定所述待检测用户的血氧饱和度；其中，所述滤波模块具体用于基于所述形态学滤波算法对所述PPG检测信号进行平滑降噪；基于所述形态学滤波算法对平滑降噪后的PPG检测信号进行基线校准；基于所述形态学滤波算法进行平滑降噪的公式为：；；；其中，表示所述PPG检测信号；为三角型结构元素；为直线型结构元素；表示腐蚀操作；表示膨胀操作；和均为中间值；表示所述平滑降噪后的PPG检测信号。7.一种电子设备，其特征在于，包括：处理器和存储器，所述处理器和所述存储器连接；所述存储器用于存储程序；所述处理器用于运行存储在所述存储器中的程序，执行如权利要求1-5中任一项所述的方法。8.一种计算机可读存储介质，其特征在于，其上存储有计算机程序，所述计算机程序在被计算机运行时执行如权利要求1-5中任一项所述的方法。
说明书desc
技术领域本申请涉及数据处理技术领域，具体而言，涉及一种血氧饱和度检测方法、装置，电子设备及存储介质。背景技术血氧饱和度是指血液中氧合血红蛋白占所有可结合血红蛋白的百分比。血氧饱和度可采用PPG技术得到。PPG技术是一种检测活体组织中血液容积变化的无创方法，它使用一定波长的光线照射入血液，再通过光敏传感器将血液反射或者透射出的光线转换为电信号，通过分析电信号的变化来分析血液容积的变化。在获取到PPG检测信号后，需要对该信号进行降噪和/或基线漂移等处理，在处理后，即可通过朗博-比尔定律等计算方式得到活体的血氧饱和度。现有技术中，在对PPG信号进行处理时，通常采用均值滤波、高斯滤波、巴特沃兹带通滤波等方式，此类方式的实现相对复杂，计算量大，且对于降噪、基线漂移等处理效果较差，影响血氧饱和度检测的准确性。发明内容本申请实施例的目的在于提供一种血氧饱和度检测方法、装置，电子设备及存储介质，以降低计算的复杂度，提高信号处理效果，进而提高血氧饱和度检测的准确性。本发明是这样实现的：第一方面，本申请实施例提供一种血氧饱和度检测方法，包括：获取待检测用户的PPG检测信号；基于形态学滤波算法对所述PPG检测信号进行处理；基于处理后的PPG检测信号，确定所述待检测用户的血氧饱和度；其中，所述基于形态学滤波算法对所述PPG检测信号进行处理包括：基于所述形态学滤波算法对所述PPG检测信号进行平滑降噪；基于所述形态学滤波算法对平滑降噪后的PPG检测信号进行基线校准；基于所述形态学滤波算法进行平滑降噪的公式为：；；；其中，表示所述PPG检测信号；为三角型结构元素；为直线型结构元素；表示腐蚀操作；表示膨胀操作；和均为中间值；表示所述平滑降噪后的PPG检测信号。在本申请实施例中，当获取到待检测用户的PPG检测信号后，采用形态学滤波算法对PPG检测信号进行处理。具体的，采用形态学滤波算法对所述PPG检测信号进行平滑降噪，相比于均值滤波、高斯滤波、带通滤波等方法计算更简单。采用形态学滤波算法对PPG检测信号再进行基线校准，相比于采用巴特沃兹带通滤波校正基线漂移，形态学滤波的方法能够大大降低计算的复杂度。且巴特沃兹带通滤波需要仔细选择滤波的截止频率，才能对基线进行有效校正，而形态学滤波只需要选择直线型结构性元素，结构元素长度在信号周期误差±20个采样点以内的范围都可以较好地进行基线校准，相比于巴特沃兹带通滤波，形态学滤波算法对参数更加不敏感，可以适用于更多的人群和场景。可见，通过形态学滤波算法可以降低信号处理的复杂度，提高信号处理效果，进而提高血氧饱和度检测的准确性。结合上述第一方面提供的技术方案，在一些可能的实现方式中，基于所述形态学滤波算法进行基线校准的公式为：；；；其中，表示所述平滑降噪后的PPG检测信号，为直线型结构元素；为开运算；为闭运算；和均为中间值；表示基线校准后的PPG检测信号。结合上述第一方面提供的技术方案，在一些可能的实现方式中，所述获取待检测用户的PPG检测信号，包括：获取所述待检测用户在进行PPG检测时预设时长的原始信号；对所述预设时长的原始信号进行有效性验证；当所述预设时长的原始信号为有效信号时，将所述预设时长的原始信号添加至缓冲区；当所述预设时长的原始信号为无效信号时，将所述缓冲区的信号清空；其中，所述缓冲区可存储第一预设容量的信号；当所述缓冲区存储的信号达到第二预设容量时，所述缓冲区内的原始信号为所述PPG检测信号；所述第二预设容量小于所述第一预设容量。在本申请实施例中，设定可存储第一预设容量的信号的缓冲区可以控制内存的占用，且每次验证预设时长的原始信号，可以起到实时验证的效果。此外，每次验证预设时长的原始信号，可以起到更加精细化的验证，进而提高验证的准确性。结合上述第一方面提供的技术方案，在一些可能的实现方式中，所述预设时长的原始信号包括预设时长的第一原始信号和预设时长的第二原始信号，所述预设时长的第一原始信号及所述预设时长的第二原始信号为所述待检测用户通过不同波长的两种光源进行PPG检测生成的；所述有效性验证包括信号振幅验证、信号斜率验证、信号阈值验证及所述预设时长的第一原始信号与所述预设时长的第二原始信号之间的相关性验证的至少一种；所述缓冲区包括第一缓冲区和第二缓冲区；所述第一缓冲区用于存储有效的第一原始信号，所述第二缓冲区用于存储有效的第二原始信号；所述第一缓冲区和所述第二缓冲区存储的为同一时间段所检测到的信号；当所述第一缓冲区存储的信号达到所述第二预设容量，且所述第二缓冲区存储的信号达到所述第二预设容量，所述第一缓冲区内的第一原始信号和所述第二缓冲区内的第二原始信号为所述PPG检测信号。在本申请实施例中，使用振幅、阈值、斜率、相关性四种方式中的任意一种或多种进行有效性检验，可以实现对稳态噪声、脉冲噪声，带有较大噪声的信号、带有较小噪声的信号进行有效地检测。结合上述第一方面提供的技术方案，在一些可能的实现方式中，在所述基于形态学滤波算法对所述PPG检测信号进行处理之后，所述方法还包括：对处理后的第一原始信号和处理后的第二原始信号进行相关性验证；确定所述处理后的第一原始信号和所述处理后的第二原始信号为有效信号。在本申请实施例中，在对PPG检测信号进行处理之后，还会对整个缓冲区的信号做进一步地相关性验证，进而判断整体数据是否存在异常变化趋势，通过该方式可以进一步过滤无效数据，进而提高后续血氧饱和度检测地准确度。第二方面，本申请实施例提供一种血氧饱和度检测装置，包括：获取模块，用于获取待检测用户的PPG检测信号；滤波模块，用于基于形态学滤波算法对所述PPG检测信号进行处理；确定模块，用于处理后的PPG检测信号，确定所述待检测用户的血氧饱和度；其中，所述滤波模块具体用于基于所述形态学滤波算法对所述PPG检测信号进行平滑降噪；基于所述形态学滤波算法对平滑降噪后的PPG检测信号进行基线校准；基于所述形态学滤波算法进行平滑降噪的公式为：；；；其中，表示所述PPG检测信号；为三角型结构元素；为直线型结构元素；表示腐蚀操作；表示膨胀操作；和均为中间值；表示所述平滑降噪后的PPG检测信号。第三方面，本申请实施例提供一种电子设备，包括：处理器和存储器，所述处理器和所述存储器连接；所述存储器用于存储程序；所述处理器用于调用存储在所述存储器中的程序，执行如上述第一方面实施例和/或结合上述第一方面实施例的一些可能的实现方式提供的方法。第四方面，本申请实施例提供一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序在被处理器运行时执行如上述第一方面实施例和/或结合上述第一方面实施例的一些可能的实现方式提供的方法。附图说明为了更清楚地说明本申请实施例的技术方案，下面将对本申请实施例中所需要使用的附图作简单地介绍，应当理解，以下附图仅示出了本申请的某些实施例，因此不应被看作是对范围的限定，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他相关的附图。图1为本申请实施例提供的一种电子设备的模块框图。图2为本申请实施例提供的一种血氧饱和度检测方法的步骤流程图。图3为本申请实施例提供的另一种血氧饱和度检测方法的步骤流程图。图4为本申请实施例提供的一种血氧饱和度检测装置的模块框图。图标：100-电子设备；110-处理器；120-存储器；200-血氧饱和度检测装置；210-获取模块；220-滤波模块；230-确定模块。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行描述。请参阅图1，本申请实施例提供的一种应用血氧饱和度检测方法及装置的电子设备100的示意性结构框图。本申请实施例中，电子设备100可以是终端或者服务器，终端可以是，但不限于个人计算机、智能手机、平板电脑、个人数字助理、移动上网设备等。服务器可以是但不限于网络服务器、数据库服务器、云服务器或由多个子服务器构成的服务器集成等。当然，上述列举的设备仅用于便于理解本申请实施例，其不应作为对本实施例的限定。在结构上，电子设备100可以包括处理器110和存储器120。处理器110与存储器120直接或间接地电性连接，以实现数据的传输或交互，例如，这些元件相互之间可通过一条或多条通讯总线或信号线实现电性连接。血氧饱和度检测装置包括至少一个可以软件或固件的形式存储在存储器120中或固化在电子设备100的操作系统中的软件模块。处理器110用于执行存储器120中存储的可执行模块，例如，血氧饱和度检测装置所包括的软件功能模块及计算机程序等，以实现血氧饱和度检测方法。处理器110可以在接收到执行指令后，执行计算机程序。其中，处理器110可以是一种集成电路芯片，具有信号处理能力。处理器110也可以是通用处理器，例如，可以是中央处理器、数字信号处理器、专用集成电路、分立门或晶体管逻辑器件、分立硬件组件，可以实现或者执行本申请实施例中的公开的各方法、步骤及逻辑框图。此外，通用处理器可以是微处理器或者任何常规处理器等。存储器120可以是，但不限于，随机存取存储器、只读存储器、可编程只读存储器、可擦可编程序只读存储器，以及电可擦编程只读存储器、光介质、或者半导体介质等。在本申请所提供的实施例中，应该理解到，所揭露装置和方法，可以通过其它的方式实现。以上所描述的装置实施例仅仅是示意性的，例如，所述单元的划分，仅仅为一种逻辑功能划分，实际实现时可以有另外的划分方式，又例如，多个单元或组件可以结合或者可以集成到另一个系统，或一些特征可以忽略，或不执行。另一点，所显示或讨论的相互之间的耦合或直接耦合或通信连接可以是通过一些通信接口，装置或单元的间接耦合或通信连接，可以是电性，机械或其它的形式。另外，作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部单元来实现本实施例方案的目的。再者，在本申请各个实施例中的各功能模块可以集成在一起形成一个独立的部分，也可以是各个模块单独存在，也可以两个或两个以上模块集成形成一个独立的部分。在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。以上所述仅为本申请的实施例而已，并不用于限制本申请的保护范围，对于本领域的技术人员来说，本申请可以有各种更改和变化。凡在本申请的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。
