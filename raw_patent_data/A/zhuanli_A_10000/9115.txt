标题title
具备力感知反馈调节的机械臂控制方法和控制终端
摘要abst
本申请涉及一种具备力感知反馈调节的机械臂控制方法和控制终端以及一种智能人体经络调理设备，通过获取机械臂的实时状态数据并将所述实时状态数据与预设数据进行对比判断，输出对比判断结果；根据所述对比判断结果执行运动指令；达到了通过实时监控机械臂末端的实时状态数据，包括监控机械臂末端施加力的大小和机械臂末端的位置，来判断机械臂末端对人体体表施加的力大小，避免了机械臂对人体造成安全隐患的发生。
权利要求书clms
1.一种具备力感知反馈的调节控制方法，其特征在于，用于调节机器人机器臂的运动，包括如下步骤：S1、获取机械臂的实时状态数据；S2、接收所述实时状态数据，并将所述实时状态数据与预设数据进行对比判断，输出对比判断结果；S3、根据所述对比判断结果执行运动指令。2.根据权利要求1所述的一种具备力感知反馈的调节控制方法，其特征在于，步骤S1中，在获取机械臂的实时状态数据之后，还包括：对所述实时状态数据进行解析，获得实时状态解析数据；接收并发送所述实时状态解析数据。3.根据权利要求1所述的一种具备力感知反馈的调节控制方法，其特征在于，所述获取机械臂的实时状态数据，包括：获取实时的机械臂的力状态数据；对所述力状态数据进行解析，获得实时力状态解析数据。4.根据权利要求3所述的一种具备力感知反馈的调节控制方法，其特征在于，所述获取实时的机械臂的力状态数据，包括：获取在世界坐标中的力的大小数据，包括，其中：fx为机械臂末端在世界坐标系X方向力的大小；fy为机械臂末端在世界坐标系Y方向力的大小；fz为机械臂末端在世界坐标系Z方向力的大小。5.根据权利要求4所述的一种具备力感知反馈的调节控制方法，其特征在于，所述获取实时的机械臂的力状态数据，还包括：获取在世界坐标中的扭矩数据，包括，其中：Mx为机械臂末端在世界坐标系X方向扭矩的大小；My为机械臂末端在世界坐标系Y方向扭矩的大小；Mz为机械臂末端在世界坐标系Z方向扭矩的大小。6.根据权利要求3所述的一种具备力感知反馈的调节控制方法，其特征在于，所述获取机械臂的实时状态数据，还包括：获取实时的机械臂末端相对于人体体表的体表位置数据；对所述体表位置数据进行解析，获得实时体表位置解析数据。7.根据权利要求6所述的一种具备力感知反馈的调节控制方法，其特征在于，还包括：预设第一力状态数据和第一运动指令；将所述实时力状态解析数据与预设的所述第一力状态数据进行对比判断：若所述实时力状态解析数据中的力大小值超过预设的所述第一力状态数据，则控制机械臂执行所述第一运动指令。8.根据权利要求6所述的一种具备力感知反馈的调节控制方法，其特征在于，还包括：预设第二力状态数据和第二运动指令；将所述实时力状态解析数据与预设的所述第二力状态数据进行对比判断：若所述实时力状态解析数据中的力大小值不超过预设的所述第二力状态数据，则控制机械臂执行所述第二运动指令。9.一种控制终端，其特征在于，包括：处理器；用于存储处理器可执行指令的存储器；其中，所述处理器被配置为执行所述可执行指令时实现权利要求1至8中任意一项所述的方法。10.一种智能人体经络调理设备，其特征在于，包括机械臂和权利要求书9所述的控制终端，所述控制终端与所述机械臂的控制器电性连接。
说明书desc
技术领域本公开涉及理疗设备领域，尤其涉及一种具备力感知反馈调节的机械臂控制方法和控制终端。背景技术智能人体经络调理设备是依据中医经络疏通、调节原理，通过前沿人工智能技术、机器人技术、再结合精密伺服控制技术和多物理场能量刺激技术，集成实现的可代替人工手法的智能化设备。在使用智能人体经络调理设备进行调理时，是用机械臂带动调理设备对人体进行治疗。其中，在机械臂带动调理设备工作时，机械臂会对人体施加一定的作用力，由于人体体表轮廓复杂，人体的不同肌肉部位的柔软度不同，比如腹部和背部，使得调理设备施加在体表的力的变化很大，这就导致患者会出现身体不适，疼痛，更有甚者会出现伤害患者身体的情况。现有技术中，智能人体经络调理设备的机械臂没有对人体施加的力的检测反馈，使得机械臂会对人体产生伤害，这就在理疗时对人体的安全造成了安全隐患。发明内容有鉴于此，本公开提出了一种具备力感知反馈调节的机械臂控制方法和控制终端以及一种智能人体经络调理设备，旨在实时监控机械臂末端的施加力的大小和机械臂末端的位置，及时保护人体体表不被机械臂对人体造成疼痛和伤害。根据本公开的一方面，提供了一种具备力感知反馈的调节控制方法，用于调节机器人机器臂的运动，包括如下步骤：S1、获取机械臂的实时状态数据；S2、接收所述实时状态数据，并将所述实时状态数据与预设数据进行对比判断，输出对比判断结果；S3、根据所述对比判断结果执行运动指令。在一种可能的实现方式中，步骤S1中，在获取机械臂的实时状态数据之后，还包括：对所述实时状态数据进行解析，获得实时状态解析数据；接收并发送所述实时状态解析数据。在一种可能的实现方式中，所述获取机械臂的实时状态数据，包括：获取实时的机械臂的力状态数据；对所述力状态数据进行解析，获得实时力状态解析数据。在一种可能的实现方式中，所述获取实时的机械臂的力状态数据，包括：获取在世界坐标中的力的大小数据，包括，其中：fx为机械臂末端在世界坐标系X方向力的大小；fy为机械臂末端在世界坐标系Y方向力的大小；fz为机械臂末端在世界坐标系Z方向力的大小。在一种可能的实现方式中，所述获取实时的机械臂的力状态数据，还包括：获取在世界坐标中的扭矩数据，包括，其中：Mx为机械臂末端在世界坐标系X方向扭矩的大小；My为机械臂末端在世界坐标系Y方向扭矩的大小；Mz为机械臂末端在世界坐标系Z方向扭矩的大小。在一种可能的实现方式中，所述获取机械臂的实时状态数据，还包括：获取实时的机械臂末端相对于人体体表的体表位置数据；对所述体表位置数据进行解析，获得实时体表位置解析数据。在一种可能的实现方式中，还包括：预设第一力状态数据和第一运动指令；将所述实时力状态解析数据与预设的所述第一力状态数据进行对比判断：若所述实时力状态解析数据中的力大小值超过预设的所述第一力状态数据，则控制机械臂执行所述第一运动指令。在一种可能的实现方式中，还包括：预设第二力状态数据和第二运动指令；将所述实时力状态解析数据与预设的所述第二力状态数据进行对比判断：若所述实时力状态解析数据中的力大小值不超过预设的所述第二力状态数据，则控制机械臂执行所述第二运动指令。根据本公开的另一方面，提供了一种控制终端，包括：处理器；用于存储处理器可执行指令的存储器；其中，所述处理器被配置为执行所述可执行指令时实现所述的具备力感知反馈调节的机械臂控制方法。根据本公开的另一方面，还提供了一种智能人体经络调理设备，包括机械臂和所述的控制终端，所述控制终端与所述机械臂的控制器电性连接。本申请通过获取机械臂的实时状态数据并将所述实时状态数据与预设数据进行对比判断，输出对比判断结果；根据所述对比判断结果执行运动指令；达到了通过实时监控机械臂末端的实时状态数据，包括监控机械臂末端施加力的大小和机械臂末端的位置，来判断机械臂末端的状态，避免了机械臂对人体造成安全隐患的发生。根据下面参考附图对示例性实施例的详细说明，本公开的其它特征及方面将变得清楚。附图说明包含在说明书中并且构成说明书的一部分的附图与说明书一起示出了本公开的示例性实施例、特征和方面，并且用于解释本公开的原理。图1示出为本发明具备力感知反馈的调节控制方法的实施流程示意图；图2示出为本发明控制终端的组成示意图；图3示出为本发明智能人体经络调理设备的结构示意图；附图标记列表：1、机械臂，2、AI视觉系统，3、振动调理头，4、浮动调理床；具体实施方式以下将参考附图详细说明本公开的各种示例性实施例、特征和方面。附图中相同的附图标记表示功能相同或相似的元件。尽管在附图中示出了实施例的各种方面，但是除非特别指出，不必按比例绘制附图。在这里专用的词“示例性”意为“用作例子、实施例或说明性”。这里作为“示例性”所说明的任何实施例不必解释为优于或好于其它实施例。另外，为了更好的说明本公开，在下文的具体实施方式中给出了众多的具体细节。本领域技术人员应当理解，没有某些具体细节，本公开同样可以实施。在一些实例中，对于本领域技术人员熟知的方法、手段、元件和电路未作详细描述，以便于凸显本公开的主旨。实施例1如图1所示，本实施例提供一种具备力感知反馈的调节控制方法，用于调节机器人机器臂的运动，包括如下步骤：S1、获取机械臂的实时状态数据；本申请通过实时监控机械臂末端的实时状态数据，包括监控机械臂末端施加力的大小和机械臂末端的位置，来判断机械臂末端的状态，避免了机械臂对人体造成安全隐患的发生；因此，首先需要获取机械臂的实时状态数据，其中，实时状态数据包括机械臂末端的施加力的大小和机械臂末端的位置。具体实施时，通过控制终端连接机械臂即可获取实时数据，在一可实施方式中，可以通过上位机PC，建立与机械臂控制器的TCP/IP链接；通过机械臂TCP/IP端口，可以实时获取机械臂的状态数据，来获取检测到的机械臂当前的力的大小以及机械臂末端相对于人体体表的位置；其中，力的大小可以通过安装在机械臂上的力检测设备比如力传感器进行检测；位置数据可以通过点云传感器获取机械臂末端在人体的位置，可以判断所经过的人体的部位，通过此部位可以判断所经过的人体的柔软度。S2、接收所述实时状态数据，并将所述实时状态数据与预设数据进行对比判断，输出对比判断结果；本技术通过在获得实时状态数据后，结合位置数据以及力大小数据，实时跟预设位置点的数据值进行比对，输出对比判断结果；S3、根据所述对比判断结果执行运动指令。根据输出对比判断结果，判断机械臂末端经过的人体部位，接触硬度是否超过或者低于预设值，符合预设条件，即可执行程序控制机械臂作出避让动作。需要说明的是，尽管以TCP/IP端口作为示例介绍了如上通信方式，但本领域技术人员能够理解，本公开应不限于此。事实上，用户完全可根据个人喜好和/或实际应用场景灵活设定通信方式如总线，只要可以接收来自机械臂控制器的数据即可。这样，通过获取机械臂的实时状态数据并将所述实时状态数据与预设数据进行对比判断，输出对比判断结果；根据所述对比判断结果执行运动指令；达到了通过实时监控机械臂末端的实时状态数据，包括监控机械臂末端施加力的大小和机械臂末端的位置，来判断机械臂末端的状态，避免了机械臂对人体造成安全隐患的发生。本发明技术包括监控机械臂末端施加力的大小和机械臂末端的位置，因此，在一种可能的实现方式中，步骤S1中，在获取机械臂的实时状态数据之后，还包括：对所述实时状态数据进行解析，获得实时状态解析数据；接收并发送所述实时状态解析数据。获取机械臂的实时状态数据后，为了便于直观数据和分析统计，需要对数据解析，获得解析数据，便于后期进行数据分析。数据解析的技术可以由用户选择，在此不做限制。在一种可能的实现方式中，所述获取机械臂的实时状态数据，包括：获取实时的机械臂的力状态数据；对所述力状态数据进行解析，获得实时力状态解析数据。力状态数据的获取，包括获取机械臂末端在各个方向的力大小，以及在各个方向的扭矩大小，在各个方向的力大小以及在各个方向的扭矩大小的获取，具体见如下详述，在一种可能的实现方式中，所述获取实时的机械臂的力状态数据，包括：获取在世界坐标中的力的大小数据，包括，其中：fx为机械臂末端在世界坐标系X方向力的大小；fy为机械臂末端在世界坐标系Y方向力的大小；fz为机械臂末端在世界坐标系Z方向力的大小。在一种可能的实现方式中，所述获取实时的机械臂的力状态数据，还包括：获取在世界坐标中的扭矩数据，包括，其中：Mx为机械臂末端在世界坐标系X方向扭矩的大小；My为机械臂末端在世界坐标系Y方向扭矩的大小；Mz为机械臂末端在世界坐标系Z方向扭矩的大小。其中，以及皆可以合成计算对应的大小值。当检测获取到实时的力的大小后，通过检测的实时的力判断机械臂施加的力是否过大，如果过大，说明机械臂对人体体表的力过大，超过了预设的数据值，这时可以通过改变机械臂的行走轨迹避开骨骼的位置，走到下一个治疗位置；以及，可以通过TCP/IP的控制命令，来控制机械臂的位置、轨迹和所施加的力的大小。本技术通过实时监控机械臂末端的施加力的大小，来监测机械臂施加给人体体表的力，相对于传统实时获取的患者人体的3D模型来进行理疗，本技术可以控制机械臂对人体施加的作用里的大小，从而达到对人体的保护。实施例2在实施例1的基础上，本实施例结合了实时的力状态数据以及实时的机械臂末端相对于人体体表的体表位置数据，结合机械臂末端在人体体表的相对位置，来调节力的大小，以此改变机械臂的运动轨迹。结合实施例1提出的获取实时的机械臂的力状态数据：首先，对所述力状态数据进行解析，获得实时力状态解析数据。力状态数据的获取，包括获取机械臂末端在各个方向的力大小，以及在各个方向的扭矩大小，在各个方向的力大小以及在各个方向的扭矩大小的获取，具体见如下详述，在一种可能的实现方式中，所述获取实时的机械臂的力状态数据，包括：获取在世界坐标中的力的大小数据，包括，其中：fx为机械臂末端在世界坐标系X方向力的大小；fy为机械臂末端在世界坐标系Y方向力的大小；fz为机械臂末端在世界坐标系Z方向力的大小。在一种可能的实现方式中，所述获取实时的机械臂的力状态数据，还包括：获取在世界坐标中的扭矩数据，包括，其中：Mx为机械臂末端在世界坐标系X方向扭矩的大小；My为机械臂末端在世界坐标系Y方向扭矩的大小；Mz为机械臂末端在世界坐标系Z方向扭矩的大小。其次，获取机械臂的实时状态数据，包括：获取实时的机械臂末端相对于人体体表的体表位置数据；对所述体表位置数据进行解析，获得实时体表位置解析数据。同理，获取机械臂的实时的机械臂末端相对于人体体表的体表位置数据后，为了便于直观数据和分析统计，需要对数据解析，获得解析数据，便于后期进行数据分析。数据解析的技术可以由用户选择，在此不做限制。其中，实时的机械臂末端相对于人体体表的体表位置数据可以通过点云传感器获取机械臂末端在人体的位置，以此获得实时的机械臂末端相对于人体体表的体表位置数据；通过实时的机械臂末端相对于人体体表的体表位置数据，可以判断所经过的人体的部位，通过此部位可以判断所经过的人体的柔软度；同时，根据监测到的实时的机械臂的力状态数据，可以判断机械臂对此位置施加的力是否满足预设值，通过对比判断结果，控制执行指令而改变机械臂的运动轨迹即可。在一种可能的实现方式中，还包括：预设第一力状态数据和第一运动指令；将所述实时力状态解析数据与预设的所述第一力状态数据进行对比判断：若所述实时力状态解析数据中的力大小值超过预设的所述第一力状态数据，则控制机械臂执行所述第一运动指令。其中，“超过”表明包括数值本身。如：以人体体表较硬的背部为例：如果机械臂末端经过人体骨骼，机械臂末端接触的硬度较大的地方，可以通过检测实时的力即第一力状态数据，判断机械臂施加的力是否过大，即将检测到的力的所述实时状态数据与预设的力数值进行对比判断，输出对比判断结果；如果对比判断结果表明力过大，说明机械臂碰撞到骨骼，这时可以通过执行对应的调节指令即第一运动指令，而改变机械臂的行走轨迹，以此避开骨骼的位置，走到下一个治疗位置；因此，运动指令要包含调节指令，便于机械臂根据对比判断结果执行调节指令。第一运动指令的执行在于实现改变机械臂的行走轨迹而避开骨骼的位置，走到下一个治疗位置。除了上述人体体表比较硬的部位，还有一些较软的部位。在一种可能的实现方式中，还包括：预设第二力状态数据和第二运动指令；将所述实时力状态解析数据与预设的所述第二力状态数据进行对比判断：若所述实时力状态解析数据中的力大小值不超过预设的所述第二力状态数据，则控制机械臂执行所述第二运动指令。其中，“不超过”表明不包括数值本身。以人体体表较软的腹部举例：如果机械臂末端经过人体比较柔软的位置，比如腹部，此时检测此处的力大小，将其与第二力状态数据进行对比，若是所述实时力状态解析数据中的力大小值不超过预设的所述第二力状态数据，即表明机械臂所处的位置位于人体比较柔软的腹部位置，此时需要控制机械臂执行所述第二运动指令，改变机械臂的运动轨迹。实施时，可以设定机械臂施加的力度很小，这样可以保护人体柔软的部位，同时检测机械臂末端的位置信息，看机械臂是否凹陷到人体柔软的部位中，如果凹陷到人体柔软的部位中，此时执行第二运动指令，即控制机械臂的轨迹从柔软的部位向上抽离出来，走到下一治疗位置。本实施例通过实时监控机械臂末端的施加力的大小和机械臂末端的位置，相对于仅仅获取的患者人体的3D模型的传统技术，本实施例可以控制机械臂对人体施加的作用里的大小，以及控制机械臂作用于人体的轨迹，从而达到对人体的保护。实施例3本实施例，提供一种控制终端，用于和智能人体经络调理设备的机械臂控制系统进行连接而通信，便于远程控制机械臂的动作。控制终端与机械臂控制器的TCP/IP端口连接，通过TCP/IP的链接，获取实时的机械臂力状态数据以及机械臂末端在人体的位置数据。更进一步地，根据本公开的另一方面，提供了一种控制终端，包括：处理器；用于存储处理器可执行指令的存储器；其中，所述处理器被配置为执行所述可执行指令时实现所述的具备力感知反馈调节的机械臂控制方法方法。参阅图2，本公开实施例控制终端包括处理器以及用于存储处理器可执行指令的存储器。其中，处理器被配置为执行可执行指令时实现前面所述的具备力感知反馈调节的机械臂控制方法。此处，应当指出的是，处理器的个数可以为一个或多个。同时，在本公开实施例的控制终端中，还可以包括输入装置和输出装置。其中，处理器、存储器、输入装置和输出装置之间可以通过总线连接，也可以通过其他方式连接，此处不进行具体限定。存储器作为一种计算机可读存储介质，可用于存储软件程序、计算机可执行程序和各种模块，如：本公开实施例的具备力感知反馈调节的机械臂控制方法所对应的程序或模块。处理器通过运行存储在存储器中的软件程序或模块，从而执行控制终端的各种功能应用及数据处理。输入装置可用于接收输入的数字或信号。其中，信号可以为产生与设备/终端/服务器的用户设置以及功能控制有关的键信号。输出装置可以包括显示屏等显示设备。需要说明的是，尽管以TCP/IP端口作为示例介绍了如上通信方式，但本领域技术人员能够理解，本公开应不限于此。事实上，用户完全可根据个人喜好和/或实际应用场景灵活设定通信方式如总线，只要可以接收来自机械臂控制器的数据即可。实施例4更进一步地，根据本公开的另一方面，还提供了一种智能人体经络调理设备，包括机械臂1和所述的控制终端，所述控制终端与所述机械臂1的控制器电性连接。如图3所示，本实施例提供的智能人体经络调理设备，包括机械臂1和所述的控制终端，机械臂1和控制终端按照实施例1-3所述的方案进行控制、执行。本实施例的智能人体经络调理设备，除了一对机械臂1，还包括AI视觉系统2、振动调理头3和浮动调理床4组成，AI视觉系统2用于识别经络、振动调理头3用于振动击打经络穴位点等，浮动调理床4用于患者躺下，可以调节空间位置。使用过程如下：患者做中医设备调理时，仰卧或俯卧在浮动调理床4上；由四个摄像头组成的AI视觉系统2快速识别出人体正面或背面的经络路径，并经过插值规划后传递给机械臂1，本技术的机械臂1为双臂机器人；再由双臂机器人携带振动调理头3循经精准运行；达到疏通经络、激活人体机能、调控人体之功能。以上已经描述了本公开的各实施例，上述说明是示例性的，并非穷尽性的，并且也不限于所披露的各实施例。在不偏离所说明的各实施例的范围和精神的情况下，对于本技术领域的普通技术人员来说许多修改和变更都是显而易见的。本文中所用术语的选择，旨在最好地解释各实施例的原理、实际应用或对市场中的技术的技术改进，或者使本技术领域的其它普通技术人员能理解本文披露的各实施例。
