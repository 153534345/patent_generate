标题title
资源分配方法及资源分配装置、终端设备
摘要abst
本发明公开了一种资源分配方法及资源分配装置、终端设备，该方法包括：响应于接收到终端设备发送的游戏运行请求，获取其中携带的用户标识和游戏标识；向所述终端设备发送用于测试终端设备性能的测试数据，并接收所述终端设备根据所述测试数据返回的测试结果；根据所述游戏标识和所述测试结果分配运行所述游戏标识对应的游戏所需的资源。避免了为云游戏分配的资源过多但终端性能不足而导致的资源浪费且终端设备无法正常显示云游戏画面的问题。
权利要求书clms
1.一种资源分配方法，其特征在于，所述方法包括：响应于接收到终端设备发送的游戏运行请求，获取其中携带的用户标识和游戏标识；向所述终端设备发送用于测试终端设备性能的测试数据，并接收所述终端设备根据所述测试数据返回的测试结果；根据所述游戏标识和所述测试结果分配运行所述游戏标识对应的游戏所需的资源。2.根据权利要求1所述的方法，其特征在于，在所述获取其中携带的用户标识和游戏标识之后、所述向所述终端设备发送用于测试终端设备性能的测试数据之前，所述方法还包括：根据所述用户标识验证所述终端设备对应的用户的身份，在验证通过的情况下，向所述终端设备发送用于测试终端设备性能的测试数据。3.根据权利要求1所述的方法，其特征在于，所述测试结果包括以下任一或其组合：存储空间参数、内存配置参数、屏显分辨率参数、图形处理器GPU性能参数。4.一种资源分配方法，其特征在于，所述方法包括：向资源分配装置发送携带用户标识和游戏标识的游戏运行请求，并接收所述资源分配装置发送的测试数据；根据所述测试数据确定测试结果，并将所述测试结果发送至所述资源分配装置，以使所述资源分配装置根据所述游戏标识和所述测试结果分配运行所述游戏标识对应的游戏所需的资源。5.根据权利要求4所述的方法，其特征在于，所述测试数据包括测试应用安装包，所述根据所述测试数据确定测试结果，包括：根据所述测试数据安装测试应用，并运行所述测试应用得到测试结果；在所述根据所述测试数据确定测试结果之后，所述方法还包括：卸载所述测试应用。6.一种资源分配装置，其特征在于，所述装置包括：接收模块，用于接收终端设备发送的游戏运行请求；以及用于接收所述终端设备根据测试数据返回的测试结果；获取模块，用于响应于所述接收模块接收到终端设备发送的游戏运行请求，获取其中携带的用户标识和游戏标识；发送模块，用于向所述终端设备发送用于测试终端设备性能的所述测试数据；分配模块，用于根据所述游戏标识和所述测试结果分配运行所述游戏标识对应的游戏所需的资源。7.根据权利要求6所述的装置，其特征在于，所述装置还包括验证模块，所述验证模块用于根据所述用户标识验证所述终端设备对应的用户的身份。8.根据权利要求7所述的装置，其特征在于，所述测试结果包括以下任一或其组合：存储空间参数、内存配置参数、屏显分辨率参数、图形处理器GPU性能参数。9.一种终端设备，其特征在于，所述终端设备包括：发送模块，用于向资源分配装置发送携带用户标识和游戏标识的游戏运行请求；以及用于将测试结果发送至所述资源分配装置，以使所述资源分配装置根据所述游戏标识和所述测试结果分配运行所述游戏标识对应的游戏所需的资源；接收模块，用于接收所述资源分配装置发送的测试数据；处理模块，用于根据所述测试数据确定所述测试结果。10.根据权利要求9所述的终端设备，其特征在于，所述测试数据包括测试应用安装包，所述处理模块用于根据所述测试数据安装测试应用，并运行所述测试应用得到测试结果，以及用于卸载所述测试应用。
说明书desc
技术领域本发明涉及云游戏技术领域，具体涉及一种资源分配方法及资源分配装置、终端设备。背景技术在云游戏场景下，游戏运营商将云游戏运行在服务器端，由服务器将游戏场景渲染为视频音频流，并将渲染完毕后的游戏画面压缩后通过网络传送给用户。用户使用的终端无需拥有强大的图形运算与数据处理能力，仅需拥有基本的流媒体播放能力与获取玩家输入指令并发送给服务器的能力即可。目前，为了解决云游戏的时延问题，已将云游戏的内容处理下沉至边缘服务器进行处理。而边缘服务器仅根据用户选择的云游戏种类分配相应的云游戏在服务器上渲染所需要的资源，并不考虑用户所使用的终端设备的实际情况。但由于终端设备的性能具有差异性，不同的终端设备对计算、存储和网络资源的需求不同。在分配资源时仅将游戏种类作为唯一标准，可能出现资源分配过多而导致的资源浪费问题，同时终端设备也会出现存储空间不足、内存配置过低、屏显分辨率错误和GPU性能不足等情况导致的云游戏无法正常运行的问题。发明内容为此，本发明提供一种资源分配方法及资源分配装置、终端设备，以解决上述不足。为了实现上述目的，本发明第一方面提供一种资源分配方法，所述方法包括：响应于接收到终端设备发送的游戏运行请求，获取其中携带的用户标识和游戏标识；向所述终端设备发送用于测试终端设备性能的测试数据，并接收所述终端设备根据所述测试数据返回的测试结果；根据所述游戏标识和所述测试结果分配运行所述游戏标识对应的游戏所需的资源。在一些实施例中，在所述获取其中携带的用户标识和游戏标识之后、所述向所述终端设备发送用于测试终端设备性能的测试数据之前，所述方法还包括：根据所述用户标识验证所述终端设备对应的用户的身份，在验证通过的情况下，向所述终端设备发送用于测试终端设备性能的测试数据。在一些实施例中，所述测试结果包括以下任一或其组合：存储空间参数、内存配置参数、屏显分辨率参数、图形处理器GPU性能参数。为了实现上述目的，本发明第二方面提供一种资源分配方法，所述方法包括：向资源分配装置发送携带用户标识和游戏标识的游戏运行请求，并接收所述资源分配装置发送的测试数据；根据所述测试数据确定测试结果，并将所述测试结果发送至所述资源分配装置，以使所述资源分配装置根据所述游戏标识和所述测试结果分配运行所述游戏标识对应的游戏所需的资源。在一些实施例中，所述测试数据包括测试应用安装包，所述根据所述测试数据确定测试结果，包括：根据所述测试数据安装测试应用，并运行所述测试应用得到测试结果；在所述根据所述测试数据确定测试结果之后，所述方法还包括：卸载所述测试应用。为了实现上述目的，本发明第三方面提供一种资源分配装置，所述装置包括：接收模块，用于接收终端设备发送的游戏运行请求；以及用于接收所述终端设备根据测试数据返回的测试结果；获取模块，用于响应于所述接收模块接收到终端设备发送的游戏运行请求，获取其中携带的用户标识和游戏标识；发送模块，用于向所述终端设备发送用于测试终端设备性能的所述测试数据；分配模块，用于根据所述游戏标识和所述测试结果分配运行所述游戏标识对应的游戏所需的资源。在一些实施例中，所述装置还包括验证模块，所述验证模块用于根据所述用户标识验证所述终端设备对应的用户的身份。在一些实施例中，所述测试结果包括以下任一或其组合：存储空间参数、内存配置参数、屏显分辨率参数、图形处理器GPU性能参数。为了实现上述目的，本发明第四方面提供一种终端设备，所述终端设备包括：发送模块，用于向资源分配装置发送携带用户标识和游戏标识的游戏运行请求；以及用于将测试结果发送至所述资源分配装置，以使所述资源分配装置根据所述游戏标识和所述测试结果分配运行所述游戏标识对应的游戏所需的资源；接收模块，用于接收所述资源分配装置发送的测试数据；处理模块，用于根据所述测试数据确定所述测试结果。在一些实施例中，所述测试数据包括测试应用安装包，所述处理模块用于根据所述测试数据安装测试应用，并运行所述测试应用得到测试结果，以及用于卸载所述测试应用。本发明具有如下优点：本发明实施例提供的资源分配方法，响应于接收到终端设备发送的游戏运行请求，获取其中携带的用户标识和游戏标识，向终端设备发送用于测试终端设备性能的测试数据，并接收终端设备根据测试数据返回的测试结果，根据游戏标识和测试结果分配运行游戏标识对应的游戏所需的资源。由于在分配运行云游戏所需的资源时，不再仅根据游戏种类进行分配，而是综合考虑游戏种类以及终端设备的性能情况，既使得边缘服务器能够根据分配好的资源正常运行云游戏，又使得在终端设备显示云游戏画面时用户能够拥有较好的游戏体验。避免了为云游戏分配的资源过多但终端性能不足而导致的资源浪费且终端设备无法正常显示云游戏画面的问题。附图说明附图是用来提供对本发明的进一步理解，并且构成说明书的一部分，与下面的具体实施方式一起用于解释本发明，但并不构成对本发明的限制。图1为本发明实施例提供的资源分配装置侧的资源分配方法流程示意图；图2为本发明实施例提供的终端设备侧的资源分配方法流程示意图；图3为本发明实施例提供的资源分配装置的模块示意图；图4为本发明实施例提供的终端设备的模块示意图。具体实施方式为使本领域技术人员更好地理解本发明的技术方案，下面结合附图和具体实施方式对本发明作进一步详细描述。可以理解的是，此处描述的具体实施例和附图仅仅用于解释本发明，而非对本发明的限定。可以理解的是，在不冲突的情况下，本发明中的各实施例及实施例中的各特征可相互组合。可以理解的是，为便于描述，本发明的附图中仅示出了与本发明相关的部分，而与本发明无关的部分未在附图中示出。可以理解的是，本发明的实施例中所涉及的每个单元、模块可仅对应一个实体结构，也可由多个实体结构组成，或者，多个单元、模块也可集成为一个实体结构。可以理解的是，在不冲突的情况下，本发明的流程图和框图中所标注的功能、步骤可按照不同于附图中所标注的顺序发生。可以理解的是，本发明的流程图和框图中，示出了按照本发明各实施例的系统、装置、设备、方法的可能实现的体系架构、功能和操作。其中，流程图或框图中的每个方框可代表一个单元、模块、程序段、代码，其包含用于实现规定的功能的可执行指令。而且，框图和流程图中的每个方框或方框的组合，可用实现规定的功能的基于硬件的系统实现，也可用硬件与计算机指令的组合来实现。可以理解的是，本发明实施例中所涉及的单元、模块可通过软件的方式实现，也可通过硬件的方式来实现，例如单元、模块可位于处理器中。本发明实施例提供的资源分配方法，能够应用于资源分配装置及终端设备，其中，资源分配装置可以为边缘服务器所有，边缘服务器部署有云游戏，以供终端设备通过边缘服务器运行云游戏。如图1所示，本发明实施例提供一种资源分配方法，当应用于资源分配设备时，所述方法可以包括如下步骤：步骤11，响应于接收到终端设备发送的游戏运行请求，获取其中携带的用户标识和游戏标识。其中，该游戏运行请求由终端设备发送至本资源分配设备，用以向本资源分配设备请求运行云游戏，其中至少可以携带用户标识和游戏标识，该用户标识为使用该终端设备的用户的标识，该游戏标识为用户所请求运行的云游戏的标识。在接收到终端设备发送的游戏运行请求时，本资源分配设备可以直接获取游戏运行请求中携带的用户标识和游戏标识。步骤12，向终端设备发送用于测试终端设备性能的测试数据，并接收终端设备根据测试数据返回的测试结果。本资源分配设备可以向终端设备发送测试数据，终端设备根据测试数据测试本终端设备的性能得到测试结果，并向本资源分配设备返回测试结果。步骤13，根据游戏标识和测试结果分配运行游戏标识对应的游戏所需的资源。本资源分配设备可以根据游戏标识确定终端设备所请求运行的云游戏的游戏种类，根据综合终端设备所请求运行的云游戏的游戏种类以及终端设备的性能测试结果这两方面的因素，为运行终端设备所请求运行的云游戏所需要的资源进行分配。通过上述步骤11-13可以看出，本发明实施例提供的资源分配方法，响应于接收到终端设备发送的游戏运行请求，获取其中携带的用户标识和游戏标识，向终端设备发送用于测试终端设备性能的测试数据，并接收终端设备根据测试数据返回的测试结果，根据游戏标识和测试结果分配运行游戏标识对应的游戏所需的资源。由于在分配运行云游戏所需的资源时，不再仅根据游戏种类进行分配，而是综合考虑游戏种类以及终端设备的性能情况，既使得边缘服务器能够根据分配好的资源正常运行云游戏，又使得在终端设备显示云游戏画面时用户能够拥有较好的游戏体验。避免了为云游戏分配的资源过多但终端性能不足而导致的资源浪费且终端设备无法正常显示云游戏画面的问题。在分配完毕后，本资源分配设备可以向边缘服务器中的业务处理设备发送指令，让业务处理设备准备相应的计算、存储、网络以及GPU渲染资源等，以供运行云游戏使用。边缘服务器可以根据分配好的资源运行终端设备所请求运行的云游戏，并对该云游戏的场景进行渲染，将渲染完毕的游戏画面数据发送至终端设备，以供终端设备显示游戏画面。在一些实施例中，在所述获取其中携带的用户标识和游戏标识之后、所述向终端设备发送用于测试终端设备性能的测试数据之前，所述方法还可以包括如下步骤：根据用户标识验证终端设备对应的用户的身份，在验证通过的情况下，向终端设备发送用于测试终端设备性能的测试数据。本资源分配设备获取终端设备发送的游戏运行请求中携带的用户标识和游戏标识后，可以根据用户标识验证终端设备对应的用户的身份的合法性，若验证通过则表明用户身份真实有效，此时可以执行步骤12，即向终端设备发送用于测试终端设备性能的测试数据。在一些实施例中，所述测试结果可以包括以下任一或其组合：存储空间参数、内存配置参数、屏显分辨率参数、GPU性能参数。终端设备的性能参数可以包括存储空间参数、内存配置参数、屏显分辨率参数、GPU性能参数等等，终端设备可以根据本资源分配设备发送的用于测试终端设备性能的测试数据得到关于性能参数的测试结果，并将测试结果返回给本资源分配设备。在一些实施例中，资源分配装置还可以在根据游戏标识和测试结果分配好的资源的基础上，再额外提供5％-10％的资源，以应对终端设备的突发情况。如图2所示，本发明实施例提供一种资源分配方法，当应用于终端设备时，所述方法可以包括如下步骤：步骤21，向资源分配装置发送携带用户标识和游戏标识的游戏运行请求，并接收资源分配装置发送的测试数据。响应于接收到用户输入的游戏运行指令，终端设备可以生成游戏运行请求，其中，游戏运行请求中至少可以携带用户标识和游戏标识，该用户标识为使用终端设备的用户的标识，该游戏标识为用户所请求运行的云游戏的标识。终端设备可以将生成的游戏运行请求发送至资源分配装置，接收到游戏运行请求后，资源分配装置将向本终端设备发送用于测试终端设备性能的测试数据。步骤22，根据测试数据确定测试结果，并将测试结果发送至资源分配装置，以使资源分配装置根据游戏标识和测试结果分配运行游戏标识对应的游戏所需的资源。本终端设备根据测试数据测试本终端设备的性能得到测试结果，并将测试结果发送至资源分配装置。在步骤22之后，资源分配装置将根据游戏标识和测试结果分配运行游戏标识对应的游戏所需的资源，边缘服务器根据分配好的资源运行云游戏以及对云游戏的画面进行渲染，因此终端设备还可以接收到边缘服务器发送的渲染完毕的游戏画面数据，并根据游戏画面数据显示游戏画面。应当理解，终端设备还可以响应于用户输入的其他各种指令，向边缘服务器发送相应的信息，以确保边缘服务器正常运行云游戏而终端设备正常显示游戏画面。在一些实施例中，所述测试数据可以包括测试应用安装包，所述根据测试数据确定测试结果，可以包括：根据测试数据安装测试应用，并运行测试应用得到测试结果。终端设备根据测试应用安装包安装测试应用后，运行测试应用并对测试应用进行授权，测试结果将测试终端设备的性能参数得到测试结果。相应的，在所述根据测试数据确定测试结果之后，所述方法还可以包括：卸载测试应用。在测试得到测试结果后，终端设备可以卸载测试应用，以节省终端设备的内存及存储空间。基于相同的技术构思，如图3所示，本发明实施例还提供一种资源分配装置，所述装置可以包括：接收模块101，用于接收终端设备发送的游戏运行请求；以及用于接收所述终端设备根据测试数据返回的测试结果。获取模块102，用于响应于所述接收模块接收到终端设备发送的游戏运行请求，获取其中携带的用户标识和游戏标识。发送模块103，用于向所述终端设备发送用于测试终端设备性能的所述测试数据。分配模块104，用于根据所述游戏标识和所述测试结果分配运行所述游戏标识对应的游戏所需的资源。在一些实施例中，所述装置还包括验证模块，所述验证模块用于根据所述用户标识验证所述终端设备对应的用户的身份。在一些实施例中，所述测试结果包括以下任一或其组合：存储空间参数、内存配置参数、屏显分辨率参数、图形处理器GPU性能参数。基于相同的技术构思，如图4所示，本发明实施例还提供一种终端设备，所述终端设备可以包括：发送模块201，用于向资源分配装置发送携带用户标识和游戏标识的游戏运行请求；以及用于将测试结果发送至所述资源分配装置，以使所述资源分配装置根据所述游戏标识和所述测试结果分配运行所述游戏标识对应的游戏所需的资源。接收模块202，用于接收所述资源分配装置发送的测试数据。处理模块203，用于根据所述测试数据确定所述测试结果。在一些实施例中，所述测试数据包括测试应用安装包，所述处理模块用于根据所述测试数据安装测试应用，并运行所述测试应用得到测试结果，以及用于卸载所述测试应用。可以理解的是，以上实施方式仅仅是为了说明本发明的原理而采用的示例性实施方式，然而本发明并不局限于此。对于本领域内的普通技术人员而言，在不脱离本发明的精神和实质的情况下，可以做出各种变型和改进，这些变型和改进也视为本发明的保护范围。
