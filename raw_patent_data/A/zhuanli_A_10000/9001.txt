标题title
虚拟场景的画面生成方法、装置、计算机设备及存储介质
摘要abst
本申请公开了一种虚拟场景的画面生成方法、装置、计算机设备及存储介质，涉及虚拟场景技术领域。所述方法包括：获取探索源在虚拟场景中的位置信息；基于所述探索源的位置信息，从多个所述网格单元中定位目标网格单元；从所述目标网格单元包含的至少两个基础单元中定位目标基础单元；从所述目标基础单元周围的基础单元中，确定所述探索源对应的各个可视基础单元；基于所述可视基础单元生成所述虚拟场景的场景画面；本方案能够在保证视野区域的计算效率的同时，提高视野区域的边缘位置的精度，进而提高游戏画面的展示效果。
权利要求书clms
1.一种虚拟场景的画面生成方法，其特征在于，所述方法包括：获取探索源在虚拟场景中的位置信息；所述探索源是所述虚拟场景中，具有对应的视野距离的虚拟物；所述虚拟场景被划分为多个网格单元，并且，每个所述网格单元被划分为至少两个基础单元；基于所述探索源的位置信息，从多个所述网格单元中定位目标网格单元；所述目标网格单元是所述探索源所在的网格单元；基于所述目标网格单元的位置信息，以及所述探索源的位置信息，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元；所述目标基础单元是所述探索源所在的基础单元；基于所述视野距离，以及所述目标基础单元的位置信息，从所述目标基础单元周围的基础单元中，确定所述探索源对应的各个可视基础单元；基于所述可视基础单元生成所述虚拟场景的场景画面；在所述场景画面中，处于所述可视基础单元中的指定虚拟对象为可见状态，所述指定虚拟对象是与所述探索源不属于同一阵营的虚拟对象。2.根据权利要求1所述的方法，其特征在于，响应于所述网格单元是正方形网格，所述基础单元是以所述网格单元的两条对角线划分出的三角形网格，所述基于所述目标网格单元的位置信息，以及所述探索源的位置信息，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元，包括：基于所述目标网格单元的位置信息，以及所述探索源的位置信息，获取所述探索源到所述目标网格单元的四条边的距离；基于所述探索源到所述目标网格单元的四条边的距离，从所述目标网格单元包含的至少两个基础单元中定位所述目标基础单元。3.根据权利要求2所述的方法，其特征在于，所述基于所述探索源到所述目标网格单元的四条边的距离，从所述目标网格单元包含的至少两个基础单元中定位所述目标基础单元，包括：将所述探索源到所述目标网格单元的四条边的距离进行两两比较，获得所述探索源到所述目标网格单元的四条边的距离之间的大小关系；基于所述大小关系，从所述目标网格单元包含的至少两个基础单元中定位所述目标基础单元。4.根据权利要求1所述的方法，其特征在于，响应于所述网格单元是正方形网格，所述基础单元是以所述正方形的中心点与所述正方形的各条边上的连线划分出的三角形网格，所述基于所述目标网格单元的位置信息，以及所述探索源的位置信息，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元，包括：基于所述目标网格单元的位置信息，获取所述目标网格单元的中心点坐标；基于所述目标网格单元的中心点坐标，以及所述探索源的位置信息，获取连线夹角；所述连线夹角是所述目标网格单元的中心点与所述探索源之间的连线，与参考线之间的夹角；基于所述连线夹角，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元。5.根据权利要求1所述的方法，其特征在于，响应于所述网格单元是正方形网格，所述基础单元是以所述正方形的中心点与所述正方形的各条边上的连线划分出的三角形网格，所述基于所述目标网格单元的位置信息，以及所述探索源的位置信息，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元，包括：基于所述目标网格单元的位置信息，获取所述目标网格单元包含的至少两个基础单元各自的中心点的坐标；基于所述目标网格单元包含的至少两个基础单元各自的中心点的坐标，以及所述探索源的位置信息，获取所述目标网格单元包含的至少两个基础单元各自的中心点分别到所述探索源之间的距离；基于所述目标网格单元包含的至少两个基础单元各自的中心点分别到所述探索源之间的距离，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元。6.根据权利要求1所述的方法，其特征在于，所述基于所述视野距离，以及所述目标基础单元的位置信息，从所述目标基础单元周围的基础单元中，确定所述探索源对应的各个可视基础单元，包括：基于所述视野距离，以及所述目标基础单元的位置信息，获取所述探索源的可视范围；遍历所述可视范围内的各个基础单元，确定所述可视基础单元。7.根据权利要求6所述的方法，其特征在于，所述基于所述视野距离，以及所述目标基础单元的位置信息，获取所述探索源的可视范围，包括：获取所述虚拟场景中的各个障碍物的位置信息；基于所述视野距离、所述目标基础单元的位置信息、以及各个障碍物的位置信息，获取所述探索源的可视范围。8.根据权利要求1所述的方法，其特征在于，所述基于所述可视基础单元生成所述虚拟场景的场景画面之前，还包括：为所述可视基础单元设置状态赋值，所述状态赋值随时间递减；所述基于所述可视基础单元生成所述虚拟场景的场景画面，包括：响应于所述可视基础单元的状态赋值未递减至0，基于所述可视基础单元生成所述虚拟场景的场景画面。9.根据权利要求8所述的方法，其特征在于，所述为所述可视基础单元设置状态赋值，包括：响应于所述可视基础单元当前的状态赋值为0，将所述可视基础单元的状态赋值设置为初始值；响应于所述可视基础单元当前的状态赋值不为0，将所述可视基础单元的状态赋值重置为所述初始值。10.根据权利要求1所述的方法，其特征在于，所述基于所述可视基础单元生成所述虚拟场景的场景画面，包括：生成全局视野图；所述全局视野图用于指示所述虚拟场景中的各个基础单元是否处于可视状态；且所述可视基础单元在所述全局视野图中处于可视状态；基于所述全局视野图，生成所述虚拟场景的场景画面。11.根据权利要求10所述的方法，其特征在于，所述方法还包括：基于全局视野图，确定所述虚拟场景中对应迷雾效果的网格单元；基于所述虚拟场景中对应迷雾效果的网格单元，在所述虚拟场景的场景画面中渲染迷雾效果。12.根据权利要求11所述的方法，其特征在于，所述基于全局视野图，确定所述虚拟场景中对应迷雾效果的网格单元，包括：基于所述全局视野图，获取第一网格单元中的至少两个基础单元的状态信息，所述状态信息用于指示对应的基础单元是否处于可视状态；所述第一网格单元是所述虚拟场景中的任意一个网格单元；响应于所述第一网格单元中不处于可视状态的基础单元的数量达到数量阈值，将所述第一网格单元确定为对应迷雾效果的网格单元。13.一种虚拟场景的画面生成装置，其特征在于，所述装置包括：位置信息获取模块，用于获取探索源在虚拟场景中的位置信息；所述探索源是所述虚拟场景中，具有对应的视野距离的虚拟物；所述虚拟场景被划分为多个网格单元，并且，每个所述网格单元被划分为至少两个基础单元；网格单元定位模块，用于基于所述探索源的位置信息，从多个所述网格单元中定位目标网格单元；所述目标网格单元是所述探索源所在的网格单元；目标基础单元定位模块，用于基于所述目标网格单元的位置信息，以及所述探索源的位置信息，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元；所述目标基础单元是所述探索源所在的基础单元；基础单元确定模块，用于基于所述视野距离，以及所述目标基础单元的位置信息，从所述目标基础单元周围的基础单元中，确定所述探索源对应的各个可视基础单元；画面生成模块，用于基于所述可视基础单元生成所述虚拟场景的场景画面；在所述场景画面中，处于所述可视基础单元中的指定虚拟对象为可见状态，所述指定虚拟对象是与所述探索源不属于同一阵营的虚拟对象。14.一种计算机设备，其特征在于，所述计算机设备包括处理器和存储器，所述存储器中存储有至少一条计算机程序，所述至少一条计算机程序由所述处理器加载并执行以实现如权利要求1至12任一所述的虚拟场景的画面生成方法。15.一种计算机可读存储介质，其特征在于，所述可读存储介质中存储有至少一条计算机程序，所述至少一条计算机程序由处理器加载并执行以实现如权利要求1至12任一所述的虚拟场景的画面生成方法。
说明书desc
技术领域本申请实施例涉及虚拟场景技术领域，特别涉及一种虚拟场景的画面生成方法、装置、计算机设备及存储介质。背景技术多人在线战术竞技类游戏通常基于一定的视野机制进行游戏场景画面的展示。MOBA类游戏中的视野机制通常是基于对游戏场景进行网格划分来实现的。比如，游戏开发人员预先将游戏场景划分为若干个正方形的网格单元，在游戏过程中，计算用户所在阵营的虚拟单位周围一定范围的网格单元，作为用户可视的网格单元，并在游戏画面中展示用户可视的网格单元中的其它阵营的虚拟单位。然而，为了保证视野区域的计算效率，游戏场景中的网格单元的密度通常不高，这就导致每个网格单元的尺寸较大，从而导致视野区域的边缘位置的精度较低，影响游戏画面的展示效果。发明内容本申请实施例提供了一种虚拟场景的画面生成方法、装置、计算机设备及存储介质，可以在保证视野区域的计算效率的同时，提高视野区域的边缘位置的精度，进而提高游戏画面的展示效果。所述技术方案如下：一方面，提供了一种虚拟场景的画面生成方法，所述方法包括：获取探索源在虚拟场景中的位置信息；所述探索源是所述虚拟场景中，具有对应的视野距离的虚拟物；所述虚拟场景被划分为多个网格单元，并且，每个所述网格单元被划分为至少两个基础单元；基于所述探索源的位置信息，从多个所述网格单元中定位目标网格单元；所述目标网格单元是所述探索源所在的网格单元；基于所述目标网格单元的位置信息，以及所述探索源的位置信息，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元；所述目标基础单元是所述探索源所在的基础单元；基于所述视野距离，以及所述目标基础单元的位置信息，从所述目标基础单元周围的基础单元中，确定所述探索源对应的各个可视基础单元；基于所述可视基础单元生成所述虚拟场景的场景画面；在所述场景画面中，处于所述可视基础单元中的指定虚拟对象为可见状态，所述指定虚拟对象是与所述探索源不属于同一阵营的虚拟对象。另一方面，提供了一种虚拟场景的画面生成装置，所述装置包括：位置信息获取模块，用于获取探索源在虚拟场景中的位置信息；所述探索源是所述虚拟场景中，具有对应的视野距离的虚拟物；所述虚拟场景被划分为多个网格单元，并且，每个所述网格单元被划分为至少两个基础单元；网格单元定位模块，用于基于所述探索源的位置信息，从多个所述网格单元中定位目标网格单元；所述目标网格单元是所述探索源所在的网格单元；目标基础单元定位模块，用于基于所述目标网格单元的位置信息，以及所述探索源的位置信息，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元；所述目标基础单元是所述探索源所在的基础单元；基础单元确定模块，用于基于所述视野距离，以及所述目标基础单元的位置信息，从所述目标基础单元周围的基础单元中，确定所述探索源对应的各个可视基础单元；画面生成模块，用于基于所述可视基础单元生成所述虚拟场景的场景画面；在所述场景画面中，处于所述可视基础单元中的指定虚拟对象为可见状态，所述指定虚拟对象是与所述探索源不属于同一阵营的虚拟对象。在一种可能的实现方式中，响应于所述网格单元是正方形网格，所述基础单元是以所述网格单元的两条对角线划分出的三角形网格，所述目标基础单元定位模块，用于，基于所述目标网格单元的位置信息，以及所述探索源的位置信息，获取所述探索源到所述目标网格单元的四条边的距离；基于所述探索源到所述目标网格单元的四条边的距离，从所述目标网格单元包含的至少两个基础单元中定位所述目标基础单元。在一种可能的实现方式中，基于所述探索源到所述目标网格单元的四条边的距离，从所述目标网格单元包含的至少两个基础单元中定位所述目标基础单元时，目标基础单元定位模块，用于，将所述探索源到所述目标网格单元的四条边的距离进行两两比较，获得所述探索源到所述目标网格单元的四条边的距离之间的大小关系；基于所述大小关系，从所述目标网格单元包含的至少两个基础单元中定位所述目标基础单元。在一种可能的实现方式中，响应于所述网格单元是正方形网格，所述基础单元是以所述正方形的中心点与所述正方形的各条边上的连线划分出的三角形网格，所述目标基础单元定位模块，用于，基于所述目标网格单元的位置信息，获取所述目标网格单元的中心点坐标；基于所述目标网格单元的中心点坐标，以及所述探索源的位置信息，获取连线夹角；所述连线夹角是所述目标网格单元的中心点与所述探索源之间的连线，与参考线之间的夹角；基于所述连线夹角，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元。在一种可能的实现方式中，响应于所述网格单元是正方形网格，所述基础单元是以所述正方形的中心点与所述正方形的各条边上的连线划分出的三角形网格，所述目标基础单元定位模块，用于，基于所述目标网格单元的位置信息，获取所述目标网格单元包含的至少两个基础单元各自的中心点的坐标；基于所述目标网格单元包含的至少两个基础单元各自的中心点的坐标，以及所述探索源的位置信息，获取所述目标网格单元包含的至少两个基础单元各自的中心点分别到所述探索源之间的距离；基于所述目标网格单元包含的至少两个基础单元各自的中心点分别到所述探索源之间的距离，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元。在一种可能的实现方式中，所述基础单元确定模块，用于，基于所述视野距离，以及所述目标基础单元的位置信息，获取所述探索源的可视范围；遍历所述可视范围内的各个基础单元，确定所述可视基础单元。在一种可能的实现方式中，在基于所述视野距离，以及所述目标基础单元的位置信息，获取所述探索源的可视范围，基础单元确定模块，用于，获取所述虚拟场景中的各个障碍物的位置信息；基于所述视野距离、所述目标基础单元的位置信息、以及各个障碍物的位置信息，获取所述探索源的可视范围。在一种可能的实现方式中，所述装置还包括：赋值模块，用于在画面生成模块基于所述可视基础单元生成所述虚拟场景的场景画面之前，为所述可视基础单元设置状态赋值，所述状态赋值随时间递减；所述画面生成模块，用于响应于所述可视基础单元的状态赋值未递减至0，基于所述可视基础单元生成所述虚拟场景的场景画面。在一种可能的实现方式中，所述赋值模块，用于，响应于所述可视基础单元当前的状态赋值为0，将所述可视基础单元的状态赋值设置为初始值；响应于所述可视基础单元当前的状态赋值不为0，将所述可视基础单元的状态赋值重置为所述初始值。在一种可能的实现方式中，所述画面生成模块，用于，生成全局视野图；所述全局视野图用于指示所述虚拟场景中的各个基础单元是否处于可视状态；且所述可视基础单元在所述全局视野图中处于可视状态；基于所述全局视野图，生成所述虚拟场景的场景画面。在一种可能的实现方式中，所述装置还包括：网格单元确定模块，用于基于全局视野图，确定所述虚拟场景中对应迷雾效果的网格单元；迷雾渲染模块，用于基于所述虚拟场景中对应迷雾效果的网格单元，在所述虚拟场景的场景画面中渲染迷雾效果。在一种可能的实现方式中，所述网格单元确定模块，用于，基于所述全局视野图，获取第一网格单元中的至少两个基础单元的状态信息，所述状态信息用于指示对应的基础单元是否处于可视状态；所述第一网格单元是所述虚拟场景中的任意一个网格单元；响应于所述第一网格单元中不处于可视状态的基础单元的数量达到数量阈值，将所述第一网格单元确定为对应迷雾效果的网格单元。另一方面，本申请实施例提供了一种计算机设备，所述计算机设备包括处理器和存储器，所述存储器中存储有至少一条计算机程序，所述至少一条计算机程序由所述处理器加载并执行以实现如上述方面所述的虚拟场景的画面生成方法。另一方面，本申请实施例提供了一种计算机可读存储介质，所述计算机可读存储介质中存储有至少一条计算机程序，所述至少一条计算机程序由处理器加载并执行以实现如上述方面所述的虚拟场景的画面生成方法。另一方面，本申请实施例提供了一种计算机程序产品或计算机程序，该计算机程序产品或计算机程序包括计算机指令，该计算机指令存储在计算机可读存储介质中。计算机设备的处理器从计算机可读存储介质读取该计算机指令，处理器执行该计算机指令，使得该计算机设备执行上述方面所述的虚拟场景的画面生成方法。本申请实施例提供的技术方案带来的有益效果至少包括:预先按照网格单元对虚拟场景进行划分，再将网格单元进一步划分为至少两个基础单元，在确定虚拟场景中的视野范围时，首先确定探索源所在的网格单元，再基于探索源所在的网格单元，确定探索源所在的基础单元，并基于探索源所在的基础单元确定探索源的可视基础单元，而虚拟场景的场景画面是基于探索源的可视基础单元生成的，由于基础单元相比于网格单元来说尺寸更小，能够保证视野区域的边缘位置的精度，同时，由于在进行视野区域计算的过程中，在定位探索源所在的基础单元时采用了两级定位的方式，即首先定位到网格单元，然后在网格单元内进一步定位到基础单元，在此过程中，相比于直接从所有的基础单元中定位探索源所在的基础单元的方案来说，能够极大的简化定位的复杂度，进而简化视野区域计算的复杂度，因此，本申请实施例所示的方案能够在保证视野区域的计算效率的同时，提高视野区域的边缘位置的精度，进而提高游戏画面的展示效果。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本申请一实施例提供的虚拟场景的画面生成方法的流程图；图2至图4是本申请实施例涉及的三种视野区域的示意图；图5是本申请一实施例提供的虚拟场景的画面生成方法的流程图；图6至图8是图5所示实施例涉及的三种网格单元划分示意图；图9是图5所示实施例涉及的网格单元坐标关系示意图；图10是图5所示实施例涉及的探索源位置示意图；图11是图5所示实施例涉及的一种角度划分示意图；图12至图14是图5所示实施例涉及的场景图像示意图；图15是图5所示实施例涉及的视野及迷雾计算过程示意图；图16是图5所示实施例涉及的渲染迷雾的原始图；图17是本申请一实施例提供的虚拟场景的画面生成装置的结构框图；图18是本申请另一实施例提供的计算机设备的结构框图。具体实施方式这里将详细地对示例性实施例进行说明，其示例表示在附图中。下面的描述涉及附图时，除非另有表示，不同附图中的相同数字表示相同或相似的要素。以下示例性实施例中所描述的实施方式并不代表与本申请相一致的所有实施方式。相反，它们仅是与如所附权利要求书中所详述的、本申请的一些方面相一致的装置和方法的例子。应当理解的是，在本文中提及的“若干个”是指一个或者多个，“多个”是指两个或两个以上。“和/或”，描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。字符“/”一般表示前后关联对象是一种“或”的关系。请参考图1，其示出了本申请一示例性实施例提供的虚拟场景的画面生成方法的流程图。该方法可以由计算机设备执行，该计算机设备中运行有生成和展示虚拟场景的应用程序，比如，该计算机设备可以是运行虚拟场景客户端的终端，或者，该计算机设备也可以是终端中运行的虚拟场景客户端对应的后台服务器。如图1所示，该方法可以包括如下步骤：步骤101，获取探索源在虚拟场景中的位置信息；该探索源是该虚拟场景中，具有对应的视野距离的虚拟物；该虚拟场景被划分为多个网格单元，并且，每个该网格单元被划分为至少两个基础单元。虚拟场景是指应用程序在终端上运行时显示的虚拟场景。该虚拟场景可以是对真实世界的仿真环境场景，也可以是半仿真半虚构的三维环境场景，还可以是纯虚构的三维环境场景。虚拟场景可以是二维虚拟场景、2.5维虚拟场景和三维虚拟场景中的任意一种，下述实施例以虚拟场景是三维虚拟场景来举例说明，但对此不加以限定。可选地，该虚拟场景还用于至少两个虚拟角色之间的虚拟场景对战。可选地，该虚拟场景中具有可供至少两个虚拟角色使用的虚拟资源。可选地，该虚拟场景包括该虚拟世界包括正方形/矩形地图，该正方形/矩形地图包括对称的左下角区域和右上角区域，属于两个敌对阵营的虚拟角色分别占据其中一个区域，并以摧毁对方区域深处的目标建筑/据点/基地/水晶来作为胜利目标。探索源可以是虚拟场景中，属于用户所在阵营的虚拟物，比如，该探索源可以是当前用户控制的虚拟人物/虚拟角色，当前用户所在阵营中的其他用户/人工智能控制的虚拟人物/虚拟角色，当前用户所在阵营的虚拟建筑，当前用户所在阵营的虚拟召唤物，当前用户所在阵营中的虚拟人物/虚拟角色在虚拟场景中放置的虚拟道具等等。可选的，上述虚拟召唤物包括且不限于用户/AI控制的虚拟人物或虚拟角色触发的虚拟召唤物，以及在虚拟场景中自动生成且属于当前用户所在阵营的虚拟召唤物等。探索源在虚拟场景中具有各自的视野距离，也就是说，在无遮挡的情况下，处于探索源的视野距离内的其它阵营的虚拟对象，对于当前用户所在的阵营来说是可见的。在虚拟场景中，不同的探索源的视野距离可以相同，也可以不同。比如，虚拟建筑和虚拟对象通常具有较大的视野距离，而虚拟道具通常具有较小的视野距离。再比如，同一个探索源位于不同的位置时，也可以具有不同的视野距离，例如，一个虚拟对象分别位于高处和低处时，其视野距离可以不同，比如，一个虚拟对象位于高处时具有200个单位距离的视野距离，而当其移动至平地时具有150个单位距离的视野距离。步骤102，基于该探索源的位置信息，从多个该网格单元中定位目标网格单元；该目标网格单元是该探索源所在的网格单元。在本申请实施例中，探索源的位置信息，可以是探索源在虚拟场景中的坐标。步骤103，基于该目标网格单元的位置信息，以及该探索源的位置信息，从该目标网格单元包含的至少两个基础单元中定位目标基础单元；该目标基础单元是该探索源所在的基础单元。在本申请实施例中，网格单元的位置信息，可以是网格单元中的指定点在虚拟场景中的位置信息。基于该指定点的位置信息，以及网格单元的尺寸信息，即可以确定网格单元中其它位置的位置信息。或者，网格单元的位置信息，也可以包括网格单元的各个顶点在虚拟场景中的位置信息。或者，网格单元的位置信息，也可以包括网格单元的各条边在虚拟场景中的位置信息等等。本申请实施例对于网格单元的位置信息的形式不做限定。在本申请实施例中，虚拟场景预先被划分为若干个网格单元，进一步的，每个网格单元还预先被划分为两个或者两个以上的基础单元。在计算探索源所在的基础单元时，首先定位到探索源所在的目标网格单元，然后在目标网格单元内确定探索源所在的基础单元。步骤104，基于该视野距离，以及目标基础单元的位置信息，从目标基础单元周围的基础单元中，确定探索源对应的各个可视基础单元。其中，上述可视基础单元，是指探索源可以探索的基础单元；或者说，位于可视基础单元中的其它阵营的虚拟对象，对于探索源所在的阵营来说是可视的。在本申请实施例中，在定位到探索源所在的目标基础单元之后，即可以结合探索源本身的视野距离，从目标基础单元周围，且位于探索源的视野距离内的各个基础单元中，确定出探索源可以探索的可视基础单元。步骤105，基于该可视基础单元生成虚拟场景的场景画面；在该场景画面中，处于该可视基础单元中的指定虚拟对象为可见状态，该指定虚拟对象是与该探索源不属于同一阵营的虚拟对象。在本申请实施例中，虚拟场景中的各个虚拟对象分为至少两个阵营。在基于可视基础单元生成虚拟场景的场景画面时，若该可视基础单元中存在探索源所在阵营之外的其它阵营中的虚拟对象，则该其它阵营中的虚拟对象可以对该探索源所在的阵营中的各个用户可见，也就是说，在生成的场景画面中，存在该其它阵营中的虚拟对象。可选的，当其它阵营中的虚拟对象位于可视基础单元之外的其它基础单元中时，该其它阵营中的虚拟对象对该探索源所在的阵营中的各个用户不可见。在一种可能的实现方式中，上述指定虚拟对象，可以是处于非隐藏状态的虚拟对象。例如，若可视基础单元中存在其它阵营中的虚拟对象，且该其它阵营中的虚拟对象为非隐藏状态，则该其它阵营中的虚拟对象可以对该探索源所在的阵营中的各个用户可见；相应的，若其它阵营中的虚拟对象为隐藏状态，则即使该其它阵营中的虚拟对象位于可视基础单元中，该其它阵营中的虚拟对象也可以对该探索源所在的阵营中的各个用户不可见。在一种可能的实现方式中，当上述探索源不具有探测隐藏状态的虚拟对象的功能，则上述指定虚拟对象，可以是处于非隐藏状态的虚拟对象。相应的，若可视基础单元中存在其它阵营中的虚拟对象，且该其它阵营中的虚拟对象为隐藏状态，那么当探索源具有探测隐藏状态的虚拟对象的功能时，该其它阵营中的虚拟对象对该探索源所在的阵营中的各个用户也是可见的。其中，上述与该探索源不属于同一阵营的虚拟对象，可以是探索源的敌对阵营的虚拟对象，或者，也可以是中立阵营的虚拟对象。综上所述，本申请实施例所示的方案，预先按照网格单元对虚拟场景进行划分，再将网格单元进一步划分为至少两个基础单元，在确定虚拟场景中的视野范围时，首先确定探索源所在的网格单元，再基于探索源所在的网格单元，确定探索源所在的基础单元，并基于探索源所在的基础单元确定探索源的可视基础单元，而虚拟场景的场景画面是基于探索源的可视基础单元生成的，由于基础单元相比于网格单元来说尺寸更小，能够保证视野区域的边缘位置的精度，同时，由于在进行视野区域计算的过程中，在定位探索源所在的基础单元时采用了两级定位的方式，即首先定位到网格单元，然后在网格单元内进一步定位到基础单元，在此过程中，相比于直接从所有的基础单元中定位探索源所在的基础单元的方案来说，能够极大的简化定位的复杂度，进而简化视野区域计算的复杂度，因此，本申请实施例所示的方案能够在保证视野区域的计算效率的同时，提高视野区域的边缘位置的精度，进而提高游戏画面的展示效果。以本方案应用于MOBA类游戏的游戏场景为例，请参考图2至图4，其示出了本申请实施例涉及的三种视野区域的示意图。假设虚拟草丛所在的区域，应该位于探索源的视野区域之外，而虚拟草丛之外的其他区域，应该位于探索源的视野区域内。在图2中，运行游戏的计算机设备直接以网格单元作为最小的视野区域计算单元时，其计算出的可视区域，最小单元是网格单元，也就是说，在图2中，非可视区域和可视区域，分别由若干个完整的正方形网格单元构成。由于正方形网格单元的尺寸较大，而虚拟草丛所在的位置分布并不规则，会导致部分非可视区域实际包含很大部分非虚拟草丛的区域，而相应的，部分可视区域实际包含了一部分虚拟草丛的区域，从而导致视野区域边缘位置的精度较差。而如果选择缩小网格单元的尺寸以提高精度，一方面，若要达到足够的精度，需要将网格单元缩小到很小的粒度，则会导致探索源定位的计算复杂度较高，计算机设备的计算性能和存储性能都无法支持，另一方面，如果对网格单元的缩小的力度不够，则依然无法解决视野区域边缘位置较差的问题。而在图3和图4中，计算机设备对虚拟场景进行两级划分；第一级以网格单元进行划分，将虚拟场景划分为若干个正方形的网格单元；而第二级以基础单元进行划分，将每个网格单元进一步划分为4个三角形的基础单元。一方面，计算机设备在定位探索源时，先从网格单元的维度进行定位，确定探索源所在的网格单元，然后在定位到的网格单元包含的4个基础单元中，进一步定位得到探索源所在的基础单元，相比于直接从大量的基础单元中直接定位得到探索源所在的基础单元的方案来说，能够极大的简化探索源定位的复杂度；另一方面，计算机在进行视野区域计算时，以基础单元为单位区分可视区域和非可视区域，使得视野区域的边缘进度更高，比如，在图3和图4中，非可视区域和可视区域的最小单元的尺寸只有网格单元的尺寸的四分之一，这样可以极大地提高视野区域边缘的精度。比如，与图2相比，图3中的网格单元32中，只有对应虚拟草丛的两个三角形的基础单元被划分为非可视区域，相应的，图3中的网格单元33中，也只有未对应虚拟草丛的两个三角形的基础单元被划分为可视区域。图4中的情况与图3类似，此处不再赘述。请参考图5，其示出了本申请一示例性实施例提供的虚拟场景的画面生成方法的流程图。该方法可以由计算机设备执行，该计算机设备中运行有生成和展示虚拟场景的应用程序，比如，该计算机设备可以是运行虚拟场景客户端的终端，或者，该计算机设备也可以是终端中运行的虚拟场景客户端对应的后台服务器。如图5所示，该方法可以包括如下步骤：步骤501，获取探索源在虚拟场景中的位置信息；该探索源是该虚拟场景中，具有对应的视野距离的虚拟物；该虚拟场景被划分为多个网格单元，并且，每个该网格单元被划分为至少两个基础单元。在本申请实施例中，上述网格单元可以是正方形、矩形、菱形等尺寸较大的区域单元；上述基础单元可以是从网格单元中划分出的任意形状的区域单元，只要满足至少两个基础单元能够组成一个网格单元即可。上述各个基础单元的形状可以相同，或者，上述各个基础单元的形状也可以不同。上述各个基础单元的尺寸可以相同，或者，上述各个基础单元的尺寸也可以不同。在一种可能的实现方式中，上述基础单元中至少存在一条边，与网格单元中的各条边不平行。由于在虚拟场景中，可能存在很多障碍物，而障碍物会对探索源的视野造成遮挡，由于障碍物的形状通常是不规则的，而网格单元的形状通常是比较规则的，这就导致网格单元的边与某些障碍物的边缘匹配度较差。为了提高基础单元和障碍物的边缘的匹配度，从而提高视野区域的边缘的展示效果，在本申请实施例中，上述网格单元中划分出的基础单元，可以存在至少一条边，与网格单元中的各条边都不平行，从而实现通过基础单元中不同延伸方向的边，来提高基础单元与障碍物的边缘之间的匹配度。比如，请参考图6至图8，其示出了本申请实施例涉及的三种网格单元划分示意图。如图6所示，上述网格单元可以是正方形，基础单元可以是按照正方形的一条对角线61划分出的两个三角形网格。如图7所示，基础单元也可以是按照正方形的两条对角线划分出的4个三角形网格。基础单元也可以是以正方形的中心点与该正方形的各条边上的连线划分出的至少两个多边形网格；比如，如图8所示，基础单元是以正方形的中心点81分别与正方向的各边中点以及四个顶点之间的连线划分出的8个三角形网格。本申请实施例仅以图6至8所示的网格单元的划分方式进行举例说明，但是对于网格单元的划分方式不做限定。步骤502，基于该探索源的位置信息，从多个该网格单元中定位目标网格单元；该目标网格单元是该探索源所在的网格单元。以虚拟场景为正方形或矩形的场景，网格单元是正方形的区域单元为例，各个网格单元在虚拟场景中按照M行N列进行排布。计算机设备从多个网格单元中定位目标网格单元时，以虚拟场景的某个顶点为坐标原点，以该顶点对应的两条边为坐标轴，建立平面直角坐标系，探索源的坐标即为探索源在该平面直角坐标系中的坐标，通过将探索源的横坐标值和纵坐标值分别除以网格单元的边长，即可以得到目标网格单元的行数和列数。例如，假设目标网格单元的边长为10，探索源在虚拟场景中的坐标为，则探索源的横坐标1255除以10，结果为125余5，则目标网格单元位于第126列；相应的，探索源的纵坐标863除以10，结果为86余3，则目标网格单元位于第87行；也就是说，虚拟场景中第87行，第126列的网格单元是探索源所在的目标网格单元。基于目标网格单元的行数和列数，计算机设备可以进一步确定目标网格单元的索引或者坐标。步骤503，基于该目标网格单元的位置信息，以及该探索源的位置信息，从该目标网格单元包含的至少两个基础单元中定位目标基础单元；该目标基础单元是该探索源所在的基础单元。在本申请实施例中，一个网格单元可以通过该网格单元在虚拟场景中的索引或者坐标来表示。其中，基于网格单元的索引，可以查询或者计算该网格单元在虚拟场景中的位置信息。其中，一个网格单元的坐标，可以是该网格单元的某个指定点的坐标，该坐标结合网格单元的尺寸信息，即可以确定该网格单元在虚拟场景中的位置。在本申请实施例中，计算机设备确定出目标网格单元后，即可以根据目标网格单元的位置信息，确定目标网格单元中包含的至少两个基础单元，比如，确定目标网格单元中包含的至少两个基础单元各自的索引或者坐标。其中，根据目标网格单元的位置信息，确定目标网格单元中包含的至少两个基础单元的方式，可以通过目标网格单元以及该目标网格单元中的至少两个基础单元之间进行的坐标转换方式来实现。坐标转换是后续计算的基础，因此需要明确基础单元坐标到网格单元坐标的转换公式，以及网格单元坐标到基础单元索引/坐标的转换公式。在分割场景为大的网格单元时，开发人员可以设置以下的已知信息：网格单元在虚拟场景中的坐标起点p，二维网格单元的个数为m×n，每一个大网格单元的边长L。请参考图9，其示出了本申请实施例涉及的网格单元坐标关系示意图。如图9所示，网格单元91按照两条对角线划分为4个三角形的基础单元，推导可得网格单元和基础单元格有如下关系。如图所示，由网格单元在虚拟场景中的起始坐标p′，可以获得四个三角形的基础单元在虚拟场景中的重心坐标A，以A举例：a1＝a′+L/6b1＝b′+L/2同理，可以获得B、C、D在虚拟场景中的坐标。由上可知，如果已知三角形的基础单元的索引，就能定位到对应的网格单元的索引。其中，索引表示网格单元是虚拟场景中的第xg列第yg行的网格单元，相应的，网格单元的场景坐标p′为：a′＝ox+xg×Lb′＝oy+yg×L其中，为原点坐标。再根据上述已知条件即可计算出三角形的基础单元在虚拟场景中的重心坐标，实现了从索引到场景坐标的转换。而从场景坐标到三角形的基础单元的索引转换时，可以先把场景坐标p转换为对应的网格单元的索引。在一种可能的实现方式中，响应于该网格单元是正方形网格，该基础单元是以该网格单元的两条对角线划分出的三角形网格，该基于该目标网格单元的位置信息，以及该探索源的位置信息，从该目标网格单元包含的至少两个基础单元中定位目标基础单元，包括：基于该目标网格单元的位置信息，以及该探索源的位置信息，获取该探索源到该目标网格单元的四条边的距离；基于该探索源到该目标网格单元的四条边的距离，从该目标网格单元包含的至少两个基础单元中定位该目标基础单元。请参考图10，其示出了本申请实施例涉及的探索源位置示意图。如图10所示，网格单元以两条对角线划分为4个三角形的基础单元，探索源1001在网格单元中不同的基础单元内时，探索源1001到网格单元的四条边的距离之间的距离分布也不相同，因此，通过探索源1001到网格单元的四条边的距离，即可以确定探索源1001处于四个基础单元之间的那个基础单元。在一种可能的实现方式中，该基于该探索源到该目标网格单元的四条边的距离，从该目标网格单元包含的至少两个基础单元中定位该目标基础单元，包括：将该探索源到该目标网格单元的四条边的距离进行两两比较，获得该探索源到该目标网格单元的四条边的距离之间的大小关系；基于该大小关系，从该目标网格单元包含的至少两个基础单元中定位该目标基础单元。如图10所示，计算机设备在获得网格单元在虚拟场景中的坐标后，即可以根据网格单元的边长，得到网格单元的四条边的二维坐标，而由图10所示的基础单元划分方式的特性可推导出：探索源所在的目标基础单元，是其坐标点到网格单元的四条边的距离中，最短距离对应的那条边的基础单元。因此，通过对比ΔA、ΔB、ΔC、ΔD之间的大小关系，可以确定ΔA最小，则探索源位于图10所示的网格单元中的左侧的基础单元中。在一种可能的实现方式中，响应于该网格单元是正方形网格，该基础单元是以该正方形的中心点与该正方形的各条边上的连线划分出的多边形网格，该基于该目标网格单元的位置信息，以及该探索源的位置信息，从该目标网格单元包含的至少两个基础单元中定位目标基础单元，包括：基于该目标网格单元的位置信息，获取该目标网格单元的中心点坐标；基于该目标网格单元的中心点坐标，以及该探索源的位置信息，获取连线夹角；该连线夹角是该目标网格单元的中心点与该探索源之间的连线，与参考线之间的夹角；基于该连线夹角，从该目标网格单元包含的至少两个基础单元中定位目标基础单元。在本申请实施例中，当网格单元是正方形网格，且基础单元是以正方形的中心点与正方形的各条边上的连线划分出的多边形网格时，各个多边形网格的边界是正方形的中心点与正方形的各条边上的连线，也就是说，如果给定一个参考线，那么各个多边形网格中对应正方形的中心点的夹角，组成一个360°的角，且相互之间互不重叠，换句话说，以正方形的中心点为原点，对于正方形中的任意一个点，如果知道该点到正方形的中心点之间的夹角，即可以确定该点位于哪一个多边形网格的角度范围内。基于上述原理，计算机设备可以通过探索源与正方形的中心点之间的连线，与参考线之间的夹角来确定目标基础单元。请参考图11，其示出了本申请实施例涉及的一种角度划分示意图。如图11所示，以参考线为x轴为例，基础单元是以正方形的中心点分别与正方形的各边中点以及四个顶点之间的连线划分出的8个三角形网格，其中，三角形网格1101对应的角度范围是0°到45°，三角形网格1102对应的角度范围是45°到90°，以此类推，若计算机设备计算出探索源1103与原点之间的连线，与横坐标轴之间的夹角为30°，则可以确定该探索源1103位于三角形网格1101中。在一种可能的实现方式中，响应于该网格单元是正方形网格，该基础单元是以该正方形的中心点与该正方形的各条边上的连线划分出的三角形网格，该基于该目标网格单元的位置信息，以及该探索源的位置信息，从该目标网格单元包含的至少两个基础单元中定位目标基础单元，包括：基于该目标网格单元的位置信息，获取该目标网格单元包含的至少两个基础单元各自的中心点的坐标；基于该目标网格单元包含的至少两个基础单元各自的中心点的坐标，以及该探索源的位置信息，获取该目标网格单元包含的至少两个基础单元各自的中心点分别到该探索源之间的距离；基于该目标网格单元包含的至少两个基础单元各自的中心点分别到该探索源之间的距离，从该目标网格单元包含的至少两个基础单元中定位目标基础单元。比如，以图9为例，网格单元91按照两条对角线划分为4个三角形的基础单元后，计算机设备可以分别计算得到4个基础单元的中心点A、B、C、D在虚拟场景中的坐标，基于中心点A、B、C、D在虚拟场景中的坐标，以及探索源在虚拟场景中的坐标，即可以计算得到探索源分别到中心点A、B、C、D之间的距离，其中，最小距离对应的中心点的基础单元，即为探索源所在的目标基础单元。在确定上述目标基础单元之后，计算机设备即可以基于该视野距离，以及该目标基础单元的位置信息，从该目标基础单元周围的基础单元中，确定该探索源对应的各个可视基础单元。步骤504，基于该视野距离，以及该目标基础单元的位置信息，获取该探索源的可视范围。在一种可能的实现方式中，该基于该视野距离，以及该目标基础单元的位置信息，获取该探索源的可视范围，包括：获取该虚拟场景中的各个障碍物的位置信息；基于该视野距离、该目标基础单元的位置信息、以及各个障碍物的位置信息，获取该探索源的可视范围。由于虚拟场景中通常存在一定的障碍物，这些障碍物可能会对探索源的可视区域造成遮挡，使得探索源并不一定能够探索到周围视野距离内的所有区域，因此，在本申请实施例中，在确定目标基础单元之后，计算机设备还可以进一步的结合探索源的视野距离、目标基础单元的位置信息、以及障碍物的位置信息，确定探索源的可视范围。其中，上述探索源的可视范围，可以是虚拟场景中与探索源之间的距离不大于视野距离，同时，与探索源之间不存在障碍物的区域范围。步骤505，遍历该可视范围内的各个基础单元，确定该可视基础单元。在一种可能的实现方式中，计算机设备确定探索源的可视范围之后，即可以遍历虚拟场景中各个基础单元，确定其中处于可视范围内的基础单元。其中，计算机设备确定一个基础单元是否处于探索源的可视范围内时，可以获取该基础单元的中心点的坐标，并确定该基础单元的中心点的坐标是否处于该探索源的可视范围内，若该基础单元的中心点的坐标处于探索源的可视范围内，则确定该基础单元是可视范围内的可视基础单元，否则，认为该基础单元不是该可视范围内的可视基础单元。步骤506，为该可视基础单元设置状态赋值，该状态赋值随时间递减。在本申请实施例中，当一个基础单元被确定为可视基础单元时，计算机设备可以为该基础单元设置一个随时间递减的状态赋值，以指示该基础单元对探索源所在的阵营来说是可视状态，相应的，当该状态赋值递减为0，则表示该基础单元对探索源所在的阵营来说，退出了可视状态。在一种可能的实现方式中，为可视基础单元设置状态赋值，包括：响应于该可视基础单元当前的状态赋值为0，将该可视基础单元的状态赋值设置为初始值；响应于该可视基础单元当前的状态赋值不为0，将该可视基础单元的状态赋值重置为该初始值。在本申请实施例中，计算机设备可以周期性的执行上述步骤501至步骤506，在每次执行过程中，当本次确定的可视基础单元当前的状态赋值为0，则说明该可视基础单元在当前时刻之前为不可视状态，则直接将其状态赋值设置为初始值；当本次确定的可视基础单元当前的状态赋值不为0，则说明该可视基础单元在当前时刻之前为可视状态，则刷新该可视基础单元的可视状态的持续时间。步骤507，基于该可视基础单元生成该虚拟场景的场景画面；在该场景画面中，处于该可视基础单元中的指定虚拟对象为可见状态，该指定虚拟对象是与该探索源不属于同一阵营的虚拟对象。在本申请实施例中，响应于该可视基础单元的状态赋值未递减至0，基于该可视基础单元生成该虚拟场景的场景画面。也就是说，当可视基础单元的状态赋值未递减至0时，生成的虚拟场景的场景画面中，处于该可视基础单元中的指定虚拟对象为可见状态。相应的，如果后续一个可视基础单元的状态赋值递减至0，则该可视基础单元退出可视状态，转化为非可视基础单元，而在后续生成的虚拟场景的场景画面中，处于非可视基础单元中的指定虚拟对象为不可见状态。在本申请实施例所示的方案中，基于该可视基础单元生成该虚拟场景的场景画面，包括：生成全局视野图；该全局视野图用于指示该虚拟场景中的各个基础单元是否处于可视状态；且该可视基础单元在该全局视野图中处于可视状态；基于该全局视野图，生成该虚拟场景的场景画面。在本申请实施例中，计算机设备在生成场景画面时，可以从虚拟场景的全局角度来生成场景画面，而虚拟场景中，对应一个阵营通常存在多个探索源，在生成场景画面时，计算机设备将多个探索源对应的可视基础单元进行合并，得到全局的可视基础单元，基于全局的可视基础单元生成一个全局视野图，以指示虚拟场景中哪些基础单元被点亮，然后基于该全局视野图生成场景画面。通过本申请实施例上述步骤，计算机设备可以提供高精度的视野区域的边缘展示效果。请参考图12至图14，其示出了本申请实施例涉及的场景图像示意图。如图12至图14所示，虚拟场景中的虚拟草丛位于虚拟对象1201之外的其它阵营的视野区域之外，如图12所示，当虚拟对象1201位于虚拟草丛的边缘位置之外时，虚拟对象1201对于其它阵营的用户来说是可见的，而如图13和图14所示，当虚拟对象1201进入虚拟草丛的边缘位置之内时，虚拟对象1201对于其它阵营的用户来说是不可见的。步骤508，基于全局视野图，确定该虚拟场景中对应迷雾效果的网格单元。在本申请实施例中，虚拟场景中对于用户不可见的区域，可以渲染迷雾效果，以提高不可见区域的显示的真实性。而通常来说，迷雾效果的边缘位置精度，对于虚拟场景的场景画面的展示效果影响较小，为了提高迷雾效果的渲染效率，在本申请实施例中，计算机设备可以基于全局视野图，以网格单元为单位进行迷雾效果的渲染。在一种可能的实现方式中，该基于全局视野图，确定该虚拟场景中对应迷雾效果的网格单元，包括：基于该全局视野图，获取第一网格单元中的至少两个基础单元的状态信息，该状态信息用于指示对应的基础单元是否处于可视状态；该第一网格单元是该虚拟场景中的任意一个网格单元；响应于该第一网格单元中不处于可视状态的基础单元的数量达到数量阈值，将该第一网格单元确定为对应迷雾效果的网格单元。在本申请实施例中，当一个网格单元中基础单元中，不处于可视状态的基础单元的数量达到数量阈值时，计算机设备即可以确认该网格单元是对应有迷雾效果的网格单元。比如，以数量阈值是1为例，当一个网格单元中，包含一个或者一个以上不处于可视状态的基础单元时，计算机设备即可以确认该网格单元是对应有迷雾效果的网格单元。其中，上述数量阈值可以是开发人员根据基础单元的划分情况进行设置，或者，上述数量阈值也可以根据用户的配置操作进行设置。其中，上述配置操作可以是用户对画面质量的配置操作。步骤509，基于该虚拟场景中对应迷雾效果的网格单元，在该虚拟场景的场景画面中渲染迷雾效果。计算机设备可以在虚拟场景的场景画面中，对应迷雾效果的网格单元处渲染出迷雾效果后，虚拟场景的展示界面中进行展示。在本申请实施例中，通过目标网格单元定位目标基础单元，实际上是对目标网格单元的上采样，而基于全局视野图确定该虚拟场景中对应迷雾效果的网格单元的过程，实际是对基础单元的下采样，也就是说，在本申请实施例中，计算机设备在视野和迷雾计算中，可以灵活的运用上采样的基础单元与下采样的网格单元来权衡精度与运算速度。请参考图15，其示出了本申请实施例涉及的视野及迷雾计算过程示意图。如图15所示，以一个正方形的网格单元划分为多个三角形的基础单元为例，该过程可以包括如下步骤：S1501，首先遍历场上角色来选取探索源，比如英雄、小兵、以及具有探索功能的子弹等。S1502，转换探索源的场景坐标至基础三角形索引，接着根据配置获取到最大视野范围内的所有三角形区域。S1503，使用最大视野范围与对应基础三角形预计算的障碍物遮罩相叠加，即可获得最终此探索源在网格中的可视基础三角网格。S1504，遍历可视基础三角网格进行点亮赋值，赋值数等价于点亮持续时长。S1505，每次主循环中，点亮的网格数值进行衰减，数值为0时即回归未点亮状态。S1506，获得整体的全局视野图，此图可以使用下采样方案，以网格单元为单位生成用于渲染迷雾的原始图来减少精度以提高运算速率，获取的渲染迷雾的原始图如图16所示，其中，白色区域1601即为非迷雾渲染区域，其余黑色区域为迷雾渲染区域。综上所述，本申请实施例所示的方案，预先按照网格单元对虚拟场景进行划分，再将网格单元进一步划分为至少两个基础单元，在确定虚拟场景中的视野范围时，首先确定探索源所在的网格单元，再基于探索源所在的网格单元，确定探索源所在的基础单元，并基于探索源所在的基础单元确定探索源的可视基础单元，而虚拟场景的场景画面是基于探索源的可视基础单元生成的，由于基础单元相比于网格单元来说尺寸更小，能够保证视野区域的边缘位置的精度，同时，由于在进行视野区域计算的过程中，在定位探索源所在的基础单元时采用了两级定位的方式，即首先定位到网格单元，然后在网格单元内进一步定位到基础单元，在此过程中，相比于直接从所有的基础单元中定位探索源所在的基础单元的方案来说，能够极大的简化定位的复杂度，进而简化视野区域计算的复杂度，因此，本申请实施例所示的方案能够在保证视野区域的计算效率的同时，提高视野区域的边缘位置的精度，进而提高游戏画面的展示效果。图17是本申请一个示例性实施例提供的虚拟场景的画面生成装置的结构框图，该装置可以用于执行如上述图1或图5所示的方法中的全部或者部分步骤。如图17所示，该装置包括：位置信息获取模块1701，用于获取探索源在虚拟场景中的位置信息；所述探索源是所述虚拟场景中，具有对应的视野距离的虚拟物；所述虚拟场景被划分为多个网格单元，并且，每个所述网格单元被划分为至少两个基础单元；所述基础单元中至少存在一条边，与所述网格单元中的各条边不平行；网格单元定位模块1702，用于基于所述探索源的位置信息，从多个所述网格单元中定位目标网格单元；所述目标网格单元是所述探索源所在的网格单元；目标基础单元定位模块1703，用于基于所述目标网格单元的位置信息，以及所述探索源的位置信息，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元；所述目标基础单元是所述探索源所在的基础单元；基础单元确定模块1704，用于基于所述视野距离，以及所述目标基础单元的位置信息，从所述目标基础单元周围的基础单元中，确定所述探索源对应的各个可视基础单元；画面生成模块1705，用于基于所述可视基础单元生成所述虚拟场景的场景画面；在所述场景画面中，处于所述可视基础单元中的指定虚拟对象为可见状态，所述指定虚拟对象是与所述探索源不属于同一阵营的虚拟对象。在一种可能的实现方式中，响应于所述网格单元是正方形网格，所述基础单元是以所述网格单元的两条对角线划分出的三角形网格，所述目标基础单元定位模块1703，用于，基于所述目标网格单元的位置信息，以及所述探索源的位置信息，获取所述探索源到所述目标网格单元的四条边的距离；基于所述探索源到所述目标网格单元的四条边的距离，从所述目标网格单元包含的至少两个基础单元中定位所述目标基础单元。在一种可能的实现方式中，基于所述探索源到所述目标网格单元的四条边的距离，从所述目标网格单元包含的至少两个基础单元中定位所述目标基础单元时，目标基础单元定位模块1703，用于，将所述探索源到所述目标网格单元的四条边的距离进行两两比较，获得所述探索源到所述目标网格单元的四条边的距离之间的大小关系；基于所述大小关系，从所述目标网格单元包含的至少两个基础单元中定位所述目标基础单元。在一种可能的实现方式中，响应于所述网格单元是正方形网格，所述基础单元是以所述正方形的中心点与所述正方形的各条边上的连线划分出的三角形网格，所述目标基础单元定位模块1703，用于，基于所述目标网格单元的位置信息，获取所述目标网格单元的中心点坐标；基于所述目标网格单元的中心点坐标，以及所述探索源的位置信息，获取连线夹角；所述连线夹角是所述目标网格单元的中心点与所述探索源之间的连线，与参考线之间的夹角；基于所述连线夹角，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元。在一种可能的实现方式中，响应于所述网格单元是正方形网格，所述基础单元是以所述正方形的中心点与所述正方形的各条边上的连线划分出的三角形网格，所述目标基础单元定位模块1703，用于，基于所述目标网格单元的位置信息，获取所述目标网格单元包含的至少两个基础单元各自的中心点的坐标；基于所述目标网格单元包含的至少两个基础单元各自的中心点的坐标，以及所述探索源的位置信息，获取所述目标网格单元包含的至少两个基础单元各自的中心点分别到所述探索源之间的距离；基于所述目标网格单元包含的至少两个基础单元各自的中心点分别到所述探索源之间的距离，从所述目标网格单元包含的至少两个基础单元中定位目标基础单元。在一种可能的实现方式中，所述基础单元确定模块1704，用于，基于所述视野距离，以及所述目标基础单元的位置信息，获取所述探索源的可视范围；遍历所述可视范围内的各个基础单元，确定所述可视基础单元。在一种可能的实现方式中，在基于所述视野距离，以及所述目标基础单元的位置信息，获取所述探索源的可视范围，基础单元确定模块1704，用于，获取所述虚拟场景中的各个障碍物的位置信息；基于所述视野距离、所述目标基础单元的位置信息、以及各个障碍物的位置信息，获取所述探索源的可视范围。在一种可能的实现方式中，所述装置还包括：赋值模块，用于在画面生成模块1705基于所述可视基础单元生成所述虚拟场景的场景画面之前，为所述可视基础单元设置状态赋值，所述状态赋值随时间递减；所述画面生成模块1705，用于响应于所述可视基础单元的状态赋值未递减至0，基于所述可视基础单元生成所述虚拟场景的场景画面。在一种可能的实现方式中，所述赋值模块，用于，响应于所述可视基础单元当前的状态赋值为0，将所述可视基础单元的状态赋值设置为初始值；响应于所述可视基础单元当前的状态赋值不为0，将所述可视基础单元的状态赋值重置为所述初始值。在一种可能的实现方式中，所述画面生成模块1705，用于，生成全局视野图；所述全局视野图用于指示所述虚拟场景中的各个基础单元是否处于可视状态；且所述可视基础单元在所述全局视野图中处于可视状态；基于所述全局视野图，生成所述虚拟场景的场景画面。在一种可能的实现方式中，所述装置还包括：网格单元确定模块，用于基于全局视野图，确定所述虚拟场景中对应迷雾效果的网格单元；迷雾渲染模块，用于基于所述虚拟场景中对应迷雾效果的网格单元，在所述虚拟场景的场景画面中渲染迷雾效果。在一种可能的实现方式中，所述网格单元确定模块，用于，基于所述全局视野图，获取第一网格单元中的至少两个基础单元的状态信息，所述状态信息用于指示对应的基础单元是否处于可视状态；所述第一网格单元是所述虚拟场景中的任意一个网格单元；响应于所述第一网格单元中不处于可视状态的基础单元的数量达到数量阈值，将所述第一网格单元确定为对应迷雾效果的网格单元。综上所述，本申请实施例所示的方案，预先按照网格单元对虚拟场景进行划分，再将网格单元进一步划分为至少两个基础单元，在确定虚拟场景中的视野范围时，首先确定探索源所在的网格单元，再基于探索源所在的网格单元，确定探索源所在的基础单元，并基于探索源所在的基础单元确定探索源的可视基础单元，而虚拟场景的场景画面是基于探索源的可视基础单元生成的，由于基础单元相比于网格单元来说尺寸更小，能够保证视野区域的边缘位置的精度，同时，由于在进行视野区域计算的过程中，在定位探索源所在的基础单元时采用了两级定位的方式，即首先定位到网格单元，然后在网格单元内进一步定位到基础单元，在此过程中，相比于直接从所有的基础单元中定位探索源所在的基础单元的方案来说，能够极大的简化定位的复杂度，进而简化视野区域计算的复杂度，因此，本申请实施例所示的方案能够在保证视野区域的计算效率的同时，提高视野区域的边缘位置的精度，进而提高游戏画面的展示效果。图18示出了本申请一个示例性实施例提供的计算机设备1800的结构框图。该计算机设备1800可以是终端，比如：智能手机、平板电脑、MP3播放器、MP4播放器、笔记本电脑或台式电脑等。通常，计算机设备1800包括有：处理器1801和存储器1802。处理器1801可以包括一个或多个处理核心，比如4核心处理器、8核心处理器等。处理器1801可以采用DSP、FPGA、PLA中的至少一种硬件形式来实现。存储器1802可以包括一个或多个计算机可读存储介质，该计算机可读存储介质可以是非暂态的。存储器1802还可包括高速随机存取存储器，以及非易失性存储器，比如一个或多个磁盘存储设备、闪存存储设备。在一些实施例中，存储器1802中的非暂态的计算机可读存储介质用于存储至少一个计算机程序/指令，该至少一个计算机程序/指令用于被处理器1801所执行以实现本申请中方法实施例提供的方法。在一些实施例中，计算机设备1800还可选包括有：外围设备接口1803和至少一个外围设备。处理器1801、存储器1802和外围设备接口1803之间可以通过总线或信号线相连。各个外围设备可以通过总线、信号线或电路板与外围设备接口1803相连。具体地，外围设备包括：射频电路1804、显示屏1805、摄像头组件1806、音频电路1807、定位组件1808和电源1809中的至少一种。外围设备接口1803可被用于将I/O相关的至少一个外围设备连接到处理器1801和存储器1802。射频电路1804用于接收和发射RF信号，也称电磁信号。射频电路1804通过电磁信号与通信网络以及其他通信设备进行通信。射频电路1804将电信号转换为电磁信号进行发送，或者，将接收到的电磁信号转换为电信号。显示屏1805用于显示UI。该UI可以包括图形、文本、图标、视频及其它们的任意组合。当显示屏1805是触摸显示屏时，显示屏1805还具有采集在显示屏1805的表面或表面上方的触摸信号的能力。该触摸信号可以作为控制信号输入至处理器1801进行处理。此时，显示屏1805还可以用于提供虚拟按钮和/或虚拟键盘，也称软按钮和/或软键盘。摄像头组件1806用于采集图像或视频。可选地，摄像头组件1806包括前置摄像头和后置摄像头。音频电路1807可以包括麦克风和扬声器。麦克风用于采集用户及环境的声波，并将声波转换为电信号输入至处理器1801进行处理，或者输入至射频电路1804以实现语音通信。扬声器可以是传统的薄膜扬声器，也可以是压电陶瓷扬声器。在一些实施例中，音频电路1807还可以包括耳机插孔。定位组件1808用于定位计算机设备1800的当前地理位置，以实现导航或LBS。定位组件1808可以是基于美国的GPS、中国的北斗系统或欧洲的伽利略系统的定位组件。电源1809用于为计算机设备1800中的各个组件进行供电。电源1809可以是交流电、直流电、一次性电池或可充电电池。在一些实施例中，计算机设备1800还包括有一个或多个传感器1810。该一个或多个传感器1810包括但不限于：加速度传感器1811、陀螺仪传感器1812、压力传感器1813、指纹传感器1814、光学传感器1815以及接近传感器1816。本领域技术人员可以理解，图18中示出的结构并不构成对计算机设备1800的限定，可以包括比图示更多或更少的组件，或者组合某些组件，或者采用不同的组件布置。本领域普通技术人员可以理解上述实施例的各种方法中的全部或部分步骤是可以通过程序来指令相关的硬件来完成，该程序可以存储于一计算机可读存储介质中，该计算机可读存储介质可以是上述实施例中的存储器中所包含的计算机可读存储介质；也可以是单独存在，未装配入终端中的计算机可读存储介质。该计算机可读存储介质中存储有至少一条计算机程序，所述至少一条计算机程序由处理器加载并执行以实现如本申请上述各个实施例所述的方法。可选地，该计算机可读存储介质可以包括：只读存储器、随机存取记忆体、固态硬盘或光盘等。其中，随机存取记忆体可以包括电阻式随机存取记忆体和动态随机存取存储器。上述本申请实施例序号仅仅为了描述，不代表实施例的优劣。本领域普通技术人员可以理解实现上述实施例的全部或部分步骤可以通过硬件来完成，也可以通过程序来指令相关的硬件完成，所述的程序可以存储于一种计算机可读存储介质中，上述提到的存储介质可以是只读存储器，磁盘或光盘等。在示例性实施例中，还提供了一种计算机程序产品或计算机程序，该计算机程序产品或计算机程序包括计算机指令，该计算机指令存储在计算机可读存储介质中。计算机设备的处理器从计算机可读存储介质读取该计算机指令，处理器执行该计算机指令，使得该计算机设备执行上述各个实施例所述的方法。本领域技术人员在考虑说明书及实践这里公开的方案后，将容易想到本申请的其它实施方案。本申请旨在涵盖本申请的任何变型、用途或者适应性变化，这些变型、用途或者适应性变化遵循本申请的一般性原理并包括本申请未公开的本技术领域中的公知常识或惯用技术手段。说明书和实施例仅被视为示例性的，本申请的保护范围由权利要求指出。应当理解的是，本申请并不局限于上面已经描述并在附图中示出的精确结构/方案，并且可以在不脱离其范围进行各种修改和改变。本申请的范围由所附的权利要求来限制。
