标题title
心动周期时相检测方法、装置及计算机程序产品
摘要abst
本申请提出了一种心动周期时相检测方法，该方法包括获取待检测图像序列，所述待检测图像序列包括一次采集得到的多个待检测图像，且所述待检测图像按照采集时间顺序排列；将所述待检测图像序列输入心动周期时相检测模型，输出所述待检测图像序列中每一所述待检测图像对应的心动周期时相。该方法通过训练以时间序列深度神经网络为基础的心动周期时相检测模型，实现对没有同步采集心电信号的冠脉造影序列中的每一冠脉造影图像自动进行心动周期时相的预测，只依赖顺序采集的冠脉造影图像，无需额外采集同步的心电信号，使检测结果更加客观、可靠，减少对医生过往经验的依赖性，降低误诊率。
权利要求书clms
1.心动周期时相检测方法，其特征在于，包括以下步骤：步骤S1：获取待检测图像序列，所述待检测图像序列包括一次采集得到的多个待检测图像，且所述待检测图像按照采集时间顺序排列；步骤S2：将所述待检测图像序列输入心动周期时相检测模型，输出所述待检测图像序列中每一所述待检测图像对应的心动周期时相。2.根据权利要求1所述的心动周期时相检测方法，其特征在于，所述心动周期时间检测模型的构建方法包括以下步骤：步骤S21：获取多个样本图像序列，所述样本图像序列包括一次采集得到的多个样本图像，且每一所述样本图像序列对应一组心电信号，所述样本图像按照对应的心电信号顺序排列；步骤S22：根据所述样本图像序列中所述样本图像与所述心电信号的对应关系，标注所述样本图像对应的心动周期时相；步骤S23：将所述样本图像序列输入所述心动周期时相检测模型进行训练，得到心动周期时相检测模型，其中所述心动周期时相检测模型以时间序列深度神经网络为基础。3.根据权利要求2所述的心动周期时相检测方法，其特征在于，步骤S21还包括：去除所述样本图像序列中血管不可见的样本图像。4.根据权利要求2所述的心动周期时相检测方法，其特征在于，步骤S22中还包括：选择一种或多种关注心动周期时相，根据所述关注心动周期时相标注所述样本图像对应的心动周期时相。5.根据权利要求4所述的心动周期时相检测方法，其特征在于，所述关注心动周期时相为等容收缩期、快速射血期、减慢射血期、舒张前期、等容舒张期、快速充盈期、减慢充盈期以及心室收缩期中的至少一种。6.根据权利要求4所述的心动周期时相检测方法，其特征在于，所述关注心动周期时相为心室收缩期和/或舒张前期；将对应心电信号QRS波前的样本图像标记为心室收缩期；将对应心电信号T波前的样本图像标记为舒张前期。7.根据权利要求1所述的心动周期时相检测方法，其特征在于，所述待检测图像序列为有心电门控信号的冠脉造影图像序列。8.心动周期时相检测装置，其特征在于，包括以下模块：获取模块，获取待检测图像序列，所述待检测图像序列包括一次采集得到的多个待检测图像，且所述待检测图像按照采集时间顺序排列；检测模块，用于将所述待检测图像序列输入心动周期时相检测模型，输出所述待检测图像序列中每一所述待检测图像对应的心动周期时相。9.一种电子装置，包括存储器和处理器，其特征在于，所述存储器中存储有计算机程序，所述处理器被设置为运行所述计算机程序以执行权利要求1至6任一所述的心动周期时相检测方法。10.一种计算机程序产品，其特征在于，包括软件代码部分，当所述计算机程序产品在计算机上被运行时，所述代码软件部分用于执行根据权利要求1至6任一项所述的心动周期时相检测方法。11.一种可读存储介质，其特征在于，所述可读存储介质中存储有计算机程序，所述计算机程序包括用于控制过程以执行过程的程序代码，所述过程包括根据权利要求1至6任一项所述的心动周期时相检测方法。
说明书desc
技术领域本申请涉及智慧医疗领域，特别是涉及一种心动周期时相检测方法、装置及计算机程序产品。背景技术精准诊断是现代医疗发展的要求和方向。冠状动脉造影在心血管疾病的诊断与治疗中发挥着重要作用。血管狭窄程度、病变长度、管腔面积等病变的定量信息依赖于对血管直径等参数的精确测量，后续的治疗决策也基于这些定量分析参数。受心脏周期性搏动的影响，冠状动脉发生周期性位移，同时也会发生周期性的搏动。因此，当冠脉造影连续性成像时，冠脉造影序列中的血管位置和管径也会随之发生周期性的变化。如果在心动周期的不同时相进行造影图像的定量分析就会造成差异。因此，在冠脉造影的判读时，需要选择变异性最小的心动周期时相进行测量。在临床实践中，对冠脉造影序列中的图像进行心动周期时相判断主要包括：人工判断。以临床上冠脉造影定量分析为例，分析者浏览整个冠脉造影图像序列，根据经验判断对应于特定心动周期时相的图像，然后基于这幅图像进行分析测量；但即使是有经验的医师一般只能判断出心室收缩期或舒张前期等特点鲜明的心动周期时相，且容易出现误判，增加分析结果的变异性和患者的医疗成本。在冠脉造影成像的同时采集心电信号，得到对应冠脉造影序列的心电信号组，将冠脉造影序列中的图像与心电信号中的时相一一对应，即心电门控的冠脉造影序列。但该方法不仅增加了额外的心电测量步骤和时间，对设备和操作人员要求高，且无法识别没有同步采集心电信号的冠脉造影图像对应的心动周期时相。发明内容本申请实施例提供了一种心动周期时相检测方法、装置及计算机程序产品，通过训练以时间序列深度神经网络为基础的心动周期时相检测模型，实现对没有同步采集心电信号的冠脉造影序列中的每一帧冠脉造影图像自动进行心动周期时相的预测。第一方面，本申请实施例提供了一种心动周期时相检测方法包括以下步骤：步骤S1：获取待检测图像序列，所述待检测图像序列包括一次采集得到的多个待检测图像，且所述待检测图像按照采集时间顺序排列；步骤S2：将所述待检测图像序列输入心动周期时相检测模型，输出所述待检测图像序列中每一所述待检测图像对应的心动周期时相。特别的，在一些申请实施例中，所述心动周期时相检测模型还可以根据所述待检测图像序列模拟出对应的心电信号。具体的，在一些申请实施例中，所述心动周期时间检测模型的构建方法包括以下步骤：步骤S21：获取多个样本图像序列，所述样本图像序列包括一次采集得到的多个样本图像，且每一所述样本图像序列对应一组心电信号，所述样本图像按照对应的心电信号顺序排列，即：待检测图像序列为有心电门控信号的冠脉造影图像序列；步骤S22：根据所述样本图像序列中所述样本图像与所述心电信号的对应关系，标注所述样本图像对应的心动周期时相；步骤S23：将所述样本图像序列输入所述心动周期时相检测模型进行训练，得到心动周期时相检测模型，其中所述心动周期时相检测模型以时间序列深度神经网络为基础。其中，为了筛除掉无用的样本图像，步骤S21还包括：去除所述样本图像序列中血管不可见的样本图像。并且，可以根据需要关注的心动周期时相，准备对应的样本图像。因此，在一些申请实施例中，步骤S22中还包括：选择一种或多种关注心动周期时相，根据所述关注心动周期时相标注所述样本图像对应的心动周期时相。其中，所述关注心动周期时相为等容收缩期、快速射血期、减慢射血期、舒张前期、等容舒张期、快速充盈期、减慢充盈期以及心室收缩期中的至少一种。在一些申请实施例中，当所述关注心动周期时相为心室收缩期和/或舒张前期；将对应心电信号QRS波前的样本图像标记为心室收缩期；将对应心电信号T波前的样本图像标记为舒张前期。第二方面，本申请实施例提供了一种心动周期时相检测装置，用于实现第一方面中所述的心动周期时相检测方法，该装置包括以下模块：获取模块，获取待检测图像序列，所述待检测图像序列包括一次采集得到的多个待检测图像，且所述待检测图像按照采集时间顺序排列；检测模块，用于将所述待检测图像序列输入心动周期时相检测模型，输出所述待检测图像序列中每一所述待检测图像对应的心动周期时相。第三方面，本申请实施例提供了一种电子装置，包括存储器和处理器，所述存储器中存储有计算机程序，所述处理器被设置为运行所述计算机程序以如上任意申请实施例所述的心动周期时相检测方法。第四方面，本申请实施例提供了一种计算机程序产品，所述计算机程序产品包括：程序或指令，当所述程序或指令在计算机上运行时，使得所述计算机执行如上任意申请实施例所述的心动周期时相检测方法。第五方面，本申请实施例提供了一种可读存储介质，所述可读存储介质中存储有计算机程序，所述计算机程序包括用于控制过程以执行过程的程序代码，所述过程包括根据如上任意申请实施例所述的心动周期时相检测方法。本申请实施例的主要贡献和创新点如下：本申请实施例提供了一种心动周期时相检测方法、装置及计算机程序产品，通过训练以时间序列深度神经网络为基础的心动周期时相检测模型，实现对没有同步采集心电信号的冠脉造影序列中的每一冠脉造影图像自动进行心动周期时相的预测。特别的是，本申请只依赖顺序采集的冠脉造影图像，无需额外采集同步的心电信号，使检测结果更加客观、可靠，减少对医生过往经验的依赖性，降低误诊率。并且，该模型还可以根据冠脉造影序列模拟出对应的心电信号作为诊断时的参考数据。本申请的一个或多个实施例的细节在以下附图和描述中提出，以使本申请的其他特征、目的和优点更加简明易懂。附图说明此处所说明的附图用来提供对本申请的进一步理解，构成本申请的一部分，本申请的示意性实施例及其说明用于解释本申请，并不构成对本申请的不当限定。在附图中：图1是根据本申请实施例的心动周期时相检测方法的流程图；图2是根据本申请实施例的心动周期时相检测装置的结构框图；图3是根据本申请实施例的电子装置的硬件结构示意图。具体实施方式这里将详细地对示例性实施例进行说明，其示例表示在附图中。下面的描述涉及附图时，除非另有表示，不同附图中的相同数字表示相同或相似的要素。以下示例性实施例中所描述的实施方式并不代表与本说明书一个或多个实施例相一致的所有实施方式。相反，它们仅是与如所附权利要求书中所详述的、本说明书一个或多个实施例的一些方面相一致的装置和方法的例子。需要说明的是：在其他实施例中并不一定按照本说明书示出和描述的顺序来执行相应方法的步骤。在一些其他实施例中，其方法所包括的步骤可以比本说明书所描述的更多或更少。此外，本说明书中所描述的单个步骤，在其他实施例中可能被分解为多个步骤进行描述；而本说明书中所描述的多个步骤，在其他实施例中也可能被合并为单个步骤进行描述。实施例一本实施例提供了一种心动周期时相检测方法，在本实施例中，该方法通过获取大量冠脉造影序列作为样本序列，并根据其对应的心电信号将序列中每一冠脉造影图像标注上对应的心动周期时相，输入构建的心动周期时相检测模型中进行训练，得到心动周期时相检测模型，该模型可以根据输入的冠脉造影序列输入其中每一冠脉造影图像对应的心动周期时相。具体地，参考图1，所述方法包括步骤S1-S2：步骤S1：获取待检测图像序列，所述待检测图像序列包括多个待检测图像；且所述待检测图像按照对应的心电信号排序。在该步骤中，通过冠脉造影成像的方法，获取同一人在一段时间内连续的冠脉造影图像，按照采集冠脉造影图像的时间将其顺序排列得到图像序列作为待检测图像序列。步骤S2：将所述待检测图像序列输入心动周期时相检测模型，输出所述待检测图像序列中每一所述待检测图像对应的心动周期时相。在该步骤中，将待检测图像序列输入心动周期时相检测模型中，该模型对待检测图像序列中的每一待检测图像进行识别，预测出每一待检测图像对应的心动周期时相。具体的，该模型是由一种基于深度神经网络的时间序列模型训练得到的，该模型可以根据图像序列进行分类预测。也就是说，是按照时间顺序记录的图像序列，该数据列在本实施例中，相当于按照采集时间顺序排列的待检测图像组成的待检测图像序列。这样做的好处是，时间序列模型根据已有的历史训练数据反映按照采集时间顺序采集的冠脉造影图像存在的变化趋势和规律，分析待检测图像序列，为将待检测图像序列中每一待检测图像进行分类提供数据支持，以更准确地预测按照时间顺序记录的待检测图像序列中每一待检测图像对应的心动周期时相。训练心动周期时相检测模型的方法包括步骤S21-S23：步骤S21：获取多个样本图像序列，所述样本图像序列包括多个样本图像，且每一所述样本图像序列对应一组心电信号，所述样本图像按照对应的心电信号顺序排列；步骤S22：根据所述样本图像序列中所述样本图像与所述心电信号的对应关系，标注所述样本图像对应的心动周期时相；步骤S23：将所述样本图像序列输入所述心动周期时相检测模型进行训练，得到心动周期时相检测模型，其中所述心动周期时相检测模型以时间序列深度神经网络为基础。在步骤S21中，样本图像序列同样是同一人在一段时间内采集到的连续的冠脉造影图像，不同的样本图像序列可以采集自同一人，也可以采集自不同人，为了提高网络的泛华性和鲁棒性，不同的样本图像通常采集自不同人。在采集冠脉造影图像的同时，使用心电测量设备获取冠脉造影图像同时刻对应的心电信号得到，得到对应该样本图像序列的心电信号组。也就是说，样本图像序列中的所有样本图像都能与对应的心电信号组中的心电信号一一对应，且样本图像序列中的样本图像都按照采集时间排列。进一步的，样本图像序列还可以分为用作训练的训练图像序列和用作测试的测试图像序列。特别的，由于通常的冠脉造影方法是用一根细如发丝的导管沿着桡动脉手腕处或股动脉大腿处的人为入口延行到心脏的冠状动脉开口处，然后把造影剂在X光下显影注入冠状动脉，这样冠状动脉内部的形态就可以显示出来，还可以观察到冠状动脉的血管情况。并且，一般冠脉造影成像帧频小于30HZ，从造影剂开始灌注至完全消退的整个成像时间因人而异，但一般会占2到3个心动周期，而心电信号采集频率可达300-400HZ，远远高于冠脉造影成像帧频。因此，在一些样本图像序列中的部分样本图像是没有显现出血管的，所以在一些实施例中，会去除样本图像序列中血管不可见的样本图像。在步骤S22中，根据步骤S21中描述的样本图像与心电信号的对应关系，对样本图像序列中的每一样本图像都标注对应的心动周期时相。心动周期是指一次心跳的起始到下一次心跳的起始，心血管系统所经历的过程，也就是说，心脏每收缩和舒张一次构成一个心动周期，一般每一心动周期为0.8秒，其中收缩期为0.11秒，其余均为舒张期。如果心动周期各时相心室内压、心室容积、血流与瓣膜活动的变化如以心室的舒缩活动为中心，整个心动周期按还可以按照8个主要时相进行活动，该8个心动周期时相分别为：等容收缩期、快速射血期、减慢射血期、舒张前期、等容舒张期、快速充盈期、减慢充盈期以及心室收缩期，其中，舒张前期也称为收缩末期，心室收缩期也称为舒张末期。也就是说，具体的样本图像标注策略可以根据检测需求制定。在一些实施例中可对样本图像序列中的样本图像按照上述8个心动周期时相进行标注，最后训练得到的心动周期检测模型就可以用于预测待检测图像序列中每一待检测图像对应的上述8个心动周期时相之一。在另外一些实施例中，只需要关注某一心动周期时相或某几个心动周期时相作为关注心动周期时相，那么就将对应上述关注心动周期时相的样本图像相应标记，其余图像不明确标注对应的心动周期时相，可统一标注为“其他”。这样的好处是，可以减少训练需要的样本图像序列数量，减少大量的标注工作，特别是预测精度相比需要预测所有的心动周期时相更高。例如，如果关注心动周期时相为舒张前期和心室收缩期，那么将同一样本图像序列中，对应舒张前期和对应心室收缩期的样本图像进行明确标注，其他的样本图像标注为“其他”。同理的，如果只关注某一心动周期时相，只需将样本图像序列中相对应的样本图像明确标注即可。具体的，可以将同一样本图像序列中，对应心电信号QRS波前的样本图像标注为心室收缩期，对应心电信号T波前的样本图像标注为舒张前期。在步骤S23中，心动周期时相检测模型是以时间序列深度神经网络为基础，将已经标注的样本图像序列输入该模型中进行训练，最终得到用于检测冠脉造影序列中每一冠脉造影图像对应的心动周期时相的心动周期时相检测模型，也就是本实施例中的心动周期时相检测模型。将待检测图像序列输入已训练的心动周期时相检测模型中，可以待检测图像序列中的待检测图像对应预测为训练时标注的一种或多种心动周期时相。例如，关注心动周期时相为舒张前期和心室收缩期，那么将待检测图像序列输入该心动周期时相检测模型中，最终输出待检测图像序列中每一图像对应的心动周期时相，其中检测结果一共有3种：预测为心室舒张期的图像、预测为心室收缩期的图像以及其他图像。另外，本实施例可作为一个单独的软件模块，进行冠脉造影图像的后处理图像分析，也可以与冠脉造影成像硬件系统相结合，在成像过程中实时给出冠脉造影图像对应心动周期时相信息。实施例二基于相同的构思，本实施例还提供了一种心动周期时相检测装置，用于实现实施例一中所描述的心动周期时相检测方法，具体参考图2，图2是根据本申请实施例的心动周期时相检测装置的结构框图，如图2所示，该装置包括：获取模块，获取待检测图像序列，所述待检测图像序列包括一次采集得到的多个待检测图像，且所述待检测图像按照采集时间顺序排列；检测模块，用于将所述待检测图像序列输入心动周期时相检测模型，输出所述待检测图像序列中每一所述待检测图像对应的心动周期时相。实施例三本实施例还提供了一种电子装置，参考图3，包括存储器404和处理器402，该存储器404中存储有计算机程序，该处理器402被设置为运行计算机程序以执行上述实施例一中的任意一种心动周期时相检测方法的步骤。具体地，上述处理器402可以包括中央处理器，或者特定集成电路，或者可以被配置成实施本申请实施例的一个或多个集成电路。其中，存储器404可以包括用于数据或指令的大容量存储器404。举例来说而非限制，存储器404可包括硬盘驱动器、软盘驱动器、固态驱动器、闪存、光盘、磁光盘、磁带或通用串行总线驱动器或者两个或更多个以上这些的组合。在合适的情况下，存储器404可包括可移除或不可移除的介质。在合适的情况下，存储器404可包括可移除或不可移除的介质。在合适的情况下，存储器404可在数据处理装置的内部或外部。在特定实施例中，存储器404是非易失性存储器。在特定实施例中，存储器404包括只读存储器和随机存取存储器。在合适的情况下，该ROM可以是掩模编程的ROM、可编程ROM、可擦除PROM、电可擦除PROM、电可改写ROM或闪存或者两个或更多个以上这些的组合。在合适的情况下，该RAM可以是静态随机存取存储器或动态随机存取存储器，其中，DRAM可以是快速页模式动态随机存取存储器404、扩展数据输出动态随机存取存储器、同步动态随机存取内存等。存储器404可以用来存储或者缓存需要处理和/或通信使用的各种数据文件，以及处理器402所执行的可能的计算机程序指令。处理器402通过读取并执行存储器404中存储的计算机程序指令，以实现上述实施例中的任意一种数据入库方法。可选地，上述电子装置还可以包括传输设备406以及输入输出设备408，其中，该传输设备406和上述处理器402连接，该输入输出设备408和上述处理器402连接。传输设备406可以用来经由一个网络接收或者发送数据。上述的网络具体实例可包括电子装置的通信供应商提供的有线或无线网络。在一个实例中，传输设备包括一个网络适配器，其可通过基站与其他网络设备相连从而可与互联网进行通讯。在一个实例中，传输设备406可以为射频模块，其用于通过无线方式与互联网进行通讯。输入输出设备408用于输入或输出信息。在本实施例中，输入的信息可以是当前数据表例如疫情流调文档、特征数据、模板表等，输出的信息可以是特征指纹、指纹模板、文本分类推荐信息、文件模板配置映射表、文件模板配置信息表等。可选地，在本实施例中，上述处理器402可以被设置为通过计算机程序执行以下步骤：步骤S1：获取待检测图像序列，所述待检测图像序列包括一次采集得到的多个待检测图像，且所述待检测图像按照采集时间顺序排列；步骤S2：将所述待检测图像序列输入心动周期时相检测模型，输出所述待检测图像序列中每一所述待检测图像对应的心动周期时相。需要说明的是，本实施例中的具体示例可以参考上述实施例及可选实施方式中所描述的示例，本实施例在此不再赘述。另外，结合上述实施例一中的任意一种心动周期时相检测方法，本申请实施例可一种计算机程序产品来实现。该计算机程序产品包括：程序或指令，当所述程序或指令在计算机上运行时，使得所述计算机执行实现上述实施例一中的任意一种心动周期时相检测方法的步骤。并且，结合上述实施例一中的任意一种心动周期时相检测方法，本申请实施例可提供一种可读存储介质来实现。该可读存储介质上存储有计算机程序；该计算机程序被处理器执行时实现上述实施例一中的任意一种心动周期时相检测方法的步骤。通常，各种实施例可以以硬件或专用电路、软件、逻辑或其任何组合来实现。本发明的一些方面可以以硬件来实现，而其他方面可以以可以由控制器、微处理器或其他计算设备执行的固件或软件来实现，但是本发明不限于此。尽管本发明的各个方面可以被示出和描述为框图、流程图或使用一些其他图形表示，但是应当理解，作为非限制性示例，本文中描述的这些框、装置、系统、技术或方法可以以硬件、软件、固件、专用电路或逻辑、通用硬件或控制器或其他计算设备或其某种组合来实现。本发明的实施例可以由计算机软件来实现，该计算机软件由移动设备的数据处理器诸如在处理器实体中可执行，或者由硬件来实现，或者由软件和硬件的组合来实现。包括软件例程、小程序和/或宏的计算机软件或程序可以存储在任何装置可读数据存储介质中，并且它们包括用于执行特定任务的程序指令。计算机程序产品可以包括当程序运行时被配置为执行实施例的一个或多个计算机可执行组件。一个或多个计算机可执行组件可以是至少一个软件代码或其一部分。另外，在这一点上，应当注意，如图中的逻辑流程的任何框可以表示程序步骤、或者互连的逻辑电路、框和功能、或者程序步骤和逻辑电路、框和功能的组合。软件可以存储在诸如存储器芯片或在处理器内实现的存储块等物理介质、诸如硬盘或软盘等磁性介质、以及诸如例如DVD及其数据变体、CD等光学介质上。物理介质是非瞬态介质。本领域的技术人员应该明白，以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对本申请范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请的保护范围应以所附权利要求为准。
