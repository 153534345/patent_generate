标题title
基于生物特征交互的音乐解锁方法及电子设备
摘要abst
本发明提供一种基于生物特征交互的音乐解锁方法及电子设备，通过人脸分析算法对所获取的人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征，并将获取的心率信号转换为心率数据；再对多级表情情绪特征进行映射处理以形成表情情绪特征编码，对心率数据进行有效计算以获取心率情绪特征编码；而后对表情情绪特征编码与心率情绪特征编码进行融合计算以获取多级情绪序列编码；再将多级情绪序列编码与情绪‑音乐映射表相对比以获取相对应的目标音乐即结合视觉和心率双模态生理信号，构造多级情绪时序变化特征序列，并结合多级情绪序列编码与音乐之间的映射，如此，为用户播放更接近于用户当前一段时间内情绪状态下的音乐。
权利要求书clms
1.一种基于生物特征交互的音乐解锁方法，其特征在于，包括：基于用户的音乐需求获取所述用户的人脸图像和心率信号；通过人脸分析算法对所述人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征，并通过心率逻辑运行函数将所述心率信号转换为心率数据；对所述多级表情情绪特征进行映射处理以形成表情情绪特征编码，对所述心率数据进行有效计算以获取心率情绪特征编码；对所述表情情绪特征编码与所述心率情绪特征编码进行融合计算以获取多级情绪序列编码；将所述多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与所述多级情绪序列编码相对应的目标音乐，并解锁或播放所述目标音乐。2.如权利要求1所述的基于生物特征交互的音乐解锁方法，其特征在于，基于用户的音乐需求获取所述用户的人脸图像和心率信号的过程，包括：通过处理器将获取的音乐需求转换为图像采集请求和心率采集请求；将所述图像采集请求传输至人脸图像信息采集模块使所述人脸图像信息采集模块通过预设的摄像头采集用户的人脸图像，将所述心率采集请求传输至心率信息采集模块，使所述心率信息采集模块通过心率传感器获取用户的心率信号。3.如权利要求2所述的基于生物特征交互的音乐解锁方法，其特征在于，通过人脸分析算法对所述人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征的过程，包括：通过基于72点人脸采集点的人脸分析算法对所述人脸图像进行表情识别以获取表情帧集合；对所述表情帧集合进行表情过滤以删除连续重复表情，获取具有时序变化的多级表情序列；对所述多级表情序列进行信息提取以获取多级表情情绪特征。4.如权利要求3所述的基于生物特征交互的音乐解锁方法，其特征在于，对所述多级表情情绪特征进行映射处理以形成表情情绪特征编码的过程，包括：将所述多级表情情绪特征中所包含的关于每一个表情帧的信息与预设的表情-编码表相对应，以获取与所述每一个表情帧相对应的数字，并按照所述多级表情序列的时序对所述数字进行顺序排列以生成表情情绪特征编码。5.如权利要求4所述的基于生物特征交互的音乐解锁方法，其特征在于，通过心率逻辑运行函数将所述心率信号转换为心率数据的过程，包括：定义与所述心率信息采集模块的IIC地址和心率信息通道，并编写心率逻辑运行函数存储至所述心率信息采集模块中；通过所述心率逻辑运行函数将在预设时刻采集的心率信号转换为心率数据；转换公式如下：其中，表示转换后的t时刻的心率数据；表示t时刻的心率信号。6.如权利要求5所述的基于生物特征交互的音乐解锁方法，其特征在于，对所述心率数据进行有效计算以获取心率情绪特征编码的过程，包括：获取所述心率数据在预设时间内的平均值，并将所述平均值作为有效心率；将所述有效心率与预设的心率阈值相比较以获取心率情绪特征编码；其中，若所述有效心率大于所述心率阈值，则将所述心率情绪特征编码记为1，若所述有效心率低于所述心率阈值，则将所述心率情绪特征编码记为0。7.如权利要求6所述的基于生物特征交互的音乐解锁方法，其特征在于，对所述表情情绪特征编码与所述心率情绪特征编码进行融合计算以获取多级情绪序列编码的公式为：其中，代表多级情绪序列编码；代表表情情绪特征编码；代表心率情绪特征编码。8.如权利要求7所述的基于生物特征交互的音乐解锁方法，其特征在于，将所述多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与所述多级情绪序列编码相对应的目标音乐，并解锁或播放所述目标音乐的过程，包括：将所述多级情绪序列编码与预设的情绪-音乐映射表相对比查看在所述情绪-音乐映射表中是否包含与所述多级情绪序列编码相对应的类型的音乐；其中，若所述情绪-音乐映射表中包含与所述多级情绪序列编码相对应的类型的音乐，则将与所述多级情绪序列编码相对应的类型的音乐作为目标音乐，并判断所述目标音乐是否被解锁，若已解锁，则播放所述目标音乐，若未解锁，则对所述目标音乐加入解锁目录，且播放所述目标音乐；若所述情绪-音乐映射表中未包含与所述多级情绪序列编码相对应的类型的音乐，则发出表情未识别提示，并打开预设的随机路径，将所述随机路径中的音乐作为目标音乐进行播放。9.一种基于生物特征交互的音乐解锁电子设备，其特征在于，实现权利要求1-8任一所述的基于生物特征交互的音乐解锁方法，包括人脸图像信息采集模块、心率信息采集模块、辅助模块、主控模块和扬声器模块；其中，所述人脸图像信息采集模块用于获取所述用户的人脸图像；所述心率信息采集模块用于获取所述用户的心率信号；所述辅助模块包括存储单元和连接线；所述主控模块通过所述连接线与所述存储单元相连接，所述主控模块包括处理器；其中，所述处理器包括：请求处理单元，用于获取用户的音乐需求，将所述音乐需求转换为图像采集请求和心率采集请求，并将所述图像采集请求和心率采集请求分别发送至所述人脸图像信息采集模块、所述心率信息采集模块处，以使所述人脸图像信息采集模块、所述心率信息采集模块向所述处理器响应所述人脸图像和所述心率信号；情绪构造单元，用于通过人脸分析算法对所述人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征，并通过心率逻辑运行函数将所述心率信号转换为心率数据；情绪编码单元，用于对所述多级表情情绪特征进行映射处理以形成表情情绪特征编码，对所述心率数据进行有效计算以获取心率情绪特征编码；融合映射单元，用于对所述表情情绪特征编码与所述心率情绪特征编码进行融合计算以获取多级情绪序列编码，并将所述多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与所述多级情绪序列编码相对应的目标音乐；所述扬声器模块用于播放所述目标音乐。10.如权利要求9所述的基于生物特征交互的音乐解锁电子设备，其特征在于，所述人脸图像信息采集模块至少包括摄像头和数据线；所述摄像头为MIPI CSI摄像头；所述数据线至少包括CSI Transmitter数据线。
说明书desc
技术领域本发明涉及媒体推荐技术领域，更为具体地，涉及一种基于生物特征交互的音乐解锁方法及电子设备。背景技术随着用户个性化需求提高和计算机技术的发展，以用户为中心的新型个性化推荐方法受到越来越多研究者的关注。其中，在音乐推荐领域，大多数现有的音乐推荐系统都使用协作式或基于内容的推荐引擎。然而，用户的音乐选择不仅取决于历史偏好或音乐内容，也取决于用户当前的情绪。因此，近年来具有情感意识的音乐推荐算法受到越来越多的关注。多模态情绪分析技术的发展源于现实生活的需求,人们可以通过词语、动作表情、语调变化等自然表达方式传递自己的情绪情感，相互理解相互交流，因此对于计算机而言，也应赋予其相应的智能理解和分析能力。近些年的多通道情绪分析主要通过深度学习对单通道内部信息以及不同通道间的相互关系进行建模。其中人脸信息和心率信息，是多通道情绪分析中的两类主要模态信息。早期基于人脸表情进行情绪识别大多基于卷积神经网络模型，然而，基于CNN的情绪识别方法存在受环境干扰大等缺点，不再适用于精准度较高的音乐推荐方法；并且现有的现有智能音箱以及音乐播放软件，主要采取用户自主选择音乐播放清单，存在交互方式单一、交互过程缺乏探索性、趣味性等问题，而且不具有情感意识，未考虑用户的情感偏好，即使考虑感情偏好，其音乐推荐算法也大多以离散的方式表征用户单一时刻的情绪状态，未考虑用户情绪的时序变化；并且通过人的面部表情分析人的情感，是最基础、直观的基于生理信号的情感分析方法，其优点是分析模型容易构造，但是基于人的面部表情分析的缺点主要在于人可以做到人脸表情与实际情绪表里不一而导致的分析错误。因此，亟需一种提高音乐推荐系统的趣味性、智能性和准确性，准确把握用户的真实需求的基于生物特征交互的音乐解锁方法及电子设备。发明内容鉴于上述问题，本发明的目的是提供一种基于生物特征交互的音乐解锁方法及电子设备，以解决现有的现有智能音箱以及音乐播放软件，主要采取用户自主选择音乐播放清单，存在交互方式单一、交互过程缺乏探索性、趣味性等问题，而且不具有情感意识，未考虑用户的情感偏好，即使考虑感情偏好，其音乐推荐算法也大多以离散的方式表征用户单一时刻的情绪状态，未考虑用户情绪的时序变化的问题。本发明提供的一种基于生物特征交互的音乐解锁方法，包括：基于用户的音乐需求获取所述用户的人脸图像和心率信号；通过人脸分析算法对所述人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征，并通过心率逻辑运行函数将所述心率信号转换为心率数据；对所述多级表情情绪特征进行映射处理以形成表情情绪特征编码，对所述心率数据进行有效计算以获取心率情绪特征编码；对所述表情情绪特征编码与所述心率情绪特征编码进行融合计算以获取多级情绪序列编码；将所述多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与所述多级情绪序列编码相对应的目标音乐，并解锁或播放所述目标音乐。优选地，基于用户的音乐需求获取所述用户的人脸图像和心率信号的过程，包括：通过处理器将获取的音乐需求转换为图像采集请求和心率采集请求；将所述图像采集请求传输至人脸图像信息采集模块使所述人脸图像信息采集模块通过预设的摄像头采集用户的人脸图像，将所述心率采集请求传输至心率信息采集模块，使所述心率信息采集模块通过心率传感器获取用户的心率信号。优选地，通过人脸分析算法对所述人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征的过程，包括：通过基于72点人脸采集点的人脸分析算法对所述人脸图像进行表情识别以获取表情帧集合；对所述表情帧集合进行表情过滤以删除连续重复表情，获取具有时序变化的多级表情序列；对所述多级表情序列进行信息提取以获取多级表情情绪特征。优选地，对所述多级表情情绪特征进行映射处理以形成表情情绪特征编码的过程，包括：将所述多级表情情绪特征中所包含的关于每一个表情帧的信息与预设的表情-编码表相对应，以获取与所述每一个表情帧相对应的数字，并按照所述多级表情序列的时序对所述数字进行顺序排列以生成表情情绪特征编码。优选地，通过心率逻辑运行函数将所述心率信号转换为心率数据的过程，包括：定义与所述心率信息采集模块的IIC地址和心率信息通道，并编写心率逻辑运行函数存储至所述心率信息采集模块中；通过所述心率逻辑运行函数将在预设时刻采集的心率信号转换为心率数据；转换公式如下：其中， 表示转换后的t时刻的心率数据；表示t时刻的心率信号。优选地，对所述心率数据进行有效计算以获取心率情绪特征编码的过程，包括：获取所述心率数据在预设时间内的平均值，并将所述平均值作为有效心率；将所述有效心率与预设的心率阈值相比较以获取心率情绪特征编码；其中，若所述有效心率大于所述心率阈值，则将所述心率情绪特征编码记为1，若所述有效心率低于所述心率阈值，则将所述心率情绪特征编码记为0。优选地，对所述表情情绪特征编码与所述心率情绪特征编码进行融合计算以获取多级情绪序列编码的公式为：其中，代表多级情绪序列编码；代表表情情绪特征编码；代表心率情绪特征编码。优选地，将所述多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与所述多级情绪序列编码相对应的目标音乐，并解锁或播放所述目标音乐的过程，包括：将所述多级情绪序列编码与预设的情绪-音乐映射表相对比查看在所述情绪-音乐映射表中是否包含与所述多级情绪序列编码相对应的类型的音乐；其中，若所述情绪-音乐映射表中包含与所述多级情绪序列编码相对应的类型的音乐，则将与所述多级情绪序列编码相对应的类型的音乐作为目标音乐，并判断所述目标音乐是否被解锁，若已解锁，则播放所述目标音乐，若未解锁，则对所述目标音乐加入解锁目录，且播放所述目标音乐；若所述情绪-音乐映射表中未包含与所述多级情绪序列编码相对应的类型的音乐，则发出表情未识别提示，并打开预设的随机路径，将所述随机路径中的音乐作为目标音乐进行播放。另一方面，本发明还提供一种基于生物特征交互的音乐解锁电子设备，实现如前所述的基于生物特征交互的音乐解锁方法，包括人脸图像信息采集模块、心率信息采集模块、辅助模块、主控模块和扬声器模块；其中，所述人脸图像信息采集模块用于获取所述用户的人脸图像；所述心率信息采集模块用于获取所述用户的心率信号；所述辅助模块包括存储单元和连接线；所述主控模块通过所述连接线与所述存储单元相连接，所述主控模块包括处理器；其中，所述处理器包括：请求处理单元，用于获取用户的音乐需求，将所述音乐需求转换为图像采集请求和心率采集请求，并将所述图像采集请求和心率采集请求分别发送至所述人脸图像信息采集模块、所述心率信息采集模块处，以使所述人脸图像信息采集模块、所述心率信息采集模块向所述处理器响应所述人脸图像和所述心率信号；情绪构造单元，用于通过人脸分析算法对所述人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征，并通过心率逻辑运行函数将所述心率信号转换为心率数据；情绪编码单元，用于对所述多级表情情绪特征进行映射处理以形成表情情绪特征编码，对所述心率数据进行有效计算以获取心率情绪特征编码；融合映射单元，用于对所述表情情绪特征编码与所述心率情绪特征编码进行融合计算以获取多级情绪序列编码，并将所述多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与所述多级情绪序列编码相对应的目标音乐；所述扬声器模块用于播放所述目标音乐。优选地，所述人脸图像信息采集模块至少包括摄像头和数据线；所述摄像头为MIPI CSI摄像头；所述数据线至少包括CSI Transmitter数据线。从上面的技术方案可知，本发明提供的基于生物特征交互的音乐解锁方法，首先获取用户的人脸图像和心率信号，再通过人脸分析算法对人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征，并通过心率逻辑运行函数将心率信号转换为心率数据；再对多级表情情绪特征进行映射处理以形成表情情绪特征编码，对心率数据进行有效计算以获取心率情绪特征编码；而后对表情情绪特征编码与心率情绪特征编码进行融合计算以获取多级情绪序列编码；再将多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与多级情绪序列编码相对应的目标音乐，并解锁或播放目标音乐，即结合视觉和心率双模态生理信号，提取基于多模态生物信息的多级情绪特征，构造多级情绪时序变化特征序列，并设计多级情绪序列编码与音乐之间的映射，如此，为用户播放更接近于他们当前一段时间内情绪状态下的音乐。附图说明通过参考以下结合附图的说明书内容，并且随着对本发明的更全面理解，本发明的其它目的及结果将更加明白及易于理解。在附图中：图1为根据本发明实施例的基于生物特征交互的音乐解锁方法的流程图；图2为根据本发明实施例的基于生物特征交互的音乐解锁方法中所涉及的表情-编码表的示意图；图3为根据本发明具体实施例的基于生物特征交互的音乐解锁方法所涉及的硬件架构图；图4为根据本发明实施例的基于生物特征交互的音乐解锁电子设备的示意图。具体实施方式目前现有的现有智能音箱以及音乐播放软件，主要采取用户自主选择音乐播放清单，存在交互方式单一、交互过程缺乏探索性、趣味性等问题，而且不具有情感意识，未考虑用户的情感偏好，即使考虑感情偏好，其音乐推荐算法也大多以离散的方式表征用户单一时刻的情绪状态，未考虑用户情绪的时序变化。针对上述问题，本发明提供一种基于生物特征交互的音乐解锁方法及电子设备，以下将结合附图对本发明的具体实施例进行详细描述。为了说明本发明提供的基于生物特征交互的音乐解锁方法及电子设备，图1-3对本发明实施例的基于生物特征交互的音乐解锁方法进行了示例性标示；图4对本发明实施例的基于生物特征交互的音乐解锁电子设备进行了示例性标示。以下示例性实施例的描述实际上仅仅是说明性的，决不作为对本发明及其应用或使用的任何限制。对于相关领域普通技术人员已知的技术和设备可能不作详细讨论，但在适当情况下，所述技术和设备应当被视为说明书的一部分。如图1所示，本发明提供一种基于生物特征交互的音乐解锁方法，包括：S1：基于用户的音乐需求获取所述用户的人脸图像和心率信号；S2：通过人脸分析算法对所述人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征，并通过心率逻辑运行函数将所述心率信号转换为心率数据；S3：对所述多级表情情绪特征进行映射处理以形成表情情绪特征编码，对所述心率数据进行有效计算以获取心率情绪特征编码；S4：对所述表情情绪特征编码与所述心率情绪特征编码进行融合计算以获取多级情绪序列编码；S5：将所述多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与所述多级情绪序列编码相对应的目标音乐，并解锁或播放所述目标音乐。如图1、图3共同所示，该基于生物特征交互的音乐解锁方法基于图3所示的硬件结构，其采用ARM架构主板，搭载Ubuntu系统，主要分为9个部分：主控模块、AHB/APB桥、时钟模块、电源模块、人脸图像信息采集模块、心率信息采集模块、扬声器模块、触摸屏模块、系统存储模块；在图1、图3共同所示的实施例中，步骤S1为基于用户的音乐需求获取所述用户的人脸图像和心率信号的过程，在该过程中，基于用户的音乐需求获取所述用户的人脸图像和心率信号的过程，包括：S11：通过处理器将获取的音乐需求转换为图像采集请求和心率采集请求；其中，可基于触摸屏模块获取用户的需求，即用户点触触摸屏，触摸屏感应到后将信号传输至处理器；S12：将所述图像采集请求传输至人脸图像信息采集模块使所述人脸图像信息采集模块通过预设的摄像头采集用户的人脸图像，将所述心率采集请求传输至心率信息采集模块，使所述心率信息采集模块通过心率传感器获取用户的心率信号。具体的，在图1、图3共同所示的实施例中，人脸图像信息采集模块可以包括任一具有拍摄功能的摄像头，可以采用USB摄像头，可以采用HDMI摄像头，也可以采用MIPI CSI摄像头，其中，基于USB摄像头的采集方式拍摄清晰，但是占用内存大，需要内存空间的70%~90%，不支持高帧率拍摄。基于HDMI摄像头的采集方式价格过于昂贵，不利于产品的后续成本控制，而CSI摄像头仅需要占用20%的内存空间，且支持高帧率拍摄。因此，在本发明中选用基于CSI摄像头的人脸图像信息采集方式。在采集过程中，本实施例设置MIPI CSI摄像头拍摄方式为h264视频流传输，分辨率为720p，采样频率为5帧每秒，图像采集格式为jpg；更为具体的，人脸图像信息采集模块具体信号传递流程如下：CPU发出图像采集请求，图像采集请求通过AHB总线、Bridge、APB总线、IIC总线、CSI接口发送到CSI摄像头中，拍摄完成后，图片经过CSI Transmitter数据线，回传到AHB总线中，进入ROM，同时由存储控制器写入TF卡的对应文件夹，提前预设的任一程序均可调用图片进行分析，即将图片从TF卡由SPI总线、DMA总线发送至GPU进行分析，分析完毕的图片数据，通过DMA总线进入RAM中做进行数据存储。在图1、图2、图3共同所示的实施例中，心率信息采集模块采用MAX30102的心率传感器，MAX30102是一款基于光电容积法的传感器，需要将光信号转换成电信号，该心率信息采集模块的流程如下：CPU发出心率采集请求，中断控制器产生的中断信号，经过AHB总线、Bridge、APB总线、Serial总线和GPIO接口，传输给心率传感器，心率传感器开始工作，心率传感器采集的数据，通过IIC总线、APB总线、DMA总线进入RAM存储，等候下一步的分析。在图1、图3共同所示的实施例中，步骤S2为通过人脸分析算法对所述人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征，并通过心率逻辑运行函数将所述心率信号转换为心率数据的过程，在本过程中：通过人脸分析算法对所述人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征的过程，包括：S211：通过基于72点人脸采集点的人脸分析算法对所述人脸图像进行表情识别以获取表情帧集合；S212：对所述表情帧集合进行表情过滤以删除连续重复表情，获取具有时序变化的多级表情序列；S213：对所述多级表情序列进行信息提取以获取多级表情情绪特征；具体的，在基于人脸表情的情绪特征构造过程中，通过对MIPI CSI摄像头采集到的图片进行表情识别，经过表情过滤获得最终的多级表情序列；更为具体的，在本实施例中，基于72点人脸采集点的分析算法，构造具有时序变化的多级表情情绪特征序列，即首先通过CSI摄像机使用快速捕获和流式传输技术进行快速的图片采集，为了获取用户的情绪时序变化，图像采集过程中每秒采集1张JPG图片，共采集15秒，即15张JPG图片；在获取采集图像后，本实施例基于72点人脸识别算法，通过提取人脸上的特征点，过滤掉图像背景中的干扰因素，删除连续重复的表情以形成多级表情序列，将拍摄的图片经过Base64编码成一串字符串，使用该字符串代替图像地址随后将其输入模型，经过人脸识别算法，将所采集到的所有图片一一进行表情分析以获取多级表情情绪特征。通过心率逻辑运行函数将所述心率信号转换为心率数据的过程，包括：S221：定义与所述心率信息采集模块的IIC地址和心率信息通道，并编写心率逻辑运行函数存储至所述心率信息采集模块中；S222：通过所述心率逻辑运行函数将在预设时刻采集的心率信号转换为心率数据；转换公式如下：其中，表示转换后的t时刻的心率数据；表示t时刻的心率信号；具体的，在本实施例中，MAX30102是一款基于光电容积法的传感器，因此需要将光信号转换成电信号。在心率采集过程中，首先需要定义IIC地址和通道，并编写逻辑运行函数，按照上述公式完成转换以获取心率数据。在图1、图2共同所示的实施例中，步骤S3为对所述多级表情情绪特征进行映射处理以形成表情情绪特征编码，对所述心率数据进行有效计算以获取心率情绪特征编码的过程；在该过程中：对所述多级表情情绪特征进行映射处理以形成表情情绪特征编码的过程，包括：S311：将所述多级表情情绪特征中所包含的关于每一个表情帧的信息与预设的表情-编码表相对应，以获取与所述每一个表情帧相对应的数字，并按照所述多级表情序列的时序对所述数字进行顺序排列以生成表情情绪特征编码；即每张所采集的图片都有相应的表情所对应，每张图片中人脸的表情对应图2中的9种状态之一，而后将采集的图片的多种不同的情绪依次展开，可以得到多级情绪序列如下所示：其中，表示多级表情序列由15张图构成，该序列的长度为15，表示该多级表情序列中的每一帧都有对应的九种编码，即如图2所示，每一种表情均对应1-9中的一位数字，如此再对数字进行顺序排列即生成表情情绪特征编码。对所述心率数据进行有效计算以获取心率情绪特征编码的过程，包括：S321：获取所述心率数据在预设时间内的平均值，并将所述平均值作为有效心率；S322：将所述有效心率与预设的心率阈值相比较以获取心率情绪特征编码；其中，若所述有效心率大于所述心率阈值，则将所述心率情绪特征编码记为1，若所述有效心率低于所述心率阈值，则将所述心率情绪特征编码记为0。具体的，在心率传感器接收中断信号并开始工作后，通过心率传感器读取预设时间的心率信号，在本实施例中，读取15秒的心率信号，也即是获取15秒的心率数据，而后将其存放于心率列表中，由于平均心率与单一时刻的心率相比，具有更高的稳定性。因此在本发明中，进一步计算了有效心率的值，以降有效心率的值作为心率情绪特征编码的参照，如下所示：其中，为有效心率，表示心率列表中t时刻的心率数据，N表示总时长，在本实施例中N=15；在获得有效心率值后，通过多级融合情绪特征构造进一步将心率扩充到表情情绪序列之后形成多级情绪特征；对于心率信息，由于不同个体的静态心率存在一定的差异性，因此在本实施例中对有效心率值进行聚类处理，以此弱化心率的个体差异性，具体来说，通过设置心率阈值，将计算得到的有效心率值与比较，从而确定心率情绪特征编码，如下所示：，即超过阈值时就将心率情绪编码为1，否则将心率情绪编码为0，并将其并入压缩后的情绪序列末尾从而得到最终多级情绪序列。在图1所示的实施例中，步骤S4为对表 情情绪特征编码与所述心率情绪特征编码进行融合计算以获取多级情绪序列编码的过程，在该过程中，对所述表情情绪特征编码与所述心率情绪特征编码进行融合计算以获取多级情绪序列编码的公式为：其中，代表多级情绪序列编码；代表表情情绪特征编码；代表心率情绪特征编码。如此获得最终的多级情绪序列编码。在图1所示的实施例中，步骤S5为将所述多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与所述多级情绪序列编码相对应的目标音乐，并解锁或播放所述目标音乐的过程；其中，将所述多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与所述多级情绪序列编码相对应的目标音乐，并解锁或播放所述目标音乐的过程，包括：S51：将所述多级情绪序列编码与预设的情绪-音乐映射表相对比查看在所述情绪-音乐映射表中是否包含与所述多级情绪序列编码相对应的类型的音乐；其中，S52：若所述情绪-音乐映射表中包含与所述多级情绪序列编码相对应的类型的音乐，则将与所述多级情绪序列编码相对应的类型的音乐作为目标音乐，并判断所述目标音乐是否被解锁，若已解锁，则播放所述目标音乐，若未解锁，则对所述目标音乐加入解锁目录，且播放所述目标音乐；S53：若所述情绪-音乐映射表中未包含与所述多级情绪序列编码相对应的类型的音乐，则发出表情未识别提示，并打开预设的随机路径，将所述随机路径中的音乐作为目标音乐进行播放。在本实施例中，相对应的类型的音乐可以为几首音乐的组合，也可以为一首具体的歌曲，在本具体实施例中，即经过查找情绪-音乐映射表获得相应音乐名称，若当前多级情绪序列在映射表中不存在音乐映射，则显示当前情绪未识别，并设置随机播放路径，播放已解锁音乐目录中的歌曲；若对应音乐内容未解锁，则将其标记为已解锁，并修改该音乐的属性值，同时将该音乐加入到已解锁音乐目录中。否则找到相应音乐名称后不进行修改，通过相应的音乐名称来与基本路径进行拼接确定音乐的播放路径从而实现音乐的解锁播放。通过人的面部表情分析人的情感，是最基础、直观的基于生理信号的情感分析方法，其优点是分析模型容易构造，但是基于人的面部表情分析的缺点主要在于人可以做到人脸表情与实际情绪表里不一而导致的分析错误，因此在本发明中，通过引入心率信息来辅助情绪识别的准确度，具体的，本发明提供的基于生物特征交互的音乐解锁方法，首先获取用户的人脸图像和心率信号，再通过人脸分析算法对人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征，并通过心率逻辑运行函数将心率信号转换为心率数据；再对多级表情情绪特征进行映射处理以形成表情情绪特征编码，对心率数据进行有效计算以获取心率情绪特征编码；而后对表情情绪特征编码与心率情绪特征编码进行融合计算以获取多级情绪序列编码；再将多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与多级情绪序列编码相对应的目标音乐，并解锁或播放目标音乐，即结合视觉和心率双模态生理信号，提取基于多模态生物信息的多级情绪特征，构造多级情绪时序变化特征序列，并设计多级情绪序列编码与音乐之间的映射，如此，为用户播放更接近于他们当前一段时间内情绪状态下的音乐。如图4所示，本发明提供的基于生物特征交互的音乐解锁电子设备100，实现如前所述的基于生物特征交互的音乐解锁方法，包括人脸图像信息采集模块110、心率信息采集模块120、辅助模块130、主控模块140和扬声器模块150；其中，所述人脸图像信息采集模块110用于获取所述用户的人脸图像；所述心率信息采集模块120用于获取所述用户的心率信号；所述辅助模块130包括存储单元和连接线；所述主控模块140通过所述连接线与所述存储单元相连接，所述主控模块包括处理器141；其中，所述处理器141包括：请求处理单元1411，用于获取用户的音乐需求，将所述音乐需求转换为图像采集请求和心率采集请求，并将所述图像采集请求和心率采集请求分别发送至所述人脸图像信息采集模块、所述心率信息采集模块处，以使所述人脸图像信息采集模块、所述心率信息采集模块向所述处理器响应所述人脸图像和所述心率信号；情绪构造单元1412，用于通过人脸分析算法对所述人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征，并通过心率逻辑运行函数将所述心率信号转换为心率数据；情绪编码单元1413，用于对所述多级表情情绪特征进行映射处理以形成表情情绪特征编码，对所述心率数据进行有效计算以获取心率情绪特征编码；融合映射单元1414，用于对所述表情情绪特征编码与所述心率情绪特征编码进行融合计算以获取多级情绪序列编码，并将所述多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与所述多级情绪序列编码相对应的目标音乐；所述扬声器模块150用于播放所述目标音乐。其中，人脸图像信息采集模块至少包括摄像头和数据线；所述摄像头为MIPI CSI摄像头；所述数据线至少包括CSI Transmitter数据线；如此，设置MIPI CSI摄像头拍摄方式为h264视频流传输，分辨率为720p，采样频率为5帧每秒，图像采集格式为jpg；更为具体的，人脸图像信息采集模块具体信号传递流程如下：CPU发出图像采集请求，图像采集请求通过AHB总线、Bridge、APB总线、IIC总线、CSI接口发送到CSI摄像头中，拍摄完成后，图片经过CSI Transmitter数据线，回传到AHB总线中，进入ROM，同时由存储控制器写入TF卡的对应文件夹，提前预设的任一程序均可调用图片进行分析，即将图片从TF卡由SPI总线、DMA总线发送至GPU进行分析，分析完毕的图片数据，通过DMA总线进入RAM中做进行数据存储。具体的实施方法不做具体限制，在此不做过多赘述，可参照上述基于生物特征交互的音乐解锁方法的具体实施例。如上所述，本发明提供的基于生物特征交互的音乐解锁电子设备，首先获取用户的人脸图像和心率信号，再通过人脸分析算法对人脸图像进行基于人脸表情的情绪特征构造以形成多级表情情绪特征，并通过心率逻辑运行函数将心率信号转换为心率数据；再对多级表情情绪特征进行映射处理以形成表情情绪特征编码，对心率数据进行有效计算以获取心率情绪特征编码；而后对表情情绪特征编码与心率情绪特征编码进行融合计算以获取多级情绪序列编码；再将多级情绪序列编码与预设的情绪-音乐映射表相对比以获取与多级情绪序列编码相对应的目标音乐，并解锁或播放目标音乐，即结合视觉和心率双模态生理信号，提取基于多模态生物信息的多级情绪特征，构造多级情绪时序变化特征序列，并设计多级情绪序列编码与音乐之间的映射，如此，为用户播放更接近于他们当前一段时间内情绪状态下的音乐。如上参照附图以示例的方式描述了根据本发明提出的基于生物特征交互的音乐解锁方法及电子设备。但是，本领域技术人员应当理解，对于上述本发明所提出的基于生物特征交互的音乐解锁方法及电子设备，还可以在不脱离本发明内容的基础上做出各种改进。因此，本发明的保护范围应当由所附的权利要求书的内容确定。
