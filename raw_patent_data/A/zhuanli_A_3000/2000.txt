标题title
一种基于近红外光波长变换的无创血糖预测装置
摘要abst
本发明提出一种基于近红外光波长变换的无创血糖预测装置,涉及医疗设备的技术领域,首先进行与血糖相关的数据采集，形成原始数据集，然后对原始数据集进行特征提取，形成原始特征矩阵；将原始数据集划分为训练集与测试集，明确训练集测试集对应的特征矩阵，接着探索不同光源间的变换映射，利用波长映射变换单元实现将低波段采集的数据映射至葡萄糖的主要吸收峰1610nm处，对波长1610nm的近红外光产生的信号进行特征提取，组成全新的特征矩阵以训练血糖预测单元，并对血糖预测单元的预测准确度进行校验，实现在降低无创血糖预测成本的同时，与配备1610nm波长光源的血糖仪拥有同等的预测准确率。
权利要求书clms
1.一种基于近红外光波长变换的无创血糖预测装置，其特征在于，所述装置包括：数据采集单元，用于完成第一数据集的采集，第一数据集中包括利用第一波长的近红外光采集的PPG信号Y与利用波长1610nm的近红外光采集的PPG信号Y’；同时同步采集标准血糖浓度数据，标准血糖浓度数据与第一数据集共同构成原始数据集；第一特征提取单元，用于对数据采集单元采集的第一数据集中的数据进行特征提取，形成原始特征矩阵；数据集划分单元，用于将原始数据集划分为训练集与测试集，在原始特征矩阵中，训练集对应的特征矩阵为波长1610nm的近红外光采集的PPG信号Y’的特征矩阵F1，其相应的标准血糖浓度数据组成第一向量BG1；测试集对应的特征矩阵为第一波长的近红外光采集的PPG信号Y的特征矩阵F2，其相应的标准血糖浓度数据组成第二向量BG2；波长映射变换单元，接收测试集中的由第一波长的近红外光采集的PPG信号Y，对Y进行波长映射变换，得到波长1610nm的近红外光采集的PPG信号Y’的估计值，将其视作波长1610nm的近红外光产生的信号；第二特征提取单元，对波长1610nm的近红外光产生的信号进行特征提取，利用提取的特征替换特征矩阵F2中的特征，输出替换后的特征矩阵F2’；血糖预测单元，用于接收第二特征提取单元输出的特征矩阵F2’，基于特征矩阵F2’对血糖进行预测，得到血糖预测结果值；校验单元，基于血糖预测结果值与测试集对应的标准血糖浓度数据组成的第二向量BG2，校验血糖预测的准确度。2.根据权利要求1所述的基于近红外光波长变换的无创血糖预测装置，其特征在于，数据采集单元在进行数据采集前，首先确定与血糖相关的待采集指标，与血糖相关的待采集指标包括：受试者的身高、体重、餐饮习惯、同步的心率、血压、标准血糖浓度、血脂、心电ECG信号、利用第一波长的近红外光采集的PPG信号Y、利用波长1610nm的近红外光采集的PPG信号Y’。3.根据权利要求2所述的基于近红外光波长变换的无创血糖预测装置，其特征在于，第一数据集中除利用第一波长的近红外光采集的PPG信号Y与利用波长1610nm的近红外光采集的PPG信号Y’外，还包括：受试者的身高数据、体重数据、餐饮习惯数据、同步的心率数据、血压数据、血脂数据、心电ECG信号数据。4.根据权利要求3所述的基于近红外光波长变换的无创血糖预测装置，其特征在于，数据采集单元利用有创血糖检测法同步采集标准血糖浓度数据。5.根据权利要求1～4任意一项所述的基于近红外光波长变换的无创血糖预测装置，其特征在于，数据采集单元按照每天早餐前、午餐后、下午茶及晚餐后四个时间段进行数据采集。6.根据权利要求3所述的基于近红外光波长变换的无创血糖预测装置，其特征在于，第一特征提取单元对第一数据集中的数据进行特征提取时，结合心电ECG信号曲线、利用第一波长的近红外光采集的PPG信号Y曲线、利用波长1610nm的近红外光采集的PPG信号Y’曲线，对心电ECG信号、利用第一波长的近红外光采集的PPG信号Y、利用波长1610nm的近红外光采集的PPG信号Y’的波峰、峰间距、脉搏波传导时间PWTT进行提取，然后结合受试者的身高、体重、餐饮习惯、同步的心率、血压、标准血糖浓度、血脂的统计特性，提取特征，形成原始特征矩阵。7.根据权利要求1所述的基于近红外光波长变换的无创血糖预测装置，其特征在于，所述波长映射变换单元中加载有BP神经网络，在波长映射变换单元用于波长映射变换前，以第一波长的近红外光采集的PPG信号Y作为BP神经网络的输入，以波长1610nm的近红外光采集的PPG信号Y’作为BP神经网络的期望值，以min||f-yi||2为目标，反向训练BP神经网络，调整BP神经网络的权值和阈值参数，直至BP神经网络收敛，完成BP神经网络的训练，其中，f为第一波长的近红外光采集的PPG信号Y输入BP神经网络时，BP神经网络输出的波长1610nm的近红外光采集的PPG信号预测结果；yi表示波长1610nm的近红外光采集的PPG信号Y’；在波长映射变换单元用于波长映射变换时，将第一波长的近红外光采集的PPG信号Y以向量的形式输入训练好的BP神经网络，得到一组波长1610nm的近红外光采集的PPG信号Y’的估计值。8.根据权利要求7所述的基于近红外光波长变换的无创血糖预测装置，其特征在于，对波长1610nm的近红外光产生的信号进行特征提取时，设提取的特征表示为：{A1,…An}，利用特征{A1,…An}替换特征矩阵F2中由第一波长的近红外光采集的PPG信号Y产生的特征，输出替换后的特征矩阵F2’。9.根据权利要求8所述的基于近红外光波长变换的无创血糖预测装置，其特征在于，所述血糖预测单元加载有随机森林模型，所述随机森林模型作为分类器，包括若干个决策树，在血糖预测单元用于血糖预测前，利用由波长1610nm的近红外光采集的PPG信号Y’对应的特征矩阵F1及标准血糖浓度数据组成的第一向量BG1训练随机森林模型，直至随机森林模型收敛，训练完成；在血糖预测单元用于血糖预测时，第二特征提取单元输出的特征矩阵F2’输入将训练好的随机森林模型，随机森林模型中的每个决策树的预测结果作为一次类别投票，票数最高的结果作为血糖预测结果。10.根据权利要求9所述的基于近红外光波长变换的无创血糖预测装置，其特征在于，所述校验单元加载有克拉克误差网格，克拉克误差网格以血糖预测结果值作为纵坐标，以标准血糖浓度数据为横坐标，校验单元在接收血糖预测结果值与测试集对应的标准血糖浓度数据组成的第二向量BG2后，血糖预测结果值与测试集对应的标准血糖浓度数据组成的第二向量BG2在克拉克误差网格中标定坐标点，克拉克误差网络中设置有准确度分界线，计算出位于准确度分界线阈值范围内的坐标点的个数占总的坐标点的百分比，然后设置百分比阈值，在计算出的百分比大于百分比阈值时，血糖预测的准确度符合要求。
说明书desc
技术领域本发明涉及医疗设备的技术领域，更具体地，涉及一种基于近红外光波长变换的无创血糖预测装置。背景技术目前，全球范围内估计在20岁-79岁人群中有4.63亿人患有糖尿病。我国糖尿病人数为1.164亿，位居全球第一，且预计到2045年全球糖尿病人数将高达7亿。在一天24小时中，人体的血糖水平始终处于波动之中，糖尿病患者的自我血糖监测有助于评估日常活动和药物治疗对血糖的影响，根据监测情况，胰岛素治疗的用量也会有所不同，自我血糖监测利于疾病的防治，有助于提高治疗的有效性与安全性。全球超过90％的糖尿病患者每天多次刺破指尖检测血糖水平，无数患者都在期盼着准确的无创血糖仪的诞生。利用葡萄糖的近红外吸收光谱进行血糖检测的方式属于无创血糖检测方式的一种，其主要通过人体对近红外、中红外或远红外的反射、透射分析，从频谱中提取葡萄糖含量。1995年，Heise等人选择在1111nm-1835nm波段对口腔粘膜进行反射法无创血糖检测实验，结果表明该波段的近红外漫反射光谱与血糖浓度具有一定的相关性，证明了红外光谱法测量血糖浓度的可行性。无创血糖测量红外光按波长不同可划分为若干个区域，波长780nm-2500nm的区域称为近红外区，波长2500nm-25000nm的区域称为中红外区。近红外光谱测量有方便、快速、高效、不污染环境、血糖信息丰富等优点，因此，在目前的无创血糖测量方法中，近红外光谱法的使用最为广泛，如现有技术中也提到了一种基于PCA-NARX校正算法的红外光无创血糖检测装置，考虑了血糖浓度和血糖近红外吸光度之间包含的非线性关系、人体血糖浓度自身随着时间的变化存在的波动规律及外界因素会对近红外无创血糖的检测产生的影响等问题，实现血糖浓度的精确测量。然而，在利用近红外光测量血糖浓度时，使用何种波长的光源从中准确、稳定地提取出仅反应血液成分浓度的有用信号，是实现近红外无创测血糖的关键问题。资料显示，葡萄糖在倍频区的吸收主要集中于1530nm-1850nm，其主要的吸收峰处于1610nm处，对血糖反应敏感。但在实际的应用中，波长达到1610nm的红外光源价格高昂且获取途径非常有限。因此，设计一种能够更加经济地以近红外光谱实现无创血糖预测的装置，将是无创血糖检测领域发展的重大进步。发明内容为解决如何兼顾成本与血糖预测准确率的问题，本发明提出一种基于红外波长变换的无创血糖预测装置，将近红外光谱获得的信号转换为血糖反应敏感的1610nm波长所获得的信号，实现在降低无创血糖预测成本的同时，与配备1610nm波长光源的血糖仪拥有同等的预测准确率。为了达到上述技术效果，本发明的技术方案如下：一种基于近红外光波长变换的无创血糖预测装置，所述装置包括：数据采集单元，用于完成第一数据集的采集，第一数据集中包括利用第一波长的近红外光采集的PPG信号Y与利用波长1610nm的近红外光采集的PPG信号Y’；同时同步采集标准血糖浓度数据，标准血糖浓度数据与第一数据集共同构成原始数据集；第一特征提取单元，用于对数据采集单元采集的第一数据集中的数据进行特征提取，形成原始特征矩阵；数据集划分单元，用于将原始数据集划分为训练集与测试集，在原始特征矩阵中，训练集对应的特征矩阵为波长1610nm的近红外光采集的PPG信号Y’的特征矩阵F1，其相应的标准血糖浓度数据组成第一向量BG1；测试集对应的特征矩阵为第一波长的近红外光采集的PPG信号Y的特征矩阵F2，其相应的标准血糖浓度数据组成第二向量BG2；波长映射变换单元，接收测试集中的由第一波长的近红外光采集的PPG信号Y，对Y进行波长映射变换，得到波长1610nm的近红外光采集的PPG信号Y’的估计值，将其视作波长1610nm的近红外光产生的信号；第二特征提取单元，对波长1610nm的近红外光产生的信号进行特征提取，利用提取的特征替换特征矩阵F2中的特征，输出替换后的特征矩阵F2’；血糖预测单元，用于接收第二特征提取单元输出的特征矩阵F2’，基于特征矩阵F2’对血糖进行预测，得到血糖预测结果值；校验单元，基于血糖预测结果值与测试集对应的标准血糖浓度数据组成的第二向量BG2，校验血糖预测的准确度。在本技术方案中，以经济性利用近红外光谱实现无创血糖预测为目标，首先进行与血糖相关的数据采集，形成原始数据集，然后对原始数据集进行特征提取，形成原始特征矩阵；将原始数据集划分为训练集与测试集，明确训练集测试集对应的特征矩阵，接着探索不同光源间的变换映射，利用波长映射变换单元实现将低波段采集的数据映射至葡萄糖的主要吸收峰1610nm处，对波长1610nm的近红外光产生的信号进行特征提取，组成全新的特征矩阵以训练血糖预测单元，并对血糖预测单元的预测准确度进行校验，完成精准且有实际经济效用价值的无创血糖预测。优选地，数据采集单元在进行数据采集前，首先确定与血糖相关的待采集指标，与血糖相关的待采集指标包括：受试者的身高、体重、餐饮习惯、同步的心率、血压、标准血糖浓度、血脂、心电ECG信号、利用第一波长的近红外光采集的PPG信号Y、利用波长1610nm的近红外光采集的PPG信号Y’。优选地，第一数据集中除利用第一波长的近红外光采集的PPG信号Y与利用波长1610nm的近红外光采集的PPG信号Y’外，还包括：受试者的身高数据、体重数据、餐饮习惯数据、同步的心率数据、血压数据、血脂数据、心电ECG信号数据。优选地，数据采集单元利用有创血糖检测法同步采集标准血糖浓度数据，采集的标准血糖浓度数据以作为血糖参考标准。优选地，数据采集单元按照每天早餐前、午餐后、下午茶及晚餐后四个时间段进行数据采集。优选地，第一特征提取单元对第一数据集中的数据进行特征提取时，结合心电ECG信号曲线、利用第一波长的近红外光采集的PPG信号Y曲线、利用波长1610nm的近红外光采集的PPG信号Y’曲线，对心电ECG信号、利用第一波长的近红外光采集的PPG信号Y、利用波长1610nm的近红外光采集的PPG信号Y’的波峰、峰间距、脉搏波传导时间PWTT进行提取，然后结合受试者的身高、体重、餐饮习惯、同步的心率、血压、标准血糖浓度、血脂的统计特性，提取特征，形成原始特征矩阵。优选地，所述波长映射变换单元中加载有BP神经网络，在波长映射变换单元用于波长映射变换前，以第一波长的近红外光采集的PPG信号Y作为BP神经网络的输入，以波长1610nm的近红外光采集的PPG信号Y’作为BP神经网络的期望值，以min||f-yi||2为目标，反向训练BP神经网络，调整BP神经网络的权值和阈值参数，直至BP神经网络收敛，完成BP神经网络的训练，其中，f为第一波长的近红外光采集的PPG信号Y输入BP神经网络时，BP神经网络输出的波长1610nm的近红外光采集的PPG信号预测结果；yi表示波长1610nm的近红外光采集的PPG信号Y’；在波长映射变换单元用于波长映射变换时，将第一波长的近红外光采集的PPG信号Y以向量的形式输入训练好的BP神经网络，得到一组波长1610nm的近红外光采集的PPG信号Y’的估计值。在此，以BP神经网络作为波长映射变换单元的基础，在数据映射转换时，将第一波长的近红外光采集的PPG信号Y和波长1610nm的近红外光采集的PPG信号Y’单独提出来，利用BP神经网络，将Y以向量的形式，作为基于BP神经网络的输入，将Y’以向量的形式作为期望值，根据输出与Y’之间的偏差，进行反向训练，持续重复此过程，调整权重，直至模型收敛，完成训练。优选地，对波长1610nm的近红外光产生的信号进行特征提取时，设提取的特征表示为：{A1，...An}，利用特征{A1，...An}替换特征矩阵F2中由第一波长的近红外光采集的PPG信号Y产生的特征，输出替换后的特征矩阵F2’。优选地，所述血糖预测单元加载有随机森林模型，所述随机森林模型作为分类器，包括若干个决策树，在血糖预测单元用于血糖预测前，利用由波长1610nm的近红外光采集的PPG信号Y’对应的特征矩阵F1及标准血糖浓度数据组成的第一向量BG1训练随机森林模型，直至随机森林模型收敛，训练完成；在血糖预测单元用于血糖预测时，第二特征提取单元输出的特征矩阵F2’输入将训练好的随机森林模型，随机森林模型中的每个决策树的预测结果作为一次类别投票，票数最高的结果作为血糖预测结果。在此，随机森林模型与前期BP神经网络融合，能够在数据映射转换及最终血糖预测的两个阶段发挥不同模型的优势，有效提高装置整体的鲁棒性及精确性。优选地，所述校验单元加载有克拉克误差网格，克拉克误差网格以血糖预测结果值作为纵坐标，以标准血糖浓度数据为横坐标，校验单元在接收血糖预测结果值与测试集对应的标准血糖浓度数据组成的第二向量BG2后，血糖预测结果值与测试集对应的标准血糖浓度数据组成的第二向量BG2在克拉克误差网格中标定坐标点，克拉克误差网络中设置有准确度分界线，计算出位于准确度分界线阈值范围内的坐标点的个数占总的坐标点的百分比，然后设置百分比阈值，在计算出的百分比大于百分比阈值时，血糖预测的准确度符合要求。与现有技术相比，本发明技术方案的有益效果是：本发明提出一种基于近红外光波长变换的无创血糖预测装置，首先进行与血糖相关的数据采集，形成原始数据集，然后对原始数据集进行特征提取，形成原始特征矩阵；将原始数据集划分为训练集与测试集，明确训练集测试集对应的特征矩阵，接着探索不同光源间的变换映射，利用波长映射变换单元实现将低波段采集的数据映射至葡萄糖的主要吸收峰1610nm处，对波长1610nm的近红外光产生的信号进行特征提取，组成全新的特征矩阵以训练血糖预测单元，并对血糖预测单元的预测准确度进行校验，实现在降低无创血糖预测成本的同时，与配备1610nm波长光源的血糖仪拥有同等的预测准确率。附图说明图1表示本发明实施例1中提出的基于近红外光波长变换的无创血糖预测装置的整体示意图；图2表示本发明实施例1中提出的数据采集单元利用不同波长的近红外光源获得PPG信号的示意图；图3表示本发明实施例1中提出的数据划分单元划分的训练集与测试集对应特征矩阵的排列示意图；图4表示本发明实施例1中提出的血糖预测结果在克拉克误差网格中的标定示意图；图5表示本发明实施例2中提出的BP神经网络的基本结构图；图6表示本发明实施例3中提出的随机森林模型的基本结构图。具体实施方式附图仅用于示例性说明，不能理解为对本专利的限制；为了更好地说明本实施例，附图某些部位会有省略、放大或缩小，并不代表实际尺寸；对于本领域技术人员来说，附图中某些公知内容说明可能省略是可以理解的。下面结合附图和实施例对本发明的技术方案做进一步的说明。附图中描述位置关系的仅用于示例性说明，不能理解为对本专利的限制；实施例1如图1所示，本实施例提出一种基于近红外光波长变换的无创血糖预测装置，参见图1，本装置包括：数据采集单元1，用于完成第一数据集的采集，第一数据集中包括利用第一波长的近红外光采集的PPG信号Y与利用波长1610nm的近红外光采集的PPG信号Y’；同时同步采集标准血糖浓度数据，标准血糖浓度数据与第一数据集共同构成原始数据集，在本实施例中，第一波长的近红外光是易于获得的近红外光，取1000nm的波长，也可以取其它易于获得的波长的近红外光，作为一个基础近红外光波长，用于后续转换为波长1610nm的近红外光；数据采集单元1在进行数据采集前，首先确定与血糖相关的待采集指标，在本实施例中，与血糖相关的待采集指标包括：受试者的身高、体重、餐饮习惯、同步的心率、血压、标准血糖浓度、血脂、心电ECG信号、利用第一波长的近红外光采集的PPG信号Y、利用波长1610nm的近红外光采集的PPG信号Y’。首先在选定12位志愿者，志愿者中6位为糖尿病患者，另外6位各项指标健康，按照每天早餐前、午餐后、下午茶、晚餐后四个时间段进行数据采集，为期12天，完成数据采集过程，如图2所示，在利用第一波长的近红外光采集PPG信号Y与利用波长1610nm的近红外光采集PPG信号Y’时，两个不同波长的近红外光源均在志愿者皮肤外侧，光源产生近红外光，经血液吸收发射至数据接收器，得到PPG信号，第一数据集中除利用第一波长的近红外光采集的PPG信号Y与利用波长1610nm的近红外光采集的PPG信号Y’外，还包括：受试者的身高数据、体重数据、餐饮习惯数据、同步的心率数据、血压数据、血脂数据、心电ECG信号数据。另外，数据采集单元1利用有创血糖检测法同步采集标准血糖浓度数据，采集的标准血糖浓度数据以作为血糖参考标准。第一特征提取单元2，用于对数据采集单元1采集的第一数据集中的数据进行特征提取，形成原始特征矩阵；第一特征提取单元2对第一数据集中的数据进行特征提取时，结合心电ECG信号曲线、利用第一波长的近红外光采集的PPG信号Y曲线、利用波长1610nm的近红外光采集的PPG信号Y’曲线，对心电ECG信号、利用第一波长的近红外光采集的PPG信号Y、利用波长1610nm的近红外光采集的PPG信号Y’的波峰、峰间距、脉搏波传导时间PWTT进行提取，其中，PWWT是利用每一次心跳ECG和外周脉搏计算获得的外周脉搏，这些均可以通过信号波形直接或间接得出，然后结合受试者的身高、体重、餐饮习惯、同步的心率、血压、标准血糖浓度、血脂的统计特性，提取特征，形成原始特征矩阵。数据集划分单元3，用于将原始数据集划分为训练集与测试集，在原始特征矩阵中，训练集对应的特征矩阵为波长1610nm的近红外光采集的PPG信号Y’的特征矩阵F1，其相应的标准血糖浓度数据组成第一向量BG1；测试集对应的特征矩阵为第一波长的近红外光采集的PPG信号Y的特征矩阵F2，其相应的标准血糖浓度数据组成第二向量BG2；在本实施例中，数据划分单元3将原始数据集划分为训练集与测试集时，训练集和测试集的比例为7:3，训练集与测试集对应特征矩阵的排列示意图如图3所示，其中矩阵中的元素a表示特征值。波长映射变换单元4，接收测试集中的由第一波长的近红外光采集的PPG信号Y，对Y进行波长映射变换，得到波长1610nm的近红外光采集的PPG信号Y’的估计值，将其视作波长1610nm的近红外光产生的信号；第二特征提取单元5，对波长1610nm的近红外光产生的信号进行特征提取，利用提取的特征替换特征矩阵F2中的特征，输出替换后的特征矩阵F2’；对波长1610nm的近红外光产生的信号进行特征提取时，设提取的特征表示为：{A1,…An}，利用特征{A1,…,An}替换特征矩阵F2中由第一波长的近红外光采集的PPG信号Y产生的特征，输出替换后的特征矩阵F2’。血糖预测单元6，用于接收第二特征提取单元输出的特征矩阵F2’，基于特征矩阵F2’对血糖进行预测，得到血糖预测结果值；校验单元7，基于血糖预测结果值与测试集对应的标准血糖浓度数据组成的第二向量BG2，校验血糖预测的准确度。整体上，利用本实施例提出的无创血糖预测装置具体实施流程为：S1.首先进行与血糖相关的数据采集，形成原始数据集；S2.对原始数据集进行特征提取，形成原始特征矩阵；S3.将原始数据集划分为训练集与测试集，明确训练集测试集对应的特征矩阵，接着探索不同光源间的变换映射，利用波长映射变换单元实现将低波段采集的数据映射至葡萄糖的主要吸收峰1610nm处；S4.对波长1610nm的近红外光产生的信号进行特征提取，组成全新的特征矩阵以训练血糖预测单元，并对血糖预测单元的预测准确度进行校验。校验单元7加载有克拉克误差网格，克拉克误差网格以血糖预测结果值作为纵坐标，以标准血糖浓度数据为横坐标，校验单元7在接收血糖预测结果值与测试集对应的标准血糖浓度数据组成的第二向量BG2后，如图4所示，血糖预测结果值与测试集对应的标准血糖浓度数据组成的第二向量BG2在克拉克误差网格中标定坐标点，克拉克误差网络中设置有准确度分界线，计算坐标点位于准确度分界线下侧的百分比，在本实施例中，以“y＝x”对应在克拉克网络坐标系中对应的直线作为准确度分界线，坐标点越趋近于y＝x这条直线则模型的准确率越高，统计落于A、B、C、D、E五个区的坐标点，A区代表准确率非常高，E区代表准确率非常低。在总的坐标点一定的前提下，统计位于准确度分界线阈值范围内的坐标点的个数，计算出位于准确度分界线阈值范围内的坐标点的个数占总的坐标点的百分比，根据需求设置百分比阈值，在计算出的百分比大于百分比阈值时，装置进行血糖预测的准确度符合要求。综合以上过程，完成精准且有实际经济效用价值的无创血糖预测。实施例2在本实施例中，对用于波长映射变换的波长映射单元4进行说明。波长映射变换单元4中加载有BP神经网络，BP神经网络的结构可参见图5，在波长映射变换单元4用于波长映射变换前，以第一波长的近红外光采集的PPG信号Y作为BP神经网络的输入，以波长1610nm的近红外光采集的PPG信号Y’作为BP神经网络的期望值，以min||f-yi||2为目标，反向训练BP神经网络，调整BP神经网络的权值和阈值参数，直至BP神经网络收敛，完成BP神经网络的训练，其中，f为第一波长的近红外光采集的PPG信号Y输入BP神经网络时，BP神经网络输出的波长1610nm的近红外光采集的PPG信号预测结果；yi表示波长1610nm的近红外光采集的PPG信号Y’；如图5所示，BP神经网络是一种按误差逆传播算法训练的多层前馈网络，即每次根据训练得到的结果与预想结果进行误差分析，通过反向传播来不断调整网络的权值和阈值，使网络的误差平方和最小，得到能输出与预想结果一致的模型，BP神经网络拓扑结构包括输入层、隐藏层、输出层，每一层都由若干神经元构成，每个神经元都有自身的权重Wn。在波长映射变换单元4用于波长映射变换时，将第一波长的近红外光采集的PPG信号Y以向量的形式输入训练好的BP神经网络，得到一组波长1610nm的近红外光采集的PPG信号Y’的估计值。实施例3在本实施例中，对血糖预测单元6进行说明，血糖预测单元6中加载有随机森林模型，参见图6，以随机森林模型作为分类器，包括若干个决策树，在血糖预测单元6用于血糖预测前，利用由波长1610nm的近红外光采集的PPG信号Y’对应的特征矩阵F1及标准血糖浓度数据组成的第一向量BG1训练随机森林模型，直至随机森林模型收敛，训练完成；在血糖预测单元用于血糖预测时，第二特征提取单元输出的特征矩阵F2’输入将训练好的随机森林模型，随机森林模型中的每个决策树的预测结果作为一次类别投票，票数最高的结果作为血糖预测结果。随机森林模型与实施例2中的BP神经网络融合，能够在数据映射转换及最终血糖预测的两个阶段发挥不同模型的优势，有效提高装置整体的鲁棒性及精确性。显然，本发明的上述实施例仅是为清楚地说明本发明所作的举例，而并非是对本发明的实施方式的限定。对于所属领域的普通技术人员来说，在上述说明的基础上还可以做出其它不同形式的变化或变动。这里无需也无法对所有的实施方式予以穷举。凡在本发明的精神和原则之内所作的任何修改、等同替换和改进等，均应包含在本发明权利要求的保护范围之内。
