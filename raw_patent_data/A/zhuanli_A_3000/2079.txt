标题title
一种心衰患者的睡眠监测及改善方法、设备及存储介质
摘要abst
本发明涉及一种心衰患者的睡眠监测及改善方法、设备及存储介质，该方法包括以下步骤：获取非接触式采集的心冲击图波形；通过所述心冲击图波形在心跳时实时准确获取收缩点信息；其中，收缩点信息包括在心冲击图中J峰后的L峰位置信息；根据所述收缩点信息启动电致收缩件按预设幅度收缩。本发明针对心衰患者睡眠中心脏负荷重、血压回流不畅影响心脏功能的问题，通过设计压电监测床垫和调控袜的联动，实现智能体外反搏和加温调控，使得心脏得以休息。在居家环境中，在心衰患者心跳时，实时准确获取收缩点，并在极短延时后启动体外反搏，排除误启动的风险。简单舒适，可以居家睡眠使用；启动快速，佩戴方便，可实现每晚的心脏康复护理。
权利要求书clms
1.一种心衰患者的睡眠监测及改善方法，其特征在于，包括以下步骤：获取非接触式采集的心冲击图波形；通过所述心冲击图波形在心跳时实时准确获取收缩点信息；其中，收缩点信息包括在心冲击图中J峰后的L峰位置信息；根据所述收缩点信息启动电致收缩件按预设幅度收缩。2.如权利要求1所述的一种心衰患者的睡眠监测及改善方法，其特征在于：在所述根据所述收缩点信息启动电致收缩件按预设幅度收缩步骤之后还包括以下步骤：通过非接触式心冲击图计算血压；判断血压是否在目标血压附近；若血压不在目标血压附近，则启动加热调控模块定向聚焦加热微小血管进行血管阻力调控。3.如权利要求2所述的一种心衰患者的睡眠监测及改善方法，其特征在于：在所述启动加热调控模块步骤之后还包括以下步骤：根据接收到的末梢灌注提升情况调整加热调控模块的调控步长，直至到达设定最大值，若血压仍不在目标血压附近，则唤醒患者，调整床位或增加口服药物。4.如权利要求2或3所述的一种心衰患者的睡眠监测及改善方法，其特征在于，在所述获取非接触式采集的心冲击图波形步骤之后还包括以下步骤：将多个测量点间的心冲击图最大幅值比值与基线相比；若变化超过预设范围，则停止电致收缩件收缩。5.如权利要求1所述的一种心衰患者的睡眠监测及改善方法，其特征在于：所述通过所述心冲击图波形在心跳时实时准确获取收缩点信息步骤包括以下步骤：通过滑窗获得心冲击图的波形模板；其中，所述心冲击图的波形模板包括心冲击图的J峰的位置、高度、J峰和L峰之间距离；根据实时描记对后续的心冲击图波形进行预判，以及在预设范围内纠正。6.如权利要求5所述的一种心衰患者的睡眠监测及改善方法，其特征在于：所述根据实时描记对后续的心冲击图波形进行预判，以及在预设范围内纠正步骤包括以下步骤：在获取的新采集的在线波形中，若波形信噪比高于设定阈值，协方差超过设定阈值，峰值到达心冲击图的波形模板中心冲击图的J峰的高度的浮动范围，并在最高处开始下滑时，记为J峰；在心冲击图的波形模板中心冲击图的J峰和L峰之间距离的浮动范围内，若描记从峰值开始下降，则判断为L峰。7.如权利要求6所述的一种心衰患者的睡眠监测及改善方法，其特征在于：所述根据所述收缩点信息启动电致收缩件按预设幅度收缩步骤还包括在L峰后预设时间内启动电致收缩件。8.如权利要求5所述的一种心衰患者的睡眠监测及改善方法，其特征在于，还包括以下步骤:若心率变化超过预设范围，则通过动态时间归整算法对心冲击图的波形模板进行动态调整。9.如权利要求2所述的一种心衰患者的睡眠监测及改善方法，其特征在于：通过非接触式心冲击图计算血压步骤包括以下步骤：提取心冲击图的时域各特征峰的时间和幅值信息；提取频域主成分，并计算其时间复杂度或时间分形信息；将特征组合后输入贝叶斯神经网络，得到血压。10.如权利要求9所述的一种心衰患者的睡眠监测及改善方法，其特征在于：所述贝叶斯神经网络的构建包括以下步骤：将心冲击图数据分割成预设时间窗口；采用留一交叉验证方法划分数据；排除训练集中标准偏差为I或J峰值高于平均值预设范围或连续舒张压变化大于预设值的数据；提取各个特征峰以及两者之间的间隔；使用小波核执行连续的一维小波变换，然后对每个频谱分量进行傅里叶变换，提取长期频域波动，并计算其时间复杂度或时间分形信息；通过各个特征峰以及两者之间的间隔、长期频域波动生物特征、心率和呼吸特征构建BCG-BP模型；采用EasyEnsemble流程创建血压值的平衡分布，以及产生与基线测量相比的相对血压变化的平衡分布；采用贝叶斯神经网络对数据集进行训练，使用公开数据集的网络系数作为起点，改进自有数据集的BP估计；使用血压的平均绝对误差和受试者内BP相对于基线的波动评估算法的性能，测量预测和参考值之间的受试者间和受试者内相关性；将每个受试者的测量值作为校准数据点添加到训练过程中，以调整模型中的系数。11.一种计算机可读存储介质，其特征在于，其上存储有程序指令，所述程序指令被执行时实现如权利要求1所述的方法。12.一种心衰患者的睡眠监测及改善设备，实现如权利要求1~10任一项所述的方法，其特征在于：包括压电传感阵列、控制器、电致收缩件；其中，所述压电传感阵列用于非接触式采集心冲击图波形；所述控制器用于通过所述心冲击图波形在心跳时实时准确获取收缩点信息，根据所述收缩点信息启动电致收缩件按预设幅度收缩；其中，收缩点信息包括在心冲击图中J峰后的L峰位置信息。13.如权利要求12所述的一种心衰患者的睡眠监测及改善设备，其特征在于：还包括加热调控模块，所述控制器通过非接触式心冲击图计算血压，判断血压是否在目标血压附近，若血压不在目标血压附近，则启动所述加热调控模块定向聚焦加热微小血管进行血管阻力调控。14.如权利要求13所述的一种心衰患者的睡眠监测及改善设备，其特征在于：还包括光电传感器，所述光电传感器用于实时感知末梢灌注提升情况并传输至所述控制器；所述控制器根据所述光电传感器反馈的末梢灌注提升情况调整步长，直至到达设定最大值，若血压仍不在目标血压附近，则唤醒患者，调整床位或增加口服药物。15.如权利要求13所述的一种心衰患者的睡眠监测及改善设备，其特征在于：所述压电传感阵列中的多个压电传感器形成多个测量点；所述加热调控模块采用射频线圈；所述电致收缩件为电致收缩条带。16.如权利要求14所述的一种心衰患者的睡眠监测及改善设备，其特征在于：所述电致收缩件、所述加热调控模块、所述光电传感器设置在下肢智能穿戴设备上，所述加热调控模块、所述光电传感器位于所述下肢智能穿戴设备的脚部区域，所述电致收缩件位于所述下肢智能穿戴设备的腿部区域，所述下肢智能穿戴设备上还设有无线通讯模块，所述电致收缩件、所述加热调控模块、所述光电传感器通过所述无线通讯模块与所述控制器通讯。
说明书desc
技术领域本发明涉及心衰监测技术领域，特别涉及一种心衰患者的睡眠监测及改善方法、设备及介质。背景技术目前，虽然有一些针对相对健康人群的睡眠监测和改善技术，但是对于心衰患者，仍然停留在睡前排尿、垫高枕头等传统建议，无法根据患者的情况进行动态调整。心衰如果不能得到很好的护理，容易引起心脏骤停，加快患者情况的恶化。发明内容为了实现根据本发明的上述目的和其他优点，本发明的第一目的是提供一种心衰患者的睡眠监测及改善方法，包括以下步骤：获取非接触式采集的心冲击图波形；通过所述心冲击图波形在心跳时实时准确获取收缩点信息；其中，收缩点信息包括在心冲击图中J峰后的L峰位置信息；根据所述收缩点信息启动电致收缩件按预设幅度收缩。进一步地，在所述根据所述收缩点信息启动电致收缩件按预设幅度收缩步骤之后还包括以下步骤：通过非接触式心冲击图计算血压；判断血压是否在目标血压附近；若血压不在目标血压附近，则启动加热调控模块定向聚焦加热微小血管进行血管阻力调控。进一步地，在所述启动加热调控模块步骤之后还包括以下步骤：根据接收到的末梢灌注提升情况调整加热调控模块的调控步长，直至到达设定最大值，若血压仍不在目标血压附近，则唤醒患者，调整床位或增加口服药物。进一步地，在所述获取非接触式采集的心冲击图波形步骤之后还包括以下步骤：将多个测量点间的心冲击图最大幅值比值与基线相比；若变化超过预设范围，则停止电致收缩件收缩。进一步地，所述通过所述心冲击图波形在心跳时实时准确获取收缩点信息步骤包括以下步骤：通过滑窗获得心冲击图的波形模板；其中，所述心冲击图的波形模板包括心冲击图的J峰的位置、高度、J峰和L峰之间距离；根据实时描记对后续的心冲击图波形进行预判，以及在预设范围内纠正。进一步地，所述根据实时描记对后续的心冲击图波形进行预判，以及在预设范围内纠正步骤包括以下步骤：在获取的新采集的在线波形中，若波形信噪比高于设定阈值，协方差超过设定阈值，峰值到达心冲击图的波形模板中心冲击图的J峰的高度的浮动范围，并在最高处开始下滑时，记为J峰；在心冲击图的波形模板中心冲击图的J峰和L峰之间距离的浮动范围内，若描记从峰值开始下降，则判断为L峰。进一步地，所述根据所述收缩点信息启动电致收缩件按预设幅度收缩步骤还包括在L峰后预设时间内启动电致收缩件。进一步地，还包括以下步骤:若心率变化超过预设范围，则通过动态时间归整算法对心冲击图的波形模板进行动态调整。进一步地，通过非接触式心冲击图计算血压步骤包括以下步骤：提取心冲击图的时域各特征峰的时间和幅值信息；提取频域主成分，并计算其时间复杂度或时间分形信息；将特征组合后输入贝叶斯神经网络，得到血压。进一步地，所述贝叶斯神经网络的构建包括以下步骤：将心冲击图数据分割成预设时间窗口；采用留一交叉验证方法划分数据；排除训练集中标准偏差为I或J峰值高于平均值预设范围或连续舒张压变化大于预设值的数据；提取各个特征峰以及两者之间的间隔；使用小波核执行连续的一维小波变换，然后对每个频谱分量进行傅里叶变换，提取长期频域波动，并计算其时间复杂度或时间分形信息；通过各个特征峰以及两者之间的间隔、长期频域波动生物特征、心率和呼吸特征构建BCG-BP模型；采用EasyEnsemble流程创建血压值的平衡分布，以及产生与基线测量相比的相对血压变化的平衡分布；采用贝叶斯神经网络对数据集进行训练，使用公开数据集的网络系数作为起点，改进自有数据集的BP估计；使用血压的平均绝对误差和受试者内BP相对于基线的波动评估算法的性能，测量预测和参考值之间的受试者间和受试者内相关性；将每个受试者的测量值作为校准数据点添加到训练过程中，以调整模型中的系数。本发明的第二目的是提供一种计算机可读存储介质，其上存储有程序指令，所述程序指令被执行时实现一种心衰患者的睡眠监测及改善方法。本发明的第三目的是提供一种心衰患者的睡眠监测及改善设备，实现上述的方法，包括压电传感阵列、控制器、电致收缩件；其中，所述压电传感阵列用于非接触式采集心冲击图波形；所述控制器用于通过所述心冲击图波形在心跳时实时准确获取收缩点信息，根据所述收缩点信息启动电致收缩件按预设幅度收缩；其中，收缩点信息包括在心冲击图中J峰后的L峰位置信息。进一步地，还包括加热调控模块，所述控制器通过非接触式心冲击图计算血压，判断血压是否在目标血压附近，若血压不在目标血压附近，则启动所述加热调控模块定向聚焦加热微小血管进行血管阻力调控。进一步地，还包括光电传感器，所述光电传感器用于实时感知末梢灌注提升情况并传输至所述控制器；所述控制器根据所述光电传感器反馈的末梢灌注提升情况调整步长，直至到达设定最大值，若血压仍不在目标血压附近，则唤醒患者，调整床位或增加口服药物。进一步地，所述压电传感阵列中的多个压电传感器形成多个测量点；所述加热调控模块采用射频线圈；所述电致收缩件为电致收缩条带。进一步地，所述电致收缩件、所述加热调控模块、所述光电传感器设置在下肢智能穿戴设备上，所述加热调控模块、所述光电传感器位于所述下肢智能穿戴设备的脚部区域，所述电致收缩件位于所述下肢智能穿戴设备的腿部区域，所述下肢智能穿戴设备上还设有无线通讯模块，所述电致收缩件、所述加热调控模块、所述光电传感器通过所述无线通讯模块与所述控制器通讯。与现有技术相比，本发明的有益效果是：本发明提供一种心衰患者的睡眠监测及改善方法、设备及存储介质，针对心衰患者睡眠中心脏负荷重、血压回流不畅影响心脏功能的问题，本发明通过设计压电监测床垫和调控袜的联动，实现智能体外反搏和加温调控，使得心脏得以休息。传统心脏收缩时间由贴片心电提供，能够保持准确的位置，且心脏收缩峰极易分辨。但是心电贴需要患者每晚自行佩戴，较为麻烦，易丢失，且具有不舒适性，对于轻中度心衰患者，负荷超出居家使用的范围。本发明使用方便的非接触式心冲击图进行心脏收缩时间分辨，简单舒适，可以居家睡眠使用。由于体外反搏技术需要精确的实时心脏收缩时间，且属于对误启动惩罚较高的技术。即，若在心脏射血期间启动肢体压缩，则对心脏有损害作用。因此，在居家环境中，本发明在心衰患者心跳时，实时准确获取收缩点，并在极短延时后启动体外反搏，排除误启动的风险。与传统体外反搏技术相比，本发明简单舒适，可以居家睡眠使用；与传统体外反搏技术不同，本发明启动快速，佩戴方便，可实现每晚的心脏康复护理。本发明的预期体外反搏能够一定程度上降低血压，当降压不理想时，启动射频加热进行血管阻力调控。血管在温热状态下舒张，其血流阻力反比于血管半径的四次方，因此血流阻力能够在较小的升温下，获得大幅的改善。传统加热方式可定位性差，热辐射容易导致心脏周边大血管的舒张，扰乱血流动力。由于血流阻力大部分由微小血管构成，仅加热微小血管能够起到最小干预、最大效果，且不扰乱总体血流动力。与传统加热方式相比，射频加热方式可精准定位，快速启动及关闭，可以根据设定程序以最小的加热调控实现心脏负荷的降低。本发明的智能袜集成光电脉搏传感器，可实时感知末梢灌注提升情况，判断血管舒张是否达到预期，再根据所述光电传感器反馈的末梢灌注提升情况调整射频加热的步长。与传统调控无法个体化不同，本发明根据实时监控结果对心衰患者末梢灌注提升情况进行智能调控，能够最大限度地实现心衰患者的舒适睡眠。上述说明仅是本发明技术方案的概述，为了能够更清楚了解本发明的技术手段，并可依照说明书的内容予以实施，以下以本发明的较佳实施例并配合附图详细说明如后。本发明的具体实施方式由以下实施例及其附图详细给出。附图说明此处所说明的附图用来提供对本发明的进一步理解，构成本申请的一部分，本发明的示意性实施例及其说明用于解释本发明，并不构成对本发明的不当限定。在附图中：图1为心力衰竭中心周期压力/体积关系的假设和从模型得出的心输出量曲线示意图；图2为实施例1的心衰患者的睡眠监测及改善设备示意图；图3为BCG与ECG示意图；图4为胸部以下传感器示意图；图5为胸部传感器测得BCG的峰值对比和时间差对比示意图；图6为滑窗信号匹配示意图；图7为动态缩放示意图；图8为体外反搏控制流程图；图9为通过BCG拟合血压示意图；图10为BCG时域信息提取示意图；图11为BCG频域信息提取示意图；图12为患者二维光谱的主要成分示意图；图13为健康人二维光谱的主要成分示意图；图14为贝叶斯神经网络示意图；图15为公开数据集到自有数据集的知识转移示意图；图16为传统体外反博系统示意图；图17为心衰患者的睡眠监测及改善设备工作流程图；图18为实施例2的心衰患者的睡眠监测及改善方法流程图；图19为实施例2的射频加热控制流程图；图20为实施例2的血管舒张控制流程图；图21为实施例2的心冲击图数据判断流程图；图22为实施例2的通过心冲击图波形在心跳时实时准确获取收缩点信息流程图；图23为实施例2的心冲击图的波形模板动态调整流程图；图24为实施例2的根据实时描记对后续的心冲击图波形进行预判流程图；图25为实施例2的通过非接触式心冲击图计算血压流程图；图26为实施例2的贝叶斯神经网络构建流程图；图27为实施例3的存储介质示意图。具体实施方式下面，结合附图以及具体实施方式，对本发明做进一步描述，需要说明的是，在不相冲突的前提下，以下描述的各实施例之间或各技术特征之间可以任意组合形成新的实施例。心衰主要分为两种，收缩期的心衰和舒张期的心衰。主要表现为：伴随的收缩力下降，缺血性心脏病和高血压。舒张期顺应性的变化，与缩窄性心包炎、心包填塞、淀粉样变性和心脏肥大有关。如图1所示，图1中的为收缩型衰竭心脏的压力/容量环模型，以Emax降低描述；图1中的为直接从图1中的中的模型得出的心输出量曲线，与正常心脏相比，受到压制;图1中的为舒张型心力衰竭模型，由舒张期硬度Ds增加描述;图1中的为从图1中的中的模型得出的心脏输出，与正常心脏相比，它们也受到抑制。对于收缩力下降的心衰患者，其主要问题在于血流阻力过大，在收缩力受损的情况下，心脏泵血量下降，血压升高，引起心血管损害。而对于舒张型心力衰竭患者，血液回流受到影响，心脏后负荷增加，损害心脏功能。一般来说，心衰患者都有不同程度的以上两种问题，为了做出个体化调整，本发明提供一种心衰患者的睡眠监测及改善方法、设备。实施例1一种心衰患者的睡眠监测及改善设备，如图2所示，包括压电传感阵列、控制器、电致收缩件；其中，压电传感阵列用于非接触式采集心冲击图波形；本实施例中，压电传感阵列中的多个压电传感器形成多个测量点；如图2所示，压电传感阵列可以埋在床垫下方，实现感知患者心跳周期、血压和血流阻力，心跳周期的感知可以引导体外反搏的心脏康复，减轻心脏后负荷；血压的感知能够协助血流阻力调控，以及获取调控效果。控制器用于通过心冲击图波形在心跳时实时准确获取收缩点信息，根据收缩点信息启动电致收缩件按预设幅度收缩；其中，收缩点信息包括在心冲击图中J峰后的L峰位置信息。体外反搏需要获得精确的实时心脏收缩时间，且属于对误启动惩罚较高的技术。即，若在心脏射血期间启动肢体压缩，则对心脏有损害作用。因此，在居家环境中，需要通过系统设计排除误启动的风险，在有一定风险时，停止体外反搏调控，实现居家较小剂量，但准确有效的调控。传统的心脏收缩时间由心电贴片提供，能够保持准确的位置，且心脏收缩峰极易分辨。但是心电贴片需要患者每晚自行佩戴，较为麻烦，易丢失，且具有不舒适性，对于轻中度心衰患者，负荷超出居家使用的范围。本实施例使用方便的非接触式心冲击图进行心脏收缩时间分辨。如图3所示，BCG的尖峰与ECG等效，能够获取准确的心脏收缩和舒张时间。由于睡姿不固定，BCG的峰值时间与心电标准峰值时间有不可预测的偏差。本实施例在非接触式BCG智能床垫下设置多个测量点，当患者显著偏离原有测量位置时，即当多个测量点间的BCG最大幅值比值与基线相比，变化超过15%时，体外反搏活动停止，仅保留射频加热调控。其中，15%是一个经验值，代表体重变化或者身高变化超过10kg或者10cm左右，如图4以及图5中的实验数据所示。为了从已经测量的长时BCG信号序列在心跳时，实时准确获取收缩点，并在极短延时后启动体外反搏。由于BCG的最高峰时间与测量位置相关，本实施例选取颈部BCG来计算J峰时间，可以通过寻峰算法按照心率周期选择最高的峰值，计算二阶导数最小，一阶导数为0得到，并在峰值后第二个峰值启动电致收缩件的压缩，L峰时间可以通过寻峰算法，计算二阶导数最小，一阶导数为0得到。选用L峰是为了安全起见，过早启动体外反搏会影响心脏射血，引起较为严重的后果。心衰患者的睡眠监测及改善设备的体外反搏控制流程如图8所示，患者佩戴设置有电致收缩件的智能袜，启动蓝牙与智能床垫配对，启动BCG信号采集。在患者刚躺下，拟进入睡眠状态时，采用滑窗技术，获得BCG的波形模板，并根据实时描记对接下来的波形进行预判，在一定变化范围内纠正。例如，在模板BCG波形中，BCG的J峰在200ms的位置，高度为A，J峰和L峰之间距离为100ms；那么在新的在线波形采集中，若波形信噪比高于设定阈值，协方差超过0.9，峰值到达A±10%A，并在最高处开始下滑的时候，记为J峰，在100ms±10ms的时刻，若描记从峰值开始下降，则判断为L峰，并在L峰后20ms内启动体外反搏，更新BCG模板。若上述任何一个条件不满足，则锁住体外反搏调控，等待BCG信号稳定，噪声降低。因为，当信噪比过低时，无法准确判定峰值；当相邻波形协方差小于0.9时，无法判定是否有异常状态发生，出于安全起见，在该种情况下不执行体外反搏；同理，当峰值差变化突兀时，不能排除体动或者其他异常，出于安全起见，在该种情况下不执行体外反搏。若心率有巨大改变，则对模板进行动态调整，使得模板整晚可用，如图6、图7所示。本实施例，采用动态时间规整对模板进行动态调整，动态时间规整是一种用于比较和测量两个时间序列之间相似度的方法。其主要思想是通过对两个时间序列进行对齐和规整，找到它们之间的最佳匹配。在进行对齐时，DTW允许时间序列在时间维度上进行弯曲，以便更好地匹配相似的部分。本实施例假设warp是一致性的，即对于一个心跳仅有一个缩放指数，在图7中表现为直线整体左移或右移，不需优化每一个像素点，可以大幅减少计算负担。DTW可以处理时间序列之间的长度差异和时间偏移，它允许在时间维度上进行弯曲，以适应不同的速度和持续时间。因此，DTW在处理不同速度、变速或部分相似的时间序列时非常有用。本实施例中，电致收缩件为电致收缩条带。采用具有高质量金属电极的NafionIPMC可以同时实现大的变形性和超快响应速度，具有电致收缩能力，可以起到“人造肌肉”的作用。本实施例在智能袜的腿部延申部分，加入电致收缩条带，可以以超快的速度实现心动周期内的体外反搏，有助于减轻心脏负担，降低血压，利于心脏康复。体外反搏是在心脏舒张期，通过在腿部施加压力，协助血液返流，减轻心脏负荷，降低血压，促使新的血管生成。如图16所示，现有的体外反搏技术价格昂贵，且一般仅在医疗场所使用，通过心电监测心动周期，在腿部设置三个压力气囊，协助心动周期内的血液周期性回流。本实施例，使用心冲击图，即通过智能床垫中的压电陶瓷或压电薄膜，感知心脏收缩的准确时间，不需要佩戴贴心电传感器，床传感器与智能调控袜通过蓝牙连接，可实现无感对接；使用电致收缩条带，可居家使用，并具有超快的响应速度。虽然条带施压在均匀性上不如气囊，其简单易用性，长期可用性可补偿其不足。如图2所示，还包括加热调控模块，控制器通过非接触式心冲击图计算血压，判断血压是否在目标血压附近，若血压不在目标血压附近，则启动加热调控模块定向聚焦加热微小血管进行血管阻力调控。本实施例中，加热调控模块采用射频线圈。如图2所示，还包括光电传感器，光电传感器用于实时感知末梢灌注提升情况并传输至控制器；控制器根据光电传感器反馈的末梢灌注提升情况调整步长，直至到达设定最大值，若血压仍不在目标血压附近，则唤醒患者，调整床位或增加口服药物。如图2所示，电致收缩件、加热调控模块、光电传感器设置在下肢智能穿戴设备上，加热调控模块、光电传感器位于下肢智能穿戴设备的脚部区域，电致收缩件位于下肢智能穿戴设备的腿部区域，下肢智能穿戴设备上还设有无线通讯模块，电致收缩件、加热调控模块、光电传感器通过无线通讯模块与控制器通讯。预期体外反搏能够一定程度上降低血压，当降压不理想时，启动射频加热调控。本实施例通过BCG非接触、无负荷的获得血压。具体的，提取BCG的时域各特征峰的时间和幅值信息，与此同时，提取频域主成分，并计算其时间复杂度或时间分形信息，特征组合后，输入贝叶斯神经网络进行训练。可使用平衡后的公开数据集进行预训练，以调整贝叶斯神经网络初始化参数，实现使用新的小数据集即可获得优秀的表现。总流程如图9所示。为了对BCG进行特征提取，将数据分割成5秒窗口，以便于可靠地估计呼吸率；采用留一交叉验证的数据划分，以避免训练和测试数据的污染；排除训练集中标准偏差为I或J峰值高于平均值30%或连续DBP变化大于10mmHg的数据。如图10所示，I、J、K和L峰等特征以及两者之间的间隔用于构建BCG-BP模型。使用形态特征的优点是可以解释每个峰的生理意义。例如，主动脉入口和出口血压波的产生大致与I波的起始和J波的高峰相对应。然而，这些特征容易受到环境干扰，并且单个特征所包含的信息有限。由于振动在全身的传递与频率有关。对于BCG信号，使用Morlet小波核执行连续的一维小波变换，然后对每个频谱分量进行傅里叶变换，以提取长期频域波动。因此，信号的频率-时间表示被频率-频率表示所取代。图11提供了这种两步频谱分析的详细图示，产生了具有高频细节和长期周期性的二维频谱。傅里叶变换的中心频率对于每次测量都是不同的，应该在心率附近。通过选择f0-0.25 Hz至f0+ 0.25 Hz的傅里叶频率范围和2至14 Hz的小波频率来标准化光谱图像。为了减少冗余信息，通过将二维矩阵重塑为一维数组并应用奇异值分解来压缩图11中显示的频谱。每个数据集计算前6个最重要的成分，然后将其重新塑造回2D光谱。最重要的谐波可能包含大部分信息。健康BCG数据集变异和患者数据集变异是不同的。可能的解释是住院患者心血管活动的异质性增加。频域的基函数如图12、图13所示。人体可以机械地建模为弹簧和阻尼器的组合。每次心跳都以不同的强度和时间发生，这导致身体和肢体振动具有不同的时间尺度。分形维数可用于估计振动在心血管树中传播引起的混沌模式。本实施例，使用Higuchi分形维度来描述这种混沌现象。本实施例增加了生物特征、心率和呼吸，以确保特征信息的完整性。为了建立BCG-BP模型，使用了输入个体信息，如年龄、体重和身高。年龄主要影响血管弹性，对主动脉血压和血流速度有不可忽视的影响。如果将人体建模为带有连接弹簧和阻尼器的分布重量，则从中央血压到身体运动的传递功能将变得高度个性化。需要体重和身高来估计传递函数。研究发现，年龄与健康群体的收缩压显著相关，如表1所示。相比之下，年龄与患者的收缩压或舒张压没有相关性。患者体重与血压之间的相关性较小，表明振动信号传递不规则。表1 受试者生理信息和BP的皮尔逊相关系数*表示生理参数与SBP/DBP之间存在显著相关性。呼吸调节BCG信号和血压波动中的较低频率。BCG信号通过截止频率为0.1Hz和0.5Hz的巴特沃兹带通滤波器。采用先进的峰值检测算法来减少环境干扰的影响。由于不需要逐拍心跳频率，因此使用主频率f0来计算心率。如果测量数据严重不平衡，学习的算法将专注于减少中位数血压周围的误差，从而降低判别力。为了解决这个问题并提高血压估计的准确性，采用了两个EasyEnsemble流程。第一个流程旨在创建血压值的平衡分布。将85mmHg和200mmHg之间的SBP读数划分为5mmHg的区间。对于DBP，范围为55mmHg至100mmHg。在每个区间中，随机选择相同数量的样本以确保平衡。第二个流程试图产生与基线测量相比的相对血压变化的平衡分布。基线是通过平均数据集的前5个测量值来建立的。对随后的血压读数进行重新采样，以创建均匀分布的ΔBP范围，范围从-50mmHg到50mmHg，步长为5mmHg。若区间中的样本数量不足，则包括所有可用数据。然后这些平衡数据集被用来产生训练回归算法和评估测试数据。值得注意的是，测试数据不需要平衡。执行了多次重采样迭代，并对所得算法进行平均以增强。多个ΔBP的组合会根据所选的起始基线和两者之间的时间间隔产生新的Δ血压。这些因素对算法性能的影响取决于数据的分布。特征的选择对于血压估计也很重要。在这项研究中，重点不是单个特征。相反，几种特征组合方案选择了频域+时域的方式来生成最终算法。为了使用选定的特征作为输入来计算血压，本实施例选择使用贝叶斯神经网络，如图14所示。特征对目标的贡献因查询点而异。贝叶斯优化能够在可能的神经网络上应用概率分布，减轻过拟合问题，使其更适合具有输入相关系数的算法。独立的BNN最初针对这两个数据集进行了训练。然后，使用公开数据集的网络系数作为起点，改进自有数据集的BP估计。使用血压的平均绝对误差和受试者内BP相对于基线的波动评估算法的性能，测量预测和参考值之间的受试者间和受试者内相关性。每个受试者的测量值作为校准数据点被添加到训练过程中，以调整模型中的系数。此外，从随后的血压估计中减去校准因子以提高准确性。迁移学习涉及将从预先训练的模型学到的知识转移到新的、相似但不同的任务。例如PPG-BP模型。本实施例中，采用迁移学习技术有两个原因。首先，一些研究还表明，通过不同技术测量的BCG可以相互转换。其次，可以访问具有可比传感技术的大型公共数据库，这使得迁移学习变得不那么复杂，特别是如果采用类似的预处理步骤。该过程如图15所示。从陶瓷传感器获得的分析特征按振幅缩放以匹配EMFi传感器的灵敏度，而频域特征则在100 Hz下重新采样。本实施例没有使用默认系数启动BNN训练，而是利用了数据集-KSU中预先训练的BNN。通过逐渐解冻层并使权重适应新数据集来进行微调。这种方法能够利用预训练模型的习得特征，在目标域中使用标记更少的数据来实现更好的性能。经过上述方法处理的数据和搭建的模型，能够得到血压评估结果，如表2所示。表2 新方案与已发表的方案对比TD为时域，FD为频域，HFD为分形指标，Bios为体征信息。如图17所示，在血压仍然偏高时，可以采取适当射频加热的方式进行血管阻力调控。血管在温热状态下舒张，其血流阻力反比于血管半径的四次方，因此血流阻力能够在较小的升温下，获得大幅的改善。传统加热方式可定位性差，热辐射容易导致心脏周边大血管的舒张，扰乱血流动力。由于血流阻力大部分由微小血管构成，仅加热微小血管能够起到最小干预、最大效果，且不扰乱总体血流动力。射频加热皮肤是一种医疗领域的非侵入性局域精准加热的技术。它利用射频能量通过皮肤表面加热组织，从而产生一系列生理效应，通过线圈的设计可实现能量的定向聚焦。它的原理是通过高频电流在皮肤组织中产生电阻，从而产生热能。射频加热可以促进血液循环，增加氧气和营养物质的输送到皮肤组织，促进新陈代谢和细胞再生。射频加热的另一个优点是，可以快速启动和调整加热强度，可以配合监测设备进行灵活而有效的时间序列编码。此外，智能袜集成光电脉搏传感器，可实时感知末梢灌注提升情况，判断血管舒张是否达到预期。其中，末梢灌注为脉搏的波动幅值/脉搏的基线。实施例2实施例1提供的心衰患者的睡眠监测及改善设备对应的心衰患者的睡眠监测及改善方法，关于设备的详细描述，可以参照上述设备实施例中的对应描述，在此不再赘述。如图18所示，该方法包括以下步骤：S1、获取非接触式采集的心冲击图波形；其中，心冲击图的采集是通过压电传感阵列实现的，本实施例中，压电传感阵列中的多个压电传感器形成多个测量点；如图2所示，压电传感阵列可以埋在床垫下方，实现感知患者心跳周期、血压和血流阻力，心跳周期的感知可以引导体外反搏的心脏康复，减轻心脏后负荷；血压的感知能够协助血流阻力调控，以及获取调控效果。由于睡姿不固定，BCG的峰值时间与心电标准峰值时间有不可预测的偏差。如图21所示，在获取非接触式采集的心冲击图波形步骤之后还包括以下步骤：S11、将多个测量点间的心冲击图最大幅值比值与基线相比；本实施例在非接触式BCG智能床垫下设置多个测量点，当患者显著偏离原有测量位置时，即当多个测量点间的BCG最大幅值比值与基线相比；S12、判断变化是否超过预设范围；S13、若变化超过预设范围，则停止电致收缩件收缩。即变化超过15%时，体外反搏活动停止，仅保留射频加热调控。其中，15%是一个经验值，代表体重变化或者身高变化超过10kg或者10cm左右，如图4以及图5中的实验数据所示。S14、若变化未超过预设范围，则继续执行后续步骤。体外反搏需要获得精确的实时心脏收缩时间，且属于对误启动惩罚较高的技术。即，若在心脏射血期间启动肢体压缩，则对心脏有损害作用。因此，在居家环境中，需要通过系统设计排除误启动的风险，在有一定风险时，停止体外反搏调控，实现居家较小剂量，但准确有效的调控。传统的心脏收缩时间由心电贴片提供，能够保持准确的位置，且心脏收缩峰极易分辨。但是心电贴片需要患者每晚自行佩戴，较为麻烦，易丢失，且具有不舒适性，对于轻中度心衰患者，负荷超出居家使用的范围。本实施例使用方便的非接触式心冲击图进行心脏收缩时间分辨。如图3所示，BCG的尖峰与ECG等效，能够获取准确的心脏收缩和舒张时间。S2、通过心冲击图波形在心跳时实时准确获取收缩点信息；其中，收缩点信息包括在心冲击图中J峰后的L峰位置信息；为了从已经测量的长时BCG信号序列在心跳时，实时准确获取收缩点，并在极短延时后启动体外反搏。由于BCG的最高峰时间与测量位置相关，本实施例选取颈部BCG来计算J峰时间，可以通过寻峰算法按照心率周期选择最高的峰值，计算二阶导数最小，一阶导数为0得到，并在峰值后第二个峰值启动电致收缩件的压缩，L峰时间可以通过寻峰算法，计算二阶导数最小，一阶导数为0得到。选用L峰是为了安全起见，过早启动体外反搏会影响心脏射血，引起较为严重的后果。如图22所示，通过心冲击图波形在心跳时实时准确获取收缩点信息步骤包括以下步骤：S21、通过滑窗获得心冲击图的波形模板；其中，心冲击图的波形模板包括心冲击图的J峰的位置、高度、J峰和L峰之间距离；例如，在模板BCG波形中，BCG的J峰在200ms的位置，高度为A，J峰和L峰之间距离为100ms；S22、根据实时描记对后续的心冲击图波形进行预判，以及在预设范围内纠正。如图24所示，具体包括以下步骤：S221、在获取的新采集的在线波形中，若波形信噪比高于设定阈值，协方差超过设定阈值，峰值到达心冲击图的波形模板中心冲击图的J峰的高度的浮动范围，并在最高处开始下滑时，记为J峰；S222、在心冲击图的波形模板中心冲击图的J峰和L峰之间距离的浮动范围内，若描记从峰值开始下降，则判断为L峰。并且，可以在L峰后20ms内启动体外反搏，更新BCG模板。若上述任何一个条件不满足，则锁住体外反搏调控，等待BCG信号稳定，噪声降低。因为，当信噪比过低时，无法准确判定峰值；当相邻波形协方差小于0.9时，无法判定是否有异常状态发生，出于安全起见，在该种情况下不执行体外反搏；同理，当峰值差变化突兀时，不能排除体动或者其他异常，出于安全起见，在该种情况下不执行体外反搏。若心率有巨大改变，则对模板进行动态调整，使得模板整晚可用，如图6、图7所示。如图23所示，还包括以下步骤:S23、若心率变化超过预设范围，则通过动态时间归整算法对心冲击图的波形模板进行动态调整。本实施例，采用动态时间规整对模板进行动态调整，动态时间规整是一种用于比较和测量两个时间序列之间相似度的方法。其主要思想是通过对两个时间序列进行对齐和规整，找到它们之间的最佳匹配。在进行对齐时，DTW允许时间序列在时间维度上进行弯曲，以便更好地匹配相似的部分。本实施例假设warp是一致性的，即对于一个心跳仅有一个缩放指数，在图7中表现为直线整体左移或右移，不需优化每一个像素点，可以大幅减少计算负担。DTW可以处理时间序列之间的长度差异和时间偏移，它允许在时间维度上进行弯曲，以适应不同的速度和持续时间。因此，DTW在处理不同速度、变速或部分相似的时间序列时非常有用。S3、根据收缩点信息启动电致收缩件按预设幅度收缩。本实施例，在L峰后预设时间内启动电致收缩件。本实施例中，电致收缩件为电致收缩条带。采用具有高质量金属电极的NafionIPMC可以同时实现大的变形性和超快响应速度，具有电致收缩能力，可以起到“人造肌肉”的作用。本实施例在智能袜的腿部延申部分，加入电致收缩条带，可以以超快的速度实现心动周期内的体外反搏，有助于减轻心脏负担，降低血压，利于心脏康复。体外反搏是在心脏舒张期，通过在腿部施加压力，协助血液返流，减轻心脏负荷，降低血压，促使新的血管生成。如图16所示，现有的体外反搏技术价格昂贵，且一般仅在医疗场所使用，通过心电监测心动周期，在腿部设置三个压力气囊，协助心动周期内的血液周期性回流。本实施例，使用心冲击图，即通过智能床垫中的压电陶瓷或压电薄膜，感知心脏收缩的准确时间，不需要佩戴贴心电传感器，床传感器与智能调控袜通过蓝牙连接，可实现无感对接；使用电致收缩条带，可居家使用，并具有超快的响应速度。虽然条带施压在均匀性上不如气囊，其简单易用性，长期可用性可补偿其不足。预期体外反搏能够一定程度上降低血压，当降压不理想时，启动射频加热调控。如图2所示，电致收缩件、加热调控模块、光电传感器设置在下肢智能穿戴设备上，加热调控模块、光电传感器位于下肢智能穿戴设备的脚部区域，电致收缩件位于下肢智能穿戴设备的腿部区域，下肢智能穿戴设备上还设有无线通讯模块，电致收缩件、加热调控模块、光电传感器通过无线通讯模块与控制器通讯。如图17所示，在血压仍然偏高时，可以采取适当射频加热的方式进行血管阻力调控。血管在温热状态下舒张，其血流阻力反比于血管半径的四次方，因此血流阻力能够在较小的升温下，获得大幅的改善。传统加热方式可定位性差，热辐射容易导致心脏周边大血管的舒张，扰乱血流动力。由于血流阻力大部分由微小血管构成，仅加热微小血管能够起到最小干预、最大效果，且不扰乱总体血流动力。射频加热皮肤是一种医疗领域的非侵入性局域精准加热的技术。它利用射频能量通过皮肤表面加热组织，从而产生一系列生理效应，通过线圈的设计可实现能量的定向聚焦。它的原理是通过高频电流在皮肤组织中产生电阻，从而产生热能。射频加热可以促进血液循环，增加氧气和营养物质的输送到皮肤组织，促进新陈代谢和细胞再生。射频加热的另一个优点是，可以快速启动和调整加热强度，可以配合监测设备进行灵活而有效的时间序列编码。如图19所示，在根据收缩点信息启动电致收缩件按预设幅度收缩步骤之后还包括以下步骤：S4、通过非接触式心冲击图计算血压；S5、判断血压是否在目标血压附近；S6、若血压不在目标血压附近，则启动加热调控模块定向聚焦加热微小血管进行血管阻力调控。此外，智能袜集成光电脉搏传感器，可实时感知末梢灌注提升情况，判断血管舒张是否达到预期。其中，末梢灌注为脉搏的波动幅值/脉搏的基线。如图20所示，在启动加热调控模块步骤之后还包括以下步骤：S7、根据接收到的末梢灌注提升情况调整加热调控模块的调控步长，直至到达设定最大值；S8、若血压仍不在目标血压附近，则唤醒患者，调整床位或增加口服药物。本实施例通过BCG非接触、无负荷的获得血压。具体的，如图25所示，通过非接触式心冲击图计算血压步骤包括以下步骤：S41、提取心冲击图的时域各特征峰的时间和幅值信息；S42、提取频域主成分，并计算其时间复杂度或时间分形信息；S43、将特征组合后输入贝叶斯神经网络，得到血压。为了使用选定的特征作为输入来计算血压，本实施例选择使用贝叶斯神经网络，如图14所示。特征对目标的贡献因查询点而异。贝叶斯优化能够在可能的神经网络上应用概率分布，减轻过拟合问题，使其更适合具有输入相关系数的算法。如图26所示，贝叶斯神经网络的构建包括以下步骤：S400、将心冲击图数据分割成预设时间窗口；本实施例为了对BCG进行特征提取，将数据分割成5秒窗口，以便于可靠地估计呼吸率；S401、采用留一交叉验证方法划分数据，以避免训练和测试数据的污染；S402、排除训练集中标准偏差为I或J峰值高于平均值预设范围或连续舒张压变化大于预设值的数据；例如，排除训练集中标准偏差为I或J峰值高于平均值30%或连续DBP变化大于10mmHg的数据。S403、提取各个特征峰以及两者之间的间隔；如图10所示，I、J、K和L峰等特征以及两者之间的间隔用于构建BCG-BP模型。使用形态特征的优点是可以解释每个峰的生理意义。例如，主动脉入口和出口血压波的产生大致与I波的起始和J波的高峰相对应。然而，这些特征容易受到环境干扰，并且单个特征所包含的信息有限。由于振动在全身的传递与频率有关。S404、对于BCG信号，使用小波核执行连续的一维小波变换，然后对每个频谱分量进行傅里叶变换，提取长期频域波动，并计算其时间复杂度或时间分形信息；因此，信号的频率-时间表示被频率-频率表示所取代。图11提供了这种两步频谱分析的详细图示，产生了具有高频细节和长期周期性的二维频谱。傅里叶变换的中心频率对于每次测量都是不同的，应该在心率附近。通过选择f0-0.25 Hz至f0+ 0.25 Hz的傅里叶频率范围和2至14 Hz的小波频率来标准化光谱图像。为了减少冗余信息，通过将二维矩阵重塑为一维数组并应用奇异值分解来压缩图11中显示的频谱。每个数据集计算前6个最重要的成分，然后将其重新塑造回2D光谱。最重要的谐波可能包含大部分信息。健康BCG数据集变异和患者数据集变异是不同的。可能的解释是住院患者心血管活动的异质性增加。频域的基函数如图12、图13所示。人体可以机械地建模为弹簧和阻尼器的组合。每次心跳都以不同的强度和时间发生，这导致身体和肢体振动具有不同的时间尺度。分形维数可用于估计振动在心血管树中传播引起的混沌模式。本实施例，使用Higuchi分形维度来描述这种混沌现象。特征的选择对于血压估计也很重要。在这项研究中，重点不是单个特征。相反，几种特征组合方案选择了频域+时域的方式来生成最终算法。本实施例增加了生物特征、心率和呼吸，以确保特征信息的完整性。S405、通过各个特征峰以及两者之间的间隔、长期频域波动生物特征、心率和呼吸特征构建BCG-BP模型；本实施例，为了建立BCG-BP模型，使用了输入个体信息，如年龄、体重和身高。年龄主要影响血管弹性，对主动脉血压和血流速度有不可忽视的影响。如果将人体建模为带有连接弹簧和阻尼器的分布重量，则从中央血压到身体运动的传递功能将变得高度个性化。需要体重和身高来估计传递函数。研究发现，年龄与健康群体的收缩压显著相关，如表1所示。相比之下，年龄与患者的收缩压或舒张压没有相关性。患者体重与血压之间的相关性较小，表明振动信号传递不规则。表1 受试者生理信息和BP的皮尔逊相关系数*表示生理参数与SBP/DBP之间存在显著相关性。呼吸调节BCG信号和血压波动中的较低频率。BCG信号通过截止频率为0.1Hz和0.5Hz的巴特沃兹带通滤波器。采用先进的峰值检测算法来减少环境干扰的影响。由于不需要逐拍心跳频率，因此使用主频率来计算心率。/＞如果测量数据严重不平衡，学习的算法将专注于减少中位数血压周围的误差，从而降低判别力。为了解决这个问题并提高血压估计的准确性，S406、采用EasyEnsemble流程创建血压值的平衡分布，以及产生与基线测量相比的相对血压变化的平衡分布；本实施例采用了两个EasyEnsemble流程。第一个流程旨在创建血压值的平衡分布。将85mmHg和200mmHg之间的SBP读数划分为5mmHg的区间。对于DBP，范围为55mmHg至100mmHg。在每个区间中，随机选择相同数量的样本以确保平衡。第二个流程试图产生与基线测量相比的相对血压变化的平衡分布。基线是通过平均数据集的前5个测量值来建立的。对随后的血压读数进行重新采样，以创建均匀分布的ΔBP范围，范围从-50mmHg到50mmHg，步长为5mmHg。若区间中的样本数量不足，则包括所有可用数据。然后这些平衡数据集被用来产生训练回归算法和评估测试数据。值得注意的是，测试数据不需要平衡。执行了多次重采样迭代，并对所得算法进行平均以增强。多个ΔBP的组合会根据所选的起始基线和两者之间的时间间隔产生新的Δ血压。这些因素对算法性能的影响取决于数据的分布。S407、采用贝叶斯神经网络对数据集进行训练，使用公开数据集的网络系数作为起点，改进自有数据集的BP估计；本实施例使用平衡后的公开数据集进行预训练，以调整贝叶斯神经网络初始化参数，实现使用新的小数据集即可获得优秀的表现。S408、使用血压的平均绝对误差和受试者内BP相对于基线的波动评估算法的性能，测量预测和参考值之间的受试者间和受试者内相关性；S409、将每个受试者的测量值作为校准数据点添加到训练过程中，以调整模型中的系数。此外，从随后的血压估计中减去校准因子以提高准确性。迁移学习涉及将从预先训练的模型学到的知识转移到新的、相似但不同的任务。例如PPG-BP模型。本实施例中，采用迁移学习技术有两个原因。首先，一些研究还表明，通过不同技术测量的BCG可以相互转换。其次，可以访问具有可比传感技术的大型公共数据库，这使得迁移学习变得不那么复杂，特别是如果采用类似的预处理步骤。该过程如图15所示。从陶瓷传感器获得的分析特征按振幅缩放以匹配EMFi传感器的灵敏度，而频域特征则在100 Hz下重新采样。本实施例没有使用默认系数启动BNN训练，而是利用了数据集-KSU中预先训练的BNN。通过逐渐解冻层并使权重适应新数据集来进行微调。这种方法能够利用预训练模型的习得特征，在目标域中使用标记更少的数据来实现更好的性能。经过上述方法处理的数据和搭建的模型，能够得到血压评估结果，如表2所示。表2 新方案与已发表的方案对比TD为时域，FD为频域，HFD为分形指标，Bios为体征信息。实施例3一种计算机可读存储介质，如图27所示，其上存储有程序指令，程序指令被执行时实现的一种心衰患者的睡眠监测及改善方法。关于方法的详细描述，可以参照上述方法实施例中的对应描述，在此不再赘述。还需要说明的是，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、商品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、商品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括要素的过程、方法、商品或者设备中还存在另外的相同要素。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上仅为本说明书实施例而已，并不用于限制本说明书一个或多个实施例。对于本领域技术人员来说，本说明书一个或多个实施例可以有各种更改和变换。凡在本说明书一个或多个实施例的精神和原理之内所作的任何修改、等同替换、改进等，均应包含在本说明书一个或多个实施例的权利要求范围之内。
