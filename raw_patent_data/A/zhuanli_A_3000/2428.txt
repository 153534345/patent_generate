标题title
一种沟畦灌溉自适应流量调控系统及方法
摘要abst
本发明公开了一种沟畦灌溉自适应流量调控系统及方法。所述系统，包括：自适应灌溉控制器和与自适应灌溉控制器连接的流量测量装置、流量调节装置和水流推进传感器；流量测量装置用于测量畦田的灌水流量；水流推进传感器用于测量畦田的水流推进位置；自适应灌溉控制器用于根据水流推进位置确定实际水流推进时间，根据实际水流推进时间、预设水流推进时间和灌水流量计算流量调节量，以及根据流量调节量确定目标流量；流量调节装置用于根据目标流量控制流入畦田的灌水流量。本发明能实现对流量的自适应控制，以提高灌水质量。
权利要求书clms
1.一种沟畦灌溉自适应流量调控系统，其特征在于，包括：自适应灌溉控制器和与所述自适应灌溉控制器连接的流量测量装置、流量调节装置和水流推进传感器；所述水流推进传感器为至少一个；所述流量测量装置用于测量畦田的灌水流量；所述水流推进传感器用于测量畦田的水流推进位置；所述自适应灌溉控制器用于根据所述水流推进位置确定实际水流推进时间，根据所述实际水流推进时间、预设水流推进时间和所述灌水流量计算流量调节量，以及根据所述流量调节量确定目标流量；所述流量调节装置用于根据所述目标流量控制流入畦田的灌水流量。2.根据权利要求1所述的一种沟畦灌溉自适应流量调控系统，其特征在于，所述自适应灌溉控制器内置有自适应控制模块；所述自适应控制模块，具体包括：推进时间确定单元，用于根据所述水流推进位置确定实际水流推进时间；预设时间确定单元，用于根据预设水流推进时间曲线确定与所述水流推进位置相对应的预设水流推进时间；所述预设水流推进时间曲线是预设灌水方案输入畦灌模拟模型中得到的；所述预设灌水方案是根据灌溉设计参数，并采用畦灌模拟模型在设定试算范围内进行试算得到的；流量调节量计算单元，用于根据ΔQ＝a×D×eb×+Q+c计算流量调节量；其中，ΔQ表示流量调节量；x为实际水流推进时间；T为预设水流推进时间；D为畦宽；Q为流量测量装置测得的畦田的灌水流量；a、b和c均为流量调节系数；目标调节量计算单元，用于将所述实际水流推进时间和所述预设水流推进时间进行比较，根据比较结果确定所述流量调节量，以及根据所述流量调节量确定目标流量。3.根据权利要求1所述的一种沟畦灌溉自适应流量调控系统，其特征在于，还包括：无线通讯装置；所述自适应灌溉控制器通过所述无线通讯装置分别与所述流量测量装置、所述流量调节装置和所述水流推进传感器连接。4.根据权利要求1所述的一种沟畦灌溉自适应流量调控系统，其特征在于，所述流量测量装置和所述流量调节装置位于靠近畦首的位置；所述水流推进传感器为多个；多个所述水流推进传感器设置在畦田中且位于靠近畦尾的位置；多个所述水流推进传感器相对于所述畦尾的距离不同。5.一种沟畦灌溉自适应流量调控方法，其特征在于，所述方法用于如权利要求1-4中任意一项所述的沟畦灌溉自适应流量调控系统；所述方法包括：获取当前水流推进传感器发送的当前水流推进位置和流量测量装置发送的畦田的当前灌水流量；所述当前水流推进传感器为当前时刻水流推进到的位置处的水流推进传感器；根据所述当前水流推进位置确定当前实际水流推进时间；根据所述当前实际水流推进时间、预设水流推进时间和所述当前灌水流量计算当前流量调节量，并根据所述当前流量调节量确定当前目标流量；将所述当前目标流量发送至流量调节装置，以使得所述流量调节装置根据所述当前目标流量控制流入畦田的灌水流量。6.根据权利要求5所述的一种沟畦灌溉自适应流量调控方法，其特征在于，所述根据所述当前实际水流推进时间、预设水流推进时间和所述当前灌水流量计算当前流量调节量，并根据所述当前流量调节量确定当前目标流量，具体包括：根据所述当前灌水流量判断当前水流推进传感器是否位于停水位置，得到第一判断结果；若所述第一判断结果为是，则控制流量调节装置停止向畦田灌水；若所述第一判断结果为否，则将所述当前实际水流推进时间和所述预设水流推进时间进行比较，得到比较结果；若所述比较结果为所述当前实际水流推进时间小于所述预设水流推进时间，则判断所述当前灌水流量是否为预设最小流量，得到第二判断结果；若所述第二判断结果为是，则将当前灌水流量确定为当前目标流量；若所述第二判断结果为否，则计算当前流量调节量，并将所述当前灌水流量减去所述当前流量调节量，得到当前目标流量；若所述比较结果为所述当前实际水流推进时间大于所述预设水流推进时间，则判断所述当前灌水流量是否为预设最大流量，得到第三判断结果；若所述第三判断结果为是，则将当前灌水流量确定为当前目标流量；若所述第三判断结果为否，则计算当前流量调节量，并将所述当前灌水流量加上所述当前流量调节量，得到当前目标流量。7.根据权利要求6所述的一种沟畦灌溉自适应流量调控方法，其特征在于，所述当前流量调节量的计算公式为：ΔQ＝a×D×eb×+Q+c；其中，ΔQ表示流量调节量；x为实际水流推进时间；T为预设水流推进时间；D为畦宽；Q为流量测量装置测得的畦田的灌水流量；a、b和c均为流量调节系数。8.根据权利要求5所述的一种沟畦灌溉自适应流量调控方法，其特征在于，所述预设水流推进时间的确定方法为：获取灌溉设计参数；根据所述灌溉设计参数，采用畦灌模拟模型在设定试算范围内进行试算，得到预设灌水方案；所述设定试算范围包括设定单宽流量的试算范围和设定改水成数的试算范围；所述预设灌水方案包括灌水均匀度和灌水效率的均值均最大时对应的灌水流量和改水成数；所述灌水流量为单宽流量与畦宽的乘积；将预设灌水方案输入所述畦灌模拟模型中得到预设水流推进时间曲线；根据所述预设水流推进时间曲线确定与所述当前水流推进位置相对应的预设水流推进时间。9.根据权利要求8所述的一种沟畦灌溉自适应流量调控方法，其特征在于，所述设定单宽流量的试算范围为3-7L s-1m-1，所述设定改水成数的试算范围为0.8-0.9。10.根据权利要求6所述的一种沟畦灌溉自适应流量调控方法，其特征在于，所述根据所述当前灌水流量判断当前水流推进传感器是否位于停水位置，具体包括：由所述当前灌水流量确定当前单宽流量；由所述当前单宽流量确定当前改水成数；将当前改水成数与畦长的乘积确定为停水位置。
说明书desc
技术领域本发明涉及农业灌溉领域，特别是涉及一种沟畦灌溉自适应流量调控系统及方法。背景技术随着农业劳动力向其它产业的大量转移，农业规模化种植越来越普遍，农田灌溉不断朝着自动化方向发展。但是由于农田坡度、糙率和入渗参数等灌溉设计参数存在显著的时空变异性，使得实际灌溉过程中田面水流的推进与消退曲线往往偏离预设灌水方案的推进消退曲线，导致灌水质量降低。发明内容基于此，本发明实施例提供一种沟畦灌溉自适应流量调控系统及方法，以提高灌水质量。为实现上述目的，本发明提供了如下方案：一种沟畦灌溉自适应流量调控系统，包括：自适应灌溉控制器和与所述自适应灌溉控制器连接的流量测量装置、流量调节装置和水流推进传感器；所述水流推进传感器为至少一个；所述流量测量装置用于测量畦田的灌水流量；所述水流推进传感器用于测量畦田的水流推进位置；所述自适应灌溉控制器用于根据所述水流推进位置确定实际水流推进时间，根据所述实际水流推进时间、预设水流推进时间和所述灌水流量计算流量调节量，以及根据所述流量调节量确定目标流量；所述流量调节装置用于根据所述目标流量控制流入畦田的灌水流量。可选的，所述自适应灌溉控制器内置有自适应控制模块；所述自适应控制模块，具体包括：推进时间确定单元，用于根据所述水流推进位置确定实际水流推进时间；预设时间确定单元，用于根据预设水流推进时间曲线确定与所述水流推进位置相对应的预设水流推进时间；所述预设水流推进时间曲线是预设灌水方案输入畦灌模拟模型中得到的；所述预设灌水方案是根据灌溉设计参数，并采用畦灌模拟模型在设定试算范围内进行试算得到的；流量调节量计算单元，用于根据ΔQ＝a×D×eb×+Q+c计算流量调节量；其中，ΔQ表示流量调节量；x为实际水流推进时间；T为预设水流推进时间；D为畦宽；Q为流量测量装置测得的畦田的灌水流量；a、b和c均为流量调节系数；目标调节量计算单元，用于将所述实际水流推进时间和所述预设水流推进时间进行比较，根据比较结果确定所述流量调节量，以及根据所述流量调节量确定目标流量。可选的，所述沟畦灌溉自适应流量调控系统，还包括：无线通讯装置；所述自适应灌溉控制器通过所述无线通讯装置分别与所述流量测量装置、所述流量调节装置和所述水流推进传感器连接。可选的，所述流量测量装置和所述流量调节装置位于靠近畦首的位置；所述水流推进传感器为多个；多个所述水流推进传感器设置在畦田中且位于靠近畦尾的位置；多个所述水流推进传感器相对于所述畦尾的距离不同。一种沟畦灌溉自适应流量调控方法，所述方法用于上述所述的沟畦灌溉自适应流量调控系统；所述方法包括：获取当前水流推进传感器发送的当前水流推进位置和流量测量装置发送的畦田的当前灌水流量；所述当前水流推进传感器为当前时刻水流推进到的位置处的水流推进传感器；根据所述当前水流推进位置确定当前实际水流推进时间；根据所述当前实际水流推进时间、预设水流推进时间和所述当前灌水流量计算当前流量调节量，并根据所述当前流量调节量确定当前目标流量；将所述当前目标流量发送至流量调节装置，以使得所述流量调节装置根据所述当前目标流量控制流入畦田的灌水流量。可选的，所述根据所述当前实际水流推进时间、预设水流推进时间和所述当前灌水流量计算当前流量调节量，并根据所述当前流量调节量确定当前目标流量，具体包括：根据所述当前灌水流量判断当前水流推进传感器是否位于停水位置，得到第一判断结果；若所述第一判断结果为是，则控制流量调节装置停止向畦田灌水；若所述第一判断结果为否，则将所述当前实际水流推进时间和所述预设水流推进时间进行比较，得到比较结果；若所述比较结果为所述当前实际水流推进时间小于所述预设水流推进时间，则判断所述当前灌水流量是否为预设最小流量，得到第二判断结果；若所述第二判断结果为是，则将当前灌水流量确定为当前目标流量；若所述第二判断结果为否，则计算当前流量调节量，并将所述当前灌水流量减去所述当前流量调节量，得到当前目标流量；若所述比较结果为所述当前实际水流推进时间大于所述预设水流推进时间，则判断所述当前灌水流量是否为预设最大流量，得到第三判断结果；若所述第三判断结果为是，则将当前灌水流量确定为当前目标流量；若所述第三判断结果为否，则计算当前流量调节量，并将所述当前灌水流量加上所述当前流量调节量，得到当前目标流量。可选的，所述当前流量调节量的计算公式为：ΔQ＝a×D×eb×+Q+c；其中，ΔQ表示流量调节量；x为实际水流推进时间；T为预设水流推进时间；D为畦宽；Q为流量测量装置测得的畦田的灌水流量；a、b和c均为流量调节系数。可选的，所述预设水流推进时间的确定方法为：获取灌溉设计参数；根据所述灌溉设计参数，采用畦灌模拟模型在设定试算范围内进行试算，得到预设灌水方案；所述设定试算范围包括设定单宽流量的试算范围和设定改水成数的试算范围；所述预设灌水方案包括灌水均匀度和灌水效率的均值均最大时对应的灌水流量和改水成数；所述灌水流量为单宽流量与畦宽的乘积；将预设灌水方案输入所述畦灌模拟模型中得到预设水流推进时间曲线；根据所述预设水流推进时间曲线确定与所述当前水流推进位置相对应的预设水流推进时间。可选的，所述设定单宽流量的试算范围为3-7L s-1m-1，所述设定改水成数的试算范围为0.8-0.9。可选的，所述根据所述当前灌水流量判断当前水流推进传感器是否位于停水位置，具体包括：由所述当前灌水流量确定当前单宽流量；由所述当前单宽流量确定当前改水成数；将当前改水成数与畦长的乘积确定为停水位置。与现有技术相比，本发明的有益效果是：本发明实施例提出了一种沟畦灌溉自适应流量调控系统及方法。所述系统，包括：自适应灌溉控制器和与自适应灌溉控制器连接的流量测量装置、流量调节装置和水流推进传感器；自适应灌溉控制器根据水流推进传感器测得的水流推进位置确定实际水流推进时间，根据实际水流推进时间、预设水流推进时间和流量调节装置测得的灌水流量计算流量调节量，以及根据流量调节量确定目标流量；流量调节装置根据目标流量控制流入畦田的灌水流量，从而实现了对流量的自适应控制，避免了灌水过程中偏离预设灌水方案，提高了灌水质量。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例提供的沟畦灌溉自适应流量调控系统的示意图；图2为本发明实施例提供的沟畦灌溉自适应流量调控方法的流程图；图3为本发明一个更为具体的实施例提供的沟畦灌溉自适应流量调控方法的具体实现过程图；图4为本发明实施例提供的预设推进时间曲线与实时推进时间曲线的对比图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。为使本发明的上述目的、特征和优点能够更加明显易懂，下面结合附图和具体实施方式对本发明作进一步详细的说明。目前，为了解决灌水质量降低这一问题，其主要思路是通过传感器在灌水过程中获取水流推进数据，然后实时反演糙率和入渗参数，并依此确定最优灌溉流量或停水时间。这种反馈控制的灌溉系统，虽然能取得较高的灌水质量，但是需要实时计算各条畦田的土壤入渗参数和糙率并带入相关模型模拟灌水，过于繁琐。因此，需要开发一种无需反演参数的自适应流量调控系统。参见图1，本实施例提供的沟畦灌溉自适应流量调控系统，包括：自适应灌溉控制器和与所述自适应灌溉控制器连接的流量测量装置1、流量调节装置2和水流推进传感器4；所述水流推进传感器4为至少一个。所述流量测量装置1用于实时测量畦田的灌水流量；所述水流推进传感器4用于测量畦田的水流推进位置；所述自适应灌溉控制器3用于根据所述水流推进位置确定实际水流推进时间，根据所述实际水流推进时间、预设水流推进时间和所述灌水流量计算流量调节量，以及根据所述流量调节量确定目标流量；所述流量调节装置2用于根据所述目标流量控制流入畦田的灌水流量。在一个示例中，所述自适应灌溉控制器3内置有自适应控制模块；所述自适应控制模块，具体包括：推进时间确定单元，用于根据所述水流推进位置确定实际水流推进时间，具体的，根据所述水流推进位置和内置的灌水时间确定实际水流推进时间。预设时间确定单元，用于根据预设水流推进时间曲线确定与所述水流推进位置相对应的预设水流推进时间；所述预设水流推进时间曲线是预设灌水方案输入畦灌模拟模型中得到的，所述畦灌模拟模型可以为WinSRFR模型或SRIMOD模型；所述预设灌水方案是根据灌溉设计参数，并采用畦灌模拟模型在设定试算范围内进行试算得到的。流量调节量计算单元，用于根据ΔQ＝a×D×eb×+Q+c计算流量调节量；其中，ΔQ表示流量调节量，L s-1；x为实际水流推进时间，min；T为预设水流推进时间，min；D为畦宽，m；Q为流量测量装置测得的畦田的灌水流量，L s-1；e为自然对数底数，一般取值2.72；a、b和c均为流量调节系数，取值由当地畦田实际情况确定，此处取值分别为3.101、0.035和-3.3。目标调节量计算单元，用于将所述实际水流推进时间和所述预设水流推进时间进行比较，根据比较结果确定所述流量调节量，以及根据所述流量调节量确定目标流量。具体的，若所述比较结果为所述当前实际水流推进时间小于所述预设水流推进时间，则判断所述当前灌水流量是否为预设最小流量，得到第二判断结果；若所述第二判断结果为是，则将当前灌水流量确定为当前目标流量；若所述第二判断结果为否，则计算当前流量调节量，并将所述当前灌水流量减去所述当前流量调节量，得到当前目标流量。若所述比较结果为所述当前实际水流推进时间大于所述预设水流推进时间，则判断所述当前灌水流量是否为预设最大流量，得到第三判断结果；若所述第三判断结果为是，则将当前灌水流量确定为当前目标流量；若所述第三判断结果为否，则计算当前流量调节量，并将所述当前灌水流量加上所述当前流量调节量，得到当前目标流量。若所述比较结果为所述当前实际水流推进时间等于所述预设水流推进时间，则保持当前灌水流量，即将当前灌水流量确定为当前目标流量。在一个示例中，所述沟畦灌溉自适应流量调控系统，还包括：无线通讯装置5；所述自适应灌溉控制器3通过所述无线通讯装置5分别与所述流量测量装置1、所述流量调节装置2和所述水流推进传感器4连接。所述自适应灌溉控制器3通过所述无线通讯装置5与所述流量测量装置1、所述流量调节装置2和水流推进传感器4通讯，传输数据和命令。在一个示例中，所述流量测量装置1和所述流量调节装置2位于靠近畦首的位置；所述水流推进传感器4为多个；多个所述水流推进传感器4设置在畦田中，可反映水流的推进位置；多个所述水流推进传感器4位于靠近畦尾的位置；多个所述水流推进传感器4相对于所述畦尾的距离不同。在一个示例中，流量测量装置1可以为采用电磁流量计。流量调节装置2可以为电动阀。自适应灌溉控制器3根据内置规律和算法，对采集到的流量、灌溉时间、水流推进位置等信息，控制流量调节装置2实现畦灌的自适应调控，自适应灌溉控制器3可以采用单片机。无线通讯装置5可以采用ZigBee。所述水流推进传感器4可以为水深传感器，例如，所述水流推进传感器4包括3～6只水深传感器，这些水深传感器依次安装于畦田的中后段。在实际应用中，可以在畦田中设置五个水流推进传感器4，如图1所示。本实施例还提供了一种沟畦灌溉自适应流量调控方法，所述方法用于上述实施例中的沟畦灌溉自适应流量调控系统；所述方法包括：步骤101：获取当前水流推进传感器4发送的当前水流推进位置和流量测量装置1发送的畦田的当前灌水流量。所述当前水流推进传感器4为当前时刻水流推进到的位置处的水流推进传感器4。步骤102：根据所述当前水流推进位置确定当前实际水流推进时间。步骤103：根据所述当前实际水流推进时间、预设水流推进时间和所述当前灌水流量计算当前流量调节量，并根据所述当前流量调节量确定当前目标流量。步骤104：将所述当前目标流量发送至流量调节装置2，以使得所述流量调节装置2根据所述当前目标流量控制流入畦田的灌水流量。在一个示例中，所述步骤103，具体包括：根据所述当前灌水流量判断当前水流推进传感器是否位于停水位置，得到第一判断结果。停水位置的确定方法为：由所述当前灌水流量确定当前单宽流量；由所述当前单宽流量确定当前改水成数；将当前改水成数与畦长的乘积确定为停水位置。若6L s-1m-1≤当前单宽流量≤7L s-1m-1，则当前改水成数为八成改水，若4L s-1m-1＜当前单宽流量＜6L s-1m-1，则当前改水成数为八五改水，若3L s-1m-1≤当前单宽流量≤4L s-1m-1，则当前改水成数为九成改水。改水成数是指停水时田面水流推进距离与畦长的比值，改水成数由最后一次调节的单宽流量决定。若所述第一判断结果为是，则控制流量调节装置2停止向畦田灌水。若所述第一判断结果为否，则将所述当前实际水流推进时间和所述预设水流推进时间进行比较，得到比较结果。若所述比较结果为所述当前实际水流推进时间小于所述预设水流推进时间，则判断所述当前灌水流量是否为预设最小流量，得到第二判断结果；若所述第二判断结果为是，则将当前灌水流量确定为当前目标流量；若所述第二判断结果为否，则计算当前流量调节量，并将所述当前灌水流量减去所述当前流量调节量，得到当前目标流量。预设最小流量为预设最小单宽流量乘以畦宽，预设最小单宽流量设置为3L s-1m-1。所述当前流量调节量的计算公式为：ΔQ＝a×D×eb×+Q+c；其中，ΔQ表示流量调节量；x为实际水流推进时间；T为预设水流推进时间；D为畦宽；Q为流量测量装置测得的畦田的灌水流量；a、b和c均为流量调节系数。各个时刻对应的流量调节量均可以采用上式计算，对于当前时刻，公式中的各个参量均为当前时刻对应的参量值，计算出的ΔQ也就表示当前流量调节量。若所述比较结果为所述当前实际水流推进时间大于所述预设水流推进时间，则判断所述当前灌水流量是否为预设最大流量，得到第三判断结果；若所述第三判断结果为是，则将当前灌水流量确定为当前目标流量；若所述第三判断结果为否，则计算当前流量调节量，并将所述当前灌水流量加上所述当前流量调节量，得到当前目标流量。预设最大流量为预设最大单宽流量乘以畦宽，最大单宽流量设置为7L s-1m-1。若所述比较结果为所述当前实际水流推进时间等于所述预设水流推进时间，则保持当前灌水流量，即将当前灌水流量确定为当前目标流量。在实际应用中，所述步骤103可具体为：沿畦长方向预设3～5个水流推进传感器4，即有3～5个水流推进监测点，按照预设灌水方案进行灌水，当水流推进到相应监测点时，计算从灌溉开始至水流推进到该监测点的时间，如果实际水流推进时间小于预设推进时间，则先判断目前灌水流量是否为系统的预设最小流量，若是则保持不变，若不是则根据实际水流推进时间与预设推进时间的差值相应调小流量；如果实际水流推进时间大于预设推进时间，则先判断目前灌水流量是否为系统的预设最大流量，若是则保持不变，若不是则根据实际水流推进时间与预设推进时间的差值相应调大流量；当水流推进到的监测点是设定的停水位置时，停止灌水。本示例通过比较实际水流推进时间与预设灌水方案中预设水流推进时间来判断如何调节流量，无需实时计算土壤入渗参数和糙率，大大提高了畦灌灌水质量、增加了畦灌自动灌溉系统的实用性。在一个示例中，所述预设水流推进时间的确定方法为：获取灌溉设计参数。具体的，可以从农田中选取1～3条畦，测得畦田规格、田面坡度、入渗参数和糙率等灌溉设计参数。根据所述灌溉设计参数，采用畦灌模拟模型在设定试算范围内进行试算，得到预设灌水方案；所述设定试算范围包括设定单宽流量的试算范围和设定改水成数的试算范围；所述预设灌水方案包括灌水均匀度和灌水效率的均值均最大时对应的灌水流量和改水成数，即预设灌水方案为灌水流量和改水成数的组合；所述灌水流量为单宽流量与畦宽的乘积。其中，所述设定单宽流量的试算范围为3-7L s-1m-1，所述设定改水成数的试算范围为0.8-0.9。将预设灌水方案输入所述畦灌模拟模型中得到预设水流推进时间曲线。根据所述预设水流推进时间曲线确定与所述当前水流推进位置相对应的预设水流推进时间。下面以河北省沧州市南皮县3m×100m畦田灌水中应用为例，对上述沟畦灌溉自适应流量调控方法进行具体说明。在畦灌系统中，灌溉设计参数变差对田面水流运动的影响一般会在水流推进到畦田的中后段才会较明显。针对100m畦田，每条畦田布置5个水流水深传感器，分别布置在距离畦首40m、60m、70m、80m、90m处。畦灌系统的最大流量为最大单宽流量乘以畦宽，最小流量为最小单宽流量乘以畦宽。由于受水源、坡度等因素制约，为了取得高灌水质量，当地畦灌单宽流量范围通常为3-7L s-1m-1。在本实施例中，设置的调节流量为：最大流量设置为21Ls-1，最小流量设置为9L s-1。停水位置由改水成数乘以畦长得到，改水成数由最后一次调节的单宽流量决定，在本实施例中，若6L s-1m-1≤单宽流量≤7L s-1m-1，则八成改水，若4L s-1m-1＜单宽流量＜6L s-1m-1，则八五改水，若3L s-1m-1≤单宽流量≤4L s-1m-1，则九成改水。如图3所示，沟畦灌溉自适应流量调控方法，具体包括以下过程：从农田中选取3条相邻的畦，分别测得这3条畦的畦田规格、田面坡度，进行灌水，灌水单宽流量为4.5L s-1m-1，85m停水，观测水流推进消退时间，并将这些数据带入WinSRFR模型，反演入渗参数、糙率等灌溉设计参数。依据测得的灌溉设计参数，利用WinSRFR畦灌模拟模型寻找到灌水均匀度和灌水效率的均值最大的灌水流量与改水成数的组合：流量12L s-1九成改水。将预设灌水方案输入WinSRFR模型，得到预设灌水方案的水流推进时间。将预设灌水方案水流推进时间曲线输入单片机。对其余畦按照预设灌水方案进行灌水，开始灌水时，单片机开始计时，电磁流量计监测灌水流量并发送给控制器。灌溉水流推进到40m时，该位置的水流水深传感器发送信号给单片机，单片机记录水流推进到40m的时间。单片机判断水流未到停水位置，然后将实际水流推进时间与预设灌水方案的水流推进时间进行比较，40m处的实际水流推进时间小于预设推进时间，且目前灌水单宽流量为4Ls-1m-1，单片机根据实际水流推进时间与预设推进时间的差值计算出流量需调小到9L s-1，向电动阀发送指令。电动阀接收到指令后，将流量调至9L s-1，电磁流量计向单片机反馈调节后的流量。灌溉水流推进到60m时，该位置的水流水深传感器发送信号给单片机，单片机记录水流推进到60m的时间。单片机判断水流未到停水位置，然后将实际水流推进时间与预设灌水方案的水流推进时间进行比较，60m处的实际水流推进时间小于预设推进时间，且目前灌水流量9Ls-1，是系统的最小流量，单片机不向电动阀发送指令。灌溉水流推进到70m时，该位置的水流水深传感器发送信号给单片机，单片机记录水流推进到70m的时间。单片机判断水流未到停水位置，然后将实际水流推进时间与预设灌水方案的水流推进时间进行比较，70m处的实际水流推进时间大于预设推进时间，且目前灌水流量不是系统最大流量，单片机根据实际水流推进时间与预设推进时间的差值计算出流量需调大到21L s-1，向电动阀发送指令。流电动阀接收到指令后，将流量调至21L s-1，电磁流量计向单片机反馈调节后的流量。灌溉水流推进到80m时，该位置的水流水深传感器发送信号给单片机，单片机记录水流推进到80m的时间。目前灌水流量是21L s-1，对应80m停水，单片机判断水流到达到停水位置，向电动阀发送停水的指令。电动阀接收到指令后，关闭畦灌水源。上述过程中涉及到的预设推进时间曲线与实时推进时间曲线的对比图如图4所示。本说明书中各个实施例采用递进的方式描述，每个实施例重点说明的都是与其他实施例的不同之处，各个实施例之间相同相似部分互相参见即可。对于实施例公开的系统而言，由于其与实施例公开的方法相对应，所以描述的比较简单，相关之处参见方法部分说明即可。本文中应用了具体个例对本发明的原理及实施方式进行了阐述，以上实施例的说明只是用于帮助理解本发明的方法及其核心思想；同时，对于本领域的一般技术人员，依据本发明的思想，在具体实施方式及应用范围上均会有改变之处。综上所述，本说明书内容不应理解为对本发明的限制。
