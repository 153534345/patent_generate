标题title
一种田间棉花智能精准打顶装置
摘要abst
本发明涉及一种田间棉花智能精准打顶装置。现有的棉花打顶装置在田间环境下打顶作业时难以完全兼顾打顶效率和打顶精度，常常存在打不准和漏打的情形。本发明的打顶装置通过一个深度相机进行田间环境棉花顶芽识别并控制机械臂完成打顶作业，并通过另一个深度相机对已作业区域进行二次检测和打顶作业，降低漏打棉花顶芽数量。与此同时，根据所检测的棉花顶芽数量和三维空间位置，自动实时调整棉花打顶装置的运行速度并对打顶机械臂位置进行补偿校准，按X轴坐标顺序挨个进行打顶作业，实现动态作业过程的棉花顶芽精准打顶作业，大大提高棉花顶芽打顶精度和效率。
权利要求书clms
1.一种田间棉花智能精准打顶装置，用于实现棉花打顶后的二次检测及去顶作业，其特征在于，该田间棉花智能精准打顶装置包括田间移动平台、三自由度打顶机械臂、深度相机A、深度相机B、田间移动平台控制器和微型深度学习板卡；所述田间移动平台用于承载包括三自由度打顶机械臂、深度相机A、深度相机B、田间移动平台控制器和微型深度学习板卡在内的组件，可自主进行田间移动；所述三自由度打顶机械臂安装于所述田间移动平台的底面中心位置，其末端可到达可及范围内任意空间点处；所述深度相机A沿所述田间移动平台行进方向，设置于所述三自由度打顶机械臂安装点的前侧，用于检测所述三自由度打顶机械臂所能覆盖全部打顶区域的前半部，识别区域内棉花顶芽，为所述三自由度打顶机械臂提供首次打顶依据；所述深度相机B沿所述田间移动平台行进方向，设置于所述三自由度打顶机械臂安装点的后侧，用于检测所述三自由度打顶机械臂所能覆盖全部打顶区域的后半部，用于对已进行打顶作业的区域进行二次检测，识别其中未能成功打顶的棉花顶芽，为所述三自由度打顶机械臂提供二次打顶依据；所述田间移动平台控制器用于控制及反馈所述田间移动平台的运动速度和姿态信息；所述微型深度学习板卡用于获取深度相机A和深度相机B的采集数据，进行实时处理，并将处理结果发送至所述田间移动平台控制器，以控制棉花打顶和二次打顶作业的精准执行。2.根据权利要求1所述的棉花智能精准打顶装置，其特征在于，深度相机A、深度相机B及三自由度打顶机械臂安装于同一水平面，且三者的相对位置固定不变。3.根据权利要求1所述的棉花智能精准打顶装置，其特征在于，所述三自由度机械臂末端安装棉花顶芽切割刀片，针对检测到的棉花顶芽目标通过物理切除的方式去顶。4.根据权利要求1所述的棉花智能精准打顶装置，其特征在于，所述微型深度学习板卡用于处理深度相机A和深度相机B的数据，并采用改进型深度学习网络分别提取深度相机A和深度相机B所采集图像中的各棉花顶芽区域，且以检测到的各棉花顶芽区域的中心点位置信息作为该棉花顶芽的位置，获取各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置，并将棉花顶芽数量、各顶芽三维空间位置、顶芽识别算法耗时等多个参数发送至田间移动平台控制器；田间移动平台控制器根据接收的信息，采用不同的控制策略，控制田间移动平台及三自由度打顶机械臂配合进行棉花打顶作业。5.根据权利要求4所述的棉花智能精准打顶装置，其特征在于，所述微型深度学习板卡分别计算深度相机A和深度相机B所采集图像中心区域内各棉花顶芽的数量，并根据数量多少，通过田间移动平台控制器控制田间移动平台的移动速度，并结合顶芽识别算法耗时及三自由度打顶机械臂末端由当前位置运动至目标位置处所需时间，对机械臂的三维空间位置进行补偿调整，以保证田间移动平台移动过程动态打顶精度。6.根据权利要求5所述的棉花智能精准打顶装置，其特征在于，对田间移动平台的移动速度进行控制，具体采用如下方式，其中，V为田间移动平台的实时移动速度，a为深度相机A所识别棉花顶芽数量，b为深度相机B所识别棉花顶芽数量，V0为常数，可人工设置，不超过0.3m/s。7.根据权利要求6所述的棉花智能精准打顶装置，其特征在于，对机械臂的三维空间位置进行补偿，具体采用如下方式，步骤S1，记录从深度相机拍摄棉花顶芽图像至识别出目标棉花顶芽的耗时，记为Δt1；步骤S2，根据机械臂的运动速度，计算机械臂末端由当前位置移动至目标棉花顶芽位置处耗时，记为Δt2；步骤S3，对识别到的各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置进行补偿计算，具体补偿计算方式为：其中，为补偿前计算所得各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置坐标，X为移动平台移动方向坐标，Y为水平面上与移动平台移动方向垂直的方向坐标，Z为与水平面垂直方向的坐标，为补偿后各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置坐标，为实际打顶作业所依据的三维空间位置坐标。8.根据权利要求7所述的棉花智能精准打顶装置，其特征在于，当视场中出现多个棉花顶芽后时，所述三自由度打顶机械臂按照设定的规则，按X轴坐标顺序挨个进行打顶作业，节省所述三自由度打顶机械臂在不同目标之间切换运动耗时，提升打顶效率；具体规则为：令a+b＝n，将n个目标的三维空间位置坐标按照X’n从小到大进行打顶作业顺序设定，并据此计算补偿后各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置坐标。
说明书desc
技术领域本发明属于农业自动化领域，具体涉及一种田间棉花智能精准打顶装置，用于田间环境棉花顶芽精准高效打顶。背景技术棉花具有无限生长的习性，顶端优势明显。通过摘除顶心，能控制主茎的生长，协调营养生长与生殖生长，促使养分更多的运向果枝，供应结实器官，减少无效果枝。目前，棉花打顶技术有人工打顶、机械打顶、化学打顶等三种。随着农业可持续性发展需求，迫切需要能够实现田间棉花自动、高效、精准的打顶方法。目前，新疆石河子大学团队针对棉花打顶关键技术开展了相关研究，如论文“棉花打顶机棉株高度识别技术的研究”，“基于机器视觉技术的棉株识别系统研究”等，针对盆栽棉花，基于双目视觉技术从侧面拍照进行棉株定位和棉株高度计算，为棉花打顶机构的高度调节提供依据。但其采用侧面成像，定位目标为棉株而非待去顶的对象。发明专利“一种田间棉花自动打顶装置”提出了一种基于深度学习及并联机械臂的棉花打顶方案，但未考虑一次打顶失败后的补打措施。本发明提出一种田间棉花智能精准打顶装置，可实现棉花打顶后的二次检测及去顶作业，有效解决智能打顶装置一次打顶作业过程不可避免发生打顶失败的情况，大大提高打顶精度。同时，实现了动态打顶过程作业速度自适应调控和打顶机械臂末端位置自动补偿，进一步提高打顶成功率和效率。发明内容要解决的技术问题本发明的目的就是为了克服上述现有技术的不足，提供一种田间棉花智能精准打顶装置。技术方案为了解决上述问题，本发明提供了如下技术方案，提出了一种田间棉花智能精准打顶装置，技术方案具体如下。一种田间棉花智能精准打顶装置，用于实现棉花打顶后的二次检测及去顶作业，其特征在于，该田间棉花智能精准打顶装置包括田间移动平台、三自由度打顶机械臂、深度相机A、深度相机B、田间移动平台控制器和微型深度学习板卡；所述田间移动平台用于承载包括三自由度打顶机械臂、深度相机A、深度相机B、田间移动平台控制器和微型深度学习板卡在内的组件，可自主进行田间移动；所述三自由度打顶机械臂安装于所述田间移动平台的底面中心位置，其末端可到达可及范围内任意空间点处；所述深度相机A沿所述田间移动平台行进方向，设置于所述三自由度打顶机械臂安装点的前侧，用于检测所述三自由度打顶机械臂所能覆盖全部打顶区域的前半部，识别区域内棉花顶芽，为所述三自由度打顶机械臂提供首次打顶依据；所述深度相机B沿所述田间移动平台行进方向，设置于所述三自由度打顶机械臂安装点的后侧，用于检测所述三自由度打顶机械臂所能覆盖全部打顶区域的后半部，用于对已进行打顶作业的区域进行二次检测，识别其中未能成功打顶的棉花顶芽，为所述三自由度打顶机械臂提供二次打顶依据；所述田间移动平台控制器用于控制及反馈所述田间移动平台的运动速度和姿态信息；所述微型深度学习板卡用于获取深度相机A和深度相机B的采集数据，进行实时处理，并将处理结果发送至所述田间移动平台控制器，以控制棉花打顶和二次打顶作业的精准执行。更具体地，深度相机A、深度相机B及三自由度打顶机械臂安装于同一水平面，且三者的相对位置固定不变。更具体地，所述三自由度机械臂末端安装棉花顶芽切割刀片，针对检测到的棉花顶芽目标通过物理切除的方式去顶。更具体地，所述微型深度学习板卡用于处理深度相机A和深度相机B的数据，并采用改进型深度学习网络分别提取深度相机A和深度相机B所采集图像中的各棉花顶芽区域，且以检测到的各棉花顶芽区域的中心点位置信息作为该棉花顶芽的位置，获取各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置，并将棉花顶芽数量、各顶芽三维空间位置、顶芽识别算法耗时等多个参数发送至田间移动平台控制器；田间移动平台控制器根据接收的信息，采用不同的控制策略，控制田间移动平台及三自由度打顶机械臂配合进行棉花打顶作业。更具体地，所述微型深度学习板卡分别计算深度相机A和深度相机B所采集图像中心区域内各棉花顶芽的数量，并根据数量多少，通过田间移动平台控制器控制田间移动平台的移动速度，并结合顶芽识别算法耗时及三自由度打顶机械臂末端由当前位置运动至目标位置处所需时间，对机械臂的三维空间位置进行补偿调整，以保证田间移动平台移动过程动态打顶精度。更具体地，对田间移动平台的移动速度进行控制，具体采用如下方式，其中，V为田间移动平台的实时移动速度，a为深度相机A所识别棉花顶芽数量，b为深度相机B所识别棉花顶芽数量，V0为常数，可人工设置，不超过0.3m/s。更具体地，对机械臂的三维空间位置进行补偿，具体采用如下方式，步骤S1，记录从深度相机拍摄棉花顶芽图像至识别出目标棉花顶芽的耗时，记为Δt1；步骤S2，根据机械臂的运动速度，计算机械臂末端由当前位置移动至目标棉花顶芽位置处耗时，记为Δt2；步骤S3，对识别到的各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置进行补偿计算，具体补偿计算方式为：其中，为补偿前计算所得各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置坐标，X为移动平台移动方向坐标，Y为水平面上与移动平台移动方向垂直的方向坐标，Z为与水平面垂直方向的坐标，为补偿后各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置坐标，为实际打顶作业所依据的三维空间位置坐标。更具体地，当视场中出现多个棉花顶芽后时，所述三自由度打顶机械臂按照设定的规则，按X轴坐标顺序挨个进行打顶作业，节省所述三自由度打顶机械臂在不同目标之间切换运动耗时，提升打顶效率；具体规则为：令a+b＝n，将n个目标的三维空间位置坐标按照X’n从小到大进行打顶作业顺序设定，并据此计算补偿后各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置坐标。有益效果相对于现有技术而言，本发明提供的一种田间棉花智能精准打顶装置具备显著积极的技术效果，具体表现在如下方面。作业效率高。本发明可实现打顶机器人在移动过程中进行打顶作业，通过实时反馈调节移动平台的移动速度，实现移动过程中也能精准定位和作业，作业效率高。识别定位精度高。本发明采用两个深度相机分别安装于打顶机械臂前后两侧，不但可以解决机械臂打顶作业过程遮挡深度相机视场问题，同时在识别完成后马上进行目标三维定位，累计误差小，识别定位精度高。作业精度高。本发明采用两个深度相机，在只采用一套打顶机械臂的前提下，实现棉花顶芽的二次识别定位并实现第一次打顶失败后的二次补打顶，且实现了动态打顶过程速度自适应调节和打顶机械臂空间位置补偿，按顺序依次打顶，大大提高作业精度。可扩展性好。本发明实现了棉花打顶机器人田间环境对棉花顶芽的动态识别定位及实时二次作业打顶，大大提高作业效率和精度。可扩展应用于田间精准除草、采摘、喷药等多个应用场景，具有很好的扩展性。附图说明图1为本发明的装置结构示意图；图2为打顶作业过程中的区域覆盖范围示意图。其中，1-深度相机A，2-深度相机B，3-三自由度打顶机械臂，4-刀片，5-田间移动平台，6-深度相机A的检测范围，7-三自由度打顶机械臂水平面内运动范围，8-深度相机B的检测范围，9-棉花种植范围具体实施方式下面结合附图及实施案例进一步说明本发明。一种田间棉花智能精准打顶装置，如图1所示，用于实现棉花打顶后的二次检测及去顶作业，其特征在于，该田间棉花智能精准打顶装置包括田间移动平台、三自由度打顶机械臂、深度相机A、深度相机B、田间移动平台控制器和微型深度学习板卡；所述田间移动平台用于承载包括三自由度打顶机械臂、深度相机A、深度相机B、田间移动平台控制器和微型深度学习板卡在内的组件，可自主进行田间移动；所述三自由度打顶机械臂安装于所述田间移动平台的底面中心位置，其末端可到达可及范围内任意空间点处；所述深度相机A沿所述田间移动平台行进方向，设置于所述三自由度打顶机械臂安装点的前侧，用于检测所述三自由度打顶机械臂所能覆盖全部打顶区域的前半部，识别区域内棉花顶芽，为所述三自由度打顶机械臂提供首次打顶依据；所述深度相机B沿所述田间移动平台行进方向，设置于所述三自由度打顶机械臂安装点的后侧，用于检测所述三自由度打顶机械臂所能覆盖全部打顶区域的后半部，用于对已进行打顶作业的区域进行二次检测，识别其中未能成功打顶的棉花顶芽，为所述三自由度打顶机械臂提供二次打顶依据，区域覆盖范围示意图如图2所示；所述田间移动平台控制器用于控制及反馈所述田间移动平台的运动速度和姿态信息；所述微型深度学习板卡用于获取深度相机A和深度相机B的采集数据，进行实时处理，并将处理结果发送至所述田间移动平台控制器，以控制棉花打顶和二次打顶作业的精准执行。更具体地，深度相机A、深度相机B及三自由度打顶机械臂安装于同一水平面，且三者的相对位置固定不变。更具体地，所述三自由度机械臂末端安装棉花顶芽切割刀片，针对检测到的棉花顶芽目标通过物理切除的方式去顶。更具体地，所述微型深度学习板卡用于处理深度相机A和深度相机B的数据，并采用改进型深度学习网络分别提取深度相机A和深度相机B所采集图像中的各棉花顶芽区域，且以检测到的各棉花顶芽区域的中心点位置信息作为该棉花顶芽的位置，获取各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置，并将棉花顶芽数量、各顶芽三维空间位置、顶芽识别算法耗时等多个参数发送至田间移动平台控制器；田间移动平台控制器根据接收的信息，采用不同的控制策略，控制田间移动平台及三自由度打顶机械臂配合进行棉花打顶作业。更具体地，所述微型深度学习板卡分别计算深度相机A和深度相机B所采集图像中心区域内各棉花顶芽的数量，并根据数量多少，通过田间移动平台控制器控制田间移动平台的移动速度，并结合顶芽识别算法耗时及三自由度打顶机械臂末端由当前位置运动至目标位置处所需时间，对机械臂的三维空间位置进行补偿调整，以保证田间移动平台移动过程动态打顶精度。更具体地，对田间移动平台的移动速度进行控制，具体采用如下方式，其中，V为田间移动平台的实时移动速度，a为深度相机A所识别棉花顶芽数量，b为深度相机B所识别棉花顶芽数量，V0为常数，可人工设置，不超过0.3m/s。更具体地，对机械臂的三维空间位置进行补偿，具体采用如下方式，步骤S1，记录从深度相机拍摄棉花顶芽图像至识别出目标棉花顶芽的耗时，记为Δt1；步骤S2，根据机械臂的运动速度，计算机械臂末端由当前位置移动至目标棉花顶芽位置处耗时，记为Δt2；步骤S3，对识别到的各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置进行补偿计算，具体补偿计算方式为：其中，为补偿前计算所得各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置坐标，X为移动平台移动方向坐标，Y为水平面上与移动平台移动方向垂直的方向坐标，Z为与水平面垂直方向的坐标，为补偿后各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置坐标，为实际打顶作业所依据的三维空间位置坐标。更具体地，当视场中出现多个棉花顶芽后时，所述三自由度打顶机械臂按照设定的规则，按X轴坐标顺序挨个进行打顶作业，节省所述三自由度打顶机械臂在不同目标之间切换运动耗时，提升打顶效率；具体规则为：令a+b＝n，将n个目标的三维空间位置坐标按照X’n从小到大进行打顶作业顺序设定，并据此计算补偿后各棉花顶芽相对于所述三自由度打顶机械臂的三维空间位置坐标。所述三自由度机械臂水平面内运动范围为48*48cm，垂直运动范围为30cm，以满足单行棉花实际生产模式打顶作业。所述深度相机A，深度相机B及三自由度打顶机械臂安装于同一水平面，且相对位置固定不变，具体的：所述水平面距离待打顶棉花冠层平均高度为40cm，所述深度相机A安装于距离所述三自由度打顶机械臂中心点正前方12.5cm处，深度相机B安装于距离所述三自由度打顶机械臂中心点正后方12.5cm处。针对两个深度获取的图像，均截取其中心25cm*50cm区域内的数据处理。以提高数据处理效率。申请中所描述的具体实例仅是对本发明精神作举例说明。本发明所属技术领域的技术人员可对本发明所描述的具体实例做各种修改或者补充，或采用类型的方式替代，但并不会偏离本发明的精神或超越所附权利要求书所定义的范围。
