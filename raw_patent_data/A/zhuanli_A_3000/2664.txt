标题title
数据处理方法及装置
摘要abst
本申请涉及胶囊内窥镜技术领域，提供一种数据处理方法及装置。包括：若接收到数据传输指令，则基于双通道接收目标胶囊内窥镜发送的图像数据，得到第一通道图像数据与第二通道图像数据；确定所述第一通道图像数据是否完整；若所述第一通道图像数据完整，则对所述第一通道图像数据中各数据包的循环冗余校验CRC值进行信息校验，得到第一校验结果；若所述第一校验结果为所述第一通道图像数据中存在数据包的CRC值未通过校验，则基于所述第一通道图像数据与所述第二通道图像数据进行数据比对，得到目标图像数据。本申请可减少与胶囊内窥镜进行数据传输时的误码率与丢图率，提高数据传输效率。
权利要求书clms
1.一种数据处理方法，其特征在于，包括：若接收到数据传输指令，则基于双通道接收目标胶囊内窥镜发送的图像数据，得到第一通道图像数据与第二通道图像数据；确定所述第一通道图像数据是否完整；若所述第一通道图像数据完整，则对所述第一通道图像数据中各数据包的循环冗余校验CRC值进行信息校验，得到第一校验结果；若所述第一校验结果为所述第一通道图像数据中存在数据包的CRC值未通过校验，则基于所述第一通道图像数据与所述第二通道图像数据进行数据比对，得到目标图像数据；若所述第一通道图像数据存在数据丢失，则确定所述第二通道图像数据中是否存在所述第一通道图像数据中的丢失数据对应的补全数据；若所述第二通道图像数据中存在所述补全数据，则对所述补全数据对应的CRC值进行信息校验，得到第四校验结果；若所述第四校验结果为所述补全数据对应的CRC值通过校验，则将所述补全数据补全至所述第一通道图像数据，得到目标图像数据。2.根据权利要求1所述的数据处理方法，其特征在于，所述基于所述第一通道图像数据与所述第二通道图像数据进行数据比对，得到目标图像数据的步骤包括：基于所述第一通道图像数据与所述第二通道图像数据的数据包比对，确定所述第二通道图像数据中是否存在与所述第一通道图像数据中CRC值未通过校验的数据包对应的目标数据包；若所述第二通道图像数据中存在所述目标数据包，则对所述目标数据包的CRC值进行信息校验，得到第二校验结果；若所述第二校验结果为所述目标数据包的CRC值未通过校验，则基于所述目标数据包与所述第一通道图像数据进行数据块比对，得到目标图像数据。3.根据权利要求2所述的数据处理方法，其特征在于，所述基于所述目标数据包与所述第一通道图像数据进行数据块比对，得到目标图像数据的步骤包括：确定所述第一通道图像数据CRC值未通过校验的数据包的各数据块中，导致数据包的CRC值未通过校验的第一目标数据块；确定所述目标数据包的各数据块中，是否存在与所述第一目标数据块对应的第二目标数据块；若目标数据包的各数据块中存在所述第二目标数据块，则基于所述第二目标数据块与所述第一通道图像数据确定目标图像数据。4.根据权利要求3所述的数据处理方法，其特征在于，所述基于所述第二目标数据块与所述第一通道图像数据确定目标图像数据的步骤包括：对所述第二目标数据块的CRC值进行信息校验，得到第三校验结果；若所述第三校验结果为所述第二目标数据块的CRC值通过校验，则根据所述第二目标数据块替换所述第一通道图像数据中的第一目标数据块，将数据替换后且通过CRC值信息验证的第一通道图像数据确定为目标图像数据。5.根据权利要求1所述的数据处理方法，其特征在于，所述对所述第一通道图像数据中各数据包的CRC值进行信息校验，得到第一校验结果的步骤包括：确定所述第一通道图像数据中各数据包的初始CRC值；分别计算所述第一通道图像数据中各数据包的CRC值；将所述第一通道图像数据中各数据包的CRC值分别与所述第一通道图像数据中各数据包的初始CRC值进行对比，得到第一校验结果。6.根据权利要求1所述的数据处理方法，其特征在于，所述对所述第一通道图像数据中各数据包的CRC值进行信息校验，得到第一校验结果的步骤之后，还包括：若所述第一校验结果为所述第一通道图像数据中各数据包的CRC值均通过校验，则将所述第一通道图像数据确定为目标图像数据。7.一种数据处理装置，其特征在于，包括：接收模块，用于若接收到数据传输指令，则基于双通道接收目标胶囊内窥镜发送的图像数据，得到第一通道图像数据与第二通道图像数据；确定模块，用于确定所述第一通道图像数据是否完整；校验模块，用于若所述第一通道图像数据完整，则对所述第一通道图像数据中各数据包的CRC值进行信息校验；比对模块，用于若所述第一通道图像数据中存在数据包的CRC值未通过校验，则基于所述第一通道图像数据与所述第二通道图像数据进行数据比对，得到目标图像数据；所述对比模块，还用于若所述第一通道图像数据存在数据丢失，则确定所述第二通道图像数据中是否存在所述第一通道图像数据中的丢失数据对应的补全数据；若所述第二通道图像数据中存在所述补全数据，则对所述补全数据对应的CRC值进行信息校验，得到第四校验结果；若所述第四校验结果为所述补全数据对应的CRC值通过校验，则将所述补全数据补全至所述第一通道图像数据，得到目标图像数据。8.一种电子设备，包括处理器和存储有计算机程序的存储器，其特征在于，所述处理器执行所述计算机程序时实现权利要求1至6任一项所述的数据处理方法的步骤。9.一种计算机存储介质，所述计算机存储介质为计算机可读存储介质，包括计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至6任一项所述的数据处理方法的步骤。
说明书desc
技术领域本申请涉及胶囊内窥镜技术领域，具体涉及一种数据处理方法及装置。背景技术传统的胶囊内窥镜在进行无线传输数据时，为了降低误码率、丢图率，通常的做法是调整速率、数据包长度、传输带宽等，因为速率越低、数据包长度越短，传输带宽越窄，数据包丢失的可能性就越低，传输距离就越长，穿透力也越强。胶囊内窥镜在进行无线传输数据时，通过降低速率、设置窄带宽、缩短数据包长度等手段，虽然可以降低误码率，并进一步降低丢图率，但会使数据传输速率明显下降，导致进行数据传输时的效率低。发明内容本申请实施例提供一种数据处理方法及装置，用以解决通过调整速率、数据包长度、传输带宽等参数降低误码率、丢图率，使数据传输速率明显下降，导致进行数据传输时的效率低的技术问题。第一方面，本申请实施例提供一种数据处理方法，包括：若接收到数据传输指令，则基于双通道接收目标胶囊内窥镜发送的图像数据，得到第一通道图像数据与第二通道图像数据；确定所述第一通道图像数据是否完整；若所述第一通道图像数据完整，则对所述第一通道图像数据中各数据包的循环冗余校验CRC值进行信息校验，得到第一校验结果；若所述第一校验结果为所述第一通道图像数据中存在数据包的CRC值未通过校验，则基于所述第一通道图像数据与所述第二通道图像数据进行数据比对，得到目标图像数据。在一个实施例中，所述基于所述第一通道图像数据与所述第二通道图像数据进行数据比对，得到目标图像数据的步骤包括：基于所述第一通道图像数据与所述第二通道图像数据的数据包比对，确定所述第二通道图像数据中是否存在与所述第一通道图像数据中CRC值未通过校验的数据包对应的目标数据包；若所述第二通道图像数据中存在所述目标数据包，则对所述目标数据包的CRC值进行信息校验，得到第二校验结果；若所述第二校验结果为所述目标数据包的CRC值未通过校验，则基于所述目标数据包与所述第一通道图像数据进行数据块比对，得到目标图像数据。在一个实施例中，所述基于所述目标数据包与所述第一通道图像数据进行数据块比对，得到目标图像数据的步骤包括：确定所述第一通道图像数据CRC值未通过校验的数据包的各数据块中，导致数据包的CRC值未通过校验的第一目标数据块；确定所述目标数据包的各数据块中，是否存在与所述第一目标数据块对应的第二目标数据块；若目标数据包的各数据块中存在所述第二目标数据块，则基于所述第二目标数据块与所述第一通道图像数据确定目标图像数据。在一个实施例中，所述基于所述第二目标数据块与所述第一通道图像数据确定目标图像数据的步骤包括：对所述第二目标数据块的CRC值进行信息校验，得到第三校验结果；若所述第三校验结果为所述第二目标数据块的CRC值通过校验，则根据所述第二目标数据块替换所述第一通道图像数据中的第一目标数据块，将数据替换后且通过CRC值信息验证的第一通道图像数据确定为目标图像数据。在一个实施例中，所述确定所述第一通道图像数据是否完整的步骤之后，还包括：若所述第一通道图像数据存在数据丢失，则确定所述第二通道图像数据中是否存在所述第一通道图像数据中的丢失数据对应的补全数据；若所述第二通道图像数据中存在所述补全数据，则对所述补全数据对应的CRC值进行信息校验，得到第四校验结果；若所述第四校验结果为所述补全数据对应的CRC值通过校验，则将所述补全数据补全至所述第一通道图像数据，得到目标图像数据。在一个实施例中，所述对所述第一通道图像数据中各数据包的CRC值进行信息校验，得到第一校验结果的步骤包括：确定所述第一通道图像数据中各数据包的初始CRC值；分别计算所述第一通道图像数据中各数据包的CRC值；将所述第一通道图像数据中各数据包的CRC值分别与所述第一通道图像数据中各数据包的初始CRC值进行对比，得到第一校验结果。在一个实施例中，所述对所述第一通道图像数据中各数据包的CRC值进行信息校验，得到第一校验结果的步骤之后，还包括：若所述第一校验结果为所述第一通道图像数据中各数据包的CRC值均通过校验，则将所述第一通道图像数据确定为目标图像数据。第二方面，本申请实施例提供一种数据处理装置，包括：接收模块，用于若接收到数据传输指令，则基于双通道接收目标胶囊内窥镜发送的图像数据，得到第一通道图像数据与第二通道图像数据；确定模块，用于确定所述第一通道图像数据是否完整；校验模块，用于若所述第一通道图像数据完整，则对所述第一通道图像数据中各数据包的CRC值进行信息校验；比对模块，用于若所述第一通道图像数据中存在数据包的CRC值未通过校验，则基于所述第一通道图像数据与所述第二通道图像数据进行数据比对，得到目标图像数据。第三方面，本申请实施例提供一种电子设备，包括处理器和存储有计算机程序的存储器，所述处理器执行所述程序时实现第一方面或第二方面所述的数据处理方法的步骤。第四方面，本申请实施例提供一种计算机存储介质，所述计算机存储介质为计算机可读存储介质，包括计算机程序，计算机程序被处理器执行时实现第一方面或第二方面所述的数据处理方法的步骤。本申请实施例提供的数据处理方法及装置，在接收到数据传输指令时，通过双通道接收目标胶囊内窥镜发送的图像数据，并在接收的第一通道图像数据完整但存在任一数据包的CRC值未通过校验时，基于第一通道图像数据与第二通道图像数据的数据比对，准确地确定出目标图像数据，可减少与胶囊内窥镜进行数据传输时的误码率与丢图率，以避免通过降低速率、设置窄带宽、缩短数据包长度等手段降低误码率与丢图率所带来的使数据传输速率明显下降的问题，进而可以提高数据传输效率。附图说明为了更清楚地说明本申请或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本申请实施例提供的数据处理方法的流程示意图之一；图2是本申请实施例提供的数据处理方法的流程示意图之二；图3是本申请数据处理装置实施例的功能模块示意图；图4是本申请实施例提供的电子设备的结构示意图。具体实施方式为使本申请的目的、技术方案和优点更加清楚，下面将结合本申请实施例中的附图，对本申请中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。现有的胶囊内窥镜在无线传输数据时，为了降低误码率、丢图率，通常的做法是调整速率、数据包长度、传输带宽等，因为速率越低、数据包长度越短、传输带宽越窄，数据包丢失的可能性就越低，传输距离就越长，穿透力也越强。但是，胶囊内窥镜在无线传输数据时，通过降低速率、缩小带宽、缩短数据包长度等手段虽然可以降低误码率，最终降低丢图率，但也有很明显的缺点，就是速率会明显的下降，降低图片传输的帧率，进而导致进行数据传输时的效率低。下面结合实施例对本发明提供的数据处理方法及装置进行详细描述。图1为本申请实施例提供的数据处理方法的流程示意图之一。参照图1，本申请实施例提供一种数据处理方法，可以包括：步骤S100，若接收到数据传输指令，则基于双通道接收目标胶囊内窥镜发送的图像数据，得到第一通道图像数据与第二通道图像数据；需要说明的是，本实施例中提供的一种数据处理方法可以应用于数据记录仪、服务器、PC甚至智能手机等电子设备中。其中，上述的各种电子设备均可以与胶囊内窥镜进行通信，可以与胶囊内窥镜进行数据收发，并可以对接收的数据进行处理与存储。胶囊内窥镜又称胶囊内窥镜，是一种做成胶囊形状的内窥镜，是一种用来检查人体肠道的医疗仪器。胶囊内窥镜能进入人体，用于窥探人体肠胃和食道部位的健康状况，用于帮助医生对病人消化道系统疾患进行诊断。本发明的一些实施例中，以数据记录仪为例进行描述。数据记录仪可以将当前已连接并需要进行图像数据传输的胶囊内窥镜确定为目标胶囊内窥镜，当患者将目标胶囊内窥镜服用后，目标胶囊内窥镜则进入患者体内进行图像拍摄。当相关人员需要获取目标胶囊内窥镜拍摄的图像以对患者的消化道系统进行疾患诊断时，可以通过数据记录仪发起针对目标胶囊内窥镜所采集图像数据的数据传输指令，其中，数据传输指令用于指示数据记录仪开始与目标胶囊内窥镜进行数据交互，具体可以为指示数据记录仪开始从目标胶囊内窥镜中获取相关的图像数据。当数据记录仪接收到数据传输指令时，可以先给目标胶囊内窥镜发送开始发送数据的指令，当接收到目标胶囊内窥镜基于该指令返回的应答信号时，确定开始接收目标胶囊内窥镜发送的图像数据。本实施例中数据记录仪可以基于两个接收芯片在预设的同一传输信道中同步接收目标胶囊内窥镜发送的图像数据，由此实现双通道数据接收，在两个接收芯片均完成当前数据传输指令对应任务的数据接收后，得到相应的图像数据并分别存储为第一通道图像数据与第二通道图像数据。其中，两个接收芯片用于基于数据记录仪与目标胶囊内窥镜的通信接收目标胶囊内窥镜发送的数据。并且，两个接收芯片中可以定义其中任意一个为主接收芯片，另一个为副接收芯片。因此，本实施例可以将第一通道图像数据作为主通道图像数据，而将第二通道图像数据作为副通道图像数据；当然，在其他情况下，也可以将第二通道图像数据作为主通道图像数据，而将第第一通道图像数据作为副通道图像数据。其中，预设的传输信道可以为无线信道各信道中的任一信道，具体可以根据实际需求选择。无线信道是对无线通信中发送端和接收端之间通路的一种形象比喻，对于无线电波而言，它从发送端传送到接收端，其间并没有一个有形的连接，它的传播路径也有可能不只一条，我们为了形象地描述发送端与接收端之间的工作，可以想象两者之间有一个看不见的道路衔接，把这条衔接通路称为信道，无线信道也就是常说的无线的“频段”。需要说明的是，本实施例中目标胶囊内窥镜在发送图像数据时，将图像数据分成多个数据包分别发送。并且，由于无线信号在传输过程中，如果传输环境没有发生变化的话，每一个字节的数据或者每一个比特位的数据传输过程中的误码率是固定的，数据包越长则丢包率越高、数据包越短丢包率越低。基于此，本申请将一个数据包再分为若干个数据块，并在每一个数据块后面增加一个该数据块的校验值，以在后续的处理中使原来是按数据包来处理数据的方式，可以调整为按数据块来处理数据的方式，在数据包的整体丢失率不变的情况下，由于数据块的丢失率比数据包的丢失率更低，通过两个通道的数据块比对，更容易的把数据块补全正确，进一步降低数据包和图像的丢失率。具体的数据格式可如下表1与表2所示：表1表2其中，表1为图像数据按数据包处理的数据格式，表2为具体数据包的数据格式，表1中的图像ID、数据包ID、图像长度、数据包数量等信息用于作为当前拍摄的一张图像的标识，数据格式中的数据为图片的数据，CRC值是这个数据包的所有数据包括图像的标识经过校验后生产的校验值。其中图像ID是唯一的且是顺序递增的，数据包ID在同一张图像中也是唯一且顺序递增的，图像长度是当前这张图像的数据长度，数据包数量是指组成当前图像的数据包的数量。由于每一个数据包中图像的标识都不能出错，若出错则后续的处理就会出错，因此在图像的标识后面增加一个CRC校验值，使用这个值来标记图像的标记是否正确。表2即将数据包中的图像有效数据分成N个数据块，每一个数据块后面增加一个CRC校验值，以及数据包的结尾也设置有对图像的标识和有效数据校验后的检验值CRC。即，本实施例中胶囊内窥镜在发送图像数据之前，对每一图像均计算出一个CRC值，对每一图像的数据包均计算出相应的CRC值，以及对每一数据包的各数据块均计算出相应的CRC值后，再将拍摄的图像数据以数据包的形式进行发送。基于双通道接收目标胶囊内窥镜发送的图像数据，可以在其中一组通道图像数据出现丢包、数据异常等情况时，通过另一组通道图像数据确定是否可以将丢失或异常的数据进行补全，以此形成完整且正常的图像数据，可减少与胶囊内窥镜进行数据传输时的误码率与丢图率，以避免通过降低速率、设置窄带宽、缩短数据包长度等手段降低误码率与丢图率所带来的使数据传输速率明显下降的问题，进而可以提高数据传输效率。步骤S200，确定所述第一通道图像数据是否完整；在接收到第一通道图像数据后，数据记录仪可以根据图像的标识和图像中的各数据包ID判断第一通道图像数据是否存在数据丢失，以此确定第一通道图像数据是否完整。可以理解地，若第一通道图像数据中不存在数据丢失，则确定第一通道图像数据完整，否则确定第一通道图像数据不完整。具体地，可以根据图像ID是否连续且图像数量是否准确来确定图像的完整性，以及根据数据包ID是否连续以及数据包数量是否准确来确定数据包的完整性。例如，若接收到的第一通道图像数据中应包括10张图像，而实际接收到的第一通道图像数据中包括图像ID为1、2、3、5、6、7、8、9、10的图像，说明丢失了图像ID为4的图像，因此可以确定第一通道图像数据存在数据丢失。或者，若接收到的第一通道图像数据中图像ID为5的图像中应包括10个数据包，而实际接收到的第一通道图像数据中图像ID为5的图像中包括数据包ID为1、2、3、4、6、7、8、9、10，说明丢失了数据包ID为5的数据包，因此可以确定第一通道图像数据存在数据丢失。若第一通道图像数据中图像与数据包均不存在丢失的情况，则确定第一通道图像数据完整。通过确定第一通道图像数据是否完整，以便于后续在第一通道图像数据完整时，对第一通道图像数据中各数据包的CRC值进行信息校验，得到第一校验结果，并在第一校验结果为第一通道图像数据中存在数据包的CRC值未通过校验时，基于第一通道图像数据与第二通道图像数据进行数据比对，确定出完整且正确的目标图像数据。进一步地，所述确定所述第一通道图像数据是否完整的步骤之后，还包括：步骤A1，若所述第一通道图像数据存在数据丢失，则确定所述第二通道图像数据中是否存在所述第一通道图像数据中的丢失数据对应的补全数据；步骤A2，若所述第二通道图像数据中存在所述补全数据，则对所述补全数据对应的CRC值进行信息校验，得到第四校验结果；步骤A3，若所述第四校验结果为所述补全数据对应的CRC值通过校验，则将所述补全数据补全至所述第一通道图像数据，得到目标图像数据。可以理解地，在确定第一通道图像数据是否完整后，若确定第一通道图像数据存在数据丢失，则查找第二通道图像数据中是否存在第一通道图像数据中的丢失数据对应的补全数据。例如，第一通道图像数据中图像ID为1的图中，存在数据包ID为9的数据包丢失，或者存在数据包ID为3的数据包丢失，则查找第二通道图像数据是否存在图像ID为1的图像，若存在则进一步确定该图像中是否存在数据包ID为9或3的数据包，若存在则确定第二通道图像数据中存在与第一通道图像数据中的丢失数据对应的补全数据。进一步地，若确定第二通道图像数据中存在补全数据，则需要对补全数据进行校验，具体地，对补全数据对应的CRC值进行信息校验，得到补全数据的CRC值通过校验或未通过校验的结果并作为第四校验结果。进一步地，若第四校验结果为补全数据的CRC值通过校验，说明该补全数据在传输过程中未出现异常，因此该补全数据是正确的，可以通过将该补全数据补全第一通道图像数据中的丢失数据，以此得到完整且正确的图像数据作为目标图像数据。若第四校验结果为补全数据的CRC值未通过校验，说明该补全数据在传输过程可能发生异常导致其数据发生错误，即使将该补全数据补全至第一通道图像数据也不能得到完整且正确的图像数据。因此，需要舍弃当前接收的第一通道图像数据与第二通道图像数据，并等待下一次的数据传输指令，再对下一次接收的数据进行处理。若不存在则确定第二通道图像数据中不存在与第一通道图像数据中的丢失数据对应的补全数据，说明双通道接收的图像数据均存在数据异常或数据丢失，不能形成完整且正确的图像数据，则需要舍弃当前接收的第一通道图像数据与第二通道图像数据，并等待下一次的数据传输指令，再对下一次接收的数据进行处理。步骤S300，若所述第一通道图像数据完整，则对所述第一通道图像数据中各数据包的循环冗余校验CRC值进行信息校验，得到第一校验结果；在确定第一通道图像数据是否完整后，若确定第一通道图像数据完整，则需要对第一通道图像数据中的各数据包的CRC值进行信息校验，确定第一通道图像数据中的各数据包的CRC值是否均正确，得到第一通道图像数据中的各数据包的CRC值均正确，或者第一通道图像数据中的各数据包的CRC值存在数据包的CRC值不正确的校验结果，并作为第一校验结果。以在第一校验结果为第一通道图像数据中存在数据包的CRC值未通过校验时，基于第一通道图像数据与第二通道图像数据进行数据比对，确定出完整且正确的图像数据作为目标图像数据。进一步地，所述对所述第一通道图像数据中各数据包的CRC值进行信息校验，得到第一校验结果的步骤包括：步骤B1，确定所述第一通道图像数据中各数据包的初始CRC值；步骤B2，分别计算所述第一通道图像数据中各数据包的CRC值；步骤B3，将所述第一通道图像数据中各数据包的CRC值分别与所述第一通道图像数据中各数据包的初始CRC值进行对比，得到第一校验结果。在对第一通道图像数据中各数据包的CRC值进行信息校验时，通过从接收的数据包的数据格式信息中获取第一通道图像数据中各数据包的初始CRC值，该初始CRC值为目标胶囊内窥镜在发送前根据数据包的所有数据包括图像的标识进行校验后生产的校验值，由此确定出第一通道图像数据中各数据包的初始CRC值。同时，数据记录仪分别对接收到的各数据包的所有数据进行校验并生成各数据包分别对应的CRC值，由此得到第一通道图像数据中各数据包当前的CRC值。进一步地，将第一通道图像数据中各数据包的CRC值分别与第一通道图像数据中各数据包的初始CRC值进行对比。例如将第一通道图像数据的第一张图像中的第一个数据包当前的CRC值，与第一通道图像数据的第一张图像中的第一个数据包的初始CRC值进行对比；将第一通道图像数据的第一张图像中的第二个数据包当前的CRC值，与第一通道图像数据的第一张图像中的第二个数据包的初始CRC值进行对比，以此类推；在完成所有数据包的CRC值的信息校验后，若所有数据包当前的CRC值均与对应的初始CRC值相同，则得到第一通道图像数据中各数据包的CRC值均通过校验的结果作为第一校验结果。而若存在任一数据包当前的CRC值均与对应的初始CRC值不相同，则得到第一通道图像数据中存在数据包的CRC值未通过校验的结果作为第一校验结果。进一步地，所述对所述第一通道图像数据中各数据包的CRC值进行信息校验，得到第一校验结果的步骤之后，还包括：步骤C，若所述第一校验结果为所述第一通道图像数据中各数据包的CRC值均通过校验，则将所述第一通道图像数据确定为目标图像数据。可以理解地，在对第一通道图像数据中各数据包的CRC值进行信息校验并得到第一校验结果后，若确定第一校验结果为第一通道图像数据中各数据包的CRC值均通过校验，说明第一通道图像数据是完整且正确的，即在传输过程中并不存在数据丢失或数据变化，因此确定接收到的第一通道图像数据与目标胶囊内窥镜发送的图像数据完全一致，则可以将第一通道图像数据确定为目标图像数据。步骤S400，若所述第一校验结果为所述第一通道图像数据中存在数据包的CRC值未通过校验，则基于所述第一通道图像数据与所述第二通道图像数据进行数据比对，得到目标图像数据。在得到第一校验结果后，若第一校验结果为第一通道图像数据中存在数据包的CRC值未通过校验，则从第二通道图像数据中查找是否存在与第一通道图像数据中CRC值未通过校验的数据包对应的数据包。例如第一通道图像数据中图像ID为1的图中，存在数据包ID为9的数据包的CRC值未通过校验，或者存在数据包ID为3的数据包的CRC值未通过校验，则查找第二通道图像数据是否存在图像ID为1的图像，若存在则进一步确定该图像中是否存在数据包ID为9或3的数据包。若存在则确定是否可以通过该数据包替换第一通道图像数据中CRC值未通过校验的数据包，若确定可以，则通过该数据包替换第一通道图像数据中CRC值未通过校验的数据包，使得最终形成完整且正确的图像数据作为目标图像数据。可以理解地，若第二通道图像数据中不存在与第一通道图像数据中CRC值未通过校验的数据包对应的数据包，说明双通道接收的图像数据均存在数据异常或数据丢失，不能形成完整且正确的图像数据，则需要舍弃当前接收的第一通道图像数据与第二通道图像数据，并等待下一次的数据传输指令，再对下一次接收的数据进行处理。本申请实施例提供的数据处理方法，在接收到数据传输指令时，通过双通道接收目标胶囊内窥镜发送的图像数据，并在接收的第一通道图像数据完整但存在任一数据包的CRC值未通过校验时，基于第一通道图像数据与第二通道图像数据的数据比对，准确地确定出目标图像数据，可减少与胶囊内窥镜进行数据传输时的误码率与丢图率，以避免通过降低速率、设置窄带宽、缩短数据包长度等手段降低误码率与丢图率所带来的使数据传输速率明显下降的问题，进而可以提高数据传输效率。图2为本申请实施例提供的数据处理方法的流程示意图之二。参照图2，在一个实施例中，所述基于所述第一通道图像数据与所述第二通道图像数据进行数据比对，得到目标图像数据的步骤包括：步骤S4001，基于所述第一通道图像数据与所述第二通道图像数据的数据包比对，确定所述第二通道图像数据中是否存在与所述第一通道图像数据中CRC值未通过校验的数据包对应的目标数据包；步骤S4002，若所述第二通道图像数据中存在所述目标数据包，则对所述目标数据包的CRC值进行信息校验，得到第二校验结果；步骤S4002，若所述第二校验结果为所述目标数据包的CRC值未通过校验，则基于所述目标数据包与所述第一通道图像数据进行数据块比对，得到目标图像数据。在基于第一通道图像数据与第二通道图像数据进行数据比对以得到目标图像数据时，可以将第一通道图像数据与第二通道图像数据进行数据包比对，确定第二通道图像数据中是否存在与第一通道图像数据中CRC值未通过校验的数据包对应的数据包，若存在则将其确定为目标数据包。具体地，可以从第二通道图像数据的各数据包中查找是否存在与第一通道图像数据中CRC值未通过校验的数据包的ID相同的数据包，例如第一通道图像数据中CRC值未通过校验的数据包的数据包ID为2或3，则查找第二通道图像数据的各数据包中是否存在数据包ID为2或3的数据包，若存在则将该数据包确定为目标数据包。进一步地，若确定第二通道图像数据中存在目标数据包，则对目标数据包的CRC值进行信息校验，确定目标数据包的CRC值是否正确，在完成校验后得到目标数据包的CRC值通过校验或未通过校验的结果并作为第二校验结果。进一步地，若第二校验结果为目标数据包的CRC值未通过校验，由于目标数据包中包括多个数据块，而当多个数据块中存在异常的数据块时，即会导致其对应的目标数据包的CRC值与目标胶囊内窥镜发送时的CRC值不同，进而导致目标数据包的CRC值未通过校验。因此，本实施例中还需要将第一通道图像数据中组成CRC值未通过校验的数据包的各数据块，与目标数据包中的各数据块进行数据块比对，以此确定目标数据包的各数据块中，是否存在可以用于替换第一通道图像数据中导致数据包的CRC值未通过校验的数据块的数据块，若存在则在该数据块的CRC值通过校验时，通过该数据块替换第一通道图像数据中导致数据包的CRC值未通过校验的数据块，由此得到完整且正确的图像数据作为目标图像数据。可以理解地，若第二校验结果为目标数据包的CRC值通过校验，说明目标数据包在传输过程中未出现异常，因此可以通过目标数据包替换第一通道图像数据中CRC值未通过校验的数据数据包。将替换后的第一通道图像数据确定为目标图像数据。可以理解地，若确定第二通道图像数据中不存在目标数据包，说明双通道接收的图像数据均存在数据异常或数据丢失，不能形成完整且正确的图像数据，则需要舍弃当前接收的第一通道图像数据与第二通道图像数据，并等待下一次的数据传输指令，再对下一次接收的数据进行处理。进一步地，所述基于所述目标数据包与所述第一通道图像数据进行数据块比对，得到目标图像数据的步骤包括：步骤S40021，确定所述第一通道图像数据CRC值未通过校验的数据包的各数据块中，导致数据包的CRC值未通过校验的第一目标数据块；步骤S40022，确定所述目标数据包的各数据块中，是否存在与所述第一目标数据块对应的第二目标数据块；步骤S40023，若目标数据包的各数据块中存在所述第二目标数据块，则基于所述第二目标数据块与所述第一通道图像数据确定目标图像数据。在基于目标数据包与第一通道图像数据进行数据块比对以得到目标图像数据时，可以将第一通道图像数据CRC值未通过校验的数据包的各数据块中，导致第一通道图像数据中的数据包的CRC值未通过校验的数据块作为第一目标数据块。进一步地，由于目标数据包中包括多个数据块，因此可以查找目标数据包的各数据块中，是否存在与第一目标数据块对应的数据块，若存在则将该数据块确定为第二目标数据块。例如：目标数据包的10个数据块中因数据块5或8异常导致该目标数据包的CRC值未通过校验，则将目标数据包的10个数据块中的数据块5或8确定为第二目标数据块。进一步地，若确定目标数据包的各数据块中存在第二目标数据块，则对第二目标数据块的CRC值进行信息校验，并当第二目标数据块的CRC值通过校验时，通过该数据块替换第一通道图像数据中导致数据包的CRC值未通过校验的数据块，由此得到完整且正确的图像数据作为目标图像数据。若确定目标数据包的各数据块中不存在第二目标数据块，说明双通道接收的图像数据均存在数据异常或数据丢失，不能形成完整且正确的图像数据，则需要舍弃当前接收的第一通道图像数据与第二通道图像数据，并等待下一次的数据传输指令，再对下一次接收的数据进行处理。进一步地，所述基于所述第二目标数据块与所述第一通道图像数据确定目标图像数据的步骤包括：步骤S400231，对所述第二目标数据块的CRC值进行信息校验，得到第三校验结果；步骤S400232，若所述第三校验结果为所述第二目标数据块的CRC值通过校验，则根据所述第二目标数据块替换所述第一通道图像数据中的第一目标数据块，将数据替换后且通过CRC值信息验证的第一通道图像数据确定为目标图像数据。在基于第二目标数据块与第一通道图像数据确定目标图像数据时，对第二目标数据块的CRC值进行信息校验，确定第二目标数据块的CRC值是否正确，在完成校验后得到第二目标数据块的CRC值通过校验或未通过校验的结果并作为第三校验结果。进一步地，若第三校验结果为第二目标数据块的CRC值通过校验，说明第二目标数据块在传输过程中未出现异常，因此可以通过第二目标数据块替换第一通道图像数据中导致数据包的CRC值未通过校验的数据块。在完成数据块替换后，对替换后的第一通道图像数据进行整体CRC值的校验，并在替换后的第一通道图像数据的整体CRC通过校验时，将数据替换后的第一通道图像数据确定为目标图像数据。若第三校验结果为第二目标数据块的CRC值未通过校验，说明第二目标数据块在传输过程发生异常，导致双通道接收的图像数据均存在数据异常或数据丢失，不能形成完整且正确的图像数据，则需要舍弃当前接收的第一通道图像数据与第二通道图像数据，并等待下一次的数据传输指令，再对下一次接收的数据进行处理。需要说明的是，本实施例通过数据包和数据块的双重比对进行纠错，因此纠错能力由数据包和数据块的数量和长度决定，为了兼顾纠错能力和纠错效率，数据包和数据块的数量和长度可以根据实验和环境设定一个合理的阈值。进一步地，本申请还提供一种数据处理装置。参照图3，图3为本申请数据处理装置实施例的功能模块示意图。所述数据处理装置包括：接收模块100，用于若接收到数据传输指令，则基于双通道接收目标胶囊内窥镜发送的图像数据，得到第一通道图像数据与第二通道图像数据；确定模块200，用于确定所述第一通道图像数据是否完整；校验模块300，用于若所述第一通道图像数据完整，则对所述第一通道图像数据中各数据包的CRC值进行信息校验；比对模块400，用于若所述第一通道图像数据中存在数据包的CRC值未通过校验，则基于所述第一通道图像数据与所述第二通道图像数据进行数据比对，得到目标图像数据。本申请实施例提供的数据处理装置，在接收到数据传输指令时，通过双通道接收目标胶囊内窥镜发送的图像数据，并在接收的第一通道图像数据完整但存在任一数据包的CRC值未通过校验时，基于第一通道图像数据与第二通道图像数据的数据比对，准确地确定出目标图像数据，可减少与胶囊内窥镜进行数据传输时的误码率与丢图率，以避免通过降低速率、设置窄带宽、缩短数据包长度等手段降低误码率与丢图率所带来的使数据传输速率明显下降的问题，进而可以提高数据传输效率。在一个实施例中，确定模块200包括校验单元，所述校验单元用于：若所述第一通道图像数据存在数据丢失，则确定所述第二通道图像数据中是否存在所述第一通道图像数据中的丢失数据对应的补全数据；若所述第二通道图像数据中存在所述补全数据，则对所述补全数据对应的CRC值进行信息校验，得到第四校验结果；若所述第四校验结果为所述补全数据对应的CRC值通过校验，则将所述补全数据补全至所述第一通道图像数据，得到目标图像数据。在一个实施例中，校验模块300具体用于：确定所述第一通道图像数据中各数据包的初始CRC值；分别计算所述第一通道图像数据中各数据包的CRC值；将所述第一通道图像数据中各数据包的CRC值分别与所述第一通道图像数据中各数据包的初始CRC值进行对比，得到第一校验结果。在一个实施例中，校验模块300具体还用于：若所述第一校验结果为所述第一通道图像数据中各数据包的CRC值均通过校验，则将所述第一通道图像数据确定为目标图像数据。在一个实施例中，比对模块400具体用于：基于所述第一通道图像数据与所述第二通道图像数据的数据包比对，确定所述第二通道图像数据中是否存在与所述第一通道图像数据中CRC值未通过校验的数据包对应的目标数据包；若所述第二通道图像数据中存在所述目标数据包，则对所述目标数据包的CRC值进行信息校验，得到第二校验结果；若所述第二校验结果为所述目标数据包的CRC值未通过校验，则基于所述目标数据包与所述第一通道图像数据进行数据块比对，得到目标图像数据。在一个实施例中，比对模块400包括第一确定单元，所述第一确定单元用于：确定所述第一通道图像数据CRC值未通过校验的数据包的各数据块中，导致数据包的CRC值未通过校验的第一目标数据块；确定所述目标数据包的各数据块中，是否存在与所述第一目标数据块对应的第二目标数据块；若目标数据包的各数据块中存在所述第二目标数据块，则基于所述第二目标数据块与所述第一通道图像数据确定目标图像数据。在一个实施例中，第一确定单元包括第二确定单元，所述第二确定单元用于：对所述第二目标数据块的CRC值进行信息校验，得到第三校验结果；若所述第三校验结果为所述第二目标数据块的CRC值通过校验，则根据所述第二目标数据块替换所述第一通道图像数据中的第一目标数据块，将数据替换后且通过CRC值信息验证的第一通道图像数据确定为目标图像数据。图4示例了一种电子设备的实体结构示意图，如图4所示，该电子设备可以包括：处理器810、通信接口820、存储器830和通信总线840，其中，处理器810，通信接口820，存储器830通过通信总线840完成相互间的通信。处理器810可以调用存储器830中的计算机程序，以执行数据处理方法的步骤，例如包括：若接收到数据传输指令，则基于双通道接收目标胶囊内窥镜发送的图像数据，得到第一通道图像数据与第二通道图像数据；确定所述第一通道图像数据是否完整；若所述第一通道图像数据完整，则对所述第一通道图像数据中各数据包的循环冗余校验CRC值进行信息校验，得到第一校验结果；若所述第一校验结果为所述第一通道图像数据中存在数据包的CRC值未通过校验，则基于所述第一通道图像数据与所述第二通道图像数据进行数据比对，得到目标图像数据。此外，上述的存储器830中的逻辑指令可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本申请的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本申请各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。另一方面，本申请实施例还提供一种计算机存储介质，所述计算机存储介质为计算机可读存储介质，所述计算机可读存储介质存储有计算机程序，所述计算机程序用于使处理器执行上述各实施例提供的方法的步骤，例如包括：若接收到数据传输指令，则基于双通道接收目标胶囊内窥镜发送的图像数据，得到第一通道图像数据与第二通道图像数据；确定所述第一通道图像数据是否完整；若所述第一通道图像数据完整，则对所述第一通道图像数据中各数据包的循环冗余校验CRC值进行信息校验，得到第一校验结果；若所述第一校验结果为所述第一通道图像数据中存在数据包的CRC值未通过校验，则基于所述第一通道图像数据与所述第二通道图像数据进行数据比对，得到目标图像数据。所述计算机可读存储介质可以是处理器能够存取的任何可用介质或数据存储设备，包括但不限于磁性存储器等）、光学存储器、以及半导体存储器、固态硬盘）等。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分所述的方法。最后应说明的是：以上实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围。
