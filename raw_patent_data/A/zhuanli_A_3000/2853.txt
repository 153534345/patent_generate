标题title
一种用于中医舌诊的舌体精准分割方法
摘要abst
本发明涉及数据处理技术领域，具体涉及一种用于中医舌诊的舌体精准分割方法。该方法是一种应用电子设备进行识别的方法，利用人工智能系统完成舌体精准分割。该方法首先得到病患舌体的舌体图像，对舌体图像进行数据处理得到第一舌体区域、第二舌体区域和第三舌体区域；对第三舌体区域进行数据处理得到标记行，基于标记行进行高斯分布加权得到目标舌体区域。本发明通过对舌体区域进行高斯分布加权，提高了舌体区域与非舌体区域的差异性，更加精准的实现对舌体区域的阈值分割。
权利要求书clms
1.一种用于中医舌诊的舌体精准分割方法，其特征在于，该方法包括以下步骤：采集病患舌体的舌体图像，对所述舌体图像进行预处理，分割出第一舌体区域；基于所述第一舌体区域在HSI颜色空间中亮度通道的值，对所述第一舌体区域进行阈值分割得到初始分割结果图；根据所述初始分割结果图中最大的连通域的最大纵坐标，分割出第二舌体区域；获取所述第二舌体区域在HSI颜色空间中对应的亮度通道图像；选取所述亮度通道图像中的部分区域，对部分区域中每行对应的亮度值集合进行高斯分布加权，得到加权后的亮度值集合；对加权后的亮度值集合进行阈值分割，得到每行对应的第三舌体区域；比较所述亮度通道图像的部分区域的中间行和其他每行的第三舌体区域的差异性，从中筛选出差异性最小的行作为标记行；以所述标记行为起始行，分别沿着上下两个方向逐行遍历，对舌体图像中的各行对应的像素点的亮度值分别进行高斯分布加权，分割加权后舌体图像中的各行，得到目标舌体区域。2.根据权利要求1所述的一种用于中医舌诊的舌体精准分割方法，其特征在于，所述对所述舌体图像进行预处理，分割出第一舌体区域，包括：将采集到的舌体图像转化到HSI颜色空间，得到HSI图像；对HSI图像进行平滑去噪和直方图均衡化，得到预处理图像；由所述预处理图像在HSI颜色空间中色调通道的值，构建色调值直方图；获取所述色调值直方图的最佳分割阈值，基于所述最佳分割阈值得到初始舌体区域；对所述初始舌体区域对应的最小外接矩形进行左右扩展，得到第一舌体区域。3.根据权利要求1所述的一种用于中医舌诊的舌体精准分割方法，其特征在于，所述根据所述初始分割结果图中最大的连通域的最大纵坐标，分割出第二舌体区域，包括：以初始分割结果图中左下角的点为原点，保留原点至最大纵坐标内对应的区域为第二舌体区域。4.根据权利要求1所述的一种用于中医舌诊的舌体精准分割方法，其特征在于，所述选取所述亮度通道图像中的部分区域，包括：获取所述亮度通道图像的宽，以宽的三分之一处至三分之二处之间的区域作为选取出的亮度通道图像中的部分区域。5.根据权利要求1所述的一种用于中医舌诊的舌体精准分割方法，其特征在于，所述比较所述亮度通道图像的部分区域的中间行和其他每行的第三舌体区域的差异性，包括：获取亮度通道图像的部分区域的中间行所对应的第三舌体区域的最小横坐标和最大横坐标，分别作为第一最小横坐标和第一最大横坐标；对于亮度通道图像的部分区域中除中间行外其他任意行，获取所对应的第三舌体区域的最小横坐标和最大横坐标，分别作为第二最小横坐标和第二最大横坐标；计算所述第一最小横坐标和所述第二最小横坐标的差值的绝对值，作为第一绝对值；计算所述第一最大横坐标和所述第二最大横坐标的差值的绝对值，作为第二绝对值；所述第一绝对值和所述第二绝对值的均值为所述差异性。6.根据权利要求1所述的一种用于中医舌诊的舌体精准分割方法，其特征在于，所述基于所述第一舌体区域在HSI颜色空间中亮度通道的值，对所述第一舌体区域进行阈值分割得到初始分割结果图，包括：由所述第一舌体区域中各像素点在HSI颜色空间中亮度通道的值，构建亮度值直方图；获取所述亮度值直方图的最佳阈值，基于所述最佳阈值进行阈值分割得到初始分割结果图。
说明书desc
技术领域本发明涉及数据处理技术领域，具体涉及一种用于中医舌诊的舌体精准分割方法。背景技术中医是通过长期医疗实践逐步形成的医学理论体系，中医在诊断过程中主要使用望闻问切四大手段。其中望诊还包括舌诊，主要是对病人的舌体进行观察，通过对舌头上的苔质、齿痕和点刺等舌体特征的观察，可以得知内脏的病变，舌诊是一种有效且无创的诊断方法。在临床诊断中，舌头的辅助诊断要先对病患的舌体进行图像采集，然后对采集到的舌体图像通过图像处理算法进行处理，以实现将舌体从舌体图像中分割出来。目前，常见的将舌体从采集到的舌体图像中分割出来的方法为阈值分割算法，首先得到舌体的粗略轮廓图，再用二维形变轮廓模型进行进一步分割。但由于在进行舌体图像采集时会同时采集到病患的牙齿、嘴唇和唇周边皮肤等背景区域，这些背景区域的颜色信息往往因人而异，背景区域和目标舌体对图像分割算法的鲁棒性与适应性有较高的要求，同时由于嘴唇和舌体在舌体图像上相互连接且颜色较为相近，故采用传统的阈值分割算法进行舌体分割时，往往会导致分割出的舌体中包含有一些唇部的图像信息。发明内容为了解决上述技术问题，本发明的目的在于提供一种用于中医舌诊的舌体精准分割方法，所采用的技术方案具体如下：采集病患舌体的舌体图像，对所述舌体图像进行预处理，分割出第一舌体区域；基于所述第一舌体区域在HSI颜色空间中亮度通道的值，对所述第一舌体区域进行阈值分割得到初始分割结果图；根据所述初始分割结果图中最大的连通域的最大纵坐标，分割出第二舌体区域；获取所述第二舌体区域在HSI颜色空间中对应的亮度通道图像；选取所述亮度通道图像中的部分区域，对部分区域中每行对应的亮度值集合进行高斯分布加权，得到加权后的亮度值集合；对加权后的亮度值集合进行阈值分割，得到每行对应的第三舌体区域；比较所述亮度通道图像的部分区域的中间行和其他每行的第三舌体区域的差异性，从中筛选出差异性最小的行作为标记行；以所述标记行为起始行，分别沿着上下两个方向逐行遍历，对舌体图像中的各行对应的像素点的亮度值分别进行高斯分布加权，分割加权后舌体图像中的各行，得到目标舌体区域。优选的，所述对所述舌体图像进行预处理，分割出第一舌体区域，包括：将采集到的舌体图像转化到HSI颜色空间，得到HSI图像；对HSI图像进行平滑去噪和直方图均衡化，得到预处理图像；由所述预处理图像在HSI颜色空间中色调通道的值，构建色调值直方图；获取所述色调值直方图的最佳分割阈值，基于所述最佳分割阈值得到初始舌体区域；对所述初始舌体区域对应的最小外接矩形进行左右扩展，得到第一舌体区域。优选的，所述根据所述初始分割结果图中最大的连通域的最大纵坐标，分割出第二舌体区域，包括：以初始分割结果图中左下角的点为原点，保留原点至最大纵坐标内对应的区域为第二舌体区域。优选的，所述选取所述亮度通道图像中的部分区域，包括：获取所述亮度通道图像的宽，以宽的三分之一处至三分之二处之间的区域作为选取出的亮度通道图像中的部分区域。优选的，所述比较所述亮度通道图像的部分区域的中间行和其他每行的第三舌体区域的差异性，包括：获取亮度通道图像的部分区域的中间行所对应的第三舌体区域的最小横坐标和最大横坐标，分别作为第一最小横坐标和第一最大横坐标；对于亮度通道图像的部分区域中除中间行外其他任意行，获取所对应的第三舌体区域的最小横坐标和最大横坐标，分别作为第二最小横坐标和第二最大横坐标；计算所述第一最小横坐标和所述第二最小横坐标的差值的绝对值，作为第一绝对值；计算所述第一最大横坐标和所述第二最大横坐标的差值的绝对值，作为第二绝对值；所述第一绝对值和所述第二绝对值的均值为所述差异性。优选的，所述基于所述第一舌体区域在HSI颜色空间中亮度通道的值，对所述第一舌体区域进行阈值分割得到初始分割结果图，包括：由所述第一舌体区域中各像素点在HSI颜色空间中亮度通道的值，构建亮度值直方图；获取所述亮度值直方图的最佳阈值，基于所述最佳阈值进行阈值分割得到初始分割结果图。本发明实施例至少具有如下有益效果：本发明首先采集病患舌体的舌体图像，对舌体图像进行预处理，分割出第一舌体区域；基于第一舌体区域在HSI颜色空间中亮度通道的亮度值，对第一舌体区域进行阈值分割，分割出第二舌体区域；获取第二舌体区域在HSI颜色空间中对应的亮度通道图像中的部分区域，对部分区域中每行对应的亮度值集合进行高斯分布加权，阈值分割加权后的亮度值集合，得到每行对应的第三舌体区域。本发明对舌体图像进行预处理后，框选出舌体位置区域，然后根据口腔内部较暗到唇部或者牙齿区域的变化非常剧烈的特点分割出上唇或者牙齿区域，得到消除了唇部和牙齿区域影响的第三舌体区域。相较于与正常的阈值分割，通过本发明所采用的方法分割出的第三舌体区域消除了唇部和牙齿的影响，而常见的阈值分割难以消除唇部和牙齿的影响，分割出的舌体区域的精准度会受到影响。比较部分区域的中间行和其他行的第三舌体区域的差异性，从中筛选出差异性最小的行作为标记行；以标记行为起始行，分别沿着上下两个方向逐行遍历，对舌体图像中的各行对应的像素点的亮度值分别进行高斯分布加权，分割加权后舌体图像中的各行，得到目标舌体区域。本发明中从与部分区域的中间行差异性最小的标记行开始对舌体图像进行高斯分布加权，与中间行的差异性越小则对应的为舌体区域的概率越大，对大概率为舌体区域的区域赋予更高的高斯权重，提高了舌体区域与非舌体区域的差异性，更加精准的实现了对舌体区域的阈值分割，使得舌体区域更加突出，进一步消除非舌体区域如唇部和牙齿区域的影响，以确保后续疾病诊断时的准确性。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案和优点，下面将对实施例或现有技术描述中所需要使用的附图作简单的介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其它附图。图1为本发明一个实施例所提供的一种用于中医舌诊的舌体精准分割方法的方法流程图。具体实施方式为了更进一步阐述本发明为达成预定发明目的所采取的技术手段及功效，以下结合附图及较佳实施例，对依据本发明提出的一种用于中医舌诊的舌体精准分割方法，其具体实施方式、结构、特征及其功效，详细说明如下。在下述说明中，不同的“一个实施例”或“另一个实施例”指的不一定是同一实施例。此外，一或多个实施例中的特定特征、结构或特点可由任何合适形式组合。除非另有定义，本文所使用的所有的技术和科学术语与属于本发明的技术领域的技术人员通常理解的含义相同。本发明实施例提供了一种用于中医舌诊的舌体精准分割方法的具体实施方法，该方法适用于舌体分割场景。该场景下通过图像采集仪器采集病患舌体的舌体图像。为了解决采用传统的阈值分割算法进行舌体分割时，往往会导致分割出的舌体中包含有一些唇部的图像信息的问题。本发明通过处理采集的舌体图像，框选出舌体位置区域，然后根据口腔内部较暗到唇部或牙齿区域的变化非常剧烈的特点分割出上唇或牙齿区域，进而对剩余区域使用高斯分布加权，提高了舌体区域与非舌体区域的差异性，对舌体图像高斯分布加权后再进行阈值分割，分割出舌体区域，更加精准的实现了对舌体区域的阈值分割，确保了后续疾病诊断时的准确性。下面结合附图具体的说明本发明所提供的一种用于中医舌诊的舌体精准分割方法的具体方案。请参阅图1，其示出了本发明一个实施例提供的一种用于中医舌诊的舌体精准分割方法的步骤流程图，该方法包括以下步骤：步骤S100，采集病患舌体的舌体图像，对所述舌体图像进行预处理，分割出第一舌体区域。舌像分析研究的主体对象是舌体，检测并分割出舌体，排除非目标对象的干扰，使舌像分析的结果更加精准，是中医舌诊自动化的一个至关重要的前提工作。舌体与周围组织颜色相似，轮廓相对模糊，不同人群的舌体形态差异较大，传统图像处理难以实现舌体的准确分割。本发明通过处理采集的舌体图像，框选出舌体区域，根据口腔内部较暗区域到唇部或者牙齿区域的变化非常强烈的特点分割出上唇和牙齿区域，进行对剩余区域进行高斯分布加权的方式阈值分割出精准的舌体区域。首先需要先对采集到的病患舌体的舌体图像进行预处理，初步减少一些非舌体部位的影响。其中，舌体图像为RGB图像。对舌体图像进行预处理，分割出第一舌体区域，具体的：将采集到的舌体图像转化到HSI颜色空间，得到HSI图像。由于原始的舌体图像会受环境和采集仪器的影响，存在一些图像噪声，这些噪声对于图像处理存在一定的干扰。故进一步的对HSI图像进行平滑去噪和直方图均衡化，得到预处理图像。在本发明实施例中利用中值滤波对HSI图像进行平滑去噪处理，最后再利用直方图均衡化算法，对图像进行对比度增强。从舌体图像的颜色特征来看，舌体的颜色通常集中在从品红色和红色的中间、红色和黄色的中间这一小部分范围内，舌体区域和和非舌体区域有比较明显的边界，而且整个舌体区域呈现出紧密连续的团块状，利用舌体区域的在HSI颜色空间中色调通道的色调值的显著特性将目标舌体区域分割出来。在得到预处理图像后，由预处理图像在HSI颜色空间中色调通道的值，构建色调值直方图；利用大津算法获取色调值直方图的最佳分割阈值，进而基于最佳分割阈值得到初始分割结果图，该初始分割结果图中最大的连通域对应的区域即为初始舌体区域；由于舌体区域在色调通道图像灰度值分布不均匀，嘴唇部分的色调信息与舌体部分的色调信息相近，所以有部分嘴唇区域的像素点被保留下来。另外由于病患身体健康状况的不同，存在部分病患舌苔较厚或者舌色变黄，会导致部分舌体区域的色调信息发生改变，这就使它们与周围的舌体区域像素存在差异而被误删。所以进一步的，为了避免将部分色调信息发生变化的舌体区域被误删，对初始舌体区域对应的最小外接矩形进行左右扩展，得到第一舌体区域，具体的：首先根据分割出的初始舌体区域的行和列的起始和终止位置，获得初始舌体区域的最小外接矩形。由于不同病患的舌体形态、拍摄的差异以及嘴唇对阈值分割的影响，定位的舌体左右边界可能也存在误差，因此计算最小外接矩形的左边界到预处理图像左边界的距离，计算最小外接矩形的右边界到预处理图像右边界的距离。基于初始舌体区域对应的最小外接矩形，将最小外接矩形的左边界向左扩展，将最小外接矩形的右边界向右扩展，得到舌体的初步分割的矩形窗口，该扩展后的矩形窗口也即第一舌体区域。步骤S200，基于所述第一舌体区域在HSI颜色空间中亮度通道的值，对所述第一舌体区域进行阈值分割得到初始分割结果图；根据所述初始分割结果图中最大的连通域的最大纵坐标，分割出第二舌体区域。对步骤S100获取第一舌体区域对应的矩形窗口进行分析，根据口腔内部区域较暗的特点，去除上唇区域对舌体分割的影响，然后对剩余部分进行高斯分布加权，以便于后续阈值分割出精准的舌体区域。获得精准舌体区域的过程为：根据口腔内部区域较暗的特点，分割出上唇区域。根据高斯分布加权的方式，精准分割出舌体区域。根据口腔内部区域较暗的特点，分割出上唇区域的具体方法为：由于口腔深处区域颜色较暗，与唇部或牙齿区域的变化非常剧烈，且嘴唇与舌体粘连部位相对舌体亮度要暗一些。故首先基于第一舌体区域在HSI颜色空间中亮度通道的亮度值，对第一舌体区域进行分割。基于第一舌体区域在HSI颜色空间中亮度通道的值，对第一舌体区域进行阈值分割得到初始分割结果图，具体的：由分割出的第一舌体区域各像素点在HSI颜色空间中亮度通道上的值，构建对应的亮度值直方图。然后使用大津算法获取亮度值直方图对应的最佳阈值，进而基于最佳阈值进行阈值分割，得到通过亮度通道分量进行阈值分割的初始分割结果图。此时分割得到的初始分割结果图中的上唇与舌体完全分开，但下唇与舌体仍存在粘连，且舌体部分边缘缺失。故为了更加精准的划分出舌体区域，对得到的第一舌体区域进行进一步的分割，也即对第一舌体区域对应的初始分割结果图进行进一步的分割。根据阈值分割得到的初始分割结果图中最大的连通域所对应的最大纵坐标，分割出第二舌体区域。具体的：以初始分割结果图中左下角的点为原点，保留原点至最大纵坐标内对应的区域为第二舌体区域。也即以第一舌体区域对应的初始分割结果图的左下角的点为原点，构建直角坐标系，使得初始分割结果图处于直角坐标系的第一象限。选取初始分割结果图内最大的连通域，该连通域为舌体区域，获取该连通域内的最大纵坐标，然后以直线分割初始分割结果图，保留原点至最大纵坐标内对应的区域为第二舌体区域，该第二舌体区域为获得的新的矩形窗口，此时得到的第二舌体区域中去除了上唇的影响。步骤S300，获取所述第二舌体区域在HSI颜色空间中对应的亮度通道图像；选取所述亮度通道图像中的部分区域，对部分区域中每行对应的亮度值集合进行高斯分布加权，得到加权后的亮度值集合；对加权后的亮度值集合进行阈值分割，得到每行对应的第三舌体区域；比较所述亮度通道图像的部分区域的中间行和其他每行的第三舌体区域的差异性，从中筛选出差异性最小的行作为标记行。进一步的，在得到第二舌体区域后，根据高斯分布加权的方式，精准分割出舌体区域。根据第二舌体区域的位置坐标，在舌体图像对应的亮度通道图像上分割出第二舌体区域的亮度通道图像，该第二舌体区域的横向长为M、纵向长为N，即对应的第二舌体区域的亮度通道图像的横向长为M、纵向长为N，也即由第二舌体区域在HSI颜色空间中对应的亮度通道图像的横向长为M、纵向长为N。由于图像上半部分进行分割时部分舌根会受到下唇的影响，图像下半部分进行分割时舌尖区域的每行所占的像素点数量较少，会影响大津算法的阈值分割。因此，选取亮度通道图像中的中间部分区域，对部分区域中每行像素点的亮度值集合进行高斯分布加权，得到加权后的亮度值集合。其中，选取亮度通道图像中的中间部分区域为：获取亮度通道图像的宽，以宽的三分之一至三分之二处之间的区域为选取出的亮度通道图像中的部分区域。也即获取亮度通道图像的宽N，取直线与直线之间的矩形区域为选取出的亮度通道图像中的部分区域。该选取出的亮度通道图像中的部分区域受到的影响最少，其结合色调通道分量和亮度通道分量阈值分割的准确概率最高。对于选取出的亮度通道图像中的部分区域中纵坐标为的一行，也即对于选取出的亮度通道图像中的部分区域的中间行，从左到右统计该中间行的各像素点在亮度通道的亮度值，获得亮度值集合，其中，M为亮度通道图像的横向长度，也即第二舌体区域的横向长度。由于舌体的对称性，理论上其应在部分区域中沿直线对称，部分区域中像素点的横坐标越接近于，该点属于舌体区域的概率越大，进一步的可以对亮度值集合进行高斯分布加权，得到加权后的亮度值集合。已知“小概率事件”通常指发生的概率小于5%的事件，认为该事件是几乎不可能发生的。对于高斯分布，变量落在以外的概率小于千分之三，在实际问题中常认为相应的事件不会发生，所以基本上可以把区间看作是变量实际可能的取值区间。而集合中的像素点的横坐标在区间内，且属于舌体的像素点沿直线对称，因此对集合进行高斯分布加权，该高斯分布的数学期望和标准方差分别为：，。故选取出的部分区域中的中间行的像素点根据高斯分布的位置权重为：其中，为部分区域中间行的第i个像素点的位置权重；为亮度通道图像的横向长度；i为部分区域中间行的第i个像素点的横坐标值。因此部分区域的中间行像素点的亮度值集合进行高斯分布加权后的加权集合中各像素点的亮度值为：其中，为部分区域中间行的第i个像素点进行高斯分布加权后的亮度值；为部分区域中间行的第i个像素点的位置权重；为部分区域中间行的第i个像素点未进行高斯分布加权前的亮度值。同样的，获取选取出的亮度通道图像的部分区域中每行对应的亮度值集合，并对每行对应的亮度值集合进行高斯分布加权，得到每行所对应的加权后的亮度值集合。然后使用大津算法对每行对应的加权后的亮度值集合进行阈值分割，获得部分区域中每行对应的第三舌体区域，其中，利用大津算法获取亮度值集合对应的最佳阈值，令像素值大于最佳阈值的像素点为第三舌体区域内的像素点。比较亮度通道图像的中间行和部分区域中其他每行的第三舌体区域的差异性，从中筛选出差异性最小的行作为标记行，具体的：获取亮度通道图像的中间行对应的第三舌体区域的最小横坐标和最大横坐标，分别作为第一最小横坐标和第一最大横坐标；对于亮度通道图像中除中间行外其他任意行，获取对应的第三舌体区域的最小横坐标和最大横坐标，分别作为第二最小横坐标和第二最大横坐标；计算第一最小横坐标和第二最小横坐标的差值的绝对值，作为第一绝对值；计算第一最大横坐标和第二最大横坐标的差值的绝对值，作为第二绝对值；第一绝对值和第二绝对值的均值为差异性。该差异性为除中间行外其他行与中间行的阈值分割出的第三舌体区域的差异性。该差异性的计算公式为：其中，为第i行与中间行对应的差异性；为第一最小横坐标；为第i行对应的第二最小横坐标；为第一最大横坐标；为第i行对应的第二最大横坐标；为第一绝对值；为第二绝对值。第i行与中间行所对应的最小横坐标之间的差异越大，则反映两行的第三舌体区域的起始点的差异性越大；同样的，第i行与中间行所对应的最大横坐标之间的差异越大，则反映两行的第三舌体区域的末尾点的差异性越大；两行之间的起始点与末尾点的差异性越大，反映两行所对应的第三舌体区域的差异越大。由于中间行为舌体区域的概率越大，则第i行与中间行的差异越大，对应的第i行为舌体区域的概率越小；反之，第i行与中间行的差异越小，对应的第i行为舌体区域的概率越大。对于选取出的亮度通道图像中的部分区域的每行，逐行进行差异性计算，计算每行与中间行的差异性，从中筛选出差异性最小的行作为标记行，具体的：当某行对应的差异性为0时，停止逐行的差异性计算，并标记该差异性为0的行为标记行；若遍历完成后，部分区域中所有行对应的差异性均不为0时，则取差异性最小的行作为标记行，获取标记行对应的纵坐标为j。步骤S400，以所述标记行为起始行，分别沿着上下两个方向逐行遍历，对舌体图像中的各行对应的像素点的亮度值分别进行高斯分布加权，分割加权后舌体图像中的各行，得到目标舌体区域。统计标记行上经高斯分布加权分割的第三舌体区域的像素点数量为。已知舌体的轮廓边缘是连续的，故相邻行的舌体区域左右两端的像素点相邻；由于边缘的连续性，标记行的一侧边缘点做3*3的窗口，其相邻行的边缘点只能在窗口内，故一侧的长度最多增加1，则两侧即增加2，所以标记行的相邻行中第三舌体区域像素点数量一定不大于。以标记行为起始行，分别沿上下两个方向逐行遍历，对舌体图像中的各行对应的像素点分别进行高斯分布加权。以向上逐行遍历为例，其第j+1行中舌体区域像素点数量一定不大于，且理论上舌体应沿直线对称，从左至右统计第j+1行中的像素点在HSI颜色空间中亮度通道的值，获得集合，对集合进行高斯分布加权，该高斯分布的数学期望和标准方差分别为：，。第j+1行中的第i个像素点在HSI颜色空间中亮度通道的亮度值的高斯分布的位置权重为：其中，为第j+1行中第i个像素点的位置权重；为亮度通道图像的横向长度；i表示部分区域中该行中第i个像素点的横坐标值。因此第j+1行像素点的亮度通道的值进行高斯分布加权后的加权集合中各像素点的亮度值为：其中，为舌体图像中第i个像素点进行高斯分布加权后的亮度值；为第i个像素点的位置权重；为舌体图像中第i个像素点未进行高斯分布加权后的亮度值。进一步的，使用大津算法对高斯分布加权后的舌体图像中第j+1行进行阈值分割，获得第j+1行中的第四舌体区域，统计其像素点数量为，然后对第j+2行进行高斯分布加权，其高斯分布函数的数学期望值不变为，其高斯分布函数的标准方差中将替换为，则标准方差替换为，获得新的高斯分布权重，再进行加权分割，获得第j+3行中舌体区域的像素点数量，由此再更新高斯分布权重，进而进行加权分割，直至第N行分割完成，每行进行高斯分布加权后，再进行分割得到对应的第四舌体区域。需要说明的是该第四舌体区域为每行对应的舌体区域，即每个第四舌体区域均只有一行。同理，从标记行开始向下逐行遍历，进行更新权重的加权分割，直至第1行分割完成。每行均有各自对应的第四舌体区域，由每行的舌体区域构成目标舌体区域，该目标舌体区域为分割出的完整的舌体区域，至此将舌体区域精准的分割出来了，且由于是经过高斯分布加权后分割出的目标舌体区域，该目标舌体区域相较于嘴唇和牙齿等背景区域更加突出，所分割出的目标舌体区域更加准确。综上所述，本发明涉及数据处理技术领域。该方法首先采集病患舌体的舌体图像，对舌体图像进行预处理，分割出第一舌体区域；基于第一舌体区域在HSI颜色空间中亮度通道的亮度值，对第一舌体区域进行阈值分割，分割出第二舌体区域；获取第二舌体区域在HSI颜色空间中对应的亮度通道图像中的部分区域，对部分区域中每行对应的亮度值集合进行高斯分布加权，阈值分割加权后的亮度值集合，得到每行对应的第三舌体区域；比较部分区域的中间行和其他行的第三舌体区域的差异性，从中筛选出差异性最小的行作为标记行；以标记行为起始行，分别沿着上下两个方向逐行遍历，对舌体图像中的各行对应的像素点的亮度值分别进行高斯分布加权，分割加权后舌体图像中的各行，得到目标舌体区域。本发明通过对舌体区域进行高斯分布加权，提高了舌体区域与非舌体区域的差异性，更加精准的实现对舌体区域的阈值分割，以确保后续疾病诊断时的准确性。需要说明的是：上述本发明实施例先后顺序仅仅为了描述，不代表实施例的优劣。在附图中描绘的过程不一定要求示出的特定顺序或者连续顺序才能实现期望的结果。在某些实施方式中，多任务处理和并行处理也是可以的或者可能是有利的。本说明书中的各个实施例均采用递进的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。以上所述仅为本发明的较佳实施例，并不用以限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
