标题title
超声波诊断装置及超声波诊断装置的控制方法
摘要abst
超声波诊断装置具备：凝胶层厚度计算部，通过分析超声波图像来计算凝胶层的厚度；组织识别部，通过分析超声波图像来识别受检体的组织；及压迫状态判定部，在所计算的所述凝胶层的厚度成为厚度阈值以下时，根据由组织识别部识别到的组织的形状变化，判定超声波探头对受检体的体表面的压迫状态。
权利要求书clms
1.一种超声波诊断装置，其使超声波探头与被涂布于受检体的体表面的凝胶层接触而获取超声波图像，该超声波诊断装置具备：所述超声波探头，其至少包含振子阵列；收发电路，其从所述振子阵列朝向所述受检体进行超声波束的发送、且对从如下的所述振子阵列输出的接收信号进行处理而生成声线信号，所述振子阵列接收了基于所述受检体的超声波回波；图像生成部，其根据由所述收发电路生成的所述声线信号，生成所述超声波图像；凝胶层厚度计算部，其通过分析由所述图像生成部生成的所述超声波图像，计算所述凝胶层的厚度；组织识别部，其通过分析由所述图像生成部生成的所述超声波图像，识别所述受检体的组织；及压迫状态判定部，其在由所述凝胶层厚度计算部计算出的所述凝胶层的厚度成为厚度阈值以下的情况下，根据由所述组织识别部识别到的所述组织的形状变化而判定所述超声波探头针对所述受检体的体表面的压迫状态。2.根据权利要求1所述的超声波诊断装置，其中，所述压迫状态判定部在表示由所述组织识别部识别到的所述组织的形状变化的形状变化率超过形状变化率阈值的情况下，判定为所述受检体的体表面被所述超声波探头压迫，在由所述组织识别部识别到的所述组织的所述形状变化率为所述形状变化率阈值以下的情况下，判定为所述受检体的体表面未被所述超声波探头压迫。3.根据权利要求2所述的超声波诊断装置，其中，该超声波诊断装置还具备通知部，该通知部在由所述压迫状态判定部判定为所述受检体的体表面被压迫的情况下，指示操作者停止基于所述超声波探头的压迫，在由所述压迫状态判定部判定为所述受检体的体表面未被压迫的情况下，指示所述操作者补充所述凝胶层的凝胶。4.根据权利要求1至3中任意一项所述的超声波诊断装置，其中，所述组织识别部识别所述体表面、血管、除所述血管以外的皮下解剖结构中的至少1个作为所述组织。5.根据权利要求2或3所述的超声波诊断装置，其中，所述组织识别部识别血管作为所述组织，所述压迫状态判定部以由所述组织识别部识别到的所述血管的位置越浅则值越大的方式设定所述形状变化率阈值。6.根据权利要求1至5中任意一项所述的超声波诊断装置，其中，所述厚度阈值是规定值。7.根据权利要求1至6中任意一项所述的超声波诊断装置，其中，所述压迫状态判定部将对由所述凝胶层厚度计算部最初计算出的所述凝胶层的厚度乘以规定比例而得的值设定为所述厚度阈值。8.一种超声波诊断装置的控制方法，其中，从与被涂布于受检体的体表面的凝胶层接触了的超声波探头的振子阵列朝向受检体进行超声波束的发送、且对从如下的所述振子阵列输出的接收信号进行处理而生成声线信号，所述振子阵列接收了基于所述受检体的超声波回波，根据所生成的所述声线信号，生成超声波图像，通过分析所生成的所述超声波图像，计算所述凝胶层的厚度，通过分析所生成的所述超声波图像，识别所述受检体的组织，在计算出的所述凝胶层的厚度成为厚度阈值以下的情况下，根据所识别的所述组织的形状变化而判定所述超声波探头针对所述受检体的体表面的压迫状态。
说明书desc
技术领域本发明涉及一种超声波诊断装置及其超声波诊断装置的控制方法，该超声波诊断装置通过涂布于受检体的体表面的凝胶层获取受检体的体内的超声波图像。背景技术一直以来，作为获得受检体内部的图像的装置，已知有一种超声波诊断装置。超声波诊断装置通常具备具有排列多个超声波振子而成的振子阵列的超声波探头。在使该超声波探头接触受检体的体表面的状态下，从振子阵列朝向受检体内发射超声波束，并由振子阵列接收来自受检体的超声回波来获取与超声回波对应的电信号。而且，超声波诊断装置对得到的电信号进行电处理来生成针对受检体的该部位的超声波图像。其中，已知在受检体的皮下存在的静脉等组织容易因来自外部的压迫而变形。因此，在通过超声波诊断装置观察这种组织时，为了防止因超声波探头按压受检体的体表面而导致组织变形，例如，通常进行如下手工操作：在受检体的体表面涂布所谓的超声波检査用凝胶层，以在超声波探头接触所涂布的凝胶层的状态下使超声波探头不按压受检体的体表面的方式观察组织。然而，存在操作者因专注于搜索观察对象的组织等而导致用超声波探头压迫受检体的体表面的情况。因此，为了防止由超声波探头导致的对受检体的体表面的压迫，例如，开发有一种如专利文献1中公开的超声波诊断装置，其促使操作者进行适当的手工操作。专利文献1的超声波诊断装置根据涂布于受检体的体表面的凝胶层的厚度，判定超声波探头与观察对象的部位的位置关系是否适当。现有技术文献专利文献专利文献1：日本特开2015-061591号公报发明内容发明要解决的技术课题已知涂布于受检体的体表面的凝胶层即使在超声波探头未压迫受检体的体表面的状态下，也会因操作者在凝胶层上移动超声波探头而逐渐变薄。专利文献1的超声波诊断装置由于仅根据凝胶层的厚度判定超声波探头与观察对象的部位的位置关系是否适当，因此有时即使超声波探头未压迫受检体的体表面，也会检测出凝胶层变薄而错误判定超声波探头压迫受检体的体表面。本发明为了解决这种现有问题而完成，其目的在于提供一种能够准确判定超声波探头对受检体的体表面的压迫状态的超声波诊断装置及超声波诊断装置的控制方法。用于解决技术课题的手段为了实现上述目的，本发明所涉及的超声波诊断装置使超声波探头接触涂布于受检体的体表面的凝胶层来获取超声波图像，该超声波诊断装置的特征在于，具备：超声波探头，至少包含振子阵列；收发电路，从振子阵列朝向受检体发射超声波束且处理从振子阵列输出的接收信号来生成声线信号，所述振子阵列接收基于受检体的超声回波；图像生成部，根据由收发电路生成的声线信号来生成超声波图像；凝胶层厚度计算部，通过分析由图像生成部生成的超声波图像来计算凝胶层的厚度；组织识别部，通过分析由图像生成部生成的超声波图像来识别受检体的组织；及压迫状态判定部，在由凝胶层厚度计算部计算的凝胶层的厚度成为厚度阈值以下时，根据由组织识别部识别到的组织的形状变化来判定超声波探头对受检体的体表面的压迫状态。优选压迫状态判定部在表示由组织识别部识别到的组织的形状变化的形状变化率超过形状变化率阈值时，判定为受检体的体表面受到超声波探头的压迫，在由组织识别部识别到的组织的形状变化率为形状变化率阈值以下时，判定为受检体的体表面未受到超声波探头的压迫。优选超声波诊断装置进一步具备通知部，该通知部在由压迫状态判定部判定为受检体的体表面受到压迫时，命令操作者停止基于超声波探头的压迫，在由压迫状态判定部判定为受检体的体表面未受到压迫时，命令操作者补充凝胶层的凝胶。组织识别部能够识别体表面、血管、除血管以外的皮下解剖结构中的至少1个作为组织。并且，组织识别部识别血管作为组织，压迫状态判定部能够以使由组织识别部识别到的血管的位置越浅值越大的方式设定形状变化率阈值。厚度阈值可以是规定值。或者，压迫状态判定部也能够将对由凝胶层厚度计算部最初计算的凝胶层的厚度乘以规定比例而得的值设定为厚度阈值。本发明所涉及的超声波诊断装置的控制方法的特征在于，从与涂布于受检体的体表面的凝胶层接触的超声波探头的振子阵列朝向受检体发射超声波束且处理从振子阵列输出的接收信号来生成声线信号，所述振子阵列接收基于受检体的超声回波，根据所生成的声线信号来生成超声波图像，通过分析所生成的超声波图像来计算凝胶层的厚度，通过分析所生成的超声波图像来识别受检体的组织，在所计算的凝胶层的厚度成为厚度阈值以下时，根据所识别的组织的形状变化，判定超声波探头对受检体的体表面的压迫状态。发明效果根据本发明，具备：图像生成部，生成超声波图像；凝胶层厚度计算部，通过分析由图像生成部生成的超声波图像来计算凝胶层的厚度；组织识别部，通过分析由图像生成部生成的超声波图像来识别受检体的组织；及压迫状态判定部，在由凝胶层厚度计算部计算的凝胶层的厚度成为厚度阈值以下时，根据由组织识别部识别到的组织的形状变化，判定超声波探头对受检体的体表面的压迫状态，因此能够准确判定超声波探头对受检体的体表面的压迫状态。附图说明图1是表示本发明的第1实施方式所涉及的超声波诊断装置的结构的框图。图2是表示本发明的第1实施方式中的接收电路的内部结构的框图。图3是表示本发明的第1实施方式中的图像生成部的内部结构的框图。图4是表示本发明的第1实施方式中凝胶层大于厚度阈值且受检体的体表面未受到超声波探头的压迫的状态的超声波图像的示意图。图5是表示本发明的第1实施方式中受检体的体表面受到超声波探头的压迫的状态的超声波图像的示意图。图6是表示本发明的第1实施方式中凝胶层的厚度为厚度阈值以下的状态的超声波图像的示意图。图7是表示本发明的第1实施方式中显示于显示装置的停止由超声波探头导致的压迫为主旨的命令的示意图。图8是表示本发明的第1实施方式中显示于显示装置的补充凝胶为主旨的命令的示意图。图9是表示本发明的第1实施方式所涉及的超声波诊断装置的动作的流程图。图10是表示本发明的第2实施方式所涉及的超声波诊断装置的结构的框图。具体实施方式以下，参考附图对本发明的实施方式进行说明。以下记载的构成要件的说明是根据本发明的代表性实施方式进行的，但本发明并不限定于这种实施方式。另外，在本说明书中使用“～”表示的数值范围表示包括“～”的前后记载的数值作为下限值及上限值的范围。并且，在本说明书中，“垂直”及“平行”包括本发明所属的技术领域中允许的误差范围。例如，“垂直”及“平行”表示相对于严格意义上的垂直或平行在小于±10度的范围内等，相对于严格意义上的垂直或平行的误差优选为5度以下，更优选为3度以下。在本说明书中，“同一”、“相同”包括技术领域中通常允许的误差范围。并且，在本说明书中，当记载为“全部”、“均”或“整个面”等时，除100％的情况以外，还包括技术领域中通常允许的误差范围，例如包括99％以上、95％以上或90％以上的情况。第1实施方式图1中示出本发明的第1实施方式所涉及的超声波诊断装置1的结构。超声波诊断装置1具备振子阵列2，并且在振子阵列2上分别连接有发射电路3及接收电路4。其中，由发射电路3和接收电路4构成收发电路5。并且，在接收电路4上依次连接有图像生成部6、显示控制部7、显示装置8。图像生成部6上连接有凝胶层厚度计算部9及组织识别部10，在凝胶层厚度计算部9及组织识别部10上连接有压迫状态判定部11。并且，压迫状态判定部11上连接有通知部12，通知部12上连接有显示控制部7。并且，在收发电路5、图像生成部6、显示控制部7、凝胶层厚度计算部9、组织识别部10、压迫状态判定部11及通知部12上连接有装置控制部13。并且，装置控制部13上连接有输入装置14及存储部15。另外，装置控制部13与存储部15彼此连接成能够进行双向的信息交换。并且，振子阵列2及收发电路5包括在超声波探头21中。并且，由图像生成部6、显示控制部7、凝胶层厚度计算部9、组织识别部10、压迫状态判定部11、通知部12及装置控制部13构成超声波诊断装置1用处理器22。图1所示的超声波探头21的振子阵列2具有一维或二维排列的多个振子。这些振子分别根据从发射电路3供给的驱动信号来发射超声波，并且接收来自受检体的超声回波来输出基于超声回波的信号。各振子例如通过在包括以PZT为代表的压电陶瓷、以PVDF为代表的高分子压电元件及以PMN-PT为代表的压电单晶等压电体的两端形成电极来构成。发射电路3例如包括多个脉冲发生器，并且根据发射延迟模式调节延迟量而向多个振子供给各自的驱动信号，以使从振子阵列2的多个振子发射的超声波形成超声波束，该发射延迟模式根据来自装置控制部13的控制信号选择。如此，若对振子阵列2的振子的电极施加脉冲状或连续波状的电压，则压电体伸缩，从各振子产生脉冲状或连续波状的超声波，并由这些超声波的合成波形成超声波束。所发射的超声波束例如在受检体的部位等对象处反射，并朝向超声波探头21的振子阵列2传播。如此朝向振子阵列2传播的超声回波由构成振子阵列2的各振子接收。此时，构成振子阵列2的各振子通过接收传播的超声回波进行伸缩而产生电信号，并向接收电路4输出这些电信号。接收电路4根据来自装置控制部13的控制信号，处理从振子阵列2输出的信号而生成声线信号。如图2所示，接收电路4具有放大部23、AD转换部24及波束成形器25串联连接的结构。放大部23放大从构成振子阵列2的各振子输入的信号，并向AD转换部24发送放大后的信号。AD转换部24将从放大部23发送过来的信号转换为数字接收数据，并向波束成形器25发送这些接收数据。波束成形器25通过根据音速或音速的分布对由AD转换部24转换的各接收数据提供各自的延迟并将它们相加来进行所谓的接收聚焦处理，该音速或音速的分布根据接收延迟模式来设定，该接收延迟模式根据来自装置控制部13的控制信号来选择。通过该接收聚焦处理来获取整相相加由AD转换部24转换的各接收数据而得且缩小了超声回波的焦点的声线信号。如图3所示，图像生成部6具有信号处理部26、DSC27及图像处理部28依次串联连接而成的结构。信号处理部26在根据超声波的反射位置的深度，对由接收电路4生成的声线信号实施由距离引起的衰减的校正之后，实施包络检波处理，由此生成与受检体内的组织相关的断层图像信息即B模式图像信号。DSC27将由信号处理部26生成的B模式图像信号转换为遵循一般电视信号的扫描方式的图像信号。图像处理部28对从DSC27输入的B模式图像信号实施灰度处理等各种所需图像处理之后，向显示控制部7、凝胶层厚度计算部9及组织识别部10输出B模式图像信号。以下，将由图像处理部28实施了图像处理的B模式图像信号简称为超声波图像。观察到容易因来自外部的压迫而变形的静脉等组织时，为了防止超声波探头按压在受检体的体表面而导致组织变形，通常进行如下手工操作：在受检体的体表面涂布所谓的超声波检査用凝胶层，在超声波探头接触所涂布的凝胶层的状态下使超声波探头不按压受检体的体表面的方式观察组织。其中，凝胶层由所谓高分子吸收型凝胶等粘度高的液体构成。通常，在超声波探头与受检体的体表面之间存在空气层时，容易发生超声波的反射及衰减，但凝胶层充分透过超声波且能够填埋受检体的体表面与超声波探头之间的间隙，因此能够在超声波探头与受检体的体表面之间减少超声波的反射及衰减。凝胶层厚度计算部9通过分析由图像生成部6生成的超声波图像，计算涂布于受检体的体表面的凝胶层的厚度。例如，如图4所示，凝胶层厚度计算部9识别超声波图像U中的受检体的体表面S，计算从超声波图像U的深度方向上的超声波图像U的最浅位置即超声波图像U的上端部到体表面S为止的最短长度作为凝胶层G的厚度L1。其中，在凝胶层G的内部不易发生超声波的反射，因此凝胶层G在超声波图像U中成为低亮度。另一方面，在凝胶层G与受检体的体表面S的边界部分，容易发生超声波的反射，因此该边界部分在超声波图像U中成为高亮度。因此，例如，凝胶层厚度计算部9能够识别超声波图像U的从浅部到深度方向的亮度变化大于规定值的部位作为体表面S，并计算从超声波图像U的上端部到所识别的体表面S为止的最短长度作为凝胶层G的厚度L1。并且，例如，在识别超声波图像U上的体表面S时，凝胶层厚度计算部9还能够使用公知的算法。例如，凝胶层厚度计算部9预先存储体表面S的典型的图案数据作为模板，一边用模板在超声波图像U内进行搜索，一边计算相对于图案数据的相似度，并能够视为在相似度为阈值以上且最大的位置存在体表面S。凝胶层厚度计算部9还能够通过求出如此识别的体表面S的超声波图像U内的深度位置，间接地计算凝胶层G的厚度。并且，除简单的模板匹配以外，相似度的计算例如还能够使用Csurka et al.:Visual Categorization with Bags of Keypoints,Proc.of ECCV Workshop onStatistical Learning in Computer Vision,pp.59-74中记载的机器学习方法或Krizhevsk et al.:ImageNet Classification with Deep Convolutional NeuralNetworks,Advances in Neural Information Processing Systems 25,pp.1106-1114中记载的利用深度学习的通用图像识别方法等。组织识别部10通过分析由图像生成部6生成的超声波图像U，识别受检体的组织。例如，组织识别部10识别图4所示的受检体的体表面S、静脉B1及动脉B2的血管及除血管以外的皮下解剖结构中的至少1个作为受检体的组织。其中，解剖结构例如包括神经及肌肉等。组织识别部10例如能够利用模板匹配、机器学习方法、利用深度学习等的通用图像识别方法等公知的算法，从超声波图像U识别受检体的组织。其中，图4中例示了包括静脉B1及动脉B2的横截面的超声波图像U，但也可以代替静脉B1及动脉B2的横截面而在超声波图像U中包括其纵截面。另外，静脉B1及动脉B2的横截面是指基于与静脉B1及动脉B2的行走方向正交的平面的静脉B1及动脉B2的切割面，静脉B1及动脉B2的纵截面是指沿静脉B1及动脉B2的行走方向的静脉B1及动脉B2的切割面。压迫状态判定部11在由凝胶层厚度计算部9计算的凝胶层G的厚度成为厚度阈值以下时，根据由组织识别部10识别到的组织的形状变化来判定超声波探头21对受检体的体表面S的压迫状态。此时，压迫状态判定部11根据基于组织识别部10的组织识别结果，计算表示所识别的组织的形状变化的形状变化率，所计算的形状变化率超过形状变化率阈值时，判定为受检体的体表面S受到超声波探头21的压迫。其中，受检体的组织变形越大，形状变化率的值越大，受检体的组织变形越小，形状变化率的值越小。例如，作为形状变化率，能够使用深度方向上的血管的直径的变化率。其中，例如，通过从1减去当前超声波图像U中的血管的深度方向的直径与成为超声波诊断的基准的超声波图像U中的血管的深度方向的直径之比，能够计算深度方向上的血管的直径的变化率。例如，在超声波诊断早期生成的成为基准的超声波图像U中，如图4所示，凝胶层G具有大于厚度阈值的厚度L1且静脉B1的横截面大致为圆形，在当前超声波图像U中，如图5所示，凝胶层G具有厚度阈值以下的厚度L2且静脉B1的横截面沿深度方向变形以至受损。压迫状态判定部11在凝胶层G的厚度L2为厚度阈值以下且根据成为基准的超声波图像U中的静脉B1和当前超声波图像U中的静脉B1计算的静脉B1的直径的变化率为形状变化率阈值以上时，能够判定为受检体的体表面S受到超声波探头21的压迫。其中，已知动脉B2不易因来自外部的压迫而变形。因此，压迫状态判定部11在超声波探头21对受检体的体表面S的压迫状态的判定中利用血管的形状变化时，利用静脉B1的形状变化比利用动脉B2的形状变化更有利。并且，压迫状态判定部11在凝胶层G的厚度为厚度阈值以下且所计算的形状变化率为形状变化率阈值以下时，判定为受检体的体表面S未受到超声波探头21的压迫。例如，如图4所示，将表示凝胶层G具有大于厚度阈值的厚度L1且静脉B1的横截面具有大致圆形的状态的超声波图像U作为基准时，在当前超声波图像U中，如图6所示，凝胶层G即使具有厚度阈值以下的厚度L3，只要静脉B1的直径的变化率为形状变化率阈值以下，则压迫状态判定部11能够判定为受检体的体表面S未受到超声波探头21的压迫。而且，在由凝胶层厚度计算部9计算的凝胶层G的厚度大于厚度阈值时，操作者会进行适当的手工操作，压迫状态判定部11无需判定压迫状态而直接判断为受检体的体表面S未受到超声波探头21的压迫，因此不进行超声波探头21的压迫状态的判定。通常，已知涂布于受检体的体表面的凝胶层即使在超声波探头未压迫受检体的体表面的状态下，也会因操作者在凝胶层上移动超声波探头而逐渐变薄。因此，通知部12在由压迫状态判定部11判定为受检体的体表面S受到压迫时，命令操作者停止基于超声波探头21的压迫，在由压迫状态判定部11判定为受检体的体表面S未受到压迫时，命令操作者补充凝胶层G的凝胶。例如，如图7所示，压迫状态判定部11通过将包括文字“请停止压迫”的命令面板P1与超声波图像U一同显示于显示装置8，能够命令操作者停止由超声波探头21导致的压迫。并且，例如，如图8所示，压迫状态判定部11通过将包括文字“请补充凝胶”的命令面板P2与超声波图像U一同显示于显示装置8，能够命令操作者补充凝胶层G的凝胶。装置控制部13根据预先存储于存储部15等中的程序及操作者经由输入装置14进行的输入操作，进行超声波诊断装置1的各部的控制。显示控制部7在装置控制部13的控制下，对由图像生成部6生成的超声波图像U、表示由通知部12向操作者作出的命令的信息等实施规定处理，将超声波图像U、由通知部12向操作者作出的命令等显示于显示装置8。显示装置8在显示控制部7的控制下显示超声波图像U、表示由通知部12向操作者作出的命令等，其例如包括LCD、有机EL显示器等显示装置。输入装置14供操作者进行输入操作，可以构成为具备键盘、鼠标、轨迹球、触控板及触摸面板等。存储部15存储超声波诊断装置1的控制程序等，可以使用闪存、HDD、SSD、FD、MO光盘、MT、RAM、CD、DVD、SD卡、USB存储器等记录介质或服务器等。另外，具有图像生成部6、显示控制部7、凝胶层厚度计算部9、组织识别部10、压迫状态判定部11、通知部12及装置控制部13的处理器22由CPU及用于使CPU进行各种处理的控制程序构成，但也可以用FPGA、DSP、ASIC、GPU、其他IC构成，或者也可以组合它们来构成。并且，处理器22的图像生成部6、显示控制部7、凝胶层厚度计算部9、组织识别部10、压迫状态判定部11、通知部12及装置控制部13还能够通过将一部分或者整体整合在1个CPU等来构成。以下，使用图9所示的流程图对第1实施方式中的超声波诊断装置1的动作进行详细说明。首先，在步骤S1中，操作者将足够量的凝胶层G涂布于受检体的体表面S，使超声波探头21接触所涂布的凝胶层G。在这种状态下，生成拍摄有涂布了凝胶层G的受检体的体表面S和存在于皮下的组织的超声波图像U，并将所生成的超声波图像U显示于显示装置8。此时，首先，根据来自发射电路3的驱动信号，从振子阵列2的多个振子向受检体内发射超声波束，从接收了来自受检体的超声回波的各振子向接收电路4输出接收信号。由接收电路4接收的接收信号通过放大部23被放大，并由AD转换部24进行AD转换之后，通过波束成形器25进行整相相加，由此生成声线信号。该声线信号在图像生成部6中由信号处理部26对其实施包络检波处理而成为B模式图像信号，经过DSC27及图像处理部28输入至显示控制部7，如图4所示，在显示控制部7的控制下超声波图像U显示于显示装置8。接着，在步骤S2中，组织识别部10通过分析在步骤S1中生成的超声波图像U，识别受检体的组织。例如，如图4所示，组织识别部10能够识别静脉B1作为受检体的组织。并且，此时，组织识别部10例如能够利用模板匹配、机器学习方法、利用深度学习等的通用图像识别方法等公知的算法，识别静脉B1。在接下来的步骤S3中，压迫状态判定部11将步骤S2的识别结果，例如表示静脉B1的形状的信息作为用于判断其形状的变化的基准来保持。在步骤S4中，与步骤S1同样地，新生成超声波图像U，所生成的超声波图像U显示于显示装置8。在步骤S5中，凝胶层厚度计算部9通过分析在步骤S4中生成的超声波图像U，计算凝胶层G的厚度。例如，如图4所示，凝胶层厚度计算部9识别超声波图像U中的受检体的体表面S，计算从超声波图像U的深度方向上的超声波图像U的最浅位置即超声波图像U的上端部到体表面S为止的最短长度作为凝胶层G的厚度L1。更具体而言，例如，凝胶层厚度计算部9能够识别超声波图像U的从浅部到深度方向的亮度变化大于规定值的部位作为体表面S。并且，凝胶层厚度计算部9例如能够利用模板匹配、机器学习方法、利用深度学习等的通用图像识别方法等公知的算法，识别超声波图像U上的体表面S。在步骤S6中，压迫状态判定部11判定在步骤S5中计算的凝胶层G的厚度是否为规定厚度阈值以下。由压迫状态判定部11判定为凝胶层G的厚度大于厚度阈值时，判断为无需进行超声波探头21的压迫状态的判定，返回步骤S4，新生成超声波图像U。根据如此新生成的超声波图像U，在步骤S5中计算凝胶层G的厚度，并进入步骤S6。在步骤S6中，判定为凝胶层G的厚度为厚度阈值以下时进入步骤S7。在步骤S7中，与步骤S2同样地，分析步骤S4中生成的超声波图像U，由此可识别静脉B1等受检体的组织。在步骤S8中，压迫状态判定部11计算与步骤S7中识别到的受检体的组织相关的形状变化率。例如，在步骤S3中保持静脉B1的形状时，压迫状态判定部11能够通过从1减去步骤S7中识别到的静脉B1的深度方向上的直径与步骤S3中保持形状的静脉B1的深度方向上的直径之比来计算静脉B1的直径的变化率作为形状变化率。在接下来的步骤S9中，压迫状态判定部11判定在步骤S8中计算的形状变化率是否超过了形状变化率阈值。例如，如图5所示，在步骤S7中识别到的静脉B1的横截面在超声波图像U的深度方向上受损，将根据在步骤S7中识别到的静脉B1和在步骤S3中保持形状的静脉B1计算的静脉B1的直径的变化率作为形状变化率，在该形状变化率超过形状变化率阈值时，判断为受检体的体表面S受到超声波探头21的压迫，并进入步骤S10。在步骤S10中，通知部12命令操作者停止由超声波探头21导致的压迫。例如，如图7所示，通知部12通过将包括文字“请停止压迫”的命令面板P1与超声波图像U一同显示于显示装置8，能够命令操作者停止由超声波探头21导致的压迫。如此，步骤S10的处理结束时超声波诊断装置1的动作结束。并且，如图6所示，静脉B1的横截面具有大致圆形，在步骤S9中，由压迫状态判定部11判定为与静脉B1相关的形状变化率为形状变化率阈值以下时，判断为受检体的体表面S未受到超声波探头21的压迫，进入步骤S11。在步骤S11中，通知部12命令操作者补充凝胶层G的凝胶。例如，如图8所示，通知部12通过将包括文字“请补充凝胶”的命令面板P2与超声波图像U一同显示于显示装置8，能够命令操作者补充凝胶层G的凝胶。如此，步骤S11的命令结束时超声波诊断装置1的动作结束。如上所述，根据本发明的第1实施方式所涉及的超声波诊断装置1，通过分析超声波图像U，计算涂布于受检体的体表面S的凝胶层G的厚度且识别受检体的组织，根据所计算的凝胶层G的厚度及受检体的组织的形状变化这两者，判定超声波探头21对受检体的体表面S的压迫状态。因此，例如，可防止如下情况：由于凝胶层G变薄，即使超声波探头21未压迫受检体的体表面S，也会错误判定为受检体的体表面S受到超声波探头21的压迫。如此，根据本发明的第1实施方式所涉及的超声波诊断装置1，能够准确地判定超声波探头21对受检体的体表面S的压迫状态。并且，根据基于压迫状态判定部11的判定结果，由通知部12向操作者作出停止由超声波探头21导致的压迫为主旨的命令或补充凝胶层G的凝胶为主旨的命令，因此操作者能够进行适当的手工操作，以使受检体的体表面S不受到超声波探头21的压迫。因此，根据本发明的第1实施方式的超声波诊断装置1，还能够提高超声波诊断的精度。另外，在步骤S1～步骤S3中，超声波诊断装置1的动作开始后，根据最初生成的受检体的超声波图像U识别受检体的组织并保持该识别结果，但此处使用的超声波图像并不限定于新生成的超声波图像，例如也可以是在过去的诊断中获得的超声波图像。例如，超声波诊断装置1具备存储过去的诊断中获得的超声波图像的未图示的图像存储器，能够代替在步骤S1中生成超声波图像U，从图像存储器读取过去的超声波图像。此时，通过在步骤S2中分析所读取的过去的超声波图像，识别包括在该超声波图像中的受检体的组织，并在步骤S3中保持识别结果。并且，在步骤S2中进行组织的识别的超声波图像只要拍摄对象的部位一致，则可以是通过拍摄与当前成为超声波诊断对象的受检体不同的另一受检体的内部来获得的超声波图像，也可以是通过拍摄所谓的超声波幻影的内部来获得的超声波图像。即使在这种情况下，只要拍摄对象的部位一致，则由于体表面及皮下解剖结构不会随受检体发生大变化，因此通过使用本发明的第1实施方式所涉及的超声波诊断装置1，能够准确判定超声波探头21对受检体的体表面S的压迫状态。并且，对凝胶层厚度计算部9计算从超声波图像U的上端部到受检体的体表面S为止的最短长度作为凝胶层G的厚度L1进行了说明，但例如也能够计算从超声波图像U的上端部到受检体的体表面S为止的长度的平均值作为凝胶层G的厚度。此时，例如，凝胶层厚度计算部9计算从超声波图像U的上端部到受检体的体表面S为止的区域的面积，并将所计算的面积除以与深度方向正交的方向上的超声波图像U的宽度，由此能够计算从超声波图像U的上端部到受检体的体表面S为止的长度平均值。并且，作为形状变化率，例示了深度方向上的血管的直径的变化率，但形状变化率只要表示受检体组织的形状变化，则并不限定于此。例如，作为形状变化率，能够使用通过从1减去当前超声波图像U中的血管的横截面的面积与成为基准的超声波图像U中的血管的横截面的面积之比来计算的血管面积的变化率。并且，例如，作为形状变化率，能够使用血管的横截面的扁平度。扁平度通过从1减去超声波图像U中深度方向的血管的直径与和深度方向正交的方向的血管的直径之比来计算。血管的横截面越接近正圆，该扁平度具有越接近0的值，血管的横截面在深度方向上受损程度越高，该扁平度具有越接近1的值。并且，作为形状变化率，还能够使用血管的横截面的圆度的倒数、血管的横截面与正圆的相似度的倒数等。并且，压迫状态判定部11在超声波探头21的压迫状态的判定中利用血管的横截面的形状变化，但并不限定于血管的横截面的形状变化，例如，压迫状态判定部11还能够将血管的纵截面的形状变化用于超声波探头21的压迫状态的判定。此时，例如，压迫状态判定部11计算位于浅部的血管壁与位于深部的血管壁之间的深度方向上的距离作为血管直径，作为形状变化率，能够使用通过从1减去当前超声波图像U中的血管直径与成为基准的超声波图像U中的血管直径之比来计算的血管直径的变化率。并且，例如，压迫状态判定部11能够将肌肉及神经等皮下解剖结构的形状变化用于超声波探头21的压迫状态的判定。例如，压迫状态判定部11通过测量由组织识别部10识别到的受检体的肌肉及神经等深度方向的厚度并从1减去当前超声波图像U中的肌肉及神经等的深度方向的厚度与成为基准的超声波图像U中的肌肉及神经等的深度方向的厚度之比，计算肌肉及神经等的厚度的变化率，将所计算的变化率用于超声波探头21的压迫状态的判定。并且，受检体的肌肉及皮下组织等通常具有层结构，由于受检体的体表面S受到超声波探头21的压迫，肌肉及皮下组织等的各层沿深度方向被压缩而变薄。肌肉及皮下组织等的层结构在超声波图像U中作为重复图案描绘，因此认为肌肉及皮下组织等越是沿深度方向被压缩，超声波图像U的深度方向上的肌肉及皮下组织等的层结构的空间频率会越大。因此，例如，压迫状态判定部11计算由组织识别部10识别到的受检体的肌肉及神经等的图像的空间频率，并能够计算当前超声波图像U中的肌肉及神经等的深度方向的空间频率与成为基准的超声波图像U中的肌肉及神经等的深度方向的空间频率之比作为形状变化率。并且，如图4所示，受检体的体表面S未受到超声波探头21的压迫时，由于在皮下存在静脉B1等组织，受检体的体表面S在超声波图像U中映现为弯曲状，但如图5所示，受检体的体表面S受到超声波探头21的压迫时，由于静脉B1等组织在深度方向上被压缩，因此受检体的体表面S在超声波图像U中映现为大致直线状。因此，例如，压迫状态判定部11还能够将受检体的体表面S的形状变化用于超声波探头21的压迫状态的判定。例如，压迫状态判定部11能够用曲线近似受检体的体表面S的形状，并计算该曲线的拐点的数量的倒数作为形状变化率。并且，压迫状态判定部11能够通过求出近似受检体的体表面S的曲线与直线的相似度等，计算表示该曲线近似直线的程度的直线度，并将所计算的直线度作为形状变化率来计算。并且，压迫状态判定部11能够使用预先规定的值作为形状变化率阈值。并且，例如，在由压迫状态判定部11判定超声波探头21的压迫状态中利用血管的形状变化时，压迫状态判定部11能够以使由组织识别部10识别到的血管的位置越浅值越大的方式设定形状变化率阈值。例如，压迫状态判定部11存储从受检体的体表面S到静脉B1为止的深度方向上的距离的基准值及与该距离对应的形状变化率阈值，以如下方式设定形状变化率阈值：从受检体的体表面S到静脉B1为止的深度方向上的距离越是比基准值短，形状变化率阈值越大，并且从受检体的体表面S到静脉B1为止的深度方向上的距离越是比基准值长，形状变化率阈值越小。例如，将静脉B1配置于浅位置即接近受检体的体表面S的位置时，与将静脉B1配置于深位置即远离受检体的体表面S的位置的情况相比，由超声波探头21导致的压迫的影响大，静脉B1的形状容易发生变化。因此，通过根据静脉B1等血管的深度来设定形状变化率阈值，能够配合相应于深度的血管的形状变化的容易度来设定形状变化率阈值，并能够更准确地判定超声波探头21对受检体的体表面S的压迫状态。其中，若从外部压迫在受检体的皮下附近存在骨头的关节等，则骨头与体表面S之间的组织容易变形。因此，例如，压迫状态判定部11还能够根据受检体的拍摄对象的部位来设定形状变化率阈值。例如，压迫状态判定部11存储按受检体的每个部位规定的值，若操作者经由输入装置14输入表示关节等拍摄对象的部位的信息，则能够设定与所输入的部位对应的值作为形状变化率阈值。并且，虽未图示，超声波诊断装置1A还能够具备根据由组织识别部10识别到的受检体的组织来判定所拍摄的受检体的部位的部位判定部。此时，压迫状态判定部11能够设定与由部位判定部判定的部位对应的值作为形状变化率阈值。并且，压迫状态判定部11使用预先规定的值作为凝胶层G的厚度的阈值，但该阈值还能够根据由凝胶层厚度计算部9计算的凝胶层G的厚度设定。例如，压迫状态判定部11能够在超声波诊断开始之后，设定对由凝胶层厚度计算部9最初计算的凝胶层G的厚度乘以规定比例而得的值作为阈值。通常，作为涂布于受检体的凝胶层使用的凝胶根据其种类具有各种粘度。因此，通过设定对凝胶层G的厚度的初始值乘以规定比例而得的值作为厚度阈值，能够根据构成凝胶层G的凝胶来设定适当的厚度阈值，并能够更准确地判定超声波探头21对受检体的体表面S的压迫状态。并且，对形状变化率在受检体的组织的变形越大其值越大且受检体的组织的变形越小其值越小的情况进行了说明，但也能够使用受检体的组织的变形越大值越小且受检体的组织的变形越小值越大的指标来代替形状变化率。作为这种指标，例如，能够使用当前超声波图像U中的血管的深度方向的直径与成为超声波诊断的基准的超声波图像U中的血管的深度方向的直径之比、当前超声波图像U中的血管的面积与成为超声波诊断的基准的超声波图像U中的血管的面积之比、在超声波图像U中深度方向的血管的直径与和深度方向正交的方向的血管的直径之比、血管的横截面的圆度、血管的横截面与正圆的相似度等。并且，此时，压迫状态判定部11例如在由凝胶层厚度计算部9计算的凝胶层G的厚度成为厚度阈值以下且所计算的指标成为规定阈值以下时，能够判定为受检体的体表面S受到超声波探头21的压迫。并且，如图7及图8所示，记载有由通知部12显示向操作者的命令的命令面板P1、P2显示于显示装置8的内容，但只要能够向操作者发出命令，则并不限定于该方法。例如，超声波诊断装置1还能够具备发出声音的未图示的扬声器，由通知部12从扬声器发出“请停止压迫”、“请补充凝胶”等声音作为向操作者的命令。并且，示出了收发电路5包括在超声波探头21中的情况，但也可以设置于超声波探头21的外部。即使在这种情况下，收发电路5也与收发电路5包括在超声波探头21中的情况同样地，从振子阵列2朝向受检体发射超声波束且处理振子阵列2输出的接收信号，该振子阵列接收基于受检体的超声回波。并且，进行所谓的接收聚焦处理的波束成形器25包括在接收电路4中，但例如还能够包括在图像生成部6中。在该情况下，也与波束成形器25包括在接收电路4中的情况同样地，由图像生成部6生成超声波图像U。第2实施方式第1实施方式的超声波诊断装置1具有显示装置8、输入装置14、超声波探头21直接连接于处理器22的结构，但例如也可以使显示装置8、输入装置14、超声波探头21、处理器22经由网络间接连接。如图10所示，第2实施方式中的超声波诊断装置1A的显示装置8、输入装置14、超声波探头21经由网络NW与超声波诊断装置主体31连接。超声波诊断装置主体31在图1所示的第1实施方式的超声波诊断装置1中移除了显示装置8、输入装置14、超声波探头21，其由收发电路5、存储部15及处理器22构成。即使超声波诊断装置1A具有这种结构，还是与第1实施方式的超声波诊断装置1同样地通过分析超声波图像U，计算涂布于受检体的体表面S的凝胶层G的厚度且识别受检体的组织，根据所计算的凝胶层G的厚度及受检体的组织的形状变化这两者来判定超声波探头21对受检体的体表面S的压迫状态。因此，例如，可防止如下情况：由于凝胶层G变薄，即使超声波探头21未压迫受检体的体表面S，也会错误判定为受检体的体表面S受到超声波探头21的压迫。如此，根据本发明的实施方式2所涉及的超声波诊断装置1A，与第1实施方式的超声波诊断装置1同样地，能够准确地判定超声波探头21对受检体的体表面S的压迫状态。并且，根据基于压迫状态判定部11的判定结果，由通知部12向操作者作出停止由超声波探头21导致的压迫为主旨的命令或补充凝胶层G的凝胶为主旨的命令，因此操作者能够进行适当的手工操作，以使受检体的体表面S不受到超声波探头21的压迫。因此，根据本发明的实施方式2所涉及的超声波诊断装置1A，与第1实施方式的超声波诊断装置1同样地，还能够提高超声波诊断的精度。并且，由于显示装置8、输入装置14、超声波探头21经由网络NW与超声波诊断装置主体31连接，因此能够将超声波诊断装置主体31用作所谓的远程服务器。由此，例如，操作者通过在操作者的附近准备显示装置8、输入装置14、超声波探头21，能够进行受检体的诊断，因此能够提高进行超声波诊断时的便利性。并且，例如，在将被称为所谓的平板电脑的便携式薄型计算机用作显示装置8及输入装置14的情况下，操作者能够更容易进行受检体的超声波诊断，并且能够进一步提高超声波诊断的便利性。另外，显示装置8、输入装置14、超声波探头21经由网络NW与超声波诊断装置主体31连接，此时，显示装置8、输入装置14、超声波探头21与网络NW可以有线连接，也可以无线连接。符号说明1、1A-超声波诊断装置，2-振子阵列，3-发射电路，4-接收电路，5-收发电路，6-图像生成部，7-显示控制部，8-显示装置，9-凝胶层厚度计算部，10-组织识别部，11-压迫状态判定部，12-通知部，13-装置控制部，14-输入装置，15-存储部，21-超声波探头，22-处理器，23-放大部，24-AD转换部，25-波束成形器，26-信号处理部，27-DSC，28-图像处理部，31-超声波诊断装置主体，B1-静脉，B2-动脉，G-凝胶层，L1、L2、L3-厚度，NW-网络，P1、P2-命令面板，S-体表面，U-超声波图像。
