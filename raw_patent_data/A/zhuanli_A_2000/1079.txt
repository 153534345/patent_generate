标题title
一种猪小里脊分离方法
摘要abst
本发明提供一种猪小里脊分离方法，包括以下步骤：通过待切割区域的特征生成切割线；根据切割线中刀具运动速度信息获得切割刀具的动作序列；通过元学习网络训练更新动作序列，并获得最优动作序列；通过最优动作序列优化切割线，并得到最优切割线；当刀具沿最优切割线进行切割时，通过六维力觉传感器获取刀具的切割力；同时，通过视觉相机获取实时切割路径；根据切割力和实时切割路径，控制刀具做到切割力随实时切割路径调控，进而完成对待切割区域的切割；将元学习引入到六维力觉传感器的反馈调整模型，切割过程中通过刀具携带的六维力觉传感器返回数据，实现对切割路径进行修正，对待切割区域的精准切割。
权利要求书clms
1.一种猪小里脊分离方法，其特征在于：包括以下步骤：步骤1：通过待切割区域的特征生成切割线；步骤2：根据切割线中刀具运动速度信息获得切割刀具的动作序列；步骤3：通过元学习网络训练更新动作序列，并获得最优动作序列；步骤4：通过最优动作序列优化切割线，并得到最优切割线；步骤5：当刀具沿最优切割线进行切割时，通过六维力觉传感器获取刀具的切割力；同时，通过视觉相机获取实时切割路径；根据切割力和实时切割路径，控制刀具做到切割力随实时切割路径调控，进而完成对待切割区域的切割。2.根据权利要求1所述的猪小里脊分离方法，其特征在于：所述步骤1包括以下步骤：步骤1.1：通过深度相机采集包含有小里脊的猪肉图像；步骤1.2：采用高斯滤波抑制猪肉图像的噪声：；为猪肉内任一点的坐标；/＞为猪肉内中心点的坐标，/＞是标准差；步骤1.3：作原始图像的概率灰度的概率直方图，然后设输入像素灰度值为，累计分布函数为：；其中为图像中灰度值为/＞的像素频数，/＞为图像像素总数；设输出图像灰度值为/＞，像素范围为/＞，期望输出均匀分布直方图，即：；用累计分布函数作变换，求变换后的新灰度，即令，得：；用求出的新灰度取代旧灰度，求出；步骤1.4：通过差分计算小里脊的图像梯度：；式中，为灰度图像在点/＞处的水平方向梯度值；/＞为竖直方向梯度值；/＞为显著性边缘占图像像素点的比例；/＞为猪肉图片像素个数；/＞为最佳自适应阈值；/＞为最大梯度值；/＞为最小梯度值；得到最佳自适应阈值/＞后，剔除猪肉图像中其余像素点，仅保留与最佳自适应阈值匹配的像素点，并使该像素点形成切割线。3.根据权利要求1所述的猪小里脊分离方法，其特征在于：所述刀具运动速度信息为：；其中，表示肉品断裂韧性，/＞为刀具和猪肉之间的摩擦力，/＞，/＞为刀具厚度，/＞为摩擦系数，/＞为弹性模量。4.根据权利要求3所述的猪小里脊分离方法，其特征在于：切割肉类所需的作用力为，且作用力/＞可用合力表示为/＞，结合上述公式可得：；式中，表示在x轴上的作用力；/＞表示在z轴上的作用力；在机械臂控制刀具切割过程中，六维力觉传感器获取切割肉类时作用力，同时保持固定的切削角度，根据切削力的反馈调整切削力度或修正切削路径；刀具位移与切割力度关系为：；式中，表示在x轴上的作用力；/＞表示在z轴上的作用力；/＞表示肉品断裂韧性；/＞和/＞表示在x轴和z轴上的位移；/＞表示为刀具实际的位移方向；/＞表示为刀具的宽度。5.根据权利要求4所述的猪小里脊分离方法，其特征在于：所述步骤3包括：步骤3.1：将刀具运动速度信息记为/＞，其中，/＞为特征个数；步骤3.2：在执行肉品分割时，作为环境/＞下所需执行的切割动作，设置执行动作的奖励值/＞，切割开始时，系统随机选择一个动作指令/＞，/＞表示该时刻刀具方向及速度高低组成的向量，将/＞输入输入层，经过网络前向传播后系统会获得一个奖励/＞，奖励/＞表示对样本的拟合程度；将执行每次任务对应的动作序列输入元学习网络，通过元学习对模型参数/＞进行更新，同时更新调整动作序列/＞，损失函数为：；式中，为该次动作序列，/＞为/＞时刻刀具的运动速度信息，/＞为序列的奖励值，对/＞和更新得：；式中，为动作序列，/＞为模型参数，通过训练得出最优的动作序列/＞和参数/＞。6.根据权利要求5所述的猪小里脊分离方法，其特征在于：所述步骤5包括：步骤5.1：将最优动作序列作为输入，设定序列/＞下一轮次动作/＞的最优值为/＞；设/＞为折扣系数，选择动作/＞最大化/＞的期望值可表示为：；训练时采用损失函数，每次迭代/＞进行如下更新：；第次训练的特征输出函数为：；式中，表示对识别目标进行强化学习提取的新特征；/＞是序列/＞和动作序列/＞的概率密度分布；/＞为期望；步骤5.2：对切割力与实时切割路径设定网络惩罚系数，从而实现对行动网络序列参数的更新，得到任务最优执行控制，最优执行控制/＞为：/＞。7.根据权利要求1所述的猪小里脊分离方法，其特征在于：六维力觉传感器固定连接在刀具和机械臂之间，深度相机固定连接在机械臂上并随刀具同步移动。8.根据权利要求7所述的猪小里脊分离方法，其特征在于：在刀具通过伸缩组件后和六维力觉传感器连接，伸缩组件包括竖向的伸缩杆，伸缩杆的缸体固定连接在六维力觉传感器上，伸缩杆的伸缩端依次经第一连杆和第二连杆后与刀具固定连接，第一连杆的一端与伸缩杆铰接，第一连杆的另一端与第二连杆的一端固定连接且两者组成开口向上的V字形结构，第二连杆的另一端与刀具的顶部固定连接，刀具的下部为刀刃端；在缸体上固定连接横向的滑杆，在滑杆上滑动设置有滑座，在第一连杆和第二连杆之间的节点和滑座上下对应，在节点和滑座之间设置有竖向的第三连杆，第三连杆的下端铰接在节点上，第三连杆的上端固定连接在滑座上，第一连杆在伸缩杆和第三连杆之间摆动时带动第三连杆在滑座上滑动；在伸缩杆的下端固设有夹爪，当伸缩杆向上收缩后使第二连杆带动刀具向下下降，并使刀具低于夹爪且用于切割猪肉；当伸缩杆向下伸出后使第二连杆带动刀具向上升起，并使刀具高于夹爪，夹爪用于抓取切割后的小里脊。
说明书desc
技术领域本发明涉及猪小里脊分离技术，具体涉及一种猪小里脊分离方法。背景技术在生猪屠宰过程中，猪里脊的分离是一项至关重要的工序。传统的分离方法是人工分离，这种方式不仅费时费力，而且分离效果受工人经验和技能的影响，分离出的猪小里脊质量不稳定;此外，人工分离还容易对小里脊造成污染，影响后续加工和产品质量。因此，有必要改进传统的分离方法，以提高分离效率和分离质量。目前，虽然有一些自动化分离设备出现，但生猪重量、大小不同，传统的机器分离难以适应不同肉质的生猪，适应性差，难以满足现代生猪屠宰企业的需求。发明内容针对现有技术中的问题，提供一种猪小里脊分离方法，目的在于适应不同肉质的切割。一种猪小里脊分离方法，包括以下步骤：步骤1：通过待切割区域的特征生成切割线；步骤2：根据切割线中刀具运动速度信息获得切割刀具的动作序列；步骤3：通过元学习网络训练更新动作序列，并获得最优动作序列；步骤4：通过最优动作序列优化切割线，并得到最优切割线；步骤5：当刀具沿最优切割线进行切割时，通过六维力觉传感器获取刀具的切割力；同时，通过视觉相机获取实时切割路径；根据切割力和实时切割路径，控制刀具做到切割力随实时切割路径调控，进而完成对待切割区域的切割。进一步为：所述步骤1包括以下步骤：步骤1.1：通过深度相机采集包含有小里脊的猪肉图像；步骤1.2：采用高斯滤波抑制猪肉图像的噪声：为猪肉内任一点的坐标；/＞为猪肉内中心点的坐标，/＞是标准差；步骤1.3：作原始图像的概率灰度的概率直方图，然后设输入像素灰度值为，累计分布函数为： 其中为图像中灰度值为/＞的像素频数，/＞为图像像素总数；设输出图像灰度值为/＞，像素范围为/＞，期望输出均匀分布直方图，即： 用累计分布函数作变换，求变换后的新灰度，即令，得：用求出的新灰度取代旧灰度，求出；步骤1.4：通过差分计算小里脊的图像梯度：式中，为灰度图像在点/＞处的水平方向梯度值；/＞为竖直方向梯度值；/＞为显著性边缘占图像像素点的比例；/＞为猪肉图片像素个数；/＞为最佳自适应阈值；/＞为最大梯度值；/＞为最小梯度值；得到最佳自适应阈值/＞后，剔除猪肉图像中其余像素点，仅保留与最佳自适应阈值匹配的像素点，并使该像素点形成切割线。进一步为：所述刀具运动速度信息为：其中，表示肉品断裂韧性，/＞为刀具和猪肉之间的摩擦力，/＞，/＞为刀具厚度，/＞为摩擦系数，/＞为弹性模量。进一步为：切割肉类所需的作用力为，且作用力/＞可用合力表示为，结合上述公式可得：式中，表示在x轴上的作用力；/＞表示在z轴上的作用力。在机械臂控制刀具切割过程中，六维力觉传感器获取切割肉类时作用力，同时保持固定的切削角度，根据切削力的反馈调整切削力度或修正切削路径；刀具位移与切割力度关系为：式中，表示在x轴上的作用力；/＞表示在z轴上的作用力；/＞表示肉品断裂韧性；和/＞表示在x轴和z轴上的位移；/＞表示为刀具实际的位移方向；/＞表示为刀具的宽度。进一步为：所述步骤3包括：步骤3.1：将刀具运动速度信息记为/＞，其中，/＞为特征个数；步骤3.2：在执行肉品分割时，作为环境/＞下所需执行的切割动作，设置执行动作的奖励值/＞，切割开始时，系统随机选择一个动作指令/＞，/＞表示该时刻刀具方向及速度高低组成的向量，将/＞输入输入层，经过网络前向传播后系统会获得一个奖励/＞，奖励/＞表示对样本的拟合程度；将执行每次任务对应的动作序列输入元学习网络，通过元学习对模型参数/＞进行更新，同时更新调整动作序列/＞，损失函数为： 式中，为该次动作序列，/＞为/＞时刻刀具的运动速度信息，/＞为序列的奖励值，对/＞和/＞更新得：式中，为动作序列，/＞为模型参数，通过训练得出最优的动作序列/＞和参数/＞。进一步为：所述步骤5包括：步骤5.1：将最优动作序列作为输入，设定序列/＞下一轮次动作/＞的最优值为；设/＞为折扣系数，选择动作/＞最大化/＞的期望值可表示为： 训练时采用损失函数，每次迭代/＞进行如下更新： 第次训练的特征输出函数为：式中，表示对识别目标进行强化学习提取的新特征；/＞是序列/＞和动作序列/＞的概率密度分布；/＞为期望；步骤5.2：对切割力与实时切割路径设定网络惩罚系数，从而实现对行动网络序列参数的更新，得到任务最优执行控制，最优执行控制/＞为：/＞。进一步为：六维力觉传感器固定连接在刀具和机械臂之间，深度相机固定连接在机械臂上并随刀具同步移动。进一步为：在刀具通过伸缩组件后和六维力觉传感器连接，伸缩组件包括竖向的伸缩杆，伸缩杆的缸体固定连接在六维力觉传感器上，伸缩杆的伸缩端依次经第一连杆和第二连杆后与刀具固定连接，第一连杆的一端与伸缩杆铰接，第一连杆的另一端与第二连杆的一端固定连接且两者组成开口向上的V字形结构，第二连杆的另一端与刀具的顶部固定连接，刀具的下部为刀刃端；在缸体上固定连接横向的滑杆，在滑杆上滑动设置有滑座，在第一连杆和第二连杆之间的节点和滑座上下对应，在节点和滑座之间设置有竖向的第三连杆，第三连杆的下端铰接在节点上，第三连杆的上端固定连接在滑座上，第一连杆在伸缩杆和第三连杆之间摆动时带动第三连杆在滑座上滑动；在伸缩杆的下端固设有夹爪，当伸缩杆向上收缩后使第二连杆带动刀具向下下降，并使刀具低于夹爪且用于切割猪肉；当伸缩杆向下伸出后使第二连杆带动刀具向上升起，并使刀具高于夹爪，夹爪用于抓取切割后的小里脊。本发明的有益效果：将元学习引入到六维力觉传感器的反馈调整模型，切割过程中通过刀具携带的六维力觉传感器返回数据，实现对切割路径进行修正，对待切割区域的精准切割。附图说明图1为本发明的流程图；图2为本发明中刀具、六维力觉传感器和机械臂的连接结构示意图；图3为本发明中刀具和六维力觉传感器之间的具体连接结构示意图。具体实施方式下面结合附图对本发明做详细说明。下面详细描述本发明的实施例，所述实施例的示例在附图中示出，其中自始至终相同或类似的标号表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施例是示例性的，仅用于解释本发明，而不能解释为对本发明的限制。本发明实施例中的左、中、右、上、下等方位用语，仅是互为相对概念或是以产品的正常使用状态为参考的，而不应该认为是具有限制性的。一种猪小里脊分离方法，包括以下步骤：步骤1：通过待切割区域的特征生成切割线，具体为：步骤1.1：通过深度相机采集包含有小里脊的猪肉图像；步骤1.2：采用高斯滤波抑制猪肉图像的噪声：为猪肉内任一点的坐标；/＞为猪肉内中心点的坐标，坐标点在图像处理中可认为是整数；/＞是标准差；步骤1.3：作原始图像的概率灰度的概率直方图，然后设输入像素灰度值为，累计分布函数为： 其中为图像中灰度值为/＞的像素频数，/＞为图像像素总数；设输出图像灰度值为/＞，像素范围为/＞，期望输出均匀分布直方图，即： 用累计分布函数作变换，求变换后的新灰度，即令，得：用求出的新灰度取代旧灰度，求出；步骤1.4：通过差分计算小里脊的图像梯度，获得小里脊区域最佳灰度阈值，剔除其余猪肉部位轮廓，生成精细分割线：式中，为灰度图像在点/＞处的水平方向梯度值；/＞为竖直方向梯度值；/＞为显著性边缘占图像像素点的比例；/＞为猪肉图片像素个数；/＞为最佳自适应阈值；为最大梯度值；/＞为最小梯度值；得到最佳自适应阈值/＞后，剔除猪肉图像中其余像素点，仅保留与最佳自适应阈值匹配的像素点，并使该像素点形成切割线；步骤2：根据切割线中刀具运动速度信息获得切割刀具的动作序列；步骤3：通过元学习网络训练更新动作序列，并获得最优动作序列，具体为：步骤3.1：将刀具运动速度信息记为/＞，其中，/＞为特征个数；步骤3.2：在执行肉品分割时，作为环境/＞下所需执行的切割动作，设置执行动作的奖励值/＞，切割开始时，系统随机选择一个动作指令/＞，/＞表示该时刻刀具方向及速度高低组成的向量，将/＞输入输入层，经过网络前向传播后系统会获得一个奖励/＞，奖励/＞表示对样本的拟合程度；将执行每次任务对应的动作序列输入元学习网络，通过元学习对模型参数/＞进行更新，同时更新调整动作序列/＞，损失函数为： 式中，为该次动作序列，/＞为/＞时刻刀具的运动速度信息，/＞为序列的奖励值，对/＞和/＞更新得：式中，为动作序列，/＞为模型参数，通过训练得出最优的动作序列/＞和参数/＞；步骤4：通过最优动作序列优化切割线，并得到最优切割线；步骤5：由于受肉品肌肉纤维分布不均的影响，机器人在对肉品切割时所需的切割力也不尽相同，给定的切割力过大或过小都会影响分割切割质量；针对上述问题，当刀具沿最优切割线进行切割时，通过六维力觉传感器获取刀具的切割力；同时，通过视觉相机获取实时切割路径；根据切割力和实时切割路径，控制刀具做到切割力随实时切割路径调控，进而完成对待切割区域的切割；具体为：步骤5.1：将最优动作序列作为输入，设定序列/＞下一轮次动作/＞的最优值为；设/＞为折扣系数，选择动作/＞最大化/＞的期望值可表示为： 训练时采用损失函数，每次迭代/＞进行如下更新： 第次训练的特征输出函数为：式中，表示对识别目标进行强化学习提取的新特征；/＞是序列/＞和动作序列/＞的概率密度分布；/＞为期望；步骤5.2：对切割力与实时切割路径设定网络惩罚系数，从而实现对行动网络序列参数的更新，得到任务最优执行控制，最优执行控制/＞为：/＞。其中，所述刀具运动速度信息为：其中，表示肉品断裂韧性，/＞为刀具和猪肉之间的摩擦力，/＞，/＞为刀具厚度，/＞为摩擦系数，/＞为弹性模量；切割肉类所需的作用力为，且作用力/＞可用合力表示为/＞，结合上述公式可得：式中，表示在x轴上的作用力；/＞表示在z轴上的作用力；在机械臂控制刀具切割过程中，六维力觉传感器获取切割肉类时作用力，同时保持固定的切削角度，根据切削力的反馈调整切削力度或修正切削路径；刀具位移与切割力度关系为：式中，表示在x轴上的作用力；/＞表示在z轴上的作用力；/＞表示肉品断裂韧性；和/＞表示在x轴和z轴上的位移；/＞表示为刀具实际的位移方向；/＞表示为刀具的宽度。如图2所示，六维力觉传感器200固定连接在刀具300和机械臂100之间，深度相机4固定连接在机械臂100上并随刀具300同步移动；结合图3所示，在刀具300通过伸缩组件后和六维力觉传感器200连接，伸缩组件包括竖向的伸缩杆1，伸缩杆1的缸体固定连接在六维力觉传感器200上，伸缩杆1的伸缩端依次经第一连杆31和第二连杆32后与刀具300固定连接，第一连杆31的一端与伸缩杆1铰接，第一连杆31的另一端与第二连杆32的一端固定连接且两者组成开口向上的V字形结构，第二连杆32的另一端与刀具300的顶部固定连接，刀具300的下部为刀刃端；在缸体上固定连接横向的滑杆21，在滑杆21上滑动设置有滑座2，在第一连杆31和第二连杆32之间的节点和滑座2上下对应，在节点和滑座2之间设置有竖向的第三连杆33，第三连杆33的下端铰接在节点上，第三连杆33的上端固定连接在滑座2上，第一连杆31在伸缩杆和第三连杆33之间摆动时带动第三连杆33在滑座2上滑动；在伸缩杆1的下端固设有夹爪5，当伸缩杆1向上收缩后使第二连杆32带动刀具300向下下降，并使刀具300低于夹爪5且用于切割猪肉；当伸缩杆1向下伸出后使第二连杆32带动刀具300向上升起，并使刀具300高于夹爪5，进而使刀具300可以抓取切割后的小里脊。本发明是基于图像处理、实时力反馈和元强化学习相融合的小里脊自主精准分离，在已知的肉品中，利用深度相机采集图像，对图像进行预处理，然后利用差分计算图像梯度，确定猪小里脊所在区域的最佳图像阈值，剔除其余背景，利用Canny边缘检测算法得到分割路径的边缘图像，生成精细分割线，确定抬刀点、收刀点和切割角度，进行作业路径规划，控制机械臂执行装置开始切割；搭建切割模型，将元学习引入到六维力反馈调整模型，切割过程中通过刀具携带的力传感器返回数据，并结合力位混合控制原理，实现对切割路径进行修正，控制切割的深度；分割线生成过程中，对深度相机采集到的图像进行高斯滤波处理，高斯滤波属于低通滤波，可有效保留图像的边缘信息，削弱图像中的高频分量，最大限度地抑制图像噪声与突变；对图像进行直方图均衡化，扩大像素取值范围，使图像更加清晰；利用差分对图像计算梯度图像，根据最大梯度和最小梯度值，调整最佳阈值，对超出阈值的测量信息进行剔除；利用Canny算法生成精细分割线；构建屈服应力、肉品密度、肉品形变的随机特征矩阵，分析刀具运行速度与刀具所受阻力的关系；对分割任务序列进行强化训练，获取最优动作序列；采用随机梯度下降法对强化学习动作序列参数变化情况进行训练，提高算法的泛化能力，对切割位置进行实时调整；根据力反馈信息，对刀具切割轨迹进行修正。以上显示和描述了本发明的基本原理、主要特征和优点。本行业的技术人员应该了解，本发明不受上述实施例的限制，上述实施例和说明书中描述的只是说明本发明的原理，在不脱离本发明精神和范围的前提下，本发明还会有各种变化和改进，这些变化和改进都落入要求保护的本发明范围内。本发明要求保护范围由所附的权利要求书及其等效物界定。
