标题title
一种可设定输出的电子烟芯片电路
摘要abst
本发明涉及一种可设定输出的电子烟芯片电路，它包括电子烟芯片，电子烟芯片的VCC端和VDD端之间连接有第一开关按键，SEN端和VDD端之间连接有第二开关按键，通过第一开关按键和第二开关按键调节产生的脉冲信号和产生连续变化的电压信号，芯片通过对按键动作转换为电信号进行检测和判断，根据信号的高低及个数设定不同的工作状态，实现设定输出功能的调节；VCC端连接有充电接口，用于当VCC电压高于设定阈值时，经过芯片内部电路检测判断实现对电池的充电。本发明采用引脚复用技术，在不增加芯片引脚的情况下，在封装完成之后实现对电子烟芯片输出的设定，包括输出电压，输出功率，气流阈值频率，输出时间等方面的选择及档位设定。
权利要求书clms
1.一种可设定输出的电子烟芯片电路，其特征在于：它包括电子烟芯片，电子烟芯片上设置有VCC端、VDD端、SEN端、AT端、LED端和GND端；所述VCC端和VDD端之间连接有第一开关按键，所述SEN端和VDD端之间连接有第二开关按键，通过第一开关按键和第二开关按键调节产生的脉冲信号和产生连续变化的电压信号，芯片通过对按键动作转换为电信号进行检测和判断，根据信号的高低及个数设定不同的工作状态，实现设定输出功能的调节；所述VCC端连接有充电接口，用于当VCC电压高于设定阈值时，经过芯片内部电路检测判断实现对电池的充电，当VCC电压低于VDD电压时，将第一开关按键信息作为芯片的输入信号。2.根据权利要求1所述的一种可设定输出的电子烟芯片电路，其特征在于：所述VDD端和GND端之间连接有电池和电容，用于减小吸烟过程中电池电压的波动；所述LED端和GND端之间连接有发光二极管，通过LED的发光状态来显示吸烟的状态信息；所述AT端和GND端之间连接有发热丝，用于通过电能转变为热能将电子烟液气化；所述SEN端和GND端之间连接有气流传感器，用于将吸烟动作转变为物理电参数的变化并通过SEN端输入到芯片中。3.根据权利要求1所述的一种可设定输出的电子烟芯片电路，其特征在于：所述电子烟芯片包括按键检测及逻辑判断电路、插拔检测电路、电容检测电路、驱动电路、MOS开关电路和核心逻辑电路；所述按键检测及逻辑判断电路与电子烟芯片的VCC端和SEN端连接，输出端连接所述核心逻辑电路，用于对VCC端和SEN端的状态进行判断，并将逻辑状态输出到核心逻辑电路；所述插拔检测电路与电子烟芯片的VCC端、VDD端和AT端连接，输出端连接所述核心逻辑电路，用于判断VCC端、VDD端和AT端的插拔状态，并将逻辑状态输出到核心逻辑电路；所述电容检测电路与电子烟芯片的SEN端连接，输出端与所述核心逻辑电路连接，用于将气流传感器电特性变化转变为频率变化后，将频率变化与阈值频率进行比较，从而判断是否为吸烟状态，并输出到核心逻辑电路；所述核心逻辑电路将各个单元电路输入的信号进行综合判断后输出控制信号到驱动电路的输入端，驱动电路的输出端与所述MOS开关电路连接，用于将核心逻辑电路输出信号进行转换并增强驱动后输出控制MOS开关电路，MOS开关电路的输出端与AT端连接。4.根据权利要求3所述的一种可设定输出的电子烟芯片电路，其特征在于：所述电子烟芯片还包括锂电池充电条件判断电路及充电电路、电源电压检测电路、偏置及上电启动电路、带隙基准及分压电路和LED逻辑电路及驱动电路；所述锂电池充电条件判断电路及充电电路与所述VCC端和核心逻辑电路连接，用于检测判断当VCC电压高于设定阈值时，实现对电池的充电；所述电源电压检测电路与所述核心逻辑电路连接，实现对VDD端的电压进行检测并量化后将结果输出到核心逻辑电路；所述振荡器与核心逻辑电路连接；所述偏置及上电启动电路和带隙基准及分压电路为整体芯片提供偏置电流、上电使能信号和参考电压；所述LED逻辑电路及驱动电路与LED端连接，实现对LED灯的开闭以及亮度状态进行控制。5.根据权利要求3所述的一种可设定输出的电子烟芯片电路，其特征在于：所述键检测及逻辑判断电路包括模拟数字转换器、计数器、逻辑处理单元和计数器及频率比较器；所述VCC端与所述模拟数字转换器和计数器的输入端连接，模拟数字转换器和计数器的输出端与所述逻辑处理单元连接，逻辑处理单元输出反馈信号EN1到所述模拟数字转换器和计数器，VCC端的电压信号经过模拟数字转换器采集，如果VCC电压大于VDD电压，则工作在充电模式，按键功能不工作；所述SEN端与计数器及频率比较器的输入端连接，计数器及频率比较器的输出端与逻辑处理单元的输入端连接，逻辑处理单元输出反馈信号EN2到计数器及频率比较器；所述逻辑处理单元的输出端与所述核心逻辑电路的输入端连接，在长按SEN端时，通过频率比较，以及高电平持续个数来判断是否进入设定状态。
说明书desc
技术领域本发明涉及电子烟技术领域，一种可设定输出的电子烟芯片电路。背景技术目前存在的具有设定输出功能的电子烟大多数都是采用MCU控制方案来实现的，虽然MCU控制方案能够设定功能供客户选择，但是其集成度低、使用外围器件多，在成本上也没有优势；而且其功能在出厂时就设定好了，无法给客户提供更多的设定和选择，使得客户在使用时的体验感降低不少；此外，目前存在的可设定的电子烟芯片，都增加了额外的芯片引脚，这改变了芯片封装的同时也增加了面积；因此，如何设计一种在封装完成后对电子烟芯片的输出进行设定的电子烟芯片电路，是现阶段需要考虑的问题。发明内容本发明的目的在于克服现有技术的缺点，提供了一种可设定输出的电子烟芯片电路，解决了现有电子烟芯片存在的问题。本发明的目的通过以下技术方案来实现：一种可设定输出的电子烟芯片电路，它包括电子烟芯片，电子烟芯片上设置有VCC端、VDD端、SEN端、AT端、LED端和GND端；所述VCC端和VDD端之间连接有第一开关按键，所述SEN端和VDD端之间连接有第二开关按键，通过第一开关按键和第二开关按键调节产生的脉冲信号和产生连续变化的电压信号，芯片通过对按键动作转换为电信号进行检测和判断，根据信号的高低及个数设定不同的工作状态，实现设定输出功能的调节；所述VCC端连接有充电接口，用于当VCC电压高于设定阈值时，经过芯片内部电路检测判断实现对电池的充电，当VCC电压低于VDD电压时，将第一开关按键信息作为芯片的输入信号。所述VDD端和GND端之间连接有电池和电容，用于减小吸烟过程中电池电压的波动；所述LED端和GND端之间连接有发光二极管，通过LED的发光状态来显示吸烟的状态信息；所述AT端和GND端之间连接有发热丝，用于通过电能转变为热能将电子烟液气化；所述SEN端和GND端之间连接有气流传感器，用于将吸烟动作转变为物理电参数的变化并通过SEN端输入到芯片中。所述电子烟芯片包括按键检测及逻辑判断电路、插拔检测电路、电容检测电路、驱动电路、MOS开关电路和核心逻辑电路；所述按键检测及逻辑判断电路与电子烟芯片的VCC端和SEN端连接，输出端连接所述核心逻辑电路，用于对VCC端和SEN端的状态进行判断，并将逻辑状态输出到核心逻辑电路；所述插拔检测电路与电子烟芯片的VCC端、VDD端和AT端连接，输出端连接所述核心逻辑电路，用于判断VCC端、VDD端和AT端的插拔状态，并将逻辑状态输出到核心逻辑电路；所述电容检测电路与电子烟芯片的SEN端连接，输出端与所述核心逻辑电路连接，用于将气流传感器电特性变化转变为频率变化后，将频率变化与阈值频率进行比较，从而判断是否为吸烟状态，并输出到核心逻辑电路；所述核心逻辑电路将各个单元电路输入的信号进行综合判断后输出控制信号到驱动电路的输入端，驱动电路的输出端与所述MOS开关电路连接，用于将核心逻辑电路输出信号进行转换并增强驱动后输出控制MOS开关电路，MOS开关电路的输出端与AT端连接。所述电子烟芯片还包括锂电池充电条件判断电路及充电电路、电源电压检测电路、偏置及上电启动电路、带隙基准及分压电路和LED逻辑电路及驱动电路；所述锂电池充电条件判断电路及充电电路与所述VCC端和核心逻辑电路连接，用于检测判断当VCC电压高于设定阈值时，实现对电池的充电；所述电源电压检测电路与所述核心逻辑电路连接，实现对VDD端的电压进行检测并量化后将结果输出到核心逻辑电路；所述振荡器与核心逻辑电路连接；所述偏置及上电启动电路和带隙基准及分压电路为整体芯片提供偏置电流、上电使能信号和参考电压；所述LED逻辑电路及驱动电路与LED端连接，实现对LED灯的开闭以及亮度状态进行控制。所述键检测及逻辑判断电路包括模拟数字转换器、计数器、逻辑处理单元和计数器及频率比较器；所述VCC端与所述模拟数字转换器和计数器的输入端连接，模拟数字转换器和计数器的输出端与所述逻辑处理单元连接，逻辑处理单元输出反馈信号EN1到所述模拟数字转换器和计数器，VCC端的电压信号经过模拟数字转换器采集，如果VCC电压大于VDD电压，则工作在充电模式，按键功能不工作；所述SEN端与计数器及频率比较器的输入端连接，计数器及频率比较器的输出端与逻辑处理单元的输入端连接，逻辑处理单元输出反馈信号EN2到计数器及频率比较器；所述逻辑处理单元的输出端与所述核心逻辑电路的输入端连接，在长按SEN端时，通过频率比较，以及高电平持续个数来判断是否进入设定状态。本发明具有以下优点：一种可设定输出的电子烟芯片电路，采用引脚复用技术，在不增加芯片引脚的情况下，在封装完成之后实现对电子烟芯片输出的设定，包括输出电压，输出功率，气流阈值频率，输出时间等方面的选择及档位设定。附图说明图1为本发明的电路结构示意图；图2为电子烟芯片的内部电路结构示意图；图3为按键检测及判断逻辑电路的内部电路结构示意图；图中：100-电子烟芯片，101-按键检测及逻辑判断电路，102-锂电池充电条件判断电路及充电电路，103-插拔检测电路，104-电源电压检测电路，105-电容检测电路，106-振荡器，107-偏置及上电启动电路，108-带隙基准及分压电路，109-核心逻辑电路，110-驱动电路，111-MOS开关电路，112-保护电路，113-LED逻辑电路及驱动电路，114-测试辅助及修调电路，201-充电接口，202-气流传感器，203-第一开关按键，204-第二开关按键，205-发光二极管，206-发热丝，207-电池，208-电容，301-模拟数字转换器，302-计数器，303-计数器及频率比较器，304逻辑处理单元。具体实施方式为使本申请实施例的目的、技术方案和优点更加清楚，下面将结合本申请实施例中附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本申请实施例的组件可以以各种不同的配置来布置和设计。因此，以下结合附图中提供的本申请的实施例的详细描述并非旨在限制要求保护的本申请的保护范围，而是仅仅表示本申请的选定实施例。基于本申请的实施例，本领域技术人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都属于本申请保护的范围。下面结合附图对本发明做进一步的描述。如图1和所示，本发明具体涉及一种可设定输出的电子烟芯片电路，其包括电子烟芯片100，第一开关按键203，第二开关按键204，气流传感器202，发光二极管205,发热丝206，电池207，电容208，充电接口201；充电接口与电子烟芯片100的VCC端相连接，第一开关按键203的一端与电子烟芯片100的VCC相连接，另一端与电子烟芯片100的VDD端相连接。第二开关按键204的一端与电子烟芯片100的SEN相连接，另一端与电子烟芯片的VDD端相连接。气流传感器202与电子烟芯片100的SEN端和GND端相连接。发光二极管205与电子烟芯片100的LED端和GND端相连接。发热丝206与电子烟芯片的AT端和GND端相连接。电池207与电子烟芯片100的VDD端和GND端相连接。电容208与电子烟芯片100的VDD端和GND端相连接。其中，SEN端为电子烟芯片的传感器信号输入端口、AT端为电子烟芯片的电压电流输出端口、VCC端为电子芯片充电输入端口、VDD端为电子烟芯片供电端口以及锂电池正端连接端口。气流传感器202将吸烟动作转变为物理电参数的变化，与电子烟芯片100的SEN端连接；发光二极管205以各种闪亮形式来表达吸烟行为，以及传递电子烟系统参数的状态信息。发光二极管205的一端与电子烟芯片100的LED端连接，另一端与GND端连接；电池207为电子烟系统提供能量，也可以通过充电存储能量。电池正极与电子烟芯片100的VDD连接，负极与电子烟芯片100的GND端连接发热丝206实现将电能转变成热能，瞬间产生的高温将电子烟液气化。发热丝206的一端与电子烟芯片100的AT端连接，另一端与GND端连接。电容208与电池207并联，其主要作用在于减小吸烟过程中电池电压的波动。电子烟芯片100的VCC端可与充电器连接，当VCC电压高于某一设定阈值电压时，经过电子烟芯片100内部电路检测并判定，可实现对电池的充电功能。当VCC低于VDD电压时，与VCC端连接的按键203的按键信息将作为电子烟芯片100的输入信号。通过对该按键动作转换为的电信号进行检测后和判定，电子烟芯片100将根据信号的高低及个数而设定不同的工作状态。从而实现了设定输出功能。进一步地，第一开关按键203亦可以使具有滑变电阻功能的按键。调节第一开关按键203不但可以产生脉冲电信号，也可以产生连续变化的电压信号。第二开关按键204具有与第一开关按键203相同的功能，第二开关按键204的一端与电子烟芯片100的SEN端连接，另一端与电子烟芯片100的VDD端连接。第一开关按键203与第二开关按键204可以配合使用，实现丰富的状态设定。如图2所示，电子烟芯片100包括按键检测及逻辑判断电路101，锂电池充电条件判断电路及充电电路102，插拔检测电路103，电源电压检测电路104，电容检测电路105，振荡器106，偏置及上电启动电路107，带隙基准及分压电路108，核心逻辑电路109，驱动电路110，MOS开关电路111，保护电路112，LED逻辑电路及驱动电路113，测试辅助及修调电路114等模块构成。进一步地，充电时，芯片VCC端外接充电电路，其电压大于锂电池电压，判断此时为充电状态，VCC端工作在充电模式下，101模块关闭。当未充电时，VCC端电压低于锂电池电压，此时充电电路关闭，开启按键检测及逻辑判断电路101。插拔检测电路103实现对芯片输出端，电源电压端VDD，充电端VCC连接状况的检测，得到输出状态控制字到核心逻辑电路109；保护电路112包括过流保护，过温保护，短路保护方面，在超过设定阈值时，输出报警信号到核心逻辑电路109；按键检测及逻辑判断电路101实现对芯片VCC端和SEN端的状态判定功能，并将逻辑状态输出到核心逻辑电路109；插拔检测电路103实现芯片VCC端，VDD端以及AT端的插拔状态的判定功能，并将逻辑状态输出到核心逻辑电路109；电容检测电路105将气流传感器电特性变化转变成频率的变化，将频率变化与阈值频率做比较，从而判定是否进行吸烟，并将逻辑状态输出到核心逻辑电路109；偏置及上电启动电路107，带隙基准及分压电路108为芯片全局提供偏置电流，上电使能信号，参考电压。电源电压检测电路104实现对电压VDD的检测并量化，将结果输出到核心逻辑电路；驱动电路110负责将核心逻辑电路输出信号转换电平并增强驱动，输出使能性能好控制MOS开关电路111，MOS开关电路通过AT短输出。LED逻辑电路及驱动电路113实现对LED灯的开启与关闭以及亮度，节奏的控制，通过LED端输出。测试辅助及修调电路114实现对芯片的测试和修调功能。核心逻辑电路109负责整个芯片的逻辑处理，将各个单元输入的信号进行综合判断得出控制信号输出驱动电路110，LED逻辑电路及驱动电路113.并反馈使能控制信号到其他模块。如图3所示，键检测及逻辑判断电路包括模拟数字转换器、计数器、逻辑处理单元和计数器及频率比较器；所述VCC端与所述模拟数字转换器和计数器的输入端连接，模拟数字转换器和计数器的输出端与所述逻辑处理单元连接，逻辑处理单元输出反馈信号EN1到所述模拟数字转换器和计数器；所述SEN端与计数器及频率比较器的输入端连接，计数器及频率比较器的输出端与逻辑处理单元的输入端连接，逻辑处理单元输出反馈信号EN2到计数器及频率比较器；所述逻辑处理单元的输出端与所述核心逻辑电路的输入端连接。电子烟芯片100的VCC端的电压信号经过模拟数字转换器采集，如果VCC电压大于VDD电压，则工作在充电模式，按键功能不工作。如果VCC低于VDD，按键功能工作。VCC电压的被分为若干档位，由模拟数字转电路301的位数决定。VCC也可通过按键动作的操作输出脉冲波形，计数器302通过计算脉冲波形的个数实现对设定模式的检测功能。SEN端连接到计数器及频率比较器303，吸烟模式下SEN端电压工作在小信号状态，电压值低于内部比较器阈值电压。在长按SEN端时，通过频率比较，以及高电平持续个数来判断是否进入设定状态。VCC端按键控制的状态与SEN端按键的控制，相结合可实现丰富的控制模式。进一步地，例如，长按第二开关按键204，进入设定模式，通过VCC按键的脉冲波个数可进入预热设定模式，输出电压设定模式，延迟时间设定模式等，接着通过调整VCC电压来设定档位输出。具体地：当VCC低于VDD电压时，与VCC端连接的按键203的按键信息将作为电子烟芯片100的输入信号。通过对该按键动作转换为的电信号进行检测后和判定，电子烟芯片100将根据信号的高低及个数而设定不同的工作状态。从而实现了设定输出功能。进一步地，第一开关按键203亦可以使具有滑变电阻功能的按键。调节第一开关按键203不但可以产生脉冲电信号，也可以产生连续变化的电压信号。第二开关按键204具有与第一开关按键203相同的功能，第二开关按键204的一端与电子烟芯片100的SEN端连接，另一端与电子烟芯片100的VDD端连接。第一开关按键203与第二开关按键204可以配合使用，实现丰富的状态设定。例如：长按第二开关按键204实现进入设定状态，按1下第二开关按键203，进入输出电压设定状态；按2下第一开关按键，进入输出功率设定状态；按3下第一开关按键203，进入阈值频率设定状态；按4下第一开关按键203，进入输出时间设定状态。进入设定状态后101模块采集VCC电压，输出档位对应的控制信号，通过长按第一开关按键203进入设定结束。此时设定类型及输出档位控制信号将被输出到核心逻辑109并进行处理，从而实现对芯片输出电压，功率，气流阈值频率，输出时间的设定。本发明的工作原理是：在上电后，未进行吸烟操作时，芯片先对VCC电压与VDD电压进行检测，如果VCC电压低于VDD电压，芯片则工作在可进行设定状态。长按第二开关按键204，进入输出类型选择状态。此时通过检测第一按键开关203的按键次数选择需设定的输出类型。拨动VCC电压设定档位，以长按第一按键开关203表示设定输出操作结束，同时，设定类型及设定输出档位信息被传输到芯片核心逻辑电路中，在下次吸烟时，输出将按照该设定进行。以上所述仅是本发明的优选实施方式，应当理解本发明并非局限于本文所披露的形式，不应看作是对其他实施例的排除，而可用于各种其他组合、修改和环境，并能够在本文所述构想范围内，通过上述教导或相关领域的技术或知识进行改动。而本领域人员所进行的改动和变化不脱离本发明的精神和范围，则都应在本发明所附权利要求的保护范围内。
