标题title
一种猪只盘点系统及其方法
摘要abst
本发明涉及畜牧养殖设备技术领域，公开了一种猪只盘点系统及其方法，本发明一个方面，提供了一种猪只盘点系统，包括用于猪只行走的转猪通道和设置在所述转猪通道上的固定支架，固定支架上方设有用于检测在转猪通道中的猪只，并获取盘点数据的检测装置，检测装置为毫米波雷达；转猪通道的末端设有用于供猪只通过的单向门，还包括用于接收检测装置发送的盘点数据的服务器平台，服务器平台用于根据盘点数据计算并显示猪只数量；因此，本发明不仅可以解决人工对猪只盘点时，工作量大、准确度低的问题，而且解决了现有技术中采用图形识别技术的技术难度大，结构复杂、价格昂贵的问题。毫米波雷达传感器可以提高猪只数量盘点的精度和时效，成本低。
权利要求书clms
1.一种猪只盘点系统，其特征在于，包括用于猪只行走的转猪通道和设置在所述转猪通道上的固定支架，所述固定支架上方设有用于检测在所述转猪通道中的猪只，并获取猪只数量的盘点数据的检测装置，所述检测装置为毫米波雷达；所述转猪通道的末端设有用于供猪只通过的单向门，还包括用于接收所述检测装置发送的猪只数量的盘点数据的服务器平台，所述服务器平台用于根据所述盘点数据计算并显示猪只数量。2.根据权利要求1所述的一种猪只盘点系统，其特征在于，所述毫米波雷达平行于转猪通道的斜坡。3.根据权利要求1所述的一种猪只盘点系统，其特征在于，所述固定支架包括横管和与横管连接的竖管，所述竖管的高度可调，以保证所述横管的高度可调。4.根据权利要求1所述的一种猪只盘点系统，其特征在于，所述服务器平台包括用于从所述检测装置处接收所述盘点数据的控制器和用于从所述控制器处获取所述盘点数据并进行显示的显示屏；或者所述服务器平台包括用于从所述检测装置处接收所述盘点数据的控制器、用于接收控制器发送的盘点数据的服务器和用于接收服务器发送的盘点数据且进行显示的手机端或电脑端。5.一种基于上述权利要求1-4任一项所述的猪只盘点系统的猪只盘点系统的应用方法，其特征在于，操作步骤如下：S1：启动系统，调整毫米波雷达的高度和方向，获取所述毫米波雷达测量猪只的运动参数，并获得猪只在所述转猪通道上行进的运动轨迹；S2：数据处理，对所述猪只的运动参数进行过滤，根据所述运动参数判断猪只是否为正常顺着所述转猪通道行走；如果不是正常行进的猪只则返回S1步骤，继续获取猪只的运动参数；若猪只为正常行进的猪只，则计入猪只数据；S3：猪只数量盘点，根据上述S2的猪只数据获取猪只数量，通过控制器对猪只数量自动上报，输出到显示屏、手机端或电脑端，供工作人员进行查看。6.根据权利要求5所述的一种猪只盘点系统的应用方法，其特征在于，在S2中，所述控制器根据所述猪只的运动参数进行计算，并以获取猪只行走轨迹，根据所述猪只行走轨迹计算猪只的左右偏移差距a，并将所述猪只的左右偏移差距a与设定的左右偏移差距A进行比对，以判断所述猪只行走轨迹是否为顺直，同时根据所述猪只行走轨迹计算猪只行走距离s，将所述猪只行走距离s与设定的距离阈值L进行比对，以判断所述猪只行走轨迹是否为正常行走轨迹，如果猪只行走轨迹顺直且为正常行走轨迹，则判断猪只为正常行进的猪只，计入猪只数据，反之，则返回S1步骤，继续获取猪只的运动参数。7.根据权利要求6所述的一种猪只盘点系统的应用方法，其特征在于，如果猪只行走轨迹的左右偏移差距a≤左右偏移阈值A且猪只行走距离s＞距离阈值L时，则判定猪只为正常行进的猪只，计入猪只数据；如果猪只行走轨迹的左右偏移差距a＞左右偏移阈值A或者猪只行走距离s≤距离阈值L时，则判定猪只不是正常行进的猪只，不计入猪只数据，返回S1步骤，继续获取猪只的运动参数。8.根据权利要求6所述的一种猪只盘点系统的应用方法，其特征在于，所述猪只行走距离s为猪只进入所述毫米波雷达测量范围内起点到转猪通道的单向门的距离，左右偏移差距a为所述毫米波雷达所能扫描的范围内，以所述转猪通道的中心线为一个基线所计算出的猪只的左右偏差距离。9.根据权利要求6所述的一种猪只盘点系统的应用方法，其特征在于，所述应用方法还包括将猪只行进轨迹发送至服务器。
说明书desc
技术领域本发明属于畜牧养殖设备技术领域，尤其是涉及一种猪只盘点系统及其方法。背景技术猪只从猪圈被赶出来，在地磅上称重后，通过转猪通道进入转猪车辆。猪只进入转猪车辆之前，需要在转猪通道阶段对猪的数量进行测量，即猪只盘点。由于猪只流动方向及速度的不确定性，短时间内数量大，需要大量的人工盘查，不仅工作量大、操作麻烦、效率低下，有些在人工进行盘点计数时，其测量误差大，导致在猪只流转时，数量与预期不符，造成一定的经济损失。当前市场上对猪只数量的测量方法主要是通过RFID、摄像头、及人工测量，其中在专利号201922216164.9，专利名称一种猪只盘点装置中采用的是RFID识别技术，但是受距离的影响，在大量的涌入后，其测试准确度不能保证，并且将RFID胶囊置于猪只体内，对猪只健康有一定的影响；在专利号202010116562.8，专利名称一种基于计算机视觉识别的生猪监管方法及系统中是基于计算机视觉识别的生猪监管方法及系统，主要通过对图像的采集处理，摄像头通过摄像头实时的采集猪只图像，并通过大数据算法对实时采集的图像进行处理，来测量猪只的数量，但是摄像头设备价格昂贵，结构复杂而且不易更换维修，易受风沙、雾霾、雨天、夜晚等环境干扰。发明内容为了克服现有技术的上述缺点，本发明提供了一种猪只盘点系统及其方法，不仅可以解决人工对猪只盘点时，工作量大、准确度低的问题，而且解决了现有技术中采用图形识别技术的技术难度大，结构复杂、价格昂贵的问题。为达到上述目的，本发明的一个方面提出了一种猪只盘点系统，包括用于猪只行走的转猪通道和设置在所述转猪通道上的固定支架，所述固定支架上方设有用于检测在所述转猪通道中的猪只，并获取猪只数量的盘点数据的检测装置，所述检测装置为毫米波雷达；所述转猪通道的末端设有用于供猪只通过的单向门，还包括用于接收所述检测装置发送的猪只数量的盘点数据的服务器平台，所述服务器平台用于根据所述盘点数据计算并显示猪只数量。进一步地，所述毫米波雷达平行于转猪通道的斜坡。进一步地，所述固定支架包括横管和与横管连接的竖管，所述竖管的高度可调，以保证所述横管的高度可调。进一步地，所述服务器平台包括用于从所述检测装置处接收所述盘点数据的控制器和用于从所述控制器处获取所述盘点数据并进行显示的显示屏；或者所述服务器平台包括用于从所述检测装置处接收所述盘点数据的控制器、用于接收控制器发送的盘点数据的服务器和用于接收服务器发送的盘点数据且进行显示的手机端或电脑端。本发明的另一个方面，提出了一种基于上述的猪只盘点系统的猪只盘点系统的应用方法，操作步骤如下：S1：启动系统，调整毫米波雷达的高度和方向，获取所述毫米波雷达测量猪只的运动参数，并获得猪只在所述转猪通道上行进的运动轨迹；S2：数据处理，对所述猪只的运动参数进行过滤，根据所述运动参数判断猪只是否为正常顺着所述转猪通道行走；如果不是正常行进的猪只则返回S1步骤，继续获取猪只的运动参数；若猪只为正常行进的猪只，则计入猪只数据；S3：猪只数量盘点，根据上述S2的猪只数据获取猪只数量，通过控制器对猪只数量自动上报，输出到显示屏、手机端或电脑端，供工作人员进行查看。进一步地，在S2中，所述控制器根据所述猪只的运动参数进行计算，并以获取猪只行走轨迹，根据所述猪只行走轨迹计算猪只的左右偏移差距a，并将所述猪只的左右偏移差距a与设定的左右偏移差距A进行比对，以判断所述猪只行走轨迹是否为顺直，同时根据所述猪只行走轨迹计算猪只行走距离s，将所述猪只行走距离s与设定的距离阈值L进行比对，以判断所述猪只行走轨迹是否为正常行走轨迹，如果猪只行走轨迹顺直且为正常行走轨迹，则判断猪只为正常行进的猪只，计入猪只数据，反之，则返回S1步骤，继续获取猪只的运动参数。进一步地，如果猪只行走轨迹的左右偏移差距a≤左右偏移阈值A且猪只行走距离s＞距离阈值L时，则判定猪只为正常行进的猪只，计入猪只数据；如果猪只行走轨迹的左右偏移差距a＞左右偏移阈值A或者猪只行走距离s≤距离阈值L时，则判定猪只不是正常行进的猪只，不计入猪只数据，返回S1步骤，继续获取猪只的运动参数。进一步地，所述猪只行走距离s为猪只进入所述毫米波雷达测量范围内起点到转猪通道的单向门的距离，左右偏移差距a为所述毫米波雷达所能扫描的范围内，以所述转猪通道的中心线为一个基线所计算出的猪只的左右偏差距离。进一步地，所述应用方法还包括将猪只行进轨迹发送至服务器。与现有技术相比，本发明的有益效果为：本发明公开的一种猪只盘点系统及其方法，一个方面提出的一种猪只盘点系统，包括用于猪只行走的转猪通道和设置在所述转猪通道上的固定支架，所述固定支架上方设有用于检测在所述转猪通道中的猪只，并获取猪只数量的盘点数据的检测装置，所述检测装置为毫米波雷达；所述转猪通道的末端设有用于供猪只通过的单向门，还包括用于接收所述检测装置发送的盘点数据的服务器平台，所述服务器平台用于根据所述盘点数据计算并显示猪只数量；使用时，猪只被驱赶着沿着转猪通道行进，通过单向门后猪只就不能返回转猪通道，猪只在转猪通道行进过程的猪只数量等数据被检测装置获取，检测装置再将猪只数量等数据发送给服务器平台，服务器平台计算并显示猪只数量等数据信息，这样就实现了猪只的数量盘点，另一个方面，本发明提出了一种猪只盘点系统使用方法；因此，本发明不仅可以解决人工对猪只盘点时，工作量大、准确度低的问题，而且解决了现有技术中采用图形识别技术的技术难度大，结构复杂、价格昂贵的问题。另外，毫米波雷达传感器分辨率高，不易受昏暗、雨雪、风沙、雾气等环境干扰的特点，在猪只数量盘点时精度高，时效快，操作简单，工人劳动量小，而且成本低，其还能适应规模化转猪数量盘点时的要求。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明实施例的一种猪只盘点系统的结构示意图；图2为本发明实施例的一种猪只盘点系统的应用方法的工作流程图。1、转猪通道；2、固定支架；3、检测装置；4、单向门；5、挡猪板；6、单向门框。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。本发明中涉及的名词解释：猪只的运动参数：运动参数主要为运动中的相对距离、相对速度、角度、及方位信息；猪只的轨迹正常：①轨迹正常为猪只沿着转猪通道的斜坡径直走入单向门；②不正常的轨迹为：猪在转猪通道斜坡扭头返回；猪只倒退；猪只先在左边走，然后在右边走，这个判断的标准为猪只行走轨迹的左右偏移差距a，偏移差距小于斜坡通道的宽度；猪只的行走距离：猪只的行走距离为进入转猪通道的斜坡，同时在毫米波雷达的探测范围内，在转猪通道斜坡行走的距离。参照图1-2所示，本发明的一个方面，提供了一种猪只盘点系统，包括用于猪只行走的转猪通道1和设置在转猪通道1上的固定支架2，固定支架2上方设有用于检测在转猪通道1中的猪只，并获取猪只数量的盘点数据的检测装置3，固定支架2内用于走电缆线，用于供电和传输数据，转猪通道1的末端设有用于供猪只通过的单向门4，转猪通道1由挡猪板5围成，单向门4与挡猪板5连接，猪只通过固定支架2后穿过单向门4，单向门4朝转猪通道1流转方向单方向进行打开，从而避免了猪只回头走；还包括用于接收检测装置3发送的猪只数量的盘点数据的服务器平台，服务器平台用于根据盘点数据计算并显示猪只数量。使用时，猪只被驱赶着沿着转猪通道1行进，通过单向门4后猪只就不能返回转猪通道11。单向门4安装在单向门框6上，面向转猪通道1的单向门框6上的一侧设有挡板，猪只通过单向门4后，再往回走时，单向门4就被挡板阻挡而不能打开，也就是实现通过单向门4后的猪只就不能返回转猪通道1；猪只在转猪通道11行进时，猪只数量及行走轨迹等数据被检测装置3获取，检测装置3再将盘点数据等数据发送给服务器平台，服务器平台根据盘点数据计算并显示猪只数量等数据信息，这样就实现了猪只的数量盘点。接上述实施例，更具体的方案是，检测装置为毫米波雷达，毫米波雷达传感器分辨率高，不易受昏暗、雨雪、风沙、雾气等环境干扰的特点，在猪只数量盘点时精度高，时效快，操作简单，工人劳动量小，而且成本低，其还能适应规模化转猪数量盘点时的要求。接上述实施例，更具体的方案是，毫米波雷达平行于转猪通道11的斜坡。因为毫米波雷达的天线是板载天线，最好保证扫描是一个平面，这样测量时更加精准，天线平行于斜坡，相对一个面可以更好精准的采集数据。接上述实施例，更具体的方案是，固定支架2包括横管和与横管连接的竖管，竖管的高度可调，例如可以是伸缩管结构，伸缩管外侧设有螺栓，松开螺栓伸缩管可以展开或收缩，拧紧螺栓实现伸缩管的固定。通过伸缩管的结构，可以保证竖管的高度可调，进而保证横管的高度可调。因为毫米波雷达设置在横管上，根据猪只的大小，可以调节横管的高度，从而避免猪只与固定横管之间碰撞，而破坏毫米波雷达。接上述实施例，更具体的方案是，服务器平台包括用于从检测装置处接收盘点数据的控制器和用于从控制器处获取盘点数据并进行显示的显示屏；或者服务器平台包括用于从检测装置处接收盘点数据的控制器、用于接收控制器发送的盘点数据的服务器和用于接收服务器发送的盘点数据且进行显示的手机端或电脑端。换句话说，毫米波雷达检测的信号发送给控制器，控制器可以自带显示屏，从而计算并显示猪只数量及猪只轨迹，进而便于本地查看，或者毫米波雷达检测的信号发送给控制器，控制器计算猪只数据信息后，将数据信息发送给服务器，服务器再将数据信息发送给手机端或电脑端，这样便于联网查看。本发明的另一个方面，提出了一种猪只盘点系统的应用方法，如图2所示，包括上述的猪只盘点系统，操作步骤如下：S1：启动系统，通过调整固定支架2的高度，以调整毫米波雷达的高度和方向，通过毫米波雷达测量猪只的运动参数，获得猪只在转猪通道1上行进的运动轨迹；S2：数据处理，对猪只的运动参数进行过滤，根据运动参数判断猪只是否为正常顺着转猪通道1行走；如果不是正常行进的猪只则返回S1步骤，通过毫米波雷达继续获取猪只的运动参数；若猪只为正常行进的猪只，则计入猪只数据；S3：猪只数量盘点，根据上述S2的猪只数据获取猪只数量，通过控制器对猪只数量自动上报，输出到显示屏、手机端或电脑端，供工作人员进行查看。接上述实施例，更具体的方案是，在S2中，控制器根据猪只的运动参数进行计算，以获取的猪只行走轨迹，根据猪只行走轨迹计算猪只的左右偏移差距a，并将猪只的左右偏移差距a与设定的左右偏移阈值A进行比对，以判断猪只行走轨迹是否为顺直，同时根据猪只行走轨迹计算猪只行走的距离s，将猪只行走的距离s与设定的距离阈值L进行比对，以判断猪只行走轨迹是否为正常行走轨迹，如果猪只行走轨迹顺直且为正常行走轨迹，则判断猪只为正常行进的猪只，计入猪只数据，反之，则返回S1步骤，继续获取猪只的运动参数。接上述实施例，更具体的方案是，如果猪只行走轨迹的左右偏移差距a≤左右偏移阈值A且猪只行走距离s＞距离阈值L时，则判定猪只为正常行进的猪只，计入猪只数据；如果猪只行走轨迹的左右偏移差距a＞左右偏移阈值A或者猪只行走距离s≤距离阈值L时，则判定猪只不是正常行进的猪只，不计入猪只数据，返回S1步骤，继续获取猪只的运动参数。接上述实施例，更具体的方案是，猪只行走距离s为猪只进入所述毫米波雷达测量范围内起点到单向门的距离，左右偏移差距a为所述毫米波雷达所能扫描的范围内，以所述转猪通道的中心线为一个基线所计算出的猪只的左右偏差距离。接上述实施例，更具体的方案是，应用方法还包括将猪只行进轨迹发送至服务器。需要说明的是：本发明工作过程，通过固定在固定支架2上方的毫米波雷达模块测量猪只的行进轨迹和行进距离，判断猪只的行走轨迹和行走距离。也就是说，通过固定支架2上的毫米波雷达对物体跟踪的特性，当猪只进入转猪通道1时，毫米波雷达将测量出的猪只的相对距离、相对速度、角度及方位等运动参数信息反馈至控制器，通过CPU计算，实时的跟踪猪只轨迹和距离，然后将统计的猪只数量输出到显示屏或者服务器；本发明计算原理，如图2所示,工作流程如下:获取运动参数101，通过固定在固定支架2正上方的毫米波雷达测量猪只的运动参数，反映出猪只行进的运动轨迹；数据处理102，对上述毫米波雷达的测量的猪只的运动参数进行过滤，获取轨迹左右偏移a和猪只行走距离s，同时将轨迹左右偏移a和猪只行走距离s分别与设定的左右偏移阈值A和设定的距离阈值L对比，判断猪只是否为正常顺着转猪通道1行走，根据判断，如果不是正常行进的猪只则继续获取猪只的运动参数；猪只行走轨迹顺直判断103，如果猪只行走轨迹左右偏移差距a≤设定的左右偏移阈值A，则判断猪只是顺着转猪通道1行走的，说明猪只行走轨迹顺直；猪只正常行走轨迹判断104，如果满足猪只行走轨迹顺直103，则进入猪只正常行走轨迹判断104，如果猪只行走距离s＞距离阈值L时，则猪只轨迹为正常行走轨迹；猪只数量判断累计105，如果猪只行走轨迹左右偏移差距a≤设定的左右偏移阈值A且猪只行走距离s＞设定的距离阈值L，则计入猪只数量，通过系统对数量自动上报，工作人员进行查看；如果猪只行走轨迹的左右偏移差距a＞左右偏移阈值A或者猪只行走距离s≤距离阈值L时，则判定猪只不是正常行进的猪只，不计入猪只数据，说明猪只未在转猪通道1正常行走，则继续获取猪只的运动参数。一个具体的实施例，猪只在地磅上称重之后，通过转猪通道1进入客户车辆，转猪通道1为双通道，长 6.4m，宽 1.3m，单个通道宽 0.65m，转猪通道1两侧有高约 1m 的护栏，转猪通道1与水平面夹角不固定，可以根据客户车辆高度进行调整，转猪时工作人员在猪的后面用赶猪棒赶猪；通常情况下，130公斤的猪的腹围为44cm， 104.5公斤的猪的腹围一般为35cm，所以测量后备种猪腹顶宽度为31-40cm，猪只通过转猪通道1时，一只一只通过，所以猪只通过转猪通道1时都会出现回流现象，即猪往回走；因此，在转猪通道1上方通过毫米波雷达测量猪只的行进轨迹和行进距离，通过控制器检测计算猪只行走轨迹左右偏移差距a和猪只行走距离s，并设定左右偏移阈值A和距离阈值L，如果猪只行走轨迹左右偏移差距a≤设定的左右偏移阈值A且猪只行走距离s＞设定的距离阈值L，则计入猪只数量，通过系统对数量自动上报，工作人员进行查看；如果猪只行走轨迹的左右偏移差距a＞左右偏移阈值A或者猪只行走距离s≤距离阈值L时，则判定猪只不是正常行进的猪只，不计入猪只数据；本发明采用具体方案是系统设定的左右偏移阈值A为32.5 cm，距离阈值L为3.2m，如果猪只行走轨迹的左右偏移差距a为22 cm内且猪只行走距离s为4.5m时，将计入猪只数据。对所公开的实施例的上述说明，使本领域专业技术人员能够实现或使用本发明。对这些实施例的多种修改对本领域的专业技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本发明的精神或范围的情况下，在其它实施例中实现。因此，本发明将不会被限制于本文所示的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
