标题title
一种基于深度学习的髋关节医学图像处理方法和装置
摘要abst
本发明设计医学图像处理技术领域，具体涉及一种基于深度学习的髋关节医学图像处理方法和装置。本发明方法包括：输入患者进行全髋关节置换术后的髋关节医学图像；对所述髋关节医学图像进行预处理；将经过预处理的髋关节医学图像放入预先训练好的SSD512目标检测网络模型，实现对关键点的定位，本发明还可进一步根据获得的关键点计算得到有解剖意义的骨盆放射学参数。本发明定位精度高，测量放射学参数准确，能够为医生提供参考，识别出假体安放位置水平或垂直方向偏移过多，假体安放角度不恰当以及假体与天然骨接触面不足的病人，对这类病人提前干预，提升术后病人生活质量，提升医生工作效率和流程的智能程度，具有很好的应用前景。
权利要求书clms
1.一种基于深度学习的髋关节医学图像处理方法，其特征在于，包括如下步骤：步骤1，输入患者进行全髋关节置换术后的髋关节医学图像；步骤2，对所述髋关节医学图像进行预处理；步骤3，将经过步骤2处理的髋关节医学图像放入预先训练好的SSD512目标检测网络模型，实现对关键点的定位，所述关键点包括过假体中心点的假体直径的两个端点、左右泪滴点、左右坐骨底点、耻骨联合上端点、髋臼与髋臼杯交点以及对侧假体或股骨中心点共九个点。2.按照权利要求1所述的髋关节医学图像处理方法，其特征在于：所述髋关节医学图像为X光二维医学影像。3.按照权利要求2所述的髋关节医学图像处理方法，其特征在于：所述X光二维医学影像的采集方式为骨盆正位X光拍摄。4.按照权利要求1所述的髋关节医学图像处理方法，其特征在于：步骤2中，所述预处理包括数据脱敏、图像pixelspacing值调整和像素值去噪中的至少一项。5.按照权利要求1所述的髋关节医学图像处理方法，其特征在于：步骤3的具体过程包括如下步骤：步骤3.1，将经过步骤2处理的髋关节医学图像统一成分辨率512×512的图像；步骤3.2，经过卷积神经网络VGG16提取不同stage的特征信息；步骤3.3，将不同深度的特征信息经过FPN层后，在不同的stages上提取不同的anchor的bounding box信息；步骤3.4，经过回归bounding box得到关键点坐标。6.按照权利要求1所述的髋关节医学图像处理方法，其特征在于：所述SSD512目标检测网络模型的具体结构如下：定义“卷积层A”：卷积核尺寸，步距，图片填充，激活函数relu；定义“卷积层B”：卷积核尺寸，步距，激活函数relu；定义“卷积层C”：卷积核尺寸，步距，图片填充，激活函数relu；定义“最大池化层A”：池化核尺寸，步距，图片填充；L1、2：卷积层A，卷积核数量＝64；L3：最大池化层A；L4、5：卷积层A，卷积核数量＝128；L6：最大池化层A；L7、8、9：卷积层A，卷积核数量＝256；L10：最大池化层A；L11、12、13：卷积层A，卷积核数量＝512；L14：最大池化层A；L15、16、17：卷积层A，卷积核数量＝512；L18：最大池化层，池化核，步距，图片填充；L19：卷积层，卷积核数量：1024，卷积核尺寸，步距，图片填充，膨胀率，激活函数relu；L20：卷积层B，卷积核数量＝1024；L21：卷积层B，卷积核数量＝256；L22：卷积层C，卷积核数量＝512；L23：卷积层B，卷积核数量＝128；L24：卷积层C，卷积核数量＝256；L25：卷积层B，卷积核数量＝128；L26：卷积层C，卷积核数量＝256；L27：卷积层B，卷积核数量＝128；L28：卷积层C，卷积核数量＝256；L29：卷积层B，卷积核数量＝128；L30：卷积层，卷积核数量＝256，卷积核尺寸，步距，图片填充，激活函数relu；L9、20、22、24、26、28、30为7层不同深度特征的输出；7层的类别预测卷积核数量分别为,卷积核尺寸，步距，图片填充；7层的目标框预测卷积核数量分别为,卷积核尺寸，步距，图片填充；7层特征图的尺寸为；特征图每个像素对应先验框个数为；采用的ratio分别为。7.按照权利要求1所述的髋关节医学图像处理方法，其特征在于，还包括步骤4，所述步骤4为：将步骤3得到的关键点进行关联，得到用于评估全髋关节置换术手术效果的参数；所述参数为假体髋臼外展角、假体天然骨覆盖率、旋转中心高度偏移量或旋转中心水平偏移量中的至少一个。8.按照权利要求7所述的髋关节医学图像处理方法，其特征在于：所述假体髋臼外展角的计算方法为：将髋臼杯内外两点连接得到术后病人髋臼杯直径，得到a线，左右坐骨底点连线，得到c线，计算a线和c线的夹角β，即得；所述假体天然骨覆盖率的计算方法为：将髋臼杯内外两点连接得到术后病人髋臼杯直径，得到a线，将a线中点定义为假体中心，将假体中点和臼杯与髋臼接触点连接得到b线，计算a线和b线夹角α，假体天然骨覆盖率为/180；所述旋转中心高度偏移量的计算方法为：将髋臼杯内外两点连接得到术后病人髋臼杯直径，得到a线，将a线中点定义为假体中心，左右泪滴点连线，得到d线，计算假体中点到d线的距离h1，计算对侧假体或股骨中点到d线的距离h0，旋转中心高度偏移量为：d0＝h1-h0；所述旋转中心水平偏移量的计算方法为：将髋臼杯内外两点连接得到术后病人髋臼杯直径，得到a线，将a线中点定义为假体中心，得到过耻骨联合上端点且与泪滴连线垂直的骨盆中线，即得e线，计算假体中点到e线的距离L1，计算对侧假体或股骨中点到e线的距离L0，旋转中心水平偏移量为：d1＝L1-L0。9.一种实现权利要求1-8任一项所述基于深度学习的髋关节医学图像处理方法的装置，其特征在于，包括：数据采集单元，用于采集所述髋关节医学图像；数据预处理单元，用于对所述髋关节医学图像进行预处理；目标检测单元，用于对所述关键点进行定位；放射学参数获取单元，用于将关键点相互关联，获取有解剖意义的骨盆放射学参数。10.一种计算机可读存储介质，其特征在于：其上存储有用于实现权利要求1-8任一项所述基于深度学习的髋关节医学图像处理方法的计算机程序。
说明书desc
技术领域本发明设计医学图像处理技术领域，具体涉及一种基于深度学习的髋关节医学图像处理方法和装置。背景技术随着现代医疗数字化的推进，医护人员通常需要采集患者手术后的二维和三维医学图像对患者病变部位进行分析，从而在术后能够对手术结果进行评估。一般来说，三维医学图像更能够反映出患者病变部位的情况，但是由于价格原因许多病人只愿意进行X光检查，于是需要一种方法能够通过信息更少的二维图像对病人情况进行准确的诊断。全髋关节置换术是最成功的外科手术之一，因为它能够显著缓解病人疼痛和提高病人的生活质量。在接受手术后，有10％～15％的病人对手术结果并不满意，不仅如此，假体脱位也是常见的并发症之一，脱位会伴随剧烈的疼痛以及肢体功能障碍，同时病人需要再次接受手术。脱位病人的手术整体治疗费用是不脱位病人的300％。在全髋关节置换术中，髋臼组件的放置位置非常重要，它定义了新的髋关节旋转中心，这反过来影响髋关节生物力学、腿长和股骨重建。缺乏支撑会增加天然骨—假体界面的应力，从而增加机械故障的可能性。天然骨骼必须支撑至少70％的组件表面积，以提供稳定性并允许在骨骼上充分生长。为了评估病人手术质量，需要获得术后骨盆冠状位X光片的放射学参数，通过放射学参数计算假体安放位置、角度以及天然骨骼支撑等重要的参数，以此进行判断。现有技术一般都是由经验丰富的临床医生对图像中的关键参数进行手工标记和估计，进而得到关键点和参数的信息。由于手工标记骨盆冠状位X光影像关键点位置和放射学参数的方法效率低，会消耗医师人力，同时不同的医师之间标注结果会存在偏差，流程整体智能化程度低，因此需要一种方法自动评估手术质量。中国发明专利申请“CN111179350A基于深度学习的髋关节图像处理方法及计算设备”提供了一种基于深度学习对髋关节的图像进行处理的方法，通过该方法能够自动标注髋关节图像中的关键点，关键点包括过假体中心点的假体直径的两个端点、左右泪滴点、左右坐骨底点、耻骨联合上端点、髋臼与髋臼杯交点以及对侧假体或股骨中心点共九个点。然而，目前的方法在髋关节X光片上的关键点定位精度不足，且对于病情较重和情况复杂的病例预测效果进一步下降。同时，传统人工标注过程繁琐耗时，不同的医师标注结果也存在偏差。因此，本领域针对全髋关节置换术术后X光片关键点定位和放射学参数计算，仍然需要开发新的自动图像处理方法，以实现更高精度和更强鲁棒性的关键点标注。发明内容针对现有技术的缺陷，本发明提供一种基于深度学习的髋关节医学图像处理方法和装置，目的在于针对全髋关节置换术的手术结果评估，提出一种新的髋关节医学图像处理方法。一种基于深度学习的髋关节医学图像处理方法，包括如下步骤：步骤1，输入患者进行全髋关节置换术后的髋关节医学图像；步骤2，对所述髋关节医学图像进行预处理；步骤3，将经过步骤2处理的髋关节医学图像放入预先训练好的SSD512目标检测网络模型，实现对关键点的定位，所述关键点包括过假体中心点的假体直径的两个端点、左右泪滴点、左右坐骨底点、耻骨联合上端点、髋臼与髋臼杯交点以及对侧假体或股骨中心点共九个点。优选的，所述髋关节医学图像为X光二维医学影像。优选的，所述X光二维医学影像的采集方式为骨盆正位X光拍摄。优选的，步骤2中，所述预处理包括数据脱敏、图像pixelspacing值调整和像素值去噪中的至少一项。优选的，步骤3的具体过程包括如下步骤：步骤3.1，将经过步骤2处理的髋关节医学图像统一成分辨率512×512的图像；步骤3.2，经过卷积神经网络VGG16提取不同stage的特征信息；步骤3.3，将不同深度的特征信息经过FPN层后，在不同的stages上提取不同的anchor的bounding box信息；步骤3.4，经过回归bounding box得到关键点坐标。优选的，所述SSD512目标检测网络模型的具体结构如下：定义“卷积层A”：卷积核尺寸，步距，图片填充，激活函数relu；定义“卷积层B”：卷积核尺寸，步距，激活函数relu；定义“卷积层C”：卷积核尺寸，步距，图片填充，激活函数relu；定义“最大池化层A”：池化核尺寸，步距，图片填充；L1、2：卷积层A，卷积核数量＝64；L3：最大池化层A；L4、5：卷积层A，卷积核数量＝128；L6：最大池化层A；L7、8、9：卷积层A，卷积核数量＝256；L10：最大池化层A；L11、12、13：卷积层A，卷积核数量＝512；L14：最大池化层A；L15、16、17：卷积层A，卷积核数量＝512；L18：最大池化层，池化核，步距，图片填充；L19：卷积层，卷积核数量：1024，卷积核尺寸，步距，图片填充，膨胀率，激活函数relu；L20：卷积层B，卷积核数量＝1024；L21：卷积层B，卷积核数量＝256；L22：卷积层C，卷积核数量＝512；L23：卷积层B，卷积核数量＝128；L24：卷积层C，卷积核数量＝256；L25：卷积层B，卷积核数量＝128；L26：卷积层C，卷积核数量＝256；L27：卷积层B，卷积核数量＝128；L28：卷积层C，卷积核数量＝256；L29：卷积层B，卷积核数量＝128；L30：卷积层，卷积核数量＝256，卷积核尺寸，步距，图片填充，激活函数relu；L9、20、22、24、26、28、30为7层不同深度特征的输出；7层的类别预测卷积核数量分别为,卷积核尺寸，步距，图片填充；7层的目标框预测卷积核数量分别为,卷积核尺寸，步距，图片填充；7层特征图的尺寸为；特征图每个像素对应先验框个数为；采用的ratio分别为。优选的，还包括步骤4，所述步骤4为：将步骤3得到的关键点进行关联，得到用于评估全髋关节置换术手术效果的参数；所述参数为假体髋臼外展角、假体天然骨覆盖率、旋转中心高度偏移量或旋转中心水平偏移量中的至少一个。优选的，所述假体髋臼外展角的计算方法为：将髋臼杯内外两点连接得到术后病人髋臼杯直径，得到a线，左右坐骨底点连线，得到c线，计算a线和c线的夹角β，即得；所述假体天然骨覆盖率的计算方法为：将髋臼杯内外两点连接得到术后病人髋臼杯直径，得到a线，将a线中点定义为假体中心，将假体中点和臼杯与髋臼接触点连接得到b线，计算a线和b线夹角α，假体天然骨覆盖率为/180；所述旋转中心高度偏移量的计算方法为：将髋臼杯内外两点连接得到术后病人髋臼杯直径，得到a线，将a线中点定义为假体中心，左右泪滴点连线，得到d线，计算假体中点到d线的距离h1，计算对侧假体或股骨中点到d线的距离h0，旋转中心高度偏移量为：d0＝h1-h0；所述旋转中心水平偏移量的计算方法为：将髋臼杯内外两点连接得到术后病人髋臼杯直径，得到a线，将a线中点定义为假体中心，得到过耻骨联合上端点且与泪滴连线垂直的骨盆中线，即得e线，计算假体中点到e线的距离L1，计算对侧假体或股骨中点到e线的距离L0，旋转中心水平偏移量为：d1＝L1-L0。本发明还提供一种实现上述基于深度学习的髋关节医学图像处理方法的装置，包括：数据采集单元，用于采集所述髋关节医学图像；数据预处理单元，用于对所述髋关节医学图像进行预处理；目标检测单元，用于对所述关键点进行定位；放射学参数获取单元，用于将关键点相互关联，获取有解剖意义的骨盆放射学参数。本发明还提供一种计算机可读存储介质，其上存储有用于实现上述基于深度学习的髋关节医学图像处理方法的计算机程序。本发明以全髋关节置换术的手术结果评估为目的，选择和设计SSD512目标检测网络模型，实现了对髋关节医学图像中关键点的定位。利用这些关键点，可进一步获得有解剖意义的骨盆放射学参数。通过对测试集进行计算,本发明对全髋关节置换术术后X光片的九个关键点预测平均误差为1.621mm；髋关节外展角预测误差为1.449°；天然骨覆盖率预测误差为1.486％；术后重建旋转中心高度偏移量预测误差为2.882mm；术后重建旋转中心水平偏移量预测误差为2.415mm。可见本发明方法具有很好的准确性.在临床应用中，医生通过对这些关键点或骨盆放射学参数进行分析，可进一步对全髋关节置换术的手术结果进行评估，识别出可能出现假体脱位以及其他术后并发症的病人，对这类病人提前干预。本发明能够提升术后病人生活质量，同时提升医生工作效率和流程的智能程度，具有很好的应用前景。显然，根据本发明的上述内容，按照本领域的普通技术知识和惯用手段，在不脱离本发明上述基本技术思想前提下，还可以做出其它多种形式的修改、替换或变更。以下通过实施例形式的具体实施方式，对本发明的上述内容再作进一步的详细说明。但不应将此理解为本发明上述主题的范围仅限于以下的实例。凡基于本发明上述内容所实现的技术均属于本发明的范围。附图说明图1为本发明一种基于深度学习的髋关节置换术术后评估方法流程；图2为本发明实施例提供的病人X光片的采集设备；图3为本发明实施例提供的预处理前后的骨盆冠状位X光片；图4为本发明实施例提供的目标检测网络模型，包括特征提取结构和金字塔结构；图5为本发明实施例提供的术后骨盆冠状位X光片关键点；图6为本发明实施例提供的术后骨盆冠状位X光片的放射学参数；图7为本发明实施例提供的一种骨盆冠状位X光二维医学影像关键点定位和放射学参数自动获取装置的各单元的示意性框图。具体实施方式需要特别说明的是，实施例中未具体说明的数据采集、传输、储存和处理等步骤的算法，以及未具体说明的硬件结构、电路连接等均可通过现有技术已公开的内容实现。术语解释：骨盆冠状位：即骨盆正位，被检者仰卧于摄影台上，身体正中矢状面垂直并对准台面中线，骨盆无旋转，保持双侧髂前上棘至台面等距，下肢内旋15°～20°，中心线对准两侧髂前上棘连线中点至耻骨联合连线中点垂直射入探测器的摄影体位。放射学参数：人为定义的用于定量评估病人情况的放射影像中的定量指标，例如放射影像中的点、线、角度等。目标检测：从一幅图片中找出目标，包括检测目标具体位置和识别目标类别两个过程，任务的难点在于待检测区域候选的提取与识别。关键点：在获取病人骨盆放射学参数时需要的图像上的点。实施例1本实施例提供一种基于深度学习的髋关节医学图像处理方法和装置。所述髋关节医学图像处理的方法流程如图1所示，具体包括以下步骤S1至S5：S1、采集病人术后骨盆冠状位X光的二维医学影像；骨盆为连结脊柱和下肢之间的盆状骨架，由后方的骶、尾骨和左右两髋骨连接而成的完整骨环。骨盆既将体重传递到两下肢，并作为游离下肢的活动基础，又支持保护腹盆内器官。先天性髋关节发育不良包括一组相关的疾病：髋关节不稳定、半脱位、脱位、髋臼发育不良。对于年轻病人可以采用各种保守治疗，包括减少浮肿、减轻体重、以车代步等，在患者出现严重的髋关节疼痛和功能障碍，不能完成基本的日常生活动作时，需要进行人工全髋关节置换术。在病人进行手术后，拍摄其骨盆冠状位X光片，具体的，患者仰卧平躺于X线片检查台上，双下肢内旋15°，以使股骨颈前倾角改变，其投影长度最大化。X线像管到感光胶片的距离为120cm，并且保持垂直。对准光束的十字心位于耻骨联合上缘与髂前上棘连线的中点。启动X光机，采集到的病人骨盆冠状位X光片样本。设备如图2所示，得到的X光片样本如图3所示。S2、对X光片进行一系列预处理，得到用于预测和训练的图片；在获得医院方面授权的情况下，将病人图像数据从医院放射科推出到大数据中心，在大数据中心提供的计算机环境下对病人数据进行脱敏，采用SimpleITK读取病人DCM数据，提取出图像像素值矩阵和pixelspacing信息，保存为npy文件，去除病人信息，完成脱敏。由于医院内采集病人X光片的机器有不同型号，生成图像的像素值范围和pixelspacing不同，同时图像尺寸过大，在深度学习训练过程中会产生大量参数，占据大量显存，减低Batchsize，影响网络对数据的学习，降低定位精度。因此需要统一所有图像的像素值范围和pixelspacing，缩小图片尺寸。首先将目标值和原图pixelspacing的商乘以当前矩阵尺寸，得到图片目标尺寸，利用线性插值的方法将原图扩充至目标尺寸，完成所有图片pixelspacing的统一，这里目标值设为0.1mm/pixel。而后再利用python中图像处理库将图片缩小为当前的四分之一，此时pixelspacing为0.4mm/pixel。然后将图片的最低部分2％的像素值去掉，剩余像素值归一化至，将图片分为的网格，在每个网格中分别进行直方图均衡，对比度限制值设为100，完成图像低像素值噪声去除和直方图均衡。至此图像预处理完成，结果如图3所示。S3、将从上述步骤预处理得到的图像，放入提前训练好的SSD512目标检测网络模型，对不同的关键点分别单独进行关键点定位；SSD512网络结合特征金字塔FPN进行目标框回归，确定关键点位置，下面将对SSD512和FPN进行详细描述。SSD512的特征提取网络基于VVG16：VGG16是Oxford的Visual Geometry Group的组提出的，网络采用连续的几个3x3的卷积核代替较大卷积核。对于给定的感受野采用堆积的小卷积核这样的多层非线性层可以增加网络深度来保证学习更复杂的模式，而且参数更少。在VGG中，使用了3个3x3卷积核来代替7x7卷积核，使用了2个3x3卷积核来代替5*5卷积核，这样做的主要目的是在保证具有相同感知野的条件下，提升了网络的深度，在一定程度上提升了神经网络的效果。FPN：在深度学习网络学习图像特征过程中，在下采样阶段，高分辨率的特征感受野大，但是位置信息低，低分辨率的特征感受野小，位置信息丰富，所以如何将具有感受野信息和位置信息结合起来，是具有一个挑战性的问题。特征金字塔很好的改善了这个问题，通过创新性的利用上一stage的特征上采样以及在下采样过程同stage的特征拼接起来，作为下一个阶段的输入，这个结构能很好的将感受野信息和位置信息结合起来，使得网络能够学习更深层的特征信息。SSD512具体结构如下：将输入图像统一成512×512分辨率；定义“卷积层A”：卷积核尺寸，步距，图片填充，激活函数relu；定义“卷积层B”：卷积核尺寸，步距，激活函数relu；定义“卷积层C”：卷积核尺寸，步距，图片填充，激活函数relu；定义“最大池化层A”：池化核尺寸，步距，图片填充；L1、2：卷积层A，卷积核数量＝64L3：最大池化层AL4、5：卷积层A，卷积核数量＝128L6：最大池化层AL7、8、9：卷积层A，卷积核数量＝256L10：最大池化层AL11、12、13：卷积层A，卷积核数量＝512L14：最大池化层AL15、16、17：卷积层A，卷积核数量＝512L18：最大池化层，池化核，步距，图片填充L19：卷积层，卷积核数量：1024，卷积核尺寸，步距，图片填充，膨胀率，激活函数reluL20：卷积层B，卷积核数量＝1024L21：卷积层B，卷积核数量＝256L22：卷积层C，卷积核数量＝512L23：卷积层B，卷积核数量＝128L24：卷积层C，卷积核数量＝256L25：卷积层B，卷积核数量＝128L26：卷积层C，卷积核数量＝256L27：卷积层B，卷积核数量＝128L28：卷积层C，卷积核数量＝256L29：卷积层B，卷积核数量＝128L30：卷积层，卷积核数量＝256，卷积核尺寸，步距，图片填充，激活函数relu；L9、20、22、24、26、28、30为7层不同深度特征的输出；7层的类别预测卷积核数量分别为,卷积核尺寸，步距，图片填充；7层的目标框预测卷积核数量分别为,卷积核尺寸，步距，图片填充；7层特征图的尺寸为；特征图每个像素对应先验框个数为；采用的ratio分别为。匹配策略：所有的真实目标框选择与交并比最大的anchor进行匹配；对剩下的anchor，选择与其交并比最大的真实目标框进行匹配，而且这个交并比必须大于设定阈值时才算匹配上；如果没有匹配上真实目标框则作为负样本。损失函数：网络损失函数包括分类损失和定位损失，分类损失采用的交叉熵损失函数，定位损失采用的是smooth_L1损失函数。有两点值得注意：定位损失只计算正样本的损失，而且预测值为相对于anchor的偏移值；由于负样本远多于正样本，为了保证正负样本的均衡，采用了难分样本挖掘策略，只选择损失值最大的负样本。难分样本挖掘策略：在计算类别损失时，只选择正样本和部分损失值最大的负样本参与计算。正负样本数量比例为1：3，根据正样本数量确定负样本数量，将所有负样本损失值排名，从大到小挑出目标数量的负样本与所有正样本参与最终损失的反向传递。关键点如图5所示，包括：a：髋臼杯与髋臼天然骨接触点；b：过假体中心髋臼杯直径外侧点；c：假体中心点；d：对侧股骨或者假体中心点；e：右泪滴；f：左泪滴；g：右坐骨底点；h：左坐骨底点；i：耻骨联合上端点；j：过假体中心髋臼杯直径内侧点；S4、术前病人就将深度学习网络中定位得到的关键点进行关联；放射学参数如图6所示，包括：a：过假体中心的髋臼杯直径；b：假体中点和臼杯与髋臼接触点连接；c：泪滴连线；d：坐骨底点连线；e：骨盆中线；α：a与b相交而成的锐角；β：a与d相交而成的锐角；h1：术后髋关节旋转中心的高度，从股骨头中心做到b的垂线，线段长度即为center高度：h0：术前髋关节旋转中心的高度，同上；L0、L1：股骨头中心到中轴线的距离；d0：h1-h0，旋转中心高度偏移量；d1：L1-L0，旋转中心水平偏移量；天然骨覆盖率：/180；S5、根据上一步所得到的放射学参数，医生可对病人假体安放位置和安放角度进行评估。作为一种优选的方式，对各参数风险评估的阈值举例如下：β在30°到50°之间为合理情况，反之存在风险；天然骨覆盖率大于70％为合理情况，反之存在风险；旋转中心高度偏移量d0小于-6mm，则假体偏低，d0大于6mm，则假体偏高；旋转中心水平偏移量d1小于-5mm，则假体偏内，d1大于5mm，则假体偏外。目标检测模型训练集术后300例，测试集30例；术后九个关键点平均定位误差为1.621mm；髋关节外展角预测误差为1.449°；天然骨覆盖率预测误差为1.486％；术后重建旋转中心高度偏移量预测误差为2.882mm；术后重建旋转中心水平偏移量预测误差为2.415mm；对于术后髋关节外展角是否有风险，预测准确率为100％；对于天然骨覆盖率是否有风险，预测准确率为100％；对于术后重建旋转中心垂直偏移是否有风险，预测准确率为79.31％；对于术后重建旋转中心水平偏移是否有风险，预测准确率为82.76％。图7是本发明实施例提供的一种骨盆冠状位X光二维医学影像关键点定位和放射学参数自动获取方法的示意性框图。具体地，请参阅图7，该装置包括数据采集单元、数据脱敏及预处理单元、目标检测单元、放射学参数获取单元；数据采集单元，采集病人骨盆冠状位X光片样本；数据脱敏及预处理单元，提取X光数据中图像像素矩阵，统一像素物理空间值，对图像中的低像素值噪声去噪，分块进行直方图均衡，缩小像素矩阵尺寸；目标检测单元，基于VGG16-ssd512网络几何特征金字塔FPN进行骨盆冠状位X光的目标检测和关键点定位，作为放射学参数获取基础；放射学参数获取单元，通过目标检测单元得到的关键点，相互关联以后获取有解剖意义的骨盆放射学参数。需要说明的是，所属领域的技术人员可以清楚地了解到，上述骨盆冠状位X光二维医学影像关键点定位和放射学参数自动获取方法和各单元块的具体实现过程，可以参考前述方法实施例中的相应描述，为了描述的方便和简洁，在此不再赘述。实验例1不同模型的准确度比较本实验例采用各种不同的模型进行目标检测。其他步骤与实施例1相同。采用这些模型对测试集的放射学参数进行计算，误差如下表1所示。表1采用不同模型的误差从上表可以看到，实施例1采用的SSd512对所有放射学参数的预测结果均具有最好的准确性。这表明在这些放射学参数计算任务中，本发明构建的SSd512模型为最佳的选择。通过上述实施例和实验例可以看到，本发明的方法和装置可以对髋关节医学图像中的9个关键点进行定位，并利用这些关键点计算出有解剖意义的骨盆放射学参数。在临床应用中，医生通过对这些关键点或骨盆放射学参数进行分析，可进一步对全髋关节置换术的手术结果进行评估，识别出可能出现假体脱位以及其他术后并发症的病人，对这类病人提前干预。因而，本发明具有很好的应用前景。
