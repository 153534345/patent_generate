标题title
诊断支援装置、诊断支援系统及诊断支援方法
摘要abst
诊断支援装置是基于被插入了导管的生物组织的断层数据生成生物组织的三维数据，并将生成的三维数据作为三维图像在显示器显示，所述诊断支援装置具备控制部，所述控制部在所述三维数据中将所述生物组织的与所述导管的前端接触的点特定为接触点、在所述三维图像中将与所述接触点对应的体素的颜色设定为既定颜色。
权利要求书clms
1.诊断支援装置，其基于被插入了导管的生物组织的断层数据生成所述生物组织的三维数据，并将生成的三维数据作为三维图像在显示器显示，所述诊断支援装置具备控制部，所述控制部在所述三维数据中将所述生物组织的与所述导管的前端接触的点特定为接触点、在所述三维图像中将与所述接触点对应的体素的颜色设定为既定颜色。2.如权利要求1所述的诊断支援装置，其中，所述控制部根据在所述三维数据中从所述导管的前端到所述生物组织的各点的距离，调整所述三维图像的各体素的颜色中包含所述既定颜色的要素的比率。3.如权利要求1或权利要求2所述的诊断支援装置，其中，所述控制部通过解析所述断层数据，检测所述生物组织的与所述导管的前端接触的位置，在所述三维数据中将与检测出的位置对应的点特定为所述接触点。4.如权利要求1或权利要求2所述的诊断支援装置，其中，所述控制部通过解析所述三维数据，从而特定所述接触点。5.如权利要求4所述的诊断支援装置，其中，所述控制部接受位置数据的输入，并参照所述位置数据修正所述三维数据的解析结果，所述位置数据是表示所述生物组织的与所述导管的前端接触的位置的数据。6.如权利要求1或权利要求2所述的诊断支援装置，其中，所述控制部接受位置数据的输入，并在所述三维数据中将与由所述位置数据示出的位置对应的点特定为所述接触点，所述位置数据是表示所述生物组织的与所述导管的前端接触的位置的数据。7.如权利要求1所述的诊断支援装置，其中，所述控制部算出在所述三维数据中从所述导管的前端到所述生物组织的包含所述接触点的一定范围内的各点的距离，并根据算出的距离，调整所述三维图像中与该范围对应的体素组的各体素的颜色中包含所述既定颜色要素的比率。8.如权利要求1至权利要求7中任一项所述的诊断支援装置，其中，所述控制部接受到表示所述生物组织的包含所述接触点的部分区域已被作为所述导管的消融导管烧灼的烧灼数据的输入时，将与该区域对应的体素组的颜色设定为与所述既定颜色不同的颜色。9.诊断支援系统，其具备权利要求1至权利要求8中任一项所述的诊断支援装置、和在所述生物组织中移动的同时取得所述断层数据的传感器。10.如权利要求9所述的诊断支援系统，其进一步具备所述显示器。11.诊断支援方法，其中，基于被插入了导管的生物组织的断层数据生成所述生物组织的三维数据，并将生成的三维数据作为三维图像在显示器显示，所述诊断支援方法中，在所述三维数据中将所述生物组织的与所述导管的前端接触的点特定为接触点，并在所述三维图像中将与所述接触点对应的体素的颜色设定为既定颜色。
说明书desc
技术领域本发明涉及诊断支援装置、诊断支援系统及诊断支援方法。背景技术专利文献1至专利文献3中，记载有使用US图像系统而生成心腔或血管的三维图像的技术。“US”是ultrasound的缩写。现有技术文献专利文献专利文献1：美国专利申请公开第2010/0215238号说明书专利文献2：美国专利第6385332号说明书专利文献3：美国专利第6251072号说明书发明内容发明所要解决的课题针对心腔内、心脏血管和下肢动脉区域等使用IVUS的治疗被广为进行。“IVUS”是intravascular ultrasound的缩写。IVUS是指提供相对于导管长轴垂直的平面的二维图像的器械或方法。作为现状，施术者需要一边通过在头脑中层叠IVUS的二维图像而重构立体结构一边进行手术，特别地对于年轻的医生或者经验浅的医生而言存在障碍。为了消除这样的障碍，考虑由IVUS的二维图像自动生成表示心腔或血管等生物组织的结构的三维图像，并向施术者显示所生成的三维图像。考虑在将消融导管等不同于IVUS导管的导管插入生物组织的情况下，进一步显示表示与其不同的导管的三维图像。但是，在三维图像中，存在难以确认导管和生物组织是否接触的情况。本发明的目的为，在三次元图像中，便于确认导管和生物组织是否接触。用于解决课题的手段作为本发明的一个方式的诊断支援装置，其基于被插入了导管的生物组织的断层数据生成所述生物组织的三维数据，并将生成的三维数据作为三维图像在显示器显示，所述诊断支援装置具备控制部，所述控制部在所述三维数据中将所述生物组织的与所述导管的前端接触的点特定为接触点、在所述三维图像中将与所述接触点对应的体素的颜色设定为既定颜色。作为一实施方式，所述控制部根据在所述三维数据中从所述导管的前端到所述生物组织的各点的距离，调整所述三维图像的各体素的颜色中包含所述既定颜色的要素的比率。作为一实施方式，所述控制部通过解析所述断层数据，检测所述生物组织的与所述导管的前端接触的位置，在所述三维数据中将与检测出的位置对应的点特定为所述接触点。作为一实施方式，所述控制部通过解析所述三维数据，从而特定所述接触点。作为一实施方式，所述控制部接受位置数据的输入，并参照所述位置数据修正所述三维数据的解析结果，所述位置数据是表示所述生物组织的与所述导管的前端接触的位置的数据。作为一实施方式，所述控制部接受位置数据的输入，并在所述三维数据中将与由所述位置数据示出的位置对应的点特定为所述接触点，所述位置数据是表示所述生物组织的与所述导管的前端接触的位置的数据。作为一实施方式，所述控制部算出在所述三维数据中从所述导管的前端到所述生物组织的包含所述接触点的一定范围内的各点的距离，并根据算出的距离，调整所述三维图像中与该范围对应的体素组的各体素的颜色中包含所述既定颜色要素的比率。作为一实施方式，所述控制部接受到表示所述生物组织的包含所述接触点的部分区域已被作为所述导管的消融导管烧灼的烧灼数据的输入时，将与该区域对应的体素组的颜色设定为与所述既定颜色不同的颜色。作为本发明的一个方式的诊断支援系统，具备所述诊断支援装置和在所述生物组织中移动的同时取得所述断层数据的传感器。作为一实施方式，所述诊断支援系统进一步具备所述显示器。作为本发明的一个方式的诊断支援方法，其基于被插入了导管的生物组织的断层数据生成所述生物组织的三维数据，并将生成的三维数据作为三维图像在显示器显示，所述诊断支援方法中，在所述三维数据中将所述生物组织的与所述导管的前端接触的点特定为接触点，并在所述三维图像中将与所述接触点对应的体素的颜色设定为既定颜色。发明效果根据本发明，在三维图像中，便于确认导管和生物组织是否接触。附图说明为一实施方式涉及的诊断支援系统的立体图。为一实施方式涉及的探针和驱动单元的立体图。为一实施方式涉及的诊断支援装置的构成的框图。为一实施方式涉及的诊断支援系统的动作的流程图。为示出一实施方式涉及的生物组织的断面、开口及视点的位置关系的图。为示出一实施方式涉及的对于显示器画面的三维图像尺寸比率及与接触部对应的体素组的着色的图。为示出图4的步骤S2中进行处理的流程图。为示出图7的步骤S201中进行的处理的图。为示出一变形例中图7的步骤S202及步骤S203中进行的处理的图。为示出一变形例涉及的与烧灼区域对应的体素组的着色图。为示出一变形例中图4的步骤S2进行的处理的流程图。具体实施方式以下，针对一实施方式参见附图进行说明。各图中，对相同的或相当的部分标注相同附图标记。在本实施方式的说明中，针对相同的或相当的部分，适当地省略或简化说明。参见图1、图3及图5，说明本实施方式的概要。本实施方式涉及的诊断支援装置11基于被插入了导管63的生物组织60的断层数据51生成生物组织60的三维数据52。诊断支援装置11将生成的三维数据52作为三维图像53在显示器16显示。诊断支援装置11在三维数据52中，将生物组织60的与导管63的前端接触的点特定为接触点Pi。诊断支援装置11在三维图像53中，将与接触点Pi对应的体素的颜色设定为既定颜色。根据本实施方式，在三维图像53中，便于确认导管63和生物组织60是否接触。例如，若用户为实施消融手术的施术者，便于确认消融导管和心腔内的组织是否接触，因此便于实施消融手术。生物组织60为例如血管或心脏等器官。参见图1，说明本实施方式涉及的诊断支援系统10的构成。诊断支援系统10具备诊断支援装置11、电缆12、驱动单元13、键盘14、鼠标15和显示器16。诊断支援装置11为在本实施方式中在图像诊断中专门专用的计算机，但也可以是PC等通用的计算机。“PC”是personal computer的缩写。电缆12用于连接诊断支援装置11和驱动单元13。驱动单元13为用于与如图2所示的探针20连接、驱动探针20的装置。驱动单元13也被称为MDU。“MDU”是motor drive unit的缩写。探针20适用于IVUS中。探针20也被称为IVUS导管或图像诊断用导管。键盘14、鼠标15和显示器16经由任意的电缆或通过无线方式与诊断支援装置11连接。显示器16为例如LCD、有机EL显示器或HMD。“LCD”是liquid crystal display的缩写。“EL”是electro luminescence的缩写。“HMD”是head-mounteddisplay的缩写。作为一选项，诊断支援系统10进一步具备连接端子17和车单元18。连接端子17用于连接诊断支援装置11与外部机器。连接端子17为例如USB端子。“USB”是Universal Serial Bus的缩写。外部机器为例如磁盘驱动器、磁光盘驱动器或光盘驱动器等记录介质。车单元18为带有用于移动的脚轮的车。车单元18的车本体中设置了诊断支援装置11、电缆12和驱动单元13。车单元18的最上部的桌上设置了键盘14、鼠标15和显示器16。参见图2，说明本实施方式涉及的探针20和驱动单元13的构成。探针20具备驱动轴21、毂部22、鞘层23、外管24、超声波振子25和中继连接器26。对于驱动轴21而言，其穿过被插入于生物体体腔内的鞘层23和连接于鞘层23的基端的外管24，延伸至在探针20的基端内设置的毂部22的内部。驱动轴21的前端具有接收发送信号的超声波振子25，并且驱动轴21被设置为能够在鞘层23和外管24内旋转。中继连接器26连接鞘层23和外管24。毂部22、驱动轴21和超声波振子25以各自整体地在轴向上进退移动的方式而相互连接。因此，当进行例如毂部22被向前端侧向按压的操作时，驱动轴21和超声波振子25在鞘层23的内部向前端侧移动。例如当进行将毂部22向基端侧拉的操作时，如箭头所示，驱动轴21和超声波振子25在鞘层23的内部向基端侧移动。驱动单元13具备扫描单元31、滑动单元32和底盖33。扫描单元31经由电缆12与诊断支援装置11连接。扫描单元31具备与探针20连接的探针连接部34、作为使驱动轴21旋转的驱动源的扫描电动机35。对于探针连接部34而言，其经由在探针20的基端设置的毂部22的插入口36，与探针20可拆卸地连接。驱动轴21的基端被旋转自如地支承在毂部22的内部，扫描电动机35的旋转力传至驱动轴21。另外，驱动轴21与诊断支援装置11之间经由电缆12接收发送信号。在诊断支援装置11中，基于从驱动轴21传达的信号，进行生物体管腔的断层图像的生成以及图像处理。滑动单元32以使扫描单元31进退自如的方式承载扫描单元31，并与扫描单元31机械连接且电连接。滑动单元32具备探针夹部37、滑动电动机38和开关组39。探针夹部37以在比探针连接部34更靠前端侧的位置与探针连接部34同轴配置的方式设置，并对连接至探针连接部34的探针20进行支承。滑动电动机38是产生轴向驱动力的驱动源。通过滑动电动机38的驱动从而扫描单元31进退动作，伴随着该进退动作，驱动轴21在轴向进退动作。滑动电动机38例如为伺服电动机。开关组39中包括例如在扫描单元31的进退操作时按下的正向开关和返回开关、和图像描写的开始以及终止时按下的扫描开关。此处的示例中没有特别限定，根据需要开关组39包含各种开关。当按下正向开关时，滑动电动机38正旋转，扫描单元31前进。另一方面，当按下返回开关时，滑动电动机38逆旋转，扫描单元31后退。当按下扫描开关时开始图像描写，扫描电动机35驱动，并且滑动电动机38驱动而使扫描单元31进行后退。施术者等用户事先将探针20连接至扫描单元31，开始图像描写，并且使驱动轴21一边旋转一边向轴向基端侧移动。对于扫描电动机35和滑动电动机38而言，再度按下扫描开关则停止并终止图像描写。底盖33覆盖滑动单元32的底面和底面侧的侧面全周，且相对于滑动单元32的底面自由接近分离。参见图3，说明本实施方式涉及的诊断支援装置11的构成。诊断支援装置11具备控制部41、存储部42、通信部43、输入部44和输出部45。控制部41含有至少一个专用电路、至少一个专用电路或他们的组合。处理器，可以是CPU或GPU等通用处理器、或者在特定的处理中专门专用的处理器。“CPU”是centralprocessing unit的缩写。“GPU”是graphics processing unit的缩写。专用电路为例如FPGA或者ASIC。“FPGA”是field-programmable gate array的缩写。“ASIC”是application specific integrated circuit的缩写。控制部41一边控制包括诊断支援装置11的诊断支援系统10的各部分，一边执行涉及诊断支援装置11的动作的处理。存储部42包含至少一个半导体存储器、至少一个磁存储器、至少一个光存储器，或者他们之中至少两种的组合。半导体存储器为例如RAM或ROM。“RAM”是random accessmemory的缩写。“ROM”是read only memory的缩写。RAM为例如SRAM或DRAM。“SRAM”是static random access memory的缩写。“DRAM”是dynamic random access memory的缩写。ROM为例如EEPROM。“EEPROM”是electrically erasable programmable read only memory的缩写。存储部42例如用于主存储装置、辅助存储装置或高速缓冲存储器。在存储部42中，存储了断层数据51等用于诊断支援装置11的动作的数据和三维数据52及三维图像53等根据诊断支援装置11的动作而得到的数据。通信部43含有至少一个通信用接口。通信用接口为有线LAN接口、无线LAN接口或接收IVUS的信号以及进行A/D转换的图像诊断用接口。“LAN”是local area network的缩写。“A/D”是analog to digital的缩写。通信部43接收用于诊断支援装置11的动作的数据，另外，发送根据诊断支援装置11的动作而得到的数据。在本实施方式中，驱动单元13连接至通信部43所包含的图像诊断用接口。输入部44包含至少一个输入用接口。输入用接口为例如USB接口、HDMI接口或Bluetooth等对应近距离无线通信的接口。“HDMI”是High-Definition Multimedia Interface的缩写。输入部44接受如下述的操作，其中，所述操作为输入用于诊断支援装置11的动作的数据的操作。在本实施方式中，输入部44包含的USB接口或对应近距离无线通信的接口与键盘14和鼠标15连接。触摸屏和显示器16设置为整体地的情况下，输入部44包含的USB接口或HDMI接口也可以与显示器16连接。输出部45包含至少一个输出用接口。输出用接口为例如USB接口、HDMI接口或Bluetooth等对应近距离无线通信的接口。输出部45输出根据诊断支援装置11的动作而得到的数据。在本实施方式中，显示器16连接至输出部45所包含的USB接口或HDMI接口。通过利用控制部41所包含的处理器执行本实施方式涉及的诊断支援程序，从而可实现诊断支援装置11的功能。即，诊断支援装置11的功能可通过软件而实现。诊断支援程序为如下程序：用于通过利用计算机执行诊断支援装置11的动作所包含的步骤的处理，从而使计算机实现与该步骤的处理相对应的功能。即，诊断支援程序是使计算机作为诊断支援装置11发挥功能的程序。程序能够记录于计算机可读取记录介质内。计算机可读取记录介质为例如磁记录装置、光盘、磁光记录介质或半导体存储器。程序的分发可例如通过出售、转让或出借记录有程序的DVD或CD-ROM等便携型记录介质而进行。“DVD”是digital versatile disc的缩写。“CD-ROM”是compact disc read only memory的缩写。可以在服务器的存储器中存储程序，经过网络从服务器向其它的计算机中传送程序，从而来分发程序。可作为程序产品来提供程序。计算机例如将记录于便携型记录介质中的程序或从服务器传送的程序暂时存储在主存储装置中。然后，计算机用处理器读取在主存储装置中存储的程序，利用处理器按照读取的程序执行处理。计算机可以直接从便携型记录介质读取程序，按照程序执行处理。计算机也可以在每次从服务器将程序传送至计算机时，依次按照已收到的程序执行处理。可以不进行从服务器向计算机的程序的传送，通过仅按照执行指示及结果取得而实现功能的、所谓的ASP型的服务而执行处理。“ASP”是application service provider的缩写。在程序中包含了作为为电子计算机进行处理而提供的信息、且依照程序的内容。例如，具有不是对计算机直接的指令但规定计算机处理的性质的数据相当于“依照程序的内容”。诊断支援装置11的部分或全部的功能可以通过控制部41所包含的专用电路而实现。即，诊断支援装置11的部分或全部的功能可以通过硬件而实现。参见图4，说明本实施方式涉及的诊断支援系统10的动作。诊断支援系统10的动作相当于本实施方式涉及的诊断支援方法。图4的流程开始前，由用户对探针20进行预冲。其后，探针20嵌入在驱动单元13的探针连接部34及探针夹部37中，并连接及固定至驱动单元13。然后，探针20被插入至血管或心腔等生物组织60内的目标部位。步骤S1中，通过按下开关组39所包含的扫描开关，以及进一步按下开关组39所包含的返回开关，进行所谓的返回操作。探针20在生物组织60的内部利用通过返回操作在轴向上后退的超声波振子25发送超声波。超声波振子25在生物组织60的内部移动的同时放射线状地发送超声波。超声波振子25接收已发送的超声波的反射波。探针20将超声波振子25接收的反射波的信号输入至诊断支援装置11。诊断支援装置11的控制部41通过处理所输入的信号并依次生成生物组织60的断面图像，从而取得包含多个断面图像的断层数据51。具体而言，探针20在生物组织60的内部使超声波振子25沿周向旋转，并同时使之轴向移动，同时超声波振子25从旋转中心向外侧的多个方向发送超声波。探针20通过超声波振子25接收生物组织60内部的多个方向存在的反射物而来的反射波。探针20将接收的反射波信号通过驱动单元13及电缆12发送至诊断支援装置11。诊断支援装置11的通信部43接收探针20发送的信号。通信部43将接收的信号进行A/D转换。通信部43将A/D转换后的信号输入至控制部41。控制部41处理所输入的信号，并算出超声波振子25的超声波发送方向存在的反射物反射而来的反射波的强度值分布。控制部41依次生成具有与算出的强度值分布相当的辉度值分布的二维图像作为生物组织60的断面图像，以此取得断面图像的数据集即断层数据51。控制部41将取得的断层数据51存储在存储部42。在本实施方式中，超声波振子25接收的反射波的信号相当于断层数据51的原始数据，诊断支援装置11处理反射波的信号而生成的断面图像相当于断层数据51的加工数据。作为本实施方式的一变形例，诊断支援装置11的控制部41也可以将自探针20输入的信号直接作为断层数据51存储在存储部42。或者，控制部41也可以将对自探针20输入的信号进行处理而算出的表示反射波的强度值分布的数据作为断层数据51存储在存储部42。换言之，断层数据51不仅限于生物组织60的断面图像的数据集，也可以是超声波振子25的各移动位置处的以任意形式表达生物组织60的断面的数据。作为本实施方式的一变形例，也可以使用不旋转地向多个方向发送超声波的超声波振子，以代替周向旋转的同时向多个方向发送超声波的超声波振子25。作为本实施方式的一变形例，断层数据51也可以使用OFDI或OCT取得，以代替使用IVUS取得。“OFDI”是optical frequency domain imaging的缩写。“OCT”是optical coherence tomography的缩写。使用OFDI或OCT的情况下，作为在生物组织60中移动的同时取得断层数据51的传感器，使用在生物组织60中放射光来取得断层数据51的传感器，以代替在生物组织60中发送超声波来取得断层数据51的超声波振子25。作为本实施方式的一变形例，也可以使用其他装置生成同様的数据集，诊断支援装置11从该其他装置取得此数据集，以代替诊断支援装置11生成生物组织60的断面图像的数据集。换言之，也可以使用其他装置处理IVUS的信号并生成生物组织60的断面图像，将生成的断面图像输入诊断支援装置11，以代替诊断支援装置11的控制部41处理IVUS的信号并生成生物组织60的断面图像。步骤S2中，诊断支援装置11的控制部41基于在步骤S1中取得的断层数据51生成生物组织60的三维数据52。具体而言，诊断支援装置11的控制部41将存储部42存储的断层数据51所含的生物组织60的断面图像层叠并三维化，以生成生物组织60的三维数据52。作为三维化的方法可使用面绘制或体绘制等绘制方法，及其附带的包含环境映射的纹理映射和凹凸纹理映射等各种处理中任意的方法。控制部41将生成的三维数据52存储在存储部42。消融导管等不同于IVUS导管的导管63在被插入生物组织60的情况下，断层数据51与生物组织60的数据一样，包含导管63的数据。因此，在步骤S2中，由控制部41生成的三维数据52也与生物组织60的数据一样，包含导管63的数据。如图5所示，控制部41在三维数据52中，将生物组织60的与导管63的前端接触的点特定为接触点Pi。然后，控制部41在步骤S3中显示的三维图像53中，将与接触点Pi对应的体素的颜色设定为既定颜色。“既定颜色”在本实施方式中为红色，但只要是能够将与接触点Pi对应的体素与其他体素组区分的颜色即可。本实施方式中，如图5及图6所示，控制部41在三维数据52中，将生物组织60中包含接触点的一定范围特定为接触部64。然后，控制部41在步骤S3中显示的三维图像53中，将与接触部64对应的体素组的颜色设定为既定颜色。具体而言，控制部41通过解析存储部42存储的断层数据51，对生物组织60的与导管63的前端接触的位置进行检测。作为解析断层数据51的方法可以使用任意的方法，但本实施方式使用如下方法：对断层数据51中包含的断面图像内的生物组织60及导管63进行检测，通过测量生物组织60和导管63的前端之间的距离，判断生物组织60和导管63的前端是否接触。控制部41在三维数据52中，将与检测出的位置对应的点特定为接触点Pi。作为本实施方式的一变形例，控制部41也可以通过解析三维数据52来特定接触点Pi。作为解析三维数据52的方法可以使用任意的方法，例如使用下述方法：对三维数据52中包含的导管63的前端进行检测，并测量生物组织60和导管63的前端的距离，由此判断生物组织60和导管63的前端是否接触。此变形例中，控制部41可以接受表示生物组织60的与导管63的前端接触的位置的位置数据的输入。具体而言，控制部41可以从外部系统经由通信部43或输入部44接受位置数据的输入，所述外部系统使用在导管63的前端设置的电极等传感器来判断导管63的前端和生物组织60的内壁是否接触。然后，控制部41可以参照所输入的位置数据，修正三维数据52的解析结果。作为本实施方式的一变形例，控制部41可以不解析三维数据52，而是在三维数据52中，将由来自所述外部系统输入的位置数据所示位置所对应的点特定为接触点Pi。步骤S3中，诊断支援装置11的控制部41将步骤S2中生成的三维数据52作为三维图像53在显示器16显示。此时，控制部41可以将在显示器16显示三维图像53时的视点及假想光源72各自配置到任意位置。“视点”为在三维空间配置的、如图5所示的假想相机71的位置。光源72的数量及相对位置不仅限于图示中的情况，可以适当改变。具体而言，诊断支援装置11的控制部41根据存储部42存储的三维数据52生成三维图像53。控制部41经由输出部45，将生成的三维图像53在显示器16显示。步骤S4中，如果有用户的操作，则进行步骤S5至步骤S8的处理。如果没有用户的操作，则跳过步骤S5至步骤S8的处理。步骤S5中，诊断支援装置11的控制部41经由输入部44接受如图5所示的设定开口62位置的操作。在步骤S3中显示的三维图像53中，开口62的位置被设定为使生物体组织60的内壁面61通过开口62向生物体组织60的外部露出的位置。具体而言，在显示器16显示的三维图像53中，诊断支援装置11的控制部41经由输入部44接受用户使用键盘14、鼠标15或与显示器16一体设置的触摸屏切除一部分生物组织60的操作。图5的示例中，控制部41接受在生物组织60的断面中以使生物组织60的内壁面61成为开放形状的方式将一部分生物组织60切除的操作。“生物组织60的断面”为例如具有开口62的互相相对的两个边缘和与开口62相对的生物组织60的内壁面61的断层断面，但不限于该断层断面，可以是生物组织60的横断面、生物组织60的纵断面或生物组织60的其他断面。“生物组织60的横断面”指生物组织60中，相对于超声波振子25移动方向垂直地切断生物组织60而得的切断面。“生物组织60的纵断面”指生物组织60中，沿超声波振子25移动方向切断生物组织60而得的切断面。“生物组织60的其他断面”指生物组织60中，相对于超声波振子25移动方向倾斜地切断生物组织60而得的切断面。“开放形状”为例如大致C字形、大致U字形、大致3字形或他们中的任一个，如血管分支部或肺静脉口等、由于在生物组织60原本存在的空孔而部分缺损的形状。图5的示例中，生物组织60的内壁面61的形状为大致C字形。步骤S6中，诊断支援装置11的控制部41将根据步骤S5中接受的操作所设定的位置确定为开口62的位置。具体而言，诊断支援装置11的控制部41在存储部42存储的三维数据52中，将生物组织60的由用户操作而被切除的部分的边界的三维坐标特定为开口62的边缘的三维坐标。控制部41将特定后的三维坐标存储在存储部42。步骤S7中，诊断支援装置11的控制部41在三维数据52中形成开口62，该开口62在三维图像53中使生物组织60的内壁面61向生物组织60的外部露出。具体而言，诊断支援装置11的控制部41在存储部42存储的三维数据52中、将存储部42所存储的用三维坐标特定的部分设定为在显示器16显示三维图像53时不显示或透明。步骤S8中，诊断支援装置11的控制部41根据在步骤S7中形成的开口62的位置，调整在显示器16显示三维图像53时的视点。本实施方式中，控制部41将视点配置在从生物组织60的内壁面61通过开口62向生物组织60的外部延伸的直线的上。由此，用户可以从开口62窥视生物组织60的内部，从而假想的观察生物组织60的内壁面61。具体而言，诊断支援装置11的控制部41在显示器16显示的三维图像53中，在通过设定为不显示或透明的部分可以看到生物组织60的内壁面61的位置配置假想的相机71。图5的示例中，控制部41在生物组织60的断面中被第1直线L1和第2直线L2夹着的区域AF中配置假想的相机71，第1直线L1为从生物组织60的内壁面61通过开口62的第1边缘E1向生物组织60的外部延伸的直线，第2直线L2为从生物组织60的内壁面61通过开口62的第2边缘E2向生物组织60的外部延伸的直线。第1直线L1与生物组织60的内壁面61的交点和第2直线L2与生物组织60的内壁面61的交点为同一点Pt。因此，在区域AF的任意位置配置假想的相机71，用户都能够观察到生物组织60的内壁面61的点Pt。图5的示例中，点Pt与第4直线L4和生物组织60的内壁面61的交点为同一点，第4直线L4是从将开口62的第1边缘E1和开口62的第2边缘E2连结的第3直线L3的中点Pc相对于第3直线L3垂直引出的直线。因此，用户容易开口62观察生物组织60的内壁面61的点Pt。特别是若在第4直线L4的延长线上配置假想的相机71后，用户更容易观察生物组织60的内壁面61的点Pt。假想的相机71的位置可以是通过开口62能够观察到生物组织60的内壁面61的任意的位置，但在本实施方式中，为与开口62相对的范围内。假想的相机71的位置优选设定于与开口62中央部相对的中间位置。图6的示例中，针对以画面80和三维图像53的中心重叠的方式显示于画面80的三维图像53的中心到一端的距离Un相对于显示器16的画面80的中心到一端的距离Um的比率S，设定了最小值Smin和最大值Smax。例如，设定为Smin＝1/3、Smax＝1。图5的示例中，可以根据最小值Smin设定点Pt到相机71的位置的最小距离Lmin，可以根据最大值Smax设定点Pt到假想的相机71的位置的最大距离Lmax。或者，可以与最小值Smin无关地将点Pt到相机71的位置的最小距离Lmin设定为相机71与开口62相比不靠近点Pt的距离。也可以与最大值Smax无关地将点Pt到假想的相机71的位置的最大距离Lmax设定为相机71远离点Pt不到用户不能观察到生物组织60的内壁面61程度的距离。步骤S9中，若有断层数据51的更新，则再次进行步骤S1以后的处理。若没有断层数据51的更新，则在步骤S4中，再次确认用户操作的有无。第二次以后的步骤S5至步骤S8中，诊断支援装置11的控制部41在开口62的位置从第1位置改变为第2位置的情况下，使视点从相应于第1位置的第3位置移动到相应于第2位置的第4位置。控制部41使在显示器16显示三维图像53时的假想的光源72配合视点从第3位置向第4位置的移动而移动。控制部41在生物组织60的断面中改变开口62的周向位置的情况下，用假想的相机71的移动所使用的旋转矩阵，使假想的光源72移动。控制部41在开口62的位置从第1位置改变为第2位置的情况下，也可以使视点从第3位置瞬间切换至第4位置，但本实施方式中，将视点从第3位置向第4位置缓慢移动的动态图像作为三维图像53在显示器16显示。因此，更便于向用户传达视点的移动。作为本实施方式的一变形例，步骤S5中，诊断支援装置11的控制部41在接受设定开口62的位置的操作的同时，也可以经由输入部44接受用户设定想看的目标点的位置的操作。具体而言，诊断支援装置11的控制部41也可以在显示器16显示的三维图像53中，经由输入部44接受用户使用键盘14、鼠标15或与显示器16一体设置的触摸屏来指定目标点位置的操作。图5的示例中，控制部41也可以经由输入部44接受如下操作：设定点Pt的位置来作为第1直线L1及第2直线L2和生物组织60的内壁面61的交点的位置。作为本实施方式的一变形例，步骤S5中，诊断支援装置11的控制部41可以经由输入部44接受用户设定想看的目标点的位置的操作，以代替设定开口62的位置的操作。然后，步骤S6中，控制部41可以根据步骤S5中由接受的操作而被设定的位置来确定开口62的位置。具体而言，诊断支援装置11的控制部41也可以在显示器16显示的三维图像53中，经由输入部44接受用户使用键盘14、鼠标15或与显示器16一体设置的触摸屏来指定目标点位置的操作。然后，控制部41可以根据目标点的位置确定开口62的位置。图5的示例中，控制部41也可以经由输入部44接受如下操作：设定点Pt的位置来作为第1直线L1及第2直线L2和生物组织60的内壁面61的交点的位置。控制部41可以在生物组织60的断面中，将以点Pt为中心预先设定中心角、或者根据用户指定的角度α的扇形区域，确定为区域AF。控制部41可以将生物组织60的与区域AF重叠的位置确定为开口62的位置。控制部41可以将生物组织60的内壁面61的与通过点Pt的切线垂直的法线确定为第4直线L4。区域AF可以设定为窄于开口62的宽度。换言之，区域AF可以设定为不包含开口62的第1边缘E1和开口62的第2边缘E2中的至少任意一者。作为本实施方式的一变形例，第1直线L1和生物组织60的内壁面61的交点与第2直线L2和生物组织60的内壁面61的交点也可以不是同一点。例如，第1直线L1和生物组织60的内壁面61的交点即点P1及第2直线L2和生物组织60的内壁面61的交点即点P2，可以位于以点Pt为中心的半径r的圆周上。即，点P1及点P2到点Pt的距离可以大致相等。参见图7，详细说明在导管63被插入生物组织60的情况下在步骤S2中进行的处理。步骤S201中，诊断支援装置11的控制部41对在步骤S1中取得的断层数据51中包含的断面图像内的生物组织60及导管63进行检测。具体而言，诊断支援装置11的控制部41将在步骤S1中取得的断层数据51中包含的断面图像的多个像素分类为两个以上的类型。这两个以上的类型中，至少包含生物组织60的类型和导管63的类型，也可以进一步包含血细胞的类型、导丝等、导管63以外的医疗器具的类型、支架等留置物的类型或石灰、斑块等病变的类型。作为分类方法可以使用任意的方法，但本实施方式中，使用学得模型将断面图像的多个像素组分类的方法。学得模型通过事前进行机械学习而被训练，以使得能够从作为样本的IVUS的断面图像中检测出与各类型相当的区域。图8的示例中，控制部41将断层数据51中包含的断面图像的各像素二值化，若像素值与生物组织60的类型相当，则为1，否则为0。控制部41对二值化的断面图像进行降采样，在生物组织60的长轴方向上，将得到的二维图像的各像素设定在该二维图像所对应的位置的体素中。作为本实施方式的一变形例，控制部41也可以通过提取断面图像内的边缘，来检测生物组织60。步骤S202中，诊断支援装置11的控制部41通过测量在步骤S201中检测出的生物组织60和导管63的前端之间的距离，判断生物组织60和导管63的前端是否接触。具体而言，诊断支援装置11的控制部41列出步骤S201中检测出的导管63，并作成导管列表。控制部41按导管列表的每个条目中对导管63的前端进行检测。若步骤S201中只检测出1根导管63，则导管列表的条目数量为一个。控制部41列出检测出的导管63的前端，并作成导管前端列表。控制部41按导管前端列表的每个条目中特定生物组织60的内壁面61中与导管63的前端最近的位置。控制部41算出导管63的前端和特定位置之间的距离。若算出的距离小于第1阈值，则控制部41判定生物组织60和导管63的前端接触。若算出的距离大于第1阈值，则控制部41判定生物组织60和导管63的前端未接触。步骤S202中判定生物组织60和导管63的前端接触的情况下，步骤S203中，诊断支援装置11的控制部41将在步骤S201中检测出的生物组织60和导管63的前端之间的距离小于一定值的生物组织60的范围特定为接触部64。控制部41在步骤S3中显示的三维图像53中，将与接触部64对应的体素组的颜色设定为既定颜色。具体而言，诊断支援装置11的控制部41按在步骤S202中作成的导管前端列表的每个条目，将在生物组织60的内壁面61中到达导管63的前端的距离小于第2阈值的范围特定为接触部64。控制部41在步骤S3中显示的三维图像53中，将与接触部64对应的体素组的颜色设定为红色。步骤S202中被判定为生物组织60和导管63的前端未接触的情况下，步骤S203的处理被跳过。作为本实施方式的一变形例，诊断支援装置11的控制部41可以根据三维数据52中的、从导管63的前端63d到生物组织60各点的距离，调整三维图像53的各体素的颜色中包含既定颜色要素的比率。即，在三维图像53中，也可以对生物组织60进行以导管63和生物组织60接触的位置为中心的分层着色。此变形例中，如图9所示，控制部41算出导管63的前端63d和生物组织60的内壁面61的各点Pn之间的距离Dist。需要说明的是，在图9中，为了便于理解，示出了二维的网格，但原本是使用三维的网格进行处理。设GD为距导管63的前端63d的规定距离、CF为接触系数时，控制部41通过下述的计算，算出包含生物组织60的内壁面61的各体素的接触系数。CF＝1-clamp此处，clamp为clamp函数。越是接触系数接近1的体素，说明接近导管63的前端63d，越是接触系数接近于0的体素，说明远离导管63的前端63d。距导管63的前端63d的距离为GD以上的体素的接触系数为0。位于接触部64中心的体素的接触系数为1。设VP为可视体素信息、ColorCP为VP的颜色、ColorPd为既定颜色、ColorLT为生物组织60的颜色时，控制部41通过下述的计算，设定三维图像53的各体素的颜色。ColorCP＝CF×ColorPd+×ColorLT此处，“可视体素信息”指三维数据52中存在生物组织60的体素信息。ColorCP、ColorPd、及ColorLT为RGB值。ColorPd为例如红色。ColorLT也可以是ColorPd以外的颜色。ColorLT可以是单一颜色，或也可以是与距基准点、基准线或基准面的距离相应的颜色。基准点、基准线及基准面可以配置在任意位置，但优选根据开口62的位置进行配置。图5的示例中，控制部41可以在生物组织60的断面中，穿过在通过在显示器16显示三维图像53时的视点即假想的相机71的位置、和将开口62的第1边缘E1与开口62的第2边缘E2连结的第3直线L3的中点Pc的直线上，配置基准点。因此，左右方向上的视点、基准点及中点Pc的位置对齐，用户通过开口62观察生物组织60的内壁面61时，容易根据三维图像53的色调的不同而把握凹凸及深度。特别是若将基准点在配置第4直线L4上，则用户容易把握生物组织60的内壁面61的点Pt及点Pt周围的凹凸和深度。需要说明的是，ColorCP由上述式决定，因此在三维图像53中，与导管63的前端63d的距离为GD以上的部位的生物组织60的颜色和ColorLT一致。此外，在图9中，为了便于理解，示出了导管63的前端63d、生物组织60的内壁面61的各点Pn及生物组织60的接触部64的外沿，相当位置的网格被填满。使用上述式算出ColorCP后，以63d示出的网格为中心，向64示出的各网格进行放射状的分层着色。控制部41可以算出三维数据52中的从导管63的前端63d到生物组织60的包含接触点Pi的一定范围内的各点的距离，以代替算出三维数据52中的从导管63的前端63d到生物组织60的所有点的距离。此情况下，控制部41根据算出的距离，调整三维图像53中与该范围对应的体素组的各体素的颜色中包含既定颜色要素的比率。作为一示例，控制部41可以在特定接触点Pi后，特定位于某一定范围内的计算区域，仅在此计算区域中，算出导管63的前端63d与生物组织60的内壁面61的各点Pn之间的距离。根据此示例，因为不用针对全体素计算距离Dist，所以处理更快。也可以将接触部64看做“一定范围”。即，在三维图像53中，也可以仅对与接触部64对应的体素组进行分层着色。作为本实施方式的一变形例，如图10所示，控制部41也可以在接受表示通过生物组织60的包含接触点Pi的部分区域被作为导管63的消融导管烧灼的烧灼数据的输入时，将该区域特定为烧灼区域65。然后，控制部41可以在步骤S3中显示的三维图像53中，将与烧灼区域65对应的体素组的颜色设定为与既定颜色不同的颜色。“与既定颜色不同的颜色”在此变形例中为橙色，但只要是能够将与烧灼区域65对应的体素组、与接触部64对应的体素组及其他体素组进行区别的颜色即可。图10的示例中，烧灼数据被多次输入。因此，与烧灼区域65对应的体素组同样，其他烧灼区域65a、65b对应的体素组的颜色也被设定为橙色。参见图11，在此变形例中，详细说明在消融导管被插入生物组织60、实施消融手术的情况下在步骤S2中进行的处理。针对步骤S211至步骤S213的处理，与图7的步骤S201至步骤S203的处理相同，因此省略说明。步骤S214中输入了烧灼数据的情况下，诊断支援装置11的控制部41使包含接触部64中心的烧灼区域65的色调变化。烧灼区域65的大小，可以与接触部64相同，也可以稍大或稍小。作为接受烧灼数据的输入的方法，可以使用任意方法，此变形例中使用如下方法：在生物组织60和导管63的前端接触时，经由输入部44接受施术者点击相应图标的操作，或按下相应快捷键的操作等输入操作。或者可以使用如下方法：在生物组织60和导管63的前端接触时，经由通信部43从对控制消融导管的能量施加或电压施加的机器取得施加信息。步骤S214中，未被输入烧灼数据的情况下，步骤S215的处理被跳过。如上所述，本实施方式中，诊断支援装置11的控制部41基于被插入了导管63的生物组织60的断层数据51生成生物组织60的三维数据52。控制部41将生成的三维数据52作为三维图像53在显示器16显示。控制部41在三维数据52中，将生物组织60的与导管63的前端接触的点特定为接触点Pi。控制部41在三维图像53中，将与接触点Pi对应的体素的颜色设定为既定颜色。根据本实施方式，在三维图像53中，便于确认导管63和生物组织60是否接触。例如，若用户为实施消融手术的施术者，便于确认消融导管和心腔内的组织是否接触，因此便于实施消融手术。本实施方式中，导管63和生物组织60壁接触的情况下，通过改变接触部64的颜色，可以在三维空间中显示导管63和生物组织60壁发生了接触。本实施方式中，确定了开口62的位置后，移动相机71及光源72的位置以使得能够从开口62窥视生物组织60的内部。因此，能够避免将开口62的位置改变为其他位置时变得只能看见生物组织60的外壁面、无法确认感兴趣的对象这一事态的发生。本发明不限于所述的实施方式。例如，可以将框图中记载的多个框集成，或可以将一个框分割。可以取代按照描述以时间序列执行基于流程图中记载的多个步骤，而根据执行各步骤的装置的处理能力或根据需要，并行地或以不同的顺序进行执行。另外，在不脱离本发明的宗旨的情况下可以进行变更。附图标记说明10 诊断支援系统11 诊断支援装置12 电缆13 驱动单元14 键盘15 鼠标16 显示器17 连接端子18 车单元20 探针21 驱动轴22 毂部23 鞘层24 外管25 超声波振子26 中继连接器31 扫描单元32 滑动单元33 底盖34 探针连接部35 扫描电动机36 插入口37 探针夹部38 滑动电动机39 开关组41 控制部42 存储部43 通信部44 输入部45 输出部51 断层数据52 三维数据53 三维图像60 生物组织61 内壁面62 开口63 导管63d 前端64 接触部65 烧灼区域65a 烧灼区域65b 烧灼区域71 相机72 光源80 画面
