标题title
一种基于图像和点云数据处理的采茶方法
摘要abst
本发明公开了一种基于图像和点云数据处理的采茶方法，涉及茶叶采摘技术领域。本发明的一种基于图像和点云数据处理的采茶方法，包括以下步骤：利用热像仪拍摄得到割刀和茶树树冠的热力图像，同时利用激光雷达扫描得到割刀和茶树树冠的点云信息，根据热力图像选取感兴趣区域S，计算得到感兴趣区域S内的嫩芽数量n；拟合得到茶树树冠的曲线，计算得到割刀和茶树树冠之间的距离d2；根据n以及d2进行判断，再对割刀位置进行调整，最后进行切割。本发明公开了一种基于图像和点云数据处理的采茶方法，通过热像仪和激光雷达对茶树树冠信息进行处理，同时调整割刀和茶树树冠之间的相对位置，从而能够有效的提高茶叶采摘的精度。
权利要求书clms
1.一种基于图像和点云数据处理的采茶方法，其特征在于，包括以下步骤：S1：利用热像仪拍摄得到割刀和茶树树冠的热力图像，同时利用激光雷达扫描得到割刀和茶树树冠的点云信息；S2：根据拍摄得到的茶树树冠的热力图像中选取感兴趣区域S，同时计算得到感兴趣区域S内的嫩芽数量n；S3：根据得到割刀和茶树树冠的点云信息，分别拟合得到茶树树冠的曲线，计算得到割刀和茶树树冠之间的距离d2；S4：根据嫩芽数量n以及割刀和茶树树冠之间的距离d2进行判断，再对割刀位置进行调整，最后进行切割。2.根据权利要求1所述的一种基于图像和点云数据处理的采茶方法，其特征在于，所述感兴趣区域S为矩形区域，位于割刀的正前方，宽度与割刀长度相同，所述感兴趣区域S的底部直线为割刀在茶树上的投影，前端直线和底部直线之间的距离为d1。3.根据权利要求2所述的一种基于图像和点云数据处理的采茶方法，其特征在于，所述S2步骤中嫩芽数量利用深度学习中的目标检测算法YOLO-V5进行检测。4.根据权利要求3所述的一种基于图像和点云数据处理的采茶方法，其特征在于，所述S4步骤中，当割刀位于茶树树冠上方时，d2为正值，且距离越远，值越大，当割刀位于茶树树冠上方时，d2为负值，且距离越远，值越小。5.根据权利要求1-4任一权利要求所述的一种基于图像和点云数据处理的采茶方法，其特征在于，所述S4步骤的具体判断标准为：若n＜n1且d2＞0，则表示感兴趣区域S内嫩芽的数量n过低，且此时割刀在嫩芽上部，此时不需要切割，割刀位置无需调整。若n＜n1且d2＜0，则表示感兴趣区域S内嫩芽的数量n过低，且此时割刀在嫩芽下部，割刀位置偏低，此时不需要切割，需上移调整。若n＞n1且d2＜-r，则表示感兴趣区域S内嫩芽的数量n足够，且此时割刀在嫩芽下部，但此时割刀位置过低，此时需要切割，割刀位置需向上移动。若n＞n1且-r＜d2＜0，则表示感兴趣区域S内嫩芽的数量n足够，且此时割刀在嫩芽下部，割刀位置合适，此时需要切割，割刀位置无需调整。若n＞n1且d2＞0，则表示感兴趣区域S内嫩芽的数量n足够，且此时割刀在嫩芽上部，割刀位置过高，此时需要切割，割刀位置需向下调整；其中，r为割刀切割时相对茶树嫩芽的理论差，n1是初始设定的嫩芽数量。
说明书desc
技术领域本发明涉及茶叶采摘技术领域，尤其涉及一种基于图像和点云数据处理的采茶方法。背景技术我国是名副其实的茶叶种植和生产大国，2020年，全国干毛茶产量和产值分别达到298.60万吨和2626.58亿元，然而传统的茶叶生产多以家庭为单位，从茶叶的采摘到加工均以手工为主，属于劳动密集型产业。从茶叶采摘角度看，一方面由于人力采摘的成本高，增加了茶叶的生产成本；另一方面由于茶叶的采摘时间短，而人力采摘的效率较低，严重限制了茶叶的产量。目前，我国茶叶采摘和用工的矛盾已经成为茶叶产业发展的瓶颈，因此很多科技人员开始研究自动采茶装置来解决上述问题。现有的采茶机按采摘方式不同可分为选择性采茶机和非选择性采摘机两类。其中，选择性采茶机主要用于名优茶的采摘，非选择性采摘机主要用于大宗茶的采摘。当今推广使用的采茶机大多都是针对大宗茶采摘鲜叶而生产的，其利用机械动力带动刀片运动，快速剪切并收集茶叶。这类采茶机具有采摘效率高，能降低劳动力成本和劳动强度，一定程度上缓解了采茶人工不足的矛盾。采茶机虽能提高采摘效率，但其缺乏选择性，工作时不分老嫩，一刀切下，使得芽叶大小不一，完整性较差，而且对茶树的机械性损伤较大，同时采摘叶老嫩混杂，老梗老叶和破损叶片含量较高，一定程度上影响了采茶机的推广使用，自动化智能化的茶叶采摘机械是茶叶行业的迫切需求，为了提高新梢采摘的完整性和一致性，提高茶叶整体质量，发展出使用图像识别，对嫩芽进行选择然后进行采摘的，但是由于茶树老叶和嫩叶交互重叠，茶叶色差小，仅采用图像识别的方式依然不能解决采摘精度的问题。发明内容针对上述问题，本发明的目的在于公开一种基于图像和点云数据处理的采茶方法，通过热像仪和激光雷达对茶树树冠信息进行处理，同时调整割刀和茶树树冠之间的相对位置，从而能够有效的提高茶叶采摘的精度。具体的，本发明的一种基于图像和点云数据处理的采茶方法，包括以下步骤：S1：利用热像仪拍摄得到割刀和茶树树冠的热力图像，同时利用激光雷达扫描得到割刀和茶树树冠的点云信息；S2：根据拍摄得到的茶树树冠的热力图像中选取感兴趣区域S，同时计算得到感兴趣区域S内的嫩芽数量n；S3：根据得到割刀和茶树树冠的点云信息，分别拟合得到茶树树冠的曲线，计算得到割刀和茶树树冠之间的距离d2；S4：根据嫩芽数量n以及割刀和茶树树冠之间的距离d2进行判断，再对割刀位置进行调整，最后进行切割。进一步，所述感兴趣区域S为矩形区域，位于割刀的正前方，宽度与割刀长度相同，所述感兴趣区域S的底部直线为割刀在茶树上的投影，前端直线和底部直线之间的距离为d1。进一步，所述S2步骤中嫩芽数量利用深度学习中的目标检测算法YOLO-V5进行检测。进一步，所述S4步骤中，当割刀位于茶树树冠上方时，d2为正值，且距离越远，值越大，当割刀位于茶树树冠上方时，d2为负值，且距离越远，值越小。进一步，所述S4步骤的具体判断标准为：若n＜n1且d2＞0，则表示感兴趣区域S内嫩芽的数量n过低，且此时割刀在嫩芽上部，此时不需要切割，割刀位置无需调整。若n＜n1且d2＜0，则表示感兴趣区域S内嫩芽的数量n过低，且此时割刀在嫩芽下部，割刀位置偏低，此时不需要切割，需上移调整。若n＞n1且d2＜-r，则表示感兴趣区域S内嫩芽的数量n足够，且此时割刀在嫩芽下部，但此时割刀位置过低，此时需要切割，割刀位置需向上移动。若n＞n1且-r＜d2＜0，则表示感兴趣区域S内嫩芽的数量n足够，且此时割刀在嫩芽下部，割刀位置合适，此时需要切割，割刀位置无需调整。若n＞n1且d2＞0，则表示感兴趣区域S内嫩芽的数量n足够，且此时割刀在嫩芽上部，割刀位置过高，此时需要切割，割刀位置需向下调整；其中，r为割刀切割时相对茶树嫩芽的理论差，n1是初始设定的嫩芽数量。本发明的有益效果：1)、本发明公开了一种基于图像和点云数据处理的采茶方法，解决了割刀位置与角度的自动控制问题，降低了乘坐式采茶机对茶园地形和茶冠平整度的要求，拓宽了采茶机的应用范围。2)、减少因乘坐人员长时间疲劳作业引起的割刀位置控制失误问题，保证采摘的效率和质量。附图说明图1是本发明采茶机的结构示意图；图2是采茶机支撑平台的仰视图；图3是图2中A-A方向的剖视图；图4为切割时状态的示意图；其中，移动底座1、机架2、支撑平台3、基座31、支撑板32、支耳33、移动滚轮34、滚珠丝杠4、滚轮滑轨5、凹槽51、轴承座6、转动电机7、直流推杆电机8、激光雷达传感器9、热像仪10、割刀11。具体实施方式以下将结合具体实施例对本发明进行详细说明：实施例本发明的一种基于图像和点云数据处理的采茶方法，利用热成像仪和激光雷达辅助对茶叶进行采摘，能够有效提高茶叶采摘的精度，可以采用如图1所示的采茶机进行实现，包括移动底座1以及安装在移动底座1上的机架2，机架2上固定安装有一个采茶机构，采茶机构包括滑轨单元以及滑动安装在滑轨单元上的支撑平台3，滑轨单元包括平行设置的滚珠丝杠4和滚轮滑轨5，支撑平台3包括固定连接的基座31和支撑板32，滚珠丝杠4和滚轮滑轨5穿射在基座31内，滚珠丝杠4的一端通过轴承座6固定安装在机架2上，另一端固定连接有转动电机7，转动电机7固定安装在机架2上，滚轮滑轨5的两端均通过轴承座6固定安装在机架2上，滚轮滑轨5上开设有开口向上的凹槽51，支撑板32上于凹槽51对应的位置固定安装两个对称设置的支耳33，两个支耳33之间安装有移动滚轮34，移动滚轮34位于凹槽51内，且与凹槽51底部相接触，滚珠丝杠4和滚轮滑轨5的结构设置使得支撑平台3能够更平稳的运行，在使用的时候，利用转动电机7带动滚珠丝杠4进行转动，滚珠丝杠4驱动支撑平台3进行水平的移动，以此调节切割单元的位置，而凹槽51和移动滚轮34的设置则减小了基座31和滑轨单元之间的摩擦力，在移动的过程中，操作更平稳，响应更快，有利于能耗的降低。支撑平台3上铰接安装有两台直流推杆电机8，两台直流推杆电机8对称设置在支撑平台3上，支撑平台3上于两台直流推杆电机8中间的位置还固定安装有激光雷达传感器9和热像仪10，本发明的采茶机还包括PLC控制器，激光雷达传感器9、热像仪10和PLC控制器的信号输入端信号连接，PLC控制器的信号输出端和直流推杆电机信号连接，从而在一定程度上保证切割的高效进行，直流推杆电机8推杆的自由端上铰接固定安装有割刀11。利用上述采茶机进行茶叶采摘，具体步骤为：S1：利用移动底座将采茶机移动到一垄茶树的端部，使得割刀与茶树上方的树冠位置相对应，支撑平台移动到位于割刀与一垄茶树的端部对齐的状态，位于割刀上方的直流推杆电机的推杆均伸长，使得割刀降低高度到靠近且不接触茶树的状态，利用热像仪拍摄得到割刀和茶树树冠的热力图像，同时利用激光雷达扫描得到割刀和茶树树冠的点云信息；S2：根据拍摄得到的茶树树冠的热力图像中选取感兴趣区域S，感兴趣区域S为矩形区域，位于割刀的正前方，宽度与割刀长度相同，感兴趣区域S的底部直线为割刀在茶树上的投影，前端直线和底部直线之间的距离为d1，同时利用深度学习中的目标检测算法YOLO-V5进行检测计算得到感兴趣区域S内的嫩芽数量n；S3：根据得到割刀和茶树树冠的点云信息，分别拟合得到茶树树冠的曲线方程，并计算得到割刀和茶树树冠之间的距离d2，当割刀位于茶树树冠上方时，d2为正值，且距离越远，值越大，当割刀位于茶树树冠上方时，d2为负值，且距离越远，值越小；S4：根据嫩芽数量n以及割刀和茶树树冠之间的距离d2进行判断，若n＜n1且d2＞0，则表示感兴趣区域S内嫩芽的数量n过低，且此时割刀在嫩芽上部，此时不需要切割，割刀位置无需调整。若n＜n1且d2＜0，则表示感兴趣区域S内嫩芽的数量n过低，且此时割刀在嫩芽下部，割刀位置偏低，此时不需要切割，需上移调整。若n＞n1且d2＜-r，则表示感兴趣区域S内嫩芽的数量n足够，且此时割刀在嫩芽下部，但此时割刀位置过低，此时需要切割，割刀位置需向上移动。若n＞n1且-r＜d2＜0，则表示感兴趣区域S内嫩芽的数量n足够，且此时割刀在嫩芽下部，割刀位置合适，此时需要切割，割刀位置无需调整。若n＞n1且d2＞0，则表示感兴趣区域S内嫩芽的数量n足够，且此时割刀在嫩芽上部，割刀位置过高，此时需要切割，割刀位置需向下调整；其中，r为割刀切割时相对茶树嫩芽的理论差，n1是初始设定的嫩芽数量对割刀位置进行调整到适宜位置后，进行切割，S5：利用移动底座使得采茶机沿着茶垄行进，通过割刀持续对茶叶进行切割，切割过程中热线仪和激光雷达持续对茶树树冠的热力图像以及割刀和茶树树冠的点云数据进行检测，利用PLC控制器进行处理，使得计算到的n和d2分别保持在n＜n1，且|d2|＜r的范围内。以上实施例仅用以说明本发明的技术方案而非限制，尽管参照较佳实施例对本发明进行了详细说明，本领域的普通技术人员应当理解，可以对本发明的技术方案进行修改或者等同替换，而不脱离本发明技术方案的宗旨和范围，其均应涵盖在本发明的权利要求范围当中。本发明未详细描述的技术、形状、构造部分均为公知技术。
