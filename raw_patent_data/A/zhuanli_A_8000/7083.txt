标题title
一种上下肢主被动康复游戏化训练的方法
摘要abst
本发明公开了一种上下肢主被动康复游戏化训练的方法，基于左右侧力量差值进行转向控制，包括偏瘫非对称力量动态补偿单元、动态转向门限控制单元和自动回中线转向单元；偏瘫非对称力量动态补偿单元，对患者操作游戏装置时的左右侧实际力量值进行实时监测，对偏瘫侧进行力量补偿；动态转向门限控制单元，基于左右侧实际力量最大值动态调整转向门限，当左右侧补偿后力量差值超过转向门限时，游戏装置发生偏离中线的转弯；自动回中线转向单元，对游戏装置偏离中线的距离进行实时监测，当偏离距离达到设定值时，游戏装置自动回到中线。本发明将枯燥乏味的单调训练变成主动参与的游戏化互动训练，提高患者的主动训练意识，最终有效增强训练效果。
权利要求书clms
1.一种上下肢主被动康复游戏化训练的方法，基于左右侧力量差值进行转向控制以激发偏瘫侧动作的游戏装置，其特征在于：包括偏瘫非对称力量动态补偿单元、动态转向门限控制单元和自动回中线转向单元；所述偏瘫非对称力量动态补偿单元，对患者操作游戏装置时的左右侧实际力量值进行实时监测，对偏瘫侧进行力量补偿；所述动态转向门限控制单元，基于左右侧实际力量最大值动态调整转向门限，当左右侧补偿后力量差值超过转向门限时，游戏装置发生偏离中线的转弯；所述自动回中线转向单元，对游戏装置偏离中线的距离进行实时监测，当偏离距离达到设定值时，游戏装置自动回到中线。2.根据权利要求1所述的上下肢主被动康复游戏化训练的方法，其特征在于：所述偏瘫非对称力量动态补偿单元对偏瘫侧进行力量补偿的过程如下：通过力量传感器实时监测患者操作游戏装置时的左右侧实际力量值，设第i对左右侧实际力量值分别为fli、fri；设计长度为N的滑动窗口，按照滑动窗口机制，取滑动窗口内的N对左右侧力量值计算左右侧实际力量最大值Flmax、Frmax为：Flmax＝max)Frmax＝max)计算左右力量比例PN＝Flmax/Frmax：若PN≥1，表示右侧为偏瘫侧，需要进行力量补偿；否则，左侧为偏瘫侧，需要力量补偿；根据当前时刻前N对左右侧实际力量值计算当前时刻左右侧补偿后力量值Fleft、Fright如下：若PN≥1：Fleft＝flN，Fright＝frN×PN；若PN＜1：Fleft＝flN/PN，Fright＝frN。3.根据权利要求1所述的上下肢主被动康复游戏化训练的方法，其特征在于：所述动态转向门限控制单元，根据当前时刻前N对左右侧实际力量值计算当前时刻的转向门限FT为：FT＝q×max其中：q为配置参数，0＜q≤1。4.根据权利要求1所述的上下肢主被动康复游戏化训练的方法，其特征在于：所述自动回中线转向单元的实施过程如下：游戏装置在中线运行，系统实时监测左右侧补偿后力量值Fleft、Fright，进入步骤；对左右侧补偿后力量差值进行计算：①当|Fleft-Fright|≤FT时，游戏装置继续在中线运行，返回步骤；②当|Fleft-Fright|＞FT时，计算游戏装置偏离中线的距离L＝Fdiff×k；其中k为配置参数，Fdiff＝|Fleft-Fright|；进入步骤；若Fleft＞Fright，进行左转向直到距离中线的垂直距离为L，进入步骤；若Fleft＜Fright，进行右转向直到距离中线的垂直距离为L，进入步骤；游戏装置回到中线，返回步骤。5.根据权利要求1所述的上下肢主被动康复游戏化训练的方法，其特征在于：还包括转向操作技能评估单元，所述转向操作技能评估单元，设定要求患者完成转向时的埋点事件，根据患者完成转向时的埋点事件，判定患者是否转向成功，并根据连续的M次转向埋点事件情况评价患者的转向技能等级。6.根据权利要求5所述的上下肢主被动康复游戏化训练的方法，其特征在于：所述转向操作技能评估单元中，根据患者完成连续的M次转向时的埋点事件情况，对患者的转向技能等级SM进行计算；设第m次埋点事件的完成结果为rm，转向成功时埋点事件记为rm＝1，否则记为rm＝0；m＝0,1,…,M-1；计算转向技能等级SM为：其中：ρ为最高转向技能等级，表示对取整；对患者完成连续的M次转向时的埋点事件的情况进行评价，得到SM＝R1；患者完成新的连续的M次转向时埋点事件的情况进行评价，得到SM＝R2：若R2＞R1，则更新患者的转向技能等级为SM＝R2；否则，SM＝R1。7.根据权利要求1所述的上下肢主被动康复游戏化训练的方法，其特征在于：根据患者的转向技能等级对当前时刻的转向门限FT进行优化，转向门限优化值为FT'＝λ×，λ为配置参数；在自动回中线转向单元使用转向门限优化值FT'进行控制。
说明书desc
技术领域本发明涉及一种上下肢主被动康复游戏化训练的方法，是一种基于左右力量差值的主被动康复对称性训练的个性化游戏化方法，属于医疗康复训练技术。背景技术上下肢肢体康复训练设备是通过电机驱动带动存在运动功能障碍的四肢进行持续、重复地圆周、屈伸运动训练，以提高用户肢体肌肉力量、关节活动度及心肺功能等目的的一款康复训练设备。通过基于对比双侧用力的游戏化对称性训练是其重要的训练方式，以游戏的方式将枯燥乏味的单调往复训练变得有趣，提高患者训练的积极性和主动性。上下肢主被动康复训练设备通常提供实时动态游戏，如模拟自行车骑行的3D游戏。为提高游戏趣味，应提供和真实世界骑自行车同样的体验，其中很重要的转向功能需要检测患者在双侧手柄或者脚蹬的受力，根据受力的差异来计算转向的方向和幅度。如果患者左右侧状态良好，能够自由控制左右侧的用力大小，容易控制方向，则可以得到良好的体验。但是对于偏瘫患者，患侧力量大幅低于健侧力量，如果按照实际的力量差值来进行方向和转向幅度的计算，将造成患者在游戏中转向始终偏向一侧，严重影响体验，要改善此不足，必须采取针对性措施。同时不同身体状态的患者，其力量值也各不相同，如果用相同转向门限值来判断是否转向，将造成身体状态好的患者感觉转向太灵敏，而身体状态差的患者又感觉转向困难。两种情况都会严重影响患者的游戏体验，给患者带来挫败感，降低患者训练积极性，影响康复训练效果。因此需要对不同患者使用个性化的动态门限。对于脑卒中患者，控制肢体的能力较差，容易造成转向失控，或者始终在路的一侧行驶，或者左右来回转向，严重影响体验，也需要针对这类患者的采取方法提升体验。转向作为上下肢主被动康复训练游戏玩家的核心游戏技能，需要进行有效的评估，以随之针对性地提高游戏关卡或者任务的难度，提高对于患者的挑战。并根据评估的转向技能调整转向的动态门限，进而实现转向难度的个性化调整鉴于以上方面，需要采取相应的游戏设计方法进行优化，以提升上下肢主被动康复对称性游戏化训练的体验。发明内容发明目的：为了克服现有技术中存在的不足，本发明提供一种上下肢主被动康复游戏化训练的方法，是基于左右力量差值的主被动康复对称性训练的方法，以提升上下肢主被动康复对称性游戏化训练的体验。技术方案：为实现上述目的，本发明采用的技术方案为：一种上下肢主被动康复游戏化训练的方法，基于左右侧力量差值进行转向控制以激发偏瘫侧动作的游戏装置；包括偏瘫非对称力量动态补偿单元、动态转向门限控制单元和自动回中线转向单元；所述偏瘫非对称力量动态补偿单元，对患者操作游戏装置时的左右侧实际力量值进行实时监测，对偏瘫侧进行力量补偿；所述动态转向门限控制单元，基于左右侧实际力量最大值动态调整转向门限，当左右侧补偿后力量差值超过转向门限时，游戏装置发生偏离中线的转弯；所述自动回中线转向单元，对游戏装置偏离中线的距离进行实时监测，当偏离距离达到设定值时，游戏装置自动回到中线。偏瘫患者的健侧与患侧力量大小不一致，如果按照真实的左右力量进行转向判断，游戏中的虚拟角色将一直偏向健侧，不能进行正常游戏，因此需要对力量弱的患侧进行力量补偿，以平衡双侧用力，保证正常游戏；具体的，所述偏瘫非对称力量动态补偿单元对偏瘫侧进行力量补偿的过程如下：通过力量传感器实时监测患者操作游戏装置时的左右侧实际力量值，设第i对左右侧实际力量值分别为fli、fri；设计长度为N的滑动窗口，按照滑动窗口机制，取滑动窗口内的N对左右侧力量值计算左右侧实际力量最大值Flmax、Frmax为：Flmax＝max)Frmax＝max)计算左右力量比例PN＝Flmax/Frmax：若PN≥1，表示右侧为偏瘫侧，需要进行力量补偿；否则，左侧为偏瘫侧，需要力量补偿；根据当前时刻前N对左右侧实际力量值计算当前时刻左右侧补偿后力量值Fleft、Fright如下：若PN≥1：Fleft＝flN，Fright＝frN×PN；若PN＜1：Fleft＝flN/PN，Fright＝frN。具体的，所述动态转向门限控制单元，根据当前时刻前N对左右侧实际力量值计算当前时刻的转向门限FT为：FT＝q×max其中：q为配置参数，0＜q≤1。为降低患者控制转向的难度，采用自动回到中线的行进方向控制操作方式，避免患者控制方向的不熟练，影响体验；具体的，所述自动回中线转向单元的实施过程如下：游戏装置在中线运行，系统实时监测左右侧补偿后力量值Fleft、Fright，进入步骤；对左右侧补偿后力量差值进行计算：①当|Fleft-Fright|≤FT时，游戏装置继续在中线运行，返回步骤；②当|Fleft-Fright|＞FT时，计算游戏装置偏离中线的距离L＝Fdiff×k；其中k为配置参数，Fdiff＝|Fleft-Fright|；进入步骤；若Fleft＞Fright，进行左转向直到距离中线的垂直距离为L，进入步骤；若Fleft＜Fright，进行右转向直到距离中线的垂直距离为L，进入步骤；游戏装置回到中线，返回步骤。具体的，还包括转向操作技能评估单元，所述转向操作技能评估单元，设定要求患者完成转向时的埋点事件，根据患者完成转向时的埋点事件，判定患者是否转向成功，并根据连续的M次转向埋点事件情况评价患者的转向技能等级。具体的，所述转向操作技能评估单元中，中线转向事件的格式定义如下：所转方向，左边力量值，右边力量值，转向门限值，道具位置；其中：道具位置是道具相对于道路中线的相对位置，L表示在中线左侧，R表示在中线右侧，M表示在中线上；如果所转方向与道具位置均为L，则判定左转向成功；如果所转方向与道具位置均为R，则判定右转向成功；如果所转方向与道具位置不同，则判定转向失败。根据患者完成连续的M次转向时的埋点事件情况，对患者的转向技能等级SM进行计算；设第m次埋点事件的完成结果为rm，转向成功时埋点事件记为rm＝1，否则记为rm＝0；m＝0,1,...,M-1；计算转向技能等级SM为：其中：ρ为最高转向技能等级，表示对取整。对患者完成连续的M次转向时的埋点事件的情况进行评价，得到SM＝R1；患者完成新的连续的M次转向时埋点事件的情况进行评价，得到SM＝R2：若R2＞R1，则更新患者的转向技能等级为SM＝R2；否则，SM＝R1。玩家转向技能差，表明用户转向发力不熟练，不能进行正确转向，为提高玩家的体验，要降低转弯的灵敏度，即增大转弯门限，以提高用户方向的稳定性；具体的，根据患者的转向技能等级对当前时刻的转向门限FT进行优化，转向门限优化值为FT'＝λ×，λ为配置参数；在自动回中线转向单元使用转向门限优化值FT'进行控制。有益效果：本发明提供的上下肢主被动康复游戏化训练的方法，通过采集患者作用在手柄/脚蹬上的左手/脚、右手/脚的用力，对偏瘫患者进行力量补偿，避免偏瘫患者总向一侧偏的不良体验，让偏瘫患者也能体验到游戏中类似正常人的自由转向；通过动态计算转向力量门限，适应各类患者的不同力量，让不同力量的患者都能得到最适合自己的转向体验；通过自动回中线的转向控制机制让操作不熟练的患者，也能持续进行游戏，而不是动不动卡在路边，显著降低了游戏操作难度；同时通过对转向技能进行评估，正确评估患者转向技能水平，并根据患者的转向技能水平动态调整转向门限，让患者得到最适合自己的转向门限。通过这些机制，让不同层次的患者都获得最适合自己的转向体验，大幅度提升了在主被动游戏化训练中的体验；让患者乐于进行康复训练，以提高训练积极性，进而提高主被动康复训练的效果。附图说明图1为一种本发明的应用装置；图2为游戏显示界面的设计示意图；图3为转向操作技能评估单元的评估流程图；图中包括：1-左侧发力装置；2-右侧发力装置；3-游戏显示装置。具体实施方式以下结合附图和具体实施例对本发明作具体的介绍。在本发明的描述中，需要理解的是，术语“中心”、“纵向”、“横向”、“上”、“下”、“前”、“后”、“左”、“右”、“竖直”、“水平”、“顶”、“底”、“内”、“外”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。此外，术语“第一”、“第二”仅用于描述目的，而不能理解为指示或暗示相对重要性。如图1所示为一种上下肢主被动康复游戏化训练装置，基于左右侧力量差值进行转向控制以激发偏瘫侧动作；主被动训练通过双侧肢体旋转操作主被动设备进行康复训练，通过采集患者左右侧的用力，通过左右侧力量的差值来控制游戏中的虚拟车辆，实现患者在游戏中的转弯，完成游戏化互动训练。通过自动回正机制进一步提升了游戏的体验。本案提供一种基于上述装置的上下肢主被动康复游戏化训练的方法，包括偏瘫非对称力量动态补偿单元、动态转向门限控制单元、自动回中线转向单元和转向操作技能评估单元；所述偏瘫非对称力量动态补偿单元，对患者操作游戏装置时的左右侧实际力量值进行实时监测，对偏瘫侧进行力量补偿；所述动态转向门限控制单元，基于左右侧实际力量最大值动态调整转向门限，当左右侧补偿后力量差值超过转向门限时，游戏装置发生偏离中线的转弯；所述自动回中线转向单元，对游戏装置偏离中线的距离进行实时监测，当偏离距离达到设定值时，游戏装置自动回到中线；所述转向操作技能评估单元，设定要求患者完成转向时的埋点事件，根据患者完成转向时的埋点事件情况评价患者的转向技能等级。偏瘫非对称力量动态补偿单元偏瘫患者的健侧与患侧力量大小不一致，如果按照真实的左右力量进行转向判断，游戏中的虚拟角色将一直偏向健侧，不能进行正常游戏，因此需要对力量弱的患侧进行力量补偿，以平衡双侧用力，保证正常游戏。所述偏瘫非对称力量动态补偿单元对偏瘫侧进行力量补偿的过程如下：通过力量传感器实时监测患者操作游戏装置时的左右侧实际力量值，设第i对左右侧实际力量值分别为fli、fri；设计长度为N的滑动窗口，按照滑动窗口机制，取滑动窗口内的N对左右侧力量值计算左右侧实际力量最大值Flmax、Frmax为：Flmax＝max)Frmax＝max)计算左右力量比例PN＝Flmax/Frmax：若PN≥1，表示右侧为偏瘫侧，需要进行力量补偿；否则，左侧为偏瘫侧，需要力量补偿；根据当前时刻前N对左右侧实际力量值计算当前时刻左右侧补偿后力量值Fleft、Fright如下：若PN≥1：Fleft＝flN，Fright＝frN×PN；若PN＜1：Fleft＝flN/PN，Fright＝frN。动态转向门限控制单元动态转向门限控制单元，根据当前时刻前N对左右侧实际力量值计算当前时刻的转向门限FT为：FT＝q×max其中：q为配置参数，0＜q≤1。若玩家转向技能差，表明用户转向发力不熟练，不能进行正确转向，为提高玩家的体验，要降低转弯的灵敏度，即增大转弯门限，以提高用户方向的稳定性；因而可以根据患者的转向技能等级对当前时刻的转向门限FT进行优化，转向门限优化值为FT'＝λ×，λ为配置参数；在自动回中线转向单元使用转向门限优化值FT'进行控制。自动回中线转向单元为降低患者控制转向的难度，采用自动回到中线的行进方向控制操作方式，避免患者控制方向的不熟练，一直在擦着路边骑行，影响体验。如图2所示，只有当患者虚拟角色在道路中线上时，才检测患者用力情况，当虚拟角色离开道路中线后，则忽略患者的用力，自动回到道路中线。自动回中线转向单元的实施过程如下：骑行装置在中线行驶，系统实时监测左右侧补偿后力量值Fleft、Fright，进入步骤；对左右侧补偿后力量差值进行计算：①当|Fleft-Fright|≤FT'时，患者继续在道路中线骑行，返回步骤；②当|Fleft-Fright|＞FT'时，计算患者离开道路中线的最远距离为L＝Fdiff×k；其中k为配置参数，Fdiff＝|Fleft-Fright|；进入步骤；若Fleft＞Fright，进行左转向直到距离中线的垂直距离为L，进入步骤；若Fleft＜Fright，进行右转向直到距离中线的垂直距离为L，进入步骤；转向完成后，自动回到中线，从离开中线到回到中线的过程中，不处理新接收到的左右力值，如果在此过程中触碰到道具，完成道具触发，以完成游戏任务；返回步骤。转向操作技能评估单元转向操作技能评估单元，通过游戏中的埋点事件，采集转弯事件，通过事件序列实时分析玩家的用力特性，及用力方向是否与意图一致，评估玩家的转向操作技能高低；本案设计埋点时间格式为：事件内容：yyyymmdd HHMMSS.fff,事件名,事件属性其中：yyyymmdd表示4位显示的年，2位显示的月，2位显示的天；HHMMSS表示2位显示的时分秒；fff表示3位显示的毫秒；事件名表示需要采集的游戏事件；事件属性有多个时以英文“,”分隔。基于此格式，中线转向事件的定义如下：中线转向事件：所转方向，左边力量值，右边力量值，转向门限值，道具位置其中：道具位置是道具相对于道路中线的相对位置，L表示在中线左侧，R表示在中线右侧，M表示在中线上。如果所转方向与道具位置均为L，则判定左转向成功；如果所转方向与道具位置均为R，则判定右转向成功；如果所转方向与道具位置不同，则判定转向失败。根据患者完成连续的M次转向时的埋点事件情况，对患者的转向技能等级SM进行计算；设第m次埋点事件的完成结果为rm，转向成功时埋点事件记为rm＝1，否则记为rm＝0；m＝0,1,...,M-1；计算转向技能等级SM为：其中：ρ为最高转向技能等级，表示对取整；对患者完成连续的M次转向时的埋点事件的情况进行评价，得到SM＝R1；患者完成新的连续的M次转向时埋点事件的情况进行评价，得到SM＝R2：若R2＞R1，则更新患者的转向技能等级为SM＝R2；否则，SM＝R1。在本发明的描述中，需要说明的是，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通。对于本领域的普通技术人员而言，可以具体情况理解上述术语在本发明中的具体含义。在本说明书的描述中，参考术语“一个实施例”、“一些实施例”、“示例”、“具体示例”、或“一些示例”等的描述意指结合该实施例或示例描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或示例中以合适的方式结合。以上显示和描述了本发明的基本原理、主要特征和优点。本行业的技术人员应该了解，上述实施例不以任何形式限制本发明，凡采用等同替换或等效变换的方式所获得的技术方案，均落在本发明的保护范围内。
