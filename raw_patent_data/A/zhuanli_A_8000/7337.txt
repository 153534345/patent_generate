标题title
一种用于神经调控的电压宽范围可调电流刺激系统
摘要abst
本发明公开了一种用于神经调控的电压宽范围可调电流刺激系统，该系统包括数字信号控制器、自适应宽范围可调电压产生装置；自适应宽范围可调电压产生装置包括电压反馈网络、升压芯片，电压反馈网络由开关电阻阵列构成，电压反馈网络与可调电压幅值设置模块连接，升压芯片并联自感线圈，二极管的正极与升压芯片连接，二极管的负极与电压反馈网络连接，电压反馈网络还与升压芯片直接连接，升压芯片与系统电源连接；电流刺激器包括H桥刺激电路，H桥刺激电路与刺激通道控制模块连接。本发明同时使用了开关电阻阵列结合与数模转换、模数转换的双重负反馈，实现了刺激电压在宽范围内的精准可调，并引入电路保护机制，最终实现自定义波形。
权利要求书clms
1.一种用于神经调控的电压宽范围可调电流刺激系统，其特征在于，所述系统包括：数字信号控制器、系统电源、自适应宽范围可调电压产生装置、电流刺激器；所述数字信号控制器包括用以降低刺激功耗的电源开关控制模块、用以设置输出电压的可调电压幅值设置模块、用以控制刺激输出过程的刺激通道控制模块；所述系统电源与所述电源开关控制模块连接；所述自适应宽范围可调电压产生装置包括电压反馈网络、升压芯片、二极管，所述电压反馈网络由开关电阻阵列构成，所述电压反馈网络与所述可调电压幅值设置模块连接，所述升压芯片还并联有自感线圈，所述二极管的正极与所述升压芯片连接，所述二极管的负极与所述电压反馈网络连接，所述电压反馈网络还与所述升压芯片直接连接，用以使所述电压反馈网络、升压芯片、二极管构成一重反馈回路，所述升压芯片与所述系统电源连接，用以将所述系统电源提供的电源供电电压转换为电流刺激所需的可调刺激电压；所述电流刺激器包括H桥刺激电路，所述H桥刺激电路与所述刺激通道控制模块连接，所述H桥刺激电路还与所述二极管的负极连接，用以将所述自适应宽范围可调电压产生装置产生的可调刺激电压作为供电电压，在所述刺激通道控制模块的控制下产生预设的电流波形信号，并将所述电流波形信号输出至神经电极。2.根据权利要求1所述的系统，其特征在于，所述系统电源包括NPN三极管、电源模块，所述NPN三极管的基极与所述电源开关控制模块连接，所述NPN三极管的集电极与所述电源模块的正极连接，所述NPN三极管的发射极与所述升压芯片连接，所述电源模块的负极接地。3.根据权利要求1所述的系统，其特征在于，所述数字信号控制器还包括用以调整输出电压的可调电压幅值反馈模块、用以监控输出电压的可调电压实时监控模块，所述自适应宽范围可调电压产生装置还包括数模转换器、模数转换器，所述可调电压幅值反馈模块通过所述数模转换器与所述电压反馈网络连接，所述电压反馈网络通过所述模数转换器与所述可调电压实时监控模块连接，用以使所述数模转换器、模数转换器、数字信号控制器、电压反馈网络构成二重反馈回路。4.根据权利要求3所述的系统，其特征在于，所述电压反馈网络包括多个并联的单位开关电阻阵列，每个所述单位开关电阻阵列包括依次串联的第一电阻、第一开关、第二电阻，所述第一电阻不与所述第一开关连接的一端用以接收所述二极管传输的输入电压，所述第二电阻不与所述第一开关连接的一端用以接收所述数模转换器传输的偏移电压，所述第一电阻与所述第一开关连接的一端用以向所述升压芯片传输反馈电压，所述可调电压幅值设置模块用以分别控制各所述第一开关的闭合与断开。5.根据权利要求1所述的系统，其特征在于，所述二极管的负极还与第一电容的正极连接，所述第一电容的负极接地。6.根据权利要求1所述的系统，其特征在于，所述H桥刺激电路包括第一PNP型场效应管、第一光电耦合器、第二PNP型场效应管、第二光电耦合器、第一NPN型场效应管、第二NPN型场效应管，所述第一PNP型场效应管的栅极和源极之间并联有所述第一光电耦合器的受光器，所述第一光电耦合器的受光器还并联有反向串联的第一稳压二极管、第二稳压二极管，所述第一光电耦合器的发光器用以接收所述刺激通道控制模块发送的第一信号，所述第一PNP型场效应管的漏极与所述神经电极的正极连接，所述第二PNP型场效应管的栅极和源极之间并联有所述第二光电耦合器的受光器，所述第二光电耦合器的受光器还并联有反向串联的第三稳压二极管、第四稳压二极管，所述第二光电耦合器的发光器用以接收所述第一信号，所述第二PNP型场效应管的漏极与所述神经电极的负极连接，所述第一PNP型场效应管与第二PNP型场效应管的源极均用于接收所述可调刺激电压；所述第一PNP型场效应管的栅极还与第二电容连接，所述第二电容的另一端用以接收所述刺激通道控制模块发送的第二信号，所述第二PNP型场效应管的栅极还与第三电容连接，所述第三电容的另一端用以接收所述刺激通道控制模块发送的第三信号；所述第一NPN型场效应管的栅极用以接收所述刺激通道控制模块发送的第四信号，所述第一NPN型场效应管的漏极与所述第一PNP型场效应管的漏极连接，所述第二NPN型场效应管的栅极用以接收所述刺激通道控制模块发送的第五信号，所述第二NPN型场效应管的漏极与所述第二PNP型场效应管的漏极连接，所述第一NPN型场效应管与第二NPN型场效应管的源极均接地。7.根据权利要求6所述的系统，其特征在于，所述第一NPN型场效应管与第二NPN型场效应管的源极还连接有电流源，所述电流源的另一端接地。8.根据权利要求7所述的系统，其特征在于，所述数字信号控制器还包括用以设置刺激电流的电流实时设置模块，所述电流实时设置模块与所述电流源连接。
说明书desc
技术领域本申请涉及生物医学工程技术领域，具体而言，涉及一种用于神经调控的电压宽范围可调电流刺激系统。背景技术神经调控是治疗帕金森病、脊髓损伤、视觉和听觉障碍等各种神经疾病的疗法，目前已经实现了广泛的应用。使用电刺激的方法进行神经调控，目前有三种主要的刺激方式:电压刺激模式、电流刺激模式和电荷刺激模式。这三种模式都基于通过在神经细胞膜上积累电荷，从而引起神经细胞动作电位的变化，进而对指定区域施加刺激的原理。电流刺激模式是最常用的刺激模式，采用这种模式可以精确地控制注入组织的电荷，避免电荷残留导致的组织损伤，具有最高的安全性。大量研究表明，由于人体的特异性，在治疗不同的疾病时，所需要的刺激电流参数往往不同。不同的应用场景下，刺激电流需求可能从小于10uA到大于10mA不等，刺激电压恒定的电流刺激系统中，难以满足上述的刺激电流需求。在不同疾病治疗场景中，病灶位置的不同也会导致不同的组织阻抗。对于传统刺激电压恒定的电流刺激系统而言，低阻抗情况下会在场效应管上产生较大压降而引入更大的功耗，高阻抗情况下则会因刺激电压恒定而无法产生足够且确定的输出电流，故难以使得刺激电压与病灶阻抗相匹配。以深脑刺激，脊髓刺激等应用场景为例，为了提高刺激靶点的选择精度，提高刺激电极的植入密度，必须选择直径极小的电极，这就会意味着更大的电极阻抗与组织阻抗。若使用传统的刺激电压恒定的电流刺激系统，由于高阻抗的问题，其驱动能力差，无法输出指定的刺激电流。而对于植入电极直径较大的场合，不可调的刺激电压，也会产生额外的功耗。综上可见，传统的刺激电压恒定的电流刺激系统由于无法在宽范围内对刺激电压进行精准调控，已无法满足各类应用场景的需要。发明内容为了解决上述问题，本申请实施例提供了一种用于神经调控的电压宽范围可调电流刺激系统。第一方面，本申请实施例提供了一种用于神经调控的电压宽范围可调电流刺激系统，所述系统包括：数字信号控制器、系统电源、自适应宽范围可调电压产生装置、电流刺激器；所述数字信号控制器包括用以降低刺激功耗的电源开关控制模块、用以设置输出电压的可调电压幅值设置模块、用以控制刺激输出过程的刺激通道控制模块；所述系统电源与所述电源开关控制模块连接；所述自适应宽范围可调电压产生装置包括电压反馈网络、升压芯片、二极管，所述电压反馈网络由开关电阻阵列构成，所述电压反馈网络与所述可调电压幅值设置模块连接，所述升压芯片还并联有自感线圈，所述二极管的正极与所述升压芯片连接，所述二极管的负极与所述电压反馈网络连接，所述电压反馈网络还与所述升压芯片直接连接，用以使所述电压反馈网络、升压芯片、二极管构成一重反馈回路，所述升压芯片与所述系统电源连接，用以将所述系统电源提供的电源供电电压转换为电流刺激所需的可调刺激电压；所述电流刺激器包括H桥刺激电路，所述H桥刺激电路与所述刺激通道控制模块连接，所述H桥刺激电路还与所述二极管的负极连接，用以将所述自适应宽范围可调电压产生装置产生的可调刺激电压作为供电电压，在所述刺激通道控制模块的控制下产生预设的电流波形信号，并将所述电流波形信号输出至神经电极。优选的，所述系统电源包括NPN三极管、电源模块，所述NPN三极管的基极与所述电源开关控制模块连接，所述NPN三极管的集电极与所述电源模块的正极连接，所述NPN三极管的发射极与所述升压芯片连接，所述电源模块的负极接地。优选的，所述数字信号控制器还包括用以调整输出电压的可调电压幅值反馈模块、用以监控输出电压的可调电压实时监控模块，所述自适应宽范围可调电压产生装置还包括数模转换器、模数转换器，所述可调电压幅值反馈模块通过所述数模转换器与所述电压反馈网络连接，所述电压反馈网络通过所述模数转换器与所述可调电压实时监控模块连接，用以使所述数模转换器、模数转换器、数字信号控制器、电压反馈网络构成二重反馈回路。优选的，所述电压反馈网络包括多个并联的单位开关电阻阵列，每个所述单位开关电阻阵列包括依次串联的第一电阻、第一开关、第二电阻，所述第一电阻不与所述第一开关连接的一端用以接收所述二极管传输的输入电压，所述第二电阻不与所述第一开关连接的一端用以接收所述数模转换器传输的偏移电压，所述第一电阻与所述第一开关连接的一端用以向所述升压芯片传输反馈电压，所述可调电压幅值设置模块用以分别控制各所述第一开关的闭合与断开。优选的，所述二极管的负极还与第一电容的正极连接，所述第一电容的负极接地。优选的，所述H桥刺激电路包括第一PNP型场效应管、第一光电耦合器、第二PNP型场效应管、第二光电耦合器、第一NPN型场效应管、第二NPN型场效应管，所述第一PNP型场效应管的栅极和源极之间并联有所述第一光电耦合器的受光器，所述第一光电耦合器的受光器还并联有反向串联的第一稳压二极管、第二稳压二极管，所述第一光电耦合器的发光器用以接收所述刺激通道控制模块发送的第一信号，所述第一PNP型场效应管的漏极与所述神经电极的正极连接，所述第二PNP型场效应管的栅极和源极之间并联有所述第二光电耦合器的受光器，所述第二光电耦合器的受光器还并联有反向串联的第三稳压二极管、第四稳压二极管，所述第二光电耦合器的发光器用以接收所述第一信号，所述第二PNP型场效应管的漏极与所述神经电极的负极连接，所述第一PNP型场效应管与第二PNP型场效应管的源极均用于接收所述可调刺激电压；所述第一PNP型场效应管的栅极还与第二电容连接，所述第二电容的另一端用以接收所述刺激通道控制模块发送的第二信号，所述第二PNP型场效应管的栅极还与第三电容连接，所述第三电容的另一端用以接收所述刺激通道控制模块发送的第三信号；所述第一NPN型场效应管的栅极用以接收所述刺激通道控制模块发送的第四信号，所述第一NPN型场效应管的漏极与所述第一PNP型场效应管的漏极连接，所述第二NPN型场效应管的栅极用以接收所述刺激通道控制模块发送的第五信号，所述第二NPN型场效应管的漏极与所述第二PNP型场效应管的漏极连接，所述第一NPN型场效应管与第二NPN型场效应管的源极均接地。优选的，所述第一NPN型场效应管与第二NPN型场效应管的源极还连接有电流源，所述电流源的另一端接地。优选的，所述数字信号控制器还包括用以设置刺激电流的电流实时设置模块，所述电流实时设置模块与所述电流源连接。本发明的有益效果为：1. 引入了开关电阻阵列进行电压反馈，实现了刺激电压在宽范围内的实时可调与稳定。且将供电方案与H桥电路进行结合，实现了供电电压可调的电流控制方法。2.在刺激电压宽范围内实时可调与稳定的基础上，运用了ADC与DAC的方法，与开关电阻阵列结合实现了双重负反馈调节，来保证可调刺激电压的自适应控制。3.应用基于光电耦合的隔离特性与稳压二极管的稳压特性，实现了可调电压刺激电路的保护、隔离与功耗降低。附图说明为了更清楚地说明本申请实施例中的技术方案，下面将对实施例中所需使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例提供的一种用于神经调控的电压宽范围可调电流刺激系统的架构示意图；图2为本申请实施例提供的一种用于神经调控的电压宽范围可调电流刺激系统中电压反馈网络的工作原理示意图；图3为本申请实施例提供的一种用于神经调控的电压宽范围可调电流刺激系统中H桥刺激电路的具体结构示意图；图4为本申请实施例提供的H桥刺激电路进行正向电流刺激时的控制信号波形示意图；图5为本申请实施例提供的H桥刺激电路进行反向电流刺激时的控制信号波形示意图；图6为本申请实施例提供的对数字信号控制器中操作者对电流刺激信号波形的控制示意图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述。在下述介绍中，术语“第一”、“第二”仅为用于描述的目的，而不能理解为指示或暗示相对重要性。下述介绍提供了本申请的多个实施例，不同实施例之间可以替换或者合并组合，因此本申请也可认为包含所记载的相同和/或不同实施例的所有可能组合。因而，如果一个实施例包含特征A、B、C，另一个实施例包含特征B、D，那么本申请也应视为包括含有A、B、C、D的一个或多个所有其他可能的组合的实施例，尽管该实施例可能并未在以下内容中有明确的文字记载。下面的描述提供了示例，并且不对权利要求书中阐述的范围、适用性或示例进行限制。可以在不脱离本申请内容的范围的情况下，对描述的元素的功能和布置做出改变。各个示例可以适当省略、替代或添加各种过程或组件。例如所描述的方法可以以所描述的顺序不同的顺序来执行，并且可以添加、省略或组合各种步骤。此外，可以将关于一些示例描述的特征组合到其他示例中。参见图1，图1是本申请实施例提供的一种用于神经调控的电压宽范围可调电流刺激系统的架构示意图。在本申请实施例中，所述系统包括：数字信号控制器、系统电源、自适应宽范围可调电压产生装置、电流刺激器；所述数字信号控制器包括用以降低刺激功耗的电源开关控制模块、用以设置输出电压的可调电压幅值设置模块、用以控制刺激输出过程的刺激通道控制模块；所述系统电源与所述电源开关控制模块连接；所述自适应宽范围可调电压产生装置包括电压反馈网络、升压芯片、二极管，所述电压反馈网络由开关电阻阵列构成，所述电压反馈网络与所述可调电压幅值设置模块连接，所述升压芯片还并联有自感线圈，所述二极管的正极与所述升压芯片连接，所述二极管的负极与所述电压反馈网络连接，所述电压反馈网络还与所述升压芯片直接连接，用以使所述电压反馈网络、升压芯片、二极管构成一重反馈回路，所述升压芯片与所述系统电源连接，用以将所述系统电源提供的电源供电电压转换为电流刺激所需的可调刺激电压；所述电流刺激器包括H桥刺激电路，所述H桥刺激电路与所述刺激通道控制模块连接，所述H桥刺激电路还与所述二极管的负极连接，用以将所述自适应宽范围可调电压产生装置产生的可调刺激电压作为供电电压，在所述刺激通道控制模块的控制下产生预设的电流波形信号，并将所述电流波形信号输出至神经电极。在本申请实施例中，电源开关控制模块的连接线路对应图中的I，可调电压幅值设置模块的连接线路对应图中的II，刺激通道控制模块的连接线路对应图中的VI。系统电源是为本系统提供能量的部分。自适应宽范围可调电压产生装置是将系统电源的电源供电电压转换为电流刺激所需可调刺激电压。电流刺激器是以自适应宽范围可调电压产生装置产生的可调刺激电压为供电电压，受数字信号控制器控制，以产生指定的电流波形信号。电源供电电压可以为低于5V的电压，可调刺激电压可以为5V-140V的电压。具体的，电压反馈网络由受数字信号控制器控制的开关电阻阵列所组成，数字信号控制器可以输出相应的控制信号，来选择电阻阵列中不同的导通与关断选择。不同的选择，则会对应改变输入电压与反馈电压的比例，从而调节升压芯片的输出电压，进而实现所产生可调刺激电压的实时可调。在选定了相应的电阻阵列导通后，升压芯片开始工作，该反馈电压值会在升压芯片内部与指定的输出可调电压值进行对比。倘若输出的电压值高于设定的电压值，则会减缓对电感的充电速度，使得电压降低以达到设定电压值。否则，则会加快对电感的充电速度，使得电压升高以达到设定的电压值。该机制会形成一重反馈回路，来保证输出可调刺激电压宽范围内的可调和稳定，实现自适应控制。在形成精准的可调刺激电压之后，电流刺激器可以开始工作，即通过H桥电流的方式进行指定的刺激电流控制。在一种可实施方式中，所述系统电源包括NPN三极管、电源模块，所述NPN三极管的基极与所述电源开关控制模块连接，所述NPN三极管的集电极与所述电源模块的正极连接，所述NPN三极管的发射极与所述升压芯片连接，所述电源模块的负极接地。在本申请实施例中，实际使用中，电源模块具体可以使用电池供电，有线数据线供电等各种方式。在电源开关控制模块的电信号控制下，能够对NPN三极管的通断进行控制，进而控制电源模块对系统的刺激功耗进行控制。在一种可实施方式中，所述数字信号控制器还包括用以调整输出电压的可调电压幅值反馈模块、用以监控输出电压的可调电压实时监控模块，所述自适应宽范围可调电压产生装置还包括数模转换器、模数转换器，所述可调电压幅值反馈模块通过所述数模转换器与所述电压反馈网络连接，所述电压反馈网络通过所述模数转换器与所述可调电压实时监控模块连接，用以使所述数模转换器、模数转换器、数字信号控制器、电压反馈网络构成二重反馈回路。在本申请实施例中，可调电压幅值反馈模块的连接线路对应图1中的III，可调电压实时监控模块的连接线路对应图1中的IV。在前述基础上，产生的可调刺激电压的电压值会被模数转换器ADC实时采集，转换的结果将以数字信号的形式实时传送到数字信号控制器当中，数字信号控制器接收到该电压值的数字信号形式后，会与指定的输出电压进行实时对比，若该值大于指定输出电压，则判断应该降低可调刺激电压，否则判断应该升高可调刺激电压。数字信号控制器根据上述的判断结果，会实时生成一个电压偏移信号，将该电压偏移信号传输至数模转换器DAC中，则会生成一个相应的电压偏移量，将该电压偏移量加至自适应宽范围可调电压产生装置，形成二重反馈回路，实现可调电压刺激供电电压在宽范围内更加准确的可调，进一步实现更精准的自适应控制。通过上述操作可以实现不同的实时电压宽范围调节，最终实现可调刺激电压的产生。实际使用中，可以生成12V-140V的宽范围、实时可调、自适应控制、精准的可调刺激电压，该可调刺激电压足够满足现有的使用需要。在一种可实施方式中，所述电压反馈网络包括多个并联的单位开关电阻阵列，每个所述单位开关电阻阵列包括依次串联的第一电阻、第一开关、第二电阻，所述第一电阻不与所述第一开关连接的一端用以接收所述二极管传输的输入电压，所述第二电阻不与所述第一开关连接的一端用以接收所述数模转换器传输的偏移电压，所述第一电阻与所述第一开关连接的一端用以向所述升压芯片传输反馈电压，所述可调电压幅值设置模块用以分别控制各所述第一开关的闭合与断开。在本申请实施例中，如图2所示，输入电压即为二极管输出的可调刺激电压，电压偏移量即对应为偏移电压，电压反馈网络通过改变输入电压与反馈电压的比例后，会重新向升压芯片输出反馈电压。可调电压幅值设置模块将通过信号VL1、VL2、…、VLn来分别控制每一个单位开关电阻阵列中的第一开关，以此通过调整整个电压反馈网络中连通接入的偏移电压数量，进而实现对反馈电压的调节。在一种可实施方式中，所述二极管的负极还与第一电容的正极连接，所述第一电容的负极接地。在一种可实施方式中，所述H桥刺激电路包括第一PNP型场效应管、第一光电耦合器、第二PNP型场效应管、第二光电耦合器、第一NPN型场效应管、第二NPN型场效应管，所述第一PNP型场效应管的栅极和源极之间并联有所述第一光电耦合器的受光器，所述第一光电耦合器的受光器还并联有反向串联的第一稳压二极管、第二稳压二极管，所述第一光电耦合器的发光器用以接收所述刺激通道控制模块发送的第一信号，所述第一PNP型场效应管的漏极与所述神经电极的正极连接，所述第二PNP型场效应管的栅极和源极之间并联有所述第二光电耦合器的受光器，所述第二光电耦合器的受光器还并联有反向串联的第三稳压二极管、第四稳压二极管，所述第二光电耦合器的发光器用以接收所述第一信号，所述第二PNP型场效应管的漏极与所述神经电极的负极连接，所述第一PNP型场效应管与第二PNP型场效应管的源极均用于接收所述可调刺激电压；所述第一PNP型场效应管的栅极还与第二电容连接，所述第二电容的另一端用以接收所述刺激通道控制模块发送的第二信号，所述第二PNP型场效应管的栅极还与第三电容连接，所述第三电容的另一端用以接收所述刺激通道控制模块发送的第三信号；所述第一NPN型场效应管的栅极用以接收所述刺激通道控制模块发送的第四信号，所述第一NPN型场效应管的漏极与所述第一PNP型场效应管的漏极连接，所述第二NPN型场效应管的栅极用以接收所述刺激通道控制模块发送的第五信号，所述第二NPN型场效应管的漏极与所述第二PNP型场效应管的漏极连接，所述第一NPN型场效应管与第二NPN型场效应管的源极均接地。在本申请实施例中，如图3所示，由于使用了可调刺激电压进行电流刺激器的供电，因此必须对H桥电路进行保护。本申请通过光电耦合器来进行光电耦合的方式，将第一信号，即P1_RECHRG信号与可调刺激电压相互隔绝，以此将模拟电路与数字电路隔绝，避免两个部分互相的串扰影响。同时，可调刺激电压通过两个反向串联的稳压二极管接至场效应管的栅极控制端，通过这种保护方法可以限制场效应管的栅极与源极的电压差，避免可调刺激电压直接加在栅极与源极两端产生的损坏。此外，由于缩小了场效应管栅极与源极的电压差，降低了场效应管开通关断时的功耗。具体的，以H桥刺激电路进行正向电流刺激为例，如图4所示，H桥刺激电路的工作原理如下，其中第一信号即为P1_RECHRG，第二信号即为P1_CSW+，第三信号即为P1_CSW-，第四信号即为P1_SW-，第五信号即为P1_SW+，此外，P1_GP+为P1_CSW+经过第二电容后的信号。t1时刻之前，P1_RECHRG保持高电平，刺激器不工作。t1之后，P1_RECHRG置为低电平， P1_CSW+保持高电平，P1_GP+与P1_CSW+之间始终保持电位差。在t2时刻，P1_CSW+置低电平，P1_GP+与P1_CSW+之间始终保持电位差不变。在t3时刻，P1_SW+由低电平跳转为高电平，将导致刺激器开始工作。t4与t5时刻，分别关闭该H桥刺激电路的下部分与上部分，t6时刻，完全关闭该刺激器。通过上述方式进行刺激器的控制，能够在实现神经电极的可调电压刺激的同时避免刺激器上下部分同时导通而导致的短路。进行反向电流刺激时，控制信号波形如图5所示。在一种可实施方式中，所述第一NPN型场效应管与第二NPN型场效应管的源极还连接有电流源，所述电流源的另一端接地。在本申请实施例中，为了实现精确的电流控制，该H桥电路的下端由一个电流源进行指定电流的输出，以此保证该系统正常工作。在一种可实施方式中，所述数字信号控制器还包括用以设置刺激电流的电流实时设置模块，所述电流实时设置模块与所述电流源连接。在本申请实施例中，电流实时设置模块的连接线路对应图1中的V。电流源将受电流实时设置模块控制，该系统的电流刺激精度受主控制器模块的时钟影响，时钟频率越高，则控制性能越精准。本申请的工作过程为，操作者根据所选择电极与应用领域的不同，首先变更电压反馈网络中的电阻，并修改数字信号控制器中的期望电压，以形成指定的刺激供电电压。而后，操作者可以通过更改数字信号控制器中的电流刺激信号波形，如图6所示，来分别控制该电流刺激中所产生的电流波形，如电流幅值，电流的周期，电流的占空比等。以满足不同的刺激需求。特别地，操作者若希望指定输出电流的波形，如生成正弦波，则可以利用斩波调制技术的方式，将正弦波分解成指定时间精度的方波进行逼近，时间精度越高，逼近精度越好。借由主控制器中的控制信号，可以实现对电流的精确控制。本领域的技术人员可以清楚地了解到本申请实施例的技术方案可借助软件和/或硬件来实现。本说明书中的“单元”和“模块”是指能够独立完成或与其他部件配合完成特定功能的软件和/或硬件，其中硬件例如可以是现场可编程门阵列、集成电路等。本申请实施例的各处理单元和/或模块，可通过实现本申请实施例所述的功能的模拟电路而实现，也可以通过执行本申请实施例所述的功能的软件而实现。需要说明的是，对于前述的各方法实施例，为了简单描述，故将其都表述为一系列的动作组合，但是本领域技术人员应该知悉，本申请并不受所描述的动作顺序的限制，因为依据本申请，某些步骤可以采用其他顺序或者同时进行。其次，本领域技术人员也应该知悉，说明书中所描述的实施例均属于优选实施例，所涉及的动作和模块并不一定是本申请所必须的。在上述实施例中，对各个实施例的描述都各有侧重，某个实施例中没有详述的部分，可以参见其他实施例的相关描述。本领域普通技术人员可以理解上述实施例的各种方法中的全部或部分步骤是可以通进程序来指令相关的硬件来完成，该程序可以存储于一计算机可读存储器中，存储器可以包括：闪存盘、只读存储器、随机存取器、磁盘或光盘等。以上所述者，仅为本公开的示例性实施例，不能以此限定本公开的范围。即但凡依本公开教导所作的等效变化与修饰，皆仍属本公开涵盖的范围内。本领域技术人员在考虑说明书及实践这里的公开后，将容易想到本公开的其实施方案。本申请旨在涵盖本公开的任何变型、用途或者适应性变化，这些变型、用途或者适应性变化遵循本公开的一般性原理并包括本公开未记载的本技术领域中的公知常识或惯用技术手段。说明书和实施例仅被视为示例性的，本公开的范围和精神由权利要求限定。
