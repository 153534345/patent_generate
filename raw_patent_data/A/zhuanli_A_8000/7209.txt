标题title
一种移动关节式诊脉仪
摘要abst
本发明公开了一种移动关节式诊脉仪，包括：图像采集模块、限位脉枕模块、机械臂模块、主控模块和通信模块，其中，主控模块，用于根据所述血管显像后的腕部图像，结合视觉定位寸、关、尺脉搏穴位的方法，确定寸、关、尺脉搏穴位的位置信息；并根据所述位置信息控制所述机械臂模块移动至患者手腕处，且使三个仿真手指的脉象贴片对应按压于所述寸、关、尺三个脉搏穴位上采集脉象信息；通信模块用于将采集的脉象信息传输至远程医生端，以及用于传输远程医生端的控制信号至主控模块，以控制仿真手指的诊脉作业。本发明可以准确识别患者的寸、关、尺脉搏穴位，再由主控模块引导仿真手指精准达到患者的寸、关、尺脉搏穴位，实现远程智能诊脉。
权利要求书clms
1.一种移动关节式诊脉仪，其特征在于，包括：图像采集模块，包括双目相机和红外血管显像仪，所述红外血管显像仪用于对患者手腕进行血管显像，所述双目相机用于采集血管显像后的腕部图像；限位脉枕模块，包括脉枕及固定于所述脉枕一端的限位装置，脉枕用于放置患者的手腕，通过所述限位装置使患者的手腕处于所述图像采集模块的正下方；机械臂模块，包括机械臂、与所述机械臂连接的机械手，以及所述机械手的仿真手指尖固定的用于采集脉象信息的脉象贴片；主控模块，用于根据所述血管显像后的腕部图像，结合视觉定位寸、关、尺脉搏穴位的方法，确定寸、关、尺脉搏穴位的位置信息；并根据所述位置信息控制所述机械臂模块移动至患者手腕处，且使三个仿真手指的脉象贴片对应按压于所述寸、关、尺三个脉搏穴位上采集脉象信息；通信模块，用于将采集的脉象信息传输至远程医生端，以及用于传输所述远程医生端的控制信号至所述主控模块，以控制所述仿真手指的诊脉作业。2.根据权利要求1所述的移动关节式诊脉仪，其特征在于，所述机械臂包括X轴传动机构、Y轴传动机构和Z轴传动机构，所述Y轴传动机构垂直于所述X轴传动机构设置，且在所述X轴传动机构带动下沿X轴方向滑动；所述Z轴传动机构垂直于所述Y轴传动机构设置，且在所述Y轴传动机构带动下沿Y轴方向滑动；所述Z轴传动机构上设置有机械手，所述机械手在所述Z轴传动机构的带动下沿Z轴方向滑动。3.根据权利要求2所述的移动关节式诊脉仪，其特征在于，所述X轴传动机构、所述Y轴传动机构和所述Z轴传动机构均为由电机、导轨和滑块构成的传动机构，所述滑块在所述电机的带动下在所述导轨上滑动。4.根据权利要求1所述的移动关节式诊脉仪，其特征在于，还包括一目标追踪相机，用于实时采集所述机械臂及所述机械手的运动过程图像，所述运动过程图像经所述通信模块发送至所述远程医生端，以便所述远程医生端控制仿真手指进行诊脉作业。5.根据权利要求3所述的移动关节式诊脉仪，其特征在于，还包括一红外测距仪，用于实时测量所述机械手距离所述患者手臂的距离信息，所述距离信息经所述通信模块发送至所述远程医生端，以便所述远程医生端控制所述仿真手指靠近患者手腕的寸、关、尺脉搏穴位；以及用于当所述距离信息小于设定的距离阈值时，所述主控模块控制所述机械手回拉或切断所述Y轴传动机构的驱动力。6.根据权利要求3所述的移动关节式诊脉仪，其特征在于，还包括一光电传感器，用于当检测到所述X轴传动机构靠近患者手臂时，发信号给所述主控模块，所述主控模块控制所述X轴传动机构降低速度，缓慢靠近预定位置。7.根据权利要求1所述的移动关节式诊脉仪，其特征在于，所述机械手包括微动电机，所述仿真手指与所述微动电机输出端的丝杠连接，所述仿真手指在所述微动电机的驱动下实现伸缩动作；所述主控模块还用于解译所述远程医生端输入的压力信号为所述微动电机的脉冲信号，从而控制所述仿真手指的伸缩来实现感知脉搏的沉浮作业。8.根据权利要求3所述的移动关节式诊脉仪，其特征在于，所述主控模块还用于在所述远程医生端的控制下控制所述X轴传动机构、所述Y轴传动机构和所述Z轴传动机构运动，以实现感知脉管宽度作业。9.根据权利要求1所述的移动关节式诊脉仪，其特征在于，所述根据所述血管显像后的腕部图像，结合视觉定位寸、关、尺脉搏穴位的方法，确定寸、关、尺脉搏穴位的位置信息，包括：利用红外血管显像仪对患者手腕上寸、关、尺脉搏穴位所在的目标区域进行显像；利用双目相机采集血管显像后目标区域的图像，并将采集到的两图像进行融合，得到融合后血管可视化图像；根据所述融合后血管可视化图像确定患者手腕上桡骨茎突所在点的二维平面坐标，并确定所述桡骨茎突所在点与双目相机中心的目标距离；根据所述二维平面坐标和所述目标距离，确定所述桡骨茎突所在点的三维坐标；根据所述融合后血管可视化图像确定患者手腕的直径信息，并确定患者手臂的偏转角度；根据所述桡骨茎突所在点的三维坐标、所述直径信息、所述偏转角度，以及预先建立的目标模型，分别计算患者的寸、关、尺脉搏穴位的三维坐标；其中，所述目标模型表征桡骨茎突所在点的三维坐标、人体手腕直径、手臂的偏转角度与寸、关、尺脉搏穴位的三维坐标之间的函数关系，根据样本数据预先实验构建。10.根据权利要求9所述的移动关节式诊脉仪，其特征在于，所述目标模型为：其中，θ表示所述偏转角度；D表示所述直径信息；表示所述桡骨茎突所在点的三维坐标；、、分别表示患者的寸、关、尺脉搏穴位的三维坐标；分别表示双目相机两个摄像头到寸、关、尺脉搏穴位的视差，由实验确定；kc、kg、kch分别表示所述桡骨茎突所在点至寸、关、尺脉搏穴位的距离，与所述直径信息的关系系数；k′xc1、k′yc2、kzc1、k′xg1、k′yg2、kzg1、k′xch1、k′ych2、kzch1分别表示寸、关、尺脉搏穴位的三维坐标在x、y、z三个方向各自的分解系数，由实验确定。
说明书desc
技术领域本发明属于远程诊脉技术领域，具体涉及一种移动关节式诊脉仪。背景技术中医文化是中华民族的瑰宝，是中国古代人民在生活实践和同疾病作斗争的过程中总结发展出来的经验，并经过不断地实践与探索逐步形成了当代的医学理论体系。中医学有“望闻问切”四诊，通过该四诊，可以综合判断诊疗疾病，其中中医脉诊是四诊中最为核心的诊断技术，也是其中最神秘，最值得探索的诊断手段。随着人工智能的快速发展，智慧医疗体系在不断完善，远程医疗随之蓬勃发展，能够极大程度地发挥优质医疗资源的作用。目前已经出现了一些远程诊脉相关技术及装置的研究，比如专利CN113854975A一种中医远程诊脉装置，该专利所涉及技术是采用可穿戴的设备固定对患者穴位进行定位；其采用弹簧压力对患者的穴位脉搏进行采集，其远程端通过按按钮对患者的脉搏实现中医诊脉的方法。该专利所采用的弹簧接触脉搏，其受力面积大，不能精准定位到患者的寸、关、尺脉搏穴位，影响诊脉的准确性。发明内容为了解决现有技术中存在的上述问题，本发明提供了一种移动关节式诊脉仪。本发明要解决的技术问题通过以下技术方案实现：一种移动关节式诊脉仪，包括：图像采集模块，包括双目相机和红外血管显像仪，所述红外血管显像仪用于对患者手腕进行血管显像，所述双目相机用于采集血管显像后的腕部图像；限位脉枕模块，包括脉枕及固定于所述脉枕一端的限位装置，脉枕用于放置患者的手腕，通过所述限位装置使患者的手腕处于所述图像采集模块的正下方；机械臂模块，包括机械臂、与所述机械臂连接的机械手，以及所述机械手的仿真手指尖固定的用于采集脉象信息的脉象贴片；主控模块，用于根据所述血管显像后的腕部图像，结合视觉定位寸、关、尺脉搏穴位的方法，确定寸、关、尺脉搏穴位的位置信息；并根据所述位置信息控制所述机械臂模块移动至患者手腕处，且使三个仿真手指的脉象贴片对应按压于所述寸、关、尺三个脉搏穴位上采集脉象信息；通信模块，用于将采集的脉象信息传输至远程医生端，以及用于传输所述远程医生端的控制信号至所述主控模块，以控制所述仿真手指的诊脉作业。在本发明的一个实施例中，所述机械臂包括X轴传动机构、Y轴传动机构和Z轴传动机构，所述Y轴传动机构垂直于所述X轴传动机构设置，且在所述X轴传动机构带动下沿X轴方向滑动；所述Z轴传动机构垂直于所述Y轴传动机构设置，且在所述Y轴传动机构带动下沿Y轴方向滑动；所述Z轴传动机构上设置有机械手，所述机械手在所述Z轴传动机构的带动下沿Z轴方向滑动。在本发明的一个实施例中，所述X轴传动机构、所述Y轴传动机构和所述Z轴传动机构均为由电机、导轨和滑块构成的传动机构，所述滑块在所述电机的带动下在所述导轨上滑动。在本发明的一个实施例中，还包括一目标追踪相机，用于实时采集所述机械臂及所述机械手的运动过程图像，所述运动过程图像经所述通信模块发送至所述远程医生端，以便所述远程医生端控制仿真手指进行诊脉作业。在本发明的一个实施例中，还包括一红外测距仪，用于实时测量所述机械手距离所述患者手臂的距离信息，所述距离信息经所述通信模块发送至所述远程医生端，以便所述远程医生端控制所述仿真手指靠近患者手腕的寸、关、尺脉搏穴位；以及用于当所述距离信息小于设定的距离阈值时，所述主控模块控制所述机械手回拉或切断所述Y轴传动机构的驱动力。在本发明的一个实施例中，还包括一光电传感器，用于当检测到所述X轴传动机构靠近患者手臂时，发信号给所述主控模块，所述主控模块控制所述X轴传动机构降低速度，缓慢靠近预定位置。在本发明的一个实施例中，所述机械手包括微动电机，所述仿真手指与所述微动电机输出端的丝杠连接，所述仿真手指在所述微动电机的驱动下实现伸缩动作；所述主控模块还用于解译所述远程医生端输入的压力信号为所述微动电机的脉冲信号，从而控制所述仿真手指的伸缩来实现感知脉搏的沉浮作业。在本发明的一个实施例中，所述主控模块还用于在所述远程医生端的控制下控制所述X轴传动机构、所述Y轴传动机构和所述Z轴传动机构运动，以实现感知脉管宽度作业。在本发明的一个实施例中，所述根据所述血管显像后的腕部图像，结合视觉定位寸、关、尺脉搏穴位的方法，确定寸、关、尺脉搏穴位的位置信息，包括：利用红外血管显像仪对患者手腕上寸、关、尺脉搏穴位所在的目标区域进行显像；利用双目相机采集血管显像后目标区域的图像，并将采集到的两图像进行融合，得到融合后血管可视化图像；根据所述融合后血管可视化图像确定患者手腕上桡骨茎突所在点的二维平面坐标，并确定所述桡骨茎突所在点与双目相机中心的目标距离；根据所述二维平面坐标和所述目标距离，确定所述桡骨茎突所在点的三维坐标；根据所述融合后血管可视化图像确定患者手腕的直径信息，并确定患者手臂的偏转角度；根据所述桡骨茎突所在点的三维坐标、所述直径信息、所述偏转角度，以及预先建立的目标模型，分别计算患者的寸、关、尺脉搏穴位的三维坐标；其中，所述目标模型表征桡骨茎突所在点的三维坐标、人体手腕直径、手臂的偏转角度与寸、关、尺脉搏穴位的三维坐标之间的函数关系，根据样本数据预先实验构建。在本发明的一个实施例中，所述目标模型为：其中，θ表示所述偏转角度；D表示所述直径信息；表示所述桡骨茎突所在点的三维坐标；、、分别表示患者的寸、关、尺脉搏穴位的三维坐标；分别表示双目相机两个摄像头到寸、关、尺脉搏穴位的视差，由实验确定；kc、kg、kch分别表示所述桡骨茎突所在点至寸、关、尺脉搏穴位的距离，与所述直径信息的关系系数；k′xc1、k′yc2、kzc1、k′xg1、k′yg2、kzg1、k′xch1、k′ych2、kzch1分别表示寸、关、尺脉搏穴位的三维坐标在x、y、z三个方向各自的分解系数，由实验确定。与现有技术相比，本发明的有益效果：本发明实施例提供的移动关节式诊脉仪，通过视觉定位寸、关、尺脉搏穴位的位置信息，可以准确识别患者的寸、关、尺脉搏穴位，再由主控模块控制机械臂模块向患者穴位移动，可以引导仿真手指精准达到患者的寸、关、尺脉搏穴位，实现远程智能诊脉。此外，远程医生端通过对仿真手指按压患者穴位的压力大小的精确控制，以及对机械臂模块在小幅度范围内的进退，可以使仿真手指模仿医生切脉手法实现感知脉搏的沉浮作业和感知脉管宽度作业，实现远程精确诊脉。附图说明图1是本发明实施例提供的一种移动关节式诊脉仪的结构原理示意图，图2是本发明实施例提供的一种移动关节式诊脉仪的左视图；图3是本发明实施例提供的一种移动关节式诊脉仪的主视图；图4是本发明实施例提供的一种X轴传动结构的结构示意图；图5是本发明实施例提供的一种移动关节式诊脉仪的后视图；图6是本发明实施例提供的一种机械手的结构示意图；图7是本发明实施例提供的一种移动关节式诊脉仪的外观示意图。附图标记：1-图像采集模块；2-限位脉枕模块；3-机械臂模块；4-主控模块；5-通信模块；6-双目相机；7-红外血管显像仪；8-底座；9-支架；10-安装架；11-脉枕；12-限位装置；13-X轴传动机构；14-Y轴传动机构；15-Z轴传动机构；16-电机；17-导轨；18-滑块；19-限位块；20-导轨末端块；21-机械手；22-脉象贴片；23-目标追踪相机；24-红外测距仪；25-光电传感器；26-微动电机；27-丝杆；28-滑台；29-仿真手指；30-第一限位开关；31-第二限位开关。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。请参见图1，图1是本发明实施例提供的一种移动关节式诊脉仪的结构原理示意图，如图1所示的移动关节式诊脉仪，包括：图像采集模块1、限位脉枕11模块2、机械臂模块3、主控模块4和通信模块5，下面结合附图对各模块的结构及具体功能进行说明。请参见图2，图2是本发明实施例提供的一种移动关节式诊脉仪的左视图；本发明的图像采集模块1，包括双目相机6和红外血管显像仪7，红外血管显像仪7用于对患者手腕进行血管显像，双目相机6用于采集血管显像后的腕部图像。采集患者腕部图像的目的是定位患者腕部的“寸”“关”“尺”三个脉搏穴位，以便于仿真手指29达到相应穴位进行诊脉。血管显像仪利用了血液中血红蛋白对近红外光的吸收强于其他组织的原理，向皮肤表面投射特定波长的近红外光，然后由光敏元器件采集皮肤红外图像；之后经过高新能图像处理芯片处理成血管分布轮廓图，再由微投影技术将图像清晰地在皮肤表面。血管显像仪可以实时的将血管原位，1:1地投影在皮肤表面，可以在皮肤表面显示血管的粗细、走向、分布和轮廓。本发明利用血管显影图像及双目相机图像，可以测得患者手腕的直径、图像采集模块1距离手腕的垂直距离，以及桡骨茎突的位置信息，根据这些信息，结合预先建立的目标模型，可以确定患者的寸、关、尺脉搏穴位的三维坐标信息。具体地，本发明的移动关节式诊脉仪的整体结构可以包括一底座8，以及底座8一端垂直固定的支架9，支架9的顶端水平固定有安装架10，该安装架10的下底面上固定有双目相机6和红外血管显像仪7，且红外血管显像仪7设置于双目相机6的中间部位。本发明的限位脉枕11模块2，包括脉枕11及固定于脉枕11一端的限位装置12，脉枕11用于放置患者的手腕，并通过限位装置12使患者的手腕处于图像采集模块1的正下方。具体地，脉枕11可以为具有一定高度且上表面为可放置患者手腕的凹槽状结构；脉枕11靠里的一端垂直固定有一限位装置12，该限位装置12可以固定于底座8上，可以是一个手部防护挡板，用于患者在脉枕11上放置手腕后，且手部在自然放松的半握状态下对手部起到限位的作用，目的是使患者腕部处于图像采集模块1的正下方。为了测量更加精确，考虑到患者手部及手臂的长短不同，限位装置12也可以设置成可限位调节的形式，附加患者自行判断手腕部是否处于图像采集模块1的正下方，来调节限位装置12，最终固定好手腕，进行图像采集。本发明的机械臂模块3，包括机械臂、与机械臂连接的机械手21，以及机械手21的仿真手指29尖固定的用于采集脉象信息的脉象贴片22。请参见图3，图3是本发明实施例提供的一种移动关节式诊脉仪的主视图；本发明的机械臂模块3均设置在底座8上，机械臂是由X轴、Y轴和Z轴三个方向上的传动机构组成，该机械臂包括X轴传动机构13、Y轴传动机构14和Z轴传动机构15，Y轴传动机构14垂直于X轴传动机构13设置，且在X轴传动机构13带动下沿X轴方向滑动；Z轴传动机构15垂直于Y轴传动机构14设置，且在Y轴传动机构14带动下沿Y轴方向滑动；Z轴传动机构15上设置有机械手21，机械手21在Z轴传动机构15的带动下沿Z轴方向滑动。示例性地，X轴传动机构13、Y轴传动机构14和Z轴传动机构15均为由电机16、导轨17和滑块18构成的传动机构，滑块18在电机16的带动下在导轨17上滑动。请参见图4，图4是本发明实施例提供的一种X轴传动结构的结构示意图；以X轴传动机构13为例，其一端设置有电机16，另一端设置有导轨末端块20，两端之间设置有导轨17，导轨17行设置有滑块18，滑块18可以在电机16的带动下在导轨17上滑动，导轨17的两头还设置有限位块19。具体地，Y轴传动机构14设置在X轴传动机构13的滑块18上，Y轴传动机构14可以在X轴传动机构13的电机16带动下在X轴传动机构13的导轨17内沿X轴方向滑动；Z轴传动机构15设置在Y轴传动机构14的滑块18上，Z轴传动机构15可以在Y轴传动机构14的电机16带动下在Y轴传动机构14的导轨17内沿Y轴方向滑动；机械手21设置在Z轴传动机构15的滑块18上，机械手21在Z轴传动机构15的电机16的带动下在Z轴传动机构15的导轨17内沿Z轴方向滑动。本发明实施例的机械臂模块3通过X轴、Y轴和Z轴方向的移动，可以使得机械手21达到患者手腕处进行脉象信息采集。具体对患者手腕处穴位的精确定位，一种方式是可以根据已知的寸、关、尺穴位三维坐标信息，由主控模块4控制机械臂精准达到患者手腕的寸、关、尺穴位；另一种方式是通过远程医生端根据视频信息主动控制，控制机械臂移动至患者手腕处，并不断调整机械手21的位置，使仿真手指29与寸、关、尺穴位相贴合。本发明实施例的脉象贴片22可以为压阻式脉象传感器，压阻式脉象传感器一般采用微压力传感材料，如压电片或电桥等，将传感器的探头与动脉搏动较强的地方贴合，施加一定的压力，微压力材料可以将脉搏跳动的压力信号采集到并有电信号变化量产生，经过信号放大与调理电路处理后，可以得到脉搏跳动的完整波形，也可以进一步输出和动脉搏动同步的脉冲信号。本发明利用压阻式脉象传感器采集的信号信息作为患者的脉象信息，以供远程医生进行诊断。本发明实施例的压阻式脉象传感器有3个，分别设置于仿真手指29的食指、中指和无名指指尖部位。请继续参见图3，上述由远程医生端主动控制的方式的方案中，还包括一目标追踪相机23，用于实时采集机械臂及机械手21的运动过程图像，运动过程图像经通信模块5发送至远程医生端，以便远程医生端控制仿真手指29进行诊脉作业。本发明的主控模块4，用于根据血管显像后的腕部图像，结合视觉定位寸、关、尺脉搏穴位的方法，确定寸、关、尺脉搏穴位的位置信息；并根据位置信息控制机械臂模块3移动至患者手腕处，且使三个仿真手指29的脉象贴片22对应按压于寸、关、尺三个脉搏穴位上采集脉象信息。本发明的通信模块5，用于将采集的脉象信息传输至远程医生端，以及用于传输远程医生端的控制信号至主控模块4，以控制仿真手指29的诊脉作业。为了便于远程医生端对机械手21的精确控制，在机械手21的附近还设置有一红外测距仪24，用于实时测量机械手21距离患者手臂的距离信息，距离信息经通信模块5发送至远程医生端，以便远程医生端控制仿真手指29靠近患者手腕的寸、关、尺脉搏穴位；以及用于当距离信息小于设定的距离阈值时，主控模块4控制机械臂回拉或切断Y轴传动机构14的驱动力，以免伤到患者手腕。请继续参见图5，在机械臂移动的过程中，由于X轴传动机构13距离患者手部位置较近，为了避免X轴传动机构13滑动速度太快伤到患者手部，在一个实施例中，本发明的移动关节式诊脉仪，还可以包括一光电传感器25，用于当检测到X轴传动机构13靠近患者手臂时，发信号给主控模块4，主控模块4控制X轴传动机构13降低速度，缓慢靠近预定位置。请参见图6，图6是本发明实施例提供的一种机械手21的结构示意图；本发明的机械手21，包括微动电机26、与微动电机26输出端连接的丝杆27、滑台28，以及仿真手指29，滑台28在微动电机26的驱动下可以在丝杆27上上下运动，仿真手指29与滑台28连接，因此仿真手指29在微动电机26的驱动下实现伸缩动作，以及对患者手腕穴位的施压大小控制。在丝杆27的上端附近设置有第一限位开关30，当滑台28向上碰触到第一限位开关30时微动电机26停机，防止滑台28归位时顶到电机16；在丝杆27的下端附近设置有第二限位开关31，当滑台28向下碰触到第二限位开关31时微动电机26停机，防止仿真手指29向下压力太大伤到患者手腕。本发明的主控模块4还用于解译远程医生端输入的压力信号为微动电机26的脉冲信号，从而控制仿真手指29的伸缩来实现感知脉搏的沉浮作业。此外还用于在远程医生端的控制下控制X轴传动机构13、Y轴传动机构14和Z轴传动机构15运动，以实现感知脉管宽度作业。可以理解的是，本发明实施例的移动关节式诊脉仪还设置有开始、复原和急停按钮，患者可以在使用移动关节式诊脉仪时根据需要自行按下对应的按钮进行相应操作。请参见图7，图7是本发明实施例提供的一种移动关节式诊脉仪的外观示意图；除脉枕11外，其余部件均可以设置在一个诊脉仪壳体内，为了便于观察，壳体可设计成透明壳体。患者在使用诊脉仪时，只需将手臂放置于脉枕11上，并通过限位模块调整手腕处于图像采集模块1的正下方，便可以操作开始按钮进行自动智能诊脉；当诊脉完成后按下复原按钮，各部件复位且电源切断；当诊脉过程中遇到需要急停的情况按下急停按钮即可将诊脉仪紧急停止操作。下面结合本发明的移动关节式诊脉仪的具体结构和操作原理对诊脉流程进行详细说明。寻脉阶段患者将手臂放置于脉枕11上，手部在手部防护挡板的作用下使患者腕部处于图像采集模块1的正下方，按下“开始”按钮，诊脉仪开始工作。首先，红外血管显像仪7用于对患者手腕进行血管显像，双目相机6再采集血管显像后的腕部图像，结合视觉定位寸、关、尺脉搏穴位的方法，确定寸、关、尺脉搏穴位的位置信息。确定寸、关、尺脉搏穴位的位置信息后，该位置信息被发送至主控模块4，主控模块4控制机械臂模块3运动使仿真手指29到达相应的穴位位置。具体工作原理为：Y轴传动机构14在X轴传动机构13上滑动，当X轴传动机构13的滑台28被光电传感器25检测到时，降低滑动速度，缓慢靠近制定位置时待机等待；此时Z轴传动机构15开始在Y轴传动机构14上向下缓慢下降，当红外测距仪24检测到机械手21至患者手腕的距离到达设定距离阈值时，Y轴传动机构14停止下降，待机等待；此时机械手21在Z轴传动机构15上向手腕处方向运动，仿真手指29开始靠近预先确定的寸、关、尺三个脉搏穴位；此过程中，目标追踪相机23会实时追踪仿真手指29的指尖与手腕表面的接触情况，直至脉象贴片22采集到脉象信息，并通过通信反馈给远程医生端，即完成寻脉作业。实时诊脉阶段为了实现更精确的诊脉，在实时诊脉阶段，可以由远程医生端通过通信模块5和控制模块远程实时控制仿真手指29进行诊脉作业。具体工作原理是：医生在远程通过双目相机6及目标追踪相机23实时观看患者手臂以及仿真手指29的位置，并控制仿真手指29对寸、关、尺三个脉搏穴位进行诊脉；医生在远程按压所产生的压力信号通过电信号传输至本地的移动关节式诊脉仪，通过主控模块4的解译后转化为机械手21微动电机26的脉冲信号，从而可以控制机械手21仿真手指29的伸缩，完成诊脉轻按与重按作业也称为感知脉搏的沉浮作业；此外还可以通过远程控制X轴传动机构13、Y轴传动机构14和Z轴传动机构15运动在小幅度范围内的进退，完成感知脉管宽度作业。诊脉结束复位阶段当诊脉结束后，患者从诊脉仪移除手臂，并按下诊脉仪上的复原按钮，此时双目相机6、红外血管显像仪7及目标追踪相机23完成断电关机，随后仿真手指29在主控模块4的控制下回缩，当复位时微动电机26断电；此时在主控模块4的控制下Z轴传动机构15上移，并关闭其驱动电机16，Y轴传动机构14后移，并关闭其驱动电机16；至此所有电机16完成复位，诊脉仪完成复位即关机。急停情况情况一：当红外测距仪24检测到机械手21至患者手腕的距离小于设定距离阈值时，控制系统会控制机械手21及时回拉或切断仿真手指29及Y轴传动机构14的驱动力，并提示医生观测实时图像，等待进一步操作。情况二：当仿真手指29向下运动采集患者脉搏时，碰触到机械手21旁边安装的第二限位开关31模块时，及时回拉并提示医生观测实时图像，等待进一步操作。情况三：当患者按下急停按钮时，控制模块会及时切断X轴传动机构13、Y轴传动机构14和Z轴传动机构15以及仿真手指29的驱动动力。下面对本发明所涉及的视觉定位寸、关、尺脉搏穴位的方法进行说明。视觉定位寸、关、尺脉搏穴位的方法包括步骤：S1、利用红外血管显像仪对患者手腕上寸、关、尺脉搏穴位所在的目标区域进行显像；S2、利用双目相机采集血管显像后目标区域的图像，并将采集到的两图像进行融合，得到融合后血管可视化图像；本发明实施例利用双目相机的两个摄像头拍摄血管可视化后的手腕目标区域，可以分别得到一张血管可视化图像。然后，可以利用现有的双目相机图像融合算法，将两个摄像头采集到的血管可视化图像进行融合，得到融合后血管可视化图像。关于双目相机采集图像并进行图像融合的具体处理过程，请参见相关技术理解，在此不做详细说明。S3、根据融合后血管可视化图像确定患者手腕上桡骨茎突所在点的二维平面坐标，并确定桡骨茎突所在点与双目相机中心的目标距离；发明人通过对中医穴位理论进行研究，发现人体手腕上桡骨茎突所在点与寸、关、尺脉搏穴位具有一定的位置关系，同时，由于桡骨茎突相比于手腕其余部位，具有突出的弯曲特征，因此，可以对其进行定位，从而在其位置基础上，定位出寸、关、尺脉搏穴位。可选的一种实施方式中，根据融合后血管可视化图像确定患者手腕上桡骨茎突所在点的二维平面坐标，包括：根据融合后血管可视化图像，确定患者手腕上桡骨所在的边缘曲线上拐点的平面坐标，得到患者手腕上桡骨茎突所在点的二维平面坐标。该步骤是利用图像处理方法对融合后血管可视化图像进行处理，所谓的拐点表示的是一个弯曲特征点，即手腕向大鱼际延伸的边缘曲线中曲度的突变点。本发明实施例将手腕所在平面定义为XY平面，因此，所得到的平面坐标是指X坐标和Y坐标。其中，图像处理方法包括经典的图像处理算法和机器学习方法等，在此不做具体限制。本发明实施例寻找桡骨茎突位置之所以利用红外血管显像仪显像并得到血管可视化图像，而并非直接对人体手腕采集可见光图像，是因为发明人经过实验验证，对于手腕桡骨茎突的识别仅使用可见光成像无法达到理想的效果。究其原因在于：桡骨茎突的位置大致位于距离“鱼际线”1.0～1.3mm的拇指侧手腕部，其曲线特征并不明显；同时，由于人的体质并不相同，桡骨茎突的显现也存在个体差异，尤其是对于体形较胖的个体，其桡骨茎突处几乎显现不出曲线特征。而本发明实施例利用血管可视化图像辅助定位识别的优势在于，血管可视化图像增加了目标和背景的差异，突出强调了含有桡骨茎突的脉搏穴位位置的图像特征，使得凸起的曲线特征显像更明显，因此能够更清晰准确地识别出人体手腕上桡骨所在的边缘曲线，从而定位其拐点得到桡骨茎突所在点的位置。其次，血管可视化对于“鱼际”等约束定位的特征起到了增强作用；血管可视化图像中血管的走向也有助于识别桡骨茎突的位置。可选的一种实施方式中，确定桡骨茎突所在点与双目相机中心的目标距离，包括：利用双目测距方法确定桡骨茎突所在点与双目相机中心的目标距离。可以理解的是，双目测距方法可以测量目标距离双目相机中心的距离，因此，在确定桡骨茎突所在点后，可以将其作为目标测得桡骨茎突所在点与双目相机中心的目标距离。其中，双目测距方法的实现过程可以分为四个步骤：相机标定、双目校正、双目匹配和深度信息计算。具体过程请参见相关技术理解，在此不做详细说明。S4、根据二维平面坐标和目标距离，确定桡骨茎突所在点的三维坐标；本发明可以通过限位脉枕模块使目标区域位于红外血管显像仪和双目相机正下方的拍摄区域内，桡骨茎突所在点与双目相机中心的目标距离可以等同于桡骨茎突所在点的高度信息，因此，可以将其转换为Z坐标，连同表征X坐标和Y坐标的二维平面坐标，一起构成桡骨茎突所在点的三维坐标。S5、根据融合后血管可视化图像确定患者手腕的直径信息，并确定患者手臂的偏转角度；具体的，可以利用图像处理方法识别融合后血管可视化图像中分别位于患者手腕两侧的预定边缘点，然后计算这两个预定边缘点之间的距离，得到患者手腕的直径信息。其中，预定边缘点可以根据掌根位置、腕横纹位置或者桡骨茎突位置等确定。确定患者手臂的偏转角度，具体可以包括：1)根据融合后血管可视化图像，确定患者的手臂方向。该步骤也可以利用图像处理方法实现。患者的手臂方向可以通过手臂边缘、掌根线等确定。比如可以利用图像处理方法在融合后血管可视化图像定位出手臂边缘线条，将其拟合校正为直线，将该直线方向确定为患者的手臂方向。2)确定手臂方向相较于手臂所在平面水平方向的偏转角度。S6、根据桡骨茎突所在点的三维坐标、直径信息、偏转角度，以及预先建立的目标模型，分别计算患者的寸、关、尺脉搏穴位的三维坐标；其中，目标模型表征桡骨茎突所在点的三维坐标、人体手腕直径、手臂的偏转角度与寸、关、尺脉搏穴位的三维坐标之间的函数关系，根据样本数据预先实验构建。本发明采用的目标模型为：其中，θ表示偏转角度；D表示直径信息；表示桡骨茎突所在点的三维坐标；、、分别表示患者的寸、关、尺脉搏穴位的三维坐标；分别表示双目相机两个摄像头到寸、关、尺脉搏穴位的视差，由实验确定；kc、kg、kch分别表示桡骨茎突所在点至寸、关、尺脉搏穴位的距离，与直径信息的关系系数；k′xc1、k′yc2、kzc1、k′xg1、k′yg2、kzg1、k′xch1、k′ych2、kzch1分别表示寸、关、尺脉搏穴位的三维坐标在x、y、z三个方向各自的分解系数，由实验确定。需要说明的是，本发明实施例中，目标模型的关系系数和分解系数可以通过采集多组不同性别、不同年龄、不同身高的人的脉搏穴位数据实验统计分析得到。通过实验数据的统计分析，本发明实施例可以确定：kc＝0.27；kg＝0.48；kch＝0.75；k′xc1＝55.5；k′xg1＝62.5；k′xch1＝60.8；k′yc2＝k′yg2＝k′ych2＝31.25；kzc1＝kzg1＝kzch1＝0。本发明实施例提供的视觉定位寸、关、尺脉搏穴位的方法，首先利用红外血管显像仪对患者手腕上寸、关、尺脉搏穴位所在的目标区域进行显像；并利用双目相机采集血管显像后目标区域的图像，进行两图像融合得到融合后血管可视化图像。然后对融合后血管可视化图像采用图像处理手段检测桡骨茎突位置、手腕直径和手臂偏转角度，并根据预先建立的目标模型计算患者的寸、关、尺脉搏穴位的三维坐标，实现了利用视觉定位方法由图像确定患者的寸、关、尺脉搏穴位的三维坐标。由于血管可视化图像对目标和背景进行了显像增强，能够提高特征识别精度，同时，采用图像处理手段进行像素级定位能够提高定位的准确度，因此本发明实施例能够自动、准确定位患者的寸、关、尺脉搏穴位，无需依靠人为经验寻找穴位，同时能够完全地解放患者，有利于实现智能诊脉。本发明实施例提供的移动关节式诊脉仪，通过视觉定位寸、关、尺脉搏穴位的位置信息，可以准确识别患者的寸、关、尺脉搏穴位，再由主控模块控制机械臂模块向患者穴位移动，可以引导仿真手指精准达到患者的寸、关、尺脉搏穴位，实现远程智能诊脉。此外，远程医生端通过对仿真手指按压患者穴位的压力大小的精确控制，以及对机械臂模块在小幅度范围内的进退，可以使仿真手指模仿医生切脉手法实现感知脉搏的沉浮作业和感知脉管宽度作业，实现远程精确诊脉。以上内容是结合具体的优选实施方式对本发明所作的进一步详细说明，不能认定本发明的具体实施只局限于这些说明。对于本发明所属技术领域的普通技术人员来说，在不脱离本发明构思的前提下，还可以做出若干简单推演或替换，都应当视为属于本发明的保护范围。
