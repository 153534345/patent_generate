标题title
心电校准系统、方法、设备及存储介质
摘要abst
本申请提供心电校准系统、方法、设备及存储介质，包括：心电参数校准模块，包括相互连接的第一主控单元和校准单元；心电参数检测模块，包括相互连接的第二主控单元和心电信号转换单元；心电信号转换单元导联校准单元；第一主控单元响应于用户操作建立与第二主控单元的通讯连接，并在判断心电参数检测模块未进行心电参数校准后，令校准单元发出校准信号并向第二主控单元发送校准指令；第二主控单元采集心电信号并计算定标参数，从第二主控单元读取多个定标参数，并生成对应的校准参数后发送至第二主控单元，以供根据校准参数进行心电校准。据此实现自动计算心电参数，无需重复校准，无需人工参与，大大节省了产品的生产时间与生产成本。
权利要求书clms
1.一种心电校准系统，其特征在于，包括：心电参数校准模块，包括相互连接的第一主控单元和校准单元；心电参数检测模块，包括相互连接的第二主控单元和心电信号转换单元；所述心电信号转换单元导联所述校准单元；所述第一主控单元响应于用户操作建立与所述第二主控单元的通讯连接，并在判断所述心电参数检测模块未进行心电参数校准后，令所述校准单元发出校准信号并向所述第二主控单元发送校准指令；所述第二主控单元在心电信号转换单元导联状态稳定的情况下，采集心电信号并计算对应的定标参数；所述第一主控单元从第二主控单元读取多个所述定标参数，并根据该些定标参数生成对应的校准参数后发送至所述第二主控单元，以供根据所述校准参数进行心电校准。2.根据权利要求1所述的心电校准系统，其特征在于，所述第一主控单元使能连接所述校准单元；所述第二主控单元使能连接所述心电信号转换单元；所述第二主控单元还通过连接所述心电信号转换单元来检测所述心电信号转换单元与校准单元之间的导联状态。3.根据权利要求1所述的心电校准系统，其特征在于，所述心电参数校准模块设有按键输入单元，连接所述第一主控单元，用于感应用后操作后触发校准信号。4.根据权利要求1所述的心电校准系统，其特征在于，所述心电参数校准模块通过第一主控单元读取所述第二主控单元中存储的心电校准有效位，据以判断所述心电参数检测模块是否已校准。5.根据权利要求1所述的心电校准系统，其特征在于，所述第二主控单元在接收到校准指令后进入校准模式，使能所述心电信号转换单元并判断所述心电信号转换单元的导联状态；在导联状态稳定的情况下从所述心电信号转换单元采集心电电压信号，并计算预设周期内所采集的心电电压信号的定标参数。6.根据权利要求5所述的心电校准系统，其特征在于，所述第一主控单元从第二主控单元读取多个所述定标参数，并根据该些定标参数生成对应的校准参数，其过程包括：所述第一主控单元在判断当前心电参数校准模块和心电参数检测模块处于稳定状态后，从所述第二主控单元连续读取多个定标参数；对所读取的多个定标参数滤波后进行求取平均值的计算，以平均值作为所述校准参数。7.根据权利要求1所述的心电校准系统，其特征在于，所述第一主控单元将所述校准参数发送至所述第二主控单元后，第二主控单元将所述校准参数和校准完成状态位写入其存储单元中并进行校准，并在校准完成后将校准完成状态位反馈至所述第一主控单元，并关闭所述心电信号转换单元。8.一种心电校准方法，其特征在于，应用于权利要求1中心电校准系统的第一主控单元；所述心电校准方法包括：响应于用户操作建立与心电参数检测模块中第二主控单元的通讯连接；在判断所述心电参数检测模块未进行心电参数校准后，令校准单元向所述心电参数检测模块中的心电信号转换单元发出校准信号，并向所述第二主控单元发送校准指令，以令所述第二主控单元采集心电信号并计算对应的定标参数；从所述第二主控单元读取多个所述定标参数并据以生成对应的校准参数，将所述校准参数发送至所述第二主控单元供进行心电校准。9.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求8所述的心电校准方法。10.一种主控设备，其特征在于，包括：处理器及存储器；所述存储器用于存储计算机程序；所述处理器用于执行所述存储器存储的计算机程序，以使所述设备执行如权利要求8所述的心电校准方法。
说明书desc
技术领域本申请涉及智能控制领域，特别是涉及心电校准系统、方法、设备及存储介质。背景技术心电图是一种经体壁以时间为单位记录心脏的电生理活动，并通过接触皮肤的电极捕捉且记录下来的诊疗技术。心电图的工作原理如下：在每次心跳心肌细胞去极化的时候会在皮肤表面引起很小的电学改变，这个小变化被心电图记录装置捕捉并放大即可描绘心电图。在心肌细胞处于静息状态时，心肌细胞膜两侧存在由正负离子浓度差形成的电势差，去极化即是心肌细胞电势差迅速向0变化，并引起心肌细胞收缩的过程。在健康心脏的一个心动周期中，由窦房结细胞产生的去极化波有序的依次在心脏中传播，先传播到整个心房，经过“内在传导通路”传播至心室。如果在心脏的任意两面放置2个电极，那么在这个过程中就可以记录到两个电极间微小的电压变化，并可以在心电图纸或者监视器上显示出来。心电图可以反应整个心脏跳动的节律，以及心肌薄弱的部分。心电检测模块利用体表电极提取人体电信号，经过输入缓冲放大器、威尔逊网络、导联选择电路送入前置放大、滤波电路，再由A/D转换后传入主控单元进行相应信号处理并送至终端，从而获得心电波形。为了确保心电波形幅值的准确性，一般在使用心电检测模块之前需进行定标，定标电压主要用于比较心电信号幅值大小，也可用于校正放大器增益、时间常数、频率响应等参数，定标误差大则会造成所记心电波形的失真，致使所测数据失去临床诊断意义，故定标电压的准确性必须获得保障，心电检测模块校准参数计算公式如下所示：定标参数＝采样数据max—采样数据min——公式1由于模块及外围电路生产工艺等因素的影响导致每个心电检测模块的参数都需要做一次校准工作。产品在设计研发阶段时使用到的电路及控制板的数量规模并不多，因此人工校准心电参数对于整体的项目进度及工时方面影响不大，但是当产品处于生产阶段时，由于批量加工生产，产量大，在去用人工来校准心电参数会极大的影响工厂生产效率，增加生产时间和生产成本。发明内容鉴于以上所述现有技术的缺点，本申请的目的在于提供心电校准系统、方法、设备及存储介质，用于解决现有技术中需要人工参与计算心电参数的问题。为实现上述目的及其他相关目的，本申请的第一方面提供一种心电校准系统，包括：心电参数校准模块，包括相互连接的第一主控单元和校准单元；心电参数检测模块，包括相互连接的第二主控单元和心电信号转换单元；所述心电信号转换单元导联所述校准单元；所述第一主控单元响应于用户操作建立与所述第二主控单元的通讯连接，并在判断所述心电参数检测模块未进行心电参数校准后，令所述校准单元发出校准信号并向所述第二主控单元发送校准指令；所述第二主控单元在心电信号转换单元导联状态稳定的情况下，采集心电信号并计算对应的定标参数；所述第一主控单元从第二主控单元读取多个所述定标参数，并根据该些定标参数生成对应的校准参数后发送至所述第二主控单元，以供根据所述校准参数进行心电校准。于本申请的第一方面的一些实施例中，所述第一主控单元使能连接所述校准单元；所述第二主控单元使能连接所述心电信号转换单元；所述第二主控单元还通过连接所述心电信号转换单元来检测所述心电信号转换单元与校准单元之间的导联状态。于本申请的第一方面的一些实施例中，所述心电参数校准模块设有按键输入单元，连接所述第一主控单元，用于感应用后操作后触发校准信号。于本申请的第一方面的一些实施例中，所述心电参数校准模块通过第一主控单元读取所述第二主控单元中存储的心电校准有效位，据以判断所述心电参数检测模块是否已校准。于本申请的第一方面的一些实施例中，所述第二主控单元在接收到校准指令后进入校准模式，使能所述心电信号转换单元并判断所述心电信号转换单元的导联状态；在导联状态稳定的情况下从所述心电信号转换单元采集心电电压信号，并计算预设周期内所采集的心电电压信号的定标参数。于本申请的第一方面的一些实施例中，所述第一主控单元从第二主控单元读取多个所述定标参数，并根据该些定标参数生成对应的校准参数，其过程包括：所述第一主控单元在判断当前心电参数校准模块和心电参数检测模块处于稳定状态后，从所述第二主控单元连续读取多个定标参数；对所读取的多个定标参数滤波后进行求取平均值的计算，以平均值作为所述校准参数。于本申请的第一方面的一些实施例中，所述第一主控单元将所述校准参数发送至所述第二主控单元后，第二主控单元将所述校准参数和校准完成状态位写入其存储单元中，并在写入完成后将校准完成状态位反馈至所述第一主控单元，并关闭所述心电信号转换单元。为实现上述目的及其他相关目的，本申请的第二方面提供一种心电校准方法，应用于第一主控单元；所述方法包括：响应于用户操作建立与心电参数检测模块中第二主控单元的通讯连接；在判断所述心电参数检测模块未进行心电参数校准后，令校准单元向所述心电参数检测模块中的心电信号转换单元发出校准信号，并向所述第二主控单元发送校准指令，以令所述第二主控单元采集心电信号并计算对应的定标参数；从所述第二主控单元读取多个所述定标参数并据以生成对应的校准参数，将所述校准参数发送至所述第二主控单元供进行心电校准。为实现上述目的及其他相关目的，本申请的第三方面提供一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现所述心电校准方法。为实现上述目的及其他相关目的，本申请的第四方面提供一种主控设备，包括：处理器及存储器；所述存储器用于存储计算机程序，所述处理器用于执行所述存储器存储的计算机程序，以使所述设备执行所述心电校准方法。如上所述，本申请的心电校准系统、方法、设备及存储介质，具有以下有益效果：本发明可自动计算出心电参数，并且将参数写入心电监测模块主控单元的Flash里面，无需重复校准，且在校准期间无需人工参与计算心电参数，大大节省了产品的生产时间与生产成本。附图说明图1显示为本申请一实施例中心电校准系统的结构示意图。图2显示为本申请一实施例中心电校准方法的流程示意图。图3显示为本申请一实施例中主控设备的结构示意图。具体实施方式以下通过特定的具体实例说明本申请的实施方式，本领域技术人员可由本说明书所揭露的内容轻易地了解本申请的其他优点与功效。本申请还可以通过另外不同的具体实施方式加以实施或应用，本说明书中的各项细节也可以基于不同观点与应用，在没有背离本申请的精神下进行各种修饰或改变。需说明的是，在不冲突的情况下，以下实施例及实施例中的特征可以相互组合。需要说明的是，在下述描述中，参考附图，附图描述了本申请的若干实施例。应当理解，还可使用其他实施例，并且可以在不背离本申请的精神和范围的情况下进行机械组成、结构、电气以及操作上的改变。下面的详细描述不应该被认为是限制性的，并且本申请的实施例的范围仅由公布的专利的权利要求书所限定。这里使用的术语仅是为了描述特定实施例，而并非旨在限制本申请。空间相关的术语，例如“上”、“下”、“左”、“右”、“下面”、“下方”、“下部”、“上方”、“上部”等，可在文中使用以便于说明图中所示的一个元件或特征与另一元件或特征的关系。在本申请中，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”、“固定”、“固持”等术语应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本申请中的具体含义。再者，如同在本文中所使用的，单数形式“一”、“一个”和“该”旨在也包括复数形式，除非上下文中有相反的指示。本发明的说明书和权利要求书及上述附图中的术语“第一”、“第二”、“第三”“第四”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的实施例能够以除了在这里图示或描述的内容以外的顺序实施。此外，术语“包含”、“包括”表明存在所述的特征、操作、元件、组件、项目、种类、和/或组，但不排除一个或多个其他特征、操作、元件、组件、项目、种类、和/或组的存在、出现或添加。应当进一步理解，此处使用的术语“或”和“和/或”被解释为包括性的，或意味着任一个或任何组合。因此，“A、B或C”或者“A、B和/或C”意味着“以下任一个：A；B；C；A和B；A和C；B和C；A、B和C”。仅当元件、功能或操作的组合在某些方式下内在地互相排斥时，才会出现该定义的例外。为了使本发明的目的、技术方案及优点更加清楚明白，通过下述实施例并结合附图，对本发明实施例中的技术方案的进一步详细说明。应当理解，此处所描述的具体实施例仅用以解释本发明，并不用于限定发明。如图1所示，展示了本发明实施例中的一种心电校准系统的结构示意图。本实施例中的心电校准系统包括心电参数校准模块11和心电参数检测模块12，所述心电参数校准模块11包括相互连接的第一主控单元111和校准单元112，心电参数检测模块12包括相互连接的第二主控单元121和心电信号转换单元122，所述心电信号转换单元122导联所述校准单元112。所述第一主控单元111响应于用户操作建立与所述第二主控单元121的通讯，并在判断所述心电参数检测模块12未进行心电参数校准后，令所述校准单元112发出校准信号并向所述第二主控单元121发送校准指令；所述第二主控单元121在心电信号转换单元122导联状态稳定的情况下，采集心电信号并计算对应的定标参数；所述第一主控单元111从第二主控单元121读取多个所述定标参数，并根据该些定标参数生成对应的校准参数后发送至所述第二主控单元121，以供根据所述校准参数进行心电校准。需说明的是，所述第一主控单元111/第二主控单元121可以是单片机或控制器。第一主控单元111和第二主控单元121之间可通过多种通讯接口进行通讯，本实施例可选用的通讯接口包括但不限于如RS485、RS232、UART、IIC等。在一些示例中，所述心电信号转换单元122导联所述校准单元112是指，所述校准单元112设有多个导联接口，包括但不限于左手导联接口、右手导联接口和右脚导联接口，心电信号转换单元122也设有多个导联接口，包括但不限于左手导联接口、右手导联接口和右脚导联接口。心电信号转换单元122的左手导联接口、右手导联接口及右脚导联接口分别连接校准单元112的左手导联接口、右手导联接口及右脚导联接口。较为优选的是，心电信号转换单元122的左手导联接口、右手导联接口及右脚导联接口通过屏蔽线连接至校准单元112的左手导联接口、右手导联接口及右脚导联接口，以防止信号干扰；所述屏蔽线是为减少外电磁场对电源或通信线路的影响而专门采用的一种带有金属编织物外壳的导线，这种屏蔽线也有防止线路向外辐射电磁能的作用。在一些示例中，所述第一主控单元111使能连接所述校准单元112。第一主控单元111设有校准控制端口，校准单元112设有使能端口；第一主控单元111的校准控制端口连接校准单元112的使能端口，通过IO控制校准单元112的开启与关闭。在一些示例中，所述心电参数校准模块11设有按键输入单元113，连接第一主控单元111的输入接口，用于感应用户操作。也即，按键输入单元113感应到用户操作后会触发校准信号，进而开启校准流程。在一些示例中，所述心电参数校准模块11设有状态显示单元114，连接第一主控单元111的输出接口，用于显示当前校准的状态及速度。在一些示例中，所述第二主控单元121使能连接心电信号转换单元122。第二主控单元121设有心电检测控制端口，心电信号转换单元122设有使能端口；第二主控单元121的心电检测控制端口连接心电信号转换单元122的使能端口，通过IO控制心电信号转换单元122的开启与关闭。举例来说，心电信号转换单元122的使能端口可选用SDN引脚，第二主控单元121通过心电检测控制端口控制SDN引脚来开启或关闭心电信号转换单元122。进一步地，所述第二主控单元121还通过连接心电信号转换单元122来检测检测所述心电信号转换单元122与校准单元112之间的导联状态。具体而言，所述第二主控单元121设有导联检测端口，心电信号转换单元122设有与所述导联检测接口相连的导联状态接口；第二主控单元121通过导联检测接口来读取导联状态。举例来说，心电信号转换单元122的导联状态接口可选用LOD引脚，第二主控单元121的导联检测接口通过LOD引脚状态来判断心电导联脱落或断开。在一些示例中，所述第二主控单元设有模数转换端口，连接心电信号转换单元122的电压信号端口，用于将模拟电压信号转换为数字电压信号。较为优选的是，ADC端口以250Hz的频率采集模拟电压信号。上文，对本发明实施例中的一种心电校准系统的结构做了详尽的解释。下文，将对本系统的校准过程做进一步的说明。初次上电阶段，第一主控单元111初始化Flash，将心电校准状态设置为未校准状态，随后进入待机状态，等待心电参数校准模块就绪触发校准模式。其中，所述将心电校准状态设置为未校准状态，主要是通过第二主控单元的Flash中心电校准有效位来实现的，心电校准有效位有效则说明是已校准状态，心电校准有效位无效则说明是未校准状态。再次上电阶段，第一主控单元111在检测到按键输入单元113触发校准信号后通过通讯接口建立与第二主控单元121的通讯连接，并通过读取第二主控单元121的Flash中心电校准有效位来判断心电参数检测模块12是否已经校准。若已完成校准则不进行校准；若未完成校准则通过通讯接口向第二主控单元121发送校准指令，触发第二主控单元121进入校准模式；与此同时，使能校准单元112，从而使校准单元112输出校准信号。较为优选的是，使用幅值为1mv频率为1Hz的方波信号作为输出校准信号。第二主控单元121接收到校准指令后进入校准模式：通过心电检测控制端口向心电信号转换单元122发送控制信号，使能心电信号转换单元122。通过导联检测端口从导联状态端口处获取信号，从而判断心电信号转换单元122的导联状态；其中，若所述心电信号转换单元122连续若干时间都处于连接状态，则可将当前连接状态视为稳定连接状态；若所述心电信号转换单元122的连接状态无法持续若干时间，换言之在若干时间内出现导联脱落的现象，则视为不稳定连接状态。应理解的是，心电信号的采集应在导联状态稳定的情况下通过ADC端口以一定频率采集心电信号转换单元122输出的电压信号，若在采集过程中检测到导联脱落则需等待心电信号转换单元进入稳定连接状态，并重新采集心电数据。第二主控单元121在采集到电压信号后，在一定周期内的电压信号通过上述公式1计算当前的定标参数，并将计算得到的定标参数保存至缓存中；公式如下：定标参数＝采样数据max—采样数据min。第一主控单元111通过RS485、RS232、UART或IIC等通讯接口读取第二主控单元121中缓冲的定标参数，通过幅值跟踪算法判断当前心电参数校准模块11和心电参数检测模块12是否处于稳定状态，并在判断为处于稳定状态后，连续读取多个定标参数经滤波算法进行滤波，以滤波数据之和的平均值作为心电参数检测模块12的校准参数。在确定校准参数后，第一主控单元111通过RS485、RS232、UART或IIC等通讯接口将校准参数传送至第二主控单元121进行心电校准。第二主控单元121将校准参数和校准完成状态位写入到Flash中，通过RS485、RS232、UART或IIC等通讯接口将校准完成状态位反馈至第一主控单元111，并通过心电检测控制端口关闭心电信号转换单元122。第一主控单元111在接收到第二主控单元121发送的校准完成状态位后退出校准模式，并通过校准控制端口关闭校准单元112，并控制蜂鸣器或状态显示单元114提示校准成功，自此整个校准流程结束。如图2所示，展示了本发明实施例中的一种心电校准方法的流程示意图。本实施例中的心电校准方法应用于上述心电校准系统的心电参数校准模块中的第一主控单元。所述心电校准方法主要包括如下各个步骤。步骤S21：响应于用户操作建立与心电参数检测模块中第二主控单元的通讯连接。步骤S22：在判断所述心电参数检测模块未进行心电参数校准后，令校准单元向所述心电参数检测模块中的心电信号转换单元发出校准信号，并向所述第二主控单元发送校准指令，以令所述第二主控单元采集心电信号并计算对应的定标参数。步骤S23：从所述第二主控单元读取多个所述定标参数并据以生成对应的校准参数，将所述校准参数发送至所述第二主控单元供进行心电校准。需说明的是，本实施例中心电校准方法的实施过程及原理与上文中心电校准系统的类似，因此不再赘述。如图3所示，展示了本发明实施例中的一种主控设备的结构示意图。本实施例中的主控设备，包括：处理器31、存储器32、通信器33；存储器32通过系统总线与处理器31和通信器33连接并完成相互间的通信，存储器32用于存储计算机程序，通信器33用于和其他设备进行通信，处理器31用于运行计算机程序，使电子终端执行如上心电校准方法的各个步骤。上述提到的系统总线可以是外设部件互连标准总线或扩展工业标准结构总线等。该系统总线可以分为地址总线、数据总线、控制总线等。为便于表示，图中仅用一条粗线表示，但并不表示仅有一根总线或一种类型的总线。通信接口用于实现数据库访问装置与其他设备之间的通信。存储器可能包含随机存取存储器，也可能还包括非易失性存储器，例如至少一个磁盘存储器。上述的处理器可以是通用处理器，包括中央处理器、网络处理器等；还可以是数字信号处理器、专用集成电路、现场可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件。本发明还提供一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现所述心电校准方法。本领域普通技术人员可以理解：实现上述各方法实施例的全部或部分步骤可以通过计算机程序相关的硬件来完成。前述的计算机程序可以存储于一计算机可读存储介质中。该程序在执行时，执行包括上述各方法实施例的步骤；而前述的存储介质包括：ROM、RAM、磁碟或者光盘等各种可以存储程序代码的介质。于本申请提供的实施例中，所述计算机可读写存储介质可以包括只读存储器、随机存取存储器、EEPROM、CD-ROM或其它光盘存储装置、磁盘存储装置或其它磁存储设备、闪存、U盘、移动硬盘、或者能够用于存储具有指令或数据结构形式的期望的程序代码并能够由计算机进行存取的任何其它介质。另外，任何连接都可以适当地称为计算机可读介质。例如，如果指令是使用同轴电缆、光纤光缆、双绞线、数字订户线或者诸如红外线、无线电和微波之类的无线技术，从网站、服务器或其它远程源发送的，则所述同轴电缆、光纤光缆、双绞线、DSL或者诸如红外线、无线电和微波之类的无线技术包括在所述介质的定义中。然而，应当理解的是，计算机可读写存储介质和数据存储介质不包括连接、载波、信号或者其它暂时性介质，而是旨在针对于非暂时性、有形的存储介质。如申请中所使用的磁盘和光盘包括压缩光盘、激光光盘、光盘、数字多功能光盘、软盘和蓝光光盘，其中，磁盘通常磁性地复制数据，而光盘则用激光来光学地复制数据。综上所述，本申请提供心电校准系统、方法、设备及存储介质，本发明可自动计算出心电参数，并且将参数写入心电监测模块主控单元的Flash里面，无需重复校准，且在校准期间无需人工参与计算心电参数，大大节省了产品的生产时间与生产成本。所以，本申请有效克服了现有技术中的种种缺点而具高度产业利用价值。上述实施例仅例示性说明本申请的原理及其功效，而非用于限制本申请。任何熟悉此技术的人士皆可在不违背本申请的精神及范畴下，对上述实施例进行修饰或改变。因此，举凡所属技术领域中具有通常知识者在未脱离本申请所揭示的精神与技术思想下所完成的一切等效修饰或改变，仍应由本申请的权利要求所涵盖。
