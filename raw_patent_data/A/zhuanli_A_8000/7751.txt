标题title
一种基于压电传感器的在离床辅助判断装置和方法
摘要abst
本发明公开了一种基于压电传感器的在离床辅助判断装置和方法，外接处理器经压电薄膜上按照点阵图形式分布的若干压电传感器实时采集压力值，进行滤波降噪、特征参数提取、差分和波动计算得到波动特征指标后，根据波动特征参数进行辅助在离床判断；通过长时间的在离床辅助判断来提升和纠正在离床判断结果，在不增加传感器测量维度的条件下，提升在离床判断结果的准确性和可靠性，并能在发生误判在离床状态条件下，及时纠正误判的结果；能够提升在离床判断结果的准确性和可靠性，同时结构简单，成本低廉。
权利要求书clms
1.一种基于压电传感器的在离床辅助判断装置，其特征在于：包括有压电薄膜、外接处理器和中央控制单元；所述压电薄膜固定设置于床垫上，压电薄膜上设置有若干压电传感器，若干压电传感器按照点阵图形式分布设置于压电薄膜上；所述外接处理器通讯连接至所有压电传感器和中央控制单元；所述外接处理器用于实时采集和处理压电薄膜上所有压电传感器的点阵压力数据，并传输至中央控制单元；所述中央控制单元用于根据外接处理器传输的点阵压力数据进行运算，根据多样本采集后的计算特征选取阈值，在系统中先验设定阈值；再通过阈值对比判断在离床状态。2.根据权利要求1所述基于压电传感器的在离床辅助判断装置，其特征在于：所述压电薄膜的面积小于等于床垫面积；所述压电薄膜固定设置于床垫的表面层之上，或者固定嵌设床垫的表面层之下。3.根据权利要求1所述基于压电传感器的在离床辅助判断装置，其特征在于：所述外接处理器通过信有线通讯串口连接至所有压电传感器，或者通过蓝牙无线通讯连接至所有压电传感器。4.根据权利要求3所述基于压电传感器的在离床辅助判断装置，其特征在于：所述外接处理器采集的单帧数据为二维数组形式，其大小为64*32=2048。5.根据权利要求4所述基于压电传感器的在离床辅助判断装置，其特征在于：所述外接处理器采集的单帧数据信号data以灰度图形式显示；data灰度图的灰度值大小为0～255。6.一种基于压电传感器的在离床辅助判断方法，其特征在于：使用权利要求1～5之一所述基于压电传感器的在离床辅助判断装置，包括有以下步骤：S01，通过外接处理器实时采集原始压力矩阵图像，采样率为fs；S02，对单帧图像进行滤波降噪；S03，提取单帧压力矩阵特征参数datas；S04，根据单帧压力矩阵特征参数计算压力和、单帧单侧方差；S05，根据单帧特征参数判断在离床状态；S06，重复步骤S02～05，连续保存多帧特征参数；S07，将连续提取保存的步骤S03中的特征参数保存至数组fea_ds，构成特征参数集；S08，对特征参数集进行差分和波动计算；保存最新wt个连续帧的特征参数集后，计算同特征前后差分以获取同特征的差值：diff_fea；获取前后差值后，再计算diff_fea的方差，得到特征短时间内的波动特征指标：std_diffs；S09，保存S08中的连续几个波动特征指标std_diffs，并计算连续的方差的均值得到std_diff；S10，根据波动特征参数std_diff进行辅助在离床判断。7.根据权利要求6所述基于压电传感器的在离床辅助判断方法，其特征在于：所述步骤S02中采用n*n的二维中值滤波算法进行滤波降噪。8.根据权利要求7所述基于压电传感器的在离床辅助判断方法，其特征在于：所述步骤S02中包括有以下内容：通过3*3的小窗口遍历整个矩阵图像，小窗口内9个值通过排序后取中间值作为窗口中心位置的结果代替原来数据，得到中值滤波去噪结果。9.根据权利要求8所述基于压电传感器的在离床辅助判断方法，其特征在于：所述步骤S06中包括有以下内容：连续连续保存最新8s周期内的特征参数集。10.根据权利要求8所述基于压电传感器的在离床辅助判断方法，其特征在于：所述步骤S10中包括有以下内容：在床条件下，判断离床条件：std_diff ＞ th_body；离床条件下，判断上床条件：std_diff ＜= th_body。
说明书desc
技术领域本发明属于通过增加人体检测传感器来检测睡眠信息的智能床垫人体检测算法的智能床垫技术领域，具体涉及一种基于压电传感器的在离床辅助判断装置和方法。背景技术智能床垫发展方向主要有：1.植入压电传感带检测人体睡眠状态；2.通过生物电雷达来检测人体睡眠；3.通过红外探测技术实现人体睡眠检测；4通过视频图像识别来实现人体睡眠检测等；当前基于压电传感器技术的智能床垫已经有了很多实践经验积累，总体方案具有多方面优点，如：检测多种参数、方案成本低、有一定的准确性和可靠性、测量便利等，因而成为智能床垫的主流发展方向。但是基于压电传感器技术的智能床垫的在离床判断算法的准确性取决于传感器精度、算法模型合理性和人体复杂性，容易受环境的干扰，通常不可能达到100%地准确。现有技术中的在离床判断方法，一般采用单一传感器采集信号后进行在离床运算判断，也即通过一维压力波动情况等方法来获取在离床状态的算法；单一传感器处理的基本流程是：传感器信号-＞信号处理-＞信号特征提取-＞在离床判断，其基于单一传感器的压力波形进行运算处理，准确性和及时性不好，尤其是在有人安静下的场景与无人安静下的场景会存在较大的判断失效概率；而一旦发生在离床的误判，且发生在离床状态误判后不能及时进行纠正，就会导致后续较长时间的误判，准确性和无法纠正误判结果方面均存在局限性；造成后续状态判断紊乱，影响睡眠生理参数即睡眠状况判断准确性；所以对睡眠检测存在一定的瓶颈，表现在准确性不够、测量可靠性一般、适用性不够广泛等。而单纯增加传感器，采用多维传感器系统的多传感器融合技术虽然可达到及时纠正误判结果和提升结果准确性的目的，但是会增加系统处理的复杂程度和成本投入，不利于产品的成本控制。发明内容为了解决现有技术存在的上述问题，本发明目的在于提供一种基于压电传感器的在离床辅助判断装置和方法，能够提升在离床判断结果的准确性和可靠性，同时结构简单，成本低廉。本发明所采用的技术方案为：一种基于压电传感器的在离床辅助判断装置，包括有压电薄膜、外接处理器和中央控制单元；所述压电薄膜固定设置于床垫上，压电薄膜上设置有若干压电传感器，若干压电传感器按照点阵图形式分布设置于压电薄膜上；所述外接处理器通讯连接至所有压电传感器和中央控制单元；所述外接处理器用于实时采集和处理压电薄膜上所有压电传感器的点阵压力数据，并传输至中央控制单元；所述中央控制单元用于根据外接处理器传输的点阵压力数据进行运算，根据多样本采集后的计算特征选取阈值，在系统中先验设定阈值；再通过阈值对比判断在离床状态。进一步地，所述压电薄膜的面积小于等于床垫面积；所述压电薄膜固定设置于床垫的表面层之上，或者固定嵌设床垫的表面层之下。进一步地，所述外接处理器通过信有线通讯串口连接至所有压电传感器，或者通过蓝牙无线通讯连接至所有压电传感器。进一步地，所述外接处理器采集的单帧数据为二维数组形式，其大小为64*32=2048。进一步地，所述外接处理器采集的单帧数据信号data以灰度图形式显示；data灰度图的灰度值大小为0～255。本发明还涉及一种基于压电传感器的在离床辅助判断方法，使用上述基于压电传感器的在离床辅助判断装置，包括有以下步骤：S01，通过外接处理器实时采集原始压力矩阵图像，采样率为fs；S02，对单帧图像进行滤波降噪；S03，提取单帧压力矩阵特征参数datas；S04，根据单帧压力矩阵特征参数计算压力和、单帧单侧方差；S05，根据单帧特征参数判断在离床状态；S06，重复步骤S02～05，连续保存多帧特征参数；S07，将连续提取保存的步骤S03中的特征参数保存至数组fea_ds，构成特征参数集；S08，对特征参数集进行差分和波动计算；保存最新wt个连续帧的特征参数集后，计算同特征前后差分以获取同特征的差值：diff_fea；获取前后差值后，再计算diff_fea的方差，得到特征短时间内的波动特征指标：std_diffs；S09，保存S08中的连续几个波动特征指标std_diffs，并计算连续的方差的均值得到std_diff；S10，根据波动特征参数std_diff进行辅助在离床判断。再进一步地，所述步骤S02中采用n*n的二维中值滤波算法进行滤波降噪。再进一步地，所述步骤S02中包括有以下内容：通过3*3的小窗口遍历整个矩阵图像，小窗口内9个值通过排序后取中间值作为窗口中心位置的结果代替原来数据，得到中值滤波去噪结果。进一步地，所述步骤S06中包括有以下内容：连续连续保存最新8s周期内的特征参数集。最后，所述步骤S10中包括有以下内容：在床条件下，判断离床条件：std_diff＞th_body；离床条件下，判断上床条件：std_diff＜= th_body。本发明的有益效果为：一种基于压电传感器的在离床辅助判断装置和方法，外接处理器经压电薄膜上按照点阵图形式分布的若干压电传感器实时采集压力值，进行滤波降噪、特征参数提取、差分和波动计算得到波动特征指标后，根据波动特征参数进行辅助在离床判断；通过长时间的在离床辅助判断来提升和纠正在离床判断结果，在不增加传感器测量维度的条件下，提升在离床判断结果的准确性和可靠性，并能在发生误判在离床状态条件下，及时纠正误判的结果；能够提升在离床判断结果的准确性和可靠性，同时结构简单，成本低廉。附图说明图1是本发明基于压电传感器的在离床辅助判断装置的结构示意图；图2是本发明基于压电传感器的在离床辅助判断方法的压力灰度显示示意图；图3是本发明基于压电传感器的在离床辅助判断方法的流程示意图；图4是本发明基于压电传感器的在离床辅助判断方法的连续帧特征波动示意图；图5是图4中各曲线拆分后示意图；图6是本发明基于压电传感器的在离床辅助判断方法的热力图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅是本申请的一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。如图1～5所示，为解决现有技术中普遍存在的问题，本发明提供一种基于压电传感器的在离床辅助判断装置和方法，整体策划方案为：首先提供一种基于压电传感器的在离床辅助判断装置，主体结构为压电薄膜1、外接处理器4和中央控制单元；在床垫1上设置一层压电薄膜2，在压电薄膜2上设置若干个压电传感器3，若干个压电传感器3按照点阵图的形式分布设置在压电薄膜2上；具体点阵图的间隔距离按照铺满1800mm×2000mm的双人床面积均匀分布64×32，其面积大小和分布点数可以根据使用要求进行适应性调整。外接处理器通讯连接至所有压电传感器，外接处理器4通过压电薄膜上的所有压电传感器3实时采集点阵压力数据，并进行处理后传送至中央控制单元，中央控制单元再根据外接处理器传输的点阵压力数据进行算法计算，从而判断在离床状态。外接处理器和中央控制单元可以按照现有技术中的常规控制系统结构方式，设置于控制盒内，控制盒可以固定在床垫一侧的侧面内部，控制盒的控制面板外露于床垫的侧面，便于操作控制。所有压电传感器通过网格线串联，所有网格线外延连接至外接处理器，可汇集后通过每行网格横线外延连接至外接处理器。中央控制单元用于根据外接处理器传输的点阵压力数据进行运算，根据多样本采集后的计算特征选取阈值，在系统中先验设定阈值；再通过阈值对比判断在离床状态。具体阈值可以通过覆盖样本后批量计算特征值，根据特征值集合进行设定。进一步地，压电薄膜2的面积小于等于床垫1的面积；压电薄膜2可以固定设置于床垫的表面层之上，或者固定嵌设床垫的表面层之下。如图1中所示，压电薄膜2的面积小于床垫1的面积，压电薄膜的四周边缘至床垫四周边缘之间的区域为床框11所对应的区域，设置压电薄膜时预留出此区域。位于床框内部的网格区域即为压电薄膜的压电传感器布置区域，网格区域中的各节点为单个压电传感器分布位置，即单个压力输出点。并且压电薄膜从中心位置划分为左侧区域和右侧区域两部分，并在床框上标注左侧、头部标识，和右侧、头部标识，便于区分方向性。压电薄膜2可以直接铺设于床垫1的上表层上方或者嵌设于上表面层内部；或者压电薄膜2也可以通过缝合、粘贴或者拉链固定连接在床垫1的上表面层的外表面或者内表面。压电薄膜2可以直接采用现有技术中市场上销售的具有获取点阵压力功能的常规压电薄膜或者压电布，也可以根据客户使用需求向合作供应商提出设计要求，进行适应性改进。在后续产品改进过程中也可以根据新产品、新技术、新材料、新设备和新工艺的技术发展而进行创新设计。例如：现有技术中的PIEZOR压电薄膜是Beegor贝骨公司独立开发和制造的核心产品之一。PIEZOR压电薄膜是一种可测量任何形式的动态压力和振动的核心敏感材料。目前所有压电薄膜传感器、心率呼吸鼾声传感器、睡眠监测传感器、养老床垫传感器、振动体征监测、智能床垫传感器均是采用先进的Roll-to-Roll工艺制造出来。进一步地，外接处理器4可以通过信有线通讯串口连接至所有压电传感器3，所有压电传感器通过网格线串联，网格线外延连接至外接处理器4。或者也可以通过蓝牙等无线通讯方式连接至所有压电传感器3。压电薄膜2铺设后，可通过串口有线通讯连接或者蓝牙等无线通讯连接，从而获取压力值，通过串口有线连接提供电源或者通过电源适配供电。进一步地，外接处理器4采集到的单帧数据形式为二维数组形式，其大小为64×32=2048，采样率为fs，fs＝10Hz。也可以根据需要修改采样频率。进一步地，外接处理器4采集的单帧数据信号data以如图2所示的灰度图形式显示；data灰度图的具体值就是灰度大小，行列维位置点，具体值大小在0～255，与灰度值大小等同；也即灰度值大小为0～255。本发明还涉及一种基于压电传感器的在离床辅助判断方法，使用上述基于压电传感器的在离床辅助判断装置，其具体的在离床辅助判断算法基本流程如图3所示。具体按照以下步骤内容操作执行：第一步，通过外接处理器实时采集原始压力矩阵图像，采样率为fs，fs＝10Hz；图2中的灰度图压的即为压力矩阵图像，其实际显示的热力图如图6所示。第二步，对单帧图像进行滤波降噪；获取的原始压力矩阵图像包含有椒盐噪声等，需要进行滤波降噪；算法处理流程中，采用的是中值滤波；具体是采用n*n的二维中值滤波算法进行滤波降噪，对去除主要的椒盐噪声有较好的效果。具体滤波过程是通过3*3的小窗口遍历整个矩阵图像，小窗口内9个值通过排序后取中间值作为窗口中心位置的结果，即为中值滤波去噪结果；椒盐噪声类似于脉冲噪声，一些单个的随机噪声，麻点，处理过程通过3*3的小窗口遍历整幅图像，9个数据排序取中间值作为结果替代原来数据。即通过3*3的小窗口遍历整个矩阵图像，小窗口内9个值通过排序后取中间值作为窗口中心位置的结果代替原来数据，得到中值滤波去噪结果。第三步，提取单帧压力矩阵特征参数datas；将单帧矩阵datas进行特征提取，在提取过程中提取的特征不限于一种特征，能够提取的单帧压力矩阵特征参数包括有：压力点求和、压力中值、压力整体方差、压力的最大值、压力的最小值、压力竖向投影x的宽度、压力横向投影y的宽度等；本发明的技术方案中提取其中两种特征：压力和和方差。第四步，根据单帧压力矩阵特征参数计算压力和、单帧单侧方差；本发明的技术方案选择其中的压力和、单帧单侧方差作为单帧特征参数进行辅助在离床判断；在系统中先验设定阈值，即根据多样本采集后的计算特征选取阈值：压力和、单帧单侧方差的具体计算过程按照如下公式：sum_pressure = ∑data,i∈,j∈.....公式1std_pressure =...... 公式2；公式1与公式2均为单帧单侧的特征值计算，公式1为压力和，公式2是方差。本发明的技术方案不限于上述两个特征参数的获取。第五步，根据单帧特征参数判断在离床状态，具体判断阈值由预先覆盖样本集提取的特征阈值；第六步，重复第二步至第五步的操作内容，直至连续保存了多帧特征参数；本发明在实际过程中的具体实施方式是连续连续保存最新8s周期内的特征参数集，通过8s的窗口平移，平移步长为1s；也即滚动保存最新8s周期内的特征参数集。具体的单一特征连续波动如图4中所示。第七步，将连续提取保存的第三步骤中的特征参数保存至数组fea_ds，构成特征参数集；第八步，对特征参数集进行差分和波动计算；保存最新wt个连续帧的特征参数集后，计算同特征前后差分来获取同特征的差值：diff_fea；获取前后差值后，再计算diff_fea的方差，即为特征短时间内的波动特征指标：std_diffs；第九步，保存第八步中的连续几个波动特征指标std_diffs，并计算连续的方差的均值得到std_diff；. . . . . . 公式3本例中保存第八步中的连续五个波动特征指标，具体数值可以按照实际使用需求进行适应性调整。第十步，根据波动特征参数std_diff进行辅助在离床判断。在床条件下，判断离床条件为：std_diff＞th_body；离床条件下，判断上床条件为：std_diff＜= th_body。在离床条件具体为第五步中的判断结果。th_body为辅助判断上床条件中连续特征方差来判断是否在床的阈值，该阈值也是提前设定，根据样本量计算设定。本发明基于压电传感器的在离床辅助判断装置和方法，外接处理器经压电薄膜上按照点阵图形式分布的若干压电传感器实时采集压力值，进行滤波降噪、特征参数提取、差分和波动计算得到波动特征指标后，根据波动特征参数进行辅助在离床判断；通过长时间的在离床辅助判断来提升和纠正在离床判断结果，在不增加传感器测量维度的条件下，提升在离床判断结果的准确性和可靠性，并能在发生误判在离床状态条件下，及时纠正误判的结果；能够提升在离床判断结果的准确性和可靠性，同时结构简单，成本低廉。通过监测点阵图一段时间的前后波动大小来辅助判断在离床状态，原理是物体与人在床时的不同点：人体的微动通过放大会产生时间轴上的波动，二固定的物体的波动基本为0。通过监测时间段上的信号波动来实现有无人在床的辅助在离床判断，提升在离床判断的准确性，能及时修复判断错误的状态。可以提高在离床判断的准确性，同时能在出现在离床误判的情况下及时修正在床的状态，使得在离床判断结果更加可靠，也提升了判断算法的适用性。本发明不局限于上述可选实施方式，任何人在本发明的启示下都可得出其他各种形式的产品，但不论在其形状或结构上作任何变化，凡是落入本发明权利要求界定范围内的技术方案，均落在本发明的保护范围之内。
