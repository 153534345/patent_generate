标题title
一种基于激光传感的精量播种参数无线远程监测方法与装置
摘要abst
本发明公开了一种基于激光传感的精量播种参数无线远程监测装置，包括主控制器、基于激光传感的种子信息捕获单元、移动终端、云服务器、GPS测速器和警示装置，其中：基于激光传感的种子信息捕获单元、GPS测速器和警示装置与主控制器电连接；主控制器与云服务器通过无线网络连接，云服务器与移动终端通过无线网络连接。
权利要求书clms
1.一种基于激光传感的精量播种参数无线远程监测装置，包括主控制器、基于激光传感的种子信息捕获单元、移动终端、云服务器、GPS测速器和警示装置，其特征在于：基于激光传感的种子信息捕获单元、GPS测速器和警示装置与主控制器电连接；主控制器与云服务器通过无线网络连接，云服务器与移动终端通过无线网络连接。2.根据权利要求1所述的基于激光传感的精量播种参数无线远程监测装置，其特征在于：主控制器包括外部控制盒、STM32微处理器、电压转换模块、通信模块、电源开关、复位开关、基于激光传感的种子信息捕获单元的连接插头、GPS测速器连接插头、警示灯连接插头。3.根据权利要求1所述的基于激光传感的精量播种参数无线远程监测装置，其特征在于基于激光传感的种子信息捕获单元包括导种管、激光接收管、激光发射管。
说明书desc
技术领域本发明涉及农业机械领域，尤其涉及一种基于激光传感的精量播种参数无线远程监测方法。背景技术我国是农业大国，伴随着农业机械化的不断发展，农业智能化也随之兴起。精准农业作为农业智能化发展的重要表现，为我国农业发展增添了新的智慧，创造了更大的价值。作物的精量播种是精准农业的重要组成部分，尤其是近几年作物种植规模只增不减，作物的精量播种成为主流趋势，实现精量播种能够增产增收，同时也节约了大量成本。精量播种依靠精量排种器，排种器安装在播种机上在田间进行播种。准确实时的监测播种机的播种参数能够对田间的播种状况更加了解，发生堵塞故障时能够及时发现，减少损失；同时得到播种机的播种合格率、漏播率和重播率等性能参数，可以评价播种机工作性能的好坏。因此，实现精量播种参数的实时监测是十分必要的，能够帮助种植者了解播种状况。目前我国的精量播种参数监测技术发展相对落后，精量播种参数监测基本以播量监测为主，合格率、漏播率以及重播率很少能够监测，而且，终端显示器和微处理器不能分离，是一对一模式，监测得到的数据只能在一个终端上显示，二者采用电线连接，十分不便，这也大大增大了使用成本。发明的目的是提供一种基于激光传感的精量播种参数无线远程监测方法与装置，能够实现对精量播种参数如播种量、合格率、漏播率、重播率和株距等的精准实时远程监测。发明内容为实现本发明之目的，采用以下技术方案予以实现：一种基于激光传感的精量播种参数无线远程监测装置，包括主控制器、基于激光传感的种子信息捕获单元、移动终端、云服务器、GPS测速器和警示装置，其中：基于激光传感的种子信息捕获单元、GPS测速器和警示装置与主控制器电连接；主控制器与云服务器通过无线网络连接，云服务器与移动终端通过无线网络连接。所述的基于激光传感的精量播种参数无线远程监测装置，其中：所述监测装置还包括自清洁装置。所述的基于激光传感的精量播种参数无线远程监测装置，其中：主控制器包括外部控制盒、STM32微处理器、电压转换模块、通信模块、电源开关、复位开关、基于激光传感的种子信息捕获单元的连接插头、GPS测速器连接插头、警示灯连接插头。所述的基于激光传感的精量播种参数无线远程监测装置，其中：主控制器按如下方式计算漏播率：若X＞1.5Xref,计为漏播；若X≤1.5Xref,计为重播，其余为合格,其中X是实时播种株距，Xref是目标株距，T是相邻两粒种子播种的间隔时间，V是播种机行进速度。所述的基于激光传感的精量播种参数无线远程监测装置，其中基于激光传感的种子信息捕获单元包括导种管、激光接收管、激光发射管和激光传感器透明安装盒；激光传感器透明安装盒是包括左侧孔、右侧孔和上、下开口的四开口盒，安装盒内部中空，左侧孔、右侧孔为盲孔，上、下开口在安装盒内部互相贯通。所述的基于激光传感的精量播种参数无线远程监测装置，其中：激光发射管插入激光传感器透明安装盒的右侧方孔内，激光接收管插入左侧圆孔内，激光传感器透明安装盒粘接在导种管底部。所述的基于激光传感的精量播种参数无线远程监测装置，其中：导种管出种口底部为斜面，激光传感器透明安装盒上开口的顶部也为斜面，与导种管底部紧密贴合粘接固定。所述的基于激光传感的精量播种参数无线远程监测装置，其中：导种管包括上半段和下半段，导种管上半段插入在导种管下半段中，导种管下半段可以进行无级伸缩；在导种管上半段下部外壁的一侧从上到下布有一列棘牙，在导种管下半段2上安装有固定钩，固定钩与棘牙配合并锁定上半段和下半段之间的位置。所述的基于激光传感的精量播种参数无线远程监测装置，其中：自清洁装置包括喷头、软水管、小水泵和水瓶，将喷头通过打孔安装在激光传感器透明安装盒上，喷头与内壁成30°夹角，和内壁平齐；软水管利用扎带固定在导种管上，小水泵和水瓶利用扎带固定在播种机机架上。所述的基于激光传感的精量播种参数无线远程监测装置，其中：固定钩本体为条状，头部设有钩头，与棘牙咬合，固定钩本体上部与导种管下半段通过支撑转轴连接，支撑转轴设置在导种管下半段的顶部；固定钩底部设有钩环，与弹簧的一端连接，弹簧的另一端与导种管下半段外壁设置的钩环连接。附图说明图1为本发明基于激光传感的精量播种参数无线远程监测方法与装置主控制器结构示意图；图2为本发明基于激光传感的精量播种参数无线远程监测方法与装置通信流程示意图；图3为本发明基于激光传感的精量播种参数无线远程监测方法与装置种子信息捕获单元结构示意图；图4为本发明基于激光传感的精量播种参数无线远程监测方法与装置伸缩导种管结构示意图；图5为本发明基于激光传感的精量播种参数无线远程监测方法与装置自清洁装置结构示意图；图6为本发明基于激光传感的精量播种参数无线远程监测方法与装置信号处理算法功能示意图；图7为本发明基于激光传感的精量播种参数无线远程监测方法与装置种子信息捕获单元功能示意图；图8为本发明基于激光传感的精量播种参数无线远程监测方法与装置APP主界面功能示意图；图9为本发明基于激光传感的精量播种参数无线远程监测方法与装置激光传感器的电路原理设计图。附图标记：1主控制器；101外部控制盒；102STM32微处理器；103电压转换模块；104Air202通信模块；105电源开关；106复位开关；2基于激光传感的种子信息捕获单元；201导种管上半段；202导种管下半段；203棘牙；204固定钩；205弹簧；206激光接收管；207激光传感器透明安装盒；208激光发射管；209激光传感器连接插头；3自清洁装置；301喷头；302软水管；303小水泵；304水瓶；4移动终端；5MQTT云服务器；6GPS测速器；7警示灯。具体实施方式下面结合附图1-9对本发明的具体实施方式进行详细说明。如图1-4所示，基于激光传感的精量播种参数无线远程监测装置，包括主控制器1、基于激光传感的种子信息捕获单元2、自清洁装置3、移动终端4、MQTT云服务器5、GPS测速器6、警示装置7。其中，主控制器1包括外部控制盒101、STM32微处理器102、电压转换模块103、Air202通信模块104、电源开关105、复位开关106、基于激光传感的种子信息捕获单元2的连接插头107、GPS测速器6连接插头108、警示灯7连接插头109。STM32微处理器102、电压转换模块103、Air202通信模块104安装在外部控制盒101中，电源开关105、复位开关106、基于激光传感的种子信息捕获单元2的连接插头107、GPS测速器6连接插头108、警示灯7连接插头109安装在外部控制盒101上。主控制器1是整个监测装置的核心部分，能够进行信息的获取、数据的处理以及数据的发送。通过采集基于激光传感的种子信息捕获单元2捕获的电信号以及GPS测速器5采集的播种机前进速度信号，经过计算统计出播种量、合格率、漏播率、重播率、实时株距等参数。具体计算方式为:若X＞1.5Xref,计为漏播；若X≤1.5Xref,计为重播，其余为合格。根据距离，速度和时间三者之间的关系，计算得出其中X是实时播种株距，Xref是目标株距，T是相邻两粒种子播种的间隔时间，V是播种机行进速度。合格率是合格的种子株距个数占总的株距个数的比例，漏播率和重播率以同样的方式计算。为了进一步提高信号捕获算法的抗干扰能力，本发明对STM32微处理器102的信号捕获算法进行了优化设计。采用ADC模拟看门狗的算法模型。功能介绍如下：假设触发信号为下降沿触发,并且存在噪声和干扰,想要捕获到该信号，首先，初始化看门狗触发阈值为低电平触发。假设触发信号电平V1＝0.1v，干扰信号电平V2最低为0.3v，设置看门狗的阈值为：0.2v～3.3v，此时，在0.2～3.3v内的信号都不会触发看门狗中断，但0.1v信号可以成功触发看门狗中断。这样达到了过滤干扰信号的作用。当触发信号电平V1＝0.1v触发看门狗中断之后，更改看门狗的阈值为高电平状态，这样可以防止触发信号时间过长，频繁进入看门狗中断。当触发信号恢复高电平状态，因为已经设置了看门狗中断为高电平触发，此时会进入一次看门狗中断。在看门狗中断中只需要将看门狗触发阈值改为低电平触发，即可等待下一次的触发信号。电源开关105可以控制主控制器1的启动和停止，复位开关106可以使主控制器1将所有参数清零，回到初始化状态。电源开关105和复位开关106通过打孔安装在外部控制盒101上面。通过电压转换模块103将拖拉机12V电源转换为5V电源，对STM32微处理器102进行供电。将STM32微处理器102的信号采集引脚和电源引脚连接到基于激光传感的种子信息捕获单元2连接插头107，可以和激光传感器连接插头205配合连接，实现电信号传输。STM32微处理器102有多个信号采集引脚，方便基于激光传感的种子信息捕获单元2的拓展。Air202通信模块104通过串口和STM32微处理器102进行信息传递，能够保证较高传输效率，Air202通信模块104需要使用SIM卡，借助GPRS连接到网络。Air202通信模块104的通信包括与微处理器通信和与云服务器通信两部分。与微处理器的通信采用串口通信模式，与云服务器的通信采用GPRS数据传输。Air202在通信之前需要进行相应的配置，包括下载Lod和Lua脚本文件，Lua脚本文件是基于SciTE进行开发的，主要包括MQTT配置、串口配置等。MQTT是基于二进制消息的发布/订阅编程模式的消息协议。MQTT服务器也称为“消息代理”，可以是一个应用程序或一台设备。它是位于消息发布者和订阅者之间，它可以：接受来自客户的网络连接；接受客户发布的应用信息；处理来自客户端的订阅和退订请求；向订阅的客户转发应用程序消息。基于以上的通信原理，开发建立了MQTT云服务器5，MQTT云服务器5作为数据中转站，可以接收Air202通信模块104发送的数据，也可以发布数据给移动终端4，移动终端显示不再是传统的一对一模式，只要安装App软件，任何的移动终端都可以在线监测，并且不受距离的限制，可以在拖拉机驾驶室内监测，也可以在种植户家里随时随地获取播种信息。移动终端可以实时显示播量、合格率、漏播率、重播率和实时株距等参数，也可以输入排种器型孔数和标准株距等参数，并能够将所有的数据实时生成Excel表格，便于后期的数据处理和储存。移动终端采用Android Studio开发环境基于JAVA语言进行编程。移动终端的设计主要包括四个部分：其一是添加监测对象部分，采用扫描二维码的方式添加监测设备，每个设备都具有唯一的二维码；其二是显示界面的设计，具有参数输入和显示、动态曲线绘制、卫星定位和地图显示等功能；其三是数据接收和更新显示部分，移动终端通过网络实时接收MQTT云服务器5发送的数据，实现显示界面的数据更新；其四是数据导出生成Excel文件部分，采用的是由JAVA语言操作Excel表格的工具类库jxl.jar，其能够创建和编辑Excel表格，包括表格属性设计及格式等。通过jxl.jar可以将移动终端得到的播种参数全部实时的添加到Excel表格里，便于后期的数据处理和存储。警示灯7和STM32微处理器102的控制引脚连接插头109相连，当发生故障时会闪烁警示，提醒驾驶员停机检查，减少损失。如图3、4所示，基于激光传感的种子信息捕获单元2包括导种管、激光接收管206、激光发射管208、激光传感器透明安装盒207、激光传感器连接插头209。基于激光传感的种子信息捕获单元2采用激光传感的方法，当种子经过传感器时，会阻挡激光发射管208发出的部分激光，激光接收管203接收后进而产生电信号的变化，这种电信号的变化可以被STM32微处理器102捕获，可以对其进行处理以得到播种参数。激光具有单色性好，穿透力强等优点，在灰尘较大情况下仍能够使用，因此可以穿透激光传感器透明安装盒207，避免田间作业灰尘影响。为了增加激光传感器的抗干扰性使用调制管进行激光调制，将激光发射管的发射频率调制到接收管接收的频率范围内。激光传感器的驱动电路一般采用三极管驱动的方式，而本发明采用反相器驱动的方式，其相比三极管驱动的优势在于可以使用一个调制管驱动多个激光发射管，驱动力增强，光点亮度增加，提高了抗干扰性。电路设计如图9所示，激光传感器电路包括调制管SOC2110、反相器HD74LS04、激光发射管、激光接收管，调制管的电源端接直流电压源，输出端接反相器的输入端和电阻R1的第一端，电阻R1第二端接地，反相器的电源端接直流电压源，接地端接地，反相器的输出端接激光发射管的输出端，激光发射管的电源端接直流电压源；激光接收管的电源端接直流电压源，接地端接地，激光接收管的信号输出端与STM32微处理器连接，同时该信号输出端还接电阻R2的第一端、电阻R3的第一端、电容C1的第一端连接接地端和地，电阻R2的第二端接发光二极管的负极，发光二极管正极接直流电压源；电阻R3的第二端和电容C1的第二端接直流电压源。上述电路中调制管可以调制激光发射管的频率，反相器驱动能够增加亮度，提高抗干扰性，电容C1用于实现抗干扰和电位隔离的作用。激光传感器透明安装盒207是包括左侧孔、右侧孔和上、下开口的四开口盒，安装盒207内部中空，左侧孔、右侧孔为盲孔，可以避免种子掉落时砸坏激光传感器，上、下开口在安装盒内部互相贯通。激光发射管208的数量可以根据导种管出口大小选择，需保证种子的覆盖面。激光发射管208插入激光传感器透明安装盒207的右侧方孔内，激光接收管206插入左侧圆孔内，激光接收管206为了保证激光发射管208发出的激光能照射在激光接收管206的中点，在其外部接收端安装透镜以实现聚光对射功能。由激光发射管208和激光接收管206相互连接后组成的激光传感器连接插头209可以插在主控制器1的基于激光传感的种子信息捕获单元2连接插头107上，实现电信号的传输。激光传感器透明安装盒207可以粘接在导种管底部，与种沟距离更近，更加接近播种的真实效果。现有的导种管底部出种口是一个斜面设计，为了确保和导种管配合使用，将激光传感器透明安装盒207上开口的顶部设计成斜面，能够和导种管紧密贴合，利用粘接的固定方式，将激光传感器透明安装盒207粘接在导种管底部。经高速摄影观察，对种子在导种管内的运动轨迹分析发现种子在导种管上部往往会发生碰撞和弹跳，因此将传感器安装在底部可以减小因碰撞弹跳造成的监测误差。同时，为了适应不同的播种机播种高度，本发明将导种管设计为两截可伸缩式的结构。导种管上半段201插入在导种管下半段202中，导种管下半段202可以进行无级伸缩，伸缩的长度可以达到10cm,完全满足播种高度调整的需要。在导种管上半段201下部外壁的一侧从上到下布有一列棘牙203，在导种管下半段202上安装了固定钩204，固定钩204能够与棘牙203完全配合达到固定的作用。同时，固定钩204在弹簧205的作用下可以实现张紧的作用。通过调整导种管的长度，能够避免传感器位置不合适造成损坏。如图4所示，固定钩204本体为条状，头部设有钩头，用于与棘牙203咬合，固定钩204本体上部与导种管下半段202通过支撑转轴210连接，支撑转轴210设置在导种管下半段202的顶部，支撑转轴210是类似于合页的一种转动结构，固定钩204可围绕支撑转轴210转动，固定钩204底部设有钩环，与弹簧205的一端连接，弹簧205的另一端与导种管下半段202外壁设置的钩环连接。弹簧205存在一定的张力，可以顶住固定钩204的钩头与棘牙203的咬合，在改变导种管伸缩长度时，需要按压固定钩204，使弹簧205呈现压缩状态，固定钩204以支撑转轴210进行转动，实现钩头与棘牙203的分离。自清洁装置3包括喷头301、软水管302、小水泵303、水瓶304。自清洁装置3可以对激光传感器透明安装盒207的内壁进行清洁。在长时间的田间作业过程中，激光传感器透明安装盒207内壁难免会覆盖一层尘土，影响激光信号的接收，甚至会导致种子信息捕获单元工作失灵。为了实现定期的清洁功能，在伸缩导种管外部加装了自清洁装置3。将喷头301通过打孔安装在激光传感器透明安装盒204上，喷头与内壁成30°夹角，和内壁平齐。软水管302利用扎带固定在导种管201上。小水泵303和304水瓶可以利用扎带固定在播种机机架上，采用电池供电的方式实现小水泵303的吸水和排水功能。自清洁装置3内部有独立的控制器，在播种作业时可以按照一定的间隔时间进行启动，一般设置为1小时间隔时间。本发明的基于激光传感的精量播种参数无线远程监测方法与装置，能够实现精量播种参数的实时在线远程监测，可以多个终端同时显示播量、合格率、漏播率、重播率和实时株距等参数，改变了传统的一对一模式，采用无线通信避免了布置电线带来的麻烦。通过本发明，能够实现精量播种参数的精准实时远程监测功能。同时，对田间作业中灰尘较大的复杂环境具有较好的抵抗效果，设计的激光传感器具有监测精度高，抗灰尘性能好等优点。同时设计自清洁装置对传感器内壁定时清洁，确保不受灰尘影响监测精度。并且，采用无线远程的通信方式替代传统的线连接通信，解决了布线繁琐、通信距离短等问题，也降低了使用成本，同时改变了传统的“一对一”的监测模式，实现了“多对多”同时在线监测的功能。
