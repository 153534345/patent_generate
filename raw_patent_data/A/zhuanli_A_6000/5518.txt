标题title
操作手柄系统响应提速方法、装置和智能游戏手柄
摘要abst
本申请提供了一种操作手柄系统响应提速方法、装置和智能游戏手柄，根据接口类型获取返回参数判断接口状态，获取操作手柄的操作事件，计算返回时间差分析延迟状态，识别操作事件的触点，获取触点之间的操作参数分析使用状态，根据延迟状态和使用状态确定转接类型，控制操作手柄按照转接类型切换数据接口。本申请对当前延迟状态进行分级，通过触点确定区间统计操作事件中的操作参数并对操作繁忙度进行分级，根据操作延迟严重程度和操作繁忙度确定是否需要切换至数据传输效率更高的接口类型，以及自动选择适合的转接接口和转接比率，能够自动切换操作手柄的数据接口，解决操作手柄因信号过载引起的操作延迟、灵敏度差的问题。
权利要求书clms
1.一种操作手柄系统响应提速方法，其特征在于，包括如下步骤：获取操作手柄的接口类型，根据所述接口类型获取返回参数和标准返回参数，根据所述返回参数和所述标准返回参数判断接口状态；若所述接口状态为正常状态，则获取所述操作手柄的操作事件，计算所述操作事件的返回时间差，根据所述返回时间差分析延迟状态；识别所述操作事件的触点，获取所述触点之间的操作参数，根据所述操作参数与历史操作参数分析使用状态；根据所述延迟状态和所述使用状态确定转接类型，控制所述操作手柄按照所述转接类型切换数据接口。2.如权利要求1所述的操作手柄系统响应提速方法，其特征在于，根据所述接口类型获取返回参数和标准返回参数具体为：若所述接口类型为HDMI接口，则获取TMDS差分电平信息；调取所述TMDS差分电平信息中的差分信号上拉电压、端口阻抗、单端信号摆幅和差分摆幅。3.如权利要求1所述的操作手柄系统响应提速方法，其特征在于，根据所述接口类型获取返回参数和标准返回参数具体为：若所述接口类型为VGA接口，则获取模拟图像信号、数字图像信号和兼容模拟数字图像信号；分别调取所述模拟图像信号、所述数字图像信号和所述兼容模拟数字图像信号中的信号时间。4.如权利要求1所述的操作手柄系统响应提速方法，其特征在于，计算操作事件的返回时间差具体为：识别所述操作事件的按键对象，获取所述按键对象的触发时间；调取所述操作事件的返回时间；根据所述触发时间和所述返回时间计算所述返回时间差。5.如权利要求1所述的操作手柄系统响应提速方法，其特征在于，计算操作事件的返回时间差之前，还包括：获取所述操作手柄的移动轴值和校准轴值；根据所述移动轴值和所述校准轴值判断移动状态；若所述移动状态为异常状态，则根据所述校准轴值修改所述移动轴值后开始计算操作事件的返回时间差。6.如权利要求1所述的操作手柄系统响应提速方法，其特征在于，所述操作参数为操作频次，获取所述触点之间的操作参数具体为：获取所述触点之间的第一测算区间及所述第一测算区间对应的权重值；计算所述第一测算区间内的区域操作频次；对所述区域操作频次引入所述权重值后累计计算生成所述操作频次。7.如权利要求1所述的操作手柄系统响应提速方法，其特征在于，所述操作参数为操作幅度，获取所述触点之间的操作参数具体为：监测所述触点之间的按键压力，根据所述按键压力的分布情况生成第二测算区间，计算所述第二测算区间内的压力均值；监测所述触点之间的按键位移，根据所述按键位移的分布情况生成第三测算区间，计算所述第三测算区间内的位移均值；所述压力均值和所述位移均值构成所述操作幅度。8.如权利要求1所述的操作手柄系统响应提速方法，其特征在于，所述转接类型包括转接接口和转接通量，根据所述延迟状态和所述使用状态确定转接类型具体为：获取可用接口类型，根据所述延迟状态和所述使用状态在所述可用接口类型中确定转接接口；获取可用接口通量，根据所述延迟状态和所述使用状态确定所述可用接口通量下的转接通量。9.一种操作手柄系统响应提速装置，其特征在于，所述操作手柄系统响应提速装置包括：接口检测模块，用于获取操作手柄的接口类型，根据所述接口类型获取返回参数和标准返回参数，根据所述返回参数和所述标准返回参数判断接口状态；延迟分析模块，用于若所述接口状态为正常状态，则获取所述操作手柄的操作事件，计算所述操作事件的返回时间差，根据所述返回时间差分析延迟状态；使用分析模块，用于识别所述操作事件的触点，获取所述触点之间的操作参数，根据所述操作参数与历史操作参数分析使用状态；转接切换模块，用于根据所述延迟状态和所述使用状态确定转接类型，控制所述操作手柄按照所述转接类型切换数据接口。10.一种智能游戏手柄，其特征在于，所述智能游戏手柄实现权利要求1~8中任一项所述的操作手柄系统响应提速方法中的各步骤，或包含权利要求9所述的操作手柄系统响应提速装置中的各模块。
说明书desc
技术领域本申请涉及操作手柄技术领域，特别涉及操作手柄系统响应提速方法、装置和智能游戏手柄。背景技术操作手柄已深入现代生活和工作中，可广泛用于操纵电子游戏、移动设备以及工业仪器。大多操作手柄中的移动摇杆依赖于X轴和Y轴上的两个基于电位计的模块，电位计测量移动摇杆的电压变化，并依赖于随时间磨损的金属触点。这可能会导致移动摇杆不断记录电压变化而占用大量进程内存，即使是处于静止状态。同时，当操作手柄接入的互联网服务器繁忙或故障、控制器后台运行过多应用程序的情况下，均会导致传输信号在短时间内累积过量，受限于数据传输速度，可能造成操作延迟的现象。发明内容本申请的目的在于提供一种操作手柄系统响应提速方法、装置和智能游戏手柄，能够自动切换操作手柄的数据接口，解决操作手柄因信号过载引起的操作延迟、灵敏度差的问题。本申请的具体技术方案如下：本申请第一方面提供一种操作手柄系统响应提速方法，包括如下步骤：获取操作手柄的接口类型，根据所述接口类型获取返回参数和标准返回参数，根据所述返回参数和所述标准返回参数判断接口状态；若所述接口状态为正常状态，则获取所述操作手柄的操作事件，计算所述操作事件的返回时间差，根据所述返回时间差分析延迟状态；识别所述操作事件的触点，获取所述触点之间的操作参数，根据所述操作参数与历史操作参数分析使用状态；根据所述延迟状态和所述使用状态确定转接类型，控制所述操作手柄按照所述转接类型切换数据接口。进一步的，根据所述接口类型获取返回参数和标准返回参数具体为：若所述接口类型为HDMI接口，则获取TMDS差分电平信息；调取所述TMDS差分电平信息中的差分信号上拉电压、端口阻抗、单端信号摆幅和差分摆幅。进一步的，根据所述接口类型获取返回参数和标准返回参数具体为：若所述接口类型为VGA接口，则获取模拟图像信号、数字图像信号和兼容模拟数字图像信号；分别调取所述模拟图像信号、所述数字图像信号和所述兼容模拟数字图像信号中的信号时间。进一步的，计算操作事件的返回时间差具体为：识别所述操作事件的按键对象，获取所述按键对象的触发时间；调取所述操作事件的返回时间；根据所述触发时间和所述返回时间计算所述返回时间差。进一步的，计算操作事件的返回时间差之前，还包括：获取所述操作手柄的移动轴值和校准轴值；根据所述移动轴值和所述校准轴值判断移动状态；若所述移动状态为异常状态，则根据所述校准轴值修改所述移动轴值后开始计算操作事件的返回时间差。进一步的，所述操作参数为操作频次，获取所述触点之间的操作参数具体为：获取所述触点之间的第一测算区间及所述第一测算区间对应的权重值；计算所述第一测算区间内的区域操作频次；对所述区域操作频次引入所述权重值后累计计算生成所述操作频次。进一步的，所述操作参数为操作幅度，获取所述触点之间的操作参数具体为：监测所述触点之间的按键压力，根据所述按键压力的分布情况生成第二测算区间，计算所述第二测算区间内的压力均值；监测所述触点之间的按键位移，根据所述按键位移的分布情况生成第三测算区间，计算所述第三测算区间内的位移均值；所述压力均值和所述位移均值构成所述操作幅度。进一步的，所述转接类型包括转接接口和转接通量，根据所述延迟状态和所述使用状态确定转接类型具体为：获取可用接口类型，根据所述延迟状态和所述使用状态在所述可用接口类型中确定转接接口；获取可用接口通量，根据所述延迟状态和所述使用状态确定所述可用接口通量下的转接通量。本申请第二方面提供一种操作手柄系统响应提速装置，所述操作手柄系统响应提速装置包括：接口检测模块，用于获取操作手柄的接口类型，根据所述接口类型获取返回参数和标准返回参数，根据所述返回参数和所述标准返回参数判断接口状态；延迟分析模块，用于若所述接口状态为正常状态，则获取所述操作手柄的操作事件，计算所述操作事件的返回时间差，根据所述返回时间差分析延迟状态；使用分析模块，用于识别所述操作事件的触点，获取所述触点之间的操作参数，根据所述操作参数与历史操作参数分析使用状态；转接切换模块，用于 根据所述延迟状态和所述使用状态确定转接类型，控制所述操作手柄按照所述转接类型切换数据接口。本申请第三方面提供一种智能游戏手柄，所述智能游戏手柄实现所述操作手柄系统响应提速方法中的各步骤，或包含所述操作手柄系统响应提速装置中的各模块。综上所述，本申请提供了一种操作手柄系统响应提速方法、装置和智能游戏手柄，根据接口类型获取返回参数判断接口状态，获取操作手柄的操作事件，计算返回时间差分析延迟状态，识别操作事件的触点，获取触点之间的操作参数分析使用状态，根据延迟状态和使用状态确定转接类型，控制操作手柄按照转接类型切换数据接口。本申请根据返回参数判断接口是否处于正常接入状态，同时也筛选出当前的有效接入接口；当判断接口正常接入，启动延迟分析进程，对当前延迟状态进行分级；通过触点确定区间统计操作事件中的操作参数，对操作繁忙度进行分级；根据操作延迟严重程度和操作繁忙度确定是否需要切换至数据传输效率更高的接口类型，以及自动选择适合的转接接口和转接比率，能够自动切换操作手柄的数据接口，以解决当前数据处理忙碌导致的操作延迟问题。附图说明为了更清楚地说明本申请实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本申请的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动性的前提下，还可以根据这些附图获得其它的附图。图1为本申请操作手柄系统响应提速方法的流程图；图2为本申请操作手柄系统响应提速装置的框图。具体实施方式为使得本申请的目的、特征、优点能够更加的明显和易懂，对本申请实施例中的技术方案进行清楚、完整地描述，显然，下面所描述的实施例仅仅是本申请一部分实施例，而非全部的实施例。基于本申请中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其它实施例，都属于本申请保护的范围。请参照图1，图1为本申请操作手柄系统响应提速方法的流程图。本申请实施例提供一种操作手柄系统响应提速方法，包括如下步骤：S1：获取操作手柄的接口类型，根据所述接口类型获取返回参数和标准返回参数，根据所述返回参数和所述标准返回参数判断接口状态；S2：若所述接口状态为正常状态，则获取所述操作手柄的操作事件，计算所述操作事件的返回时间差，根据所述返回时间差分析延迟状态；S3：识别所述操作事件的触点，获取所述触点之间的操作参数，根据所述操作参数与历史操作参数分析使用状态；S4：根据所述延迟状态和所述使用状态确定转接类型，控制所述操作手柄按照所述转接类型切换数据接口。作为一种实施例，S1中操作手柄可以是游戏手柄，接口类型可支持HDMI、VGA等。返回参数可通过实时的差分电平信号、模拟图像信号等获取，标准返回参数是固定值或数值范围，可根据操作手柄型号、规格等信息确定。根据返回参数和标准返回参数大小比对情况判断接口是否处于正常接入状态，同时也筛选出当前的有效接入接口，为后续接口切换做前期准备。S2中当判断接口正常接入，启动延迟分析进程。操作事件指用户通过操作手柄下发指令后在系统后台生成的运行数据，操作事件的返回时间差指由用户发出指令到系统执行对应的操作事件之间的时间间隔，即用户操作与终端反馈的时间差。根据返回时间差与预设阈值的大小关系可对当前延迟状态进行分级，作为后续提速决策的判断依据。S3中操作事件的触点指操作事件的触发时间点，通过触点确定区间，统计操作事件中的操作参数可更好捕捉连续、集中的操作指令。操作参数反映用户操作繁忙度，可包括操作频次、按键压力、手柄位移等。历史操作参数可以是根据行业经验确定的预设固定值，也可以是根据用户历史使用数据确定的经验值。根据操作参数与历史操作参数的大小比对关系对操作繁忙度进行分级，作为后续提速决策的判断依据。S4中根据操作延迟严重程度和操作繁忙度确定是否需要切换至数据传输效率更高的接口类型，以及自动选择适合的转接接口和转接比率，以解决当前数据处理忙碌导致的操作延迟问题。若判断需要切换接口，系统将判断操作手柄适合的转接类型，包括转接的接口型号、转接的通量比例等，转接完成后操作手柄的输出数据将通过转接后的高效传输接口进行数据传输，从而实现操作指令的响应提速效果。根据本申请实施例，根据所述接口类型获取返回参数和标准返回参数具体为：若所述接口类型为HDMI接口，则获取TMDS差分电平信息；调取所述TMDS差分电平信息中的差分信号上拉电压、端口阻抗、单端信号摆幅和差分摆幅。作为一种实施例，系统获取到HDMI接口接入，则获取HDMI接口使用的TMDS差分电平，接着连接电压传感器获取HDMI接口当前100ms差分信号上拉电压，连接电阻式传感器获取HDMI接口当前100ms端口阻抗，获取HDMI接口当前100ms单端信号摆幅和差分摆幅。同时，系统连接云端获取HDMI接口正常使用下的差分信号上拉电压、端口阻抗、单端信号摆幅和差分摆幅。系统将以上四个返回参数分别一一比对，当数值差距均小于8%时，系统判定HDMI接口为正常状态；数值差距存在不小于8%时，系统判定HDMI接口为异常状态。同时，系统控制自动警报模块进行警报3秒，并停止HDMI接口输入输出，并将错误数据上传到云端，云端返还错误数据到智能操作手柄连接屏幕进行错误提醒。根据本申请实施例，根据所述接口类型获取返回参数和标准返回参数具体为：若所述接口类型为VGA接口，则获取模拟图像信号、数字图像信号和兼容模拟数字图像信号；分别调取所述模拟图像信号、所述数字图像信号和所述兼容模拟数字图像信号中的信号时间。作为一种实施例，系统获取到VGA接口接入，则获取VGA接口发送可传输纯模拟图像信号并提取纯模拟图像信号时间，获取VGA接口发送可传输纯数字图像信号并提纯数字图像信号时间，获取VGA接口发送兼容模拟数字图像信号并提取兼容模拟数字图像信号时间。系统将以上三个返回参数分别一一比对，当数值差距均小于30%时，系统判定VGA接口为正常状态；数值差距存在不小于30%时，系统判定VGA接口为异常状态。同时，系统控制自动警报模块进行警报3秒，并停止VGA接口输入输出，并将错误数据上传到云端，云端返还错误数据到智能操作手柄连接屏幕进行错误提醒。根据本申请实施例，计算操作事件的返回时间差具体为：识别所述操作事件的按键对象，获取所述按键对象的触发时间；调取所述操作事件的返回时间；根据所述触发时间和所述返回时间计算所述返回时间差。作为一种实施例，按键对象可以包括方向摇杆或按钮，由于两者的按键时长和使用习惯的不同需要分别确定时间差。系统获取会指示触发操作事件的具体按键，通过操作事件回调获取该具体按键的触发时间和对应操作事件的返回时间，并计算返回时间差。同时，系统连接云端获取该操作手柄配置下正常的操作事件标准返回时间差。将计算得到的返回时间差与标准返回时间差做比对，若前者高于后者小于120%时，系统判定为低延迟模式，即物理移动对应设备操作移动和设定标准基本一致；若前者高于后者大于等于120%小于160%时，系统判定为中延迟模式；若前者高于后者大于等于160%时，系统判定为高延迟模式。根据本申请实施例，计算操作事件的返回时间差之前，还包括：获取所述操作手柄的移动轴值和校准轴值；根据所述移动轴值和所述校准轴值判断移动状态；若所述移动状态为异常状态，则根据所述校准轴值修改所述移动轴值后开始计算操作事件的返回时间差。作为一种实施例，返回时间差除了受数据传输影响，还受摇杆漂移等情况影响，需要对操作手柄进行预先矫正以清除部分占用的无效内存。系统将获取来自操纵杆和肩部扳机的输入对象，这些输入对象的操作事件带有一组轴值，轴值描述了特定物理控件的位置及其他移动属性。系统通过调用程序获取这些输入对象的移动轴值，同时连接设备通过配置参数获取正常的效准轴值。当移动轴值与效准轴值不一致，即物理移动对应设备操作移动和设定标准不一致，系统判断移动状态异常，接着将开启移动纠错程序，纠错完成后100ms重新启动系统重新检测延迟状态。根据本申请实施例，所述操作参数为操作频次，获取所述触点之间的操作参数具体为：获取所述触点之间的第一测算区间及所述第一测算区间对应的权重值；计算所述第一测算区间内的区域操作频次；对所述区域操作频次引入所述权重值后累计计算生成所述操作频次。作为一种实施例，第一测算区间是指操作频次的统计范围，可由系统预设为300ms、100ms等时间间隔。如果存在300ms内单按键多次点击的情况，则将此范围内的按键触点数量乘以2记入，如果存在100ms内单按键多次点击的情况，则将此范围内的按键触点数量乘以3记入。系统按照区域操作频次相加计算生成10s内的操作频次，同时连接云端获取用户日常使用10s内的平均操作频次。当操作频次高于平均操作频次超过100%，系统判定使用状态繁忙；当操作频次高于平均操作频次在20~100%之间，系统判定使用状态正常；当操作频次高于平均操作频次低于20%，系统判定使用状态空闲。根据本申请实施例，所述操作参数为操作幅度，获取所述触点之间的操作参数具体为：监测所述触点之间的按键压力，根据所述按键压力的分布情况生成第二测算区间，计算所述第二测算区间内的压力均值；监测所述触点之间的按键位移，根据所述按键位移的分布情况生成第三测算区间，计算所述第三测算区间内的位移均值；所述压力均值和所述位移均值构成所述操作幅度。作为一种实施例，第二测算区间是指按键压力的统计范围，可以是截取按键压力超过用户日常平均按键压力的区间段，在此区间段下计算压力均值更能拉开压力指标的筛选层级。系统获取到用户进行按键操作后开启压力传感器获取用户10s内的按键压力，同时连接云端获取用户10s日常平均按键压力，截取第二测算区间后生成压力均值。操作位移指操作手柄在用户操作过程中产生抖动、移动的幅度。第三测算区间是指按键位移的统计范围，可以是截取按键位移超过用户日常平均按键位移的区间段，在此区间段下计算位移均值更能拉开位移指标的筛选层级。系统获取到用户进行按键操作后使用位移传感器获取用户当前10s的x轴y轴移动距离，同时连接云端获取用户日常使用10s的x轴y轴移动距离，截取第三测算区间后生成位移均值。分别对比压力均值与平均按键压力、位移均值与平均按键位移，当压力均值和位移均值高于平均水平超过160%，系统判定使用状态繁忙；当压力均值和位移均值高于平均水平在120~160%之间，系统判定使用状态正常；当压力均值和位移均值高于平均水平100~120%之间，系统判定使用状态空闲。根据本申请实施例，所述转接类型包括转接接口和转接通量，根据所述延迟状态和所述使用状态确定转接类型具体为：获取可用接口类型，根据所述延迟状态和所述使用状态在所述可用接口类型中确定转接接口；获取可用接口通量，根据所述延迟状态和所述使用状态确定所述可用接口通量下的转接通量。作为一种实施例，根据延迟程度和使用繁忙度选择当前可用且适合提速的转接接口、转接率或转接通量，适应当前数据传输体量为操作指令的数据处理提速。可用接口指已正常接入且处于空闲状态的接口，其类型和通量信息可由接口配置信息获取。假设当前接口类型为HDMI接口，当延迟状态为高延迟或使用状态为繁忙时，系统将操纵杆和肩部扳机100%的数据传输切换为VGA接口输出输入，再次进行延迟状态和使用状态监测，若仍未改变状态，可以进一步控制方向摇杆和按钮产生的操作事件100%的数据传输切换为VGA接口输出输入。当延迟状态为中延迟且使用状态为正常时，系统将操纵杆和肩部扳机40~100%的数据传输切换为VGA接口输出输入，再次进行延迟状态和使用状态监测，若仍未改变状态，可以进一步控制方向摇杆和按钮产生的操作事件40~100%的数据传输切换为VGA接口输出输入。当延迟状态为低延迟或使用状态为空闲时，系统判断无需切换接口即可满足当前数据传输需求。请参照图2，图2为本申请操作手柄系统响应提速装置的框图。本申请实施例还提供一种操作手柄系统响应提速装置，所述操作手柄系统响应提速装置包括：接口检测模块1，用于获取操作手柄的接口类型，根据所述接口类型获取返回参数和标准返回参数，根据所述返回参数和所述标准返回参数判断接口状态；延迟分析模块2，用于若所述接口状态为正常状态，则获取所述操作手柄的操作事件，计算所述操作事件的返回时间差，根据所述返回时间差分析延迟状态；使用分析模块3，用于识别所述操作事件的触点，获取所述触点之间的操作参数，根据所述操作参数与历史操作参数分析使用状态；转接切换模块4，用于 根据所述延迟状态和所述使用状态确定转接类型，控制所述操作手柄按照所述转接类型切换数据接口。根据本申请实施例，所述接口检测模块具体用于：若所述接口类型为HDMI接口，则获取TMDS差分电平信息；调取所述TMDS差分电平信息中的差分信号上拉电压、端口阻抗、单端信号摆幅和差分摆幅。根据本申请实施例，所述接口检测模块具体用于：若所述接口类型为VGA接口，则获取模拟图像信号、数字图像信号和兼容模拟数字图像信号；分别调取所述模拟图像信号、所述数字图像信号和所述兼容模拟数字图像信号中的信号时间。根据本申请实施例，所述延迟分析模块具体用于：识别所述操作事件的按键对象，获取所述按键对象的触发时间；调取所述操作事件的返回时间；根据所述触发时间和所述返回时间计算所述返回时间差。根据本申请实施例，所述延迟分析模块还用于：获取所述操作手柄的移动轴值和校准轴值；根据所述移动轴值和所述校准轴值判断移动状态；若所述移动状态为异常状态，则根据所述校准轴值修改所述移动轴值后开始计算操作事件的返回时间差。根据本申请实施例，所述使用分析模块具体用于：获取所述触点之间的第一测算区间及所述第一测算区间对应的权重值；计算所述第一测算区间内的区域操作频次；对所述区域操作频次引入所述权重值后累计计算生成所述操作频次。根据本申请实施例，所述使用分析模块具体用于：监测所述触点之间的按键压力，根据所述按键压力的分布情况生成第二测算区间，计算所述第二测算区间内的压力均值；监测所述触点之间的按键位移，根据所述按键位移的分布情况生成第三测算区间，计算所述第三测算区间内的位移均值；所述压力均值和所述位移均值构成所述操作幅度。根据本申请实施例，所述转接切换模块具体用于：获取可用接口类型，根据所述延迟状态和所述使用状态在所述可用接口类型中确定转接接口；获取可用接口通量，根据所述延迟状态和所述使用状态确定所述可用接口通量下的转接通量。本申请实施例还提供一种智能游戏手柄，所述智能游戏手柄实现所述操作手柄系统响应提速方法中的各步骤，或包含所述操作手柄系统响应提速装置中的各模块。以上所述，以上实施例仅用以说明本申请的技术方案，而非对其限制；尽管参照前述实施例对本申请进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本申请各实施例技术方案的精神和范围。
