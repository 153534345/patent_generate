标题title
神经介入导航实时定位系统和方法
摘要abst
本发明提供一种神经介入导航实时定位系统和方法，系统包括：测量模块和处理器单元；所述测量模块用于实时测量患者上牙上预设位点的空间位置信息；所述处理器单元用于响应于定标指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的初始位姿信息以完成初始位置定标，以及，用于响应于手术指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的实时位姿信息，并根据所述初始位姿信息和所述实时位姿信息进行颅骨实时定位。本发明可以解决现有技术的神经介入导航中配准定位自动化程度低、精度低的问题。
权利要求书clms
1.一种神经介入导航实时定位系统，其特征在于，包括：测量模块和处理器单元；所述测量模块用于实时测量患者上牙上预设位点的空间位置信息；所述处理器单元用于响应于定标指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的初始位姿信息以完成初始位置定标，以及，用于响应于手术指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的实时位姿信息，并根据所述初始位姿信息和所述实时位姿信息进行颅骨实时定位。2.根据权利要求1所述的神经介入导航实时定位系统，其特征在于，所述测量模块包括：磁场发生器、第一牙套装置和多个磁传感器，多个所述磁传感器分别设置于所述第一牙套装置内的多个所述预设位点处，所述第一牙套装置用于与所述患者的上牙固定连接并根据所述患者的上牙模型制作；所述磁场发生器用于产生穿过所述患者头部的磁场；所述磁传感器用于实时采集其所在位置的磁场强度信息，并计算相应的所述预设位点的空间位置信息。3.根据权利要求2所述的神经介入导航实时定位系统，其特征在于，所述磁传感器的数量为至少三个，至少三个所述磁传感器所在位置即为至少三个所述预设位点；所述处理器单元用于根据至少三个所述预设位点的空间位置信息以及所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。4.根据权利要求2所述的神经介入导航实时定位系统，其特征在于，所述磁传感器的数量为两个，两个所述磁传感器所在位置即为两个所述预设位点；所述磁传感器用于实时采集其所在位置的磁场强度信息，并计算相应的所述预设位点的空间位置信息和所述磁传感器的朝向信息；所述处理器单元用于根据两个所述预设位点的空间位置信息和两个所述磁传感器的朝向信息以及所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。5.根据权利要求1所述的神经介入导航实时定位系统，其特征在于，所述测量模块包括：红外点云测距设备、第二牙套装置和红外定位点装置，所述红外定位点装置设置于所述第二牙套装置上，所述第二牙套装置用于与所述患者的上牙固定连接并根据所述患者的上牙模型制作；所述红外点云测距设备用于照射所述红外定位点装置，以实时获得所述红外定位点装置中定位点对应的所述预设位点的空间位置信息。6.根据权利要求5所述的神经介入导航实时定位系统，其特征在于，所述红外定位点装置中定位点的数量为至少三个，至少三个所述定位点对应至少三个所述预设位点；所述处理器单元用于根据至少三个所述预设位点的空间位置信息和所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。7.根据权利要求2-6任一项所述的神经介入导航实时定位系统，其特征在于，所述患者的上牙模型通过以下方式获取：获取所述患者的脑部体数据图像；对所述脑部体数据图像中的上颌骨进行分割，以得到上颌骨区域体数据；以及基于所述上颌骨区域体数据建立所述上牙模型。8.根据权利要求1所述的神经介入导航实时定位系统，其特征在于，所述测量模块包括：深度传感设备，用于照射所述患者的上牙，以实时采集所述上牙的第一3D点云数据。9.根据权利要求8所述的神经介入导航实时定位系统，其特征在于，所述处理器单元用于对所述第一3D点云数据和预先获得的第二3D点云数据进行配准，得到所述上牙的初始位姿信息和所述实时位姿信息；其中，所述第二3D点云数据基于所述患者的上颌骨区域体数据提取所述上牙区域生成。10.根据权利要求1所述的神经介入导航实时定位系统，其特征在于，所述处理器单元根据所述初始位姿信息和所述当前位姿信息进行颅骨定位，包括：根据所述初始位姿信息和所述当前位姿信息计算所述上牙的旋转平移矩阵；根据所述旋转平移矩阵与所述患者的脑部体数据图像计算所述患者的颅骨的旋转平移量；以及根据所述旋转平移量进行颅骨定位。11.一种神经介入导航实时定位方法，其特征在于，包括：获取测量模块实时测量的患者上牙上预设位点的空间位置信息；响应于定标指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的初始位姿信息以完成初始位置定标；以及响应于手术指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的实时位姿信息，并根据所述初始位姿信息和所述实时位姿信息进行颅骨实时定位。12.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，该程序被处理器执行时实现如权利要求11所述的方法的步骤。13.一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，其特征在于，所述处理器执行所述计算机程序时实现权利要求11所述的方法的步骤。
说明书desc
技术领域本发明涉及手术导航技术领域，特别涉及一种神经介入导航实时定位系统、方法、计算机可读存储介质和计算机设备。背景技术人的大脑结构复杂，各种神经血管密布交织，共同构成我们的中枢神经系统，其间有1000亿个相互连接的神经元，它们能够执行复杂的计算。在大脑内做手术，其精细和复杂程度很高。在术中需要对头颅进行实时定位，基于配准定位的神经介入导航，能够较好的确定病变的位置和边界，从而尽可能地辅助医生进行高效切除肿瘤并减少对大脑的损伤。目前已经有很多关于神经介入导航的技术，然而现有的配准定位方法存在以下缺点：需要利用特征设备对患者头部固定检测点用于配准定位，标记点识别过程消耗时间较长，自动化程度不高；通过激光从患者的面部轮廓获取面部点云，与CT或MR上的面部点云进行配准，但面部会出现局部形变，可能出现配准精度偏差问题；通过三维扫描仪获取患者面部的三维点云数据，与术前CT影像数据进行配准，同样存在面部会出现局部形变，可能出现配准精度偏差问题。发明内容本发明的目的在于提供一种神经介入导航实时定位系统、方法、计算机可读存储介质和计算机设备，以解决现有技术的神经介入导航的神经介入导航中配准定位自动化程度低、精度低的问题。为达到上述目的，本发明提供一种神经介入导航实时定位系统，包括：测量模块和处理器单元；所述测量模块用于实时测量患者上牙上预设位点的空间位置信息；所述处理器单元用于响应于定标指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的初始位姿信息以完成初始位置定标，以及，用于响应于手术指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的实时位姿信息，并根据所述初始位姿信息和所述实时位姿信息进行颅骨实时定位。可选的，在所述神经介入导航实时定位系统中，所述测量模块包括：磁场发生器、第一牙套装置和多个磁传感器，多个所述磁传感器分别设置于所述第一牙套装置内的多个所述预设位点处，所述第一牙套装置用于与所述患者的上牙固定连接并根据所述患者的上牙模型制作；所述磁场发生器用于产生穿过所述患者头部的磁场；所述磁传感器用于实时采集其所在位置的磁场强度信息，并计算相应的所述预设位点的空间位置信息。可选的，在所述神经介入导航实时定位系统中，所述磁传感器的数量为至少三个，至少三个所述磁传感器所在位置即为至少三个所述预设位点；所述处理器单元用于根据至少三个所述预设位点的空间位置信息以及所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。可选的，在所述神经介入导航实时定位系统中，所述磁传感器的数量为两个，两个所述磁传感器所在位置即为两个所述预设位点；所述磁传感器用于实时采集其所在位置的磁场强度信息，并计算相应的所述预设位点的空间位置信息和所述磁传感器的朝向信息；所述处理器单元用于根据两个所述预设位点的空间位置信息和两个所述磁传感器的朝向信息以及所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。可选的，在所述神经介入导航实时定位系统中，所述测量模块包括：红外点云测距设备、第二牙套装置和红外定位点装置，所述红外定位点装置设置于所述第二牙套装置上，所述第二牙套装置用于与所述患者的上牙固定连接并根据所述患者的上牙模型制作；所述红外点云测距设备用于照射所述红外定位点装置，以实时获得所述红外定位点装置中定位点对应的所述预设位点的空间位置信息。可选的，在所述神经介入导航实时定位系统中，所述红外定位点装置中定位点的数量为至少三个，至少三个所述定位点对应至少三个所述预设位点；所述处理器单元用于根据至少三个所述预设位点的空间位置信息和所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。可选的，在所述神经介入导航实时定位系统中，所述患者的上牙模型通过以下方式获取：获取所述患者的脑部体数据图像；对所述脑部体数据图像中的上颌骨进行分割，以得到上颌骨区域体数据；以及基于所述上颌骨区域体数据建立所述上牙模型。可选的，在所述神经介入导航实时定位系统中，所述测量模块包括：深度传感设备，用于照射所述患者的上牙，以实时采集所述上牙的第一3D点云数据。可选的，在所述神经介入导航实时定位系统中，所述处理器单元用于对所述第一3D点云数据和预先获得的第二3D点云数据进行配准，得到所述上牙的初始位姿信息和所述实时位姿信息；其中，所述第二3D点云数据基于所述患者的上颌骨区域体数据提取所述上牙区域生成。可选的，在所述神经介入导航实时定位系统中，所述处理器单元根据所述初始位姿信息和所述当前位姿信息进行颅骨定位，包括：根据所述初始位姿信息和所述当前位姿信息计算所述上牙的旋转平移矩阵；根据所述旋转平移矩阵与所述患者的脑部体数据图像计算所述患者的颅骨的旋转平移量；以及根据所述旋转平移量进行颅骨定位。为达到上述目的，本发明提供一种神经介入导航实时定位方法，包括：获取测量模块实时测量的患者上牙上预设位点的空间位置信息；响应于定标指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的初始位姿信息以完成初始位置定标；响应于手术指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的实时位姿信息，并根据所述初始位姿信息和所述实时位姿信息进行颅骨实时定位。可选的，在所述神经介入导航实时定位方法中，所述测量模块包括：磁场发生器、第一牙套装置和多个磁传感器，多个所述磁传感器分别设置于所述第一牙套装置内的多个所述预设位点处，所述第一牙套装置用于与所述患者的上牙固定连接并根据所述患者的上牙模型设计制作；所述磁场发生器，用于产生穿过所述患者头部的磁场；所述磁传感器，用于实时采集其所在位置的磁场强度信息，并计算相应的所述预设位点的空间位置信息。可选的，在所述神经介入导航实时定位方法中，所述磁传感器的数量为至少三个，至少三个所述磁传感器所在位置即为至少三个所述预设位点；所述上牙的所述初始位姿信息和所述实时位姿信息按照以下方式计算：根据至少三个所述预设位点的空间位置信息和所述上牙模型，计算所述上牙的初始位姿信息和所述实时位姿信息。可选的，在所述神经介入导航实时定位方法中，所述磁传感器的数量为两个，两个所述磁传感器所在位置即为两个所述预设位点；所述磁传感器，用于实时采集所在位置的磁场强度信息，并计算相应的所述预设位点的空间位置信息和所述磁传感器的朝向信息；所述上牙的所述初始位姿信息和所述实时位姿信息按照以下方式计算：根据两个所述预设位点的空间位置信息和两个所述磁传感器的朝向信息以及所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。可选的，在所述神经介入导航实时定位方法中，所述测量模块包括：红外点云测距设备、第二牙套装置和红外定位点装置，所述红外定位点装置设置于所述第二牙套装置上，所述第二牙套装置用于与所述患者的上牙固定连接并根据所述患者的上牙模型制作；所述红外点云测距设备，用于照射所述红外定位点装置，以实时获得所述红外定位点装置中定位点对应的所述预设位点的空间位置信息。可选的，在所述神经介入导航实时定位方法中，所述红外定位点装置中定位点的数量为至少三个，至少三个所述定位点对应至少三个所述预设位点；所述上牙的所述初始位姿信息和所述实时位姿信息按照以下方式计算：根据至少三个所述预设位点的空间位置信息和所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。可选的，在所述神经介入导航实时定位方法中，所述患者的上牙模型通过以下方式获取：获取所述患者的脑部体数据图像；对所述脑部体数据图像中的上颌骨进行分割，以得到上颌骨区域体数据；以及基于所述上颌骨区域体数据建立所述上牙模型。可选的，在所述神经介入导航实时定位方法中，所述测量模块包括：深度传感设备，用于照射所述患者的上牙，以实时采集所述上牙的第一3D点云数据。可选的，在所述神经介入导航实时定位方法中，所述上牙的所述初始位姿信息和所述实时位姿信息按照以下方式计算：对所述第一3D点云数据和预先获得的第二3D点云数据进行配准，得到所述上牙的初始位姿信息和所述实时位姿信息；其中，所述第二3D点云数据基于所述患者的上颌骨区域体数据提取所述上牙区域生成。可选的，在所述神经介入导航实时定位方法中，所述根据所述初始位姿信息和所述当前位姿信息进行颅骨定位，包括：根据所述初始位姿信息和所述当前位姿信息计算所述上牙的旋转平移矩阵；根据所述旋转平移矩阵与所述患者的脑部体数据图像计算所述患者的颅骨的旋转平移量；以及根据所述旋转平移量进行颅骨定位。为达到上述目的，本发明还提供一种计算机可读存储介质，其上存储有计算机程序，该程序被处理器执行时实现如上文所述的神经介入导航实时定位方法的步骤。为达到上述目的，本发明还提供一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时如上文所述的神经介入导航实时定位方法的步骤。与现有技术相比，本发明提供的神经介入导航实时定位系统、方法、计算机可读存储介质和计算机设备具有以下优点：本发明采用测量模块实时测量患者上牙上预设位点的空间位置信息，在手术开始前根据当前时刻所述预设位点的空间位置信息计算所述上牙的初始位姿信息以完成初始位置定标，在手术过程中根据当前时刻所述预设位点的空间位置信息计算所述上牙的实时位姿信息，并根据所述初始位姿信息和所述实时位姿信息进行颅骨实时定位。由于人的上牙位于上颌骨，同时上颌骨与人颅骨刚性连接，因此通过上牙的配准定位能够实现人颅骨的配准定位，并且通过上牙配准定位的方式抗干扰能力强，引入的误差少、精度高，相比于采用面部轮廓进行配准定位的方式，避免了由于局部形变导致配准精度差的问题；另外，本发明通过测量上牙的空间位置信息进行实时配准定位的，在手术过程中无需使用颅骨钉、头架等侵入设备，患者无创伤；此外，使用了端到端的计算流程，计算效率高、实时性强，方便集成执行单元，辅助医生完成精准的手术。附图说明为了更清楚地说明本发明实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图仅仅是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本发明一实施方式中的神经介入导航实时定位系统的结构示意图；图2a为第一实施例中测量模块在手术时的使用状态图；图2b为第一牙套装置与上牙的连接关系示意图；图3a为第二实施例中测量模块在手术时的使用状态图；图3b为第二牙套装置与上牙的连接关系示意图；图4为第三实施例中测量模块在手术时的使用状态图；图5为本发明一实施方式中的神经介入导航实时定位方法的流程示意图。具体实施方式以下结合附图和具体实施方式对本发明提出的神经介入导航实时定位系统、方法、计算机可读存储介质和计算机设备作进一步详细说明。根据下面说明，本发明的优点和特征将更清楚。需要说明的是，附图采用非常简化的形式且均使用非精准的比例，仅用以方便、明晰地辅助说明本发明实施方式的目的。为了使本发明的目的、特征和优点能够更加明显易懂，请参阅附图。须知，本说明书所附图式所绘示的结构、比例、大小等，均仅用以配合说明书所揭示的内容，以供熟悉此技术的人士了解与阅读，并非用以限定本发明实施的限定条件，故不具技术上的实质意义，任何结构的修饰、比例关系的改变或大小的调整，在不影响本发明所能产生的功效及所能达成的目的下，均应仍落在本发明所揭示的技术内容能涵盖的范围内。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。本发明的核心思想在于提供一种神经介入导航实时定位系统、方法、计算机可读存储介质和计算机设备，以解决现有技术的神经介入导航中配准定位自动化程度低、精度低的问题。如背景技术所述，现有的神经介入导航技术中，基于光学获取面部皮肤外轮廓进行配准定位，但由于人的皮肤是柔软有弹性的，且皮肤和颅脑并非刚性连接，术前术中由于位姿变化、表情变化等因素会导致面部轮廓发生形变，所以基于面部皮肤的配准定位方法存在很大的精度风险。而本发明基于人的上牙进行配准，上牙和颅骨在生理上是刚性连接的，因此能够提高定位精度，降低偏差风险。请参考图1，本发明提供的神经介入导航实时定位系统包括测量模块10和处理器单元20；所述测量模块10，用于实时测量患者上牙上预设位点的空间位置信息，并且将测量数据传递给所述处理器单元20；所述处理器单元20，用于响应于定标指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的初始位姿信息以完成初始位置定标，以及，响应于手术指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的实时位姿信息，并根据所述初始位姿信息和所述实时位姿信息进行颅骨实时定位。具体的，所述处理器单元20根据所述初始位姿信息和所述当前位姿信息进行颅骨定位，包括：根据所述初始位姿信息和所述当前位姿信息计算所述上牙的旋转平移矩阵；根据所述旋转平移矩阵与所述患者的脑部体数据图像计算所述患者的颅骨的旋转平移量；根据所述旋转平移量进行颅骨定位。可以理解的是，人的上牙位于上颌骨，同时上颌骨与人颅骨刚性连接，因此通过上牙的配准定位能够实现人颅骨的配准定位，并且通过上牙配准定位的方式抗干扰能力强，引入的误差少、精度高，相比于采用面部轮廓进行配准定位的方式，避免了由于局部形变导致配准精度差的问题；另外，采用本发明提供的神经介入导航实时定位系统通过测量上牙的空间位置信息进行实时配准定位的，在手术过程中无需使用颅骨钉、头架等侵入设备，患者无创伤；此外，使用了端到端的计算流程，计算效率高、实时性强，方便集成执行单元，辅助医生完成精准的手术。此外，在本发明中，由于测量模块、执行机构和床体是刚性连接状态，三者统一坐标系，所以不需要配准操作，这也是本发明相对于现有技术的优势之一，能够实现过程精简、精度高。下面结合三个具体实施例对本发明提供的神经介入导航实时定位系统进行详细介绍。＜实施例一＞本实施例提供了所述测量模块10的一种结构。请参考图2a、图2b，图2a示出了手术时本实施例的测量模块10的使用状态图，图2b示出了所述测量模块10中第一牙套装置与上牙的连接关系示意图。其中，测量模块10包括磁场发生器111、第一牙套装置112和多个磁传感器113，多个所述磁传感器113分别设置于所述第一牙套装置112内的多个所述预设位点处，所述第一牙套装置112与所述患者的上牙固定连接。所述第一牙套装置112根据所述患者的上牙模型设计制作。具体的，所述患者的上牙模型通过以下方式获取：首先获取所述患者的脑部体数据图像，然后对所述脑部体数据图像中的上颌骨进行分割，以得到上颌骨区域体数据，进而可基于所述上颌骨区域体数据建立所述上牙模型。本实施例中，所述脑部体数据图像可以是患者的CTA体数据图像，也可以是其它类型的医学图像。需要说明的是，所述脑部体数据图像的大小可以根据具体情况进行设置，本发明对此并不进行限制，例如脑部体数据图像的三维数据大小可为512×512×160。优选的，还可以对所述脑部体数据图像进行滤波处理以滤除图像中的噪声信息，提高所述脑部体数据图像的图像质量，例如可采用三维高斯平滑滤波器进行滤波处理。可采用区域增长的方式对所述脑部体数据图像中的上颌骨进行分割，由于脑部上颌骨及附着在上颌骨上面的牙齿的密度较高，因此在所述脑部体数据图像中上颌骨及附着在上颌骨上面的牙齿呈现高灰度值，可手动选取种子点，利用区域增长进行分割，得到上颌骨区域体数据Maxilla-Volume，其中上颌骨区域像素值为1、其他区域像素值为0。然后，可基于分割出来的上颌骨区域体数据Maxilla-Volume建立上牙模型Tooth-model，具体建立方法可参考现有技术，在此不做赘述。在所述上牙模型Tooth-model的基础上可通过3D打印方法制作得到所述第一牙套装置112，当然也可以采用其他制作工艺得到所述第一牙套装置112，本发明对此不做限定。所述磁传感器113的数量可以是2个，也可以是3个，也可以是3个以上。优选的，多个所述磁传感器113可对称的设置于所述第一牙套装置112上，例如，当所述磁传感器113的数量是2个时，2个所述磁传感器113分别设置于所述第一牙套装置112的第17和27号牙齿对应的位置，当所述磁传感器113的数量是3个时，3个所述磁传感器113分别设置于所述第一牙套装置112的第1号、17和27号牙齿对应的位置。在具体实施时，在根据所述上牙模型Tooth-model设计所述第一牙套装置112时，可在相应的位置处预留传感器安装槽1121，当制作得到所述第一牙套装置112后，在手术前先将所述磁传感器113置入所述第一牙套装置112的安装槽1121中，然后将所述第一牙套装置112套在所述患者的上牙上并固定，此时所述第一牙套装置112与所述患者的上颌骨处于刚性连接状态。优选的，如图2b所示，所述第一牙套装置112还可以连接一头部固定装置114，当所述第一牙套装置112套在所述患者的上牙后，所述头部固定装置114可套在所述患者的头部以加强所述第一牙套装置112与所述上牙的连接，避免所述第一牙套装置112从所述上牙上脱落。在手术时，所述患者躺在手术床上，所述磁场发生器111贴近所述患者口腔附近放置，如此所述磁场发生器111可产生穿过所述患者头部的磁场，优选产生匀强磁场，设置于所述第一牙套装置112内的所述磁传感器113即处于所述磁场中，则所述磁传感器113可实时采集其所在位置的磁场强度信息，并计算相应的所述预设位点的空间位置信息，以及将所述预设位点的空间位置信息传递给所述处理器单元20，以便于所述处理器单元20在手术过程中根据所述预设位点的空间位置信息进行相关计算以实现配准定位。在一种实现方式中，如图2b所示，所述磁传感器113的数量为三个，三个所述磁传感器113所在位置即为三个所述预设位点；三个所述磁传感器113可通过所述数据输出接口30将三个所述预设位点在所述磁场中的空间位置信息传递给所述处理器单元20，所述处理器单元20可根据三个所述预设位点的空间位置信息，结合所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。可以理解的是，所述第一牙套装置112上的三个所述预设位点在所述磁场中的空间位置信息用p1、p2、p3表示，结合所述第一牙套装置112对应的上牙模型即可计算得到所述第一牙套装置112的位置以及姿态信息表示，其中v为三维空间向量)，由于所述第一牙套装置112与所述患者的上牙贴合，所述第一牙套装置112的位姿信息即为所述患者的上牙的位姿信息。在手术开始前，医生可输入一定标指令，则所述处理器单元20响应于所述定标指令，计算当前时刻所述患者的上牙的位姿信息得到初始位姿信息，并进行初始位置定标。完成定标后，医生可输入一手术指令，则正式开始手术。在手术过程中，所述处理器单元20利用三个所述磁传感器113实时传递来的所述预设位点的空间位置信息p1、p2、p3，可实时计算当前时刻t所述患者的上牙的位姿信息得到所述实时位姿信息，再根据所述初始位姿信息和所述实时位姿信息可计算所述患者的上牙的旋转平移矩阵M1，由于所述上牙与上颌骨、颅骨50处于刚性连接状态，因此可以由所述旋转平移矩阵M1和所述患者术前头颅CT影像实时得到颅骨50的旋转平移量，进而可在手术的执行机构40上做相应的补偿，实现精准的手术定位。具体的补偿方法可参见现有技术，在此不做赘述。其中，旋转平移矩阵M1的计算公式如下，M1_rot和M1_trans是计算M1的中间量，分别代表旋转rotation、平移translation，合在一起成为旋转平移矩阵M1。M1_rot＝VtV0-1，M1_trans＝，在另一种实现方式中，所述磁传感器113的数量为两个，两个所述磁传感器113所在位置即为两个所述预设位点；与前述三个磁传感器113不同的是，这两个所述磁传感器113实时其采集所在位置的磁场强度信息后能够计算相应的所述预设位点的空间位置信息，同时这两个所述磁传感器113还能计算出各自的朝向信息，进而可通过所述数据输出接口30将两个所述预设位点在所述磁场中的空间位置信息以及两个所述磁传感器113的朝向信息传递给所述处理器单元20，以便于所述处理器单元20根据两个所述预设位点的空间位置信息和两个所述磁传感器113的朝向信息，结合所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。可以理解的是，所述第一牙套装置112上的两个所述预设位点在所述磁场中的空间位置信息和两个所述磁传感器113的朝向信息用、表示，结合所述第一牙套装置112对应的上牙模型即可计算得到所述第一牙套装置112的位置以及姿态信息表示)，由于所述第一牙套装置112与所述患者的上牙贴合，所述第一牙套装置112的位姿信息即为所述患者的上牙的位姿信息。同样的，在手术开始前，医生可输入一定标指令，则所述处理器单元20响应于所述定标指令，计算当前时刻所述患者的上牙的位姿信息得到初始位姿信息，并进行初始位置定标。完成定标后，医生可输入一手术指令，则正式开始手术。在手术过程中，所述处理器单元20利用两个所述磁传感器113实时传递来的所述预设位点的空间位置信息和两个所述磁传感器113的朝向信息用、表示，可实时计算当前时刻t所述患者的上牙的位姿信息得到所述实时位姿信息，再根据所述初始位姿信息和所述实时位姿信息可计算所述患者的上牙的旋转平移矩阵M1，由于所述上牙与上颌骨、颅骨50处于刚性连接状态，因此可以由所述旋转平移矩阵M1和所述患者术前头颅CT影像实时得到颅骨50的旋转平移量，进而可在手术的执行机构上做相应的补偿，实现精准的手术定位。具体的补偿方法可参见现有技术，在此不做赘述。其中，旋转平移矩阵M1的计算公式如下，M1_rot和M1_trans是计算M1的中间量，分别代表旋转rotation、平移translation，合在一起成为旋转平移矩阵M1。M1_rot＝VtV0-1，M1_trans＝，＜实施例二＞本实施例提供了所述测量模块10的另一种结构。请参考图3a、图3b，图3a示出了手术时本实施例的测量模块10的使用状态图，图3b示出了第二牙套装置的与上牙的连接关系示意图。其中，所述测量模块10包括：红外点云测距设备121、第二牙套装置122和红外定位点装置123，所述红外定位点装置123设置于所述第二牙套装置122上，所述第二牙套装置122与所述患者的上牙固定连接。所述第二牙套装置122根据所述患者的上牙模型设计制作，具体制作过程可参考实施例一，在此不做赘述。所述红外定位点装置123一般为球形，通常需要包含至少三个定位点。因此，在根据所述上牙模型Tooth-model设计所述第二牙套装置122时，可在相应的位置处预留所述红外定位点装置123的固定位1221，当制作得到所述第二牙套装置122后，在手术前先将所述红外定位点装置123置入所述第二牙套装置122的固定位1221中，然后将所述第二牙套装置122套在所述患者的上牙上并固定，此时所述第二牙套装置122与所述患者的上颌骨处于刚性连接状态。优选的，如图3b所示，所述第二牙套装置122也可以连接一头部固定装置124，当所述第二牙套装置122套在所述患者的上牙后，所述头部固定装置124可套在所述患者的头部以加强所述第二牙套装置122与所述上牙的连接，避免所述第二牙套装置122从所述上牙上脱落。在手术时，所述患者躺在手术床上，使用所述红外点云测距设备121照射所述红外定位点装置123，可调整二者相对位置以便于所述红外定位点装置123中的定位点全部处于所述红外点云测距设备121的有效工作范围内，如此，所述红外点云测距设备121可实时测量所述红外定位点装置123中定位点对应的所述预设位点的空间位置信息，以及将所述预设位点的空间位置信息传递给所述处理器单元20，以便于所述处理器单元20在手术过程中根据所述预设位点的空间位置信息进行相关计算以实现配准定位。具体的，如图3b所示，所述红外定位点装置123中定位点的数量为三个，三个所述定位点对应三个所述预设位点；所述红外点云测距设备121可通过所述数据输出接口30将三个所述预设位点相对于所述红外点云测距设备121的空间位置信息传递给所述处理器单元20，所述处理器单元20可根据三个所述预设位点的空间位置信息，结合所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。可以理解的是，所述第二牙套装置122上的三个所述预设位点相对于所述红外点云测距设备121的空间位置信息用p1、p2、p3表示，结合所述第二牙套装置122对应的上牙模型即可计算得到所述第二牙套装置122的位置以及姿态信息表示)，由于所述第二牙套装置122与所述患者的上牙贴合，所述第二牙套装置122的位姿信息即为所述患者的上牙的位姿信息。在手术开始前，医生可输入一定标指令，则所述处理器单元20响应于所述定标指令，计算当前时刻所述患者的上牙的位姿信息得到初始位姿信息，并进行初始位置定标。完成定标后，医生可输入一手术指令，则正式开始手术。在手术过程中，所述处理器单元20利用所述红外点云测距设备121实时传递来的三个所述预设位点的空间位置信息p1、p2、p3，可实时计算当前时刻t所述患者的上牙的位姿信息得到所述实时位姿信息，再根据所述初始位姿信息和所述实时位姿信息可计算所述患者的上牙的旋转平移矩阵M1，由于所述上牙与上颌骨、颅骨50处于刚性连接状态，因此可以由所述旋转平移矩阵M1和所述患者术前头颅CT影像实时得到颅骨50的旋转平移量，进而可在手术的执行机构上做相应的补偿，实现精准的手术定位。具体的补偿方法可参见现有技术，在此不做赘述。其中，旋转平移矩阵M1的计算公式如下，M1_rot和M1_trans是计算M1的中间量，分别代表旋转rotation、平移translation，合在一起成为旋转平移矩阵M1。M1_rot＝VtV0-1，M1_trans＝，＜实施例三＞本实施例提供了所述测量模块10的又一种结构。请参考图4，图4示出了手术时本实施例的测量模块10的使用状态图。其中，所述测量模块包括深度传感设备131，用于照射所述患者的上牙，以实时采集所述上牙的第一3D点云数据。在手术时，所述患者躺在手术床上，可采用一口腔撑开装置132使所述患者暴露上牙，以便于所述深度传感设备131能够照射其上牙，还可以调整所述深度传感设备131与所述口腔撑开装置132的相对位置以使所述上牙处于所述深度传感设备131的有效工作范围内，如此，所述深度传感设备131可以实时采集所述上牙的第一3D点云数据，以及将所述第一3D点云数据传递给所述处理器单元20，以便于所述处理器单元20在手术过程中根据所述第一3D点云数据进行相关计算以实现配准定位。具体的，所述处理器单元20对所述第一3D点云数据和预先获得的第二3D点云数据进行配准，得到所述上牙的初始位姿信息和所述实时位姿信息；其中，所述第二3D点云数据基于所述患者的上颌骨区域体数据提取所述上牙区域生成。所述患者的上颌骨区域体数据的获取方式与实施例一获取上颌骨区域体数据Maxilla-Volume的方式相同，在此不做赘述。在手术前，可事先基于所述上颌骨区域体数据Maxilla-Volume提取其中的上牙区域，从而生成所述第二3D点云数据，用point-cloud-1表示，生成3D点云数据的具体过程可参考现有技术，在此不做赘述。所述深度传感设备131实时采集所述患者的上牙的第一3D点云数据，用point-cloud-2表示，所述处理器单元20可采用配准算法对第一3D点云数据point-cloud-2和第二3D点云数据point-cloud-1进行配准，得到所述患者的上牙相对于所述深度传感设备131的的位置以及姿态信息表示)。在手术开始前，医生可输入一定标指令，则所述处理器单元20响应于所述定标指令，计算当前时刻所述患者的上牙的位姿信息得到初始位姿信息，并进行初始位置定标。完成定标后，医生可输入一手术指令，则正式开始手术。在手术过程中，所述处理器单元20利用所述深度传感设备131实时传递来的所述第一3D点云数据，可实时计算当前时刻t所述患者的上牙的位姿信息得到所述实时位姿信息，再根据所述初始位姿信息和所述实时位姿信息可计算所述患者的上牙的旋转平移矩阵M1，由于所述上牙与上颌骨、颅骨50处于刚性连接状态，因此可以由所述旋转平移矩阵M1和所述患者术前头颅CT影像实时得到颅骨50的旋转平移量，进而可在手术的执行机构40上做相应的补偿，实现精准的手术定位。具体的补偿方法可参见现有技术，在此不做赘述。其中，旋转平移矩阵M1的计算公式如下，M1_rot和M1_trans是计算M1的中间量，分别代表旋转rotation、平移translation，合在一起成为旋转平移矩阵M1。M1_rot＝VtV0-1，M1_trans＝，基于同样的发明构思，本发明还提供一种神经介入导航实时定位方法，包括：S100，获取测量模块实时测量的患者上牙上预设位点的空间位置信息；S200，响应于定标指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的初始位姿信息以完成初始位置定标；S300，响应于手术指令，根据当前时刻所述预设位点的空间位置信息计算所述上牙的实时位姿信息，并根据所述初始位姿信息和所述实时位姿信息进行颅骨实时定位。优选的，在所述神经介入导航实时定位方法中，所述测量模块包括：磁场发生器、第一牙套装置和多个磁传感器，多个所述磁传感器分别设置于所述第一牙套装置内的多个所述预设位点处，所述第一牙套装置用于与所述患者的上牙固定连接并根据所述患者的上牙模型设计制作；所述磁场发生器，用于产生穿过所述患者头部的磁场；所述磁传感器，用于实时采集其所在位置的磁场强度信息，并计算相应的所述预设位点的空间位置信息。优选的，在所述神经介入导航实时定位方法中，所述磁传感器的数量为至少三个，至少三个所述磁传感器所在位置即为至少三个所述预设位点；所述上牙的所述初始位姿信息和所述实时位姿信息按照以下方式计算：根据三个所述预设位点的空间位置信息和所述上牙模型，计算所述上牙的初始位姿信息和所述实时位姿信息。优选的，在所述神经介入导航实时定位方法中，所述磁传感器的数量为两个，两个所述磁传感器所在位置即为两个所述预设位点；所述磁传感器，用于实时采集其所在位置的磁场强度信息，并计算相应的所述预设位点的空间位置信息和所述磁传感器的朝向信息；所述上牙的所述初始位姿信息和所述实时位姿信息按照以下方式计算：根据两个所述预设位点的空间位置信息和两个所述磁传感器的朝向信息以及所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。优选的，在所述神经介入导航实时定位方法中，所述测量模块包括：红外点云测距设备、第二牙套装置和红外定位点装置，所述红外定位点装置设置于所述第二牙套装置上，所述第二牙套装置用于与所述患者的上牙固定连接并根据所述患者的上牙模型制作；所述红外点云测距设备，用于照射所述红外定位点装置，以实时获得所述红外定位点装置中定位点对应的所述预设位点的空间位置信息。优选的，在所述神经介入导航实时定位方法中，所述红外定位点装置中定位点的数量为至少三个，至少三个所述定位点对应至少三个所述预设位点；所述上牙的所述初始位姿信息和所述实时位姿信息按照以下方式计算：根据至少三个所述预设位点的空间位置信息和所述上牙模型，计算所述上牙的所述初始位姿信息和所述实时位姿信息。优选的，在所述神经介入导航实时定位方法中，所述患者的上牙模型通过以下方式获取：获取所述患者的脑部体数据图像；对所述脑部体数据图像中的上颌骨进行分割，以得到上颌骨区域体数据；以及基于所述上颌骨区域体数据建立所述上牙模型。优选的，在所述神经介入导航实时定位方法中，所述测量模块包括：深度传感设备，用于照射所述患者的上牙，以实时采集所述上牙的第一3D点云数据。优选的，在所述神经介入导航实时定位方法中，所述上牙的所述初始位姿信息和所述实时位姿信息按照以下方式计算：对所述第一3D点云数据和预先获得的第二3D点云数据进行配准，得到所述上牙的初始位姿信息和所述实时位姿信息；其中，所述第二3D点云数据基于所述患者的上颌骨区域体数据提取所述上牙区域生成。优选的，在所述神经介入导航实时定位方法中，所述根据所述初始位姿信息和所述当前位姿信息进行颅骨定位，包括：根据所述初始位姿信息和所述当前位姿信息计算所述上牙的旋转平移矩阵；根据所述旋转平移矩阵与所述患者的脑部体数据图像计算所述患者的颅骨的旋转平移量；以及根据所述旋转平移量进行颅骨定位。基于同样的发明构思，本发明还提供一种计算机可读存储介质，其上存储有计算机程序，该程序被处理器执行时实现如上文所述的一种神经介入导航实时定位方法。该存储介质可以包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。基于同样的发明构思，本发明还提供一种计算机设备，包括存储器和处理器，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时实现如上文所述的神经介入导航实时定位方法。具体地，在本发明实施例中，所述处理器可以为中央处理单元，该处理器还可以是其他通用处理器、数字信号处理器、专用集成电路、现成可编程门阵列或者其他可编程逻辑器件、分立门或者晶体管逻辑器件、分立硬件组件等。通用处理器可以是微处理器或者该处理器也可以是任何常规的处理器等。还应理解，本发明实施例中的存储器可以是易失性存储器或非易失性存储器，或可包括易失性和非易失性存储器两者。其中，非易失性存储器可以是只读存储器、可编程只读存储器、可擦除可编程只读存储器、电可擦除可编程只读存储器或闪存。易失性存储器可以是随机存取存储器，其用作外部高速缓存。通过示例性但不是限制性说明，许多形式的随机存取存储器可用，例如静态随机存取存储器、动态随机存取存储器、同步动态随机存取存储器、双倍数据速率同步动态随机存取存储器、增强型同步动态随机存取存储器、同步连接动态随机存取存储器和直接内存总线随机存取存储器。需要说明的是，本说明书中的各个实施例均采用相关的方式描述，各个实施例之间相同相似的部分互相参见即可，每个实施例重点说明的都是与其他实施例的不同之处。尤其，对于方法、计算机可读存储介质、计算机设备而言，由于其基本相似于系统实施例，所以描述的比较简单，相关之处参见系统实施例的部分说明即可。上述描述仅是对本发明较佳实施例的描述，并非对本发明范围的任何限定，本发明领域的普通技术人员根据上述揭示内容做的任何变更、修饰，均属于权利要求书的保护范围。
