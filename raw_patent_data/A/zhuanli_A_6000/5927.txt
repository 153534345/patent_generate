标题title
一种电动轮椅安全阈值控制方法
摘要abst
本发明一般地涉及电动轮椅移动控制领域。具体涉及一种电动轮椅安全阈值控制方法，包括：获取电动轮椅滚动角、地面坡度和轮椅前方地面图像；响应于坡度小于等于第二坡度预设值或行驶速度小于等于第二速度预设值，滚动角大于第一安全阈值，控制轮椅停止；响应于坡度大于第二坡度预设值且行驶速度大于第二速度预设值，滚动角大于第二安全阈值，控制轮椅减速；中，为调整系数；中，为自然常数，为调节系数，为地面平整度，为行驶速度，为额定速度；平整度根据图像获得。本发明解决了轮椅以较高的速度在坡度较大的道路转弯时易发生侧翻，且道路越不平整发生侧翻的可能性越大的问题。
权利要求书clms
1.一种电动轮椅安全阈值控制方法，其特征在于，包括：获取电动轮椅的滚动角、地面的坡度和所述电动轮椅前方地面的图像；响应于所述坡度小于等于第二坡度预设值或行驶速度小于等于第二速度预设值，所述滚动角大于第一安全阈值，控制所述电动轮椅停止行驶；响应于所述坡度大于第二坡度预设值且所述行驶速度大于第二速度预设值，所述滚动角大于第二安全阈值，控制所述电动轮椅减速；所述第二安全阈值根据获得，其中，/＞为第二安全阈值，/＞为第一安全阈值，/＞为调整系数；所述调整系数根据获得，其中，/＞为调节系数，/＞为所述地面的平整度，/＞为自然常数，/＞为所述行驶速度，/＞为所述电动轮椅的额定速度；所述平整度根据所述图像获得。2.根据权利要求1所述的一种电动轮椅安全阈值控制方法，其特征在于，还包括：响应于所述坡度大于第一坡度预设值或所述电动轮椅的行驶速度大于第一速度预设值，控制所述电动轮椅停止行驶。3.根据权利要求1所述的一种电动轮椅安全阈值控制方法，其特征在于，所述图像由所述电动轮椅上的相机或传感器获得。4.根据权利要求1所述的一种电动轮椅安全阈值控制方法，其特征在于，所述电动轮椅的滚动角根据所述电动轮椅的陀螺仪角度传感器获得。5.根据权利要求1所述的一种电动轮椅安全阈值控制方法，其特征在于，所述坡度根据陀螺仪角度传感器获得。6.根据权利要求1所述的一种电动轮椅安全阈值控制方法，其特征在于，所述平整度根据所述图像获得，包括：对所述图像进行预处理，所述预处理包括灰度化，获得灰度图像；对所述灰度图像进行分割，获得地面区域灰度图像；根据所述地面区域灰度图像获得所述平整度，所述平整度大于等于0小于等于1。7.根据权利要求4所述的一种电动轮椅安全阈值控制方法，其特征在于，所述电动轮椅的滚动角根据所述电动轮椅的陀螺仪角度传感器获得，包括：所述滚动角根据四元数数据获得，所述四元数数据由所述陀螺仪角度传感器获得。
说明书desc
技术领域本发明一般地涉及电动轮椅移动控制领域。更具体地，本发明涉及一种电动轮椅安全阈值控制方法。背景技术如今，存在数量较多的行动不便的人需要借助轮椅进行移动，行动不便的人可为部分病人等，随着人们生活水平的提高，电动轮椅越来越普及，而且普通人也可以借助电动轮椅进行移动。但是电动轮椅的行驶速度可较快，行驶的地面可能不平整，而且地面的坡度可能较大，因此通过电动轮椅进行移动时的安全问题应该受到重视。电动轮椅以较高的行驶速度在坡度较大的道路转弯时，容易发生侧翻，且道路越不平整发生侧翻的可能性越大，也就是说容易出现安全问题。发明内容为解决上述一个或多个技术问题，本发明提出通过当坡度大于第二坡度预设值且所述行驶速度大于第二速度预设值时，调低滚动角的安全阈值，使得电动轮椅更安全地行驶。为此，本发明在如下的多个方面中提供方案。在本发明实施方式的第一方面中，提供了一种电动轮椅安全阈值控制方法，包括：获取所述电动轮椅的滚动角、地面的坡度和所述电动轮椅前方地面的图像；响应于所述坡度小于等于第二坡度预设值或行驶速度小于等于第二速度预设值，所述滚动角大于第一安全阈值，控制所述电动轮椅停止行驶；响应于所述坡度大于第二坡度预设值且所述行驶速度大于第二速度预设值，所述滚动角大于第二安全阈值，控制所述电动轮椅减速；所述第二安全阈值根据获得，其中，/＞为第二安全阈值，/＞为第一安全阈值，/＞为调整系数；所述调整系数根据/＞获得，其中，/＞为调节系数，/＞为所述地面的平整度，/＞为自然常数，/＞为所述行驶速度，/＞为所述电动轮椅的额定速度；所述平整度根据所述图像获得。在一个实施例中，响应于所述坡度大于第一坡度预设值或所述电动轮椅的行驶速度大于第一速度预设值，控制所述电动轮椅停止行驶。在一个实施例中，所述图像由所述电动轮椅上的相机或传感器获得。在一个实施例中，所述电动轮椅的滚动角根据所述电动轮椅的陀螺仪角度传感器获得。在一个实施例中，所述坡度根据陀螺仪角度传感器获得。在一个实施例中，所述平整度根据所述图像获得，包括：对所述图像进行预处理，所述预处理包括灰度化，获得灰度图像；对所述灰度图像进行分割，获得地面区域灰度图像；根据所述地面区域灰度图像获得所述平整度，所述平整度大于等于0小于等于1。在一个实施例中，所述电动轮椅的滚动角根据所述电动轮椅的陀螺仪角度传感器获得，包括：所述滚动角根据四元数数据获得，所述四元数数据由所述陀螺仪角度传感器获得。本发明的有益效果包括：当所述坡度小于等于第二坡度预设值或所述行驶速度小于等于第二速度预设值时，说明电动轮椅发生安全事故的可能性较小，若滚动角小于等于第一安全阈值，则电动轮椅行驶的安全性较高，若滚动角大于第一安全阈值，则电动轮椅在行驶的过程中发生安全事故的可能性较大，为了使得电动轮椅行驶更加安全，控制电动轮椅停止行驶。当所述坡度大于第二坡度预设值且所述行驶速度大于第二速度预设值时，说明电动轮椅发生安全事故的可能性较大，若滚动角大于第二安全阈值，其中第二安全阈值小于第一安全阈值，为了使得电动轮椅行驶更加安全，控制电动轮椅减速。地面的平整度越小，调整系数越小，进而第二安全阈值越小。行驶速度越大，调整系数越小，进而第二安全阈值越小。因此，电动轮椅在行驶的过程中更加安全，电动轮椅在行驶过程中发生侧翻的可能性越小。当坡度大于第一坡度预设值时，说明电动轮椅在该坡度行驶更容易发生安全事故，当电动轮椅的行驶速度大于第一速度预设值时，说明电动轮椅的行驶速度过快以至于更容易发生安全事故，为了使得电动轮椅行驶更加安全，控制电动轮椅停止行驶。附图说明通过参考附图阅读下文的详细描述，本发明示例性实施方式的上述以及其他目的、特征和优点将变得易于理解。在附图中，以示例性而非限制性的方式示出了本发明的若干实施方式，并且相同或对应的标号表示相同或对应的部分，其中：图1是示意性示出根据本发明的实施例的一种电动轮椅安全阈值控制方法的流程图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。下面结合附图来详细描述本发明的具体实施方式。图1是示意性示出根据本发明的实施例的一种电动轮椅安全阈值控制方法的流程图。如图1所示，首先，根据本发明的第一方面，提供了一种电动轮椅安全阈值控制方法，包括：获取所述电动轮椅的滚动角、地面的坡度和所述电动轮椅前方地面的图像；响应于所述坡度小于等于第二坡度预设值或行驶速度小于等于第二速度预设值，所述滚动角大于第一安全阈值，控制所述电动轮椅停止行驶；响应于所述坡度大于第二坡度预设值且所述行驶速度大于第二速度预设值，所述滚动角大于第二安全阈值，控制所述电动轮椅减速；所述第二安全阈值根据获得，其中，/＞为第二安全阈值，/＞为第一安全阈值，/＞为调整系数；所述调整系数根据/＞获得，其中，/＞为调节系数，/＞为所述地面的平整度，/＞为自然常数，/＞为所述行驶速度，/＞为所述电动轮椅的额定速度；所述平整度根据所述图像获得。具体说明如下，如图1所示，包括步骤S1至S3：在步骤S1中，获取电动轮椅的滚动角、地面的坡度和所述电动轮椅前方地面的图像。获取电动轮椅当前时刻的滚动角，其中，电动轮椅的滚动角是电动轮椅绕其车身纵轴旋转的角度，换句话说，滚动角通常是以电动轮椅的纵向中心线为基准，测量车身左侧或右侧相对于水平面的倾斜角度，该倾斜角度为正值。电动轮椅的滚动角越大，该电动轮椅出现侧翻的可能性越大，该电动轮椅出现安全事故的可能性越大。获取电动轮椅当前时刻的滚动角有助于评估该电动轮椅在行驶过程中的安全性。获取电动轮椅当前时刻所在地面的坡度，其中，地面的坡度是指地面表面相对于水平面的倾斜程度或斜率，它用来描述地面的高低变化情况和地势的起伏程度。在一个实施例中，坡度以度数表示，当地面呈现上升的倾斜时，坡度为正数，当地面呈现下降的倾斜时，坡度也为正数，也就是说，不考虑坡度为负数的情况，坡度表示了地面的倾斜程度。坡度越大，表示地面的倾斜程度越大。电动轮椅在坡度越大的地面行驶时，尤其在坡度越大的地面转弯时，越容易发生侧翻等安全事故。例如，电动轮椅在上坡行驶时，电动轮椅需要更多的牵引力来克服重力和阻力，以保持前进，如果坡度过大，电动轮椅可能会失去牵引力，无法继续前进或容易打滑；电动轮椅在下坡行驶时，电动轮椅可能会因坡度的增加而加速，导致驾驶者难以控制电动轮椅。因此，较大的坡度会对电动轮椅的牵引力产生重要影响，可能影响行驶稳定性和安全性。获取电动轮椅当前时刻所在地面的坡度有助于评估该电动轮椅在行驶过程中的安全性。获取当前时刻电动轮椅前方地面的图像，以用于获取地面的平整程度，其影响电动轮椅行驶过程中的安全性。因为平整度较大的地面的图像和平整度较小的地面的图像存在一定的差异，且不同的平整度较大的地面图像具有相类似的特征，不同的平整度较小的地面图像具有相类似的特征。在步骤S2中，响应于所述坡度小于等于第二坡度预设值或行驶速度小于等于第二速度预设值，所述滚动角大于第一安全阈值，控制所述电动轮椅停止行驶。当电动轮椅当前时刻所在地面的坡度小于等于第二坡度预设值时，说明该电动轮椅在行驶过程中发生安全事故的可能性较小，允许该电动轮椅当前时刻的滚动角较大，该滚动角小于等于第一安全阈值，此时，依然能够满足电动轮椅的行驶安全要求。在一个实施例中，第二坡度预设值可设为10度。在其他实施例中，实施者可根据具体实施场景自行设置第二坡度预设值，以使得电动轮椅当前时刻的滚动角小于等于第一安全阈值时，依然满足电动轮椅的行驶安全要求。在一个实施例中，电动轮椅具有至少一个速度档位，不同的档位对应的额定速度不同，档位越大，电动轮椅的额定速度越大，例如，具有5个速度档位，当电动轮椅处于第5档位时，该电动轮椅的额定速度为6千米每小时，约等于1.67米每秒。当电动轮椅当前时刻的行驶速度小于等于第二速度预设值时，说明该电动轮椅以该速度行驶时发生安全事故的可能性较小，允许该电动轮椅当前时刻的滚动角较大，该滚动角小于等于第一安全阈值时，依然能够满足电动轮椅的行驶安全要求。在一个实施例中，当电动轮椅处于第5档位时，该电动轮椅的额定速度为6千米每小时，约等于1.67米每秒，第二速度预设值可设为1米每秒。在其他实施例中，实施者可根据具体实施场景自行设置第二速度预设值，以使得电动轮椅当前时刻的滚动角小于等于第一安全阈值时，依然满足电动轮椅的行驶安全的要求。为了降低电动轮椅发生安全事故的可能性，例如为了降低电动轮椅在行驶过程中发生侧翻的可能性，响应于所述坡度小于等于第二坡度预设值或行驶速度小于等于第二速度预设值，所述滚动角大于第一安全阈值，控制所述电动轮椅停止行驶。在一个实施例中，第一安全阈值可设为15度。在其他实施例中，实施者可根据具体实施场景自行设置第一安全阈值，以使得当坡度小于等于第二坡度预设值或所述行驶速度小于等于第二速度预设值时，满足电动轮椅的行驶安全要求。在步骤S3中，响应于所述坡度大于第二坡度预设值且所述行驶速度大于第二速度预设值，所述滚动角大于第二安全阈值，控制所述电动轮椅减速。具体而言，响应于所述坡度大于第二坡度预设值且所述行驶速度大于第二速度预设值，所述滚动角大于第二安全阈值，控制所述电动轮椅减速；所述第二安全阈值根据获得，其中，/＞为第二安全阈值，/＞为第一安全阈值，/＞为调整系数；所述调整系数根据/＞获得，其中，/＞为调节系数，/＞为所述地面的平整度，/＞为自然常数，/＞为所述行驶速度，/＞为所述电动轮椅的额定速度；所述平整度根据所述图像获得。当电动轮椅当前时刻所在地面的坡度大于第二坡度预设值且该电动轮椅当前时刻的行驶速度大于第二速度预设值时，该电动轮椅在行驶过程中发生安全事故的可能性较大，为了提高电动轮椅行驶过程中的安全性，当该电动轮椅当前时刻的滚动角大于第二安全阈值时，控制该电动轮椅减速，在一个实施例中，控制该电动轮椅减速至小于等于第三速度预设值后停止本次减速，该第三速度预设值为调整因子与第二速度预设值的积，该调整因子大于等于0小于1，该调整因子越大，电动轮椅减速后的速度越小。在一个实施例中，实施者可根据具体实施场景自行设置调整因子，以满足电动轮椅行驶过程中的安全性要求。其中，第二安全阈值小于第一安全阈值。调整系数越大，第二安全阈值越大。为了获得更合适且相较于第一安全阈值小的第二安全阈值，在满足电动轮椅行驶的安全性要求的前提下，使得第二安全阈值尽量大，第二安全阈值根据获得，调整系数根据/＞获得。/＞的值大于0小于等于1。在一个实施例中，取1.5。在其他实施例中，实施者可根据具体实施场景自行设置调节系数，以获得较为合适的调节系数，在满足电动轮椅在行驶过程中安全性要求的前提下，尽量获得较大的调节系数，进而获得较大的第二安全阈值。地面的平整度和第二安全阈值呈正相关关系。地面的平整度越小，调整系数越小，进而第二安全阈值越小。电动轮椅的行驶速度和第二安全阈值呈负相关关系。行驶速度越大，调整系数越小，进而第二安全阈值越小。的目的在于，使得/＞不至于过小而影响获得的调整系数的准确性。当前时刻电动轮椅前方地面的图像包含地面的平整度信息，可通过获取图像中的与平整度有关的特征信息，进而获得地面的平整度。例如，该特征包括纹理、边缘和角点等，可使用滤波器、边缘检测算法或角点检测算法等技术来获取这些特征。利用图像处理等技术获得地面的平整程度是本领域所熟知的现有技术。当所述坡度大于第二坡度预设值且所述行驶速度大于第二速度预设值，此时，电动轮椅在行驶的过程中容易发生安全事故，为了降低电动轮椅发生安全事故的可能性，例如为了降低电动轮椅在行驶过程中发生侧翻的可能性，当所述滚动角大于第二安全阈值时，控制电动轮椅减速。在一个实施例中，响应于所述坡度大于第一坡度预设值或所述电动轮椅的行驶速度大于第一速度预设值，控制所述电动轮椅停止行驶。电动轮椅在坡度越大的地面行驶越不安全。当电动轮椅当前时刻所在地面的坡度大于第一坡度预设值，说明电动轮椅在该坡度的地面行驶时发生安全事故的可能性较大，为了使得电动轮椅行驶更加安全，控制电动轮椅停止行驶，也就是说，控制电动轮椅处于刹车状态。在一个实施例中，第一坡度预设值可设置为15度。在其他实施例中，实施者可根据具体的实施场景自行设置第一坡度预设值的大小，以满足电动轮椅的行驶安全的要求。电动轮椅的行驶速度越大越不安全。当电动轮椅当前时刻的行驶速度大于第一速度预设值，说明电动轮椅以该速度行驶时发生安全事故的可能性较大，为了使得电动轮椅行驶更加安全，控制电动轮椅停止行驶，也就是说，控制电动轮椅处于刹车状态。在一个实施例中，当电动轮椅处于第5档位时，该电动轮椅的额定速度为6千米每小时，约等于1.67米每秒，第一速度阈值可设为1.67米每秒。在其他实施例中，实施者可根据具体的实施场景自行设置第一速度预设值的大小，以满足电动轮椅行驶安全的要求。在一个实施例中，所述图像由所述电动轮椅上的相机或传感器获得。该图像是当前时刻通过相机或传感器拍摄的。在一个实施例中，所述电动轮椅的滚动角根据所述电动轮椅的陀螺仪角度传感器获得。在一个实施例中，所述滚动角根据四元数数据获得，所述四元数数据由所述陀螺仪角度传感器获得。需要说明的是，通过安装在电动轮椅上的陀螺仪角度传感器可以实时测量电动轮椅的旋转角度，其包括滚动角、俯仰角和偏转角等。还可通过加速度计测量电动轮椅在三个轴向的加速度，包括纵向、横向和竖向加速度。根据这些加速度数据，可以通过积分计算得到电动轮椅的滚动角。现有技术中存在至少一种测量滚动角的方法。例如，可通过陀螺仪角度传感器获得四元数数据，进而可根据该四元数数据获得滚动角、俯仰角和偏航角等。四元数法在陀螺仪数据处理中的应用如下：四元数的定义：在复平面上，有序的四元素称为一个四元数，其中每个元素都是复数，且满足以下条件：/＞，/＞。通过四元数的定义可以看出，四元数的实部为零，虚部的平方和为-1。因此，四元数表示的是一种旋转，其单位化表示为：，其中，/＞为自然常数，/＞表示旋转角度，/＞表示虚数单位，/＞、/＞、/＞分别表示绕/＞、/＞、/＞轴旋转的角度。陀螺仪输出的三个角速度分量可以表示为三个单位四元数，通过对这三个四元数进行乘法和加法运算，可以计算出载体相对于惯性空间的旋转角度和旋转速度。具体来说，假设载体坐标系与导航坐标系重合，载体相对于惯性空间的旋转可以表示为三个单位四元数、/＞和/＞，其中/＞、/＞、/＞分别表示绕/＞、/＞和/＞轴旋转的四元数。通过对这三个四元数进行乘法和加法运算，可以计算出载体相对于导航坐标系的旋转角度和旋转速度。例如，绕轴旋转的角度/＞可以通过以下公式计算：，其中，/＞、、/＞分别表示/＞、/＞、/＞的共轭复数。通过对陀螺仪输出的三个角速度分量进行单位化和四元数运算，可以得到载体相对于惯性空间的旋转角度和旋转速度。另外，可将陀螺仪角度传感器获得的四元数数据转化为欧拉角，欧拉角由三个独立的角度组成，通常以Yaw、Pitch和Roll来表示，进而得到了滚动角、俯仰角和偏航角等。在一个实施例中，所述坡度根据陀螺仪角度传感器获得。可将陀螺仪角度传感器获得的四元数数据转化为欧拉角，进而获得的俯仰角即为坡度。在一个实施例中，所述平整度根据所述图像获得，包括：对所述图像进行预处理，所述预处理包括灰度化，获得灰度图像；对所述灰度图像进行分割，获得地面区域灰度图像；根据所述地面区域灰度图像获得所述平整度，所述平整度大于等于0小于等于1。首先对图像进行必要的预处理步骤，例如，对图像进行灰度化获得灰度图像，再对该灰度图像进行去噪操作等，以提高后续处理的准确性。利用现有技术中的图像分割技术将地面区域从图像中分割出来，可获得地面区域灰度图像，其中，可以通过阈值分割、边缘跟踪或区域生长等方法实现。计算地面平整度的一种方法为：计算地面区域灰度图像中所有灰度像素值的标准差。或计算地面区域灰度图像中至少两个灰度像素点的标准差，例如，为了提高计算的速度，可均匀选取若干个灰度像素点，并计算标准差，例如，隔行选取灰度像素点，对于待选择的一行灰度像素点，隔列选择灰度像素点，计算选择的灰度像素值的标准差。若计算的标准差大于预设颠簸阈值，则令该地面区域灰度图像对应的地面平整度为第一预设平整度，原因在于，若地面越平整，则对应的标准差越小的可能性越大；该标准差越大的地面的平整程度越小的可能性越大，当该标准差大于预设颠簸阈值时，说明地面的平整程度较小的可能性较大，电动轮椅在行驶过程中的安全性较低的可能性较大，应使得第二安全阈值进一步调小，以满足电动轮椅在行驶过程中的安全要求。在一个实施例中，第一预设平整度可设为0.7。在其他实施例中，实施者可根据具体的实施场景自行设置第一预设平整度，以满足电动轮椅行驶过程中的安全性要求。若计算的标准差小于等于该预设颠簸阈值，则令该地面区域灰度图像对应的地面平整度为1，原因在于，地面的平整程度较大时，地面的平整程度对电动轮椅行驶过程中的安全性影响较低，可忽略不计。当预设颠簸阈值取较大值时，地面的平整程度对电动轮椅行驶过程中的安全性影响较低。当预设颠簸阈值取较小值时，地面的平整程度对电动轮椅行驶过程中的安全性影响较高。在一个实施例中，实施者可根据具体的实施场景自行设置预设颠簸阈值，以满足电动轮椅行驶过程中的安全性要求。需要说明的是，当电动轮椅的速度档位为第5档位，电动轮椅在该档位下的额定速度为1.67米每秒，调节系数取1.5时：当坡度为9度，行驶速度为0.9米每秒时，第一安全阈值为15度；表1为当电动轮椅的速度档位为第5档位，电动轮椅的额定速度为1.67米每秒，坡度大于10度，行驶速度大于1米每秒，调节系数取1.5，平整度为1或0.7时，行驶速度取不同值的第二安全阈值取值表。表1为平整度为1或0.7时第二安全阈值取值表在本说明书的描述中，“多个”、“若干个”的含义是至少两个，例如两个，三个或更多个等，除非另有明确具体的限定。虽然本说明书已经示出和描述了本发明的多个实施例，但对于本领域技术人员显而易见的是，这样的实施例只是以示例的方式提供的。本领域技术人员会在不偏离本发明思想和精神的情况下想到许多更改、改变和替代的方式。应当理解的是在实践本发明的过程中，可以采用对本文所描述的本发明实施例的各种替代方案。
