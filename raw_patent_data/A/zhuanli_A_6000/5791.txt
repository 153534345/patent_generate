标题title
一种基于心率变异性的叫醒系统
摘要abst
本发明涉及医疗领域，具体涉及一种基于心率变异性的叫醒系统，包括数据采集系统、数据处理与程序总控系统与睡眠叫醒系统；数据采集系统，用于采集用户的心电信号，并将心电信号传输至数据处理与程序总控系统；数据处理与程序总控系统，用于将采集到的心电信号进行预处理，并将预处理后的心电信号数据转换为心率变异性数据，提取心率变异性特征，构建出睡眠分期模型实时分析用户的睡眠阶段，在满足预设条件时向睡眠叫醒系统发送叫醒指令；睡眠叫醒系统，用于用户的叫醒；当睡眠叫醒系统接收到数据处理与程序总控系统发出的叫醒指令后，进行叫醒。本发明可保证用户在恰当的睡眠阶段醒来，以最佳的状态快速进入工作。
权利要求书clms
1.一种基于心率变异性的叫醒系统，其特征在于，包括数据采集系统、数据处理与程序总控系统与睡眠叫醒系统；所述数据采集系统，用于采集用户的心电信号，并将心电信号传输至数据处理与程序总控系统；所述数据处理与程序总控系统，用于将采集到的心电信号进行预处理，并将预处理后的心电信号数据转换为心率变异性数据，提取心率变异性特征，构建出睡眠分期模型实时分析用户的睡眠阶段，在满足预设条件时向睡眠叫醒系统发送叫醒指令；所述睡眠叫醒系统，用于用户的叫醒；当睡眠叫醒系统接收到数据处理与程序总控系统发出的叫醒指令后，进行叫醒。2.根据权利要求1所述的一种基于心率变异性的叫醒系统，其特征在于，所述数据采集系统包括心率带，所述心率带探测电极放在心脏附近，记录心脏周围的心电信号；获取的心电信号再通过有线或无线通讯方式传输至数据处理与程序总控系统。3.根据权利要求2所述的一种基于心率变异性的叫醒系统，其特征在于，所述心率带包括心率监测器、卡扣、可拉伸针织带、伸缩扣与连接组件；所述心率监测器通过卡扣固定于可拉伸针织带上，所述可拉伸针织带一端连接伸缩扣且可拉伸针织带两端通过连接组件连接。4.根据权利要求1所述的一种基于心率变异性的叫醒系统，其特征在于，所述将采集到的心电信号进行预处理，并将预处理后的心电信号数据转换为心率变异性数据，提取心率变异性特征，构建出睡眠分期模型实时分析用户的睡眠阶段，具体步骤如下：1)信号预处理：用无限脉冲响应的IIR的巴特沃兹滤波器对原始心电信号进行截止频率为0.5-100Hz的滤波处理，滤除基线漂移，并抑制其高频噪声；2)心率变异性数据转换：利用小波变换对心电信号进行8尺度的分解，然后选取第4尺度的小波系数重建ECG信号，并检测重构信号中的正负极值对，完成R波峰值定位，同时利用斜率法增加R峰识别的准确性，进而提取出所有连续两个R-R峰之间时间间隔，生成RR间期序列；3)划分样本点：以每5min的时间跨度划分RR间期序列，分割后的每一小段序列即为一个样本点；4)心率变异性特征提取：以5min的ECG数据长度进行HRV短程分析，从HRV的时域、频域中提取特征数据；5)构建睡眠分期模型：采用BP神经网络模型，先根据AASM睡眠分期标准预先设定分期类别的目标值，再将上述提取到的HRV特征数据作为输入，对BP神经网络模型进行训练，直至模型收敛；6)实时睡眠分期：将用户睡眠过程得到的实时HRV特征数据输入训练好的模型中，实时分析用户的睡眠阶段。5.根据权利要求4所述的一种基于心率变异性的叫醒系统，其特征在于，步骤4)中频域特征数据的提取具体为：先将RR间期序列通过快速傅里叶变换算法将其转换至频域上，再计算出频域特征数据。6.根据权利要求1所述的一种基于心率变异性的叫醒系统，其特征在于，所述睡眠叫醒系统包括温控枕头、叫醒床以及用于控制温控枕头、叫醒床的控制器，所述温控枕头包括枕头、压力传感器及温度控制器，所述压力传感器及温度控制器均安装于枕头中；所述叫醒床包括床垫、床架、推动装置及压力传感器，所述床垫放置于床架上，所述推动装置及压力传感器安装于床垫内；所述温控枕头、叫醒床均与控制器电性连接。7.根据权利要求6所述的一种基于心率变异性的叫醒系统，其特征在于，当睡眠叫醒系统接收到数据处理与程序总控系统发出的叫醒指令后，进行叫醒，具体步骤如下：a)当接收到叫醒指令后，枕头内的温度控制器启动，逐渐降低温度，直到枕头压力传感器检测到的压力信号小于预设阈值后，温度控制器关闭；b)当接收到叫醒指令后，床垫中内置的推动装置开始依次上下波动，直到枕头压力传感器检测到的压力信号小于预设阈值后，推动装置停止运作。8.根据权利要求4所述的一种基于心率变异性的叫醒系统，其特征在于，步骤5)中BP神经网络模型的训练数据为：由数据采集系统采集并由数据处理与程序总控系统统计的预设时长的用户睡眠数据。9.根据权利要求1所述的一种基于心率变异性的叫醒系统，其特征在于，在满足预设条件时向睡眠叫醒系统发送叫醒指令，具体包括如下步骤：A)在默认状态下在用户处于第四个睡眠周期末时发送叫醒指令；B)若用户设定特定的起床时间段，则在此时间段内按浅睡期、快速眼动期的优先级顺序发送叫醒指令。10.根据权利要求1所述的一种基于心率变异性的叫醒系统，其特征在于，步骤B)中按浅睡期、快速眼动期的优先级顺序发送叫醒指令，具体步骤如下：先判断用户目前是否处于浅睡期，若是，则叫发送叫醒指令；若否，则判断用户目前是否处于快速眼动期期，若是，则叫发送叫醒指令；若否，则重新监测。
说明书desc
技术领域本发明涉及医学领域，具体涉及一种基于心率变异性的叫醒系统。背景技术睡眠对于人体的机体恢复和记忆巩固具有重要的意义。良好的睡眠不仅可以消除疲劳、恢复体力、缓解精神压力，还具有促进生长发育、增强免疫力和预防疾病的作用，而失眠或睡眠不足则会严重影响人们第二天的精神状态。国内研究发现，随着经济科技的发展，睡眠问题正越发成为困扰现代人生活品质提升的突出问题，我国约有42.5％的人群存在严重的失眠、难以入睡、打鼾等问题。国外最新研究表明失眠症患者与焦虑抑郁症患者存在很大的相关性，抑郁症患者有90％的人表明他们也长期饱受失眠的困扰。因此，对睡眠状态进行评估，保证人们具有高质量的睡眠就显得尤为重要。睡眠质量的高低与睡眠时间的长短并不呈正相关，过长的睡眠往往可能适得其反，造成人体软弱无力、精神疲惫、代谢率降低等后果。所以，监测人体的睡眠进程，对人体的睡眠阶段进行分析与判别，在人体的精神和机体恢复到最佳时期进行叫醒，可有效发挥睡眠的有益作用。1968年，科学家Rechtsehaffen第一次将睡眠分为6期。随后，美国加州大学脑研究所在Rechtsehaffen提出的6分期基础上，发布了基于2通道脑电、2通道眼电和1通道肌电信号的R&amp;K睡眠分期标准，这一国际睡眠分期标准一直流行沿用至今。R&amp;K分期标准睡眠分为6期，分别为：觉醒期、非快速眼动期和快速眼动期，其中NREM期又被分为浅睡期和深度睡眠期。直到2007年，美国睡眠医学学会为了方便睡眠研究，将R&amp;K标准中的深睡眠期NREM3和NREM4合并为NREM3期，共5期，这也是目前睡眠分期研究中最常用的标准。目前，市场上的睡眠叫醒系统以音乐唤醒和灯光唤醒为主，叫醒方式单一，且大多根据用户设定的时间进行叫醒，不够个性化与智能化。然而，不同用户具有不同的睡眠周期和睡眠状态，不同年龄的用户，适当的睡眠时间也有很大差异，传统的定时闹钟叫醒模式已不能满足用户对高质量睡眠的要求。在极少数能够根据用户的睡眠状态适时地叫醒用户的系统中，大多记录的是用户的脑电波，通过分析用户的脑电信号进行睡眠分期，虽然脑电仍然是睡眠分期的金标准，准确率较高，但其操作复杂、费用昂贵，大多应用于医院等场所，普及到广大家庭中仍然存在一定的现实障碍。发明内容为解决上述问题，本发明提供了一种基于心率变异性的叫醒系统。为了解决上述技术问题，本发明采用的技术方案为：一种基于心率变异性的叫醒系统，包括数据采集系统、数据处理与程序总控系统与睡眠叫醒系统；所述数据采集系统，用于采集用户的心电信号，并将心电信号传输至数据处理与程序总控系统；所述数据处理与程序总控系统，用于将采集到的心电信号进行预处理，并将预处理后的心电信号数据转换为心率变异性数据，提取心率变异性特征，构建出睡眠分期模型实时分析用户的睡眠阶段，在满足预设条件时向睡眠叫醒系统发送叫醒指令；所述睡眠叫醒系统，用于用户的叫醒；其主要通过无线接收的方式，接收数据处理与程序总控系统发出的叫醒指令；当睡眠叫醒系统接收到数据处理与程序总控系统发出的叫醒指令后，进行叫醒。进一步的，所述数据采集系统包括心率带，所述心率带探测电极放在心脏附近，记录心脏周围的心电信号；获取的心电信号再通过有线或无线通讯方式传输至数据处理与程序总控系统。优选的，所述心率带包括心率监测器、卡扣、可拉伸针织带、伸缩扣与连接组件；所述心率监测器通过卡扣固定于可拉伸针织带上，所述可拉伸针织带一端连接伸缩扣且可拉伸针织带两端通过连接组件连接。进一步的，所述将采集到的心电信号进行预处理，并将预处理后的心电信号数据转换为心率变异性数据，提取心率变异性特征，构建出睡眠分期模型实时分析用户的睡眠阶段，具体步骤如下：1)信号预处理：用无限脉冲响应的IIR的巴特沃兹滤波器对原始心电信号进行截止频率为0.5-100Hz的滤波处理，滤除基线漂移，并抑制其高频噪声；2)心率变异性数据转换：利用小波变换对心电信号进行8尺度的分解，然后选取第4尺度的小波系数重建ECG信号，并检测重构信号中的正负极值对，完成R波峰值定位，同时利用斜率法增加R峰识别的准确性，进而提取出所有连续两个R-R峰之间时间间隔，生成RR间期序列；3)划分样本点：以每5min的时间跨度划分RR间期序列，分割后的每一小段序列即为一个样本点，即5min/样本点，以此样本点作为后面的输入数据；4)心率变异性特征提取：以5min的ECG数据长度进行HRV短程分析，从HRV的时域、频域中提取特征数据；5)构建睡眠分期模型：采用BP神经网络模型，先根据AASM睡眠分期标准预先设定分期类别的目标值，再将上述提取到的HRV特征数据作为输入，对BP神经网络模型进行训练，直至模型收敛；6)实时睡眠分期：将用户睡眠过程得到的实时HRV特征数据输入训练好的模型中，实时分析用户的睡眠阶段。进一步的，步骤4)中频域特征数据的提取具体为：先将RR间期序列通过快速傅里叶变换算法将其转换至频域上，再计算出频域特征数据。优选的，所述睡眠叫醒系统包括温控枕头、叫醒床以及用于控制温控枕头、叫醒床的控制器，所述温控枕头包括枕头、压力传感器及温度控制器，所述压力传感器及温度控制器均安装于枕头中；所述叫醒床包括床垫、床架、推动装置及压力传感器，所述床垫放置于床架上，所述推动装置及压力传感器安装于床垫内；其中，推动装置由多个推顶单元组成。所述温控枕头、叫醒床均与控制器电性连接。进一步的，当睡眠叫醒系统接收到数据处理与程序总控系统发出的叫醒指令后，进行叫醒，具体步骤如下：a)当接收到叫醒指令后，枕头内的温度控制器启动，逐渐降低温度，直到枕头压力传感器检测到的压力信号小于预设阈值后，温度控制器关闭；b)当接收到叫醒指令后，床垫中内置的推动装置开始依次上下波动，直到枕头压力传感器检测到的压力信号小于预设阈值后，推动装置停止运作。优选的，步骤5)中BP神经网络模型的训练数据为：由数据采集系统采集并由数据处理与程序总控系统统计的预设时长的用户睡眠数据，进而构建出用户个人的睡眠分期模型。进一步的，在满足预设条件时向睡眠叫醒系统发送叫醒指令，具体包括如下步骤：A)在默认状态下在用户处于第四个睡眠周期末时发送叫醒指令；B)若用户设定特定的起床时间段，则在此时间段内按浅睡期、快速眼动期的优先级顺序发送叫醒指令。进一步的，步骤B)中按浅睡期、快速眼动期的优先级顺序发送叫醒指令，具体步骤如下：先判断用户目前是否处于浅睡期，若是，则叫发送叫醒指令；若否，则判断用户目前是否处于快速眼动期期，若是，则叫发送叫醒指令；若否，则重新监测。本发明的有益效果在于：1)本发明的叫醒方式为枕头温度的变化与床的推动，通过触觉叫醒用户。相比于传统的闹铃方式，本发明叫醒时间更短，速度更快，且只有用户离开床和枕头时，温度控制器和推动装置才会停止运作，具有一定的强制性，叫醒效果更好。2)本发明监测的是用户的心率，通过分析心率变异性进行睡眠分期，相比于脑电睡眠分期，本发明的监测设备操作更简洁、无需依赖专业操作人员；监测过程中用户更舒适、几乎不影响睡眠数据；设备更便捷、价格低，适用于广大普通家庭。3)本发明可以实时监测用户的睡眠进程，根据不同的用户构建个性化的睡眠周期，并且在默认状态下，在用户处于第四个睡眠周期末叫醒用户。若用户设定起床时间段，则在此期间按浅睡期、快速眼动期的优先级顺序叫醒用户，尽量在用户的精神和机体恢复到最佳状态时进行叫醒，保证用户一整天良好的工作状态。4)从睡眠监测到睡眠分期再到睡眠叫醒，本系统的整个工作流程均为自动化，系统的工作方式更为灵活，无需用户进行复杂的手动操作，相比于传统的闹铃叫醒方式，本叫醒系统更为智能化。附图说明图1为本发明的示意图；图2为数据处理与程序总控系统处理数据和构建睡眠分期的流程图；图3为叫醒系统的叫醒逻辑示意图；图4为叫醒床和温控枕头的结构示意图；图5为温控枕头的示意图；图6为心率带示意图。附图中标号名称如下：心率带-1；温控枕头-2；心率监测器-11；卡扣-12；可拉伸针织带-13；伸缩扣-14；连接扣-15；连接扣孔-16；枕头-21；温度控制器-22；床垫-31；床架-32；推动装置-33。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。参照附图1-3所示，一种基于心率变异性的叫醒系统，包括数据采集系统、数据处理与程序总控系统与睡眠叫醒系统；数据采集系统，用于采集用户的心电信号，并将心电信号传输至数据处理与程序总控系统；参照附图6所示，心率带1主要包括心率监测器11、卡扣12、可拉伸针织带13、伸缩扣14与连接组件；心率监测器11通过卡扣12固定于可拉伸针织带13上，可拉伸针织带13一端连接伸缩扣14且可拉伸针织带13两端通过连接组件连接。本实施例中连接组件为连接扣15与连接扣孔16，即可拉伸针织带13两端通过连接扣15与连接扣孔16连接。使用时以心率带的形式沿用户心脏绕一圈，心率带在心脏周围处有探测电极，用于采集心电信号，心率带剩余部分采用有弹性的橡皮筋，使用户在睡眠时无束缚感。心率带在使用时可适当喷洒水增加导电性，使采集到的心电信号更清晰。电极记录的电压信号随后通过带屏蔽的电极导联线进入采集系统中的调理电路完成信号放大，以及模数转换等初步处理。经过模数转换的心电信号通过有线或无线通讯方式传输至数据处理与程序总控系统。数据处理与程序总控系统包括STM32处理器，用于将采集到的心电信号进行预处理，并将预处理后的心电信号数据转换为心率变异性数据，提取心率变异性特征，构建出睡眠分期模型实时分析用户的睡眠阶段，在满足预设条件时向睡眠叫醒系统发送叫醒指令；具体流程如下：1)信号预处理：采用无限脉冲响应的IIR的巴特沃兹滤波器对原始心电信号进行截止频率为0.5-100Hz的滤波处理，滤除基线漂移，并抑制其高频噪声。2)心率变异性数据转换：利用小波变换对心电信号进行8尺度的分解，然后选取第4尺度的小波系数重建ECG信号，并检测重构信号中的正负极值对，完成R波峰值定位，同时利用斜率法增加R峰识别的准确性，进而提取出所有连续两个R-R峰之间时间间隔，生成RR间期序列；。3)划分样本点，以每5min的时间跨度划分RR间期序列，分割后的每一小段序列即为一个样本点，即5min/样本点，以此样本点作为后面的输入数据。4)心率变异性特征提取：采用5min的ECG数据长度进行HRV短程分析，从HRV的时域、频域中提取特征值。其中，频域特征的提取需先将RR间期序列通过快速傅里叶变换算法将其转换至频域上，再计算出频域特征。5)构建睡眠分期模型：采用BP神经网络算法模型，先根据AASM睡眠分期标准预先设定分期类别的目标值，之后将上述提取到的HRV特征值输入神经网络进行有监督的学习训练，直至模型收敛；其中，BP神经网络模型的训练数据为：由数据采集系统采集并由数据处理与程序总控系统统计的大约一周左右的用户睡眠数据。即用户拿到产品后先使用一周左右，采集统计一周左右的用户睡眠数据，再以该数据作为训练数据对模型进行训练，构建出用户个人的睡眠分期模型。在这里，年龄也作为变量之一输入神经网络进行训练，以此构建出较为精准的睡眠分期模型。由于不同年龄的人心率变异性的数据范围不同，在基于BP神经网络对HRV数据进行训练，构建睡眠分期模型的过程中，将年龄作为变量之一输入神经网络，使睡眠分期的划分结果更符合实际。6)实时睡眠分期：睡眠分期模型构建完成后，实时将监测并分析完的数据输入模型中，模型即可输出睡眠分期结果，实现实时睡眠分期。-6)如附图2所示)7)叫醒时刻的确定：在默认状态下，系统将在用户处于第四个睡眠周期末将用户叫醒。若用户设定叫醒时间段，系统则按浅睡期、REM期的优先级顺序将用户叫醒。具体为：先判断用户目前是否处于浅睡期，若是，则叫发送叫醒指令；若否，则判断用户目前是否处于快速眼动期期，若是，则叫发送叫醒指令；若否，则重新监测。在此期间数据处理与程序总控系统通过无线发送装置将叫醒指令发送给叫醒系统，这一过程通过STM32系统平台实现。睡眠叫醒系统，用于用户的叫醒；当睡眠叫醒系统接收到数据处理与程序总控系统发出的叫醒指令后，进行叫醒。参照附图4-5所示，睡眠叫醒系统包括温控枕头2、叫醒床3以及用于控制温控枕头2、叫醒床3的控制器，温控枕头2包括枕头21、压力传感器及温度控制器22，压力传感器及温度控制器22均安装于枕头21中；其中温度控制器22为可进行温度的调节制冷装置。叫醒床3包括床垫31、床架32、推动装置33及压力传感器，床垫31放置于床架32上，推动装置33及压力传感器安装于床垫31内；其中，推动装置33由多个推顶单元组成，推顶单元可选用电动伸缩杆等。温控枕头2、叫醒床3均与控制器电性连接。其中，控制器通过有线或无线方式接受指令信号。当睡眠叫醒系统接收到数据处理与程序总控系统发出的叫醒指令后，进行叫醒，具体步骤如下：a)当接收到叫醒指令后，枕头内的温度控制器启动，逐渐降低温度，直到用户清醒，头部离开枕头，枕头21压力传感器检测到的压力信号小于预设阈值，温度控制器关闭；b)当接收到叫醒指令后，床垫中内置的推动装置33开始依次上下波动，直到用户清醒，身体离开床，枕头21压力传感器检测到的压力信号小于预设阈值，推动装置33停止运作。以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
