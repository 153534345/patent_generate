标题title
基于三维模型的数据处理方法、装置、设备及介质
摘要abst
本公开实施例涉及一种基于三维模型的数据处理方法、装置、设备及介质，其中该方法包括：获取目标口腔的牙齿三维模型；根据牙齿三维模型确定目标口腔中每个牙齿类别对应的牙位号。由此，提升了牙位号的确定鲁棒性和效率。
权利要求书clms
1.一种基于三维模型的数据处理方法，其特征在于，包括以下步骤：获取目标口腔的牙齿三维模型；根据所述牙齿三维模型确定所述目标口腔中每个牙齿类别对应的牙位号。2.如权利要求1所述的方法，其特征在于，所述根据所述牙齿三维模型确定所述目标口腔中每个牙齿类别对应的牙位号，包括：获取所述牙齿三维模型的多个视角对应的多张二维牙齿图像，其中，所述牙齿三维模型中包含多个网格顶点组成的多个网格面片；识别每张所述二维牙齿图像中包含的多个牙齿类别区域，以及所述多个牙齿类别区域中每个像素点的第一牙位号概率集合，其中，所述第一牙位号概率集合中包含所述每个像素点与多个候选牙位号对应的多个第一牙位号概率；根据所述第一牙位号概率集合确定所述目标口腔中每个牙齿类别对应的牙位号。3.如权利要求2所述的方法，其特征在于，所述根据所述第一牙位号概率集合确定所述目标口腔中每个牙齿类别对应的牙位号，包括：根据所述第一牙位号概率集合，确定每个网格面片的第二牙位号概率集合，其中，所述第二牙位号概率集合中包含所述每个网格面片与所述多个候选牙位号对应的多个第二牙位号概率；根据所述第二牙位号概率集合确定每个网格顶点的第三牙位号概率集合，其中，所述第三牙位号概率集合中包含所述每个网格顶点与所述多个候选牙位号对应的多个第三牙位号概率；根据所述第三牙位号概率集合确定所述牙齿三维模型中每个牙齿类别对应的牙位号。4.如权利要求2所述的方法，其特征在于，所述识别每张所述二维牙齿图像中包含的多个牙齿类别区域，以及所述牙齿类别区域中每个像素点的第一牙位号概率集合，包括：将所述每张所述二维牙齿图像输入预先训练的深度学习模型，获取所述深度学习模型输出的多个牙齿类别区域，以及所述多个牙齿类别区域中每个像素点的第一牙位号概率集合。5.如权利要求4所述的方法，其特征在于，在所述将所述每张所述二维牙齿图像输入预先训练的深度学习模型之前，还包括：获取样本牙齿三维模型，并获取所述牙齿三维模型的多个视角对应的多张初始样本二维牙齿图像；确定每张所述初始样本二维牙齿图像中每个牙齿类别区域，在每个牙齿类别区域的中心区域确定样本牙位号标记点；以所述样本牙位号标记点为中心点确定每张所述初始样本二维牙齿图像中每个牙齿类别的样本牙位号区域，其中，所述样本牙位号区域属于对应的牙齿类别区域；根据所述每个牙齿类别区域对应的样本牙位号区域获取标记样本二维牙齿图像；根据所述初始样本二维牙齿图像和所述标记样本二维牙齿图像训练预先构建的深度学习模型的模型参数，以获取训练后的深度学习模型。6.如权利要求3所述的方法，其特征在于，所述根据所述第一牙位号概率集合，确定每个网格面片的第二牙位号概率集合，包括：在所述多个牙齿类别区域对应的像素点中确定与所述每个网格面片对应的至少一个关联像素点；根据至少一个所述关联像素点对应的至少一个第一牙位号概率集合，计算每个所述候选牙位号对应的至少一个第一牙位号概率的第一概率均值；将所述第一概率均值作为所述每个网格面片属于对应候选牙位号的第二牙位号概率，以获取所述每个网格面片的第二牙位号概率集合。7.如权利要求6所述的方法，其特征在于，所述在所述多个牙齿类别区域对应的像素点中确定与所述每个网格面片对应的至少一个关联像素点，包括：在所述多个视角中确定观测到所述每个网格面片的至少一个观测视角，确定与所述至少一个观测视角对应的至少一张二维牙齿图像为至少一张关联二维牙齿图片；在每张所述关联二维牙齿图片中确定与所述每个网格面片对应的关联像素点，以获取与所述每个网格面片对应的至少一个关联像素点。8.如权利要求6所述的方法，其特征在于，所述在所述多个牙齿类别区域对应的像素点中确定与所述每个网格面片对应的至少一个关联像素点，包括：根据预先确定的坐标转换关系将所述多张二维牙齿图像映射到所述牙齿三维模型中；根据映射后的牙齿三维模型确定每张所述关联二维牙齿图片中属于所述每个网格面片的像素点为所述关联像素点。9.如权利要求3所述的方法，其特征在于，所述根据所述第二牙位号概率集合确定每个网格顶点的第三牙位号概率集合，包括:确定与所述每个网格顶点连接的多个关联网格面片；根据多个关联网格面片对应的多个第二牙位号概率集合，计算每个所述候选牙位号对应的多个第二牙位号概率的第二概率均值；将所述第二概率均值作为所述每个网格顶点属于对应候选牙位号的第三牙位号概率，以获取所述网格顶点的第三牙位号概率集合。10.如权利要求3所述的方法，其特征在于，所述根据所述第三牙位号概率集合确定所述牙齿三维模型中每个牙齿类别对应的牙位号，包括：确定每个所述牙齿类别区域对应的每个网格顶点中第三牙位号概率集合中的最大参考第三牙位号概率；根据每个所述牙齿类别区域对应的所有网格顶点对应的所有最大参考第三牙位号概率，确定每个所述牙齿类别区域对应的牙位号；在所述每个所述牙齿类别区域对应的牙位号的所有最大参考第三牙位号概率中，确定目标第三牙位号概率；确定所述最大目标第三牙位号概率对应的网格顶点为牙位号标记点，确定所述牙位号标记点对应的牙位号为每个所述牙齿类别区域对应的牙位号。11.如权利要求10所述的方法，其特征在于，在所述确定所述牙位号标记点对应的牙位号为每个所述牙齿类别区域对应的牙位号之前，还包括：确定是否包含属于同一个牙位号的多个待筛选牙位号标记点；若是包含属于同一个牙位号的多个待筛选牙位号标记点，则确定每个所述待筛选牙位号标记点与相邻其他牙位号的牙位号标记点的标记距离；删除所述标记距离小于预设距离阈值的待筛选牙位号标记点。12.一种基于三维模型的数据处理装置，其特征在于，所述装置包括：获取模块，用于获取目标口腔的牙齿三维模型；确定模块，用于根据所述牙齿三维模型确定所述目标口腔中每个牙齿类别对应的牙位号。13.一种电子设备，其特征在于，所述电子设备包括：处理器；用于存储所述处理器可执行指令的存储器；所述处理器，用于从所述存储器中读取所述可执行指令，并执行所述可执行指令以实现上述权利要求1-11中任一所述的基于三维模型的数据处理方法。14.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质存储有计算机程序，所述计算机程序用于执行上述权利要求1-11中任一所述的基于三维模型的数据处理方法。
说明书desc
技术领域本公开涉及三维数字化领域，尤其涉及一种基于三维模型的数据处理方法、装置、设备及介质。背景技术数字口内印模由于其效率和安全性而被广泛用于牙齿矫正领域，正畸医生需要对牙齿数字印模数据进行牙位号识别和标记，从而制定诊疗计划。由于不同牙齿的形状变化差异大，一些患者的牙齿紊乱和/或缺失，以及数字牙齿模型的不完整性，都会给该项任务带来巨大挑战。相关技术中，直接在数字印模上进行人工标注牙位号。然而这种标记方式不仅需要投入大量的时间和精力，还对操作者有较高的专业技术要求，容易产生遗漏和误判，导致牙位号的确定准确率不高。发明内容为了解决上述技术问题或者至少部分地解决上述技术问题，本公开提供了一种基于三维模型的数据处理方法、装置、设备及介质，准确确定出牙位号，不依赖于实例分割或者目标检测等先验性的检测结果，牙位号的确定效率更高，鲁棒性更强。本公开实施例提供了一种基于三维模型的数据处理方法，所述方法包括以下步骤：获取目标口腔的牙齿三维模型；根据所述牙齿三维模型确定所述目标口腔中每个牙齿类别对应的牙位号。本公开实施例还提供了一种基于三维模型的数据处理装置，包括：获取模块，用于获取目标口腔的牙齿三维模型；确定模块，用于根据所述牙齿三维模型确定所述目标口腔中每个牙齿类别对应的牙位号。本公开实施例还提供了一种电子设备，所述电子设备包括：处理器；用于存储所述处理器可执行指令的存储器；所述处理器，用于从所述存储器中读取所述可执行指令，并执行所述指令以实现如本公开实施例提供的基于三维模型的数据处理方法。本公开实施例还提供了一种计算机可读存储介质，存储介质存储有计算机程序，计算机程序用于执行如本公开实施例提供的基于三维模型的数据处理方法。本公开实施例提供的技术方案与现有技术相比具有如下优点：本公开实施例提供的牙位号的确定方案，获取目标口腔的牙齿三维模型，并根据牙齿三维模型来确定出目标口腔中每个牙齿类别对应的牙位号，由此，准确确定出牙位号，不依赖于实例分割或者目标检测等先验性的检测结果，牙位号的确定效率更高，鲁棒性更强。附图说明结合附图并参考以下具体实施方式，本公开各实施例的上述和其他特征、优点及方面将变得更加明显。贯穿附图中，相同或相似的附图标记表示相同或相似的元素。应当理解附图是示意性的，原件和元素不一定按照比例绘制。图1为本公开实施例提供的一种基于三维模型的数据处理方法的流程示意图；图2为本公开实施例提供的一种牙齿三维模型的示意图；图3为本公开实施例提供的多视角对应的二维牙齿图片的示意图；图4为本公开实施例提供的一种牙齿类别区域示意图；图5为本公开实施例提供的一种网格定点与面片连接的示意图；图6为本公开实施例提供的一种牙位号标记点的场景示意图；图7为本公开实施例提供的一种样本数据标记示意图；图8为本公开实施例提供的一种基于三维模型的数据处理装置的结构示意图；图9为本公开实施例提供的一种电子设备的结构示意图。具体实施方式下面将参照附图更详细地描述本公开的实施例。虽然附图中显示了本公开的某些实施例，然而应当理解的是，本公开可以通过各种形式来实现，而且不应该被解释为限于这里阐述的实施例，相反提供这些实施例是为了更加透彻和完整地理解本公开。应当理解的是，本公开的附图及实施例仅用于示例性作用，并非用于限制本公开的保护范围。应当理解，本公开的方法实施方式中记载的各个步骤可以按照不同的顺序执行，和/或并行执行。此外，方法实施方式可以包括附加的步骤和/或省略执行示出的步骤。本公开的范围在此方面不受限制。本文使用的术语“包括”及其变形是开放性包括，即“包括但不限于”。术语“基于”是“至少部分地基于”。术语“一个实施例”表示“至少一个实施例”；术语“另一实施例”表示“至少一个另外的实施例”；术语“一些实施例”表示“至少一些实施例”。其他术语的相关定义将在下文描述中给出。需要注意，本公开中提及的“第一”、“第二”等概念仅用于对不同的装置、模块或单元进行区分，并非用于限定这些装置、模块或单元所执行的功能的顺序或者相互依存关系。需要注意，本公开中提及的“一个”、“多个”的修饰是示意性而非限制性的，本领域技术人员应当理解，除非在上下文另有明确指出，否则应该理解为“一个或多个”。本公开实施方式中的多个装置之间所交互的消息或者信息的名称仅用于说明性的目的，而并不是用于对这些消息或信息的范围进行限制。为了解决上述问题，本公开实施例提供了一种牙齿颜色的确定方法。下面结合具体的实施例对该方法进行介绍。图1为本公开实施例提供的一种基于三维模型的数据处理方法的流程示意图，该方法可以由基于三维模型的数据处理装置执行，其中该装置可以采用软件和/或硬件实现，一般可集成在电子设备中。如图1所示，该方法包括：步骤101，获取目标口腔的牙齿三维模型。其中，可通过预设三维数据扫描设备扫描目标口腔以获取牙齿三维数据，预设三维数据扫描设备可以为精度较高的口内扫描仪等，其中，口内扫描仪应用探入式光学扫描头，直接扫描患者口腔内，通过结构光三角测量成像原理，利用数字投影系统向口腔内牙齿、牙龈、黏膜等投射主动光图案，摄像机采集系统获取图案后即通过算法处理进行三维重建和拼接以得到牙齿三维数据。另外，上述获取到的牙齿三维模型中包括多个网格顶点组成的多个网格面片，其中，网格面片通常可以为三个网格顶点组成的三角形面片，即如图2所示的部分牙齿三维模型可知，三角形网格面片构成了对应的牙齿三维模型。步骤102，根据牙齿三维模型确定目标口腔中每个牙齿类别对应的牙位号。在本公开的一个实施例中，在获取到牙齿三维模型之候，根据牙齿三维模型来确定目标口腔中每个牙齿类别对应的牙位号。需要说明的是，在不同的应用场景中，根据牙齿三维模型确定目标口腔中每个牙齿类别对应的牙位号的方式不同，示例如下：在一些可能的实施例中，可以将牙齿三维模型输入预先训练的牙位号确定模型，该牙位号确定模型是预先训练的可根据牙齿三维模型确定每个牙齿类别对应的牙位号的模型，进而，根据牙位号确定模型的输出可确定牙位号。在一些可能的实施例中，可根据自动识别算法来根据牙齿三维模型确定每个牙齿类别对应的牙位号。在实际执行过程中，本实施例中的自动识别算法在不同的场景中不同，作为一种可能的实现方式，自动识别算法的算法识别过程包括：获取牙齿三维模型的多个视角对应的多张二维牙齿图像，其中，牙齿三维模型中包含多个网格顶点组成的多个网格面片。在本示例中，在获取到牙齿三维模型之后，并不采用传统技术中的目标检测网络或者实例分割网络识别到单牙，再根据识别到单牙的数量推测牙位号信息等，而是考虑到牙齿三维模型为三维数据，无论是目标检测网格或者实例分割网络都会耗费较长的时间，且易受到三维空间噪声数据的影响，算法的准确性也会直接影响后期牙位号识别的准确性，在本示例中，不需要基于实例分割或者目标检测等算法处理来获取牙齿个数等先验数据，而是获取牙齿三维模型的多个视角对应的多张二维牙齿图像，各个牙齿二维图像对应的视角不同，从而，以二维牙齿图像为基础进行后续牙位号等信息的确认。举例而言，如图3所示，可以确定四个视角下对应的牙齿三维模型的四张二维牙齿图片，四张二维牙齿图片的视角各不相同。进而，识别每张二维牙齿图像中包含的多个牙齿类别区域，以及多个牙齿类别区域中每个像素点的第一牙位号概率集合，其中，第一牙位号概率集合中包含每个像素点与多个候选牙位号对应的多个第一牙位号概率。在本公开的一个实施例中，识别每张二维牙齿图像中包含的多个牙齿类别区域，其中，每个牙齿类别区域对应于同一个牙齿所在的区域，每个牙齿类别区域属于同一个牙位号所在的区域，不同的牙齿类别区域对应于不同牙位号所在区域，继续以图3所示的场景为例，以不同的颜色标注不同的牙齿类别区域时，如图4所示，四张二维牙齿图像中属于同一颗牙齿的像素点显然属于同一个牙齿类别区域，比如，上述图4中包含了12个单牙，则识别后可以获取到12个牙齿类别区域，需要强调的是，本实施例中仅仅识别牙齿类别区域，此时并未明确每个牙齿类别区域对应的牙位号。在本实施例中，确定多个牙齿类别区域中每个像素点的第一牙位号概率集合，其中，第一牙位号概率集合中包含牙齿类别区域中的每个像素点与多个候选牙位号对应的多个第一牙位号概率，举例而言，当目标口腔对应于包含16个单牙类别的单颌时，则多个候选牙位号对应于16个牙位号，则对于属于牙齿类别的像素点A而言，其对应的第一牙位号概率集合中包含A分别属于16个牙位号的概率。在本示例中，在确定了第一牙位号概率集合后，根据第一牙位号概率集合确定目标口腔中每个牙齿类别对应的牙位号。在一些可能的实现方式中，可以将每个牙齿类别中最大的第一牙位号概率值的点作为对应牙齿类别的牙位号标记点，确定牙位号标记点对应的牙位号为对应牙齿类别的牙位号，比如，牙齿类别z的牙齿类别区域中包含了10000个像素点，其中，最高的第一牙位号概率对应的像素点为W，则确定W对应的1号牙位号为牙齿类别z对应的牙位号。在一些可能的实现方式中，根据第一牙位号概率集合，确定每个网格面片的第二牙位号概率集合，其中，第二牙位号概率集合中包含每个网格面片与多个候选牙位号对应的多个第二牙位号概率。将在二维牙齿图像中的牙位号识别结果反映到牙齿三维模型中，因此，从而，不但保证了牙位号的识别精确度，而且避免了直接在牙齿三维模型上进行有关目标检测和实例分割等。在本实施例中，根据第一牙位号概率集合，确定每个网格面片的第二牙位号概率集合，其中，第二牙位号概率集合中包含每个网格面片与多个候选牙位号对应的多个第二牙位号概率，其中，举例而言，当目标口腔对应于包含16个单牙类别的单颌时，则多个候选牙位号对应于16个牙位号，则对于网格面片B而言，其对应的第二牙位号概率包含B分别属于16个牙位号的概率。需要说明的是，在不同的应用场景中，根据第一牙位号概率集合确定每个网格面片的第二牙位号概率集合的方式不同，示例说明如下：在一些可能的实施例中，在多个牙齿类别区域对应的像素点中确定与每个网格面片对应的至少一个关联像素点。比如，可以预先确定每张二维牙齿图片与牙齿三维模型的坐标转换关系，进而，根据预先确定的坐标转换关系确定每个网格面片中的任意一个网格点在每张二维牙齿图片中的对应二维坐标点，若是寻找到对应的二维坐标点，则确定对应二维坐标点的像素点为关联像素点。比如，可以在多个视角中确定观测到对应网格面片的至少一个观测视角，确定与至少一个观测视角对应的至少一张二维牙齿图像为至少一张关联二维牙齿图片，进而，在每张关联二维牙齿图片中确定与每个网格面片对应的关联像素点，以获取与每个网格面片对应的至少一个关联像素点。其中，在一些可能的实现方式中，预先确定每张二维牙齿图片与牙齿三维模型的坐标转换关系，进而，根据预先确定的坐标转换关系将每张二维牙齿图像映射到牙齿三维模型中，根据映射后的牙齿三维模型确定每张关联二维牙齿图片中属于每个网格面片的像素点为关联像素点，其中，当每张关联二维牙齿图片中属于每个网格面片的像素点为多个时，可以随机确定其中的一个像素点为关联像素点，当一个网格面片在关联二维牙齿图片中仅仅对应单个像素点时，则可以将该单个像素点确定为对应网格面片的关联像素点。其中，坐标转换关系用于实现原始牙齿图片和牙齿三维数据的映射。需要说明的是，在不同的应用场景中，确定坐标转换关系的方式不同，示例如下：在一些可能的实施例中，获取二维牙齿图片中的多个参考像素点，在牙齿三维模型中确定与多个参考像素点匹配的多个参考三维点，其中，参考像素点与对应的参考三维点属于牙齿上的同一个点，多个参考像素点和参考三维点的匹配方式可根据特征匹配算法等实现。进而，获取每个参考像素点的二维坐标，以及对应的参考三维点的三维坐标，根据二维坐标和三维坐标确定坐标转换关系，基于该坐标转换关系可以确定出二维牙齿图片中的二维像素点在牙齿三维模型中的三维坐标位置。在一些可能的实施例中，还可以获取拍摄二维牙齿图片的相机的内参和外参，根据相机的内参和外参以及三角形定理确定坐标转换关系。当然，在实际执行过程中，也可以采用尺度不变特征转换匹配算法、局部特征点检测算法、图像特征描述算法 等来确定坐标转换关系等。进一步地，在多个牙齿类别区域对应的像素点中确定与每个网格面片对应的至少一个关联像素点后，根据至少一个关联像素点对应的至少一个第一牙位号概率集合，计算每个候选牙位号对应的至少一个第一牙位号概率的第一概率均值，将第一概率均值作为每个网格面片属于对应候选牙位号的第二牙位号概率，以获取每个网格面片的第二牙位号概率集合。举例而言，如下表1所示，对于网格面片C而言，假如其对应的观测视角为视角1、视角2、视角3和视角4，则视角1对应的关联二维牙齿图片中的关联像素点为像素点c1，视角2对应的关联二维牙齿图片中的关联像素点为像素点c2，视角3对应的关联二维牙齿图片中的关联像素点为像素点c3，视角4对应的关联二维牙齿图片中的关联像素点为像素点c4，其中，c1的第一牙位号概率集合为表1中的第一列，c2的第一牙位号概率集合为表1中的第二列，c3的第一牙位号概率集合为表1中的第三列，c4的第一牙位号概率集合为表1中的第四列，则计算得到候选牙位号1对应的第一概率均值为：c1属于候选牙位号0对应的第一牙位号概率、c2属于候选牙位号0对应的第一牙位号概率，c3属于候选牙位号0对应的第一牙位号概率，c4属于候选牙位号0对应的第一牙位号概率的均值face，候选牙位号1对应的第一概率均值为：c1属于候选牙位号1对应的第一牙位号概率、c2属于候选牙位号1对应的第一牙位号概率，c3属于候选牙位号1对应的第一牙位号概率，c4属于候选牙位号1对应的第一牙位号概率的均值face…候选牙位号15对应的第一概率均值为：c1属于候选牙位号15对应的第一牙位号概率、c2属于候选牙位号15对应的第一牙位号概率，c3属于候选牙位号15对应的第一牙位号概率，c4属于候选牙位号15对应的第一牙位号概率的均值face。如此得到C所对应的第二牙位号概率值集合中包含的16个第二牙位号概率为：face=0…face=/4=0.043；face=/4=0.628；face=/4=0.08…face=0。表1在确定第二牙位号概率集合后，根据第二牙位号概率集合确定每个网格顶点的第三牙位号概率集合，其中，第三牙位号概率集合中包含每个网格顶点与多个候选牙位号对应的多个第三牙位号概率。在本公开的一个实施例中，在获取到第二牙位号概率集合后，进一步地将第二牙位号集合对应的第二牙位号概率迁移到每个网格顶点中，以获取到每个网格顶点的第三牙位概率集合，其中，第三牙位号概率集合中包含每个网格顶点与多个候选牙位号对应的多个第三牙位号概率。在本实施例中，可确定与每个网格顶点连接的多个关联网格面片，进而，根据多个关联网格面片对应的多个第二牙位号概率集合，计算每个候选牙位号对应的多个第二牙位号概率的第二概率均值，将第二概率均值作为每个网格顶点属于对应候选牙位号的第三牙位号概率，以获取网格顶点的第三牙位号概率集合。举例而言，如图5所示，对于网格顶点V595来说，其连接的5个关联面片F1000、F1001、F1002、F1003、F1004，其中，参照下表2，表2中的第一列到第五列分别为F1000、F1001、F1002、F1003、F1004对应的第二牙位号概率集合，则计算得到候选牙位号0对应的第二概率均值为：F1000属于候选牙位号0对应的第二牙位号概率、F1001属于候选牙位号0对应的第二牙位号概率，F1002属于候选牙位号0对应的第二牙位号概率，F1003属于候选牙位号0对应的第二牙位号概率、和F1004属于候选牙位号0对应的第二牙位号概率的均值vertex…得到候选牙位号15对应的第二概率均值为：F1000属于候选牙位号15对应的第二牙位号概率、F1001属于候选牙位号15对应的第二牙位号概率，F1002属于候选牙位号15对应的第二牙位号概率，F1003属于候选牙位号15对应的第二牙位号概率、和F1004属于候选牙位号15对应的第二牙位号概率的均值vertex。如此得到V595所对应的第三牙位号概率值集合中包含的16个第三牙位号概率为：vertex=0…vertex=0.713/5=0.143；vertex=/5=0.06；vertex=/5=0.499；vertex=/5=0.008；vertex=0.123/5=0.025；vertex=/5=0.063…vertex=/5=0。表2在获取第三牙位号概率集合后，根据第三牙位号概率集合确定牙齿三维模型中每个牙齿类别对应的牙位号。在本公开的一个实施例中，在得到第三牙位号概率集合后，即获取到对应网格顶点属于多个候选牙位号的概率值，从而，根据第三牙位号概率集合确定牙齿三维模型中每个牙齿类别对应的牙位号标记点，将牙位号标记点对应的牙位号作为对应牙齿类别的牙位号。由此，将二维牙齿图片对应的像素点的相关牙位号概率与网格面片的相关牙位号概率融合，可以得到牙位号，计算效率更高，且无需依赖于对牙齿三维模型进行目标检测和实例分割的先验结果，提升了牙位号确定的鲁棒性。其中，在一些可能的实施例中，可以确定每个牙齿类别区域对应的每个网格顶点中第三牙位号概率集合中的最大参考第三牙位号概率，比如，牙齿类别区域1中包含的N个网格顶点，在N个网格顶点对应的N个第三牙位号概率集合中，确定每个第三牙位号概率集合中的最大值为最大参考第三牙位号概率，以得到N个最大参考第三牙位号概率，进而，根据N个最大参考第三牙位号概率确定牙齿类别区域1对应的牙位号，比如，N个最大参考第三牙位号概率中有m个最大参考第三牙位号概率都是5号牙位号，其中，m小于等于N，m与N的比值大于预设比值阈值，即保证大部分网格牙齿类别区域1中包含的网格定点的最大参考第三牙位号概率都是对应于5号牙位号，从而，在每个牙齿类别区域对应的牙位号的所有最大参考第三牙位号概率中，确定最大目标第三牙位号概率，即在5号牙位号的m个最大参考第三牙位号概率中确定最大值为最大目标第三牙位号概率，进而，确定该最大目标第三牙位号概率对应的网格顶点为每个牙齿类别区域对应的牙位号，即确定m个最大参考第三牙位号概率中确定最大值对应的网格定点为牙位号标记点，该牙位号标记点对应的牙位号为第5号牙。进一步地，在确定出牙位号标记点后，可以基于牙位号标记点进行有关场景的应用，例如，在一些可能的应用场景中，可基于上述确定的牙位号标记点来将一些异性形状或者颊侧杂数据等引起的干扰进行去噪，在本实施例中，确定的该是否包含属于同一个牙位号的多个待筛选牙位号标记点，若是包含属于同一个牙位号的多个待筛选牙位号标记点，则确定每个待筛选牙位号标记点与相邻其他牙位号的牙位号标记点的标记距离，删除标记距离小于预设距离阈值的待筛选牙位号标记点。即考虑到不同牙位号之间的距离应该不会过近，误判的牙位号标记点应该与实际牙位号标记点相比，实际牙位号距离其他相邻牙位号的牙位号标记点之间的标记距离，相对于误判的牙位号标记点之间的标记距离更大，因此，在本公开的实施例中，可以根据不同牙位号的牙位号标记点之间的距离删除一些可能受到上述干扰而误确定的牙位标记点。举例而言，如图6所示，若是确定的目标口腔的牙位号标记点中，包含了2个第5号牙位号的待筛选牙位标记点P51和P52，其中，P52可能是颊侧肉等，与第5号牙位号相邻的其他牙位号分别为第4号牙位号和第6号牙位号，其中，第4号牙位号的牙位号标记点为P4，第6号牙位号的牙位号标记点为P6，P51和P4、P5的标记距离分别为L1和L2，P52和P4、P5的标记距离分别为L3和L4，其中，基于上述标记距离发现P52和P4的标记距离L3小于预设距离阈值，从而删除P52。在其他可能的应用场景中，在确定了牙位号之后，也可以基于牙位号满足其他场景需求，比如，还可以基于缺失牙位号进行确定，以识别缺失牙齿等。由此，上述实施例中，获取目标口腔的牙齿三维模型，并获取牙齿三维模型的多个视角对应的多张二维牙齿图像，其中，牙齿三维模型中包含多个网格顶点组成的多个网格面片，识别每张二维牙齿图像中包含的多个牙齿类别区域，以及多个牙齿类别区域中每个像素点的第一牙位号概率集合，其中，第一牙位号概率集合中包含每个像素点与多个候选牙位号对应的多个第一牙位号概率，进而，根据第一牙位号概率集合，确定每个网格面片的第二牙位号概率集合，其中，第二牙位号概率集合中包含每个网格面片与多个候选牙位号对应的多个第二牙位号概率，根据第二牙位号概率集合确定每个网格顶点的第三牙位号概率集合，其中，第三牙位号概率集合中包含每个网格顶点与多个候选牙位号对应的多个第三牙位号概率，根据第三牙位号概率集合确定牙齿三维模型中每个牙齿类别对应的牙位号。由此，基于网格面片和网格顶点的牙位号概率的融合，准确确定出牙位号，不依赖于实例分割或者目标检测等先验性的检测结果，牙位号的确定效率更高，鲁棒性更强。综上，本公开实施例的基于三维模型的数据处理方法，获取目标口腔的牙齿三维模型，进而，根据牙齿三维模型确定目标口腔中每个牙齿类别对应的牙位号。提升了牙位号的确定鲁棒性和效率。基于上述实施例，在上述基于第一牙位号概率集合确定的目标口腔中每个牙齿类别对应的牙位号的实施例中，可以基于预先训练的深度学习模型来识别每张二维牙齿图像包含的多个牙齿类别区域，以及牙齿类别区域中每个像素点的第一牙位号概率集合，即将每张二维牙齿图像输入预先训练的深度学习模型，获取深度学习模型输出的多个牙齿类别区域，以及多个牙齿类别区域中每个像素点的第一牙位号概率集合，下面结合实施例说明深度学习模型的训练过程：在本公开的一个实施例中，获取样本牙齿三维模型，并获取牙齿三维模型的多个视角对应的多张初始样本二维牙齿图像，确定每张初始样本二维牙齿图像中每个牙齿类别区域，在每个牙齿类别区域的中心区域确定样本牙位号标记点，即样本牙位号标记点通常位于牙齿类别的中心区域部分，以便于后续确定的样本牙位号区域属于牙齿类别区域内部。或者如图7所示，可以直接确定牙齿类别区域的中心点为样本牙位号标点等。需要强调的是，在本训练过程中，并不以样本牙位号标点这一单个点作为训练样本数据，考虑到单个样本点在训练中的损失值较难进行反向传播，在实际训练过程中，在确定了样本牙位号标记点之后，以样本牙位号标记点为中心点确定每张初始样本二维牙齿图像中每个牙齿类别的样本牙位号区域，其中，样本牙位号区域属于对应的牙齿类别区域，即继续参图7，将样本牙位号标记点扩散到牙齿类别区域，以区域为粒度进行深度学习模型的训练，由于区域粒度的损失值容易进行反向传播，因此，降低了深度学习模型的训练难度，提升了训练得到的深度学习模型的精度，使得在实际应用时，牙位号标记点及其附近的一些像素点对的响应最大，可以较为容易的定位出对应的牙位号。另外，在本实施例中，还需要强调的是，在以样本牙位号标记点为中心点确定每张初始样本二维牙齿图像中每个牙齿类别的样本牙位号区域时，并不需要识别每个牙齿所在的轮廓，确定整个牙齿所在区域为样本牙位号区域，而是仅仅需要保证样本牙位号区域属于对应的牙齿类别区域即可，即继续参照图7，样本牙位号区域即可以为属于牙齿类别区域的部分区域，从而，避免了学习到牙齿所在区域的边缘位置的噪音数据，且提升了模型训练效率，有助于进一步保证训练得到的深度学习模型的精度。其中，在不同的应用场景中，以样本牙位号标记点为中心点确定每张初始样本二维牙齿图像中每个牙齿类别的样本牙位号区域的方式不同，在一些可能的实施例中，可以样本牙位号标记点为中心点，基于高斯分布向外散射的团块作为样本牙位号区域，其中，基于高斯分布和样本牙位号标记点确定样本牙位号区域的方式可由现有技术实现，在此不作赘述。在一些可能的实施例中，可以样本牙位号标记点为中心点，确定距离该中心点预设半径距离的圆形区域为样本牙位号区域，其中，预设半径距离可根据实际场景标定等。进一步地，在根据牙齿类别区域对应的样本牙位号区域获取标记样本二维牙齿图像，根据初始样本二维牙齿图像和标记样本二维牙齿图像训练预先构建的深度学习模型的模型参数，以获取训练后的深度学习模型，即将初始样本二维牙齿图像输入初始的深度学习模型，获取该模型输出的对应牙位号的牙位号区域，计算输出的牙位号区域与对应标记样本中的样本牙位号区域的损失值，若是损失值大于预设损失阈值，则修改初始的深度学习模型中的有关损失值，直到损失值小于预设损失阈值，则确定深度学习模型训练完成。综上，本公开实施例的基于三维模型的数据处理方法，在深度学习模型在训练时，将属于对应牙齿的部分牙齿区域作为训练数据，提升了深度学习模型的精度，保证了基于预先训练的深度学习模型来识别每张二维牙齿图像中包含的多个牙齿类别区域，以及多个牙齿类别区域中每个像素点的第一牙位号概率集合的准确性。为了实现上述实施例，本公开还提出了一种基于三维模型的数据处理装置。图8为本公开实施例提供的一种基于三维模型的数据处理装置的结构示意图，该装置可由软件和/或硬件实现，一般可集成在电子设备中。如图8所示，该装置包括：获取模块810、确定模块820，其中，获取模块810，用于获取目标口腔的牙齿三维模型；确定模块820，用于根据牙齿三维模型确定目标口腔中每个牙齿类别对应的牙位号。本公开实施例所提供的基于三维模型的数据处理装置可执行本公开任意实施例所提供的基于三维模型的数据处理方法，具备执行方法相应的功能模块和有益效果，在此不再赘述。为了实现上述实施例，本公开还提出一种计算机程序产品，包括计算机程序/指令，该计算机程序/指令被处理器执行时实现上述实施例中的牙齿颜色的确定方法。图9为本公开实施例提供的一种电子设备的结构示意图。下面具体参考图9，其示出了适于用来实现本公开实施例中的电子设备900的结构示意图。本公开实施例中的电子设备900可以包括但不限于诸如移动电话、笔记本电脑、数字广播接收器、PDA、PAD、PMP、车载终端等等的移动终端以及诸如数字TV、台式计算机等等的固定终端。图9示出的电子设备仅仅是一个示例，不应对本公开实施例的功能和使用范围带来任何限制。如图9所示，电子设备900可以包括处理器901，其可以根据存储在只读存储器902中的程序或者从存储器908加载到随机访问存储器903中的程序而执行各种适当的动作和处理。在RAM 903中，还存储有电子设备900操作所需的各种程序和数据。处理器901、ROM 902以及RAM 903通过总线904彼此相连。输入/输出接口905也连接至总线904。通常，以下装置可以连接至I/O接口905：包括例如触摸屏、触摸板、键盘、鼠标、摄像头、麦克风、加速度计、陀螺仪等的输入装置906；包括例如液晶显示器、扬声器、振动器等的输出装置907；包括例如磁带、硬盘等的存储器908；以及通信装置909。通信装置909可以允许电子设备900与其他设备进行无线或有线通信以交换数据。虽然图9示出了具有各种装置的电子设备900，但是应理解的是，并不要求实施或具备所有示出的装置。可以替代地实施或具备更多或更少的装置。特别地，根据本公开的实施例，上文参考流程图描述的过程可以被实现为计算机软件程序。例如，本公开的实施例包括一种计算机程序产品，其包括承载在非暂态计算机可读介质上的计算机程序，该计算机程序包含用于执行流程图所示的方法的程序代码。在这样的实施例中，该计算机程序可以通过通信装置909从网络上被下载和安装，或者从存储器908被安装，或者从ROM 902被安装。在该计算机程序被处理器901执行时，执行本公开实施例的备牙模型的获取方法中限定的上述功能。需要说明的是，本公开上述的计算机可读介质可以是计算机可读信号介质或者计算机可读存储介质或者是上述两者的任意组合。计算机可读存储介质例如可以是——但不限于——电、磁、光、电磁、红外线、或半导体的系统、装置或器件，或者任意以上的组合。计算机可读存储介质的更具体的例子可以包括但不限于：具有一个或多个导线的电连接、便携式计算机磁盘、硬盘、随机访问存储器、只读存储器、可擦式可编程只读存储器、光纤、便携式紧凑磁盘只读存储器、光存储器件、磁存储器件、或者上述的任意合适的组合。在本公开中，计算机可读存储介质可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用。而在本公开中，计算机可读信号介质可以包括在基带中或者作为载波一部分传播的数据信号，其中承载了计算机可读的程序代码。这种传播的数据信号可以采用多种形式，包括但不限于电磁信号、光信号或上述的任意合适的组合。计算机可读信号介质还可以是计算机可读存储介质以外的任何计算机可读介质，该计算机可读信号介质可以发送、传播或者传输用于由指令执行系统、装置或者器件使用或者与其结合使用的程序。计算机可读介质上包含的程序代码可以用任何适当的介质传输，包括但不限于：电线、光缆、RF等等，或者上述的任意合适的组合。在一些实施方式中，客户端、服务器可以利用诸如HTTP之类的任何当前已知或未来研发的网络协议进行通信，并且可以与任意形式或介质的数字数据通信互连。通信网络的示例包括局域网，广域网，网际网以及端对端网络，以及任何当前已知或未来研发的网络。上述计算机可读介质可以是上述电子设备中所包含的；也可以是单独存在，而未装配入该电子设备中。上述计算机可读介质承载有一个或者多个程序，当上述一个或者多个程序被该电子设备执行时，使得该电子设备执行上述实施例中的有关方法步骤。电子设备可以以一种或多种程序设计语言或其组合来编写用于执行本公开的操作的计算机程序代码，上述程序设计语言包括但不限于面向对象的程序设计语言—诸如Java、Smalltalk、C++，还包括常规的过程式程序设计语言—诸如“C”语言或类似的程序设计语言。程序代码可以完全地在用户计算机上执行、部分地在用户计算机上执行、作为一个独立的软件包执行、部分在用户计算机上部分在远程计算机上执行、或者完全在远程计算机或服务器上执行。在涉及远程计算机的情形中，远程计算机可以通过任意种类的网络——包括局域网或广域网—连接到用户计算机，或者，可以连接到外部计算机。附图中的流程图和框图，图示了按照本公开各种实施例的系统、方法和计算机程序产品的可能实现的体系架构、功能和操作。在这点上，流程图或框图中的每个方框可以代表一个模块、程序段、或代码的一部分，该模块、程序段、或代码的一部分包含一个或多个用于实现规定的逻辑功能的可执行指令。也应当注意，在有些作为替换的实现中，方框中所标注的功能也可以以不同于附图中所标注的顺序发生。例如，两个接连地表示的方框实际上可以基本并行地执行，它们有时也可以按相反的顺序执行，这依所涉及的功能而定。也要注意的是，框图和/或流程图中的每个方框、以及框图和/或流程图中的方框的组合，可以用执行规定的功能或操作的专用的基于硬件的系统来实现，或者可以用专用硬件与计算机指令的组合来实现。描述于本公开实施例中所涉及到的单元可以通过软件的方式实现，也可以通过硬件的方式来实现。其中，单元的名称在某种情况下并不构成对该单元本身的限定。本文中以上描述的功能可以至少部分地由一个或多个硬件逻辑部件来执行。例如，非限制性地，可以使用的示范类型的硬件逻辑部件包括：现场可编程门阵列、专用集成电路、专用标准产品、片上系统、复杂可编程逻辑设备等等。在本公开的上下文中，机器可读介质可以是有形的介质，其可以包含或存储以供指令执行系统、装置或设备使用或与指令执行系统、装置或设备结合地使用的程序。机器可读介质可以是机器可读信号介质或机器可读储存介质。机器可读介质可以包括但不限于电子的、磁性的、光学的、电磁的、红外的、或半导体系统、装置或设备，或者上述内容的任何合适组合。机器可读存储介质的更具体示例会包括基于一个或多个线的电气连接、便携式计算机盘、硬盘、随机存取存储器、只读存储器、可擦除可编程只读存储器、光纤、便捷式紧凑盘只读存储器、光学储存设备、磁储存设备、或上述内容的任何合适组合。以上描述仅为本公开的较佳实施例以及对所运用技术原理的说明。本领域技术人员应当理解，本公开中所涉及的公开范围，并不限于上述技术特征的特定组合而成的技术方案，同时也应涵盖在不脱离上述公开构思的情况下，由上述技术特征或其等同特征进行任意组合而形成的其它技术方案。例如上述特征与本公开中公开的具有类似功能的技术特征进行互相替换而形成的技术方案。此外，虽然采用特定次序描绘了各操作，但是这不应当理解为要求这些操作以所示出的特定次序或以顺序次序执行来执行。在一定环境下，多任务和并行处理可能是有利的。同样地，虽然在上面论述中包含了若干具体实现细节，但是这些不应当被解释为对本公开的范围的限制。在单独的实施例的上下文中描述的某些特征还可以组合地实现在单个实施例中。相反地，在单个实施例的上下文中描述的各种特征也可以单独地或以任何合适的子组合的方式实现在多个实施例中。尽管已经采用特定于结构特征和/或方法逻辑动作的语言描述了本主题，但是应当理解所附权利要求书中所限定的主题未必局限于上面描述的特定特征或动作。相反，上面所描述的特定特征和动作仅仅是实现权利要求书的示例形式。
