标题title
一种基于激光治疗仪的数据处理方法和装置
摘要abst
本申请涉及数据处理领域，尤其涉及一种基于激光治疗仪的数据处理方法和装置，其方法包括：将预设激光治疗仪的治疗策略与多种参数进行组合分类，获得多种治疗策略分类结果，构建包含分类结果的时序医疗数据库，参数包括运行模式、使用强度及使用时间；构建第一模型，第一模型为预训练的深度学习模型，使用数据库训练第一模型，得到第二模型，第二模型为预训练的治疗策略分类的深度学习模型；创建目标用户的数据队列，分配模型存储空间以存储目标用户的历史数据及目标用户的第二模型；对第二模型进行增量训练，生成并输出包含有治疗策略分类结果的建议清单。本申请具有提高指定治疗仪策略指导准确性及可靠性的效果。
权利要求书clms
1.一种基于激光治疗仪的数据处理方法，其特征在于，包括步骤：将预设激光治疗仪的治疗策略与多种参数进行组合分类，获得多种治疗策略分类结果，构建包含所述分类结果的时序医疗数据库，所述参数包括运行模式、使用强度及使用时间；构建第一模型，所述第一模型为预训练的深度学习模型，使用所述数据库训练所述第一模型，得到第二模型，所述第二模型为预训练的治疗策略分类的深度学习模型；创建目标用户的数据队列，分配模型存储空间以存储目标用户的历史数据及目标用户的所述第二模型；对所述第二模型进行增量训练，生成并输出包含有治疗策略分类结果的建议清单，其中，使用所述数据队列中的最新数据和最新一次训练后的所述第二模型进行增量训练，模型增量训练所需输入的序列值为预设的数据队列数据量的值。2.根据权利要求1所述的基于激光治疗仪的数据处理方法，其特征在于，还包括以下步骤：对所述第二模型与目标用户数据进行动态权重调整，所述目标用户数据包括目标用户的历史数据及用户的采集数据。3.根据权利要求2所述的基于激光治疗仪的数据处理方法，其特征在于，对所述第二模型与目标用户数据进行动态权重调整中，包括步骤：设定预训练数据集及用户历史数据集，所述预训练数据集与所述用户历史数据集满足以下计算式：其中，为所述预训练数据集，/＞为所述用户历史数据集，/＞为所述目标用户数据中最新的采集数据，Q为所述数据队列数据量的值，/＞=1；初始化并更新所述预训练数据集及所述用户历史数据集的权重，所述权重更新的表达式为：其中，表示第i位预训练数据的权重值，/＞表示第j位用户历史数据权重值，/＞为第i位预训练数据与测试数据之间的欧式距离，/＞为预训练数据的权重，/＞为用户历史数据集的权重；合并训练数据集，所述合并训练数据集的关系式为：，其中，为预训练数据集，/＞为用户历史数据集，/＞为预训练数据的权重，/＞为用户历史数据集的权重，/＞为加权预训练数据集，/＞为加权用户历史数据集。4.根据权利要求2或3所述的基于激光治疗仪的数据处理方法，其特征在于，还包括以下步骤：对所述目标用户数据进行异常分析，判定异常数据类型，所述异常数据类型包括存在缺失值和存在离群值，若判定为存在缺失值，发送第一信号，若判定为存在离群值，发送第二信号，若判定为不存在异常，发送正常信号；响应于第一信号被确认指令，发送第一报警信号，提醒用户检测存在中断；响应于第二信号被确认指令，发送第二报警信号，提醒用户正检测设备佩戴异常。5.根据权利要求1所述的基于激光治疗仪的数据处理方法，其特征在于，所述第一模型与所述第二模型采用长短时间记忆网络模型。6.一种基于激光治疗仪的数据处理装置，其特征在于，包括：处理器和存储器，所述存储器存储有计算机程序指令，当所述计算机程序指令被所述处理器执行时实现根据权利要求1-5任一项所述的基于激光治疗仪的数据处理方法。
说明书desc
技术领域本发明涉及数据处理领域，尤其涉及一种基于激光治疗仪的数据处理方法和装置。背景技术随着大数据、物联网、人工智能等新兴技术的不断发展和成熟，加速了传统医疗行业与这些新兴技术的融合。其中，以健康医疗大数据为代表的医疗新业态正在不断地激发着医疗行业的发展。医疗大数据的潜在价值巨大，其应用有助于提高医疗服务质量、减少资源浪费、优化资源配置、改善自我健康管理等。传统的激光治疗仪仅采用医师人工经验指导方式对用户选用治疗模式进行指导，用户仅在初次治疗前对相关生理参数数据进行采集以确定治疗策略。然而，由于医疗数据具有时序性以及单次检测偶然性，现有技术中未对患者在治疗过程中发生变化的测量数据进行的统计和分析，仅仅依靠在初次治疗前对相关生理参数数据进行采集确定治疗策略，准确性和可靠性较低。发明内容为了提高指定治疗仪策略指导准确性及可靠性，本申请提供一种基于激光治疗仪的数据处理方法和装置。第一方面，本申请提供一种基于激光治疗仪的数据处理方法，采用如下的技术方案：一种基于激光治疗仪的数据处理方法，包括步骤：将预设激光治疗仪的治疗策略与多种参数进行组合分类，获得多种治疗策略分类结果，构建包含所述分类结果的时序医疗数据库，所述参数包括运行模式、使用强度及使用时间；构建第一模型，所述第一模型为预训练的深度学习模型，使用所述数据库训练所述第一模型，得到第二模型，所述第二模型为预训练的治疗策略分类的深度学习模型；创建目标用户的数据队列，分配模型存储空间以存储目标用户的历史数据及目标用户的所述第二模型；对所述第二模型进行增量训练，生成并输出包含有治疗策略分类结果的建议清单，其中，使用所述数据队列中的最新数据和最新一次训练后的所述第二模型进行增量训练，模型增量训练所需输入的序列值为预设的数据队列数据量的值。通过采用上述技术方案，将用户历史数据与当前检测数据结合，并使用可增量更新的深度学习模型进行分析，能够更快且更准确地得出可靠的治疗策略分类结果，通过对时序历史检测数据的分析能更好地保证制定当前使用治疗仪策略的准确性及可靠性，以实现对用户使用激光治疗仪的正确指导，并在最大程度上提升治疗效果。可选的，还包括以下步骤：对所述第二模型与目标用户数据进行动态权重调整，所述目标用户数据包括目标用户的历史数据及用户的采集数据。通过采用上述技术方案，解决了数据队列中存在的预训练模型数据与目标用户数据关联度不高的问题。可选的，所述对所述第二模型与目标用户数据进行动态权重调整中，包括步骤：设定预训练数据集及用户历史数据集，所述预训练数据集与所述用户历史数据集满足以下计算式：，其中，/＞为所述预训练数据集，/＞为所述用户历史数据集，/＞为所述目标用户数据中最新的采集数据，Q为所述数据队列数据量的值，/＞=1；初始化并更新所述预训练数据集及所述用户历史数据集的权重，所述权重更新的表达式为：其中，表示第i位预训练数据的权重值，/＞表示第j位用户历史数据权重值，为第i位预训练数据与测试数据之间的欧式距离，/＞为预训练数据的权重，/＞为用户历史数据集的权重；合并训练数据集，所述合并训练数据集的关系式为：，其中，/＞为预训练数据集，/＞为用户历史数据集，/＞为预训练数据的权重，/＞为用户历史数据集的权重。/＞为加权预训练数据集，/＞为加权用户历史数据集。通过采用上述技术方案，合并后的训练数据集为最终所用训练集，随着用户历史数据在队列中不断加入，预训练数据与最新的采集数据之间的差距将不断加大，预训练数据与最新的采集数据所对应权重将不断减小，训练集中目标用户数据所占比重将相应增大。可选的，对所述目标用户数据进行异常分析，判定异常数据类型，其中，所述异常数据类型包括存在缺失值和存在离群值，若判定为存在缺失值，发送第一信号，若判定为存在离群值，发送第二信号，若判定为不存在异常，发送正常信号；响应于第一信号被确认指令，发送第一报警信号，提醒用户检测存在中断；响应于第二信号被确认指令，发送第二报警信号，提醒用户正检测设备佩戴异常，提高模型数据与目标用户数据的关联度。通过采用上述技术方案，通过异常数据的检测和处理，最大程度上降低异常数据出现的可能性以及对分析模型运算产生的干扰，用户能够在治疗前通过采集到的当前生理参数数据了解自身身体状况，并为之后进行的分析决策提供数据支持。可选的，所述第一模型与所述第二模型采用长短时间记忆网络模型。第二方面，本申请提供一种基于激光治疗仪的数据处理装置，采用如下的技术方案：一种基于激光治疗仪的数据处理装置，包括：处理器和存储器，所述存储器存储有计算机程序指令，当所述计算机程序指令被所述处理器执行时实现所述的基于激光治疗仪的数据处理方法。通过采用上述技术方案，将上述基于激光治疗仪的数据处理方法生成计算机程序，并存储于存储器中，以被处理器加载并执行，从而，根据存储器及处理器制作终端设备，方便使用。本申请具有以下技术效果：1、将用户历史数据与当前检测数据结合，并使用可增量更新的LSTM模型进行分析，能够更快且更准确地得出可靠的治疗策略分类结果，通过对时序历史检测数据的分析能更好地保证制定当前使用治疗仪策略的准确性及可靠性，以实现对用户使用激光治疗仪的正确指导，并在最大程度上提升治疗效果。2、通过异常数据的检测和处理，最大程度上降低异常数据出现的可能性以及对分析模型运算产生的干扰，用户能够在治疗前通过采集到的当前生理参数数据了解自身身体状况，并为之后进行的分析决策提供数据支持。3、传统的LSTM模型在进行学习前必须将所有数据准备好，且无法随着时间序列数据的增长对模型进行更新。然而在实际应用场景中，随着时间的推移，数据流会不断产生新的训练数据，如果要存储所有获得的数据再一起训练，不仅会对内存资源具有极高的要求，还会导致训练所需时间不断增长。由此，本申请结合当前应用场景，提出一种可增量更新且自适应动态权重调节的LSTM模型，结合模型增量训练及迁移学习方法，在每一次新数据上传后即可对模型参数进行更新以提高模型分类准确度，且无需消耗大量运算时间。附图说明通过参考附图阅读下文的详细描述，本申请示例性实施方式的上述以及其他目的、特征和优点将变得易于理解。在附图中，以示例性而非限制性的方式示出了本申请的若干实施方式，并且相同或对应的标号表示相同或对应的部分，其中：图1是本申请实施例一种基于激光治疗仪的数据处理方法中步骤S1-S6的方法流程图。图2是本申请实施例一种基于激光治疗仪的数据处理方法中步骤S60-S62的方法流程图。图3是本申请实施例一种基于激光治疗仪的数据处理系统的逻辑框图。具体实施方式下面将结合本申请实施例中的附图，对本申请实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本申请一部分实施例，而不是全部的实施例。基于本申请中的实施例，本领域技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本申请保护的范围。应当理解，当本申请的权利要求、说明书及附图使用术语“第一”、“第二”等时，其仅是用于区别不同对象，而不是用于描述特定顺序。本申请的说明书和权利要求书中使用的术语“包括”和“包含”指示所描述特征、整体、步骤、操作、元素和/或组件的存在，但并不排除一个或多个其它特征、整体、步骤、操作、元素、组件和/或其集合的存在或添加。本申请实施例公开一种基于激光治疗仪的数据处理方法，应用在构建的边缘设备与云服务器的物联网通信架构上，实现用户采集数据传输即云端分析，其中，边缘设备为激光治疗仪，云服务器为医疗大数据的云平台。在构建架构的过程中，需要在用户设备与云平台之间建立通信，使云平台提供的数据存储功能与算力支持历史数据存储及模型运算，为用户治疗策略提供了必要支持。在激光治疗仪中设置数据采集模块和数据分析模块，在用户选择运行模式开始治疗前对可能影响到激光治疗仪治疗策略的生理参数进行检测。例如，本申请激光治疗仪的数据处理方法中需要检测的生理参数可以为血压、血脂、血糖、血粘度、皮肤厚度、血管壁厚度等。用户还可以进行手动输入的参数，数据采集模块将提示用户自行输入，如性别、年龄、需要治疗的病症等，病症可以是如三高病、中耳炎、咽炎等。参照图1，基于激光治疗仪的数据处理方法包括步骤S1-S6，具体如下：S1：对目标用户数据进行异常分析，判定异常数据类型，异常数据类型包括存在缺失值和存在离群值，若判定为存在缺失值，发送第一信号，若判定为存在离群值，发送第二信号，若判定为不存在异常，发送正常信号。具体地，缺失值是指某些参数特征的值缺失或未记录的情况，导致缺失值的原因可能为用户意外中断检测过程。离群值是指与其他数据采集值有显著差异的数据，在本申请中表现为与人体正常生理参数范围有明显偏离的数据，导致该异常的原因可能为用户未正确佩戴数据采集装置或未清洁采集装置表面导致检测装置不灵敏。对离群值的判断可采用常识分析法、标准差法、箱线图法等方法。例如，年龄值可通过常识分析法直接将其范围设定为，超出该范围即视为异常值；血压、血脂等具有大量统计学研究的数据可通过标准差法设定数据上下限范围，检测到数据超出设定的上下限范围即视为异常值，标准差法所用计算公式为：上限：LL=μ+3σ，下限：UL=μ-3σ，其中，μ表示数据总体均值，σ表示数据总体标准差。响应于第一信号被确认指令，发送第一报警信号，提醒用户检测存在中断。响应于第二信号被确认指令，发送第二报警信号，提醒用户正检测设备佩戴异常。S2：将预设激光治疗仪的治疗策略与多种参数进行组合分类，获得多种治疗策略分类结果，构建包含分类结果的时序医疗数据库，参数包括运行模式、使用强度及使用时间。将激光治疗仪治疗策略按治疗仪运行模式、使用强度及使用时间等进行组合分类，得到治疗策略的不同分类结果。例如，治疗设备按治疗症状不同分为三种，即鼻腔光疗探头、耳道激光探头、咽部激光探头三个部位的单独输出器及与上述三个输出器同时治疗的腕式光疗探头。运行模式可以是一个设备或多个设备同时进行治疗，分为腕式+耳/鼻/咽部输出器同时进行治疗或仅耳/鼻/咽部输出器治疗；使用强度按功率大小可划分为1/2/3/4四档；使用时间长度可分为15/30/45/60分钟四档。则治疗策略整体分类结果共有种。根据历史使用激光治疗仪进行治疗的人群生理参数及适应的激光治疗仪参数或历史使用产品的用户上传统计得到的数据，构建时序医疗数据库。时序医疗数据库中包含字段示例如下：，其中，时间戳为用户上传数据时间，血压，血脂，血糖，血粘度，...，等为用户相关生理数据，治疗策略分类表示为编码0-95的数字。S3：构建第一模型，第一模型为预训练的深度学习模型，使用数据库训练第一模型，得到第二模型，第二模型为预训练的治疗策略分类的深度学习模型。本申请中，深度学习模型使用LSTM模型，使用步骤S2中的数据库中数据对LSTM模型进行训练，得到预训练出的激光治疗仪治疗策略分类LSTM模型。S4：创建目标用户的数据队列，分配模型存储空间以存储目标用户的历史数据及目标用户的第二模型。具体地，用户第一次上传数据后即在云平台为用户开辟单独的模型存储空间，用户当前训练所需数据将存储在队列里，数据队列数据量的值设置为Q，例如，本申请中设定Q=30，即每次取最近的30次数据，以一个月左右的数据变化量，作为模型增量训练所需输入的序列数据，能够最大程度的参考临近的历史数据值，丢弃对模型训练影响较小的、较早的数据。S5：对第二模型进行增量训练，生成并输出包含有治疗策略分类结果的建议清单。具体地，使用数据队列中的最新数据和最新一次训练后的第二模型进行增量训练，模型增量训练所需输入的序列值为预设的数据队列数据量的值。为每位用户单独划分的模型将随着增量训练的参数更新以适应每个用户的个人情况，以保证得出更准确的分类结果。例如，当数据队列数据量的值Q取值30时，模型训练分类可分为如下三种情况：当数据队列中初始用户数据量为1，即用户第一次上传数据时，将上传数据直接输入第二模型并给出分类结果。该数据在得到分类结果后将被保留在队列中成为用户历史数据。当数据队列中用户数据量小于30，即用户上传数据少于30条时，将根据之前得到的分类结果对当前数据进行数据增强补充。例如，从预训练的治疗策略分类的深度学习模型所用的用户数据库中随机选取部分与该用户分类一致的数据填充在队列开头，以补充至满足30条数据，且这些增强数据将随着队列中用户数据的更新被逐位向前丢弃。当数据队列中用户数据量等于30，即用户上传总数据量大于30时，最新数据将进入队列的最后一位，队列中的第一位也即最早的历史数据将被释放，随后使用最新队列中的数据结合上一次训练更新的模型对模型进行进一步更新，并输出分类结果，即当前最佳治疗策略。在步骤S5获得包含治疗策略分类结果的建议清单后，医疗大数据平台将建议清单发送至用户治疗仪的设备终端中，用户可根据该分类结果表示的治疗策略对当次治疗所需选用的激光治疗仪模式及参数进行调整，从而最大化每次使用的治疗效果。通过激光治疗仪与医疗大数据平台之间的通信及数据更新交流，用户可随时在设置的医疗大数据的云平台中查看自己的历史身体数据及变化趋势。S6：对第二模型与目标用户数据进行动态权重调整，目标用户数据包括目标用户的历史数据及用户的采集数据。参照图2，包括步骤S60-S62：S60：设定预训练数据集及用户历史数据集。其中，预训练数据集为，用户历史数据集为/＞，/＞为测试数据，测试数据指的是目标用户数据中最新的采集数据，/＞其中，Q为队列值，/＞=1；S61：初始化并更新预训练数据集及用户历史数据集的权重。具体地，权重更新的表达式为：其中，表示第i位预训练数据的权重值，/＞表示第j位用户历史数据权重值，为预训练数据的权重，/＞为用户历史数据集的权重，/＞为第i位预训练数据与测试数据之间的欧式距离，可表示为：/＞，d为数据构成向量维度。预训练数据集中的数据与目标用户数据中最新的采集数据之间的欧式距离表示预训练数据与目标用户数据中最新的采集数据之间的差距，差距越大则相应权重越小，即应降低预训练数据对模型训练的影响。在本方法中使用指数函数对权重进行处理，将其取值范围映射在内。S62：合并训练数据集。合并训练数据集的关系式为：。其中，/＞为预训练数据集，/＞为用户历史数据集，/＞为预训练数据的权重，/＞为用户历史数据集的权重。为加权预训练数据集，/＞为加权用户历史数据集。合并后的训练数据集为最终所用训练集，是与权重相乘后得到的加权预训练数据集与加权用户历史数据集/＞的并集。随着用户历史数据在队列中不断加入，预训练数据与最新的采集数据之间的差距将不断加大，所对应权重将不断减小，训练集中目标用户数据所占比重将相应增大。经过步骤S6的动态权重调整后，解决了数据队列中存在的预训练模型数据与目标用户数据关联度不高的问题，医疗大数据的云平台可通过长期检测到的数据对所使用的第二模型进行更新完善，以不断调整治疗策略的分类准确性。本申请实施例基于激光治疗仪的数据处理方法的实施原理为：将用户历史数据与当前检测数据结合，并使用可增量更新的LSTM模型进行分析，能够更快且更准确地得出可靠的治疗策略分类结果，通过对时序历史检测数据的分析能更好地保证制定当前使用治疗仪策略的准确性及可靠性，以实现对用户使用激光治疗仪的正确指导，并在最大程度上提升治疗效果。本申请实施例还公开一种基于激光治疗仪的数据处理系统，参照图3，包括处理器和存储器，存储器存储有计算机程序指令，当计算机程序指令被处理器执行时实现根据本申请的基于激光治疗仪的数据处理方法。上述系统还包括通信总线和通信接口等本领域技术人员熟知的其他组件，其设置和功能为本领域中已知，因此在此不再赘述。在本发明中，前述的存储器可以是任何包含或存储程序的有形介质，该程序可以被指令执行系统、装置或者器件使用或者与其结合使用。例如，计算机可读存储介质可以是任何适当的磁存储介质或者磁光存储介质，比如，阻变式存储器RRAM、动态随机存取存储器DRAM、静态随机存取存储器SRAM、增强动态随机存取存储器EDRAM、高带宽内存HBM、混合存储立方HMC等等，或者可以用于存储所需信息并且可以由应用程序、模块或两者访问的任何其他介质。任何这样的计算机存储介质可以是设备的一部分或可访问或可连接到设备。本发明描述的任何应用或模块可以使用可以由这样的计算机可读介质存储或以其他方式保持的计算机可读/可执行指令来实现。虽然本说明书已经示出和描述了本发明的多个实施例，但对于本领域技术人员显而易见的是，这样的实施例只是以示例的方式提供的。本领域技术人员会在不偏离本发明思想和精神的情况下想到许多更改、改变和替代的方式。应当理解的是在实践本发明的过程中，可以采用对本文所描述的本发明实施例的各种替代方案。以上均为本申请的较佳实施例，并非依此限制本申请的保护范围，故：凡依本申请的结构、形状、原理所做的等效变化，均应涵盖于本申请的保护范围之内。
