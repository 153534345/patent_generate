标题title
一种自适应肥料补偿的深松施肥控制系统
摘要abst
本发明属于农业施肥技术领域，尤其为一种自适应肥料补偿的深松施肥控制系统，包括数据采集模块、数据处理模块和深松施肥控制模块，所述数据采集模块包括无人机、高光谱相机、主控单元1、5G模块和北斗定位模块1，所述高光谱相机搭载在无人机上。本发明通过无人机载高光谱的方式提高了土壤数据采集的效率，另外扩展了土壤养分预测后的一系列工作，实现了根据土壤养分指导施肥的功能，同时使用双倾角传感器对耕地深度进行精准监测，使用霍尔传感器对工作面积进行计算，均给出了有效计算公式，从数据采集、传输到处理、控制均制定了完整的方案，使深松施肥一体机自动实现“因地制宜”。
权利要求书clms
1.一种自适应肥料补偿的深松施肥控制系统，包括数据采集模块、数据处理模块和深松施肥控制模块，其特征在于：所述数据采集模块包括无人机、高光谱相机、主控单元1、5G模块1和北斗定位模块1，所述高光谱相机搭载在无人机上，所述主控单元1将收集到的数据采用5G的通信方式发送至本地服务器；所述数据处理模块对高光谱相机采集到的高光谱信息进行处理，所述数据处理模块对高光谱图像进行坐标加载并提取光谱曲线；所述深松施肥控制模块包括主控单元2、5G模块2、倾角传感器、深松施肥一体机、北斗定位模块2和LCD显示屏，深松施肥一体机包括牵引机和深松施肥装置，深松施肥装置的后部设置有施肥装置，深松施肥装置的前部设置有深松铲，倾角传感器用于测量深松铲的入地深度，倾角传感器设置为2个，分别为倾角传感器1和倾角传感器2，用于测量地面水平和不水平的两种情况，倾角传感器1和倾角传感器2分别位于牵引机身和连接深松铲的拉杆上，倾角传感器通过串口的方式与主控单元2相连，主控单元2解析倾角传感器传来的数据并将其转换为耕地深度，所述主控单元2计算完耕地深度后，将数据展示在LCD显示屏的指定位置上，施肥装置包含3个肥箱和用于控制施肥的控制电机和排肥轴，3个所述肥箱分别装有氮肥、磷肥、钾肥，5G模块2接收数据采集模块得到的土壤各个养分含量预测值，主控单元2通过5G模块2接收到相应数据后，提取氮磷钾含量，分别与提前设定的基准作比对，深松施肥一体机上安装有用于测量机器前进距离的霍尔传感器。2.根据权利要求1所述的一种自适应肥料补偿的深松施肥控制系统，其特征在于：所述主控单元2通过控制电机带动排肥轴分别排出的肥量，使土壤中N-P2O5-K2O的比例保持在14:18:13。3.根据权利要求1所述的一种自适应肥料补偿的深松施肥控制系统，其特征在于：所述主控单元1采用FPGA芯片，高光谱相机通过Camera Link接口与主控单元1相联，将5G模块1与FPGA芯片通过USB接口连接起来,北斗定位模块1以串口的方式连接在FPGA芯片上。4.根据权利要求3所述的一种自适应肥料补偿的深松施肥控制系统，其特征在于：在FPGA芯片上设计高光谱图像采集和预处理的逻辑电路，包括对图像进行去噪、校正、配准处理，生成符合5G通信标准要求的数据格式，将预处理后的图像数据通过5G模块1进行无线传输，同时在FPGA内部设计相应的5G通信协议栈和调制解调逻辑电路，以确保数据传输的正确性和稳定性。5.根据权利要求1所述的一种自适应肥料补偿的深松施肥控制系统，其特征在于：所述主控单元2采用STM32单片机，5G模块2以USB的方式与STM32单片机相连进行数据的接收。6.根据权利要求5所述的一种自适应肥料补偿的深松施肥控制系统，其特征在于：所述倾角传感器1、倾角传感器2和北斗定位模块2分别连接到STM32单片机的数据收发串口，STM32单片机采用并口的方式将数据展示在LCD显示屏上。
说明书desc
技术领域本发明涉及农业施肥技术领域，具体为一种自适应肥料补偿的深松施肥控制系统。背景技术已有深松施肥控制技术可以拆分为深松控制技术和施肥控制技术，控制依据分别包括以下几个方面:深松控制技术：1）耕深控制器通过耕深信号和阻力信号等判断当前耕作情况并计算输出信号，通过提升电机驱动器控制提升电机对农具的升降。2）通过建立深松深度与某一物理量的函数关系，进而通过监测这一物理量来控制耕地深度。3）使用传感器结合单片机获得深松铲入土深度，并展示在显示屏，便于实时调整深松深度。其中技术3）最为常见，应用在机器上的传感器主要分为超声波传感器和倾角传感器。第一种使用超声波传感器可以测得传感器到地面的距离值，将距离值传送到控制器，通过设定程序计算出耕深。第二种通过在牵引机身和拉杆等位置安装倾角传感器，通过拉杆的角度变化结合机身的角度变化获得最终的耕地深度。施肥控制技术：1）通过测量机构测量机器行进的速度，单片机通过控制电机调整施肥速率，实现根据行进速度调整施肥的速率，进而达到区域定量施肥的效果。2）通过输入作物生长所需的肥量控制马达带动排肥。3）高光谱测作物光谱信息，专家系统根据光谱信息调整施肥。上述技术均实现了对深松施肥作业的有效控制，但依然存在以下问题：1）建立深松深度与某一物理量关系的方法，一方面需要多种传感器测量参与建模的变量，一方面需要验证建模的效果，实现比较复杂。利用超声波传感器测量耕地深度的方法，测量精度易受到地面杂物的影响；另外，使用倾角传感器的大多数研究中，没有同时考虑机器上坡和下坡时对耕地深度的计算误差。2）在施肥控制技术上，缺少对土壤实际养分含量的关注，即使存在依据土壤养分精准施肥的研究，也缺少数据和计算方法的支撑。因此我们提出了一种自适应肥料补偿的深松施肥控制系统来解决上述问题。发明内容解决的技术问题针对现有技术的不足，本发明提供了一种自适应肥料补偿的深松施肥控制系统，解决了上述背景技术中所提出的问题。技术方案本发明为了实现上述目的具体采用以下技术方案：一种自适应肥料补偿的深松施肥控制系统，包括数据采集模块、数据处理模块和深松施肥控制模块。所述数据采集模块包括无人机、高光谱相机、主控单元1、5G模块1和北斗定位模块1，所述高光谱相机搭载在无人机上，所述主控单元1将收集到的数据采用5G的通信方式发送至本地服务器。所述数据处理模块对高光谱相机采集到的高光谱信息进行处理，所述数据处理模块对高光谱图像进行坐标加载并提取光谱曲线。所述深松施肥控制模块包括主控单元2、5G模块2、倾角传感器、深松施肥一体机、北斗定位模块2和LCD显示屏，深松施肥一体机包括牵引机和深松施肥装置，深松施肥装置的后部设置有施肥装置，深松施肥装置的前部设置有深松铲，倾角传感器用于测量深松铲的入地深度，倾角传感器设置为2个，分别为倾角传感器1和倾角传感器2，用于测量地面水平和不水平的两种情况，倾角传感器1和倾角传感器2分别位于牵引机身和连接深松铲的拉杆上，倾角传感器通过串口的方式与主控单元2相连，主控单元2解析倾角传感器传来的数据并将其转换为耕地深度，所述主控单元2计算完耕地深度后，将数据展示在LCD显示屏的指定位置上，施肥装置包含3个肥箱和用于控制施肥的控制电机和排肥轴，3个所述肥箱分别装有氮肥、磷肥、钾肥，主控单元2通过5G模块2接收到相应数据后，提取氮磷钾含量，分别与提前设定的基准作比对，深松施肥一体机上安装有用于测量机器前进距离的霍尔传感器。进一步地，所述主控单元2通过控制电机带动排肥轴分别排出的肥量，使土壤中N-P2O5-K2O的比例保持在14:18:13。进一步地，所述主控单元1采用FPGA芯片，高光谱相机通过Camera Link接口与主控单元1相联，将5G模块1与FPGA芯片通过USB接口连接起来,北斗定位模块1以串口的方式连接在FPGA芯片上。进一步地，在FPGA芯片上设计高光谱图像采集和预处理的逻辑电路，包括对图像进行去噪、校正、配准等处理，生成符合5G通信标准要求的数据格式，将预处理后的图像数据通过5G模块1进行无线传输，同时在FPGA内部设计相应的5G通信协议栈和调制解调等逻辑电路，以确保数据传输的正确性和稳定性。进一步地，所述主控单元2采用STM32单片机，5G模块2以USB的方式与STM32单片机相连进行数据的接收。进一步地，所述倾角传感器1、倾角传感器2和北斗定位模块2分别连接到STM32单片机的数据收发串口，STM32单片机采用并口的方式将数据展示在LCD显示屏上。有益效果与现有技术相比，本发明提供了一种自适应肥料补偿的深松施肥控制系统，具备以下有益效果：本发明，通过无人机载高光谱的方式提高了土壤数据采集的效率，另外扩展了土壤养分预测后的一系列工作，实现了根据土壤养分指导施肥的功能，同时使用双倾角传感器对耕地深度进行精准监测，使用霍尔传感器对工作面积进行计算，均给出了有效计算公式，从数据采集、传输到处理、控制均制定了完整的方案，使深松施肥一体机自动实现“因地制宜”。附图说明图1为本发明系统原理图；图2为本发明上坡时深松施肥一体机耕地深度计算示意图；图3为本发明深松施肥控制系统流程图；图4为本发明主控单元1结构示意图；图5为本发明主控单元2结构示意图。具体实施方式下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。实施例如图3所示，一种自适应肥料补偿的深松施肥控制系统，为克服已有技术存在的多个问题，本发明采用无人机载的高光谱相机对地块进行拍照，将获得的高光谱信息通过5G无线通信方式传输给本地服务器对高光谱数据进行处理，得到相应地块的土壤信息以及地理坐标，进而根据上述信息计算单位地块施肥量，并反馈至处于待机状态的深松施肥一体机，当深松施肥一体机工作时，深松施肥一体机上装配的控制模块根据每个地块的信息自动控制施肥量，使氮磷钾的比例与预设的14:18:13一致。本发明提升了现有技术中深松深度控制和施肥控制的性能，解决了深松施肥作业中的深松深度控制和监测、施肥控制、面积统计的关键技术问题。一种自适应肥料补偿的深松施肥控制系统，包括数据采集模块、数据处理模块和深松施肥控制模块。数据采集模块主要包括：无人机、高光谱相机、主控单元1、5G模块1和北斗定位模块1，具体实地工作时，将高光谱相机搭载在无人机上，无人机按照预设的路线在区域内进行高光谱数据收集，由于无人机携带高光谱相机拍摄的效果受到背景噪声和镜头畸变的影响，需要首先对图像进行预处理，包括对高光谱图像畸变校正、噪声去除等，然后主控单元1将收集到的数据采用5G的通信方式发送至本地服务器。数据处理模块主要是对收集到的高光谱信息进行处理。对高光谱图像进行坐标加载，提取光谱曲线，并结合光谱特征建立相应的土壤元素含量预测模型，这里采用精度较高的反向传播神经网络的建模方法构建反演模型。最后将模块得到的土壤各个养分含量预测值传输至农机上的数据接收装置。深松施肥控制模块包括：主控单元2、5G模块2、倾角传感器、深松施肥一体机、北斗定位模块2和LCD显示屏。深松施肥一体机包括牵引机和深松施肥装置，深松施肥装置的后部设置有施肥装置，深松施肥装置的前部设置有深松铲，深松施肥一体机在工作时，深松铲在前用于深松。倾角传感器适用于测量深松铲的入地深度，为了减少地面并不经常是完全水平带来的测量误差，倾角传感器设置为2个，分别为倾角传感器1和倾角传感器2，考分别位于牵引机身和连接深松铲的拉杆上。倾角传感器通过串口的方式与控制模块2相连，控制模块2解析倾角传感器传来的数据并将其转换为耕地深度。如图2所示，机手通过控制操纵杆带动拉杆AB提升或下降，进一步带动后方深松铲提升或下降，点B下降的高度就是深松铲进入土壤的深度，即深松深度。针对农机在水平、上坡和下坡路段工作时的不同情况，以上坡为例。如图2所示，首先读取深松铲刚好接触地面时产生的车身角度和拉杆的倾斜角度/＞，此时的/＞是针对垂直反向的角，而实际要参与计算的是角/＞，得到/＞，并记录此时点A距离地面的高度为/＞，点B距离地面的高度为/＞，其中/＞。当农机在作业过程中，读取此时产生的车身角度/＞和拉杆的倾斜角度/＞，得到/＞，并记录此时点B距离地面的高度为/＞，其中/＞= /＞，因此，得到耕地深度。当主控单元2计算完耕地深度后，将数据展示在LCD显示屏的指定位置上，方便机手查看并根据当前土壤状况及时控制操纵杆做出调节。施肥装置包含3个肥箱和用于控制施肥的控制电机和排肥轴，3个所述肥箱分别装有氮肥、磷肥、钾肥。主控单元2通过5G模块2接收到相应数据后，提取氮磷钾含量，分别与提前设定的基准作比对的比例，计算得到一亩地玉米所需的氮肥为7.16公斤，磷肥为9.2公斤，钾肥为6.64公斤。因此，将一亩地拆分分为/＞个单位地块，就可以计算出单位地块所需的肥量分为别/＞），主控单元2通过控制电机带动排肥轴分别排出的肥量，从而使此时的土壤中N-P2O5-K2O的比例保持在14-18-13，实现自动缺肥补偿。除了深松和施肥的控制，系统还具有计算作业面积的功能，通过在深松施肥一体机上安装霍尔传感器，测量机器前进的距离，结合机器幅宽，进而计算实际工作面积。具体实施过程为：记录深松施肥一体机轮胎的周长为，霍尔传感器和轮胎轴承同轴安装，同时与主控单元的IO引脚相连，已知霍尔传感器一圈有12个钢珠，随着轮胎转一圈就会产生12个脉冲信号，可以计算1个脉冲信号产生的距离是/＞；主控单元通过对脉冲进行计数，记为/＞，就可以得到机器前进的距离/＞，结合机器的幅宽/＞，得到实际的作业面积。一种基于土壤状况的自动深松施肥控制系统流程如图3所示：详细系统流程如下：Step1：无人机搭载高光谱相机，按照预设的路线采集土壤信息。Step2：主控单元1将提前制定好的标志位填加到采集数据上，并通过5G的形式将整体数据发送至本地服务器。Step3：本地服务器根据标志位验证数据队列，若符合则接收并存储，同时提取有效信息带入数据处理模块，得到所需的氮磷钾施肥量，将上述信息发送至深松施肥一体机上的数据接收端。Step4：主控单元2提取接收到的数据，在行进的过程中，由北斗定位模块2获取当前经纬度，主控单元2根据实际经纬度与接收到的地块经纬度作比对，控制施肥装置在相应位置的施肥量，另外，主控单元2以串口的方式接收倾角传感器传来的数据，并进行提取运算。其中主控单元1采用FPGA芯片，如图4所示。高光谱相机通过Camera Link接口与之相联，将5G模块1与FPGA芯片通过USB接口连接起来,同时将北斗定位模块1以串口的方式连接在FPGA芯片上。在FPGA芯片上设计高光谱图像采集和预处理的逻辑电路，包括对图像进行去噪、校正、配准等处理，生成符合5G通信标准要求的数据格式。将预处理后的图像数据通过5G模块1进行无线传输，同时在FPGA内部设计相应的5G通信协议栈和调制解调等逻辑电路，以确保数据传输的正确性和稳定性。由于主控单元2并不需要对图像数据进行接收与转发，因此选用STM32单片机，如图5所示。其中5G以USB的方式与单片机接口连接起来，两个倾角传感器和北斗定位模块2分别连接到单片机的数据收发串口，将上述数据处理后，采用并口的方式将数据展示在LCD上。最后应说明的是：以上所述仅为本发明的优选实施例而已，并不用于限制本发明，尽管参照前述实施例对本发明进行了详细的说明，对于本领域的技术人员来说，其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换。凡在本发明的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本发明的保护范围之内。
