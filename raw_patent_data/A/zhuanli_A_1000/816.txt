标题title
航空施药方法、装置、电子设备及存储介质
摘要abst
本发明提供的航空施药方法、装置、电子设备及存储介质，属于农业自动化技术领域，包括：将获取的点云数据解算到作业区域的实地坐标系中，根据点云数据在实地坐标系的分布，确定点云中心点坐标并计算雾滴密度变异系数；根据点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量；基于雾滴密度变异系数和雾滴沉积区偏移量，调整植保无人机的作业参数。本发明针对大喷幅、大作业区域的航空施药作业，可实时监测作业区域内药液沉积质量，并根据激光雷达实时扫描雾滴群的点云数据与植保无人机的实时位置相匹配，据此指导质保无人机进行安全施药作业，提高施药质量，避免农药飘移灾害事件发生。
权利要求书clms
1.一种航空施药方法，其特征在于，包括：获取点云数据，所述点云数据是由布设在作业区域的激光雷达反馈的；将所述点云数据解算到所述作业区域的实地坐标系中；根据解算后的点云数据在所述实地坐标系的分布，确定点云中心点坐标并计算雾滴密度变异系数；所述点云中心点坐标是解算后的点云数据的中心点在所述实地坐标系上的坐标；根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量；基于所述雾滴密度变异系数和所述雾滴沉积区偏移量，调整植保无人机的作业参数。2.根据权利要求1所述的航空施药方法，其特征在于，所述实地坐标系是以作业区域的任一顶点为坐标系原点，以所述作业区域的所述任一顶点所在边界为X轴，以所述植保无人机的飞行方向分别为Y轴所建立的直角坐标系；所述将所述点云数据解算到所述作业区域的实地坐标系中的计算公式为：其中，所述点云数据中第i个点在所述实地坐标系中的坐标为；是所述激光雷达在所述实地坐标系中的X轴坐标值的绝对值；是所述激光雷达在所述实地坐标系中的Y轴坐标值的绝对值；是所述第i个点与所述激光雷达之间的距离；是所述第i个点与所述激光雷达之间的偏角。3.根据权利要求1所述的航空施药方法，其特征在于，在所述点云数据解算到所述作业区域的实地坐标系中之前，还包括：整体旋转所述实地坐标系获取正北化坐标系，所述正北化坐标系的Y轴与正北方向同向；所述实地坐标系中任一网格的顶点坐标，在进行整体旋转后获取到的正北化坐标系中对应点的坐标表示为：其中，实地坐标系的Y轴与正北方向的夹角为。4.根据权利要求3所述的航空施药方法，其特征在于，根据解算后的点云数据在所述实地坐标系的分布计算雾滴密度变异系数，包括：在所述实地坐标系中将所述作业区域均匀划分为若干个网格；将每个所述网格均匀划分为多个子网格；根据所述点云数据中每个点的坐标，确定分布于每个所述子网格内的点的数量；根据分布于每个所述子网格内的点的数量，计算每个子网格内的点云密度；基于预先构建的点云密度与雾滴密度转换模型，由每个子网格内的点云密度确定每个子网格内的雾滴密度；基于每个子网格内的雾滴密度确定所述点云数据相关的雾滴密度变异系数。5.根据权利要求4所述的航空施药方法，其特征在于，将每个所述网格均匀划分为N×N个子网格；所述根据分布于每个所述子网格内的点的数量，计算每个子网格内的点云密度的计算公式为：其中，为第个子网格内的点云密度；为第个子网格的边界坐标中X轴坐标值和Y轴坐标值均为最小值的点坐标；为第个子网格的边界坐标中X轴坐标值和Y轴坐标值均为最大值的点坐标；为分布于第个子网格内的点的数量。6.根据权利要求5所述的航空施药方法，其特征在于，所述点云密度与雾滴密度转换模型的表达式为：其中，为第个子网格内的雾滴密度，和是预先确定的模型系数。7.根据权利要求6所述的航空施药方法，其特征在于，所述基于每个子网格内的雾滴密度确定所述点云数据相关的雾滴密度变异系数的计算公式为：其中，为雾滴密度变异系数；为所有子网格内的雾滴密度的算数平均值；为i个子网格内的雾滴密度。8.根据权利要求1所述的航空施药方法，其特征在于，在当前采样周期为转场后的首个采样周期时，所述根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量，包括：获取在首个采样周期内所采集到的植保无人机的首个经纬度信息以及首个点云数据；将所述首个经纬度信息解算到所述实地坐标系中，获取所述植保无人机在所述实地坐标系中的坐标；将所述首个点云数据解算到所述实地坐标系中，以根据所述首个点云数据在所述实地坐标系中的分布，确定首个点云中心点坐标；获取所述雾滴沉积区偏移量，所述雾滴沉积区偏移量为所述植保无人机在所述实地坐标系中的坐标与所述首个点云中心点坐标之间的方向向量。9.根据权利要求8所述的航空施药方法，其特征在于，在当前采样周期为非转场后的首个采样周期时，所述根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量，包括：获取在当前采样周期内所采集到的点云数据相关的点云中心点坐标；获取所述雾滴沉积区偏移量，所述雾滴沉积区偏移量为所述首个点云中心点坐标与所述点云中心点坐标之间的方向向量；所述基准中心点坐标为所述首个点云中心点坐标。10.根据权利要求9所述的航空施药方法，其特征在于，在所述当前采样周期为第n个采样周期时，获取到所述雾滴沉积区偏移量之后，还包括：确定所述雾滴沉积区偏移量在X轴上的距离绝对值；若所述距离绝对值小于预设阈值，将更新所述基准中心点坐标为所述点云中心点坐标；若所述距离绝对值不小于所述预设阈值，则继续将第n-1个采样周期的基准中心点坐标作为第n+1采样周期的基准中心点坐标。11.根据权利要求8所述的航空施药方法，其特征在于，将所述首个经纬度信息解算到所述实地坐标系中，获取所述植保无人机在所述实地坐标系中的坐标是基于以下公式逆向推导确定的：其中，是坐标在正北化坐标系中对应点;为坐标对应的经纬度信息；为正北化坐标系的坐标系原点的经纬度信息；为地心到地球表面各点距离的平均值。12.根据权利要求1所述的航空施药方法，其特征在于，在确定点云中心点坐标并计算雾滴密度变异系数以及根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量之后，还包括：显示每个采样周期内所确定的点云中心点坐标，生成沉积雾滴群实时轨迹图；显示每个采样周期内所确定的植保无人机在所述实地坐标系中的坐标，生成植保无人机实时轨迹图；所述沉积雾滴群实时轨迹图与所述植保无人机实时轨迹图显示在同一界面。13.一种航空施药装置，其特征在于，包括：数据采集单元，用于获取点云数据，所述点云数据是由布设在作业区域的激光雷达反馈的；坐标转换单元，用于将所述点云数据解算到所述作业区域的实地坐标系中；第一运算单元，用于根据解算后的点云数据在所述实地坐标系的分布，确定点云中心点坐标并计算雾滴密度变异系数；所述点云中心点坐标是解算后的点云数据的中心点在所述实地坐标系上的坐标；第二运算单元，用于根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量；施药控制单元，用于基于所述雾滴密度变异系数和所述雾滴沉积区偏移量，调整植保无人机的作业参数。14.一种电子设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1至12任一项所述航空施药方法。15.一种非暂态计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至12任一项所述航空施药方法。16.一种计算机程序产品，包括计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至12任一项所述航空施药方法。
说明书desc
技术领域本发明涉及农业自动化技术领域，尤其涉及一种航空施药方法、装置、电子设备及存储介质。背景技术航空施药因其效率高、节水节药能力强、地形适应广等特点，成为当下农作物植保管理环节的重要手段。航空施药中，飞机与作物之间的空间较大，雾滴自喷雾系统喷出后，在飞机下方空间运动受环境侧风影响很大。受侧风作用，雾滴飞行路线极易发生偏离，无法沉积到靶标区域，而是沉降到非靶标施药区域，造成重喷、错喷、漏喷等现象，若偏离的雾滴沉降到鱼塘、水源或敏感作物种植区，造成鱼虾死亡、人畜中毒、敏感作物药害等次生灾害发生。另外，还会造成施药区域雾滴沉积不均、沉积量达不到病虫防治要求，影响病虫害防治效果。因此，雾滴沉积监测是不可或缺的环节。现有的监测手段主要借助水敏纸、卡片等雾滴接收材料，将其放置在靶标施药区和附近区域，待施药结束后，通过收集水敏纸和卡片，将其带回实验室进行雾滴密度或沉积量检测。这类监测手段只能在施药作业后一段时间才能测量施药雾滴沉积情况，并不能在施药过程中及时反映施药质量，即这类事后检测不具有实时性，无法在飞机施药中实时指导飞机进行安全作业。且航空施药实际作业过程中，喷幅以及喷施区域都比较大，常规的雾滴沉积测量方法需要布很多采样点，费时费力。现有技术也有采用计算流体动力学仿真来计算、模拟航空施药雾滴飘移的方法来预测雾滴沉积飘移的区域。但是类检测手段具有明显的缺陷：模拟仿真的条件过于理想化，多在固定风向、固定风速条件下进行仿真模拟，且雾滴输入参数是固定的；现实施药过程中，环境风速、风向均是实时变化的，不同作业区域施药飞机型号、喷头型式、喷雾压力均不同，因此，仿真计算获得的雾滴运动结果与实际作业结果有较大出入；其次，飞机作业过程中需要飞机实时进行调整，而模拟仿真计算量巨大，无法实时指导无人机喷雾作业。发明内容本发明提供一种航空施药方法、装置、电子设备及存储介质，用以解决现有技术所采用的事后检测技术不具有实时性的弊端，并不能在施药过程中及时反映施药质量，无法在飞机施药中实时指导飞机进行安全作业的缺陷。第一方面，本发明提供一种航空施药方法，包括：获取点云数据，所述点云数据是由布设在作业区域的激光雷达反馈的；将所述点云数据解算到所述作业区域的实地坐标系中；根据解算后的点云数据在所述实地坐标系的分布，确定点云中心点坐标并计算雾滴密度变异系数；所述点云中心点坐标是解算后的点云数据的中心点在所述实地坐标系上的坐标；根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量；基于所述雾滴密度变异系数和所述雾滴沉积区偏移量，调整植保无人机的作业参数。根据本发明提供的一种航空施药方法，所述实地坐标系是以作业区域的任一顶点为坐标系原点，以所述作业区域的所述任一顶点所在边界为X轴，以所述植保无人机的飞行方向分别为Y轴所建立的直角坐标系；所述将所述点云数据解算到所述作业区域的实地坐标系中的计算公式为：其中，所述点云数据中第i个点在所述实地坐标系中的坐标为；是所述激光雷达在所述实地坐标系中的X轴坐标值的绝对值；是是所述激光雷达在所述实地坐标系中的Y轴坐标值的绝对值；是所述第i个点与所述激光雷达之间的距离；是所述第i个点与所述激光雷达之间的偏角。根据本发明提供的一种航空施药方法，在所述点云数据解算到所述作业区域的实地坐标系中之前，还包括：整体旋转所述实地坐标系获取正北化坐标系，所述正北化坐标系的Y轴与正北方向同向；所述实地坐标系中任一网格的顶点坐标，在进行整体旋转后获取到的正北化坐标系中对应点的坐标表示为：其中，实地坐标系的Y轴与正北方向的夹角为。根据本发明提供的一种航空施药方法，根据解算后的点云数据在所述实地坐标系的分布计算雾滴密度变异系数，包括：在所述实地坐标系中将所述作业区域均匀划分为若干个网格；将每个所述网格均匀划分为多个子网格；根据所述点云数据中每个点的坐标，确定分布于每个所述子网格内的点的数量；根据分布于每个所述子网格内的点的数量，计算每个子网格内的点云密度；基于预先构建的点云密度与雾滴密度转换模型，由每个子网格内的点云密度确定每个子网格内的雾滴密度；基于每个子网格内的雾滴密度确定所述点云数据相关的雾滴密度变异系数。根据本发明提供的一种航空施药方法，将每个所述网格均匀划分为N×N个子网格；所述根据分布于每个所述子网格内的点的数量，计算每个子网格内的点云密度的计算公式为：其中，为第q个子网格内的点云密度；为第q个子网格的边界坐标中X轴坐标值和Y轴坐标值均为最小值的点坐标；为第q个子网格的边界坐标中X轴坐标值和Y轴坐标值均为最大值的点坐标；为分布于第q个子网格内的点的数量。根据本发明提供的一种航空施药方法，所述点云密度与雾滴密度转换模型的表达式为：其中，为第q个子网格内的雾滴密度，和是预先确定的模型系数。根据本发明提供的一种航空施药方法，所述基于每个子网格内的雾滴密度确定所述点云数据相关的雾滴密度变异系数的计算公式为：其中，为雾滴密度变异系数；为所有子网格内的雾滴密度的算数平均值；为i个子网格内的雾滴密度。根据本发明提供的一种航空施药方法，在当前采样周期为转场后的首个采样周期时，所述根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量，包括：获取在首个采样周期内所采集到的植保无人机的首个经纬度信息以及首个点云数据；将所述首个经纬度信息解算到所述实地坐标系中，获取所述植保无人机在所述实地坐标系中的坐标；将所述首个点云数据解算到所述实地坐标系中，以根据所述首个点云数据在所述实地坐标系中的分布，确定首个点云中心点坐标；获取所述雾滴沉积区偏移量，所述雾滴沉积区偏移量为所述植保无人机在所述实地坐标系中的坐标与所述首个点云中心点坐标之间的方向向量。根据本发明提供的一种航空施药方法，在当前采样周期为非转场后的首个采样周期时，所述根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量，包括：获取在当前采样周期内所采集到的点云数据相关的点云中心点坐标；获取所述雾滴沉积区偏移量，所述雾滴沉积区偏移量为所述首个点云中心点坐标与所述点云中心点坐标之间的方向向量；所述基准中心点坐标为所述首个点云中心点坐标。根据本发明提供的一种航空施药方法，在所述当前采样周期为第n个采样周期时，获取到所述雾滴沉积区偏移量之后，还包括：确定所述雾滴沉积区偏移量在X轴上的距离绝对值；若所述距离绝对值小于预设阈值，将更新所述基准中心点坐标为所述点云中心点坐标；若所述距离绝对值不小于所述预设阈值，则继续将第n-1个采样周期的基准中心点坐标作为第n+1采样周期的基准中心点坐标。根据本发明提供的一种航空施药方法，所述将所述首个经纬度信息解算到所述实地坐标系中，获取所述植保无人机在所述实地坐标系中的坐标是基于以下公式逆向推导确定的：其中，是坐标在正北化坐标系中对应点;为坐标对应的经纬度信息；为正北化坐标系的坐标系原点的经纬度信息；为地心到地球表面各点距离的平均值。根据本发明提供的一种航空施药方法，在确定点云中心点坐标并计算雾滴密度变异系数以及根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量之后，还包括：显示每个采样周期内所确定的点云中心点坐标，生成沉积雾滴群实时轨迹图；显示每个采样周期内所确定的植保无人机在所述实地坐标系中的坐标，生成植保无人机实时轨迹图；所述沉积雾滴群实时轨迹图与所述植保无人机实时轨迹图显示在同一界面。第二方面，本发明还提供一种航空施药装置，包括：数据采集单元，用于获取点云数据，所述点云数据是由布设在作业区域的激光雷达反馈的；坐标转换单元，用于将所述点云数据解算到所述作业区域的实地坐标系中；第一运算单元，用于根据解算后的点云数据在所述实地坐标系的分布，确定点云中心点坐标并计算雾滴密度变异系数；所述点云中心点坐标是解算后的点云数据的中心点在所述实地坐标系上的坐标；第二运算单元，用于根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量；施药控制单元，用于基于所述雾滴密度变异系数和所述雾滴沉积区偏移量，调整植保无人机的作业参数。第三方面，本发明提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现如上述任一种所述航空施药方法的步骤。第四方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现如上述任一种所述航空施药方法的步骤。第五方面，本发明还提供一种计算机程序产品，包括计算机程序，所述计算机程序被处理器执行时实现如上述任一种所述航空施药方法的步骤。本发明提供的航空施药方法、装置、电子设备及存储介质，针对大喷幅、大作业区域的航空施药作业，可实时监测作业区域内药液沉积质量，并根据激光雷达实时扫描雾滴群的点云数据与植保无人机的实时位置相匹配，据此指导质保无人机进行安全施药作业，提高施药质量，避免农药飘移灾害事件发生。附图说明为了更清楚地说明本发明或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明提供的一种航空施药方法的流程示意图；图2是本发明提供的一种航空施药系统的整体结构示意图；图3是本发明提供的一种航空施药方法的单次流程示意图；图4是本发明提供的一种航空施药的偏移位移补偿图；图5是本发明提供的一种航空施药质量分布图；图6是本发明提供的一种航空施药装置的结构示意图；图7是本发明提供的电子设备的结构示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚，下面将结合本发明中的附图，对本发明中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。需要说明的是，在本发明实施例的描述中，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。术语“上”、“下”等指示的方位或位置关系为基于附图所示的方位或位置关系，仅是为了便于描述本发明和简化描述，而不是指示或暗示所指的装置或元件必须具有特定的方位、以特定的方位构造和操作，因此不能理解为对本发明的限制。除非另有明确的规定和限定，术语“安装”、“相连”、“连接”应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是机械连接，也可以是电连接；可以是直接相连，也可以通过中间媒介间接相连，可以是两个元件内部的连通。对于本领域的普通技术人员而言，可以根据具体情况理解上述术语在本发明中的具体含义。本发明中的术语“第一”、“第二”等是用于区别类似的对象，而不用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便本发明的实施例能够以除了在这里图示或描述的那些以外的顺序实施，且“第一”、“第二”等所区分的对象通常为一类，并不限定对象的个数，例如第一对象可以是一个，也可以是多个。此外，“和/或”表示所连接对象的至少其中之一，字符“/”，一般表示前后关联对象是一种“或”的关系。下面结合图1-图7描述本发明实施例所提供的航空施药方法、装置、电子设备及存储介质。图1是本发明提供的航空施药方法的流程示意图，如图1所示，作为执行主体的数据处理模块，主要执行但不限于以下步骤：步骤101：获取点云数据。其中，所述点云数据是由布设在作业区域的激光雷达反馈的。在进行航空施药作业前预先在作业区域内布设至少一个激光雷达，且确保激光雷达对所喷施的雾滴有一定的敏感度。可选地，本发明提供的激光雷达的高度是可调的。比如，针对待施药的靶标对象的植株高度差异，激光雷达的检测高度均至少能够被调整至冠层高度，以避免激光雷达被植株遮蔽，影响点云数据的获取精度。可选地，激光雷达与航空施药的控制器通信连接，以及时地将获取到的点云数据发送并存储至控制器中。激光雷达利用激光器发射脉冲激光束，并通过旋转镜实现对其发出的脉冲激光束的偏转。最终，由激光器发射出的脉冲激光束打在雾滴上，并在雾滴的表面形成发射，发射后的激光束由激光雷达的接收器接收。这样，激光雷达就可以根据激光测距原理，计算出每个雾滴距其之间的距离以及方位，进而可以构建出航空施药过程中的所有雾滴的点云数据。步骤102：将所述点云数据解算到所述作业区域的实地坐标系中。由于点云数据所属的坐标系、作业区域所在的实地坐标系以及用于航空施药的植保无人机所属的坐标系是不统一的，在根据航空施药过程中的雾滴分布的情况进行植保无人机的作业参数调整时，需要将上述三个类型的坐标系均解算到同一直角坐标系中。作为一种可选实施例，本发明在进行作业区域所在位置的实地坐标系的构建中，可以将整个作业区域视作一个矩形区域，将其任意一个顶点作为实地坐标系的原点，将某一条边作为X轴，而将垂直与X轴的另一条相邻边作为Y轴，建立直角坐标系。然后，通过将激光雷达所采集到的雾滴分布的点云数据解算到实地坐标系，就可以方便准确地对雾滴在作业区域的分布情况进行分析。步骤103：根据解算后的点云数据在所述实地坐标系的分布，确定点云中心点坐标并计算雾滴密度变异系数。其中，所述点云中心点坐标是解算后的点云数据的中心点在所述实地坐标系上的坐标。在本发明中数据处理模块每次会处理T秒的数据，即激光雷达会向数据处理模块的数据缓冲区存放T秒的数据，然后数据处理模块提取出所存储的数据后清除缓冲区。上述雾滴密度变异系数，是用于评价雾滴沉积分布均匀性的指标，CV值越大，雾滴沉积分布均匀性越差，CV值越小，雾滴沉积分布均匀性越好。本发明一方面数据处理模块可以根据点云数据中所有点在实地坐标系分布的具体坐标，从所有点中确定出中心点，进而获取到其坐标，即点云中心点坐标；另一方面，还可以根据点云数据在实地坐标系的分布，评估雾滴沉积分布均匀性，并将其量化为CV。步骤104：根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量。在植保无人机施药作业过程，如果有侧风出现，雾滴沉积区域会发生偏移，导致实际喷洒的农药未能喷洒到靶标施药区。为了避免这一情况，需要对雾滴沉积区域偏移情况进行确定，然后来指导植保无人机进行航线调整。在植保无人机施药作业过程中，植保无人机实时的位置信息会通过4G模块实时传输给数据处理模块。另外，根据激光雷达实时扫描的施药沉积雾滴群的点云数据中各个点在实地坐标系中的坐标，就可以计算出点云数据的中心点坐标。本发明用中心点坐标表征实际雾滴沉积区的位置，而用基准中心点坐标表征目标雾滴沉积区的位置。可选地，目标雾滴沉积区是根据植保无人机实时的位置信息确定的，或者根据前一采样周期中所确定的实际雾滴沉积区的位置来确定。步骤105：基于所述雾滴密度变异系数和所述雾滴沉积区偏移量，调整植保无人机的作业参数。在通过步骤103获取到了雾滴密度变异系数，就可以获取到雾滴在作业区域内的分布均匀性，进而可以通过指导植保无人机在接下来的喷施过程中设置调整喷幅内各个喷头的喷雾压力。进一步地，在通过步骤104获取到了雾滴沉积区偏移量，就可以指导植保无人机在接下来的喷施过程中的航线调整。本发明提供的航空施药方法，针对大喷幅、大作业区域的航空施药作业，可实时监测作业区域内药液沉积质量，并根据激光雷达实时扫描雾滴群的点云数据与植保无人机的实时位置相匹配，据此指导质保无人机进行安全施药作业，提高施药质量，避免农药飘移灾害事件发生。基于上述实施例的内容，作为一种可选实施例，所述实地坐标系是以作业区域的任一顶点为坐标系原点，以所述作业区域的所述任一顶点所在边界为X轴，以所述植保无人机的飞行方向分别为Y轴所建立的直角坐标系；所述将所述点云数据解算到所述作业区域的实地坐标系中的计算公式为：其中，所述点云数据中第i个点在所述实地坐标系中的坐标为；是所述激光雷达在所述实地坐标系中的X轴坐标值的绝对值；是是所述激光雷达在所述实地坐标系中的Y轴坐标值的绝对值；是所述第i个点与所述激光雷达之间的距离；是所述第i个点与所述激光雷达之间的偏角。首先，本发明提供了一种构建作业区域的实地坐标系的方法，包括：在将作业区域视为一个矩形区域的基础上，以作业区域的某个顶点作为坐标原点，将矩形区域的相邻两条边分别作为X轴和Y轴建立的直角坐标系作为作业区域的实地坐标系。进一步地，可以采用以下划分原则，将整个作业区域划分为若干个网格：其中，为植保无人机的喷幅；为植保无人机飞行速度，为激光雷达获取点云数据的时间间隔；为X轴上的第i条划分线，为Y轴上的第j条划分线。假设作业区域的长为，宽为，实际上，由于作业区域的长和宽往往不能恰好若干等分，则在X轴和Y轴方向上位于最外侧的小网格的边长为：其中，在X轴上共有m条划分线，在Y轴上共有n条划分线；最外侧的小网格的四个顶点坐标分别为、、和。在实现对作业区域在实地坐标系中网格划分之后，为了与植保无人机的位置信息进行对比，可以将每个网格的顶点坐标转换为经纬度信息存储；也可以将植保无人机的位置信息转换到实地坐标系所在的直角坐标系中，以与每个网格的顶点坐标进行对比。在本发明提供的航空施药方法中，是采用将植保无人机的位置信息转换到实地坐标系所在的直角坐标系的方式，来实现对于植保无人机在航空喷施过程中的作业参数的修正，其不视为对本发明保护范围的唯一限定。需要说明的是，由于所建立的作业区域相关的实地坐标系的y轴方向可能与正北方向不一致，为了便于进行每个网格的顶点坐标与经纬度信息之间的转换，可以对实地坐标系进行转化，使得转化后的坐标系的Y轴与正北方向同向。作为一种可选实施例，所述实地坐标系中任一网格的顶点坐标，在进行整体旋转后获取到的正北化坐标系中对应点的坐标表示为：其中，实地坐标系的Y轴与正北方向的夹角为。在完成对实地坐标系的转化后，在所得到的正北化坐标系可以标注出每个网格的顶点坐标，然后根据实际情况确定坐标原点的经纬度信息，设坐标原点的经纬度信息为，则任一网格顶点所对应的经纬度信息可以采用以下公式计算出来：其中，是网格的顶点坐标在正北化坐标系中对应点;为顶点坐标对应的经纬度信息；为正北化坐标系的坐标系原点的经纬度信息；为地心到地球表面各点距离的平均值。进一步地，在获取到当前时刻的植保无人机的经纬度信息之后，也可以根据上述公式和公式，逆向推导出植保无人机在当前时刻在所述实地坐标系中的坐标，并根据推导出的坐标，具体定位出植保无人所属的网格。基于上述实施例的内容，作为一种可选实施例，在构建实地坐标系并实现了对其正北化转化之后，就可以将所述点云数据解算到所述作业区域的实地坐标系中，其计算公式可以是：其中，所述点云数据中第i个点在所述实地坐标系中的坐标记为；是所述激光雷达在所述实地坐标系中的X轴坐标值的绝对值；是是所述激光雷达在所述实地坐标系中的Y轴坐标值的绝对值；是所述第i个点与所述激光雷达之间的距离；是所述第i个点与所述激光雷达之间的偏角。需要说明的是，由于激光雷达所获取到的点云数据包含有每个点与激光雷达之间的距离以及每个点与激光雷达之间的偏角等数据信息。其中，点云数据的点的数量k的取值与激光雷达的角分辨率ang_res以及激光雷达的扫描视场角有关，具体为：。基于上述实施例的内容，作为一种可选实施例，在将点云数据解算到实地坐标系之后，数据处理模块就可以根据解算后的点云数据在实地坐标系中的分布，计算出雾滴密度变异系数，包括但不限于以下步骤：在所述实地坐标系中将所述作业区域均匀划分为若干个网格；将每个所述网格均匀划分为多个子网格；根据所述点云数据中每个点的坐标，确定分布于每个所述子网格内的点的数量；根据分布于每个所述子网格内的点的数量，计算每个子网格内的点云密度；基于预先构建的点云密度与雾滴密度转换模型，由每个子网格内的点云密度确定每个子网格内的雾滴密度；基于每个子网格内的雾滴密度确定所述点云数据相关的雾滴密度变异系数。具体来说，计算雾滴密度变异系数主要是进行雾滴沉积量和沉积分布均匀性的计算。假设第t个时刻第p个点满足某个网格的统计规则，则将点云数据分布在该网格内的点的数量加1：其中，某个网格的四个顶点的坐标分别为、、和。作为一种可选实施例，基于预先构建的沉积量与雷达点数量模型，就可以根据分布在该网格内的点的数量，确定出喷施在每个网格内的雾滴沉积量，其计算公式可以是：其中，为上述某个网格内的点的数量；为该网格内的雾滴沉积量；和为沉积量与雷达点数量模型的模型参数，主要与雾滴群与激光雷达之间的距离、激光雷达的角分辨率等有关，是基于实验条件下拟合出的。进一步地，为了计算每个网格中的雾滴分布均匀性，可以将每个网格继续划分为N*N个子网格，并统计分布在每个子网格内的雷达点云的点的数量，进而根据每个子网格内的点的数量与其面积的比值，计算出每个子网格内的点云密度。作为一种可选实施例，上述根据分布于每个所述子网格内的点的数量，计算每个子网格内的点云密度的计算公式为：其中，为第q个子网格内的点云密度；为第q个子网格的边界坐标中X轴坐标值和Y轴坐标值均为最小值的点坐标；为第q个子网格的边界坐标中X轴坐标值和Y轴坐标值均为最大值的点坐标；为分布于第q个子网格内的点的数量。进一步地，根据计算到的每个子网格内的雾滴密度，利用预先构建的点云密度与雾滴密度转换模型，就可以确定出每个子网格内的雾滴密度。作为一种可选实施例，上述点云密度与雾滴密度转换模型的表达式为：其中，为第q个子网格内的雾滴密度，和为点云密度与雾滴密度转换模型的模型参数，主要与雾滴群与激光雷达之间的距离、激光雷达的角分辨率等有关，是基于实验条件下拟合出的。进一步地，在获取到每个子网格内的雾滴密度之后，就可以根据以下公式确定出N*N个子网格的雾滴密度变异系数：其中，为雾滴密度变异系数；为所有子网格内的雾滴密度的算数平均值；为i个子网格内的雾滴密度。基于上述实施例的内容，作为一种可选实施例，在当前采样周期为转场后的首个采样周期时，步骤104所提出的根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量，主要包括：获取在首个采样周期内所采集到的植保无人机的首个经纬度信息以及首个点云数据；将所述首个经纬度信息解算到所述实地坐标系中，获取所述植保无人机在所述实地坐标系中的坐标；将所述首个点云数据解算到所述实地坐标系中，以根据所述首个点云数据在所述实地坐标系中的分布，确定首个点云中心点坐标；获取所述雾滴沉积区偏移量，所述雾滴沉积区偏移量为所述植保无人机在所述实地坐标系中的坐标与所述首个点云中心点坐标之间的方向向量。在植保无人机施药作业过程，如果有侧风出现，雾滴沉积区域会发生偏移，导致实际喷施的农药未能喷洒到靶标施药区。为了避免这一情况，需要对雾滴沉积区的偏移情况进行确定，然后来指导植保无人机进行航线调整。在植保无人机施药作业的过程中，植保无人机实时的位置信息会通过4G模块实时传输给数据处理模块，数据处理模块就可以根据上述公式和公式的逆向换算，将植保无人机实时的位置信息解算到作业区域相关的实地坐标系中，以确定植保无人机在实地坐标系内的位置的坐标。进一步地，根据步骤103中所确定的点云数据中所有点的中心点，进而确定该中心点的坐标即点云中心点坐标，以将该点云中心点坐标作为雾滴沉积区的实际位置。一方面，在植保无人机开始作业时时，数据处理模块会首先根据所采集到的植保无人机的经纬度信息以及点云数据，进而通过坐标转换，将首个经纬度信息解算到所述实地坐标系中，确定植保无人机在实地坐标系中的位置坐标；以及将上述首个点云数据解算到所述实地坐标系中，并根据首个点云数据中的各个点在实地坐标系中的中标位置确定出其中心点坐标。进一步地，数据处理模块将由点和中心点构成的线段的方向向量表示雾滴沉积区偏移量，其中。当没有侧风时，与会为零或者接近于零，此时沉积雾滴没有发生偏移，无需调节飞行航线。当侧风与植保无人机的飞行方向垂直时，；当侧风与植保无人机方向的飞行方向有一定夹角时，；上述两种情况下，沉积雾滴都会发生偏移。在垂直植保无人机飞行方向其偏移量为，在植保无人机的飞行方向其偏移量为。需要说明的是，在基于雾滴沉积区偏移量，对植保无人机的作业参数中的导航方向的调整上，由于Y轴方向与植保无人机飞行方向相同，偏移量是无需调节的，只需对应调节X轴方向偏移量即可。基于上述实施例的内容，作为一种可选实施例，在当前采样周期为非转场后的首个采样周期时，所述根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量，包括：获取在当前采样周期内所采集到的点云数据相关的点云中心点坐标；获取所述雾滴沉积区偏移量，所述雾滴沉积区偏移量为所述首个点云中心点坐标与所述点云中心点坐标之间的方向向量；所述基准中心点坐标为所述首个点云中心点坐标。其中，非转场后的首个采样周期，包括除了开始作业时第一个周期以及转场后的第一个采样周期之外的其它所有采样周期中的一个。具体地，在数据处理模块与转场后的首个采样周期内完成植保无人机在实地坐标系中的位置与点云中心点位置之间的比对之后，无论是否调整植保无人机的航线，雾滴沉积区偏移量就不再以方向向量表示，而是利用当前采样周期所确定的沉积雾滴的点云中心点与基准中心点所在直线的方向向量表示。假设由点云数据确定的点云中心点的坐标为，将上一采样周期所确定的首个点云中心点坐标作为当前采样周期的基准中心点坐标。这样就可以将首个点云中心点坐标与所述点云中心点坐标之间的方向向量，作为当前采样周期的雾滴沉积区偏移量。其中，方向向量可以表示为。基于上述实施例的内容，作为一种可选实施例，在所述当前采样周期为第n个采样周期时，获取到所述雾滴沉积区偏移量之后，还包括：确定所述雾滴沉积区偏移量在X轴上的距离绝对值；若所述距离绝对值小于预设阈值，将更新所述基准中心点坐标为所述点云中心点坐标；若所述距离绝对值不小于所述预设阈值，则继续将第n-1个采样周期的基准中心点坐标作为第n+1采样周期的基准中心点坐标。进一步地，当的绝对值小于预设阈值时，雾滴沉积区与施药靶标区重合，不需要调整飞行航线。那么在当前采样周期的下一采样周期就可以利用当前采样周期所确定的点云中心点坐标作为新的基准中心点坐标。在按照这一规律，在每个采样周期结束时确定下一采样周期的基准中心点坐标。其中，预设阈值可以取值为0或者接近0的正数，预设阈值的取值越小，航线调整的精度越高；预设阈值的取值越大，会一定程度减轻盈航线的频繁调整对数据处理模块以及植保无人机的算力要求。需要说明的是，若大于或等于预设阈值时，此时需要根据来调整植保无人机在X方向上的位移，此时就不能将当前采样周期所确定的点云中心点坐标作为下一采样周期内新的基准中心点坐标，而需要继续将当前采样周期的之前的一个采样周期的基准中心点坐标作为下一采样周期内新的基准中心点坐标。进一步地，当获取到下一采样周期的点云中心点坐标，此时偏移量表示为，当小于预设阈值时，说明雾滴沉积区与施药靶标区重合，说明偏移量补偿成功，那么在后续采样周期中的就可以将设置为基准中心点。其中，当大于或等于预设阈值时，说明偏移量补偿失败，需要根据重新调整植保无人机的位置，此时在后续采样周期中不会刷新基准中心点，依旧将是作为基准中心点，以此循环，一直到偏移量补偿成功，基准中心点重新刷新，直至完成整个喷施任务。图2是本发明提供的一种航空施药系统的整体结构示意图，如图2所示，本发明还提供一种航空施药系统，主要包括用于执行喷施作业的植保无人机、设置在作业区域一侧的激光雷达、作业计算机以及用于为激光雷达和作业计算机供电的电源模块。电源模块可以由太阳能板、两块12V的蓄电池、控制器等组成，在作业过程中，太阳能板可以一边发电一边给系统供电，大大提升了系统工作的持久性和稳定性。其中，作业计算机可用于接收飞手的操作以进行植保无人机的航线的手动规划、植保无人机的作业参数的手动调整等。可选地，作业计算机包括数据获取模块、数据处理模块和数据存储模块。植保无人机上装设有GPS模块和通信模块，用于对植保无人机位置进行定位，并将植保无人机的位置信息实时发送给作业计算机的数据获取模块。作业计算机的数据获取模块将采集的数据短暂的存储在数据存储模块以供数据处理模块调用。数据处理模块是整个航空施药系统的核心，用于处理数据获取模块获取的激光雷达扫描数据以及植保无人机位置信息。将点云数据解算为实地坐标系中的位置坐标，并统计作业区域内每个划分出的网格中的点的数量以及点云密度，并根据实验室内预先建立的沉积量与雷达点云数量和雾滴密度与雷达点云密度模型，预测出实际的雾滴沉积密度与单位沉积量，确定出雾滴密度变异系数。此外，植保无人机的实时位置信息会实时地与实地坐标系进行匹配，实时对比植保无人机与雾滴沉积区的位置，确定出雾滴沉积区偏移量。最后，数据处理模块可以根据雾滴密度变异系数以及雾滴沉积区偏移量，自动对植保无人机的作业参数进行调整，以克服侧风对航空施药的影响。结合根据图中展示的植保无人机的飞行航线规划图，介绍一下本发明所提供的航空施药方法所提供的转场方法：当由植保无人机的位置信息结算后的在实地坐标系上的y坐标达到作业区域的最大长度L时，植保无人机需要向X轴正方向移动两个喷幅，在这一转场过程中，当前采样周期与上一采样周期的雾滴沉积区偏移量应该也是两个喷幅，即应当与作对比，当，则说明飞行航线正确无需调整；若与之间的差值较大，则需要根据的值来调整飞行航线，确保雾滴沉积区域施药靶标区重合。为了更清楚的展示本发明所提供的航空施药方法，结合具体实时例，进一步简化说明如下：图3是本发明提供的一种航空施药方法的单次流程示意图，如图3所示，在控制植保无人机开始执行航空施药时，预先确定作业区域的一个顶点作为实地坐标系的原点。然后，飞手需要在作业计算机的显示屏的图形用户界面中输入预设的作业参数，包括：激光雷达在实地坐标系中距X轴和Y轴的距离分别设置为d0和k0，Y轴与正北方向夹角为，植保无人机的喷幅h，植保无人机的飞行速度v，作业区域的宽度d，长度L，计算CV时划分的网格数N，预设CV阈值K，激光雷达扫描时间间隔T以及坐标系原点的经纬度。然后，启动作业计算机中的运行航空施药的程序，激光雷达开始扫描。激光雷达扫描的数据会存储在数据存储区内。当达到扫描间隔T秒后，数据处理模块提取并清除数据存储区的数据。然后将提取的数据进行坐标变换，转换到实地坐标系下，然后计算出此时施药沉积雾滴群位于哪个位置、对应的沉积量以及CV值等，并在显示屏上显示出这些参数。同时，数据处理模块会计算沉积雾滴群的点云中心点坐标，并与植保无人机的位置信息进行对比，计算出沉积雾滴群的偏移量并显示在显示屏上。以供飞手调整植保无人机飞行姿态及航线。此外，在植保无人机作业过程中，数据处理模块会生成一张植保无人机实时轨迹图和沉积雾滴群实时轨迹图，用来实时显示两者的位置变化，从而让飞手更直观的了解植保无人机作业情况。图4是本发明提供的一种航空施药的偏移位移补偿图，给出了植保无人机施药过程中可能出现的两种位置变化情况。如图4所示，空心圆代表植保无人机的实时位置，实心圆代表沉积雾滴群的中心点位置。根据图4中的左半部分所展示的内容，可知在第一种情况下的植保无人机位置与沉积雾滴群的中心点位置相近，没有发生位移偏移，当飞行至E点时，沉积雾滴群中心位置与上一时刻位置发生改变。此时调整植保无人机的航线，使得在F位置时雾滴沉积区域恢复正常。同理，在H在也发生位移偏移，在I点恢复正常。根据图4中的右半部分所展示的内容，可知在第二种情况下，A点植保无人机的实时位置与沉积雾滴群的中心点位置出现较大差异，此时调整植保无人机的航线。在B点时雾滴沉积区域恢复正常。在D点时沉积雾滴群中心位置与上一时刻的位置发生较大偏移，调整航线，在E点恢复正常。基于上述实施例的内容，作为一种可选实施例，在确定点云中心点坐标并计算雾滴密度变异系数以及根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量之后，还包括：显示每个采样周期内所确定的点云中心点坐标，生成沉积雾滴群实时轨迹图；显示每个采样周期内所确定的植保无人机在所述实地坐标系中的坐标，生成植保无人机实时轨迹图；所述沉积雾滴群实时轨迹图与所述植保无人机实时轨迹图显示在同一界面。图5是本发明提供的一种航空施药质量分布图，当施药作业结束，可以根据整个作业区域内各个网格内计算得到的沉积量和沉积分布均匀性，生成一张航空施药质量分布图，并结合沉积雾滴群实时轨迹图，来评判航空施药雾滴沉积质量。如图5所示，提供了一张航空施药质量分布图，图5中的数字代表该网格区域内雾滴沉积量，灰色的网格代表该网格内CV值大于预设值，雾滴沉积分布均匀性较差。图6是本发明提供的一种航空施药装置的结构示意图，如图6所示，主要包括数据采集单元61、坐标转换单元62、第一运算单元63、第二运算单元64和施药控制单元65，其中：数据采集单元61，主要用于获取点云数据，所述点云数据是由布设在作业区域的激光雷达反馈的；坐标转换单元62，主要用于将所述点云数据解算到所述作业区域的实地坐标系中；第一运算单元63，主要用于根据解算后的点云数据在所述实地坐标系的分布，确定点云中心点坐标并计算雾滴密度变异系数；所述点云中心点坐标是解算后的点云数据的中心点在所述实地坐标系上的坐标；第二运算单元64，主要用于根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量；施药控制单元65，主要用于基于所述雾滴密度变异系数和所述雾滴沉积区偏移量，调整植保无人机的作业参数。本发明提供的航空施药装置，针对大喷幅、大作业区域的航空施药作业，可实时监测作业区域内药液沉积质量，并根据激光雷达实时扫描雾滴群的点云数据与植保无人机的实时位置相匹配，据此指导质保无人机进行安全施药作业，提高施药质量，避免农药飘移灾害事件发生。需要说明的是，本发明实施例提供的航空施药装置，在具体运行时，可以执行上述任一实施例所述的航空施药方法，对此本实施例不作赘述。图7是本发明提供的电子设备的结构示意图，如图7所示，该电子设备可以包括：处理器710、通信接口720、存储器730和通信总线740，其中，处理器710，通信接口720，存储器730通过通信总线740完成相互间的通信。处理器710可以调用存储器730中的逻辑指令，以执行航空施药方法，该方法包括：获取点云数据，所述点云数据是由布设在作业区域的激光雷达反馈的；将所述点云数据解算到所述作业区域的实地坐标系中；根据解算后的点云数据在所述实地坐标系的分布，确定点云中心点坐标并计算雾滴密度变异系数；所述点云中心点坐标是解算后的点云数据的中心点在所述实地坐标系上的坐标；根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量；基于所述雾滴密度变异系数和所述雾滴沉积区偏移量，调整植保无人机的作业参数。此外，上述的存储器730中的逻辑指令可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。另一方面，本发明还提供一种计算机程序产品，所述计算机程序产品包括存储在非暂态计算机可读存储介质上的计算机程序，所述计算机程序包括程序指令，当所述程序指令被计算机执行时，计算机能够执行上述各方法所提供的航空施药方法，该方法包括：获取点云数据，所述点云数据是由布设在作业区域的激光雷达反馈的；将所述点云数据解算到所述作业区域的实地坐标系中；根据解算后的点云数据在所述实地坐标系的分布，确定点云中心点坐标并计算雾滴密度变异系数；所述点云中心点坐标是解算后的点云数据的中心点在所述实地坐标系上的坐标；根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量；基于所述雾滴密度变异系数和所述雾滴沉积区偏移量，调整植保无人机的作业参数。又一方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现以执行上述各实施例提供的航空施药方法，该方法包括：获取点云数据，所述点云数据是由布设在作业区域的激光雷达反馈的；将所述点云数据解算到所述作业区域的实地坐标系中；根据解算后的点云数据在所述实地坐标系的分布，确定点云中心点坐标并计算雾滴密度变异系数；所述点云中心点坐标是解算后的点云数据的中心点在所述实地坐标系上的坐标；根据所述点云中心点坐标与基准中心点坐标，确定雾滴沉积区偏移量；基于所述雾滴密度变异系数和所述雾滴沉积区偏移量，调整植保无人机的作业参数。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分所述的方法。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
