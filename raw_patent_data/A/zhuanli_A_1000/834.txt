标题title
一种虚拟墙引导末端执行器移动的方法及装置
摘要abst
本发明提供一种虚拟墙引导末端执行器移动的方法及装置，所述方法通过在目标位置坐标系上构建一个圆锥形的虚拟墙边界，在边界内开放在X轴和Y轴方向上的自由度，允许髋臼锉在与定线方向平行的Z轴方向上运动的同时在XY平面有一定的活动范围，便于医生在拖动髋臼锉时避开可能障碍物，最终到达规划的目标位姿，且在髋臼锉与虚拟墙发生干涉时，本发明中的算法会命令机械臂退回至与虚拟墙无碰撞的空间。与现有方案相比较，本发明在虚拟墙内所增加的XY平面自由度便于医生在拖动髋臼锉时避开可能障碍物，最终顺利到达指定的目标打磨位姿，使得医生不会因为理想打磨位姿不可达而放弃机械臂辅助，从而减少对医生操作经验的依赖度。
权利要求书clms
1.一种虚拟墙引导末端执行器移动的方法，其特征在于，包括以下步骤：S101：在机械臂末端安装髋臼锉，作为辅助手术机器人的末端执行器，并计算安装髋臼锉后的工具坐标系；S102：通过手术导航系统确定所述髋臼锉在世界坐标系下的打磨终点位姿，并以打磨的最低点为原点建立新坐标系；其中，所述新坐标系原点坐标值为，定义所述新坐标系的+Z方向为：髋臼锉旋转轴垂直指向病人髋臼窝方向的相反方向，定义所述新坐标系的+X方向为：平行于所述工具坐标系+X坐标轴的方向，由+X和+Z方向计算出所述新坐标系的+Y方向；S103：记录所述髋臼锉的直径为：，并计算出所述髋臼锉圆心的打磨终点坐标值为：/＞，其中，/＞为髋臼锉的半径；S104：建立圆锥形的虚拟墙，并确定所述圆锥形虚拟墙尖端的坐标值；当所述髋臼锉在所述圆锥形虚拟墙内时，所述髋臼锉在与定线方向平行的Z轴方向运动的同时在XY平面有一定的活动范围，当所述髋臼锉与所述圆锥形虚拟墙发生干涉时，机械臂退回至与所述圆锥形虚拟墙无碰撞的空间，当所述髋臼锉在所述圆锥形虚拟墙外时，所述髋臼锉只能在与Z轴方向共线的方向上滑动；S105：根据所述圆锥形虚拟墙尖端的坐标位置构建所述圆锥形虚拟墙的表面任意一点的几何表达式；S106：实时计算一个控制时间步长后的所述髋臼锉的圆心在所述新坐标系下的坐标；S107：检测一个时间步长后的髋臼锉是否与所述圆锥形虚拟墙发生碰撞；如果会发生碰撞，计算出该时间步长内将要作用于机械臂末端的力的大小和方向，并取该力的反作用力，作用于机械臂上，使其活动范围不超出所述圆锥形虚拟墙边界；如果不发生碰撞，则髋臼锉保持原运动，直到到达目标位置。2.根据权利要求1所述的一种虚拟墙引导末端执行器移动的方法，其特征在于，S104中所述建立圆锥形的虚拟墙，并确定所述圆锥形虚拟墙尖端的坐标值，包括：定义所述圆锥形虚拟墙的开口角度，且所述圆锥形虚拟墙的边界与所述髋臼锉目标位置相切；根据三角函数求得所述圆锥形虚拟墙的尖端的Z坐标为：；计算所述圆锥形虚拟墙的尖端的坐标值为：。3.根据权利要求1所述的一种虚拟墙引导末端执行器移动的方法，其特征在于，S105中所述根据所述圆锥形虚拟墙尖端的坐标位置构建所述圆锥形虚拟墙的表面任意一点的几何表达式，包括：定义所述圆锥形虚拟墙表面任意一点的坐标为：；其中，为圆锥形虚拟墙表面任意一点在X轴上的位置，/＞为圆锥形虚拟墙表面任意一点在Y轴上的位置，/＞为圆锥形虚拟墙表面任意一点在Z轴上的位置；定义此点相对于所述圆锥形虚拟墙旋转轴的最短距离为；构建所述圆锥形虚拟墙表面的约束关系式： ；改变形式后可得： ；化简后可得： ；计算所述圆锥形虚拟墙表面的任意一点的坐标为： 。4.根据权利要求1所述的一种虚拟墙引导末端执行器移动的方法，其特征在于，S106中所述实时计算一个控制时间步长后的所述髋臼锉的圆心在所述新坐标系下的坐标，包括：在任意t1时刻，计算所述髋臼锉圆心的坐标为：；其中，为t1时刻所述髋臼锉圆心在X轴上的位置，/＞为t1时刻所述髋臼锉圆心在Y轴上的位置，/＞为t1时刻所述髋臼锉圆心在Z轴上的位置；获取机械臂末端实时控制的时间步长和在t1时刻速度向量/＞： ；其中，为t1时刻的速度向量/＞在X轴上的速度分向量，/＞为t1时刻的速度向量/＞在Y轴上的速度分向量，/＞为t1时刻的速度向量/＞在Z轴上的速度分向量；计算在t2时刻所述髋臼锉圆心的坐标： ；其中，为t2时刻所述髋臼锉圆心在X轴上的位置，/＞为t2时刻所述髋臼锉圆心在Y轴上的位置，/＞为t2时刻所述髋臼锉圆心在Z轴上的位置，t2为在t1时刻通过一个控制时间步长后的时刻。5.根据权利要求1所述的一种虚拟墙引导末端执行器移动的方法，其特征在于，S107中所述检测一个时间步长后的髋臼锉是否与所述圆锥形虚拟墙发生碰撞，包括：在t2时刻所述髋臼锉圆心在所述圆锥形虚拟墙表面上投影的Z坐标值为： ；此时所述髋臼锉圆心距离所述圆锥形虚拟墙表面的距离为：；做此距离与所述髋臼锉半径的差，化简后可得： ；根据此距离差判断是否发生碰撞： 。6.根据权利要求1所述的一种虚拟墙引导末端执行器移动的方法，其特征在于，S107中所述如果会发生碰撞，计算出该时间步长内将要作用于机械臂末端的力的大小和方向，并取该力的反作用力，作用于机械臂上，使其活动范围不超出所述圆锥形虚拟墙边界，包括：获取上一个时间步长期间的速度向量，用作计算此时间步长上的加速度：；其中，为此时间步长期间与上一个时间步长期间的速度向量差，/＞为上一个时间步长期间的速度向量，/＞为此时间步长期间的速度向量；获取机械臂末端的质量参数m，计算出将要作用于机械臂末端的力的大小：；取该力的反作用力，并作用于机械臂上，使其活动范围不超出所述圆锥形虚拟墙的边界。7.一种虚拟墙引导末端执行器移动的装置，其特征在于，包括：计算工具坐标系模块，用于计算机械臂末端安装髋臼锉后的工具坐标系；建立新坐标系模块，用于通过手术导航系统确定所述髋臼锉在世界坐标系下的打磨终点位姿，以打磨的最低点为原点建立新坐标系；计算髋臼锉目标位置模块，用于记录所述髋臼锉的直径，并计算出所述髋臼锉圆心的打磨终点坐标值；建立虚拟墙模块，用于建立圆锥形的虚拟墙，并确定所述圆锥形虚拟墙尖端的坐标值；计算虚拟墙表面点坐标值模块，用于根据所述圆锥形虚拟墙尖端的坐标位置构建所述圆锥形虚拟墙的表面任意一点的几何表达式；计算髋臼锉圆心坐标值模块，用于实时计算一个控制时间步长后的所述髋臼锉的圆心在所述新坐标系下的坐标；碰撞检测模块，用于检测一个时间步长后的髋臼锉是否与所述圆锥形虚拟墙发生碰撞。
说明书desc
技术领域本发明涉及协助式机械臂领域，具体为一种虚拟墙引导末端执行器移动的方法及装置。背景技术目前全髋关节置换手术中打磨髋臼窝时采用以下方法：在机械臂末端安装髋臼锉，作为辅助手术机器人的末端执行器；使用全髋置换手术导航系统确定病人髋臼窝中人工髋臼杯的安装位姿和最终目标的坐标系；打开机械臂协助定线模式，以最终目标确定的坐标系为基准，在六个运动自由度中，关闭除了沿Z轴平移和旋转以外的其他四个自由度，限制机械臂末端执行器只能在与Z轴方向共线的方向上滑动；医生移动机械臂的末端执行器到大致入路方位，并激活定线模式；机械臂自动调整位姿后，医生推动机械臂使髋臼锉沿着指定方向打磨髋臼窝。由于协助式机械臂采用上述定线模式，当手术环境不理想或相对复杂时，例如暴露空间小或有人体组织障碍物等情况，髋臼锉在单一自由度的固定运动方向上容易与人体组织发生物理干涉，导致理想的打磨位姿不可达。迫于时间因素，医生往往会放弃使用机器人辅助手术方案，而采用传统方法打磨髋臼窝，手术精度和效果对医生操作经验依赖度高，无法达成均一的手术结果，不利于提高病人术后生活质量。发明内容本发明的目的在于解决上述背景技术中描述的现有定线模式运动自由度低的缺点，提供一种虚拟墙引导末端执行器移动的方法及装置，所述方法通过在目标位置坐标系上构建一个圆锥形的虚拟墙边界，在边界内开放末端执行器X轴和Y轴方向上的自由度，允许髋臼锉在与定线方向平行的Z轴方向上运动的同时在XY平面有一定的活动范围，便于医生在拖动髋臼锉时避开可能障碍物，最终到达规划的目标位姿。为实现以上目的，本发明采用以下技术方案予以实现：第一方面，本发明提供一种虚拟墙引导末端执行器移动的方法，包括以下步骤：S101：在机械臂末端安装髋臼锉，作为辅助手术机器人的末端执行器，并计算安装髋臼锉后的工具坐标系；S102：通过手术导航系统确定所述髋臼锉在世界坐标系下的打磨终点位姿，并以打磨的最低点为原点建立新坐标系；其中，所述新坐标系原点坐标值为，定义所述新坐标系的+Z方向为：髋臼锉旋转轴垂直指向病人髋臼窝方向的相反方向，定义所述新坐标系的+X方向为：平行于所述工具坐标系+X坐标轴的方向，由+X和+Z方向计算出所述新坐标系的+Y方向；S103：记录所述髋臼锉的直径为：，并计算出所述髋臼锉圆心的打磨终点坐标值为：/＞，其中，/＞为髋臼锉的半径；S104：建立圆锥形的虚拟墙，并确定所述圆锥形虚拟墙尖端的坐标值；当所述髋臼锉在所述圆锥形虚拟墙内时，所述髋臼锉在与定线方向平行的Z轴方向运动的同时在XY平面有一定的活动范围，当所述髋臼锉与所述圆锥形虚拟墙发生干涉时，机械臂退回至与所述圆锥形虚拟墙无碰撞的空间，当所述髋臼锉在所述圆锥形虚拟墙外时，所述髋臼锉只能在与Z轴方向共线的方向上滑动；S105：根据所述圆锥形虚拟墙尖端的坐标位置构建所述圆锥形虚拟墙的表面任意一点的几何表达式；S106：实时计算一个控制时间步长后的所述髋臼锉的圆心在所述新坐标系下的坐标；S107：检测一个时间步长后的髋臼锉是否与所述圆锥形虚拟墙发生碰撞；如果会发生碰撞，计算出该时间步长内将要作用于机械臂末端的力的大小和方向，并取该力的反作用力，作用于机械臂上，使其活动范围不超出所述圆锥形虚拟墙边界；如果不发生碰撞，则髋臼锉保持原运动，直到到达目标位置。进一步地，S104中所述建立圆锥形的虚拟墙，并确定所述圆锥形虚拟墙尖端的坐标值，包括：定义所述圆锥形虚拟墙的开口角度，且所述圆锥形虚拟墙的边界与所述髋臼锉目标位置相切；根据三角函数求得所述圆锥形虚拟墙的尖端的Z坐标为：；计算所述圆锥形虚拟墙的尖端的坐标值为：。进一步地，S105中所述根据所述圆锥形虚拟墙尖端的坐标位置构建所述圆锥形虚拟墙的表面任意一点的几何表达式，包括：定义所述圆锥形虚拟墙表面任意一点的坐标为：；定义此点相对于所述圆锥形虚拟墙旋转轴的最短距离为；构建所述圆锥形虚拟墙表面的约束关系式： ；改变形式后可得： ；化简后可得： ；计算所述圆锥形虚拟墙表面的任意一点的坐标为： 。进一步地，S106中所述实时计算一个控制时间步长后的所述髋臼锉的圆心在所述新坐标系下的坐标，包括：在任意t1时刻，计算所述髋臼锉圆心的坐标为：；其中，为t1时刻所述髋臼锉圆心在X轴上的位置，/＞为t1时刻所述髋臼锉圆心在Y轴上的位置，/＞为t1时刻所述髋臼锉圆心在Z轴上的位置；获取机械臂末端实时控制的时间步长和在t1时刻速度向量/＞： ；其中，为t1时刻的速度向量/＞在X轴上的速度分向量，/＞为t1时刻的速度向量/＞在Y轴上的速度分向量，/＞为t1时刻的速度向量/＞在Z轴上的速度分向量；计算在t2时刻所述髋臼锉圆心的坐标： ；其中，为t2时刻所述髋臼锉圆心在X轴上的位置，/＞为t2时刻所述髋臼锉圆心在Y轴上的位置，/＞为t2时刻所述髋臼锉圆心在Z轴上的位置，t2为在t1时刻通过一个控制时间步长后的时刻。进一步地，S107中所述检测一个时间步长后的髋臼锉是否与所述圆锥形虚拟墙发生碰撞，包括：在t2时刻所述髋臼锉圆心在所述圆锥形虚拟墙表面上投影的Z坐标值为： ；此时所述髋臼锉圆心距离所述圆锥形虚拟墙表面的距离为：；做此距离与所述髋臼锉半径的差，化简后可得： ；根据此距离差判断是否发生碰撞： 。进一步地，S107中所述如果会发生碰撞，计算出该时间步长内将要作用于机械臂末端的力的大小和方向，并取该力的反作用力，作用于机械臂上，使其活动范围不超出所述圆锥形虚拟墙边界，包括：获取上一个时间步长期间的速度向量，用作计算此时间步长上的加速度：；其中，为此时间步长期间与上一个时间步长期间的速度向量差，/＞为上一个时间步长期间的速度向量，/＞为此时间步长期间的速度向量；获取机械臂末端的质量参数m，计算出将要作用于机械臂末端的力的大小：；取该力的反作用力，并作用于机械臂上，使其活动范围不超出所述圆锥形虚拟墙的边界。第二方面，本发明还提供一种虚拟墙引导末端执行器移动的装置，该装置包括：计算工具坐标系模块，用于计算机械臂末端安装髋臼锉后的工具坐标系；建立新坐标系模块，用于通过手术导航系统确定所述髋臼锉在世界坐标系下的打磨终点位姿，以打磨的最低点为原点建立新坐标系；计算髋臼锉目标位置模块，用于记录所述髋臼锉的直径，并计算出所述髋臼锉圆心的打磨终点坐标值；建立虚拟墙模块，用于建立圆锥形的虚拟墙，并确定所述圆锥形虚拟墙尖端的坐标值；计算虚拟墙表面点坐标值模块，用于根据所述圆锥形虚拟墙尖端的坐标位置构建所述圆锥形虚拟墙的表面任意一点的几何表达式；计算髋臼锉圆心坐标值模块，用于实时计算一个控制时间步长后的所述髋臼锉的圆心在所述新坐标系下的坐标；碰撞检测模块，用于检测一个时间步长后的髋臼锉是否与所述圆锥形虚拟墙发生碰撞。本发明提供一种虚拟墙引导末端执行器移动的方法及装置，所述方法通过在目标位置坐标系上构建一个圆锥形的虚拟墙边界，在边界内开放X轴和Y轴方向上的自由度，允许髋臼锉在与定线方向平行的Z轴方向上运动的同时在XY平面有一定的活动范围，便于医生在拖动髋臼锉时避开可能障碍物，最终到达规划的目标位姿，且在髋臼锉与虚拟墙发生干涉时，本发明中的算法会命令机械臂退回至与虚拟墙无碰撞的空间，保证手术过程中的安全性。与现有方案相比较，本发明在虚拟墙内所增加的XY平面自由度便于医生在拖动髋臼锉时避开可能障碍物，最终顺利到达指定的目标打磨位姿，使得医生不会因为理想打磨位姿不可达而放弃机械臂辅助，从而减少对医生操作经验的依赖度，有利于提高病人术后生活质量。附图说明下面将参考附图来描述本发明示例性实施例的特征、优点和技术效果。图1是本发明实施例提供的虚拟墙引导末端执行器移动的方法流程示意图；图2是本发明实施例提供的虚拟墙的示意图；图3是本发明实施例提供的髋臼锉与虚拟墙检测碰撞的示意图。具体实施方式下面将详细描述本公开的各个方面的特征和示例性实施例，为了使本公开 的目的、技术方案及优点更加清楚明白，以下结合附图及具体实施例，对本公开进行进一步详细描述。应理解，此处所描述的具体实施例仅意在解释本公开， 而不是限定本公开。对于本领域技术人员来说，本公开可以在不需要这些具体 细节中的一些细节的情况下实施。下面对实施例的描述仅仅是为了通过示出本 公开的示例来提供对本公开更好的理解。需要说明的是，在本文中，诸如第一和第二等之类的关系术语仅仅用来将 一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些 实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。在本文中，还需要说明的是，除非另有明确的规定和限定，术语“安装”、“相连”、“连接”、“装配”应做广义理解，例如，可以是固定连接，也可以是可拆卸连接，或一体地连接；可以是直接相连，也可以通过中间媒介间接相连。对于本领域的普通技术人员而言，可视具体情况理解上述术语在本发明中的具体含义。为了更好地理解本发明，下面结合附图对本发明实施例进行详细描述。图1是本发明实施例提供的虚拟墙引导末端执行器移动的方法流程示意图。如图1所示，本发明提供一种虚拟墙引导末端执行器移动的方法，包括以下步骤：S101：在机械臂末端安装髋臼锉，作为辅助手术机器人的末端执行器，并计算安装髋臼锉后的工具坐标系；S102：通过手术导航系统确定所述髋臼锉在世界坐标系下的打磨终点位姿，并以打磨的最低点为原点建立新坐标系；其中，所述新坐标系原点坐标值为，定义所述新坐标系的+Z方向为：髋臼锉旋转轴垂直指向病人髋臼窝方向的相反方向，定义所述新坐标系的+X方向为：平行于所述工具坐标系+X坐标轴的方向，由+X和+Z方向计算出所述新坐标系的+Y方向；S103：记录所述髋臼锉的直径为：，并计算出所述髋臼锉圆心的打磨终点坐标值为：/＞，其中，/＞为髋臼锉的半径；S104：建立圆锥形的虚拟墙，并确定所述圆锥形虚拟墙尖端的坐标值；当所述髋臼锉在所述圆锥形虚拟墙内时，所述髋臼锉在与定线方向平行的Z轴方向运动的同时在XY平面有一定的活动范围，当所述髋臼锉与所述圆锥形虚拟墙发生干涉时，机械臂退回至与所述圆锥形虚拟墙无碰撞的空间，当所述髋臼锉在所述圆锥形虚拟墙外时，所述髋臼锉只能在与Z轴方向共线的方向上滑动；S105：根据所述圆锥形虚拟墙尖端的坐标位置构建所述圆锥形虚拟墙的表面任意一点的几何表达式；S106：实时计算一个控制时间步长后的所述髋臼锉的圆心在所述新坐标系下的坐标；S107：检测一个时间步长后的髋臼锉是否与所述圆锥形虚拟墙发生碰撞；如果会发生碰撞，计算出该时间步长内将要作用于机械臂末端的力的大小和方向，并取该力的反作用力，作用于机械臂上，使其活动范围不超出所述圆锥形虚拟墙边界；如果不发生碰撞，则髋臼锉保持原运动，直到到达目标位置。进一步地，S104中所述建立圆锥形的虚拟墙，并确定所述圆锥形虚拟墙尖端的坐标值，包括：如图2所示，定义所述圆锥形虚拟墙的开口角度，且所述圆锥形虚拟墙的边界与所述髋臼锉目标位置相切；根据三角函数求得所述圆锥形虚拟墙的尖端的Z坐标为：；计算所述圆锥形虚拟墙的尖端的坐标值为：。进一步地，S105中所述根据所述圆锥形虚拟墙尖端的坐标位置构建所述圆锥形虚拟墙的表面任意一点的几何表达式，包括：定义所述圆锥形虚拟墙表面任意一点的坐标为：；定义此点相对于所述圆锥形虚拟墙旋转轴的最短距离为；构建所述圆锥形虚拟墙表面的约束关系式： ；改变形式后可得： ；化简后可得： ；计算所述圆锥形虚拟墙表面的任意一点的坐标为： 。进一步地，S106中所述实时计算一个控制时间步长后的所述髋臼锉的圆心在所述新坐标系下的坐标，包括：在任意t1时刻，计算所述髋臼锉圆心的坐标为：；其中，为t1时刻所述髋臼锉圆心在X轴上的位置，/＞为t1时刻所述髋臼锉圆心在Y轴上的位置，/＞为t1时刻所述髋臼锉圆心在Z轴上的位置；获取机械臂末端实时控制的时间步长和在t1时刻速度向量/＞： ；其中，为t1时刻的速度向量/＞在X轴上的速度分向量，/＞为t1时刻的速度向量/＞在Y轴上的速度分向量，/＞为t1时刻的速度向量/＞在Z轴上的速度分向量；计算在t2时刻所述髋臼锉圆心的坐标： ；其中，为t2时刻所述髋臼锉圆心在X轴上的位置，/＞为t2时刻所述髋臼锉圆心在Y轴上的位置，/＞为t2时刻所述髋臼锉圆心在Z轴上的位置，t2为在t1时刻通过一个控制时间步长后的时刻。进一步地，S107中所述检测一个时间步长后的髋臼锉是否与所述圆锥形虚拟墙发生碰撞，包括：在t2时刻所述髋臼锉圆心在所述圆锥形虚拟墙表面上投影的Z坐标值为： ；此时所述髋臼锉圆心距离所述圆锥形虚拟墙表面的距离为：；做此距离与所述髋臼锉半径的差，化简后可得： ；根据此距离差判断是否发生碰撞： 。进一步地，S107中所述如果会发生碰撞，计算出该时间步长内将要作用于机械臂末端的力的大小和方向，并取该力的反作用力，作用于机械臂上，使其活动范围不超出所述圆锥形虚拟墙边界，包括：如图3所示，获取上一个时间步长期间的速度向量，用作计算此时间步长上的加速度：；其中，为此时间步长期间与上一个时间步长期间的速度向量差，/＞为上一个时间步长期间的速度向量，/＞为此时间步长期间的速度向量；获取机械臂末端的质量参数m，计算出将要作用于机械臂末端的力的大小：；取该力的反作用力，并作用于机械臂上，使其活动范围不超出所述圆锥形虚拟墙的边界。第二方面，本发明还提供一种虚拟墙引导末端执行器移动的装置，该装置包括：计算工具坐标系模块，用于计算机械臂末端安装髋臼锉后的工具坐标系；建立新坐标系模块，用于通过手术导航系统确定所述髋臼锉在世界坐标系下的打磨终点位姿，以打磨的最低点为原点建立新坐标系；计算髋臼锉目标位置模块，用于记录所述髋臼锉的直径，并计算出所述髋臼锉圆心的打磨终点坐标值；建立虚拟墙模块，用于建立圆锥形的虚拟墙，并确定所述圆锥形虚拟墙尖端的坐标值；计算虚拟墙表面点坐标值模块，用于根据所述圆锥形虚拟墙尖端的坐标位置构建所述圆锥形虚拟墙的表面任意一点的几何表达式；计算髋臼锉圆心坐标值模块，用于实时计算一个控制时间步长后的所述髋臼锉的圆心在所述新坐标系下的坐标；碰撞检测模块，用于检测一个时间步长后的髋臼锉是否与所述圆锥形虚拟墙发生碰撞。本发明提供一种虚拟墙引导末端执行器移动的方法及装置，所述方法通过在目标位置坐标系上构建一个圆锥形的虚拟墙边界，在边界内开放X轴和Y轴方向上的自由度，允许髋臼锉在与定线方向平行的Z轴方向上运动的同时在XY平面有一定的活动范围，便于医生在拖动髋臼锉时避开可能障碍物，最终到达规划的目标位姿，且在髋臼锉与虚拟墙发生干涉时，本发明中的算法会命令机械臂退回至与虚拟墙无碰撞的空间，保证手术过程中的安全性。与现有方案相比较，本发明在虚拟墙内所增加的XY平面自由度便于医生在拖动髋臼锉时避开可能障碍物，最终顺利到达指定的目标打磨位姿，使得医生不会因为理想打磨位姿不可达而放弃机械臂辅助，从而减少对医生操作经验的依赖度，有利于提高病人术后生活质量。虽然已经参考优选实施例对本发明进行了描述，但在不脱离本发明的范围的情况下，可以对其进行各种改进并且可以用等效物替换其中的部件。尤其是，只要不存在结构冲突，各个实施例中所提到的各项技术特征均可以任意方式组合起来。本发明并不局于文中公开的特定实施例，而是包括落入权利要求的范围内的所有技术方案。
