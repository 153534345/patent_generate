标题title
心电信号滤波方法、装置、计算机设备及存储介质
摘要abst
本申请实施例提供一种心电信号滤波方法、装置、计算机设备及存储介质。该方法包括：获取心电信号；将心电信号划分为至少两个信号片段；通过不同滤波参数对至少两个信号片段中的不同信号片段进行第一滤波处理，得到第一滤波后信号；对第一滤波后信号进行第二滤波处理，得到第二滤波后信号。本申请实施例提供的技术方案，对于不同信号片段，采用不同滤波参数对其进行第一滤波处理，得到第一滤波后信号；上述区别滤波方式既能达到滤波效果，也能保留心电信号的有效信息，实现心电信号的高保真，进而提高心电监测仪采集心电信号的信号质量、突出心电信号的特征信息，对临床依靠心电图机对心血管疾病进行实时诊断提供帮助。
权利要求书clms
1.一种心电信号滤波方法，其特征在于，所述方法包括：获取心电信号；将所述心电信号划分为至少两个信号片段；通过不同滤波参数对所述至少两个信号片段中的不同信号片段进行第一滤波处理，得到第一滤波后信号；对所述第一滤波后信号进行第二滤波处理，得到第二滤波后信号。2.根据权利要求1所述的方法，其特征在于，所述将所述心电信号划分为至少两个信号片段，包括：确定所述心电信号中的R波端点；基于与所述R波端点之间间隔的采样点数量，将所述心电信号划分为所述至少两个信号片段。3.根据权利要求2所述的方法，其特征在于，所述确定所述心电信号中的R波端点，包括：将所述心电信号中为极值点且为最值点的端点确定为第一候选端点；当所述第一候选端点中包括上下沿重合的至少两个所述第一候选端点时，基于所述第一候选端点的微分值、斜率、幅值中的至少一项，在第一目标候选端点和第二目标候选端点中确定出第二候选端点；基于动态微分阈值和动态噪声阈值，在所述第二候选端点中确定出所述R波端点；其中，所述上下沿重合的至少两个第一候选端点包括所述第一目标候选端点和所述第二目标候选端点；以所述第一目标候选端点为起点的信号片段，和以所述第二目标候选端点为终点的信号片段包括相同的采样点；或者，以所述第二目标候选端点为起点的信号片段，和以所述第一目标候选端点为终点的信号片段包括相同的采样点。4.根据权利要求2所述的方法，其特征在于，所述基于与所述R波端点之间间隔的采样点数量，将所述心电信号划分为所述至少两个信号片段，包括：将与所述R波端点之间间隔的采样点数量小于第一阈值的端点组成的信号片段，确定为第一信号片段；将与所述R波端点之间间隔的采样点数量大于所述第一阈值且小于第二阈值的端点组成的信号片段，确定为第二信号片段；将与所述R波端点之间间隔的采样点数量大于所述第二阈值的端点组成的信号片段，确定为第三信号片段；其中，所述第一阈值小于所述第二阈值。5.根据权利要求4所述的方法，其特征在于，所述通过不同滤波参数对所述至少两个信号片段中的不同信号片段进行第一滤波处理，得到第一滤波后信号，包括：通过第一滤波窗口对所述第一信号片段进行平滑滤波处理，通过第二滤波窗口对所述第二信号片段进行平滑滤波处理，通过第三滤波窗口对所述第三信号片段进行平滑滤波处理，得到所述第一滤波后信号；其中，所述第一滤波窗口的窗口宽度小于所述第三滤波窗口的窗口宽度，所述第二滤波窗口为渐变窗口，且所述第二滤波窗口的窗口宽度的取值为所述第一滤波窗口的窗口宽度至所述第三滤波窗口的窗口宽度。6.根据权利要求5所述的方法，其特征在于，所述通过第二滤波窗口对所述第二信号片段进行所述第一滤波处理之前，所述方法还包括：基于与所述R波端点之间间隔的采样点数量、所述第一阈值以及所述心电信号的采样率，确定所述第二滤波窗口的窗口宽度。7.根据权利要求1至6任一项所述的方法，其特征在于，所述对所述第一滤波后信号进行第二滤波处理，得到第二滤波后信号，包括：通过第四滤波窗口对所述第一滤波后信号进行基线滤波处理，得到第一基线信号，所述第四滤波窗口的窗口宽度大于所述心电信号中T波的宽度；获取所述第一滤波后信号与所述第一基线信号之间的差值，作为第一差值信号；通过第五滤波窗口对所述第一差值信号执行至少两轮滤波过程，得到第二基线信号，所述第五滤波窗口的窗口宽度大于所述心电信号中T波的宽度；将所述第一差值信号与所述第二基线信号之间的差值，确定为所述第二滤波后信号；其中，在所述至少两轮滤波过程中的第i轮滤波过程中，对于所述第一差值信号中的采样点，先通过所述第五滤波窗口中的最小值替换所述采样点的幅值，再通过所述第五滤波窗口中的最大值替换所述采样点的幅值；在所述至少两轮滤波过程中的第i+1轮滤波过程中，对于所述第i轮滤波过程得到的信号中的采样点，先通过所述第五滤波窗口中的最大值替换所述采样点的幅值，再通过所述第五滤波窗口中的最小值替换所述采样点的幅值，所述i为正整数。8.一种心电信号滤波装置，其特征在于，所述装置包括：信号获取模块，用于获取心电信号；信号片段划分模块，用于将所述心电信号划分为至少两个信号片段；第一滤波模块，用于通过不同滤波参数对所述至少两个信号片段中的不同信号片段进行第一滤波处理，得到第一滤波后信号；第二滤波模块，用于对所述第一滤波后信号进行第二滤波处理，得到第二滤波后信号。9.一种计算机设备，其特征在于，所述计算机设备包括处理器和存储器，所述存储器存储有计算机程序，所述计算机程序由所述处理器加载并执行如权利要求1至7任一项所述的心电信号滤波方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质中存储有计算机程序，所述计算机程序由处理器加载并执行以实现如权利要求1至7任一项所述的心电信号滤波方法。
说明书desc
技术领域本申请实施例涉及信号处理技术领域，特别涉及一种心电信号滤波方法、装置、计算机设备及存储介质。背景技术心电信号是指由心电图仪所记录的心脏活动时心肌激动产生的生物电信号。在心电信号采集时，受到人体、仪器等方面的影响，心电信号频段内通常会混入干扰信号，因此需要对心电信号进行滤波处理。在相关技术中，通常采用有限长单位冲激响应数字滤波、无限脉冲响应、快速傅立叶变换、小波变换等方法对心电信号进行滤波。在上述方法中，对心电信号进行滤波采用的均为固定带宽的滤波器。相关技术中，采用固定带宽的滤波器对心电信号进行滤波时，存在滤波不足以及将心电信号中有用的高频信息消弱等问题。发明内容本申请实施例提供一种心电信号滤波方法、装置、计算机设备及存储介质，减小滤波不足以及将心电信号中有用的高频信息消弱的发生概率。该技术方案包括：一方面，本申请实施例提供一种心电信号滤波方法，所述方法包括：获取心电信号；将所述心电信号划分为至少两个信号片段；通过不同滤波参数对所述至少两个信号片段中的不同信号片段进行第一滤波处理，得到第一滤波后信号；对所述第一滤波后信号进行第二滤波处理，得到第二滤波后信号。另一方面，本申请实施例提供一种心电信号滤波装置，所述装置包括：信号获取模块，用于获取心电信号；信号片段划分模块，用于将所述心电信号划分为至少两个信号片段；第一滤波模块，用于通过不同滤波参数对所述至少两个信号片段中的不同信号片段进行第一滤波处理，得到第一滤波后信号；第二滤波模块，用于对所述第一滤波后信号进行第二滤波处理，得到第二滤波后信号。又一方面，本申请实施例提供了一种计算机设备，所述计算机设备包括处理器和存储器，所述存储器存储有计算机程序，所述计算机程序由所述处理器加载并执行以实现如一方面所述的心电信号滤波方法。又一方面，本申请实施例提供了一种计算机可读存储介质，所述计算机可读存储介质中存储有计算机程序，所述计算机程序由处理器加载并执行以实现如一方面所述的心电信号滤波方法。又一方面，本申请实施例提供了一种计算机程序产品，该计算机程序产品或计算机程序包括计算机指令，该计算机指令存储在计算机可读存储介质中。计算机设备的处理器从计算机可读存储介质读取该计算机指令，处理器执行该计算机指令，使得该计算机设备执行上述心电信号滤波方法。本申请实施例提供的技术方案带来的有益效果至少包括：通过将心电信号划分为至少两个信号片段，对于不同信号片段，采用不同滤波参数对其进行平滑滤波处理，得到第一滤波后信号；上述区别滤波方式既能达到滤波效果，也能保留心电信号的有效信息，实现心电信号的高保真，进而提高心电监测仪采集心电信号的信号质量、突出心电信号的特征信息，对临床依靠心电图机对心血管疾病进行实时诊断提供帮助。附图说明图1是本申请一个实施例提供的心电信号的示意图；图2是本申请一个实施例提供的实施环境的示意图；图3是本申请一个实施例提供的心电信号滤波方法的流程图；图4是本申请一个实施例提供的确定R波端点的示意图；图5是本申请一个实施例提供的确定R波端点的流程图；图6是本申请一个实施例提供的心电信号滤波方法的流程图；图7是本申请一个实施例提供的心电信号滤波装置的框图；图8是本申请一个实施例提供的计算机设备的框图。具体实施方式为使本申请的目的、技术方案和优点更加清楚，下面将结合附图对本申请实施方式作进一步地详细描述。在介绍本申请实施例之前，先对本申请涉及的相关名词进行介绍。心电信号：由心电图仪所记录的心脏活动时心肌激动产生的生物电信号。参见图1，心电信号通常包括P波、QRS波群、T波。P波：反映心房激动过程中的电位变化，前半部代表右心房激动，后半部代表左心房的激动。正常心脏的电激动从窦房结开始，由于窦房结位于右心房与上腔静脉的交界处，因此窦房结的激动首先传导到右心房，通过房间束传到左心房，形成心电信号中的P波。QRS波群：反映左、右心室的电激动过程，QRS波群的宽度称为QRS时限，标识全部心室肌激动过程所需的时间。T波：反映心室肌复极化过程中的电位变化。本申请实施例提供的技术方案，通过将心电信号划分为至少两个信号片段，对于不同信号片段，采用不同滤波参数对其进行平滑滤波处理，得到第一滤波后信号；上述区别滤波方式既能达到滤波效果，也能保留心电信号的有效信息，实现心电信号的高保真，进而提高心电监测仪采集心电信号的信号质量、突出心电信号的特征信息，对临床依靠心电图机对心血管疾病进行实时诊断提供帮助。参考图2，心电监测仪采集心电信号21，通过本申请实施例提供的技术方案来对心电信号21进行滤波，得到第二滤波后信号22，第二滤波后信号22与心电信号21相比，大部分噪声被消除，心电信号21中的特征信息被突出。本申请实施例提供的技术方案，各步骤的执行主体为计算机设备。可选地，该计算机设备具有心电信号采集功能、心电信号滤波功能，以及心电信号展示功能。在其他可能的实现方式中，计算机设备不具备心电信号采集功能，而是与具有心电信号采集功能的仪器建立有通信连接，并从上述仪器中获取心电信号。可选地，该计算机设备为心电监测仪。请参考图3，其示出了本申请实施例提供的心电信号滤波方法的流程图。该方法包括：步骤301，获取心电信号。心电信号是指人体心脏的心脏细胞的细胞膜产生的电势差，正常的心电信号在0.05Hz--100Hz频率范围内。心电监测仪以人体心脏为中心，以人体体表为2D肢体导联平面，以人体额面为2D胸导联平面，进行心电信号采集，最终得到横坐标为时间，纵坐标为幅值的心电信号图形。心电监测仪采集心电信号的采样率，由心电监测仪默认设定，或者由相关医护人员自定义设定。步骤302，将心电信号划分为至少两个信号片段。心电信号被划分得到的信号片段的数量，根据心电信号的频率特征实际确定。示例性地，心电信号被划分为三个信号片段。在本申请实施例中，通过将心电信号划分为多个信号片段，针对不同信号片段采用不同的滤波参数，对频带内的心电信号进行区别滤波既能达到滤波效果，也能保留心电信号的有效信息，实现心电信号的高保真。在滤波之前，需要对心电信号进行准确划分。可选地，步骤302实现为：步骤302a，确定心电信号中的R波端点；R波端点是指心电信号中R波位置处的端点。R波位置处的端点通常是心电信号图形中的最高点，一方面较容易定位，另一方面不易受到其他端点的干扰，因此将其作为划分心电信号的起点。步骤302b，基于与R波端点之间间隔的采样点数量，将心电信号划分为至少两个信号片段。计算机设备基于与R波端点之间间隔的采样点数量，将心电信号划分为至少两个信号片段。各个采样点的时间-幅值形成心电信号图形，上述与R波端点之间间隔的采样点数量也即是心电信号图形中与R波端点之间的距离。在其他可能的实现方式中，计算机设备基于与R波端点之间的时间间隔将心电信号划分为至少两个信号片段。步骤303，通过不同滤波参数对所述至少两个信号片段中的不同信号片段进行第一滤波处理，得到第一滤波后信号。可选地，第一滤波处理是指平滑滤波处理。平滑滤波处理是低频增强的空间域滤波技术，包括邻域平滑滤波、中值滤波等等。在平滑滤波处理中，滤波窗口的窗口宽度与平滑效果直接相关，滤波窗口的窗口宽度越大，平滑效果越好，但滤波窗口的窗口宽度过大，平滑会使边缘信息损失越大，因此需合理选择滤波窗口的窗口宽度。在本申请实施例中，对于不同信号片段，采用不同滤波参数对其进行平滑滤波处理，得到第一滤波后信号。通过上述方式，既能达到滤波效果，也能保留心电信号的有效信息，实现心电信号的高保真，进而提高心电监测仪采集心电信号的信号质量、突出心电信号的特征信息，对临床依靠心电图机对心血管疾病进行实时诊断提供帮助。步骤304，对第一滤波后信号进行第二滤波处理，得到第二滤波后信号。第二滤波处理是指基线漂移滤波，也即通过滤波处理来处理心电信号中的基线漂移。综上所述，本申请实施例提供的技术方案，通过将心电信号划分为至少两个信号片段，对于不同信号片段，采用不同滤波参数对其进行平滑滤波处理，得到第一滤波后信号；上述区别滤波方式既能达到滤波效果，也能保留心电信号的有效信息，实现心电信号的高保真，进而提高心电监测仪采集心电信号的信号质量、突出心电信号的特征信息，对临床依靠心电图机对心血管疾病进行实时诊断提供帮助。在上文实施例中介绍到，对心电信号进行划分以R波对应的R波端点为起点，因此需要准确确定R波端点。下面对该过程进行讲解。在基于图3所示实施例提供的可选实施例中，步骤302a实现为如下子步骤：步骤302a1，将心电信号中为极值点且为最值点的端点确定为第一候选端点。极值点是指函数图像上的某段子区间内极大值点或极小值点的横坐标。极值点两侧的单调性不相同。若极值点的左侧单调递增，右侧单调递减，则该极值点为极大值点；若极值点的左侧单调递减，右侧单调递增，则该极值点为极小值点。最值点是指指定区间内的最大值点或最小值点的横坐标。计算机设备先确定心电信号中的极值点，之后以各个极值点为中心，取左右t1秒数据计算最值，若该极值点也为最值点，则将该极值点标记为端点D。T1的取值根据实际需求设定，本申请实施例对此不作限定。图4示出了本申请一个实施例提供的确定R波端点的示意图。在图4中，心电信号图形中的端点D1、D2、D3被确定为第一候选端点。步骤302a2，当第一候选端点中包括上下沿重合的至少两个第一候选端点时，基于第一候选端点的微分值、斜率、幅值中的至少一项，在第一目标候选端点和第二目标候选端点中确定出第二候选端点。上下沿重合的至少两个第一候选端点是指，以至少两个第一候选端点分别为端点的信号片段内包括相同的采样点。可选地，所述上下沿重合的至少两个第一候选端点包括第一目标候选端点和第二目标候选端点，以第一目标候选端点为起点的信号片段与以第二目标候选端点为终点的信号片段包括相同的采样点，或者，以第一目标候选端点为终点的信号片段与以第二目标候选端点为起点的信号片段包括相同的采样点。参考图4，以D3为起点的信号片段内包括Q2、S3两个采样点，以D2为终点的信号片段内也包括Q2、S3两个采样点，D3和D2是上下沿重合的两个第一候选端点；以D2为起点的信号片段内也包括Q1、S2两个采样点，以D1为终点的信号片段内也包括Q1、S2两个采样点，D2和D1也是上下沿重合的两个第一候选端点。第一候选端点的微分值是指在第一候选端点处的极限。第一候选端点的斜率描述第一候选端点的变化率。第一候选端点的幅值也即是采集到的心电信号图形中第一候选端点对应的纵坐标。可选地，当第一候选端点中包括上下沿重合的至少两个第一候选端点时，基于第一候选端点的微分值、斜率、幅值以及预设筛选规则，在上下沿重合的至少两个第一候选端点确定第二候选端点。预设筛选规则包括以下至少一项：第二目标候选端点的右侧斜率大于第一目标候选端点的左侧斜率与第一系数的乘积，且第二目标候选端点的左侧斜率大于第一目标候选端点的右侧斜率；或者，第二目标候选端点的右侧斜率大于第一目标候选端点的左侧斜率与第一系数的乘积，且第二目标候选端点的左侧幅值大于第一目标候选端点的右侧幅值；第一系数根据实际需求设定。第二目标候选端点的右侧斜率大于第一目标候选端点的左侧斜率与第二系数的乘积。第一目标候选端点的左侧斜率大于第二目标候选端点的右侧斜率与第三系数的乘积，且第二目标候选端点的右侧斜率大于第一目标候选端点的右侧斜率与第四系数的乘积；或者，第二目标候选端点的左侧幅值大于第一目标候选端点的右侧幅值，且第一目标候选端点的右侧幅值小于第一目标候选端点的左侧幅值与第五系数的乘积。第二目标候选端点的右侧斜率小于第一目标候选端点的右侧斜率与第六系数的乘积，且第一目标候选端点的左侧斜率小于第二目标候选端点的右侧斜率与第七系数的乘积，且第二目标候选端点的微分值大于第一目标候选端点的微分值。若第一目标候选端点和第二目标候选端点满足上述任意一项，则将第二目标候选端点确定为第二候选端点；若第一目标候选端点和第二目标候选端点均不满足上述预设筛选规则，则将第一目标候选端点确定为第二候选端点；参见图4，D1和D2是上下沿重合的第一候选端点，D1为第一目标候选端点，D2为第二目标候选端点。D1的左侧斜率为l_slope1，右侧斜率为r_slope1，左侧幅值为l_amp1，右侧幅值为r_amp1，微分值为D_val1；D2的左侧斜率为l_slope2，右侧斜率为r_slope2，左侧幅值为l_amp2，右侧幅值为r_amp2，微分值为D_val2。预设筛选规则如下：r_slope2＞＝1.5*l_slope1且；r_slope2＞＝2.5*l_slope1；r_slope2*1.5＜l_slope1且)；r_slope2＜l_slope1*1.5且r_slope2*1.5＞＝l_slope1且D_val2＞D_val1。在图4中，对于D2和D3这一对上下沿重合的第一候选端点，基于预设筛选规则保留D2，去除D3，对于D1和D2这一对上下沿重合的第一候选端点，基于预设筛选规则保留D1，去除D2。也即，D1被确定为第二候选端点。计算机设备在端点D左右t2内逐点做二阶微分，将左右两边二阶微分值的绝对值的最大值之和作为端点D的微分值，其他端点的微分值默认为0。之后，计算机设备在左右两边的最大微分值处分别向两边延伸确定微分值发生突变的端点，记为Q点或S点，若两个端点D的Q-S范围存在重合，则基于上述两个端点的微分值、斜率、幅值对上述两个端点D进行过滤，不满足过滤条件的端点D被淘汰，将被淘汰的端点D的微分值更新为0，被保留的端点D记为R/。步骤302a3,基于动态微分阈值和动态噪声阈值，在第二候选端点中确定出R波端点。计算机设备先确定初始微分阈值和初始噪声阈值。初始微分阈值根据第一常数以及参考微分值确定。可选地，初始微分阈值为a*R_val。其中，a为第一常数，R_val为参考微分值。a的取值根据实际需求设定，示例性地，a为0.5。初始噪声阈值noisy_val为0。计算机设备先在第二候选端点中选择出微分值大于初始微分阈值且大于初始噪声阈值的第二候选端点，之后基于相邻两个中间候选端点之间的时间间隔，在上述相邻两个中间候选端点中去除一个第二候选端点，重复上述步骤，最终被剩下的第二候选端点也即是R波端点。去除规则如下：若相邻两个中间候选端点之间的时间间隔小于第一时间阈值或大于第二时间阈值，则将微分值较小的中间候选端点确定为噪声端点，并去除。若相邻两个中间候选端点之间的时间间隔大于第一时间阈值且小于第二时间阈值，则基于相邻两个中间候选端点的微分值、斜率和动态微分阈值进行筛选，将相邻两个中间候选端点中微分值大于动态微分阈值且大于噪声阈值的中间候选端点保留，另一中间候选端点被确定为噪声端点并去除。动态微分阈值与相邻两个中间候选端点之间的时间间隔呈负相关关系。可选地，动态微分阈值thresh通过如下公式表示：其中，t4是第二时间阈值，t3是第一时间阈值，st是邻两个中间候选端点之间的时间间隔，0.2是初始微分阈值。在此过程中，计算机设备在确定出噪声端点后，若噪声端点的微分值大于初始噪声阈值，且小于第二常数与参考微分阈值的乘积以及第三常数与被保留的中间候选端点的微分值之间的乘积，则将噪声端点的微分值更新为噪声阈值。假设Q'为噪声端点，若Q'的微分值大于noise_val且小于b*R_val和c*R”_val，则将Q'的微分值更新为噪声阈值。b为第二常数，其取值根据实际需求设定。c为第三常数，其取值根据实际需求设定。R”_val是指被保留的中间候选端点的微分值。参考图5，其示出了本申请一个实施例提供的确定R波端点的流程图。该步流程包括如下步骤：步骤501，确定既为极值且为最值的第一候选端点。步骤502，计算各个第一候选端点的微分值、左右两边的幅值和斜率。步骤503，判断相邻两个第一候选端点是否上下沿重合。也即，确定相邻两个第一候选端点分别对应的信号片段内是否存在相同的采样点Q、S。若相邻两个第一候选端点上下沿重合，则执行步骤504，若相邻两个第一候选端点上下沿不重合，则将上述相邻两个第一候选端点确定为第二候选端点。步骤504，基于相邻两个第一候选端点的微分值、幅值和斜率来确定第二候选端点。步骤505，通过动态微分阈值和动态噪声阈值在第二候选端点中确定R波端点。步骤506，保存R波端点的微分值、斜率、幅值和绝对位置。综上所述，本申请实施例提供的技术方案，通过逐层筛选来确定R波端点所处的位置，使确定出的R波端点更为准确。在一种可能的实现中，计算机设备基于与R波端点之间间隔的采样点数量将心电信号被划分为三个信号片段。图6示出了本申请一个实施例提供的心电信号滤波方法的流程图，该方法包括：步骤601，获取心电信号。步骤602，确定心电信号中R波对应的R波端点。步骤603，将与R波端点之间间隔的采样点数量小于第一阈值的端点组成的信号片段，确定为第一信号片段。第一阈值根据心电信号的频率特征实际确定，本申请实施例对此不作限定。步骤604，将与R波端点之间间隔的采样点数量大于第一阈值且小于第二阈值的端点组成的信号片段，确定为第二信号片段。第二阈值根据心电信号的频率特征实际确定，本申请实施例对此不作限定。第一阈值小于第二阈值。步骤605，将与R波端点之间间隔的采样点数量大于第二阈值的端点组成的信号片段，确定为第三信号片段。可选地，将心电信号划分为第一信号片段、第二信号片段和第三信号片段通过如下公式来表示：L1，S＜S1；L2，S1＜＝S＜/2+S1；L3，/2+S1＜S。L1是第一信号片段，S是信号片段内的端点与R波端点之间间隔的采样点数量，S1是第一阈值；L2是第二信号片段，/2+S1)是第二阈值，windows2是指第三信号片段对应的滤波窗口的窗口大小，T是心电信号的采样率；L3是第三信号片段。在基于图3所示实施例提供的可选实施例中，步骤302a替换实现为步骤602-605。在其它可能的实现方式中，计算机设备基于与R波端点之间的时间间隔将心电信号划分为第一信号片段、第二信号片段和第三信号片段。可选地，计算机设备将与R波端点之间的时间间隔小于第三时间阈值的端点所组成的信号片段，确定为第一信号片段；将与R波端点之间的时间间隔大于第三时间阈值且小于第四时间阈值的端点所组成的信号片段，确定为第二信号片段；将与R波端点之间的时间间隔大于第四时间阈值的端点所组成的信号片段，确定为第三信号片段。第三时间阈值小于第四时间阈值。第三时间阈值和第四时间阈值根据心电信号的频率特征实际确定，本申请实施例对此不作限定。步骤606，通过第一滤波窗口对第一信号片段进行第一滤波处理，通过第二滤波窗口对第二信号片段进行第一滤波处理，通过第三滤波窗口对第三信号片段进行第一滤波处理，得到第一滤波后信号。滤波窗口的窗口宽度通过该滤波窗口内的采样点数量来量化。第一滤波窗口的窗口宽度小于第三滤波窗口的窗口宽度。第二滤波窗口为渐变窗口。第二滤波窗口的窗口宽度的取值是第一滤波窗口的窗口宽度至第三滤波窗口的窗口宽度。也即，第二滤波窗口的窗口宽度由第一滤波窗口的窗口宽度逐渐增大至第三滤波窗口的窗口宽度，或者，第二滤波窗口的窗口宽度由第三滤波窗口的窗口宽度逐渐减小至第一滤波窗口的窗口宽度。可选地，第一滤波窗口的窗口宽度为第八系数与采样率的乘积，也即第一滤波窗口的窗口宽K1＝d*T，d为第八系数。示例性地，d为0.02。渐变窗口是指该滤波窗口的窗口宽度是变化的。可选地，在通过第二滤波窗口对第二信号片段进行第一滤波处理之前，计算机设备基于与R波端点之间间隔的采样点数量、第一阈值以及心电信号的采样率，确定第二滤波窗口的窗口宽度。可选地，第二滤波窗口的窗口宽度K2通过如下公式表示：K2＝*2+0.02*T。其中，S是与R波端点之间间隔的采样点数量，S1是第一阈值，T是心电信号的采样率。可选地，第三滤波窗口的窗口宽度为第九系数与采样率的乘积，也即第一滤波窗口的窗口宽K3＝e*T，e为第九系数。第八系数小于第九系数。示例性地，e的取值在0.06至0.12之间。可选地，第三滤波窗口的窗口宽度小于心电信号中T波的宽度。可选地，对第一信号片段、第二信号片段、第三信号片段分别进行滤波时采样的矩阵参数A基于滤波窗口的窗口宽度和拟合阶数计算得到。该过程通过如下公式表示：B＝X*-1*XT；A＝B。当对第一信号片段进行滤波，step＝K1/2；当对第二信号片段进行滤波，step＝K2/2；当对第三信号片段进行滤波，step＝K3/2。在心电信号中，第一信号片段属于高频特征信号，采用小窗口对第一信号片段进行滤波，保证心电信号中的QRS波不失真。心电信号中的第三信号片段属于低频特征信号，采用大窗口对第三信号片段进行滤波，既可以很好地拟合带内噪声，又可以不损失有用信息。心电信号中的第二信号片段属于高频特征信号与低频特征信号的过度段，由于对第一信号片段信号滤波时采用的滤波参数与对第三信号片段信号滤波时采用的滤波参数存在较大差异，为保证带内滤波效果且保证第一信号片段、第二信号片段及第三信号片段滤波后信号交界处不存在突变，因此采用渐变窗口对第二信号片段进行平滑滤波。在基于图3所示实施例提供的可选实施例中，步骤303替换实现为步骤606。步骤607，通过第四滤波窗口对第一滤波后信号进行基线滤波处理，得到第一基线信号。第四滤波窗口的窗口宽度大于心电信号中T波的宽度。计算机设备计算基线拟合矩阵参数并采用大窗口进行基线漂移滤波，得到第一基线信号。基线漂移滤波包括线性基线漂移滤波和非线性漂移滤波。步骤608，获取第一滤波后信号与第一基线信号之间的差值，作为第一差值信号。计算机设备将第一滤波后信号减去第一基线信号，得到第一差值信号。步骤609，通过第五滤波窗口对第一差值信号执行至少两轮滤波过程，得到第二基线信号。第五滤波窗口的窗口宽度大于心电信号中T波的宽度。计算机设备计算基线拟合矩阵参数并大窗口进行基线漂移滤波后，可以去除线性和非线性基线漂移，但是心电信号的波形无法完全从基线漂移中恢复，因此需要进一步进行基线矫正。在至少两轮滤波过程中的第i轮滤波过程中，对于第一差值信号中的采样点，先通过第五滤波窗口中的最小值替换采样点的幅值，再通过第五滤波窗口中的最大值替换采样点的幅值；在至少两轮滤波过程中的第i+1轮滤波过程中，对于第i轮滤波过程得到的信号中的采样点，先通过第五滤波窗口中的最大值替换采样点的幅值，再通过第五滤波窗口中的最小值替换采样点的幅值，i为正整数。示例性地，对于心电信号1，通过第五滤波窗口中的最小值替换各个采样点的幅值，得到心电信号2；对于心电信号2，通过第五滤波窗口中的最大值替换各个采样点的幅值，得到心电信号3；对于心电信号3，通过第五滤波窗口中的最大值替换各个采样点的幅值，得到心电信号4；对于心电信号5，通过第五滤波窗口中的最小值替换各个采样点的幅值，得到心电信号5。心电信号5也即是矫正后的基线。步骤610，将第一差值信号与第二基线信号之间的差值，确定为第二滤波后信号。计算机设备将第一差值信号减去第二基线信号，得到第二滤波后信号。综上所述，本申请实施例提供的技术方案，采用小窗口对心电信号中的高频特征信号片段滤波，保证心电信号中的QRS波不失真，采用大窗口对心电信号中的低频特征信号片段滤波，既可以很好地拟合带内噪声，又可以不损失有用信息，采用渐变窗口对高频特征信号与低频特征信号之间的过度信号片段滤波，既保证带内滤波效果且保证不同信号片段滤波后信号交界处不存在突变。还通过对第一滤波后信号进行基线漂移滤波后，对第一滤波后信号进行基线矫正，使基线更加稳定，减小双向T波和U波出现等心电信号特征信息扭曲的问题的出现概率。以下为本申请装置实施例，对于装置实施例中未详细阐述的部分，参考上述方法实施例中公开的技术细节。参考图7，示出了本申请一个示例性实施例提供的心电信号滤波装置的框图。该心电信号滤波装置通过软件、硬件或者两者的组合实现成为终端的全部或一部分。该心电信号滤波装置包括：信号获取模块701，用于获取心电信号。信号片段划分模块702，用于将所述心电信号划分为至少两个信号片段。第一滤波模块703，用于通过不同滤波参数对所述至少两个信号片段中的不同信号片段进行第一滤波处理，得到第一滤波后信号。第二滤波模块704，用于对所述第一滤波后信号进行第二滤波处理，得到第二滤波后信号。综上所述，本申请实施例提供的技术方案，通过将心电信号划分为至少两个信号片段，对于不同信号片段，采用不同滤波参数对其进行平滑滤波处理，得到第一滤波后信号；上述区别滤波方式既能达到滤波效果，也能保留心电信号的有效信息，实现心电信号的高保真，进而提高心电监测仪采集心电信号的信号质量、突出心电信号的特征信息，对临床依靠心电图机对心血管疾病进行实时诊断提供帮助。基于图7所示实施例提供的一个可选实施例中，所述信号片段划分模块702，用于：确定所述心电信号中的R波端点；基于与所述R波端点之间间隔的采样点数量，将所述心电信号划分为所述至少两个信号片段。可选地，所述信号片段划分模块702，用于：将所述心电信号中为极值点且为最值点的端点确定为第一候选端点；当所述第一候选端点中包括上下沿重合的至少两个所述第一候选端点时，基于所述第一候选端点的微分值、斜率、幅值，在第一目标候选端点和第二目标候选端点中确定出第二候选端点；基于动态微分阈值和动态噪声阈值，在所述第二候选端点中确定出所述R波端点；其中，所述上下沿重合的至少两个第一候选端点包括所述第一目标候选端点和所述第二目标候选端点；以所述第一目标候选端点为起点的信号片段，和以所述第二目标候选端点为终点的信号片段包括相同的采样点；或者，以所述第二目标候选端点为起点的信号片段，和以所述第一目标候选端点为终点的信号片段包括相同的采样点。可选地，所述信号片段划分模块702，用于：将与所述R波端点之间间隔的采样点数量小于第一阈值的端点组成的信号片段，确定为第一信号片段；将与所述R波端点之间间隔的采样点数量大于所述第一阈值且小于第二阈值的端点组成的信号片段，确定为第二信号片段；将与所述R波端点之间间隔的采样点数量大于所述第二阈值的端点组成的信号片段，确定为第三信号片段；其中，所述第一阈值小于所述第二阈值。可选地，所述第一滤波模块703，用于：通过第一滤波窗口对所述第一信号片段进行平滑滤波处理，通过第二滤波窗口对所述第二信号片段进行平滑滤波处理，通过第三滤波窗口对所述第三信号片段进行平滑滤波处理，得到所述第一滤波后信号；其中，所述第一滤波窗口的窗口宽度小于所述第三滤波窗口的窗口宽度，所述第二滤波窗口为渐变窗口，且所述第二滤波窗口的窗口宽度的取值为所述第一滤波窗口的窗口宽度至所述第三滤波窗口的窗口宽度。可选地，所述装置还包括：窗口宽度确定模块。窗口宽度确定模块，用于基于与所述R波端点之间间隔的采样点数量、所述第一阈值以及所述心电信号的采样率，确定所述第二滤波窗口的窗口宽度。基于图7所示实施例提供的一个可选实施例中，所述第二滤波模块704，用于：通过第四滤波窗口对所述第一滤波后信号进行基线滤波处理，得到第一基线信号，所述第四滤波窗口的窗口宽度大于所述心电信号中T波的宽度；获取所述第一滤波后信号与所述第一基线信号之间的差值，作为第一差值信号；通过第五滤波窗口对所述第一差值信号执行至少两轮滤波过程，得到第二基线信号，所述第五滤波窗口的窗口宽度大于所述心电信号中T波的宽度；将所述第一差值信号与所述第二基线信号之间的差值，确定为所述第二滤波后信号；其中，在所述至少两轮滤波过程中的第i轮滤波过程中，对于所述第一差值信号中的采样点，先通过所述第五滤波窗口中的最小值替换所述采样点的幅值，再通过所述第五滤波窗口中的最大值替换所述采样点的幅值；在所述至少两轮滤波过程中的第i+1轮滤波过程中，对于所述第i轮滤波过程得到的信号中的采样点，先通过所述第五滤波窗口中的最大值替换所述采样点的幅值，再通过所述第五滤波窗口中的最小值替换所述采样点的幅值，所述i为正整数。图8示出了本申请一个示例性实施例提供的计算机设备800的结构框图。该计算机设备800可以是心电监测仪。通常，计算机设备800包括有：处理器801和存储器802。处理器801可以包括一个或多个处理核心，比如4核心处理器、8核心处理器等。处理器801可以采用数字信号处理、现场可编程门阵列、可编程逻辑阵列中的至少一种硬件形式来实现。处理器801也可以包括主处理器和协处理器，主处理器是用于对在唤醒状态下的数据进行处理的处理器，也称中央处理器；协处理器是用于对在待机状态下的数据进行处理的低功耗处理器。在一些实施例中，处理器801可以在集成有图像处理器，GPU用于负责显示屏所需要显示的内容的渲染和绘制。存储器802可以包括一个或多个计算机可读存储介质，该计算机可读存储介质可以是非暂态的。存储器802还可包括高速随机存取存储器，以及非易失性存储器，比如一个或多个磁盘存储设备、闪存存储设备。在一些实施例中，存储器802中的非暂态的计算机可读存储介质用于存储计算机程序，该计算机程序用于被处理器801所执行以实现本申请中方法实施例提供的心电信号滤波方法。在一些实施例中，计算机设备800还可选包括有：外围设备接口803和至少一个外围设备。处理器801、存储器802和外围设备接口803之间可以通过总线或信号线相连。各个外围设备可以通过总线、信号线或电路板与外围设备接口803相连。具体地，外围设备包括：射频电路804、显示屏805、摄像头组件806、音频电路807、定位组件808和电源809中的至少一种。本领域技术人员可以理解，图8中示出的结构并不构成对计算机设备800的限定，可以包括比图示更多或更少的组件，或者组合某些组件，或者采用不同的组件布置。在示例性实施例中，还提供了一种计算机可读存储介质，所述计算机可读存储介质中存储有计算机程序，所述计算机程序由终端的处理器加载并执行以实现上述方法实施例中的心电信号滤波方法。可选地，上述计算机可读存储介质可以是只读存储器、随机存取存储器、磁带、软盘和光数据存储设备等。在示例性实施例中，还提供了一种计算机程序产品，该计算机程序产品包括计算机指令，该计算机指令存储在计算机可读存储介质中，计算机设备的处理器从计算机可读存储介质读取该计算机指令，处理器执行该计算机指令，使得该计算机设备执行上述心电信号滤波方法。应当理解的是，在本文中提及的“多个”是指两个或两个以上。“和/或”，描述关联对象的关联关系，表示可以存在三种关系，例如，A和/或B，可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。字符“/”一般表示前后关联对象是一种“或”的关系。本文中使用的“第一”、“第二”以及类似的词语并不表示任何顺序、数量或者重要性，而只是用来区分不同的组成部分。上述本申请实施例序号仅仅为了描述，不代表实施例的优劣。以上所述仅为本申请的示例性实施例，并不用以限制本申请，凡在本申请的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。
