标题title
超声成像方法、装置、超声成像设备及存储介质
摘要abst
本发明涉及成像技术领域，公开了一种超声成像方法、装置、超声成像设备及存储介质，其中，该方法包括：获取超声扫描分辨率以及超声扫描过程中所产生的每帧图像的扫描线数；对扫描线数进行块划分，确定每块的目标缓存线数；当完成针对于当前块的目标缓存线数的数据缓存时，基于超声扫描分辨率与目标缓存线数，确定当前块对应的目标像素；基于目标像素进行数字成像处理，生成目标超声图像。通过实施本发明技术方案，能够平衡逻辑资源和处理能力，避免因资源紧张或处理能力不足而影响超声成像，同时在逻辑上实现了任意分辨率的数字成像，降低了对于上位机的性能要求，保证了超声成像是的稳定性。
权利要求书clms
1.一种超声成像方法，其特征在于，所述方法包括：获取超声扫描分辨率以及超声扫描过程中所产生的每帧图像的扫描线数；对所述扫描线数进行块划分，确定每块的目标缓存线数；当完成针对于当前块的所述目标缓存线数的数据缓存时，基于所述超声扫描分辨率与所述目标缓存线数，确定所述当前块对应的目标像素；基于所述目标像素进行数字成像处理，生成目标超声图像。2.根据权利要求1所述的方法，其特征在于，所述对所述扫描线数进行块划分，确定每块的目标缓存线数，包括：获取针对于所述扫描线数的预设划分块数；基于所述预设划分块数对所述扫描线数进行均匀划分，得到每块所对应的所述目标缓存线数。3.根据权利要求2所述的方法，其特征在于，所述基于所述预设划分块数对所述扫描线数进行均匀划分，得到每块所对应的所述目标缓存线数，包括：按照所述预设划分块数对所述扫描线数进行均匀划分，确定每块的扫描线条数；获取每块对应的前一相邻块和后一相邻块，并确定所述前一相邻块中的最后一线以及所述后一相邻块中的第一线；将所述最后一线、所述第一线以及所述扫描线条数，确定为所述目标缓存线数。4.根据权利要求1所述的方法，其特征在于，所述当完成针对于当前块的所述目标缓存线数的数据缓存时，基于所述超声扫描分辨率与所述目标缓存线数，确定所述当前块对应的目标像素，包括：当完成针对于当前块的所述目标缓存线数的数据缓存时，确定所述当前块中每个像素点的位置；基于所述每个像素点的位置，确定所述每个像素点所处的相邻目标扫描线；基于所述每个像素点的位置以及所述相邻目标扫描线，确定所述每个像素点对应的目标像素。5.根据权利要求4所述的方法，其特征在于，所述确定所述当前块中每个像素点的位置，包括：基于所述超声扫描分辨率确定成像半径；基于所述成像半径对所述当前块中的像素点进行计数，确定每个像素点的位置。6.根据权利要求5所述的方法，其特征在于，所述基于所述每个像素点的位置，确定所述每个像素点所处的相邻目标扫描线，包括：基于所述扫描线数确定线角度参数；基于所述每个像素点的位置与所述线角度参数，确定出所述每个像素点所处的所述相邻目标扫描线以及扫描线系数。7.根据权利要求6所述的方法，其特征在于，所述基于所述每个像素点的位置以及所述相邻目标扫描线，确定所述每个像素点对应的目标像素，包括：获取中心像素点的位置，确定所述每个像素点相对于所述中心像素点的目标距离；基于所述成像半径确定空间映射参数；基于所述目标距离与所述空间映射参数，确定针对于所述每个像素点对应的像素深度以及深度系数；基于所述相邻目标扫描线、所述扫描线系数、所述像素深度以及所述深度系数，按照双线性插值方式确定所述每个像素点的目标像素。8.根据权利要求7所述的方法，其特征在于，还包括：检测所述目标距离是否大于所述成像半径；当所述目标距离大于所述成像半径时，将所述目标像素的值置为预设值；当所述目标距离小于等于所述成像半径时，执行所述按照双线性插值方式确定所述每个像素点的目标像素的步骤。9.一种超声成像设备，其特征在于，包括：存储器和处理器，所述存储器和所述处理器之间互相通信连接，所述存储器中存储有计算机指令，所述处理器通过执行所述计算机指令，从而执行权利要求1至8中任一项所述的超声成像方法。10.一种计算机可读存储介质，其特征在于，所述计算机可读存储介质上存储有计算机指令，所述计算机指令用于使计算机执行权利要求1至8中任一项所述的超声成像方法。
说明书desc
技术领域本发明涉及成像技术领域，具体涉及一种超声成像方法、装置、超声成像设备及存储介质。背景技术超声成像是利用超声波束扫描人体器官，通过对超声回波信号的接收、数字信号处理、数字成像处理生成二维图像。目前，多是采用FPGA控制超声波束的扫描、超声回波信号的接收，由上位机完成数字信号处理以及数字成像处理，并由显示系统以进行超声图像的显示。但是，相关技术中的超声成像系统主要是通过资源强大的上位机或者操作平台实现，当设备小型化或实现降资源时，需要对超声系统进行简化，但资源紧张或处理能力弱的系统则出现卡顿或者崩溃的问题，难以满足超声成像的稳定性。发明内容有鉴于此，本发明实施例提供了一种超声成像方法、装置、超声成像设备及存储介质，以解决资源紧张或处理能力弱时，超声成像的稳定性欠佳的问题。第一方面，本发明实施例提供了一种超声成像方法，该方法包括：获取超声扫描分辨率以及超声扫描过程中所产生的每帧图像的扫描线数；对扫描线数进行块划分，确定每块的目标缓存线数；当完成针对于当前块的目标缓存线数的数据缓存时，基于超声扫描分辨率与目标缓存线数，确定当前块对应的目标像素；基于目标像素进行数字成像处理，生成目标超声图像。本发明实施例提供的超声成像方法，通过对每帧图像的扫描线数进行块划分，得到每块所需缓存的目标缓存线数，结合超声扫描分辨率与目标缓存线数依次计算每块的目标像素，继而根据计算出的目标像素进行数字成像数据，由此通过将每帧图像对应的扫描数据分多块执行，能够平衡逻辑资源和处理能力，避免因资源紧张或处理能力不足而影响超声成像，同时在逻辑上实现了任意分辨率的数字成像，降低了对于上位机的性能要求，保证了超声成像是的稳定性。在一种可选的实施方式中，对扫描线数进行块划分，确定每块的目标缓存线数，包括：获取针对于扫描线数的预设划分块数；基于预设划分块数对扫描线数进行均匀划分，得到每块所对应的目标缓存线数。本发明实施例提供的超声成像方法，通过对扫描线数进行均匀划分，能够更好平衡逻辑资源消耗，有利于保证后续的超声成像稳定性，避免卡顿或崩溃。在一种可选的实施方式中，基于预设划分块数对扫描线数进行均匀划分，得到每块所对应的目标缓存线数，包括：按照预设划分块数对扫描线数进行均匀划分，确定每块的扫描线条数；获取每块对应的前一相邻块和后一相邻块，并确定前一相邻块中的最后一线以及后一相邻块中的第一线；将最后一线、第一线以及扫描线条数，确定为目标缓存线数。本发明实施例提供的超声成像方法，通过确定每块的扫描线条数、前一相邻块中的最后一线以及后一相邻块中的第一线，并将最后一线、第一线以及扫描线条数，确定最终的目标缓存线数，由此只要当一个块的目标缓存线数满足后即可进行像素的计算，无需等待接收完整一帧图像的扫描线数据，不仅保证了像素计算的连续性，而且节省了像素计算资源的消耗。在一种可选的实施方式中，当完成针对于当前块的目标缓存线数的数据缓存时，基于超声扫描分辨率与目标缓存线数，确定当前块对应的目标像素，包括：当完成针对于当前块的目标缓存线数的数据缓存时，确定当前块中每个像素点的位置；基于每个像素点的位置，确定每个像素点所处的相邻目标扫描线；基于每个像素点的位置以及相邻目标扫描线，确定每个像素点对应的目标像素。本发明实施例提供的超声成像方法，通过当前块中每个像素点的位置以及超声扫描分辨率，确定每个像素点对应的相邻目标扫描线，进而能够计算到每个像素点对应的目标像素值。由此，缓存完一块扫描线数据即可计算一块目标像素，相较于整体计算而言，大大节省了计算量，减少了逻辑资源消耗。在一种可选的实施方式中，确定当前块中每个像素点的位置，包括：基于超声扫描分辨率确定成像半径；基于成像半径对当前块中的像素点进行计数，确定每个像素点的位置。本发明实施例提供的超声成像方法，结合超声扫描分辨率确定成像半径，由此对成像半径内的像素点进行计数，由此能够确定出各块中每个像素点的位置，由此能够根据不同的超声扫描分辨率进行数字成像，实现了超声扫描分辨率的灵活设置。在一种可选的实施方式中，基于每个像素点的位置，确定每个像素点所处的相邻目标扫描线，包括：基于扫描线数确定线角度参数；基于每个像素点的位置与线角度参数，确定出每个像素点所处的相邻目标扫描线以及扫描线系数。本发明实施例提供的超声成像方法，根据扫描线数确定扫描过程中的线角度参数，再根据每个像素点的位置与线角度参数，确定出每个像素点所处的相邻目标扫描线以及扫描线系数，便于结合每个像素点所处的相邻目标扫描线以及扫描线系数，对每个像素点的目标像素进行准确计算，由此保证了超声成像的准确度。在一种可选的实施方式中，基于每个像素点的位置以及相邻目标扫描线，确定每个像素点对应的目标像素，包括：获取中心像素点的位置，确定每个像素点相对于中心像素点的目标距离；基于成像半径确定空间映射参数；基于目标距离与空间映射参数，确定针对于每个像素点对应的像素深度以及深度系数；基于相邻目标扫描线、扫描线系数、像素深度以及深度系数，按照双线性插值方式确定每个像素点的目标像素。本发明实施例提供的超声成像方法，通过中心像素点的位置以及每个像素点的位置，确定两者之间的目标距离，继而结合成像半径确定空间映射参数，从而根据目标距离以及空间映射参数，确定每个像素点在成像时的目标像素，使得目标像素的计算更加精准，保证了后续的超声成像效果。在一种可选的实施方式中，该方法还包括：检测目标距离是否大于成像半径；当目标距离大于成像半径时，将目标像素的值置为预设值；当目标距离小于等于成像半径时，执行按照双线性插值方式确定每个像素点的目标像素的步骤。本发明实施例提供的超声成像方法，通过确定每个像素点相对于中心像素点的目标距离，并检测目标距离与成像半径之间的关系，根据目标距离与成像半径之间的关系，确定每个像素点在成像半径中像素值，由此能够在成像半径内进行准确成像，保证了超声成像效果。第二方面，本发明实施例提供了一种超声成像装置，该装置包括：获取模块，用于获取超声扫描分辨率以及超声扫描过程中所产生的每帧图像的扫描线数；划分模块，用于对扫描线数进行块划分，确定每块的目标缓存线数；像素确定模块，用于当完成针对于当前块的目标缓存线数的数据缓存时，基于超声扫描分辨率与目标缓存线数，确定当前块对应的目标像素；图像生成模块，用于基于目标像素进行数字成像处理，生成目标超声图像。第三方面，本发明实施例提供了一种超声成像设备，包括：存储器和处理器，存储器和处理器之间互相通信连接，存储器中存储有计算机指令，处理器通过执行计算机指令，从而执行上述第一方面或其对应的任一实施方式的超声成像方法。第四方面，本发明实施例提供了一种计算机可读存储介质，该计算机可读存储介质上存储有计算机指令，计算机指令用于使计算机执行上述第一方面或其对应的任一实施方式的超声成像方法。附图说明为了更清楚地说明本发明具体实施方式或现有技术中的技术方案，下面将对具体实施方式或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施方式，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是根据本发明一些实施例的超声成像方法的流程示意图；图2是根据本发明一些实施例的另一超声成像方法的流程示意图；图3是根据本发明一些实施例的扫描线数与象限的对应示意图；图4是根据本发明一些实施例的扫描线与缓存块的对应示意图；图5是根据本发明一些实施例的每个象限的目标像素的计算顺序示意图；图6是根据本发明一些实施例的像素矩阵与象限的对应示意图；图7是根据本发明实施例的超声成像装置的结构框图；图8是本发明实施例的超声成像设备的硬件结构示意图。具体实施方式为使本发明实施例的目的、技术方案和优点更加清楚，下面将结合本发明实施例中的附图，对本发明实施例中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。超声成像是利用FPGA控制超声探头发射超声声束扫描人体器官，接收扫描人体器官所产生的超声回波信号，继而通过上位机对超声回波信号进行数字信号处理以及数字成像处理得到二维超声图像，并由显示系统进行图像显示，以实现超声的DSC功能。相关技术中超声成像系统主要是通过资源强大的CPU或者操作平台实现，当实现降资源或简化超声系统时，资源紧张或处理能力弱的系统则出现卡顿或者崩溃的问题。基于此，本技术方案是将一帧超声图像的扫描线平均分成若干块进行处理，这样可以较好的平衡资源消耗和实现难易程度。每当一个块的数据缓存量满足后，即可进行目标像素的计算。同时将计算得到的目标像素进行缓存，直到一帧超声图像的目标像素缓存完成后，上传至上位机进行超声图像的显示。根据本发明实施例，提供了一种超声成像方法实施例，需要说明的是，在附图的流程图示出的步骤可以在诸如一组计算机可执行指令的计算机系统中执行，并且，虽然在流程图中示出了逻辑顺序，但是在某些情况下，可以以不同于此处的顺序执行所示出或描述的步骤。在本实施例中提供了一种超声成像方法，可用于上述的超声成像设备，图1是根据本发明实施例的超声成像方法的流程图，如图1所示，该流程包括如下步骤：步骤S101，获取超声扫描分辨率以及超声扫描过程中所产生的每帧图像的扫描线数。超声扫描分辨率表示超声成像设备的上位机针对于超声图像的显示像素，例如1024×1024、512×512等。具体的，可以根据超声成像设备的硬件属性确定其所能支持的分辨率，当超声成像设备能够支持多种分辨率时，用户可以从中选取一种作为超声扫描分辨率。扫描线数为一帧超声图像所具有的扫描线的数量。具体地，在启动超声成像设备的扫描功能后，结合上位机的扫描方式，即可确定出一帧超声图像所经过的扫描线，得到每帧图像的扫描线数。同时，根据每条扫描线的扫描深度，可以确定出每条扫描线所具有的线数据个数。步骤S102，对扫描线数进行块划分，确定每块的目标缓存线数。目标缓存线数为每个缓存块所缓存的线数。具体地，将一帧超声图像的扫描线数划分为若干块，可以得到若干组扫描线数，每组扫描线数即为每块的目标缓存线数。例如，一帧超声图像的扫描线数为scan_num_pframe=512，将该扫描线数均匀划分为4块，即可得到每块所对应的目标缓存线数。步骤S103，当完成针对于当前块的目标缓存线数的数据缓存时，基于超声扫描分辨率与目标缓存线数，确定当前块对应的目标像素。超声成像设备中的FPGA可以开启两个缓存模块RAM，分别为block1和block2，且block1和block2均是由标号0~n、深度为N的RAM构成的，其中，n为目标缓存线数-1，N为每条扫描线所具有的数据个数。将每块目标缓存线数对应的超声数据依次交替缓存至block1和block2中，并结合超声扫描分辨率和每块的目标缓存线数计算相应的目标像素，并将计算得到的目标像素缓存至DDR中。具体地，若一帧超声图像的扫描线数为scan_num_pframe=512，将该扫描线数为scan_num_pframe均匀划分为4块，则当block1缓存完第一块的n线数据后，结合超声扫描分辨率和目标缓存线数能够计算得到第一块对应的目标像素，同时block2继续缓存第二块的n线数据；当block1执行完目标像素的计算后，等待block2缓存完第二块的n线数据后，执行第二块所对应目标像素的计算；当block2执行完目标像素的计算后，block1则会继缓存第三块的n线数据，并在缓存完成后执行针对于第三块的目标像素计算；当block1执行完针对于第三块所对应目标像素的计算后，block2会继缓存第四块的n线数据，以对第四块的目标像素进行计算。步骤S104，基于目标像素进行数字成像处理，生成目标超声图像。将每块对应的目标像素依次缓存至DDR，得到对应于超声扫描分辨率的像素矩阵，该像素矩阵的行列与超声扫描分辨率是一致的。在当前帧所对应的每块目标缓存线数所对应数据的目标像素均缓存至DDR之后，触发所有块数据的目标像素的上传，完成针对于当前帧数据的成像处理，得到目标超声图像并显示。由于此处的目标像素是结合超声扫描分辨率执行分块计算所得到的，相较于一帧完整超声图像数据的像素计算而言，此处能够实现逻辑资源消耗的均衡，便于实现操作系统的资源小型化，同时降低了上传数据量。以超声扫描分辨率为1024×1024、扫描线数为512、每条扫描线的线数据个数为7920为例，未划分扫描线之前需要上传的数据量为7920×512×8bit，而执行扫描线分块之后，所需上传的数据量为1024×1024×8bit，由此可见，大大降低了数据量。本实施例提供的超声成像方法，通过对每帧图像的扫描线数进行块划分，得到每块所需缓存的目标缓存线数，结合超声扫描分辨率与目标缓存线数依次计算每块的目标像素，继而根据计算出的目标像素进行数字成像数据，由此通过将每帧图像对应的扫描数据分多块执行，能够平衡逻辑资源和处理能力，避免因资源紧张或处理能力不足而影响超声成像，同时在逻辑上实现了任意分辨率的数字成像，降低了对于上位机的性能要求，保证了超声成像的稳定性。在本实施例中提供了一种超声成像方法，可用于上述的超声成像设备，图2是根据本发明实施例的超声成像方法的流程图，如图2所示，该流程包括如下步骤：步骤S201，获取超声扫描分辨率以及超声扫描过程中所产生的每帧图像的扫描线数。详细说明参见上述实施例对应的相关描述，此处不再赘述。步骤S202，对扫描线数进行块划分，确定每块的目标缓存线数。具体地，上述步骤S202可以包括：步骤S2021，获取针对于扫描线数的预设划分块数。预设划分块数为预先设定的针对于扫描线数的划分数量。该预设划分块数可以是技术人员所预先配置的，其中，该预设划分块数可以为4块、5块、6块等，此处对于预设划分块数不作限定，本领域技术人员可以根据实际需求予以设定。在启动超声扫描之后，可以通过读取超声扫描的配置参数获取当次扫描过程的预设划分块数。步骤S2022，基于预设划分块数对扫描线数进行均匀划分，得到每块所对应的目标缓存线数。按照预设划分块数对扫描线数进行均匀划分，即可得到每块的目标缓存线数。以4块为例，结合超声成像特点，将扫描线数按照第一象限、第二象限、第三象限、第四象限划分为4块。如图3所示，一帧超声图像的扫描线数为scan_num_pframe=512，将该扫描线数均匀划分为按照第一象限、第二象限、第三象限、第四象限划分为4块。其中，每个象限与扫描线之间的对应关系为：第一象限对应的扫描线为1~128线，第二象限对应的扫描线为129~256线，第三象限对应的扫描线为257~384线，第四象限对应的扫描线为385~512线。为了保证不同块之间的图像衔接性，可以将当前块的第一线设为前一象限的最后一线，将当前块的最后一线设为后一象限的第一线，再结合平均划分所得到的当前块的扫描线条数，构成当前块的目标缓存线数。相应地，在一些具体的实施方式中，上述步骤S2022可以包括：步骤a1，按照预设划分块数对扫描线数进行均匀划分，确定每块的扫描线条数。步骤a2，获取每块对应的前一相邻块和后一相邻块，并确定前一相邻块中的最后一线以及后一相邻块中的第一线。步骤a3，将最后一线、第一线以及扫描线条数，确定为目标缓存线数。扫描线条数等于扫描线数处于预设划分块数。若一帧超声图像的扫描线数为scan_num_pframe=512，预设划分块数为4块，则每块的扫描线条数均为512/4=128。当需要确定当前块的目标缓存线数时，确定当前块对应的前一相邻块和后一相邻块，并将前一相邻块中的最后一线、后一相邻块中的第一线以及当前块的扫描线条数组合为当前块的目标缓存线数，即128+2=130。依次类推，可以得到每块的目标缓存线数。上述实施方式中，通过确定每块的扫描线条数、前一相邻块中的最后一线以及后一相邻块中的第一线，并将最后一线、第一线以及扫描线条数，确定最终的目标缓存线数，由此只要在一块目标缓存线数满足后即可进行像素的计算，无需等待接收完一帧图像的所有扫描线数据再进行像素计算，不仅保证了像素计算的连续性，而且节省了像素计算资源的消耗。步骤S203，当完成针对于当前块的目标缓存线数的数据缓存时，基于超声扫描分辨率与目标缓存线数，确定当前块对应的目标像素。具体地，上述步骤S203可以包括：步骤S2031，当完成针对于当前块的目标缓存线数的数据缓存时，确定当前块中每个像素点的位置。如上文所述，超声成像设备中的FPGA可以开启block1和block2两个缓存模块，且block1和block2均是由标号0~n、深度为N的RAM构成的。以目标缓存线数为130、线数据个数为7920为例，则block1和block2均是由标号0~129、深度为7920的RAM构成的。针对每块所对应目标缓存线数的数据缓存如下：当扫描1~129线时，此时在第一象限则由block1缓存，block1的1~129标号RAM缓存对应的1~129线数据，同时将扫描线1的数据line_1_data缓存在RAM_1，如图4所示。需要说明的是，对于第一帧超声扫描数据而言，由于每一个block缓存的是130线的线数据，而实际扫描线只有129，则对于第一帧的第一象限的block1的0标号RAM缓存扫描线1，从第二帧开始0标号RAM缓存上一帧扫描线512的数据RAM_512。当130线扫描结束后立即执行数字成像处理对应的像素计算，按照图5所示的第一象限顺序产生相应的目标像素。当扫描128~257线时，block2的0~129标号RAM缓存对应的257~128线数据，如图4所示。此处顺序跟上述步骤不一致是因为像素计算从圆中心开始，而每一个象限的像素开始计算都是从0标号RAM开始。当block2缓存130线数据立即执行数字成像处理对应的像素计算，按图5所示的第二象限顺序产生相应的目标像素。当扫描256~385线时，block1的0~129标号RAM缓存对应的256~385线数据，如图4所示。在满足130线数据立即执行数字成像处理对应的像素计算，按图5所示的第三象限顺序产生相应的目标像素。扫描384~512线时，block2的129~1标号RAM应的384~512线数据，由于需要缓存130线，为了更好的衔接图像，此时的0标号RAM加载步骤中的RAM_1。同时将512线数据line_512_data缓存在RAM_512，作为下一帧的第一象限的0标号RAM值，如图4所示。在满足130线数据立即执行数字成像处理对应的像素计算，按图5所示的第四象限顺序产生相应的目标像素。基于上述所述的数据缓存方式，每完成一块针对于目标缓存线数的数据缓存时，则可以针对当前块所缓存的130线数据，按照成像半径进行像素点的行场计数，结合水平方向和竖直方向的计数，则可以确定出每块中每个像素点所处的位置。在一些具体的实施方式中，上述步骤S2031可以包括：步骤b1，基于超声扫描分辨率确定成像半径。步骤b2，基于成像半径对当前块中的像素点进行计数，确定每个像素点的位置。成像半径r为超声扫描分辨率的一半，即成像半径r=超声扫描分辨率/2，若超声扫描分辨率为1024×1024，则成像半径r=1024/2=512。基于上述所述的数据缓存方式，每完成一块针对于目标缓存线数的数据缓存时，则可以针对当前块所缓存的n线数据进行行场计数，水平方向计数h_cnt从0~r-1，当h_cnt达到r-1时，竖直方向计数v_cnt执行加1，且v_cnt亦从0~r-1进行计数，当执行到v_cnt和h_cnt都为r-1时计数结束。根据v_cnt和h_cnt执行角度求取，由于一帧超声图像是由scan_num_pframe条扫描线构成的，则根据扫描线数scan_num_pframe以及成像半径r，能够计算到直角坐标系下每个像素点的位置。上述实施方式中，结合超声扫描分辨率确定成像半径，由此对成像半径内的像素点进行计数，由此能够确定出各块中每个像素点的位置，由此能够根据不同的超声扫描分辨率进行数字成像，实现了超声扫描分辨率的灵活设置。步骤S2032，基于每个像素点的位置，确定每个像素点所处的相邻目标扫描线。相邻目标扫描线表示像素点的位置位于哪两条扫描线之间。结合，每个像素点与扫描线之间的相对位置关系，可以确定出每个像素点所对应的相邻目标扫描线。具体地，上述步骤S2032可以包括：步骤c1，基于扫描线数确定线角度参数。步骤c2，基于每个像素点的位置与线角度参数，确定出每个像素点所处的相邻目标扫描线以及扫描线系数。线角度参数包括线角度倒数line_angle，基于扫描线数scan_num_pframe可以计算得到线角度倒数line_angle，具体如下：line_angle=/scan_num_pframe相邻目标扫描线包括line1和line2两条，扫描线系数用于表征像素点与扫描线之间的权重系数。具体地，相邻目标扫描线包括line1和line2的确定方式如下：line1=floor/ line_angle)；line2= line1+1；结合计算到的相邻目标扫描线，可以得到当前像素点对应的两个扫描系数：w1= - line1；w2=1-w1。上述实施方式中，根据扫描线数确定扫描过程中的线角度参数，再根据每个像素点的位置与线角度参数，确定出每个像素点所处的相邻目标扫描线以及扫描线系数，便于结合每个像素点所处的相邻目标扫描线以及扫描线系数，对每个像素点的目标像素进行准确计算，由此保证了超声成像的准确度。步骤S2033，基于每个像素点的位置以及相邻目标扫描线，确定每个像素点对应的目标像素。结合每个像素点的位置以及相邻目标扫描线，按照双线性插值方式实现针对于各个像素点所对应的像素值的计算，得到每个像素点所对应的目标像素。以上述划分为4块，超声扫描分辨率1024×1024，成像半径512为例，得到目标像素与象限对应如图6所示。在一些具体的实施方式中，上述步骤S2033可以包括：步骤d1，获取中心像素点的位置，确定每个像素点相对于中心像素点的目标距离。步骤d2，基于成像半径确定空间映射参数。步骤d3，基于目标距离与空间映射参数，确定针对于每个像素点对应的像素深度以及深度系数。步骤d4，基于相邻目标扫描线、扫描线系数、像素深度以及深度系数，按照双线性插值方式确定每个像素点的目标像素。中心像素点的位置为超声成像中心点，即中心像素点的位置为。结合两点之间的距离公式可以得到目标距离dist，即。基于成像半径确定空间映射参数的方式为：point_space=rxgate_width/r。其中，r为成像半径，point_space为空间映射参数，rxgate_width为每条扫描线对应的线数据个数。将目标距离dist乘以空间映射参数point_space，即可得到每个像素点对应的像素深度line_length，即line_length=dist×point_space。深度系数表示针对于像素点的采集点及其相应的权重系数，具体地，深度系数包括p_count1和p_count2两个。其中，p_count1=floor，p_count2=p_count1+1；对应的两个权重系数p_factor1=line_lenght- p_count1，p_factor2=1- p_factor1。结合相邻目标扫描线、扫描线系数、像素深度以及深度系数执行双线性插值，能够得到每个缓存中针对于每个像素点的目标像素，具体地，目标像素pixel_data的确定方式如下：pixel_data=×w1+block×w1)×p_factor2+×w2+block×w1)×p_factor1。其中，block表示block1、block2中的任意一个缓存块。上述实施方式中，通过中心像素点的位置以及每个像素点的位置，确定两者之间的目标距离，继而结合成像半径确定空间映射参数，从而根据目标距离以及空间映射参数，确定每个像素点在成像时的目标像素，使得目标像素的计算更加精准，保证了后续的超声成像效果。在一些具体的实施方式中，上述步骤S2033还可以包括：步骤e1，检测目标距离是否大于成像半径。步骤e2，当目标距离大于成像半径时，将目标像素的值置为预设值。步骤e3，当目标距离小于等于成像半径时，按照双线性插值方式确定每个像素点的目标像素。将目标距离与成像半径的大小关系进行对比，以确定目标距离是否大于成像半径。当目标距离大于成像半径时，表示该像素点不在成像范围内，此时可以将其对应的目标像素赋值为预设值，该预设值为预先设定的像素值，例如0。当目标距离小于等于成像半径时，表示该像素点处于成像范围内，此时按时上述所述的双线性插值方式确定每个像素点对应的目标像素。上述实施方式中，通过确定每个像素点相对于中心像素点的目标距离，并检测目标距离与成像半径之间的关系，根据目标距离与成像半径之间的关系，确定每个像素点在成像半径中像素值，由此能够在成像半径内进行准确成像，保证了超声成像效果。步骤S204，基于目标像素进行数字成像处理，生成目标超声图像。详细说明参见上述实施例对应的相关描述，此处不再赘述。本实施例提供的超声成像方法，通过对扫描线数进行均匀划分，能够更好平衡逻辑资源消耗，有利于保证后续的超声成像稳定性，避免卡顿或崩溃。通过当前块中每个像素点的位置以及超声扫描分辨率，确定每个像素点对应的相邻目标扫描线，进而能够计算到每个像素点对应的目标像素值。由此，缓存完一块扫描线数据即可计算一块目标像素，相较于整体计算而言，大大节省了计算量，减少了逻辑资源消耗。在本实施例中还提供了一种超声成像装置，该装置用于实现上述实施例及优选实施方式，已经进行过说明的不再赘述。如以下所使用的，术语“模块”可以实现预定功能的软件和/或硬件的组合。尽管以下实施例所描述的装置较佳地以软件来实现，但是硬件，或软件和硬件的组合的实现也是可能并被构想的。本实施例提供一种超声成像装置，如图7所示，包括：获取模块301，用于获取超声扫描分辨率以及超声扫描过程中所产生的每帧图像的扫描线数。划分模块302，用于对扫描线数进行块划分，确定每块的目标缓存线数。像素确定模块303，用于当完成针对于当前块的目标缓存线数的数据缓存时，基于超声扫描分辨率与目标缓存线数，确定当前块对应的目标像素。图像生成模块304，用于基于目标像素进行数字成像处理，生成目标超声图像。在一些可选的实施例方式中，上述划分模块302可以包括：块数获取单元，用于获取针对于扫描线数的预设划分块数。划分单元，用于基于预设划分块数对扫描线数进行均匀划分，得到每块所对应的目标缓存线数。在一些可选的实施例方式中，上述划分单元可以包括：扫描线条数确定子单元，用于按照预设划分块数对扫描线数进行均匀划分，确定每块的扫描线条数。相邻线获取子单元，用于获取每块对应的前一相邻块和后一相邻块，并确定前一相邻块中的最后一线以及后一相邻块中的第一线。缓存线确定子单元，用于将最后一线、第一线以及扫描线条数，确定为目标缓存线数。在一些可选的实施例方式中，上述像素确定模块303可以包括：位置确定单元，用于当完成针对于当前块的目标缓存线数的数据缓存时，确定当前块中每个像素点的位置。相邻扫描线确定单元，用于基于每个像素点的位置，确定每个像素点所处的相邻目标扫描线。像素值确定单元，用于基于每个像素点的位置以及相邻目标扫描线，确定每个像素点对应的目标像素。在一些可选的实施例方式中，上述位置确定单元可以包括：成像半径确定子单元，用于基于超声扫描分辨率确定成像半径。计算子单元，用于基于成像半径对当前块中的像素点进行计数，确定每个像素点的位置。在一些可选的实施例方式中，上述相邻扫描线确定单元可以包括：线角度确定子单元，用于基于扫描线数确定线角度参数。扫描线信息确定子单元，用于基于每个像素点的位置与线角度参数，确定出每个像素点所处的相邻目标扫描线以及扫描线系数。在一些可选的实施例方式中，上述像素值确定单元可以包括：距离确定子单元，用于获取中心像素点的位置，确定每个像素点相对于中心像素点的目标距离。映射参数确定子单元，用于基于成像半径确定空间映射参数。深度信息确定子单元，用于基于目标距离与空间映射参数，确定针对于每个像素点对应的像素深度以及深度系数。插值子单元，用于基于相邻目标扫描线、扫描线系数、像素深度以及深度系数，按照双线性插值方式确定每个像素点的目标像素。在一些可选的实施例方式中，上述像素值确定单元还可以包括：检测子单元，用于检测目标距离是否大于成像半径。第一确定子单元，用于当目标距离大于成像半径时，将目标像素的值置为预设值。第二确定子单元，用于当目标距离小于等于成像半径时，按照双线性插值方式确定每个像素点的目标像素。上述各个模块以及各个单元的更进一步的功能描述与上述对应实施例相同，在此不再赘述。本实施例中的超声成像装置是以功能单元的形式来呈现，这里的单元是指ASIC电路，执行一个或多个软件或固定程序的处理器和存储器，和/或其他可以提供上述功能的器件。本发明实施例还提供一种超声成像设备，具有图7所示的超声成像装置。请参阅图8，图8是本发明可选实施例提供的一种超声成像设备的结构示意图，如图8所示，该超声成像设备包括：一个或多个处理器10、存储器20，以及用于连接各部件的接口，包括高速接口和低速接口。各个部件利用不同的总线互相通信连接，并且可以被安装在公共主板上或者根据需要以其它方式安装。处理器可以对在超声成像设备内执行的指令进行处理，包括存储在存储器中或者存储器上以在外部输入/输出装置上显示GUI的图形信息的指令。在一些可选的实施方式中，若需要，可以将多个处理器和/或多条总线与多个存储器和多个存储器一起使用。同样，可以连接多个计算机设备，各个设备提供部分必要的操作。图8中以一个处理器10为例。处理器10可以是中央处理器，网络处理器或其组合。其中，处理器10还可以进一步包括硬件芯片。上述硬件芯片可以是专用集成电路，可编程逻辑器件或其组合。上述可编程逻辑器件可以是复杂可编程逻辑器件，现场可编程逻辑门阵列，通用阵列逻辑或其任意组合。其中，所述存储器20存储有可由至少一个处理器10执行的指令，以使所述至少一个处理器10执行实现上述实施例示出的方法。存储器20可以包括存储程序区和存储数据区，其中，存储程序区可存储操作系统、至少一个功能所需要的应用程序；存储数据区可存储根据超声成像设备的使用所创建的数据等。此外，存储器20可以包括高速随机存取存储器，还可以包括非瞬时存储器，例如至少一个磁盘存储器件、闪存器件、其他非瞬时固态存储器件。在一些可选的实施方式中，存储器20可选包括相对于处理器10远程设置的存储器，这些远程存储器可以通过网络连接至该计算机设备。上述网络的实例包括但不限于互联网、企业内部网、局域网、移动通信网及其组合。存储器20可以包括易失性存储器，例如，随机存取存储器；存储器也可以包括非易失性存储器，例如，快闪存储器，硬盘或固态硬盘；存储器20还可以包括上述种类的存储器的组合。该超声成像设备还包括输入装置30和输出装置40。处理器10、存储器20、输入装置30和输出装置40可以通过总线或者其他方式连接，图8中以通过总线连接为例。输入装置30可接收输入的数字或字符信息，以及产生与该超声成像设备的用户设置以及功能控制有关的键信号输入，例如触摸屏、小键盘、鼠标、轨迹板、触摸板、指示杆、一个或者多个鼠标按钮、轨迹球、操纵杆等。输出装置40可以包括显示设备、辅助照明装置和触觉反馈装置等。上述显示设备包括但不限于液晶显示器，发光二极管，显示器和等离子体显示器。在一些可选的实施方式中，显示设备可以是触摸屏。该超声成像设备还包括通信接口，用于该超声成像设备与其他设备或通信网络之间进行数据通信。本发明实施例还提供了一种计算机可读存储介质，上述根据本发明实施例的方法可在硬件、固件中实现，或者被实现为可记录在存储介质，或者被实现通过网络下载的原始存储在远程存储介质或非暂时机器可读存储介质中并将被存储在本地存储介质中的计算机代码，从而在此描述的方法可被存储在使用通用计算机、专用处理器或者可编程或专用硬件的存储介质上的这样的软件处理。其中，存储介质可为磁碟、光盘、只读存储记忆体、随机存储记忆体、快闪存储器、硬盘或固态硬盘等；进一步地，存储介质还可以包括上述种类的存储器的组合。可以理解，计算机、处理器、微处理器控制器或可编程硬件包括可存储或接收软件或计算机代码的存储组件，当软件或计算机代码被计算机、处理器或硬件访问且执行时，实现上述实施例示出的方法。虽然结合附图描述了本发明的实施例，但是本领域技术人员可以在不脱离本发明的精神和范围的情况下做出各种修改和变型，这样的修改和变型均落入由所附权利要求所限定的范围之内。
