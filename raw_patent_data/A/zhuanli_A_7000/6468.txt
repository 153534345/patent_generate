标题title
用于控制对象的医学成像检查的方法、医学成像系统和计算机可读数据存储介质
摘要abst
本发明涉及一种用于控制对象的医学成像检查的方法和医学成像系统和计算机可读数据存储介质。医学成像检查包括对对象的感兴趣的身体区域执行医学成像扫描。医学成像系统具有相对于机架可移动的患者台，并且具有用于访问由设置在对象上方的相机获取的图像序列的控制单元。方法包括：在医学成像扫描期间，从相机接收对象的图像序列；在医学成像扫描期间，接收患者台的当前位置和/或速度；执行图像序列的运动跟踪分析以提取运动模型，其中运动跟踪分析和/或运动模型针对感兴趣的身体区域进行定制并且考虑患者台的当前位置和/或速度；以及分析运动模型以检测对象运动，并且如果检测的运动高于预定阈值，则使医学成像检查适配检测的运动和/或发出警报，以使对象和/或医学成像系统的操作者知道检测的运动。
权利要求书clms
1.一种用于控制对象的医学成像检查的方法，其中所述医学成像检查包括使用预先选择的扫描协议，对所述对象的感兴趣的身体区域执行医学成像扫描，其中所述医学成像检查使用医学成像系统而被执行，所述医学成像系统具有一个机架、一个患者台、一个控制单元，所述患者台相对于所述机架可移动并且所述对象位于所述患者台上，所述控制单元用于控制所述医学成像扫描并且用于访问由一个相机获取的所述对象的图像序列，并且其中所述方法包括以下步骤：在所述医学成像扫描期间，从所述相机接收所述对象的图像序列；在所述医学成像扫描期间，接收所述患者台的当前位置和/或速度；对所接收的所述图像序列执行运动跟踪分析，以提取运动模型，其中所述运动跟踪分析和/或所述运动模型针对所述感兴趣的身体区域进行定制并且考虑当前患者台位置和/或速度；分析所述运动模型以检测对象运动，并且例如如果所检测的运动高于预定阈值，则使所述医学成像检查适配所检测的所述运动和/或发出警报，以使所述对象和/或所述医学成像系统的操作者知道所检测的所述运动。2.根据权利要求1所述的方法，其中所述运动跟踪分析使用特定于所选择的所述扫描协议和/或所述感兴趣的身体区域的运动模型。3.根据前述权利要求中任一项所述的方法，其中所述运动跟踪分析包括：-检测和跟踪所述图像序列中的、特定于所述感兴趣的身体区域的多个标志物，-将滤波算法、特别是卡尔曼滤波器应用于所跟踪的所述多个标志物，以补偿所述序列的图像中的一个或多个图像中的不准确检测；-通过所述患者台的位置和/或速度，来校正所跟踪的所述多个标志物；-基于经滤波和校正的所述多个标志物，估计所述运动模型。4.根据权利要求3所述的方法，其中所述运动跟踪分析包括：-基于所述多个标志物在所述序列的每个图像上的位置和相机参数，估计多个旋转和平移矢量，-基于所检测的所述多个标志物以及所述多个旋转和平移矢量，确定特别是头部的所述感兴趣的身体区域的定向和移动。5.根据前述权利要求中任一项所述的方法，其中仅在所述患者台已到达用于所述检查的目标位置之后，才开始所述运动跟踪分析。6.根据前述权利要求中任一项所述的方法，其中所述运动跟踪分析包括以下步骤：-通过使用所述患者台的所述当前位置和/或速度估计所述平移来校正所述运动模型，特别是所述多个标志物的位置和多个运动矢量。7.根据前述权利要求中任一项所述的方法，其中如果所述感兴趣的身体区域是胸部，则所述运动跟踪分析包括从由三维相机获取的所述图像序列提取所述胸部的向上和向下运动的一维模型。8.根据前述权利要求中任一项所述的方法，其中所述运动跟踪分析包括以下步骤：将密集运动跟踪方法应用于所述图像序列以估计密集运动矢量场，特别是通过使用光流技术，并且其中所述密集运动矢量场首先以粗分辨率被计算，然后以一个或几个更精细的分辨率被计算。9.根据权利要求8所述的方法，其中如果所述感兴趣的身体区域是胸部，则所述运动跟踪分析包括以下另外的步骤：-分析所述运动矢量场的定向，以用于检测所述运动矢量场的向内和向外运动，特别是通过所述计算运动矢量场的散度；-估计呼吸运动的运动模型。10.根据前述权利要求中任一项所述的方法，其中向所述对象发出的所述警报包括运动的种类和/或用于校正所述运动的建议。11.根据前述权利要求中任一项所述的方法，其中适配所述医学成像检查包括：重新获取被所检测的运动损害的医学成像数据。12.根据前述权利要求中任一项所述的方法，其中适配所述医学成像检查包括：执行运动补偿医学图像重建。13.根据权利要求1至12中任一项所述的方法，其中所述医学成像检查是计算机断层扫描检查，所述医学成像扫描是计算机断层成像扫描，并且所述医学成像系统是计算机断层成像系统。14.根据权利要求1至12中任一项所述的方法，其中所述医学成像检查是磁共振成像检查，所述医学成像扫描是磁共振成像扫描，并且所述医学成像系统是磁共振成像系统。15.一种医学成像系统，适于执行对象的医学成像检查，所述医学成像检查包括使用预先选择的扫描协议对感兴趣的身体区域进行医学成像扫描，并且适于执行根据前述权利要求中任一项所述的方法，其中所述医学成像系统包括：-一个机架；-一个患者台，相对于所述机架可移动；-一个相机，相对于所述机架处于已知位置和定向，其中所述相机适于获取定位在所述患者台上的对象的图像系列，以及-一个控制单元，用于控制医学成像扫描，其中所述控制单元适于在所述医学成像扫描期间，从所述相机接收所述对象的图像序列，并且适于在所述医学成像扫描期间，从所述控制单元接收所述患者台的当前位置和/或速度；-其中所述控制单元适于对所接收的所述图像序列执行运动跟踪分析以提取运动模型，其中所述运动跟踪分析和/或所述运动模型针对所述感兴趣的身体区域定制并且考虑当前患者台位置和/或速度；-其中所述控制单元还适于分析所述运动模型以检测对象运动，并且例如如果所检测的运动高于预定阈值，则所述控制单元适于使所述医学成像检查适配所检测的所述运动和/或发出警报，以使所述对象和/或所述医学成像系统的操作者知道所检测的所述运动。16.根据权利要求15所述的医学成像系统，其中所述相机是适于获取二维图像的视频相机或数字相机，或者是适于获取包括所述对象的深度信息的图像的三维相机。17.根据权利要求15或16所述的医学成像系统，其中所述医学成像检查是计算机断层扫描检查，所述医学成像扫描是计算机断层扫描，并且所述医学成像系统是计算机断层扫描系统。18.根据权利要求15或16所述的医学成像系统，其中所述医学成像检查是磁共振成像检查，所述医学成像扫描是磁共振成像扫描，并且所述医学成像系统是磁共振成像系统。19.一种非暂态计算机可读数据存储介质，编码有编程指令，其中所述编程指令能够被加载到医学成像系统的计算机系统中，并且使所述计算机系统实施根据权利要求1至14中任一项所述的方法。
说明书desc
技术领域本发明涉及用于控制对象的医学成像检查的方法、医学成像系统，以及非暂态计算机可读数据存储介质，医学成像系统具有一个机架、相对于该一个机架可移动的一个患者台、设置在该一个患者台上方的一个相机和一个控制单元。背景技术尽管医学成像获取速度取得了巨大进步，但诸如呼吸或无意身体移动的患者运动仍会导致运动引起的图像伪影。在目前的临床常规中，患者被要求在医学成像扫描期间不要移动或屏住呼吸一段时间。然而，这对由于健康受损而无法遵守此要求的许多患者提出了挑战。因此，需要医学成像系统适配患者的运动。已经存在一些算法来补偿医学图像重建中的运动，例如D.J.Borgert、V.Rasche和M.Grass的“Motion-Compensated andGated Cone Beam Filtered Back-Projection for 3-D Rotational X-RayAngiography”，IEEE Transactions on Medical Imaging，第25卷，第7号，2006年7月。然而，这种运动校正重建方法假设每个体素的运动矢量是已知的。因此，挑战在于在扫描期间跟踪和量化患者的运动。对于呼吸运动跟踪，存在简化的测量系统，诸如用于定位压力变换器的固定带或激光扫描仪。然而，这些设备使扫描工作流程复杂化，并且主要用于与治疗相关的成像，诸如放射治疗计划，因为它们对于常规临床图像来说过于复杂。发明内容因此，本发明的一个目的是提供一种简单的方法来跟踪和量化患者运动，这不会给医学成像系统的操作人员带来负担或占用时间。本发明的另外的目的是使医学成像检查充分地适配估计的患者运动。这些目的通过用于控制对象的医学成像检查的方法来满足，其中医学成像检查包括使用预先选择的扫描协议，对对象的感兴趣的身体区域执行医学成像扫描，其中使用医学成像系统执行医学成像检查，医学成像系统具有一个机架、一个患者台、一个控制单元，一个患者台相对于一个机架可移动并且对象位于其上，该一个控制单元用于控制医学成像扫描并且用于访问由相机获取的对象的图像序列，并且其中方法包括以下步骤：在医学成像扫描期间，从一个患相机接收对象的图像序列；在医学成像扫描期间，接收患者台的当前位置和/或速度；对接收的图像序列执行运动跟踪分析，以提取运动模型，其中运动跟踪分析和/或运动模型针对感兴趣的身体区域进行定制并且将患者台的当前位置和/或速度考虑在内；分析运动模型以检测对象运动，并且例如如果检测的运动高于预定阈值，则使医学成像检查适配检测的运动和/或发出警报，以使对象和/或医学成像系统的操作者知道检测的运动。方法使用基于相机的方法来跟踪和量化患者运动，并且进一步使用系统关于扫描协议和/或患者台运动的固有知识，来使医学成像检查充分适配估计的患者运动。医学成像检查可以是任何临床医学成像检查，包括血管造影或放射治疗计划。医学成像检查可以包括一个或几个医学成像扫描，其中每个医学成像扫描使用预先选择的扫描协议，从对象的感兴趣的身体区域获取医学图像。扫描协议可以由放射科医师或安排医学成像检查的医生预先选择，并且可以已经指定了感兴趣的身体区域以及扫描参数。扫描参数可以包括分辨率、切片厚度、剂量、辐射能量以及是否要应用造影剂。因此，扫描协议可以针对诊断问题进行定制，以及要对其执行医学成像扫描的感兴趣的身体区域进行定制。医学成像系统具有一个机架和一个患者台，患者台相对于机架可移动并且对象通常以仰卧位躺在其上。根据一个实施例，机架包括可围绕患者台旋转的X射线源和X射线检测器。根据一个实施例，机架包括中空圆柱体形式的超导磁体，患者台可以沿着轴线方向插入到该超导磁体中。在一些实施例中，机架是固定的，并且患者台至少在通过机架的轴向方向上可移动。然而，本发明也适用于具有可移动机架的医学成像系统，其中患者台可以是静止的或者也可以是可移动的。机架和患者台通常至少在z方向上相对于彼此可移动。医学成像系统还包括用于控制医学成像扫描的控制单元，控制单元可以是计算机系统的一部分。控制单元可以访问由设置在对象上方的相机获取的图像序列。根据本发明的运动跟踪分析也可以由控制单元执行，或由另一个处理单元执行，该处理单元也可以是计算机系统的一部分并且经由数据链路连接到控制单元。因此，处理单元可以是控制单元或控制单元的一部分。相机可以被固定到机架，并且可以被集成到医学成像系统中。相机可以被放置在患者台上方的某处。相机可以被安装在单独的支架上或安装在患者台上方的天花板处。因此，相机可以相对于机架静止，或备选地相对于患者台静止。相机可以是光学相机，特别是能够在患者位于患者台上时获取患者的图像的时间序列的数字相机或视频相机。时间分辨率优选地足以在扫描期间捕获相关运动，例如每秒2帧-120帧。相机可以是已经集成在最先进的医学成像系统中的相机，该系统今天仅用于视觉患者监测。根据本发明，控制单元不仅在医学成像扫描期间从相机接收图像序列，而且还知道或接收患者台的当前位置和/或速度，并且可选地还知道或接收预先选择的扫描协议。然后，控制单元或处理单元对所接收的图像序列执行运动跟踪分析，以提取对象的感兴趣的身体区域的运动模型，其中运动跟踪分析和/或运动模型针对感兴趣的身体区域进行定制，并且考虑患者台的当前位置和/或速度。因此，运动跟踪分析可以被简化并因此被稳定，因为基于感兴趣的身体区域并且可选地基于要应用的扫描协议，适当的运动模型被应用。已经知道感兴趣的身体区域还允许事先检测图像上的相关身体区域。在下一步中，运动模型被分析以检测对象运动。优选地，所检测的运动被分类为足以损害扫描过程或不存在或不相关。例如，如果超过阈值，则医学成像系统可以以特定于医学成像检查和可选地扫描协议和/或身体区域的方式适配运动。因此，提出了一种基于相机的方法，来跟踪和量化患者运动，并且使医学成像检查充分适配所估计的患者运动。该方法利用在医学成像系统处可用的特定信息，诸如要扫描的身体区域和可选的要应用的扫描协议，以便对患者运动充分作出反应。该方法还结合了患者台的可用运动信息。因此，本发明提供了一种用于减轻患者运动的影响的方法，其中扫描工作流程不受用于跟踪患者运动的附加设备或工作流程步骤的负面影响。运动跟踪分析可以利用基于机器学习的算法来估计图像序列上的运动。例如，可以使用由Google MediaPipe提供的算法。该算法使用例如神经网络来提取预定对象在每个图像上的位置。因此，可以直接从RGB图像数据估计运动，或者在三维相机获取具有深度信息的图像的情况下，也可以形成深度数据。在只有二维相机可用的低端医学成像系统中，运动跟踪分析可以包括使用最先进的算法从2D图像序列导出运动。通过将患者台的当前位置和/或速度考虑在内，可以针对医学成像系统患者台的移动来校正运动，该移动在控制单元内明确已知。一种校正方法是从相机估计的整体运动减去工作台运动。这确保了基于相机的运动估计仅捕获相对于工作台的患者运动。根据优选的实施例，运动跟踪分析使用特定于所选择的扫描协议和/或感兴趣的身体区域的运动模型。在一些实施例中，所选择的扫描协议已经包括相关的身体区域，其中感兴趣的身体区域可以例如是头部、胸部、肢体或肢体的一部分、臀部、颈部、肩部或可以被医学成像扫描覆盖的任何其他身体部位。运动模型可以针对特定身体区域中可能出现的形状、特征和/或运动种类进行定制。特别地，运动模型可以考虑关节和它们允许的运动。例如，在第一近似中，头部可以被视为刚体，即它可以旋转并且可能平移，但头骨自身不能变形。在第二近似中，下巴和喉咙的移动，诸如吞咽，可以被包含到模型中。肢体的运动模型可以包含关节处可能的运动，而胸部的运动模型将包括呼吸运动，并且可选地包括心跳。因此，运动跟踪分析将专门寻找适合特定于要扫描的感兴趣的身体区域的运动模型的运动。默认/一般运动模型可以是在每个图像位置处捕获运动的密集、弹性运动场。当运动模型特定于感兴趣的身体区域时，运动跟踪分析可以包括：检测和跟踪图像序列中的、特定于感兴趣的身体区域的多个标志物，将特别是卡尔曼滤波器的滤波算法应用于所跟踪的多个标志物，以补偿序列的图像中的一个或多个图像中的不准确检测；通过患者台的位置和/或速度，来校正所跟踪的多个标志物；以及基于经滤波和校正的多个标志物，估计运动模型。例如，可以通过基于经训练神经网络的算法来检测多个标志物。因此，可以针对每个特定身体区域预先定义适当数目的标志物，其中多个标志物指定身体表面的特性部分。如果身体区域是头部，则标志物可以是面部标志物，面部标志物可以用于确定眼睛、鼻子和嘴巴的位置。由于多个标志物在序列的每个图像中彼此独立地被检测，因此检测中的错误可能导致从一个图像到下一个图像的突然改变，导致不稳定。因此，滤波算法应可以被应用于跟踪的多个标志物，以补偿图像中的一个或多个图像中的不准确检测。在一个实施例中，这可以是卡尔曼滤波器，如例如在1997年09月17日，G.Welch和G.Bishop的“An Introductionto the Kalman Filter”中所描述的。卡尔曼滤波器是一种算法，其使用随时间观察到的、包含统计噪声和其他不准确性的一系列测量结果，以产生对未知值的估计，该估计往往比仅基于单一测量的那些更准确。通过使用卡尔曼滤波器，可以以更高的确定性和稳定性估计跟踪的标志物的运动。一种备选算法是稀疏光流算法，例如，如在J.Barron、D.Fleet和S.S.Beauchemin“Performance of Optical Flow Techniques”，International Journalof Computer vision 12，43-77中所描述的。该技术可以用于从图像序列的图像强度近似2D运动场，即3D速度在成像表面上的投影。由于对象运动在医学成像扫描期间被跟踪，因此预期工作台移动。为了确保仅检测到感兴趣的身体区域的移动，可以根据患者台移动来校正所跟踪的多个标志物的位置。这些工作台的移动在医学成像系统内明确已知，例如在控制单元中明确已知。因此，基于滤波和校正的标志物，可以估计特定于身体区域的运动模型。在一个实施例中，多个标志物的运动矢量构成运动模型。根据一个实施例，运动跟踪分析还包括：基于多个标志物在序列的每个图像上的位置和相机参数，估计旋转和平移矢量，基于所检测的标志物以及旋转和平移矢量，确定特别是头部的感兴趣的身体区域的定向和移动。根据多个标志物的位置和相机的已知固有参数，特别是相机相对于患者台的位置和定向，可以估计旋转和平移矢量。例如，这些平移和旋转矢量可以应用于可以被假设为刚体的身体区域，诸如头部。在该情况下，每个时间点只需要估计6个自由度。为此，可以应用具有相机的已知固有参数的直接线性变换解决方案。在该过程中，世界坐标系中感兴趣的身体的每个标志物被投影到图像平面上，以考虑图像序列中的身体到相机的定向和位置。为了最小化投影误差，可以应用Levenberg-Marquart优化来迭代地调整旋转和平移矢量。此外，所得的矢量和相机的固有参数可以用于计算欧拉角。因此，可以基于所确定的面部标志物、矢量和角度来检查头部的定向和移动。根据一个实施例，方法包括通过患者台速度校正运动模型或运动矢量场的步骤。这可以通过以下方式来完成：通过使用患者台的当前位置和/或速度来估计平移来校正运动模型，特别是标志物和运动矢量的位置。因此，图像中的工作台运动可以通过将图像内容移位工作台运动来补偿。此外，控制单元可以标识当前患者台位置，并且仅在台位置接近检查的目标位置之后，才开始运动跟踪分析。在另一个实施例中，针对运动识别的阈值可以通过患者台速度来校正。根据一个实施例，仅在患者台已经到达用于检查的目标位置之后，才开始运动跟踪分析。通常，当患者台被设置在机架外时，患者将躺在患者台上，然后患者台将至少在z方向上被移动到机架中，移动到用于该检查的目标位置，例如，使得感兴趣的身体区域在机架内。通过仅在患者台处于目标位置之后，才开始运动跟踪方法，可以减少用于校正快速台运动的计算工作量。在身体区域是胸部的情况下，运动跟踪分析可以包括从由三维相机获取的图像序列提取胸部向上和向下运动的一维模型。这意味着深度信息可用，并且在该情况下，向上/向下运动可以提供足够的呼吸模型。例如，运动跟踪分析可以包括如下步骤：在序列的每个图像上的预先定义区域上平均胸部深度，并且可选地使用卡尔曼滤波器来预测进一步的呼吸运动。由于呼吸运动是循环的，因此可以对移动进行外推。运动跟踪分析可以包括如下步骤：将密集运动跟踪方法应用于图像的序列以估计运动矢量场，特别是通过使用光流技术。该方法尤其在仅2D相机运动跟踪可用的情况下是有利的。这可以跟随有通过患者台速度来校正运动矢量场。根据运动场，可以根据如下来提取呼吸运动。根据一个优选的实施例，首先以粗分辨率计算运动矢量场，然后以一个或多个更精细的分辨率进行计算。换句话说，可以以多分辨率方式执行分析以获得粗略水平的全局呼吸模型，但以更精细的分辨率检测另外的移动。在一个示例中，图像序列可以具有640x1080像素的分辨率。然而，在第一步中，它被采样到低得多的分辨率，以便首先大规模估计运动。这具有抑制混叠的优点。当已经标识主要运动时，以更精细的分辨率重复分析，以进一步区分所检测的运动。根据一个实施例，运动跟踪分析还可以包括如下步骤：分析运动矢量场的定向以检测向内和向外运动，特别是通过计算运动矢量场的散度，并且在此基础上估计呼吸运动的运动模型。这是基于如下见解：可以通过分析运动矢量的定向来区分吸气和呼气：在身体两侧，吸气的特征在于运动矢量指向图像的边界。在呼气期间，运动矢量指向中心。在数学上，这可以通过矢量场的散度来表征，正值指示胸部扩张，负值指示呼气。此外，可以在腰部区域或肩部区域观察到在z方向上的二次呼吸运动。对于肩膀，吸气导致向头部的移动，而呼气导致向脚部的移动。在腰部，对于吸气，运动可以是向上或向下，这取决于是胸式呼吸还是腹式呼吸占主导。然而，如果从身体两侧或肩部检测到吸气/呼气的一般阶段，则腰部处的在z方向上的移动对于支持呼吸检测和区分胸式呼吸和腹式呼吸可以是有价值的。运动矢量场的幅度描述了呼吸运动的量。上述多分辨率分析可以用于能够以更精细的分辨率区分腹式呼吸和胸式呼吸。基于所检测的运动，特别是运动是否超过阈值，医学成像系统可以以一种或多种方式作出反应和适配医学成像检查。根据一个实施例，医学成像系统可以向对象和/或操作者发出警报。例如，操作者可以接收视觉警告或听觉警告。视觉警告可以被实现为扫描仪平板上显示的实时图像上的彩色叠加。警报可以包括检测的运动种类和对行动的建议。例如，重新定位患者，或指导患者抵消移动。备选地，可以通过视觉警告或听觉警告使对象知道该运动。根据一个实施例，向对象发出的警报可以包括运动的种类和/或用于纠正运动的建议。例如，警报可以包括视觉信号或听觉信号以引起对象的注意。之后，由相机获取的图像中的一个或多个图像可以在屏幕上显示给对象，包括指示患者应当如何移动以纠正无意运动的箭头。例如，当他/她之前将头转向一侧时，可以有箭头标志或声音标志，要求他将头转回中心。根据另一实施例，适配医学成像检查可以包括重新获取被所检测的运动损害的医学成像数据。医学成像数据可以是例如计算机断层扫描数据或磁共振成像数据。例如，患者台可以停止或向后移动，以允许医学成像系统再次扫描受影响的部分。例如当检测到咳嗽时，这可能是必要的，这在使用本发明的技术的情况下是可能的。在现有技术中，经由胸带仅检测到呼吸替代物，并且这不能检测到如咳嗽的复杂移动。通过在基于相机的本发明的方法中检测咳嗽，可以在必要时触发对某些z位置的重新扫描。检查可以包括执行医学成像数据的运动补偿图像重建，例如运动补偿滤波-反投影。换句话说，基于相机的运动估计可以被用作最先进的运动补偿重建算法的输入信息，以校正估计运动的重建。医学图像重建例如可以是计算机断层扫描图像重建或磁共振图像重建。根据一个实施例，医学成像检查是计算机断层扫描检查，医学成像扫描是计算机断层扫描，并且医学成像系统是计算机断层扫描系统。特别地，本文公开了一种用于控制对象的CT检查的方法，其中CT检查包括使用预先选择的扫描协议，对对象的感兴趣的身体区域执行CT扫描，其中使用CT系统执行CT检查，该CT系统具有一个机架、一个患者台、一个控制单元，患者台相对于机架可移动且对象位于其上、控制单元用于控制CT扫描并且可以访问由一个相机获取的对象的图像序列的控制单元，并且其中方法包括以下步骤：在CT扫描期间，从相机接收对象的图像序列；在CT扫描期间，接收患者台的当前位置和/或速度；对所接收的图像序列执行运动跟踪分析以提取运动模型，其中运动跟踪分析和/或运动模型针对感兴趣的身体区域定制并且考虑患者台的当前位置和/或速度；分析运动模型以检测对象运动，并且例如如果所检测的运动高于预定阈值，则使CT检查适配所检测的运动和/或发出警报，以使对象和/或CT系统的操作者知道所检测的运动。根据一个实施例，医学成像检查是磁共振成像检查，医学成像扫描是磁共振成像扫描，并且医学成像系统是磁共振成像系统。本发明还涉及一种医学成像系统，包括一个机架、一个患者台、一个相机、以及一个控制单元，患者台相对于机架可移动，相机相对于机架以已知位置和定向设置在患者台上方，其中相机适于获取位于患者台上的对象的图像系列，控制单元用于控制医学成像扫描。控制单元适于在医学成像扫描期间从相机接收对象的图像序列，并且适于在医学成像扫描期间接收患者台的当前位置和/或速度。控制单元还适于对所接收的图像序列执行运动跟踪分析以提取运动模型，其中运动跟踪分析和/或运动模型针对感兴趣的身体区域进行定制并且考虑患者台的当前位置和/或速度；并且控制单元还适于分析运动模型以检测对象运动，并且例如，如果检测的运动高于预定阈值，则使医学成像检查适配检测的运动和/或发出警报，以使对象和/或医学成像系统的操作者知道检测的运动。医学成像系统适于执行根据本发明的方法。关于该方法描述的所有特征和优点也适用于医学成像系统，反之亦然。该方法可以由控制单元实施，该控制单元是医学成像系统的一部分，并且接收图像序列，执行运动跟踪分析，并且可以适配医学成像检查以对检测的运动进行反应。根据一个实施例，相机是适于获取2-D的视频相机或数字相机。相机可以被集成到机架中。因此，对于医学成像系统，特别是控制单元，位置和其他固有相机参数，诸如视场、相对于患者台的成像角度、分辨率等是自动已知的。根据一个备选实施例，内部的相机是适于获取包括对象的深度信息的图像的3D相机。这种3D相机可以例如包括两个透镜，以便以两个角度捕捉感兴趣的身体区域，从而提取轮廓/深度信息。例如，医学成像系统可以是计算机断层扫描系统或磁共振成像系统或正电子发射断层成像系统或C臂系统或它们的任何组合，例如，PET-CT系统。医学成像检查可以是例如计算机断层扫描检查或磁共振成像检查或正电子发射断层成像检查或C臂检查或其任意组合，例如，PET-CT检查。医学成像扫描可以是例如计算机断层成像扫描或磁共振成像扫描或正电子发射断层成像扫描或C臂扫描或其任意组合，例如，PET-CT扫描。根据本发明的另外的方面，提供了一种包括编程指令的计算机程序，其中所述编程指令可以被加载到医学成像系统的计算机系统中，其中所述编程指令使所述计算机系统实施本发明的方法。计算机程序或计算机程序产品可以用医学成像系统可读的任何语言编写。它可以被加载到处理单元中，并且可以被存储在任何数字存储介质上。例如，处理单元可以是如本文所述的控制单元，或可以是如本文所述的控制单元的一部分或连接到控制单元。根据另外的方面，本发明涉及一种编码有编程指令的非暂态计算机可读数据存储介质，其中编程指令可以被加载到医学成像系统的计算机系统中，并且可以使所述计算机系统实施根据本发明的方法。数据存储介质可以是任何数字存储介质，例如硬盘、云、连接到医学成像系统的计算机系统的介质，或诸如SD卡或SSD卡、USB棒、CD-ROM等的便携式介质。本文描述的方法的所有特征和优点也适用于计算机程序和存储介质，反之亦然。该方法可以是例如计算机实现的方法。附图说明现在将参考附图描述本发明的实施例，其中：图1示出了根据本发明的一个实施例的医学成像系统的透视图；图2示出了在由设置在患者台上方的相机获取的两个图像上图示的、特定于头部的运动模型的示例，图像显示了处于两种不同运动状态的对象的头部和肩部；图3示出了针对呼吸定制的运动模型，在俯卧身体的示意图上图示；图4示出了根据本发明的方法的实施例的流程图。具体实施方式图1示出了根据本发明的一个实施例的医学成像系统，其适于实施本发明的方法。医学成像系统1包括一个环形机架2。一个患者台3被设置在脚部4上，并且可以通过一个致动器6在z方向上移动通过机架，致动器6可以包括电机，并且通过数据链路7与一个控制单元8连接。控制单元8是计算机系统10的一部分，计算机系统10还可以包括一个处理单元12和一个数据存储装置14，诸如硬盘。存储在CD-ROM 15上的计算机程序产品可以被加载到计算机系统10中。计算机系统10可以具有用户截面，例如以一个屏幕16和一个键盘19的形状。控制单元8还控制医学成像系统1，特别是机架2的操作。控制单元8还经由数据链路17与一个相机18连接，相机18被设置在患者台3上方的机架的壳体上。控制单元8还可以与平板20连接，由相机18拍摄的图像可以在平板20上可视化，以及与用户输入设备22连接，用户输入设备22可以具有遥控器的形状。数据链路7和17可以是有线的，但也可以是无线的，例如通过蓝牙、WIFI或其他数据连接。控制单元8和/或计算机系统10，或处理单元12可以远离医学成像系统定位，使得数据链路7和17是通过电信方式或经由因特网。图2图示了针对作为感兴趣的身体区域的头部定制的运动跟踪分析。图2示出了躺在相机18下方的患者台3上的对象36的头部34的两个图像，在左侧的30和在右侧的32。在相机获取的每个图像上，检测到许多预定的多个面部标志物38，如点38所示。多个面部标志物勾勒出头部的轮廓，以及面部的独特特征，诸如眼睛、鼻子和嘴巴。如果患者台3正在移动，则可以根据患者台3的已知移动来校正多个标志物的位置，该已知移动由致动器6记录并且转发到控制单元8。根据多个面部标志物38并且考虑相机的已知固有参数，利用直接线性变换解决方案进行运动跟踪分析，然后进行Levenberg-Marquart优化，将计算每个图像上的头部的轴线，例如纵向轴线x、前后轴线y和从左到右的轴线z。这些轴线由每个图像上的立方体40图示。对于胸部扫描，特别是如果只有2D相机运动跟踪可用，则应用诸如光流的通用密集运动跟踪方法来首先估计运动矢量场。根据该运动场，呼吸运动根据如下被提取：如图3中所示的估计运动矢量首先通过已知的工作台运动进行校正。现在看图3，运动模型被图示在患者36的示意性俯视图上，特别是在他的肩膀42、胸部44和腰部/腰带46上。在吸气期间，即胸部44的扩张期间，身体的两侧向外移动，如由运动矢量50所示。肩膀向上移动，参见矢量52。在呼气期间，肩膀向下移动，参见矢量54，并且胸部向内移动，参见运动矢量56。在数学上，这可以通过计算矢量场的散度来示出，胸部的扩张具有正散度，呼气以负散度为特征。为了区分胸式呼吸和腹式呼吸，可以进一步分析腰部或腰带46处的运动：胸式呼吸以向上移动58为特征，腹式呼吸59以向下运动为特征。因此，分析腰部处的运动场的主要价值是支持检测呼吸，并且区分胸式呼吸和腹式呼吸。运动矢量场优选地从对象的彩色图像提取，并且可以以多分辨率方式执行以获得粗糙水平的全局呼吸模型，但仍然能够在更细的尺度上区分例如腹部呼吸和胸部呼吸。图4图示了本发明的方法的一个实施例。在步骤60中，将患者定位到患者台3上，并且开始医学成像检查。操作者将选择扫描协议和感兴趣的身体区域。在接下来的步骤62中，相机将开始获取图像，并且将对象的图像序列发送到控制单元8。当患者台3通过致动器6开始移动时，患者台的当前位置和运动也将在步骤64中被发送到控制单元8。控制单元8或处理单元12将对所接收的图像序列执行运动跟踪分析66，并且提取针对特定身体区域进行定制的特定运动模型。同时，医学成像扫描68正在进行，特别地，患者台3在获取医学成像数据时缓慢地移动通过机架2。在步骤70中，分析运动模型以检测对象运动，并且可能地使医学成像检查适配检测的运动，如由箭头72所示，通过该运动模型，可以在出现运动的某个z位置处重复扫描68的一部分。步骤64、66和70通常在扫描68期间进行，至少步骤62和64在扫描68期间进行。优选地，运动跟踪分析66和运动模型70的分析也实时出现，因为这允许医学成像系统发出警报，以使对象或操作者知道所检测的运动，如在74处指示的。这种警报可以例如是对象应当如何移动回其初始位置的声音信号和/或视觉指示。在76处，医学成像扫描68完成，并且可以执行图像的重建，可选地开率所计算的运动模型。
