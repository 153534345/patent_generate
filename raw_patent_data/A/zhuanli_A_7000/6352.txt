标题title
控制方法、清洁机器人和存储介质
摘要abst
本申请公开了一种控制方法、清洁机器人和存储介质。控制方法包括：在检测到所述清洁机器人进入已标注地毯区域的情况下，检测所述已标注地毯区域中的地毯；在检测到地毯的情况下，检测所述清洁机器人的工作模式；若所述清洁机器人处于第一工作模式，控制所述清洁机器人根据被标注的所述地毯进行避障。能够有效避免清洁机器人移动到地毯上才检测出地毯。同时，根据清洁机器人的工作模式，决定是否进行避障。可以提高清洁机器人的避障效率和避障效果。
权利要求书clms
1.一种控制方法，用于清洁机器人，其特征在于，所述控制方法包括：在检测到所述清洁机器人进入已标注地毯区域的情况下，检测所述已标注地毯区域中的地毯；在检测到地毯的情况下，检测所述清洁机器人的工作模式；若所述清洁机器人处于第一工作模式，控制所述清洁机器人根据被标注的所述地毯进行避障。2.根据权利要求1所述的控制方法，其特征在于，所述控制方法还包括：在未检测到地毯的情况下，去除所述已标注地毯区域的地毯标记。3.根据权利要求2所述的控制方法，其特征在于，所述在未检测到地毯的情况下，去除所述已标注地毯区域的标记包括：在未检测到地毯的情况下，减小所述已标注地毯区域的置信度标记数值；在所述置信度标记数值小于预定数值的情况下，去除所述已标注地毯区域的地毯标记。4.根据权利要求1所述的控制方法，其特征在于，所述控制方法还包括：若所述清洁机器人位于未标注地毯的区域且检测到地毯的情况下，检测所述清洁机器人的工作模式；若所述清洁机器人处于第一工作模式，控制所述清洁机器人进行地毯避障，并在避障结束后将当前区间标注为地毯区域。5.根据权利要求4所述的控制方法，其特征在于，若所述清洁机器人处于第一工作模式，控制所述清洁机器人进行地毯避障，并在避障结束后将当前区间标注为地毯区域包括：检测所述清洁机器人在所述第一工作模式下的任务模式；在所述清洁机器人处于第一任务模式的情况下，控制所述机器人根据第一模式进行地毯避障；在所述清洁机器人处于第二任务模式的情况下，控制所述清洁机器人根据第二模式进行地毯避障。6.根据权利要求5所述的控制方法，其特征在于，所述在所述机器人处于第一任务模式的情况下，控制所述清洁机器人根据第一模式进行地毯避障包括：控制所述清洁机器人向与当前行进方向相反的方向行进预定距离；控制所述清洁机器人以行进结束后的地点为起始点进行圆弧运动以进行地毯避障。7.根据权利要求6所述的控制方法，其特征在于，所述控制方法还包括：在所述清洁机器人进行圆弧运动的过程中，若检测到地毯、且检测到障碍物或已返回所述起始点，确认所述清洁机器人完成地毯避障；根据所述清洁机器人的行动轨迹，对当前区间进行地毯区域标注。8.根据权利要求6所述的控制方法，其特征在于，所述控制方法还包括：在所述清洁机器人进行圆弧运动的过程中，若检测到地毯但未检测到墙体或未返回所述起始点，控制所述清洁机器人向与当前行进方向相反的方向行进预定距离后进行圆弧运动以进行地毯避障。9.根据权利要求5所述的控制方法，其特征在于，所述在所述机器人处于第二任务模式的情况下，控制所述清洁机器人根据第二模式进行地毯避障，包括：控制所述清洁机器人在与地毯发生碰撞的情况后向与当前行进方向相反的方向行进以进行地毯避障。10.一种清洁机器人，其特征在于，清洁机器人包括存储器和处理器，所述存储器中存储有计算机程序，所述计算机程序被所述处理器执行时，实现权利要求1-9任一项所述的控制方法。11.一种计算机程序的非易失性计算机可读存储介质，其特征在于，当所述计算机程序被一个或多个处理器执行时，实现权利要求1-9任一项所述的控制方法。
说明书desc
技术领域本申请涉及智能家居技术领域，更具体而言，涉及控制方法、清洁机器人和存储介质和非易失性计算机可读存储介质。背景技术随着智能家居的发展，为人们的日常生活提供了诸多便利。清洁机器人作为一种家用智能移动机器人越来越受到大家的认可。通常，对于房间内的地毯等特殊类型的地面，在使用拖地模式时，需要清洁机器人能够准确识别相关区域并进行有效的避障。然而，相关技术中，通常需要清洁机器人移动至地毯上才能够进行地毯检测，对于地毯区域的避障效率和避障效果较差，用户体验不佳。发明内容本申请提供了一种控制方法、清洁机器人和存储介质。本申请实施方式提供了一种控制方法，用于清洁机器人，所述控制方法包括：在检测到所述清洁机器人进入已标注地毯区域的情况下，检测所述已标注地毯区域中的地毯；在检测到地毯的情况下，检测所述清洁机器人的工作模式；若所述清洁机器人处于第一工作模式，控制所述清洁机器人根据被标注的所述地毯进行避障。如此，在检测到清洁机器人机进入已标注地毯区域的情况下，开始检测已标注地毯区域中的地毯。能够有效避免清洁机器人移动到地毯上才检测出地毯。在检测到该区域存在地毯的情况下，检测清洁机器人的工作模式，当清洁机器人的工作模式为第一工作模式时，控制清洁机器人根据被标注的地毯进行避障。从而可以根据清洁机器人的工作模式，决定是否进行避障。这样，根据本申请方法可以提高清洁机器人的避障效率和避障效果。在某些实施方式中，所述控制方法还包括：在未检测到地毯的情况下，去除所述已标注地毯区域的地毯标记。如此，在清洁机器人未检测到地毯的情况下，去除已标注地毯区域的地毯标记。从而提高已标注地毯区域的准确性。在某些实施方式中，所述在未检测到地毯的情况下，去除所述已标注地毯区域的标记包括：在未检测到地毯的情况下，减小所述已标注地毯区域的置信度标记数值；在所述置信度标记数值小于预定数值的情况下，去除所述已标注地毯区域的地毯标记。如此，在清洁机器人未检测到地毯的情况下，减小已标注地毯区域的置信度标记数值。在置信度标记数值小于预定数值的情况下，去除已标注地毯区域的地毯标记。通过增加置信度标记数值，可以给去除已标注的地毯区域的动作提供一个缓冲区间，防止清洁机器人误删已标注的地毯区域。在某些实施方式中，所述控制方法还包括：若所述清洁机器人位于未标注地毯的区域且检测到地毯的情况下，检测所述清洁机器人的工作模式；若所述清洁机器人处于第一工作模式，控制所述清洁机器人进行地毯避障，并在避障结束后将当前区间标注为地毯区域。如此，若清洁机器人位于未标注地毯的区域且检测到地毯的情况下，则开始检测清洁机器人的工作模式。若清洁机器人处于拖地模式，则控制清洁机器人进行地毯避障，并在避障结束后将当前区间标注为地毯区域。从而提高已标注地毯区域的准确性。在某些实施方式中，若所述清洁机器人处于第一工作模式，控制所述清洁机器人进行地毯避障，并在避障结束后将当前区间标注为地毯区域包括：检测所述清洁机器人在所述第一工作模式下的任务模式；在所述清洁机器人处于第一任务模式的情况下，控制所述机器人根据第一模式进行地毯避障；在所述清洁机器人处于第二任务模式的情况下，控制所述清洁机器人根据第二模式进行地毯避障。如此，检测清洁机器人在第一工作模式下。如果检测到清洁机器人处于第一任务模式的情况下，控制机器人根据第一模式进行地毯避障。如果检测到清洁机器人处于第二任务模式的情况下，控制机器人根据第二模式进行地毯避障。根据不同的任务模式，选择不同的运动模式以完成地毯避障，可以为用户提供多元化的地毯避障方式。在某些实施方式中，所述在所述机器人处于第一任务模式的情况下，控制所述清洁机器人根据第一模式进行地毯避障包括：控制所述清洁机器人向与当前行进方向相反的方向行进预定距离；控制所述清洁机器人以行进结束后的地点为起始点进行圆弧运动以进行地毯避障。如此，控制清洁机器人与前进方向相反的方向行进预定的距离后结束运动，在结束运动的地点为起始点进行圆弧运动，在圆弧运动的过程中进行地毯避障。使得清洁机器人按照第一模式进行地毯避障的时候，可以尽量避免碰撞到地毯。在某些实施方式中，所述控制方法还包括：在所述清洁机器人进行圆弧运动的过程中，若检测到地毯、且检测到障碍物或已返回所述起始点，确认所述清洁机器人完成地毯避障；根据所述清洁机器人的行动轨迹，对当前区间进行地毯区域标注。如此，在清洁机器人进行圆弧运动的过程中，检测到地毯和障碍物，或者检测到地毯和清洁机器人回到初始点，确认清洁机器人完成地毯避障。及时推进清洁机器人的工作流程。然后，根据清洁机器人的行动轨迹，将当前区间标注为地毯区域。及时更新已标注地毯的区域。在某些实施方式中，所述控制方法还包括：在所述清洁机器人进行圆弧运动的过程中，若检测到地毯但未检测到墙体或未返回所述起始点，控制所述清洁机器人向与当前行进方向相反的方向行进预定距离后进行圆弧运动以进行地毯避障。如此，在清洁机器人进行圆弧运动的过程中，若检测到地毯但未检测到墙体，或者检测到地毯但检测到未返回起始点，则控制清洁机器人向与当前行进方向相反的方向行进预定距离后进行圆弧运动，从而进行地毯避障。使得清洁机器人在离开地毯的同时可以再次进行圆弧运动，从而完成对当前地毯的地毯避障。在某些实施方式中，所述在所述机器人处于第二任务模式的情况下，控制所述清洁机器人根据第二模式进行地毯避障，包括：控制所述清洁机器人在与地毯发生碰撞的情况后向与当前行进方向相反的方向行进以进行地毯避障。如此，在清洁机器人与地毯发生碰撞的情况下，控制清洁机器人向与当前行进方向相反的方向行进从而进行地毯避障，可以尽量避免清洁机器人在后退的过程中再碰撞到地毯。本申请实施方式还提供一种清洁机器人，清洁机器人包括存储器和处理器，所述存储器中存储有计算机程序，所述计算机程序被所述处理器执行时，实现上述的控制方法。本申请实施方式还提供一种计算机程序的非易失性计算机可读存储介质，当所述计算机程序被一个或多个处理器执行时，实现上述的控制方法。本申请的控制方法、清洁机器人和非易失性计算机可读存储介质，在检测到清洁机器人机进入已标注地毯区域的情况下，开始检测已标注地毯区域中的地毯。能够有效避免清洁机器人移动到地毯上才检测出地毯。在检测到该区域存在地毯的情况下，检测清洁机器人的工作模式，当清洁机器人的工作模式为第一工作模式时，控制清洁机器人根据被标注的地毯进行避障，从而可以根据清洁机器人的工作模式，决定是否进行避障。这样，根据本申请方法可以提高清洁机器人的避障效率和避障效果。本申请的实施方式的附加方面和优点将在下面的描述中部分给出，部分将从下面的描述中变得明显，或通过本申请的实施方式的实践了解到。附图说明本申请的上述和/或附加的方面和优点从结合下面附图对实施方式的描述中将变得明显和容易理解，其中：图1是本申请某些实施方式的控制方法的流程示意图；图2是本申请某些实施方式的控制方法的流程示意图；图3是本申请某些实施方式的控制方法的流程示意图；图4是本申请某些实施方式的控制方法的流程示意图；图5是本申请某些实施方式的控制方法的流程示意图；图6是本申请某些实施方式的控制方法的流程示意图；图7是本申请某些实施方式的控制方法的场景示意图；图8是本申请某些实施方式的控制方法的流程示意图；图9是本申请某些实施方式的控制方法的流程示意图；图10是本申请某些实施方式的控制方法的场景示意图；图11是本申请某些实施方式的控制方法的流程示意图；图12是本申请某些实施方式的控制方法的场景示意图；图13是本申请某些实施方式的非易失性计算机可读存储介质和处理器的连接状态示意图。具体实施方式下面详细描述本申请的实施方式，实施方式的示例在附图中示出，其中，相同或类似的标号自始至终表示相同或类似的元件或具有相同或类似功能的元件。下面通过参考附图描述的实施方式是示例性的，仅用于解释本申请的实施方式，而不能理解为对本申请的实施方式的限制。清洁机器人可以帮助用户清洁地面，清洁的工作模式包括扫地、拖地和吸尘等。清洁机器人在工作的过程中会遇到如墙壁、桌椅、宠物和地毯等障碍物，因此清洁机器人需要学会避障技术才能更好地完成清洁工作。清洁机器人在不同的工作模式下，遇到不同的障碍物，需要采取不同的避障技术。在扫地或吸尘的工作模式下，面对地毯这种障碍物，由于地毯容易堆积灰尘和垃圾，清洁机器人可以在清洁地面的时候，顺便加大工作功率清洁地毯。但是，在拖地的工作模式下，因为地毯沾水后反而容易湿掉变脏，因此，清洁机器人需要躲避地毯，只对地面进行清洁。同时，地毯相对于其它障碍物，其高度较低，清洁机器人容易移动到上面进行不必要的清洁。请参阅图1，本申请实施方式的控制方法，包括以下步骤：01：在检测到清洁机器人进入已标注地毯区域的情况下，检测已标注地毯区域中的地毯；02：检测到地毯的情况下，检测清洁机器人的工作模式；03：若清洁机器人处于第一工作模式，控制清洁机器人根据被标注的地毯进行避障。本申请还提供一种清洁机器人，包括存储器和处理器。存储器中存储有计算机程序，处理器用于在检测到清洁机器人进入已标注地毯区域的情况下，检测已标注地毯区域中的地毯。及用于在检测到地毯的情况下，检测清洁机器人的工作模式以及用于若清洁机器人处于第一工作模式，控制清洁机器人根据被标注的地毯进行避障。具体地，清洁机器人包括拖扫一体机和拖地机等包括拖地功能的智能移动机器人。拖地可以包括湿拖，湿拖是指清洁机器人依赖机体的渗水系统，将机体的水均匀渗透到抹布上，发动机驱动机器进行拖地。清洁机器人可以调取预存储的地图信息。地图信息包括已标注地毯区域和已标注地毯区域的信息。该地图信息可以预先储存在清洁机器人的机体的储存器里，也可以存储在云端服务器里。地毯区域是指地毯占据地面的空间位置。已标注的地毯区域是指根据标注的历史数据，可以判断为存在地毯的区域。也即是根据储存起来的标注的历史数据，可以预测该区域有地毯。已标注的地毯区域产生的方式包括，通过测量物体的空间位置仪器进行检测后，识别出真实存在的地毯，将该地毯的空间位置生成数据，对这些数据进行标注，并将这些数据储存起来。进入已标注地毯区域，指的是根据预存储的地图信息，在清洁机器人距离已标注地毯区域的边缘的距离小于或等于预定距离的情况下，确定所述清洁机器人进入所述已标注地毯区域。预定距离可以由生产商预先设定，也可以用用户自己设定。可以理解地，不管是清洁机器人移动到地毯边缘，通过测量物体空间位置的仪器对地毯障碍物直接检测，还是当清洁机器人撞上地毯后，再通过获取刷边电流和IMU状态的变化等间接检测。都需要清洁机器人在地毯边缘频繁探测，清洁机器人容易移动到地毯上。在拖地的工作模式下，容易沾湿地毯。在进入已标记的地毯区域时，就开始检测地毯，能够有效避免清洁机器人在地毯边缘频繁探测，减少移动到地毯上的几率。可以提高避障效果和效率。检测地毯的方式可以采用超射波传感器、红外线传感器和摄像头的等可以测量物体空间位置的仪器进行检测。清洁机器人的工作模式包括拖地、扫地和吸尘等清洁地面的模式。第一工作模式指的是拖地模式。可以理解地，清洁机器人有多种工作模式，不是所有工作模式下，清洁机器人遇到地毯都要避开。先判断处于拖地模式，再决定清洁机器人避开地毯，可以提高避障效果和效率。标注的地毯产生的方式包括，通过测量物体的空间位置仪器进行检测后，识别出真实存在的地毯，并将该地毯的空间位置生成数据，对这些数据进行标注。避障指的是指清洁机器人识别障碍物，实时更新路径并避开障碍物。在一个示例中，当检测到清洁机器人进入已标注地毯区域时，开始检测该区域中是否有地毯。如果检测出该区域有地毯，则接着检测清洁机器人的工作模式。如果检测出清洁机器人的工作模式为拖地，则控制清洁机器人避开被标注的地毯。如此，在检测到清洁机器人机进入已标注地毯区域的情况下，开始检测已标注地毯区域中的地毯。能够有效避免清洁机器人移动到地毯上才检测出地毯。在检测到该区域存在地毯的情况下，检测清洁机器人的工作模式，当清洁机器人的工作模式为第一工作模式时，控制清洁机器人根据被标注的地毯进行避障，从而可以根据清洁机器人的工作模式，决定是否进行避障。这样，根据本申请方法可以提高清洁机器人的避障效率和避障效果。请参阅图2，在某些实施方式中，控制方法包括：04：在未检测到地毯的情况下，去除已标注地毯区域的地毯标记。在某些实施方式中，处理器用于在未检测到地毯的情况下，去除已标注地毯区域的地毯标记。具体地，去除已标注地毯区域的地毯标记的方式包括，通过测量物体的空间位置仪器进行检测后，识别出没有真实存在的地毯的空间位置。接着，将原本的与该位置对应的数据删除。可以理解地，已标注地毯区域可能是错误区域。也即该区域不存在地毯。因此，在没有检测到地毯的情况下，去除地毯标记，可以及时更新已标注地毯区域的相关历史数据，提高已标注地毯区域的准确性。在一个示例中，当检测到清洁机器人进入已标注地毯区域时，开始检测该区域中是否有地毯。如果检测出该区域没有地毯，则除去已标注地毯区域的地毯标记。如此，在清洁机器人未检测到地毯的情况下，去除已标注地毯区域的地毯标记。从而提高已标注地毯区域的准确性。请参阅图3，在某些实施方式中，步骤04包括：040：在未检测到地毯的情况下，减小已标注地毯区域的置信度标记数值；041：在置信度标记数值小于预定数值的情况下，去除已标注地毯区域的地毯标记。在某些实施方式中，处理器用于在未检测到地毯的情况下，减小已标注地毯区域的置信度标记数值。以及用于在置信度标记数值小于预定数值的情况下，去除已标注地毯区域的地毯标记。具体地，标注的历史数据包括置信度标记数值。置信度标记是指该标记的真实程度。置信度标记数值，可以表示该标记的真实程度有多少，例如，置信度标记数值越大，则表示该标记的真实程度更大，也即该标记真实存在的可能性更大。减小已标注地毯区域的置信度标记数值，指的是减小已标注地毯区域这个标记的真实程度。预定数值可以由生产商预先设定，也可以用户自己设定。可以理解地，可以通过给已标注地毯区域的历史数据增加上置信度标记数值。每次在已标注的地毯区域检测没有地毯，就减小一次置信度标记数值，当置信度标记的数值小于预定数值，则去除已标注地毯区域。可以给去除已标注的地毯区域的动作提供一个缓冲区间，防止清洁机器人误删已标注的地毯区域。在一个示例中，预定数值为96％。每次当清洁机器人在已标注地毯区域里没有检测到地毯时，就减小3％的数值。当清洁机器人在该区域重复检测2次以后都没有检测到地毯，此时置信度标记数值变从100％变为94％，小于预定数值。则去除已标注地毯区域的地毯标记。如此，在清洁机器人未检测到地毯的情况下，减小已标注地毯区域的置信度标记数值。在置信度标记数值小于预定数值的情况下，去除已标注地毯区域的地毯标记。通过增加置信度标记数值，可以给去除已标注的地毯区域的动作提供一个缓冲区间，防止清洁机器人误删已标注的地毯区域。请参阅图4，在某些实施方式中，控制方法包括：05：若清洁机器人位于未标注地毯的区域且检测到地毯的情况下，检测清洁机器人的工作模式；06：若清洁机器人处于第一工作模式，控制清洁机器人进行地毯避障，并在避障结束后将当前区间标注为地毯区域。在某些实施方式中，处理器用于若清洁机器人位于未标注地毯的区域且检测到地毯的情况下，检测清洁机器人的工作模式。以及用于若清洁机器人处于第一工作模式，控制清洁机器人进行地毯避障，并在避障结束后将当前区间标注为地毯区域。具体地，未标注地毯的区域是指根据未标注的历史数据，可以判断为不存在地毯的区域。也即根据储存起来的未标注的历史数据，可以预测该区域没有地毯。控制清洁机器人进行地毯避障，指的是控制清洁机器人进行识别地毯，实时更新路径避开地毯。当前区间指的是当前控制清洁机器人进行地毯避障的路径中，与地毯的空间位置重合的部分。可以理解地，历史数据可能会遗落应该标注地毯的区域，或者地面上新增了地毯，该地毯的空间位置还未被标注和储存起来。因此，清洁机器人在未标注地毯的区域检测到地毯，可以将该区域变更为已标注地毯区域。可以及时更新已标注地毯区域的相关历史数据，提高已标注地毯区域的准确性。在一个示例中，如果清洁机器人正位于未标注地毯的区域，却检测到了地毯，则检测清洁机器人此时的工作模式。如果检测到清洁机器人处于拖地模式，则控制清洁机器人进行地毯避障。并在避障结束后将当前控制清洁机器人进行地毯避障的路径中，与地毯的空间位置重合的部分标注为地毯区域。如此，若清洁机器人位于未标注地毯的区域且检测到地毯的情况下，则开始检测清洁机器人的工作模式。若清洁机器人处于拖地模式，则控制清洁机器人进行地毯避障，并在避障结束后将当前区间标注为地毯区域。从而提高已标注地毯区域的准确性。请参阅图5，在某些实施方式中，步骤06包括：060：检测清洁机器人在第一工作模式下的任务模式；061：在清洁机器人处于第一任务模式的情况下，控制机器人根据第一模式进行地毯避障；062：在清洁机器人处于第二任务模式的情况下，控制清洁机器人根据第二模式进行地毯避障。在某些实施方式中，处理器用于检测清洁机器人在第一工作模式下的任务模式。及用于在清洁机器人处于第一任务模式的情况下，控制机器人根据第一模式进行地毯避障。以及用于在机器人处于第二任务模式的情况下，控制清洁机器人根据第二模式进行地毯避障。具体地，清洁机器人进入未标注地毯的区域时，由于没有打开检测地毯的功能，容易撞上地毯。因此，可以在清洁机器人进入未标注地毯的区域拖地时，增设地毯避障的功能。第一任务模式是指绕毯运动模式。第二任务模式是指碰撞后退模式。可以理解地，用户在使用清洁机器人拖地时，碰到地毯时，可以根据用户需求选择相应的地毯避障的模式。例如，为了尽量避免清洁机器人碰到地毯，选择沿着地毯边缘移动进行拖地的绕毯运动模式。也可以为了加快清洁的速度，选择碰到地毯后，马上后退一定距离后再进行拖地的碰撞后退模式。第一模式是指，沿着地毯边缘移动进行拖地的模式。例如，以圆弧的移动方式绕地毯边缘进行运动。也即清洁机器人在绕毯运动模式下，可以以圆弧的移动方式绕地毯边缘进行运动，从而完成地毯避障。或者以直线的移动方式沿地毯的边缘进行运动。也即清洁机器人在绕毯运动模式下，可以以直线的移动方式沿地毯的边缘进行运动，从而完成地毯避障。可以理解地，由于地毯是多边形物体，因此清洁机器人以圆弧的移动方式绕地毯边缘进行运动，探索障碍物的区域更大，也可以尽量避免移动到地毯上，还可以以比较流畅的移动方式完成转弯。同时，两点之间，直线的距离最短，因此，以直线的移动方式沿地毯的边缘进行移动，清洁机器人可以以最短的移动距离完成毯避障。第二模式是指，碰到地毯后，马上后退一定距离后再进行拖地的模式。清洁机器人后退的方向与当前行进方向不同，可以包括向与当前行进方向相反的方向，或者与当前行进方向形成90°夹角以内的方向等。后退的路径可以是直线的，也可以是曲线的。在一个示例中，在检测到清洁机器人处于拖地的模式后，开始检测清洁机器人的任务模式。如果检测到清洁机器人的任务模式是绕毯运动模式，则控制机器人根据圆弧的移动方式绕地毯边缘进行运动从而完成地毯避障，或者以直线的移动方式沿地毯的边缘进行运动，从而完成地毯避障。如果检测到清洁机器人的任务模式是碰撞后退模式，则控制机器人碰到地毯后，马上后退一定距离后再进行拖地从而完成地毯避障。如此，检测清洁机器人在第一工作模式下。如果检测到清洁机器人处于第一任务模式的情况下，控制机器人根据第一模式进行地毯避障。如果检测到清洁机器人处于第二任务模式的情况下，控制机器人根据第二模式进行地毯避障。根据不同的任务模式，选择不同的运动模式以完成地毯避障，可以为用户提供多元化的地毯避障方式。请参阅图6，在某些实施方式中，步骤061包括：0610：控制清洁机器人向与当前行进方向相反的方向行进预定距离；0611：控制清洁机器人以行进结束后的地点为起始点进行圆弧运动以进行地毯避障。在某些实施方式中，处理器用于控制清洁机器人向与当前行进方向相反的方向行进预定距离，以及用于控制清洁机器人以行进结束后的地点为起始点进行圆弧运动以进行地毯避障。具体地，前进方向是指，清洁机器人向地毯前进的方向。预定距离可以由生产商预先设定，也可以用用户自己设定。行进结束后的地点指的是指清洁机器人向前进方向相反的方向移动一定距离后，开始要改变移动方向的位置。清洁机器人在圆弧运动的过程中，可以设定圆弧之间的尺寸一致，也可以设定圆弧之间的尺寸不一致。圆弧的尺寸大小不做限制。可以理解地，在检测到地毯后，按照原本前进的方向返回一段距离，可以保证机器人离开地毯的同时不碰撞到地毯。在结束返回一段距离后，再开始进行圆弧运动，在进行圆弧运动的过程中，进行地毯避障。请参阅图7，在一个示例中，清洁机器人在未标注地毯的区域里拖地时，清洁机器人沿着路径1移动，检测到了地毯，此时控制清洁机器人向路径2移动一定距离后到达A点的位置，从A点开始改变移动方向，并按照路径3移动，以进行地毯避障。其中，路径1和路径2的方向相反，路径3的是由清洁机器人从A点开始进行圆弧运动形成的路径。如此，控制清洁机器人与前进方向相反的方向行进预定的距离后结束运动，在结束运动的地点为起始点进行圆弧运动，在圆弧运动的过程中进行地毯避障。使得清洁机器人按照第一模式进行地毯避障的时候，可以尽量避免碰撞到地毯。请参阅图8，在某些实施方式中，步骤0611包括：06110：在清洁机器人进行圆弧运动的过程中，若检测到地毯、且检测到障碍物或已返回起始点，确认清洁机器人完成地毯避障；06111：根据清洁机器人的行动轨迹，对当前区间进行地毯区域标注。在某些实施方式中，处理器用于在清洁机器人进行圆弧运动的过程中，若检测到地毯、且检测到障碍物或已返回起始点，确认清洁机器人完成地毯避障；以及用于根据清洁机器人的行动轨迹，对当前区间进行地毯区域标注。具体地，障碍物可以包括墙壁、桌椅、宠物和地毯等。清洁机器人在圆弧运动过程中，如果检测到地毯后，开始检测是否有障碍物，如果有障碍物，确认清洁机器人完成地毯避障。清洁机器人在圆弧运动过程中，如果检测到地毯后，开始检测是否回到开始进行圆弧运动的起始点，如果回到起始点，确认清洁机器人完成地毯避障。可以理解地，在进行地毯避障的过程中，清洁机器人可能会遇到墙壁和桌椅等障碍物，无法继续完成地毯避障。因此，及时确认完成地毯避障，结束圆弧运动，可以推进清洁机器人进行下一步工作流程。同时，由于清洁机器人是进行圆弧运动，所以清洁机器人很可能会运动回起始点，如果一直不结束工作，清洁机器人会一直重复执行路径一样的圆弧运动。因此，及时确认完成地毯避障，结束圆弧运动，可以节约能量，推进工作流程。行动轨迹包括清洁机器从开始进行圆弧运动到检测到障碍物的行动轨迹，和从开始进行圆弧运动到返回起始点的行动轨迹。在一个示例中，如果清洁机器人正位于未标注地毯的区域拖地，检测到了地毯，并检测到清洁机器人处于绕毯运动模式下，清洁机器人向与当前行进方向相反的方向行进预定的距离后，在结束后的地点开始进行圆弧运动，如果在圆弧运动的过程中检测到地毯，开始检测是否有障碍物，如果检测到有障碍物，确认清洁机器人完成地毯避障。然后，根据清洁机器从开始进行圆弧运动到检测到障碍物的行动轨迹，将与地毯的空间位置重合的部分标注为地毯区域。在另一个示例中，如果清洁机器人正位于未标注地毯的区域拖地，检测到了地毯，并检测到清洁机器人处于绕毯运动模式下，清洁机器人向与当前行进方向相反的方向行进预定的距离后，在结束后的地点开始进行圆弧运动，如果在圆弧运动的过程中检测到地毯，开始检测是否回到开始进行圆弧运动的起始点，如果回到起始点，确认清洁机器人完成地毯避障。然后，根据清洁机器从开始进行圆弧运动到回到起始点的行动轨迹，将与地毯的空间位置重合的部分标注为地毯区域。如此，在清洁机器人进行圆弧运动的过程中，检测到地毯和障碍物，或者检测到地毯和清洁机器人回到初始点，确认清洁机器人完成地毯避障。及时推进清洁机器人的工作流程。然后，根据清洁机器人的行动轨迹，将当前区间标注为地毯区域，及时更新已标注地毯的区域。请参阅图9，在某些实施方式中，步骤0611包括：06112：在清洁机器人进行圆弧运动的过程中，若检测到地毯但未检测到墙体或未返回起始点，控制清洁机器人向与当前行进方向相反的方向行进预定距离后进行圆弧运动以进行地毯避障。在某些实施方式中，处理器用于在清洁机器人进行圆弧运动的过程中，若检测到地毯但未检测到墙体或未返回起始点，控制清洁机器人向与当前行进方向相反的方向行进预定距离后进行圆弧运动以进行地毯避障。请参阅图10，具体地，在一个示例，清洁机器人在圆弧运动过程中，前进一段距离后，如果检测到地毯，开始检测是否有墙体或者返回起始点，如果没有墙体或者没有返回起始点，控制清洁机器人向与前进方向相反的方向行进预定距离后再次进行圆弧运动以进行地毯避障。例如，如图10所示的运动轨迹，清洁机器人在圆弧运动过程中，沿着路径4检测到地毯后，开始检测是否有墙体，如果没有检测到墙体，控制清洁机器人向路径5移动一定距离后到达A点的位置，从A点开始改变移动方向，并按照路径6移动，以进行地毯避障。其中，路径4和路径5的方向相反，路径6的是由清洁机器人从A点开始再次进行圆弧运动形成的路径。其中，路径6的圆弧路径可以小于路径4的圆弧尺寸，也即是在进行圆弧运动的过程中碰到地毯后，再次进行的圆弧运动中的圆弧尺寸大小可以小于前次圆弧运动。可以理解地，在清洁机器人的圆弧运动过程中，清洁机器人可能会再次检测到当前地毯，此时，再次控制清洁机器人往相反方向移动一段距离后重复进行圆弧运动。使得清洁机器人在离开地毯的同时可以再次进行圆弧运动，以完成对当前地毯的地毯避障。如此，在清洁机器人进行圆弧运动的过程中，若检测到地毯但未检测到墙体，或者检测到地毯但检测到未返回起始点，则控制清洁机器人向与当前行进方向相反的方向行进预定距离后进行圆弧运动，从而进行地毯避障。使得清洁机器人在离开地毯的同时可以再次进行圆弧运动，从而完成对当前地毯的地毯避障。请参阅图11，在某些实施方式中，步骤062包括：0620：控制清洁机器人在与地毯发生碰撞的情况后向与当前行进方向相反的方向行进以进行地毯避障。在某些实施方式中，处理器用于控制清洁机器人在与地毯发生碰撞的情况后向与当前行进方向相反的方向行进以进行地毯避障。具体地，设定在碰撞后退模式下，清洁机器人按照与当前行进方向相反的方向行进的方式完成后退，该后退路径是可以确定没有地毯存在的，可以尽量避免清洁机器人在后退的过程中再碰撞到地毯。但是，如果按照其它方向后退，其它方向的路径是清洁机器人没有移动过的，可能会再次撞上地毯。请参阅图12，在一个示例中，当清洁机器人进入未标注地毯的区域，碰撞到并检测到地毯后，开始检测清洁机器人的工作模式和任务模式，检测到清洁机器人处于拖地的工作模式下的碰撞后退模式。于是，控制清洁机器人按照原本前进的路返回一段距离后，再开始拖地，进行地毯避障。例如，如图11所示的路径变化，清洁机器人按照路径7碰到地毯，接着控制清洁机器人按照与路径7方向相反的路径8的方向离开一段距离后再开始拖地，进行地毯避障。如此，在清洁机器人与地毯发生碰撞的情况下，控制清洁机器人向与当前行进方向相反的方向行进从而进行地毯避障，可以尽量避免清洁机器人在后退的过程中再碰撞到地毯。请参阅图13，本申请实施方式还提供一种包含计算机程序101的非易失性计算机可读存储介质100。当计算机程序101被一个或多个处理器200执行时，使得一个或多个处理器200执行上述任一实施方式的控制方法。在本说明书的描述中，参考术语“某些实施方式”、“一个例子中”、“示例地”等的描述意指结合实施方式或示例描述的具体特征、结构、材料或者特点包含于本申请的至少一个实施方式或示例中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施方式或示例。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施方式或示例中以合适的方式结合。此外，在不相互矛盾的情况下，本领域的技术人员可以将本说明书中描述的不同实施方式或示例以及不同实施方式或示例的特征进行结合和组合。流程图中或在此以其他方式描述的任何过程或方法描述可以被理解为，表示包括一个或更多个用于实现特定逻辑功能或过程的步骤的可执行指令的代码的模块、片段或部分，并且本申请的优选实施方式的范围包括另外的实现，其中可以不按所示出或讨论的顺序，包括根据所涉及的功能按基本同时的方式或按相反的顺序，来执行功能，这应被本申请的实施方式所属技术领域的技术人员所理解。尽管上面已经示出和描述了本申请的实施方式，可以理解的是，上述实施方式是示例性的，不能理解为对本申请的限制，本领域的普通技术人员在本申请的范围内可以对上述实施方式进行变化、修改、替换和变型。
