标题title
一种双源内窥手术导航系统及方法
摘要abst
本申请提供了一种双源内窥手术导航系统及方法，涉及手术导航技术领域，其技术方案要点是：包括：荧光内窥导航模块，用于获取目标的荧光图像，并确定所述目标的手术位置；三维导航模块，用于构建所述目标的三维模型以及跟踪所述荧光内窥导航模块的位置，并在所述三维模型中建立所述荧光内窥导航模块的模型，所述荧光内窥导航模块的位置与手术工具的位置关联；显示模块，用于显示所述荧光图像、所述荧光内窥导航模块以及所述手术工具在所述三维模型中的位置。本申请提供的一种双源内窥手术导航系统及方法具有提高手术操作准确度和手术成功率的优点。
权利要求书clms
1.一种双源内窥手术导航系统，其特征在于，包括：荧光内窥导航模块，用于获取目标的荧光图像，并确定所述目标的手术位置；三维导航模块，用于构建所述目标的三维模型以及跟踪所述荧光内窥导航模块的位置，并在所述三维模型中建立所述荧光内窥导航模块的模型，所述荧光内窥导航模块的位置与手术工具的位置关联；所述三维导航模块包括：三维重建单元，用于构建所述目标的三维模型；光学跟踪单元，所述光学跟踪单元包括固定元件以及跟踪元件，所述荧光内窥导航模块固定在所述固定元件上，所述跟踪元件用于对所述荧光内窥导航模块的姿态以及位置进行实时跟踪；显示模块，用于显示所述荧光图像、所述荧光内窥导航模块以及所述手术工具在所述三维模型中的位置。2.根据权利要求1所述的一种双源内窥手术导航系统，其特征在于，所述荧光内窥导航模块包括：光源单元，用于产生光线，使所述光线照射在所述目标上；摄像单元，用于接收所述目标的反射光，根据所述反射光生成所述荧光图像。3.根据权利要求1所述的一种双源内窥手术导航系统，其特征在于，所述三维导航模块还包括规划单元，所述规划单元用于根据所述三维模型事先规划手术方案，并将所述手术方案显示在所述显示模块上。4.一种双源内窥手术导航方法，其特征在于，包括：获取目标的三维模型信息；获取所述目标的荧光图像信息，所述荧光图像信息通过荧光内窥导航模块获得；根据所述目标的三维模型信息以及所述荧光图像信息对所述目标的手术进行导航。5.根据权利要求4所述的一种双源内窥手术导航方法，其特征在于，所述根据所述目标的三维模型信息以及所述荧光图像信息对所述目标的手术进行导航的步骤包括：获取所述荧光内窥导航模块的第一位置信息；将所述荧光内窥导航模块的第一位置信息匹配至所述目标的三维模型上，得到所述荧光内窥导航模块在所述三维模型上的第二位置信息；根据所述荧光图像信息以及所述第二位置信息对所述目标的手术进行导航。6.根据权利要求5所述的一种双源内窥手术导航方法，其特征在于，所述根据所述荧光图像信息以及所述第二位置信息对所述目标的手术进行导航的步骤包括：关联所述荧光内窥导航模块与手术工具的相对位置关系；根据所述荧光内窥导航模块的所述第二位置信息得到所述手术工具的第三位置信息；根据所述荧光图像信息以及所述第三位置信息对所述目标的手术进行导航。7.根据权利要求6所述的一种双源内窥手术导航方法，其特征在于，还包括：获取事先规划的手术方案；根据所述事先规划的手术方案、所述荧光图像信息以及所述第三位置信息对所述目标的手术进行导航。8.根据权利要求7所述的一种双源内窥手术导航方法，其特征在于，所述事先规划的手术方案至少包括主要分支血管的位置信息。9.根据权利要求8所述的一种双源内窥手术导航方法，其特征在于，还包括：根据所述第三位置信息以及所述主要分支血管的位置信息进行预警。
说明书desc
技术领域本申请涉及手术导航技术领域，具体而言，涉及一种双源内窥手术导航系统及方法。背景技术早期的手术导航系统主要是术中超声导航系统，在术中实时用超声探测病灶或者组织形态，以达到精准手术的目的。但是由于术中超声存在较多限制，如腔内气体干扰等，实际临床应用并不普及。随着AR技术和CT技术发展，以术前CT数据为基础进行三维建模，并将三维模型实时融合到二维内窥图像中进行手术导航，这种导航方式逐渐普及。但目前这种结构信息导航的方式还存在较多问题，如三维模型与实际的组织无法一对一匹配，精度不符合临床需求，部分情况下反而会影响术中操作。针对上述问题，申请人提出了一种新的手术导航方案。发明内容本申请的目的在于提供一种双源内窥手术导航系统及方法，具有提高手术操作准确度和手术成功率的优点。第一方面，本申请提供了一种双源内窥手术导航系统，技术方案如下：包括：荧光内窥导航模块，用于获取目标的荧光图像，并确定所述目标的手术位置；三维导航模块，用于构建所述目标的三维模型以及跟踪所述荧光内窥导航模块的位置，并在所述三维模型中建立所述荧光内窥导航模块的模型，所述荧光内窥导航模块的位置与手术工具的位置关联；显示模块，用于显示所述荧光图像、所述荧光内窥导航模块以及所述手术工具在所述三维模型中的位置。利用荧光内窥导航模块实现荧光导航，利用三维导航模块实现三维导航，然后将两种导航方式相结合，利用荧光内窥导航模块获取目标的荧光图像，将荧光图像与三维模型相互对照验证，互为补充，解决现有技术中三维模型精度不高，无法与组织完全一一匹配的问题。进一步地，在本申请中，所述荧光内窥导航模块包括：光源单元，用于产生光线，使所述光线照射在所述目标上；摄像单元，用于接收所述目标的反射光，根据所述反射光生成所述荧光图像。通过光源单元照亮目标，然后由摄像单元接收反射光并生成图像，从而进行导航。进一步地，在本申请中，所述三维导航模块包括：三维重建单元，用于构建所述目标的三维模型；光学跟踪单元，所述光学跟踪单元包括固定元件以及跟踪元件，所述荧光内窥导航模块固定在所述固定元件上，所述跟踪元件用于对所述荧光内窥导航模块的姿态以及位置进行实时跟踪。利用三维重建单元构建三维模型，利用光学跟踪单元追踪荧光内窥导航模块的位置，从而实现两种导航方式互补参照的效果。进一步地，在本申请中，所述三维导航模块还包括规划单元，所述规划单元用于根据所述三维模型事先规划手术方案，并将所述手术方案显示在所述显示模块上。第二方面，本申请还提供一种双源内窥手术导航方法，包括：获取目标的三维模型信息；获取所述目标的荧光图像信息，所述荧光图像信息通过荧光内窥导航模块获得；根据所述目标的三维模型信息以及所述荧光图像信息对所述目标的手术进行导航。进一步地，在本申请中，所述根据所述目标的三维模型信息以及所述荧光图像信息对所述目标的手术进行导航的步骤包括：获取所述荧光内窥导航模块的第一位置信息；将所述荧光内窥导航模块的第一位置信息匹配至所述目标的三维模型上，得到所述荧光内窥导航模块在所述三维模型上的第二位置信息；根据所述荧光图像信息以及所述第二位置信息对所述目标的手术进行导航。进一步地，在本申请中，所述根据所述荧光图像信息以及所述第二位置信息对所述目标的手术进行导航的步骤包括：关联所述荧光内窥导航模块与手术工具的相对位置关系；根据所述荧光内窥导航模块的所述第二位置信息得到所述手术工具的第三位置信息；根据所述荧光图像信息以及所述第三位置信息对所述目标的手术进行导航。进一步地，在本申请中，还包括：获取事先规划的手术方案；根据所述事先规划的手术方案、所述荧光图像信息以及所述第三位置信息对所述目标的手术进行导航。进一步地，在本申请中，所述事先规划的手术方案至少包括主要分支血管的位置信息。进一步地，在本申请中，还包括：根据所述第三位置信息以及所述主要分支血管的位置信息进行预警。由上可知，本申请提供的一种双源内窥手术导航系统及方法，利用荧光内窥导航模块实现荧光导航，利用三维导航模块实现三维导航，然后将两种导航方式相结合，利用荧光内窥导航模块获取目标的荧光图像，将荧光图像与三维模型相互对照验证，互为补充，因此具有提高手术操作准确度和手术成功率的有益效果。本申请的其他特征和优点将在随后的说明书阐述，并且，部分地从说明书中变得显而易见，或者通过实施本申请了解。本申请的目的和其他优点可通过在所写的说明书、权利要求书、以及附图中所特别指出的结构来实现和获得。附图说明图1为本申请提供的一种双源内窥手术导航系统结构示意图。图2为本申请提供的一种双源内窥手术导航系统结构示意图。图3为本申请提供的一种双源内窥手术导航方法流程图。图中：100、荧光内窥导航模块；200、三维导航模块；300、显示模块；110、光源单元；120、摄像单元；210、三维重建单元；220、光学跟踪单元；230、规划单元。具体实施方式下面将结合本申请中附图，对本申请中的技术方案进行清楚、完整地描述，显然，所描述的实施例仅仅是本申请一部分实施例，而不是全部的实施例。通常在此处附图中描述和示出的本申请的组件可以以各种不同的配置来布置和设计。因此，以下对在附图中提供的本申请的实施例的详细描述并非旨在限制要求保护的本申请的范围，而是仅仅表示本申请的选定实施例。基于本申请的实施例，本领域技术人员在没有做出创造性劳动的前提下所获得的所有其他实施例，都属于本申请保护的范围。应注意到：相似的标号和字母在下面的附图中表示类似项，因此，一旦某一项在一个附图中被定义，则在随后的附图中不需要对其进行进一步定义和解释。同时，在本申请的描述中，术语“第一”、“第二”等仅用于区分描述，而不能理解为指示或暗示相对重要性。在现有的手术导航方式中，通常采用三维结构导航的方式进行导航，但是三维结构导航的方式对术前的数据要求十分准确，通常通过术前CT来获取数据，然后根据术前的CT数据建立三维模型，而如果术前的CT数据存在干扰噪声，则会导致建立的三维模型精度不高，难以发挥真正的作用，因此，三维结构导航目前仅仅只是存在与理论阶段，难以应用到实际的手术中。对此，申请人提出了一种将三维结构导航与荧光导航结合的方案。请参照图1至图3，一种双源内窥手术导航系统，其技术方案具体包括：荧光内窥导航模块100，用于获取目标的荧光图像，并确定目标的手术位置；其中，目标指的可以是生物体。三维导航模块200，用于构建目标的三维模型以及跟踪荧光内窥导航模块100的位置，并在三维模型中建立荧光内窥导航模块100的模型，荧光内窥导航模块100的位置与手术工具的位置关联；显示模块300，用于显示荧光图像、荧光内窥导航模块100以及手术工具在三维模型中的位置。其中，显示模块300可以包含有至少两块显示屏，至少一块显示屏用于显示荧光图像，至少一块显示屏用于显示荧光内窥导航模块100以及手术工具在三维模型中的位置，这样有利于医生进行对照验证。通过上述技术方案，利用荧光内窥导航模块100实现荧光导航，利用三维导航模块200实现三维导航，然后将两种导航方式相结合，利用荧光内窥导航模块100获取目标的荧光图像，将荧光图像与三维模型相互对照验证，互为补充，解决现有技术中三维模型精度不高，无法与目标组织完全一一匹配的问题。进一步地，在其中一些实施例中，荧光内窥导航模块100包括：光源单元110，用于产生光线，使光线照射在目标上；摄像单元120，用于接收目标的反射光，根据反射光生成荧光图像。通过上述技术方案，利用光源单元110照射在目标上，目标做好荧光标记，光线包括白光以及激光，白光以及激光同时照射在目标上，目标发出近红外光以及反射白光，并通过摄像单元120分别接收成像，然后通过现有的图像算法融合，形成荧光图像，进而实现荧光导航。在目前的实际手术过程中，例如在对肿瘤进行切除的手术中，如果肿瘤较小，即癌细胞较少，使用传统的内窥镜或者三维导航的方式进行导航的话，肿瘤与目标组织的边界难以区分，这就给医生动手术带来了很大的干扰。因此，在一些实施方式中，可以给目标注射吲哚菁绿，吲哚菁绿会与血浆蛋白结合，光源单元110可以发出白光以及波长为805mm的激光，吲哚菁绿与血浆蛋白结合以后，在波长为805mm的激光照射下，可以激发出波长为835mm的近红外光，因此，光源单元110发生的白光以及波长为805mm的激光照射在被注射了吲哚菁绿的目标上之后，目标会发出波长为835mm的近红外光同时反射白光，摄像单元120可以包含两个相机，一个相机用于接收白光，另一个相机用于接收波长为835mm的近红外光，然后分别成像，最后通过算法融合，形成荧光图像，通过使肿瘤区域显色，进而实现导航的效果，使医生可以很清楚的分析肿瘤所在的区域。摄像单元120用于接收目标的反射光，这里的反射光包含了目标反射的白光以及目标发出的波长为835mm的近红外光。进一步地，在其中一些实施例中，三维导航模块200包括：三维重建单元210，用于构建目标的三维模型；光学跟踪单元220，光学跟踪单元220包括固定元件以及跟踪元件，荧光内窥导航模块100固定在固定元件上，跟踪元件用于对荧光内窥导航模块100的姿态以及位置进行实时跟踪。通过上述技术方案，利用三维重建单元210构建目标的三维模型，然后利用光学跟踪单元220对荧光内窥导航模块100的姿态以及位置进行跟踪，在目标的三维模型内实时显示荧光内窥导航模块100的位置，因此，实施手术的医生可以观察到荧光内窥导航模块100生成的荧光图像，同时还可以观察到荧光导航模块在目标三维模型上的位置，由于手术工具的位置与荧光导航模块的位置相关联，因此可以确定手术工具的位置，医生可以结合荧光导航和三维导航，进而更准确的判断实施手术的位置以及手术工具的位置，从而提高手术操作准确度和手术成功率。具体的，三维重建单元210可以是图像处理工作站或计算机，在一些具体实施方式中，通过CT检测得到目标术前的数据，并将目标的组织，例如肝脏、动脉血管、静脉血管、肿瘤等组织分割出来，然后通过三维重建单元210进行三维建模，其中，组织的分割方法可以采用半自动交互分割法，然后利用深度学习技术，采用V-Net网络对肝脏、血管、肿瘤等组织进行自动提取和分割，再由医生对组织边界进行细化处理，使得分割组织解剖边界更准确。光学跟踪单元220包括固定元件以及跟踪元件，其中，固定元件可以是一个导航架，将荧光内窥导航模块100固定在导航架上，跟踪元件可以是一个光学摄像头，光学摄像头对准导航架上的荧光内窥导航模块100，实时跟踪荧光内窥导航模块100的姿态和位置，并且，以跟踪元件作为原点建立坐标系，可以得到荧光内窥导航模块100在目标体内的实际坐标位置，然后将荧光内窥导航模块100的实际坐标位置通过坐标转换矩阵转换至三维模型的坐标内，从而可以在三维模型内显示荧光内窥导航模块100的实时位置。进一步地，在其中一些实施例中，三维导航模块200还包括规划单元230，规划单元230用于根据三维模型事先规划手术方案，并将手术方案显示在显示模块300上。通过上述技术方案，利用规划单元230录入事先规划好的手术方案，然后在实际手术过程中，可以将手术方案展示在显示模块300上，给实施手术的医生提供参考。在手术前规划手术方案是目前临床外科具有重要临床意义的一个步骤，对手术方案选择，手术路径规划具有重要指导意义。术前规划手术方案指的是针对当前手术规划方案评估组织状态，以确定最佳方案。目前的手术方案的规划还存在许多的不足，现有的手术方案的规划主要过程都是集中在术前，手术方案需要医生在术前完成并熟悉，在具体实施手术的过程中，较难将手术方案与术中场景进行一一对应。针对目前手术方案规划存在的问题，本申请提出了将术前规划的手术方案加入三维导航模块200中，在手术实时三维导航的过程中，可选择规划好的手术方案进行导航，实时显示术前手术方案的内容和术前评估得到的组织信息，将规划路径与术中场景匹配，能够有效增强手术导航效果，便于医生在术中及时调整手术路径，增强导航效果。对此，在这基础上，采用荧光导航的方式还起到了对照验证的作用，因为实际手术过程与事先规划好的手术方案不一定完全对应，例如在切除肿瘤的手术中，医生按照事先规划好的路径进行手术，在这个过程中，可以通过荧光图像验证事先规划好的手术方案中，其路径是否包含有肿瘤，这可以通过荧光图像快速进行识别，可以对事先规划好的手术方案进行对照验证，防止事先规划的手术方案存在错误，而医生仍然按照错误的手术方案进行手术。第二方面，参照图1至图3，本申请还提供一种双源内窥手术导航方法，包括：S110、获取目标的三维模型信息；其中，三维模型信息可以通过术前CT获取目标数据，然后通过计算机生成三维模型；S120、获取目标的荧光图像信息，荧光图像信息通过荧光内窥导航模块100获得；具体的，荧光内窥导航模块100可以是荧光内窥镜。S130、根据目标的三维模型信息以及荧光图像信息对目标的手术进行导航。通过上述技术方案，利用荧光内窥导航模块100实现荧光导航，利用三维模型信息实现三维导航，然后将两种导航方式相结合，利用荧光内窥导航模块100获取目标的荧光图像，将荧光图像与三维模型信息相互对照验证，互为补充，解决现有技术中利用三维模型进行导航但是精度不高，无法与目标组织完全一一匹配的问题。具体的，可以设置两个显示屏，其中一个显示屏根据目标的三维模型信息显示目标的三维模型，另一个显示屏则显示荧光图像信息，可以使医生更好的进行对照验证。进一步地，在其中一些实施例中，根据目标的三维模型信息以及荧光图像信息对目标的手术进行导航的步骤包括：获取荧光内窥导航模块100的第一位置信息；其中，可以通过光学摄像头实时追踪荧光内窥导航模块100的第一位置信息。将荧光内窥导航模块100的第一位置信息匹配至目标的三维模型上，得到荧光内窥导航模块100在三维模型上的第二位置信息；根据荧光图像信息以及第二位置信息对目标的手术进行导航。通过上述技术方案，将荧光内窥导航模块100在目标内的实际位置映射至目标的三维模型上，荧光内窥导航模块100在实际移动时，其移动的信息可以实时反映在目标的三维模型上，结合荧光内窥导航模块100在目标三维模型上的位置以及荧光内窥导航模块100获得的荧光图像信息，可以给医生带来准确的导航，从而提高手术操作准确度和手术成功率。具体的，将荧光内窥导航模块100的第一位置信息匹配至目标的三维模型上的步骤主要包括定标以及坐标系转化，具体为：将荧光内窥导航模块100放置在目标预先标记的三个点上，并记录三个点的坐标，然后获取目标三维模型内对应的三个点的坐标，根据实际的三个点的坐标与三维模型上对应的三个点的坐标得到坐标转换矩阵，然后根据坐标转换矩阵可以确定荧光内窥导航模块100在三维模型中的位置，并根据荧光内窥导航模块100的实际形状尺寸以及姿态，在三维模型上建立荧光内窥导航模块100的模型，即虚拟的荧光内窥导航模块100，使医生可以直观的观察荧光内窥导航模块100在目标内的移动。进一步地，在其中一些实施例中，获取荧光内窥导航模块100的成像参数信息，成像参数信息至少包括成像的视角信息，根据视角信息，得到虚拟的荧光内窥导航模块100在目标三维模型下的视野图像，医生可以根据该视野图像与实际的荧光内窥导航模块100生成的荧光图像信息做对比，从而起到更好的导航效果。进一步地，在其中一些实施例中，实时跟踪荧光内窥导航模块100的姿态，根据荧光内窥导航模块100的姿态实时显示虚拟的荧光内窥导航模块100在目标三维模型下的视野图像。具体的，可以采用光学摄像头对荧光内窥导航模块100的姿态进行跟踪。进一步地，在其中一些实施例中，根据荧光图像信息以及第二位置信息对目标的手术进行导航的步骤包括：关联荧光内窥导航模块100与手术工具的相对位置关系；根据荧光内窥导航模块100的第二位置信息得到手术工具的第三位置信息；根据荧光图像信息以及第三位置信息对目标的手术进行导航。通过上述技术方案，手术工具的位置与荧光内窥导航模块100的位置相关联，在确定荧光内窥导航模块100的位置之后，便可以确定手术工具的位置，并且可以将手术工具同样实时显示在目标的三维模型上，医生便可以通过荧光内窥导航模块100准确寻找到手术位置，然后将手术工具移动至手术位置进行手术。具体的，可以在手术工具上安装追踪球，追踪球与荧光内窥导航模块100关联，只要荧光内窥导航模块100的位置确定了，就可以根据荧光内窥导航模块100与手术工具的相对位置确定手术工具的实际位置。进一步地，在其中一些实施例中，还包括：获取事先规划的手术方案；根据事先规划的手术方案、荧光图像信息以及第三位置信息对目标的手术进行导航。通过上述技术方案，获取事先规划好的手术方案，然后在实际手术过程中，可以将手术方案展示在目标的三维模型上，给实施手术的医生提供参考。在手术前规划手术方案是目前临床外科具有重要临床意义的一个步骤，对手术方案选择，手术路径规划具有重要指导意义。术前规划手术方案指的是针对当前手术规划方案评估组织状态，以确定最佳方案。目前的手术方案的规划还存在许多的不足，现有的手术方案的规划主要过程都是集中在术前，手术方案需要医生在术前完成并熟悉，在具体实施手术的过程中，较难将手术方案与术中场景进行一一对应。针对目前手术方案规划存在的问题，本申请提出了根据事先规划的手术方案、荧光图像信息以及第三位置信息对目标的手术进行导航，实时显示术前手术方案的内容和术前评估得到的组织信息，将规划路径与术中场景匹配，能够有效增强手术导航效果，便于医生在术中及时调整手术路径，增强导航效果。进一步地，在其中一些实施例中，事先规划的手术方案至少包括主要分支血管的位置信息；其中，主要分支血管可以由医生在规划手术方案时根据实际情况进行筛选。然后根据第三位置信息以及主要分支血管的位置信息进行预警。通过上述技术方案，通过第三位置信息以及主要分支血管的位置信息进行预警，防止手术工具对目标的主要分支血管造成损伤。因为在实际手术过程中，如果手术工具离目标组织的主要分支血管过近，就很容易与主要分支血管接触，进而划伤主要分支血管，因此，当手术工具离主要分支血管过于接近的时候，需要进行预警，以提醒医生。具体的，可以通过流域分析算法来确定影响比较大的血管，将影响比较大的血管设为主要分支血管，预警方式可以通过图像处理的方式，当靠近主要分支血管时，将主要分支血管的显示变红，还可以增加一定透明度的低频红色信号，作为警示荧光。进一步地，事先规划的手术方案至少包括手术范围信息，确定手术范围内的主要分支血管的位置信息，由于医生需要在手术范围内开展手术，因此主要是在手术范围内操作手术工具，即，在手术范围内，手术工具更容易与主要分支血管发生接触，因此可以仅针对手术范围内的主要分支血管进行预警。进一步地，当手术工具靠近手术范围时，也可以进行预警，可以用于提醒医生，具体的，当手术工具靠近手术范围或警示血管3cm时，发生预警用于提醒医生。以上所述仅为本申请的实施例而已，并不用于限制本申请的保护范围，对于本领域的技术人员来说，本申请可以有各种更改和变化。凡在本申请的精神和原则之内，所作的任何修改、等同替换、改进等，均应包含在本申请的保护范围之内。
