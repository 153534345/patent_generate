标题title
一种基于人体三维图像测量脊柱侧弯的方法、装置和设备
摘要abst
本发明公开了一种基于人体三维图像测量脊柱侧弯的方法、装置和设备，以解决现有技术中利用X光提取脊椎坐标辐射较大，以及利用其他方法准确性低或者计算过程繁琐且运算量大的问题。本发明的解决思路是：基于获取到的高精度待测人体三维图像，将所述三维图像中的人体模型与提前建立的标准脊柱模型进行配准，然后计算待测人体模型每个脊椎的坐标，进而根据得到的待测人体模型每个脊椎的坐标，计算Cobb角。本发明通过获取到的高精度待测人体三维图像可以很好地表达脊柱的三维特点，精准度较高，同时还避免了传统X光对人体造成的辐射；另外本发明不需要利用复杂、繁琐的算法就能测量脊柱的侧弯程度，很大程度减少了运算量。
权利要求书clms
1.一种基于人体三维图像测量脊柱侧弯的方法，其特征在于，所述方法包括：步骤一，基于获取到的高精度待测人体三维图像，将所述三维图像中的人体模型与提前建立的标准脊柱模型进行配准；步骤二，计算待测人体模型每个脊椎的坐标；步骤三，根据得到的待测人体模型每个脊椎的坐标，计算Cobb角。2.根据权利要求1所述的方法，其特征在于，步骤一中所述的将三维图像中的人体模型与提前建立的标准脊柱模型进行配准，具体包括：基于识别到的三维图像中人体模型的第七颈椎C7、左侧髂后上棘DL以及右侧髂后上棘DR这三个特征点，获取所述三个特征点的三维坐标，以及获取标准脊柱模型每个脊椎三维模型的顶点中心的坐标；分别计算待测人体模型的脊柱高度S0和标准脊柱模型的脊柱高度S1，并计算S0/S1的比值a，然后将标准脊柱模型每个脊椎的顶点中心Z坐标的值乘以所述比值a；基于得到的标准脊柱模型每个脊椎三维模型的顶点中心Z坐标新的数值，计算待测人体模型第七颈椎的Z坐标的值z0与标准脊柱模型第七颈椎的Z坐标的值z1的差值b，然后将标准脊柱模型每个脊椎的顶点中心Z坐标的值加上所述差值b。3.根据权利要求2所述的方法，其特征在于，所述分别计算待测人体模型的脊柱高度S0和标准脊柱模型的脊柱高度S1，具体包括：计算待测人体模型的左侧髂后上棘DL与右侧髂后上棘DR连线中点DLR_center的三维坐标；计算待测人体模型的第七颈椎C7与DLR_center之间垂直方向的距离，该距离即为人体模型脊柱高度S0；计算标准脊柱模型的第七颈椎与左侧髂后上棘或右侧髂后上棘之间垂直方向的距离，该距离即为标准脊柱模型的脊柱高度S1。4.根据权利要求1所述的方法，其特征在于，步骤二中所述的计算待测人体模型每个脊椎的坐标，具体包括：基于配准后得到的标准脊柱模型每个脊椎三维模型的顶点中心Z坐标新的数值，分别在标准脊柱模型每个脊椎的顶点Z坐标的值处对待测人体模型作水平截面；计算每个截面与待测人体模型形成的截面线上的凸点坐标，得到的每一个凸点的坐标就是凸点所在截面对应的待测人体模型的脊椎中心点坐标。5.根据权利要求1所述的方法，其特征在于，步骤一中所述的获取到的高精度待测人体三维图像是通过高精度三维人体扫描仪对人体进行扫描获取的，所述人体三维图像，包括人体全身三维图像和后背局部三维图像。6.根据权利要求1所述的方法，其特征在于，步骤三中所述的计算Cobb角，具体包括：将得到的待测人体模型每一个脊椎中心点由上到下依次连接起来组成连续向量，计算每条向量与垂直轴的夹角；找到最大夹角对应的向量以及最小夹角对应的向量，两个向量在冠状面的夹角即待测人体模型的Cobb角。7.一种基于人体三维图像测量脊柱侧弯的装置，其特征在于，所述装置包括：人体模型配准模块，用于基于获取到的高精度待测人体三维图像，将所述三维图像中的人体模型与提前建立的标准脊柱模型进行配准；脊椎点坐标计算模块，用于计算待测人体模型每个脊椎的坐标；Cobb角计算模块，用于根据得到的待测人体模型每个脊椎的坐标，计算Cobb角。8.一种基于人体三维图像测量脊柱侧弯的设备，其特征在于，所述设备包括：高精度三维人体扫描仪，用于对人体进行扫描，输出高精度的待测人体三维图像；数据处理设备，包括存储器和处理器，用于对所述待测人体三维图像进行处理，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时实现权利要求1至6中任一项所述的方法的步骤，最终输出Cobb角计算结果。9.一种基于人体三维图像测量脊柱侧弯的方法，其特征在于，所述方法包括：步骤一，基于获取到的高精度待测人体全身或人体上半部分三维图像，将所述三维图像中的人体模型整体与提前建立的标准人体模型进行配准；步骤二，根据所述三维图像中的人体模型的身体形态，调整标准人体模型的身体形态，使标准人体模型每个脊椎的位置和待测人体模型每个脊椎的位置一致，得到的每个标准人体模型变化后的脊椎点坐标即为待测人体模型相对应的每个脊椎点坐标；步骤三，根据得到的待测人体模型每个脊椎的坐标，计算Cobb角。10.根据权利要求9所述的方法，其特征在于，所述获取到的高精度待测人体全身或人体上半部分三维图像，是通过高精度三维人体扫描仪对人体进行扫描获取的。
说明书desc
技术领域本申请涉及脊柱侧弯防治技术领域，特别是涉及一种基于人体三维图像测量脊柱侧弯的方法、装置和设备。背景技术脊柱侧弯是一种脊柱的三维畸形，严重的脊柱侧弯会影响人的外观，甚至影响呼吸和消化功能，进一步恶化会累及脊髓，造成瘫痪，因此对于防治这种疾病的关键是早发现、早诊断、早治疗。医学领域判断脊柱侧弯程度最常采用的指标是脊柱的Cobb角，目前比较准确的方式是基于X光片图像提取脊柱各个脊椎的坐标来计算Cobb角，通过Cobb角来判断脊柱弯曲情况。这种方法的优点是可以直接看到脊椎骨的位置，测量结果较为准确，但是缺点也很明显，即X光对人体有辐射，这种方法对健康危害较大。现有技术中有其他关于脊柱侧弯的测量方法，例如公开号为CN109431511A的专利文献公开了一种基于数字图像处理的人体背部脊柱侧弯角度测量方法，该方法通过数码相机拍摄人体背部图片，通过二维图像处理提取背部脊柱线，进而计算Cobb角。这种方法虽然没有辐射，但是需要大量人工干预处理过程，并且是得到的只有人体脊柱的二维信息，没有将脊柱的三维特点很好表达出来，因此准确性不高。再例如，公开号为CN107481228A的专利文献公开了一种基于计算机视觉的人体背部脊侧弯角度测量方法，该方法采用kinect深度传感器拍摄人体背部图像，采用Lawson算法对该背部图像进行三角部分处理得到人体背部三维重建模型，然后对该模型做等高线处理并计算脊柱相关数据，最后建立相关性模型并对人体脊柱中线三维曲线进行三维重构，进而计算Cobb角。该方法计算Cobb角的过程极其繁琐且运算量大，并且通过深度相机得到的后背信息精度较低。发明内容基于此，本发明实施例为了解决上述测量脊柱侧弯程度的现有技术中存在的技术问题，提供了一种基于人体三维图像测量脊柱侧弯的方法、装置和设备。根据本发明实施例的一个方面，提供了一种基于人体三维图像测量脊柱侧弯的方法，所述方法包括：步骤一，基于获取到的高精度待测人体三维图像，将所述三维图像中的人体模型与提前建立的标准脊柱模型进行配准；步骤二，计算待测人体模型每个脊椎的坐标；步骤三，根据得到的待测人体模型每个脊椎的坐标，计算Cobb角。进一步地，步骤一中所述的将三维图像中的人体模型与提前建立的标准脊柱模型进行配准，具体包括：基于识别到的三维图像中人体模型的第七颈椎C7、左侧髂后上棘DL以及右侧髂后上棘DR这三个特征点，获取所述三个特征点的三维坐标，以及获取标准脊柱模型每个脊椎三维模型的顶点中心的坐标；分别计算待测人体模型的脊柱高度S0和标准脊柱模型的脊柱高度S1，并计算S0/S1的比值a，然后将标准脊柱模型每个脊椎的顶点中心Z坐标的值乘以所述比值a；基于得到的标准脊柱模型每个脊椎三维模型的顶点中心Z坐标新的数值，计算待测人体模型第七颈椎的Z坐标的值z0与标准脊柱模型第七颈椎的Z坐标的值z1的差值b，然后将标准脊柱模型每个脊椎的顶点中心Z坐标的值加上所述差值b。进一步地，所述分别计算待测人体模型的脊柱高度S0和标准脊柱模型的脊柱高度S1，具体包括：计算待测人体模型的左侧髂后上棘DL与右侧髂后上棘DR连线中点DLR_center的三维坐标；计算待测人体模型的第七颈椎C7与DLR_center之间垂直方向的距离，该距离即为人体模型脊柱高度S0；计算标准脊柱模型的第七颈椎与左侧髂后上棘或右侧髂后上棘之间垂直方向的距离，该距离即为标准脊柱模型的脊柱高度S1。进一步地，步骤二中所述的计算待测人体模型每个脊椎的坐标，具体包括：基于配准后得到的标准脊柱模型每个脊椎三维模型的顶点中心Z坐标新的数值，分别在标准脊柱模型每个脊椎的顶点Z坐标的值处对待测人体模型作水平截面；计算每个截面与待测人体模型形成的截面线上的凸点坐标，得到的每一个凸点的坐标就是凸点所在截面对应的待测人体模型的脊椎中心点坐标。优选地，步骤一中所述的获取到的高精度待测人体三维图像是通过高精度三维人体扫描仪对人体进行扫描获取的，所述人体三维图像，包括人体全身三维图像和后背局部三维图像。进一步地，步骤三中所述的计算Cobb角，具体包括：将得到的待测人体模型每一个脊椎中心点由上到下依次连接起来组成连续向量，计算每条向量与垂直轴的夹角；找到最大夹角对应的向量以及最小夹角对应的向量，两个向量在冠状面的夹角即待测人体模型的Cobb角。根据本发明实施例的另一个方面，提供了一种基于人体三维图像测量脊柱侧弯的装置，所述装置包括：人体模型配准模块，用于基于获取到的高精度待测人体三维图像，将所述三维图像中的人体模型与提前建立的标准脊柱模型进行配准；脊椎点坐标计算模块，用于计算待测人体模型每个脊椎的坐标；Cobb角计算模块，用于根据得到的待测人体模型每个脊椎的坐标，计算Cobb角。根据本发明实施例的另一个方面，提供了一种基于人体三维图像测量脊柱侧弯的设备，所述设备包括：高精度三维人体扫描仪，用于对人体进行扫描，输出高精度的待测人体三维图像；数据处理设备，包括存储器和处理器，用于对所述待测人体三维图像进行处理，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时实现权利要求1至6中任一项所述的方法的步骤，最终输出Cobb角计算结果。根据本发明实施例的另一个方面，提供了一种基于人体三维图像测量脊柱侧弯的方法，所述方法包括：步骤一，基于获取到的高精度待测人体全身或人体上半部分三维图像，将所述三维图像中的人体模型整体与提前建立的标准人体模型进行配准；步骤二，根据所述三维图像中的人体模型的身体形态，调整标准人体模型的身体形态，使标准人体模型每个脊椎的位置和待测人体模型每个脊椎的位置一致，得到的每个标准人体模型变化后的脊椎点坐标即为待测人体模型相对应的每个脊椎点坐标；步骤三，根据得到的待测人体模型每个脊椎的坐标，计算Cobb角。进一步地，所述获取到的高精度待测人体全身或人体上半部分三维图像，是通过高精度三维人体扫描仪对人体进行扫描获取的。本发明至少具有以下有益效果：本发明基于获取到的高精度待测人体三维图像，将所述三维图像中的人体模型与提前建立的标准脊柱模型进行配准，然后计算待测人体模型每个脊椎的坐标，进而根据得到的待测人体模型每个脊椎的坐标，计算Cobb角。本发明通过获取到的高精度待测人体三维图像可以很好地表达脊柱的三维特点，精准度较高，同时还避免了传统X光对人体造成的辐射；另外本发明不需要利用复杂、繁琐的算法就能测量脊柱的侧弯程度，很大程度减少了运算量。附图说明图1为本发明一个实施例提供的一种基于人体三维图像测量脊柱侧弯的方法流程示意图；图2为本发明一个实施例提供的一个人体脊柱CT图像；图3为本发明一个实施例提供的一个人体三维图像；图4为本发明一个实施例提供的一个标准脊柱模型图；图5为本发明一个实施例提供的一个对人体三维模型作水平截面示意图；图6为本发明一个实施例提供的一个截面线示意图；图7为本发明一个实施例提供的一个人体基本切面图；图8为本发明一个实施例提供的一种基于人体三维图像测量脊柱侧弯的装置示意图；图9为本发明一个实施例提供的一种基于人体三维图像测量脊柱胸曲的方法流程示意图；图10为本发明一个实施例提供的一个计算胸曲和腰曲的示意图；图11为本发明一个实施例提供的一种基于人体三维图像测量脊柱胸曲的装置示意图；图12为本发明一个实施例提供的一种基于人体三维图像测量脊柱腰曲的方法流程示意图；图13为本发明一个实施例提供的一种基于人体三维图像测量脊柱腰曲的装置示意图；图14为本发明一个实施例提供的一种基于人体三维图像测量脊柱侧弯的方法流程示意图；图15为本发明一个实施例提供的一个调整标准人体模型的身体形态示意图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行进一步详细说明。应当理解，此处描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。基于本发明中的实施例，本领域普通技术人员在没有做出创造性劳动前提下所获得的所有其他实施例，都应当属于本发明保护的范围。实施例一在本实施例中，如图1所示，提供了一种基于人体三维图像测量脊柱侧弯的方法，所述方法包括以下步骤：步骤S1，基于获取到的高精度待测人体三维图像，将所述三维图像中的人体模型与提前建立的标准脊柱模型进行配准。步骤S2，计算待测人体模型每个脊椎的坐标。步骤S3，根据得到的待测人体模型每个脊椎的坐标，计算Cobb角。具体地，步骤S1中所述的将三维图像中的人体模型与提前建立的标准脊柱模型进行配准，具体包括以下步骤：步骤S101，基于识别到的三维图像中人体模型的第七颈椎C7、左侧髂后上棘DL以及右侧髂后上棘DR这三个特征点，获取所述三个特征点的三维坐标，以及获取标准脊柱模型每个脊椎三维模型的顶点中心的坐标，记标准脊柱模型每个脊椎三维模型的顶点中心的坐标为C7、T1、T2、T3、T4、T5、T6、T7、T8、T9、T10、T11、T12、L1、L2、L3、L4、S1。如图2所示人体脊柱CT图像，成年人脊柱由26块椎骨、尾骨1块)借韧带、关节及椎间盘连接而成，其中C表示颈椎、T表示胸椎、L表示腰椎、S表示骶椎。步骤S102，分别计算待测人体模型的脊柱高度S0和标准脊柱模型的脊柱高度S1，并计算S0/S1的比值a，然后将标准脊柱模型每个脊椎的顶点中心Z坐标的值乘以所述比值a，得到新的标准脊柱模型每个脊椎三维模型的顶点中心的坐标，记为C7、T1、T2、T3、T4、T5、T6、T7、T8、T9、T10、T11、T12、L1、L2、L3、L4、S1，这一步可以将标准脊椎模型按照待测人体模型沿z轴作了拉伸。步骤S103，基于得到的标准脊柱模型每个脊椎三维模型的顶点中心Z坐标新的数值，计算待测人体模型第七颈椎的Z坐标的值z0与标准脊柱模型第七颈椎的Z坐标的值z1的差值b，也就是b＝C7坐标中的z1-z0，然后将标准脊柱模型每个脊椎的顶点中心Z坐标的值加上所述差值b，得到新的标准脊柱模型每个脊椎三维模型的顶点中心的坐标，记为C7、T1、T2、T3、T4、T5、T6、T7、T8、T9、T10、T11、T12、L1、L2、L3、L4、S1，这一步使得标准脊椎模型的C7点与人体模型的C7点在Z轴上对齐。具体地，所述分别计算待测人体模型的脊柱高度S0和标准脊柱模型的脊柱高度S1，对照图3所展现的一个人体三维图像以及图4所展现的一个标准脊柱模型图来进行说明，具体包括以下步骤：计算待测人体模型的左侧髂后上棘DL与右侧髂后上棘DR连线中点DLR_center的三维坐标。计算待测人体模型的第七颈椎C7与DLR_center之间垂直方向的距离，该距离即为人体模型脊柱高度S0，即待测人体模型中C7与DLR_center两个点对应Z坐标的值之差，就是人体模型脊柱高度S0。计算标准脊柱模型的第七颈椎与左侧髂后上棘或右侧髂后上棘之间垂直方向的距离，该距离即为标准脊柱模型的脊柱高度S1，即标准脊柱模型中C7与左侧髂后上棘或右侧髂后上棘对应的Z坐标的值之差，就是标准脊柱模型的脊柱高度S1。在标准脊柱模型中，左侧髂后上棘与右侧髂后上棘对应的Z坐标的值是一样的，因此都可用于计算脊柱高度。具体地，步骤S2中所述的计算待测人体模型每个脊椎的坐标，具体包括以下步骤：步骤S201，基于配准后得到的标准脊柱模型每个脊椎三维模型的顶点中心Z坐标新的数值，分别在标准脊柱模型每个脊椎的顶点Z坐标的值处对待测人体模型作水平截面。也就是分别在C7、T1、T2、T3、T4、T5、T6、T7、T8、T9、T10、T11、T12、L1、L2、L3、L4、S1这些坐标点对应的Z坐标的值z2处，对待测人体模型作水平截面，如图5所示，会形成18个截面。步骤S202，计算每个截面与待测人体模型形成的截面线上的凸点坐标，得到的每一个凸点的坐标就是凸点所在截面对应的待测人体模型的脊椎中心点坐标。每一个截面都会与人体轮廓形成一个截面线，截面线中人体的后背部分会有一个凸点，如图6所示，该凸点就是凸点所在截面对应的待测人体模型的脊椎中心点所在的位置，由此便可得到待测人体模型每一个脊椎对应的坐标，将得到的坐标记为C7’、T1’、T2’、T3’、T4’、T5’、T6’、T7’、T8’、T9’、T10’、T11’、T12’、L1’、L2’、L3’、L4’、S1’。在实际应用过程中，如果得到的待测人体模型某个脊椎点坐标位置有偏差，可以通过交互的方式调整坐标点，也就是通过拖拽三维渲染控件中有偏差的坐标点使其符合实际情况。优选地，步骤S1中所述的获取到的高精度待测人体三维图像是通过高精度三维人体扫描仪对人体进行扫描获取的，所述人体三维图像，包括人体全身三维图像和后背局部三维图像。具体地，步骤S3中所述的计算Cobb角，具体包括以下步骤：步骤S301，将得到的待测人体模型每一个脊椎中心点由上到下依次连接起来组成连续向量，计算每条向量与垂直轴的夹角，也就是将得到的C7’、T1’、T2’、T3’、T4’、T5’、T6’、T7’、T8’、T9’、T10’、T11’、T12’、L1’、L2’、L3’、L4’、S1’这些点由上到下依次连接起来，形成C7’-T1’、T1’-T2’、T2’-T3’……L2’-L3’、L4’-S1’这些连续向量，然后分别计算这些向量与垂直轴的夹角。步骤S302，找到最大夹角对应的向量以及最小夹角对应的向量，两个向量在人体冠状面的夹角即待测人体模型的Cobb角，冠状面的位置如图7中所示。比如夹角最大值对应的向量是T3’-T4’，最小值对应的向量所述L2’-L3’，则计算T3’-T4’向量与L2’-L3’向量在冠状面的夹角，该角就是要计算的待测人体模型的Cobb角。实施例二对应于上述实施例一中的一种基于人体三维图像测量脊柱侧弯的方法，如图8所示，在本实施例中提供了一种基于人体三维图像测量脊柱侧弯的装置，所述装置包括：人体模型配准模块81，用于基于获取到的高精度待测人体三维图像，将所述三维图像中的人体模型与提前建立的标准脊柱模型进行配准。脊椎点坐标计算模块82，用于计算待测人体模型每个脊椎的坐标。Cobb角计算模块83，用于根据得到的待测人体模型每个脊椎的坐标，计算Cobb角。具体地，人体模型配准模块81包括：坐标获取模块811，用于基于识别到的三维图像中人体模型的第七颈椎C7、左侧髂后上棘DL以及右侧髂后上棘DR这三个特征点，获取所述三个特征点的三维坐标，以及获取标准脊柱模型每个脊椎三维模型的顶点中心的坐标，记标准脊柱模型每个脊椎三维模型的顶点中心的坐标为C7、T1、T2、T3、T4、T5、T6、T7、T8、T9、T10、T11、T12、L1、L2、L3、L4、S1。脊柱拉伸模块812，用于分别计算待测人体模型的脊柱高度S0和标准脊柱模型的脊柱高度S1，并计算S0/S1的比值a，然后将标准脊柱模型每个脊椎的顶点中心Z坐标的值乘以所述比值a，得到新的标准脊柱模型每个脊椎三维模型的顶点中心的坐标，记为C7、T1、T2、T3、T4、T5、T6、T7、T8、T9、T10、T11、T12、L1、L2、L3、L4、S1，这一步可以将标准脊椎模型按照待测人体模型沿z轴作了拉伸。脊柱对齐模块813，用于基于得到的标准脊柱模型每个脊椎三维模型的顶点中心Z坐标新的数值，计算待测人体模型第七颈椎的Z坐标的值z0与标准脊柱模型第七颈椎的Z坐标的值z1的差值b，也就是b＝C7坐标中的z1-z0，然后将标准脊柱模型每个脊椎的顶点中心Z坐标的值加上所述差值b，得到新的标准脊柱模型每个脊椎三维模型的顶点中心的坐标，记为C7、T1、T2、T3、T4、T5、T6、T7、T8、T9、T10、T11、T12、L1、L2、L3、L4、S1，这一步使得标准脊椎模型的C7点与人体模型的C7点在Z轴上对齐。具体地，脊柱拉伸模块812中的分别计算待测人体模型的脊柱高度S0和标准脊柱模型的脊柱高度S1是由脊柱高度计算模块8121完成计算，脊柱高度计算模块8121包括：中点坐标计算模块81211，用于计算待测人体模型的左侧髂后上棘DL与右侧髂后上棘DR连线中点DLR_center的三维坐标。人体模型脊柱高度计算模块81212，用于计算待测人体模型的第七颈椎C7与DLR_center之间垂直方向的距离，该距离即为人体模型脊柱高度S0，即待测人体模型中C7与DLR_center两个点对应Z坐标的值之差，就是人体模型脊柱高度S0。标准脊柱模型脊柱高度计算模块81213，用于计算标准脊柱模型的第七颈椎与左侧髂后上棘或右侧髂后上棘之间垂直方向的距离，该距离即为标准脊柱模型的脊柱高度S1，即标准脊柱模型中C7与左侧髂后上棘或右侧髂后上棘对应的Z坐标的值之差，就是标准脊柱模型的脊柱高度S1。在标准脊柱模型中，左侧髂后上棘与右侧髂后上棘对应的Z坐标的值是一样的，因此都可用于计算脊柱高度。具体地，脊椎点坐标计算模块82包括：水平截面形成模块821，用于基于配准后得到的标准脊柱模型每个脊椎三维模型的顶点中心Z坐标新的数值，分别在标准脊柱模型每个脊椎的顶点Z坐标的值处对待测人体模型作水平截面。也就是分别在C7、T1、T2、T3、T4、T5、T6、T7、T8、T9、T10、T11、T12、L1、L2、L3、L4、S1这些坐标点对应的Z坐标的值z2处，对待测人体模型作水平截面，如图5所示，会形成18个截面。凸点坐标计算模块822，用于计算每个截面与待测人体模型形成的截面线上的凸点坐标，得到的每一个凸点的坐标就是凸点所在截面对应的待测人体模型的脊椎中心点坐标。每一个截面都会与人体轮廓形成一个截面线，截面线中人体的后背部分会有一个凸点，如图6所示，该凸点就是凸点所在截面对应的待测人体模型的脊椎中心点所在的位置，由此便可得到待测人体模型每一个脊椎对应的坐标，将得到的坐标记为C7’、T1’、T2’、T3’、T4’、T5’、T6’、T7’、T8’、T9’、T10’、T11’、T12’、L1’、L2’、L3’、L4’、S1’。在实际应用过程中，如果得到的待测人体模型某个脊椎点坐标位置有偏差，可以通过交互的方式调整坐标点，也就是通过拖拽三维渲染控件中有偏差的坐标点使其符合实际情况。优选地，人体模型配准模块81所述的高精度待测人体三维图像是通过高精度三维人体扫描仪对人体进行扫描获取的，所述人体三维图像，包括人体全身三维图像和后背局部三维图像。具体地，Cobb角计算模块83包括：夹角计算模块831，用于将得到的待测人体模型每一个脊椎中心点由上到下依次连接起来组成连续向量，计算每条向量与垂直轴的夹角，也就是将得到的C7’、T1’、T2’、T3’、T4’、T5’、T6’、T7’、T8’、T9’、T10’、T11’、T12’、L1’、L2’、L3’、L4’、S1’这些点由上到下依次连接起来，形成C7’-T1’、T1’-T2’、T2’-T3’……L2’-L3’、L4’-S1’这些连续向量，然后分别计算这些向量与垂直轴的夹角。夹角比较模块832，用于找到最大夹角对应的向量以及最小夹角对应的向量，两个向量在冠状面的夹角即待测人体模型的Cobb角，比如夹角最大值对应的向量是T3’-T4’，最小值对应的向量所述L2’-L3’，则计算T3’-T4’向量与L2’-L3’向量在冠状面)的夹角，该角就是要计算的待测人体模型的Cobb角。实施例三在本实施例中，提供了一种基于人体三维图像测量脊柱侧弯的设备，所述设备包括：高精度三维人体扫描仪，用于对人体进行扫描，输出高精度的待测人体三维图像。数据处理设备，包括存储器和处理器，用于对所述待测人体三维图像进行处理，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时实现实施例一中所述方法的任一项步骤，最终输出Cobb角计算结果。实施例四在本实施例中，提供了一种基于人体三维图像测量脊柱胸曲的方法，如图9所示，与实施例一中提供的一种基于人体三维图像测量脊柱侧弯的方法前两步骤S1、S2相同，最后一步为步骤S4，即根据得到的待测人体模型每个脊椎的坐标，计算胸曲。具体地，步骤S4中所述的计算胸曲，具体包括以下步骤：步骤S401，基于得到的所述待测人体模型每个脊椎的坐标，确定第一胸椎T1’、第二胸椎T2’、第十二胸椎T12’与第一腰椎L1’的坐标。步骤S402，如图10所示，将所述待测人体模型T1’与T2’连接起来形成向量，以及将L1’与T12’连接起来形成向量，两个向量在人体矢状面的夹角即待测人体模型的胸曲，矢状面的位置如图7中所示。实施例五对应于上述实施例四中的一种基于人体三维图像测量脊柱胸曲的方法，如图11所示，在本实施例中提供了一种基于人体三维图像测量脊柱胸曲的装置，所述装置与实施例二中提供的一种基于人体三维图像测量脊柱侧弯的装置前两模块人体模型配准模块81、脊椎点坐标计算模块82相同，第三模块为胸曲计算模块84，用于根据得到的待测人体模型每个脊椎的坐标，计算胸曲。具体地，胸曲计算模块84包括：第一指定坐标获取模块841，用于基于得到的所述待测人体模型每个脊椎的坐标，确定第一胸椎T1’、第二胸椎T2’、第十二胸椎T12’与第一腰椎L1’的坐标。第一向量投影模块842，如图10所示，用于将所述待测人体模型T1’与T2’连接起来形成向量，以及将L1’与T12’连接起来形成向量，两个向量在矢状面的夹角即待测人体模型的胸曲。实施例六在本实施例中，提供了一种基于人体三维图像测量脊柱腰曲的方法，如图12所示，与实施例一中提供的一种基于人体三维图像测量脊柱侧弯的方法前两步骤S1、S2相同，只是在S1和S2中多获得了标准脊柱模型和待测人体模型第二骶骨的坐标；最后一步为步骤S5，即根据得到的待测人体模型每个脊椎的坐标，计算腰曲。具体地，步骤S5中所述的计算腰曲，具体包括以下步骤：步骤S501，基于得到的所述待测人体模型每个脊椎的坐标，确定第十二胸椎T12’、第一腰椎L1’、第一骶骨S1’与第二骶骨S2’的坐标。步骤S502，如图10所示，将所述待测人体模型T12’与L1’连接起来形成向量，以及将S2’与S1’连接起来形成向量，两个向量在矢状面的夹角即待测人体模型的腰曲，矢状面的位置如图7中所示。实施例七对应于上述实施例六中的一种基于人体三维图像测量脊柱腰曲的方法，如图13所示，在本实施例中提供了一种基于人体三维图像测量脊柱腰曲的装置，所述装置与实施例二中提供的一种基于人体三维图像测量脊柱侧弯的装置前两模块人体模型配准模块81、脊椎点坐标计算模块82相同，第三模块为腰曲计算模块85，用于根据得到的待测人体模型每个脊椎的坐标，计算腰曲。具体地，胸曲计算模块85包括：第二指定坐标获取模块851，基于得到的所述待测人体模型每个脊椎的坐标，确定第十二胸椎T12’、第一腰椎L1’、第一骶骨S1’与第二骶骨S2’的坐标。第二向量投影模块852，如图10所示，用于将所述待测人体模型T12’与L1’连接起来形成向量，以及将S2’与S1’连接起来形成向量，两个向量在矢状面的夹角即待测人体模型的腰曲。实施例八在本实施例中，如图14所示，提供了一种基于人体三维图像测量脊柱侧弯的方法，所述方法包括以下步骤：步骤S141，基于获取到的高精度待测人体全身或人体上半部分三维图像，将所述三维图像中的人体模型整体与提前建立的标准人体模型进行配准。步骤S142，根据所述三维图像中的人体模型的身体形态，调整标准人体模型的身体形态，如图15所示，也就是根据待测人体模型的胖瘦以及体态特征去调整标准人体模型，使标准人体模型每个脊椎的位置和待测人体模型每个脊椎的位置一致，得到的每个标准人体模型变化后的脊椎点坐标即为待测人体模型相对应的每个脊椎点坐标。步骤S143，根据得到的待测人体模型每个脊椎的坐标，计算Cobb角，这一步骤和上述实施例一提供的一种基于人体三维图像测量脊柱侧弯的方法中的步骤S3相同。具体地，所述获取到的高精度待测人体全身或人体上半部分三维图像，是通过高精度三维人体扫描仪对人体进行扫描获取的。在上述的实施例中，本发明基于用高精度三维人体扫描仪对人体进行扫描获取到的高精度待测人体三维图像，将所述三维图像中的人体模型与提前建立的标准脊柱模型进行配准，然后计算待测人体模型每个脊椎的坐标，进而根据得到的待测人体模型每个脊椎的坐标，来计算Cobb角以及计算胸曲和腰曲这两个脊柱相关参数。获取到的高精度待测人体三维图像可以很好地表达脊柱的三维特点，精准度较高，同时还避免了传统X光对人体造成的辐射；另外本发明不需要利用复杂、繁琐的算法就能测量脊柱的侧弯程度，很大程度减少了运算量。以上实施例的各技术特征可以进行任意的组合，为使描述简洁，未对上述实施例中的各个技术特征所有可能的组合都进行描述，然而，只要这些技术特征的组合不存在矛盾，都应当认为是本说明书记载的范围。以上所述实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对发明专利范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请专利的保护范围应以所附权利要求为准。
