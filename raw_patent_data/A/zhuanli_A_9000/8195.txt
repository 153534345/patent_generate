标题title
施肥控制方法、装置、电子设备及介质
摘要abst
本发明提供一种施肥控制方法、装置、电子设备及介质，涉及罐车施肥领域，该方法包括：根据预设施肥量以及当前施肥量确定原始施肥量差值；根据原始施肥量差值以及修正施肥量差值确定目标施肥量差值；输入目标施肥量差值至预设比例微分积分控制器，获取当前控制电压，根据当前控制电压驱动电动闸阀调节闸阀开度位置；当前施肥量是根据预设流量计获取的；修正施肥量差值是在当前闸阀开度位置下，预期施肥量与稳态施肥量的差值确定的。本发明根据预设施肥量，在罐车作业过程中实时控制闸阀开度位置，通过改变闸阀开度大小来控制施肥量，并能够在得到施肥量反馈以及闸阀开度位置反馈后再次调整闸阀开度位置，实现施肥精准控制。
权利要求书clms
1.一种施肥控制方法，其特征在于，包括：根据预设施肥量以及当前施肥量确定原始施肥量差值；根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值；输入所述目标施肥量差值至第一比例微分积分控制器，获取所述第一比例微分积分控制器输出的当前控制电压，以根据所述当前控制电压驱动电动闸阀调节闸阀开度位置；所述当前施肥量是在当前闸阀开度位置下，根据预设流量计获取的；所述修正施肥量差值是在当前闸阀开度位置下，预期施肥量与稳态施肥量的差值确定的，所述稳态施肥量是根据所述预期施肥量响应施肥处理后的实际施肥量，所述预期施肥量是根据所述当前闸阀开度位置，从预设闸阀开度位置与预设预期施肥量之间的对应关系中确定的。2.根据权利要求1所述的施肥控制方法，其特征在于，所述输入所述目标施肥量差值至第一比例微分积分控制器，获取所述第一比例微分积分控制器输出的当前控制电压，包括：根据所述目标施肥量差值以及第一预设比例参数确定第一比例分值，根据所述目标施肥量差值以及第一预设积分参数确定第一积分分值，根据所述目标施肥量差值以及第一预设微分参数确定第一微分分值；根据所述第一比例分值、所述第一积分分值以及所述第一微分分值确定当前控制电压，根据所述第一比例微分积分控制器输出所述当前控制电压。3.根据权利要求1所述的施肥控制方法，其特征在于，在根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值之前，所述方法还包括：构建目标喷洒量与目标倾喷量、当前行车速度以及机具幅宽的第一定量关系；构建所述目标喷洒量与施肥罐车预设修正系数、当前闸阀开度位置、预设喷洒流量与预设罐内压力的比值以及当前罐内压力的第二定量关系；根据所述第一定量关系以及所述第二定量关系，确定所述当前闸阀开度位置。4.根据权利要求3所述的施肥控制方法，其特征在于，在根据预设施肥量以及当前施肥量确定原始施肥量差值之前，所述方法还包括：接收第一输入指令，所述第一输入指令用于指示根据所述第一输入指令对应的预设施肥量以及预设行车速度，驱动电动闸阀调节闸阀开度位置；响应于所述第一输入指令，获取所述第一输入指令对应的所述预设施肥量以及所述预设行车速度；输入所述预设行车速度至第二比例微分积分控制器，获取所述第二比例微分积分控制器输出的当前行车速度。5.根据权利要求4所述的施肥控制方法，其特征在于，所述输入所述预设行车速度至第二比例微分积分控制器，获取所述第二比例微分积分控制器输出的当前行车速度，包括：根据所述预设行车速度以及第二预设比例参数确定第二比例分值，根据所述预设行车速度以及第二预设积分参数确定第二积分分值，根据所述预设行车速度以及第二预设微分参数确定第二微分分值；根据所述第二比例分值、所述第二积分分值以及所述第二微分分值确定当前行车速度，根据所述第二比例微分积分控制器输出所述当前行车速度。6.根据权利要求1所述的施肥控制方法，其特征在于，在获取所述第一比例微分积分控制器输出的当前控制电压之前或之后，所述方法还包括：根据声波在罐体内的传输时间以及声波传播速度确定换能器到罐体液面的第一距离；根据罐体高度以及所述第一距离，确定罐体内液位高度；在所述罐体内液位高度大于第一预设高度的情况下，生成第一响应指令，所述第一响应指令用于指示停止向罐体内注肥；在所述罐体内液位高度小于第二预设高度的情况下，生成第二响应指令，所述第二响应指令用于指示停止施肥；所述第一预设高度大于所述第二预设高度。7.根据权利要求1所述的施肥控制方法，其特征在于，在获取所述第一比例微分积分控制器输出的当前控制电压之前或之后，所述方法还包括：在当前罐内压力小于预设压力的情况下，获取真空泵的当前温度；在所述真空泵的当前温度小于预设温度的情况下，生成加压指令，所述加压指令用于指示驱动真空泵加压，以提高所述当前罐内压力；在所述真空泵的当前温度大于或等于所述预设温度的情况下，生成告警指令，所述告警指令用于指示在预设显示界面中显示所述真空泵的当前温度。8.一种施肥控制装置，其特征在于，包括：第一确定单元，所述第一确定单元用于根据预设施肥量以及当前施肥量确定原始施肥量差值；第二确定单元，所述第二确定单元用于根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值；获取单元，所述获取单元用于输入所述目标施肥量差值至第一比例微分积分控制器，获取所述第一比例微分积分控制器输出的当前控制电压，以根据所述当前控制电压驱动电动闸阀调节闸阀开度位置；所述当前施肥量是在当前闸阀开度位置下，根据预设流量计获取的；所述修正施肥量差值是在当前闸阀开度位置下，预期施肥量与稳态施肥量的差值确定的，所述稳态施肥量是根据所述预期施肥量响应施肥处理后的实际施肥量，所述预期施肥量是根据所述当前闸阀开度位置，从预设闸阀开度位置与预设预期施肥量之间的对应关系中确定的。9.一种电子设备，包括存储器、处理器及存储在所述存储器上并可在所述处理器上运行的计算机程序，其特征在于，所述处理器执行所述程序时实现如权利要求1-7中任一项所述的施肥控制方法。10.一种非暂态计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1-7中任一项所述的施肥控制方法。
说明书desc
技术领域本发明涉及罐车施肥领域，尤其涉及一种施肥控制方法、装置、电子设备及介质。背景技术施肥罐车施肥过程中，通过拖拉机后液压输出控制闸阀开关，当闸阀打开时，无论作业速度的快慢，液体有机肥的喷肥量不变，该方式无法实现在施肥过程中对闸阀开度进行控制，进而无法实现根据施肥罐车行车速度对施肥量的自适应均匀控制。发明内容本发明提供一种施肥控制方法、装置、电子设备及介质，用以解决现有技术中施肥控制不够准确的技术问题。第一方面，本发明提供了一种施肥控制方法，包括：根据预设施肥量以及当前施肥量确定原始施肥量差值；根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值；输入所述目标施肥量差值至第一比例微分积分控制器，获取所述第一比例微分积分控制器输出的当前控制电压，以根据所述当前控制电压驱动电动闸阀调节闸阀开度位置；所述当前施肥量是在当前闸阀开度位置下，根据预设流量计获取的；所述修正施肥量差值是在当前闸阀开度位置下，预期施肥量与稳态施肥量的差值确定的，所述稳态施肥量是根据所述预期施肥量响应施肥处理后的实际施肥量，所述预期施肥量是根据所述当前闸阀开度位置，从预设闸阀开度位置与预设预期施肥量之间的对应关系中确定的。根据本发明提供的施肥控制方法，所述输入所述目标施肥量差值至第一比例微分积分控制器，获取所述第一比例微分积分控制器输出的当前控制电压，包括：根据所述目标施肥量差值以及第一预设比例参数确定第一比例分值，根据所述目标施肥量差值以及第一预设积分参数确定第一积分分值，根据所述目标施肥量差值以及第一预设微分参数确定第一微分分值；根据所述第一比例分值、所述第一积分分值以及所述第一微分分值确定当前控制电压，根据所述第一比例微分积分控制器输出所述当前控制电压。根据本发明提供的施肥控制方法，在根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值之前，所述方法还包括：构建目标喷洒量与目标倾喷量、当前行车速度以及机具幅宽的第一定量关系；构建所述目标喷洒量与施肥罐车预设修正系数、当前闸阀开度位置、预设喷洒流量与预设罐内压力的比值以及当前罐内压力的第二定量关系；根据所述第一定量关系以及所述第二定量关系，确定所述当前闸阀开度位置。根据本发明提供的施肥控制方法，在根据预设施肥量以及当前施肥量确定原始施肥量差值之前，所述方法还包括：接收第一输入指令，所述第一输入指令用于指示根据所述第一输入指令对应的预设施肥量以及预设行车速度，驱动电动闸阀调节闸阀开度位置；响应于所述第一输入指令，获取所述第一输入指令对应的所述预设施肥量以及所述预设行车速度；输入所述预设行车速度至第二比例微分积分控制器，获取所述第二比例微分积分控制器输出的当前行车速度。根据本发明提供的施肥控制方法，所述输入所述预设行车速度至第二比例微分积分控制器，获取所述第二比例微分积分控制器输出的当前行车速度，包括：根据所述预设行车速度以及第二预设比例参数确定第二比例分值，根据所述预设行车速度以及第二预设积分参数确定第二积分分值，根据所述预设行车速度以及第二预设微分参数确定第二微分分值；根据所述第二比例分值、所述第二积分分值以及所述第二微分分值确定当前行车速度，根据所述第二比例微分积分控制器输出所述当前行车速度。根据本发明提供的施肥控制方法，在获取所述第一比例微分积分控制器输出的当前控制电压之前或之后，所述方法还包括：根据声波在罐体内的传输时间以及声波传播速度确定换能器到罐体液面的第一距离；根据罐体高度以及所述第一距离，确定罐体内液位高度；在所述罐体内液位高度大于第一预设高度的情况下，生成第一响应指令，所述第一响应指令用于指示停止向罐体内注肥；在所述罐体内液位高度小于第二预设高度的情况下，生成第二响应指令，所述第二响应指令用于指示停止施肥；所述第一预设高度大于所述第二预设高度。根据本发明提供的施肥控制方法，在获取所述第一比例微分积分控制器输出的当前控制电压之前或之后，所述方法还包括：在当前罐内压力小于预设压力的情况下，获取真空泵的当前温度；在所述真空泵的当前温度小于预设温度的情况下，生成加压指令，所述加压指令用于指示驱动真空泵加压，以提高所述当前罐内压力；在所述真空泵的当前温度大于或等于所述预设温度的情况下，生成告警指令，所述告警指令用于指示在预设显示界面中显示所述真空泵的当前温度。第二方面，提供了一种施肥控制装置，包括：第一确定单元，所述第一确定单元用于根据预设施肥量以及当前施肥量确定原始施肥量差值；第二确定单元，所述第二确定单元用于根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值；获取单元，所述获取单元用于输入所述目标施肥量差值至第一比例微分积分控制器，获取所述第一比例微分积分控制器输出的当前控制电压，以根据所述当前控制电压驱动电动闸阀调节闸阀开度位置；所述当前施肥量是在当前闸阀开度位置下，根据预设流量计获取的；所述修正施肥量差值是在当前闸阀开度位置下，预期施肥量与稳态施肥量的差值确定的，所述稳态施肥量是根据所述预期施肥量响应施肥处理后的实际施肥量，所述预期施肥量是根据所述当前闸阀开度位置，从预设闸阀开度位置与预设预期施肥量之间的对应关系中确定的。第三方面，本发明还提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现如上述任一种所述施肥控制方法。第四方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现如上述任一种所述施肥控制方法。本发明提供的施肥控制方法、装置、电子设备及介质，根据预设施肥量以及当前施肥量确定原始施肥量差值，根据当前闸阀开度位置，从预设闸阀开度位置与预设预期施肥量之间的对应关系中确定预期施肥量，根据所述预期施肥量响应施肥处理后确定稳态施肥量，根据预期施肥量与稳态施肥量的差值确定修正施肥量差值，根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值；输入所述目标施肥量差值至第一比例微分积分控制器，获取当前控制电压，以根据所述当前控制电压驱动电动闸阀调节闸阀开度位置。本发明根据预设施肥量，在罐车作业过程中实时控制闸阀开度位置，通过改变闸阀开度大小来控制施肥量，并能够在得到施肥量反馈以及闸阀开度位置反馈后再次调整闸阀开度位置，实现施肥精准控制。附图说明为了更清楚地说明本发明或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1是本发明提供的施肥控制方法的流程示意图之一；图2是本发明提供的获取当前控制电压的流程示意图；图3是本发明提供的施肥控制方法的流程示意图之二；图4是本发明提供的施肥控制方法的流程示意图之三；图5是本发明提供的施肥控制方法的流程示意图之四；图6是本发明提供的施肥控制方法的流程示意图之五；图7是本发明提供的施肥控制方法的结构示意图；图8是本发明提供的施肥控制装置的结构示意图；图9是本发明提供的电子设备的结构示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚，下面将结合本发明中的附图，对本发明中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。随着产业结构的调整和畜禽养殖业的不断发展，畜禽养殖集约化与规模化得到快速发展，却导致畜禽粪污排放密度的增加，相关报告显示畜禽养殖业水污染物排放量中化学需氧量1000.53万吨，牛、猪和家禽年产粪污产生量约为34.9亿吨，综合利用率不足60%，绝大多数规模化养殖场缺乏必要的配套措施和设备，产生的粪污对养殖环境的空气、土壤、水质等造成了严重污染。解决养殖污染问题的根本措施是将畜禽粪污进行资源化利用，采取种养结合和农牧结合方式，使畜禽粪污转化为有机肥回归农田，其中肥料化是最主要最经济的利用方式。将养殖废水转化为液态肥施用到田间，起到改善土壤、增加土壤肥力、提高作物产量的作用，同时解决了粪污的污染问题，从而被广泛应用。相比于固体粪，液体肥料还田难度高，施用主要依靠人工、半机械完成，面临着劳动强度大、肥料浪费严重、作业效率与自动化程度低以及缺少罐内循环技术造成粪水沉淀堵塞管道等问题。目前液体有机肥施肥罐车是以拖拉机为动力，驱动真空泵进行工作，利用真空泵将存储于罐体内的液肥直接输送到土壤中的农机装备。所述液体有机肥施肥罐车主要部件组成包括真空泵、吸肥口、罐体、闸阀以及出肥口，现有施肥罐车在施肥过程中，通过拖拉机后液压输出控制闸阀开关，然而当闸阀打开时，无论作业速度的快慢，液体有机肥的喷肥量不变，导致无法实现在施肥过程中对闸阀开度进行控制，无法根据施肥罐车行车速度对施肥量的自适应均匀控制，最终实现实现施肥精准控制，本发明为了解决上述技术问题，提供了一种施肥控制方法、装置、电子设备及介质，图1是本发明提供的施肥控制方法的流程示意图之一，所述施肥控制方法包括：步骤101、根据预设施肥量以及当前施肥量确定原始施肥量差值。在步骤101中，所述预设施肥量是用户预先设置的施肥量，本发明通过将预设施肥量输入至本发明所示出的控制装置，进而在不断对闸阀开度进行控制的过程中，实现施肥的精准控制，所述当前施肥量是在当前闸阀开度位置下，根据预设流量计获取。可选地，根据液态有机肥的流体特性，本发明利用超声波在流体中的传播特性来测量喷肥流量，通过采用超声波流量测量装置实现对施肥罐车喷洒流量的实时检测，所述超声波流量测量装置由超声波换能器、电子线路及流量显示和累积系统三部分组成，超声波换能器1、2是一对安装在同一侧可轮流发射或接收超声波的换能器。本发明在结合所述超声波流量测量装置的基础上，进一步地利用时差法超声波流量计测量喷肥流量，具体地，由于超声波在管道内的顺、逆流传播时间差与管道内的流体速度有一定的关系，因而可以测量出声波在管道中顺流、逆流传播的时间差值，测出时间差也就可以得出流体的流速和流量。可选地，设超声波信号在管道流体中传播的声速为C，超声波顺流时从换能器1到换能器2的时间为t1，逆流时从换能器2到换能器1的时间为t2。由于换能器安装管外壁上，因而，声波在管壁中传播需要一定的时间，而且信号在电路传输也有延迟，非测量的传播时间总称为延迟时间，延迟时间/＞相对于超声波在流体中的传播时间是非常小的，因此，可以得出以下关系式：   超声波在液体中的传播速度远大于管道中液体的流速，即式中的，故式中的顺逆流时间差值可以简化为： 由式可以得出采用外夹式时差法的流速计算公式： 式中，为超声波信号在管道流体中传播的声速，/＞为超声波顺流时与逆流时的时间差，/＞为管道半径，/＞为重力加速度，/＞为声波在管壁中传播方向与垂直方向的夹角，/＞为当前施肥量。可选地，在确定出所述当前施肥量后，根据预设施肥量以及当前施肥量的差值确定原始施肥量差值。步骤102、根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值。在步骤102中，本发明首先获取当前闸阀开度位置，根据所述当前闸阀开度位置，从预设闸阀开度位置与预设预期施肥量之间的对应关系中确定出预期施肥量，由于在确定预期施肥量后，实际输出的施肥量会与预期施肥量存在一定差异，故本发明旨在将经过滞后延迟输出的结果作为最终稳定输出的稳态施肥量，计算预期施肥量与稳态施肥量的差值，并将其确定为当前闸阀开度位置下的修正施肥量差值，最后再根据所述原始施肥量差值以及修正施肥量差值的差值确定目标施肥量差值。可选地，所述预设闸阀开度位置与预设预期施肥量之间的对应关系可以为变量施肥系统的流图网络模型，输入所述预设闸阀开度位置至所述变量施肥系统的流图网络模型，获取所述变量施肥系统的流图网络模型输出的所述预期施肥量，所述预期施肥量是不包含延迟环节的系统模型输出，所述响应施肥处理可以利用变量施肥系统，通过变量施肥系统中的所有滞后环节总和实现；输入预期施肥量至所述变量施肥系统，获取所述变量施肥系统输出的稳态施肥量，所述稳态施肥量是包含延迟环节的系统模型输出。步骤103、输入所述目标施肥量差值至第一比例微分积分控制器，获取所述第一比例微分积分控制器输出的当前控制电压，以根据所述当前控制电压驱动电动闸阀调节闸阀开度位置。在步骤103中，本发明结合模糊控制构成Smith-模糊PID控制器设计流量控制回路，既可克服PID算法对于非线性系统精度不高及其鲁棒性差的缺点，又可降低Smith控制算法对于模型不匹配的敏感性，通过双闭环控制方式实现流量控制，图7是本发明提供的施肥控制方法的结构示意图，图7中的内环为基于闸阀位置-施肥量模型的施肥量控制，图7中的外环为基于模糊控制的施肥量闭环控制，所述第一比例微分积分控制器包括PID参数的修正值，分别为预设的比例参数、预设的积分参数以及预设的微分参数。可选地，在确定出所述当前控制电压后，会根据所述当前控制电压驱动电动闸阀调节闸阀开度位置，本发明中的施肥罐车以拖拉机后动力输出轴为动力，驱动真空泵进行工作，控制完成施肥罐车的吸肥和喷肥工作，其中在现有的喷肥过程中主要通过液压的方式调节闸阀开度位置，但这种液压控制的方式无法实现对闸阀开度的控制，本发明可以采用电动推杆的方式实现对闸阀的自动控制。可选地，所述电动推杆集成有编码器和电位计，其中编码器通过脉冲数准确反馈推杆马达主轴转动圈数，从而精确计算电动推杆行程变化，实现精确控制；电位计用来反馈电机电阻的大小，从而反映推杆所在的行程位置，最终达到控制推杆在行程中间任一位置停止的目的，最终能够实现闸阀开度的自动控制和在线检测。本发明在现有液体施肥机的基础上，通过加装传感装置和闸阀控制装置，集成信息采集与处理和电控技术，实现在施肥作业时自动化施肥和施肥量随速精准控制，为液体施肥作业提供了一种自动施肥装置及控制方法，最终目的是为了实现液体有机肥高均匀度的精准施用。本发明提供的施肥控制方法，根据预设施肥量以及当前施肥量确定原始施肥量差值，根据当前闸阀开度位置，从预设闸阀开度位置与预设预期施肥量之间的对应关系中确定预期施肥量，根据所述预期施肥量响应施肥处理后确定稳态施肥量，根据预期施肥量与稳态施肥量的差值确定修正施肥量差值，根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值；输入所述目标施肥量差值至第一比例微分积分控制器，获取当前控制电压，以根据所述当前控制电压驱动电动闸阀调节闸阀开度位置。本发明根据预设施肥量，在罐车作业过程中实时控制闸阀开度位置，通过改变闸阀开度大小来控制施肥量，并能够在得到施肥量反馈以及闸阀开度位置反馈后再次调整闸阀开度位置，实现施肥精准控制。图2是本发明提供的获取当前控制电压的流程示意图，所述输入所述目标施肥量差值至第一比例微分积分控制器，获取所述第一比例微分积分控制器输出的当前控制电压，包括：步骤201、根据所述目标施肥量差值以及第一预设比例参数确定第一比例分值，根据所述目标施肥量差值以及第一预设积分参数确定第一积分分值，根据所述目标施肥量差值以及第一预设微分参数确定第一微分分值。在步骤201中，所述第一预设比例参数、第一预设积分参数以及所述第一预设微分参数是根据大量实验模拟计算而预先设定的，根据所述目标施肥量差值以及第一预设比例参数的乘积确定第一比例分值，根据所述目标施肥量差值以及第一预设积分参数的乘积确定第一积分分值，根据所述目标施肥量差值以及第一预设微分参数的乘积确定第一微分分值。步骤202、根据所述第一比例分值、所述第一积分分值以及所述第一微分分值确定当前控制电压，根据所述第一比例微分积分控制器输出所述当前控制电压。在步骤202中，根据所述第一比例分值、所述第一积分分值以及所述第一微分分值的和值确定当前控制电压，根据所述第一比例微分积分控制器输出所述当前控制电压，基于模糊PID控制的驱动技术和自适应随速控制方法，实时控制闸阀打开位置，通过改变闸阀开度大小来控制施肥量。图3是本发明提供的施肥控制方法的流程示意图之二，在根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值之前，所述方法还包括：步骤301、构建目标喷洒量与目标倾喷量、当前行车速度以及机具幅宽的第一定量关系。在步骤301中，本发明的施肥控制方法对应设置有施肥罐车喷肥控制系统，其由设定层、速度控制回路和流量控制回路组成，设定层主要作用为设定预设施肥量以及预设行车速度；根据亩喷量、作业幅宽设定单位时间喷肥量，构建目标喷洒量与目标倾喷量、当前行车速度以及机具幅宽的第一定量关系，主要是因为单位面积施肥量与机具的幅宽，作业速度，闸阀开度和罐体内压力之间存在着一定的关系，包括： 式中，为目标喷洒量，/＞为目标倾喷量，/＞为机具幅宽，/＞为当前行车速度。步骤302、构建所述目标喷洒量与施肥罐车预设修正系数、当前闸阀开度位置、预设喷洒流量与预设罐内压力的比值以及当前罐内压力的第二定量关系。在步骤302中，构建所述目标喷洒量与施肥罐车预设修正系数、当前闸阀开度位置、预设喷洒流量与预设罐内压力的比值以及当前罐内压力的第二定量关系，包括： 其中，为目标喷洒量，/＞为施肥罐车预设修正系数，/＞为当前闸阀开度位置，为当前罐内压力，/＞为预设喷洒流量与预设罐内压力的比值。步骤303、根据所述第一定量关系以及所述第二定量关系，确定所述当前闸阀开度位置。在步骤303中，由于式以及式中均是以所述目标喷洒量所构建的定量关系，故根据式以及式，并作相应地公式推导，进而可以得出所述当前闸阀开度位置的推导公式如下： 式中，为目标倾喷量，/＞为机具幅宽，/＞为当前行车速度，/＞为施肥罐车预设修正系数，/＞为当前闸阀开度位置，/＞为当前罐内压力，/＞为预设喷洒流量与预设罐内压力的比值的倒数。图4是本发明提供的施肥控制方法的流程示意图之三，在根据预设施肥量以及当前施肥量确定原始施肥量差值之前，所述方法还包括：步骤401、接收第一输入指令，所述第一输入指令用于指示根据所述第一输入指令对应的预设施肥量以及预设行车速度，驱动电动闸阀调节闸阀开度位置。在步骤401中，根据可以在进行施肥控制之前，预先设定好期望的预设施肥量以及预设行车速度，接收第一输入指令，所述第一输入指令用于指示根据所述第一输入指令对应的预设施肥量以及预设行车速度，驱动电动闸阀调节闸阀开度位置，实现对于施肥的精准控制。步骤402、响应于所述第一输入指令，获取所述第一输入指令对应的所述预设施肥量以及所述预设行车速度。在步骤402中，所述预设施肥量用于根据预设施肥量以及当前施肥量确定原始施肥量差值，而所述预设行车速度则是用于确定出当前行车速度，所述当前行车速度将作为计算参数用于式中的所述当前闸阀开度位置的确定。步骤403、输入所述预设行车速度至第二比例微分积分控制器，获取所述第二比例微分积分控制器输出的当前行车速度。在步骤403中，所述第二比例微分积分控制器区别于所述第一比例微分积分控制器，所述第二比例微分积分控制器用于根据所述预设行车速度计算所述当前行车速度。可选地，本发明的第二比例微分积分控制器应用于速度控制回路，拟采用变论域模糊自适应PID控制方法设计，第二比例微分积分控制器包括常规PID控制、模糊推理参数自整定、论域自调整三个部分。其中，所述第二比例微分积分控制器在运行过程中不断监测当前行车速度与预设行车速度之间的偏差和偏差变化率，实时调整输入输出变量的论域和PID控制参数，增加了系统的自适应能力，所述速度控制回路通过控制变速踏板的行程来实现植保机械作业速度调节，根据作业速度不断地调整变速踏板的位置使植保机械始终保持在所设定的车速作业。可选地，所述输入所述预设行车速度至第二比例微分积分控制器，获取所述第二比例微分积分控制器输出的当前行车速度，包括：根据所述预设行车速度以及第二预设比例参数确定第二比例分值，根据所述预设行车速度以及第二预设积分参数确定第二积分分值，根据所述预设行车速度以及第二预设微分参数确定第二微分分值；根据所述第二比例分值、所述第二积分分值以及所述第二微分分值确定当前行车速度，根据所述第二比例微分积分控制器输出所述当前行车速度。可选地，本发明根据所述预设行车速度以及第二预设比例参数的乘积确定第二比例分值，根据所述预设行车速度以及第二预设积分参数的乘积确定第二积分分值，根据所述预设行车速度以及第二预设微分参数的乘积确定第二微分分值，根据所述第二比例分值、所述第二积分分值以及所述第二微分分值的和值确定当前行车速度，根据所述第二比例微分积分控制器输出所述当前行车速度，本发明通过所述第二比例微分积分控制器对应的速度控制回路和所述第一比例微分积分控制器对应的流量控制回路共同保证了亩喷量和控制均匀性，结合预设行车速度和预设施肥量，基于模糊PID控制的驱动技术和自适应随速控制方法，实时控制闸阀打开位置，通过改变闸阀开度大小来控制施肥量。图5是本发明提供的施肥控制方法的流程示意图之四，在获取所述第一比例微分积分控制器输出的当前控制电压之前或之后，所述方法还包括：步骤501、根据声波在罐体内的传输时间以及声波传播速度确定换能器到罐体液面的第一距离。在步骤501中，由于罐体容积大喷肥量高，传统的罐体容量监测采用人工观察的方式，在吸肥和喷肥过程中，通过对罐体预留的开窗观察当前液体有机肥液位的情况，在施肥罐车施肥作业过程中，无法实时获取罐体内的液位情况，为了解决这一技术难题，本发明利用“脉冲-回波测距”的原理测量罐体内液位高度，超声波在同一种介质中的传输速度是不变的，根据时间和声速可算出测量距离，当置于罐体顶部的换能器向液面发射短促的声脉冲时，经过一定时间换能器便可以接收到从液面反射回来的回波信号，其所经过的时间即为声波在罐体内的传输时间。根据声波在罐体内的传输时间以及声波传播速度确定换能器到罐体液面的第一距离，可以参考如下公式： 式中，h为第一距离，vs为声波传播速度，ts为声波在罐体内的传输时间。步骤502、根据罐体高度以及所述第一距离，确定罐体内液位高度。在步骤502中，根据罐体高度以及所述第一距离的差值，确定罐体内液位高度。步骤503、在所述罐体内液位高度大于第一预设高度的情况下，生成第一响应指令，所述第一响应指令用于指示停止向罐体内注肥。在步骤503中，本发明可以通过人机交互终端可以实时查看罐体内液位情况，在确定所述罐体内液位高度大于第一预设高度的情况下，即认为出现罐满的状态，生成第一响应指令，所述第一响应指令用于指示停止向罐体内注肥，可以通过报警提醒农机手停止加肥。步骤504、在所述罐体内液位高度小于第二预设高度的情况下，生成第二响应指令，所述第二响应指令用于指示停止施肥。在步骤504中，所述第一预设高度大于所述第二预设高度，在确定所述罐体内液位高度小于第二预设高度的情况下，即认为出现罐空的状态，生成第二响应指令，所述第二响应指令用于指示停止施肥，可以通过报警提醒农机手停止施肥，本发明采用超声波液位测量方式，在吸肥和喷肥过程中，农机手通过人机交互终端可以直接实时获取罐体内的液位情况，解决了传统的罐体容量监测需要停止工作人工观察的方式。图6是本发明提供的施肥控制方法的流程示意图之五，在获取所述第一比例微分积分控制器输出的当前控制电压之前或之后，所述方法还包括：步骤601、在当前罐内压力小于预设压力的情况下，获取真空泵的当前温度。在步骤601中，施肥罐车以拖拉机后动力输出轴为动力，驱动真空泵进行工作，控制完成施肥罐车的吸肥和喷肥工作，在压力达到一定范围内，需要停止为真空泵加压，真空泵长时间工作会导致温度过高，压力过大温度过高都会损坏真空泵，现有技术中通常依靠农机手的经验来判断，本发明采用压力传感器检测，通过人机交互终端可以实时查看真空泵工作状态，在出现异常情况时会报警提醒农机手停车检查，在罐体内压力小时，驱动真空泵进行工作。然而在当前罐内压力小于预设压力的情况下，如果真空泵的当前温度过高，则会损坏真空泵，为了避免真空泵在高温下被驱动，本发明在驱动真空泵加压之前，先获取真空泵的当前温度，根据真空泵的当前温度确定是否驱动真空泵加压，以提高所述当前罐内压力。可选地，温度传感器可以采用PT100贴片式高精度温度传感器，传感器由直径30um的铂丝绕城的线圈被夹在两层聚酰亚胺箱片之间，通过两条镍带与外界连接，分辨率可以达到0.1℃，所述PT100贴片式高精度温度传感器的厚度为0.3mm，测量面积较大，损失极少，在使用中将温度传感器贴于真空泵上，实时获取真空泵工作中的温度值。步骤602、在所述真空泵的当前温度小于预设温度的情况下，生成加压指令，所述加压指令用于指示驱动真空泵加压，以提高所述当前罐内压力。在步骤602中，在所述真空泵的当前温度小于预设温度的情况下，生成加压指令，所述加压指令用于指示驱动真空泵加压，以提高所述当前罐内压力，本发明在罐体吸肥压力为-0.1MPa和排肥压力为0.3MPa的范围内，设计适用于罐体的正负压压力变送器，可用于罐体压力异常监测报警，本发明设计了正负压力变送器压力校准算法，可适用于一键校零与压力矫正，消除了压力零漂误差与控制器采样电阻的误差，施肥罐车以拖拉机后动力输出轴为动力，通过控制后动力输出轴的转速，来驱动真空泵进行工作，控制完成施肥罐车的吸肥和喷肥工作，在所述当前罐内压力达到一定范围内，需要停止为真空泵加压。步骤603、在所述真空泵的当前温度大于或等于所述预设温度的情况下，生成告警指令，所述告警指令用于指示在预设显示界面中显示所述真空泵的当前温度。在步骤603中，传统施肥罐车作业时，完全依靠农机手的经验来判断作业状态，而本发明采用人机交互终端，能够图形化显示各种作业状态和参数，能够实现施肥作业速度、管道流量、罐体内压力、罐体内容量等参数的实时在线显示，农机手在田间作业过程中，便可直接获取当前的施肥作业状态和施肥量，并且可以根据实际生产需求设定相应的施肥参数。所述人机交互终端具有报警提醒功能，当罐体内压力小时，农机手可以操作后动力输出轴驱动真空泵给罐体加压，在罐体内液位低时，提醒农机手补充液体肥料，在出现真空泵转速异常、温度过高和传感器异常等现象时，人机交互终端会发出报警声音提醒驾驶员检测故障或停止工作。可选地，本发明还可以实现真空泵转速检测，例如采用周期法实现真空泵转速检测，测量信号发出脉冲个数所需的时间，在被测转速较低时，有较高的测量精度,其测量准确度随着转速的增大而降低，适于低速测量，地轮的速度属于低转速，适合采用周期法的测量方式，如下式所示。 式中，为真空泵速度，/＞为地轮周长，/＞为磁铁个数，/＞为地乱转动一圈计时时间，P为转动圈数。图8是本发明提供的施肥控制装置的结构示意图，所述施肥控制装置，包括第一确定单元1，所述第一确定单元1用于根据预设施肥量以及当前施肥量确定原始施肥量差值，所述第一确定单元1的工作原理可以参考前述步骤101，在此不予赘述。所述施肥控制装置还包括第二确定单元2，所述第二确定单元2用于根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值，所述第二确定单元2的工作原理可以参考前述步骤102，在此不予赘述。所述施肥控制装置还包括获取单元3，所述获取单元3用于输入所述目标施肥量差值至第一比例微分积分控制器，获取所述第一比例微分积分控制器输出的当前控制电压，以根据所述当前控制电压驱动电动闸阀调节闸阀开度位置，所述获取单元3的工作原理可以参考前述步骤103，在此不予赘述。所述当前施肥量是在当前闸阀开度位置下，根据预设流量计获取的；所述修正施肥量差值是在当前闸阀开度位置下，预期施肥量与稳态施肥量的差值确定的，所述稳态施肥量是根据所述预期施肥量响应施肥处理后的实际施肥量，所述预期施肥量是根据所述当前闸阀开度位置，从预设闸阀开度位置与预设预期施肥量之间的对应关系中确定的。本发明提供的施肥控制方法、装置、电子设备及介质，根据预设施肥量以及当前施肥量确定原始施肥量差值，根据当前闸阀开度位置，从预设闸阀开度位置与预设预期施肥量之间的对应关系中确定预期施肥量，根据所述预期施肥量响应施肥处理后确定稳态施肥量，根据预期施肥量与稳态施肥量的差值确定修正施肥量差值，根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值；输入所述目标施肥量差值至第一比例微分积分控制器，获取当前控制电压，以根据所述当前控制电压驱动电动闸阀调节闸阀开度位置。本发明根据预设施肥量，在罐车作业过程中实时控制闸阀开度位置，通过改变闸阀开度大小来控制施肥量，并能够在得到施肥量反馈以及闸阀开度位置反馈后再次调整闸阀开度位置，实现施肥精准控制。另一方面，本发明还提供一种施肥控制系统，包括图8中的施肥控制装置，还包括人机交互终端、电动推杆、流量传感器、罐体内液位和压力传感器、真空泵转速和温度传感器、卫星定位测速传感器以及配置调试接口，可选地，本发明能够实现施肥标定程序化，通过开发施肥量自动标定智能人机交互终端，能够实现简单易操作的施肥量标定。可选地，本发明内核微处理器的主频为168MHz，提升控制算法的执行速度和代码效率；电源管理系统采用的宽压输入、延时启动、延时关机和拖拉机自适应巡航控制启动的处理方式，能够实现终端的自动启动、自动关机，能够避免拖拉机启动时蓄电池电压不稳对终端的影响,能够有效防止终端的持续供电对蓄电池的损坏。可选地，施肥罐车进行田间作业时，作业速度是制约其作业质量和作业效率的重要因素，作业速度直接影响喷肥量的大小，作业速度过高则喷肥量少，过低则作业效率下降喷肥量过大，因此，为保证喷肥量的均匀控制及作业效率，必须对施肥罐车的作业速度进行实时监测，本发明的卫星定位测速传感器使用北斗卫星定位模块，定位天线安装在施肥罐车的中心线上，通过所述北斗卫星定位模块获取时间、作业速度等信息。图9是本发明提供的电子设备的结构示意图。如图9所示，该电子设备可以包括：处理器910、通信接口920、存储器930和通信总线940，其中，处理器910，通信接口920，存储器930通过通信总线940完成相互间的通信。处理器910可以调用存储器930中的逻辑指令，以执行施肥控制方法，该方法包括：根据预设施肥量以及当前施肥量确定原始施肥量差值；根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值；输入所述目标施肥量差值至预设比例微分积分控制器，获取所述预设比例微分积分控制器输出的当前控制电压，以根据所述当前控制电压驱动电动闸阀调节闸阀开度位置；所述当前施肥量是在当前闸阀开度位置下，根据预设流量计获取的；所述修正施肥量差值是在当前闸阀开度位置下，预期施肥量与稳态施肥量的差值确定的，所述稳态施肥量是根据所述预期施肥量响应施肥处理后的实际施肥量，所述预期施肥量是根据所述当前闸阀开度位置，从预设闸阀开度位置与预设预期施肥量之间的对应关系中确定的。此外，上述的存储器930中的逻辑指令可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。另一方面，本发明还提供一种计算机程序产品，所述计算机程序产品包括计算机程序，计算机程序可存储在非暂态计算机可读存储介质上，所述计算机程序被处理器执行时，计算机能够执行上述各方法所提供的一种施肥控制方法，该方法包括：根据预设施肥量以及当前施肥量确定原始施肥量差值；根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值；输入所述目标施肥量差值至预设比例微分积分控制器，获取所述预设比例微分积分控制器输出的当前控制电压，以根据所述当前控制电压驱动电动闸阀调节闸阀开度位置；所述当前施肥量是在当前闸阀开度位置下，根据预设流量计获取的；所述修正施肥量差值是在当前闸阀开度位置下，预期施肥量与稳态施肥量的差值确定的，所述稳态施肥量是根据所述预期施肥量响应施肥处理后的实际施肥量，所述预期施肥量是根据所述当前闸阀开度位置，从预设闸阀开度位置与预设预期施肥量之间的对应关系中确定的。又一方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现以执行上述各方法提供的施肥控制方法，该方法包括：根据预设施肥量以及当前施肥量确定原始施肥量差值；根据所述原始施肥量差值以及修正施肥量差值确定目标施肥量差值；输入所述目标施肥量差值至预设比例微分积分控制器，获取所述预设比例微分积分控制器输出的当前控制电压，以根据所述当前控制电压驱动电动闸阀调节闸阀开度位置；所述当前施肥量是在当前闸阀开度位置下，根据预设流量计获取的；所述修正施肥量差值是在当前闸阀开度位置下，预期施肥量与稳态施肥量的差值确定的，所述稳态施肥量是根据所述预期施肥量响应施肥处理后的实际施肥量，所述预期施肥量是根据所述当前闸阀开度位置，从预设闸阀开度位置与预设预期施肥量之间的对应关系中确定的。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分所述的方法。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
