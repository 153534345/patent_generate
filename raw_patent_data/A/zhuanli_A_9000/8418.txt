标题title
手术辅助导航系统的精度检测方法、装置、设备及介质
摘要abst
本公开涉及一种手术辅助导航系统的精度检测方法、装置、设备及介质。本公开通过获取预设装置的扫描图像得到第一测量点和第二测量点的三维重构坐标，根据光学定位系统检测到的三个以上的标记点分别在光学坐标系下的第一坐标、三个以上标记点分别与多个测量点之间的相对位置关系，确定第一测量点在光学坐标系下的第二坐标和第二测量点在光学坐标系下的第三坐标，为计算手术辅助导航系统的精度提供了数据基础；根据第一测量点的三维重构坐标、第二测量点的三维重构坐标、第二坐标和第三坐标，分别确定第一测量点和第二测量点的坐标差异，以及第一测量点到第二测量点的方向差异，从而确定手术辅助导航系统的精度，方法操作简单，成本低廉。
权利要求书clms
1.一种手术辅助导航系统的精度检测方法，其特征在于，所述手术辅助导航系统包括X光透视影像设备和光学定位系统，所述方法包括：获取扫描图像，所述扫描图像是采用所述X光透视影像设备对预设装置进行扫描后得到的，所述预设装置包括三个以上标记点、以及多个测量点；根据所述扫描图像，确定所述多个测量点中第一测量点的三维重构坐标和所述多个测量点中第二测量点的三维重构坐标，所述第一测量点和所述第二测量点用于规划路径；获取所述光学定位系统检测到的所述三个以上标记点分别在光学坐标系下的第一坐标；根据所述三个以上标记点分别在光学坐标系下的第一坐标、以及所述三个以上标记点分别与所述多个测量点之间的相对位置关系，确定所述第一测量点在光学坐标系下的第二坐标和所述第二测量点在光学坐标系下的第三坐标；根据所述第一测量点的三维重构坐标、所述第二测量点的三维重构坐标、所述第二坐标和所述第三坐标，确定所述手术辅助导航系统的精度。2.根据权利要求1所述的方法，其特征在于，所述手术辅助导航系统的精度包括：所述第一测量点的精度、所述第二测量点的精度；根据所述第一测量点的三维重构坐标、所述第二测量点的三维重构坐标、所述第二坐标和所述第三坐标，确定所述手术辅助导航系统的精度，包括：根据所述第一测量点的三维重构坐标、以及所述第二坐标，确定所述第一测量点的精度；根据所述第二测量点的三维重构坐标、以及所述第三坐标，确定所述第二测量点的精度。3.根据权利要求1所述的方法，其特征在于，所述手术辅助导航系统的精度包括：所述路径的精度；根据所述第一测量点的三维重构坐标、所述第二测量点的三维重构坐标、所述第二坐标和所述第三坐标，确定所述手术辅助导航系统的精度，包括：根据所述第一测量点的三维重构坐标和所述第二测量点的三维重构坐标，确定从所述第一测量点到所述第二测量点的第一方向；根据所述第二坐标和所述第三坐标，确定从所述第一测量点到所述第二测量点的第二方向；根据所述第一方向和所述第二方向，确定所述路径的精度。4.根据权利要求1所述的方法，其特征在于，所述三个以上标记点分别设置有反光材料。5.根据权利要求1所述的方法，其特征在于，所述多个测量点设置在所述预设装置的周围。6.一种手术辅助导航系统的精度检测装置，其特征在于，所述手术辅助导航系统包括X光透视影像设备和光学定位系统，所述精度检测装置包括：第一获取模块，用于获取扫描图像，所述扫描图像是采用所述X光透视影像设备对预设装置进行扫描后得到的，所述预设装置包括三个以上标记点、以及多个测量点；第一确定模块，用于根据所述扫描图像，确定所述多个测量点中第一测量点的三维重构坐标和所述多个测量点中第二测量点的三维重构坐标，所述第一测量点和所述第二测量点用于规划路径；第二获取模块，用于获取所述光学定位系统检测到的所述三个以上标记点分别在光学坐标系下的第一坐标；第二确定模块，用于根据所述三个以上标记点分别在光学坐标系下的第一坐标、以及所述三个以上标记点分别与所述多个测量点之间的相对位置关系，确定所述第一测量点在光学坐标系下的第二坐标和所述第二测量点在光学坐标系下的第三坐标；第三确定模块，用于根据所述第一测量点的三维重构坐标、所述第二测量点的三维重构坐标、所述第二坐标和所述第三坐标，确定所述手术辅助导航系统的精度。7.根据权利要求6所述的装置，其特征在于，所述手术辅助导航系统的精度包括：所述第一测量点的精度、所述第二测量点的精度；所述第三确定模块具体用于：根据所述第一测量点的三维重构坐标、以及所述第二坐标，确定所述第一测量点的精度；根据所述第二测量点的三维重构坐标、以及所述第三坐标，确定所述第二测量点的精度。8.根据权利要求6所述的装置，其特征在于，所述手术辅助导航系统的精度包括：所述路径的精度；所述第三确定模块具体用于：根据所述第一测量点的三维重构坐标和所述第二测量点的三维重构坐标，确定从所述第一测量点到所述第二测量点的第一方向；根据所述第二坐标和所述第三坐标，确定从所述第一测量点到所述第二测量点的第二方向；根据所述第一方向和所述第二方向，确定所述路径的精度。9.一种手术辅助导航系统的精度检测设备，其特征在于，包括：存储器；处理器；以及计算机程序；其中，所述计算机程序存储在所述存储器中，并被配置为由所述处理器执行以实现如权利要求1-5中任一项所述的方法。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1-5中任一项所述的方法。
说明书desc
技术领域本公开涉及计算机技术领域，尤其涉及一种手术辅助导航系统的精度检测方法、装置、设备及介质。背景技术手术辅助导航系统是由光学定位系统、医学影像设备和辅助导航工具等配合完成的复杂系统。其中，医学影像设备具体可以是X光透视影像设备。基于医学影像设备和光学定位系统，可以实现手术路径的规划与手术路径的精准定位。从而使得医生可以参考规划出的手术路径进行手术操作。但是，目前单一的精度测量工具无法满足对手术辅助导航系统的精度测量要求。发明内容为了解决上述技术问题或者至少部分地解决上述技术问题，本公开提供了一种手术辅助导航系统的精度检测方法、装置、设备及介质，以验证手术辅助导航系统的精度，无需使用机械臂，简单实用，成本低廉。第一方面，本公开实施例提供一种手术辅助导航系统的精度检测方法，所述手术辅助导航系统包括X光透视影像设备和光学定位系统，所述方法包括：获取扫描图像，所述扫描图像是采用所述X光透视影像设备对预设装置进行扫描后得到的，所述预设装置包括三个以上标记点、以及多个测量点；根据所述扫描图像，确定所述多个测量点中第一测量点的三维重构坐标和所述多个测量点中第二测量点的三维重构坐标，所述第一测量点和所述第二测量点用于规划路径；获取所述光学定位系统检测到的所述三个以上标记点分别在光学坐标系下的第一坐标；根据所述三个以上标记点分别在光学坐标系下的第一坐标、以及所述三个以上标记点分别与所述多个测量点之间的相对位置关系，确定所述第一测量点在光学坐标系下的第二坐标和所述第二测量点在光学坐标系下的第三坐标；根据所述第一测量点的三维重构坐标、所述第二测量点的三维重构坐标、所述第二坐标和所述第三坐标，确定所述手术辅助导航系统的精度。第二方面，本公开实施例提供一种手术辅助导航系统的精度检测装置，所述手术辅助导航系统包括X光透视影像设备和光学定位系统，所述精度检测装置包括：第一获取模块，用于获取扫描图像，所述扫描图像是采用所述X光透视影像设备对预设装置进行扫描后得到的，所述预设装置包括三个以上标记点、以及多个测量点；第一确定模块，用于根据所述扫描图像，确定所述多个测量点中第一测量点的三维重构坐标和所述多个测量点中第二测量点的三维重构坐标，所述第一测量点和所述第二测量点用于规划路径；第二获取模块，用于获取所述光学定位系统检测到的所述三个以上标记点分别在光学坐标系下的第一坐标；第二确定模块，用于根据所述三个以上标记点分别在光学坐标系下的第一坐标、以及所述三个以上标记点分别与所述多个测量点之间的相对位置关系，确定所述第一测量点在光学坐标系下的第二坐标和所述第二测量点在光学坐标系下的第三坐标；第三确定模块，用于根据所述第一测量点的三维重构坐标、所述第二测量点的三维重构坐标、所述第二坐标和所述第三坐标，确定所述手术辅助导航系统的精度。第三方面，本公开实施例提供一种手术辅助导航系统的精度检测设备，包括：存储器；处理器；以及计算机程序；其中，所述计算机程序存储在所述存储器中，并被配置为由所述处理器执行以实现如第一方面所述的方法。第四方面，本公开实施例提供一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行以实现第一方面所述的方法。本公开实施例提供的手术辅助导航系统的精度检测方法、装置、设备及介质，本公开通过获取预设装置的扫描图像得到第一测量点和第二测量点的三维重构坐标，根据光学定位系统检测到的三个以上标记点分别在光学坐标系下的第一坐标、三个以上标记点分别与多个测量点之间的相对位置关系，确定第一测量点在光学坐标系下的第二坐标和第二测量点在光学坐标系下的第三坐标，为计算手术辅助导航系统的精度提供了数据基础；根据第一测量点的三维重构坐标、第二测量点的三维重构坐标、第二坐标和第三坐标，分别确定第一测量点和第二测量点的坐标差异，以及第一测量点到第二测量点的方向差异，从而确定手术辅助导航系统的精度，方法操作简单，成本低廉。附图说明此处的附图被并入说明书中并构成本说明书的一部分，示出了符合本公开的实施例，并与说明书一起用于解释本公开的原理。为了更清楚地说明本公开实施例或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作简单地介绍，显而易见地，对于本领域普通技术人员而言，在不付出创造性劳动性的前提下，还可以根据这些附图获得其他的附图。图1为本公开实施例提供的手术辅助导航系统的精度检测方法流程图；图2为本公开实施例提供的预设装置俯视的结构示意图；图3为本公开实施例提供的预设装置仰视的结构示意图；图4为本公开实施例提供的手术辅助导航系统的精度结构示意图；图5为本公开另一实施例提供的手术辅助导航系统的精度检测流程的示意图；图6为本公开另一实施例提供的获取第一路径的三维重构信息流程的示意图；图7为本公开另一实施例提供的获取第二路径的光学追踪信息流程的示意图；图8为本公开实施例提供的手术辅助导航系统的精度检测装置的结构示意图；图9为本公开实施例提供的手术辅助导航系统的精度检测设备的结构示意图。具体实施方式为了能够更清楚地理解本公开的上述目的、特征和优点，下面将对本公开的方案进行进一步描述。需要说明的是，在不冲突的情况下，本公开的实施例及实施例中的特征可以相互组合。在下面的描述中阐述了很多具体细节以便于充分理解本公开，但本公开还可以采用其他不同于在此描述的方式来实施；显然，说明书中的实施例只是本公开的一部分实施例，而不是全部的实施例。手术辅助导航系统在手术中用于手术器械或植入物的精确定位。基于医学影像设备与光学定位系统的组合使用，可以实现手术定点的精准定位与手术路径的规划，医生可以参考规划出的手术路径完成手术操作。规划出手术路径是空间中的一条带方向的线段，包含了入点、出点、方向三大要素，因此该系统的精度考量也需要包含定点精度与方向精度双重指标。通常情况下，手术辅助导航系统是光学定位系统，x光识别模块与辅助导航工具配合完成的复杂系统，单一的精度测量工具无法满足系统精度测量的要求。针对该问题，本公开实施例提供了一种手术辅助导航系统的精度检测方法，下面结合具体的实施例对该方法进行介绍。图1为本公开实施例提供的手术辅助导航系统的精度检测方法流程图，所述手术辅助导航系统包括X光透视影像设备和光学定位系统。下面结合图2所示的预设装置俯视的结构示意图和图3所示的预设装置仰视的结构示意图，对图1所示的手术辅助导航系统的精度检测方法进行介绍，该方法包括的具体步骤如下：S101、获取扫描图像，所述扫描图像是采用所述X光透视影像设备对预设装置进行扫描后得到的，所述预设装置包括三个以上标记点、以及多个测量点。在本实施例中，X光透视影像设备对预设装置200进行扫描后，得到预设装置200的扫描图像，此处不限制扫描图像的个数，例如可以是一个或多个。进一步，X光透视影像设备可以将其扫描得到的一个或多个扫描图像发送给上位机，从而使得上位机可以获取到预设装置200的一个或多个扫描图像。其中，预设装置200包括三个以上标记点、以及多个测量点。该三个以上标记点分别为标记点201、标记点202、标记点203、标记点204；该多个测量点包括如图2所示的205-212等在内的八个点。可选的，除标记点和测量点之外的其他结构均由X光吸收能力较差的材料制成，便于通过扫描确定标记点和测量点的具体位置。可选的，X光透视影像设备也可以是激光扫描仪、电子计算机断层扫描设备等扫描设备，本方案对此不做限定。S102、根据所述扫描图像，确定所述多个测量点中第一测量点的三维重构坐标和所述多个测量点中第二测量点的三维重构坐标，所述第一测量点和所述第二测量点用于规划路径。例如，当上位机从X光透视影像设备接收到预设装置200的一个或多个扫描图像后，可以根据预设装置200的一个或多个扫描图像，进行三维重构生成预设装置200的三维模型。可以理解的是，预设装置200的扫描图像可以是二维图像，也可以是三维图像。当预设装置200的扫描图像是二维图像时，上位机可以至少根据预设装置200的两张扫描图像，进行三维重构从而得到预设装置200的三维模型。进一步，上位机可以根据预设装置200的三维模型，确定多个测量点中每个测量点的三维重构坐标。另外，上位机可以从多个测量点中选取一个测量点作为入点，该入点记为第一测量点。此外，上位机还可以从多个测量点中选取另一个测量点作为出点，该出点记为第二测量点。可以理解的是，在其他实施例中，出点可以被记为第一测量点，入点可以被记为第二测量点。另外，从多个测量点中选取入点和出点的过程不限于是上位机来执行，例如还可以由其他设备从多个测量点中选取入点和出点，并将选取的结果发送给上位机，使得上位机可以确定出多个测量点中的哪个测量点为入点例如第一测量点，哪个测量点为出点例如第二测量点。进一步，上位机根据多个测量点中每个测量点的三维重构坐标，可以确定出该多个测量点中第一测量点的三维重构坐标和该多个测量点中第二测量点的三维重构坐标。另外，上位机或其他设备还可以根据第一测量点和第二测量点确定出规划路径，如图3所示，该规划路径为由第一测量点到第二测量点的带方向的线段44。可选的，第一测量点40和第二测量点42的选取方式也可以是人为选取后将选取的结果发送给上位机。本方案对此不做限定。S103、获取所述光学定位系统检测到的所述三个以上标记点分别在光学坐标系下的第一坐标。用光学定位系统检测预设装置200的三个以上标记点分别在光学坐标系下的第一坐标，并将该三个以上标记点分别在光学坐标系下的第一坐标发送到上位机，从而使上位机获得预设装置200的三个以上标记点分别在光学坐标系下的第一坐标。例如，用光学定位系统检测预设装置200的标记点201在光学坐标系下的第一坐标、标记点202在光学坐标系下的第一坐标、标记点203在光学坐标系下的第一坐标、标记点204在光学坐标系下的第一坐标，并将标记点201、标记点202、标记点203、标记点204在光学坐标系下的第一坐标分别发送到上位机，从而使上位机获得预设装置200的标记点201、标记点202、标记点203、标记点204分别在光学坐标系下的第一坐标、、、。S104、根据所述三个以上标记点分别在光学坐标系下的第一坐标、以及所述三个以上标记点分别与所述多个测量点之间的相对位置关系，确定所述第一测量点在光学坐标系下的第二坐标和所述第二测量点在光学坐标系下的第三坐标。上位机根据上述获得的三个以上标记点分别在光学坐标系下的第一坐标、以及上位机中加载的该三个以上标记点分别与多个测量点之间的相对位置关系，计算得出第一测量点在光学坐标系下的第二坐标41和第二测量点在光学坐标系下的第三坐标43。第一测量点和第二测量点用于规划路径，光学坐标系下规划路径为第二路径，具体为由第二坐标41到第三坐标43的带方向的线段45。可选的，三个以上标记点分别与所述多个测量点之间的相对位置关系是固有的，预设装置被做好时就测量好并标记了各个标记点和多个测量点的坐标，记为标定参数，放置在标定文件中。因此，三个以上标记点分别与所述多个测量点之间的相对位置关系就可以计算得到，可以重复使用。此处，三坐标测量方法也可以测量得到各个标记点和多个测量点的坐标，但是成本很高，且无法重复使用。S105、根据所述第一测量点的三维重构坐标、所述第二测量点的三维重构坐标、所述第二坐标和所述第三坐标，确定所述手术辅助导航系统的精度。上位机根据所述第一测量点的三维重构坐标40、所述第二测量点的三维重构坐标42、所述第二坐标41和所述第三坐标43，确定所述手术辅助导航系统的精度。可选的，所述手术辅助导航系统的精度可以是第一测量点的精度，也可以是第二测量点的精度，还可以是由第一册两点到第二测量点路径的精度。本公开实施例获取预设装置的扫描图像得到第一测量点和第二测量点的三维重构坐标，根据光学定位系统检测到的三个以上标记点分别在光学坐标系下的第一坐标、三个以上标记点分别与多个测量点之间的相对位置关系，确定第一测量点在光学坐标系下的第二坐标和第二测量点在光学坐标系下的第三坐标，为计算手术辅助导航系统的精度提供了数据基础；根据第一测量点的三维重构坐标、第二测量点的三维重构坐标、第二坐标和第三坐标，分别确定第一测量点和第二测量点的坐标差异，以及第一测量点到第二测量点的方向差异，从而确定手术辅助导航系统的精度，手术辅助导航系统的精度是在三维空间计算比较的，视觉上更直观明了，且方法操作简单，成本低廉。在上述实施例的基础上，所述手术辅助导航系统的精度包括：所述第一测量点的精度、所述第二测量点的精度；根据所述第一测量点的三维重构坐标、所述第二测量点的三维重构坐标、所述第二坐标和所述第三坐标，确定所述手术辅助导航系统的精度，包括：根据所述第一测量点的三维重构坐标、以及所述第二坐标，确定所述第一测量点的精度；根据所述第二测量点的三维重构坐标、以及所述第三坐标，确定所述第二测量点的精度。上位机根据第一测量点的三维重构坐标40和第一测量点在光学坐标系下的第二坐标41，计算第一测量点的三维重构坐标40和第二坐标41之间的距离，或者计算第一测量点的三维重构坐标40和第二坐标41之间的坐标差异，该距离或该坐标差异可以作为第一测量点的精度；上位机根据第二测量点的三维重构坐标42和第二测量点在光学坐标系下的第三坐标43，计算第二测量点的三维重构坐标42和第三坐标43之间的距离，或者计算第二测量点的三维重构坐标42和第三坐标43之间的坐标差异，该距离或该坐标差异可以作为第二测量点的精度。本公开实施例通过计算第一测量点的精度和第二测量点的精度，确定手术辅助导航系统的精度，在三维空间计算坐标距离或者坐标差异，视觉上更直观明了，提高了手术辅助导航系统的精度检测方法的灵活性。在上述实施例的基础上，所述手术辅助导航系统的精度包括：所述路径的精度；根据所述第一测量点的三维重构坐标、所述第二测量点的三维重构坐标、所述第二坐标和所述第三坐标，确定所述手术辅助导航系统的精度，包括：根据所述第一测量点的三维重构坐标和所述第二测量点的三维重构坐标，确定从所述第一测量点到所述第二测量点的第一方向；根据所述第二坐标和所述第三坐标，确定从所述第一测量点到所述第二测量点的第二方向；根据所述第一方向和所述第二方向，确定所述路径的精度。上位机根据第一测量点的三维重构坐标40和第二测量点的三维重构坐标42，确定从第一测量点到第二测量点的第一方向44，得出三维重构路径是从第一测量点的三维重构坐标40到第二测量点的三维重构坐标42的一条带方向的线段，即为基于三维重构信息得到的手术规划路径，记为第一路径；上位机根据第二坐标41和第三坐标43，确定从第一测量点到第二测量点的第二方向45，得出光学追踪路径是从第二坐标41到第三坐标43的一条带方向的线段，即为基于光学追踪信息得到的手术规划路径，记为第二路径；根据第一方向44和第二方向45，确定第一方向44和第二方向45的夹角为路径的精度。可选的，第一方向44和第二方向45的夹角大小可以根据三角函数定理计算得出，第一方向44和第二方向45的夹角可能是锐角，可能是直角，也可能是钝角。本公开实施例通过计算路径的精度，确定手术辅助导航系统的精度，进一步提高了手术辅助导航系统的精度检测方法的灵活性，使得精度检测的方法更加全面。在上述实施例的基础上，所述三个以上标记点分别设置有反光材料。反光材料，也称逆反射材料。反光材料的反光效果的强弱，是衡量反光材料反光效果的重要指标，逆反射系数越高，反光效果越强。本实施例中一个或者多个标记点分别设置的反光材料可以是反光膜、反光片、玻璃微珠等。可选的，反光材料也可以是主动发光装置等容易让光学定位仪检测到定位的物体。可选的，三个以上标记点可以为球体或其他形状，其体积超过50％处于暴露状态，便于光学定位系统测量其具体位置。本公开实施例通过在标记点上设置反光材料，反光材料能将光线按原路反射回去，使得光学定位系统可以简单快速的得到标记点的位置。在上述实施例的基础上，所述多个测量点设置在所述预设装置的周围。如图2所示，多个测量点设置在预设装置的周围。本公开实施例通过将多个测量点设置在预设装置周围，使得确定标记点和测量点的相对位置更加简单。图5为本公开另一实施例提供的手术辅助导航系统的精度检测流程的示意图，如图5所示，该流程包括如下几个步骤：S501、获取第一路径的三维重构信息。S502、获取第二路径的光学追踪信息。S503、计算手术辅助导航系统的精度。具体的，S501可以通过如图6所示的方法实现。具体的，如图6所示，S501具体可以通过如下几个步骤来实现：S601、获取预设装置的扫描图像。S601和上述S101的实现原理和具体方法是一致的，此处不再赘述。S602、根据所述扫描图像，三维重建确定入点和出点。例如，当上位机从X光透视影像设备接收到预设装置200的一个或多个扫描图像后，可以根据预设装置200的一个或多个扫描图像，进行三维重构生成预设装置200的三维模型。可以理解的是，预设装置200的扫描图像可以是二维图像，也可以是三维图像。当预设装置200的扫描图像是二维图像时，上位机可以至少根据预设装置200的两张扫描图像，进行三维重构从而得到预设装置200的三维模型。上位机可以从多个测量点中选取一个测量点作为入点，该入点记为第一测量点。此外，上位机还可以从多个测量点中选取另一个测量点作为出点，该出点记为第二测量点。可以理解的是，在其他实施例中，出点可以被记为第一测量点，入点可以被记为第二测量点。另外，从多个测量点中选取入点和出点的过程不限于是上位机来执行，例如还可以由其他设备从多个测量点中选取入点和出点，并将选取的结果发送给上位机，使得上位机可以确定出多个测量点中的哪个测量点为入点例如第一测量点，哪个测量点为出点例如第二测量点。可选的，入点40和出点42的选取方式也可以是人为选取后将选取的结果发送给上位机。本方案对此不做限定。S603、计算入点坐标、出点坐标和第一路径。上位机可以利用图像配准算法，根据多个测量点中每个测量点的三维重构坐标，可以确定出该多个测量点中入点的三维重构坐标40和该多个测量点中出点的三维重构坐标42。另外，上位机或其他设备还可以根据入点和出点确定出第一路径，如图3所示，该第一路径为由入点到出点的带方向的线段44。可选的，此处图像配准算法也可以用其他算法代替，该算法可以根据预设装置空间三维图像，确定多个测量点的位置。具体的，S502可以通过如图7所示的方法实现。具体的，如图7所示，S502具体可以通过如下几个步骤来实现：S701、加载标定文件中预设装置的标定参数，所述标定参数包括标记点和测量点的相对位置关系。预设装置被做好时就测量好并标记了各个标记点和多个测量点的坐标，记为标定参数，放置在标定文件中。因此，标记点与测量点之间的相对位置关系就可以计算得到，可以重复使用。上位机加载标定文件中预设装置的标定参数，所述标定参数包括标记点和测量点的相对位置关系。S702、获取光学定位系统检测到的三个以上标记点分别在光学坐标系下的第一坐标。S702和上述S103的实现原理和具体方法是一致的，此处不再赘述。S703、跟据标定参数，计算入点坐标、出点坐标和第二路径。上位机根据上述获得的三个以上标记点分别在光学坐标系下的第一坐标、以及上位机中加载的标定文件中预设装置的标定参数，即该三个以上标记点分别与多个测量点之间的相对位置关系，计算得出入点在光学坐标系下的第二坐标41和出点在光学坐标系下的第三坐标43。入点和出点用于规划路径，光学坐标系下规划路径为第二路径，具体为由第二坐标41到第三坐标43的带方向的线段45。具体的，S503实现方法如下：手术辅助导航系统的精度包括：入点的精度、出点的精度、路径的精度。上位机根据入点的三维重构坐标40和入点在光学坐标系下的第二坐标41，计算入点的三维重构坐标40和入点的第二坐标41之间的距离，或者计算入点的三维重构坐标40和入点的第二坐标41之间的坐标差异，该距离或该坐标差异可以作为入点的精度。上位机根据出点的三维重构坐标42和出点在光学坐标系下的第三坐标43，计算出点的三维重构坐标42和出点的第三坐标43之间的距离，或者计算出点的三维重构坐标42和出点的第三坐标43之间的坐标差异，该距离或该坐标差异可以作为出点的精度。上位机根据入点点的三维重构坐标30和出点的三维重构坐标32，确定从入点点到出点的第一方向34，得出三维重构路径是从入点点的三维重构坐标30到出点的三维重构坐标32的一条带方向的线段，记为第一路径；上位机根据第二坐标31和第三坐标33，确定从入点点到出点的第二方向35，得出光学追踪路径是从第二坐标31到第三坐标33的一条带方向的线段，记为第二路径；根据第一方向34和第二方向35，确定第一方向34和第二方向35的夹角为路径的精度。图8为本公开实施例提供的手术辅助导航系统的精度检测装置的结构示意图。该手术辅助导航系统包括X光透视影像设备和光学定位系统，该手术辅助导航系统的精度检测装置可以是手术辅助导航系统的精度检测设备，或者该精度检测装置可以是该精度检测设备中的组件或部件，该精度检测设备具体可以是上述实施例所述的上位机。本公开实施例提供的手术辅助导航系统的精度检测装置可以执行手术辅助导航系统的精度检测方法实施例提供的处理流程，如图8所示，手术辅助导航系统的精度检测装置80包括：第一获取模块81、第一确定模块82、第二获取模块83、第二确定模块84、第三确定模块85；其中，第一获取模块81，用于获取扫描图像，所述扫描图像是采用所述X光透视影像设备对预设装置进行扫描后得到的，所述预设装置包括三个以上标记点、以及多个测量点；第一确定模块82，用于根据所述扫描图像，确定所述多个测量点中第一测量点的三维重构坐标和所述多个测量点中第二测量点的三维重构坐标，所述第一测量点和所述第二测量点用于规划路径；第二获取模块83，用于获取所述光学定位系统检测到的所述三个以上标记点分别在光学坐标系下的第一坐标；第二确定模块84，用于根据所述三个以上标记点分别在光学坐标系下的第一坐标、以及所述三个以上标记点分别与所述多个测量点之间的相对位置关系，确定所述第一测量点在光学坐标系下的第二坐标和所述第二测量点在光学坐标系下的第三坐标；第三确定模块85，用于根据所述第一测量点的三维重构坐标、所述第二测量点的三维重构坐标、所述第二坐标和所述第三坐标，确定所述手术辅助导航系统的精度。可选的，所述手术辅助导航系统的精度包括：所述第一测量点的精度、所述第二测量点的精度；所述第三确定模块85具体用于：根据所述第一测量点的三维重构坐标、以及所述第二坐标，确定所述第一测量点的精度；根据所述第二测量点的三维重构坐标、以及所述第三坐标，确定所述第二测量点的精度。可选的，所述手术辅助导航系统的精度包括：所述路径的精度；所述第三确定模块85具体用于：根据所述第一测量点的三维重构坐标和所述第二测量点的三维重构坐标，确定从所述第一测量点到所述第二测量点的第一方向；根据所述第二坐标和所述第三坐标，确定从所述第一测量点到所述第二测量点的第二方向；根据所述第一方向和所述第二方向，确定所述路径的精度。可选的，所述三个以上标记点分别设置有反光材料。可选的，所述多个测量点设置在所述预设装置的周围。图8所示实施例的手术辅助导航系统的精度检测装置可用于执行上述手术辅助导航系统的精度检测方法实施例的技术方案，其实现原理和技术效果类似，此处不再赘述。图9为本公开实施例提供的手术辅助导航系统的精度检测设备的结构示意图。本公开实施例提供的手术辅助导航系统的精度检测设备可以执行手术辅助导航系统的精度检测方法实施例提供的处理流程，如图9所示，手术辅助导航系统的精度检测设备90包括：存储器91、处理器92、计算机程序和通讯接口93；其中，计算机程序存储在存储器91中，并被配置为由处理器92执行如上所述的手术辅助导航系统的精度检测方法。另外，本公开实施例还提供一种计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行以实现上述实施例所述的手术辅助导航系统的精度检测方法。需要说明的是，在本文中，诸如“第一”和“第二”等之类的关系术语仅仅用来将一个实体或者操作与另一个实体或操作区分开来，而不一定要求或者暗示这些实体或操作之间存在任何这种实际的关系或者顺序。而且，术语“包括”、“包含”或者其任何其他变体意在涵盖非排他性的包含，从而使得包括一系列要素的过程、方法、物品或者设备不仅包括那些要素，而且还包括没有明确列出的其他要素，或者是还包括为这种过程、方法、物品或者设备所固有的要素。在没有更多限制的情况下，由语句“包括一个……”限定的要素，并不排除在包括所述要素的过程、方法、物品或者设备中还存在另外的相同要素。以上所述仅是本公开的具体实施方式，使本领域技术人员能够理解或实现本公开。对这些实施例的多种修改对本领域的技术人员来说将是显而易见的，本文中所定义的一般原理可以在不脱离本公开的精神或范围的情况下，在其它实施例中实现。因此，本公开将不会被限制于本文所述的这些实施例，而是要符合与本文所公开的原理和新颖特点相一致的最宽的范围。
