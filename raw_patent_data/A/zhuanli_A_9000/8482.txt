标题title
实时脑功能激活图生成方法、装置、计算机设备和介质
摘要abst
本申请涉及实时脑功能激活图生成方法、装置、计算机设备和介质，获取待处理实时磁共振数据及与待处理实时磁共振数据时间点对应的实验标签信息；利用脑图谱模板将待处理实时磁共振数据转换成与脑区数量对应的图结构文件；将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图；图神经网络被一组基于血液动力学模型产生的不同的血液动力学响应基函数约束；各个血液动力学响应基函数对图神经网络进行约束的权重可进行调节；在对图神经网络进行训练的过程中，各个血液动力学响应基函数对图神经网络进行约束的权重经过训练并确定，有效提高脑功能激活计算的准确性，并及时地刻画被试当前大脑激活情况。
权利要求书clms
1.一种实时脑功能激活图生成方法，其特征在于，所述方法包括以下步骤：获取待处理实时磁共振数据以及与所述待处理实时磁共振数据时间点对应的实验标签信息；所述实验标签信息为产生所述待处理实时磁共振数据对应的实验任务类型；利用脑图谱模板将所述待处理实时磁共振数据转换成与脑区数量对应的图结构文件；所述图结构文件反映不同脑区的时间序列信号；将所述图结构文件及与其时间点对应的所述实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图；所述图神经网络被一组基于血液动力学模型产生的不同的血液动力学响应基函数约束；各个所述血液动力学响应基函数对所述图神经网络进行约束的权重可进行调节；在对所述图神经网络进行训练的过程中，各个所述血液动力学响应基函数对所述图神经网络进行约束的权重经过训练并确定。2.根据权利要求1所述的实时脑功能激活图生成方法，其特征在于，在将所述图结构文件及与其时间点对应的所述实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图之前，所述方法还包括：对所述血液动力学模型进行不同的参数设置生成若干血液动力学函数，按照预设规则从若干所述血液动力学函数中挑选预设个数的所述血液动力学函数作为一组所述血液动力学响应基函数；构建由一组所述血液动力学响应基函数进行约束的所述图神经网络；利用待训练磁共振数据以及与所述待训练磁共振数据时间点对应的实验标签信息对所述图神经网络进行训练，在训练的过程中，对所述血液动力学响应基函数对所述图神经网络进行约束的权重进行调整，得到对所述脑功能激活图预测效果最好的所述图神经网络，作为所述训练完备的图神经网络。3.根据权利要求1或权利要求2所述的实时脑功能激活图生成方法，其特征在于，所述获取待处理实时磁共振数据以及与所述待处理实时磁共振数据时间点对应的实验标签信息，包括以下步骤：获取实验任务过程中由磁共振设备进行实时扫描得到的单次实验刺激对应的所述待处理实时磁共振数据，以及与所述待处理实时磁共振数据时间点对应的实验标签信息；其中，在对所述图神经网络的训练过程中，待训练磁共振数据按照所述单次实验刺激对应的数据大小被划分成若干个训练块对所述图神经网络进行训练。4.根据权利要求2所述的实时脑功能激活图生成方法，其特征在于，所述按照预设规则从若干所述血液动力学函数中挑选预设个数的所述血液动力学函数作为一组所述血液动力学响应基函数，包括以下步骤：对若干所述血液动力学函数进行奇异值分解，按照奇异值从大到小挑选预设个数的所述血液动力学函数，作为一组所述血液动力学响应基函数。5.根据权利要求2所述的实时脑功能激活图生成方法，其特征在于，所述按照预设规则从若干所述血液动力学函数中挑选预设个数的所述血液动力学函数作为一组所述血液动力学响应基函数，包括以下步骤：利用主成分分析方法对若干所述血液动力学函数进行分析，根据表现的优异性从大到小挑选预设个数的所述血液动力学函数，作为一组所述血液动力学响应基函数。6.根据权利要求1所述的实时脑功能激活图生成方法，其特征在于，在利用脑图谱模板将所述待处理实时磁共振数据转换成与脑区数量对应的图结构文件之前，所述方法还包括：对所述待处理实时磁共振数据进行预处理操作，所述预处理操作包括头部校正操作、配准操作和平滑操作。7.根据权利要求1所述的实时脑功能激活图生成方法，其特征在于，在将所述图结构文件及与其时间点对应的所述实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图之后，所述方法还包括：对所述脑功能激活图进行以单次实验刺激为单位的实时可视化展示并输出脑功能激活报告。8.一种实时脑功能激活图生成装置，其特征在于，所述装置包括获取模块、转换模块和输出模块；所述获取模块，用于获取待处理实时磁共振数据以及与所述待处理实时磁共振数据时间点对应的实验标签信息；所述实验标签信息为产生所述待处理实时磁共振数据对应的实验任务类型；所述转换模块，用于利用脑图谱模板将所述待处理实时磁共振数据转换成与脑区数量对应的图结构文件；所述图结构文件反映不同脑区的时间序列信号；所述输出模块，用于将所述图结构文件及与其时间点对应的所述实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图；所述图神经网络被一组基于血液动力学模型产生的不同的血液动力学响应基函数约束；各个所述血液动力学响应基函数对所述图神经网络进行约束的权重可进行调节；在对所述图神经网络进行训练的过程中，各个所述血液动力学响应基函数对所述图神经网络进行约束的权重经过训练并确定。9.一种计算机设备，包括存储器和处理器，其特征在于，所述存储器存储有计算机程序，所述处理器执行所述计算机程序时实现权利要求1至权利要求7中任一项所述的实时脑功能激活图生成方法的步骤。10.一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现权利要求1至权利要求7中任一项所述的实时脑功能激活图生成方法的步骤。
说明书desc
技术领域本申请涉及计算机技术领域，特别是涉及一种实时脑功能激活图生成方法、装置、计算机设备和介质。背景技术功能性磁共振成像可以被用来研究大脑功能和认知过程，通过观察特定区域的神经活动，研究人员可以了解神经元之间的相互作用和信息传递过程，探究个体在执行记忆、情绪或者运动想象等不同任务时的大脑激活情况，这有助于在疾病治疗和康复过程中更好地了解和诊断脑功能异常和疾病。现有技术中，是利用一般线性模型分析的方法对磁共振数据进行分析，从而获得脑激活的强度和空间分布。具体的，首先建立实验设计矩阵，矩阵中的每一列代表一个任务或刺激，每一行代表在相应任务刺激下磁共振数据的获取时间。然后将实验设计矩阵和脑影像数据进行拟合，获得脑功能激活强度和空间分布。实验设计矩阵是通过实验条件向量与血液动力学响应函数卷积得到，其中，血液动力学响应函数是固定的标准的血液动力学响应函数，难以兼容不同刺激、不同环境、不同个体的差异，导致脑功能激活相关计算不够准确。其次，在实际的实时脑功能数据采集应用中，基于上述脑功能激活计算方法在处理实时数据时不能及时地刻画被试当前的大脑激活情况。针对现有技术中，脑功能激活相关计算方法存在由于血液动力学响应函数固定导致计算不够准确的问题，以及实时数据采集过程中不能及时地刻画被试当前的大脑激活情况等的局限性，目前尚未提出有效的解决方案。发明内容基于此，有必要针对上述技术问题，提供一种实时脑功能激活图生成方法、装置、计算机设备和计算机可读存储介质，以解决相关技术中脑功能激活相关计算不够准确的问题及实时数据采集过程中不能及时地刻画被试当前的大脑激活情况等的局限性。第一个方面，本申请实施例提供了一种实时脑功能激活图生成方法，所述方法包括以下步骤：获取待处理实时磁共振数据以及与所述待处理实时磁共振数据时间点对应的实验标签信息；所述实验标签信息为产生所述待处理实时磁共振数据对应的实验任务类型；利用脑图谱模板将所述待处理实时磁共振数据转换成与脑区数量对应的图结构文件；所述图结构文件反映不同脑区的时间序列信号；将所述图结构文件及与其时间点对应的所述实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图；所述图神经网络被一组基于血液动力学模型产生的不同的血液动力学响应基函数约束；各个所述血液动力学响应基函数对所述图神经网络进行约束的权重可进行调节；在对所述图神经网络进行训练的过程中，各个所述血液动力学响应基函数对所述图神经网络进行约束的权重经过训练并确定。在其中一个实施例中，在将所述图结构文件及与其时间点对应的所述实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图之前，所述方法还包括：对所述血液动力学模型进行不同的参数设置生成若干血液动力学函数，按照预设规则从若干所述血液动力学函数中挑选预设个数的所述血液动力学函数作为一组所述血液动力学响应基函数；构建由一组所述血液动力学响应基函数进行约束的所述图神经网络；利用待训练磁共振数据以及与所述待训练磁共振数据时间点对应的实验标签信息对所述图神经网络进行训练，在训练的过程中，对所述血液动力学响应基函数对所述图神经网络进行约束的权重进行调整，得到对所述脑功能激活图预测效果最好的所述图神经网络，作为所述训练完备的图神经网络。在其中一个实施例中，所述获取待处理实时磁共振数据以及与所述待处理实时磁共振数据时间点对应的实验标签信息，包括以下步骤：获取实验任务过程中由磁共振设备进行实时扫描得到的单次实验刺激对应的所述待处理实时磁共振数据，以及与所述待处理实时磁共振数据时间点对应的实验标签信息；其中，在对所述图神经网络的训练过程中，待训练磁共振数据按照所述单次实验刺激对应的数据大小被划分成若干个训练块对所述图神经网络进行训练。在其中一个实施例中，所述按照预设规则从若干所述血液动力学函数中挑选预设个数的所述血液动力学函数作为一组所述血液动力学响应基函数，包括以下步骤：对若干所述血液动力学函数进行奇异值分解，按照奇异值从大到小挑选预设个数的所述血液动力学函数，作为一组所述血液动力学响应基函数。在其中一个实施例中，所述按照预设规则从若干所述血液动力学函数中挑选预设个数的所述血液动力学函数作为一组所述血液动力学响应基函数，包括以下步骤：利用主成分分析方法对若干所述血液动力学函数进行分析，根据表现的优异性从大到小挑选预设个数的所述血液动力学函数，作为一组所述血液动力学响应基函数。在其中一个实施例中，在利用脑图谱模板将所述待处理实时磁共振数据转换成与脑区数量对应的图结构文件之前，所述方法还包括：对所述待处理实时磁共振数据进行预处理操作，所述预处理操作包括头部校正操作、配准操作和平滑操作。在其中一个实施例中，在将所述图结构文件及与其时间点对应的所述实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图之后，所述方法还包括：对所述脑功能激活图进行以单次实验刺激为单位的实时可视化展示并输出脑功能激活报告。第二个方面，本申请实施例提供了一种实时脑功能激活图生成装置，所述装置包括获取模块、转换模块和输出模块；所述获取模块，用于获取待处理实时磁共振数据以及与所述待处理实时磁共振数据时间点对应的实验标签信息；所述实验标签信息为产生所述待处理实时磁共振数据对应的实验任务类型；所述转换模块，用于利用脑图谱模板将所述待处理实时磁共振数据转换成与脑区数量对应的图结构文件；所述图结构文件反映不同脑区的时间序列信号；所述输出模块，用于将所述图结构文件及与其时间点对应的所述实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图；所述图神经网络被一组基于血液动力学模型产生的不同的血液动力学响应基函数约束；各个所述血液动力学响应基函数对所述图神经网络进行约束的权重可进行调节；在对所述图神经网络进行训练的过程中，各个所述血液动力学响应基函数对所述图神经网络进行约束的权重经过训练并确定。第三个方面，在本实施例中提供了一种计算机设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述计算机程序时实现上述第一个方面所述方法的步骤。第四个方面，在本实施例中提供了计算机可读存储介质，其上存储有计算机程序，所述计算机程序被处理器执行时实现上述第一个方面所述的方法的步骤。上述实时脑功能激活图生成方法、装置、计算机设备和计算机可读存储介质，通过获取待处理实时磁共振数据以及与待处理实时磁共振数据时间点对应的实验标签信息；实验标签信息为产生待处理实时磁共振数据对应的实验任务类型；利用脑图谱模板将待处理实时磁共振数据转换成与脑区数量对应的图结构文件；图结构文件反映不同脑区的时间序列信号；将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图；图神经网络被一组基于血液动力学模型产生的不同的血液动力学响应基函数约束；各个血液动力学响应基函数对图神经网络进行约束的权重可进行调节；在对图神经网络进行训练的过程中，各个血液动力学响应基函数对图神经网络进行约束的权重经过训练并确定。本申请中，利用一组基于血液动力学模型产生的不同的血液动力学响应基函数，对计算脑功能激活的图神经网络进行约束，由于各个血液动力学响应基函数对图神经网络进行约束的权重可进行动态调节，且在对图神经网络训练的过程中，对图神经网络进行约束的血液动力学响应基函数的权重经过训练并确定，使得由一组不同的血液动力学响应基函数约束的图神经网络可以对不同刺激、不同环境和不同个体的差异进行兼容，从而有效提高脑功能激活相关计算的准确性，从而输出准确的脑功能激活图。此外，本申请对待处理实时磁共振数据进行处理后，输出实时脑功能激活图，可及时地刻画被试当前的大脑激活情况。附图说明此处所说明的附图用来提供对本申请的进一步理解，构成本申请的一部分，本申请的示意性实施例及其说明用于解释本申请，并不构成对本申请的不当限定。在附图中：图1是根据本申请实施例提供的实时脑功能激活图生成方法的应用场景图；图2是根据本申请一实施例提供的实时脑功能激活图生成方法的流程图；图3是根据本申请另一实施例提供的实时脑功能激活图生成方法的流程图；图4是根据本申请实施例提供的实时脑功能激活图生成装置的结构示意图；图5是根据本申请实施例提供的计算机设备的结构示意图。具体实施方式为了使本申请的目的、技术方案及优点更加清楚明白，以下结合附图及实施例，对本申请进行描述和说明。应当理解，此处所描述的具体实施例仅仅用以解释本申请，并不用于限定本申请。基于本申请提供的实施例，本领域普通技术人员在没有作出创造性劳动的前提下所获得的所有其他实施例，都属于本申请保护的范围。显而易见地，下面描述中的附图仅仅是本申请的一些示例或实施例，对于本领域的普通技术人员而言，在不付出创造性劳动的前提下，还可以根据这些附图将本申请应用于其他类似情景。此外，还可以理解的是，虽然这种开发过程中所作出的努力可能是复杂并且冗长的，然而对于与本申请公开的内容相关的本领域的普通技术人员而言，在本申请揭露的技术内容的基础上进行的一些设计，制造或者生产等变更只是常规的技术手段，不应当理解为本申请公开的内容不充分。在本申请中提及“实施例”意味着，结合实施例描述的特定特征、结构或特性可以包含在本申请的至少一个实施例中。在说明书中的各个位置出现该短语并不一定均是指相同的实施例，也不是与其它实施例互斥的独立的或备选的实施例。本领域普通技术人员显式地和隐式地理解的是，本申请所描述的实施例在不冲突的情况下，可以与其它实施例相结合。除非另作定义，本申请所涉及的技术术语或者科学术语应当为本申请所属技术领域内具有一般技能的人士所理解的通常意义。本申请所涉及的“一”、“一个”、“一种”、“该”等类似词语并不表示数量限制，可表示单数或复数。本申请所涉及的术语“包括”、“包含”、“具有”以及它们任何变形，意图在于覆盖不排他的包含；例如包含了一系列步骤或模块的过程、方法、系统、产品或设备没有限定于已列出的步骤或单元，而是可以还包括没有列出的步骤或单元，或可以还包括对于这些过程、方法、产品或设备固有的其它步骤或单元。本申请所涉及的“连接”、“相连”、“耦接”等类似的词语并非限定于物理的或者机械的连接，而是可以包括电气的连接，不管是直接的还是间接的。本申请所涉及的“多个”是指两个或两个以上。“和/或”描述关联对象的关联关系，表示可以存在三种关系，例如，“A和/或B”可以表示：单独存在A，同时存在A和B，单独存在B这三种情况。字符“/”一般表示前后关联对象是一种“或”的关系。本申请所涉及的术语“第一”、“第二”、“第三”等仅仅是区别类似的对象，不代表针对对象的特定排序。图1为本申请一个实施例提供的实时脑功能激活图生成方法的应用场景图。如图1所示，服务器101与移动终端102之间可以通过网络进行数据传输。其中，移动终端102用于采集磁共振数据，并将采集到的磁共振数据传输至服务器101中。服务器101获取待处理实时磁共振数据以及与待处理实时磁共振数据时间点对应的实验标签信息；实验标签信息为产生待处理实时磁共振数据对应的实验任务类型；之后利用脑图谱模板将待处理实时磁共振数据转换成与脑区数量对应的图结构文件；图结构文件反映不同脑区的时间序列信号；最后将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图；图神经网络被一组基于血液动力学模型产生的不同的血液动力学响应基函数约束；各个血液动力学响应基函数对图神经网络进行约束的权重可进行调节；在对图神经网络进行训练的过程中，各个血液动力学响应基函数对图神经网络进行约束的权重经过训练并确定。其中，服务器101可以由独立的服务器或者是多个服务器组成的服务器集群来实现，移动终端102可以为任意一种磁共振设备。本实施例提供了一种实时脑功能激活图生成方法，如图2所示，该方法包括以下步骤：步骤S210，获取待处理实时磁共振数据以及与待处理实时磁共振数据时间点对应的实验标签信息；实验标签信息为产生待处理实时磁共振数据对应的实验任务类型。具体地，待处理实时磁共振数据可以是认知实验进行过程中由磁共振设备实时采集的磁共振数据。其中，认知实验任务可以是记忆力、注意力、语言、运动和情感处理等，以人类连接组项目任务的语言实验为例，对应的实验标签信息可以是数学任务或听故事任务等。步骤S230，利用脑图谱模板将待处理实时磁共振数据转换成与脑区数量对应的图结构文件；图结构文件反映不同脑区的时间序列信号。脑图谱模板是按照预设的脑区对大脑进行划分得到的。步骤S210中获取到的待处理实时磁共振数据是所有脑区的磁共振数据，利用脑图谱模板将待处理实时磁共振数据转换成与脑区数量对应的图结构文件，即可以得到每个脑区对应的图结构文件。步骤S250，将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图；图神经网络被一组基于血液动力学模型产生的不同的血液动力学响应基函数约束；各个血液动力学响应基函数对图神经网络进行约束的权重可进行调节；在对图神经网络进行训练的过程中，各个血液动力学响应基函数对图神经网络进行约束的权重经过训练并确定。具体地，图结构文件及与其时间点对应的实验标签信息可能是独立的两个文件，在将它们输入到图神经网络之前，可以将两者整理成一个文件，使对应时间点上同时具备磁共振响应和实验标签信息。图神经网络是一种机器学习模型，一般由多个卷积层组成。在本申请中，图神经网络可以由3层基于切比雪夫多项式的ChebNet图卷积层组成，并且将第一个卷积层替换为由一组基于血液动力学模型产生的不同的血液动力学响应基函数约束的ChebNet图卷积层，以达到图神经网络被一组基于血液动力学模型产生的不同的血液动力学响应基函数约束的效果。具体地，血液动力学响应基函数的个数可以根据实际情况进行调整，以确保图神经网络有更好的兼容性。此外，在对图神经网络进行训练的过程中，各个血液动力学响应基函数对图神经网络进行约束的权重经过训练并确定，由此保证本实施例中用于预测脑功能激活图的图神经网络是对当前脑功能激活图预测效果最好的神经网络。现有技术中，在计算脑功能激活过程中使用的血液动力学响应函数是固定的标准的血液动力学响应函数，难以兼容不同刺激、不同环境、不同个体的差异，导致脑功能激活相关计算不够准确。其次，在实际的实时脑功能数据采集应用中，基于上述脑功能激活计算方法在处理实时数据时不能及时地刻画被试当前的大脑激活情况。为了解决上述问题，本申请提出一种实时脑功能激活图生成方法，通过利用一组基于血液动力学模型产生的不同的血液动力学响应基函数，对计算脑功能激活的图神经网络进行约束，由于各个血液动力学响应基函数对图神经网络进行约束的权重可进行动态调节，且在对图神经网络训练的过程中，对图神经网络进行约束的血液动力学响应基函数的权重经过训练并确定，使得由一组不同的血液动力学响应基函数约束的图神经网络可以对不同刺激、不同环境和不同个体的差异进行兼容，从而有效提高脑功能激活相关计算的准确性，从而输出准确的脑功能激活图。此外，本申请对待处理实时磁共振数据进行处理后，输出实时脑功能激活图，可及时地刻画被试当前的大脑激活情况。作为其中一种实施方式，在步骤S230利用脑图谱模板将待处理实时磁共振数据转换成与脑区数量对应的图结构文件之前，本申请提供的实时脑功能激活图生成方法还包括步骤：步骤S220，对待处理实时磁共振数据进行预处理操作，预处理操作包括头部校正操作、配准操作和平滑操作。将待处理实时磁共振数据经过预处理操作后，可有效提高磁共振数据质量，从而进一步提高脑功能激活输出的准确性。此外，若图神经网络不兼容待处理实时磁共振数据的数据格式，还需要将待处理实时磁共振数据进行格式转换，例如若现有的磁共振数据格式为DICOM，需转换成NII格式，以便图神经网络进行后续处理。在其中一个实施例中，在步骤S250将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图之前，本申请提供的实时脑功能激活图生成方法还包括以下步骤：步骤S310，对血液动力学模型进行不同的参数设置生成若干血液动力学函数，按照预设规则从若干血液动力学函数中挑选预设个数的血液动力学函数作为一组血液动力学响应基函数。具体地，可以对若干血液动力学函数进行奇异值分解，按照奇异值从大到小挑选预设个数的血液动力学函数，作为一组血液动力学响应基函数。也可以利用主成分分析方法对若干血液动力学函数进行分析，根据表现的优异性从大到小挑选预设个数的血液动力学函数，作为一组血液动力学响应基函数。步骤S320，构建由一组血液动力学响应基函数进行约束的图神经网络。图神经网络通常是由多个卷积层网络组成，作为其中一种实施方式，可以将由3层基于切比雪夫多项式的ChebNet图卷积层网络中的第一层替换为由一组血液动力学响应基函数约束的ChebNet图卷积层网络作为本申请的图神经网络，进而，图神经网络的具体定义如下：其中，是图卷积，x是图数据，gθ是含有参数θ的卷积核。K表示采用的ChebNet阶数，范围为0到k之间。TK表示第k阶切比雪夫多项式。/＞表示正则化的拉普拉斯矩阵，L为拉普拉斯矩阵，η对应拉普拉斯矩阵最大特征值，I是单位矩阵。除此之外，本申请还设置目标损失函数，用于保证图神经网络模型计算的脑激活与先验脑激活分布的相似度，在实现脑功能状态预测的同时，约束图表征信息在关键脑区上尽可能拟合脑功能激活的先验知识；在目标损失函数中加入血液动力学响应基函数进行约束，带有脑功能激活先验约束和血液动力学响应基函数约束的目标损失函数为：目标损失函数由三部分组成，其中第一部分是交叉熵损失函数，yik表示第i个样本所对应的第k个实验标签信息，pik为图神经网络预测的属于第k个实验标签信息的概率；第二部分为均方误差损失函数，用于约束图表征信息尽可能在关键脑区上拟合脑功能激活的先验知识，wik为先验知识中提供的包含关键脑区的模板，zk为每个脑区激活程度的先验值，ik为图神经网络学习得到的激活程度值，α为权重系数，经验值为0.001；第三部分是血液动力学响应基函数的约束，fik是血液动力学响应基函数拟合的具有任务特异性的血液动力学函数，xik是大脑中每个时间序列上的信号，β为权重系数。步骤S330，利用待训练磁共振数据以及与待训练磁共振数据时间点对应的实验标签信息对图神经网络进行训练，在训练的过程中，对血液动力学响应基函数对图神经网络进行约束的权重进行调整，得到对脑功能激活图预测效果最好的图神经网络，作为训练完备的图神经网络。以上述图神经网络为例，模型训练即训练各个血液动力学响应基函数对图神经网络进行约束的权重。具体地，待训练磁共振数据是对训练样本进行磁共振扫描得到的磁共振数据。可以预想的是，为了进一步保证训练完备的图神经网络对脑功能激活图的输出结果的准确性，提供待训练磁共振数据的训练样本的脑功能激活表现与进行脑功能激活预测的实验者的脑功能激活表现需要保持一致。此外，与步骤S210至步骤S250输出实时脑功能激活图的流程对应，在将待训练磁共振数据以及与待训练磁共振数据时间点对应的实验标签信息输入到图神经网络中对图神经网络进行训练之前，需利用脑图谱模板将待训练磁共振数据转换成与脑区数量对应的图结构文件。作为其中一种实施方式，所有待训练磁共振数据可以被划分为训练集、验证集和测试集，并选择对验证集的脑功能激活图预测效果最好的图神经网络，作为训练完备的图神经网络。另外地，在其中一个实施例中，上述步骤S210获取待处理实时磁共振数据以及与待处理实时磁共振数据时间点对应的实验标签信息，包括以下步骤：步骤S211，获取实验任务过程中由磁共振设备进行实时扫描得到的单次实验刺激对应的待处理实时磁共振数据，以及与待处理实时磁共振数据时间点对应的实验标签信息；其中，在对图神经网络的训练过程中，待训练磁共振数据按照单次实验刺激对应的数据大小被划分成若干个训练块对图神经网络进行训练。具体地，单次实验刺激即机器学习领域的Single-trial，单次实验刺激对应的待处理实时磁共振数据是一个完整的实验刺激对应的磁共振数据。在本实施例中，实时获取单次实验刺激对应的待处理实时磁共振数据，以及与待处理实时磁共振数据时间点对应的实验标签信息，对实时获取的单次实验刺激对应的数据进行处理，可以更快地得到脑功能激活图，且可以根据实时获取到的以单个实验刺激为单位的脑功能激活图了解当前进行实验任务的实验者的任务配合度，以便及时做出调整。此外，若再次获取到实验任务过程中由磁共振设备进行实时扫描得到的单次实验刺激对应的待处理实时磁共振数据，以及与待处理实时磁共振数据时间点对应的实验标签信息，可以对以单个实验刺激为单位的脑功能激活图进行实时更新。可以预想的是，由于本实施例在输出实时脑功能激活图的流程中使用的是单次实验刺激对应的待处理实时磁共振数据，相应地，在对图神经网络的训练过程中，待训练磁共振数据也按照单次实验刺激对应的数据大小被划分成若干个训练块对图神经网络进行训练。更进一步地，在其中一个实施例中，在步骤S250将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图之后，本申请提供的实时脑功能激活图生成方法还包括：对脑功能激活图进行以单次实验刺激为单位的实时可视化展示并输出脑功能激活报告。具体地，可以用任意的显示设备对脑功能激活图进行以单次实验刺激为单位的实时可视化展示。在本实施例中，脑功能激活报告可以包含激活区域在脑图谱上的脑区顺序，激活脑区名称，激活脑区的峰值点坐标以及对应的激活值等。通过对脑功能激活图进行以单次实验刺激为单位的实时可视化展示并输出脑功能激活报告，脑功能激活情况可以被更直观地了解。图3是本发明的优选实施例中的实时脑功能激活图生成方法的流程图。如图3所示，该流程包括如下步骤：步骤S401，对血液动力学模型进行不同的参数设置生成若干血液动力学函数，按照预设规则从若干血液动力学函数中挑选预设个数的血液动力学函数作为一组血液动力学响应基函数。步骤S402，构建由一组血液动力学响应基函数进行约束的图神经网络。步骤S403，获取待训练磁共振数据以及与待训练磁共振数据时间点对应的实验标签信息，将待训练磁共振数据进行预处理操作，预处理操作包括头部校正操作、配准操作和平滑操作。步骤S404，对经过预处理操作后的待训练磁共振数据按照单次实验刺激对应的数据大小进行划分，得到若干训练块数据。步骤S405，利用若干训练块数据以及与若干训练块数据时间点对应的实验标签信息对图神经网络进行训练，在训练的过程中，对血液动力学响应基函数对图神经网络进行约束的权重进行调整，得到对脑功能激活图预测效果最好的图神经网络，作为训练完备的图神经网络。步骤S406，获取实验任务过程中由磁共振设备进行实时扫描得到的单次实验刺激对应的待处理实时磁共振数据，以及与待处理实时磁共振数据时间点对应的实验标签信息，将待处理实时磁共振数据进行预处理操作，预处理操作包括头部校正操作、配准操作和平滑操作。步骤S407，利用脑图谱模板将待处理实时磁共振数据转换成与脑区数量对应的图结构文件。步骤S408，判断图神经网络是否训练完备，若是，执行步骤S409，若否，执行步骤S401。步骤S409，将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图。步骤S410，对脑功能激活图进行以单次实验刺激为单位的实时可视化展示并输出脑功能激活报告。图4根据本发明实施例中实时脑功能激活图生成装置50的示意图，实时脑功能激活图生成装置50包括获取模块51、转换模块52和输出模块53：获取模块51，用于获取待处理实时磁共振数据以及与待处理实时磁共振数据时间点对应的实验标签信息；实验标签信息为产生待处理实时磁共振数据对应的实验任务类型；转换模块52，用于利用脑图谱模板将待处理实时磁共振数据转换成与脑区数量对应的图结构文件；图结构文件反映不同脑区的时间序列信号；输出模块53，用于将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图；图神经网络被一组基于血液动力学模型产生的不同的血液动力学响应基函数约束；各个血液动力学响应基函数对图神经网络进行约束的权重可进行调节；在对图神经网络进行训练的过程中，各个血液动力学响应基函数对图神经网络进行约束的权重经过训练并确定。上述实时脑功能激活图生成装置50利用一组基于血液动力学模型产生的不同的血液动力学响应基函数，对计算脑功能激活的图神经网络进行约束，由于各个血液动力学响应基函数对图神经网络进行约束的权重可进行动态调节，且在对图神经网络训练的过程中，对图神经网络进行约束的血液动力学响应基函数的权重经过训练并确定，使得由一组不同的血液动力学响应基函数约束的图神经网络可以对不同刺激、不同环境和不同个体的差异进行兼容，从而有效提高脑功能激活相关计算的准确性，从而输出准确的脑功能激活图。此外，本申请对待处理实时磁共振数据进行处理后，输出实时脑功能激活图，可及时地刻画被试当前的大脑激活情况。在其中一个实施例中，实时脑功能激活图生成装置50还包括训练模块，在将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图之前，训练模块用于对血液动力学模型进行不同的参数设置生成若干血液动力学函数，按照预设规则从若干血液动力学函数中挑选预设个数的血液动力学函数作为一组血液动力学响应基函数；构建由一组血液动力学响应基函数进行约束的图神经网络；利用待训练磁共振数据以及与待训练磁共振数据时间点对应的实验标签信息对图神经网络进行训练，在训练的过程中，对血液动力学响应基函数对图神经网络进行约束的权重进行调整，得到对脑功能激活图预测效果最好的图神经网络，作为训练完备的图神经网络。在其中一个实施例中，获取模块51还用于获取实验任务过程中由磁共振设备进行实时扫描得到的单次实验刺激对应的待处理实时磁共振数据，以及与待处理实时磁共振数据时间点对应的实验标签信息；其中，在对图神经网络的训练过程中，待训练磁共振数据按照单次实验刺激对应的数据大小被划分成若干个训练块对图神经网络进行训练。在其中一个实施例中，训练模块还用于对若干血液动力学函数进行奇异值分解，按照奇异值从大到小挑选预设个数的血液动力学函数，作为一组血液动力学响应基函数。在其中一个实施例中，训练模块还用于利用主成分分析方法对若干血液动力学函数进行分析，根据表现的优异性从大到小挑选预设个数的血液动力学函数，作为一组血液动力学响应基函数。在其中一个实施例中，实时脑功能激活图生成装置50还包括预处理模块，在利用脑图谱模板将待处理实时磁共振数据转换成与脑区数量对应的图结构文件之前，预处理模块用于对待处理实时磁共振数据进行预处理操作，预处理操作包括头部校正操作、配准操作和平滑操作。在其中一个实施例中，实时脑功能激活图生成装置50还包括展示模块，在将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图之后，展示模块用于对脑功能激活图进行以单次实验刺激为单位的实时可视化展示并输出脑功能激活报告。需要说明地是，上述各个模块可以是功能模块也可以是程序模块，既可以通过软件实现，也可以通过硬件来实现。上述各模块可以硬件形式内嵌于或独立于计算机设备中的处理器中，也可以以软件形式存储于计算机设备中的存储器中，以便于处理器调用执行以上各个模块对应的操作。在一个实施例中，提供了一种计算机设备，该计算机设备可以是服务器，其内部结构图可以如图5所示。该计算机设备包括通过系统总线连接的处理器、存储器、网络接口和数据库。其中，该计算机设备的处理器用于提供计算和控制能力。该计算机设备的存储器包括非易失性存储介质、内存储器。该非易失性存储介质存储有操作系统、计算机程序和数据库。该存储器为非易失性存储介质中的操作系统和计算机程序的运行提供环境。该计算机设备的数据库用于存储预设配置信息集合。该计算机设备的网络接口用于与外部的终端通过网络连接通信。该计算机程序被处理器执行时以实现实时脑功能激活图生成方法。在一个实施例中，提供了一种计算机设备，该计算机设备可以是终端。该计算机设备包括通过系统总线连接的处理器、存储器、网络接口、显示屏和输入装置。其中，该计算机设备的处理器用于提供计算和控制能力。该计算机设备的存储器包括非易失性存储介质、内存储器。该非易失性存储介质存储有操作系统和计算机程序。该存储器为非易失性存储介质中的操作系统和计算机程序的运行提供环境。该计算机设备的网络接口用于与外部的终端通过网络连接通信。该计算机程序被处理器执行时以实现一种实时脑功能激活图生成方法。该计算机设备的显示屏可以是液晶显示屏或者电子墨水显示屏，该计算机设备的输入装置可以是显示屏上覆盖的触摸层，也可以是计算机设备外壳上设置的按键、轨迹球或触控板，还可以是外接的键盘、触控板或鼠标等。本领域技术人员可以理解，图5示出的结构，仅仅是与本申请方案相关的部分结构的框图，并不构成对本申请方案所应用于其上的计算机设备的限定，具体的计算机设备可以包括比图中所示更多或更少的部件，或者组合某些部件，或者具有不同的部件布置。在一个实施例中，提供了一种计算机可读存储介质，其上存储有计算机程序，计算机程序被处理器执行时实现以下步骤：获取待处理实时磁共振数据以及与待处理实时磁共振数据时间点对应的实验标签信息；实验标签信息为产生待处理实时磁共振数据对应的实验任务类型；利用脑图谱模板将待处理实时磁共振数据转换成与脑区数量对应的图结构文件；图结构文件反映不同脑区的时间序列信号；将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图；图神经网络被一组基于血液动力学模型产生的不同的血液动力学响应基函数约束；各个血液动力学响应基函数对图神经网络进行约束的权重可进行调节；在对图神经网络进行训练的过程中，各个血液动力学响应基函数对图神经网络进行约束的权重经过训练并确定。在其中一个实施例中，在将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图之前，处理器执行计算机程序时还实现以下步骤：对血液动力学模型进行不同的参数设置生成若干血液动力学函数，按照预设规则从若干血液动力学函数中挑选预设个数的血液动力学函数作为一组血液动力学响应基函数；构建由一组血液动力学响应基函数进行约束的图神经网络；利用待训练磁共振数据以及与待训练磁共振数据时间点对应的实验标签信息对图神经网络进行训练，在训练的过程中，对血液动力学响应基函数对图神经网络进行约束的权重进行调整，得到对脑功能激活图预测效果最好的图神经网络，作为训练完备的图神经网络。在其中一个实施例中，处理器执行计算机程序时还实现以下步骤：获取实验任务过程中由磁共振设备进行实时扫描得到的单次实验刺激对应的待处理实时磁共振数据，以及与待处理实时磁共振数据时间点对应的实验标签信息；其中，在对图神经网络的训练过程中，待训练磁共振数据按照单次实验刺激对应的数据大小被划分成若干个训练块对图神经网络进行训练。在其中一个实施例中，处理器执行计算机程序时还实现以下步骤：对若干血液动力学函数进行奇异值分解，按照奇异值从大到小挑选预设个数的血液动力学函数，作为一组血液动力学响应基函数。在其中一个实施例中，处理器执行计算机程序时还实现以下步骤：利用主成分分析方法对若干血液动力学函数进行分析，根据表现的优异性从大到小挑选预设个数的血液动力学函数，作为一组血液动力学响应基函数。在其中一个实施例中，在利用脑图谱模板将待处理实时磁共振数据转换成与脑区数量对应的图结构文件之前，处理器执行计算机程序时还实现以下步骤：对待处理实时磁共振数据进行预处理操作，预处理操作包括头部校正操作、配准操作和平滑操作。在其中一个实施例中，在将图结构文件及与其时间点对应的实验标签信息输入到训练完备的图神经网络，输出实时脑功能激活图之后，处理器执行计算机程序时还实现以下步骤：对脑功能激活图进行以单次实验刺激为单位的实时可视化展示并输出脑功能激活报告。上述存储介质，利用一组基于血液动力学模型产生的不同的血液动力学响应基函数，对计算脑功能激活的图神经网络进行约束，由于各个血液动力学响应基函数对图神经网络进行约束的权重可进行动态调节，且在对图神经网络训练的过程中，对图神经网络进行约束的血液动力学响应基函数的权重经过训练并确定，使得由一组不同的血液动力学响应基函数约束的图神经网络可以对不同刺激、不同环境和不同个体的差异进行兼容，从而有效提高脑功能激活相关计算的准确性，从而输出准确的脑功能激活图。此外，本申请对待处理实时磁共振数据进行处理后，输出实时脑功能激活图，可及时地刻画被试当前的大脑激活情况。需要说明的是，本申请所涉及的用户信息和数据，均为经用户授权或者经过各方充分授权的信息和数据。应该明白的是，这里描述的具体实施例只是用来解释这个应用，而不是用来对它进行限定。根据本申请提供的实施例，本领域普通技术人员在不进行创造性劳动的情况下得到的所有其它实施例，均属本申请保护范围。显然，附图只是本申请的一些例子或实施例，对本领域的普通技术人员来说，也可以根据这些附图将本申请适用于其他类似情况，但无需付出创造性劳动。另外，可以理解的是，尽管在此开发过程中所做的工作可能是复杂和漫长的，但是，对于本领域的普通技术人员来说，根据本申请披露的技术内容进行的某些设计、制造或生产等更改仅是常规的技术手段，不应被视为本申请公开的内容不足。“实施例”一词在本申请中指的是结合实施例描述的具体特征、结构或特性可以包括在本申请的至少一个实施例中。该短语出现在说明书中的各个位置并不一定意味着相同的实施例，也不意味着与其它实施例相互排斥而具有独立性或可供选择。本领域的普通技术人员能够清楚或隐含地理解的是，本申请中描述的实施例在没有冲突的情况下，可以与其它实施例结合。以上实施例仅表达了本申请的几种实施方式，其描述较为具体和详细，但并不能因此而理解为对专利保护范围的限制。应当指出的是，对于本领域的普通技术人员来说，在不脱离本申请构思的前提下，还可以做出若干变形和改进，这些都属于本申请的保护范围。因此，本申请的保护范围应以所附权利要求为准。
