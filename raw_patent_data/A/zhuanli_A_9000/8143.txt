标题title
一种旋转机架更换治疗头的方法
摘要abst
本发明公开了一种旋转机架更换治疗头的方法，包括以下步骤：更换治疗头，治疗头支撑环相对于旋转体做相对运动；调整治疗角度，治疗头支撑环和旋转体做同步运动，本发明通过设置带有束流出口旋转体外环、和带有多个治疗头的治疗头内环，通过分别在外环设置用于比较差值的双编码器、内环设置用于比较差值的双编码器，通过外环的控制器和内环控制器通讯、以及各自调整自身旋转体误差，最终实现了两个不同动力系统和两个超大重型设备的同步，取得了意料不到的效果。
权利要求书clms
1.一种旋转机架更换治疗头的方法，其特征在于：包括以下步骤：步骤一、更换治疗头，治疗头支撑环相对于旋转体做相对运动；步骤二、调整治疗角度，治疗头支撑环和旋转体做同步运动。2.根据权利要求1所述一种旋转机架更换治疗头的方法，其特征在于：所述步骤一具体过程如下：⑴治疗头支撑环滚轮驱动控制器接收旋转体滚轮驱动控制器发送的旋转指令，旋转指令为旋转180°⑵根据旋转指令，治疗头支撑环滚轮驱动电机进行动作，并带动治疗头支撑环滚轮驱动电机编码器旋转；⑶治疗头支撑环滚轮驱动电机编码器读取所述电机旋转角度，并回传给治疗头支撑环滚轮驱动控制器；⑷治疗头支撑环滚轮驱动电机通过摩擦力带动治疗头支撑环以及治疗头支撑环编码器进行旋转；⑸治疗头支撑环编码器读数，并回传给治疗头支撑环滚轮驱动控制器；⑹治疗头支撑环滚轮驱动控制器的角度补偿模块比较治疗头支撑环滚轮驱动电机编码器回传的角度与治疗头支撑环编码器回传的角度；⑻二者角度相同，治疗头支撑环滚轮驱动电机停止动作完成旋转机架治疗头的更换；⑼二者角度不同，根据差值，治疗头支撑环滚轮驱动控制器发出角度补偿旋转指令，重复-，直至二者角度相同。3.根据权利要求3所述一种旋转机架更换治疗头的方法，其特征在于：所述步骤一的过程⑷具体环节如下：i、治疗头支撑环滚轮驱动电机带动治疗头支撑环滚轮支撑驱动轮转动；ii、治疗头支撑环滚轮支撑驱动轮带动治疗头支撑环滚轮支撑从动轮转动；iii、治疗头支撑环滚轮支撑从动轮通过摩擦力带动治疗头支撑环以及治疗头支撑环端面的编码器进行旋转。4.根据权利要求1所述一种旋转机架更换治疗头的方法，其特征在于：所述步骤二具体过程如下：⑴旋转体滚轮驱动控制器接收上位机发出的旋转角度指令；⑵将旋转角度指令通知给治疗头支撑环滚轮驱动控制器；⑶根据指令，旋转体滚轮支撑驱动电机和治疗头支撑环滚轮驱动电机进行动作，并分别带动旋转体滚轮支撑电机编码器和治疗头支撑环滚轮驱动电机编码器旋转；⑷旋转体滚轮支撑电机编码器和治疗头支撑环滚轮驱动电机编码器分别读取旋转体滚轮支撑驱动电机和治疗头支撑环滚轮驱动电机旋转的角度，并分别回传给旋转体滚轮驱动控制器和治疗头支撑环滚轮驱动控制器；⑸旋转体滚轮支撑驱动电机和治疗头支撑环滚轮驱动电机分别通过摩擦力带动旋转体和旋转体端面的旋转体编码器、治疗头支撑环以及和治疗头支撑环端面的治疗头支撑环编码器进行旋转；⑹旋转体编码器和治疗头支撑环编码器分别读数，并分别回传给旋转体滚轮驱动控制器和治疗头支撑环滚轮驱动控制器；⑺转体滚轮驱动控制器和治疗头支撑环滚轮驱动控制器分别比较旋转体滚轮支撑电机编码器和治疗头支撑环滚轮驱动电机编码器回传的角度与旋转体编码器和治疗头支撑环编码器回传的旋转角度；⑻二者角度相同，旋转体滚轮支撑驱动电机和/或治疗头支撑环滚轮驱动电机停止动作分别停止动作，完成旋转角度；⑼二者角度不同，根据差值，旋转体滚轮驱动控制器和/或治疗头支撑环滚轮驱动控制器发出角度补偿旋转指令，重复-，直至二者角度相同。5.根据权利要求4所述一种旋转机架更换治疗头的方法，其特征在于：所述步骤二的过程⑸具体环节如下：i、旋转体滚轮支撑驱动电机和治疗头支撑环滚轮驱动电机分别带动旋转体滚轮支撑驱动轮和治疗头支撑环滚轮支撑驱动轮转动；ii、旋转体滚轮支撑驱动轮和治疗头支撑环滚轮支撑驱动轮分别带动旋转体滚轮支撑从动轮和治疗头支撑环滚轮支撑从动轮转动；iii、旋转体滚轮支撑从动轮通过摩擦力带动旋转体和旋转体端面的旋转体编码器旋转；治疗头支撑环滚轮支撑从动轮通过摩擦力带动治疗头支撑环以及治疗头支撑环端面的编码器进行旋转。
说明书desc
技术领域本发明属于质子治疗技术领域，具体涉及一种可更换治疗头的旋转机架结构。背景技术旋转机架是质子治疗设备的重要组成部分，从加速器引出的束流经过束流线的传输，进入旋转机架，通过旋转机架束流线输运到治疗室。治疗头是安装在旋转机架上的重要设备，通过治疗头将质子束流进行散射或扫描,以展宽Bragg峰可以使Bragg峰覆盖肿瘤。旋转机架上的治疗头对患者病灶之处进行扫描和散射是一次质子治疗的两个环节。由于扫描和散射用途不同、原理不同，因此在一个完整的治疗过程中需要采用两个治疗头，这两个治疗头分别用于不同的治疗阶段。如图4所示，现有技术的旋转机架上只安装一个治疗头、且该治疗头固定安装在旋转机架上。当完成扫描治疗环节进入散射治疗环节时，则需要停机使得旋转机架脱离工作状态而变为静止状态，在静止状态下采用吊具工装更换治疗头，具体为采用吊具工装从工位1将治疗头吊起再进行180度的水平转动到达工位2，由此完成了治疗头的拆卸。然后该工装再反方向移动，将工位2上新的治疗头进行180度的水平转动到达工位1，由此完成治疗头的更换。现有技术存在的问题是：治疗头更换复杂、费时，旋转机架需要停机才能拆卸。发明内容本发明针对现有技术的不足，提出一种旋转机架更换治疗头的方法，目的在于解决现有技术治疗头更换复杂、费时，旋转机架需要停机才能拆卸的问题。本发明为解决其技术问题，提出以下技术方案：一种旋转机架更换治疗头的方法，其特征在于：包括以下步骤：步骤一、更换治疗头，治疗头支撑环相对于旋转体做相对运动；步骤二、调整治疗角度，治疗头支撑环和旋转体做同步运动。根据权利要求1所述一种旋转机架更换治疗头的方法，其特征在于：所述步骤一具体过程如下：⑴治疗头支撑环滚轮驱动控制器接收旋转体滚轮驱动控制器发送的旋转指令，旋转指令为旋转180°⑵根据旋转指令，治疗头支撑环滚轮驱动电机进行动作，并带动治疗头支撑环滚轮驱动电机编码器旋转；⑶治疗头支撑环滚轮驱动电机编码器读取所述电机旋转角度，并回传给治疗头支撑环滚轮驱动控制器；⑷治疗头支撑环滚轮驱动电机通过摩擦力带动治疗头支撑环以及治疗头支撑环编码器进行旋转；⑸治疗头支撑环编码器读数，并回传给治疗头支撑环滚轮驱动控制器；⑹治疗头支撑环滚轮驱动控制器的角度补偿模块比较治疗头支撑环滚轮驱动电机编码器回传的角度与治疗头支撑环编码器回传的角度；⑻二者角度相同，治疗头支撑环滚轮驱动电机停止动作完成旋转机架治疗头的更换；⑼二者角度不同，根据差值，治疗头支撑环滚轮驱动控制器发出角度补偿旋转指令，重复-，直至二者角度相同。根据权利要求3所述一种旋转机架更换治疗头的方法，其特征在于：所述步骤一的过程⑷具体环节如下：i、治疗头支撑环滚轮驱动电机带动治疗头支撑环滚轮支撑驱动轮转动；ii、治疗头支撑环滚轮支撑驱动轮带动治疗头支撑环滚轮支撑从动轮转动；iii、治疗头支撑环滚轮支撑从动轮通过摩擦力带动治疗头支撑环以及治疗头支撑环端面的编码器进行旋转。根据权利要求1所述一种旋转机架更换治疗头的方法，其特征在于：所述步骤二具体过程如下：⑴旋转体滚轮驱动控制器接收上位机发出的旋转角度指令；⑵将旋转角度指令通知给治疗头支撑环滚轮驱动控制器；⑶根据指令，旋转体滚轮支撑驱动电机和治疗头支撑环滚轮驱动电机进行动作，并分别带动旋转体滚轮支撑电机编码器和治疗头支撑环滚轮驱动电机编码器旋转；⑷旋转体滚轮支撑电机编码器和治疗头支撑环滚轮驱动电机编码器分别读取旋转体滚轮支撑驱动电机和治疗头支撑环滚轮驱动电机旋转的角度，并分别回传给旋转体滚轮驱动控制器和治疗头支撑环滚轮驱动控制器；⑸旋转体滚轮支撑驱动电机和治疗头支撑环滚轮驱动电机分别通过摩擦力带动旋转体和旋转体端面的旋转体编码器、治疗头支撑环以及和治疗头支撑环端面的治疗头支撑环编码器进行旋转；⑹旋转体编码器和治疗头支撑环编码器分别读数，并分别回传给旋转体滚轮驱动控制器和治疗头支撑环滚轮驱动控制器；⑺转体滚轮驱动控制器和治疗头支撑环滚轮驱动控制器分别比较旋转体滚轮支撑电机编码器和治疗头支撑环滚轮驱动电机编码器回传的角度与旋转体编码器和治疗头支撑环编码器回传的旋转角度；⑻二者角度相同，旋转体滚轮支撑驱动电机和/或治疗头支撑环滚轮驱动电机停止动作分别停止动作，完成旋转角度；⑼二者角度不同，根据差值，旋转体滚轮驱动控制器和/或治疗头支撑环滚轮驱动控制器发出角度补偿旋转指令，重复-，直至二者角度相同。根据权利要求4所述一种旋转机架更换治疗头的方法，其特征在于：所述步骤二的过程⑸具体环节如下：i、旋转体滚轮支撑驱动电机和治疗头支撑环滚轮驱动电机分别带动旋转体滚轮支撑驱动轮和治疗头支撑环滚轮支撑驱动轮转动；ii、旋转体滚轮支撑驱动轮和治疗头支撑环滚轮支撑驱动轮分别带动旋转体滚轮支撑从动轮和治疗头支撑环滚轮支撑从动轮转动；iii、旋转体滚轮支撑从动轮通过摩擦力带动旋转体和旋转体端面的旋转体编码器旋转；治疗头支撑环滚轮支撑从动轮通过摩擦力带动治疗头支撑环以及治疗头支撑环端面的编码器进行旋转。本发明的优点效果1、本方法通过比较治疗头支撑环驱动电机编码器和治疗头支撑环编码器两个编码器读数是否相同，从而判断是否需要角度补偿，不相同则进行角度补偿，相同则停止电机动作、完成治疗头更换，实现治疗头和束流出口0.096毫米的精确对位，解决了超重机械设备自动化实现治疗头更换时精度难以控制、人工治疗头更换复杂、费时，旋转机架需要停机才能拆卸的问题，有效缩短了治疗过程、提高了治疗效率。2、本发明通过设置两个相互通讯的控制器、且其中主控制器和上位机连接、主控制器接收上位机旋转角度指令后传达给治疗头控制器，然后各自的控制器按照上位机下达的共同标准，分别比较各自的两个编码器返回的读数是否一致，不一致则分别进行各自的角度补偿的方法，最终实现了两个相互独立的动力系统能够精确达到同步，且同步精度控制在0.096毫米的范围，解决了自动化更换治疗头时，内环和外环难以实现精确同步的难题，取得了突出的实质性进步和显著的效果。附图说明图1是本发明一种可更换治疗头的旋转机架的正视图；图2是本发明一种可更换治疗头的旋转机架的侧视图；图3是旋转体滚轮驱动控制器、治疗头支撑环滚轮驱动控制器内部结构图；图4、是现有技术基于工装更换治疗头的旋转机架的侧视图；图5、本发明更换治疗头方法示意图；图6、本发明旋转体和治疗头内环同步旋转方法示意图。图中：1-旋转体组件；1-0：旋转体；1-1：旋转机架束流线；1-2：质子束流出口；1-3-1、1-3-2、1-3-3旋转体滚轮支撑从动轮；1-3-4：旋转体滚轮支撑驱动轮；1-4：旋转体编码器；1-5：旋转体滚轮支撑驱动机构；1-6：旋转体滚轮驱动控制连接线；1-7：旋转体滚轮驱动控制器；1-8：旋转体滚轮支撑；2：治疗头支撑环组件；2-0：治疗头支撑环，2-1：扫描治疗头，2-2：散射治疗头；2-3-1、2-3-2、2-3-3、2-3-4、2-3-5、2-3-6、2-3-7：治疗头支撑环滚轮支撑从动轮；2-3-8：治疗头支撑环滚轮支撑驱动轮；2-4：治疗头支撑环编码器；2-5：治疗头支撑环滚轮驱动机构；2-6：治疗头支撑环滚轮驱动控制连接线；2-7：治疗头支撑环滚轮驱动控制器；2-8：治疗头支撑环滚轮支撑。3-旋转机架；具体实施方式本发明设计原理1、质子治疗的两个治疗阶段和设备的两种工况：第一个治疗阶段：使用扫描治疗头2-1先找到病人病灶的部位；第二个治疗阶段：使用散射治疗头2-2对病灶部位进行质子治疗。设备的两种工况：第一种工况：治疗头相对于束流出口做相对运动，从而完成对位；第二种工况：治疗头和旋转机架一起转动找到治疗的角度，从而对准病灶进行治疗；现有技术只有一个治疗头，当第一个阶段完成需要更换治疗头时，将治疗头和旋转机架扭转180度到地面，进行拆卸和安装；对于第一种工况，由人工将治疗头和旋转机架对位，具体为将治疗头上的准直点和束流出口上的准直点进行对位；对于第二种工况，将治疗头直接固定安装在旋转机架上，由旋转机架带动治疗头旋转。2、本发明设计难点：本发明采用旋转体带有2个治疗头且自动换头的方法，代替现有技术人工更换治疗头且旋转体只带1个治疗头的方法。自动更换治疗头需要克服两个难点，第一个难点，旋转物体超重超大，使得精度难以达到要求：本发明实施例中的旋转机架重量为120吨、治疗头内环和2个治疗头的总重量5吨。如果旋转物体重量相对比较轻，可以将齿轮或链条的精度做得非常高，而如果几吨或上百吨的旋转体传动采用齿轮或链条传动方法，就会把齿轮或链条打夲，因此只能采取摩擦滚动方法，但摩擦滚动原理是利用物体和物体之间的摩擦产生滚动，由于要求精度很高、误差不能超过0.096毫米，如果物体和物体接触不到位或者因为水渍、油渍产生打滑，就会造成编码器读数不准确而达不到精度要求；第二个难点：自动更换治疗头需要增加一个内环，由现有技术的一个环变为两个环。当需要改变治疗角度时需要外环和内环同步运动才能保证不发生错位，这对于一个外环120吨重、内环5吨重的两个物体，质量大越不容易控制，因为质量越大越不容易改变形态，这是第二个难点。而人工更换治疗头时只有一个外环没有内环、不存在外环和内环一起旋转的问题。3、本发明解决方案：第一、将旋转体组件的编码器设置在旋转体的端面而非设置在用于旋转体从动轮上、将治疗头支撑环组件的编码器设置在治疗头内环的端面而非设置在治疗头内环从动轮上；这样就可以避免由于从动轮跑空或者水渍、油渍产生打滑而造成编码器读数错误的问题。第二、对于旋转体组件和治疗头支撑环组件分别建立传动机构、控制机构、测量机构；当需要旋转机架和治疗头整体旋转时，各自的控制机构控制自身的旋转体和对方的旋转体保持同步运动。第三，建立两个控制器之间的通讯、并且由旋转体控制器控制治疗头内环控制器、且旋转体控制器连接治疗计划操作终端，外环控制器从治疗计划操作终端接收需要旋转的角度，并将该旋转角度通知治疗头内环控制器，治疗头控制器和旋转体控制器按照同一个角度做同步运动；第四、各自的控制器控制电机对自身的旋转体进行角度补偿。角度补偿具体方法为：每个控制器内设有旋转指令角度模块、用于接收主控制器或上位机的角度旋转指令；电机控制模块、用于执行中央处理模块的指令、控制电机的旋转角度；编码器测量模块，用于接收各自的两个编码器的回传数据、同时将接回传的线性编码器数据转换成角度后将两个编码器的角度数据反馈给角度补偿模块；角度补偿模块，用于从编码器测量模块接收两个编码器的角度数据并进行角度差值计算，并将差值发送中央处理模块；中央处理模块通过电机控制模块控制电机进行角度补偿，角度补偿后，编码器测量模块再次接受接收两个编码器的角度数据，并进行角度差值计算并发送给中央处理模块，中央处理模块再次接收角度差值，直到角度补偿模块反馈差值为一个允许的最小范围才停止电机进行角度补偿。第五、设计两个编码器线性参数相同作为计算比例关系的基本单位。所述比例关系就是对应同一个旋转角度大直径的弧长与小直径的弧长的比例关系。由于旋转体和治疗头内环是由各自的两个独立的电机驱动旋转，为了保持同步，要求它们旋转角度相同，由于旋转体和治疗头内环编码器采用的均是线性编码器，当旋转体和治疗头内环旋转了同一个角度时，大半径的旋转体和小半径的治疗头内环所对应的弧长是不同的，这样，就需要计算出两个弧长之间的比例关系，有了这个比例关系，就可以根据线性位移计算出各自的旋转角度，再根据各自的旋转角度判定是否同步。但确定所述比例关系的前提是计算弧长的基本计算单位相同，由于弧长的计算均以编码器步长为基本计算单位，所以，需要设计旋转体编码器和治疗头编码器为相同步长的编码器。设置相同步长编码器的总的思路是：由于旋转体的直径大于治疗头内环的直径，就需要旋转体编码器分辨率大于治疗头内环编码器的分辨率，两个直径的比例关系就是两个分辨率的比例关系。并且，治疗头支撑环滚轮与治疗头支撑环的直径比、与旋转体滚轮与旋转体的直径比相等。所述的治疗头支撑环滚轮为治疗头支撑环滚轮支撑从动轮，所述旋转体滚轮为旋转体滚轮支撑从动轮，治疗头支撑环滚轮支撑从动轮和转体滚轮为旋转体滚轮支撑从动轮的直径与各自对应的驱动轮的直径相同。根据以上发明原理，本发明设计了一种旋转机架更换治疗头的方法，该方法是基于以下一种可更换治疗头的旋转机架而提出的：如图1、图2所示，一种可更换治疗头的旋转机架3，包括外环的设有质子束流出口的旋转体组件1、内环的设有多个治疗头的治疗头支撑环组件2；所述的旋转体组件包括旋转体1-0、用于测量旋转体线位移的旋转体编码器1-4、旋转体滚轮支撑组件、旋转体滚轮驱动控制器1-7；所述治疗头支撑环组件包括治疗头支撑环2-0、用于测量治疗头支撑环线位移的治疗头支撑环编码器2-4、治疗头支撑环滚轮支撑组件、治疗头支撑环滚轮驱动控制器2-7；所述的治疗头支撑环2-0与旋转体1同轴布设、且治疗头支撑环2-0内壁上对称设有多个治疗头，该多个治疗头分别用于质子治疗的不同阶段；当改变质子治疗角度时，治疗头支撑环2-0与旋转体1-0做同步运动；当更换治疗头时，治疗头支撑环与旋转体做相对运动且多个治疗头分时与旋转体组件上的质子束流出口1-2对接、从而完成不同阶段质子治疗头的更换；所述的旋转体编码器1-4和治疗头支撑环编码器2-4为相同步长的编码器，所述的旋转体滚轮驱动控制器1-7和治疗头支撑环滚轮驱动控制器2-7相互通讯、且分别设有角度补偿控制单元，所述旋转体滚轮驱动控制器1-7与上位机治疗计划操作终端相连接。所述治疗头支撑环组件包括治疗头支撑环2-0、布设于该支撑环2-0端面上用于测量治疗头支撑环线位移的治疗头支撑环编码器2-4、安装于旋转体1-0与治疗头支撑环2-0之间且紧贴治疗头支撑环2-0外表面的治疗头支撑环滚轮支撑组件、布设于治疗头支撑环滚轮支撑组件上的治疗头支撑环滚轮驱动机构2-5、以及通过有线方式连接该驱动机构的治疗头支撑环滚轮驱动控制器。所述治疗头支撑环滚轮支撑组件由治疗头支撑环滚轮支撑1-8、治疗头支撑环滚轮支撑驱动轮2-3-8、治疗头支撑环滚轮支撑从动轮、治疗头支撑环滚轮驱动机构组成2-5；所述驱动轮和从动轮在治疗头支撑环滚轮支撑2-8的支撑下分前后两排均匀布设在治疗头支撑环外表面，前排由多个所述从动轮组成，后排由多个所述从动轮和一个所述驱动轮2-3-8组成，与所述驱动轮同轴布设有所述治疗头支撑环滚轮驱动机构2-5，该驱动机构包括治疗头支撑环滚轮驱动电机、治疗头支撑环滚轮驱动电机减速器、治疗头支撑环滚轮驱动电机编码器，该电机编码器布设于所述减速器上，用于测量所述电机的旋转角度；所述治疗头支撑环滚轮支撑组件通过摩擦力带动治疗头支撑环2-0和支撑环上的多个治疗头一起旋转。所述的多个治疗头包括散射治疗头与扫描治疗头，当需要使用散射束时，将散射治疗头旋转至旋转体组件的质子束流出口处，质子束流通过散射治疗头后照射至患者病灶上进行治疗；当需要使用扫描束时，将扫描治疗头旋转至旋转体组件的质子束流出口处，质子束流通过扫描治疗头后照射至患者病灶上进行治疗。所述旋转体组件1包括轴向为水平方向的旋转体1-0、旋转体1-0下方的旋转体滚轮支撑组件、布设于该旋转体1-0端面上用于测量旋转体线位移的旋转体编码器1-4、布设于旋转体滚轮支撑组件上的旋转体滚轮支撑驱动机构1-5，以及通过有线方式连接该驱动机构的旋转体滚轮驱动控制器1-7。所述旋转体滚轮支撑组件由旋转体滚轮支撑1-8、旋转体滚轮支撑驱动轮1-3-4、旋转体滚轮支撑从动轮、旋转体滚轮支撑驱动机构1-5组成；所述驱动轮和从动轮在旋转体滚轮支撑的支撑下分前后两排布设在旋转体1-0的下表面且紧贴旋转体1-0的下表面，前排由多个所述从动轮组成，后排由至少1个所述从动轮1-3-3和一个所述驱动轮1-3-4组成，与所述驱动轮1-3-4同轴布设有所述旋转体滚轮支撑驱动机构1-5，该驱动机构包括旋转体滚轮支撑驱动电机、旋转体滚轮支撑电机减速器、旋转体滚轮支撑电机编码器，该旋转体滚轮支撑电机编码器布设于旋转体滚轮支撑电机减速器上，用于测量旋转体滚轮支撑驱动电机的旋转角度；所述旋转体滚轮支撑组件通过摩擦力带动旋转体1旋转。所述旋转体滚轮驱动控制器1-7和治疗头支撑环滚轮驱动控制器2-7相互通讯、且旋转体滚轮驱动控制器1-7为主控制器，其与上位机治疗计划下达终端通过无线或有限方式连接、接收上位机治疗计划下达终端人机界面的相关指令，并将相关指令发送给治疗头支撑环滚轮驱动控制器2-7，所述相关指令包括旋转角度指令、治疗头更换指令；所述旋转体滚轮驱动控制器和治疗头支撑环滚轮驱动控制器各自的角度补偿控制单元均设有旋转指令角度模块、编码器测量模块、角度补偿模块、电机控制模块、中央处理模块；所述各自的中央处理模块分别向各自的旋转指令角度模块、角度补偿模块、电机控制模块发送指令并接收它们采集的数据；所述各自的编码器测量模块和角度补偿模块双向连接；所述各自的编码器测量模块用于接收各自的两个编码器的回传数据、同时将其中线性编码器接回传的数据转换成角度后将两个编码器的角度数据反馈给角度补偿模块；对于旋转体滚轮驱动控制器，两个编码器为旋转体滚轮支撑电机编码器和旋转体编码器，对于支撑环滚轮驱动控制器，两个编码器为治疗头支撑环滚轮驱动电机编码器和治疗头支撑环编码器。所述治疗头支撑环滚轮驱动电机编码器选用的分辨率是12位，即212＝4096,360°/4096＝0.088°，即治疗头支撑环滚轮的旋转步长是0.088°，治疗头支撑环滚轮与治疗头支撑环的直径比是1:40，即治疗头支撑环的旋转步长是0.0022°。所述旋转体滚轮驱动电机编码器选用的分辨率是13位，即213＝8192,360°/8192＝0.044°，即旋转体滚轮的旋转步长是0.044°，旋转体滚轮与旋转体的直径比是1:20，即旋转体的旋转步长是0.0022°。当更换治疗头时，当前治疗头和质子束流出口的对位为同轴对位、同轴对位精度不超过编码器的一个步长0.0022°。基于以上可更换治疗头的旋转机架，本发明提供一种旋转机架更换治疗头的方法，包括以下步骤：步骤一、更换治疗头，治疗头支撑环相对于旋转体做相对运动；步骤二、调整治疗角度，治疗头支撑环和旋转体做同步运动。所述步骤一具体过程如下：⑴治疗头支撑环滚轮驱动控制器发出旋转指令，旋转指令为旋转180°⑵根据旋转指令，治疗头支撑环滚轮驱动电机进行动作，并带动治疗头支撑环滚轮驱动电机编码器旋转；⑶治疗头支撑环滚轮驱动电机编码器读取所述电机旋转角度，并回传给治疗头支撑环滚轮驱动控制器；⑷治疗头支撑环滚轮驱动电机通过摩擦力带动治疗头支撑环以及治疗头支撑环编码器进行旋转；具体环节如下：i、治疗头支撑环滚轮驱动电机带动治疗头支撑环滚轮支撑驱动轮转动；ii、治疗头支撑环滚轮支撑驱动轮带动治疗头支撑环滚轮支撑从动轮转动；iii、治疗头支撑环滚轮支撑从动轮通过摩擦力带动治疗头支撑环以及治疗头支撑环端面的编码器进行旋转。⑸治疗头支撑环编码器读数，并回传给治疗头支撑环滚轮驱动控制器；⑹治疗头支撑环滚轮驱动控制器比较治疗头支撑环滚轮驱动电机编码器回传的角度与治疗头支撑环编码器回传的角度；⑻二者角度相同，治疗头支撑环滚轮驱动电机停止动作完成旋转机架治疗头的更换；⑼二者角度不同，根据差值，治疗头支撑环滚轮驱动控制器发出角度补偿旋转指令，重复-，直至二者角度相同。根据权利要求3所述一种旋转机架更换治疗头的方法，其特征在于：根据权利要求1所述一种旋转机架更换治疗头的方法，其特征在于：所述步骤二具体过程如下：⑴旋转体滚轮驱动控制器接收上位机发出的旋转角度指令；⑵将旋转角度指令通知给治疗头支撑环滚轮驱动控制器；⑶根据指令，旋转体滚轮支撑驱动电机和治疗头支撑环滚轮驱动电机进行动作，并分别带动旋转体滚轮支撑电机编码器和治疗头支撑环滚轮驱动电机编码器旋转；⑷旋转体滚轮支撑电机编码器和治疗头支撑环滚轮驱动电机编码器分别读取旋转体滚轮支撑驱动电机和治疗头支撑环滚轮驱动电机旋转的角度，并分别回传给旋转体滚轮驱动控制器和治疗头支撑环滚轮驱动控制器；⑸旋转体滚轮支撑驱动电机和治疗头支撑环滚轮驱动电机分别通过摩擦力带动旋转体和旋转体端面的旋转体编码器、治疗头支撑环以及和治疗头支撑环端面的治疗头支撑环编码器进行旋转；具体环节如下：i、旋转体滚轮支撑驱动电机和治疗头支撑环滚轮驱动电机分别带动旋转体滚轮支撑驱动轮和治疗头支撑环滚轮支撑驱动轮转动；ii、旋转体滚轮支撑驱动轮和治疗头支撑环滚轮支撑驱动轮分别带动旋转体滚轮支撑从动轮和治疗头支撑环滚轮支撑从动轮转动；iii、旋转体滚轮支撑从动轮通过摩擦力带动旋转体和旋转体端面的旋转体编码器旋转；治疗头支撑环滚轮支撑从动轮通过摩擦力带动治疗头支撑环以及治疗头支撑环端面的编码器进行旋转。⑹旋转体编码器和治疗头支撑环编码器分别读数，并分别回传给旋转体滚轮驱动控制器和治疗头支撑环滚轮驱动控制器；⑺转体滚轮驱动控制器和治疗头支撑环滚轮驱动控制器分别比较旋转体滚轮支撑电机编码器和治疗头支撑环滚轮驱动电机编码器回传的角度与旋转体编码器和治疗头支撑环编码器回传的旋转角度；⑻二者角度相同，旋转体滚轮支撑驱动电机和/或治疗头支撑环滚轮驱动电机停止动作分别停止动作，完成旋转角度；⑼二者角度不同，根据差值，旋转体滚轮驱动控制器和/或治疗头支撑环滚轮驱动控制器发出角度补偿旋转指令，重复-，直至二者角度相同。实施例一如图1所示，本发明提供的一种可更换治疗头的旋转机架3，其主要由旋转体组件1、治疗头支撑环2-0等部分组成。旋转体组件1通过旋转体滚轮支撑组件进行支撑，旋转体滚轮支撑组件上的电机驱动滚轮旋转并通过摩擦力带动旋转体组件1旋转。治疗头滚轮支撑组件安装在旋转体组件1与治疗头支撑环2-0之间，治疗头滚轮支撑组件上的电机驱动滚轮旋转并通过摩擦力带动治疗头支撑环2-0旋转。散射治疗头2-2与扫描治疗头2-1对称安装在治疗头支撑环2-0上，治疗头支撑环2-0旋转时带动散射治疗头2-2与扫描治疗头2-1一起旋转。当需要使用散射束时，将散射治疗头2-2旋转至旋转体组件1的束流线引出的质子束流出口1-2处，质子束流通过散射治疗头2-2后照射至患者病灶上进行治疗。当需要使用扫描束时，将扫描治疗头2-1旋转至旋转体组件1的束流线引出的质子束流出口1-2处，质子束流通过扫描治疗头2-1后照射至患者病灶上进行治疗。以上所述仅是本发明的优选实施方式，本发明的保护范围并不仅局限于上述实施例，凡属于本发明思路下的技术方案均属于本发明的保护范围。应当指出，对于本技术领域的普通技术人员来说，在不脱离本发明原理前提下的若干改进和润饰，这些改进和润饰也应视为本发明的保护范围。
