标题title
一种农业灌溉远传水表及水表控制方法
摘要abst
本发明提供一种农业灌溉远传水表及水表控制方法，涉及农业信息技术领域，包括：供电单元分别与微控制单元和通讯单元电连接，微控制单元分别与供电单元、流量计量单元和实时时钟单元通信连接；其中，实时时钟单元基于第一预设周期向微控制单元发送时钟唤醒脉冲信号；流量计量单元检测到灌水量脉冲信号的情况下，将灌水量脉冲信号发送给微控制单元；微控制单元在收到时钟唤醒脉冲信号的情况下，微控制单元控制供电单元向通讯单元供电，通讯单元进行数据上传；微控制单元在收到灌水量脉冲信号的情况下，微控制单元控制供电单元根据第二预设周期向通讯单元供电，通讯单元基于第二预设周期进行数据上传，其中，第二预设周期短于第一预设周期。
权利要求书clms
1.一种农业灌溉远传水表，其特征在于，包括：实时时钟单元、微控制单元、供电单元、通讯单元和流量计量单元；其中，所述供电单元分别与所述微控制单元和所述通讯单元电连接，所述微控制单元分别与所述供电单元、所述流量计量单元和所述实时时钟单元通信连接；其中，所述实时时钟单元基于第一预设周期向所述微控制单元发送时钟唤醒脉冲信号；所述流量计量单元检测到灌水量脉冲信号的情况下，将所述灌水量脉冲信号发送给所述微控制单元；所述微控制单元在收到所述时钟唤醒脉冲信号的情况下，所述微控制单元控制所述供电单元向所述通讯单元供电，所述通讯单元进行数据上传；所述微控制单元在收到所述灌水量脉冲信号的情况下，所述微控制单元控制所述供电单元根据第二预设周期向所述通讯单元供电，所述通讯单元基于所述第二预设周期进行数据上传，其中，所述第二预设周期短于所述第一预设周期。2.根据权利要求1所述的农业灌溉远传水表，其特征在于，所述水表还包括：阀门控制单元；其中，所述阀门控制单元与所述供电单元电连接，所述阀门控制单元与所述微控制单元通信连接；所述微控制单元在收到的所述灌水量脉冲信号超过预设脉冲数的情况下，所述微控制单元控制所述供电单元将所述阀门控制单元调整为闭合状态。3.根据权利要求2所述的农业灌溉远传水表，其特征在于，所述微控制单元，具体用于：在所述微控制单元接收到所述阀门控制单元发送的阀门开启状态信息的情况下，所述微控制单元在第一预设时间内未收到所述灌水量脉冲信号时，生成阀门故障信息。4.根据权利要求2所述的农业灌溉远传水表，其特征在于，所述微控制单元，具体用于：在所述微控制单元接收到所述阀门控制单元发送的阀门闭合状态信息的情况下，所述微控制单元收到所述灌水量脉冲信号时，生成阀门故障信息。5.根据权利要求1所述的农业灌溉远传水表，其特征在于，所述水表还包括：按键模块，所述按键模块与所述微控制单元通信连接；在所述按键模块接收到用户的按键输入时，生成按键唤醒脉冲，并将所述按键唤醒脉冲发送到微控制单元；所述微控制单元在接收到所述按键唤醒脉冲后，所述微控制单元从休眠状态切换到工作状态，控制所述供电单元向所述通讯单元供电，所述通讯单元进行数据上传。6.根据权利要求2所述的农业灌溉远传水表，其特征在于，所述供电单元，具体包括：第一电控开关、第二电控开关、升压电路、可充电锂电池和可充电保护电路；其中，所述可充电锂电池分别与所述可充电保护电路、所述第一电控开关、所述第二电控开关电连接；其中，所述第一电控开关与所述通讯单元电连接，所述第二电控开关与所述升压电路电连接，所述升压电路与所述阀门控制单元电连接，所述第一电控开关和所述第二电控开关均与所述微控制单元通信连接。7.根据权利要求2所述的农业灌溉远传水表，其特征在于，所述水表还包括：直流电磁阀，所述直流电磁阀与所述阀门控制单元电连接；其中，所述阀门控制单元为开启状态的情况下，所述阀门控制单元向所述直流电磁阀发送电磁阀开启脉冲，所述直流电磁阀响应于所述电磁阀开启脉冲，所述直流电磁阀开启；其中，所述阀门控制单元为闭合状态的情况下，所述阀门控制单元停止向所述直流电磁阀发送电磁阀开启脉冲，所述直流电磁阀关闭。8.一种基于权利要求1-7任一所述农业灌溉远传水表的水表控制方法，其特征在于，包括：微控制单元在收到时钟唤醒脉冲信号的情况下，所述微控制单元控制供电单元根据第一预设周期向通讯单元供电，所述通讯单元按照所述第一预设周期进行数据上传；所述微控制单元在收到灌水量脉冲信号的情况下，所述微控制单元控制所述供电单元根据第二预设周期向所述通讯单元供电，所述通讯单元基于所述第二预设周期进行数据上传，其中，所述第二预设周期短于所述第一预设周期。9.根据权利要求8所述的水表控制方法，其特征在于，所述方法还包括：所述微控制单元接收阀门控制单元发送的阀门状态信息；在所述阀门状态信息为阀门开启状态信息，且所述微控制单元在第一预设时间内未收到所述灌水量脉冲信号的情况下，生成阀门故障信息；在所述阀门状态信息为阀门闭合状态信息，且所述微控制单元在收到所述灌水量脉冲信号的情况下，生成阀门故障信息。10.根据权利要求8所述的水表控制方法，其特征在于，所述方法还包括：在所述微控制单元在收到时钟唤醒脉冲信号、灌水量脉冲信号或者按键唤醒脉冲的情况下，获取连续的灌水量脉冲信号的脉冲数量；在所述脉冲数量超过预设阈值的情况下，生成阀门闭合控制信息。
说明书desc
技术领域本发明涉及农业信息技术领域，尤其涉及一种农业灌溉远传水表及水表控制方法。背景技术水资源紧缺一直是困扰干旱地区农业可持续发展的重要问题。粗放型的灌溉降低了灌溉水的利用效率，加剧了干旱地区水资源紧缺的状况。不断增强农业用水管理水平，提高灌溉水利用率是环节水资源紧缺的主要手段。对灌溉用水量的精准监测不仅有利于及时掌握区域用水动态，合理调配水资源，采用阶梯收费等手段增强农户节水意识。同时，精准的灌溉用水量计量也是智能化自动化灌溉的关键技术环节，对实现按需灌溉、精准灌溉从而提高灌溉用水效率具有重要意义。相关技术中的一些水表是采用移动网络直接上传数据，由于通讯的功耗较大，现有的设备通常采用较大的通讯间隔进行通讯，如几小时或1天上传一次数据，间隔可设置，但是设置后水表始终以固定间隔上传数据，这样能够满足水表长时间续航的需要。但是，较大的数据传输间隔无法满足灌溉时精准控制水量的需要，而加大水表数据上传的频率会显著提高水表功率，缩短续航时间，无法满足农业灌溉的需要。因此，如何更好的进行灌溉用水量的精准检测成为行业内亟待解决的问题。发明内容本发明提供一种农业灌溉远传水表及水表控制方法，用以解决现有技术中水表的续航和准确度难以实现平衡的缺陷。本发明提供一种农业灌溉远传水表，包括：实时时钟单元、微控制单元、供电单元、通讯单元和流量计量单元；其中，所述供电单元分别与所述微控制单元和所述通讯单元电连接，所述微控制单元分别与所述供电单元、所述流量计量单元和所述实时时钟单元通信连接；其中，所述实时时钟单元基于第一预设周期向所述微控制单元发送时钟唤醒脉冲信号；所述流量计量单元检测到灌水量脉冲信号的情况下，将所述灌水量脉冲信号发送给所述微控制单元；所述微控制单元在收到所述时钟唤醒脉冲信号的情况下，所述微控制单元控制所述供电单元向所述通讯单元供电，所述通讯单元进行数据上传；所述微控制单元在收到所述灌水量脉冲信号的情况下，所述微控制单元控制所述供电单元根据第二预设周期向所述通讯单元供电，所述通讯单元基于所述第二预设周期进行数据上传，其中，所述第二预设周期短于所述第一预设周期。根据本发明提供的一种农业灌溉远传水表，所述水表还包括：阀门控制单元；其中，所述阀门控制单元与所述供电单元电连接，所述阀门控制单元与所述微控制单元通信连接；所述微控制单元在收到的所述灌水量脉冲信号超过预设脉冲数的情况下，所述微控制单元控制所述供电单元将所述阀门控制单元调整为闭合状态。根据本发明提供的一种农业灌溉远传水表，所述微控制单元，具体用于：在所述微控制单元接收到所述阀门控制单元发送的阀门开启状态信息的情况下，所述微控制单元在第一预设时间内未收到所述灌水量脉冲信号时，生成阀门故障信息。根据本发明提供的一种农业灌溉远传水表，所述微控制单元，具体用于：在所述微控制单元接收到所述阀门控制单元发送的阀门闭合状态信息的情况下，所述微控制单元收到所述灌水量脉冲信号时，生成阀门故障信息。根据本发明提供的一种农业灌溉远传水表，所述水表还包括：按键模块，所述按键模块与所述微控制单元通信连接；在所述按键模块接收到用户的按键输入时，生成按键唤醒脉冲，并将所述按键唤醒脉冲发送到微控制单元；所述微控制单元在接收到所述按键唤醒脉冲后，所述微控制单元从休眠状态切换到工作状态，控制所述供电单元向所述通讯单元供电，所述通讯单元进行数据上传。根据本发明提供的一种农业灌溉远传水表，所述供电单元，具体包括：第一电控开关、第二电控开关、升压电路、可充电锂电池和可充电保护电路；其中，所述可充电锂电池分别与所述可充电保护电路、所述第一电控开关、所述第二电控开关电连接；其中，所述第一电控开关与所述通讯单元电连接，所述第二电控开关与所述升压电路电连接，所述升压电路与所述阀门控制单元电连接，所述第一电控开关和所述第二电控开关均与所述微控制单元通信连接。根据本发明提供的一种农业灌溉远传水表，所述水表还包括：直流电磁阀，所述直流电磁阀与所述阀门控制单元电连接；其中，所述阀门控制单元为开启状态的情况下，所述阀门控制单元向所述直流电磁阀发送电磁阀开启脉冲，所述直流电磁阀响应于所述电磁阀开启脉冲，所述直流电磁阀开启；其中，所述阀门控制单元为闭合状态的情况下，所述阀门控制单元停止向所述直流电磁阀发送电磁阀开启脉冲，所述直流电磁阀关闭。本发明还提供一种基于上述任一所述农业灌溉远传水表的水表控制方法，包括：微控制单元在收到时钟唤醒脉冲信号的情况下，所述微控制单元控制供电单元根据第一预设周期向通讯单元供电，所述通讯单元按照所述第一预设周期进行数据上传；所述微控制单元在收到灌水量脉冲信号的情况下，所述微控制单元控制所述供电单元根据第二预设周期向所述通讯单元供电，所述通讯单元基于所述第二预设周期进行数据上传，其中，所述第二预设周期短于所述第一预设周期。根据本发明提供的一种水表控制方法，所述方法还包括：所述微控制单元接收阀门控制单元发送的阀门状态信息；在所述阀门状态信息为阀门开启状态信息，且所述微控制单元在第一预设时间内未收到所述灌水量脉冲信号的情况下，生成阀门故障信息；在所述阀门状态信息为阀门闭合状态信息，且所述微控制单元在收到所述灌水量脉冲信号的情况下，生成阀门故障信息。根据本发明提供的一种水表控制方法，所述方法还包括：在所述微控制单元在收到时钟唤醒脉冲信号、灌水量脉冲信号或者按键唤醒脉冲的情况下，获取连续的灌水量脉冲信号的脉冲数量；在所述脉冲数量超过预设阈值的情况下，生成阀门闭合控制信息。本发明还提供一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，所述处理器执行所述程序时实现如上述任一种所述水表控制方法。本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现如上述任一种所述水表控制方法。本发明还提供一种计算机程序产品，包括计算机程序，所述计算机程序被处理器执行时实现如上述任一种所述水表控制方法。本发明提供的一种农业灌溉远传水表及水表控制方法，农业灌溉远传水表在平时保持低功耗休眠状态，仅仅通过定时时钟单元按照第一预设周期生成的时钟唤醒脉冲信号来唤醒微控制单元，进行灌溉水量上报，以此来有效控制功耗，而在流量计量单元检测到灌水量脉冲信号的时候，则说明此时很可能正在进行灌溉，此时灌溉水量变化较快，而为了保证更准确的灌溉水量同步，此时微控制单元会加大上报频次，通过短于第一预设周期的第二预设周期来进行灌溉水量上报，保证了灌溉用水量的精准检测。附图说明为了更清楚地说明本发明或现有技术中的技术方案，下面将对实施例或现有技术描述中所需要使用的附图作一简单地介绍，显而易见地，下面描述中的附图是本发明的一些实施例，对于本领域普通技术人员来讲，在不付出创造性劳动的前提下，还可以根据这些附图获得其他的附图。图1为本申请实施例提供的农业灌溉远传水表结构示意图；图2为本申请实施例提供的农业灌溉远传水表的水表控制方法流程示意图；图3是本发明提供的电子设备的结构示意图。具体实施方式为使本发明的目的、技术方案和优点更加清楚，下面将结合本发明中的附图，对本发明中的技术方案进行清楚、完整地描述，显然，所描述的实施例是本发明一部分实施例，而不是全部的实施例。基于本发明中的实施例，本领域普通技术人员在没有作出创造性劳动前提下所获得的所有其他实施例，都属于本发明保护的范围。图1为本申请实施例提供的农业灌溉远传水表结构示意图，如图1所示，包括：实时时钟单元110、微控制单元120、供电单元130、通讯单元140和流量计量单元150；其中，所述供电单元130分别与所述微控制单元120和所述通讯单元140电连接，所述微控制单元分120别与所述供电单元130、所述流量计量单元150和所述实时时钟单元通信连接；其中，所述实时时钟单元110基于第一预设周期向所述微控制单元120发送时钟唤醒脉冲信号；所述流量计量单元150检测到灌水量脉冲信号的情况下，将所述灌水量脉冲信号发送给所述微控制单元120；所述微控制单元120在收到所述时钟唤醒脉冲信号的情况下，所述微控制单元120控制所述供电单元130向所述通讯单元140供电，所述通讯单元140进行数据上传；所述微控制单元120在收到所述灌水量脉冲信号的情况下，所述微控制单元120制所述供电单元130根据第二预设周期向所述通讯单元140供电，所述通讯单元140基于所述第二预设周期进行数据上传，其中，所述第二预设周期短于所述第一预设周期。具体地，本申请实施例中所描述的实时时钟单元为系统提供基础时间，并且该实时时钟单元能够自动在特定时间点，或者间隔特定时间段后生成唤醒休眠状态下微控制单元的时钟唤醒脉冲信号。本申请实施例中所描述的微控制单元具体可以是采用低功耗单片机搭配带电可擦可编程只读存储器；EEPROM存储目标IP、端口、流量转换系数、数据上传间隔、阀门控制参数等信息。本申请实施例中所描述的供电单元为农业灌溉远传水表中的各个单元供电，其中，实时时钟单元可以配备独立的电源，并不必然依赖于供电单元进行供电，且微控制单元能够控制供电单元是否向通讯单元供电。本申请实施例中，在有水流过灌溉管路时，流量计量单元会产生灌水量脉冲信号，该灌水量脉冲信号会被用于唤醒休眠状态的微控制单元，并且用于确定灌溉流量。具体地，本申请实施例中所描述的通讯单元具体可以通过移动通信网络实现，其具体可以是4G或者5G手机模块，也可以是WI-FI模块实现。本申请实施例中所描述的通讯单元能够通无线移动网络连接远程服务器，实现水表数据的上传。该通讯单元的电源受微控制单元的控制，仅在需要工作的时候上电开机，并完成数据上传，以保证最低功耗，对应的，微控制器可以通过供电单元给通讯单元供电的频次，实现对于水表数据上传频次的控制。在本申请实施例中的农业灌溉远传水表能够自适应的调整灌溉水量上报频次的控制。在没有用水的情况下，水表采用较低频次的上报，根据第一预设周期进行上报，例如每日上报一次数据的方式。在正在进行灌溉用水的情况下，水表自动提高数据上传的频次，通过第二预设周期进行上报，其具体可以是最快间隔5分钟。该功能能够在保证水表在整体低功耗的运行模式下，对农业灌溉用水的有效监测。在一些实施例中，通讯单元基于所述第二预设周期进行数据上传一段时间后，微控制单元不再能收到灌水量脉冲信号的情况下，此时微控制单元进行休眠，不再控制所述供电单元根据第二预设周期向所述通讯单元供电。在本申请实施例中，农业灌溉远传水表在平时保持低功耗休眠状态，仅仅通过定时时钟单元按照第一预设周期生成的时钟唤醒脉冲信号来唤醒微控制单元，进行灌溉水量上报，以此来有效控制功耗，而在流量计量单元检测到灌水量脉冲信号的时候，则说明此时很可能正在进行灌溉，此时灌溉水量变化较快，而为了保证更准确的灌溉水量同步，此时微控制单元会加大上报频次，通过短于第一预设周期的第二预设周期来进行灌溉水量上报，保证了灌溉用水量的精准检测。可选地，所述水表还包括：阀门控制单元；其中，所述阀门控制单元与所述供电单元电连接，所述阀门控制单元与所述微控制单元通信连接；所述微控制单元在收到的所述灌水量脉冲信号超过预设脉冲数的情况下，所述微控制单元控制所述供电单元将所述阀门控制单元调整为闭合状态。具体地，本申请实施例中所描述的阀门控制单元与供电单元电连接，该供电单元为满足田间应用阀门控制单元，采用脉冲输出的方式控制直流电磁阀门，为保证开关直流电磁所需的电压，本发明实施例中在供电单元中采用直流升压芯片LM2623，该芯片通过外围电路配置，能够直接将锂电池电压升高到9V，以获取开关电磁阀所需的脉冲。更具体地，本申请实施例中还可以通过微控制单元实现灌溉的定量控制，具体可以是通过灌水量脉冲信号结合时钟确定灌溉流量，对应地，可以根据预设灌溉流量来确定对应的预设脉冲数，而在微控制单元在收到的所述灌水量脉冲信号超过预设脉冲数的情况下，则说明此时灌溉的水量已经足够，无需继续进行灌溉，微控制单元控制所述供电单元将所述阀门控制单元调整为闭合状态。在一些实施例中，还通过微控制单元实现灌溉的定时控制，在微控制单元接收到灌水量脉冲信号之后，记录其对应的时钟信息，然后在预设时间段后，若仍然能接收到灌水量脉冲信息，则此时将阀门控制单元调整为闭合状态。在本申请实施例中，可以通过微控制单元配合阀门控制单元实现灌溉的定时和定量控制。可选地，所述微控制单元，具体用于：在所述微控制单元接收到所述阀门控制单元发送的阀门开启状态信息的情况下，所述微控制单元在第一预设时间内未收到所述灌水量脉冲信号时，生成阀门故障信息。所述微控制单元，具体用于：在所述微控制单元接收到所述阀门控制单元发送的阀门闭合状态信息的情况下，所述微控制单元收到所述灌水量脉冲信号时，生成阀门故障信息。具体地，本申请实施例中为了避免阀门故障导致的水资源浪费或者无法灌溉，可以通过微控制单元获取的信息来有效判断是否存在阀门是否存在故障。本申请实施例中阀门故障主要可能存在两种可能性，一种是本应该闭合的阀门，其实没有闭合，另一种情况是本应该开启的阀门，其实没有开启。具体地，在所述微控制单元接收到所述阀门控制单元发送的阀门开启状态信息的情况下，则说明此时阀门应该是开启状态，此时微控制单元应该会收到流量计量单元发送的灌水量脉冲信号，若微控制单元在第一预设时间内未收到所述灌水量脉冲信号，则说明此时阀门可能发生故障。在一些实施例中，微控制单元接收到所述阀门控制单元发送的阀门闭合状态信息的情况下，则说明此时阀门应该处于闭合状态，即此时微控制单元不会收到流量计量单元发送的灌水量脉冲信号，而若是此时微控制单元收到灌水量脉冲信号时，则说明此时阀门故障，生成阀门故障信息。在本申请实施例中，通过微控制单元所收到的数据，来有效识别阀门可能存在的故障，能够有效保证农业灌溉的顺利进行。可选地，所述水表还包括：按键模块，所述按键模块与所述微控制单元通信连接；在所述按键模块接收到用户的按键输入时，生成按键唤醒脉冲，并将所述按键唤醒脉冲发送到微控制单元；所述微控制单元在接收到所述按键唤醒脉冲后，所述微控制单元从休眠状态切换到工作状态，控制所述供电单元向所述通讯单元供电，所述通讯单元进行数据上传。具体地，本申请实施例中所描述的按键模块具体可以是磁吸式按键，避免外壳开孔，保证水表的防护等级。用户通过按压该按键模块可以生成按键唤醒脉冲，微控制单元在接收到所述按键唤醒脉冲后，所述微控制单元从休眠状态切换到工作状态，控制所述供电单元向所述通讯单元供电，所述通讯单元进行数据上传。因此用户可以通过该按键模块根据用户需求来实现对于微控制单元的唤醒。在一些实施例中，该水表还包括：LCD显示屏,该LCD显示屏可以显示当前灌溉的水量以及其它水表的状态信息，方便用户及时了解水表的相关数据。在本申请实施例中，通过按键模块，可以方便用户随时根据需求唤醒微控制单元，从而进行灌溉水量数据的上报，能够更好的满足用户多样化需求。可选地，所述供电单元，具体包括：第一电控开关、第二电控开关、升压电路、可充电锂电池和可充电保护电路；其中，所述可充电锂电池分别与所述可充电保护电路、所述第一电控开关、所述第二电控开关电连接；其中，所述第一电控开关与所述通讯单元电连接，所述第二电控开关与所述升压电路电连接，所述升压电路与所述阀门控制单元电连接，所述第一电控开关和所述第二电控开关均与所述微控制单元通信连接。具体地，本申请实施例中，第一电控开关与通讯单元电连接，也就是说第一电控开关是用于控制通讯单元供电的开关，微控制单元可以通过第一电控开关来控制是否为通讯单元供电。第二电控开关与所述升压电路电连接，微控制单元通过控制第二电控开关是否为升压电路供电，从而控制阀门控制单元，对应地，在第二电控开元开启的情况下，此时升压电路可以将锂电池的电压升高，从而获取阀门控制单元打开直流电磁阀所需的脉冲，最终实现对于电磁阀的控制。具体地，本申请实施例中的第一电控开关和第二电控开关均与微控制单元通信连接，即第一电控开关和第二电控开关均被微控制单元的控制。在本申请实施例中，通过第一电控开关和第二电控开关分别实现对于通讯单元和阀门控制单元的控制，并且通过升压电路能够将电压升高，保证对于电磁阀的有效控制。可选地，所述水表还包括：直流电磁阀，所述直流电磁阀与所述阀门控制单元电连接；其中，所述阀门控制单元为开启状态的情况下，所述阀门控制单元向所述直流电磁阀发送电磁阀开启脉冲，所述直流电磁阀响应于所述电磁阀开启脉冲，所述直流电磁阀开启；其中，所述阀门控制单元为闭合状态的情况下，所述阀门控制单元停止向所述直流电磁阀发送电磁阀开启脉冲，所述直流电磁阀关闭。本申请实施例中通过阀门控制单元对直流电磁阀的控制，从而实际控制灌溉用水的控制，能有效避免灌溉中少灌、漏灌现象的发生，保障农业生产安全，同时能够避免由于压力过大造成的灌溉管路损害，减少水资源的浪费。图2为本申请实施例提供的农业灌溉远传水表的水表控制方法流程示意图，如图2所示，包括：步骤210，微控制单元在收到时钟唤醒脉冲信号的情况下，所述微控制单元控制供电单元根据第一预设周期向通讯单元供电，所述通讯单元按照所述第一预设周期进行数据上传；步骤220，所述微控制单元在收到灌水量脉冲信号的情况下，所述微控制单元控制所述供电单元根据第二预设周期向所述通讯单元供电，所述通讯单元基于所述第二预设周期进行数据上传，其中，所述第二预设周期短于所述第一预设周期。本申请实施例中采用休眠唤醒的方式降低水表的整体功耗，提高田间的续航时间。当水表进入休眠模式后，核心运算单元关闭通讯单元、阀门控制单元的电源，降低中央处理器时钟频率，自身进入低功耗的休眠模式。有多种信号可以将核心运算单元从休眠中唤醒，唤醒信号包括时钟唤醒脉冲信号、灌水量脉冲信号等等。本申请实施例中，微控制单元被唤醒后可以有效根据灌溉用水的状态，自动改变水量数据上报频次。增加了在灌溉过程中数据上报的频次，使得当前的灌溉水量能够有效被统计和上报。在本申请实施例中，农业灌溉远传水表在平时保持低功耗休眠状态，仅仅通过定时时钟单元按照第一预设周期生成的时钟唤醒脉冲信号来唤醒微控制单元，进行灌溉水量上报，以此来有效控制功耗，而在流量计量单元检测到灌水量脉冲信号的时候，则说明此时很可能正在进行灌溉，此时灌溉水量变化较快，而为了保证更准确的灌溉水量同步，此时微控制单元会加大上报频次，通过短于第一预设周期的第二预设周期来进行灌溉水量上报，保证了灌溉用水量的精准检测。可选地，所述方法还包括：所述微控制单元接收阀门控制单元发送的阀门状态信息；在所述阀门状态信息为阀门开启状态信息，且所述微控制单元在第一预设时间内未收到所述灌水量脉冲信号的情况下，生成阀门故障信息；在所述阀门状态信息为阀门闭合状态信息，且所述微控制单元在收到所述灌水量脉冲信号的情况下，生成阀门故障信息。具体地，本申请实施例中通过阀门状态信息和接收到的灌水量脉冲信息，能够有效实现灌溉阀门故障诊断报警，通过阀门的开关状态和流量计量单元的脉冲输出判断阀门是否被打开或关闭的功能。但阀门处于打开状态时，流量计量单元因输出相应的计量脉冲，当超过一段时间无脉冲输出，说明阀门没有被正确的打开，建上报阀门故障。当阀门关闭时，仍然有脉冲信号输出，说明阀门没有被正确的关闭，同样需要上报阀门故障。该功能能够保障农业灌溉的安全性，减少多灌、漏灌发生的可能性，同时能够提高灌溉管路的安全性。可选地，所述方法还包括：在所述微控制单元在收到时钟唤醒脉冲信号、灌水量脉冲信号或者按键唤醒脉冲的情况下，获取连续的灌水量脉冲信号的脉冲数量；在所述脉冲数量超过预设阈值的情况下，生成阀门闭合控制信息。具体地，当有水流过灌溉管路时，流量计量单元产生脉冲信号，该信号在被计量的同时，作为微控制单元的唤醒源，实现在水表休眠情况下，只要有水流过灌溉管路，水表就被唤醒，记录流量，并转换通讯频次。在一些实施例中微控制单元也可以被时钟唤醒脉冲信号或者按键唤醒脉冲唤醒，更具体地，在微控制单元被唤醒后可以获取连续的灌水量脉冲信号的脉冲数量，并根据其确定灌溉水量，在水量超过预设灌溉水量，即脉冲数量超过预设阈值的情况下，关闭电磁阀，生成阀门闭合控制信息。在本申请实施例中，微控制单元可以实现对于定量灌溉功能，能够有效帮助农业灌溉生产。图3是本发明提供的电子设备的结构示意图，如图3所示，该电子设备可以包括：处理器310、通信接口320、存储器330和通信总线340，其中，处理器310，通信接口320，存储器330通过通信总线340完成相互间的通信。处理器310可以调用存储器330中的逻辑指令，以执行水表控制方法，该方法包括：微控制单元在收到时钟唤醒脉冲信号的情况下，所述微控制单元控制供电单元根据第一预设周期向通讯单元供电，所述通讯单元按照所述第一预设周期进行数据上传；所述微控制单元在收到灌水量脉冲信号的情况下，所述微控制单元控制所述供电单元根据第二预设周期向所述通讯单元供电，所述通讯单元基于所述第二预设周期进行数据上传，其中，所述第二预设周期短于所述第一预设周期。此外，上述的存储器330中的逻辑指令可以通过软件功能单元的形式实现并作为独立的产品销售或使用时，可以存储在一个计算机可读取存储介质中。基于这样的理解，本发明的技术方案本质上或者说对现有技术做出贡献的部分或者该技术方案的部分可以以软件产品的形式体现出来，该计算机软件产品存储在一个存储介质中，包括若干指令用以使得一台计算机设备执行本发明各个实施例所述方法的全部或部分步骤。而前述的存储介质包括：U盘、移动硬盘、只读存储器、随机存取存储器、磁碟或者光盘等各种可以存储程序代码的介质。另一方面，本发明还提供一种计算机程序产品，所述计算机程序产品包括计算机程序，计算机程序可存储在非暂态计算机可读存储介质上，所述计算机程序被处理器执行时，计算机能够执行上述各方法所提供的水表控制方法，该方法包括：微控制单元在收到时钟唤醒脉冲信号的情况下，所述微控制单元控制供电单元根据第一预设周期向通讯单元供电，所述通讯单元按照所述第一预设周期进行数据上传；所述微控制单元在收到灌水量脉冲信号的情况下，所述微控制单元控制所述供电单元根据第二预设周期向所述通讯单元供电，所述通讯单元基于所述第二预设周期进行数据上传，其中，所述第二预设周期短于所述第一预设周期。又一方面，本发明还提供一种非暂态计算机可读存储介质，其上存储有计算机程序，该计算机程序被处理器执行时实现以执行上述各方法提供的水表控制方法，该方法包括：微控制单元在收到时钟唤醒脉冲信号的情况下，所述微控制单元控制供电单元根据第一预设周期向通讯单元供电，所述通讯单元按照所述第一预设周期进行数据上传；所述微控制单元在收到灌水量脉冲信号的情况下，所述微控制单元控制所述供电单元根据第二预设周期向所述通讯单元供电，所述通讯单元基于所述第二预设周期进行数据上传，其中，所述第二预设周期短于所述第一预设周期。以上所描述的装置实施例仅仅是示意性的，其中所述作为分离部件说明的单元可以是或者也可以不是物理上分开的，作为单元显示的部件可以是或者也可以不是物理单元，即可以位于一个地方，或者也可以分布到多个网络单元上。可以根据实际的需要选择其中的部分或者全部模块来实现本实施例方案的目的。本领域普通技术人员在不付出创造性的劳动的情况下，即可以理解并实施。通过以上的实施方式的描述，本领域的技术人员可以清楚地了解到各实施方式可借助软件加必需的通用硬件平台的方式来实现，当然也可以通过硬件。基于这样的理解，上述技术方案本质上或者说对现有技术做出贡献的部分可以以软件产品的形式体现出来，该计算机软件产品可以存储在计算机可读存储介质中，如ROM/RAM、磁碟、光盘等，包括若干指令用以使得一台计算机设备执行各个实施例或者实施例的某些部分所述的方法。最后应说明的是：以上实施例仅用以说明本发明的技术方案，而非对其限制；尽管参照前述实施例对本发明进行了详细的说明，本领域的普通技术人员应当理解：其依然可以对前述各实施例所记载的技术方案进行修改，或者对其中部分技术特征进行等同替换；而这些修改或者替换，并不使相应技术方案的本质脱离本发明各实施例技术方案的精神和范围。
