标题title
骨折复位路径规划方法、骨折复位方法及电子设备
摘要abst
本发明提出了一种骨折复位路径规划方法、骨折复位方法及电子设备，骨折复位路径规划方法包括：获取骨折数据；根据所述骨折数据确定骨折类型以及断骨远端相对于断骨近端的初始位姿数据和目标位姿数据；根据所述骨折类型确定路径规划的节点搜索范围；根据所述初始位姿数据和所述目标位姿数据，在所述节点搜索范围内进行路径节点采样，以得到骨折复位路径。本发明的有益效果：能够减少骨折复位造成的损伤。
权利要求书clms
1.一种骨折复位路径规划方法，其特征在于，包括：获取骨折数据；根据所述骨折数据确定骨折类型以及断骨远端相对于断骨近端的初始位姿数据和目标位姿数据；根据所述骨折类型确定路径规划的节点搜索范围；根据所述初始位姿数据和所述目标位姿数据，在所述节点搜索范围内进行路径节点采样，以得到骨折复位路径。2.根据权利要求1所述的骨折复位路径规划方法，其特征在于，所述根据所述骨折类型确定路径规划的节点搜索范围包括：当所述骨折类型为粉碎性骨折或重叠长度小于预设重叠长度的骨折类型时，在沿牵引力线方向上，所述节点搜索范围为与预设复位最短距离匹配的搜索间距；当所述骨折类型为面对面型且所述重叠长度大于或等于预设重叠长度的骨折类型时，在沿所述牵引力线方向上，所述节点搜索范围小于或等于预设牵引距离极限值；当所述骨折类型为背对背型且所述重叠长度大于或等于预设重叠长度的骨折类型时，在沿所述牵引力线方向上，所述节点搜索范围小于或等于所述预设牵引距离极限值，在与所述牵引力线方向垂直的方向上，确定所述节点搜索范围为满足远端骨绕近端骨旋转的范围。3.根据权利要求1所述的骨折复位路径规划方法，其特征在于，所述根据所述初始位姿数据和所述目标位姿数据，在所述节点搜索范围内进行路径节点采样，以得到骨折复位路径包括：以所述初始位姿数据对应的位姿节点为根节点，根据RRT*算法以及所述节点搜索范围生成路径树；当存在一所述路径树的子节点与所述目标位姿数据对应的位姿节点相匹配时，生成所述骨折复位路径，其中，所述骨折复位路径包括所述路径树中所述根节点到子节点中路径的位姿节点集合。4.根据权利要求3所述的骨折复位路径规划方法，其特征在于，所述根据RRT*算法以及所述节点搜索范围生成路径树包括：判断由RRT*算法生成的新增子节点对应的断骨远端是否与所述目标位姿数据对应的断骨近端产生碰撞；若否，则将所述新增子节点作为所述路径树的子节点。5.根据权利要求4所述的骨折复位路径规划方法，其特征在于，所述判断由RRT*算法生成的新增子节点对应的断骨远端是否与所述目标位姿数据对应的断骨近端产生碰撞包括：对所述断骨近端的近端模型数据进行八叉树空间剖分，直到形成的子包围盒空间内数据点小于设定的数量点阈值时，停止剖分，得到包含断骨近端数据的八叉树结构；根据所述八叉树结构和所述断骨远端的远端模型数据判断是否产生所述碰撞。6.根据权利要求5所述的骨折复位路径规划方法，其特征在于，根据所述八叉树结构和所述断骨远端的远端模型数据判断是否产生所述碰撞包括：遍历所述八叉树结构所处的空间，判断所述空间是否包括所述远端模型数据的数据点；若否，则判定未产生碰撞；若是，则对所述断骨远端和所述断骨近端的点云进行三角形剖分，得到远端三角形面片和近端三角形面片，根据所述远端三角形面片和所述近端三角形面片的空间位置关系，判断是否产生所述碰撞。7.根据权利要求6所述的骨折复位路径规划方法，其特征在于，所述根据所述远端三角形面片和所述近端三角形面片的空间位置关系，判断是否产生所述碰撞包括：确定所述远端三角形面片和所述近端三角形面片的顶点坐标；根据所述近端三角形面片的所述顶点坐标确定所述近端三角形面片所处平面的近端面片平面方程；根据所述远端三角形面片的所述顶点坐标和所述近端面片平面方程，判断所述远端三角形面片的顶点是否均位于所述近端三角形面片所处平面的同一侧；若是，则判定未产生所述碰撞。8.根据权利要求7所述的骨折复位路径规划方法，其特征在于，所述根据所述远端三角形面片和所述近端三角形面片的空间位置关系，判断是否产生所述碰撞还包括：当判定所述远端三角形面片的顶点不位于所述近端三角形面片所处平面的同一侧时，根据所述远端三角形面片和所述近端三角形面片的顶点坐标分别确定所述近端三角形面片所处平面和所述远端三角形面片所处平面的平面交线；根据所述平面交线和所述远端三角形面片的所述顶点坐标，确定所述远端三角形面片与所述近端三角形面片所处平面的远端面片交线线段，以及根据所述平面交线和所述近端三角形面片的所述顶点坐标，确定所述近端三角形面片与所述远端三角形面片所处平面的近端面片交线线段；判断所述远端面片交线线段和所述近端面片交线线段是否存在重叠部分；若是，则判定产生所述碰撞。9.一种骨折复位方法，其特征在于，包括：基于如权利要求1-8任一项所述的骨折复位路径规划方法得到骨折复位路径，其中，骨折复位路径包括位姿节点集合；确定所述位姿节点集合中相邻的位姿节点的断面点集；确定所述断面点集中同一断面点的间距；根据所述间距确定相邻的所述位姿节点的损失函数；根据所述损失函数确定骨折复位过程中的复位移动距离。10.一种电子设备，其特征在于，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，当所述处理器执行所述程序时，实现如权利要求1-8任一项所述的骨折复位路径规划方法或如权利要求9所述的骨折复位方法。
说明书desc
技术领域本发明涉及骨折复位技术领域，具体而言，涉及一种骨折复位路径规划方法、骨折复位方法及电子设备。背景技术传统的骨折复位手术，例如胫骨骨折的复位，通常借助术中的X光影像，了解复位过程中的断骨的状态后，基于多名医生对患者的肌肉进行牵拉，实现骨折复位，其中，对于状态的判断主要依赖于医生的经验，存在手术精度不高的问题，并且由于医生和患者长期暴露在X光线下，受到辐射影响，并身体健康非常不利。机器人辅助骨折复位的手术，可以提高手术操作的精度，并且创伤较小，能够减少手术并发症。现有的方法，通常基于实验室的理论情况对骨折复位的路径进行预设，以此会存在移动范围过大，造成患者医源性的软组织创伤的问题。发明内容本发明旨在至少在一定程度上解决相关技术中的技术问题，为达上述目的，本发明提供一种骨折复位路径规划方法，包括步骤：获取骨折数据；根据所述骨折数据确定骨折类型以及断骨远端相对于断骨近端的初始位姿数据和目标位姿数据；根据所述骨折类型确定路径规划的节点搜索范围；根据所述初始位姿数据和所述目标位姿数据，在所述节点搜索范围内进行路径节点采样，以得到骨折复位路径。本发明中的骨折复位路径规划方法，通过实际确定患者骨折类型，对路径规划的节点搜索范围进行确定限制，以及最终根据能够表示两部分断骨位置和姿态的初始位姿数据和所述目标位置数据对复位路径进行规划，得到路径节点，以此得到更适用于患者进行骨折复位的路径，以避免对患者造成损伤。进一步地，所述根据所述骨折类型确定路径规划的节点搜索范围包括步骤：当所述骨折类型为粉碎性骨折或重叠长度小于预设重叠长度的骨折类型时，在沿牵引力线方向上，所述节点搜索范围为与预设复位最短距离匹配的搜索间距；当所述骨折类型为面对面型且所述重叠长度大于或等于预设重叠长度的骨折类型时，在沿所述牵引力线方向上，所述节点搜索范围小于或等于预设牵引距离极限值；当所述骨折类型为背对背型且所述重叠长度大于或等于预设重叠长度的骨折类型时，在沿所述牵引力线方向上，所述节点搜索范围小于或等于所述预设牵引距离极限值，在与所述牵引力线方向垂直的方向上，确定所述节点搜索范围为满足远端骨绕近端骨旋转的范围。进一步地，所述根据所述初始位姿数据和所述目标位姿数据，在所述节点搜索范围内进行路径节点采样，以得到骨折复位路径包括步骤：以所述初始位姿数据对应的位姿节点为根节点，根据RRT*算法以及所述节点搜索范围生成路径树；当存在一所述路径树的子节点与所述目标位姿数据对应的位姿节点相匹配时，生成所述骨折复位路径，其中，所述骨折复位路径包括所述路径树中所述根节点到子节点中路径的位姿节点集合。进一步地，所述根据RRT*算法以及所述节点搜索范围生成路径树包括步骤：判断由RRT*算法生成的新增子节点对应的断骨远端是否与所述目标位姿数据对应的断骨近端产生碰撞；若否，则将所述新增子节点作为所述路径树的子节点。进一步地，所述判断由RRT*算法生成的新增子节点对应的断骨远端是否与所述目标位姿数据对应的断骨近端产生碰撞包括步骤：对所述断骨近端的近端模型数据进行八叉树空间剖分，直到形成的子包围盒空间内数据点小于设定的数量点阈值时，停止剖分，得到包含断骨近端数据的八叉树结构；根据所述八叉树结构和所述断骨远端的远端模型数据判断是否产生所述碰撞。进一步地，根据所述八叉树结构和所述断骨远端的远端模型数据判断是否产生所述碰撞包括步骤：遍历所述八叉树结构所处的空间，判断所述空间是否包括所述远端模型数据的数据点；若否，则判定未产生碰撞；若是，则对所述断骨远端和所述断骨近端的点云进行三角形剖分，得到远端三角形面片和近端三角形面片，根据所述远端三角形面片和所述近端三角形面片的空间位置关系，判断是否产生所述碰撞。进一步地，所述根据所述远端三角形面片和所述近端三角形面片的空间位置关系，判断是否产生所述碰撞包括步骤：确定所述远端三角形面片和所述近端三角形面片的顶点坐标；根据所述近端三角形面片的所述顶点坐标确定所述近端三角形面片所处平面的近端面片平面方程；根据所述远端三角形面片的所述顶点坐标和所述近端面片平面方程，判断所述远端三角形面片的顶点是否均位于所述近端三角形面片所处平面的同一侧；若是，则判定未产生所述碰撞。进一步地，所述根据所述远端三角形面片和所述近端三角形面片的空间位置关系，判断是否产生所述碰撞还包括步骤：当判定所述远端三角形面片的顶点不位于所述近端三角形面片所处平面的同一侧时，根据所述远端三角形面片和所述近端三角形面片的顶点坐标分别确定所述近端三角形面片所处平面和所述远端三角形面片所处平面的平面交线；根据所述平面交线和所述远端三角形面片的所述顶点坐标，确定所述远端三角形面片与所述近端三角形面片所处平面的远端面片交线线段，以及根据所述平面交线和所述近端三角形面片的所述顶点坐标，确定所述近端三角形面片与所述远端三角形面片所处平面的近端面片交线线段；判断所述远端面片交线线段和所述近端面片交线线段是否存在重叠部分；若是，则判定产生所述碰撞。本发明还提出了一种骨折复位方法，包括步骤：基于如上所述的骨折复位路径规划方法得到骨折复位路径，其中，骨折复位路径包括位姿节点集合；确定所述位姿节点集合中相邻的位姿节点的断面点集；确定所述断面点集中同一断面点的间距；根据所述间距确定相邻的所述位姿节点的损失函数；根据所述损失函数确定骨折复位过程中的复位移动距离。本发明中的骨折复位方法，其有益效果与上述骨折复位路径规划方法的有益效果相近似，在此不再进行赘述。本发明还提出了一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，当所述处理器执行所述程序时，实现如上述的骨折复位路径规划方法或如上述骨折复位方法。本发明中的电子设备，其有益效果与上述骨折复位路径规划方法和骨折复位方法的有益效果相近似，在此不再进行赘述。本发明还提出了一种手术机器人，包括如上述的电子设备。本发明中的手术机器人，其有益效果与上述骨折复位路径规划方法和骨折复位方法的有益效果相近似，在此不再进行赘述。附图说明图1为本发明实施例中的骨折复位路径规划方法的流程图；图2为本发明实施例中的几种骨折类型的示意图；图3为本发明实施例中的对断骨远端和断骨近端进行碰撞检测的流程示意图；图4为本发明实施例中的断骨远端和断骨近端的三角形面片示意图一；图5为本发明实施例中的断骨远端和断骨近端的三角形面片示意图二；图6为本发明实施例中的断骨远端和断骨近端的三角形面片示意图三。具体实施方式为使本发明的上述目的、特征和优点能够更为明显易懂，下面结合附图对本发明的具体实施例做详细的说明。要说明的是，本发明的说明书和权利要求书及上述附图中的术语“第一”、“第二”等是用于区别类似的对象，而不必用于描述特定的顺序或先后次序。应该理解这样使用的数据在适当情况下可以互换，以便这里描述的本发明的实施例能够以除了在这里图示或描述的那些以外的顺序实施。在本说明书的描述中，参考术语“实施例”、“一个实施例”和“一个实施方式”等的描述意指结合该实施例或实施方式描述的具体特征、结构、材料或者特点包含于本发明的至少一个实施例或示实施方式中。在本说明书中，对上述术语的示意性表述不一定指的是相同的实施例或实施方式。而且，描述的具体特征、结构、材料或者特点可以在任何的一个或多个实施例或实施方式以合适的方式结合。结合图1所示，本发明实施例提出了一种骨折复位路径规划方法，包括步骤：S1、获取骨折数据；S2、根据所述骨折数据确定骨折类型以及断骨远端相对于断骨近端的初始位姿数据和目标位姿数据；S3、根据所述骨折类型确定路径规划的节点搜索范围；S4、根据所述初始位姿数据和所述目标位姿数据，在所述节点搜索范围内进行路径节点采样，以得到骨折复位路径。本实施例中，获取的骨折数据可以为患者骨折的状态和复位的目标参数，基于具体患者的数据，可以进行患者骨折类型的区分确定，以及得到患者断骨远端和断骨近端的初始位姿数据和目标位姿数据。初始位姿数据和目标位姿数据均包括断骨的位置和姿态，对于患者的断骨，参照图2所示，断骨后，骨头可分为两个部分，其中一部分为断骨远端部分，另一部分为断骨近端部分，在进行骨折复位时，断骨远端部分朝向断骨近端部分移动，以进行复位。对于骨折，不同程度的骨折以及两部分断骨实际姿态不同的情况下，在骨折复位时带给患者的感知不同，若采用统一标准进行复位的路径规划，容易提高患者受到二次伤害的风险，因此本发明实施例中，通过实际确定患者骨折类型，对路径规划的节点搜索范围进行确定限制，以及最终根据能够表示两部分断骨位置和姿态的初始位姿数据和所述目标位置数据对复位路径进行规划，得到路径节点，以此得到更适用于患者进行骨折复位的路径，以避免对患者造成损伤。可以理解，对于骨折复位路径，其主要由复位的初始位置和最终目标位置之间采样若干路径节点，初始点、终点、路径节点的连线构成最终的骨折复位路径，以此指导机器进行骨折修复。在本发明的一个可选的实施例中，对于患者的断骨远端相对于断骨近端在空间中的位置和姿态的描述，通过三维映射变换矩阵表示，初始位姿数据为变换矩阵Hstart，目标位姿数据为变换矩阵Htarget，其中，变换矩阵的表示为：其中，R为旋转变换部分，对应即表示姿态的姿态矩阵的R3×3；T为平移变换的部分，对应即表示位置的位置矩阵T3×1；V为透视变换部分，其元素值为0,；s为比例因子，其值等于1。对于姿态矩阵，其具有9个参数变量，本发明实施例中，采用四元数，对参数进行处理，通过四变量来描述空间中的姿态，由此可以进行球面线性插值，将旋转矩阵R3×3转换为四元数表示，则可将姿态的部分表示为：q＝w+xi+yj+zk。通过四元数构建出旋转矩阵R，四元数为行主序的旋转矩阵，那该旋转矩阵为：通过对旋转矩阵元素进行处理，可以得到：可以通过使用一个表达式表达分量w，进而表示x,y,z的分量。旋转矩阵的迹，可以表示：trace＝m11+m22+m33＝4w2-1。进而转换为四元数得到表示姿态的四个参数，分别为：基于此，可以将断骨的两个位姿数据中的空间位置姿态通过T进行表示，空间位置通过T进行表示，最终，用于路径规划的初始位姿数据和目标位姿数据可以分别表示为：在本发明的一个可选的实施例中，所述根据所述骨折类型确定路径规划的节点搜索范围包括：当所述骨折类型为粉碎性骨折或重叠长度小于预设重叠长度的骨折类型时，在沿牵引力线方向上，所述节点搜索范围为与预设复位最短距离匹配的搜索间距；当所述骨折类型为面对面型且所述重叠长度大于或等于预设重叠长度的骨折类型时，在沿所述牵引力线方向上，所述节点搜索范围小于或等于预设牵引距离极限值；当所述骨折类型为背对背型且所述重叠长度大于或等于预设重叠长度的骨折类型时，在沿所述牵引力线方向上，所述节点搜索范围小于或等于所述预设牵引距离极限值，在与所述牵引力线方向垂直的方向上，确定所述节点搜索范围为满足远端骨绕近端骨旋转的范围。在医学临床中，通常对骨折进行分型，具体即可分为A型骨折、B型骨折和C型骨折等骨折类型，其中C型骨折又可细分为C1型和C2型。其中A型骨折为粉碎性骨折，B型骨折为重叠长度小于预设重叠长度，例如小于8mm的骨折，如图2中，类的骨折特征可能为A型骨折或B型骨折。对于C1型骨折，其重叠长度大于或等于8mm，且两个断骨的接骨处处于面对面型，例如图2中类的骨折特征。对于C2型骨折，其重叠长度大于或等于8mm，且两个断骨的接骨处处于背对背型，例如图2中类的骨折特征。由于在骨折复位中，通常骨折裂缝间隙超过10mm，在牵引复位时，便可能发生医源性软组织损伤，因此本发明实施例中，对于具体的不同类型的骨折，设定不同的节点搜索范围，以适应性能够确定得到对应不同骨折类型的骨折复位路径，以避免复位造成患者损伤。其中，对于A型骨折和B型骨折，设置的路径节点搜索范围主要为限制牵引力线方向上的搜索范围，即使范围为满足与预设复位最短距离匹配的搜索间距，本实施例中，预设复位最短距离为2mm，而在垂直于牵引力线方向的两个方向上，可设置包含初始节点和目标节点在内的合适位置。对于C1型骨折，在沿所述牵引力线方向上，所述节点搜索范围小于或等于预设牵引距离极限值，本实施例中，即设定为小于10mm，在垂直于牵引力线方向的两个方向上，可设置包含初始节点和目标节点在内的合适位置。对于C2型骨折，在沿所述牵引力线方向上，所述节点搜索范围小于或等于预设牵引距离极限值即设定为小于10mm，在垂直于牵引力线方向的两个方向上，需要确定所述节点搜索范围为满足远端骨绕近端骨旋转的范围，具体可根据断骨数据进行确定，以此避免医源性软组织损伤。在本发明的一个可选的实施例中，所述根据所述初始位姿数据和所述目标位姿数据，在所述节点搜索范围内进行路径节点采样，以得到骨折复位路径包括步骤：以所述初始位姿数据对应的位姿节点为根节点，根据RRT*算法以及所述节点搜索范围生成路径树；当存在一所述路径树的子节点与所述目标位姿数据对应的位姿节点相匹配时，生成所述骨折复位路径，其中，所述骨折复位路径包括所述路径树中所述根节点到子节点中路径的位姿节点集合。本发明实施例中，基于RRT*算法对骨折复位路径进行确定，其中，通过骨折类型设定节点搜索范围以限定RRT*算法的搜索空间范围，以此，避免基于得到的骨折复位路径进行骨折复位时，造成因为牵拉过渡引起的复位过程中的医源性损伤。具体地，参照图2所示，图中，、和三种骨折类型，其中P0表示断骨远端的初始点，即所述初始位姿数据的位姿节点，Pg表示需要复位的目标点，即目标位姿数据对应的位姿节点。在基于RRT*算法进行复位路径规划时，以初始位姿数据对应的位姿节点，即初始节点Hstart为根节点，在设定的节点搜索范围内开始生长，当路径树的某一子节点与所述目标位姿数据对应的位姿节点相匹配时，例如到达目标的位姿节点Ht arg et，或者是到达其附近的预设范围内时，此时，返回该子节点到根节点的路径即为骨折复位路径。对于该骨折复位路径的形式，用Γ表示，其包括有所述路径树中所述根节点到子节点中路径的位姿节点集合V和连接各节点的边集合E。具体地，在生成路径树时，在节点搜索范围设定的规划空间Q内，从根节点开始，生成随机的节点Hrand，在生成的路径树中寻找与随机节点Hrand最近的节点Hnearest，从而生成新的扩展节点Hnew。将这个新的扩展节点Hnew加入到骨折复位路径Γ的节点集合V中，并完成新的扩展节点重新选择父节点的操作，之后对路径进行重新布线。当路径树Γ有子节点与目标点Ht arg et重合或在附近区域内，则完成整个路径的搜索。在本发明的一个可选的实施例中，所述根据RRT*算法以及所述节点搜索范围生成路径树包括：判断由RRT*算法生成的新增子节点对应的断骨远端是否与所述目标位姿数据对应的断骨近端产生碰撞；若否，则将所述新增子节点作为所述路径树的子节点。本实施例中，在确定节点Hnearest为新的扩展节点Hnew的过程中，可检测该节点的位姿，判断断骨近端和断骨远端是否会产生碰撞，若判断不会产生碰撞，才将该节点加入到骨折复位路径Γ的节点集合V中，以此便于实现更加可靠的骨折复位操作。在本发明的一个可选的实施例中，所述判断由RRT*算法生成的新增子节点对应的断骨远端是否与所述目标位姿数据对应的断骨近端产生碰撞包括步骤：对所述断骨近端的近端模型数据进行八叉树空间剖分，直到形成的子包围盒空间内数据点小于设定的数量点阈值时，停止剖分，得到包含断骨近端数据的八叉树结构；根据所述八叉树结构和所述断骨远端的远端模型数据判断是否产生所述碰撞。本实施例中，可以通过空间八叉树划分进行断骨复位过程中的碰撞检测，以确定骨折复位路径中的新增子节点是否可作为路径树的子节点，以此进行骨折复位路径的规划。具体地，根据所述八叉树结构和所述断骨远端的远端模型数据判断是否产生所述碰撞包括步骤：遍历所述八叉树结构所处的空间，判断所述空间是否包括所述远端模型数据的数据点；若否，则判定未产生碰撞；若是，则对所述断骨远端和所述断骨近端的点云进行三角形剖分，得到远端三角形面片和近端三角形面片，根据所述远端三角形面片和所述近端三角形面片的空间位置关系，判断是否产生所述碰撞。参照图3所示，本实施例中，具体采用八叉树空间划分，通过对断骨近端的近端模型数据进行八叉树空间划分，形成八个子包围盒，直到划分到预设的每个包围盒的数量为止，形成八叉树结构。之后利用完全一样的八叉树结构，对断骨远端的远端模型数据进行八叉树空间划分，在八叉树空间划分完毕之后，遍历八叉树结构所处的八叉树空间，判断该空间是否包括远端模型数据的数据点，也即具体检测包围盒是否同时包含两个模型的数据，若同时存在，则说明可能发生碰撞若没有同时存在两个模型的数据，则可直接判定未发生碰撞。其中，若判断可能产生碰撞，采用对断骨远端和断骨近端的点云进行三角形剖分，得到远端三角形面片和近端三角形面片，基于两个面片的空间位置关系，来确定是否产生碰撞，以此进行更加进准地路径节点筛选。在本发明的一个可选的实施例中，所述根据所述远端三角形面片和所述近端三角形面片的空间位置关系，判断是否产生所述碰撞包括步骤：确定所述远端三角形面片和所述近端三角形面片的顶点坐标；根据所述近端三角形面片的所述顶点坐标确定所述近端三角形面片所处平面的近端面片平面方程；根据所述远端三角形面片的所述顶点坐标和所述近端面片平面方程，判断所述远端三角形面片的顶点是否均位于所述近端三角形面片所处平面的同一侧；若是，则判定未产生所述碰撞。本发明的一个可选的实施例中，根据远端三角形面片和近端三角形面片进行碰撞判断时具体过程可如下。为方便表述，令近端三角形面片为T1，远端三角形面片为T2。参照图4所示，对于空间中表示近端三角形面片和远端三角形面片的两个三角形T1和T2，其中三角形T1的顶点坐标为V1,1、V1,2和V1,3，三角形T2的顶点坐标为V2,1、V2,2和V2,3。三角形T1所在的平面为α1，三角形T2所在的平面为α2。此时，平面α1的方程即为：其中为平面α1的法向量，P为平面α1上的任意一点，取P点为点V1,1，则可以得到：对于平面α1和三角形T2的三个顶点V2,1、V2,2和V2,3，若同时满足：或同时满足：则说明三角形T2的三个顶点V2,1、V2,2和V2,3位于平面α1的同一侧，此时也即判定三角形T1和三角形T2为相离，对应即判定未产生碰撞。其中，也可通过所述远端三角形面片的所述顶点坐标确定所述远端三角形面片所处平面的远端面片平面方程；根据所述近端三角形面片的所述顶点坐标和所述远端面片平面方程，判断所述近端三角形面片的顶点是否均位于所述远端三角形面片所处平面的同一侧，以此碰断是否产生碰撞。对于远端三角形面片所处平面的远端面片平面方程，其方程α2为：其中为平面α2的法向量，P为平面α2上的任意一点，取P点为点V2,1，则可以得到：其中，进一步地具体利用远端面片平面方程与近端三角形面片的顶点坐标确定是否产生碰撞的方式与上述方式近似，在此不再进行赘述。当判定所述远端三角形面片的顶点不位于所述近端三角形面片所处平面的同一侧时，可进一步根据所述远端三角形面片和所述近端三角形面片的顶点坐标分别确定所述近端三角形面片所处平面和所述远端三角形面片所处平面的平面交线；根据所述平面交线和所述远端三角形面片的所述顶点坐标，确定所述远端三角形面片与所述近端三角形面片所处平面的远端面片交线线段，以及根据所述平面交线和所述近端三角形面片的所述顶点坐标，确定所述近端三角形面片与所述远端三角形面片所处平面的近端面片交线线段；判断所述远端面片交线线段和所述近端面片交线线段是否存在重叠部分；若是，则判定产生所述碰撞。本实施例中，当顶点V2,1、V2,2和V2,3分布在平面α1的不同侧时，进一步判断三角形T1和三角形T2是否相交，以确定是否产生碰撞。此时，平面α1和平面α2存在交线L，交线L的方向向量表示为：三角形T1三条边V1,1V1,2、V1,2V1,3和V1,1V1,3所在的直线表示为L1,1、L1,2和L1,3，同理，三角形T2三条边V2,1V2,2、V2,2V2,3和V2,1V2,3所在的直线表示为L2,1、L2,2和L2,3。在进行远端面片交线线段和近端面交线线段的确认时，可包括如下几种情况：第一种，分别判断三角形T1的三条直线是否有直线与交线L共线，若有，则三角形T1的此条边为三角形的交线线段；同理，判断三角形T2的三条边所在直线是否与交线L共线，若存在，则三角形T2的此条边为三角形的交线线段，即远端面片交线线段。相对应地，对于三角形T1的交线线段，即近端面片交线线段也可用相同方式进行确定。如图5中，情况为两个三角形无相交线段情况，情况为有相交线段情况。第二种，若三角形T1的三条直线和三角形T2的三条直线与交线L都不共线，此情况如图6中，表示不共线以及无相交线段情况，以及表示不共线但有相交线段情况。此时，可分别求三角形T1的三条直线和三角形T2三条直线与交线L的交点。如求解直线L1,1与交线L的交点，通过点在平面α1、平面α2和直线L1,1，联立求解出交点坐标M1,1，具体求解公式为：同理，可以求得其他5条直线与交线L的交点M1,2、M1,3、M2,1、M2,2、M2,3之后，判断交点是否处于三角形的边长线段内，判断条件为：剔除掉不满足条件的点之后，将其他点连接，即得到交线线段。在分别求解三角形T1和三角形T2的交线线段之后，通过判断两条交线线段是否存在重叠的部分的线段，以此，即可判断两个三角形相交或分离的情况，由此进行断骨远端和断骨近端碰撞情况地判断，以能够更准确合理地筛选路径节点。本发明另一实施例中的一种骨折复位方法，包括步骤：基于上所述的骨折复位路径规划方法得到骨折复位路径，其中，骨折复位路径包括位姿节点集合；确定所述位姿节点集合中相邻的位姿节点的断面点集；确定所述断面点集中同一断面点的间距；根据所述间距确定相邻的所述位姿节点的损失函数；根据所述损失函数确定骨折复位过程中的复位移动距离。本发明实施例中的骨折复位方法，基于上述骨折复位路径规划方法，能够得到骨折复位路径，并具体包括路径中各位姿节点的集合，在骨折复位中，需要尽可能满足每次移动距离较小，而减小对患者的伤害，因此，对于相邻的位姿节点，确定节点的断面点集，具体地，相邻的位姿节点断面点集分别为Pnew＝{p1,p2,…,pn}和Pnearest＝{p′1,p′2,…,p′n}，其中p1,p2,…,pn分别与p′1,p′2,…,p′n对应，表示不同时刻的同一断面点，由此可计算两个相同断面点的间距，以坐标形式表示为2+2+2，基于此，确定相邻的位姿节点的损失函数为：最终通过该损失函数进行骨折复位过程中复位移动距离的衡量，以此减小对患者的伤害。本发明另一实施例的一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，当所述处理器执行所述程序时，实现如上所述的骨折复位路径规划方法或骨折复位方法。本发明实施例中的电子设备，其有益效果与上述骨折复位路径规划方法和骨折复位方法的有益效果相近似，在此不再进行赘述。本发明另一实施例的一种手术机器人，包括如上述的电子设备。本发明实施例中的手术机器人，其有益效果与上述骨折复位路径规划方法和骨折复位方法的有益效果相近似，在此不再进行赘述。虽然本公开披露如上，但本公开的保护范围并非仅限于此。本领域技术人员在不脱离本公开的精神和范围的前提下，可进行各种变更与修改，这些变更与修改均将落入本发明的保护范围。
